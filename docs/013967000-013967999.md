# StackOverflow 问答 13967000-13967999

# relational-database - 如何在 WinSQL 中查找未知表中的字段？

> ID：13967005
> 
> 赞同：0
> 
> 时间：2012-12-20T07:13:28.443
> 
> 标签：relational-database

我知道一个字段的名称，但我不知道该表。

```
 use "DatabaseName"
GO 
```

SELECT t.name AS table_name,

```
SCHEMA_NAME(schema_id) AS schema_name, 
```

c.name AS column_name

```
FROM sys.tables AS t

INNER JOIN sys.columns c ON t.OBJECT_ID = c.OBJECT_ID 
```

WHERE c.name LIKE '%Company%'

按模式名、表名排序；

在 Microsft Sql 中，我使用上述语法得到了结果，但在 WinSQL 中没有得到结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:30:07.253

这实际上取决于您要连接的数据库类型，但我怀疑无论它是什么，都会有一些相当于 SQL Server 的 INFORMATION_SCHEMA.COLUMNS。在 SQL Server 中，您只需编写：

```
DECLARE @col varchar(50);
SET @col = 'my_col';

SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE COLUMN_NAME = @col; 
```

# javascript - 如何使用以及什么是 soda api & javascript require()

> ID：13967011
> 
> 赞同：0
> 
> 时间：2012-12-20T07:13:57.480
> 
> 标签：javascript, require, opendata, socrata

我想将[http://data.seattle.gov/api/views/kzjm-xkqj/rows.json](http://data.seattle.gov/api/views/kzjm-xkqj/rows.json)的数据与 SODA API 一起使用。

在 API DOCS 中，我发现它使用了一种语言 ruby​​、python、coffeescript、cURL。它使用 require() 函数。
但我不知道 require() 函数是如何工作的。我发现了需求。是不是类似于 jscript 文件的加载器？？？

我认为第一行可能是......使用这种方式

```
require 'https://soda.demo.socrata.com/resource/earthquakes.json?source=uw'

request = require 'request'
options = uri: 'https://soda.demo.socrata.com/resource/earthquakes.json?
$$app_token=APP_TOKEN&recall_id=94'
request options, (err, response, body) ->  console.log body 
```

我将咖啡脚本更改为 javascript，但我仍然不知道。var 选项，请求；

```
request = require('request');
options = {uri: 'https://data.seattle.gov/Public-Safety/Seattle-Real-Time-Fire-911-
Calls/kzjm-xkqj/rows.json?$$app_token=APP_TOKEN&recall_id=94' };
request(options, function(err, response, body) {  return console.log(body); } ); 
```

而且..对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T04:51:25.933

在这里查看 API 文档：http: [//dev.socrata.com/consumers/getting-started](http://dev.socrata.com/consumers/getting-started)

如果您想从数据集的 API 中提取数据，请使用此端点： [http ://data.seattle.gov/resource/kzjm-xkqj.json](http://data.seattle.gov/resource/kzjm-xkqj.json)

我认为您想要做的是从该数据集中提取行并在 JavaScript 中对它们进行处理。我建议使用 jQuery（一个非常常见的 JavaScript 库）来实现这一点。

在 jQuery 中，从 API 获取数据所需要做的就是：

```
$.get( "http://data.seattle.gov/resource/kzjm-xkqj.json", function( data ) {
  console.log(data);
}); 
```

正如您将看到的，这会输出前 1000 行数据（您需要使用 $offset 参数来获取下一组数据）。

这些行作为对象列表存储在数据中，因此要输出第二行数据：

```
$.get( "http://data.seattle.gov/resource/kzjm-xkqj.json", function( data ) {
  console.log(data[1]);
}); 
```

# javascript - 在 IE9 中检测 Javascript 加载事件

> ID：13967016
> 
> 赞同：0
> 
> 时间：2012-12-20T07:14:15.323
> 
> 标签：javascript, jquery, dom-events, internet-explorer-9, onload

我想`addon`在页面加载时执行我的部分代码，所以我在浏览器中寻找页面加载事件。

```
if (window.addEventListener)
    window.addEventListener("load", func, false);
else if (window.attachEvent)
    window.attachEvent("onload", func);

function func() {
    alert("page loaded");
    //my code here
} 
```

在 Firefox 中我能够捕捉到加载事件，但在 IE9 中我无法得到这个。或者，使用 jQuery 调用：

```
$(document).ready(function(){
    //my code here
}); 
```

我们可以得到这个，但我需要这个功能而不使用 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:16:55.340

这将在 IE9 中执行：

```
window.onload = func; 
```

要修改您的代码：

```
if (window.addEventListener) {
    window.addEventListener("load", func, false);
} else if (window.attachEvent) {
    window.attachEvent("onload", func);
} else {
    window['onload'] = func;
} 
```

更通用的事件处理程序附件是：

```
function Subscribe(event, element, func) {
    if (element.addEventListener) {
        element.addEventListener(event, func, false);
    } else if (element.attachEvent) {
        element.attachEvent("on" + event, func);
    } else {
        element['on' + event] = func;
    }
}

Subscribe('load', window, func); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:14:41.867

也许你可以试试这个

```
window.onload = function () {
   // do something here
}; 
```

# google-maps-api-3 - 绘制多边形并检测标记是否在里面

> ID：13967017
> 
> 赞同：1
> 
> 时间：2012-12-20T07:14:22.933
> 
> 标签：google-maps-api-3, geolocation, latitude-longitude, bounding-box

我将这些坐标存储在数据库的一个字段中，用于在谷歌地图上绘制多边形。我想检测一个标记是否在这个多边形内：

```
(37.15730677081955, -3.7892532348632812),
(37.13486648362684, -3.7593841552734375), 
(37.16059015678727, -3.7027359008789062) 
```

有谁知道如何得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:41:34.917

您可以使用谷歌地图几何库 containsLocation() 方法，如下所示：

```
for (var j=0; j < allMarkers.length; j++){
        for (var i=0; i < createdShapes.length; i++) {
            var latlong = allMarkers[j].getPosition();;
            if(google.maps.geometry.poly.containsLocation(latlong, createdShapes[i]) == true) {
                allMarkers[j].setOptions({
                    icon : "http://labs.google.com/ridefinder/images/mm_20_white.png",
                });
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:38:50.087

这是一些用 Java 编写的代码，用于检测 GPS 坐标是否在纬度/经度边界框内，它是数学的，因此可能会被翻译成其他语言。

[检测 GPS 坐标是否落在地图上的多边形内](https://stackoverflow.com/questions/4287780/detecting-whether-a-gps-coordinate-falls-within-a-polygon-on-a-map)

# objective-c - iPhone 应用程序在启动画面后崩溃

> ID：13967018
> 
> 赞同：2
> 
> 时间：2012-12-20T07:14:23.073
> 
> 标签：objective-c, xcode, cordova, ios4, crash-reports

我的 iPhone 应用程序在 iOS 5 上运行良好，但在 iOS4 上的 Splashscreen 后崩溃。（使用 PhoneGap）（使用 HockeyApp.net）。

我是 ios 开发的新手。我开发了一个部署目标为 4.0 的 ios 应用程序。它在 iPad 2 (os-5.1) 和 iPod touch ([4g] os-5.0.1) 上完美安装和运行。它正在 iPhone 4 (os-4.2.6) 和 iPod touch ([2g] os-4.2.1) 上安装，但无法正常工作。它显示启动画面，但之后崩溃。我在代码中添加了自己的日志函数，发现它在进入 didFinishLaunchingWithOptions 函数之前就崩溃了。

我正在使用 HockeyApp.net 下载 ipa 文件。我没有得到确切的问题，以下是我的 AppDelegate.m 文件。

AppDelegate.m：[https ://gist.github.com/4343470](https://gist.github.com/4343470)

崩溃报告：崩溃报告：[https ://gist.github.com/4343472](https://gist.github.com/4343472)

请帮我解决这个问题。先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T07:21:13.837

崩溃是因为`CDVCordovaView`是 , 的子类`UIWebView`，并且`UIWebView`' 的`scrollView`属性仅从 iOS 5 开始定义。在您的代码中某处您试图访问该`scrollView`属性，这会导致崩溃。访问前检查`CDVCordovaView`对象是否存在，防止崩溃。`respondsToSelector:@selector(scrollView)``scrollView`

# javascript - jqplot折线图中动态传递系列

> ID：13967026
> 
> 赞同：3
> 
> 时间：2012-12-20T07:14:58.070
> 
> 标签：javascript, jquery, jqplot

我使用了 jqplot 折线图。我已经使用 ajax 从 php 页面获取数据。在某些情况下，我将显示特定系列。所以

如何在 jqplot 折线图中动态传递系列并设置系列图例？

我已经手动编写了上述要求的代码。我已经在图例系列上应用了点击事件并根据点击图例绘制图形。

我还根据选择/取消选择系列图例更改了 y 轴值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:33:41.693

我最初尝试了@sdespont 发布的答案，但由于该系列需要具备其他属性，因此无法正常工作。我能够通过执行以下操作来完成此工作：

```
plot1.data = data;
plot1.replot( data ); 
```

data 是一个 3D 数组，其组成与您在创建绘图时传入的相同。如果我做了任何一部分而不做另一部分，它就不会正确刷新，但两者的结合似乎可以解决问题。以这种方式刷新绘图将动态添加或删除我添加到数据数组中的任何系列。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T12:20:21.290

我最近遇到了同样的问题。“重新绘制”有效，但速度非常慢。我使用了非常快的“jQPlot.drawSeries”。只需像往常一样将您的新系列数据提供给 jQPlot 并调用`jQPlot.drawSeries({}, <nr of your series from 0...xxx)`

我的具有 800 个值的实时图表在我的 PC 上以 >> 60 FPS 的速度运行，在我的手机上也非常快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T06:13:05.400

您可以通过玩`plot1.series`数组来添加或删除系列。

这是一个很好的jsfiddle：jsfiddle.net/fracu/HrZcj

这个想法是用数据创建一个数组

```
 myNewSerie = Array();
    x = (new Date()).getTime();
    y = Math.floor(Math.random() * 100);
    myNewSerie.push([x, y]); 
```

然后使用下一个可用插槽将其添加到图表中

`plot1.series[plot1.series.length] = myNewSerie`

最后重绘使用`plot1.replot();`

查看`updateSeries`小提琴末尾的功能

未经测试，但应该可以工作

# sql - 必须声明标量变量“@maxprice”

> ID：13967027
> 
> 赞同：1
> 
> 时间：2012-12-20T07:14:58.343
> 
> 标签：sql

这是我的 sql 代码 -

```
declare @maxprice int --1
set @maxprice = 1000 --2
select @maxprice --3 
```

我可以毫无错误地执行这些组合 1,2 和 1,2,3。但是，当我先执行 1,2 再执行 3 时，我得到了我提到的错误。

我无法理解为什么会发生这种情况。select @maxprice 不应该类似于常规的 select 语句吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:19:18.477

像这样的 SQL 语句作为块执行，命令和定义只在块内有效。一旦块完成，任何声明的变量都会超出范围，并且是未定义的。

因此，当您只执行第 3 行时，SQL Server 不知道或检查您之前是否对相同的变量做过一些事情，并且自然会抱怨该变量未定义。

如果不是这样，并且一旦声明的变量保留在范围内（例如，在会话期间），系统将必须非常小心地解决冲突之间的冲突，例如，在一个过程`@maxprice`中声明，与输入另一个。`int``money`

可以在[此处](http://msdn.microsoft.com/en-us/library/ms187953%28v=sql.105%29.aspx)找到有关 SQL Server 中变量和范围规则的更详细讨论。

# r - 以下2行R代码有什么区别：

> ID：13967031
> 
> 赞同：1
> 
> 时间：2012-12-20T07:15:12.970
> 
> 标签：r, plot

```
x<- c(4,5,6,2,3,8,4,7)
y<- c(6,9,2,1,2,5,6,3)
plot(x,y)

plot(x~y) 
```

2个绘图函数参数有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T07:42:01.470

`plot(x,y)`: `x` is used as x values and `y` is used as y values.

`plot(x~y)`: `y` is used as x values and `x` is used as y values.

Read the help pages: `?plot` and `?plot.formula`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T08:54:57.983

如果您键入这些字母`plot`，您会看到一个函数定义，其核心是`UseMethod("plot")`. `plot`是一个“通用”函数，这意味着参数类决定了调用的调度方式。因此，R 将检查其第一个参数的类，`x`在 的情况下为（数字向量），在 的情况下为`plot(x,y)`（`x~y`公式）`plot(x~y)`。调用了两个不同的函数：`plot.default`第一个实例和`plot.formula`第二个实例。`plot.formula`然后查看左侧（LHS）参数，在这种情况下为“x”，以进一步确定使用什么方法。

R中的公式通常可以读作“LHS依赖于RHS”或“LHS作为RHS分布”，因此`x`在绘图函数的parent.frame中将绘制到纵坐标（通常称为“y轴”）而 y 将位于横坐标（x 轴）上。看：

```
help(plot.formula) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T07:44:43.423

在这种情况下

```
plot(x~y)  = plot(y,x) 
```

这就是为什么你没有相同的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T07:19:26.420

`plot(x~y)`是一个公式，并且`plot(x,y)`正在为您的轴设置离散值...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-12T23:01:50.027

感谢@hd1 的回答。在绘图时，它确实帮助我理解 和 之间的`~`区别`,`。

@selvam，直接的区别是您正在交换轴。但也许这可能有助于理解@hd1 给出的解释意味着什么。

尝试这个：

`boxplot(y~x)`这不同于`boxplot(x~y)`

`boxplot(y,x)`交换顺序`boxplot(x,y)`将改变图中的索引。

谢谢

# vba - Excel - 运行时错误“1004”：无法设置范围类的隐藏属性

> ID：13967033
> 
> 赞同：7
> 
> 时间：2012-12-20T07:15:21.380
> 
> 标签：vba, excel

我是脚本新手，我正在尝试改进现有的宏。我录制了一个宏以删除重复项并将其添加到调用其他一些函数的 Main 函数中，但是当我添加我录制的宏时出现此错误：

```
Run-time error '1004': Unable to set the hidden property of the range class 
```

代码看起来像

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim changed As Range
    Set changed = Intersect(Target, Range("J15"))
    If Not changed Is Nothing Then
        Range("A48:A136").EntireRow.Hidden = True
        Select Case Target.Value
            Case "Agriculture"
                Range("A48:A96").EntireRow.Hidden = False
            Case "Commercial"
                Range("A97:A136").EntireRow.Hidden = False
            Case "MDP"
                Range("A48:A61").EntireRow.Hidden = False
        End Select
        Range("J15").Select
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T08:16:02.617

一些可能的答案：

*   您在所选单元格之一中有评论
*   您有一些不使用文本调整大小的绘制对象
*   您的工作表受到保护

当您在事件处理程序的第一行设置断点，然后按 F8 单步执行宏时，我假设它在该行崩溃：

```
Range("A48:A136").EntireRow.Hidden = True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-02T22:40:21.450

[![这打破了事情](../Images/6c9403689aba8d6b009df76221cd9c8a.png)](https://i.stack.imgur.com/sIVqf.png)

当人们说“您在一个选定的单元格中有评论”时，请记住**评论可以在不同的列中。**

如果评论框位于您要隐藏的列上方（例如，如果您将每一列隐藏在右侧，并且您在完全不同的列中有评论），这就是您将得到的错误。

如果您尝试手动隐藏该列，您将得到一个不同的令人困惑的错误，类似于“隐藏此列会将对象推离工作表”。

几列上方的注释框是对象。

^ 这可以为我节省大约 40 分钟的调试时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-13T11:42:19.273

尝试这个 ：）

```
Private Sub Worksheet_Change(ByVal Target As Range)
ActiveWorkbook.Unprotect "password_here"
    Dim changed As Range
    Set changed = Intersect(Target, Range("J15"))
    If Not changed Is Nothing Then
        Range("A48:A136").EntireRow.Hidden = True
        Select Case Target.Value
            Case "Agriculture"
                Range("A48:A96").EntireRow.Hidden = False
            Case "Commercial"
                Range("A97:A136").EntireRow.Hidden = False
            Case "MDP"
                Range("A48:A61").EntireRow.Hidden = False
        End Select
        Range("J15").Select
    End If
ActiveWorkbook.Protect "password_here"
End Sub 
```

这应该适合你:)

# iphone - 在xcode中关闭Facebook登录中的当前会话？

> ID：13967034
> 
> 赞同：0
> 
> 时间：2012-12-20T07:15:43.937
> 
> 标签：iphone, xcode, facebook-login

我在我的应用程序中集成 Facebook 登录。我的应用程序中有一个注销按钮。当用户单击注销时，Facebook 的当前会话应该关闭。再次，如果我单击登录，它应该显示 Facebook 的登录屏幕。单击注销按钮时：

```
appDelegate.fbEmail=nil;
 if (FBSession.activeSession.isOpen) {
        [appDelegate closeSession];
    }

AppDelegate.m

-(void)closeSession
{
     [[FBSession activeSession] close];

}
-(BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI{

    NSArray *permissions=[[NSArray alloc]initWithObjects:@"email", nil];
    return[FBSession openActiveSessionWithReadPermissions:permissions allowLoginUI:allowLoginUI completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
        [self sessionStateChanged:session state:state error:error];
    }];
} 
```

在他点击注销后，它变为登录。现在点击登录时，facebook的登录屏幕应该会出现..怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:24:16.783

你能试试 FBSessionDelegate 方法吗？FBSessionDelegate 内部有处理会话的方法。在这种情况下，我认为您可以使用此功能来处理您的问题：

```
- (void)fbDidlogout
{
    // your code to get login screen here!
} 
```

当请求注销成功时将调用此函数。希望这会有所帮助，干杯

# java - 计算 JTable 中单元格的尺寸

> ID：13967037
> 
> 赞同：1
> 
> 时间：2012-12-20T07:15:55.453
> 
> 标签：java, swing, jtable, row, preferredsize

如何计算`JTable`包含各种组件的单元格的尺寸以动态计算表格的高度。

例如，我有一个表，其中包含第三列中的多个复选框和其他列中的各种组件。当新组件添加到单元格时，整个表格的高度和宽度应该动态变化。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:35:32.317

您也许可以利用[此处](https://stackoverflow.com/a/11179669/230513)显示的方法，该方法调用`setRowHeight()`以适应每列渲染器的最大高度。

![图片](../Images/dfee193a9650bdd5810bfb0ff779c0b3.png)

# sql - 合并 2 个 varchar 列的数据并转换为日期时间

> ID：13967043
> 
> 赞同：1
> 
> 时间：2012-12-20T07:16:16.577
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我在 varchar 数据类型的表中有 2 列。

date 和 type 是表中的列名。

表中的数据如下所示

```
date        time
20090610    132713
20090610    132734 
```

我需要 ms sql server 查询来连接这 2 列数据并显示为日期时间格式。

注意：1.这2列的数据类型现在不能改变。2.我试过

```
select convert(datetime,date + time) 
```

它说“从字符串转换日期和/或时间时转换失败。”

提出可能的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:26:05.967

这将返回一个日期时间。底线将被您的桌子取代

```
select convert(datetime,date,112)+
coalesce(stuff(stuff(rtrim(time), 5,0,':'), 3,0,':'), '') newdate
from 
(VALUES ('20090610','132713'),('20090610', '132734'),('20090610', '      ')) yourtable(date,time) 
```

结果：

```
newdate
2009-06-10 13:27:13.000
2009-06-10 13:27:34.000
2009-06-10 00:00:00.000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:58:30.043

你可以使用它

```
SELECT 
convert(varchar, convert(datetime, date), 111)
+ ' ' + substring(time, 1, 2)
+ ':' + substring(time, 3, 2)
+ ':' + substring(time, 5, 2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:44:08.097

```
CREATE TABLE #Table 
(
[date] VARCHAR(100),
[time] VARCHAR(100)
)
INSERT INTO #Table VALUES
('20090610','132713'),
('20090610','132734')   

;WITH Bits_CTE
    AS
    (
    SELECT 
        [Date],
        [Time],
        [hrs] = CONVERT(INT,SUBSTRING([Time], 1, 2)),
        [mns] = CONVERT(INT,SUBSTRING([Time], 3, 2)),
        [secs] = CONVERT(INT,SUBSTRING([Time], 5, 2))
    FROM #Table
    )
SELECT 
    [Date],
    [Time],
    DATEADD(HOUR,[hrs],
    DATEADD(MINUTE,[mns],
    DATEADD(SECOND,[secs],[Date]))) 
FROM Bits_CTE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T09:00:44.720

```
CREATE FUNCTION [dbo].[DateTimeAdd] 
( 
      @datepart         date, 
      @timepart         time 
) 
RETURNS datetime2 
AS 
BEGIN 
      RETURN DATEADD(dd, DATEDIFF(dd, 0, @datepart), CAST(@timepart AS datetime2)); 
END 
```

抱歉 - 错过了关于将日期和时间存储为 varchars 的问题。因此，您仍然需要在使用此功能之前转换这些数据项。

# yii - 如何在 Yii 中检查 $Criteria->order() 中的两个条件

> ID：13967044
> 
> 赞同：0
> 
> 时间：2012-12-20T07:16:19.657
> 
> 标签：yii

我的标准如下：

```
 $Criteria = new CDbCriteria();
   $Criteria->join='LEFT JOIN abc_tablename ON some_id=one_id';
   $Criteria->order = "created_date DESC,commented_date DESC"; 
```

上面的代码仅对 created_date 进行排序，但 commented_date 不起作用...任何人都可以帮助我在两种条件都起作用的情况下如何订购。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:19:30.180

我通过使用以下代码得到了输出。

```
 $Criteria->order = " CASE WHEN pc.commented_date IS NULL 
    THEN t.created_date WHEN pc.commented_date IS NOT NULL THEN 
    pc.commented_date ELSE 1 END  DESC"; 
```

# websocket - websocket 是否只将数据广播给所有连接的客户端而不是发送给特定的客户端？

> ID：13967051
> 
> 赞同：3
> 
> 时间：2012-12-20T07:16:38.590
> 
> 标签：websocket, push-notification, server-push, phpwebsocket

我是 Websockets 的新手。在阅读有关 websockets 的信息时，我无法找到一些疑问的答案。我想如果有人澄清它。

1.  websocket 是否只将数据广播给所有连接的客户端而不是发送给特定的客户端？无论我尝试什么示例（主要是聊天应用程序），它们都会向所有客户端发送数据。有可能改变这个吗？

2.  它如何在位于 NAT（路由器后面）的客户端上工作。

3.  由于客户端服务器连接将始终保持打开状态，那么它将如何影响大量连接的服务器性能？

4.  由于我希望我的所有客户端都获得实时更新，因此需要将我的所有客户端连接到服务器，那么我应该如何处理客户端连接限制？

注意：- 我的客户端不是 Web 浏览器，而是桌面应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:47:48.793

1.  不，websocket 不仅用于广播。您向特定客户端发送消息，当您广播时，您只需向所有连接的客户端发送相同的消息，但您可以向不同的客户端发送不同的消息，例如游戏会话。

2.  客户端连接到服务器并初始化连接，所以 NAT 不是问题。

3.  最好使用可扩展的服务器，例如不为每个连接使用单独线程的事件驱动服务器（例如 Node.js），或者具有轻量级进程的 erlang 服务器（游戏服务器的不错选择）。

4.  如果您使用良好的服务器操作系统（例如 Linux），这应该不是问题，但如果您的服务器使用 Windows 的桌面版本（例如，可能限制为 200 个连接），这可能是一个限制。

# c# - 将 XML 中的 HTML 实体转换为 C# 中的等效 Unicode

> ID：13967052
> 
> 赞同：2
> 
> 时间：2012-12-20T07:16:46.967
> 
> 标签：c#, xml, html-entities

我在 Web 服务作为`XmlDocument`类型返回的 XML 中有几个 HTML 实体。在应用 XSLT 转换之前，我需要将它们替换为等效的 Unicode 字符。

XML 片段

```
<ics>
 <record>
  <metadata>
    <meta name="Abstract" content="In the series of compounds observed after effect of &amp;#947;-quanta"/>
  </metadata>
 </record>
</ics> 
```

我将 C# 与 .Net 4.0 一起使用。我尝试使用上述 XmlDocument`HttpUtility.HtmlDecode`的`OuterXml`属性，但它不会将 HTML 实体转换为 Unicode。

如何做到这一点？

**编辑：**

我看到应用 HtmlDecode 一次`&amp;#947;`到`&#947;`. 如果我再次应用它，我会得到所需的 Unicode。

有什么更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T07:23:11.047

[`WebUtility.HtmlDecode`](http://msdn.microsoft.com/en-us/library/ee388364.aspx)在 .NET 4.0 中使用

此外，逐字`&amp;#947;`解码，**而不是**Unicode 字符。主要问题是您的“HTML”不正确。您必须执行两次才能获得 gamma 字符。`&#947;`**`γ`**

# mutt - 我在哪里设置 mutt 的最大附件大小？

> ID：13967053
> 
> 赞同：2
> 
> 时间：2012-12-20T07:16:48.803
> 
> 标签：mutt

我有一个脚本，它每天通过电子邮件向我发送数据库备份，但它最近停止工作。

这是一个示例命令行...

```
/usr/bin/mutt -s 'Backup' -f /dev/null -e 'set copy=no' -e 'set from="noreply@email.com"' -a 'backup/db.sql.gz' 'admin@email.com' </dev/null 2>&1; 
```

当我手动运行它时，它显示...

```
Error sending message, child exited 1 ().
Could not send message. 
```

我尝试运行它并附加几天前的备份（当它工作时），它运行良好。这似乎是备份大小的问题。

最后一个有效的是 77,464 KB。最近的一个是 79,386 KB - 失败了。

我在 CENTOS 5.8 上运行。

我怀疑这只是 mutt 的设置，或者可能是 mutt 正在使用的邮件服务，但我什至不确定在哪里可以找到要查看的配置文件。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:01:36.873

Mutt 没有设置限制，但会受到正在使用的邮件服务限制的影响。在这种情况下，EXIM。

对于 EXIM，您可以像这样增加限制...

1.  登录 WHM。
2.  转到主页 » 服务配置 » Exim 配置管理器。
3.  选择高级编辑器。
4.  将 message_size_limit 更改为 200M（原来是 100M）。
5.  节省。

在这些更改之后，我的备份工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-12T13:10:33.500

我尝试了不同的方法。我删除了所有大于一定大小的文件。
您可以删除较大的文件、移动它们或重命名它们。

使用与此类似的命令：

```
find . -name "*.tif" -size +160k -delete 
```

160k = 160 KB，160c = 160 字节..

# c++ - ChangeServiceConfig2 使用GetProcAddress 支持多版本windows

> ID：13967062
> 
> 赞同：0
> 
> 时间：2012-12-20T07:17:22.727
> 
> 标签：c++, winapi

我正在使用 Windows 的 ChangeServiceConfig2 API 来更改服务描述。由于 windows 98 不支持相同的 api，所以我使用 LoadLibraray 和 GetProcAddress 来防止 exe 中的 API 的静态链接。详情请参考代码：

```
typedef BOOL  (*ChgSvcDesc) (SC_HANDLE hService, DWORD dwInfoLevel, LPVOID lpInfo);

eBool ServiceConfigNT::Install(IN tServiceDesc * pServiceDesc){

    SC_HANDLE           hservice;
    SC_HANDLE           hservicemgr;
    SERVICE_DESCRIPTION desc;
    ULong             starttype;
    HMODULE           hmod;
    ChgSvcDesc        fpsvcdesc;

// Opens the Service Control Manager
hservicemgr = OpenSCManager(NULL, NULL, SC_MANAGER_ALL_ACCESS);
if(!hservicemgr){
    vPrepareError(_TEXT("Failed to open service control manager!!"));
    goto err;
}

// Set start method of service.
starttype   = (pServiceDesc->uAutoStart  == TRUE)? SERVICE_AUTO_START : SERVICE_DEMAND_START;

// Create the service
hservice =  CreateService(hservicemgr, vServiceName, pServiceDesc->uDisplayName, SERVICE_ALL_ACCESS, 
                pServiceDesc->uServiceType, starttype, SERVICE_ERROR_NORMAL,pServiceDesc->uExePath,
                NULL, NULL, NULL, NULL, NULL);

if(!hservice) {
    vPrepareError(_TEXT("Failed to create service.!!"));
    goto err;        
}

// Set the description string
if(pServiceDesc->uServiceDescription && *pServiceDesc->uServiceDescription) {     
    desc.lpDescription = pServiceDesc->uServiceDescription;
    // This cannot be executed since it is not supported in Win98 and ME OS
    //(Void)ChangeServiceConfig2 (hservice, SERVICE_CONFIG_DESCRIPTION, &desc);
    hmod = LoadLibrary(_TEXT("Advapi32.dll"));
    if(hmod) {
          // _UNICODE macro is set, hence im using the "W" version of the api
          fpsvcdesc = (ChgSvcDesc)GetProcAddress(hmod, "ChangeServiceConfig2W");      
          if(fpsvcdesc)
               // On execution of the below statement, I get the error handle is invalid
               fpsvcdesc(hservice, SERVICE_CONFIG_DESCRIPTION, &desc);
}

CloseServiceHandle(hservice);
CloseServiceHandle(hservicemgr);    
return TRUE;

err:
    if(hservicemgr) 
       CloseServiceHandle(hservicemgr);
return FALSE;
} 
```

我多次调试代码以找出为什么我得到句柄无效错误？在直接调用 API 时，服务的描述正在改变，但使用函数指针会给出错误。

我认为 API 正在向 SCM 的服务句柄写入一些东西，但我不知道为什么？

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:09:30.513

您的函数指针是在未指定调用约定的情况下声明的。默认调用约定是`__cdecl`. 但 Windows API 函数是`__stdcall`. 您需要将调用约定添加到函数指针类型。

```
typedef BOOL (__stdcall *ChgSvcDesc) (SC_HANDLE hService, 
    DWORD dwInfoLevel, LPVOID lpInfo); 
```

# r - 删除重复的行

> ID：13967063
> 
> 赞同：192
> 
> 时间：2012-12-20T07:17:27.640
> 
> 标签：r, duplicates, r-faq

我已将`CSV`文件读入 R data.frame。一些行在其中一列中具有相同的元素。我想删除该列中重复的行。例如：

```
platform_external_dbus          202           16                     google        1
platform_external_dbus          202           16         space-ghost.verbum        1
platform_external_dbus          202           16                  localhost        1
platform_external_dbus          202           16          users.sourceforge        8
platform_external_dbus          202           16                    hughsie        1 
```

我只想要这些行中的一个，因为其他行在第一列中具有相同的数据。

* * *

## 回答 #1

> 赞同：247
> 
> 时间：2014-02-24T12:07:57.670

对于来这里寻找删除重复行的一般答案的人，请使用`!duplicated()`：

```
a <- c(rep("A", 3), rep("B", 3), rep("C",2))
b <- c(1,1,2,4,1,1,2,2)
df <-data.frame(a,b)

duplicated(df)
[1] FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE  TRUE

> df[duplicated(df), ]
  a b
2 A 1
6 B 1
8 C 2

> df[!duplicated(df), ]
  a b
1 A 1
3 A 2
4 B 4
5 B 1
7 C 2 
```

来自的答案：[从 R 数据框中删除重复的行](https://stats.stackexchange.com/questions/6759/removing-duplicated-rows-from-r-data-frame)

* * *

## 回答 #2

> 赞同：216
> 
> 时间：2012-12-20T07:21:56.233

只需将您的数据框隔离到您需要的列，然后使用独特的功能：D

```
# in the above example, you only need the first three columns
deduped.data <- unique( yourdata[ , 1:3 ] )
# the fourth column no longer 'distinguishes' them, 
# so they're duplicates and thrown out. 
```

* * *

## 回答 #3

> 赞同：107
> 
> 时间：2015-05-29T01:10:12.297

[`distinct()`](https://dplyr.tidyverse.org/reference/distinct.html)包中的函数[`dplyr`](http://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html)执行任意重复删除，或者从特定的列/变量（如在这个问题中）或考虑所有列/变量。`dplyr`是的一部分[`tidyverse`](https://tidyverse.org)。

**数据和包**

```
library(dplyr)
dat <- data.frame(a = rep(c(1,2),4), b = rep(LETTERS[1:4],2)) 
```

**删除特定列中重复的行（例如， column `a`）**

请注意，`.keep_all = TRUE`保留所有列，否则仅保留列`a`。

```
distinct(dat, a, .keep_all = TRUE)

  a b
1 1 A
2 2 B 
```

**删除与其他行完全重复的行：**

```
distinct(dat)

  a b
1 1 A
2 2 B
3 1 C
4 2 D 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2016-03-17T11:01:33.693

该`data.table`软件包还具有自己的方法和一些附加功能`unique`。`duplicated`

`unique.data.table`和方法都有`duplicated.data.table`一个额外的`by`参数，允许您分别传递列名或它们的位置的`character`或向量`integer`

```
library(data.table)
DT <- data.table(id = c(1,1,1,2,2,2),
                 val = c(10,20,30,10,20,30))

unique(DT, by = "id")
#    id val
# 1:  1  10
# 2:  2  10

duplicated(DT, by = "id")
# [1] FALSE  TRUE  TRUE FALSE  TRUE  TRUE 
```

这些方法的另一个重要特征是更大数据集的巨大性能提升

```
library(microbenchmark)
library(data.table)
set.seed(123)
DF <- as.data.frame(matrix(sample(1e8, 1e5, replace = TRUE), ncol = 10))
DT <- copy(DF)
setDT(DT)

microbenchmark(unique(DF), unique(DT))
# Unit: microseconds
#       expr       min         lq      mean    median        uq       max neval cld
# unique(DF) 44708.230 48981.8445 53062.536 51573.276 52844.591 107032.18   100   b
# unique(DT)   746.855   776.6145  2201.657   864.932   919.489  55986.88   100  a 

microbenchmark(duplicated(DF), duplicated(DT))
# Unit: microseconds
#           expr       min         lq       mean     median        uq        max neval cld
# duplicated(DF) 43786.662 44418.8005 46684.0602 44925.0230 46802.398 109550.170   100   b
# duplicated(DT)   551.982   558.2215   851.0246   639.9795   663.658   5805.243   100  a 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-12-23T10:54:18.410

一般答案可以是例如：

```
df <-  data.frame(rbind(c(2,9,6),c(4,6,7),c(4,6,7),c(4,6,7),c(2,9,6))))

new_df <- df[-which(duplicated(df)), ] 
```

# 输出：

```
 X1 X2 X3
    1  2  9  6
    2  4  6  7 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-08-23T01:26:34.990

你也可以使用`dplyr`'`distinct()`函数！它往往比替代选项更有效，尤其是在您有大量观察结果的情况下。

```
distinct_data <- dplyr::distinct(yourdata) 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-06-24T10:46:38.310

与`sqldf`：

```
# Example by Mehdi Nellen
a <- c(rep("A", 3), rep("B", 3), rep("C",2))
b <- c(1,1,2,4,1,1,2,2)
df <-data.frame(a,b) 
```

解决方案：

```
 library(sqldf)
    sqldf('SELECT DISTINCT * FROM df') 
```

输出：

```
 a b
1 A 1
2 A 2
3 B 4
4 B 1
5 C 2 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-05-02T05:41:59.137

这是一个非常简单，快速的`dplyr`/`tidy`解决方案：

**删除完全相同的行：**

```
library(dplyr)
iris %>% 
  distinct(.keep_all = TRUE) 
```

**删除仅在某些列中相同的行：**

```
iris %>% 
  distinct(Sepal.Length, Sepal.Width, .keep_all = TRUE) 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-10-22T11:16:27.123

或者您可以将第 4 列和第 5 列中的数据嵌套到一行中`tidyr`：

```
library(tidyr)
df %>% nest(V4:V5)

# A tibble: 1 × 4
#                      V1    V2    V3             data
#                  <fctr> <int> <int>           <list>
#1 platform_external_dbus   202    16 <tibble [5 × 2]> 
```

现在删除了 col 2 和 3 重复项以进行统计分析，但您已将 col 4 和 5 数据保留在一个小标题中，并且可以随时返回原始数据帧`unnest()`。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-10-17T00:14:05.093

**删除数据框的重复行**

```
library(dplyr)
mydata <- mtcars

# Remove duplicate rows of the dataframe
distinct(mydata) 
```

在这个数据集中，没有一个重复的行，因此它返回的行数与 mydata 中的行数相同。

**基于一个变量删除重复行**

```
library(dplyr)
mydata <- mtcars

# Remove duplicate rows of the dataframe using carb variable
distinct(mydata,carb, .keep_all= TRUE) 
```

.keep_all 函数用于保留输出数据帧中的所有其他变量。

**删除基于多个变量的重复行**

```
library(dplyr)
mydata <- mtcars

# Remove duplicate rows of the dataframe using cyl and vs variables
distinct(mydata, cyl,vs, .keep_all= TRUE) 
```

该`.keep_all`函数用于保留输出数据帧中的所有其他变量。

*（来自：[http](http://www.datasciencemadesimple.com/remove-duplicate-rows-r-using-dplyr-distinct-function/) ://www.datasciencemadesimple.com/remove-duplicate-rows-r-using-dplyr-distinct-function/ ）*

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-11-19T03:27:38.630

这个问题也可以通过从每个组中选择第一行来解决，其中组是我们想要选择唯一值的列（在共享的示例中，它只是第一列）。

使用基础 R ：

```
subset(df, ave(V2, V1, FUN = seq_along) == 1)

#                      V1  V2 V3     V4 V5
#1 platform_external_dbus 202 16 google  1 
```

在`dplyr`

```
library(dplyr)
df %>% group_by(V1) %>% slice(1L) 
```

或使用`data.table`

```
library(data.table)
setDT(df)[, .SD[1L], by = V1] 
```

如果我们需要根据多列找出唯一行，只需在上述每个答案的分组部分中添加这些列名。

**数据**

```
df <- structure(list(V1 = structure(c(1L, 1L, 1L, 1L, 1L), 
.Label = "platform_external_dbus", class = "factor"), 
V2 = c(202L, 202L, 202L, 202L, 202L), V3 = c(16L, 16L, 16L, 
16L, 16L), V4 = structure(c(1L, 4L, 3L, 5L, 2L), .Label = c("google", 
"hughsie", "localhost", "space-ghost.verbum", "users.sourceforge"
), class = "factor"), V5 = c(1L, 1L, 1L, 8L, 1L)), class = "data.frame", 
row.names = c(NA, -5L)) 
```

# java - 如何将使用 jxl.jar 生成的 excel 文件从服务器机器发送到客户端

> ID：13967064
> 
> 赞同：0
> 
> 时间：2012-12-20T07:17:28.590
> 
> 标签：java, struts2, jxl

我正在使用 struts 开发我的 Web 应用程序。我编写了一个生成excel文件并根据我传递的数据模型保存它的方法。由于tomcat在本地存在，所以在我的本地机器上效果很好。但是现在我已经将我的应用程序移动到中央服务器。现在如果我使用它存储的方法在服务器中生成excel文件，而不是在访问服务器的客户端机器中。我需要通过http将它从服务器传递到客户端。我该怎么做？

```
public static void populateExcelDoc(List<ColumnList> listOfColumns,RowList rowlist,String filename)
{
    try
    {
        WorkbookSettings ws = new WorkbookSettings();
        ws.setLocale(new Locale("en", "EN"));

        WritableWorkbook workbook = Workbook.createWorkbook(new File(filename+".xls"), ws);
        WritableSheet s = workbook.createSheet("Sheet1", 1);
        writeDataSheetifx1(s,listOfColumns,rowlist);
        workbook.write();
        workbook.close();

        Process p = 
                  Runtime.getRuntime()
                   .exec("rundll32 url.dll,FileProtocolHandler " + filename+".xls");
    }
    catch(IOException e)
    {
        e.printStackTrace();
    }
    catch(WriteException e)
    {
        e.printStackTrace();
    }
} 
```

这就是我当前的代码的样子。我需要做些什么改变？我应该使用 HttpServletResponse 响应吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:12:13.037

在 Struts2 中有`stream`向 HttpServletResponse 发送数据的结果。

在您`struts.xml`配置您的操作以使用`stream`结果。

```
<action name="exceldoc" method="populateExcelDoc" class="ExcelDocAction">
  <result name="success" type="stream">
    <param name="inputName">inputStream</param>
    <param name="contentType">application/vnd.ms-excel</param>
    <param name="contentDisposition">attachment;filename=excel.xls</param>
  </result>
</action> 
```

并在您的操作`private InputStream inputStream;`中使用 getter/setter 创建并在您的方法中将文件写入其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:52:53.083

您有多种选择，其中两种是：

1）将文件保存在客户端浏览器可以访问的地方

为此，您必须找到一个合适的目录来存储文件。使用 Servlet 时，可以使用以下方法从相对 URL 路径创建绝对文件系统路径：

```
String filePath = getServletContext().getRealPath("/MyFile.xls");
WritableWorkbook workbook = Workbook.createWorkbook(new File(filePath), ws);
... 
```

然后用户可以使用如下 URL 从浏览器访问它：`http://host:port/AppName/MyFile.xls`

您还可以修改响应标头，以便浏览器必须读取文件：

```
response.setHeader("Content-Disposition", "attachment;filename=/MyFile.xls"); 
```

这种方法的缺点是每个人都可以访问该文件，如果有多个用户一次又一次地生成文件，您可能必须考虑生成唯一的文件名。然后，您还必须为旧文件实施删除例程。

2) 将文件直接从 servlet 发送到浏览器。

如果您的 Servlet 请求的响应可以是创建的 Excel 文件，这可能是最好的方法。

根据文件类型和大小设置响应头：

```
response.setContentLength(length);
response.setContentType("application/vnd.ms-excel");
response.getOutputStream().write(...);
response.getOutputStream().flush(); 
```

写入数据后，可以从服务器文件系统中删除该文件。

# java - 替换服务器堆栈中的类文件

> ID：13967068
> 
> 赞同：0
> 
> 时间：2012-12-20T07:17:48.873
> 
> 标签：java, jakarta-ee

有没有办法找出加载在服务器堆栈中的 java 类，并将其替换为最新版本，而无需重新启动 Web 或应用程序服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:10:59.547

在 Tomcat 上，有一个名为 reloadable 的属性，它支持自动重新加载已更改的类/库。从Tomcat站点：

```
reloadable 
```

“如果您希望 Catalina 监控 /WEB-INF/classes/ 和 /WEB-INF/lib 中的类的更改，请设置为 true，并在检测到更改时自动重新加载 Web 应用程序。此功能在应用程序开发期间非常有用，但它需要大量的运行时开销，因此不建议在已部署的生产应用程序上使用。这就是为什么此属性的默认设置为 false。但是，您可以使用 Manager Web 应用程序来触发按需重新加载已部署的应用程序。

示例用法是（在 server.xml 文件中添加以下行）：

```
<Context path="/webdev" docBase="/webdev" reloadable="true"></Context> 
```

更多信息，请参考[http://tomcat.apache.org/tomcat-6.0-doc/config/context.html](http://tomcat.apache.org/tomcat-6.0-doc/config/context.html)

# java - 如何为 JAX-WS WebService 调用设置超时

> ID：13967069
> 
> 赞同：18
> 
> 时间：2012-12-20T07:17:49.307
> 
> 标签：java, web-services, jakarta-ee, jboss, jax-ws

我正在开发一个 WebService 客户端，我想为我的 WebService 调用设置一个超时。我尝试了不同的方法，但我仍然无法实现这一点。我正在使用 JAX-WS 从 WSDL 生成代码。我使用 JBoss-eap-5.1 作为应用服务器和 JDK1.6.0_27。我发现了这些设置超时的差异方法，但它们都不适合我。

```
URL mbr_service_url = new URL(null,GlobalVars.MemberService_WSDL, new URLStreamHandler() {

            @Override
            protected URLConnection openConnection(URL url) throws IOException {
                URL clone_url = new URL(url.toString());
                HttpURLConnection clone_urlconnection = (HttpURLConnection) clone_url.openConnection();
                // TimeOut settings
                clone_urlconnection.setConnectTimeout(10000);
                clone_urlconnection.setReadTimeout(10000);
                return (clone_urlconnection);
            }
        });
        MemberService service = new MemberService(mbr_service_url);
        MemberPortType soap = service.getMemberPort();
        ObjectFactory factory = new ObjectFactory();
        MemberEligibilityWithEnrollmentSourceRequest request = factory.createMemberEligibilityWithEnrollmentSourceRequest();

        request.setMemberId(GlobalVars.MemberId);
        request.setEligibilityDate(value);

        ((BindingProvider) soap).getRequestContext().put(com.sun.xml.ws.client.BindingProviderProperties.REQUEST_TIMEOUT, 10000);
        ((BindingProvider) soap).getRequestContext().put(com.sun.xml.ws.client.BindingProviderProperties.CONNECT_TIMEOUT, 10000);
        ((BindingProvider) soap).getRequestContext().put(com.sun.xml.internal.ws.client.BindingProviderProperties.REQUEST_TIMEOUT, 10000);
        ((BindingProvider) soap).getRequestContext().put(com.sun.xml.internal.ws.client.BindingProviderProperties.CONNECT_TIMEOUT, 10000);
        ((BindingProvider) soap).getRequestContext().put(com.sun.xml.ws.developer.JAXWSProperties.REQUEST_TIMEOUT, 10000);
        ((BindingProvider) soap).getRequestContext().put(com.sun.xml.ws.developer.JAXWSProperties.CONNECT_TIMEOUT, 10000);
        ((BindingProvider) soap).getRequestContext().put(com.sun.xml.internal.ws.developer.JAXWSProperties.REQUEST_TIMEOUT, 10000);
        ((BindingProvider) soap).getRequestContext().put(com.sun.xml.internal.ws.developer.JAXWSProperties.CONNECT_TIMEOUT, 10000);
        System.setProperty("sun.net.client.defaultConnectTimeout", "10000");
        System.setProperty("sun.net.client.defaultReadTimeout", "10000");

        MemberEligibilityWithEnrollmentSourceResponse response = soap.getMemberEligibilityWithEnrollmentSource(request);
        logger.log("Call to member service finished."); 
```

* * *

现在我所做的是，我从执行器内部调用了我的 webservice 方法。我知道这不是一个好方法，但它对我有用。伙计们请帮助我以正确的方式做到这一点。

```
logger.log("Parameters set for createorUpdateContact call.\nGoing in Executor Service.");
        ExecutorService executorService = Executors.newSingleThreadExecutor();
        executorService.execute(new Runnable() {

            @Override
            public void run() {
                try {
                    response = soap.getMemberEligibilityWithEnrollmentSource(request);
                } catch (MemberServiceException ex) {
                    logger.log("Exception in call to WebService", ex.fillInStackTrace());
                }
            }
        });
        executorService.shutdown();
        try {
            executorService.awaitTermination(GlobalVars.WSCallTimeOut, TimeUnit.SECONDS);
        } catch (InterruptedException ex) {
            logger.log("Thread Interrupted!", ex);
            executorService.shutdownNow();
        } 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-22T06:20:33.300

您可以尝试这些设置（它们成对使用）

```
BindingProviderProperties.REQUEST_TIMEOUT
BindingProviderProperties.CONNECT_TIMEOUT 
```

`BindingProviderProperties`应该来自`com.sun.xml.internal.WS.client`

[或者JBoss](https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6.1/html/API_Documentation/files/javadoc/org/jboss/ws/core/StubExt.html#PROPERTY_RECEIVE_TIMEOUT)的字符串：

```
javax.xml.ws.client.connectionTimeout
javax.xml.ws.client.receiveTimeout 
```

`getRequestContext()`以毫秒为单位的所有属性。

```
(BindingProvider)wsPort).getRequestContext().put(BindingProviderProperties.REQUEST_TIMEOUT, yourTimeoutInMillisec); 
```

特别是对于 JBoss，您可能希望`StubExt.PROPERTY_CLIENT_TIMEOUT`使用`org.jboss.ws.core.StubExt`. 有关详细信息，请参阅[此线程](https://community.jboss.org/thread/101684?tstart=0)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-23T09:05:51.813

就像kolossus说你应该使用：

```
com.sun.xml.internal.ws.client.BindingProviderProperties 
```

字符串值是：

```
com.sun.xml.internal.ws.connect.timeout
com.sun.xml.internal.ws.request.timeout 
```

虽然不应使用内部包，但如果您使用默认 JDK6，这是唯一的方法。因此，在这种情况下，设置接收和连接超时应通过以下方式完成：

```
bindingProvider.getRequestContext().put(BindingProviderProperties.REQUEST_TIMEOUT,requestTimeoutMs);

bindingProvider.getRequestContext().put(BindingProviderProperties.CONNECT_TIMEOUT,connectTimeoutMs); 
```

**但请注意，如果您使用其他 JAXWS 参考实现，即 JAXWS-RT 2.1.4 BindingProviderProperties，常量值会有所不同：**

```
com.sun.xml.ws.client.BindingProviderProperties 
```

REQUEST_TIMEOUT 和 CONNECT_TIMEOUT 会有不同的字符串值：

```
com.sun.xml.ws.request.timeout
com.sun.xml.ws.connect.timeout 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-16T04:40:58.117

对我来说设置`javax.xml.ws.client.connectionTimeout`并`javax.xml.ws.client.receiveTimeout`解决了问题。

```
((BindingProvider)port).getRequestContext().put("javax.xml.ws.client.connectionTimeout", timeout);
((BindingProvider)port).getRequestContext().put("javax.xml.ws.client.receiveTimeout", timeout); 
```

参考[链接](https://access.redhat.com/site/documentation/en-US/JBoss_Enterprise_Application_Platform/6/html/Development_Guide/Develop_a_JAX-WS_Client_Application.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-25T12:11:29.363

升级 jbossws-native 库并使用 StubExt.PROPERTY_CLIENT_TIMEOUT

要升级 jbossws-native，请点击此[链接](http://www.jboss.org/jbossws/downloads)。

*jbossws-native-3.4.0 是 Jboss 5.1.0GA 支持的最新版本。你可以看到[JBossWS - Supported Target Containers](https://community.jboss.org/wiki/JBossWS-SupportedTargetContainers)

这对我有用

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-09-25T21:01:48.437

设置以下选项对我有用。我正在使用 Metro JAXWS 实现。

```
((BindingProvider)portType).getRequestContext().put(JAXWSProperties.CONNECT_TIMEOUT, 10000);
((BindingProvider) portType).getRequestContext().put(JAXWSProperties.REQUEST_TIMEOUT, 50000); 
```

portType 是 Web 服务端点接口。

来自 com.sun.xml.internal.ws.developer.JAXWSProperties 的上述字段的值

```
public static final java.lang.String CONNECT_TIMEOUT = "com.sun.xml.internal.ws.connect.timeout";
public static final java.lang.String REQUEST_TIMEOUT = "com.sun.xml.internal.ws.request.timeout"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-11T13:15:44.677

我有一个具有此环境的旧安装运行时：Jdk-1.5、Jboss-4.2.3.GA 和 WSClient 是由 JAX-WS 规范 2.0 创建的。

激活肥皂请求超时我使用以下代码 `((BindingProvider)port).getRequestContext().put(org.jboss.ws.core.StubExt.PROPERTY_CLIENT_TIMEOUT, String.valueOf(readTimeout));`

`jbossws-client.jar`和复制的罐子`jboss-4.2.3.GA\server\default\lib\`

# ssl - 无法再使用 curl 登录 sll

> ID：13967075
> 
> 赞同：0
> 
> 时间：2012-12-20T07:18:23.707
> 
> 标签：ssl, curl, verify

在它崩溃并让我发疯之前，使用 SSL 进行卷曲登录工作正常。

使用 print_r(curl_getinfo($ch)) 获得以下信息：我的怀疑是“ssl_verify_result”，因为我在文档中读到如果不验证“ssl 证书”，那么它会抛出错误“20”？？？

```
[url] => https://www.ooshirts.com/?module=artist&action=login
[content_type] => text/html; charset=UTF-8
[http_code] => 200
[header_size] => 413
[request_size] => 329
[filetime] => -1
**[ssl_verify_result] => 20**
[redirect_count] => 0
[total_time] => 1.404
[namelookup_time] => 0
[connect_time] => 0.265
[pretransfer_time] => 1.107
[size_upload] => 28
[size_download] => 485
[speed_download] => 345
[speed_upload] => 19
[download_content_length] => 485
[upload_content_length] => -1
[starttransfer_time] => 1.404
[redirect_time] => 0 
```

我正在使用本地机器（win7X64）并从实际网站下载 SSL 证书并将其本地存储在同一文件夹中。它工作了几天，但随后又开始返回相同的登录页面。下面是我的测试代码：

```
$username="username"; 
$password="******"; 
$url="https://www.ooshirts.com/?module=artist&action=login"; 
$cookie=getcwd()."\cookie.txt"; 
$open = fopen($cookie,"w");
$postdata = "name=".$username."&password=".$password; 

$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, $url); 
curl_setopt ($ch, CURLOPT_CAINFO, getcwd() . "\www.ooshirts.com");
curl_setopt ($ch, CURLOPT_USERAGENT,  $_SERVER['HTTP_USER_AGENT']); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie);
curl_setopt ($ch, CURLOPT_COOKIEFILE, $cookie); 
curl_setopt ($ch, CURLOPT_REFERER, $url); 
curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt ($ch, CURLOPT_POST, 1); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
$result = curl_exec ($ch); 
echo $result;
fclose($open); 
```

有什么帮助？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:55:28.350

如果 SSL 验证出现问题，以下设置将对您有所帮助

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0); 
```

传输的用户名和密码仍将经过 SSL 加密。
**编辑：**只要确保您对[此处](http://davidwalsh.name/curl-post)找到的帖子数据进行 urlencode 即可。

# javascript - 在javascript中使用图像覆盖一部分google map api 3

> ID：13967076
> 
> 赞同：0
> 
> 时间：2012-12-20T07:18:36.157
> 
> 标签：javascript, google-maps

您好，我正在使用 google maps api 3，这是我初始化地图的方式：

```
 myLatlng = new google.maps.LatLng(19.1113635001101, 72.86958755554201);

                var myOptions = 
                    {
                        zoom: 17,
                        center: myLatlng,
                        panControl: false,
                        zoomControl: true,
                        scaleControl: false,
                        scrollwheel: false,
                        disableDoubleClickZoom: true,
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                     }
                map = new google.maps.Map(document.getElementById("map_canvas"), myOptions); 
```

我也有整个位置的图像地图（矢量/光栅），我想覆盖在上面的地图上（这样覆盖的部分将隐藏在下面的谷歌地图（默认）），有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:22:12.970

谷歌地图 JS API 支持这个：[https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay](https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay)？

# css - CSS：最小高度与边距和填充相结合的正确行为

> ID：13967080
> 
> 赞同：2
> 
> 时间：2012-12-20T07:18:43.240
> 
> 标签：css

目前我正在为自己开发一个网站。我决定进行页眉内容页脚设计，其中页脚应始终粘在底部。因此，我设置了一个包含 position: relative 的包装器，包含页眉 (#top)、内容 (#middle) 和页脚 (#bottom)。底部得到位置：绝对顶部：0。

我还为 html 和 body 设置了 height: 100% 并为#middle 设置了适当的 padding-bottom 以确保我的页脚不会与#middle 重叠。

请在此处找到简化的示例版本：[http ://www.webdevout.net/test?0w](http://www.webdevout.net/test?0w)

这是有问题的CSS：

```
* {
    padding: 0;
    margin: 0;
}

html, body {height: 100%}

#wrapper {
    position: relative;
    background-color: #ccc;
    min-height: 100%; 
}

#middle {
    background-color: #900;
    padding-bottom: 200px;
}

#top, #bottom {
    width: 100%;
    height: 200px;
    background-color: #bb5;
}

#bottom {position: absolute; bottom: 0;} 
```

现在这是我的问题：我对 box-model 的理解是，应该能够使用 margin-bottom 而不是 padding-bottom 来实现相同的效果（为页脚保留空间）而不是 padding-bottom 用于#middle，但 margin-bottom 不是' t 适用于它。我读过 min-height 不考虑填充、边框或边距，但这里考虑了填充，而边框和边距不考虑。

当 #middle 使用 margin-bottom 而不是 padding-bottom 时，FF 和 Chrome 表现出不同的行为：虽然 Chrome 只是忽略了边距，但 FF 在 #wrapper 下方应用了它。我的总体想法是，我的容器应该以最小高度增长到其内容的总大小，包括高度+填充+边框+#middle的边距，但显然它只是增长到#top的整体大小+高度#中间 + #middle 的填充。

我想知道什么是正确的行为以及为什么填充和边距不能互换以保留页脚的空间。

虽然非常感谢您的解释，但我也很感谢提供可以帮助我的来源的链接。如果这与另一个帖子重复，我很抱歉，但我没有找到适合我的特殊问题的东西（无论是在这里还是通过谷歌）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:26:59.603

我遇到了和你一样的问题。

您必须使用这段代码。

```
    ＃中间 {
        显示：表格；
        保证金：2% 自动；
        宽度：100%；
    }

```

使用显示：表格适用于我从顶部和底部设置边距。

# jquery - jqGrid根据复选框设置变量

> ID：13967081
> 
> 赞同：0
> 
> 时间：2012-12-20T07:18:51.523
> 
> 标签：jquery, jqgrid

我有一个看起来像这样的 jqGrid：

```
 $(function(){
            $("#poGrid").jqGrid({
                url:'URL',
                datatype: 'json',
                mtype: 'GET',
                colNames:[],
                pager: '#poPager',
                rowNum:10,
                rowList:[10,20,30],
                sortname: 'orderID',
                sortorder: 'ASC',
                jsonReader : { repeatitems: false },
                viewrecords: true,
                gridview: true,
                caption: '&nbsp;',
                height: "100%",

                colModel :[

                    {name: 'sel', index: 'sel', label: 'Select', width:50, align: 'center',
                        editable:true, edittype:'checkbox', editoptions: { value:"True:False"},
                        formatter: "checkbox", formatoptions: {disabled : false}},
                    {name:'orderID', label:'Order ID', width:80, align: 'center'},
                    {name:'orderName', label:'Order Name', width:250},
                    {name:'orderDate', label:'Order Date', width:100}

                ],

            });
        }); 
```

当用户单击 sel 复选框时，我需要获取 orderID 并将其放入一个 JS 变量中，该变量是一个逗号分隔的 orderID 字符串，用于检查 sel 的行。

当复选框未选中时，我还需要它从字符串中删除 orderID。我一直在计划使用 onLoad 事件，但我无法正确使用语法。

此外，我将来自选定复选框的 orderID 保存在数据库中。当用户重新加载页面时，我可以将变量构建为逗号分隔的字符串。然后，如果 orderID 在该变量中，我需要确保所有复选框都已加载。

我希望这一切都有意义，任何帮助将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:39:01.093

如果您使用的是 PHP，phpGrid 通过服务器端脚本有一个条件单元格值示例：

[http://phpgrid.com/example/conditional-value/](http://phpgrid.com/example/conditional-value/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:29:33.173

您可以从检查开始： [JQgrid checkbox onclick update database](https://stackoverflow.com/questions/7208412/jqgrid-checkbox-onclick-update-database)

这将掩盖您的复选框上的点击事件。从该事件中，您可以构建您的字符串并从已取消选择的 var 中删除 orderId。

如果您保存检查了 orderId 的数据，那么您可以将它们作为 1/0 传递给您的复选框列并使用格式化程序： [根据通过 json 检索的值在 jqGrid 中添加复选框中Oleg 的答案指定的复选框](https://stackoverflow.com/questions/6534521/add-checkboxes-in-a-jqgrid-on-the-basis-of-value-retrieved-through-the-json)

如果您正在处理多页数据，请务必在页面更改之前将数据保存回服务器。

如果您想构建变量服务器端，您也可以始终将其作为 userData 传递。前任

服务器端

```
"userdata": { checkedOrderIds: "1,2,5,7"} 
```

客户端

```
var myUserData = jQuery("grid_id").getGridParam('userData'); 
```

# ios - 电影播放错误 - 零字符串

> ID：13967092
> 
> 赞同：0
> 
> 时间：2012-12-20T07:19:43.893
> 
> 标签：ios, objective-c, mpmovieplayercontroller

我正在尝试在 ios 中播放电影，但我不断收到错误消息。

我的代码：

```
-(IBAction)playMovie:(id)sender

NSString *filepath   =   [[NSBundle mainBundle] pathForResource:@"big-buck-bunny-clip" ofType:@"m4v"];
NSURL    *fileURL    =   [NSURL fileURLWithPath:filepath];
MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlaybackComplete:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:moviePlayerController];
[self.view addSubview:moviePlayerController.view];
moviePlayerController.fullscreen = YES;
[moviePlayerController play]; 
```

}

```
- (void)moviePlaybackComplete:(NSNotification *)notification

MPMoviePlayerController *moviePlayerController = [notification object];
[[NSNotificationCenter defaultCenter] removeObserver:self
                                                name:MPMoviePlayerPlaybackDidFinishNotification
                                              object:moviePlayerController];
[moviePlayerController.view removeFromSuperview];

[moviePlayerController.view setFrame:CGRectMake(38, 100, 250, 163)];
[self.view addSubview:moviePlayerController.view];
//moviePlayerController.fullscreen = YES;
[moviePlayerController play]; 
```

}

错误是：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[NSURL initFileURLWithPath:]: nil string parameter”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:12:32.657

好的，我明白了..我忘了在构建阶段添加文件...

# python - 父实例未绑定到 Session；属性“帐户”的延迟加载操作无法继续

> ID：13967093
> 
> 赞同：29
> 
> 时间：2012-12-20T07:19:47.640
> 
> 标签：python, sqlalchemy

在尝试执行以下操作时：

```
for line in blines:
    line.account = get_customer(line.AccountCode) 
```

尝试将值分配给以下内容时出现错误`line.account`：

```
DetachedInstanceError: Parent instance <SunLedgerA at 0x16eda4d0> is not bound to a       Session; lazy load operation of attribute 'account' cannot proceed 
```

难道我做错了什么？？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-23T17:06:23.447

“分离”意味着您正在处理一个与`Session`. 是关系数据库的`Session`网关，因此每当您引用映射对象上的属性时，ORM 有时需要返回数据库以获取该属性的当前值。通常，您应该只使用“附加”对象——“分离”是一种临时状态，用于缓存和在会话之间移动对象。

请参阅[Quickie Intro to Object States](http://docs.sqlalchemy.org/en/latest/orm/session_state_management.html?highlight=object%20states#quickie-intro-to-object-states)，然后也可能阅读该文档的其余部分；）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-03-04T02:54:22.447

我对芹菜有同样的问题。添加`lazy='subquery'`到关系解决了我的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-02T16:52:54.683

我在过早关闭查询会话时遇到了这种情况`DetachedInstanceError`（也就是说，在会话关闭后有代码来处理那些 SQLAlchemy 模型对象）。所以这是一个线索来仔细检查没有会话关闭，直到你绝对不需要与模型对象交互，即一些延迟加载的模型属性等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-09T08:31:22.427

我在单元测试时遇到了同样的问题。

解决方案是在“with”上下文中调用所有内容：

```
with self.app.test_client() as c:
    res = c.post('my_url/test', data=XYZ, content_type='application/json') 
```

然后它起作用了。

添加惰性属性对我不起作用。

# clearcase - Clearcase 评论搜索基于 GUI 的实用程序

> ID：13967098
> 
> 赞同：1
> 
> 时间：2012-12-20T07:20:43.957
> 
> 标签：clearcase

我正在一个使用 Clearcase 进行源代码管理的项目中工作。很多时候，我们遇到过这样的场景，我们希望在签入注释中找到具有特定关键字集的所有文件，例如跟踪文件因更改请求而更改时。

截至目前，我们借助此答案中建议的 Clean 方法来执行此操作[Searching ClearCase for a checkin with a specific comment](https://stackoverflow.com/questions/772035/searching-clearcase-for-a-checkin-with-a-specific-comment)

但是我们真的很想获得一些实用程序，例如用于 clearcase 的鱼眼，以便更轻松地完成我们的任务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:34:57.803

问题是，您找到的任何实用程序都将基于我在[之前的答案](https://stackoverflow.com/a/772221/6309)`cleartool find -exec`中提到的相同命令（即：非常慢）

而且 FishEye 2.9+[不再支持 ClearCase 了](https://confluence.atlassian.com/display/FISHEYE/End+of+Support+Announcement+for+IBM+ClearCase)。

只有最新版本的（商业）工具（如[GoMidjets Visual Annotate](http://www.gomidjets.com/blog/?p=1431) ）提供对这些元数据的某种有效搜索。

# javascript - 如何使用javascript函数将值传递给弹出窗口？

> ID：13967099
> 
> 赞同：0
> 
> 时间：2012-12-20T07:20:42.710
> 
> 标签：javascript

我想从现有表单打开新窗口。当我单击表单中的新窗口时，应打开新表单并输入值的结果，但新窗口表单正在打开主页，无法从父表单获取文本框值.

如何使用javascript从父窗口调用弹出窗口中的文本字段输入值？

```
//currently I'm using following code:
<script type="text/javascript">
function pop_up5() {
  var l_url=window.opener.document.getElementById("name").value;
  window.open(l_url,'''','scrollbars=yes,resizable=no,width=550,height=400');
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:40:54.020

分配`window.open()`给一个变量，以便您可以访问它的元素。

```
<form>
    <input type="textbox" id="txt" />
    <input type="button" id="btn" value="Open window" />
</form>

<script>
document.getElementById('btn').onclick = function(){
    var myWindow = window.open();
    myWindow.document.body.innerHTML = document.getElementById('txt').value;
};
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:02:23.863

假设您的文本字段的 id 是`myTextField`，无论您如何命名。如果它没有 id，则为其设置一个 id。然后，在弹出窗口中，您可以使用 JavaScript`parent.document.getElementById('myTextField').value`获取文本字段的值。

# asp.net-mvc - MVC 4 从数据库本地化验证消息

> ID：13967103
> 
> 赞同：2
> 
> 时间：2012-12-20T07:21:01.397
> 
> 标签：asp.net-mvc, validation, asp.net-mvc-4

场景：- 我正在开发 MVC 4 应用程序，该网站将以多种语言运行，并将托管在 Azure 上。对于本地化，我们依赖于数据库而不是资源包方法。

问题：- 我想在运行时自定义错误消息，我想通过数据库本地化消息。

我试图通过反射来改变属性值，但没有奏效。

代码 ：-

```
 //Model
      public class Home
      {
          [Required(ErrorMessage = "Hard coded error msg")]
           public string LogoutLabel { get; set; }
      } 

     //On controller
      public ActionResult Index()
    {
        Home homeData = new Home();
        foreach (PropertyInfo prop in homeData.GetType().GetProperties())
        {
            foreach (Attribute attribute in prop.GetCustomAttributes(false))
            {

               RequiredAttribute rerd = attribute as RequiredAttribute;

                if (rerd != null)
                {
                    rerd.ErrorMessage = "dynamic message";
                }
            }

        }

        return View(homeData);
    } 
```

在客户端进行验证时，它会向我显示旧消息“硬编码错误消息”。如果我们不想使用资源包方法，请建议如何定制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:45:47.073

你打算实现这个嵌套循环来本地化你所有实体的验证消息吗？我认为没有。更好的解决方案是使用`Validator`属性。

为你的班级：

```
 [Validator(typeof(HomeValidator))]
 public class Home
      {              
           public string LogoutLabel { get; set; }
      } 
```

现在让我们实现 HomeValidator ：

```
public class HomeValidator : AbstractValidator<Home>
    {
        public HomeValidator()
        {
            RuleFor(x => x.LogoutLabel ).NotEmpty().WithMessage("your localized message");
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:19:58.313

您最好创建并注册您自己的**DataAnnotationsModelMetadataProvider**，您可以在其中覆盖错误消息。有关更多详细信息，请在此处查看类似问题的答案[MVC Validation Error Messages not hardcoded in Attributes](https://stackoverflow.com/questions/1787398/mvc-validation-error-messages-not-hardcoded-in-attributes?rq=1)

# android - 如何避免在android中一次播放2个音乐文件？

> ID：13967105
> 
> 赞同：0
> 
> 时间：2012-12-20T07:21:04.180
> 
> 标签：android

我正在创建一个 android 应用程序，我在其中播放手机中的音乐文件。我正在使用服务来实现这一点。所以我的服务有问题。当我启动服务时，我的应用程序中的音乐开始播放。当我按 Home 键并转到 YouTube 应用程序并播放任何视频时，该服务仍在后台运行，支付音乐文件。启动其他音乐文件时，如何停止我的服务播放音乐文件。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:40:37.483

当 Activity 或 Service 启动时，检查音乐是否正在播放。如果正在播放，请停止播放，否则返回 null，如下所示：

我认为您的`onCreate`方法中有以下几行`Activity`：

```
MediaPlayer mp= MediaPlayer.create(this, R.raw.<Your Music File>);
mp.setLooping(true); 
```

`onPause`在您的`onStop`方法中添加以下代码行`Activity`：

```
if(mp.isPlaying())
    mp.stop();
else
    return; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:40:41.377

像这样创建两个方法。用于音频播放。

```
private void playAudioFile() 
    {
        try
        {
             mp=new MediaPlayer();
             mp.reset();
             mp.setDataSource(audiofileName));
             mp.prepare();
             mp.start();
        }
        catch (Exception ex) 
        {
            ex.printStackTrace();

        }
    } 
```

这适用于 killMedia 播放器。

```
private void killMediaPlayer() 
    {
        if(mp != null) 
        {
            try 
            {
                mp.release();
            }
            catch(Exception e) 
            {
                e.printStackTrace();
            }
        }
    } 
```

用这个完成它对我有用。

```
and call like this 
killMediaPlayer();
playaudio(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:24:39.903

在新活动开始时轮询[正在运行的服务列表](https://stackoverflow.com/questions/5523718/how-to-check-all-the-running-services-in-android)，如果需要使用扬声器，请暂停并让它完成？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T07:24:45.787

在启动新服务之前，请停止正在运行的服务。
停止正在运行的服务时，请确保也停止播放器。

# c# - 继承现有的 ActiveX 控件

> ID：13967110
> 
> 赞同：0
> 
> 时间：2012-12-20T07:21:25.760
> 
> 标签：c#, .net, vb.net, activex

我目前正在使用第 3 方 ActiveX 控件（Cadcorp SIS 分发的地形数据编辑器）。我必须在 VB.NET（框架 4）程序中用它做一些相当复杂的事情，并且发现控件附带的 API 非常有限。

到目前为止，我已经制作了一个自定义控件，其中包含控件并充当它的包装器，以允许我扩展 API，这工作正常，但我真正想做的是给控件更多事件，以便我可以更密切地监控数据的情况。

我不知道该怎么做虽然......

我尝试从控件继承，我可以很好地扩展它，但我不知道在那之后如何重用它。有什么方法可以继承控件并让它出现在工具箱中，这样我就可以将它放到表单上？还是我必须以编程方式加载它？如果是这样，我该怎么做？

欢迎任何关于如何做这种事情的指针、示例、教程或替代想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:27:28.590

如果您没有在工具箱中看到您的控件类，这并不意味着您不能使用它，只需修改表单设计器中的代码以使用您继承的类

或者

您可以将程序集 (dll) 从 Windows 资源管理器拖放到 VS.NET 的工具箱中。或者您可以右键单击 VS.NET 中的工具箱并选择添加/删除项目。这是你想要的？

还

```
<ToolBoxItem(True), ToolboxBitmap("MyNamespace.MyClass.bmp")> _
    Public Class MyClass 
```

# apache - 配置：错误：未找到 APR。请阅读文档

> ID：13967114
> 
> 赞同：30
> 
> 时间：2012-12-20T07:21:47.867
> 
> 标签：apache, fedora, apr

我正在尝试在我的 linux 机器上安装 apache。但是当我尝试时`./configure --prefix = /usr/local/apache`它显示一个错误`configure: error: APR not found. Please read the documentation`。我试图安装它`apr`，`yum install apr apr-deve`它说

`Package apr-1.4.6-1.fc15.x86_64 already installed and latest version` `No package apr-deve available.`

`Nothing to do` 我现在该怎么办？请原谅我是LINUX的新手

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-01-09T17:58:10.570

实际上我还必须安装 aprutils ......所以尝试使用：

```
sudo apt-get install libapr1-dev libaprutil1-dev 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-02-16T00:02:59.213

在您安装 apache httpd 发行版的目录中，有一个名为`/srclib`

你 cd 进入那个目录`cd /srclib`。确保您在该文件夹中。现在打开浏览器并转到[http://apr.apache.org/download.cgi](http://apr.apache.org/download.cgi) 并将 apr-*.tar.gz 文件下载到此目录中。

```
wget <link> 
```

解压后将它们解压缩到 srclib 目录中，确保将 apr-* 目录分别重命名为“apr”和“apr-util”。例如：

```
mv apr-1.6.5 apr
mv apr-util-1.6.1 apr-util 
```

现在，它应该从该文件夹中读取 .apr 文件。之后它也会要求，请`apr-util`确保您遵循相同的程序。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-13T13:27:40.300

如果您在 apache 2.2 或更低版本上安装添加标志 --with-included-apr

如果您使用的是 2.4，则可以访问[https://apr.apache.org/download.cgi](https://apr.apache.org/download.cgi)并下载最新的 apr 和 apr-util。解压它们并将它们移动到 /srclib 的 apache 源文件中。确保它们被命名为 apr 和 apr-util 而不是 apr.xxx 然后你可以使用 --with-included-apr 标志

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-09T01:10:21.923

对于我的 linux 装备，我通过使用本地包管理器下载 apr-dev 包来解决这个问题：

```
opkg install libapr-1-dev 
```

那是在 Angstrom linux 上，所以你的命令版本可能会有所不同，用 apt-get 或任何你的发行版的包管理器替换 opkg。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-12-16T13:22:56.077

有几种方法可以从[https://apr.apache.org/下载最新的 apr 和 apr-utils](https://apr.apache.org/)

```
tar xzvf apr.XXX.tar.gz
tar xzvf apr-util,XXX.tar.gz 
```

**解决方案1** ​​mv apr.XXX httpd.XYZ/srclib/apr mv apr-util.XXX httpd.XYZ/srclib/apr-util

你应该能看到

```
ls httpd.XYZ/srclib/apr-util
apr apr-util 
```

现在通过配置 apache

```
./configure --with-included-apr --other-options-that-you-want 
```

**解决方案 2**

```
mv apr && ./configure && make && make install
mv apr-util && ./configure && make && make install
mv httpd.XYZ/
./configure --with-apr=/usr/local/apr -other-options-that-you-want 
```

注意：/usr/local/apr (CENTOS)，您的发行版可能使用不同的发行版

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-21T15:31:47.243

您必须下载 APR 和 APR-UTIL 软件包。使用以下命令从源安装上述下载的软件包 ./configure -prefix= make make install

然后如下运行上述命令 ./configure -prefix= -with-apr= -with-apr-util=

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-10T03:09:46.180

以下命令适用于我的 Mac。

先决条件：

```
brew install apr
brew install pcre 
```

其实是链接不见了，所以http找不到

```
brew link apr
brew link pcre 
```

复制你看到的提示

```
vim ~/.bash_profile
export PATH="/usr/local/opt/apr/bin:$PATH"
export LDFLAGS="-L/usr/local/opt/apr/lib"
export CPPFLAGS="-I/usr/local/opt/apr/include"
export PATH="/usr/local/opt/apr-util/bin:$PATH" 
```

然后，再试一次

```
source ~/.bash_profile
./configure 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-08-08T05:40:10.563

`sudo apt-get install libapr1-dev libaprutil1-dev` 在linux中使用这个命令

# c - 在作为参数传递给函数时连接字符串

> ID：13967116
> 
> 赞同：2
> 
> 时间：2012-12-20T07:21:50.043
> 
> 标签：c, string

有一个函数将字符串作为参数/参数。

```
Func(char* strA)
{
...
} 
```

我有两个字符串；

```
#define FIRST "first"
char efg[] = " second"; 
```

我想基本上`"first second"`作为参数发送到`Func(strA)`，但我不想使用`strcat(FIRST, efg);`它，因为它会永久改变我的宏`FIRST`。

有没有办法在`"first second"`不破坏上面的宏的情况下作为参数发送？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:37:07.547

您可以使用 sprintf 函数先写入临时缓冲区：

```
#define FIRST "first"
char efg[] = " second";  
char* space = " ";
char* strA = calloc(strlen(FIRST) + strlen(space) + strlen(efg) + 1, sizeof(char));  

sprintf(strA,"%s%s%s",FIRST, space, efg);

Func(strA);  

free(strA); 
```

试试看！！

* * *

注意：不要忘记 free() 动态分配的内存。

说明：
函数`sprintf()`和 一样`printf()`，只是输出被发送到缓冲区。返回值是写入的字符数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:54:40.433

如果允许您不`efg`使用变量而是字符串文字，那么因为相邻的字符串文字是隐式连接的（规范 C99：5.1.1.2.6），您可以简单地拥有以下内容：

```
Func(FIRST " second"); 
```

出于同样的原因，您也可以声明`efg`为

```
char efg[] = FIRST " second"; 
```

无论哪种方式，都比 strcat 或 sprintf 容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:29:11.183

也许您可以先使用 将宏复制到新的 char 数组`strcpy()`，然后`strcat( new_var, efg )`- 将其作为参数传递。

# php - 在 php 脚本中抓取 URL 以进行发布

> ID：13967120
> 
> 赞同：-6
> 
> 时间：2012-12-20T07:22:02.013
> 
> 标签：php

大家好，我想知道在 PHP 中获取完整 URL 和参数的正确方法是什么。

我需要这个来检查用户是否错误地发布了 url。

感谢 Raisen 的回答。使用

```
$_SERVER['REQUEST_URI'] 
```

我能够看到用户系统正在点击我的链接并错误地拼写了一个参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:26:23.273

$_SERVER 数组中的 QUERY_STRING 元素应该可以解决问题。

```
$_SERVER['QUERY_STRING'] 
```

或者尝试 REQUEST_URI 元素：

```
$_SERVER['REQUEST_URI'] 
```

# java - 将 log4j 添加到类路径中，但仍然出现 java.lang.NoClassDefFoundError

> ID：13967122
> 
> 赞同：1
> 
> 时间：2012-12-20T07:22:09.293
> 
> 标签：java, jakarta-ee, spring-mvc, jvm, log4j

我将以下内容添加到我的类路径中：

```
slf4j-log4j12-1.6.1.jar
slf4j-api-1.6.1.jar 
```

但我仍然得到一个错误。异常开始于：

```
Failed to instantiate SLF4J LoggerFactory
java.lang.NoClassDefFoundError: org/apache/log4/Level 
```

这里有什么问题？您可以对此有所了解的任何光线都会非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:26:15.300

您没有将类路径中的 Log4j jar 添加`log4j-1.2.15.jar`到类路径

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T07:25:39.700

您需要将 log4j 实现添加到您的类路径中，因为您当前拥有的是 slf4j 外观和 slf4j 桥接 log4j，但不是 log4j 本身。

# c# - 如何在 Distinct 中使用 lambda 表达式

> ID：13967123
> 
> 赞同：6
> 
> 时间：2012-12-20T07:22:20.727
> 
> 标签：c#, linq, lambda, distinct

> **可能重复：**
> [Linq Distinct() 使用委托进行相等比较器](https://stackoverflow.com/questions/4607485/linq-distinct-use-delegate-for-equality-comparer)

我需要通过 ID 获取唯一的 PostViewModel。如何使用 lambda 表达式？

```
public IEnumerable<PostViewModel> DistinctPosts
{
  get 
  { 
    return Employees
             .SelectMany(e => e.PostList.Posts)
             .Distinct(new PostViewModelComparer())
             .ToList(); 
  }
} 
```

比较器：

```
class PostViewModelComparer : IEqualityComparer<PostViewModel>
{
  #region IEqualityComparer<Contact> Members

  public bool Equals(PostViewModel x, PostViewModel y)
  {
    return x.ID.Equals(y.ID);
  }

  public int GetHashCode(PostViewModel obj)
  {
    return obj.ID.GetHashCode();
  }

  #endregion
} 
```

抱歉，这是重复的，来自[为 LINQ 的 Distinct() 使用相等比较器的委托](https://stackoverflow.com/questions/4607485/linq-distinct-use-delegate-for-equality-comparer)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:31:10.253

如果我理解正确，我也遇到过类似的问题。

基于[这篇文章](http://blog.lavablast.com/post/2010/05/05/Lambda-IEqualityComparer3cT3e.aspx)，我做了这个扩展方法

```
public static IEnumerable<T> Distinct<T>(this IEnumerable<T> source, 
                                         Func<T, object> keyExtractor)
{
  return source.Distinct(new KeyEqualityComparer<T>(keyExtractor));
} 
```

它会为给定的 lambda 自动生成必要的 IEqualityComparer 实现。在您的情况下，这将能够使用类似的东西：

```
return Employees
         .SelectMany(e => e.PostList.Posts)
         .Distinct(postViewModel => postViewModel.ID)
         .ToList(); 
```

# ios - UIDatePickerModeDateAndTime 格式 2012-12-20 07:15:18 +0000 没有 +0000

> ID：13967124
> 
> 赞同：1
> 
> 时间：2012-12-20T07:22:44.770
> 
> 标签：ios, datepicker, format

`UIDatePickerModeDateAndTime`以格式返回输出

```
2012-12-20 07:15:18 +0000. 
```

如何`+0000`从输出中删除？

我想截图，但我的声誉还不够，我希望它能解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:30:34.697

用一个[`NSDateFormatter`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)

```
- (IBAction)dateChanged:(UIDatePicker *)sender {
    NSDate *date = sender.date;
    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setDateStyle:NSDateFormatterShortStyle];   // if you want to show the date to the user
    [df setTimeStyle:NSDateFormatterShortStyle];   // if you want to show the date to the user
    // [df setDateFormat:@"yyyy-MM-dd HH:mm:ss"];  // if you want to use the date for your model

    NSString *dateString = [df stringFromDate:date];
    NSLog(@"%@", dateString);
} 
```

如果您想向用户显示日期，请使用`setDateStyle:`and `setTimeStyle:`，因为他们了解区域设置并以正确的格式生成输出。如果您只需要该日期用于后端（例如创建文件名），请使用`setDateFormat:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:27:40.033

有很多解决方案。其中一些是：

1) 用空字符串替换 + 0000

2）切片输出直到（长度 - 5）

它需要创造力来开发更多的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:30:40.067

这是代码

```
NSString *calDate = @"2011-11-11 21:56:38 +0000";

NSDate *date = [[[NSDate alloc] init] retain];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];

[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss Z"];  

//                                   right here    ^

date = [dateFormatter dateFromString:calDate];

NSLog(@"date:%@", date); 
```

输出：

```
2012-01-03 20:14:15.258 Craplet[38753:707] date:2011-11-11 21:56:38 +0000 
```

没有 Z：

```
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"]; 
```

它输出：

```
2012-01-03 20:16:10.456 Craplet[38885:707] date:(null) 
```

如果格式不能与日期字符串匹配，则返回 nil

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T07:34:15.913

使用这种方式：

```
NSDateFormatter * dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyy-MM-dd HH:mm:ss"];
NSDate *today = [NSDate date];
NSString *dateString =[dateFormatter stringFromDate:today];
NSLog(@"Date is: %@",dateString); 
```

输出：

```
Date is: 2012-12-20 12:58:58 
```

# dependencies - Ninject/DI 在简单场景中有用吗？

> ID：13967132
> 
> 赞同：3
> 
> 时间：2012-12-20T07:23:34.960
> 
> 标签：dependencies, inversion-of-control, ninject, code-injection

在过去的几天里，我看了很多 IOC/DI/ninject 教程和视频，但我仍然不相信我明白了这一点。

在大多数示例中，他们通常会说，如果我们想要剑或手里剑会发生什么，我们需要定义 IWeapon。我们想将实际武器的知识与战士分开。

因此，我们将所需的 IWeapon 注入到 Warrior 中，然后让 Ninject（或其他）为我们提供进入 IWeapon 所需的类（例如剑或手里剑），但随后他们继续创建一个默认绑定，该绑定创建一个单一的绑定IWeapon 之剑。

我们如何告诉它使用哪一个？我们不能使用命名绑定，因为您不能在武器上设置命名绑定然后获取。

就我而言，我有一条消息正在从队列中读取，它将包含有关发送内容和发送给谁的必要详细信息。

我还有一个接口，它知道如何发送带有 SMS、电子邮件、iphone 等实现的消息。在这种情况下，我无法理解如何使用 DI，而不必在我的代码中的某处放置开关 :-(

```
public interface INotify
{
    void Send(Message msg);
}

public class Message
{
    public Message(INotify notify)
    {
        _notify = notify;
    }
    public void Send()
    {
        _notify.Send(this);
    }

    readonly INotify _notify;
    public string Type { get; set; }
    public string Text{ get; set; }
    public string Name { get; set; }
    public string Number { get; set; }
    public string Email { get; set; }
}

_kernel.Bind<INotify>().To<NotifyEmail>();
//kernel.Bind<INotify>().To<NotifySMS>().Named("sms");
//kernel.Bind<INotify>().To<NotifyAPNS>().Named("iphone");

var msg = _kernel.Get<Message>();
msg.Send(); 
```

使实例化所需的类变得容易不是重点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T07:49:20.633

The main advantage of DI is maintenability. By letting DI inject your dependencies for you, as configured in a unified location in your code, it is easier to swap in and out different classes as your program evolves. Because these dependencies are usually based on interfaces, this enforces loose coupling. As you mentioned with the weapons, the idea is that your different components don't have to "know" about each other to function correctly.

The biggest advantage to DI is really when it comes to testing. Because DI usually means defining dependencies by interface and not by explicit classes, this makes it easy to stub these dependencies when you are trying to test a specific aspect of your program.

A good example of where this would be useful is if your program is accessing a webservice through a proxy class which may not be reasonable to call during the testing of your application. Instead of accessing the WS via `MyProxy`, you could use DI to have it access the WS via `IMyProxy`. You could then create a stub proxy which returns dummy values and allows you to test other components in your application without having direct access to the webservice itself.

All that said, in my personal experience DI is not a magic bullet for every scenario. DI adds a layer of complexity in exchange for a layer of abstraction. This can be a great benefit to the robustness of your application's architecture, but it can also be unnecessary. This article on SO [What is dependency injection?](https://stackoverflow.com/questions/130794/what-is-dependency-injection) has a bit of a discussion of the usefulness of DI. This answer [https://stackoverflow.com/a/140655/1068266](https://stackoverflow.com/a/140655/1068266) I think sums up DI in a fairly reasoned light.

In short, I don't believe in implementing DI for DI's sake. Read this article [http://www.jamesshore.com/Blog/Dependency-Injection-Demystified.html](http://www.jamesshore.com/Blog/Dependency-Injection-Demystified.html) which is referenced in the post I mentioned above. It is the clearest and simplest definition of the subject that I have found. If you don't think that you can benefit from the pattern based on what is explained in that article, the DI will probably amount to an unnecessary layer of complexity in your application.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T09:26:18.913

DI 是将您的软件放在一起，而不是解决您的业务逻辑。在您的场景中，您尝试从 IoC 容器中解析 DTO，这被认为是不好的做法。

这意味着您必须以不同的方式为您的应用程序建模。例如，以下伪代码将为您提供一种处理这种情况的方法的想法：

```
public interface INotify
{
    string Type { get; }
    void Send(Message msg);
}

public class Message
{
    public string Type { get; set; }
    public string Text{ get; set; }
    public string Name { get; set; }
    public string Number { get; set; }
    public string Email { get; set; }
}

public class MessageProcessor
{
    public MessageProcessor(IEnumerable<INotify> notifiers, IMessageQueue) 
    {
        this.notifiers = notifiers.ToDictionary(n => n.Type, n);  
    }

    public void Process()
    {
        while (!TerminateApplication) 
        {
            var msg = this.queue.GetNextMessage();
            this.notifiers[msg.Type].Send(msg);
        }
    }
}

public void Main() 
{
    using (var kernel = new StandardKernel())
    {
        kernel.Bind<INotifier>().To<NotifyEmail>();
        kernel.Bind<INotifier>().To<NotifySms>();
        kernel.Bind<INotifier>().To<Notify>();
        kernel.Bind<MessageProcessor>().ToSelf();

        kernel.Get<MessageProcessor>().Process();
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T07:47:10.817

依赖注入通常是关于免除类必须为自己解决依赖关系的问题，而是让它们依赖一些更高级别的代码来为它们完成这项工作。

依赖注入的好处是提高了可维护性，通过单一职责实现了简单性，并且是单元测试的重要推动力，因为可以在测试时注入模拟依赖项。

像 Ninject 和其他类似的 IOC 容器这样的框架通常提供一种方便的方法来管理存在于应用程序级别的依赖项，其中特定的解决方案应用于依赖项的每个实例。

另一方面，您的消息示例正在处理场景驱动的情况，其中每个解决方案都取决于某些条件。

在场景驱动的情况下使用依赖注入仍然很有用，并且如果依赖注入仍然会给您带来所有好处。但正如您所说，有必要使用 switch 或 if/else 结构来提供正确的解决方案。这些条件结构应该驻留在一些更高级别的控制代码中，以编排具有依赖关系的类

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T09:06:02.043

您可以使用[*Contextual Binding*](https://github.com/ninject/ninject/wiki/Contextual-Binding)而不是使用*Named* Binding 。重写您的配置以根据注入目标自动检测要注入的内容：[](https://github.com/ninject/ninject/wiki/Contextual-Binding)

 *```
kernel.Bind<INotify>().To<NotifyEmail>();
kernel.Bind<INotify>().To<NotifySms>().WhenInjectedInto<SmsService>();
kernel.Bind<INotify>().To<NotifyAPNS>().WhenInjectedInto<IPhoneService>(); 
```

但据我了解，这将部分解决您的问题。

在我看来，您需要类似*工厂*而不是*依赖注入*来处理您的消息队列。例如：

```
var factory = new Dictionary<string, Func<Message>>
{
    { "unknow", () => new Message(new NotifyEmail()) },
    { "sms", () => new Message(new NotifySms()) },
    { "iphone", () => new Message(new NotifyAPNS()) }
};

factory["iphone"]().Send(); 
```

如果您必须构建复杂的实现，则`INotify`可以同时使用*依赖注入*和*抽象工厂*[`ninject.extensions.factory`](https://github.com/ninject/ninject.extensions.factory)。在这种情况下，您可以定义新的工厂接口并定义它的操作方式：

```
kernel.Bind<INotify>().To<NotifyEmail>()
        .NamedLikeFactoryMethod<INotify, INotifocationFactory>(f => f.GetNotifyEmail());
kernel.Bind<INotify>().To<NotifySms>()
        .NamedLikeFactoryMethod<INotify, INotifocationFactory>(f => f.GetNotifyEmail());
kernel.Bind<INotify>().To<NotifyAPNS>()
        .NamedLikeFactoryMethod<INotify, INotifocationFactory>(f => f.GetNotifyEmail());

// receive INotifocationFactory using constructor injection,
// do not resolve it directly, because this will led you to ServiceLocator anti-pattern
var abstractFactory = kernel.Get<INotifocationFactory>();

var factory = new Dictionary<string, Func<Message>>
{
    { "unknow", () => new Message(abstractFactory.GetNotifyEmail()) },
    { "sms", () => new Message(abstractFactory.GetNotifyEmail()) },
    { "iphone", () => new Message(abstractFactory.GetNotifyAPNS()) }
};

factory["iphone"]().Send();

kernel.Bind<INotifocationFactory>().ToFactory(); 
```

最后一个样本非常复杂，可能是*5 美分概念的 25 美元术语*。所以这完全取决于你在特定情况下使用什么解决方案*

# asp.net-mvc - DefaultControllerFactory 与 IDependencyResolver

> ID：13967133
> 
> 赞同：8
> 
> 时间：2012-12-20T07:23:37.487
> 
> 标签：asp.net-mvc, asp.net-mvc-3, dependency-injection, inversion-of-control

我有一点误解：当我们实现 IDependencyResolver 时，这意味着我们可以在项目的每个部分使用 DI。因此，即使我不从 DefaultControllerFactory 继承，我也可以构建具有依赖关系的控制器？

**编辑：**我建议浏览所有这些[Brad Wilson 的帖子](http://bradwilson.typepad.com/blog/2010/10/service-location-pt5-idependencyresolver.html)[，这篇帖子](http://weblogs.asp.net/shijuvarghese/archive/2011/01/21/dependency-injection-in-asp-net-mvc-3-using-dependencyresolver-and-controlleractivator.aspx)
也很有用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T08:30:36.567

学究笔记先。您不能从接口（IDependencyResolver）继承，但我假设您的意思是实现。

简而言之，您可以选择使用其中任何一个，您不会同时使用两者。因此，如果您设置了解析器，则不需要控制器工厂，反之亦然。

我只在 mvc 中使用了 Castle-windsor 中的 DefaultControllerFactory。如果您也在使用 castle-windsor，那么您在使用 IDependencyResolver 时需要警惕一个松散的结局，[没有释放方法](http://mikehadlow.blogspot.ie/2011/02/mvc-30-idependencyresolver-interface-is.html)，但可能有解决这个问题的方法。

对于其他框架，例如[ninject](http://forums.asp.net/t/1818076.aspx/1?DependencyResolver%20why%20is%20this%20preferable%20to%20DefaultControllerFactory)或[unity](http://weblogs.asp.net/shijuvarghese/archive/2011/01/21/dependency-injection-in-asp-net-mvc-3-using-dependencyresolver-and-controlleractivator.aspx) IDependencyResolver 有时更可取。

# asp.net - 在 Kentico CMS 版本 7 中创建页面时的对象引用

> ID：13967139
> 
> 赞同：2
> 
> 时间：2012-12-20T07:24:27.913
> 
> 标签：asp.net, sql-server, kentico

我已经安装了最新版本的 kenticoCMS (v.7) 并创建了一个新的公司网站。现在我想在根网站上创建一个新页面，但是当我点击新页面项目时，这会产生错误。我在另一个网站上尝试过同样的方法，但错误仍然是一样的。

提前致谢！

```
Server Error in '/KenticoCMS' Application.
Object reference not set to an instance of an object.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error:

Line 209:        get
Line 210:        {
Line 211:            return mStep ?? (mStep = DocumentManager.Step);
Line 212:        }
Line 213:    }

Source File: f:\Asp.net\KenticoCMS\CMSModules\Content\Controls\EditMenu.ascx.cs    Line: 211

Stack Trace:

[NullReferenceException: Object reference not set to an instance of an object.]
   CMS.DocumentEngine.WorkflowManager.GetNodeWorkflowScopeInternal(TreeNode node) +342
   CMS.DocumentEngine.WorkflowManager.GetNodeWorkflowInternal(TreeNode node) +135
   CMS.DocumentEngine.WorkflowManager.GetPublishedWorkflowStepInternal(TreeNode node) +11
   CMS.DocumentEngine.WorkflowManager.GetStepInfoInternal(TreeNode node) +65
   CMS.DocumentEngine.TreeNode.get_WorkflowStep() +90
   CMS.FormControls.CMSDocumentManager.get_Step() +36
   CMSModules_Content_Controls_EditMenu.get_Step() in f:\Asp.net\KenticoCMS\CMSModules\Content\Controls\EditMenu.ascx.cs:211
   CMSModules_Content_Controls_EditMenu.ReloadMenu() in f:\Asp.net\KenticoCMS\CMSModules\Content\Controls\EditMenu.ascx.cs:448
   CMSModules_Content_Controls_EditMenu.OnPreRender(EventArgs e) in f:\Asp.net\KenticoCMS\CMSModules\Content\Controls\EditMenu.ascx.cs:336
   System.Web.UI.Control.PreRenderRecursiveInternal() +103
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2496

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.547 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:08:11.827

是否可以使用堆栈跟踪复制和粘贴整个错误消息？此外，似乎有一些损坏的文件 - 我不知道是哪个文件，因为屏幕截图没有显示引发异常的文件的路径。

因此，要刷新文件，我建议例如应用最新的[修补程序](http://devnet.kentico.com/Bugtracker/Hotfixes.aspx "修补程序")

# privacy - 哪些请求应该有 P3P 标头？

> ID：13967148
> 
> 赞同：0
> 
> 时间：2012-12-20T07:24:48.443
> 
> 标签：privacy, p3p

我正在为网站添加一个 P3P 标头以保护隐私，并且想知道该标头是否应仅附加到 HTML 页面，还是应附加到所有响应（例如图像、css 和脚本）？

我目前将标题附加到所有响应中，但想确认这是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T13:42:23.803

P3P 标头应在写入私有信息（如 cookie）的页面上传回。标头可以在静态资源上传回，但我怀疑 IE 对它有什么作用。如果您进行应用程序范围的 P3P 标头注入，那么事情应该仍然可以正常工作。

对于 IFRAME 中的 Grails 应用程序，我必须在第一次分配 JSESSIONID 时在请求周期的早期注入标头，以便 IE 在适当的时间存储 cookie。

# c++ - 从 python IDLE 问题调用 c++

> ID：13967149
> 
> 赞同：1
> 
> 时间：2012-12-20T07:24:59.953
> 
> 标签：c++, python, mingw

我是 python 新手，正在尝试从 python 调用 c++ 函数，我从 Florian Bösch 那里找到了[这个答案](https://stackoverflow.com/questions/145270/calling-c-c-from-python)，发现它真的很有帮助，我按照链接中的方式做了所有事情，但是当我遇到一个小问题时，我真的很惊讶从命令提示符运行 fooWrapper.py，它显示结果“hello”，但是当我通过单击作为模块运行从空闲运行程序时，python shell 打开并且什么也不显示，唯一的动作是当你按下回车键时光标向下移动。这是正常现象还是有问题？？？

我使用 python 2.7.3(32bits)，带有 windows 7 和 MInGW 编译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:02:03.977

问题是 IDLE 重定向标准输入和输出，但是您的 C++ 函数写入原始标准输出，因此 IDLE 不会显示它。如果您从终端启动 IDLE，您将在终端中看到 C++ 的输出。

这是 IDLE 的问题，我怀疑你能做些什么。

如果你想开发比非常小的脚本更大的东西，你应该使用不同的 IDE。

# iphone - 从 iPhone 设备 UDID 获取国家代码？

> ID：13967150
> 
> 赞同：3
> 
> 时间：2012-12-20T07:25:03.390
> 
> 标签：iphone, ios, push-notification, udid

我正在尝试从 iPhone 设备 UDID 获取国家代码。我找到了这个

```
NSLocale *locale = [NSLocale currentLocale];
NSString *countryCode = [locale objectForKey: NSLocaleCountryCode];
NSString *countryName = [locale displayNameForKey:NSLocaleCountryCode value:countryCode]; 
```

它在本地设置中运行良好，但我想从设备 UDID 获取国家代码。过得去吗？

谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T07:26:15.827

UDID 不包含有关国家代码的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T07:31:01.707

你可以这样做

```
#import <CoreTelephony/CTCarrier.h>
#import <CoreTelephony/CTTelephonyNetworkInfo.h>

// Setup the Network Info and create a CTCarrier object
CTTelephonyNetworkInfo *networkInfo = [[[CTTelephonyNetworkInfo alloc] init] autorelease];
CTCarrier *carrier = [networkInfo subscriberCellularProvider];

// Get carrier name
NSString *carrierName = [carrier carrierName];
if (carrierName != nil)
  NSLog(@"Carrier: %@", carrierName);

// Get mobile country code
NSString *mcc = [carrier mobileCountryCode];
if (mcc != nil)
  NSLog(@"Mobile Country Code (MCC): %@", mcc);

// Get mobile network code
NSString *mnc = [carrier mobileNetworkCode];
if (mnc != nil)
  NSLog(@"Mobile Network Code (MNC): %@", mnc); 
```

[**供参考检查。**](http://mobiledevelopertips.com/core-services/carrier-information-mobile-network-code-mnc-and-mobile-country-code-mcc.html)

# android - 果冻豆上的溢出按钮

> ID：13967155
> 
> 赞同：1
> 
> 时间：2012-12-20T07:25:37.287
> 
> 标签：android

我正在使用目标 Sdk 17 开发应用程序。我当前的设备是 Nexus 7。
我的应用程序应该没有操作栏，所以我在活动上使用主题*Theme.Holo.NoActionBar*。

我想在右下角（最近的任务旁边）显示溢出按钮（3 个点）。但我不能让它可见。如果我返回操作栏，我会在右上角看到它，但这不是我想要的。

对任何人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:33:40.640

如果您谈论的是`OptionsMenu`必须使用的按钮`ActionBar`，或者您可以`android:targetSdkVersion="10"`在清单文件中为您的项目设置。这将启用兼容性行为，您将在其他导航按钮附近看到菜单按钮。

# php - 如何将帖子链接到 WordPress 中的自定义“子分类”？

> ID：13967164
> 
> 赞同：0
> 
> 时间：2012-12-20T07:26:11.637
> 
> 标签：php, wordpress, taxonomy

如何将帖子链接到 WordPress 中的自定义“子分类”？用一个例子可以更好地解释我所说的“子分类”的意思：

1.  我创建了一个名为“电影”的自定义分类法，链接到帖子（即，当您撰写帖子时，您可以选择与之相关的电影，例如类别）
2.  我创建了一个名为“流派”的“子分类”，未链接到任何帖子类型
3.  我利用一些第 3 方代码向[分类法添加额外字段，](http://en.bainternet.info/2012/wordpress-taxonomies-extra-fields-the-easy-way)以便在创建“电影”时将“流派”分类法添加为可选选项（即流派与电影相关联）。这里的目标是选择电影将自动参考电影的类型，而无需帖子编辑器在每个帖子上同时选择电影和类型（并且可能每次都错误地选择不同的选择）
4.  这一切都有效，但我还没有弄清楚如何使发布的新帖子自动创建对电影和流派的引用（即 /movies/the-hangover/ 将列出帖子，但 /genre/喜剧/不会）

我猜需要实现某种回调来手动将流派的引用添加到 term_relationships 表，以及更新帖子计数（可能还有其他地方？），但我不知道该怎么做.

...或者有没有更好的方法来解决将流派与电影联系起来的整个挑战？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:27:42.440

感谢@NikolaIvanovNokolov 为解决方案提供了正确的路径！

```
// Add action hook to link genre to movie selection
add_action('save_post', 'save_genre');

// Action hook to link Genre taxonomy to the post
function save_genre($post_id) {
    // Remove reference to any old genres
    wp_set_post_terms($post_id, NULL, 'genre');

    // Add genre reference
    $movie_ids = get_the_terms($post_id, 'movie');
    if ($movie_ids && !is_wp_error($movie_ids)) {
        foreach ($movie_ids as $movie_id) {
            $genre_slug = get_tax_meta($movie_id, 'movie_tags_genre');
            if ($genre_slug) {
                $genre = get_term_by('slug', $genre_slug, 'genre');
                wp_set_post_terms($post_id, $genre->term_id, 'genre');
            }
        }
    }
} 
```

# java - 用Java从Excel中获取文本框值

> ID：13967168
> 
> 赞同：2
> 
> 时间：2012-12-20T07:26:20.570
> 
> 标签：java, excel, casting, apache-poi, hssf

我有一个 Excel 文件，我需要从该 Excel 文件内的文本框中读取一个值。

我正在使用`org.apache.poi`库，并尝试通过以下方式获取值：

```
 List<HSSFObjectData> obj=workbook.getAllEmbeddedObjects();
   for (int i = 0; i < obj.size(); i++) {           
       HSSFTextbox t = (HSSFTextbox) obj.get(i);
   } 
```

不幸的是，我无法`HSSFTextbox`转换为`HSSFObjectData`元素。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:38:36.887

也许你可以这样做：

```
 try {
        InputStream input = new FileInputStream("qa-textbox.xls");
        POIFSFileSystem fs = new POIFSFileSystem(input);
        HSSFWorkbook wb = new HSSFWorkbook(fs);
        HSSFSheet sheet = wb.getSheetAt(0);
        HSSFPatriarch pat = sheet.getDrawingPatriarch();
        List children = pat.getChildren();

        Iterator it = children.iterator(); 
        while(it.hasNext()) {           
            HSSFShape shape = (HSSFShape)it.next();
            if (shape instanceof HSSFTextbox){
              HSSFTextbox textbox = (HSSFTextbox)shape;
              HSSFRichTextString richString = textbox.getString();
              String str = richString.getString();
              System.out.println("String: " + str);
              System.out.println("String length: " + str.length());
            }
        }  
    } catch (IOException ex) {
        ex.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:45:22.940

这将有助于阅读您的 Excel 表格

```
HSSFWorkbook workbook = new HSSFWorkbook(fs);
      for (HSSFObjectData obj : workbook.getAllEmbeddedObjects()) {
          //the OLE2 Class Name of the object
          String oleName = obj.getOLE2ClassName();
          if (oleName.equals("Worksheet")) {
              DirectoryNode dn = (DirectoryNode) obj.getDirectory();
              HSSFWorkbook embeddedWorkbook = new HSSFWorkbook(dn, fs, false);
              //System.out.println(entry.getName() + ": " + embeddedWorkbook.getNumberOfSheets());
        readSheetElements(embeddedWorkbook);

          } else if (oleName.equals("Document")) {
              DirectoryNode dn = (DirectoryNode) obj.getDirectory();
              HWPFDocument embeddedWordDocument = new HWPFDocument(dn, fs);
              //System.out.println(entry.getName() + ": " + embeddedWordDocument.getRange().text());
          }  else if (oleName.equals("Presentation")) {
              DirectoryNode dn = (DirectoryNode) obj.getDirectory();
              SlideShow embeddedPowerPointDocument = new SlideShow(new HSLFSlideShow(dn, fs));
              //System.out.println(entry.getName() + ": " + embeddedPowerPointDocument.getSlides().length);
          } else {
              if(obj.hasDirectoryEntry()){
                  // The DirectoryEntry is a DocumentNode. Examine its entries to find out what it is
                  DirectoryNode dn = (DirectoryNode) obj.getDirectory();
                  for (Iterator entries = dn.getEntries(); entries.hasNext();) {
                      Entry entry = (Entry) entries.next();
                      //System.out.println(oleName + "." + entry.getName());
                  }
              } else {
                  // There is no DirectoryEntry
                  // Recover the object's data from the HSSFObjectData instance.
                  byte[] objectData = obj.getObjectData();
              }
          }
      }

    public void readSheetElements(HSSFWorkbook embeddedWorkbook) {
     HSSFSheet  hSSFSheet = embeddedWorkbook.getSheet(0);
     java.util.Iterator<Row>    rowItr = hSSFSheet .rowIterator() ;
    while(rowItr .hasNext()) {

     java.util.Iterator<Cell>   cellItr  = rowItr.next().cellIterator() ;
     // read cell value from each cell

    } 
```

# java - 使用jsp创建注销链接？

> ID：13967172
> 
> 赞同：-3
> 
> 时间：2012-12-20T07:26:33.050
> 
> 标签：java, jsp, servlets

> **可能重复：**
> [为 JSP 创建注销链接？](https://stackoverflow.com/questions/13966762/creating-a-link-to-logout-for-jsp)

当用户登录我的应用程序时，登录应用程序后我需要一个指向我所有页面的注销链接。所以提供 jsp 代码

```
 HttpSession session = request.getSession(false);
   if(session != null)
            session.invalidate();
   request.getRequestDispatcher("/index.jsp").forward(request,response); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:31:28.973

为注销创建一个单独的 JSP，并将其导入所有 JSP 中您要创建注销链接的位置。

```
<jsp:include page="logOut.jsp" /> 
```

# sockets - 我可以在同一个端口上有不同类型的套接字吗？

> ID：13967180
> 
> 赞同：1
> 
> 时间：2012-12-20T07:27:03.643
> 
> 标签：sockets, file-descriptor

我有一个奇怪的问题。我了解到套接字是 IP 和端口的组合。那么什么是套接字描述符呢？它只是一个整数吗？它有什么作用？

我可以在同一个端口上使用不同的套接字描述符吗？如果是，那么它们可以是不同的类型（TCP/UDP）吗？

我知道这些都是愚蠢的问题；我已经盲目使用 SD 很长一段时间了：P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:46:32.410

TCP 和 UDP 是独立的，因此您可以在同一个端口上拥有 TCP 和 UDP 套接字。

套接字描述符之于套接字，就像文件描述符之于文件一样。

一个 TCP 连接实际上是由元组定义的：本地 IP、本地端口、远程 IP、远程端口。您可以使用相同的本地 IP 和端口进行多个连接，只要它们具有不同的远程 IP 和/或端口即可。

例如，Web 服务器使用其本地端口 80 进行所有连接。但是每个客户端连接将来自不同的机器（因此不同的远程 IP）或同一台机器上的不同套接字（因此它们将具有相同的远程 IP 但不同的远程端口）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:38:27.700

套接字描述符是当您要求系统通过套接字调用创建套接字时系统返回的唯一整数。每个套接字都可以通过其套接字描述符来识别。

关于问题的第二部分，您将获得相同 IP+PORT+PROTOCOL 的不同套接字描述符，所以是的，您可以在同一个端口上拥有 tcp 和 udp 套接字，但您将获得两个不同的套接字描述符

您应该首先阅读这些网络编程教程： [Beej 的网络编程教程](http://beej.us/guide/bgnet/)

# php - PHP：变量值未显示

> ID：13967183
> 
> 赞同：4
> 
> 时间：2012-12-20T07:27:18.110
> 
> 标签：php, jquery, onclick

我在 php echo 中放置了一个 html，例如 .

```
echo '<td onclick="getdesc($descriptn)">'; 
```

我的问题是 onclick 不起作用我也尝试过

```
echo '<td onclick="getdesc(\'$descriptn\')">'; 
```

但是在这我没有得到变量 $descriptn 的值是直接打印的。

请告诉我这样做的正确方法是什么，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T07:28:34.100

改成

```
echo '<td   style="margin-top: 3px; padding: 3px 2px; background: none repeat scroll 0px 0px #E9E9E9;" onclick="getdesc(\''.$descriptn.'\')" >'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T07:28:47.010

为此使用双引号，那是错误的。

```
echo "<td   style='margin-top: 3px; padding: 3px 2px; background: none repeat scroll 0px 0px #E9E9E9;' onclick='getdesc(\'$descriptn\')' >"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T07:28:20.683

[单引号与双引号](http://www.trans4mind.com/personal_development/phpTutorial/quotes.htm)

```
echo '<td   style="margin-top: 3px; padding: 3px 2px; background: none repeat scroll 0px 0px #E9E9E9;" onclick="getdesc(\''.$descriptn.'\')" >'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T07:34:16.367

```
echo '<td onclick="getdesc('.$descriptn.')">'; 
```

您可以像这样添加它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T07:35:45.390

这是另一种不连接字符串的方法：

```
$description = "hello world";
echo "<td onclick=\"getdesc('$description')\">"; 
```

# java - 在 Swing App 中实现 Undo 的堆溢出

> ID：13967185
> 
> 赞同：1
> 
> 时间：2012-12-20T07:27:20.963
> 
> 标签：java, swing, undo

我正在用 java swing 开发一个涂鸦类型的应用程序。它处于初级阶段，并在此处显示。

![涂鸦板](../Images/7347ad3f6436397a13c84ff7f7f5c250.png)

我已经实现了撤消最后绘制的笔划的撤消功能。撤消功能可以达到最大定义的撤消级别。

撤消功能通过在`Image array`. 这个数组就像一个`First-In-Last-Out`堆栈。单击撤消时，堆栈是`poped` 并且获得的图像被绘制在屏幕上。

现在我面临的问题是，当前执行撤消的方法占用了太多内存。在撤消级别为 20 时，几乎 70-80 MB 的内存被用完，在级别为 30 时，会发生堆溢出。

有没有更好的方法来实现撤消功能？谢谢。

**编辑：我在**[这里](http://www.drdobbs.com/an-efficient-undoredo-algorithm/184404861)找到了一些有用的信息，可能会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:32:32.750

您需要以不同的方式表示绘图中的步骤。在您使用的当前方法中，您每次都将 Canvas 重新保存为未压缩的图片 - 这是内存贪婪的。

尝试重构您的代码，以便只有在 Canvas 上绘制的笔画被保存到堆栈中。这会在渲染图片时增加一点开销（每次发生更改时都需要重新绘制整个画布），但 Java 旨在处理这个问题。

仅保存形状后，内存需求应显着降低。使用`Shape`该类来表示画布上的笔划。

# elasticsearch - ElasticSearch Couchbase 集成

> ID：13967187
> 
> 赞同：1
> 
> 时间：2012-12-20T07:27:22.817
> 
> 标签：elasticsearch, couchbase

基本上我已经按照[这里的说明进行操作](http://blog.couchbase.com/couchbase-and-full-text-search-couchbase-transport-elastic-search)

但是当我去沙发基地设置复制时，我得到：

![ ](../Images/212484c852c98de978202e1a19c45a27.png)

但我知道它在那里，因为

![ ](../Images/59056d3e3eccdefee138bf61f2fb34da.png)

机器可以互相ping通，没有防火墙等......

每次我在 couchbase 中点击复制时，我都会在 elaticsearch 的日志中发现以下错误。

![ ](../Images/eef911669386ff4fa2118a03f58a44b0.png)

我不确定这意味着什么，但是......

任何指针将不胜感激

最亲切的问候

罗宾

编辑 Ps：从今天开始的 couchbase 和 elasticsearch 的最新版本并运行 ubuntu server 12.04 LTS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:30:55.953

我认为 Elasticsearch 0.20.x 的 CouchBase 插件尚未发布，但仅适用于 0.19.x。

我认为这是您的问题。

所以尝试切换到 0.19.9 ES 版本或等待 CouchBase 插件的下一个版本。

# apache-flex - 直接在 flex 移动设备上发送电子邮件

> ID：13967190
> 
> 赞同：3
> 
> 时间：2012-12-20T07:27:59.063
> 
> 标签：apache-flex, flash-builder, flashdevelop

我想直接从我的弹性应用程序发送电子邮件。有什么方法可以从手机发送邮件。我已经试过了

`navigateToURL(new URLRequest("mailto:myemail@gmail.com"));`.

它总是打开手机电子邮件应用程序。有没有办法直接从应用程序发送电子邮件。

感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:09:44.700

您可以使用“SMTP Mailer”一个用于 SMTP 的 ActionScript 库。
[http://www.bytearray.org/?p=27&cpage=4#comment-584647](http://www.bytearray.org/?p=27&cpage=4#comment-584647)。

# c - nlinfit Matlab函数等效函数c代码

> ID：13967193
> 
> 赞同：0
> 
> 时间：2012-12-20T07:28:14.163
> 
> 标签：c, matlab, visual-c++, curve-fitting, data-fitting

我的曲线拟合有问题，我必须使用这个方程 a+bx^2.5+cx^3.5 来拟合一组点（x 和 y）。我已经尝试使用 nlinfit 函数从 matlab 曲线拟合工具箱中得到它。现在我想把它转换成 c/c++。有没有办法从 matlab 转换它，或者有什么库可以在 c/c++ 中执行。

```
x = [0 90 180 270]';
y = [201 173 118 146]';
modelfun = @(b,x)(b(1)+ b(2).*x.^2.5+ b(3).*x.^3);
opts = statset('nlinfit');
beta0 = [0;0;0];
beta = nlinfit(x,y,modelfun,beta0,opts);
disp(beta);
 b = beta;
y1 = b(1)+ b(2).*x.^2.5 + b(3).*x.^3;
disp(y1); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T06:19:04.957

最后我得到了这个 nlinfit 的非常简单的答案.... Matlab 代码是

```
modelfun = @(b,x)(b(1)+ b(2).*x.^2.5+ b(3).*x.^3);
opts = statset('nlinfit');
beta0 = [0;0;0];
beta = nlinfit(x,y,modelfun,beta0,opts);
% % % disp(beta);
b = beta;
y1 = b(1)+ b(2).*x.^2.5 + b(3).*x.^3;
% disp(y1); 
```

等效函数是由这个推导创建的

```
Ax = B;
%multiply with A' Then 
(A'*A)*x=(A'*b)
% x=(A'*A)/(A'*b)% similar to inv(A'*A)*(A'*b)
coeff1 = inv(A'*A)*(A'*B);
disp(coeff1); 
```

使用这些系数，我们很容易使用上面的方程找到 Y 的值。谢谢……

# gridview - Yii Tbgridview 在 Ie8 中不起作用 - Bootstrap TbGridView 在排序、分页和过滤中消失 - IE8

> ID：13967198
> 
> 赞同：2
> 
> 时间：2012-12-20T07:28:27.220
> 
> 标签：gridview, twitter-bootstrap, internet-explorer-8, yii

我已将 yii bootstrap 扩展集成到我的站点中。我有一个显示网格视图的页面。虽然它是引导程序，但我使用了 TbGridView。基本的 GridView 功能，如排序、分页、过滤，在除 IE8 之外的所有浏览器中一切正常。每当我尝试在 Grid 中执行排序、分页、过滤时，Grid 就会消失。它只发生在 IE8 中。我已经通过调试检查了 jquery-yiigridview.js。尤其 ，

[代码]

更新：功能（选项）{

[/代码]

但是没有发现什么特别的。唯一让我明白的是，在 IE8 中，响应没有附加到网格（#id）。缺少与 IE8 中的 ajax 渲染相关的内容。

奇怪的是，我有另一个页面，我使用 renderPartial 方法使用弹出窗口。还有一个 TbGridView。但这在 IE8 中运行良好。

更多信息：

控制器：[代码]

```
 public function actionRate()
        {
        $requestModel = new Rate('search');             
        $requestModel->unsetAttributes();  // clear any default values
        if(isset($_GET['Rate']))
        $requestModel->attributes=$_GET['Rate'];                              
       $this->render('requestList', array('model'=>$requestModel)); 
        } 
```

[/代码]

看法：

[代码]

```
$this->widget('bootstrap.widgets.TbGridView', array(
'id'=>'request-grid-list',
'filter'=>$model,
'type'=>'striped bordered condensed',
'dataProvider'=>$model->search(),   
'columns'=>array(               
        array(
                'name' => 'ratename',
                'type'=>'raw',
                'value' => '$data->ratename',
        )
        ),)); 
```

[/代码]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T07:10:32.160

经过这么多调试，我在IE8中找到了问题的原因。

我的第一个想法是 jquery-yiigridview.js。我发现，jquery-yiigridview.js 中用于 yii 网格的更新方法工作正常。

```
$.each(settings.ajaxUpdate, function (i, el) {
    var updateId = '#' + el;
    $(updateId).replaceWith($(updateId, $data));
}); 
```

然后突然网格消失了。是的，问题出在“响应数据”上。Firefox 和 Chrome 完美呈现。但是在 IE8 中它会导致错误。所以我检查了响应数据。我的 main.php 布局文件中有“bootstrap.widgets.TbNavbar”。当我删除它时，它起作用了。但这不是解决办法。我检查了为什么它在 IE8 中中断。

```
$this->widget('bootstrap.widgets.TbNavbar', array(
    'type'=>'inverse', // null or 'inverse'
    'brand'=>$brandName,
    'brandUrl'=>'#',
    'collapse'=>true, // requires bootstrap-responsive.css
    'items'=>array(
        array( 
```

`'collapse'=>true`是问题所在。所以我删除了那条线。现在它在 IE8 中完美运行。

但这还不是结束..接下来是..学习,,:) :)

[http://twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

注意：这是一个快速修复。请分享你的想法。

# asp.net - 客户端和服务器端 ASP.NET Validation 控件的内部工作

> ID：13967201
> 
> 赞同：0
> 
> 时间：2012-12-20T07:28:42.067
> 
> 标签：asp.net, .net

我想知道 ASP.NET 验证控件是如何工作的（例如：必填字段验证器、正则表达式验证器）。单击按钮时会发生什么？客户端触发了哪些事件？内部真正发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:46:11.363

当您单击按钮时（如果您定义了 CausesValidation="true"）按钮向服务器发送请求，该请求使用 __doPostBackWithOptions 函数目标，其中包含 valiadtion 组作为参数（如果您为按钮定义了 ValidationGroup 属性）。__doPostBackWithOptions 包含函数 Page_ClientValidate。在这种情况下，将检查属于该组的所有验证器。如果结果 (Page_IsValid) 为真，则回发发生。如果您没有定义验证组（但 CausesValidation 为真），则将检查页面上存在的所有验证器。如果定义 CAusesValidation false 将使用 _doPostBack 函数而不进行验证器检查。更多信息在这里： http: [//msdn.microsoft.com/en-us/library/aa338815](http://msdn.microsoft.com/en-us/library/aa338815(v=vs.71).aspx) (v=vs.71).aspx和 [http://msdn.microsoft.com/en-us/library/aa479045。](http://msdn.microsoft.com/en-us/library/aa479045.aspx)

# database-connection - 想要从服务器上的 java 应用程序连接到本地数据库

> ID：13967202
> 
> 赞同：0
> 
> 时间：2012-12-20T07:28:45.890
> 
> 标签：database-connection

我在本地计算机上有一个本地 Ms 访问数据库，该计算机通过动态 IP 与 Internet 连接。我有一个在 Web 服务器上运行的 Java Web 应用程序。如何使用服务器上运行的 java 应用程序的动态 ip 连接到本地 pc 中的数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:39:35.640

您必须使用本地 Web 服务器或 VPN 隧道从客户端机器上提供服务。

可能更好的主意（我的意思是，有什么比连接到客户端数据库更好的方法，对吧？）是让客户端上传数据库（取决于大小），然后连接到服务器端副本。

# java - 如何为 HttpServletRequest 接口创建对象？

> ID：13967204
> 
> 赞同：3
> 
> 时间：2012-12-20T07:28:54.247
> 
> 标签：java, object, servlets, interface

如何为`HttpServletRequest`接口创建对象？

`HttpServletRequest`是一个接口，但 servlet 容器仍然可以创建相同的对象。如何？为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T07:55:16.913

servlet 容器有一个实现这个接口的类，并实例化这个类的一个对象。就像你做的一样

```
List<String> list = new ArrayList<String>(); 
```

`List`是一个接口，你实例化`ArrayList`，这是一个实现的类`List`。

servlet 容器执行以下操作：

```
HttpServletRequest request = new TomcatHttpServletRequestImpl(); 
```

这是面向对象和多态的基础。

# php - 使用 PHP Cron 作业的 Cron 守护程序错误

> ID：13967207
> 
> 赞同：0
> 
> 时间：2012-12-20T07:29:21.840
> 
> 标签：php, cron

所以我对 Cron Jobs 还很陌生，我在试图让这个特定的 cron 工作正常工作时遇到了困难。我想要的只是每天都可以访问一个 PHP 网页。通过访问 PHP 页面，cron 作业将激活其中向特定用户发送电子邮件的脚本。这是 cron 作业代码：

```
php -q /home/sitename/public_html/scripts/emailnotifications.php 
```

不幸的是，每天凌晨 1 点，我都会收到此错误消息，但没有人收到他们的电子邮件。

```
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_bz2.dll' - 

C:\xampp\php\ext/php_bz2.dll: cannot open shared object file: No such file or directory in Unknown on line 0
<br />
<b>Warning</b>:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_bz2.dll' - C:\xampp\php\ext/php_bz2.dll: cannot open shared object file: No such file or directory in <b>Unknown</b> on line <b>0</b><br />
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_mbstring.dll' - C:\xampp\php\ext/php_mbstring.dll: cannot open shared object file: No such file or directory in Unknown on line 0
<br />
<b>Warning</b>:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_mbstring.dll' - C:\xampp\php\ext/php_mbstring.dll: cannot open shared object file: No such file or directory in <b>Unknown</b> on line <b>0</b><br />
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_exif.dll' - C:\xampp\php\ext/php_exif.dll: cannot open shared object file: No such file or directory in Unknown on line 0
<br />
<b>Warning</b>:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_exif.dll' - C:\xampp\php\ext/php_exif.dll: cannot open shared object file: No such file or directory in <b>Unknown</b> on line <b>0</b><br />
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_gd2.dll' - C:\xampp\php\ext/php_gd2.dll: cannot open shared object file: No such file or directory in Unknown on line 0
<br />
<b>Warning</b>:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_gd2.dll' - C:\xampp\php\ext/php_gd2.dll: cannot open shared object file: No such file or directory in <b>Unknown</b> on line <b>0</b><br />
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_gettext.dll' - C:\xampp\php\ext/php_gettext.dll: cannot open shared object file: No such file or directory in Unknown on line 0
<br />
<b>Warning</b>:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_gettext.dll' - C:\xampp\php\ext/php_gettext.dll: cannot open shared object file: No such file or directory in <b>Unknown</b> on line <b>0</b><br />
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_imap.dll' - C:\xampp\php\ext/php_imap.dll: cannot open shared object file: No such file or directory in Unknown on line 0
<br />
<b>Warning</b>:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_imap.dll' - C:\xampp\php\ext/php_imap.dll: cannot open shared object file: No such file or directory in <b>Unknown</b> on line <b>0</b><br />
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_mysql.dll' - C:\xampp\php\ext/php_mysql.dll: cannot open shared object file: No such file or directory in Unknown on line 0
<br />
<b>Warning</b>:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_mysql.dll' - C:\xampp\php\ext/php_mysql.dll: cannot open shared object file: No such file or directory in <b>Unknown</b> on line <b>0</b><br />
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_mysqli.dll' - C:\xampp\php\ext/php_mysqli.dll: cannot open shared object file: No such file or directory in Unknown on line 0
<br />
<b>Warning</b>:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_mysqli.dll' - C:\xampp\php\ext/php_mysqli.dll: cannot open shared object file: No such file or directory in <b>Unknown</b> on line <b>0</b><br />
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_pdo_mysql.dll' - C:\xampp\php\ext/php_pdo_mysql.dll: cannot open shared object file: No such file or directory in Unknown on line 0
<br />
<b>Warning</b>:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_pdo_mysql.dll' - C:\xampp\php\ext/php_pdo_mysql.dll: cannot open shared object file: No such file or directory in <b>Unknown</b> on line <b>0</b><br />
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_pdo_odbc.dll' - C:\xampp\php\ext/php_pdo_odbc.dll: cannot open shared object file: No such file or directory in Unknown on line 0
<br />
<b>Warning</b>:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_pdo_odbc.dll' - C:\xampp\php\ext/php_pdo_odbc.dll: cannot open shared object file: No such file or directory in <b>Unknown</b> on line <b>0</b><br />
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_pdo_sqlite.dll' - C:\xampp\php\ext/php_pdo_sqlite.dll: cannot open shared object file: No such file or directory in Unknown on line 0
<br />
<b>Warning</b>:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_pdo_sqlite.dll' - C:\xampp\php\ext/php_pdo_sqlite.dll: cannot open shared object file: No such file or directory in <b>Unknown</b> on line <b>0</b><br />
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_soap.dll' - C:\xampp\php\ext/php_soap.dll: cannot open shared object file: No such file or directory in Unknown on line 0
<br />
<b>Warning</b>:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_soap.dll' - C:\xampp\php\ext/php_soap.dll: cannot open shared object file: No such file or directory in <b>Unknown</b> on line <b>0</b><br />
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_sockets.dll' - C:\xampp\php\ext/php_sockets.dll: cannot open shared object file: No such file or directory in Unknown on line 0
<br />
<b>Warning</b>:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_sockets.dll' - C:\xampp\php\ext/php_sockets.dll: cannot open shared object file: No such file or directory in <b>Unknown</b> on line <b>0</b><br />
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_sqlite.dll' - C:\xampp\php\ext/php_sqlite.dll: cannot open shared object file: No such file or directory in Unknown on line 0
<br />
<b>Warning</b>:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_sqlite.dll' - C:\xampp\php\ext/php_sqlite.dll: cannot open shared object file: No such file or directory in <b>Unknown</b> on line <b>0</b><br />
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_sqlite3.dll' - C:\xampp\php\ext/php_sqlite3.dll: cannot open shared object file: No such file or directory in Unknown on line 0
<br />
<b>Warning</b>:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_sqlite3.dll' - C:\xampp\php\ext/php_sqlite3.dll: cannot open shared object file: No such file or directory in <b>Unknown</b> on line <b>0</b><br />
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_xmlrpc.dll' - C:\xampp\php\ext/php_xmlrpc.dll: cannot open shared object file: No such file or directory in Unknown on line 0
<br />
<b>Warning</b>:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_xmlrpc.dll' - C:\xampp\php\ext/php_xmlrpc.dll: cannot open shared object file: No such file or directory in <b>Unknown</b> on line <b>0</b><br />
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_ming.dll' - C:\xampp\php\ext/php_ming.dll: cannot open shared object file: No such file or directory in Unknown on line 0
<br />
<b>Warning</b>:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext/php_ming.dll' - C:\xampp\php\ext/php_ming.dll: cannot open shared object file: No such file or directory in <b>Unknown</b> on line <b>0</b><br />
PHP Warning:  Cannot open 'C:\xampp\php\extras\browscap.ini' for reading in Unknown on line 0
<br />
<b>Warning</b>:  Cannot open 'C:\xampp\php\extras\browscap.ini' for reading in <b>Unknown</b> on line <b>0</b><br />
No input file specified. 
```

我没有对服务器的 shell 访问权限或对任何服务器设置文件（php.ini 除外）的访问权限。我应该怎么做才能让这个脚本每天运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:43:43.653

看起来您将完整的 php.ini 从 Windows 机器（可能是开发环境）复制到了运行某些 linux 发行版的远程服务器。

您的 xampp 提供的 php.ini 中列出的扩展在那里无法以这种方式工作。如果您确定要从您的开发机器复制整个 php.ini，（您很可能不需要），您可能必须删除或编辑这些`extension=`行以适应环境（它们很可能应该以`.so`至少并且有不同的路径）。检查每个与路径相关的设置也是明智的。

（在每一行中使用完整路径`extension=`是愚蠢的，因为有[`extension_dir`](http://php.net/manual/en/ini.core.php#ini.extension-dir)）

# javascript - 无法从服务器读取 JSON 响应

> ID：13967209
> 
> 赞同：-1
> 
> 时间：2012-12-20T07:29:27.183
> 
> 标签：javascript, html, json

我正在开发一个将一些数据发送到网站的网络应用程序。该网站将数据更新到其数据库并返回一个替换我的 webapp 页面的 json 数组。我正在使用 ajax 进行查询。我需要知道如何防止我的网页被覆盖。服务器不是我的，因此可能存在同源策略问题。
我检查了`xmlhttp.readystate`and `xmlhttp.status`，它们分别是 4 和 0。根据 stackoverflow 上的一些帖子，由于原始策略而出现 0 状态，但我无法为此找到解决方案，因为通常有此问题的人可以访问服务器端编程的更改。
我想读取 json 并为我的应用程序提取值，但如果我使用`xmlhttp.responseText`服务器返回一个空白字符串。

任何帮助深表感谢。
谢谢

我的代码：

```
function sendAndReceive() {

    var xmlhttp;
    xmlhttp = new XMLHttpRequest();

    xmlhttp.onreadystatechange = function () {
        document.getElementById("postevent").innerHTML = "state changed";
        document.getElementById("postevent").innerHTML = "" + xmlhttp.readyState + " " + xmlhttp.status;
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById("postevent").innerHTML = "success response";
            document.getElementById("postevent").innerHTML = "this is it" + xmlhttp.responseText;
        }
    }

    var url = "http://simple.ap.ernet.in/api/home/resource.php/resource/node?";
    url += "key=" + document.getElementById("key").value + "&";
    url += "datasetId=" + document.getElementById("datasetId").value + "&";
    url += "localId=" + document.getElementById("localId").value + "&";
    url += "nodeName=" + document.getElementById("nodeName").value + "&";
    url += "nodeDesc=" + document.getElementById("nodeDesc").value + "&";
    url += "lat=" + document.getElementById("lat").value + "&";
    url += "long=" + document.getElementById("long").value;

    document.getElementById("postevent").innerHTML = url;
    xmlhttp.open("POST", url, true);
    xmlhttp.send();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:33:16.960

唯一已知的解决方法是让浏览器认为只有一个来源。最简单的方法是在您自己的服务器上放置一个代理，中继到另一台服务器。如果您自己的服务器在 Apache 中，您可以使用[mod_proxy](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#forwardreverse)（请参阅[此问题](https://stackoverflow.com/questions/12801246/transparent-redirect-to-port-8080)）。

但请注意，如果其他服务器不允许跨域请求，那么这样做可能违反了它的策略。如果它是一台大型服务器，它可能会很好地检测到它并禁止您的服务器的 IP。

# android - 用于显示行车路线并根据用户/设备移动更新路线的 Android 代码

> ID：13967214
> 
> 赞同：-2
> 
> 时间：2012-12-20T07:29:55.460
> 
> 标签：android, api, google-maps, android-2.3-gingerbread

大家好，我正在制作一个需要行车路线的应用程序。与谷歌提供的导航功能相同。但我无法为此找到任何解决方案。如果有人知道可以在 android 应用程序中使用的谷歌导航系统的替代品，那么请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:15:22.697

这就是我正在使用的，它实际上是谷歌导航。

```
 Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
Uri.parse("http://maps.google.com/maps?saddr="+latitude_cur+","+longitude_cur+"&daddr="+latitude+","+longitude));
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.addCategory(Intent.CATEGORY_LAUNCHER );     
intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
startActivity(intent); 
```

# magento - Windows 7 / wamp 上的 Magento 安装问题

> ID：13967217
> 
> 赞同：0
> 
> 时间：2012-12-20T07:30:05.833
> 
> 标签：magento

在 magento-1.7.0.2 安装期间使用 Wamp 2.2 在 Windows7 中出现以下错误。

> 页面未正确重定向
> 
> Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。

我已经运行了 magento-check.php（在我的本地主机上的 magento 文件夹中），它表明服务器满足了 magento 安装所需的所有要求。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:37:39.387

请检查 apache 错误日志。如果问题仍然存在，请尝试重新安装它。

# hbase - HBase 更新和删除

> ID：13967226
> 
> 赞同：0
> 
> 时间：2012-12-20T07:30:29.007
> 
> 标签：hbase

我有 HBase 表作为

UserId 用户名 UserScore

1 a 100 2 b 200

我们有一个 Web 应用程序，它通过 UserId 获取数据并更新分数并将其再次存储在 HBase 中。HBase 中的问题是，如果我们更新 HBase 表中的行，它会添加新版本的行。我如何编写更新代码以及如何在没有版本的情况下为每个用户 ID 只维护一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-22T10:25:41.370

我是 HBase 世界的新手，遇到了同样的问题。但看起来设置时间戳相同并且调用 put 方法应该可以解决更新问题。它不会添加新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:08:12.827

另一种选择是删除旧值并将新值放回单元格中。如果您不想要多个版本，请在创建表时设置 VERSION=>1。例如，为每个用户 ID 创建一行并设置 VERSION=>1。当您为用户获取新数据时，请转到相应的行，删除旧值并将新值放在那里。

# php - PHPWord：创建一个从右到左的阿拉伯语文档

> ID：13967229
> 
> 赞同：4
> 
> 时间：2012-12-20T07:30:48.020
> 
> 标签：php, encoding, utf-8, arabic, phpword

我正在尝试使用[PHPWord](http://phpword.codeplex.com/)创建一个 word 文档，其中将包含从 MySQL 数据库中提取的动态数据。该数据库具有 MySQL 字符集：`UTF-8 Unicode`(utf8) MySQL 连接排序规则：`utf8_unicode_ci`表字段也是如此。

数据在 HTML 中可以很好地存储和预览，但是在使用阿拉伯语变量创建文档时，Word 中的输出看起来像`Ø£Ø­ÙØ¯ ÙØ¨Ø§Ø±Ù Ø§ÙÙØ±Ù`.

```
$PHPWord = new PHPWord();
$document = $PHPWord->loadTemplate('templates/.../wtvr.docx');
$document->setValue('name', $name);
$document->setValue('overall_percent_100', $overall_percent_100);
$document->save('Individual Report - ' . $name . '.docx'); 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T11:05:47.957

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T05:01:09.650

*   请找到以下几点在phpword模板中编写从右到左数据插入的所有类型的utf-8。

    1.  在`setValue`Template.php 的函数（第 95 行）中，请注释以下代码部分

        ```
        //if(!is_array($replace)) {
        //    $replace = utf8_encode($replace);
        //} 
        ```

    2.  如果您有从右到左的问题，在某些语言中，文本与从左到右的文本混合在一起，请在同一`setValue`函数中添加以下代码。

        ```
        $replace = "<w:rPr><w:rtl/></w:rPr>".$replace; 
        ```

//==== 这是一个如何在 word 模板中写入 word 数据的工作示例 //--- 加载 phpword 库 ----

```
 $this->load->library("phpword/PHPWord");
    $PHPWord  = new PHPWord();
    $document = $PHPWord->loadTemplate('./forms/data.docx');

    $document->setValue('NAME', 'شراف الدين');
    $document->setValue('SURNAME', 'مشرف');
    $document->setValue('FNAME', 'ظهرالدين');
    $document->setValue('MYVALUE', '15 / سنبله / 1363');
    $document->setValue('PROVINCE', 'سمنگان');
    $document->setValue('DNAME', 'عبدالله');
    $document->setValue('DMOBILE', '0775060701');   
    $document->setValue('BOX','<w:sym w:font="Wingdings" w:char="F06F"/>');
    $document->setValue('NO','<w:sym w:font="Wingdings" w:char="F06F"/>');
    //$document->setValue('BOX2','<w:sectPr w:rsidR="00000000"><w:pgSz w:w="12240" w:h="15840"/><w:pgMar w:top="1440" w:right="1440" w:bottom="1440" w:left="1440" w:header="720" w:footer="720" w:gutter="0"/><w:cols w:space="720"/><w:docGrid w:linePitch="360"/>');
    $document->setValue('YES','<w:sym w:font="Wingdings" w:char="F0FE"/>');

    $document->setValue('CLASS1','<w:sym w:font="Wingdings" w:char="F06F"/>');
    $document->setValue('CLASS2','<w:sym w:font="Wingdings" w:char="F0FE"/>');
    $document->setValue('DNAME','يما شاه رخي');
    $document->setValue('TEL','0799852369');
    $document->setValue('ENTITY','مشاور حقوقي و نهادي');
    $document->setValue('ENTITY','مشاور حقوقي و نهادي');
    $document->setValue('REMARKS','در مسابقات سال 2012 میلادی در میدان Judo   بر علاوه به تعداد  39 نفر در تاریخ 4/میزان/ سال 1391 قرار ذیل اند.');

    $file = "./forms/data2.docx";
    $document->save($file);
    header("Cache-Control: public");     
    header("Content-Description: File Transfer");     
    header("Content-Disposition: attachment; filename=data2.docx");     
    header("Content-Type: application/vnd.openxmlformats-officedocument.wordprocessingml.document");     
    header("Content-Transfer-Encoding: binary");         
    ob_clean();
    flush();
    readfile($file); 
```

//需要设计如何改变外观。颜色#E4EDF9![在此处输入图像描述](../Images/0dc9f7b7db847e32c526cc9de114f027.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T01:10:56.773

寻找

```
$objWriter->startElement('w:t');
$objWriter->writeAttribute('xml:space', 'preserve'); // needed because of drawing spaces before and after text
$objWriter->writeRaw($strText);
$objWriter->endElement(); 
```

在 Writer/Word2007/Base.php 中

用。。。来代替

```
$objWriter->startElement('w:textDirection');
$objWriter->writeAttribute('w:val', 'rlTb');
$objWriter->startElement('w:t');
$objWriter->writeAttribute('xml:space', 'preserve'); // needed because of drawing spaces before and after text
$objWriter->writeRaw($strText);
$objWriter->endElement();
$objWriter->endElement(); 
```

此外，请确保您不使用任何样式来使其工作，否则您将不得不在您使用的每个功能中重复此步骤。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-05T17:14:37.470

我不得不在与 Nasers 不同的两个地方修复它：

1-在 Section.php addText 函数中：

我这样做了：

```
//$givenText = utf8_encode($text);
$givenText = $text; 
```

2- 在 cell.php 中的 addText 函数

我这样做了：

```
// $text = utf8_encode($text); 
```

现在您的 word 文件将以正确的方式显示 unicode 字符。然后我在文本方向上遇到了问题。我通过使用此代码找到了解决方案

```
$section->addText($val['notetitle'],array('textDirection'=>PHPWord_Style_Cell::TEXT_DIR_TBRL)); 
```

你可以在 cell.php 文件中看到这两个常量

```
const TEXT_DIR_TBRL = 'tbRl';
const TEXT_DIR_BTLR = 'btLr'; 
```

请注意，您不能在 'textDirection' 之前应用其他数组组合样式，例如 Paragraph ，因为其样式使 'textDirection' 禁用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-01T09:30:29.427

打开 PHPWord\Template.php
更改 setValue 函数（第 89 行），如下所示。
更改**$replace = utf8_encode($replace);** 到 **$replace = $replace;**

# list - Haskell 与 intersect 相对（列表）

> ID：13967243
> 
> 赞同：7
> 
> 时间：2012-12-20T07:31:48.380
> 
> 标签：list, haskell, intersect

我试图得到两个列表相交的“相反”：比如：

```
let all  = [1..5]
let mask = [2,3]
let res  = ???
-- let res = all `intersect` mask <-- reverse/opposite ?
-- I want to get [1,4,5] ? 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-20T07:36:37.997

您正在寻找*set* Difference ，它是`\\`来自[Data.List](http://www.haskell.org/ghc/docs/6.12.2/html/libraries/base-4.2.0.1/Data-List.html#20)的运算符：

```
Prelude> import Data.List ((\\))
Prelude Data.List> let all  = [1..5]
Prelude Data.List> let mask = [2,3]
Prelude Data.List> all \\ mask
[1,4,5] 
```

# java - Java 增加堆大小

> ID：13967244
> 
> 赞同：2
> 
> 时间：2012-12-20T07:31:50.067
> 
> 标签：java, database

我有一个 java 应用程序表单，我正在访问数据库中的记录，处理它并再次更新数据库。我通过将我的 java 应用程序转换为 JAR 并从命令提示符执行它来做到这一点。在测试期间，数据库中每个表只有 20 条记录。为此，我按如下方式执行 jar 以避免内存不足错误，

```
java -jar -Xmx512m MyApp.jar 
```

如果数据库包含很多记录（50,000），如何**在执行 jar 时增加堆大小**或如何在执行 jar 时根据需要动态增加堆大小。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:35:37.233

最大堆大小是在运行程序之前使用您已经使用的 -Xmx 选项设置的。根据此信息，JVM 将根据需要使用尽可能多的堆大小，直至给定数量。因此，如果您的程序只需要 1 MB 的 RAM，JVM 将只使用该数量，如果它需要 1G 而您只给了它 512M，您将收到 OutOfMemoryError。

所以，基本上，如果你需要，你可以给你的程序更多的堆空间，JVM会根据它的需要动态调整使用的堆大小。

有时这不是预期的行为，可以使用 -Xms 设置堆大小的下限。然后 JVM 将始终保留 Xms 和 Xmx 之间大小的堆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:33:22.043

```
-Xmx2048m -XX:-UseGCOverheadLimit 
```

在你的虚拟机参数中设置它。您可以设置较小的内存大小来代替 `2048`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:35:52.547

这会将您的最大 heapSize 增加到 1Gb。

```
java -Xms256m -Xmx1024m -jar MyApp.jar 
```

其中 -Xms 指定初始 Java 堆大小，而 -Xmx 指定最大 Java 堆大小。

JVM 的参数必须在 -jar 部分之前传递。当我们执行“java -version”时可以看出原因：

用法：

```
java [-options] class [args...]
           (to execute a class)
   or  java [-options] -jar jarfile [args...]
           (to execute a jar file) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T09:09:17.940

最大值是您需要的最大堆，而**不是**实际使用的堆。这是您宁愿应用程序崩溃也不愿继续运行的时候。JVM 将动态管理到目前为止使用的内存。

> 如何在执行 jar 时根据需要动态增加堆大小。

因此，如果您希望 JVM 使用 256 MB，但您希望它动态增长到 30 GB，您可以这样设置

```
java -ms256m -mx30g -jar MyApp.jar 
```

即使是最低限度也不能保证使用。JVM 将尽最大努力将内存使用率保持在此级别。无论您将最小值设置为多少，Hello World 程序都不会使用 256 MB 的堆。

# c# - 继承构造函数。即从构造函数调用同一类的另一个函数

> ID：13967251
> 
> 赞同：0
> 
> 时间：2012-12-20T07:32:31.497
> 
> 标签：c#, constructor

我正在从构造函数调用同一类的函数。但它给了我错误。

```
public class Connection
{
    public Connection()
    {
    }

    public Connection(string parameter) : this(GetConnection(parameter))
    {
    }

    private static string GetConnection(string parameter)
    {
        return parameter;
    }
} 
```

但是`public Connection(string parameter) : this(GetConnection(parameter))`给我错误。错误是：

> 构造函数“Test.Connection.Connection(string)”不能调用自身。

这背后的错误是什么。这种叫法可以吗？？

谢谢！！！

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:40:27.697

您可以使用此语法调用**另一个**构造函数（通过关键字调用此类构造函数`this`，或通过关键字调用可用的基类构造函数之一`base`）。当你在这里有一个潜在的 StackOverflowException 时。

你可以简单地这样做：

```
public class Connection
{
    public Connection()
    {
    }

    public Connection(string parameter)
        : this()
    {
        string connectionString = GetConnection(parameter);
    }
} 
```

* * *

题外话：编译器已经无法识别以下潜在的 StackOverflowException（即编译时没有错误和警告），但只能在运行时识别：

```
public class Connection
{
    public Connection()
        : this(GetConnectionString())
    {
    }

    public Connection(string parameter)
        : this()
    {
    }

    public static string GetConnectionString()
    {
        //...
    }
} 
```

请阅读[使用构造函数（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173115%28v=vs.80%29.aspx)了解更多信息：

> 构造函数可以使用 this 关键字调用同一对象中的另一个构造函数。与 base 一样，this 可以带或不带参数使用，构造函数中的任何参数都可以用作 this 的参数，或用作表达式的一部分。

Also see [Calling base constructor in c#](https://stackoverflow.com/questions/12051/calling-base-constructor-in-c-sharp).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:37:15.203

您正在使用字符串类型的参数**递归**调用构造函数。`one`您有两个构造函数，一个是带参数的，另一个是`parmeterless`带`one`参数的构造函数，您调用`this(GetConnection(parameter))`的构造函数是唯一具有一个参数的构造函数，编译器将再次调用您正在调用的构造函数，而不是调用无参数*构造函数（您拥有的另一个构造函数）*。

这将从参数构造函数调用`parameterless`构造函数。`one`

```
public Connection()
{
}

public Connection(string parameter) : this()
{
} 
```

*要调用基类的构造函数，您需要使用 :base() 而不是 this()*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:35:07.640

为什么不在构造函数的范围内调用它呢？

你可能有这样的东西：

```
public Connection(bool getParam = false)
    {
       if (getParam)
       {
          _param = GetConnection(parameter);
       }
    } 
```

# iphone - iOS应用程序中的屏幕共享？

> ID：13967252
> 
> 赞同：4
> 
> 时间：2012-12-20T07:32:37.723
> 
> 标签：iphone, objective-c, ios, ipad, screensharing

我想与运行相同应用程序的其他设备共享我的应用程序 iPad 屏幕。

更多细节：我的应用程序是一个会议应用程序。现在我希望当我共享我的应用程序屏幕时，那些是该特定会议的参与者的人可以看到我的屏幕。

结论：我想与其他运行相同应用程序的设备共享我的应用程序屏幕，就像 Skype 屏幕共享一样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T08:15:53.630

为此，您将需要一台服务器。它是一个漫长的过程。向您简要介绍整体细节

*   当用户登录时，您将获得信息。
*   用户将首先尝试将图像发送到服务器。
*   从用户屏幕连续获取屏幕截图图像。[按照这个链接](http://www.icodeblog.com/2009/07/27/1188/)
*   将[图像转换为 NSData](https://stackoverflow.com/questions/257400/nsdata-and-uiimage)。
*   从服务器检测其他用户（屏幕将被共享给谁。）将数据发送给该用户。并将 NSData 转换为 UIImage 并相应地更新 UI。
*   循环这个过程。

    //[用于截屏](https://stackoverflow.com/questions/2200736/how-to-take-a-screenshot-programmatically)

    ```
     UIGraphicsBeginImageContext(self.window.bounds.size);
        [self.window.layer renderInContext:UIGraphicsGetCurrentContext()];
        UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        NSData * data = UIImagePNGRepresentation(image);
        [data writeToFile:@"foo.png" atomically:YES]; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:18:08.953

您可以这样做交换`(Current screen image context / Captured current screen)`两个设备的图像流，反之亦然。意味着将屏幕的当前上下文传输到连接的设备，并使此过程像继续发送/接收实时数据流一样。

屏幕共享工作您可以从以下链接中获得灵感。

1)[桌面共享](http://computer.howstuffworks.com/how-desktop-sharing-works.htm)
2)[设备远程访问](http://computer.howstuffworks.com/vpn3.htm)

# android - 两条被填满的路径，一个接一个

> ID：13967254
> 
> 赞同：0
> 
> 时间：2012-12-20T07:32:53.437
> 
> 标签：android, android-canvas

我无法管理以下内容，希望有人给我提示？

我有 2 个区域（填充路径）一个接一个。较低的完全用蓝色填充。上面的我想用特定的图案（例如线条）部分填充红色。所以最后我有一个充满蓝色和红色条纹的区域。

在我的尝试中，上层与下层重叠，所以看不到蓝色。

我试图用 bitmapshader 做到这一点，但没有成功。

```
BitmapShader mShader1 = new BitmapShader(makeBitmap1(),
                                         Shader.TileMode.REPEAT,
                                         Shader.TileMode.REPEAT);
paint.setShader(mShader1);
canvas.drawPath(cpath.path, paint);

private static Bitmap makeBitmap1() {
    //Bitmap bm = Bitmap.createBitmap(10, 10, Bitmap.Config.RGB_565);
    //Bitmap bm = Bitmap.createBitmap(10, 10, Bitmap.Config.ALPHA_8);
    Bitmap bm = Bitmap.createBitmap(10, 10, Bitmap.Config.ARGB_4444);
    //Bitmap bm = Bitmap.createBitmap(10, 10, Bitmap.Config.ARGB_8888);
    Canvas c = new Canvas(bm);
    c.drawColor(Color.RED);
    Paint p = new Paint();
    p.setColor(0xFF000000);
    //p.setColor(Color.BLUE);
    c.drawRect(2, 2, 8, 8, p);
    return bm;
} 
```

# android - 在 Android 中的 ServerSocket.accept() 期间关闭其他线程

> ID：13967255
> 
> 赞同：0
> 
> 时间：2012-12-20T07:32:57.023
> 
> 标签：android, multithreading, networking, asynchronous

在我当前的项目中，我将智能手机用作服务器。当通过 检测到特殊卡片或标签时，服务器将启动`NFC`。这是有效的部分。

为了实现这一点，我使用的`AsyncTask`是在扫描标签后开始的。现在的问题是，当他当前正在调用时，我无法停止服务器`ServerSocket.accept()`。在他等待连接请求时，调用`AsyncTask.cancel(true)`不会停止服务器。

如果我想在某个时候停止服务器，我该怎么做？

现在我很无知。我唯一的想法是为 serversocket 设置超时时间，从而引发异常。但这意味着投票`ServerSocket.accept()`不是唯一的方法吗？如果是这样，那在我看来将是一个相当糟糕的解决方案...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:45:27.903

一种方法是您可以从另一个线程调用 ServerSocket 上的 close()，这将在 accept() 中抛出一个 SocketException。

另一种是使用您正在考虑的超时。

有关如何实现此功能的想法，请参阅以下帖子：

[如何中断 ServerSocket accept() 方法？](https://stackoverflow.com/questions/2983835/how-can-i-interrupt-a-serversocket-accept-method)

[Java 停止服务器线程](https://stackoverflow.com/questions/2804797/java-stop-server-thread)

[关闭监听 ServerSocket](https://stackoverflow.com/questions/6120986/close-listening-serversocket)

[停止套接字侦听接受](https://stackoverflow.com/questions/11212096/stop-a-socket-from-listening-on-accept)

[如何解除阻塞在 ServerSocket.accept() 上的线程？](https://stackoverflow.com/questions/1510403/how-to-unblock-a-thread-blocked-on-serversocket-accept)

# python - wxPython 面板颜色与框架背景不匹配

> ID：13967256
> 
> 赞同：2
> 
> 时间：2012-12-20T07:32:58.347
> 
> 标签：python, windows, user-interface, wxpython, panel

在使用 wxPython 为 Windows 创建 GUI 时，我遇到了 wx.Panel 的背景颜色和父框架的背景颜色不匹配的问题（一个是浅灰色，而另一个是较深的色调）。但是，这在具有相同代码的 Linux 中并不明显。如何在 Windows 中匹配两种不同的背景颜色？嵌入的屏幕截图可能会很好地理解我在说什么。!GUI 截图[1](http://i.stack.imgur.com/F3F0z.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:46:52.850

创建一个具有`wx.Frame`as 父级的容器面板（因此您将获得框架的浅灰色背景色）。
将此面板用作框架中包含的所有小部件的父级。

编辑：唯一的原因是框架的默认背景颜色在 Windows 上是深灰色，请参阅[WxFAQ](http://wiki.wxwidgets.org/WxFAQ#Why_are_backgrounds_of_windows_ugly.2C_dark_grey_on_Windows.3F_I_want_them_like_my_dialog_boxes.)。

# javascript - Googlemaps api v3：标记未显示在 Android 浏览器中

> ID：13967257
> 
> 赞同：0
> 
> 时间：2012-12-20T07:32:59.440
> 
> 标签：javascript, google-maps

早晨，

我创建了一个移动网络应用程序，它使用 API v3 在 Googlemap 上绘制多个附近的位置。

这在 Mobile Chrome、Mobile Firefox 和 Mobile Opera 中运行良好，但在 Android 原生浏览器中无法正常运行。在后者中，未显示标记。它也没有给我错误消息。

URI 是 213.175.198.56/~webdesign/restaurants/

这是代码：

```
<div id="map1" class="gmap"></div>

<script type="text/javascript">
    var map1, latlng1, options1;
    var distance = 2000;
    function initialize() {

        latlng1 = new google.maps.LatLng(localStorage.getItem("lat"), localStorage.getItem("long"));
        options1 = { zoom: 12, center: latlng1, mapTypeId: google.maps.MapTypeId.ROADMAP };
        //map1 = new google.maps.Map(document.getElementById("map1"), options1);
        map1 = new google.maps.Map(document.getElementById('map1'), {
                  mapTypeId: google.maps.MapTypeId.ROADMAP,
                  center: latlng1,
                  zoom: 12
                });

        var request = {
                  location: latlng1,
                  radius: distance,
                  types: ['restaurant', 'cafe']
                };

                infowindow = new google.maps.InfoWindow();
                service = new google.maps.places.PlacesService(map1);
                service.nearbySearch(request, callback);
        document.getElementById('showing').innerHTML = "Showing restaurants within "+distance+" metres of your location";
    }// initialize

    function callback(results, status) {

                if (status == google.maps.places.PlacesServiceStatus.OK) {
                  for (var i = 0; i < results.length; i++) {
                    createMarker(results[i]);
                  }
                }else{

                  alert('Unable to plot');
                }
              }

                // Function for adding a marker to the page.
        function addMarker(mylocation) {
            marker = new google.maps.Marker({
                position: mylocation,
                map: map1
            });
        }

              function createMarker(place) {
                var placeLoc = place.geometry.location;

                var request2 = { reference: place.reference };
                    service.getDetails(request2, function(details, status) {
                      google.maps.event.addListener(marker, 'click', function() {
                          var rating = details.rating;
                          if(!rating){rating = 'Not yet rated';}
                        infowindow.setContent(details.name + "<br />" + details.formatted_address +"<br />Rating: "  +rating + "<br /><input type=\"button\" onclick=\"location.href='tel:" + details.formatted_phone_number+"'\" value=\"Call "+details.name+" \"/>");
                        infowindow.open(map1, this);
                      });
                    });

                var image = new google.maps.MarkerImage(
                  'images/icons/restaurant.png',
                  new google.maps.Size(32,50),
                  new google.maps.Point(0,0),
                  new google.maps.Point(16,50)
                );

                var shadow = new google.maps.MarkerImage(
                  'images/icons/restaurantshadow.png',
                  new google.maps.Size(60,50),
                  new google.maps.Point(0,0),
                  new google.maps.Point(16,50)
                );

                var shape = {
                  coord: [28,0,29,1,30,2,31,3,31,4,31,5,31,6,31,7,31,8,31,9,31,10,31,11,31,12,31,13,31,14,31,15,31,16,31,17,31,18,31,19,31,20,31,21,31,22,31,23,31,24,31,25,31,26,31,27,31,28,30,29,29,30,28,31,21,32,21,33,20,34,20,35,20,36,20,37,19,38,19,39,19,40,18,41,18,42,18,43,18,44,17,45,17,46,17,47,16,48,16,49,15,49,15,48,15,47,15,46,14,45,14,44,14,43,13,42,13,41,13,40,12,39,12,38,12,37,11,36,11,35,11,34,10,33,10,32,3,31,2,30,1,29,0,28,0,27,0,26,0,25,0,24,0,23,0,22,0,21,0,20,0,19,0,18,0,17,0,16,0,15,0,14,0,13,0,12,0,11,0,10,0,9,0,8,0,7,0,6,0,5,0,4,0,3,1,2,2,1,3,0,28,0],
                  type: 'poly'
                };

                var marker = new google.maps.Marker({
                  icon: image,
                  shadow: shadow,
                  shape: shape,
                  map: map1,
                  position: place.geometry.location
                });

                /*google.maps.event.addListener(marker, 'click', function() {
                  infowindow.setContent(place.name+'<br/>'+place.formatted_address);
                  infowindow.open(map1, this);
                });*/
              }

    $('.page-map1').live("pagecreate", function() {

        initialize();
});

    $('.page-map1').live('pageshow',function(){

        //console.log("test");
        google.maps.event.trigger(map1, 'resize');
        map1.setOptions(options1); 
        // Testing the addMarker function
        here = new google.maps.LatLng(localStorage.getItem("lat"), localStorage.getItem("long"));
        addMarker(here);

    });

</script> 
```

# node.js - 在浏览器中反映 html 更改而不重新启动 express 应用程序

> ID：13967259
> 
> 赞同：6
> 
> 时间：2012-12-20T07:33:14.323
> 
> 标签：node.js, express

我有一个快速应用程序。我使用 swig 作为模板引擎。单击刷新时是否可以在浏览器中反映我的 HTML 更改。我不想每次需要更改 HTML 时都重新启动服务器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T07:48:00.417

我从这个[链接](http://www.hacksparrow.com/node-js-restart-on-file-change.html)得到了解决方案。

我将主管模块安装为全局安装

```
npm install supervisor -g 
```

我这样说我的应用程序

```
supervisor -e html,js  app.js 
```

在这里，我指定查看扩展名为 .html 和 .js 的文件中的更改。因此，当这些文件被更改时，它会在下一个请求到来时自动重新加载。无需重新启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:58:03.567

有很多工具可以做到这一点：

*   [节点监视器](https://github.com/remy/nodemon)
*   [导师](https://github.com/isaacs/node-supervisor)
*   [节点热重载](https://github.com/shimondoodkin/node-hot-reload)

我相信你能找到更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-24T12:49:35.300

您可以简单地禁用 swig 的缓存：

```
if (process.env.NODE_ENV !== 'production') {
  swig.setDefaults({ cache: false });
} 
```

# html - 如何将 css 应用于 id 为 img120 的 div 中具有“open”类的图像

> ID：13967262
> 
> 赞同：-4
> 
> 时间：2012-12-20T07:33:17.177
> 
> 标签：html, css

```
<div class='cluster' id='12' 'style='width:350px;min-height:150px;border:4px
solid #339966;'>
    <div class='image' style='width:150px;height:150px;border:2px solid
black;float:left;margin-bottom:10px;margin-left:10px'>
    <img id='image1' src='server/php/files/image.jpg' style='width:140px;height:140px;float:left;'>
    <img id='image22' src='server/php/files/image.jpg' style='width:140px;height:140px;float:left;'>
    <img id='image45' src='server/php/files/image.jpg' style='width:140px;height:140px;float:left;'>
</div>
</div> 
```

> ![以这种格式显示图像](../Images/43ff7b1f8073deb201c2e960675043d7.png)

帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:49:18.820

try like this

```
$('#img120').css({ 'display': ' inline-block', 'padding-left': '177px' }); 
```

if starts with img and the number changes try like this

```
$('img[id^="img"]').css({ 'display': ' inline-block', 'padding-left': '177px' }); 
```

if you want ends with 120

```
$("img[id$='120']").css({ 'display': ' inline-block', 'padding-left': '177px' }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:50:29.077

1.  Your question is totally incomplete.
2.  Your html tag ids are different as compared to your question.

As for as I have understood your question, You want to ask that how you can apply some css to inner elements wrapped in tags. If I take your question, that there is a div having class `cluster` and in that div you have images having `id="120"` like this

```
 <div class="cluster">
     <img src="some src" id="120" />
     <img src="some src" id="120" />
     <img src="some src" id="120" />  
</div> 
```

Then you can write css like

```
<style>
.cluster #120 {
 /* Your css properties */
 width:140px;
 height:140px;
 float:left;

}
</style> 
```

If you want to put a style to all images in div class `cluster`, you can do it like this

```
 <style>
.cluster image {
 /* Your css properties */
 width:140px;
 height:140px;
 float:left;

}
</style> 
```

By doing this you will not have to give style property to each image.

# jquery-ui - 编辑时使用 Jquery 进行表单验证

> ID：13967263
> 
> 赞同：-1
> 
> 时间：2012-12-20T07:33:18.567
> 
> 标签：jquery-ui

我必须采取代理详细信息有三个视图添加，编辑和查看全部。

添加表单按预期工作

```
 <script>
   $(document).ready(function(){

     var ruleSet1 = {
       required: true,
       number: true
     };

     $("#question").validate({
       rules: {
         agent_cheque_no: ruleSet1,
         pincode :ruleSet1,
       }
     });
   });
 </script>  

 <div class="control-group">
   <label class="control-label"> pincode *</label>
   <div class="controls">
     <input class="input-xlarge" type="text" id="pincode" placeholder="pincode" required name="pincode">
   </div>
 </div> 
```

代码在编辑视图中无法正常运行（如下所示）：

```
 <div class="control-group">
   <label class="control-label"> Pincode *</label>
   <div class="controls">
     <input class="input-xlarge" type="text" id="pincode" value="<?php echo $row->agent_pincode; ?>" placeholder="State" required name="pincode">
   </div>
 </div> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:12:44.420

确保您的两个表单 ID 相同，因为对于编辑表单，您的表单 ID 可能不同并且未写入验证代码。

```
<form id="same_as_add">
     <div class="control-group">
          <label class="control-label"> Pincode *</label>
          <div class="controls">
            <input class="input-xlarge" type="text" id="pincode" placeholder="State" required name="pincode">
          </div>
        </div>
<form>
```

当您编辑它时，请确保以下表单声明

```
 <form id="same_as_add">
     <div class="control-group">
          <label class="control-label"> Pincode *</label>
          <div class="controls">
            <input class="input-xlarge" type="text" id="pincode" value="<?php echo $row->agent_pincode; ?>" placeholder="State" required name="pincode">
          </div>
        </div>
<form>
```

# drop-down-menu - 下拉菜单错误-显示错误

> ID：13967270
> 
> 赞同：1
> 
> 时间：2012-12-20T07:33:49.660
> 
> 标签：drop-down-menu

我正在创建一个网站，我想创建一个动态下拉菜单。问题是当我从数据库加载条目时，只有第一个条目正确显示，菜单中的其他条目显示为代码. 我将 Xamp 与 PHP 5.3 和 HeidiSql 一起使用。这是我的代码：

```
<div id="1" class="mega solidblocktheme">

<div class="column">
 <ul>
 <li><a href="<?php include('../conect.php'); $result=mysql_query("SELECT * FROM tours");
    while($data=mysql_fetch_row($result)) 
        { echo $data[2]; ?>"> <?php echo $data[1];  
          echo "</a></li>";  }
         mysql_close($con);?>
 </ul>
 </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:42:55.600

Your loop seems to be in the wrong place. Try something like this:

```
<ul>
<?php include('../conect.php'); 
$result=mysql_query("SELECT * FROM tours");
    while($data=mysql_fetch_row($result)) 
    { 
         echo '<li><a href="'.$data[2].'">'.$data[1];  
         echo "</a></li>";  
    }
    mysql_close($con);?>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:44:25.713

你不应该这样做。

> while($data=mysql_fetch_row($result)) { echo $data[2]; ?>"> 回声 ""; }

对于每个循环，您只是添加内容和关闭标签`</a>`，`</li>` 但您没有为它们添加开始标签。

您可以做的是，首先将您的数据结果存储在一个字符串中

```
include('../conect.php'); 
$result=mysql_query("SELECT * FROM tours");
$data=mysql_fetch_row($result);
mysql_close($con); 

$list = "";
foreach($data as $data_key) {
$list.= '<li><a href="'.data[2].'"> '.$data[1].' </a></li>';
} 
```

所以现在你得到了你的清单

之后是您的 HTML ，只需回显您构建的字符串

```
<div id="1" class="mega solidblocktheme">

<div class="column">
 <ul>

<?php 
echo $list;    
?>
 </ul>
 </div>

</div> 
```

# php - PHP的责任链代码错误

> ID：13967271
> 
> 赞同：2
> 
> 时间：2012-12-20T07:34:01.513
> 
> 标签：php, design-patterns

我有以下 PHP 代码作为责任链，我使用的是 PHP5.4.9。

```
abstract class Logger
{
  protected $next;

  public function next($next)
  {
    $this->next = $next;
    return $this->next;
  }

  public function run(){
    $this->invoke();
    if(null!=$this->next){
      $this->next->invoke();
    }
  }
  abstract public function invoke();
}

class EmailLogger extends Logger
{
  public function invoke()
  {
    print_r("email\n");
  }
}

class DatabaseLogger extends Logger
{
  public function invoke()
  {
    print_r("database\n");
  }
}

class FileLogger extends Logger
{
  public function invoke()
  {
    print_r("file \n");
  }
}

$logger = new EmailLogger();
$logger->next(new DatabaseLogger())->next(new FileLogger());
$logger->run(); 
```

预期输出是：

```
email
database
file 
```

但实际输出：

```
email
database 
```

我希望通过 PHP 语言实现责任链设计模式，一个抽象类和三个或更多类作为一个链来做某事。但只有前两个对象有效。

有什么遗漏吗？还是PHP5.4.9下不能使用这种编码风格？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T07:53:05.713

代替

```
public function run() {
    $this->invoke ();
    if (null != $this->next) {
        $this->next->invoke();
    }
} 
```

和

```
 public function run() {
    $this->invoke ();
    if (null != $this->next) {
        $this->next->run ();
    }
} 
```

请尝试 `$this->next->invoke()` 改变 `$this->next->run()`

# php - 为什么程序员总是在 codeigniter 中使用 public

> ID：13967272
> 
> 赞同：0
> 
> 时间：2012-12-20T07:34:05.480
> 
> 标签：php, codeigniter

我正在学习 CodeIgniter (CI)。我已经看到 CI 支持 OOP 概念，但我想知道在网络和论坛上的每个示例中，控制器中声明的方法都使用 public 关键字。我认为这不是一个愚蠢的问题。即使在 CI 用户指南中，我也看到他们总是使用 public 关键字。那么封装会发生什么？

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:47:59.697

众所周知，CI是[MVC框架](http://ellislab.com/codeigniter/user-guide/overview/mvc.html)

![在此处输入图像描述](../Images/4b470961d289915e3087fbd35f262186.png)

如图所示，视图可以调用控制器和模型。控制器可以调用模型和视图，模型可以调用视图。在这种情况下，控制器中的大多数方法都由视图调用，并且该函数具有处理来自视图的请求的逻辑。我们可以在控制器和模型中编写私有方法，这只能从同一个类中调用（如你所说, 大部分例子都试图说明 CI 的一个特性，不需要写私有方法，即你不熟悉私有方法——这只会在更结构化的应用程序中使用）。没有关于封装和全部。``

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T07:39:32.537

控制器中的方法实际上是由 CI 本身调用的。如果它不是公共 CI 不能调用并且您的控制器将无法工作。这就是为什么所有的行动方法都需要`public`。您可以制作其他方法`private`或`protected`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T07:50:00.397

我想说，如果您想遵循良好的编程习惯并编写易于遵循的代码，请添加`public`到您的方法中。否则不要。（我知道我现在会得到你们中的一些正统程序员！）

PHP5 方法默认为`public`未说明的地方。

> 没有任何显式可见性关键字声明的方法被定义为公共的。

来源：[http ://www.php.net/manual/en/language.oop5.visibility.php](http://www.php.net/manual/en/language.oop5.visibility.php)

# postgresql - Postgresql 动态更新查询执行

> ID：13967279
> 
> 赞同：1
> 
> 时间：2012-12-20T07:34:44.140
> 
> 标签：postgresql, dynamic

我有一个 plpgsql 块，它生成一个动态更新查询：

```
 CREATE OR REPLACE FUNCTION fun_lenght_test () RETURNS VOID AS $BODY$
    BEGIN
    /*
    some code here
    */
    dyn_sql = 'UPDATE';
                            IF SUBSTR(que_col_name, 0, 8)   = 'pro_ans' THEN
                                dyn_sql = dyn_sql ||    ' profile_answers ';
                            ELSIF SUBSTR(que_col_name, 0, 8) = 'reg_ans' THEN
                                 dyn_sql = dyn_sql ||    ' reg_answers ';
                            ELSIF SUBSTR(que_col_name, 0, 8) = 'tvl_ans' THEN
                                dyn_sql = dyn_sql ||    ' tvl_answers ';
                            END IF;

                                dyn_sql = dyn_sql|| 'SET' || ' ' || que_col_name || ' = ' || NEW_VALUE_FOR_COLUMN ;

                                dyn_sql = dyn_sql || ' WHERE' ;

                            IF SUBSTR(que_col_name, 0, 8) = 'pro_ans' THEN
                                dyn_sql = dyn_sql || ' pro_ans_frn_pro_id = (SELECT pro_ans_frn_pro_id FROM profile_answers JOIN registrations ON (pro_ans_frn_pro_id = reg_frn_pro_id) WHERE reg_id ';
                            ELSIF SUBSTR(que_col_name, 0, 8) = 'reg_ans' THEN
                                dyn_sql = dyn_sql || ' reg_answers WHERE reg_ans_frn_reg_id ';
                            ELSIF SUBSTR(que_col_name, 0, 8) = 'tvl_ans' THEN
                                dyn_sql = dyn_sql || ' tvl_answers WHERE tvl_ans_frn_reg_id ';
                            END IF;

                            IF SUBSTR(que_col_name, 0, 8) = 'pro_ans' THEN  
                            dyn_sql = dyn_sql || '= ' || CAST(temp_reg AS VARCHAR) || ');';
                            ELSE
                            dyn_sql = dyn_sql || '= ' || CAST(temp_reg AS VARCHAR) || ';';

 /* want to execute this update dynamic query */
/*
some code here

*/
END;
$BODY$
LANGUAGE plpgsql 
```

你能帮我执行这个动态更新查询吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:59:53.390

创建或替换函数 fun_lenght_test () 返回 VOID 作为 $BODY$

```
DECLARE
dyn_sql varchar;
BEGIN
/*
some code here
*/
dyn_sql = 'UPDATE';
                 IF SUBSTR(que_col_name, 0, 8)   = 'pro_ans' THEN
                            dyn_sql = dyn_sql ||    ' profile_answers ';
                  ELSIF SUBSTR(que_col_name, 0, 8) = 'reg_ans' THEN
                             dyn_sql = dyn_sql ||    ' reg_answers ';
                  ELSIF SUBSTR(que_col_name, 0, 8) = 'tvl_ans' THEN
                            dyn_sql = dyn_sql ||    ' tvl_answers ';
                  END IF;

                            dyn_sql = dyn_sql|| 'SET' || ' ' || que_col_name || ' = ' || NEW_VALUE_FOR_COLUMN ;

                            dyn_sql = dyn_sql || ' WHERE' ;

                        IF SUBSTR(que_col_name, 0, 8) = 'pro_ans' THEN
                            dyn_sql = dyn_sql || ' pro_ans_frn_pro_id = (SELECT pro_ans_frn_pro_id FROM profile_answers JOIN registrations ON (pro_ans_frn_pro_id = reg_frn_pro_id) WHERE reg_id ';
                        ELSIF SUBSTR(que_col_name, 0, 8) = 'reg_ans' THEN
                            dyn_sql = dyn_sql || ' reg_answers WHERE reg_ans_frn_reg_id ';
                        ELSIF SUBSTR(que_col_name, 0, 8) = 'tvl_ans' THEN
                            dyn_sql = dyn_sql || ' tvl_answers WHERE tvl_ans_frn_reg_id ';
                        END IF;

                        IF SUBSTR(que_col_name, 0, 8) = 'pro_ans' THEN  
                        dyn_sql = dyn_sql || '= ' || CAST(temp_reg AS VARCHAR) || ');';
                        ELSE
                        dyn_sql = dyn_sql || '= ' || CAST(temp_reg AS VARCHAR) || ';';
            END IF; 
```

结尾; $BODY$ 语言 plpgsql

很抱歉知道你想要什么，但这可以运行......

# jakarta-ee - 引起：javax.naming.NameNotFoundException：池

> ID：13967291
> 
> 赞同：1
> 
> 时间：2012-12-20T07:35:56.217
> 
> 标签：jakarta-ee, glassfish, connection, pool

我已经与这个错误作斗争了几天。

我在网上找不到合理的解释：我用的是 Glassfish 3.1.2.2 (build 5)

```
2012-12-19T17:54:26.046+0200 javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.util
WARNING: RAR8068: Using default datasource : __ds_jdbc_ra for pool : JavaHelpPool
2012-12-19T17:54:26.093+0200 javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.service
SEVERE: RAR8061: failed to load resource-adapter-config or RA [ __ds_jdbc_ra ], com.sun.appserv.connectors.internal.api.ConnectorRuntimeException: Unable to get active RA for module __ds_jdbc_ra
2012-12-19T17:54:26.093+0200 javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.service
SEVERE: RAR8060: Unable to lookup pool [ JavaHelpPool ], javax.naming.NamingException: Lookup failed for '__SYSTEM/pools/JavaHelpPool' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory
.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: pools]
2012-12-19T17:54:26.093+0200 javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.service
SEVERE: RAR6017 : Failed to get connection pool object jdbc/javahelpds via JNDI lookup : com.sun.appserv.connectors.internal.api.ConnectorRuntimeException: Lookup failed for '__SYSTEM/pools/JavaHelpPool' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.cor
ba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}
2012-12-19T17:54:26.093+0200 javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.util
WARNING: RAR8068: Using default datasource : __ds_jdbc_ra for pool : JavaHelpPool
2012-12-19T17:54:26.140+0200 javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.service
SEVERE: RAR8061: failed to load resource-adapter-config or RA [ __ds_jdbc_ra ], com.sun.appserv.connectors.internal.api.ConnectorRuntimeException: Unable to get active RA for module __ds_jdbc_ra
2012-12-19T17:54:26.156+0200 javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.service
SEVERE: RAR8060: Unable to lookup pool [ JavaHelpPool ], javax.naming.NamingException: Lookup failed for '__SYSTEM/pools/JavaHelpPool' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory
.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: pools]
2012-12-19T17:54:26.156+0200 javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.service
SEVERE: RAR6017 : Failed to get connection pool object jdbc/javahelpds via JNDI lookup : com.sun.appserv.connectors.internal.api.ConnectorRuntimeException: Lookup failed for '__SYSTEM/pools/JavaHelpPool' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.cor
ba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}
2012-12-19T17:54:26.625+0200 org.eclipse.persistence.session.file:/C:/glassfish3/glassfish/domains/domain1/applications/JavaHelp/WEB-INF/classes/_com.javahelp_JavaHelp_war_1.0PU24750959
INFO: EclipseLink, version: Eclipse Persistence Services - 2.3.2.v20111125-r10461
2012-12-19T17:54:26.640+0200 javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.util
WARNING: RAR8068: Using default datasource : __ds_jdbc_ra for pool : JavaHelpPool
2012-12-19T17:54:26.687+0200 javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.service
SEVERE: RAR8061: failed to load resource-adapter-config or RA [ __ds_jdbc_ra ], com.sun.appserv.connectors.internal.api.ConnectorRuntimeException: Unable to get active RA for module __ds_jdbc_ra
2012-12-19T17:54:26.687+0200 javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.service
WARNING: RAR7010: Pool not reachable.
2012-12-19T17:54:26.687+0200 javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.service
WARNING: jdbc.exc_get_conn
[#|2012-12-19T17:54:26.687+0200|SEVERE|glassfish3.1.2|org.eclipse.persistence.session.file:/C:/glassfish3/glassfish/domains/domain1/applications/JavaHelp/WEB-INF/classes/_com.javahelp_JavaHelp_war_1.0PU24750959.ejb|_ThreadID=44;_ThreadName=admin-thread-pool-4848(1);|Local Exception Stack:
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLException: This pool is not registered with the runtime environment : JavaHelpPool
Error Code: 0
at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:309)
at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:135)
at org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:162)
at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:584)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:206)
at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:488)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:188)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:277)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:294)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:272)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.zeroturnaround.jrebel.integration.eclipselink.EntityManagerFactoryMethodHandler.invokeInternal(EntityManagerFactoryMethodHandler.java:117)
at org.zeroturnaround.jrebel.integration.eclipselink.EntityManagerFactoryMethodHandler.invokeCreateEntityManager(EntityManagerFactoryMethodHandler.java:103)
at org.zeroturnaround.jrebel.integration.eclipselink.EntityManagerFactoryMethodHandler.invoke(EntityManagerFactoryMethodHandler.java:77)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl_$$_javassist_0.createEntityManager(EntityManagerFactoryImpl_$$_javassist_0.java)
at org.glassfish.persistence.jpa.PersistenceUnitLoader.loadPU(PersistenceUnitLoader.java:211)
at org.glassfish.persistence.jpa.PersistenceUnitLoader.<init>(PersistenceUnitLoader.java:120)
at org.glassfish.persistence.jpa.JPADeployer$1.visitPUD(JPADeployer.java:224)
at org.glassfish.persistence.jpa.JPADeployer$PersistenceUnitDescriptorIterator.iteratePUDs(JPADeployer.java:495)
at org.glassfish.persistence.jpa.JPADeployer.createEMFs(JPADeployer.java:233)
at org.glassfish.persistence.jpa.JPADeployer.prepare(JPADeployer.java:168)
at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:410)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.sql.SQLException: This pool is not registered with the runtime environment : JavaHelpPool
at com.sun.enterprise.connectors.service.ConnectorConnectionPoolAdminServiceImpl.getConnection(ConnectorConnectionPoolAdminServiceImpl.java:1552)
at com.sun.enterprise.connectors.ConnectorRuntime.getConnection(ConnectorRuntime.java:564)
at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl$MyDataSource.getConnection(ConnectorResourceAdminServiceImpl.java:283)
at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:132)
... 52 more
Caused by: javax.resource.ResourceException: This pool is not registered with the runtime environment : JavaHelpPool
at com.sun.enterprise.connectors.service.ConnectorConnectionPoolAdminServiceImpl.getUnpooledConnection(ConnectorConnectionPoolAdminServiceImpl.java:669)
at com.sun.enterprise.connectors.service.ConnectorConnectionPoolAdminServiceImpl.getConnection(ConnectorConnectionPoolAdminServiceImpl.java:1545)
... 55 more
Caused by: com.sun.appserv.connectors.internal.api.ConnectorRuntimeException: This pool is not bound in JNDI : JavaHelpPool
at com.sun.enterprise.connectors.service.ConnectorConnectionPoolAdminServiceImpl.obtainManagedConnectionFactory(ConnectorConnectionPoolAdminServiceImpl.java:1087)
at com.sun.enterprise.connectors.service.ConnectorConnectionPoolAdminServiceImpl.getUnpooledConnection(ConnectorConnectionPoolAdminServiceImpl.java:628)
... 56 more
Caused by: javax.naming.NamingException: Lookup failed for '__SYSTEM/pools/JavaHelpPool' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exc
eption is javax.naming.NameNotFoundException: pools]
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
at javax.naming.InitialContext.lookup(InitialContext.java:411)
at javax.naming.InitialContext.lookup(InitialContext.java:411)
at com.sun.appserv.connectors.internal.api.ResourceNamingService.lookup(ResourceNamingService.java:221)
at com.sun.ent
erprise.connectors.service.ConnectorConnectionPoolAdminServiceImpl.getConnectorConnectionPool(ConnectorConnectionPoolAdminServiceImpl.java:870)
at com.sun.enterprise.connectors.service.ConnectorConnectionPoolA
dminServiceImpl.obtainManagedConnectionFactory(ConnectorConnectionPoolAdminServiceImpl.java:1003)
... 57 more
Caused by: javax.naming.NameNotFoundException: pools
at com.sun.enterprise.naming.impl.TransientContext.resolveContext(TransientContext.java:310)
at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:218)
at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:219)
at com.sun.enterprise.naming.impl.SerialContextProviderImpl.lookup(SerialContextProviderImpl.java:77)
at com.sun.enterprise.naming.impl.LocalSerialContextProviderImpl.lookup(LocalSerialContextProviderImpl.java:119)
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:505)
... 63 more 
```

如果有人知道，请告诉它是什么。我将 __ds_jdbc_ra.jar 手动粘贴到 C:\glassfish3\glassfish\bin\lib\install\applications__ds_jdbc_ra 并没有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-11T19:09:08.907

我使用完全相同的 glassfish 版本

这就是我解决它的方法

我使用 createEjbContainer api 而不传递属性

查找您的临时文件夹，它会在那里创建一个 glassfish 3 临时域

签入 src/test/resources/gfv3 下的文件夹结构

这就是我所拥有的

```
src\test\resources\gfv3
src\test\resources\META-INF
src\test\resources\gfv3\domains
src\test\resources\gfv3\lib
src\test\resources\gfv3\domains\domain1
src\test\resources\gfv3\domains\domain1\config
src\test\resources\gfv3\domains\domain1\config\admin-keyfile
src\test\resources\gfv3\domains\domain1\config\cacerts.jks
src\test\resources\gfv3\domains\domain1\config\cadump.txt
src\test\resources\gfv3\domains\domain1\config\domain.xml
src\test\resources\gfv3\domains\domain1\config\keyfile
src\test\resources\gfv3\domains\domain1\config\keystore.jks
src\test\resources\gfv3\domains\domain1\config\login.conf
src\test\resources\gfv3\domains\domain1\config\server.policy
src\test\resources\gfv3\lib\install
src\test\resources\gfv3\lib\install\applications
src\test\resources\gfv3\lib\install\applications\jaxr-ra
src\test\resources\gfv3\lib\install\applications\jmsra
src\test\resources\gfv3\lib\install\applications\__cp_jdbc_ra
src\test\resources\gfv3\lib\install\applications\__dm_jdbc_ra
src\test\resources\gfv3\lib\install\applications\__ds_jdbc_ra
src\test\resources\gfv3\lib\install\applications\__xa_jdbc_ra
src\test\resources\gfv3\lib\install\applications\jaxr-ra\jaxr-ra.jar
src\test\resources\gfv3\lib\install\applications\jmsra\fscontext.jar
src\test\resources\gfv3\lib\install\applications\jmsra\imqbroker.jar
src\test\resources\gfv3\lib\install\applications\jmsra\imqjmsbridge.jar
src\test\resources\gfv3\lib\install\applications\jmsra\imqjmsra.jar
src\test\resources\gfv3\lib\install\applications\jmsra\imqjmx.jar
src\test\resources\gfv3\lib\install\applications\jmsra\imqstomp.jar
src\test\resources\gfv3\lib\install\applications\__cp_jdbc_ra\__cp_jdbc_ra.jar
src\test\resources\gfv3\lib\install\applications\__dm_jdbc_ra\__dm_jdbc_ra.jar
src\test\resources\gfv3\lib\install\applications\__ds_jdbc_ra\__ds_jdbc_ra.jar
src\test\resources\gfv3\lib\install\applications\__xa_jdbc_ra\__xa_jdbc_ra.jar
src\test\resources\META-INF\persistence.xml 
```

然后你可以编辑 domain.xml 在那里添加数据源

然后使用代码测试ejb

我使用 glassfish v3、maven、oracle db

```
Map&lt;String, Object&gt; p = new HashMap&lt;String, Object&gt;();
//        p.put(EJBContainer.APP_NAME, "TON_APP_NAME");

        File[] modules = {
            new File("target/test-classes"),
            new File("target/classes")

        };
        p.put(EJBContainer.MODULES, modules);
        p.put("org.glassfish.ejb.embedded.glassfish.installation.root", "src/test/resources/gfv3");

        ejbContainer = EJBContainer.createEJBContainer(p);
        ctx = ejbContainer.getContext();
        ejbFacade = (AllocnGrpFacade) ctx.lookup("java:global/classes/AllocnGrpFacade"); 
```

祝你好运

# c# - 通过 Automapper 将多个序列自动投影到主 ViewModel

> ID：13967293
> 
> 赞同：0
> 
> 时间：2012-12-20T07:35:58.770
> 
> 标签：c#, linq, linq-to-sql, automapper, automapper-2

我正在尝试使用 Automapper 将一些数据从 SQL 服务器自动投影到我的视图模型中。

我拥有的视图模型是：

```
public sealed class WorkstationViewModel
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string OccupiedByName { get; set; }
} 
```

我尝试使用的代码是：

```
Mapper.CreateMap<Workstation, WorkstationViewModel>()
  .ForMember(T => T.OccupiedByName, T => T.MapFrom(W =>
    W.Sessions.AsQueryable().Select(E => E.StaffMember.Name).SingleOrDefault())); 
```

两个属性`Id`，并且`Name`是自动投影的，因为它们在`Workstation`类中具有相同的名称。

我在这样的一些代码行上遇到的异常

```
var model = WorkstationsRepository.GetAll().Project()
           .To<WorkstationViewModel>().SingleOrDefault(); 
```

是一些奇怪`object reference is null`的异常，在堆栈跟踪的顶部有一些 automapper 的`CreateExpression<>`方法，这给了我一个结论，即 automapper 无法生成一个好的表达式来将其转换为 SQL 代码。

当我使用简单的映射时，比如`.Name`从`.Category.Name`SQL 表中检索或其他单项检索，它可以完美运行。我只需要在通过 Automapper 投影序列时访问**多个项目。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:20:07.677

较新的`Project().To()`API 采用与“经典”API 完全不同的路线`Mapper.Map()`。我认为后者会在您的情况下运行，但是您当然不会受益于 SQL 的投影涓涓细流思想。

在`Project().To()`AutoMapper 尝试`MemberInfo`从涉及的类型中获取 s（反射）期间，它用于创建 lambda 表达式。这意味着映射中的源属性必须是源类型的成员。显然，`W.Sessions.AsQueryable().Select(...`不是 的成员`Workstation`。所以在 AutoMapper 的某个地方碰到了一个`null`成员信息。

所以，`Project().To()`有点受限。在这种特殊情况下，补救措施可能是将 a 与其父级映射到`Session`模型。参考导航属性将与 OK 映射。`WorkStation``StaffMember``Project().To()`

# iphone - 如何通过iphone中的xml解析文件将文本字段数据从iphone发送到服务器

> ID：13967294
> 
> 赞同：3
> 
> 时间：2012-12-20T07:36:11.407
> 
> 标签：iphone, objective-c, ios, xml-parsing

我是 iphone 开发的新手。我对如何通过 xml 解析将数据从 iPhone 应用程序发送到服务器有一些疑问......如何将文本字段数据附加到 xml 文件中，以及如何将带有文本字段数据的 xml 文件发送到服务器

我在谷歌搜索了很多，但我不知道请提供更多关于如何将文本字段数据附加到 xml 的想法

你能给我相关的源代码或相关链接吗？相当来自 dz 问题

我的 xml 格式如

```
<Users>
    <User>
        <id/>
        <msg>0</msg>
        <name/>
        <country/>
    </User>
</Users> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:36:09.437

Use this open source xml writer [https://github.com/skjolber/xswi](https://github.com/skjolber/xswi)

```
 XMLWriter* xmlWriter = [[XMLWriter alloc]init];

    [xmlWriter writeStartElement:@"Users"];
    [xmlWriter writeStartElement:@"User"];
    [xmlWriter writeStartElement:@"id"];
    [xmlWriter writeEndElement];
    [xmlWriter writeStartElement:[NSString stringWithFormat:@"%@", yourtextfield.text]];
    [xmlWriter writeStartElement:@"name"];
    [xmlWriter writeEndElement];
    [xmlWriter writeStartElement:@"country"];
    [xmlWriter writeEndElement];
    [xmlWriter writeEndElement];
    [xmlWriter writeEndElement];

    NSString* xml = [xmlWriter toString]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T07:38:29.040

您可以创建自己`xml`的 a`NSString`并将其传递给 Web 服务。这解决了你的问题。

```
NSString *strXML = [NSString stringWithFormat:@"                                      <TemplateId>%@</TemplateId>\
                                           <ProjectName>%@</ProjectName>\
                                           <SizeId>%d</SizeId>\
                                           <Quantity>%d</Quantity>\
                                           <TotalAmount>%0.2f</TotalAmount>\", dataModel.ProjectId,dataModel.ProjectName, [dataModel.templateSizeId intValue], dataModel.projectQuantity,[dataModel.templateAmount floatValue]]; 
```

# panoramio - 用于按标签搜索的 Panoramio api

> ID：13967295
> 
> 赞同：0
> 
> 时间：2012-12-20T07:36:18.013
> 
> 标签：panoramio

我正在开发 Web 应用程序以允许用户使用标签搜索 Panoramio 图像。如果有人以前做过并与我分享你是如何做到的，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T14:05:43.050

您可以在此处找到您需要了解的所有信息：

[https://developers.google.com/maps/documentation/javascript/examples/layer-panoramio-tags](https://developers.google.com/maps/documentation/javascript/examples/layer-panoramio-tags)

它易于实施，请尝试一下。只要您正确设置了 Panoramio 服务，它应该只需要一两行代码。

# c++ - 为什么将标题放在单独的目录中？

> ID：13967296
> 
> 赞同：33
> 
> 时间：2012-12-20T07:36:20.757
> 
> 标签：c++, c, directory-structure

我知道在 C/C++ 项目中将头文件放在一个目录中是很常见的，例如将头文件放在`include`一个单独的目录中，例如`src`. 我一直在玩弄不同的项目结构，想知道这是否有任何客观原因，还是只是惯例？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-20T07:41:07.723

约定是原因之一——大多数时候，通过有效的抽象，您只关心接口并且希望只看标题就可以轻松。

但这不是唯一的原因。如果您的项目是按模块组织的，您很可能必须在不同的模块中包含一些标头，并且您希望您的包含目录中的其他“噪音”文件被清除。

此外，如果您计划重新分发您的模块，您可能希望隐藏实现细节。因此，您只提供标头和二进制文件 - 从一个文件夹中分发标头，其中没有其他内容更简单。

还有**一个我实际上更喜欢的替代方案**——公共头文件放在一个单独的文件夹中（这些包含最小的接口——没有任何实现细节可见），私有头文件和实现文件是分开的（可能但不一定在单独的文件夹中） .

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-06-24T14:08:43.457

我更喜欢将它们放在*同一个*目录中。原因：

接口规范文件和实现该接口的源文件属于项目的同一部分。说你有`subsystemx`。那么，如果你把`subsystemx`文件放在`subsystemx`目录下，`subsustemx`是自包含的。

如果有很多包含文件，你当然可以做`subsystemx/include`and `subsystemx/source`，但是我认为如果你把 in 的定义`class Foo`放在一起`foo.hpp`，`foo.cpp`你当然想在一个目录列表。查找所有相关文件`foo`

```
ls foo* 
```

查找所有实现文件：

```
ls *.cpp 
```

查找所有声明文件：

```
ls *.hpp 
```

简单干净。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-20T07:40:57.820

它使您的文件夹结构更清洁。头文件和源文件明显不同，用于不同的事物，因此将它们分开是有意义的。从这个角度来看，问题基本上与“*为什么源文件和文档放在不同的文件夹中*”相同？计算机对于您在文件夹中放入什么和不放入什么是高度不可知的，由于我们人类解析、存储和调用信息的方式，文件夹在大多数情况下只是一个方便的抽象。

还有一个事实是，**即使在您构建**后头文件仍然有用，即如果您正在构建一个库并且有人想要使用该库，他们将需要头文件 - 而不是源文件 - 所以它使将这些头文件捆绑在一起——将内容抓取`bin`进来`include`，而不必进行筛选`src`——要容易得多。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-20T08:24:36.887

除了（有争议的？）对保持事物有序、在其他项目中有用等有用之外，还有一个非常中立和客观的优势：编译时间。

特别是，在一个包含一大堆文件的大型项目中，取决于头文件的搜索路径（使用`#include "headername.h"`而不是.c/.cpp 文件`#include "../../gfx/misc/something/headername.h"`，并且编译器传递了正确的参数以便能够吞下它），您会大大减少数量需要由编译器扫描以搜索正确标题的条目。由于大多数编译器为每个编译的文件单独启动，它们需要读取包含路径上的文件列表并为每个编译的文件寻找正确的头文件。如果包含路径上有一堆 .c、.o 和其他不相关的文件，则在其中查找包含所需的时间相应地更长。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-08T11:14:12.700

简而言之，有几个原因：

*   可维护的代码。
*   代码设计良好且整洁。
*   更快的编译时间（有时，对于完成的小改动）。
*   更容易分离文档等的接口。
*   可以避免编译时的循环依赖。
*   易于审查。

看看文章[用 C 和 C++ 组织代码文件，](http://www.gamedev.net/page/resources/_/technical/general-programming/organizing-code-files-in-c-and-c-r1798)它很好地解释了它。

# oracle - 如何使用 SQLDEV 中的代码导入数据？

> ID：13967297
> 
> 赞同：-1
> 
> 时间：2012-12-20T07:36:28.853
> 
> 标签：oracle, plsql

如何使用 SQLDEV 中的代码导入数据？

我不想手动做。我想知道是否有办法使用代码从 .csv 文件导入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:30:39.513

SQL DEVELOPER 中执行的代码在 DMBS（您的 Oracle 安装，服务器）上运行。IDE 获取您的命令（单击模式浏览器、过滤器等）并将它们转换为服务器的命令。

因此，您只有在 Server 上运行的 Oracle 代码（SQL 和 PL/SQL（以及 Java 等）），而没有在 SQL Developer 中运行的代码。

可以导入表：

*   使用 IDE 中的向导（单击表，然后选择导入）
*   在 Oracle 客户端上使用 sqlloader。
*   在服务器端使用外部表。

# php - 如何检查 request_uri 的内容

> ID：13967302
> 
> 赞同：0
> 
> 时间：2012-12-20T07:36:55.203
> 
> 标签：php, url

您好，我想知道如何避免在 request_uri 中重复发布。

举个例子：

```
http://www.example.com/foo/foo/... 
```

应该只是：

```
http://www.example.com/foo/... 
```

例如，我想创建一个我需要的标题功能检查，该功能需要在标题之前进行检查。如果 url 字符串包含双重发布，它不应该是标题。所以检查将是这样的：

```
$host = $_SERVER['HTTP_HOST'];
$url = $_SERVER['REQUEST_URI'];
$urlArray = explode('/', $url);
$urlArrayUnique = array_unique($urlArray);
$urlUnique = implode('/', $urlArrayUnique);

if (isset($_SESSION['a'])){
    $var = $_SESSION['a'];
    if($url !== $urlUnique){
        header ('Location:'.$host.'/'.$var.'/'.$basename);
        exit;
    }
} 
```

如果有人可以帮助我，我真的很感激。

多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:56:08.200

您可以根据需要修改以下代码以适应您的需要：

```
$host = $_SERVER['HTTP_HOST'];
$url = $_SERVER['REQUEST_URI'];
$urlArray = explode('/', $url);
$lai = max(array_keys($urlArray));//here we get the max array index    
if($urlArray[$lai-1] != $urlArray[$lai])header('Location:'.$host.'/'.$var.'/'.$basename); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:45:23.360

试试下面的代码，使用**explode**并获得唯一性并将其内**爆**到URL中......

```
$url = $_SERVER['REQUEST_URI'];

$urlArray = explode('/', $url);

$urlArrayUnique = array_unique($urlArray);

$urlUnique = implode('/', $urlArrayUnique); 
```

您也可以在 $urlArray 中获得重复值...

# mysql - 无法进一步优化 MySQL 查询：我错过了什么？

> ID：13967305
> 
> 赞同：3
> 
> 时间：2012-12-20T07:37:06.577
> 
> 标签：mysql, performance, innodb

我有一个似乎无法进一步优化的查询（关于执行时间）。这是一个简单的查询，索引到位，我尝试配置 InnoDB 设置......但似乎没有任何帮助。

**表**

该查询是三个表 trk、auf 和 paf 之间的 JOIN。

*   trk : 临时表保存 id 代表曲目。
*   auf ：表示与曲目关联的音频文件的表。
*   paf : 保存已发布音频文件 id 的表。充当“过滤器”。

```
// 'trk' table  
CREATE TEMPORARY TABLE auf_713340 (  
  `id` char(36),   
  PRIMARY KEY (id)  
) ENGINE=MEMORY);  

// 'auf' table  
CREATE TABLE `file` (  
 `id` char(36) NOT NULL,  
 `track_id` char(36) NOT NULL,  
 `type` varchar(3) DEFAULT NULL,  
 `quality` int(1) DEFAULT '0',  
 `size` int(20) DEFAULT '0',  
 `duration` float DEFAULT '0',  
 `bitrate` int(6) DEFAULT '0',  
 `samplerate` int(5) DEFAULT '0',  
 `tagwritten` datetime DEFAULT NULL,  
 `tagwriteattempts` int(3) NOT NULL DEFAULT '0',  
 `audiodataread` datetime DEFAULT NULL,  
 `audiodatareadattempts` int(3) NOT NULL DEFAULT '0',  
 `converted` datetime DEFAULT NULL,  
 `convertattempts` int(3) NOT NULL DEFAULT '0',  
 `waveformgenerated` datetime DEFAULT NULL,  
 `waveformgenerationattempts` int(3) NOT NULL DEFAULT '0',  
 `flag` int(1) NOT NULL DEFAULT '0',  
 `status` int(1) NOT NULL DEFAULT '0',  
 `updated` datetime NOT NULL DEFAULT '2000-01-01 00:00:00',  
 PRIMARY KEY (`id`),  
 KEY `FK_file_track` (`track_id`),  
 KEY `file_size` (`size`),  
 KEY `file_type` (`type`),  
 KEY `file_quality` (`quality`),  
 CONSTRAINT `file_ibfk_1` FOREIGN KEY (`track_id`) REFERENCES `track` (`id`)  
) ENGINE=InnoDB DEFAULT CHARSET=utf8

// 'paf' table  
CREATE TABLE `publishedfile` (  
  `file_id` varchar(36) NOT NULL,  
  `data` varchar(255) DEFAULT NULL,  
  `file_updated` datetime NOT NULL,  
  PRIMARY KEY (`file_id`)  
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

查询通常需要 1500 毫秒到 2500 毫秒来执行，trk 表中有 50 到 100 个 id。auf 表包含大约 110 万行，paf 表包含大约 900.000 行。

MySQL 服务器在 4GB Rackspace 云服务器实例上运行。

**查询**

```
SELECT auf.*
FROM auf_713340 trk
INNER JOIN file auf
  ON auf.track_id = trk.id
INNER JOIN publishedfile paf
  ON auf.id = paf.file_id 
```

**带解释的查询**

```
id select_type table type   possible_keys         key           key_len ref                                 rows Extra
1  SIMPLE      trk   ALL    NULL                  NULL NULL     NULL                                        60  
1  SIMPLE      auf   ref    PRIMARY,FK_file_track FK_file_track 108     func                                1   Using where
1  SIMPLE      paf   eq_ref PRIMARY               PRIMARY       110     trackerdatabase_development.auf.id  1   Using where; Using index 
```

**InnoDB 配置**

```
[mysqld]

# The size of memory used to cache table data and indexes. The larger 
# this value is, the less I/O is needed to access data in tables. 
# Default value is 8MB. Recommendations point towards 70% - 80% of 
# available system memory.
innodb_buffer_pool_size=2850M

# Recommendations point towards using O_DIRECT to avoid double buffering.
# innodb_flush_method=O_DIRECT

# Recommendations point towards using 256M.
# @see http://www.mysqlperformanceblog.com/2006/07/03/choosing-proper-innodb_log_file_size/
innodb_log_file_size=256M

# The size in bytes of the buffer that InnoDB uses to write to the log files
# on disk. Recommendations point towards using 4MB.
innodb_log_buffer_size=4M

# The size of the buffer used for MyISAM index blocks.
key_buffer_size=128M 
```

现在，问题是；我该怎么做才能使查询更好地执行？毕竟，有问题的表并没有那么大，而且索引已经到位..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:12:04.680

在 auf 表中，将 id 字段设为 int(11) 并使其自动递增。所有大于 11 的 int 字段长度，将它们编辑为 11。

谢谢里帕萨哈

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:15:36.010

尝试这个：

```
SELECT auf.* 
FROM file auf 
WHERE EXISTS 
      ( SELECT *
        FROM auf_713340 trk 
        WHERE auf.track_id = trk.id 
      )
  AND EXISTS
      ( SELECT *
        FROM publishedfile paf
        WHERE auf.id = paf.file_id
      ) ; 
```

我还将测试和比较使用 InnoDB 引擎定义的临时表或（主）索引作为`BTREE`索引的效率。内存表`HASH`默认有索引，如果我没记错的话，不是 Btree。

# java - 从 src/main/resources 读取会产生 NullPointerException

> ID：13967307
> 
> 赞同：35
> 
> 时间：2012-12-20T07:37:08.497
> 
> 标签：java, maven, xls

在我的 Maven 项目中，我在 src/main/resources 中有一个 xls 文件。当我这样读时：

```
 InputStream in = new
 FileInputStream("src/main/resources/WBU_template.xls"); 
```

一切都好。

但是我想用 getResourceAsStream 将它读为 InputStream。当我这样做时，无论有没有斜线，我总是得到一个 NPE。

```
 private static final String TEMPLATEFILE = "/WBU_template.xls";
     InputStream in = this.getClass.getResourceAsStream(TEMPLATEFILE); 
```

无论斜线是否存在，或者我使用 getClassLoader() 方法，我仍然得到一个 NullPointer。

我也试过这个：

```
URL u = this.getClass().getResource(TEMPLATEFILE);
System.out.println(u.getPath()); 
```

控制台说.../target/classes/WBU_template.xls 然后获取我的 NullPointer。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-12-20T07:47:26.443

FileInputStream 将加载您传递给构造函数的文件路径，作为 Java 进程工作目录的相对路径。

[getResourceAsStream()](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResource%28java.lang.String%29)将加载相对于应用程序类路径的文件路径。

当您使用`.getClass().getResource(fileName)`它时，认为 fileName 的位置与调用类的位置相同。

当您使用`.getClass().getClassLoader().getResource(fileName)` 它时，文件名的位置是根目录 - 换句话说就是 bin 文件夹。

`src/main/resources`使用类加载器加载时文件应位于

简而言之，您必须使用`.getClass().getClassLoader().getResource(fileName)`在您的情况下加载文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T07:41:48.680

我通常像这样从 WEB-INF 加载文件

```
session.getServletContext().getResourceAsStream("/WEB-INF/WBU_template.xls") 
```

# iphone - 我对“匿名 iOS 内存”感到困惑

> ID：13967309
> 
> 赞同：3
> 
> 时间：2012-12-20T07:37:18.387
> 
> 标签：iphone, ios

我有三种编写此代码的方法。第三种方式让我感到困惑。

### 第一种方法工作正常。

```
//.h
@property (weak, nonatomic) IBOutlet UIImageView *picImageStage;
//.m
NSString *name = [NSString stringWithFormat:@"allen.png"];
UIImage *image = [UIImage imageNamed:name];
UIImageView *t = [[UIImageView alloc]initWithImage:image];
self.picImageStage = t; 
```

### 第二种方式工作正常。

```
//.h
@property (retain, nonatomic) IBOutlet UIImageView *picImageStage;
//.m
NSString *name = [NSString stringWithFormat:@"allen.png"];
UIImage *image = [UIImage imageNamed:name];
self.picImageStage = [[UIImageView alloc]initWithImage:image]; 
```

### 第三种方式错误。

```
//.h
@property (weak, nonatomic) IBOutlet UIImageView *picImageStage;
//.m
NSString *name = [NSString stringWithFormat:@"allen.png"];
UIImage *image = [UIImage imageNamed:name];
self.picImageStage = [[UIImageView alloc]initWithImage:image]; 
```

我不明白原因。有人可以帮我吗？感谢：D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T07:44:42.207

在**第三个片段**中，您已将**@property 声明为 weak**，并且 UIImageView 将***立即被释放***。因为当同一个对象没有强关系时，弱关系将被归零。

在几乎相同的**第一个片段**中，您首先将 UIImageView 分配给了一个局部变量。此局部变量隐式**使用强关系。**如果您离开局部强变量的范围（即运行此代码的方法），该属性也将被释放，除非您在离开变量范围之前创建另一个强赋值。例如，如果您将 UIImageView 添加为另一个视图的子视图，则会发生这种情况。将视图添加到另一个视图会创建牢固的关系。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T07:47:41.550

让我们检查所有三个，因为这可能是向您解释这一点的最简单方法。

> 1号

```
//first method
//.h
@property (weak, nonatomic) IBOutlet UIImageView *picImageStage;
//.m
NSString *name = [NSString stringWithFormat:@"allen.png"];
UIImage *image = [UIImage imageNamed:name];
UIImageView *t = [[UIImageView alloc]initWithImage:image];
self.picImageStage = t; 
```

您正在初始化一个保留计数为 +1 的局部变量 UIImageView。因为弱属性不会对其值调用隐式保留，所以您不拥有存储在 self.picImageStage 中的值，这意味着您是一个幸运的露营者，因为一旦声明本地 UIImageView 的函数超出范围，你的变量被释放。

> 2号

```
//second method
//.h
@property (retain, nonatomic) IBOutlet UIImageView *picImageStage;
//.m
NSString *name = [NSString stringWithFormat:@"allen.png"];
UIImage *image = [UIImage imageNamed:name];
self.picImageStage = [[UIImageView alloc]initWithImage:image]; 
```

这一个进入了我所说的那些隐含的保留。编译器扩展这一行：

```
self.picImageStage = [[UIImageView alloc]initWithImage:image]; 
```

出去

```
self.picImageStage = [[[UIImageView alloc]initWithImage:image]retain]; 
```

这意味着您拥有它，并且可以随意使用它。

> 3 号

```
//third method
//.h
@property (weak, nonatomic) IBOutlet UIImageView *picImageStage;
//.m
NSString *name = [NSString stringWithFormat:@"allen.png"];
UIImage *image = [UIImage imageNamed:name];
self.picImageStage = [[UIImageView alloc]initWithImage:image]; 
```

您不仅要从您不拥有的变量中分配弱属性，而且一旦调用分配，您的变量就不会存储值！这是因为，再一次，弱指针不会在它们的赋值上调用隐式保留，这意味着您无法控制变量保留多长时间，我敢打赌它不会存活很长时间！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T07:42:41.263

Here you use `weak` property instead of `retain` and also alloc it directly with UIImage...

Also in first stage when you assign UIImageView to the `picImageStage` then its work fine because its directly equal and store in the `picImageStage`.. thats the difference..

if you use

```
@property (retain, nonatomic) IBOutlet UIImageView *picImageStage; 
```

instead of

```
@property (weak, nonatomic) IBOutlet UIImageView *picImageStage; 
```

then its work fine with this reason..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T07:43:29.937

试试这个

```
//.h
@property (weak, nonatomic) IBOutlet UIImageView *picImageStage;
//.m
NSString *userName = @"allen";
NSString *imgName = [NSString stringWithFormat:@"%@.png",userName];
UIImage *image = [UIImage imageNamed:imgName];
[self.picImageStage setImage:image]; 
```

# android - Android App，打开联系人列表并显示电话号码

> ID：13967315
> 
> 赞同：0
> 
> 时间：2012-12-20T07:37:41.990
> 
> 标签：android, android-contacts, contactscontract

我正在使用“android.permission.SEND_SMS”开发一个 Android 应用程序来打开联系人列表并显示它。我的应用程序运行得很好，但是当我从列表中选择一个联系人时，它只显示我选择的任何联系人的第一个联系人电话号码。这是我的代码。谢谢你。

```
public void onActivityResult(int reqCode, int resultCode, Intent data) { 
    super.onActivityResult(reqCode, resultCode, data); 

     Cursor people = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                new String[] {ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                ContactsContract.CommonDataKinds.Phone.NUMBER}, 
                null, null, null);

      int indexNumber = people.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);

       people.moveToFirst();
       String number;
       do {
           number = people.getString(indexNumber);
       } while (people.moveToNext());
    phoneNumber.setText(number);
} 
```

# javascript - 使用 JQuery 更改 innerHTML 内容

> ID：13967316
> 
> 赞同：0
> 
> 时间：2012-12-20T07:37:42.440
> 
> 标签：javascript, jquery, if-statement, innerhtml

```
var user;
(function (user) {
    user = {
        dynamicPriceChange: function () {
            $("input[name='user[plan_id]']").change(function (e) {
                var planId = $(this).data('text');
                var durationPlan = $('p#durSubsMY')[0].innerHTML;
                var price = $('.price')[0].innerHTML;
                $('.price').text(planId);
                $('span#Love')[0].innerHTML = price;
                if price == "29" {
                    durationPlan = "per month";
                }
                if price == "261" {
                    durationPlan = "per year";
                }
            });
        }
        jQuery(function () {
            user.dynamicPriceChange();
        });
    })(user) 
```

如果价格为 29，我尝试更改`durationPlan`为“每月”，如果价格为 261，我尝试更改为“每年”
。但我无法更改。请帮忙，我是 jQuery 新手。

工作更正的代码是

```
 if (price == "29") {
         $('p#durSubsMY')[0].innerHTML = "per month"
        }
    if (price == "261" ){
         $('p#durSubsMY')[0].innerHTML = "per year"
        } 
```

谢谢大家的帮助！！！

干杯！:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:49:04.287

As #Adil mentioned, you forgot you parenthesis in the if statement. Also you can try `html()` function from the jQuery library [http://api.jquery.com/html/](http://api.jquery.com/html/) instead of `innerHTML`.

`var planId = $(this).data('text');` if you want to get the value from the input use `var planId = $(this).val()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T07:42:07.787

Wrong syntax of if statement, you missed the if condition part parenthesis.

*Change*

```
if price == "29" {
       durationPlan = "per month"
} 
```

if price == "261" { durationPlan = "per year" }

*To*

```
if (price == "29") {
      durationPlan = "per month"
}
if (price == "261" ){
     durationPlan = "per year"
} 
```

One of closing bracket is also missing in the end.

*Change*

```
})(user) 
```

*To*

```
}})(user) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T07:43:05.293

`durationPlan`只是一个包含元素的 innerHTML 的变量，改变它的值不会改变元素的内容。试试吧

```
 if (price == "29") {
        $('p#durSubsMY')[0].innerHTML = "per month"
    }
    else if (price == "261") {
        $('p#durSubsMY')[0].innerHTML = "per year"
    } 
```

# mysql - MySQL 插入触发器同时具有多个插入

> ID：13967318
> 
> 赞同：1
> 
> 时间：2012-12-20T07:37:51.307
> 
> 标签：mysql, triggers, insert

我正在尝试为我的表生成一个主键，就像这样（简化版） - 目的是每天增加一个键：

```
DELIMITER ^

CREATE TABLE `ADDRESS` (
    ID INTEGER NOT NULL DEFAULT -1,
    NAME VARCHAR(25),
    PRIMARY KEY(`ID`))^

CREATE FUNCTION `GETID`()
RETURNS INTEGER
deterministic
BEGIN
    declare CURR_DATE DATE;
    declare maxid, _year, _month, _day, newid INTEGER;

    set CURR_DATE = CURRENT_DATE;
    set _year = EXTRACT(YEAR FROM CURR_DATE);
    set _mon = EXTRACT(MONTH FROM CURR_DATE);
    set _day = EXTRACT(DAY FROM CURR_DATE);
    set newid = (_year - (_year/100) * 100) * 10000 + _mon * 100 + _day;

    select max(ID) into maxid From `ADDRESS`;
    if (maxid is null) then
        set maxid = 0;
    end if;

    if (MAXID / 1000 != newid) then
        set MAXID = newid * 1000;
    end if;
    set MAXID = MAXID + 1;
    return MAXID;
END^

CREATE TRIGGER `ADDRESS_ID_TRIGGER` BEFORE INSERT ON `ADDRESS`
FOR EACH ROW
BEGIN
    if new.id=-1 then
        set new.id = getid();
    end if ;
END^

COMMIT^

DELIMITER ; 
```

通常它工作正常，但是当我同时使用多个插入测试它时，它显然会失败（例如，没有脏读，第二次插入的最大选择将失败，因此它将生成与第一次插入相同的 id）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:14:16.563

解决方法：

1.  使主键 AUTO_INCREMENT。
2.  添加 TIMESTAMP 字段并使用 BEFORE INSERT/UPDATE 触发器设置 CURRENT_TIMESTAMP()。

您也可以使用`ON UPDATE CURRENT_TIMESTAMP`TIMESTAMP 字段的选项，值将自动更新。

因此，ID 是 ID，TIMESTAMP 字段包含日期和时间。

# php - 使用 PHP 在文本文件中显示相同的单词

> ID：13967321
> 
> 赞同：1
> 
> 时间：2012-12-20T07:38:06.373
> 
> 标签：php, arrays, file, text-files

我有如下文本文件：

**文本.txt**

```
lebuzzdesbonsplans.com;hotmail.com;26608;828;3.11
lebuzzdesbonsplans.com;hotmail.fr;24798;876;3.53
friendcorp.fr;yahoo.fr;11343;0;0
friendcorp.fr;free.fr;9856;12;.12
friendcorp.fr;wanadoo.fr;9283;1;.01
messengear.fr;free.fr;9090;11;.12
messengear.fr;laposte.net;8107;2;.02
....................................
.................................... 
```

**PHP代码：**

```
<?php
            $PMTA_FILE = file_get_contents("text.txt");
            $lineFromText = explode("\n", $PMTA_FILE);
            $title = "";
            $domain = "";
            foreach($lineFromText as $line){                    
                    $data = explode(";",$line);
                    $domain = $data[0];
                    if (array_key_exists($domain, $domains_seen)){
                        continue;

                    }
                 $domains_seen[$domain] = true; 
                 echo $domain;
                 echo "<br>";
                 echo $data[2]; 
                 echo "<br>";   
          }

?> 
```

但是这段代码的结果：

```
lebuzzdesbonsplans.com 
26608
friendcorp.fr
11343
messengear.fr
9090 
```

我不想要上面的结果，我需要如下的结果：

```
lebuzzdesbonsplans.com 
26608
24798
friendcorp.fr
11343
9856
9283
messengear.fr
9090
8107 
```

请知道的人帮我解决一下，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:48:39.603

You can use

```
$lines = array_reduce(file("text.txt", FILE_IGNORE_NEW_LINES), function ($a, $b) {
    $b = str_getcsv($b, ";");
    $a[$b[0]][] = $b[2];
    return $a;
});

foreach($lines as $k => $values)
{
    echo $k,PHP_EOL;
    echo implode(PHP_EOL, $values);
    echo PHP_EOL;
} 
```

Output

```
lebuzzdesbonsplans.com
26608
24798
friendcorp.fr
11343
9856
9283
messengear.fr
9090
8107 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:43:22.077

```
natsort($lineFromText);
foreach($lineFromText as $line){                    
    $data = explode(";",$line);
    $domain = $data[0];
    if (!array_key_exists($domain, $domains_seen)){
        echo $domain;
        echo "<br>";
    }
    echo $data[2]; 
    echo "<br>";   
    $domains_seen[$domain] = true; 
} 
```

更新：首先对行进行排序 - 这样所有域都将被收集在一起，

# ruby-on-rails - slim-lang 的 if-else 嵌套代码

> ID：13967324
> 
> 赞同：21
> 
> 时间：2012-12-20T07:38:30.900
> 
> 标签：ruby-on-rails

我想根据 slim-lang 中的条件将 css 类分配给 HTML 的一部分

我正在做以下事情

```
- if current_user
  .title
- else
  .title_else 
```

现在我如何编写应该嵌套在上述类之一中的 HTML？我需要在`if`条件和`else`条件下编写 HTML 吗？

原因是应该嵌套在上述类之一中的 HTML 应该进一步向右。但如果我打算更正确，它包括在其他条件下。我现在应该如何处理？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-11T13:44:37.583

这是一个衬里：

```
.thing class=(current_user ? 'large-menu' : 'medium-menu')
  h4 Same content, different class 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-01-09T21:07:09.757

由于您只是在两个属性之间切换，因此[Tiago Franco 的答案](https://stackoverflow.com/a/15950432/3488)肯定足以满足您的目的。但是，还有另一种派上用场的方法。

您可以使用`capture`将 HTML 呈现为局部变量，然后将该内容嵌入到您喜欢的任何控制结构中。所以，如果你的包装内容有点复杂，你会这样做：

```
- shared_content = capture do
  div This is displayed regardless of the wrapper
- if current_user
  | You're logged in!
  .title
    = shared_content
- else
  | You're not logged in!
  .title_else
    = shared_content 
```

如果有可用的 URL，我会经常使用它来将内容包装在链接中：

```
- image = capture do
  img src=image_url
- if url.blank?
  = image
- else
  a href=url = image 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T11:28:30.567

1) 是的，您需要将 HTML 写入两个创建的 div，因为您希望它有所不同。如果您不希望它有所不同，则无需`if`声明！

2）我不太明白你的意思，但这段代码对我来说很好用：

```
- if true
  .title
    h4 True is true!
- else
  .title_else
    h4 True is not true! 
```

这段代码显示了一个`div`带有一个类的`.title`a 和一个`h4`带有其中文本的 a `True is true!`。

**编辑：**好的，现在我明白你的意思了！不可能做这样的事情，因为它不会渲染h4 *！*

```
- if true
  .title
- else
  .title_else

    h4 Same content, different class 
```

我建议您编写一个助手，它允许您渲染部分，然后只从两个条件内渲染该部分。这意味着您只需编写一个部分并调用它两次。

```
- if true
  .title
    = render 'footer'
- else
  .title_else
    = render 'footer' 
```

# javascript - 在 IE 10 中直接下载 CSV 文件 打开文件而不是下载它

> ID：13967326
> 
> 赞同：0
> 
> 时间：2012-12-20T07:38:34.957
> 
> 标签：javascript, html, internet-explorer-10

我有一个从服务器下载文件的链接，如下所示：

```
<a id="downloadCSVFile" runat="server" href="javascript:void(0)" onclick="parent.document.location = 'CSVFile.csv';">Download</a> 
```

我试试这个：

```
<a id="downloadCSVFile" runat="server" href="CSVFile.csv">Download</a> 
```

现在我的问题是**只有 IE10 打开文件而不是下载它**！！！！

**注意：**我使用的是 i-frame

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:59:33.100

问题出在您的服务器上。

在提供文件时，您需要放置正确的标题，特别`Content-Disposition`是以下形式：

```
Content-Disposition: attachment; filename=filename.csv 
```

# java - 如何将char数组写入java socketchannel

> ID：13967330
> 
> 赞同：-4
> 
> 时间：2012-12-20T07:38:53.630
> 
> 标签：java, socketchannel

如何将 char 数组写入 java socketchannel。我无法将 char 数据写入 socketchannel，因为它需要 ByteBuffer。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:50:15.113

Several ways eg

```
char[] c = {'1', '2'};
String str = new String(c);
ByteBuffer bb = Charset.defaultCharset().encode(str); 
```

or

```
ByteBuffer.wrap(str.getBytes()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:45:00.987

您是否尝试过使用ByteBuffer 的[putChar](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/ByteBuffer.html#putChar%28char%29)方法？

```
ByteBuffer buf = ByteBuffer.allocate(1024);

for (char ch : myChars) {
  buf.putChar(ch);
} 
```

# tfs - TFS 2012：容量日历/概述

> ID：13967331
> 
> 赞同：1
> 
> 时间：2012-12-20T07:39:07.790
> 
> 标签：tfs

目前我们正在试验 TFS2012。我们是敏捷新手，但马上就喜欢上了它。无论如何，我们正在寻找的是跨项目/跨冲刺资源规划工具。

更具体地说，如果我同时在多个项目中工作，我需要让我的上司看到我有多忙。非常像这样的东西：

![在此处输入图像描述](../Images/c3f0ea6eee70021f451f6464cd284364.png) 现在我知道 TFS 拥有所需的所有数据。这样的事情存在吗？还是我必须自己开发一个插件？

编辑：由于已经回答了这个问题，我发布了一个[后续详细问题](https://stackoverflow.com/questions/13990421/tfs-11-2012-api-questions-query-capacity-and-days-off)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:23:49.830

我还没有看到任何具有这种功能的东西，但是[使用 api 访问迭代日期](http://blogs.microsoft.co.il/blogs/shair/archive/2012/05/28/tfs-api-part-47-vs11-manage-iterations-dates.aspx)以生成可以导入到交换日历的 iCal 似乎相当容易。

# c++ - 将 PAGE_GUARD 保护设置为大页面

> ID：13967332
> 
> 赞同：4
> 
> 时间：2012-12-20T07:39:07.823
> 
> 标签：c++, winapi

我正在开发 Windows 7 64 位应用程序。

成功分配大页面后，我尝试使用 VirtualProtect 将 PAGE_GUARD 保护标志设置为第一个大页面。这是我正在使用的代码：

```
unsigned long long memSize = 1024*1024*1024;
char* data = (char*)VirtualAlloc(NULL, memSize, MEM_RESERVE|MEM_COMMIT|MEM_LARGE_PAGES, PAGE_READWRITE);

//make the first large page in the allocated buffer be a guard page
DWORD oldProtect;
SIZE_T pageSize = GetLargePageMinimum();
LPVOID startPtr = data;
bool res = VirtualProtect(startPtr, pageSize, PAGE_READWRITE | PAGE_GUARD, &oldProtect); 
```

我永久收到以下错误：GetLastError() 返回错误 487 -“尝试访问无效地址”。

为常规页面 (4KB) 分配和设置 PAGE_GUARD 保护时一切正常。

大页面是否支持保护保护？如果是这样，我的代码有什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T00:22:43.870

大页面不支持防护保护。它没有明确记录，但可以推断出来。引用[MSDN 大页面支持](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366720%28v=vs.85%29.aspx)：

> 内存始终是读/写且不可分页的（始终驻留在物理内存中）。

`PAGE_GUARD`通过在内部设置 PAGE_NOACCESS 来工作，然后在读取或写入页面后将页面重置为所需的保护级别（因为 NOACCESS 它将引发 Windows 内部处理的异常）。由于***必须***读取/写入大页面，因此系统无法按要求实现保护行为。

老实说，我不确定这是 Windows 本身施加的限制，还是我们底层 x86 硬件的遗留限制。我*认为*如果这是硬件限制，那可能是对早期 x86/32 架构的限制。我很肯定它不再适用于任何现代 x64 架构。（例如，较新的 Linux 内核可以透明地使用大页面，而无需编程进行显式请求）

# ruby - 准备好的报表已经存在

> ID：13967333
> 
> 赞同：4
> 
> 时间：2012-12-20T07:39:17.047
> 
> 标签：ruby, postgresql, prepared-statement, postgresql-9.1, pg

我正在尝试将 ruby​​ 中的准备好的语句与 pg gem 一起使用。这就是我的陈述的样子

```
conn.prepare("insert_values", "insert into " + objectName + "(" + headerStr + ") values (" + prep_values + ")")  
conn.exec_prepared("insert_values", arr) 
```

我不断收到错误

准备好的语句 insert_values 已经存在。

我该如何解决？？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T10:29:20.087

尝试运行：

```
conn.exec("DEALLOCATE name_of_prepared_statement") 
```

在您的示例中：

```
conn.exec("DEALLOCATE insert_values") 
```

简单的测试，它在我的 irb 中工作：

```
1.8.7 :001 > require 'rubygems'
  => true
1.8.7 :002 > require 'pg'
  => true
1.8.7 :003 > conn = PGconn.connect(:host => 'localhost', :port => 5912, :user => 'test', :dbname => 'test' )
  => #<PGconn:0x7fe6ac703970> 
1.8.7 :005 > conn.prepare("insert_values", "select * from data where id < $1")
  => #<PGresult:0x7fe6ac6b2e58> 
1.8.7 :006 > conn.prepare("insert_values", "select * from data where id < $1 and id >   $2")
  PGError: ERROR:  prepared statement "insert_values" already exists

  from (irb):6:in 'prepare'
  from (irb):6
1.8.7 :007 > conn.prepare("insert_values", "select * from data where id < $1")
  PGError: ERROR:  prepared statement "insert_values" already exists

  from (irb):7:in 'prepare'
  from (irb):7
1.8.7 :008 > conn.exec("DEALLOCATE insert_values")
  => #<PGresult:0x7fe6ac6738c0> 
1.8.7 :009 > conn.prepare("insert_values", "select * from data where id < $1")
  => #<PGresult:0x7fe6ac665fe0> 
1.8.7 :010 > conn.exec_prepared("insert_values",[200])
  => #<PGresult:0x7fe6ac65d188> 
1.8.7 :011 > conn.exec("DEALLOCATE insert_values")
  => #<PGresult:0x7fe6ac654df8> 
1.8.7 :012 > conn.exec_prepared("insert_values",[200])
  PGError: ERROR:  prepared statement "insert_values" does not exist

  from (irb):12:in 'exec_prepared'
  from (irb):12 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-06T05:03:50.277

这是重用的更好方法`prepare()`，避免`prepared statement "my_statement" already exists`：

```
sql = "select * from my_table where id = $1"
begin
  ActiveRecord::Base.connection.raw_connection.prepare('my_statement', sql)
rescue PG::DuplicatePstatement => e
end

pg_result = ActiveRecord::Base.connection.raw_connection.exec_prepared('my_statement', [my_table_id]) 
```

# jquery - 带有谷歌地方的跨域 Ajax

> ID：13967335
> 
> 赞同：0
> 
> 时间：2012-12-20T07:39:22.807
> 
> 标签：jquery, ajax, cross-domain, jsonp, google-places-api

我对**Google Places API**有疑问。我试图向谷歌发送一个地方，但我收到了 400 错误。

```
 var send = {
    "location": {
      "lat": 25.696183,
      "lng": 8.136408
    },
    "accuracy": 25,
    "name": "Google Shoes!",
    "types": ["Schuhgeschäft"],
    "language": "de"
  }
  var request = $.ajax({
    url: 'https://maps.googleapis.com/maps/api/place/add/json?sensor=false&key={KEY}',
    type: 'POST',
    data: send,
    crossDomain: true,
    dataType: 'JSONP',
    success:function(json){
         alert("Success");
     },
     error:function(){
         alert("Error");
     }
  }); 
```

在调试控制台中，我收到此错误：

```
GET https://maps.googleapis.com/maps/api/place/add/json?sensor=false&key={KEY}&callback=jQuery183005409403680823743_1355988904458&location%5Blat%5D=48.696183&location%5Blng%5D=8.136408&accuracy=25&name=Google+Shoes!&types%5B%5D=Schuhgesch%C3%A4ft&language=de&_=1355988904466 400 (Bad Request) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:09:39.280

您需要输入实际的密钥。另外，我认为它们不支持 JSONP 或 POST。

# python - Pydev 和 *.pyc 文件

> ID：13967342
> 
> 赞同：7
> 
> 时间：2012-12-20T07:39:39.593
> 
> 标签：python, pydev, python-2.5

我正在使用 Eclipse 4.2.1 和 pydev 插件（版本 2.7.1）进行 python 开发。pydev 似乎在预编译的 python 文件（*.pyc 文件）方面存在问题。我正在使用仅提供此类预编译文件的包。

导入模块时，pydev 显示“未解决的导入”错误。并且也没有为此类预编译模块提供工具提示。

但是代码可以毫无错误地执行。

有没有办法“教” pydev，如何处理 *.pyc 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T08:13:00.507

这似乎是一个错误。[在http://sourceforge.net/projects/pydev/forums/forum/293649/topic/4651083](http://sourceforge.net/projects/pydev/forums/forum/293649/topic/4651083)有类似的步骤：

# android - 从内容提供者检索数据并将其显示在其他活动上

> ID：13967343
> 
> 赞同：1
> 
> 时间：2012-12-20T07:39:40.863
> 
> 标签：android, android-contentprovider

我正在研究内容提供者。我为插入数据及其工作编写了代码我想从内容提供者检索数据并将其显示在其他活动中我不知道如何进行任何人都可以帮助我解决示例代码吗？

MainActivity.Java

```
package com.example.cpdemo;
import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.content.ContentUris;
import android.content.ContentValues;
import android.database.Cursor;
import android.database.SQLException;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;
import android.widget.EditText;

 public class MainActivity extends Activity {

@Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button btnAdd = (Button) findViewById(R.id.btnAdd);
    btnAdd.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {

    //---add a book---
   ContentValues values = new ContentValues();                              values.put(BookProvider.TITLE((EditText)findViewById(R.id.txtTitle)).getText().toString());
  values.put(BookProvider.ISBN, ((EditText)findViewById(R.id.txtISBN)).getText().toString());
  Uri uri = getContentResolver().insert(BookProvider.CONTENT_URI, values);
   String str=    getContentResolver().getType(Uri.parse("content://com.contentprovider.demo/books"));
    Toast.makeText(getBaseContext(),str,Toast.LENGTH_LONG).show();
     }
    });
            Button btnRetrieve = (Button) findViewById(R.id.btnRetrieve);
            btnRetrieve.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

            //---retrieve the titles---
            Uri allTitles = Uri.parse(
            "content://com.contentprovider.demo/books/2");

            Cursor c = getContentResolver().query(allTitles, null, null, null, null);
            int i = getContentResolver().delete(allTitles, null, null);
            // instead of that use Loader FreamWork from Android 3.0
}
} 
```

BookProvider.java

```
package com.example.cpdemo;
import android.content.ContentProvider;  
import android.content.ContentUris;
import android.content.ContentValues;
import android.content.Context;
import android.content.UriMatcher;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteQueryBuilder;
import android.net.Uri;
import android.text.TextUtils;
import android.util.Log;

public class BookProvider extends ContentProvider {
public static final String PROVIDER_NAME = "com.contentprovider.demo";
        public static final Uri CONTENT_URI =
        Uri.parse("content://"+ PROVIDER_NAME + "/books");
        public static final String _ID = "_id";
        public static final String TITLE = "title";
        public static final String ISBN = "isbn";
        private static final int BOOKS = 100;
        private static final int BOOK_ID = 200;
        private static final UriMatcher uriMatcher;
        static{
        uriMatcher = new UriMatcher(UriMatcher.NO_MATCH);
        uriMatcher.addURI(PROVIDER_NAME, "books", BOOKS);
        uriMatcher.addURI(PROVIDER_NAME, "books/#", BOOK_ID);
        }
        //---for database use---
        private SQLiteDatabase booksDB;
        private static final String DATABASE_NAME = "Books";
        private static final String DATABASE_TABLE = "titles";
        private static final int DATABASE_VERSION = 1;
        private static final String DATABASE_CREATE =
        "create table " + DATABASE_TABLE +
        " (_id integer primary key autoincrement, "
        + "title text not null, isbn text not null);";
        private static class DatabaseHelper extends SQLiteOpenHelper
        {
        DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }
        @Override
        public void onCreate(SQLiteDatabase db)
        {
        db.execSQL(DATABASE_CREATE);
        }
        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion,
        int newVersion) {
        Log.w("Content provider database",
        "Upgrading database from version " +
        oldVersion + "to "+ newVersion +
        ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS titles");
        onCreate(db);
        }
        }

@Override
public int delete(Uri arg0, String arg1, String[] arg2) {
    int count=0;
    switch (uriMatcher.match(arg0)){
    case BOOKS:
    count = booksDB.delete(DATABASE_TABLE,arg1, arg2);
    break;
    case BOOK_ID:
    String id = arg0.getPathSegments().get(1);
    count = booksDB.delete(DATABASE_TABLE,
    _ID + " = " + id +
    (!TextUtils.isEmpty(arg1) ? " AND (" +arg1 + ')' : ""),arg2);
    break;
    default: throw new IllegalArgumentException("Unknown URI " + arg0);
    }
    getContext().getContentResolver().notifyChange(arg0, null);
    return count;
}
 //Returns the MIME type of the data at the given URI
@Override
public String getType(Uri arg0) {
    Log.d("hello","with in the getType method");
    switch (uriMatcher.match(arg0)){

    //---get all books---
    case BOOKS:

    return "vnd.android.cursor.dir/vnd.contentprovider.books ";
    //---get a particular book---
    case BOOK_ID:
        Log.d("hello","with in the getType method_1");
    return "vnd.android.cursor.item/vnd.contentprovider.books ";
    default:
    throw new IllegalArgumentException("Unsupported URI: " + arg0);
    }
}

@Override
public Uri insert(Uri uri, ContentValues values) {
    Log.d("hello","we are in insert block");
//---add a new book---
long rowID = booksDB.insert(DATABASE_TABLE,"",values);
//---if added successfully---
if (rowID>0)
{
Uri _uri = ContentUris.withAppendedId(CONTENT_URI, rowID);
//---notify register to change the  content URI ---
getContext().getContentResolver().notifyChange(_uri, null);
return _uri;
}
throw new SQLException("Failed to insert row into " + uri);

}

@Override
public boolean onCreate() {
    Context context = getContext();
    DatabaseHelper dbHelper = new DatabaseHelper(context);
    booksDB = dbHelper.getWritableDatabase();
    return (booksDB == null)? false:true;
}

@Override
public Cursor query(Uri uri, String[] projection, String selection,String[] selectionArgs, String sortOrder) {
SQLiteQueryBuilder sqlBuilder = new SQLiteQueryBuilder();
//tablename1 ;;;; id , name
//tablename2 ::: ide ,name
//map.put(tablename1.name,name AS NewName);
//map.put(tablename2.name,name AS exname);

//sqlBuilder.setProjectionMap(map)
//c.getValues(tablename1.name);
//String str = tablename1 left Outer join tablename2 on tablename1.id == tablename2.id;     
sqlBuilder.setTables(DATABASE_TABLE);

if (uriMatcher.match(uri) == BOOK_ID)
//---if getting a particular book---
    Log.d("hi","we are in query block1");
sqlBuilder.appendWhere(_ID + "= " + uri.getPathSegments().get(1));
Log.d("hi","we are in query block2");
//if (sortOrder==null || sortOrder=="")
//sortOrder = TITLE;
Log.d("hi","we are in query block3");
Cursor c = sqlBuilder.query(booksDB,projection,selection,selectionArgs,
null,
null,
null);
Log.d("hi","we are in query block4");
//---register to watch a content URI for changes---
c.setNotificationUri(getContext().getContentResolver(), uri);
return c;
}

@Override
public int update(Uri uri, ContentValues values, String selection,String[] selectionArgs) {
int count = 0;
switch (uriMatcher.match(uri)){
case BOOKS:
count = booksDB.update(DATABASE_TABLE,values,selection,selectionArgs);
break;
case BOOK_ID:
count = booksDB.update(DATABASE_TABLE,values,_ID + " = " + uri.getPathSegments().get(1) +
(!TextUtils.isEmpty(selection) ? " AND (" +selection + ')' : ""),selectionArgs);
break;
default: throw new IllegalArgumentException("Unknown URI " + uri);
}
getContext().getContentResolver().notifyChange(uri, null);
return count;
}
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:29:02.450

I had created a simple demo of Custom ContentProvider with insert, update, delete and fetch data from ContentProvider. [`Here`](https://github.com/lalit3686) is the complete example for the same. I had also used `AssetFileDescriptor` which will allow you to play sound from `assets` folder of this Application from another Application. Also accessing the ContentProvider from another Application. You just have to de-comment the required method and get it working.

# c - 守护进程如何在启动时自动运行

> ID：13967348
> 
> 赞同：1
> 
> 时间：2012-12-20T07:40:03.983
> 
> 标签：c, linux

在这里讨论几个问题。

我有一个守护进程。

**我需要的？**

1）我如何确保在系统启动时调用守护进程。

2）我们对以下内容有任何标准规则还是留给要求？

```
2.a  Behavior of the daemon while it receives the abort, kill signals. does it
     need to restart itself? 
```

请提供提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T07:45:45.513

1.  这取决于您的发行版。有些事情`init`在它启动时会执行 - 它调用的脚本等等 - 你需要挂钩其中之一，或者 - 更理想的是 - 自己提供一个（尝试谷歌搜索“*初始化脚本*”以及名称您定位的发行版）。
2.  对于中止/杀死/等，这将是非常不可取的——近乎恶意。守护进程自动重启。这违背了中止/杀死/等的意义。一个进程——守护进程与否。如果用户想要杀死并重新启动一个进程——不管是否是守护进程——他们可以杀死它然后重新启动它。如果用户希望守护程序重新解析其配置等，则可以使用 SIGHUP。

# drupal - 有人可以帮我吗，这个 div 标签到底在哪里？在哪个模块或主题中？

> ID：13967352
> 
> 赞同：0
> 
> 时间：2012-12-20T07:40:08.193
> 
> 标签：drupal, drupal-7, drupal-theming

下面是代码

```
<div id="block-search-form" class="block block-search contextual-links-region first last odd" role="search">
..........................
............... 
</div> 
```

此块内是搜索表单。此代码位于标题中。我想摆脱 class="" 中的块类，但我找不到这个模板文件。我已经搜索了几个小时，也搜索了整个互联网。有人可以帮帮我吗？我也在使用 Zen Theme

谢谢！！！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T08:02:43.833

首先要做的事情：[devel_themer](http://drupal.org/project/devel_themer)模块可以帮助您找到它。

第二：您正在寻找`block.tpl.php`模板。它可能会被覆盖，因此请查找以`block--`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:29:16.090

block.tpl.php 文件使用的代码如下。

```
<div id="<?php print $block_html_id; ?>" class="<?php print $classes; ?>"<?php print $attributes; ?>>

  <?php print render($title_prefix); ?>
<?php if ($block->subject): ?>
  <h2<?php print $title_attributes; ?>><?php print $block->subject ?></h2>
<?php endif;?>
  <?php print render($title_suffix); ?>

  <div class="content"<?php print $content_attributes; ?>>
    <?php print $content ?>
  </div>
</div> 
```

模板文件不包含使用的类，但您可以使用`hook_preprocess_block()`删除一些类。

```
function mymodule_preprocess_block(&$variables) {
  if (strpos($variables['classes'], 'block-search') !== FALSE) {
    $variables['classes'] = str_replace('block ', '', $variables['classes']);
  }
} 
```

相同的代码可用于主题，在其 template.php 文件中。

# git - 将 Github 存储库克隆到特定的 Windows 文件夹？

> ID：13967353
> 
> 赞同：13
> 
> 时间：2012-12-20T07:40:13.077
> 
> 标签：git, github, github-for-windows

如何更改特定 git 的克隆文件夹？我的**默认存储目录**在这里

```
C:\Users\myPC\Documents\GitHub 
```

但是对于这个 git

```
https://github.com/username/myproject 
```

我想把它放进去

```
C:\somefolder 
```

（**不像**C:\ somefolder **\myproject**而是**C:\somefolder**下的所有文件）

怎么做？我尝试`git clone`了命令行，但 git 没有出现在我的 Github for Windows 客户端中

对不起，基本问题，但无法谷歌或在这里搜索任何答案！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T07:42:53.587

After you have manually cloned the repository with `git clone`, you can manually `Add a local repository` to Github for Windows (I can't take a screenshot right now because I'm on another machine, but it should be relatively easy to find). I honestly don't know, though, if this will then have the full set of features (i.e. if GhfW recognizes it as a Github clone), or if it will have the reduced "regular" set for repositories in general.

As always: Try it and see! :D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-05T03:46:07.717

我尝试过的另一个选项是使用“Create repo”命令在您选择的文件夹中创建一个（空）存储库，然后通过以下方式将其连接到 Github：

1.  打开存储库设置（单击右上角的齿轮，选择“存储库设置...”）
2.  将 HTTPS 克隆 URL 从 Github 页面（在右侧边栏中）复制并粘贴到“主要远程（来源）”字段中
3.  将 repo 与新附加的源同步。您可能需要在 shell 中打开它才能正常工作。

为什么 Github 不让这更容易，我不知道。这个问题发布两年后，仍然很麻烦。有一个默认的存储目录很好，但是有一个“你想把这个保存在哪里？”也很好。选项。

最后，如果你确实克隆了一个 repo 到错误的地方，并想把它移到其他地方：

1.  在资源管理器中打开存储库（如果您不确定它在本地文件系统上的位置，请使用 Windows 版 Github 上的小齿轮图标中的“在资源管理器中打开”选项）。
2.  *将整个*文件夹剪切并粘贴到您想要的任何位置。
3.  返回到 Windows 版 Github。它现在会给您一条错误消息，指出它无法找到存储库。选择“定位”选项，然后自己找到文件夹的新位置。

这实际上可能是在你想要的地方获取 repo 的最简单的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-07T12:45:16.860

在“GitHub for Windows”中，首先转到“工具”->“选项”，在这里选择“默认存储目录”中的文件夹。现在在 GitHub 中，如果您单击“在桌面中克隆”按钮，那么它将克隆到选定的文件夹中

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-29T09:13:31.463

最新的 GitHub 桌面客户端 (3.3.4.0) 提示输入本地目录以将存储库克隆到。这是在将我自己的仓库从 github.com 克隆到本地时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-20T01:37:50.630

我最近下载了适用于 Windows 的 GitHub，但它没有附带 option `Add a local repository`。

我不得不在 Windows 资源管理器中**克隆**并**删除该文件夹。**
该程序为此存储库提供和错误，以及找到新文件夹或删除的选项。
**找到**您想要的文件夹。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-21T15:06:42.463

`cd`只需通过命令更改 git bash 中的工作目录即可。完成后，您可以检查是否要下载/克隆您的 git repo`pwd`命令的目录。现在您可以将 repo 克隆到所需的文件夹中。像往常一样用于`git clone`克隆存储库。

希望这可以帮助。

# vim - vimrc 除了切换 :set paste

> ID：13967356
> 
> 赞同：18
> 
> 时间：2012-12-20T07:40:27.507
> 
> 标签：vim, paste

我正在寻找一种方法来绑定组合键（比如leader+p）以`:set paste`使用相同的组合键打开和关闭。

我知道我可以`:set paste`并且`:set paste!`可以将它们绑定到 2 个不同的键组合，但我希望进行切换。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-20T07:45:15.807

有一个特定的命令可以切换粘贴模式：

```
set pastetoggle=<F10> 
```

例如将其设置为`F10`键。

**编辑**：要将其与领导密钥一起使用，您将使用

```
set pastetoggle=<leader>p 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T07:44:16.410

您可以使用`pastetoggle`粘贴切换。

```
set pastetoggle=<F3> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-16T10:51:18.047

好吧`pastetoggle`，对我没用。

有效的是（在我的.vimrc 中）：

```
" Invert paste when \p is pressed                                                                                                                                                                                                                                                     
:nnoremap <leader>p :set invpaste<CR> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-05T21:09:23.953

# 当心接受的答案！！！！

这个问题的公认答案导致了一个相当隐蔽的错误发生在以“空间”为他们的环境中`<leader>`

* * *

# 问题

假设我想复制以下文本：

`Hello there people!`

随着接受的配置`set pastetoggle=<leader>p`

我会看到以下内容：

`Hello thereeople!`

发生的事情是它吞没了，`<space>p`因为我的领导者恰好是空格键。

这不是“空间”的一个非常罕见的领导键，所以我想我会为那些试图弄清楚这种奇怪行为的人提及它！

* * *

# 更好的解决方案

[https://stackoverflow.com/users/8783819/indrajeet-kumar](https://stackoverflow.com/users/8783819/indrajeet-kumar)建议执行以下操作就像一个魅力：

`:nnoremap <leader>p :set invpaste<CR>`

* * *

# 免责声明

我还没有被堆栈溢出接受到足以发表评论，所以请原谅我给出这个答案。如果有人可以将此作为评论粘贴到顶部帖子，我将非常感激！

# perl - 如何在 PERL 中使用 no lib 命令更改 @INC lib 内容

> ID：13967359
> 
> 赞同：0
> 
> 时间：2012-12-20T07:40:32.190
> 
> 标签：perl

```
if (@arr =~ /env1/) #checking enviroment  
{
   # Want to flush the @INC contents using below no lib
   # --> Command before the perl get the libraries of my choice at the time of compilation 

   no lib "//First/lib/"; #flush INC  
   no lib "//Second/lib/"; #flush INC  
   print log1 "INC before current- @INC\n";

   #set library of my choice with either syntax
   BEGIN{ unshift @INC, "//Third/lib/" };                                    
   # or                                      
   use lib "//third/lib/";

   print log1 "INC after- @INC\n";  
   print log2 "INC after- %INC\n";  
   print log3 map {"$_ => $INC{$_}\n"} keys %INC; 

   use DirHandle;  
   use File::Find;  
   use File::Copy;  

   print map {"$_ => $INC{$_}\n"} keys %INC;
} 
```

我想知道上面的事情可以用更简单的方式来实现。我是否需要包含任何 Perl 模块才能使用（没有 lib 和使用 lib 命令）。这是一个要求，因为脚本在多个环境中运行，并且当其中一个环境关闭时，脚本将停止运行。我想通过传递我选择的库供 perl 使用来实现这一点。

欢迎提出建议。

* * *

**编辑：** 这是实际的代码。

```
if (@temp[arr_index]=~ /env1/) #enviroment 1
                      {              

                     BEGIN{ unshift @INC, "//server1/lib/" }; #server 1 for same app lower enviroment 1
                     BEGIN{ unshift @INC, "//server2/lib/" }; #server 2 for same app lower enviroment 1

                                    use File::Copy; 

                    }

    elsif (@temp[arr_index]=~ /env2/) #enviroment 2

    {
                    BEGIN{ unshift @INC, "//server1/lib/" }; #server 1 for same app lower enviroment 2
                    BEGIN{ unshift @INC, "//server2/lib/" }; #server 2 for same app lower enviroment 2

                                    use File::Copy;
    }

    elsif (@temp[arr_index]=~ /env3/) #enviroment 3

    {
                    BEGIN{ unshift @INC, "//server1/lib/" }; #server 1 for same app lower enviroment 3
                    BEGIN{ unshift @INC, "//server2/lib/" }; #server 2 for same app lower enviroment 3

                                    use File::Copy;
    } 
```

`@INC`-`@INC`对于导致问题的所有环境具有相同的值。希望以上内容能让您的理解更加清晰。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:26:57.013

我建议`@INC`按照您喜欢的环境的顺序将它们全部推入。Perl 将查看`@INC`. [Perlvar](http://perldoc.perl.org/perlvar.html)说：

> 数组 @INC 包含 do EXPR 、 require 或 use 构造查找其库文件的位置列表。

这意味着它将查看从左到右的路径列表，如此处[所述](https://stackoverflow.com/a/8357610/1331451)。因此，您可以将您的库路径`@INC`一个接一个地推入：

```
@!/usr/bin/perl
use strict;
use warnings;

BEGIN {
  use lib 'first/lib', 'second/lib', 'third/lib';
} 
```

如果你现在去 and `require Some::Module`，Perl 将`first/lib`首先查找。如果它在那里找不到它，可能是因为你的环境中不存在该路径（它不会抱怨），Perl 将继续查找`second/lib`，`third/lib`一个接一个。你不必做任何其他事情。

- 另一方面，您在上面的代码中混合了很多编译时间和运行时间。这三个`use`部分和`BEGIN`块将在编译时调用，而不管`if`它们所在的构造。其他所有内容，包括`no lib`调用，只有在匹配为真时才会在运行时调用。有关其工作原理的更详细说明，请参见[perlmod 。](http://perldoc.perl.org/perlmod.html#BEGIN,-UNITCHECK,-CHECK,-INIT-and-END)

# c# - 在 StructureMap Registry 中使用具有依赖关系的 DynamicProxy 拦截器

> ID：13967369
> 
> 赞同：1
> 
> 时间：2012-12-20T07:41:06.943
> 
> 标签：c#, .net, dependency-injection, structuremap, castle-dynamicproxy

我有以下代码：

```
_container = new Container(x => x.AddRegistry<ManagerRegistry>()); 
```

-

```
public class ManagerRegistry : Registry
{
    public ManagerRegistry()
    {
        var proxyGenerator = new ProxyGenerator();

        For<IPersonManager>()
            .EnrichAllWith(t => proxyGenerator.CreateInterfaceProxyWithTarget(
                                t, new AuthenticationInterceptor()))
            .Use<PersonManager>();
    }
} 
```

-

```
public class AuthenticationInterceptor : IInterceptor
{
    public void Intercept(IInvocation invocation)
    {
        if (!HttpContext.Current.User.IsInRole("Monkey"))
            throw new Exception("Only monkeys allowed!");

        invocation.Proceed();
    }
} 
```

它**拦截****StructureMap**中依赖项的创建，并**使用 DynamicProxy**对其进行**装饰**。 现在这工作正常，因为**拦截器**本身没有**依赖项**。

 ******但鉴于以下情况：

```
public class LoggingInterceptor : IInterceptor
{
    public LoggingInterceptor(ILogger logger)
    { 
```

**我**将如何**在 StructureMap 中**进行**接线**？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:44:11.697

这就是我想出的：

```
_container.RegisterInterceptor<IPersonManager, LoggingInterceptor>(); 
```

-

```
public static class ContainerExtensions
{
    public static void RegisterInterceptor<TDependency, TInterceptor>(this IContainer container)
        where TDependency : class
        where TInterceptor : IInterceptor 
    {
        IInterceptor interceptor = container.GetInstance<TInterceptor>();

        if (interceptor == null)
            throw new NullReferenceException("interceptor");

        TypeInterceptor typeInterceptor 
            = new GenericTypeInterceptor<TDependency>(interceptor);

        container.Configure(c => c.RegisterInterceptor(typeInterceptor));
    }
} 
```

-

```
public class GenericTypeInterceptor<TDependency> : TypeInterceptor
    where TDependency : class
{
    private readonly IInterceptor _interceptor;
    private readonly ProxyGenerator _proxyGenerator = new ProxyGenerator();

    public GenericTypeInterceptor(IInterceptor interceptor)
    {
        if (interceptor == null)
            throw new ArgumentNullException("interceptor");

        _interceptor = interceptor;
    }

    public object Process(object target, IContext context)
    {
        return _proxyGenerator.CreateInterfaceProxyWithTarget(target as TDependency, _interceptor);
    }

    public bool MatchesType(Type type)
    {
        return typeof(TDependency).IsAssignableFrom(type);
    }
} 
```

我对结果很满意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:41:50.483

我在这里可能完全错了，但这不是诀窍吗？

```
For<IPersonManager>()
    .EnrichAllWith(t => proxyGenerator.CreateInterfaceProxyWithTarget(
        t, _container.GetInstance<AuthenticationInterceptor>()))
    .Use<PersonManager>(); 
```********

# java - 如何以水平方式加载 JList？

> ID：13967375
> 
> 赞同：2
> 
> 时间：2012-12-20T07:41:23.950
> 
> 标签：java, swing, jlist

如何以`JList`水平方式加载？这是我的代码，我正在尝试显示`JList`与提供的屏幕截图类似的内容。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

import java.awt.BorderLayout;
import java.io.File;
import java.util.ArrayList;
import javax.swing.DefaultListModel;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;

public class Test extends JFrame{

    private JList toolsList;
    private ArrayList<File> toolXmlList;

    public Test()
    {
    toolXmlList = new ArrayList<File>();
    toolXmlList = loadFiles();

    setVisible(true);
    setSize(300,300);
    setTitle("Test Jlist");
    createComponents();

    }

    public void createComponents()
    {
    toolsList = new JList();
    toolsList.setModel(displayDefaltTools());
    toolsList.setLayoutOrientation(javax.swing.JList.VERTICAL_WRAP);
    setLayout(new BorderLayout());
    add(toolsList,BorderLayout.CENTER);
    }

    /**
     * Creates a list model and add the tools to it
     *
     * @return DefaultListModel
     */
    public DefaultListModel displayDefaltTools() {
    DefaultListModel dlistModel = new DefaultListModel();
    String presentation = "";

    for (int i = 0; i < toolXmlList.size(); i++) {
        //System.out.println(idSet.get(i));
        presentation = presentation +  toolXmlList.get(i).getName() ;
        dlistModel.addElement(presentation);
        presentation = "";
    }
    return dlistModel;
    }

    public ArrayList loadFiles()
    {
    ArrayList<File> xmlFiles = new ArrayList<File>();
    File f = new File(".");
    File [] folList = f.listFiles();
    for(int i=0;i<folList.length;i++)
    {
        if(folList[i].getName().startsWith("Tool_Frag"))
        {
            File[] fileList=folList[i].listFiles();
            for(int j=0;j<fileList.length;j++)
            {
                System.out.println(fileList[j].getName());
                xmlFiles.add(fileList[j]);
            }
        }
    }
    return xmlFiles;
    }

    public static void main(String[] args)
    {
    new Test();
    }
} 
```

我正在尝试以这种方式获取 jlist，项目并排显示 ![jlist 布局截图](../Images/cc90d0b6323d70279c234b01497b2f84.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T08:23:40.220

你必须做两件事：

1.  根据[文档](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)设置`LayoutOrientation`为`JList.HORIZONTAL_WRAP`或。`JList.VERTICAL_WRAP`

2.  使列表足够宽，使其每行可以显示多个元素。用于`setVisibleRowCount()`此。

    调用`setPreferredSize()`也可以，但在您使用布局管理器时可能会导致麻烦。

或者，`JTable`如果您必须确保一定数量的行/列（如单行中的所有元素），请考虑使用。

# log4cxx - How to set log4cxx properties without property file?

> ID：13967382
> 
> 赞同：1
> 
> 时间：2012-12-20T07:42:02.617
> 
> 标签：log4cxx

I am using log4cxx with normal way, which provides a property file for log4cxx. Here we can find a reference:

[log4cxx: configuring appender with arguments](https://stackoverflow.com/questions/5487233/log4cxx-configuring-appender-with-arguments)

[Reading Property Info in Log4cxx](https://stackoverflow.com/questions/6172932/reading-property-info-in-log4cxx)

But if I want to set log4cxx in my C++ code without property file, what should I do? I check the log4cxx code and try to set properties by log4cxx::helpers::Properties, here is my sample code:

```
 log4cxx::helpers::Properties properties;
    properties.setProperty(L"log4j.rootLogger",L"DEBUG");
    properties.setProperty(L"log4j.appender",L"ca");
    properties.setProperty(L"log4j.appender",L"fa");

    properties.setProperty(L"log4j.appender.fa",L"org.apache.log4j.FileAppender");
    properties.setProperty(L"log4j.appender.fa.Append",L"false");
    properties.setProperty(L"log4j.appender.fa.File",L"./test.log");
    properties.setProperty(L"log4j.appender.fa.layout",L"org.apache.log4j.PatternLayout");
    properties.setProperty(L"log4j.appender.fa.layout.ConversionPattern",L"%d [%t] %-5p %.16c - %m%n");

    properties.setProperty(L"log4j.appender.ca",L"org.apache.log4j.ConsoleAppender");
    properties.setProperty(L"log4j.appender.ca.layout",L"log4j.appender.ca.layout");
    properties.setProperty(L"log4j.appender.ca.layout.ConversionPattern",L"%d [%t] %-5p %.16c - %m%n");

    log4cxx::PropertyConfigurator::configure(properties); 
```

But my sample code doesn't work. Why? Anyone knows how to initialize log4cxx logger without property file?

Thanks

Water Lin

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:43:14.217

我写了一篇关于这个的帖子：

[http://bigbang.waterlin.org/bang/the-way-to-set-log4cxx-properties-without-using-property-file/](http://bigbang.waterlin.org/bang/the-way-to-set-log4cxx-properties-without-using-property-file/)

添加更多参考。

如果您想同时将日志重定向到文件和控制台，请使用以下代码：

```
#include <log4cxx/logger.h>
#include <log4cxx/helpers/pool.h>
#include <log4cxx/basicconfigurator.h>
#include <log4cxx/fileappender.h>
#include <log4cxx/simplelayout.h>
#include "log4cxx/consoleappender.h"

LoggerPtr logger;

int main() {
    log4cxx::FileAppender * fileAppender = new log4cxx::FileAppender(log4cxx::LayoutPtr(new log4cxx::SimpleLayout()), L"logfile", false);

    log4cxx::ConsoleAppender * consoleAppender = new log4cxx::ConsoleAppender(log4cxx::LayoutPtr(new log4cxx::SimpleLayout()));

    log4cxx::helpers::Pool p;
    fileAppender->activateOptions(p);

    log4cxx::BasicConfigurator::configure(log4cxx::AppenderPtr(fileAppender));
    log4cxx::BasicConfigurator::configure(log4cxx::AppenderPtr(consoleAppender));
    log4cxx::Logger::getRootLogger()->setLevel(log4cxx::Level::getDebug());
    log4cxx::LoggerPtr logger = log4cxx::Logger::getLogger("logger");

    LOG4CXX_INFO(logger,"Created FileAppender appender");

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T04:10:18.977

当面临同样的挑战时，我发现[log4cxx wiki中的代码示例很有帮助。](http://wiki.apache.org/logging-log4cxx/FrequentlyAskedQuestions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T04:00:51.767

您可以使用 ByteArrayInputStream 来设置 log4cxx

```
std::vector<byte> vc;
// copy property file content into vc
log4cxx::helpers::ByteArrayInputStreamPtr bais(
   new log4cxx::helpers::ByteArrayInputStream(vc));
log4cxx::helpers::Properties pp;
pp.load(bais);
log4cxx::PropertyConfigurator::configure(pp); 
```

# c# - 从文件路径中删除动态用户名

> ID：13967388
> 
> 赞同：0
> 
> 时间：2012-12-20T07:42:32.517
> 
> 标签：c#, regex, filepath

我在 C# 中有以下内容。

```
string fileName = @"X:\Users\username\AppData\Local\foo.txt"; 
```

我想执行 a`Regex.Replace`以便我得到以下内容。

```
string fileName = @"X:\Users\AppData\Local\foo.txt"; 
```

最好使用允许驱动器号 ( `X:`) 动态的正则表达式。本质上，我只需要删除 ' `username`' 部分。另外，请注意，用户名只是用户实际姓名的占位符 - 因此可以是 bob 或 larry 或 john 或其他任何名称。正则表达式需要考虑到这一点。

您可以在这里指望的是它总是以`X:\Users\`（其中 X: 可以是`C:`or`D:`等​​）开头，然后是一些字符串，然后是 a `\`，然后是其他一些不是的路径元素重要的。此外，最好在 . 上进行不区分大小写的匹配`users or Users`。

我知道这可以在没有的情况下完成`Regex`，但我需要它以适应仅提供`Regex`支持的更大系统。不支持像`String.Replace`or之类的东西`String.Join`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:01:00.470

你可以试试这个示例：

```
string fileName = @"X:\Users\username\AppData\Local\foo.txt";
Console.Write(Regex.Replace(fileName, @"([A-Z]{1}\:*\\Users\\)(\w+\\)(.*)", "$1$3")); 
```

解释：

1.  `([A-Z]{1}\:\\[Uu]sers\\)`- 这部分正则表达式是第一组字符，`username`在路径中的, 之前

    *   `^`代表行的开头**（删除它以忽略文件名之前的单词）**
    *   `[A-Z]{1}\:\\`代表磁盘根路径。你可以在这里选择你想要的盘符，像这样：`[CDX-Z]{1}`. 注意`{1}`- 这是约束意味着您只需要 1 个大写字母。
    *   `[Uu]sers\\`代表用户目录名称，注意不区分大小写的用户路径的组这是第一个组，`$1`在替换模式中 引用
2.  `(\w+\\)`- 这部分正则表达式是第二组字符，`username`路径中 的 ,
    *   `\w+\\`代表至少一个单词字符和`\`符号。这是第二组，不在替换模式中
3.  `(.*)`- 这部分正则表达式是`username`路径中的, 之后的第三组字符

    *   `.*`代表删除`\`符号后的任何字符。

更新：在现实世界中，我发现了带有空格、unicode 字符和 ~ 的用户名。所以我替换了 2\. 组以包含除符号之外的任何字符`\`。

```
string fileName = @"X:\Users\username\AppData\Local\foo.txt";
Console.Write(Regex.Replace(fileName, @"([A-Z]{1}\:\\[Uu]sers\\)([^\\]*\\)(.*)", "$1$3")); 
```

# java - 我如何将 java 脚本元素 id 分配给 java 代码

> ID：13967389
> 
> 赞同：0
> 
> 时间：2012-12-20T07:42:33.743
> 
> 标签：java, javascript

我试图将一个 java 脚本元素 id 分配给这样的整数，

```
int PAGE_SIZE =%> <script>document.getElementById('t1')</script><%; 
```

并且在我的java代码中为PAGE_SIZE变量分配了一些动态值，现在有了这个id“t1”，我可以动态地将整数值传递给这样的选择框，

```
<select id="t1"> 
```

希望你明白我想说什么。

请建议我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:44:30.183

**基本**-

```
Javascript runs in client browser. and Java runs in server. 
```

您是否尝试在服务器中运行您的 javascript 代码？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:46:57.513

将您的 id 作为参数传输到 url，然后您可以在 servlet || 中对其进行解析 Spring MVC 控制器动作等。查看带参数的 url，例如 www.example.com?param1=1¶m2=2 ..

有一些例子供你参考： [How to pass parameter to servlet](https://stackoverflow.com/questions/234090/how-to-pass-parameter-to-servlet)

[如何在 URL 中传递多个参数？](https://stackoverflow.com/questions/10943635/how-do-i-pass-multiple-parameter-in-url)

阅读有关 HttpRequest 和 HttpResponse - 应该有所帮助。

# jquery - FullCalendar event color to qtip

> ID：13967392
> 
> 赞同：2
> 
> 时间：2012-12-20T07:42:42.750
> 
> 标签：jquery, css, jquery-plugins, fullcalendar, qtip

I'm using the fullcalendar and qtip plugins.
I have events with different colors. All I need to do is to have a tooltip that correspond to the colors of full calendar event. I want the qtip(tooltip) color change depending on the event color.
Is that possible?
Thanks.. :)

![enter image description here](../Images/1a12ec5f66acc80d1023fbdce1fb1682.png)

here are the codes for my qtip

```
 eventRender: function (event, element) {
        element.qtip({
            content: {
                title: { text: event.title },
                text: '<span class="title" style="font-weight:bold;">Start: </span>' + ($.fullCalendar.formatDate(event.start, 'hh:mmtt')) +
                    '<br><span class="title" style="font-weight:bold;">End: </span>' + ($.fullCalendar.formatDate(event.end, 'hh:mmtt')) +
                    '<br><span class="title" style="font-weight:bold;">Where: </span>' + event.location +
                    '<br><span class="title" style="font-weight:bold;">Description: </span>' + event.description
            },
            position: {
                adjust: { screen: true },
                corner: { target: 'bottomMiddle', tooltip: 'topLeft' }
            },
            show: {
                solo: true, effect: { type: 'slide' }, effect: function () {
                    $(this).fadeTo(200, 0.8);
                }
            },
            hide: { when: 'mouseout', fixed: true },
            style: {
                tip: true, // Give it a speech bubble tip
                border: {
                    width: 2,
                    radius: 5,
                    color: '#474968'

                },
                title: {
                    color: '#fff',
                    background: '#9193c4'
                },
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:33:34.980

事件对象接受一个[className](http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)属性。您可以使用它来使用 CSS 为您的事件着色（例如应用“假日”类）。在您的 eventRender 回调中，您可以检查此类的存在（ if (event.className === 'holiday') ... ）并适当地为您的工具提示着色

# javascript - 我可以使用 javascript 从引荐来源网址获取页面标题吗

> ID：13967397
> 
> 赞同：0
> 
> 时间：2012-12-20T07:43:03.600
> 
> 标签：javascript

我们的页面由表格组成。我该如何禁用退格并询问：'你想返回“Referrer Page Title”吗？

我可以禁用退格，但我需要页面标题引荐网址

```
window.onkeydown = keydown;

function keydown()
{
   if(event.keyCode==8){
    if (!confirm("Do you want to go back page?"))
    return false; 
   }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-20T07:50:54.287

You have the `document.referrer` property available to tell you the URL.

The best solution is to send an AJAX request to your server with the referrer, let the server fetch the referrer and get the title, and send back this title to the client.

There, you can ask the confirmation.

Pseudo-code:

```
var xhr = new XMLHttpRequest();
xhr.onload = function() {
    confirm('Do you want to return to ' + xhr.responseText + '?');
};
xhr.open('your_url?referrer=' + document.referrer);
xhr.send(); 
```

About the "disabling backspace" part, you can use the `onbeforeunload` event. Where you'd catch the event and send the ajax request instead.

# javascript - Javascript 应用程序在指定限制停止直接下载

> ID：13967399
> 
> 赞同：0
> 
> 时间：2012-12-20T07:43:15.317
> 
> 标签：javascript

是否有可用的网络应用程序可以在指定限制内​​停止任何直接下载？假设应用程序感知到可下载文件的大小高于 1mb，它将自动取消/停止下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:50:54.870

Due to security policy JavaScript only has access to elements within the window it was launched from and the windows that it has launched.

Download dialogues are launched by the browser itself not by JavaScript. The browser could choose to not launch a download dialogue and launch a rendering window instead. For ex. PDFs in firefox are forced as a download while in chrome they are displayed to the user you. If you had a browser plugin in firefox for PDF rendering you wouldn't get the download dialogue there either.

You can cut the download to whatever length you want it from the server side. Write a script that reads the contents of the file to be transferred, transfer it in chunks and stop when the sum of the sizes of the chunks is greater or equal to the desired size.

# jquery - 如何实现 jqgrid 内联编辑和自定义验证？

> ID：13967401
> 
> 赞同：1
> 
> 时间：2012-12-20T07:43:21.917
> 
> 标签：jquery, jqgrid

我是 jqGrid 的新手，我正在尝试实现以下场景，但我无法以正确的方式获得它。

这是我的场景：

1.  我有三行，例如个人电子邮件、手机号码和 Twitter 网址。它需要有另一个列数据类型，可能是电子邮件、电话和 url 等值。
2.  现在，我将输入需要执行某些验证（如电子邮件格式或电话格式）的每一行的值。
3.  当我按下添加按钮时，它需要创建一个新行并询问我每列的信息，例如列名称和数据类型。
4.  当我输入每一行的值时，它需要根据数据类型列进行验证。
5.  如果我按下编辑按钮，整个网格需要是可编辑的，并且需要在编辑事件触发后对每个单元格执行验证。

我的代码：

```
 $(document).ready(function () {
        //debugger;
        var val;
        var lastsel2;
        jQuery("#list").jqGrid({
            datatype: "local",
            height: 250,
            width: 770,
            colNames: ['Mechanism', 'Data Type', 'Value', 'Active Flag', 'Created'],
            colModel: [
            { name: 'Mechanism', index: 'Mechanism', width: 175, editable: true },
            { name: 'DataType', index: 'Datatype', width: 175, editable: true },
        { name: 'Value', index: 'Value', width: 105, editable: true, editrules: { custom: true, custom_func: validate} },
        {name: 'ActiveFlag', width: 112, formatter: "checkbox", formatoptions: { disabled: false }, editable: true, edittype: "checkbox" },
        { name: 'Created', index: 'Created', width: 124}]
        });
$('#save').live('click', function () {
            var ids = $("#list").jqGrid('getDataIDs');
            for (var i = 0; i < ids.length; i++) {
                var val = $("#list").jqGrid('getCell', ids[i], 'Value');
                var dataType = $("#list").jqGrid('getCell', ids[i], 'DataType');
                $('#colValue').html(val + dataType);
                var va = $('#colValue').find('input[name=value]').val();
                var daT = $('#colValue').find('input[name=Datatype]').attr('value');

                switch (daT) {
                    case "Phone":
                        if (!$.jgrid.isEmpty(va)) {

                        }
                        else
                            alert("Phone Number Field is required");
                        break;
                    case "Email":
                        if (!$.jgrid.isEmpty(va)) {

                        }
                        else
                            alert("Email Field is required");
                        break;
                    case "URL":
                        if (!$.jgrid.isEmpty(va)) {
                        }
                        else
                            alert("URL Field is required")
                        break;
                    case "":
                        alert("Fields are not null")
                }
            }
        });

        $('input[value=Edit]').click(function () {
            var ids = $('#list').jqGrid('getDataIDs');
            for (var i = 0; i < ids.length; i++) {
                //$('#list').jqGrid('editRow', ids[i]);
                jQuery('#list').jqGrid('editRow', ids[i], true);
            }
        });
        var data = [{ Mechanism: "Mobile Phone", DataType: "Phone" }, { Mechanism: "Personal Email", DataType: "Email" }, { Mechanism: "Facebook URL", DataType: "URL"}];
        for (var i = 0; i <= data.length; i++)
            jQuery("#list").jqGrid('addRowData', i + 1, data[i]);
        val = i; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:50:50.547

如果我理解您的问题，这一切都归结为验证，可以添加添加编辑功能，然后调用自定义验证。

前任：

```
jQuery("#list").navGrid('#pager', {
    add: true,
    addtext: 'Add',
    edit: true,
    edittext: 'Edit',
    del: true,
    deltext: 'Del',
    search: true,
    searchtext: 'Find',
    refresh: true
}, //options
{
    reloadAfterSubmit: true,
    beforeSubmit: validate_edit
}, // edit options
{
    reloadAfterSubmit: true,
    beforeSubmit: validate_add
}, // add options
{}, //del options
{} //search options
); 
```

验证（根据您的需要可能不同或相同）

```
function validate_add(posdata, obj) {//validation code}

function validate_edit(posdata, obj) {//validation code} 
```

参考： [jqgrid 添加和编辑时的不同编辑规则](https://stackoverflow.com/questions/6095069/jqgrid-different-editrules-for-when-adding-and-editing)

最后，它会真正清理一堆你编写的试图与网格交互以进行验证的代码。

# perl - 安装 Class::Inspector Perl 模块

> ID：13967415
> 
> 赞同：0
> 
> 时间：2012-12-20T07:44:29.520
> 
> 标签：perl, perl-module

我是 Windows 7（64 位）用户。我试图`Class::Inspector`在 Perl 中安装模块。但是它要求`Nmake15.exe`. 我尝试下载exe，运行它时，会弹出一条消息，说明

*由于与 64 位版本的 Windows 不兼容，程序或功能`Nmake15.exe`无法启动或运行*

有人可以就此提出建议吗？谢谢。这是 .com 所需的必备模块`SOAP::Lite`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:11:07.270

nmake 1.5 已经很老了，要获得现代版本需要安装大量的 Visual Studio 套件。作为替代方案，您可以使用同样有效的[dmake](http://code.google.com/a/apache-extras.org/p/dmake/)。

此外，您的[ActivePerl](http://www.activestate.com/activeperl/downloads)版本已经过时了。我相信最近的版本现在附带了一个 make 程序，并且在 Windows 上运行得更好。

最后，[Strawberry Perl](http://strawberryperl.com/)在许多方面是 Windows 上更好的 Perl 发行版。它带有一个完整的 Perl 模块构建工具链，包括 dmake 和一个 C 编译器。您应该能够使用其预配置的 CPAN shell 在 CPAN 上安装大多数模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:17:13.810

Class::Inspector 是一个纯 Perl 模块。因此，您可以通过将 lib/ 目录的内容复制到您的 @INC 路径之一来轻松安装它。

不过，这并不能解决您安装模块的一般问题。这就是为什么您应该安装 64 位版本的 nmake。通过安装 Windows SDK，nmake 实用程序将在“C:\Program Files (x86)\Microsoft Visual Studio...\VC\bin\amd64\nmake.exe” ( [microsoft.com](http://connect.microsoft.com/VisualStudio/feedback/details/585739/where-to-find-nmake-exe-for-64-bit-used-on-visual-studio-2008-professional-edition) ) 中可用。

# c# - 重音元音在 C# WebClient 中出现奇怪的字符

> ID：13967418
> 
> 赞同：1
> 
> 时间：2012-12-20T07:44:39.477
> 
> 标签：c#, .net, c#-4.0, httprequest, webclient

我使用 Webclient 开发了一个网站数据获取器应用程序。它工作正常。但是我

面临大问题，关于重读元音。我的意思是当我下载字符串时

包含在应用程序中未正确显示的重音元音。

请看我的代码

```
public string DownloadByWebClient(string url)
    {
        string html = string.Empty;
        try
        {
            using (WebClient client = new WebClient())
            {
                try
                {
                    client.Headers.Add("User-Agent", "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)");
                    html = client.DownloadString(url);
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                    return "";
                }
                finally
                {
                    client.Dispose();
                }
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
            return "";
        }
        return "";
    } 
```

请看我下面的图片。

在网页中。

![在此处输入图像描述](../Images/dc08e38ca679576185836e4626b486fd.png)

应用中

![在此处输入图像描述](../Images/b797d73f091e75c7e4ae4048781909ed.png)

我一无所知。请帮忙。

# android-screen - 在默认 android 手机应用程序中禁用屏幕旋转

> ID：13967421
> 
> 赞同：0
> 
> 时间：2012-12-20T07:44:56.690
> 
> 标签：android-screen

我正在使用默认的 android 电话应用程序。当我拨打某个号码或在平板电脑模式下拨打电话时，屏幕会垂直旋转。所以我想删除垂直屏幕旋转。有人知道请帮助我..提前谢谢..请回答这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T07:51:09.690

我得到了答案。在电话应用程序的 manifest.xml 中，我将方向更改为横向。之前它是纵向的。

```
<activity android:name="InCallScreen"
        android:theme="@style/Theme.InCallScreen"
        android:label="@string/phoneIconLabel"
        android:excludeFromRecents="true"
        android:launchMode="singleInstance"
        android:screenOrientation="landscape"
        android:configChanges="orientation|screenSize|keyboardHidden|uiMode"
        android:exported="false">
    </activity> 
```

# c - 合并排序，奇怪的行为

> ID：13967422
> 
> 赞同：-1
> 
> 时间：2012-12-20T07:45:00.257
> 
> 标签：c, algorithm, mergesort

这就是我想要做的。有 3 个数组，cost[] node1[] 和 node2[]。这些整体对应于带有 node1[i]、node2[i] 和 cost[i] 的图的边，指定有一条边从顶点 node1[i] 到 node2[i]，边权重为 cost[i] .

我正在尝试根据它们的权重对这些边进行排序，即使用合并排序对 cost[] 数组进行排序。但是，每当我更改 cost[] 数组中的条目时，我也想更改 node1 和 node2 数组中的相应条目，因为即使是图形的节点也必须修改。即如果 node1[]=1,2,3 和 node2[]=2,3,1 cost[]={7 4 8} 那么在对成本数组进行排序之后，node1 和 node2 应该看起来像 node1[]=2,1 ,3 节点 2[]=3,2,1。和成本[]=4,7,8

这是我的代码。

```
 #include<stdio.h>
        #include<stdlib.h>
        int merge_sort(int arr[],int low,int high,int node1[],int node2[])

        {

        int mid;

        if(low<high) {

        mid=(low+high)/2;

        // Divide and Conquer

        merge_sort(arr,low,mid,node1,node2);

        merge_sort(arr,mid+1,high,node1,node2);

        // Combine

        merge(arr,low,mid,high,node1,node2);

        }

        return 0;

        }

        int merge(int arr[],int l,int m,int h,int node1[],int node2[])

        {

        int arr1[80000],arr2[80000]; // Two temporary arrays to
        int arr3[70000],arr4[70000];
        int arr5[70000],arr6[70000];
        int n1,n2,i,j,k;

        n1=m-l+1;

        n2=h-m;

        for(i=0; i<n1; i++)
        {

        arr1[i]=arr[l+i];
        arr3[i]=node1[l+i];
        arr5[i]=node2[l+i];

        }
        for(j=0; j<n2; j++)
        {
        arr2[j]=arr[m+j+1];
        arr4[i]=node1[m+j+1];
        arr6[i]=node2[m+j+1];
        }

        arr1[i]=99999; // To mark the end of each temporary array
        arr2[j]=99999;
        arr3[i]=99999;
        arr4[j]=99999;
        arr5[i]=99999;
        arr6[j]=99999;

        i=0;

        j=0;

        for(k=l; k<=h; k++) { //process of combining two sorted arrays

        if(arr1[i]<=arr2[j])
        {

        arr[k]=arr1[i++];
        //node1[k]=arr3[i++]; COMMENTED LINES!!!!!!!!!!!
        //node2[k]=arr5[i++];

        }
        else
        {
        arr[k]=arr2[j++];
        //node1[k]=arr4[j++]; COMMENTED LINES!!!!!!!!~!
        //node2[k]=arr6[j++];
        }
        }
        return(0);
        }

        int main(void)
        {
            int i,j,n,vert1,vert2,weight;
            scanf("%d",&n);
            int adjmat[n+1][n+1],cluster[n+1][n+1];
            int *cost,*node1,*node2;
            node1=malloc(sizeof(int)*1000000);
            node2=malloc(sizeof(int)*1000000);
            cost=malloc(sizeof(int)*1000000);
            for(i=0;i<n+1;i++)
                for(j=0;j<n+1;j++)
                {
                    adjmat[i][j]=0;
                    cluster[i][j]=0;
                }
            for(i=1;i<n+1;i++)
                cluster[i][0]=i;
            for(i=1;i<(n+1)*(n+1);i++)
            {
                scanf("%d %d %d",&vert1,&vert2,&weight);

                node1[i]=vert1;
                node2[i]=vert2;
                cost[i]=weight;
                if(node1[i]==node1[i-1] && node2[i]==node2[i-1] && cost[i]==cost[i-1])
                    break;
                //  printf("%d %d %d\n",node1[i],node2[i],cost[i]);
                adjmat[vert1][vert2]=weight;
                adjmat[vert2][vert1]=weight;
            }
            printf("\n%d\n",i);
            merge_sort(cost,1,124751,node1,node2);
            for(j=1;j<i;j++)
                printf("%d %d %d\n",node1[j],node2[j],cost[j]);
            return(0);
        } 
```

每当我评论合并函数中的行时，代码都会设法对成本数组进行排序。但是，每当我取消注释这些行时，一切都等于 0。即 node1 node2 和成本数组的所有整数都是 0。谁能告诉我为什么会这样？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:48:48.753

您可能已经忘记注意操作的副作用`i++`。在那个地方根本不需要处理副作用，不要那样做。

# iconv - iconv 在 linux (C++) 中无法正常工作

> ID：13967424
> 
> 赞同：0
> 
> 时间：2012-12-20T07:45:08.780
> 
> 标签：iconv

我想将字符串从 1252 字符代码集转换为 UTF-8。为此，我在基于 linux 平台的 c++ 应用程序开发中使用了 iconv 库。

我使用了 API iconv() 并转换了我的字符串。

我的输入中有一个字符 è。UTF-8 也支持这个字符。所以当我的转换结束时，我的输出也应该包含相同的字符 è。

但是当我看到输出时，字符 è 被转换为 Ã¨ 这是我不想要的。

还有一点是，如果转换器发现任何未知字符，则应自动将其替换为 UTF-8 (FFFD) 的默认替换字符，这不会发生。

如何使用库 iconv 实现上述两点。

我使用以下 API 来转换字符串

1)iconv_open("UTF-8","CP1252")

2)iconv() - 传递所需参数

3)iconv_close(cd)

任何人都可以帮我解决这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T16:08:02.527

请使用它来替换无效的 utf-8 字符。

```
iconv_open("UTF-8//IGNORE","CP1252") 
```

# python - ImportError：没有模块名为 6

> ID：13967428
> 
> 赞同：122
> 
> 时间：2012-12-20T07:45:24.497
> 
> 标签：python, module, importerror

我正在尝试构建 OpenERP 项目，完成依赖项。它现在给出这个错误

```
Traceback (most recent call last):
  File "openerp-client.py", line 105, in <module>
  File "modules\__init__.pyo", line 23, in <module>
  File "modules\gui\__init__.pyo", line 22, in <module>
  File "modules\gui\main.pyo", line 33, in <module>
  File "rpc.pyo", line 29, in <module>
  File "common\__init__.pyo", line 22, in <module>
  File "common\common.pyo", line 26, in <module>
  File "tools\__init__.pyo", line 28, in <module>
  File "dateutil\relativedelta.pyo", line 12, in <module>
ImportError: No module named six 
```

有人可以指导出了什么问题以及如何解决吗？？？

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-12-20T08:19:43.467

您可能没有`six`安装 Python 模块。你可以在[pypi](http://pypi.python.org/pypi/six)上找到它。

要安装它：

```
$ easy_install six 
```

（如果您已[`pip`](https://pypi.python.org/pypi/pip/)安装，请`pip install six`改用）

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2017-03-30T18:09:18.493

如果安装了 pip“说”六，但您仍然得到：

`ImportError: No module named six.moves`

尝试重新安装六个（为我工作）：

```
pip uninstall six
pip install six 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2018-08-14T09:22:41.143

对于 Mac OS X：

```
pip install --ignore-installed six 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2016-11-23T08:41:57.880

在 Ubuntu 和 Debian 上

```
apt-get install python-six 
```

成功了。

`sudo apt-get install python-six`如果您收到“权限被拒绝”的错误消息，请使用。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-06-06T15:29:41.587

```
pip install --ignore-installed six 
```

来源：1233 点赞[此评论](https://github.com/pypa/pip/issues/3165#issuecomment-146666737)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-06-25T08:26:07.310

在 Ubuntu Bionic (18.04) 上，已经为 python2 和 python3 安装了六个，但我在启动 Wammu 时出错。@3ygun 解决方案为我解决了

```
ImportError: No module named six 
```

启动 Wammu 时

如果它发生在 python3 程序中，则有六个

```
pip3 install six 
```

如果你没有 pip3：

```
apt install python3-pip 
```

在 Ubuntu 下用**sudo**！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-04-20T16:37:14.103

我做了以下来解决上述问题。我在尝试运行构建的 exe 时遇到了上述问题，即使我使用 pyinstaller 成功构建了 exe。我在 Windows 10 上做到了这一点。

1.  转到[https://pypi.org/project/six/#files](https://pypi.org/project/six/#files)
2.  下载“6-1.14.0.tar.gz (33.9 kB)”
3.  解压缩，复制并粘贴“six.py”到你的源目录。
4.  将“六”模块导入您的源代码（导入六）
5.  运行源脚本。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-10-28T01:03:50.353

在我的情况下，为 python 2.7 和 3.7 安装了 6 个，并且两者都`pip install six`报告`pip3 install six`为已安装，而我仍然有应用程序（特别是 apt 程序本身）抱怨缺少 6 个。

解决方案是专门为 python3.6 安装它：

```
/usr/bin/python3.6 -m pip install six 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-20T16:56:48.303

对我来说，问题不在于`six`它`rst2pdf`本身。 `head -1 $(which rst2pdf)`(3.8) 不匹配`python3 --version`(3.9)。我的解决方案：

```
pip3 install rst2pdf 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-13T16:24:15.530

Ubuntu 18.04.5 LTS（仿生海狸）：

```
apt --reinstall install python3-debian
apt --reinstall install python3-six 
```

如果 /usr/bin/chardet3 失败并出现错误“ModuleNotFoundError: No module named 'pkg_resources'”：

```
apt --reinstall install python3-pkg-resources 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-10-20T08:10:22.870

`six`是一个 Python 模块。该`python`命令可以参考 Python2。

您可能混淆了 Python2 和 Python3，或者您混淆了此模块适用的 Python 版本号。`six`Python2 与`six`Python3 不同。

如果`six`通过 pip 仍然无法安装，请考虑改为运行 Python3。

# asp.net - 奇怪的问题：ASPX 页面将 javascript 内容显示为文本

> ID：13967435
> 
> 赞同：1
> 
> 时间：2012-12-20T07:45:49.510
> 
> 标签：asp.net, browser, bandwidth

在一个用户的机器上，一个 ASPX 页面突然将 JavaScript 代码显示为页面上的文本。页面的原始内容也显示半生不熟和破碎。用户使用的是 IE 浏览器。虽然我不能在这里发布页面的内容，但我会尽可能准确地描述它。在地址栏和页面的实际开头之间，有一个显示一些 JavaScript 文本的横截面。该文本似乎是 ASP .NET 为验证器生成的自动 JavaScript。JavaScript 文本似乎是在此页面上使用的用户控件中使用的验证器。这个问题只是一次性发生的。现在该页面向同一用户显示 OK。尽管我确信这一定是带宽问题，但我没有证据证明这一点，也无法重现该问题。还有“某人” 声称这可能是一次黑客攻击。有没有人遇到过类似的问题？无论如何，有没有最终证明这是一个带宽问题，与服务器上的代码或任何东西无关？

# ffmpeg - ffmpeg 创建多个输出视频，在 gt(scene,x) 上分割

> ID：13967437
> 
> 赞同：5
> 
> 时间：2012-12-20T07:45:54.733
> 
> 标签：ffmpeg, video-encoding

我想通过在ffmpeg中选择场景，根据检测每个镜头的第一帧将一个视频分成多个部分。

以下条目记录场景帧并从中创建照片马赛克。这向我表明选择部分是功能性的，但我想用它来创建许多单独的视频，每个场景都有自己的视频文件。

```
ffmpeg -i video.mpg -vf select='gt(scene\,0.2331)','scale=320x240,tile=1x100' -frames:v preview.png 
```

谢谢你。我想我已经很接近了，我愿意接受任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:43:22.853

您绝对应该使用 -ss（流开始时间）和 -t（从开始时间开始的视频秒数）选项，您能获得每个场景帧的时间吗？那你就可以走了。

# c - 在 Windows 中使用 C 创建三个新进程时崩溃

> ID：13967441
> 
> 赞同：1
> 
> 时间：2012-12-20T07:46:12.423
> 
> 标签：c, process, command-line-arguments

我正在使用以下命令在 C 中创建三个子进程：

```
 typedef struct{
        STARTUPINFO si;
        PROCESS_INFORMATION pi;
    }PROCESS_PARAMS;

    PROCESS_PARAMS pChildren[3];

    wchar_t *szCmdline[3] = {L"nmtest -s \"TS\" -r \"Test DMR\" -tLD -d \" /child1/tclient\"",
 L"nmtest -s \"TS\" -r \"Test DMR\" -tLD -d \" /child2/tclient\"", 
L"nmtest -s \"TS\" -r \"Test DMR\" -tLD -d \" /child3/tclient\""};

    for (i=0; i<3; i++)
                {
                    pChildren[i].si.cb = sizeof(pChildren[i].si);
                    GetStartupInfo(&pChildren[i].si);
                    ZeroMemory(&pChildren[i].pi, sizeof(pChildren[i].pi));

                    // Start the child processes.
                    CreateProcess(NULL,   // No module name (use command line)
                                  szCmdline[i],          // Command line
                                  NULL,           // Process handle not inheritable
                                  NULL,           // Thread handle not inheritable
                                  FALSE,          // Set handle inheritance to FALSE
                                  0,              // No creation flags
                                  NULL,           // Use parent's environment block
                                  NULL,           // Use parent's starting directory
                                  &pChildren[i].si,            // Pointer to STARTUPINFO structure
                                  &pChildren[i].pi);         // Pointer to PROCESS_INFORMATION structure
                } 
```

但是代码在创建新进程时崩溃了，我怀疑命令行参数有问题。但我不确定出了什么问题。有人可以帮我吗？谢谢。

PS：当我以以下方式给出它时，它会起作用：

```
wchar_t szCmdline[] = L"nmctest -s \"TwonkyServer[julka]\" -r \"NMC Test DMR [julka960]\" -tLDMR -d \" /child1/twonkyclient\""; 
```

然后在我做：

```
CreateProcess(NULL,   // No module name (use command line)
                                  szCmdline,          // Command line
                                  NULL,           // Process handle not inheritable
                                  NULL,           // Thread handle not inheritable
                                  FALSE,          // Set handle inheritance to FALSE
                                  0,              // No creation flags
                                  NULL,           // Use parent's environment block
                                  NULL,           // Use parent's starting directory
                                  &pChildren[i].si,            // Pointer to STARTUPINFO structure
                                  &pChildren[i].pi); 
```

请注意，我给出的是 szCmdline 而不是 szCmdline[i]。然后它可以工作，但我不确定最顶层代码中的问题何时出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:03:15.437

从[文档中`CreateProcess()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425.aspx)：

> 此函数的 Unicode 版本 CreateProcessW 可以修改此字符串的内容。因此，此参数不能是指向只读内存的指针（例如 const 变量或文字字符串）。如果此参数是一个常量字符串，该函数可能会导致访问冲突。

看来您正在使用 Unicode 版本并传入指向字符串文字的指针（不可修改）。

这对于函数的版本来说不是问题，`CreateProcessA()`因为它在内部将 ANSI 命令行转换为 Unicode，并且转换后的字符串最终会出现在可修改的内存中。

在有效的版本中，您将字符串初始化为可修改的数组并传递该数组的地址，而不是传递指向字符串文字的指针。

有关这种情况的一些历史记录，请参阅[Raymond Chen 的“为什么 CreateProcess 函数会修改其输入命令行？”](http://blogs.msdn.com/b/oldnewthing/archive/2009/06/01/9673254.aspx) .

如果您需要更多帮助，请使用示例代码：

```
// a helper function to duplicate a unicode string
wchar_t* xwcsdup( wchar_t const* s)
{
    wchar_t* p = _wcsdup(s);

    if (!p) {
        abort();    // or however you want to fail miserably
    }

    return p;
}

// and your loop to create the processes...

for (i=0; i<3; i++)
{
    wchar_t* cmdline = xwcsdup(szCmdline[i]);

    pChildren[i].si.cb = sizeof(pChildren[i].si);
    GetStartupInfo(&pChildren[i].si);
    ZeroMemory(&pChildren[i].pi, sizeof(pChildren[i].pi));

    // Start the child processes.
    CreateProcess(NULL,   // No module name (use command line)
                  cmdline,        // Command line
                  NULL,           // Process handle not inheritable
                  NULL,           // Thread handle not inheritable
                  FALSE,          // Set handle inheritance to FALSE
                  0,              // No creation flags
                  NULL,           // Use parent's environment block
                  NULL,           // Use parent's starting directory
                  &pChildren[i].si,            // Pointer to STARTUPINFO structure
                  &pChildren[i].pi);         // Pointer to PROCESS_INFORMATION structure

    free(cmdline);
} 
```

# php - Magento：如何编辑管理面板销售订单列表表？

> ID：13967443
> 
> 赞同：0
> 
> 时间：2012-12-20T07:46:16.843
> 
> 标签：php, magento

我想知道是否有人可以帮助我，因为我真的很困惑，到目前为止花了大约 2 天的时间。

我想知道如何在管理销售订单表中编辑/添加列/操作数据，例如管理面板中的订单列表..

什么模板文件控制这个表格的格式？

我也想这样做而不编辑核心。

任何帮助或建议将不胜感激！

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-16T17:20:07.623

<--为管理员启用模板提示-->

```
app/code/core/Mage/Core/etc/system.xml 
```

在第 517 行周围查找模板路径提示将 0 更改为 1
查找将块名称添加到第 526 行周围的提示将 0 更改为 1

这将允许您查看管理面板的模板提示和块名称。然后，您将能够确定要编辑的文件。

System->Config->Developer->Debug（必须在默认存储中）

最佳做法是在编辑之前将其移动到社区或本地文件夹中，但由于某种原因，这不适用于 system.xml 文件。所以我只是将此作为升级过程中的一个步骤。

我知道这是一个旧帖子，但万一有人遇到这个，它可能会帮助他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:42:37.057

我建议你看看 EnhancedGrid 模块： http: [//www.magentocommerce.com/magento-connect/enhanced-admin-product-grid.html](http://www.magentocommerce.com/magento-connect/enhanced-admin-product-grid.html)

[您可以在此处](http://connect20.magentocommerce.com/community/TBT_Enhancedgrid/1.3.2.1/TBT_Enhancedgrid-1.3.2.1.tgz)下载源代码。此模块还修改销售网格（包含所有订单）。只需安装此模块，您就有可能实现您正在寻找的东西；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:44:22.263

我想向你推荐一些关于这个问题的文章。其中之一是我的：

[http://www.atwix.com/magento/customize-orders-grid/](http://www.atwix.com/magento/customize-orders-grid/)

[http://www.atwix.com/magento/add-column-to-customers-grid-alternative-way/](http://www.atwix.com/magento/add-column-to-customers-grid-alternative-way/)

# c# - 重新加载已使用 DllImport 导入的 DLL

> ID：13967448
> 
> 赞同：7
> 
> 时间：2012-12-20T07:46:50.680
> 
> 标签：c#, .net, dllimport

我的 C# 应用程序 (.NET Framework 4.0) 使用以下代码导入外部非托管 DLL：

```
[DllImport("myDLL.dll"), EntryPoint="GetLastErrorText"]
private static extern IntPtr GetLastErrorText(); 
```

不幸的是，第三方 DLL 中似乎存在错误。作为一种解决方法，我需要卸载 DLL 并在之后重新加载它。我怎样才能做到这一点？我看过几篇文章，但它们都在谈论托管 DLL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T08:00:33.323

您可以围绕管理对它的访问的库编写一个包装器。然后您可以使用本机方法来调用该库。看看[这篇](http://blogs.msdn.com/b/jonathanswift/archive/2006/10/03/dynamically-calling-an-unmanaged-dll-from-.net-_2800_c_23002900_.aspx)博文。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T08:01:58.760

我认为您需要继续使用 LoadLibrary/FreeLibrary/GetProcAddress，如下面的[dllimport 和 getProcAddress 之间的差异](https://stackoverflow.com/questions/3242331/difference-between-dllimport-and-getprocaddress)：缩写示例（无错误处理）所示：

```
 [UnmanagedFunctionPointer(CallingConvention.StdCall)]
   private delegate Bool BarType(Byte arg); 
   ...
   IntPtr pDll= LoadLibrary("foo.dll");
   IntPtr pfunc = GetProcAddress(pDll, "bar");
   BarType bar = (BarType)Marshal.GetDelegateForFunctionPointer(pFunc, typeof(BarType));
   var ok = bar(arg);
   FreeLibrary(pDll); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T08:00:21.707

您可以尝试使用（来自 WinAPI）来执行此操作，而不是使用`DllImport`导入 DLL，`LoadModule`然后使用`GetProcAddress`并`FreeLibrary`执行您需要的操作，即调用其中的函数并卸载/重新加载它。

[看这里。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682599%28v=vs.85%29.aspx)

如果您使用 C++/CLR 将 C# 和非托管 DLL 粘合在一起，可能会更漂亮/易于管理。

# asp.net - ASP.NET：如何指定 ListItem 的文本颜色？

> ID：13967449
> 
> 赞同：0
> 
> 时间：2012-12-20T07:46:51.687
> 
> 标签：asp.net, listitem

如何在以下代码中指定 ListItem 的文本颜色？谢谢。

```
<asp:CheckBoxList id="check1" AutoPostBack="True"
TextAlign="Right" OnSelectedIndexChanged="Check"
runat="server">

<asp:ListItem>Item 1</asp:ListItem>
<asp:ListItem>Item 2</asp:ListItem>
<asp:ListItem>Item 3</asp:ListItem>
<asp:ListItem>Item 4</asp:ListItem>

</asp:CheckBoxList> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:52:38.577

尝试类似的东西

```
<asp:ListItem style="color:blue">Item 1</asp:ListItem> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:34:47.327

COLD TOLD 的答案看起来不错，但是如果您需要为*所有*项目指定颜色，请改为：

```
<head runat="server">
    <title></title>
    <style type="text/css">
        .checkboxList label
        {
            color:Red;
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:CheckBoxList CssClass="checkboxList" ID="check1" AutoPostBack="True" TextAlign="Right"
            runat="server">
            <asp:ListItem>Item 1</asp:ListItem>
            <asp:ListItem>Item 2</asp:ListItem>
            <asp:ListItem>Item 3</asp:ListItem>
            <asp:ListItem>Item 4</asp:ListItem>
        </asp:CheckBoxList>
    </div>
    </form>
</body> 
```

# android - android键盘隐藏布局

> ID：13967450
> 
> 赞同：0
> 
> 时间：2012-12-20T07:46:53.283
> 
> 标签：android, android-layout, android-softkeyboard

我有一个相对布局，当软键盘打开时应该向上移动。在我不得不将应用程序全屏显示之前，一切正常。我设置后

```
android:theme="@android:style/Theme.Holo.NoActionBar.Fullscreen" 
```

布局不会向上移动。它保持在原位，键盘位于其顶部。我试过了，`android:windowSoftInputMode="adjustPan|adjustResize"`但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T07:11:03.630

我找到了我的答案。这个问题的答案可以在这里找到：

[Android如何在软键盘可见时在全屏模式下调整布局](https://stackoverflow.com/questions/7417123/android-how-to-adjust-layout-in-full-screen-mode-when-softkeyboard-is-visible)

# python - 在 Python 中使用漂亮的汤在 html 页面上调用“点击事件”的问题

> ID：13967454
> 
> 赞同：4
> 
> 时间：2012-12-20T07:47:04.510
> 
> 标签：python, python-2.7, onclick, pyqt, beautifulsoup

我正在尝试抓取网页上所有项目的名称，但默认情况下页面上只有 18 个可见，我的代码只抓取那些。您可以通过单击“全部显示”按钮查看所有项目，但该按钮是 Javascript 格式的。

经过一番研究，我发现 PyQt 模块可以用来解决这个涉及 javascript 按钮的问题，我使用了它，但我仍然无法调用“点击”事件。以下是参考代码：

```
import csv
import urllib2
import sys
import time
from bs4 import BeautifulSoup
from PyQt4.QtGui import *  
from PyQt4.QtCore import *  
from PyQt4.QtWebKit import *  

class Render(QWebPage):  
  def __init__(self, url):  
    self.app = QApplication(sys.argv)  
    QWebPage.__init__(self)  
    self.loadFinished.connect(self._loadFinished)  
    self.mainFrame().load(QUrl(url))  
    self.app.exec_()  

  def _loadFinished(self, result):  
    self.frame = self.mainFrame()  
    self.app.quit()  

url = 'http://www.att.com/shop/wireless/devices/smartphones.html'  
r = Render(url)
jsClick = var evObj = document.createEvent('MouseEvents');
             evObj.initEvent('click', true, true );
             this.dispatchEvent(evObj);

allSelector = "a#deviceShowAllLink" # This is the css selector you actually need
allButton   = r.frame.documentElement().findFirst(allSelector)
allButton.evaluateJavaScript(jsClick)

page = allButton
soup = BeautifulSoup(page)
soup.prettify()
with open('Smartphones_26decv1.0.csv', 'wb') as csvfile:
    spamwriter = csv.writer(csvfile, delimiter=',')
    spamwriter.writerow(["Date","Day of Week","Device Name","Price"])
    items = soup.findAll('a', {"class": "clickStreamSingleItem"},text=True)
    prices = soup.findAll('div', {"class": "listGrid-price"})
    for item, price in zip(items, prices):
        textcontent = u' '.join(price.stripped_strings)
        if textcontent:            
            spamwriter.writerow([time.strftime("%Y-%m-%d"),time.strftime("%A") ,unicode(item.string).encode('utf8').strip(),textcontent]) 
```

我在这方面面临的错误如下：

```
"Invalid Syntax" Error for evObj 
```

有人可以帮我调用这个“onclick”事件，以便我能够抓取所有项目的数据。请原谅我的无知，因为我是编程新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-01T20:58:53.903

```
from contextlib import closing
from selenium.webdriver import Firefox # pip install selenium
from selenium.webdriver.support.ui import WebDriverWait
from BeautifulSoup import BeautifulSoup
from selenium.webdriver.common.by import By
from selenium.webdriver.support import expected_conditions as EC
# use firefox to get page with javascript generated content
with closing(Firefox()) as driver:
    driver.get("http://www.att.com/shop/wireless/devices/smartphones.html")
    button = driver.find_element_by_id('deviceShowAllLink')
    button.click()
    # wait for the page to load
    element = WebDriverWait(driver, 10).until(
    EC.invisibility_of_element_located((By.ID, "deviceShowAllLink"))
    )
    # store it to string variable
    page_source = driver.page_source

soup = BeautifulSoup(page_source)
items = soup.findAll('div', {"class": "list-item"})
print "items count:",len(items) 
```

这会有帮助吗..？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T21:17:20.610

要单击按钮，您必须调用`evaluateJavascript`对象：

```
jsClick = """var evObj = document.createEvent('MouseEvents');
             evObj.initEvent('click', true, true );
             this.dispatchEvent(evObj);
             """

allSelector = "a#deviceShowAllLink" # This is the css selector you actually need
allButton   = r.frame.documentElement().findFirst(allSelector)
allButton.evaluateJavaScript(jsClick) 
```

# java - 在 Iterable 中插入所有记录 to a List in java I have an Iterable <myrecord>records . I iterate over the records like below and add it to a LinkedList as shown below. for (MyRecord record: 问问题 问问题 2012-12-20T07:47:06.077 185 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have an Iterable <myrecord>records . I iterate over the records like below and add it to a LinkedList as shown below. for (MyRecord record: records){ sortedList.addLast(record); } My iterable has 3 records, all with different values. But in the end although sortedList contains 3 records, ALL THREE ARE THE SAME!!!. How come? When I printed out the memory location, it's the same for all 3\. What am I doing wrong? If the sortedList contains the same records, which is the last elements in original records, it's possible that the iterator re-use the tmp reference. You need to check the implementation of the 'records'. javacollectionshadoopiterator 4 4 回答 4 This answer is useful 3 Actually your comment reveals the missing link to why this is going wrong. You're using this in a Hadoop mapper or reducer. The trick with Hadoop is that it reuses the objects you're getting in, so that it goes easy on the garbage collector. What you thus have to do is make a copy of each of the objects in your source iterable (the MyRecords), and add those to your LinkedList. 于 2012-12-20T08:02:46.970 回答 This answer is useful 1 Your question is clear and so is the code (also after reading the comments); this may not help, but maybe you can just do, before your add, a contains check like: if (sortedList.contains(record)) sortedList.add... I admit this might not really help (also i don't know if contains checks for element memory location under the hood, as i guess it might only check for element presence in the list using equals). 于 2012-12-20T07:58:09.380 回答 This answer is useful 1 如果 sortedList 包含相同的记录，即原始记录中的最后一个元素，则迭代器可能会重复使用 tmp 引用。您需要检查“记录”的执行情况。 于 2012-12-20T07:51:23.133 回答 This answer is useful 0 When you are adding items into the list put check : if(sortedList.contains(record)) { System.out.println("Record is already available "+record); } else { sortedList.addLast(record); } You will get to know whether the problem is due to same records or because of something else. 于 2012-12-20T08:47:41.033 回答 Related 3 windows - RSA_public_decrypt 和 MS Crypto API 等效 4 excel - 将 MIN 与 IF 一起使用时如何排除 0？ 1 mobile - 将 Flurry Analytics 集成到 MonoTouch 应用程序中 3 python - vim 作为 python ide 4 sql - 在 oracle 中查找重复值 2 mysql - 如果唯一，如何进行 MySQL 插入，但列对于唯一索引来说太长了 1 ruby - NoMethodError .to_i 红宝石 1 scala - Scala内部类懒惰 2 gtk - 带有 vala 条目的 gtk.combobox 的宽度 5 matlab - 使用 Matlab 生成幅度在 [-1 1] 之间的白噪声 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</myrecord></myrecord>

> ID：13967455
> 
> 赞同：1
> 
> 时间：
> 
> 标签：java, collections, hadoop, iterator

I have an `Iterable<MyRecord> records` . I iterate over the records like below and add it to a LinkedList as shown below.

 `````
for (MyRecord record: records){
    sortedList.addLast(record);
}

````  `My iterable has 3 records, all with different values. But in the end although `sortedList` contains 3 records, ALL THREE ARE THE SAME!!!. How come?

When I printed out the memory location, it's the same for all 3\. What am I doing wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T08:02:46.970

Actually your comment reveals the missing link to why this is going wrong. You're using this in a Hadoop mapper or reducer. The trick with Hadoop is that it reuses the objects you're getting in, so that it goes easy on the garbage collector. What you thus have to do is **make a copy** of each of the objects in your source iterable (the `MyRecord`s), and add those to your LinkedList.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:58:09.380

Your question is clear and so is the code (also after reading the comments); this may not help, but maybe you can just do, before your add, a contains check like: `if (sortedList.contains(record)) sortedList.add...`

I admit this might not really help (also i don't know if contains checks for element memory location under the hood, as i guess it might only check for element presence in the list using `equals`).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T07:51:23.133

如果 sortedList 包含相同的记录，即原始记录中的最后一个元素，则迭代器可能会重复使用 tmp 引用。您需要检查“记录”的执行情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T08:47:41.033

When you are adding items into the list put check :

```
if(sortedList.contains(record))
{
  System.out.println("Record is already available "+record);
}
else
{
 sortedList.addLast(record);
} 
```

You will get to know whether the problem is due to same records or because of something else.``

# vba - 我正在尝试将 sheet1 范围数据复制到 sheet2 范围，但没有复制任何内容

> ID：13967458
> 
> 赞同：0
> 
> 时间：2012-12-20T07:47:12.223
> 
> 标签：vba, excel, vbscript

我正在尝试将 sheet1 范围数据复制到 sheet2 范围，但没有复制任何内容。这是我试图实现某些目标但卡在基本位置的完整代码。请帮忙

**编辑：**我刚刚尝试了宏，这段代码也发生了同样的事情。请查看快照，您可以在其中看到 Snap 1 包含源数据并且也被选中，但没有被复制到 Snap 2。但是在那里选择了范围。

```
 Sub copy()
      Range("A1:J4").Select
      Selection.copy
      Sheets("Sheet2").Select
      ActiveSheet.Paste
      Application.CutCopyMode = False
      ActiveWorkbook.Save
  End Sub 
```

![在此处输入图像描述](../Images/91032719f83fe2f1e07a605e01fc1283.png)

![在此处输入图像描述](../Images/722c6e570bc3cecd7a1aa07113e19774.png)

***更新***

*样式-1*

```
 Option Explicit

     Dim objSheet1,objSheet2,TotalRows,TotalcolCopy,strPathExcel1

     Dim oXls  : Set oXls = CreateObject("Excel.Application")
     Dim aData ': aData = oWb.Worksheets(1).Range("$A2:$C10")
     Dim dicP  : Set dicP = CreateObject("Scripting.Dictionary")

     strPathExcel1 = "D:\WIPData\AravoMacro\Finalscripts\GE_Wing_To_Wing_Report.xlsx"
     oXls.Workbooks.open strPathExcel1

     Set objSheet1 = oXls.ActiveWorkbook.Worksheets(1)
     Set objSheet2 = oXls.ActiveWorkbook.Worksheets(2)

     TotalRows=oXls.Application.WorksheetFunction.CountA(objSheet1.Columns(1)) - 3
     TotalcolCopy=oXls.Application.WorksheetFunction.Match("Parent Business Process ID", objSheet1.Rows(3), 0)

   objSheet1.Range(objSheet1.Cells(4,1),objSheet1.Cells(TotalRows,TotalcolCopy)).Copy(objSheet2.Range("A1"))

    '=======================
     oXls.ActiveWorkbook.SaveAs strPathExcel1
     oXls.Workbooks.close
     oXls.Application.Quit
    '====================== 
```

*样式-2*

```
 Option Explicit

  Dim objSheet1,objSheet2,TotalRows,TotalcolCopy,strPathExcel1
  Dim oFS   : Set oFS  = CreateObject("Scripting.FileSystemObject")
  Dim oXls  : Set oXls = CreateObject("Excel.Application")
  Dim aData ': aData    = oWb.Worksheets(1).Range("$A2:$C10")
  Dim dicP  : Set dicP = CreateObject("Scripting.Dictionary")

  oXls.Workbooks.Open(oFs.GetAbsolutePathName("Test.xlsx"))
  Set objSheet1 = oXls.ActiveWorkbook.Worksheets(1)
  Set objSheet2 = oXls.ActiveWorkbook.Worksheets(2)

  TotalRows=oXls.Application.WorksheetFunction.CountA(objSheet1.Columns(1)) - 3
  TotalcolCopy=oXls.Application.WorksheetFunction.Match("Parent Business Process ID", objSheet1.Rows(3), 0)

  objSheet1.Range(objSheet1.Cells(4,1),objSheet1.Cells(TotalRows,TotalcolCopy)).Copy(objSheet2.Range("A1"))

  '=======================
  oXls.ActiveWorkbook.SaveAs "Test.xlsx"
  oXls.Workbooks.close
  oXls.Application.Quit
  '====================== 
```

你们能告诉我 Style-1 和 Style-2 有什么区别吗？因为在 Style-1 中，所有复制的数据都被保存了，而在 Style-2 中不是这样。这个设计问题主要是我从早上开始面临的整体问题。

Style-2 在哪些方面不完美？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T08:04:00.823

从一个范围复制到另一个范围的最简单方法是**重新编码**宏。查看您的代码，您获得的值是`TotalRows`什么`LastCol`？**假设你有从你的返回匹配的数据`Match()`，所以有行要复制`**

```
Option Explicit

Sub CopyPastes()
    Dim rng1 as Range
    Dim rng2 as Range

    Set rng1 = Sheets(1).Range("B2:C12")
    Set rng2 = Sheets(2).Range("B2")
    rng1.Copy
    rng2.PasteSpecial xlPasteValues
End Sub 
```

所以在你的情况下，你能保持简单吗？删除以下行。只需指定 Sheet2 的起始范围并尝试。此时您不必担心`resize`。

替换这个，

```
ObSheet2.Range(ObSheet2.Cells(4,1),ObSheet2.Cells(TotalRows,LastCol)).PasteSpecial 
```

或者：因为你缺少粘贴特殊参数

```
ObSheet2.Range(ObSheet2.Cells(4,1),ObSheet2.Cells(TotalRows,LastCol)) _ 
.PasteSpecial xlPasteValues 
```

或：这里没有任何花哨的单元格，但直接范围

```
ObSheet2.Range(ObSheet2.Range("A4").PasteSpecial xlPasteValues 
```

# meteor - 运行在自己的 Fiber 中插入 mongo 文档的 Meteor 方法

> ID：13967463
> 
> 赞同：0
> 
> 时间：2012-12-20T07:47:37.107
> 
> 标签：meteor

我正在尝试运行`ntwitter`流 API 来跟踪有关某个主题标签的推文，`Tweets`并使用每条推文填充 Mongo 集合。

我已经将它连接到服务器端，如下所示：

```
t = new nTwitter({
    consumer_key: credentials.consumer_key,
    consumer_secret: credentials.consumer_secret,
    access_token_key: credentials.access_token_key,
    access_token_secret: credentials.access_token_secret
});

Meteor.methods({
  trackTweets: function () {
    this.unblock; // this doesn't seem to work
    console.log('... ... trackTweets');
    var _this = this;
    t.stream(
        'statuses/filter',
        { track: ['#love'] },
        function(stream) {
            stream.on('data', function(tweet) {
              // app/packages/mongo-livedata/collection.js:247
              //         throw e;
              //               ^
              // O yes I love her like money
              // Error: Meteor code must always run within a Fiber
                console.log(tweet.text);
                Tweets.insert(tweet.text); // this call blocks
            });
            stream.on('error', function(error, code) {
                console.log("My error: " + error + ": " + code);
            });
        }
    );
  }
}); 
```

这条线：`Tweets.insert(tweet.text)`抛出`must run inside its own Fiber error`- 并且我尝试将`this.unblock`语句放在几个不同的地方。

我应该在这里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:12:04.473

你不调用函数解锁，你需要更换你的

```
this.unblock; 
```

有了这个：

```
this.unblock(); 
```

如果这不起作用，我认为这与 ntwitter 获取数据的方式有关，你可以尝试添加这个

```
if (Meteor.isClient) return false; 
```

这样该方法就不会在客户端上运行，而只能在服务器上运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:20:34.857

我相信您在服务器端运行的代码需要包含在 Fiber 中。在这些答案中可以找到一些类似的例子：

[在服务器上调用 Collection.insert 时，Meteor 代码必须始终在 Fiber 中运行](https://stackoverflow.com/questions/10192938/meteor-code-must-always-run-within-a-fiber-when-calling-collection-insert-on-s)

[将标准输出流式传输到 Meteor 网站](https://stackoverflow.com/questions/12097007/stream-stdout-to-meteor-website)

# java - Javascript中的“下一步”按钮并使用JavascriptExecutor单击“下一步”按钮，但它并没有帮助我

> ID：13967466
> 
> 赞同：2
> 
> 时间：2012-12-20T07:47:43.797
> 
> 标签：java, javascript, selenium, webdriver, selenium-webdriver

这是检查元素。

```
<script language="javascript"> 
<input type="submit" onclick="return processPIData(this);hideThisButton()" value=" Next "> <input type="reset" value="Reset "> 
```

我的脚本是：

```
JavascriptExecutor jsExecutor = (JavascriptExecutor)driver;

jsExecutor.executeScript("document.getElementByTagName('input')[0].click()"); 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:03:48.943

您的 Javascript 错误，应该是：

```
document.getElementsByTagName('input')[0].click(); 
```

虽然我不完全确定您为什么需要为此使用 Javascript。内置选择器方法应该可以正常工作。

# windows - 是否可以使用 Go 编译器为其他操作系统分发可执行文件？

> ID：13967470
> 
> 赞同：28
> 
> 时间：2012-12-20T07:47:49.210
> 
> 标签：windows, macos, go, compiler-construction

我目前正在使用 Mac OS X，现在我需要构建一个 .exe 文件，以便 Go 程序可以在 Windows 上运行。那么问题来了，如何在 MacOS amd64 下为 Win X86 构建可执行文件？还是不可能这样做？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-20T07:53:34.083

如果您不使用 CGo 而是使用纯 Go，那么它是完全可行和标准的。

首先，您必须在开发计算机上为目标创建 Go 环境。假设你的 Go 安装在`~/var/go`，这可能是这样的：

```
cd ~/var/go/src
CGO_ENABLED=0 GOOS=windows GOARCH=386 ./make.bash 
```

然后你用好的 GOOS 和 GOARCH 编译：

```
GOOS=windows GOARCH=386 go build -o hello.exe hello.go 
```

这是[关于在 linux 上构建 windows exe 的 go-wiki 页面](http://code.google.com/p/go-wiki/wiki/WindowsCrossCompiling)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-20T10:15:34.837

我已经使用[Dave Cheney 的教程](http://dave.cheney.net/2012/09/08/an-introduction-to-cross-compilation-with-go)和随附的 shell 脚本在 linux 上为 linux、windows 和 OS X 构建二进制文件就好了。（由我的[压力磁盘](https://github.com/ncw/stressdisk)项目使用）

它与 dystroy 描述的方法完全相同，只是带有分步说明和一些有用的 shell 别名。

**2021 年 2 月更新**

如果你想在你的 CI 中插入一些东西，那么我推荐[goreleaser](https://goreleaser.com/) - 它可以自动交叉编译各种操作系统并构建包。如果您想查看示例，请查看完全使用 goreleaser 构建[的压力磁盘发布页面- 请参阅](https://github.com/ncw/stressdisk/releases)[配置](https://github.com/ncw/stressdisk/blob/master/.goreleaser.yml)和[说明](https://github.com/ncw/stressdisk/blob/master/RELEASE.md)

# facebook - 使用非 digid jid 连接到 facebook throw xmpp

> ID：13967471
> 
> 赞同：1
> 
> 时间：2012-12-20T07:47:52.047
> 
> 标签：facebook, xmpp

我需要编写连接到 facebook 的 xmpp bot 代码。我需要通过 xmpp 连接到 facebook。在旧帐户中，jid 由数字序列组成。

我可以使用给定的电子邮件或电话号码而不是这个数字序列来连接它在官方网站中的连接方式吗？

如果有人有任何信息，请您帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:08:07.757

据我所知，要连接到 Facebook 聊天，您需要使用 my.name@chat.facebook.com 或 -1234567@chat.facebook.com 之类的登录名

信息：http: [//developers.facebook.com/docs/chat/](http://developers.facebook.com/docs/chat/)

# mysql - 计算某些属性中具有相同值的元组实例的数量

> ID：13967474
> 
> 赞同：2
> 
> 时间：2012-12-20T07:48:08.930
> 
> 标签：mysql, database, count, group-by, rdbms

我有以下数据库

```
=================================
**id(PK)    orderid      email_content**
----------------------------------------------
1           6544        complain regarding service   
2           6544        request for replacement
3           6544        complain for late delievery
4           9822        thanking note
5           5762        faulty product
6           5762        complain for 
```

我需要的是每个 orderid 的每个订单没有时间交互，例如 6544 order4 id 有多少时间电子邮件存在，我们有 3 个电子邮件..同样明智

```
orderid      no_of_iteraction
-------------------------------
6544         3
9822         1
5762         2 
```

请建议适当的mysql查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:51:15.570

```
SELECT count(id) as no_of_iterations, orderid from mytable group by orderid 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T07:51:51.720

试试这个：

```
SELECT orderid, COUNT(orderid) no_of_iteraction
FROM tblTemp 
GROUP BY orderid 
```

**或者**

根据您使用**SUM**函数的要求

```
SELECT orderid, SUM(1) no_of_iteraction
FROM tblTemp 
GROUP BY orderid 
```

**或者**

```
SELECT orderid, SUM(cnt)
FROM (SELECT orderid, 1 cnt FROM tblTemp ORDER BY orderid) AS A 
GROUP BY orderid 
```

# c - Linux 内核模块和设备驱动程序的静态分析工具

> ID：13967475
> 
> 赞同：7
> 
> 时间：2012-12-20T07:48:12.797
> 
> 标签：c, memory-leaks, linux-kernel, linux-device-driver, static-analysis

我需要一个针对我为基于 ARM 的板编写的 Linux 设备驱动程序的静态分析工具。我正在考虑以下几种工具：

1.  [Sparse](http://en.wikipedia.org/wiki/Sparse)是一种计算机软件工具，已经在 Linux 上可用，旨在发现 Linux 内核中可能存在的编码错误。
2.  [Linux 验证中心](http://linuxtesting.org/kernel)有两个活跃的项目旨在提高可加载内核模块的质量。

    *   `Linux Driver Verification`(LDV) - 用于 Linux 设备驱动程序的静态源代码验证的综合工具集。
    *   `KEDR Framework`- 用于动态分析和验证内核模块的可扩展框架。
    *   另一个正在进行的项目`Linux File System Verification`旨在开发用于验证 Linux 文件系统实现的专用工具集。
3.  启用`-Werror`,`-Wextra`和`-Wall`,`GCC`并运行`Valgrind`.

上次我玩 Sparse 时，我发现输出令人困惑，并且没有找到好的文档来解释输出。有没有人有关于稀疏工具的好文档？我可以使用哪些其他免费静态分析工具来验证我的 Linux 驱动程序？我知道 LINT 工具，但它已获得许可。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:28:06.250

[Smatch](http://repo.or.cz/w/smatch.git)是用于内核的 C 语言静态分析工具。它产生了数百个补丁。不少与安全相关或对稳定内核来说足够重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-25T21:27:55.783

如果您想编写自己的规则，Coccinelle 可能是合适的。如果您想使用其他人编写的规则，您可以使用集成到内核中的各种工具。检查第 4.2 节：文档/开发过程/4.Coding 的代码检查工具以获取一些建议。

# ios - IOS：创建全屏“覆盖”UIView（Monotouch）

> ID：13967476
> 
> 赞同：1
> 
> 时间：2012-12-20T07:48:16.293
> 
> 标签：ios, xamarin.ios

我在导航控制器中有一个视图，并想创建一个“全（应用程序）屏幕”覆盖，说明用户应该做什么。我已经在其他应用程序上看到了一些透明度，并且效果很好。我正在尝试以下内容，但内容最终位于我的导航控制器标题下方。调查谈论将矩形转换为“窗口级别”位置等，但它仍然在下面。

下面我微弱的尝试有什么替代方法吗？或者一个样本的链接也会很棒。

谢谢！

```
HelpOverlayUIView _overlayView;

    public void PresentHelpOverlay()
    {
        RectangleF windowFullFrame = new RectangleF(0,0,UIScreen.MainScreen.Bounds.Width,UIScreen.MainScreen.Bounds.Height);

        // Conversion?
        //[aView convertPoint:localPosition toView:nil];
        RectangleF overlayFrame = View.ConvertRectFromView(windowFullFrame ,null);

        // Clear old one if it exists.
        if (_overlayView != null) _overlayView = null;

        // Instantiate popup view and add to (in this case the 2nd tier view).  This is in an abstract class, if in a concrete one it'd normally just be View.Add
        _overlayView = new HelpOverlayUIView(this, overlayFrame);

        // tried th, didn't change it.
        // this.WantsFullScreenLayout = true;
        // _childView.BringSubviewToFront(_overlayView);
        _overlayView.Alpha = 0;

        _childView.Add (_overlayView);

        // Setup event to close without doing anything.
        _overlayView.CloseView += (sender, e) => {

            Console.WriteLine ("close called");
            // animate modal popup's departure
            UIView.Animate (
                0.5f,
                () => {
                // Anim Code
                _overlayView.Alpha = 0;
            },
            null
            );

        };

        // animate modal popup's arrival
        UIView.Animate (
            0.5f,
            () => {
            // Anim Code
            _overlayView.Alpha = 1;
        },
        null
        );

    } 
```

（视图只是一个 UIView，它重载了将文本等放入视图的 Draw() 方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T06:56:08.343

您可以将 _overlayView 添加到视图层次结构中更高的位置，例如 NavigationViewController。如果您的 NavigationViewController 设置为您的 RootViewController（好吧，不管它是什么），您可以试试这个。

```
((AppDelegate)UIApplication.SharedApplication.Delegate).Window.RootViewController.Add(_overlayView); 
```

您也可以像这样将子视图放在前面，但这只是在该视图的前面，而不是在所有内容的前面（这不是您真正想要的，除非 _childView 是您的 NavigationViewController）。

```
_childView.BringSubviewToFront(_overlayView); 
```

# delphi - 如何减少使用 Synapse TMimeMess 解码 MIME 时的巨大 RAM 使用量？

> ID：13967478
> 
> 赞同：10
> 
> 时间：2012-12-20T07:48:21.733
> 
> 标签：delphi, memory, smtp, mime

我使用 TMimeMess 来解码基于 Synapse 的 SMTP 服务器的传入电子邮件。

我发现为了解码 50MB MIME 消息（带有附件的简单文本），TMimeMess 使用了 600-800MB 的内存。

解码代码在这里：

```
FMimeMsg.Header.DecodeHeaders(FMimeMsg.MessagePart.Lines);
FMimeMsg.MessagePart.DecomposeParts;
ExtractPartsFromMess(FMimeMsg.MessagePart);
...
procedure ExtractPartsFromMess(AMimePart: TMimePart);
var i: integer;
begin
  if AMimePart.GetSubPartCount = 0 then
    Begin
      if (AMimePart.PrimaryCode = MP_TEXT) then
        Begin
          AMimePart.DecodePart;          
          FBody.Add(string(ReadStrFromStream(AMimePart.DecodedLines,AMimePart.DecodedLines.Size)));
    end
  else if (AMimePart.PrimaryCode = MP_BINARY) then
    Begin
      if AMimePart.FileName <> '' then
        Begin
          AMimePart.DecodePart;
          AMimePart.DecodedLines.SaveToFile(FPathToIncomingFolder+AMimePart.FileName);
        end;
    end;
end
else
Begin
  for i:=0 to AMimePart.GetSubPartCount-1 do
    Begin
      ExtractPartsFromMess(AMimePart.GetSubPart(i));
    end;
end;
end; 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-16T11:20:46.723

Indy 有为此目的的 TIdSMTP 和 TIdMessage 组件。它们在从服务器下载 SMTP 数据时对其进行动态解码，数据不会预先缓存在内存中，并且附件默认存储在 HDD 上的临时文件中。

您也可以尝试通过他们的电子邮件地址或网站联系 Synpse 作者。

# java - 如何将媒体从服务器发送到 Android 应用程序？

> ID：13967479
> 
> 赞同：6
> 
> 时间：2012-12-20T07:48:23.770
> 
> 标签：java, android, google-cloud-messaging

我正在开发一个 Android 应用程序。我想将图像和视频从我的服务器发送到我的 Android 应用程序。GCM 只允许发送 4kb 的数据，但是媒体文件一般都比较大，怎么办呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T08:16:53.193

您不会使用 gcm 将其发送给您的客户。您使用 gcm 通知客户端要从您的服务器/云中获取的新内容。

阅读高级主题下的[gcm-docs](http://developer.android.com/google/gcm/index.html)和“[发送到同步](http://developer.android.com/google/gcm/adv.html#s2s)”的想法。

查看 Google IO web-api 视频（约 30 分钟），了解[Google I/O 2012](http://www.youtube.com/watch?v=dylFNrvZ_3U)的大图和文件`android-sdk/extras/google/gcm/samples`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T15:24:13.080

实际上，我为此写了两篇博客文章。第[一个](http://blog.andromo.com/2012/tutorial-using-airbop-to-push-images-for-bigpicturestyle-notifications/)显示如何在有效负载中发送链接，然后使用 URL 下载文件。

第二[个](http://blog.andromo.com/2012/tutorial-using-airbop-to-send-images-in-the-message-payload/)展示了如何将小图像作为 4K 有效负载的一部分发送。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T08:29:39.097

将媒体（图像、视频等）存储在您的服务器上，并通过 GCM 将它们的链接发送到 Android 应用程序。

# iphone - 如果我不为 rev mob 使用广告支持框架会发生什么

> ID：13967482
> 
> 赞同：1
> 
> 时间：2012-12-20T07:48:34.973
> 
> 标签：iphone, ios5, ios6, revmob

我在我的 iPhone 应用程序中添加了 AdSupport 框架，因为我想使用 rev mob 广告（正如我们在安装说明[http://sdk.revmob.com/ios 中看到的那样）](http://sdk.revmob.com/ios)。现在该应用程序在 iOS 6.0 上运行良好，但在 5.1.1 上崩溃，因为 5.1.1 没有广告支持框架。所以我删除了添加支持框架并构建了 pn iOS 5.1.1。现在应用程序不会崩溃，并且添加也可以正常工作。我不清楚删除广告支持框架如何影响广告。如果它不影响为什么 rev mob 在他们的文档中提到它来添加它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:31:36.133

您应该保留 AdSupport 框架，因为 rev mob 代码可能会在需要时有条件地检查它。

您可能正在做的是*强链接*库，而您应该*弱链接*它。强链接库（默认）意味着它被标记为*required*，因此不会在 iOS 5 上运行（因为该库不存在）。而当你弱链接一个库时，它是*可选*的，并且很乐意在旧的 iOS 版本上运行（但你需要确保在调用它的任何 API 时有条件地检查库）。

要弱链接库，请打开项目的*Build Phases*设置面板，然后在 AdSupport 库右侧的下拉菜单中将其从“必需”更改为“可选”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:11:00.347

您必须将 AdSupport 库从“必需”更改为“可选”。

AdSupport 库已包含在 iOS 6 中，其中包括对广告网络有用的新的重要功能，例如 RevMob：http: [//developer.apple.com/library/ios/#documentation/DeviceInformation/Reference/AdSupport_Framework/_index。 html#//apple_ref/doc/uid/TP40012658](http://developer.apple.com/library/ios/#documentation/DeviceInformation/Reference/AdSupport_Framework/_index.html#//apple_ref/doc/uid/TP40012658)

# php - create image dynamically - PHP GD

> ID：13967483
> 
> 赞同：0
> 
> 时间：2012-12-20T07:48:35.253
> 
> 标签：php, gd

I create an image dynamically using PHP GD. thus when I execute index.php it create image.png but I want image in index.php for example I can use `<img src="index.php">`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T07:57:23.207

您必须将标题内容类型设置为`header('content-type: image/jpeg');`
我已经为验证码实现了一次类似的代码

```
header("Content-type: image/png");
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past
$string = "Type Me";
$im     = imagecreatefrompng(IMAGEDIR."captcha.png");
$orange = imagecolorallocate($im, 0, 0, 0);
$px     = (imagesx($im) - 7.5 * strlen($string)) / 2;
imagestring($im, 5, $px, 9, $string, $orange);
imagepng($im);
imagedestroy($im); 
```

# java - How send data from service to thread

> ID：13967484
> 
> 赞同：1
> 
> 时间：2012-12-20T07:48:38.060
> 
> 标签：java, android, multithreading, service

In my service-thread:

```
public class Main_Service extends Service implements Runnable {
... } 
```

I want to send broadcast data:

```
new Thread(new Runnable() {
   public void run() {
         while (true) {
           try {
                Thread.sleep(10);
                if (Draw_picture != null) 
                {
                    Log.i(TAG, "Picture copy");
                }
                Intent intent = new Intent();
                intent.putExtra("picture", Draw_picture);
                sendBroadcast(intent); 
```

In other a Thread I do the following:

```
public Intent mServiceIntent;
mServiceIntent = new Intent(context, Main_Service.class);
context.startService(mServiceIntent); 
```

In the runnable method I put the following code:

```
mpubl_picture = (Bitmap) mServiceIntent.getExtras().get("picture");
 if (mpubl_picture != null)
    {
    Log.i(TAG, "mpubl_picture is not null ");
    } 
```

But when I debug, **mpubl_picture** = null, Draw_picture!=null. Whats wrong?

# ssl - How to deal with the situation of server certificate over 16k?

> ID：13967494
> 
> 赞同：1
> 
> 时间：2012-12-20T07:49:24.410
> 
> 标签：ssl, certificate

As the title, when a server has a long list of certificates, supposed their total size is over 16KBytes, how to pack them into a TLSplaintext? If we can't, please tell me how to seperate the certificate chain into different TLSplaintexts?

I ask because in RFC 2246, the size of a 'Certificate' package could reach 2^24 bytes. That is over the maximum size allowed in a TLSPlaintext; 2^14+5 bytes. The standard does not mention how we can split the package when the size of a 'Certificate' package is over 2^14+5\. That confuses me a lot.

# java - 使用杰克逊处理器spring mvc 3.1的空指针异常

> ID：13967497
> 
> 赞同：1
> 
> 时间：2012-12-20T07:49:38.893
> 
> 标签：java, json, spring-mvc, jackson

我有下面的 pojo，我正在尝试使用 spring 对杰克逊处理器的支持来序列化和反序列化，下面是我的 POJO 类

```
public class Contract {
String term;
private List<Payment> paymentList=new ArrayList<Payment>();
public String getTerm() {
    return term;
}
public void setTerm(String term) {
    this.term = term;
}
public List<Payment> getPaymentList() {
    return paymentList;
}
public void setPaymentList(List<Payment> paymentList) {
    this.paymentList = paymentList;
}

} 
```

在上面的类中，如果有一个列表，当我使用下面提到的 JUnit 测试用例时，我得到空指针异常：

```
package com.budco.vsc.jsonmapping;

import static org.junit.Assert.assertEquals;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.nio.charset.Charset;

import org.codehaus.jackson.map.ObjectMapper;
import org.junit.Before;
import org.junit.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.core.convert.ConversionService;
import org.springframework.format.support.FormattingConversionServiceFactoryBean;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpInputMessage;
import org.springframework.http.HttpOutputMessage;
import org.springframework.http.MediaType;
import org.springframework.http.converter.json.MappingJacksonHttpMessageConverter;
import org.springframework.samples.mvc.ajax.account.Contract;
import org.springframework.samples.mvc.ajax.json.ConversionServiceAwareObjectMapper;
import org.springframework.util.Assert;

 public class ContractJsonBindingTests{

Logger log = LoggerFactory.getLogger(ContractJsonBindingTests.class);

private MappingJacksonHttpMessageConverter converter;

private ObjectMapper objectMapper;

private String testPayload = "{\"term\":\"krish\"}";
@Before
public void setUp() {
    FormattingConversionServiceFactoryBean factoryBean = new FormattingConversionServiceFactoryBean();
    factoryBean.afterPropertiesSet();
    ConversionService conversionService = factoryBean.getObject();

    objectMapper = new ConversionServiceAwareObjectMapper(conversionService);
    converter = new MappingJacksonHttpMessageConverter();
    converter.setObjectMapper(objectMapper);
}

@Test
@SuppressWarnings("unchecked")
public void testAnnotationDrivenJsonConversion() throws Exception {
    MockHttpInputMessage inputMessage = new MockHttpInputMessage(testPayload.getBytes("UTF-8"));
    MediaType jsonType = new MediaType("application", "json");
    inputMessage.getHeaders().setContentType(jsonType);
    Contract contract = (Contract) converter.read((Class) Contract.class, inputMessage);
    Assert.notNull(contract);
    log.debug(contract.toString());

    MockHttpOutputMessage outputMessage = new MockHttpOutputMessage();
    converter.write(contract, jsonType, outputMessage);
    log.debug(outputMessage.getBody().toString());
    assertEquals("Incoming and outgoing JSON representations expected to match", testPayload, outputMessage.getBody().toString());
}

private static class MockHttpInputMessage implements HttpInputMessage {

    private final HttpHeaders headers = new HttpHeaders();

    private final InputStream body;

    public MockHttpInputMessage(byte[] contents) {
        Assert.notNull(contents, "'contents' must not be null");
        this.body = new ByteArrayInputStream(contents);
    }

    public HttpHeaders getHeaders() {
        return headers;
    }

    public InputStream getBody() throws IOException {
        return body;
    }
}

public class MockHttpOutputMessage implements HttpOutputMessage {

    private final HttpHeaders headers = new HttpHeaders();

    private final ByteArrayOutputStream body = new ByteArrayOutputStream();

    public HttpHeaders getHeaders() {
        return headers;
    }

    public OutputStream getBody() throws IOException {
        return body;
    }

    public byte[] getBodyAsBytes() {
        return body.toByteArray();
    }

    public String getBodyAsString(Charset charset) {
        byte[] bytes = getBodyAsBytes();
        return new String(bytes, charset);
    }
}
} 
```

堆栈跟踪是

```
java.lang.NullPointerException
at org.springframework.samples.mvc.ajax.json.FormatAnnotationIntrospector.findDeserializer(FormatAnnotationIntrospector.java:33)
at org.codehaus.jackson.map.AnnotationIntrospector$Pair.findDeserializer(AnnotationIntrospector.java:1058)
at org.codehaus.jackson.map.deser.BasicDeserializerFactory.findDeserializerFromAnnotation(BasicDeserializerFactory.java:462)
at org.codehaus.jackson.map.deser.BeanDeserializerFactory.constructSettableProperty(BeanDeserializerFactory.java:606)
at org.codehaus.jackson.map.deser.BeanDeserializerFactory.addBeanProps(BeanDeserializerFactory.java:460)
at org.codehaus.jackson.map.deser.BeanDeserializerFactory.buildBeanDeserializer(BeanDeserializerFactory.java:149)
at org.codehaus.jackson.map.deser.BeanDeserializerFactory.createBeanDeserializer(BeanDeserializerFactory.java:116)
at org.codehaus.jackson.map.deser.StdDeserializerProvider._createDeserializer(StdDeserializerProvider.java:342)
at org.codehaus.jackson.map.deser.StdDeserializerProvider._createAndCache2(StdDeserializerProvider.java:264)
at org.codehaus.jackson.map.deser.StdDeserializerProvider._createAndCacheValueDeserializer(StdDeserializerProvider.java:244)
at org.codehaus.jackson.map.deser.StdDeserializerProvider.findValueDeserializer(StdDeserializerProvider.java:111)
at org.codehaus.jackson.map.deser.StdDeserializer.findDeserializer(StdDeserializer.java:482)
at org.codehaus.jackson.map.deser.BeanDeserializer.resolve(BeanDeserializer.java:271)
at org.codehaus.jackson.map.deser.StdDeserializerProvider._resolveDeserializer(StdDeserializerProvider.java:348)
at org.codehaus.jackson.map.deser.StdDeserializerProvider._createAndCache2(StdDeserializerProvider.java:303)
at org.codehaus.jackson.map.deser.StdDeserializerProvider._createAndCacheValueDeserializer(StdDeserializerProvider.java:244)
at org.codehaus.jackson.map.deser.StdDeserializerProvider.findValueDeserializer(StdDeserializerProvider.java:111)
at org.codehaus.jackson.map.deser.BasicDeserializerFactory.createCollectionDeserializer(BasicDeserializerFactory.java:182)
at org.codehaus.jackson.map.deser.StdDeserializerProvider._createDeserializer(StdDeserializerProvider.java:332)
at org.codehaus.jackson.map.deser.StdDeserializerProvider._createAndCache2(StdDeserializerProvider.java:264)
at org.codehaus.jackson.map.deser.StdDeserializerProvider._createAndCacheValueDeserializer(StdDeserializerProvider.java:244)
at org.codehaus.jackson.map.deser.StdDeserializerProvider.findValueDeserializer(StdDeserializerProvider.java:111)
at org.codehaus.jackson.map.deser.StdDeserializer.findDeserializer(StdDeserializer.java:482)
at org.codehaus.jackson.map.deser.BeanDeserializer.resolve(BeanDeserializer.java:271)
at org.codehaus.jackson.map.deser.StdDeserializerProvider._resolveDeserializer(StdDeserializerProvider.java:348)
at org.codehaus.jackson.map.deser.StdDeserializerProvider._createAndCache2(StdDeserializerProvider.java:303)
at org.codehaus.jackson.map.deser.StdDeserializerProvider._createAndCacheValueDeserializer(StdDeserializerProvider.java:244)
at org.codehaus.jackson.map.deser.StdDeserializerProvider.findValueDeserializer(StdDeserializerProvider.java:111)
at org.codehaus.jackson.map.deser.StdDeserializerProvider.findTypedValueDeserializer(StdDeserializerProvider.java:127)
at org.codehaus.jackson.map.ObjectMapper._findRootDeserializer(ObjectMapper.java:2046)
at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:1980)
at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1331)
at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.readInternal(MappingJacksonHttpMessageConverter.java:124)
at org.springframework.http.converter.AbstractHttpMessageConverter.read(AbstractHttpMessageConverter.java:153)
at com.budco.vsc.jsonmapping.ContractJsonBindingTests.testAnnotationDrivenJsonConversion(ContractJsonBindingTests.java:59)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

注意：- 如果我从 POJO 中删除列表属性（paymentList），那么没有问题。这意味着当 POJO 包含某些集合属性时，上述内容不起作用。如果任何人有任何想法，请帮助我。

编辑：支付类

```
public class Payment {

private BigDecimal amount;
private String payType;
private String transactionType;
private String chargeOrCancelFlag;
private String type;
private String authCode;
private Date authRequestDate;
private String authStatus;
private String authTransactioncode;
private SystemUser systemUser;
private String mailOrEmailInvoice;
private String monthlyBillOnDay;
private CreditCard creditCard;

public BigDecimal getAmount() {
    return amount;
}
public void setAmount(BigDecimal amount) {
    this.amount = amount;
}
public String getPayType() {
    return payType;
}
public void setPayType(String payType) {
    this.payType = payType;
}
public String getTransactionType() {
    return transactionType;
}
public void setTransactionType(String transactionType) {
    this.transactionType = transactionType;
}
public String getChargeOrCancelFlag() {
    return chargeOrCancelFlag;
}
public void setChargeOrCancelFlag(String chargeOrCancelFlag) {
    this.chargeOrCancelFlag = chargeOrCancelFlag;
}
public String getType() {
    return type;
}
public void setType(String type) {
    this.type = type;
}
public String getAuthCode() {
    return authCode;
}
public void setAuthCode(String authCode) {
    this.authCode = authCode;
}
public Date getAuthRequestDate() {
    return authRequestDate;
}
public void setAuthRequestDate(Date authRequestDate) {
    this.authRequestDate = authRequestDate;
}
public String getAuthStatus() {
    return authStatus;
}
public void setAuthStatus(String authStatus) {
    this.authStatus = authStatus;
}
public String getAuthTransactioncode() {
    return authTransactioncode;
}
public void setAuthTransactioncode(String authTransactioncode) {
    this.authTransactioncode = authTransactioncode;
}
public SystemUser getSystemUser() {
    return systemUser;
}
public void setSystemUser(SystemUser systemUser) {
    this.systemUser = systemUser;
}
public String getMailOrEmailInvoice() {
    return mailOrEmailInvoice;
}
public void setMailOrEmailInvoice(String mailOrEmailInvoice) {
    this.mailOrEmailInvoice = mailOrEmailInvoice;
}
public String getMonthlyBillOnDay() {
    return monthlyBillOnDay;
}
public void setMonthlyBillOnDay(String monthlyBillOnDay) {
    this.monthlyBillOnDay = monthlyBillOnDay;
}
public CreditCard getCreditCard() {
    return creditCard;
}
public void setCreditCard(CreditCard creditCard) {
    this.creditCard = creditCard;
}

 } 
```

信用卡类

```
 public class CreditCard {

private String type;
private String cardNumber;
private String name;
private String securityCode;
private String expirationDate;
private String firstFourDigit;
private String secondFourDigit;
private String thirdFourDigit;
private String lastFourDigits;
private String zipCode;

public void setMonth(String month){
    if(expirationDate==null)
        expirationDate=month;
    else
        expirationDate=month+"/"+expirationDate;
}

public void setYear(String year){
    if(expirationDate==null)
        expirationDate=year;
    else
        expirationDate=expirationDate+"/"+year;
}

public String getMonth() {
    return "";
}

public String getYear() {
    return "";
}

public String getType() {
    return type;
}

public void setType(String type) {
    this.type = type;
}

public String getCardNumber() {
    if (cardNumber == null)
        cardNumber = firstFourDigit + secondFourDigit + thirdFourDigit
                + lastFourDigits;
    return cardNumber;
}

public void setCardNumber(String cardNumber) {
    this.cardNumber = cardNumber;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getSecurityCode() {
    return securityCode;
}

public void setSecurityCode(String securityCode) {
    this.securityCode = securityCode;
}

public String getExpirationDate() {
    return expirationDate;
}

public void setExpirationDate(String expirationDate) {
    this.expirationDate = expirationDate;
}

public String getFirstFourDigit() {
    return firstFourDigit;
}

public String getSecondFourDigit() {
    return secondFourDigit;
}

public String getThirdFourDigit() {
    return thirdFourDigit;
}

public String getLastFourDigits() {
    return lastFourDigits;
}

public void setLastFourDigits(String lastFourDigits) {
    this.lastFourDigits = lastFourDigits;
}

public void setFirstFourDigit(String firstFourDigit) {
    this.firstFourDigit = firstFourDigit;
}

public void setSecondFourDigit(String secondFourDigit) {
    this.secondFourDigit = secondFourDigit;
}

public void setThirdFourDigit(String thirdFourDigit) {
    this.thirdFourDigit = thirdFourDigit;
}

public String getZipCode() {
    return zipCode;
}

public void setZipCode(String zipCode) {
    this.zipCode = zipCode;
}

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:47:20.677

```
public void setMonth(String month){
    // ...
}

public void setYear(String year){
    // ...
} 
```

是不是这里的问题。因为在自省期间，spring 会寻找一个 name 为 name 的字段`setXXX`，而没有`set`.

见[`FormatAnnotationIntrospector`源代码](https://code.google.com/p/usc/source/browse/mvc-ajax/src/main/java/org/springframework/samples/mvc/ajax/json/FormatAnnotationIntrospector.java?r=879&spec=svn879)

编辑（建议的解决方案）：

```
public class CreditCard {
    public static class ExpirationDate {
        private String month;
        private String year;

        // getters, setter

        @Override
        public String toString() {
            return month + "/" + year;
        }
    }

    private String type;
    private String cardNumber;
    private String name;
    private String securityCode;
    private ExpirationDate expirationDate;
    private String firstFourDigit;
    private String secondFourDigit;
    private String thirdFourDigit;
    private String lastFourDigits;
    private String zipCode;

    public void setExpirationDate(ExpirationDate expDate){
        this.expirationDate = expDate;
    }

    public ExpirationDate getExpirationDate(){
        return this.expirationDate;
    }

    // other getters, setters
} 
```

# java - 将字符串转换为日期格式

> ID：13967499
> 
> 赞同：4
> 
> 时间：2012-12-20T07:49:50.073
> 
> 标签：java, android, string, date

我想要这种格式 `6 Dec 2012 12:10`

```
 String time = "2012-12-08 13:39:57 +0000 ";

  DateFormat sdf = new SimpleDateFormat("hh:mm:ss");
  Date date = sdf.parse(time);

  System.out.println("Time: " + date); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T07:56:02.023

您需要首先**解析**您的日期字符串（使用[`DateFormat#parse()`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#parse%28java.lang.String%29)方法）以**`Date`**使用与`date string`.

然后使用所需的格式**格式化**该日期对象（使用方法）以获取字符串。[`DateFormat#format()`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#format%28java.util.Date%29)`SimpleDateFormat`

```
String time = "2012-12-08 13:39:57 +0000";

Date date = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss Z").parse(time);
String str = new SimpleDateFormat("dd MMM yyyy HH:mm:ss").format(date);

System.out.println(str); 
```

**输出： -**

```
08 Dec 2012 19:09:57 
```

`Z`第一种格式是[RFC 822 TimeZone](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html#rfc822timezone)`+0000`在您的日期字符串中匹配。有关[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)要在您的日期格式中使用的各种其他选项，请参阅。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T07:50:53.960

更改`SimpleDateFormat`为：

```
String time = "2012-12-08 13:39:57 +0000";
DateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss Z");
Date date = sdf.parse(time);
DateFormat sdf = new SimpleDateFormat("dd MMM yyyy HH:mm:ss");
String formatedTime = sdf.format(date);
System.out.println("Time: " + formatedTime); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T07:53:35.617

看看 SimpleDateFormat。代码是这样的：

```
SimpleDateFormat fromUser = new SimpleDateFormat("dd/MM/yyyy");
SimpleDateFormat myFormat = new SimpleDateFormat("yyyy-MM-dd");

String reformattedStr = myFormat.format(fromUser.parse(inputString)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T07:52:29.420

```
SimpleDateFormat simpleDateFormat=new SimpleDateFormat("dd-MM-yyyy");
Date date=simpleDateFormat.parse("23-09-2008"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T08:15:16.700

您可以使用 SimpleDateFormat 类来做到这一点！这样的：

```
DateFormat mydate1 = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
Date date1 = mydate1.parse(time); 
```

# ruby-on-rails-3 - How to render rails partial from presenter layer?

> ID：13967506
> 
> 赞同：4
> 
> 时间：2012-12-20T07:50:08.850
> 
> 标签：ruby-on-rails-3

Well, I'm into this situation as well now using rails `3.2.1` Following is the presenter in `app/presenters/form_presenter.rb`

```
class FormPresenter
  def render_form
    ActionView::Base.new.render partial: "passions/add_form"
  end
end 
```

From the view I'm calling,

```
...
= AddFormPresenter.new.render_form
... 
```

But it blows with the following error:

```
13:14:12 ActionView::MissingTemplate - Missing partial passions/passion_concept_add_form with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder, :slim, :coffee, :rabl]}. Searched in:
... 
```

There is this similar question at [RAILS-3.1 render method for ActionView::Base](https://stackoverflow.com/questions/6962811/rails-3-1-render-method-for-actionviewbase) but its not helpful.

How to render this partial from the presenter layer?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:54:52.713

好吧，我只是通过使用前置过滤器获取视图上下文来做到这一点。我的参考是这样的：[https ://github.com/amatsuda/active_decorator/blob/master/lib/active_decorator/view_context.rb](https://github.com/amatsuda/active_decorator/blob/master/lib/active_decorator/view_context.rb)

所以像：

```
class FormPresenter
  def render_form
    FromPresenter.view_context.render partial: "passions/add_form"
  end

  class << self
    def view_context
      Thread.current[:view_context]
    end

    def view_context=(view_context)
      Thread.current[:view_context] = view_context
    end
  end

  module Controller
    extend ActiveSupport::Concern

    included do
      before_filter do |controller|
        FormPresenter.view_context = controller.view_context
      end
    end
  end
end 
```

并在 application_controller.rb

```
class ApplicationController < ActionController::Base
...
   include FormPresenter::Controller
...
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T02:50:37.647

这不是典型的演示者模式。Presenter 用于集中简化视图渲染任务所需的复杂数据和逻辑。在这里，您正在演示者内部进行渲染。这真的是你想要的吗？

说答案是肯定的。然后仅仅创建一个新`ActionView::Base`的就是自找麻烦，因为初始化它并不简单[，如此处所示](http://snippets.aktagon.com/snippets/517-How-to-render-a-view-or-partial-from-a-Rake-task-model-or-anywhere)。类或其他类型的嵌套发生了一些奇怪的事情。`passion_concept_`错误消息中的前缀来自哪里？您似乎没有告诉我们我们需要的关于您的应用的所有信息。

通过明确地告诉演示者它在哪里呈现，您可能会感到高兴：

```
class FormPresenter

  def self.render_form(view)
    view.render partial: "passions/add_form"
  end

end 
```

然后在视图中：

```
= FormPresenter.render_form(self) 
```

（这里的解释也不清楚。什么是`AddFormPresenter`？）我目前没有可以尝试这个的机器，但它应该比你所拥有的更易于调试。

# android - How to building and running apjsua sample application

> ID：13967513
> 
> 赞同：0
> 
> 时间：2012-12-20T07:50:43.920
> 
> 标签：android

I wanted to try PJSIP on an Android AVD. I performed the following steps :

Now, the next step says : Building and running apjsua sample application

We have apjsua sample application located under `pjsip-apps/src/apjsua`. It is not built by default, and you need `SWIG` to build it.

Follow these steps to build apjsua:

> Make sure SWIG is in the build environment PATH. Alternatively, update SWIG path in $PJDIR/pjsip-apps/src/apjsua/jni/Android.mk file. Run ndk-build from directory $PJDIR/pjsip-apps/src/apjsua, note that the Android NDK root should be in the PATH, e.g:
> 
> Create Android project from apjsua. In Eclipse: From menu: File --> New --> Project Select Android Project from Existing Code, press Next In Root Directory, put the location of apjsua source code (i.e. $PJDIR/pjsip-apps/src/apjsua) and press Finish You may need to select different Android SDK than what is configured in apjsua. You can do this from the project's Properties. You can modify apjsua/res/raw/config.txt for apjsua's config file. Run it.

My question is : How to use swig? I am very confused.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:54:02.473

不用担心痛饮。您应该编译它，并将其添加到环境路径中。ndk-build 将调用 swig 应用程序。您可以通过输入终端 PATH=$PATH:/path/to/swig 将其添加到 PATH 中，其中 /path/to/swig 是您计算机上 swig 应用程序的位置。

# jquery - How to read json response jquery

> ID：13967519
> 
> 赞同：0
> 
> 时间：2012-12-20T07:51:15.440
> 
> 标签：jquery, json

I am getting this string as `json` response from my handler. And now i want to display only the **Name** value in alert, just to test the functionality.... How can i do this?

String is in below:

```
{
    "files": [
        {
            "Thumbnail_url": null,
            "Name": "Chrysanthemum.jpg",
            "Length": 879394,
            "Type": "image/jpeg"
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:53:29.423

假设您的 JSON 响应存储在`resp`.

```
alert(JSON.parse(resp).files[0].Name); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T07:53:00.390

尝试这个

**[现场演示](http://jsfiddle.net/GdsQR/)**

```
jonObj.files[0].Name 
```

如果您有字符串，则需要使用`$.parseJSON`将其转换为 json 对象。

**[现场演示](http://jsfiddle.net/wqnyx/1/)**

```
var jonObj = $.parseJSON('{"files": [{"Thumbnail_url": null, "Name": "Chrysanthemum.jpg", "Length": 879394,"Type": "image/jpeg"}]}');
alert(jonObj.files[0].Name);​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T07:54:06.293

首先，您需要解析 JSON：

```
var result = JSON.parse('{"files":[{"Thumbnail_url":null,"Name":"Chrysanthemum.jpg","Length":879394,"Type":"image/jpeg"}]}') 
```

然后你可以使用它来引用它：

```
result.files[0].Name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T08:00:16.637

```
//Note the jQuery.parseJSON function
var response = jQuery.parseJSON(JSON_Response);
$.each(response, function(object) {
    $.each(response[object], function(values) {
        console.log(response[object][values].Name)
        console.log(response[object][values].Length)
    });
})​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T08:00:51.987

为此，您可以使用[`jQuery.parseJSON`](http://api.jquery.com/jQuery.parseJSON/)它确实采用格式良好的 JSON 字符串并返回结果 JavaScript 对象。

```
var obj = jQuery.parseJSON('{"files":[{"Thumbnail_url":null,"Name":"Chrysanthemum.jpg","Length":879394,"Type":"image/jpeg"}]}'); 
```

然后

```
 obj.files[0].Name 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T08:03:24.990

如果您使用的是 jQuery，那么在成功函数中将数据作为参数传递并在`.each()`循环中访问它。

这应该是这样的：

```
$.each(data.files, function(i, el) {
  alert(el.name);
}); 
```

# c++ - 如何从基类调用模板参数的方法

> ID：13967522
> 
> 赞同：3
> 
> 时间：2012-12-20T07:51:26.230
> 
> 标签：c++

我有一个像下面这样在 vc++ 工作的 c++ 类，但在 linux gcc 4.7 中不再工作了。而且我不知道如何让它再次工作。

测试.h

```
template<typename a>
class test: public a
{
public:
    void fun();
}; 
```

测试.cpp

```
template<typename a>
void test<a>::fun()
{
   template_class_method(); <-- this is a public method from template_class 
}
    template class test<template_class>; 
```

模板类.h

```
class template_class {
public:
    template_class();
    virtual ~template_class();
    void template_class_method();

}; 
```

模板类.cpp

```
#include "templateclass.h"

template_class::template_class() {
    // TODO Auto-generated constructor stub

}

template_class::~template_class() {
    // TODO Auto-generated destructor stub
}

void template_class::template_class_method() {
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T07:53:46.663

您需要使用基类名称对其进行限定：

```
a::template_class_method(); 
```

资格`a::`是必要的，因为`template_class_method`存在于`a`. C++ 规则是，如果基类是类模板或模板参数，则其所有成员**不会**自动对派生类可见。为了帮助编译器找到成员，您需要告诉它在基类中查找成员，您需要*为该成员*`base::member_function()`限定or形式的成员`base::member_data`。

在您的情况下，由于基数是`a`，而成员是`template_class_method`，所以您必须这样写：

```
a::template_class_method(); 
```

请注意，这样的基类称为*依赖*基类，因为它*依赖*于模板参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T08:43:46.300

我不知道为什么@Karthik T 删除了答案，但那个答案是正确的。你有几个选择

1.  使用限定名`a::template_class_method()`

    ```
    template<typename a>
    class test : public a
    {
    public:
      void fun()
      {
        a::template_class_method();
      }
    }; 
    ```

2.  使用类成员访问语法`this->template_class_method()`

    ```
    template<typename a>
    class test : public a
    {
    public:
      void fun()
      {
        this->template_class_method();
      }
    }; 
    ```

3.  通过 using-declaration 使基类方法可见

    ```
    template<typename a>
    class test : public a
    {
    public:
      using a::template_class_method;
      void fun()
      {
        template_class_method();
      }
    }; 
    ```

请注意，第一种方法会抑制虚拟性`template_class_method`（如果是虚拟的），因此应谨慎使用。因此，首选方法 2，因为它保留了`template_class_method`.

您说`this->template_class_method()`“不起作用”的评论不清楚。它没有任何问题。此外，正如我上面所说，这通常是比使用限定名称更好的选择。

# c# - AndAl 之间也有几个表达式 > : 从范围引用

> ID：13967523
> 
> 赞同：8
> 
> 时间：2012-12-20T07:51:41.730
> 
> 标签：c#, .net, lambda, expression

我有 3 个谓词，我想在`AndAlso`两者之间做一个。我在板上找到了几个样本，但无法解决我的问题。

这些谓词是：`Expression<Func<T, bool>>`

我有这个代码：

```
Expression<Func<T, bool>> predicate1 = ......;
Expression<Func<T, bool>> predicate2 = ......;
Expression<Func<T, bool>> predicate3 = ......; 
```

我创建了一个扩展方法来制作“AndAlso”：

```
public static Expression<Func<T, bool>> AndAlso<T>(
    this Expression<Func<T, bool>> expr, 
    Expression<Func<T, bool>> exprAdd)
{
    var param = Expression.Parameter(typeof(T), "p");
    var predicateBody = Expression.AndAlso(expr.Body, exprAdd.Body);
    return Expression.Lambda<Func<T, bool>>(predicateBody, param);

    //Tried this too
    //var body = Expression.AndAlso(expr.Body, exprAdd.Body);
    //return Expression.Lambda<Func<T, bool>>(body, expr.Parameters[0]);
} 
```

我这样使用：

```
var finalPredicate = predicate1
    .AndAlso<MyClass>(predicate2)
    .AndAlso<MyClass>(predicate3); 
```

谓词看起来像这样： ![在此处输入图像描述](../Images/d81714c71a28ff26177dc31c6af43f81.png)

当我在查询中使用时：

```
var res =  myListAsQueryable().Where(finalPredicate).ToList<MyClass>(); 
```

我收到此错误： *从范围“”引用的“BuilderPredicate.MyClass”类型的变量“p”，但未定义*

你能告诉我有什么问题吗？

非常感谢，

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-20T08:42:09.330

问题是创建一个新参数 - 你可以这样做，但如果你只是将它分配给最终的 lambda，那么你的参数和提供的表达式中的原始参数之间没有任何联系。尝试更改表达式的参数名称，然后检查`finalPredicate`. 你会看到类似的东西：

```
{p => (((x.Age == 42) AndAlso (y.Salary == 50)) AndAlso z.FirstName.StartsWith("foo"))} 
```

现在问题应该很明显了。

Marc Gravell 在**[这个答案](https://stackoverflow.com/a/457328/1659828)**中建议一个 general `Expression.AndAlso`，这正是你所需要的：

```
public static Expression<Func<T, bool>> AndAlso<T>(
    this Expression<Func<T, bool>> expr1,
    Expression<Func<T, bool>> expr2)
{
    // need to detect whether they use the same
    // parameter instance; if not, they need fixing
    ParameterExpression param = expr1.Parameters[0];
    if (ReferenceEquals(param, expr2.Parameters[0]))
    {
        // simple version
        return Expression.Lambda<Func<T, bool>>(
            Expression.AndAlso(expr1.Body, expr2.Body), param);
    }
    // otherwise, keep expr1 "as is" and invoke expr2
    return Expression.Lambda<Func<T, bool>>(
        Expression.AndAlso(
            expr1.Body,
            Expression.Invoke(expr2, param)), param);
} 
```

（马克的代码，不是我）

# jquery - jQuery条件如果不在循环中

> ID：13967526
> 
> 赞同：-1
> 
> 时间：2012-12-20T07:51:58.443
> 
> 标签：jquery, if-statement, for-loop, conditional

如何在 For 循环的末尾添加条件？

**例子：**

```
if (state) {
    for (var i = 0, l = $imageLength; i < l; i++) {
        if ($images[i].url === state) {
            rGallery.init(i);
            break;
        }
    }

    /* Need to add here: if NOT in loop... blah*/

} else {
    rGallery.init();
} 
```

旁注，也可以改进逻辑以避免它... if (state has a match in the loop) init(i) else init()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:56:29.960

使用布尔变量怎么样：

```
var hasMatch = false;
if (state){
    for (var i = 0, l = $imageLength; i < l; i++){
        if ($images[i].url === state){
            rGallery.init(i);
            hasMatch = true;
            break;
        }
    }
}
if(!hasMatch){
    rGallery.init();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:56:28.870

您可以使用另一个变量作为标志并在循环后检查它：

```
var found = false;
if (state){
    for (var i = 0, l = $imageLength; i < l; i++){
        if ($images[i].url === state){
            rGallery.init(i);
            found = true;
            break;
        }
    }
}

if (!found){
    rGallery.init();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T07:56:50.520

如果在循环中找到结果，您可以设置一个标志：

```
var found = false;
for (var i = 0, l = $imageLength; i < l; i++){

    if ($images[i].url === state){

        rGallery.init(i);
        fount = true;
        break;
    }
}
if (!found) {
    /* Need to add here: if NOT in loop... blah*/
} 
```

# ibatis - MyBatis 在 SelectProvider 中是否不允许超过 1 个参数？

> ID：13967528
> 
> 赞同：0
> 
> 时间：2012-12-20T07:52:07.243
> 
> 标签：ibatis, mybatis

我有一个像这样的映射器方法：

```
@InsertProvider(class=com.something.class, method="doSomething")
public void insertSomething(Set<Integer> set, int guideId); 
```

在 something 类中，我有一个方法：

```
public String doSomething(Set<Integer> set, int guideId){
  // do something and returna a query
} 
```

它给了我一个错误：

> 为 SqlProvider 创建 SqlSource 时出错。在 SqlProvider 'com.something.class' 中找不到方法 'doSomething'

当我调试问题时..我发现在的构造函数中`ProviderSqlResource`，如果没有，它会抛出这个异常。的论点是`2 or more`。我想不出他们为什么会这样做。有什么解决方法？

这是方法：

```
public ProviderSqlSource(Configuration config, Object provider) {
    String providerMethodName = null;
    try {
      this.sqlSourceParser = new SqlSourceBuilder(config);
      this.providerType = (Class<?>) provider.getClass().getMethod("type").invoke(provider);
      providerMethodName = (String) provider.getClass().getMethod("method").invoke(provider);

      for (Method m : this.providerType.getMethods()) {
        if (providerMethodName.equals(m.getName())) {
          if (m.getParameterTypes().length < 2
              && m.getReturnType() == String.class) {
            this.providerMethod = m;
            this.providerTakesParameterObject = m.getParameterTypes().length == 1;
          }
        }
      }
    } catch (Exception e) {
      throw new BuilderException("Error creating SqlSource for SqlProvider.  Cause: " + e, e);
    }
    if (this.providerMethod == null) {
      throw new BuilderException("Error creating SqlSource for SqlProvider. Method '"
          + providerMethodName + "' not found in SqlProvider '" + this.providerType.getName() + "'.");
    }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T09:43:00.323

事实证明，我们可以在用`SelectProvider`（或任何其他提供者）注解的方法中传递任意数量的参数。但是实际提供查询的方法（`doSomething`在我的例子中）实际上将接收一个**参数，即所有参数的映射包装器**。例如，如果参数如上述问题（一个集合和一个整数），我们可以从映射（称为`parametersMap`）访问它们，如下所示：

```
Set<Integer> nums = (Set<Integer>) parametersMap.get("0"); 
int groupId = (Integer) parametersMap.get("1"); 
```

第一个参数键入“0”，第二个参数键入“1”，依此类推。

恕我直言，参数应该用它们的名字作为键，这样我们就可以做类似的事情：

```
parametersMap.get("set");
parametersMap.get("guideId") 
```

它可能会更干净。但这就是它的实现方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-16T11:42:41.103

要提供多个参数，请在参数中使用 @Param 标记。

# java - Java 正则表达式负前瞻

> ID：13967530
> 
> 赞同：4
> 
> 时间：2012-12-20T07:52:13.820
> 
> 标签：java, regex

在查看了**StackOverflow**上关于这个问题的答案后，我找到了我能找到的最准确的答案：

[Java 正则表达式：负前瞻](https://stackoverflow.com/questions/11125459/java-regex-negative-lookahead)

我去了[gskinner](http://gskinner.com/RegExr/)并对其进行了测试。我`/foo/(?!.*\\bbar\\b).+`在正则表达式匹配文本区域中输入了模式输入框和以下内容：

> /foo/abc123doremi
> 
> /foo/abc123doremi/bar/def456fasola

Gskinner 将这两者都识别为匹配项，但很明显 Gskinner 是错误的，或者上面的正则表达式模式不正确。有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T07:55:10.220

您正在寻找，`\bbar\b`而您的文本包含`/bar/`.

你的*意思*可能是`\bbar\b`（即`/foo/(?!.*\bbar\b).+`）

请注意，“复制`\`”*仅*在 Java 字符串文字内部需要。这使得在 Java 中编写正则表达式有点痛苦。

# c# - 在 wpf 中运行视频

> ID：13967539
> 
> 赞同：10
> 
> 时间：2012-12-20T07:53:02.980
> 
> 标签：c#, wpf, video

我希望我的第一个项目以视频的形式实现，我该怎么做？我想播放一个视频，然后当我点击表单时，视频停止并且应用程序转到另一个页面。请帮我。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-20T08:08:49.750

尝试使用 MediaElement

```
<MediaElement Name="VideoControl" 
              Source="C:\my.wmv" >    
</MediaElement> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T08:13:53.440

使用`MediaElement`控件，您可以在 WFP 中播放视频。XAML 代码：

```
<MediaElement Name="VideoControl" Width="200" Height ="400"
                  Source="your_path_to_video_file.wmv" >    
</MediaElement> 
```

它也播放 MPG 文件：`Source="C:\TestV.MPG"`

要了解如何使用播放、停止、暂停按钮来控制它，请单击[此处](http://www.c-sharpcorner.com/UploadFile/mahesh/VideoWPF04082007164613PM/VideoWPF.aspx)。这是一篇很好的文章，有很多例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T08:21:38.203

它非常简单，只需使用 wpf 中的 MediaElement 控件在表单上显示您的视频

[简单的 WPF 媒体播放器](http://www.codeproject.com/Articles/20478/A-simple-WPF-media-player-with-media-item-list)

# windows-xp - 重新启动 USB 插入设备而不重新启动计算机

> ID：13967544
> 
> 赞同：0
> 
> 时间：2012-12-20T07:53:10.827
> 
> 标签：windows-xp, restart, gsm

我正在处理一个问题，即 USB GSM 调制解调器引发异常并处于故障状态，直到您关闭并再次打开 PC。

“重新启动”没有帮助，因为它只会刷新内存（在 Windows XP、SP3 Pro 上运行。）

正如我怀疑的那样，当USB的电源关闭并再次打开时，问题可能会得到解决。

但是有没有办法在不关闭整个 PC 的情况下做到这一点（比如在设备管理器中删除并添加设备）？

你也知道我怎样才能模拟这种状态吗？它是随机发生的，我无法按照自己的意愿去做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:22:18.507

你说它是一个 USB 设备（即未集成）。除了重新启动 PC 之外，为设备重新供电的唯一可靠方法是拔下并重新插入设备（无论如何这更快）。

这里有一个讨论：http: [//social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/326d26e7-baa9-45b4-8234-321c9e5f8ffa/](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/326d26e7-baa9-45b4-8234-321c9e5f8ffa/)

设备中发生了异常，并且不知道是什么原因导致的，您无法可靠地重现它。也许设备供应商有一些软件可以帮助您收集其日志。

# delphi - 如何从所有 HID 设备捕获按钮按下？

> ID：13967545
> 
> 赞同：0
> 
> 时间：2012-12-20T07:53:16.800
> 
> 标签：delphi, usb, delphi-2009, hid

我有兴趣从任何可用的 HID 设备捕获按钮按下（或按钮向下/按钮向上），以便为该特定按钮/键分配功能，就像大多数游戏允许您为特定命令分配特定按钮一样。

我正在使用`TjvHidController`, 并且为我知道的设备（Leo Bodnar Sli-M 和 Sli-Pro）清楚地映射了按钮按下，但我无法弄清楚如何枚举任何其他设备并以某种方式弄清楚有多少他们拥有的按钮，以及在哪里可以找到消息中的开/关位等。

有人可以发布一些示例代码，“解析” a`THidDevice`并计算出它有多少个按钮，以及在它的数据包中寻找什么？

# configuration - 从 WIX 设置更新 app.config？

> ID：13967551
> 
> 赞同：5
> 
> 时间：2012-12-20T07:53:38.690
> 
> 标签：configuration, windows-services, wix, installation

我正在尝试 Wix 3.6，这就是它现在的样子：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<Directory Id="TARGETDIR" Name="SourceDir">
    <Directory Id="myappINSTALLDIR" Name="myapp5Service">
        <Component Id="SampleServiceComponent" DiskId="1" Guid="6f51c0f3-776c-4aec-a200-1f199352c6c3" Win64="yes">
          <File Id="myapp5.WindowsService.exe" Name="myapp5.WindowsService.exe" Source="$(var.myapp.WindowsService.TargetDir)\myapp5.WindowsService.exe" KeyPath='yes'/>
          ...

          <ServiceInstall Id="InstallmyappService" DisplayName="myappService" Name="myapp5.WindowsService.exe" Description="myapp 5 Service - För effektivare och enklare operationsplanering" Account="LocalSystem" ErrorControl="normal" Start="auto" Type="ownProcess" Vital="yes" />
          <ServiceControl Id="ControlmyappService" Name="myapp5.WindowsService.exe" Start="install" Stop="both" Remove="uninstall" Wait="yes" />
        </Component>
    </Directory>
</Directory>

<WixVariable Id="WixUIBannerBmp" Value="$(var.ProjectDir)\Image\myappTopBanner.bmp" />
<WixVariable Id="WixUIDialogBmp" Value="$(var.ProjectDir)\Image\myappDialogBackground.bmp" />

<Property Id="WIXUI_INSTALLDIR" Value="myappINSTALLDIR" />
<UIRef Id="WixUI_InstallDir" />

<Feature Id="ProductFeature" Title="Wix_myapp.WindowsService" Level="1">
  <ComponentRef Id="SampleServiceComponent" />
</Feature>
<Media Id="1" Cabinet="SampleServiceComponent.cab" EmbedCab="yes" />
</Product> 
```

现在我需要向 Wix 设置添加一个对话框，其中一个 appSetting 和一个 baseadress(WCF) 设置为 app.config。这大部分在安装之前完成，因为它将决定 Wix 正在安装的 Windows 服务的名称。

和例子会很棒！

编辑1：

```
 <WixVariable Id="WixUIBannerBmp" Value="$(var.ProjectDir)\Image\myappTopBanner.bmp" />
<WixVariable Id="WixUIDialogBmp" Value="$(var.ProjectDir)\Image\myappDialogBackground.bmp" />

<Property Id="SERVICEADDRESS" Value="http://serviceaddress"/>
<Property Id="WIXUI_INSTALLDIR" Value="myappINSTALLDIR" />
<UIRef Id="WixUI_InstallDir" />

<util:XmlFile Id="UpdateBaseAddress"
  Action="setValue"
  File="$(var.myapp.WindowsService.TargetDir)\myapp5.WindowsService.exe.config"
  SelectionLanguage="XPath"
  Permanent="yes"
  ElementPath="/configuration/applicationSettings/ServiceName"
  Name="baseAddress" Value="[SERVICEADDRESS]" />

<Feature Id="ProductFeature" Title="Wix_myapp.WindowsService" Level="1">
  <ComponentRef Id="SampleServiceComponent" />
</Feature>
<Media Id="1" Cabinet="SampleServiceComponent.cab" EmbedCab="yes" />
</Product> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T09:52:17.853

您可以在安装程序项目中添加对 WixUtilExtension.dll 的引用，然后使用 XmlFile 更新 app.config，如：

```
<Property Id="SERVICEADDRESS" Value="http://serviceaddress"/>

<util:XmlFile Id="UpdateBaseAddress" 
  Action="setValue" 
  File="[DirApplication]$(var.app.config)"
  SelectionLanguage="XPath" 
  Permanent="yes"
  ElementPath="/configuration/applicationSettings/...."
  Name="baseAddress" Value="[SERVICEADDRESS]" /> 
```

请注意，您需要设置 .config 文件的目录和名称（您可以使用 $(var. *ProjectName* .TargetFileName).config自动为您*解决*

# java - 如何在静态方法中模拟对象？

> ID：13967556
> 
> 赞同：5
> 
> 时间：2012-12-20T07:54:07.180
> 
> 标签：java, static, mocking

我正在尝试在静态方法中模拟静态方法。

我想知道是否可以**不使用任何框架**。

以下是我尝试过的。

**目标：** 模拟 ImageIO 对象，以便我知道返回值的期望。

```
class Foo {

  public static SomeObject Run(String path) {
     File file = new File(path);
     BufferedImage buff = ImageIO.read(file);

     SomeObject some = new SomeObject(buff);
     return some;
  }
} 
```

我首先尝试使用接口并为 ImageIO 创建一个包装器。

```
 interface ImageReader {
     public BufferedImage read(File file);
 }

 class RealReader implements ImageReader {
     @Override
     public BufferedImage read(File file) {
         return ImageIO.read(file);
     }
 }

 class MockReader implements ImageReader {
     @Override
     public BufferedImage read(File file) {
         BufferedImage buff = new BufferedImage(0,0,0);
         //do whatever I like here and return the buff
         return buff;
     }
 }

 class Foo {

      public static SomeObject run(String path) {
         File file = new File(path);

         //ImageIO wrapper             
         ImageReader reader = getImageReader();
         BufferedImage buff = reader.read(file);

         SomeObject some = new SomeObject(buff);
         return some;
      }

      public static getImageReader() {
         return RealReader();
      }
  } 
```

我试图覆盖静态 getImageReader() 以便我可以返回 MockReader 对象，然后调用模拟版本的 read() 方法：

```
class MockFoo {
    @Override
    public static getImageReader() {
        return MockReader();
    }
} 
```

**这是我的测试代码：**

```
public void TestRun() {

    MockFoo foo = new MockFoo();
    foo.run();

} 
```

然后我想我不能覆盖静态方法getImageReader（）......

有没有办法实现我的目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T07:59:54.110

一种方法是更改​​ 的签名`run`：

```
public static SomeObject run(ImageReader imageReader, String path) {
    // ... 
```

# java - Solr - java.net.SocketException：打开的文件太多

> ID：13967557
> 
> 赞同：1
> 
> 时间：2012-12-20T07:54:13.637
> 
> 标签：java, linux, solr, jboss, solrj

我在我的项目中使用**solr 3.6.1**，从昨天开始，如果我尝试更新索引，则会出现以下错误：

```
Socket accept failed: java.net.SocketException: Too many open files

org.apache.lucene.store.LockObtainFailedException: Lock obtain timed out: 
  NativeFSLock@/opt/jboss-as-7.1.1.Final/domain/servers/server-one/lib/apache-solr-3.6.1-
 /example/solr/./data/index/write.lock 
```

我已经找到了以下“解决方案”来避免这些错误（？）：

*   solrconfig.xml：
    *   将索引更改为复合索引：`<useCompoundFile>true</useCompoundFile>`
    *   降低合并因子：`<mergeFactor>2</mergeFactor>` -> 最佳值 > 2 和 < 10（= 默认值）？
*   文件描述符：
    *   例如`ulimit -n200000`

什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:33:32.337

这对我有用：

将以下行插入 /etc/security/limits.conf

```
* soft nofile 65535
* hard nofile 65535 
```

然后注销/登录或为您运行服务器的用户打开新会话。

# jenkins - 从詹金斯自动化弗兰克

> ID：13967560
> 
> 赞同：2
> 
> 时间：2012-12-20T07:54:36.547
> 
> 标签：jenkins, continuous-integration, cucumber, automated-tests, frank

我正在尝试使用 Frank 自动化 jenkins 的测试会话。

这是我收到的错误消息。

```
 (Frank::Cucumber::FrankNetworkError)
  ./step_definitions/test_steps.rb:30:in `/^I navigate to button V\303\244der$/'
  test.feature:41:in `When I navigate to <link>'
  | Radar       | Norrland    |

  *********************************************
  Oh dear. Your app fell over and can't get up.
  ********************************************* 
```

Jenkins 从 git 中检查代码，除此之外我还添加了一个 shell 命令，如下所示。

```
cd ios    #<--this is so that I go to the root folder, the one with the .xcodeproj project
frank setup
frank build
frank launch
mv features/*.feature Frank/features/.  #<--- this is the testscript
mv features/step_definitions/*.rb Frank/features/step_definitions/.   #<--here it is moved to the newly created frank/features & Frank/features/step_definitions folder
cd Frank/features
cucumber test.feature 
```

一切都是按照它应该的方式构建的，如果我去服务器
并从我的 shell 命令中手动输入最后一行，测试就会被执行。

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T16:21:45.747

每次您的应用程序崩溃时都会发生这种情况。当应用程序崩溃时，frank 停止接收事件，并且 cucumber 以您看到的错误结束。

有两个可能的原因：

1.  您的应用程序中存在导致应用程序崩溃的错误
2.  Frank 有一个错误导致您的应用崩溃

您应该检查崩溃/应用程序日志以查看确切原因。

我了解到这对于通过 jenkins 作业捕获应用程序日志非常有帮助，例如

```
function grab_log_and_fail {
    APP_NAME = "MyApplication"

    # get the PID of the last process with the given name
    PID=$( cat /var/log/system.log | grep "$APP_NAME\[" | tail -n 1 | sed -e "s/^.*$APP_NAME\   [\([^\]*\)\].*/\1/g" )

    # grab all the messages from the process with the PID
    cat /var/log/system.log | grep "$APP_NAME\[$PID\]" >"$WORKSPACE/$APP_NAME.log"

    #fail the job
    exit 1
} 
```

您可以使用它来调用它

```
cucumber test.feature || grab_log_and_fail 
```

（仅当 cucumber 以错误结束时才会获取日志）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:28:24.423

我个人在 Mac 上运行 Jenkins 时遇到了很多问题。特别是如果您使用 Jenskins Mac 映像安装程序，Jenkins 总是在安装期间创建的“jenkins”用户下运行。

这让我很头疼从内部作业运行黄瓜或启动 iOS 模拟器。

我终于学会了在我自己的用户下启动 Jenkins，像这样：“nohup java -jar /Applications/Jenkins/jenkins.war --httpPort=8080

从那时起，我就可以毫无问题地运行黄瓜了。希望这可以帮助。

# mongodb - 聚合框架管道中的数组子集

> ID：13967569
> 
> 赞同：1
> 
> 时间：2012-12-20T07:55:29.393
> 
> 标签：mongodb, aggregation-framework

在上一个[问题](https://stackoverflow.com/questions/13529323/obtaining-group-result-with-group-count)中，我想使用管道操作获取结果组的计数。按照建议，我使用了以下内容：

```
db.test.aggregate(
    {$unwind: '$tags'}, 
    {$group:{_id: '$tags', count:{$sum:1}}},
    {$project:{tmp:{tag:'$_id', count:'$count'}}}, 
    {$group:{_id:null, total:{$sum:1}, data:{$addToSet:'$tmp'}}}
) 
```

现在知道了计数，我想按页面显示结果，所以我只需要`data`. 我最初的想法是在管道中使用`$slice`on ，例如：`data``$project`

```
...
{$project: {data : { $slice: [20,20] }, total: 1} 
```

但它似乎`$slice`不是一个有效的操作`$project`。我尝试了一种解决方法：

```
db.test.aggregate(
    {$unwind: '$tags'}, 
    {$group:{_id: '$tags', count:{$sum:1}}},
    {$project:{tmp:{tag:'$_id', count:'$count'}}}, 
    {$group:{_id:null, total:{$sum:1}, data:{$addToSet:'$tmp'}}},
    {$unwind: '$data'},
    {$skip: 20},
    {$limit: 20}
) 
```

但看起来，我执行了另一个`$unwind`管道。有没有更好的解决方案来实现我想要做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T06:42:25.430

不幸的是，目前（在 MongoDB 2.2 中）没有[聚合框架](http://docs.mongodb.org/manual/reference/aggregation/)运算符来获取`$slice`或获取数组的子集。

您将需要使用一种解决方法，例如：

*   您的使用`$skip`和`$limit`在`aggregate()`管道中
*   操作应用程序代码中的结果。
*   [使用Map/Reduce](http://docs.mongodb.org/manual/applications/map-reduce/)实现聚合

MongoDB 问题跟踪器中有一个现有的功能请求，您可以投票/观看：[SERVER-6074: Allow $slice operator in $project](https://jira.mongodb.org/browse/SERVER-6074)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-09T05:52:51.767

**正如 Stennie 所说，在2.2 版本**的 mongo 中没有`$slice`聚合框架，但在即将发布的**3.2 版本**的 mongo 中，他们添加了它。

 ****所以现在你可以[在聚合中使用 $slice 了](https://docs.mongodb.org/manual/release-notes/3.2-reference/#exp._S_slice)。从数组的开头或结尾`{ $slice: [ <array>, <n> ] }` 返回元素： 从数组中的指定位置返回元素：`{ $slice: [ <array>, <position>, <n> ] }`。

还有来自 mongo 页面的几个例子：

```
{ $slice: [ [ 1, 2, 3 ], 1, 1 ] }   // [ 2 ]
{ $slice: [ [ 1, 2, 3 ], -2 ] }     // [ 2, 3 ]
{ $slice: [ [ 1, 2, 3 ], 15, 2 ] }  // [  ]
{ $slice: [ [ 1, 2, 3 ], -15, 2 ] } // [ 1, 2 ] 
```****

# windows-7 - Zend Framework 2 WAMP 服务器入门

> ID：13967571
> 
> 赞同：1
> 
> 时间：2012-12-20T07:55:29.980
> 
> 标签：windows-7, wamp, zend-framework2

我一直在尝试遵循本教程：[教程](http://framework.zend.com/manual/2.0/en/user-guide/overview.html)

我无法通过第 2 页。当我尝试运行命令时：

```
php composer.phar create-project --repository-url="http://packages.zendframework.com" C:\wamp\www\zendTutorial 
```

我收到这些消息：

```
[RuntimeException]...[Composer\Downloader\TransportException]<br>
The "http://packages.zendframework.com/packages.json" file could not be downloaded: failed to open stream: Unable to find the socket transport "ssl" - did you forget to enable it when you configured PHP? 
```

我`ssl_module`在 Apache 模块和`php_openssl`PHP 扩展中启用，然后弹出一个运行时错误窗口，我没有阅读，因为我认为我会重新启动服务器，一切都会好起来的。

然后我发现我必须创建一个私钥/公钥对，所以我遵循了这个教程：[教程](http://blog.facilelogin.com/2008/07/enabling-ssl-on-wamp.html)

但我意识到我跳过了我必须下载的步骤`WSAS`（第三个应用程序下载只是为了让这只猪发声）从密钥库中导出我的 pk，我决定踩刹车并问“真的吗？” 有没有捷径可以绕过所有这些废话，以便我可以从教程开始？在过去的 3 个小时里，我一直在做这件事，我受够了——这令人沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:42:07.920

> 注意 另一种安装 ZendSkeletonApplication 的方法是使用 github。转到[https://github.com/zendframework/ZendSkeletonApplication](https://github.com/zendframework/ZendSkeletonApplication) ...

试试这个方法。获取 git 并从中克隆存储库

> [https://github.com/zendframework/ZendSkeletonApplication.git](https://github.com/zendframework/ZendSkeletonApplication.git)

为此，将控制台 (cmd.exe) 更改为您的工作区并键入

> git 克隆[https://github.com/zendframework/ZendSkeletonApplication.git](https://github.com/zendframework/ZendSkeletonApplication.git)

它应该创建一个包含框架应用程序的子文件夹 ZendSkeletonApplication。

稍后，当您拥有骨架应用程序项目时，您可以按照教程中的描述运行 composer 来获取依赖项。

# unix - 如何使用 mv 命令重命名 unix 中的多个文件？

> ID：13967572
> 
> 赞同：5
> 
> 时间：2012-12-20T07:55:32.973
> 
> 标签：unix, command, rename, mv

我正在尝试将多个文件重命名`xyz[n]`为扩展名`xyz`

例子 ：

```
mv *.xyz[1] to *.xyz 
```

但错误来了 -`" *.xyz No such file or directory"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T08:13:02.220

不知道 mv 是否可以直接使用 * 但这会起作用

```
find ./ -name "*.xyz\[*\]" | while read line
do 
mv "$line" ${line%.*}.xyz
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T06:33:05.343

假设我们有一些文件，如下所示。现在我想从这些文件中删除部分 -(ab...)。

```
> ls -1 foo*
foo-bar-(ab-4529111094).txt
foo-bar-foo-bar-(ab-189534).txt
foo-bar-foo-bar-bar-(ab-24937932201).txt 
```

所以预期的文件名是：

```
> ls -1 foo*
foo-bar-foo-bar-bar.txt
foo-bar-foo-bar.txt
foo-bar.txt
> 
```

下面是一个简单的方法。

```
> ls -1 | nawk '/foo-bar-/{old=$0;gsub(/-\(.*\)/,"",$0);system("mv \""old"\" "$0)}' 
```

有关详细说明，请[在此处查看](http://theunixshell.blogspot.com/2013/01/bulk-renaming-of-files-in-unix.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T14:46:45.130

[这是使用StringSolver](https://github.com/MikaelMayer/StringSolver)自动化工具的另一种方法。假设您的第一个文件被命名`abc.xyz[1]`为第二个命名`def.xyz[1]`和第三个命名`ghi.jpg`（与前两个不同的扩展名）。

首先，通过给出示例过滤您想要的文件（ok 和 notok 是第一个描述接受的文件的任何词）：

```
filter abc.xyz[1] ok def.xyz[1] ok ghi.jpg notok 
```

然后使用它创建的过滤器执行移动：

```
mv abc.xyz[1] abc.xyz
mv --filter --all 
```

第二行概括了所有以`.xyz[1]`.

最后两行也可以缩写为一行，它执行动作并立即将其概括：

```
mv --filter --all abc.xyz[1] abc.xyz 
```

免责声明：出于学术目的，我是该作品的合著者。其他示例可在[youtube](http://www.youtube.com/watch?v=NNFY9azdblQ&list=UUzgLw5m__x6tRoy4wW4OPow&feature=share)上找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-06T16:04:24.670

我认为 mv 不能在没有循环的情况下直接对多个文件进行操作。请改用重命名命令。它使用正则表达式，但一旦掌握就易于使用且功能更强大。

```
rename 's/^text-to-replace/new-text-you-want/' text-to-replace* 
```

例如，将目录中的所有 .jar 文件重命名为 .jar_bak

```
rename 's/^jar/jar_bak/' jar* 
```

# php - 左连接的 MySQL / 教义问题

> ID：13967573
> 
> 赞同：1
> 
> 时间：2012-12-20T07:55:35.940
> 
> 标签：php, mysql, doctrine

我对数据库的原则查询有疑问，我不确定出了什么问题。这是交易：这是我用来创建数据库的实际 mysql 查询：

```
 create table productos ( 
                codigoProducto int (8) unsigned auto_increment primary key, 
                nombre varchar(100) not null,
                id_categoria smallint(3) unsigned,
                descripcion text,
                foto varchar(100),
                precio smallint (4) unsigned not null, 
                visitado int (7),
                habilitado boolean,

                foreign key (id_categoria) 
                references  categorias(id)
                on update cascade
                on delete restrict
            )engine=innoDB;

            create table facturas( 
                id int (8) unsigned auto_increment primary key,
                id_comprador int (7) unsigned, 
                metodo_pago boolean,
                forma_entrega boolean,
                fecha datetime,

                foreign key (id_comprador)
                references  compradores(id)
                on update cascade
                on delete cascade
            )engine=innoDB;

            create table detallefactura(
                id int(8) unsigned auto_increment primary key,
                id_producto int(8) unsigned,
                id_factura int(8) unsigned,
                cantidad smallint (4),

                foreign key(id_producto)
                references productos(codigoProducto)
                on update cascade
                on delete cascade,

                foreign key(id_factura)
                references facturas(id)
                on update cascade
                on delete cascade
            )engine=innoDB; 
```

"detelleFactura" 是 'productos' 和 'facturas' 的连接表，以便每张发票有超过 1 个产品。因此，通过以下方式，我尝试将所有购买的产品都放在一张发票中：

```
 static function traerProductosComprados($id){
                $query = Doctrine_Query::create()
                        ->select('d.id, p.nombre, p.precio, d.cantidad')
                        ->from('Detallefactura d')
                        ->leftjoin('d.Productos p')
                        ->where('d.id_factura = ?',$id);
                return $query->execute()->toArray();
            } 
```

如果我回显查询，它会显示以下内容：

```
 SELECT d.id, p.nombre, p.precio, d.cantidad FROM Detallefactura d LEFT JOIN d.Productos p WHERE d.id_factura = ? 
```

当我将此粘贴到 phpmyadmin 时，它会引发以下错误：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 'WHERE d.id_factura = ? LIMIT 0, 30' 在第 1 行；

我现在没有想法，请告诉我是否还有其他我想念的东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:28:30.813

您需要`ON`为左连接指定子句

# mysql - 如果从顶部相同，如何隐藏/删除行中的数据

> ID：13967574
> 
> 赞同：1
> 
> 时间：2012-12-20T07:55:36.733
> 
> 标签：mysql, sql, select, sum

我有这样的mysql查询的表事务。

```
 ____________________________________________________________
 | id | noskom      | nonpbm     |    noskop   |    npbp     |
 |____|_____________|____________|_____________|_____________|
 |  1 | 001         |   10       |       20    |       20    |
 |  2 | 001         |   20       |       10    |       20    |
 |  3 | 002         |    5       |       10    |       20    |
 |  4 | 003         |   30       |        5    |       20    |
 |____|_____________|____________|_____________|_____________| 
```

我想要结果

```
 select sum(nonpbm),sum(noskop),sum(npbp) from transaction group by noskom

 ____________________________________________________________
 | id | noskom      | nonpbm     |    noskop   |    npbp     |
 |____|_____________|____________|_____________|_____________|
 |  1 | 001         |   30       |       30    |       40    |
 |  2 |             |            |             |             |
 |  3 | 002         |    5       |       10    |       20    |
 |  4 | 003         |   30       |        5    |       20    |
 |____|_____________|____________|_____________|_____________| 
```

什么是mysql查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:59:49.333

```
SELECT 
    noskom , 
    SUM(nonpbm) as nonpbm , 
    sum(noskop) as noskop , 
    sum(npbp) as  npbp
FROM mytable 
GROUP BY noskom 
```

如果要列出对聚合值有贡献的所有行的 ID，还可以添加此列：

```
GROUP_CONCAT(id ORDER BY id) AS id 
```

这将为您提供一个以逗号分隔的 ID 列表。您可以指定不同的分隔符，例如 EOL：

```
GROUP_CONCAT(id ORDER BY id SEPARATOR '\r\n') AS id 
```

`'\r\n'`是 Windows 世界中的标准行分隔符。更改为 just`'\n'`或`'\r'`如果您在不同的平台上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:23:57.660

```
select transaction.id,t.noskom,t.sum_nonpbm,t.sum_noskop,t.sum_npbp
from transaction
left join 
(
   select noskom, min(id) min_id, 
               sum(nonpbm) sum_nonpbm,
               sum(noskop) sum_noskop,
               sum(npbp) sum_npbp 
   from transaction 
   group by noskom
) t on (transaction.id=t.min_id)
order by transaction.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T08:42:23.180

试试这个查询::

```
select tbl2.id,tbl1.noskom,tbl1.sum1,tbl1.sum2,tbl1.sum3 from
(select id,noskom,sum(nonpbm) sum1,sum(noskop) sum2,sum(npbp) sum3 from tbl group by noskom) tbl1
 right join
(select id,null a,null b,null c,null d
from tbl) tbl2
on tbl1.id = tbl2.id
order by 1 ; 
```

# yii - 在控制器中设置 const 并在 yii 中作为下拉列表调用视图

> ID：13967575
> 
> 赞同：3
> 
> 时间：2012-12-20T07:55:39.413
> 
> 标签：yii, constants

我在控制器中有三个 const：

```
const TEST1 = 1;
const TEST2 = 2;
const TEST3 = 3; 
```

我如何将这些值称为下拉列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:01:27.790

如果您对不同模型中的所有常量感到困惑，您可以使用我编写的代码片段来管理它们。请参阅[轻松管理常量](http://www.yiiframework.com/wiki/288/managing-constants-easily/)（yii wiki 文章）

我将仅复制功能和一个示例，但要获取完整的 wiki 和详细信息，请访问上面的链接。

将此方法直接放在父类或模型类中：

```
class ActiveRecord extends CActiveRecord {
    const TEST_1 = 1;
    const TEST_2 = 2;
    const TEST_3 = 3;

    /*
        Get class constants by token.
        If you set constants with same prefix, like:
        TEST_1
        TEST_2
        TEST_3

        , you can get it by calling
        Class::getConstants('TEST_');
    */
    public static function getConstants($token,$objectClass) {
        $tokenLen = strlen($token);

        $reflection = new ReflectionClass($objectClass); //php built-in 
        $allConstants = $reflection->getConstants(); //constants as array

        $tokenConstants = array(); 
        foreach($allConstants as $name => $val) {
        if ( substr($name,0,$tokenLen) != $token ) continue;
        $tokenConstants[ $val ] = $val;
        }
        return $tokenConstants;
    }

} 
```

之后，您可以使用此方法获取数组中的特定常量（来自一组）：

```
self::getConstants('TEST_',__CLASS__); //inside same class
ActiveRecord::getConstants('TEST_','ActiveRecord'); //outside, somewhere else in view or controller 
```

对于下拉列表，它看起来像（如果 MyModel 有父 ActiveRecord）

```
echo CHtml::dropDownList('name','selected',
    MyModel::getConstants('TEST_','MyModel'),
    array(// for htmlOptions
    )
); 
```

现在，如果添加新常量，您可能会忘记编辑代码中的所有位置。它会自动添加到您的所有下拉列表或其他任何内容中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:25:37.027

简单，只需使用：

```
$this::TEST1; 
```

在下拉列表中：

```
echo CHtml::dropDownList('name','selected',
    array($this::TEST1=>'Test1',$this::TEST2=>'Test2',$this::TEST3=>'Test3'),
    array(// for htmlOptions
    )
); 
```

# javascript - ExecJS - Ruby 中的 Javascript 对象实例？

> ID：13967576
> 
> 赞同：4
> 
> 时间：2012-12-20T07:55:42.313
> 
> 标签：javascript, ruby, execjs

如果我有一个 javascript 对象，我通常会像这样与该对象及其方法进行交互：

```
var obj = someObject.getInstance();
var result = obj.someMethod(); 
```

其中 someMethod 的定义如下：

```
someObject.prototype.someOtherMethod = function() { //do stuff };
someObject.prototype.someMethod = function(foo) { this.someOtherMethod(); }; 
```

但是，当我想通过 ExecJS 在 Ruby 中调用 someMethod 时出现错误：

```
context = ExecJS.compile(# the javascript file)
context.call('someObject.getInstance().someMethod') 
# Gives a TypeError where Object has no method 'someOtherMethod' 
```

另一方面，在 javascript 模块中定义的函数工作正常：

```
someFunction = function() { // do stuff };

# in Ruby
context.call('someFunction') # does stuff 
```

ExecJS 可以处理 Javascript 对象及其方法，还是我只能用它调用函数？

关于具体的应用程序，我正在研究[https://github.com/joenoon/libphonenumber-execjs](https://github.com/joenoon/libphonenumber-execjs)，但由于上述原因，Libphonenumber 中的解析功能不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T01:37:58.810

通过一些实验发现了答案。我设法通过使用 context.exec() 而不是调用来获得所需的功能。

```
js = <<JS
var jsObj = someObject.getInstance();
var res = jsObj.someMethod();
return res;
JS

context.exec(js); 
```

但是，如果您的方法返回一个 Javascript 对象，则必须先将其序列化或以其他方式解析结果，以便 ExecJS 可以将其返回到合适的 Ruby 对象中。

# c - 指针和执行速度

> ID：13967583
> 
> 赞同：6
> 
> 时间：2012-12-20T07:56:24.117
> 
> 标签：c, pointers

一些博客和网站都在谈论指针是有益的，原因之一是因为有指针的程序比没有指针的程序的“执行速度”要好。我能解决的是：

*   取消引用单个位置需要两次（或更多）内存访问（取决于间接次数）。与直接使用相比，这将增加执行时间。

*   将指向大型数据类型的指针传递给函数（如结构）可能是有益的，因为只有结构/联合的地址被复制，而不是按值传递。因此，在这种情况下它应该更快。

例如，只需强制引入指针而无需任何需要：

```
int a, b, *p, *q, c, *d;
p = &a;
q = &b;
d = &c

// get values in a, b 

*d = *p + *q;  // why the heck this would be faster
c = a + b;     // than this code? 
```

我使用指针版本检查了汇编器输出`gcc -S -masm=intel file.c`，与直接方法相比，指针版本有很多加载内存和解引用存储。

我错过了什么吗？

*注意：这个问题不仅仅与代码有关。代码只是一个例子。不考虑编译器优化。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T07:59:57.860

我觉得你的结论基本是对的。作者并不是说使用更多的指针总是会加快所有代码的速度。这显然是无稽之谈。

但是有时传递指向数据的指针而不是复制该数据会更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:44:31.183

你在你的例子中是对的 - 该代码会运行得更慢。一个可以更快的地方是在进行函数调用时：

```
void foo( Object Obj );
void bar( const Object * pObj );

void main()
{
    Object theObject;
    foo( theObject );  //  Creates a copy of theObject which is then used in the function.
    bar( &theObject );  //  Creates a copy of the memory address only, then  the function references the original object within.
} 
```

`bar`更快，因为我们不需要复制整个对象（假设对象不仅仅是基本数据类型）。然而，在这种情况下，大多数人会使用引用而不是指针。

```
void foobar( const Object & Obj ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T08:17:05.607

正如您所指出的：*将指向大型数据类型的指针传递给函数*；这里的结构是 a `int`，所以它几乎不大。顺便说一句：我猜 gcc 会在您使用 -O2 时优化指针访问。

除此之外，您的理解是正确的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-20T08:30:59.377

马克拜尔斯是绝对正确的。在这样一个简单的程序中，你无法判断指针的威力。指针用于优化内存管理，加快程序的执行速度，在过度使用数据结构和通过地址完成引用的情况下。考虑当你启动一个程序时，它需要一些时间来加载，但如果程序提前 1 秒加载，那么可以有效地使用指针和技能，这是一个很大的成就。

# jquery - 在 IE 系列中看不到流程图

> ID：13967591
> 
> 赞同：-1
> 
> 时间：2012-12-20T07:56:47.887
> 
> 标签：jquery

我在我的网页上使用 Flot 图，但对于 IE 系列浏览器，它们是不可见的。在 Google 上搜索后，我找到了**IE-9**的解决方案/修复程序，但没有找到**IE-7**或**IE-8**的解决方案/修复程序。有人知道这两个版本的 IE 的修复方法吗？

这是我找到**IE-9**修复程序的链接：[Flot graphs were not visible in IE 9](http://drupal.org/node/1479748)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:32:16.100

知道了

```
<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="<?php echo base_url(); ?>assets/js/flot/excanvas.min.js"></script><![endif]--> 
```

# sql - Oracle序列,更改和查看

> ID：13967594
> 
> 赞同：0
> 
> 时间：2012-12-20T07:57:02.580
> 
> 标签：sql, oracle, sequences

我想更新现有序列的缓存大小，并且我想在 oracle 中描述一个序列，如 table 。怎么做 ？

以及增加序列的缓存值的所有缺点是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:59:36.467

```
Alter sequence seq_name cache 20; 
```

请参阅[文档](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_2011.htm)。

要获取 ddl，您可以使用 dbms_metadata 包，它可以用于任何对象：

```
select dbms_metadata.get_ddl('SEQUENCE','SEQ_NAME') from dual; 
```

当您从序列中获取大量数据时，增加缓存大小很有用。考虑到您使用它们的事实，增加它没有任何缺点。

但是，如果您一次生成 100 万个值并且只使用 10 个，则可能不是一个好主意，因为丢失了 999990 个值。下一个会话将生成另外 1000000 个值。我认为引擎可以生成它们并为您的会话分配值。

例如，在我看来，缓存比您通常在会话中使用的少 10 倍是可以的。

**更新**：添加大卫奥尔德里奇的评论：

> 大缓存的有用性实际上与一般使用它的速率有关，因此不仅适用于大型选择，而且适用于具有许多会话的系统，每次都使用一个值。作为背景，小缓存的性能问题是由缓存耗尽时需要修改 SEQ$ 系统表引起的。这是一个小操作，但显然您不想每秒执行 100 次。

因此，增加缓存，您将在同一资源上拥有更少的并发会话。

# c++ - WWSAPI 客户端和 WCF 服务的回调实现

> ID：13967597
> 
> 赞同：2
> 
> 时间：2012-12-20T07:57:16.907
> 
> 标签：c++, wcf, web-services, wcf-binding, wwsapi

我正在学习 WCF-WWSAPI 并尝试[通过 TCP 开发 ICalculator 示例，并](http://social.technet.microsoft.com/wiki/contents/articles/creating-a-duplex-web-hosted-service-using-nettcpbinding.aspx)在服务上使用可视 C++ 客户端和 C# 进行双工调用...基本上我的客户端是程序正在尝试将 555 添加到服务号和服务将调用客户端通过回调在屏幕上打印结果...客户端-> 服务管理工作正常，我的客户端可以将值发送到调用 AddTo 函数的服务，它会工作。但是出于某种原因，我的客户没有收到要从服务中打印出来的值......

这就是我的客户所做的：

```
hr = WsCreateMessageForChannel(
    threadInfo->channel,
    NULL, 
    0, 
    &message, 
    error);
if (FAILED(hr))
{
    PrintError(hr, error);
}

const WS_MESSAGE_DESCRIPTION* messageDescriptions[] = {
    // Result callback message
        &tempuri_org_wsdl.messages.ICalculatorDuplex_Equals_OutputCallbackMessage,      //<-- CHECK ON TEMPURI.ORG.WSDL.H
    // Equation callback message
        &tempuri_org_wsdl.messages.ICalculatorDuplex_Equation_OutputCallbackMessage     //<-- CHECK ON TEMPURI.ORG.WSDL.H
};
for (;;) // to receive all potential callback messages in an infinite loop
{
    void* callbackBody = NULL;
    ULONG index = 0;
    hr = WsReceiveMessage(
        threadInfo->channel,
        message,
        messageDescriptions,
        WsCountOf(messageDescriptions),
        WS_RECEIVE_OPTIONAL_MESSAGE,
        WS_READ_REQUIRED_POINTER,
        heap,
        callbackBody, <===this VALUE is 0x000000 from the server and I send an int
        sizeof(callbackBody),
        &index, // The returned index is used to determine which callback is received
        NULL,
        error); 
```

这是我用来接收回调的服务器构造函数：

```
public CalculatorService()
    {
        result = 0.0D;
        equation = result.ToString();
        callback = OperationContext.Current.GetCallbackChannel<ICalculatorDuplexCallback>();
    } 
```

这是我在合同上的回调函数：

```
public void AddTo(double n)
    {
        Console.WriteLine("Dentro de AddTo");
        result += n;
        equation += " + " + n.ToString();
        callback.Equals(result);
    } 
```

任何帮助/建议将不胜感激

非常感谢你

曼努埃尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T06:42:56.557

好，我知道了！！这是从 WCF 服务接收消息的正确方法：

```
for (;;) // to receive all potential callback messages in an infinite loop
{
    void* callbackBody;
    ULONG index = 0;
    hr = WsReceiveMessage(
        threadInfo->channel,
        threadInfo->message,
        //&messageDescriptions[0],
        messageDescriptions,
        WsCountOf(messageDescriptions),
        WS_RECEIVE_OPTIONAL_MESSAGE,
        WS_READ_REQUIRED_POINTER,
        heap,
        &callbackBody,
        sizeof(callbackBody),
        &index,                     // The returned index is used to determine which callback is received
        NULL,
        error); 
```

现在我可以使用 WWSAPI 和 netTcpBinding 将数据作为回调获取！！！！

对我好！！！

# asp.net-mvc - 当值变化太大时显示剑道图表

> ID：13967598
> 
> 赞同：2
> 
> 时间：2012-12-20T07:57:16.717
> 
> 标签：asp.net-mvc, charts, kendo-ui

我的视图上有一个剑道图表，看起来像 ![在此处输入图像描述](../Images/fafbc55433f5598249472bde12b19fb6.png)

您可以看到 x 轴标签值相互重叠，因为系列值太多。一种解决方案是增加图表的渲染空间，但在我的情况下，UI 不允许增加空间。我怎样才能让这个图表更容易被用户接受？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:41:39.500

您可以使用：

*   结合[步骤](http://docs.kendoui.com/api/dataviz/chart#valueaxislabelsstep-numberdefault)和[跳过](http://docs.kendoui.com/api/dataviz/chart#valueaxislabelsskip-numberdefault)来删除一些 valueAxis 标签。
*   [MajorUnit](http://docs.kendoui.com/api/dataviz/chart#valueaxismajorunit-number)设置主要分区之间的不同间隔。

# c# - Windows 应用商店应用程序中的单词发音 (Windows 8 Metro)

> ID：13967601
> 
> 赞同：4
> 
> 时间：2012-12-20T07:57:37.000
> 
> 标签：c#, microsoft-metro, windows-store-apps

我正在寻找一种让我的 Windows 应用商店应用程序（Windows 8 Metro）发音的方法。Microsoft Speech 在 WinRT 中不可用。我的编程语言是 C#，我正在使用多语言词典。我想知道有没有办法在我的应用程序中提供单词发音？即使是英语单词对我来说也足够了。

有没有办法使用谷歌翻译发音？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:19:38.890

您可以使用 Microsoft 翻译服务，该服务为应用程序提供文本到语音的功能。如果您对此解决方案感兴趣，可以查看[http://translatorservice.codeplex.com](http://translatorservice.codeplex.com)。

# url - 在 Struts2 中获取准确的 URL

> ID：13967602
> 
> 赞同：1
> 
> 时间：2012-12-20T07:57:38.460
> 
> 标签：url, struts2

我想获取 Struts2 Web 应用程序访问的 URL。例如，如果用户访问`http://www.webpage.com`or `https://www.webpage.com`，我需要协议；http 或 https。我尝试使用 ServletRequestAware 并使用 request.isSecure() 或 request.getScheme() 来实现该操作。但是，即使我访问“https://..”链接，我也会得到错误和“http”。

有什么办法可以得到协议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:57:39.743

您可以从标题中提取它：

```
System.out.println(request.getHeader("referer")); 
```

> 输出：
> 
> [https://www.webpage.com](https://www.webpage.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:06:55.457

我想你忘了再尝试一件事。使用 ServletRequestAware 实现 Action 并使用

```
request.getProtocol(); 
```

否则，您可以在操作类中使用以下代码：

```
HttpServletRequest request=ServletActionContext.getRequest();
    String protocol=request.getProtocol();
    System.out.println("Protocol Used::"+protocol); 
```

# iphone - 在 ViewController 中将 JSON 显示为列表（不在 TableView 中）

> ID：13967609
> 
> 赞同：-2
> 
> 时间：2012-12-20T07:58:44.037
> 
> 标签：iphone, objective-c, ios, nsjsonserialization

我正在生成一个 JSON 字符串，我需要将其解析并显示到页面上。我的 JSON 字符串输出有关 CD 内容的信息，如下所示：

```
[{"song_name":"Song 1","artist":"John","price":"$1"}, 
{"song_name":"Song 2","artist":"Anna","price":"$2"}, 
{"song_name":"Song 3","artist":"Ryan","price":"$3"}] 
```

我想以列表格式显示我的 viewController 中的内容，显示歌曲名称、艺术家和价格。我不想使用 tableView 来显示此信息，而只想显示一个列表。我该怎么做呢？我假设我需要使用 NSJSONSerialization，但过去只将它用于 tableView。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:46:59.830

除了其他答案，您可以只使用一个标签，只需在曲目信息之间使用@“\n”创建NSMutableString（用于动态添加曲目信息），将其传递给label.text并将UILabel的属性numberOfLines设置为0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:34:10.523

按着这些次序：

1.  解析 JSON 并将键值对（CD 的 NSDictionary）存储在 NSArray（比如 infoArray）中
2.  在 viewController 的视图上添加 UIScrollview 作为子视图。
3.  根据 infoArray 计数动态分配 UILabel。查看您的数据，我相信您可以使用静态帧初始化标签，即您的 y 可以保持静态。
4.  在此标签上添加来自 infoArray 的文本。

不过，我建议只使用 UITableView。它更简单，更好的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:33:20.857

您确实使用 NSJSONSerialization 创建了一个字典数组，然后逐个解析该数组并创建每个字典的视图。您可能最好使用以下方法：

```
-(UIView *) listView: (NSString *)songName andArtist:(NSString *)artist andPrice:(NSString *)price andIndex:(int)viewIndex {
    //create your view here and do anything you want

    UIView *subView = [[UIView alloc] init] autoRelease];
    subView.frame = CGRectMake(0, viewIndex * 70, self.view.frame.width, 70);

    //add labels and other stuff

   // return the view
   return subView;
} 
```

您可以通过设置不同的 Y 值将其添加到当前视图中，以便它们使用前一种方法的 viewIndex 显示在彼此下方...因此，如果您有一个数组，它会像这样：

```
for (int i = 0; i < [array count]; i++) {

    NSDictionary *dict = [array objectAtIndex:i];
    NSString *songName = [dict valueForKey:@"song_name"];
    NSString *artist = [dict valueForKey:@"artist"];
    NSString *price = [dict valueForKey:@"price"];

    UIView *tempView = [self listView:songName andArtist:artist andPrice:price andIndex:i];

    [self.view addSubView:tempView];

} 
```

您必须将其全部添加到滚动视图中，否则您将遇到页面上的行数过多的问题。如果您不知道如何使用 Google for UIScrollView。

但我建议不要使用这种方法。表格视图的存在是有原因的。它们是为这些东西而生的。因为还提供了滚动、绘图和刷新。如果可以，请使用它们！

# java - 在Android中使用正则表达式处理字符串

> ID：13967612
> 
> 赞同：3
> 
> 时间：2012-12-20T07:58:57.390
> 
> 标签：java, android, regex, expression

我通过 HttpGet 获得响应。在 getEntity().getContent() 之后，我得到了 HTML 页面的代码，然后将此页面转换为 String pageHTML。

我需要使用正则表达式匹配pageHTML，然后获取结果。

我已经创建了正则表达式。

如果正则表达式只返回一个值，如何创建？如果正则表达式只返回 n 个值，如何创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:04:36.483

[使用Pattern](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)创建您的正则表达式。然后你可以打电话`pattern. matcher(pageHTML)`来获得一个[Matcher](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html)。

`Matcher`允许您知道是否有任何`matches`，`find`是否有下一个匹配，并获取表示`group`最后一个匹配的子序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:05:58.950

您可以使用组从正则表达式接收多个值。有关详细信息，请参阅[此](http://www.javamex.com/tutorials/regular_expressions/capturing_groups.shtml#.UNLGaqxovlc)。

```
Pattern datePatt = Pattern.compile("([0-9]{2})/([0-9]{2})/([0-9]{4})");

Matcher m = datePatt.matcher(dateStr);
if (m.matches()) {
  int day   = Integer.parseInt(m.group(1)); // get values inside the first (..)
  int month = Integer.parseInt(m.group(2)); // get values inside the second (..)
  int year  = Integer.parseInt(m.group(3)); // get values inside the third (..)
} 
```

# linq - 如何获取与其他列表（LINQ）不同的列表？

> ID：13967613
> 
> 赞同：2
> 
> 时间：2012-12-20T07:58:59.060
> 
> 标签：linq

抱歉这个问题，我无法造句。这是我所拥有的，

```
class Brand{
    int ModelId;
    string name;
}

class Gallery{

    IList<Brand> brands;
    ...
    public BrandList{
        get{ return brands; }
    }
} 
```

我有一个画廊列表。像这样，

```
IList<Gallery> galleries; 
```

画廊中的每个画廊都有很多品牌。例如，画廊中有 6 个画廊对象。每个画廊都有品牌。像这样，

```
Gallery1.Brandlist => Audi, Ford 
Gallery2.BrandList => Mercedes,Volvo 
Gallery3.BrandList => Subaru 
Gallery4.BrandList => Renault 
Gallery5.BrandList => Subaru 
Gallery6.BrandList => 
```

我试图通过 LINQ 获得的是一个与上述所有第一个品牌不同的品牌列表（所以我不会选择福特和沃尔沃，即使它们在列表中）。画廊不必在其列表中包含品牌。所以它可能像 Gallery6 一样是空的。输出应该是，

```
{Audi, Mercedes, Subaru, Renault} 
```

我不知道如何使用 LINQ 做到这一点。我试过`SelectMany`了，但我能用 LINQ 做的很简单`(p=>p.Something = (int) something).ToList()`。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T08:03:36.017

~~使用[`SelectMany`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)和[`Distinct`](http://msdn.microsoft.com/en-us/library/bb341731.aspx)：~~

 ~~```
IEnumerable<string> allUniqueBrands = allGalleries
    .SelectMany(g => g.BrandList.Select(b => b.Name)).Distinct(); 
```~~ 

在查询语法中：

```
IEnumerable<string> allBrands = from gallery in allGalleries
                                from brand in gallery.BrandList
                                select brand.Name;
IEnumerable<string> allUniqueBrands = allBrands.Distinct(); 
```

 ~~**编辑**：现在我明白了，您只需要每个 BrandList 的第一个品牌。

如果要选择 ，`Brand`则必须提供`IEqualityComparer<Brand>`可以在 中使用的自定义`Distinct`。如果您需要`List<Brand>`，请在最后致电`ToList()`。

这是一个`IEqualityComparer<Brand>`for `Distinct`（或 Union、Intesect、Except 等）：

```
public class BrandComparer : IEqualityComparer<Brand>
{
    public bool Equals(Brand x, Brand y)
    {
        if (x == null || y == null) return false;
        return x.Name.Equals(y.Name, StringComparison.OrdinalIgnoreCase);
    }

    public int GetHashCode(Brand obj)
    {
        if (obj == null) return int.MinValue;
        return obj.Name.GetHashCode();
    }
} 
```

这是所有（第一）品牌的不同列表：

```
List<Brand> uniqueFirstBrands = allGalleries
    .Where(g => g.BrandList != null && g.BrandList.Any())
    .Select(g => g.BrandList.First())
    .Distinct(new BrandComparer())
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T08:04:20.090

这应该有效：

```
var brands = galleries.Where(x => x.BrandList.Any())
                      .Select(x => x.BrandList.First().Name)
                      .Distinct(); 
```

如果您希望结果是 Brand 对象的集合而不是字符串，您可以这样做：

```
var brands = galleries.Where(x => x.BrandList.Any())
                      .GroupBy(x => x.BrandList.First().Name)
                      .Select(g => g.First().BrandList.First()); 
```~~

# xml - 解析 Xml 抛出一个奇怪的无效字符异常

> ID：13967614
> 
> 赞同：-1
> 
> 时间：2012-12-20T07:59:03.350
> 
> 标签：xml, xml-parsing

我的应用程序正在尝试解析 XML 并抛出以下异常，

> 在文档的元素内容中发现了无效的 XML 字符 (Unicode: 0x52)。

我 100% 确定 XML 是有效的。但我仍然不知道为什么我会得到这个例外。

关于什么可能导致此异常的任何想法？

我用来读取 xml 文件的代码是：

```
String policyFile = filename;
    try {
        String overRide = System.getProperty("TEST_POLICY_FILE");
        if (overRide != null) {
            policyFile = overRide;
        }

        //          URL urlToPolicyFile = new URL(policyFile);
        //          InputStream is = urlToPolicyFile.openStream();
        //InputStream is = getClass().getClassLoader().getResourceAsStream(policyFile);
        // get XML Parser instance
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        factory.setIgnoringComments(true);
        factory.setValidating(false);
        DocumentBuilder builder = factory.newDocumentBuilder();
        builder.setEntityResolver(VacEntityResolver.getInstance());
        InputSource inputSource = new InputSource(policyFile);
        // parse input file
        Document policyDocument = builder.parse(inputSource);
        Builder policyBuilder = new Builder();

        // load decl-policies file into cache
        visitDeclarativePolicies(policyDocument, policyBuilder);
        m_myPolicyCache = policyBuilder.getPolicyCache();
    } catch (SAXException e) {
        throw new InvalidPolicyFileException(policyFile);
    } catch (ParserConfigurationException e) {
        throw new InvalidPolicyFileException(policyFile);
    } catch (IOException e) {
        throw new InvalidPolicyFileException(policyFile);
    } 
```

线，

`Document policyDocument = builder.parse(inputSource);`

是抛出错误的那个

关于这个问题的一个有趣的事实是，它只发生在生产环境中。同一个 Xml 文件在我的开发环境和测试环境中都没有产生任何问题。抱歉没有分享文件。这是一个文件，我不应该分享。但是相同的输入文件在我的开发环境中没有产生任何问题。

这个问题对我来说似乎很奇怪，因为它为字符 0x52 即“R”抛出异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:34:56.203

我能想到的唯一情况是“R”是无效字符，紧跟在“高代理”之后。但与其让我们猜测，您还需要向我们提供更多信息。

根据我的经验，我会说“100% 确定”你的 XML 是有效的，而当你的解析器告诉你它不是时，这并不是解决问题的好起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:11:49.810

Unicode: 0x52 是大写的 R。我不确定你为什么会收到这个错误。您能否发布您尝试执行的代码或引发此错误的数据示例？

[http://www.utf8-zeichentabelle.de/unicode-utf8-table.pl?names=-&utf8=0x](http://www.utf8-zeichentabelle.de/unicode-utf8-table.pl?names=-&utf8=0x)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:10:47.933

通常最好提供更多输入（例如，发布仍然显示该行为的输入的最小化版本），但是从您给出的内容来看，可能预期小写 r 与大写 R （这将使您认为这是有效的，但严格的语法检查器会将其标记为无效）

[编辑以下问题信息添加]

开发/生产差异的嫌疑人是操作系统差异。您的机器是 Unix 和生产 Windows 还是相反？在这些情况下，操作系统创建和读取文件的方式可能会影响您获得的内容，并且解析可能会有所不同。

# jquery-ui - 在 Kendo Window UI 控件中需要帮助

> ID：13967616
> 
> 赞同：0
> 
> 时间：2012-12-20T07:59:28.430
> 
> 标签：jquery-ui, kendo-ui

我正在开发一个顾问门户，这是我们公司项目的一部分，我的老板建议我对某些链接上的弹出窗口使用 kendow 窗口弹出控件。

我已经通过使用剑道应用程序控制来完成它，但是引起了一个小问题，这让我的外观和感觉有点糟糕。

我们在一个页面上有链接，我们的应用程序应该在单击任何链接时显示使用弹出窗口，但是当我实际运行该页面时，首先出现一个弹出 kendo 窗口，当我最小化或关闭它时，链接开始工作根据我们的意愿。

我确定在 document.ready(function(){}); 上显示弹出窗口的 jquery 代码存在一些问题；但它应该在单击链接时起作用。

我在这里发布我的代码，请帮助我使其更精致和美观

```
var window = $("#window"),
                        undo = $("#undo")
                                .bind("click", function () {
                                    window.data("kendoWindow").open();
                                    window.data("kendoWindow").center();
                                    undo.hide();
                                });

var onClose = function () {
    undo.show();
}

if (!window.data("kendoWindow")) {
    window.kendoWindow({
        width: "600px",
        height: "500px",
        draggable: false,
        actions: ["Minimize", "Maximize", "Close"],
        resizable: false,
        title: "Report Activity",
        content: "../../AlertCounselor.htm",
        close: onClose
    });
} 
```

HTML：

```
<div id="window"></div>

            <label id="undo" style="display:none; width:200px;" class="k-group" ><a href="#">Alert Counselor</a></label> 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:31:47.710

如果您不希望在加载文档时显示该窗口，则应`visible: false`在初始化时指定（在[此处](http://docs.kendoui.com/api/web/window#visible-booleandefault)查看文档）。

假设您有以下链接：

```
<a href="#" id="open">Click here for opening the window and not before</a> 
```

然后将窗口定义为：

```
var myWindow = window.kendoWindow({
    visible  : false,
    width    : "600px",
    height   : "500px",
    draggable: false,
    actions  : ["Minimize", "Maximize", "Close"],
    resizable: false,
    title    : "Report Activity",
    content  : "../../AlertCounselor.htm",
    close    : onClose
}).data("kendoWindow"); 
```

这应该让窗口关闭，等待其他打开它的东西。

最后`click`为链接定义一个事件处理程序：

```
$("#open").on("click", function() {
    myWindow.open();
}); 
```

# ios - iPod 上的触控响应

> ID：13967628
> 
> 赞同：0
> 
> 时间：2012-12-20T08:00:14.530
> 
> 标签：ios, input, touch, unity3d

我编写了一个简单的代码，使对象跟随鼠标或触摸输入，并且在编辑器上工作得如此快速和响应，但是当我将它部署到我的 iPod 上时，它有一点延迟。如果您的手指移动得足够快，您会看到物体需要时间才能到达您的手指，这很轻微但很明显。

为了在场景中拖动对象必须遵循的路径没有问题，问题是它总是比手指的当前位置晚 10 个像素。就像检查输入的间隔少于更新一样。

那么有没有办法让它更具响应性呢？就像我们可以用物理做的一样，我们可以强制它调用更多的固定更新或类似的东西。

我希望它在屏幕上快速跟随我的手指，没有任何延迟。

到目前为止，我尝试了这些，但没有结果：

1) 更改 FPS ro 60。 2) 更改 AppController.mm 中的各种设置

谢谢。

# php - 正文错误中的空行数据包，大量图像结果集

> ID：13967632
> 
> 赞同：1
> 
> 时间：2012-12-20T08:00:29.330
> 
> 标签：php, mysql

```
 <?php
// Make a MySQL Connection
$mysqli = new mysqli("server", "user","pass","database") or die(mysqli_error());

$result = $mysqli -> query("SELECT * FROM testimage WHERE OCTET_LENGTH( IMAGE ) >200000 ") or die(mysqli_error());

if($result){
 // Cycle through results
while ($row = $result->fetch_assoc()) {

    file_put_contents($row['ID'].'.png', $row['IMAGE']);

}

// Free result set
$result->close();

}
?> 
```

我将图像直接作为 longblob 对象存储在我的测试数据库中，我试图抓取所有大于 200k 的图像。当我以这种方式查询时，我收到两个错误。这些张贴在下面。

如果我在不检查长度的情况下进行查询，我会得到相同的错误。

如果这很重要，这个 php 正在我的 mac os x 上的笔记本电脑上运行。当数据库包含较少数量的图像时，相同的代码可以正常工作。这个错误的其他解释提到了大型结果集，但他们也提到了改变表格，我不相信我正在这样做。

该数据库在 1000 张图像中包含大约 440 兆。存储为 LONGBLOB 对象

警告：第 5 行 Get_All_Images_DB_BLUEHOST2.php 中的空行数据包正文

警告：mysqli::query(): (00000/0): 在第 5 行的 Get_All_Images_DB_BLUEHOST2.php 中

另一条信息，错误总是发生大约 109 - 120 秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:34:26.947

```
<?php
// Make a MySQL Connection
$mysqli = new mysqli("host", "user", "pass","database") or die(mysqli_error());
$result = $mysqli -> query("SELECT MAX(ID) FROM testimages ") or die(mysqli_error());
$data = mysqli_fetch_array($result);
$result->close();
$mysqli->close();

$maxid =  $data[0];
$off = 0;
$dur = 50;

for ($i = 1; $i <= ($maxid/50)+1; $i++){

$mysqli = new mysqli("host", "user", "pass","db") or die(mysqli_error());

$result = $mysqli -> query("SELECT * FROM testimage LIMIT $off,$dur ") or die(mysqli_error());

if($result){
 // Cycle through results
while ($row = $result->fetch_assoc()) {

    //echo($row['TAG']);
    //echo(":");

    //$row['IMAGE']
    echo ", ";
    echo ($row['ID']);

    file_put_contents($row['ID'].'.png', $row['IMAGE']);

}

// Free result set
$result->close();
$mysqli->close();

}
$off += 50;
}

?> 
```

这是我通过限制结果集、获取最大结果数并使用 LIMIT 增加该数字来避免上述错误的天真的解决方案。

# java - 将日期时间解析为 JAVA 日期

> ID：13967635
> 
> 赞同：3
> 
> 时间：2012-12-20T08:00:45.793
> 
> 标签：java, sql-server-2008, datetime

我正在获取 SQL Server 日期时间（2013 年 1 月 1 日）`SqlRowSet`等形式

```
while (rs.next()) {
 myBean.setDateProp(rs.getString(4));
} 
```

的类型`myBean` `DateProp`是`java.util.Date`，有没有办法转换`(1 Jan 2013)`为 java 日期表示。

我试过下面的代码

```
SimpleDateFormat sdf = new SimpleDateFormat("dd-MMM-yyyy HH:mm:ss.SSS");
Date date=new Date();        
    try {
        date = sdf.parse("1 Jan 2013");           
    } catch (Exception e) {
        e.printStackTrace();

    } 
```

我得到了`ParseException`

> 严重：java.text.ParseException：无法解析的日期：“2013 年 1 月 1 日”

任何方向...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T08:02:54.423

试试这个 -

```
SimpleDateFormat sdf = new SimpleDateFormat("dd MMM yyyy");
Date date=new Date();        
try {
    date = sdf.parse("1 Jan 2013");           
}catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T08:04:39.857

尝试

```
while (rs.next()) {
 myBean.setDateProp(rs.getDate(4));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T08:07:49.163

```
 @Test
    public void test() throws ParseException {

        String dateString = "1 Jan 2013";
        String dateString2 = "11 Jan 2013";
        SimpleDateFormat sdf = new SimpleDateFormat("d MMM yyyy");

        sdf.parse(dateString);
        sdf.parse(dateString2);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T08:06:58.890

您需要将日期格式化程序字符串修改为

```
SimpleDateFormat sdf = new SimpleDateFormat("dd MMM yyyy"); 
```

因为您的日期字符串是这种格式

# java - 如何在eclipse中更改@author标签配置，使其采用我指定的名称？

> ID：13967636
> 
> 赞同：48
> 
> 时间：2012-12-20T08:00:47.880
> 
> 标签：java, comments, eclipse-indigo

我正在使用 Eclipse Indigo for Java。

我曾经在方法上写评论。每当我使用`@author`标签时，它都会自动使用当前登录的系统的用户名。

我的问题是：如何更改此`@author`标签配置，使其采用我指定的名称。

我已经通过以下链接：

[如何更改 Eclipse 模板中使用的 ${user} 变量的值](https://stackoverflow.com/questions/246192/how-to-change-the-value-of-user-variable-used-in-eclipse-templates)

但它建议更改类路径变量的值`$user`。我不想那样做。我想通过配置更改评论模板。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-12-20T08:49:05.527

有几种方法可以做到这一点。打开 Eclipse Preferences，输入`Templates`作为您的过滤器，然后选择`Java->Code Style->Code Templates`. 在 Code Templates 小部件中，展开 Comments 小部件：

![Eclipse 首选项 - Java 代码模板](../Images/77a1e008808fda693945a4f9818bd44b.png)

查看展开的选择，您可以看到为类型和方法等定义了模板。选择要编辑的模板，然后单击“编辑”。您现在可以根据需要更改模板，例如通过添加`@author ${user}`或其他任何内容：

![Eclipse 首选项 - Java 代码模板 - 方法](../Images/15e7ae90109f4a75db590fc2520f7518.png)

在所有对话框中单击“确定”以完成并保存。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-01-26T21:17:39.763

在 eclipse 目录中有一个名为：“eclipse.ini”的文件，打开该文件并添加以下行：

```
-Duser.name=desired name 
```

在“-vmargs”行之后

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-20T08:12:58.017

项目->属性->Java代码样式->代码模板->

有链接配置工作区设置

选择评论->类型

编辑你的名字或任何你想要的。 ![在此处输入图像描述](../Images/719c5032c43a2edcdb52bea6892465cd.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T08:05:09.683

您可以转到 Windows/首选项。在搜索框中输入 int "Template" 并转到 Java/Code Style/Code Templates。您正在搜索的区域在“评论”部分。

# python - 带有 Flask 的 MongoEngine - 错误“NoneType”对象没有属性“选择”

> ID：13967639
> 
> 赞同：2
> 
> 时间：2012-12-20T08:01:01.240
> 
> 标签：python, mongodb, flask

我试图让 MongoEngine 与 Flask-Mongoengine 扩展一起工作，但是每当我使用 ListField 时，我都会收到以下错误：

```
if field.field.choices:
    AttributeError: 'NoneType' object has no attribute 'choices' 
```

这是我的代码：

```
class Business(db.Document):
    name = db.StringField(required=True)
    address = db.StringField()
    location = db.GeoPointField()
    tags = db.ListField()
    area = db.ReferenceField(Area, dbref=True)
    contact = db.EmbeddedDocumentField(Contact)
    details = db.EmbeddedDocumentField(details) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T20:28:30.790

我有同样的问题。为我解决的问题是将 Field 对象传递给声明中的`ListField()`调用`ListField`，例如：

`tags = db.ListField(db.StringField())`

# android - 在我的代码中禁用蓝牙时如何启用蓝牙？

> ID：13967641
> 
> 赞同：0
> 
> 时间：2012-12-20T08:01:12.003
> 
> 标签：android, bluetooth

我做了一个包含两个活动的应用程序。第一个活动导入用户参数，第二个活动通过蓝牙发送数据。如果蓝牙被禁用，我`.ACTION_REQUEST_ENABLE`会启用它，但是当 bt 关闭时，我的 apk 会退出。它不起作用。有什么帮助吗？

我用这个；创建活动的代码以及启动处理程序和可运行的代码......我只测试它 findBT 和工作......

```
 void findBT()
 {
  mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
  if(mBluetoothAdapter == null)
  {
      myLabel.setText("No bluetooth adapter available");
  }

  if(!mBluetoothAdapter.isEnabled())
  {
      //My problem is there
      Intent enableBluetooth = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
      startActivityForResult(enableBluetooth, 0);
  }

  Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
  if(pairedDevices.size() > 0)
  {
      for(BluetoothDevice device : pairedDevices)
      {
          if(device.getName().equals(strValue2))
          {
              mmDevice = device;
              break;
          }
      }
  }
  myLabel.setText("Bluetooth Device Found");
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T08:41:13.277

这是代码：

```
 public class AndroidBluetooth extends Activity {

    private static final int REQUEST_ENABLE_BT = 1;

    /** Called when the activity is first created. */

    TextView stateBluetooth;
    BluetoothAdapter bluetoothAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        stateBluetooth = (TextView)findViewById(R.id.bluetoothstate);
        bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

        CheckBlueToothState();
    }

    private void CheckBlueToothState(){
        if (bluetoothAdapter == null){
            stateBluetooth.setText("Bluetooth NOT support");
        }else{
            if (bluetoothAdapter.isEnabled()){
                if(bluetoothAdapter.isDiscovering()){
                    stateBluetooth.setText("Bluetooth is currently in device discovery process.");
                }else{
                    stateBluetooth.setText("Bluetooth is Enabled.");
                }
            }else{
                stateBluetooth.setText("Bluetooth is NOT Enabled!");
                Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
            }
        }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        if(requestCode == REQUEST_ENABLE_BT){
            CheckBlueToothState();
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T08:38:41.967

此代码用于检查您的设备是否启用了蓝牙：

```
BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
if (mBluetoothAdapter == null) {
Toast.makeText(this.getParent(), ConfigClass.BLUETOOTH_NOT_SUPPORTED_ERROR, Toast.LENGTH_LONG);
} 
```

检查并启用您的蓝牙：

```
else if (!mBluetoothAdapter.isEnabled()) {
Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
startActivityForResult(enableBtIntent, RESULT_OK); 
```

# android - 无法在 Android Firefox 上提交 jquery 移动搜索

> ID：13967643
> 
> 赞同：0
> 
> 时间：2012-12-20T08:01:17.263
> 
> 标签：android, firefox, jquery-mobile

在 jQuery 移动页面上有这个标题

```
<div class="ui-grid-a">
<div class="ui-block-a">
    <a href="#start"><img class="logo" src="/Mobile/Images/logo.png" /></a>
</div>
<div class="ui-block-b">
    <fieldset data-role="controlgroup" data-type="horizontal">
        <input class="productsearch" placeholder="Sök produkt..." data-type="search" />
    </fieldset>
</div> 
```

我使用以下代码同时收听提交和输入 keyup 以触发搜索功能。

```
$(document).on('submit', '.js-mainForm', function() {
    mobileHandler.searchTrigger();
    return false;
});

$(document).on('keyup', '.productsearch', function(event) {

    var keyCode = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;

    if (keyCode == 13) {
        mobileHandler.searchTrigger();
    }
}); 
```

我面临的问题是在 Firefox for Android 上无法提交搜索。它仅显示 Android 键盘上的 Next 按钮。在我测试过的所有其他 android 浏览器（Native Gingerbread、Honeycomb 和 Dolphin 浏览器，以及 iPad）中，Go 按钮是可见的，允许我像往常一样提交表单。

我该怎么做才能让 Firefox 和其他可能有相同问题的尚未测试的浏览器提交搜索？

# php - 远程图像的 PHP 复制失败并超时

> ID：13967644
> 
> 赞同：1
> 
> 时间：2012-12-20T08:01:16.990
> 
> 标签：php, curl, copy, fopen, php4

关于这个主题有很多问题，但我找不到我的方案的答案。

我正在处理的客户端项目托管在运行 PHP 4.3.9 的服务器上，我正在尝试将远程图像复制到服务器。这总是因超时而失败：

```
var_dump(
   copy('http://domain.com/path/to/image.jpg', 
        '/opt/www/myfolder/myimage.jpg')
); 
```

错误消息是：`Warning: copy(http://domain.com/path/to/image.jpg): failed to open stream: Connection timed out in /opt/www/myfolder/my-script.php on line xx bool(false)`

我跟踪了几个 ini 设置，这对我来说*似乎*很好。

```
var_dump(
    ini_get('upload_max_filesize'), 
    ini_get('post_max_size'), 
    ini_get('max_execution_time'), 
    ini_get('max_input_time'), 
    ini_get('allow_url_fopen')); 
```

这跟踪：

```
string(2) "8M" string(2) "8M" string(2) "30" string(2) "60" string(1) "1" 
```

所以`allow_url_fopen`似乎已启用，其他设置似乎也很好。我尝试了不同的图像，所有图像都可以通过浏览器访问，所有图像都具有小尺寸、不同的远程主机。我的服务器的目标目录是可写的，例如从我自己的服务器的 URI 复制一个文件就可以很好地复制该文件。

我还尝试了[这个答案](https://stackoverflow.com/a/7375478/999162)`curl`的变体，结果相同。

当我在具有较新 PHP 版本的不同服务器上尝试相同的脚本时，它工作正常。

**项目服务器上的哪些设置会导致此失败？**我缺少关于 PHP 4.3.9 的某些内容会导致此操作失败吗？

*请注意，我无法更改 PHP 版本，也不需要建议我升级或说服我的客户升级的答案*

**编辑**：更改`upload_max_filesize`为 40MB 和`max_execution_time`600 没有不同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:32:25.447

正如@Charles 和@SalmanA 在评论中指出的那样，服务器上似乎存在连接问题，阻止了复制调用。

根据@SalmanA 的评论，尝试`wget`从 ssh shell 使用显示了类似的超时结果，表明连接被阻止。

联系服务器主机并进一步查询是这里的解决方案。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-20T08:04:07.687

**您应该在 php.ini 中将默认的 max_execution_time 更改为 max_execution_time = 600 - 必须**

请在 php.ini 文件中将上传最大大小从其默认值更改为您的需要，或者使用**ini_set()**更改您的代码。当您尝试仅上传时，这很有帮助...

**upload_max_filesize = 40M**

# clojure - 计算一个值并将其添加到地图中

> ID：13967646
> 
> 赞同：4
> 
> 时间：2012-12-20T08:01:27.707
> 
> 标签：clojure

我有一张地图列表：

```
(def mylist
  [{:id 1 :sub [{:subid 1} {:subid 2}]}
   {:id 2 :sub [{:subid 3}]}]) 
```

我想向列表的每个映射元素添加一个新的键/值对，其中包含以下项目的计数`:sub`：

```
[{:id 1 :sub [{:subid 1} {:subid 2}] :subcount 2}
 {:id 2 :sub [{:subid 3}] :subcount 1}] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T08:22:30.627

在 clojure 中，“添加到地图”是使用 assoc 完成的，它返回一个添加了指定值的新地图，通常如果您想对一组事物执行相同的操作，则使用该`map`函数。

```
(defn subcount
  "return the number of items in the :sub of m"
  [m]
  (count (:sub m)))

(defn add-count
  "add subcount to the given map"
  [m]
  (assoc m :subcount (subcount m)))

(defn add-counts
  "add subcount to all the objects"
  [objects]
  (map add-count objects))

(def mylist
  [{:id 1 :sub [{:subid 1} {:subid 2}]}
   {:id 2 :sub [{:subid 3}]}])

(add-counts mylist)
=> ({:sub [{:subid 1} {:subid 2}], :subcount 2, :id 1} {:sub [{:subid 3}], :subcount 1, :id 2}) 
```

# android - 在两个类之间传递变量

> ID：13967651
> 
> 赞同：0
> 
> 时间：2012-12-20T08:02:00.523
> 
> 标签：android

我有 2 节课：

```
public class TouchImageView extends ImageView
public class TouchImageViewActivity extends Activity 
```

在我的`TouchImageView`课堂上，我有一个触摸监听器，可以计算你触摸图像的位置。我需要的是在`TouchImageViewActivity`不创建它的新实例的情况下将接触点转移到。触摸计算了恒常性。

来自：`TouchImageView`_`TouchImageViewActivity`

```
TouchImageView img = (TouchImageView) findViewById(R.id.img);
    img.setImageResource(R.drawable.g_map2048); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:12:16.213

我想我让你感到困惑:) 它看起来像：

```
TouchImageView 
```

已经嵌套在您的 TouchImageViewActivity 中。您不需要“传输”接触点，只需在 TouchImageViewActivity 中创建一个方法，使用您想对该数据执行的任何操作，然后从您在 TouchImageView 中设置的侦听器调用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:04:57.673

您可以声明一个`interface`内部`TouchImageView`并`TouchImageViewActivity` **实现**该接口..
然后当您完成计算调用..`interface.method`这将调用活动中的方法...

你的界面：

```
public interface OnCalculationsCompleted{
    public void onCalculationsCompleted(values);
} 
```

触摸图像视图活动：

```
public TouchImageViewActivity implements OnCalculationsCompleted{
    public void onCalculationsCompleted(values){}
} 
```

# ruby-on-rails - IBM AIX6.1 服务器上的“./ruby.tmp.pc”中未定义变量“TARGET”

> ID：13967653
> 
> 赞同：1
> 
> 时间：2012-12-20T08:02:14.157
> 
> 标签：ruby-on-rails, ruby, aix

我通过以下命令从 AIX6.1 服务器中删除了已安装的 ruby

```
rm -rf /usr/bin/rake
rm -rf /usr/bin/gem
rm -rf /usr/bin/ruby
rm -rf /usr/bin/irb 
```

删除后，我们尝试重新编译 ruby​​ 版本 1.9.3-p327，但出现错误

```
Variable 'TARGET' not defined in './ruby.tmp.pc' 
```

我们尝试使用 rvm 安装 ruby​​ 仍然遇到同样的错误。

我们再次尝试将 ruby​​version 降级到 1.9.2-p180 并且`./configure`没有给出任何错误，但是在给出`make`命令时我收到了套接字地址错误。

请帮助解决问题。

谢谢，
湿婆

# windows-phone-7 - win phone 7 + XMPP + phonegap

> ID：13967654
> 
> 赞同：0
> 
> 时间：2012-12-20T08:02:15.443
> 
> 标签：windows-phone-7

感谢您的编辑，但我说的是 XMPP 服务器而不是 XAMPP 服务器。

我无法使用 win phone 7 连接到 XMPP 服务器。它给出了错误，

```
"message":"Access is denied.\r\n",
"description":"Access is denied.\r\n","number":-2147024891} 
```

xmpp 服务器在 linux 上

# html - 提交按钮的代码在 ff 中有效，但在 ie 中无效

> ID：13967657
> 
> 赞同：0
> 
> 时间：2012-12-20T08:02:42.380
> 
> 标签：html, internet-explorer-8

以下代码在 FF 中有效，但在 IE8 中无效。

```
<a class="sub">
<input type="submit" a="" none;<="" display:="">
</a> 
```

显示按钮，但在 IE8 中无法单击该按钮。到底是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:41:45.393

这是一个格式正确的输入提交按钮：

```
<input type="submit" value="Submit"> 
```

我注意到了这些词`display`，`none`通常您会以以下形式找到它：

```
<input type="submit" value="Submit" style="display:none;"> // this however will hide the button 
```

属性`type=`的值`"submit"`使我们的输入标签成为一个提交按钮。

`value=`值为的属性`"Submit"`在我们的输入按钮上显示“提交”文本。

的属性`style=`允许我们做一些内联 css，比如`"display:none;"`隐藏它声明的 html 元素。

我建议查看 W3Schools 以了解有关[html 输入标签](http://www.w3schools.com/tags/tag_input.asp)的更多信息。

此外，您试图使用`<a>`标签将按钮变成链接，这是无效的，请查看此[Html 表单和输入页面](http://www.w3schools.com/html/html_forms.asp)以了解如何使用提交输入类型。

如果您只想要一个链接，那么我建议您查看[`<img>`](http://www.w3schools.com/tags/tag_img.asp)一个按钮和一个[`<a>`标签](http://www.w3schools.com/tags/tag_a.asp)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:44:37.597

我还没有对此 SE 的评论权限，但我会说 IE 无法解释：`<input type="submit" a="" none;<="" display:="">`

当您打开“输入”时，直到显示后才关闭它。添加“none;<”可能被解释为对标记和破坏 html 的另一次尝试。我不确定您要完成什么，但请摆脱它：

```
none;<="" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:44:34.270

代码很乱，但它实际上在 IE8 中有效，所以您看到的任何问题都是由您发布的代码之外的东西引起的。

浏览器将忽略`input`标签内的废话，并将其简单地识别为`<input type="submit">`. 一些浏览器可能会被“<”卡住 字符在那里，但 IE8 没有。

它外面的`a`元素包装器没有这样的效果。

# javascript - 使用 JavaScript 滚动 div

> ID：13967660
> 
> 赞同：2
> 
> 时间：2012-12-20T08:02:50.503
> 
> 标签：javascript, jquery, html

我试图一次显示一个 div 并一遍又一遍地滚动它们。我修改了一个我找到的小提琴，我让它在小提琴上工作，但由于某种原因，我无法用小提琴实现一个简单的测试页面。它根本不会在 div 中滚动。

这是小提琴：http: [//jsfiddle.net/Twistar/d6nZP/86/](http://jsfiddle.net/Twistar/d6nZP/86/)

这是我实现的代码：

```
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" type="text/css" href="styles/styles.css">
    <script type="text/javascript" src="includes/headers/jquery.min.js"></script>
    <script type="text/javascript">

    function go() {
        var visibleBox = $('#container .boxes:visible');
        visibleBox.hide();
        var nextToShow = $(visibleBox).next('.boxes:hidden');
        if (nextToShow.length > 0) {
            nextToShow.show();
        } else {
            $('#container .boxes:hidden:first').show();
        }
        return false;
    }​
        setInterval(go, 1000);​
    </script>
</head>

<body>
    <div id="container">
        <div class="boxes" style="display:">first box</div>
        <div class="boxes" style="display:none;">second box</div>
        <div class="boxes" style="display:none;">third box</div>
        <div class="boxes" style="display:none;">forth box</div>
    </div>
</body> 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:16:59.293

我可能会简单化并使用这样的东西：http: [//jsbin.com/osepim/1/](http://jsbin.com/osepim/1/)

```
$(function() {

  // hide all and show first
  $(".boxes").hide().first().show();

  setInterval(function(){
    moveNext();
  }, 1000);

});

function moveNext() {
  var box = $(".boxes:visible"),
      nextBox = box.next();

  if(nextBox.length === 0)
    nextBox = $(".boxes:first");

  //hide all
  $(".boxes").hide();

  // show next
  nextBox.fadeIn();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T08:20:36.630

`I am guessing that you have a working fiddle but on your local test page its not working`

您的小提琴有效，因为您从左侧下拉列表中选择了默认处理程序，并且由于您的 jquery 处理程序丢失，它在您的测试页面上不起作用。

原因是`you are missing the document ready handler here`：

```
$(function(){
    setInterval(go, 1000);
}); 
```

尝试用这个替换，看看是否有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T08:21:23.973

您需要使用 ready 事件包装您的 javascripts 代码`$(document).ready()`或使用简短版本`$()`，并且只会在页面加载完成时执行您的代码，因此您的代码应该看起来像这样

```
$(function(){
   function go() {
        var visibleBox = $('#container .boxes:visible');
        visibleBox.hide();
        var nextToShow = $(visibleBox).next('.boxes:hidden');
        if (nextToShow.length > 0) {
            nextToShow.show();
        } else {
            $('#container .boxes:hidden:first').show();
        }
        return false;
    }​
        setInterval(go, 1000);​

}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T08:11:36.850

```
<!DOCTYPE html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href="styles/styles.css" />
<style type="text/css">.boxes{display:none}</style>
</head>

<body>
<div id="container">
        <div class="boxes">first box</div>
        <div class="boxes">second box</div>
        <div class="boxes">third box</div>
        <div class="boxes">forth box</div>
</div>
<script type="text/javascript" charset="utf-8" src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script> 
<script type="text/javascript">
    function go() {
        var visibleBox = $('#container .boxes:visible'); // GET THE DIV
        visibleBox.hide();
        var nextToShow = $(visibleBox).next('.boxes:hidden');
        if (nextToShow.length > 0) { // SHOW NEXT ITEM
            nextToShow.show();
        } else {
            $('#container .boxes:hidden:first').show();
        }
        return false;
    }​
    setInterval(go, 1000);​ // MS SECOND OF LOOP
</script>
</body>
</html> 
```

# java - 解释 Google Maps API 服务条款

> ID：13967663
> 
> 赞同：3
> 
> 时间：2012-12-20T08:03:10.403
> 
> 标签：java, google-maps, google-static-maps

我不擅长解释法律术语，但从 Google Maps API[服务条款](https://developers.google.com/maps/terms)看来，您似乎无法开发连接到静态地图 API 的非浏览器应用程序，除非 (a) 系统没有浏览器或 (b)您提供指向地图浏览器页面的链接。

我在 Android 上看到许多移动应用程序允许您查看 Google 地图内容，并且不链接到 Google 页面。Android 显然有浏览器和原生地图应用程序。这些开发人员是如何逃脱惩罚的？

条款中的另一条规则：不缓存/下载地图数据。

其中一些相同的移动应用程序允许在偏远地区下载大量瓷砖以供离线使用。我自己用过它们，它们工作得很好。再说一遍......开发人员如何摆脱它？其中一些应用程序非常受欢迎，下载量达数十万。谷歌只是不在乎吗？

还是我误解了条款？这有点令人困惑，因为[这里](https://developers.google.com/maps/documentation/staticmaps/)：它说

> 本文档适用于希望在网页或移动应用程序中包含 Google 静态地图 API 图像的网站和移动开发人员

但大多数移动平台都有浏览器和原生谷歌地图应用程序，而之前链接的服务条款似乎暗示用这个 API 开发移动应用程序并不酷。那么它是哪一个？

假设我想：

(a) 开发一个 Java 源移动应用程序，可以连接到 Google 静态地图 API
(b) 可能从 API 下载图块供本地使用

基于上述问题，（a）的合法性似乎模棱两可，而（b）似乎显然不合法，但我看到许多成功的移动应用程序都这样做了。

如果我（a）它是桌面应用程序而不是移动应用程序怎么办？

# objective-c - 将 NSData 转换为 NSString 时出错

> ID：13967665
> 
> 赞同：2
> 
> 时间：2012-12-20T08:03:18.483
> 
> 标签：objective-c, xcode, nsdata

我将图像保存在数据库中。我正在尝试获取图像并将其导出到 CSV 文件中。我使用以下代码转换为字符串，但它返回 null。

```
 int length = sqlite3_column_bytes(compiledStatement, i); 
   NSData *img =[NSData dataWithBytes:sqlite3_column_blob(compiledStatement, i) length:length];
   text = [[NSString alloc] initWithData:img encoding:NSUTF8StringEncoding];

   NSLog(@"ColName : %@, TEXT : %@",colName, text); //Text displayed is (NULL) 
```

当我保存图像时，我将图像转换为 NSData，然后将其插入数据库列。保存图像的列的数据类型是“blob”。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:12:02.030

*encoding*参数`initWithData:encoding:`指定*数据*的编码是什么，而不是 String 将是什么。如果数据实际上不是 UTF-8，则转换将失败并且返回的字符串将为空。

由于您的数据是二进制的，因此几乎可以 100% 保证转换遇到无效的 UTF-8 字节序列并中止。

虽然我不建议将图像数据序列化为字符串，但如果你绝对必须这样做，那么你应该首先对数据进行 Base-64 编码，如[这篇 SO post](https://stackoverflow.com/questions/11251340/convert-image-to-base64-string-in-ios)中所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:11:35.417

也许尝试用于从数据中获取图像

```
[NSKeyedUnarchiver unarchiveObjectWithData:yourData] 
```

并保存到您的数据

```
 NSData *newData = [NSKeyedArchiver archivedDataWithRootObject:yourObject]; 
```

我用它来将图像和其他内容保存到我的核心数据中。

# c# - 正则表达式而不是 string.replace 函数

> ID：13967672
> 
> 赞同：3
> 
> 时间：2012-12-20T08:03:40.657
> 
> 标签：c#, regex

我[在 C# 中看到了这个 CheatSheet 正则表达式](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)

但是，我正在尝试创建一个可以为我替换它的正则表达式函数：

```
while (fname.Contains(".."))
{
    fname = fname.Replace("..", ".");
}
if (fname.StartsWith(".")) { 
    fname=  fname.Remove(0, 1);
}
fname = fname.Replace("&", "_");
fname = fname.Replace("#", "_");
fname = fname.Replace("{", "_");
fname = fname.Replace("}", "_");
fname = fname.Replace("%", "_");
fname = fname.Replace("~", "_");
fname = fname.Replace("?", "_"); 
```

我根本不知道如何编写将为我解决此问题的正则表达式。谁能帮我一把？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T08:17:32.883

```
string dotsPattern = @"\.\.+"; //2 or more dots.
fname=Regex.Replace(fname, dotsPattern ,".");
String firstSymbolDot = @"^\.";
fname = Regex.Replace(fname, firstSymbolDot, String.Empty);
string symbolPattern = "[&#{}%~?]"; //any of given symbol;
string result = Regex.Replace(fname, symbolPattern, "_"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:16:58.470

你为什么要循环`fname=fname.Replace("..", ".");`，你是否试图用一个点替换所有多个点的序列？

那是：

```
fname=Regex.Replace(fname,@"\.+","."); 
```

至于其他：

```
fname=Regex.Replace(
    Regex.Replace(
        fname,
        @"&|\#|\{|\}|%|~|\?",
        "_"
    ),
    @"^\.",
    ""
); 
```

# .net - 这不是断点的有效位置

> ID：13967675
> 
> 赞同：15
> 
> 时间：2012-12-20T08:03:53.693
> 
> 标签：.net, visual-studio-2010, asp.net-mvc-2

我试图在 Visual Studio 2010 中的 ASP.Net MVC 2 应用程序的 .ascx 或 .aspx 文件中的下面提到的页面上放置一个断点。但它不会让我这样做，它显示：

*“这不是断点的有效位置”*。

早些时候它确实有效。这是为什么？任何帮助表示赞赏。

我的 .ascx 页面如下所示：

![在此处输入图像描述](../Images/a1d105a3e8806e987dba8d171a883872.png)

**编辑 1**

.cs 文件可以正常工作。不能仅在 .aspx 和 .ascx 文件上工作

**编辑 2**

**下面提到的评论部分的链接都**没有**为这个问题提供解决方案。因为我们不能只为调试添加代码库的额外代码。所以有什么方法可以为我的激活红色标记（调试标记）查看图片中提到的 c# 代码？**

 ****编辑 3**

**它适用于同一文件上的 javascript 标记**，但不适用于 c# 代码。任何线索？

![在此处输入图像描述](../Images/c1467b17327c95a04faf61656bbe2cd3.png)

**编辑 4**

上述问题是在我[**为 .NET 安装 Windows Azure SDK 之后出现的 - 2012 年 10 月**](http://www.microsoft.com/en-us/download/details.aspx?id=35448)

当我编译代码时，它会给出如下所示的**Waring 消息。**

![在此处输入图像描述](../Images/b0c41715c477b649d7a1556d0d8186fe.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-05-02T18:05:10.733

如果您在 Visual Studio 2012 中使用 Asp.Net Mvc 5，但未安装正确的工具，则会出现此问题。对我来说，这是因为我通过 Nuget 将我的 Asp.Net Mvc 4 版本升级到了版本 5。但是，这并没有在 VS 2012 中安装工具，因此 IDE 可以正确解析和处理`.cshtml`文件。因此，没有任何 razor 代码显示为有效的 C#，并且无法设置任何断点（如果您尝试设置它，则会出现错误“这不是断点的有效位置”）。

解决方案是[安装适当的工具](http://blogs.msdn.com/b/webdev/archive/2013/11/18/announcing-release-of-asp-net-and-web-tools-2013-1-for-visual-studio-2012.aspx)。（或[直接链接](https://www.microsoft.com/web/handlers/webpi.ashx/getinstaller/WebNode11Pack.appids)）安装工具并重新启动 VS 后，我能够再次愉快地在`.cshtml`文件中设置断点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-20T15:34:16.247

查看屏幕截图中代码块的内容`<% %>`表明语法未突出显示。通常这意味着 VS 没有识别出该块包含服务器端 C# 代码。

它适用于 Javascript，因为 VS 可以将其识别为客户端脚本并对其进行中断。

修复语法高亮，你也可以打破它。

通常会发生这种情况，因为 VS 在 HTML 编辑（具有某种视觉预览）和 C# 代码之间切换非常困难，并且偶尔会出错。

最常见的原因是`Language`.aspx 或 .ascx 文件顶部缺少指令：

```
<%@ Page Language="C#" ... 
```

或者

```
<%@ Control Language="C#" ... 
```

您还可以尝试显式代码块，例如：

```
<script type="text/C#" runat="server"> ... 
```

这也可能是由[嵌套的 .master 页面](https://connect.microsoft.com/VisualStudio/feedback/details/567771/no-asp-tag-intellisense-in-some-cases-when-using-masterpages)引起的：尝试清除 ReflectedSchemas 文件夹：`%appdata%\Microsoft\VisualStudio\10.0\ReflectedSchemas\`

[众所周知，删除 ReSharper 试用会导致此问题](https://stackoverflow.com/questions/8518526/intellisense-not-working)。

最后，有时这只是 VS 的一部分 - 尝试重新启动，如果这不起作用，请尝试重新组织文件并再次重新启动。愚蠢（我知道），但有时这会促使 VS 弄清楚。

顺便说一句，这是他们在 VS 2012 中显着改进的地方

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T19:23:14.373

**在@Keith**展示了语法突出显示问题后，我从上到下浏览了我的文件，反之亦然。然后我发现了问题。

**正如我在上面的EDIT 4**中显示的那样，我的项目中有一条警告消息。

在我解决了这个问题之后，刹车点（调试）问题也消失了。

为此，我使用了下面提到的链接。

[**无法加载文件或程序集“msshrtmi” - Azure 部署中的格式不正确**](http://social.msdn.microsoft.com/Forums/en-US/windowsazuretroubleshooting/thread/0fac1f05-eb55-432f-80ac-6f15cde5b14b/)

将来我会写一个完整的分步指南来展示如何摆脱这个问题。

感谢每一位给予我支持的人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-15T11:07:45.160

这是Visual Studio 2013 中[的错误](http://connect.microsoft.com/VisualStudio/feedback/details/809506/cannot-set-a-breakpoint-within-a-helper-method-or-functions-block)。它应该在[更新](http://www.visualstudio.com/en-us/downloads/download-visual-studio-vs#d-visual-studio-2013-update)2（或更高版本）中修复。
也就是说，更新只是暂时解决了我自己的问题。**

# weblogic - 与特定实例的数据库连接

> ID：13967685
> 
> 赞同：0
> 
> 时间：2012-12-20T08:04:49.233
> 
> 标签：weblogic, datasource

我们有两个 oracle 数据库实例，分别是 instance1 和 instance2。我们正在 weblogic 中为 instance1 创建一个数据源。问题是当我在我的应用程序中创建与我的数据源的连接时，有时它也会让我连接到“instance2”。我怎样才能避免这种情况发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:13:16.603

您可以将 AlgorithmType 从“Load-Balancing”更改为 AlgorithmType="Failover" 或确保数据库连接字符串仅指向其中一个数据库实例。您似乎当前正在连接到您的数据库的 DNS 或提供多个 ip。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:02:02.027

听起来您配置了 2 个节点的 Oracle RAC。如果您希望所有实例都与一个数据库节点挂钩，您将需要修改数据库连接字符串，以便您不使用 HA RAC 连接字符串，而是使用单个实例的连接字符串。

除非您配置了多池，否则数据库实例之间的负载平衡将中继到数据库驱动程序和数据源中配置的数据库 URL。我怀疑这与 WebLogic 正在使用的驱动程序版本有关，但将 jar 与 DB 的点版本相匹配总是一个好主意。

我不建议从集群连接字符串转移到单个实例 - 如果设置是主动/被动的，请与您的 DBA 聊天并修改连接字符串，以便您仍然定义故障转移。

# php - 在警报弹出脚本函数php中运行函数

> ID：13967691
> 
> 赞同：0
> 
> 时间：2012-12-20T08:05:22.520
> 
> 标签：php, encryption, dialog, popup, dropbox

我有加密方法和上传方法，点击加密按钮后，我想弹出一个对话框，说明我是否要在加密后上传到保管箱，对话框由是或否组成。如果否，我只希望文件被加密，如果是，我希望文件加密并上传到保管箱。

目前我的方法是分开的，我想使用弹出按钮将它们连接在一起。

谢谢！

这是弹出脚本功能：

```
<script>
function confirmDelete(delUrl) {
  if (confirm("Do you want to upload to Dropbox?")) {
   document.location = delUrl;
  }
}

</script>

<a href="javascript:confirmDelete('delete.page?id=1')">Encrypt</a> 
```

如果单击是，如何在弹出脚本中运行此功能？

**加密表格**

```
<form>
<b>Select file to encrypt:</b>
<br>
<label for="file">Filename:</label>
<input type="file" name="file" id="file">
<br>
<input type="submit" value=" Encrypt ">

</form> 
```

**上传表格**

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" enctype="multipart/form-data">
<b>Select file to upload:</b>
<br>
<label for="file">Filename:</label>
<input type="file" name="path" id="file"><br>
<input type="submit" name="submit" value=" Upload ">

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:14:11.517

您需要在表单中添加隐藏输入以区分表单提交类型。
向表单添加`onsubmit`处理程序，然后`$_POST['action_type']`在提交时检查。

```
<script type="text/javascript">
function confirmUpload() {
  if (confirm("Do you want to upload to Dropbox?")) { // click 'Yes'
    document.getElementById('action_type').value = 'upload'
  }else{ // click 'No'
    document.getElementById('action_type').value = 'encrypt'
  }
  return true;
}
</script>

<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" enctype="multipart/form-data" onsubmit="return confirmUpload()">
    <b>Select file to upload or encypt:</b>
    <br>
    <label for="file">Filename:</label>
    <input type="file" name="path" id="file"><br>
    <input type="submit" name="submit" value=" Upload or Encrypt" >
    <input type="hidden" id="action_type" name="action_type" value="" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:14:59.277

```
 <script>
    function confirmDelete(delUrl) {
      confirm="Do you want to upload to Dropbox?"
if(confirm) {
       document.location = delUrl;
      }
    }

    </script>

    <a href="javascript:: void(0);" onclick="return confirmDelete('delete.page?id=1');>Encrypt</a> 
```

这可能有效。

# android - 列表视图中的视觉指示器，用于显示列表中是否还有更多项目

> ID：13967694
> 
> 赞同：2
> 
> 时间：2012-12-20T08:05:31.327
> 
> 标签：android, android-listview, scroll

我有一个由文件夹类型节点组成的水平列表视图。一次只能看到 8 个项目。如果有更多项目，则用户必须滚动 ListView 才能看到隐藏的内容。我想放置一个视觉指示器来显示列表中是否有更多项目。

在查看寻呼机中，如果当前页面是最后一页，您可以倾斜页面。ListView 是否有类似的机制可用。如果不相似，那么我应该使用哪个视觉指示器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:54:54.140

您可以尝试使用在底部`addFooterView`显示`ImageView`有更多数据以及`removeFooterView`何时到达数据末尾。另一种解决方案是创建一个自定义`ListView`并覆盖`onDraw`以绘制一个向下箭头，例如，`ListView`如果列表尚未到达数据的末尾。

# codeigniter - 如何在 codeigniter 中创建 CronJob？

> ID：13967700
> 
> 赞同：1
> 
> 时间：2012-12-20T08:05:58.937
> 
> 标签：codeigniter, cron

如何在 codeigniter 中创建 CronJob？

我基本上每天下午 6 点通过 cronjob 将值插入到数据库表中，所以我该怎么做。帮我！

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:46:49.637

您创建一个常规控制器来执行您希望执行的操作，然后在例如 cPanel 中设置 cronjob，如下所示：

```
/usr/local/bin/php /home/sitefolder/public_html/index.php/controller/function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T01:08:06.690

将您的 CRON 作业逻辑创建为“正常”CI 控制器功能。

然后，在您的标准、非 CI、PHP cronjob 文件中，只需通过以下方式加载控制器的 URL

```
get_get_contents('http:example.com/cronjob/'); 
```

这会将 URL 视为被任何其他用户点击，并且整个 CI 框架在 CI 控制器中供您使用。

# php - 具有浏览器语言检测和 Cookie 的多语言 PHP 站点

> ID：13967702
> 
> 赞同：1
> 
> 时间：2012-12-20T08:06:01.027
> 
> 标签：php

我想让我的网站多语言。我如何通过首先检测浏览器的语言来简单地包含正确的语言文件，然后如果用户单击每个页面上存在的语言标志，则通过设置 cookie 来简单地包含正确的语言文件。

我找到了这个脚本：

```
<script>

/*
Browser Language Redirect script- By JavaScript Kit
For this and over 400+ free scripts, visit http://www.javascriptkit.com
This notice must stay intact
*/

//Enter ISO 639-2 letter Language codes to detect (see: http://www.w3.org/WAI/ER/IG/ert/iso639.htm):
var langcodes=new Array("en", "de", "it", "default")

//Enter corresponding redirect URLs (last one is for default URL):
var langredirects=new Array("english/index.php", "deutsch/index.php", "italiano/index.php", "english/index.php")

var languageinfo=navigator.language? navigator.language : navigator.userLanguage
var gotodefault=1

function redirectpage(dest){
if (window.location.replace)
window.location.replace(dest)
else
window.location=dest
}

for (i=0;i<langcodes.length-1;i++){
if (languageinfo.substr(0,2)==langcodes[i]){
redirectpage(langredirects[i])
gotodefault=0
break
}
}

if (gotodefault)
redirectpage(langredirects[langcodes.length-1])

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:55:58.830

看看这是否能得到你想要的：

```
if (!isset($_SESSION['locale'])){
    // See if the client headers tell us what language they want. If not, 
    // default to U.S. English.
    if (isset($_SERVER['HTTP_ACCEPT_LANGUAGE'])){
        $lang = explode(',', $_SERVER['HTTP_ACCEPT_LANGUAGE']);
        $pattern = '/^(?P<primarytag>[a-zA-Z]{2,8})'.'(?:-(?P<subtag>[a-zA-Z]{2,8}))?(?:(?:;q=)'.'(?P<quantifier>\d\.\d))?$/';
        $splits = array();

        if (preg_match($pattern, $lang[0], $splits)) {
            if (isset($splits[1]) && isset($splits[2])){
                $_SESSION['locale'] = "$splits[1]_$splits[2]";
            }else{
                $_SESSION['locale'] = 'en_US';
            }
        } else {
            $_SESSION['locale'] = 'en_US';
        }
    }else{
        $_SESSION['locale'] = 'en_US';
    }
} 
```

# javascript - 无法获取 Google 搜索建议 API

> ID：13967703
> 
> 赞同：1
> 
> 时间：2012-12-20T08:06:11.260
> 
> 标签：javascript, xmlhttprequest, autosuggest, search-suggestion

尝试使用 xmlHTTPrequest 获取搜索建议，但我无法访问。

链接是：[http](http://suggestqueries.google.com/complete/search?output=toolbar&hl=ja&q=keyword) ://suggestqueries.google.com/complete/search?output=toolbar&hl=ja&q= keyword 放入地址栏时加载正常。

我已经编写了一个代码来从一个可以工作的 Rakuten API 获取 xml 文件。我尝试将其与此 URL 一起使用，但无法获取任何信息。

这是 Chrome 中的错误： XMLHttpRequest cannot load [http://suggestqueries.google.com/complete/search?output=toolbar&hl=ja&q=keyword](http://suggestqueries.google.com/complete/search?output=toolbar&hl=ja&q=keyword)。Access-Control-Allow-Origin 不允许 Origin null。

这是使用的代码的 xml 部分。

```
var getURL="http://suggestqueries.google.com/complete/search?output=toolbar&hl=ja&q=keyword";
xmlhttp.open("GET",getURL,false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 
```

需要什么才能使其正常工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:18:52.710

尝试在由 Web 服务器而不是本地文件提供的页面中运行它。

# javascript - 我的页面上有 3 个滑块，使用 ContentSlider 脚本，我可以减少代码吗？

> ID：13967706
> 
> 赞同：0
> 
> 时间：2012-12-20T08:06:37.020
> 
> 标签：javascript, jquery, slider

我是 Javascript(jQuery) 领域的新手，我似乎真的不知道自己在做什么。

所以我决定问你！

我这里有这段 Javascript

```
 $(document).ready(function() {
            //move he last list item before the first item. The purpose of this is if the user clicks to slide left he will be able to see the last item.
            $('#carousel-1 #carousel_ul li:first').before($('#carousel-1 #carousel_ul li:last')); 

            //when user clicks the image for sliding right        
            $('#carousel-1 .navNext').click(function(){

                    //get the width of the items ( i like making the jquery part dynamic, so if you change the width in the css you won't have o change it here too ) '
                    var item_width = $('#carousel-1 #carousel_ul li').outerWidth() + 18;

                    //calculae the new left indent of the unordered list
                    var left_indent = parseInt($('#carousel-1 #carousel_ul').css('left')) - item_width;

                    //make the sliding effect using jquery's anumate function '
                    $('#carousel-1 #carousel_ul:not(:animated)').animate({'left' : left_indent},250,function(){    

                            //get the first list item and put it after the last list item (that's how the infinite effects is made) '
                            $('#carousel-1 #carousel_ul li:last').after($('#carousel-1 #carousel_ul li:first')); 

                            //and get the left indent to the default -210px
                            $('#carousel-1 #carousel_ul').css({'left' : '-179px'});
                    }); 
            });

            //when user clicks the image for sliding left
            $('#carousel-1 .navPrev').click(function(){

                    var item_width = $('#carousel-1 #carousel_ul li').outerWidth() + 18;

                    /* same as for sliding right except that it's current left indent + the item width (for the sliding right it's - item_width) */
                    var left_indent = parseInt($('#carousel-1 #carousel_ul').css('left')) + item_width;

                    $('#carousel-1 #carousel_ul:not(:animated)').animate({'left' : left_indent},250,function(){    

                    /* when sliding to left we are moving the last item before the first list item */            
                    $('#carousel-1 #carousel_ul li:first').before($('#carousel-1 #carousel_ul li:last')); 

                    /* and again, when we make that change we are setting the left indent of our unordered list to the default -210px */
                    $('#carousel-1 #carousel_ul').css({'left' : '-179px'});
                    });

            });
});

$(document).ready(function() {
            //move he last list item before the first item. The purpose of this is if the user clicks to slide left he will be able to see the last item.
            $('#carousel-2 #carousel_ul li:first').before($('#carousel-2 #carousel_ul li:last')); 

            //when user clicks the image for sliding right        
            $('#carousel-2 .navNext').click(function(){

                    //get the width of the items ( i like making the jquery part dynamic, so if you change the width in the css you won't have o change it here too ) '
                    var item_width = $('#carousel-2 #carousel_ul li').outerWidth() + 18;

                    //calculae the new left indent of the unordered list
                    var left_indent = parseInt($('#carousel-2 #carousel_ul').css('left')) - item_width;

                    //make the sliding effect using jquery's anumate function '
                    $('#carousel-2 #carousel_ul:not(:animated)').animate({'left' : left_indent},250,function(){    

                            //get the first list item and put it after the last list item (that's how the infinite effects is made) '
                            $('#carousel-2 #carousel_ul li:last').after($('#carousel-2 #carousel_ul li:first')); 

                            //and get the left indent to the default -210px
                            $('#carousel-2 #carousel_ul').css({'left' : '-179px'});
                    }); 
            });

            //when user clicks the image for sliding left
            $('#carousel-2 .navPrev').click(function(){

                    var item_width = $('#carousel-2 #carousel_ul li').outerWidth() + 18;

                    /* same as for sliding right except that it's current left indent + the item width (for the sliding right it's - item_width) */
                    var left_indent = parseInt($('#carousel-2 #carousel_ul').css('left')) + item_width;

                    $('#carousel-2 #carousel_ul:not(:animated)').animate({'left' : left_indent},250,function(){    

                    /* when sliding to left we are moving the last item before the first list item */            
                    $('#carousel-2 #carousel_ul li:first').before($('#carousel-2 #carousel_ul li:last')); 

                    /* and again, when we make that change we are setting the left indent of our unordered list to the default -210px */
                    $('#carousel-2 #carousel_ul').css({'left' : '-179px'});
                    });

            });
});

$(document).ready(function() {
            //move he last list item before the first item. The purpose of this is if the user clicks to slide left he will be able to see the last item.
            $('#carousel-3 #carousel_ul li:first').before($('#carousel-3 #carousel_ul li:last')); 

            //when user clicks the image for sliding right        
            $('#carousel-3 .navNext').click(function(){

                    //get the width of the items ( i like making the jquery part dynamic, so if you change the width in the css you won't have o change it here too ) '
                    var item_width = $('#carousel-3 #carousel_ul li').outerWidth() + 18;

                    //calculae the new left indent of the unordered list
                    var left_indent = parseInt($('#carousel-3 #carousel_ul').css('left')) - item_width;

                    //make the sliding effect using jquery's anumate function '
                    $('#carousel-3 #carousel_ul:not(:animated)').animate({'left' : left_indent},250,function(){    

                            //get the first list item and put it after the last list item (that's how the infinite effects is made) '
                            $('#carousel-3 #carousel_ul li:last').after($('#carousel-3 #carousel_ul li:first')); 

                            //and get the left indent to the default -210px
                            $('#carousel-3 #carousel_ul').css({'left' : '-179px'});
                    }); 
            });

            //when user clicks the image for sliding left
            $('#carousel-3 .navPrev').click(function(){

                    var item_width = $('#carousel-3 #carousel_ul li').outerWidth() + 18;

                    /* same as for sliding right except that it's current left indent + the item width (for the sliding right it's - item_width) */
                    var left_indent = parseInt($('#carousel-3 #carousel_ul').css('left')) + item_width;

                    $('#carousel-3 #carousel_ul:not(:animated)').animate({'left' : left_indent},250,function(){    

                    /* when sliding to left we are moving the last item before the first list item */            
                    $('#carousel-3 #carousel_ul li:first').before($('#carousel-3 #carousel_ul li:last')); 

                    /* and again, when we make that change we are setting the left indent of our unordered list to the default -210px */
                    $('#carousel-3 #carousel_ul').css({'left' : '-179px'});
                    });

            });
}); 
```

你可以在[这里](http://demo.gamersnation.dk)查看它是如何工作的。

我真正想知道的是可以减少我们使用的 ID 数量吗？

因为截至目前，我们有`#carousel-1 + 2 + 3`很多看似不必要的 ID。

基本上，我们试图使 JS 代码比实际更小。

预先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:21:18.867

> 是的，使用类代替 id，因此您的代码对所有 3 个滑块都具有通用性。

此外，用于`$(this)`避免滑块之间的冲突。

`frontpageSlider`在类而不是 id上写你的 jQuery

所以你的代码应该是这样的，

```
$(".frontpageSlider .navPrev").click(function(){
    //This function will get called irrespective of which `.navPrev` you click.
    //To get the right context, use the $(this) jQuery object. given your structure you can get the carousel like so,

    var $carousel = $(this).parent(".frontpageSlider");

    //To get the `ul` of images you can do the following,

    var $ul = $(this).siblings("#carousel_container").find("#carousel_ul");

    //Write logic here
}); 
```

并为点击处理做类似的事情`.navNext`。

# php - 如何锁定 xml 文件 usinf 群

> ID：13967707
> 
> 赞同：1
> 
> 时间：2012-12-20T08:06:37.543
> 
> 标签：php, locking

通过google搜索，似乎每个人都使用文本文件来展示如何使用**flock（）锁定文件的示例**

然后我尝试了

```
<?php

$dom = new DOMDocument("1.0");
$fp = $dom->load('bt.xml');
//$fp = fopen("bt.xml", "w");
if (flock($fp, LOCK_EX | LOCK_NB)) {
    echo "Got lock!\n";
    sleep(10);
    flock($fp, LOCK_UN);
} else {
    print "Could not get lock!\n";
}?> 
```

但它给出了一个错误

> 警告：flock() 期望参数 1 是资源，在第 6 行的 /var/www/html/testphp/lock1.php 中给出的布尔值无法获得锁定！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:10:02.230

flock() 函数将文件句柄作为其第一个参数，将锁定操作作为其第二个参数。文件句柄你已经知道了，操作很简单：LOCK_SH请求共享锁，LOCK_EX请求排他锁，LOCK_UN释放锁。如果文件锁被成功检索，则调用flock() 将返回true，如果失败则返回false。因此，例如，flock() 可以这样使用：

```
<?php
    $fp = fopen( $filename,"w"); // open it for WRITING ("w")
    if (flock($fp, LOCK_EX)) {
        // do your file writes here
        flock($fp, LOCK_UN); // unlock the file
    } else {
        // flock() returned false, no lock obtained
        print "Could not lock $filename!\n";
    }
?> 
```

默认情况下，PHP 中的文件锁定机制自动使进程排队等待锁定。例如，将下一个脚本保存为flock.php：

```
<?php
    $fp = fopen("foo.txt", "w");
    if (flock($fp, LOCK_EX)) {
        print "Got lock!\n";
        sleep(10);
        flock($fp, LOCK_UN);
    }
?> 
```

该脚本尝试锁定文件 foo.txt，因此您需要创建该文件。该脚本使用 LOCK_EX 锁定它，这意味着没有其他程序可以锁定该文件。获得锁后，脚本会休眠十秒钟，然后解锁文件并退出。如果由于另一个应用程序有锁而无法获得锁，则脚本会在flock() 调用中等待锁被释放，然后自行锁定并继续。

要对此进行测试，请打开两个命令提示符并运行脚本两次。第一个脚本运行将立即获得锁并打印“Got lock!”，然后休眠十秒钟。如果在第一个脚本处于休眠状态时启动第二个脚本，它将等待（“块”）调用 flock() 并等待第一个脚本完成。当第一个脚本完成时，第二个脚本将成功获取它的锁，打印出“Got lock！” 然后再睡十秒钟，直到它最终终止。

有时不希望您的脚本等待文件解锁，在这种情况下，您可以使用按位 OR 运算符 | 在第二个参数中添加一个额外选项。如果您使用普通的第二个参数传入 LOCK_NB ORed，PHP 在请求文件锁定时不会阻塞。这意味着如果文件锁不可用，flock() 将立即返回 false，而不是等待锁可用。

这是代码中的样子：

```
<?php
    $fp = fopen("foo.txt", "w");
    if (flock($fp, LOCK_EX | LOCK_NB)) {
        echo "Got lock!\n";
        sleep(10);
        flock($fp, LOCK_UN);
    } else {
        print "Could not get lock!\n";
    }
?> 
```

这一次，第一个脚本将获取锁并打印“Got lock!”，而第二个脚本将无法获取锁，立即返回并打印“Could not get lock!”。

# php - 'echo' VS 'return' 的 PHP 要求

> ID：13967711
> 
> 赞同：0
> 
> 时间：2012-12-20T08:07:22.597
> 
> 标签：php, return, echo

在 PHP 函数中，有时我发现可以回显某些内容，但无法返回。

例如，这成功地将结果回显到页面上：

```
function get_page_id( $path ) {

global $mysqli;
if ($stmt = $mysqli->prepare("SELECT state FROM country WHERE city = ?")) {
    $stmt->bind_param("s", $city);
    $stmt->execute();
    $stmt->bind_result($state);
    $stmt->fetch();
    $stmt->close();
    echo $state;
}

} 
```

但是，此函数不返回值：

```
function get_page_id( $path ) {

global $mysqli;
if ($stmt = $mysqli->prepare("SELECT state FROM country WHERE city = ?")) {
    $stmt->bind_param("s", $city);
    $stmt->execute();
    $stmt->bind_result($state);
    $stmt->fetch();
    $stmt->close();
    return $state;
}

} 
```

是什么让一个值能够被回显但不能被返回？

$state 变量在别处被调用，并作为全局变量包含在内，但未包含在示例中。有趣的是，当我将函数更改为返回 $state.''; 它按照我的预期返回结果，但只有当我附加空字符串时它才会这样做。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:14:44.610

必须回显/打印且不返回的值的唯一示例是在某些 AJAX 应用程序中，其中正在运行的脚本在不同的线程中，因此无处“返回”值。在这种情况下，必须输出该值，并由调用 XHR 函数捕获。

您的示例未在任何地方声明`$state`值。您的两个示例都不会回显或返回除`null`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:32:02.150

`However, this function does not return the value:`我无法重现这种行为

例如

```
<?php
$mysqli = new mysqli('localhost', 'localonly', 'localonly', 'test');
if ($mysqli->connect_error) {
    die('Connect Error (' . $mysqli->connect_errno . ') ' . $mysqli->connect_error);
}
setup($mysqli);

$state = get_page_id('acity');
echo 'state: ', $state;

function get_page_id( $city ) {
    global $mysqli;
    if ($stmt = $mysqli->prepare("SELECT state FROM tmp_country WHERE city = ?")) {
        $stmt->bind_param("s", $city);
        $stmt->execute();
        $stmt->bind_result($state);
        $stmt->fetch();
        $stmt->close();
        return $state;
    }
}

function setup($mysqli) {
    $mysqli->query('
        CREATE TEMPORARY TABLE tmp_country (
            id int auto_increment,
            city varchar(32),
            state varchar(32),
            primary key(id),
            unique key(city)
        )
    ') or die($mysqli->error);
    $mysqli->query("INSERT INTO tmp_country (city,state) VALUES ('acity','astate'),('bcity','bstate')") or die($mysqli->error);
} 
```

`state: astate`按预期在我的机器上打印。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:08:56.460

如果您想返回并回显，您只需执行以下操作：

```
echo $state;
return $state; 
```

返回一个值并回显它是两个不同且不相关的操作。

# java - 使用 NSpeex 在 WP7 中编码有效，使用 JSpeex 在 JavaEE 服务器上解码流不起作用

> ID：13967712
> 
> 赞同：1
> 
> 时间：2012-12-20T08:07:27.370
> 
> 标签：java, audio, speex, jspeex, nspeex

正如主题所述，我在 Windows Phone 7 中使用 NSpeex（v1.1.1，使用 Speex v1.2rc1）编码音频没有问题。我已经通过首先对流进行编码来验证这一点，然后在再次解码后立即添加 wav 标头并将其发送回 wav 播放正常的服务器。但是，如果我将编码流发送到服务器并尝试使用 JSpeex（v0.9.7，使​​用 Speex v1.0.3）对其进行解码，我只会得到不同类型的 StreamCorruptedExceptions 并摆弄解码设置。

我是在这里遇到版本不可复制性，还是我只是做错了什么？如果有人对此配置有任何了解，我将不胜感激。我现在使用的代码：

手机端：

```
SpeexEncoder encoder = new SpeexEncoder(BandMode.Wide);
// set encoding quality to lowest (which will generate the smallest size in the fastest time)
encoder.Quality = 1;
int inDataSize = _recordedBytes / 2; //_recordedBytes is the lenght of the _recordedBuffer(which is a byte array)

// convert to short array
short[] data = new short[inDataSize];
int sampleIndex = 0;
for (int index = 0; index < _recordedBytes; index += 2, sampleIndex++)
{
    data[sampleIndex] = BitConverter.ToInt16(_recordedBuffer, index);
}

// note: the number of samples per frame must be a multiple of encoder.FrameSize
inDataSize = inDataSize - inDataSize % encoder.FrameSize; //framesize is 320
var encodedData = new byte[_recordedBytes];
int encodedBytes = encoder.Encode(data, 0, inDataSize, encodedData, 0, _recordedBytes);
if (encodedBytes != 0)
{
    byte[] inDataSizeBuf = BitConverter.GetBytes(inDataSize);
    byte[] sizeBuf = BitConverter.GetBytes(encodedBytes + inDataSizeBuf.Length);
    byte[] returnBuf = new byte[encodedBytes + sizeBuf.Length + inDataSizeBuf.Length];
    sizeBuf.CopyTo(returnBuf, 0);
    inDataSizeBuf.CopyTo(returnBuf, sizeBuf.Length);
    Array.Copy(encodedData, 0, returnBuf, sizeBuf.Length + inDataSizeBuf.Length, encodedBytes);
} 
```

服务器端：

```
SpeexDecoder speexDecoder = new SpeexDecoder();         
if(speexDecoder.init(1, 16000, 1, true)) { //params: mode(1 = wide), sample rate, channels, enhancement(what ever that is)
    speexDecoder.processData(encodedSpeex, 0, 320); //params: encoded byte array, offset, frame size
    byte[] decoded = new byte[speexDecoder.getProcessedDataByteSize()];
    speexDecoder.getProcessedData(decoded, 0);
} 
```

错误，发生在 processData() （代码中使用当前设置）：

```
java.io.StreamCorruptedException: Invalid sideband mode encountered. (2nd sideband): 6
at org.xiph.speex.NbDecoder.decode(Unknown Source)
at org.xiph.speex.SbDecoder.decode(Unknown Source)
at org.xiph.speex.SpeexDecoder.processData(Unknown Source)
at org.xiph.speex.SpeexDecoder.processData(Unknown Source)
at mun.testi.SpeexTesti.main(SpeexTesti.java:35) 
```

# java - Struts2 JQuery 插件无法调用未定义的拆分

> ID：13967719
> 
> 赞同：0
> 
> 时间：2012-12-20T08:08:02.960
> 
> 标签：java, ajax, forms, struts2

每次向服务器发送 ajax 请求时，我都会在表单上收到此错误

```
Uncaught TypeError: Cannot call method 'split' of undefined 
```

我正在使用 Struts-Jquery 插件。

这是我的表格

```
<!DOCTYPE HTML>
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>
<html>
<head>
<script 
        language="JavaScript" 
        src="utils.js" 
        type="text/javascript">
    </script>
    <script 
        language="JavaScript" 
        src="validation.js" 
        type="text/javascript">
    </script>

<sj:head />
</head>
<body>
    <h3>Register for a prize by completing this form.</h3>
    <div id="divErrors"></div>

    <s:form action="register" id="form">
        <label>UserName</label>
        <s:textfield name="userBean.username" />
        <s:fielderror />

        <sj:submit targets = "form" value="AJAX Submit" />
    </s:form>

    <audio  src="x.mp3" controls>Your browser
        does not support the audio element.
    </audio>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T14:05:17.713

在您的提交标签`<sj:submit targets = "form" value="AJAX Submit" />` 中，您应该添加将显示操作结果的 div。

例如。

```
<div id="result"></div>
<s:form action="register" id="form">
    <label>UserName</label>
    <s:textfield name="userBean.username" />
    <s:fielderror />

    <sj:submit targets = "result" value="AJAX Submit" />
</s:form> 
```

> 问候， 谢伦德拉

# c# - 更智能的实体框架 Codefirst fluent API

> ID：13967722
> 
> 赞同：11
> 
> 时间：2012-12-20T08:08:36.790
> 
> 标签：c#, sql-server, entity-framework, ef-code-first

我需要在所有的 DateTime 和 DateTime 上使用 Sql Server 的“datetime2”类型吗？我所有实体对象的属性。这通常使用 fluent API 完成，如下所示：

```
modelBuilder.Entity<Mail>().Property(c => c.SendTime).HasColumnType("datetime2"); 
```

但是，我不希望为每个实体类型中的每个 DateTime 字段手动执行此操作。（我没有可以放置所有 DateTime 属性的通用基本类型，因为 DateTime 属性特定于定义它们的实体类型）。

简短的问题：我有什么选择？

长问题：我正在考虑使用反射并进行了尝试，但它变得非常混乱，因为流式 API 似乎不太适合这种工作，因为我必须通过反射调用通用流式 API 方法。这是我的混乱尝试：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        var genericEntityMethod = modelBuilder.GetType().GetMethod("Entity");
        var entityTypes = Assembly.GetExecutingAssembly().GetTypes().Where(t => t.IsClass && !t.IsAbstract && t.GetInterface("IEntity") != null);
        foreach (var t in entityTypes) {
            var props = t.GetProperties().Where(p => 
                p.GetSetMethod() != null && 
                p.GetGetMethod() != null && 
                (p.PropertyType == typeof (DateTime) ||  
                p.PropertyType == typeof(DateTime?)));
            foreach (var propertyInfo in props) {
                var entityMethod = genericEntityMethod.MakeGenericMethod(t.GetType());
                var entityTypeConfiguration = entityMethod.Invoke(modelBuilder,null);
                var lambdaExpression = Expression.Lambda(Expression.MakeMemberAccess(Expression.Parameter(t), propertyInfo), Expression.Parameter(t));

                //var propertyMethod = entityTypeConfiguration.GetType().GetMethod("Property");  // Cant get this to work
                var propertyMethods = entityTypeConfiguration.GetType().GetMethods().Where(m => m.ReturnType == typeof(DateTimePropertyConfiguration)).ToList();
                var propertyMethod = propertyInfo.PropertyType == typeof (DateTime) ? propertyMethods[0] : propertyMethods[1];

               var dateTimePropertyConfiguration = propertyMethod.Invoke(entityTypeConfiguration, new object[] {lambdaExpression});
                var hasColumnTypeMethod = entityTypeConfiguration.GetType().GetMethod("HasColumnType");
                hasColumnTypeMethod.Invoke(dateTimePropertyConfiguration, new object[]{ "datetime2" });
            }
        }
        base.OnModelCreating(modelBuilder);
    } 
```

这在这一行失败：

```
 var dateTimePropertyConfiguration = propertyMethod.Invoke(entityTypeConfiguration, new object[] {lambdaExpression}); 
```

出现此错误（Entities.Order 是我的具有 DateTime 属性的实体对象之一）：

```
Object of type 'System.Linq.Expressions.Expression`1[System.Func`2[Entities.Order,System.Nullable`1[System.DateTime]]]' cannot be converted to type 'System.Linq.Expressions.Expression`1[System.Func`2[System.RuntimeType,System.Nullable`1[System.DateTime]]] 
```

任何人都可以用这种反射方法或更好的方法帮助我，向我展示一种更简单的方法来避免手动编写大量流利的 api 东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T11:08:53.387

有**更好**的方法。不幸的是，该方法基于 EF6 中可用的自定义约定。您可以尝试[EF6 Alpha 2](http://blogs.msdn.com/b/adonet/archive/2012/12/10/ef6-alpha-2-available-on-nuget.aspx)并自己使用自定义约定 -[演练](http://msdn.microsoft.com/en-us/data/jj819164)包含具有您确切要求的示例。

要解决您的反射问题，请查看此[博客文章](http://dotnetspeak.com/index.php/2011/03/custom-conventions-in-entity-framework-code-first-v-4-1/)。它描述了使用反射生成映射的代码（应该有相关[的开源项目](http://efcodefirstextras.codeplex.com/)）。

# c++ - 'base' 是 'deriv' 的一个不可访问的基础

> ID：13967728
> 
> 赞同：3
> 
> 时间：2012-12-20T08:09:01.673
> 
> 标签：c++, inheritance

为什么base无法进入`deriv`内部`deriv`？该程序用`class deriv : public base`.

```
#include <cstdio>

class base
{
};

class deriv : base
{
  public:
  void f(deriv, int){printf("deriv::f(deriv, int)\n");}
  void f(base){printf("deriv::f(base)\n");}
};

int main()
{
  deriv d;
  d.f(d);
}

17: error: ‘base’ is an inaccessible base of ‘deriv’
17: error:   initializing argument 1 of ‘void deriv::f(base)’ 
```

因为已经有两个人说错了，我就加粗问：**为什么`base`要公开继承**？它`deriv`只能从内部访问。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T08:10:00.250

如果使用`class`关键字定义类，则成员和基类默认为私有。

如果基类需要公开，那么要么显式声明它`public`（正如你在问题中提到的那样），要么使用`struct`默认情况下使事情公开的关键字。

> 为什么 base 需要公开？

在这种情况下，您的 to 调用`f(base)`需要从`deriv`to转换`base`，并且只有在基类可访问的情况下才能进行这种转换。由于是私有的，它在 中是不可访问的`main`，这是需要转换的地方。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T08:23:08.890

您似乎错误地假设调用时从`deriv`到的转换发生在“内部”，因此必须是可访问的。不是这种情况。调用函数时，初始化函数参数所需的所有转换都发生在调用者的上下文中。他们不是“内部”。它们发生在“外部世界”。在您的情况下，“外部世界”无法进行转换。`base``deriv::f(base)``deriv``derive``deriv``base`

在您的特定情况下，它`main`正在尝试转换`deriv`为`base`. 并且`main`不能这样做，因为它无法访问`deriv`. 只是为了试验，您可以声明`int main()`为的朋友，`deriv`代码将编译。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T08:10:01.887

因为它是私人继承的：

```
class deriv : base 
```

的默认继承`class`是私有的，这意味着其他类和函数无权访问派生类的基类。

* * *

您的示例中有一个小问题。这 ：

```
 deriv d;
  d.f(d); 
```

由于切片，不会做你期望它做的事情。

如果我们通过将签名更改为 this 来解决上述问题`f`：

```
void f(base&){printf("deriv::f(base)\n");} 
```

访问 的基类仍然存在问题`deriv`，因为它是从基类私有继承的。

# css - 如何使 div 充满浏览器窗口

> ID：13967729
> 
> 赞同：1
> 
> 时间：2012-12-20T08:09:00.107
> 
> 标签：css, html, css-float

从互联网上访问了许多站点后，我找不到方法，如何制作一个`div`填充浏览器窗口的方法。首先它应该被隐藏，但在回发时它应该是可见的。此 div 不是标记的直接子级，`body`而是放置在表格行内。我应该应用什么样的 css 以便它可以定位以适合窗口。我在下面`Css`使用`div`但对我不起作用。

```
 .BodyCover { position: absolute;
  top: 0;
  right: 0;
  width: 100%;
  height: 100%;
  } 
```

**编辑**

和 Html 标记在下面，

```
 <table>
     <tr>
        <td>Content</td>
    </tr>
     <tr>
        <td>Content</td>
    </tr>
    <tr>
        <td><div class="BodyCover "></div></td>
    </tr>
</table> 
```

如何通过任何一种方式实现这一点意味着我想让 DIV 像在身体事件上浮动一些按钮点击一样。这怎么可能通过另一种方式实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-29T05:20:37.367

您现在可以使用视口高度和视口宽度 - 分别为 vh 和 vw。例如，100vh 填充视口窗口的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:15:52.743

基于百分比的宽度和高度是相对于包装元素的（顺便说一下，绝对位置也是如此），所以如果你想让你的 div 覆盖整个身体，你别无选择，只能让它成为身体的直接后代，或者使用 javascript手动更改 div 的大小和位置。

有趣的问题是为什么您希望 div 成为表格的一部分但覆盖整个屏幕...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:16:01.027

试试这个，为我工作

```
.BodyCover { 
position: absolute;
top: 0;
right: 0;
bottom:0;
left:0;
}​ 
```

[http://jsfiddle.net/jeL3D/](http://jsfiddle.net/jeL3D/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T08:18:57.723

你可以这样做;

```
body{
   height:100%;
   margin:0;
}

.full{
    display:block;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:#F00;
    position:absolute;
    visibility:hidden;
}
<table border="1">
    <tr>
        <td id="rw"><div class="full" id="dv">text here</div>click</td>
        <td><div>text1</div></td>
    </tr>

    <tr>
        <td><div>text2</div></td>
        <td><div>text3</div></td>
    </tr>
</table> 
```

[http://jsfiddle.net/MvtYU/19/](http://jsfiddle.net/MvtYU/19/)

# mysql - 可以优化嵌套 MySQL 查询吗？

> ID：13967731
> 
> 赞同：1
> 
> 时间：2012-12-20T08:09:07.573
> 
> 标签：mysql

我有下表（简化，删除了不需要的列）：

**包交易**

```
| memberID  |  subscriptionType |
| ==========|===================|
| 12345     |  101              |
| 12345     |  203              |
| 12346     |  101              |
| 12347     |  101              |
| 12348     |  101              |
| 12348     |  203              |
| 12349     |  203              |
| 12345     |  205              | 
```

我想查询所有**没有** `subscriptionType`= 101的记录，**但只有**那些`subscriptionType`= 101的记录相同的记录`memberID`存在。

因此，我使用：

```
SELECT memberID, subscriptionType
  FROM packageTransactions
 WHERE memberID IN
    ( SELECT memberID
        FROM packageTransactions
       WHERE subscriptionType = '101'
    )
   AND subscriptionType <> '101'
; 
```

这给了我正在寻找的结果集：

```
| memberID  |  subscriptionType |
| ==========|===================|
| 12345     |  203              |
| 12348     |  203              |
| 12345     |  205              | 
```

但是，当在具有几千条记录（在我的情况下为 +30k）的表上使用此查询时，需要几分钟才能返回结果。

所以我想知道，是否有一种*“更好”* /更有效的方式来查询数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:31:12.240

这是一个[SQLFiddle 演示](http://sqlfiddle.com/#!2/eb0cf/1)

```
select t.* from packageTransactions t
join
(
  select distinct memberID 
    from packageTransactions
  where subscriptionType = 101 
) t1 on t.memberId= t1.memberId
where
  (subscriptionType <> 101) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:19:43.747

尝试这个 ：

```
SELECT pt2.memberID, pt2.subscriptionType
FROM packageTransactions pt1 inner join packageTransactions pt2 
   ON pt1.memberID = pt2.memberID  
WHERE 
  pt1.subscriptionType = '101' AND pt2.subscriptionType <> '101'

; 
```

# python - python：在列表中为 i 打印 i

> ID：13967735
> 
> 赞同：2
> 
> 时间：2012-12-20T08:09:18.333
> 
> 标签：python

打印列表时，使用此方法时出现语法错误：

```
print i for i in [1,2,3] 
```

我知道使用此方法时可以：

```
for i in [1, 2, 3]:
    print i 
```

我知道

```
(i for i in [1, 2, 3]) 
```

是一个生成器对象，但我就是不明白为什么

```
print i for i in [1, 2, 3] 
```

不起作用。谁能给我一个线索？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T08:11:51.323

列表理解语法`x for x in ...` *需要*括号括起来。这是 Python 的句法规则，就像需要缩进，或者后面需要冒号`if`等等。 `i for i in [1, 2, 3]`本身不是有效的语法。您需要`[i for i in [1, 2, 3]]`（对于列表理解）或`(i for i in [1, 2, 3])`（对于生成器理解）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T08:14:23.953

在 Python 2 中，`print`is 是一个语句，而不是表达式或函数，因此您不能直接在推导式中使用它。使用这个技巧：

```
def f(x): print x
[f(i) for i in [1,2,3]] 
```

请注意，这`(f(i)...)`不起作用，因为这只会创建一个生成器，`f()`如果您对其进行迭代，它将调用该生成器。列表推导`[]`实际上调用`f()`.

**[编辑]**如果您使用 Python > 2.6，您可以使用

```
from __future__ import print_function
[print(i) for i in [1, 2, 3]] 
```

注意`()`周围的论点`print`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T08:15:32.087

列表理解语法 ( ) 是用于*生成列表*`[expression for loop]`的速记循环语法。

 *您没有生成列表，而是要循环打印项目。由于您没有生成 python 列表，因此您必须使用常规循环。

或者，由于您所做的只是在单独的行上打印项目，因此只需自己添加换行符：

```
print '\n'.join(i for i in [1, 2, 3]) 
```

这会产生与以下内容相同的输出：

```
for i in [1, 2, 3]:
    print i 
```

如果您使用 Python 3，或者`from __future__ import print`在模块顶部使用并使用`print()` *function*，您可以在一次调用中将所有值发送到函数，并告诉`print()`在两者之间使用换行符：

```
values = [1, 2, 3]
print(*values, sep="\n") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T08:12:46.097

作为`expression`（在语法中）：

*   `[i for i in [1, 2, 3]]`是一个列表理解。
*   `(i for i in [1, 2, 3])`是一个生成器表达式。
*   但`i for i in [1, 2, 3]`它本身就是一个语法错误，事实就是如此。周围一定有什么东西。除非你有它`(`或`[`在它附近，否则它不是有效的`expression`，因为此时`for`关键字无效。

在[print 语句中](http://docs.python.org/2/reference/simple_stmts.html#the-print-statement)，它需要一个`expression`.

（作为一个红鲱鱼，`func(i for i in [1, 2, 3])`允许作为一个表达式，作为一个函数调用，第一个参数是一个生成器表达式。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T08:13:55.293

这是无效的 python 语法。`i for i in [1, 2, 3]`仅在列表或生成器理解中有效，即。`[]`被或`()`分别包围。

你会想要使用：

```
print '\n'.join(str(i) for i in [1, 2, 3]) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-20T08:24:05.373

Print 不是一个函数，它是一个语句，你不能在表达式中使用它们。只需使用常规循环，因为您不想生成列表，而列表推导会这样做。从理论上讲，您可以这样做（**根本不应该**这样做）：

```
from __future__ import print_function
[print(my_item) for my_item in [1,2,3,4]]

1
2
3
4
Out[26]:
[None, None, None, None] 
```*

# javascript - Knockout.js：获取计算的 observable 以返回数组以与选择选项一起使用

> ID：13967742
> 
> 赞同：0
> 
> 时间：2012-12-20T08:09:57.120
> 
> 标签：javascript, jquery, knockout.js, observable, computed-observable

基本上，我想要实现的是根据 Knockout.js 中另一个下拉列表的值填充下拉列表

我的视图代码（明显剥离）：

```
 <div data-bind="with: chosenMailData">
                <table id="tabl-1234" class="mails">
                    <thead><tr><th>Destination</th><th>Hotel</th></tr></thead>
                    <tbody data-bind="template: { name: 'iti-template', foreach: objects, afterRender: $root.myPostProcessingLogic }">
                </table>
            </div>

            <script type="text/html" id="iti-template">
                <tr>
                    <td><select class="desti" data-bind="options: $root.destinations, value: destination.name"></select></td>   
                    <td><select data-bind="options: $root.generall(), value: $root.generall()"></select></td>
                </tr>
            </script> 
```

我的视图模型（再次精简）：

```
 self.destinations=['Kerela', 'Shoghi, Himachal Pradesh', 'Kasauli, Himachal Pradesh'];

            self.myPostProcessingLogic = function(elements) {
                this.generall = ko.computed(function() {
                    $('.desti').each(function(i, obj) {
                        stayOptions = [];
                            $.getJSON("http://127.0.0.1:8000/api/hotel?format=json&location__name="+obj.value, function(data) {
                                    $.each(data.objects, function(i, item){
                                    stayOptions.push(item.name);
                                    });
                                });
                    });
                    return stayOptions;
                }, this);
            } 
```

插入确实填充了我想要的值`alert()`的`this.generall()`节目。`stayOptions`它正在让该数组显示在酒店列中相应行的选择选项中，这是问题所在。

可能我犯了一个非常愚蠢的错误，但我已经看了很长时间的代码，但什么也没想到。请指教。

**编辑**：我也在我的视图模型开始时这样做：

```
 self.generall = ko.observableArray(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:27:31.207

调用方法时，`this`变量在调用时被分配。

```
var f = $root.myPostProcessingLogic;
f(); // this will not set 'this' to '$root' 
```

以上基本上是淘汰赛正在做的事情，这使得`this`被绑定到里面的其他东西`myPostProcessingLogic()`。您已经定义了作用域`self`变量，因此很容易修复。

另一个问题是，重新分配 observables 不会保留任何订阅者，并且任何依赖的 observables 都不会更新。

```
self.generall = ko.observableArray();
self.myPostProcessingLogic = function(elements) {
    self.generall.removeAll();
    $('.desti').each(function(i, obj) {
        $.getJSON("http://127.0.0.1:8000/api/hotel?format=json&location__name="+obj.value, function(data) {
            $.each(data.objects, function(i, item){
                self.generall.push(item.name);
            });
        });
    });
} 
```

# iphone - 如何从 25 个图像中随机显示（5 个或 7 个或 8 个等）图像而不从 iphone 的数组中重复

> ID：13967746
> 
> 赞同：1
> 
> 时间：2012-12-20T08:10:01.733
> 
> 标签：iphone

在我的选择器中`FirstViewcontroller`包含值，如果用户在下一个屏幕的选择器中选择 5，它应该从 25 个图像中随机显示 5 个图像，而不重复这 5 个图像。如果用户选择另一个数字意味着它将该数字作为输入，它应该根据该数字显示图像。如果我运行我的代码意味着每次它显示所有 25 张图像而不是选定的数字图像。这是我的代码`1``25`

```
- (void)viewDidLoad {    
    myImageNames = [[NSMutableArray alloc] init];

    [myImageNames addObject:[UIImage imageNamed:@"Red.png"]];
    [myImageNames addObject:[UIImage imageNamed:@"Blue.png"]];
    [myImageNames addObject:[UIImage imageNamed:@"LightRed.png"]];
    [myImageNames addObject:[UIImage imageNamed:@"Orange.png"]];
    .
    .
    .

    timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self  selector:@selector(ChangingImgView:) userInfo:nil repeats:YES];
}

- (void) ChangingImgView:(int)selectedNumberFromPicker {
    selectedNumberFromPicker = [num intValue];

    for (int i=0; i < selectedNumberFromPicker; i++) {

        index = arc4random() % 25;
        NSString *strIndex = [NSString stringWithFormat:@"%i",index];
        [myImageNames addObject:strIndex];
        imgBtn = [UIButton buttonWithType:UIButtonTypeCustom];

        imgBtn.frame = CGRectMake(250, 300, 170, 220);
        UIImage *img = [myImageNames objectAtIndex:index];
        [imgBtn setBackgroundImage:img forState:UIControlStateNormal];
        [imgBtn addTarget:self action:@selector(ClickingOnImage) forControlEvents:UIControlEventTouchUpInside];
        [self.view addSubview:imgBtn];
    }
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:27:12.297

你也可以使用 NSSet 而不是使用 NSMutableArray

苹果医生

`You can use sets as an alternative to arrays when the order of elements isn’t important and performance in testing whether an object is contained in the set is a consideration—while arrays are ordered, testing for membership is slower than with sets.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:34:17.720

尝试使用这个 for 循环来获取随机索引的特定数量的图像。使用 selectedImgArray 显示选定的图像。myImageNames 是您的原始数组。

```
NSInteger index;
NSMutableArray *selectedImgArray = [[NSMutableArray alloc] init];
for (int i=0; i < selectedNumberFromPicker; i++) {
    index = arc4random() % 25;
    UIImage *selImg = (UIImage *)[myImageNames objectAtIndex:index];
    if ([selectedImgArray containsObject:selImg]) {
        i--;
        continue;
    }
    [selectedImgArray addObject:selImg];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:11:14.930

```
int count = 5;
NSMutableArray *inputImages = [myImageNames mutableCopy];
NSMutableArray *randomImages;

for (int i = 0; i<count; i++) {
    int index = arc4random_uniform([inputImages count]);
    [randomImages addObject:[inputImages objectAtIndex:index]];
    [inputImages removeObjectAtIndex:index];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T08:22:41.410

首先，`suffle`您使用[此](https://stackoverflow.com/a/56656/1106035)链接。`myImageNames``images`

现在`display`前 5 个`images`来自`myImageNames`.

# javascript - 用javascript出现onclick效果？

> ID：13967748
> 
> 赞同：0
> 
> 时间：2012-12-20T08:10:16.023
> 
> 标签：javascript, html, css

我正在处理以下页面： http: [//mockingbirdagency.com/thebox/bettercss/login-1.html](http://mockingbirdagency.com/thebox/bettercss/login-1.html) 并希望第一个注册框的右侧部分仅出现一次“使用您的电子邮件地址注册”被点击。

我对Javascript知之甚少，但我猜这就是我需要做的，有人可以指点我一个教程吗？

干杯

（编辑：我要求链接的原因是我不知道在 Google 上寻找什么）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:26:57.927

假设您将添加一个`id`到这两个元素：

```
<div class="form-step-1-container" id="myForm"> <!-- <-- ID here -->
    <h1>Register with your email address</h1>
    <div style="display:none;" id="targetDiv"> <!-- <-- ID here -->
        <input id="username" type="text" placeholder="Choose a Username" required="required" name="username">
        <input id="email" type="text" placeholder="Enter your Email" required="required" name="email">
        <input id="password" type="text" placeholder="Enter your Password" required="required" name="password">
        <input id="password" type="text" placeholder="Re-Enter your Password" required="required" name="password">
    </div>
</div> 
```

使用原生 JavaScript：

```
document.getElementById('myForm').addEventListener('click', function(){
    document.getElementById('targetDiv').style.display = "block";
}); 
```

这会`"click"`在 div 中添加一个事件侦听器，在单击时`"form-step-1-container"`显示`div`包含输入元素的内容。

* * *

**那么，这实际上是做什么的呢？**

*   [`document.getElementById('myForm')`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)使用 . "获取" DOM 元素`id="myForm"`。
*   [`.addEventListener()`](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)向该对象添加事件侦听器。它的第一个参数 ( `'click'`) 指定它应该监听 (“react”) 的事件，它的第二个参数是事件发生时要执行的函数。这个函数可以`addEventListener()`在`addEventListener()`.
*   [`.style.display`=](https://developer.mozilla.org/en-US/docs/DOM/element.style)[`"block"`](https://developer.mozilla.org/en-US/docs/CSS/display)将元素的`display`CSS 样式设置为 value `"block"`，以再次显示输入字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:19:49.210

您的代码如下所示：

**HTML**

```
<div class="form-step-1-container">
<h1>Register with your email address</h1>
<div style="display:none;">
<input id="username" type="text" placeholder="Choose a Username" required="required" name="username">
<input id="email" type="text" placeholder="Enter your Email" required="required" name="email">
<input id="password" type="text" placeholder="Enter your Password" required="required" name="password">
<input id="password" type="text" placeholder="Re-Enter your Password" required="required" name="password">
</div>
</div> 
```

**JS**

```
$(document).ready(function() {
  $('.form-step-1-container h1').click(function() {
    $('.form-step-1-container div').css('display', 'block');
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:26:54.427

将包含您要隐藏的元素的 HTML 元素放入一个常见的 HTML 元素中，例如`<div>`. 然后为其分配一个包含样式“ `display:none`”的 CSS 类。您可以在 HTML 代码中执行此操作，但更好的解决方案是在文档加载时为其分配 Javascript，因为在这种情况下，禁用 Javascript 的人可以看到输入。

然后向 div 添加一个 onclick 处理程序，将 CSS 类替换为具有`dispay:block`.

# android - 如何使用phoneGap安装/卸载apk android？

> ID：13967750
> 
> 赞同：4
> 
> 时间：2012-12-20T08:10:27.013
> 
> 标签：android, cordova, phonegap-plugins

有没有办法使用phoneGap安装和卸载android apk？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T08:40:31.637

[PhoneGap](http://phonegap.com/)，现在称为[Apache Cordova](http://cordova.apache.org/)，依赖于用于 Android 开发的标准 Android SDK。因此，安装方式与“原生”Android 应用程序的安装方式相同（请参阅[Android 入门指南](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html)中的“部署到”部分）。除了使用 Eclipse，您还可以使用一些[Cordova 帮助脚本](http://docs.phonegap.com/en/2.2.0/guide_command-line_index.md.html#Command-Line%20Usage_android)来部署应用程序，或者直接使用 Android SDK 的[adb (un)install](http://developer.android.com/tools/help/adb.html#move)。

如果您的问题是 PhoneGap 是否提供 API 以编程方式（卸载）安装应用程序，答案是否定的。这只能通过“本机”代码和[一些技巧](https://stackoverflow.com/questions/6813322/install-uninstall-apks-programmatically-packagemanager-vs-intents)来完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T08:33:33.067

您可以通过电子邮件将 apk 发送给您并在设备上打开附件。Android 将看到该文件是一个 android 应用程序，并询问您是否要将其安装在您的设备上。

请注意，如果您这样做，您必须允许在您的设备上安装第三方应用程序。在开发人员选项中，您必须启用来自未知来源的应用程序。

要卸载，您必须按照与设备上任何其他应用程序相同的步骤进行操作。转到设置 -> 应用程序 => 查找应用程序 => 卸载

如果您在 Eclipse 中导入了 phonegap 应用程序，您可以作为原生 android 应用程序直接运行到设备上。

另请查看： [http ://droidlessons.com/how-to-install-non-market-third-party-apps-on-android/](http://droidlessons.com/how-to-install-non-market-third-party-apps-on-android/)

# php - 在运行时从 HTML 文档创建图像

> ID：13967753
> 
> 赞同：2
> 
> 时间：2012-12-20T08:10:36.553
> 
> 标签：php, html, runtime, shared-hosting

我目前正在开发一个网站项目，该项目需要根据用户在表单上的输入创建图像。基本上，我正在尝试从现有的 HTML 标记创建一个图像，其中的表单数据替换了一些文本。文本几乎总是独一无二的。

我探索了几种创建此类图像的选项，主要是：

1.  `imagecreate`使用不够灵活的 PHP，以及
2.  我无法在服务器上真正安装的 PhantomJS
3.  wkhtmltopdf 和 php-wkhtmltox

我在一个限制我可用选项的共享主机环境中工作。该环境支持 PHP（使用 GD 编译）、Perl 和 Python。

有没有可靠的方法来实现这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:56:26.817

我使用[CutyCapt](http://cutycapt.sourceforge.net/)软件从 html 渲染图像，效果很好。唯一的问题是您需要在共享主机上构建它。解决方法可能是在您的本地计算机上构建它，将其上传到您的主机并从那里运行它，但我不相信它会起作用，因为它需要 X 服务器。

另一种可能的解决方案是使用[GD 库](http://php.net/manual/en/ref.image.php)手动构建图像。如果您知道您的 html 的外观，您可以通过在空白图像上绘制所有元素来复制它。这并不容易，但看起来这只是您可以使用的一种解决方案。

# sql - Sql Server 2008 查询为不存在的值设置空值

> ID：13967754
> 
> 赞同：2
> 
> 时间：2012-12-20T08:10:45.963
> 
> 标签：sql, sql-server

这是两个表{ `PERSONS, CONTACTS`}

我想要这两个表的以下结果

```
PersonID | Name
1        |  A
2        |  B
3        |  C
4        |  D
5        |  E 
```

表`Contacts`：

```
ContactID | PersonID | Type | Contact 
1         | 1        |  p   | 051-001
2         | 1        |  e   | A@    
3         | 2        |  p   | 051-002
4         | 2        |  e   | B@
5         | 3        |  p   | 051-003
6         | 4        |  p   | 051-004
7         | 4        |  e   | D@ 
```

期望的结果输出：

```
Name | Contact
A    |  051-001
B    |  051-002
C    |  051-003
D    |  051-004
E    |  NULL 
```

请查看此问题的 Fiddle [SQLfiddle for Problem](http://sqlfiddle.com/#!3/793f2/4)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T08:16:44.543

这里是。您是否需要左连接才能从`Persons`. 此外，在`on`条件下，您可以过滤`Type = 'c'`

```
SELECT P.Name, C.Contact
FROM PERSONS  P
left outer join CONTACTS C
   on C.Type = 'p' and
      P.PersonId = C.PersonId
order by P.Name 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T08:24:10.413

也不知道为什么你不想要左连接，但这是使用子查询。

```
SELECT 
    Name, 
    (SELECT Contact 
     From Contacts c 
     WHERE c.Type = 'p' And c.PersonId = p.PersonID) 
    As Contact
FROM 
    PERSONS p 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T08:14:51.693

```
Select p.Name, c.Contact
from Persons p
left join Contacts c
on p.PersonId = c.Personid
Where Type = 'p' or c.Contact is null 
Order by p.Name 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T08:41:47.680

另一种不寻常的方法；）这不是最好的`regexp`。但它可以为您的情况工作。

```
select distinct p.name,  c.contact
from 
persons p
left join
contacts c
on p.personid = c.personid
where c.contact is null or
c.contact like '[0-9]%'
; 
```

结果：

```
NAME    CONTACT
A       051-001
B       051-002
C       051-003
D       051-004
E       (null) 
```

*** [SQLFIDDLE 参考](http://sqlfiddle.com/#!3/827ed/1)**

# jquery-mobile - 将淘汰赛与 sammyjs/pathjs 和 jquery mobile 相结合

> ID：13967763
> 
> 赞同：1
> 
> 时间：2012-12-20T08:11:36.930
> 
> 标签：jquery-mobile, knockout.js, singlepage, sammy.js, path.js

我正在尝试结合一些 JS 库来创建一个移动 SPA 网站。我正在使用缺少路由引擎的 knockoutJS，因此我从 SammyJS 或 PathJS 中获取它（尚未决定）。我想使用 jQuery Mobile 从中获取控件和移动设计。

问题是，每当我将 jquery mobile js 文件包含到我的页面中时，路由引擎就会停止工作。实际上它确实有效，但`window.location.hash`不仅由我改变，而且由 jquery mobile 本身改变。

下面是代码的样子：在 html 文件中，我得到了一个绑定到模板的 div

```
(function ($) {
infuser.defaults.templateUrl = "templates";
console.log('just before pageinit');
$(document).bind('pagecreate', function () {
    // disable autoInit so we can navigate to bookmarked hash url
    $.mobile.autoInitializePage = false;

    // let PathJS handle navigation
    $.mobile.ajaxEnabled = false;
    $.mobile.hashListeningEnabled = false;
    $.mobile.pushStateEnabled = false;
});

$(document).bind('pagebeforechange', function (e, data) {
    var to = data.toPage;
    if (typeof to === 'string') {
       /* var u = $.mobile.path.parseUrl(to);
        to = u.hash || '#' + u.pathname;
        // manually set hash so PathJS will be triggered
        location.hash = to;
        // prevent JQM from handling navigation*/
        e.preventDefault();
    }

});
$(document).bind('pagechange', function (e, data) {
});

var Model = function () {
    this.items = ko.observable(null);
    this.chosenItemData = ko.observable();
    this.state = ko.observable('items');

    this.goToItemDetails = function (item) {
        location.hash = '/details/' + item.id;
    };
};
window.currentModel = new Model();
ko.applyBindings(window.currentModel);

Path.map('#home').to(function () {
    currentModel.state(window.templates.items);
    currentModel.items(window.dummyData);
});
Path.map('#home/details/:id').to(function () {
    var self = this;
    $(currentModel.items()).each(function (index, item) {
        if (item.id.toString() == self.params['id']) {
            currentModel.chosenItemData(item);
            currentModel.state(window.templates.itemDetail);
        }
    });
});

Path.root('#home');

$(function () {
    Path.listen();
})
})(jQuery); 
```

现在，您可以看到它 `$.mobile.hashListeningEnabled = false;`设置为 false，因此 jquery 移动设备不应该监听或对哈希更改做出任何反应。

但！假设我从 localhost/sammy/#home 移动到 localhost/sammy/#home/detail/1 哈希更改发生并立即更改为 localhost/sammy/home/detail/1 由于某种原因哈希本身被省略并且路线没有被执行。

如果我没有更好地解释自己，我很抱歉。我正在努力将它发布到服务器上，让每个人都能看到它，但不幸的是，这需要时间。

同时，如果有人知道我能做些什么来解决这个问题，那就太棒了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:03:45.433

显然（并且它是在 jQuery Mobile 网站中编写的，“initmobile”事件作为它附加的 jquery mobile 脚本触发。为了能够附加事件，应在 jQuery Mobile 脚本**之前包含以下行。**

```
<script type="text/javascript">
$(document).on('mobileinit', function () {
    $.mobile.ajaxEnabled = false;
    $.mobile.hashListeningEnabled = false;
    $.mobile.pushStateEnabled = false;
    $.mobile.linkBindingEnabled = false;
}); 
```

那么 jquery mobile 中的 onchangehash 事件将被禁用。

# lotus-notes - 如果视图打开，lotus notes 5 getdocumentbykey 不起作用

> ID：13967764
> 
> 赞同：0
> 
> 时间：2012-12-20T08:11:44.067
> 
> 标签：lotus-notes, lotus-domino, lotus, lotusscript

Lotus notes 5 上有一个应用程序。如果视图打开，getdocumentbykey 函数将不起作用。如果其他视图已打开或数据库已关闭，则该功能正常工作并找到文档。即使视图是打开的，我们如何使它工作？我已经给出了下面的代码部分。谢谢你。

```
 BillNo2 = cdoc.fieldgettext("Bill_No2")
    Set view = db2.GetView("Bill No.")
    Set doc = view.getdocumentbykey(BillNo2)
    If Not doc Is Nothing Then
        doc.DOdone = "Done"
        doc.LorryNo = cdoc.fieldgettext("Lorry_No")
        doc.TripNo = cdoc.fieldgettext("Trip_No")
        Call doc.save(True, True)
    End If 
```

在调试时，它会跳过“If Not doc is Nothing”这一行，即使有文档也会结束循环。如果视图未打开，则相同的代码可以正常工作。请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:55:19.437

向后工作，如果 fieldGetText 没有返回您所期望的，您的 getDocumentByKey 调用将失败。在调用之前，您是否在调试器中检查过 BillNo2 的值？

进一步向后工作， fieldGetText 不会返回您所期望的原因是 cdoc 不是您所期望的。你是如何运行这段代码的？设置cdoc的代码是什么？由于您使用 fieldGetText，我认为它是一个 NotesUIDocument，并且从名称猜测我敢打赌您是从 NotesUIWorkspace.currentDocument 获取它的。也许您的代码正在运行的上下文中的 currentDocument 并不是您所期望的。即，如果您的代码在视图的上下文中运行，而不是在您正在阅读的文档的上下文中运行，我不希望它能够工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:32:07.883

这听起来像是一个错误，考虑到我们谈论的是 13 年前发布的版本，这完全有可能。但首先要检查几件事：

*   确保 Bill No. 视图的第一列已排序。
*   确保视图不是私有视图类型。

如果这些都不正确，或者您出于业务原因无法更改该视图，我认为 Anders 建议的使用隐藏视图的解决方法是一个好主意，应该可以解决问题。

# android - HTML 音频播放器在 Android 应用程序中不起作用

> ID：13967778
> 
> 赞同：0
> 
> 时间：2012-12-20T08:12:39.717
> 
> 标签：android, html, html5-audio

我正在使用 html、jQuery、phonegap 在 Android 应用程序中工作。

在这里，我尝试放置 HTML5 音频播放器。这不适用于 app 文件夹中的本地应用歌曲路径，但是当我放置一个可以正常工作的在线歌曲路径时（例如：[http](http://example.com/audio1.mp3) ://example.com/audio1.mp3 ）

**在下面我的编码中使用来自在线歌曲 url 的路径，这是有效的：**

```
<audio id="audio-player" src="http://example.com/audio1.mp3" type="audio/mp3" controls="controls"></audio> 
```

**在下面我使用本地应用程序路径进行的编码中不起作用：**

```
<audio id="audio-player" src="/android_asset/www/media/demo.mp3" type="audio/mp3" controls="controls"></audio> 
```

我试图解决这个问题但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:41:27.800

在第二种情况下`src`是错误的。应该是`file:///android_asset/www/media/demo.mp3`。

# blackberry - 在黑莓中隐藏状态消息

> ID：13967785
> 
> 赞同：3
> 
> 时间：2012-12-20T08:13:14.640
> 
> 标签：blackberry, java-me, status

`show`可以使用class 的方法在 Blackberry 中显示状态消息`net.rim.device.api.ui.component.Status`。使用这种方法，您可以指定应该显示消息的一定时间，但是，有没有办法在此时间之前隐藏此状态消息？

我正在使用此代码在我的应用程序中显示状态消息：

```
public static void status(final String message, final int time) {
    UiApplication.getUiApplication().invokeLater(new Runnable() { public void run() { Status.show(message, time); } });
} 
```

编辑：对我有用的解决方案（感谢 Eugen Martynov 解决方案）

```
public static void hideStatus() {
    UiApplication.getUiApplication().invokeLater(new Runnable() { 
        public void run() {
            Screen activeScreen = UiApplication.getUiApplication().getActiveScreen();
            if (activeScreen instanceof Status) {
                activeScreen.close();
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:40:48.983

根据[javadoc](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/component/Status.html)，没有关闭状态的具体方法。

但是，您可以尝试询问`UiApplication.getUiApplication().getActiveScreen()`并尝试调用`close()`它

# c# - 图标不适合 asp.net 应用程序中的按钮控件

> ID：13967786
> 
> 赞同：0
> 
> 时间：2012-12-20T08:13:14.357
> 
> 标签：c#, asp.net

在我的 Asp 项目中，..

我在 Button 中使用了图标文件。但是那些图标不适合按钮。它只有一半的高度可见。

我的代码是..

```
 <asp:Button ID="btnCoverPlus" runat="server"  
                    style="background-image: url('Images/plus.ico'); background-repeat:no-repeat; background-position:center; width:32%; font-size:medium;"
                    Height="25px" onclick="btnCoverPlus_Click" /> <br /> 
```

如何在 ASP 按钮中放置图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:18:40.990

显而易见的是改变图标的​​一面，但你也可以尝试通过添加以下内容来自动调整它的大小：

```
background-size: 100% Auto; 
```

或者直接设置大小

```
 background-size: 16px 16px; 
```

*请注意，只有 CSS 3 支持。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:19:22.233

尝试通过更改 Height="25px 属性来增加按钮高度

# android - 根据属性更改背景颜色

> ID：13967788
> 
> 赞同：0
> 
> 时间：2012-12-20T08:13:52.100
> 
> 标签：android, android-listview

我想根据光标当前成员的某些属性来改变 ListItem 背景的颜色。我正在使用 SimpleCursorAdapter 将数据库的值绑定到 ListView。我所做的是创建一个这样的颜色选择器：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_activated="true" android:drawable="@android:color/holo_blue_dark" />
    <item android:state_activated="true" android:state_selected="true" android:drawable="@android:color/holo_blue_dark" />
    <item android:state_selected="true" android:drawable="@color/rosa" />
    <item android:drawable="@android:color/transparent" />
</selector> 
```

我的布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="@color/listitem_color" >
    ...
    ... 
```

我有一个视图活页夹，我在其中执行以下操作：

```
mAdapter = new SimpleCursorAdapter(getActivity(), R.layout.listitem, cur, cols, to,0);
mAdapter.setViewBinder(new ViewBinder() {
    @Override
    public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
        if (columnIndex == 6) {
            boolean dudoso = cursor.getInt(columnIndex) == 1;
            TextView textView = (TextView) view;
            textView.setText(dudoso ? "dudoso" : null);
            if(dudoso)
            {
                LinearLayout ll=((LinearLayout)textView.getParent().getParent());
                ll.setSelected(true);
            }
            return true;
        }
        return false;
    }
}); 
```

但它不起作用。做我想做的事的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:45:07.910

也许更好的方法是编写您自己的继承自 SimpleCursorAdapter 的类。像这样的东西：

```
public class BubbleListAdapter extends SimpleCursorAdapter {

private LayoutInflater mLayoutInflater;
/** list holding statuses determining if an item is checked/unchecked. */
protected List<Boolean> mItemsCheckedStatus;
/** Cursor. */
private Cursor cursor;
/** reference to ArdoiseDatabaseAdapter. */
private MyDatabaseAdapter mMyDatabaseAdapter;
/** application context. */
private Context context;
/** references to Users. */
private Users mUsers;

/**
 * View holder for color item.
 */
private static class ViewHolder {
    /** bubble text. */
    TextView buubleText;
    /** user name. */
    TextView userName;
}

public BubbleListAdapter(Context context, int layout, Cursor cursor, String[] from, int[] to) {
    super(context, layout, cursor, from, to);
    this.cursor = cursor;
    mLayoutInflater = LayoutInflater.from(context);
    mMyDatabaseAdapter = MyDatabaseAdapter.getInstance();
    this.context = context;
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    View view = mLayoutInflater.inflate(R.layout.bubble_list_item, null);
    final ViewHolder holder = new ViewHolder();
    holder.buubleText = (TextView) view.findViewById(R.id.bubble_list_text);
    holder.userName = (TextView) view.findViewById(R.id.bubble_list_user_name);
    view.setTag(holder);
    return view;
}

@Override
public void bindView(View view, Context context, Cursor cursor) {       
    Cursor c = getCursor();
    final ViewHolder holder;
    if (view != null) {
        holder = (ViewHolder) view.getTag();
        holder.buubleText.setText(c.getString(c.getColumnIndex(BubblesTableMetaData.BUBBLE_TEXT)));
        if (mUsers != null) {
            switch (c.getInt(c.getColumnIndex(BubblesTableMetaData.USER_ID))) {
            case MyConstans.COLOR_RED:
                holder.buubleText.setBackgroundResource(R.drawable.bubble_red_edit);
                holder.userName.setTextColor(context.getResources().getColor(R.color.bubble_red));
                holder.userName.setText(mUsers.getUser1());
                break;
            case MyConstans.COLOR_BLUE:
                holder.buubleText.setBackgroundResource(R.drawable.bubble_blue_edit);
                holder.userName.setTextColor(context.getResources().getColor(R.color.bubble_blue));
                holder.userName.setText(mUsers.getUser2());
                break;
            case MyConstans.COLOR_GREEN:
                holder.buubleText.setBackgroundResource(R.drawable.bubble_green_edit);
                holder.userName.setTextColor(context.getResources().getColor(R.color.bubble_green));
                holder.userName.setText(mUsers.getUser3());
                break;
            case MyConstans.COLOR_VIOLET:
                holder.buubleText.setBackgroundResource(R.drawable.bubble_violet_edit);
                holder.userName.setTextColor(context.getResources().getColor(R.color.bubble_violet));
                holder.userName.setText(mUsers.getUser4());
                break;
            default:
                break;
            }
        }
        view.setTag(holder);
    }
}

@Override
public Object getItem(int position) {
    Bubble bubble = null;
    if (cursor != null) {
        int index = 0;
        if (cursor.moveToFirst()) {
            do {
                if (index == position) {
                    bubble = mArdoiseDatabaseAdapter.mapBubble(context, cursor);
                }
                index++;
            } while (cursor.moveToNext());
            return bubble;
        }
    }
    return bubble;
}

/**
 * Get users.
 * 
 * @return the mUsers
 */
public Users getmUsers() {
    return mUsers;
}

/**
 * Set users.
 * 
 * @param mUsers
 *            the mUsers to set
 */
public void setmUsers(Users mUsers) {
    this.mUsers = mUsers;
}

@Override
public int getCount() {
    return cursor.getCount();
}
} 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:56:47.693

I am not quite sure, but you could try:

```
 if (columnIndex == 6) {
        boolean dudoso = cursor.getInt(columnIndex) == 1;
        TextView textView = (TextView) view;
        textView.setText(dudoso ? "dudoso" : null);
        if(dudoso)
        {
            v.setSelected(true);

        }
        return true;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:34:41.677

无需选择选择器......只需通过编程将“setBackgroundColor（Color.Blue）”写到您的布局......`

```
if(columnIndex == 6)
{ 
   layout.setBackgroundColor(Color.Blue)
} 
```

这是我的选择器 xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android"> 
    <!-- Non focused states --> 
    <item android:state_focused="false" android:state_selected="false" android:state_pressed="false" android:drawable="@drawable/vhclistrowbackground" /> 
    <item android:state_focused="false" android:state_selected="true" android:state_pressed="false" android:drawable="@color/text_tab_unselected" /> 

    <!-- Focused states --> 
    <item android:state_focused="true" android:state_selected="false" android:state_pressed="false" android:drawable="@color/text_tab_selected" /> 
    <item android:state_focused="true" android:state_selected="true" android:state_pressed="false" android:drawable="@color/text_tab_unselected" /> 

    <!-- Pressed --> 
    <item android:state_pressed="true" android:drawable="@color/text_tab_unselected" /> 
</selector> 
```

# python - Python 漂亮的打印

> ID：13967804
> 
> 赞同：0
> 
> 时间：2012-12-20T08:15:06.757
> 
> 标签：python

我有一个这样的字符串：

> 戈斯杰克拉尔

我想这样打印：

> ['G'、'O'、'S'、'J'、'A'....

我试过：

```
print s,
print list(s), 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T08:16:27.877

尝试

```
>>> l = "G O S J A J E K R A L J"
>>> l.split()
['G', 'O', 'S', 'J', 'A', 'J', 'E', 'K', 'R', 'A', 'L', 'J']
>>> ''.join(l.split())
'GOSJAJEKRALJ' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:22:14.973

给定字符串和要拆分的分隔符，您似乎正在尝试拆分字符串；在这种情况下，空格字符。Python 提供了使用该`split`方法执行此操作的功能。几个例子如下：

```
>>> s = "A B C D E"
>>> t = "A:B:C:D:E"
>>> s.split(" ")
['A', 'B', 'C', 'D', 'E']
>>> t.split(":")
['A', 'B', 'C', 'D', 'E'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:17:08.670

我认为您正在尝试拆分字符串-

```
>>> s = "G O S J A J E K R A L J"
>>> s.split()
['G', 'O', 'S', 'J', 'A', 'J', 'E', 'K', 'R', 'A', 'L', 'J'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T08:31:30.040

我的答案是一样的：使用 split 。

但另一个解决方案（为了好玩）是`[x for x in l if x != ' ']`

```
>>> l = "G O S J A J E K R A L J"
>>> [x for x in l if x != ' ']
['G', 'O', 'S', 'J', 'A', 'J', 'E', 'K', 'R', 'A', 'L', 'J']
>>> l.split()
['G', 'O', 'S', 'J', 'A', 'J', 'E', 'K', 'R', 'A', 'L', 'J'] 
```

# java - Java 方法 SecureClassLoader.defineClass() 中的 SecurityException

> ID：13967807
> 
> 赞同：0
> 
> 时间：2012-12-20T08:15:14.520
> 
> 标签：java, security, exception, securityexception

此方法的[Javadoc](http://download.java.net/jdk7/archive/b123/docs/api/java/security/SecureClassLoader.html#defineClass%28java.lang.String,%20byte%5B%5D,%20int,%20int,%20java.security.CodeSource%29)包括：

> 抛出：[SecurityException](http://download.java.net/jdk7/archive/b123/docs/api/java/lang/SecurityException.html) - 如果尝试将此类添加到包含由与此类不同的证书集签名的类的包中，或者如果类名以“java.”开头。

我在我的代码中遇到了这个异常（这个异常没有任何说明原因），这个文档让我感到困惑。

**编辑：**我使用的罐子都没有签名。

*谁能给我解释一下，如果可能的话，举个例子吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:47:30.690

它说来自同一个包的类由不同的类加载器加载，这些加载器由不同的证书签名（或者可能是无效的证书）。如果您可以粘贴代码片段以获取更多详细信息，那将有所帮助。你可以在这里找到类似的讨论[Java SecurityException: signer information does not match](https://stackoverflow.com/questions/2877262/java-securityexception-signer-information-does-not-match) 看看。

# ios - NSTimer 暂停定时器

> ID：13967811
> 
> 赞同：2
> 
> 时间：2012-12-20T08:15:23.520
> 
> 标签：ios, cocoa-touch, nstimer

> **可能重复：**
> [如何暂停/播放 NSTimer？](https://stackoverflow.com/questions/9975562/how-to-pause-play-nstimer)

我有三个按钮`start` `stop`和`pause`..我的`start`和`stop`按钮在下面的代码中工作正常..但是当按下`Pause`它时暂停计时器..但是当我再次按下开始时.它从新添加的时间继续......而不是从暂停时间……

假设我在开始的 5 秒处暂停并等待 5 秒然后按开始...它应该显示 5 ...但显示 10 ..

因为我没有提到 `(timer:)`......它将如何添加`timer!=nill`......`start`

我有问题：

1.  `Pause`不工作。

```
-(void)start:(NSTimer *)timer
{
  if(_timer==nil)
  {
    startDate =[NSDate date];

    _timer=[NSTimer scheduledTimerWithTimeInterval:0.25 target:self selector:@selector(timer:) userInfo:nil repeats:YES];
  }

  if(_timer!=nil)
  { 
    float pauseTime = -1*[pauseStart timeIntervalSinceNow];

    [_timer setFireDate:[previousFireDate initWithTimeInterval:pauseTime sinceDate:previousFireDate]];
  }

}

-(void)timer:(NSTimer *)timer
{
  NSInteger secondsSinceStart = (NSInteger)[[NSDate date] timeIntervalSinceDate:startDate];

  NSInteger seconds = secondsSinceStart % 60;
  NSInteger minutes = (secondsSinceStart / 60) % 60;
  NSInteger hours = secondsSinceStart / (60 * 60);
  NSString *result = nil;
  if (hours > 0) 
  {
    result = [NSString stringWithFormat:@"%02d:%02d:%02d", hours, minutes, seconds];
  }
  else 
  {
    result = [NSString stringWithFormat:@"%02d:%02d", minutes, seconds];        
  }

  label.text=result;

  NSLog(@"time interval -> %@",result);
}

-(void)stop
{
  if(_timer!=nil)
  {
    startDate=nil;

    [_timer invalidate];
    _timer = nil; 
  }
}

-(void)pause:(NSTimer *)timer
{
  pauseStart = [NSDate dateWithTimeIntervalSinceNow:0];

  previousFireDate = [_timer fireDate];

  [_timer setFireDate:[NSDate distantFuture]];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:46:50.437

```
-(void)pause:(NSTimer *)timer
{
  pauseStart = [NSDate dateWithTimeIntervalSinceNow:0];

  previousFireDate = [_timer fireDate];

  //[timer setFireDate:[NSDate distantFuture]];
  [_timer setFireDate:[NSDate distantFuture]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:57:21.330

这是我用于计时器的代码：

我将时间的所有组件存储在我的（单例）类中，小时、分钟、秒值。

而且，我只是在“暂停”方法中“使计时器无效”，然后存储这些值。

看看，如果这有帮助。

```
-(void) startTimer
{
    NSLog(@"Values for timer: %d H, %d M, %d S", self.hours, self.minutes, self.seconds);

    _timer = [NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(updateTimer) userInfo:nil repeats:YES];
}

-(void) pauseTimer
{
    if(_timer)
    {
        [_timer invalidate];
    }

    _timer = nil;

    self.hour = hourValue;
    self.minute = minuteValue;
    self.second = secondsValue;
} 
```

# iphone - 自定义委托和数据源的问题

> ID：13967820
> 
> 赞同：1
> 
> 时间：2012-12-20T08:15:57.217
> 
> 标签：iphone, objective-c, ios, delegates, datasource

我有一个自定义委托和数据源。但是当我尝试初始化它时，我遇到了几个问题。在我的 .h 文件中，如果有的话。

```
@property (nonatomic, assign) id<UITableViewDelegate> delegate;
@property (nonatomic, assign) id<KalDataSource> dataSource; 
```

这导致在 .m 文件中的合成中出现以下错误。

```
Existing ivar 'dataSource' for property 'dataSource' with assign attribute must be __unsafe_unretained. 
```

经过一些谷歌搜索魔术后，我发现我应该像这样评估我的变量。

```
@property (nonatomic, strong) id<UITableViewDelegate> delegate;
@property (nonatomic, strong) id<KalDataSource> dataSource; 
```

但后来我得到了这个错误。

```
linker command failed with exit code 1 (use -v to see invocation) 
```

有人可以帮我吗？

亲切的问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:39:21.530

您遇到的错误与您的内存限定符无关（它们第一次是正确的）。问题在于您在没有限定词的地方声明了支持 iVar。当 iVar 被声明时，它们是隐含的强，所以如果你去你的影子 iVar，并在前面加上`__weak`or `__unsafe_unretained`，警告应该消失。当然，更好的解决方案是完全删除您的支持 iVar，因为 Xcode 会为您合成它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:18:58.193

代表通常是`weak`参考。

使用委托的对象不拥有它。它只是对可能或不能响应的对象的引用。Weak 说，如果对象的真正所有者释放它，它应该被释放。然后弱引用会自动设置为`nil`并且你不会得到任何僵尸。

其次，问题是，您已经拥有名为`dataSource`.

* * *

# 编辑

我之前关于重复属性的陈述被证明是错误的。您应该覆盖 setter 和 getter，包括文件中的声明`.h`和实现`.m`。

# excel - 如何在Excel中获取范围的行号？

> ID：13967821
> 
> 赞同：4
> 
> 时间：2012-12-20T08:15:56.390
> 
> 标签：excel, vba

我想在 Excel 中获取某个范围的行号，但我无法找到获取它的方法。我正在使用以下代码：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim nr As Integer
    Set nr = Target.Row
End Sub 
```

当我运行它时，我得到：**编译错误：需要对象**

我还尝试将 Target.Row 替换为以下内容：

```
 Target.Cells(1, 1).End(xlUp).Row
 Target.Find("*", SearchOrder:=xlByRows, SearchDirection:=xlPrevious).Row
 Target.End(xlUp).Row
 Target.Offset(0, 0).Row 
```

但这些似乎都不起作用:(

有谁知道是什么导致了错误？

# php - PHP 从字符串中选择一个单词

> ID：13967827
> 
> 赞同：0
> 
> 时间：2012-12-20T08:16:31.653
> 
> 标签：php, string, strpos

在字符串 XX 中总是会更改，字符串可以更长或更短，并且可以没有搜索到的单词，其中 XX 是一个数字示例：

```
1 kom. nije naručeno, obično dolazi za 5 dana., slični: sony-6am6ptb1a (0 kom.), sony-s006pb1a (-9 kom.) 
```

因此，我只需要输出：obično dolazi za 5 dana

那么我怎么能在任何情况下只选择 &find 呢？

```
$find = "obično dolazi za XX dana.";

$string ="1 kom. nije naručeno, obično dolazi za XX dana.";

if (strpos($string,$find) !== false) {
  echo '$string contains $find';
} 
```

我觉得这就是：

```
$string = "1 kom. nije naručeno, obično dolazi za XX dana.";

for(int intIndex = 1; intIndex <= 31; intIndex++)
{
 $find = "obično dolazi za " . strval(intIndex) . " dana."

 if (strpos($string,$find)) 
 {
 echo '$string contains $find';
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:25:09.627

我假设“搜索字符串”有一部分 ( `XX`) 会发生变化，您不一定知道在给定情况下它会是什么。所以你不能使用`strpos`因为未知的段。

您必须使用基于搜索字符串左右部分的正则表达式。

有关更多详细信息，请参阅[PHP 手册：preg_match](http://php.net/manual/en/function.preg-match.php)。

在不知道“XX”代表什么的情况下，我无法提供更多信息。

或者...

如果你想返回`XX`最左边和最右边的部分是不变的......

```
// given '1 kom. nije naručeno, obično dolazi za XX dana.'

$string = str_replace("1 kom. nije naručeno, obično dolazi za ", "", str_replace(" dana.", "", $string));
// $string now contains the value of 'XX'

print $string; 
```

输出是`XX`。

或者...

这是否足以满足您的需求..？[*这是基于你想出的！:)* ]

```
<?php
    // just throwing '23' in there to demonstrate the awesome power!
    $string = "1 kom. nije naručeno, obično dolazi za 23 dana.";
    for ($intIndex = 1; $intIndex <= 31; $intIndex++) {
        $find = "1 kom. nije naručeno, obično dolazi za " . strval($intIndex) . " dana.";

        // we test that it's not 'false', because it could be '0'
        if (strpos($string, $find) !== false) {
            echo "$string contains $find";
        }
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:25:35.607

我想猜测你的输出有问题......及其返回

```
 $string contains $find 
```

使用`"`代替`'`

```
$find = "obično dolazi za XX dana.";
$string ="1 kom. nije naručeno, obično dolazi za XX dana.";
if (mb_stripos($string,$find) !== false) {
  echo "$string contains $find";
} 
```

输出

```
 1 kom. nije naruÄeno, obiÄno dolazi za XX dana. contains obiÄno dolazi za XX dana. 
```

# javascript - 我应该将多个 DOMContentLoaded 处理程序集成到一个中吗？

> ID：13967830
> 
> 赞同：6
> 
> 时间：2012-12-20T08:16:47.060
> 
> 标签：javascript, javascript-events

我有多个 JavaScript 文件，每个文件都有每个 DOMContentLoaded 处理程序，以便自己初始化。

如：

档案A

```
document.addEventListener('DOMContentLoaded', function(){
  console.log('init file A');
}); 
```

文件 B

```
document.addEventListener('DOMContentLoaded', function(){
  console.log('init file B');
}); 
```

而且我必须连接和缩小这些文件，一个缩小的文件有一堆 DOMContentLoaded 处理程序。

**我想知道将这些 DOMContentLoaded 处理程序集成到一个中是否更好。**

我想出了一种集成方式，如下所示。

一些常见的文件

```
window.pageInitializer = {
  initPageFuncs: {},
  do: function(){
    for (var key in this.initPageFuncs) {
      this.initPageFuncs[key]();
    }
  }
}

document.addEventListener('DOMContentLoaded', window.pageInitializer.do); 
```

档案A

```
(function(){
  var initPage = function(){
    console.log('init file A');
  };
  window.pageInitializer.initPageFuncs.fileA = initPage;
})(); 
```

文件 B

```
(function(){
  var initPage = function(){
    console.log('init file B');
  };
  window.pageInitializer.initPageFuncs.fileB = initPage;
})(); 
```

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T10:04:10.693

恕我直言，出于性能考虑，您无需简单地创建任何此类包装器。JavaScript 开发人员对普通事件模型的唯一有效抱怨是事件处理程序的管理。

考虑一下；每次为`DOMContentLoaded`事件添加侦听器时，浏览器本身都会维护一个与您的`window.pageInitializer.initPageFuncs`对象同义的列表。当事件被触发时，浏览器本身会调用所有的事件处理程序。您*不会*希望从性能的角度重做此操作，或者根据 DRY 原则明确表示。然而，*管理*事件处理程序是迫使开发人员重复上述结构的原因。管理事件处理程序是什么意思？继续阅读。

如果基于特定的程序条件或在执行特定的程序操作后您想清除该事件的所有事件处理程序`DOMContentLoaded`怎么办？在普通的方法中，您需要调用您调用`document.removeEventListener`的每个实例`document.addEventListener`。但是，如果您拥有上面创建的结构，则只需以下一行代码即可清除所有侦听器：

```
window.pageInitializer.initPageFuncs = {}; 
```

你所有的听众都被清除了。做这样的事情是 javascript 开发人员被 jQuery 吸引的主要原因之一。记住这一点？

```
var selectedObject = $({selector});

// add event listeners to the selected object
selectedObject.bind("click", function1);
selectedObject.bind("click", function2);
selectedObject.bind("click", function3);

// remove event listeners for the "click" event for the selected object
selectedObject.unbind("click");

// remove all event listeners for the selected object
selectedObject.unbind(); 
```

根据我在您的问题中看到的内容，我假设您不需要处理这些事件，因此不需要将这些事件绑定合并为一个。如果你这样做并且 jQuery 听起来有点矫枉过正，那么你可以使用简单的方法来管理你的事件。

# google-analytics - 如何计算 Google Analytics（分析）中指标的（唯一）自定义值？

> ID：13967832
> 
> 赞同：1
> 
> 时间：2012-12-20T08:16:57.047
> 
> 标签：google-analytics, google-analytics-api

试图弄清楚“上个月有多少用户登录？” 在我的网站上使用 Google Analytics 的网络界面（或 API）。

对于每个请求，我将自定义变量中的用户 ID 作为值发送：

```
 _gaq.push(['_setCustomVar', 2, 'user_id', '#{ current_user ? current_user.id : 0 }']); 
```

**如何获取特定时间范围内所有综合浏览量的唯一用户 ID 数量？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:44:54.847

创建一个自定义细分[*]，其中仅包含具有您的自定义 var 集的访问者。应用细分，受众概览选项卡将显示您想要的数字。

[*] 高级细分->创建自定义细分->第一个下拉菜单为“包含”，第二个为“自定义变量 2”，第三个为“完全匹配”，文本字段获取登录访问者的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-25T13:17:57.773

遗憾的是，在 Google Analytics 中是不可能的。但是您可以在 Google Data Studio 中执行此操作。在那里，您可以为 Google Analytics 创建仪表板并创建一个新的计算字段，例如：COUNT(User ID)

# javascript - Javascript函数：动态创建的div布局问题

> ID：13967837
> 
> 赞同：0
> 
> 时间：2012-12-20T08:17:08.470
> 
> 标签：javascript, css, html

[http://jsfiddle.net/3Sd4W/](http://jsfiddle.net/3Sd4W/)

[**参考： greener**](https://stackoverflow.com/a/13967082/1195891)提供的上述 js fiddle 。

如果单击新的条目按钮，则该新添加的对象存在布局问题。

文本框样式为：

```
file.setAttribute("style", "margin-top: 60px;"); 
```

但我希望文本框位于中间而不是底部。我试过自己，但它对我不起作用。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:27:02.967

第一行使用`div`包含样式属性的输入字段的包装器`float: right`。生成的行（单击“添加新条目”按钮后）在输入周围没有具有相同属性的 div 包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:16:10.183

您的代码阅读起来非常复杂，因此这可能会有所帮助：

HTML：

```
<form name="addpoll">

<div id="choices">

</div>
<input id="addchoice" type="button" value="Add New Entry">

</form> 
```

JS：

```
function addnewDiv(counterAppended) {
    counterAppended = parseInt(counterAppended) + 1;
    var text = document.createElement("div");
    text.innerHTML = '<input type="hidden" class="choicecount" name="choicecount" id="choicecount" value="' + counterAppended + '">\
<input type="file" name="choiceimg' + counterAppended + '" value ="Select"  onchange="readURL(this)" style="display:none;">\
<div>\
<div style="width:400px;height:85px;">\
<div id="imgbg" style="float:left;width: 110px;height: 80px;text-align: center;border: 1px solid #CCC;">\
<input type="button" onclick="HandFileButtonClick();"  value="Browse" id="firstremove" style="margin-top: 30px;" class="addmultiple">\
</div>\
<div style="float:right;margin-top: 30px;">\
<input type=text name="choicename' + counterAppended + '" id="firstremove2">\
<input type="button" value="Remove" class="remove" id="firstremove3" style="color: red; font-size: 12px; border: 0px; background: none; text-decoration: underline;">\
</div>\
</div>\
<img src="#" name="viewimg' + counterAppended + '" class="addmultiple" id="viewimg' + counterAppended + '" height="70px" width="85px" style="display:none"/>\
<br>\
</div>\
<span id="file"></span>';
    text.id = 'choice' + counterAppended;
    document.getElementById("choices").appendChild(text);
    document.getElementsByClassName("remove")[document.getElementsByClassName("remove").length - 1].addEventListener("click", function() {
        this.parentNode.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode.parentNode);
    });
}

function HandFileButtonClick() {
    document.addpoll.choiceimg1.click();
}

function HandleFileButtonClick(val) {
    var ss = val.name;
    document.forms["addpoll"]
    var n = ss.split("choiceimgs");
    document.forms["addpoll"]["choiceimg" + n[1]].click();
}
document.getElementById("addchoice").addEventListener("click", function() {
    var choicecounts = document.getElementsByClassName('choicecount');
    addnewDiv(choicecounts[choicecounts.length - 1].value);
});

addnewDiv(0); 
```

JsFiddle：http: [//jsfiddle.net/99vhF/1/](http://jsfiddle.net/99vhF/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:34:02.753

您将元素添加到不正确的节点。查看您“添加”的部分。所有变量都采用“文件”元素。看起来很奇怪：

```
var addfile = document.getElementById("file");

var view = document.getElementById("file");
var remove1 = document.getElementById("file");
var br2 = document.getElementById("file");
var textf1 = document.getElementById("file");
var myimgdiv = document.getElementById("file"); 
```

# php - 在codeIgniter视图文件中以特定的表格格式表示数组？

> ID：13967839
> 
> 赞同：4
> 
> 时间：2012-12-20T08:17:23.853
> 
> 标签：php, html, codeigniter, html-table, dompdf

我有一个以下格式的数组。这个数组有大约 100 个相同格式的元素。`DOMPDF`我想使用 codeIgniter使用库以特定格式的表格表示整个数组。

```
result = Array(
              [0] => Array (
                     ['brand'] => x,
                     ['product'] =>p1,
                     ['language']=>English,
                    );
              [1] => Array (
                     ['brand'] => x,
                     ['product'] =>p2,
                     ['language']=>English,
                    );
              ); 
```

我喜欢`<table>`使用`html`.

```
 Brand          x             y
  Product        p1            p2
  Language       English       English 
```

我正在寻找想法。我有那些不超过 100 的 2 个数组元素。我想循环它们。

所以在下面的请求之后，我将发布我的代码。

```
<?php foreach($result as $res)

 {
  <table>
    <tr>
        <td>Brand</td>
        <td><?php echo $res['brand'] ?></td>
    </tr>
    <tr>
        <td>Product</td>
        <td><?php echo $res['product'] ?></td>
    </tr>
    <tr>
        <td>Language/td>
        <td><?php echo $res['language'] ?></td>
    </tr>
  </table>
} 
```

这将为您提供这样一种产品的输出。品牌 x
产品 p1
语言 英语

我如何为其他产品循环以获得我想要的输出？

注意：每个数组元素中不仅有 3 个字段。我有30多个领域。可能你认为我这样做只是因为 PDF 页面中的可打印区域。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T08:29:47.937

用于`foreach`从结果数组中获取每个数组。并`multiple array (row[ ][ ])`与`key`. 你可以打印`<tr><td>`all are in `echo`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T10:55:06.013

@Vengat，以下编码运行良好。试试这个...

```
<?php
$result = Array(
              0 => Array (
                     'brand' => 'x',
                     'product' =>'p1',
                     'language'=>'English',
                    ),
              1 => Array (
                     'brand'=> 'y',
                     'product' =>'p2',
                     'language'=>'English',
                    )
              );

    echo '<table>';
    echo '<tr><td>Brand</td>';
    foreach($result as $res)
    {
        echo "<td>".$res['brand']."</td>";
    }
    echo '</tr>';
    echo '<tr><td>Product</td>';
    foreach($result as $res)
    {
        echo "<td>".$res['product']."</td>";
    }
    echo '</tr>';
    echo '<tr><td>Language</td>';
    foreach($result as $res)
    {
        echo "<td>".$res['language']."</td>";
    }
    echo '</tr>';   
    echo '</table>';

?> 
```

输出是：

```
Brand   x   y
Product p1  p2
Language    English English 
```

使用 css 进行对齐。

# mysql - 为什么对 MySQL 中的一列使用 NOT LIKE 过滤列为空的行的结果？

> ID：13967844
> 
> 赞同：2
> 
> 时间：2012-12-20T08:17:44.610
> 
> 标签：mysql, sql

当我使用这个查询时：

```
SELECT `visitors`.`id`, `visitors`.`ip`, `visitors`.`url`, `visitors`.`time`, `visitors`.`agent`, `visitors`.`reference`
FROM (`visitors`)
WHERE  `reference` NOT LIKE '%bot%'
ORDER BY `id` desc
LIMIT 2000 
```

在结果中，我看不到该`reference`列为空的行。我应该怎么做才能创建一个包含空参考列的结果集？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T08:18:48.050

尝试 ：

```
SELECT `visitors`.`id`, `visitors`.`ip`, `visitors`.`url`, `visitors`.`time`, `visitors`.`agent`, `visitors`.`reference`
FROM (`visitors`)
WHERE  `reference` NOT LIKE '%bot%' OR `reference` IS NULL
ORDER BY `id` desc
LIMIT 2000 
```

`NULL`与空值的处理方式不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:54:33.370

尝试添加显式条件以获取为空的列。

```
select visitors.id, visitors.ip, visitors.url, visitors.time, visitors.agent, visitors.reference
from visitors
where reference not like '%bot%' or reference is null
order by id desc
limit 2000; 
```

# android - 如何在 android Tab Example api13 中设置 Tab 活动

> ID：13967845
> 
> 赞同：0
> 
> 时间：2012-12-20T08:17:47.390
> 
> 标签：android, android-fragments

Fragment2 .java 类

```
 public class Fragment2 extends Fragment {

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            return inflater.inflate(R.layout.fragment2, container, false);

    ..

        }

    } 
```

片段1.java

```
public class MyListFragment1 extends ListFragment {

String[] month = { "January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December" };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ListAdapter myListAdapter = new ArrayAdapter<String>(getActivity(),
            android.R.layout.simple_list_item_1, month);
    setListAdapter(myListAdapter);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    return inflater.inflate(R.layout.listfragment1, container, false);
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    Toast.makeText(getActivity(),
            getListView().getItemAtPosition(position).toString(),
            Toast.LENGTH_LONG).show();
} 
```

}

我必须将片段中的 Tab Activity 设置为我拥有的 fragent.xml 文件。请告诉我我该怎么做，因为我做不到。我已经尝试了很多片段1的onlist项目点击。我想在任何项目单击中显示片段 2 中的选项卡活动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:21:03.323

`TabActivity`现在不鼓励使用。请与[`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)一起使用小部件`Fragments`。使用兼容性库，您将获得对旧版本 Android 的支持。

使其工作所需的链接：

*   ViewPager[小](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)部件
*   [寻呼机](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)的适配器
*   官方 android 开发博客上的[小部件简介](http://android-developers.blogspot.fr/2011/08/horizontal-view-swiping-with-viewpager.html)
*   [使用寻呼机获取指标](http://viewpagerindicator.com/)的库

当然，您将使用您最喜欢的搜索引擎获得大量关于此的教程。

# java - hadoop jar 忽略指定的主类

> ID：13967851
> 
> 赞同：4
> 
> 时间：2012-12-20T08:18:42.233
> 
> 标签：java, hadoop, jar

我的hadoop版本是0.20.2。虽然我打字

```
hadoop jar JarWithSeveralMainClasses.jar NonDefaultMainClass args... 
```

它尝试执行`main`. `MainClassSpecifiedInJarManifest`为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T08:47:18.217

[我想你可以在这里](http://www.roman10.net/specify-the-main-class-in-a-jar-file-for-hadoop/)找到你的答案

> 如果 jar 文件包含在其清单文件中指定**的主类，即使命令指定了另一个主类，hadoop 也会采用主类**。这与普通的 java 执行不同，我们可以指定一个主类来覆盖清单文件中的那个。
> 
> 如果 jar 文件**在 manifest 文件中不包含主类**，hadoop 允许我们指定主类。

# c# - 带有 utf-8 文件名的 Zip 文件

> ID：13967853
> 
> 赞同：7
> 
> 时间：2012-12-20T08:18:48.503
> 
> 标签：c#, asp.net, .net, asp.net-mvc, zip

在我的网站上，我可以选择下载用户上传的所有图片。问题出在带有希伯来语名称的图像中（我需要文件的原始名称）。我试图解码文件名，但这没有帮助。这是一个代码：

```
using ICSharpCode.SharpZipLib.Zip;

Encoding iso = Encoding.GetEncoding("ISO-8859-1");
Encoding utf8 = Encoding.UTF8;
byte[] utfBytes = utf8.GetBytes(file.Name);
byte[] isoBytes = Encoding.Convert(utf8, iso, utfBytes);
string name = iso.GetString(isoBytes);

var entry = new ZipEntry(name + ".jpg");
zipStream.PutNextEntry(entry);
using (var reader = new System.IO.FileStream(file.Name, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
{
    byte[] buffer = new byte[ChunkSize];
    int bytesRead;
    while ((bytesRead = reader.Read(buffer, 0, buffer.Length)) > 0)
    {
        byte[] actual = new byte[bytesRead];
        Buffer.BlockCopy(buffer, 0, actual, 0, bytesRead);
        zipStream.Write(actual, 0, actual.Length);
    }
} 
```

经过 utf-8 编码后，我得到这样的希伯来文文件名：??????.jpg 我的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:29:32.247

Unicode（UTF-8 是一种二进制编码）可以表示比其他 8 位编码更多的字符。此外，您没有进行正确的转换，而是进行了重新解释，这意味着您的文件名是垃圾。您真的应该阅读[Joel 关于 Unicode](http://www.joelonsoftware.com/articles/Unicode.html)的文章。

...

看了这篇文章，应该知道 in `C#`string 可以存储 unicode 数据，所以如果库不包含编码处理的 bug（`file.Name`this`ZipEntry`总是可能的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-24T20:50:36.863

尝试使用

```
ZipStrings.UseUnicode = true; 
```

它应该是 ICSharpCode.SharpZipLib.Zip 命名空间的一部分。

之后你可以使用类似的东西

```
var newZipEntry = new ZipEntry($"My ünicödë string.pdf"); 
```

并将条目正常添加到流中。在 C# 之前，您不需要对字符串进行任何转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T10:13:05.933

您进行了错误的转换，因为 C# 中的字符串已经是 unicode。您使用什么工具来检查存档中的文件名？默认情况下，Windows ZIP 实现对文件名使用系统 DOS 编码，而其他实现可以使用其他编码。

# asp.net - 如何在gridview的超链接列中存在的值中插入逗号

> ID：13967855
> 
> 赞同：4
> 
> 时间：2012-12-20T08:18:51.890
> 
> 标签：asp.net, gridview, hyperlink

这是我的标记：

```
<asp:TemplateField HeaderText="Loss" SortExpression="Loss" 
     HeaderStyle-CssClass="StrongText" HeaderStyle-Font-Bold="true" 
     HeaderStyle-Font-Size="Medium" HeaderStyle-ForeColor="Blue" 
     HeaderStyle-Font-Underline="true" HeaderStyle-VerticalAlign="Bottom"  
     ItemStyle-Width="3%" ItemStyle-HorizontalAlign="Left" 
     ItemStyle-VerticalAlign="Bottom" HeaderStyle-HorizontalAlign="Left">
     <ItemTemplate>
         <asp:HyperLink runat="server" ID="HyperLink8" 
              NavigateUrl='<%#"db_LossofPay.aspx?UserID="+ Eval("User ID")%>' 
              Text='<%# Eval("Loss","{0}")%>' 
              ForeColor="BLUE" Target="_blank"></asp:HyperLink>
         <asp:Label ID="lblLoss" runat="server"></asp:Label>
     </ItemTemplate>
</asp:TemplateField> 
```

你能帮我解决这个问题吗？在 BoundField 我写了`DataFormatString="{0:N2}"`哪个工作正常，但是在超链接（模板字段）中使用时我被卡住了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T08:37:46.763

试试这个：

```
<asp:HyperLink runat="server" ID="HyperLink8"
 NavigateUrl='<%#"db_LossofPay.aspx?UserID="+   Eval("User ID")%>' 
 Text='<%# Eval("Loss","{0:#,##0.00}") %>' ForeColor="BLUE" Target="_blank" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:38:32.377

尝试

```
Text='<%# String.Format("{0:N2}", DataBinder.Eval(Container.DataItem, "Loss"))%>' 
```

# asp.net - 在实体框架中动态更新表行

> ID：13967858
> 
> 赞同：2
> 
> 时间：2012-12-20T08:19:13.477
> 
> 标签：asp.net, entity-framework-4

谁能告诉如何在实体框架中动态更新表行？我是实体框架的新手。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:21:25.070

这是一个非常普遍的问题，但您需要做的基本上是这样的：

1.  访问您的数据上下文。
2.  从您的上下文（/数据库）中获取给定的对象（/记录）。
3.  改变对象。
4.  调用`SaveChanges()`数据上下文。

如果您正在学习 EF，那么在我学习时对我有很大帮助的网站是[http://msdn.microsoft.com/en-us/library/gg696194(VS.103).aspx](http://msdn.microsoft.com/en-us/library/gg696194(VS.103).aspx)。它包含大量问题/解决方案格式的信息。你也可以看看这本书：

[http://www.amazon.com/Programming-Entity-Framework-Building-Centric/dp/0596807260/ref=sr_1_1?ie=UTF8&qid=1355991856&sr=8-1&keywords=entity+framework](https://rads.stackoverflow.com/amzn/click/com/0596807260)

或这本书：

[http://www.amazon.com/Programming-Entity-Framework-Code-First/dp/1449312942/ref=sr_1_4?ie=UTF8&qid=1355991858&sr=8-4&keywords=entity+framework](https://rads.stackoverflow.com/amzn/click/com/1449312942)

这两者都非常有用，具体取决于您是希望使用设计器还是 Code First。

# asp.net-mvc - 如何使用 IgnoreRoute 忽略包含星号的路径（或将它们映射到静态资源）

> ID：13967859
> 
> 赞同：3
> 
> 时间：2012-12-20T08:19:16.440
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

出于复杂的原因，我不会详细介绍，我们有一些请求进入我们的应用程序`/blah/[**Token**]`（这是字面意思，这些都不是占位符）。

目前我们从 MVC 得到错误，说每次请求进来时都找不到 IController。

我们希望请求：a）404 或 b）提供静态占位符图像。

尽我们所能尝试，我们无法弄清楚如何在 IgnoreRoute/Route 调用中转义这些字符，以便按字面意思对待它们。例如。我们尝试过：

```
IgnoreRoute("blah/\[\*\*Token\*\*\]")
IgnoreRoute("blah/[\*\*Token\*\*]") 
```

但问题仍然存在。

我们如何逃避这条路径，从而`blah/[**Token**]`忽略实际的请求并导致 404（或者，我们如何将这条确切的路径映射到静态图像）？

注意：我们已经编辑了 web.config，所以 * 不是一个不允许的字符。我们（目前）不能轻易改变这个传入的请求路径，我们只想在它发生时阻止我们的错误日志填满:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:05:02.923

使用这样的路由约束

```
IgnoreRoute("{*constraint}", new { constraint = @".*\[\*\*ProductImageFile\*\*]" }); 
```

# javascript - JS 更改文本 onClick 然后改回 onClick If...else

> ID：13967863
> 
> 赞同：1
> 
> 时间：2012-12-20T08:19:40.053
> 
> 标签：javascript, text, onclick

这是一个简单的。

我正在创建一个包含更改 onClick 的内容的链接。Onload 它应该说“单击此处获取更多信息！”单击时，它应该显示“单击此处获取更少信息！”然后重新单击“...更多信息”。

我确定我只是在某个地方犯了一个小错误，帮助？

JavaScript

```
<script>
function change_text()
{
if(document.getElementById("toggle_button").innerHTML="Click here for more   
information!"){
document.getElementById("toggle_button").innerHTML="Click here for less
information!";
}else{
    document.getElementById("toggle_button").innerHTML="Click here for more     
information!";
}}
</script> 
```

这是HTML

```
<a href='javascript: toggle()'><p id="toggle_button" onclick="change_text()">Click here  
for more information!</p></a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:16:04.930

您不仅在滥用`=`as `===`，而且还可以通过一种简单的技术大大改进您的代码：缓存。

```
function change_text() {
    var button = document.getElementById('toggle_button');

    if (button.innerHTML === "Click here for more information!") {
        button.innerHTML = "Click here for less information!";
    }
    else {
        button.innerHTML = "Click here for more information!";
    }
} 
```

您可以看到代码变得多么清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:22:20.557

```
if(document.getElementById("toggle_button").innerHTML="Click here for more   
information!"){ 
```

应该

```
if(document.getElementById("toggle_button").innerHTML == "Click here for more   
information!"){ 
```

你是在分配而不是比较，所以使用`==`而不是`=`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T09:11:58.043

使用它来解决您的问题，它将更好地帮助您-

1.  检查相等使用'=='
2.  javascript:void(0) 在 href 上使用

    ```
     <html>
              <head>

                <title>index</title>

              </head>
              <body>
               <script type="text/javascript">
                    function change_text()
                        {
                            if(document.getElementById("toggle_button").innerHTML=="Click here for more information!")
                            {
                                document.getElementById("toggle_button").innerHTML="Click here for less information!";
                            }
                            else
                            {
                                document.getElementById("toggle_button").innerHTML="Click here for more information!";
                            }
                        }
            </script>
             <a href='javascript:void(0)' onclick="change_text()"><p id="toggle_button" >Click here for more information!</p></a>  

              </body>
            </html> 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T08:22:34.980

你错过了“=”

```
 if(document.getElementById("toggle_button").innerHTML="Click here for more   
    information!") 
```

试试这个代码：

```
<script>
function change_text()
{
if(document.getElementById("toggle_button").innerHTML=="Click here for more   
information!"){
document.getElementById("toggle_button").innerHTML="Click here for less
information!";
}else{
    document.getElementById("toggle_button").innerHTML="Click here for more     
information!";
}}
</script> 
```

# node.js - CouchDB 在插入时清除文档？

> ID：13967867
> 
> 赞同：1
> 
> 时间：2012-12-20T08:19:51.437
> 
> 标签：node.js, couchdb, couchdb-nano

我将 nano 与 couchDB 一起使用，我只是想对文档进行简单更新以添加新字段。例如，假设我有一个名为 foo 的文档。现在唯一的字段是'bar'，有一些价值。然后，我尝试使用我将在最后发布的代码执行 db.insert，但现在不再拥有两个字段，而是删除了 bar，而我只拥有我的新字段。我怎样才能解决这个问题？

我正在使用的代码：

```
 dB.get('foo', function(err, body) {
        if (!err){

            if(typeof body.qwax === 'undefined'){
                dB.insert({qwax : [data], "_rev" : body._rev}, 'foo', function(err, body, header) {
                    if (err) {
                        console.log(err.message);
                        return;
                    }
                });
            }
            else{
                body.qwax.push(data);
                dB.insert({qwax : body.qwax, "_rev" : body._rev}, 'foo', function(err, body, header) {
                  if (err) {
                    console.log(err.message);
                    return;
                  }

                });
            }
        }
        else{console.log(err);}
    }); 
```

数据在别处定义的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:44:11.137

在 nano 中有一个原子函数，您可以调用它来调用设计文档上的特定更新函数： [https ://github.com/dscape/nano#dbatomicdesignname-updatename-docname-body-callback](https://github.com/dscape/nano#dbatomicdesignname-updatename-docname-body-callback)

这是文档中提到的使用示例： [https ://github.com/dscape/nano/blob/master/tests/design/atomic.js](https://github.com/dscape/nano/blob/master/tests/design/atomic.js)

例如，您可以为您的 _foo 设计文档创建此更新属性：

```
updates: {
        setBar: function (doc, req) {
          var body = JSON.parse(req.body);
          doc.bar = body.bar;
          return [doc, 'OK'];
        } 
```

然后，您将使用 nano 调用此 setBar 更新函数，如下所示：

```
db.atomic('_foo', 'setBar', your_foo_document_id, { bar: barvalue }, function (err, headers) {
    if (err) {
      return callback(err);
    }
    ... rest of your code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:02:00.050

对于每个更新，您需要提供整个文档，而不仅仅是要添加到文档的字段。因此，您需要获取文档的当前版本，向其中添加文件，然后进行数据库更新。

```
dB.insert({qwax : [data], "_rev" : body._rev, "bar" : body.bar}, 'foo', function(err, body, header) {
                if (err) {
                    console.log(err.message);
                    return;
                }
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:36:55.367

为此，您可以在设计文档中使用[更新处理程序](http://couchdb.readthedocs.org/en/latest/ddocs/#update-functions)( [wiki](http://wiki.apache.org/couchdb/Document_Update_Handlers) )。您只需编写一个 JS 函数，而不是再次发送整个文档，而是调用此函数，它可以使更新“就地”。

该函数将获取两个参数：要更新的文档和客户端提供的一些数据，并将在 HTTP 标头中返回更新文档的新版本。

# c# - 跨多个 Active Directory 域搜索用户

> ID：13967871
> 
> 赞同：12
> 
> 时间：2012-12-20T08:20:13.770
> 
> 标签：c#, active-directory

我正在使用 System.DirectoryServices.AccountManagement 来提供用户查找功能。

该业务有几个特定于区域的 AD 域：AMR、EUR、JPN 等。

以下适用于 EUR 域，但不返回来自其他域的用户（自然）：

```
var context = new PrincipalContext(ContextType.Domain, "mycorp.com", "DC=eur,DC=mycorp,DC=com");

var query = new UserPrincipal(GetContext());

query.Name = "*Bloggs*";

var users = new PrincipalSearcher(query).FindAll().ToList(); 
```

但是，如果我针对整个目录，它不会返回来自**任何**区域特定域的用户：

```
var context = new PrincipalContext(ContextType.Domain, "mycorp.com", "DC=mycorp,DC=com"); 
```

如何搜索整个目录？

**更新**

阅读“Active Directory 搜索的工作原理”：

[http://technet.microsoft.com/en-us/library/cc755809(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc755809(v=ws.10).aspx)

如果我使用端口 3268 作为服务器名称的后缀，它会搜索全局目录：

```
var context = new PrincipalContext(ContextType.Domain, "mycorp.com:3268", "DC=mycorp,DC=com"); 
```

但是，它非常非常慢。关于如何提高性能的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T16:35:52.423

`(*Bloggs*)`除非您在要查询的属性上有元组索引，否则具有初始通配符的查询会很慢。默认情况下，AD 中的所有属性都没有此设置。最好不要做初始通配符。

# android - ImageView上的android圆角不能使用固定的布局大小

> ID：13967873
> 
> 赞同：0
> 
> 时间：2012-12-20T08:20:16.773
> 
> 标签：android, layout, imageview

我发现了很多在 ImageView 上创建圆角的方法。当 imageView 及其父布局设置为 wrap_content 或 match_parent 时，它们都可以工作。但是我的应用程序的布局需要固定的高度和宽度，所以这些方法不起作用。

这是我的 XML（“预览”ImageView 必须对齐顶部的“名称”文本字段和底部的“电话”。我尝试将图像视图及其父布局设置为“包装内容”并设置 MaxWidth 和 MaxHeight ImageView，但它不能水平工作，所以右侧的 3 个文本字段被推离屏幕。我需要一些帮助来重新构建布局，使其与“预览”及其父布局的“wrap_content”一起使用或找到一种方法来创建适用于固定布局尺寸的圆角（实际上我尝试了 3 或 4）。

```
<RelativeLayout
    android:id="@+id/relativeLayout2"
    android:layout_width="60dp"
    android:layout_height="158dp"
    android:layout_alignParentRight="true"
    android:layout_marginRight="7dp"
    android:layout_marginTop="38dp"
    android:layout_toRightOf="@+id/RL_ImageHolder" >

    <EditText
        android:id="@+id/Name"
        android:layout_width="wrap_content"
        android:layout_height="40dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="5dp"
        android:background="@drawable/form_m_6"
        android:gravity="top"
        android:hint="Name"
        android:padding="5dp" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/Surname"
        android:layout_width="wrap_content"
        android:layout_height="40dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/Name"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="19dp"
        android:background="@drawable/form_m_6"
        android:gravity="top"
        android:hint="Surname"
        android:padding="5dp" />

    <EditText
        android:id="@+id/etPhone"
        android:layout_width="wrap_content"
        android:layout_height="40dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="5dp"
        android:background="@drawable/form_m_6"
        android:gravity="top"
        android:hint="Phone number"
        android:inputType="phone"
        android:padding="5dp" />
</RelativeLayout>

<RelativeLayout
    android:id="@+id/RL_ImageHolder"
    android:layout_width="140dp"
    android:layout_height="158dp"

    android:layout_alignBottom="@+id/relativeLayout2"
    android:layout_alignParentLeft="true"
    android:layout_alignTop="@+id/relativeLayout2"
    android:layout_marginLeft="10dp" >

    <ImageView
        android:id="@+id/imgPreview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:maxWidth="140dp"
        android:maxHeight="160dp"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:contentDescription="Preview"

         />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:25:31.303

试图改变布局如下

```
 <RelativeLayout
        android:id="@+id/RL_ImageHolder"
        android:layout_width="140dp"
        android:layout_height="160dp"
        android:layout_alignBottom="@+id/relativeLayout2"
        android:layout_alignParentLeft="true"
        android:layout_alignTop="@+id/relativeLayout2"
        android:layout_marginLeft="10dp" >

        <ImageView
            android:id="@+id/imgPreview"
            android:layout_width="140dp"
            android:layout_height="160dp"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:contentDescription="Preview"

             />
    </RelativeLayout> 
```

# emacs - 如何在 emacs org-mode 中将函数限制为子树？

> ID：13967876
> 
> 赞同：9
> 
> 时间：2012-12-20T08:20:25.010
> 
> 标签：emacs, elisp, org-mode, attachment, subtree

我广泛使用 org-mode 和**org-attach**，这意味着可以有许多附件目录与一个 org 文件相关联。

在 worg 上，我发现了 Matt Lundi 的一个功能，它允许查看属于整个文件的所有附件并使用 ido 浏览它们。

我想将此函数限制为一个子树，这将使它对我的用例更有用。

由于我对emacs并不陌生，但几乎完全是文盲，所以我在这里问。

这是功能：

```
(defun my-ido-find-org-attach ()
  "Find files in org-attachment directory"
  (interactive)
  (let* ((enable-recursive-minibuffers t)
         (files (find-lisp-find-files org-attach-directory "."))
         (file-assoc-list
          (mapcar (lambda (x)
                    (cons (file-name-nondirectory x)
                          x))
                  files))
         (filename-list
          (remove-duplicates (mapcar #'car file-assoc-list)
                             :test #'string=))
         (filename (ido-completing-read "Org attachments: " filename-list nil t))
         (longname (cdr (assoc filename file-assoc-list))))
    (ido-set-current-directory
     (if (file-directory-p longname)
         longname
       (file-name-directory longname)))
    (setq ido-exit 'refresh
          ido-text-init ido-text
          ido-rotate-temp t)
    (exit-minibuffer))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T10:04:30.917

Maybe I'm missing something, but calling `org-narrow-to-subtree` first should do what you want (call `widen` afterwards to revert that).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T06:30:48.667

我认为这对我自己非常有用，因此，受您的问题的启发，我编写了一个可以满足您需求的版本以及其他一些花里胡哨。要调用它，您必须键入`C-c o`. 注意：这不在通常的`org-attach`键前缀上，因为奇怪地编写了没有键映射的函数，因此很难将功能添加到键前缀上。

```
(autoload 'org-attach-dir "org-attach")
(autoload 'find-lisp-find-files "find-lisp")
(defcustom ido-locate-org-attach-all-files nil
  "Non-nil means `ido-locate-org-attach' returns all files.
Otherwise the default behavior only returns files attached to the
current entry."
  :group 'ido
  :type 'boolean)

(defun ido-locate-org-attach (&optional find-all)
  "Find files in org-attachment directory for current entry.
When called with a prefix argument, include all files in
`org-attach-directory'. With a double `C-u' prefix arg the value
of `ido-locate-org-attach-all-files' will be toggled for the
session. If you want to save it permanently for future session
then customize the variable `ido-locate-org-attach-all-files'."
  (interactive "P")
  (when (org-attach-dir nil)
    (when (equal find-all '(16))
      (setq ido-locate-org-attach-all-files
        (not ido-locate-org-attach-all-files)))
    (let* ((enable-recursive-minibuffers t)
       (dir (if (org-xor ido-locate-org-attach-all-files
                 (equal find-all '(4)))
            org-attach-directory
          (org-attach-dir nil)))
       (files (find-lisp-find-files dir "."))
       (file-assoc-list
        (mapcar (lambda (x)
              (cons (file-name-nondirectory x)
                x))
            files))
       (filename-list
        (remove-duplicates (mapcar #'car file-assoc-list)
                   :test #'string=))
       (filename (ido-completing-read "Org attachments: " filename-list nil t))
       (longname (cdr (assoc filename file-assoc-list))))
      (ido-set-current-directory
       (if (file-directory-p longname)
       longname
     (file-name-directory longname)))
      (setq ido-exit 'refresh
        ido-text-init ido-text
        ido-rotate-temp t)
      (exit-minibuffer))))

;; Run ido-locate-org-attach when using org-open-at-point (C-c C-o) in
;; the current entry (except if you're on the header line itself it
;; will use the default behavior to open/close the entry.
(add-hook 'org-open-at-point-functions 'ido-locate-org-attach)

;; C-c o           will locate files for the current entry
;; C-u C-c o       will locate files for the whole file
;; C-u C-u C-c o   will toggle the default current entry / whole file
(define-key org-mode-map "\C-co" 'ido-locate-org-attach) 
```

我会考虑将其提交为`org-attach.el`.

顺便说一句，`'(4)`and`'(16)`是幻数，表示在交互式调用命令的键序列之前添加一次`C-u`前缀 arg 和两次前缀 arg 。`C-u C-u`

# android - Android GCM 投放监控

> ID：13967883
> 
> 赞同：24
> 
> 时间：2012-12-20T08:21:05.823
> 
> 标签：android, testing, google-cloud-messaging

我正在为电子邮件服务开发移动客户端。主要功能之一是有关邮箱中新消息的通知。根据 GCM 架构指南的建议，我们正在使用“推送器”，它负责在我们收到新消息后将消息发送到 Google 服务器。问题是测试过程报告了向设备发送推送通知的严重问题。

那么问题来了：是否有一种方法可以监控关于推送通知传递百分比、时间等的平均统计数据？或者也许有人在如何设置测试环境以有效监控应用程序工作期间丢失了多少通知方面有经验？

欢迎所有与改进 Android GCM 体验相关的“提示和技巧”。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-27T18:04:23.013

谷歌声称其 GCM 服务器的处理时间不到一毫秒。下面的链接可查看 Google 开发人员提供的有关 GCM 的精彩视频。令人信服的是，我现在可以使用我公司的服务器几乎立即将推送通知发送到我的设备。

[http://www.youtube.com/watch?v=YoaP6hcDctM](http://www.youtube.com/watch?v=YoaP6hcDctM)

他们不保证送达，但他们会尝试最多 4 周的时间来送达邮件，具体取决于您在发送到 Google 的 GCM 服务器的邮件中设置的持续时间，以及您是否希望让 Google 保留数据以最终送达邮件到设备，以防在要传递消息时设备处于脱机状态。

但是，在某些情况下不会传递 GCM 消息。

1.  在帐户和同步设置下未选中后台数据。
2.  在 4.0.4.(ICS) 之前，设备上的 Google 帐户是 GCM 的先决条件。也许，用户没有登录他们的谷歌账户。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-28T10:55:16.143

这样做的唯一方法是使用接收到的推送的时间戳向您的服务器报告。

你可以

1.  在 GCM 服务中收到通知后，向服务器报告。要实施，您必须为您的推送通知添加一个推送 ID，并将该 ID 与推送数据一起发送。客户端在收到消息后必须获取时间戳并将其与通知 ID 一起发回。可以完成一个简单的 php 脚本（当您发送推送通知时，您设置**发送通知**的时间，一旦它接收到设备的时间戳，它就会设置**接收通知**。这归结为数据库中的两个字段（标记为粗体）。在这种方法中，您可能不太关心错误，因为设备很可能在收到通知时会建立连接，因此它对您的服务器的请求将通过。

2.  保留在您的应用中收到的通知列表及其时间戳。同步完成后，在同步操作中发送此数据。这最终是相同的方法，但您的服务器数据不会像第一种方法那样实时。但是，客户端不需要额外的请求，而是保存收到的通知及其时间戳。

总而言之，您必须跟踪使用**通知 ID**发送的通知及其发送时间（**发送通知**）和接收时间（**接收通知**）。一个简单的查询将帮助您分析这些数据。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-25T09:40:24.410

Google 增加了支持，以便您可以从云连接服务器 (CCS) 接收交货收据：

> 当设备确认收到 CCS 发送的消息时，您可以使用上游消息获取送达回执（从 CCS 发送到您的第 3 方应用服务器）。
> 
> 要启用此功能，您的第 3 方应用服务器发送给 CCS 的消息必须包含一个名为“delivery_receipt_requested”的字段。当此字段设置为 true 时，CCS 会在设备确认收到特定消息时发送送达回执。

[https://developer.android.com/google/gcm/ccs.html#receipts](https://developer.android.com/google/gcm/ccs.html#receipts)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-25T14:51:48.383

Google 不会向您提供这些统计信息。android 开发者控制台上有一些可用的统计数据。这仅显示消息和注册的数量。

您必须实现自己的数据收集，这可以很容易地完成。您可以记录发送的每条消息的时间和 ID，并让您的 android 客户端向您的服务器报告收到消息的时间。然后，您可以将数据存储在您的服务器上并根据需要进行查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-02T07:51:08.503

从那时起，谷歌就为开发者提供了先进的监控工具。

Gcm 诊断工具在 Google Play 开发者控制台中可用。附加信息在这里[https://support.google.com/googleplay/android-developer/answer/2663268](https://support.google.com/googleplay/android-developer/answer/2663268)

因此，您可以通过注册令牌轻松跟踪特定消息状态。

# entity-framework-5 - 在单元测试期间查看不同表的实体框架

> ID：13967889
> 
> 赞同：1
> 
> 时间：2012-12-20T08:21:31.060
> 
> 标签：entity-framework-5

我在库中有一个 DbContext 以及实体及其在 fluent api 中的配置。

我在两个不同的项目中使用相同的上下文。第一个是测试项目，第二个是简单的控制台应用程序。

我执行一个查询，包括它的一些关系，如下所示：

```
var vacancies = (from v in ctx.Vacancies
                              .Include("Categories")
                              .Include("Levels")
                              .Include("Contracts")
                              .Include("JobTypes")); 
```

奇怪的是，控制台应用程序运行良好，但是单元测试突然开始在错误的表中查找。

当我查看它们时，这两个应用程序都会产生非常不同的查询。

我正在使用 EF5 自动取款机，我已经坚持了几天了，对可能导致此问题的原因一无所知。

编辑：关键是我没有做任何不同的查询，我也只有上下文，只有一个我在运行时确认的连接字符串连接到正确的数据库。

我只能说，我觉得流利的 api 在单元测试中没有任何影响，即使它像它应该的那样很好地命中了代码。

```
 public class SchedulerContext : BaseContext<SchedulerContext>{

    public DbSet<Click> Clicks { get; set; }
    public DbSet<Category> Categories { get; set; }
    public DbSet<ContractType> Contracts { get; set; }
    public DbSet<JobType> JobTypes { get; set; }
    public DbSet<Level> Levels { get; set; }
    public DbSet<ExternalMapping> ExternalMappings { get; set; }     
    public DbSet<GeoName> GeoNames { get; set; }
    public DbSet<GeoAlternateName> GeoAlternateNames { get; set; }     
    public DbSet<Trigger> JobTriggers { get; set; }
    public DbSet<RegistryValue> RegistryValues { get; set; }
    public DbSet<JobResult> JobResults { get; set; }
    public DbSet<JobInfo> JobInfo { get; set; }
    public DbSet<JobError> JobErrors { get; set; }
    public DbSet<JobNotification> JobNotifications { get; set; }
    public DbSet<Company> Customers { get; set; }
    public DbSet<Vacancy> Vacancies { get; set; }

    public SchedulerContext() {
        //this.Configuration.ProxyCreationEnabled = false;
        //this.Configuration.LazyLoadingEnabled = false;
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder) {

        modelBuilder.Configurations.Add(new VacancyEntityTypeConfiguration());
        base.OnModelCreating(modelBuilder);
    }
} 
```

这就是我的背景。

还有我的实体配置：

```
public class VacancyEntityTypeConfiguration : EntityTypeConfiguration<Vacancy> {

    public VacancyEntityTypeConfiguration() {
        this.HasMany(c => c.Levels).
       WithMany().
       Map(
        m => {
            m.ToTable("VacancyLevels");
        });

        this.HasMany(c => c.Categories).
          WithMany().
          Map(
           m => {
               m.ToTable("VacancyCategories");
           });

        this.HasMany(c => c.Contracts).
          WithMany().
          Map(
           m => {
               m.ToTable("VacancyContractTypes");
           });

        this.HasMany(c => c.Jobtypes).
          WithMany().
          Map(
           m => {
               m.ToTable("VacancyJobTypes");
           });
    }
} 
```

以及显示问题的确切方法。

```
 public List<Vacancy> GetVacanciesForCustomer(Company customer, bool onlineInclusive) {
        using (var ctx = new JHSchedulerContext.SchedulerContext()) {
            var vacancies = (from v in ctx.Vacancies.Include("Categories").Include("Levels").Include("Contracts").Include("JobTypes") where v.SourceSite == customer.SourceSite && (v.Online || onlineInclusive == false) select v).ToList();
            return vacancies.ToList();
        }
    } 
```

和空缺班：

```
 public class Vacancy {

    public Vacancy()
    {
        this.Language = "";
    }

    [SolrUniqueKey("id")]
    [Key]
    [Required]
    public int Id { get; set; }

    [StringLength(50, ErrorMessage = "Maximum length 50 characters")]
    public string ExternalId { get; set; }

    [SolrField("title")]
    [StringLength(1024, ErrorMessage = "Maximum length 1024 characters")]
    public string Title { get; set; }

    [SolrField("company")]
    [StringLength(1024, ErrorMessage = "Maximum length 1024 characters")]
    public string Company { get; set; }

    [StringLength(4096, ErrorMessage = "Maximum length 4096 characters")]
    public string CompanyText { get; set; }

    [SolrField("location")]
    [StringLength(1024, ErrorMessage = "Maximum length 1024 characters")]
    public string Location { get; set; }

    [SolrField("url")]
    [StringLength(1024, ErrorMessage = "Maximum length 1024 characters")]
    public string Url { get; set;}

    [SolrField("source")]
    [StringLength(1024, ErrorMessage = "Maximum length 1024 characters")]
    public string SourceSite { get; set; }

    private string text;
    [SolrField("text")]
    [StringLength(4096, ErrorMessage = "Maximum length 4096 characters")]
    public string Text {
        get {
            return StringHelper.TruncateAtWord(text, 500);
            //return new String(text.Take(500).ToArray());
            //return text.Substring(text.Length < 900 ? 0 : (text.Length / 2), (int)Math.Min(text.Length, 500));
        }
        set{
            text = value;
        }
    }

    [StringLength(4096, ErrorMessage = "Maximum length 4096 characters")]
    public string TextProfile { get; set; }

    [StringLength(4096, ErrorMessage = "Maximum length 4096 characters")]
    public string TextOffer { get; set; }

    [NotMapped]
    [ScriptIgnore]
    public SqlGeography Coordinate {
        get
        {
            if (Latitude.HasValue && Longitude.HasValue)
                return SqlGeography.Point(Latitude.Value, Longitude.Value, 4326);
            else
                return null;
        }
    }

    [SolrField("coordinate_0_coordinate")]
    public double? Latitude { get; set; }

    [SolrField("coordinate_1_coordinate")]
    public double? Longitude { get; set; }

    [StringLength(1024, ErrorMessage = "Maximum length 1024 characters")]
    public string NormalizedLocation { get; set; }

    public DateTime? ScrapedDate { get; set; }

    [SolrField("insertdate")]
    public DateTime? ImportDate { get; set; }

    public DateTime? ExpireDate { get; set; }     

    [NotMapped]
    public string DaysAgo {
        get {
            if (ImportDate != null)
                return (DateTime.Now - (DateTime)ImportDate).Days.ToString();
            else {
                return "N/A";
            }
        }
    }

    [SolrField("category")]
    public ICollection<string> CategoryNames {
        get { return Categories != null ? Categories.Select(c => c.Name).ToList() : null; }
    }

    [SolrField("level")]
    public ICollection<string> LevelNames {
        get { return Levels != null ? Levels.Select(l => l.Name).ToList() : null; }
    }

    [SolrField("contract")]
    public ICollection<string> ContractNames {
        get { return Contracts != null ? Contracts.Select(c => c.Name).ToList() : null; }
    }

    [SolrField("time")]
    public ICollection<string> JobTypeNames {
        get { return Jobtypes != null ? Jobtypes.Select(c => c.Name).ToList() : null; }
    }

    public string ContactName { get; set; }       

    [Required]
    public bool Online { get; set; }

    [NotMapped]
    public int? Distance { get; set; }

    public string Language { get; set; }

    public string PriorityType { get; set; }

    public int NumClicks { get; set; }

    [NotMapped]
    public string GridContactName {
        get{
            return string.Format("{0} (Total Clicks:{1})",ContactName,NumClicks);
        }
    }

    public virtual ICollection<Level> Levels { get; set; }

    public virtual ICollection<Category> Categories { get; set; }

    public virtual ICollection<ContractType> Contracts { get; set; }

    public virtual ICollection<JobType> Jobtypes { get; set; }     

    public override string ToString() {
        return string.Format("Id={0} ExternalId={1} Title={2} Company={3} Location={4} Url={5} SourceSite={6} Text={7} NormalizedLocation={8} InsertDate={9} ImportDate={10} DaysAgo={11}",Id, ExternalId,Title,Company,Location,Url, SourceSite,Text,NormalizedLocation,ScrapedDate,ImportDate,DaysAgo);
    }

} 
```

和级别类（所有其他关系类具有相同的结构（名称，id）：

```
 public class Level {

    [Key]
    [Required]
    public int Id { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "Maximum length 100 characters")]
    public string Name { get; set; }      

    public override string ToString() {
        return string.Format("Id={0} Name={1}", Id, Name);
    }

} 
```

就与数据库的连接而言，您只需要相信我已经检查过两者都连接到同一个数据库。（我什至生成了一个启用迁移的新数据库，因为我们使用另一个上下文进行迁移。那仍然有完全相同的问题）。

澄清一下：单元测试查找表：CategoryVacancys。我使用控制台应用程序甚至我的 Windows 服务来查找正确的表：VacancyCategories。

# maven - m2eclipse (Maven) 可以使用 Windows 帐户访问 Nexus 吗？

> ID：13967891
> 
> 赞同：0
> 
> 时间：2012-12-20T08:21:46.207
> 
> 标签：maven, m2eclipse, nexus

我知道如何为 Maven 设置 settings.xml 以访问 Nexus。但是是否可以让 m2eclipse 使用 Windows 帐户访问 Nexus？因为不方便用户需要把自己的账号放在settingx.xml中。另一个问题是安全性，我知道如何加密密码（[Maven Password Encryption](http://maven.apache.org/guides/mini/guide-encryption.html)），但这真的不方便。

```
<servers>
  <server>
    <id>nexus-releases</id>
    <username>xxx</username>
    <password>xxx</password>
  </server>
  <server>
    <id>nexus-snapshots</id>
    <username>xxx</username>
    <password>xxx</password>
  </server>
</servers> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T05:32:37.737

最好的选择是使用 Nexus Professional 的[用户令牌](http://www.sonatype.com/books/nexus-book/reference/config-sect-usertoken.html)功能。您仍然必须在 settings.xml 中有令牌（但不是来自活动目录/Windows 登录的用户名和密码），但您可以使用 Nexus Maven 插件在每次更改 Windows 密码并重置时更新它Nexus 用户令牌（根据需要）。所以你基本上可以干净地自动化它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T08:47:27.100

不，只有 Windows 知道您的密码，甚至，我希望它只保留密码的散列版本。

并且没有 API 可以从程序中检索它。

因此，您的密码丢失在 Windows 内存中，您将永远无法找回它！

HIH

# c# - 如何将外部javascript函数调用到ajax

> ID：13967895
> 
> 赞同：2
> 
> 时间：2012-12-20T08:22:16.393
> 
> 标签：c#, javascript, asp.net, ajax

我有点困惑。我的项目中有一个名为 Hierarchy.js 的 Scripts 文件夹下的外部 javascript 文件... 这个外部 jscript 文件包含一些 3-4 个不同的函数，其中一个是 KeySelected。现在我需要在名为 User Controls 的文件夹内的用户控件中的 AJAX 自动完成扩展器的 OnClientItemSelected 属性中调用这个函数。

这会起作用吗：

```
OnClientItemSelected="KeySelected" 
```

还是我需要写整个路径？另外，需要注意的是，文件夹 Scripts 和 User Controls 在同一个项目中。

非常感谢您的建议和帮助。

-阿努拉格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:30:30.543

确保`Hierarchy.js`链接到文档：

```
<script type="text/javascript" src="yourPath/Hierarchy.js"></script> 
```

您不需要使用任何“路径”来指向`KeySelected`函数，所有函数（如果不是其他对象的一部分）都加载到全局命名空间，所以`OnClientItemSelected="KeySelected"`应该可以工作。

请参阅这篇文章：[使用自动完成扩展器](http://www.codeproject.com/Articles/71338/Using-the-AutoComplete-Extender-to-Automatically-P)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:32:26.680

不，当您确定外部 JavaScript 文件已加载时，您只需指定名称即可调用这些函数。如果您的代码已被评估并且您的函数尚不存在，但您确定它会在 AJAX 调用完成时存在，将其包装在一个函数中。

```
OnClientItemSelected = function() {KeySelected();} 
```

# c# - 作为 ComboBox 数据源的不同派生对象的列表

> ID：13967899
> 
> 赞同：1
> 
> 时间：2012-12-20T08:22:24.677
> 
> 标签：c#, winforms, binding, lambda

我的应用程序包含一个可以在图像顶部绘制框的 winform。这些框具有坐标、类型（主类的所有派生类`FormBox`）和可能的`group`参数（在生成的用于导出的 XML 中）。

此组参数由用户从 ComboBox 中选择。最初，ComboBox 是空的，用户可以`GroupName`在一种类型的框上设置 a，该框将为相同类型的其他框填充 ComboBox 列表，从而允许将它们组合在一起或不组合在一起。

我现在需要为多种框类型组合分组，并且一直在努力寻找填充此 ComboBox 的方法。

对于一种盒子类型，没有真正的问题：

```
cboUserField_GroupName.DataSource = (from aBox in someFormData.Boxes
where (aBox is UserContentFormBox) select (aBox as UserContentFormBox)).GroupBy(x => x.GroupName).Select(x => x.First()).ToList();

cboUserField_GroupName.ValueMember = "GroupName"; 
```

但由于我有两个单独的列表，每个列表都填充了来自 的子类的对象集合`FormBox`，我想将 ComboBox 控件绑定到一个连接列表，无论是`GroupName`字符串还是对象并不重要。这并没有做太多，主要是因为我无法从一个简单的 中弄清楚 value 成员是什么`List<string>`，另外因为列表最终还是被空对象填充：

```
List<string> groupNames = (from aBox in someFormData.Boxes where (aBox is UserContentFormBox || aBox is VATReturnFormBox) select aBox.GroupName).Distinct().ToList();

cboUserField_GroupName.DataSource = groupNames.ToList(); 
```

所以，简而言之，我如何将 ComboBox 控件绑定到一个列表，用从基类派生的对象填充（通过 lambda）？绑定应该在`GroupName`属性上。

我应该将每个列表带回一个`List<FormBox>`可以轻松加入的列表吗？还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:12:19.237

好的，找到了。首先，创建两个`List<string>`对象`GroupName`属性：

```
List<string> firstList = (from aBox in someFormData.Boxes
where (aBox is UserContentFormBox)
select (aBox as UserContentFormBox).GroupName).Distinct().ToList();

List<string> secondList = (from aBox in someFormData.Boxes
where (aBox is VATReturnFormBox)
select (aBox as VATReturnFormBox).GroupName).Distinct().ToList(); 
```

然后，加入这些列表，删除空值和重复项，排序并填充一个新列表：

```
List<string> groupNames = firstList.Union(secondList).Where(x => x != null).Distinct().OrderBy(x => x).ToList(); 
```

最后，用值填充必要的组合框：

```
cboUserField_GroupName.Items.AddRange(groupNames.ToArray());
cboVATReturn_GroupName.Items.AddRange(groupNames.ToArray()); 
```

不管怎么说，还是要谢谢你。

# php - 如何在 Smarty 的下拉列表中添加元素？

> ID：13967901
> 
> 赞同：1
> 
> 时间：2012-12-20T08:22:29.647
> 
> 标签：php, for-loop, smarty

我是 Smarty 模板引擎的新手，我被困在这一点上。实际上，我想在 Smarty 模板的下拉列表中添加 1 到 31 个数字。下面是我的代码：

```
<select name="date">
    {for $f = 1 to 31}
        <option value="{$foo}">{$foo}</option>
    {/for}
</select> 
```

但它给出了一个错误。你能帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:28:10.670

```
{section name=waistsizes start=28 loop=40 step=1}
 <option value="{$smarty.section.waistsizes.index}">
  $smarty.section.waistsizes.index}
 </option>
{/section} 
```

# joomla - Joomla！JDatabase::getErrorNum() 已弃用，请改用异常处理

> ID：13967904
> 
> 赞同：9
> 
> 时间：2012-12-20T08:22:40.427
> 
> 标签：joomla, joomla2.5, joomla3.0

我有以下代码：

```
 $db = JFactory::getDbo();
    $query = $db->getQuery(true);

    $query->select('*');
    $query->from('#__users');
    $db->setQuery($query);

    // Check for a database error.
    if ($db->getErrorNum()) {
        JError::raiseWarning(500, $db->getErrorMsg());
    }       

    $result = $db->loadResult(); 
```

**现在 getErrorNum 和 JError 已被弃用。**

澄清一下，JError 和 $db->getErrorNum() 在 Joomla 2.5 中没有被弃用，但在 Joomla 中！3.0。所以这个问题对于那些为 2.5 开发但想要轻松升级到 3.X 系列的人来说是有价值的。

那么**究竟用什么来替换它们**以便我可以正确检查数据库错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T16:49:06.557

```
$db = JFactory::getDbo();
$query = $db->getQuery(true);

$query->select('*')
      ->from('#__users');

try
{
    $db->setQuery($query);
    $result = $db->loadResult();
}
catch (RuntimeException $e)
{
    echo $e->getMessage();
} 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-20T16:34:15.780

JError 在 Joomla 2.5 中不被弃用 - 但在 Joomla 3.0（平台 12.1 及更高版本）中，所以对于 Joomla 2.5 这不是问题。JError 被替换为 php 异常（[此处](http://php.net/manual/en/language.exceptions.php)链接到 php 指南）

[这里](http://forum.joomla.org/viewtopic.php?f=642&t=664690)还有一个关于这个的 Joomla 论坛问题

getErrorNum() 也是使用异常的情况 - 再次阅读上面的 php 文档链接以获取更多信息。[这里](http://php.net/manual/en/language.exceptions.php#78591)的页面上有一个很好的 mysql 示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-17T05:17:57.463

```
$app = JFactory::getApplication();

$db = JFactory::getDbo();
$query = $db->getQuery(true);

$query->select('*')
  ->from('#__tablename');

try
{
    $db->setQuery($query);
    $result = $db->loadObjectList();
}
catch (Exception $e)
{
    $app->enqueueMessage(JText::_($e->getMessage()), 'error');
} 
```

并重定向到您的网址。将显示错误消息

# wix - 使用单个 msi 安装多个组件

> ID：13967906
> 
> 赞同：1
> 
> 时间：2012-12-20T08:22:49.257
> 
> 标签：wix, wix3.5

我有一个包含大约 19 个不同组件的软件。现在我使用 19 个安装项目和 1 个作为主要安装程序的 Winforms 项目。我想迁移到 WiX，因为我想升级到 Visual Studio 2012。我的问题是：在 WiX 中可以做到这一点吗？在我当前的设置中，用户可以通过检查它们来决定要安装哪些组件。是否有可能用 WiX 创造这样的体验？将来是否有可能只升级其中一个组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:06:25.463

是的，Wix 非常适合这种事情，它称它们为[Features](http://wix.sourceforge.net/manual-wix2/wix_xsd_feature.htm)，您可以简单地设置一组功能（您可以设置*Level*以便检查您想要默认安装的东西（如果您这样做），并且optional 是未选中的（如果你喜欢的话）。你也可以在一个特性下有一个特性，对于像这样的孩子：

```
Product  
-Feature 1  
-Feature 2  
--Feature 2 Documentation  
--Feature 2 Admin Tools  
-Feature 3 
(etc) 
```

这些支持标题/描述等，使其美观且用户友好。

要设置更高级的 UI 功能，您需要向安装程序项目添加对 WixUIExtension.dll 的引用，并将 UIRef 元素添加到产品中（请参阅[本文](http://wix.tramontana.co.hu/tutorial/user-interface/ui-wizardry)），例如：

```
<UIRef Id="WixUI_FeatureTree" /> 
```

您可能希望为要安装的每个“事物”设置一个功能，然后为每个“事物”设置一个 ComponentGroup，因为您可以定义要安装的任意数量的子组件。

这是一个应该执行上述操作的片段（请注意，它没有完全充实，只是一个示例）：

```
<UIRef Id="WixUI_FeatureTree" />

<ComponentGroup Id="Component1">
  <ComponentRef Id="Component1"/>
</ComponentGroup>

<Component Id="Component1" Directory="directorytobeinstalledto">
  <File Id="File1" Source="fileweareinstalling"/>
</Component>

<Feature Id="Feature1" Title="Feature 1" Description="My Feature 1" Level="1">
  <ComponentGroupRef Id="Component1"/>
</Feature>
<Feature Id="Feature2" Title="Feature 2" Description="My Feature 2" Level="1">
  <Feature Id="Feature2.Docs" Title="Feature 2 Documentation" Description="My Feature 2 Documentation" Level="1000"/>
  <Feature Id="Feature2.Admin" Title="Feature 2 Admin Tools" Description="My Feature 2 Administration Tools" Level="1000"/>
</Feature>
<Feature Id="Feature3" Title="Feature 3" Description="My Feature 3" Level="0"/> <!-- disabled! --> 
```

# svn - SVN：具有不同配置的两个分支

> ID：13967908
> 
> 赞同：0
> 
> 时间：2012-12-20T08:23:08.430
> 
> 标签：svn

我在 SVN 中有一个项目，我想创建两个分支。但唯一不同的是配置文件（app.config）。是否有可能当我编辑主干时，更改会自动添加到两个分支？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T17:30:55.143

**简短而简单的答案**

不

**更长的答案**

仍然是“否”，但是“您可以执行其他操作并获得 3 个操作 -> 3 个提交”。

说明：您不能通过仅更改一个来更改 3 个独立目标，但您可以分发转换存储库。为了做到这一点，您可以在提交主干后将主干合并到每个分支（一个分支 - 一个合并）。为了从主干合并到分支，您必须在每个目标分支上拥有干净的工作副本，并且在每个分支提交到主干之后（手动或在提交后挂钩中`svn merge ^/trunk WC-OF-BRANCH & commit -m "Merge trunk" WC-OF-BRANCH`）

* * *

**替代解决方案**

如果您的分支仅在一个文件中不同（很少更改？？？），您可以完全消除分支 - 将 app.config 的模板存储在存储库中，并将准备真实配置的任务移至 Builder|Deployer 脚本（可以是一些 sed 或补丁patch1|patch2 的模板，您也将其存储在存储库中）

# javascript - 加载内容时的图像

> ID：13967910
> 
> 赞同：0
> 
> 时间：2012-12-20T08:23:09.740
> 
> 标签：javascript, jquery, css, ajax

我根据选择框选项将一些内容从外部页面 div 加载到 div。我注意到有时加载包含大量信息的 div 需要一段时间，如果有办法在加载 div 的同时制作图像加载器（gif），我会感到很困惑？

这是我用来加载内容的代码：

```
$(document).ready(function(){ 
$("#select_box").change(function(){ 
    var selectedOption = $('#select_box :selected').val(); 
    $containerDiv = $('#div_where_content_loads_in'); 
            switch (selectedOption)
            {
                case "Option1":$containerDiv.load( "page.html#div1" ); break;
                case "Option2":$containerDiv.load( "page.html#div2" ); break;
                case "Option3":$containerDiv.load( "page.html#div3" ); break;
                case "Option4":$containerDiv.load( "page.html#div4" ); break;
           }
   }); 
}); 
```

我看过一些教程，但认为我需要一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:33:08.887

我通常创建一个显示和隐藏函数并使用 ajax.load 函数调用它们。但昨晚我意识到我可以只听 ajaxStart 和 Stop 事件。好吧，这对你来说可能是正常的生活方式，但我从未想到过。无论如何，这是使用 jQuery 监听开始/停止事件和显示/隐藏加载动画的代码

```
$(document).ready(function () {
    $(document).ajaxStart(function () { showProgress() }).ajaxStop(function () { hideProgress() });
});

function showProgress() {
    $('body').append('<div id="progress"><img src="/images/loading.gif" alt="" width="16" height="11" /> Loading...</div>');
    $('#progress').center();
}

function hideProgress() {
    $('#progress').remove();
}

jQuery.fn.center = function () {
    this.css("position", "absolute");
    this.css("top", ($(window).height() - this.height()) / 2 + $(window).scrollTop() + "px");
    this.css("left", ($(window).width() - this.width()) / 2 + $(window).scrollLeft() + "px");
    return this;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:41:08.477

您可以为此使用 ajaxStart 函数和 .load 成功函数回调，

```
$(document).ready(function(){ 
   $("#select_box").change(function(){ 

     $(document).ajaxStart(function(){
       $('.loader').show();
     });

    var selectedOption = $('#select_box :selected').val(); 
    $containerDiv = $('#div_where_content_loads_in'); 
            switch (selectedOption)
            {
                case "Option1":
                    $containerDiv.load( "page.html#div1", function(){
                       $('.loader').fadeOut('fast');
                    }); 
                    break;
                case "Option2":
                    $containerDiv.load( "page.html#div2", function(){
                       $('.loader').fadeOut('fast');
                    });  
                    break;
                case "Option3":
                    $containerDiv.load( "page.html#div3", function(){
                       $('.loader').fadeOut('fast');
                    });  
                    break;
                case "Option4":
                    $containerDiv.load( "page.html#div4", function(){
                       $('.loader').fadeOut('fast');
                    });  
                    break;
           }
   }); 
}); 
```

试试这个，看看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:34:54.610

`jQuery.load()`接受第二个参数，一个回调函数，在内容加载完成后执行。这个想法是，您在调用之前显示一个微调器`$containerDiv.load()`并将其隐藏在回调中。

说你的 html 是

```
<select id="select_box">
    <option value="foo">Load content from 'page.html #foo'</option>
    <option value="bar">Load content from 'page.html #bar'</option>
    <option value="foobar">Load content from 'page.html #foobar'</option>
    <option value="barfoo">Load content from 'page.html #barfoo'</option>
</select> 
```

你的javascript可以是这样的：

```
$(document).ready(function() {
    var $containerDiv = $('#div_where_content_loads_in');
    var $spinner = $containerDiv.find('#spinner');
    $("#select_box").change(function() { // Called when user selects a value
        // Get the selected option
        // one of "foo", "bar", "foobar", "barfoo"
        var selectedOption = this.value;

        // Get the content URL
        // one of "page.html #foo", "page.html #bar",
        //        "page.html #foobar", "page.html #barfoo"
        var contentURL = "page.html #"+selectedOption;

        $spinner.show(); // Show the spinner before starting content load

        // Now that contentURL is the correct URL we want to load, call $.load
        $containerDiv.load( contentURL, function() {
            $spinner.hide(); // Hide the spinner when the content finished loading
        });
    });
}); 
```

请注意，该`switch`声明也被避免了。这假定您的容器包含一个带有 id 的元素`spinner`，使用 CSS 正确设置样式并包含一个微调器 gif。

# c# - 如何在 C# 中将十六进制值转换为带符号的十进制等效值？

> ID：13967911
> 
> 赞同：-1
> 
> 时间：2012-12-20T08:23:13.287
> 
> 标签：c#

例子 ：

十六进制：ebe4fe40

有符号十进制：-337314240

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T08:26:20.447

最简单的方法是这样的：

> yourHexNumber ──> String ──> ConvertIntoDecimal

这将从十六进制转换为十进制：

```
 string myHexNumber = "ebe4fe40";
 int decValue = Convert.ToInt32(myHexNumber, 16); // This will be -337314240 
```

要将十进制转换为十六进制，您将执行以下操作：

```
int decValue = -337314240;
string myHexNumber = decValue.ToString("X"); // This will be EBE4FE40 
```

这种方法较短，所以我更喜欢它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T08:29:03.413

要将十六进制转换为十进制...

```
int decValue = int.Parse(hexValue, System.Globalization.NumberStyles.HexNumber); 
```

# c# - LaunchUriAsync 未导航到正确的 uri

> ID：13967912
> 
> 赞同：2
> 
> 时间：2012-12-20T08:23:22.753
> 
> 标签：c#, windows-8, microsoft-metro

我需要导航到我的 Metro 应用程序中的 Internet 页面。我的网址是（示例）'http://www.foo.com/#/foo'。问题是 LaunchUriAsync 将 url 剪切为“http://www.foo.com”。

```
try
{
    Uri uri = new Uri(item.UriCode); 
    await Launcher.LaunchUriAsync(uri);
}
catch (Exception exception)
{
    //TODO
} 
```

我哪里错了？问候。

更新 ：

我准确地说 uri = [http://www.foo.com/#/foo](http://www.foo.com/#/foo)。所以问题来自 LaunchUriAsync 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:57:58.683

我尝试使用相同的代码对您提到的 uri 进行硬编码请检查以下代码：

```
 /// <summary>
    /// Invoked when this page is about to be displayed in a Frame.
    /// </summary>
    /// <param name="e">Event data that describes how this page was reached.  The Parameter
    /// property is typically used to configure the page.</param>
    protected async override void OnNavigatedTo(NavigationEventArgs e)
    {
        try
        {
            Uri uri = new Uri("http://www.foo.com/#/foo");
            await Launcher.LaunchUriAsync(uri);
        }
        catch (Exception exception)
        {
            //TODO
        }
    } 
```

输出如下所示

![具有相应 URL 的启动器测试](../Images/c4b53f66a23cf796841413e16cbfdeab.png)

我认为还有其他问题。可能是`item.UriCode`随行请查收。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:07:25.157

I think it is difficult to diagnose what is actually wrong from your example.

It appears you are trying to navigate to an anchor within a web page, but doing it with incorrect syntax / pointing to a non-existent anchor. However, your example linked page doesn't seem to contain a navigable anchor.

Assuming that this is actually what you are trying to achieve, try the following example, and you will see that navigation works as expected

```
Launcher.LaunchUriAsync(new Uri("http://www.hypergurl.com/anchors.html#bottom")); 
```

If this isn't what you are trying to achieve, I would suggest that the presence of the `#` character in the URI is being interpretted as an anchor reference by IE and that's why you aren't getting the result you require.

# java - 在 zk 中获取 sevletconfig 对象

> ID：13967920
> 
> 赞同：3
> 
> 时间：2012-12-20T08:23:51.067
> 
> 标签：java, servlets, zk

如何在 zk 框架中获取 servletconfig 对象？

因为我们可以使用 nativerequest 和 response 来获取 httpservletRequest 和 httpservletresponse，但是 servletconfig 呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T15:18:37.537

您正在寻找[WebApp](http://www.zkoss.org/javadoc/6.0.0/zk/org/zkoss/zk/ui/WebApp.html)实例，您可以通过调用[Desktop.getWebApp()](http://www.zkoss.org/javadoc/6.0.0/zk/org/zkoss/zk/ui/Desktop.html#getWebApp%28%29)来获取它。WebApp 是一个包装器，它包装了 ServletContext 和 ServletConfig，并具有与两者相似的 API。

# sql - 如何查看经典 HyperFileSQL 数据库的结构和外键？

> ID：13967921
> 
> 赞同：1
> 
> 时间：2012-12-20T08:23:52.967
> 
> 标签：sql, database, db-structure, hyperfilesql

我有一个需要转换的经典 HyperfileSQL 数据库（.FIC 文件）

我正在尝试对数据库中的结构和键进行一些概述。所以我下载了WinDev Express，现在我得到了'HyperFileSQL Control Center'。

使用此工具，我可以打开文件，并且可以看到某些列上有键。但是我找不到查看密钥详细信息的方法（什么表的密钥？）。

我怎样才能获得更多详细信息，以便更好地了解整个数据库结构？

感谢您对此的任何建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T10:09:02.537

这些关系在分析级别 (.WDA) 设置。然后分析负责生成 .FIC 和 .NDX（索引）文件。

# asp.net-mvc-4 - MVC 4：HttpContext.Current.Items

> ID：13967929
> 
> 赞同：1
> 
> 时间：2012-12-20T08:24:29.867
> 
> 标签：asp.net-mvc-4

我正在创建一个 MVC 4 应用程序。我需要在整个请求期间存储一个对象。它需要在不同的对象中使用。我的想法是将它存储在 HttpContext.Current.Items 中。但是当我刷新页面时，我添加的对象仍然存在于 Items 集合中。

我认为它会被删除，如果我没记错的话，我在其他项目中使用了这种技术。我正在使用 Visual Studio 2012、IIS Express 和 MVC 4（.Net 4.5 框架）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:27:49.333

如果要将对象用于单个控制器 -> 视图调用，则可以使用`ViewBag`. ViewBag 是一个动态类型的类，它本质上允许您通过简单地使用语法来存储您想要的任何内容`ViewBag.MyProperty`。然后，您只需访问`@ViewBag.MyProperty`.

如前所述，ViewBag 适合单次调用（类似于 TempData）。如果您希望将此数据传递回服务器以在后续请求中使用（因此意味着它在多个调用中使用），您可能希望使用 Session 来代替。

# jquery - jQuery 效果不起作用 - 在 Ajax 表单上

> ID：13967930
> 
> 赞同：0
> 
> 时间：2012-12-20T08:24:30.663
> 
> 标签：jquery, ajax

这是其中的一个代码：

```
$("#submit").click(function(){
    if (message == '') {
        $('#incorrmess').html('<img src = "wrong.png"/> Please type in your message').slideDown("slow");
    } else {
        //Ajax statement
    }
}); 
```

在页面的主体上，我有 div。效果不起作用。我也试过这个：

```
$('#incorrmess').slideDown("slow").html('<img src = "wrong.png"/> Please type in your message'); 
```

我该怎么做才能使效果起作用？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:34:03.753

你应该先隐藏，然后向下滑动。可见元素上的 slideDown 不会做任何事情。

`$('#incorrmess').hide().html('<img src = "wrong.png"/> Please type in your message').slideDown("slow");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:37:37.670

您也可以将 div 设置`incorrmess`为`display:none;`，然后尝试使用`$('#incorrmess').html('<img src = "wrong.png"/> Please type in your message').slideDown("slow");`. 也看看这个简单的[例子](http://jsfiddle.net/8dvEn/1/)

# php - 如何使这个查询工作？

> ID：13967932
> 
> 赞同：-3
> 
> 时间：2012-12-20T08:24:31.687
> 
> 标签：php, mysql

我正在尝试查询这个，但它不知何故不起作用。有没有人看到我做错了什么？它似乎确实连接到数据库，但不知何故它不会更新表。

```
<?php
include('connect.php');

if (isset($_REQUEST['disable'])){
$number = $_REQUEST['disable'];
$sql = "UPDATE aanwezigheid SET value='0' WHERE id='"$number"'";
mysql_query($sql);
}
?> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:26:58.193

试试这个

```
 UPDATE aanwezigheid SET value=0 WHERE id='".$number."'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:27:06.460

您的 SQL 查询错误。有多余的双引号。试试这个

```
$sql = "UPDATE aanwezigheid SET value='0' WHERE id='$number'"; 
```

其他：不要使用`mysql_*`函数。有关更多信息，请参阅`@DaveRandom`上面的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:27:31.737

您忘记了查询中变量周围的两点。代码应该是..

```
<?php
include('connect.php');
if(isset($_REQUEST['disable'])){
    $number = $_REQUEST['disable'];
    $sql = "UPDATE aanwezigheid SET value='0' WHERE id='".$number."'";
    mysql_query($sql);
}
?> 
```

# python - 如何在 PySide 中调用 qCompress()

> ID：13967934
> 
> 赞同：0
> 
> 时间：2012-12-20T08:24:35.203
> 
> 标签：python, pyside

学习 PySide。我在空闲的 IDE 中尝试调用 qCompress() 但失败了。谁能帮我？

```
>>> from PySide import QtCore
>>> QtCore.qCompress("test")

Traceback (most recent call last):
File "<pyshell#1>", line 1, in <module>
    QtCore.qCompress("test")
AttributeError: 'module' object has no attribute 'qCompress' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:05:53.527

看起来 PySide 还没有添加它。PyQt4 有这个功能。下面的代码有效。

**代码**

```
from PyQt4 import QtCore
print repr(QtCore.qCompress("test")) 
```

**输出**

```
PyQt4.QtCore.QByteArray('\x00\x00\x00\x04x\x9c+I-.\x01\x00\x04]\x01\xc1') 
```

# visual-studio-2012 - Mole 2010 是否支持 VS 2012？

> ID：13967935
> 
> 赞同：-1
> 
> 时间：2012-12-20T08:24:38.683
> 
> 标签：visual-studio-2012, mole-2010

我在 VS 2010 中安装了 Mole 2010，但现在我已经加载了 VS 2012，调试时 Visualiser 下拉菜单中没有出现 Mole 2010 选项。

有谁知道 Mole 2010 是否支持 VS 2012 。我安装了 VS 2012 Ultimate

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T00:35:56.667

它在 Visual Studio 2012 中不起作用，但作者说新版本将在其中起作用，尽管他几个月来一直这么说。[莫洛软件](http://www.molosoft.com/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T11:25:19.973

Moles 是 Visual Studio 的一个插件，已被产品化为 Fakes，默认情况下在 VS 2012 中可用。这就是为什么您可能在图库中找不到 2012 年的 Moles。

[请参阅此处进行比较](http://www.richonsoftware.com/post/2012/04/20/Comparing-Microsoft-Moles-in-Visual-Studio-2010-to-Microsoft-Fakes-in-Visual-Studio-11.aspx)。

# solr - 如何避免在 solr 搜索中出现警告“未定义 queryConverter，使用默认转换器”

> ID：13967938
> 
> 赞同：0
> 
> 时间：2012-12-20T08:25:01.630
> 
> 标签：solr, sunspot-solr

如何避免警告 solr 搜索中未定义 queryCONverter。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:25:01.630

要解决此问题，请添加以下补丁：

```
diff --git solrconfig.xml solrconfig.xml
index 37b7913..dd9bb62 100644
--- solrconfig.xml
+++ solrconfig.xml
@@ -570,6 +570,8 @@ 
```

文件：solrconfig.xml，在代码中添加下面的`</searchComponent>`代码

```
 <queryConverter name="queryConverter" class="solr.SpellingQueryConverter"/>

   <!-- a search component that enables you to configure the top results for
    a given query regardless of the normal lucene scoring.-->
   <searchComponent name="elevator" class="solr.QueryElevationComponent" > 
```

谢谢！！！

# java - 另一个不寻常的 java ClassNotFound

> ID：13967942
> 
> 赞同：0
> 
> 时间：2012-12-20T08:25:11.900
> 
> 标签：java, linux, sh, raspberry-pi

我有一个小程序和几个 .sh 文件来执行它。我使用 Raspberry-pi 虚拟盒模拟器来运行它。（不要问为什么......只需要它...... :)）所以，我的 .sh 文件看起来像：

```
export HSQLDB_JAR=../lib/hsqldb-2.2.8.jar

java -classpath $HSQLDB_JAR org.hsqldb.Server -database.0 ../my-hsqldb/my-hsqldb -dbname.0        my-hsqldb 
```

我有所需的 jars，java 安装正确（检查了几次），等等，都一样：

```
rpi@RaspberryPi:/home/snb/my/apps/MyApp/bin$ sh skysql.sh
: not found2: 
Exception in thread "main" java.lang.NoClassDefFoundError: org/hsqldb/Server
Caused by: java.lang.ClassNotFoundException: org.hsqldb.Server 
```

最有趣的是，当我直接从 bash 运行 sh 文件中的脚本时，它可以工作！但是运行 .sh 文件会出现此错误:(

非常感谢任何帮助。

编辑

以下目录具有所有访问规则，因此不会发生安全问题。它们都是可访问的。

编辑#2

我已经使用了提供的答案和评论，这就是发生的事情：

1.  还是一样的东西:(

2.  我的 .sh 文件：

    ```
    #!/bin/bash

    export HSQLDB_JAR="$(pwd)/hsqldb-2.2.8.jar"

    echo $HSQLDB_JAR

    java -classpath $HSQLDB_JAR org.hsqldb.Server -database.0 ../my-hsqldb/my-hsqldb -dbname.0 my-hsqldb 
    ```

终端输出为：

```
rpi@RaspberryPi:/home/snb/my/apps/MyApp/bin$ sh skysql.sh
: not found2: 
: not found4: 
/home/snb/my/apps/MyApp/lib/hsqldb-2.2.8.jar
: not found6: 
Exception in thread "main" java.lang.NoClassDefFoundError: org/hsqldb/Server
Caused by: java.lang.ClassNotFoundException: org.hsqldb.Server
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: org.hsqldb.Server.  Program will exit.
: not found8: 
```

因此，如您所见，.jar 确实被找到并且它位于正确的路径中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T08:31:16.233

这可能是您未显示的部分脚本中的错误。试试这个：

1.  确保脚本的第一行是`#!/bin/bash`

2.  确保您位于您认为的文件夹中。添加

    ```
    if [ ! -e "$HSQLDB_JAR" ]; then echo "Jar not found!" ; exit 1 ; fi 
    ```

    打电话之前`java`

3.  要查看 shell 实际执行的内容，请使用`-x`（将`-x`作为参数添加到第一行或使用 command 激活它`set -x`）。

如果您需要生成相对于脚本的路径，请使用以下代码：

```
BASE=$( cd $( dirname "$0" ) > /dev/null && pwd )
HSQLDB_JAR="$BASE/../lib/hsqldb-2.2.8.jar" 
```

始终引用包含路径的变量以确保空白正常工作。

# jquery - 数据表删除行分组

> ID：13967944
> 
> 赞同：3
> 
> 时间：2012-12-20T08:25:32.480
> 
> 标签：jquery, datatables

我正在使用**DataTables Row Grouping Add-on**。我通过选择框更改事件使用它。

代码

在 PHP 中：

```
<select id="Group-Discoveries" name="Group-Discoveries" class="input-medium">
<option value="">None</option>
<option value="6">Domain</option>
<option value="7">Type</option>
<option value="8">Category</option>
<option value="9">Status</option>
</select> 
```

在 JS 中：

```
$(document).ready(function() {    
var DTable = $('#discovery').dataTable( {
            "sDom": "<'row-fluid'<'span3'<'toolbar'>><'span3'<'selectbar'>><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
            "bPaginate": false
        });
        $('#Group-Discoveries').live('change', function(){
            var index = $(this).val();
            if(index == ''){

            }
            else{
                DTable.rowGrouping({
                    "iGroupingColumnIndex": index,
                    "bHideGroupingColumn": false,
                    "bHideGroupingOrderByColumn": false,
                    "sGroupingClass":"group_"+index,
                    "bSetGroupingClassOnTR":true,
                    "bExpandableGrouping":true
                });
            }
        });
}); 
```

我想在为空时删除**行分组。**`index`

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:50:02.627

我找到了解决方案 - 删除分组插件创建的绘制回调并重置组排序：

```
var oSettings = jQuery('#table').dataTable().fnSettings();

for (f = 0; f < oSettings.aoDrawCallback.length; f++) {
    if (oSettings.aoDrawCallback[f].sName == 'fnRowGrouping') {
        oSettings.aoDrawCallback.splice(f, 1);
        break;
    }
}

oSettings.aaSortingFixed = null; 
```

希望这可以帮助。

# php - 选择项目后显示数据

> ID：13967949
> 
> 赞同：0
> 
> 时间：2012-12-20T08:26:00.283
> 
> 标签：php, mysql, select, menu

首先，我要感谢大家对我之前的问题做出如此积极的回应。

现在我有另一个问题需要帮助。

我有一个带有项目列表的下拉菜单。该列表在 while 循环内生成。这是代码：

```
$query = "SELECT Key, Short FROM product WHERE Active = 1 OR Short LIKE 'Blue%'";
$run = mysql_query($query) or die(mysql_error());

echo 'Product: <br />';
?>

<select id="select2" name="select2">
<?php
$ids = 0;
echo "<option selected='selected'>-Select product-</option>";
while($rows = mysql_fetch_assoc($run)) {
    echo "<option value=$ids>".$rows['Short']."</option>";
    $ids++;
}
?>
</select><br /><br /> 
```

现在我需要做的是在这个下拉菜单下面创建另一个下拉菜单，并根据他们从下拉菜单中选择的选项显示合同。他们选择的每个项目也有一个名为 Key 的数字。现在在另一个名为contracts 的表中，我存储了所有具有相同值Key 的合约。所以......在第二个下拉菜单中，我必须根据他们在第一个下拉菜单中选择的键来显示合同。

我真的希望它足够清楚明白，我有点困惑。

更新：好的，这是新代码：

索引.php

```
$("select#select2").change(function(){
    $.ajax({
        type: "GET",
        url: "process.php",
        data: "selected_key=" + $(this).val(),
        success: function(result) {
            $("select#text2").html(result);
        }
    });
});

</script>

<select id="text2" name="text2">

</select> 
```

这是我的 process.php

```
<?php ## URL_TO_GET_CONTRACTS_FOR_KEY ##
$selectedKey = $_GET['selected_key'];
$query = "SELECT * FROM contacts WHERE Key = '".$selectedKey."'";
$run = mysql_query($query);
while($row = mysql_fetch_assoc($run)) {
    echo "<option value='..'>..</option>";
    } ?> 
```

但我看不到我的 text2 下拉菜单中显示的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:36:56.450

认为您最好在第一个下拉菜单中使用选项值 $rows['Key'] 并添加一个 jQuery 选择器，该选择器采用所选值并获取该键的相应合同。

应该是这样的。。

PHP代码

```
$query = "SELECT Key, Short FROM product WHERE Active = 1 OR Short LIKE 'Blue%'";
$run = mysql_query($query) or die(mysql_error());
echo 'Product: <br />'; ?>
<select id="select2" name="select2">
<?php
echo "<option selected='selected'>-Select product-</option>";
while($rows = mysql_fetch_assoc($run)) {
    echo "<option value='".$rows['Key']."'>".$rows['Short']."</option>";
}
?>
</select> 
```

查询代码

```
$("select#select2").change(function(){
    $.ajax({
        type: "GET",
        url: "URL_TO_GET_CONTRACTS_FOR_KEY",
        data: "selected_key=" + $(this).val(),
        success: function(result) {
            $("select#NEWSELECT").html(result);
        }
    });
}); 
```

说明： URL_TO_GET_CONTRACTS_FOR_KEY 是您必须编写的 PHP 文件的 URL。在该文件中，您可以访问 $_GET['selected_key']，使用该值来获取该密钥的合同。在该文件中，您应该为第二个选择回显“”标签。像这样：

```
<?php ## URL_TO_GET_CONTRACTS_FOR_KEY ##
$selectedKey = $_GET['selected_key'];
$query = ..
$run = ..
while($row = mysql_fetch_assoc($run)) {
    echo "<option value='..'>..</option>";
} ?> 
```

NEWSELECT 应替换为应放置返回选项的选择的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:33:17.913

php 是服务器端，你不能只用 php 来做到这一点，因为你需要 ajax（如果你想这样做而不刷新页面）

只需在选择下拉菜单上进行 ajax 调用并显示另一个

* * *

**笔记**

1.  整个**`ext/mysql`**PHP 扩展提供了所有以 mysql_ 为前缀的函数，[从 PHP v5.5.0 开始正式弃用，](http://php.net/manual/en/changelog.mysql.php)并将在未来删除。所以使用`PDO`或者`MySQLi`

**好读**

1.  [不推荐使用 mysql 扩展并将在将来删除：请改用 mysqli 或 PDO](https://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli/13944958#comment19236631_13944958)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:42:55.133

有很多方法可以做到这一点，但与 AJAX 相比，它们会很麻烦而且很烦人。（我的意思是首先获取所有必需的数据，但这是一个坏主意）。

**为什么选择 AJAX**

AJAX 可以在不重新加载整个页面的情况下从其他页面发送和接收数据。您在上面编写的 PHP 将只向浏览器输出 HTML。因此，要运行更多 PHP，您需要在文件中存储额外的代码并运行它。

**如何使用它**

一个简单的方法是使用 jQuery。这将在客户端与您的 jQuery 一起使用

```
$("select#select2").change(function(){
$.ajax({
    type: "POST",
    url: "url_to_contacts",
    data: "reqd_key=" + $(this).val(),
    success: function(result) {
        $("select#select3").html(result);
      }
   });
}); 
```

将有上面提到的单独的 PHP 文件。`$_POST`可以使用这将包含查询并输出 HTML来获取变量。此输出 HTML 将作为新选择的 HTML 按行放置`$("select#select3").html(result);`

建议在尝试此之前对 AJAX 进行一些研究并了解如何动态编辑页面

# css - CSS：将元素停靠在页面底部及其顶部元素的底部？

> ID：13967953
> 
> 赞同：0
> 
> 时间：2012-12-20T08:26:15.763
> 
> 标签：css, layout, position

我需要将一个元素粘合到底部和顶部，但我想从顶部保持另一个元素进入的动态空间，我希望`top`是那个元素大小+一些空间。

这怎么可能（首选纯 CSS）？

**[这](http://goo.gl/1WdyI "在 jsFiddle 中打开示例")**是一个例子：

HTML：

```
<header id="header" class="center">
Hello and welcome to my demo!
</header>

<header id="slider" class="center">
    <img src="http://goo.gl/o6tho"/>
</header>

<div id="content" class="center">
    I want this area to be glued to the footer + 10px space
    And additionally, glued to the element on top of itself + 10px
    The slider can disappear, which should result in the content
    to grow and reach the heaader.
</div>

<footer class="center">
    All rights reserved.
</footer>
​ 
```

CSS：

```
.center
{
    width: 200px;
    margin-left: auto;
    margin-right: auto;  
    right: 0px;
    left: 0px;
}

#header
{
    background: green;
    color: white;  
    height: 50px;
    position: fixed;    
    top: 0px;    
}

#slider
{
    height: 60px;
    position: fixed;
    top: 60px;
}
#slider img
{
    max-width: 100%;
}

#content
{
    background: beige;    
    height: 50px;
    bottom: 10px;
}

footer
{      
    background: blue;
    color: white;  
    height: 50px;
    position: fixed;    
    bottom:0px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:57:21.067

不确定css但js你可以尝试这样的事情：

```
document.getElementById('header').style.top = document.getElementById('newelement').style.height; 
```

正确插入新元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:58:37.357

今天做一个纯 CSS 解决方案的唯一方法是`%`在所有元素上给出高度。

希望在未来的某个时候，我们都能够使用新的 CSS 进行[网格布局](http://dev.w3.org/csswg/css3-grid-layout/)来完全满足您的需求。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T08:59:09.140

这可能对您有用：

创建一个`<div>`外部主要内容 div 并给它一个`position:relative`.

# objective-c - 在标签栏中的特定标签中打开应用程序

> ID：13967965
> 
> 赞同：5
> 
> 时间：2012-12-20T08:26:56.913
> 
> 标签：objective-c, ios, tabbar

我有一个带有 5 个选项卡的 TabBar 的应用程序（没有自定义类的常规选项卡栏）。当我启动应用程序时，左侧选项卡会打开。我希望它先打开中间的。我试过把

```
[self.tabBarController setSelectedIndex:3]; 
```

在第一次打开但选项卡没有切换的 ViewController 的 ViewDidLoad 中。 **我可以看到它已突出显示但未选中。**如果我将上面的代码放在下面`viewWillAppear`，它将在第一次运行时被选中，但是当我不时选择左侧选项卡时，它会跳转到中间选项卡。

也试过这个没有成功：

```
DetailsViewController* vc = [self.storyboard instantiateViewControllerWithIdentifier:@"DetailsViewController"];
[self.navigationController pushViewController:vc animated:true]; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-28T00:48:17.057

这是唯一对我有用的解决方案。在 appdelegate 中：

```
UITabBarController *tabBar = (UITabBarController *)self.window.rootViewController; 
[tabBar setSelectedIndex:2]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:30:10.103

In storyboard set custom class to the tabbarController and in that custom class

```
-(void) viewDidLoad
{
    [self.tabBarController setSelectedIndex:3];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T08:23:43.717

我过去做过一些骇人听闻的事情。我发现为了让每个选项卡都处于活动状态，在我的 applicationDidFinishLaunching 中，我需要遍历所有视图控制器，然后访问“视图”属性：

```
for(viewController in arrayOfViewController)
{
    // will load the view controller into memory
    [viewController view];
} 
```

不知道能不能用得上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T08:39:08.090

有需要打电话

```
tabBarController.selectedIndex = desiredIndex; 
```

在 applicationDidLaunch 内部。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T08:40:50.140

尝试在应用程序中设置它：didFinishLaunchingWithOptions: 如果你的标签栏控制器是 rootViewController

```
`[self.window.rootViewController.tabBarController setSelectedIndex:3];` 
```

# asp.net-mvc - 如何使用 asp.net MVC 构建动态“添加/删除”图

> ID：13967972
> 
> 赞同：1
> 
> 时间：2012-12-20T08:27:07.070
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

我正在对以下业务需求进行一些研发：-

我在 razor 视图中有一个包含客户信息的模型，那么我如何构建一个网络“添加/删除”图表来插入和删除客户，类似于下图：-

[soumya.files.wordpress.com/2010/05/image3.png](http://soumya.files.wordpress.com/2010/05/image3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:50:39.623

好的，这很容易。

您需要使用两个列表元素来存储“模型上”和“模型外”的数据。在客户端代码上，您管理两个元素之间的数据移动，在提交表单时，您只需将“模型”端包含的数据发送到服务器。

然后，在服务器上删除所有不在您传递给控制器​​的列表中的数据，并添加那些在列表中但不在您的业务模型实例上的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T00:10:35.583

您将需要研究一些东西来进行客户端数据操作。目前微软阵营首选的框架是 Knockout.js。您将需要显示来自服务器的数据，允许客户端在 javascript 中对其进行操作，并将数据保存回服务器。Ryan Niemeyer 有一堆使用 knockoutjs 的示例，[knockmeout.net](http://knockmeout.net)，[这里](http://www.knockmeout.net/2012/02/revisiting-dragging-dropping-and.html)的示例与您所说的非常接近。

# javascript - 如何从 Firefox 扩展程序在网页的命名空间（范围）中执行 javascript 代码？

> ID：13967973
> 
> 赞同：2
> 
> 时间：2012-12-20T08:27:10.110
> 
> 标签：javascript, firefox, namespaces, scope, firefox-addon

我正在寻找一种干净的方式来调用/执行/重新定义 javascript 代码从网页，在 Firefox 中，通过 Firefox 扩展。我的临时解决方案是使用暂存器（Shift-F4、Ctrl-A、Ctrl-V、Ctrl-R），它可以正常工作，但这是一个可悲的解决方法。Greasemonkey 将是我最后的手段，非常非常最后。

这是到目前为止的代码：

**主.js：**

```
exports.main = function() {
  var data = require("self").data;
  var pageMod = require("page-mod");
  pageMod.PageMod({
    include: "*.google.com",
    contentScriptFile: data.url("my-script.js")
  });
}; 
```

**我的脚本.js**

```
$('#mydiv').html('yo')
alreadyHere.sayHello=function (){alert('Bonjour');} 
```

此代码在 my-script.js 的第 1 行停止，说明 $ 未定义。命名空间/范围的问题。

我怎样才能在网页的命名空间/范围内工作，从我的扩展程序，就像我使用暂存器一样？

**编辑：** firefox主窗口的*window.content和网页上的**hassHere.sayHello*之间应该有一个链接，不是吗？

```
window.content.(things).alreadyHere.sayHello(); 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:35:41.320

是的。

```
window.content.document.defaultView.wrappedJSObject.$('#mydiv').html('yo')
window.content.document.defaultView.wrappedJSObject.alreadyHere.sayHello(); 
```

[在此](https://stackoverflow.com/questions/4215507/executing-injected-javascript-code-in-a-page-when-developing-a-firefox-extension?answertab=votes#tab-top)感谢 Mridang Agarwalla

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:36:27.163

您是否在 Firebug 控制台中尝试过？

并且，

确保您的代码在

```
$(document).ready(function () {
  //your code here
}); 
```

最重要的 jQuery 已正确加载

# jsf - 了解 ADF 框架中的 DataControl 抽象

> ID：13967978
> 
> 赞同：0
> 
> 时间：2012-12-20T08:27:21.693
> 
> 标签：jsf, oracle-adf

我正在学习 Oracle ADF 框架并想了解 DataControl 向 UIComponents 公开哪些服务。我知道有一个`binding container`抽象实际上是在页面中呈现的视图对象和 UIComponents 之间进行绑定。`datacontrol`抽象在这个框架中扮演什么角色？

换句话说，在绑定环境中运行的`datacontrol`和之间的关系是什么？在普通的 Java EE 应用程序中`bindings`，什么可以被称为等价物 ？`DataControl`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:15:13.723

> **数据控制抽象在这个框架中扮演什么角色？**

这`DataControl`是一个额外的抽象层来访问**业务服务**（实际的模型层）。

在 ADF 中，业务服务支持不同的类型，例如

*   基于应用程序模块（访问关系数据库）
*   网页服务
*   通过 URL 访问数据的 URL 服务
*   通过 Java EE EJB 访问业务数据的 EJB 数据服务

这些不同的数据访问类型由数据控制层封装。数据控制层提供了一个通用接口`Attributes`，使用`Collections`和`Operations`用于绑定层。在绑定层中，查询和更新数据时是否访问 RDBMS、Web 服务或其他东西并不重要。

当我开始使用 ADF 时，我发现困难的一件事是，当使用 RDBMS 后端实现一个简单的应用程序时，我看不到这个附加层的任何真正好处 - 此外，数据控件在之后立即在 JDeveloper 面板中可用在应用模块中定义数据模型，甚至没有配置文件。但这仅在使用`Application Module`基于业务服务时才成立。在这种情况下，数据控件的所有元数据都是从`Application Modules`数据模型中检索的。当使用其他业务服务类型（如 Web 服务）时，真正的好处就会出现。然后，还会创建其他元数据 .xml 文件来配置这些数据控件。

> **绑定层的作用是什么，它是如何与数据控制层交互的**

绑定层增强了数据控件，以便可以在 UI 中使用数据。典型的绑定是迭代器（=> 绑定层），它跟踪集合中的当前记录（=> 数据控件）。没有`iterator`，就不会有“当前记录”的概念，并且不可能在记录之间导航。

另一个方面是 JDeveloper 的设计时功能：数据控件提供必要的元数据，以便在将数据控件拖放到 UI 页面上时自动创建必要的绑定。

@Shay Shmeltzer 提到的录音绝对值得回顾，因为它们很好地洞察了数据控制和绑定层。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T17:20:08.943

绑定层将 UI 层连接到数据控制层。请注意，UI 层可以是 JSF 页面、Excel 电子表格、Swing UI 和 ADF Mobile 页面。数据控制层以抽象的方式提供对业务服务的访问，因此 UI 开发人员不需要知道业务服务是使用什么特定技术实现的。

要了解有关绑定/数据控制层的更多信息，请在此处观看两部分研讨会： [http ://www.oracle.com/technetwork/developer-tools/adf/learnmore/adfinsider-093342.html#a2](http://www.oracle.com/technetwork/developer-tools/adf/learnmore/adfinsider-093342.html#a2)

在 Java EE 的世界中，最接近的是 CDI——但 ADF 绑定提供了针对各种类型的 UI、各种类型的后端的更完整的解决方案。

# javascript - 基于 Web 的 JavaScript 游戏中的资源文件

> ID：13967979
> 
> 赞同：2
> 
> 时间：2012-12-20T08:27:21.077
> 
> 标签：javascript, html, runtime

我从 javascript 和 HTML5 游戏编程开始，我发现的第一个问题是资源文件。

虽然我的游戏在图像和声音中有大量 MB，但每次游戏开始时都会向服务器和客户端下载它们。

那么，**在一般方法**中，如何将所有需要的文件保存到本地文件夹并在运行时恢复它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:30:43.307

您将无法将文件保存到本地文件夹，然后从您的网站使用它们 - 出于安全原因，浏览器不允许这样做。

如果您想将游戏作为网站而不是用户下载并在本地运行的内容提供，您可以做的是在您的所有内容上设置远期过期标头，这将告诉浏览器将内容缓存到该日期. 这样，您的用户下次访问您的网站玩游戏时就不必下载资源了。

雅虎有[一些](http://developer.yahoo.com/performance/rules.html#expires)关于网站性能的好文章讨论了这一点。

为了提高性能，您还应该确保启用 gzip，这可以大大减少响应请求而必须发送的数据量。如果您有大量数据要下载，则尤其重要。

由于您的问题被标记为 HTML5，您还可以查看[HTML5 应用程序缓存](https://developer.mozilla.org/en-US/docs/HTML/Using_the_application_cache)，它可以让您在本地缓存各种资源，包括图像、音频等。[这](http://www.html5rocks.com/en/tutorials/appcache/beginner/)是一个很好的资源/教程，可以帮助您入门。值得注意的是，应用程序缓存在旧浏览器中的支持有限，而对过期标头的支持已经有一段时间了。因此，根据您需要的浏览器支持，您将不得不考虑采取何种方法。

# silverlight - 如果 ObservableCollection 为空，则显示文本块

> ID：13967983
> 
> 赞同：3
> 
> 时间：2012-12-20T08:27:37.053
> 
> 标签：silverlight, windows-phone-7, xaml, windows-store-apps

当应该显示的集合为空时，我想显示一个文本块，上面写着“你没有数据”。

我可以通过使用转换器轻松地让它在页面加载时工作，但是由于当收集数据更改时不会收到通知，所以代码不起作用：-

```
TextBlock Visibility="{Binding Devices, Converter={StaticResource EmtpyListToVisibility}, Mode=OneWay}" Text="You have no devices added, please press the Add Device button on the application bar" TextWrapping="Wrap"></TextBlock>

<phone:LongListSelector Margin="0,12,0,0" ItemsSource="{Binding Devices, Mode=OneWay}" ItemTemplate="{StaticResource DeviceTemplate}" LayoutMode="List" VerticalAlignment="Top" >                       
</phone:LongListSelector> 
```

在 Windows 8 应用程序中，我添加了一个名为 xxxHasRecords 的属性，然后我订阅了 Observable 集合 CollectionChanged 事件并使用了属性通知，以便可以更新我的 UI。我发现自己经常编写这段代码，所以必须有更好的处理方式！

谢谢

罗斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T08:32:59.637

而不是绑定到`ObservableCollection`，您应该绑定到`ObservableCollection.Count`属性。集合 implements `INotifyPropertyChanged`，因此每当其大小发生变化时都会通知您的绑定。然后，您的价值转换器只需检查零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:34:12.770

在这种情况下，我使用`BooleanToVisibilityConverter`

```
public class BooleanToVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        bool invert = false;

        if (parameter != null)
        {
            invert = System.Convert.ToBoolean(parameter);
        }

        bool isVisible = System.Convert.ToBoolean(value);

        if (invert)
        {
            isVisible = !isVisible;
        }

        return isVisible ? System.Windows.Visibility.Visible : System.Windows.Visibility.Collapsed;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        Visibility result = (Visibility)Enum.Parse(typeof(Visibility), value.ToString(), true);

        return result == Visibility.Visible ? true : false;
    }
} 
```

`Visibility`并将TextBox的属性的绑定更改为以下内容：

```
<TextBlock Visibility="{Binding Devices.Count, Converter={StaticResource boolToVisibilityConverter}, Mode=OneWay}"
    Text="You have no devices added, please press the Add Device button on the application bar"
    TextWrapping="Wrap">
</TextBlock> 
```

当集合为空时，`Count`返回值 0。转换器使用`System.Convert.ToBoolean`它将 0 转换为`false`和所有其他值转换为`true`。

False 返回 as`Visibility.Collapsed`和 true as `Visibility.Visible`。

# actionscript-3 - 获取字典键的数组

> ID：13967989
> 
> 赞同：1
> 
> 时间：2012-12-20T08:28:04.923
> 
> 标签：actionscript-3

我有一本字典，其中键和值都是我自己的类。我怎样才能得到一个键数组？我怎样才能找出这本字典中有哪些键？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T09:30:54.060

```
var dict = new Dictionary();

dict["a"] = 1;
dict["b"] = 2;
var arrResult: Array = new Array();

for ( var key: Object in dict )
{
    arrResult.push( key );
}

trace( arrResult ) -> b,a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:38:10.983

您也可以使用 lamda 表达式。这是它的示例代码。

```
Dictionary<string, string> Test = new Dictionary<string, string>();
            Test.Add("Azhar","Mansuri");
            Test.Add("Azhar2", "Mansuri");
            Test.Add("Azhar3", "Mansuri");
            Test.Add("Azhar4", "Mansuri");
            Test.Add("Azhar5", "Mansuri");
            Test.Add("Azhar6", "Mansuri");

            string[] key = Test.Select(s => s.Key).ToArray(); 
```

键数组将返回字典的所有键。

**更新：** 既然您想知道密钥，没有比这更好的方法了：

for (var k:字典中的对象) { var value:ValType=dictionary[k]; 变量键：KeyType=k；// 做东西 }

这只是一个示例代码。但是，它可能对您有所帮助。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-20T08:30:47.893

查看[动作脚本的链接](http://www.actionscript.org/forums/showthread.php3?t=234938)

只用于ios

```
NSArray*keys=[dict allKeys]; 
```

一般来说，如果您想知道某个特定的类是否有特定的方法，**请查看 Apple 自己的文档**。在这种情况下，请参阅[NSDictionary 类参考。](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)遍历所有方法。这样你会发现很多有用的方法。

# php - 在 PHP 中调用任意函数（闭包）时的类型提示

> ID：13967993
> 
> 赞同：4
> 
> 时间：2012-12-20T08:28:17.393
> 
> 标签：php, closures

Silex PHP 微框架基于自动类型提示进行回调注入。例如，在 Silex 中，可以提供带有任意参数的闭包参数，如下所示：

```
$app->get('/blog/show/{postId}/{commentId}', function ($commentId, $postId) {
    //...
});
$app->get('/blog/show/{id}', function (Application $app, Request $request, $id) {
    //...
});
// following works just as well - order of arguments is not important
$app->get('/blog/show/{id}', function (Request $request, Application $app, $id) {
    //...
}); 
```

我该怎么做呢？我对将参数类型作为字符串获取不感兴趣。我正在寻找一种“无条件”的全自动解决方案。换句话说，

1.  对于许多可能的论点：

    ```
    $possible_arguments = [
        new Class_A(), 
        new Class_B(), 
        new Class_C(), 
        new Another_Class, 
        $some_class
    ]; 
    ```

2.  对于具有任意数量的任意参数的闭包，它只能包含上面定义的那些参数：

    ```
    $closure = function (Class_B $b, Another_Class, $a) {
        // Do something with $a and $b
    }; 
    ```

3.  我只需要获取匹配的参数才能使用它们调用闭包：

    ```
    // $arguments is now [$possible_arguments[1], $possible_arguments[3]]
    call_user_func_array($closure, $arguments); 
    ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T08:44:20.327

我的猜测是使用反射。

[http://php.net/manual/en/class.reflectionparameter.php](http://php.net/manual/en/class.reflectionparameter.php)

超级简单的例子：

```
function pre($var)
{
    echo '<pre>' . var_export($var, true) . '</pre>';
}

interface TestInterface
{
}

class TestClass
{
    public function __construct(TestInterface $testArg)
    {
    }
}

function TestFunc(TestInterface $testArg)
{
}

// for a class...

$className = 'TestClass';
$methodName = '__construct';

$argNumber = 0;

$ref = new ReflectionParameter([$className, $methodName], $argNumber);

pre($ref);
pre($ref->getClass());

// for a function...
$funcName = 'TestFunc';
$argNumber = 0;

$ref = new ReflectionParameter($funcName, $argNumber);

pre($ref);
pre($ref->getClass()); 
```

我在 stackoverflow 上发现的另一个问题可能是您问题的更好答案：[PHP Reflection - Get Method Parameter Type As String](https://stackoverflow.com/questions/4513867/php-reflection-get-method-parameter-type-as-string)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T09:06:57.973

他们确实在使用`Reflection`，特别是[在 ControllerResolver 类](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/Controller/ControllerResolver.php#L100)中。

如果您让我简化为仅包含一种情况`Closure`且仅包含对象类型参数：

```
$availableArguments = array($a, new B(), $c);
$arguments = array();
$reflection = new \ReflectionFunction($callback);  // $callback is a Closure
foreach ($reflection->getParameters() as $param) {
    if ($paramClass = $param->getClass()) {
        foreach ($availableArguments as $proposedArgument) {
            if ($paramClass->isInstance($proposedArgument)) {
                $arguments[] = $proposedArgument;
                break;
            }
        }
    }
}
call_user_func_array($callback, $arguments); 
```

# android - Android - 在 service.class 中识别 HOME 按钮按下

> ID：13967994
> 
> 赞同：1
> 
> 时间：2012-12-20T08:28:20.013
> 
> 标签：android, android-service, android-homebutton

我正在开发一个永久的主屏幕覆盖对话框，因为在按下主页按钮后服务启动活动时有 5 秒的延迟，我也被迫将我的活动代码放入服务中。我的应用程序运行良好，但当用户按下主页或返回按钮时，覆盖仍保留在屏幕上。有什么方法可以检测用户是否在我可以调用的服务.class 中按下主页或返回`selfStop()`并从屏幕上删除视图？在一个活动中，我可以使用 onStop 检查是否按下了主页按钮，但由于`onStop()`服务中没有我被卡住了。

有什么方法可以让主页按钮按预期做出反应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-19T07:23:05.283

移动返回和主页按钮在服务类中运行良好。

```
public class MyFooterService extends Service{
View myview;
WindowManager wm;
FrameLayout wrapper;
public MyFooterService() {

}
@Override
public void onCreate() {
Log.d(TAG, "onCreate called");
LayoutInflater li = (LayoutInflater) 
getSystemService(LAYOUT_INFLATER_SERVICE);
wm = (WindowManager) getSystemService(WINDOW_SERVICE);
final WindowManager.LayoutParams params = new 
WindowManager.LayoutParams(
        WindowManager.LayoutParams.MATCH_PARENT,
        90,  //height of ur layout
        WindowManager.LayoutParams.TYPE_PHONE,
        0,
        PixelFormat.TRANSLUCENT);

params.gravity = Gravity.BOTTOM ;
params.x = 0;
params.y = 0;
wrapper = new FrameLayout(this) {
    @Override
    public boolean dispatchKeyEvent(KeyEvent event) {
        if (event.getKeyCode()==KeyEvent.KEYCODE_BACK) {
          // handle the back button code;
         return true;
        }
      return super.dispatchKeyEvent(event);
    }
   //if pressed home key,
  public void onCloseSystemDialogs(String reason) {
        //The Code Want to Perform.
        System.out.println("System dialog " + reason);
        if (reason.equals("homekey")) {
            // handle home button 
        }
    }

 };
 myview = li.inflate(R.layout.my_footer, wrapper);   // here set into your own layout

 wm.addView(myview, params);

   }
} 
```

# c# - 在 Datagrid C# 中显示列名

> ID：13967998
> 
> 赞同：0
> 
> 时间：2012-12-20T08:28:32.717
> 
> 标签：c#, winforms

`dataview`我有一个为 a创建 a 的代码`datagrid`：

```
 DataTable dt = new DataTable();
        DataRow dr;
        DataGridTableStyle tableStyle = new DataGridTableStyle();
        dataGrid1.TableStyles.Clear();
        tableStyle.MappingName = dt.TableName;
        DataGridTextBoxColumn columnStyle;
        dt.Columns.Add(new DataColumn(" Description - Code ", typeof(string)));
        dt.Columns.Add(new DataColumn("Found", typeof(string)));
        dt.Columns.Add(new DataColumn("Expected", typeof(string)));
        dt.Columns[0].MaxLength = 240;
        DataColumn dataColumn = dt.Columns[0];
        dataColumn.Caption=" Description - Code ";
        columnStyle = new DataGridTextBoxColumn();
        columnStyle.Width = 210;
        columnStyle.MappingName = dt.Columns[0].ColumnName;
        tableStyle.GridColumnStyles.Add(columnStyle);
        DataGridTextBoxColumn cs;
        cs = new DataGridTextBoxColumn();
        cs.MappingName = dt.Columns[1].ColumnName;
        cs.Width = 35;
        DataGridTextBoxColumn cs2;
        cs2 = new DataGridTextBoxColumn();           
        cs2.MappingName = dt.Columns[2].ColumnName;
        cs2.Width = 35;
        tableStyle.GridColumnStyles.Add(cs);
        tableStyle.GridColumnStyles.Add(cs2);
        dataGrid1.TableStyles.Add(tableStyle);
        for (int j = 0; j < distL.Count; j++)          
        {
            dr = dt.NewRow();
            dr[0] = distL[j];
            dr[1] = a[j] + 1;
            dr[2] = QuantExp[j];
            dt.Rows.Add(dr);
         }
        DataView dv = new DataView(dt).Table.DefaultView;
        dv.BeginInit();          
        dataGrid1.RowHeadersVisible = true;          
        return dv; 
```

我的问题是，当生成数据网格时，每列的名称在网格中不可见。有谁知道原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:33:09.400

好吧我找到了...

为了查看列名，您必须输入而不是“columnStyle.MappingName”“columnStyle.HeaderText”

# ios - MPMoviePlayerController setFullScreen 不工作 ios6

> ID：13967999
> 
> 赞同：0
> 
> 时间：2012-12-20T08:28:36.337
> 
> 标签：ios, ios6, mpmovieplayercontroller

我对 iOS 6 中的 MPMovieplayercontroller 有一个非常奇怪的问题。

我已经调试了几个小时，终于可以得出结论，iOS6 中的 setFullscreen:NO animated:NO 有问题。

我的项目也支持 6.0 以下的 iOS，并且它的工作方式应该如此。以下代码行的行为因 iOS 版本而异。

```
NSLog(@"player fullscreen 1 = %u", self.player.isFullscreen);
[self.player setFullscreen:NO animated:NO];
NSLog(@"player fullscreen 2 = %u", self.player.isFullscreen); 
```

player fullscreen 1 = 在 iOS 6 及更低版本中都打印 1，因为它是全屏的。

player fullscreen 2 = 在 iOS6 中打印 1，在其他版本中打印 0。这是一个问题，因为类中的逻辑取决于此，当我尝试关闭视图时，它会以一种奇怪的行为结束。

任何人都可以解决为什么 setfullscreen 在 iOS 6 中不起作用？

（在旁注中，当我启动播放器时，我调用 [self.player setFullscreen:YES animated:NO] 并且这样做会以全屏模式开始，但无法从全屏模式恢复......）

是的 - 我需要它以全屏模式启动！

还要确保我在 viewDidDisappear 和 viewWillDisappear 中什么都没有！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:03:12.417

我没有找到完美的解决方案，但我做了一个延迟为 0.0f 的选择器，这意味着它将在下一个周期运行。

我必须这样做，因为没有 !

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:41:14.940

在 iOS6 中，当您点击切换按钮进入全屏时，会调用 self 和 parent 控制器的 viewWillDisappear 和 viewDidDisAppear ，这在 iOS6 之前不是这种情况。在那里调试您的代码，如果它产生任何问题。