# StackOverflow 问答 12593000-12593999

# asp.net-mvc - Web API 模型绑定与 Multipart formdata

> ID：12593001
> 
> 赞同：25
> 
> 时间：2012-09-26T00:32:26.747
> 
> 标签：asp.net-mvc, asp.net-mvc-3, c#-4.0, asp.net-web-api

有没有办法能够获得模型绑定（或其他）以从**ASP.NET MVC Web API**中的多部分表单数据请求中给出模型？

我看到各种博客文章，但要么在文章和实际发布之间发生了变化，要么它们没有显示模型绑定工作。

这是一篇过时的帖子：[发送 HTML 表单数据](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2)

这就是：[Asynchronous File Upload using ASP.NET Web API](http://blogs.msdn.com/b/henrikn/archive/2012/03/01/file-upload-and-asp-net-web-api.aspx)

我在某个手动读取值的地方找到了这段代码（并做了一些修改）：

**模型：**

```
public class TestModel
{
    [Required]
    public byte[] Stream { get; set; }

    [Required]
    public string MimeType { get; set; }
} 
```

**控制器：**

```
 public HttpResponseMessage Post()
    {
        if (!Request.Content.IsMimeMultipartContent("form-data"))
        {
            throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
        }

        IEnumerable<HttpContent> parts = Request.Content.ReadAsMultipartAsync().Result.Contents;

        string mimeType;
        if (!parts.TryGetFormFieldValue("mimeType", out mimeType))
        {
            return Request.CreateResponse(HttpStatusCode.BadRequest);
        }

        var media = parts.ToArray()[1].ReadAsByteArrayAsync().Result;

        // create the model here
        var model = new TestModel()
            {
                MimeType = mimeType,
                Stream = media
            };
        // save the model or do something with it
        // repository.Save(model)

        return Request.CreateResponse(HttpStatusCode.OK);
    } 
```

**测试：**

```
[DeploymentItem("test_sound.aac")]
[TestMethod]
public void CanPostMultiPartData()
{
    var content = new MultipartFormDataContent { { new StringContent("audio/aac"),  "mimeType"}, new ByteArrayContent(File.ReadAllBytes("test_sound.aac")) };

    this.controller.Request = new HttpRequestMessage {Content = content};
    var response = this.controller.Post();

    Assert.AreEqual(response.StatusCode, HttpStatusCode.OK);
} 
```

这段代码基本上是脆弱的、不可维护的，而且不强制执行模型绑定或数据注释约束。

有一个更好的方法吗？

**更新：**我看过这篇[文章](http://byterot.blogspot.com/2012/04/aspnet-web-api-series-part-5.html)，这让我想到 - 我是否必须为我想要支持的每个模型编写一个新的格式化程序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T07:49:49.267

这里有一个用于文件上传的通用格式化程序的好例子[http://lonetechie.com/2012/09/23/web-api-generic-mediatypeformatter-for-file-upload/](http://lonetechie.com/2012/09/23/web-api-generic-mediatypeformatter-for-file-upload/)。如果我要让多个控制器接受文件上传，那么这将是我将采取的方法。

PS环顾四周，这似乎是您在控制器中上传的更好示例[http://www.strathweb.com/2012/08/a-guide-to-asynchronous-file-uploads-in-asp-net-web- api-rtm/](http://www.strathweb.com/2012/08/a-guide-to-asynchronous-file-uploads-in-asp-net-web-api-rtm/)

***更新***

**回复：Multipart 方法的有用性**，这在[此处](https://stackoverflow.com/questions/4007969/application-x-www-form-urlencoded-or-multipart-form-data)进行了介绍， 但实际上这归结为 multipart 方法可以很好地构建用于显着大小的二进制有效负载等...

**DEFAULT 模型绑定会起作用吗？**

WebApi 的标准/默认模型绑定器不是为应对您指定的模型而构建的，即混合简单类型和流和字节数组的模型（不是那么简单）......这是启发 lonetechie 的[文章的引述：](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)

> “简单类型”使用模型绑定。复杂类型使用格式化程序。“简单类型”包括：原语、TimeSpan、DateTime、Guid、Decimal、String 或具有从字符串转换的 TypeConverter 的东西

您在模型上使用字节数组以及从请求的流/内容创建它的需要将引导您改为使用格式化程序。

**分别发送模型和文件？**

就个人而言，我希望将文件上传与模型分开......也许不是你的选择......这样你会在使用 MultiPart 数据内容类型时发布到同一个控制器和路由，这将调用文件上传格式化程序当您使用 application/json 或 x-www-form-urlencoded 时，它将执行简单的类型模型绑定...两个 POST 对您来说可能是不可能的，但这是一个选项...

**自定义模型粘合剂？**

[我在自定义模型 binder](http://forums.asp.net/t/1770906.aspx/1)方面取得了一些小成功，你也许可以用这个做点什么......这可以成为通用的（通过一些适度的努力）并且可以在 binder 提供程序中全局注册以供重用......

这可能值得一玩？

```
public class Foo
{
    public byte[] Stream { get; set; }
    public string Bar { get; set; }
}

public class FoosController : ApiController
{

    public void Post([ModelBinder(typeof(FileModelBinder))] Foo foo)
    {
        //
    }
} 
```

自定义模型绑定器：

```
public class FileModelBinder : System.Web.Http.ModelBinding.IModelBinder
{
    public FileModelBinder()
    {

    }

    public bool BindModel(
        System.Web.Http.Controllers.HttpActionContext actionContext,
        System.Web.Http.ModelBinding.ModelBindingContext bindingContext)
    {
        if (actionContext.Request.Content.IsMimeMultipartContent())
        {
            var inputModel = new Foo();

            inputModel.Bar = "";  //From the actionContext.Request etc
            inputModel.Stream = actionContext.Request.Content.ReadAsByteArrayAsync()
                                            .Result;

            bindingContext.Model = inputModel;
            return true;
        }
        else
        {
            throw new HttpResponseException(actionContext.Request.CreateResponse(
             HttpStatusCode.NotAcceptable, "This request is not properly formatted"));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T14:19:24.823

@Mark Jones 链接到我的博客文章[http://lonetechie.com/2012/09/23/web-api-generic-mediatypeformatter-for-file-upload/](http://lonetechie.com/2012/09/23/web-api-generic-mediatypeformatter-for-file-upload/)，它把我带到了这里。我得考虑如何做你想做的事。

我相信，如果您将我的方法与 TryValidateProperty() 结合使用，您应该能够完成您需要的工作。我的方法将反序列化一个对象，但是它不处理任何验证。您可能需要使用反射来遍历对象的属性，然后在每个属性上手动调用 TryValidateProperty()。这种方法需要更多的动手，但我不知道该怎么做。

[http://msdn.microsoft.com/en-us/library/dd382181.aspx](http://msdn.microsoft.com/en-us/library/dd382181.aspx) [http://www.codeproject.com/Questions/310997/TryValidateProperty-not-work-with-generic-function](http://www.codeproject.com/Questions/310997/TryValidateProperty-not-work-with-generic-function)

编辑：有人问了这个问题，我决定编写代码只是为了确保它可以工作。这是我博客中带有验证检查的更新代码。

```
public class FileUpload<T>
{
    private readonly string _RawValue;

    public T Value { get; set; }
    public string FileName { get; set; }
    public string MediaType { get; set; }
    public byte[] Buffer { get; set; }

    public List<ValidationResult> ValidationResults = new List<ValidationResult>(); 

    public FileUpload(byte[] buffer, string mediaType, 
                      string fileName, string value)
    {
        Buffer = buffer;
        MediaType = mediaType;
        FileName = fileName.Replace("\"","");
        _RawValue = value;

        Value = JsonConvert.DeserializeObject<T>(_RawValue);

        foreach (PropertyInfo Property in Value.GetType().GetProperties())
        {
            var Results = new List<ValidationResult>();
            Validator.TryValidateProperty(Property.GetValue(Value),
                                          new ValidationContext(Value) 
                                          {MemberName = Property.Name}, Results);
            ValidationResults.AddRange(Results);
        }
    }

    public void Save(string path, int userId)
    {
        if (!Directory.Exists(path))
        {
            Directory.CreateDirectory(path);
        }

        var SafeFileName = Md5Hash.GetSaltedFileName(userId,FileName);
        var NewPath = Path.Combine(path, SafeFileName);

        if (File.Exists(NewPath))
        {
            File.Delete(NewPath);
        }

        File.WriteAllBytes(NewPath, Buffer);

        var Property = Value.GetType().GetProperty("FileName");
        Property.SetValue(Value, SafeFileName, null);
    }
} 
```

# android - Sencha Touch 2 - 旋转木马仅在构建后卡在第一个面板上

> ID：12593004
> 
> 赞同：3
> 
> 时间：2012-09-26T00:32:33.937
> 
> 标签：android, ios, extjs, sencha-touch-2, carousel

在我通过 sencha sdk 构建应用程序之前，我在面板中有一个轮播，可以正常显示和工作。然而，在我构建它之后，轮播仍然正确显示，但不再允许我在项目之间滑动。

```
Ext.define('SycsApp.view.HotOffers', {
    extend: 'Ext.Panel',
    requires: ['Ext.carousel.Carousel', 'Ext.TitleBar'],

    config: {
            layout: 'card',
            items: [
                {
                    docked: 'top',
                    xtype: 'titlebar',
                    ui: 'top-sub',
                    title: 'Hot Offers',
                },
                {
                    id: 'hotOffersCarousel',
                    xtype: 'carousel',
                    width: '100%',
                    items: [
                        {
                            html : 'Item 1',
                            style: 'background-color: #5E99CC'
                        },
                        {
                            html : 'Item 2',
                            style: 'background-color: #759E60'
                        },
                        {
                            html : 'Item 3'
                        }
                    ]
                }
            ]
    }
}); 
```

布局设置为卡片的原因是此视图是包含选项卡面板的一部分。在构建之后运行应用程序时，我也没有从控制台收到任何错误消息。

任何有关为什么会发生这种情况的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:05:24.210

该问题是由将其添加到主卡视图的方式引起的。

```
Ext.define('SycsApp.view.Main', {
extend: 'Ext.tab.Panel',
xtype: 'mainView',
requires:  ['SycsApp.view.HotOffers'],

config: {
    tabBarPosition: 'bottom',
    id: 'MainView',
    ui: 'bottom',
    layout: 'card',
    items: [
        {
            title: 'Hot Offers',
            layout: 'fit',
            iconCls: 'hotoffer',
            //items: [Ext.create('SycsApp.view.HotOffers')], // carousel doesn't work after build
            items:  [{xtype: 'hotOffersView'}] // carousel works after build
        },
        {
            title: 'All Savings',
            layout: 'fit',
            iconCls: 'list',
            items:  [{xtype: 'allSavingsMainView'}]
        }
    ]
} 
```

});

`xtype: 'hotOffersView'`必须添加到 Hot Offers 视图：

```
Ext.define('SycsApp.view.HotOffers', {
    extend: 'Ext.Panel',
    xtype: 'hotOffersView',
    requires: ['Ext.carousel.Carousel', 'Ext.TitleBar'],

    config: {
            layout: 'card',
            items: [
                {
                    docked: 'top',
                    xtype: 'titlebar',
                    ui: 'top-sub',
                    title: 'Hot Offers',
                },
                {
                    id: 'hotOffersCarousel',
                    xtype: 'carousel',
                    width: '100%',
                    items: [
                        {
                            html : 'Item 1',
                            style: 'background-color: #5E99CC'
                        },
                        {
                            html : 'Item 2',
                            style: 'background-color: #759E60'
                        },
                        {
                            html : 'Item 3'
                        }
                    ]
                }
            ]
    }
}); 
```

# python - 使用 twython 获取直接消息时“禁止”

> ID：12593005
> 
> 赞同：0
> 
> 时间：2012-09-26T00:32:41.617
> 
> 标签：python, twitter, twitter-oauth, twython

```
twitter = twython.Twython(oauth_token        = oauth_token,
                          oauth_token_secret = oauth_secret,
                          app_key            = oauth_consumer_key,
                          app_secret         = oauth_consumer_secret)
twitter.getDirectMessages()

TwythonError: 'Forbidden: The request is understood, but it has been refused. An accompanying error message will explain why. This code is used when requests are being denied due to update limits. -- An error occurred processing your request.' 
```

我正在使用 dev.twitter.com 上我的应用程序页面上“详细信息”选项卡下显示的令牌、机密和密钥。我有点担心 twython 将其称为 app_key，而 twitter 将其称为 consumer_key。也许我把事情弄糊涂了/倒退了。

其他调用，如 twitter.getFriendsIDs() 成功。

# r - 使用 predict 查找非线性模型的值

> ID：12593006
> 
> 赞同：6
> 
> 时间：2012-09-26T00:32:45.230
> 
> 标签：r, lm

我正在尝试下一个代码来尝试查看 predict 是否可以帮助我找到 2 阶多项式的因变量的值，在这种情况下很明显 y=x^2：

```
x <- c(1, 2, 3, 4, 5 , 6)
y <- c(1, 4, 9, 16, 25, 36)
mypol <- lm(y ~ poly(x, 2, raw=TRUE))

> mypol

Call:
lm(formula = y ~ poly(x, 2, raw = TRUE))

Coefficients:
            (Intercept)  poly(x, 2, raw = TRUE)1  poly(x, 2, raw = TRUE)2  
                      0                        0                        1 
```

如果我试图找到 x=7 的值，我会得到：

```
> predict(mypol, 7)
Error in eval(predvars, data, env) : not that many frames on the stack 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-26T00:36:19.290

如果您阅读 的帮助`predict.lm`，您会发现它需要许多参数，包括`newdata`

> *newdata* -- 一个可选的数据框，用于查找用于预测的变量。如果省略，则使用拟合值。

```
predict(mypol, newdata = data.frame(x=7)) 
```

# java - 用Java构建网站下载器的数据结构

> ID：12593008
> 
> 赞同：0
> 
> 时间：2012-09-26T00:33:14.233
> 
> 标签：java, data-structures, depth-first-search

我需要构建一个简化的网站下载器。它基本上会浏览网站中的链接，并递归地将 html 文件下载到本地目录。哪种数据结构最适合这个？我知道我必须实现某种深度优先搜索算法，核心 Java 中是否有任何数据结构库适合我的任务并且会减少我的编码量？（我对 Java 很陌生）谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T00:58:26.277

> 我需要构建一个简化的网站下载器。它基本上会浏览网站中的链接，并递归地将 html 文件下载到本地目录。

存在许多用于执行此操作的命令行工具和图形界面工具，例如[wget](https://www.gnu.org/software/wget/)，但如果您坚持自己执行此操作，请继续阅读。

> 哪种数据结构最适合这个？我知道我必须实现某种深度优先搜索算法，核心 Java 中是否有任何数据结构库适合我的任务并且会减少我的编码量？（我对 Java 很陌生）谢谢！

数据结构和算法是两个不同的东西。哪种数据结构和算法最适合您的目的取决于您的数据规模和其他因素。如果这是一个用于抓取少量链接的小型应用程序，您可能希望使用递归方法下载每个页面并解析页面以获取链接以供下次下载。

对于大型网络爬虫，您可能想看看[MapReduce](https://en.wikipedia.org/wiki/MapReduce)和一些用于存储数据并同时下载数据的分布式方法。

一些可能有用的工具是：

1.  Apache常用IO，[FileUitls.copyURLToFile](https://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#copyURLToFile%28java.net.URL,%20java.io.File%29)函数
2.  Apache常见[的http-client](https://hc.apache.org/httpclient-3.x/)
3.  用于解析 HTML 的[Jsoup](http://jsoup.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T01:01:37.100

除了其他建议之外，您可能还想查看[ExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)和[Java Concurrency](http://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html)，因为您可能希望对下载进行线程化以使其更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T00:37:46.920

我认为以下两种方法可以帮助您..您要做的是，提供一个 String 链接数组，它将下载根目录中的所有页面。好的，如果您只想下载页面，此代码可以部分帮助您。

```
 public static void downloadPage(String[] pageLink) {
URL url;
InputStream is = null;
DataInputStream dis;
String line;
StringBuilder builder = new StringBuilder();
builder.append("");

try {
for (int i = 0; i < pageLink.length; i++) {
url = new URL(pageLink[i]);
is = url.openStream();
dis = new DataInputStream(new BufferedInputStream(is));

while ((line = dis.readLine()) != null) {
builder.append(line + "\n");
}
savePage(i + ".html", builder.toString());
builder.setLength(0);
}
} catch (MalformedURLException mue) {
mue.printStackTrace();
} catch (IOException ioe) {
ioe.printStackTrace();
} finally {
try {
is.close();
} catch (IOException ioe) {
}
}
}

public static void savePage(String fileName, String text) {
PrintStream out = null;
try {
out = new PrintStream(new FileOutputStream(fileName));
out.print(text);
} catch (FileNotFoundException e) {
e.printStackTrace();
} finally {
if (out != null)
out.close();
}
} 
```

# php - 增加 Google App Engine 中的执行时间限制

> ID：12593014
> 
> 赞同：3
> 
> 时间：2012-09-26T00:34:18.267
> 
> 标签：php, google-app-engine

我正在使用 querecus 在 Google App Engine 中使用 PHP。使用它时出现超时错误，因为它有很多文件要处理。

我试过

```
ini_set('max_execution_time', 3000); 
```

我试图通过 PHP 禁用执行时间限制，但都失败了。

由于这个原因，我在应用程序引擎上收到服务器错误，有没有其他方法可以在 GAE 中禁用超时？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T07:33:49.880

脚本执行时间受GAE环境限制，无法更改。

前端请求限制为 60 秒，cron/任务处理程序限制为 600 秒。

您也可以使用后端，[https](https://developers.google.com/appengine/docs/java/config/backends) ://developers.google.com/appengine/docs/java/config/backends （编辑：后端现在是一个已弃用的选项）

后端服务器没有执行查询的时间限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T03:23:29.857

没有前端。

您可能需要在[后端](https://developers.google.com/appengine/docs/java/backends/overview)运行 querecus 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-11T08:17:48.637

长时间运行的任务可以与任务队列一起运行。 [https://cloud.google.com/appengine/docs/standard/php/taskqueue/](https://cloud.google.com/appengine/docs/standard/php/taskqueue/)

> 由于任务是作为针对服务的 App Engine 请求执行的，因此它们有严格的截止日期。自动伸缩服务处理的任务必须在十分钟内完成。由基本和手动扩展服务处理的任务最长可以运行 24 小时。

# c# - C# - 在 Select 子句中选择可编程属性

> ID：12593021
> 
> 赞同：2
> 
> 时间：2012-09-26T00:35:39.353
> 
> 标签：c#, linq, generics, iqueryable

请原谅我在问这个问题时的无知，因为我还在学习 NHibernate 和 Linq。我做了一些搜索，但我不明白如何或是否可以解决我的问题

我有以下代码块：

```
// this function searches the database's table for a single object that matches the 'Name' property with 'objectName'
public static Object Read<T>(string objectName)
{
    using (ISession session = NHibernateHelper.OpenSession())
    {
        IQueryable<T> objectList = session.Query<T>(); // pull (query) all the objects from the table in the database
        int count = objectList.Count(); // return the number of objects in the table
        // alternative: int count = makeList.Count<T>();

        IQueryable<T> objectQuery = null; // create a reference for our queryable list of objects
        object foundObject = null; // create an object reference for our found object

        if (count > 0)
        {
            // give me all objects that have a name that matches 'objectName' and store them in 'objectQuery'
            objectQuery = (from obj in objectList where obj.Name == objectName select obj);

            // make sure that 'objectQuery' has only one object in it
            try
            {
                foundObject = objectQuery.Single();
            }
            catch
            {
                return null;
            }

            // output some information to the console (output screen)
            Console.WriteLine("Read Make: " + foundObject.ToString());
        }
        // pass the reference of the found object on to whoever asked for it
        return foundObject;
    }
} 
```

除了一行之外，这一切都很好： `objectQuery = (from obj in objectList where obj.Name == objectName select obj);`

这里的问题是我要求一个未知对象的“名称”属性，这不仅是不可能的，而且是错误的代码。

**我在这里真正想做的是指定我正在寻找具有属于 T 型对象的属性的项目。**

有接盘侠吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T00:49:19.187

问题是您正在编写一个泛型方法，这意味着它将接受任何类型 T。但实际上，当您编写时：

```
where obj.Name == objectName 
```

您期待特定类型，或实现特定接口的类型，或派生自特定基类。

您的方法应该看起来更像：

```
public static T Read<T>(string objectName)
where T : ISomeInterface 
```

请注意，我还将返回类型从 Object 更改为 T，这对这个方法的调用者更加友好，并且避免了他们将 Object 强制转换为 T 的需要。

# c# - 使用自定义类持久化应用数据

> ID：12593027
> 
> 赞同：1
> 
> 时间：2012-09-26T00:36:21.677
> 
> 标签：c#, wpf, serialization, windows-8, data-persistence

我正在创建一个 Windows 8 应用程序，它需要包含两种主要类型的数据 -`List<Project>`和`List<User>`，其中`Project`和`User`是包含不同类型数据（包括`List`其他对象等）的数据模型。

我之前一直在制作 Windows Phone 应用程序，我只是在类似的场景中使用应用程序设置来存储数据。所以我希望这也适用于 Windows 8。

我选择使用`ApplicationData.Current.LocalSettings`-structure 来保存我的应用程序数据。但是，每当我尝试保存数据时，都会收到此类错误：

> WinRT 信息：尝试序列化要写入应用程序数据存储的值时出错附加信息：不支持此类型的数据。

`[DataContract]`如果有任何区别，模型会标有属性。

据我[了解 Microsoft](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx)，只能以这种方式保存标准数据类型（如布尔值、字符串等）。它是否正确？

如果是这样，我该如何保存以这种方式结构化的数据？

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T02:26:04.130

复杂的类型会引起一些悲伤，我无法确认这是不可能的，但还有其他选择。

在我想在没有数据库引擎开销的情况下存储应用程序数据的情况下，我使用序列化。根据您的类型的组成（归结为简单的数据类型并具有公共 getter/setter），您可以使用 XML 序列化和/或二进制序列化。

在能够方便地查看（编辑）应用程序范围之外的数据的情况下，XML 序列化可能更可取。（调试等）但是，除非您选择手动编码自定义序列化程序，否则它会对数据施加更多限制。二进制序列化更加灵活，并结合压缩和加密为您提供了更多紧凑/伪装/安全的数据存储选项。（如果使用，压缩/解压缩和加密会花费一些额外的时间。）

不幸的是，二进制文件不太适合将某些内容粘贴到本地应用程序数据中，而无需先将其转换为 Base64 字符串。（导致潜在的巨大文本块）通常使用序列化选项，我会考虑将文件保存在用户具有足够权限的指定文件夹中。

# android - MediaPlayer - 从连接状态更改恢复

> ID：12593032
> 
> 赞同：0
> 
> 时间：2012-09-26T00:36:51.443
> 
> 标签：android, android-mediaplayer

假设如下：

1.  应用程序将 MediaPlayer 数据源设置为远程 URL。（http://example.com/podcast.mp3）。
2.  MediaPlayer 开始通过 3G 流式传输 mp3。它缓冲的数据比正在播放的数据多一点，以确保缓冲没有暂停。
3.  设备短暂失去连接。MediaPlayer 已流式传输 40% 的文件，并缓冲了 50% 的文件。
4.  设备通过 WIFI 或 3G 重新连接。
5.  MediaPlayer 目前没有，据我所知继续缓冲 mp3。
6.  一旦媒体播放器达到 50%，它就会停止。

不幸的是，如果不使用代理，就不可能同时下载和流式传输 MP3（或者是吗？）。话虽如此，一旦它达到停顿点，是否可以通过新连接继续播放 mp3（如果可能，无缝连接？）。是否可以查看缓冲了多少 mp3？是否有可能，一旦重新建立连接，创建一个新的 MediaPlayer 连接并从第一个连接“切换”播放到下一个连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:06:01.080

我不能回答你所有的问题，只是把我认为我知道的东西放在这里。

> 是否可以查看缓冲了多少 mp3？

添加 setOnBufferingUpdateListener 监听器，在这个方法中你可以知道缓冲了多少百分比。

```
public void onBufferingUpdate(MediaPlayer mp, int percent) {
    Log.i(TAG, "onBufferingUpdate - percent=" + percent);

} 
```

以上内容适用于某些流，但不适用于其他流。我仍在试图找出原因。

# javascript - 替代 window.load

> ID：12593033
> 
> 赞同：2
> 
> 时间：2012-09-26T00:36:55.300
> 
> 标签：javascript, jquery, onload

我有一个 Ajax 页面，其中包含一些预加载的大图像。我觉得需要显示一个带有加载消息的 div，然后在加载所有图像时将其淡出。目前我使用这个代码：

```
$(function () {

    $(window).load(function () {
        $('#images-loading').css({
            visibility: 'hidden'
        })
            .fadeTo(200, function () {
        });
    });

}); 
```

而 HTML 只是简单地放在页面中`<div id="images-loading"></div>`虽然，它不起作用，我也不完全明白为什么。通过不工作，我的意思是，它不会淡出。它只剩下了。我必须说脚本是放置在实际的 ajax 内容本身中，但只有在页面刷新时才会触发。我缺乏自己解决这个问题的经验，所以我很感激任何建议或一些我可以尝试的替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:42:22.867

如果您想在本地检查图像加载，您可以遍历所有`img`元素并检查它们的`load`事件或使用诸如[waitForImages 之](https://github.com/alexanderdickson/waitForImages)类的插件（免责声明：由我编写）。

在成功回调中，只需执行...

```
$imagesLoading = $('#images-loading');

$imagesLoading.show();

$("#container").waitForImages(function() {
    $imagesLoading.fadeOut(200);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T01:13:32.453

目前你做错了一些小事：

```
/// this first line basically says run my contents when the DOM is ready
$(function () {
  /// this second line says run my contents when the window is fully loaded
  /// but you are enabling this only after the DOM has loaded. Depending on
  /// the browser these two events can fire in either order so you may find
  /// situations where nothing would happen.
  $(window).load(function () {
    /// then you hide your image div
    $('#images-loading').css({
        visibility: 'hidden'
    })
    /// but then ask it to fade in
        .fadeTo(200, function () {
    });
  });
}); 
```

编写上述内容的更好方法如下：

```
/// once the page has fully loaded - i.e. everything including
/// images is ready - then hide our loading message. Set this
/// listener first as it could fire at any time.
$(window).load(function () {
  $('#images-loading').stop().fadeOut(200);
});

/// as soon as the DOM is ready, show our loading message
/// the DOM event should fire before window load
$(function(){
  /// if you are learning it is far better to name your functions
  /// and then reference them where they are needed. It makes things
  /// easier to read.
  function whenFadeIsComplete(){
    alert('fade in complete');
  }
  /// rather than hide with setting style directly, use jQuery's own hide 
  /// function. Better still, use a CSS class directly on your #images-loading
  /// element that implements `display:none;` or `opacity:0;` - this will 
  /// render more quickly than JavaScript and mean you avoid your 
  /// loading div flickering into view before the fade in starts.
  $('#images-loading').hide().fadeTo(200, whenFadeIsComplete);
}) 
```

如果您尝试上述方法，它可能会解决您的问题，因为它仅在您强制刷新页面时才有效。但是，您可能会发现，如果图像被缓存在浏览器中，您将看不到加载消息*（因为页面加载太快）* .. 强制浏览器刷新将清除缓存*（在大多数浏览器中）*并给出您的消息是时候再次展示了。

# javascript - 克隆 javascript 事件对象

> ID：12593035
> 
> 赞同：17
> 
> 时间：2012-09-24T22:10:08.547
> 
> 标签：javascript, dom, dom-events

有人知道如何对原生 javascript 事件对象进行深度复制/克隆吗？我知道我可以创建一个新的事件对象并手动设置适当的属性以匹配原始事件，但如果有一种方法来克隆它会容易得多。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-09-23T21:28:20.167

上面的代码不会正确复制任何 getter/setter。尝试：

```
function cloneEvent(e) {
    if (e===undefined || e===null) return undefined;
    function ClonedEvent() {};  
    let clone=new ClonedEvent();
    for (let p in e) {
        let d=Object.getOwnPropertyDescriptor(e, p);
        if (d && (d.get || d.set)) Object.defineProperty(clone, p, d); else clone[p] = e[p];
    }
    Object.setPrototypeOf(clone, e);
    return clone;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-24T22:29:12.183

出于您的目的，我只是将其作为新对象构造函数的原型并覆盖您想要更改的那些。由于循环引用问题，JS 中的克隆变得混乱，因此它可能不是您希望的快速而肮脏的解决方案。

```
function cloneEventObj(eventObj, overrideObj){

   if(!overrideObj){ overrideObj = {}; }

   function EventCloneFactory(overProps){
       for(var x in overProps){
           this[x] = overProps[x];
       }
    }

    EventCloneFactory.prototype = eventObj;

    return new EventCloneFactory(overrideObj);

}

//So add your override properties via an object
$el.click(function(e){
    var newEventObj = cloneEventObj(
        e,
        { target:document.body }
    );
    doSomething(newEventObj);
});

//or just stick 'em on manually after spitting the object out
/*...
var newEventObj = cloneEventObj(e);
newEventObj.target = document.body
...*/ 
```

在这种情况下，“克隆”对象是新对象的原型对象。'这。' 在原型对象之前检查属性，因此这些将被覆盖。或者您可以在构建对象后附加属性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-10-07T21:50:01.387

## 选项 1：通过修改创建新事件

您可以使用[代理](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy)`Object.assign`创建一个-alike并构建一个新事件而不修改原始事件

例子：

```
function EventModifier (evt, obj) {
  const proxy = new Proxy(evt, {
    get: (target, prop) => obj[prop] || target[prop]
  })
  return new evt.constructor(evt.type, proxy)
}

onclick = evt => {
  evt = new EventModifier(evt, { altKey: true })
  // Dispatch the new event on something else
  console.log('clicked with alt key:', evt.altKey) // always true
}
```

这样，您将使用与原始事件相同的选项，包括气泡、可取消、键修饰符等（它是否不包含任何目标，因为您打算将修改后的事件调度到其他东西上）

## 选项 2：定义新属性

保留原始事件但使用`Object.defineProperty`您可以使用 defineProperties 覆盖一个键，如果您想添加的不仅仅是一个。

```
onclick = evt => {
  Object.defineProperty(evt, 'target', { value: document.querySelector('script') })
  console.log('target:', evt.target)
}
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-07-04T09:40:32.230

受 Kofifus 回答的启发，我就是这样做的

```
function cloneEvent(type, event) {
    var evt = new Event(type);
    return Object.setPrototypeOf(evt,event);
} 
```

要不就

```
function cloneEvent(event){
  return Object.create(event)
} 
```

它返回一个新对象，可以保护您免于编辑原始对象。但让您阅读和编辑该属性。谢谢`js prototype chain`

# php - PHPStorm - 如何设置实时编辑

> ID：12593037
> 
> 赞同：2
> 
> 时间：2012-09-26T00:37:40.987
> 
> 标签：php, phpstorm

我刚得到 PHPStorm，无法进行实时编辑（又名：自动刷新）功能。我已经设置并运行了 xdebug。

我试过谷歌搜索：[https ://www.google.com/search?q=phpstorm+live+edit+guide](https://www.google.com/search?q=phpstorm+live+edit+guide)

并发现很少有帮助...如何设置实时编辑并确保其正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:56:18.177

这两个链接可能会有所帮助：

*   [http://www.jetbrains.com/phpstorm/webhelp/live-editing-of-html-css-and-javascript.html](http://www.jetbrains.com/phpstorm/webhelp/live-editing-of-html-css-and-javascript.html)

和

*   [http://confluence.jetbrains.net/display/WI/How+to+install+Chrome+extension](http://confluence.jetbrains.net/display/WI/How+to+install+Chrome+extension)

# ruby-on-rails - 如何消除此数据库设计异常？

> ID：12593046
> 
> 赞同：1
> 
> 时间：2012-09-26T00:38:37.147
> 
> 标签：ruby-on-rails, ruby, database-design

我正在为我的项目设计一个数据库模式，我似乎被一个奇怪的视觉障碍所困（从某种意义上说，我以前从未遇到过这个问题，因为它几乎太容易解决，除非在这种特殊情况下 -为了我）

我有一个实体`homes`，可以有各种`facilities`。
所以，我已经声明了一个模型：`FacilitySet`它看起来像：

```
id, home_id, parking, electricity 
```

如您所见，`facility_sets`表格的每一行对应一个 Home。

但是，在我看来，如果我可以说：a home has_many facility，而不是 home has_one facility_set，这对我来说更有意义。这也提供了一个优势，我可以简单地说：@home.facilities，而不是@home.facility_set

真正的问题是我无法理解如何`facilities`在数据库中构造表，因此我可以简单地声明：

```
class Home << ActiveRecord::Base
  has_many :facilities
  ..
end 
```

和访问设施，如：`@home.facilities`

我目前正在做：

```
class Home << ActiveRecord::Base
  has_one :facility_set
  ..
end 
```

和访问设施，如：`@home.facility_set`，这真的让我觉得我做错了什么！:~)

这里是清晨，我真的很感激`ray-of-ho(m)e`我。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:55:24.237

```
class InitSchema < ActiveRecord::Migration
  def change
    create_table :homes do |t|
      t.integer :id, null: false
      # ...
    end

    create_table :facilities do |t|
      t.integer :id, null: false
      t.integer :home_id, null: false
      t.string :name, null: false
      t.string :value, null: false
    end
  end
end

class Home < ActiveRecord::Base
  has_many :facilities
end

class Facility < ActiveRecord::Base
  belongs_to :home
end 
```

现在使用设施名称和值字段来存储诸如停车、电力等内容。您可能希望创建一个具有多个设施的 FacilityType 类，并在其中保留停车、电力等。

# java - 有没有办法动态创建对象？

> ID：12593047
> 
> 赞同：0
> 
> 时间：2012-09-26T00:38:44.310
> 
> 标签：java, arrays, object, 2d

我有一个作业问题来计算不同航空公司的延误航班。我正在读取 CSV 文件，并为包含总航班和延误航班的“承运人”创建了一个类。由于有许多载体（大约 10 个），我如何在从 CSV（或二维数组）中读取载体对象时创建它们。

代替

```
carrier UA = new carrier("Us Airways", 100, 50);
carrier Delta = new carrier("Delta", 100, 50); 
```

并对所有对象进行硬编码。

现在 CSV 数据在一个二维数组中，非面向对象的代码如下。

```
 public static void main (String [] args) throws Exception{

    CSVReader reader = new CSVReader(new FileReader("delayed.csv"));
    String [] nextLine;

    String[][] flightData = new String[221][3];
    int i=0;    
        while ((nextLine = reader.readNext()) != null) {

            for(int r = 0; r<2; r++){
            flightData[i][0] = nextLine[1];
            flightData[i][1] = nextLine[6];
            flightData[i][2] = nextLine[7];
            }
        i++;
        //System.out.println("Carrier: " + nextLine[1] + "\t\tTotal: " + nextLine[6] + "\t\tDelayed: " + nextLine[7] + "");
        }
        while(flightData != null){
        carrier 
        }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:47:26.223

```
List<Carrier> listCarrier = new ArrayList<Carrier>();      

while ((nextLine = reader.readNext()) != null) {

    listCarrier.add(new Carrier(nextLine[1], Integer.valueOf(nextLine[6]), Integer.valueOf(nextLine[7])));

} 
```

请注意，类 Carrier 应以大写字母开头。

如果要避免重复，可以使用 HashMap 代替 ArrayList，如下所示：

```
Map<String, Carrier> listCarrier = new HashMap<String, Carrier>(); 
```

要插入新记录，请使用：

```
Carrier carrier = new Carrier(nextLine[1], Integer.valueOf(nextLine[6]), Integer.valueOf(nextLine[7]));
listCarrier .put(nextLine[1],carrier );
//Here the key is the carrier name, and the value is the carrier object 
```

如果您有重复的运营商名称相同但值不同，则只有最后一个将保留在 HashMap 中。

要从列表中获取运营商，请使用：

```
listCarrier.get("carrier_name") 
```

如果可用，这将从地图中返回名称为“carrier_name”的运营商。

# c# - 知道如何获得海报或大报的背景颜色吗？

> ID：12593058
> 
> 赞同：0
> 
> 时间：2012-09-26T00:40:55.467
> 
> 标签：c#, .net, image-processing, opencv, emgucv

在我的项目中，我使用 EMGU 库。

我需要确定城市海报或大报的背景颜色。

正如我所见，海报或大报的背景颜色是主要颜色。

我的问题是 Emgu 是否有任何功能可以返回（在某些现有模型 BGR、HSL ...）主要颜色或有关图像中颜色的一些有用结果，如果没有，知道如何有效地实现我的目标吗？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:55:48.277

获取图像的[直方图](https://stackoverflow.com/questions/4905893/creating-histogram-using-emgu-cv-c-sharp)。出现最多的颜色将是背景颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T02:53:10.207

我认为您必须首先定义主要颜色是什么。

你的意思是照明颜色、平均颜色、模式，甚至是中值？

后三个很容易计算，但第一个不是。

如果您认为背景颜色是您想要的颜色。您首先需要找到一种方法来使用一些掩蔽技术来隔离该背景。然后您可以计算该背景中主要颜色的像素的平均值、众数或中值。

# c - 在枚举中定义“未知”或“NULL”值

> ID：12593061
> 
> 赞同：13
> 
> 时间：2012-09-26T00:41:22.067
> 
> 标签：c, enums, null, default, typedef

我正在定义一个自定义 typedef 元素，如下所示....

```
typedef enum  {
    Ar,
    Cl,
    F,
    He,
    H,
    Kr,
    Ne,
    N,
    O,
    Rn,
    Xe
} Element; 
```

我想检查尚未设置元素类型的变量（基本上只是检查 NULL 值）。据我所知，唯一的方法是添加一条额外的线

```
.... {
      unknown = 0,
      Ar,
      F,
...etc 
```

我是对的还是有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-26T00:47:48.930

是的，您应该包含一个“未知”值。基本上 an`enum`只是一个`int`. 如果您没有在声明中定义任何常量（如在您的第一个代码示例中），则第一个选项将设置为`0`默认值。

另一种方法可能是将第一个选项设置为`1`. 这样`0`就不会定义值，您可以手动检查。

```
typedef enum {
    Ar = 1,
    Cl,
    F,
    He,
    H,
    Kr,
    Ne,
    N,
    O,
    Rn,
    Xe
} Element;

if (myElement) {  // same as  if (myElement != 0)
    // Defined
} else {
    // Undefined
} 
```

但我会选择明确定义的“未知”值。

# wso2 - WSO2 esb admin UI 不保存数据库查询高级属性，如获取大小

> ID：12593062
> 
> 赞同：0
> 
> 时间：2012-09-26T00:41:26.183
> 
> 标签：wso2, wso2esb, wso2carbon

我在 Mac OSX 10.7.8 上使用 WSO2 4.0.3。我启用了数据服务服务器功能（3.2.2）

开发查询时，我无法在管理 UI 中保存高级属性。

您能否向我发送包含提取大小等的示例 XML dbs 文件？谢谢阿比吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T02:13:59.493

在这里你可以找到一个样本。

```
<data name="Test">
   <config id="test">
      <property name="org.wso2.ws.dataservice.driver">com.mysql.jdbc.Driver</property>
      <property name="org.wso2.ws.dataservice.protocol">jdbc:mysql://localhost:3306/test</property>
      <property name="org.wso2.ws.dataservice.user">root</property>
      <property name="org.wso2.ws.dataservice.password">root</property>
      <property name="org.wso2.ws.dataservice.transaction_isolation">TRANSACTION_READ_COMMITTED</property>
      <property name="org.wso2.ws.dataservice.initial_size">100</property>
      <property name="org.wso2.ws.dataservice.maxpoolsize">10</property>
      <property name="org.wso2.ws.dataservice.max_idle">1000</property>
      <property name="org.wso2.ws.dataservice.minpoolsize">5</property>
      <property name="org.wso2.ws.dataservice.max_wait">200</property>
      <property name="org.wso2.ws.dataservice.validation_query">select 1</property>
      <property name="org.wso2.ws.dataservice.test_on_return">true</property>
      <property name="org.wso2.ws.dataservice.time_between_eviction_runs_mills">50</property>
      <property name="org.wso2.ws.dataservice.num_test_per_eviction_run">10</property>
      <property name="org.wso2.ws.dataservice.min_evictable_idle_time_millis">8</property>
      <property name="org.wso2.ws.dataservice.remove_abandoned">true</property>
      <property name="org.wso2.ws.dataservice.remove_abandoned_timeout">4</property>
      <property name="org.wso2.ws.dataservice.log_abandoned">true</property>
   </config>
   <query id="q1" useConfig="test">
      <sql>select * from table1</sql>
      <properties>
         <property name="org.wso2.ws.dataservice.query_timeout">100</property>
         <property name="org.wso2.ws.dataservice.fetch_direction">forward</property>
         <property name="org.wso2.ws.dataservice.force_stored_proc">true</property>
         <property name="org.wso2.ws.dataservice.force_jdbc_batch_requests">true</property>
         <property name="org.wso2.ws.dataservice.fetch_size">10</property>
         <property name="org.wso2.ws.dataservice.max_field_size">4000</property>
         <property name="org.wso2.ws.dataservice.max_rows">10</property>
      </properties>
      <result element="Element" rowName="result">
         <element name="column1" column="id" xsdType="xs:string" />
      </result>
   </query>
   <operation name="op1">
      <call-query href="q1" />
   </operation>
</data> 
```

# ios - 更改 UINavigationController 后退按钮的颜色

> ID：12593065
> 
> 赞同：2
> 
> 时间：2012-09-26T00:42:07.223
> 
> 标签：ios, uinavigationcontroller, uibarbuttonitem

我在试图弄清楚如何更改导航控制器上按钮的颜色时遇到问题。

以前我使用过以下内容：

```
[[UIBarButtonItem appearance] setTintColor:[UIColor colorWithRed:226/255.0 green:66/255.0 blue:66/255.0 alpha:0.0]]; 
```

这行得通，但是我添加了一个带有工具栏的新视图，并且工具栏按钮图像不会显示。如果我删除全局着色，工具栏项目显示得很好。

我尝试在视图的**viewDidLoad方法中设置****leftBarButtonItem**和**backBarButtonItem**的色调颜色，但是这两个属性似乎都为空。

 **我不想改变整个导航栏的颜色，只是按钮。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:55:17.253

是的，我只是将其发布为答案。您的 alpha 设置为 0。所以您基本上说的与 [UIColor clearColor] 相同。不确定它是如何为您的条形按钮项目提供色调的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-20T01:01:49.097

在swift中，可以通过以下命令完成：

```
if let navController = self.navigationController
{
    navController.navigationBar.tintColor = UIColor.whiteColor()
} 
```**

# django-templates - 通过视图通过电子邮件将用户添加到组（允许多个逗号分隔）

> ID：12593068
> 
> 赞同：1
> 
> 时间：2012-09-26T00:42:32.393
> 
> 标签：django-templates, django-views, django-users, django-permissions

我希望能够通过视图和模板表单将 Django 中的用户添加到用户创建的组中。创建组很容易，我只是无法创建一种将批量用户（如此类`email1@email.com, email2@email.com, email203920492@email.com`）添加到组的方法。如果用户存在于系统中，他们会收到一条消息加入，如果他们不存在，他们会收到一条消息，邀请他们加入网站和群组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:44:32.357

如果我明白你在问什么...

如果您有电子邮件列表，则只需遍历电子邮件列表并获取分配给每封电子邮件的用户：

```
for email in emails:
    try:
        user = User.objects.get(email=email)
    except User.DoesNotExist:
        # A user doesn't exist with that email address, so send the invitation email

    # The user exists, so send them an email with a link to a view that lets them join    the group 
```

在您看来，当他们访问链接时，您可以将当前登录的用户添加到组中，例如：

```
request.user.groups.add(group) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T23:33:35.667

这是一个部分答案——这会从模板中的电子邮件表单返回或创建用户（`form model`也在下面）。我仍然需要弄清楚如何通过电子邮件向他们发送邀请链接或“接受”群组链接。建议将不胜感激。

```
@login_required
def community(request):
    places = Community.objects.filter(manager=request.user).order_by('id')
    form = EmailAddForm(request.POST or None)

    if form.is_valid():
        emails = form.cleaned_data['emails'].split(',') # this allows you to enter multiple email addresses in the form and separated by comma
        for email in emails:
            try:
                user = User.objects.get(email=email)
            except User.DoesNotExist:
                user = User.objects.get_or_create(email=email, username=email)
        print user #to check that it's working in console

    return render_to_response('community.html', locals(), context_instance=RequestContext(request))

#forms.py
class EmailAddForm(forms.Form):
    emails = forms.CharField(widget=forms.Textarea) 
```

# matlab - 获取矩阵和列匹配

> ID：12593069
> 
> 赞同：0
> 
> 时间：2012-09-26T00:42:41.310
> 
> 标签：matlab, matrix

我有一些数据，我想从中获取一些信息。但是，我遇到了一些问题，我很乐意得到专家的帮助。

数据和一些信息：

```
A = [1 0 -1 2 0 1;0 2 1 0 1 -2;1 1 0 2 1 1]%matrix
B = [1 3]#rows 1 and 3 are rows for searching.
struc.names = ['blue', 'red', 'green', 'amber', 'grey','yellow']% a structure of column names.
required.names = {'blue', 'green', 'grey','yellow'}; % a structure of required column names 
```

我尝试获取以下 3 种类型的信息：

第一：获取并保存行子集的矩阵。

第二：与struc.names相比，我想获得一个与感兴趣的列（required.names）相对应的向量（填充1或0）

第三：对于第 1 行和第 3 行，当行元素不为零时，查找 struc.names 和 required_rows 之间的匹配项；还要根据匹配的数量安排结果输出。

问题1：

```
 code for getting matrix:
 struc.names = {'blue', 'red', 'green', 'amber', 'grey','yellow'};
 required_rows = [1 3];
 for k = 1:length(required_rows);
    % open file for writing
    fid =fopen('ouput.txt','w');
    idx(k,:) = A(required_rows(k),:);
    fprintf(fid,'%d \n',idx);#print matrix
 end; 
```

获得的输出：

```
 1 0 -1 2 0 1 1 1 0 2 1 1 
```

所需输出：

```
 1 0 -1 2 0 1 
 1 1 0 2 1 1 
```

问题 2：与 struc.names 比较时，获取 required.names = {'blue', 'green', 'grey','yellow'} 的列向量；

我想在如下向量中获取 1（存在列名）和 0（不存在列名）： [1 0 1 0 0 1]; 我不确定如何编写代码。

问题 3：当行元素非零时，查找 struc.names 和 required_rows 之间的匹配，然后获得根据匹配数排列的排序结果的代码。代码：

```
struc.names = ['blue', 'red', 'green', 'amber', 'grey','yellow']# a structure  of  column  names.
required.names = {'blue', 'green', 'grey','yellow'}; # a structure of required  column names
struc.names = {'blue', 'red', 'green', 'amber', 'grey','yellow'}
required_rows = [1 3];
% open file for writing, and Loop
fid=fopen('file.txt','w+');
for K = 1 : length(required_rows);
    idx = A(required_rows(K),:) ~= 0;
    if any(idx)
    struc.names = struc.names(idx)
    C = intersect(struc.names ,required_rows)       
    fprintf(fid, 'row A(%d,:) has the following matches:\n');
    fprintf(fid, '%s ', C{idx} );
    fprintf(fid, '\n');
    end
end
fclose(fid); 
```

所需的排序输出（根据匹配数）：

```
 row 3: blue red amber grey yellow
 row 1: blue green amber yellow 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:45:52.603

问题1。

```
A(required_rows,:)

ans =

 1     0    -1     2     0     1
 1     1     0     2     1     1 
```

问题 2\. 可以使用 intersect 在 struct.names 中查找 required.names。intersect 查找两个集合的公共元素。看看[帮助](http://www.mathworks.se/help/matlab/ref/intersect.html)。第二个参数返回 struct.names 中交集的索引。所以事实上 struct.names{match} 存在于 required.names 中。

```
v=zeros(1, numel(struct.names));
[~, match] = intersect(struct.names, required.names);
v(match)=1

v =

 1     0     1     0     1     1 
```

问题 3。

```
idx = A(required_rows,:) ~= 0;
[~,perm] = sort(sum(idx,2),'descend');
for i=1:length(perm)
    matches = struct.names(idx(perm(i), :));
    display(['Row ' num2str(required_rows(perm(i))) ' has the following matches: ' ...
    sprintf('"%s" ', matches{:})]);
end

Row 3 has the following matches: "blue" "red" "amber" "grey" "yellow" 
Row 1 has the following matches: "blue" "green" "amber" "yellow" 
```

要获得每行中匹配的百分比，您需要将匹配中的元素数除以 struct.names 中的元素数：

```
numel(matches)/numel(struct.names)*100 
```

# objective-c - Objective-C 属性，只暴露超类

> ID：12593075
> 
> 赞同：3
> 
> 时间：2012-09-26T00:43:48.603
> 
> 标签：objective-c, foundation

我在头文件的类中声明了一个属性；

```
@property (readonly) NSArray *pages 
```

这就是我希望它公开的方式。不过在内部，我将把它分配为 NSMutableArray，这样我就可以从中添加/删除东西。但要做到这一点，我每次都必须输入 cast 。有一个更好的方法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T00:51:24.223

你的方法真的很糟糕。如果您坚持使用动态内容公开可变数组，则修改您的 getter 以返回不可变副本，否则您将在快速枚举期间获得奇怪的副作用和突变异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T00:45:47.703

对此没有解决方案。您必须每次都进行投射，或使用不同的属性。这是第二种方法的示例：

```
@interface MyClass : NSObject
@property (nonatomic, strong, readonly) NSArray *pages;
-(void)addObject:(id)obj;
@end

@interface MyClass()
@property (nonatomic, strong, readwrite) NSMutableArray *mPages;
@end

@implementation MyClass
-(id) init {
    self = [super init]
    if (self){
        _mPages = [NSMutableArray array];
    }
    return self;
}
-(NSArray*)pages {
    return [NSArray arrayWithArray:self.mPages];
}
-(void)addObject:(id)obj {
    [self.mPages addObject:obj];
}
@end

int main(int argc, char *argv[]) {
    @autoreleasepool {
        MyClass *m = [MyClass new];
        [m addObject:@"x"];     // the collection is mutable
        NSLog(@"%@",[m pages]); // but only accessible as an immutable copy
    }
} 
```

如果您经常访问集合，这将是昂贵的，并且可能与内部可变集合不同步（在您迭代副本时可能会发生变异）。

复制可以避免返回伪装成不可变类（NSArray）的内部可变实例（NSMutableArray），但这会带来以下风险：

*   客户端可以转换为 mutable 并更改它。
*   内部副本可能会发生变异。如果您正在迭代，这将使应用程序崩溃，或者可能导致索引超出范围异常。

* * *

请注意，以下成语不能解决问题：

```
@interface MyClass : NSObject
@property (nonatomic, strong, readonly) NSArray *pages;
@end

@interface MyClass()
@property (nonatomic, strong, readwrite) NSMutableArray *pages;
@end 
```

这使您可以设置变量，但不能将其用作与接口中声明的类不同的类。换句话说，它迫使您在每次使用时都进行强制转换：

```
[(NSMutableArray*)pages addObject:@"x"]; 
```

# postgresql - Heroku 托管 PostgreSQL 和 PLV8

> ID：12593080
> 
> 赞同：3
> 
> 时间：2012-09-26T00:44:58.240
> 
> 标签：postgresql, heroku, postgresql-9.1, plv8

有谁知道 Heroku 是否支持 PLV8？我观看了 RailsConf 2012 的一个视频，Heroku 团队的一名成员在[这里](http://lanyrd.com/2012/railsconf/srhxg/)谈论如何将它与 hstore 一起使用，但我觉得这是他们为内部项目所做的。谷歌“heroku postgresql plv8”并没有真正出现。如果 Heroku 团队的某个人看到了这一点，最好在可能支持的情况下发布任何一般时间表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:04:17.820

我们目前不支持 PLV8，但 9.1 及更高版本的数据库完全支持 hstore。要开始使用它，您可以执行以下操作：

```
heroku pg:psql
create extension hstore; 
```

我们没有 PLV8 的即时时间表，但希望将来能够支持它。

# php - PHP 文件上传 - php.ini

> ID：12593081
> 
> 赞同：0
> 
> 时间：2012-09-26T00:45:10.787
> 
> 标签：php

我有一个正在上传图片的网站，我只是想问一下如何设置几个 php.ini 设置：

```
max_file_uploads (The maximum mumber of files that can be uploaded in 1 go). 
```

上面的设置是指一个用户会话可以上传的文件总数和一次的数量。例如：用户总共可以上传 8 张图片。如果我将其设置为 1 是否意味着一次 1 个图像或总共 1 个图像？将其设置为 8 是否有意义，或者我应该将其设置为更多的用户可以上传然后改变主意。

```
upload_tmp_dir      /custom/location    Change the location of where files are initally uploaded to 
```

这是否应该设置在文档根目录之外以供 php 上传？什么是典型位置？/var/php_images? 我正在使用 open_basedir，所以应该将这条路径包含在此处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:48:05.630

该`max_file_uploads`指令指定每个请求可以上传的最大文件数。PHP 不关心您的会话或任何事情。因此，如果您有一个包含 3 个上传输入的表单，并且您在服务器上只允许 1 个，并且您的用户发送的数量超过 1 个，那么他们将超过最大值。

`upload_tmp_dir`应该始终在您的文档根目录之外。此外，当您将文件移出此临时目录时，为了安全起见，请将其保留在 doc 根目录之外。不要以用户指定的名称命名文件。不要使用文件扩展名。保留原始名称、类型以及不在数据库中的内容。如果需要，使用 PHP 脚本在 Web 端检索它们。

# c# - 带有子类参数的 C# 覆盖方法

> ID：12593082
> 
> 赞同：9
> 
> 时间：2012-09-26T00:45:11.260
> 
> 标签：c#, overriding, subclass

我正在尝试实现这样的目标

```
public abstract class BaseEvent
{
    public abstract void Dispatch(IEventHandler handler);
}

public class MyEvent : BaseEvent
{
    public override void Dispatch(IMyEventHandler handler)
    {
        handler.OnMyEvent(this);
    }
}

public interface IEventHandler
{
}

public interface IMyEventHandler : IEventHandler
{
    void OnMyEvent(MyEvent e);
} 
```

问题是编译器抱怨说`MyEvent`没有实现`BaseEvent`，因为`Dispatch`它使用的是 an`IMyEventHandler`而不是`IEventHandler`. 我不想让`MyEvent.Dispatch`a`IEventHandler`然后将其转换为 a `IMyEventHandler`，因为我希望编译时检查以确保我没有做一些愚蠢的事情，比如传入一些其他类型的事件处理程序。我找到了一个可能的解决方案（如下），但我想知道是否有更好的方法来做到这一点。

```
public abstract class BaseEvent<H> where H : IEventHandler
{
    public abstract void Dispatch(H handler);
}

public class MyFirstEvent<H> : BaseEvent<H> where H : IMyFirstEventHandler
{
    public override void Dispatch(H handler)
    {
        handler.OnMyFirstEvent(this);
    }
}

public interface IEventHandler
{
}

public interface IMyFirstEventHandler : IEventHandler
{
    void OnMyFirstEvent<H>(MyFirstEvent<H> e) where H : IMyFirstEventHandler;
} 
```

谢谢，汤姆

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T00:50:15.123

我以前用过你的方法。

对我来说它看起来很坚固。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-26T00:52:48.190

MyEvent 更改抽象方法 Dispatch 的签名。所以你得到一个编译时错误。

跟随代码怎么样。

```
public class MyEvent : BaseEvent
{
    public override void Dispatch(IEventHandler handler)
    {
        if(!handler is IMyFirstEventHandler )throw new ArgumentException("message").
        ((IMyFirstEventHandler )handler).OnMyEvent(this);
    }
} 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-09-26T01:11:22.080

这似乎与[Help With Overriding and Inheritance](https://stackoverflow.com/questions/337598/help-with-overriding-and-inheritance)非常相似。如果你想重写一个方法，我很有信心你需要关键字'virtual'。

# c++ - 应用程序卡在构建/运行过程中

> ID：12593085
> 
> 赞同：1
> 
> 时间：2012-09-26T00:46:16.820
> 
> 标签：c++, netbeans

我正在使用 Netbeans 6.8 并尝试运行一个简单的应用程序，这是我的代码：

```
 #include <iostream>

    int main()
    {
        std::cout<< "Game Over!" << std::endl; // Displays "Game Over" Output
        return 0;
    } 
```

Netbeans 说没有错误，它可以很好地清理和构建，但是当我单击构建/运行时，它似乎卡住了。我真的去了超市，回来发现我的程序还没有运行。

任何关于问题可能是什么以及如何解决它的想法都会有很大帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:16:52.357

我怀疑这是程序造成的。尝试找到可执行文件并在命令行中运行，看看它是否挂起。

# html - w3 验证 html 错误

> ID：12593086
> 
> 赞同：0
> 
> 时间：2012-09-26T00:46:30.843
> 
> 标签：html, xhtml

我还是一个新手，我对这个错误的含义有点困惑。

```
 Line 30, Column 5: document type does not allow element "li" here; missing one of "ul", "ol" start-tag 
```

我一直收到这个错误，直到第 44 行

这个省略是什么意思？

```
 Line 54, Column 7: end tag for "div" omitted, but OMITTAG NO was specified 
```

以下是我的代码：（感谢有人能指导我

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" >
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content= "about" />
    <meta name="keywords" content="about" />
<title>About</title>
</head>  
    <body>
        <div id="container">
        <div id="inside">
        <div id="inside2">
        <h1>About</h1>
        <ul>
        <li>The Php version installed in mercury is <?php echo 'Current PHP version: ' . phpversion(); ?>.
        </li>
        <br />
        <li>The task I am not attempted is Task 5.
        </li>
        <br />
        <li>I am not exploring and implementing any special feature.</li>
        <br />
        <li>I have trouble mainly on Task 3 with validation.</li>
        <br />
        <li>Regarding with php, I want to gain more knowledge, I need to grasp deeper understanding on how everything works
        as there are a lot of things to remember and how things are working. The other part is I need to dramatically improve
        my time managment, although I start a week and half early, but I had trouble understanding the codes, and with other
        assignments I need to finish.</li>
        <br />
        <li>Youtube channel by the name phpacademy and thenewboston help me out to get clearer understanding about certain stuff
        in php, as well stackoverflow.com</li>
        <li>I have learn more and new codes, better understanding on how overall the code works in PHP, but still a lot to learn.</li>
        <br />
        <img src="thread.jpg" width="450" height="350" alt="Discussion Thread" />
        <br />
        <a href="index.php">Return to Homepage</a> 

        <ul>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:52:36.067

您的`<br/>`标签正在取消验证。删除它们，或者至少将它们放在适当的元素中。对于其他错误，请正确关闭您的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T00:50:06.283

对于第一条消息，任何`<li>`s 都必须是 a 的子级`<ul>`。对于第二条消息，您打开三个`<div>`s 但从不关闭它们。`<br />`s 也是无效和多余的；`<li>`s 将自动换行。您的 HTML 可以固定如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" >
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content= "about" />
    <meta name="keywords" content="about" />
<title>About</title>
</head>  
<body>
    <div id="container">
    <div id="inside">
    <div id="inside2">
    <h1>About</h1>
    <ul>
    <li>The Php version installed in mercury is <?php echo 'Current PHP version: ' . phpversion(); ?>.
    </li>
    <li>The task I am not attempted is Task 5.</li>
    <li>I am not exploring and implementing any special feature.</li>
    <li>I have trouble mainly on Task 3 with validation.</li>
    <li>Regarding with php, I want to gain more knowledge, I need to grasp deeper understanding on how everything works
    as there are a lot of things to remember and how things are working. The other part is I need to dramatically improve
    my time managment, although I start a week and half early, but I had trouble understanding the codes, and with other
    assignments I need to finish.</li>
    <li>Youtube channel by the name phpacademy and thenewboston help me out to get clearer understanding about certain stuff
    in php, as well stackoverflow.com</li>
    <li>I have learn more and new codes, better understanding on how overall the code works in PHP, but still a lot to learn.</li>
    <li>
        <img src="thread.jpg" width="450" height="350" alt="Discussion Thread" />
        <a href="index.php">Return to Homepage</a>
    </li>
    </ul>
</div>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T00:51:12.463

尝试在你的最后一个之后放置一个`</ul>`之前`</li>`。`<div>`然后用...关闭你的最后一个`</div>`。我很确定这应该可以解决问题。此外，所有中断都是错误的格式，您可以使用 CSS 更改这些样式，并且它会更兼容浏览器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T00:52:09.093

检查底部的结束 ul 标签。它似乎是`<ul>`并且应该是`</ul>`（你有一个开始标签而不是结束标签）。

请记住 XHTML 1.0 Strict 的意思就是……严格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T00:58:48.840

这应该更好地验证。

有两个开放`<ul>`标签，没有一个结束标签，`</div>`缺少 3 和很多`<br>`'sb/w `<li>`'。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" >
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content= "about" />
    <meta name="keywords" content="about" />
<title>About</title>
</head>
    <body>
        <div id="container">
          <div id="inside">
            <div id="inside2">
            <h1>About</h1>
            <ul>
              <li>The Php version installed in mercury is <?php echo 'Current PHP version: ' . phpversion(); ?>.</li>
              <li>The task I am not attempted is Task 5.</li>
              <li>I am not exploring and implementing any special feature.</li>
              <li>I have trouble mainly on Task 3 with validation.</li>
              <li>Regarding with php, I want to gain more knowledge, I need to grasp deeper understanding on how everything works
              as there are a lot of things to remember and how things are working. The other part is I need to dramatically improve
              my time managment, although I start a week and half early, but I had trouble understanding the codes, and with other
              assignments I need to finish.</li>
              <li>Youtube channel by the name phpacademy and thenewboston help me out to get clearer understanding about certain stuff
              in php, as well stackoverflow.com</li>
              <li>I have learn more and new codes, better understanding on how overall the code works in PHP, but still a lot to learn.</li>
            </ul>
            <img src="thread.jpg" width="450" height="350" alt="Discussion Thread" />
            <br>
            <a href="index.php">Return to Homepage</a>    
            </div>
          </div>
        </div>
</body>
</html> 
```

# c# - 静态 C# 对象原因：无法使用已与其底层 RCW 分离的 COM 对象

> ID：12593087
> 
> 赞同：2
> 
> 时间：2012-09-26T00:47:04.220
> 
> 标签：c#, exception, com, rcw

我有一个从外部 DLL 创建静态 devDrv 的 MyObject。如果 devDrv 是由 MyObject 构造函数创建的。代码工作正常。如果 devDrv 是由其中一个 MyObject.Connect 创建的（请参见下面的第二个对象），则第一次调用 MyObject.Connect() 可以正常工作。在第二次调用时，我会收到此错误：“无法使用已与其底层 RCW 分离的 COM 对象”。似乎 devDrv 不是持久的。我希望这个 devDrv 对象由 MyObject.Connect 创建，如下面的第二个对象所示。我会感谢你的帮助。

```
// this code works fine.
public sealed class MyObject
{
    static ExtDeviceDriver devDrv;

    public MyObject()
    {
        devDrv = new ExtDeviceDriver();
    }

    public void Connect()
    {
        devDrv.connect();   
    }
}

//this code causes exception.
public sealed class MyObject
{
    static ExtDeviceDriver devDrv;

    public MyObject()
    {
        // do not create devDrv here.
        //devDrv = new ExtDeviceDriver();
    }

    public void Connect()
    {
        if (devDrv == null)
            devDrv = new ExtDeviceDriver();
        devDrv.connect();   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:58:34.390

我会创建`static constructor`而不是这种方式

```
 public class MyObject
 {
   static ExtDeviceDriver devDrv;

  static MyObject()
  {
    devDrv = new ExtDeviceDriver();
  }

  public void Connect()
  {
    devDrv.connect();   
  }
 } 
```

但似乎问题出在您的代码上`ExtDeviceDriver`，而不是您的代码，可能是您不允许连接两次

# javascript - 如何创建音频播放器元素？

> ID：12593088
> 
> 赞同：0
> 
> 时间：2012-09-26T00:47:08.853
> 
> 标签：javascript, jquery

我正在尝试在我的代码中创建一个音频播放器，并希望将源附加到音频播放器。我没有使用 html5，所以它有点不同。

我有

```
var audioPlayer=document.createElement('audio');
      audioPlayer.id='audioPlayer';
      audioPlayer.className='audioPlayer'

 var audioSource=document.createElement('source');
 audioSource.src='song.mp3'

 $(this).closest('div').append(audioPlayer);
 audioPlayer.innerHTML=audioSource; //won't do it...... 
```

我想要这样的html

```
<audio id='audioPlayer' class='audioPlayer>
<source src='song.mp3'></source>
</audio> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:53:23.833

您是否忘记将音频源附加到音频播放器？在您的示例中，Audiosource 是 audioplayer 的子级。

```
var audioPlayer=document.createElement('audio');
audioPlayer.id='audioPlayer';
audioPlayer.className='audioPlayer'
var audioSource=document.createElement('source');
audioSource.src='song.mp3'
audioPlayer.appendChild(audioSource);

$(this).closest('div').append(audioPlayer);
//audioPlayer.innerHTML=audioSource; 
```

在这里[试试 jsfiddle](http://jsfiddle.net/ecco88/Q5RT5/)

# javascript - 带有 setTimeout() 的 Javascript 回调地狱；

> ID：12593089
> 
> 赞同：-1
> 
> 时间：2012-09-26T00:47:21.140
> 
> 标签：javascript, callback, settimeout

阿罗哈。这是我潜伏多年后的第一个问题。对于这个问题的冗长但直接的形式，以及可接受答案的限制，我深表歉意，但我是来贡献的。我有一个问题，其他问题（例如[如何避免 Node.js 中异步函数的长嵌套](https://stackoverflow.com/questions/4234619)或[Javascript 中的链式回调可读性？](https://stackoverflow.com/questions/7544249)）没有让我满意。

我想执行几个 Javascript 回调，以便我有一系列四个动作一个接一个地发生。这是来源：

```
var self = this;
fade(div, fadeIn, -20, function() {
  load(unload, dataOut, -10, function() {
    load(self, dataIn, 10, function() {
      fade(div, fadeOut, 20),0);
      unload = self;}
    );}
  );}
); 
```

除了内部语义细节外，load() 和 fade() 函数非常相似，它们看起来非常相似：

```
function load(menuCategory, data, step, callback) {
  menuCategory.parentNode.style.width = data+"px";
  data += step;
  if(dataIn <= data && data <= dataOut) {
    setTimeout(function() { load(menuCategory,data,step,callback) }, 15);
  } else if(callback && (typeof(callback) == 'function')) { 
    callback();}
} 
```

我有几个与这个烂摊子有关的问题，但首先让我给你我不想要的答案。使用 jQuery 的答案是不可接受的。使用其他时间或“同步”框架或模块的答案是不可接受的。质疑阻止执行的原因的答案是不可接受的。使用非 Javascript 语言的答案是不可接受的。非抽象的答案是可以接受的，但最终的解决方案需要尽可能抽象，这意味着答案必须能够针对各种相似但略有不同的动作采取行动。

这是我的主要问题：是否有一个函数/对象可以用来顺序应用这些操作，以减少这里发生的回调地狱？换句话说，如果对象/函数能够在单独迭代（即传递给它）时同步执行每个动作，那么对象会是什么样子？

第二个问题：有没有人知道这个回调业务在其他语言中看起来有多像 goto() ？意思是，这种嵌套的回调让我感觉非常尴尬和不雅。是否有正在开发或已经开发的 Javascript 语言结构可以减少这种疯狂的业务？回调嵌套是一些最难遵循的逻辑流程。就是觉得别扭。

我的目标是一个紧凑的、优雅的、有吸引力的、本土的 Javascript 对象/函数——我可以在 for() 循环或等效循环中调用它——将这些操作按顺序应用于每个操作。如果你已经读到这里，我要感谢你的时间和考虑。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T01:21:56.453

> 使用`setTimeout(func(),0)`为了同步执行

否。要么`func()`用于同步执行，要么`setTimeout(func, 0)`将执行排队（使其异步）。

> `setTimeout(func[…],0)`将此操作放入渲染网页对象的执行队列中是“最优雅”的方式吗？换句话说，是否有一种“更优雅”的方式来阻止执行（即按顺序执行这些操作）？

是的，这是标准方法。但是，这不会*阻止*执行，并且与排序无关。如果执行是同步的，只需执行它，否则您将不得不处理回调并且将新任务排队也*无济于事*。

> 有谁知道这个回调业务在其他语言中看起来像 goto() 多少？意思是，这种嵌套的回调让我感觉非常尴尬和不雅。是否有正在开发或已经开发的 Javascript 语言结构可以减少这种疯狂的业务？

不，我不知道其他语言，但 afaik`goto`是一个同步的控制流结构化语句，因为它不处理异步操作。

但是不，没有 JavaScript 语言结构（“语法糖”）可以帮助我们绕过带有回调地狱的[延续传递风格。](http://en.wikipedia.org/wiki/Continuation-passing_style)

> 是否有一个函数/对象可以用来顺序应用这些操作，以减少这里发生的回调地狱？换句话说，如果对象/函数能够在单独迭代它（即传递给它）时同步执行每个动作，那么对象会是什么样子？
> 
> 我的目标是一个紧凑的、优雅的、有吸引力的、本地开发的 Javascript 对象/函数——我可以在 for() 循环或等效循环中调用它——将这些操作按顺序应用于每个操作。

再次，您想要“顺序”而不是“同步”:-) 是的，有 [手工编码/本土] 解决方案可以更轻松地处理回调。由于您提到[的那些回调组织库](https://stackoverflow.com/a/4289363/1048572)不能满足您的要求，我建议您研究一下非常优雅和有吸引力的[`Promise`Api](http://wiki.commonjs.org/wiki/Promises)及其 Deferred 对象（请参阅概念的[期货和承诺](http://en.wikipedia.org/wiki/Futures_and_promises)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T01:15:29.987

我不确定你为什么在这里使用 setTimeout 。没有必要对回调进行排队。假设 fade() 和 load() 正确处理回调执行，以下结构将起作用。

```
fade(div, fadeIn, -20, function() {
    load(unload, dataOut, -10, function() {
        load(self, dataIn, 10, function() {
            fade(div, fadeOut, 20),0);
        });
    )};
)}; 
```

您应该研究的另一个主题是 Promises，也称为 deferreds 和 futures。它本质上是一种专门处理嵌套回调的编码模式。在根目录下，您创建一个立即返回的 Promise 对象，然后当您的方法执行完成时，它会触发一个可以执行下一个函数的 Promise 方法。它是一种不同的 javascript 编写方式，但易于理解且非常有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T05:07:31.573

事实证明，适合作为我的问题的“最佳”答案的做法是事件。特别是我所指的实践最好由 Node.js 上的 EventEmitter 来描述，或者在客户端浏览器上创建自定义事件和事件侦听器。虽然 Promise API 及其遵从模型很有趣，但它使用语言的扩展而不是核心 Javascript，这正是我在这里特别要寻找的（因此为什么以前的答案——尽管它们很清楚——完全支持我在找什么）。

这个链接（[http://wekeroad.com/2012/04/05/cleaning-up-deep-callback-nesting-with-nodes-eventemitter](http://wekeroad.com/2012/04/05/cleaning-up-deep-callback-nesting-with-nodes-eventemitter)）提供了一个很好的例子来说明我在寻找什么。同样，我应该提到 Trevor Burnham 的“Async Javascript”一书（[http://www.amazon.com/Async-JavaScript-Trevor-Burnham/dp/1475247362](https://rads.stackoverflow.com/amzn/click/com/1475247362)）和 John Resig 的“JavaScript Ninja 的秘密”和 Bear Bibeault ( [http://www.amazon.com/Secrets-JavaScript-Ninja-John-Resig/dp/193398869X](https://rads.stackoverflow.com/amzn/click/com/193398869X) )。这些书提供了客户端浏览器中自定义事件和事件处理程序的非常清晰的工作示例，它们提供了一种优雅的方式来解决我所指的“回调地狱”。

# objective-c - 如何为 UITableViewController 设置背景

> ID：12593090
> 
> 赞同：0
> 
> 时间：2012-09-26T00:47:22.400
> 
> 标签：objective-c, xcode, ipad, background, uitableview

我想在我的 ipad 应用程序中执行类似[的](http://dl.dropbox.com/u/21367418/online-post/paper-uitable-view-controller.png)操作，执行以下操作的最佳方法是什么：

1.  上栏下方的阴影。
2.  纸张的内边距（上、左、右和下）
3.  背景（作为记事本）：请考虑单元格：它们仍必须在纸张内滚动并在到达纸张底部边缘之前被裁剪。

我正在寻找尽可能避免覆盖的最佳解决方案。

**编辑**：

我尝试在 UISplitViewController 中使用 UIViewController（带有 UITableVIew 并具有委托方法），并且我尝试在表格顶部添加 UIImageView，但是这个视图会随着单元格滚动，并且当我向下滚动时它会隐藏。我尝试将 viewForHeaderInSection 函数也用于上阴影（在条形下方），但是纸张底边呢（如果我放一张包含阴影和纸张底边的图像，并将填充作为 UITableView 或 UITableViewController 的背景，并在旋转到纵向时更改此图像？这是一个好的和可能的解决方案吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T01:38:40.613

我猜：

*   在图像编辑应用程序中创建背景
*   剪切 4 个图像，用于页眉、页脚、左侧和右侧
*   创建一个带有 4 个 UIVIews 的 UIViewController 并添加正确的图像作为背景
*   在所有 4 中间添加一个 UITableView

这样图像就不会移动，如果您将 UIViews 与背景正确放置，您的 TableView 将在笔记本内滚动（假设您正在尝试创建笔记本）

如果您的应用程序仅是 iOS 6.0，自动布局将是一个很大的帮助。查看苹果开发者视频以了解如何使用此功能：[WWDC 2012 Session 232 - Auto Layout by Example](http://developer.apple.com/itunes/?destination=adc.apple.com.16351493766)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:31:10.967

一种简单的方法是使用 xib： 1\. 在 xib 中创建图像。在图像视图中，您可以将背景放置为您想要的任何图像。2.在图像视图上方创建表格视图，并将表格视图背景颜色设置为清晰的颜色。

这会做到的。

# mysql - Mysql排名有上下排名

> ID：12593094
> 
> 赞同：0
> 
> 时间：2012-09-26T00:47:55.210
> 
> 标签：mysql

我想使用 mysql 查询从表中获取范围排名。

桌子是这样的，

```
+------------+------+
| first_name | age  |
+------------+------+
| Kathy      |   2  |
| Jane       |   1  |
| Nick       |   3  |
| Bob        |   5  |
| Anne       |   4  |
| Jack       |   6  |
| Bill       |   8  |
| Steve      |   7  |
+------------+------+ 
```

我想用 2 个较低和较高的排名来获得 Jack 的排名。

```
+------------+------+
| Anne       |   4  |
| Bob        |   5  |
| Jack       |   6  |
| Steve      |   7  |
| Bill       |   8  |
+------------+------+ 
```

知道如何为 MySQL 数据库编写此查询吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T01:04:39.753

这是通过将行号应用于记录来实现此目的的一种非常丑陋的方法。通过将行号应用于记录，如果年龄不连续，您将能够返回行（具有[非连续年龄的](http://sqlfiddle.com/#!2/9f7d4/1)演示）：

```
select age, first_name
from 
(
  select t1.age, t1.first_name, @rownum:=@rownum+1 AS rownum
  from yourtable t1, (SELECT @rownum:=0) r
  order by t1.age
) x
where rownum  >= (select rownum
                  from 
                  (
                    select t.age, 
                      t.first_name, 
                      @rownum:=@rownum+1 AS rownum
                    from yourtable t, (SELECT @rownum:=0) r
                    order by t.age
                  ) x
                  where first_name = 'jack') - 2
 and rownum  <= (select rownum
                    from 
                    (
                      select t.age, 
                        t.first_name, 
                        @rownum:=@rownum+1 AS rownum
                      from yourtable t, (SELECT @rownum:=0) r
                      order by t.age
                    ) x
                    where first_name = 'jack') + 2; 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/21209/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T01:02:38.850

工作示例：

```
SELECT * FROM yourtable WHERE id BETWEEN ((SELECT id FROM yourtable WHERE name = 'Jack') - 2) AND ((SELECT id FROM yourtable WHERE name = 'Jack') + 2); 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/7f1f6/3)

# java - Java：每 X 秒执行一次操作

> ID：12593098
> 
> 赞同：1
> 
> 时间：2012-09-26T00:48:11.073
> 
> 标签：java, user-interface, timer, draw

我有一个可用的 Java 程序，我想每隔 X 秒在显示器上绘制一个对象。做这个的最好方式是什么？我正在考虑使用`for`循环和一些`sleep`语句，但我很好奇是否有更简单或更有效的方法来解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T00:53:40.187

最简单的方法是使用[javax.swing.Timer](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)

```
Timer timer = new Timer(X, new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
        // Update the variables you need...
        repaint();
    }
});

timer.setRepeats(true);
timer.setCoalesce(true);
timer.start(); 
```

您可能还想通读

*   [事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)
*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

所以你可以理解为什么你不应该在（EDT内部）使用`while (true) { Thread.sleep(X) }`调用`Swing`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T00:54:46.153

[ScheduledExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html "ScheduledExecutorService")在这里可能会有所帮助。Javadoc 显示了示例用法。完成后不要忘记调用该`shutdown`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T00:53:02.850

使用 Thread，这将每隔 XMilSeconds 在屏幕上绘制一个矩形。这将在 5 次运行后停止。编辑 xMilSeconds 以获得较慢的运行，j > 4 编辑停止前的运行次数。它确实冻结了，我无法修复。

```
int i = 0;
private long xMilSeconds = 300;
private boolean paint;
public boolean running = true;

public void paint(Graphics g)
{
    super.paint(g);
    if(paint)
    {
        for(;i < i+1;)
        {
             g.drawRect(i+49,i+49,i+299,i+99);   
             g.setColor(Color.RED);  
             g.fillRect(i+49,i+49,i+299,i+99); 
        }
        paint = false;
    }
}

public void run()
{
    while(running)
    {
        try
        {
            Thread.sleep(xSeconds);
            paint = true;
            repaint();
            i++;
            j++;
            if(j > 4)
            {
                running = false;
            }
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

# javascript - Javascript：服务器端动态变量名

> ID：12593101
> 
> 赞同：13
> 
> 时间：2012-09-26T00:49:12.597
> 
> 标签：javascript, node.js, dynamic-variables

如何在 NodeJS 中创建动态变量名？一些例子说存储在`window`变量中，但我假设那是客户端 Javascript。如我错了请纠正我。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-26T01:08:54.990

通常，您会执行以下操作：

```
var myVariables = {};
var variableName = 'foo';

myVariables[variableName] = 42;
myVariables.foo // = 42 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-26T01:07:08.783

在 node.js 中有`global`上下文，它相当于`window`客户端 js 中的上下文。像在普通 Javascript 中那样在任何闭包/函数/模块之外声明一个变量将使它驻留在全局上下文中，即作为`global`.

我从您的问题中了解到，您想要类似于以下内容：

```
var something = 42;
var varname = "something";
console.log(window[varname]); 
```

这在 node.js 中会变成：

```
var something = 42;
var varname = "something";
console.log(global[varname]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-18T05:45:38.417

只是不知道一个糟糕的答案会得到这么多票。这是很容易的答案，但你让它变得复杂。

```
var type = 'article';
this[type+'_count'] = 1000;  // in a function we use "this";
alert(article_count); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-15T17:21:25.067

一种可能的解决方案可能是：
使用[REST parameter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters)，可以创建一个数组并将每个动态变量（REST 参数项）作为对象添加到该数组中。

```
// function for handling a dynamic list of variables using REST parameters
const dynamicVars = (...theArgs) => {
  let tempDynamicVars = [];

  // as long as there are arguments, a new object is added to the array dynamicVars, creating a dynamic object list of variables
  for (let args = 0; args < theArgs.length; args++){
    const vName = `v${args}`;
    tempDynamicVars = [...tempDynamicVars, {[vName]: theArgs[args]}]; //using spread operator
    // dynamicVars.push({[vName]: theArgs[args]}); // or using push - same output
  }
  return tempDynamicVars;
}

// short version from above
// const dynamicVars = (...theArgs) => theArgs.map((e, i) => ({[`v${i}`]: e}));

// checking
const first = dynamicVars("F", 321);
console.log("Dynamic variable array:", first);
console.log(` - ${first.length} dynamic variables`);
console.log(" - second variable in the list is:", first[1], "\n");

console.log(dynamicVars("x, y, z"));
console.log(dynamicVars(1, 2, 3));
console.log(dynamicVars("a", "b", "c", "d")); 
```

# iphone - 使用情节提要时传递数据

> ID：12593103
> 
> 赞同：-2
> 
> 时间：2012-09-26T00:49:39.157
> 
> 标签：iphone, ios, xcode

> **可能重复：**
> [ios5如何通过prepareForSegue：一个对象](https://stackoverflow.com/questions/7864371/ios5-how-to-pass-prepareforsegue-an-object)

我喜欢故事板，但我无法使用故事板将数据从 viewController1 传递到 viewController2。我进行了研究，并发现了一些关于 prepareForSegue 的信息。但我还是输了！使用prepare for segue时，如何简单地将字符串从vc1传递到vc2？我有 1 个按钮来切换视图并传递字符串。提前致谢！

:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T01:02:25.387

`ViewControllers`这是一些在using之间传递数据的教程`Storyboard`：

1.  [Storyboards Segue 教程：在视图控制器之间传递数据](http://www.appcoda.com/storyboards-ios-tutorial-pass-data-between-view-controller-with-segue/)
2.  [如何在两个视图控制器之间传递数据的教程](http://klanguedoc.hubpages.com/hub/IOS-5-Tutorial-on-How-To-Pass-Data-Between-Two-View-Controllers)

或使用类似的东西（只是一个例子）：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:...]) {
        MyViewController *controller = (MyViewController *)segue.destinationViewController;
        //What you are going to pass, for my example score as int
        controller.score = score;
    }
} 
```

希望这可以帮助。

# jquery - Jquery Scroll 2 Divs 使用 ScrollTop IE9

> ID：12593104
> 
> 赞同：0
> 
> 时间：2012-09-26T00:49:54.967
> 
> 标签：jquery, html, scroll, internet-explorer-9, scrolltop

我有 2 个彼此相邻对齐的 div。这些 div 中的每一个都包含一个具有相同行数的表。

```
<div id="one" style="width:100px; height:200px; overflow-x:scroll; overflow-y:hidden;">
    <table id="tab1">
        contains 3 columns and 50 rows
    </table>
</div>

<div id="two" style="width:845px; height:200px; overflow-x:auto; overflow-y:auto;">
    <table id="tab2">
        contains 12 columns and 50 rows
    </table>
</div> 
```

当我垂直滚动时`<div id="two" ...`，我希望`<div id="one" ...`也滚动到相同的位置。我编写了以下代码，该代码在 FireFox 和 chorme 中运行良好，但是在 IE9 中，scrollTop 无法正确对齐它们。这些 div 中的每一个都包含每个有 50 行的表，当我继续向底部滚动更多时，我可以看到差异，因为行不同步对齐。

```
$("#two").scroll(function(){ 
    $('#one').scrollTop($('#two').scrollTop());
}); 
```

IE8 的差异比 IE9 略好。如何在 IE9 中解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:45:10.280

我通过为表格中的每一行提供固定高度来解决此问题。

# matlab - Matlab 的 Mat 文件格式的替代品

> ID：12593110
> 
> 赞同：11
> 
> 时间：2012-09-26T00:50:36.510
> 
> 标签：matlab

我发现写入和读取本机 mat 文件格式变得非常非常慢，数据结构约为 1G 大小。此外，我们还有其他非 matlab 软件应该能够读取和写入这些文件。所以我想找到一种替代格式来序列化matlab数据结构。理想情况下，这种格式将...

1.  能够将任意 matlab 结构表示为文件。
2.  比 mat 文件具有更快的 I/O。
3.  拥有其他语言的 I/O 库，如 Java、Python 和 C++。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-26T06:29:54.650

简化数据结构并使用新的 v7.3 MAT 文件格式（HDF5 的变体）实际上可能是最好的方法。HDF5 格式是开放的，并且已经为您的其他语言提供了 I/O 库。并且根据您的数据结构，它们可能比旧的二进制 mat 文件更快。

*   简化您正在保存的数据结构，更喜欢大型基元数组而不是复杂的容器结构。
*   如果您的数据结构仍然很复杂，请尝试关闭压缩。
*   使用“-v7.3”尝试 v7.3 MAT 文件格式
*   如果使用网络文件系统，请考虑保存并加载到快速本地驱动器上的临时目录并复制到/从网络复制

对于大型数据结构，您的 MAT 文件 I/O 速度可能更多地取决于您正在写出的数据的内部结构，而不是生成的 MAT 文件本身的大小。（根据我的经验，这通常是导致 MAT 文件缓慢的主要因素。）当您说“任意 Matlab 结构”时，这表明您可能正在使用单元、结构或对象来制作复杂的数据结构。这会减慢 MAT I/O，因为 MAT 文件 I/O 中存在每个数组的开销，并且单元和结构数组（容器类型）的成员都算作单独的数组。例如，存储在 cellstr 中的 5,000 个字符串比存储在 2-D char 数组中的相同 5,000 个字符串要慢得多。对象的开销更大。作为测试，尝试写出一个 1 GB 的文件，其中仅包含一个 1 GB 的随机 uint8 原始数组，看看这需要多长时间。从那里，看看您是否可以简化数据以减少总 mxarray 计数，即使这意味着要对其进行整形以进行序列化。（我的经验主要是使用 v7 格式；较新的 HDF5 格式的每个元素开销可能更少。）

如果您的数据文件位于网络上，您还可以尝试对快速本地驱动器上的临时文件执行保存和加载操作，并单独使用复制操作在网络之间来回移动它们。至少在 Windows 网络上，我已经看到这样做的速度提高了 2 倍。可能由于优化，完整文件复制操作可以做到 MAT I/O 代码不能。

想出一种支持完全任意的 Matlab 数据结构并可以移植到其他语言的替代文件格式可能需要付出很大的努力。我会先尝试围绕您对现有格式的使用进行较小的更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T01:16:12.893

mat 格式随 Matlab 版本而改变。v7.3 使用 HDF5 格式，具有内置压缩和其他功能，读取/写入可能需要大量时间。但是，您可以强制 Matlab 使用以前更快的格式（但可能会占用更多空间）。

看这里：

[http://www.mathworks.com/help/matlab/import_export/mat-file-versions.html](http://www.mathworks.com/help/matlab/import_export/mat-file-versions.html)

# batch-file - 当目录变空时，不同长度的批处理文件等待被取消

> ID：12593112
> 
> 赞同：1
> 
> 时间：2012-09-26T00:50:47.150
> 
> 标签：batch-file, wait

我们正在构建系统之间的自动导出\导入。除了在目录变空时设计一个未定义/可变周期的等待之外，我们做得很好。

我们从一个系统导出文件。将文件导入另一个系统。取决于文件的数量；进口的持续时间会显着不同。

我们需要等待导入暂存目录变为空，以便我们可以测试 2 个结果目录中的项目计数（导入成功和导入失败）。不幸的是，导入机制是一个 Windows 服务，所以我们不能从批处理中调用它。

我们想出的最好办法是循环检查导入暂存目录中是否有文件。基本上，保持循环等待 30 秒，直到目录为空。（如果目录包含 >1 个对象，请等待 30 秒，否则继续批处理。

以前有没有人编写过这样的检查\等待脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T02:40:45.003

您可以使用 PING 引入延迟（适用于所有 Windows 平台）

您可以使用 DIR /B /AD 来测试是否有文件。`&&`仅当 DIR 成功（找到文件）时才执行之后的命令。

```
@echo off
setlocal
set delay=30
set folder=myFolder

set /a delay+=1
:loop
>nul 2>nul dir /b /a-d * && (
  >nul ping -n %delay% ::1
  goto :loop
)
echo %folder% is now empty 
```

# git - 查看未推送到远程的本地提交的 git 更改/差异

> ID：12593113
> 
> 赞同：10
> 
> 时间：2012-09-26T00:51:09.640
> 
> 标签：git, git-commit, git-log

我在`Git`本地提交了三个提交，但还没有推送到 GitHub。我想查看所有三个提交的更改/差异，如何查看所有差异？

我试过了：`git log --branches --not --remotes`

这向我展示了三个提交，但不是每个提交的所有差异/更改。

```
commit c08fbb72ae6a06e8b2ff3dbbb96fb555a43f4136
Author: Justin <justin@mydomain.com>
Date:   Mon Sep 10 18:17:02 2012 -0700

    Updated order of requires in Requires.php

commit 041fe19a48269a8aea2ccf90f53568893d4e0158
Author: Justin <justin@mydomain.com>
Date:   Mon Sep 10 17:56:42 2012 -0700

    Checking for app.config.php in Requires.php

commit 61c103a8a122bcde2311d081a8340ee1dd71997c
Author: Justin <justin@mydomain.com>
Date:   Mon Sep 10 17:42:20 2012 -0700

    Version bump 0.4.0\. See CHANGELOG.md 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T01:17:18.087

您可能可以像这样使用 git diff ：

```
git diff origin/master..HEAD 
```

假设您的 HEAD 当前指向您的最新提交。否则，你可以只使用

```
git diff origin/master..master 
```

（当然，如果您的远程不是原始分支，或者您的分支不是主分支，则相应地进行更改。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-26T01:18:48.930

`git log -p --branches --not --remotes`

工作。

# c - C 字符串比较 - 等于 true

> ID：12593115
> 
> 赞同：0
> 
> 时间：2012-09-26T00:51:14.770
> 
> 标签：c, comparison

也许是一个奇怪的问题..

我目前正在努力理解为什么以下等于 true 即“Hello World”被打印到控制台？我一直认为 C 中的字符串比较必须使用***strcmp***或类似方法来完成。

```
char *a = "Hello";
char *b = "Hello";

if(a == b)
{
    printf("Hello World\n");
} 
```

我还认为只有在地址相同的情况下这才等同于真实？它们是文字的事实吗？

*PS。是的，这几乎与任务无关，但我只是想出了上面的内容。- 这不会以任何方式回答任务。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T00:58:08.620

该语言对字符串文字的存储位置和方式没有任何要求。您所知道的是它们具有静态存储持续时间，并且您不得尝试更改数据。标准中没有任何内容要求两个不同的字符串文字具有不同的地址，并且完全有可能实现对字符串文字数据进行重复数据删除。

另一方面，没有什么要求将两个相同的字符串文字存储在同一个地址，因此比较地址没有什么意义。始终用于`strcmp`比较字符串的*内容*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T00:53:54.470

出于优化目的，您直接放入代码中的相同文字实际上将指向相同的内存位置。

在这种情况下，编译器将“Hello”放在固定内存中一次，然后指向`a`该`b`内存。

为了更详细地了解发生了什么，我建议你编译这个程序（首先添加一堆字符串文字），然后使用`gdb`或 valgrind 或任何其他内存检查器并手动查看指向字符串文字的内存 - 你'会发现在标准情况下 gcc 将所有字符串文字放在内存中并重新使用相同的字符串文字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T00:58:14.253

a 和 b 是指向字符的指针。

指针基本上存储一个内存地址。您的 a 和 b 变量不保存单词“hello”，但它们保存保存单词“hello”的内存地址。

在程序中打印 a 和 b 以查看它们的值。它看起来像：`632176`或类似的东西，它们将是平等的。

所以代码`a == b`基本上说：“a和b指向同一个内存地址吗？”。他们确实这样做了，因为“hello”是一个常量字符串，它只会被写入内存一次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T01:00:26.640

这里发生的是你有两个指针，称为`*a`和`*b`。接下来，如您所知，指针指向*特定的内存位置*。现在，当两者`*a`和`*b`都设置为完全相同的句子时，它遵循`a`并`b`指向一个内存地址。但是，编译器注意到这些指针是同一个句子，因此为了优化目的，它会将它们设置为*指向完全相同的内存地址*。

因此，发生的事情是这样的：

```
a = 0xFFFFFFFF;
b = 0xFFFFFFFF;
if(0xFFFFFFFF == 0xFFFFFFFF){
    // Code
} 
```

现在，当您比较它们时，编译器将其视为`(0xFFFFFFFF == 0xFFFFFFFF)`编译器认为它们相等，导致`if statement`变为真并显示`Hello, World`

但是，不同的编译器可能不会发生这种情况，因此您可能会在不同的编译器中得到不同的结果。这种行为确实适用于 gcc。因此，在这种情况下，您应该始终使用`strcmp`for 比较来避免这样的随机行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T01:00:36.590

我相信如果您有两个指向相同值的指针，编译器只会将两个指针都指向同一块内存。它的效率更高。但在 C 语言中，即使在这种情况下，也总是使用 strcmp。

# c++ - 能够删除旧样本的 C++ 累加器库

> ID：12593119
> 
> 赞同：7
> 
> 时间：2012-09-26T00:51:37.763
> 
> 标签：c++, boost, machine-learning, accumulator

在 Boost.Accumulator 中，您可以将样本添加到累加器中，然后从中提取统计量。例如：

```
acc(1.)
acc(2.)
acc(3.)
cout << mean; // 2 
```

该库有许多更复杂的统计量，例如`skewness`、`kurtosis`或`p_square_cumulative_distribution`.

我想做的是这样的：

```
acc(1.)
acc(2.)
acc(3.)
std::cout << mean(acc); // 2
acc.pop() // withdraw the first value (1.)
std::cout << mean(acc); // 2.5 
```

`pop()`将以 FIFO（先进先出）方式工作。我正在尝试做的是在滑动时间窗口内以在线（增量）方式计算我的数据的统计信息。

累加器必须在内部保留所有值。

我可以自己做，但我总是喜欢先检查现有库，并且可能有我不知道的算法可以在数据传入或传出时巧妙地计算数量。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T03:19:05.037

既然你提到了“滑动时间窗口”，一个选择是使用滚动平均值（还有滚动和和滚动计数），这是最后*N*个样本的平均值。根据您的需要，您可以创建具有不同窗口大小的单独累加器。

```
typedef accumulator_set<double,
                stats<tag::rolling_mean>
                > my_accumulator;

my_accumulator acc(tag::rolling_window::window_size = 3);
acc(1.);
acc(2.);
acc(3.);
std::cout << rolling_mean(acc);
// Reset accumulator and use different window size
acc = my_accumulator(tag::rolling_window::window_size = 2);
acc(2.);
acc(3.);
std::cout << rolling_mean(acc); 
```

此外，如果您查看这些的实现，它们使用`boost/circular_buffer.hpp`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T02:48:54.020

您可能希望将数据存储在 a`std::deque`而不是向量中，因此您的插入和删除都可以具有恒定的复杂性。如果您使用向量，则不可避免地会是线性的。

除此之外，将算法应用于集合是一件非常简单的事情。然而，奇怪的是，我不知道已经编写和测试过的此类算法的集合，尽管看起来有一组相当明显的算法可用。

对于它的价值，构建一个适配器以将数据从集合馈送到累加器以计算您可以计算的统计数据是相当简单的。在少数情况下，累加器可能需要做一些额外的工作来逐步计算结果，但我猜想失去足够的效率来关心是非常罕见的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T01:36:05.197

您可能需要将所有样本保存在一个向量中，然后从向量中为每次计算累积它们。像这样的东西：[https ://stackoverflow.com/a/7616783/219136](https://stackoverflow.com/a/7616783/219136)

# macos - SceneKit 平滑相机移动

> ID：12593128
> 
> 赞同：6
> 
> 时间：2012-09-26T00:52:55.847
> 
> 标签：macos, cocoa, opengl, scenekit

SceneKit（OpenGL）中平滑相机移动的标准方法是什么？手动更改 x,y 不够平滑，但使用 CoreAnimation 会创建“脉冲”运动。SceneKit 上的文档似乎非常有限，因此任何示例都将不胜感激，我目前正在这样做：

```
- (void)keyDown:(NSEvent *)theEvent {
    int key = [theEvent keyCode];
    int x = cameraNode.position.x;
    int y = cameraNode.position.y;
    int z = cameraNode.position.z;
    int speed = 4;
    if (key==123) {//left
        x-=speed;
    } else if (key==124) {//right
        x+=speed;
    } else if (key==125) {//down
        y-=speed;
    } else if (key==126) {//up
        y+=speed;
    }
    //move the camera
    [SCNTransaction begin];
    [SCNTransaction setAnimationDuration: 1.0];
    // Change properties
    cameraNode.position = SCNVector3Make(x, y, z);
    [SCNTransaction commit];
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T09:57:48.030

为了最大限度地减少脉冲运动（由于键重复），您可以使用“easeOut”时间函数：

```
//move the camera
[SCNTransaction begin];
[SCNTransaction setAnimationDuration: 1.0];
[SCNTransaction setAnimationTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut]];
// Change properties
cameraNode.position = SCNVector3Make(x, y, z);
[SCNTransaction commit]; 
```

也就是说，这里最好的做法可能是自己管理一个目标位置（向量3），并在每一帧更新相机的位置以顺利到达该目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T04:12:00.507

我一直在试验这个。到目前为止，我发现的最好的方法是将输入键的状态记录为内部状态，由 keyDown: 和 keyUp: 修改，然后运行 ​​NSTimer 来应用它们。计时器使用发射之间实际测量的时间增量来确定移动相机的距离。这样不规则的时间不会有太大的影响（我可以随时调用我的方法来更新相机位置，而不必担心改变它的移动速度）。

但是，要使其正常运行需要一些工作。keyDown: 和 keyUp: 在游戏输入方面有一些令人讨厌的行为。例如，重复键。此外，即使在您的视图失去焦点或您的应用程序进入后台后，如果在转换过程中按住键，它们也可能会触发。等等。不是不可克服的，而是烦人的。

我还没有做的是添加加速和减速，我认为这将有助于感觉它是平滑的。否则感觉还不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-29T10:35:20.400

我使用以下代码移动相机：

```
let lerpX = (heroNode.position.x - followCamera.position.x) * 0.05
let lerpZ = (heroNode.position.z - followCamera.position.z) * 0.05
followCamera.position.x += lerpX
followCamera.position.z += lerpZ 
```

# c# - 为什么这段代码不好？

> ID：12593133
> 
> 赞同：1
> 
> 时间：2012-09-26T00:53:50.343
> 
> 标签：c#

下面是用于 rss 阅读器的 C# 代码，为什么这段代码不好？此类生成按标题排序的 5 个最新帖子的列表。你用什么来分析 C# 中的代码？

```
 static Story[] Parse(string content)
    {
        var items = new List<string>();
        int start = 0;
        while (true)
        {

            var nextItemStart = content.IndexOf("<item>", start);
            var nextItemEnd = content.IndexOf("</item>", nextItemStart);
            if (nextItemStart < 0 || nextItemEnd < 0) break;

            String nextItem = content.Substring(nextItemStart, nextItemEnd + 7 - nextItemStart);
            items.Add(nextItem);
            start = nextItemEnd;
        }

        var stories = new List<Story>();
        for (byte i = 0; i < items.Count; i++)
        {
            stories.Add(new Story()
            {
                title = Regex.Match(items[i], "(?<=<title>).*(?=</title>)").Value,
                link = Regex.Match(items[i], "(?<=<link>).*(?=</link>)").Value,
                date = Regex.Match(items[i], "(?<=<pubDate>).*(?=</pubdate>)").Value
            });
        }

        return stories.ToArray();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T00:56:55.940

为什么不使用 XmlReader 或 XmlDocument 或 LINQ to Xml？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T01:00:13.297

这很糟糕，因为当框架中有[优秀的](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx) [类](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)用于解析 XML 时，它正在使用字符串解析。更好的是，有一些[类](http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationfeed.aspx)可以处理 RSS 提要。

**预计到达时间：**

很抱歉之前没有回答您的第二个问题。有很多工具可以分析 C# 代码的正确性和质量。可能在某处编译了一个巨大的列表，但这里有一些我每天使用来帮助确保代码质量：

*   [StyleCop](http://stylecop.codeplex.com/)（代码格式化标准）
*   [Resharper](http://www.jetbrains.com/resharper/)（惯用编程，抓住问题）
*   [FxCop](http://msdn.microsoft.com/en-us/library/bb429476.aspx)（代码正确性、标准遵守、惯用编程）
*   [Pex](http://research.microsoft.com/en-us/projects/pex/)（白盒测试）
*   [Nitriq](http://www.nitriq.com/)（代码质量指标）
*   [NUnit](http://www.nunit.org/)（单元测试）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T00:58:58.663

您不应该使用字符串函数和正则表达式来解析 XML。XML 可能会变得非常复杂，并且可以以多种方式格式化，像 XmlReader 这样的真正 XML 解析器可以处理，但会破坏您的简单字符串解析代码。

基本上：不要尝试重新发明轮子（一个 xml 解析器），尤其是当您没有意识到该轮子实际上有多复杂时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T00:59:06.170

我认为代码最糟糕的是性能问题。您应该将 xml 字符串解析为 XDocument（或类似结构），而不是使用正则表达式一次又一次地解析它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T00:59:16.620

对于初学者来说，它`byte`用作索引器而不是`int`（如果`items`其中的项目比`byte`可以表示的多怎么办？）。它不使用惯用的 C#（请参阅 user1645569 的回复）。它也不必要地使用`var`而不是特定的数据类型（虽然这更具风格，但对我来说我不喜欢，因此根据我的指标它并不理想（而且你没有给出其他指标））。

让我澄清一下我所说的“不必要地使用`var`”：`var`就其本身而言还不错，我并不是在暗示这一点。我（主要）建议这里的用法不是很一致。例如，显式声明`start`为`int`，但随后声明`nextItemEnd`为`var`（将推断为`int`）并分配`nextItemEnd`给`start`（对我而言）似乎是想要自动推断变量的类型和显式声明它之间的一种奇怪的混合。我认为`var`在 ' 的声明中没有使用它很好`start`（因为它的意图是整数还是浮点数并不完全清楚），但我（个人）认为声明`nextItemStart`和`nextItemEnd`as没有任何帮助`var`。我倾向于使用`var`对于更复杂/更长的数据类型（类似于我`auto`在 C++ 中用于迭代器的方式，但不适用于“更简单”的数据类型）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-26T01:01:53.047

仅仅因为你正在重新发明一个`xml parser`，使用`Linq to xml`它，它非常简单和干净。我相信如果你使用，你可以在三行代码中完成上述所有操作`Linq to XML`，你的代码使用了很多幻数（例如：7-n ..)，使它不稳定和非通用的东西

# javascript - 为悬停脚本上的jQuery图像替换添加淡入淡出效果

> ID：12593137
> 
> 赞同：1
> 
> 时间：2012-09-26T00:54:23.860
> 
> 标签：javascript, jquery

已经有一些关于此的主题，但它们对我的情况并没有太大帮助。我写了一个小脚本来改变一些社交图标在悬停时的图像源。我正在尝试添加一个淡入淡出效果，因此它不仅仅是一个直接的图像交换。这是我的脚本：

```
$(".social_icons").live('hover', function() {
  if ($(this).attr("class") == "social_icons") {
    this.src = this.src.replace("-black","-color");
  } else {
    this.src = this.src.replace("-color","-black");
  }
  $(this).toggleClass("on");
}); 
```

如何为此添加淡入/淡出效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:01:00.643

试试这个

```
$(".social_icons").live('hover', function() {
    var $curr = $(this);
     if ($(this).attr("class") == "social_icons") {
        $curr.fadeOut('slow', function () {
            $curr.attr('src', this.src.replace("-black","-color"));
            $curr.fadeIn('slow');
        });
    } else {
        $curr.fadeOut('slow', function () {
            $curr.attr('src', this.src.replace("-color","-black"));
            $curr.fadeIn('slow');
        });
  }
  $(this).toggleClass("on");
}); 
```

# html - HTML/CSS 表格列宽

> ID：12593138
> 
> 赞同：2
> 
> 时间：2012-09-26T00:54:25.170
> 
> 标签：html, css

我正在尝试根据以下要求设置表格样式，但一无所获：

*   某些列的宽度必须缩小以适应内容。
*   其他列的宽度必须在它们之间划分剩余的可用宽度。
*   表格宽度必须填充但不能超过父宽度。

我想出了一种方法......将缩小的列宽度设置为 1px。这似乎起到了作用，直到扩展列的内容增长并最终增加表格的宽度以超过其父级的宽度，这违反了列出的最后一个要求。

有任何想法吗？我破产了。

我正在使用 Compass/Sass 连字符，这有助于满足最后一个要求（表格不超过父宽度）。在 Chrome 中完美运行。在 Firefox 中，表格宽度有点太远了。这就是我的风格：

```
td.id
td.actions {
    text-align: right;

    /* trick table cells into fitting their content with nowrap and zero width */
    white-space: nowrap;
    width: 1px;
}

td {
    @include hyphenation;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:58:37.513

听起来您使用的是像素宽度而不是百分比。如果是，请尝试“60%”或其他合适的值。你可以发布你的代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-13T19:26:16.330

```
td.actions {
table-layout:auto;
} 
```

# php - 让一个 PHP 脚本执行不同的 PHP 脚本并将其返回的值分配给变量的最简单方法是什么？

> ID：12593139
> 
> 赞同：-1
> 
> 时间：2012-09-26T00:54:32.947
> 
> 标签：php

我正在撞墙。很难找到答案，因为我不知道如何表达这个问题，我也想不出合适的关键词。

我正在编写一个视图对象以在我正在编写的 MVC 框架中使用，它通过将脚本输出捆绑在一起来组装页面。我被困在领带部分！

脚本1.php：

```
<?php

$variable = solution('/path/to/script2.php');
echo $variable;

?> 
```

脚本2.php：

```
<?php

// generates a random md5 hash just for example

mt_srand(microtime(true)*100000 + memory_get_usage(true));
$randommd5 = md5(uniqid(mt_rand(), true));
echo $randommd5;

?> 
```

每次运行 script1.php 时，如何让这两个脚本返回相同的值？

是否有用于此目的的 PHP 函数？如果没有，是否有一种简单而稳定的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T01:06:54.303

就个人而言，我会将它包装在一个函数中。如果你想包含一个函数脚本，你可以这样做：

脚本1.php

```
 include('script2.php'); //now all functions and variables are available to script1
 $variable = md5function(); 
```

脚本2.php

```
 function md5function() {
   mt_srand(microtime(true)*100000 + memory_get_usage(true));
   $randommd5 = md5(uniqid(mt_rand(), true));
   return ($randommd5);
 } 
```

现在 script2 返回一个变量 ($randomd5)，然后将其分配给 script1 中的 $variable。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T01:02:27.743

[http://php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)

如果您从包含的文件中“返回”一个值，它应该是 include() 调用的返回值（根据 doco）。

虽然不是一个好方法 - 功能或其他更标准的机制更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T01:14:03.847

这将使您使用函数 - 将 vars 传递给包含文件中的函数并取回一些东西。我已经将它简化了很多，所以它无论如何都没有优化。希望能帮助到你 ：）

脚本1.php

```
<?php

include("script2.php");
echo get_hero_name("batman");

?> 
```

脚本2.php

```
<?php

function get_hero_name($hero){

switch ($hero) {
    case "batman":
        $return_var = "Bruce Wayne";
        break;
    case "superman":
        $return_var = "Clark Kent";
        break;
    Default:
        $return_var = "Papa Smurf";
        break;
}
return($return_var);

}

?> 
```

# php - 在查询中使用的值未知时创建 SQL 查询

> ID：12593142
> 
> 赞同：1
> 
> 时间：2012-09-26T00:55:03.603
> 
> 标签：php, sql

我有一些适用于 3 个下拉框的搜索功能。根据选择的标准，返回一个配置文件。3个下拉菜单是：

*   县
*   选区
*   性别

现在我正在尝试构建一个查询，但刚刚意识到实际上一个人不必从每个下拉列表中选择一个选项，我也不希望他们这样做。

因此，例如，在从每个下拉列表中选择一个选项之前，我不想禁用搜索按钮。

从任何下拉列表中选择了一个值，并且可能根本没有从任何下拉列表中选择任何值，然后单击搜索按钮，我试图了解如何处理未知组合。

我的第一个想法是我可以使用真值表之类的东西，但我认为这只是矫枉过正，实际上这是一个非常常见的功能。

然后我想也许我可以有类似的东西：

```
$county = "$_GET['county'];";
$constituency = "$_GET['constituency'];";
$gender = "$_GET['gender'];"; 
```

然后我可以检查它们是否为空并以某种方式使用这个值，例如

```
if($county !== '') {
  ???SOMEHOW MAKE USE OF THIS IN AN SQL QUERY???
  PERHAPS PASS IT TO ANOTHER PARAMETER
  $sqlparams = "county = '$county'";
}

SELECT * FROM profile
WHERE {$sqlparams}; 
```

我认为我在正确的轨道上，但可以使用一些指导。

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:02:20.300

这应该是你想要的，我想。

```
<?php
$tooLookFor = array("county", "constituency", "gender");
foreach($tooLookFor as $key){
    if(isset($_GET[$key]) && strlen($_GET[$key])>0){
        $queryParams[] = $key.'="'.$_GET[$key].'"';
    }
}
$query = "SELECT * FROM profile WHERE ".implode(' AND ', $queryParams);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T01:04:09.893

您可以执行以下操作：

```
$county = $_GET['county'];
$constituency = $_GET['constituency'];
$gender = $_GET['gender'];

$sqlparams = array();

if($county !== '') {
    $sqlparams[] = "county = '$county'";
}
if($constituency !== '') {
    $sqlparams[] = "constituency = '$constituency'";
}
if($gender !== '') {
    $sqlparams[] = "gender = '$gender'";
}

$query = "SELECT * FROM profile";

if (count($sqlparams) > 0) {
    $query .= " WHERE " . implode(" AND ", $sqlparams); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T01:02:47.073

你可以这样做：

```
$where = array();

//repeat as needed
$where[$column] = $value;

$where2 = array();
foreach($where as $key => $value){
    $where2[] = "$key = '$value'";
}

$where_string = implode(' AND ', $where2); 
```

`$where_string`后面会有要插入的字符串`WHERE`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T01:02:50.087

是的，你在正确的轨道上，你只是还没有在正确的开关上。;)

在您知道必须使用什么之前，您无法构建查询。因此，首先，在您的验证中，确定（正如您所做的那样）关键字实际上是什么以及它们代表什么字段。大概这些映射到表中的字段，也许是 3 个表？重点是，您的查询将需要动态构建。

# php - 从对象数组中创建一个属性数组

> ID：12593143
> 
> 赞同：1
> 
> 时间：2012-09-26T00:55:16.317
> 
> 标签：php, oop

假设我有一组来自用户类的对象。类用户包含属性电子邮件。如何从用户对象数组中创建一个电子邮件属性数组？

有没有比以下更好/更快的方法：

```
$emails = array();
foreach($users as $user) {
   $emails[] = $user->email;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T00:58:28.740

您可以使用[`array_map`](http://php.net/manual/en/function.array-map.php)which 将在 C 中进行循环，但每次迭代都需要回调 PHP。

```
$emails = array_map(function ($user) { return $user->email; }, $users); 
```

**更好的？**

The above code is more expressive to me and probably most functional programmers, but that's subjective. It also requires PHP 5.3 for the callback. You can get around that for PHP 5.2 and below by declaring a global function, but then you lose much of the clarity, especially when the code appears in a class.

```
function getUserEmail($user) { return $user->email; }
$emails = array_map('getUserEmail', $users); 
```

**Faster?**

In this simple case with the callback, it seems to be slower (see Esben's answer). However, I have two caveats here.

1.  Micro-benchmarks are notoriously finicky. They vary from machine to machine and depend on the particular build of the interpreter. But worse, measuring such a small value can be overshadowed by other tasks such as processor multitasking, memory management, etc. The times also varied considerably between using the callback versus the global function.

2.  Developer time is far costlier than CPU cycles. You're better off writing the easiest-to-code and maintain solution first and only optimizing it once you've a) found it to be a problem and b) *measured* how much of a problem it is. Obviously this is much less important for this simple case, but it's a general rule I've learned to follow.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T00:56:53.667

看起来 foreach 循环是最快的。我猜语法是一个品味问题。

**编辑**

正如我在回复 David 的帖子时所说的那样，我实际上已经对此进行了基准测试。

```
for($i = 0;$i<=8000;$i++){
    $users[] = (object)array("email"=>rand(0,15));
}

$arrMapBm = new nzpBM("arrMap");
$foreachBm = new nzpBM("foreach");

$arrMapBm->start();
$emails = array_map(function ($user) { return $user->email; }, $users);
echo $arrMapBm;
unset($emails);

$foreachBm->start();
foreach($users as $user) {
   $emails[] = $user->email;
}
echo $foreachBm; 
```

给出了相当可靠的结果。

```
The benchmark "arrMap (1)" took 4.8160552978516 miliseconds
The benchmark "foreach (1)" took 2.1059513092041 miliseconds 
```

我不知道这是否是因为我目前在 Windows 机器上，但对我来说，array_map 肯定**不会**更快。不想在这里误导任何人。

# c# - 通过代码显示文件管理器编辑器

> ID：12593145
> 
> 赞同：0
> 
> 时间：2012-09-26T00:55:46.140
> 
> 标签：c#, winforms, gridview, devexpress

我的表单中有一个 gridControl，当我单击一个按钮时我想要一个过滤器编辑器，如下所示：

![在此处输入图像描述](../Images/b9e298552cfaa7f5c3ca04f31390e888.png)

GridControl 中已经有一项功能可以显示此过滤器编辑器，如下图所示： ![在此处输入图像描述](../Images/ba6ce1a8b6ac14cb661ebe6c7c88ef10.png)

但是我想通过代码显示出来，不知道怎么做。当我阅读过滤器编辑器文档时，我发现了这一点：

> 在代码中，可以通过 ColumnView.ShowFilterEditor 方法打开过滤器编辑器。

但是当我尝试编写它时，它给了我这个错误：

> 当前上下文中不存在名称“ColumnView”

请问，有人可以告诉我如何通过代码显示这个 Filer Editor 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:08:17.140

该方法实际上是在 GridView 本身上，而不是在 ColumnView 上。

```
 GridView gridView = yourGridControl.Views[0] as GridView;
  gridView.ShowFilterEditor(gridView.Columns[0]); 
```

# matlab - 如何在matlab中输入图形的偏差

> ID：12593150
> 
> 赞同：2
> 
> 时间：2012-09-26T00:56:54.017
> 
> 标签：matlab, plot

我想在一个数字上绘制几个变量。他们每个人都想在 y 轴上给出一些“偏差”，例如：变量 a 从点 (0,0) 开始，变量 b 在 (0,-10) 开始，c (0,-20)。如何在 y 轴上定义此偏差值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T01:08:19.910

只需将 0、-10 或 -20 添加到变量值即可。

# actionscript-3 - Adobe Flex：单击子菜单时获取完整的菜单路径？

> ID：12593152
> 
> 赞同：0
> 
> 时间：2012-09-26T00:57:37.977
> 
> 标签：actionscript-3, apache-flex, flex4, flex3, flash-builder

当单击子菜单时，是否有任何方法可以获取完整的“菜单路径”。例如，如果我在选择“输入”时有一个菜单设备-> MODBUS-> 输入，有什么方法可以确定“设备-> MODBUS”部分吗？

TIA，弗雷德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:23:56.747

我想您正在使用 XML 作为菜单控件的数据提供者，并且我想您正在使用 mx/s:Menu 控件。否则你的问题会很混乱，我的回答超出范围。

您可以侦听 MenuEvent.ITEM_CLICK 事件并执行以下操作：

```
// Event handler for the Menu control's change event.
private function menuHandler(evt:MenuEvent):void  {
    Alert.show("Label: " + evt.item.@label, "Clicked menu item");
    var path:Array  = new Array();

    var objXML:XML   = evt.item as XML;

    while(objXML)
    {
        path.push(objXML);
        objXML = objXML.parent();
    }

    path.reverse();

    // now you have the path from top to bottom, as array of xml elements.

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:44:32.167

或者在 MenuEvent.ITEM_CLICK 事件上通过以下另一种方式：-

```
private function menuHandler(event:MenuEvent):void
            {
                var pathArray:Array = new Array();
                pathArray.push(event.item.@label);

                var parent:XML = event.item.parent(); 

                while(parent != null)
                {
                    pathArray.push(parent["@label"]);
                    parent = parent.parent();

                }
                pathArray.reverse();
                trace(pathArray)
            } 
```

# ios - 为以编程方式生成的视图实现自动布局

> ID：12593153
> 
> 赞同：9
> 
> 时间：2012-09-26T00:57:44.483
> 
> 标签：ios, uiview, interface-builder, ios6, autolayout

我有一个应用程序，其视图是以编程方式生成的。例子：

```
-(void)loadView
{
    [super loadView];

// SET TOP LEFT BTN FOR NEXT VIEW
UIBarButtonItem *topLeftBtn = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:nil action:nil];
self.navigationItem.backBarButtonItem = topLeftBtn;
[topLeftBtn release];

// programmatically set up the view for cart tableView
CGRect iouTableViewFrame = CGRectMake(0, 0, 320, 348);
iouTableView = [[UITableView alloc]initWithFrame:iouTableViewFrame style:UITableViewStylePlain];
[[self iouTableView] setDelegate:self];
[[self iouTableView] setDataSource:self];
[[self view] addSubview:iouTableView];

// set up the summary label
CGRect summaryTableFrame = CGRectMake(0, 348, 320, 18);
UILabel *summaryTableLabel = [[UILabel alloc] initWithFrame:summaryTableFrame];
[summaryTableLabel setFont:[UIFont fontWithName:@"Helvetica" size:14]];
[summaryTableLabel setText:@"   Summary"];
UIColor *labelColor = UIColorFromRGB(MiddleBlueColor);
[summaryTableLabel setBackgroundColor:labelColor];
[summaryTableLabel setTextColor:[UIColor whiteColor]];
[[self view] addSubview:summaryTableLabel];

// set up the summary table
CGRect summaryTableViewFrame = CGRectMake(0, 366, 320, 44);
summaryTableView = [[UITableView alloc]initWithFrame:summaryTableViewFrame style:UITableViewStylePlain];
[summaryTableView setScrollEnabled:NO];
[[self summaryTableView] setDelegate:self];
[[self summaryTableView] setDataSource:self];
[[self view] addSubview:summaryTableView];
} 
```

是的。将来我会更新到 NIB 并使用界面构建器和故事板，但我已经一年没有做过 ios 编程了。

随着新 iPhone 5 的屏幕尺寸不同，应用程序看起来不太好，我需要实现某种自动布局。现在有没有办法以编程方式而不是使用 IB？

非常感谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-27T13:52:01.193

是的，通过在 NSLayoutConstraint 中使用两种方法

```
-(NSArray*)constraintsWithVisualFormat:options:metrics:views:
-(NSLayoutConstraint*)constraintWithItem:attribute:relatedBy:toItem:attribute:
    multiplier:constant: 
```

视觉格式语言全部打包成一个 NSString 所以我会拿你的 iouTableView 为例。

```
[self.view addConstraints:[NSLayoutConstraint 
    constraintsWithVisualFormat:@"|[iouTableView]|" 
    options:0 
    metrics:nil 
    views:NSDictionaryOfVariableBindings(iouTableView)]]; 
```

管道符号“|” 代表superview的边缘。[] 代表一个视图。所以我们在那里所做的就是将 iouTableView 的左右边缘连接到其父视图的左右边缘。

另一个视觉格式的例子：让我们垂直挂钩你的表格视图、汇总标签和汇总表。

```
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:
    @"V:|[iouTableView(348)][summaryTableLabel(18)][summaryTableView(44)]"
    options:NSLayoutFormatAlignAllLeft
    metrics:nil
    views:NSDictionaryOfVariableBindings(iouTableView, summaryTableLabel, summaryTableView)]]; 
```

现在这将所有三个视图在它们的每个边缘上垂直连接起来，NSLayoutFormatAlignAllLeft 告诉所有视图左对齐，它们将根据其他约束（在本例中为前一个约束）这样做。()s 用于指定视图的大小。

有点像不等式和优先级以及“-”间隔符号，但[请查看苹果文档](https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html)

编辑：更正示例以使用 constraintsWithVisualFormat，如方法签名中所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T16:22:20.007

除了 Aplle 提供的方法之外，您还可以使用[Parus](https://github.com/DAlOG/Parus) lib 从代码中使用 AutoLayout 进行操作。

例如，您将能够指定：

```
PVVFL(@"[view1]-20-[view2]").fromRightToLeft.withViews(views).asArray 
```

代替

```
[NSLayoutConstraint constraintsWithVisualFormat:@"[view1]-20-[view2]"
                                        options:NSLayoutFormatDirectionRightToLeft
                                        metrics:nil
                                          views:views] 
```

您还可以对布局设置进行分组，混合 VFL 而不是 VFL 约束。 [Parus](https://github.com/DAlOG/Parus)能够防止常见错误，区分*位置*和*参数*约束，并提供出色的自动完成支持。

# shell - 测试命令：日志中重复的标题行

> ID：12593154
> 
> 赞同：0
> 
> 时间：2012-09-26T00:57:47.180
> 
> 标签：shell, unix, testing, ksh

我有一个脚本正在清点我的环境（不确定这是不是一个词）。

它出去并提取主机名操作系统、IP 和 ENV（开发、产品等）..然后将所有这些都吐到一个日志文件中

在我的脚本顶部，我检查了日志文件是否存在。

```
[[ -f $LOGFILE ]] || touch $LOGFILE && echo "ENV" "\t" "HOSTNAME" "\t" "OS" "\t" "IPADDRESS" 
```

我想要它做的是如果存在，什么也不做......否则触摸并回显标题到文件。

目前，每次运行它都会回显标题行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T01:34:54.953

如果后面的命令成功，像`||`这样`&&`在同一行上混合会导致问题。`||`建议将其扩展为完整的`if`声明。

```
if [[ ... ]]
then
   ...
else
   ...
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T01:56:55.817

您提供的代码无论如何都不会将该行回显到您的日志文件中。

```
[[ -f $LOGFILE ]] || printf "ENV\tHOSTNAME\tOS\tIPADDRESS" > $LOGFILE 
```

`printf`将“\t”解释为制表符。您不需要 touch 命令，因为文件将通过输出重定向创建并打开以供写入。

# php - 换行忽略 html 标签的长词或长字符

> ID：12593155
> 
> 赞同：1
> 
> 时间：2012-09-26T00:58:03.503
> 
> 标签：php, text, word-wrap

我需要包装长词，每一个都在跨度标签中，例如：

```
$string = 'aaaaaaaaaaaaaaaa{}^?¿*!-<a href="#">link here</a>aaaaaaaaaa<br />aaaa'; 
```

我需要打印这个：

（剪掉每 8 个字符，忽略 html 标签）

```
"<span>aaaaaaaa</span>
<span>aaaaaaaa</span>
<span>{}^?¿*!-</span>
<a href="#">link here</a>
<span>aaaaaaaa</span>
aa
<br />
aaaa" 
```

类似于 facebook 的原因`(<span class="word_break"></span>)`

脸书代码：

`<span>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</span><wbr></wbr><span class="word_break"></span>`

任何想法？:)

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T01:31:07.870

好吧，我有点不对劲。你需要 str_split(); 这应该给你一个可行的数组。

```
$str = 'aaaaaaaaaaaaaaaa{}^?¿*!-<a href="#">link here</a>aaaaaaaaaa<br />aaaa';

print_r(str_split($str, 8));

**This will return** 

(
    [0] => aaaaaaaa
    [1] => aaaaaaaa
    [2] => {}^*!-<a
    [3] =>  href="#
    [4] => ">link h
    [5] => ere</a>a
    [6] => aaaaaaaa
    [7] => a<br />a
    [8] => aaa
) 
```

[在这里查看文档](http://php.net/manual/en/function.str-split.php)

只需循环，为每个循环添加一个跨度。

**编辑**

我刚刚意识到这并不能解决“忽略 HTML 标签”的问题。你可能会很快调整它。请不要走上用正则表达式解析 HTML 的[*黑暗*](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)之路。阿罗哈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:05:23.660

我错了一个PHP函数`word_wrap`

```
<?php
$string = 'abcdefghijklmnop{}^??*!-<a href="#">link here</a>abcdefghij<br />abcd';

print_r(word_wrap($string));

// Function Starts Here
function word_wrap($string, $chunk_size = 8) {
    $offset = 0;
    $result = array();
    while(preg_match('#<(\w+)[^>]*>.*?</\1>|<\w+[^>]*/>#', $string, $match, PREG_OFFSET_CAPTURE, $offset)) {
        if($match[0][1] > $offset) {
            $non_html = substr($string, $offset, $match[0][1] - $offset);
            $chunks = str_split($non_html, $chunk_size );
            foreach($chunks as $s) {
                // Wrap text with length 8 in <span>, otherwise leave as it is
                $result[] = (strlen($s) == $chunk_size  ? "<span>" . $s . "</span>" : $s);
            }
        } 
        // Leave HTML tags untouched
        $result[] = $match[0][0];
        $offset = $match[0][1] + strlen($match[0][0]);
    }
    // Process last unmatched string
    if(strlen($string) > $offset) {
        $non_html = substr($string, $offset);
        $chunks = str_split($non_html, $chunk_size );
        foreach($chunks as $s) {
            $result[] = strlen($s) == $chunk_size  ? "<span>" . $s . "</span>" : $s;
        }
    } 
    return $result;
} 
```

产生的输出

```
Array
(
    [0] => <span>abcdefgh</span>
    [1] => <span>ijklmnop</span>
    [2] => <span>{}^??*!-</span>
    [3] => <a href="#">link here</a>
    [4] => <span>abcdefgh</span>
    [5] => ij
    [6] => <br />
    [7] => abcd
) 
```

# c# - 如何从管理员 c# 应用程序运行非管理员进程

> ID：12593157
> 
> 赞同：1
> 
> 时间：2012-09-26T00:58:07.793
> 
> 标签：c#, .net, uac

我有 ac# 应用程序需要以管理员身份做一些事情（一些安装工作），然后它需要以非管理员身份运行另一个进程。我以前没有对 UAC 做过任何事情，但我认为一定有办法做到这一点，对吧？

这也需要自动化，因此假设 c# 应用程序是使用管理员凭据启动的。

基本上，该程序将需要执行以下操作：

```
// MUST run this process as admin
Process adminInstall = new Process();
adminInstall.StartInfo.FileName = "install.bat";
adminInstall.Start();
adminInstall.WaitForExit();

// CANNOT run this process as admin
Process nonAdminProcess = new Process();
nonAdminProcess.StartInfo.FileName = "runner.cmd";
nonAdminProcess.StartInfo.UseShellExecute = false;
nonAdminProcess.StartInfo.RedirectStandardOutput = true;
nonAdminProcess.OutputDataReceived += new DataReceivedEventHandler(myHandler);
nonAdminProcess.Start();
nonAdminProcess.BeginOutputReadLine();
nonAdminProcess.WaitForExit(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T18:54:14.070

您可以在编译二进制文件之后、签名之前使用平台 SDK 中的 MT.exe（清单工具）将清单嵌入到可执行文件中。您还可以选择在项目属性中使用自定义清单。打开项目属性，然后转到应用程序选项卡，然后将清单选项从默认清单更改为自定义清单。Visual Studio 将向您的项目添加一个清单，您可以在其中指定“requireAdministrator”权限。当您的应用程序运行时，它将提供 UAC 提示，或者如果以用户身份登录，则要求提供凭据。子进程也很有可能以管理员身份启动。否则，您将需要使用未记录的“runas”动词来启动它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:07:25.497

如果上述方法都不可行，那么你可以试试我的方法。但它丑陋；您需要获取非管理员进程的句柄，然后使用`DuplicateTokenEx`(p/invoke) 复制其（非管理员）权限，然后将其传递到`CreateProcessAsUser`. 您首先需要确定一个非管理进程，但可能没有。新创建的进程将以您复制的令牌包含的任何权限生成，而不是父进程的令牌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T01:17:56.350

Process.Start 参数有一个用于用户名。请参阅 Process.Start 参考：

[http://msdn.microsoft.com/en-us/library/sxf2saat.aspx](http://msdn.microsoft.com/en-us/library/sxf2saat.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T01:18:19.243

使用 .Net 类似乎没有一种很好的方法。但是，[Process.Start with different credentials with UAC on](https://stackoverflow.com/questions/2313553/process-start-with-different-credentials-with-uac-on)解释了在从另一个进程窃取句柄后使用 CreateProcessAsUserW 执行此操作的方法。

# r - R colnames：几个字符变量名改为数字

> ID：12593158
> 
> 赞同：0
> 
> 时间：2012-09-26T00:58:11.397
> 
> 标签：r, replace, character, row, variable-names

我有一个名为 VarChange 的数据框，其中包含 1005 个变量，例如：

```
 row.name   SamplingEvent  Year  Zenaida_macroura  . . . 1005 variables
1  12367      S41            2005  0
2  12369      S42            2005  X
3  12370      S43            2005  4
4  OldSppName SamplingEvent  Year  Zenaida_macroura
5  NewSppName SampEvent      Year  Zenamacr 
```

我的目标是将数据框的列名更改为名为“NewSppName”的行（最多 8 个字母代码相当于当前变量名）。这是为了不丢失 ArcMap 中的各种变量的跟踪（它将所有变量名称截断为 8 个字符）。

当我要求时，每件事看起来都不错（即 R 输出适当的 NewSppNames）：

```
Var['NewSppName',] 
```

但是当我使用：

```
colnames(VarChange) <- VarChange['NewSppName', ] 
```

或者

```
colnames(VarChange) <- as.character(VarChange["NewSppName",]) 
```

我得到以下输出：

```
 row.names  7              Year  8            . . . 1005 variables
1  12367      S41            2005  0
2  12369      S42            2005  X
3  12370      S43            2005  4
4  OldSppName SamplingEvent  Year  Zenaida_macroura
5  NewSppName SampEvent      Year  Zenamacr 
```

95% 的变量确实将名称更改为 NewSppName 中的值，但有十几个更改为数字而不是 NewSppName 中存在的字符名称。

有什么理由吗？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T01:55:37.523

使用索引时，您需要使用逻辑或数字或行名之一。仅仅因为您有一个名为 'row.name' 的列不会告诉 R 将其用于索引。

```
VarChange <- read.table(text="   row.name   SamplingEvent  Year  Zenaida_macroura  
1  12367      S41            2005  0
2  12369      S42            2005  X
3  12370      S43            2005  4
4  OldSppName SamplingEvent  Year  Zenaida_macroura
5  NewSppName SampEvent      Year  Zenamacr
", header=TRUE)
> as.character(VarChange["NewSppName",])
[1] "NA" "NA" "NA" "NA" 
```

因此，要么使用 '5' ，要么构造正确的逻辑向量`VarChange$row.names=="NewSppName"`。您可能会得到不同的结果，因为您的工作区中有一些不同的对象被命名为“NewSppName”。您还需要通过 sapply()-ing 安全地转换为字符`as.character`，因为它们是具有不同级别的因素，并且全局 as.character(.) 不会成功：

```
> sapply(VarChange[VarChange$row.name=="NewSppName",] ,as.character)
        row.name    SamplingEvent             Year Zenaida_macroura 
    "NewSppName"      "SampEvent"           "Year"       "Zenamacr" 

> colnames(VarChange) <- sapply(VarChange[5,] ,as.character)
> VarChange
  NewSppName     SampEvent Year         Zenamacr
1      12367           S41 2005                0
2      12369           S42 2005                X
3      12370           S43 2005                4
4 OldSppName SamplingEvent Year Zenaida_macroura
5 NewSppName     SampEvent Year         Zenamacr 
```

# r - 通过保留模板中列的顺序，将表格与数据与其他 .csv 模板相结合

> ID：12593159
> 
> 赞同：0
> 
> 时间：2012-09-26T00:58:12.840
> 
> 标签：r

我有一个名为 的数据表`dat`，如下所示：

```
 Alison.Wong Bruno.Dumon Edward.J..Yoon Eugene.Koontz Jakob.Homan
Alison Wong              0           0              0             1           1
Bruno Dumon              0           0              0             0           1
Edward J. Yoon           0           1              0             0           0
Eugene Koontz            0           0              0             0           1
Jakob Homan              1           0              1             0           0 
```

输入（头（数据）

```
structure(list(Alison.Wong = c(0L, 0L, 0L, 0L, 1L), Bruno.Dumon = c(0L, 
0L, 1L, 0L, 0L), Edward.J..Yoon = c(0L, 0L, 0L, 0L, 1L), Eugene.Koontz = c(1L, 
0L, 0L, 0L, 0L), Jakob.Homan = c(1L, 1L, 0L, 1L, 0L)), .Names = c("Alison.Wong", 
"Bruno.Dumon", "Edward.J..Yoon", "Eugene.Koontz", "Jakob.Homan"
), row.names = c("Alison Wong", "Bruno Dumon", "Edward J. Yoon", 
"Eugene Koontz", "Jakob Homan"), class = "data.frame") 
```

如何通过保留模板中列的顺序以及保留输入文件 ( `dat`) 中的数据，将上面的表格（包含数据）与其他 .csv 模板结合起来，并以其他名称保存。

示例模板文件：

```
 Adrian.Cole Alison.Wong Andrei.Savu Bruno.Dumon Edward.J..Yoon
Adrian Cole               0           0           0           0              0
Alison Wong               0           0           0           0              0
Andrei Savu               0           0           0           0              0
Bruno Dumon               0           0           0           0              0
Edward J. Yoon            0           0           0           0              0
Eugene Koontz             0           0           0           0              0
Jakob Homan               0           0           0           0              0
Kelvin Kakugawa           0           0           0           0              0
                Eugene.Koontz Jakob.Homan Kelvin.Kakugawa
Adrian Cole                 0           0               0
Alison Wong                 0           0               0
Andrei Savu                 0           0               0
Bruno Dumon                 0           0               0
Edward J. Yoon              0           0               0
Eugene Koontz               0           0               0
Jakob Homan                 0           0               0
Kelvin Kakugawa             0           0               0 
```

输入（头（模板））：

```
structure(list(Adrian.Cole = c(0L, 0L, 0L, 0L, 0L, 0L), Alison.Wong = c(0L, 
0L, 0L, 0L, 0L, 0L), Andrei.Savu = c(0L, 0L, 0L, 0L, 0L, 0L), 
    Bruno.Dumon = c(0L, 0L, 0L, 0L, 0L, 0L), Edward.J..Yoon = c(0L, 
    0L, 0L, 0L, 0L, 0L), Eugene.Koontz = c(0L, 0L, 0L, 0L, 0L, 
    0L), Jakob.Homan = c(0L, 0L, 0L, 0L, 0L, 0L), Kelvin.Kakugawa = c(0L, 
    0L, 0L, 0L, 0L, 0L)), .Names = c("Adrian.Cole", "Alison.Wong", 
"Andrei.Savu", "Bruno.Dumon", "Edward.J..Yoon", "Eugene.Koontz", 
"Jakob.Homan", "Kelvin.Kakugawa"), row.names = c("Adrian Cole", 
"Alison Wong", "Andrei Savu", "Bruno Dumon", "Edward J. Yoon", 
"Eugene Koontz"), class = "data.frame") 
```

此示例的示例输出：

```
 Adrian.Cole Alison.Wong Andrei.Savu Bruno.Dumon Edward.J..Yoon
Adrian Cole               0           0           0           0              0
Alison Wong               0           0           0           0              0
Andrei Savu               0           0           0           0              0
Bruno Dumon               0           0           0           0              0
Edward J. Yoon            0           0           0           1              0
Eugene Koontz             0           0           0           0              0
Jakob Homan               0           1           0           0              1
Kelvin Kakugawa           0           0           0           0              0
                Eugene.Koontz Jakob.Homan Kelvin.Kakugawa
Adrian Cole                 0           0               0
Alison Wong                 1           1               0
Andrei Savu                 0           0               0
Bruno Dumon                 0           1               0
Edward J. Yoon              0           0               0
Eugene Koontz               0           1               0
Jakob Homan                 0           0               0
Kelvin Kakugawa             0           0               0 
```

我尝试使用以下脚本，但它不起作用。

```
template<- read.table("CR_template.csv", header=T, sep=",", row.names=1)
    template[match(rownames(cr), rownames(template)) , names(cr)] <- cr[ , names(cr)]
    result <- merge(cr, template)
    write.csv(result, paste("CR_FILES_", a.files[i], sep="")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:13:48.150

使用您提供的示例，这非常简单：

```
template[ , names(dat)] <- dat[ , names(dat)] 
```

但是，您发布的数据与您为“dat”和“模板”报告的（方形）维度不匹配。所以我建议你发布一个小得多的例子`dat`，比如 5 x 5，和一个稍微大一点的“模板”例子，比如 8 x 8，并发布你认为正确答案应该是什么。

如果需要对列和行进行交错，那么沿着这些思路可能会成功，但目前我认为它未经测试：

```
template[match(rownames(dat), rownames(template)) , names(dat)] <- dat[ , names(dat)] 
```

对于编辑后的版本，这有效：

```
datrows <- match(rownames(template), rownames(dat) )
transfer <- dat[ datrows[!is.na(datrows)], ]
template[rownames(transfer) , colnames(transfer) ] <- transfer

> template
               Adrian.Cole Alison.Wong Andrei.Savu Bruno.Dumon Edward.J..Yoon Eugene.Koontz Jakob.Homan
Adrian Cole              0           0           0           0              0             0           0
Alison Wong              0           0           0           0              0             1           1
Andrei Savu              0           0           0           0              0             0           0
Bruno Dumon              0           0           0           0              0             0           1
Edward J. Yoon           0           0           0           1              0             0           0
Eugene Koontz            0           0           0           0              0             0           1
               Kelvin.Kakugawa
Adrian Cole                  0
Alison Wong                  0
Andrei Savu                  0
Bruno Dumon                  0
Edward J. Yoon               0
Eugene Koontz                0 
```

# ruby - 使用 Ruby 通过 Outlook 发送消息的最简单方法是什么？

> ID：12593166
> 
> 赞同：5
> 
> 时间：2012-09-26T00:58:52.740
> 
> 标签：ruby, outlook, win32ole

我的工作要求我为某些测试自动生成电子邮件。我一直在环顾四周，但未能找到可以快速实施的合理解决方案。它需要在 Outlook 而不是其他邮件服务器中，因为我们有一些奇怪的身份验证规则，我们需要保存草稿而不是仅仅发送邮件的选项。

显然 win32ole 可以做到这一点，但我找不到任何相当简单的例子。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T01:09:51.407

假设 Outlook 凭据已存储并且您设置为自动登录到 Outlook，WIN32OLE 可以很好地做到这一点：

```
require 'win32ole'
outlook = WIN32OLE.new('Outlook.Application')
message = outlook.CreateItem(0)
message.Subject = "Hey look a subject!"
message.Body = "Yes this is dog"
message.Recipients.Add 'dog@dog.com'
message.Recipients.Add 'cat@dog.com'
message.Attachments.Add('C:\Path\To\File.txt')
#Want to save as a draft?
message.Save
#Want to send instead?
message.Send 
```

这实际上在“[使用 Ruby 自动化 Outlook：将邮件消息保存到文件](http://rubyonwindows.blogspot.ca/search/label/outlook)”中得到了很好的记录，就像使用 Ruby 自动化其余窗口一样。

您可能遇到授权问题，如果出现，可以使用“ [Outlook 高级安全性](http://www.mapilab.com/outlook/security/)”解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T20:37:55.467

如果 Outlook 帐户具有 Web 访问权限（通过 outlook.com 或 office365.com），您还可以使用[Mikel Lindsaar 的 Ruby 电子邮件库](https://github.com/mikel/mail)。它适用于许多允许 POP3、IMAP4 或 SMTP 连接的不同电子邮件提供商。

我发布了一个条目，其中包含一些关于[通过 Ruby 发送和接收 Outlook 电子邮件](http://www.johnantony.com/sending-and-receiving-outlook-email-via-ruby/)的示例代码，这可能会有所帮助。抱歉，我无法评论如何保存草稿。

# javascript - 使用 Chrome 开发者工具编辑 Javascript

> ID：12593168
> 
> 赞同：101
> 
> 时间：2012-09-26T00:58:58.990
> 
> 标签：javascript, google-chrome, web-developer-toolbar

我正在尝试使用 Chrome 的开发人员工具在网站上编辑 javascript。我已经阅读了大约 30 个关于如何执行此操作的帐户并观看了一些视频。事实是，当我转到源选项卡并打开要编辑的文件时，我无能为力。我缺少一些步骤吗？

我可以创建断点、单步执行等……我只是无法编辑。最近是否删除了此功能？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-04-03T13:53:14.057

我知道这个问题已经过时了，但我刚刚遇到了类似的问题并找到了解决方案。

如果您对文件进行了美化，Chrome 将不允许编辑。我将其关闭并能够进行编辑。愿意打赌这是/曾经是你的问题。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-12-07T20:32:32.333

您可以在“源”选项卡上的开发人员工具中编辑 javascript，但它只允许您在自己的文件中编辑 javascript。嵌入在 HTML（或 PHP）文件中的脚本将保持只读状态。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-05-22T21:03:47.050

它有一些限制：

1.  必须是一个JS文件。不能在 html 页面中嵌入标签。

2.  它不能被美化。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-03-26T19:38:41.910

我不知道你是否需要这个永久保存，但如果你只需要临时修改js：

我可以将要修改的 javascript 复制到文本编辑器中，对其进行编辑，然后将其粘贴到控制台中，它将重新定义任何函数或我需要重新定义的任何内容。

例如，如果页面有：

```
<script>
var foo = function() { console.log("Hi"); }
</script> 
```

我可以获取脚本之间的内容，对其进行编辑，然后将其输入到调试器中，例如：

```
foo = function() { console.log("DO SOMETHING DIFFERENT"); } 
```

它会为我工作。

或者如果你喜欢，

```
function foo() {
    doAThing();
} 
```

你可以输入

```
function foo() {
    doSomethingElse();
} 
```

和 foo 将被重新定义。

可能不是最好的解决方法，但它确实有效。将持续到您重新加载页面。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-04-24T03:21:58.660

我确实搜索了“chrome dev tool edit javascript”。此页面是第一个搜索结果。但它太过时了，它对我没有帮助。

我使用的是 Chrome 73，这个版本的 Chrome 有“启用本地覆盖”选项。使用该功能，我可以编辑 javascript 并可以运行和调试。

[![在此处输入图像描述](../Images/f2cce97b0fa06d86bad9c3852f4c0434.png)](https://i.stack.imgur.com/T92vs.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-30T21:20:12.673

我的解决方案：

1.  在 devtools 首选项中，选中启用本地覆盖。
2.  转到网络选项卡，找到要编辑的文件，单击它并选择保存以覆盖（在源/覆盖选项卡上，您需要添加本地文件夹）
3.  该文件作为本地副本出现在 Sources 选项卡上的新选项卡中，因此您可以编辑此文件，并且在站点重新加载后，新的（和编辑的）覆盖文件将加载到站点上！

# ipad - 用于从 iPad 上 Safari 中的操作列表调用 onChange 的书签

> ID：12593172
> 
> 赞同：0
> 
> 时间：2012-09-26T00:59:27.287
> 
> 标签：ipad, safari, onchange, bookmarklet, actionlist

我的工作使用专有系统来存储医疗记录。该网站是用 javascript 编码的，我们无法更改网站的编码。我们想使用 iPad 访问该站点，该站点是通过提供 HTML 的浏览器访问的。

有一个具有 onChange 值的下拉列表，当从下拉列表中选择一个项目时，将调用 onChange="doAction(this)"。这在桌面浏览器中运行良好，但是 iPad 不支持 onChange。我知道另一种方法是使用 onBlue，但是我们无权更改 HTML。

我希望我们能做的是添加一个一旦点击的小书签，原则上就是 onChange 事件所做的。

当前的动作列表 HTML 是：

```
<select class="actionList" onChange="doAction(this)" style="width:100%"><option class="actionHeading" selected value="nothing">Select action ..</option><option class="action" value="moreInfo">&nbsp;&nbsp;More Info (shortcut key ' i ')</option><option class="actionHeading" disabled>Add Electronic Form ..</option><option class="action" value="xform-progressnotes-amendment-discharge">&nbsp;&nbsp;Amendment Discharge Summary</option><option class="action" value="xform-progressnotes-clinical-review">&nbsp;&nbsp;Clinical Review</option><option class="action" value="xform-dischargesummary">&nbsp;&nbsp;Discharge Summary</option><option class="action" value="xform-progressnotes-family-work">&nbsp;&nbsp;Family Work</option><option class="action" value="xform-progressnotes-medical-review">&nbsp;&nbsp;Medical Review</option><option class="action" value="xform-medicationsummary">&nbsp;&nbsp;Medication Summary Form</option><option class="action" value="xform-operationrecord">&nbsp;&nbsp;Operation Sheet</option><option class="action" value="xform-progressnotes-inpatient">&nbsp;&nbsp;Progress Notes</option><option class="action" value="xform-progressnotes-weekly-summary">&nbsp;&nbsp;Weekly Summary</option></select></td> 
```

我想在书签中拥有的唯一选项是“选择”医学评论选项，即

```
<option class="action" value="xform-progressnotes-medical-review">&nbsp;&nbsp;Medical Review</option> 
```

onChange="doAction(this)" 的 javascript 是：

```
function doAction(selectObj)
                {
                    var xformPrefix = 'xform-';
                    var chartPrefix = 'chart-';

                    var action = selectObj.value;
                    selectObj.selectedIndex = 0;
                    if (action == 'moreInfo')
                    {
                        moreInfo();
                    }
                    else if (action == 'referForAttn')
                    {
                        referForAttn();
                    }
                    else if(action.startsWith(chartPrefix)) {

                        var chartName = action.substring(chartPrefix.length);
                        var url;
                        var processedURL;

                        var checkExistUrl = '/udr/json/?action=chartsdescription';
                        checkExistUrl += '&patientId=630402';
                        checkExistUrl += '&chartName=' + chartName;
                        $.ajax({
                            async:false,
                            dataType:"json",
                            url:checkExistUrl,
                            success:function(data){

                                if(data.description != "")
                                {
                                    var answer = confirm(data.description);
                                }

                                if(answer || data.description == "")
                                {

                                }
                            }
                        });
                    }
                    else if (action.startsWith(xformPrefix))
                    {
                        var xformName = action.substring(xformPrefix.length);
                        var url;
                        var windowWidth;
                        var windowHeight;
                        var processedURL;

                            if (xformName == 'progressnotes-amendment-discharge')
                            {
                                url = '/oip-forms-viewer/forms/templates?udrSessionId=BF0C3C8399163439782C67D2757477DC&formName=progressnotes-amendment-discharge&patientId=630402&episodeId=458698&transactionId=&xformAction=new&sectionId=Admission';

                                processedURL = '%2Foip-forms-viewer%2Fforms%2Ftemplates%3FudrSessionId%3DBF0C3C8399163439782C67D2757477DC%26formName%3Dprogressnotes-amendment-discharge%26patientId%3D630402%26episodeId%3D458698%26transactionId%3D%26xformAction%3Dnew%26sectionId%3DAdmission'

                        windowWidth = 800;
                        windowHeight = 500;
                    }

                            if (xformName == 'progressnotes-clinical-review')
                            {
                                url = '/oip-forms-viewer/forms/templates?udrSessionId=BF0C3C8399163439782C67D2757477DC&formName=progressnotes-clinical-review&patientId=630402&episodeId=458698&transactionId=&xformAction=new&sectionId=Admission';

                                processedURL = '%2Foip-forms-viewer%2Fforms%2Ftemplates%3FudrSessionId%3DBF0C3C8399163439782C67D2757477DC%26formName%3Dprogressnotes-clinical-review%26patientId%3D630402%26episodeId%3D458698%26transactionId%3D%26xformAction%3Dnew%26sectionId%3DAdmission'

                        windowWidth = 800;
                        windowHeight = 500;
                    }

                            if (xformName == 'dischargesummary')
                            {
                                url = '/oip-forms-viewer/forms/templates?udrSessionId=BF0C3C8399163439782C67D2757477DC&formName=dischargesummary&patientId=630402&episodeId=458698&transactionId=&xformAction=new&sectionId=Admission';

                                processedURL = '%2Foip-forms-viewer%2Fforms%2Ftemplates%3FudrSessionId%3DBF0C3C8399163439782C67D2757477DC%26formName%3Ddischargesummary%26patientId%3D630402%26episodeId%3D458698%26transactionId%3D%26xformAction%3Dnew%26sectionId%3DAdmission'

                        windowWidth = 800;
                        windowHeight = 550;
                    }

                            if (xformName == 'progressnotes-family-work')
                            {
                                url = '/oip-forms-viewer/forms/templates?udrSessionId=BF0C3C8399163439782C67D2757477DC&formName=progressnotes-family-work&patientId=630402&episodeId=458698&transactionId=&xformAction=new&sectionId=Admission';

                                processedURL = '%2Foip-forms-viewer%2Fforms%2Ftemplates%3FudrSessionId%3DBF0C3C8399163439782C67D2757477DC%26formName%3Dprogressnotes-family-work%26patientId%3D630402%26episodeId%3D458698%26transactionId%3D%26xformAction%3Dnew%26sectionId%3DAdmission'

                        windowWidth = 800;
                        windowHeight = 500;
                    }

                            if (xformName == 'progressnotes-medical-review')
                            {
                                url = '/oip-forms-viewer/forms/templates?udrSessionId=BF0C3C8399163439782C67D2757477DC&formName=progressnotes-medical-review&patientId=630402&episodeId=458698&transactionId=&xformAction=new&sectionId=Admission';

                                processedURL = '%2Foip-forms-viewer%2Fforms%2Ftemplates%3FudrSessionId%3DBF0C3C8399163439782C67D2757477DC%26formName%3Dprogressnotes-medical-review%26patientId%3D630402%26episodeId%3D458698%26transactionId%3D%26xformAction%3Dnew%26sectionId%3DAdmission'

                        windowWidth = 800;
                        windowHeight = 500;
                    }

                            if (xformName == 'medicationsummary')
                            {
                                url = '/oip-forms-viewer/forms/templates?udrSessionId=BF0C3C8399163439782C67D2757477DC&formName=medicationsummary&patientId=630402&episodeId=458698&transactionId=&xformAction=new&sectionId=Admission';

                                processedURL = '%2Foip-forms-viewer%2Fforms%2Ftemplates%3FudrSessionId%3DBF0C3C8399163439782C67D2757477DC%26formName%3Dmedicationsummary%26patientId%3D630402%26episodeId%3D458698%26transactionId%3D%26xformAction%3Dnew%26sectionId%3DAdmission'

                        windowWidth = 800;
                        windowHeight = 760;
                    }

                            if (xformName == 'operationrecord')
                            {
                                url = '/oip-forms-viewer/forms/templates?udrSessionId=BF0C3C8399163439782C67D2757477DC&formName=operationrecord&patientId=630402&episodeId=458698&transactionId=&xformAction=new&sectionId=Admission';

                                processedURL = '%2Foip-forms-viewer%2Fforms%2Ftemplates%3FudrSessionId%3DBF0C3C8399163439782C67D2757477DC%26formName%3Doperationrecord%26patientId%3D630402%26episodeId%3D458698%26transactionId%3D%26xformAction%3Dnew%26sectionId%3DAdmission'

                        windowWidth = 800;
                        windowHeight = 760;
                    }

                            if (xformName == 'progressnotes-inpatient')
                            {
                                url = '/oip-forms-viewer/forms/templates?udrSessionId=BF0C3C8399163439782C67D2757477DC&formName=progressnotes-inpatient&patientId=630402&episodeId=458698&transactionId=&xformAction=new&sectionId=Admission';

                                processedURL = '%2Foip-forms-viewer%2Fforms%2Ftemplates%3FudrSessionId%3DBF0C3C8399163439782C67D2757477DC%26formName%3Dprogressnotes-inpatient%26patientId%3D630402%26episodeId%3D458698%26transactionId%3D%26xformAction%3Dnew%26sectionId%3DAdmission'

                        windowWidth = 800;
                        windowHeight = 500;
                    }

                            if (xformName == 'progressnotes-weekly-summary')
                            {
                                url = '/oip-forms-viewer/forms/templates?udrSessionId=BF0C3C8399163439782C67D2757477DC&formName=progressnotes-weekly-summary&patientId=630402&episodeId=458698&transactionId=&xformAction=new&sectionId=Admission';

                                processedURL = '%2Foip-forms-viewer%2Fforms%2Ftemplates%3FudrSessionId%3DBF0C3C8399163439782C67D2757477DC%26formName%3Dprogressnotes-weekly-summary%26patientId%3D630402%26episodeId%3D458698%26transactionId%3D%26xformAction%3Dnew%26sectionId%3DAdmission'

                        windowWidth = 800;
                        windowHeight = 500;
                    }

                var newForm;
                var confirmMsg = "There is another e-form opened. \n";
                confirmMsg += "Press \"Cancel\" to finish editing the open e-form\n";
                confirmMsg += "Press \"OK\" to discard it and open a new one.";
                try {
                    var location = findFrame(top, 'main').win.document.location;
                    newForm = confirm(confirmMsg);
                }
                catch(e) {
                    newForm = true;
                }
                if(newForm) {
                    try {
                        findFrame(top, 'main').win.close();
                    }
                    catch(e) {}

                    findFrame(top, 'main').win = openCentredWindow(url, 'xformWindow', windowWidth, windowHeight);

                    try {
                        // setting the window title change on window load
                        $(findFrame(top, 'main').win).load(changeEformWindowTitle);
                    }
                    catch(e) {
                        // nothing to report
                    }
                    try {
                        // trying to change the window title early if the on load hasn't worked
                        setTimeout('changeEformWindowTitle()', 2000);
                    }
                    catch(e) {
                        // nothing to report
                    }
                    try {
                        // doing it a second time in case the first attempt was too early.
                        setTimeout('changeEformWindowTitle()', 8000);
                    }
                    catch(e) {
                        // nothing to report
                    }
                    try {
                        // doing it a third time 40 seconds later in case it there was a pre-fill.
                        setTimeout('changeEformWindowTitle()', 40000);
                    }
                    catch(e) {
                        // nothing to report
                    }
                }
                else {
                    findFrame(top, 'main').win.focus();
                }
            }
        } 
```

您能提供的任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:39:04.723

Your best bet is to place a proxy server between the ipad and the actual product. This proxy can then modify the html generated by the proprietary system.

You can look into nginx as a newbie friendly solution for proxying.

Cheers, T.

PS : I dont believe bookmarklets work on iPads. Even if they did, it would be a terrible UI.

# android - 如何通过 Android Manifest 使我的 Android 应用全屏显示？

> ID：12593177
> 
> 赞同：12
> 
> 时间：2012-09-26T01:00:27.793
> 
> 标签：android, sdk

我该怎么做呢？有什么建议么？顺便说一句，我正在使用带有 AIDE 的 SDK。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-26T01:07:33.507

进入清单并使用全屏主题。

```
 <activity
       android:name=".Foo"   
       android:label="@string/foo" 
       android:theme="@android:style/Theme.NoTitleBar.Fullscreen"> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-12-30T05:28:58.090

此代码使当前活动全屏显示。没有状态栏或除活动窗口之外的任何东西！

```
 public class FullScreen extends Activity {
      @Override
       public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.main);
} 
} 
```

编辑 AppCompactActivity

```
<style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
    <!-- Customize your theme here. -->
    <item name="colorPrimary">@color/orange</item>
    <item name="colorPrimaryDark">@android:color/holo_orange_dark</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowFullscreen">true</item>
</style> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-26T02:57:38.577

如果您想要全屏，请将此属性放入清单文件中`<activity />`或`<application />`标记

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-26T02:44:32.013

同意[SquiresSquire](https://stackoverflow.com/a/12593222/996493)给出的上述答案。只需在答案中添加更多信息，我想提出我的答案。

您可以通过两种方式使您的应用程序全屏显示，

*   使任何特定活动全屏

    在活动标签中添加主题元素

    ```
    <activity
             android:name=".YourActivityName"
             android:theme="@android:style/Theme.NoTitleBar."> 
    ```

*   制作全屏整个应用程序

    添加带有应用程序标签的主题元素

    ```
    <application
             android:icon="@drawable/icon"
             android:theme="@android:style/Theme.NoTitleBar."> 
    ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T07:05:01.733

要将您的应用程序或任何个人活动显示设置为全屏模式，

在 AndroidManifest .xml 文件中插入代码

```
@android:style /Theme. NoTitle Bar.Fullscreen 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-12-12T02:29:23.140

这对我很有效。

```
android:theme="@style/Theme.AppCompat.NoActionBar" 
```

# ruby-on-rails - 在 Rails admin 中使用 Ajax 更新文本区域

> ID：12593180
> 
> 赞同：0
> 
> 时间：2012-09-26T01:00:43.003
> 
> 标签：ruby-on-rails, ruby, ajax

这个片段来自我的管理员。我在图像旁边有一个描述字段，以及它下面的演示。

现在它在页面刷新后工作，但我希望它使用 AJAX 异步工作，所以当用户键入它时，它会更新 textarea 下面的演示。![在此处输入图像描述](../Images/e7ce2b86078859678664523b418cd083.png)

```
#This is where you update the field
<tr><th>Description</th><td><%= f.text_area(:description) %></td></tr>

    <tr><th>Demo</th>
      <td>
      <% if @org.images.present?  %>
          <table border="0">
            <tr>
            <td>
            <%= featured_image_tag(@org, :type => 'organization')  %>
            </td>
            <td style="vertical-align:top;padding-top:5px;padding-left:5px;">
            <span class="font-avebook"><%= @org.description  %>  </span><br> 
            </td>
            </tr>
            </table>
          <% else   %>    
        You need to assoicate an image first before seeing the demo!
      <% end  %>    
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:58:49.380

要让文本在您编写的同时直接出现在下方，您需要使用[jQuery Keyup](http://api.jquery.com/keyup/)事件来提交数据。但是，在每次键入后提交数据并不是最好的主意。如果您想获得这种效果，为什么不直接使用 jQuery 完成整个操作而不实际保存数据。您可以在每次键入后将输入内容附加到图像旁边的元素。我在下面做了一个小演示。

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <input type="text" id="copy_text">
  <div id="mirror_paragraph"></div>
<script>
    $("#copy_text").keyup(function () {
      var txt = $("#copy_text").val();
      $("#mirror_paragraph").html(txt);
    });
</script>

</body>
</html>​​​​​​​​​​​ 
```

适应您的代码：

```
<tr>
  <th>Description</th>
  <td><%= f.text_area(:description), :id => "copy_text" %></td>
</tr>

<tr>
  <th>Demo</th>
  <td>
    <% if @org.images.present? %>
        <table border="0">
          <tr>
            <td>
              <%= featured_image_tag(@org, :type => 'organization') %>
            </td>
            <td style="vertical-align:top;padding-top:5px;padding-left:5px;">
              <span class="font-avebook" id="mirror_paragraph"><%= @org.description %>  </span><br>
            </td>
          </tr>
        </table>
    <% else %>
        You need to assoicate an image first before seeing the demo!
    <% end %>
  </td>
</tr>

<script>
    $("#copy_text").keyup(function () {
      var txt = $("#copy_text").val();
      $("#mirror_paragraph").html(txt);
    });
</script> 
```

# php - 上传时自动编号文件

> ID：12593184
> 
> 赞同：1
> 
> 时间：2012-09-26T01:01:25.637
> 
> 标签：php, upload, thumbnails, jpeg, file-rename

我已经编辑了标题，所以我希望这对您有所帮助...

案例：我有很多图像并已将其上传到服务器。我是用数字手动更改他们的名字。当然我记得文件的最后一个数字，但是谁能帮我上传脚本，使我能够检查服务器文件夹中存在的最后一个数字并重命名我要上传的文件，以便文件的名称是 last_number_exist_on_server+ 1？

啊，帮助生成特定文件夹和大小的缩略图也将不胜感激。

最后但并非最不重要的一点是，我正在使用 PHP。没有数据库......并且图像文件类型是JPG。

对不起，新手的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T01:14:00.813

注意：这里有零错误检查。在生产中使用之前添加一些！:)

```
<?php

// get the next number for our filename

// returns an array of files and directories in descending alpha-order
$files = scandir("./images", SCANDIR_SORT_DESCENDING);

$last_filename = array_shift($files);
$last_number   = (int)substr($last_filename, 0, strrpos($last_filename, "."));
$next_number   = $last_number++;

// now rename your file...
?> 
```

# django - 将两个带注释的结果合并到一个字典中

> ID：12593185
> 
> 赞同：2
> 
> 时间：2012-09-26T01:01:34.080
> 
> 标签：django, dictionary, django-queryset, annotate

我必须注释结果：

```
cred_rec = Disponibilidad.objects.values('mac__mac', 'int_mes').annotate(tramites=Count('fuar'), recibidas=Count('fecha_disp_mac')
cred14   = Disponibilidad.objects.filter(int_disponible__lte=14).values('mac__mac', 'int_mes').annotate(en14=Count('fuar')) 
```

两者都有相同的键`'mac__mac'`，`'int_mes'`我想要的是用 in`cred_red`和`en14`from的键创建一个新字典`cred14`。

我尝试了一些在[这里](https://stackoverflow.com/questions/5945912/how-to-get-the-difference-of-two-querysets-in-django)[找到的](https://stackoverflow.com/questions/431628/how-to-combine-2-or-more-querysets-in-a-django-view)[答案](https://stackoverflow.com/questions/720966/django-how-to-merge-two-related-querysets-in-django-0-96) ，但我错过了一些东西。

谢谢。

**编辑。**经过一些尝试和错误，我得到了这个：

```
for linea in cred_rec:
  clave = (linea['mac__mac'], linea['int_mes'])
  for linea2 in cred14:
    clave2 = (linea2['mac__mac'], linea2['int_mes'])
    if clave2 == clave:
      linea['en14'] = linea2['en14']
      linea['disp'] = float(linea2['en14'])/linea['recibidas']*100 
```

现在，我不得不寻求更好的解决方案。再次感谢。

======= **编辑** 这是输入的样子：

```
fuar, mac_id, int_mes, int_disponible, int_exitoso, fecha_tramite, fecha_actualiza_pe, fecha_disp_mac
1229012106349,1,7,21,14,2012-07-02 08:33:54.0,2012-07-16 17:33:21.0,2012-07-23 08:01:22.0
1229012106350,1,7,25,17,2012-07-02 09:01:25.0,2012-07-19 17:45:57.0,2012-07-27 17:45:59.0
1229012106351,1,7,21,14,2012-07-02 09:15:12.0,2012-07-16 19:14:35.0,2012-07-23 08:01:22.0
1229012106352,1,7,24,16,2012-07-02 09:25:19.0,2012-07-18 07:52:18.0,2012-07-26 16:04:11.0
... a few  thousand lines dropped ... 
```

`fuar`就像一个 order_id ；`mac__mac`就像`site_id`, mes 是`month`; `int_disponible`是 和 之间的时间`fecha_tramite`增量`fecha_disp_mac`；是和`int_exitoso`之间的时间差。`fecha_tramite``fecha_actualiza_pe`

输出是这样的：

```
mac, mes, tramites, cred_rec, cred14,  % rec,  % en 14
1, 7, 2023, 2006, 1313, 99.1596638655, 65.4536390828
1, 8, 1748, 1182, 1150, 67.6201372998, 97.2927241963
2, 8, 731, 471, 441, 64.4322845417, 93.6305732484
3, 8, 1352, 840, 784, 62.1301775148, 93.3333333333 
```

*   *Tramites*`fuar`是一个月内所有订单 ( ) 的总和
*   *cred_rec* cred是我们的产品，理论上每个*fuar*都有一个*cred*，`cred_rec`是一个月产生的所有cred的总和
*   *cred_14*是 14 天内所有 cred 的总和
*   *% rec*收到的 fuar 和产生的 cred 之间的关系，以 % 为单位
*   *% en 14*是产生的cred和及时产生的cred的关系

我将在带[注释的时间线](http://code.google.com/apis/ajax/playground/?type=visualization#annotated_time_line)图表或 Google Charts 的[组合图表](http://code.google.com/apis/ajax/playground/?type=visualization#combo_chart)中使用此表来显示我们制造过程的性能。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:51:43.130

对当前代码的一项直接改进是预先计算 en14 和 disp 值并按键索引。这将减少对 cred14 列表的扫描，但将使用内存来存储预先计算的值。

```
def line_key(line):
      return (line['mac__mac'], line['int_mes'])

cred14_calcs = {}
for line in cred14:
  cred14_calcs[line_key(line)] = {
      'en14': line['en14'],
      'disp': float(line['en14'])/line['recibidas']*100
    }

for line in cred_rec:
  calc = cred14_calcs.get(line_key(line))
  if calc:
    line.update(calc) 
```

# python - 使用 RestController 为 turbogears 提供资源

> ID：12593187
> 
> 赞同：0
> 
> 时间：2012-09-26T01:01:46.150
> 
> 标签：python, rest, turbogears2

我在理解如何最好地服务我的数据时遇到了问题。我有 2 个模型，一个是记录，另一个是日志，它们分别具有一对多的关系。我想使用 tg 的 RestController 来提供这个服务，这样我就可以做 mysite.com/api/record_id/log 到目前为止，我有这个：

```
class API(RestController):

    @expose('json')
    def get_all(self):
        records = DB.query(Record).all()
        return dict(records=records)

    @expose('json')
    def get_one(self, record_id):
        try:
            record = DB.query(Record).filter(
                        Record.record_id==record_id).one()
        except NoResultFound:
            abort(404)
        return dict(record=record)

    @expose('json')
    def log(self, record_id):
        try:
            log = DB.query(Log).filter(
                        Log.record_id==record_id).all()
        except NoResultFound:
            abort(404)
        return dict(log=log) 
```

但是，如果我访问 mysite.com/api/log，那么它会（如预期的那样）映射到 log 方法并抱怨缺少变量 record_id。如何做到这一点，以便日志方法只能在记录资源之后访问？

# python - 使用 PGSQL 选择填充 QTableWidget。（PyQT）

> ID：12593197
> 
> 赞同：1
> 
> 时间：2012-09-26T01:02:54.403
> 
> 标签：python, pyqt4, psycopg2

我正在学习`PyQT`，我想`QTableWidget`用从查询中检索到的信息填充到`Postgres`数据库中。我正在使用`python/psycog2`. 来自 pgsql cli 的查询返回：

```
('Miss', 'Jenny')
('Mr  ', 'Andrew')
('Miss', 'Alex')
('Mr  ', 'Adrian')
('Mr  ', 'Simon')
... 
```

这是我的python代码：（对不起，有点乱）

[http://pastebin.com/VQQxabFh](http://pastebin.com/VQQxabFh)

* * *

* * *

我在第二列上有很多空白单元格......需要帮助。

谢谢阅读。

更新：固定：

[http://pastebin.com/d2xp5pCs](http://pastebin.com/d2xp5pCs)

谢谢。

# formatting - SSMS：折叠时分隔评论块

> ID：12593199
> 
> 赞同：2
> 
> 时间：2012-09-26T01:02:58.413
> 
> 标签：formatting, sql-server-2008-r2, ssms

SSMS 编辑器中是否有一种方法可以在评论折叠时直观地分隔两个评论块，这些评论块一个接一个地放置？

请查看下面的链接 - 请记住，此代码仅用于演示目的。

![在此处输入图像描述](../Images/036c13895a8d2d02ec38f263a8213b34.png)

当这段代码在 SSMS 编辑器中折叠时，我看到所有注释的代码都折叠了。

我希望能够将每个评论块视为一个单独的折叠区域，如下所示（这是一个编辑后的图像） -

![在此处输入图像描述](../Images/8b903faabbacdfa032a187ac09a4e46b.png)

我确实考虑过使用 GO，但在我的情况下，这段代码是存储过程的一部分，我有一个封装这部分代码的 BEGIN 和 END，所以这不起作用。

我想过使用 BEGIN/END，但这也行不通，因为我只有注释，没有代码。

我想出的最接近的解决方法是使用空白 PRINT '' - 但是，我认为这是多余的，甚至在始终从应用程序调用并且永远不会运行的存储过程中使用时会适得其反SSMS 调试时除外。

有人对此有任何想法吗？任何免费的第三方插件的建议/方向也值得赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T01:49:43.290

我不知道有任何方法可以做到这一点，而评论不会合并到一个区域中。

在 SQL Server 2008 Management Studio（可能是最新的）中，您`{$REGION}`至少可以使用 来命名或描述折叠区域，这可能会有所帮助：

```
{$REGION "Comment One"}
-- This is comment one
{$ENDREGION}

SELECT dbo.

{$REGION "This is comment two"}
-- This is a separate comment
{$ENDREGION}

SELECT ... 
```

![SSMS 图像捕获](../Images/0dc9a430b2039d182be11b9b66aabe7d.png)

但是两个区域之间必须有内容，否则它们仍然会合并为一个。

以上内容在嵌入`/*..*/`注释时也有效（对于@scriptfromscratch，这**是**有效的T-SQL），但它仍然合并注释，除非它们之间有内容：

```
/* {$REGION  "Test region 1"}
-- This is a test comment
{$ENDREGION}
*/

SELECT dbo.something

/* {$REGION "Test region 2"}
This is test comment 2
{$ENDREGION}
*/

SELECT dbo. 
```

![嵌入区域](../Images/26fc66a676d2dd30aa45a591631d79f6.png)

![嵌入区域折叠](../Images/7386a043f57ae80a5430205380d735d1.png)

在我看来，您需要某种提供此功能的第三方工具，但恐怕我不知道有这样的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-03T13:44:48.347

我知道这是一个旧线程，但由于我没有看到我使用的简单解决方案，我想我会加入。

我倾向于主要使用块注释，以及只有一行或短的内容的内联注释。如果您的结束块注释标记后跟一个分号，您可以独立折叠任何相邻的块，如下所示。

仅供参考，这适用于 SSMS 2012，我不能保证任何其他版本。

![相邻的注释块后跟分号](../Images/265b33254fe0ae59f06a2f6276c96cbf.png)

![相邻的评论块折叠](../Images/1fddd45142cd01cb5723b06d2ceded8e.png)

不幸的是，这不适用于相邻的内联注释。OP 可能会更好地使用块注释将任何相邻/相关的注释包含在单独的块中。

Ken White 走在正确的轨道上，但`$REGION`我认为这些东西是不必要的。以下方法实现了完全相同的效果，除了更干净。

![带有简单标题的评论块](../Images/e8ff9e4275bc21de3dd780666eb58180.png)

![带有简单标题的折叠评论块](../Images/b53161298cf4af31e5769f542a2a1c1f.png)

使用`$REGION`对命令进行分组同样笨拙，因为公然使用`BEGIN END`块将完成相同的工作。请记住正确缩进以避免混淆。

享受

# html - Kendoui web 复选框数据绑定

> ID：12593201
> 
> 赞同：1
> 
> 时间：2012-09-26T01:03:10.363
> 
> 标签：html, django, json, grid, kendo-ui

嗨，我不确定我是否在标题中使用了正确的词，如果没有，请纠正我。我已经使用 kendo ui 工作了将近一个月。真的很棒。现在我的问题是，我正在使用 html、django 和 kendo。我从 json 格式的 url 获取信息。我可以在 Kendo Grid 中加载信息，其中包含一个布尔值列和一个文本列。在布尔值列中，我找到了一种方法将其转换为带有字段模板的复选框输入列，并根据我从 url 获得的数据设置其检查值。问题是我无法将选中的值绑定到网格数据源中的数据，所以当我单击保存按钮保存新信息时，我得到的数据与我从 url 获得的数据相同。有谁知道如何做到这一点或更简单的方法来代替我的？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:41:35.133

有一个代码库项目涵盖了几乎相同的场景。您可以使用相同的想法来更新 Grid 使用的底层模型。

[http://www.kendoui.c​​om/code-library/mvc/grid/checkbox-column-and-incell-editing.aspx](http://www.kendoui.com/code-library/mvc/grid/checkbox-column-and-incell-editing.aspx)

# django - 在验证时/之后填充 django select

> ID：12593204
> 
> 赞同：1
> 
> 时间：2012-09-26T01:03:44.403
> 
> 标签：django, django-forms

我有一个带有下拉列表的 Django 表单，该表单正在动态填充 ajax 选择。表单类如下所示：

```
class SightingForm(ModelForm):

ajax_bird = forms.CharField(required=True, label="Bird", widget=forms.Select(attrs={'class': 'longdropdown chosenBirds', 'data-placeholder': 'Select a Bird'}, choices=DEFAULT_BIRDS) )
new_photo = forms.ImageField(required=False, label="Photo")
class Meta:
    model = Sighting
    fields = ('ajax_bird','count',)

def clean_ajax_bird(self):
    ajax_bird = self.cleaned_data['ajax_bird']
    abi = 0
    try:
        abi = int(ajax_bird)
        bird = Bird.get_bird(abi)
        if bird is None:
            raise Exception
    except Exception as ex:
        raise forms.ValidationError("Please select a bird.")
    return ajax_bird

def clean(self):
    super(forms.ModelForm, self).clean()
    try:
        ab = self.cleaned_data['ajax_bird']
        if int(ab) > 0:
            bird = Bird.get_bird(int(ab))
            self.ajax_bird.widget = forms.Select(attrs={'class': 'longdropdown chosenBirds', 'data-placeholder': 'Select a Bird'}, choices=((str(bird.id), str(bird.common_name),),))
        return self.cleaned_data
    except:
        """fail silently""" 
```

在验证之前一切正常。如果页面上的任何其他内容未验证，则 ajax_bird 字段将不再填充用户选择（因为它是由 ajax 第一次生成的）。

在 clean 方法中，您可能会看到我正在尝试做的事情。我想根据 ajax 下拉菜单中选择的内容更改默认选项。有什么干净的方法可以做到这一点吗？

# javascript - 如何在学习 Javascript 的过程中取得进展

> ID：12593211
> 
> 赞同：1
> 
> 时间：2012-09-26T01:04:46.493
> 
> 标签：javascript, jquery, plugins

我提前道歉，因为这个问题与编码问题或问题没有直接关系。由于大量可用的插件，许多 Web 开发人员开始使用 jQuery 作为基本库。在您的代码中实现插件并成功使用它相当容易，并且几乎不需要任何知识。缺点是初学者很容易忽略从头开始学习 JavaScript，并依赖 jQuery 插件来帮助他们度过大多数情况。

经过多年的努力，“开发人员”逐步学习 jQuery，但对 Javascript 的工作原理或构建自定义函数或插件所需的掌握程度没有基本的了解。这是一个常见的转折点，开发人员渴望了解更多，并真正了解这一切是如何运作的。除了 jQuery，开发人员可能应该先学习 JavaScript，但这在初学者中通常被忽视，因为 jQuery 更易于理解且更易于编写。

虽然这是一个加载的问题，但我正在寻找一个好的方向来提高我对 jQuery 和 Javascript 的理解。对 jQuery 有扎实的了解，我真的很想拥有用 jQuery 和传统 JavaScript 编写任何代码的知识和灵活性。我正在寻找一个好的方向来提升自己，并为其他处于类似情况的人在 js 知识的追求中前进。

您（社区）在学习 JavaScript 的过程中获得了哪些最好的书籍、方法或成功案例？你有什么建议，我自己和其他许多人可以从中受益？请记住，这个问题代表那些经常编写 jQuery，但很难真正掌握掌握该语言的所有必要概念的人。而且，它适用于在 javascript 之前开始学习 jQuery，并希望对两者都有基本了解的人。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T01:09:07.070

这可能是我不赞成 jQuery 的第一大原因。也就是说，我遇到了类似的问题：在使用 Game Maker 为我编写游戏后，如果不付出很大的努力，我就无法深入抽象层并进入 C++ 或类似领域。

向上抽象层很容易，这就是为什么抽象首先存在的原因——如果它们不存在，我们仍然会编写原始机器代码。下降要困难得多。

最终，我真正能建议的是，根据您实际了解多少“普通”JavaScript，拿起一本初级 JS 书籍并从头开始。尽量不要偏离“如果我只使用 jQuery，这会容易得多”——如果你发现自己这样做，那就不好了。

# android - Android - 电子邮件链接打开 Web 浏览器而不是我在 Android OS 4.0+ 上的应用程序

> ID：12593214
> 
> 赞同：1
> 
> 时间：2012-09-26T01:05:28.990
> 
> 标签：android, email, browser, hyperlink

当用户单击电子邮件中的链接时，我需要打开我的应用程序。我在 stackoverflow 上找到了很多答案，并且[skorulis 在这个线程中的这个答案在](https://stackoverflow.com/questions/5697899/how-to-send-email-with-link-to-open-android-application)低于 4.0 的 Android 版本上对我有用，但在 4.0 以上的版本上，链接在网络浏览器而不是应用程序中打开。

# spring - JUnit 和 Spring 配置

> ID：12593216
> 
> 赞同：1
> 
> 时间：2012-09-26T01:06:10.237
> 
> 标签：spring, spring-mvc, junit, spring-webflow

我正在尝试将 JUnit 配置为与 Spring 一起使用，但我不能。

我以这种方式创建了一个测试类：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:/web-application-config.xml"})
public class MyControllerToTest {
        @Autowired
    private MyController ctr;

    @Test
    ....
} 
```

在类路径中，我插入了 web-application-config.xml 所在的 src/main/resources。这里是它的内容：

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.1.xsd">

<!-- Scans for application @Components to deploy -->
<context:component-scan base-package="com.infoone.mycontrollerpackage"/>

<!-- Imports the configurations of the different infrastructure systems of the application -->
<import resource="webflow-config.xml" />
<import resource="webmvc-config.xml" />
<import resource="data-access-config.xml" />
<import resource="repository-config.xml" />
<import resource="security-config.xml" /> 
```

当我作为 JUnit 运行 MyControllerToTest 类时，我得到以下信息：

```
ERROR: org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener
[org.springframework.test.context.support.DependencyInjectionTestExecutionListener@6419fa] to prepare test instance [com.infoone.myapp.MyControllerToTest@10036f2]
java.lang.IllegalStateException: Failed to load ApplicationContext
...
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flowExecutor': Cannot resolve reference to bean 'flowRegistry' while setting bean property 'flowDefinitionLocator'; nested exception is         org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flowRegistry': Invocation of init method failed; nested exception is java.lang.IllegalStateException: An I/O Exception occurred resolving the flow location pattern '/**/*-flow.xml'
...
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flowRegistry': Invocation of init method failed; nested exception is java.lang.IllegalStateException: An I/O Exception occurred resolving the flow location pattern '/**/*-flow.xml'
...
Caused by: java.lang.IllegalStateException: An I/O Exception occurred resolving the flow location pattern '/**/*-flow.xml'
...
Caused by: java.io.FileNotFoundException: class path resource [WEB-INF/flows/] cannot be resolved to URL because it does not exist[/code] 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T06:10:25.467

问题是`WEB-IN`F 文件夹在测试时（使用 maven）不是（那么容易）访问，因为它在测试时位于其他位置。

我是说：

*   当您运行测试时，您在文件夹中运行编译的类：`<project>/target/test-classes`并且该`WEB-INF`文件夹位于`<project>/target`
*   当您运行应用程序时，web-inf 位于`<war>/WEB-INF`而您的类抵抗`<war>/WEB-INF/classes`

我想说的是，`WEB-INF`文件夹中资源的相对路径在测试和应用程序之间是不同的。

无论如何，有一个名为[spring-test-mvc](http://rossenstoyanchev.org/blog/2012/09/25/second-milestone-of-spring-test-mvc/)的 spring 项目，也许你可以使用它或者使用你在代码中找到的一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-10T20:31:58.867

您需要在`file:src`里面添加`@ContextConfiguration`并添加`@WebAppConfiguration`注释。所以测试类应该是这样的：

```
@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration(locations = {"file:src:/path.../web-application-config.xml"})
public class MyControllerToTest {
        @Autowired
    private MyController ctr;

    @Test
    ....
} 
```

# php - PHP这段代码中反斜杠的含义是什么？

> ID：12593231
> 
> 赞同：0
> 
> 时间：2012-09-26T01:09:04.257
> 
> 标签：php

> **可能重复：在 PHP 中**
> [创建对象时的反斜杠语法](https://stackoverflow.com/questions/4075521/backslash-syntax-when-creating-objects)
> [反斜杠 - 这是什么意思？](https://stackoverflow.com/questions/10788400/backslash-in-php-what-does-it-mean)

有人能解释一下这段代码片段中这个“\”的含义吗

```
throw new \RuntimeException("Unable to cache the data with ID '$id'."); 
```

与

```
throw new RuntimeException("Unable to cache the data with ID '$id'."); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T01:15:06.510

在类名之间使用反斜杠时，您正在指定命名空间。自版本 5.3 起采用 im PHP 的命名空间。命名空间是对相关类进行分组的逻辑标识符。

这里的反斜杠：

```
throw new \RuntimeException("Unable to cache the data with ID '$id'."); 
```

意味着 PHP 5.3 将尝试在当前工作目录和每个包含的路径上查找类 RuntimeException。反斜杠表示绝对路径。不传递反斜杠的其他方式是类的相对路径。

这与目录路径中的相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T01:10:28.567

这是一个反斜杠，它与[命名空间](http://php.net/manual/en/language.namespaces.basics.php)有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T01:18:15.733

```
throw new \RuntimeException("Unable to cache the data with ID '$id'."); 
```

在这种情况下，没有定义任何命名空间，它与没有 .

但是，它也用于[访问命名空间的内部或全局类](http://php.net/manual/en/language.namespaces.faq.php#language.namespaces.faq.full)。

当与字符串或多个字符串一起使用时，它是从特定命名空间访问特定类。

# python - 产品链接不起作用

> ID：12593234
> 
> 赞同：0
> 
> 时间：2012-09-26T01:09:50.963
> 
> 标签：python, openerp

我正在尝试在 opernerp 6.1 中安装 product_links 模块，以便将 magento 与 openerp 集成。当我尝试安装 product_links 时，我遇到了这个错误。

```
Client Traceback (most recent call last):
  File "/opt/openerp/openerp-6.1-1/openerp/addons/web/common/http.py", line 180, in dispatch
    response["result"] = method(controller, self, **self.params)
  File "/opt/openerp/openerp-6.1-1/openerp/addons/web/controllers/main.py", line 1004, in call_button
    action = self.call_common(req, model, method, args, domain_id, context_id)
  File "/opt/openerp/openerp-6.1-1/openerp/addons/web/controllers/main.py", line 948, in call_common
    return self._call_kw(req, model, method, args, {})
  File "/opt/openerp/openerp-6.1-1/openerp/addons/web/controllers/main.py", line 962, in _call_kw
    return getattr(req.session.model(model), method)(*args, **kwargs)
  File "/opt/openerp/openerp-6.1-1/openerp/addons/web/common/openerplib/main.py", line 250, in proxy
    args, kw)
  File "/opt/openerp/openerp-6.1-1/openerp/addons/web/common/openerplib/main.py", line 117, in proxy
    result = self.connector.send(self.service_name, method, *args)
  File "/opt/openerp/openerp-6.1-1/openerp/addons/web/common/http.py", line 611, in send
    raise fault

Server Traceback (most recent call last):
  File "/opt/openerp/openerp-6.1-1/openerp/addons/web/common/http.py", line 592, in send
    result = openerp.netsvc.dispatch_rpc(service_name, method, args)
  File "/opt/openerp/openerp-6.1-1/openerp/netsvc.py", line 360, in dispatch_rpc
    result = ExportService.getService(service_name).dispatch(method, params)
  File "/opt/openerp/openerp-6.1-1/openerp/service/web_services.py", line 572, in dispatch
    res = fn(db, uid, *params)
  File "/opt/openerp/openerp-6.1-1/openerp/osv/osv.py", line 167, in execute_kw
    return self.execute(db, uid, obj, method, *args, **kw or {})
  File "/opt/openerp/openerp-6.1-1/openerp/osv/osv.py", line 121, in wrapper
    return f(self, dbname, *args, **kwargs)
  File "/opt/openerp/openerp-6.1-1/openerp/osv/osv.py", line 176, in execute
    res = self.execute_cr(cr, uid, obj, method, *args, **kw)
  File "/opt/openerp/openerp-6.1-1/openerp/osv/osv.py", line 164, in execute_cr
    return getattr(object, method)(cr, uid, *args, **kw)
  File "/opt/openerp/openerp-6.1-1/openerp/addons/base/module/wizard/base_module_upgrade.py", line 101, in upgrade_module
    _db, pool = pooler.restart_pool(cr.dbname, update_module=True)
  File "/opt/openerp/openerp-6.1-1/openerp/pooler.py", line 39, in restart_pool
    registry = RegistryManager.new(db_name, force_demo, status, update_module, True)
  File "/opt/openerp/openerp-6.1-1/openerp/modules/registry.py", line 160, in new
    openerp.modules.load_modules(registry.db, force_demo, status, update_module)
  File "/opt/openerp/openerp-6.1-1/openerp/modules/loading.py", line 338, in load_modules
    processed = load_marked_modules(cr, graph, states_to_load, force, status, report, loaded_modules)
  File "/opt/openerp/openerp-6.1-1/openerp/modules/loading.py", line 253, in load_marked_modules
    loaded, processed = load_module_graph(cr, graph, progressdict, report=report, skip_modules=loaded_modules)
  File "/opt/openerp/openerp-6.1-1/openerp/modules/loading.py", line 165, in load_module_graph
    load_openerp_module(package.name)
  File "/opt/openerp/openerp-6.1-1/openerp/modules/module.py", line 409, in load_openerp_module
    __import__('openerp.addons.' + module_name)
  File "/opt/openerp/openerp-6.1-1/openerp/modules/module.py", line 139, in load_module
    mod = imp.load_module('openerp.addons.' + module_part, f, path, descr)
  File "/opt/openerp/openerp-6.1-1/openerp/addons/product_links/__init__.py", line 1, in <module>
    import product_links
  File "/opt/openerp/openerp-6.1-1/openerp/addons/product_links/product_links.py", line 24, in <module>
    class product_link(external_osv.external_osv):
AttributeError: 'module' object has no attribute 'external_osv' 
```

有谁能够帮我？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:13:13.897

Magento openerp 连接器有两个稳定的分支：stable 和 oldstable。

对于**stable**，使用 lp:magentorpconnect/oerp6.1-stable 和以下依赖分支

*   lp：电子商务插件/oerp6.1-stable
*   lp:openobject-extension/oerp6.1-stable
*   lp:product-extra-addons/oerp6.1-stable

对于**oldstable**，使用 lp:magentorpconnect/oerp6.1-oldstable 和以下依赖分支：

*   lp:c2c-ecom-addons/6.1
*   lp:额外的插件/主干

除非您想为 magentorpconnect 的开发做出贡献，否则不要使用中继。

# ms-access - 将子表单用于一条记录的多个字段条目

> ID：12593236
> 
> 赞同：0
> 
> 时间：2012-09-26T01:09:56.453
> 
> 标签：ms-access, ms-access-2010

我有一个带有子表单的表单。我想使用子表单不仅可以输入子记录，还可以编辑单个子记录上的多个字段。后一个问题是我难住的地方。目前，我将子表单设置为打开一个单独的表单，我可以在其中输入单个记录的所有字段的值。理想情况下，我希望不必使用单独的表格来执行此操作。也许我使用了错误的控件（子窗体）来执行此操作。

沿着类似的说明，是否可以安装任何控件库来扩展 ms 访问控制对象的默认列表。我该怎么办？

提前致谢。

# wso2 - 如何将 wso2 应用程序服务器安装为 Windows 服务

> ID：12593242
> 
> 赞同：0
> 
> 时间：2012-09-26T01:11:41.180
> 
> 标签：wso2, wso2as

在应用服务器的 4.x 版本中，可以通过 install.bat 将应用服务器安装为服务。5.0.0 中是否有类似的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T02:26:43.660

在 Carbon 4.0.0（AS 5.0.0 基于此）之后，该功能已从 WSO2 产品中删除，如果您需要使用 3rd 方项目对其进行配置，这篇[文章可能会对您有所帮助。](http://engwar.com/post/678)

# sql - 用于测试的 Oracle 虚拟更新（任何 DML）命令

> ID：12593243
> 
> 赞同：3
> 
> 时间：2012-09-26T01:11:52.583
> 
> 标签：sql, oracle, plsql, oracle10g

我想知道是否可以为 Oracle 编写虚拟更新命令以进行单元测试。

类似的东西

```
 SELECT * FROM DUAL 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T02:59:49.683

假设你在某处有一张桌子，

```
UPDATE mytable SET myfield = 'foo'
 WHERE 1 = 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T02:05:41.617

选项1：创建一个虚拟表，在其中插入一行。瞧，你可以更新它。

选项2：创建一个虚拟视图，向它添加一个“而不是更新”触发器，它什么都不做。

# c# - 子节点不反序列化为期望类型对象，而是保持为 XmlNode

> ID：12593244
> 
> 赞同：3
> 
> 时间：2012-09-26T01:11:57.040
> 
> 标签：c#, xsd, deserialization

**这是我的 XSD 文件：**

```
 <?xml version="1.0" encoding="UTF-8"?>
                <xs:complexType name="**c_extension**">
                    <xs:choice maxOccurs="unbounded">
                        <xs:element ref="**extensionType1**"/>
                        <xs:element ref="**extensionType2**"/>
                        <xs:any namespace="##other" processContents="lax"/>
                    </xs:choice>
                    <xs:attribute name="extVersion" type="xs:decimal" use="optional" default="1.0"/>
                </xs:complexType>
                <xs:element name="**extensionType1**">
                    <xs:complexType>
                        <xs:complexContent>
                            <xs:extension base="c_extensionType1">
                                <xs:anyAttribute namespace="##other" processContents="lax"/>
                            </xs:extension>
                        </xs:complexContent>
                    </xs:complexType>
                </xs:element>
                <xs:element name="**extensionType2**">
                    <xs:complexType>
                        <xs:complexContent>
                            <xs:extension base="c_extensionType2">
                                <xs:anyAttribute namespace="##other" processContents="lax"/>
                            </xs:extension>
                        </xs:complexContent>
                    </xs:complexType>
                </xs:element>
                <xs:complexType name="c_extensionType1">
                    <xs:attribute name="id" type="xs:int" use="required"/>
                    <xs:attribute name="name" type="xs:string" use="required"/>
                </xs:complexType>
                <xs:complexType name="c_extensionType2">
                    <xs:attribute name="id" type="xs:int" use="required"/>
                    <xs:attribute name="name" type="xs:string" use="required"/>
                </xs:complexType>
                <!--root element-->
                <xs:element name="extension">
                    <xs:annotation>
                        <xs:documentation>Comment describing your root element</xs:documentation>
                    </xs:annotation>
                    <xs:complexType>
                        <xs:complexContent>
                            <xs:extension base="c_extension">
                                <xs:anyAttribute namespace="##other" processContents="lax"/>
                            </xs:extension>
                        </xs:complexContent>
                    </xs:complexType>
                </xs:element>
            </xs:schema> 
```

**这是从上面的 XSD 文件生成的代码：**

```
namespace My.Extension {
                    using System.Xml.Serialization;

                    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.3038")]
                    [System.SerializableAttribute()]
                    [System.Diagnostics.DebuggerStepThroughAttribute()]
                    [System.ComponentModel.DesignerCategoryAttribute("code")]
                    [System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true, Namespace="http://myextension.com/ProgInfo")]
                    [System.Xml.Serialization.XmlRootAttribute(Namespace="http://myextension.com/ProgInfo", IsNullable=false)]
                    public partial class extensionType1 : c_extensionType1{        
                        private System.Xml.XmlAttribute[] anyAttrField;        

                        [System.Xml.Serialization.XmlAnyAttributeAttribute()]
                        public System.Xml.XmlAttribute[] AnyAttr { get { return this.anyAttrField; } set {this.anyAttrField = value; }  }
                    }    

                    /// <remarks/>
                    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.3038")]
                    [System.SerializableAttribute()]
                    [System.Diagnostics.DebuggerStepThroughAttribute()]
                    [System.ComponentModel.DesignerCategoryAttribute("code")]
                    [System.Xml.Serialization.XmlTypeAttribute(Namespace="http://myextension.com/ProgInfo")]
                    public partial class c_extensionType1 {           
                        private id idField;        
                        private string nameField;    

                        [System.Xml.Serialization.XmlAttributeAttribute(Form=System.Xml.Schema.XmlSchemaForm.Qualified)]
                        public string id {get {return this.idField;}set {this.idField = value;}}

                        [System.Xml.Serialization.XmlAttributeAttribute(Form=System.Xml.Schema.XmlSchemaForm.Qualified)]
                        public string name {get {return this.nameField;}set {this.nameField = value;}}
                    }

                    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.3038")]
                    [System.SerializableAttribute()]
                    [System.Diagnostics.DebuggerStepThroughAttribute()]
                    [System.ComponentModel.DesignerCategoryAttribute("code")]
                    [System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true, Namespace="http://myextension.com/ProgInfo")]
                    [System.Xml.Serialization.XmlRootAttribute(Namespace="http://myextension.com/ProgInfo", IsNullable=false)]
                    public partial class extensionType2 : c_extensionType2{        
                        private System.Xml.XmlAttribute[] anyAttrField;        

                        [System.Xml.Serialization.XmlAnyAttributeAttribute()]
                        public System.Xml.XmlAttribute[] AnyAttr { get { return this.anyAttrField; } set {this.anyAttrField = value; }  }
                    }    

                    /// <remarks/>
                    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.3038")]
                    [System.SerializableAttribute()]
                    [System.Diagnostics.DebuggerStepThroughAttribute()]
                    [System.ComponentModel.DesignerCategoryAttribute("code")]
                    [System.Xml.Serialization.XmlTypeAttribute(Namespace="http://myextension.com/ProgInfo")]
                    public partial class c_extensionType2 {           
                        private id idField;        
                        private string nameField;    

                        [System.Xml.Serialization.XmlAttributeAttribute(Form=System.Xml.Schema.XmlSchemaForm.Qualified)]
                        public string id {get {return this.idField;}set {this.idField = value;}}

                        [System.Xml.Serialization.XmlAttributeAttribute(Form=System.Xml.Schema.XmlSchemaForm.Qualified)]
                        public string name {get {return this.nameField;}set {this.nameField = value;}}
                    }
                    /// <remarks/>
                    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.3038")]
                    [System.SerializableAttribute()]
                    [System.Diagnostics.DebuggerStepThroughAttribute()]
                    [System.ComponentModel.DesignerCategoryAttribute("code")]
                    [System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true, Namespace="http://myextension.com/ProgInfo")]
                    [System.Xml.Serialization.XmlRootAttribute(Namespace="http://myextension.com/ProgInfo", IsNullable=false)]
                    public partial class extension : c_extension {        
                        private System.Xml.XmlAttribute[] anyAttrField;    

                        [System.Xml.Serialization.XmlAnyAttributeAttribute()]
                        public System.Xml.XmlAttribute[] AnyAttr {get {return this.anyAttrField;}set {this.anyAttrField = value;}}
                    }

                    /// <remarks/>
                    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.3038")]
                    [System.SerializableAttribute()]
                    [System.Diagnostics.DebuggerStepThroughAttribute()]
                    [System.ComponentModel.DesignerCategoryAttribute("code")]
                    [System.Xml.Serialization.XmlTypeAttribute(Namespace="http://myextension.com/ProgInfo")]
                    public partial class c_extension {
                        **private object[] itemsField**;        
                        private decimal extVersionField;

                        public c_igtVendorExt() {this.extVersionField = ((decimal)(1.0m));}

                        /// <remarks/>
                        [System.Xml.Serialization.XmlAnyElementAttribute(Order=0)]
                        [System.Xml.Serialization.XmlElementAttribute("extensionType1", typeof(extensionType1), Order=0)]
                        [System.Xml.Serialization.XmlElementAttribute("extensionType2", typeof(extensionType2), Order=0)]
                        public object[] Items{get {return this.itemsField;}set {this.itemsField = value;}}

                        /// <remarks/>
                        [System.Xml.Serialization.XmlAttributeAttribute(Form=System.Xml.Schema.XmlSchemaForm.Qualified)]
                        [System.ComponentModel.DefaultValueAttribute(typeof(decimal), "1.0")]
                        public decimal extVersion {get {return this.extVersionField;}set {this.extVersionField = value;}}
                    }
                } 
```

**这是我的真实数据，在 extension.xml 文件中：**

```
<?xml version="1.0" encoding="UTF-8"?>
<extension extVersion="1.03">
  <extensionType1 id="1" name="GAME"/>
  <extensionType1 id="2" name="GAME"/>
</extension> 
```

这是我对扩展进行反序列化的方法：

```
string extensionXml = System.IO.File.ReadAllText("extension.xml");

XmlRootAttribute xRoot = new XmlRootAttribute();
xRoot.ElementName = "extension";
xRoot.IsNullable = true;
XmlSerializer xs = new XmlSerializer(typeof(extension), xRoot);

TextReader tr = new StringReader(extensionXml);
extension ext = (extension)xs.Deserialize(tr); 
```

ext.Items 确实有 2 个项目，但是当我检查 ext.Items 中的项目类型时，它是 XmlElement。为什么不是 extensionType1？

有人能告诉我为什么吗？是不是因为扩展中的子节点有两个类型节点？扩展类型 1 和扩展类型 2。

# python - 让 Python 在不同时间打印行

> ID：12593246
> 
> 赞同：1
> 
> 时间：2012-09-26T01:12:09.613
> 
> 标签：python, time

我正在为家庭作业制作一个简单的游戏。我想打印线条，但让它们彼此间隔 1 秒打印。我该怎么做呢？

我猜会延迟打印的东西。所以喜欢

```
"Hello"
"My name is blahblah"
"This is blah blah"
"blah blah"
"What's your name?" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T01:14:19.850

`time.sleep(seconds)`暂停一秒钟，在你的情况下：

```
import time
strings = ["Hello","My name is blahblah","This is blah blah","blah blah","What's your name?"]

for txt in strings:
    print txt
    time.sleep(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T01:14:35.793

您可以使用`time.sleep(1)`1 秒延迟

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T01:15:56.057

```
import time

while(1):
    print("-")
    time.sleep(1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T01:31:08.527

```
# coding:utf-8 -*-

import  time

def print_line(lines):
    """
        print every line in lines per 1s 
    """
    assert type(lines) in (list, tuple, str)
    if type(lines) == str:
        lines = (str,)

    for line in lines:
        print line
        time.sleep(1)

if __name__ == "__main__":
    """test print line with a simple tuple"""

    test_data = "Hello", "My name is blahblah", "This is blah blah","blah blah","What's your name?"
    print "print one sentence per second, begin ..."
    print_line(test_data)
    print "finished!" 
```

# c++ - C++，指针的真正含义是什么？当涉及虚拟时

> ID：12593248
> 
> 赞同：1
> 
> 时间：2012-09-26T01:12:37.587
> 
> 标签：c++, pointers, virtual

对于以下代码

```
class A 
{
public:
    ~A()
    {
        std::cout << "a"  << std::endl;
    }
};

class B : public A {
public:
    virtual ~B()
    {
        std::cout << "b"  << std::endl;
    }
};

int main()
{
    B* b = new B();
    A* a = b;

    if (a == b)
    {

    }

    delete a;
} 
```

问题是，“a”是否等于“b”？这是为什么以及如何发生的？指针的真正含义是什么？不仅仅是地址和内存块的长度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T01:23:30.377

> “a”会等于“b”吗？

是的

> 这是为什么以及如何发生的？

为了执行两个指针的比较，编译器将执行到通用类型的转换。在这种情况下，作为`A`的基数`B`，转换为`A*`，产生的代码等效于：

```
A* __tmp = b;
if ( a == __tmp ) ... 
```

> 指针的真正含义是什么？不仅仅是地址和内存块的长度？

指针是保存对象地址的变量（指针中不存储大小信息）。但是指针有一个类型，编译器会将指针所指的内存位置解释为该类型的对象。存储在指针外部的额外信息允许编译器执行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:18:44.827

我在 c++ 对象模型内部找到了一些解释，这就像多重继承一样，vptr 位于对象的开头。当基类没有虚拟而子类有虚拟时，指针的分配将由编译器通过 vptr 逐步调整，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T05:03:18.283

正如大卫已经提到的，两个指针的简单比较`a == b`会给你 True 因为编译器会将它们都转换为公共类型。但是，如果您将其修改为`(void*)a == (void*)b`，结果*可能*是错误的。这是因为 A 类和 B 类有不同的内存布局，因为 B 有一个虚函数表，而 A 没有。

MSVC 编译器将虚函数指针放在类的“顶部”，在第一个数据成员之前，但没有什么能阻止其他编译器将它放在“底部”。

您也可以尝试将 A 类析构函数设为虚拟。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T02:12:22.550

让我们把答案分成三个部分

### 指针

指针是一个变量，它保存另一个变量的内存地址。指向变量的类型很重要，编译器会检查它。可以通过使用指向 void 的指针来强制指针机制（在 C++ 中应避免使用，除非您真的知道自己在做什么）。

### 使用基类指针访问派生类对象

派生类的对象，即变量（`b`在您的代码中）可以使用指向其父类型的指针（在您的代码中）来引用`A`。这将允许您访问 A 中存在的成员`B`。正如 Richard J. Ross 已经说过的，使用指向基类的指针将产生与使用派生类指针相同的地址（除非涉及多重继承）。

### 虚函数

虚拟方法允许您使用基类指针调用派生对象的重载方法。**这对析构函数特别有用，因为即使使用基类指针**（假设析构函数写得很好），我们也可以放心，对象将被正确销毁。

不过，**您的代码在概念上是错误的**。由于 的析构函数`A`不是虚拟的，所以不会调用`B`部分的析构函数，因此可能会出现内存泄漏等问题。`b`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T01:17:26.323

该`a`变量将指向分配对象的`A`类部分。`b`指针只是一个内存地址，仅此而已。重要的是指针指向内存中的数据类型。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-26T01:30:33.433

该示例是两个指针之间的比较。因为它们指向同一个位置，所以 a 将等于 b。

# uitableview - uitableview.backgroundView 图像尺寸正在压缩/扭曲

> ID：12593251
> 
> 赞同：0
> 
> 时间：2012-09-26T01:12:56.963
> 
> 标签：uitableview, uiimageview

我正在构建一个 iphone 应用程序。

我有一个表格视图，我设置了一个背景图像，如下所示：

```
UIImageView * bg = [[UIImageView alloc] initWithImage:somebackgroundimage];
CGRect framebg = bg.frame;
framebg.origin.y = -64;
framebg.origin.x = 0;
framebg.size.width = 320;
framebg.size.height = 480;
[bg setFrame:framebg];
[_tblview setBackgroundView:bg]; 
```

无论我设置什么 framebg.size.width 或 framebg.size.height，图像总是出现扭曲或压缩，尺寸可能为 320 宽和 400 高。就好像该应用程序将强制调整图像大小以适应顶部导航栏和我的底部标签栏。

如何强制 tableview 背景图像为 320px 宽 x 480px 高？

此外，似乎 origin.y 和 origin.x 也没有得到尊重。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:23:32.770

我知道这个问题有点老了，但我想我会分享我能够用来解决类似问题的东西（`setContentMode`用于图像视图）：

```
UIImageView *bg = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background.png"]];
[bg setContentMode:UIViewContentModeScaleAspectFit];
self.tableView.backgroundView = bg; 
```

希望这可以帮助。

# objective-c - 用 UIImage 编写 UIActivityTypeMessage

> ID：12593255
> 
> 赞同：12
> 
> 时间：2012-09-26T01:13:57.283
> 
> 标签：objective-c, ios6, uiactivityviewcontroller, uiactivity

如果有人可以提供一些见解，那就在徘徊。对于我的生活，我无法弄清楚如何使用 UIActivityTypeMessage 发送 UIImage ，尽管有人说这是可能的。

文档说：http: [//developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivity_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivity_Class/Reference/Reference.html)

**UIActivityTypeMessage**

该对象将提供的内容发布到消息应用程序。使用此服务时，您可以提供 NSString 和 NSAttributedString 对象作为活动项的数据。您还可以指定内容使用 sms 方案的 NSURL 对象。在 iOS 6.0 及更高版本中可用。在 UIActivity.h 中声明。

所以据我了解，我只能发送 NSString/NSURL。我不认为你这是可能的。

我正在使用这个：

```
UIImage *image; // some image here.

UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:@[ image ] applicationActivities:nil]; 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:38:58.990

下面是如何使用文本和图像普遍使用 UIActivityViewController。

```
NSMutableArray *items = [NSMutableArray new];
[items addObject:@"Hello world!"];
[items addObject:[UIImage imageNamed:@"MyImage"]];
NSArray *activityItems = [NSArray arrayWithArray:items];
UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
    [self presentViewController:self.activityViewController animated:YES completion:nil];
} else if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    UIPopoverController *aPopoverController = [[UIPopoverController alloc] initWithContentViewController:activityViewController];
    [aPopoverController presentPopoverFromBarButtonItem:self.actionButton permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
}

// Examples:
// iPhone:
// http://anglerally.com/wp-content/uploads/2012/09/6-Default-568h@2x.png
// http://anglerally.com/wp-content/uploads/2012/09/7-Default-568h@2x.png
// iPad:
// http://anglerally.com/wp-content/uploads/2012/09/6-Default-Portrait@2xipad.png
// http://anglerally.com/wp-content/uploads/2012/09/7-Default-Portrait@2xipad.png 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T19:58:41.997

虽然在 iOS6 中使用 UIActivityViewController 似乎可以让消息应用程序出现在共享表中，但让它工作有一些秘密——iOS7 是另一回事，将 NSURL 传递给资产开箱即用。

不确定您是否从 ALAssetsLibrary 获取图像，但如果是这样，请使用 ALAsset 的 NSURL 而不是拉取 UIImage。份额表出现的时间很短。这不完全是我正在使用的代码，但类似。但在 iOS6 上，只要有附加图像，活动视图控制器就不会显示消息应用程序。

```
- (void) presentActivityViewController:(ALAsset*) asset {
    // add this to your viewController class

    NSDictionary *urls = [asset valueForProperty:ALAssetPropertyURLs];
    NSURL *url;
    if ([urls count]) {
        for (NSString *key in urls) {
            // I'm making an assumption that the URL I want is the first URL in the dictionary
            url = [urls objectForKey:key];
            break;
        }
    }

    NSArray *activityItems = @[url];
    UIActivityViewController *activityController = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];
    [self presentViewController:activityController animated:YES completion:nil];
} 
```

# javascript - jquery根据当前页面url中的字符串加载远程页面元素

> ID：12593258
> 
> 赞同：1
> 
> 时间：2012-09-26T01:14:04.763
> 
> 标签：javascript, jquery, load

我是 Jquery 的新手，我想要 Jquery 代码来获取当前页面的 url，如果 url 包含某些字符串，则加载远程元素。

例子：

我有这样的页面网址：

```
"http://......./Country/AU/result-search-to-buy"
"http://......./Country/CA/result-search-to-buy"
"http://......./Country/UK/result-search-to-buy" 
```

“/Country/AU”部分是我需要确定我应该加载哪个页面元素，然后如果“AU”我从“/state-loader.html .state-AU”加载，如果“CA”我从加载“/state-loader.html .state-CA”

我有一个内置模块“ **{module_pageaddress}** ”来获取当前页面url的值，我只是不知道让它工作的Jquery逻辑。

我期待这样的事情：

```
if {module_pageaddress} contains "/Country/AU/" 
$('#MyDiv').load('state-loader.html .state-AU');

if {module_pageaddress} contains "/Country/CA/" 
$('#MyDiv').load('state-loader.html .state-CA'); 
```

请帮助，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:06:00.363

这是一些代码：

```
<!DOCTYPE html>
<html>
<head>
    <title>jQuery test page</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        function loadContent(elementSelector, sourceURL) {
            $(""+elementSelector+"").load(""+sourceURL+"");
        }
        function stateURL() {
            var startOfResult = '../../state-loader.html #state-';
            var match = (/(?:\/Country\/)(AU|US|CA|UK)(?:\/)/).exec(window.location.pathname);

            if (match) {
                return startOfResult + match[1];
            } else {
                return startOfResult + 'AU';
            }
        }
    </script>
</head>
<body>
<a href="javascript:loadContent('#content', stateURL())">Link 1</a>
<div id="content">content will be loaded here</div>
</body>
</html> 
```

以及为状态加载不同内容的文件：

```
<!DOCTYPE html>
<html>
<head>
</head>

<body>
<div id="state-US">Go USA!</div>
<div id="state-CA">Go Canada!</div>
<div id="state-AU">Go Australia!</div>
<div id="state-UK">Go United Kingdom!</div>
</body>
</html> 
```

在这里看到它的工作：

[http://www.quirkscode.com/flat/forumPosts/loadElementContents/Country/US/loadElementContents.html](http://www.quirkscode.com/flat/forumPosts/loadElementContents/Country/US/loadElementContents.html)

将 .../US/... 替换为 .../AU/... 等以查看其行为方式。

我得到想法/原始代码的原始帖子：

[http://frinity.blogspot.com/2008/06/load-remote-content-into-div-element.html](http://frinity.blogspot.com/2008/06/load-remote-content-into-div-element.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T01:38:43.453

你可以试试

```
var countryCode = ... // parse the country code from your module    
$('#yourDiv').load('state-loader.html .state-' + countryCode); 
```

[在此处](http://api.jquery.com/load/)查看 .load() 的更多示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T01:39:08.553

至于拉 url 路径，您可以执行以下操作

```
var path_raw = document.location.path, 
     path_array = path_raw.split("/"); 
```

然后，您可以执行以下操作：

```
$.ajax({
     url: "./remote_data.php?country=" + path_array[0] + "&state=" + path_array[1],
     type: "GET",
     dataType: "JSON",
     cache: false,
     success: function(data){
          // update all your elements on the page with the data you just grabbed
     }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T02:15:34.997

使用我的单行 javascript 函数获取 URL 段数组：http: [//joshkoberstein.com/blog/2012/09/get-url-segments-with-javascript](http://joshkoberstein.com/blog/2012/09/get-url-segments-with-javascript)

然后，将变量 $countrySegment 定义为国家代码所在的段号。

例如：/segment1/segment2/ **CA** /

（国家代码将是**第 3 段**）

然后，检查是否设置了第三个数组索引以及所述索引是“CA”还是“AU”。如果是这样，继续加载，将国家代码段替换为 .html 文件名

```
function getSegments(){
    return location.pathname.split('/').filter(function(e){return e});
}

//set what segment the country code is in
$countrySegment = 3;

//get the segments
$segments = getSegments();

//check if segment is set
//and   if segment is either 'AU' or 'CA'
if(typeof $segments[$countrySegment-1] !==undefined && ($segments[$countrySegment-1] == 'AU' || $segments[$countrySegment-1] == 'CA')){
    $countryCode = $segments[$countrySegment-1];
    $('#target').load('state-loader.html .state-' + $countryCode);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T02:17:00.747

```
var result= window.location.pathname.match(/\/Country\/([A-Z]+)\//);
if(result){
    $('#MyDiv').load('state-loader.html .state-' + result[1]);
} 
```

# c# - 线程池帮助

> ID：12593264
> 
> 赞同：0
> 
> 时间：2012-09-26T01:14:41.023
> 
> 标签：c#, threadpool

我查阅了有关线程池等的信息，并找到了一个示例。目前我正在尝试重新创建我为自己的项目看到的示例，当我从 UI 输入任何数字时，我一直收到此错误。

```
ManualResetEvent[] doneReadEvents = new ManualResetEvent[Read];
        ManualResetEvent[] doneWriteEvents = new ManualResetEvent[Write];
        ReadWrite[] ReadArray = new ReadWrite[Read];
        ReadWrite[] WriteArray = new ReadWrite[Write];

        for (int i = 0; i < Read; i++)
        {
            doneReadEvents[i] = new ManualResetEvent(false);
            ReadWrite Rw = new ReadWrite(Read, doneReadEvents[i]);
            ReadArray[i] = Rw;
            ThreadPool.QueueUserWorkItem(Rw.ThreadPoolCallBackRead, i);

        }

        for (int i = 0; i < Write; i++)
        {
            doneReadEvents[i] = new ManualResetEvent(false);
            ReadWrite rW = new ReadWrite(Write, doneWriteEvents[i]);
            ReadArray[i] = rW;
            ThreadPool.QueueUserWorkItem(rW.ThreadPoolCallBackWrite, i);
        }

        WaitHandle.WaitAny(doneReadEvents);
        WaitHandle.WaitAny(doneWriteEvents);
        temp.Items.Add("Complete");
        temp.Items.Add("Closing");
        Output.DataSource = ReadWrite.MyList;
        Work.DataSource = ReadWrite.MyList2;
        ReadWrite.ReadData(Read);

    } 
```

第一个循环中的第一行我得到一个错误，说它超出了数组的范围。当该错误清除时，我不知道是否还会有更多错误

```
namespace MultiThreadingReaderWriter
{
    class ReadWrite
    {
        public int _rw;

        public ManualResetEvent _doneEvents;

        public List<string> myList = new List<string>();
        public List<string> myList2 = new List<string>();
        public List<string> MyList{ get { return myList; } }
        public List<string> MyList2{ get { return myList2; } }
        public int RW { get { return _rw; } }

        //Constructor

        public ReadWrite(int rw, ManualResetEvent doneEvents)
        {
            _rw = rw;

            _doneEvents = doneEvents;

        }

        public void ThreadPoolCallBackRead(Object threadContext)
        { 
            int threadindex = (int) threadContext;
            myList.Add("Thread Read " + threadindex+ " started");
            ReadData(_rw);
            myList.Add("Thread Read " + threadindex + " done");
            _doneReadEvents.Set();

        }
        public void ThreadPoolCallBackWrite(Object threadContext)
        {
            int threadindex = (int)threadContext;
            myList.Add("Thread Write " + threadindex + " started");
            WriteData(_rw);
            myList.Add("Thread Write " + threadindex + " done");
            _doneWriteEvents.Set();
        }
        public void ReadData(int reader)
        {

            myList.Add("Reader " + reader + " has entered Critical Section");
            myList.Add("Reader " + reader + " is Reading");
            myList.Add("Reader " + reader + " is leaving Critical Section");

        }

        public void WriteData(int writer)
        {

            myList.Add("Writer " + writer + " has entered Critical Section");
            myList.Add("Writer " + writer + " is writing");
            myList.Add("Writer " + writer + " is leaving Critical Section");

        }
    }
} 
```

这是与上述表单程序相关的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:06:15.360

数组索引从零开始，正确的迭代方法是

```
for (int i = 0; i < Read; i++)
{
}

for (int i = 0; i < Write; i++)
{ 
} 
```

# javascript - jquery表单验证未触发/工作

> ID：12593275
> 
> 赞同：1
> 
> 时间：2012-09-26T01:16:28.943
> 
> 标签：javascript, jquery

我需要做一个非常基本的表单验证，我选择的方法是 jQuery。但是，由于某种原因，验证功能似乎根本没有被触发。

看了几个小时后，我无法找出问题所在。

HTML：

```
<form id="form1" name="form1" method="post" action="process.php">
    <table width="100%" border="0" cellspacing="5" cellpadding="0">
      <tr>
        <td width="160">Meno:</td>
        <td><input type="text" name="meno" id="meno" /></td>
        <td width="160">Priezvisko:</td>
        <td><input type="text" name="priezvisko" id="priezvisko" /></td>
      </tr>
      <tr>
        <td width="160">Názov spolocnosti: <br />
          <span class="register_comment">(nevyplnajte ak nie ste podnikatel)</span></td>
        <td><input type="text" name="spolocnost" id="spolocnost" /></td>
        <td width="160">Krajina:</td>
        <td><select name="krajina" id="krajina">
          <option value="" selected="selected">&nbsp;</option>
          <option value="cz">Ceská republika</option>
          <option value="sk">Slovenská republika</option>
        </select></td>
      </tr>
      <tr>
        <td width="160">Adresa:</td>
        <td><input type="text" name="adresa" id="adresa" /></td>
        <td width="160">Mesto:</td>
        <td><input type="text" name="mesto" id="mesto" /></td>
      </tr>
      <tr>
        <td width="160">Email:<br />
          <span class="register_comment">(na tento email Vám príde potvrdenie)</span></td>
        <td><input type="text" name="email" id="email" /></td>
        <td width="160">Telefonický kontakt:<br />
          <span class="register_comment">(uvádzajte kontakt na mobilný telefón na ktorom budete zastihnutelní najmä 10.10.!)</span></td>
        <td><input type="text" name="telefon" id="telefon" /></td>
      </tr>
      <tr>
        <td width="160">Miesto nástupu: </td>
        <td colspan="3"><select name="nastup" id="nastup">
          <option value="" selected="selected">&nbsp;</option>
          <option value="nr">Nitra</option>
          <option value="ba">Bratislava</option>
          <option value="br">Brno - Avion Shopping Park, Škandinávská 128/2</option>
          <option value="ph">Praha - Avion Shopping Park, Škandinávská 15/A</option>
          <option value="pl">Plzen - OC Olympia, Písecká 972/1</option>
        </select></td>
      </tr>
      <tr>
        <td colspan="4"><p>
          <label>
            <input type="checkbox" name="suhlas" value="checkbox" id="suhlas" />
            Oboznámil som sa s podmienkami úcasti a Súhlasím s podmienkami úcasti  </label>
          FLEX Polishing Camp<br />
        </p></td>
      </tr>
      <tr>
        <td colspan="4" align="center"><input type="submit" id="button" value="Odoslat záväznú prihlášku na FLEX Polishing Camp" style="width:500px;" /></td>
      </tr>
      <tr>
        <td colspan="4" class="register_comment">xxxx</td>
      </tr>
    </table>
</form> 
```

jQuery：

```
<script>  
    $("#form1").submit(function() {
      var errors = new array();
      if ($('input[name=meno]').val() == "") {
        errors.push('Meno je povinná položka.');
      }
      if ($('input[name=priezvisko]').val() == "") {
        errors.push('Priezvisko je povinná položka.');
      }
      if ($('input[name=krajina]').val() == "") {
        errors.push('Je nutné vybrať si krajinu - ČR alebo SR.');
      }
      if ($('input[name=adresa]').val() == "") {
        errors.push('Adresa je povinná položka.');
      }
      if ($('input[name=mesto]').val() == "") {
        errors.push('Mesto je povinná položka.');
      }
      if ($('input[name=email]').val() == "") {
        errors.push('Email je povinná položka.');
      }
      if ($('input[name=telefon]').val() == "") {
        errors.push('Telefonický kontakt je povinná položka.');
      }
      if ($('input[name=nastup]').val() == "") {
        errors.push('Telefonický kontakt je povinná položka.');
      }
      if (!$('#suhlas').attr('checked')) {
        errors.push('Je potrebné vysloviť súhlas s podmienkami zaškrtnutím tlačítka "Oboznámil som sa s podmienkami účasti a Súhlasím s podmienkami účasti FLEX Polishing Camp".');
      }
      if ( errors.lenght > 0 )
      {
        var text;
        for (var i = 0; i < errors.length; i++) {
            text = text + errors[i] + '\n';
        };
        alert(text);
        return false;
      }
      return true;
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T01:19:01.867

$("form1") 应该是 $("#form1")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T01:19:49.787

```
First $("form1")  should be $("#form1") 
```

//第二

```
 text = text + arr[i] + '\n'; 
```

//应该

```
 text = text + errors[i] + '\n';   OR   text += errors[i] + '\n'; 
```

看起来更新后的代码再次出现错字。这可能会阻止它

```
if ( errors.lenght > 0 )    // Supposed to be  errors.length 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T01:29:58.997

正如其他提到的那样，您错过了`#`ID 选择器，您还可以使用`map`方法并缩小代码。

```
$("#form1").submit(function() {
      var errors = [];
      errors = $('input[type=text]', this).filter(function(){
            return $.trim(this.value) == "";
      }).map(function() {
            return this.name + ' je povinná položka.';
      }).get();

      if (errors.length) {
           var text = errors.join('\n');
           alert(text);
           return false;
      }
}); 
```

[http://jsfiddle.net/bwVWQ/](http://jsfiddle.net/bwVWQ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T01:20:26.800

您缺少`#`选择器上的标志，`#form1`

```
$("#form1").submit(function() { 
```

# java - GridBagLayout 不填充区域

> ID：12593277
> 
> 赞同：0
> 
> 时间：2012-09-26T01:16:42.717
> 
> 标签：java, swing, layout, layout-manager, gridbaglayout

我有一个插入主内容窗格的组件，由于某种原因，它没有填充该区域。

```
getInstance().add(internalPanel, LayoutFactory.newFactory().setX(1).setY(1).
            setWeightX(1).setWeightY(1).setFill(GridBagConstraints.BOTH)); 
```

我`LayoutFactory`专门为`GridBagLayout`，它只是设置属性并返回对象。

基本上，问题是当我将组件添加到内容窗格时，它并没有填满专用于它的空间。它采用绝对最小值，就好像`weightX`and`weightY`被设置为 0。我试过`setAnchor(GridBagConstraints.FIRST_LINE_START)`and `setAnchor(GridBagConstraints.NORTHWEST)`。两者都对程序没有任何明显的影响。

另外，当我设置组件的边框时，它只填充了部分空间，所以我添加到它的组件没有问题。

值得注意的是，组件出现在空间的中心，并且不跟随锚点。从[这里](https://stackoverflow.com/questions/7275189/why-does-gridbaglayout-center-my-components-instead-of-putting-it-in-the-corner)，我认为我的问题是`weightX`and`weightY`属性。查看内容窗格的其他组件，每个组件都设置了权重。

```
getInstance().add(MainFrame.buttons, LayoutFactory.newFactory().setX(0).setY(1).
            setWeightY(1).setWeightX(0).setFill(GridBagConstraints.BOTH)); 
```

和

```
getInstance().add(panel, LayoutFactory.newFactory().setX(0).setY(0).setWidth(2)
            .setWeightX(1).setWeightY(0).setAnchor(GridBagConstraints.FIRST_LINE_START)
            .setFill(GridBagConstraints.NONE)); 
```

其他地方肯定有问题，但我不想用文字淹没这篇文章。如果您需要更多信息来解决这个问题，我很乐意提供。希望这是有道理的。我已经使用`GridBagLayout`了一段时间了，我从来没有遇到过这样的事情。

[这是它在应该是的空间中的样子](https://i.imgur.com/UAeg8.png)

编辑：发现问题出在其他地方，因为制作一个小示例程序可以正常工作。由于我有点难过，[我上传了我正在开发的程序的完整版本。](http://www.mediafire.com/?b75inpohfwhl9sd)不要担心它实际上做了什么，我只关心工作负载面板没有填满空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T02:42:39.373

问题解决方案：

`InternalPanel`正在向没有布局管理器的类型对象添加组件。（默认为 flowLayout）

# asp.net - jqgrid navgrid 显示错误

> ID：12593289
> 
> 赞同：0
> 
> 时间：2012-09-26T01:18:42.970
> 
> 标签：asp.net, asp.net-mvc, jqgrid

我正在使用 jqgrid 和一个 asp.net mvc 3 应用程序。数据很好，导航网格是问题所在。图片说明了一切，只是没有正确显示。谢谢您的帮助！

```
<link href="../../Content/ui.jqgrid.css" rel="stylesheet" type="text/css" />
<script src="../../Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.jqGrid.min.js" type="text/javascript"></script>
<script src="../../Scripts/i18n/grid.locale-en.js" type="text/javascript"></script>

$("#list").jqGrid({
    url: 'http://shah.localhost:3203/App/GetTables',
    datatype: 'json',
    mtype: 'GET',
    jsonReader: {
        repeatitems: false
    },
    colModel: [{
        name: 'id',
        label: 'Table Number',
        width: 105
    }, {
        name: 'seatCount',
        label: 'Seat Count',
        width: 105
    }, {
        name: 'canCombine',
        label: 'Combinable?',
        width: 120
    }],

    rowNum: 10,
    rowList: [10, 20, 30],
    sortname: 'id',
    sortorder: 'desc',
    viewrecords: true,
    gridview: true,
    caption: 'My first grid',
    pager: 'pager'
});
});

$("#list").navGrid('#gridpager', {
    add: true
}, {}, {}, {}, {}, {
    closeOnEscape: true
}); 
```

我的html标签：

```
<table id="list"><tr><td/></tr></table> 
<div id="pager"></div> 
```

图片：

[那不是图像被截断，这就是导航网格完全显示的方式](http://i.stack.imgur.com/ZtcEG.jpg)

# grails - 我如何在 Bootstrap.groovy 中手动设置 GrailsUtil.environment 变量

> ID：12593295
> 
> 赞同：6
> 
> 时间：2012-09-26T01:20:16.927
> 
> 标签：grails

在 bootstrap.groovy 运行时 GrailsUtil.environment 会自动切换到开发。

谁能解释一下，如何在引导启动之前手动更改该变量..？？

它在哪里设置为 grails 框架中的默认开发..??

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-26T02:03:41.707

`run-app`例如，当您键入时，您的 grails 环境会在命令行中指定。我不相信您可以在运行时切换 Bootstrap.groovy 或任何文件中的环境设置。相反，您可以通过执行 grails 命令的方式来更改它：

`-Dgrails.env=production run-app`- 您可以创建自己的环境来运行，只需将值更改为`-Dgrails.env`您的自定义环境。

一些 grails 任务将默认在给定的环境中运行；您不需要明确设置它。

1.  `run-app`-- 默认在`development`环境中运行
2.  `test-app`-- 默认为`test`环境
3.  `war`-- 默认为`production`环境

更多信息在这里： [http ://www.grails.org/Environments](http://www.grails.org/Environments)

# iphone - iOS 6 MFMailComposeViewController：仅支持 RGBA 或白色空间，此方法是 hack

> ID：12593299
> 
> 赞同：27
> 
> 时间：2012-09-26T01:20:48.073
> 
> 标签：iphone, objective-c, ios, xcode, ios6

真的，真的很奇怪的错误

我有一个在 iOS5/.1 中运行良好的应用程序，现在我在使用 iOS6 时遇到了一些转换问题，但这一个令人困惑。

我有一些启动邮件编写器的代码，并且从 iOS 6 开始，它会导致崩溃并出现以下错误：

*** 断言失败 -[UICGColor encodeWithCoder:], /SourceCache/UIKit/UIKit-2372/UIColor.m:1191 2012-09-26 02:14:38.044 MyCQs Medical[2126:1b03] ***由于未捕获的异常而终止应用程序' NSInternalInconsistencyException', reason: '只支持 RGBA 或 White 颜色空间，这种方法是 hack。

有什么建议么？通过反复试验注释掉各种行，似乎是导致错误的 alloc/init 行，尽管当所有行都未注释时，所有 NSLogs 都被执行，包括“present”，它表示应该调用的所有内容，已经。该应用程序在邮件撰写器出现在屏幕上之前崩溃，我非常感谢这里的任何建议

```
 if (indexPath.row == 3) {
               if([MFMailComposeViewController canSendMail]){
                   mailComposer = [[MFMailComposeViewController alloc]init];
                   NSLog(@"Alloc, init");
                   mailComposer.mailComposeDelegate = self;
                   NSLog(@"Set delegate");
                   NSArray *toArray = [[NSArray alloc]initWithObjects:@"john@doe.com", nil];
                   NSLog(@"To array");
                   [mailComposer setToRecipients:toArray];
                   NSLog(@"To recipients");
                   [mailComposer setSubject:@"Message from a MyCQs user!"];
                   NSLog(@"Subject");
                   NSLog(@"About to present mail composer");
                   [[mailComposer navigationBar] setTintColor:[UIColor blackColor]];
                   [self presentModalViewController:mailComposer animated:YES];
                   NSLog(@"Present");
             }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T15:41:48.510

好的，只是部分解决方案，但它是我能想到的最好的解决方案，无需进行一些相当破坏性的代码更改。

对于将来遇到此问题的其他人，我认为这是 iOS 6 中的一个错误，当您将 UITableView separatorStyle 设置为 colorWithPatternImage 时，MFMailComposeViewController 崩溃，但是当您使用纯色时它可以正常工作，所以：

```
 if ([[[UIDevice currentDevice] systemVersion] floatValue] > 5.2) {
           NSLog(@"Using iOS 5x");
           [[UITableView appearance]setSeparatorColor:[UIColor colorWithRed:142.0/255.0          green:130.0/255.0 blue:76.0/255.0 alpha:1.0]];
        }
        else {
           NSLog(@"Using iOS 6x, Table view use pattern color");
           [[UITableView appearance]setSeparatorColor:[UIColor colorWithPatternImage: [UIImage imageNamed:@"dotted-line2.png"]]];
        } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T03:02:31.727

实际上，我认为这是一个重大错误，有人提交了雷达吗？

在我看来，只要您在呈现视图控制器的外观代理中使用“colorWithPatternImage”ANYWHERE，断言就会抛出。

我认为发生的情况是 iOS 在切换到单独的服务之前尝试存储您的应用程序的外观（这是 MFMailComposeViewController 所做的，它现在是一个“远程视图控制器”，由您的应用程序呈现，但由另一个应用程序/过程），因为邮件应用程序想要确定外观本身，所以它会改变颜色等。更多关于远程视图控制器的信息，如果有人感兴趣： http: [//oleb.net/blog/2012/10/remote -view-controllers-in-ios-6/](http://oleb.net/blog/2012/10/remote-view-controllers-in-ios-6/)

这似乎失败了。这必须是一个错误，图像应该是可编码的。

变通办法可能很难。在呈现视图控制器之前，我尝试将图案颜色换成普通颜色，但发现您至少必须确保它真的在屏幕上重新绘制并放弃（我并不真的需要图案）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-30T12:02:31.570

我的问题也是由于使用 colorWithPatternImage 但我发现它似乎只在用于 MFMailCompserViewController 上显示的元素时才会导致问题，例如：

```
[[UINavigationBar appearance] setTintColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"navbar"]]]; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-02T17:11:59.103

I've found that MFMailComposeViewController only crashes when `colorWithPatternImage` is used in `[[UITableView appearance]` statement. I've had no problem when I set the background and separatorColor in the table's viewDidLoad. The only problem is you need to do this for each table.

```
[self.tableView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"image.png"]]];
[self.tableView setSeparatorColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"image.png"]]]; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-15T17:40:19.843

@coolio 是对的，它似乎在将图案颜色与任何控制器类一起使用时发生。（显然，*至少*是 UITabBarController 和 UITableViewController。）

我通过子类化我的标签栏控制器并使用 appearanceWhenContainedIn: 来解决这个问题。这样，您仍然可以使用您喜欢的纹理，而无需子类化 MFMailComposeViewController 或嗅探 iOS 版本等。

```
UIColor *tabBarBgPattern = [UIColor colorWithPatternImage:...];
[[UITabBar appearanceWhenContainedIn:[MyTabBarController class],
                                     nil]
                  setBackgroundColor:tabBarBgPattern]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-25T16:49:42.867

在使用`colorWithPatternImage`和尝试呈现`MFMailComposeViewController`. 我必须从 UIImage 确定颜色，因为 UIImage 可以由用户选择，并且我想根据用户选择的图像“主题”我的应用程序。

对我来说，解决方案（尽管有点老套）是获取 UIImage 原点（0,0）的 RGBA 值，然后将其应用为背景颜色，而不是使用`colorWithPatternImage`.

```
+ (UIColor*)getUIColorFromImageAtOrigin:(UIImage*)image
{        
    // First get the image into your data buffer
    CGImageRef imageRef = [image CGImage];
    NSUInteger width = CGImageGetWidth(imageRef);
    NSUInteger height = CGImageGetHeight(imageRef);
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    unsigned char *rawData = (unsigned char*) calloc(height * width * 4, sizeof(unsigned char));
    NSUInteger bytesPerPixel = 4;
    NSUInteger bytesPerRow = bytesPerPixel * width;
    NSUInteger bitsPerComponent = 8;
    CGContextRef context = CGBitmapContextCreate(rawData, width, height,
                                                 bitsPerComponent, bytesPerRow, colorSpace,
                                                 kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
    CGColorSpaceRelease(colorSpace);

    CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);
    CGContextRelease(context);

    // Now your rawData contains the image data in the RGBA8888 pixel format.
    int byteIndex = (bytesPerRow * 0) + 0 * bytesPerPixel;

    CGFloat red   = (rawData[byteIndex]     * 1.0) / 255.0;
    CGFloat green = (rawData[byteIndex + 1] * 1.0) / 255.0;
    CGFloat blue  = (rawData[byteIndex + 2] * 1.0) / 255.0;
    CGFloat alpha = (rawData[byteIndex + 3] * 1.0) / 255.0;

    UIColor *acolor = [UIColor colorWithRed:red green:green blue:blue alpha:alpha];

    free(rawData);

    return acolor;
} 
```

现在，如果我使用它`UIColor`作为背景而不是`colorWithPatternImage`，我可以尽情分享而不会遇到这个奇怪的异常。

上述方法改编自我在这里找到的解决方案：[https ://stackoverflow.com/a/1262893/1103584](https://stackoverflow.com/a/1262893/1103584)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-11T08:43:00.503

我在 tableViewController 的导航栏中使用 UIBarButtonItem 使用“colorWithPatterImage”来显示模式视图（我没有使用**MFMailComposeViewController**）时遇到了同样的问题。

```
[[UIBarButtonItem appearance] setTintColor:[UIColor colorWithPatternImage:bgImage]]; 
```

我需要用 RGBa 颜色替换它；

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-02T19:43:14.250

该线程为我提供了有关如何使用 ShareKit 解决我的应用程序中的类似问题并尝试通过电子邮件发送视图图像的重要线索。现在我只为低于 6.0 的版本更改 UISwitch 外观。

我的应用程序启动时会调用此代码：

```
// Protect against IOS 6.0 BUG: 'NSInternalInconsistencyException', reason: 'Only support RGBA or the White color space, this method is a hack.'
if ([[[UIDevice currentDevice] systemVersion] floatValue] < 6.0) {
    UIImage *patternImage = [UIImage imageNamed:@"solid-colors_blue.png"];
    UIColor* switchColor = [UIColor colorWithPatternImage:patternImage];
    [[UISwitch appearance] setOnTintColor: switchColor];
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-02T13:45:35.167

对于使用模式，您可以使用 resizableImageWithCapInsets。在 Monotouch 中，它看起来像这样：

```
var sba = UISearchBar.Appearance;

var img = UIImage.FromBundle("myResource.png");

if (UIDevice.CurrentDevice.CheckSystemVersion(6, 0)) {
    img = img.CreateResizableImage(UIEdgeInsets.Zero, UIImageResizingMode.Tile);
    sba.BackgroundColor = UIColor.LightGray;
    sba.BackgroundImage = img;
} else {
    sba.BackgroundImage = new UIImage();
    sba.BackgroundColor = UIColor.FromPatternImage(img);
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-25T04:06:16.563

这是我报告的 iOS 6 的错误，它被标记为重复。所以，有人更早地报告了这个错误。

# c++ - 将对象实例作为函数参数传递——这段代码会调用未定义的行为吗？

> ID：12593300
> 
> 赞同：3
> 
> 时间：2012-09-26T01:20:52.300
> 
> 标签：c++, pass-by-reference, undefined-behavior

这是我在生产中运行的代码的微型版本。我发现，我的真实代码在 gcc 和 Intel 编译器下的行为不同，我最好的猜测是未定义的行为。请考虑以下示例代码：

```
#include <iostream>

struct baseFunctor{
    virtual double operator()(double x) const = 0;
};

class mathObj{
    const baseFunctor *tmp1, *tmp2;
public:
    void set(const baseFunctor& b1, const baseFunctor& b2){
        tmp1 = &b1;
        tmp2 = &b2;
    }
    double getValue(double x){
        return (tmp1->operator()(x) + tmp2->operator()(x));
    }
};

int main () {
    mathObj obj;

    struct squareFunctor: public baseFunctor {
        double operator()(double x) const { return x*x; }
    };
    struct cubeFunctor: public baseFunctor {
        double operator()(double x) const { return x*x*x; }
    };

    obj.set(squareFunctor(), cubeFunctor());
    std::cout << obj.getValue(10) << std::endl; 
    return 0;
} 
```

可以`obj.set(squareFunctor(), cubeFunctor());`调用未定义的行为吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T01:23:52.777

是的，它肯定会这样做，因为您正在存储指向在语句末尾销毁的临时值的指针，然后使用它们。使用被破坏的对象是未定义的行为。

您需要单独创建值，然后调用`set`它们：

```
cubeFunctor cf;
squareFunctor sf;

obj.set(sf, cf); 
```

请注意，您无法通过按值存储仿函数来解决此问题（除非您使用模板），因为这会导致切片。

另外作为旁注，您可以更改`getValue`为

```
return (*tmp1)(x) + (*tmp2)(x); 
```

让它看起来更漂亮一些（你仍然可以得到动态调度）。

# jetty - 如何将 CXFNonSpringJaxrsServlet 与 serviceBean 而不是 serviceClass 一起使用？

> ID：12593302
> 
> 赞同：3
> 
> 时间：2012-09-26T01:21:27.077
> 
> 标签：jetty, cxf, jax-rs, embedded-jetty

我正在尝试将 Apache CXF 与 JAX-RS 一起用作大型应用程序中的嵌入式 REST 端点。我不能使用 spring 配置的 CXF，因为我的应用程序需要管理 Jetty 实例和 servlet 的生命周期。

[此处](http://cxf.apache.org/docs/jaxrs-services-configuration.html#JAXRSServicesConfiguration-AttachingJAXRSendpointstoanexistingJettyserver)的示例显示了如何使用服务类名来执行此操作，但在我的应用程序中，传递类名而不是 bean 将是迂回和丑陋的。谁能指出我在这里使用 bean 的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T10:12:40.033

您必须让**CXFNonSpringJaxrsServlet创建您的实例，但您可以通过扩展****CXFNonSpringJaxrsServlet#configureSingleton**来配置它（=将其绑定到外部世界）

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T08:35:12.847

请参阅这篇文章：[CXF/Jetty 等效于以下 Jersey/Jetty 代码](https://stackoverflow.com/questions/28010695/cxf-jetty-equivalent-of-the-following-jersey-jetty-code)的解决方案。使用 CXF 3.0.3 和 Jety 9.2.5.v20141112 进行测试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-06T02:09:11.167

这就是它的完成方式

```
Object serviceObject = // your JAX-RS service object
JAXRSServerFactoryBean rs = new JAXRSServerFactoryBean();
rs.setServiceBeanObjects(serviceObject);
Server server = rs.create(); 
```**

# php - 为什么在我的 PHP 页面中出现“文档末尾的额外内容”？

> ID：12593306
> 
> 赞同：-3
> 
> 时间：2012-09-26T01:21:56.227
> 
> 标签：php, amazon-web-services

这是我的错误：

> 第 2 行第 1 列的错误：文档末尾的额外内容

下面是第一个错误之前的页面渲染。

[我刚刚从这里](http://kyleschaeffer.com/tutorials/amazon-web-services-php/)复制了代码。

这是我的代码：

```
 <?php
header('Content-type: text/xml');
function awsRequest($searchIndex, $keywords, $responseGroup = false, $operation = "ItemSearch", $pageNumber = 1){
    $service_url = "http://ecs.amazonaws.com/onca/xml?Service=AWSECommerceService";
    $associate_tag = "your-associate-tag";
    $secret_key = "YOUR_SECRET_KEY";
    $access_key = "YOUR_ACCESS_KEY";

    // build initial request uri
    $request = "$service_url&Operation=$operation&AssociateTag=$associate_tag&SearchIndex=$searchIndex&Keywords=".urlencode($keywords)."&ItemPage=$pageNumber";

    // parse request into params
    $uri_elements = parse_url($request);
    $request = $uri_elements['query'];
    parse_str($request, $parameters);

    // add new params
    $parameters['Timestamp'] = gmdate("Y-m-d\TH:i:s\Z");
    $parameters['Version'] = $version;
    $parameters['AWSAccessKeyId'] = $access_key;
    if($responseGroup){
        $parameters['ResponseGroup'] = $responseGroup;
    }
    ksort($parameters);

    // encode params and values
    foreach($parameters as $parameter => $value){
        $parameter = str_replace("%7E", "~", rawurlencode($parameter));
        $value = str_replace("%7E", "~", rawurlencode($value));
        $request_array[] = $parameter . '=' . $value;
    }
    $new_request = implode('&', $request_array);

    // make it happen
    $signature_string = "GET\n{$uri_elements['host']}\n{$uri_elements['path']}\n{$new_request}";
    $signature = urlencode(base64_encode(hash_hmac('sha256', $signature_string, $secret_key, true)));

    // return signed request uri
    return "http://{$uri_elements['host']}{$uri_elements['path']}?{$new_request}&Signature={$signature}";
}
// make the request
$xml = simplexml_load_file(awsRequest("VideoGames", "call of duty", "Images", "ItemSearch", "1"));

// now retrieve some data
$totalPages = $xml->Items->TotalPages;
echo "<p>There are $totalPages pages in the XML results.</p>";

// retrieve data in a loop
echo "<ul>\n";
foreach($xml->Items->Item as $item){
    echo "<li>".$item->ASIN."</li>\n";
}
echo "</ul>\n";
?> 
```

我正在 AWS 上部署它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T02:26:47.157

确保您的代码编辑器未在文档中包含 BOM。我知道notepad ++和其他一些默认情况下包含这个事实。如果包含它，它将在您的文档中插入不可见的字符，这看起来像是输出到服务器，从而导致您看到的错误消息。尝试将您的代码复制并粘贴到没有 BOM 的新文档中。

在 Dreamweaver（或其他编辑器）中创建没有 BOM（字节顺序标记）的新 php 文档应该可以解决问题。

# codeigniter - 每个用户的分页配置

> ID：12593307
> 
> 赞同：0
> 
> 时间：2012-09-26T01:22:09.330
> 
> 标签：codeigniter

我在 Codeigniter 中使用分页，我希望默认每页显示 15 条记录。但是，我想给用户选项来选择他想在每页看到多少条记录，从下拉列表中选择 30、50、100 或所有记录。

由于我将在不止一个地方拥有此代码，因此我想避免在我的控制器中重复相同的代码。任何人都知道根据 MVC 哲学实现此选项的正确方法是什么？这段代码应该放在某个配置文件中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:45:50.997

无论是[库](http://codeigniter.com/user_guide/general/creating_libraries.html)还是[助手](http://codeigniter.com/user_guide/general/helpers.html)，都是拥有可在多个地方重用的代码的最佳场所

如果您想存储用户偏好，以便您的应用程序记住它，则将其存储在[session](http://codeigniter.com/user_guide/libraries/sessions.html)或[database](http://codeigniter.com/user_guide/database/index.html)中。

# c# - MEF 和 ShadowCopying DLL，以便我可以在运行时覆盖它们

> ID：12593308
> 
> 赞同：12
> 
> 时间：2012-09-26T01:22:19.440
> 
> 标签：c#, mef, appdomain, shadow-copy

我试图在我的 MEF 插件目录中停止我的应用程序锁定 DLL，以便我可以在运行时覆盖程序集（注意我实际上并没有试图让 MEF 即时重新加载它们，在下一个应用程序启动时很好，我只是不想停止应用程序进行复制）

我试图通过为我的 mef 加载的程序集创建一个影子复制的应用程序域来做到这一点，如下所示：

```
[Serializable]
    public class Composer:IComposer
    {
        private readonly string _pluginPath;
        public Composer(IConfigurePluginDirectory pluginDirectoryConfig)
        {
            _pluginPath = pluginDirectoryConfig.Path;
            var setup = new AppDomainSetup();
            setup.ShadowCopyFiles = "true"; // really??? is bool not good enough for you?
            var appDomain = AppDomain.CreateDomain(AppDomain.CurrentDomain.FriendlyName + "_PluginDomain", AppDomain.CurrentDomain.Evidence, setup);

            appDomain.DoCallBack(new CrossAppDomainDelegate(DoWorkInShadowCopiedDomain));      
        }

        private void DoWorkInShadowCopiedDomain()
        {
            // This work will happen in the shadow copied AppDomain.

            var catalog = new AggregateCatalog();
            var dc = new DirectoryCatalog(_pluginPath);
            catalog.Catalogs.Add(dc);
            Container = new CompositionContainer(catalog);
        }

        public CompositionContainer Container { get; private set; }
    } 
```

然后通过此类上的 CompositionContainer 访问我的 MEF 组件目录。然而，组合容器似乎只在影子复制域内初始化（这是有道理的），这意味着它在我的应用程序域中为空。我只是想知道是否有更好的方法来执行此操作或某种跨域查询的方法来获取我的 MEF 组件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:19:32.213

如果您不想遵循 Dan Bryant 和 zync 的解决方案，您可以创建一个 shell 应用程序，它只是在新的`AppDomain`.

一种方法是：

1.  创建一个新的应用程序项目，它将成为 shell 应用程序。
2.  在 shell 应用程序中，创建`AppDomain`，启用卷影复制，如果您愿意，指定将启用卷影复制的目录。
3.  用于[`AppDomain.ExecuteAssembly`](http://msdn.microsoft.com/en-us/library/sxx9f4c2.aspx)调用您当前的应用程序。

如果您有一个类库而不是应用程序，则可以尝试以下操作：

1.  创建一个新的类库项目。
2.  在新建的类库项目中添加如下接口：

    ```
    public interface IRemoteLoader  
    {  
        void Load();  
        void Unload();  
    } 
    ```

3.  将此接口的实现添加到需要在新 AppDomain 中执行的类库中。在`Load`和`Unload`方法中，您应该添加代码以分别执行初始化和清理。使类派生自[`MarshalByRefObject`](http://msdn.microsoft.com/en-us/library/system.marshalbyrefobject.aspx). 这是 .NET Remoting 在两个 AppDomains 上创建代理对象所必需的。

4.  创建新的 AppDomain 后，使用[`CreateInstanceAndUnwrap`](http://msdn.microsoft.com/en-us/library/3c4f1xde.aspx)从步骤 3 创建加载程序类的实例。

5.  在步骤 4 中创建的对象上使用`Load`and `Unload`。

如果您不进行细粒度控制并且简单地启动/停止就足够了，这就足够了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-01T14:11:44.303

这种场景更接近于移动应用中的自动更新功能。本质上，如果在 App Start/Restart 上可用，您希望获取新的程序集。

一种设计方法可能是使用一种通信机制在启动时向您的应用程序发出新程序集可用的信号（可能是 version.txt 文件）。如果是，那么相同的 version.txt 文件可以指向程序集的新位置。是的 - 您最终可能会创建许多子文件夹以指向正确的版本，但这些可以由另一个进程清理。

你可以使用这样的层次结构 -

版本\ - 版本1.0\ - 版本2.0\

这种类型的设计将更接近于众所周知的自动更新范例。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-29T20:16:31.283

您是否可以选择不使用 DirectoryCatalog 并使用 AssemblyCatalog 加载目录中的所有程序集？您甚至可以转到代码 plex 并从 DirectoryCatalog 类中复制相同的代码，该类会读取目录并加载程序集。

您将失去动态加载它们的能力，但正如您所提到的，这并不是真正的要求。

# java - 套接字编程序列化对象

> ID：12593310
> 
> 赞同：1
> 
> 时间：2012-09-26T01:22:52.630
> 
> 标签：java, sockets, serialization

我的代码中有一个非常奇怪的情况，我不明白我正在发送一个对象让我们通过套接字说 O 然后我正在更改对象中变量的值并再次发送它，但是第二次当我打印它时在客户端，我得到的值与第一个对象中的值相同。

客户端代码：

```
 while(true){
             try{
             order=(Order)ois.readObject();

            System.out.println(order);

             } 
```

服务器代码：

```
public void sendOrder(Order o){
    try {
        out.writeObject(o);

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

主要方法：

```
Server_Socket ss=new Server_Socket();
    ss.sendOrder(o);
    o.add(r2);
    ss.sendOrder(o); 
```

在我发送之前，服务器端的值肯定会发生变化，但我不明白为什么在客户端它没有显示 r2 添加到对象中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T01:46:29.280

对象正在被`ObjectOutputStream`. 为防止这种情况，请`ObjectOutputStream.reset()`在每次写入后调用。如果您要发送不包含其他对象的简单对象，请`writeUnshared()`使用`writeObject()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T01:44:32.730

IOStreams 正在缓存对象。要解决此问题，请在发回对象之前在服务器上创建一个深度克隆。当客户端从流中拉取对象时，它会有一个不同的实例 id，它实际上会在客户端反序列化和实例化对象。

好玩的东西。

# python - Python - 通过二进制对象的“窗口”迭代？

> ID：12593312
> 
> 赞同：1
> 
> 时间：2012-09-26T01:23:25.540
> 
> 标签：python, iterator

在比较函数中，我基本上是在一个长二进制对象（例如，aaaAAAbbbBBB）中寻找一个模式（例如“AAA”）

我正在通过文件向后工作（我知道匹配将比开始更接近结尾），向正在检查匹配的变量添加 1 个字节：

```
1\. aaaAAAbbbBB[B]
2\. aaaAAAbbbB[BB]
3\. aaaAAAbbb[BBB]
4\. aaaAAAbb[bBBB]
5\. ... 
n. aaa[AAAbbbBBB] 
```

找到匹配，偏移量 = -n

鉴于我知道我的模式是 3 个元素长，我想知道我是否可以简单地对搜索变量进行窗口化而不是增加它 - 当匹配是列表中的 +1,000,000 个元素时它会变得非常慢 - 相同数据的窗口化视图将是：

```
1\. aaaAAAbbb[BBB]
2\. aaaAAAbb[bBB]B
3\. aaaAAAb[bbB]BB
4\. aaaAAA[bbb]BBB
5\. ...
n. aaa[AAA]bbbBBB 
```

找到匹配，偏移量 = -n

我目前的搜索看起来像：

```
if marker in f_data[-counter:]:
    offset = (len(f_data)-counter)+len(marker)
    return offset 
```

在 MATLAB 中，我会使用数组寻址在数组中移动（例如调用 window = a[5:8]、window = a[4:7] 等），但我认为这在 Python（2.7）中是不可能的

我可以看到一些使用滑动窗口的建议，（[Python 中的滚动或滑动窗口迭代器](https://stackoverflow.com/questions/6822725/rolling-or-sliding-window-iterator-in-python)- 这看起来很接近）但我看不到如何实现它，或者它们引用了我不知道如何的库利用。

是否有内置功能可以执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T01:29:25.473

为什么不直接使用`rfind()`or `rindex()`？

```
haystack = "aaaAAAbbbBBB"
needle   = "AAA"

pos = haystack.rfind(needle)

if pos >= 0:
    print "found at", pos - len(haystack)
else:
    print "not found" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T01:40:09.473

我认为这利用了你提到的 window() 迭代器函数。

```
>>> l = "ABCABACAAASSD"
>>> from itertools import islice
>>>
>>> def window(seq, n=2):
...     "Returns a sliding window (of width n) over data from the iterable"
...     "   s -> (s0,s1,...s[n-1]), (s1,s2,...,sn), ...                   "
...     it = iter(seq)
...     result = tuple(islice(it, n))
...     if len(result) == n:
...         yield result
...     for elem in it:
...         result = result[1:] + (elem,)
...         yield result
...
>>>
>>> data = [c for c in l] # get each byte/charactor as separate item in list
>>> data
['A', 'B', 'C', 'A', 'B', 'A', 'C', 'A', 'A', 'A', 'S', 'S', 'D']
>>> for idx, elements in enumerate(window(reversed(data), n=3)):
...     section = "".join(elements)
...     if section == "AAA":
...         print "found at {}!".format(idx)
...
found at 3!
>>> 
```

解释：

*   `reversed()`接受一个列表并返回一个迭代器，其中的元素以相反的顺序排列
*   `window()`接受一个可迭代对象（列表、元组、迭代器）并返回`n`元素的数量，一次移动索引 1 个元素。
*   `enumerate()`接受一个可迭代的并简单地附加一个计数器，因此它将返回计数器/位置和给定的元素项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T01:28:57.033

两件事情：

(1) 标准字符串类型保存字节，您可以使用正则表达式。我可以建议您将对象 slurp 成一个字符串，然后执行正则表达式搜索。

(2) 如果您确实想以艰难的方式做到这一点，请访问[http://docs.python.org/library/itertools.html#itertools.groupby](http://docs.python.org/library/itertools.html#itertools.groupby)

# android - 在不启动主 gui 的情况下启动 android 应用程序？

> ID：12593317
> 
> 赞同：0
> 
> 时间：2012-09-26T01:24:07.740
> 
> 标签：android

我只想要一个运行一些代码的应用程序来快捷地访问 ics 的某个部分。如何在运行时运行此代码而无需启动 main.xml？我看到清单启动了 main.xml，但这就是我所知道的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T01:58:23.980

你听说过Android中的[**服务组件吗？**](http://developer.android.com/reference/android/app/Service.html)服务允许您在后台工作而不会干扰您当前的 GUI。您可以在 GUI 中完成大部分想要对用户隐藏的工作。

看一下音频播放代码的例子，（原始来源来自[Makarana 的博客](http://marakana.com/forums/android/examples/60.html)。）

```
public class MyService extends Service {
    private static final String TAG = "MyService";
    MediaPlayer player;

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onCreate");

        player = MediaPlayer.create(this, R.raw.braincandy);
        player.setLooping(false); // Set looping
    }

    @Override
    public void onDestroy() {
        Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onDestroy");
        player.stop();
    }

    @Override
    public void onStart(Intent intent, int startid) {
        Toast.makeText(this, "My Service Started", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onStart");
        player.start();
    }
} 
```

# google-maps-api-3 - Google Places api 与 Google 地图搜索

> ID：12593318
> 
> 赞同：2
> 
> 时间：2012-09-26T01:24:31.117
> 
> 标签：google-maps-api-3, google-places-api

我已经成功使用了 Google Places Api，并且能够在给定 latlongbound 和关键字的情况下检索商业机构（商店）。但我不禁想知道为什么它返回的商店比您访问 maps.google.com 并输入关键字时少。Google Places 甚至不会返回那些在地图本身上绘制了名称和图标的人。

在 maps.google.com 上键入关键字时，我想检索具有类似结果的 json，并且我并不介意是否不使用 Google Places。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:53:52.787

听起来您可能有额外的过滤阻止您查询所有结果。确保您没有限制纬度/经度周围的“界限”或“区域”。

[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

祝你好运！

# android - 如何在 Android 4.0+ 上禁用主页、电源和搜索按钮？

> ID：12593319
> 
> 赞同：1
> 
> 时间：2012-09-26T01:24:56.877
> 
> 标签：android

如何在 Android 4.0+ 上禁用主页、电源和搜索按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:31:45.560

您可以使用以下方法隐藏它们`SYSTEM_UI_FLAG_HIDE_NAVIGATION`：

```
myView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION); 
```

此属性仅在 4.0+ 中。最接近的 3.0+ 是`SYSTEM_UI_FLAG_LOW_PROFILE`.

但是他们不应该（如果他们可以的话）被永久禁用；想象一下，如果某个应用程序剥夺了您使用“主页”按钮的能力，然后开始无限循环，您会有什么感觉。

**编辑**：等等，只需阅读“主页、电源和搜索”按钮。您不能禁用电源按钮（这很愚蠢），而且大多数 Android 4.0 手机没有专门的搜索按钮，除非它们是 2.3 设备的升级版（例如 Galaxy S II）。我的上述信息涵盖了软 Home、Back 和 Recent Apps 键。

# gradle - 从 Gradle 开始

> ID：12593321
> 
> 赞同：8
> 
> 时间：2012-09-26T01:26:14.500
> 
> 标签：gradle

我不知道任何构建工具，如 Ant、Maven 或 Gradle。这是我第一次从 Gradle 开始（并且没有多少时间来理解它：（）。所以这是我脑海中的一个愚蠢的问题。

我使用 Gradle 的初始步骤：

1.  我在eclipse中创建了一个简单的java程序。
2.  我从项目属性窗口手动添加了依赖项。
3.  我从命令行探索了 src 文件夹并在那里创建了 build.gradle。
4.  我执行了一个命令“gradle build”，提示我构建成功。

请告诉我这些步骤如何帮助我不在 Eclipse 中手动添加依赖项。

（对于其中一个项目，我在 Eclipse 中安装了 maven 插件。因此，每当我需要添加一些依赖项时，我只需运行 Maven clean/build。然后我手动添加其余依赖项。它会自动将依赖项添加到我的开发环境中）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T01:54:56.090

Gradle 提供了两种自动化 Eclipse 项目设置的方法：

1.  将[Eclipse 插件](http://gradle.org/docs/current/userguide/userguide_single.html#eclipse_plugin)应用到 Gradle 构建脚本。运行`gradle eclipse`以生成 Eclipse 项目文件（`.project`、`.classpath`等）。将项目导入 Eclipse ( `Import->Existing Project Into Workspace`)。每次在 Gradle 构建脚本中声明一些新的依赖项时，重新生成项目文件并在 Eclipse 中刷新项目。

2.  安装 Eclipse Gradle 集成（[安装说明](https://github.com/SpringSource/eclipse-integration-gradle#installation-instructions)、[教程](http://static.springsource.org/sts/docs/2.7.0.M1/reference/html/gradle/gradle-sts-tutorial.html)）。将项目导入 Eclipse ( `Import->Gradle Project`)。每次在 Gradle 构建脚本中声明一些新的依赖项时，请`Refresh Dependencies`从`Gradle`Eclipse 项目的上下文菜单中进行选择。

无论哪种情况，您都需要熟悉 Gradle 的[依赖管理](http://gradle.org/docs/current/userguide/userguide_single.html#artifact_dependencies_tutorial)。

# aptana3 - Aptana 打开然后立即关闭

> ID：12593322
> 
> 赞同：1
> 
> 时间：2012-09-26T01:26:33.297
> 
> 标签：aptana3

我在 Windows 7 64 位上安装了 Aptana Studio 3 并尝试第一次打开它，但它加载了工作台并实际上打开了，但大约一秒钟后它关闭了。没有错误或警告。我们的 C 驱动器已锁定，因此我从另一篇文章中获得了一些建议，将工作空间指向可读的地方，但这不起作用。

有任何想法吗？

# android - 由drawable to bitmap引起的Android OOM

> ID：12593324
> 
> 赞同：1
> 
> 时间：2012-09-26T01:26:37.940
> 
> 标签：android, bitmap

这是我的代码：

```
int[] image = {R.drawable.image1, R.drawable.image2, R.drawable.image1, R.drawable.image2,
        R.drawable.image1, R.drawable.image2, R.drawable.image1, R.drawable.image2,
        R.drawable.image1, R.drawable.image2, R.drawable.image1, R.drawable.image2,
        R.drawable.image1, R.drawable.image2, R.drawable.image1, R.drawable.image2,
        R.drawable.image1, R.drawable.image2, R.drawable.image1, R.drawable.image2,
        R.drawable.image1, R.drawable.image2, R.drawable.image1, R.drawable.image2}; 
```

和getView：

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {

        convertView=LayoutInflater.from(getApplicationContext()).inflate(R.layout.item, null);
        ImageView imageView = (ImageView) convertView.findViewById(R.id.imageView);
        imageView.setBackgroundResource(image[position]);

        return convertView;
    } 
```

一切都很好。没有OOM。

然后，我想先对可绘制对象进行采样：

```
public static Bitmap sampleImage(Context context, int resourceId, int sampleSize) {        
            Bitmap resizeBmp = null;
            BitmapFactory.Options opts = new BitmapFactory.Options();
            opts.inSampleSize = sampleSize;
            resizeBmp = BitmapFactory.decodeResource(context.getResources(), resourceId, opts);

            return resizeBmp;
        } 
```

和新的getView：

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {

        convertView=LayoutInflater.from(getApplicationContext()).inflate(R.layout.item, null);
        ImageView imageView = (ImageView) convertView.findViewById(R.id.imageView);
        Bitmap item = BitmapUtil.sampleMaskInShelf(getApplicationContext(), image[position], 4);
        imageView.setImageBitmap(item);
        //      imageView.setBackgroundResource(image[position]);

        return convertView;
    } 
```

事情发生了。起初，应用程序不会崩溃。但是使用的内存超过50MB，上下滚动后，导致OOM。

问题是：1）为什么对图像进行采样会增加使用的内存。2）如何减少使用的内存，还有其他方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T01:42:44.213

It seems like you are working with a ListView here?

In that case, you would be better served (and hopefully conserving a significant amount of memory) with a couple of steps:

1.  You want to try to re-use the `convertView` whenever possible. Many articles have been written on how to do this. [Here is one](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/).
2.  It looks like you only really have two different images (`image1` and `image2`). It also seems like you are sampling the bitmap every time `getView()` is called. You probably ought to pre-calculate the two sampled bitmaps, and just use those over and over again.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T20:31:07.293

有三篇优秀的 Android 培训文章涵盖了这个确切的问题：

1.  [有效加载大型位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)
2.  [缓存位图](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)
3.  [显示位图](http://developer.android.com/training/displaying-bitmaps/display-bitmap.html)（特别是使用 GridView）

我可能会尝试阅读所有这三个，了解他们使用的技术并下载将所有培训代码封装到一个示例中的[示例应用程序。](http://developer.android.com/shareables/training/BitmapFun.zip)我认为在您的情况下，将图像预采样到它们的显示尺寸然后使用[LruCache](http://developer.android.com/reference/android/support/v4/util/LruCache.html)可能就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:41:32.137

您应该尝试重用视图，而不是每次都创建新视图，例如..

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    if(v == null)  {   
        v=LayoutInflater.from(getApplicationContext()).inflate(R.layout.item, null);
    } 
    ImageView imageView = (ImageView) convertView.findViewById(R.id.imageView);
    imageView.setBackgroundResource(image[position]);

    return v;
} 
```

对于 OOM 的更多操作，您应该查看以下链接.. [http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

或者你可以使用 UniversalImage Loader Library 来加载图像。你可以从 [UniversalImageLoader找到它的库](https://github.com/nostra13/Android-Universal-Image-Loader)

希望这有帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T17:32:10.157

垃圾收集器不会自动为您处理位图解除分配，因此任何时候您将位图直接分配给变量时，您还需要在完成后调用 bitmap.recycle()。不这样做会导致内存泄漏，这就是你所拥有的。但是，如果将位图分配给可绘制对象，然后调用 bitmap.recycle()，然后尝试使用可绘制对象，则会出现异常，因为可绘制对象无法访问回收的位图。

我正在编写一个类似于您所拥有的 ListView，而我最终做的是在当前视口上方十多个插槽的任何位图上调用 bitmap.recycle，在该 ListView 项目上设置一个标志以显示其位图被回收，然后让 getView 在用户向上滚动时重新加载位图。

# algorithm - 使用前序遍历的 BST

> ID：12593329
> 
> 赞同：5
> 
> 时间：2012-09-26T01:28:34.463
> 
> 标签：algorithm

仅给定其前序遍历，是否可以构造二叉搜索树？

我知道只有同时给出中序遍历和前序遍历才能构造二叉树。但我的问题是针对 Binary Search Tree 的。

例如：给定：5,3,1,4,7,8

```
 Construct : 

       5
    3    7 
  1   4    8 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T01:46:03.180

是的，您可以从前序遍历构造二叉搜索树。给定一个前序遍历 a_1, ..., a_n，将其分为三个段 a_1, (a_2,...,a_k) 和 (a_{k+1},..,a_n)，其性质为 a_ {k+1} 是预排序中第一个大于 a_1 的元素。

递归计算 (a_2,...,a_k) 的 BST T1 和 (a_{k+1},..,a_n) 的 BST T2，并将它们添加为以 a_1 为根的新 BST 的左右子树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T19:17:32.373

这里提供了一个更好的解释..

[http://www.geeksforgeeks.org/archives/25203](http://www.geeksforgeeks.org/archives/25203)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-03T16:14:36.453

在这里，您在构建树时使用数字的 inorder 属性。

1.  对于特定的中序和预序，树是固定的。
2.  如果只给出顺序，那么一棵树就有无限的可能性。
3.  同样，如果只给出预购，那么一棵树就有无限的可能性。

前任 ：

```
 a                             a
   /   \                            \
  b     e     and                    b
 / \   / \                            \
d  c  f   g                            d 
                                        \
                                         c
                                          \ 
                                           e
                                            \
                                             f
                                              \
                                               g 
```

上述两棵树具有相同的前序，即a、b、d、c、e、f、g

这是因为我们没有考虑给定元素之间的任何顺序作为您给出的案例中的数字。

如果您在使用 BST 时需要订购，此链接提供了解决方案。

[http://www.geeksforgeeks.org/construct-bst-from-given-preorder-traversa/](http://www.geeksforgeeks.org/construct-bst-from-given-preorder-traversa/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T02:47:40.587

基于上述算法..我在 C++ 中的实现

```
node* buildtree(int[] preOrder,int start,int end) {

  if(start>end) return NULL;

  node *t = malloc(sizeof(node));

  // finds the index of the first element greater than preOrder[start]
  int index = find_index(preOrder, preOrder[start], start+1, end); 

  t->left = buildtree(preOrder,start+1,index-1);
  t->right = buildtree(preOrder,index,end);

  return t;

}

int find_index(int[] preOrder, int search_element, int start, int end) {

  for(int i=start;i<=end;i++) {
      if(preOrder[i]>search_element) return i;
  }
   return end+1;
 } 
```

# c# - 填充 ArrayList 2 列并在每次出现的第二列中保持计数 c#

> ID：12593330
> 
> 赞同：0
> 
> 时间：2012-09-26T01:28:42.810
> 
> 标签：c#, asp.net

我是 ASP.NET C# 的新手。尝试创建一个包含 2 列的 ArrayList，一列用于值（字符串），一列用于计算每个列的数量。在添加值时，我需要搜索 ArrayList 以查找该值是否已存在，如果存在则添加 1，如果不存在，请将其添加到数组并将计数列设置为 1。有人可以提供一些代码示例吗？如果有更好的方法，那么我想听听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:07:40.877

```
private static Dictionary<string, int> values = new Dictionary<string, int>();

private static void Add(string newValue)
{
    if(values.ContainsKey(newValue))
    {
        values[newValue]++;  // Increment count of existing item
    }
    else
    {
        values.Add(newValue, 1);  // Add new item with count 1
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T01:35:42.473

如果您只是从字符串列表开始，有很多更简单的方法可以做到这一点。

我可能会在`GroupBy`这里使用扩展名

```
List<string> items = GetItems(); // from somewhere
var groups = items.GroupBy(i => i);

var countedItems = groups.Select(g => new 
    { Value = g.First(), HowMany = g.Count() }); 
```

然后放入一个 ArrayList，如果你想：

```
var arrayList = new ArrayList();
foreach (var thing in countedItems)
{
    arrayList.Add(thing.Value + " " thing.HowMany);
} 
```

但我可能更愿意将其放入 a`Dictionary`中，因为您知道每个单词只会映射到一个值 - 它出现的次数。

```
var result = countedItems.ToDictionary(i => i.Value, i => i.HowMany); 
```

# python - 如何在 Pyramid 中通过 POST 提交请求？

> ID：12593331
> 
> 赞同：1
> 
> 时间：2012-09-26T01:28:51.337
> 
> 标签：python, pyramid, web-frameworks

在 Pyramid 中，通过 GET 发送请求可以通过创建 URL 来完成，如下所示：

```
@view_config(route_name="test")
def test(request):
    return HTTPFound("http://test.com/redirect_to_another_test?a=1") 
```

但似乎`HTTPFound`不能通过 POST 做到这一点，那我该怎么做呢？有人对此有想法吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T20:27:23.783

您不能在 Pyramid 或任何其他服务器端框架或语言中执行此操作。

您的示例代码未显示表单提交，代码显示的是 HTTP 重定向。它指示浏览器访问另一个 URL，或者换句话说，告诉浏览器重新提交请求。

这个 Stack Overflow 问题讨论了同样的概念，尽管在 ASP 中不是 Python - [Response.Redirect with POST 而不是 Get？](https://stackoverflow.com/questions/46582/response-redirect-with-post-instead-of-get)

如果您要通过 GET 或 POST 在 Pyramid 中“提交请求”，则必须使用类似 、 或类似的`urllib2`库`requests`。在这些情况下，库将让 Pyramid 服务器充当请求的“提交者”。

如果你想让用户/网络浏览器通过 POST 提交请求，你必须做一些花哨的步法/诡计来让浏览器做到这一点。

实现这一目标的可能方法包括：

*   使用 JavaScript AJAX 表单提交，并通过 JSON 返回错误代码或指令，告诉您的 JavaScript 库通过 POST 重新提交相同的表单。
*   将用户重定向到填写了表单数据的 GET 页面（通过 GET 参数），并使用 javascript 通过 POST onload 重新提交表单

您不能用任何服务器端语言告诉浏览器通过 POST 重新提交请求。浏览器不是那样工作的。

您还应该知道，“大多数浏览器”通常会解释通过 GET 获取的任何重定向请求——即使原始请求是 POST。这不是规范 - 某些重定向代码应该保留一个 POST 一个 POST - 但是浏览器并不遵循所有规范。也没有 HTTP 状态代码或命令可以有目的地从 GET 切换到 POST 。

# c# - 如果没有多播，tcp 服务器如何工作？

> ID：12593345
> 
> 赞同：0
> 
> 时间：2012-09-26T01:30:40.043
> 
> 标签：c#, sockets, networking, tcp

我想知道 tcp 服务器是如何工作的，因为没有多播。我对在我的游戏中使用 tcp 很感兴趣，因为它不需要像其他游戏那样发送太多数据包。尽管如此，它仍然需要一个客户端/服务器架构。

由于没有多播，是否只有一个循环可以将每个客户端的所有内容直接从服务器发送到客户端？这是我的世界所做的吗（因为我读到它使用 tcp）

据我了解，只有 1 个套接字可以绑定到一个端口。使用 udp，服务器套接字可以接受来自 IPAdress.Any 的连接，因此它可以接收来自所有客户端的信息。由于 TCP 只是连接，这将如何工作？可以在同一个套接字上建立多个 TCP 连接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:38:23.450

服务器上的每个端口只能存在一个侦听连接。但是，许多客户端可以连接到那个侦听端口。引擎盖下的“连接”是 的组合`ServerIP + ServerPort + ClientIP + ClientPort`，客户端端口也不需要每次都相同（只有服务器端端口需要保持静态），操作系统选择一个随机的高数端口并将其提供给用于连接的客户端。这就是为什么您可以在客户端上有许多传出连接，但在服务器上只有一个侦听连接。

查看[此页面](http://www.switchonthecode.com/tutorials/csharp-tutorial-simple-threaded-tcp-server)以获取有关如何设置到一个端口的多个连接的示例。

# php - 如何将 HTML 表单中的数据插入 MySQL

> ID：12593350
> 
> 赞同：2
> 
> 时间：2012-09-26T01:31:10.900
> 
> 标签：php, mysql, html

请告诉我我的代码有什么问题！！！！

new-payment.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Process New Payment</title>
</head>

<body>
<h1>Please Input Payment Details</h1>
<fieldset>
    <legend>New Payment</legend>
    <form action="process-payment.php" method="post" />
<table>
<tr>
<td>Date:</td><td><input type="date" name="date" /><br /></td>
</tr>
<tr>
<td>Today's Charge:</td><td><input type="text" name="charge" /><br /></td>
</tr>
<tr>
<td>Today's Payment:</td><td><input type="text" name="payment" /><br /></td>
</tr>
<tr>
<td>Client Number:</td><td><input type="text" name="client_no" /><br /></td>
</tr>
<tr>
<td>Client Name:</td><td><input type="text" name="client_name" /><br /></td>
</tr>
<tr>
<td>Check Number:</td><td><input type="text" name="check_no" /><br /></td>
</tr>
<tr>
<td>Check Amount:</td><td><input type="text" name="check" /><br /></td>
</tr>
<tr>
<td>Cash Amount:</td><td><input type="text" name="cash" /><br /></td>
</tr>
<tr>
<td>Notes:</td><td><input type="text" name="notes" /><br /></td>
</tr>
<tr>
<td>Staff Initials:</td><td><input type="text" name="staff_initials" /><br /></td>
</tr>
</table>
<input type="submit" value="Process Payment">
    </form>
</fieldset>
<br />
</body>
</html> 
```

流程-payment.php

```
<?php

define('DB_NAME', 'DBNAME');
define('DB_USER', 'USERNAME');
define('DB_PASS', '');
define('DB_HOST', 'localhost');

$link = mysql_connect(DB_HOST, DB_USER, DB_PASS);

if (!$link) {
    dir('There was a problem when trying to connect to the host. Please contact Tech Support. Error: ' . mysql_error());    
}

$db_selected = mysql_select_db(DB_NAME, $link);

if (!$link) {
    dir('There was a problem when trying to connect to the database. Please contact Tech Support. Error: ' . mysql_error());    
}

$date = $_POST['date'];
$charge = $_POST['charge'];
$payment = $_POST['payment'];
$client_no = $_POST['client_no'];
$client_name = $_POST['client_name'];
$check_no = $_POST['check_no'];
$check = $_POST['check'];
$cash = $_POST['cash'];
$notes = $_POST['notes'];
$staff_initials = $_POST['staff_initials'];

$sql = "INSERT INTO payments (date, charge, payment, client_no, client_name, check_no, check, cash, notes, staff_initials) VALUES ('$date', '$charge', '$payment', '$client_no', '$client_name', '$check_no', '$check', '$cash', '$notes', '$staff_initials')";

if (!mysql_query($sql)) {
    die('Error: ' . mysql_error()); 
}

?> 
```

我不知道出了什么问题，但是当我按下处理付款时出现错误：

> 错误：您的 SQL 语法有错误；检查与您的 >MySQL 服务器版本相对应的手册，以获取在“支票、现金、笔记、员工姓名首字母”附近使用的正确语法 >VALUES ('2012-09-24', '$0.00', '$20.00', '46' at 1号线

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T01:33:09.627

`CHECK`是[MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。您必须将其括在反引号中才能将其用作列或表标识符。

```
$sql = "INSERT INTO payments (date, charge, payment, client_no, client_name, check_no, `check`, cash, notes, staff_initials) VALUES ('$date', '$charge', '$payment', '$client_no', '$client_name', '$check_no', '$check', '$cash', '$notes', '$staff_initials')"; 
```

请注意，您的脚本容易受到 SQL 注入的攻击。至少，您必须调用`mysql_real_escape_string()`这些输入变量中的每一个。

```
// As in:
$charge = mysql_real_escape_string($_POST['charge']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T01:34:43.877

改变

```
$sql = "INSERT INTO payments (date, charge, payment, client_no, client_name, check_no, check, cash, notes, staff_initials) VALUES ('$date', '$charge', '$payment', '$client_no', '$client_name', '$check_no', '$check', '$cash', '$notes', '$staff_initials')"; 
```

至

```
$sql = "INSERT INTO payments (date, charge, payment, client_no, client_name, check_no, check, cash, notes, staff_initials) VALUES ('".$date."', '".$charge."', '".$payment."', '".$client_no."', '".$client_name."', '".$check_no."', '".$check."', '".$cash."', '".$notes."', '".$staff_initials."')"; 
```

查找 MySQL PDO 而不是使用您正在使用的折旧连接代码可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-24T18:04:34.053

尝试回显所有元素并查看是否某些变量可能为空白或为空。

我有同样的错误。我通过这种方式解决了

# python - 如何在一个git项目中开发多个pip包？

> ID：12593354
> 
> 赞同：7
> 
> 时间：2012-09-26T01:31:39.080
> 
> 标签：python, django, git, pip

我正在开发一个 django 项目，使用 git 进行代码管理。主项目有许多应用程序作为子模块，每个应用程序都可以独立使用，因此每个应用程序都在单独的 git repos 中。所有这些应用程序都在开发中，并且至少有一个是从另一个项目中派生出来的。这些应用程序可以通过 pip 安装，克隆 repo 时，根目录中有 setup.py 和 README 等，然后是子文件夹中的实际应用程序。

如果我 pip install 应用程序，那么工作代码将与 git 管理下的文件夹位于不同的位置，所以每次我更改我需要的代码时`pip install`（或者是否有另一个 pip 命令？）更新 python 正在寻找它的代码

我可以`pip install -e`用来防止上述情况。但是，然后我需要将每个应用程序克隆到单独的文件夹中：我不能只将应用程序克隆到`project/apps`并拥有`project/apps/foo`，`project/apps/bar`因为它们都会尝试将它们的 setup.py 放入`project/apps`. 相反，我需要将 foo 克隆到`project/apps/foo`但实际代码在`project/apps/foo/foo`. 这让我觉得很丑，而且不是很 django-ish。

有没有其他更漂亮的方式来做我想做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T01:42:33.480

我认为你真正想要使用的是一个[需求文件](https://pip.pypa.io/en/stable/user_guide/#requirements-files)（而不是完全使用 git 子模块）加上你的项目的[virtualenv](http://www.virtualenv.org/en/latest/index.html)。

使用需求文件，您可以直接从给定分支或提交克隆 repos，例如：

*要求.txt：*

```
Django==1.4.1
South==0.7.6
git+git://github.com/fabric/fabric#egg=Fabric
git+git://github.com/toastdriven/django-tastypie.git@876c0541e2531d3b6e070ffab906f7c6e359c427#egg=django-tastypie 
```

然后就可以运行了`pip install -r requirements.txt`。

你会从tastepie示例中注意到，你可以将你的pip安装锁定到一个特定的提交（只要你留在你的virtualenv中就可以了），这基本上与子模块所做的事情相同，但不会弄乱你的git repo或文件当确实应该将它们安装到您无论如何采购的单独位置时，使用包构建结构。

# php - 使用 php 的 PDOStatement::execute/fetch/rowCount 测试数据库中值是否存在的问题？

> ID：12593358
> 
> 赞同：0
> 
> 时间：2012-09-26T01:32:12.613
> 
> 标签：php, mysql, validation, pdo

我的一门课有问题（我相信）。在高层次上，我将一个表单发送到一个启动一个类的 php 文件。通过访问几个 it 方法，它确定一个值是否在数据库中。如果是，则返回一个布尔值。

这是我认为是问题的代码：

```
public function territoryCheck($numberOut)

    {

        $this->numberOut = $numberOut;

        //Execute test

        $this->checkConnect();

        $stmt = $this->dbh->prepare("SELECT t_id FROM Territory WHERE t_id = :param1");

        $stmt->bindParam(':param1', $this->numberOut);

        $stmt->execute();   
        $count = $stmt->rowCount();

        //Determine value of test

        if($count == 0)

        {

            return FALSE;

        }   

    }

    public function publisherCheck($lName, $fName)

    {

        $this->lName = $lName;

        $this->fName = $fName;

        //Execute test

        $this->checkConnect();

        $stmt = $this->dbh->prepare("SELECT p_id FROM People WHERE lastName = :param1 AND firstName = :param2");

        $stmt->bindParam(':param1', $this->lName);

        $stmt->bindParam(':param2', $this->fName);

        $stmt->execute();
        $count = $stmt->rowCount();

        //Determine value of test

        if($count == FALSE)

        {

            return FALSE;

        }

        else

        {

            $dummyvar = $stmt->fetch();

            $this->p_id = implode($dummyvar);

        }

    }

    public function isTerritoryOut($numberOut)

    {

        //Execute test

        $this->checkConnect();

        $this->numberOut = $numberOut;

        $stmt = $this->dbh->prepare("SELECT t_id FROM checkIn WHERE t_id = :param1");

        $stmt->bindParam(':param1', $this->numberOut);

        $stmt->execute();
        $count = $stmt->rowCount();

        //Determine value of test

        if($count != 0)

        {

            return TRUE;

        }   

    } 
```

共有三种方法，每种方法都是一个返回真或假的测试。我正在使用 execute()、fetch() 和最后的 rowCount() 进行测试，以尝试模拟我想要的值。两者似乎都不起作用。下面是调用这些方法的代码：

```
//Begin tests

    $checkOut->territoryCheck($numberOut);

    if($checkOut == FALSE)

    {

        $fail = "Territory number ".$numberOut." does not exist in our records. Please enter a valid territory. For more information, navigate to About.<\ br>";

    }

    $checkOut->publisherCheck($lName, $fName);

    if($checkOut == FALSE)

    {

        if($fail !== "")

            $fail .= "The publisher, ".$fName." ".$lName.", is not in our records. For more information, navigate to About.<\ br>";

        else

            $fail = "The publisher, ".$fName." ".$lName.", is not in our records. For more information, navigate to About.<\ br>";

    }

    $checkOut->isTerritoryOut($numberOut);

    if($checkOut === TRUE)

    {

        if($fail !== "")

            $fail .= "Territory number ".$numberOut." is currently checked out. Either the wrong number was entered or the territory hasn't been properly checked in.<\ br>";

        else

            $fail = "Territory number ".$numberOut." is currently checked out. Either the wrong number was entered or the territory hasn't been properly checked in.<\ br>";

    } 
```

为清楚起见，在代码的前面将失败设置为“”。发生的情况是，当我故意创造本应失败的情况时，它会通过所有这些测试，就好像它们已经通过了一样。例如，我的数据库中只有区域编号 1-130。如果我输入 150，它基本上告诉我它存在。

我不确定发生了什么，类型转换？== 与 ===? 等。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:08:57.603

我必须承认，原因是一个相当明显的问题，我什至没有考虑它。在每个测试中，我只是简单地调用该方法而不分配任何变量来接受返回值（即，`$checkOut->publisherCheck();`而不是`$test = $checkOut->publisherCheck();`. 无论如何，它现在可以工作了。

# java - Java：在处理方法之前抛出 EmptyQueueException

> ID：12593359
> 
> 赞同：0
> 
> 时间：2012-09-26T01:32:27.073
> 
> 标签：java, arrays, algorithm, data-structures, queue

我正在将证券交易所计划作为一个项目进行工作，到目前为止，我已经完成了大约 98% 的工作，我遇到的唯一问题是当我试图出售比当前持有量更多的股票时。例如，我在第 1 天以每股 30 美元的价格购买 20 股，在第 2 天以每股 20 美元的价格购买 40 股。然后我输入说我想以每股 20 美元的价格出售 30 股。代码应该做的是从第一天开始出售所有股票，然后从第 2 天开始出售 10 股。但是，我得到的是抛出 EmptyQueueException。我觉得我的 sellShares 方法在进入带有 while 循环的最终 else 语句时可能会出错。但是，我无法解决可能的错误。我已经盯着代码看了很长一段时间，但我似乎无法找到解决方案。对此提供一些帮助将不胜感激。以下代码来自我的主类和 CircleArrayQueue 类：

```
import java.util.Scanner;
import java.lang.Integer;

public class StockTran {
String command = "";
int gain = 0;
int totalPrice = 0;         // totalPrice variable will keep of gain or loss of shares being sold
int shareTracker = 0;       // shareTracker variable will keep track of shares being bought and sold
String[] stockParts = null;
CircleArrayQueue Q;
boolean quit = false;

public StockTran(String inputCommand) {
    try {
        Q = new CircleArrayQueue(32);
        Scanner conReader = new Scanner(System.in);
        this.command = inputCommand.toLowerCase();
        this.stockParts = command.split("\\s"); // splits the input into three parts

        while (quit == false) {     // will loop until user says "q" to quit program
            if (this.stockParts[0].equals("q")) {       // ends transaction and terminates program
                System.out.println("Share trading successfully terminated.");
                quit = true;
                System.exit(0);     // exits the program
            }

            if (this.stockParts == null || this.stockParts.length > 3) {
                System.out.println("That is an invalid input. Please try again.");
            }

            if (stockParts[0].equals("b")) {        // checks to see if it is a buying of shares
                int shares = Integer.parseInt(stockParts[1]);       // stores share amount
                int value = Integer.parseInt(stockParts[2]);        // stores selling value
                buyShares(shares, value);       // calls buyShares method and adds share to queue
            }
            else if (stockParts[0].equals("s")) {       // checks to see if it is a selling of shares
                int shares = Integer.parseInt(stockParts[1]);
                int value = Integer.parseInt(stockParts[2]);
                sellShares(shares, value);      // calls sellShares method
            }
            else if (stockParts[0].equals("c")) {       // checks to see if it is capital gain
                gain = capitalGain();       // calls capitalGain and calculates net gain
                System.out.println("Capital gain is " + gain);
            }
            else {
                System.out.println("That is an invalid input. Please try again.");      // any other input is invalid
            }

            System.out.println("Enter your next command, or press 'q' to quit: ");
            command = conReader.nextLine().toLowerCase();
            stockParts = command.split("\\s");
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public void buyShares(int shareAmount, int sharePrice) {        // takes in share total and values for each share
    shareTracker = shareTracker + shareAmount;  // adds to amount of shares bought
    Node temp = new Node(shareAmount, sharePrice);      // stores values into node
    try {
        Q.enqueue(temp);        // enqueues the node into the CircularQueue
    } catch (FullQueueException e) {
        e.printStackTrace();
    }
}

public void sellShares(int shareAmount, int sharePrice) throws Exception {
    Node temp = new Node();     // stores values into node
    int tempShare = 0;
    try {
            temp = Q.front();       // gets the first node from CircleArrayQueue and stores it in temporary node
            int share = temp.getShare();
            int price = temp.getPrice();
            System.out.println(Q.size());

            if (shareAmount > shareTracker) {       // throws exception if trying to sell more shares than purchased
                throw new Exception ("You don't have that many shares to sell.");
            }
            else if (share > shareAmount) {     // checks to see if first node has a larger share amount or less
                temp.setShare(share - shareAmount);     // will decrease amount sold from the first days share
                shareTracker = shareTracker - shareAmount;
                totalPrice = shareAmount * (sharePrice - price) + totalPrice;       // calculates total profit or loss
            }
            else if (share == shareAmount) {
                Q.dequeue();
                shareTracker = shareTracker - shareAmount;          // updates shareTracker to show how many shares are remaining
                totalPrice = shareAmount * (sharePrice - price) + totalPrice;
            }
            else {
                while (shareAmount != tempShare) {      // will loop until it sells total share amount user wanted
                    Node temp2 = Q.dequeue();           // removes another node from CircleArrayQueue
                    int newShare = temp2.getShare();
                    int newPrice = temp2.getPrice();
                    tempShare = tempShare + newShare;   // adds the shares together to check if while loop condition still holds
                    totalPrice = shareAmount * (sharePrice - newPrice) + totalPrice;
                    sellShares(shareAmount - tempShare, sharePrice);        // recursively calls sellShares on new amount of shares
                }
            }
    } catch (EmptyQueueException e) {
        e.printStackTrace();
    }
}

public int capitalGain() {      // returns the total net gain or loss in share trading
    return totalPrice;
}

public static void main(String[] args) {
    String inputCommand = "";
    Scanner mainReader = new Scanner(System.in);

    System.out.println("Enter 'b' to purchase share, 's' to sell share, 'c' for capital gain, or 'q' to quit: ");
    inputCommand = mainReader.nextLine();

    StockTran tran = new StockTran(inputCommand);
}
}

public class CircleArrayQueue implements Queue {
    protected Node Q[];     // initializes an empty array for any element type
    private int MAX_CAP = 0;        // initializes the value for the maximum   array capacity
private int f, r;

public CircleArrayQueue(int maxCap) {
    MAX_CAP = maxCap;
    Q = new Node[MAX_CAP];  // sets Q to be a specific maximum size specified
    f = 0;      // sets front value to be 0
    r = 0;      // sets rear value to be 0;
}

public int size() {
    return (MAX_CAP - f + r) % MAX_CAP;     // returns the size of the CircularArrayQueue
}

public boolean isEmpty() {      // if front and rear are of equal value, Queue is empty
    return f == r;
}

public Node front() throws EmptyQueueException {        // method to get the front value of the CircularArrayQueue
    if (isEmpty()) throw new EmptyQueueException("Queue is empty.");
        return Q[f];        // returns object at front of CircularArrayQueue
}

public Node dequeue() throws EmptyQueueException {  // method to remove from the front of the CircularArrayQueue
    if (isEmpty()) throw new EmptyQueueException("Queue is empty.");
        Node temp = Q[f];       // stores front object in local variable
        Q[f] = null;        // sets the value to be null in the array
        f = (f + 1) % MAX_CAP;      // sets the new front value to be this
        return temp;        // returns the object that was originally in the front
}

public void enqueue(Node element) throws FullQueueException {       // method to add to the end of the CircualarArrayQueue
    if (size() == MAX_CAP - 1) throw new FullQueueException("Queue has reached maximum capacity.");
        Q[r] = element;     // stores the new element at the rear of array
        r = (r + 1) % MAX_CAP;      // sets the new rear value to be the location after element insertion
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:12:22.560

您的 sellShares 例程调用 front() 而不检查队列中是否有任何内容。如果队列是空的（），你会得到你的异常。

# php - 如何让 gettext 和 poedit 与 WAMP 一起使用？

> ID：12593365
> 
> 赞同：0
> 
> 时间：2012-09-26T01:33:37.560
> 
> 标签：php, windows-7, wamp, gettext

我正在尝试让 gettext 和 poedit 在 Windows 上工作。这是我的测试代码：

```
<?php
require_once("localization.php");
echo _("Hello World!");
?>` 
```

和

```
<?php
$locale = "de_DE";
if (isSet($_GET["locale"])) $locale = $_GET["locale"];
putenv("LC_ALL=$locale");
setlocale(LC_ALL, $locale);
bindtextdomain("messages", "./locale");
textdomain("messages");
?> 
```

我正在使用本教程：[链接](http://mel.melaxis.com/devblog/2005/08/06/localizing-php-web-sites-using-gettext/)。我通过 WAMP 启用了 gettext 扩展。不幸的是，当我导航到该页面时，它显示“Hello World！” 而不是预期的“你好沃尔特！”

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:40:02.223

在 ubuntu 上，我必须`sudo apt-get install gettext`然后`sudo locale-gen de_DE`才能让它工作。我还没有找到Windows的修复=（

# python - 如果不是 x % y：做点什么

> ID：12593366
> 
> 赞同：2
> 
> 时间：2012-09-26T01:33:40.563
> 
> 标签：python, modulo

我对 Python 中的以下语句有疑问

```
if not x % y: 
    # do something 
```

在一段代码中看到这一点并进行实验后，我发现如果模计算结果为零以外的任何值，它将跳过“做某事”代码。

我的问题是，是否有关于带有隐含条件的 If 和 If not 语句的一般规则，并且对于这样的 Python“技巧”有什么好的参考吗？

我为这个广泛的问题道歉，但是当我第一次看到它时，这让我陷入了困境。我想尽可能多地学习这些短手技巧！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T01:36:55.420

*   `None`是假的。
*   不为零的数字被认为是真实的；`0`是假的
*   任何内容的字符串都是真实的；`""`是假的
*   里面有任何东西的容器都是真的；`[]`, `()`, 和`{}`（以及其他空容器）是错误的

这可以通过定义`__len__()`或`__nonzero__()`（后者`__bool__()`在 Python 3 中命名）来覆盖您自己的类型。例如，您甚至可以定义一个评估为真的零：

```
class trueint(int):
    def __nonzero__(self):
        return True
    __bool__ = __nonzero__    # Python 3

truezero = trueint(0)

if truezero:
    print("yep, this zero is true!") 
```

您可能*不应该这样*做，因为它会使 Python 程序员感到困惑，但您*可以。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T01:38:08.180

Python 中没有“隐含条件”之类的东西。有真值，也有假值。

这些是错误的：

*   `None`
*   0（或任何等于它的数字）
*   空序列 ( `''`, `u''`, `b''`, `[]`, `()`)、映射 ( `{}`) 或集合 ( `{,}`)
*   从其`__nonzero__()`方法返回 false 的对象

除非另有证明，否则其他任何事情都应该被认为是真实的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T01:42:46.333

这种行为在 Python 中称为 Truthiness：[http ://www.udacity.com/wiki/CS258%20Truthiness%20in%20Python](http://www.udacity.com/wiki/CS258%20Truthiness%20in%20Python)

# asp.net - IIS 上的 URL 重定向

> ID：12593369
> 
> 赞同：1
> 
> 时间：2012-09-26T01:33:57.483
> 
> 标签：asp.net, iis-7, url-rewriting

我在我的网站上添加了一个新网页。例如，如果用户请求该页面，我需要将请求旧页面的用户重定向到新添加的页面

```
http://www.mysite.com/foo.aspx

user should be redirected to

http://www.mysite.com/bar/default.aspx 
```

我如何使用 IIS 7 来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:42:34.243

在 web.config 中添加 url 映射

在我的网站上：

```
<urlMappings enabled="true"> 
<add url="~/RSS" mappedUrl="~/rss.axd"/> 
</urlMappings> 
```

将请求重定向`http://mydomain/RSS`到`http://mydomain/rss.axd`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T03:19:53.330

你当然可以，这里是 microsoft 关于如何设置它的相关文档

[http://technet.microsoft.com/en-us/library/cc732969(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc732969(v=ws.10).aspx)

# extjs4 - 您将如何从 EXTJS 4 中的表单向数据存储添加数据？

> ID：12593372
> 
> 赞同：-1
> 
> 时间：2012-09-26T01:34:24.653
> 
> 标签：extjs4, datastore

有没有办法从基于文本字段的表单将数据添加到数据存储中？

例如：

```
 Name:______
    Team:______
    Number:_____
    Age:_______ 
```

何时提交注入数据存储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:29:16.083

您可以使用 form.updateRecord()，然后使用 store.add(record)。

但是您真正应该做的是查看 ExtJS 附带的示例。关于如何做你需要做的大部分事情，有很多很棒的想法。

# c# - 如何使用 HtmlAgilityPack 从 Html 片段中提取 Html 元素？

> ID：12593373
> 
> 赞同：0
> 
> 时间：2012-09-26T01:34:24.520
> 
> 标签：c#, html, code-snippets

这是HTML代码：

```
<table style="border:1px solid #000">
  <tr style="background:#ddd;">
    <td width="150">TableEle1</td>
    <td width="150">TableEle2</td>
    <td width="150">TableEle3</td>
    <td width="150">TableEle4</td>
    <td width="150">TableEle5</td>
    <td width="150">TableEle6</td>
    <td width="150">TableEle7</td>
    <td width="150">TableEle8</td>
  </tr> 
```

这是我用来提取表格元素 1 的代码（但不成功）

```
htmlHelper.SetNode(@"//td/text()='TableEle1'"); 
```

对我有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T02:11:26.657

您可以混合使用 HtmlAgilityPack 和 Linq 来获得所需的 td 节点。

```
HtmlDocument document = new HtmlDocument();            
document.LoadHtml("[your HTML string]");            
var node = document.DocumentNode.SelectNodes("//td/text()");
var tdNode = node.Where(s => s.InnerText == "TableEle1").Select(s => s); 
```

希望这可以帮助！

# php - 访问被拒绝 403 重定向

> ID：12593378
> 
> 赞同：0
> 
> 时间：2012-09-26T01:34:51.083
> 
> 标签：php, .htaccess, yii, http-status-code-403

我有一个图像文件夹，其中包含 webroot 中的所有用户个人资料图片。
现在我想用一个 htaccess 文件和选项索引来保护它。
它工作正常，但我希望 yii 将用户重定向到我的特殊禁止视图，而不是显示这个丑陋的 403 访问被拒绝的 apache 站点。

我`actionError`在站点控制器的 () 中尝试了以下代码，但不起作用。

```
 if (Yii::app()->errorHandler->error['code'] == 403)
        $this->redirect(Yii::app()->homeUrl); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:52:20.510

假设图片是以[http://www.mydomain.com/pics/mypic.jpg](http://www.mydomain.com/pics/mypic.jpg)之类的模式请求的， yii 没有被调用，因此您无法使用 yii 框架实现重定向。

正如@SuVeRa 在他的评论中建议的那样，您最好使用 .htaccess 进行重定向，例如

```
ErrorDocument 403 /dir/file.html 
```

# javascript - 输入焦点时的jQuery fadeIn div？

> ID：12593381
> 
> 赞同：1
> 
> 时间：2012-09-26T01:35:44.517
> 
> 标签：javascript, jquery, html, css

我正在尝试更改 div 的 innerHTML 并在我的表单中的输入成为焦点时将其淡入。我还想测试它是否完全淡入，因为当页面加载时它会开始淡出。

总而言之，我基本上想在另一个 div 中显示一个工具提示，并在我的输入聚焦于我的表单时切换工具提示淡入和淡出。

这是我到目前为止所拥有的：

```
<script type="text/javascript">
var visible = 0;
var nameText = "<p>May I get your<br/>full name?</p>";
var emailText = "<p>Could I please<br/>get your email<br/>address?</p>";
var messageText = "<p>What is the<br/>message you<br/>would like to send?</p>";

$('.inp').on("focus", function(event){
    if (visible == 0)
    {
        var fadeTime = 1;
        visible = 1;
    }
    else
        fadeTime = 500;

    $('bubble').fadeOut(fadeTime).html(function() {
        if ($this.attr('id') == "name")
            return nameText;
        else if ($this.attr('id') == "email")
            return emailText;
        else if ($this.attr('id') == "message")
            return messageText;
    }).fadeIn(500);

});
</script> 
```

我没有收到任何 JavaScript 错误。我的气泡和输入的 HTML 如下所示：

```
<footer class="container">
<div class="row reveal">
    <div class="mailman fourcol">
        <img src="images/mailman.png" alt="The Mail Man" />
        <div id="bubble">
        </div>
    </div>
    <div class="contact eightcol last">

        <h1>CONTACT US FOR</h1> <h1>MORE INFORMATION</h1>
        <div class="clear"></div>
        <form name="contact-form">

            <div class="form-left">

                <div class="contact-name inp">
                    <input type="text" name="name" id="name" value="Name" />
                </div>

                <div class="contact-email inp">
                    <input type="text" name="email" id="email" value="Email" />
                </div>

                <div class="clear"></div>

                <div class="contact-message inp">
                    <input type="text" name="message" id="message" value="Message" />
                </div>

            </div>

            <div class="contact-submit">
                <a href=""></a>
            </div>

        </form>

    </div>
</div>
</footer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:50:49.500

我给你做了一些修复。***[检查演示。](http://jsfiddle.net/RMaat/)***

主要问题是：

1.  焦点事件应该在输入元素上触发，`$('.inp').on("focus", function(event){`应该是`$('.inp').on("focus", 'input', function(event){`

2.  `$this.attr(id)`，你错过了`var $this = $(this);`外面，或者只是使用`var id = this.id;`.

3.  `$('bubble')`应该`$(#bubble)`

# symfony - 我正在尝试对 Silex 应用程序进行单元测试，但找不到 Silex\WebTestCase 命名空间

> ID：12593386
> 
> 赞同：4
> 
> 时间：2012-09-26T01:36:11.180
> 
> 标签：symfony, phpunit, silex

我安装了 phpunit 3.6.12 和 Silex。在我的应用程序的根目录中，我有测试目录，其中包含简单的测试文件 BlogFunctionTest.php

```
<?

use Silex\WebTestCase;

// BLOG: Front end test
class BlogFunctionalTest extends Silex\WebTestCase
{
    public function testIndex()
    {
        $this->assertGreaterThan(0, 1);
    }
}

?> 
```

当我从命令行运行 phpunit 时出现错误

```
PHP Fatal error:  Class 'Silex\WebTestCase' not found in {path}/BlogFunctionTest.php line 7 
```

这是指我尝试扩展 WebTestCase 的行。如果我更换也会发生同样的情况

```
use Silex\WebTestCase; 
```

和

```
use Symfony\Bundle\FrameworkBundle\Test\WebTestCase; 
```

Silex 相对于我的测试文件安装在

```
../vendor/silex/ 
```

非常感谢任何提示，谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T02:53:26.650

你必须在 phpunit.xml.dist 中定义一个引导程序，它指向你的 silex 应用程序的引导程序，就像它在这里完成的那样[https://github.com/joshuamorse/Silex-Boilerplate/blob/master/phpunit.xml.dist](https://github.com/joshuamorse/Silex-Boilerplate/blob/master/phpunit.xml.dist)

# tcl - proc 关键字的 Tcl 重命名在 Tcl C 库的命名空间中不起作用

> ID：12593389
> 
> 赞同：0
> 
> 时间：2012-09-26T01:36:48.197
> 
> 标签：tcl

我有以下程序：

```
rename proc _proc
_proc proc {name args body} {
    global pass_log_trace

    set g_log_trace "0"
    if {[info exists pass_log_trace]} {
        set g_log_trace $pass_log_trace
    }

    # simple check if we have double declaration of the same procedure
    if {[info procs $name] != ""} {
        puts "\nERROR: redeclaration of procedure: $name"
    }

    _proc $name $args $body

    if {$g_log_trace != 0} {
        trace add execution $name enter trace_report_enter
        trace add execution $name leave trace_report_leave
    }
} 
```

它是从使用 Tcl 解释器[C 库](http://tmml.sourceforge.net/doc/tcl/index.html)构建的 C shell 调用的。shell的代码如下：

```
#define _GNU_SOURCE

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <getopt.h>
#include <signal.h>
#include <errno.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <tcl.h>

#include <readline/readline.h>
#include <readline/history.h>

/* Global variables */

static char init_file[256];
static char history_file[256];
static pid_t sfg_pid;
static Tcl_Interp *tcl_interp = NULL;

static int help(char *prog);

/**
 * Print the application help.
 * @param prog
 * @return
 */
static int
help(char *prog)
{
    printf("Usage: %s [OPTIONS]\n", prog);
    printf("\n");
    printf("  -h|-?                   Print this message and exit.\n");
    printf("  --init/-i file          Source this file when tcl is started.\n");
    printf("  --history/-f file       Read/Save history using this existing file.\n");
    printf("  --log/-l file           Save the Tcl log to the specified file.\n");
    printf("\n");

    exit(EXIT_SUCCESS);
}

int
main(int argc, char ** argv)
{
    const int buf_size = 1024;
    const useconds_t sfg_init_tmo_usec = 100000;
    char buf[buf_size+1];
    int  rc;
    char *inp = NULL;
    char pwd[buf_size+1];
    int  hfile;
    char *prompt = NULL;

    int c;
    int option_index = 0;
    struct option long_options[] = {
        /*name            arg     flag    val */
        {"help",          0,      0,      'h'},
        {"init",          1,      0,      'i'},
        {"log",           1,      0,      'l'},
        {"configuration", 1,      0,      'c'},
        {0,               0,      0,      0}
    };

    /* default values */
    strcpy(init_file, "log_init.tcl");
    sfg_pid = 0;

    /**
     * Options processing...
     */

    while ((c = getopt_long (argc, argv, "?hi:f:s:t:p:b:l:c:er",
                             long_options, &option_index)) != -1) {
        switch (c) {
        case 'h':
        case '?':
            help(argv[0]);
            break;

        case 'i':
            strncpy(init_file, optarg, sizeof(init_file)-1);
            break;

        default:
            printf ("?? getopt returned character code %c ??\n", c);
        }
    }

    if (optind < argc) {
        printf ("non-option ARGV-elements: ");
        while (optind < argc)
            printf ("%s ", argv[optind++]);
        printf ("\n");
        exit(EXIT_FAILURE);
    }

    /**
     * Start and configure tcl interpreter
     */
    if ((tcl_interp = Tcl_CreateInterp()) == NULL) {
        printf("Could not create Tcl interpreter: %s\n", Tcl_ErrnoMsg(Tcl_GetErrno()));
        exit(EXIT_FAILURE);
    }

    /* allocate a prompt string, default to diag_tcl> , link to TCL variable */
    if ((prompt = Tcl_Alloc(256)) == NULL) {
        printf("Cannot allocate a prompt variable: %s\n", tcl_interp->result);
        exit(EXIT_FAILURE);
    }
    strncpy(prompt, "diag_tcl> ", 256);
    if (Tcl_LinkVar(tcl_interp, "g_shell_prompt", (char *)&prompt, TCL_LINK_STRING) != TCL_OK) {
        printf("Unable to link to a prompt global variable: %s\n", tcl_interp->result);
    }

    /* Source an init file if specified */
    if (init_file[0]) {
        strcpy(buf, "source ");
        strncat(buf, init_file, (buf_size - strlen(buf)));
        if ((rc = Tcl_Eval(tcl_interp, buf)) != TCL_OK) {
            printf("Tcl Interpreter Error: %s\n", tcl_interp->result);
        }
    }

    /**
     * Main single command loop
     */
    while (1) {
        if (inp) {
            free(inp);
            inp = NULL;
        }

        inp = readline(prompt);
        if (inp == NULL)
            break;

        if (*inp == '\n' || *inp == '\r' || *inp == 0) {
            continue;
        }
        if (feof(stdin))
            break;

        if ((rc = Tcl_Eval(tcl_interp, inp)) != TCL_OK) {
            printf("Tcl Interpreter Error: %s\n",
                    Tcl_GetVar(tcl_interp, "errorInfo", TCL_GLOBAL_ONLY));
        }
    }

    return 0;
} 
```

生成文件：

```
INC=-I/net/tools/include
LIB=-L/net/tools/lib -L/lib32 -L/usr/lib -m32
BIN=diag.lin

GCC                 = gcc

all: diag_tclsh

diag_tclsh: diag_tclsh.c
    $(GCC) $^ $(INC) $(LIB) -ltcl8.4 -lreadline -lncurses -ltermcap -o $@

install:
    cp -f strad /net/tools/bin/$(BIN)

clean:
    -rm -f diag_tclsh 
```

此过程的目的主要是为代码中的所有过程添加入口和出口点跟踪器。但是，由于某种原因，它也删除了命名空间范围。例如，这样的代码：

```
namespace eval bob {
    namespace eval joe {
        proc proc1 {} {}
    }
    proc proc2 {} {
        puts "proc2"
    }
}

puts "Namespace calling [info procs ::bob\::*]" 
```

不会在`bob`命名空间中创建过程，而是在全局命名空间中。调用`namespace current`总是返回`::`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:58:01.897

问题是标准`proc`创建相对于当前名称空间的命令（当然，除非您使用绝对名称），而您的替换推送具有全局名称空间 ( `::`) 作为其当前 NS 的堆栈框架。这意味着当您调用 时`_proc`，您使用的是错误的命名空间。

修复方法是用于在`uplevel 1`调用`_proc`者的上下文中调用，*或者*在必要时使用调用者的命名空间（可通过 发现`uplevel 1 namespace current`）限定名称。在您的情况下，您最好使用第二种技术，因为您还需要将名称用于其他目的（进行存在检查，添加执行跟踪）：

```
rename proc _proc
_proc proc {name args body} {
    global pass_log_trace

    set g_log_trace "0"
    if {[info exists pass_log_trace]} {
        set g_log_trace $pass_log_trace
    }

    ######## ADDED CODE STARTS ########
    # Qualify the name if necessary:
    if {![string match "::*" $name]} {
        set name [uplevel 1 namespace current]::$name
    }
    ######## ADDED CODE ENDS ########

    # simple check if we have double declaration of the same procedure
    if {[info procs $name] != ""} {
        puts "\nERROR: redeclaration of procedure: $name"
    }

    _proc $name $args $body

    if {$g_log_trace != 0} {
        trace add execution $name enter trace_report_enter
        trace add execution $name leave trace_report_leave
    }
} 
```

# c++ - 您何时以及为什么要在代码中使用位域？

> ID：12593396
> 
> 赞同：2
> 
> 时间：2012-09-26T01:37:37.917
> 
> 标签：c++, c, bit-manipulation, bit-fields

> **可能重复：**
> [什么时候值得使用位域？](https://stackoverflow.com/questions/4240974/when-is-it-worthwhile-to-use-bit-fields)

我最近在查找按位运算符并偶然发现了[bitfield](http://en.wikipedia.org/wiki/Bit_field)的概念。这看起来很有趣并且是一个非常酷的概念，但是人们何时和/或为什么会在他们的代码中使用它？

我知道它在嵌入式系统编程中使用了很多，但是为什么（我似乎找不到任何关于它为什么有用的信息）？它有什么优点吗？位域在哪些其他地方有用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T02:49:05.350

通常，当您不关心速度并且不关心内存布局时，请使用位域。如果您关心这些事情，请不要使用位域。

如果您有一组布尔标志，那么您可以使用位域打包它们（减少存储所需的大小）。但是，只能使用位域来访问位域。

这是经典的尺寸与速度问题。

另外需要注意的是，如果您有一组比本机字小的位域，那么您的编译器可能会尝试填充和对齐位域结构。因此，您最终必须 #pragma 打包结构或至少使用本地词。因此，如果您在 32 位机器上，并且碰巧有 32 个仅在内部使用的布尔标志，那么这将是位域的一个很好的用途。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T01:42:23.200

立即想到的一些用途是：

*   实施通信协议；
*   将用户数据存储在空间有限的对象中；
*   扩展现有协议中的数据结构（类似于上述）；
*   在一次操作中执行多项测试；

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T01:58:51.807

我使用位域作为联合的一部分来包含嵌入式系统中的寄存器，即微控制器、编解码器的控制寄存器。它们在将寄存器的物理布局描述为软件结构从而传达可读性方面非常有用。它们通常用于设备驱动程序的实现。几年前，带有很少闪存和 RAM 存储器的 8 位微控制器很常见，因此位域很常见。如今，具有大量 ram/flash 的 32 位微控制器意味着不需要位域。

# javascript - jQuery更好的方式在多个元素上调用函数？

> ID：12593402
> 
> 赞同：1
> 
> 时间：2012-09-26T01:38:30.823
> 
> 标签：javascript, jquery, function, call

我想知道是否有更好的方法来处理多个函数调用。基本上我有一个函数，它接收和元素作为参数之一，以及一些属性。我必须在几个元素上调用这个函数......

```
function positionMe(element,position){ ... }

positionMe(obj1,top);
positionMe(obj2,left);
positionMe(obj3,bottom);
positionMe(obj4,right);
positionMe(obj5,bottom); 
```

只看代码似乎我做错了什么。起初我以为我可以传入一组元素，但它似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T01:55:29.347

使用您提供的信息，我将创建一个包含所有需要信息的数组，并在您的函数中循环遍历它：

```
function positionMe(elements)
{
    for(var i = 0, numberOfElements = elements.length; i < numberOfElements ; i++) {
        // Do stuff with the objects you want to do in here

        // access the current object
        console.log(elements[i].object);

        // access the current direction
        console.log(elements[i].direction);
    }
}

var yourObjects = [
    {
        object: obj1,
        direction: 'top'
    },
    {
        object: obj2,
        direction: 'left'
    },
    {
        object: obj3,
        direction: 'bottom'
    },
    // etc
];
positionMe(yourObjects); 
```

**更新**

正如[反射评论](https://stackoverflow.com/questions/12593402/jquery-better-way-to-call-function-on-multiple-elements/12593521#comment16972852_12593521)：

> 更好地使用 for (var i in element) { console.log(elements[i].object);}

javascript 中的数组不是这种情况。好吧，这不是那么简单。因为您最终还将循环遍历数组对象的所有继承内容，例如`pop()`等`push()`。有一种方法可以通过[使用`hasOwnProperty()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty).

另一种方法[`forEach()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)是使用从 JavaScript 1.6 开始可用的方法。所以我认为并不是所有的用户代理都已经内置了对此的支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T02:00:01.027

```
<script src="http://code.jquery.com/jquery-latest.js"></script>

<script>

var objArray = [
 ["obj1","top"],
 ["obj2","bottom"],
 ["obj3","middle"]
];

$.each(objArray, function(i, v) {positionMe(v[0], v[1]);});

function positionMe(element, val) {
   alert (element+":"+val);
}

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T01:56:56.280

如果您的对象是页面上的元素，您可以使用 jQuery 的 $.each() 函数在每个事件上运行该函数。语法将像这样工作：

```
$('selector that grabs all objects').each(positionMe($(this), position)); 
```

# javascript - getUserMedia() 音频 - 发布到网络服务器？

> ID：12593404
> 
> 赞同：1
> 
> 时间：2012-09-26T01:38:32.940
> 
> 标签：javascript, html, microphone

您可以在使用 getUserMedia() 捕获麦克风音频后将数据发布到 URL/网络服务器吗？我已经看到了如何使用 GuM 的示例，但它们总是引用“流”并且从不使用它做任何事情；我想知道在录制停止后是否可以将该音频数据发布到网络服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:37:10.430

看看这篇文章：[http ://www.smartjava.org/content/record-audio-using-webrtc-chrome-and-speech-recognition-websockets](http://www.smartjava.org/content/record-audio-using-webrtc-chrome-and-speech-recognition-websockets)

# ruby-on-rails - Elasticsearch 需要映射*所有*关联？

> ID：12593405
> 
> 赞同：0
> 
> 时间：2012-09-26T01:38:37.383
> 
> 标签：ruby-on-rails, ruby, lucene, elasticsearch, tire

我有一个大型模型（它基本上是我的整个应用程序）。我在这个模型上有 7 个或更多关联，包括多对多、:through => 等。这个模型还有一些简单的属性（标题、url 等）。

我唯一关心的索引是那些 3 或 4 个简单属性（标题、网址、描述、类别）。其他的我不关心。

当我使用 时，一切正常`load: true`，但一旦我关闭它，一切都会中断。解决这个问题的唯一方法似乎是为每个关联添加复杂的映射、:touch、:touch 回调等等？

我希望我理解错了，因为这将是大量代码，仅用于搜索 3 或 4 个简单属性。

我不知道我在说什么，但我是否可以搜索弹性搜索索引，但返回一个 ID 列表，然后以正常的 rails 方式循环遍历那些？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:43:16.787

我不知道轮胎在内部工作原理，但是据我从该`load`选项为true时从文档中了解到的，它会从数据库中加载每个记录。这就是为什么我不认为你想在生产中使用它。如果没有该选项，Tire 将从 elasticsearch 检索信息，因为您应该将要显示的大部分数据存储在 elasticsearch 中。可能您需要向 elasticsearch 添加更多存储信息。您可以配置要存储在映射中的字段，否则您始终在 elasticsearch 中拥有[源](http://www.elasticsearch.org/guide/reference/mapping/source-field.html)字段，这正是您索引的 JSON 文档。

你最后一个问题的答案是肯定的。您可以从 elasticsearch 中选择要返回的[字段，而不是返回整个](http://www.elasticsearch.org/guide/reference/api/search/fields.html)[源](http://www.elasticsearch.org/guide/reference/mapping/source-field.html)。在您的情况下，如果我理解正确，您将配置唯一的 id 字段。我不知道如何使用轮胎来做到这一点，但就弹性搜索请求而言，你可以在这样的网址中做到这一点：

```
curl localhost:9200/_search?fields=id -d '{
  "query" : {
    "match_all" : {}
  }
}' 
```

或直接在您的查询中，如下所示：

```
{
    "fields" : ["id"],
    "query" : {
        "match_all" : {}
    }
} 
```

# python - 如何使用 python 解析 json-object？

> ID：12593411
> 
> 赞同：10
> 
> 时间：2012-09-26T01:39:22.950
> 
> 标签：python, json

我正在尝试解析 json 对象并遇到问题。

```
import json

record= '{"shirt":{"red":{"quanitity":100},"blue":{"quantity":10}},"pants":{"black":{"quantity":50}}}'
inventory = json.loads(record)
#HELP NEEDED HERE
for item in inventory:
    print item 
```

我可以弄清楚如何获得这些值。我可以拿到钥匙。请帮忙。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T01:44:53.403

您不再拥有 JSON 对象，而是拥有 Python[**字典**](http://docs.python.org/tutorial/datastructures.html#dictionaries)。遍历字典会产生它的键。

```
>>> for k in {'foo': 42, 'bar': None}:
...   print k
... 
foo
bar 
```

如果您想访问这些值，则可以索引原始字典或使用其中一种返回不同内容的方法。

```
>>> for k in {'foo': 42, 'bar': None}.iteritems():
...   print k
... 
('foo', 42)
('bar', None) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-26T02:31:38.547

```
import json

record = '{"shirts":{"red":{"quantity":100},"blue":{"quantity":10}},"pants":{"black":{"quantity":50}}}'
inventory = json.loads(record)

for key, value in dict.items(inventory["shirts"]):
    print key, value

for key, value in dict.items(inventory["pants"]):
    print key, value 
```

# php - JSON 到谷歌图表

> ID：12593412
> 
> 赞同：0
> 
> 时间：2012-09-26T01:39:41.390
> 
> 标签：php, javascript, jquery, json, google-visualization

我正在尝试`google charts`使用`ajax`响应表单`PHP`文件进行构建。以下是`alert`我的输出`javascript`

```
{"cols":[{"id":"5","label":"LISTING","type":"number"}],"rows":[{"c":[{"v":"1"}]}]} 
```

当我使用以下代码构建图表时，我得到了错误`Data table is not defined.`

```
function drawBarChartAll(totalclientstatus) {
        alert(totalclientstatus);
        //eval ( 'var jsonobject = totalclientstatus;'); 
        //var json = google.visualization.DataTable.toJSON(totalclientstatus)
        var data = google.visualization.DataTable(totalclientstatus);

        var options = {
            'width':670,
            'height':310,

            hAxis: {title: 'Year',  titleTextStyle: {color: 'red'}}
            //chartArea:{left:20,top:20,width:"70%",height:"100%"}
        };

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.ColumnChart(document.getElementById('barchartall'));
        chart.draw(data, options);
    } 
```

我究竟做错了什么 ？我正在使用以下内容`php`来构建`JSON`

```
while ($row = mysqli_fetch_array($agent_result, MYSQL_ASSOC))
    {
        $columns = array();
        $reports['cols'][] = array(id => "{$row['statusid']}"
            , label => "{$row['status']}"
            , type => "number");
        $columns['c'][] = array(v => $row['total']);
        $reports['rows'][] = $columns;
    }
 return json_encode($reports); 
```

`ajax`回应是

```
{"totalclientstatus":"{\"cols\":[{\"id\":\"5\",\"label\":\"LISTING\",\"type\":\"number\"}],\"rows\":[{\"c\":[{\"v\":\"1\"}]}]}"} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T02:09:45.110

我猜你错过了“新”：

> var data = new google.visualization.DataTable( ...

# c# - c# 和 java 中的字节处理方式相同吗？

> ID：12593414
> 
> 赞同：0
> 
> 时间：2012-09-26T01:40:16.490
> 
> 标签：c#, java, byte

我正在将一个 java android 应用程序移动到 windows metro，这个应用程序大量使用 blob 和解码（blob 被编码以占用更少的数据库空间

复制整个解码代码后，结果略有不同。

有些部分会询问字节值是否低于 0，据我所知，c# 上的字节总是无符号的，所以我不明白为什么结果与 android 应用程序不同。

这是一个片段。

```
 for (int i = 0; i < length; i++) {
                s[six] = (byte) (blob[i] ^ pronpassword[ix]); //pronpass is a string password

            if (s[six] == 0) {
                s[six + 1] = (byte)'-';
                s[six] ^= 128;
                s[six] = (byte) PRON_MAP[(byte) s[six]];
                six++;
            } else {
                s[six] = (byte) PRON_MAP[(byte) s[six]];
            }
            six++;
            ix++;
            if (ix == plen)
                ix = 0;
        } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:45:18.363

In Java, `byte` is signed. There is actually no such thing as an unsigned byte in Java. It's equivalent to C#'s `sbyte`, so that's the type you should port it to.

# c# - LINQ 查询最近的记录

> ID：12593415
> 
> 赞同：1
> 
> 时间：2012-09-26T01:40:26.573
> 
> 标签：c#, linq

如何修改此查询以选择按标题排序的最近 5 条记录？

```
IEnumerable<Story> recentStories = 
            (from s in stories 
             orderby s.Date descending 
             select s).Take(5); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T01:42:08.223

```
IEnumerable<Story> recentStories = 
            (from s in stories 
             orderby s.Date descending 
             select s).Take(5).OrderBy(s => s.Title); 
```

# c# - 使用 SaveFileDialog 时出现异常

> ID：12593418
> 
> 赞同：0
> 
> 时间：2012-09-26T01:40:40.783
> 
> 标签：c#, winforms

尝试使用 SaveFileDialog 时出现以下异常：

```
System.Threading.ThreadStateException: Current thread must be set to single thread apartment (STA) mode before OLE calls can be made. Ensure that your Main function has STAThreadAttribute marked on it. This exception is only raised if a debugger is attached to the process 
```

这是我尝试过的代码：

```
 private void barButtonItem5_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            SaveFileDialog saveFileDialog1 = new SaveFileDialog { InitialDirectory = @"C:\", Title = "Save text Files", CheckFileExists = true, CheckPathExists = true, DefaultExt = "txt", Filter = "Text files (*.txt)|*.txt|All files (*.*)|*.*", FilterIndex = 2, RestoreDirectory = true };
            if (saveFileDialog1.ShowDialog() == DialogResult.OK)
            {
                String filePath = saveFileDialog1.FileName;
                gridView1.Export(DevExpress.XtraPrinting.ExportTarget.Text, filePath);
            } 

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T01:45:16.520

Add the STAThreadAttribute attribute on the Main method. This attribute is required if your program access OLE related functions, like Clipboard class does.

C#

```
[STAThread]
static void Main(string[] args)
{
} 
```

Visual Basic

```
<STAThread()> _
Shared Sub Main(args As String())

End Sub 
```

Mark the thread as a STA (single threaded apartment). Google should provide ample examples. If your code is in a method, you can use the STAThread attribute to mark the method as a STA. If you are creating a new thread from an anonymous delegate, you can use the SetApartmentState function to make the thread an STA. Note that setting the apartment state must be done before the thread is started, if you are using a thread.

[http://www.codeproject.com/Questions/44168/Thread-apartment-modes-and-the-OpenFileDialog](http://www.codeproject.com/Questions/44168/Thread-apartment-modes-and-the-OpenFileDialog)

# tsql - 记录集为空时更新 SQL 变量

> ID：12593420
> 
> 赞同：0
> 
> 时间：2012-09-26T01:40:47.193
> 
> 标签：tsql, sql-server-2005

我们在 SQL Server 2005 中有一个循环，它在一个表上循环获取每个项目的父项，直到它到达树的顶部：

```
DECLARE @T Table
(
  ItemID INT NOT NULL PRIMARY KEY,
  AncestorID INT NULL 
) 
```

其中有这样的数据：

```
ItemID | AncestorID
  1          2
  2          3
  3          4
  4          NULL 
```

我们有一个循环基本上可以做到这一点：

```
DECLARE @AncestorID INT
SELECT @AncestorID = 1
WHILE (@AncestorID IS NOT NULL)
BEGIN   
  --Do some work   
  SELECT @AncestorID = T.AncestorID   
  FROM @T t  
  WHERE T.ItemID = @AncestorID

  print @AncestorID
END 
```

（是的，我知道 SQL 是基于设置的，这是逐行处理的，“做一些工作”需要逐行完成是有原因的）。

这一直很好，直到今天我们最终陷入无限循环。原来原因是一些错误的数据：

```
ItemID | AncestorID
  1          2
  2          3

  4          NULL 
```

`ItemID`3被删除。循环现在永远不会结束，因为`AncestorID`is never `NULL`- 它保持在 3。

如果查询返回 0 行，是否有重写 select 语句以使`@AncestorID`null `SELECT`，或者我需要有一个单独的`SELECT`语句来计算记录和一些`IF ELSE`类型逻辑？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T03:02:27.837

> 如果 SELECT 查询返回 0 行，是否有重写 select 语句以使 @AncestorID 为空，

您可以在`T.AncestorID`.

```
SELECT @AncestorID = min(T.AncestorID)   
FROM @T t  
WHERE T.ItemID = @AncestorID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T02:32:26.003

您可以使用另一个变量，例如`@PreviousAncestorId`，保存以前的值并重置`@AncestorId`为`NULL`查询之前。

您可以`@@RowCount`在查询后检查是否找到了一行。

代码在处理数据中任意长度的循环时仍然存在问题，例如两个值相同的行。您需要跟踪访问的行以检测周期。一个简单的现实检查是计算循环的迭代次数并根据行数检查它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T04:37:28.177

用一个`Break`

例如

```
WHILE (@AncestorID IS NOT NULL)
BEGIN 

  SELECT T.AncestorID INTO #TEMP 
  FROM @T t WHERE T.ItemID = @AncestorID  

  IF((SELECT COUNT(*) FROM #TEMP) = 0) BREAK;

  SELECT @AncestorID=T.AncestorID   
  FROM #TEMP  t  

  print @AncestorID

  DROP TABLE #TEMP

END 
```

# python - SqlAlchemy 和 Flask，如何查询多对多关系

> ID：12593421
> 
> 赞同：34
> 
> 时间：2012-09-26T01:41:00.453
> 
> 标签：python, sql, sqlalchemy, many-to-many, flask

我需要帮助创建 SqlAlchemy 查询。

我正在做一个使用 SqlAlchemy 的 Flask 项目。我在我的 models.py 文件中创建了 3 个表：Restaurant、Dish 和 restaurant_dish。

```
restaurant_dish = db.Table('restaurant_dish',
    db.Column('dish_id', db.Integer, db.ForeignKey('dish.id')),
    db.Column('restaurant_id', db.Integer, db.ForeignKey('restaurant.id'))
)

class Restaurant(db.Model):
    id = db.Column(db.Integer, primary_key = True)
    name = db.Column(db.String(64), index = True)

    restaurant_dish = db.relationship('Dish', secondary=restaurant_dish,
        backref=db.backref('dishes', lazy='dynamic'))

class Dish(db.Model):
    id = db.Column(db.Integer, primary_key = True)
    name = db.Column(db.String(64), index = True)
    info = db.Column(db.String(256), index = True) 
```

我已将数据添加到 restaurant_dish 表，它应该可以正常工作。我需要帮助的地方是了解如何使用餐厅正确获取菜肴。原始 SQL 将是这样的：

```
SELECT dish_id FROM restaurant_dish WHERE restaurant_id == id 
```

我已经设法完成但没有工作：

```
x = Restaurant.query.filter_by(Restaurant.restaurant_dish.contains(name)).all() 
```

感谢您的帮助，我也很欣赏可以为我指明正确方向的教程（官方文档超出了我的想象）。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-09-26T03:37:48.283

关系的语义看起来不正确。我认为它应该是这样的：

```
class Restaurant(db.Model):
    ...

    dishes = db.relationship('Dish', secondary=restaurant_dish,
        backref=db.backref('restaurants')) 
```

然后，要检索餐厅的所有菜肴，您可以执行以下操作：

```
x = Dish.query.filter(Dish.restaurants.any(name=name)).all() 
```

这应该生成如下查询：

```
SELECT dish.*
FROM dish
WHERE
    EXISTS (
        SELECT 1
        FROM restaurant_dish
        WHERE
            dish.id = restaurant_dish.dish_id
            AND EXISTS (
                SELECT 1
                FROM restaurant
                WHERE
                    restaurant_dish.restaurant_id = restaurant.id
                    AND restaurant.name = :name
            )
    ) 
```

# osgi - 无法加载数据库提供程序连接器驱动程序

> ID：12593422
> 
> 赞同：0
> 
> 时间：2012-09-26T01:41:22.577
> 
> 标签：osgi, eclipselink, equinox

我已经安装了独立的 Equinox 并将其用作 eclipse 中的运行配置。项目使用 EclipseLink 作为 JPA，并配置为使用 derby 和 mysql 提供程序。这些提供程序打包成包并在 OSGi 容器中激活。当我从 Eclipse 运行项目并激活我的包时，JPA 工厂正常创建并且项目工作正常。

但！当我运行 Equinox 独立 eclipselink 无法加载数据库连接器驱动程序。所写的驱动程序被打包为捆绑包并激活。

我注意到，Eclipse 使用与我用于独立运行 Equinox 的相同配置和相同的捆绑包集。和 eclipse 用来运行的同一个包内部树。

据我了解，OSGi 容器中不需要 java 类路径 - 使用了捆绑包。它们被导入到我插件的 manifest.mf 中。

什么问题，看不懂。为什么应用程序找不到驱动程序类？

* * *

好的，我为 derby 驱动程序提供了完整的异常调用堆栈。看来EL功能正常。对于 mysql 驱动程序，问题是相同的，但调用堆栈有所不同。当我从 Eclipse 运行相同的程序时，它可以正常工作。

这是我的配置：

```
id      State       Bundle
0       ACTIVE      org.eclipse.osgi_3.8.100.v20120912-141032
                    Fragments=724, 726, 728
694     ACTIVE      org.eclipse.equinox.simpleconfigurator_1.0.400.v20120828-033
824
695     ACTIVE      com.ibm.icu.base_4.4.2.v20110831
696     ACTIVE      com.mysql.jdbc_5.8.0
697     ACTIVE      javax.el_2.2.0.v201108011116
698     ACTIVE      javax.persistence_2.0.4.v201112161009
699     ACTIVE      javax.servlet_3.0.0.v201112011016
700     ACTIVE      javax.servlet.jsp_2.2.0.v201112011158
702     ACTIVE      org.apache.felix.gogo.command_0.8.0.v201108120515
703     ACTIVE      org.apache.felix.gogo.runtime_0.8.0.v201108120515
704     ACTIVE      org.apache.felix.gogo.shell_0.8.0.v201110170705
705     ACTIVE      org.eclipse.core.commands_3.6.1.v20120521-2329
706     ACTIVE      org.eclipse.core.contenttype_3.4.200.v20120523-2004
707     ACTIVE      org.eclipse.core.databinding_1.4.1.v20120521-2329
708     ACTIVE      org.eclipse.core.databinding.observable_1.4.1.v20120521-2329
709     ACTIVE      org.eclipse.core.databinding.property_1.4.100.v20120523-1955
710     ACTIVE      org.eclipse.core.expressions_3.4.401.v20120627-124442
711     ACTIVE      org.eclipse.core.jobs_3.5.300.v20120622-204750
712     ACTIVE      org.eclipse.core.runtime_3.8.0.v20120521-2346
713     ACTIVE      org.eclipse.equinox.app_1.3.100.v20120522-1841
714     ACTIVE      org.eclipse.equinox.common_3.6.100.v20120522-1841
715     ACTIVE      org.eclipse.equinox.console_1.0.0.v20120522-1841
716     ACTIVE      org.eclipse.equinox.ds_1.4.0.v20120522-1841
717     ACTIVE      org.eclipse.equinox.frameworkadmin_2.0.100.v20120606-175127
718     ACTIVE      org.eclipse.equinox.frameworkadmin.equinox_1.0.400.v20120428-0117
719     ACTIVE      org.eclipse.equinox.http.jetty_3.0.0.v20120522-1841
720     ACTIVE      org.eclipse.equinox.http.registry_1.1.200.v20120912-125810
721     ACTIVE      org.eclipse.equinox.http.servlet_1.1.300.v20120912-125810
722     ACTIVE      org.eclipse.equinox.preferences_3.5.0.v20120918-182152
723     ACTIVE      org.eclipse.equinox.registry_3.5.300.v20120731-134527
724     RESOLVED    org.eclipse.equinox.servletbridge.extensionbundle_1.2.100.v20120522-2049
                    Master=0
725     ACTIVE      org.eclipse.equinox.simpleconfigurator.manipulator_2.0.0.v20110808-1657
726     RESOLVED    org.eclipse.equinox.transforms.hook_1.0.400.v20120522-2049
                    Master=0
727     ACTIVE      org.eclipse.equinox.util_1.0.400.v20120917-191249
728     RESOLVED    org.eclipse.equinox.weaving.hook_1.0.200.v20120524-1707
                    Master=0
729     ACTIVE      org.eclipse.help_3.6.0.v20120521-2344
730     ACTIVE      org.eclipse.jetty.continuation_8.1.3.v20120522
731     ACTIVE      org.eclipse.jetty.http_8.1.3.v20120522
732     ACTIVE      org.eclipse.jetty.io_8.1.3.v20120522
733     ACTIVE      org.eclipse.jetty.security_8.1.3.v20120522
734     ACTIVE      org.eclipse.jetty.server_8.1.3.v20120522
735     ACTIVE      org.eclipse.jetty.servlet_8.1.3.v20120522
736     ACTIVE      org.eclipse.jetty.util_8.1.3.v20120522
737     ACTIVE      org.eclipse.osgi.services_3.3.100.v20120522-1822
738     ACTIVE      org.eclipse.osgi.util_3.2.300.v20120912-140840
739     ACTIVE      org.eclipse.persistence.asm_3.3.1.v201206041142
740     ACTIVE      org.eclipse.persistence.core_2.4.0.v20120608-r11652
741     ACTIVE      org.eclipse.persistence.jpa_2.4.0.v20120608-r11652
742     ACTIVE      org.eclipse.persistence.jpa.osgi_2.4.0.v20120608-r11652
743     ACTIVE      org.eclipse.rap.jface_2.0.0.20120821-1934
744     ACTIVE      org.eclipse.rap.jface.databinding_2.0.0.20120821-1934
745     ACTIVE      org.eclipse.rap.rwt_2.0.0.20120821-1934
746     ACTIVE      org.eclipse.rap.rwt.osgi_2.0.0.20120821-1934
747     ACTIVE      org.eclipse.rap.ui_2.0.0.20120821-1934
748     ACTIVE      org.eclipse.rap.ui.workbench_1.5.100.20120821-1934
749     ACTIVE      ru.futurelink.testrap_1.0.0.qualifier
750     ACTIVE      org.apache.derby_1.0.0
osgi> 
```

这就是我运行项目的方式：

```
java -Declipse.ignoreApp=true -Dosgi.noShutdown=true -cp C:/Projects/ru.futurelink.testrap/lib/eclipselink.jar -cp C:/Projects/ru.futurelink.testrap/lib/javax.persistence_1.0.0.jar -cp C:/Projects/ru.futurelink.testrap/lib/derby.jar -cp C:/Projects/ru.futurelink.testrap/lib/mysql-connector-java-5.0.8-bin.jar -jar plugins\org.eclipse.osgi_3.8.100.v20120912-141032.jar  -dev file:C:/Equinox/plugins/configuration/dev.properties -os win32 -ws win32 -arch x86_64 -nl ru_RU -console -consoleLog 
```

那是调用堆栈：

```
[EL Info]: 2012-09-30 20:59:57.778--ServerSession(333070563)--EclipseLink, version: Eclipse Persistence Services - 2.4.0.v20120608-r11652
[EL Severe]: ejb: 2012-09-30 20:59:58.213--ServerSession(333070563)--java.lang.NullPointerException
2012-09-30 20:59:58.213:WARN:oejs.ServletHandler:ERROR:  /examples
java.lang.reflect.UndeclaredThrowableException
    at $Proxy0.createEntityManager(Unknown Source)
    at ru.futurelink.moneyorganizer.data.MODatabase.<init>(MODatabase.java:13)
    at ru.futurelink.moneyorganizer.ApplicationEntryPoint.createUI(ApplicationEntryPoint.java:22)
    at org.eclipse.rap.rwt.internal.lifecycle.RWTLifeCycle.createUI(RWTLifeCycle.java:177)
    at org.eclipse.rap.rwt.internal.lifecycle.RWTLifeCycle$UIThreadController.run(RWTLifeCycle.java:289)
    at java.lang.Thread.run(Thread.java:722)
    at org.eclipse.rap.rwt.internal.lifecycle.UIThread.run(UIThread.java:102)
Caused by:
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.persistence.jpa.osgi.EMFServiceProxyHandler.invoke(EMFServiceProxyHandler.java:77)
    at $Proxy0.createEntityManager(Unknown Source)
    at ru.futurelink.moneyorganizer.data.MODatabase.<init>(MODatabase.java:13)
    at ru.futurelink.moneyorganizer.ApplicationEntryPoint.createUI(ApplicationEntryPoint.java:22)
    at org.eclipse.rap.rwt.internal.lifecycle.RWTLifeCycle.createUI(RWTLifeCycle.java:177)
    at org.eclipse.rap.rwt.internal.lifecycle.RWTLifeCycle$UIThreadController.run(RWTLifeCycle.java:289)
    at java.lang.Thread.run(Thread.java:722)
    at org.eclipse.rap.rwt.internal.lifecycle.UIThread.run(UIThread.java:102)
Caused by:
javax.persistence.PersistenceException: java.lang.NullPointerException
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:602)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:186)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:278)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:304)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:282)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.persistence.jpa.osgi.EMFServiceProxyHandler.invoke(EMFServiceProxyHandler.java:77)
    at $Proxy0.createEntityManager(Unknown Source)
    at ru.futurelink.moneyorganizer.data.MODatabase.<init>(MODatabase.java:13)
    at ru.futurelink.moneyorganizer.ApplicationEntryPoint.createUI(ApplicationEntryPoint.java:22)
    at org.eclipse.rap.rwt.internal.lifecycle.RWTLifeCycle.createUI(RWTLifeCycle.java:177)
    at org.eclipse.rap.rwt.internal.lifecycle.RWTLifeCycle$UIThreadController.run(RWTLifeCycle.java:289)
    at java.lang.Thread.run(Thread.java:722)
    at org.eclipse.rap.rwt.internal.lifecycle.UIThread.run(UIThread.java:102)
Caused by:
java.lang.NullPointerException
    at org.apache.derby.jdbc.EmbeddedDriver.connect(Unknown Source)
    at org.eclipse.persistence.sessions.DefaultConnector.directConnect(DefaultConnector.java:165)
    at org.eclipse.persistence.sessions.DefaultConnector.connect(DefaultConnector.java:117)
    at org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:162)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:685)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:213)
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:542)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:186)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:278)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:304)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:282)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.persistence.jpa.osgi.EMFServiceProxyHandler.invoke(EMFServiceProxyHandler.java:77)
    at $Proxy0.createEntityManager(Unknown Source)
    at ru.futurelink.moneyorganizer.data.MODatabase.<init>(MODatabase.java:13)
    at ru.futurelink.moneyorganizer.ApplicationEntryPoint.createUI(ApplicationEntryPoint.java:22)
    at org.eclipse.rap.rwt.internal.lifecycle.RWTLifeCycle.createUI(RWTLifeCycle.java:177)
    at org.eclipse.rap.rwt.internal.lifecycle.RWTLifeCycle$UIThreadController.run(RWTLifeCycle.java:289)
    at java.lang.Thread.run(Thread.java:722)
    at org.eclipse.rap.rwt.internal.lifecycle.UIThread.run(UIThread.java:102) 
```

最后是 derby.log 文件的内容：

```
Sun Sep 30 20:59:58 GMT+11:00 2012 Thread[UIThread [1ix4et52sn4jvzywdjyip1m3v],5,main] Class org.apache.derby.jdbc.Driver40 java.lang.NoClassDefFoundError: javax/sql/XAConnection, module ignored.
Sun Sep 30 20:59:58 GMT+11:00 2012 Thread[UIThread [1ix4et52sn4jvzywdjyip1m3v],5,main] Class org.apache.derby.jdbc.Driver30 java.lang.NoClassDefFoundError: javax/sql/XAConnection, module ignored.
Sun Sep 30 20:59:58 GMT+11:00 2012 Thread[UIThread [1ix4et52sn4jvzywdjyip1m3v],5,main] Class org.apache.derby.impl.services.jmx.JMXManagementService java.lang.NoClassDefFoundError: javax/management/JMException, module ignored.
Sun Sep 30 20:59:58 GMT+11:00 2012 Thread[UIThread [1ix4et52sn4jvzywdjyip1m3v],5,main] Cleanup action starting
ERROR XBM02: Startup failed due to missing functionality for org.apache.derby.jdbc.InternalDriver. Please ensure your classpath includes the correct Derby software.
at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
at org.apache.derby.iapi.services.monitor.Monitor.missingImplementation(Unknown Source)
at org.apache.derby.impl.services.monitor.TopService.bootModule(Unknown Source)
at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(Unknown Source)
at org.apache.derby.impl.services.monitor.BaseMonitor.startServices(Unknown Source)
at org.apache.derby.impl.services.monitor.BaseMonitor.runWithState(Unknown Source)
at org.apache.derby.impl.services.monitor.FileMonitor.<init>(Unknown Source)
at org.apache.derby.iapi.services.monitor.Monitor.startMonitor(Unknown Source)
at org.apache.derby.iapi.jdbc.JDBCBoot.boot(Unknown Source)
at org.apache.derby.jdbc.EmbeddedDriver.boot(Unknown Source)
at org.apache.derby.jdbc.EmbeddedDriver.<clinit>(Unknown Source)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:264) 
```

我使用该代码创建实体工厂：

```
mSystemEntities = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);
EntityManager em = mSystemEntities.createEntityManager(); 
```

这是我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">

<persistence-unit name="prov" transaction-type="RESOURCE_LOCAL">      
    <class>ru.futurelink.moneyorganizer.data.MOUserEntity</class>
    <properties>
      <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.EmbeddedDriver" />
      <property name="javax.persistence.jdbc.url" value="jdbc:derby:/sampledb;create=true" />

      <!-- EclipseLink should create the database schema automatically -->
      <property name="eclipselink.ddl-generation" value="drop-and-create-tables" />
      <property name="eclipselink.ddl-generation.output-mode" value="database" />
    </properties>

  </persistence-unit>  
</persistence> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:16:05.057

我找到了解决方案。Eclipse 使用 org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar 启动 OSGi 框架，但我尝试加载 org.eclipse.osgi_3.8.100.v20120912-141032.jar。我认为没有启动器的框架不支持反射导致类加载器丢失。我不确定该机制是否属于这种机制，但 JPA 现在可以工作并加载所有驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:19:53.890

好吧，您还没有提供代码和异常，所以我想您在执行以下操作

如果您使用 JDBC 并通过

```
connection = DriverManager.getConnection(connectionUrl, username, password); 
```

使用唯一的语句然后在 osgi 中它通常会引发异常并且您不会得到任何驱动程序并且驱动程序为空。

但如果你用过

```
Class.forName(driver); 
```

在创建连接之前 osgi 能够在运行时加载驱动程序，

OSGi 中的反射有点正统。

# ruby-on-rails - 我的数据库迁移有什么问题？

> ID：12593433
> 
> 赞同：0
> 
> 时间：2012-09-26T01:42:39.267
> 
> 标签：ruby-on-rails, database, sqlite

我正在尝试创造一种我有能力进行一系列研究的情况。所以我有一个名为 Series 的表。每个系列都有一个名称。各编也`has_many :parts`。所以我有一个名为 Part 的表和它`belongs_to :series`。然后是每个部分`has_many :questions`和我的问题表`belongs_to :part`。我必须将这些表中的每一个都归因于彼此，所以我有这样的迁移设置：

```
 class CreateSeries < ActiveRecord::Migration
   def self.up
     create_table :series do |t|
       t.string :name

       t.timestamps
     end
   end
   def self.down
       drop_table :series
   end
 end

class CreateParts < ActiveRecord::Migration
  def self.up
    create_table :parts do |t|
       t.date :date
       t.string :book
       t.integer :series_id

       t.timestamps
  end
    add_index :parts, [:series_id, :created_at]
  end

  def self.down
    drop_table :parts
  end
end

  class CreateQuestions < ActiveRecord::Migration
     def self.up
         create_table :questions do |t|
            t.text :body
            t.integer :part_id

            t.timestamps
         end
            add_index :questions, [:part_id, :created_at]
      end

      def self.down
         drop_table :questions
      end
   end 
```

所以我迁移了数据库并使用 SQLite DB 浏览器，我的 Questions 表有一个`parts_id`它应该的。我的零件表应该有一`series_id`列，但它没有。有人可以帮忙解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:28:49.593

我想知道为什么系列列不在您的数据库中。可以执行安全检查，如果我可以调用它尝试再次运行模型生成器。这次像这样运行

`rails g model part date:date book series:belongs_to`看看你是否遇到同样的问题。我希望这有帮助。或者您也可以检查您的控制台窗口尝试创建一个具有随机系列 ID 的新部分，并检查它是否存在复数问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:36:58.880

打开应用程序控制台`rails c`并输入`Part`.

您应该看到属性`series_id`。

如果这样做，解决方案只是重新启动服务器。

# ios - iOS how to add UIView to tableview cell effectively

> ID：12593440
> 
> 赞同：0
> 
> 时间：2012-09-26T01:43:52.870
> 
> 标签：ios, xml, tableview, cell, subview

I have a table going where each cell has a UIView in it that is fed from an XMLParser feed. If I leave it how it is, each time I refresh the views build upon each other because they are not getting released/removed, which makes total sense. How would I go about writing my code to avoid that problem, and not having to rebuild the view's each time I refresh. I am stuck in the logic of it and also the actual syntax. Thanks.

**Code:**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

  static NSString *CellIdentifier = @"Cell";
  JointCAD *currentCall = [[xmlParser calls] objectAtIndex:indexPath.row];
  self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"texture.png"]];

  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil)
  {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    UIView *selectionView = [[UIView alloc] initWithFrame:CGRectMake(10, 7, 200, 65)];
    [selectionView setBackgroundColor: [UIColor clearColor]];
    cell.selectedBackgroundView = selectionView;
  }

  // Display content in each cell

  cellSeparator = [[UIView alloc] initWithFrame:CGRectMake(10, 7, 300, 65)];
  [cellSeparator setAutoresizingMask:UIViewAutoresizingFlexibleLeftMargin |
   UIViewAutoresizingFlexibleRightMargin |
   UIViewAutoresizingFlexibleWidth];
  [cellSeparator setContentMode:UIViewContentModeTopLeft];
  [cellSeparator setBackgroundColor: [UIColor colorWithRed:240.0/255.0 green:240.0/255.0 blue:240.0/255.0 alpha:1.0]];
  cellSeparator.layer.borderWidth = 1.0;
  cellSeparator.layer.borderColor = [UIColor blackColor].CGColor;
  [cell addSubview:cellSeparator];

  callTypeLabel = [[UILabel alloc]initWithFrame:CGRectMake(5, 2, 190, 21)];
  callTypeLabel.text =  [currentCall currentCallType];
  callTypeLabel.backgroundColor = [UIColor clearColor];
  callTypeLabel.font = [UIFont boldSystemFontOfSize:12.0];
  [cellSeparator addSubview:callTypeLabel];

  locationLabel = [[UILabel alloc]initWithFrame:CGRectMake(5, 17 , 190, 15)];
  locationLabel.text = [currentCall location];
  locationLabel.backgroundColor = [UIColor clearColor];
  locationLabel.font = [UIFont systemFontOfSize:10.0];
  [cellSeparator addSubview:locationLabel];

  unitsLabel = [[UILabel alloc]initWithFrame:CGRectMake(4, 43, 190, 21)];
  unitsLabel.text = [currentCall units];
  unitsLabel.backgroundColor = [UIColor clearColor];
  unitsLabel.font = [UIFont italicSystemFontOfSize:10.0];
  [cellSeparator addSubview:unitsLabel];

  stationLabel = [[UILabel alloc]initWithFrame:CGRectMake(195 , 25, 75, 20)];
  NSString *station = [@"Station: " stringByAppendingString:currentCall.station];
  stationLabel.text = station;
  stationLabel.backgroundColor = [UIColor clearColor];
  stationLabel.font = [UIFont boldSystemFontOfSize:11.0];
  [cellSeparator addSubview:stationLabel];

  if ([currentCall.county isEqualToString:@"W"]) {
    UIImage  *countyImage = [UIImage imageNamed:@"blue.png"];
    CGRect countyImageFrame = CGRectMake(275, 10, 18, 18);
    UIImageView *countyImageLabel = [[UIImageView alloc] initWithFrame:countyImageFrame];
    countyImageLabel.image = countyImage;
    [cellSeparator addSubview:countyImageLabel];
  } else {
    UIImage  *countyImage = [UIImage imageNamed:@"green.png"];
    CGRect countyImageFrame = CGRectMake(275, 10, 18, 18);
    UIImageView *countyImageLabel = [[UIImageView alloc] initWithFrame:countyImageFrame];
    countyImageLabel.image = countyImage;
    [cellSeparator addSubview:countyImageLabel];
  }

  if ([currentCall.callType isEqualToString:@"F"]) {
    UIImage  *callTypeImage = [UIImage imageNamed:@"red.png"];
    CGRect callTypeImageFrame = CGRectMake(275, 37, 18, 18);
    UIImageView *callTypeImageLabel = [[UIImageView alloc] initWithFrame:callTypeImageFrame];
    callTypeImageLabel.image = callTypeImage;
    [cellSeparator addSubview:callTypeImageLabel];
  } else {
    UIImage  *callTypeImage = [UIImage imageNamed:@"yellow.png"];
    CGRect callTypeImageFrame = CGRectMake(275, 37, 18, 18);
    UIImageView *callTypeImageLabel = [[UIImageView alloc] initWithFrame:callTypeImageFrame];
    callTypeImageLabel.image = callTypeImage;
    [cellSeparator addSubview:callTypeImageLabel];
  }

  return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:52:18.423

如果我正确理解您的问题，我认为您想要的解决方案是子类化`UITableViewCell`，设置您的子视图（`UIImageViews`以及所有这些）并将它们作为您的子类的属性。那么你也能

```
if (!cell.imageView) {
    cell.imageView = [[UIImageView alloc] initWithFrame:myFrame];
} 
```

然后只需设置图像。这样一来，您就可以确保不会将图像视图堆叠在一起，并且在单元出列时会设置正确的图像。

编辑：

创建一个名为`MyTableViewCell`（或任何你想调用它的类，但确保它是 UITableViewCell 的子类）添加 @property (strong, nonatomic) UIImageView *imageView;

然后在你的 cellForRowAtIndexPath 中使用 MyTableViewCell 而不是 UITableViewCell ，你可以访问你的自定义表格视图单元格的图像属性，检查它是否存在，如果不创建它（这是上面的代码所做的）然后设置图像。我会给你代码，但我在我的手机上。谷歌子类化 UITableviewCell。你应该找到大量的例子。

# python - Python virtualenv --system-site-packages -- unexpected pip behavior

> ID：12593441
> 
> 赞同：3
> 
> 时间：2012-09-26T01:43:56.800
> 
> 标签：python, virtualenv, pip, virtualenvwrapper

I have a number of python services that each use virtualenvs. I sometimes rebuild these environments, and would like to save time doing it. `mkvirtualenv --system-site-packages` seems close to what I want, but it still has behavior I don't understand.

One package I use is gevent (beta version), which I install directly from GitHub: `sudo pip install -e git://github.com/surfly/gevent.git@1.0b4#egg=gevent`. This is done outside of a virtualenv, so it goes into the system's `site-packages`. This works fine, and if I create a new virtualenv with `--system-site-packages`, it seems to be present, but with a different rev and egg specified:

```
[msherry@hostname:~]$ mkvirtualenv test --system-site-packages
New python executable in test/bin/python2.7
Also creating executable in test/bin/python
Installing setuptools............done.
Installing pip...............done.
[msherry@hostname:~]$ workon test
[msherry@hostname:~]$ pip freeze|grep gevent
-e git://github.com/surfly/gevent.git@15418fc8ff4460069cf42b4b0341969c54455ddd#egg=gevent-dev 
```

It at least looks installed, though. However, when I run `pip install -e git://github.com/surfly/gevent.git@1.0b4#egg=gevent`, the (slow) install process for gevent begins again -- it looks like I gain nothing by using `--system-site-packages`.

Ideally, I'd like pip to notice that the version of gevent I'm requesting is already present, and not try to install it again. Is there any way to do what I'm attempting?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T19:51:30.410

在系统范围内安装时，请尝试稍微不同的语法。

`sudo pip install git+git://github.com/surfly/gevent.git@1.0b4#egg=gevent`

这与您的几乎相同，除了没有`-e`and 包含`<vcs>`您的网址的前缀。没有这个，pip 说

`AssertionError: Sorry, 'git://github.com/surfly/gevent.git' is a malformed VCS url. The format is <vcs>+<protocol>://<url>, e.g. svn+http://myrepo/svn/MyApp#egg=MyApp`

我还注意到你在“可编辑”模式下通过 pip 安装包时所做的同样的事情：我得到了提交哈希版本，就像你对你的输出所做的那样`pip freeze | grep gevent`

`-e git://github.com/surfly/gevent.git@15418fc8ff4460069cf42b4b0341969c54455ddd#egg=gevent-dev`

这对应于[gevent 的那个版本](https://github.com/surfly/gevent/tree/15418fc8ff4460069cf42b4b0341969c54455ddd)。

# java - Java homework: using an equals method with an array of objects

> ID：12593448
> 
> 赞同：3
> 
> 时间：2012-09-26T01:45:33.467
> 
> 标签：java, arrays, object, equals

I have created an array of Song objects. A song contains the variables title, author, interpreter, (int)yearReleased, album, and fileName. I am using a main method to test my array of songs and my equals method. The test is supposed to fill an array with five song objects and use my equals method to ensure the new entry is not a duplicate of a previous entry. My test class compiles, but when I enter duplicate song information I keep getting an error. If anyone could give me a tip or point me in the correct direction I would greatly appreciate it. Any other tips would also be great. As a student, it is great to hear good real world advice from professionals.

```
 import java.util.Scanner;

 public class Test{
 public static void main(String[] args)
 {
    Scanner kybd = new Scanner(System.in);

    Song[] songTest = new Song[5];
    boolean match;
    int count = 0;

    System.out.println("Enter 5 songs\n");

    for(Song x:songTest)
    {
        do{
            match = false;
            x = new Song();
            System.out.print("Title: ");
            x.setTitle(kybd.nextLine());
            System.out.print("Author: ");
            x.setAuthor(kybd.nextLine());
            System.out.print("Interpreter: ");
            x.setInterpreter(kybd.nextLine());
            System.out.print("Year released: ");
            x.setYearReleased(kybd.nextInt());
            kybd.nextLine();
            System.out.print("Album: ");
            x.setAlbum(kybd.nextLine());
            System.out.print("File name: ");
            x.setFileName(kybd.nextLine());
            System.out.print(x);
            System.out.println();
            for(int i = 0; i<count; i++)
                if(songTest[i].equals(x)){
                    match = true;
                    System.out.print("Duplicate");
                }
        }while(match);
        count++;
    }
}
}

public class Song
{
public String title;
public String author;
public String interpreter;
public int yearReleased;
public String album;
public String fileName;

//private vars
private int reviewScore = 0;
private int reviews = 0;
private double average;

//Mutator methods

public void setTitle(String t)
{
    this.title = t;
}

public void setAuthor(String a)
{
    this.author = a;
}

public void setInterpreter(String i)
{
    this.interpreter = i;
}

public void setYearReleased(int y)
{
    if (y>0)
        this.yearReleased = y;
    else
    {
        System.out.print ("This song is not that old");
        this.yearReleased = -5;
    }
}

public void setAlbum(String a)
{
    this.album = a;
}

public void setFileName(String f)
{
    this.fileName = f;
}

public void addReviewScore(int s)
{
    if (s>0 && s<6)
    {
        this.reviewScore += s;
        this.reviews++;
    }
    else
        System.out.print("This is not a valid review score!");
}

//Accessor methods

public String getTitle()
{
    return this.title;
}

public String getAuthor()
{
    return this.author;
}

public String getInterpreter()
{
    return this.interpreter;
}

public int getYearReleased()
{
    return this.yearReleased;
}

public String getAlbum()
{
    return this.album;
}

public String getFileName()
{
    return this.fileName;
}

public double getAverage()
{
    this.average = this.calculateAverage();
    return this.average;
}

//Methods

public boolean equals(Song otherSong)
{
    boolean isEqual = false;
    //compare this song to the otherSong
    isEqual =
        this.title == otherSong.title &&
        this.author == otherSong.author &&
        this.interpreter == otherSong.interpreter &&
        this.yearReleased == otherSong.yearReleased &&
        this.album == otherSong.album &&
        this.fileName == otherSong.fileName;
    return isEqual;
}
public String toString()
{
    String songInfo;
    songInfo = 
        "***Song information***\n" +
        "Title: " + this.title + 
        "\nAuthor: " + this.author +
        "\nInterpreter: " + this.interpreter +
        "\nYear Released: " + this.yearReleased +
        "\nAlbum: " + this.album +
        "\nFile name: " + this.fileName +
        "\nYears old: " + this.yearsOld(); 
    return songInfo;
}

public int yearsOld()
{
    int yearsOld = (2012 - this.yearReleased);
    return yearsOld;
}

//Private methods
private double calculateAverage()
{
    this.average = ((double)this.reviewScore/(double)this.reviews);
    return this.average;

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:03:39.710

我尝试了您的代码并重现了在这一行发生的错误：

```
 if(songTest[i].equals(x)){ 
```

重写你的equals方法（或让eclipse为我做）并添加hashCode（）解决了这个问题：

```
@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((album == null) ? 0 : album.hashCode());
    result = prime * result + ((author == null) ? 0 : author.hashCode());
    long temp;
    temp = Double.doubleToLongBits(average);
    result = prime * result + (int) (temp ^ (temp >>> 32));
    result = prime * result
            + ((fileName == null) ? 0 : fileName.hashCode());
    result = prime * result
            + ((interpreter == null) ? 0 : interpreter.hashCode());
    result = prime * result + reviewScore;
    result = prime * result + reviews;
    result = prime * result + ((title == null) ? 0 : title.hashCode());
    result = prime * result + yearReleased;
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    Song other = (Song) obj;
    if (album == null) {
        if (other.album != null)
            return false;
    } else if (!album.equals(other.album))
        return false;
    if (author == null) {
        if (other.author != null)
            return false;
    } else if (!author.equals(other.author))
        return false;
    if (Double.doubleToLongBits(average) != Double
            .doubleToLongBits(other.average))
        return false;
    if (fileName == null) {
        if (other.fileName != null)
            return false;
    } else if (!fileName.equals(other.fileName))
        return false;
    if (interpreter == null) {
        if (other.interpreter != null)
            return false;
    } else if (!interpreter.equals(other.interpreter))
        return false;
    if (reviewScore != other.reviewScore)
        return false;
    if (reviews != other.reviews)
        return false;
    if (title == null) {
        if (other.title != null)
            return false;
    } else if (!title.equals(other.title))
        return false;
    if (yearReleased != other.yearReleased)
        return false;
    return true;
} 
```

你似乎也有计数器没有正确递增的问题，但我不会为你做所有的功课！;)

编辑：哇！您还缺少类似的东西

```
 songTest[i] = song; 
```

将选中的歌曲添加到您的阵列中。

另外，为了确保您的第一首歌被放入，我添加了：

```
if(i==0){
        songTest[i] = x;
} 
```

在您检查之前。我通过将您的第一个 for 循环更改回老式版本添加了 i is 和 int，并且我将您的内部 for 循环重命名为 j。现在它起作用了。尝试放入类似的东西：

```
System.out.println("i: " + i + " j: " + j + " count: " + count); 
```

看看你的柜台发生了什么

您也可以在找到重复项后退出。这是你想要的行为吗？还是通知用户，继续输入歌曲数据比较好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T02:00:34.673

当我运行它时，我在这一行得到一个空指针异常

`if(songTest[i].equals(x)){`

看起来您实际上并没有将歌曲对象 (x) 放入数组中。

# c++ - What's wrong with lldb/gdb, ignoring first sleep() statement in OS X?

> ID：12593449
> 
> 赞同：2
> 
> 时间：2012-09-26T01:45:39.623
> 
> 标签：c++, gdb, fork, sleep, lldb

I am running into the following problem on the latest version of OS X 10.8.2, with latest Xcode 4.5.

Take the following simple piece of code:

```
#include <iostream>
#include <stdlib.h>
#include <sys/types.h>
#include <unistd.h>

int main(int argc, const char * argv[])
{
    pid_t pid = fork();

    if (0 == pid)
    {
        std::cout << "Child process!\n";

        exit(0);
    }
    else if (-1 == pid)
    {
        std::cout << "Error forking.\n";
    }
    else
    {
        std::cout << "In parent, created pid " << pid << ".\n";

        sleep(100000);      // Sleep a long time - GDB/LLDB ignores the first sleep statement
        sleep(3);           // Sleep 3 more seconds - GDB/LLDB doesn't ignore the second sleep statement

        std::cout << "Done in parent!\n";
    }

    return 0;
} 
```

Compile it using `clang++ foo.cpp -o foo` or `g++ foo.cpp -o foo` and run it using `./foo`, it takes a long time to run, as expected.

Now do either `lldb ./foo` or `gdb ./foo`, then `run` and notice it completes in 3 seconds. Whenever either debugger is used, the first sleep statement is seemingly ignored.

Since Xcode uses lldb by default when running a project, pasting the above code into a blank Xcode project and doing Product->Run will have similar results.

I've tried the same experiment on a Linux machine with gdb 7.2, and the problem does *not* occur there.

Is this a bug in an older version of gdb that Apple uses (gdb 6.3.50-20050815 (Apple version gdb-1822) ), or is it something else? Perhaps just my computer is messed up, if it doesn't happen to other OS X users?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:08:06.157

虽然很多人不使用它，但`sleep`实际上是有返回值的。

`man 3 sleep`：

> 返回值
> 
> ```
> If the sleep() function returns because the requested time has elapsed,
> the value returned will be zero.  If the sleep() function returns due
> to the delivery of a signal, the value returned will be the unslept amount
> (the requested time minus the time actually slept) in seconds. 
> ```

果然，考虑到观察到的行为，返回了预期值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T21:48:56.100

我认为问题是由于调试器想要暂停进程的任何时候，如果该进程处于系统调用的中间（它正在内核领域执行代码），那么该系统调用就会中止 EINTR 样式Mac OS X。我不知道 Linux 系统是如何处理这个问题的，但这就是在 Mac OS X 上发生的事情。如果你运行你的程序，并在一个单独的窗口中用 lldb 附加到它并继续这个过程，你会发现你的睡眠（100000）；一旦执行恢复，调用就会终止。似乎当子进程退出时必须广播 SIGCHLD 信号，这导致父进程被调试器中断 - 但我并不完全清楚导致长 sleep() 调用提前结束的原因在这种特定情况下。

# asp.net - How to stop automatically login to the created account in aspnet

> ID：12593450
> 
> 赞同：0
> 
> 时间：2012-09-26T01:45:44.350
> 
> 标签：asp.net, asp.net-mvc

Here I am using asp.net configuration and mvc model. I have created a form to create users with the help of createUserWizard .NET component. After creating the user it automatically logs with the created user. How to stop this? Thanks in advance..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T04:19:24.787

CreateUserWizard 有一个名为 LoginCreatedUser 的属性。它的默认值为 true。只需将其更改为 false。希望你已经得到答案:)

# ios - BSD atos available on Linux?

> ID：12593451
> 
> 赞同：5
> 
> 时间：2012-09-26T01:45:47.720
> 
> 标签：ios, linux, ubuntu, debug-symbols, bsd

Is the atos binary for converting numberic addresses to symbols of binary images available on Linux, specifically Ubuntu? It seems to only be available on OS X.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-04T10:03:36.637

来自 Facebook 的 Atosl - [https://github.com/facebook/atosl](https://github.com/facebook/atosl)

要让它在 ubuntu 上运行：

```
sudo apt-get install libdwarf-dev binutils-dev
git clone git@github.com:facebook/atosl.git
cd atosl
make 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T01:50:49.983

没有任何东西可以自动翻译地址；您将需要选择`nm`or的输出`objdump`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-16T21:45:17.020

[binutils 中名为addr2line](https://sourceware.org/binutils/docs/binutils/addr2line.html)的类似工具。

# c - Why do two strings, when compared with the equals == operator, not match up even if the output is the same?

> ID：12593453
> 
> 赞同：0
> 
> 时间：2012-09-26T01:46:06.977
> 
> 标签：c, string, character-encoding

> **Possible Duplicate:**
> [How to compare strings in an “if” statement?](https://stackoverflow.com/questions/8222495/how-to-compare-strings-in-an-if-statement)

I'm using C. My two strings, when compared with the equals == operator, are not matching up, even if the std output looks the same.

Consider one of the arrays started as an array of integers, which I converted to characters by adding a '0' to each integer and loading into another char * array.

So now both arrays are character arrays with characters and the same std output, but my "if" selection structure is not working to match them. I am using the char * name to reference each array.

I could post this entire code if necessary. Here is a loop with the comparison:

```
i=0;
pipx = (char*)malloc(sizeof(char));
sec = (char*)malloc(sizeof(char));

//for (b = 0; b < lengthx; b++){
    //reallocate a second array
    pipx = (char*)realloc(sec, ((i+1)*sizeof(char)) );
    sec = pipx;
    //add bitstr[b] to second array
    sec[i] = (char)bitstr[b] + '0';
    i++;

    for (m = 0; m < k; m++){
        printf("codex[m].bitx:%s", codex[m].bitx);
        printf("sec:%s|\n", sec);
        printf("seclen: %i", (int)strlen(sec));
        printf("codex[m].bitxlen: %i\n", (int)strlen(codex[m].bitx));
        if ((char*)sec == (char*)codex[m].bitx){
            printf("This should output: %s", sec);
            printf("Here ---------------------- Here");
            //allocate the second array to zero
            i=0;
            sec = (char*)malloc(0);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T01:47:49.860

in order to compare strings, you need to use `strcmp` instead of `==`

`==` verifies they point to the same address, while `strcmp` will compare the two char* and return true if every character matches until it hits `\0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T01:48:56.787

那是因为您正在比较两个变量是否指向相同的内存地址，而不是两个内存地址处的信息是否相同。总是使用 strcmp

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T01:49:06.920

您正在比较文字指针值而不是那些指针指向的字符串。

正如其他人所说，查找`strcmp()`和朋友。

# exception - Failed to get location of Visual Studio from registry

> ID：12593458
> 
> 赞同：0
> 
> 时间：2012-09-26T01:46:54.180
> 
> 标签：exception, visual-studio-2012, dynamics-crm-2011

I'm using Visual Studio 2012 to create a CRM 2011 Workflow Project

After filling the details of the CRM server I get this message

"failed to get location of Visual Studio from registry"

Why? and How to fix it please.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T01:52:18.220

如果您使用的是 64 位计算机，请尝试将整个 Visual Studio 注册表项从 local_machine 复制到 current_user。

# python - 我在哪里可以查看 tornado 的日志文件？

> ID：12593460
> 
> 赞同：13
> 
> 时间：2012-09-26T01:47:03.200
> 
> 标签：python, tornado

我认为有一个默认的日志文件，但我还没有找到它。

有时 HTTP 请求进程会在屏幕上抛出异常，但我建议它也会出现在磁盘上的某个位置，否则在长时间运行测试期间我不知道出了什么问题。

PS：编写异常处理程序是另一个话题；首先我想知道我的问题的答案。

我在这里找到了一些东西： [https ://groups.google.com/forum/?fromgroups=#!topic/python-tornado/px4R8Tkfa9c](https://groups.google.com/forum/?fromgroups=#!topic/python-tornado/px4R8Tkfa9c)

但它也没有提到我在哪里可以找到这些日志。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-26T07:41:28.250

它默认使用标准的 python 日志记录模块。

这是[定义](https://github.com/facebook/tornado/blob/master/tornado/log.py#L47)：

```
access_log = logging.getLogger("tornado.access")
app_log = logging.getLogger("tornado.application")
gen_log = logging.getLogger("tornado.general") 
```

默认情况下它不会写入文件。您可以使用[supervisord](http://supervisord.org/)运行它并在 supervisord 配置中定义，日志文件将位于该位置。它将捕获龙卷风的输出并将其写入文件。

你也可以这样[想](http://www.joet3ch.com/blog/2011/09/08/alternative-tornado-logging/)：

```
tornado.options.options['log_file_prefix'].set('/opt/logs/my_app.log')
tornado.options.parse_command_line() 
```

但在这种情况下 - 测量性能。如果可以委托，我不建议您直接从 tornado 应用程序写入文件。

仅供参考：[`parse_command_line`](https://github.com/facebook/tornado/blob/master/tornado/options.py#L109)只启用[漂亮的控制台日志记录](https://github.com/facebook/tornado/blob/master/tornado/options.py#L138)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T02:31:14.773

使用较新的版本，您可以这样做

```
args = sys.argv
args.append("--log_file_prefix=/opt/logs/my_app.log")
tornado.options.parse_command_line(args) 
```

或如@ColeMaclean 提到的，提供

```
--log_file_prefix=PATH 
```

在命令行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T07:42:05.807

默认情况下没有日志文件。

您可以使用`--log_file_prefix=PATH`命令行选项来设置一个。

Tornado 只使用[Python 标准库的日志记录模块](http://docs.python.org/library/logging.html)，如果您尝试做任何更复杂的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-14T05:55:59.473

使用`RotatingFileHandler`：

```
import logging
from logging.handlers import RotatingFileHandler

log_path = "/path/to/tornado.access.log"
logger_ = logging.getLogger("tornado.access")
logger_.setLevel(logging.INFO)
logger_.propagate = False
handler = RotatingFileHandler(log_path, maxBytes=1024*1024*1024, backupCount=3)
handler.setFormatter(logging.Formatter("[%(name)s][%(asctime)s][%(levelname)s][%(pathname)s:%(lineno)d] > %(message)s"))
logger_.addHandler(handler) 
```

# javascript - Need Mobile Safari to run a java script while my iPhone is in sleep-mode

> ID：12593461
> 
> 赞同：0
> 
> 时间：2012-09-26T01:47:08.927
> 
> 标签：javascript, ios, web-applications, safari

Recently I submitted an iPhone app that was rejected because it uses the APNS to push messages that could contain marketing and advertising information. Because of this, I now need to create a web app instead of a native phone app.

My problem is that I need to poll the phone’s location in the background. When Safari is in sleep mode I need to somehow have a java script running in the background to monitor location changes. Has anyone been able to do this?

# c# - placing the shape in front of the image in c#

> ID：12593466
> 
> 赞同：4
> 
> 时间：2012-09-26T01:47:51.213
> 
> 标签：c#, shape

i have one picture showing of the human body and i want to use shapes to locate the injuries of the patient. all the shapes will shows off when the user click button. right now im testing with only one shape.

here is my code.

```
private void button7_Click_4(object sender, EventArgs e)
    {
        Graphics g = this.CreateGraphics();
        g.Clear(this.BackColor);

        Image img = Image.FromFile("C:\\Users\\HDAdmin\\Pictures\\humanbody\\effect2.png");
        g.DrawImage(img, 0, 0, img.Height, img.Width);
        g.Dispose();
    } 
```

right now, the shape appear at the back of the image. so how i want to make the shape appear in front of the picture?

![enter image description here](../Images/21f80445ea927d362ddae83da4505019.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T02:05:12.267

几个问题。

1）绘画应该发生在绘画事件中。不要使用 CreateGraphics，因为这只是一个临时绘图。

2) 你的 DrawImage 宽度和高度参数是相反的。

3) 看起来您没有在窗体上绘制 PictureBox 控件：

```
private Image img;

public Form1() {
  InitializeComponent();
  button1.Click += button1_Click;
  pictureBox1.Paint += pictureBox1_Paint;
}

void button1_Click(object sender, EventArgs e) {
  img = = Image.FromFile("C:\\Users\\HDAdmin\\Pictures\\humanbody\\effect2.png");
  pictureBox1.Invalidate();
}

void pictureBox1_Paint(object sender, PaintEventArgs e) {
  e.Graphics.Clear(pictureBox1.BackColor);

  if (img != null) {
    e.Graphics.DrawImage(img, 0, 0, img.Width, img.Height);

    //Draw test shape:
    e.Graphics.DrawRectangle(Pens.Red, new Rectangle(10, 10, 20, 60));
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:53:40.810

我认为您应该首先获取人类图像的图形，然后在其上绘制形状图像。类似的事情：

```
Image img = Image.FromFile("C:\\Users\\HDAdmin\\Pictures\\humanbody\\effect2.png"); 

Graphics g = Graphics.FromImage ( img );

g.DrawImage(ShapeImage, 0, 0, 30, 30); // you can set your required x,y,width,height 
```

# asp.net - Asp.net 将数据表绑定到gridview

> ID：12593467
> 
> 赞同：0
> 
> 时间：2012-09-26T01:47:51.797
> 
> 标签：asp.net

我知道如何将一个简单的数据表绑定到一个网格视图，但这是一个不同的场景（我认为）。我正在调用一个返回类的类库 dll。我可以说它的那种列表。

我会这样称呼它，

```
Dim demo = New ABCDataTable()
demo = demo.GetTheDataTable(MyConnectionString)
GridView1.DataSource = demo
GridView1.DataBind() 
```

问题：如何将它绑定到标记文件中的 gridview？我必须使用哪个数据源控件？

更新：

我使用 ObjectDataSource 并分配 SelectMethod="GetTheDataTable" 并使用 selectparameter 传递连接字符串。

我在 ObjectDataSource1.SelectParameters["connectionString"].DefaultValue = MyConnectionString; 后面的代码中分配连接字符串

但我收到一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:52:04.330

我不知道它是否会起作用，但试试这样 -

```
<asp:GridView id="GridView1" runat="server" 
   DataSource='<%# (new ABCDataTable()).GetTheDataTable(ConfigurationManager.ConnectionString["nameofyourconnectionstringInwebconfigfile"])) %>' >

</asp:GridView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:46:33.167

您可以使用 Hidden 控件作为 connectionString 的选择参数。

确保类的默认构造函数`ABCDataTable`没有任何参数。

如果是这样，那么您可以在另一个类中创建一个静态方法来创建实例并将结果返回给`ObjectDatasource`.

# java - 不确定如何将对象集合添加到 JTable

> ID：12593473
> 
> 赞同：0
> 
> 时间：2012-09-26T01:48:30.590
> 
> 标签：java, jdbc, jtable

我在尝试将对象集合传递给 JTable 时遇到了一些问题，

问题是我不确定我能做些什么来基本上在我的 JTable 中使用 Object 集合

我看过这个，但我不确定我能做什么 [链接](http://www.java2s.com/Tutorial/Java/0240__Swing/Buildatablefromlistdataandcolumnnames.htm)

下面是我目前用于 DAO 和 Main 类的代码

[对象 DAO](http://pastebin.com/WN06jYQt)：

[主要课程](http://pastebin.com/3z4mWqP2)：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T17:37:25.073

> TableModel 接口定义了数据如何与 JTable 交互。有两个类实现 TableModel 接口 - DefaultTableModel 和 AbstractTableModel。AbstractTableModel 实现了 TableModel 接口中定义的大多数方法，并留下了三个必须由子类实现的方法（getRowCount、getColumnCount、getValueAt）。它是程序员可能创建的任何自定义表模型的基础。DefaultTableModel 类就是这样一个实现。它是 AbstractTableModel 的子类，实现了三种方法，其中数据存储在**Vectors 的 Vector 中**。
> 
> 通过使用从 AbstractTableModel 构建的您自己的自定义表模型，您可以选择以任何方式存储数据，但您需要实现允许数据与 JTable 无缝交互的方法。有多少方法取决于 JTable 需要多少来管理数据。对于只读的 JTable，那么上面提到的三个默认方法就足够了。但是对于允许广泛编辑（例如，添加和删除行和列）的 JTable，则需要实施这些方法以反映存储在表模型中的数据的变化。

礼貌 - [http://java.about.com/od/Creating-Tables/a/The-Jtable-Table-Model.htm](http://java.about.com/od/Creating-Tables/a/The-Jtable-Table-Model.htm)

# sql - Oracle SQL-在“CASE”查询中获取“不同”值

> ID：12593477
> 
> 赞同：3
> 
> 时间：2012-09-26T01:49:23.550
> 
> 标签：sql, oracle

我在 ORACLE SQL 中有以下查询：

```
Select
Trunc(Cs.Create_Dtime),
Count(Case When Cs.Cs_Listing_Id Like '99999999%' Then (Cs.Player_Id) End) As Sp_Dau, 
Count(Case When Cs.Cs_Listing_Id Not Like '99999999%' Then (Cs.Player_Id) End) As Cs_Dau
From
Player_Chkin_Cs Cs
Where
Trunc(Cs.Create_Dtime) >= To_Date('2012-Jan-01','yyyy-mon-dd')
Group By Trunc(Cs.Create_Dtime)
Order By 1 ASC 
```

我在每个计数的“case”之前添加了“Distinct”。我只是想确保这在每种情况下只返回所有不同的 player_Ids。有人可以确认吗？谢谢！这是最终的查询：

```
Select
Trunc(Cs.Create_Dtime),
Count(Distinct Case When Cs.Cs_Listing_Id Like '99999999%' Then (Cs.Player_Id) End) As      Sp_Dau,
Count(Distinct Case When Cs.Cs_Listing_Id Not Like '99999999%' Then (Cs.Player_Id) End)     As Cs_Dau
From
Player_Chkin_Cs Cs
Where
Trunc(Cs.Create_Dtime) >= To_Date('2012-Jan-01','yyyy-mon-dd')
Group By Trunc(Cs.Create_Dtime)
Order By 1 ASC; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:37:45.757

一个简单的测试用例，用于证明`count(distinct ...`只返回不同的值：

```
11:34:09 HR@vm_xe> select department_id, count(*) from employees group by department_id order by 2 desc;      

DEPARTMENT_ID   COUNT(*)                                                                                      
------------- ----------                                                                                      
           50         45                                                                                      
           80         34                                                                                      
          100          6                                                                                      
           30          6                                                                                      
           60          5                                                                                      
           90          3                                                                                      
           20          2                                                                                      
          110          2                                                                                      
           40          1                                                                                      
           10          1                                                                                      
                       1                                                                                      
           70          1                                                                                      

12 rows selected.                                                                                             

Elapsed: 00:00:00.03                                                                                          
11:34:12 HR@vm_xe> select count(department_id) "ALL", count(distinct department_id) "DISTINCT" from employees;

       ALL   DISTINCT                                                                                         
---------- ----------                                                                                         
       106         11                                                                                         

1 row selected.                                                                                               

Elapsed: 00:00:00.02                                                                                          
11:34:20 HR@vm_xe> 
```

# python - Python中的手动排序

> ID：12593478
> 
> 赞同：-5
> 
> 时间：2012-09-26T01:49:39.073
> 
> 标签：python, sorting, if-statement, input

所以我为我的 Python 课布置了一个作业，我根本不知道该怎么做。

本质上，我们的教授希望我们分解“排序的”内置 Python 函数，并在使用 else、elif 和 if 语句时自己做。

我们需要先让用户输入4个数字，然后用else、elif、if进行升序排序打印，而不允许使用内置的“排序”功能。

这是我需要它做的事情：

示例输出：

```
>>> sort4() 
Please enter a number: 1.1 
Please enter a number: -7.3 
Please enter a number: 32 
Please enter a number: 3.14 
Your numbers in ascending order are: -7.3 1.1 3.14 32 
```

如果有什么可以帮助或帮助我的，请尽快这样做。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:03:46.623

首先，用伪代码写出你的算法（这是一个非常幼稚的算法）：

1.  从用户那里获得四个数字
2.  取第一个数字（叫它`first`）
3.  检查它是否小于第二个数字（称为`second`）
4.  if`first`小于`second`检查其他数字（`third`和`fourth`）
5.  如果经过这样的检查，`first`是四个数字中最小的，打印出来
6.  如果`first`大于遇到的任何其他数字，则`first`改为调用该其他数字，并将**其**与其他两个数字进行检查。

打印出第一个数字后，对其他三个数字重复该过程

现在，尝试编写代码，如果您再次绊倒，我们会提供帮助

**编辑1（'我如何让它做'和如果's'）**：

“and if”本质上是两个嵌套`if`语句。例如：

如果我想说（用伪代码）“如果下雨了，如果我没有车，我会带伞”，那么我会说：

```
if it is raining
    if I do not have the car
        I will carry an umbrella 
```

因此，要在 python 中执行此操作，您必须执行以下操作：

```
if conditionA:
    if conditionB:
        # do stuff… 
```

希望有帮助

# c# - Unity3d 和 iPad 之间的屏幕方向差异，游戏不受设备旋转影响

> ID：12593479
> 
> 赞同：2
> 
> 时间：2012-09-26T01:49:40.483
> 
> 标签：c#, ipad, unity3d, landscape, portrait

我正在帮助使用 C# 在 Unity3d 中开发游戏。我们正在为 iPad 开发并使用 Unity 的 Apple 插件。我们的游戏是一款 2-D 平台游戏，具有使用设备 (iPad) 旋转的游戏玩法。我们使用物理来进行角色移动。

该游戏主要在 Landscape Right 中进行。我们可以使用`Screen.orientation = ScreenOrientation.LandscapeRight`等轻松更改设备的方向。我们希望能够将设备从`LandscapeLeft`和旋转`LandscapeRight`到`Portrait`或`PortraitUpsideDown`，我们可以做到这一点。

在 Unity3d 中运行我们的场景时，当我们从横向旋转到纵向时，我们的角色会因为我们旋转世界（她站立的位置）而跌倒，而她保持相同的方向（物理保持不变），导致她跌倒。这是我们想要的行为。但是，当我们构建到 Xcode 并在 iPad 模拟器（版本 5.1）上运行游戏时，我们旋转设备以使世界旋转，它只是旋转了设备，游戏仍然具有相同的方向（横向）。iPad是纵向的，但游戏仍然是横向的。除了 ScreenOrientation，我们还需要在设备中设置其他变量吗？我们如何让我们的游戏状态与设备的方向一致？

快速总结：我们希望我们的游戏默认为横向。当我们旋转到纵向时，我们希望世界随着相机旋转而玩家保持不变。物理与角色的含义联系在一起，一旦世界旋转，她就会跌倒，因为她不再站在地上。目前，当我们旋转 iPad 时，设备的方向会发生变化，但游戏的方向不会改变。我们希望世界旋转，但角色保持不变。它在 Unity3d 中工作，但在使用 Xcode iPad 模拟器时不能正常工作。我们如何做到这一点？

谢谢！

肯尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:56:44.263

非常令人困惑的问题，我必须说。检查方向应该简单直接。

首先也是最重要的：忘记 XCode 模拟器！即使您直接在 XCode 上构建而不使用 Unity 或其他任何东西，它也很糟糕。*也许*仅此一项就已经解决了您的问题。获取 iPad 并在其上进行测试。

此外，您还需要适当的*脚本*来*处理*随旋转而发生的物理变化行为。我不明白你是否得到了这个，但如果你没有，这可能不是太微不足道。虽然看起来你明白了。

最后，最令人困惑的部分是当您谈论[`ScreenOrientation`](http://docs.unity3d.com/Documentation/ScriptReference/ScreenOrientation.html)and[`Screen.Orientation`](http://docs.unity3d.com/Documentation/ScriptReference/Screen-orientation.html)时，也许那里有一个错误。当您使用时，`Screen.orientation = ScreenOrientation.LandscapeRight`您会强制改变实际的屏幕方向（它不是只读的），这应该仅用于测试目的。您甚至可以在其中包含与它相关的所有代码`#if UNITY_EDITOR`和`#endif`预编译器“标签”。对于设备，您应该只有`ScreenOrientation == ScreenOrientation.LandscapeRight`on`if`或`switch`子句和比较运算符，即双等号 ( `==`)。

想不出任何其他可能出错的地方。

# clojure - 如何使用 clojure.algo.generic 库？

> ID：12593485
> 
> 赞同：6
> 
> 时间：2012-09-26T01:50:32.293
> 
> 标签：clojure

我知道库[https://github.com/clojure/algo.generic](https://github.com/clojure/algo.generic)提供了实现通用算术运算符的方法，`+ * / -`但是我找不到一个简单的示例来说明如何创建它们以及如何将其用作库。

说如果我想实现向量加法等：

```
> (+ [1 2 3 4 5] 5) 
;; => [6 7 8 9 10] 
```

我该怎么做：

*   `+`使用 algo.generic定义运算符
*   使用`+`之前在另一个项目中定义的运算符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T06:32:39.627

```
(ns your.custom.operators
  (:import
    clojure.lang.IPersistentVector)
  (:require
    [clojure.algo.generic.arithmetic :as generic]))

(defmethod generic/+
  [IPersistentVector Long]
  [v x]
  (mapv + v (repeat x)))

(ns your.consumer.project
  (:refer-clojure :exclude (+))
  (:use
    [clojure.algo.generic.arithmetic :only (+)])
  (:require
    your.custom.operators))

(defn add-five
  [v]
  (+ v 5)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T03:37:46.063

编辑 2,

```
user=> (defn + [coll i] (map #(clojure.core/+ % i) coll))
#'user/+
user=> (+ [1 2 3 4 5] 5)
(6 7 8 9 10) 
```

编辑，你也可以做

```
(in-ns 'algo.generic)
(defn + [& args]) 
```

- 编辑 -

您应该使用 (require [lib :as namespacehere]) 并调用 (namespacehere/+ ...)。以下是所提出问题的代码。

```
user=> (map #(+ % 5) [1 2 3 4 5])
(6 7 8 9 10) 
```

另外，请查看[(in-ns)](http://clojuredocs.org/clojure_core/clojure.core/in-ns)。

# iphone - 将 CGColorRef 作为指针存储在 NSArray 中

> ID：12593488
> 
> 赞同：0
> 
> 时间：2012-09-26T01:50:59.923
> 
> 标签：iphone, ios, cocoa-touch, memory-management, core-graphics

有时我在使用 CG 元素时会感到困惑，并且有以下看起来很简单但给我带来麻烦的场景。

我有一个`CGColorRef`名为 的属性`fillColor`，为此我手动定义了 setter 方法，如下所示：

```
@property(nonatomic) CGColorRef fillColor;

- (void) setFillColor:(CGColorRef)fillColor
{
    CGColorRetain(fillColor); 
    CGColorRelease(_fillColor); 
    _fillColor = fillColor;
} 
```

在我`_fillColor`达到某个值之后，我将它存储在一个数组中，如下所示：

```
_fillColors = [[NSArray alloc] initWithObjects:(id)_fillColor, nil]; 
```

我希望这样当 change 时`self.fillColor`，我希望数组中的值也发生变化。我显然可以创建一个指针，即`CGColorRef *fillColor`，但这样做我将如何管理内存（即释放、保留它）以及我的 setter 方法将如何改变？这真的让我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:02:28.527

~~`NSArray`复制它的对象。~~ `NSArray`将收到您传入的指针的副本。这意味着您将获得指向结构的指针的副本`CGColor`（是的，`CGColorRef`已经是指针）。因此，改变任何一个都不会对另一个产生任何影响。存储指向的指针`CGColorRef`似乎是唯一的方法，而不是使用`NSPointerArray`（仅适用于 iOS 6+）。

**编辑**：最终结果是创建一个包含一个位置（路径、颜色等）的所有信息的类，并存储一个指向该位置的指针。

# java - Getter 和 Setter 不工作？

> ID：12593490
> 
> 赞同：1
> 
> 时间：2012-09-26T01:51:12.800
> 
> 标签：java, android, getter-setter

我现在有两个类：RemindersDAO.java 和 ViewLocalReminders.java。

我正在尝试访问 ViewLocalReminders.java 中的变量，并尝试从 RemindersDAO.java 中调用它。我通过使用 getter/setter 方法组合来做到这一点。但是，由于某种原因，我的变量值在 getter 方法中一直设置为 0。这是代码：

**查看LocalReminders.java**

```
public class ViewLocalReminders extends SherlockListActivity {

private long reminderID;

    public void onCreate(Bundle SavedInstance) {

    reminderID = 16;
    setReminderID(reminderID);      

    }

    public void setReminderID(long id) {
        id = reminderID;
        System.out.println("Reminder ID Value in Setter: " + reminderID);
    }

    public long getReminderID() {
        return reminderID;
        System.out.println("Reminder ID Value in Getter: " + reminderID);
    }

} 
```

**提醒DAO.java**

```
public class RemindersDAO extends SQLiteOpenHelper {

    @SuppressWarnings("deprecation")
    public Cursor getRowByID(Activity activity) {
    String[] from = { _ID, NAME };

    ViewLocalReminders viewLocalReminders = new ViewLocalReminders();
    long reminderID = viewLocalReminders.getReminderID();
    System.out.println("Value of Reminder ID in RemindersDAO: " + reminderID);

    }

} 
```

这是我为所有 System.out.printlns 获得的输出：

1.  Setter 中的提醒 ID 值：16
2.  Getter 中的提醒 ID 值：0
3.  RemindersDAO 中的提醒 ID 值：0

很明显，在 setter 和 getter 方法之间发生了一些事情。在 setter 方法中，reminderID 的值是 16，应该是这样。但是，该值在 getter 方法中变为 0。因此，当我在 RemindersDAO.java 中调用 getter 方法时，该值仍然为 0。我在这里做错了什么？谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T01:54:00.483

这里：

```
public void setReminderID(long id) {
    id = reminderID;  //<-- wrong, should be the other way around
    System.out.println("Reminder ID Value in Setter: " + reminderID);
} 
```

你应该`reminderID = id`改用

还：

```
public void onCreate(Bundle SavedInstance) {

    reminderID = 16;           //one of these two lines..
    setReminderID(reminderID); //..should do it      

} 
```

无需设置`reminderId`两次

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T01:55:40.407

你的二传手应该是这样的：

```
 public void setReminderID(long id) {
    reminderID = id;
    System.out.println("Reminder ID Value in Setter: " + reminderID);
} 
```

你的`remainderID`变量应该在左边。你写的方式，id被设置为remindID。

另外，在你的吸气剂中：

```
public long getReminderID() {
    return reminderID;
    System.out.println("Reminder ID Value in Getter: " + reminderID);
} 
```

由于`System.out.println`是在返回之后，所以你不应该看到输出。Return 将在此处结束函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T01:55:12.140

你有

```
id = remainderID; 
```

它应该是

```
 remainderID = id; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T01:55:28.597

您对提醒 id 的分配是向后的

```
id = reminderID; 
```

应该读

```
reminderID = id; 
```

在你的`setReminderID`方法

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T01:56:40.550

```
public void setReminderID(long id) {
    this.reminderID = id;
    System.out.println("Reminder ID Value in Setter: " + reminderID);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-13T19:14:15.530

尝试使用这个

```
this.remainderId = id; 
```

代替

```
remainderId = id; 
```

在您的模型或域中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-26T01:58:10.870

您的 setter 方法似乎错误。您需要使用 IDE 的自动生成来创建这些方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-13T10:04:10.870

我看到你接受了答案。但是，我想我知道您的 getter-setter 错误的问题。这是关于订单和订单的问题......就像你正在一步一步地给出指示。

让我解释...

第一个，你的setter方法，犯了一个错误。（见标记的评论）

```
public void setReminderID(long id) {
        id = reminderID; // --> your argument is id. reminderId field value should be changed not the other way around.
        System.out.println("Reminder ID Value in Setter: " + reminderID);
    } 
```

这是正确的二传手。

```
public void setReminderID(long id) {
    reminderID = id; // --> "id" is your parameter and that's the reminderID's new value.
    System.out.println("Reminder ID Value in Setter: " + reminderID);
} 
```

接下来，关于吸气剂。getter 中存在错误的原因是您的顺序错误。（见标记的评论）

```
public long getReminderID() {
    return reminderID;
    System.out.println("Reminder ID Value in Getter: " + reminderID); // --> putting this line code after "return" results an error and therefore you won't be able to obtain a number or value!
} 
```

这是正确的吸气剂。仔细看看区别。

```
public long getReminderID() {
    System.out.println("Reminder ID Value in Getter: " + reminderID); // --> Anycode before "return" value will be fine.
    return reminderID; // --> Always put the "return" value at the last line within a getter method.
} 
```

我希望你可以在你未来的项目中使用这个更正，以防你在编程时需要应用 getter-setter 方法。请记住，这非常重要，因为代码的顺序很重要，并且知道您将值更改指向何处。问题？

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-09-27T03:07:39.887

谢谢你们的帮助。即使我遵循了你们所有的建议，我也无法弄清楚为什么我的 getter 和 setter 不起作用。我猜这与将reminderID 作为构造函数的参数接收的事实有关。无论哪种方式，我通过使用 Android 的 Bundle 并通过它将我的变量从一个活动转移到另一个活动来解决我的问题。

再次感谢您的所有帮助！:)

# sql - SQL Server：最大日期和内部联接

> ID：12593492
> 
> 赞同：6
> 
> 时间：2012-09-26T01:51:51.327
> 
> 标签：sql, database, windows, sql-server-2008, tsql

我有两张表，一张是任务列表。另一个包含这些任务的历史值。

我需要为每次检查生成最新事件（及其描述）的列表，只要它`Date_Executed`小于当前日期时间减去`Timeframe`（`TimeFrame`必须完成任务中的小时数，格式化以供使用`DATEADD`）。但前提是他们有一个`active = 1`.

表：**检查**

```
Check_id  description  TimeFrame active
1         Task One     -24       0
2         Task Two     -24       0
3         Task Forty   -48       1
4         Task Somehin -128      1 
```

表：**事件**

```
Event_id  Check_id   Comment     Date_Executed             User_Executed
1         1          NULL        2012-09-18 16:10:44.917   admin
2         1          NULL        2012-09-25 11:39:01.000   jeff
3         4          Failed      2012-09-25 13:20:09.930   steve
4         4          Half failed 2012-09-25 13:05:09.953   marsha
5         2          NULL        2012-09-25 14:02:24.000   marsha
6         3          NULL        2012-09-18 16:10:55.023   marsha 
```

到目前为止，我最好的解决方案是：

```
SELECT 
    a.[Date_Executed]
    a.[Check_id], 
    a.[Comments],
    b.[frequency], 
    b.[Check_id],
    b.[description]     
FROM 
    [checksdb].[dbo].events as a, 
    [checksdb].[dbo].checks as b
where 
    b.active = 1
    and a.[Date_Executed] < = dateadd(HOUR,b.[frequency],GETDATE())
    and a.Check_id = b.Check_id
order by Check_id, priority 
```

和

```
select MAX(date_Executed), Task_id from daily_check_events group by Task_id 
```

两者都没有得到我需要的东西，我真的可以使用一些帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T02:03:33.470

既然你是`SQL Server`支持`Common Table Expression`和`Window Function`。试试这个，

```
WITH latestEvents
AS
(
  SELECT  Event_id, Check_id, [Comment], Date_Executed, User_Executed,
          ROW_NUMBER() OVER(PARTITION BY Check_ID ORDER BY DATE_Executed DESC) 
              AS RowNum
  FROM    events
)
SELECT  a.[Check_id], a.[description],
        b.[Date_Executed], b.[Comment]
FROM    checks a
        INNER JOIN latestEvents b
            on a.check_ID = b.check_ID
WHERE   b.RowNum = 1 AND
        a.active = 1
        -- other conditions here 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!6/35cc8/8)

上述查询仅适用于支持`Window Functions`. 或者，使用下面适用于大多数 RDBMS 的查询

```
SELECT  a.Check_id, a.description,
        c.Date_Executed, c.Comment
FROM    checks a
        INNER JOIN
        (
          SELECT check_id, MAX(Date_Executed) maxExecuted
          FROM   events
          GROUP BY check_ID
        ) b ON a.check_ID = b.check_ID
        INNER JOIN events c
          ON c.check_ID = b.check_ID AND
             c.date_executed = b.maxExecuted
WHERE   a.active = 1 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!6/35cc8/13)

# python - “打印”附近的语法错误？

> ID：12593502
> 
> 赞同：0
> 
> 时间：2012-09-26T01:53:19.383
> 
> 标签：python, syntax, python-idle

谁能告诉我为什么这给我空闲时的语法错误？

```
def printTwice(bruce):
    print bruce, bruce 
```

SyntaxError：无效的语法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T01:54:56.557

检查正在使用的 Python 版本；该变量[`sys.version`](http://docs.python.org/library/sys.html#sys.version)包含有用的信息。

这在 Python 3.x 中是无效的，因为`print`它*只是一个普通函数*，因此需要括号：

```
# valid Python 3.x syntax ..
def x(bruce): print(bruce, bruce)
x("chin")

# .. but perhaps "cleaner"
def x(bruce):
    print(bruce, bruce) 
```

（Python 2.x 中的行为有所不同，[其中`print`有一个特殊语句](https://stackoverflow.com/questions/6182964/why-is-parenthesis-in-print-voluntary-in-python-2-7/6183002#6183002)。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T02:01:10.573

您似乎试图打印不正确。

您可以使用元组：

```
def p(bruce):
    print (bruce, bruce) # print((bruce, bruce)) should give a tuple in python 3.x 
```

或者您可以在 Python ~2.7 中的字符串中使用格式设置：

```
def p(bruce):
    print "{0}{1}".format(bruce, bruce) 
```

或者使用 Python 3 中的函数：

```
def p(bruce):
    print("{0}{1}".format(bruce, bruce)) 
```

# .htaccess - .htaccess 重定向，忽略查询字符串

> ID：12593503
> 
> 赞同：1
> 
> 时间：2012-09-26T01:53:23.717
> 
> 标签：.htaccess, mod-rewrite

我想在不查看查询字符串的情况下进行重定向，并且我的重定向结果也不需要附加查询字符串，因此我`?`在 RewriteRule 的末尾添加了一个。

我尝试了以下语法，但结果接近它。

```
RewriteCond %{QUERY_STRING} .* [NC]
RewriteRule ^exd\.asp$ http://www.example.com/index.php?r=p/consumer? [R=301,L] 
```

而且，我试图逃避第一个`?`，我需要它，但结果仍然相同。

```
RewriteRule ^exd\.asp$ http://www.example.com/index.php\?r=p/consumer? [R=301,L] 
```

结果：

```
http://www.example.com/index.php?r=p/consumer%3f 
```

我想搭车`%3f`。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T02:01:20.427

`?`如果目标中已有查询字符串，则无需在末尾附加 a 。只需这样做：

```
RewriteCond %{QUERY_STRING} .* [NC]
RewriteRule ^exd\.asp$ http://www.example.com/index.php?r=p/consumer [R=301,L] 
```

默认情况下，查询字符串会被附加，如下所示：

```
RewriteRule ^foo$ /bar [L] 
```

你请求`/foo?blah`，你得到`/bar?blah`

但是，如果您`?`的目标中有 a ，除非您有 ，否则不会附加查询字符串`QSA`，因此：

```
RewriteRule ^foo1$ /bar? [L]
RewriteRule ^foo2$ /bar?q=2 [L] 
```

你要求`/foo1?blah`，你得到`/bar`，你要求`/foo2?blah`，你得到`/bar?q=2`。如果您`QSA`在重写标志中包含 a ，则`&blah`附加到末尾。

# regex - 如何在 JSR223 预处理器中使用来自 JMeter 的 JSON 响应的详细信息？

> ID：12593506
> 
> 赞同：2
> 
> 时间：2012-09-26T01:53:36.923
> 
> 标签：regex, jmeter, jsr223

我正在使用 JMeter 2.7 对 Web 应用程序进行负载测试。我有一个 HTTP 请求采样器，它返回一个 JSON 文档，其中包含我想从中提取的两个值。为此，我将两个 RegEx PostProcessor 分配给具有以下配置的采样器：

```
Regular Expression Extractor
Apply to: Main Sample Only
Response Field to Check: Body
Reference Name: val_1
Regular Expression: "val_1": "(\S+)"
Template: $1$
Match No.: 1 
```

第二个的配置是一样的，只是替换`val_2`为`val_1`. 这些似乎应该起作用。

现在，我在后续的 HTTP 请求上还有一个 JSR223 PreProcessor 脚本，我想用它来转换我通过正则表达式获取的值。但是， 和 的输出`vars.get('val_1')`都是`vars.get('val_2')`空值。修改用户定义的变量和“应用到”设置并没有产生任何有用的结果。

谁能解释我做错了什么？如何在我的 JSR223 脚本中使用通过 RegEx 提取器检索到的数据？提前致谢。

**编辑 - 2012**
年 9 月 26 日有人要求我多解释一下结构，所以这里有一个大纲。

```
Thread Group
    Once Only Controller
        HTTP Sampler
            Regular Expression Extractor (for val_1)
            Regular Expression Extractor (for val_2)
    Some Additional Simple Controllers with HTTP Samplers Here
    Throughput Controller (80%)
        HTTP Sampler
            JSR223 PreProcessor (This is the PreProcessor in question)
            Regular Expression Extractor (to grab an unrelated value from the response)
    Some Additional Controllers with HTTP Samplers Here 
```

希望这更有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:17:57.013

你的正则表达式是“val_1”：“（\S+）”吗？

您可以在 Http 采样器之后添加一个调试采样器以检查是否定义了 2 个变量。为此，请添加一个树结果侦听器并查看调试采样器显示的内容。

# python - Python正则表达式大写unicode字

> ID：12593509
> 
> 赞同：5
> 
> 时间：2012-09-26T01:54:19.783
> 
> 标签：python, regex

我需要找到多种语言的缩写文本。当前的[正则表达式](http://pypi.python.org/pypi/regex)是：

```
import regex as re
pattern = re.compile('(?:[\w]\.)+', re.UNICODE | re.MULTILINE | re.DOTALL | re.VERSION1)
pattern.findall("U.S.A. u.s.a.") 
```

结果中不需要**usa**，我只需要大写文本。**[AZ]**不能以英语以外的任何语言工作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T02:05:57.590

您需要使用 Unicode 字符属性来匹配它们。`re`不支持字符属性，但支持[`regex`](http://pypi.python.org/pypi/regex)。

```
>>> regex.findall(ur'\p{Lu}', u'ÜìÑ')
[u'\xdc', u'\xd1'] 
```

# algorithm - 跨网络同步计数器

> ID：12593517
> 
> 赞同：4
> 
> 时间：2012-09-26T01:55:16.690
> 
> 标签：algorithm, networking, synchronization

我有两台可以通过串行连接相互通信的计算机。连接是通过无线网络进行的。两个系统之间的通信存在可变的、不断变化的延迟。在这两个系统上，我都有一个计数器运行时间，每毫秒递增 1。它们都在应用程序启动后立即启动。假设每台计算机在不同的时间启动。我如何与串行连接同步计数器，以便 systemA.counter 等于 systemB.counter 并且两个计数器同时增加（或尽可能接近）。

理想情况下，一旦同步，计数器只会慢慢地分开，以便每 3 或 4 千英寸我可以重新同步一次。

我正在寻找有关该主题的良好资源，例如算法、示例代码 (c/c++)，以及任何可以为我指明正确方向的东西。

**更新**

这是一个封闭的系统，没有互联网。出于所有意图和目的，除了通过无线链路打开串行线路之外，根本没有真正的协议。目前该链接是蓝牙，但我正在考虑将其移至 ZigBee Mesh。当前有 2 个节点，但如果我有 30 个节点都运行同一个应用程序，我希望它们全部同步。没有指定客户端/服务器，只有几个设备运行带有计数器的相同程序。我无法访问时间之类的东西，只有这个每毫秒递增一次的计数器以及我可以使用的任何算法。

一旦我能做到这一点，我想建立一个建议和映射系统，但要弄清楚节点之间的距离，我需要在设备上同步启动时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:23:35.087

如果您使用此计数器对系统中的事件进行排序，则应查看[矢量时钟](http://en.wikipedia.org/wiki/Vector_clock)或[Lamport 时间戳](http://en.wikipedia.org/wiki/Lamport_timestamps)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T03:55:16.923

显而易见的资源是 NTP，例如在[http://www.eecis.udel.edu/~mills/ntp.html](http://www.eecis.udel.edu/~mills/ntp.html)上记录了它，并在那里提供了链接。基本上，这使用时间戳来调整本地时钟运行的频率。该协议已经存在多年，并且一直是持续研究的主题——我看不到任何幻灯片，它们可以立即清楚地说明它是如何工作的。您可能会更好地查看是否已经有可用的 NTP 实现，而不是尝试自己重新实现它。

似乎（例如通过搜索）有一小部分人致力于时间同步算法，尤其是在无线传感器网络的背景下。除了搜索之外，一个起点是 [http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.85.2012](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.85.2012)上的调查论文- 传感器网络中的时间同步：一项调查 (2004)

# c++ - 如何为 xcode 安装 Openmpi？

> ID：12593524
> 
> 赞同：3
> 
> 时间：2012-09-26T01:55:46.083
> 
> 标签：c++, xcode, linker, mpi

我正在尝试在 xcode 4 中运行一些 MPI 程序。我通过键入从 MacPort 安装了 openmpi，`sudo port install openmpi`并且安装正常完成。然后我将 opt/local/include/openmpi 添加到我的用户标题搜索路径中，将“libmpi.dylib”和“libmpi_cxx.dylib”拖到我的项目中。

但是当我尝试运行该程序时，我收到以下错误消息：

```
Undefined symbols for architecture x86_64:
  "_MPI_Comm_accept", referenced from:
      MPI::Intracomm::Accept(char const*, MPI::Info const&, int) const in main.o
  "_MPI_Comm_connect", referenced from:
      MPI::Intracomm::Connect(char const*, MPI::Info const&, int) const in main.o
  "_MPI_Comm_disconnect", referenced from:
      MPI::Comm::Disconnect() in main.o
  "_MPI_Comm_get_errhandler", referenced from:
      MPI::Comm::Get_errhandler() const in main.o
  "_MPI_Comm_set_errhandler", referenced from:
      MPI::Comm::Set_errhandler(MPI::Errhandler const&) const in main.o
  "_MPI_Comm_spawn", referenced from:
      MPI::Intracomm::Spawn(char const*, char const**, int, MPI::Info const&, int) const in main.o
      MPI::Intracomm::Spawn(char const*, char const**, int, MPI::Info const&, int, int*) const in main.o
  "_MPI_Comm_spawn_multiple", referenced from:
      MPI::Intracomm::Spawn_multiple(int, char const**, char const***, int const*, MPI::Info const*, int) in main.o
      MPI::Intracomm::Spawn_multiple(int, char const**, char const***, int const*, MPI::Info const*, int, int*) in main.o
  "_MPI_Grequest_complete", referenced from:
      MPI::Grequest::Complete() in main.o
  "_MPI_Op_commutative", referenced from:
      MPI::Op::Is_commutative() const in main.o
  "_MPI_Reduce_local", referenced from:
      MPI::Op::Reduce_local(void const*, void*, int, MPI::Datatype const&) const in main.o
  "_MPI_Win_call_errhandler", referenced from:
      MPI::Win::Call_errhandler(int) const in main.o
  "_MPI_Win_get_errhandler", referenced from:
      MPI::Win::Get_errhandler() const in main.o
  "_MPI_Win_set_errhandler", referenced from:
      MPI::Win::Set_errhandler(MPI::Errhandler const&) const in main.o
  "_ompi_mpi_comm_null", referenced from:
      MPI::Intracomm::Intracomm(ompi_communicator_t*) in main.o
      MPI::Graphcomm::Graphcomm(ompi_communicator_t* const&) in main.o
      MPI::Cartcomm::Cartcomm(ompi_communicator_t* const&) in main.o
  "_ompi_mpi_comm_world", referenced from:
      _main in main.o
  "_ompi_mpi_double", referenced from:
      _main in main.o
  "_ompi_mpi_op_sum", referenced from:
      _main in main.o
  "_ompi_op_set_cxx_callback", referenced from:
      MPI::Op::Init(void (*)(void const*, void*, int, MPI::Datatype const&), bool) in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我在上述安装过程中遗漏了什么吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-07-20T20:40:06.893

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-13T22:58:22.410

我遇到了同样的问题，当我从源代码编译 openmpi 时，添加了头文件和库搜索路径，但忘记将库作为链接器标志添加到构建设置中。添加它们解决了这个问题。您可以键入`mpicc –showme`以查看 mpi 运行所需的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T17:48:01.880

或者只需键入 mpic++ 而不是 mpicc。这对我有用；）

# ruby-on-rails - 如何从 PostgreSQL 数据库中删除唯一约束？

> ID：12593526
> 
> 赞同：0
> 
> 时间：2012-09-26T01:55:46.697
> 
> 标签：ruby-on-rails, postgresql

我正在尝试编写（Ruby）脚本，它将删除我的 PostgreSQL 数据库中的所有外键和唯一约束，然后重新添加它们。

FK 部分似乎工作正常。

但是，删除和重新创建唯一约束不起作用。

我认为原因是当创建唯一约束时，PostgreSQL 会随之创建一个索引，并且在删除唯一约束时该索引不会自动删除。因此，当脚本尝试重新添加唯一约束时，我收到一个错误，例如...

```
PG::Error: ERROR:  relation "unique_username" already exists
: ALTER TABLE users ADD CONSTRAINT unique_username UNIQUE (username) 
```

事实上，当我查看 pgAdmin GUI 实用程序中的数据库时，该索引存在。

问题是，我如何在我的脚本中找到它并删除它？

* * *

这是我的脚本...

`manage_constraints.rake`

```
namespace :journal_app do

  desc 'Drop constraints'
  task :constraints_drop => :environment do

    sql = %Q|
SELECT
  constraint_name, table_catalog, table_name
FROM
  information_schema.table_constraints
WHERE
  table_catalog = 'journal_app_#{Rails.env}'
AND
  constraint_name NOT LIKE '%_pkey'
AND
  constraint_name NOT LIKE '%_not_null';
|

    results = execute_sql(sql)

    results.each do |row|
      puts "Dropping constraint #{row['constraint_name']} from table #{row['table_name']}."
      execute_sql("ALTER TABLE #{row['table_name']} DROP CONSTRAINT #{row['constraint_name']}")
    end

  end

  # --------------------------------------------------------------------------------------------------------------------

  desc 'Drops constraints, then adds them'
  task :constraints_add => :environment do

    Rake::Task['journal_app:constraints_drop'].invoke

    UNIQUE_KEYS = [
        {
            :name => 'unique_username',
            :table => 'users',
            :columns => ['username']
        },
        {
            :name => 'unique_email',
            :table => 'users',
            :columns => ['email']
        }
    ]

    FKs = [
        {
            :name => 'fk_entries_users',
            :parent_table => 'users',
            :child_table => 'entries',
            :on_delete => 'CASCADE'
        },
        {
            :name => 'fk_entries_entry_tags',
            :parent_table => 'entries',
            :child_table => 'entry_tags',
            :on_delete => 'CASCADE'
        },

        # etc...

    ]

    UNIQUE_KEYS.each do |constraint|
      sql = "ALTER TABLE #{constraint[:table]} ADD CONSTRAINT #{constraint[:name]} UNIQUE (#{constraint[:columns].join(', ')})"
      puts "Adding unique constraint #{constraint[:name]} to table #{constraint[:table]}."
      puts '  SQL:'
      puts "    #{sql}"
      execute_sql(sql)
    end

    FKs.each do |fk|
      sql = %Q|
ALTER TABLE #{fk[:child_table]} ADD CONSTRAINT #{fk[:name]} FOREIGN KEY (#{fk[:parent_table].singularize}_id)
  REFERENCES #{fk[:parent_table]} (id)
    ON UPDATE NO ACTION ON DELETE #{fk[:on_delete]}|.strip!
      puts "Adding foreign key #{fk[:name]}."
      puts '  SQL:'
      puts "    #{sql}"
      execute_sql(sql)
    end

  end

end

def execute_sql(sql)
  ActiveRecord::Base.connection.execute(sql)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:41:50.377

首先，为什么要做这样的事情？这有一种“我已经决定解决问题 X 的 Y 方案，并且我正在询问的解决方案 Y 有问题”的感觉——真正的答案是“使用解决方案 Z 而不是解决方案 Y 来解决问题 X”。换句话说，试着解释你遇到的根本问题，可能会有更好的方法来解决它。

如果必须这样做，请查询*不是*`pg_catalog.pg_index inner join pg_class on pg_class.oid = pg_index.indexrelid`的索引并排除任何带有. *`indisprimary``EXISTS (SELECT 1 FROM pg_constraint on pg_index.indrelid = pg_constraint.conindid)`*

 *例如：

```
SELECT pg_class.relname
FROM pg_index INNER JOIN pg_class ON (pg_class.oid = pg_index.indexrelid) 
INNER JOIN pg_namespace ON (pg_class.relnamespace = pg_namespace.oid) 
WHERE NOT EXISTS (
    SELECT 1 FROM pg_constraint WHERE pg_index.indrelid = pg_constraint.conindid
) 
AND pg_index.indisprimary = 'f'
AND pg_namespace.nspname NOT LIKE 'pg_%'; 
```

请注意，此类查询可能会在任何主要版本转换中中断，因为`pg_catalog`不能保证跨版本保留相同的模式。查询 Pg 版本并在必要时使用特定于版本的查询。听起来很痛苦？是的，但通常不需要，你只是在做一些奇怪的事情。

对于大多数用途来说，非常稳定[`information_schema`](http://www.postgresql.org/docs/current/static/information-schema.html)就足够了。*

# hadoop - 使用 pig 或 hadoop 寻找均值

> ID：12593527
> 
> 赞同：6
> 
> 时间：2012-09-26T01:56:23.623
> 
> 标签：hadoop, apache-pig

我有一个巨大的表格文本文件

数据保存在目录data/data1.txt、data2.txt等

```
merchant_id, user_id, amount
1234, 9123, 299.2
1233, 9199, 203.2
 1234, 0124, 230
 and so on.. 
```

我想做的是为每个商家，找到平均金额..

所以基本上最后我想将输出保存在文件中。就像是

```
 merchant_id, average_amount
  1234, avg_amt_1234 a
  and so on. 
```

我如何计算标准偏差？

很抱歉问了这么一个基本的问题。：（ 任何帮助，将不胜感激。 ：）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-27T10:08:35.300

Apache PIG 非常适合此类任务。参见示例：

```
inpt = load '~/pig_data/pig_fun/input/group.txt' as (amnt:double, id:chararray,c2:chararray);
grp = group inpt by id;
mean = foreach grp {
    sum = SUM(inpt.amnt);
    count = COUNT(inpt);
    generate group as id, sum/count as mean, sum as sum, count as count;
}; 
```

请特别注意 amnt 列的数据类型，因为它将影响 SUM 函数 PIG 将调用的实现。

PIG 还可以做一些 SQL 做不到的事情，它可以在不使用任何内部连接的情况下将平均值放在每个输入行上。如果您使用标准差计算 z 分数，这将非常有用。

```
 mean = foreach grp {
    sum = SUM(inpt.amnt);
    count = COUNT(inpt);
    generate FLATTEN(inpt), sum/count as mean, sum as sum, count as count;
}; 
```

FLATTEN(inpt) 可以解决问题，现在您可以访问对组平均值、总和和计数做出贡献的原始金额。

**更新 1：**

[计算方差和标准差](http://en.wikipedia.org/wiki/Standard_deviation)：

```
inpt = load '~/pig_data/pig_fun/input/group.txt' as (amnt:double, id:chararray, c2:chararray);
grp = group inpt by id;
mean = foreach grp {
        sum = SUM(inpt.amnt);
        count = COUNT(inpt);
        generate flatten(inpt), sum/count as avg, count as count;
};
tmp = foreach mean {
    dif = (amnt - avg) * (amnt - avg) ;
     generate *, dif as dif;
};
grp = group tmp by id;
standard_tmp = foreach grp generate flatten(tmp), SUM(tmp.dif) as sqr_sum; 
standard = foreach standard_tmp generate *, sqr_sum / count as variance, SQRT(sqr_sum / count) as standard; 
```

它将使用 2 个工作。还没想好怎么做，嗯，需要多花点时间在上面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T02:27:52.300

所以你想要什么？您想要正在运行的 java 代码还是抽象的 map-reduce 进程？对于第二个：

地图步骤：

```
record -> (merchant_id as key, amount as value) 
```

减少步骤：

```
(merchant_id, amount) -> (merchant_id, aggregate the value you want) 
```

与减少步骤一样，您将获得具有相同键的记录流，您可以做几乎所有可以做的事情，包括平均值、方差。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-01T07:15:24.463

您可以一步计算标准偏差；使用公式

```
var=E(x^2)-(Ex)^2
inpt = load '~/pig_data/pig_fun/input/group.txt' as (amnt:double,  id:chararray, c2:chararray);
grp = group inpt by id;
mean = foreach grp {
    sum = SUM(inpt.amnt);
    sum2 = SUM(inpt.amnt**2);
    count = COUNT(inpt);
    generate flatten(inpt), sum/count as avg, count as count, sum2/count-    (sum/count)**2 as std;
}; 
```

而已！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-10T09:33:58.303

我仅在 1 个循环中计算了所有统计数据（最小值、最大值、平均值和标准差）。FILTER_DATA 包含数据集。

```
 GROUP_SYMBOL_YEAR = GROUP FILTER_DATA BY (SYMBOL, SUBSTRING(TIMESTAMP,0,4));
STATS_ALL = FOREACH GROUP_SYMBOL_YEAR { 
    MINIMUM = MIN(FILTER_DATA.CLOSE);
    MAXIMUM = MAX(FILTER_DATA.CLOSE);
    MEAN = AVG(FILTER_DATA.CLOSE);
    CNT = COUNT(FILTER_DATA.CLOSE);
    CSQ = FOREACH FILTER_DATA GENERATE CLOSE * CLOSE AS (CC:DOUBLE);
    GENERATE group.$0 AS (SYMBOL:CHARARRAY), MINIMUM AS (MIN:DOUBLE), MAXIMUM AS (MAX:DOUBLE), ROUND_TO(MEAN,6) AS (MEAN:DOUBLE), ROUND_TO(SQRT(SUM(CSQ.CC) / (CNT * 1.0) - (MEAN * MEAN)),6) AS (STDDEV:DOUBLE), group.$1 AS (YEAR:INT);
}; 
```

# html - 使用 css/javascript 进行图像遮罩

> ID：12593528
> 
> 赞同：0
> 
> 时间：2012-09-26T01:56:33.420
> 
> 标签：html, css

是否可以将 div 转换为这种[形状](http://i279.photobucket.com/albums/kk148/Exiled_Gundam/ex-1.png)然后用图像填充它？或者更好地将图像转换为该形状？都使用 CSS 或 Javascript。然后以这种[方式](http://i279.photobucket.com/albums/kk148/Exiled_Gundam/ex-2.jpg)

排列它们中的多个，我打算根据第二张图片将形状分组为几个环。至于图片，它将是动态的，所以不能真正预先剪切它们。

*编辑：我发现了我真正想要的效果。其实就是掩饰。在 webkit 中，这个 css 属性：-webkit-mask-box-image 效果很好（我也可以使用 .png 图像作为遮罩），但是当我尝试为 firefox 遮罩（使用 Illustrator 生成的 .svg 文件）时，它没有t 似乎工作。相同的 .svg 文件在 Chrome 中使用 -webkit-mask-box-image css 属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:19:13.443

对的，这是可能的。即使不使用任何 JavaScript 或浏览器特定属性。

# *[演示](http://dabblet.com/gist/3786016)*

我已经对其进行了测试，它适用于所有当前版本的 Chrome、IE、FF、Opera、Safari（在 Windows 7 上）。

这个想法是有多个带有不同角度切片的轮子（使用倾斜变换获得角度；切片也使用旋转变换进行旋转）。内轮覆盖外轮的中心部分。

我制作的版本非常简单，有两个轮子，内轮有 8 个图像（这意味着内轮的每个切片有 360°/8 = 45°），外轮有 12 个图像（=>外层的每一片都有 360°/12 = 30°）。

相关**HTML**：

```
<div class='picture-wheel'>
    <div class='outer-wheel wheel'>
        <div class='slice'><div class='bg'></div></div>
        <!-- the rest of the slices, 11 more for this demo -->
        <div class='inner-wheel wheel'>
            <div class='slice'><div class='bg'></div></div>
            <!-- the rest of the slices, 7 more for this demo -->
            <div class='cover-wheel wheel'></div>
        </div>
    </div>
</div> 
```

相关**CSS**：

```
.wheel {
    overflow: hidden;
    position: relative;
    border-radius: 50%;
    box-shadow: 0 0 1em;
}
.picture-wheel {
    width: 30em; height: 30em;
    margin: 3em auto 0;
}
.slices-wrapper { 
    position: absolute;
    width: 100%; height: 100%;
}
.slice {
    overflow: hidden;
    position: absolute;
    bottom: 50%; right: 50%;
    transform-origin: 100% 100%;
}
.outer { width: 30em; height: 30em; }
.inner-wheel {
    transform: rotate(7.5deg);
    width: 21em; height: 21em;
    margin: 4.5em;
}
.cover-wheel {
    width: 12em; height: 12em;
    margin: 4.5em;
    box-shadow: inset 0 0 1em;
    background: white;
}
.bg {
    border-radius: 50%;
    background-position: 50% 0;
    background-repeat: no-repeat;
    background-size: 8em 6em;
}
.outer-wheel > .slice {
    width: 15em; height: 15em;
    transform: skewY(60deg);
}
.outer-wheel > .slice:nth-child(2) { transform: rotate(30deg) skewY(60deg); }
.outer-wheel > .slice:nth-child(3) { transform: rotate(60deg) skewY(60deg); }
.outer-wheel > .slice:nth-child(4) { transform: rotate(90deg) skewY(60deg); }
.outer-wheel > .slice:nth-child(5) { transform: rotate(120deg) skewY(60deg); }
.outer-wheel > .slice:nth-child(6) { transform: rotate(150deg) skewY(60deg); }
.outer-wheel > .slice:nth-child(7) { transform: rotate(180deg) skewY(60deg); }
.outer-wheel > .slice:nth-child(8) { transform: rotate(-150deg) skewY(60deg); }
.outer-wheel > .slice:nth-child(9) { transform: rotate(-120deg) skewY(60deg); }
.outer-wheel > .slice:nth-child(10) { transform: rotate(-90deg) skewY(60deg); }
.outer-wheel > .slice:nth-child(11) { transform: rotate(-60deg) skewY(60deg); }
.outer-wheel > .slice:nth-child(12) { transform: rotate(-30deg) skewY(60deg); }
.outer-wheel > .slice .bg {
    width: 30em; height: 30em;
    transform: skewY(-60deg) rotate(-15deg);
}
.outer-wheel > .slice .bg {
    background-image:
        url(image-for-first-slice-outer.jpg);
}
.outer-wheel > .slice:nth-child(2) .bg {
    background-image:
        url(image-for-second-slice-outer.jpg);
}
/* background images for the other slices of the outer wheel */
.inner-wheel > .slice {
    width: 10.5em; height: 10.5em;
    transform: skewY(45deg);
}
.inner-wheel > .slice:nth-child(2) { transform: rotate(45deg) skewY(45deg); }
.inner-wheel > .slice:nth-child(3) { transform: rotate(90deg) skewY(45deg); }
.inner-wheel > .slice:nth-child(4) { transform: rotate(135deg) skewY(45deg); }
.inner-wheel > .slice:nth-child(5) { transform: rotate(180deg) skewY(45deg); }
.inner-wheel > .slice:nth-child(6) { transform: rotate(-135deg) skewY(45deg); }
.inner-wheel > .slice:nth-child(7) { transform: rotate(-90deg) skewY(45deg); }
.inner-wheel > .slice:nth-child(8) { transform: rotate(-45deg) skewY(45deg); }
.inner-wheel > .slice .bg {
    width: 21em; height: 21em;
    transform: skewY(-45deg) rotate(-22.25deg);
}
.inner-wheel > .slice .bg {
    background-image:
        url(image-for-first-slice-inner.jpg);
}
.inner-wheel > .slice:nth-child(2) .bg {
    background-image:
        url(image-for-second-slice-inner.jpg);
}
/* background images for the other slices of the inner wheel */ 
```

* * *

另一个略有不同的增强版本：

# *[演示](http://dabblet.com/gist/3786602)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:54:27.833

可以尝试使用 Canvas 元素并绘制

[http://jsfiddle.net/m6QgV/6/](http://jsfiddle.net/m6QgV/6/)

这是一个例子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T03:03:50.523

看看 CSS3 转换。您应该能够使用标准矩阵变换（类似于在 OpenGL 或 DirectX 中的方式）来完成。

# android - Android - 从 Activity 启动小部件

> ID：12593532
> 
> 赞同：0
> 
> 时间：2012-09-26T01:57:00.530
> 
> 标签：android, android-widget, android-activity, android-appwidget

所以，小部件已经添加到屏幕上，我想知道是否有办法从活动中去/启动小部件？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:06:23.063

简单，通过调用破坏您的活动：

```
finish(); 
```

=========

# 编辑

所以基本上你需要一个像主页按钮一样的功能。您的应用程序将置于后台并显示主屏幕。

```
moveTastToBack(true); 
```

或者

```
Intent i = new Intent();
i.setAction(Intent.ACTION_MAIN);
i.addCategory(Intent.CATEGORY_HOME);
this.startActivity(i); 
```

# linux - 如何监控linux上的各种进程

> ID：12593534
> 
> 赞同：1
> 
> 时间：2012-09-26T01:57:24.170
> 
> 标签：linux, bash

我的应用程序由 4 个独特的进程组成。出于 HA 的原因，我将启动每个进程的 3 个实例，以便每个进程的 2 个实例将在单个 linux 主机上运行，​​而另一个实例将在不同的 linux 主机上运行。我正在尝试编写一个监视脚本（bash 脚本），它会定期轮询这些进程。我的主要挑战是编写一个依赖于主机名和进程名的脚本听起来很笨拙。例如，我不想编写一个脚本来监视进程-A-1、进程-B-1、进程-A-2、进程-B-2 在具有 IP 地址 A 和进程-A-3 的 Linux 主机上IP 主机地址 B.

编写独立于主机和进程名称的监视脚本的一种方法是，当这些进程中的每一个启动时，它们都会创建一个互斥体名称。例如，process-A-1 将创建一个名为 mutex.process-A-1 的互斥体，而 process-A-2 将创建一个名为 mutex.process-A-2 的互斥体。然后脚本所要做的就是在系统上查找名为 mutex.process-A* 的互斥锁。然后该脚本可以使用 ps 命令检查这些进程是否正在运行。

我的问题是与互斥体名称耦合好吗？有没有另一种方法可以在 linux 上解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:50:13.950

我会亲自编写一个 bash 脚本，在后台运行所有这些进程，然后您可以在调用它们后直接存储它们的 PID，`process1_pid=$!`在将每个进程发送到后台后存储，然后触发另一个脚本以使用这些 pid 进行监视。

获取他们的 PID 的其他方法是使用`jobs`将列出您设置到后台的所有作业的命令，将列出您在后台`jobs -p`拥有的所有 PID。您还可以利用作业来了解它们是否仍在运行。

[http://www.gnu.org/software/bash/manual/bashref.html#Job-Control](http://www.gnu.org/software/bash/manual/bashref.html#Job-Control)

我将从那里开始，如果它更复杂并且您的流程是从其他地方创建的，您始终可以使用特定用户来运行它们并用于`ps -u`按用户过滤它们。

# ruby-on-rails - RABL 将 ActiveRecord 时间戳或日期时间呈现为数字而不是字符串

> ID：12593535
> 
> 赞同：2
> 
> 时间：2012-09-26T01:57:44.163
> 
> 标签：ruby-on-rails, json, sinatra, rabl

我目前正在从 ActiveRecord 切换`as_json`到 RABL 以生成 API。

`as_json`一直在我的模型中将时间戳呈现为格式的字符串`2012-09-16T22:14:11+00:00`。然而，当我切换到 RABL 时间戳开始呈现为像纪元一样`1347926218.084763000`（注意这些日期来自两个不同的对象，不应该是相等的）。有没有办法强制字符串格式？

我的 .rabl 模板非常简单：

```
object @person
attributes :id, :created_on, :name 
```

我得到：

```
{"id":3,"created_on":1347926218.084763000,"name":"fred"} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T19:05:16.940

```
 object @person
   node(:id){|person|(person.id)}
   node(:created_on){|person|(person.created_on.strftime(%d,%m,%Y)}
   node(:name){|person|(person.name)}
 end 
```

或尝试

```
 object @person
   attributes :id, :name
   node(:created_on){|person|(person.created_on.strftime(%d,%m,%Y)}
 end 
```

您可以在许多网站上找到更多 .strftime() 选项。它必须用于 :date 对象类型。您可以使用其选项自定义日期输出。我正在为一些 json 输出处理自定义节点，并且正在努力学习这一点！

如果您需要按特定顺序的属性，我会使用带节点的属性，因为属性似乎“浮动到创建的 json 对象的顶部”。

# twitter-bootstrap - 1180 像素的 twitter 引导程序

> ID：12593536
> 
> 赞同：0
> 
> 时间：2012-09-26T01:57:47.113
> 
> 标签：twitter-bootstrap

我正在使用 twitter bootstrap，需要它是 1180 像素宽，而不是默认 980 像素。我已经手动更改了 css，使得所有 .span、.offset 和 .container 元素都以 80 而不是 60 的倍数出现。到目前为止，这看起来不错。这种方法会随时咬我吗？

顺便说一句 1\. 我知道响应式引导选项，但它让我的网站在 ipad 上看起来很糟糕。2\. 因为得到了奇怪的结果，所以也不能少做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:07:50.847

如果您想通过简单地使用 git 进行更新，这可能会咬到您。更好的方法可能是使用这个[Bootstrap 定制站点](http://twitter.github.com/bootstrap/customize.html)

如果你不能使用 LESS 并且你确定你的计算是正确的，那么我会将我的自定义 CSS 放在一个单独的样式表中，包含在 bootstrap.css 之后，但在 bootstrap-responsive.css 之前。这样自定义文件将覆盖默认 css，并且您不必编辑引导程序本身。

您不必通过引导程序进行挖掘来进行自己的编辑，并且可以轻松地更新引导程序。

# css - 为什么我的 CSS 媒体查询会破坏样式？

> ID：12593538
> 
> 赞同：0
> 
> 时间：2012-09-26T01:58:14.053
> 
> 标签：css, media-queries, fluid-layout

我试图让我的侧边栏流畅，以便它随着浏览器窗口调整，一切似乎都很好，除了添加媒体查询后，我的 CSS 样式中断了，但是当我把查询拿走时，它是回到我的样式表中的规范样式。有人可以看看我的代码并告诉我我做错了什么吗？提前致谢！

顺便说一句，当我将第二个结尾大括号添加到#rightandoverview 媒体查询时，样式会恢复到应有的方式，但流动性不起作用。会是什么呢？

```
#righthandoverview {
position: absolute;
top: 91px;
right: 0px;
width: 20%;
height:215px;
background-color: white;
webkit-box-shadow: 0px 4px 5px -5px #777;
-moz-box-shadow: 0px 4px 5px -5px #777;
box-shadow: 0px 4px 5px -5px #777;
}

@media screen and (max-width:830px) and (min-width:100px) {
#righthandoverview {
    float: left;
    width: 30%;
    background-color: yellow;
    margin-top: 5px;

}

#righthandoverview ul {
position: absolute;
display: inline;
float: left;
font-family: klavika-light;
list-style-type: none;
text-decoration: none;
white-space: nowrap;
}

@media screen and (max-width:830px) and (min-width:100px) {
#righthandoverview ul {
    float:left;
    width:30%;
    background-color: yellow;
    margin-top: 10px;

}
}

#righthandoverview ul li > a {
display: inline;
text-decoration: none;
color:#8BAFDA;
}   

#righthandoverview ul li {
padding-bottom: 6px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:03:43.090

你在下面的代码中错过了一个括号，我已经添加了它。

```
 @media screen and (max-width:830px) and (min-width:100px) {
        #righthandoverview {
            float: left;
            width: 30%;
            background-color: yellow;
            margin-top: 5px;

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:42:44.760

看起来您缺少一个括号来结束您的第一个媒体查询

```
@media screen and (max-width:830px) and (min-width:100px) {
#righthandoverview {
    float: left;
    width: 30%;
    background-color: yellow;
    margin-top: 5px;

}

#righthandoverview ul {
position: absolute;
display: inline;
float: left;
font-family: klavika-light;
list-style-type: none;
text-decoration: none;
white-space: nowrap;
}
} 
```

# javascript - HTML 模板如何适应后端语言和数据库？

> ID：12593541
> 
> 赞同：1
> 
> 时间：2012-09-26T01:58:28.397
> 
> 标签：javascript, python, templates, web-applications

如果这个问题不够具体，我深表歉意，但我确实需要一些帮助来理解这个概念。我一直在研究许多 Javascript 库，包括 JQuery、MooTools、Backbone、Underscore、Handlebars、Mustache 等——还有 Node.js 和 Meteor（我知道所有这些都有不同的用途）。我对每个功能都有一个基本概念，但我的问题主要集中在模板库上。

我认为一般的想法是模板将由从服务器检索的 JSON 对象填充。但是，我很困惑 JSON 对象是如何形成的，以及它是否可以以另一种方式进入后端以更新数据库。如果这是不正确的，请纠正我。

举一个更可靠的例子，假设我在 Linux 上运行 Apache，并且使用 MongoDB 作为数据库，python 作为我的主要语言。所有这些组件如何与模板库以及彼此交互？

例如，如果我有一个包含表单的 HTML 文件，并且操作将设置为某个 python 脚本；该脚本是否必须检索字段，验证它们，然后在数据库中更新它们？如果它是 MySQL，我必须编写一条 SQL 语句来更新它，但使用 Mongo 会不会有所不同/更容易，因为它是基于 BSON/JSON 的？

对于另一个示例，假设我有一个 view-account.html 页面需要从数据库中提取用户信息，它将以何种形式提取信息以及如何将其填充到模板中？我猜我必须有一个 python 脚本从数据库中提取信息，创建一个 JSON 对象，并使用它来填充 html 模板中的字段。

我知道有一些网络框架可以简化这个过程，请提出任何你会推荐的建议；但是，我真的很想了解这些组件如何交互的概念。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:09:20.647

显然有很多方法可以一起工作，但听起来你有（a）正确的想法。一般前端处理 JSON，服务器提供 JSON。什么在消耗或提供这些响应是无关紧要的；您不必担心 Mongo 是您的数据库，或者下划线正在处理您的模板。

将您的前端和后端视为两个完全独立的应用程序（这几乎是真的）。忽略您的前端代码和模板可能来自处理后端的同一台机器这一事实。您的后端从事持久数据的业务，而您的前端则从事显示数据的业务。

回复：使用 JSON/BSON 的 Mongo；它使用与前端相同的语言进行交流的事实是红鲱鱼。无论如何，您的 DB 层应该将其抽象出来，因此您只是使用 Python dicts/tuples/etc 与数据库对话。

> 我猜我必须有一个 python 脚本从数据库中提取信息，创建一个 JSON 对象，并使用它来填充 html 模板中的字段。

发现 ：）

# ios - iOS 6 MPMoviePlayerViewController 和 presentMoviePlayerViewControllerAnimated Rotation

> ID：12593542
> 
> 赞同：4
> 
> 时间：2012-09-26T01:58:35.913
> 
> 标签：ios, iphone, ios6, iphone-5

在以前的 iOS 版本中，我们的视频会自动旋转，但在 iOS 6 中，情况不再如此。我知道 presentMoviePlayerViewControllerAnimated 之前就是为此而设计的，但我怎么能告诉 MPMoviePlayerViewController 自动旋转呢？

```
MPMoviePlayerViewController *moviePlayer = [[MPMoviePlayerViewController alloc] initWithContentURL:url];
[self presentMoviePlayerViewControllerAnimated:moviePlayer]; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T12:20:34.297

在 appdelegate.m 中：

```
- (NSUInteger) application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window {
    if ([[self.window.subviews.lastObject class].description isEqualToString:@"MPMovieView"]) {
        return UIInterfaceOrientationMaskAllButUpsideDown;
    }
    else {
        return UIInterfaceOrientationMaskPortrait;
    }
} 
```

有点hack，但效果很好......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T18:48:26.577

我刚刚遇到了同样的问题。James Chen 的解决方案是正确的，但我最终做了一些更简单但也有效的事情 - 在我的应用程序委托中覆盖 application:supportedInterfaceOrientationsForWindow 并返回 allButUpsideDown 如果我的 rootView 控制器以模态方式呈现 MPMoviePlayerViewController。不可否认，这是一个 hack，可能并不适合所有情况，但让我不必更改所有视图控制器：

```
- (NSUInteger) application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window {
    return [rootViewController.modalViewController isKindOfClass:MPMoviePlayerViewController.class ] ? UIInterfaceOrientationMaskAll : UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-26T02:45:17.437

这不限于`MPMoviePlayerViewController`. 从 iOS 6 开始，自动旋转已更改。请参阅[iOS 6 中的 Autorotate 有奇怪的行为](https://stackoverflow.com/questions/12526054/autorotate-in-ios-6-has-strange-behaviour)。

要使您的应用程序表现得像 iOS 6 之前的版本，您必须使应用程序支持所有方向（`UISupportedInterfaceOrientations`在 plist 中编辑），然后对于不支持旋转的所有其他视图控制器，重写此方法以返回 NO：

```
- (BOOL)shouldAutorotate {
    return NO;
} 
```

默认情况下`MPMoviePlayerViewController`支持所有方向，所以这应该足以让它工作。

# recursion - LISP 只检索列表项的第一个元素

> ID：12593547
> 
> 赞同：0
> 
> 时间：2012-09-26T01:59:42.177
> 
> 标签：recursion, lisp, clisp

我有：

```
(defun getTotalValue(pack)
  (cond ((null pack) 0)
    (t (+ (car (car pack)))) (getTotalValue (cdr pack))
  )
) 
```

据我了解，这会将列表中项目的所有第一个元素相加。测试函数调用将是：

```
(getTotalValue '((10 c u) (3 s u) (5 h d) (7 s d) (12 h u))) 
```

但是，当我运行上面的代码时，它只打印出列表中第一项的第一个元素，`10`. 为什么不将所有项目的第一个元素相加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:05:16.093

你有括号问题 - 两个错位的右括号之后`(car (car pack))`，所以`cond`表达式在那里终止并且递归发生但结果被丢弃。

```
(defun getTotalValue (pack)
 (cond ((null pack) 0)
       (t (+ (car (car pack)) (getTotalValue (cdr pack)))))) 
```

# entity-framework - 我应该如何编写转换数据的实体框架迁移（最好使用 DbContext）？

> ID：12593553
> 
> 赞同：8
> 
> 时间：2012-09-26T02:01:02.913
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

假设我的对象有一个 Name 字段，我希望将其拆分为 FirstName 和 LastName 字段。或者它有一个地址字符串，我正在添加需要地理编码的 Lat 和 Lng 字段。等等等等。

我希望能够在 Up() 和 Down() 方法中访问我的 DbContext，但我所能找到的（除了内置函数）是 .Sql() 调用。这足以添加和删除列，但不足以将现有数据转换为新格式。

在 Up() 调用中引用我的 DbContext 是否安全？或者是否有另一种推荐的模式来实现需要更多 SQL 的迁移？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-10T18:53:19.353

与其尝试将名称拆分为两个不同的字段，不如重新考虑您的迁移。有时它可能是最好的上演。我可以想到两种方法来执行您的转换。

**迁移路径 #1：新字段，然后删除旧字段**

1.  为 FirstName 和 LastName 的新字段创建迁移，在 Up() 方法中，您仍然有 Name 字段，将其拆分，插入 First 和 Last 字段。
2.  创建另一个迁移以删除旧的名称字段。

**迁移路径 #2：重新调整用途和重命名**

1.  创建一个添加 LastName 字段的迁移，并将 Name 重命名为 FirstName，移动姓氏数据，修改重命名的 First/Name 字段以仅保存名字。

两种路径都有优点和缺点。无论您的转换有多复杂，您都应该能够将其分解为逻辑阶段以实现目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:32:47.620

不，您不能使用`DbContext`inside`Up`方法，因为它已经引用了新模型，但您的数据库仍以旧模型为目标。

编辑：

所有数据迁移都必须通过`Sql`. 例如，您可以创建临时表，将旧数据移动到临时表，使用表结构迁移并将数据从临时表移回原始表，直接在 SQL 中使用一些转换 - 拆分 varchar 值应该不是什么大问题。

# c++ - 计数器变量错误？

> ID：12593557
> 
> 赞同：0
> 
> 时间：2012-09-26T02:01:35.327
> 
> 标签：c++, pearson

我有一个关于此编码中的故障的快速问题。

当我运行这个程序并进入这个循环时（通过输入 1 作为数字），一切都很顺利，除了即使我进入`++generalcounter1;`了循环体，它似乎并不是每次都在这个变量中添加一个循环播放。当变量 == 10 时，它永远不会运行它应该运行的消息。

请帮助我，我很沮丧！非常感谢您的建议！

抱歉，如果不清楚，我对这个网站以及编程都是新手。

```
while (number == 1){
 int addend1;
 int addend2;
 int sum;
 int answer1;
 int generalcounter1 = 0;
 int reply1;

 ++generalcounter1;

 addend1 = 1 + rand() % 50;
 addend2 = 1 + rand() % 50;

 sum = (addend1 + addend2);

 cout << "\nWhat is " << addend1 << " plus " << addend2 << "? ";
 cin >> answer1;

 if (answer1 == sum){
     reply1 = winstatement(); 
 }          
 else{
     reply1 = losestatement();
 }

 if (generalcounter1 == 10){

     if (rightanswers >= 8){
        cout << "\nCongratulations, you are ready to go to the next level!\n" << endl;
     }
     else{
        cout << "\nPlease ask your teacher for extra help.\n" << endl;
     }  
  }   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T02:03:05.997

您在`generalcounter1`循环的每次迭代中声明一个新的，递增它，并在迭代结束时将其销毁。将声明移到循环之外，每次只增加一个，而不是每次增加一个新的，在它增加两次之前就被销毁。

```
int generalcounter1 = 0;
while (number == 1) { 
    //loop body
} 
```

# azure-sql-database - 在 SQL Azure 联合中创建唯一列

> ID：12593558
> 
> 赞同：0
> 
> 时间：2012-09-26T02:01:38.967
> 
> 标签：azure-sql-database, unique-constraint

我正在尝试在 SQL Azure 联合中创建一个唯一列，但即使以下查询创建了一个表，我仍然能够将条目保存到具有相同 Column1 值的表中。设置唯一列的正确方法是什么？我需要确保 ID 是联合的 uniqueidentifier 列，而就本演示而言，Column1 不能有重复值。

```
CREATE TABLE dbo.Table1(
        ID uniqueidentifier NOT NULL,
        Column1 nvarchar(50) NOT NULL,
        Column2 nvarchar(15) NULL,
 CONSTRAINT [PK_Table1] PRIMARY KEY CLUSTERED
 (
     ID ASC
 ),
CONSTRAINT [PK_Table2] UNIQUE NONCLUSTERED
 (
     ID ASC,
     Column1 ASC
 )
 ) FEDERATED ON ([dist] = ID)
 GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:45:15.533

没有测试，你不能这样做吗

```
CREATE TABLE dbo.Table1(
        ID uniqueidentifier NOT NULL,
        Column1 nvarchar(50) NOT NULL,
        Column2 nvarchar(15) NULL,
CONSTRAINT [PK_Table1] UNIQUE NONCLUSTERED
 (
     ID ASC,
     Column1 ASC
 )
 ) FEDERATED ON ([dist] = ID)
 GO

CREATE UNIQUE INDEX uix_table1_column1 ON Table1(Column1)
GO 
```

然后，您将拥有一个包含联合的主键和一个单独的唯一约束。

# c - 当您使用否定参数调用 glClearColor 时会发生什么？

> ID：12593559
> 
> 赞同：0
> 
> 时间：2012-09-26T02:01:41.460
> 
> 标签：c, opengl, colors

我正在开发一个简单的 OpenGL 应用程序，该应用程序允许用户通过单击并拖动到左侧（使其不那么强烈）或右侧（更强烈）来调整简单窗口的背景颜色。例如，当向右拖动时，我有这样的事情：

```
intensity += 0.0001*x;  //where x is the current mouse location 
```

...在左边，另一种方式：

```
intensity -= 0.0001*x; 
```

`intensity`是全局静态 GLfloat ，它在显示函数中被传递`glClearColor`，被多次调用。当用户在向右拖动时增强颜色时，此策略工作得很好，但在向左拖动时它会在某个点之后变得混乱：当我拖动时颜色变得不那么强烈并返回到应有的黑色，但随后又增强回原色。

我认为问题在于，当我拖得太远时，应该在 0 和 1 之间的强度变得负数，因此，`glClearColor`只需将符号改回正数（？）即可解决问题。如果是这种情况，我如何强制传递的值`glClearColor`保持在适当的范围内？我试图通过确保当前强度不会变成负值/如果它已经太低就不会发生调整来解决这个问题，但它似乎不起作用：

```
if(x <= xPrev && intensity >= (.0001*x))  //moving left to de-intensify color
  intensity -= 0.0001*x; 
```

...我这样做是否不正确，或者`glClearColor`处理负值的方式与我预期的不同？

出现的另一个有趣的问题是我的“强度”调整似乎只适用于 r、g 和/或 b 值（即，我将“强度”作为其中之一传递`glClearColor`。使用 a 值不起作用...但它不应该改变颜色强度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:51:31.220

这听起来有点像[滞后](http://en.wikipedia.org/wiki/Hysteresis#User_interface_design)问题。目前尚不清楚事件是如何接收的，或者在哪个坐标系中。可能会在按下按钮时`x`放下一个“锚”（`xStart`您将什么工具包/库用于窗口和事件？如果您从控制台启动，可能会添加如下跟踪语句：

`fprintf(stderr, "%.8e\n", x);`

查看 的值是否`x`与您对每一帧的期望相对应。

[glClearColor 将](http://www.opengl.org/sdk/docs/man/xhtml/glClearColor.xml)值钳位到`[0, 1]`，所以这可能不是问题。也许跟踪`intensity`会有用？

# php - 从登录模块获取 url 以在 Joomla 上重定向

> ID：12593566
> 
> 赞同：0
> 
> 时间：2012-09-26T02:02:39.827
> 
> 标签：php, joomla, joomla2.5

使用 Joomla 2.5 并尝试基于登录模块进行一些重定向，您可以在其中单击`Forgot your password`或`Forgot your username`。

我认为这应该适用于用户名：

```
if((JRequest::getString('option')=='com_users') && (JRequest::getString('view')=='remind')) 
```

这是密码：

```
if((JRequest::getString('option')=='com_users') && (JRequest::getString('view')=='reset')) 
```

我似乎从来没有进入过这个 if 语句。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:48:52.420

试试这个，

```
if((JRequest::getVar('option')=='com_users') && (JRequest::getVar('view')=='remind')) 
```

如果这也失败了，您可以尝试，

`$_REQUEST['option']`它肯定会起作用，但对于 joomla 网站来说不是一个好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T17:31:24.623

我发现唯一对我有用的是使用：

```
if((JRequest::getVar('option')!='com_users') 
```

这涵盖了`remind`和的两种情况`reset`。不确定是否还有其他不匹配的边缘情况。

# python - 调整迭代器使其行为类似于 Python 中的类文件对象

> ID：12593576
> 
> 赞同：30
> 
> 时间：2012-09-26T02:04:12.400
> 
> 标签：python

我有一个生成器生成字符串列表。Python中是否有一个实用程序/适配器可以使它看起来像一个文件？

例如，

```
>>> def str_fn():
...     for c in 'a', 'b', 'c':
...         yield c * 3
... 
>>> for s in str_fn():
...     print s
... 
aaa
bbb
ccc
>>> stream = some_magic_adaptor(str_fn())
>>> while True:
...    data = stream.read(4)
...    if not data:
...        break
...    print data
aaab
bbcc
c 
```

因为数据可能很大并且需要流式传输（每个片段是几千字节，整个流是几十兆字节），我不想在将整个生成器传递给流适配器之前急切地评估它。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-26T14:46:05.820

The "correct" way to do this is inherit from a standard Python [`io`](http://docs.python.org/dev/library/io.html#io.TextIOBase) abstract base class. However it doesn't appear that Python allows you to provide a raw text class, and wrap this with a buffered reader of any kind.

The best class to inherit from is [`TextIOBase`](http://docs.python.org/dev/library/io.html#io.TextIOBase). Here's such an implementation, handling `readline`, and `read` while being mindful of performance. ([gist](https://gist.github.com/3788413))

```
import io

class StringIteratorIO(io.TextIOBase):

    def __init__(self, iter):
        self._iter = iter
        self._left = ''

    def readable(self):
        return True

    def _read1(self, n=None):
        while not self._left:
            try:
                self._left = next(self._iter)
            except StopIteration:
                break
        ret = self._left[:n]
        self._left = self._left[len(ret):]
        return ret

    def read(self, n=None):
        l = []
        if n is None or n < 0:
            while True:
                m = self._read1()
                if not m:
                    break
                l.append(m)
        else:
            while n > 0:
                m = self._read1(n)
                if not m:
                    break
                n -= len(m)
                l.append(m)
        return ''.join(l)

    def readline(self):
        l = []
        while True:
            i = self._left.find('\n')
            if i == -1:
                l.append(self._left)
                try:
                    self._left = next(self._iter)
                except StopIteration:
                    self._left = ''
                    break
            else:
                l.append(self._left[:i+1])
                self._left = self._left[i+1:]
                break
        return ''.join(l) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-26T02:35:10.933

这是一个应该从您的迭代器中分块读取的解决方案。

```
class some_magic_adaptor:
  def __init__( self, it ):
    self.it = it
    self.next_chunk = ""
  def growChunk( self ):
    self.next_chunk = self.next_chunk + self.it.next()
  def read( self, n ):
    if self.next_chunk == None:
      return None
    try:
      while len(self.next_chunk)<n:
        self.growChunk()
      rv = self.next_chunk[:n]
      self.next_chunk = self.next_chunk[n:]
      return rv
    except StopIteration:
      rv = self.next_chunk
      self.next_chunk = None
      return rv

def str_fn():
  for c in 'a', 'b', 'c':
    yield c * 3

ff = some_magic_adaptor( str_fn() )

while True:
  data = ff.read(4)
  if not data:
    break
  print data 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-26T02:16:18.240

StringIO 的问题是您必须预先将所有内容加载到缓冲区中。如果生成器是无限的，这可能是一个问题:)

```
from itertools import chain, islice
class some_magic_adaptor(object):
    def __init__(self, src):
        self.src = chain.from_iterable(src)
    def read(self, n):
        return "".join(islice(self.src, None, n)) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-08-14T23:44:19.780

Here's a modified version of John and Matt's answer that can read a list/generator of strings and output bytearrays

```
import itertools as it
from io import TextIOBase

class IterStringIO(TextIOBase):
    def __init__(self, iterable=None):
        iterable = iterable or []
        self.iter = it.chain.from_iterable(iterable)

    def not_newline(self, s):
        return s not in {'\n', '\r', '\r\n'}

    def write(self, iterable):
        to_chain = it.chain.from_iterable(iterable)
        self.iter = it.chain.from_iterable([self.iter, to_chain])

    def read(self, n=None):
        return bytearray(it.islice(self.iter, None, n))

    def readline(self, n=None):
        to_read = it.takewhile(self.not_newline, self.iter)
        return bytearray(it.islice(to_read, None, n)) 
```

usage:

```
ff = IterStringIO(c * 3 for c in ['a', 'b', 'c'])

while True:
    data = ff.read(4)

    if not data:
        break

    print data

aaab
bbcc
c 
```

alternate usage:

```
ff = IterStringIO()
ff.write('ddd')
ff.write(c * 3 for c in ['a', 'b', 'c'])

while True:
    data = ff.read(4)

    if not data:
        break

    print data

ddda
aabb
bccc 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-10T14:41:41.517

There is one called `werkzeug.contrib.iterio.IterIO` but note that it stores the entire iterator in its memory (up to the point you have read it as a file) so it might not be suitable.

[http://werkzeug.pocoo.org/docs/contrib/iterio/](http://werkzeug.pocoo.org/docs/contrib/iterio/)

Source: [https://github.com/mitsuhiko/werkzeug/blob/master/werkzeug/contrib/iterio.py](https://github.com/mitsuhiko/werkzeug/blob/master/werkzeug/contrib/iterio.py)

An open bug on `readline`/`iter`: [https://github.com/mitsuhiko/werkzeug/pull/500](https://github.com/mitsuhiko/werkzeug/pull/500)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-04-14T08:34:42.680

Looking at Matt's answer, I can see that it's not always necessary to implement all the read methods. [`read1`](https://docs.python.org/3/library/io.html?highlight=io.textiowrapper#io.BufferedIOBase.read1) may be sufficient, which is described as:

> Read and return up to *size* bytes, with at most one call to the underlying raw stream’s read()...

Then it can be wrapped with [`io.TextIOWrapper`](https://docs.python.org/3/library/io.html?highlight=io.textiowrapper#io.TextIOWrapper) which, for instance, has implementation of `readline`. As an example here's streaming of CSV-file from S3's (Amazon Simple Storage Service) `boto.s3.key.Key` which implements iterator for reading.

```
import io
import csv

from boto import s3

class StringIteratorIO(io.TextIOBase):

    def __init__(self, iter):
        self._iterator = iter
        self._buffer = ''

    def readable(self):
        return True

    def read1(self, n=None):
        while not self._buffer:
            try:
                self._buffer = next(self._iterator)
            except StopIteration:
                break
        result = self._buffer[:n]
        self._buffer = self._buffer[len(result):]
        return result

conn = s3.connect_to_region('some_aws_region')
bucket = conn.get_bucket('some_bucket')
key = bucket.get_key('some.csv')    

fp = io.TextIOWrapper(StringIteratorIO(key))
reader = csv.DictReader(fp, delimiter = ';')
for row in reader:
    print(row) 
```

# Update

Here's [an answer](https://stackoverflow.com/a/20260030/2072035) to related question which looks a little better. It inherits `io.RawIOBase` and overrides `readinto`. In Python 3 it's sufficient, so instead of wrapping `IterStream` in `io.BufferedReader` one can wrap it in `io.TextIOWrapper`. In Python 2 `read1` is needed but it can be simply expressed though `readinto`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-01T07:31:20.063

If you only need a `read` method, then this can be enough

```
def to_file_like_obj(iterable, base):
    chunk = base()
    offset = 0
    it = iter(iterable)

    def up_to_iter(size):
        nonlocal chunk, offset

        while size:
            if offset == len(chunk):
                try:
                    chunk = next(it)
                except StopIteration:
                    break
                else:
                    offset = 0
            to_yield = min(size, len(chunk) - offset)
            offset = offset + to_yield
            size -= to_yield
            yield chunk[offset - to_yield:offset]

    class FileLikeObj:
        def read(self, size=-1):
            return base().join(up_to_iter(float('inf') if size is None or size < 0 else size))

    return FileLikeObj() 
```

which can be used for an iterable yielding `str`

```
my_file = to_file_like_object(str_fn, str) 
```

or if you have an iterable yielding `bytes` rather than `str`, and you want a file-like object whose read method returns `bytes`

```
my_file = to_file_like_object(bytes_fn, bytes) 
```

This pattern has a few nice properties I think:

*   Not much code, which can be used for both `str` and `bytes`
*   Returns exactly what has been asked for in terms of length, in both of the cases of the iterable yielding small chunks, and big chunks (other than at the end of the iterable)
*   Does not `append` `str`/`bytes` - so avoids copying
*   Leverages slicing - so also avoids copying because a slice of a `str`/`bytes` that should be the entire instance will return exactly that same instance

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-09-26T02:08:05.603

这正是 stringIO 的用途。

```
>>> import StringIO
>>> some_var = StringIO.StringIO("Hello World!")
>>> some_var.read(4)
'Hell'
>>> some_var.read(4)
'o Wo'
>>> some_var.read(4)
'rld!'
>>> 
```

或者如果你想做它听起来的样子

```
Class MyString(StringIO.StringIO):
     def __init__(self,*args):
         StringIO.StringIO.__init__(self,"".join(args)) 
```

那么你可以简单地

```
xx = MyString(*list_of_strings) 
```

# jquery - 使用跨度隐藏

> ID：12593577
> 
> 赞同：1
> 
> 时间：2012-09-26T02:04:28.507
> 
> 标签：jquery, html

这个问题可能看起来很奇怪，但是将一组元素全部包装在一个跨度中在技术上是不正确的。这样一来，人们就可以根据要求隐藏和显示跨度。我只问，因为那样你就可以更好地控制你想隐藏的地方。

```
<did> this is a blog post</div>
<h3>title</h3>
<p>blah blah  blah blah blah<p>
<p>blah blah  blah <span class="hidden">blah blah<p>
<p>blah blah  blah blah blah<p>
<p>blah blah  blah blah blah<p>
<p>blah blah  blah blah blah<p></span> 
```

当我能够对 HTML 进行硬编码时，这已经奏效了。但是当我尝试将跨度包裹在某些元素周围时，它不会再将其包裹到最近的关闭标签。有任何想法吗？还是有更好的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:08:57.183

**`<span>`是一个内联元素，只能包含在其他元素内部，例如`abbr`,`strong`或`tt`.**

`div`您可以使用 a作为外部元素轻松地做您假装的事情。

```
<div style="display: none">
   all this info
   <span>will be hidden</span>
   <p /> from view until
   <br /> you change the div visibility
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T02:06:30.057

不，这不是不正确的。事实上，现代网站经常使用这种技术来隐藏小文本框或帮助提示。请记住，span 标签是*内联*的而不是*块*元素，因此您可能想尝试使用在 CSS 中明确包含“display=inline-block”的 div 标签。

# android - 用于 WLAN 身份验证的 Android 设备 Over Radius

> ID：12593580
> 
> 赞同：1
> 
> 时间：2012-09-26T02:05:13.937
> 
> 标签：android, wifi, connect

如何检查我的 Android 设备是否支持 WLAN over radius 身份验证？

有没有什么好的文章可以分享与此相关的？

# node.js - 非法来源的 Socket.IO 问题？

> ID：12593589
> 
> 赞同：2
> 
> 时间：2012-09-26T02:05:39.903
> 
> 标签：node.js, socket.io

我正在使用：“socket.io”：“~0.9.10”

当我转到托管在端口 80 上的 apache 网络服务器托管的 client.html 页面时，我遇到了这个问题：

```
XMLHttpRequest cannot load http://localhost:5000/socket.io/1/?t=1348624895534\. Origin http://localhost is not allowed by Access-Control-Allow-Origin. 
```

我在我的服务器端运行 SocketIO 以在端口 5000 上，如下所示：

```
io = io.listen(5000);
io.set("origins","*"); 
```

但是，每次我加载我的 apache client.html 页面时，我都会在我的 SocketIO 服务器控制台中看到：

```
warn: illegal origin: http://localhost 
```

我该如何摆脱这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:13:59.370

你正在做[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。

您收到的错误来自 Socket.IO 似乎使用的是 XHR 而不是 Websockets。这就是当 websockets 不可用时 socket.IO 所做的，它使用另一个协议，FlashSockets，XHR-polling ......等等。

您需要在您的 apache 服务器上设置一个标头，以允许对另一个网站进行查询，这里是您的 Socket.io 服务器。

这是一个[如何](http://enable-cors.org/#how-apache)。

如果您只使用一台服务器，这对您来说会简单得多。您可以使用 Express 来传递静态 html 文件。[这](https://github.com/dotcloud/socket.io-on-dotcloud)是一个演示/教程应用程序，可以轻松开始使用 Socket.IO + Express。

这个演示是推动 dotCloud 的[样板](http://deploy.dotcloud.com/Node.js/Socket.IO/1)，所以如果你想轻松部署，请按照这些说明进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:09:49.420

尝试将`'Access-Control-Allow-Origin'`标题设置为`'*'`

```
response.writeHead(200, {
  'Access-Control-Allow-Origin': '*'
}); 
```

# c# - 如何在 C# 中使用多个下载线程更新单个 UI 线程？

> ID：12593591
> 
> 赞同：0
> 
> 时间：2012-09-26T02:05:43.047
> 
> 标签：c#, multithreading, parallel-processing, windows-runtime

谁能帮我用多个下载线程更新单个 UI 线程？在 C# 中使用 WinRT。

我目前正在使用 Task.Run。它可以工作，但由于它传播到多个线程处理，程序无法正确更新单个 UI。

方法 UpdateRSSItemAsync() 下载绑定到 UI (ListView) 的内容（它将更新 RSSItemList）。

谢谢，

程序按顺序运行良好

```
// Run multiple tasks in sequential order
foreach (SyndicationItem item in CurrentFeed.Items)
{
    if (m_bDownloadInterrupted)
        break;

    RssItemList = await UpdateRSSItemAsync(CurrentRSSDataGroup, RssItemList, CurrentFeed, item);

} 
```

但是，如果在多个线程中运行，则无法更新 UI

```
// Run multiple tasks in multiple threads
foreach (SyndicationItem item in CurrentFeed.Items)
{
    if (m_bDownloadInterrupted)
        break;

    RssItemList = await Task.Run<List<RSSItem>>(async () =>
    {
        RssItemList = await UpdateRSSItemAsync(CurrentRSSDataGroup, RssItemList, CurrentFeed, item);
        return RssItemList;
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:36:48.700

使用`Task.WhenAny`或[Stephen Toub 的`Interleaved`](http://blogs.msdn.com/b/pfxteam/archive/2012/08/02/processing-tasks-as-they-complete.aspx)：

```
var tasks = CurrentFeed.Items.Select(item => UpdateRSSItemAsync(CurrentRSSDataGroup, RssItemList, CurrentFeed, item)).ToList();
while (tasks.Count != 0)
{
  var completedTask = await Task.WhenAny(tasks);
  tasks.Remove(completedTask);
  ProcessRssItem(await completedTask);
} 
```

您可能会发现我的[`async`/`await`介绍帖子很有帮助](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)。

# django - 子类化 Django ListView

> ID：12593592
> 
> 赞同：0
> 
> 时间：2012-09-26T02:05:44.740
> 
> 标签：django, listview, generics, view

我正在使用 Django v1.4，并且正在尝试对通用 ListView 视图进行子类化。这是代码

```
from django.views.generic import ListView

class SearchListView(ListView):
    model = None
    fields = None

    def get_queryset(self):
        #...etc...
        return super(SearchListView, self).get_queryset() 
```

然后，我将为特定模型进一步定制该视图：

```
class PersonSearchListView(SearchListView):
    model = Person
    fields = ['first_name', 'last_name'] 
```

所以发生的情况是，ImproperlyConfigured 异常是超类 (ListView)，说明应该定义模型或查询集。我以为我是……（模型=人）。为什么这个值没有进入视图？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:40:02.453

你打电话时`super(SearchListView, self).get_queryset()`

您将调用以下类的 get_queryset，如您所见，如果您未设置模型或查询集，它将引发异常。

ListView 是 MultipleObjectMixin 的子视图。

但是如果你实例化一个 PersonSearchListView，那么模型应该已经被正确设置了。你能包括url配置吗？稍后会尝试并更新我的答案。

```
class MultipleObjectMixin(ContextMixin):
    """
    A mixin for views manipulating multiple objects.
    """
    allow_empty = True
    queryset = None
    model = None
    paginate_by = None
    context_object_name = None
    paginator_class = Paginator

    def get_queryset(self):
        """
        Get the list of items for this view. This must be an iterable, and may
        be a queryset (in which qs-specific behavior will be enabled).
        """
        if self.queryset is not None:
            queryset = self.queryset
            if hasattr(queryset, '_clone'):
                queryset = queryset._clone()
        elif self.model is not None:
            queryset = self.model._default_manager.all()
        else:
            raise ImproperlyConfigured("'%s' must define 'queryset' or 'model'"
                                       % self.__class__.__name__)
        return queryset 
```

# asp.net-mvc-3 - 模仿 BeginForm() 语法

> ID：12593593
> 
> 赞同：3
> 
> 时间：2012-09-26T02:05:47.587
> 
> 标签：asp.net-mvc-3, razor, html-helper

我很好奇这是否可以通过 HtmlHelper 的设计来复制，或者它是否是 Razor 本身内置的特殊内容。

我正在为 Knockout 编写一个小型包装库，以摆脱使用[Fluent Interface 方法](http://en.wikipedia.org/wiki/Fluent_interface)编写原始 html 。但是，除非我可以执行以下操作，否则它将非常麻烦：

```
@using(Html.KoDiv().ForEach("MyArray").Visible("!Busy"))
{
     <some html here>
} 
```

我见过的唯一具有相似外观的是以下内容：

```
@using(Html.BeginForm("Action"))
{
    <some html here>
} 
```

**问题：我怎样才能摆脱这种语法？或者，还有其他我没有想到的轻量级语法方法吗？**

我认为他们正在直接写入响应，或者可能调用 HtmlHelper.Raw() 并在`Dispose()`方法上呈现结束标记，因为您必须在他们的方法中使用`using`语句。然而，到目前为止，这些都没有奏效。有任何想法吗？谢谢！

示例代码：

```
 public class KoElement : IHtmlString, IDisposable
{
    protected StringBuilder m_sb;
    protected TagBuilder m_tagBuilder;
    protected List<string> m_events;

    public KoElement(TagBuilder tb, HtmlHelper html = null)
    {
        m_tagBuilder = tb;
        m_events = new List<string>();

    }

    public string ToHtmlString()
    {
        m_tagBuilder.Attributes.Add("data-bind", string.Join(", ", m_events));
        return m_tagBuilder.ToString(TagRenderMode.StartTag);
    }

    public void Dispose()
    {
         HttpContext.Current.Response.Write("</" + m_tagBuilder.TagName + ">");
    }

    public KoElement Visible(string expression)
    {
        if (!string.IsNullOrEmpty(expression))  
            m_events.Add(string.Format("visible: {0}", expression));
        return this;
    }

    public KoElement ForEach(string expression)
    {
        if (!string.IsNullOrEmpty(expression))
            m_events.Add(string.Format("foreach: {0}", expression));
        return this;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T02:10:35.737

而不是使用`HttpContext.Current.Response.Write()`，您必须`ViewContext.Writer.Write()`在 HTML Helper 中使用。

```
public class KoElement : IHtmlString, IDisposable
{
    protected HtmlHelper m_html;
    protected TagBuilder m_tagBuilder;
    protected List<string> m_events;

    public KoElement(TagBuilder tb, HtmlHelper html)
    { 
        m_html = html;
        m_tagBuilder = tb;
        m_events = new List<string>();
    }

    public string ToHtmlString()
    {
        m_tagBuilder.Attributes.Add("data-bind", string.Join(", ", m_events));
        return m_tagBuilder.ToString(TagRenderMode.StartTag);
    }

    public void Dispose()
    {
        m_html.ViewContext.Writer.Write("</" + m_tagBuilder.TagName + ">");
    }
} 
```

# python - 如果给出无效响应，则循环 raw_input

> ID：12593594
> 
> 赞同：0
> 
> 时间：2012-09-26T02:05:47.607
> 
> 标签：python, loops

我正在做一个简单的游戏，询问用户是否想通过输入 Y/N 继续。但是，如果用户输入了其他内容，我希望问题循环。我该怎么做？

```
def start():
    print "Hello there.";   time.sleep(.5)
    myname = raw_input("What is your name? ");  time.sleep(.5)
    print "Welcome %s, this is..." %myname; time.sleep(.5)
    uname = myname.upper()
    print "\t\t\tTHE ADVENTURES OF %s" %uname
    choice0 = raw_input("\nWould you like to play the game? Y/N ")
    if choice0 == "Y":
            gameon
    if choice0 == "N":
            print "Alright, bye!"
    else:   
            print "Invalid input." 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:08:53.953

```
choice0 = ''
allowed = ["y", "n"]
while choice0.lower() not in allowed:
    choice0 = raw_input("\nWould you like to play the game? Y/N ") 
```

# api - 包含多个 API 的实时沙箱

> ID：12593600
> 
> 赞同：0
> 
> 时间：2012-09-26T02:06:03.500
> 
> 标签：api, rest

我记得有一次看到一个包含所有流行 api 的站点，当您通过 REST 获取或插入内容时，它会显示示例数据。我不记得它在哪个网站上，所以如果有人知道，请告诉我谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:24:45.183

您可能正在寻找[这个](https://apigee.com/providers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T05:40:29.380

本[网站](http://www.programmableweb.com/apis/directory/1?protocol=REST)是公司提供的所有 API 服务的目录。

# deployment - 通过 phpfog 部署 Laravel => 查看 [partials.adminHeader] 不存在

> ID：12593601
> 
> 赞同：4
> 
> 时间：2012-09-26T02:06:27.700
> 
> 标签：deployment, laravel, phpfog

我正在尝试在 phpfog 上部署一个站点，除了我的后端之外一切正常。我相信这可能与我的 restful 控制器（public $restful = true;）有关，因为唯一显示错误的视图 ->（视图 [partials.adminHeader] 不存在）对应于使用 restful 控制器。花了几个小时试图解决这个问题，无法提出解决方案！

//完全错误

信息：

查看 [partials.adminHeader] 不存在。地点：

/var/fog/apps/app58421/shipwatch.phpfogapp.com/laravel/view.php 在第 156 行堆栈跟踪：

#0 /var/fog/apps/app58421/shipwatch.phpfogapp.com/laravel/view.php(93): Laravel\View->path('partials.adminH...') #1 /var/fog/apps /app58421/shipwatch.phpfogapp.com/laravel/view.php(204): Laravel\View->__construct('partials.adminH...', Array) #2 /var/fog/apps/app58421/shipwatch.phpfogapp .com/laravel/helpers.php(526): Laravel\View::make('partials.adminH...', Array) #3 /var/fog/apps/app58421/shipwatch.phpfogapp.com/laravel/view .php(359) : eval()'d 代码(1): view('partials.adminH...') #4 /var/fog/apps/app58421/shipwatch.phpfogapp.com/laravel/view.php( 359): eval() #5 /var/fog/apps/app58421/shipwatch.phpfogapp.com/laravel/blade.php(71): Laravel\View->get() #6 [内部函数]: Laravel{closure }(对象(Laravel\View)) #7 /var/fog/apps/app58421/shipwatch.phpfogapp.com/laravel/event.php(199):call_user_func_array(Object(Closure), Array) #8 /var/fog/apps/app58421/shipwatch.phpfogapp.com/laravel/event.php(138): Laravel\Event::fire('laravel.view.en.. .', Array, true) #9 /var/fog/apps/app58421/shipwatch.phpfogapp.com/laravel/view.php(330): Laravel\Event::until('laravel.view.en...' , 数组) #10 /var/fog/apps/app58421/shipwatch.phpfogapp.com/laravel/view.php(408): Laravel\View->render() #11 /var/fog/apps/app58421/shipwatch. phpfogapp.com/laravel/view.php(345): Laravel\View->data() #12 /var/fog/apps/app58421/shipwatch.phpfogapp.com/laravel/blade.php(71): Laravel\View ->get() #13 [内部函数]: Laravel{closure}(Object(Laravel\View)) #14 /var/fog/apps/app58421/shipwatch.phpfogapp.com/laravel/event.php(199): call_user_func_array(Object(Closure), Array) #15 /var/fog/apps/app58421/shipwatch.phpfogapp.com/laravel/event.php(138): Laravel\Event::fire('laravel.view.en...', Array, true) #16 /var/fog/apps/app58421/shipwatch.phpfogapp.com/ laravel/view.php(330): Laravel\Event::until('laravel.view.en...', Array) #17 /var/fog/apps/app58421/shipwatch.phpfogapp.com/laravel/view. php(551): Laravel\View->render() #18 /var/fog/apps/app58421/shipwatch.phpfogapp.com/laravel/response.php(246): Laravel\View->__toString() #19 / var/fog/apps/app58421/shipwatch.phpfogapp.com/laravel/laravel.php(178): Laravel\Response->render() #20 /var/fog/apps/app58421/shipwatch.phpfogapp.com/public/ index.php(34): require('/var/fog/apps/a...') #21 {main}en...', Array) #17 /var/fog/apps/app58421/shipwatch.phpfogapp.com/laravel/view.php(551): Laravel\View->render() #18 /var/fog/apps /app58421/shipwatch.phpfogapp.com/laravel/response.php(246): Laravel\View->__toString() #19 /var/fog/apps/app58421/shipwatch.phpfogapp.com/laravel/laravel.php(178 ): Laravel\Response->render() #20 /var/fog/apps/app58421/shipwatch.phpfogapp.com/public/index.php(34): require('/var/fog/apps/a... ') #21 {主要}en...', Array) #17 /var/fog/apps/app58421/shipwatch.phpfogapp.com/laravel/view.php(551): Laravel\View->render() #18 /var/fog/apps /app58421/shipwatch.phpfogapp.com/laravel/response.php(246): Laravel\View->__toString() #19 /var/fog/apps/app58421/shipwatch.phpfogapp.com/laravel/laravel.php(178 ): Laravel\Response->render() #20 /var/fog/apps/app58421/shipwatch.phpfogapp.com/public/index.php(34): require('/var/fog/apps/a... ') #21 {主要}com/public/index.php(34): require('/var/fog/apps/a...') #21 {main}com/public/index.php(34): require('/var/fog/apps/a...') #21 {main}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T01:31:22.707

我遇到了同样的问题，chmod你的存储文件夹也是如此。chmod -R 755

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T02:43:59.823

如果你直接在 get() 方法中渲染一些内容会发生什么

像

```
class DemoPage_Controller
{
    public function getPosts()
    {
         echo 'Direct outputting';
         return;

         //return View::make('demopagetemplate');
    }
} 
```

如果上述方法仍然有效，请确保您在 Apache 上启用了 mod_rewrite（您可以使用 phpinfo() 来检查）

# c# - 如何使用 wpf expender 对齐

> ID：12593606
> 
> 赞同：0
> 
> 时间：2012-09-26T02:06:56.013
> 
> 标签：c#, .net, wpf

我正在尝试创建一个 WPF 窗口，以便在用户单击更多扩展器按钮时有一个简单的扩展器来扩展数据网格。当用户想要隐藏数据网格时，用户只需点击 Less 扩展器按钮。

我还使用停靠面板来分隔页眉、左、右和页脚。

问题是：

1.  在用户单击更多扩展器按钮之前，我希望让更少的按钮位于中心。当用户点击更多扩展按钮时，更少按钮将被推到左侧，以在右侧显示数据网格。
2.  如何在扩展器关闭和打开时更改扩展器的名称。我可以在 xaml 级别进行吗？

下面是xaml代码：

```
<Window x:Class="M.SalesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SalesWindow" Height="300" Width="300">
    <DockPanel>

        <StackPanel DockPanel.Dock="Top">
            <Label FontSize="28" Content="Sales">
            </Label>
        </StackPanel>

        <StackPanel DockPanel.Dock="Left" Width="auto" HorizontalAlignment="Center">
            <Label FontSize="15" Content="Enter Amount" Height="26" Width="168" />
            <Separator Width="168" />
        </StackPanel>

        <StackPanel DockPanel.Dock="Right">
            <Expander ExpandDirection="Left" HorizontalAlignment="Right" VerticalAlignment="Stretch">
                <Expander.Header>
                    <TextBlock Text="More">
                    <TextBlock.LayoutTransform>
                        <RotateTransform Angle="-90"/>
                    </TextBlock.LayoutTransform>
                    </TextBlock>
                </Expander.Header>
                <Expander.Content>
                    <StackPanel>
                        <DataGrid ItemsSource="{Binding Products}">

                        </DataGrid>
                    </StackPanel>
                </Expander.Content>
            </Expander>
        </StackPanel>

    </DockPanel>
</Window> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:22:39.187

用下面的代码替换你的代码，看看它的神奇之处。这也将根据您的要求解决您的对齐问题。我已经删除了 DockPanel，因为您可以使用这段代码获得类似的结果。

```
<StackPanel>
    <StackPanel>
        <Label FontSize="28" Content="Sales">
        </Label>
    </StackPanel>

    <Grid>
        <Grid.ColumnDefinitions>                
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <StackPanel Grid.Column="0" HorizontalAlignment="Center">
            <Label FontSize="15" Content="Enter Amount" Height="26" Width="168" />
            <Separator Width="168" />
        </StackPanel>

         <Expander Grid.Column="1" ExpandDirection="Left" HorizontalAlignment="Right" VerticalAlignment="Stretch">
            <Expander.Style>
                <Style TargetType="Expander">
                    <Setter Property="IsExpanded" Value="False" />
                    <Setter Property="Header">
                        <Setter.Value>
                            <TextBlock Text="Less">
                                <TextBlock.LayoutTransform>
                                    <RotateTransform Angle="-90"/>
                                </TextBlock.LayoutTransform>
                            </TextBlock>
                        </Setter.Value>
                    </Setter>

                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsExpanded,RelativeSource={RelativeSource Self}}" Value="True">
                            <Setter Property="Header">
                                <Setter.Value>
                                    <TextBlock Text="More">
                                        <TextBlock.LayoutTransform>
                                            <RotateTransform Angle="-90"/>
                                        </TextBlock.LayoutTransform>
                                    </TextBlock>
                                </Setter.Value>
                            </Setter>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Expander.Style>
            <Expander.Content>
                <StackPanel>
                    <DataGrid ItemsSource="{Binding Products}">

                    </DataGrid>
                </StackPanel>
            </Expander.Content>
        </Expander>

    </Grid>
</StackPanel> 
```

诀窍在于以下代码行。

```
<Grid.ColumnDefinitions>
    <ColumnDefinition Width="*" />
    <ColumnDefinition Width="Auto" />
</Grid.ColumnDefinitions> 
```

# iphone - 我有 cellForRowAtIndexPath 方法的问题

> ID：12593608
> 
> 赞同：0
> 
> 时间：2012-09-26T02:07:15.273
> 
> 标签：iphone, objective-c, ios, uitableview

我是 iOS 开发的新手，我有`cellForRowAtIndexPath`一些`UITableView`.

在我的应用程序中，我有多行`UITableView`。当我想查看每一行时，显然我需要滚动`UITableView`。`UITableView`我也添加`UITextField`到每一 行`UITableViewCell`。当我在数据库中添加 UITextField 的值时，它可以正常工作，但是当我想编辑的值`UITextField`并且我在数据库中添加 TextField 的值时，就会产生问题。

问题：- 如果我想在数据库中添加 TextField 的所有可编辑值，那么我必须向上滚动`UITableView`到向下。如果我不滚动，那么不可见的 TextField 不会添加到数据库中:(**在我的应用程序中，添加和编辑`UIViewController`基于我传递的 ID 相同。**

通过谷歌搜索，我还发现`cellForRowAtIndexPath`并非所有行都调用它。它仅对可见行调用，然后在用户滚动到其他行时调用它们。旧行在离开屏幕时也会被销毁，如果用户向上滚动，它将再次请求单元格。

所以，请帮助我如何解决我的问题，

**编辑更容易理解我的问题：**

例如 ：

**我有两个 UIViewController。**

1 - FirstViewController 2 - SecondViewController

在`FirstViewController`显示名称的所有列表中`UITableView`，它有两个选择，要么选择名称，`UITableView`要么通过点击 BarButton 添加新数据`UINavigationBar`。这两个处理的添加和编辑都是在名为 SecondViewController 的同一个 ViewController 中完成的。数据（或值） Add by`SecondViewController`工作正常但是当我从 FirstViewController 中选择任何行（或名称）时，相关的 ID 将传递给`SecondViewController`并且所有信息都基于 ID 显示在 TextField 上。这里所有的值都是从 DATABASE 中获取的，我将它存储到`NSMutableDictionary`然后通过访问字典的 KEY 存储在 textField 中。但值存储在可见的 TextField 中。即使我从 DATABASE 获得，不可见的 TextField 也不存储值。所以我必须先滚动 UITableView。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:41:48.623

然后像下面给出的那样实现

通过在接口或文件中声明，获取数据库值并将其存储`NSMutableDictionary`并通过 out 访问。`.h`

然后，当您每次`tableView`或`textField`加载时从字典中读取值并显示。

并在您`textFieldDidEnd`或`textFieldDidChange`委托中使用相同的键从您的字典中获取数据`textField`并保存/存储回您的字典。这一次它只是替换了你知道的旧值。

最后，只需将所有字典值保存到您的数据库中`backAction`或`viewWillDisappear`方法。

如果不让我知道，这应该对你有用。

# php - 获取逗号和更多之间的数据

> ID：12593619
> 
> 赞同：1
> 
> 时间：2012-09-26T02:08:33.953
> 
> 标签：php, xml, arrays, parsing, tags

我现在有几天出了问题：s ...我试图在字符串中获取一些变化的数据，字符串是这样的：

```
<docdata>
 <!-- News Identifier -->
        <doc-id id-string ="YBY15349" />

        <!-- Date of issue -->
        <date.issue norm ="2012-09-22 19:52" />
        <!-- Date of release -->
        <date.release norm ="2012-09-22 19:52" />
      </docdata> 
```

我需要的只是**"2012-09-22 19:52"**中的**日期** ，它存储在某种类型的 xml 中的字符串，顺便说一下格式错误。所以我不能使用普通的 xml 解析器，我已经加载/读取文件来更改一些字符集

 **```
 $fname = $file;
    $fhandle = fopen($fname,"r");
    $content = fread($fhandle,filesize($fname));
    str_replace("<?xml version=\"1.0\" encoding=\"UTF-8\"?>", "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>", $content); 
etc.. 
```

这项工作就像一个魅力，但我无法使用它的字符串。我尝试使用 preg_match_all 但我无法正确处理。它有一种简单的方法来搜索这个值

`<date.issue norm ="2012-09-22 19:52" />`

并仅获取变量中的日期？

提前感谢，对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:17:38.313

匹配以下内容的正则表达式：

```
<date.issue norm ="2012-09-22 19:52" /> 
```

将会：

```
/<date\.issue\s*norm\s*="([^"]*)"/ 
```

在代码中：

```
preg_match_all('/<date\.issue\s*norm\s*="([^"]*)"/', $content, $matches);
// $matches[1] contains all the dates 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T02:37:52.603

从[PHP 文档](http://php.net/manual/en/function.file-get-contents.php)：

> file_get_contents() 是将文件内容读入字符串的首选方法。如果您的操作系统支持，它将使用内存映射技术来提高性能。

因此，您的代码将变为：

```
$content = file_get_contents($file);
$content = str_replace("<?xml version=\"1.0\" encoding=\"UTF-8\"?>", "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>", $content);
preg_match_all('/date\.issue norm ="([^"]+)" /', $content, $date); 
```

默认行为是将带括号的匹配项存储在数组中`$date[1]`。因此，您可能会遍历`$date[1][0]`、`$date[1][1]`等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T02:19:18.130

而不是使用

```
fopen($filename) 
```

采用

```
$filename = '/path/to/file.xml';
$filearray = file($filename) // pulls the while file into an array by lines

$searchstr = 'date.issue';

foreach($filearray as $line) {
   if(stristr($line,$searchstr)) { // <-- forgot the )
      $linearray = explode('"',$line);
      // your date should be $linearray[1];
      echo $linearray[1]."\n";  // to test your output
      // rest of your code here
   }
} 
```

这样您就可以在整个文件中搜索您的搜索字符串，并且格式错误的 xml 应该不是问题。**

# android - getInstallerPackageName 返回 null

> ID：12593621
> 
> 赞同：5
> 
> 时间：2012-09-26T02:08:41.857
> 
> 标签：android, installation

在我的 Android 应用程序中，我想检查应用程序安装的来源。我查看了 Android 文档，发现以下 API 作为 PackageManager 类的一部分：

> ```
> abstract String getInstallerPackageName(String packageName) 
> ```
> 
> 检索安装包的应用程序的包名。

然后我在`onCreate`MyActivity的方法中使用了如下代码：

```
if(Build.VERSION.SDK_INT >= 11) 
{
    PackageManager myapp= this.getPackageManager(); 
    String installer = myapp.getInstallerPackageName("com.MyPackage");
    if(installer == null)
    {
        Toast.makeText(getApplicationContext(), MyActivity.this.getString(R.string.invalidsource), Toast.LENGTH_SHORT).show();
        MyActivity.this.finish();
    }
} 
```

但看起来这个 API`null`在真实设备上返回。

如果我们有任何其他获取应用程序安装源的方法，请告诉我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-11T06:31:23.183

如果你想测试这个方法是通过使用将apk存储在设备上

**adb push 'test.apk' '/sdcard/Download'**

然后通过输入“adb shell”并在终端中按回车键进入 adb shell，然后使用以下命令安装

**pm install -i 'installernameyouwant' /sdcard/Download/test.apk**

在上述方法中安装应用程序时，对 getInstallerPackageName() 的调用会返回您在上述命令中提供的安装程序名称

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T14:31:26.707

关于您的问题，该应用程序是如何安装到设备上的？通过“adb install”，它将为空。

使用以下内容，您应该能够将其覆盖为您想要的任何内容以进行测试。

```
pm install -i installername com.example.package 
```

GooglePlay 的值应为 com.google.android.feedback。我不确定其他应用商店使用什么价值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T03:29:49.427

我用模拟器和真实设备测试了这个 API 方法。大多数情况下，它返回 null。仅`com.android.vending`在从官方 Google Play 安装应用程序时返回。

与中国本地应用市场应用程序，如[AppChina](http://www.appchina.com)和[wandoujia](http://www.wandoujia.com)，`null`返回。

代码片段和日志发布在这里：[Github Gist](https://gist.github.com/4192339#comments)

# jquery - Jquery图片库.click失败

> ID：12593622
> 
> 赞同：0
> 
> 时间：2012-09-26T02:08:42.760
> 
> 标签：jquery, onclick, slidedown

我的意图是在加载 div 中的图像时`#photo_1`出现。`.slideDown`随后，`#photo_2`当（其相应的缩略图 div）`#thumb_2`被单击时，（和 on）将出现。

现在，`#imgwrap`它包围`#photo_1`并且是一个占位符，直到`#photo_1`加载，当`#thumb_2`被点击并且`#photo_2`应该出现时，它会一直存在。然后`#photo_2`出现在下方/与 堆叠在一起`#imgwrap`。

我想`#imgwrap`消失，并在单击除初始之外的`#photo`任何其他内容时出现相应的内容。`#thumbs``#thumb_1`

**非常感谢您的帮助！**

```
<--!jquery image animation-->
<script type="text/javascript">
$(window).load(function () {
    $("#photo_1").slideDown(500);
});

 $("#thumb_2").click(function () {
      $("#imgwrap").hide();
    });
    </script>

<!--HTML-->
  <div id="imgwrap">
        <div id="photo_1" style="opacity: 0.0;">
    <img src="images/image.jpg" alt="image 1" /></a>
     </div>
 </div>

 <div id="photo_2" style="display: none;">
    <img src="images/image_2.jpg" alt="image 2" /></a>
     </div>

<div id="thumb_1"><a href="#photo_1" onClick="switch_product_img('photo_1', 4);"><img src="images/image_thumb.jpg" alt="image thumbnail" /></a></div>

<div id="thumb_2"><a href="#photo_2" onClick="switch_product_img('photo_2', 4);"><img src="images/image_2_thumb.jpg" alt="image 2 thumbnail" /></a></div>

<!--JAVASCRIPT IMAGE ON-CLICK DISPLAY-->
<script language="javascript" type="text/javascript">
        function switch_product_img(divName, totalImgs) 
        {
            for (var i=1; i<=totalImgs; i++) 
            {
                var showDivName = 'photo_' + i;
                var showObj = document.getElementById(showDivName);
                if (showDivName == divName)
                    showObj.style.display = 'block';
                else
                    showObj.style.display = 'none';
            }
        }
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:33:04.220

您在 jquery 中使用标准 javascript。你改变图片功能太复杂了。

下面的脚本是非常标准的 jquery。当您单击带有类的“a”时`thumbs`，它将调用函数此脚本将隐藏所有带有类`photos`的图片并显示带有 id 的图片`href`。

```
<script>
$(function(){    //same as .load() but jquery style
  $("#dropimage").slideDown(500);
  $(".thumbs").click(function () {    // functions runs any time a <a href>  
                                      // with class thumbs` is clicked.

      var t = $(this);  // get the <a href> that was clicked.
       $('.photos').hide(); //hide all photos with class photo

      var href = t.attr('href'); //  get the href of the link clicked.
      $(href).show();    //show the photo u need. becauee the link and the
                         //id are the same.
    });

});
</script>

 <div id="photo_1" class="photos">
    <div id="dropimage" style="opacity: 0.0;">
<img src="images/image.jpg" alt="image 1" /></a>
 </div> 
```

```
 <div class="photos" id="photo_2" style="display: none;">
    <img src="images/image_2.jpg" alt="image 2" /></a>
     </div>

<div id="thumb_1"><a class="thumbs" href="#photo_1"><img src="images/image_thumb.jpg" alt="image thumbnail" /></a></div>

<div id="thumb_2"><a class="thumbs"  href="#photo_2"><img src="images/image_2_thumb.jpg" alt="image 2 thumbnail" /></a></div> 
```

`

# javascript - 选中复选框时启用禁用表格内的文本框

> ID：12593625
> 
> 赞同：3
> 
> 时间：2012-09-26T02:08:54.397
> 
> 标签：javascript, jquery

我正在使用 jQuery。选中复选框时如何启用或禁用表格内的文本框。这是我的edit.cshtml。

```
 <table id="scDetails" class="dataTable">
            <thead>
                <tr>
                    <th>RItem</th>
                    <th>IChecked</th>
                    <th>Notes</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var fback in Model.Fbacks)
                {
                    <tr>
                        <td @Html.DisplayFor(m => fback.RItem)</td>
                        <td>@Html.CheckBoxFor(m => fback.IChecked)</td>
                        <td>@Html.TextBoxFor(m => fback.Notes)</td>
                    </tr>
                }
            </tbody>
        </table> 
```

我试过的是：

```
 $('td :checkbox').change(function () {
            var parentTx = $(this).closest('tr').find(input[type = "text"]);
            if (this.checked) {
                parentTx.attr("disabled",false);
            } else {
                parentTx.attr("disabled", true);
            }
        }); 
```

哪里做错了？我不想在控件上使用任何类来实现这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T02:11:51.213

您错过了引号，您可以简单地使用以下代码：

```
$('td input[type="checkbox"]').change(function () {
  $(this).closest('tr').find('input[type="text"]').prop('disabled', !this.checked);
}).change(); 
```

# java - Maven Error No POM in this Project when execution archetype:generate

> ID：12593628
> 
> 赞同：7
> 
> 时间：2012-09-26T02:08:59.240
> 
> 标签：java, maven, akka

我正在尝试 Akka Pi java 教程

我正在尝试按照教程中的说明创建一个 Maven 项目

但是任何时候我输入命令来创建一个 Maven 项目我都会得到一个错误。下面是命令和错误。

```
C:\Program Files\akka-2.0.2>mvn archetype:generate \

C:\Program Files\akka-2.0.2>mvn archetype:generate \
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.206s
[INFO] Finished at: Wed Sep 26 02:50:38 BST 2012
[INFO] Final Memory: 11M/245M
[INFO] ------------------------------------------------------------------------
[ERROR] The goal you specified requires a project to execute but there is no POM
 in this directory (C:\Program Files\akka-2.0.2). Please verify you invoked Mave
n from the correct directory. -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e swit
ch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please rea
d the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MissingProject
Exception 
```

看起来maven正在请求POM文件，但在tutrials中没有说明我必须在生成项目之前创建一个POM。我实际上是新手，所以请原谅我。我使用的是 maven 版本：3.0.4 和 akka 版本 2.0.2，但本教程使用的是 akka 版本 2.0.1，但我认为这不是问题，请提供任何建议。

谢谢你

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T02:16:40.757

删除`\`然后它应该开始查询更多信息。

我这里没有窗口，但在 linux 上它显示相同的行为

```
mvn archetype:generate / 
```

HTH R

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-08T11:29:28.350

当一些教程描述要执行的 mvn 命令包含两行或更多行时，他们可能会在（指令的）新行添加一个额外的反斜杠，以指示相同的命令在下一行继续。

在执行命令之前应该删除这个反斜杠。例如，设置 Jersey Web 应用程序的命令可能如下所示：

```
mvn archetype:generate -DarchetypeGroupId=org.glassfish.jersey.archetypes \
-DarchetypeArtifactId=jersey-quickstart-webapp -DarchetypeVersion=2.2 
```

但应按如下方式启动，不带反斜杠：

```
mvn archetype:generate -DarchetypeGroupId=org.glassfish.jersey.archetypes -DarchetypeArtifactId=jersey-quickstart-webapp -DarchetypeVersion=2.2 
```

如果不删除这个额外的反斜杠，您可能会收到上述错误。

# java - com.mysql.jdbc.exceptions.jdbc4.CommunicationsException：通信链接

> ID：12593634
> 
> 赞同：1
> 
> 时间：2012-09-26T02:09:44.733
> 
> 标签：java, mysql, jdbc, xampp

我正在使用 Mac OS X Lion 版本 10.8。我通过 XAMPP 安装了 MySQL。我已将 mysql 和 jdbc 驱动程序 (5.1.22) 添加到我的类路径中。以下简单代码不起作用：

```
package learning.database;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;

public class Simple {

Connection getConnection() throws SQLException{
String url = "jdbc:mysql://localhost/";
return DriverManager.getConnection(url, "username", "password");
}

void createDatabase(String database, Connection conn) throws SQLException{
Statement stmt = null;
try {
stmt = conn.createStatement();
stmt.executeUpdate("drop database if exists "+database);
stmt.executeUpdate("create database "+database);
}finally {
if(null != stmt)
stmt.close();
}
}

public static void main(String args[]) throws Exception{
String school = "school";
Classroom cr = new Classroom();
Connection conn = cr.getConnection();
cr.createDatabase(school, conn);
}
} 
```

当我运行代码时，我收到以下错误：

```
Exception in thread "main" com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1117)
at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:350)
at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2408)
at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2445)
at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2230)
at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:813)
at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:334)
at java.sql.DriverManager.getConnection(DriverManager.java:582)
at java.sql.DriverManager.getConnection(DriverManager.java:185)
at learning.database.Classroom.getConnection(Classroom.java:43)
at learning.database.Simple.main(Simple.java:33)
Caused by: java.net.ConnectException: Connection refused
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:432)
at java.net.Socket.connect(Socket.java:529)
at java.net.Socket.connect(Socket.java:478)
at java.net.Socket.<init>(Socket.java:375)
at java.net.Socket.<init>(Socket.java:218)
at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:259)
at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:300)
... 16 more 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T15:45:50.533

我终于弄明白了。感谢 Max 和 Yogendra 的发帖。问题原来是我的 XAMPP 配置。为了解决这个问题，我做了如下：

```
-   sudo vi /Applications/XAMPP/etc/my.cnf 
⁃   scroll down to `skip-networking`
⁃   comment it out by changing it to `#skip-networking`
⁃   save the changes.
⁃   restart mysql from XAMPP Console 
```

然后我运行我的代码，一切都很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:31:54.710

MySQL 数据库请使用 mysql-connector-java-5.1.10-bin.jar 或以上版本。以下是正确的代码。从 jdbc 更改导入语句。例如。导入 com.mysql.jdbc.Connection；并导入 com.mysql.jdbc.Statement；而不是导入 java.sql.Connection；并导入 java.sql.Statement；

您需要使用 Class.forName(driver) 为 MySQL 加载类驱动程序。使用以下代码它将起作用。

```
 Connection conn = null;
            String url = "jdbc:mysql://localhost:3306/";
            String dbName = "databaseName";
            String driver = "com.mysql.jdbc.Driver";
            String userName = "root";
            String password = "root";
            try
            {
                    Class.forName(driver).newInstance();
                    conn = (Connection) DriverManager.getConnection(url
                                    + dbName, userName, password);
                    Statement stmt = (Statement) conn.createStatement();
            } catch (Exception e)
            {
                    e.printStackTrace();
            } 
```

# javascript - 从谷歌地理编码 api 获取 latLong

> ID：12593636
> 
> 赞同：0
> 
> 时间：2012-09-26T02:09:44.727
> 
> 标签：javascript, google-maps-api-3, global-variables, google-geocoder

我正在尝试使用 Google Geocoding API 从地址中获取纬度和经度。我想将坐标存储在一个变量中以便以后使用它们。我知道这是一个异步调用。在下面的代码中我尝试使用函数 useCordinates 将坐标分配给全局变量，以便我以后可以使用它。但是我在调​​试时没有定义坐标。我是 javascript 的新手。我在某处读到隐含的全局变量不需要定义。

myGlobalVar = '你好世界'; 谢谢您的帮助。

```
 function codeAddress(address){
  var loc=[];
  geocoder.geocode( { 'address': address}, function(results, status) {
  if (status == google.maps.GeocoderStatus.OK) {
     // no need to define it in outer function now
    loc[0]=results[0].geometry.location.lat();
    loc[1]=results[0].geometry.location.lng();

    useCordinates( loc ); 

  } else {
    alert("Geocode was not successful for the following reason: " + status);
  }
});
}

function useCordinates(cordinateArray){
 cordinates= cordinateArray;
  }
functionTestCodeAddress(){
 start = document.getElementById('start').value;
 codeAddress(start);
 //assign the global variable 'cordinates'
 document.getElementById('start').value=cordinates; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:21:43.710

问题不在于变量，问题在于您尝试访问变量**时。**

目前，您在调用 codeAddress() 后立即在 TestCodeAddress() 中执行此操作，这还为时过早，因为此时异步请求尚未完成。

例如，您可以移动此行：

```
document.getElementById('start').value=cordinates; 
```

进入`useCordinates()`

# debugging - 当break(函数名)/break *(函数名)时gdb中断地址不同

> ID：12593638
> 
> 赞同：4
> 
> 时间：2012-09-26T02:09:56.170
> 
> 标签：debugging, gdb, break, symbols, memory-address

```
#include <stdio.h>

int main(void){
   int sum = 0;
   sum += 0xabcd;
   printf(“%x”, sum);
   return 0;
} 
```

这是我的代码，当我使用 gdb 时，我可以在 break main / break *main 时找到不同的地址。

当我键入 disassemble main 时，它显示如下：

```
Dump of assembler code for function main:

0x080483c4 <+0>: push %ebp
0x080483c5 <+1>: mov %esp,%ebp
0x080483c7 <+3>: and $0xfffffff0,%esp
0x080483ca <+6>: sub $0x20,%esp
0x080483cd <+9>: movl $0x0,0x1c(%esp)
0x080483d5 <+17>:addl $0xabcd,0x1c(%esp)
0x080483dd <+25>:mov $0x80484c0,%eax
0x080483e2 <+30>:mov 0x1c(%esp),%edx
0x080483e6 <+34>:mov %edx,0x4(%esp)
0x080483ea <+38>:mov %eax,(%esp)
0x080483ed <+41>:call 0x80482f4 <printf@plt>
0x080483f2 <+46>:mov $0x0,%eax
0x080483f7 <+51>:leave
0x080483f8 <+52>:ret

End of assembler dump. 
```

因此，当我输入 [break *main] 时，它从 0x080483c4 开始，但输入 [break main] 时，它从 0x080483cd 开始

为什么起始地址不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T06:56:39.333

> 为什么地址不一样。

因为`break function`和`break *address`不是[一回事](http://sourceware.org/gdb/onlinedocs/gdb/Specify-Location.html#Specify-Location)（`*address`指定函数的第一条指令的地址，在设置堆栈帧和参数之前）。

在第一种情况下，GDB 跳过函数 prolog（设置当前帧）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:23:18.390

完全猜测 - 并准备完全错误。

*main if 函数的地址

在 main 内部中断是在函数执行时在函数内部停止的第一个可用地址。

请注意，0x080483cd 是调试器在修改变量时可以停止的第一个位置（即，将零分配给总和）

当您在 0x080483c4 处中断时，这是在 C 不知道的设置汇编程序之前

# finite-automata - DFA和Loop、NFA和递归之间有关系吗？

> ID：12593641
> 
> 赞同：1
> 
> 时间：2012-09-26T02:10:24.787
> 
> 标签：finite-automata, automata-theory

听说DFA可以用Loop模拟，NFA可以用递归模拟。我不明白这是怎么回事。谁能给我一个例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:03:46.127

从某种意义上说，当然。DFA 可以通过基于当前状态编写一个`do...while`包含语句的循环来轻松模拟`switch`，而您可以将 NFA 的模拟器视为在树上进行搜索（深度优先搜索是递归的，尽管您可以想象广度优先搜索）。这实际上没有任何形式，只是对如何实现模拟器的随意观察。

# sql - SQL Oracle - 想要在案例中添加另一个“喜欢”条件

> ID：12593642
> 
> 赞同：1
> 
> 时间：2012-09-26T02:10:32.430
> 
> 标签：sql, oracle

```
I have the following query:

Select 
Count(Distinct Case When Play.Uuid Like ('i~%') Then Tap.Player_Id End) As Tapjoy_Ios
From
Player_Tapjoy Tap
Inner Join 
Player Play 
On 
Tap.Player_Id = Play.Player_Id
Where 
Trunc(Tap.Create_Dtime) >= To_Date('2012-Jan-01','yyyy-mon-dd') 
```

我想添加另一个类似的约束，以便结果出现在 play.uuid like ('i~%' or 'ti~%')..但这似乎不起作用。我怎么能实现这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:30:47.750

虽然答案是正确的，但您在错误的级别上应用了条件。您通常希望过滤数据以获得更好的性能，尽管此处的 LIKE 子句使其不那么重要。

```
 Select Count(Distinct Tap.Player_Id) As Tapjoy_Ios
      From Player_Tapjoy Tap
Inner Join Player Play On Tap.Player_Id = Play.Player_Id
     Where Tap.Create_Dtime >= To_Date('2012-Jan-01','yyyy-mon-dd')
       And (Play.Uuid Like ('i~%') OR Play.Uuid Like ('ti~%')) 
```

正如问题中所写，它正在处理所有行并在那些与 LIKE 模式不匹配的行上发出嘶嘶声。您也不想对不允许使用索引的列运行函数 - 我已经更新了您的日期过滤器。你真的不需要TRUNC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T02:12:40.917

您需要两个`LIKE`由逻辑连接的完整子句`OR`，每个子句都有`LIKE`关键字的左侧和右侧（左侧的列，右侧的字符串值）。

```
count(Distinct Case When (Play.Uuid Like 'i~%') OR (Play.Uuid LIKE 'ti~%') Then Tap.Player_Id End) As Tapjoy_Ios 
```

[`REGEXP_LIKE`](http://docs.oracle.com/cd/B14117_01/server.101/b10759/conditions018.htm)您也可以使用正则表达式 g对单个 进行此操作`^t?i~.+`：

```
count(Distinct Case When REGEXP_LIKE(Play.Uuid, '^t?i~.+') Then Tap.Player_Id End) As Tapjoy_Ios 
```

*   `^`是字符串的开头
*   `t?`是可选的`t`
*   `i~`是字面的
*   `.+`是任何剩余的字符，相当于`%`一个常规的`LIKE`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T02:13:46.010

你可以只使用一个`OR`：

```
Select Count(Distinct Case When Play.Uuid Like ('i~%')
                          OR Play.Uuid Like ('ti~%') 
                      Then Tap.Player_Id End) As Tapjoy_Ios
From Player_Tapjoy Tap
Inner Join Player Play 
  On Tap.Player_Id = Play.Player_Id
Where Trunc(Tap.Create_Dtime) >= To_Date('2012-Jan-01','yyyy-mon-dd') 
```

# c - tsearch 函数不在 struct 中维护 struct 指针。信息丢失问题

> ID：12593643
> 
> 赞同：4
> 
> 时间：2012-09-26T02:10:50.747
> 
> 标签：c, struct, binary-tree

我在 C 中使用一棵树来跟踪未定义和不同数量的输入字段。我有一个包含一组字段的结构，如下所示：

```
struct mystruct {
    int id, mpid;
    char *name;
    struct myotherstruct *myostr;
}; 
```

我有一个这种类型的指针实例（ mystruct ），我为其分配内存，然后用从文件中读取的输入填充这些结构值。然后，我使用 search.h 中的 tsearch 函数将 mystruct 对象添加到 mystruct 树。我遇到的问题是，如果我使用 tfind 函数从树中检索 mystruct 指针，则返回的 mystruct 内存不记得我在创建值之前分配并指向的 myotherstruct 指针数据添加到那个树。

一般顺序如下：

```
struct mystruct {
    int id, mpid;
    char *name;
    struct myotherstruct *myostr;
};

struct myotherstruct {
    int spid;
};

// allocate memory to temporary mystruct pointer
// add mpid field to mystruct pointer ( used in comparison function )

if( // tfind  == NULL )
{
    // set id value
    // allocate char memory and strncpy correct value in
    // allocate myotherstruct memory and assign all values
    // tsearch for this newly created mystruct memory chunk so that it is added to tree
}
else
{
    // fails here when attempting to access the data returned by mytfind
}

... 
```

使用 gdb，程序第一次非常清楚地进入 if 循环（因为树是空的）并创建一个有效且完整的 mystruct 指针，并分配适当的内存。当 tsearch 返回它的输出时，内存位置与我填写的 mystruct 指针的位置不同，然后我无法为 mystruct->myotherstruct 变量（例如 spid）进行打印。尝试在 gdb 中打印时得到的确切输出是：无法访问地址 0x----- 处的内存，其中 - 是我显然无法访问的内存中的各个位置。

我怀疑我的比较函数可能存在问题，因为我只是比较 mystruct mpid 字段以确定是否存在 mystruct 对象的树节点，但是我对 C 和 tsearch/tfind 功能的缺乏经验在这里显示了一点。希望有更多经验的人能够帮助我，因为各种 tsearch.h 网页上提供的示例不能处理非常复杂的示例。在此先感谢您的帮助！

PS：代码必须保留在 C 中，所以语言交换是不够的 :(

编辑：

这是我的比较功能：

```
int distcmp(const void *a, const void *b){
   return ((int)((struct mystruct *)a)->mpid) != (int)(((struct mystruct *)b)->mpid);
} 
```

另外，我最初使用 tfind 是因为我想知道树中是否存在特定值。如果它不存在（它返回 NULL ）然后它进入 if 循环并填充新的 mystruct 对象并将其添加到树中（使用 tsearch ）。如果它已经存在，则指向该对象的指针来自 tfind，我将其分配给 mystruct 指针并在代码的 else 部分中使用。希望这会有所帮助。再次感谢。

解决了：

只是为了更新，问题是从 tsearch 和 tfind 返回的指针不是 mystruct 类型。它是指向与我的搜索匹配的 mystruct 值的内存位置的指针。在这种情况下，可以通过使用 * 访问返回的指针并将该值传递给 mystruct 指针来解决问题。感谢那些评论的人。

# css - 无法像按钮一样设置 FB 样式

> ID：12593644
> 
> 赞同：-2
> 
> 时间：2012-09-26T02:10:54.413
> 
> 标签：css, facebook

我一直在尝试遵循我在这里找到的所有建议，但我似乎无法为 Facebook 按钮设置样式。这是网站：[http ://www.threespringsranch.com/](http://www.threespringsranch.com/)

在这一点上，我只是试图阻止评论框作为问题的最简单解决方案出现。我已经尝试将 .fb_edge_comment_widget {display: none !important;} 添加到我的 css 中，但它不会读取它。我究竟做错了什么？

谢谢，布赖恩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T02:17:29.277

简短的回答是，不可能为 FB 按钮设置样式。它位于 iframe 中，您无法真正访问其中的样式。

不仅如此，Facebook 政策还禁止您修改其小部件的外观和感觉。

> d。您不得遮盖或遮盖我们社交插件的元素，例如点赞按钮或点赞框插件。

[来自 Facebook 政策](https://developers.facebook.com/policy/)

而且，如果您不关心警告，那么您可以“隐藏”like 按钮的评论弹出窗口，方法是将其包装到元素（`div`或`span`）中，在此包装器上设置大小并添加`overflow: hidden`CSS 道具。这会有点工作，但如果你必须管理国际化，因为按钮会改变大小，这将是不可维护的。

所以，最好的，不要修改它，否则，你有一个小技巧。

# javascript - 将今天的日期与另一个日期进行比较会返回错误的日期，为什么？

> ID：12593653
> 
> 赞同：28
> 
> 时间：2012-09-26T02:13:19.723
> 
> 标签：javascript, momentjs

我正在使用[moment.js](http://momentjs.com/) 1.7.0 尝试将今天的日期与另一个日期进行比较，但该`diff`函数说由于某种原因它们相隔 1 天。

**代码**：

```
var releaseDate = moment("2012-09-25");
var now = moment(); //Today is 2012-09-25, same as releaseDate  
console.log("RELEASE: " + releaseDate.format("YYYY-MM-DD"));
console.log("NOW: " + now.format("YYYY-MM-DD"));
console.log("DIFF: " + now.diff(releaseDate, 'days')); 
```

**控制台**：

```
RELEASE: 2012-09-25
NOW: 2012-09-25
DIFF: 1 
```

想法？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-26T02:55:13.270

根据[文档](http://momentjs.com/docs/#/displaying/difference/)（和简短的测试），moment.js 围绕日期对象创建包装器。该声明：

```
var now = moment(); 
```

创建一个“时刻”对象，其核心是一个新的 Date 对象，就像 by 一样`new Date()`，因此小时、分钟和秒将设置为当前时间。

该声明：

```
var releaseDate = moment("2012-09-25"); 
```

创建一个时刻对象，它的核心是一个新的 Date 对象，就好像`new Date(2012, 8, 25)`本地时区的小时、分钟和秒都将设置为零一样。

`moment.diff`返回一个基于两个日期之间以毫秒为单位的**四舍五入**差异的值。`true`要查看完整值，请作为第三个参数传递：

```
 now.diff(releaseDate, 'days', true)
 ------------------------------^ 
```

因此，这将取决于代码运行的时间以及本地时区`now.diff(releaseDate, 'days')`是零还是一，即使在同一本地日期运行也是如此。

如果您只想比较日期，请使用：

```
var now = moment().startOf('day'); 
```

这会将时间设置为本地时区的 00:00:00。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-18T21:14:29.237

RobG 对这个问题的回答是正确的，所以这个答案只适用于那些搜索如何在 momentjs 中比较日期的人。

我尝试使用上面提到的 startOf('day') ：

```
var compare = moment(dateA).startOf('day') === moment(dateB).startOf('day'); 
```

这对我不起作用。

我不得不使用[isSame](http://momentjs.com/docs/#/query/is-same/)：

```
var compare = moment(dateA).isSame(dateB, 'day'); 
```

# python - 如何在 Python 中通过 ssl 使用套接字连接到 gmail

> ID：12593654
> 
> 赞同：1
> 
> 时间：2012-09-26T02:13:20.500
> 
> 标签：python, sockets

到目前为止，我的代码如下：

```
from socket import *
import ssl
msg = "\r\n smtp..."
endmsg = "\r\n.\r\n"

# Choose a mail server (e.g. Google mail server) and call it mailserver
mailserver = ("smtp.gmail.com", 587)

# Create socket called clientSocket and establish a TCP connection with mailserver over SSL
clientSocket = socket(AF_INET, SOCK_STREAM);
clientSocket = ssl.wrap_socket(clientSocket, ssl_version=ssl.PROTOCOL_SSLv23)
clientSocket.connect(mailserver)

#Print server response
recv = clientSocket.recv(1024)
print recv
if recv[:3] != '220':
print '220 reply not received from server.' 
```

我在尝试运行此脚本时收到错误消息 ssl.SSLERrror: [Errno 1] _ssl.c:504: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol。在其他时候，我收到有关服务器未及时响应的错误。

有没有人知道我做错了什么？（是的，我知道我可以使用 smtplib 来处理 smtp 服务器，但这是一个练习）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:24:53.460

端口 587 未加密。

```
telnet smtp.gmail.com 587

Trying 74.125.142.109...
Connected to gmail-smtp-msa.l.google.com.
Escape character is '^]'.
220 mx.google.com ESMTP aa4sm9457625igc.15
helo test.com
250 mx.google.com at your service 
```

# javascript - Jquery从url中提取字符串并加载远程元素

> ID：12593655
> 
> 赞同：0
> 
> 时间：2012-09-26T02:13:20.837
> 
> 标签：javascript, jquery, load

我是 Jquery 的新手，我想要 Jquery 代码来获取当前页面的 url，如果 url 包含某些字符串，则加载远程元素。

例子：

我有这样的页面网址：

```
"http://......./Country/AU/result-search-to-buy"
"http://......./Country/CA/result-search-to-buy"
"http://......./Country/UK/result-search-to-buy" 
```

“/Country/AU”部分是我需要确定我应该加载哪个页面元素，然后如果“AU”我从“/state-loader.html .state-AU”加载，如果“CA”我从加载“/state-loader.html .state-CA”

我有一个内置模块“ **{module_pageaddress}** ”来获取当前页面url的值，我只是不知道让它工作的Jquery逻辑。

我期待这样的事情：

```
if {module_pageaddress} contains "/Country/AU/" 
$('#MyDiv').load('state-loader.html .state-AU');

if {module_pageaddress} contains "/Country/CA/" 
$('#MyDiv').load('state-loader.html .state-CA'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:26:16.207

如果国家/地区字符串始终位于 URL 中最后一个斜杠之前，您可以尝试以下操作

看现场[小提琴](http://jsfiddle.net/HdHvh/)

```
var url = "http://......./Country/AU/result-search-to-buy"
var loc = url.split( '/' );

    //should be using the next line in live
//var loc = window.location.pathname.split( '/' );

var country = alert(loc [loc.length-2]); 
```

# ios - 如何使表格视图单元格上的按钮调用正确的 tableView:cellForRowAtIndexPath？

> ID：12593656
> 
> 赞同：1
> 
> 时间：2012-09-26T02:13:42.597
> 
> 标签：ios, uitableview

我有一个按钮，它是自定义 UITableViewCell 的一部分。我想要的是，当有人单击按钮时，为该单元格调用正确的 tableView:cellForRowAtIndexPath 。

如何将按钮绑定到正确的 cellForRowAtIndexPath？

任何建议和/或代码示例将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:34:39.140

您可以从触摸事件中获取 indexPath。将您的 buttonTapped 方法修改为：

```
- (void) buttonTapped:(id) sender forEvent:(UIEvent *)event 
```

然后使用类似下面的东西：

```
NSIndexPath *indexPath = [tableView indexPathForRowAtPoint:[[[event touchesForView:sender] anyObject] locationInView:tableView]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T03:30:06.347

如果你只有一个部分，你可能可以使用`UIView`'`tag`属性。

像下面这样的东西理论上会起作用。

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)idxPath 
{
    Your_UITableViewCell_Subclass * cell = [tableView dequeueCellWithIdentifier:@"..."];
    cell.button.tag = idxPath.row;

    ....

    return cell;
}

....

- (void) buttonTapped:(id) sender 
{
    int idx = ((UIButton *)sender).tag;
    NSIndexPath * idxPath = [NSIndexPath indexPathForRow:idx inSection:0];
    UITableViewCell * cell = [self tableView:tableView cellForRowAtIndexPath:idxPath];

    // Do whatever you want to do with the cell
} 
```

# php - PHP 作为 Node.js 服务器的客户端

> ID：12593659
> 
> 赞同：1
> 
> 时间：2012-09-26T02:13:51.783
> 
> 标签：php, node.js, symfony

我想使用 PHP (Symfony2)，因为用它构建应用程序比构建带节点的应用程序 (IMO) 更快。但是，我想要节点的速度和可扩展性。我提出的解决方案是使用节点来处理应用程序的所有数据。然后，我将使用 Symfony2 作为节点的客户端，并从节点服务器的 REST API 中提取我需要的任何数据。然后我可以使用我的 iOS/android 应用程序直接连接到节点，并利用它的可扩展性。这是一个可行的解决方案吗？如何改进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T02:54:18.907

如果我理解正确你想知道。

**一个）。**如果您可以使用 nodejs 构建 API 服务器。显而易见的答案是肯定的。

**乙）。**如果您的 PHP 应用程序可以从 nodejs api 服务器获取数据。再次是的，你可以这样做。

**C）。**如果您的移动应用程序可以从 nodejs api 服务器获取数据。第三次是的。

但是要明白，您现在必须处理两种不同的服务器端技术\语言。

如果这“更快”或“更易于维护”，那么您将不得不权衡使用相同的堆栈构建两个应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T03:00:35.287

使 Symfony 或任何受 Rails 启发的框架能够快速开发的原因是脚手架。通过使用 Node 作为后端来处理数据管理（API），您将失去所有这些，而只保留 Symfony 的 MVC 的 VC（视图控制器）。如果您只保留这些并添加拥有 2 个后端的混乱，您将不会变得更快。

它们是一些受 Rails 启发的 Node.js 框架。 [铁路](http://railwayjs.com/)就是其中之一。

# asp.net-mvc - ASP.NET MVC 3 控制器扩展方法

> ID：12593665
> 
> 赞同：1
> 
> 时间：2012-09-26T02:14:18.760
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-membership, extension-methods

我是 mvc 3 的新手，我正在将它与 asp.net 会员提供程序一起使用....所以我想创建一个扩展方法，让我从我的网站上的任何控制器获取登录的用户 GUID

像这样的东西：

```
 public static Guid GetLoggedUser(this Controller controller)
    {
        return (Guid)Membership.GetUser(controller.User.Identity.Name).ProviderUserKey.ToString();
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:12:22.470

为什么不在 ControllerBase 类上使用“用户”属性？

```
public class MyController : Controller
{
    public ActionResult GetUser() 
    {
         var userName = User.Identity.Name;
    }
} 
```

您可以使用自定义 IPrincipal/IIdentity 包含有关您的用户的其他信息。[以下](http://ondotnet.com/pub/a/dotnet/2004/02/02/effectiveformsauth.html)是使用 Forms Auth 时的操作方法。

# java - 冒泡排序双向链表Java

> ID：12593667
> 
> 赞同：0
> 
> 时间：2012-09-26T02:14:38.713
> 
> 标签：java, sorting, linked-list, bubble-sort, doubly-linked-list

我正在尝试在 Java 中的双向链表上创建冒泡排序，但出现 Null Pointer Exception 错误。我相信当我在头部调用 getPrevious 方法时会出现问题，该方法的值当然为 null。但是，如果不访问其他节点的 getPrevious 方法，我无法考虑如何进行冒泡排序。

我可以实现一个 if 语句来首先检查它是列表的头部还是尾部，但我觉得有一种更聪明的方法可以做到这一点。

我也无法成功运行此构建，因此甚至不确定代码是否可以正常工作。如果您对如何实现这一点有不同的想法，请告诉我。

欢迎任何建议！

```
 public static void bubbleSort(DoubleLinkedList list) //static method used to sort the linked list using bubble sort
  {
      int i = 0;
      int j = 0;
      Node currentNode = list.head;
      Node previousNode = currentNode;
      Node tempNext =  currentNode;
      Node tempPrevious = currentNode;

      for(i=0; i<list.getSize(); i++)
      {
          for(j=0; j<list.getSize()-1; i++)
          {
              if(currentNode.getData() > currentNode.getNext().getData())
              {
                  tempNext = currentNode.getNext().getNext();
                  tempPrevious = currentNode.getPrevious();
                  currentNode.getPrevious().setNext(currentNode.getNext());
                  currentNode.getNext().setNext(currentNode);
                  currentNode.setPrevious(currentNode.getNext());
                  currentNode.setNext(tempNext);

              }

              currentNode = currentNode.getNext();

          }
      }

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:35:24.627

所以你有一个双链表。我假设每个元素都包含一些信息……比如说一个整数。它还必须包含两个指针：一个指向前一个元素，一个指向下一个元素。

假设这是真的，请注意您不必修改指针，因为它们已经从一个元素指向另一个元素。您所要做的就是对列表元素的值进行排序，以便列表中的第一项具有最低值，第二项具有第二低值，依此类推。

你可以这样做：

```
public static void bubbleSort(DoubleLinkedList list) //static method used to sort the linked list using bubble sort {
      int i = 0;
      Node currentNode = list.head;
      Node auxNode;
      int foundChange = 1;
      while(foundChange) {
        foundChange = 0;
        for(i=0; i<list.getSize()-1; i++) {
          if (currentNode.getData() > currentNode.getNext().getData()) {
            auxNode.setData(currentNode.getData());
            currentNode.setData(currentNode.getNext.getData());
            currentNode.getNext.setData(auxNode.getData());
            foundChange = 1;
          }
          currentNode = currentNode.getNext();
        }

} 
```

如果您尚未定义 setData 方法，请执行此操作。它必须类似于 getData，但它将对象的数据设置为它作为参数获取的值，而不是返回该对象中数据的值。

# php - 使用表格中的数据显示过去 30 天

> ID：12593668
> 
> 赞同：0
> 
> 时间：2012-09-26T02:14:40.163
> 
> 标签：php, mysql, arrays, zend-framework

我有一个记录表，其中有一列包含 created_date。我正在寻找一种按日期显示这些记录的方法。因此，今天将仅显示今天添加的记录，然后在该表下方显示昨天仅显示昨天的记录。我确信它是某种类型的数组，可能比我想象的要简单，但我已经查看了一些循环并且无法将它拼凑在一起。试过这个，但不知道如何使用它来填充记录。

```
for ($i = 0; $i < 30; i++)
{
$timestamp = time();
$tm = 86400 * $i; // 60 * 60 * 24 = 86400 = 1 day in seconds
$tm = $timestamp - $tm;

$the_date = date("m/d/Y", $tm);
} 
```

同样自从用 Zend 编写以来，我需要在控制器、模型、视图中使用适当的东西。我认为这个观点是我坚持的。该模型将按日期检索数据。谢谢您的帮助！

2012 年 9 月 25 日 10:27 更新 这是视图的控制器

```
 public function detailsAction() 
{
    $request   = $this->getRequest();
    $setId     = $request->getParam('set_id');
    $pageIndex = $request->getParam('page_index', 1);
    $perPage = 15;
    $offset  = ($pageIndex - 1) * $perPage;

    $conn = XXX_Db_Connection::factory()->getSlaveConnection();
    $setDao  = XXX_Model_Dao_Factory::getInstance()->setModule('media')->getSetDao();
    $photoDao = XXX_Model_Dao_Factory::getInstance()->setModule('media')->getPhotoDao();
    $setDao->setDbConnection($conn);
    $photoDao->setDbConnection($conn);

    $set = $setDao->getById($setId);
    if (null == $set) {
        throw new XXX_Exception_NotFound();
    }

    /**
     * Get the list of photo that belongs to this set
     */
    $photos       = $photoDao->getPhotosInSet($setId, $offset, $perPage, true);
    $numPhotos = $photoDao->countPhotosInSet($setId, true);

    /**
     * Paginator
     */
    $paginator = new Zend_Paginator(new XXX_Utility_PaginatorAdapter($photos, $numPhotos));
    $paginator->setCurrentPageNumber($pageIndex);
    $paginator->setItemCountPerPage($perPage);

    $this->view->assign('set', $set);
    $this->view->assign('photos', $photos);

    $this->view->assign('paginator', $paginator);
    $this->view->assign('paginatorOptions', array(
        'path'     => $this->view->url($set->getProperties(), 'media_set_details'),
        'itemLink' => 'page-%d',
    ));
} 
```

这是相关的模型

```
 public function getById($id) 
{
    $sql = sprintf("SELECT * FROM " . $this->_prefix . "media_set 
                    WHERE set_id = '%s'
                    LIMIT 1", 
                    mysql_real_escape_string($id));
    $rs  = mysql_query($sql);
    $return = (0 == mysql_num_rows($rs)) ? null : new Media_Models_Set(mysql_fetch_object($rs));
    mysql_free_result($rs);
    return $return;
}

    public function getPhotosInSet($setId, $offset = null, $count = null, $isActive = null)
{
    $sql = sprintf("SELECT * FROM " . $this->_prefix . "media_photo AS f
                    INNER JOIN " . $this->_prefix . "media_photo_set_assoc AS fs
                        ON fs.photo_id = f.photo_id AND fs.set_id = '%s'",
                    mysql_real_escape_string($setId));
    if (is_bool($isActive)) {
        $sql .= sprintf(" WHERE f.is_active = '%s'", (int)$isActive);
    }
    $sql .= " ORDER BY f.photo_id DESC";
    if (is_int($offset) && is_int($count)) {
        $sql .= sprintf(" LIMIT %s, %s", $offset, $count);
    }

    $rs   = mysql_query($sql);
    $rows = array();
    while ($row = mysql_fetch_object($rs)) {
        $rows[] = $row;
    }
    mysql_free_result($rs);
    return new XXX_Model_RecordSet($rows, $this);
}

public function countPhotosInSet($setId, $isActive = null)
{
    $sql = sprintf("SELECT COUNT(*) AS num_photos FROM " . $this->_prefix . "media_photo AS f
                    INNER JOIN " . $this->_prefix . "media_photo_set_assoc AS fs
                    ON fs.photo_id = f.photo_id AND fs.set_id = '%s'",
                    mysql_real_escape_string($setId));
    if (is_bool($isActive)) {
        $sql .= sprintf(" WHERE f.is_active = '%s'", (int)$isActive);
    }
    $sql .= " LIMIT 1";
    $rs   = mysql_query($sql);
    $row  = mysql_fetch_object($rs);
    mysql_free_result($rs);
    return $row->num_photos;
} 
```

2012 年 9 月 26 日更新 - 添加了新方法

我已将此添加到我的视图中，它将日期显示为我想要的标题，但它也会打印重复项。我希望将它们按日期分组：

这是视图：

```
<?php if ($this->sets) : ?>
<div class="t_media_list_sets">
<h2><?php echo $this->translator()->widget('title'); ?></h2>

<ul>
    <?php foreach ($this->sets as $set) : ?>
    <?php $curDate = 0; ?>
    <?php $date = $set->created_date; ?>
    <?php if ($date != $curDate) : ?>
        <?php $curDate = $date; ?>
        <?php echo  $curDate; ?>
    <?php endif; ?>

    <li>
        <a href="<?php echo $this->url($set->getProperties(), 'media_set_details'); ?>">
            <?php echo $set->title; ?>
        </a>
        <?php echo $set->description; ?>
    </li>
    <?php endforeach; ?>
</ul>

<div class="clearfix"></div>
</div>
<?php endif; ?> 
```

这是我正在使用的模型：忽略之前显示的模型，我创建了一个小部件

```
 public function setlist($offset = null, $count = null, $exp = null) 
{
    $sql = "SELECT * FROM " . $this->_prefix . "media_set AS s";
    if ($exp) {
        $where = array();

        if (isset($exp['created_user_id'])) {
            $where[] = sprintf("s.created_user_id = '%s'", mysql_real_escape_string($exp['created_user_id']));
        }
        if (isset($exp['keyword'])) {
            $where[] = "s.title LIKE '%" . addslashes($exp['keyword']) . "%'";
        }
        if (isset($exp['is_active'])) {
            $where[] = sprintf("s.is_active = '%s'", (int)$exp['is_active']);
        }

        if (count($where) > 0) {
            $sql .= " WHERE " . implode(" AND ", $where);
        }
    }
    $sql .= " ORDER BY s.created_date DESC";
    if (is_int($offset) && is_int($count)) {
        $sql .= sprintf(" LIMIT %s, %s", $offset, $count);
    }

    $rs   = mysql_query($sql);
    $rows = array();
    while ($row = mysql_fetch_object($rs)) {
        $rows[] = $row;
    }
    mysql_free_result($rs);
    return new XXX_Model_RecordSet($rows, $this);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:25:28.203

```
<?php    
$d = array();
for($i = 0; $i < 30; $i++) 
    $d[] = date("d", strtotime('-'. $i .' days'));
?> 
```

另请参阅此链接以了解此类操作

[http://www.vision.to/how-to-add-days-weeks-months-to-any-date-.php](http://www.vision.to/how-to-add-days-weeks-months-to-any-date-.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T02:25:28.580

更轻松...

```
for( $i=1; $i<31; $i++ )
{
  $the_date = date("m/d/Y", strtotime("-".$i." days"));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T03:01:37.683

好吧，我的简单建议是首先通过按日期过滤数据来限制数据到 mysql 本身。例如：created_date >= ADDDATE(CURRENT_DATE(), INTERVAL -30 DAY) 和 created_date <= CURRENT_DATE()，按 created_date desc 排序。

然后当您在 php 中检索它时，您可以使用标志过滤它，last_date = '' 检查行中的当前日期是否与 last_date 不同，拾取另一个数组/组显示并开始打印/运行。

这应该解决您的问题更容易和更简单的模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T23:57:29.263

经过研究和网络上的一些例子，我得到了这个工作。与上述相同的模型，但将视图更改为：

```
<?php $prevDate = 0; ?>

<?php if ($this->sets) : ?>
<div class="t_media_list_sets">
<h2><?php echo $this->translator()->widget('title'); ?></h2>
<dl>
<?php foreach ($this->sets as $set) : ?>
<?php $date = date('y-m-d', strtotime($set->created_date)); ?>
<?php $theDate = $date ?>
<!-- Date changed -->
<?php if ($theDate != $prevDate) : ?>
    <?php if(!empty($prevDate)): ?>
    <?php  echo '</dl>'; ?>
  <?php endif; ?>
  <!-- Open new list -->
  <?php echo '<dl>'; ?>
  <!-- Show definition term for the group of events -->
  <?php echo '<dt>'; ?>
    <?php echo $theDate ?>
    <?php echo '</dt>'; ?>
<?php endif; ?>
<!-- Display current event -->
<?php echo '<dd>'; ?>
      <a href="<?php echo $this->url($set->getProperties(), 'media_set_details'); ?>">
        <?php echo $set->title; ?>
    </a>
    <?php echo $set->description; ?>
<?php echo '</dd>'; ?>

<!-- Remember date from previous row -->
<?php $prevDate = $theDate; ?>
<?php endforeach; ?>
<!-- Close last definition list -->
<?php echo '</dl>'; ?>    

<div class="clearfix"></div>
</div>
<?php endif; ?> 
```

我将不得不对布局进行一些微调，但原则是一样的。

# android - 如何居中对齐位图？

> ID：12593674
> 
> 赞同：2
> 
> 时间：2012-09-26T02:15:40.907
> 
> 标签：android, bitmap, live, wallpaper

我正在尝试将位图居中对齐，但我一直没有这样做。我正在为不断循环图像的 Android 制作动态壁纸。我有简单的背景和与背景重叠的动画图像。

这是我的代码：

```
import java.io.IOException;

import android.content.SharedPreferences;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Matrix;
import android.graphics.Paint;
import android.graphics.Rect;
import android.graphics.RectF;
import android.os.Handler;
import android.os.SystemClock;
import android.service.wallpaper.WallpaperService;
import android.util.Log;
import android.view.MotionEvent;
import android.view.SurfaceHolder;

/*
 * This animated wallpaper draws a rotating wireframe cube.
 */
public class CubeWallpaper1 extends WallpaperService {

    public static final String SHARED_PREFS_NAME="cube1_settings";
    private final Handler mHandler = new Handler();
    private static boolean Reverse= false;
    private static boolean screenfit = false;
    private static String slow;
    private static String fast;
    private static String medium;
    private static String framerate;

    @Override
    public void onCreate() {
        super.onCreate();

    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    @Override
    public Engine onCreateEngine() {
        return new CubeEngine();
    }

    class CubeEngine extends Engine implements SharedPreferences.OnSharedPreferenceChangeListener {

        private final Paint mPaint = new Paint();
        private float mOffset;
        private float mTouchX = -1;
        private float mTouchY = -1;
        private long mStartTime;
        private float mCenterX;
        private float mCenterY;
        private float bottom;
        private int i=1;
        private float  screenwidth;
        private float halfscreenwidth;
        private float screenheight;
        private float  screenhalfheight;
        private boolean plus = false;
        private final Runnable mDrawCube = new Runnable() {
            public void run() {
                drawFrame();
            }
        };
        private boolean mVisible;
        private SharedPreferences mPrefs;
        CubeEngine() {
            final Paint paint = mPaint;
            paint.setColor(0xffffffff);
            paint.setAntiAlias(true);
            paint.setStrokeWidth(2);
            paint.setStrokeCap(Paint.Cap.ROUND);
            paint.setStyle(Paint.Style.STROKE);
            mPrefs = CubeWallpaper1.this.getSharedPreferences(SHARED_PREFS_NAME, 0);
            mPrefs.registerOnSharedPreferenceChangeListener(this);
            onSharedPreferenceChanged(mPrefs, null);
            mStartTime = SystemClock.elapsedRealtime();
        }

        @Override
        public void onCreate(SurfaceHolder surfaceHolder) {
            super.onCreate(surfaceHolder);
            setTouchEventsEnabled(true);
        }

        @Override
        public void onDestroy() {
            super.onDestroy();
            mHandler.removeCallbacks(mDrawCube);
        }

        @Override
        public void onVisibilityChanged(boolean visible) {
            mVisible = visible;
            if (visible) {
                drawFrame();
            } else {
                mHandler.removeCallbacks(mDrawCube);
            }
        }

        @Override
        public void onSurfaceChanged(SurfaceHolder holder, int format, int width, int height) {
            super.onSurfaceChanged(holder, format, width, height);
            screenwidth = width;
            halfscreenwidth = width/2.0f;
            screenheight = height;
            screenhalfheight = height/2.0f;
            drawFrame();
        }

        @Override
        public void onSurfaceCreated(SurfaceHolder holder) {
            super.onSurfaceCreated(holder);
        }

        @Override
        public void onSurfaceDestroyed(SurfaceHolder holder) {
            super.onSurfaceDestroyed(holder);
            mVisible = false;
            mHandler.removeCallbacks(mDrawCube);
        }

        @Override
        public void onOffsetsChanged(float xOffset, float yOffset,
                float xStep, float yStep, int xPixels, int yPixels) {
            mOffset = xOffset;
            drawFrame();
        }

        @Override
        public void onTouchEvent(MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_MOVE) {
                mTouchX = event.getX();
                mTouchY = event.getY();
            } else {
                mTouchX = -1;
                mTouchY = -1;
            }
            super.onTouchEvent(event);
        }

        void drawFrame() {
            final SurfaceHolder holder = getSurfaceHolder();

            Canvas c = null;
            try {
                c = holder.lockCanvas();
                if (c != null) {
                    drawCube(c);
                    drawTouchPoint(c);
                }
            } finally {
                if (c != null) holder.unlockCanvasAndPost(c);
            }

            mHandler.removeCallbacks(mDrawCube);
            if (mVisible) {

                mHandler.postDelayed(mDrawCube, 1000 / 600);

                if(framerate==slow){
                    Log.v("slow call ","screen height");
                    mHandler.postDelayed(mDrawCube, 1000 / 100);

                }

                else if(framerate==medium){
                    Log.v("medium call ","screen height");
                    mHandler.postDelayed(mDrawCube, 1000 / 400);

                }

                else if(framerate==fast){
                    Log.v("fast call ","screen height");
                    mHandler.postDelayed(mDrawCube, 1000 / 1000);

                }

            }
        }

        void drawCube(Canvas c) {
            c.save();
            c.drawColor(0xff000000);
            if(Reverse)
            {
                if (i>73 || i<1)
                {
                    plus = !plus;
                    if(plus )
                        i+=2;
                    else
                        i-=2;
                }
            }
            else
            {
                if(i>73)
                    i=1;
                plus =true;
            }
            try {
                if(i<=0 || i>73)
                    i=1;

                THIS IS MY BACKROUND
                Bitmap holdmap =  BitmapFactory.decodeStream(getAssets().open( "hold.png"));

                                THIS IS MY IMAGE ANIMATION  
                Bitmap bitmap =  BitmapFactory.decodeStream(getAssets().open((i/10)+""+(i%10)+".png"));

                int imgh = bitmap.getHeight();
                int himgh = bitmap.getHeight()/2;
                int imgw = bitmap.getWidth();
                int himgw = bitmap.getWidth()/2;

                if(screenfit==false){
                    if(imgw>screenwidth){

                        float w1 = imgw - screenwidth;
                        float omg = imgw-w1;
                        float nw1 = w1/imgw*100;

                        float h1 = imgh - screenheight;
                        float hmg =imgh-h1;
                        float nh1 = h1/imgh*100;        
                        RectF rf = new RectF(0,0,omg,hmg);
                        RectF rf2 = new RectF(0,0,300,300);

                        c.drawBitmap(holdmap, null, rf, mPaint);
                        c.drawBitmap(bitmap, null, rf2, mPaint);

                    }else if (imgw<screenwidth){

                        float w1 = imgw - screenwidth;
                        float omg=imgw-w1;
                        float nw1 = w1/imgw*100;

                        float h1 = imgh - screenheight;
                        float hmg =imgh-h1;
                        float nh1 = h1/imgh*100;        
                        RectF rf = new RectF(0,0,omg,hmg);
                        RectF rf2 = new RectF(0,0,300,300);

                        c.drawBitmap(holdmap, null, rf, mPaint);
                        c.drawBitmap(bitmap, null, rf2, mPaint);

                    }

                }else if (screenfit==true){

                    if(imgw>screenwidth){                       
                        float w1 = imgw - screenwidth;
                        float omg=imgw-w1;
                        float nw1 = w1/imgw*100;

                        float h1 = imgh - screenheight;
                        float hmg =imgh-h1;
                        float nh1 = h1/imgh*100;        
                        RectF rf = new RectF(0,0,omg,hmg);
                        RectF rf2 = new RectF(0,0,300,300);

                        c.drawBitmap(holdmap, null, rf, mPaint);
                        c.drawBitmap(bitmap, null, rf2, mPaint);

                    }else if (imgw<screenwidth){
                        float w1 = imgw - screenwidth;
                        float omg=imgw-w1;
                        float nw1 = w1/imgw*100;

                        float h1 = imgh - screenheight;
                        float hmg =imgh-h1;
                        float nh1 = h1/imgh*100;        
                        RectF rf = new RectF(0,0,omg,hmg);
                        RectF rf2 = new RectF(0,0,300,300);

                        c.drawBitmap(holdmap, null, rf, mPaint);
                        c.drawBitmap(bitmap, null, rf2, mPaint);
                    }
                }

                if(plus )
                    i++;
                else
                    i--;
            } catch (IOException e) {
                e.printStackTrace();
            }

            c.restore();

        }

        void drawTouchPoint(Canvas c) {
            if (mTouchX >=0 && mTouchY >= 0) {
                c.drawCircle(mTouchX, mTouchY, 0, mPaint);
            }
        }

        public void onSharedPreferenceChanged(
                SharedPreferences sharedPreferences, String key) {
            Reverse = sharedPreferences.getBoolean("reverse", false);
            screenfit = sharedPreferences.getBoolean("screenfit", false);
            framerate = sharedPreferences.getString("framerate","fast");
        }

    }
} 
```

# ruby-on-rails - 如何将元数据放入 sqlite3-1.3.4-x86-mingw32.gem

> ID：12593680
> 
> 赞同：0
> 
> 时间：2012-09-26T02:17:21.780
> 
> 标签：ruby-on-rails, sqlite, gem

我执行捆绑安装，但由于 sqlite3 它总是返回到：

Gem::Package::FormatError: no metadata found in C:/RailsInstaller/Ruby1.9.3/lib/ ruby​​/gems/1.9.1/cache/sqlite3-1.3.4-x86-mingw32.gem 安装 sqlite3 时出错(1.3.4)，并且 Bundler 无法继续。`gem install sqlite3 -v '1.3.4'`在捆绑之前确保成功。

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:55:15.010

只需运行`gem install sqlite3 -v '1.3.4'`它应该可以解决问题。这是因为 gem 不包含在依赖项列表中，所以运行命令将修复它

# java - 在Java中递归地从网页中检索链接

> ID：12593686
> 
> 赞同：0
> 
> 时间：2012-09-26T02:19:07.453
> 
> 标签：java, http, recursion

我正在开发一个简化的网站下载器（编程作业），我必须递归地浏览给定 url 中的链接并将各个页面下载到我的本地目录。

我已经有一个函数可以从单个页面中检索所有超链接（href 属性）`Set<String> retrieveLinksOnPage(URL url)`，. 此函数返回一个超链接向量。我被告知要下载第 4 级的页面。（第 0 级是主页）因此我基本上想检索网站中的所有链接，但我很难提出递归算法。最后，我打算这样调用我的函数：

`retrieveAllLinksFromSite("http://www.example.com/ldsjf.html",0)`

```
Set<String> Links=new Set<String>();
Set<String> retrieveAllLinksFromSite (URL url, int Level,Set<String> Links)
{
    if(Level==4)
       return;
    else{

        //retrieveLinksOnPage(url,0);
        //I'm pretty Lost Actually!
        }

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:04:17.217

这是伪代码：

```
Set<String> retrieveAllLinksFromSite(int Level, Set<String> Links) {
    if (Level < 5) {
        Set<String> local_links =  new HashSet<String>();
        for (String link : Links) {
            // do download link
            Set<String> new_links = ;// do parsing the downloaded html of link;
            local_links.addAll(retrieveAllLinksFromSite(Level+1, new_links));
        }
        return local_links;
    } else {
        return Links;
    }

} 
```

您需要自己在评论中实施事情。要从给定的单个链接运行函数，您需要创建一组初始链接，其中仅包含一个初始链接。但是，如果您有多个初始链接，它也可以工作。

```
Set<String> initial_link_set = new HashSet();
initial_link_set.add("http://abc.com/");
Set<String> final_link_set = retrieveAllLinksFromSite(1, initial_link_set); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:33:46.580

您可以使用 a`HashMap`而不是 a`Vector`来存储链接及其级别（因为您需要递归地将所有链接降到第 4 级）

此外，它会是这样的（只是给出一个整体提示）：

```
HashMap Links=new HashMap();

void retrieveAllLinksFromSite (URL url, int Level)
{
    if(Level==4)
       return;
    else{
        retrieve the links on current page and for each retrieved link,
        do {
           download the link
           Links.put(the retrieved url,Level)  // store the link with level in hashmap
           retrieveAllLinksFromSite (the retrieved url ,Level+1) //recursively call for

 further levels
            }

        }

} 
```

# jquery - Sublime Text 2 - 是否有带有 jquery 提示的智能智能感知（不是片段！）

> ID：12593687
> 
> 赞同：20
> 
> 时间：2012-09-26T02:19:13.963
> 
> 标签：jquery, intellisense, sublimetext2

在我的轻量级**sublime 文本 2**中使用 vs2012 时，我如何获得相同级别的细节。我尝试过的所有包都主要处理片段（而不是嗅探智能提示）。在 vs2012 中，我使用 -vsdoc 解决了它。我怎样才能用 sublime 解决它？

![我正在寻找的效果](../Images/57261bda495ccfb12212e981cc030d15.png)

我确信必须有一种方法让 sublime text 2 以某种方式解析函数并了解我应该使用什么样的参数才能达到我的目的。请不要把我介绍给谷歌。我到处搜索。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T22:48:37.893

@joelretdev 提到的论坛帖子的作者确实最终创建了他们描述的 JavaScript / jQuery 完成包，它可以满足您的一些需求。它称为 AndyJS2，可通过 PackageControl 获得。该包的 GitHub 存储库是[https://github.com/agibsonsw/AndyJS2](https://github.com/agibsonsw/AndyJS2)。

（假设论坛发帖者/包创建者是同一个人，因为两个站点都使用了相同的用户名 [agibsonsw]，他们显然遇到了同样的问题。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T16:29:44.360

不幸的是，似乎没有为 SublimeText 提供 jQuery 智能感知的可靠方法。

您可以从包管理器或 github 获得 jQuery 包：[jQuery Sublime](https://github.com/mrmartineau/jQuery)，但它只提供片段，当然这不是您真正想要的。

然而，我确实找到了一个关于这个问题的论坛帖子，其中谈到了在这个包中添加一个 sublime-completions 文件，它可以为你提供一些智能感知。唯一的问题是您必须自己在文件中定义所有选择器/函数/事件。

如果您有兴趣，这里是详细说明的帖子：[SublimeText 论坛](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=5667&start=10)

我希望这会有所帮助，如果我确实发现了任何新内容，我一定会在我的帖子中添加一个附录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T02:45:03.597

据我所知，Sublime Text 2 中还没有任何好的 javascript 智能感知插件。

片段包不是智能感知，而是简单的自动补全，不考虑关键字、范围或上下文。为了获得真正的 javascript 智能感知解决方案，您的脚本需要动态构建 - 可能由 node.js 进程构建 - 然后构建语法树。

现在，你可以使用 SublimeLinter 包，在安装了 node.js 的机器上使用它时，会在你输入时显示 JSHint 错误。这不是一个完美的替代品，但提供的信息更有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-05T05:33:00.797

*我将问题扩展到 javascript 语言：*

**在sublime text 2 和 3**中JavaScript 自动补全的最佳包是 TernJS 包。它会分析您的代码，为您提供智能的上下文建议。它仍然不是我们从 c#/java IDE 中使用的，但它比原生选项更好。它有时也会降低升华速度。

顺便说一句 - 您还可以使用注册表中的 jquery 定制包。

您可能想采用另一种方式 -**括号**具有内置的 JavaScript 自动完成功能（也基于 tern）。我发现它比 sublime 包要好得多。

商业方面：**webstorm**是最接近 VS intellisense 和完美建议的。我已经在 node.js 上对其进行了测试，它的快速高效完成让我感到惊讶。比上面的好，但试用期过后确实要花钱。

# c#-4.0 - Linq 排名按年份 c#

> ID：12593692
> 
> 赞同：0
> 
> 时间：2012-09-26T02:20:45.197
> 
> 标签：c#-4.0, linq-to-entities

我在这里试图完成的是十年内每年归还一辆汽车。我得到的是 10 辆都是 2013 年的汽车。这应该按 2013 年 2012 年 2011 年等排序。它应该是该给定年份召回次数最多的汽车。

```
public static IEnumerable<MakeModel> mostrecalledmodelbyYear
{
    get
    {
        var groups = from t in DBCacheHelper.recallslist
                        where t.YEARTXT != "9999"
                        group t by new { t.YEARTXT, t.MODELTXT, t.MAKETXT } into g
                        select new MakeModel() { MODELTXT = g.Key.MODELTXT, MAKETXT = g.Key.MAKETXT, Frequency = g.Count(),YEARTXT = Convert.ToInt32(g.Key.YEARTXT) };

        return groups.OrderByDescending(g => g.YEARTXT).Take(10);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:52:04.967

应该是这样的

```
var query= 
(from t in DBCacheHelper.recallslist
where t.YEARTXT != "9999"
group t by t.YEARTXT into g
let q = g.GroupBy(t => new {t.MODELTXT, T.MAKETXT})
         .Select(g2 => new {
               key = g2.Key,
               freq = g2.Count()
            })
         .OrderByDescending(t => t.freq)
let max = q.FirstOrDefault()
select new MakeModel {
   MODELTXT = max.key.MODELTXT,
   MAKETXT = max.key.MAKETXT,
   Frequency = max.freq,
   YEARTXT = g.Key//care, Convert.ToInt32 won't work in linqtoentities 
})
.OrderByDescending(f => f.YEARTXT)
.Take(10); 
```

# vb.net - 使用 VB 2010 和 SQL Server 2008 创建一个简单的 CRUD

> ID：12593695
> 
> 赞同：0
> 
> 时间：2012-09-26T02:21:11.403
> 
> 标签：vb.net, sql-server-2008

在将 VB.NET 2010 连接到 SQL Server 2008 时，我需要您的帮助。我还想知道如何在 VB.NET 2010 中制作一个非常简单的 CRUD 应用程序，并将其记录显示在`DataGrid`或`ListView`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T02:25:34.567

我认为没有比使用 ASP.NET 动态数据更快的方法了。看看这个[演练](http://msdn.microsoft.com/en-us/library/cc488469%28v=vs.100%29.aspx)。您可以在几行代码中创建一个面向数据库的 crud 屏幕。

# visual-studio-2012 - 在 Windows 8 上使用 WatiN 2.1 启动 IE10 时找不到文件错误

> ID：12593697
> 
> 赞同：1
> 
> 时间：2012-09-26T02:21:58.470
> 
> 标签：visual-studio-2012, watin

在 Visual Studio 2012 中，我创建了一个 Microsoft 单元测试项目并通过 Nuget 添加了 WatiN 2.1。当尝试在 Windows 8 上启动 IE10 时，我得到 file not found 错误。

```
Could not load file or assembly 'Interop.SHDocVw, Version=1.1.0.0, Culture=neutral, 
PublicKeyToken=db7cfd3acb5ad44e' or one of its dependencies. The system cannot find the
file specified.

[TestClass]
public class UnitTest1
{
    [TestMethod]
    public void TestMethod1()
    {
        var driver = new IE("http://google.com");
        driver.Close();
    }
} 
```

然后，我意识到`Copy Local`以下两个 dll 显示为灰色并设置为，`false`因此我无法将其设置为`Copy if newer`.

```
Interop.SHDocVw.dll
Microsoft.mshtml.dll 
```

我可以手动将它们复制到 bin 文件夹，但是 Nuget 包或我的 Visual Studio 是否有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:33:58.387

我发现如果我将 更改`Embed Interop Types`为`False`，则`Copy Local`启用。

# scheme - 不返回我需要的答案

> ID：12593699
> 
> 赞同：-2
> 
> 时间：2012-09-26T02:22:46.737
> 
> 标签：scheme

```
（定义（校验和 2 ls）
  （如果（空？ls）
      0
      (让 ([n 0])
        (+ (+ n 1))(* n (car ls))(校验和-2 (cdr ls))))))

```

好的，我有这段代码，它假设，如果我写得对，数字（n）应该在每次通过列表时增加一，所以 n（实际上）应该像 1 2 3 4，但我想要 n 乘以列表的汽车。

一切都加载了，但是当返回答案时，我得到 0。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:32:24.660

如果您以不同的方式格式化代码，您可能会更容易看到发生了什么：

```
(define (checksum-2 ls)
  (if (null? ls) 
      0
      (let ([n 0])
        (+ (+ n 1))
        (* n (car ls))
        (checksum-2 (cdr ls))))) 
```

在`let`表单内部，表达式是按顺序计算的，但您没有使用其中任何一个的结果（最后一个除外）。简单地丢弃加法和乘法的结果。

在这种情况下，您需要做的是定义一个使用累加器并执行递归调用的*新辅助函数。*我猜这是家庭作业或学习练习，所以我不会给出完整的答案。

**更新**：作为您可能需要做的事情的演示，这里是 Scheme 中的一个类似函数，用于将整数从`1`to相加`n`：

```
(define (sum n)
  (define (sum-helper n a)
    (if (<= n 0)
        a
        (sum-helper (- n 1) (+ a n))))
  (sum-helper n 0)) 
```

您应该能够使用类似的框架来实现您的`checksum-2`功能。

# c# - 既不实现 IClonable 也不实现 ISerializable 的 C# 克隆对象

> ID：12593702
> 
> 赞同：2
> 
> 时间：2012-09-26T02:23:02.463
> 
> 标签：c#, serialization, outlook, ms-office, clone

我已经尝试了我能想到的一切，但无法弄清楚。基本上，我正在制作一个 Outlook 2010 加载项，它对传入的 HTML 格式的电子邮件进行调整，以使视障用户（尤其是视障用户）更容易访问它们。

一切正常，除了当我的加载项运行时，它实际上尝试修改原始电子邮件，无论我尝试什么，Exchange 连接的 Outlook 根本不喜欢并拒绝。我想要做的是在不修改原始邮件的情况下显示我修改后的电子邮件以及所有好东西（回复、全部回复、密件抄送等，就像您通常使用 Outlook）......也就是说，我只想要显示我修改的消息，而不是修改存储的消息或添加新消息。

如：

```
if (selObject is Outlook.MailItem)
{
    Outlook.MailItem mailItem = (selObject as Outlook.MailItem);
    Outlook.MailItem accessible_mail_item = mailItem;
    ...rest of my code...
    accessible_mail_item.Display(false);
} 
```

我遇到的问题是，“accessible_mail_item”不是“mailItem”的副本......它是指向它的指针。如何复制/克隆这个不可序列化/可克隆的对象？我已经尝试过各种“深度克隆”功能，但它们都给了我关于“不可序列化”或其他什么的相同错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:29:35.677

有什么理由不能使用该[`MailItem.Copy`](http://msdn.microsoft.com/en-us/library/office/ff868420.aspx)方法吗？

```
Outlook.MailItem mailItem = (selObject as Outlook.MailItem);
Outlook.MailItem accessible_mail_item = mailItem.Copy();
...rest of my code...
accessible_mail_item.Display(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:51:05.860

听起来您一直在尝试将对象序列化然后反序列化回新对象（使用 BinaryFormatter 或类似方法）的 Deep Clone 方法，从而创建克隆。当然，这要求您要克隆的对象是可序列化的。

您是否尝试过任何其他深度克隆方法？（例如，反射、IL、ExpressionTrees）。使用这些中的任何一个都应该比序列化方法快很多，并且不需要用 Serializable 标记对象或实现 ICloneable。

[在此处](http://whizzodev.blogspot.co.nz/2008/03/object-cloning-using-il-in-c.html)尝试IL 深度克隆实现，或[在此处](http://blog.nuclex-games.com/mono-dotnet/fast-deep-cloning/)尝试反射、表达式树方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T04:37:14.447

如果类不是为支持复制/克隆操作而设计的，那么您不太可能想出能够产生功能性克隆的代码。对于代表不同外部实体或资源的对象尤其如此。即，您是否希望通过克隆`HttpResponse`或通过克隆相应的托管对象来创建重复的 SQL 服务器来创建远程服务器页面的副本？与 Outlook 消息相同 - 将邮件项目表示为托管代码的对象不是实际的邮件项目，而是在某处获取/修改邮件项目的评估方法。

我建议查看 Outlook API，看看是否有一种方法可以按照您想要的方式创建项目的副本。您也可以尝试通过 Outlook API 创建新邮件项目，而不是手动复制您感兴趣的属性。

# boost - boost shared_ptr 在程序退出时变为无效

> ID：12593705
> 
> 赞同：1
> 
> 时间：2012-09-26T02:23:32.833
> 
> 标签：boost, memory-leaks, initialization, shared-ptr

由于共享指针，我遇到了程序脏关闭的问题。我找到了一个解决方案，但我不确定我是否有正确的答案。

这是极简主义的例子：

```
double var;
boost::shared_ptr<const double> ptr1 (&var); // creates an invalid pointer on program exit
boost::shared_ptr<const double> ptr2 (new double); // works fine

int main (int argc, char **argv)
{
  return 0;
} 
```

这是我想验证的答案：

在被`ptr1`指向对象的情况下，会在指针之前被删除，从而指向一个无效的地址。但是在`ptr2`共享指针的“智能”的情况下处理上述问题。真的？

一个额外的小问题：有没有办法让 ptr1 工作（我试过`reset()`）或者是不好的编程习惯（如果是这样，为什么）？

感谢您的澄清！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T02:32:56.377

在第一种情况下，指针不是动态分配的，因此 shared_ptr 不应尝试破坏底层对象。这可以通过使用自定义无操作删除器仿函数来完成：

[http://www.boost.org/doc/libs/1_51_0/libs/smart_ptr/sp_techniques.html#static](http://www.boost.org/doc/libs/1_51_0/libs/smart_ptr/sp_techniques.html#static)

# c# - 调用存储过程时处理可选参数

> ID：12593706
> 
> 赞同：0
> 
> 时间：2012-09-26T02:23:42.820
> 
> 标签：c#, sql-server-2008, stored-procedures, dbcommand

问题陈述。

基本上，我得到 3 - 50 个从 Web 服务作为 NVP 数组返回的参数，然后我需要遍历它们，为每个参数创建 SQL 命令参数并调用存储过程。有没有比下面的方法更有效的方法来处理它？

```
 using (SqlConnection connection = new SqlConnection(connectionString))
                         {
                             connection.Open();
                             using (SqlCommand cm = connection.CreateCommand())
                             {
                                 cm.CommandText = "MySproc";
                                 cm.CommandType = CommandType.StoredProcedure;
                                 foreach (var field in row)
                                 {

                                     cm.Parameters.AddWithValue("@" + field.Key.ToString(), field.Value.ToString());
                                 }
                                 cm.ExecuteNonQuery();
                             }
                         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:51:46.173

我个人在存储过程的 WHERE 子句中使用 ISNULL 或 COALESCE。除非你想在你的 c# 中做这件事......

[http://blogs.x2line.com/al/archive/2004/03/01/189.aspx](http://blogs.x2line.com/al/archive/2004/03/01/189.aspx)

# mysql - 获取 2 个表中 2 个字符串相同的所有数据

> ID：12593709
> 
> 赞同：2
> 
> 时间：2012-09-26T02:24:09.497
> 
> 标签：mysql, sql

我有 2 张桌子：

`tb_doc`：

```
===========================================
| id | document_title | document_summary  |
===========================================
| 1  | a data mining  | document_summary1 |
| 2  | B              | document_summary2 |
=========================================== 
```

`tb_wrap`：

```
============================================
| id | data_url | data_title    | doc_url  |
===========================================
| 1  |data_url1 | B             | doc_url1 |
| 2  |data_url2 | a data mining | doc_url2 |
============================================ 
```

我想从 2 个表中加入数据，其中`document_title`= `data_title`（匹配 2 个字符串），所以我会得到如下结果：

```
data_title <href data_url>
doc_url
document_summary 
```

这是查询：

```
SELECT * from tb_wrap as a 
JOIN (
SELECT document_title, document_summary from tb_doc) as b` 
ON a.data_title LIKE b.document_title 
```

如何得到它们？谢谢你 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T02:28:17.267

`JOIN`条件应该是 a而`=`不是 a `LIKE`。我认为没有必要加入子查询。这只是初步的`INNER JOIN`。

```
SELECT
  tb_wrap.data_url,
  tb_wrap.data_title
  tb_wrap.doc_url,
  tb_doc.document_summary
FROM 
  tb_doc
  INNER JOIN tb_wrap ON tb_doc.document_title = tb_wrap.data_title 
```

# mpmovieplayercontroller - 可以使用 MPMoviePlayerController 而不将它添加到我们的视图中吗？

> ID：12593710
> 
> 赞同：1
> 
> 时间：2012-09-26T02:24:11.713
> 
> 标签：mpmovieplayercontroller

我正在编写一个在线广播流媒体应用程序。我正在使用自己的按钮来控制播放。我真的不想要 MPMoviePlayerController 的视图。

如果我只是让它播放音频而不将 MPMoviePlayerController 添加到我的视图中，苹果会拒绝我的应用程序吗？

我正在考虑删除下面代码中的倒数第二行：

```
player = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];
[player prepareToPlay];

[player.view setFrame: myView.bounds];
[myView addSubview: player.view];       //i want to remove this line

[player play]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T23:13:01.760

也可以执行以下操作来隐藏它而不删除该行：

```
player.view.hidden = YES; 
```

# vim - 如何快速切换到另一个标签页中的上一个窗口？

> ID：12593711
> 
> 赞同：4
> 
> 时间：2012-09-26T02:24:15.160
> 
> 标签：vim

我真的很喜欢`Ctrl-O`and`Ctrl-I`来回跳跃。
如果我打开`fileA`，则用于`:tabe fileB`在新标签页中打开另一个文件。
在第二个标签页中，我键入`Ctrl-O`以跳回上一个位置。
Vim 只是`fileA`在当前窗口中显示，而不是切换到第一个标签页。
现在我有两个标签页显示相同的文件。这不是我想要的。
我可以使用`:drop fileA`，但我需要提供全名。这还不够好。
有什么好方法可以在 Windows 跨标签页之间切换吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T05:31:11.080

是的，`switchbuf`设置：

```
set switchbuf=useopen,usetab 
```

我*知道*您知道在哪里可以获得有关可能值的更多信息。;-)

顺便说一句，`set hidden`这是在 Vim 中有效使用缓冲区、窗口和选项卡的关键。

# javascript - jQuery 值传递

> ID：12593713
> 
> 赞同：1
> 
> 时间：2012-09-26T02:24:21.243
> 
> 标签：javascript, jquery

我尝试重新设置 的样式`select` `option`，但是该选项的值不会传递给 jQuery 创建的新类。因此，我无法得到正确的结果。正确的结果是当我单击美国时，它显示奥斯汀，当单击德国时显示柏林

这是代码， [http://jsfiddle.net/xvDbv/1/](http://jsfiddle.net/xvDbv/1/)

应该改为类似

```
 text: $this.children('option','value').eq(i).text()? 
```

有人可以帮助解决`VALUE`通行证问题吗？

非常感谢 adv

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:34:59.170

`countrySelectChanged`这是因为您在构建伪选择时从不调用该函数。在函数中添加对它的调用：

```
$listItems.click(function(e) {
    e.stopPropagation();
    $styledSelect.text($(this).text()).removeClass('active');
    $this.val($(this).attr('rel'));
    $list.hide(); /* alert($this.val()); Uncomment this for demonstration! */
    countrySelectChanged();
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/xvDbv/5/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T02:46:19.760

我将`on`侦听器添加到`li`.

```
 $('<li />', {
        text: $this.children('option').eq(i).text(),
        rel: $this.children('option').eq(i).val()
    }).on("click", function(){
        $(".hide").hide();
        $("#" + $(this).text().toLowerCase() + "-select").show();
    }).appendTo($list); 
```

[jsFiddle](http://jsfiddle.net/TheJoeFletch/xvDbv/7/)

# javascript - jQuery .scroll 没有拿起

> ID：12593714
> 
> 赞同：0
> 
> 时间：2012-09-26T02:24:36.473
> 
> 标签：javascript, jquery

当用户滚动经过“#topp”元素时，我正在尝试创建一个提示“True”的警报，但它什么也没做，该元素应该是页面顶部的一个小 div。

HTML

```
<div id="topp"></div> 
```

jQuery

```
 $(window).scroll(function() {
    var vpH = $(window).height(),
        st = $(window).scrollTop(),
        y = $('#topp').offset().top;
    if(y > (st + vpH)) alert('true');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T02:40:39.087

为什么需要窗口高度？如果您有 top 和 scroll to top 变量，那么他们不需要窗口的高度。

```
$(document).scroll(function() 
{
    var scrollTop = $(window).scrollTop();
    var toppOffset = $('#topp').offset().top;

    if(toppOffset > scrollTop)
        alert('true');
});​ 
```

更清晰的表示[http://jsfiddle.net/zDpw3/1/](http://jsfiddle.net/zDpw3/1/)

# css - 空格消失了

> ID：12593716
> 
> 赞同：2
> 
> 时间：2012-09-26T02:24:53.443
> 
> 标签：css, twitter-bootstrap, google-webfonts, letter-spacing

![无间距](../Images/248c4aa00139f9201b85fd192956831c.png)出于某种原因，我正在使用的字体上的单词之间的空格消失了。请参阅： http: [//www.fantasynews.com/](http://www.fantasynews.com/) 我正在使用 Twitter Bootstrap，稍作修改以使用 Google Web 字体。有问题的字体是由 Google 网络字体提供的 Oswald： [http](http://www.google.com/webfonts/specimen/Oswald) ://www.google.com/webfonts/specimen/Oswald 那里的间距对我来说似乎很正常。

我不是 CSS 专家，但我的代码中没有触及任何应该改变空格显示方式的内容。我不知道任何应该特别针对空间的东西。我觉得这是我忽略的一些愚蠢的错误，但我一无所知。如果我查看源代码，当我检查元素时，空格和空格都明显存在，以防一些 javascript 在玩诡计。

我使用的是最新版本的 Chrome，尽管这也出现在 Firefox 中。

我应该说，间距问题专门针对最新玩家新闻下框中的标题出现

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:43:31.023

我通过添加到我的 CSS 来强制它`word-spacing: 0.25em`，但我还不是 100% 确定在每个浏览器中都修复了它。不幸的是，谷歌没有明显的方法来链接到特定版本的字体，所以你可以确信它不会从你下面改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:20:47.450

同样的问题，我在在线网站上应用了另一种字体并祈祷解决方案:(

它可能是谷歌服务器上的错误编码文件。没有人可以避免像这样的小问题，即使是在 webfont 服务中编码错别字的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T05:46:46.690

删除`font-weight: normal;`修复间距（有 2 个实例应用于它，检查元素，你会看到它们）

编辑：这是一种不好的字体，你应该选择另一种！它看起来很大胆，但普通版本很糟糕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T02:52:01.713

我通常在 Ubuntu 12.10 上使用 Firefox（最新）。那里的一切看起来都很好。然而，在 Chrome 中，您的字体肯定会被压扁。我个人会选择一种渲染更一致的不同字体。如果您想了解更多信息，请查看[Mozilla 的 MDC 字距调整](https://developer.mozilla.org/en-US/docs/SVG/Attribute/kerning)页面以开始使用。

我使用字距调整的主要方式是使用`letter-spacing`属性。

```
h2 { 
 letter-spacing: -0.1em;
} 
```

说这解决了[“字距调整”](http://www.vecpix.com/tutorials/illustrator/il006.php)是错误的。这实际上会影响[“跟踪”](http://help.adobe.com/en_US/indesign/cs/using/WSa285fff53dea4f8617383751001ea8cb3f-6e14a.html)。两者之间的唯一区别是字距调整是*两个*字符之间的关系，而跟踪与文本*块*有关。

# android - 如何在android中保存部分流式音频？

> ID：12593718
> 
> 赞同：3
> 
> 时间：2012-09-26T02:24:55.953
> 
> 标签：android, audio, save

大家好，我想问你们是否有人打电话告诉我如何在android中仅保存部分流式音频并保存为mp3文件或字节。

# php - MySql：选择查询

> ID：12593719
> 
> 赞同：0
> 
> 时间：2012-09-26T02:25:24.347
> 
> 标签：php, mysql

那是我的 mat_likes 表：

```
mat_id| yes| no
  1   | 1  | 0
  1   | 1  | 0
  1   | 1  | 0
  2   | 1  | 0
  3   | 1  | 0
  4   | 1  | 0
  4   | 1  | 0 
```

我怎样才能选择`mat_id`那些材料最多的`yes = 1`。Е减去结果的示例：

1.  `mat_id = 1`, 因为有总`yes = 3`
2.  `mat_id = 4`, 因为有总`yes = 2`
3.  `mat_id = 3`, 因为有总`yes = 1`
4.  `mat_id = 2`, 因为有总`yes = 1`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T02:29:32.663

```
SELECT mat_id,SUM(yes) yes_sum 
FROM mat_likes 
GROUP BY mat_id 
ORDER BY yes_sum DESC 
```

将返回一个结果集，其中包含每个 mat_id 的 yes 总和，最大的总和位于顶部！

编辑：将 mat_id 添加到字段列表中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:31:45.003

查看这个网站，了解查找模式、平均值、平均值等内容。[http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/calculating-mean-median-and-mode-with-sq](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/calculating-mean-median-and-mode-with-sq)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T02:32:13.713

```
SELECT mat_id, SUM(yes) yes_sum 
FROM mat_likes 
GROUP BY mat_id 
ORDER BY yes_sum DESC, mat_id DESC 
```

# google-apps-script - 电子表格表单疑难解答 提交事件 Google

> ID：12593722
> 
> 赞同：0
> 
> 时间：2012-09-26T02:25:29.200
> 
> 标签：google-apps-script

我正在使用 Google Apps 脚本，但我不知道如何`onEdit(e)`在使用电子表格表单提交时对方法进行故障排除。

代码非常简单。只需检查表单数据中的参数，然后将其删除或通过电子邮件发送给某人。

```
function onEdit(e) {
  var namedRange = e.namedValues;
  if (namedRange.SOME_VALUE < 3.3) {
    SpreadsheetApp.getActiveSheet().deleteRow(sheet.getLastRow());
  } else {
    MailApp.sendEmail("none@none.na", "New Entry", e.values);
  }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:57:13.733

您需要使用可[安装](https://developers.google.com/apps-script/understanding_triggers)的“on form submit”触发器来触发脚本，并将函数命名为与 onEdit 不同的名称（因此也不会触发简单的“on edit”触发器）。

可安装触发器触发的函数允许使用 Logger.log() 写入日志（例如，您可以`Logger.log(namedRange.SOME_VALUE)`稍后调用并观察日志）。顺便说一句，即使有一个简单的触发器可用于“提交表单”，我也不相信 Logger.log 实际上适用于此类功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T03:21:33.680

当有人手动编辑电子表格时会触发 onEdit 函数。对于提交触发器，使用 onSubmit() 函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T16:45:27.540

这是一个可以测试表单提交触发功能的功能，摘自[How can I test a trigger function in GAS?](https://stackoverflow.com/questions/16089041/how-can-i-test-a-trigger-function-in-gas/16089067#16089067) .

```
function test_onFormSubmit() {
  var dataRange = SpreadsheetApp.getActiveSheet().getDataRange()
  var data = dataRange.getValues();
  var headers = data[0];
  // Start at row 1, skipping headers in row 0
  for (var row=1; row < data.length; row++) {
    var e = {};
    e.values = data[row];
    e.range = dataRange.offset(row,0,1,data[0].length);
    e.namedValues = {};
    // Loop through headers to create namedValues object
    for (var col=0; col<headers.length; col++) {
      e.namedValues[headers[col]] = e.values[col];
    }
    // Pass the simulated event to onFormSubmit
    onFormSubmit(e);
  }
} 
```

# iphone - 如何使用 TextureTool 创建带有预乘 alpha 的 PVR？

> ID：12593727
> 
> 赞同：2
> 
> 时间：2012-09-26T02:26:11.680
> 
> 标签：iphone, textures, alpha, pvrtc, premultiplied-alpha

如何使用 XCode 纹理工具为 iPhone 创建带有预乘 alpha 的 pvr 纹理？

# vbscript - VBScript 移动具有特定扩展名的文件

> ID：12593730
> 
> 赞同：3
> 
> 时间：2012-09-26T02:26:25.910
> 
> 标签：vbscript

我目前有一个 VBscript，它可以扫描文件夹中的文件并根据文件名中的关键字将文件移动到特定文件夹。

我目前需要脚本只扫描一个级别（即不递归扫描），我也需要搜索所有子文件夹。

有人可以帮我解决这个问题吗？

编辑：自从编写此脚本以来，我意识到我只需要根据文件名将具有特定扩展名的文件从特定文件夹和子文件夹移动到其他目录。例如，我只需要移动 .mp4 和 .avi 文件。

有人可以帮我吗？我尝试了多种方法，但仍然无法进行递归扫描和移动或扩展特定的移动工作。

以下是我当前的脚本。

```
'========================================================
' Script to Move Downloaded TV Shows and Movies to
' correct folders based on wildcards in File Name
'========================================================

On Error Resume Next

Dim sTorrents, sTV, sMovie, sFile, oFSO

' create the filesystem object
Set oFSO = WScript.CreateObject("Scripting.FileSystemObject")

' Create Log File
Set objLog = oFSO.OpenTextFile("c:\temp\log.txt", 8, True)

' Set Variables
sTorrents = "C:\Temp\torrents\"
sTV = "C:\Temp\TV Shows\"
sMovie = "C:\Temp\Movies\"

' Scan each file in the folder
For Each sFile In oFSO.GetFolder(sTorrents).Files
' check if the file name contains TV Show Parameters
If InStr(1, sFile.Name, "hdtv", 1) OR InStr(1, sFile.Name, "s0", 1) <> 0 Then
    ' TV Show Detected - Move File
    objLog.WriteLine Now() & " - " & sFile.Name & " Detected as TV Show - Moving to " & sTV
    oFSO.MoveFile sTorrents & sFile.Name, sTV & sFile.Name
' Move all other Files to Movies Directory
Else objLog.WriteLine Now() & " - " & sFile.Name & " Detected as Movie - Moving to " & sMovie
    oFSO.MoveFile sTorrents & sFile.Name, sMovie & sFile.Name
End If

Next

If sTorrents.File.Count = 0 And sTorrents.SubFolders.Count = 0 Then
    objLog.WriteLine Now() & " - There is nothing left to Process..."
    objLog.Close
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:13:22.883

一些注意事项：

```
Sub listfolders(startfolder)
Dim fs 
Dim fl1 
Dim fl2 

    Set fs = CreateObject("Scripting.FileSystemObject")
    Set fl1 = fs.GetFolder(startfolder)

    For Each fl2 In fl1.SubFolders
        Debug.Print fl2.Path

        ''process the files
        ProcessFiles fl2.Path 

        'Recursion: lists folders for each subfolder
        listfolders fl2.Path
    Next
End Sub

''Code copied from question
Sub ProcessFiles(sPath)
    ' Scan each file in the folder
    For Each sFile In oFSO.GetFolder(sPath).Files
        ' check if the file name contains TV Show Parameters
        If InStr(1, sFile.Name, "hdtv", 1) OR InStr(1, sFile.Name, "s0", 1) <> 0 Then
            ' TV Show Detected - Move File
            objLog.WriteLine Now() & " - " _
                  & sFile.Name & " Detected as TV Show - Moving to " & sTV
            oFSO.MoveFile sTorrents & sFile.Name, sTV & sFile.Name
        ' Move all other Files to Movies Directory
        Else 
            objLog.WriteLine Now() & " - " _
            & sFile.Name & " Detected as Movie - Moving to " & sMovie
            oFSO.MoveFile sTorrents & sFile.Name, sMovie & sFile.Name
        End If
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T14:02:21.723

这是一个 recusive 函数，用于列出经过测试和工作的文件夹和子文件夹中的文件，但您可能需要对自己的 forkflow 进行一些调整。而且不是最优化的，但是读起来很简单

```
Sub test()
  aFiles = F_ListFilesInDirAndSubDir("C:\foo\folder")
  'then, add some code to parse the array:
  For i = 0 to UBound(aFiles)
      'Move or not to move, that is what your code should tell
  Next
End Sub

Public Function F_ListFilesInDirAndSubDir(ByVal sDir)
    '===============================================================================
    'Get the list of files in a directory and in all its sub directories With the full path
    '===============================================================================
    Dim sChild      As String
    Dim aFolders    As Variant
    Dim aFiles      As Variant
    Dim aChildFiles As Variant
    Dim i           As Long
    Dim j           As Long
    F_ListFilesInDirAndSubDir = aFiles
    Set fs = CreateObject("Scripting.FileSystemObject")
    If Not fs.FolderExists(sDir) Then Exit Function

    'Get the files in the directory
    aFiles = F_ListFilesInDir(sDir)
    'Add the fullpath
    For i = 0 To UBound(aFiles)
        If aFiles(i) <> "" Then
            aFiles(i) = sDir & "\" & CStr(aFiles(i))
        End If
    Next

    'get the folders
    aFolders = F_ListFoldersInDir(sDir)

    'for each folders, push the files in the file list
    For i = 0 To UBound(aFolders)
        If aFolders(i) <> "" Then
            sChild = sDir & "\" & CStr(aFolders(i))
            'Recursive call on each folders
            aChildFiles = F_ListFilesInDirAndSubDir(sChild)
            'Push new items
            For j = 0 To UBound(aChildFiles)
                If aChildFiles(j) <> "" Then
                    ReDim Preserve aFiles(UBound(aFiles) + 1)
                    aFiles(UBound(aFiles)) = aChildFiles(j)
                End If
            Next
        End If
    Next

    F_ListFilesInDirAndSubDir = aFiles
End Function

Public Function F_ListFilesInDir(ByVal sDir)
    '===============================================================================
    'Get the list of files in a directory
    '===============================================================================
    Dim aList     As Variant
    Dim i         As Long
    Dim iChild    As Long
    Dim oFile
    Dim oFolder
    Dim oChildren
    ReDim aList(0)
    F_ListFilesInDir = aList

    Set fs = CreateObject("Scripting.FileSystemObject")

    If Not fs.FolderExists(sDir) Then Exit Function

    Set oFolder = fs.GetFolder(sDir)
    Set oChildren = oFolder.Files

    iChild = CDbl(oChildren.Count) - 1
    If iChild = -1 Then Exit Function

    ReDim aList(iChild)
    i = 0
    For Each oFile In oChildren
        aList(i) = oFile.Name
        i = i + 1
    Next

    F_ListFilesInDir = aList
End Function

Public Function F_ListFoldersInDir(ByVal sDir As String) As Variant
    '===============================================================================
    'Get the list of folders in a directory
    '===============================================================================
    Dim aList     As Variant
    Dim i         As Long
    Dim oDir
    Dim oFolder
    Dim oChildren
    ReDim aList(0)

    F_ListFoldersInDir = aList

    Set fs = CreateObject("Scripting.FileSystemObject")
    If Not fs.FolderExists(sDir) Then Exit Function

    Set oFolder = fs.GetFolder(sDir)
    Set oChildren = oFolder.SubFolders

    If oChildren.Count = 0 Then Exit Function

    ReDim aList(oChildren.Count - 1)
    i = 0
    For Each oDir In oChildren
        aList(i) = oDir.Name
        i = i + 1
    Next

    F_ListFoldersInDir = aList
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-24T13:42:11.450

在扩展名之前放一个`*`，它将找到具有该扩展名的所有文件。例子：`oFSO.MoveFile (PATH\*.EXTERNSION)`

# backbone.js - Backbonejs 和自定义模型事件

> ID：12593736
> 
> 赞同：1
> 
> 时间：2012-09-26T02:27:48.577
> 
> 标签：backbone.js

我正在尝试为我的模型创建一个自定义事件，但显然自定义事件无论如何都会被触发，除非我使用“匿名”函数定义作为回调

这是我的应用程序结构的伪代码

```
//Router
initialize: ->
  this.user = new User()
  this.view = new View({model:this.user})
  this.view.render()

//View
initialize: ->
  //This event binding get triggered no matter what
  //this.model.on("custom:event", this.triggerMe(), this) 

  //This works properly. Only triggered when I call model.trigger("custom:event")
  this.model.on("custom:event", function(){console.log("I WORK!!");}))

triggerMe: ->
  //I GET TRIGGER NO MATTER WHAT 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T02:38:13.017

你在这里调用一个函数：

this.triggerMe()

应该是this.triggerMe

```
this.model.on("custom:event", this.triggerMe, this) 
```

添加 () 或 .call() 或 .apply() 是调用一个函数而不是对其的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T02:38:23.133

通过传递，`this.triggerMe()`您将自动执行该`triggerMe`函数（因为您添加了括号，并且通过调用它）。

您需要做的是传递对该函数的**引用。**像这样：

```
this.model.on("custom:event", this.triggerMe, this) 
```

# cuda - 线程和块配置要求

> ID：12593738
> 
> 赞同：-1
> 
> 时间：2012-09-26T02:28:08.430
> 
> 标签：cuda

我正在开发一个程序，我在其中调用一个输入随机二进制数的函数。总数将在运行时提供，例如：1000 或 10,00,000.. 在生成随机数后，我需要使用 COUNTERS 计算 0 的总数和 1 的总数。我有以下查询：

1.  我应该分配多少线程、块和网格？
2.  我需要 2D 螺纹，还是只能使用 1D 螺纹？
3.  什么函数线程会在里面做什么，我觉得它应该检查特定值是 1 还是 0 这听起来对吗？
4.  我应该如何使用经纱或平铺方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:20:08.727

我猜这可能是一个家庭作业问题，尤其是基于您在 SO 上发布的唯一其他问题。

1.  有多少线程/块/网格？这个问题的答案取决于你的线程策略。每个线程会做什么？对于产生大量输出的问题，例如图像处理或矩阵乘法，常见的线程策略是分配每个线程来完成创建一个输出点的工作。但是这个问题只产生少量的输出值（似乎是 2 个），并且属于包括归约、流压缩和直方图在内的一类问题。这些问题通常分两步解决（可能是 2 个内核......），一个常见的线程策略（至少对于第一步或内核）是为每个输入点分配一个线程。但另请参阅我对下面 2 的回答。一旦知道需要多少线程，通常会为每个块选择一些线程数，例如 256 或 512（绝对使用 2 的幂），
2.  二维还是一维？您的问题本质上不是 2D，因此 1D 线程网格是一个合理的起点。但是，在一维线程网格中，您可以在网格中创建的最大线程数限制为您正在使用的 GPU 的最大网格 X 维度乘以每个块的线程数。这些数字通常类似于 65535 和 1024，因此在输入点的大约 64M 元素之后，您将用完线程。此时转换为使用 2D 网格结构并不难，这会将可能的线程数增加到大于 GPU 一次可以处理的大小。然而，另一种策略而不是切换到 2D 线程块网格是保留 1D 线程块网格，但让每个线程处理多个输入点/元素，可能在内核代码中使用循环。例如，如果您的循环最多可以处理 512 个元素，那么 65535x1024x512 应该涵盖您的问题大小。对于此类问题，这也是一种方便的线程策略，因为线程可以保留它创建的中间结果的本地副本（到目前为止的 1 和 0 的计数），而不会干扰或与其他线程同步。
3.  我基于上述的建议是单个线程将执行一个循环，并且循环的每一次循环都会查看一个元素，并更新包含 1 和 0 计数的局部变量。这将是两部分算法的第一部分。然后，第二部分必须收集这些中间结果。您将需要考虑第二部分如何收集第一部分的结果。例如，在内核完成时，您可能希望将中间结果存储回全局内存。
4.  翘曲/平铺？Warp是指将线程分组为32个线程的单元以供执行。这将自动为您发生。您应该安排您的算法，以便当您从全局内存中读取值（或将值写入全局内存）时，每个线程在连续的连续块中读取（或写入）。也就是说，线程 0 从位置 0 读取，线程 1 从下一个位置读取，等等。如果您在线程中没有做任何不寻常的事情，这或多或少会自动为您发生。由 cudaMalloc 创建的数据存储将正确对齐，如果您的数组索引策略类似于 [thread_number] 那么您将在整个 warp 中对齐和合并访问，建议您从 GPU 中获得良好的速度。平铺是指组织数据访问以突出局部性的过程，这通常有利于依赖缓存的架构。如果您在内存合并方面做得很好，您将不会过多地依赖缓存。

如果您有空的话，[CUDA C 编程指南](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)是一个可读性很强的文档，它将向您展示良好的 GPU 编程所需的基本概念。nvidia 网站上也有[网络研讨会，可以在大约 2 小时内涵盖此处的重要材料。](http://developer.nvidia.com/gpu-computing-webinars)此外，[thrust](http://thrust.github.com/)可以通过最少的编码工作（在 C++ 中）方便地处理此类问题，但我猜这超出了您现在尝试做的范围。

# cocoa - 调整窗口大小时图像不移动

> ID：12593740
> 
> 赞同：0
> 
> 时间：2012-09-26T02:28:25.037
> 
> 标签：cocoa, resize

我有一个窗口，主要是一个图像视图。当我从右上角调整窗口大小时，图像保持在原来的位置，当我移动鼠标时，窗口会覆盖和显示图像。但是，当我从左下角调整大小时，图像不会覆盖那个角落，而是随着窗口的角落移动。

无论我从哪一侧调整窗口大小，如何让图像保持在原位？

ps这是使用可可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:43:39.957

您需要更改**Autosizing**的属性`NSImageView`。可以通过选择 imageView 并转到**Size Inspector**然后更改**Autosizing**来完成。

或者所有这些都可以像这样以编程方式完成：

```
// Example shows how to turn all autosizing params to imageView

[imageViewOutlet setAutoresizingMask: NSViewMinXMargin | NSViewWidthSizable | NSViewMaxXMargin | NSViewMinYMargin | NSViewHeightSizable | NSViewMaxYMargin]; 
```

# php - 在 mysql (codeigniter) 中插入外键值

> ID：12593741
> 
> 赞同：1
> 
> 时间：2012-09-26T02:28:30.723
> 
> 标签：php, mysql, codeigniter

嘿伙计们，我有一个小问题。我想要的只是在我的表中插入一个外键值。这是我在 mysql 中的创建表语句。

```
CREATE TABLE `sales` (
 `sales_id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
 `fkmember` INT(10) UNSIGNED NOT NULL,
 `date_of_sales` DATETIME NOT NULL,
 PRIMARY KEY (`sales_id`),
 INDEX `fkmember` (`fkmember`),
 CONSTRAINT `sales_ibfk_1` FOREIGN KEY (`fkmember`) REFERENCES `member` (`member_id`)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB
AUTO_INCREMENT=3;

CREATE TABLE `sales_line` (
 `line_id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
 `fkproduct` INT(10) UNSIGNED NOT NULL,
 `fksales` INT(10) UNSIGNED NOT NULL,
 `quantity_purchased` INT(10) UNSIGNED NOT NULL,
 `subtotal` FLOAT(7,2) UNSIGNED NOT NULL,
 PRIMARY KEY (`line_id`),
 INDEX `fkproduct` (`fkproduct`),
 INDEX `fksales` (`fksales`),
 CONSTRAINT `sales_line_ibfk_1` FOREIGN KEY (`fkproduct`) REFERENCES `product` (`product_id`),
 CONSTRAINT `sales_line_ibfk_2` FOREIGN KEY (`fksales`) REFERENCES `sales` (`sales_id`)
) 
```

我的表结构：

销售表sales_id | 会员 | date_of_sales |

sales_line 表 line_id | fk产品 | 销售 | 购买数量 | 小计 |

我在两个表中插入值的代码：

```
foreach($products as $p){
        $data = array(
            'sales_id' => null,
            'fkmember' => $memberid
            'name' => $p['product_name']
        );
        $this->db->insert('sales',$data);
    }
   foreach($products as $p){
        $data = array(
            'line_id' => null,
            'fk_product' => $p['id'],
            'fk_sales' => null,
            'quantity_purchased' => $p['product_qty'],
            'subtotal' => number_format($subtotal,2)
        );
        $this->db->insert('sales_line',$data);
    }
    } 
```

我知道在 fk_sales 中插入值时插入值时出错。如何在此字段中插入来自我的销售表 id 的值？因为我想在一轮中插入这两个表。请帮帮我，伙计们。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T05:07:23.757

试试这个（注意使用`$this->db->insert_id()`）：

```
 foreach($products as $p){
        $data = array(
            'sales_id' => null,
            'fkmember' => $memberid
            'name' => $p['product_name']
        );
        $this->db->insert('sales',$data);
    }

    $sales_insert_id = $this->db->insert_id();

    foreach($products as $p){
        $data = array(
            'line_id' => null,
            'fk_product' => $p['id'],
            'fk_sales' => $sales_insert_id,
            'quantity_purchased' => $p['product_qty'],
            'subtotal' => number_format($subtotal,2)
        );
        $this->db->insert('sales_line',$data);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:46:09.050

在您的控制器函数中，首先插入销售条目，然后返回销售 id，然后使用返回的 id 插入销售行，如下所示。

```
Eg: 
//Controller function

  //insert the sales record and get the sales id
  $sales_id = $this->model_sale->insert_sale($mameber_id, $product_name); 

foreach($products as $p)
{
  //insert sales line
  $this->model_sales_line->insert_sales_line($sales_id, $p['id'],$p['product_qty'],$sub_total);
}

//Sales Model

public function insert_sale($mameber_id, $product_name)
{
 $data = array(            
        'fkmember' => $memberid
        'name' => $p['product_name']
    );
    $this->db->insert('sales',$data);

   return $this->db->insert_id();
} 
```

如果正确，请不要忘记接受任何答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T04:42:45.120

在此处查看[Codeigniter 数据库助手指南](http://codeigniter.com/user_guide/database/helpers.html)。第一个函数是 $this->db->insert_id();

所以你可以像这样使用它；

```
 $this->db->insert('sales',$data);
 $fk_sales_id = $this->db->insert_id(); 
```

# ruby - Gsub第一次失败，下一次有效吗？

> ID：12593745
> 
> 赞同：1
> 
> 时间：2012-09-26T02:29:20.557
> 
> 标签：ruby, gsub

通过以下用途`gsub`，我希望`"No, but I heard it's short and soft."`将其放在块引号之间。第一次，它是空的。当我立即再次运行它时，它做对了。

```
clean_content = "[quote=&quot;PDrizzle&quot;:1g581fap]No, but I heard it's short and soft.[/quote:1g581fap]\r\n\r\nwith very few ascents\r\n\r\nheh"
clean_content.gsub(
  /\[quote(?:.*)\](.*?)\[\/quote(?:.*)\]/,
  "<blockquote>#{$1}</blockquote>"
)
# => "<blockquote></blockquote>\r\n\r\nwith very few ascents\r\n\r\nheh" 
clean_content.gsub(
  /\[quote(?:.*)\](.*?)\[\/quote(?:.*)\]/,
  "<blockquote>#{$1}</blockquote>"
)
# => "<blockquote>No, but I heard it's short and soft.</blockquote>\r\n\r\nwith very few ascents\r\n\r\nheh" 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T02:36:41.587

`gsub`期望替换字符串中的反向引用被格式化为`\\1`而不是`$1`. 在您的示例中，第一次发生的字符串替换是指一个空字符串变量，第二次是通过执行第一个模式匹配来设置的。

所以你要：

```
clean_content.gsub(/\[quote(?:.*)\](.*?)\[\/quote(?:.*)\]/, "<blockquote>\\1</blockquote>") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T03:26:23.303

请记住，参数的评估先于接受它们的方法的评估。首先，你有`$1`= `""`，所以你的第一个实例`gsub`相当于

```
gsub(
   /\[quote(?:.*)\](.*?)\[\/quote(?:.*)\]/,
  "<blockquote></blockquote>"
) 
```

这使得`$1`= `"No, but I heard it's short and soft."`，所以你的第二个实例`gsub`相当于

```
gsub(
   /\[quote(?:.*)\](.*?)\[\/quote(?:.*)\]/,
  "<blockquote>No, but I heard it's short and soft.</blockquote>"
) 
```

当你第三次这样做时，你将再次拥有

```
gsub(
   /\[quote(?:.*)\](.*?)\[\/quote(?:.*)\]/,
  "<blockquote></blockquote>"
) 
```

# android - 让 Android EditText 向上延伸而不是向下延伸

> ID：12593747
> 
> 赞同：1
> 
> 时间：2012-09-26T02:29:21.490
> 
> 标签：android, android-layout

我的聊天布局有点类似于 Facebook 和 Yahoo! 信使的，即一个`Fragment`标题、一个`ListView`消息和一个`RelativeLayout`页脚，它有一个`EditText`和一堆`Buttons`。

```
[            HEADER            ]
 ______________________________
|                              |
|                              |
|                              |
|                              |
|           Messages           |
|                              |
|                              |
|                              |
|                              |
|______________________________|
[BTN][    EditText   [IMG]][BTN] 
```

当我输入长文本时，我想要这个：

```
[            HEADER            ]
 ______________________________
|                              |
|           Messages           |
|______________________________|
      ____________________
     |      EditText      |
     |                    |
     |                    |
     |                    |
[BTN][               [IMG]][BTN] 
```

但相反，我得到了这个：

```
[            HEADER            ]
 ______________________________
|                              |
|           Messages           |
|______________________________|
      ____________________
[BTN]|    EditText   [IMG]|[BTN]
     |                    |
     |                    |
     |                    |
     [                    ] 
```

我尝试设置布局`gravity="BOTTOM"`，但没有奏效。我尝试使用`layout_alignParentBottom="true"`，但这[使得页脚占据了整个屏幕](https://stackoverflow.com/q/12510814/152993)。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:24:50.010

通过使用`LinearLayout`, , 并将 the和其他一些东西`android:gravity="bottom"`包装到.`EditText``RelativeLayout`

# c - 用 C 在 Bison 中模拟布尔值

> ID：12593750
> 
> 赞同：1
> 
> 时间：2012-09-26T02:29:26.267
> 
> 标签：c, bison, flex-lexer

我正在尝试使用 C 和野牛制作一个逻辑计算器，但我遇到了麻烦，因为 C 没有布尔类型。

这是我的 Flex 规则的一部分：

```
"TRUE" |
"T"    |
"t"  {yylval = 1; return TRUE; }

"FALSE" |
"F"    |
"f"  {yylval = 0; return TRUE; } 
```

这是我的 Bison 规则的一部分：

```
line:
        EOL
        | exp EOL {printf("%d %d %d \n"), $1, $2,$$;}
        ;

exp: TRUE
   | FALSE
   ; 
```

这是我在计算器中键入 T 后跟 EOL（行尾）时的输出：

```
10 12 1 
```

10 是换行符的 ascii，12 是回车的 ascii，1 是开始的 Ascii 我对 F 有相同的输出。

如果我输入 T，我怎样才能做到 1 在 1 美元中，如果我输入 F，0 在 1 美元中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:50:54.803

我不是 Bison 专家，我已经很久没有使用它了，所以我建议你阅读[Flex 手册](http://westes.github.io/flex/manual/)，因为我认为你的 Flex 是错误的。您的规则需要返回令牌类型，而不是 TRUE。在您的 Bison 中，您有一个 FALSE 令牌类型，但没有返回该类型的规则。你想要的是

```
exp: BOOLEAN 
```

在 Bison 和 Flex 规则中，为布尔字符串返回 BOOLEAN，而不是 TRUE。你也会想要

```
%token BOOLEAN

%% 
```

在 Bison 文件的开头。

查看此页面右侧的链接，这些链接显示了其他人关于 flex 和 bison 的问题。

您的评论“我遇到了麻烦，因为 C 没有布尔类型”是不正确的，并且误导人们向您提供有关 C 类型的不相关建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T02:34:27.453

从 C99 标准开始，C*确实具有布尔值。*您可以使用标头`#include <stdbool.h>`，然后按以下方式使用布尔类型：

```
bool love = true;
if(love){
    //...
} 
```

所以，就像一个标准的布尔值。

# java - 为什么我无法使用 POI 读取 Excel 2007？

> ID：12593752
> 
> 赞同：1
> 
> 时间：2012-09-26T02:29:32.600
> 
> 标签：java, excel, apache-poi

当我尝试初始化 Workbook 对象时，我总是收到此错误：

```
The supplied data appears to be in the Office 2007+ XML. You are calling the part of POI that deals with OLE2 Office Documents. You need to call a different part of POI to process this data (eg XSSF instead of HSSF) 
```

但我按照办公室示例执行此操作，以下是我的代码：

```
File inputFile = new File(inputFileName); 
InputStream is = new FileInputStream(inputFile);
Workbook wb = new XSSFWorkbook(is); 
```

异常发生在代码行：

```
Workbook wb = new XSSFWorkbook(is); 
```

这是 POI jar，包括：

```
poi-3.8-20120326.jar  
poi-ooxml-3.8-20120326.jar  
poi-ooxml-schemas-3.8-20120326.jar  
xmlbeans-2.3.0.jar 
```

有大佬可以指导一下吗？一个显示如何阅读完整 Excel 2007 文档的示例将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T02:37:03.553

我假设您已经重新检查您的原始文件确实是 Office 2007+XML 格式，对吧？

**编辑：**

然后，如果您确定格式没问题，并且它适用于您使用 WorkbookFactory.create，您可以在该方法的代码中找到答案：

```
 /**
     * Creates the appropriate HSSFWorkbook / XSSFWorkbook from
     *  the given InputStream.
     * Your input stream MUST either support mark/reset, or
     *  be wrapped as a {@link PushbackInputStream}!
     */
    public static Workbook create(InputStream inp) throws IOException, InvalidFormatException {
            // If clearly doesn't do mark/reset, wrap up
            if(! inp.markSupported()) {
                    inp = new PushbackInputStream(inp, 8);
            }

            if(POIFSFileSystem.hasPOIFSHeader(inp)) {
                    return new HSSFWorkbook(inp);
            }
            if(POIXMLDocument.hasOOXMLHeader(inp)) {
                    return new XSSFWorkbook(OPCPackage.open(inp));
            }
            throw new IllegalArgumentException("Your InputStream was neither an OLE2 stream, nor an OOXML stream");
    } 
```

这是您缺少的一点：`new XSSFWorkbook(OPCPackage.open(inp))`

# ios - 设计 iOS 应用程序、缓存和访问来自 Web 服务的数据

> ID：12593754
> 
> 赞同：1
> 
> 时间：2012-09-26T02:29:45.987
> 
> 标签：ios, xcode

什么是从 iOS 应用程序存储和访问数据的最佳方式。

我想在应用程序启动时加载应用程序信息。比如账号图片、邮箱地址……等等。

然后，每个控制器都会为该帐户拥有的客户加载其他数据。我知道如何调用 Web 服务和使用核心数据。

是否有一些现有的模板或框架用于存储、缓存和访问数据？我应该将它全部包含在某个单例类中，以便每个控制器都可以访问数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T02:40:25.750

看起来很简单，您已经有了一个“单例”来执行您想要做的事情，即您的数据库及其托管对象上下文。您可以做的是将此数据库对象从控制器传递到控制器，或者像您所说的那样，使用获取的结果控制器和谓词获取单例对象并加载您需要的任何内容。

对于数据检索部分（来自您的 Web 服务），您有 2 个选择，考虑到您以块的形式获取数据而不是一个大的拉动：您可以让每个控制器对您的 Web 服务进行必要的调用，这些调用与您的数据相关'重新寻找存储在数据库中，否则您可以为所需的每种数据创建一个具有多种方法的类，并处理从托管对象上下文中保存和检索的问题。

此外，[这个问题](https://stackoverflow.com/questions/6898269/ios-core-data-architecture-tips-wanted)和[这个](https://stackoverflow.com/questions/10207539/ios-app-architecture-sample-for-synchronizing-coredata-against-web-service)问题似乎与您正在寻找的内容非常相关。

# c# - 在 DotLiquid 中编写递归循环

> ID：12593755
> 
> 赞同：4
> 
> 时间：2012-09-26T02:29:49.247
> 
> 标签：c#, templates, liquid, dotliquid

我在[DotLiquid](http://dotliquidmarkup.org/)中有这个循环：

```
{% for page in Page -%}
    {{ page.Title }}
    <ul>
       {% for subpage in page.Pages -%}
           <li>{{ subpage.Title }}</li>
           <!-- subpage.Pages has more pages and so on... -->
       {% endfor -%}
    </ul>
{% endfor -%} 
```

每个`subpage`对象都有一个`Pages`属性与列表中的其他子页面（如第一个`Page`对象。

如何在这些子页面上编写递归迭代以创建完整的树？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:08:38.590

将您的代码移动到一个单独的文件中，并使用`include`标签。

[这个](https://stackoverflow.com/q/5946708/208817)相关问题包括一些示例模板代码 - 它适用于 Liquid 的 Ruby 版本，但它应该是直接可移植的。

根据您需要执行的操作，您可以设置`Template.FileSystem`为内置`LocalFileSystem`以解析包含，也可以创建自己的。有关. [_`LocalFileSystem`](https://github.com/formosatek/dotliquid/blob/master/src/DotLiquid/FileSystems/LocalFileSystem.cs) _`IFileSystem`

# c# - 如何使用 Jquery 验证 C# 中的日期范围

> ID：12593756
> 
> 赞同：0
> 
> 时间：2012-09-26T02:29:53.650
> 
> 标签：c#, javascript, jquery, asp.net, ajax

我的 fromdatepicker1 和 todatepicker2。我想验证两者的日期范围。并且永远是 fromdate is < todate。我的日期格式是 dd/mm/yy，我应该如何在 Jquery 中编写它？

这是我的起始日期文本框

```
<asp:RequiredFieldValidator ControlToValidate="txtFromDateBank" 
                        ID="RequiredFieldValidator9" runat="server" Display="Dynamic" 
                        ErrorMessage="asdf" SetFocusOnError="true" InitialValue="" 
                        EnableClientScript="true" Font-Italic="True" Font-Size="Smaller" 
                        ForeColor="Red" ValidationGroup="AddBankDetails">Please specify date</asp:RequiredFieldValidator>
                </div> 
```

这是我今天的文本框

```
<asp:TextBox ID="txtToDateBank" runat="server"  class="datepicker"></asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:08:58.043

试试这些工具

[http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:41:17.540

使用 CustomeValidator 控件并将 ClientValidationFunction 属性设置为 javascript/jquery 函数。js 函数可能看起来像这样 -

```
<script language="JavaScript">
<!--
function CheckDate(sender, args)
{
    var strDate = $(fromdatetextbox).val();
    var dateParts = strDate.split("/"); 
    var fromdate = new Date(dateParts[2], (dateParts[1] - 1), dateParts[0]);

    strDate = $(todatetextbox).val();
    dateParts = strDate.split("/"); 
    todate = new Date(dateParts[2], (dateParts[1] - 1), dateParts[0]);

    if(fromdate > todate)
        args.IsValid = false;
    else
        args.IsValid = true;
}
// -->
</script> 
```

您可以在此链接中了解有关 customvalidator 的更多信息 [http://www.4guysfromrolla.com/articles/073102-1.aspx](http://www.4guysfromrolla.com/articles/073102-1.aspx)

# 更新

这是完整代码的样子

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default2.aspx.cs"   Inherits="Default2" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript">
    <!--
    function CheckDate(sender, args) {
        var strDate = $('#<%= textBoxFromDate.ClientID %>').val();
        var dateParts = strDate.split("/");
        var fromdate = new Date(dateParts[2], (dateParts[1] - 1), dateParts[0]);

        strDate = $('#<%= textBoxToDate.ClientID %>').val();
        dateParts = strDate.split("/");
        todate = new Date(dateParts[2], (dateParts[1] - 1), dateParts[0]);

        if (fromdate > todate)
            args.IsValid = false;
        else
            args.IsValid = true;
    }
    // -->
    </script>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <asp:TextBox ID="textBoxFromDate" runat="server" Text=""></asp:TextBox>
            <asp:CustomValidator ID="CustomValidator1" runat="server" ErrorMessage="CustomValidator"
            ControlToValidate="textBoxFromDate" ClientValidationFunction="CheckDate"></asp:CustomValidator>
            <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ErrorMessage="RequiredFieldValidator"
            ControlToValidate="textBoxFromDate"></asp:RequiredFieldValidator>

            <asp:TextBox ID="textBoxToDate" runat="server" Text=""></asp:TextBox>
            <asp:CustomValidator ID="CustomValidator2" runat="server" ErrorMessage="CustomValidator"
            ControlToValidate="textBoxToDate" ClientValidationFunction="CheckDate"></asp:CustomValidator>
            <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ErrorMessage="RequiredFieldValidator"
            ControlToValidate="textBoxToDate"></asp:RequiredFieldValidator>
        </div>
    </form>
</body>
</html> 
```

# python - 熊猫数据核对

> ID：12593759
> 
> 赞同：1
> 
> 时间：2012-09-26T02:30:35.270
> 
> 标签：python, pandas

我需要协调两个单独的数据框。两个数据帧中的每一行都有一个唯一的 id，我用它来匹配这两个数据帧。在不使用循环的情况下，如何将一个数据帧与另一个数据帧进行协调，反之亦然？

我尝试将两个数据帧合并到一个索引（唯一 id）上，但是当我这样做时遇到的问题是存在重复的数据行。有没有办法识别重复的数据行并将该数据放入数组或将其导出到 CSV？

非常感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:07:11.333

尝试`DataFrame.duplicated`并`DataFrame.drop_duplicates`

# visual-studio-2008 - 如何在 Visual Studio 中从 Windows Mobile 6 查看 STDOUT？

> ID：12593764
> 
> 赞同：0
> 
> 时间：2012-09-26T02:31:02.117
> 
> 标签：visual-studio-2008, windows-mobile-6

我正在使用 Visual Studio 2008 调试 Windows Mobile 6.5 应用程序，如果我能在程序运行时获得控制台输出，那就太好了。如何在 Visual Studio IDE 中从模拟器上运行的代码读取 printf 的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:15:46.120

Windows Mobile 没有控制台或控制台输出。您可以安装控制台，[http://windowsmobilepro.blogspot.de/2006/05/pocket-pc-console-for-standard-input.html](http://windowsmobilepro.blogspot.de/2006/05/pocket-pc-console-for-standard-input.html)和[http://handheld.softpedia.com/get/System-Utilities/增强功能/MS-Console-69411.shtml](http://handheld.softpedia.com/get/System-Utilities/Enhancements/MS-Console-69411.shtml)

但是为了调试我想使用这些。

代替 printf 使用 DEBUGMSG 或 RETAILMSG。例如：

DEBUGMSG(1, (L"函数 x: Lasterror 为 0x%08x\n", GetLastError()));

您还可以稍后将调试附加到正在运行的应用程序，然后查看 VisualStudio 输出窗口中的调试消息。

# iphone - 静态分析器 Xcode 4.3.3

> ID：12593765
> 
> 赞同：0
> 
> 时间：2012-09-26T02:31:26.597
> 
> 标签：iphone, objective-c, ios, xcode

我在确定泄漏位置时确实遇到了问题，我的客户通过它检测到它`TARGETS > RUN STATIC ANALYZER`并设置为“是”。然后在`Product`点击`Analyze`

他能够看到这样的东西：

![在此处输入图像描述](../Images/759c690443e8d7e439e7e83618aeffe3.png)

但是在我的情况下，我无法输出与上面相同的内容。尝试在互联网上搜索，但没有工作。我是不是错过了什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:04:56.747

```
self.responseData = [[NSMutableData alloc] initWithCapacity:[data length]]; 
```

这将创建并初始化一个对象。因此，该函数拥有该对象。如果您正确使用您的属性，它将在分配时保留（在该语句中），并在重新分配（声明`retain`）该字段时释放，或者复制并适当释放副本（`copy`）。这些中的任何一个都会使对象的保留计数为 1，并且没有指向它的指针，即泄漏的定义。你需要`release`或者`autorelease`那个对象在那个函数的某个地方。

```
self.responseData = [[[NSMutableData alloc] initWithCapacity:[data length]] autorelease]; 
```

或者

```
NSMutableData *newData = [[NSMutableData alloc] initWithCapacity:[data length]];
self.responseData = newData;
[newData release]; 
```

# git - linux-next 和 linux-net-history git 存储库有什么区别？

> ID：12593767
> 
> 赞同：3
> 
> 时间：2012-09-26T02:31:38.250
> 
> 标签：git, linux-kernel

git.kernel.org 有一个名为[linux-next](http://git.kernel.org/?p=linux/kernel/git/next/linux-next.git;a=summary)的存储库和一个名为[linux-next-history](http://git.kernel.org/?p=linux/kernel/git/next/linux-next-history.git;a=summary)的存储库。这些存储库在内容、用途、日常使用等方面有何不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T02:35:52.693

我认为这解释了原因[https://lkml.org/lkml/2011/8/2/95](https://lkml.org/lkml/2011/8/2/95)：

> ```
> Date      Tue, 2 Aug 2011 20:08:34 +1000
> From      Stephen Rothwell <>
> Subject   linux-next changes
> 
> Hi all,
> 
> Noone seems to have noticed, but I have mode the following changes to the
> linux-next repository on git.kernel.org:
> 
> git://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git now
> contains just the last 90 (or so) linux-next trees.  I have removed the
> "history" branch from this tree as it was serving no real purpose.  You
> can fetch a particular tree by using its name as a tag.  It is now aonly
> about 40MB relative to Linus' tree (as opposed to 300M for the complete
> tree.
> 
> I have put the old tree into
> git://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next-history.git
> which I will keep maintaining with the new trees, but is just there for
> historical purposes.  It also no longer has the "history" branch.
> 
> If anyone had a tree left over that referenced linux-next through an
> alternate, then you should probably change that to reference
> linux-next-history until you have fixed it to not reference it at all.  
> -- 
> Cheers,  
> Stephen Rothwell                    sfr@canb.auug.org.au  
> [unhandled content-type:application/pgp-signature] 
> ```

# lisp - Lisp 是如何动态和编译的？

> ID：12593768
> 
> 赞同：37
> 
> 时间：2012-09-26T02:31:38.263
> 
> 标签：lisp, common-lisp

我不明白 Lisp 是如何编译和动态的。对于一种能够操作、修改和生成代码的语言来说，是不是需要被解释？一种语言是否可以完全编译并且仍然是动态的？还是我错过了什么？Lisp 做了什么让它既可以编译又可以动态化？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-26T06:23:30.613

Lisp 是一个广泛的语言和实现家族。

*Lisp 上下文中的动态*意味着代码在运行时具有一定的灵活性。例如，它可以更改或替换。这与*动态类型*不同。

**在 Lisp 中编译**

通常 Lisp 实现有一个在运行时可用的编译器。当这个编译器是*增量*编译器时，它不需要整个程序，但可以编译单个 Lisp 形式。然后我们说编译器支持*增量*编译。

请注意，大多数 Lisp 编译器都不是*Just In Time*编译器。作为程序员，您可以调用编译器，例如在 Common Lisp 中使用函数[`COMPILE`](http://www.lispworks.com/documentation/HyperSpec/Body/f_cmp.htm)和[`COMPILE-FILE`](http://www.lispworks.com/documentation/HyperSpec/Body/f_cmp_fi.htm). 然后编译 Lisp 代码。

此外，大多数同时具有编译器和解释器的 Lisp 系统允许自由混合执行解释和编译代码。

在 Common Lisp 中，编译器也可以被指示编译代码的动态程度。更高级的 Lisp 编译器，如[SBCL](http://www.sbcl.org/)（或许多其他）的编译器，可以生成不同的代码。

**例子**

```
(defun foo (a)
  (bar a 3)) 
```

上面`foo`的函数调用函数`bar`。

如果我们有一个全局函数`bar`并重新定义它，那么在 Lisp 中我们通常期望新函数`bar`将由`foo`. 我们不必重新编译`foo`。

让我们看看[GNU CLISP](http://www.clisp.org/)。它编译为*虚拟机的**字节码*。它不是本机机器代码，但出于我们的目的，它更易于阅读。

 *```
CL-USER 1 > (defun foo (a)
              (bar a 3))
FOO

CL-USER 2 > (compile 'foo)

FOO
NIL
NIL

[3]> (disassemble #'foo)

Disassembly of function FOO
(CONST 0) = 3
(CONST 1) = BAR
1 required argument
0 optional arguments
No rest parameter
No keyword parameters
4 byte-code instructions:
0     (LOAD&PUSH 1)
1     (CONST&PUSH 0)                      ; 3
2     (CALL2 1)                           ; BAR
4     (SKIP&RET 2) 
```

**运行时查找**

因此，您会看到对 的调用进行`BAR`了运行时查找。它查看*符号* `BAR`，然后调用符号的函数。因此，符号表用作全局函数的注册表。

这种运行时查找与增量编译器相结合 - 在运行时可用 - 允许我们生成 Lisp 代码，编译它，将其加载到当前的 Lisp 系统中，并让它逐个修改 Lisp 程序。

这是通过使用间接来完成的。在运行时，Lisp 系统会查找名为`bar`. 但请注意，这与编译或解释无关。如果您的编译器编译`foo`并且生成的代码使用这种机制，那么它是*动态*的。因此，您将在解释代码和编译代码中都​​有查找开销。

自 70 年代以来，Lisp 社区付出了很多努力来使编译器和解释器的语义尽可能相似。

像 Common Lisp 这样的语言还允许编译器降低编译代码的动态性。例如，在运行时不为代码的某些部分查找函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:37:07.413

> 对于一种能够操作、修改和生成代码的语言来说，是不是需要被解释？

不。

> 一种语言是否可以完全编译并且仍然是动态的？

是的。

> 还是我错过了什么？

是的。

> Lisp 做了什么让它既可以编译又可以动态化？

它是即时编译的，就像大多数 java 和 PyPy 的实现一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-28T18:15:04.723

It can be compiled and dynamic in the same time because it's late-bound. You can run a list of functions and arguments and then add something to it and then run it again. Basically each part of the code can be run not just entire functions.*

# python - Python：内部定义的 open() 导致“类型错误”、“参数不需要参数，给定 1”

> ID：12593771
> 
> 赞同：1
> 
> 时间：2012-09-26T02:31:56.867
> 
> 标签：python, python-3.x

这很可能是我遇到问题的简单问题，但我现在没有另一台机器来确定它是否是我笔记本电脑的 python 版本。

当我运行我的程序时，我收到以下错误：“类型错误：函数 open() 不需要参数（给定 2 个）”

有问题的代码片段：

```
 import tkinter as tk
    from tkinter import filedialog as fdg

    def update_queue():
            conf_file = open("config.txt", "a")
            fd = fdg.LoadFileDialog(master)
            file = fd.go(pattern="*.jpg")
            conf_file.write(file)
            conf_file.close() 
```

我对 Python 还不太熟悉，希望能提供任何关于 open() 函数失败原因的指针（“你的代码看起来比昨晚烧焦的意大利面条更曲折”也很重要）。

另外值得注意的是，如果我在定义的函数之外调用 open，它会打开文件，并且可以完成对其执行的所有操作，但是如果我关闭文件，我将无法从函数内重新打开文件。我尝试使用 os 文件函数，但收到错误“LoadFileDialog 不适用于缓冲区定义的文件函数”。可以理解。

如果我使用 conf_file.flush()，假设我在函数之外打开它，它会刷新我写入/附加的任何内容，以便我以后可以再次从文件中读取？

编辑：我的意思是，这会一直有效，还是会被视为黑客行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:36:52.823

这是整个代码吗？确保您没有在某处导入另一个打开的函数。或重新定义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:51:05.313

假设 open() 是稍后声明的，而您只是没有将它包含在代码中，您可能将其声明为

```
def open():
    #code here 
```

如果是这种情况，您只是在声明函数时没有添加参数，它应该是：

```
def open(x, y):
    #code here 
```

其中 x 和 y 可以是你喜欢的任何东西。

请回来并发布您的其余代码（我非常怀疑这就是全部）以获得更好的答案。真正发生的事情最多只是外界的猜测。

# c - 为什么 char 值复制在 OS X 中不起作用？

> ID：12593772
> 
> 赞同：3
> 
> 时间：2012-09-26T02:31:59.983
> 
> 标签：c

这是教科书的 C 代码

```
void strcpy_new(char *s, char *t) {
    while ((*s = *t) != '\0') {
        s++;
        t++;
    }
}

int main(int argc, const char * argv[])
{

    char *s = "this is line a";
    char *t = "this is line b";
    printf("%s", s);
    strcpy_new(s, t);
    printf("%s", s);
    return 0;
} 
```

当我用 Xcode 运行它时，我得到了 EXEC_BAD_ACCESS。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T02:39:44.777

您获得 EXEC_BAD_ACCESS 的原因是因为这些字符串文字存储在只读内存中`"this is line a"`。`"this is line b"`尝试写入它 ( `*s = *t`) 是未定义的行为，因此您会收到崩溃。

要修复此代码，您应该为其分配一些内存，`s`以便它足够大以容纳第二个字符串 ( `t`)：

```
 char s[] = "this is line a"; // contrived example, s and t are the same length
    char *t = "this is line b";
    strcpy_new(s, t); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T02:54:13.413

我敢打赌，您正在尝试使用字符串文字`strcpy_new`的目的地运行`char *s`

```
#include <string.h>

int main(int argc, char *argv[])
{
    char *a = "Some String";
    char *b = "Another string";
    strcpy(b, a);
    return 0;
} 
```

将给出一个 EXEC_BAD_ACCESS。但是，以下内容不会

```
#include <string.h>

int main(int argc, char *argv[])
{
    char *a = "Some String";
    char b[] = "Another string";
    strcpy(b, a);
    return 0;
} 
```

不同之处在于，在第一种情况下，它`b`指向`__TEXT,__cstring,cstring_literals`可执行文件部分中的一块内存，这是写保护的。在第二种情况下，它指向堆栈上的一块内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T02:41:34.853

问题是覆盖字符串文字的效果是未定义的。

```
char *s = "this is line a";
char *t = "this is line b";
strcpy_new(s, t); 
```

`s`并且`t`都在代码的数据部分中关闭，并且您的特定设置恰好`EXEC_BAD_ACCESS`在您尝试更改它们时给您一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T03:06:10.087

字符串文字是只读的。在这里可以找到一个很好的答案：[http ://ubuntuforums.org/showthread.php?t=357869](http://ubuntuforums.org/showthread.php?t=357869)

C 中的字符串文字是只读的。在您的示例代码中，“我的字符串”是一个字符串文字。

str[] 声明将文字复制到可写内存（堆栈或堆）中。因此，您的程序可以修改该字符串。

* 声明初始化一个指向文字本身的指针，因此您有一个指向只读段的指针。如果您尝试覆盖它，您将获得 SEGV。

# php - wordpress 帖子未显示在前端或后端

> ID：12593774
> 
> 赞同：0
> 
> 时间：2012-09-26T02:32:07.157
> 
> 标签：php, wordpress

我今天安装了一个新的 wordpress 博客（v3.4.2，Windows 2008 R2，IIS7.5，SQL Server 2008 R2）。我已经这样做了好几次，而且我以前从未发生过这种情况。

当我创建一个新帖子并发布它时，一切看起来都很好。当我通过编辑帖子页面中的链接查看它时，一切看起来都很好。然后我打开博客主页，并没有在最新帖子中看到该帖子。当我回到 wp-admin 时，我看到“所有帖子”中有 (1) 个帖子，但列表是空的。

我尝试创建第二个帖子，当我从编辑页面查看它时，我可以看到它和我之前“丢失”的那个。我试图查看 URL 是否存在差异，但它们是相同的。

有人见过这个吗？它快把我逼疯了。我尝试关闭所有插件并切换到另一个主题，但什么也没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:23:14.120

我找到了解决方案。显然，由于抽象插件中的一些正则表达式问题，mysql 的限制没有被转换为 sql server 的顶部。

在这里找到解决方案： [https ://wordpress.stackexchange.com/questions/51134/dashboard-says-no-posts-found-even-though-there-are-some-posts](https://wordpress.stackexchange.com/questions/51134/dashboard-says-no-posts-found-even-though-there-are-some-posts)

在信用到期时给予信用:)

# sql - Oracle SQL：用一个缺失的元组连接另一个表

> ID：12593776
> 
> 赞同：0
> 
> 时间：2012-09-26T02:32:18.963
> 
> 标签：sql, oracle, oracle9i

我有以下两张表，一张存储订单信息，一张存储键|值信息。

没有`CD = D`for key `COLOR_CD`。我想加入两个表以获取所有订单，而不管表中未找到的键|值对`MASS_DECODE`。

我可以得到一些帮助吗：D

订单信息

```
ORDER_NUMBER    |COLOR_CD   |
----------------|-----------|
1               |A          |
2               |B          |
3               |C          |
4               |D          | 
```

MASS_DECODE

```
KEY         |CD             |VALUE      |
------------|---------------|-----------|
COLOR_CD    |A              |Green      |
COLOR_CD    |B              |Blue       |
COLOR_CD    |C              |Red        |
SIZE_CD     |A              |Large      |
SIZE_CD     |B              |Medium     |
SIZE_CD     |C              |Small      | 
```

SQL：

```
select order_number, cd, value
from order_information
left outer join mass_decode 
on (color_cd = cd)
and key = 'COLOR_CD'; 
```

结果：

```
ORDER_NUMBER    |CD         |VALUE      |
----------------|-----------|-----------|
1               |A          |Green      |
2               |B          |Blue       |
3               |C          |Red        | 
```

预期的：

```
ORDER_NUMBER    |CD         |VALUE      |
----------------|-----------|-----------|
1               |A          |Green      |
2               |B          |Blue       |
3               |C          |Red        |
4               |D          |NULL       | 
```

**编辑**：对不起，我为我的表格提供了不正确的信息。自从得到纠正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:38:18.227

您的列名不明确。您在两个表中有两个名称相同的列，那么 where 子句中的键指的是哪一列？我认为在更高版本的 Oracle 中，这实际上会给你一个错误。尝试这个：

```
select oi.order_number, oi.color_cd, md.value
from order_infomation oi
left outer join mass_decode md
on (oi.color_cd = md.cd)
where oi.key = 'KEY_A'; 
```

编辑：

根据您对@billy 的回复，这听起来对您不起作用。您还可以尝试将关键谓词放入连接子句中：

```
select oi.order_number, oi.color_cd, md.value
from order_infomation oi
left outer join mass_decode md
on (oi.color_cd = md.cd) and oi.key = 'KEY_A'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T02:45:43.387

```
select *
  from order_information oi
   left join mass_decode md 
     on (
            oi.color_cd = md.cd 
        and oi.key = md.key
     )
where oi.key = 'KEY_A'; 
```

[SQLFiddle](http://sqlfiddle.com/#!4/573cd/11)

更新：

根据您的更新：

```
select *
  from order_information oi
   left join mass_decode md 
     on oi.color_cd = md.cd
where md.key = 'COLOR_CD' or md.key is null; 
```

[SQLFiddle](http://sqlfiddle.com/#!4/c8359/4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T02:50:46.550

这应该这样做：

```
SELECT 
    order_number, 
    color_cd AS cd, 
    (
        SELECT value FROM mass_decode m2 WHERE m2.key = o.key AND m2.cd = o.color_cd
    ) AS value
FROM order_information o
WHERE o.key =  'KEY_A' 
```

# wpf - 如何以编程方式选择 listviewitem 的行为就像使用鼠标/键盘进行选择一样

> ID：12593779
> 
> 赞同：1
> 
> 时间：2012-09-26T02:32:25.067
> 
> 标签：wpf, listview

我正在尝试使用代码模仿 ListView 中选择事件的行为。所以这里是示例代码：

```
<StackPanel>
    <Button x:Name="buttonSelectAbove" Content="Select Above"/>
    <Button x:Name="buttonSelectBelow" Content="Select Below"/>
    <ListView x:Name="listView"/>
</StackPanel> 
```

这是背后的代码：

```
void buttonSelectBelow_Click(object sender, RoutedEventArgs e)
{
    listView.SelectedIndex += 1;
    ListViewItem lvi = listView.ItemContainerGenerator.ContainerFromItem(listView.SelectedItem) as ListViewItem;
    if (lvi != null)
    {
        lvi.Focus();
    }
}

void buttonSelectAbove_Click(object sender, RoutedEventArgs e)
{
    listView.SelectedIndex -= 1;
    ListViewItem lvi = listView.ItemContainerGenerator.ContainerFromItem(listView.SelectedItem) as ListViewItem;
    if (lvi != null)
    {
        lvi.Focus();
    }
} 
```

现在，如果您尝试这些代码，单击每个按钮并使用键盘上下移动列表将按预期工作，但是当您使用 SHIFT 单击选择一系列项目时，使用鼠标选择的行为会有所不同，这里有一些图像使其更清晰：

**正常选择行为：**
单击 C
![在此处输入图像描述](../Images/b9c493ee727e82eeed4eeeb7b3c8dec0.png)

然后shift点击E（将导致选择c，d，e） ![在此处输入图像描述](../Images/90f111e1023e38b8d254ac2ce18d15c9.png)

**通过代码行为选择：**
单击 A，
![在此处输入图像描述](../Images/11b1c9391bd2c462a69aca11539efe05.png)

单击下面的按钮选择两次，因此将选择 C ![在此处输入图像描述](../Images/bd17d4fab7e46253ecd91b8aaa5a4a95.png)

然后shift点击E（这将导致a，b，c，d，e被选中） ![在此处输入图像描述](../Images/4728e7e4eda75b8797fbc122fe587aee.png)

那么如何通过代码实现正常的选择行为呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:12:17.590

如果您不喜欢它能够选择多行，您可以在 LIstView 上使用 SelectionMode="Single"。

# android - PreferenceActivity 在 Android 2.1 上正常工作，但不是 4.1（填充）

> ID：12593789
> 
> 赞同：5
> 
> 时间：2012-09-26T02:34:32.737
> 
> 标签：android, padding, preferenceactivity, preference, windowed

我正在写一个应用程序。它需要在旧的 android 操作系统上运行才能有用。我使用 PreferencesActivity 编写了首选项屏幕，该 PreferencesActivity 填充了包含 PreferenceScreen 的 options.xml 文件。它没有首选项子菜单（因此 PreferenceFragment 没有提供真正的好处）。

在 Android 2.1（2.2 和 2.3，尚未在 ICS 上测试）中，屏幕在横向中正确显示如下： ![泡芙](../Images/f253d816427285fd727b21178b4842c9.png)

但在 Jellybean 上，它看起来像这样： ![果冻豆](../Images/520b324b907c767ffb051f7713d75634.png)

看起来很可怕。我没有定义为布局，只是标准的 addPreferencesFromResource()。有谁知道这可能是什么原因？还是解决方案？

我的 onCreate 看起来像这样：

```
 protected void onCreate(Bundle savedInstanceState) { //
    super.onCreate(savedInstanceState);
    Log.i(TAG, "Options Activity Loaded.");
    setTitle(getString(R.string.optionsTitle));
    addPreferencesFromResource(R.xml.options);
    setupListeners();
} 
```

其他一切都只是制作 Preference 对象并在它们被点击时分配方法来做事。我不想为 PreferenceFragment 和 PreferenceActivity 编写代码。如果最大版本的市场份额没有该 API 并且他们不会将其添加到兼容性库中，我不明白谷歌希望我们如何使用 Fragment API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:27:29.320

您的应用程序可以同时支持 SharedPreferences 的旧功能和新功能。您可以为旧偏好提供一个类，为新偏好提供一个类。它没有更多的代码。您可以像这样使您的应用向后兼容：

```
Class spc = Build.VERSION_SDK_INT < Build.VERSION_CODES.HONEYCOMB ? 
    oldPreferenceActivity.class : newFragmentPreferenceActivity.class;

Intent i = new Intent (this, spc);
startActivityForResult (i, SHOW_PREFERENCES); 
```

# zend-framework - 将 Zend_Form_Element_Captcha 添加到表单会导致表单不显示

> ID：12593796
> 
> 赞同：1
> 
> 时间：2012-09-26T02:35:23.003
> 
> 标签：zend-framework

我无法在注册表单中显示验证码元素。它以前可以工作，但现在由于某种原因，当我尝试将验证码元素添加到表单时，整个表单都不会显示。

下面是我的控制器文件中创建表单的函数

```
private function getSignupForm()
{
  // create form
  $form = new Zend_Form();      
  $form->setAction('success');
  $form->setMethod('post');
  $form->setAttrib('sitename', 'loudbite');

  // add elements
  require "form/elements.php";
  $loudbiteElements = new Elements();

  // create username field
  $form->addElement($loudbiteElements->getUsernameTextField());

  // create email field
  $form->addElement($loudbiteElements->getEmailTextField());

  // create password field
  $form->addElement($loudbiteElements->getPasswordTextField());

  // add captcha
  $form->addElement($loudbiteElements->getCaptcha());

  // create submit button
  $form->addElement('submit', 'submit');
  $submitElement = $form->getElement('submit');
  $submitElement->setLabel('Create My Account!');

  return $form;
} 
```

这是将表单传递给相应视图的操作

```
public function newAction()
{
    // get the form
    $form = $this->getSignupForm();

    // add the form to the view
    $this->view->form = $form;
} 
```

如果我在 getSignupForm() 函数中注释掉我将验证码添加到表单的行，那么表单将显示 ok 减去验证码元素。这使我假设验证码构造存在问题。

以下是构建验证码的外部模型文件中的函数

```
public function getCaptcha()
{
    $captchaElement = new Zend_Form_Element_Captcha(
      'signup',
      array('captcha' => array(
        'captcha' => 'Figlet',
        'wordLen' => 6,
        'timeout' => 600))
    );
    $captchaElement->setLabel('Please type in the words below to continue:');

    return $captchaElement;
} 
```

所有其他表单元素都在这个外部模型文件中创建。基于如果我不添加验证码元素其他元素正确显示的事实，我认为访问模型文件没有问题。

我上次使用此注册表单时一切正常！而且我不记得从那时到现在有什么改变。

任何帮助是极大的赞赏。

问候

罗恩

# node.js - AWS 负载平衡端口 3000 上的 Node.js 应用程序

> ID：12593798
> 
> 赞同：9
> 
> 时间：2012-09-26T02:35:48.573
> 
> 标签：node.js, amazon-ec2, amazon-web-services, load-balancing

我有一个 Node.js Express Web 应用程序，它使用默认端口 3000，并通过弹性 ip 在 Ubuntu EC2 实例上响应良好。我正在尝试设置 AWS 内置的负载平衡，但似乎无法通过良好的运行状况检查

设置 2 个 ubuntu 服务器，在端口 3000 上为应用程序提供服务。

将端口 80 的负载均衡器侦听器设置为路由到实例端口 3000，并尝试将 3000 路由到 3000。

以防万一，将 amazon-elb/amazon-elb-sg 安全组添加到我的实例安全组中。

将健康检查设置为端口 80，并将 3000 设置为项目中的许多有效 url。

我在这里缺少什么吗？

更新：

原来这是我忽略的最简单的事情。不知何故，我的实际实例位于仅打开 80 个的安全组中，我只需要添加一个规则即可打开 3000 个。不敢相信我错过了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T15:38:35.667

如果您将负载均衡器设置为仅将端口 80 上的传入请求转发到后端实例上的端口 3000，那么在尝试 80 以外的端口时您不应该得到任何响应。如果您针对端口 3000 发出请求（即[http://yourdomain.com:3000/uri](http://yourdomain.com:3000/uri)）您需要让负载均衡器还将端口 3000 上的传入请求转发到实例上的端口 3000。

如果您在实例上仅使用端口 3000，那么您需要确保您的健康检查指向端口 3000。（即 TCP ping 3000，或针对您的`/ping`服务的 HTTP 到端口 3000）。

# php - 为什么 require_once 回显整个文件内容？

> ID：12593800
> 
> 赞同：16
> 
> 时间：2012-09-26T02:36:01.880
> 
> 标签：php, require-once

我在文件“evalmath.php”中有一个类。

如果我需要这样：`require_once('evalmath.php');`该文件的全部内容将回显到屏幕上。

如果我这样做`require_once( 'evalmath.php' );`，它不会。

嗯？

**编辑 - EVALMATH.PHP 的源代码**

```
<?

/*
================================================================================

EvalMath - PHP Class to safely evaluate math expressions
Copyright (C) 2005 Miles Kaufmann <http://www.twmagic.com/>

================================================================================

NAME
    EvalMath - safely evaluate math expressions

SYNOPSIS
    <?
      include('evalmath.class.php');
      $m = new EvalMath;
      // basic evaluation:
      $result = $m->evaluate('2+2');
      // supports: order of operation; parentheses; negation; built-in functions
      $result = $m->evaluate('-8(5/2)^2*(1-sqrt(4))-8');
      // create your own variables
      $m->evaluate('a = e^(ln(pi))');
      // or functions
      $m->evaluate('f(x,y) = x^2 + y^2 - 2x*y + 1');
      // and then use them
      $result = $m->evaluate('3*f(42,a)');
    ?>

DESCRIPTION
    Use the EvalMath class when you want to evaluate mathematical expressions 
    from untrusted sources.  You can define your own variables and functions,
    which are stored in the object.  Try it, it's fun!

METHODS
    $m->evalute($expr)
        Evaluates the expression and returns the result.  If an error occurs,
        prints a warning and returns false.  If $expr is a function assignment,
        returns true on success.

    $m->e($expr)
        A synonym for $m->evaluate().

    $m->vars()
        Returns an associative array of all user-defined variables and values.

    $m->funcs()
        Returns an array of all user-defined functions.

PARAMETERS
    $m->suppress_errors
        Set to true to turn off warnings when evaluating expressions

    $m->last_error
        If the last evaluation failed, contains a string describing the error.
        (Useful when suppress_errors is on).

AUTHOR INFORMATION
    Copyright 2005, Miles Kaufmann.

LICENSE
    Redistribution and use in source and binary forms, with or without
    modification, are permitted provided that the following conditions are
    met:

    1   Redistributions of source code must retain the above copyright
        notice, this list of conditions and the following disclaimer.
    2\.  Redistributions in binary form must reproduce the above copyright
        notice, this list of conditions and the following disclaimer in the
        documentation and/or other materials provided with the distribution.
    3\.  The name of the author may not be used to endorse or promote
        products derived from this software without specific prior written
        permission.

    THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
    IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
    WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
    DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT,
    INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
    (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
    SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
    HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
    STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
    ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
    POSSIBILITY OF SUCH DAMAGE.

*/

class EvalMath {

    var $suppress_errors = false;
    var $last_error = null;

    var $v = array('e'=>2.71,'pi'=>3.14); // variables (and constants)
    var $f = array(); // user-defined functions
    var $vb = array('e', 'pi'); // constants
    var $fb = array(  // built-in functions
        'sin','sinh','arcsin','asin','arcsinh','asinh',
        'cos','cosh','arccos','acos','arccosh','acosh',
        'tan','tanh','arctan','atan','arctanh','atanh',
        'sqrt','abs','ln','log');

    function EvalMath() {
        // make the variables a little more accurate
        $this->v['pi'] = pi();
        $this->v['e'] = exp(1);
    }

    function e($expr) {
        return $this->evaluate($expr);
    }

    function evaluate($expr) {
        $this->last_error = null;
        $expr = trim($expr);
        if (substr($expr, -1, 1) == ';') $expr = substr($expr, 0, strlen($expr)-1); // strip semicolons at the end
        //===============
        // is it a variable assignment?
        if (preg_match('/^\s*([a-z]\w*)\s*=\s*(.+)$/', $expr, $matches)) {
            if (in_array($matches[1], $this->vb)) { // make sure we're not assigning to a constant
                return $this->trigger("cannot assign to constant '$matches[1]'");
            }
            if (($tmp = $this->pfx($this->nfx($matches[2]))) === false) return false; // get the result and make sure it's good
            $this->v[$matches[1]] = $tmp; // if so, stick it in the variable array
            return $this->v[$matches[1]]; // and return the resulting value
        //===============
        // is it a function assignment?
        } elseif (preg_match('/^\s*([a-z]\w*)\s*\(\s*([a-z]\w*(?:\s*,\s*[a-z]\w*)*)\s*\)\s*=\s*(.+)$/', $expr, $matches)) {
            $fnn = $matches[1]; // get the function name
            if (in_array($matches[1], $this->fb)) { // make sure it isn't built in
                return $this->trigger("cannot redefine built-in function '$matches[1]()'");
            }
            $args = explode(",", preg_replace("/\s+/", "", $matches[2])); // get the arguments
            if (($stack = $this->nfx($matches[3])) === false) return false; // see if it can be converted to postfix
            for ($i = 0; $i<count($stack); $i++) { // freeze the state of the non-argument variables
                $token = $stack[$i];
                if (preg_match('/^[a-z]\w*$/', $token) and !in_array($token, $args)) {
                    if (array_key_exists($token, $this->v)) {
                        $stack[$i] = $this->v[$token];
                    } else {
                        return $this->trigger("undefined variable '$token' in function definition");
                    }
                }
            }
            $this->f[$fnn] = array('args'=>$args, 'func'=>$stack);
            return true;
        //===============
        } else {
            return $this->pfx($this->nfx($expr)); // straight up evaluation, woo
        }
    }

    function vars() {
        $output = $this->v;
        unset($output['pi']);
        unset($output['e']);
        return $output;
    }

    function funcs() {
        $output = array();
        foreach ($this->f as $fnn=>$dat)
            $output[] = $fnn . '(' . implode(',', $dat['args']) . ')';
        return $output;
    }

    //===================== HERE BE INTERNAL METHODS ====================\\

    // Convert infix to postfix notation
    function nfx($expr) {

        $index = 0;
        $stack = new EvalMathStack;
        $output = array(); // postfix form of expression, to be passed to pfx()
        $expr = trim(strtolower($expr));

        $ops   = array('+', '-', '*', '/', '^', '_');
        $ops_r = array('+'=>0,'-'=>0,'*'=>0,'/'=>0,'^'=>1); // right-associative operator?  
        $ops_p = array('+'=>0,'-'=>0,'*'=>1,'/'=>1,'_'=>1,'^'=>2); // operator precedence

        $expecting_op = false; // we use this in syntax-checking the expression
                               // and determining when a - is a negation

        if (preg_match("/[^\w\s+*^\/()\.,-]/", $expr, $matches)) { // make sure the characters are all good
            return $this->trigger("illegal character '{$matches[0]}'");
        }

        while(1) { // 1 Infinite Loop ;)
            $op = substr($expr, $index, 1); // get the first character at the current index
            // find out if we're currently at the beginning of a number/variable/function/parenthesis/operand
            $ex = preg_match('/^([a-z]\w*\(?|\d+(?:\.\d*)?|\.\d+|\()/', substr($expr, $index), $match);
            //===============
            if ($op == '-' and !$expecting_op) { // is it a negation instead of a minus?
                $stack->push('_'); // put a negation on the stack
                $index++;
            } elseif ($op == '_') { // we have to explicitly deny this, because it's legal on the stack 
                return $this->trigger("illegal character '_'"); // but not in the input expression
            //===============
            } elseif ((in_array($op, $ops) or $ex) and $expecting_op) { // are we putting an operator on the stack?
                if ($ex) { // are we expecting an operator but have a number/variable/function/opening parethesis?
                    $op = '*'; $index--; // it's an implicit multiplication
                }
                // heart of the algorithm:
                while($stack->count > 0 and ($o2 = $stack->last()) and in_array($o2, $ops) and ($ops_r[$op] ? $ops_p[$op] < $ops_p[$o2] : $ops_p[$op] <= $ops_p[$o2])) {
                    $output[] = $stack->pop(); // pop stuff off the stack into the output
                }
                // many thanks: http://en.wikipedia.org/wiki/Reverse_Polish_notation#The_algorithm_in_detail
                $stack->push($op); // finally put OUR operator onto the stack
                $index++;
                $expecting_op = false;
            //===============
            } elseif ($op == ')' and $expecting_op) { // ready to close a parenthesis?
                while (($o2 = $stack->pop()) != '(') { // pop off the stack back to the last (
                    if (is_null($o2)) return $this->trigger("unexpected ')'");
                    else $output[] = $o2;
                }
                if (preg_match("/^([a-z]\w*)\($/", $stack->last(2), $matches)) { // did we just close a function?
                    $fnn = $matches[1]; // get the function name
                    $arg_count = $stack->pop(); // see how many arguments there were (cleverly stored on the stack, thank you)
                    $output[] = $stack->pop(); // pop the function and push onto the output
                    if (in_array($fnn, $this->fb)) { // check the argument count
                        if($arg_count > 1)
                            return $this->trigger("too many arguments ($arg_count given, 1 expected)");
                    } elseif (array_key_exists($fnn, $this->f)) {
                        if ($arg_count != count($this->f[$fnn]['args']))
                            return $this->trigger("wrong number of arguments ($arg_count given, " . count($this->f[$fnn]['args']) . " expected)");
                    } else { // did we somehow push a non-function on the stack? this should never happen
                        return $this->trigger("internal error");
                    }
                }
                $index++;
            //===============
            } elseif ($op == ',' and $expecting_op) { // did we just finish a function argument?
                while (($o2 = $stack->pop()) != '(') { 
                    if (is_null($o2)) return $this->trigger("unexpected ','"); // oops, never had a (
                    else $output[] = $o2; // pop the argument expression stuff and push onto the output
                }
                // make sure there was a function
                if (!preg_match("/^([a-z]\w*)\($/", $stack->last(2), $matches))
                    return $this->trigger("unexpected ','");
                $stack->push($stack->pop()+1); // increment the argument count
                $stack->push('('); // put the ( back on, we'll need to pop back to it again
                $index++;
                $expecting_op = false;
            //===============
            } elseif ($op == '(' and !$expecting_op) {
                $stack->push('('); // that was easy
                $index++;
                $allow_neg = true;
            //===============
            } elseif ($ex and !$expecting_op) { // do we now have a function/variable/number?
                $expecting_op = true;
                $val = $match[1];
                if (preg_match("/^([a-z]\w*)\($/", $val, $matches)) { // may be func, or variable w/ implicit multiplication against parentheses...
                    if (in_array($matches[1], $this->fb) or array_key_exists($matches[1], $this->f)) { // it's a func
                        $stack->push($val);
                        $stack->push(1);
                        $stack->push('(');
                        $expecting_op = false;
                    } else { // it's a var w/ implicit multiplication
                        $val = $matches[1];
                        $output[] = $val;
                    }
                } else { // it's a plain old var or num
                    $output[] = $val;
                }
                $index += strlen($val);
            //===============
            } elseif ($op == ')') { // miscellaneous error checking
                return $this->trigger("unexpected ')'");
            } elseif (in_array($op, $ops) and !$expecting_op) {
                return $this->trigger("unexpected operator '$op'");
            } else { // I don't even want to know what you did to get here
                return $this->trigger("an unexpected error occured");
            }
            if ($index == strlen($expr)) {
                if (in_array($op, $ops)) { // did we end with an operator? bad.
                    return $this->trigger("operator '$op' lacks operand");
                } else {
                    break;
                }
            }
            while (substr($expr, $index, 1) == ' ') { // step the index past whitespace (pretty much turns whitespace 
                $index++;                             // into implicit multiplication if no operator is there)
            }

        } 
        while (!is_null($op = $stack->pop())) { // pop everything off the stack and push onto output
            if ($op == '(') return $this->trigger("expecting ')'"); // if there are (s on the stack, ()s were unbalanced
            $output[] = $op;
        }
        return $output;
    }

    // evaluate postfix notation
    function pfx($tokens, $vars = array()) {

        if ($tokens == false) return false;

        $stack = new EvalMathStack;

        foreach ($tokens as $token) { // nice and easy
            // if the token is a binary operator, pop two values off the stack, do the operation, and push the result back on
            if (in_array($token, array('+', '-', '*', '/', '^'))) {
                if (is_null($op2 = $stack->pop())) return $this->trigger("internal error");
                if (is_null($op1 = $stack->pop())) return $this->trigger("internal error");
                switch ($token) {
                    case '+':
                        $stack->push($op1+$op2); break;
                    case '-':
                        $stack->push($op1-$op2); break;
                    case '*':
                        $stack->push($op1*$op2); break;
                    case '/':
                        if ($op2 == 0) return $this->trigger("division by zero");
                        $stack->push($op1/$op2); break;
                    case '^':
                        $stack->push(pow($op1, $op2)); break;
                }
            // if the token is a unary operator, pop one value off the stack, do the operation, and push it back on
            } elseif ($token == "_") {
                $stack->push(-1*$stack->pop());
            // if the token is a function, pop arguments off the stack, hand them to the function, and push the result back on
            } elseif (preg_match("/^([a-z]\w*)\($/", $token, $matches)) { // it's a function!
                $fnn = $matches[1];
                if (in_array($fnn, $this->fb)) { // built-in function:
                    if (is_null($op1 = $stack->pop())) return $this->trigger("internal error");
                    $fnn = preg_replace("/^arc/", "a", $fnn); // for the 'arc' trig synonyms
                    if ($fnn == 'ln') $fnn = 'log';
                    eval('$stack->push(' . $fnn . '($op1));'); // perfectly safe eval()
                } elseif (array_key_exists($fnn, $this->f)) { // user function
                    // get args
                    $args = array();
                    for ($i = count($this->f[$fnn]['args'])-1; $i >= 0; $i--) {
                        if (is_null($args[$this->f[$fnn]['args'][$i]] = $stack->pop())) return $this->trigger("internal error");
                    }
                    $stack->push($this->pfx($this->f[$fnn]['func'], $args)); // yay... recursion!!!!
                }
            // if the token is a number or variable, push it on the stack
            } else {
                if (is_numeric($token)) {
                    $stack->push($token);
                } elseif (array_key_exists($token, $this->v)) {
                    $stack->push($this->v[$token]);
                } elseif (array_key_exists($token, $vars)) {
                    $stack->push($vars[$token]);
                } else {
                    return $this->trigger("undefined variable '$token'");
                }
            }
        }
        // when we're out of tokens, the stack should have a single element, the final result
        if ($stack->count != 1) return $this->trigger("internal error");
        return $stack->pop();
    }

    // trigger an error, but nicely, if need be
    function trigger($msg) {
        $this->last_error = $msg;
        if (!$this->suppress_errors) trigger_error($msg, E_USER_WARNING);
        return false;
    }
}

// for internal use
class EvalMathStack {

    var $stack = array();
    var $count = 0;

    function push($val) {
        $this->stack[$this->count] = $val;
        $this->count++;
    }

    function pop() {
        if ($this->count > 0) {
            $this->count--;
            return $this->stack[$this->count];
        }
        return null;
    }

    function last($n=1) {
        return $this->stack[$this->count-$n];
    }
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-26T02:50:48.870

类文件以短标签 [ `<?`] 开头 - 如果禁用短标签 [这应该是默认行为]，则整个文件被视为纯文本，因此不会被解析。

只需将其替换为完整标签 - `<?php`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T03:30:39.623

引导您确认短标签已被禁用，我猜您正在像这样调试您的脚本？

```
// dumps everything!
require_once('evalmath.php');

// dumps nothing??
require_once( 'evalmath.php' ); 
```

如果您的测试看起来像这样，那么第二个表单不转储您的文件的唯一原因是因为它实际上并没有第二次包含它。要求_**一次**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T02:52:02.473

只需尝试将脚本包含在其中`<?php`而不是`<?`它可能是服务器配置问题不接受它。

# luabind - 如何使用 luabind 将具有多个参数的函子绑定到 lua

> ID：12593802
> 
> 赞同：0
> 
> 时间：2012-09-26T02:36:30.153
> 
> 标签：luabind

如果我想使用 luabind 将带有一个参数的函子绑定到 lua，以下代码可能会有所帮助：

```
struct vec
{
    int operator()(int a)
    {
        return a + 10；
    }
};
module(L)
[
    class_<vec>("vec")
        .def( self(int()) )
]; 
```

但是如何绑定一个具有多个参数的函子，例如：

```
struct vec
{
    int operator()(int a, int b, int c)
    {
        return a + b + c;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T20:21:53.843

你应该使用`tag_function`.

[http://www.rasterbar.com/products/luabind/docs.html#binding-function-objects-with-explicit-signatures](http://www.rasterbar.com/products/luabind/docs.html#binding-function-objects-with-explicit-signatures)

# javascript - 使用 gzip 压缩 JavaScript

> ID：12593806
> 
> 赞同：0
> 
> 时间：2012-09-26T02:36:52.330
> 
> 标签：javascript, optimization, compression, gzip

我运行 Google PageSpeed Insights 来优化我的网站，它建议使用 gzip 归档大量 JavaScript 文件。

这是如何运作的？文件是如何导入/包含为存档的？它们可以都在一个大档案中，还是应该是单独的档案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:39:25.853

我认为他们指的是由 Web 服务器压缩静态内容。文件本身是相同的，但您可能需要对您拥有的任何 Web 服务器进行一些配置。

有关更多信息，请参阅[此](http://betterexplained.com/articles/how-to-optimize-your-site-with-gzip-compression/)内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T02:39:37.967

您可以配置您的网络服务器为您进行压缩；在[Apache](http://httpd.apache.org/docs/2.2/mod/core.html#addoutputfilterbytype)的情况下：

```
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T02:40:12.533

大多数 Web 服务器（Apache、IIS、Node）在内部或通过插件支持此功能。您通常只需在 Web 服务器上启用它，您实际上并不创建 zip 文件或手动更改任何内容。看看[http://betterexplained.com/articles/how-to-optimize-your-site-with-gzip-compression/](http://betterexplained.com/articles/how-to-optimize-your-site-with-gzip-compression/)

# django - 自定义 django-registration 后端必须只采用一个参数

> ID：12593813
> 
> 赞同：0
> 
> 时间：2012-09-26T02:37:44.300
> 
> 标签：django, django-registration

对于我做错了什么，我在这里完全不知所措。我正在为 django-registration 编写自定义后端，据我所知，我完全按照说明进行操作。我缺少什么论据来完成这项工作？

这是我的错误信息：

```
TypeError at /accounts/register/
CustomSignUpBackend() takes exactly 1 argument (0 given) 
```

这是我的回溯：

```
Environment:

Request Method: GET
Request URL: http://localhost:8000/accounts/register/

Django Version: 1.4.1
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'api',
 'contact',
 'lessons',
 'mainsite',
 'piston',
 'registration',
 'utils')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware')

Traceback:
File "c:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "c:\Python27\lib\site-packages\registration\views.py" in register
  178\.     backend = get_backend(backend)
File "c:\Python27\lib\site-packages\registration\backends\__init__.py" in get_backend
  32\.     return backend_class()

Exception Type: TypeError at /accounts/register/
Exception Value: CustomSignUpBackend() takes exactly 1 argument (0 given) 
```

这是相关的行`urls.py`：

```
url(r'^accounts/register/$', register, {'template_name': 'registration/registration_form.html', 'backend': 'lessons.backends.CustomSignUpBackend', 'form_class': MyRegistrationForm}, name='registration_register'), 
```

最后是自定义后端代码（在课程/后端/ **init** .py 中）：

```
class CustomSignUpBackend(DefaultBackend):

    def register(self, request, **kwargs):

        username, email, password = kwargs['username'], kwargs['email'], kwargs['password1']
        if Site._meta.installed:
            site = Site.objects.get_current()
        else:
            site = RequestSite(request)
        new_user = RegistrationProfile.objects.create_inactive_user(username, email,
                                                                    password, site)
        return new_user 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:25:36.550

`def TeacherSignupBackend(arg)`应该是类`TeacherSignupBackend(parentClass)`

函数接受参数...类从父类继承

# html - 降价范围与 和 块？

> ID：12593816
> 
> 赞同：16
> 
> 时间：2012-09-26T02:37:57.540
> 
> 标签：html, scope, markdown

我注意到块级的东西对降价并不友好。想象以下部分（是的，我打算为 twitter bootstrap 输出）：

```
<section id="loremipsum">
    <div class="page-header">
    # Heading 1 #
    </div>

    Lorem ipsum, blah blah blah, yada yada yada.
</section> 
```

预期的输出应该是：

```
<section id="loremipsum">
    <div class="page-header">
    <h1>Heading 1</h1>
    </div>
    <p>Lorem ipsum, blah blah blah, yada yada yada.</p>
</section> 
```

相反，产生的输出更接近：

```
<p><section id="loremipsum"></p>
<div class="page-header">
# Heading 1 #
</div>
<p>Lorem ipsum, blah blah blah, yada yada yada.</section></p> 
```

这里有两个问题：

1.  根据 Daring Fireball 的建议，Markdown 应该足够聪明，不会放入不需要的内容

    块级元素周围的标签，例如节标签。

2.  标题 1 不被解析为标题，而是未被解析。

这两个问题实际上也发生在官方解析器 Dingus 中，所以我想这是“按预期工作”类型的问题之一。也就是说，是否有任何降价专家知道如何解决这些问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-15T10:55:20.460

游戏有点晚了，但更新了答案（截至 2015 年夏季）。

问题取决于您使用的实现，但是关于降价的一个很好的参考是[CommonMark](http://spec.commonmark.org/0.21/)。根据[HTML-blocks 规范](http://spec.commonmark.org/0.21/#html-blocks)，您可以使用此降价获得想要的结果：

```
<section id="loremipsum">
  <div class="page-header">

  # Heading 1 #

  </div>

  Lorem ipsum, blah blah blah, yada yada yada.

</section> 
```

注意空行，它们是HTML 块的*结束条件*。另请注意：

> 该块以符合开始条件的行开始（在**最多三个空格**可选缩进之后）。

这意味着人们应该小心缩进 HTML 块的开头。

[markdown-it](https://github.com/markdown-it/markdown-it)在 js 中 100% 实现 commonmark，[perl-commonmark](https://github.com/nwellnhof/perl-commonmark)为您提供与 CommonMark C 库的绑定，我想您会在大多数编程语言中找到 CommonMark 的实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-20T20:18:45.610

您可以使用[Pandoc](http://johnmacfarlane.net/pandoc/)的降价，它默认将标签之间的`<div>`代码解释为降价文本。

```
$ pandoc input.md -o output.html 
```

（有关详细信息，请参阅[Pandoc 的降价文档](http://johnmacfarlane.net/pandoc/demo/example9/pandocs-markdown.html)`markdown_in_html_blocks`部分。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T02:59:56.187

是的，这是设计使然。根据[格鲁伯](http://daringfireball.net/projects/markdown/syntax#html)：

> 请注意，Markdown 格式化语法不会在块级 HTML 标记中处理。例如，您不能在 HTML 块中使用 Markdown 风格的 *emphasis*。

我不知道有任何解决方法，但是当谈到 Markdown 时，我不会把自己置于大师级别。

**编辑**：如果您正在使用 PHP，您可能需要查看[PHP Markdown Extra 。](http://michelf.ca/projects/php-markdown/extra/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-20T01:40:19.337

一些实现可能区分大小写。

事实证明，如果您将标签大写，`markdownsharp`则将使用实数，但如果使用.`div``<DIV>``<div>`

所以这可能会给你你想要的

```
<DIV class="video-panel">
   ![Review][1]
   ![Review][2]
</DIV> 
```

* * *

甚至 stackoverflow 的 markdown 仍然可以区分两者，尽管它去掉了 DIV 本身。对于一个公共网站来说，这可能是一件好事！

**这将是大胆的**

**这不会是粗体**

# html - 什么是 shape-id，如何在 css 文件中找到它？

> ID：12593818
> 
> 赞同：0
> 
> 时间：2012-09-26T02:38:14.643
> 
> 标签：html, css

对于 Web 开发人员来说，这可能是微不足道的，但 shape-id 是什么？

如`<hr shape-id="2">`.

我正在尝试更改网站中 hr 行的颜色，但似乎在 css 中的任何地方都找不到它。

我知道 id 可以由 by`#someId`和 class by找到，`.someClass`但我如何找到 shape-id？

我尝试添加`hr{}`到我的 CSS，但它似乎没有工作。

顺便说一句，我在 Orchard CMS 工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T02:51:39.543

它是一个属性，而不是 ID，您需要使用属性选择器来选择它。

```
[shape-id="2"] {
  color: #f00;
  background-color: #f00;
  height: 5px;
}​​ 
```

***[检查演示。](http://jsfiddle.net/LDqnv/)***

# javascript - 如何使用类和内部 p 标签定位 div

> ID：12593823
> 
> 赞同：0
> 
> 时间：2012-09-26T02:38:59.697
> 
> 标签：javascript, jquery

我有一个看起来像这样的结构..

```
<div class="infobubble">
    <a href="#" class="btn-closebubble"></a>
    <p>
PLACE CONTENT HERE
</p>
</div> 
```

我如何使用 jquery 来定位 in

标签？

我试过这个但没有用。

```
$("infobubble p").html('My Text'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T02:45:58.103

你的代码是错误的，你需要指定你正在寻找一个类，像这样

```
$(".infobubble p").html('My Text'); 
```

您的代码`$("infobubble p")`将寻找一个名为`infobubble`但不存在的标签元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:45:11.407

```
$(".infobubble p").html('My Text'); 
```

在 jQuery 中，您需要添加一个“。” 按类选择或“#”按 id 选择。如果不 '。' 或指定了“#”，jQuery 将尝试按标签名称查找元素...在您的情况下，它试图查找`<infobubble>`哪个不是元素。

# java - 在 Java 中创建对象数组

> ID：12593827
> 
> 赞同：1
> 
> 时间：2012-09-26T02:39:20.747
> 
> 标签：java, arrays, object

我已经将此代码作为课堂作业开始。我们要建立一个类来创建一个对象数组。我们应该有两个构造函数，因此可以使用给定大小或默认大小 100 来初始化数组。这是我到目前为止所拥有的

```
public class Set {

    private int maxObjects;
    private int sz;

    public Set(int maxObjects) {
        this.maxObjects = maxObjects;
        this.sz = maxObjects;
        Object[] a = new Object[maxObjects];
    }

    public Set() {
        this.maxObjects = 100;
        this.sz = 100;
        Object[] a = new Object[100];
    }

    public void add(Object object) {
        a[0] = Object;
    } 
```

我遇到的问题是它没有被`a`视为方法中的变量`add()`。此外，数组应该用设定的容量初始化，但为空，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T02:42:45.070

您应该定义`a`与定义 maxObjects 和 sz 相同的位置。

```
private Object[] a; 
```

然后把它放在你的构造函数中：

```
a = new Object[maxObjects]; 
```

阅读有关[变量范围的信息](http://www.java-made-easy.com/variable-scope.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T02:42:42.573

您非常接近正确。您遇到的问题与变量的范围有关。检查更接近变量 a 的范围。

此外，您的 add 方法中有错字。

```
a[0] = Object 
```

应该

```
a[0] = object 
```

（带小写 o）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T02:46:34.150

> 它没有被视为方法`a`中的变量`add()`

你的问题是在构造函数`a`中*声明*`Set`的，所以它是构造函数的本地的。这意味着它不能在构造函数之外使用（例如从`add`方法中）。

解决方案非常简单。`a`用您的其他字段声明：

```
public class Set {

    private int maxObjects;
    private int sz;
    private Object[] a;

    public Set(int maxObjects) {
        this.maxObjects = maxObjects;
        this.sz = maxObjects;
        this.a = new Object[maxObjects];
    }

    public Set() {
        this.maxObjects = 100;
        this.sz = 100;
        this.a = new Object[100];
    }

    public void add(Object object) {
        a[0] = object;
    }
} 
```

我建议阅读 Java 中的作用域（一个简单的谷歌搜索会在那里产生帮助）。

> 此外，数组应该使用设定的容量进行初始化，但为空。

这是默认完成的。对于任何非原始类型的数组，数组的元素都被初始化为`null`. 这里，一个全`null`数组本质上是一个空数组。呼叫`new Object[capacity]`正在为您执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T02:46:45.103

几件事：

*   `a`应该是一个字段
*   您的默认构造函数应该调用另一个构造函数
*   错字

试试这个：

```
public class Set {

    private int maxObjects;
    private int sz;
    private Object[] a;

    public Set(int maxObjects) {
        this.maxObjects = maxObjects;
        this.sz = maxObjects;
        a = new Object[maxObjects];
    }

    public Set() {
        this(100);  // fyi, this is the syntax for calling another constuctor
    }

    public void add(Object object) {
        a[0] = object;
    }
} 
```

# c++ - C++ 错误随机数

> ID：12593828
> 
> 赞同：0
> 
> 时间：2012-09-26T02:39:21.887
> 
> 标签：c++, random, numbers

我正在创建一台机器，它可以生成带有随机组件的霰弹枪，这些组件会影响枪的整体质量。我在生成构成霰弹枪的随机部件时遇到问题。必须生成 4 个部分。当我创建这些函数中的每一个时，我单独测试它们并且它们都可以工作，但是当我尝试将它们与`createChromo()`函数组合在一起时，数字是单独随机的。我应该得到类似 2131 和 1332 的结果，但我不断得到 1111 或 1112 或 2221 或 2222 ......这是代码：

```
int generateButt()
{
    srand(unsigned(time(NULL)));
    int buttType = rand() % 3 + 1;

    if(buttType == 1)
    {
         accuracy = rand() % ((5 - 2) + 2) / 10.0;

         fireRate = fireRate - 0.3;
    }
    if(buttType == 2)
    {
        accuracy = rand() % ((8 + 5) + 5)/ 10.0;

        fireRate = fireRate - 0.2;
    }
    if(buttType == 3)
    {
        accuracy = rand() % ((11 + 8) + 8) / 10.0;

        fireRate = fireRate - 0.1;
    }

    return buttType;
}
int generateBarrel()
{
    srand(unsigned(time(NULL)));
    int barrelType = rand() % 3 + 1;

    if(barrelType == 1)
    {
        range = rand() % (16 - 5) + 5;

        power = power + 3;
    }
    if(barrelType == 2)
    {
        range = rand() % (21 - 16) + 16;

        power = power + 1;
    }
    if(barrelType == 3)
    {
        range = rand() % (26 + 21) + 21;

        power = power - 1;
    }

    return barrelType;
}
int generateBullet()
{
    srand(unsigned(time(NULL)));
    int bulletType = rand() % 3 + 1;

    if(bulletType == 1)
    {
        power = rand() % (16 - 10) + 10;

        range = range + 5;
    }
    if(bulletType == 2)
    {
        power = rand() % (26 - 16) + 16;

        range = range + 1;
    }
    if(bulletType == 3)
    {
        power = rand() % (35 - 26) + 26;

        range = range - 2;
    }

    return bulletType;
}
int generateAction()
{
    srand(unsigned(time(NULL)));
    int actionType = rand() % 2 + 1;

    if(actionType == 1)
    {
        fireRate = 1.5;

        accuracy = accuracy + 0.2;
    }
    if(actionType == 2)
    {
        fireRate = 2.0;

        accuracy = accuracy - 0.1;
    }

    return actionType;
}

void createChromo(int a, int b, int c, int d)
{
    cout <<a<<b<<c<<d<<"\n";
}

int main()
{
        for(int i = 0; i < popSize; i++)
        createChromo(generateButt(), generateBarrel(), generateBullet(), generateAction());
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T02:44:49.347

每次`srand`调用任一函数时都会调用。什么`srand`是为生成器播种新的随机数字符串。您从当前秒开始该种子，因此如果在同一秒内调用它，则种子将与上次相同，因此从中获得的随机数序列也是如此`rand()`。

在您的程序开始时调用`srand(time(NULL));`一次以获得一个序列，并继续使用该序列中的下一个数字，而不是重新开始相同的序列。

如果您有权访问 C++11，您也可以考虑使用`<random>`标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T02:43:59.977

1.  整个计算世界都不存在*随机*的概念
2.  该函数`srand()`用于为该`rand()`函数设置种子
3.  如果您设置 2 个不同的种子，您的伪随机数生成器将以 2 种不同的方式运行

# python - 机器学习用 Python 玩跳棋？

> ID：12593834
> 
> 赞同：5
> 
> 时间：2012-09-26T02:39:58.387
> 
> 标签：python, machine-learning, game-theory

我是机器学习初学者。我想通过教电脑玩跳棋来学习基础知识。其实我想学的游戏是[霸气](http://en.wikipedia.org/wiki/Domineering)和[妖术](http://en.wikipedia.org/wiki/Hex_%28board_game%29)。我选择的语言是 Python

这些游戏很容易存储，规则也比国际象棋简单得多，但玩的人并不多。如果我能把这个想法付诸实践，那将非常适合尝试[组合博弈论](http://www.math.ucla.edu/~tom/Game_Theory/comb.pdf)，看看是否有一台计算机并找到最佳移动。

我在 IBM 的一个人发现了[1960 年代](http://researcher.watson.ibm.com/researcher/files/us-beygel/samuel-checkers.pdf)关于跳棋的这篇旧论文。最初我曾询问过[神经网络](https://stackoverflow.com/questions/12592857/how-to-build-game-playing-neural-network-in-python)，但他们说这是错误的工具。

**编辑**：机器学习可能不是正确的策略。在这种情况下，出了什么问题？什么是更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:15:31.887

You might want to take a look at the following: Chinook, Upper Confidence Trees, Reinforcement Learning, and Alpha-Beta pruning. I personally like to combine Alpha-Beta Pruning and Upper Confidence Trees (UCT) for perfect information games where each player has less than 10 reasonable moves. You can use Temporal Difference Learning to create a position evaluation function. Game AI is probably the most fun way to learn machine learning.

For links to all of these topics, click on

[http://artent.net/blog/2012/09/26/checkers-and-machine-learning/](http://artent.net/blog/2012/09/26/checkers-and-machine-learning/)

(I was not able to include more links because the stack overflow software considers me a newbie!)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T02:42:39.533

获取 McGraw Hill 的《机器学习》一书并阅读第一章。它写得非常好，第一章将教你制作一个跳棋程序。就我个人而言，我在 miniclip.com 上制作了一个连续播放 5 个的程序，也在 python 中。

[http://www.amazon.com/Learning-McGraw-Hill-International-Editions-Computer/dp/0071154671](https://rads.stackoverflow.com/amzn/click/com/0071154671)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T03:12:01.287

在下跳棋时，您试图通过拿走对手的棋子并为自己的棋子加冕来获得优势。失去你的棋子并让你的对手加冕他或她的棋子是不可取的，所以你避免这样做。

棋盘游戏引擎通常围绕位置评估功能展开。对于跳棋，我的第一个猜测是这样的：

```
score =       number of allies         -     number of opponents
        + 3 * number of crowned allies - 3 * number of crowned opponents 
```

给定一个棋盘，此函数将返回棋盘的分数。分数越高，你的位置就越好。分数越低，你的位置越差。

要制作一个幼稚的跳棋“引擎”，您需要做的就是在给定棋盘位置的情况下找到最佳移动，这只是搜索所有立即合法的移动并找到最大化您的分数的移动。

你的引擎不会提前考虑超过一步，但它会在某种程度上与你对抗。

下一步将使您的引擎能够提前计划，这实质上是预测对手的反应。要做到这一点，只需找到对手的最佳动作（这里是递归）并将其从您的分数中减去。

# iphone - iphone中routeme上的地形类型地图？

> ID：12593835
> 
> 赞同：1
> 
> 时间：2012-09-26T02:40:09.213
> 
> 标签：iphone, ios, google-maps, openstreetmap, topography

[在 route-me 示例应用程序 ( https://github.com/route-me/route-me](https://github.com/route-me/route-me) )的帮助下，我已将离线地图集成到我的项目中。但是我的客户希望将地形类型的地图显示为开放的街道地图。我在互联网上搜索过，找不到任何有用的资源。

*   你知道我应该遵循什么资源来实现这个功能吗？

*   我是否必须使用另一种实施开放街道地图的方式才能获得地形类型的地图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:20:35.170

您也许应该看看[mapbox.com](http://www.mapbox.com)和他们的地图工具 (TileMill)，它们允许您添加和自定义您自己的图层。

至于创建图层所需的地形数据，您应该可以在[http://www.naturalearthdata.com/](http://www.naturalearthdata.com/)等网站上找到一些。

# ruby-on-rails-3.2 - Rails Admin 的强参数

> ID：12593836
> 
> 赞同：1
> 
> 时间：2012-09-26T02:40:09.733
> 
> 标签：ruby-on-rails-3.2, rails-admin, strong-parameters

我已经构建了一个使用[strong_parameters](https://github.com/rails/strong_parameters)的 Rails 3.2 应用程序，它工作得很好。我是在每个模型的基础上这样做的，如下所示：

```
class Account < ActiveRecord::Base
    include ActiveModel::ForbiddenAttributesProtection
    # Other model code
end 
```

我的控制器有适当的代码来允许参数哈希键等。

现在，我想添加[rails_admin](https://github.com/sferik/rails_admin)来管理模型，但是因为 rails_admin 控制器不是为使用强参数而设计的，所以我得到了一个`ActiveModel::ForbiddenAttributes`异常，正如我所料。

所以我的问题是：他们有什么办法解决这个问题，还是我应该分叉 rails_admin 并自己添加它？如果有一些我不知道的简单解决方案，我只想避免额外的工作。

谢谢！

# sql - 如何处理在 Oracle 中创建 SQL 视图的异常？

> ID：12593838
> 
> 赞同：0
> 
> 时间：2012-09-26T02:40:15.093
> 
> 标签：sql, oracle, view

当我运行以下 SQL 在 3000 条记录的数据库中创建视图时，它可以工作，但是当我在更大的数据库中运行 9000 条记录时，ORA 01256 和其他提到临时空间和内存不足的异常在执行后生成需很长时间。

如果我只是从 select 开始运行 SQL 查询，它可以工作..实际发生了什么？

```
 CREATE OR REPLACE FORCE VIEW "PM"."LOCATION_TEST" ("GROUPA_TYPE",               
   "GROUPA_FOLDER_ID", "GROUPA_FOLDER_NAME", "GROUPB_TYPE", "GROUPB_FOLDER_ID",  
   "GROUPB_FOLDER_NAME", "GROUPC_TYPE", "GROUPC_FOLDER_ID", "GROUPC_FOLDER_NAME", 
   "GROUPD_TYPE", "GROUPD_FOLDER_ID", "GROUPD_FOLDER_NAME", "GROUPE_TYPE", 
    "GROUPE_FOLDER_ID", "GROUPE_FOLDER_NAME") AS 
      select distinct "GROUPA_TYPE","GROUPA_FOLDER_ID","GROUPA_FOLDER_NAME",
    "GROUPB_TYPE","GROUPB_FOLDER_ID","GROUPB_FOLDER_NAME","GROUPC_TYPE",
    "GROUPC_FOLDER_ID","GROUPC_FOLDER_NAME","GROUPD_TYPE","GROUPD_FOLDER_ID",
    "GROUPD_FOLDER_NAME","GROUPE_TYPE","GROUPE_FOLDER_ID","GROUPE_FOLDER_NAME"
      from
       (
      select  parent_4.*,   product.ftype as groupe_type , customer_folder.customer_folder_id    
     as groupe_folder_id  , customer_folder.folder_name  as groupe_folder_name
      from 
     customer_folder
     left join  product
    on customer_folder.customer_folder_ID  = product.folder_id
       right join 
     (
     select parent_3.*,  product.ftype as groupd_type ,  customer_folder.customer_folder_id as       
   groupd_folder_id  , customer_folder.folder_name  as groupd_folder_name
   from 
    customer_folder
    left join  product
    on customer_folder.customer_folder_ID  = product.folder_id
   right join 
    (
    select parent_2.*,  product.ftype as groupc_type ,  customer_folder.customer_folder_id as         groupc_folder_id  , customer_folder.folder_name  as groupc_folder_name
     from 
     customer_folder
    left join  product
     on customer_folder.customer_folder_ID  = product.folder_id
     right join 
      (
       select  parent_1.*,  product.ftype as groupb_type ,    
        customer_folder.customer_folder_id           
       as groupb_folder_id, customer_folder.folder_name as groupb_folder_name
         from 
              customer_folder
          left join  product
           on customer_folder.customer_folder_ID  = product.folder_id
               right join 
                  (
                select  product.ftype as groupa_type ,  customer_folder_id as   
                groupa_folder_id, folder_name as groupa_folder_name
                     from customer_folder
                left join  product
                  on customer_folder.customer_folder_ID  = product.folder_id
                  where parent_folder_id = 1

                    ) parent_1
                   on
               customer_folder.parent_folder_id = parent_1.groupa_folder_id  ) parent_2
                  on
                customer_folder.parent_folder_id = parent_2.groupb_folder_id ) parent_3
                   on
                   customer_folder.parent_folder_id = parent_3.groupc_folder_id  ) parent_4
                        on
                         customer_folder.parent_folder_id = parent_4.groupd_folder_id ); 
```

# plot - 在 Maple 中绘制余弦波样本

> ID：12593840
> 
> 赞同：0
> 
> 时间：2012-09-26T02:40:32.683
> 
> 标签：plot, maple

我遇到了枫树的问题。

我有一个余弦波，我想出了如何绘制它，但现在我必须从那个波中提取样本并将这些（作为点）绘制在原始余弦波的顶部。这是作业中的问题：

***“从上面的 Q1 中生成样本并绘制结果（在余弦波图上绘制点 - 为两者使用不同的颜色，它看起来像一个带有点的余弦波）”***

问题是，我的样本在不同的高度一直是直线

![在此处输入图像描述](../Images/d9b7cdc124df8c3b6d842316eca55c1d.png)

[http://i197.photobucket.com/albums/aa221/Haseo_Ame/Maple.png](http://i197.photobucket.com/albums/aa221/Haseo_Ame/Maple.png)

我不确定我做错了什么，因为我以前从未使用过枫木。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:41:00.897

`seq`首先，如果您可以使用命令代替（这可能会导致 O(n) 资源成本），请尽量不要使用重复连接来构建列表（这可能会导致 O(n^2) 的资源成本）。`s:=[op(s),...]`在循环编码时，您应该始终重新考虑。

接下来，点图需要成对的 xy 值。您的列表只是标量值的集合，因此被解释为要绘制的常量函数的集合。

xy 值对可以在（2 元素）列表的列表中，例如`[[x1,y1],...,[xn,yn]`

目前尚不清楚您希望如何缩放 x 轴，但您可以从这样的东西开始，

```
s:=[seq([i, 4*cos(2*Pi*i*70/200+Pi/4)],i=0..20)]:

plot(s, style=point); 
```

![在此处输入图像描述](../Images/aa9c69b34d284ead4594d2b9fde07459.png)

```
#  s:=[seq([2*Pi*i*70/200+Pi/4, 4*cos(2*Pi*i*70/200+Pi/4)],i=0..20)]: 
```

附言。请将源代码作为文本发布，而不是作为嵌入图像发布，这样任何试图帮助的人都不需要全部输入。

# php - 基本 MYSQL/PHP 事件注册（数据库关系）

> ID：12593841
> 
> 赞同：0
> 
> 时间：2012-09-26T02:40:35.700
> 
> 标签：php, mysql, relational-database, registration, database-schema

我对数据库关系相对较新，我希望获得一些关于设置我的数据库以进行基本会话注册的建议。

目标：发布人们可以注册的新会话。每节最多8人。管理员端可以看到那些已经注册的人。

这是我目前从前端获得的内容（底部的注册框在我使用它时只是暂时存在）： ![前端](../Images/991cc445f98e7c586f884fedfed54435.png)

我让后端在 POST 上创建一个新的培训课程：

```
<?php 

session_start();
include ('global/db/connection.php');
$session_name = $_POST['session_name'];
$session_description = $_POST['session_description'];
$session_date = $_POST['session_date'];

$result=MYSQL_QUERY("INSERT INTO trainingsessions (id,session_name,session_description,session_date,session_open_slots,session_booked_slots)".
   "VALUES ('NULL', '$session_name', '$session_description', '$session_date', '8', '0')");

header("location: admin.php"); 
```

?>

我还能够查询该表并在上表中显示结果。我想弄清楚的是我需要在用户之间创建什么样的关系和表格，然后显示适当数量的仍然打开的插槽。

非常基本，目前没有什么花哨的。只是试图通过其他搜索而不是运气来获得一些基本面。希望这是有道理的，并感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:48:26.223

您将在用户和会话之间建立多对多关系（大概）。本质上，每个用户可以分配到多个会话，每个会话将有多个用户。因此，您需要一个创建复合键（主键由多个字段定义）的相交表。例如，我会制作以下表格：

```
Table: user
Columns: ID (primary key), Username, email

Table: sessions
 columns: ID (primary Key), Name, Description, Date

Table: user_sessions
columns: user_id, session_id 
```

使用这种结构，用户可以有多个会话，会话可以有多个用户。

# mysql - 防止通过 Web 界面的 MySQL SELECT 结果解释数据中的 html 标签

> ID：12593844
> 
> 赞同：0
> 
> 时间：2012-09-26T02:41:05.670
> 
> 标签：mysql

我只有一个网页界面来发出 SQL 命令来查询数据库。（一个用于输入 SQL 的简单文本框和一个“提交”按钮）

我想转储包含产品数据的表，其中包括名称、价格、描述等，并且描述字段包含 HTML 标记。

问题是 HTML 在结果中被 Web 浏览器解释，因为结果出现在标准网页中的表格中。如何如实转储数据？

我能想到的一种方法是：

```
SELECT name,price, HEX(description) FROM products 
```

但是有没有更简单的方法？我想将转储的数据保留在 Excel 中以进行备份。Excel 中没有 UNHEX() 来解码十六进制字符串。

还是有更好的方法？

# c++ - Simple C++ Syntax Correction

> ID：12593850
> 
> 赞同：0
> 
> 时间：2012-09-26T02:42:33.447
> 
> 标签：c++

Anything wrong with the following C++ code?

```
int i;
int n;
cout << "a";
cin >> n;
int player[i];
for(i = 0; i <= 3; i++)
{
     player[i] = n;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:24:19.367

To get the same functionality, I would do:

```
#define PLAYER_SIZE 4
//Or you can go:
//const int PLAYER_SIZE = 4;
int n = 0; //Don't *need* to = 0 in this case, but good practice.
cout << "a";
cin >> n;
int player[ PLAYER_SIZE ];
for( int i = 0; i < PLAYER_SIZE; ++i )
{
     player[i] = n;
} 
```

Since i<=3 is hard coded in this case, there's no need to go any higher then 4.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:50:29.703

```
you can't declare index of array as variable 
```

declare some size, like

```
int player[10]; 
```

or use preprocessor directives

```
#define i 10
int player[i]; 
```

totally

```
#define i 10
int main()
{
int j;
int n;
cout<<"a";
cin>>n;
int player[i];
for(j=0;j<=3;j++)
{player[j]=n;}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T03:43:55.357

Initialize i to something and declare it const then using it to delcare the size of a static array is ok.

If you want the size to be determined at run time you will need to use the new operator and deal with heap memory and pointers.

```
const int i = 4; // whatever size
int player[i];

int n;
cin >> n;
cin.ignore(); // important if you plan on using cin again, also think about adding some input checking

for (int x = 0; x < i; ++x ) // for god sakes use ++x
     player[x] = n;
// take note your setting every int in player to the same value of n 
```

Just to clean it up a little

```
const int arraySize = 4;
int playerArray[arraySize];

int input = 0;
for ( int i = 0; i < arraySize; ++i )
    {
    cin >> input;
    cin.ignore(); // still no error checking
    playerArray[i] = input;
    } 
```

This code allows for different ints to be inputted for each int in the array.

# android - Android 自动回复应用程序

> ID：12593855
> 
> 赞同：2
> 
> 时间：2012-09-26T02:42:59.887
> 
> 标签：android, sms

我正在创建一个 android 应用程序，如果用户忙，它将自动回复从其他人收到的短信。用户将有两个选项来选择他的状态-可用或忙碌。因此，一旦用户将他的状态设置为忙碌，所有收到的短信都会收到自动回复（通过短信），告诉他们“我不能回复，我很忙”。我被困在一种情况下。我还必须确保在向该号码发送自动回复后，如果我再次收到来自同一号码的短信，如果从该号码收到的两条短信之间的时间间隔小于 10 分钟，并且如果时间间隔超过 10 分钟，它应该发送一个自动回复。我不知道该怎么做。有人可以向我解释有关如何编码以及使用什么来执行此操作的逻辑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:09:15.727

I just updated Royston Pinto's answer to some level::

*   Have a Listener to scan incoming SMS's (lots of code available on stackoverflow)
*   Get the number from the SMS, check if its a valid number (SMSs do come from network providers, no point replying to them)
*   Keep a entry of incoming message's phonenumbers and time into a **HashMap**
*   Compare the incoming SMS number with your HashMap, if found and less than 10 min no action, else add to HashMap and send a message.
*   Update HashMap by checking periodically the time entry. If time past that entry is more than 10 minutes than delete that entry from HashMap(U can make a function for this and it call it from Handler every minute or so)

See 3rd n 5th point..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:09:35.640

不贴任何代码，可以采取这种方式

*   有一个监听器来扫描传入的短信（stackoverflow 上有很多代码）
*   从 SMS 中获取号码，检查其是否为有效号码（SMS 确实来自网络提供商，没有必要回复它们）
*   保留每天的电话号码数据库，不断向其中添加数字（同时添加一个时间字段）
*   将传入的 SMS 号码与您的数据库进行比较，如果找到并且不到 10 分钟没有操作，则添加到数据库并发送消息。（不断更新数据库中收到的数字的时间）

希望你有一些想法..

# php - 如何将位置过滤器添加到 php/mysql Web 应用程序

> ID：12593856
> 
> 赞同：1
> 
> 时间：2012-09-26T02:43:01.923
> 
> 标签：php, javascript, mysql, xml, json

我正在构建一个 Web 应用程序，企业可以在其中登录并发布有关该业务的信息。当“用户”访问 Web 应用程序时，我希望能够获取用户的地址并将其存储在 mysql 数据库中。当该用户访问 Web 应用程序主页时，我希望能够检索并列出存储在我的数据库中 30 英里半径内的所有企业。我还想为用户提供将企业列表细化到他们可以使用 jquery 滑块指定的距离的选项。换句话说，如果他们想查看 10 英里半径内的所有商家，他们可以将滑块滑动到 10 英里，商家将异步更新。我已经在网上搜索并没有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:48:56.873

雅虎和谷歌搜索引擎都提供了这个选项。只需要探索。当我体验雅虎管道时，我也进行了同样的探索。它是一项技术，您肯定可以环顾四周并探索他们如何搜索数据的解决方案。你可以使用相同的。

谷歌地图也可以选择提供此类数据。不幸的是，我没有太多使用它，所以不能分享你现有的代码左右。但肯定见过这种方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T02:52:55.470

除了这些好的建议，如果你想自己动手，请查看：

[https://www.dougv.com/2009/03/27/getting-all-zip-codes-in-a-given-radius-from-a-known-point-zip-code-via-php-and- mysql/](https://www.dougv.com/2009/03/27/getting-all-zip-codes-in-a-given-radius-from-a-known-point-zip-code-via-php-and-mysql/)

# mysql - 如何将三元（三元）ER图转换为二进制？

> ID：12593857
> 
> 赞同：2
> 
> 时间：2012-09-26T02:43:05.283
> 
> 标签：mysql, sql, database, entity-relationship

该图是递归的，具有三个“路线”，从一个实体集“Person”到关系类型“Parent's”（因此关系类型有三行）。

我们得到的问题是把这个三元关系分解成二元关系，假设是三个。

我正在考虑将“人”作为一个实体集，并让孩子成为另一个实体集父母的关系类型，每个父母都有一个属性。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:02:13.083

因此，如果我理解正确，每个 Person 都有对 Parent 表的三个外键引用，并且您希望对其进行规范化。

我的方法是将这种关系抽象为一个交叉引用实体 PersonParent。PersonParent 将具有三个字段：Person 的 ID、Parent 的 ID 和此 Parent 对 Person 的父“类型”（这最后一点信息隐含在旧模式中三个引用中的每一个的字段中）。一个 Parent 可以对很多人来说是这样，但是一个 Person 只能有 0 到一个有限的 N（可能是 3 个）Parent，方法是指定 PersonID 和 ParentType 的组合为唯一，并指定有效 ParentType 的最大数量。ParentType 可以是对包含这些类型的实体的引用，或者可以将有效值内置为检查约束（我强烈推荐前者）。

# .htaccess - URL 重写子域

> ID：12593860
> 
> 赞同：1
> 
> 时间：2012-09-26T02:43:39.777
> 
> 标签：.htaccess, mod-rewrite, rewrite, subdomain

这是我的问题：

我想从一个子域重定向用户，同时提供前一个子域的文件。例如，我希望用户访问他们的帐户：

*   文件位于：`holonet.example.com/account/`
*   我希望用户的网址指向（显示）：`account.example.com/`

另一个例子：

*   文件是：`holonet.example.com/account/user/reset`
*   URL点（显示）：`account.example.com/user/reset`

* * *

我一直在尝试几种 .htaccess 方法，但它们没有奏效。这是我最近的尝试：（publc_html 中的.htaccess）：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(holonet\.)?thearmyoflight\.com$ [NC]
RewriteRule ^(.*)$ /account/$1 [L] 
```

然后我尝试了以下方法，因为以前的方法不起作用 -

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/holonet/account/
RewriteCond %{HTTP_HOST} !^www\.  [NC]
RewriteCond %{HTTP_HOST} ^([^\.]+)\.thearmyoflight\.com$  [NC]
RewriteRule ^(.*)$ /holonet/account/%1/$1  [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T02:59:29.757

我想你想要这样的东西：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^account\.thearmyoflight\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/account/
RewriteRule ^(.*)$ /account/$1 [L] 
```

这是假设两个域都指向同一个文档根。如果没有，您将不得不依赖 mod_proxy：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^account\.thearmyoflight\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/account/
RewriteRule ^(.*)$ http://holonet.thearmyoflight.com/account/$1 [L,P] 
```

# javascript - 提交表单，关闭弹窗并刷新父页面

> ID：12593863
> 
> 赞同：1
> 
> 时间：2012-09-26T02:43:59.917
> 
> 标签：javascript, php, html

## popup1.php

```
<script>
function pepz(pageURL, title,w,h) {
var left = (screen.width/2)-(w/2);
var top = (screen.height/2)-(h/2);
var targetWin = window.open (pageURL, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);
} 
</script>

<a href="" onclick="pepz('<?php echo"popup2.php"; ?>', 'myPop1',465,410)"><?php print"Click"; ?></a></td> 
```

## popup2.php

```
<form action='#' method='post'>
<input type='submit'>
<form> 
```

* * *

在弹出窗口中单击表单中的提交按钮后，我需要关闭弹出窗口并刷新调用弹出窗口的父页面。

我究竟做错了什么？谢谢 :D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:59:09.227

简单的方法是将以下属性添加到您的提交按钮：

```
onClick="window.parent.location.reload();window.close()" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T20:04:04.850

从您的父页面调用您的弹出窗口：

```
window.open("foo.html","windowName", "width=400,height=400,scrollbars=no"); 
```

使用函数提交表单。控制窗口关闭事件并使其刷新父页面。

```
<form action='#' method='post' name='my_form'>
<input type="button" value="Upload"  onclick="closeSelf();"/>
</form>
<script>
  window.onunload = refreshParent;
  function refreshParent() {
    window.opener.location.reload();
  }
  function closeSelf(){
    document.forms['my_form'].submit();
    window.close();   
  }
</script> 
```

# facebook - facebook如何存储表单数据？

> ID：12593865
> 
> 赞同：1
> 
> 时间：2012-09-26T02:44:11.787
> 
> 标签：facebook, user-interface, facebook-like, facebook-javascript-sdk

我想知道当有人喜欢帖子或评论时，facebook 如何发送反馈数据。帖子的 id 存储在哪里？在 Hiddenfield 还是其他地方？我想要类似的功能，所以想知道其他人是如何做到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T02:50:10.090

它不是 HTML 表单，而是 Javascript/AJAX。当您单击该链接时，它会触发一个 Javascript 事件（可能是 onclick），然后该事件会对服务器进行 Ajax 调用以实际传输信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:57:53.437

这是 DOM 中的 Like 按钮的样子（根据您在站点中的位置、您喜欢的事物类型等而变化。

```
<a data-ft="{&quot;tn&quot;:&quot;&gt;&quot;}" title="Like this comment" id=".reactRoot[25].[1][2][1]{commentXXXXXXXXX}..[1]..[1]..[1].[1][1]">Like</a> 
```

`.reactRoot`该表单是从与类选择器关联的 Javascript 事件发布的。

这是当我在自己的墙上点赞评论时表单 POST 的样子。

```
for(;;);{
    "__ar": 1,
    "payload": {
        "feedbacktargets": [

        ],
        "comments": [

        ],
        "profiles": [

        ],
        "actions": [
            {
                "entidentifier": "445320668840576",
                "likesentences": {
                    "current": {
                        "text": "You like this.",
                        "ranges": [

                        ],
                        "aggregatedranges": [

                        ]
                    },
                    "alternate": {

                    }
                },
                "hasviewerliked": true,
                "likecount": 1,
                "actorid": 100000879403997,
                "clientid": "1348628151510:2909923504",
                "actiontype": "fa-type:like"
            }
        ],
        "commentlists": [

        ],
        "servertime": 1348628145
    },
    "jsmods": {
        "require": [
            [
                "Arbiter",
                "inform",
                [

                ],
                [
                    "UFI\/LikeActive",
                    445320668840576
                ]
            ]
        ]
    }
} 
```

# c++ - 初始化整数成员变量会导致更改另一个成员变量的地址

> ID：12593874
> 
> 赞同：-4
> 
> 时间：2012-09-26T02:45:46.537
> 
> 标签：c++, pointers, gdb, segmentation-fault

这对我来说似乎是一个相当奇怪的错误。我的 C++ 程序出现了段错误，使用 GDB 时我发现了一些奇怪的东西。我有以下构造函数和复制构造函数：

```
Bank::Bank(char mode, int floor_dimensions_, int num_floors_) : floor_dimensions(floor_dimensions_), num_floors(num_floors_) {
    for (int i = 0; i < num_floors; i++) {
        floors[i] = new Floor(floor_dimensions);
    }

    if (mode == 'M') {
        read_map(floors);
    } else if (mode == 'C') {
        read_coords(floors);
    }
}

Bank::Bank(const Bank& b) {
    floor_dimensions = b.floor_dimensions;
    num_floors = b.num_floors;

    cout << floor_dimensions << endl;
    cout << num_floors << endl;

    for (int i = 0; i < num_floors; i++) {
        floors[i] = new Floor(*b.floors[i]);
        floors[i]->print_map();
} 
```

这个类的定义类似于

```
class Bank {
    /** The number of floors the bank has */
    int num_floors;

    /** The dimension of each of the floors */
    int floor_dimensions;

    /** The floors in the bank */
    Floor* floors[];

private:
    Bank(char mode, int floor_dimensions_, int num_floors_);
    Bank(const Bank& bank);
    ~Bank();
    void read_map(Floor** floor);
void read_coords(Floor** floor);
} 
```

现在我使用 GDB 在构造函数的第一行设置断点。在执行了接下来的两行之后，b.floors[1] 的值发生了变化，这导致我调用`b.floors[i]->foo()`.

```
 Breakpoint 1, Bank::Bank (this=0x7fffffffe050, b=...) at bank.cpp:29
29      floor_dimensions = b.floor_dimensions;
(gdb) p b.floors[0]
$4 = (Floor *) 0x610070
(gdb) p b.floors[1]
$5 = (Floor *) 0x6103f0
(gdb) p b.floors[2]
$6 = (Floor *) 0x610770
(gdb) n
30      num_floors = b.num_floors;
(gdb) p b.floors[0]
$7 = (Floor *) 0x610070
(gdb) p b.floors[1]
$8 = (Floor *) 0x8006103f0
(gdb) p b.floors[2]
$9 = (Floor *) 0x610770
(gdb) n
32      cout << floor_dimensions << endl;
(gdb) p b.floors[0]
$10 = (Floor *) 0x610070
(gdb) p b.floors[1]
$11 = (Floor *) 0x800000003
(gdb) p b.floors[2]
$12 = (Floor *) 0x610770 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:07:48.527

您的代码的问题很可能是您试图访问未初始化的指针 ( `b.floors`)。假设`b`是这个复制构造函数的结果，那么`b.floors`将指向随机内存。`b.floors[i]`然后将指向随机内存一些字节`b.floors`指向的内容，最终您使用`->`取消引用此随机地址，这会导致分段错误。

您的问题的解决方案是正确分配和复制楼层数组：

```
floors = new Floor* [num_floors];
for (int i=0; i<num_floors; ++i)
  floors[i] = b.floors[i]; 
```

您可能还想复制指向的 object `Floor`，具体取决于您的实现细节。

# wordpress - 您可以在从中提取的博客上显示带有 SimplePie 的 RSS 提要吗？

> ID：12593886
> 
> 赞同：0
> 
> 时间：2012-09-26T02:47:01.053
> 
> 标签：wordpress, rss, simplepie

我想获取我的 Wordpress 网站使用 Simplepie 创建（我们称之为`site1.com/feed`）的 RSS 提要，并且我想在同一个 Wordpress 网站的主页上显示该提要（`site1.com`）。但我根本无法显示提要。

我已提取提要并将其放在另一个网站 ( `site2.com`) 上，这很有效。但是，当我尝试在`site1.com/feed`从 ( ) 生成的站点上显示 WP 提要 ( ) 时`site1.com`，我什么也得不到。

对不起，如果解释有点复杂。很难以简洁的方式表达出来。但无论如何，这是 Simplepie 本身的问题吗？您可以不在生成它的网站上显示提要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:57:37.157

为什么使用简单派？只需使用标准 Worpdress 代码在您的站点内输出您的提要。

# python - 如何将会话变量设置为数据库中的值？

> ID：12593895
> 
> 赞同：0
> 
> 时间：2012-09-26T02:48:31.403
> 
> 标签：python, pylons, pyramid

新手到 python 和金字塔/塔。用户登录后，我想在我的数据库中获取一些数据并将其存储在会话变量中。我已经能够使用remember() 存储用户的登录ID。使用 request.session，我可以设置一个会话变量，只要它是一个字符串，但是如果我尝试从我的数据库中检索某些内容，我会收到一个错误：“BadPickleGet: �”。这是我观点的相关部分：

```
if 'form.submitted' in request.params:
        login = request.params['login']
        password = request.params['password']
        if User.check_password(login, password):
            headers = remember(request, login) # ie dave
            session = request.session
            #session['myvar'] = 'somethinghardcoded' # this works!
            session['myvar'] = User.myfield # this doesn't work!
            session.save()
            return HTTPFound(location=came_from, headers=headers) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T14:09:13.903

在您的示例中，您没有处理`User`从数据库加载的实例。这将类似于`user = DBSession.query(User).filter_by(login).first()`. `User.myfield`和之间有很大区别`user.myfield`，第一个只是`Column`对象或属性，第二个是数据库中特定行的实际数据。您的错误可能只是无法腌制`Column`对象。会话可以很好地腌制原始类型（整数、字符串等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:17:00.070

[金字塔会议](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/sessions.html#using-a-session-object)：

> 会话数据的键和值必须是可腌制的。这通常意味着它们是基本类型对象的实例，例如字符串、列表、字典、元组、整数等。如果将对象放在不可腌制的会话数据键或值中，则会出现错误会话序列化时引发。

这意味着：您的数据不能被腌制，您需要提供一种方法以可以腌制的格式返回它（我喜欢创建一个名为 的方法`todict()`）。

但似乎还有第二个问题：

> [...]在我的数据库中？

默认会话工厂（我假设您正在使用）不会将您的数据存储在数据库中，而是存储在 cookie 中（未加密）。你可以看一下[pyramid_beaker](http://docs.pylonsproject.org/projects/pyramid_beaker/en/latest/)，这对你来说可能是正确的。在这种情况下，您仍然需要可以腌制的数据（字典，列表，字符串，...）我假设，但是它在数据库中而不是在 cookie 中，因此您可以在其中存储机密信息（不要这样做默认情况下！）并删除长度限制（cookie 为 4kB）。

# delphi - 我什么时候应该使用“尝试”块，我应该使用哪种？

> ID：12593907
> 
> 赞同：2
> 
> 时间：2012-09-26T02:50:38.963
> 
> 标签：delphi, exception-handling, try-finally, try-except

关于 Delphi 中异常处理的两个非常基本的问题。

1) 什么时候`Try`？我的猜测是我不需要一个`Try`子句

*   简单的代码，例如赋值、条件和循环
*   访问我的 VCL 组件

但我确实需要`Try`

*   数据库访问
*   任何第三方组件，因为我不知道它们是否会引发异常
*   帮助系统显示的任何内容都可能引发异常

我错过了什么吗？

2）尝试...最后还是尝试...除了...或两者兼而有之？多年来，我一直认为这是一个非此即彼的选择，直到@RRUZ用一些代码 回答[了我的一个问题](https://stackoverflow.com/questions/12574843/how-to-set-my-ip-address-programmatically/12575095#12575095)

```
 try
    CoInitialize(nil);
    try
      SetStaticIpAddress('Network card name','192.168.1.1','255.255.255.0');
    finally
      CoUninitialize;
    end;
 except
    on E:EOleException do
        Writeln(Format('EOleException %s %x', [E.Message,E.ErrorCode]));
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
 end; 
```

问题：是不是只捕获来自`CoInitialize(nil);`或也来自的异常`SetStaticIpAddress('Network card name','192.168.1.1','255.255.255.0');`？

换句话说，是否有可能在一次尝试中最终获得我的蛋糕并吃掉它？

* * *

[更新] #2 的答案似乎是肯定的。此代码显示两个对话框...

```
procedure TForm3.FormCreate(Sender: TObject);
  var x, zero : Integer;
begin
   zero := 0;
   try
      try
        x := 42 div zero;
      finally
         MessageDlg('Divide by zero finally', mtInformation, [mbOK], 0);
      end;

   Except
     on E: Exception do
     MessageDlg('Divide by zero exception handled', mtInformation, [mbOK], 0);
   end;
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T03:19:12.077

虽然它们都与异常处理有关，但它们是不同的野兽。

尝试...最后是资源清理。当您分配在例程结束时被清理的资源时，应该始终使用它。（在这里广义地解释“资源”——你也需要它来处理锁等。）

Try...Except 用于捕获异常。仅当您有合理的处理方式可能发生异常时才使用它。除了作为顶级错误记录工具的一部分之外，您几乎不应该简单地获取所有异常。（我不会说你永远不应该全部捕获——例如，你正在读取一个配置文件，这很糟糕。你唯一真正的选择是中止程序或尖叫，使用默认值并继续。一般用户可能更喜欢后者。）

它们可以嵌套到任何深度（当您分配多个资源时，您要么必须嵌套它们，要么必须有某种方法在放手之前确定是否获得了资源）并自由共存。

# vb.net - 使用 Outlook 消息 VB/VBA 中的数据填写 Web 表单

> ID：12593914
> 
> 赞同：-1
> 
> 时间：2012-09-26T02:51:13.773
> 
> 标签：vb.net, forms, vba, web, outlook

我想为 Outlook 创建一个宏。

我需要提取选定的电子邮件主题、发件人行和正文，并使用该数据预先填充网站上的 3 个文本字段。

我已经可以通过 URL (website/form.php?name=xxx&subject=xxx&message=xxxx) 做到这一点

任何一个

1.  宏从选定的消息中提取 3 个字段并构建预填充的链接以将用户发送到。

2.  宏登录到所述站点并填写表格上的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:09:12.977

我找到了！

[http://developers.phpjunkyard.com/viewtopic.php?f=13&t=4241](http://developers.phpjunkyard.com/viewtopic.php?f=13&t=4241)

你会在那里找到我的代码。

```
Sub HelpdeskNewTicket()
Dim helpdeskaddress As String
Dim objMail As Outlook.MailItem
Dim strbody As String
Dim oldmsg As String
Dim senderaddress As String
Dim addresstype As Integer
Dim ie         As Object
Dim sResult    As String
Dim dtTimer    As Date
Dim lAddTime   As Long

Set objItem = GetCurrentItem()

' Sender E=mail Address
senderaddress = objItem.SenderEmailAddress

'Searches for @ in the email address to determine if it is an exchange user
addresstype = InStr(senderaddress, "@")

' If the address is an Exchange DN use the Senders Name
If addresstype = 0 Then
senderaddress = objItem.SenderName
End If

   Const sOVIDURL As String = "http://helpdesk.com/admin"
   Const lREADYSTATE_COMPLETE As Long = 4

      Set ie = CreateObject("InternetExplorer.Application")
      ie.Visible = True
      ie.navigate sOVIDURL

      dtTimer = Now
      lAddTime = TimeValue("00:00:20")

      Do Until ie.readystate = lREADYSTATE_COMPLETE And Not ie.busy
      DoEvents
      If dtTimer + lAddTime > Now Then Exit Do
      Loop

      ie.document.getElementById("user").Value = "yourusername"
      ie.document.getElementById("password").Value = "yourpassword"
      ie.document.forms(0).submit

      Do Until ie.readystate = lREADYSTATE_COMPLETE And Not ie.busy
      DoEvents
      If dtTimer + lAddTime > Now Then Exit Do
      Loop

      ie.navigate "http://helpdesk.com/admin/new_ticket.php"

      Do Until ie.readystate = lREADYSTATE_COMPLETE And Not ie.busy
      DoEvents
      If dtTimer + lAddTime > Now Then Exit Do
      Loop

               While ie.busy
            DoEvents
         Wend

      ie.document.getElementById("name").Value = objItem.SenderName
      ie.document.getElementById("subject").Value = objItem.Subject
      ie.document.getElementById("message").Value = objItem.Body
      dtTimer = Now
      lAddTime = TimeValue("00:00:20")
   Set ie = Nothing ' If you want to close it.

'Dim PageNumber As Object

Set objItem = Nothing
Set objMail = Nothing
End Sub

Function GetCurrentItem() As Object
Dim objApp As Outlook.Application
Set objApp = Application
On Error Resume Next
Select Case TypeName(objApp.ActiveWindow)
Case "Explorer"
Set GetCurrentItem = _
objApp.ActiveExplorer.Selection.Item(1)
Case "Inspector"
Set GetCurrentItem = _
objApp.ActiveInspector.currentItem
Case Else
End Select
End Function 
```

# oop - 抽象与抽象类

> ID：12593917
> 
> 赞同：13
> 
> 时间：2012-09-26T02:51:45.870
> 
> 标签：oop

根据 [http://www.cs.cornell.edu/courses/cs211/2006sp/Lectures/L08-abstraction/08_abstraction.html](http://www.cs.cornell.edu/courses/cs211/2006sp/Lectures/L08-abstraction/08_abstraction.html)

抽象有两种形式。一是函数抽象，二是数据抽象。但是抽象类在哪里适合呢？据我所知，抽象类是一个完全不同的概念，尽管名称暗示它与 OOP 原则有关。

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T03:00:28.977

这些是非常不同的概念。

抽象类似于黑盒的概念。输入进去，黑盒做点什么，输出出来。黑匣子里发生了什么并不重要，你只需要知道它是有效的。一个真实的例子是java的散列函数，用户只需要知道它对输入值进行散列，对于用户如何散列数字并不重要。黑匣子是抽象的。关键是您不必知道它是如何工作的，只要知道它就知道。

抽象类（至少在 Java 中）是接口和完整 OOP 类的混合体。接口定义了任何扩展类必须具有的方法，它在代码中约定它将正确实现接口并确保一切都按预期工作。抽象类具有这些空方法（协议），并且还具有可以调用的完全实现的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-08-13T10:39:07.410

Data abstraction is a different concept from an abstract class.

Data abstraction - It means **hiding the implementation** and showing only essential information. Practically, we can use **access-specifiers like public, private, protected**, etc to achieve abstraction. For eg, Private functions/variables cannot be used accessed outside the class. **Abstraction is simply 'hiding'.** You can refer geeksforgeeks for more details.

Abstract class - Abstract classes/methods are created so that it can be **implemented in its subclasses** because the abstract class does not know what to implement in the method but it knows that the method will exist in its subclass. So, while we creating subclass we need to **override the abstract method** to provide its implementation.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T02:56:15.043

对象通常将数据与功能结合起来，抽象类也不例外。在某些情况下，提供的抽象几乎是纯数据，其功能仅用于提供对数据的访问（例如，集合类）。其他情况几乎相反（例如，C++ 中函子提供的抽象通常几乎是一个函数）。

当然，这些几乎是极端的——许多（大多数？）类介于它们之间。

# javascript - 找出 recaptcha 何时加载

> ID：12593920
> 
> 赞同：5
> 
> 时间：2012-09-26T02:52:23.173
> 
> 标签：javascript, recaptcha

有没有办法找出 recaptcha 何时加载，以便我可以运行一些 javascript 代码？我想这样做是因为根据我的 Internet 连接，有时 HTML 元素会在 recaptcha 加载之前加载。我想把所有东西一起加载。

**编辑**

我很想知道 Recaptcha.create() 何时加载，而不是外部 JS 文件何时加载。

# java - 在hadoop中动态生成多个输出

> ID：12593926
> 
> 赞同：0
> 
> 时间：2012-09-26T02:53:11.110
> 
> 标签：java, hadoop, mapreduce

在我的 reduce 类中，我想使用多个输出制作许多文件。文件名应该从reduce类中生成的数据动态派生而来。例如。考虑到 for 循环，每个输出文件的名称都对应于 for 循环中 arraylist 的第 i 个值。

我能够在减少类中做到这一点。但是在作业配置中，我无法在 MultipleOutputs.getNamedOutput() 中设置相应的值。

我想从 reduce 类中的计算中动态生成多个输出文件名。有什么办法可以做到这一点？

为了更好地解释：

在减少类中，我有：

mos.getCollector（路径，报告者）.collect（键，值）；在这里，动态生成路径没有问题，即。文件名。

但在工作会议上，

MultipleOutputs.addNamedOutput(conf, path, TextOutputFormat.class, LongWritable.class, Text.class); 这就是问题所在。它必须对应于文件名，即在reduce类中动态生成的路径。

有没有办法做到这一点？或者有没有其他选择。

请帮忙！

谢谢！！！

# matlab - 如何将矩阵分配给变量？变量可以是矩阵变量吗？

> ID：12593928
> 
> 赞同：3
> 
> 时间：2012-09-26T02:53:17.200
> 
> 标签：matlab

我试图使用 for 循环将一些矩阵分配给一些变量。但我无法意识到。我可能知道我的错误在哪里，但我不知道是否有办法克服它

* * *

```
N = 10;

for i = 1:1:N

    P(i) = [x(i)^2   x(i)*y(i);  
        x(i)*y(i)   y(i)^2];
end 

K = blkdiag(P); 
```

* * *

我想为 P(i) 分配一个矩阵，然后使用这些 P(i) 创建一个块对角矩阵。但似乎我不能这样做。还有其他方法可以创建这样的块对角矩阵吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T02:56:25.690

您可以为此使用元胞数组：

```
for i = 1:10
    P{i} = [x(i)^2   x(i)*y(i);  
            x(i)*y(i)   y(i)^2];
end
K = blkdiag(P{:}); 
```

# rest - 杰克逊的 JsonNode 与 JAX-RS

> ID：12593933
> 
> 赞同：5
> 
> 时间：2012-09-26T02:53:44.573
> 
> 标签：rest, jax-rs, jackson

我正在编写一个将 JSON 返回给客户端的 JAX-RS Web 服务，并且我正在尝试使用这些`org.codehaus.jackson`库来处理 JSON 对象。我遇到的问题是我[`JsonNode`](http://jackson.codehaus.org/1.6.2/javadoc/org/codehaus/jackson/JsonNode.html)在返回给客户端之前没有得到正确的序列化。响应中有一堆无关的属性。我想要`JsonNode`返回的最简单的 JSON 表示。

这是一个（人为的）示例：

```
@GET
@Path("user")
@Produces(MediaType.APPLICATION_JSON)
public JsonNode getUser() {
    ObjectNode node = JsonNodeFactory.instance.objectNode();
    node.put("user", "jDoe");
    return node;
} 
```

对此的 JSON 响应非常难看：

```
{"object":true,"elements":[{"textual":true,"textValue":"jDoe","binaryValue":"jDoe","valueAsText":"jDoe","valueNode":true,"containerNode":false,"missingNode":false,"array":false,"object":false,"pojo":false,"number":false,"integralNumber":false,"floatingPointNumber":false,"int":false,"long":false,"double":false,"bigDecimal":false,"bigInteger":false,"boolean":false,"null":false,"binary":false,"booleanValue":false,"intValue":0,"longValue":0,"doubleValue":0.0,"decimalValue":0,"bigIntegerValue":0,"valueAsInt":0,"valueAsLong":0,"valueAsDouble":0.0,"valueAsBoolean":false,"elements":[],"fieldNames":[],"fields":[]}],"fieldNames":["user"],"fields":[{"key":"user","value":{"textual":true,"textValue":"jDoe","binaryValue":"jDoe","valueAsText":"jDoe","valueNode":true,"containerNode":false,"missingNode":false,"array":false,"object":false,"pojo":false,"number":false,"integralNumber":false,"floatingPointNumber":false,"int":false,"long":false,"double":false,"bigDecimal":false,"bigInteger":false,"boolean":false,"null":false,"binary":false,"booleanValue":false,"intValue":0,"longValue":0,"doubleValue":0.0,"decimalValue":0,"bigIntegerValue":0,"valueAsInt":0,"valueAsLong":0,"valueAsDouble":0.0,"valueAsBoolean":false,"elements":[],"fieldNames":[],"fields":[]}}],"containerNode":true,"valueNode":false,"missingNode":false,"array":false,"pojo":false,"number":false,"integralNumber":false,"floatingPointNumber":false,"int":false,"long":false,"double":false,"bigDecimal":false,"bigInteger":false,"textual":false,"boolean":false,"null":false,"binary":false,"booleanValue":false,"intValue":0,"longValue":0,"doubleValue":0.0,"decimalValue":0,"bigIntegerValue":0,"valueAsInt":0,"valueAsLong":0,"valueAsDouble":0.0,"valueAsBoolean":false} 
```

我希望它简单

```
{"user":"jDoe"} 
```

我错过了什么吗？我不明白为什么将简单的 JsonNode 序列化为 JSON 会出现问题。

对于它的价值，[`JSONObject`](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/topic/com.ibm.websphere.web2mobile.json.help/javadoc/com/ibm/json/java/JSONObject.html)从 JSON4J 库返回 a 按预期工作，但我更喜欢使用 Jackson 的库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T00:11:56.250

这应该按原样工作，所以我怀疑可能存在版本不兼容。由于 Jersey 使用 Jackson 1.x（1.8 或 1.9），因此您需要使用相同的版本；2.0 类位于不同的 Java 包中，以允许 1.x 和 2.x 共存（避免强制升级）。

因此，请确保您使用与 Jersey 相同的版本。

# java - 查找具有最大边的多边形

> ID：12593934
> 
> 赞同：1
> 
> 时间：2012-09-26T02:53:59.230
> 
> 标签：java, algorithm

基本上我的问题是这样的：给定一个表示正方形网格的宽度和高度的数字 n，我需要找到一个凸的 90 度旋转对称多边形的点，该多边形的最大边数适合网格，其中点只能在网格的格点上制作，并且边必须从一个点直连到另一个点。我对它的尝试导致 n = 100000 总共有 2516 个边，但是我被引导相信它应该有 7592。我使用的函数如下，问题描述本身在[这里](http://acm.uva.es/p/v110/11006.html)。

```
static Point[] getPoints(final int n) {
    // first, figure out the max number of sides
        int sides = 0; boolean jump = false;
        for(int inc = 2, max = 0; max < n; jump = !jump, sides += 4)
            max += (jump) ? ++inc : inc;
    // next, compute the point translations
        Point[] pts = new Point[sides];
        Point[] translations = new Point[sides];
        translations[0] = new Point(0,1); jump = true;
        // systematically generate translations used
        for(int i = 1, j = 1; i < sides/4; i++, jump = !jump)
            translations[i] = (jump) ? new Point(1, j++) : new Point(j, 1);
        // sort the first 4th into correct translation order
        Arrays.sort(translations, new Comparator<Point>() {
            public int compare(Point a, Point b) {
                if(a == null || b == null) return 0;
                return a.x < b.x ? -1 : a.x == b.x ? 
                a.y > b.y ? -1 : a.y == b.y ? 0 : 1 : 1;
            }
        });
        // use first 4th to generate the rest
        for(int i = translations.length/4; i < translations.length; i++)
            translations[i] = new Point(translations[i-(translations.length/4)].y,
                    -translations[i-(translations.length/4)].x);
    // finally, find first point and use translations to generate the rest
        int y = 0; jump = true;
        for(int i = 0, j = 1; i < sides; i += 4, jump = !jump)
            y += (jump) ? j++ : 1;
        pts[0] = new Point(0, y);
        for(int i = 1; i < pts.length; i++) {
            pts[i] = new Point(pts[i-1]);
            pts[i].translate(translations[i].x, translations[i].y);
        }
    // now reverse x's and y's
        for(int i = 0; i < pts.length; i++)
            pts[i] = new Point(pts[i].y, pts[i].x);
    // and then put last point in front
        Point first = pts[pts.length-1];
        for(int i = pts.length-1; i > 0; i--)
            pts[i] = pts[i-1];
        pts[0] = first;
    // and then adjust points to make the wheel symmetrical around the n-block
        int w = 0, h = 0;
        for(int i = 1; i < sides/4; i++) {
            h += translations[i].x;
            w += translations[i].y;
        }
        int adj = n - (w+h+1);
        for(int i = 1; i <= sides/4; i++) pts[i].translate(adj, 0);
        for(int i = (sides/4)+1; i <= sides/2; i++) pts[i].translate(adj, adj);
        for(int i = (sides/2)+1; i <= 3*(sides/4); i++) pts[i].translate(0, adj);
        return pts;
    } 
```

# cassandra - 如何使用非键列从 Cassandra 列族中删除行？

> ID：12593935
> 
> 赞同：3
> 
> 时间：2012-09-26T02:53:59.120
> 
> 标签：cassandra, cql

有没有办法使用 CQL/Pig/Hive 查询从 Cassandra CF 中删除多行而不在过滤条件中使用键？

像 DELETE FROM 这样的东西`[ColumnFamily] WHERE [NonKeyColumnName] = [Value]`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:32:34.370

你不能用 CQL 做到这一点，因为它至少需要行键的分区部分。

如果您使用的是 playOrm，您可以使用 Scalable-SQL 检索对象，而无需使用行键！！！！然后删除它们，但是CQL没有办法。

对于 Hive 和 Pig，这些通常使用 map/reduce，因此您应该能够做到，但您需要将它们发送到 map/reduce 作业并读取列族中的每一行。

后来，迪恩

# resolution - 确定屏幕是否为视网膜分辨率的公式是什么？

> ID：12593936
> 
> 赞同：1
> 
> 时间：2012-09-26T02:54:11.460
> 
> 标签：resolution, screen-resolution, dpi, ppi

如果 iPhone 和 iPad 都是 Retina 显示屏，其中 Retina 显示屏意味着分辨率足够锐利以至于人眼无法区分，那么有没有办法判断其他平板电脑是否具有 Retina 显示屏质量？有公式吗？

例如，要获得 3.5 英寸的视网膜质量，您需要正确的 326 PPI？给定宽度和高度和/或以英寸为单位的屏幕尺寸和 PPI，您如何确定它？

例如 Nexus 7 视网膜质量、三星 Galaxy SIII 视网膜质量、Playbook 视网膜质量等。

更多背景信息：我正在使用 iPad 3 工作，它的分辨率令人信服。我也喜欢 Android，想知道如何确定其他平板电脑（无论大小）是否可以匹配质量。我想知道任何给定尺寸的最小 DPI 以供个人使用和开发目的。

~~**更新**~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~
在阅读了评论中给出的帖子后，我意识到 PPI*本身*就是一个对其自身有用的常数值。距离确实进入了等式，但我不确定如何。

引用该[URL](http://www.tuaw.com/2012/03/01/retina-display-macs-ipads-and-hidpi-doing-the-math/#aolc=BHm3SQ)的评论者，

> ...我还使用一个公式来计算眼睛不再区分像素的距离。也许我有偏见，但我认为这个公式更实用。使用我使用的公式，像素密度 (ppi) 是唯一需要的信息。

我不擅长数学，但我认为论坛会是这样的：

以英寸为单位的距离 * 80 = 最低 dpi 质量

```
4*80=324dpi 
```

所以在 10 英寸远的地方，dpi 必须是：

```
10*80=800dpi 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T04:37:17.107

我将通过数学来揭开它的神秘面纱。

人类视力是根据特征之间的最小可分辨距离来衡量的。距离以*弧分*（1/60 度）为单位测量，作为与距离无关的敏锐度测量。

我们将“视网膜”定义为“每弧分至少 1 个像素”。一些消息来源声称人眼比这更好（一个消息来源说每弧分需要 3 个像素）；更糟一些。[此 TUAW 页面](http://www.tuaw.com/2012/03/01/retina-display-macs-ipads-and-hidpi-doing-the-math/)中使用的计算假设“视网膜”为每弧分 1 个像素。

然后，我们所要做的就是计算出获得这个分辨率需要多少像素，相当于每度视场需要 60 个像素。在*x*英寸的距离处，1 度是*x tan(1°)*，或大约 0.01746 *x*。因此，PPI 要求是 0.01746 *x*英寸或**3437/ *x* PPI**中的 60 个像素。

因此，在 12 英寸的距离处，我们需要 3437/12 = 286 PPI，而在 24 英寸的距离处，我们需要 143 PPI。请注意，所需的最低 PPI*随着*距离的增加而降低，这是我们所期望的（例如，即使 PPI 很差，远处的广告牌也有很好的分辨率）。

希望有帮助。请注意，如果您假设视力更高（例如每弧分*y*像素），那么您必须将生成的 PPI 最小值乘以*y*。

# java-me - 在 LWUIT 软按钮栏上显示时间

> ID：12593940
> 
> 赞同：1
> 
> 时间：2012-09-26T02:54:21.050
> 
> 标签：java-me, lwuit

我想在 LWUIT 的软按钮栏中间显示时间 (HH:MM)（例如在 Opera Mini 或 UC Browser 8.6 中）。我已经使用此代码来获取设备时间。

```
String  getDateString ( Date  date ) {
Calendar  calendar  = Calendar . getInstance ();
calendar . setTime ( date );
 int  hour  =  calendar . get ( Calendar . HOUR_OF_DAY );
 int  minute  =  calendar . get ( Calendar . MINUTE ); 
```

这是我所能做到的，因为我从未在 J2ME 中使用过时间。时间也需要像普通时钟一样更新，很可能通过线程进行。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:20:22.903

1) 以 HH:MM 格式计算时间

```
String time = String.valueOf(hour).concat(":").concat(String.valueOf(minute)); 
```

2）将thirdsoftbutton设置为true以添加中心软按钮

```
Display.getInstance().setThirdSoftButton(true); 
```

3）创建一个值为时间的命令并将其添加到表单中

```
frmObj.addCommand(new Command(time)); 
```

现在，您将有时间在软按钮栏的中间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T04:40:14.903

设置一个在该特定位置绘制时间的玻璃窗格。

在 LWUIT 1.5/ [Codename One](http://www.codenameone.com/)上，您可以派生 MenuBar 并将您的组件添加到其中。

# c++ - 为什么我的 c++ 版本说我有“路径中的无效字符”？

> ID：12593943
> 
> 赞同：1
> 
> 时间：2012-09-26T02:54:49.787
> 
> 标签：c++, eclipse, build

我正在尝试构建我的第一个 c++ 程序，并且我正在使用 Eclipse 插件。我正在使用他们的示例“Hello world”程序。它没有显示任何错误，但是当我点击构建时，它会记录以下内容：

> **** 为项目 Hello world 重建配置调试 ****
> 
> **** 内部构建器用于构建 ****
> 
> 构建错误
> 
> 索引 5 处路径中的非法字符：Hello world.exe

有谁知道为什么会发生这个错误，或者如何解决它？

谢谢 ：）

编辑：

我尝试创建自己的，我将在我的文件结构下方添加一张图片，但现在我收到以下错误：（我假设它是一个错误，因为它仍然无法运行，但它可能不会）

> **** 为项目项目构建配置调试 ****
> 
> **** 内部构建器用于构建 ****
> 
> 没有什么可以为项目构建

![文件结构](../Images/390dbd126105f478421bc6e73a30a13a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-27T13:06:18.350

It appears the first part of the answer was to remove the space in the filename, as per the comment responses. I suspect your problem with "not outputting" is that the program prints and exits really fast (this is a gotcha that got me when I first started programming in C++). To fix this problem, try adding the following line after your cout statement:

```
sleep(5); // Wait 5 seconds before exiting the program 
```

# python - 如何在 python 中的活动连接上启动 TLS？

> ID：12593944
> 
> 赞同：8
> 
> 时间：2012-09-26T02:55:03.273
> 
> 标签：python, sockets, smtp, ssl

以下是我当前在端口 587 上连接到 gmail 的 smtp 服务器的代码。发出 STARTTLS 命令后，我将如何完成 TLS 会话的协商并开始发出诸如 AUTH LOGIN 和 MAIL FROM 之类的命令？我省略了 Base64 编码的 gmail 用户名，并将其替换为靠近我的代码底部的 xxxxxxxx。

我从这个程序中得到的输出是：

> 220 mx.google.com ESMTP y10sm3296641yhd.6
> 
> 250-mx.google.com 为您服务，[75.66.47.144]
> 
> 250 尺寸 35882577
> 
> 250-8BITMIME
> 
> 250-STARTTLS
> 
> 250 个增强状态代码
> 
> 220 2.0.0 准备启动 TLS

```
from socket import *
import ssl
msg = "\r\n smtp.."
endmsg = "\r\n.\r\n"

# Mailserver hostname and port to be used.
mailserver = ("smtp.gmail.com", 587)

# Create a socket and create an active TCP connection with the mailserver
clientSocket = socket(AF_INET, SOCK_STREAM);
clientSocket.connect(mailserver)

# Read server response
recv = clientSocket.recv(1024)
print recv
if recv[:3] != '220':
    print '220 reply not received from server.'

# Send EHLO command and print server response.
ehloCommand = 'EHLO smtp.google.com\r\n'
clientSocket.send(ehloCommand)

recv1 = clientSocket.recv(1024)
print recv1
if recv1[:3] != '250':
    print '250 reply not received from server.'

# Send STARTTLS command to server and print server response
command = "STARTTLS\r\n"
clientSocket.send(command)

recv1 = clientSocket.recv(1024)
print recv1
if recv[:3] != '220':
    print '220 reply not received from server.'

# SEND AUTH LOGIN command and Base64 encoded username
command = "AUTH LOGIN xxxxxxxxxxxxx\r\n"
clientSocket.send(command)

recv1 = clientSocket.recv(1024)
print recv1 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T03:03:46.640

您可以 ssl 包装连接的套接字。这会给你的想法：

```
import ssl
import base64
from socket import *

cc = socket(AF_INET, SOCK_STREAM)
cc.connect(("smtp.gmail.com", 587))
# cc.read(..)

cc.send('helo tester.com\r\n')
cc.send('starttls\r\n')
# cc.read(..) If the server responds ok to starttls
#             tls negotiation needs to happen and all
#             communication is then over the SSL socket 

scc = ssl.wrap_socket(cc, ssl_version=ssl.PROTOCOL_SSLv23)
scc.send('auth login\r\n')
# scc.read(..)

scc.send(base64.b64encode('username')+'\r\n')
scc.send(base64.b64encode('password')+'\r\n')

# css.send(
#  mail from:
#  rcpt to:
#  data
#  etc 
```

查看此页面的 AUTH LOGIN 部​​分以获取有关用户名/密码编码的信息：http: [//www.samlogic.net/articles/smtp-commands-reference-auth.htm](http://www.samlogic.net/articles/smtp-commands-reference-auth.htm)

> 在将 AUTH LOGIN 命令发送到服务器之后，服务器通过向客户端发送 BASE64 编码文本（问题）来询问用户名和密码。在上面的示例中，“VXNlcm5hbWU6”是单词“Username”的 BASE64 编码文本，“UGFzc3dvcmQ6”是单词“Password”的 BASE64 编码文本。客户端也使用 BASE64 编码发送用户名和密码。在上面的示例中，“adlxdkej”是一个 BASE64 编码的用户名，“lkujsefxlj”是一个 BASE64 编码的密码。

# jquery - Wordpress 中折叠的 jQuery UI 手风琴

> ID：12593947
> 
> 赞同：1
> 
> 时间：2012-09-26T02:55:31.790
> 
> 标签：jquery, user-interface, wordpress-theming

我试图在页面加载时实现折叠手风琴，除非有人转到特定选项卡。我有手风琴的工作，但不能让它崩溃。我正在使用 Wordpress 平台，我的模板显示如下输出：

```
<div id="accordion" class="ui-accordion ui-widget ui-helper-reset ui-accordion-icons" role="tablist">
            <section class="post-4 page type-page status-publish hentry clearfix">
                    <h1 class="entry-title acc-header dark-side ui-accordion-header ui-helper-reset ui-state-active ui-corner-top" role="tab" aria-expanded="true" aria-selected="true" tabindex="0"><span class="ui-icon ui-icon-triangle-1-s"></span><a href="#">Boon Villas – it is all about partnership</a></h1>
                    <div class="the-content dark-side ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active" style="height: 368px; display: block; " role="tabpanel">
                    Some content 1
                    </div><!-- end #the-content-->
        </section>
                <section class="post-4 page type-page status-publish hentry clearfix">
            <h1 class="entry-title acc-header dark-side ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role="tab" aria-expanded="false" aria-selected="false" tabindex="-1"><span class="ui-icon ui-icon-triangle-1-e"></span><a href="#6" id="6">Our Commitment</a></h1>
            <div class="the-content dark-side ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" style="height: 368px; display: none; " role="tabpanel">
                Some content 2
            </div><!-- .the-content -->
    </section>

        <section class="post-4 page type-page status-publish hentry clearfix">
            <h1 class="entry-title acc-header dark-side ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role="tab" aria-expanded="false" aria-selected="false" tabindex="-1"><span class="ui-icon ui-icon-triangle-1-e"></span><a href="#10" id="10">Our People</a></h1>
            <div class="the-content dark-side ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" style="height: 368px; display: none; " role="tabpanel">

                Some content 3
            </div><!-- .the-content -->
    </section>

        <section class="post-4 page type-page status-publish hentry clearfix">
            <h1 class="entry-title acc-header dark-side ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role="tab" aria-expanded="false" aria-selected="false" tabindex="-1"><span class="ui-icon ui-icon-triangle-1-e"></span><a href="#17" id="17">Languages Spoken</a></h1>
            <div class="the-content dark-side ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" style="height: 368px; display: none; " role="tabpanel">

                Some content 4

            </div><!-- .the-content -->
    </section>

</div> 
```

我的 jQuery 是：

```
 var accOpt = {
            active: false,
            header: '.acc-header',
            navigation: true,
            event: 'mouseover',
            fillSpace: false,
            animated: 'easeslide',
            collapsible: true,
            allwayOpen: false
        };
    var accTab = <?php if ( !$_GET['id']) { echo 0;} else {echo $_GET['id'];} ?>;
    $(document).ready(function(){
        $('#accordion').accordion( accOpt );
        $("#accordion").accordion( 'activate', accTab );
    }); 
```

我正在使用 PHP 从链接中获取 id 参数来决定应该打开哪个选项卡。问题是如果没有 id 或 id=0 => 第一个选项卡，如何实现所有选项卡折叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:15:11.210

这应该会导致所有页面加载时“折叠”。

```
$("#accordion").accordion({
      active: false
}); 
```

要允许人们再次关闭它，请设置`collapsible: true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:33:25.850

经过一番思考，我已经让它工作了，这是代码：

```
 var tabID = <?php if ( !$_GET['id']) { echo 0;} else {echo $_GET['id'];} ?>; // set tabID to be open

    var accOpt = {
            active: false,
            header: '.acc-header',
            navigation: true,
            event: 'click',
            fillSpace: false,
            animated: 'easeslide',
            collapsible: true,
            allwayOpen: false
        };
    $('#accordion').accordion( accOpt );

    if ( tabID && tabID > 0 ) { //tabID is defined and tabID > 0 activate the tab

        $("#accordion").accordion( 'activate', tabID );
    } 
```

# ember.js - 如何将处理程序绑定到 ember.js 中视频标签的结束事件

> ID：12593949
> 
> 赞同：2
> 
> 时间：2012-09-26T02:55:48.183
> 
> 标签：ember.js

我在获取 ember 视图以响应来自视频标签的“结束”视图时遇到问题 - 我什至在应用程序中设置了一个自定义并在视图上创建了一个结束的方法，但没有骰子。我设法通过视图的 didInsertElement 中的 $() 得到一些东西，但是视图的标准“on”方法什么也没做——就像事件正在元素上发生，但没有进入视图。但是通过 $ 设置意味着“this”不是绑定到视图而是绑定到元素，这对我没有太大帮助

我的观点：

```
CommercialView: Em.View.extend
            tagName: 'video'
            templateName: "commercial"
            attributeBindings: ['autoplay', 'width', 'height']
            width: 320
            height: 240
            autoplay: true
            ended: (event) ->
                debugger
            didInsertElement: () ->
                #this.on('ended', this.ended)​ #doesn't work
                this.$().on('ended', this.ended) #shifts this to the element 
```

我的应用程序：

```
App = Em.Application.create
    customEvents: {
        'ended':'ended'
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T11:52:59.693

这是 jQuery 的限制，Ember 将其用于事件。它只是不能委托视频或音频事件：http: [//jsfiddle.net/XzVXx/](http://jsfiddle.net/XzVXx/)

不幸的是，它也缺乏`context`为像 for 那样的事件提供参数的能力`$.ajax()`，所以当然你不能指定什么`this`意思。

您将得到的最接近的是：

```
didInsertElement: function(){
  this.$().on('ended', $.proxy( this.ended, this )) ;
} 
```

# php - 使用计数器和 AJAX 进行跨服务器下载的下载按钮

> ID：12593953
> 
> 赞同：0
> 
> 时间：2012-09-26T02:56:08.283
> 
> 标签：php, jquery, download

我有一个小 PHP 脚本，用于跨服务器提供文件：http: [//pastebin.com/Z1xhPxVm](http://pastebin.com/Z1xhPxVm)

这工作得很好。

现在，我想要完成的是通过单击按钮来提供此文件。我认为最好的方法是使用 JavaScript，但在提供文件时遇到了问题。到目前为止，我只能将响应`success: function(response)`直接输出到网站（乱码）。

我的其他代码： http: [//pastebin.com/GAN5EDdb](http://pastebin.com/GAN5EDdb)

我补充说：

```
if ( $_POST['dl'] == true ) {
        return sendTest();
} 
```

到我粘贴的第一个代码的顶部。

我是 AJAX 之类的新手，有没有更好的方法来做到这一点？

请告诉我。

谢谢！

特雷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:12:07.977

我相信问题在于您试图将 php 数组直接发送到 javascript。实现此目的的一种方法是将结果转换为 JSON 格式。

尝试这样做：

PHP部分：

```
return json_encode($res); 
```

Javascript/JQuery 部分：

```
var javaArray = $.parseJSON(response); 
```

希望这可以帮助。

# amazon-web-services - AWS 中是否有任何大于 large 的响应组

> ID：12593956
> 
> 赞同：0
> 
> 时间：2012-09-26T02:56:54.040
> 
> 标签：amazon-web-services

我想知道aws响应组中是否有大于大的检索数据？

我只知道小号、中号和大号，还有比大号更大的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:58:34.663

以下是 AWS 上当前的“最大”实例

**大内存**

高内存四倍超大型实例

*   68.4 GB 内存
*   26 个 EC2 计算单元（8 个虚拟内核，每个内核有 3.25 个 EC2 计算单元）
*   1690 GB 的实例存储
*   64位平台
*   I/O 性能：高
*   EBS 优化可用：1000 Mbps
*   API 名称：m2.4xlarge

**CPU 大**

集群计算八特大实例

*   60.5 GB 内存
*   88 个 EC2 计算单元（2 个 Intel Xeon E5-2670，八核“Sandy Bridge”架构）
*   3370 GB 的实例存储
*   64位平台
*   I/O 性能：非常高（10 Gb 以太网）
*   EBS 优化可用：否*
*   API 名称：cc2.8xlarge

**IO 大**

高 I/O 四倍超大型实例

*   60.5 GB 内存
*   35 个 EC2 计算单元（16 个虚拟内核*）
*   2 个基于 SSD 的卷，每个卷具有 1024 GB 的实例存储
*   64位平台
*   I/O 性能：非常高（10 Gb 以太网）
*   存储 I/O 性能：非常高**
*   EBS 优化可用：否***
*   API 名称：hi1.4xlarge

[http://aws.amazon.com/ec2/instance-types/](http://aws.amazon.com/ec2/instance-types/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T13:32:32.217

我知道这是旧的，但答案是否定的。

根据[http://docs.aws.amazon.com/AWSECommerceService/latest/DG/RG_Large.html](http://docs.aws.amazon.com/AWSECommerceService/latest/DG/RG_Large.html)，大型响应组没有任何父响应组。

> 中型和大型响应组用于演示目的，不适合生产应用。应始终在应用程序中使用精确所需的响应组，以减少延迟和响应大小。

Product Advertising API 包括以下响应组：

*   配件
*   替代版本
*   浏览节点信息
*   浏览节点
*   大车
*   购物车新发布
*   购物车TopSellers
*   购物车相似之处
*   社论评论
*   图片
*   物品属性
*   项目 ID
*   大的
*   中等的
*   最有天赋的
*   最希望的
*   新版本
*   优惠满额
*   优惠清单
*   优惠
*   报价摘要
*   促销总结
*   相关项目
*   要求
*   评论
*   销售排名
*   搜索箱
*   相似之处
*   小的
*   畅销品
*   曲目
*   变化
*   变化图像
*   变异矩阵
*   变化优惠
*   变化总结

有关更多信息，请参阅[http://docs.aws.amazon.com/AWSECommerceService/latest/DG/CHAP_ApiReference.html](http://docs.aws.amazon.com/AWSECommerceService/latest/DG/CHAP_ApiReference.html)上的API 参考

# box2d - Box2D & EaselJS，setTransform 返回错误

> ID：12593959
> 
> 赞同：0
> 
> 时间：2012-09-26T02:57:14.987
> 
> 标签：box2d, easeljs, createjs

我有以下代码来手动设置 Box2D 世界中（动态）对象的位置（在 EaselJS 的帮助下绘制）。不幸的是`setTransform`返回此错误。

```
Uncaught TypeError: Cannot read property 'position' of undefined 
```

这是代码

```
// during drag and drop
if(mouseJoint & isMouseDown) {
    mouseJoint.SetTarget(new b2Vec2(mouseX, mouseY));
    var body = mouse.getBodyAtMouse();

    if(body != null) {
        body.SetAngularVelocity(0);
        body.SetAngle(0);
        body.SetTransform(b2Vec2(10,10), 0);
    }

    ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:12:04.283

通过使用解决

```
body.SetPosition(new b2Vec2(10,10)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:56:01.103

我不是 JS 专家，但我怀疑你需要使用“new b2Vec2”而不是“b2Vec2”，就像调用 SetTarget 一样。

# java - 设置 java_home 奇怪的错误

> ID：12593962
> 
> 赞同：0
> 
> 时间：2012-09-26T02:57:52.183
> 
> 标签：java, shell, ubuntu, java-home

我有一个ubuntu机器..

在我的 ~/.bashrc 中，我将 java_home 设置为

```
export JAVA_HOME=/usr/java/jdk1.7.0_04/bin/java
export PATH=$JAVA_HOME/bin:$PATH 
```

但当我这样做的时候

```
$which java 
```

我明白了

```
/usr/bin/java 
```

可能是什么原因？任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:04:55.127

尝试一下`echo $JAVA_HOME`，`echo $PATH`您会发现它们已正确设置。问题是您在询问 shell 可执行 java 在哪里，它没有查看 JAVA_HOME 变量。

如果您刚刚编辑了 .bashrc，您将需要手动运行该文件，或者再次登录到您的 shell 以获取更改。

您有 2 个选择：

1.  请在每次使用的基础上参考您要使用的特定 jdk
2.  [如此处所述，](https://help.ubuntu.com/community/Java)使用 update-alternatives 更新默认 java

# php - 使用一个 mysql 语句作为另一个 mysql 语句的变量

> ID：12593964
> 
> 赞同：1
> 
> 时间：2012-09-26T02:57:58.910
> 
> 标签：php, mysql

我有 2 个 mysql 语句，其中一个从 4 个链接表中获取所有信息以供员工使用。我正在尝试获取另一个表中的每个工作人员的标题，但我无法添加到 1 语句，因为它与选择的主表无关。我在 mysql 语句上尝试了大约 20 种变体，但均未成功。我确实让它拉出标题并通过第二个语句中的变量输出它，但它给每个人一个相同的标题，当它再次循环时似乎没有更新变量。

第一条 mysql 语句读取（简化版很长）

```
 SELECT staff_tbl.titleID FROM staff_tbl 
```

第二条mysql语句读取

```
 SELECT titles_tbl.titleID, titles_tbl.titleName FROM titles_tbl WHERE titles_tbl.titleID = '" . $getTitle . "'" 
```

变量设置为（$row_rsOfficeLocation 是第一个 mysql 语句的结果）

```
 $getTitle = $row_rsOfficeLocation['titleID']; 
```

有谁知道如何让它更新 $getTitle 变量，当它在第二个语句中每次在第一个语句中更新时被请求时？

编辑：这是数据库结构和一些值

设置 FOREIGN_KEY_CHECKS=0；

* * *

-- 表结构`city_tbl`

* * *

如果存在则删除表`city_tbl`；CREATE TABLE `city_tbl`( `cityID`int(11) NOT NULL auto_increment, `cityName`varchar(255) NOT NULL, PRIMARY KEY ( `cityID`)) ENGINE=MyISAM AUTO_INCREMENT=83 DEFAULT CHARSET=utf8;

* * *

-- city_tbl 的记录

* * *

插入`city_tbl`值（'1'，'Aloha'）；插入`city_tbl`值（'2'，'安娜堡'）；

* * *

-- 表结构`officelocations_tbl`

* * *

如果存在则删除表`officelocations_tbl`；CREATE TABLE `officelocations_tbl`( `locationID`int(11) NOT NULL auto_increment, `officeName`char(255) NOT NULL, `address1`varchar(285) NOT NULL, `address2`varchar(285) 默认 NULL, `cityID`int(11) NOT NULL, `stateID`int(11) NOT NULL, `zipCode`int(11)默认 NULL, `officePhone`varchar(13) 默认 NULL, `contact1`int(11) 默认 NULL, `contact2`int(11) 默认 NULL, `partner`int(11) 默认 NULL, PRIMARY KEY ( `locationID`), KEY `City`( `cityID`), KEY `State`( `stateID`), KEY `Contact1`( `contact1`), KEY `Contact2`( `contact2`), KEY `Partner`( `partner`) ) 引擎=MyISAM AUTO_INCREMENT=31 默认字符集=utf8;

* * *

-- officelocations_tbl 记录

* * *

插入`officelocations_tbl`值（'1'，'Atlanta'，'5555 Some Ave'，'#311'，'3'，'10'，'30041'，''，null，null，'26'）；插入`officelocations_tbl`值（'2'，'Austin'，'5555 Some Ave'，''，'4'，'43'，'78734'，'555-555-1212'，'72'，null，'81' );

* * *

-- 表结构`staff_tbl`

* * *

如果存在则删除表`staff_tbl`；CREATE TABLE `staff_tbl`( `staffID`int(11) NOT NULL auto_increment, `staffID_C2`int(11) NOT NULL, `staffID_P`int(11) NOT NULL, `firstName`varchar(255) NOT NULL, `middleInitial`varchar(15) 默认 NULL, `lastName`varchar(255) NOT NULL, `suffix`varchar(15)默认 NULL， `accredations`varchar(150) 默认 NULL， `email`varchar(255) NOT NULL， `phone`varchar(25) NOT NULL， `mobilePhone`varchar(25) 默认 NULL， `officePhone`varchar(25) 默认 NULL， `faxNumber`varchar(25) 默认 NULL， `address1`varchar(255) NOT NULL, `address2`varchar(255) 默认 NULL, `cityID`int(11) NOT NULL, `stateID`int(11) NOT NULL, `zipCode`int(11) NOT NULL, `titleID`int(11) NOT NULL, `locationID`int(11) NOT NULL, `photoURL`varchar(255) 默认 NULL, `vCardURL`varchar(255) 默认 NULL, `qRCodeURL`varchar(255) 默认 NULL, `resumeURL`varchar(255) 默认 NULL, `biography`longtext, `dateCreated`date NOT NULL, PRIMARY KEY ( `staffID`), KEY `State`( `stateID`), KEY `Location`( `locationID`), KEY `Title`USING BTREE ( `titleID`), KEY `City`USING BTREE ( `cityID`), KEY `Staff`USING BTREE ( `staffID`) ) ENGINE=MyISAM AUTO_INCREMENT=102 DEFAULT CHARSET=utf8;

* * *

-- staff_tbl 的记录

* * *

插入`staff_tbl`值（'1'，'1'，'1'，'John'，''，'Doe'，''，''，'johndoe@someemail.com'，'5555551212'，''，'5555551212 ', '5555551212', '5555 Some Ave.', 'Suite 8, #317', '21', '42', '55555', '3', '0', '', '', '', '', '1', '2012-08-02'); 插入`staff_tbl`值（'2'，'2'，'2'，'Jane'，''，'Doe'，''，''，'jandoe@someemail.com'，'5555551212'，''，'5555551212 ', '5555551212', '555555 SW Some Ave', '', '1', '37', '55555', '3', '0', '', '', '',

* * *

-- 表结构`state_tbl`

* * *

如果存在则删除表`state_tbl`；CREATE TABLE `state_tbl`( `stateID`int(11) NOT NULL auto_increment, `state_abreviation`char(10) NOT NULL, `state_name`char(100) NOT NULL, PRIMARY KEY ( `stateID`) ) ENGINE=MyISAM AUTO_INCREMENT=54 DEFAULT CHARSET=utf8;

* * *

-- state_tbl 的记录

* * *

插入`state_tbl`值（'51'、'DC'、'Washington DC'）；插入`state_tbl`值（'1'，'AL'，'Alabama'）；

* * *

-- 表结构`titles_tbl`

* * *

如果存在则删除表`titles_tbl`；CREATE TABLE `titles_tbl`( `titleID`int(11) NOT NULL auto_increment, `titleName`varchar(255) NOT NULL, PRIMARY KEY ( `titleID`)) ENGINE=MyISAM AUTO_INCREMENT=15 DEFAULT CHARSET=utf8;

* * *

--titles_tbl 的记录

* * *

INSERT INTO `titles_tbl`VALUES ('1', 'Associate Consultant\r\n'); INSERT INTO `titles_tbl`VALUES（“2”、“首席财务官”）；插入`titles_tbl`值（'3'，'顾问'）；INSERT INTO `titles_tbl`VALUES ('4', 'Director, Business Development'); 插入`titles_tbl`值（'5'，'保留标题空白'）；INSERT INTO `titles_tbl`VALUES（'6'，'国家信息技术总监'）；INSERT INTO `titles_tbl`VALUES（'7'，'国家运营总监'）；INSERT INTO `titles_tbl`VALUES（'8'，'国家技术总监'）；插入`titles_tbl`值（'9'，'合作伙伴'）；INSERT INTO `titles_tbl`VALUES ('10', '区域顾问'); 插入`titles_tbl`值（' 11', '高级顾问'); `titles_tbl`INSERT INTO VALUES（“12”、“副总裁”）；插入`titles_tbl`价值观（'13'，'项目会计师'）；插入`titles_tbl`值（'14'，''）；

示例输出如下：

![样本输出](../Images/122ad5aca370614a06694054c127618c.png) 它正在工作，除了它输出的所有头衔对于每个工作人员都是相同的。我使用的代码是我之前为第二个 select 语句发布的代码。我不知道如果我能弄清楚如何将titles_tbl加入主sql语句是否会更容易。我已经尝试了从联合到第一个中的第二个选择的几种变体，但它们似乎都不起作用或者它们抛出错误。

这是我一直在使用的第一个 sql 语句，包括我的连接的所有别名

```
 SELECT staff_tbl.staffID, staff_tbl.staffID_C2, staff_tbl.staffID_P, staff_tbl.firstName, staff_tbl.middleInitial, staff_tbl.lastName, staff_tbl.suffix, staff_tbl.accredations, staff_tbl.email, staff_tbl.phone, staff_tbl.mobilePhone, staff_tbl.officePhone, staff_tbl.faxNumber, staff_tbl.address1, staff_tbl.address2, staff_tbl.cityID, staff_tbl.stateID, staff_tbl.zipCode, staff_tbl.titleID, staff_tbl.locationID, staff_tbl.photoURL, staff_tbl.vCardURL, staff_tbl.qRCodeURL, staff_tbl.resumeURL, staff_tbl.biography, staff_tbl.dateCreated, officelocations_tbl.locationID, officelocations_tbl.officeName, officelocations_tbl.address1, officelocations_tbl.address2, officelocations_tbl.cityID, officelocations_tbl.stateID, officelocations_tbl.zipCode, officelocations_tbl.officePhone, officelocations_tbl.contact1, officelocations_tbl.contact2, officelocations_tbl.partner, city_tbl.cityID, city_tbl.cityName, state_tbl.stateID, state_tbl.state_abreviation, state_tbl.state_name, titles_tbl.titleID, titles_tbl.titleName,  contact1.firstName AS c1Firstname, contact1.lastName AS c1lastName, contact1.middleInitial AS c1middleInitial, contact1.suffix AS c1suffix,  contact1.accredations AS c1accredations, contact1.phone AS c1Phone, contact1.faxNumber AS c1FaxNumber, contact1.mobilePhone AS c1Mobile,  contact1.email AS c1Email, contact1.titleID AS c1Title,  contact2.firstName AS c2Firstname, contact2.lastName AS c2lastName, contact2.middleInitial AS c2middleInitial, contact2.suffix AS c2suffix,  contact2.accredations AS c2accredations, contact2.phone AS c2Phone, contact2.faxNumber AS c2FaxNumber, contact2.mobilePhone AS c2Mobile,  contact2.email AS c2Email, contact2.titleID AS c2Title,  partner.firstName AS c3Firstname, partner.lastName AS c3lastName, partner.middleInitial AS c3middleInitial, partner.suffix AS c3suffix,  partner.accredations AS c3accredations, partner.phone AS c3Phone, partner.faxNumber AS c3FaxNumber, partner.mobilePhone AS c3Mobile,  partner.email AS c3Email, partner.titleID AS c3Title  FROM officelocations_tbl INNER JOIN staff_tbl ON staff_tbl.staffID = officelocations_tbl.contact1 INNER JOIN state_tbl ON state_tbl.stateID = officelocations_tbl.stateID INNER JOIN titles_tbl ON titles_tbl.titleID = staff_tbl.titleID INNER JOIN city_tbl ON city_tbl.cityID = officelocations_tbl.cityID LEFT OUTER JOIN staff_tbl contact1 ON (contact1.staffID = officelocations_tbl.contact1)  LEFT OUTER JOIN staff_tbl contact2 ON (contact2.staffID = officelocations_tbl.contact2)  LEFT OUTER JOIN staff_tbl partner ON (partner.staffID = officelocations_tbl.partner) 
```

很抱歉这段代码很长，但我需要一个小时才能缩进。

编辑：好的，所以我重新编写了我的 mysql 语句并让它现在从数据库中提取所有信息。但我有一个小问题。在循环的每 3 次迭代中，我都会切换我的联系人 1 和合作伙伴在列表中的位置。似乎只是将其中两个切换到了故障状态。因此，如果我有 3 个触点，它会切换触点 1 和触点 2，而在我只有 2 个触点的触点上，它会切换它们的顺序。

这是我正在使用的新 mysql 语句。

```
 SELECT staff_tbl.staffID, staff_tbl.firstName, staff_tbl.middleInitial, staff_tbl.lastName,
     staff_tbl.suffix, staff_tbl.accredations, staff_tbl.email, staff_tbl.phone,
     staff_tbl.mobilePhone, staff_tbl.officePhone, staff_tbl.faxNumber, staff_tbl.titleID, 
    staff_tbl.locationID, titles_tbl.titleID, titles_tbl.titleName,    
    officelocations_tbl.locationID, officelocations_tbl.officeName, officelocations_tbl.address1,
     officelocations_tbl.address2, officelocations_tbl.cityID, officelocations_tbl.stateID, 
    officelocations_tbl.zipCode, officelocations_tbl.officePhone, officelocations_tbl.contact1,
     officelocations_tbl.contact2, officelocations_tbl.partner, state_tbl.stateID, 
    state_tbl.state_abreviation, state_tbl.state_name, city_tbl.cityID, city_tbl.cityName, 
    officelocations_tbl.contact1 AS c1Contact, officelocations_tbl.contact2 AS c2Contact, 
    officelocations_tbl.partner AS c3Contact FROM staff_tbl INNER JOIN titles_tbl ON 
    titles_tbl.titleID = staff_tbl.titleID INNER JOIN officelocations_tbl ON officelocations_tbl.contact1 = staff_tbl.staffID  OR officelocations_tbl.contact2 = staff_tbl.staffID
      OR officelocations_tbl.partner = staff_tbl.staffID  
    OR staff_tbl.locationID = officelocations_tbl.locationID 
    INNER JOIN state_tbl ON state_tbl.stateID = officelocations_tbl.stateID 
    INNER JOIN city_tbl ON city_tbl.cityID = officelocations_tbl.cityID 
```

对于我的显示，我有一个 if 语句来检查是否有 contact1、contact2 和合作伙伴。如果联系人 2 为空，它将仅显示联系人 1 和合作伙伴，而如果联系人 2 存在，它将显示所有 3 个联系人，如果没有联系人 1 或联系人 2，则将仅显示合作伙伴的 else 语句。通过这个循环的php完美地工作，所以没有错误。是对和/或还不太正确的 sql 语句的引用导致了我的错误。对于每个循环，我允许语句运行，并且当它遇到第二个（如果有）联系人时再次获取该行。我设置了一个等于 staff_id 的变量，这样我就可以让它拉出与每个位置相关联的正确人员。在我获取行之前，我将员工 ID 设置为特定的联系人示例：

```
 $staff_ID == $row_rsOfficeLocation['c3Contact']; 
```

它正确读取了分配，但由于某种原因，它似乎在读取到员工 ID 的分配之前就已经调用了 fetch assoc 调用。有效地将员工 ID 设置为列表中的第二个名称，而不是第一个。

有任何想法吗？

编辑以包含 php 循环：

```
 <?php do { 
$staff_ID = $row_myQuery['staffID'];
?>        
    <ul>
              <li><?php echo $row_myQuery['address1']; ?> <?php echo $row_myQuery['address2']; ?></li>
              <li><?php echo $row_myQuery['cityName']; ?>, <?php echo $row_myQuery['state_abreviation']; ?> <?php echo $row_myQuery['zipCode']; ?></li>
              <br />

              <?php
                if ($row_myQuery['c2Contact'] == "" && $row_myQuery['c1Contact'] != ""){?>
                    <!-- if contact 2 is empty display only contact 1 and partner -->

                     <!-- contact 1 information -->  
                     <?php if ($row_myQuery['c1Contact'] != ""){    
                     echo $staff_ID;                      
                         $staff_ID == $row_myQuery['c1Contact'];?>
                        <li class="emailGrey"><strong><?php echo $row_myQuery['firstName']; ?> <?php echo $row_myQuery['middleInitial']; ?> <?php echo $row_myQuery['lastName']; ?> <?php echo $row_myQuery['suffix']; ?></strong></li>
                        <li>Title: <?php echo $row_myQuery['titleName']; ?></li>
                          <li>Tel: <?php echo format_phone($row_myQuery['phone']);?></li>
                          <li>Fax: <?php echo format_phone($row_myQuery['faxNumber']); ?></li>
                          <li><a href="mailto:<?php echo $row_myQuery['email']; ?>">Email: <?php echo $row_myQuery['email'];  echo $row_myQuery['staffID']; ?></a></li>
                          <br />
                       <?php }
                   ?>
                       <?php if ($row_myQuery['c3Contact'] != ""){  

                         $staff_ID == $row_myQuery['c3Contact'];
                         $row_myQuery = mysql_fetch_assoc($myQuery);
                          echo $staff_ID;   ?>

                          <!-- partner information -->  
                          <li class="emailGrey"><strong><?php echo $row_myQuery['firstName']; ?> <?php echo $row_myQuery['middleInitial']; ?> <?php echo $row_myQuery['lastName']; ?> <?php echo $row_myQuery['suffix']; ?></strong></li>
                          <li>Title: <?php echo $row_myQuery['titleName']; ?></li>
                          <li>Tel: <?php echo format_phone($row_myQuery['phone']); ?></li>
                          <li>Fax: <?php echo format_phone($row_myQuery['faxNumber']); ?></li>
                          <li><a href="mailto:<?php echo $row_myQuery['email']; ?>">Email: <?php echo $row_myQuery['email']; ?></a></li>
                     <?php }  ?>

                <?php }else if ($row_myQuery['c2Contact'] != ""){ ?>
                 <!-- if contact 2 is not empty display all contacts -->
                <!-- contact 1 information -->  
                 <?php if ($row_myQuery['c1Contact'] != ""){                          
                 $staff_ID = $row_myQuery['c1Contact'];
                 ?>

                <li class="emailGrey"><strong><?php echo $row_myQuery['firstName']; ?> <?php echo $row_myQuery['middleInitial']; ?> <?php echo $row_myQuery['lastName']; ?> <?php echo $row_myQuery['suffix']; ?></strong></li>
                <li>Title: <?php echo $row_myQuery['titleName']; ?></li>
                  <li>Tel: <?php echo format_phone($row_myQuery['phone']);?></li>
                  <li>Fax: <?php echo format_phone($row_myQuery['faxNumber']); ?></li>
                  <li><a href="mailto:<?php echo $row_myQuery['email']; ?>">Email: <?php echo $row_myQuery['email']; ?></a></li>
                  <br />
                   <?php }
               ?>

              <?php if ($row_myQuery['c2Contact'] != ""){                         
                 $staff_ID = $row_myQuery['c2Contact'];
                 $row_myQuery = mysql_fetch_assoc($myQuery);?>

                <li class="emailGrey"><strong><?php echo $row_myQuery['firstName']; ?> <?php echo $row_myQuery['middleInitial']; ?> <?php echo $row_myQuery['lastName']; ?> <?php echo $row_myQuery['suffix']; ?></strong></li>
                <li>Title: <?php echo $row_myQuery['titleName']; ?></li>
                  <li>Tel: <?php echo format_phone($row_myQuery['phone']);?></li>
                  <li>Fax: <?php echo format_phone($row_myQuery['faxNumber']); ?></li>
                  <li><a href="mailto:<?php echo $row_myQuery['email']; ?>">Email: <?php echo $row_myQuery['email']; ?></a></li>
                  <br />
                   <?php }
               ?>

               <?php if ($row_myQuery['c3Contact'] != ""){  

                 $staff_ID = $row_myQuery['c3Contact'];
                 $row_myQuery = mysql_fetch_assoc($myQuery);
                 ?>

                  <!-- partner information -->  
                  <li class="emailGrey"><strong><?php echo $row_myQuery['firstName']; ?> <?php echo $row_myQuery['middleInitial']; ?> <?php echo $row_myQuery['lastName']; ?> <?php echo $row_myQuery['suffix']; ?></strong></li>
                  <li>Title: <?php echo $row_myQuery['titleName']; ?></li>
                  <li>Tel: <?php echo format_phone($row_myQuery['phone']); ?></li>
                  <li>Fax: <?php echo format_phone($row_myQuery['faxNumber']); ?></li>
                  <li><a href="mailto:<?php echo $row_myQuery['email']; ?>">Email: <?php echo $row_myQuery['email']; ?></a></li>

               <?php }
               ?>       

                <?php } else { ?>
                <!-- if only partner display only partner --> 
               <?php if ($row_myQuery['c3Contact'] != ""){  

                    $staff_ID = $row_myQuery['c3Contact'];
                 ?>

                  <!-- partner information -->  
                  <li class="emailGrey"><strong><?php echo $row_myQuery['firstName']; ?> <?php echo $row_myQuery['middleInitial']; ?> <?php echo $row_myQuery['lastName']; ?> <?php echo $row_myQuery['suffix']; ?></strong></li>
                  <li>Title: <?php echo $row_myQuery['titleName']; ?></li>
                  <li>Tel: <?php echo format_phone($row_myQuery['phone']); ?></li>
                  <li>Fax: <?php echo format_phone($row_myQuery['faxNumber']); ?></li>
                  <li><a href="mailto:<?php echo $row_myQuery['email']; ?>">Email: <?php echo $row_myQuery['email']; ?></a></li>

               <?php }
      } 
     } while ($row_myQuery = mysql_fetch_assoc($myQuery)); ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T03:00:49.480

这是一个基本的`INNER JOIN`：

```
SELECT
  titles_tbl.titleID, 
  titles_tbl.titleName
FROM
  titles_tbl 
  JOIN staff_tbl ON titles_tbl.titleID = staff_tbl.titleID 
WHERE
  staff_tbl.titleID = 'some value from your long query' 
```

也可以通过`WHERE`子句中的子查询来完成：

```
SELECT
  titles_tbl.titleID, 
  titles_tbl.titleName
FROM
  titles_tbl
WHERE
  titleID = (SELECT titleID FROM staff_tbl WHERE <whatever from your long query>) 
```

或者，如果第一个查询旨在返回多行而不是仅返回一行，则需要使用`IN()`子查询

```
/* Replace the WHERE clause above with */
WHERE
  titleID IN(SELECT titleID FROM staff_tbl WHERE <whatever from your long query>) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T20:53:06.153

好的所以我想出了我自己的问题。我创建了更多表格并将它们用作访问点以获取标题和位置信息。谢谢你的帮助 ：）

对于其他尝试完成此操作的人来说，下面是我使用的 sql 语句。

```
 SELECT 
    staff_tbl.staffID, staff_tbl.firstName, staff_tbl.middleInitial, 
    staff_tbl.lastName, staff_tbl.suffix, staff_tbl.accredations, staff_tbl.email,
    staff_tbl.phone, staff_tbl.mobilePhone, staff_tbl.officePhone, staff_tbl.faxNumber,
    staff_tbl.address1, staff_tbl.address2, staff_tbl.cityID, staff_tbl.stateID, 
    staff_tbl.zipCode, location_tbl.locationID, 
    location_tbl.staffID, officelocations_tbl.locationID, 
    officelocations_tbl.officeName, staff_title_tbl.title_ID, staff_title_tbl.staff_ID,
     titles_tbl.titleID, titles_tbl.titleName, city_tbl.cityID, city_tbl.cityName, 
    state_tbl.stateID, state_tbl.state_abreviation, state_tbl.state_name 

    FROM staff_tbl 

    INNER JOIN location_tbl ON location_tbl.staffID = staff_tbl.staffID 
    INNER JOIN officelocations_tbl ON location_tbl.locationID = officelocations_tbl.locationID
    INNER JOIN staff_title_tbl ON staff_title_tbl.staff_ID = staff_tbl.staffID 
    INNER JOIN titles_tbl ON staff_title_tbl.title_ID = titles_tbl.titleID 
    INNER JOIN city_tbl ON city_tbl.cityID = staff_tbl.cityID 
    INNER JOIN state_tbl ON state_tbl.stateID = staff_tbl.stateID 
```

如您所见，我创建的两个额外表是 location_tbl 和 staff_title_tbl。每一个都有 2 列，一列用于 locationID（或 titleID），一列用于 staffID。使用这些我能够获得所需的所有信息。这只是一个小问题，我还没有完全解决这个问题，如果工作人员与多个位置相关联，它将多次显示该工作人员的完全相同的信息只是位置变了。但至少我已经解决了大部分问题。

再次感谢你的帮助。

# jsf - 从 inputText 字段中提取始终返回 null

> ID：12593966
> 
> 赞同：1
> 
> 时间：2012-09-26T02:58:01.133
> 
> 标签：jsf, web

因此，我目前正在与 JSF 合作，试图创建一个简单的项目，该项目从 JSF inputText 字段中获取输入，对其进行处理，然后将其吐出。不幸的是，当我试图从 inputText 字段中提取数据时，我遇到了一个令人愤怒的障碍。每当我尝试从该字段中提取时，它总是返回 null，即使该字段中有明显的数据。此外，每当我从这个 inputText 字段中提取数据时，该字段都会变为空白。对此问题的帮助将不胜感激。这是我的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html">
<h:head>
    <title>Title</title>
</h:head>
<h:body>
    <h:inputText id="username" required="true"
                 binding="#{mBean.searchField}" />
    <h:button onclick="#{mBean.pull()}"/>
    <script type="text/javascript" language="javascript">
        function doThing(i){
            document.getElementById('myDiv').innerHTML = i;
        }
    </script>
    <button onclick="alert('clicked')" onmouseup="doThing('#{mBean.value}')">display</button><br/>
    <div id="myDiv"></div>
</h:body> 
```

然后后端托管bean如下：

```
package bean; 
```

导入 javax.faces.bean.ManagedBean；导入 javax.faces.bean.RequestScoped；导入 javax.faces.component.UIInput；

@ManagedBean @RequestScoped 公共类 MBean {

```
/**
 * Creates a new instance of MBean
 */
public String value;
public String otherValue;
public UIInput searchField;

public MBean() {
    System.out.println("starting mbean");
}

public String getValue() {
    System.out.println("returning first value " + value);
    return value;
}

public void setValue(String v) {
    this.value = v;
    System.out.println("setting value to " + v);
}
public void report(){
    System.out.print("SUBMIT----");
    System.out.println("value: " + value);
    System.out.println("otherValue: " + otherValue);
}
public String getOtherValue() {
    System.out.println("got " + otherValue);
    return otherValue;
}
public void pull(){
    value = (String)searchField.getValue();
    System.out.println("pulled value is " + value);
}
public void setOtherValue(String otherValue) {
    this.otherValue = otherValue;
    System.out.println("otherValue was set to " + otherValue);
}

public UIInput getSearchField() {
    return searchField;
}

public void setSearchField(UIInput searchField) {
    this.searchField = searchField;
} 
```

}

几个小时以来，我一直在努力解决这个问题，所以非常欢迎任何帮助。提前致谢，

-保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T04:59:53.620

尝试：

```
 <h:inputText id="username" required="true" immediate="true"
                  binding="#{mBean.searchField}" /> 
```

# javascript - 具有多个背景图像的动画

> ID：12593974
> 
> 赞同：0
> 
> 时间：2012-09-26T02:58:56.313
> 
> 标签：javascript, jquery, image, css

我正在尝试为我的多个背景图像创建一些动画。

我有这个 CSS 代码：

```
header {
background-image: url('/img/cloud2.png'), url('/img/cloud3.png'), url('/img/cloud1.png'), url('/img/cloud4.png');
background-position: left bottom, 20% 40%, 40% bottom, right 85%;
background-repeat: no-repeat;
} 
```

我只想在无限循环中移动云。这是我的 JavaScript 代码：

```
 $('header').animate({
    'background-position-x': '10%, 3%, 5%, 7%'
  }, 500, 'linear'); 
```

问题是这行不通。只有当我只写一个 background-position-x 值时它才有效。但在这种情况下，所有的云都从相同的 x 值开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T03:14:33.987

看来您正在使用`background-position`css 和正在使用的 jquery `background-position-x`。为什么不尝试`background-position`使用 jquery 将 重置为您想要的值？

# java - 如何在 Eclipse 插件开发中使用我的编辑器打开 xml 文件？

> ID：12593985
> 
> 赞同：2
> 
> 时间：2012-09-26T03:00:29.247
> 
> 标签：java, eclipse, eclipse-plugin

我有一个以 xml 文件作为输入的流程图编辑器。在 plugin.xml 中，我已将扩展名指定为我的编辑器的 xml，但它在默认的 xml 编辑器中打开。是什么让文件在我的编辑器中打开？我想在我的插件开发中这样做。在我启动我的插件后，没有偏好或使用上下文菜单打开。我想将我的编辑器保留为 xml 文件的默认值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:01:42.583

检查文件的打开方式上下文菜单，以及文件关联首选项页面上的默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T09:57:35.977

Eclipse 提供了一种机制，可以根据文件的实际内容以编程方式识别文件类型。组织。蚀。核。内容类型。contentTypes 扩展点可用于定义由“描述器”描述的内容类型，描述器是能够识别给定输入流的特定类型内容的类。设计用于处理特定内容类型的编辑器可以绑定到它而不是文件扩展名。

我们需要在 plugin.xml 中指定内容类型，如下所示

```
<extension point="org.eclipse.core.contenttype.contentTypes">
<content-type base-type="org.eclipse.core.runtime.xml"
             file-extensions="xml"
             id="ca.ecliptical.examples.contenttype.apples"
             name="Apples File"
             priority="normal">
  <describer class="org.eclipse.core.runtime.content
                    .XMLRootElementContentDescriber">
     <parameter name="element"
                value="apples">
     </parameter>
  </describer>
</content-type> 
```

下面是参考，它工作正常

[http://www.developer.com/java/data/article.php/3648736/Eclipse-Tip-Define-Custom-Content-Types-to-Identify-Your-Data-Files.htm](http://www.developer.com/java/data/article.php/3648736/Eclipse-Tip-Define-Custom-Content-Types-to-Identify-Your-Data-Files.htm)

# jqgrid - 为什么单选按钮单击事件不持久更新单元格？

> ID：12593988
> 
> 赞同：1
> 
> 时间：2012-09-26T03:00:44.287
> 
> 标签：jqgrid, radio-button, persist

描述：`jqGrid.importGrid` `imptype:json`用于导入 JSON 网格，然后允许管理员通过更改跨列单选按钮组的状态来“处理”本地数据（列 1 中的所有行默认为，并且通过单击另一个单选按钮`checked="checked"`更改该状态 ( )`checked=""`说第 3 列中的同一行（相同的单选按钮组）。在第 3 列单选按钮单击事件中，对数据库的 AJAX 更新记录了第 3 列的检查状态，并且由于`loadonce:true`设置了一个 JSON，因此仅返回 HTML 单选按钮代码以替换在第 1 列和第 3 列的同一行中的 2 个单元格具有新的选中状态和背景颜色更改。请记住，这些选项已设置：`datatype:local, loadonce:true,`，在单选按钮单击事件中获取包含新单选按钮 html 的 AJAX JSON 响应后并使用`setCell`要更新单元格，它似乎不会持续更新。如果我导航到本地数据的下一页然后导航回单选按钮更改将恢复为原始本地数据版本。我正在使用 jgGrid.importGrid 以便对本地数据进行分页。我还有其他使用 .importGrid 方法的原因，这些原因与我目前不认为的描述无关。

这是初始“加载一次”服务器生成的网格代码（jqGrid.importGrid's `url: dynamicGrid.ashx`）：

```
/*C#*/
/* -- Declarations --*/
int NumberOfRecords; //from db table
int PageSize; 
int NumberOfPages; //from SQL based on NumberOfRecords and PageSize

StringBuilder bldrColNames = new StringBuilder();
StringBuilder bldrColModel = new StringBuilder();
StringBuilder bldrData = new StringBuilder();
StringBuilder bldrGrid = new StringBuilder();

string pchecked = "checked='checked'";
string achecked = "checked=''";
string xchecked = "checked=''";

/* -- Default load once colNames -- */
bldrColNames.Append("[\"Pending\",\"Approved\",\"Declined\"]");

/* -- Default load once colModel -- */
bldrColModel.Append("[");
bldrColModel.Append("{\"name\":\"pending\",\"index\":\"pending\",\"jsonmap\":\"pending\",\"key\":true},");
bldrColModel.Append("{\"name\":\"approved\",\"index\":\"approved\",\"jsonmap\":\"approved\"},");
bldrColModel.Append("{\"name\":\"declined\",\"index\":\"declined\",\"jsonmap\":\"declined\"}");
bldrColModel.Append("]");

/* -- Default load once DATA ("Pending" column cells bgcolor default to yellow -- */
bldrGrid.Append("{\"id\":12345,\"row\":");
bldrGrid.Append("\"<span style='background-color:Yellow; background-image:none;'><input type='radio' name='12345' value='p' " + pchecked + "/></span>\",");
bldrGrid.Append("\"<span style='background-color:White; background-image:none;'><input type='radio' name='12345' value='a' " + achecked + "/></span>\",");
bldrGrid.Append("\"<span style='background-color:White; background-image:none;'><input type='radio' name='12345' value='x' " + xchecked + "/></span>\",");

/* -- JSON -- */
context.Response.ContentType = "application/json";

bldrGrid.Append("{\"grid\":");
bldrGrid.Append("{\"page\":\"1\",\"rowNum\":\"" + PageSize + "\",\"total\":\"" + NumberOfPages + "\",\"records\":\"" + NumberOfRecords + "\",\"sortname\":\"id\",\"pager\":\"#pmyGrid\",\"caption\":\"Approval Updates\",\"hidegrid\":false, \"url\":\"\",\"editurl\":\"clientArray\",\"loadonce\":true,\"datatype\":\"local\",");
bldrGrid.Append("\"colModel\":" + bldrColModel + ",\"data\":[" + bldrData + "],");
bldrGrid.Append("\"rowList\":[\"25\",\"35\",\"50\"],");
bldrGrid.Append("\"colNames\":" + bldrColNames + ",");
bldrGrid.Append("\"jsonReader\":{\"root\":\"data\",\"page\":\"1\",\"total\":\"" + NumberOfPages + "\",\"records\":\"" + NumberOfRecords + "\",\"repeatitems\":true,\"cell\":\"row\",\"id\":\"id\"},");
bldrGrid.Append("\"localReader\":{\"root\":\"data\",\"page\":\"1\",\"total\":\"" + NumberOfPages + "\",\"records\":\"" + NumberOfRecords + "\",\"repeatitems\":true,\"cell\":\"row\",\"id\":\"id\"},");
bldrGrid.Append("\"viewrecords\":true,\"height\":450, \"width\":1000}");
bldrGrid.Append("}"); 
```

这是 jqGrid.importGrid、单选按钮单击事件、AJAX 和返回的 JSON：

```
$("#myGrid").jqGridImport({
        imptype: "json",
        //impstring: jsonData,
        impurl: 'dynamicGrid.ashx,
        datatype: "local",
        jsonGrid: {
            config: "grid",
            data: "data"
        },
        importComplete: function () {

            $("#myGrid").jqGrid('setGridParam', { datatype: 'local' });

            $(":radio").live('click', function (event) {

            // depending on which radio button is clicked the AJAX url .asp file below gets
            // the record id from the radio button "name" and the character "value" ('p' or 'a' or 'x') stored in the "name".

            var vData = "" + $(this).attr('name') + "=" + $(this).val();

            $.ajax({

                type: "GET",
                url: "get_JSON_radios.asp", //returns rowid and new radio button html to update cells with as shown in the JSON below
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                data: vData,
                complete: function (xhr) {

                oJSON = JSON.parse(xhr.responseText);

                var rowid = '', pending = '', approved = '';

                for (var name in oJSON) {

                     if (oJSON[name].rowid) {
                         rowid = oJSON[name].rowid;
                      } else if (oJSON[name].pending) {
                         pending = oJSON[name].pending;
                      } else if (oJSON[name].approved) {
                         approved = oJSON[name].approved;
                      }

                 }

  // assuming an "Approved" column radio button was clicked, attempt to modify 
  // local data here with returned JSON but does not persist when paging back and forth...
  // (note: only including 2 of the 3 radios here pending/approved, "declined" is affected)

    $("#myGrid").jqGrid('setCell', rowid, 'pending', pending, { background: 'White', weightfont: 'normal' });
    $("#myGrid").jqGrid('setCell', rowid, 'approved', approved, { background: 'Green', weightfont: 'normal' });

    } // end complete

  }); // end ajax

 }
}).jqGrid('navGrid', '#pmyGrid', {
        edit: false,
        add: false,
        del: false,
        search: false

    }); // end myGrid 
```

从 AJAX url 返回的 JSON：

```
'this is assuming an "Approved" column radio button was clicked

Response.Write "[{""rowid"":12345},{""pending"":""<span style='background-color:White; background-image:none;'><input type='radio' name='12345' value='p'></span>""},{""approved"":""<span style='background-color:Green; background-image:none;'><input type='radio' name='12345' checked='checked'></span>""}]" 
```

（根据 Firebug，两种情况下的 JSON - 初始和 ajax 返回 - 都很好，并且显示的网格显示新的单选按钮 HTML 按预期显示在单元格中，但是当来回分页时，更新的单元格恢复到原始状态而不是持续存在）

最后，管理员在此处所做的只需在他/她更新单选按钮列时保持不变，底层 AJAX 会更新远程数据库，因此当网格刷新或关闭时，更改已被记录并会出现在重新加载进口。

`url:""`考虑到导入的网格 url 是and`loadonce:true`和`dataype:local`and ，任何人都可以确定为什么本地数据单元格的更改在来回分页时不会持续存在`editurl:clientArray`吗？许多 TIA

**更新**

我已经检查并重新检查了 JSON 网格结构和导入的数据，`.jqGridImport`并且所有选项都设置为仅处理本地数据：`loadonce:true, datatype:local, editurl:clientArray`根据 Firebug 和 JSON 验证网页，这一切似乎都很好，并且记录在网格中按预期显示。我已经尝试解决近一周的问题是，当我单击一个单选按钮以更新同一行中的另一个单元格（它确实这样做并且我看到单元格更改值）然后导航到下一页和返回，更改的单元格恢复为最初导入的可见内容。我只想处理本地数据并让它持续一页一页地返回，并尝试使用以下内容更改内部 dataArray 和可见网格数据单元格：

```
 $("#myGrid").jqGridImport({
        imptype: "json",
        //impstring: jsonData,
        impurl: 'grid_json.ashx,
        mtype: 'Get',
        datatype: "local",
        jsonGrid: {
            config: "grid",
            data: "data"
        },
        onPaging: function () {

        },
        importComplete: function () {

            $("#myGrid").jqGrid('setGridParam', { datatype: 'local' });

            $(":radio").live('click', function (event) {

                var rowid = $(this).attr('rowid');

                var $myGrid = jQuery("#cma")

                var dataArray = $myGrid.jqGrid('getGridParam', 'data'),
                indexes = $myGrid.jqGrid('getGridParam', '_index');

                 var rows = dataArray[indexes[rowid]];

                 rows.myCellToEdit = "asdfasdf";
                 //or could be rows['myCellToEdit'] = "asdfasdf";

                 //now show what internal grid dataArray contains for the changed cell
                   alert(rows.myCellToEdit);

                 //now write same change to visible grid cell. (also eliminates need to use .trigger('reloadGrid');)

                    $('#myGrid').jqGrid('setCell', rowid, 'pending', rows['pending']);
    }
} 
```

警报显示内部数据数组已更改，可见网格单元已根据`setCell`方法更改（我可以亲眼看到），但是当我导航到下一页并返回时，更改不会保留。有人可以帮我解决这个问题。根据我研究过的数十个示例和类似场景，它违背了我所看到的逻辑，并且我已经测试了如此多的变化，应用我试图从我所看到的所有内容中确定的内容。我已经明确地读到从服务器加载然后处理的本地数据可以被分页，并且更改会持续一页一页，所以我无法“看到”我做错了什么或遗漏了什么。TIA 的任何想法。

# android - .rawQuery order by 不起作用

> ID：12593991
> 
> 赞同：0
> 
> 时间：2012-09-26T03:01:07.640
> 
> 标签：android, sqlite, sql-order-by

在我添加“order by”之前，我的语句运行良好并且可以显示数据。添加“order by”后，它无法工作！我的陈述有问题吗？

```
 Cursor c = sampleDB.rawQuery("SELECT companyNameEng FROM " +
                TABLE_NAME + "ORDER BY companyNameEng asc", null);

        if (c != null ) {
            while (c.moveToNext()) {
              womenName.add(c.getString(0)); // Get the current subj
                                                      // code, add to list
          }
          sampleDB.close();
        }
      sampleDB.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:06:26.030

确切地知道它是如何失败的将有助于我们回答这个问题，但猜测是您在语句的“ORDER BY”部分之前缺少一个空格字符。除非`TABLE_NAME`包含尾随空格，否则这将导致无效的 SQL 语句。

# node.js - Nodejs Socket.io Redis 架构的扩展

> ID：12593992
> 
> 赞同：4
> 
> 时间：2012-09-26T03:01:25.580
> 
> 标签：node.js, redis, socket.io, scalability

我知道有很多关于扩展 Nodejs Socket.io 的问答和资源，而且我已经阅读了很多。我正在考虑一个简单的云部署架构，比如 AWS，我想在这里与专家一起验证。

![http://oi48.tinypic.com/5mgx7b.jpg](../Images/27353467b3cb4e9eef28d3984dac979c.png)

我的图表正确吗？这是扩大规模的方式吗？如果是这样，如何防止 Redis 实例成为单点故障？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:09:38.817

Redis 可能[很快就会有 HA 模式](http://redis.io/topics/sentinel)，但同时你可以尝试另一个“商店”，例如[MongoStore](https://github.com/kof/socket.io-mongo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T03:03:20.930

Redis 也可以扩展：[http ://redis.io/topics/replication](http://redis.io/topics/replication)

# haskell - F#有多路if吗？

> ID：12593993
> 
> 赞同：2
> 
> 时间：2012-09-26T03:01:31.120
> 
> 标签：haskell, if-statement, f#, pattern-matching

有没有办法重构这个：

```
let collide (b1 : Box) (b2 : Box) =
  if   bottom b1 > top b2
  then false
  else if   top b1 < bottom b2
       then false
       else if   right b1 < left b2
            then false
            else if   left b1 > right b2
                 then false
                 else true 
```

以比这更易读的方式：

```
let collide (b1 : Box) (b2 : Box) =
  match () with
  | _ when bottom b1 > top    b2 -> false
  | _ when top    b1 < bottom b2 -> false
  | _ when right  b1 < left   b2 -> false
  | _ when left   b1 > right  b2 -> false
  | _                            -> true 
```

?

我正在考虑类似于 GHC 7.6.1 中的多路 if 表达式：[http ://www.haskell.org/ghc/docs/7.6.1/html/users_guide/syntax-extns.html#multi-万一](http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/syntax-extns.html#multi-way-if)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T03:12:48.537

为什么不直接使用`||`-

```
not (bottom b1>topb2 || top b1<bottom b2 || right b1<left b2 || left b1>right b2) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T03:28:14.610

```
let collide (b1 : Box) (b2 : Box) = 
    if   bottom b1 > top b2 then false 
    elif top b1 < bottom b2 then false 
    elif right b1 < left b2 then false 
    elif left b1 > right b2 then false 
    else true 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-26T03:54:33.783

[作为对布赖恩的回答](https://stackoverflow.com/a/12594146/396458)的补充，还值得指出的`elif`是，这只是糖`else if`。即你可以重新格式化你的原始代码，这样它就不会那么糟糕了：

```
let collide (b1 : Box) (b2 : Box) =
    if bottom b1 > top b2 then false
    else if top b1 < bottom b2 then false
    else if right b1 < left b2 then false
    else if left b1 > right b2 then false
    else true 
```

# node.js - 如何过滤数组元素

> ID：12593998
> 
> 赞同：4
> 
> 时间：2012-09-26T03:02:00.200
> 
> 标签：node.js, mongodb, express, mongoose

我有以下 MongoDB 文档：

```
{
 _id: ObjectId(5), 
 items: [1,2,3,45,4,67,9,4]
} 
```

我需要使用过滤项目 (1, 9, 4) 获取该文档

结果：

```
{
 _id: ObjectId(5), 
 items: [1,9,4]
} 
```

我尝试了 $elemMatch 投影，但它只返回一项：

```
A.findById(ObjectId(5))
   .select({ items: { $elemMatch: {$in: [1, 9, 4]}}})
   .exec(function (err, docs) {
      console.log(doc); // { _id: ObjectId(5), items: [ 1 ] }
      done(err);
}); 
```

如何获取包含项目的文档：仅 1、9、4？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T03:07:05.670

`A.items = A.items.filter( function(i) {return i == 1 || i == 9 || i == 4} );`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T03:51:02.110

在现代版本的 MongoDB (3.2+) 中，您可以使用[`$filter`运算符](https://docs.mongodb.com/manual/reference/operator/aggregation/filter/)选择要根据指定条件返回的数组字段的子集。返回的元素将按照字段数组中的原始顺序。

`mongo`外壳中的示例：

```
db.items.aggregate([
    { $match : {
        _id: 5
    }},
    { $project: {
        items: {
            $filter: {
                input: "$items",
                cond: {
                    "$in": ["$$this", [1, 9, 4]]
                }
            }
        }
     }
}]) 
```

注意：因为这个问题中的原始数组有`4`两次值，该`$filter`命令将返回两次出现：

```
{ "_id" : 5, "items" : [ 1, 4, 9, 4 ] } 
```

对于仅返回唯一匹配项的替代方法，可以使用[`$setIntersection`运算符：](https://docs.mongodb.com/manual/reference/operator/aggregation/setIntersection/)

```
db.items.aggregate([
    { $match : {
        _id: 5
    }},        
    { $project: {
        items: {
            $setIntersection: ['$items', [1,4,9]] 
        }
    }}
]) 
```

这将返回：`{ "_id" : 5, "items" : [ 1, 4, 9 ] }`。

**（以下2012年9月的原始答案）**

如果您希望文档操作发生在服务器端，您可以使用MongoDB 2.2 中的[聚合框架：](http://docs.mongodb.org/manual/applications/aggregation/)

```
db.items.aggregate(

  // Match the document(s) of interest
  { $match : {
     _id: 5
  }},

  // Separate the items array into a stream of documents
  { $unwind : "$items" },

  // Filter the array
  { $match : {
    items: { $in: [1, 9, 4] }
  }},

  // Group the results back into a result document
  { $group : {
     _id: "$_id",
     items: { $addToSet : "$items" }
  }}
) 
```

结果：

```
{
    "result" : [
        {
            "_id" : 5,
            "items" : [
                9,
                4,
                1
            ]
        }
    ],
    "ok" : 1
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T04:17:02.593

在你的 node.js 应用程序中使用下划线：

```
npm install underscore

var _ = require('underscore'); 
```

您可以使用数组的交集函数：

```
 intersection_.intersection(*arrays) 
```

计算作为所有数组交集的值列表。结果中的每个值都存在于每个数组中。

```
_.intersection([1, 2, 3], [101, 2, 1, 10], [2, 1]);
=> [1, 2] 
```

[http://documentcloud.github.com/underscore/#intersection](http://documentcloud.github.com/underscore/#intersection)

# sql-server - 内连接相当于这个子查询？

> ID：12593999
> 
> 赞同：1
> 
> 时间：2012-09-26T03:02:04.800
> 
> 标签：sql-server, join, subquery

我有这些桌子

`BooksCatalog`
`[BookCatalogID],[BooksCatalogBookID],[ReceivedFrom],[BillNo],[billdate]`

`Books`
`[BookID],[BookTitle],[ISBN],[ISBN13],[BookAuthorID],[BookPublisherID],[YearPublished],[NumberOfPages],[Volume],[edition],[Price]`

`Authors`
`[AuthorID],[AuthorName],[AuthorCityID],[AuthorStateID],[PhoneNumber],[Email],[Website]`

我正在运行这个查询，

```
SELECT Books.BookTitle FROM Books 
        INNER JOIN Authors ON Authors.AuthorId=Books.BookAuthorID
        WHERE Books.BookID IN 
        (SELECT BooksCatalog.BooksCatalogBookID FROM BooksCatalog
        WHERE BooksCatalog.billdate = (SELECT MIN(BooksCatalog.billdate) FROM BooksCatalog))
        AND
        AUTHORS.AuthorName = @AuthorName; 
```

因为它使用了 2 个子查询，所以我感觉它没有优化，如果与等效的内部连接一起使用，它可以表现得更好。那么，这个等效的内部连接是什么？我正在做的是找到添加到库中的第一个给定作者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:26:29.757

对于在整个模式中使用别名、模式前缀和将元素（例如 BookId 或 AuthorId）命名为相同的东西，有很多话要说。它真的需要被称为 BookAuthorId 或 BooksCatalogBookID 吗？

无论如何，您的查询可以通过这种方式重新编写得更整洁，但正如@billy 建议的那样，它可能不会真正受益于完全不同的计划：

```
SELECT b.BookTitle 
FROM dbo.Books AS b 
INNER JOIN Authors AS a 
ON a.AuthorId = b.BookAuthorID
INNER JOIN 
(
  SELECT BookId = MIN(BooksCatalogBookID)
   FROM dbo.BooksCatalog 
) AS bc
ON bc.BookId = b.BookId
WHERE a.AuthorName = @AuthorName; 
```

似乎你在这里依赖一个非常特殊的加入标准。在目录中的所有书籍中，账单日期最早的书籍也恰好是您确定的一位作者所写的几率是多少？您的逻辑是否真的可能是从指定作者那里获得第一本收费书籍？如果是这样，那么也许这更有意义：

```
;WITH x(BookTitle, rn) AS
(
  SELECT b.BookTitle, ROW_NUMBER() OVER (ORDER BY bc.billdate)
    FROM dbo.BooksCatalog AS bc
    INNER JOIN b.Books AS b
    ON b.BookId = bc.BooksCatalogBookID
    INNER JOIN dbo.Authors AS a
    ON b.BookAuthorID = a.AuthorID
    WHERE a.AuthorName = @AuthorName
)
SELECT BookTitle FROM x WHERE rn = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T03:16:27.760

您可以用内部联接替换一个子查询。

```
 SELECT Books.BookTitle 
              FROM Books 
        INNER JOIN Authors 
                ON Authors.AuthorId = Books.BookAuthorID
        INNER JOIN BooksCatalog 
                ON BooksCatalog.BooksCatalogBookID = Books.BookID 
               AND BooksCatalog.billdate = (SELECT MIN(BooksCatalog.billdate) FROM BooksCatalog) WHERE BooksCatalogBookID = Books.BookID)
        WHERE      Authors.AuthorName = @AuthorName; 
```