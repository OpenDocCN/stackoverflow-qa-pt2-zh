# StackOverflow 问答 15170000-15170999

# python - TypeError: unhashable type: 'list', 删除列表中的重复项

> ID：15170000
> 
> 赞同：-2
> 
> 时间：2013-03-02T02:26:22.070
> 
> 标签：python

当我键入以下代码时。我只是尝试删除列表中的重复项目。此列表中可能有 10K 对。

```
>>> t = [['a','1'],['a','1'],['a','2']...]
>>> t = list(set(t))

Traceback (most recent call last):
File "<pyshell#19>", line 1, in <module>
t = list(set(t))
TypeError: unhashable type: 'list'
>>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:28:15.077

尝试用元组替换列表：`('a','1')`. 据我所知，元组是可散列的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T21:56:41.110

我知道这是旧的，但它仍然首先出现在谷歌中。如果每个“子列表”只有两个元素，元组就可以工作，但是如果你想更普遍地删除重复的子列表，如果你有一个类似的列表：

```
a=[[1,2],[1,2],[1,2],[1,4],[1,2,3],[1,2],[1,2]] 
```

您可以使用

```
b=[a[x] for x in range(len(a)) if not(a[x] in a[:x])] 
```

并且 b 将仅具有来自 a 的唯一元素

# android - 来自本地服务器错误的android视频

> ID：15170012
> 
> 赞同：1
> 
> 时间：2013-03-02T02:28:15.703
> 
> 标签：android, video, xampp, android-mediaplayer

您好，我正在使用我的 android 应用程序从本地服务器 XAMPP 运行视频，并且我已将视频放在我的 XAMPP 服务器文件夹下的 htdocs 文件夹中，我得到了这段代码：

这是 .java 文件代码

```
public class video extends Activity {

    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.video1);
        final VideoView vv = (VideoView) findViewById(R.id.vview);
        MediaController mc = new MediaController(this);
        vv.setMediaController(new MediaController(this));
        vv.setVideoURI(Uri.parse("http://10.0.2.2/abc.MP4"));
        vv.requestFocus();
        vv.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
            public void onPrepared(MediaPlayer mp) {
               vv.start();
            }
        });
    }
} 
```

这是我的 logcat 错误

```
03-02 02:12:29.222: E/MediaPlayer(464): error (1, -2147483648)
03-02 02:12:29.242: E/MediaPlayer(464): start called in state 0
03-02 02:12:29.242: E/MediaPlayer(464): error (-38, 0)
03-02 02:12:29.252: E/MediaPlayer(464): Attempt to call getDuration without a valid mediaplayer
03-02 02:12:29.252: E/MediaPlayer(464): error (-38, 0)
03-02 02:12:29.322: E/MediaPlayer(464): Error (1,-2147483648)
03-02 02:12:29.742: E/MediaPlayer(464): Error (-38,0)
03-02 02:12:30.222: E/MediaPlayer(464): Error (-38,0) 
```

当我单击按钮将我定向到视频视图布局时，我应该看到我的视频正在播放我得到一个“黑色”的空白屏幕，然后屏幕变为下部的白色和上部的黑色，然后我收到“无法播放此视频”错误消息其中三个一起

# python - 在 Django 开发服务器上关闭模型验证

> ID：15170013
> 
> 赞同：1
> 
> 时间：2013-03-02T02:28:22.187
> 
> 标签：python, django, django-dev-server

模型验证阶段在 Django 开发服务器启动中最长。就我而言，这主要是浪费时间，因为我的模型不经常更换。

有没有办法关闭这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:03:25.050

如果不修改 Django 的源代码（不推荐），这是不可能的。Django 在启动时所做的唯一验证是检查模型代码的语法是否正确。时间不应超过 2-3 秒。因此，在启动期间进行的其他初始化很少，这也需要时间。

在开发过程中，您无需在每次修改代码时都重新启动服务器——尤其是在您根本不接触模型定义的情况下。如果 Django 开发服务器检测到您的代码有任何更改，它会自动重新加载。所以，在你开发的时候让它运行，希望你的体验会有所改善。

# php - 使用 jQuery AJAX 获取语法错误

> ID：15170014
> 
> 赞同：0
> 
> 时间：2013-03-02T02:28:28.903
> 
> 标签：php, javascript, jquery

我是 jQuery 新手，正在尝试从我发现使用 AJAX 的网站复制一个示例，我需要获取 PHP 变量并将其传递到另一个 PHP 页面，而不刷新整个页面。我在下面提出了以下代码，但出现语法错误

`Uncaught SyntaxError: Unexpected token )`

这是我的代码：

```
$("Button").click(function(){
    var textBox = $("textBox").val();
$.post("script.php",
    {textBox: textBox},
     function(data,status)
    )};
)}; 
```

我的 PHP 页面：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
  <head>
    <script type='text/javascript' src='script.js'></script>
    <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'></$
    <title>LCD Display</title>
  </head>
  <body>

        <form id="lcd" action="script.php" method="post">
     <input name='textBox' type='text' />
     <input type='submit' id= 'Button' value='Press to see something cool'/>
     </form>
    <div id='ResponseDiv'>
    </div>

    <iframe id="video" src="http://192.168.0.11:8081" height="120" width="160"></iframe>

  </body>
</html> 
```

我也收到以下错误，但我认为它们可能与语法错误有关：

```
Resource interpreted as Document but transferred with MIME type multipart/x-mixed-replace: "http://192.168.0.11:8081/".
Resource interpreted as Document but transferred with MIME type image/jpeg: "http://192.168.0.11:8081/". 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T02:40:03.677

您的结束标签：

```
 )}; 
```

应该是这样的：

```
$("Button").click(function(){
var textBox = $("textBox").val();
$.post("script.php",
    {textBox: textBox},
      function(data,status){
   });
}); 
```

脚本顺序将是这种方式，请注意关闭`</$`：

```
<head>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'>
</script>
<script type='text/javascript' src='script.js'></script>
<title>LCD Display</title> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T02:33:59.193

```
 $.post("script.php",
     {textBox: textBox},
     function(data,status){}
   ); 
```

另请阅读：[http ://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# php - 检查外部数据是否已在我们的 MySQL 数据库中的最佳方法

> ID：15170017
> 
> 赞同：0
> 
> 时间：2013-03-02T02:28:51.303
> 
> 标签：php, mysql, full-text-search

我们正在寻找在 PHP/MySQL 环境中使用尽可能少的资源的数据库中开发搜索例程的最佳方法。

我们处理外部信息源，这些信息往往会不时发生微妙的变化或具有新的状态值。这意味着我们仅限于添加自己的数字键并通过常规 SQL 搜索进行搜索。

我们正在考虑使用 MD5 创建一个唯一的字符串，而不是搜索...

```
WHERE DATE = '12/12/2012 09:00' 
AND TYPE = 'new alert' 
AND loc = 'rear door' 
AND subtype = 'pir hit' 
AND lat = 39.3343 
AND lon = 145.234 
AND current STATUS = 'active' 
AND Support = 'en-route'; 
```

我们从我们感兴趣的字段中创建一个 MD5，例如 ef6d3c25ac9362413fed2b4d3f65962a，例如 12/12/2012 09:00~new alert~rear door~pir hit~-39.3343~145.234~active~en-route 然后我们可以搜索只是数据库中的这个 MD5 而不是单独的字段。

我们也有兴趣研究使用包含最新 MD5 列表的文件，而不是不断地询问数据库，因为我们最多可能有 1100 多个工作在提要中。更常见的是大约 60 个工作岗位。

我们对您认为最佳解决方案的想法和原因感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:36:24.980

我会选择 Apache Solr 作为解决方案。分面搜索将满足您的所有需求。复制/索引您的数据不会花费太多精力。我们已经在我们公司的项目中实现了这个引擎，对名称/日期/特征/供应商/分销商/等进行搜索，它就像一个魅力。虽然 md5 over 胶合字符串在一段时间以来一直是一种解决方案。无论如何，这取决于您拥有的时间以及您当前的解决方案如何处理这种情况。

# c# - 使用不显眼的 JavaScript，参数不是 null，但它的值是

> ID：15170018
> 
> 赞同：1
> 
> 时间：2013-03-02T02:28:56.810
> 
> 标签：c#, javascript, jquery, asp.net-mvc-4

当我的 JavaScript 与我的 cshtml 文件位于同一页面时，这是有效的：

```
function SaveEntity() {
    // more code here
    alert(entity.FirstName);  // this shows that entity's properties have values
    $.post('/Home/Save', { entity: entity }, SaveComplete);
} 
```

该代码现在位于单独的 Index.js 文件中。在我的控制器中，实体参数不为空，但它的所有值都是。为什么现在会发生这种情况？

控制器签名：

```
public ActionResult Save(Entity entity)
{ // method here } 
```

![在此处输入图像描述](../Images/ab753f1fc477a873c9872aa2964cff9f.png)

**编辑 - Fiddler 截图**

![在此处输入图像描述](../Images/765f14bcb7181a048afcbe2d5902a8a5.png)

![在此处输入图像描述](../Images/72490b99aafed04724111058b57c7de6.png)

**编辑**

这是由 Entity Framework 生成的 Entity 类：

```
public partial class Entity
{
    public Entity()
    {
        this.Contacts = new HashSet<Contact>();
    }

    public int EntityId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Address { get; set; }
    public string City { get; set; }
    public string State { get; set; }
    public string ZipCode { get; set; }
    public string Company { get; set; }
    public string LastModifiedUser { get; set; }
    public Nullable<System.DateTime> LastModifiedTime { get; set; }
    public string Notes { get; set; }

    public virtual ICollection<Contact> Contacts { get; set; }
} 
```

**编辑**

完整的 Index.js，带有完整的 SaveEntity() 方法：

```
var _currentEntities;

    $(function () {
        // Hide the ID column (column 1)
        $('#tableContacts').dataTable({
            "aoColumnDefs": [
                { "bSearchable": false, "bVisible": false, "aTargets": [0] }
            ],
            "bLengthChange": false, // don't show the number of records to show per page
            "bFilter": false,  // don't show the search/filter box
            "iDisplayLength": 5
        });

        $('#waitImage').hide();
        // Show the letters of the alphabet, with a link to call GetEntries() for each of them.
        for (var i = 65; i <= 90; i++) {
            $('#headerAlphabet').append('<a href=\"#\" onclick=\"GetEntries(\''
                + String.fromCharCode(i) + '\')\">'
                + String.fromCharCode(i) + '</a> ');
        }
    });

            function GetEntries(firstLetter) {
                // code here
            }

            function EntriesReceived(entities) {
                // code here
            }

            function DisplayPerson(entityId) {
                // code here
            }

        function SaveEntity() {
            // Grab our entity
            var entity;
            for (var i = 0; i < _currentEntities.length; i++) {
                if (_currentEntities[i].EntityId == $('#txtEntityId').val()) {
                    entity = _currentEntities[i];
                    break;
                }
            }

            entity.FirstName = $('#txtFirstName').val();
            entity.LastName  = $('#txtLastName').val();
            entity.Address   = $('#txtAddress').val();
            entity.City      = $('#txtCity').val();
            entity.State     = $('#txtState').val();
            entity.ZipCode   = $('#txtZipCode').val();
            entity.Company   = $('#txtCompany').val();
            entity.Notes     = $('#txtNotes').val();

            alert(entity.FirstName);

            $.post('/Home/Save', { entity: entity }, SaveComplete);
        }

            function SaveComplete(saveStatus) {
                alert(saveStatus);
            }

            function CancelChanges() {
                alert('Cancel will be done here.');
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T03:43:32.957

首先，在进行任何类型的 ajax 提交时，您希望在 Http 调试器（如 Fiddler）中查看实际请求。你想看看它是否真的发布了你认为的值。这将帮助您确定问题出在您的 javascript 中还是在服务器上。现在，你不知道。

见：[这个](http://www.wrox.com/WileyCDA/Section/id-303210.html)和[这个](http://books.google.com/books?id=JP1RbrxVti4C&pg=PT656&lpg=PT656&dq=using%20fiddler%20to%20debug%20ajax%20mvc&source=bl&ots=n_1V4nCC0S&sig=m54fUyvVQjIlwInVk8sP_QbXDb4&hl=en&sa=X&ei=8nUxUauvKoL49QTDmIDABw&ved=0CG8Q6AEwBw)

其次，您应该发布您的服务器端实体定义。

编辑：

这似乎是 jQuery 默认序列化对象的方式存在问题，该方式使用括号表示法，这不适用于默认模型绑定器。您必须使用 Dave 提到的传统：true 参数。

更多关于[这里](http://benalman.com/news/2009/12/jquery-14-param-demystified/)。以下将解决您的问题。与 true 参数一起使用的`$.param`方法将强制进行传统的序列化。

```
$.post('/Home/Save', $.param(entity, true), SaveComplete);. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T03:54:50.457

我犹豫了，b/c 我的回答没有说​​明为什么这会在 View 中起作用，但在 js 文件中会失败。但我会使用 ajax 与 post 调用来设置 json 和传统的：

```
$.ajax({
    type: 'POST',
    url: '/Home/Save',
    dataType: 'json',
    traditional: true,
    data: entity , //$.toJSON(data),
    success: function (data) {
          SaveComplete(data);
    }
}); 
```

# c# - 在数据集中存储结果的列中选择查询计数特定值

> ID：15170022
> 
> 赞同：-1
> 
> 时间：2013-03-02T02:29:23.813
> 
> 标签：c#, asp.net, sql, sql-server

我想我的答案在本节的底部。

任何帮助都会很棒谢谢。

我有一个表，其中有一个名为 Rank 的列，它可以保存 1-5 的值

我想要做的是将数据返回存储到数据集中以便稍后显示

例如

```
Rank
_____

4
3
5
4
2 
```

我现在有我的 sql 查询。

```
select rank, COUNT(*) as rankCount from Result group by rank 
```

我想展示

五级 = 1

四级 = 2

三级 = 1

二阶 = 1

一级 = 0

```
myDataSet.Table[0].Rows[0].Field<int>("rank"); ?? 
```

不知道如何做到这一点，任何帮助都会非常感谢。

同一个查询

```
select rank, COUNT(*) as rankCount from Result group by rank

myDataTable = MyDataSet.Table[0];

string rank5 = string.Empty;

Foreach(DataRow row in myDataTable.Rows){

       if(row["rank"].ToString() == "5"){
         rank5 - row["rankCount"].ToString();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:38:41.207

```
public class RankGroup
{
    public int Rank { get; set; }
    public int RankCount { get; set; }

    public override string ToString()
    {
        return string.Format("Rank Number: {0} Rank Number Count: {1}", Rank, RankCount);
    }
}

var rankGroups = myDataSet.Table[0].Rows.Cast<Row>().Select(r =>
                                    new RankGroup
                                    {
                                        Rank = r.Field<int>("rank"),
                                        RankCount = r.Field<int>("rankCount")
                                    }

foreach(var rankGroup in rankGroups)
{
    Console.WriteLine(rank);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-19T03:42:27.020

这种事情在数据库中更适合（并且更快）。所以我会这样做：

（我有一个包含类似数据的表，所以我的“targetType”等于你的“rank”。）

```
select targetType,
case targetType
when 1 then 'One'
when 2 then 'Two'
when 3 then 'Three'
when 4 then 'Four'
when 5 then 'Five'
else '' end + ' Rank' as Description,
count(1) [Count]
from Logs
where targetType between 1 and 5
group by targetType
order by 1

targetType  Description Count
1            One Rank    264
2            Two Rank    248
3            Three Rank  692
4            Four Rank   441 
```

# bash - 如何在 bash shell 中居中对齐

> ID：15170023
> 
> 赞同：1
> 
> 时间：2013-03-02T02:29:25.343
> 
> 标签：bash, shell, unix, alignment

假设我希望屏幕输出看起来像这样。

```
Ship to                            Bill to
John Smith                         John Smith
222 Address                        555 Address
Los Angeles, CA                    New York, CA 
```

如果不对空格进行硬编码，则会导致一旦第一列中条目的长度发生变化，第二列将不再对齐。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T02:37:33.857

使用 printf 的示例：

```
#!/bin/bash

st_name="John Smith"
bt_name=$st_name
st_addr="222 Address"
bt_addr="555 Address"
printf "%-20s%s\n" "Ship to" "Bill to"
printf "%-20s%s\n" "$st_name" "$bt_name"
printf "%-20s%s\n" "$st_addr" "$bt_addr" 
```

# php - 如果未设置，则重定向 $_GET['id']

> ID：15170031
> 
> 赞同：0
> 
> 时间：2013-03-02T02:30:25.343
> 
> 标签：php, pdo

我遇到了关于正则表达式的奇怪情况。我想先检查是否设置了 ID，如果没有，则重定向到`index.php`

这是**索引.PHP**

```
$title = "This is a title";
$id = "5";
$queryc = $db->prepare("SELECT * FROM categories WHERE id = :id");
$queryc->bindParam(':id', $id, PDO::PARAM_INT); 
$queryc->execute();

/*** fetch the results ***/
$resultc = $queryc->fetchAll();
$count = count($resultc);
if ($count > 0) 
{
foreach($resultc as $rowc)

    {
    $cat_name = htmlentities($rowc['cat_name'], ENT_QUOTES, 'utf-8');
    $cat_name = stripslashes($cat_name);

    }
 }else {
 //redirect is a function 
 redirect("index.php");
 }
 echo "  
 <td width='57%' height='126' class='bord'  ><a href='$cat_name-$id.htm'  

 class='title_style'>" . $title . "</a><br>"; 
```

`$cat_name`可以有两个用空格分隔的单词，或者除了一些字符外，它也可以有重音字符。为此，我使用了**.htaccess**

```
 Options +FollowSymlinks
  RewriteEngine on
  RewriteRule ^([^!@#$%^&*(){}]+)-(\d+)\.htm$   file.php?id=$2 [L] 
```

在结果显示的**file.php**中，我想确保设置了 $id

```
if( isset($_GET['id']) )
{

$id = (int) $_GET['id'];

    if( $id == 0 )
    {
        redirect("index.php");
        exit;   
    }

}   
else
{
redirect("index.php");
    exit;
} 
```

在浏览器中，它看起来像这样： **mydomain.com/auto auction-5.htm**

**我的问题是：（** `$cat_name = auto auction;`注意空格）它不起作用，但如果`$cat_name = autoauction;`没有空格它可以工作。

有空间时如何让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:07:54.420

您的查询有特殊的字符（空格），女巫会导致浏览器先对您的查询进行编码然后发送。要克服这种情况，您必须首先使用[urldecode](http://www.php.net/manual/en/function.urldecode.php)对其进行解码。

# django - ManyToManyField 的 Django OneToOneField 子集

> ID：15170032
> 
> 赞同：0
> 
> 时间：2013-03-02T02:31:03.220
> 
> 标签：django, model, many-to-many, subset, one-to-one

基本上我正在写一个网站来模拟运动队，我有两个模型，球员和球队。一个 Team 与 player 有 ManyToManyField 关系，还有一个代表队长的 OneToOneField 应该仅限于团队中的玩家（即你不能有一个不是玩家之一的队长）。

```
class Player(models.Model):
    name = models.CharField()
    .....

class Team(models.Model):
    players = models.ManyToManyField(Player)
    captain = models.OneToOneField(Player)
    .... 
```

基本上我想知道什么是限制 OneToOneField 的最佳方法，队长，只选择球队中的一名球员。

我试过了

```
limit_choices_to={'team_set__players__name__icontains':""} 
```

作为一个 kwarg，我认为唯一可行的方法是在船长字段上使用自定义验证器来进行数据库查找，但肯定有更好的方法吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T06:45:04.057

您需要覆盖模型`clean`上的方法`Team`。看看[文档](https://docs.djangoproject.com/en/1.5/ref/models/instances/#django.db.models.Model.clean)。

```
from django.core.exceptions import ValidationError

class Team(models.Model):
    def clean(self):
        if self.captain not in self.players.all():
             raise ValidationError("Captain must be already be a player") 
```

在模型上运行`clean`时会自动调用您的will 方法。`is_valid`

# c++ - Windows：如何以编程方式截取窗口的屏幕截图？

> ID：15170040
> 
> 赞同：0
> 
> 时间：2013-03-02T02:32:49.973
> 
> 标签：c++, windows, winapi, bitmap, screenshot

我正在尝试使用 Windows API 对窗口进行屏幕截图。这是我当前的代码：

```
//Grab the window
HWND window = me;//GetForegroundWindow();
HDC context = GetDC(window);
RECT windowRect;
GetWindowRect(window, &windowRect);
int w = windowRect.right-windowRect.left;
int h = windowRect.bottom-windowRect.top;

//Copy the data
for (int y=0;y<h;y++)
    for (int x=0;x<w;x++)
    {
        COLORREF color = GetPixel(context, x,y);
        std::cout<<color<<std::endl;
    } 
```

宽度和高度正确返回（以及窗口位置），但颜色始终为 0xFFFFFF（白色）。

看起来它应该相当容易，因为在窗口中截取窗口的屏幕截图很简单`alt`+ `shift`+`Print Screen`

# php - 分别从两个单独的 MySQL 表中删除信息？

> ID：15170041
> 
> 赞同：0
> 
> 时间：2013-03-02T02:32:53.563
> 
> 标签：php, mysql, sql

我正在制作这个类似播客共享的网站，用户可以在其中上传音频播客，如果他们登录到管理页面，则可以编辑每个标题和每个 URL，并删除任何播客。这是我的代码，稍后我将解释我的错误：

```
 <li><form action="admin.php" method="POST"><input type="submit" name="1" value = "Insects and Plants" /><input type="submit" name="2" value = "Dr. Seuss" /></forM>
    <li><p><?php
    function disp($titid,$titol,$aid){

            if($_GET['del']){
            $delete_id=$_GET['del'];
            mysql_query("DELETE FROM `$titid` WHERE `$titid`.`inid` = $delete_id");
            header("location: admin.php");

            }
    echo "<a name='$aid'><h3>" . $titol . "</h3></a>";
    $result=mysql_query('SELECT * FROM `'.$titid.'` ORDER BY inid ASC');
            while($row=mysql_fetch_array($result))
            {
            $title = $row['title'];

            $url=$row['url'];
            $id = $row['inid'];
            echo '<div class="inneredit">';
            echo $title . '</br>';
            echo $url . '</br>'.$id.'</br>';

                    echo "<form action='admin.php' method='POST'><input type='text' name='nameedit".$id."' /><input type='submit' name='nameit$id' value='Edit Name' /></form>";
            echo "<form action='admin.php' method='POST'><input type='text' name='urledit".$id."' /><input type='submit' name='redit$id' value='Edit URL' /></form>";
            echo "<input type='button' id='delete' value='Delete Podcast' onclick='return Deleteqry($id)' />";
            echo "</div>";
            if(isset($_POST['urledit'.$id]));
                    if(isset($_POST['redit'.$id]))
                    {
                        $newd = $_POST['urledit'.$id];

                        mysql_query("UPDATE `$titid` SET url = '$newd' WHERE $titid.inid = $id ");
                        header("location: admin.php");
                    }
                                    if(isset($_POST['nameit'.$id]))
                    {
                        $newd = $_POST['nameedit'.$id];

                        mysql_query("UPDATE `$titid` SET title = '$newd' WHERE $titid.inid = $id ");
                        header("location: admin.php");
                    }
            }

            }
            if(isset($_POST['2'])){
            disp("DrSeuss","Dr. Seuss","Seussa");

            } else {
            disp("insects","Insects and Plants","Insectsa");
    }
            ?>
    <script>
            function Deleteqry(id)
            { 
              if(confirm("Are you sure you want to delete this audio file?")==true)
                       window.location="admin.php?del="+id;
                return false;
            }

    </script>

            ?> 
```

所以现在当我在选择“博士”后单击删除时。Seuss' 它删除了播客（具有相同的 id），但在 Insects 表中，而不是 Dr. Seuss 表中。任何人都可以帮助如何帮助 PHP 区分这两个表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:49:57.907

看看你的 js 函数告诉我你没有设置 $_POST['2'] ，所以你在 DrSeuss 上的 if 条件不会执行。

# hibernate - 批量插入时，某一行出错时如何继续插入其他行

> ID：15170049
> 
> 赞同：2
> 
> 时间：2013-03-02T02:35:27.087
> 
> 标签：hibernate, batch-processing

在我的代码中，我正在执行批量插入。例如，认为我有五行要插入，其中一个在插入时失败。然后休眠防止插入所有行。
就我而言，我想插入其他四个不包含错误的记录。这在 Hibernate 中可能吗？
以下是我的代码的简化版本。

```
void save() {
  Session session1 = HibernateUtil.getSessionFactory().openSession();
  Transaction transaction = session1.beginTransaction();

  for (int i = 0; i < 5; i++) {
    BatchSizeConf r = new BatchSizeConf();//This is my entity
    r.setId(i);
    r.setDispatchType("Disp");
    r.setBatchSize(500);
    Serializable z = session1.save(r);
    System.out.println(z);//prints ids
  }

  session1.flush();
  session1.clear();
  session1.getTransaction().commit();
  session1.close();
} 
```

**编辑**：

* * *

根据下面的答案，我更改了代码并解决了我的主要问题。现在我的代码是这样的。

```
void save() {
  for (int i = 0; i < 5; i++) {
    Session session1 = HibernateUtil.getSessionFactory().openSession();
    Transaction transaction = session1.beginTransaction();

    BatchSizeConf r = new BatchSizeConf();//This is my entity
    r.setId(i);
    r.setDispatchType("Disp");
    r.setBatchSize(500);

    try {
      session1.save(r);
      transaction.commit();
    } catch (HibernateException e) {
      System.out.println("Failed: " + i);
    }

    session1.flush();
    session1.clear();
    session1.close();
  }
} 
```

我现在还有两个问题。

1.  可以像上面那样创建多个会话对象吗？（我有超过 100000 条记录。）
2.  我需要调用`flush()`,`clear()`和`close()`上述方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:52:17.593

这是不可能的，事务将被任何异常标记为回滚。

为什么不将行切成块并为每个块设置单个事务？

看看这个文档[transactions-demarcation-exceptions](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#transactions-demarcation-exceptions)

> 如果 Session 抛出异常，包括任何 SQLException，立即回滚数据库事务，调用 Session.close() 并丢弃 Session 实例。Session 的某些方法不会使会话保持一致状态。Hibernate 抛出的任何异常都不能被视为可恢复的。通过在 finally 块中调用 close() 确保 Session 将被关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T09:00:07.947

你可以做这样的事情

```
Transaction tx = session.beginTransaction();
...
for (BatchSizeConf  b: BatchSizeConfList) {
    ...
    tx.commit();
} 
```

参考[Avaoid 交易异常](https://stackoverflow.com/questions/10909827/why-org-hibernate-transactionexception-in-hibernate-and-avoid)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-31T03:49:18.837

是的.. 我们可以做.. 看到这个代码。

```
public List<RecordErrorStatus> persistBatch(ArrayList<?> domainRecords) {

        List<RecordErrorStatus> fedRecordErrorStatusList = new ArrayList<RecordErrorStatus>();
        Session session = getSession();
        Transaction tx = session.beginTransaction();
        long rowCount = 0;
        boolean insertionFailed=false;
        for (Object object : domainRecords) {
            rowCount++;
            try {
                System.out.println("Inserting Record:"+rowCount+object);
                session.persist(object); // Persist the given transient instance
                if (! this.rollBackOnFail) {
                    tx.commit();
                    tx = session.beginTransaction();
                }
            } catch (Exception e) {
                e.printStackTrace();
                RecordErrorStatus feedRecordStatus = new RecordErrorStatus();
                feedRecordStatus.setRowNumber(String.valueOf(rowCount));
                StringWriter sw = new StringWriter();
                e.printStackTrace(new PrintWriter(sw));
                String exceptionAsString = sw.toString();
                feedRecordStatus.setErrorDescription(exceptionAsString);
                fedRecordErrorStatusList.add(feedRecordStatus);
                insertionFailed =true;
                tx.rollback(); //Rollback the current record..
                session.clear();//Clear the seesion.. If not, throws Nested Transaction not allowd...
                tx = session.beginTransaction();//Start again..
            } 
        }
        if (this.rollBackOnFail && insertionFailed && ! tx.wasRolledBack()) {
            tx.rollback();
            System.out.println("Rollback");
        } 
        return fedRecordErrorStatusList;
    } 
```

# grep - 由引用者驱动的总页面浏览量到一页（shell）

> ID：15170052
> 
> 赞同：0
> 
> 时间：2013-03-02T02:35:37.487
> 
> 标签：grep, tcsh, uniq, openbsd, access-log

拥有`combined` `access_log`nginx 或 apache 标准格式的日志文件，您将如何在 UNIX shell 中计算给定引用者曾经带来的每个访问者（即 IP 地址）的访问次数或页面浏览量（即总请求）？

换句话说，每个访问者在另一个站点上找到指向您的站点的链接的所有请求的数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:35:37.487

我能想到的最好的片段如下：

```
fgrep http://t.co/ /var/www/logs/access.log | cut -d " " -f 1 | \
fgrep -f /dev/fd/0 /var/www/logs/access.log | cut -d " " -f 1 | sort | uniq -c 
```

这是做什么的？

我们首先`http://t.co/`在日志条目中找到访问的唯一 IP 地址。（请注意，这只会计算直接来自参考的访问，而不是那些留下并进一步浏览该网站的访问。）

在获得一个 IP 地址列表之后，在某一时刻，从给定的 URL 引用，我们通过管道将这个列表传递给另一个列表`fgrep`—— `stdin`（`/dev/fd/0`一个非常低效的替代方法是`xargs -n1 fgrep access.log -e`代替`fgrep -f /dev/fd/0 access.log`）从这些地址中查找所有命中。

在第二个之后`fgrep`，我们得到了与第一步相同的 IP 地址集，但现在它们根据请求的总数重复 - 现在`sort`，，`uniq -c`完成。:)

# java - 来自我在代码中不拥有的回调的 TestNG 单元测试失败

> ID：15170055
> 
> 赞同：1
> 
> 时间：2013-03-02T02:36:09.463
> 
> 标签：java, testng, surefire

我[之前问过](https://stackoverflow.com/q/15169889/1339987)如何使线程池中的单元测试失败。

```
@Test
public void foo() throws Exception {
    ScheduledThreadPoolExecutor stpe = new ScheduledThreadPoolExecutor(1);
    stpe.submit(new Runnable() {
        @Override
        public void run() {
             // does not make this unit test fail :(
             Assert.AssertEquals(1, 2);
       }
    });
} 
```

我接受的解决方案是阻止返回`Future`并获取。但在我的实际设置中，我既不拥有线程池也不拥有提交调用——它是一个最终源自 MINA 的回调。

关于我最好的想法是搞乱全局默认异常处理程序，但看起来很笨拙。

Maven 万无一失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T06:54:22.323

我遇到了同样的问题，我的问题在这里：[TestNG Make assert in multithread way (not run in multithread)](https://stackoverflow.com/questions/16516022/testng-make-assert-in-multithread-way-not-run-in-multithread)

这是我的解决方案：

由于java通过引用传递方法的参数，所以我写了一个ResultWrapper类

```
public class ResultWrapper {

    boolean result;

    public boolean getResult()
    {
        return result;
    }

    public void setResult(boolean result)
    {
        this.result = result;
    }
} 
```

我没有做出任何断言，`public void run()`而是将结果放入 ResultWrapper：`resultWrapper.setResult(actual == expectedAssert);`

（ResultWrapper 传递给在 Constructor 中调用 Runnable 类的类）

我在这样的测试方法中断言outSide：

@测试

```
public void assign_assign_release_release() throws ClientProtocolException, IOException, InterruptedException{

        assignUntilSuccess();
        releaseUntilSuccessAndExpect(1);
        Assert.assertTrue(resultWrapper.getResult());
    } 
```

希望这会有所帮助。

# jpa - JPA live db 模式迁移支持工具？

> ID：15170056
> 
> 赞同：1
> 
> 时间：2013-03-02T02:36:15.143
> 
> 标签：jpa, migration, schema, live

有很多关于 JPA db 模式迁移和各种工具的 stackoverflow 线程。但是，在为大型数据库执行建议的脱机模式迁移时，似乎没有人甚至考虑过可能太长的服务停机时间。

所以这是我的第一个想法：

假设我想将一个 JPA 实体重构为两个 JPA 实体，即。“卡车”分为“卡车”和“引擎”（将引擎属性移动到单独的实体中）。迁移计划可能如下所示：

*   创建两个新的 JPA 实体“TruckNew”和“Engine”。
*   将访问“Truck”、“TruckNew”和“Engine”的 DAO（或其他）调整为：
    *   使用“卡车”作为后备
    *   运行一个单独的数据迁移线程，将实体从“Truck”转换为“TruckNew”和“Engine”，从而在后台进行迁移，无需停机，并且对其余应用程序透明。
*   清理东西，将“TruckNew”重命名为“Truck”

现在的问题是：是否有针对此类任务的支持工具？任何 JPA 提供程序功能至少可以完成部分工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T20:54:59.763

我看到了这个想法，它看起来可行，但将数据库克隆到migration_db 不是更好的方法。使用工具/脚本迁移您的架构，然后使用带有新代码的单元测试来测试修改。最后，将您的环境指向带有更新实体的迁移代码库的新安装。

一个缺点是未复制到克隆数据库的事务会丢失，但这也可能使用几乎任何事务数据库。

# makefile - 用 force 与 .phony 制定隐含规则

> ID：15170060
> 
> 赞同：3
> 
> 时间：2013-03-02T02:36:47.173
> 
> 标签：makefile, gnu-make

有人可以阐明这里的区别：

`$(tsdir)/proj`有先决条件`$(tsdir)/proja`和`$(tsdir)/projb`. 我希望每次必须构建时都调用`proja`'s 和's makefile 。如果或已经过时并且被更新了，那么它们的makefile将分别触及和。如果这些文件比 更新，则重建 proj。`projb``proj``proja``projb``$(tsdir)/proja``$(tsdir)/projb``$(tsdir)/proj`

我通过使用下面的代码和`FORCE`目标来完成这项工作。如果我尝试切换到使用`.PHONY`目标，这将不起作用。我更喜欢`.PHONY`这样做，因为这被认为是更“正确”的方式。但它不起作用，我不知道为什么。`proja`'s 和`projb`'s makefiles 不会被`.PHONY`目标调用，而是`proj`被重建。

我正在使用 GNU make 3.81。

谢谢纳楚姆

```
$(tsdir)/proj: $(tsdir)/proja $(tsdir)/projb
...

$(tsdir)/%: FORCE  
    make -C $(prereqdir)/$*

FORCE:

#or

$(tsdir)/proj: $(tsdir)/proja $(tsdir)/projb
...

.PHONY: $(addprefix $(tsdir)/, $(projects))

$(tsdir)/%:  
    make -C $(prereqdir)/$* 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T12:27:20.890

`.PHONY`目标应该代表任务，而不是真实文件，其中隐式规则搜索仅适用于文件。因此，无法使用隐式规则构建虚假目标。

来自[Phony Targets](http://www.gnu.org/software/make/manual/make.html#Phony-Targets)章节：

> 由于它知道虚假目标不会命名可以从其他文件重新制作的实际文件，因此`make`跳过对虚假目标的隐式规则搜索

在您的情况下，我将只使用显式规则，可能使用[静态模式](http://www.gnu.org/software/make/manual/make.html#Static-Pattern)：

```
.PHONY: $(addprefix $(tsdir)/, $(projects))

$(addprefix $(tsdir)/, $(projects)) : $(tsdir)/% :  
    make -C $(prereqdir)/$* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:15:31.700

我怀疑您可以通过向（真实）时间戳文件添加虚假*依赖项来获得所需的结果，该文件已从主项目**proj*中删除。

```
.PHONY: phony
phony: ; : $@

ts := $(addprefix $(tsdir)/, $(projects))

${ts} : $(tsdir)/%: phony
    make -C $(prereqdir)/$*

$(tsdir)/proj: $(tsdir)/proja $(tsdir)/projb
... 
```

# php - 为什么我的提交表单会将我带到我的 php 页面？

> ID：15170067
> 
> 赞同：0
> 
> 时间：2013-03-02T02:38:07.290
> 
> 标签：php, javascript, jquery, ajax, forms

（我没有意识到我之前已经发布的帖子可以编辑并重新打开。对这个过程感到困惑......）

当我单击发送表单时，电子邮件已正确发送，但随后我被发送到显示数字 0 的 php 页面。我不明白为什么会发生这种情况。这是（大部分）完整的代码：

```
<form id="contactForm" method="post" action="js/formCheck.php">
    <div class="formCol">
        <label>Email:</label>
        <input type="email" id="formEmail" name="email" autocomplete="off" placeholder="Your email address..." required/>
    </div>
    <div class="formCol midCol">
        <label id="floatMsg">Message (350 chars):</label>
        <textarea id="formMessage" name="message" rows="5" cols="40" maxlength="350" placeholder="What have you got to say?" required></textarea>

    </div>
    <div class="formCol lastCol">
        <input type="submit" class="submit-btn" name="submit" value="Send" />
    </div>
</form> 
```

...脚本

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<!--[if lt IE 9]><script src="js/modernizr.custom.js"></script><![endif]-->
<script src="js/jquery.flexslider-min.js"></script>
<script src="js/functions.js"></script>
<script>
    $(document).ready(function() {
        $('#form').ajaxForm(function() {
            alert("Thank you for your comment! I will receive it shortly and get back to you as soon as possible.");
            document.getElementById("form").reset();
        });

    });
</script> 
```

发送电子邮件 (PHP)

```
if (isset($_POST['submit'])) {
    $email = htmlspecialchars($_POST['email']);
    $comment = htmlspecialchars($_POST['message']);

    /* Sending Email */
    $from_add = "Visitor";
    $to_add = "user@email.com";
    $subject = "The_Message_Subject";
    $message = "
        Message Information
        Email = $email
        Message = $comment";

    $headers = "From: $from_add \r\n";
    $headers .= "Reply-To: $from_add \r\n";
    $headers .= "Return-Path: $from_add \r\n";
    $headers .= "X-Mailer: PHP \r\n";

    mail($to_add, $subject, $message, $headers);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T02:40:05.977

`return false`表单重置后添加。表单 id`contactForm`也不只是`form`.

```
<script>
    $(document).ready(function() {
        $('#contactForm').ajaxForm(function() {
            alert("Thank you for your comment! I will receive it shortly and get back to you as soon as possible.");
            document.getElementById("form").reset();
            return false;
        });
    });
</script> 
```

# jquery - jQuery检查鼠标是否结束

> ID：15170073
> 
> 赞同：0
> 
> 时间：2013-03-02T02:38:36.493
> 
> 标签：jquery

我需要帮助让 jQuery 检查鼠标是否在元素上。

我需要它像导航一样工作：http: [//mashable.com](http://mashable.com)。

我有这个：

```
<div id="main_nav">
  <ul>
<li href="#tab1">Nav Tab 1</li>
<li href="#tab2">Nav Tab 2</li>
  </ul>
</div>
<div id="main_nav_expansion">
  <ul class="navtab" id="tab1">
    <li>Submenu Title Here
   <ul>
     <li>Sublink Option</li>
     <li>Sublink Option</li>
   </ul>
</li>
  </ul><!-- end navtab 1 -->
  <ul class="navtab" id="tab2">
    <li>Submenu Title Here
   <ul>
     <li>Sublink Option</li>
     <li>Sublink Option</li>
   </ul>
</li>
  </ul><!-- end navtab 2 -->
 </div> 
```

我编写了这个 jQuery，但是当您将鼠标移出“Nav Tab 1”或“Nav Tab 2”时，我无法让 ul.navtab 保持打开状态。我试图在回调函数中编写条件语句来检查鼠标是否在元素上，但它不起作用。

这是 jQuery 代码：

```
jQuery(document).ready(function(){

   $('ul.navtab').hide();

   $('#main_nav ul li').hover(function(){
   $('#main_nav ul li.active').removeClass('active');
   $(this).addClass("active");
   var activeNavTab = $(this).attr("href");
   $(activeNavTab).addClass("active").slideDown();
   },function(){
   if($("ul.navtab").is(":hover")){
   $("ul.navtab").show();
   }else{
      $("ul.navtab").slideUp();
      $('#main_nav ul li.active').removeClass('active');
   }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:54:14.517

你可以试试这个：

```
jQuery(document).ready(function () {

$('ul.navtab').hide();

   $('#main_nav ul li').hover(function () {
      $('#main_nav ul li.active').removeClass('active');
      $(this).addClass("active");
      var activeNavTab = $(this).attr("href");
      $(activeNavTab).siblings().removeClass("active").hide();
      $(activeNavTab).addClass("active").slideDown();
  });
  $('.navtab').on({
    mouseleave: function(){
    $('.active').removeClass('active');
    $('this').fadeOut();
    }
  });
}); 
```

我认为不需要回调。

[**结帐最后的小提琴。**](http://jsfiddle.net/YsNCB/5/)

# javascript - Toggle 不适用于与 show 相同的元素

> ID：15170077
> 
> 赞同：1
> 
> 时间：2013-03-02T02:38:45.830
> 
> 标签：javascript, jquery

我正在尝试使用 JQuery 切换，因此当用户单击信息图标时，会显示/隐藏包含项目信息的隐藏 div。出于某种原因，它对我不起作用。

在尝试调试时，我注意到 show() 正确显示了我想要切换的目标元素。但是，当我替换`show()`为 时`toggle()`，它不起作用并且不返回任何错误。

我想知道是否有人可以帮助我确定此问题的原因。

我的标记

```
<div class="option">    
    <div class="prod-text">Toy Whistle </div>
    <div>
        <img class="info-icon" src="Info-icon.png">
    </div>
    <div class="option-info" style="display:none;">
        <div>
            <div class="price-text">Price: $100</div>
            <div class="prod-id-text">Item Number: 231912</div>
            <div class="quantity-text">Quantity: 72</div>
        </div>
    </div>
</div> 
```

jQuery（不起作用）

```
$(".info-icon").click(function(){
    $(this).parent().parent().find('.option-info').toggle();
}); 
```

jQuery（有效！）

```
$(".info-icon").click(function(){
    $(this).parent().parent().find('.option-info').show();
}); 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T02:53:39.487

也许单击事件处理程序被绑定了两次，因此每次单击都会触发两次。在这种`show()`情况下可以正常工作，但是`toggle()`每次单击时都会显示然后立即隐藏元素。试试这个：

```
$(".info-icon").click(function(){
    console.log('click handler fired');
    $(this).parent().parent().find('.option-info').toggle();
}); 
```

并在启用 Web Inspector 或 Firebug 的情况下运行它，以查看每次点击记录了多少消息。

# ruby - 基本 Ruby 获取.chomp

> ID：15170081
> 
> 赞同：1
> 
> 时间：2013-03-02T02:39:38.113
> 
> 标签：ruby

我是编程新手，我正在尝试回答这个基本问题。

编写一个程序，询问一个人最喜欢的号码。让你的程序在数字上加一，然后将结果建议为更大更好的最喜欢的数字。

这是我必须要做的，但它不会转换为数字。

```
 puts "What is your favorite number?"
    number = gets.chomp
    number = number.to_i + 1
    puts "I suggest " + number + " as a bigger and better number" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-02T02:45:52.287

更仔细地查看您得到的错误：

```
What is your favorite number?
42
number.rb:4:in `+': can't convert Fixnum into String (TypeError)
    from number.rb:4:in `<main>' 
```

第 4 行是：

```
puts "I suggest " + number + " as a bigger and better number" 
```

问题是Ruby 不会隐式转换`number`为字符串（例如`"foo" + 42`在Ruby 中无效）。有几个解决方案：

1.  `to_s`在连接之前调用`number`将其转换为字符串：

    ```
    puts "I suggest " + number.to_s + " as a bigger and better number" 
    ```

2.  使用[Ruby 字符串插值](http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Literals#Interpolation)：

    ```
    puts "I suggest #{number} as a bigger and better number" 
    ```

选项 2 更惯用，我建议使用它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-06T03:35:30.980

与 ruby​​ 中的许多其他问题一样，有很多方法可以做到这一点....如果没有上面写的三个解决方案，还有两个：

```
puts "What is your favorite number?"
number = gets.chomp.to_i
puts "I suggest %d as a bigger and better number" % [number + 1] 
```

一个几乎相同：

```
puts "What is your favorite number?"
number = gets.chomp.to_i
num = number + 1
puts "I suggest %d as a bigger and better number" % [num] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T03:55:17.160

你可以这样做：

```
print 'What is your favorite number? '
number = gets.chomp
puts "I suggest #{number.to_i + 1} as a bigger and better number" 
```

关于代码的解释不多，但需要考虑的事情很少：

1.  如果您要呈现纯文本，请使用`'text'`而不是`"text"`. “在双引号的情况下，Ruby 做了更多的工作。首先，它查找替换（以反斜杠字符开头的序列）并用一些二进制值替换它们” - Programming ruby​​ 1.9.3
2.  总是尽量减少代码行数。

这些东西在这里真的很微不足道，但是当你编写一个大程序、网页等时，它真的很重要。

# prolog - Prolog - 评估代数表达式

> ID：15170085
> 
> 赞同：0
> 
> 时间：2013-03-02T02:39:53.657
> 
> 标签：prolog

这是一个我遇到问题的测试复习问题。您如何编写一种方法来使用运算符“加号”、“减号”和“次”来评估代数表达式。以下是一些测试查询：

简化（表达式、结果、列表）

`?- simplify(plus(times(x,y),times(3 ,minus(x,y))),V,[x:4,y:2]). V = 14`

`?- simplify(times(2,plus(a,b)),Val,[a:1,b:5]). Val = 12`

`?- simplify(times(2,plus(a,b)),Val,[a:1,b:(-5)]). Val = -8`

我得到的只是这些示例查询，没有其他解释。但我很确定该方法应该剖析第一个参数，它是代数表达式，用 x 和 y 代替它们在第三个参数（列表）中的值。第二个参数应该是计算表达式后的结果。

我认为其中一种方法应该是简化（V，Val，L）：-成员（V：Val，L）。理想情况下，应该只再有 4 种方法......但我不知道该怎么做。

到目前为止我有什么，但我不知道身体应该是什么：

```
simplify(Var, Value, Lst) :- member(Var:Value, Lst).
simplify(plus(Var), Value, Lst) :- 
simplify(minus(Var), Value, Lst) :-
simplify(times(Var), Value, Lst) :- 
```

我不确定第五种方法应该是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T04:55:35.297

我怀疑你已经让自己被复杂的例子蒙蔽了。您只是缺少一个基本案例，所有归纳案例都非常简单。你只需要一些更简单的例子。首先，这应该返回什么？

```
?- simplify(3, Val, []). 
```

是的，`Val = 3`。因此，让我们添加缺少的基本情况：

```
simplify(Num, Num, _) :- number(Num). 
```

归纳案例的关键见解是`plus`,`minus`并且`times`都具有相同的递归二进制结构。您可以递归地应用`simplify`到双方以实现对事物的评估。让我们尝试另一个简单的例子：

```
?- simplify(times(3, 3), Val, []). 
```

我们想要`Val = 9`. 我们需要做的就是弄清楚左右值是什么并将它们相乘。所以它最终看起来像这样：

```
simplify(times(Left, Right), Value, Lst) :-
  simplify(Left, LeftVal, Lst),
  simplify(Right, RightVal, Lst),
  Value is LeftVal * RightVal. 
```

您希望传递`Lst`给递归调用，以便它们也可以查找变量。从这里你应该能够推断出`plus`和`minus`情况的样子。你真的不应该需要看起来像这样的案例，`plus(X)`因为它只有一个论点。

Prolog 的神奇之处在于，这实际上就是你所要做的。只要你有简单的例子，递归就会处理你的复杂例子。试试看。:)

希望这可以帮助！

# c++ - 在函数调用之后，以下 c++ 函数中的数组重新分配似乎已被忽略。

> ID：15170088
> 
> 赞同：0
> 
> 时间：2013-03-02T02:40:08.860
> 
> 标签：c++, arrays, function, parameters

```
void func(int* array)
{
    array=new int[5];
    for (int i=5; i>0; i--)
        array[5-i]=i;
}
int main()
{
    int array[5]= {1,2,3,4,5};
    func(array);
    cout<<array[1]<<endl;
} 
```

我认为这与作为常量指针的数组有关。c++ 究竟如何处理此代码以及函数内分配的动态内存会发生什么情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T02:52:50.710

*当您通过value*将数组作为参数传递给函数时，它会衰减到指向第一个元素的指针，然后通过*value*传递。因此，您在函数`func`中收到的是数组第一个元素地址的*副本*。在函数中，您只需更改地址，这不会更改`main()`函数中的数组。无论您对`array`in执行什么操作`func()`，**都只**针对该功能。它是这样的：

```
void f(int x)
{
     x= 100; //modifying the copy, not the variable in main()
}
int main()
{
     int value = 1000;
     f(x); //pass by value, means pass a copy!
} 
```

在这种情况下，您正在更改`x`in的值`f()`。同样，在您的情况下，您正在更改`array`. **由于`array`是一个指针，因此您通过为其分配新内存来使其指向不同的位置。** 每个更改都是函数的本地更改。

另请注意，由于您将内存分配给变量`array`，并且不释放它，因此您的程序会**泄漏内存**。为了避免这种情况，您必须编写：

```
 delete [] array; 
```

在从函数返回之前。同样，这`delete`不会`array`在`main()`.

顺便说一句，如果你想改变数组中的元素`main()`，那么你应该这样做：

```
void func(int* array)
{
    //array=new int[5]; //just comment this
    for (int i=5; i>0; i--)
        array[5-i]=i; //now array points to the same memory 
                      //where main()'s array is in the memory.
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T02:45:48.510

这是问题所在：

```
array=new int[5]; 
```

这个赋值意味着传递的参数不会被修改。在此分配之后，`array`指向新分配的内存块，而不是`array`声明的 in （并作为参数`main`传递给）。`func`修改的是这个新分配的数组——当函数返回时，它被丢弃了。更糟糕的是，您有内存泄漏。

# c - 另一个变量中的 C 编程变量

> ID：15170089
> 
> 赞同：0
> 
> 时间：2013-03-02T02:40:09.860
> 
> 标签：c, sockets, variables

我有一个问题，我需要向套接字发送一些数据，数据存储在一个 char 变量中（我们称之为变量 A），但是这个数据中的一些东西正在改变，是否可以插入另一个变量（变量B）在这个变量中并发送变量A以及变量B所做的更改？

变量 B：

```
char B[] = "inserted by the user" 
```

变量 A：

```
char A[] = "soemthing '%Variable B' something else" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T02:46:04.130

尝试

```
char * A = malloc(strlen(B) + 40); /* You can tot up the additional bit here for 
                                    the rest of A including the null */
sprintf(A, "something '%s' something else", B); 
```

# node.js - socket.io 和 node.js 的性能是否会在 heroku 的服务器上受到影响（没有 websocket）？

> ID：15170090
> 
> 赞同：0
> 
> 时间：2013-03-02T02:40:19.503
> 
> 标签：node.js, heroku, socket.io

由于heroku服务器不支持websocket，是否意味着如果我们在其上运行一个node.js + io.socket应用程序，期望有很多并发用户，当有更多用户时会发生一些效果？

我正在构建一个多用户应用程序，突然注意到 heroku 使用的是长轮询而不是 websockets。我看不到我的原型有太多延迟，但我很担心，我应该在支持真正 websockets 的服务器上构建我的应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:45:23.613

> ...我应该在支持真正 websockets 的服务器上构建我的应用程序吗？

大概。

[http://websocket.org/quantum.html](http://websocket.org/quantum.html)说“HTML5 Web Sockets 可以提供 500:1 或 - 取决于 HTTP 标头的大小 - 甚至可以减少 1000:1 不必要的 HTTP 标头流量和 3:1 减少在潜伏期。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:08:37.703

长轮询陈旧且效率低下，正在慢慢被套接字取代。每个服务器都支持它们。大多数最新的浏览器也已经添加了支持。Heroku 也会这样做，希望很快。你可以继续你的原型，也许在你完成之前会添加 websocket 支持。

[这里](https://stackoverflow.com/questions/10028770/html5-websocket-vs-long-short-polling)给出了websocket的优势

# geocoding - 有人知道离线反向地理编码的好方法吗？

> ID：15170091
> 
> 赞同：3
> 
> 时间：2013-03-02T02:41:12.773
> 
> 标签：geocoding, offline, reverse-geocoding

我需要进行离线反向地理编码，意味着作为 cron-jobs 运行。反向编码器应该为城市、州提供数百万条“记录”。

有哪些服务（付费或免费）可以“做到”？

我看过[http://www.geonames.org/](http://www.geonames.org/)，但这并不是我所需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T14:57:14.333

获取所有城市的表格坐标（以及城市所在的州）。对于任何坐标，选择最近的城市。为了有效使用，请将表编码为 R 树。

有关 R-tree 等的链接，请参阅[没有 Web 访问的反向地理编码](https://stackoverflow.com/questions/1425149/reverse-geocoding-without-web-access)

从地名中获取城市表，请参阅[给定纬度/经度坐标，我们如何找出城市/国家？](https://stackoverflow.com/questions/6159074/given-the-lat-long-coordinates-how-can-we-find-out-the-city-country)

# java - 如何计算提问的数量？

> ID：15170095
> 
> 赞同：2
> 
> 时间：2013-03-02T02:41:50.780
> 
> 标签：java, android, android-sqlite

我有这个活动，有问题和 4 个可能的答案，在每个用户回答后，它会重新加载另一个问题。我在右下角放置了一个 textView，起始值为`1/10`( `rezultat.setText(counter+"/10");`)。我想在每个问题之后将该值增加到 2/10、3/10 等等，但我不知道在哪里放置 counter++；在我的代码中，我到处尝试。这是我的代码：

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.Typeface;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.TextView;

public class Kviz extends Activity implements View.OnClickListener{

    Runnable mLaunchTask = new Runnable() {
        public void run() {
            startActivity(getIntent());
        }
     };
     Runnable mLaunchTaskFinish = new Runnable() {
         public void run() {
            finish();
         }
      };

    Button bIzlazIzKviza, bOdgovor1, bOdgovor2, bOdgovor3, bOdgovor4;
    TextView question, proba, rezultat;
    int counter = 1;

    private class Answer {
        public Answer(String opt, boolean correct) {
            option = opt;
            isCorrect = correct;
        }

        String option;
        boolean isCorrect;
    }
    Handler mHandler = new Handler();

    final OnClickListener clickListener = new OnClickListener() {
        public void onClick(View v) {

            Answer ans = (Answer) v.getTag();
            if (ans.isCorrect) {
                mHandler.postDelayed(mLaunchTaskFinish, 1200);
                mHandler.postDelayed(mLaunchTask,1000);
                Intent i = new Intent("rs.androidaplikacijekvizopstekulture.TACANODGOVOR");
                startActivity(i);

            }else{
                mHandler.postDelayed(mLaunchTaskFinish, 2200);
                mHandler.postDelayed(mLaunchTask,2000);
                Intent i = new Intent("rs.androidaplikacijekvizopstekulture.POGRESANODGOVOR");
                startActivity(i);
                }
            }
     };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);   //full screen
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.kviz);

        Typeface dugmad = Typeface.createFromAsset(getAssets(), "Bebas.ttf");
        Typeface pitanje = Typeface.createFromAsset(getAssets(), "Lobster.ttf");
        bIzlazIzKviza = (Button) findViewById(R.id.bIzlazIzKviza);
        rezultat = (TextView) findViewById(R.id.tvBrojPitanja);
        question = (TextView) findViewById(R.id.tvPitanje);
        bOdgovor1 = (Button) findViewById(R.id.bOdgovor1);
        bOdgovor2 = (Button) findViewById(R.id.bOdgovor2);
        bOdgovor3 = (Button) findViewById(R.id.bOdgovor3);
        bOdgovor4 = (Button) findViewById(R.id.bOdgovor4);
        bOdgovor1.setTypeface(dugmad);
        bOdgovor2.setTypeface(dugmad);
        bOdgovor3.setTypeface(dugmad);
        bOdgovor4.setTypeface(dugmad);
        bIzlazIzKviza.setTypeface(dugmad);
        rezultat.setTypeface(dugmad);
        question.setTypeface(pitanje);

        TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        try{    //Pokusava da otvori db
        mDbHelper.open();  //baza otvorena

        Cursor c = mDbHelper.getTestData();

        question.setText(c.getString(1));

        List<Answer> labels = new ArrayList<Answer>();

        labels.add(new Answer(c.getString(2), true));
        labels.add(new Answer(c.getString(3), false));
        labels.add(new Answer(c.getString(4), false));
        labels.add(new Answer(c.getString(5), false));

        Collections.shuffle(labels);

        bOdgovor1.setText(labels.get(0).option);
        bOdgovor1.setTag(labels.get(0));
        bOdgovor1.setOnClickListener(clickListener);

        bOdgovor2.setText(labels.get(1).option);
        bOdgovor2.setTag(labels.get(1));
        bOdgovor2.setOnClickListener(clickListener);

        bOdgovor3.setText(labels.get(2).option);
        bOdgovor3.setTag(labels.get(2));
        bOdgovor3.setOnClickListener(clickListener);

        bOdgovor4.setText(labels.get(3).option);
        bOdgovor4.setTag(labels.get(3));
        bOdgovor4.setOnClickListener(clickListener);

        rezultat.setText(counter+"/10");
        }

        finally{    // kada zavrsi sa koriscenjem baze podataka, zatvara db
            mDbHelper.close();
        }

        bIzlazIzKviza.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                finish();   
            }
        });
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
    }

    public void onClick(View v) {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:04:32.963

“每个用户回答它都会重新加载另一个问题”是什么意思。? 您是否对差异问题使用不同的活动？
您可以对所有问题使用相同的活动，当用户按下任何答案按钮时，只需调用一个方法

```
public void nextQuestion() {
    counter++;
    question.setText("");
    bOdgovor1.setText("");
    bOdgovor2.setText("");
    bOdgovor3.setText("");
    bOdgovor4.setText("");
    //reset your next question and all four options here
    rezultat.setText(counter + "/10");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T02:45:26.537

从这里很难测试，但看起来像是`counter++`在行前添加

```
Answer ans = (Answer) v.getTag(); 
```

应该可以正常工作，因为`counter`只要单击似乎负责回答问题的按钮，它就会增加。请记住，您还需要致电

```
rezultat.setText(counter+"/10"); 
```

再次，更新文本以反映`counter`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T15:54:54.907

稍微扩展我的问题。我确实设法用计数器类计算问题，它达到 2/10，但因为我在每个问题后重新加载我的活动，我的 textView 也重新加载到 1/10。我认为这是我的问题的主要原因。

# lucene.net - 如何搜索所有领域？

> ID：15170097
> 
> 赞同：21
> 
> 时间：2013-03-02T02:42:01.783
> 
> 标签：lucene.net, lucene

在 Lucene 中，我们可以使用 TermQuery 来搜索带有字段的文本。我想知道如何在一堆字段或所有可搜索字段中搜索关键字？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-02T11:47:54.820

另一种方法是使用[`MultiFieldQueryParser`](http://lucene.apache.org/core/4_1_0/queryparser/index.html).

您可以提供要搜索的字段列表和查询，仅此而已。

```
MultiFieldQueryParser queryParser = new MultiFieldQueryParser(
                Version.LUCENE_41, 
                new String[]{"title", "content", "description"},
                new StandardAnalyzer(Version.LUCENE_41));

Query query = queryParser.parse("here goes your query"); 
```

这就是我使用 Java 编写的原始 lucene 库的方式。我不确定`MultiFieldQueryParser`lucene.net 中是否也可以使用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-02T03:49:06.570

两种方法

1) 索引时间方法：使用*包罗万象的*字段。这只不过是附加所有字段中的所有文本（输入文档中的总文本）并将产生的巨大文本放在单个字段中。您必须在索引时添加一个额外的字段以充当一个包罗万象的字段。

2) 搜索时方法：使用[BooleanQuery](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/BooleanQuery.html)组合多个查询，例如 TermQuery 实例。可以形成这些多个查询以覆盖所有目标字段。

文章末尾的[示例检查。](http://www.lucenetutorial.com/lucene-query-syntax.html)

如果您在运行时知道目标字段列表，请使用方法 2。否则，您必须使用第一种方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-31T23:20:21.163

[使用“ MultifieldQueryParser](http://lucene.apache.org/core/4_1_0/queryparser/index.html) ”搜索所有字段的另一种简单方法是在查询中使用**IndexReader.FieldOption.ALL**。

这是 c# 中的示例。

```
Directory directory = FSDirectory.Open(new DirectoryInfo(HostingEnvironment.MapPath(VirtualIndexPath)));

    //get analyzer
    Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_29);

    //get index reader and searcher
    IndexReader indexReader__1 = IndexReader.Open(directory, true);
    Searcher indexSearch = new IndexSearcher(indexReader__1);

    //add all possible fileds in multifieldqueryparser using indexreader getFieldNames method
    var queryParser = new MultiFieldQueryParser(Version.LUCENE_29, indexReader__1.GetFieldNames(IndexReader.FieldOption.ALL).ToArray(), analyzer);
    var query = queryParser.Parse(Criteria);
    TopDocs resultDocs = null;

    //perform search
    resultDocs = indexSearch.Search(query, indexReader__1.MaxDoc());
    var hits = resultDocs.scoreDocs; 
```

[单击此处](https://stackoverflow.com/a/10910110/284225)查看我在 vb.net 中对同一问题的先前回答

# ruby - 如何向 URL 添加参数？

> ID：15170098
> 
> 赞同：0
> 
> 时间：2013-03-02T02:42:03.227
> 
> 标签：ruby, url

我正在尝试打开多个 HTML 文档。每个站点的 URL 如下所示：

```
http://www.website.com/info/state=AL 
```

`AL`是阿拉巴马州，但因州而异。我可以创建一个包含所有两个字母组合的数组`state=('aa'..'zz').to_a`，但是如何将其输入到`AL`上面的参数中？

我希望它为所有两个字母组合提取 HTML 文档，然后我可以使用条件来清除我不想要的那些。但是我应该如何插入这两个字母组合呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T04:54:03.457

Ruby 的 URI 类很有用。它不是处理 URL 的最全功能的包——如果你需要更多，请查看[Addressable::URI](https://github.com/sporkmonger/addressable/tree/)，但它很好：

```
require 'uri'

uri = URI.parse('http://www.website.com/info')
{
  'Alabama'    => 'AL',
  'Alaska'     => 'AK',
  'Arizona'    => 'AZ',
  'Arkansas'   => 'AR',
  'California' => 'CA',
}.each_pair do |k, v| 
  uri.query = URI.encode_www_form( {'state' => v} )
  puts uri.to_s
end 
```

哪个输出：

```
http://www.website.com/info?state=AL
http://www.website.com/info?state=AK
http://www.website.com/info?state=AZ
http://www.website.com/info?state=AR
http://www.website.com/info?state=CA 
```

或者：

```
%w[AL AK AZ AR CA].each do |s| 
  uri.query = URI.encode_www_form( {'state' => s} )
  puts uri.to_s
end 
```

输出相同的东西。

# ios - iOS 沙盒 - 不能两次购买消耗品

> ID：15170105
> 
> 赞同：7
> 
> 时间：2013-03-02T02:43:01.307
> 
> 标签：ios, objective-c, app-store-connect

问题：我正在尝试使用沙盒帐户在应用程序购买中进行测试，但每次尝试购买消耗品两次时，我都会收到以下错误消息：

```
You've already purchased this In-App Purchase but it hasn't been downloaded. 
                         [Environment: Sandbox] 
```

这仅在使用 iOS < 6 时发生。我读过这可能是与沙盒相关的问题。有谁知道这种说法是否属实？

我确信正在进行以下调用以完成第一笔交易：

```
[[SKPaymentQueue defaultQueue] finishTransaction:transaction] 
```

我也试过打这个电话来冲出队列，但没有运气：

```
[[SKPaymentQueue defaultQueue]  restoreCompletedTransactions]; 
```

我还确保在测试 iAP 之前，我已退出 iTunes 商店。此外，我还检查了构建和版本号是否在 Xcode 中我的 Target 的 Summary 窗格中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:53:33.433

我有类似的情况，如果我再次尝试购买它，我会收到此消息然后崩溃。对我来说，这似乎只是一条**finishTransaction**尚未完成的消息（无论出于何种原因）。根据我的日志，它授予**SKTransactionStateFailed**更新事务，允许我重新发送**finishTransaction**。

然后我在我的应用程序中检查它实际上已经下载了数据/购买 BOOL/任何东西，并在他们需要再次下载时显示用户界面。后续下载似乎没有问题。

为了防止崩溃，我包括：

```
[[SKPaymentQueue defaultQueue] removeTransactionObserver:self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T00:26:27.017

问题可能是您的代码中缺少这一行

`[[SKPaymentQueue defaultQueue] addTransactionObserver:self];`

几天前我得到了同样的错误。这条线为我解决了这个问题。此行为应用内添加了观察者。

# objective-c - 在不中断流程的情况下从后台线程显示 UI

> ID：15170107
> 
> 赞同：0
> 
> 时间：2013-03-02T02:43:17.020
> 
> 标签：objective-c, cocoa-touch, nsthread

我有一个在后台线程中执行的代码，它正在执行某种计算并且在一个 do-while 循环中。由于需求的一些变化，我必须显示一个 UI 来提示用户输入。这段UI代码要在主线程中完成，输入提示后，逻辑需要继续。在主线程上使用 dispatch_async，我可以显示 UI，但步骤 -2 不应该继续，直到 UI 完成。在不破坏代码流并将单元移动到块中的情况下，实现此目的的最佳方法是什么？

例如：

```
-(void) compute
{
    do 
    {
        //calculate some data
        // Step -1...
        ...
        // Step -2
         ...
         ...
     } while(flag)
} 
```

在步骤 1 和步骤 2 之间，我想显示一个提示。最好的方法是什么？可以在 UI 完成后由主线程使用互斥锁来阻止这个后台线程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T03:05:38.090

为此，我将使用 GCD（Grand Central Dispatch）。您可以使用 dispatch_sync（或 dispatch_async）轻松地在主线程上同步（或异步执行）执行块。我个人在我的 EX2Kit 库 ( [https://github.com/einsteinx2/EX2Kit](https://github.com/einsteinx2/EX2Kit) ) 中使用我的包装类 EX2Dispatch，但它是一回事。

例如，您将执行以下操作：

```
dispatch_sync(dispatch_get_main_queue(), ^{
    // Do some stuff to the UI
}; 
```

* * *

编辑：

我正在阅读它，因为需要根据之前的计算向用户显示信息，但是如果在继续之前需要用户的响应，那么循环需要在显示警报后中断，然后再次调用。

您可以使用实例变量来跟踪您在循环中的距离，以便它可以在 UIAlertView 的按钮单击委托方法中的同一点恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T03:45:50.990

尝试这个

```
dispatch_queue_t mainQueue = dispatch_get_main_queue(); 
dispatch_async(mainQueue, ^(void) {

    //do stuff here

    }); 
```

# python - 从链接读取数据

> ID：15170110
> 
> 赞同：-2
> 
> 时间：2013-03-02T02:44:21.690
> 
> 标签：python

我有一个 wiki 链接 @ [http://wiki.company.com/company/w/index.php?title=test&action=edit](http://wiki.company.com/company/w/index.php?title=test&action=edit)其数据在 HTML 中如下所示...有没有办法获得具有测试 Combo？任何内置的 python 模块，感谢输入

```
INPUT:-

=== find ===

data1

==== <font color="#008000">test Combo</font> ====

{| border="1" cellspacing="1" cellpadding="1"
|-
test
|}

==== next bloock ===

data3

OUTPUT:-
{| border="1" cellspacing="1" cellpadding="1"
|-
test
|} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:30:02.463

首先，您需要一种下载相关文件的方法。执行此操作的标准 python 模块是 urllib2。

然后你需要一种方法来处理 HTML 文件。两个适合该任务的优秀 python 模块是[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)和[lxml](http://lxml.de/)。

# ios - 如何测试 Internet 连接性并以其他方式加载本地核心数据数据？

> ID：15170113
> 
> 赞同：0
> 
> 时间：2013-03-02T02:44:55.987
> 
> 标签：ios, connectivity

我有一个在 AppDelegate 上调用 SyncEngine 的应用程序。这启动了从 parse.com 获取数据并将该数据解析为本地对象并将该信息存储在设备上的核心数据数据库中的过程。

然后，该应用程序会加载一个带有 2 个视图控制器的 tabbarcontroller：

1) 地图视图控制器 2) 表格视图控制器

地图视图控制器将核心数据数据加载到一个数组中，并使用它在地图上绘制位置。tablevc 获取相同的数据并将其放入单元格中。

我试图让应用程序检查互联网连接并根据数据是获取的还是本地的来加载数据。这是交易：

mapVC 中的 viewDidLoad 注册了数据何时完成加载（来自网络）的通知。一旦发生这种情况，它就会调用 loadResultsFromCoreData 方法来执行 CD 获取请求。因此，如果没有互联网连接，则永远不会收到该通知。

我的问题是，何时何地是检查互联网连接的最佳地点？到目前为止，我在 AppDelegate 中使用此代码，但当然，它为时过早，所以 BOOL 设置为 NO：

```
- (BOOL) connectedToNetwork
{
    Reachability *r = [Reachability reachabilityWithHostName:@"www.google.com"];
    NetworkStatus internetStatus = [r currentReachabilityStatus];
    BOOL internet;
    if ((internetStatus != ReachableViaWiFi) && (internetStatus != ReachableViaWWAN)) {
        internet = NO;
    } else {
        internet = YES;
    }
    return internet;
}

-(BOOL) checkInternet
{
    //Make sure we have internet connectivity
    if([self connectedToNetwork] != YES) {
        UIAlertView *internetAlert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"Internet Required" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];
        [internetAlert show];
        return NO;
    } else {
        return YES;
    }
} 
```

任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T03:04:59.753

我认为问题出在您的 connectedToNetwork 方法上。ReachabilityWithHost 需要时间来连接到创建后的指定站点，然后您立即开始轮询它。您可能应该做的是使用您创建的可达性对象注册状态更改通知。Apple 的 Reachability 示例中有一个示例，但要点是：

```
// Register to find out when reachability status changes
[[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(<Whatever method you want to respond to reachability changes>) name: kReachabilityChangedNotification object: nil];

// Create a reachability object to start monitoring
Reachability* reach = [[Reachability reachabilityWithHostName: @"www.google.com"] retain];

// Start broadcasting status changes from the reachability object
[reach startNotifier]; 
```

# node.js - 在节点/手写笔中：让手写笔编译到不同的目录

> ID：15170121
> 
> 赞同：0
> 
> 时间：2013-03-02T02:45:59.293
> 
> 标签：node.js, express, stylus

目录中的原始`.styl`文件`.../node/`

希望编译`.css`到`.../nginx/`目录

```
app.use(stylus.middleware({
  src: __dirname + '/node/www',
  dest: __dirname + '/node/www',
  //=src: req.basepath,
  //=dest: req.basepath,
  编译：函数（str，路径）{
      返回手写笔（str）
      .set('文件名', 路径)
      .set('压缩', true)
      .use(笔尖());
  }
}));

```

如果我改变`dest: __dirname + '/node/www'`，`dest: __dirname + '/nginx/www'`它就会爆炸

不太明白这应该如何工作

* * *

已解决：编译正常。in `express`,`stylus`在一个步骤中编译，然后在第二步中作为静态文件提供。这`jade`与在同一步骤中编译和提供的 不同 - 这让我感到困惑。

所以使用`stylus`in ，如果要编译到不同的目录`express`，需要在步骤中设置正确的目录。`static``stylus`

# java - 使用 IF 的 do-while 循环

> ID：15170126
> 
> 赞同：1
> 
> 时间：2013-03-02T02:46:30.250
> 
> 标签：java, loops, conditional-statements

我正在使用带有 do while 循环的 if 条件语句。我希望每次编译器运行程序时，它都应该在“IF”中打印语句，直到它小于 15打印一次？我哪里错了。如果有人解释流程，我会非常感激，因为我是初学者。请参阅下面的代码：

```
package loopexamples2;

public class DoWhileLoop {

public static void main(String[] args) {
    int n = 1;
    if(n<15)

        System.out.println("print value of n is equal to"+ n);

    do {
     System.out.println(n);
     n++;
    }
     while(n<10);           
    }
} 
```

output--> 打印 n 的值等于 1 1 2 3 4 5 6 7 8 9

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T02:50:14.677

您的 if 语句在您的 do while 循环之外。把它放在 do {} 块内

```
package loopexamples2;

public class DoWhileLoop {

public static void main(String[] args) {
    int n = 1;

    do {
     if(n<15) {
        System.out.println("print value of n is equal to"+ n);
     }
     System.out.println(n);
     n++;
    }
     while(n<10);           
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T02:50:28.967

您正在寻找更接近此的东西：

```
while(n<15) {
    System.out.println("print value of n is equal to"+ n);
    n++
} 
```

`{`和中的代码块`}`将不断运行，直到`n`达到大于或等于 15 的值。

使用您当前的代码，完整的打印语句仅输出一次，因为它不包含在您的`while`循环中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T04:03:24.640

你可以随时参考这个...它会对你更有帮助..

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/flow.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/flow.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T02:50:29.360

我想这就是你想要的：

```
package loopexamples2;

public class DoWhileLoop {

    public static void main(String[] args) {
        int n = 1;        
        do {
           System.out.println("print value of n is equal to"+ n);
           n++;
        } while(n<10);           
    }
} 
```

代码流程：

`int n = 1;`将 n 分配给 1

`do {`从这里开始重复大括号之间的代码，直到`while`.

`System.out.println("print value of n is equal to"+ n);`印刷`print value of n is equal to1`

`n++;`将 n 增加 1，因此 n = 2

`} while(n<10);`n < 10 吗？是的，所以重复`do`

`System.out.println("print value of n is equal to"+ n);`印刷`print value of n is equal to2`

`n++;`将 n 增加 1，因此 n = 3

`} while(n<10);`n < 10 吗？n = 3 所以是的，重复`do`

*[ ...同样的事情重复直到...]*

`System.out.println("print value of n is equal to"+ n);`印刷`print value of n is equal to9`

`n++;`将 n 增加 1，因此 n = 10

`} while(n<10);`n < 10 吗？n = 10 所以不，退出循环。

程序结束。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T02:54:06.653

我解释了工作流程，因为您是初学者：

```
 int n = 1; 
```

1 分配给`n`.

```
 if(n<15)
        System.out.println("print value of n is equal to"+ n); 
```

程序检查n是否小于15。是这样，所以它执行动作：打印“打印n的值等于”+n。它只这样做一次。重复执行循环的不是 while 或 for 循环。

```
 do {
     System.out.println(n);
     n++;
    }
     while(n<10);           
    } 
```

这里程序执行 { 和 } 之间的所有内容，直到 n=10。

你是说“它应该在“IF”中打印语句，直到它达到小于 15”

然后你需要一个类似的 do/while 循环：

```
 do {
     System.out.println("print value of n is equal to"+ n);
     n++
 }
 while (n<15); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-02T02:54:09.013

*我希望每次编译器运行程序时，它都应该在“IF”中打印语句，直到它小于 15*

由于您`n<10`在循环中使用条件`do while`，因此循环不会继续进行`n=9`。所以达不到`n=15`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-02T02:57:54.840

首先，您需要将`if()`语句放在 do while 循环中。否则程序只会看到 if 一次。

你要做的下一件事是在你的声明中：

```
do {
    System.out.println(n);
n++;
}
while(n<10); 
```

你让它一直持续到`n`小于 10，你希望它小于 15。

我假设您也不想打印出 15 以便您可以更改

```
while(n < 10) 
```

至

```
while(n <= 15) 
```

所以你的代码看起来像这样：

```
package loopexamples2;

public class DoWhileLoop {

public static void main(String[] args) {
    int n = 1;

    do {
        if(n <= 15){
            System.out.println("The value of n is equal to " + n);
            n++;
    } while(n <= 15);
}
} 
```

note`<=`的意思是“小于或等于”

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-02T02:52:15.900

IF 中的语句只传递一次。因为它不在任何循环内。

程序的流程是程序性的。所以执行是从上到下的。它首先通过 IF 块，执行它，进入下一行，找到循环直到满足 while 条件的 do-while 块。循环只在它的块上迭代，而不是在它之前的行上。

# opencv - 如何编译与 libstdc++ 静态链接的 OpenCV

> ID：15170136
> 
> 赞同：3
> 
> 时间：2013-03-02T02:49:13.870
> 
> 标签：opencv, mingw

我需要编译与 libstdc++ 静态链接的 OpenCV，以避免 Qt5 和 OpenCV 所需的 libstdc++-6.dll 的不同 dll 版本的问题。按照本文的步骤：[http](http://www.argong.com/docs/how-to-OpenCV-2.2.0.pdf) ://www.argong.com/docs/how-to-OpenCV-2.2.0.pdf并将以下几行添加到 CMakeLists.txt 我希望获得与 libstdc++ 静态链接的 OpenCV DLL ，但 OpenCV 继续依赖于 libstdc++-6.dll。让 OpenCV 库与 libstdc++ 静态链接我做错了什么？

```
 if (MINGW)
    set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -static-libgcc")
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -static-libgcc -static-libstdc++")
    set(CMAKE_SHARED_LIBRARY_LINK_C_FLAGS "${CMAKE_SHARED_LIBRARY_LINK_C_FLAGS} -static-libgcc -s")
    set(CMAKE_SHARED_LIBRARY_LINK_CXX_FLAGS "${CMAKE_SHARED_LIBRARY_LINK_CXX_FLAGS} -static-libgcc -static-libstdc++ -s")
  endif() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-06T23:52:17.347

首先确保您没有对链接到共享系统库的库进行依赖。`BUILD_ZLIB`例如，您可以使用 flags等启用捆绑源组件（如 zlib、jpeg 等）的编译`BUILD_JPEG`。您还可以禁用对可选组件（如 Vtk（`WITH_VTK`标志）和其他可能已经作为共享库存在于系统中的组件的依赖关系） . 然后，如果您将 OpenCV 构建为共享库，请使用以下命令将设置推送到`CMAKE_SHARED_LINKER_FLAGS`缓存中的共享链接器标志变量 ( ) [`cmake -C`](https://cmake.org/cmake/help/v3.11/manual/cmake.1.html)：

```
set(CMAKE_SHARED_LINKER_FLAGS "-static -static-libgcc -static-libstdc++" CACHE INTERNAL "" FORCE) 
```

或者，如果您使用 静态编译 OpenCV `-DBUILD_SHARED_LIBS=FALSE`，您可以插入 gcc 链接器标志以在最终共享对象或可执行文件上进行静态链接。

# c# - Foreach 循环没有在 C# 中使用 List<> 完成

> ID：15170137
> 
> 赞同：0
> 
> 时间：2013-03-02T02:49:22.907
> 
> 标签：c#, list, foreach

我知道这很奇怪，但我找不到另一种说法。请看下面的图片 ![计数列表](../Images/7eb02375c59bc20e3617bfdf6f2fb27c.png)

![在此处输入图像描述](../Images/684a9817ab848842b29a67487a1be2d0.png)

输出为 1 并且始终相同！

我真的不明白这里发生了什么。谁能给我解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:30:00.163

只是对您`Modelo`和`Medicion`课程的一些观察：

```
public class Modelo<T>
{
    // 1) note PROTECTED set on Id
    public virtual int Id { get; protected set; }

    public override bool Equals(object obj)
    {
        ...
        // 2) comparison is based on Id
        return (this == obj || this.Id == specificOject.Id);
    }
    ...
}

public class Medicion : Modelo<Medicion> {...} 
```

1.  该`Id`成员定义为`protected set`。
2.  如果两个对象相同，则该`Equals`方法将两个对象定义为`Id`相同。

你在任何地方设置`Id`你的`Medicion`对象吗？如果不是，它们很可能都是`0`. 如果所有 Id 都相同，这会使您的所有对象看起来都相同（您的相等定义基于`Id`）。

因此，`Mediciones.Contains`将始终`true`在添加第一个对象之后。您没有提供关于 的任何信息`Mediciones`，但我在这里假设它是一个`List`没有覆盖的标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T02:51:48.583

其中一个智能感知对话框正在向您展示 TodasMediciones。另一个是向您展示Mediciones。这些不是相同的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T02:56:39.590

请参阅[修改 List.Contains 行为](https://stackoverflow.com/questions/1076350/modify-list-contains-behavior)

您将要[`IEquatable<T>`](http://msdn.microsoft.com/en-us/library/ms131187.aspx)在您的`Medicion`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T02:57:18.617

我不明白你的问题是什么。TodasMediciones 上的循环是一个列表。第二个调试器在 Mediciones 上。两者是不同的对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T13:08:50.487

好吧，我错了。问题（我不知道为什么）是`!Mediciones.Contains(m)`。第一次是假的，在接下来的迭代中是真的。我改变方法如下

```
public virtual void AddMediciones(List<Medicion> TodasMediciones)
        {
            int i = 0;
            foreach (Medicion m in TodasMediciones)
            {
                Console.WriteLine(Mediciones.Contains(m));
                Console.WriteLine(m.Valor);
                Console.WriteLine("-------------------------------------------");
                if (!Mediciones.Contains(m))
                {
                    Mediciones.Add(m);
                }
            }
        } 
```

他们的输出是：

```
False
1
-------------------------------------------
True
2
-------------------------------------------
True
3
-------------------------------------------
True
4
------------------------------------------- 
```

这是Medicion的定义：

```
public class Medicion : Modelo<Medicion>
    {
        public virtual DateTime Fecha { get; set; }
        public virtual decimal Valor { get; set; }
        public virtual Indicador Indicador { get; set; }
    }
} 
```

和他们的父母定义

```
public class Modelo<T>
{
    public virtual int Id { get; protected set; }

    public override bool Equals(object obj)
    {
        if (obj == null || obj.GetType() != this.GetType())
        {
            return false;
        }

        Modelo<T> specificOject = (Modelo<T>)obj;
        return (this == obj || this.Id == specificOject.Id);
    }

    public override int GetHashCode()
    {
        return Id.GetHashCode() ^ 5;
    }
} 
```

# html - 调整浏览器窗口大小时图像碰撞在一起

> ID：15170144
> 
> 赞同：0
> 
> 时间：2013-03-02T02:50:52.717
> 
> 标签：html, css

我的问题是，当我调整浏览器的大小时，我的图像会相互碰撞，而不是保持在自己指定的格式中。实际上，当我调整浏览器大小时，我希望我的图像随浏览器一起移动，但不会相互碰撞。这是代码，谢谢。

这是我的HTML...

```
<div id="header-images">

    <img src="images/title.png" id="header_title" class="animated bounceInLeft" alt="Title Header"></img>

    <img src="images/header_interface.png" id="interface" class="animated bounceInRight" alt="Poyan's Interface"></img>
</div> 
```

这是我的CSS...

```
 #header_title {     
    width: 561px;   
    height: 248px;
    margin-top: 175px;
    left: 37.5%;
    margin-left: -280.5px;
    position: absolute;
    z-index: -1000;
    min-width: 100px;
}

    #interface {
    min-width: 100px;
    width: 338px;
    height: 315px;
    margin-top: 165px;
    left: 73%;
    margin-left: -169px;
    position: absolute;
    z-index: -1000;
} 
```

如果您需要更多，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:49:21.873

使用这个 css 来修复图像宽度，使其保持距离而不发生碰撞：

```
#header-images img {
    Width: 45%;
} 
```

这将使两个图像之间保持 10% 的距离

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T04:21:56.633

这是一个将它们换成两行的示例：

[http://jsfiddle.net/6PQy5/3/](http://jsfiddle.net/6PQy5/3/)

```
#header_title {
    width: 561px;
    height: 248px;
    margin-top: 175px;
    float: left;
}
#interface {
    min-width: 100px;
    width: 338px;
    height: 315px;
    margin-top: 165px;
    float: right;
} 
```

这是他们在屏幕外滚动的示例：

[http://jsfiddle.net/6PQy5/4/](http://jsfiddle.net/6PQy5/4/)

```
#header_images {min-width: 920px;} 
```

# c# - 如何对自引用对象类型进行建模？

> ID：15170154
> 
> 赞同：1
> 
> 时间：2013-03-02T02:52:33.373
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-5, self-reference

假设我有一个类 Box：

```
public class Box
{
    [Required]
    [Key]
    int BoxId { get; set; }
    string BoxName { get; set; }
} 
```

我希望能够将盒子添加到其他盒子 - 一个盒子可以有很多盒子或属于一个盒子，但它也不需要。

我试图在我的项目中这样建模：

```
public class Box
{
    [Required]
    [Key, ForeignKey("ParentBox")]
    int BoxId { get; set; }
    string BoxName { get; set; }
    int ParentBoxId { get; set; }
    Box ParentBox { get; set; }
    List<Box> Boxes {get; set;}
} 
```

[但是，我在这个问题](https://stackoverflow.com/questions/15164028/unable-to-determine-the-principle-end-of-the-relationship-multiple-added-entit)中得到了以下错误：

> 无法确定“App.Core.Set_ParentSet”关系的主体端。多个添加的实体可能具有相同的主键。

删除 ForeignKey 属性可以让我构建数据库，但随后级联删除不起作用。

我不想为 ChildBox 或 ParentBox 创建一个不同的类，因为一个盒子是否属于/有盒子在我的应用程序中会一直发生变化。

在 EF 中对此进行建模的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T09:20:21.823

试试这个。

```
public class Box
{
    [Required]
    [Key]
    public int BoxId { get; set; }

    public string BoxName { get; set; }

    public int ParentBoxId { get; set; }

    // The foreign key for the Box that points at ParentBox.BoxId  (the [Key])
    [ForeignKey("ParentBoxId")]
    public Box ParentBox { get; set; }

    // The foreign key for the Boxes that point at this.BoxId (the [Key])
    [ForeignKey("ParentBoxId")]
    public virtual ICollection<Box> Boxes {get; set;}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T09:11:11.390

*BoxID*有问题。既是主键又是外键？例如，请参阅 [http://msdn.microsoft.com/en-us/data/gg193958](http://msdn.microsoft.com/en-us/data/gg193958)

可以使用 InverseProperty 代替外键。这减少了冗余量。

```
 [Table("Box")]
public class Box
{

    [Required]
    [Key]
    [Column("BoxId")]
    public virtual int BoxId { get; set; }

    [Column("Name")]
    public virtual string Name { get; set; }

    [Column("ParentBoxID")]
    public virtual int? MyParentBoxId { get; set; }

    [ForeignKey("MyParentBoxId")]
    public virtual Box Parent { get; set; }

    [InverseProperty("Parent")]
    public virtual ICollection<Box> Boxes { get; set; }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T09:35:07.283

流畅的 API 版本。您可以按照 Tyriar 的建议使用注释来完成。我个人不喜欢我的 POCO 中的 Db 垃圾。所以这里有一个替代方案......

```
modelBuilder.Entity<Box>().
  HasOptional(e => e.ParentBox).
  WithMany().
  HasForeignKey(p => p.ParentBoxID); 
```

# c++ - 需要结构包含/实现帮助 (pt 2) C++

> ID：15170155
> 
> 赞同：0
> 
> 时间：2013-03-02T02:52:40.060
> 
> 标签：c++, struct, header-files, doubly-linked-list

我正在尝试修改一些代码，以便在我的 mysh.cpp 文件中包含和使用双向链表，我得到了

```
mysh.cpp:88: error: no matching function for call to ‘readcommand::initialize(linked_list*)’
readcommand.h:32: note: candidates are: static void readcommand::initialize(readcommand::linked_list*)
mysh.cpp:100: error: no matching function for call to ‘readcommand::add(linked_list*, char*&)’
readcommand.h:34: note: candidates are: static void readcommand::add(readcommand::linked_list*, char*)
mysh.cpp:114: error: no matching function for call to ‘readcommand::traverse(linked_list*, void(char*))’
readcommand.h:38: note: candidates are: static void readcommand::traverse(readcommand::linked_list*, void (*)(char*)) 
```

以及我的 readcommand.cpp 文件中的 add(linked_list*, char*) 和 traverse(linked_list*, void (*callback) (char *)) 函数的类似错误（标题包含在 mysh.cpp

* * *

几天前我遇到了一个问题，涉及让我的头文件与 mysh.cpp （[上一个问题](https://stackoverflow.com/questions/15049632/struct-inclusion-implementation-help-needed-c)）一起工作的较早步骤，并且通过将结构定义移动到 readcommand.h 文件的顶部解决了这个问题。现在我被这个错误困住了，不知道下一步该去哪里。

以下是文件的相关部分：

**读取命令.cpp**

```
static void initialize (linked_list *list) {
  list->first = 0;
  list->last = 0;
}

static void add (linked_list *list, char *word) {
  node *nodeX;

  nodeX = talloc();

  if (! nodeX) {
    fprintf (stderr, "allocation failure\n");
    exit (EXIT_FAILURE);
  }

  nodeX->word = word;

  if (list->last) {
    list->last->next = nodeX;
    nodeX->prev = list->last;
    list->last = nodeX;
  }
  else {
    list->first = nodeX;
    list->last = nodeX;
  }
} 
```

**读取命令.h**

```
#include <cstdio>
#include <iostream>
#include <cstring>
#include <cstdlib>

struct node {
  const char *word;
  node *prev;
  node *next;
};

struct linked_list {
  node *first;
  node *last;
};

class readcommand {

  public:

  // Struct Definitions    
  typedef node node_t;
  typedef linked_list linked_list_t;

  // Creation
  static void initialize (linked_list *list);
  node *talloc ();
  static void add (linked_list *list, char *word);

  // Modification and Traversal
  static void del_list (linked_list *list, node *nodeX);
  static void traverse (linked_list *list, void (*callback) (char *));
  static void reverse (linked_list *list, void (*callback) (char *));
  static void traverse_delete (linked_list *list, int (*callback) (char *));
  static void free (linked_list *list);
  static int delete_all (char *word);
  static void print (char *word);

}; 
```

**mysh.cpp**

```
#include "readcommand.h"

int main (int argc, char** argv) {

  readcommand read;
  linked_list list;
  string input = "";
  read.initialize (& list);

  // Read input string here
  getline (cin, input);
  cout << endl;

  // Parse words individually and add to linked list
  int len = input.length();
  char *str = (char *) input.c_str();
  char *word = strtok (str, " ");

  while (word != NULL) {
    read.add (& list, word);
    word = strtok (NULL, " ");
  }

  read.traverse(& list, read.print);
  printf("\n");

  return (0);
} 
```

* * *

我应该以不同的方式初始化“linked_list list”，还是仅仅需要重新安排声明？

提前感谢您的帮助。

* * *

**更新：**随着斯蒂芬林提到的变化，我现在得到的错误是：

```
mysh.cpp:88: undefined reference to `readcommand::initialize(linked_list*)'
mysh.cpp:100: undefined reference to `readcommand::add(linked_list*, char*)'
mysh.cpp:114: undefined reference to `readcommand::print(char*)'
mysh.cpp:114: undefined reference to `readcommand::traverse(linked_list*, void (*)(char*))' 
```

* * *

**更新2：**我的新错误：

```
mysh.cpp:114: error: no matching function for call to ‘readcommand::traverse(linked_list*, <unresolved overloaded function type>)’
readcommand.h:35: note: candidates are: void readcommand::traverse(linked_list*, void (*)(char*)) 
```

**mysh.cpp**

```
read.traverse(& list, read.print); 
```

**读取命令.cpp**

```
void readcommand::traverse (linked_list *list, void (*callback) (char *)) {
  node *nodeX;

  for (nodeX = list->first; nodeX; nodeX = nodeX->next) {
    callback ((char *) nodeX->word);
  }
}    

void readcommand::print (char *word) {
  printf ("%s, ", (char *) word);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T03:02:16.083

删除行：

```
// Struct Definitions
struct node;
struct linked_list; 
```

您正在使用声明为类本地的新类型来隐藏这些结构的全局类型定义`readcommand`

还：

```
typedef struct node node_t;
typedef struct linked_list linked_list_t; 
```

可以：

```
typedef node node_t;
typedef linked_list linked_list_t; 
```

并且在 C++ 中是首选，尽管前者也可以。

编辑：

此外，您的函数定义不正确，它们被定义为全局函数而不是成员函数：

```
static void initialize (linked_list *list) {
    // ...
} 
```

应该

```
static void readcommand::initialize (linked_list *list) {
    // ...
} 
```

对于您的其他定义也是如此。请注意，由于您的所有函数似乎都是`static`（除了一个？）并且您没有成员变量，因此`readcommand`除了命名空间之外，您并没有真正使用该类。即您没有使用任何面向对象的功能。这是可以接受的，但在这种情况下，这似乎不是您的意图，因为您正在实例化一个类对象`readcommand`并使用其上的点 ( ) 运算符调用静态函数`.`，这是可能的，但没有任何作用。

您可能的意思是不使用`static`，并且意味着制作`list`的成员变量`readcommand`，但我不是 100% 确定。否则，您可以完全跳过创建对象并将所有内容称为`readcommand::initialize(...)`，等等。

# sql-server - 导出/备份 SQL 登录信息

> ID：15170159
> 
> 赞同：2
> 
> 时间：2013-03-02T02:52:57.013
> 
> 标签：sql-server, login, backup

我有一个困境，使用**SQL server 2005 和 2008**。

有一个紧急情况需要执行，唯一的方法（SLA-bound）是使用特定的 SQL 登录。问题是，无法联系到拥有密码的人，我们很快需要执行更新（通过应用程序并使用脚本和 ssis）。

*当前的讨论是更改密码，然后恢复为原始密码。*

那么，这可能吗？导出或备份 SQL 登录？（因为如果是这样，那我们确实可以轻松更改密码，执行更新，然后恢复原始密码）

```
For this scenario, kindly assume that we need to backup the 
SQL login's info (including the password) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T03:07:16.623

您可以使用密码哈希编写登录脚本。然后做你需要做的事情，最后删除登录并使用脚本重新创建它。有几篇文章描述了如何执行脚本步骤，例如：[http ://weblogs.sqlteam.com/billg/archive/2010/07/08/Scripting-out-SQL-Server-Logins.aspx](http://weblogs.sqlteam.com/billg/archive/2010/07/08/Scripting-out-SQL-Server-Logins.aspx)

但是，删除登录名会删除授予该登录名的所有权限。此外，还有一些事情会阻止登录被删除，例如它拥有一个数据库。

因此，您还需要编写权限脚本并临时重新分配这些登录名的所有权。

您可以使用密码哈希直接重置密码，但我从未尝试过。如果这行得通，您就不必进行所有的删除和重新创建。

备份所有登录的脚本：

```
USE [master]
GO

/****** Object:  UserDefinedFunction [dbo].[fn_hexadecimal]    ****/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE FUNCTION [dbo].[fn_hexadecimal] 
(
    -- Add the parameters for the function here
     @binvalue varbinary(256)
)
RETURNS VARCHAR(256)
AS
BEGIN

    DECLARE @charvalue varchar(256)
    DECLARE @i int
    DECLARE @length int
    DECLARE @hexstring char(16)
    SELECT @charvalue = '0x'
    SELECT @i = 1
    SELECT @length = DATALENGTH (@binvalue)
    SELECT @hexstring = '0123456789ABCDEF' 
    WHILE (@i <= @length) 
    BEGIN
      DECLARE @tempint int
      DECLARE @firstint int
      DECLARE @secondint int
      SELECT @tempint = CONVERT(int, SUBSTRING(@binvalue,@i,1))
      SELECT @firstint = FLOOR(@tempint/16)
      SELECT @secondint = @tempint - (@firstint*16)
      SELECT @charvalue = @charvalue +
        SUBSTRING(@hexstring, @firstint+1, 1) +
        SUBSTRING(@hexstring, @secondint+1, 1)
      SELECT @i = @i + 1
    END
    return @charvalue

END
GO

SET NOCOUNT ON
GO
--use MASTER
GO
PRINT '-----------------------------------------------------------------------------'
PRINT '-- Script created on ' + CAST(GETDATE() AS VARCHAR(100))
PRINT '-----------------------------------------------------------------------------'
PRINT ''
PRINT '-----------------------------------------------------------------------------'
PRINT '-- Create the windows logins'
PRINT '-----------------------------------------------------------------------------'
SELECT 'IF NOT EXISTS (SELECT * FROM master.sys.server_principals WHERE [name] = ''' + [name] + ''')
    CREATE LOGIN [' + [name] + '] FROM WINDOWS WITH DEFAULT_DATABASE=[' + 
        default_database_name + '], DEFAULT_LANGUAGE=[us_english]
GO

'
FROM master.sys.server_principals
where type_desc In ('WINDOWS_GROUP', 'WINDOWS_LOGIN')
AND [name] not like 'BUILTIN%'
and [NAME] not like 'NT AUTHORITY%'
and [name] not like '%\SQLServer%'
GO

PRINT '-----------------------------------------------------------------------------'
PRINT '-- Create the SQL Logins'
PRINT '-----------------------------------------------------------------------------'
select 'IF NOT EXISTS (SELECT * FROM master.sys.sql_logins WHERE [name] = ''' + [name] + ''')
    CREATE LOGIN [' + [name] + '] 
        WITH PASSWORD=' + [master].[dbo].[fn_hexadecimal](password_hash) + ' HASHED,
        SID = ' + [master].[dbo].[fn_hexadecimal]([sid]) + ',  
        DEFAULT_DATABASE=[' + default_database_name + '], DEFAULT_LANGUAGE=[us_english], 
        CHECK_EXPIRATION=' + CASE WHEN is_expiration_checked = 1 THEN 'ON' ELSE 'OFF' END + ', CHECK_POLICY=OFF
GO
IF EXISTS (SELECT * FROM master.sys.sql_logins WHERE [name] = ''' + [name] + ''')
    ALTER LOGIN [' + [name] + ']
        WITH CHECK_EXPIRATION=' + 
            CASE WHEN is_expiration_checked = 1 THEN 'ON' ELSE 'OFF' END + ', CHECK_POLICY=' + 
            CASE WHEN is_policy_checked = 1 THEN 'ON' ELSE 'OFF' END + '
GO

'
--[name], [sid] , password_hash 
from master.sys.sql_logins 
where type_desc = 'SQL_LOGIN' 
and [name] not in ('sa', 'guest')

PRINT '-----------------------------------------------------------------------------'
PRINT '-- Disable any logins'
PRINT '-----------------------------------------------------------------------------'
SELECT 'ALTER LOGIN [' + [name] + '] DISABLE
GO
' 
from master.sys.server_principals 
where is_disabled = 1

PRINT '-----------------------------------------------------------------------------'
PRINT '-- Assign groups'
PRINT '-----------------------------------------------------------------------------'
select 
'EXEC master..sp_addsrvrolemember @loginame = N''' + l.name + ''', @rolename = N''' + r.name + '''
GO

'
from master.sys.server_role_members rm
join master.sys.server_principals r on r.principal_id = rm.role_principal_id
join master.sys.server_principals l on l.principal_id = rm.member_principal_id
where l.[name] not in ('sa')
AND l.[name] not like 'BUILTIN%'
and l.[NAME] not like 'NT AUTHORITY%'
and l.[name] not like '%\SQLServer%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-11T10:25:13.813

您可以使用脚本使用 microsoft sql server 备份/恢复登录

**步骤 1：**创建 sp_help_revlogin 过程

```
 IF OBJECT_ID ('sp_hexadecimal') IS NOT NULL
  DROP PROCEDURE sp_hexadecimal
GO
CREATE PROCEDURE sp_hexadecimal
    @binvalue varbinary(256),
    @hexvalue varchar (514) OUTPUT
AS
DECLARE @charvalue varchar (514)
DECLARE @i int
DECLARE @length int
DECLARE @hexstring char(16)
SELECT @charvalue = '0x'
SELECT @i = 1
SELECT @length = DATALENGTH (@binvalue)
SELECT @hexstring = '0123456789ABCDEF'
WHILE (@i <= @length)
BEGIN
  DECLARE @tempint int
  DECLARE @firstint int
  DECLARE @secondint int
  SELECT @tempint = CONVERT(int, SUBSTRING(@binvalue,@i,1))
  SELECT @firstint = FLOOR(@tempint/16)
  SELECT @secondint = @tempint - (@firstint*16)
  SELECT @charvalue = @charvalue +
    SUBSTRING(@hexstring, @firstint+1, 1) +
    SUBSTRING(@hexstring, @secondint+1, 1)
  SELECT @i = @i + 1
END

SELECT @hexvalue = @charvalue
GO

IF OBJECT_ID ('sp_help_revlogin') IS NOT NULL
  DROP PROCEDURE sp_help_revlogin
GO
CREATE PROCEDURE sp_help_revlogin @login_name sysname = NULL AS
DECLARE @name sysname
DECLARE @type varchar (1)
DECLARE @hasaccess int
DECLARE @denylogin int
DECLARE @is_disabled int
DECLARE @PWD_varbinary  varbinary (256)
DECLARE @PWD_string  varchar (514)
DECLARE @SID_varbinary varbinary (85)
DECLARE @SID_string varchar (514)
DECLARE @tmpstr  varchar (1024)
DECLARE @is_policy_checked varchar (3)
DECLARE @is_expiration_checked varchar (3)

DECLARE @defaultdb sysname

IF (@login_name IS NULL)
  DECLARE login_curs CURSOR FOR

      SELECT p.sid, p.name, p.type, p.is_disabled, p.default_database_name, l.hasaccess, l.denylogin FROM 
sys.server_principals p LEFT JOIN sys.syslogins l
      ON ( l.name = p.name ) WHERE p.type IN ( 'S', 'G', 'U' ) AND p.name <> 'sa'
ELSE
  DECLARE login_curs CURSOR FOR

      SELECT p.sid, p.name, p.type, p.is_disabled, p.default_database_name, l.hasaccess, l.denylogin FROM 
sys.server_principals p LEFT JOIN sys.syslogins l
      ON ( l.name = p.name ) WHERE p.type IN ( 'S', 'G', 'U' ) AND p.name = @login_name
OPEN login_curs

FETCH NEXT FROM login_curs INTO @SID_varbinary, @name, @type, @is_disabled, @defaultdb, @hasaccess, @denylogin
IF (@@fetch_status = -1)
BEGIN
  PRINT 'No login(s) found.'
  CLOSE login_curs
  DEALLOCATE login_curs
  RETURN -1
END
SET @tmpstr = '/* sp_help_revlogin script '
PRINT @tmpstr
SET @tmpstr = '** Generated ' + CONVERT (varchar, GETDATE()) + ' on ' + @@SERVERNAME + ' */'
PRINT @tmpstr
PRINT ''
WHILE (@@fetch_status <> -1)
BEGIN
  IF (@@fetch_status <> -2)
  BEGIN
    PRINT ''
    SET @tmpstr = '-- Login: ' + @name
    PRINT @tmpstr
    IF (@type IN ( 'G', 'U'))
    BEGIN -- NT authenticated account/group

      SET @tmpstr = 'CREATE LOGIN ' + QUOTENAME( @name ) + ' FROM WINDOWS WITH DEFAULT_DATABASE = [' + @defaultdb + ']'
    END
    ELSE BEGIN -- SQL Server authentication
        -- obtain password and sid
            SET @PWD_varbinary = CAST( LOGINPROPERTY( @name, 'PasswordHash' ) AS varbinary (256) )
        EXEC sp_hexadecimal @PWD_varbinary, @PWD_string OUT
        EXEC sp_hexadecimal @SID_varbinary,@SID_string OUT

        -- obtain password policy state
        SELECT @is_policy_checked = CASE is_policy_checked WHEN 1 THEN 'ON' WHEN 0 THEN 'OFF' ELSE NULL END FROM sys.sql_logins WHERE name = @name
        SELECT @is_expiration_checked = CASE is_expiration_checked WHEN 1 THEN 'ON' WHEN 0 THEN 'OFF' ELSE NULL END FROM sys.sql_logins WHERE name = @name

            SET @tmpstr = 'CREATE LOGIN ' + QUOTENAME( @name ) + ' WITH PASSWORD = ' + @PWD_string + ' HASHED, SID = ' + @SID_string + ', DEFAULT_DATABASE = [' + @defaultdb + ']'

        IF ( @is_policy_checked IS NOT NULL )
        BEGIN
          SET @tmpstr = @tmpstr + ', CHECK_POLICY = ' + @is_policy_checked
        END
        IF ( @is_expiration_checked IS NOT NULL )
        BEGIN
          SET @tmpstr = @tmpstr + ', CHECK_EXPIRATION = ' + @is_expiration_checked
        END
    END
    IF (@denylogin = 1)
    BEGIN -- login is denied access
      SET @tmpstr = @tmpstr + '; DENY CONNECT SQL TO ' + QUOTENAME( @name )
    END
    ELSE IF (@hasaccess = 0)
    BEGIN -- login exists but does not have access
      SET @tmpstr = @tmpstr + '; REVOKE CONNECT SQL TO ' + QUOTENAME( @name )
    END
    IF (@is_disabled = 1)
    BEGIN -- login is disabled
      SET @tmpstr = @tmpstr + '; ALTER LOGIN ' + QUOTENAME( @name ) + ' DISABLE'
    END
    PRINT @tmpstr
  END

  FETCH NEXT FROM login_curs INTO @SID_varbinary, @name, @type, @is_disabled, @defaultdb, @hasaccess, @denylogin
   END
CLOSE login_curs
DEALLOCATE login_curs
RETURN 0
GO 
```

**步骤 2：**执行 sp_help_revlogin 并复制结果以恢复登录

参考[http://giasutinhoc.vn](http://giasutinhoc.vn)

# c++ - C++ Winsock 发送文件

> ID：15170161
> 
> 赞同：0
> 
> 时间：2013-03-02T02:53:09.067
> 
> 标签：c++, sockets, winapi, winsock, winsock2

一个简单的服务器和客户端，我可以发送文件，我需要你们看看这个源是否完成。因为我认为它不会下载完整的文件。

也许对这个来源有限制？因为我上传/下载了 200K 和更多..

服务器：

```
#include <WinSock2.h>
#include <Windows.h>
#include <stdio.h>

#pragma comment(lib, "Ws2_32.lib")

SOCKET Socket, Sub;
WSADATA Winsock;
sockaddr_in Addr;
int Addrlen = sizeof(sockaddr_in);
char Buffer[256];
char *Str;
sockaddr_in IncomingAddress;
int AddressLen = sizeof(IncomingAddress);

int main()
{
    WSAStartup(MAKEWORD(2, 2), &Winsock);    // Start Winsock

    if(LOBYTE(Winsock.wVersion) != 2 || HIBYTE(Winsock.wVersion) != 2)    // Check version
    {
        WSACleanup();
        return 0;
    }

     Socket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);

    ZeroMemory(&Addr, sizeof(Addr));
    Addr.sin_family = AF_INET;
    Addr.sin_port = htons(6091);  
    bind(Socket, (sockaddr*)&Addr, sizeof(Addr));

    if(listen(Socket, 1) == SOCKET_ERROR)
    {
        printf("listening error\n");
    }
    else
    {
        printf("listening ok\n");
    }

    if(Sub = accept(Socket, (sockaddr*)&IncomingAddress, &AddressLen))
    {
        char *ClientIP = inet_ntoa(IncomingAddress.sin_addr);
        int ClientPort = ntohs(IncomingAddress.sin_port);
        printf("Client conncted!\n");
        printf("IP: %s:%d\n", ClientIP, ClientPort);

        printf("Sending file .. \n");

        FILE *File;
        char *Buffer;
        unsigned long Size;

        File = fopen("C:\\Prog.exe", "rb");
        if(!File)
        {
            printf("Error while readaing the file\n");
            goto End;
        }

        fseek(File, 0, SEEK_END);
        Size = ftell(File);
        fseek(File, 0, SEEK_SET);

        Buffer = new char[Size];

        fread(Buffer, Size, 1, File);
        char cSize[MAX_PATH];
        sprintf(cSize, "%i", Size);

        fclose(File);

        send(Sub, cSize, MAX_PATH, 0); // File size
        send(Sub, Buffer, Size, 0); // File Binary
        free(Buffer);

End:
        closesocket(Sub);
        closesocket(Socket);
        WSACleanup();
    }

    getchar();
    return 0;
} 
```

客户：

```
#include <WinSock2.h>
#include <Windows.h>
#include <stdio.h>

#pragma comment(lib, "Ws2_32.lib")

SOCKET Socket;
WSADATA Winsock;
sockaddr_in Addr;
int Addrlen = sizeof(Addr);

int main()
{
    WSAStartup(MAKEWORD(2, 2), &Winsock);    // Start Winsock

    if(LOBYTE(Winsock.wVersion) != 2 || HIBYTE(Winsock.wVersion) != 2)    // Check version
    {
        WSACleanup();
        return 0;
    }

     Socket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);

    ZeroMemory(&Addr, sizeof(Addr));    // clear the struct
    Addr.sin_family = AF_INET;    // set the address family
    Addr.sin_addr.s_addr = inet_addr("127.0.0.1");
    Addr.sin_port = htons(6091);    // set the port

    if(connect(Socket, (sockaddr*)&Addr, sizeof(Addr)) < 0)
    {
        printf("Connection failed !\n");
        getchar();
        return 0;
    }

    printf("Connection successful !\n");

    printf("Receiving file .. \n");

    int Size;
    char *Filesize = new char[1024];

    if(recv(Socket, Filesize, 1024, 0)) // File size
    {
        Size = atoi((const char*)Filesize);
        printf("File size: %d\n", Size);
    }

    char *Buffer = new char[Size];

    if(recv(Socket, Buffer, Size, 0)) // File Binary
    {
        FILE *File;
        File = fopen("Prog.exe", "wb");
        fwrite((const char*)Buffer, 1, Size, File);
        fclose(File);
    }

    getchar();
    closesocket(Socket);
    WSACleanup();
    return 0;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T04:45:31.047

如果您尝试发送/接收大量数据，您的代码可能会失败。从[发送函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740149%28v=vs.85%29.aspx)的文档中：

> **返回值**
> 如果没有出错，send 返回发送的总字节数，*可以小于*len 参数中请求发送的字节数。否则，返回一个值`SOCKET_ERROR`，并且可以通过调用来检索特定的错误代码`WSAGetLastError`。

您必须检查 的返回值`send()`，如果它小于请求发送的字节数，请`send()`再次调用剩余数据。例子：

```
char *data = Buffer; // data to be sent
int len = Size;      // number of bytes to be sent
while (len > 0) {
    int amount = send(Sub, data, len, 0);
    if (amount == SOCKET_ERRROR) {
        // handle error ...
    } else {
        len -= amount;
        data += amount;
    }
} 
```

`recv()`客户端中的调用也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T10:22:47.953

这是文件发送函数，它将以二进制形式读取文件并发送数据。这是一个独立的函数，只是传递 v 需要发送数据的套接字的值以及我们需要发送的文件路径。

```
void FileSend(SOCKET FileSendSocket,char *FilePath)
{
    streampos filesize = 0;
    ifstream in(FilePath,ios::binary);
    ZeroMemory( &sendbuf, sendbuflen);

    if(in.is_open())
    {
        while(1)
        {
            in.read(sendbuf,sendbuflen);
            if(in.eof())
            {
                cout << "End of File sending from Client" <<  endl; 
                in.close();
                break;
            }
            else
            {
                send(FileSendSocket,sendbuf,sendbuflen,0);
                ZeroMemory( &sendbuf, sendbuflen);
            }
        }
    }

} 
```

这是客户端的接收函数，应该在接收函数旁边调用它，该函数将不断写入服务器发送的任何数据。

```
ofstream out("C:\\Prog.exe",ios::binary);
void FileReceive(char* recvbuf, int recvbuflen)
{
    if(out.is_open())
    {
            out.write(recvbuf,recvbuflen);
            ZeroMemory(&recvbuf,recvbuflen);
    }
} 
```

# c - 结构/联合初始化混乱

> ID：15170162
> 
> 赞同：3
> 
> 时间：2013-03-02T02:53:15.473
> 
> 标签：c, struct, unions

我目前正在为下周一的考试做练习考试，我遇到了一些让我感到困惑的事情！

我有以下结构：

```
struct shape2d {
   float x;
   float y;
};

struct shape3d {
   struct shape2d base;
   float z;
};

struct shape {
   int dimensions;
   char *name;
   union {
      struct shape2d s1;
      struct shape3d s2;
   } description;
};

typedef struct shape Shape; 
```

我必须使用以下签名创建一个“创建”形状的函数：

```
Shape *createShape3D(float x, float y, float z, char *name); 
```

因为我正在处理结构的联合，所以我不太确定如何初始化我需要的所有字段！

这是我到目前为止所拥有的：

```
Shape *createShape3D(float x, float y, float z, char *name) {
   Shape *s = (Shape *) malloc(sizeof(Shape));
   s->dimensions = 3;
   s->name = "Name..."; 

   // How can I initialize s2? 

   return s;
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T02:56:10.017

首先，您需要将名称 strcpy 转换为 s->name。

```
strcpy(s->name, "Name ..."); 
```

您可以将 s2 初始化为

```
s->description.s2.z = 0;
s->description.s2.base.x = 0;
s->description.s2.base.y = 0; 
```

您可以在一本书中阅读更多关于工会的信息。你也可以看这里

[http://c-faq.com/struct/union.html](http://c-faq.com/struct/union.html)

[http://c-faq.com/struct/initunion.html](http://c-faq.com/struct/initunion.html)

[http://c-faq.com/struct/taggedunion.html](http://c-faq.com/struct/taggedunion.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T02:59:03.987

你可以这样做：

```
 s->description.s2.base.x=1;
 s->description.s2.base.y=2;
 s->description.s2.z=3; 
```

如您所见，语法有时会变得有些繁重，因此定义用于访问指向结构的指针的单个坐标的函数可能是有意义的：

```
float getX(Shape *s) {
    if (dimensions == 2) {
        return s->structure.s1.x;
    } else {
        return s->structure.s2.base.x;
    }
}
void setX(Shape *s, float x) {
    if (dimensions == 2) {
        s->structure.s1.x = x;
    } else {
        s->structure.s2.base.x = x;
    }
}
// Define similar functions for Y and Z 
```

现在您的初始化例程将更改为更具可读性

```
setX(s, 1);
setY(s, 2);
setZ(s, 3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T02:59:41.590

```
Shape *createShape3D(float x, float y, float z, char *name) {
   Shape *s = (Shape *) malloc(sizeof(Shape));
   s->dimensions = 3;
   s->name = malloc (strlen(name) + 1);
   strcpy(s->name, name); // Copy the value of name
   s->description.s2.base.x = x;
   s->description.s2.base.y = y;
   s->description.s2.z = z;

   return s;
} 
```

还要确保`s->name`在释放之前释放内存`Shape* s`

# ios - 横向子视图未填充 self.view

> ID：15170165
> 
> 赞同：0
> 
> 时间：2013-03-02T02:53:47.303
> 
> 标签：ios, objective-c, orientation

我有一个 UIView，其子视图在旋转到横向模式后不想完全填充 self.view。我尝试了很多事情，从设置自动调整大小的蒙版到设置旋转后的子视图框架，它们要么不起作用，要么问题变得更糟。这是一个遇到此问题的 UINavigationBar 示例（导航栏未完全填充横向宽度）。编码：

```
- (void)loadView {
self.view = [[[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]] autorelease];
    self.view.backgroundColor = [UIColor blueColor];
    myBar =[[UINavigationBar alloc] init];
    myBar.frame = CGRectMake (0, 0, self.view.frame.size.width, 44);
    UINavigationItem *navItem =[[[UINavigationItem alloc] initWithTitle:@"Title"] autorelease];
    UIBarButtonItem *rightButton =[[[UIBarButtonItem alloc] initWithTitle: @"Email" style: UIBarButtonItemStylePlain target: self action:@selector (rightButtonPressed)] autorelease];
    navItem.rightBarButtonItem = rightButton;
    UIBarButtonItem *leftButton =[[[UIBarButtonItem alloc] initWithTitle: @"About" style: UIBarButtonItemStylePlain target: self action:@selector (leftButtonPressed)] autorelease];
    navItem.leftBarButtonItem = leftButton;
    myBar.barStyle = UIBarStyleDefault;
    myBar.items =[NSArray arrayWithObject:navItem];
    [self.view addSubview:myBar];
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return YES;
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T04:17:52.567

只需在代码末尾添加一行代码：

```
- (void)loadView
{
    self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
    self.view.backgroundColor = [UIColor blueColor];
    UINavigationBar *myBar;
    myBar =[[UINavigationBar alloc] init];
    myBar.frame = CGRectMake (0, 0, self.view.frame.size.width, 44);
    UINavigationItem *navItem =[[UINavigationItem alloc] initWithTitle:@"Title"];
    UIBarButtonItem *rightButton =[[UIBarButtonItem alloc] initWithTitle: @"Email" style: UIBarButtonItemStylePlain target: self action:@selector (rightButtonPressed)];
    navItem.rightBarButtonItem = rightButton;
    UIBarButtonItem *leftButton =[[UIBarButtonItem alloc] initWithTitle: @"About" style:     UIBarButtonItemStylePlain target: self action:@selector (leftButtonPressed)];
    navItem.leftBarButtonItem = leftButton;
    myBar.barStyle = UIBarStyleDefault;
    myBar.items =[NSArray arrayWithObject:navItem];
    [self.view addSubview:myBar];
    [myBar setAutoresizingMask:UIViewAutoresizingFlexibleWidth];
} 
```

我删除了自动释放，因为我使用了 ARC。您可以再次添加自动释放。有一个美好的一天的朋友。

# jquery - 从字符串创建命名空间对象来调用函数？

> ID：15170167
> 
> 赞同：0
> 
> 时间：2013-03-02T02:54:05.237
> 
> 标签：jquery, javascript

我有一个名称空间对象`form.iso.methodName`作为字符串，我想调用该方法。我无法创建像 [form][iso][methodName] 这样的命名空间对象

```
split : function(ns) { // ns namespace is object
    var splitNameSpace = ns.split('.');
    var methodName = splitNameSpace.pop();
    //console.log(splitNameSpace);
    var content = [];

    for (var i=0;i<splitNameSpace.length;i++){
        content = [splitNameSpace[i]];
        console.log(content);
    } 
```

**更新-找到解决方案**

```
split : function(ns) {
    var splitNameSpace = ns.split('.');
    var methodName = splitNameSpace.pop();
    //console.log(splitNameSpace);
    var content = [];
    var obj;
    for (var i=0;i<splitNameSpace.length;i++){
        obj = [splitNameSpace[i]];
    content = content+"["+obj+"]";

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T03:03:57.790

你可以这样做：

```
function namespace(ns){
    var d, o;
    n = ns.split('.');
    o = window[n[0]] = window[n[0]] || {};
    var l = n.length;
    for(var i=1; i<l; i++){
        o = o[n[i]] = o[n[i]] || {};
    }
    return o;
}

 var param = 'foo.bar.blah.methodName',
     method = param.split('.').pop(),
     ns = param.split('.').slice(0,-1).join('.'),
     obj = namespace(ns); 

 obj[method](); 
```

您可以通过检索全局对象而不是使用`window`

# c++ - 如何让 Qwt 接受触摸和多点触摸事件？

> ID：15170172
> 
> 赞同：1
> 
> 时间：2013-03-02T02:54:36.680
> 
> 标签：c++, qt, touch, qwt

我将 QwtPlot 子类化，如下所示：

```
class MyQwtPlot:public QwtPlot
{    
 public:    
 private:    
 protected:    
       bool event(QEvent *event);    
} 
```

但是该事件不接受触摸和多点触摸事件。谁能告诉我如何让它接受触摸事件？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:59:27.100

Qwt 背后的人写下了[这句话](http://www.qtcentre.org/archive/index.php/t-46868.html)。

当您的驱动程序支持多点触控时，我认为[QTouchEvent](http://qt-project.org/doc/qt-4.8/qtouchevent.html)类会对您有所帮助。特别注意以下几点：

> 要接收触摸事件，小部件必须设置 Qt::WA_AcceptTouchEvents 属性

# java - 不幸的是应用程序已停止工作

> ID：15170174
> 
> 赞同：4
> 
> 时间：2013-03-02T02:55:25.530
> 
> 标签：java, android, android-layout, android-emulator, classcastexception

我是android应用程序开发的新手。我正在做这个教程应用程序。这是一个非常简单的应用程序。它从计数器中加一并减一。当我在模拟器中运行它时，它说“不幸的是教程已停止工作。” 代码中没有错误。API级别是17。请帮帮我。

java的代码：

```
public class Startingpoint extends Activity {
  int counter=0;   
  Button add,subtract; 
  TextView display; 

  @Override    
  protected void onCreate(Bundle savedInstanceState) {    
    super.onCreate(savedInstanceState);    
    setContentView(R.layout.startingpoint);    
    add = (Button) findViewById(R.id.bAdd);    
    subtract= (Button) findViewById(R.id.bSubtract);   
    display= (Button) findViewById(R.id.text);    
    add.setOnClickListener(new View.OnClickListener() {

      @Override   
      public void onClick(View v) {   
        counter++;  
        display.setText("The total is " + counter);   
      }   
    });   

    subtract.setOnClickListener(new View.OnClickListener() {
      @Override 
      public void onClick(View v) {
        counter--;
        display.setText("The total is " + counter);
      }

    });
  }

  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.startingpoint, menu);
    return true;
  }
} 
```

xml中的布局代码：

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"  
              android:layout_width="fill_parent"    
              android:layout_height="fill_parent"     
              android:orientation="vertical" >  

    <TextView android:id="@+id/text"    
              android:layout_width="wrap_content"   
              android:layout_height="wrap_content"
              android:text="Your total is 0"
              android:textSize="35dp"
              android:layout_gravity="center"
              android:gravity="center"/>

    <Button   android:layout_width="250dp"
              android:layout_height="wrap_content"
              android:text="Add One" 
              android:layout_gravity="center" 
              android:textSize="25dp"
              android:id="@+id/bAdd"/>

     <Button  android:layout_width="250dp"
              android:layout_height="wrap_content"
              android:text="Subtract One" 
              android:layout_gravity="center" 
              android:textSize="25dp"
              android:id="@+id/bSubtract"/>
</LinearLayout> 
```

这是日志猫：

```
03-02 02:45:10.730: D/AndroidRuntime(780): Shutting down VM
03-02 02:45:10.730: W/dalvikvm(780): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
03-02 02:45:10.750: E/AndroidRuntime(780): FATAL EXCEPTION: main
03-02 02:45:10.750: E/AndroidRuntime(780): java.lang.RuntimeException: Unable to start activity ComponentInfo{tutorial.example.tutorial/tutorial.example.tutorial.Startingpoint}: java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.Button
03-02 02:45:10.750: E/AndroidRuntime(780):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-02 02:45:10.750: E/AndroidRuntime(780):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-02 02:45:10.750: E/AndroidRuntime(780):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-02 02:45:10.750: E/AndroidRuntime(780):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-02 02:45:10.750: E/AndroidRuntime(780):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-02 02:45:10.750: E/AndroidRuntime(780):  at android.os.Looper.loop(Looper.java:137)
03-02 02:45:10.750: E/AndroidRuntime(780):  at android.app.ActivityThread.main(ActivityThread.java:5041)
03-02 02:45:10.750: E/AndroidRuntime(780):  at java.lang.reflect.Method.invokeNative(Native Method)
03-02 02:45:10.750: E/AndroidRuntime(780):  at java.lang.reflect.Method.invoke(Method.java:511)
03-02 02:45:10.750: E/AndroidRuntime(780):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-02 02:45:10.750: E/AndroidRuntime(780):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-02 02:45:10.750: E/AndroidRuntime(780):  at dalvik.system.NativeStart.main(Native Method)
03-02 02:45:10.750: E/AndroidRuntime(780): Caused by: java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.Button
03-02 02:45:10.750: E/AndroidRuntime(780):  at tutorial.example.tutorial.Startingpoint.onCreate(Startingpoint.java:22)
03-02 02:45:10.750: E/AndroidRuntime(780):  at android.app.Activity.performCreate(Activity.java:5104)
03-02 02:45:10.750: E/AndroidRuntime(780):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-02 02:45:10.750: E/AndroidRuntime(780):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-02 02:45:10.750: E/AndroidRuntime(780):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T02:58:31.470

```
display= (Button) findViewById(R.id.text); 
```

应该

```
display= (TextView) findViewById(R.id.text); 
```

因为`display`应该引用一个`TextView`实例，但你明确地转换为 a `Button`，这些**不是**兼容的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T04:47:45.340

这次你从 AC 那里得到了答案，但是对于下一次在 android 应用程序开发中的一个重要建议：

始终查看 logcat 是否有错误，并查看“Caused by:”标签，它以足够详细的信息指定问题的原因，还可以查看导致该错误的行号。并尝试找出那行代码有什么问题。

例如：在您的 logcat 中，它显示-

```
Caused by: java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.Button 
at tutorial.example.tutorial.Startingpoint.onCreate(Startingpoint.java:22) 
```

所以你可以尝试阅读日志，你会明白在你的文件`Startingpoint.java`中`line 22`，`onCreate`方法中的错误是`android.widget.TextView cannot be cast to android.widget.Button`. 因此，您无需任何帮助即可轻松删除错误。希望这不仅可以帮助您解决当前的问题，还可以防止您未来的时间和精力。

# linux - Linux：如果同一行中的另一列以特定字符开始/结束，则替换特定列

> ID：15170175
> 
> 赞同：0
> 
> 时间：2013-03-02T02:55:26.400
> 
> 标签：linux, replace

我想在 linux shell 脚本中有条件地替换一些列。

我的数据是

```
ID         chr pos ver  
rs1234      1 12312 b1  
rs1245      1 21312 b1  
chr1:7576:D 1 22312 b1  
rs1002      1 34535 b1  
chr1:2434:D 1 34534 b1  
MER:1222    1 54645 b1  
rs2123      1 45645 b1 
```

如果第一列以“MER”开头或以“D”结尾，我想用“NA”替换第三列。所以最终文件如下

```
ID         chr pos    ver  
rs1234      1 12312   b1  
rs1245      1 21312   b1  
chr1:7576:D 1 **NA**  b1  
rs1002      1 34535   b1  
chr1:2434:D 1 **NA**  b1  
MER:1222    1 **NA**  b1  
rs2123      1 45645   b1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:41:45.590

这是使用 perl 单行的解决方案：

```
perl -pe 's/^(MER:.+?|.+?:D)(\s+\d+\s+)(\d+)(.*)$/$1$2**NA**$4/' foo.txt 
```

在 perl 中添加 -i 选项可以直接修改原始文件。

**以下是上述示例的更详细细分：**

您可以使用 s/match/replace/ 语法搜索和替换...

```
s/^(MER:.+?|.+?:D)(\s+\d+\s+)(\d+)(.*)$/$1$2**NA**$4/
^^                                     ^            ^ 
```

括号用于捕获要在替换中使用的匹配组。

```
s/^(MER:.+?|.+?:D)(\s+\d+\s+)(\d+)(.*)$/$1$2**NA**$4/
   ^_____________^^_________^^___^^__^
         $1           $2      $3   $4 
```

仅当正则表达式匹配时才会发生替换，因此括号中的第一组确定您的情况下的匹配。由于您想以 开头`MER:`或结尾`:D`，因此该`|`符号用于表示“或”。

正则表达式是一种强大的搜索和替换方式，许多工具和语言都支持它。值得在网上找到一个教程来更好地理解这种语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T03:39:12.570

这是一个解决方案`sed`

```
sed -e 's/\(\(MER:[0-9]\+\|[0-9:]D\)\s\+[0-9]\+\s\+\)[0-9]\+\(.*\)/\1**NA**\3/g' INPUTFILE 
```

这会产生

```
ID         chr pos ver  
rs1234      1 12312 b1  
rs1245      1 21312 b1  
chr1:7576:D 1 **NA** b1  
rs1002      1 34535 b1  
chr1:2434:D 1 **NA** b1  
MER:1222    1 **NA** b1  
rs2123      1 45645 b1 
```

但`awk`可能是去这里的方式。或者perl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T03:15:42.797

您可以通过以下方式实现此目的`awk`：

```
# awk '{if(NR!=1&&($1~/^MER/||$1~/D$/)){$3="N/A"} print $0}' INPUT > OUTPUT 
```

这将使用您的示例数据给出以下输出：

```
ID         chr pos ver  
rs1234      1 12312 b1  
rs1245      1 21312 b1  
chr1:7576:D 1 N/A b1
rs1002      1 34535 b1  
chr1:2434:D 1 N/A b1
MER:1222 1 N/A b1
rs2123      1 45645 b1 
```

如果你想保持格式并且你的列是固定宽度的，你可以使用一个`printf`语句来代替：

```
# awk '{if(NR!=1&&($1~/^MER/||$1~/D$/)){$3="N/A"} printf("%-As %Bs %Cs %Ds\n",$1,$2,$3,$4)}' INPUT > OUTPUT 
```

用表示所需列宽的整数替换 A、B、C 和 D。例如：

```
# awk '{if(NR!=1&&($1~/^MER/||$1~/D$/)){$3="N/A"} printf("%-11s  %1s  %5s %2s\n",$1,$2,$3,$4)}' INPUT > OUTPUT 
```

这使：

```
ID          chr   pos ver
rs1234       1  12312 b1
rs1245       1  21312 b1
chr1:7576:D  1    N/A b1
rs1002       1  34535 b1
chr1:2434:D  1    N/A b1
MER:1222     1    N/A b1
rs2123       1  45645 b1 
```

# php - 如何访问 htaccess 值（用户和密码）？

> ID：15170177
> 
> 赞同：-1
> 
> 时间：2013-03-02T02:55:45.787
> 
> 标签：php, .htaccess

如何通过 htaccess 弹出窗口访问用户输入的值？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:57:12.887

你试过这个吗？

```
$_SERVER['REMOTE_USER']; 
```

或者

```
$_SERVER['HTTP_AUTH_USER']; 
```

有了这个，你应该得到用户名。

# applescript - 如何处理 AppleScript 对话框响应？

> ID：15170180
> 
> 赞同：2
> 
> 时间：2013-03-02T02:56:05.797
> 
> 标签：applescript

我正在使用我编写的脚本来自动将我的动态 IP 写入 .txt 文件，但我的问题是当单击退出按钮时我无法关闭对话框。

```
set yn to (display dialog "Your ip has been written to the server, the application will re-run in 10 minutes if you DO NOT close this window." buttons {"Quit", "Run again"} giving up after 600)
if yn is equal to "Quit" then
quit
end if 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-03T17:26:54.013

我最终做的是

```
display alert "This is an alert" buttons {"No", "Yes"}
if button returned of result = "No" then
     display alert "No was clicked"
else
    if button returned of result = "Yes" then
         display alert "Yes was clicked"
    end if
end if 
```

您可以用您要运行的任何代码替换“显示警报“否/是被点击””行

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-02T04:00:48.947

弄清楚如何使用`yn`按下的按钮的最简单方法是查看`yn`：

```
set yn to (display dialog "Your ip has been written to the server, the application will re-run in 10 minutes if you DO NOT close this window." buttons {"Quit", "Run again"} giving up after 600)
return yn 
```

你会看到`yn`返回`{button returned:"Quit", gave up:false}`。这表明它`yn`有一个`button returned`可以在`if`语句中使用的属性。

解决这个问题的另一种方法是查看文档的 AppleScript 字典（文件 > 打开字典...），`display dialog`即 StandardAdditions 字典。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-16T16:21:40.337

要添加作为原始问题的答案，`giving up after`如果对话框确实超过了超时期限，我需要在我的脚本中做一些事情。这是考虑超时的附加选项：

```
set dialogTitle to "Star Wars Question"
set theDialog to display alert "Do you think Darh Maul should have his own movie?" buttons {"YES", "NO"} default button "YES" giving up after 10
if button returned of theDialog = "" then
    display notification "No decision was made, cancelled dialog" with title dialogTitle
else if button returned of theDialog = "YES" then
    display notification "I concur" with title dialogTitle
else if button returned of theDialog = "NO" then
    display notification "I find your lack of faith disturbing" with title dialogTitle
end if 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-15T23:31:52.510

```
display dialog ("An example dialog.") buttons {"Cancel", "OK"}

if button returned of result = "Button" then
 display dialog ("You clicked Button.")
end 
```

# javascript - 如何通过 id 和 class 获取元素

> ID：15170186
> 
> 赞同：11
> 
> 时间：2013-03-02T02:56:44.367
> 
> 标签：javascript, html, class, dom

是否有任何替代解决方案（在 JavaScript 中）`document.getElementById();`来选择特定元素，同时指定 class 和 id ？

例如我有这样一个内容：

```
<a class="q_href" onclick="showQuestion(1)">Question 1:</a>
<div class="q_content" id="1"></div>

<a class="q_href" onclick="showQuestion(2)">Question 2:</a>
<div class="q_content" id="2"></div> 
```

而我想在函数中的“问题X”链接下选择对应的div

```
function showQuestion(id)
{
var thediv = GetByClassAndId("q_content",id); // how to implement this function ?
WriteQuestionIn(thediv); //Ajax
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T03:03:12.110

你可以试试`document.querySelector()`

喜欢`document.querySelector(".q_content#2")`使用 para like css 选择器..

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-02T03:00:21.960

由于 ID 始终是唯一的（除非您犯了错误），您无需同时使用 class 和 id 来选择元素。
这种方法是不正确的，应该**不惜一切代价避免**。

我怀疑是你的问题，身份证只是一个数字。尝试添加一个字母前缀。请查看此页面的源代码以查看示例。

```
<a class="q_href" onclick="showQuestion(1)">Question 1:</a>
<div class="q_content" id="q1"></div>

<a class="q_href" onclick="showQuestion(2)">Question 2:</a>
<div class="q_content" id="q2"></div>

function showQuestion(id)
{
var thediv = document.getElementById("q"+id);
WriteQuestionIn(thediv); //Ajax
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-02T04:03:58.700

实际上`$`jQuery 中有一个函数可以执行此操作。如果您使用任何框架，那么您应该记住总有一个可用的 jQuery 库。否则，如果您使用自定义 PHP，则添加其中之一，如 jQuery 或其他，因为它们提供了许多类型的选择器。

现在这里是添加 jQuery 后的代码：

```
$("#yourid") //basic selector
$("#yourid.yourclass").show() 
```

用于`.show()`显示选中的元素

使用`.hide()`隐藏元素

# java - 平板电脑和手机之间的应用小部件尺寸不一致

> ID：15170187
> 
> 赞同：3
> 
> 时间：2013-03-02T02:56:48.713
> 
> 标签：java, android, android-view, homescreen, android-appwidget

我正在尝试设计一个应用程序，它重现标准应用程序快捷方式主屏幕图标的快捷方式样式，但作为小部件。请注意，这目前只是查看标准的 Android 主屏幕。

我使用 Eclipse 的 DDMS -> Devices 视图中的“Dump View Hierarchy for UI Automator”工具进行了以下观察： ![在此处输入图像描述](../Images/bffd2f92449a76e72e6bfaff55f6dcfe.png)

1 x 1 正方形中给出的空间会根据屏幕密度、方向以及手机主屏幕是处于“手机模式”还是“平板电脑模式”而变化（启动 4.x 模拟器，您可以通过背景来判断） ）。屏幕密度会按预期影响尺寸（0.75、1、1.5、2.0 密度因子缩放），但方向和“主屏幕模式”非常难以预测。具体来说：

* * *

**主屏幕上 1x1“正方形”的尺寸**

**电话模式：**

*   纵向：*80dp x 100dp = 4:5 纵横比*
*   横向（如果可用 - 未经彻底测试）：*106dp x 74dp = 53:37 纵横比*

**平板模式：**

*   纵向：*96dp x 96dp = 1:1 纵横比*
*   横向：*96dp x 96dp = 1:1 纵横比*

* * *

如您所见，几乎没有任何一致性，但这些是主屏幕上“正方形”的尺寸。当查看实际分配给小部件的空间时，情况会**变得更糟**（是的，它确实不同于系统快捷方式小部件可用和**使用的方形空间）：**

* * *

**尺寸赋予 1x1“正方形”中的小部件**

**电话模式：**

*   纵向：*80dp x 100dp = 4:5 纵横比*
*   横向（如果可用 - 未经彻底测试）：*90dp x 58dp = 45:29 纵横比*

**平板模式：**

*   纵向：*72dp x 72dp = 1:1 纵横比*
*   横向：*72dp x 72dp = 1:1 纵横比*

* * *

所以我坚持：

*   手机和平板电脑模式之间的纵横比不一致
*   在某些情况下，为应用程序小部件提供的区域比应用程序快捷方式的区域更小。因此，小部件的相对大小和感知大小在平板电脑和手机上看起来会非常不同？
*   较小的区域甚至没有垂直居中，它们大多与 2dp 上边距对齐，这意味着它们甚至看起来与相邻的应用程序快捷方式不对齐，更不用说尝试通过小部件

为了可视化，下图显示了默认的系统快捷方式（周围有一个红色框，显示“方形尺寸 - 系统快捷方式和小部件始终共享）。旁边是我的小部件，蓝色突出显示了`MATCH_PARENT`设置的边界，因此小部件实际上可以在其“正方形”内绘制：

电话 - 端口：![在此处输入图像描述](../Images/0e9180883e77e8cc31b2ea4741de4b5b.png)

平板电脑 - 土地：![在此处输入图像描述](../Images/f953100bc39830455453afac07ee38ea.png)

平板电脑 - 端口：![在此处输入图像描述](../Images/12ffd78f884a4402602577ba317c3b82.png)

从这里最重要的是，平板电脑上小部件的蓝色区域甚至不**包括**系统快捷方式绘制其文本的空间吗？

有没有人有见解：

1.  为什么主屏幕如此不一致？
2.  为什么应用程序小部件没有与系统快捷方式相同的绘图空间/或者应该是，我做错了什么？
3.  我应该做其他事情，还是只是接受对于占用其所有给定绘图空间的 1x1 小部件，它在平板电脑上看起来比在手机上看起来“更小”（与其周围环境相比）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T03:27:28.653

更好的是，许多启动器允许用户自定义其网格的大小。根据[App Widgets 的设计指南](http://developer.android.com/guide/practices/ui_guidelines/widget_design.html#anatomy_determining_size)，您不能依赖所有设备上的确切尺寸。相反，确定最小宽度和高度，并让主屏幕确定布局占用多少个正方形。

他们确实提供了一些关于您可以期望的最小单元大小的指导（并且您所有的数字都比看起来要大得多），但是自定义启动器可能再次将这个最小值降低到更低。

我发现最好关注您的布局中需要哪些组件（按钮等），然后遵循[Metrics and Grids 设计指南](http://developer.android.com/design/style/metrics-grids.html)来确定您的最小尺寸（注意边距会在 Android 4.0+ 设备上自动添加，但不会在 < 4.0 设备）。然后确保您的布局足够动态以填充提供给它们的空间（居中文本等，视情况而定）。请记住，小部件被假定为带框的单个条目，而不是[应用小部件设计指南](http://developer.android.com/guide/practices/ui_guidelines/widget_design.html#anatomy)中所述的浮动文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T04:02:13.407

嘿，您可以在要为不同屏幕尺寸以及横向和纵向创建不同布局的布局中管理屏幕尺寸。

在您的资源文件夹中创建以下布局，如下所示：

布局-大

布局小

布局-xlarge

布局-横向

然后将您的 XML 文件复制到其中并检查不同设备的预览屏幕，您可以根据该想法来修改主屏幕中小部件的大小。

# java - Java 数组，NullPointerException？

> ID：15170192
> 
> 赞同：0
> 
> 时间：2013-03-02T02:57:47.803
> 
> 标签：java, arrays, nullpointerexception

我宣布了两张牌：

```
Card card1 = new Card('3', Card.Suit.clubs);
Card card2 = new Card('T', Card.Suit.diamonds); 
```

这有效：

```
Hand hand1 = new Hand();

hand1.takeCard(card1); 
```

但是为什么这不起作用？它在第二行给了我一个 NullPointerException ：

```
Hand[] hand = new Hand[2];

hand[0].takeCard(card2); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T03:00:00.093

您正在声明一组 2 手牌。这只是设置阵列。然后，您需要在数组中实例化手形对象。

说

```
hand[0] = new Hand(); 
hand[1] = new Hand(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-02T03:59:41.833

我认为您需要完成此操作...我会清除您的概念...请尽可能参考Java教程..它很有帮助

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)

# clojure - 为什么`lein run`不是`lein trampoline`？

> ID：15170196
> 
> 赞同：27
> 
> 时间：2013-03-02T02:58:42.707
> 
> 标签：clojure, leiningen

`lein run`在我看来，和之间的唯一区别`lein trampoline`是后者退出 Leiningen 的 JVM 以节省内存。

这似乎总是一个好主意，那么为什么不包含这个功能`lein run`然后去掉`lein trampoline`呢？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-02T02:18:21.703

`lein trampoline`可用于任何 leiningen 任务，而不仅仅是`lein run`. 例如，`lein trampoline test`。

从本质上讲，`lein trampoline`杀死原始的 leiningen 进程，以便在任务开始运行时只有为运行 Clojure 内容而生成的实际 JVM 是活动的。这对于 shell 脚本很有用，因为杀死实际的 JVM 不会杀死 leiningen 进程，反之亦然。

# powershell - 在添加内容/一般 PS 格式方面遇到问题

> ID：15170213
> 
> 赞同：0
> 
> 时间：2013-03-02T03:00:44.837
> 
> 标签：powershell

所以....我正在尝试执行以下操作，但它不起作用，而且我确定它是语法（我对 PS 很陌生，所以请原谅我的菜鸟）。有什么建议吗？我基本上是在编写一个运行日志文件，其中的字段由冒号分隔，说明谁对我的脚本做了什么。非常感谢！！！

```
if(!(Test-Path C:\$env:COMPUTERNAME.txt -PathType Leaf){New-Item C:\$env:COMPUTERNAME.txt -ItemType File}

Add-Content "C:\$env:COMPUTERNAME.txt (Get-Date -Format g):$env:USERNAME:Parameters Issued:$var1:$var2" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:28:01.180

你可以试试这个：

```
if(!(Test-Path "C:\$env:COMPUTERNAME.txt" -PathType Leaf))
{New-Item "C:\$env:COMPUTERNAME.txt" -ItemType File}

Add-Content "C:\$env:COMPUTERNAME.txt" "$(Get-Date -Format g):$($env:USERNAME):Parameters Issued:$var1:$var2" 
```

它必须以管理员身份运行才能写入系统驱动器的根目录。

# c# - 如果它们不在 ac# 字典中，则从字符串中删除它们

> ID：15170214
> 
> 赞同：0
> 
> 时间：2013-03-02T03:00:47.850
> 
> 标签：c#, dictionary, calculator

我目前正在制作一个简单的计算器应用程序，只是为了提高我的技能，尽管我正在尝试以一种高级的方式来做......这是字典：

```
operators = new Dictionary<string, string>(50); 
```

然后我添加运算符，例如：

```
operators.add(plus, "+"); 
```

这一切都很好，但如果字符串中有一些东西我解析成它`5 x 6`而不是`5 * 6`它会失败。所以我的问题是如何从不在字典中的字符串中删除所有单词？

谢谢

PS我正在构建一个数学解析器，所以我像这样使用它：

```
Mathparser.Parse("5 * 6"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:02:43.787

```
var s = "5 x 3".Where(c => !operators.ContainsValue(c.ToString())).ToArray();
string NotInDictionary = new string(s); 
```

不知道你要去哪里......你不能用“*”替换“x”吗？

# mongodb - 在 mongodb 上更新子文档的问题

> ID：15170216
> 
> 赞同：2
> 
> 时间：2013-03-02T03:01:22.913
> 
> 标签：mongodb, nosql

假设我有一个集合`allitems`，其中每个文档的格式为

```
{_id: "1", items: [{number: 1, main: "how are you?", sub:[{id:1, item: "does it change with the day?", score: 0},{id:2, item:"some other question", score: 0}]}]} 
```

如何更新子项的分数？

我试过了

```
 db.allitems.update({_id:"1"}, {$set:{'items.0.sub.0.score': 5}}); 
```

我收到此错误：

```
error: {
    "$err" : "Unsupported projection option: items.0.sub.0.score",
    "code" : 13097
} 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T04:18:55.357

您需要使用`$set`代替`set`并引用使用点表示法的键。

```
db.allitems.update({_id:"1"}, {$set: {'items.0.sub.0.score': 5}}) 
```

# javascript - 如何在 Sencha Touch datepickerfield 中引用“完成”按钮

> ID：15170219
> 
> 赞同：1
> 
> 时间：2013-03-02T03:02:09.263
> 
> 标签：javascript, controller, sencha-touch

当用户从 datepickerfield 组件中选择一个日期时（当他们点击内置的“完成”按钮时），我需要触发一个事件。我试图参考按钮的“动作”等，但没有运气。

任何有关如何从 datepickerfield“完成”按钮创建 ref（或处理程序或侦听器）的信息将不胜感激。

以下是我的观点的一部分：

```
 items:[{
                xtype:  'button',
                align:  'right',
                text:   'Mark all present',
                action: 'markAllPresent'
            },
            {
                xtype:   'datepickerfield',
                cls:    'pickAdate',
                align:  'left',
                label:  'Date',
                name:   'date',
                value:   new Date(),
                picker    : {
                    yearFrom: 2012,
                    toolbar : {
                        items : [
                            {
                                xtype:  'button',
                                ui:     'confirm',
                                text:   'Today',
                                align:  'right',
                                handler: function(button, event) {
                                    var picker = button.up('datepicker');
                                    picker.fireEvent('change', picker, Ext.DateExtras.clearTime(new Date()));
                                    //Today button , clear date
                                }
                            }
                        ]
                    }
                },
                doneButton:{
                    action: 'dateDone'  //THIS DOES NOTHING ---------==============
                },
                listeners: {

                    change: function(picker, date) {
                        console.log(date);
                        var store = Ext.create('Ext.data.Store', {
                            model: 'App.model.NewDateModel',
                            id:'DateStore'
                        });
                        store.add(date);
                        store.setData(date);
                        store.sync();

                        this.fireEvent("newDatePicked", this); 
                        // **DOES NOT FIRE EVENT IN MY CONTROLLER================

                    }
                }
            }] 
```

我的控制器：

```
config: {
    control: {
        doneButton: {
            newDatePicked: 'newDatePicked'
        }
    },
    refs: {
        doneButton: 'button[action=dateDone]'
    }
},

newDatePicked: function(list, record) {
  .....
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T03:11:47.367

尝试在控制器中使用[更改](http://docs.sencha.com/touch/2-1/#!/api/Ext.field.DatePicker-event-change)事件，

```
control: {
    "datepickerfield[itemId=giveItemID]": {
        change: 'newDatePicked'
    }
}, 
```

你应该给你的 datepickerfield 一个 itemId 并用它替换“giveItemID”。

# c# - linq 数据类中的空引用对象

> ID：15170224
> 
> 赞同：0
> 
> 时间：2013-03-02T03:02:43.770
> 
> 标签：c#, asp.net, mysql, linq

我在 mysql "Customers" 中创建了一个表，并创建了一个 devart linq 连接模型。

当我想使用`linq`它检索第一行时`null reference exception`

> （*对象引用未设置为对象的实例。*）

我的代码是：

```
protected void Page_Load(object sender, EventArgs e)
{
    using (ShoppingDataContext data = new ShoppingDataContext())
    {              
        Customer Mycustomer = data.Customers.First();
        Labelshow.Text = Mycustomer.CustomerLastname;
    }
} 
```

# html - 为什么我的外部 CSS 在 FF 或 IE 中不起作用，但在 Chrome 中起作用？

> ID：15170230
> 
> 赞同：2
> 
> 时间：2013-03-02T03:03:37.967
> 
> 标签：html, css, cross-browser

当我在 Chrome 中运行我的（非常基本的）页面时，它会以正确的大小、颜色和位置显示标题和列表。背景图像也适合屏幕。但是当我在 FF 或 IE 中运行我的页面时，没有背景图像，并且标题和列表没有我的 CSS 位置、颜色或大小。

我在下面复制了我的代码。我的问题是：如何让我的标题和列表在所有/大多数浏览器中以正确的大小、颜色和位置显示在我在 CSS 中设置的位置？也用于显示背景图像。我希望这不是太笼统。请帮忙！

这是我的 HTML：

```
<!DOCTYPE html> 
<html>
  <head>
    <link rel="stylesheet" type="txt/css" href="C:///****/*****/Desktop/FifaStream1.0/indexstyle.css"/>
    <title> Fifa Stream </title>
  </head>
  <body>
    <h1 id="Title1"> <font color="grey"> Fifa  </font color> <font color="red">Stream </font color></h1>
    <nav class="IndexList">
      <li> <a href="HomePage.html"> Home <br> <br> </a> </li>
      <li> <a href="YoutubePage.html"> Youtube <br> <br> </a> </li>
      <li> <a href="AboutUs.html"> About Us <br> <br> </a> </li>
    <nav>
  </body>
</html> 
```

这是我的 CSS：

```
body {
  font-family: "proxima-nova",sans-serif;
  background:url(fifa13messi.png);
  -moz-background:url(fifa13messi.png);
  background-size:100%;
  -moz-background-size:100%; /* Old Firefox */
  background-repeat:no-repeat;
}

#Title1 {
  position:relative;
  left:5%;
  top:5%;
  font-size: 3em;
}

.IndexList {
  list-style: none;
  position:relative;
  left:5%;
  top:40%;
  font-size:2em;
  font-weight: 600;
  letter-spacing: -1px;
}

a {
  color:white;
  text-decoration: none;
} 
```

如果有人能解释我出错的地方或原因，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T03:05:04.597

`type`属性应该是，`text/css`不是`txt/css`。IE 和 Firefox （正确地）因为不匹配而拒绝它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T03:23:55.667

因为`<li>`元素不能是元素的子`<nav>`元素 - 它们只能是`<ul>`or元素的子`<ol>`元素......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T04:24:13.790

我想说的第一件事是尝试做聪明的工作，使用一些 html 编辑器，如 Dreamweaver 或其他为codig 提供提示的工具。

现在逐点列出您编码中的问题

1.  链接 css 的类型属性应该是 text/css。不是。文本/CSS

2.  尝试在创建标签后关闭标签。这将始终使所有标签都关闭。Bcz 你的导航标签没有关闭，而是创建了两个导航标签而不关闭它们。

3.  li 标签应该用 'o' 或 'ul' 包裹

谢谢。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-02T03:11:00.973

您的`<nav>`标签需要一个`</nav>`结束标签，而不是第二个`<nav>`。

# php - 在标头中调用的自定义 php 函数

> ID：15170248
> 
> 赞同：0
> 
> 时间：2013-03-02T03:08:02.457
> 
> 标签：php, javascript, css, wordpress, header

我有一个 Wordpress 网站。我正在寻求帮助，因为我不擅长代码，但对函数的流程和所有内容有所了解。

我想添加一个新的 PHP 函数，该函数将在单独的文件中定义。要定义的函数需要在站点的标题区域顶部提供 728x90 横幅广告（所以我猜 php 函数也将具有 CSS 样式以将广告对齐在中心）。我不知道我所说的会不会像我所说的那样。

或者，可能有一种方法可以调用在单独文件中定义的 js 函数，然后在 php 标头中调用以提供横幅（再次居中对齐）。

我在这里寻求帮助，因为 Stackoverflow 以前也帮助我解决了问题。

有没有人可以帮我完成这件事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:51:16.127

将 PHP 处理程序写入单独的文件后，使用`require_once`如下方式调用它：

```
<?php
require_once('myfile.php');

// Wordpress Stuff
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T03:56:39.990

我猜 PHP 与 CSS/样式没有关系，你可以用 Javascript 来做。

[像这样](http://www.w3schools.com/jsref/dom_obj_style.asp)或[使用 JQuery](http://api.jquery.com/css/)

# pointers - 无法获得指向在 Gambit-C 方案的 FFI 中工作的指针的指针

> ID：15170249
> 
> 赞同：0
> 
> 时间：2013-03-02T03:08:15.530
> 
> 标签：pointers, scheme, ffi, gambit

我正在使用 Gambit-C 包装我的图形引擎 API，并且到目前为止在 FFI 方面取得了成功。今天我遇到了一个我无法轻易解决的新问题。

我在C中有这样的结构：

```
typedef struct render_list_rec
{
    long render_id;
    render_node* node;
    struct render_list_rec* next; 
} render_list; 
```

在 C 语言中，我还有一系列由宏定义的函数，用于添加常见的列表行为。然后最终看起来像这样：

```
void render_list_item_add(render_list_item **list, render_list_item* elem); 
```

在 C 中，您可以有一个为 NULL 的 render_list_item*，但可以将其传递给此函数的第一个参数，它实际上会为您创建列表的头部。

我的问题是我无法让这种行为在 Gambit-C 的 FFI 中起作用。我最终创建了这样的东西：

```
(c-define-type render-list* (pointer (struct "render_list_rec")))
(c-define-type render-list** (pointer (pointer (struct "render_list_rec"))))
(define render-list-add-item (c-lambda (render-list** long render-node*) render-list* "render_list_add_item")) 
```

当我运行它时，它会出现段错误。经调查，**render-list-add-item**过程的**___arg1**为**NULL**。无论我尝试什么，我都无法在 FFI 中获得有效的（指针（pointer））。

 ****我有什么遗漏的吗？

==================================================== ==========

一个完整的方案示例：

```
(c-declare #<<c-decl-end
#include <stdio.h>
#include <stdlib.h>

typedef struct test_rec
{
    int i;
} test_rec;

void pointer_test(struct test_rec** in_number)
{
  if (in_number == NULL) {
    fprintf(stdout, "pointer_test is NULL\n");
  }
}

test_rec* new_pointer_test(void)
{
return malloc(sizeof(struct test_rec));
}

c-decl-end
)

(c-define-type test-rec* (pointer (struct "test_rec")))
(define c-pointer-test (c-lambda ((pointer test-rec*)) void "pointer_test"))
(define c-new-pointer-test (c-lambda () test-rec* "new_pointer_test"))
(define test-rec->i-set! (c-lambda (test-rec* int) void "___arg1->i = ___arg2;"))

(display "About to run test with #f ...") (newline)
(define the_false #f)
(c-pointer-test the_false)

(display "About to run test with 1 ...") (newline)
(define number_one (c-new-pointer-test))
(test-rec->i-set! number_one 1)
(c-pointer-test number_one) 
```

编译：

```
gsc -o test -exe  test.scm 
```

给出输出：

```
About to run test with #f ...
pointer_test is NULL
About to run test with 1 ...
*** ERROR IN ##execute-program -- (Argument 1) Can't convert to C pointer
(c-pointer-test '#<|struct test_rec*| #2 0x28d3fc0>) 
```

==================================================== ==========

**编辑：**

*Felix：你能举一些例子来说明你是如何调用 render-list-add-item 的吗？*

用于此的 C 代码如下所示：

```
pg_render_list *ui_render_list = NULL;
pg_render_node *ui_node = pg_font_generate_text_string(app_font, L"Lacunarity:", ui_text_material);
pg_render_list_create_item(&ui_render_list, UI_ID_TEXT, ui_node); 
```

它是基于[sglib](http://sglib.sourceforge.net/)的列表实现。当这些传递一个指向空指针的指针时，如上所述，它会创建一个新的列表项作为列表的头部，以便 *ui_render_list 指向它。

方案代码看起来像这样（从内存中输入）：

```
(define ui-render-list #f)
(letrec ((model-data (pg-model-data-read-binary model-filepath))
          (model-node (pg-render-node-create-fom-model model-data GL_STATIC_DRAW)))
  (pg-render-list-item-add ui-render-list model-data)) 
```

希望有类似的行为。从查看文档看来，在 C API 中有 #f 会转换为 NULL，但我认为 (pointer (pointer)) 可能会抓住这一点。即使传递绑定到某物的变量也总是会导致 NULL 值。我通过在（c-declare）中创建一个简单地打印指针地址的函数来测试这一点：

如果你想看到我的完整包装器在运行，你可以[在这里查看这个提交](https://bitbucket.org/tbogdala/portableglue/src/90c62eea34bc/common_gambit/portable_glue.scm?at=default)

===========================================

如何让（指针（pointer））工作的问题仍然存在。但我认为，为了更快的结果，以及与其他语言更好的互操作性，我将重写我的 C 列表宏来定义一个列表结构，该结构将包含指向列表头/尾的指针，如“掌握 C 算法”中所示. 这样就不需要指向指针的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:02:33.037

也许我误解了，但是当你有

```
(define ui-render-list #f) 
```

那么我会认为表达式：

```
(pg-render-list-item-add ui-render-list model-data) 
```

会表现得像：

> “`pg-render-list-item-add`用实际的参数`#f`和任何`model-data`表示的东西调用。

然后，当 Gambit-C FFI从 Scheme 越过边界到 C 时，它会将Scheme 值`#f`转换为 C 值`NULL`（即）。`0`

这与：

> `pg-render-list-item-add`“使用*地址* `<addr>`和任何`model-data`指示调用”`<addr>`意味着成为由 . 创建的项目的接收者`pg-render-list-item-add`。

C 语句：

```
pg_render_list_create_item(&ui_render_list, UI_ID_TEXT, ui_node); 
```

正在获取`ui_render_list`变量的地址（例如，可以在堆栈上分配），并将该地址传递给`pg_render_list_create_item`. 这与将值作为第一个参数传递给*非常*不同，它看起来像这样：`NULL``pg_render_list_create_item`

```
pg_render_list_create_item(ui_render_list, UI_ID_TEXT, ui_node); 
```

注意没有 & 符号`&`；这是一个关键的区别。

我还没有花时间尝试自己在 Gambit-C 中编写你的示例，但我想你可以实现你想要的效果的一种方法是自己分配接收内存（通过挂接到`malloc`FFI 中的函数），然后一旦你分配了内存，你就会有一个地址，你可以将它作为第一个参数传递给`pg-render-list-item`.****

# string - 从R中的字符串中删除某些字符

> ID：15170250
> 
> 赞同：42
> 
> 时间：2013-03-02T03:08:33.703
> 
> 标签：string, r

我在 R 中有一个包含大量单词的字符串。查看字符串时，我得到大量文本，其中包括类似于以下内容的文本：

```
>docs

....

\u009cYes yes for ever for ever the boys cried in their ringing voices with softened faces

.... 
```

所以我想知道如何从字符串中删除这些 \u009 字符（所有这些字符，其中一些数字略有不同）。我尝试过使用`gsub()`，但这对于从字符串中删除内容无效。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-02T04:06:12.660

这应该工作

```
gsub('\u009c','','\u009cYes yes for ever for ever the boys ')
"Yes yes for ever for ever the boys " 
```

这里 009c 是 unicode 的十六进制数。您必须始终指定 4 个十六进制数字。如果你有很多，一种解决方案是用管道将它们分开：

```
gsub('\u009c|\u00F0','','\u009cYes yes \u00F0for ever for ever the boys and the girls')

"Yes yes for ever for ever the boys and the girls" 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-04-19T10:53:29.060

尝试： `gsub('\\$', '', '$5.00$')`

# javascript - jQuery：我看到了 append、prepend、appendTo，那么取出内容呢？

> ID：15170252
> 
> 赞同：0
> 
> 时间：2013-03-02T03:08:40.753
> 
> 标签：javascript, jquery

我看到各种 jQuery 选项，例如 append、prepend、appedTo 等，但我只想取出 div 的内容并将其附加到 body 内部。整个内容，所以不是使用 .html() 而是加载其他 div。这些 div 也可能附加了事件，所以我不想把它们都搞砸。

```
<div id="main">
    <div id="anything" class="anything">
        <p>hello etc.</p>
    </div>
</div> 
```

所以我需要取出 id="main" 里面的所有东西

所以，像 $('#main').get-its-contents-and-append-to('body') 这样的东西就可以了。

我想我可以写一个冗长的脚本，但必须有一个简单的单行 jQuery 选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T03:12:41.497

像这样的东西：

```
$('#main').detach().children().appendTo('body'); 
```

`.detach()`如果您想将`#main`div 留在原处但为空，请省略该部分。

这将保留与被移动元素关联的任何事件处理程序或数据，如您在此处看到的：http: [//jsbin.com/iguqew/1/edit](http://jsbin.com/iguqew/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T03:12:06.400

您应该能够使用`append`：

```
$("body").append($("#main").html());
$("#main").empty(); 
```

您也可以这样做，这应该保持事件处理程序到位：

```
$('body').append($("#main").children()); 
```

# jquery - 提交有关更改 Jquery 的表单

> ID：15170254
> 
> 赞同：0
> 
> 时间：2013-03-02T03:08:48.150
> 
> 标签：jquery, forms, post, submit

我正在尝试以编程方式提交此表单，`iframe`以便我可以将图像添加到数据库...

代码：

```
var item_id = $("#itemid").text();
  var link = $("#mainIMG").attr("src");
   $('#curItem').append('<iframe border="none" width="600px" height="600px" id="uploadIframe"></iframe>')
  $('#uploadIframe').contents().find('body').append('<form name="addImgForm" enctype="multipart/form-data" id="addImgForm" action="addImageForm.php" method="POST"></form>');
  $('#uploadIframe').contents().find('#addImgForm').append('<input id="newIMG" type="file" name="file">')
  .append('<input name="item_id" value="'+item_id+'" type="text"/>')
  .append('<input name="link" type="text" value="'+link+'"/>')
  .append('<input id="IframeSub" type="submit"/>');
  $('#uploadIframe').contents().find('body').append('<script type="text/javascript" src="../JS/editItem.js"></script>');
  $('#uploadIframe').contents().find("#newIMG").trigger('click');
  $('#uploadIframe').contents().find("#newIMG").change(function (){
    $('#uploadIframe').contents().find('#addImgForm [name=addImgForm]').submit();
}); 
```

到目前为止，我已经尝试过：

1.  将提交表单的脚本插入 iframe 的头部。

2.  使用将提交它的函数引用同一个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:51:06.103

好吧..似乎有所作为的是`[name=addItemForm]`。有趣的是……当我在工作中做同样的事情时，这不起作用。我必须像以前一样提交表格

`$('#uploadIframe').contents().find('#addImgForm [name=addImgForm]').submit();`

奇怪的是它没有用。这就是有效的......现在...... :)

```
 var item_id = $("#itemid").text();
  var link = $("#mainIMG").attr("src");

  $('#curItem').append('<iframe border="none" width="600px" height="600px" id="uploadIframe"></iframe>')
  $('#uploadIframe').contents().find('body').append('<form name="addImgForm" enctype="multipart/form-data" id="addImgForm" action="addImageForm.php" method="POST"></form>');
  $('#uploadIframe').contents().find('#addImgForm').append('<input id="newIMG" type="file" name="file">')
  .append('<input name="item_id" value="'+item_id+'" type="text"/>')
  .append('<input name="link" type="text" value="'+link+'"/>')
  .append('<input id="IframeSub" type="submit"/>');
  $('#uploadIframe').contents().find("#newIMG").trigger('click');
  $('#uploadIframe').contents().find('body').append('<script type="text/javascript" src="../JS/editItem.js"></script>');

  $('#uploadIframe').contents().find('#newIMG').change(function (){
    $('#uploadIframe').contents().find("#addImgForm").submit();
  }); 
```

# map - OpenLayers：移动窗口上的坐标错误

> ID：15170255
> 
> 赞同：1
> 
> 时间：2013-03-02T03:09:19.177
> 
> 标签：map, window, openlayers

我正在使用 OpenLayers 库在我的网页中呈现地图。地图显示在弹出窗口中。

我正在使用 getLonLatFromPixel 查询纬度和经度。

但是，每当我移动地图窗口时，它都会显示错误的坐标。

例如，如果我将地图窗口向右移动，它会在正确的坐标中添加一些值。

# objective-c - UIButton 出现在错误的层 - Cocos2D

> ID：15170258
> 
> 赞同：0
> 
> 时间：2013-03-02T03:10:02.343
> 
> 标签：objective-c, cocos2d-iphone, uibutton, apple-push-notifications

我在我的游戏中使用 appoxee 消息服务..

我的第一层是“StartUpLayer” StartUpLayer 等待 StageLayer 完成加载......然后进入声明我的 UIButton 的舞台层......

但是我的 UIButton 第一次出现在 StartUpLater 中并一直存在直到它被释放。我该如何解决这个问题？谢谢..

应用委托

```
- (void) AppoxeeNeedsToUpdateBadge:(int)badgeNum hasNumberChanged:(BOOL)hasNumberChanged
{

    if(badgeNum > 0)
    {
        badgeText = [NSString stringWithFormat:@"%d",badgeNum];
    }

    StageLayer *stgLayer = [[StageLayer alloc] init];

    [[AppoxeeManager sharedManager] addBadgeToView:stgLayer.AppoxeeButton  badgeText:badgeText badgeLocation:CGPointMake(0,0) shouldFlashBadge:hasNumberChanged]; 

    [UIApplication sharedApplication].applicationIconBadgeNumber = badgeNum;
} 
```

阶段层初始化

```
AppoxeeButton = [[UIButton alloc] initWithFrame:CGRectMake(100,100,100,100)];
            [AppoxeeButton setBackgroundImage:[UIImage imageNamed:@"messages-button.png"] forState:UIControlStateNormal];
            [AppoxeeButton setTitle:@"" forState:UIControlStateNormal];
            [AppoxeeButton addTarget:self action:@selector(inboxPressed) forControlEvents:UIControlEventTouchUpInside];
            [[[CCDirector sharedDirector] openGLView] addSubview:AppoxeeButton]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T05:28:16.637

`AproxeeButton`在 startUpLayer 中没有出现，但它出现在 CCDirector openGL 视图中。这就是为什么它总是在所有 cocos2d 节点和层的顶部。

关于为什么它在 startUpLayer 时显示的问题的答案

`StageLayer *stgLayer = [[StageLayer alloc] init];`在 AppDelegate 中调用，所以`AproxeeButton` 在应用程序启动后显示。

# assembly - 如何使用大数？

> ID：15170259
> 
> 赞同：0
> 
> 时间：2013-03-02T03:10:10.283
> 
> 标签：assembly, nasm, fasm

如何使用大数？像 3441881739,30000000 等

```
mov eax,3441881739 
```

在这种情况下，eax 值为负数。如何解决？分吗？如何？我还需要执行 add/sub/mul/div 等`cmp`操作。

有人可以解释并举例说明如何做到这一点吗？

我标记`fasm`和`nasm`标记，但也欢迎其他组件。我在 32 位机器上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T03:11:18.857

您在汇编中执行此操作的方式与在纸上执行此操作的方式相同（长加法、长乘法、长除法）。你把数字分成几部分，你携带，你借，等等。

如果您只能保存 0 到 9 之间的数字，您会将 32 视为 (10*3 + 2) 或“32”。要添加，您添加较低的部分，如果需要，请携带，然后添加较高的部分。要减去，您更改符号并添加。要相乘，您可以使用：

(A*X + B) (C*X + D) = AC*X^2 + (AD+BC)*X + BD

这与您执行“32 * 12”的方式相同 (3*10 + 2)(1*10 + 2) = (3*1)*100 + (2*1+3*2)*10 + 2*2 = 384

要进行除法，您可以像在纸上学到的那样进行长除法。

（记住所有那些说你必须知道数学才能编程的人。这是众多原因之一。你必须将事物分解成非常小的部分才能在组装中对计算机进行编程。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T03:17:00.270

如果要处理大于 2 ^(32) -1 的数字，则需要进行多精度算术。例如，要添加一对 64 位数字，您可以执行以下操作：

```
mov eax, A_1    ; essentially C = A + B
mov edx, B_1
add eax, edx    ; note that for the low word, we just add
mov C_1, eax
mov eax, A_2
mov edx, B_2
adc eax, edx    ; but for the high word, we add with carry
mov C_2, eax 
```

访问进位意味着这比大多数高级语言要简单得多。还有一个带借位的减法，使多词减法也很容易。乘法和除法有点依赖。正常的 32x32 位乘法产生 64 位结果（eax 中的低位字，edx 中的高位字）。如果您想要 64x64 位乘法（给出 128 位结果），您需要自己实现。

例如，乘法（不使用内置的 mul/imul 指令）可以这样完成：

```
mult proc
; multiplies eax by ebx and places result in edx:ecx
    xor ecx, ecx
    xor edx, edx
mul1:
    test ebx, 1
    jz  mul2
    add ecx, eax
    adc edx, 0
mul2:
    shr ebx, 1
    shl eax, 1
    test ebx, ebx
    jnz  mul1
done:
    ret
mult endp 
```

# uitableview - iOS 6 表格滚动导致问题

> ID：15170260
> 
> 赞同：0
> 
> 时间：2013-03-02T03:10:14.793
> 
> 标签：uitableview, ios6, uiscrollview

我的表格视图中有两个部分，一个用于测试状态，一个用于结果。

第一部分的第三行在测试完成后更改。在测试期间，它会记录完成百分比，并在它更改为显示是否检测到任何问题之后。

文本的颜色也会改变以指示坏/好/好。对于这个特定的测试，大约有 20 行结果。

问题在于，在这 20 个结果中，两个单元格被视为第一节中的第三个单元格并变成红色。

现在我假设当我滚动表格时会重新加载，这一定意味着我的代码不正确，并且只有通过具有大量结果的测试才能显示出来。任何帮助都会很棒。我怀疑是下面的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    UITableViewCell *serverLoc = [tableView dequeueReusableCellWithIdentifier:@"speedCell"];
    //   UITableViewCell *switchCell = [tableView dequeueReusableCellWithIdentifier:@"switchCell"];

    switch (indexPath.section) {
        case 0:
            switch (indexPath.row) {
                case 0:
                    serverLoc.textLabel.text = @"Test location:";
                    serverLoc.detailTextLabel.text = testLocation;
                    serverLoc.selectionStyle = UITableViewCellSelectionStyleNone;
                    serverLoc.userInteractionEnabled = NO;
                    break;
                case 1:
                    serverLoc.textLabel.text = @"Status:";
                    serverLoc.detailTextLabel.text = statusText;
                    serverLoc.selectionStyle = UITableViewCellSelectionStyleNone;
                    serverLoc.userInteractionEnabled = NO;
                    break;
                case 2:
                    if ([TestEnded isEqualToString:@"no"]) {
                        serverLoc.textLabel.text = @"Progress";
                        serverLoc.selectionStyle = UITableViewCellSelectionStyleNone;
                        serverLoc.userInteractionEnabled = NO;
                        serverLoc.detailTextLabel.text = [NSString stringWithFormat:@"%ld%%", (long)progressInt];
                        break;
                    }
                    else {

                        serverLoc.selectionStyle = UITableViewCellSelectionStyleBlue;
                        serverLoc.userInteractionEnabled = YES;
                        serverLoc.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
                        serverLoc.textLabel.text = @"Problems Detected:";
                        serverLoc.detailTextLabel.text = [NSString stringWithFormat:@"%ld", (long)problemsDetected];

                        if (problemsDetected == 0) {
                            serverLoc.textLabel.textColor = [UIColor colorWithRed:0.0 / 255 green:102.0 / 255 blue:51.0 / 255 alpha:1.0];
                            serverLoc.detailTextLabel.textColor = [UIColor colorWithRed:0.0 / 255 green:102.0 / 255 blue:51.0 / 255 alpha:1.0];
                        }
                        else if (problemsDetected == 1) {
                            serverLoc.textLabel.textColor = [UIColor colorWithRed:226.0 / 255 green:232.0 / 255 blue:52.0 / 255 alpha:1.0];
                            serverLoc.detailTextLabel.textColor = [UIColor colorWithRed:226.0 / 255 green:232.0 / 255 blue:52.0 / 255 alpha:1.0];
                        }
                        else {
                            serverLoc.textLabel.textColor = [UIColor redColor];
                            serverLoc.detailTextLabel.textColor = [UIColor redColor];
                        }

                    }
                    break;    
            }
            break; 
```

当我第一次实施它时，我不确定它是否会起作用。它“确实”但显然我不需要滚动到足以揭示错误的程度。

在此先感谢您的任何指点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:46:22.663

此处的代码看起来不错...听起来您的表正在重用为此特定路径设置的单元格，但在重用单元格之前未将值返回为默认值。（例如，在 == 1 部分的情况下：severLoc.textLabel.textColor = [UIColor blackColor];）如果情况 0,0 和 0,1 在抓取重复使用的单元格时以 0,2 单元格结束，这也会显示出来。

# html - 为什么在 html 中使用样式属性不好？

> ID：15170261
> 
> 赞同：15
> 
> 时间：2013-03-02T03:10:39.880
> 
> 标签：html, css

有人告诉我，并且读到在 html 中使用 style 属性被认为是糟糕/草率/差的形式。此外，所有渲染特定位都应酌情分成 css 和其他部分。我试图理解为什么会这样。

我可以理解为什么您可能希望将 HTML 保留为纯语义 DOM，这说明了文档的结构，但对于实际页面，重要的是页面看起来正确且功能适当。

这种分离还有一些更令人信服的理由吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-02T03:26:51.977

*   **关注点分离**这使得在不更改标记的情况下替换样式变得容易，反之亦然。另外，你可以让一个人负责 CSS，另一个人负责内容

*   **不要重复自己**您可以将样式应用于许多元素，而无需一遍又一遍地重复。较小的页面意味着使用更少的带宽更快的加载时间。另外，以后修改更容易，因为您可以在一个文件中的一处进行更改，而不是在许多文件中的许多地方进行更改。

*   **可缓存性**如果站点的每个页面都使用相同的样式表，浏览器可以下载一次然后缓存它，而不是下载每个页面内容的样式。每当这些页面的内容发生变化时，他们就不必重新下载它。

*   **多个版本**创建站点的视觉布局和外观的多个版本很容易，因为您只需更换样式表文件即可更改每个页面的外观。例如，您可以创建一个 Web 应用程序的白标版本，您的合作伙伴可以对其进行重新皮肤以匹配他们的品牌。请参阅[CSS Zen Garden](http://www.csszengarden.com/)，了解有关这种方法的灵活性的一些很好的示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T03:21:14.480

从这段代码开始：

```
<ul>
    <li style="color: blue;">One</li>
    <li style="color: blue;">Two</li>
    <li style="color: blue;">Three</li>
    <li style="color: blue;">Four</li>
</ul> 
```

假设今天，您决定将链接颜色更改为红色。由于这些样式是内联的，因此您必须繁琐地遍历每个元素并更改`style`属性。想象一下，为 10 个，也许 20 个 HTML 页面执行此操作，您就会明白为什么这会成为一个问题。

使用样式表分隔内容：

```
<ul>
    <li>One</li>
    <li>Two</li>
    <li>Three</li>
    <li>Four</li>
</ul> 
```

从风格上：

```
ul li {
    color: blue;
} 
```

如果您从一开始就使用样式表，那么更改颜色就像更改样式表一样`blue`简单`red`。

除了使文档更易于设计之外，还有选择器的特殊性。想象一下，您从以前的开发人员那里继承了第一个代码块并想再次更改颜色，但您（作为一个优秀的开发人员）更喜欢样式表：

```
ul li {
    color: red;
} 
```

您很快就会感到沮丧并求助于使用`!important`，因为您的选择器无法覆盖内联样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T03:13:32.340

CSS 应该是 HTML 中包含的另一个文件，因为如果您想更改包含在多个页面中的元素的一种样式，您只需从 CSS 更改一种样式，更改将应用​​于所有文件。如果您有 HTML 样式，则需要逐页浏览并更改样式。这是一个很好的模板构建实践。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T03:18:02.337

通过分离标记和 css。您可以使用 css 更改所有内容的外观，而不会影响标记。

好处包括： 为同一个 html 创建不同的设计。在团队内分工。一位前端开发人员可以完全专注于 CSS。后端开发人员，不必为 css 烦恼。将来更容易改变外观。将来更容易将 html 标记迁移到新平台或内容管理系统。

# bison - 野牛中的特定错误处理

> ID：15170262
> 
> 赞同：0
> 
> 时间：2013-03-02T03:11:00.793
> 
> 标签：bison

弹性定义：

```
"view"  { return VIEW;}
"cell"  { return CELL;}
[A-Za-z]+ {
      yylval.strval=strdup(yytext);
      return ALPHA;
      }
[()]   {return yytext[0];} 
```

我的野牛语法：

```
static int len=10;
static char *allkeywords[10]=   {"view","acload","actual","after","alpha","and","annotate","apply","arc","array" };

cell:’(’ CELL ALPHA ’)’ { goal=$3;
                       flag=binary_search(allkeywords,len,goal);
                       if(flag) 
                        { 
                       yyerror("warnning: the component name is a keyword");
                       yyclearin;
                       yyerrok;
                       }                                                                    
            ;
int binary_search(const char *a[10], int len, char *goal)
  {    
   int low = 0;    
   int high = len - 1;    
   while(low <= high)    
    {        
     int middle = (low + high)/2;        
     if(strcmp (goal,a[middle])==0 )           
         return 1;        
       else if(strcmp (goal,a[middle]) < 0)        
          high = middle - 1;            
            else            
               low = middle + 1;    
 }    
 return 0;     
 } 
```

我的指示：

```
bison -d -v bison.y
flex  flex.l 
gcc bison.tab.c lex.yy.c 
```

比如输入流是（cell view），单词“view”是用户给的随机字母组合。巧合的是，它是EDIF文件的关键字，也对应ALPHA。我设置如果用户给出的ALPHA是关键字，调用yyerror函数进行警告，但野牛调用yyerror本身。它的输出是“zhouzhou:1.3-1.6:syntax error, unexpected CELL, expecting EDIF”，实际上，我希望它存在“zhouzhou:1.3-1.6: warnning: the component name is a keyword”。如何让野牛不叫它 yyerror ，按我的意思做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T04:19:01.957

虽然您可以编写语法以便允许关键字作为标识符，但这样做是不自然且非常困难的。之所以这样称呼关键字，是因为您不能将它们用作标识符。

### 在职的`flex.l`

```
%{
#include "bison.tab.h"
%}

%%
"view"  { puts("VIEW"); return VIEW;}
"cell"  { puts("CELL"); return CELL;}
[A-Za-z]+ {
      yylval.strval=strdup(yytext);
      puts("ALPHA:");
      puts(yylval.strval);
      return ALPHA;
      }
[()]   {puts("PARENS"); return yytext[0];}  

.      { printf("SKIP: %d %c\n", yytext[0], yytext[0]); }

%%

int yywrap(void)
{
    return(1);
} 
```

### 在职的`bison.y`

```
%{
#include <stdio.h>
#include <string.h>

static int binary_search(char **a, int len, char *goal);

static char *goal;
static int flag;
static int len=10;
static char *allkeywords[10]=   {"view", "acload", "actual", "after", "alpha", "and", "annotate", "apply", "arc", "array" };

%}

%union { char *strval; }

%token <strval> CELL
%token <strval> ALPHA
%token <strval> VIEW

%%

cell: '(' CELL ALPHA ')'
        {
            goal=$3;
            flag=binary_search(allkeywords, len, goal);
            if(flag) 
            { 
                printf("Before yyerror()\n");
                yyerror("warning: the component name is a keyword");
                printf("After yyerror()\nBefore yyclearin\n");
                yyclearin;
                printf("After yyclearin\nBefore yyerrok\n");
                yyerrok;
                printf("After yyerrok\n");
            }                                                                    
        }
    ;

%%

static int binary_search(char **a, int len, char *goal)
{    
    int low = 0;    
    int high = len - 1;    
    while(low <= high)    
    {        
        int middle = (low + high)/2;        
        if(strcmp (goal, a[middle])==0 )           
            return 1;        
        else if(strcmp (goal, a[middle]) < 0)        
            high = middle - 1;            
        else            
            low = middle + 1;    
    }    
    return 0;     
}

int main(void)
{
    int rc;
    yydebug = 1;
    setvbuf(stdout, 0, _IOLBF, 0);
    rc = yyparse();
    printf("== In main after yyparse() = %d\n", rc);
    return(0);
} 
```

### Mac OS X 10.8.2 的构建脚本

```
set -x
bison -d -v bison.y &&
flex  flex.l  &&
gcc -DYYDEBUG bison.tab.c lex.yy.c -ly &&

a.out < data 
```

### 数据文件

```
(cell alpha) 
```

### 从正在运行的程序跟踪

```
++ bison -d -v bison.y
++ flex flex.l
++ gcc -DYYDEBUG bison.tab.c lex.yy.c -ly
++ a.out
Starting parse
Entering state 0
Reading a token: PARENS
Next token is token '(' ()
Shifting token '(' ()
Entering state 1
Reading a token: CELL
Next token is token CELL ()
Shifting token CELL ()
Entering state 4
Reading a token: SKIP: 32  
ALPHA:
alpha
Next token is token ALPHA ()
Shifting token ALPHA ()
Entering state 6
Reading a token: PARENS
Next token is token ')' ()
Shifting token ')' ()
Entering state 7
Reducing stack by rule 3 (line 29):
   $1 = token '(' ()
   $2 = token CELL ()
   $3 = token ALPHA ()
   $4 = token ')' ()
Before yyerror()
warning: the component name is a keyword
After yyerror()
Before yyclearin
After yyclearin
Before yyerrok
After yyerrok
-> $$ = nterm cell ()
Stack now 0
Entering state 3
Reducing stack by rule 2 (line 25):
   $1 = nterm cell ()
Stack now 0
== In main after yyparse() = 0 
```

请注意代码是如何成功返回`main()`函数一次并且不调用`yyerror()`.

# python - 如何在python中实现负无穷大？

> ID：15170267
> 
> 赞同：22
> 
> 时间：2013-01-10T16:57:46.000
> 
> 标签：python, algorithm, numbers

我正在尝试实现一个堆定义的优先级队列，该算法来自 CLRS 书第 6 章。伪代码如下所示：

```
Max_Heap_Insert(A, key):
    A.heap_size = A.heap_size + 1
    A[A.heap_size] = -∞
    Heap_Increase_Key(A, A.heap_size, key) 
```

我的问题是，使用python，我如何定义-∞？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-02T01:42:46.183

Python 有特殊的值`float('inf')`和`float('-inf')`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T17:25:45.617

碰巧的是，在 Python 2 中，`None`它小于任何整数，因此您可以使用`None`. 在 Python 3 中，您有（至少）四种选择：

1.  使用 min(A) - 1。
2.  使用`None`，并且每当您比较两个值时，显式测试它们是否为`None`。
3.  定义一个由整数或 -∞ 组成的新数据类型，并正确处理比较。
4.  修改算法以消除第 2 行。你将不得不以`Heap-Increase-Key`某种方式修补。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-06-17T20:58:46.767

我在自己进行堆实现时偶然发现了这一点。:)

从 Python 3.5 开始，您可以使用数学模块中的 inf 常量

```
from math import inf
inf + inf                                        # inf
inf - inf                                        # nan
inf / inf                                        # nan
inf * inf                                        # inf
max(list(range(1_000_000)) + [inf])              # inf
min(list(range(-1_000_000, 1)) + [-inf])         # -inf 
```

我不知道这一点并使用自定义类来实现相同的排序属性

```
class MinusInf:      
    def __gt__(self, other):
        return False

    def __ge__(self):
        return False

    def __lt__(self, other):
        return True

    def __le__(self, other):
        return True

    def __eq__(self, other):
        return False

minus_inf = MinusInf()
minus_inf >= -1_000_000  # False 
```

这将用于堆的目的，但推荐的方法是只使用`math.inf`（或者`numpy.inf`是来自 numpy 的 inf 常量）。

# gprs - 在没有操作系统的嵌入式情况下使用 sim900 登录 GPRS APN

> ID：15170276
> 
> 赞同：1
> 
> 时间：2013-03-02T03:12:28.280
> 
> 标签：gprs, ppp, apn, access-point-name

我正在使用嵌入式微处理器与 SIM900 GPRS 调制解调器进行通信。sim900 有一个嵌入式 tcp/ip 堆栈但没有嵌入式 PPP 堆栈，而我的嵌入式环境没有这些堆栈。

对于其他设备，我已按照以下步骤操作：

1.  at+cgdcont="IP","互联网",,
2.  atd*99***1#
3.  称为 PPP 函数，负责登录 APN（可能还有身份验证和 LCP 等）。
4.  调用连接到远程服务器的 TCP 函数。

但现在我必须自己做 PPP 部分。所以我无法找到所有必要的信息……谁能指出我正确的方向？

当我使用超术语来查看它会发生什么时，`ATD*99***1#`它会连接并返回很多 PPP 帧，我想我必须编写一个模块来处理这些帧。但是我确实注意到，在许多站点上，根本没有提到 APN 的登录，那么有没有绕过登录的方法？

当我按照 SIM900 文档中的示例进行操作时，我收到一个错误，指示（非常正确）PDP 已停用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:26:21.493

我认为我最初的问题实际上是2个问题......

1）使用GPRS模块的板载TCP功能是否需要编写APN登录模块？- 这里的答案是否定的。该模块负责处理......见 cmd AT+cstt="apn","user","pwd"。

2) 在哪里可以找到 PPP 堆栈的开源代码？...仍然没有答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T11:38:05.830

1.4.1 版本和一些旧版本的 LWIP 在其中实现了 PPP。不确定它是否可以轻松独立使用。您可能仍然可以将其与 LWIP 分离并使用它。

# c# - 在 C# 中具有非捕获组的正则表达式

> ID：15170279
> 
> 赞同：15
> 
> 时间：2013-03-02T03:12:59.630
> 
> 标签：c#, .net, regex, string-parsing

我正在使用以下正则表达式

```
JOINTS.*\s*(?:(\d*\s*\S*\s*\S*\s*\S*)\r\n\s*)* 
```

关于以下类型的数据：

```
 JOINTS               DISPL.-X               DISPL.-Y               ROTATION

     1            0.000000E+00           0.975415E+01           0.616921E+01
     2            0.000000E+00           0.000000E+00           0.000000E+00 
```

思路是提取两组，每组包含一行（以Joint Number开头，1、2等）C#代码如下：

```
string jointPattern = @"JOINTS.*\s*(?:(\d*\s*\S*\s*\S*\s*\S*)\r\n\s*)*";
MatchCollection mc = Regex.Matches(outFileSection, jointPattern );
foreach (Capture c in mc[0].Captures)
{
    JointOutput j = new JointOutput();
    string[] vals = c.Value.Split();
    j.Joint = int.Parse(vals[0]) - 1;
    j.XDisplacement = float.Parse(vals[1]);
    j.YDisplacement = float.Parse(vals[2]);
    j.Rotation = float.Parse(vals[3]);
    joints.Add(j);
} 
```

但是，这不起作用：它不是返回两个捕获的组（内部组），而是返回一个组：整个块，包括列标题。为什么会这样？C# 是否以不同的方式处理未捕获的组？

最后，RegExes 是最好的方法吗？（我真的觉得我现在有两个问题。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-02T06:12:03.363

`mc[0].Captures`相当于`mc[0].Groups[0].Captures`。 `Groups[0]`总是指整个比赛，所以只会有一个与之关联的 Capture。您要查找的部分在第 1 组中捕获，因此您应该使用`mc[0].Groups[1].Captures`.

但是您的正则表达式旨在一次匹配整个输入，因此该`Matches()`方法将始终返回一个 MatchCollection，其中只有一个 Match（假设匹配成功）。您不妨`Match()`改用：

```
 Match m = Regex.Match(source, jointPattern);
  if (m.Success)
  {
    foreach (Capture c in m.Groups[1].Captures)
    {
      Console.WriteLine(c.Value);
    }
  } 
```

输出：

```
1            0.000000E+00           0.975415E+01           0.616921E+01
2            0.000000E+00           0.000000E+00           0.000000E+00 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T03:38:34.827

我只是不会`Regex`用于繁重的工作并解析文本。

```
var data = @"     JOINTS               DISPL.-X               DISPL.-Y               ROTATION

         1            0.000000E+00           0.975415E+01           0.616921E+01
         2            0.000000E+00           0.000000E+00           0.000000E+00";

var lines = data.Split('\r', '\n').Where(s => !string.IsNullOrWhiteSpace(s));
var regex = new Regex(@"(\S+)");

var dataItems = lines.Select(s => regex.Matches(s)).Select(m => m.Cast<Match>().Select(c => c.Value)); 
```

![在此处输入图像描述](../Images/50676c912244b43b75287016d356f5c7.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T03:22:19.787

有两个问题：重复部分`(?:...)`没有正确匹配；并且`.*`是贪婪的并消耗所有输入，因此即使可以，重复部分也永远不会匹配。

改用这个：

```
JOINTS.*?[\r\n]+(?:\s*(\d+\s*\S*\s*\S*\s*\S*)[\r\n\s]*)* 
```

这有一个非贪婪的前导部分，确保行匹配部分从新行开始（而不是在标题中间），并`[\r\n\s]*`在换行符不完全符合您期望的情况下使用。

就个人而言，我会为此使用正则表达式，但我喜欢正则表达式 :-) 如果您碰巧知道字符串的结构将始终是 [title][newline][newline][lines] 那么它可能更简单（如果更少灵活）只拆分换行符并相应地处理。

最后，您可以使用[regex101.com](http://www.regex101.com/)或许多其他正则表达式测试站点之一来帮助调试您的正则表达式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T03:38:53.667

为什么不只捕获这些值而忽略其余部分。这是一个获取值的正则表达式。

```
string data = @"JOINTS DISPL.-X DISPL.-Y ROTATION
 1 0.000000E+00 0.975415E+01 0.616921E+01
 2 0.000000E+00 0.000000E+00 0.000000E+00";

string pattern = @"^
\s+
 (?<Joint>\d+)
\s+
 (?<ValX>[^\s]+)
\s+
 (?<ValY>[^\s]+)
\s+
 (?<Rotation>[^\s]+)";

var result = Regex.Matches(data, pattern, RegexOptions.Multiline | RegexOptions.IgnorePatternWhitespace | RegexOptions.ExplicitCapture)
                  .OfType<Match>()
                  .Select (mt => new
                  {
                    Joint = mt.Groups["Joint"].Value,
                    ValX  = mt.Groups["ValX"].Value,
                    ValY  = mt.Groups["ValY"].Value,
                    Rotation = mt.Groups["Rotation"].Value,
                  });
/* result is
IEnumerable<> (2 items)
Joint ValX ValY Rotation
1 0.000000E+00 0.975415E+01 0.616921E+01
2 0.000000E+00 0.000000E+00 0.000000E+00
*/ 
```

# javascript - Node.js Api 在异步循环中调用

> ID：15170280
> 
> 赞同：5
> 
> 时间：2013-03-02T03:13:01.437
> 
> 标签：javascript, node.js, asynchronous, foreach, callback

我很难进行多个 api 调用并将返回的结果放在正确的位置。这就是我想要实现的目标：两个循环，嵌套。外部循环遍历一个复杂的 json 对象，并将一些对象的值放在一个数组调用框中。内部循环调用 api 并将返回的结果放入名为 bag 的数组中。所以我有装满数据的盒子和袋子。当循环和 api 调用都结束时，我想访问 box 和 bag 中的数据并用它做一些事情。我只是不确定在执行的同一点访问两个数组的最佳方法。这是我到目前为止所拥有的，但当然 bag 和 box 是空的，因为它们在所有循环和 api 调用结束之前被调用。

```
var data = {}//a json object with data;
var bag = [];
var box = [];

async.forEach(data.item, function(item, callback){

    async.forEach(item.name, function(name, callback){

        callApi(item.name, function(obj){

           bag.push(obj);
        });

        callback();

    }

   box.push(item);
   callback();

});

function callApi(name, callback){

    asyncApiCall(url+name, function(err, result){

        callback(result);       
    });

}

//when all loops and api requests are done
//do stuff with contents of box and bag here;
console.log(bag, box); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T05:09:46.860

您可以使用计数器来确保所有异步调用都已返回，然后调用回调。一个例子：

```
function performAsyncOperation(data, onCompletion) {
    var bag = [];
    var box = [];
    var count  = 0;

    async.forEach(data.item, function(item, callback){
        async.forEach(item.name, function(name, callback){
            count += 1;
            callApi(item.name, function(obj){
               bag.push(obj);
               count -= 1;
               if (count == 0) {
                   onCompletion(null, { bag:bag, box:box });
               }
            });
            callback();
        }
       box.push(item);
       callback();
    });
} 
```

`count`并且`onCompletion`是上面的重要部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T07:28:11.060

由于您拥有完整的数据集，因此您应该首先（同步）将名称列表收集到一个数组中。

然后，只做一级`async.forEach`。尝试使用两个级别来执行此操作是不必要的，并且会导致更复杂的代码。

如果您所指的`async`是您使用的内容`npm install async`，那么这里有一段代码说明了您可以使用什么（用于`lodash`构建名称列表，因为这往往更简洁。

```
var _ = require("lodash");
var async = require("async");

var data = {
  item: [
    {name: "a"},
    {name: "b"}
  ]
};

var bag = [];

var items = _(_(data.item).collect(function(item) {
  return item.name;
})).value();

async.eachSeries(items, function(name, cb) {
  callApi(name, function(obj) {
    bag.push(obj);
    cb();
  });
}, function done() {
  console.log("bag", bag);
});

function callApi(name, cb) {
  cb(name);
} 
```

输出是：

```
bag [ 'a', 'b' ] 
```

# javascript - 用 Javascript 替换内容

> ID：15170281
> 
> 赞同：0
> 
> 时间：2013-03-02T03:13:19.827
> 
> 标签：javascript, css

[http://jsfiddle.net/bUjx7/28](http://jsfiddle.net/bUjx7/28)

所以它在 jsfiddle 上工作，但不是当我把它放到我的 Wordpress 标题中时。HTML/CSS 在 Wordpress 上都很好，但 Javascript 不是。我是这样输入的：

```
<script type="text/javascript">
$('.tablereplace a').click(function () {
    $('.fieldsmatch').fadeOut(0);
    $('.fieldsgame1').fadeOut(0);
    $('.fieldsgame2').fadeOut(0);
    $('.fieldsgame3').fadeOut(0);
    var region = $(this).attr('data-region');
    $('#' + region).fadeIn(0);
});
</script>

<style type="text/css">
.fieldsgame1 {
    display:none;
}
.fieldsgame2 {
    display:none;
}
.fieldsgame3 {
    display:none;
}
</style> 
```

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:19:47.297

将您的代码包装在[文档就绪处理程序](http://api.jquery.com/ready/)中。它可以在没有它的情况下在 jsfiddle 上运行，因为 jsfiddle 默认将您的代码包装在`onload`处理程序中（请参阅框架和扩展下 jsfiddle 窗口左侧的第二个下拉列表 - 如果您将该下拉列表更改为其中之一，您会注意到“不换行”选项你的代码也不能在小提琴中工作）。

```
$(document).ready(function() {
    $('.tablereplace a').click(function () {
        $('.fieldsmatch').fadeOut(0);
        $('.fieldsgame1').fadeOut(0);
        $('.fieldsgame2').fadeOut(0);
        $('.fieldsgame3').fadeOut(0);
        var region = $(this).attr('data-region');
        $('#' + region).fadeIn(0);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T03:19:54.147

你把它包括在内了吗.. [http://code.jquery.com/jquery-1.9.1.js](http://code.jquery.com/jquery-1.9.1.js) 这可能是问题所在，因为我已经将 wordpress 与 javascript 一起使用，工作得非常好。

# php - 将列表选择器添加到 mysql 查询

> ID：15170284
> 
> 赞同：0
> 
> 时间：2013-03-02T03:13:42.367
> 
> 标签：php, html, mysql, sorting

我有一个运行 MySQL 查询并返回一些数据的 php 脚本。我想要做的是用下拉菜单控制返回的结果。

下拉列表中需要包含以下信息，供学生选择。

选择 courseid 从 course_students WHERE userid = $user

以下是我拥有的当前代码.....我试图弄清楚如何将上述内容与它结合起来：

```
 <?php
defined('_JEXEC') or die;

$db = JFactory::getDBO();
$user = & JFactory::getUser();
$userid = $user->get('id');
$course = "SELECT 
  c.coursename
FROM
  courses AS `c`  
  LEFT OUTER JOIN course_students AS s 
    ON s.courseid = c.id 
WHERE s.userid = '1285'";
$courses= mysql_fetch_array($course);
?>
Please Select Course for Results:
<select> 
<?php foreach($courses as $c){ 
   echo "<option value='$c'>".$c."</option>";
} ?>
</select>
<?php
$sql =
    "SELECT 
  as.name,
  DATE_FORMAT(s.starttime, '%b %d, %Y %H:%i') AS TIME,
  s.totalhours AS hrs 
FROM
  clinicalsites AS `as` 
  LEFT OUTER JOIN clinical_dashboard AS s 
    ON s.clinicalsite = as.id 
WHERE s.userid = $userid 
  AND starttime > NOW()
AND courseid = $c";

$db->setQuery($sql);

$rows = $db->loadObjectList();
?>
<style>
    table, td, th
    {
        border-bottom:1px solid black;
        text-align:center;
    }
    th {
        background-color:#000000;
        color: #FFF;
    }

    .upcoming {
        font-weight: bold;
    }
    .complete {
        font-weight: bold;
        color: #060;
    }
    .pending {
        font-weight: bold;
        color: #F00;
    }
    .approved {
        color: #C60;
    }
</style>

<table width="396">
    <tr>
        <th width="162">Type of Hours</th>
        <th width="70">Pending</th>
        <th width="74">Approved</th> 
        <th width="70">Complete</th>
    </tr>
</table>
<table>

    <tr>
        <td width="162">Total Hospital Hours</td>
        <td class="pending" width="70"><?php
            $q2 = "SELECT 
  SUM(totalhours) AS sum2 
FROM
  clinical_dashboard 
WHERE userid = $userid 
  AND clinicaltype = 'Hospital' 
  AND instructorapproval = '1'
AND courseid = $c";
            $result2 = mysql_query($q2);
            $row2 = mysql_fetch_assoc($result2);

            echo $row2['sum2']
            ?></td>
        <td class="approved" width="74">
            <?php
            $q3 = "SELECT 
  SUM(totalhours) AS sum3 
FROM
  clinical_dashboard 
WHERE userid = $userid 
  AND clinicaltype = 'Hospital' 
  AND instructorapproval = '2'
AND courseid = $c";
            $result = mysql_query($q);
            $row3 = mysql_fetch_assoc($result);

            echo $row3['sum2']
            ?>
        </td>
        <td class="complete" width="70">
            <?php
            $q4 = "SELECT 
  SUM(totalhours) AS sum4 
FROM
  clinical_dashboard 
WHERE userid = $userid 
  AND clinicaltype = 'Hospital' 
  AND instructorapproval = '2' 
  AND STATUS = '2'
AND courseid = $c";
            $result = mysql_query($q4);
            $row4 = mysql_fetch_assoc($result);

            echo $row4['sum4']
            ?>
        </td>
    </tr>
    <tr>
        <td>Total Pre-Hosptial Hours</td>
        <td class="pending" ><?php
            $q = "SELECT 
  SUM(totalhours) AS sum3 
FROM
  clinical_dashboard 
WHERE userid = $userid 
  AND clinicaltype = 'Pre-Hospital' 
  AND instructorapproval = '1'
AND courseid = $c";
            ;
            $result = mysql_query($q);
            $row1 = mysql_fetch_assoc($result);
            echo $row1['sum3']
            ?></td>
        <td class="approved">
            <?php
            $q = "SELECT 
  SUM(totalhours) AS sum3 
FROM
  clinical_dashboard 
WHERE userid = $userid 
  AND clinicaltype = 'Pre-Hospital' 
  AND instructorapproval = '2'
AND courseid = $c";
            $result = mysql_query($q);
            $row1 = mysql_fetch_assoc($result);
            echo $row1['sum3']
            ?></td>
        <td class="complete"><?php
            $q = "SELECT 
  SUM(totalhours) AS sum3 
FROM
  clinical_dashboard 
WHERE userid = $userid 
  AND clinicaltype = 'Pre-Hospital' 
  AND instructorapproval = '2' 
  AND STATUS = '2'
AND courseid = $c";
            $result = mysql_query($q);
            $row1 = mysql_fetch_assoc($result);
            echo $row1['sum3']
            ?></td>
    </tr>
    <?PHP foreach ($rows as $row): ?>
    <?php endforeach ?>
</table>
<p class="upcoming">Upcoming Clinical Schedule</p>
<table width="393" border="1">
    <tr>
        <th width="166">Clinical Site</th>
        <th width="119">Date</th>
        <th width="86">Total Hours</th>
    </tr>
</table>
<table>
    <?PHP foreach ($rows as $row): ?>
        <tr>
            <td width="170"><?php echo $row->name ?></td>
            <td width="124"><?php echo $row->time ?></td>
            <td width="84"><?php echo $row->hrs ?></td>
        </tr>
    <?php endforeach ?>
</table>
<p class="upcoming"></p> 
```

下面只是带有选择的下拉查询。

```
$course = "SELECT 
  c.coursename
FROM
  courses AS `c`  
  LEFT OUTER JOIN course_students AS s 
    ON s.courseid = c.id 
WHERE s.userid = '1285'";
$courses= mysql_fetch_array($course);
?>
Please Select Course for Results:
<select> 
<?php foreach($courses as $c){ 
   echo "<option value='$c'>".$c."</option>";
} ?>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:08:43.303

我相信你需要这样的东西

```
<select> 
<? foreach($courses as $c){ 
   echo "<option value=".$c['table_id'].">".$c['coursename']."</option>";
} ?>
</select> 
```

祝你好运 ！

* * *

还要在查询中选择表 ID，以便将其用作“选项”的值

# angularjs - Angular ui-select2 指令不适用于 AngularJS 验证

> ID：15170286
> 
> 赞同：1
> 
> 时间：2013-03-02T03:14:35.400
> 
> 标签：angularjs, directive, jquery-select2

我搜索了互联网，试图弄清楚为什么使用 jQuery.Select2 和`ui-select2`指令时专有的 AngularJS 验证不起作用 - 这是一个错误吗？

编辑：好的，我发现这只是标记输入，我的选择下拉菜单和文本输入工作正常。

这是小提琴 [http://jsfiddle.net/whiteb0x/ftEHu/](http://jsfiddle.net/whiteb0x/ftEHu/)

html:

```
 <form name="myForm" ng-controller="Ctrl">
    userType: <input ui-select2="version1" class="input-xlarge" type="hidden" name="input" ng-model="userType" required>
    <span class="error" ng-show="myForm.input.$error.required">Required</span><br>
    <tt>userType = {{userType}}</tt><br>
    <tt>myForm.input.$valid = {{myForm.input.$valid}} wtf???????!!!</tt><br>
    <tt>myForm.input.$error = {{myForm.input.$error}} huh????</tt><br>
    <tt>myForm.$valid = {{myForm.$valid}} | please hand me a gun :)</tt><br>
    <tt>myForm.$error.REQUIRED = {{!!myForm.$error.REQUIRED}}</tt><br>
   </form> 
```

Javascript：

```
var app = angular.module('myApp', ['ui.directives']);

function Ctrl($scope) {
  $scope.userType = '';
  $scope.version1 = {
      tags : null
  };    
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-02T09:08:50.790

我相信 select2 指令如何在 ngModel 和 select2 插件之间传递值存在问题。

简而言之，当没有选择标签时，UI 的 select2 指令会将[模型设置为 []](https://github.com/angular-ui/angular-ui/blob/master/modules/directives/select2/select2.js#L87)（空数组），因为这是 select2 插件在空多选输入上返回的默认值（请参阅[select2](http://ivaynberg.github.com/select2/#documentation) Data 方法的文档)

我将在 Github 上发布一个问题来确认这一点，但同时这里[有一个解决方法](http://jsfiddle.net/adibih/N2LVP/)：

```
function Ctrl($scope) {
  $scope.userType = null;
  $scope.version1 = {
      tags : null
  };

  $scope.$watch('userType', function(userType){
    if(angular.isArray(userType) && userType.length === 0){
      $scope.userType = '';
    }
  });
} 
```

或者你可以使用这个自定义的“required-multiple”指令，它在验证模型时会考虑空数组：

```
app.directive('requiredMultiple', function() {
  function isEmpty(value) {
    return angular.isUndefined(value) || (angular.isArray(value) && value.length === 0) || value === '' || value === null || value !== value;
  }

  return {
    require: '?ngModel',
    link: function(scope, elm, attr, ctrl) {
      if (!ctrl) return;
      attr.required = true; // force truthy in case we are on non input element

      var validator = function(value) {
        if (attr.required && (isEmpty(value) || value === false)) {
          ctrl.$setValidity('required', false);
          return;
        } else {
          ctrl.$setValidity('required', true);
          return value;
        }
      };

      ctrl.$formatters.push(validator);
      ctrl.$parsers.unshift(validator);

      attr.$observe('required', function() {
        validator(ctrl.$viewValue);
      });
    }
  };
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T10:54:05.933

对于标记，我一直在使用的解决方案是`ng-minlength="1"`在输入上进行设置。似乎工作得很好。

# r - 3D矩阵求和？

> ID：15170291
> 
> 赞同：2
> 
> 时间：2013-03-02T03:15:09.290
> 
> 标签：r, loops, matrix, sum

有什么方法可以求和 3 维矩阵？

例如，如果您有数据

```
m<-array(c(1:9,18:26,30:38),dim=c(3,3,3))

, , 1

     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9

, , 2

     [,1] [,2] [,3]
[1,]   18   21   24
[2,]   19   22   25
[3,]   20   23   26

, , 3

     [,1] [,2] [,3]
[1,]   30   33   36
[2,]   31   34   37
[3,]   32   35   38 
```

你的答案将是：549。

另外，如果有六个 3by3 矩阵，如何将每两个矩阵相加并打印？用for循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T03:21:06.857

调用`sum()`您的每个维度，这里有三个：

```
R> m<-array(c(1:9,18:26,30:38),dim=c(3,3,3))
R> sum(sum(sum(m)))
[1] 549
R> 
```

或者删除维度并调用`sum()`现在的单个向量：

```
R> sum(c(m))
[1] 549
R> 
```

*编辑*我把事情复杂化了。一个 3-array 仍然只是一个向量，所以它所需要的只是

```
R> sum(m)
[1] 549
R> 
```

感谢@thelatemail 提供线索。

# android - 如何在 relativeLayout 中的微调器旁边显示标签

> ID：15170293
> 
> 赞同：3
> 
> 时间：2013-03-02T03:15:21.360
> 
> 标签：android, layout, spinner, android-relativelayout

我有以下相对布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<RadioGroup
    <!--stuff-->
</RadioGroup>

<Spinner
android:id="@+id/colour_spinner"
android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:layout_below="@+id/radioGroup1" />

 <TextView
    android:id="@+id/colourLabel"
    android:text="@string/label_colour"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/radioGroup1"
    android:layout_toLeftOf="@+id/colour_spinner"/>

<Spinner
android:id="@+id/country_spinner"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:layout_below="@+id/colour_spinner" />

<TextView
    android:id="@+id/countryLabel"
    android:text="@string/label_country"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/colour_spinner"
    android:layout_toLeftOf="@+id/country_spinner"/>

<Spinner
    android:id="@+id/stadium_spinner"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:layout_below="@+id/country_spinner" />

<TextView
    android:id="@+id/stadiumLabel"
    android:text="@string/label_stadium"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/country_spinner"
    android:layout_toLeftOf="@+id/stadium_spinner"/> 
```

希望我在这里尝试做的事情很明显。三个旋转器，每个在前一个下方，每个左侧都有一个标签，理想情况下都整齐地排列。

我目前得到的结果是屏幕上只显示微调器，而我根本没有得到任何文本标签。我在这里做错了什么？我怀疑这与我的布局宽度/高度设置有关？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T03:38:54.237

将每个微调器和标签包含在水平 LinearLayout 中：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

<RadioGroup
    android:id="@+id/radioGroup"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <!-- stuff -->
</RadioGroup>

<LinearLayout
    android:id="@+id/spinner1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/radioGroup"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/colourLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/label_colour" />

    <Spinner
        android:id="@+id/colour_spinner"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1" />
</LinearLayout>

<LinearLayout
    android:id="@+id/spinner2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/spinner1"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/countryLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/label_country" />

    <Spinner
        android:id="@+id/country_spinner"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1" />
</LinearLayout>

<LinearLayout
    android:id="@+id/spinner3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/spinner2"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/stadiumLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/label_stadium" />

    <Spinner
        android:id="@+id/stadium_spinner"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1" />

</LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T03:38:47.890

尝试这个：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <RadioGroup
        android:id="@+id/radioGroup1"
        android:layout_width="wrap_content"
        android:layout_height="50dip" >
    </RadioGroup>

    <TextView
        android:id="@+id/colourLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/radioGroup1"
        android:text="label_colour"
        android:textColor="@android:color/white" />

    <Spinner
        android:id="@+id/colour_spinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/radioGroup1"
        android:layout_toRightOf="@+id/colourLabel" />

    <TextView
        android:id="@+id/countryLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/colour_spinner"
        android:text="label_country"
        android:textColor="@android:color/white" />

    <Spinner
        android:id="@+id/country_spinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/colour_spinner"
        android:layout_toRightOf="@+id/countryLabel" />

    <TextView
        android:id="@+id/stadiumLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/country_spinner"
        android:text="label_stadium" />

    <Spinner
        android:id="@+id/stadium_spinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/country_spinner"
        android:layout_toRightOf="@+id/stadiumLabel" />

</RelativeLayout> 
```

# html - GET 和 POST 方法的区别？

> ID：15170295
> 
> 赞同：6
> 
> 时间：2013-03-02T03:15:52.547
> 
> 标签：html, forms, http, post, get

我是这个论坛的新手，我从今晚开始学习 PHP。

我想发送一个表格，但我不知道两者之间的区别：

```
<form action="page2.php" method="GET"> 
```

和

```
<form action="page2.php" method="POST"> 
```

任何人都可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-02T03:19:32.333

**得到：**

*   参数保留在浏览器历史记录中，因为它们是 URL 的一部分
*   可以做书签。
*   发送密码或其他敏感信息时不应使用 GET 方法。
*   7607 个字符的最大大小。
*   网址示例：page2.php?category=sport

**邮政：**

*   参数不保存在浏览器历史记录中。
*   无法添加书签。
*   发送密码或其他敏感信息时使用的 POST 方法。
*   POST 方法的最大大小为 8 Mb。
*   网址示例：page2.php

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T03:24:03.067

按照惯例，HTTP GET 用于搜索表单，而 HTTP POST 用于更改表单。GET 在 URL 中显示其信息，可公开查看，您可以从中查询变量。POST 不会显示其信息。安全方面确实没有区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T03:23:01.523

如果使用`GET`请求，表单参数将在 URL 中编码为所谓的查询字符串。**例如**

`www.someemailprovider.com/?login=joe@email.com&password=xxyz`

与`POST`GET 请求不同，请求在 HTTP 请求的正文中传递表单参数，而不是在 URL 中。

此外`GET`是幂等`POST`的，这并不意味着如果您在服务器上调用 GET 方法，则服务器上不会发生任何变化，但是如果您调用 POST 则服务器将被更改，可能是一些额外的数据将添加到服务器中，因此 GET 是幂等的而 POST 不是。

**笔记**

**作为程序员要记住的主要事情是，将表单定义为使用 GET 方法并不能防止导致更改。您可以使用 GET 请求执行与 POST 查询几乎相同的操作。只是浏览器通常被编码为期望 POST 请求将用于会导致更改的事情——比如下订单，或写入数据库等。GET 请求应该用于不影响服务器上任何内容的纯查询。因此，应始终记住不要将 GET 请求用于任何会导致服务器更改的操作 - 例如订购大屏幕电视。**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-02T03:31:14.223

**这些都是 HTTP 请求方法，不是 PHP 独有的。**

**$_GET**附加到 end 或 URL。即[http://example.org/?foo=bar](http://example.org/?foo=bar) 在 PHP 中访问它：

```
$foo = $_GET['foo']; 
```

或 $foo = $_REQUEST['foo'];

GET 用于您不介意人们看到的信息，并且可以手动输入链接和 url 以获取结果。

**$_POST**在您的 URL 中不可见，通常在提交表单后使用。使用 PHP 访问它：

```
$foo = $_POST['foo']; 
```

或 $foo = $_REQUEST['foo'];

[在http://www.w3schools.com/tags/ref_httpmethods.asp](http://www.w3schools.com/tags/ref_httpmethods.asp)阅读有关 HTTP 请求的更多信息

# c# - 使用 GroupBy 通过重叠范围对集进行分区

> ID：15170297
> 
> 赞同：3
> 
> 时间：2013-03-02T03:16:03.187
> 
> 标签：c#, linq, group-by, partitioning

考虑一个`Rectangle`通过角定义区域的类：

```
public class Rectangle {
    public int X1 { get; set; }
    public int Y1 { get; set; }
    public int X2 { get; set; }
    public int Y2 { get; set; }
} 
```

可以说，如果两个`Rectangle`对象`Overlap`有任何共同的区域。这是一个实现`Overlap`逻辑的简单方法：

```
public bool Overlaps(Rectangle other) {
    return (this.X1 < other.X2 && this.X2 > other.X1 &&
        this.Y1 < other.Y2 && this.Y2 > other.Y1);
} 
```

现在我想将一组`Rectangle`对象划分为重叠的矩形组。问题是组中的某些矩形不一定与同一组中的其他矩形重叠，只要它们共享其他重叠的矩形。结果始终是明确定义的，但没有从矩形到最终重叠组的直接映射。

从直觉上看，它应该可以`GroupBy`用来构建重叠矩形组。但是，没有定义矩形是否属于同一组的“键”；重要的是它们是否重叠。是否可以使用 来解决这个问题`GroupBy`，即使这意味着递归地分组直到所有适当的组被组合？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T03:31:53.130

不，`GroupBy`需要一个可以通过查看一个实例来确定的属性，并且仅一个实例。

但是，有一个相对简单的解决方案：您可以使用不[*相交集数据结构*](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)（它比美化的链表多一点）及其相关`union`算法。整个算法只需几十行代码，理解和调试相对简单。

给你的矩形序列号，并在每对矩形上运行你的交集算法。当您检测到重叠时，对相应的不相交集合结构执行集合并集。完成后，每个成员将指向其集合的“根”号。您可以使用这些根号按 LINQ 中的列表进行分组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-17T07:17:21.107

万一有人在寻找实际的实现。它不是用于矩形，而是用于时间范围。DisjointSet 实现取自 [http://www.mathblog.dk/disjoint-set-data-structure/](http://www.mathblog.dk/disjoint-set-data-structure/)

```
public class Range {
    public DateTime Start { get; set; }
    public DateTime Stop { get; set; }
    public int Parent { get; set; }

    public Range(DateTime start, DateTime stop)
    {
        Start = start;
        Stop = stop;
    }
}

void Main()
{
    List<Range> ranges = new List<Range>();
    ranges.Add(new Range(new DateTime(2019, 10, 1), new DateTime(2019, 10, 2)));
    ranges.Add(new Range(new DateTime(2019, 10, 2), new DateTime(2019, 10, 3)));
    ranges.Add(new Range(new DateTime(2019, 10, 1), new DateTime(2019, 10, 3)));
    ranges.Add(new Range(new DateTime(2019, 10, 4), new DateTime(2019, 10, 5)));
    ranges.Add(new Range(new DateTime(2019, 10, 6), new DateTime(2019, 10, 8)));
    ranges.Add(new Range(new DateTime(2019, 10, 5), new DateTime(2019, 10, 7)));
    ranges.Add(new Range(new DateTime(2019, 10, 9), new DateTime(2019, 10, 9)));

    var set = new DisjointSet(ranges.Count());
    var IsOverlaping = new Func<Range, Range, bool>((a, b) => a.Start < b.Stop && b.Start < a.Stop  );

    for (var i = 0; i < ranges.Count; i++)
    {
        for (var j = 0; j < ranges.Count; j++)
        {
            if (IsOverlaping(ranges[i], ranges[j]))
            {
                set.Union(i,j);
            }
        }
    }

    for (int i = 0; i < set.Count; i++)
    {
        ranges[i].Parent = set.Parent[i];
    }
    ranges.GroupBy(x=> x.Parent);

}

/// <summary>
/// A Union-Find/Disjoint-Set data structure.
/// </summary>
public class DisjointSet {

    /// <summary>
    /// The number of elements in the universe.
    /// </summary>
    public int Count { get; private set; }

    /// <summary>
    /// The parent of each element in the universe.
    /// </summary>
    public int[] Parent;

    /// <summary>
    /// The rank of each element in the universe.
    /// </summary>
    private int[] Rank;

    /// <summary>
    /// The size of each set.
    /// </summary>
    private int[] SizeOfSet;

    /// <summary>
    /// The number of disjoint sets.
    /// </summary>
    public int SetCount { get; private set; }

    /// <summary>
    /// Initializes a new Disjoint-Set data structure, with the specified amount of elements in the universe.
    /// </summary>
    /// <param name='count'>
    /// The number of elements in the universe.
    /// </param>
    public DisjointSet(int count) {
        this.Count = count;
        this.SetCount = count;
        this.Parent = new int[this.Count];
        this.Rank = new int[this.Count];
        this.SizeOfSet = new int[this.Count];

        for (int i = 0; i < this.Count; i++) {
            this.Parent[i] = i;
            this.Rank[i] = 0;
            this.SizeOfSet[i] = 1;
        }
    }

    /// <summary>
    /// Find the parent of the specified element.
    /// </summary>
    /// <param name='i'>
    /// The specified element.
    /// </param>
    /// <remarks>
    /// All elements with the same parent are in the same set.
    /// </remarks>
    public int Find(int i) {
        if (this.Parent[i] == i) {
            return i;
        } else {
            // Recursively find the real parent of i, and then cache it for later lookups.
            this.Parent[i] = this.Find(this.Parent[i]);
            return this.Parent[i];
        }
    }

    /// <summary>
    /// Unite the sets that the specified elements belong to.
    /// </summary>
    /// <param name='i'>
    /// The first element.
    /// </param>
    /// <param name='j'>
    /// The second element.
    /// </param>
    public void Union(int i, int j)
    {

        // Find the representatives (or the root nodes) for the set that includes i
        int irep = this.Find(i),
            // And do the same for the set that includes j
            jrep = this.Find(j),
            // Get the rank of i's tree
            irank = this.Rank[irep],
            // Get the rank of j's tree
            jrank = this.Rank[jrep];

        // Elements are in the same set, no need to unite anything.
        if (irep == jrep)
            return;

        this.SetCount--;

        // If i's rank is less than j's rank
        if (irank < jrank)
        {

            // Then move i under j
            this.Parent[irep] = jrep;
            this.SizeOfSet[jrep] += this.SizeOfSet[irep];

        } // Else if j's rank is less than i's rank
        else if (jrank < irank)
        {

            // Then move j under i
            this.Parent[jrep] = irep;
            this.SizeOfSet[irep] += this.SizeOfSet[jrep];

        } // Else if their ranks are the same
        else
        {

            // Then move i under j (doesn't matter which one goes where)
            this.Parent[irep] = jrep;
            this.SizeOfSet[jrep] += this.SizeOfSet[irep];

            // And increment the the result tree's rank by 1
            this.Rank[jrep]++;
        }
    }

    /// <summary>
    /// Return the element count of the set that the specified elements belong to.
    /// </summary>
    /// <param name='i'>
    /// The element.
    /// </param>
    public int SetSize(int i)
    {
        return this.SizeOfSet[this.Find(i)];
    }
} 
```

结果：

[![在此处输入图像描述](../Images/cc187622c30a0a1f63788b5a242fd5de.png)](https://i.stack.imgur.com/uxl88.png)

# google-tv - ItemClickListener 在 ItemLongClickListener 发生时启动

> ID：15170298
> 
> 赞同：0
> 
> 时间：2013-03-02T03:16:42.520
> 
> 标签：google-tv

我可以描述的最佳方式如下。我有一个海报画廊，里面有一堆图片。当用户在画廊中来回移动时，选定的海报会突出显示。我在海报库上设置了以下代码：

```
 Gallery posterGallery = (Gallery) context.findViewById(R.id.moviePosterGallery);
 posterGallery.setAdapter(new MoviePosterImageGalleryAdapter(context, key,
                          item.getCategory()));
 posterGallery.setOnItemSelectedListener(
    new MoviePosterOnItemSelectedListener(bgLayout, context));
 posterGallery.setOnItemClickListener(new MoviePosterOnItemClickListener());
 posterGallery.setOnItemLongClickListener(new MoviePosterOnItemLongClickListener()); 
```

似乎发生的情况是，如果您按下 vizio costar 上的 Remote，如果您按住 OK 按钮，则会触发 Click 和 Long click 事件。就我而言，当收到长按时会弹出一个对话框，但海报也会启动与该视频相关的视频以开始播放，这是 ItemClickListener 代码的一部分。

在 Nexus 7 平板电脑上测试相同的代码时，只会触发长按，而不是两者。有没有办法正确处理 Google TV 上的长按。如果有帮助，我将在 Google TV 3 中使用 vizio costar。

此外，如果您将鼠标指针移到该项目上，然后按住遥控器前面的 - 键，则只会触发长按事件。它似乎与 OK 以及按住的时间有关。

我查看了以下类似问题：

[onListItemClick 和 onItemLongClick Google TV](https://stackoverflow.com/questions/8406181/onlistitemclick-and-onitemlongclick-google-tv)

但我已经让 onItemLongClick 在处理事件时返回 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:38:05.143

Vizio 遥控器有一个怪癖。OK 按钮未映射到正确的键码。Vizio 遥控器在按下 OK 时发送 KEYCODE_ENTER，而实际上它应该发送 KEYCODE_DPAD_CENTER。我认为这就是导致您的问题的原因。如果您尝试使用 AbleRemote 作为输入设备，您应该能够看到它按预期工作。现在要解决您的问题，如果存在键盘，您可能必须转到键码侦听器并检测 posterGallery 上的键事件以触发短按和长按。

# python - Python 3：哈希未正确生成

> ID：15170318
> 
> 赞同：0
> 
> 时间：2013-03-02T03:20:51.433
> 
> 标签：python, python-3.x

好的，让这个哈希生成器按照我想要的方式工作，只是它不能正确生成哈希。我已经检查了从我的脚本生成的一些哈希值与在其他网站上找到的哈希值，它们一直不匹配。这似乎是所有哈希的问题，所以我认为它必须对哈希函数和 data.encode("utf8") 做一些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T03:52:38.157

根据[文档](http://docs.python.org/release/3.1.5/library/hashlib.html)：

> `hash.update(arg)`
> 
> 使用对象 arg 更新散列对象，该对象必须可解释为字节缓冲区。重复调用等效于连接所有参数的单个调用：`m.update(a); m.update(b)`等效于`m.update(a+b)`.

因此，您将所有组合连接在一起。

相反，您需要在每次`hasher`调用时创建一个新的 Hash 对象：

```
Hashes = {
    'MD5': hashlib.md5,
    'SHA1': hashlib.sha1,
    'SHA224': hashlib.sha224,
    'SHA256': hashlib.sha256,
    'SHA384': hashlib.sha384,
    'SHA512': hashlib.sha512
}

...

return Hash(data.encode("utf8")).hexdigest() 
```

# html - 如何在 HTML5 的画布中部分绘制路径？

> ID：15170323
> 
> 赞同：6
> 
> 时间：2013-03-02T03:21:34.523
> 
> 标签：html, canvas, html5-canvas

假设我使用一系列`bezierCurveTo()`调用创建了弯曲路径。我想通过增加逐帧绘制的百分比来使其逐渐出现在动画中。问题是我找不到仅绘制画布路径的一部分的标准方法-有人知道实现此目的的好方法（甚至是棘手的方法）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T04:19:51.493

当然……西蒙·波里特为我们做了所有艰苦的数学计算！

jsBezier 是一个带有函数的小库：pointAlongCurveFrom(curve, location, distance)，它可以让您沿着贝塞尔曲线逐步绘制每个点。

jsBezier 在 GitHub 上可用：[https ://github.com/sporritt/jsBezier](https://github.com/sporritt/jsBezier)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T15:02:42.980

刚刚找到了一个可以做到这一点的小型图书馆：[https ://github.com/camoconnell/lazy-line-painter](https://github.com/camoconnell/lazy-line-painter)

它依赖于 Raphael 库 ( [http://raphaeljs.com/](http://raphaeljs.com/) )，两者放在一起不会产生太大的有效负载。

# .net - 如何在 .NET 中读取 EMF 文件？

> ID：15170324
> 
> 赞同：0
> 
> 时间：2013-03-02T03:21:49.863
> 
> 标签：.net, parsing, printing, printers, .emf

我想将 EMF 假脱机文件的内容读入 .NET 应用程序并提取文本内容。任何人都可以帮助提出这样做​​的方法吗？任何现成可用的库或对象？或者关于 EMF 文件解析示例的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T06:26:46.800

如果您可以渲染它然后使用结果，那么 Imageresizing.net 可以为您渲染 EMF 并为您提供基于它的 PNG。这样，您可以例如在浏览器中渲染它以创建某种查看器 - 这会很慢但仍然如此。

然后还有 www.MetaDraw.com，但我实际上并没有使用它——可能更好或更糟。

# c++ - Eclipse 不会更改 C++ 中的输出类型

> ID：15170328
> 
> 赞同：1
> 
> 时间：2013-03-02T03:22:19.457
> 
> 标签：c++, eclipse, dll

我将 Eclipse 项目作为可执行文件启动。它工作正常。然后我将其更改为 .dll 中的 DLL `Project Properties -> C/C++ Build -> Settings -> Build Artifact -> Artifact Type`。它仍然有效。（这基本上都具有 Hello World 功能）

所以我在我的项目文件中包含了一堆东西，以实际转向我想要构建的应用程序。我无法让它完全编译，但我已经包含了很多我不想重新输入的路径和库（或者我只是开始一个新项目）。只是为了确定我是否仍然可以使用所有这些包含来编译 Hello World，我将其更改回与上述相同位置的可执行文件。它似乎有效，因为它在那个屏幕上改变了它；它甚至会更改它提供给`/OUT`链接器参数的文件扩展名。但它仍在将`/DLL`参数传递给链接器，我找不到可以删除它的项目属性页面。

请注意，当我将 Eclipse 控制台吐出的命令行复制粘贴到命令提示符并`/DLL`手动删除参数时，它会正确链接并形成一个可执行文件，从而产生正确的功能。但是当我尝试从 IDE 运行 exe 或尝试重建时，它会给我一个消息框错误，说我的进程遇到了问题。

```
Error starting process.
Cannot run program "C:\Users\2659\workspace\MoreStuff\Debug\MoreStuff.exe": Launching failed
Cannot run program "C:\Users\2659\workspace\MoreStuff\Debug\MoreStuff.exe": Launching failed
Cannot run program "C:\Users\2659\workspace\MoreStuff\Debug\MoreStuff.exe": Launching failed 
```

如何删除此`/DLL`标志，以便我可以实际控制我的项目输出的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T13:02:36.547

我刚刚遇到了类似的问题：我创建了一个具有共享工件性质的新 C++ 项目，并希望通过添加一个主函数和一个新的可执行构建选项来测试它。

为了成功更改性质，您还必须转到`Project Properties -> C/C++ Build -> Settings -> G++ Linker -> Shared Library Settings`并（在正确的配置中）取消选中该`Shared`选项。

它对我有用。

# sql-server-ce - 在 Windows Phone 8 上保存和检索图像文件（使用 SQL Server Compact）

> ID：15170330
> 
> 赞同：0
> 
> 时间：2013-03-02T03:22:20.463
> 
> 标签：sql-server-ce, windows-phone-8

谁能给我一个例子，我可以在 WP8 上存储和检索图像文件。
似乎 SQL Server Compact 只支持 Byte[] 数据类型？
所以我必须转换 BitmapImage 和 Byte[] 才能达到这个目的？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:45:27.790

使用 SQL 数据库存储图像对我来说似乎有点过头了。我建议您改用隔离存储，并将图像存储为文件。互联网上有很多关于如何实现这一点的例子，例如看看[这里](http://windowsphonegeek.com/tips/all-about-wp7-isolated-storage---read-and-save-images)。

# objective-c - 如何将此 NSData 转换为 NSString？

> ID：15170333
> 
> 赞同：0
> 
> 时间：2013-03-02T03:23:01.897
> 
> 标签：objective-c

我有这样的 NSData：

```
455a4f4e 00000001 01020304 00000000 00000000 
```

我的代码：

```
Byte bytes[] = {0x45, 0x5a, 0x4f, 0x4e, 0, 0, 0, 1, 1, 2, 3, 4, 0, 0, 0, 0, 0, 0, 0, 0};
NSData *data = [NSData dataWithBytes:bytes length:sizeof(bytes)];
NSString *str = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
NSLog(@"%@", str); // prints "EZON" 
```

我希望结果是`EZON0001`等...

为什么打印结果不包括“EZON”后面的数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T03:25:40.010

因为 0x4e 之后的零不是 ASCII/UTF-8 数字 '0' 而是字符串标记的结尾。它应该是 0x30，而不是 0x00 ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T03:35:14.733

尝试这个

```
 Byte bytes[] = {0x45, 0x5a, 0x4f, 0x4e, 0, 0, 0, 1, 1, 2, 3, 4, 0, 0, 0, 0, 0, 0, 0, 0};
    NSData *data = [NSData dataWithBytes:bytes length:sizeof(bytes)];
    NSString* newStr = [NSString stringWithUTF8String:[data bytes]];
    NSLog(@"%@", newStr); 
```

# php - PHP/MySQL 登录不工作

> ID：15170334
> 
> 赞同：0
> 
> 时间：2013-03-02T03:23:04.177
> 
> 标签：php, html, mysql, css

谁能告诉我为什么这个简单的 PHP/MySQL 登录代码总是显示“错误的用户名或密码”，即使我输入了正确的用户名/密码组合？我花了很多时间试图弄清楚这一点。

```
<?php
// Database Connection
mysql_connect("IP", "charlesfries", "Password") or die(mysql_error());
mysql_select_db("charlesfriessdatabase") or die(mysql_error());

// Variables
$username = $_POST["username"]; 
$password = $_POST["password"];

$result = mysql_query("SELECT * FROM accounts WHERE username = '$username' and password = '$password'");

// Success
$count = mysql_num_rows($result);
if ($count == 1) // Checks for Single Record of Given Username & Password
{
    session_register("username"); // Registers Username Key in Session
    session_register("password"); // Registers Password Key in Session
    header("location:http://charliefries.tk/");
}

// Failure
else
{
    echo "Wrong Username or Password";
}
?> 
```

另外，请不要告诉我我的代码是可注入的。我知道它是。

这是我的表单代码：

```
<form action="signinprocess.php" method="post"> <!-- Sign In Process -->
Username: <input type="text" name="username" style="width:150">
<br />
Password: <input type="password" name="password" style="width:153">
<br />
<br />
<input type="submit" value="Sign In">
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T03:35:45.257

在 SELECT 中尝试 LIMIT 1 以确保您只有 1 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T03:41:02.680

您的代码中有一些“坏主意”：

1.  不要将 mysql_* 用于新项目。这是过时的。切换到 mysqli_* [http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)
2.  通过用户名和密码进行选择并不总是一个好主意。在大多数情况下，最好搜索用户名并检查密码是否正确。使用准备好的语句，你会得到这样的东西

    选择 * 从`accounts`哪里`username`=？

    在下一步中，您可以检查您的密码是否与数据库中的密码相同，例如使用 if 语句 $_POST['password']==$dataFromDB['password']。

3.  目前您正在以纯文本格式保存密码。这是一个非常糟糕的主意。看看 bcrypt。请参阅[如何在 PHP 中使用 bcrypt 对密码进行哈希处理？](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)
4.  session_register 已过时。使用类似的东西

    $_SESSION['username']=$dataFromDB['username']

如我所见，问题出在（不存在的）LIMIT 中。希望这些提示无论如何都会对您有所帮助。

# javascript - 骨干.js 模型属性未定义

> ID：15170336
> 
> 赞同：0
> 
> 时间：2013-03-02T03:23:19.807
> 
> 标签：javascript, jquery, backbone.js

我正在从骨干网中的休息 url 获取模型对象的集合。然后我遍历集合并使用下划线模板帮助器方法处理来自模型的数据。但是在调用该属性时我得到了未定义的 defaultImg。

看法：

```
 define (['jquery','underscore','backbone'],function($,_,Backbone){
PopVideoView = Backbone.View.extend ({
    tagName:"li",
    //template: _.template($('#popView').html()),
    template: _.template("<li><img src='<%= defaultImg %>'/></li>"),
    render: function ()
    {
        console.log(this.model.toJSON());
        this.template(this.model.toJSON());
        this.$el.html(this.template);
        return this;
    }
});
return PopVideoView;
}); 
```

另一种观点：

```
define(['jquery','underscore','backbone','collections/PopVideos','views/PopVideo'],function($,_,Backbone){
PopVideosView = Backbone.View.extend ({
    el:"#pop",
    render: function ()
    {
        this.collection.each (function(video)
        {
            popVideoView = new PopVideoView({model:video});
            this.$el.append (popVideoView.render().el).hide().fadeIn(300);
        },this);
        return this;
    },
});
return PopVideosView;
}); 
```

这是我从 Chrome 开发者控制台得到的：

```
Object {video_id: "1G4isv_Fylg", video_name: "Coldplay - Paradise ", defaultImg: "http://i.ytimg.com/vi/1G4isv_Fylg/mqdefault.jpg", genre: "pop", date: "Feb 16, 2013 1:01:33 PM"…}
Uncaught ReferenceError: defaultImg is not defined 
```

我做错了什么？

这是模型和集合：

```
 define (['jquery','underscore','backbone'],function($,_,Backbone){
Video = Backbone.Model.extend ({
    urlRoot:"/video",
});
return Video;
});//end define

define(['backbone','models/Video'],function(Backbone,Video) {
PopVideosCollection = Backbone.Collection.extend ({
    model:Video,
    url:"/pop/3/1"
});
return PopVideosCollection;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T03:44:59.350

我发现我只需要这样做的问题：

```
this.$el.html(this.template(this.model.toJSON())); 
```

代替：

```
this.template(this.model.toJSON());
this.$el.html(this.template); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T03:45:42.483

你的`render`方法`PopVideoView`有一些问题：

```
template: _.template("<li><img src='<%= defaultImg %>'/></li>"),
render: function ()
{
    console.log(this.model.toJSON());
    this.template(this.model.toJSON());
    this.$el.html(this.template);
    return this;
} 
```

当您调用 时[`_.template`](http://underscorejs.org/#template)，您会返回一个函数，因此：

```
this.template(this.model.toJSON()); 
```

除了您丢弃 HTML 返回值之外，这是有道理的。这部分：

```
this.$el.html(this.template); 
```

是你出错的地方，你正在将一个函数传递给 jQuery 的`html`方法和来自[精美的手册](http://api.jquery.com/html/#html2)：

> .html（函数（索引，旧html））
> 
> **功能（索引，旧html）**
> 
> 返回要设置的 HTML 内容的函数。

所以 jQuery`this.template`用它不理解的参数调用你的函数。然后编译的模板函数去寻找`defaultImg`某个地方，没有找到它，你得到 a`ReferenceError`因为没有`defaultImg`.

您不想将函数传递给`html()`，您想*评估*模板函数并将其返回值传递给`html()`：

```
render: function ()
{
    this.$el.html(this.template(this.model.toJSON()));
    return this;
} 
```

`var`顺便说一句，您在定义视图和模型时确实应该使用：

```
define (['jquery','underscore','backbone'],function($,_,Backbone){
    var PopVideoView = Backbone.View.extend ({
    ^^^ 
```

如果你不这样做，这些变量是全局的`var`。

# google-bigquery - bigquery 查询重复字段

> ID：15170338
> 
> 赞同：1
> 
> 时间：2013-03-02T03:23:54.120
> 
> 标签：google-bigquery

我正在通过示例学习 bigquery：personsData [https://developers.google.com/bigquery/docs/data#nested](https://developers.google.com/bigquery/docs/data#nested)

在此示例中，有一个名为`children`. 这是否可以进行查询以找出谁有孩子叫“Josh”和孩子叫“Jim”

我尝试了以下查询，但没有返回结果： `select fullName from [xxx.xx] where children.name = "Jane" and children.name = "John"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:05:55.657

上述查询有几处有问题。

1.  在这两个标准之间应该有一个**或**没有一个**and 。**例如 children.name = "Josh"**或**children.name = "Jim"
2.  如果您使用的是标准 google 数据集，则没有名为“Josh”或“Jim”的孩子

尝试：

```
select fullName from PersonsData.personsdata  where children.name = "Jane" or children.name = "John" 
```

使用谷歌数据集

# jquery - 如何推迟加载 twitter 嵌入式时间线小部件？

> ID：15170343
> 
> 赞同：2
> 
> 时间：2013-03-02T03:24:41.470
> 
> 标签：jquery, twitter

我正在使用新的 twitter 嵌入式时间线小部件，默认情况下，您需要将脚本放置在页面中您希望它显示的位置。

这意味着它在页面底部的其他脚本之前被调用，其中一些调整布局和 twitter 导致相当明显的延迟

在所有其他 js 运行之后，我将如何在最后动态插入小部件？

```
<a class="twitter-timeline" href="https://twitter.com/search?    
q=from%3A%40jamesTbone" 
data-widget-id="XXXXXXXXXX"></a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)
[0];if(!d.getElementById(id))    
{js=d.createElement(s);js.id=id;js.async=true;js.src="//platform.twitter.com/widgets.js";fjs
.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T03:57:28.000

您必须将脚本块放在页面的末尾。Jquery 将在页面下方按顺序运行每个脚本。

# c++ - /usr/bin/ld: 找不到 -lMagick++6-Q16

> ID：15170344
> 
> 赞同：1
> 
> 时间：2013-03-02T03:24:48.570
> 
> 标签：c++, gcc, ubuntu, compilation, imagemagick

我已经在 ubuntu 系统（12.04）上安装了 ImageMagick 库（来自源代码）：

```
$: identify -version
Version: ImageMagick 6.8.3-6 2013-03-02 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2013 ImageMagick Studio LLC
Features: DPC OpenMP
Delegates: ps 
```

但是如果我试图编译我的程序：

```
$: make
g++ -o grayscale grayscale.cpp -I/usr/local/include/ImageMagick-6.8 -I/usr/local/lib `Magick++-config --cppflags --cxxflags --ldflags --libs`
/usr/bin/ld: cannot find -lMagick++6-Q16
/usr/bin/ld: cannot find -lMagick++6-Q16
collect2: ld returned 1 exit status
make: *** [grayscale] Error 1 
```

我试图寻找一些解决方案，但无法解决这个问题。你有人能帮帮我吗？我没有正确理解此错误的含义。

# javascript - web.py 模板传递的 json 没有在 javascript 中正确解析

> ID：15170348
> 
> 赞同：0
> 
> 时间：2013-03-02T03:25:51.373
> 
> 标签：javascript, json, web.py

我正在使用 web.py 和 Templetor 并将一个充满 json 的变量传递给嵌入在 Templetor 文件中的 javascript。这些 json 将由 D3 使用。

```
 Python Code
           for row in rs:
                    #z['time'] = row.gps                                                                      
                    z['year'] = count + 2000
                    z['value'] = row.br
                    allrows.append(z)
                    count = count+1
                    if count > 5: break;
            p = json.dumps(allrows)
            return render.index(p) 
```

现在这应该在 Templetor 文件中使用：

```
$def with (data)
<!DOCTYPE html>
<body>
    <meta charset="utf-8">
    <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>

<div id="bar-demo"></div>

<script type="text/javascript" id="bar-demo-js">
var data = JSON.parse($data) 
```

这似乎遇到了错误——（根据 firefox）SyntaxError: invalid property id [Break On This Error]

var data = JSON.parse([{"value": 151.47999999999999, "year":...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:06:25.260

您不必调用 JSON.parse，因为它已经是对象，而不是 JavaScript 中的字符串。只需 var data=$data 就足够了。

# python - python中的%r、%s和%d有什么区别？

> ID：15170349
> 
> 赞同：1
> 
> 时间：2013-03-02T03:25:55.700
> 
> 标签：python, string

好吧，我总是在 python 上使用 %r，但我不知道什么时候必须使用这些其他格式......

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-02T03:36:08.020

这在[Python 文档](http://docs.python.org/3/library/stdtypes.html#old-string-formatting)中进行了解释。简而言之，

*   `%d`将格式化一个数字以供显示。
*   `%s`将插入对象的表示字符串表示（即`str(o)`）
*   `%r`将插入对象的规范字符串表示（即`repr(o)`）

如果您正在格式化整数，那么这些是等效的。对于大多数对象，情况并非如此。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-02T03:39:49.527

这是一个补充詹姆斯亨斯特里奇答案的例子：

```
class Cheese(float):
    def __str__(self):
        return 'Muenster'
    def __repr__(self):
        return 'Stilton'

chunk = Cheese(-123.4)

print(str(chunk))
# Muenster
print(repr(chunk))
# Stilton
print(int(chunk))
# -123
print('%s\t%r\t%d'%(chunk, chunk, chunk))
# Muenster  Stilton -123 
```

# parsing - 我的 Lambda 微积分语法是否明确？

> ID：15170356
> 
> 赞同：1
> 
> 时间：2013-03-02T03:27:13.083
> 
> 标签：parsing, lambda, programming-languages, grammar, lambda-calculus

我正在尝试为处理 lambda 演算的语言编写一个小型编译器。这是我发现的语言的模棱两可的定义：

```
E → ^ v . E  | E E | ( E ) | v 
```

符号 ^, ., (, ) 和 v 是记号。^ 表示 lambda，v 表示变量。^vE 形式的表达式是函数定义，其中 v 是函数的形参，E 是函数体。如果 f 和 g 是 lambda 表达式，则 lambda 表达式 fg 表示函数 f 对参数 g 的应用。

我正在尝试为这种语言编写一个明确的语法，假设函数应用程序是左关联的，例如 fgh = (fg)h，并且该函数应用程序的绑定比 . 更紧密，例如 (^x. ^y. xy) ^zz = (^x. (^y. xy)) ^zz

这是我到目前为止所拥有的，但我不确定它是否正确：

```
E -> ^v.E | T
T -> vF | (E) E
F -> v | epsilon 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T06:41:26.573

在阅读您的问题和评论之间，您似乎更多地寻求学习和实施 lambda 演算的帮助，而不仅仅是您在此处提出的具体问题。如果是这样，那么我在同一条路上，所以我将分享一些有用的信息。

我拥有的最好的书，也不是说最好的书，是Benjamin C. Pierce 的[Types and Programming Languages](http://www.cis.upenn.edu/~bcpierce/tapl/) ( [WorldCat](http://www.worldcat.org/oclc/47705787) )。我知道标题听起来不像 lambda 演算，但请看一下[λ-Calculus extensions:meaning of extension symbols](https://cs.stackexchange.com/q/9548/268)，其中列出了本书中的许多 lambda 演算。[在OCaml](http://www.cis.upenn.edu/~bcpierce/tapl/checkers/)和[F#](https://github.com/jack-pappas/fsharp-tapl)中有本书的代码。

尝试在[CiteSeerX](http://citeseerx.ist.psu.edu/index;jsessionid=A4CC96D6F9ED308562E7AB17838776DC)中搜索关于 lambda 演算的研究论文以了解更多信息。

到目前为止，我发现的最好的 λ-Calculus 评估器是：

带有信息的[Lambda](http://www.itu.dk/people/sestoft/lamreduce/index.html)[微积分减少工作台](http://www.itu.dk/people/sestoft/lamreduce/lamframes.html)。

此外，我发现您在[CS:StackExchange](https://cs.stackexchange.com/questions/tagged/lambda-calculus)和数学相关的数学问题上[获得](https://math.stackexchange.com/questions/tagged/lambda-calculus)了更好的答案，这些问题与 CS:StackExcahnge 上的编程相关。

至于实现 lambda 演算的编程语言，如果你还没有的话，你可能需要学习一[门函数式语言；](http://rosettacode.org/wiki/Functional_programming)是的，它是另一种野兽，但在山的另一边的启蒙是壮观的。我发现的大多数源代码都使用了一种函数式语言，例如 ML 或 OCaml，一旦你学会了一种，其余的就会变得更容易学习。

更具体地说，[这里](https://github.com/jack-pappas/fsharp-tapl/tree/master/untyped)是无类型 lambda 演算项目的源代码，[这里](https://github.com/jack-pappas/fsharp-tapl/blob/master/untyped/Parser.fsy)是 YACC 的 F# 变体的输入文件，从阅读你以前的[问题](https://stackoverflow.com/users/850271/john-roberts?tab=questions)来看，它似乎在你的知识世界中，[这里](https://github.com/jack-pappas/fsharp-tapl/blob/master/untyped/test.f)是示例输入。

由于该语法用于实现 REPL，因此它从顶层开始，认为命令提示符，并接受多个命令，在这种情况下是 lambda 演算表达式。由于该语法用于许多演算，它在前面的示例中具有占位符的部分，因此这里的绑定更多是占位符。

终于我们到了你所追求的部分

注意 LCID 是小写标识符

```
Term : AppTerm
     | LAMBDA LCID DOT Term 
     | LAMBDA USCORE DOT Term 

AppTerm : ATerm   
        | AppTerm ATerm

/* Atomic terms are ones that never require extra parentheses */
ATerm : LPAREN Term RPAREN 
      | LCID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T00:43:36.080

您可能会在次线性时间内找到特定语法歧义的证明，但证明语法明确是一个 NP 完全问题。您必须生成该语言中所有可能的句子，并检查每个句子是否只有一个派生词。

# jquery - jQuery、AJAX、PHP 和接收信息

> ID：15170357
> 
> 赞同：0
> 
> 时间：2013-03-02T03:27:18.780
> 
> 标签：jquery

我不熟悉 jQuery，搜索给我的答案与我所寻找的完全不同。

我正在使用 ajax 从从数据库加载的 PHP 脚本加载数据。我想加载新数据而不是加载已经显示的旧数据。我想出了使用要从中提取数据的表中的最高索引值来执行此操作的想法，这很容易。用 PHP 做这件事没问题，但让一个循环继续下去是困难的部分。

我的 PHP 脚本输出粘贴在接收页面中的 HTML。我需要该页面从我的页面接收一个变量，以便在下一个请求时它可以提交最高索引值以防止重复。现在这就是问题所在。

jQuery AJAX 接收数据类型“HTML”。如何将变量与 HTML 一起传递，以便可以更新脚本。

程序工作原理总结：

```
-Page.php sends an ajax(GET) request to script.php with a few variables
-Script.php receives the request and processes the variables
-Script.php finishes processing and outputs HTML
-(I want script.php to send variables to page.php that can be identified separately from the HTML)
-Page.php receives HTML and appends it
-(I want those variables to be added to the Jquery variables so they can be sent on next request) 
```

现在如何做到这一点是个问题。我对jQuery不太熟悉，所以我不确定它是否可以正常完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T03:54:56.013

如果项目的标记不复杂，我通常会以 json 格式获取数据，然后在 js 中进行标记。

例如，假设这是我们返回的 json 数据：

```
{
   "offset": 0,
   "limit": 5,
   "results": [
      { "id": 1, "name": "something"},
      { "id": 2, "name": "something2"},
      { "id": 3, "name": "something3"},
      { "id": 4, "name": "something4"},
      { "id": 5, "name": "something5"}
   ]
} 
```

我们可以使用`offset`and`limit`作为该响应对应的数据的 SQL 的一对一。所以这使得 jquery 是这样的：

```
function getResults(limit, offset) {
    $.getJSON('getitems.php', {'limit': 5, 'offset': 0}, function(data){
       var tpl = '<div id="result-_ID_">_NAME_</div>',
           html = '';  
       if(data.results.length > 0) {
         $.each(data.results, function(i, obj){
             html += tpl.replace('_ID_', obj.id).replace('_NAME_', obj.name);
         });

         $(elementToAppendTo).append(html);

         // there could be more left so lets do it again, with the offset incremented
         // to get the next set ie. offset = 0+5 = 5
         getResults(data.limit, data.offset+data.limit);
       }
    });
} 
```

当然，这个例子会一直调用它自己，我假设你想要一些用户操作来确定何时调用下一组项目，但这应该说明一般的想法。

# javascript - 为什么我的图片没有在单独的窗口中打开？

> ID：15170361
> 
> 赞同：0
> 
> 时间：2013-03-02T03:28:05.923
> 
> 标签：javascript

继承人的Javascript代码：

```
function showCard(linkTarget) {
var propertyWidth = 400;
var propertyHeight = 350;
var winLeft = (screen.width-propertyWidth)/2;
var winTop = (screen.height-propetyHeight)/2;
var winOptions = "toolbar=no,menubar=no,location=no,scrollbars=yes,resizable=no";
winOptions += ",width=" + propertyWidth;
winOptions += ",height=" + propertyHeight;
winOptions += ",left=" + winLeft;
winOptions += ",winTop=" + winTop;
cardWindow = window.open(link.target,"cardInfo", winOptions);
cardWindow.focus();
}
var cardWindow; 
```

href="valentine.jpg" onclick="showCard('valentine.jpg');return false">情人节

（我删除了标签，因为代码没有显示出来）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:31:35.780

`window.open(link.target...)`应该`window.open(linkTarget...)`

这会导致错误，因此`return false;`永远不会到达并且链接正常导航。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T03:32:00.993

在我看来你的问题在这里：

您的函数声明为：

```
 function showCard(linkTarget) 
```

但是您稍后在代码*中用点将*传入的参数称为

```
 cardWindow = window.open(link.target,"cardInfo",winOptions); 
```

# restsharp - 使用restsharp分块上传文件以启用进度

> ID：15170362
> 
> 赞同：6
> 
> 时间：2013-03-02T03:28:08.810
> 
> 标签：restsharp

我正在使用 Restsharp 上传文件。我需要显示进度条，但要知道他们不支持分块上传。下面是上传的部分代码，如何修改它以启用分块上传？它在文件 Http.Synch.cs 中

```
 private static HttpWebResponse GetRawResponse(HttpWebRequest request)
    {
        try
        {
            return (HttpWebResponse)request.GetResponse();
        }
        catch (WebException ex)
        {
            if (ex.Response is HttpWebResponse)
            {
                return ex.Response as HttpWebResponse;
            }
            throw;
        }
    } 
```

谢谢

苏吉特

# javascript - iframe 中生成的 jQuery 代码在 IE 中不起作用，但在 FF 和 Chrome 中起作用

> ID：15170365
> 
> 赞同：0
> 
> 时间：2013-03-02T03:28:31.110
> 
> 标签：javascript, jquery, internet-explorer, iframe

我有如下代码在 iframe 中生成 JavaScript 代码，然后运行它。它在 FF 和 Chrome 中运行良好，但无法在 IE 中运行。它说

> 属性“$”的值为 null 或未定义，不是 Function 对象

任何想法？

这是演示链接：[http ://www.gbtags.com/gb/demoviewer/466/empty/6b5417d7-4388-4e30-8055-0d15b10fa9a8.html.htm](http://www.gbtags.com/gb/demoviewer/466/empty/6b5417d7-4388-4e30-8055-0d15b10fa9a8.html.htm)

```
<html>
<head>
<title>TEST iframe</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
</head>
<body>
  Just a iframe
  <div id="resulttab">
    <iframe id="resultiframe" frameBorder="1" width="100%" height="120"></iframe>
  </div>
    <SCRIPT>
        var iframe = $('#resultiframe')[0];

        if(iframe.contentDocument) doc = iframe.contentDocument;
        else if(iframe.contentWindow) doc = iframe.contentWindow.document;
        else doc = iframe.document;

        var js = '$(function(){console.log("hello")})';

        var result = '<html><head></head><body>TEST JqUERY<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"><\/script><script type="text/javascript">' + js + '<\/script></body></html>';

        doc.open();
        doc.writeln(result);
        doc.close();
    </SCRIPT
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T03:50:59.440

这有效：

```
doc.open();
doc.writeln('<html><head></head><body>TEST JqUERY<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"><\/script>');
doc.writeln('<script type="text/javascript">' + js + '<\/script></body></html>');
doc.close(); 
```

# javascript - 使用 jQuery.each() 就地操作 Array/Object 的元素

> ID：15170367
> 
> 赞同：0
> 
> 时间：2013-03-02T03:29:41.453
> 
> 标签：javascript, jquery

在这里玩 JavaScript 和 jQuery。制作一个产生时间戳的函数。

我有以下代码：

```
var timestamp = function () {
    var now = new Date();
    var components = [now.getHours(), now.getMinutes(), now.getSeconds()];

    components.zero_pad = function(index, component) {
        // When this function is called with `$.each()` below, 
        // `this` is bound to `component`, not `components`.
        // So, this code fails, because you can't index a Number.
        this[index] = (this[index].toString().length == 1) ?
          '0' + component : component;
    }

    // Offending line
    $.each(components, components.zero_pad);
    return components[0] + ':' + components[1] + ':' + components[2];
}; 
```

此代码失败，因为`$.each()`将回调绑定到它正在处理的元素而不是可迭代元素，如下所示：

```
// from jQuery.each()
for ( ; i < length; i++ ) {
    // I would have guessed it would be 
    // value = callback.call( obj, i, obj[ i ] );
    // but instead it's:
    value = callback.call( obj[ i ], i, obj[ i ] );

    if ( value === false ) {
        break;
    }
} 
```

现在，为了获得我想要的绑定，我可以将代码中的违规行更改为：

```
$.each(components, $.proxy(components.zero_pad, components)); 
```

但是在这里我调用了更多的框架代码，这开始看起来很混乱。

我觉得我错过了什么！有没有更简单的方法来修改数组的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:35:35.103

用更简单的东西替换所有东西会容易`zero_pad`得多，如下所示：

```
var timestamp = function() {
  var now = new Date(), parts = [now.getHours(), now.getMinutes(), now.getSeconds()],
      pad = function(n) {return n < 10 ? "0"+n : n;};
  return pad(parts[0])+":"+pad(parts[1])+":"+pad(parts[2]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T04:19:05.227

如果我不在基地，请忽略以下内容-但我很好奇您想要达到什么目的，这是您想要实现的“排序”吗？

```
jQuery(document).ready(function () {
   var now = new Date();
   var components = [now.getHours(), now.getMinutes(), now.getSeconds()];
   var timestamp = {
     storage : {},
         zero_pad : function() {
            storage = $.grep(components,function(obj,i){
            return obj = (obj.toString().length == 1) ? '0' + components  : components;
         });
        return storage;
     }
   };
     console.log(timestamp.zero_pad());
 }); 
```

# maven - OSGi 使用约束冲突

> ID：15170369
> 
> 赞同：1
> 
> 时间：2013-03-02T03:30:36.783
> 
> 标签：maven, osgi, bundle, fuseesb, jbossfuse

我尝试在 FUSE ESB OSGi 容器中启动由 Maven 创建的包。但是我的三个依赖项出错了：

```
1\. libthrift-0.7.0.jar
2\. httpclient-4.0.1.jar
3\. httpcore-4.0.1.jar

Error executing command: Error starting bundles:
Unable to start bundle 262: Uses constraint violation. Unable to resolve bundle 
revision file__opt_FuseESBEnterprise-7.1.0_deploy_libthrift-0.7.0.jar [316.0]
because it is exposed to package 'org.apache.http' from bundle revisions 
org.apache.httpcomponents.httpcore [291.0] and org.apache.httpcomponents.httpclient     
[290.0] via two dependency chains.

Chain 1:
 file__opt_FuseESBEnterprise-7.1.0_deploy_libthrift-0.7.0.jar [316.0]
import: (osgi.wiring.package=org.apache.http)
 |
export: osgi.wiring.package=org.apache.http
org.apache.httpcomponents.httpcore [291.0]

Chain 2:
file__opt_FuseESBEnterprise-7.1.0_deploy_libthrift-0.7.0.jar [316.0]
import: (osgi.wiring.package=org.apache.http.client)
 |
export: osgi.wiring.package=org.apache.http.client; uses:=org.apache.http
export: osgi.wiring.package=org.apache.http
org.apache.httpcomponents.httpclient [290.0] 
```

谁能向我解释这个错误是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T05:04:57.920

你是如何安装 http 核心和客户端包的？

您可以尝试将 camel-http4 安装为一项功能，因为它提供了开箱即用的 http 客户端。

```
features:install camel-http4 
```

然后安装你自己的包。

# matlab - 为录制的音频添加回声

> ID：15170370
> 
> 赞同：2
> 
> 时间：2013-03-02T03:30:44.223
> 
> 标签：matlab, audio, signal-processing, audio-recording

我已经在 Matlab 中录制了自己的声音，并打算为其添加一些回声。我想出了一种解决方案来获得所需的回声效果：

*   **在时域中延迟采样音频并将其添加到原始样本中**。

为了做到这一点，我正在使用 Matlab，我基本上做了以下工作：

```
recObj = audiorecorder(44100, 16, 2);%sampling rate of 44100Hz, stereo
recordblocking(recObj,length);%record audio for a fixed length duration
y = time_delay(getaudiodata(recObj) , 5000 );%set a delay of 5000 to original sampled audio data

function [ y ]  = time_delay ( x , R )
%this function sets a delay to x of R
y = zeros(length(x) + R , 1);
y(R + 1:length(y)) = x(1:length(x)); 
```

如您所见，我有一个可用于播放录制音频的recObj。为了获得录制音频的延迟版本，我使用了getaudiodata（recObj）和我自己的函数time_delay。我遇到的一个问题是我不知道如何从 time_delay 函数检索到的延迟音频数据中获取新的延迟音频记录器对象，我需要一个音频记录对象，因为这是播放某些东西的唯一方法。所以，我的问题是：

*   这是在音频信号中获得所需回声效果的好方法吗？
*   如果是，那么如何将延迟的音频数据设置为
    audiorecorder 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T17:33:58.980

这是添加两个信号（延迟和非延迟）的代码：

```
 x = getaudiodata(recObj); n1 = 1:size(x,1);%audiodata of original signal
    y = time_delay(x , 50000 ); n2 = 1:size(y,1);%audiodata of delayed signal
    mixed = sigadd(x,y,n1,n2); %audiodata of mixed signal
    mixrecObj = audioplayer(mixed,44100);
    play(mixrecObj); 
```

这是 sigadd 函数：

```
function [ y,n ] = sigadd( x1,x2,n1,n2 )
%implements y[n] = x1[n] + x2[n]
%y = sum sequence over n wich includes n1 and n2
%x1 = first sequence over n1
%x2 = second sequence over n2
%

n = min(min(n1),min(n2)):max(max(n1),max(n2)); %duration of y(n)
y1 = zeros(1,length(n)); y2 = y1;
y1(find((n >= min(n1))&(n <= max(n1)) == 1)) = x1;
y2(find((n >= min(n2))&(n <= max(n2)) == 1)) = x2;
y = y1 + y2;
end 
```

这非常有效，但不足以获得真正的回声效果。为了实现这一点，我们必须创建更多延迟信号（当然有不同的延迟），然后将它们全部添加，如下所示：

```
x = getaudiodata(recObj); n1 = 1:size(x,1);
y = tim_delay(x , 5000 ); n2 = 1:size(y,1);
s = time_delay(x , 4000 ); n3 = 1:size(s,1);
d = time_delay(x , 3000 ); n4 = 1:size(d,1);
mixed1 = sigadd(s,d,n3,n4);n5 = 1:size(mixed1,2);
mixed2 = sigadd(x,y,n1,n2);n6 = 1:size(mixed2,2);
totmixed = sigadd(mixed1,mixed2,n5,n6);
mixrecObj = audioplayer(totmixed,44100);
play(mixrecObj); 
```

我已经用三个延迟加上原来的延迟测试了这个，你可以听到一个非常好的回声。

**注意**：在第三段代码中，如果有一个函数通过将回声效果索引作为参数传递给它来返回带有回声的信号，那就更好了，但为了简单起见，我把它留了下来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-05T15:35:49.157

**获得更真实**的回声 在每个回声中，都必须降低回声的音量。可以实现

```
y=y/5; 
```

修改的完整示例以实现减少每个回声的音量

```
recObj = audiorecorder(44100, 16, 2);%sampling rate of 44100Hz, stereo

disp('Start speaking.')
%recordblocking(recObj, 5);
recordblocking(recObj,5);%record audio for a fixed length duration
disp('End of Recording.');
x = getaudiodata(recObj);
plot(x);
hold on;

x = getaudiodata(recObj); n1 = 1:size(x,1);

s = time_delay(x , 0 ); n3 = 1:size(s,1); %original 
plot(s,'b');
d = time_delay(x , 20000 ); n4 = 1:size(d,1);%delayed by 20000
d=d/1.5;
plot(d,'y');

y = time_delay(x , 40000 ); n2 = 1:size(y,1);% delyaed by 50000
y=y/2;
plot(y,'g');

z = time_delay(x , 60000 ); n8 = 1:size(z,1);% delyaed by 70000
z=z/4;
plot(z,'r');

mixed1 = sigadd(s,d,n3,n4);n5 = 1:size(mixed1,2);
mixed2 = sigadd(y,z,n2,n8);n6 = 1:size(mixed2,2);
totmixed = sigadd(mixed1,mixed2,n5,n6);
mixrecObj = audioplayer(totmixed,44100);
%mixrecObj = audioplayer(mixed1,44100);
play(mixrecObj); 
```

# android - Android 通知时间格式如何更新？

> ID：15170374
> 
> 赞同：5
> 
> 时间：2013-03-02T03:31:03.013
> 
> 标签：android

我正在为 AndroidNotification 使用自定义 RemoteView，并且我想模仿系统行为。

Android 如何更新它的通知时间格式——一旦设置它们会改变吗？我怎样才能模仿这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T04:30:43.537

我不太了解通知时间格式，但如果你想模仿他们的行为，应该看看这个`DateUtils`类，尤其是我认为你所描述的[formatSameDayTime 。](http://developer.android.com/reference/android/text/format/DateUtils.html#formatSameDayTime%28long,%20long,%20int,%20int%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T00:12:07.707

添加后无法更新通知，除非使用相同的 ID 再次调用 .notify。

如果处理时间戳，最好使用原生的 Notification NotificationCompat.Builder 而不使用 RemoteViews。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:41:16.160

鉴于您自己提供了答案，我不确定您是否仍在寻找答案。但是，如果您希望实现最初的目标，您可能会想要

*   每当时间改变时重建 RemoteView（这更容易）
*   设置一个 BroadcastReceiver 来捕捉时钟的滴答声，这样你就知道时间什么时候改变了。

所以，一些代码有点像这样：

```
class MyCleverThing extends Service (say) {

    // Your stuff here

    private static IntentFilter timeChangeIntentFilter;
    static {
        timeChangeIntentFilter = new IntentFilter();
        timeChangeIntentFilter.addAction(Intent.ACTION_TIMEZONE_CHANGED);
        timeChangeIntentFilter.addAction(Intent.ACTION_TIME_CHANGED);
    }

    // Somewhere in onCreate or equivalent to set up the receiver
    registerReceiver(timeChangedReceiver, timeChangeIntentFilter);

    // The actual receiver
    private final BroadcastReceiver timeChangedReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        final String action = intent.getAction();

        if (action.equals(Intent.ACTION_TIME_CHANGED) ||
            action.equals(Intent.ACTION_TIMEZONE_CHANGED))
        {
            updateWidgets();  // Your code to rebuild the remoteViews or whatever
        }
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T15:19:26.610

每次更新通知时，请执行以下简单操作（24 小时制）...

```
public void updateNotifTime(RemoteViews customNotifView){
    Date currentTime = new Date();
    int mins = currentTime.getMinutes();
    String minString = "";
    if(mins<10){
       minString = "0";
    }
    minString += mins;
    customNotifView.setTextViewText(R.id.time, currentTime.getHours()+":"+minString);
} 
```

# clojure - 如何更改 Clojure 或 Lein 的 Clojure 默认版本？

> ID：15170388
> 
> 赞同：3
> 
> 时间：2013-03-02T03:32:58.543
> 
> 标签：clojure, leiningen

我不知道为什么，但是当我通过`$ clojure`or进入 REPL 时`$ lein repl`，`>(clojure-version)`会说“1.2.1”。我想让它说“1.5”。

1.5 版在我由 lein 管理的项目中运行良好。我只想告诉 lein 默认总是使用 1.5，而不是 1.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:36:25.253

目前，这在项目之外不受支持，但正在开发中：[https ://github.com/technomancy/leiningen/issues/966](https://github.com/technomancy/leiningen/issues/966)

现在的解决方法是在你的 project.clj 中指定它

进一步推荐：升级到 Leiningen 2.0。

# c# - 从 DateTime 对象的集合中解析出每月项目

> ID：15170391
> 
> 赞同：4
> 
> 时间：2013-03-02T03:33:56.870
> 
> 标签：c#, collections, group-by

我之前[问过这个问题](https://stackoverflow.com/questions/15009648/looking-for-c-sharp-algorithm-to-grab-recurring-items-from-a-collection-of-datet)来收集日期时间对象并按 dayOfweek 和 time 对它们进行分组

所以只是回顾一下：我收集了 DateTime

```
List<DateTime> collectionOfDateTime = GetDateColletion(); 
```

然后按 dayofWeek 和一天中的时间分组

```
var byDayOfWeek = collectionOfDateTime.GroupBy(dt => dt.DayOfWeek + "-" + dt.Hour + "-" + dt.Minute); 
```

所以在这一点上，我将这些按周（一致的时间）分组，效果很好。

我现在有一个按月而不是按周分组的新要求。当我说“月”时，它不是一个月中的同一天，而是类似于“每个月的第一个星期二”

我试图找出在一个组中使用什么“键”来分组符合每月逻辑的所有项目（每月的第一个星期二，每个月的第二个星期五等）

例如，假设我有这些日期开始；

```
var date1 = new DateTime(2013, 1, 4).AddHours(8);  // This is the first Friday in Jan
var date2 = new DateTime(2013, 2, 1).AddHours(8);  // This is the first Friday in Feb
var date3 = new DateTime(2013, 1, 5).AddHours(3);  // This is the first Sat in Jan
var date4 = new DateTime(2013, 2, 2).AddHours(3);  // This is the first Sat in Feb
var date5 = new DateTime(2013, 2, 2).AddHours(6);  // This is the first Sat in Feb - different time 
```

如果这些是进入原始数组的日期，我需要一个 groupby 来结束 3 个组。

*   第一组将包含 date1 和 date2
*   第二组将包含 date3 和 date4。
*   date5 将是独立的，因为它与不同时间的任何其他组都不匹配

任何人都可以建议按照该标准进行分组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:24:38.230

我认为这比看起来容易：

```
var byDayOfMonth = from d in dates
                   let h = (d.Day / 7) + 1
                   group d by new { d.DayOfWeek, h } into g
                   select g; 
```

局部变量`h = (d.Day / 7) + 1`设置了该`DayOfWeek`月的实际情况。

我运行它进行测试并收到 2 个组，与您的示例完全相同。该组的键是：

```
{ DayOfWeek = Friday, h = 1 }
{ DayOfWeek = Saturday, h = 1 } 
```

什么意思，有“每月的*第一个星期五*”和“每月的*第一个星期六*”的组。

`d.Hour`您可以通过和/或`d.Minute`您喜欢的方式轻松扩展分组键：

```
var byDayOfMonth = from d in dates
                   let h = (d.Day / 7) + 1
                   group d by new { d.DayOfWeek, h, d.Hour, d.Minute } into g
                   select g; 
```

结果（仅键）：

```
{ DayOfWeek = Friday, h = 1, Hour = 8, Minute = 0 }
{ DayOfWeek = Saturday, h = 1, Hour = 3, Minute = 0 }
{ DayOfWeek = Saturday, h = 1, Hour = 6, Minute = 0 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T04:34:15.233

可能有一种更简单的方法可以做到这一点，但这就是我的想法：

我从您的问题中收集到，您需要将“2 月的第一个星期二到 3 月的第一个星期一”等所有内容进行分组，这样您就可以得到这些天数可变的“月份”跨度 - 取决于月份他们开始。如果是这样，那么您确实需要使用一年中的日期将其分解为范围，因此：

```
Group by the First Wednesday of the Month 2013
Group 0 (0-1) 
All DayOfYear between 0 and 1 2013
Group 1 (2-36) 
The first Wednesday of the month: January is DayOfYear 2\. 
The first Wednesday of the month: February is DayOfYear 37\. 
etc. 
```

所以第一个范围是一个函数*f*使得 f(32) = 1 (DayOfYear 是 32)，因为它在 2 到 37 的范围内。这个*f*是一个范围的索引集合，在集合中找到给定 DayOfYear 的项目落入，并将该项目的索引作为组号返回。

您可以通过获取最小和最大日期来动态构建此表，`GetDateCollection`以确定总体范围。因为围绕日期的逻辑本身就是一个非常复杂的话题，所以我会求助于像[NodaTime](http://noda-time.googlecode.com)这样的库（特别是[算术](http://noda-time.googlecode.com/hg-history/1.0.x/docs/userguide/arithmetic.html)文档），从最小日期开始，逐日推进，直到找到第一个合格日（即， “本月的第一个星期一”）并创建一个范围 0 到那一天 - 1 作为组 0 并将其推送到索引集合（`ArrayList`可能）。然后从该日期循环使用[`LocalDate.PlusWeeks(1)`](http://noda-time.googlecode.com/hg-history/1.0.x/docs/api/html/M_NodaTime_LocalDate_PlusWeeks.htm)直到月份更改，构建一个新范围并将该范围推送到同一个索引集合中。

每次跨入新的一年时，您都必须在 DayOfYear 中添加 365（如果前一年是闰年，则为 366），因为 DayOfYear 每年都会重置。

现在，您已经获得了一个范围集合，这些范围作为一个表格，根据 DayOfYear 将天分组为所需的单位。

编写一个遍历表的函数，`+ [365|366] * x`将给定日期的 DayOfYear（其中 x 是您要比较的日期是从您的最小年份开始的年数）与集合中的项目进行比较，直到找到该日期所在的范围，并且返回该项目的索引作为组号。（或者，如果提供的范围在该范围内，则每个范围都可以`Func<DateTime,bool>`返回 true `DateTime`。）

范围集合的另一种数据结构是 ushort 数组，其长度等于您的日期范围内从最小日期到最大日期的所有天数，以及为其分配的组号的每一天的值（使用范围计算，如上所述） . 这将在分组时执行得更快，但如果您使用较小的数据集（只有几百个日期），性能可能并不明显。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-02T12:23:04.693

要使用 Linq 进行分组，也许这段代码会对您有所帮助：

```
List<DateTime> collectionOfDateTime = GetDateColletion();
collectionOfDateTime.GroupBy(s => Convert.ToInt16(s.DayOfWeek) & s.Hour & s.Minute); 
```

# r - 在 R 中类似 Python 的数值解包

> ID：15170394
> 
> 赞同：13
> 
> 时间：2013-03-02T03:34:58.183
> 
> 标签：r, iterable-unpacking

在 Python 中，可以这样做：

```
>>> a, b, c = (1, 2, 3)
>>> a
1
>>> b
2
>>> c
3 
```

有没有办法在 R 中做到这一点，如下所示？

```
> a, b, c = c(1, 2, 3) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-02T03:44:41.130

您可以使用在列表中执行此操作`[<-`

```
e <- list()

e[c('a','b','c')] <- list(1,2,3) 
```

或在 data.table 中使用`:=`

```
library(data.table)
DT <- data.table()
DT[, c('a','b','c') := list(1,2,3)] 
```

使用这两个（列表），您可以使用`list2env`复制到全局（或其他）环境

```
list2env(e, envir = parent.frame())

a
## 1
b
## 2
c
## 3 
```

但一般不用于在环境中创建对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T03:54:10.967

也许它看起来很愚蠢，但我会这样做：

```
v <- list(a=0,b=0,c=0)
v[] <- c(1,2,3)
 v
$a
[1] 1

$b
[1] 2

$c
[1] 3 
```

# r - 在 Rprofile.site 中使用 .libPaths 更改 R 默认库路径无法正常工作

> ID：15170399
> 
> 赞同：253
> 
> 时间：2013-03-02T03:36:02.150
> 
> 标签：r, rstudio, r-faq, library-path

我在 Windows 上运行 R，而不是作为管理员。当我安装软件包时，以下命令不起作用：

```
> install.packages("zoo")
Installing package(s) into ‘C:/Program Files/R/R-2.15.2/library’
(as ‘lib’ is unspecified)
Warning in install.packages :
  'lib = "C:/Program Files/R/R-2.15.2/library"' is not writable 
```

要安装一个包，我必须指定一个库位置：

```
install.packages("zoo", lib="C:/software/Rpackages") 
```

要加载一个包，我还必须指定库位置：

```
library("zoo", lib.loc="C:/software/Rpackages") 
```

所有这一切都很好，但我想看看我是否可以`C:/software/Rpackages`以某种方式添加到库路径中，因此不必每次都输入它。

当我在网上搜索时，我发现一种方法是编辑`Rprofile.site`文件并添加该行

```
.libPaths("C:/software/Rpackages") 
```

但是，在这样做并启动 RStudio 之后，这是我得到的输出

```
> .libPaths()
[1] "C:/Program Files/R/R-2.15.2/library" "C:/Program Files/RStudio/R/library" 
```

`.libPaths`我添加到的命令似乎`Rprofile.site`没有任何效果！为什么会这样？或者更重要的是，我怎样才能解决这个问题，以便我可以在不输入库位置的情况下安装和加载包？

注意：如果我启动 RStudio，该`.libPaths()`命令似乎可以正常工作

```
.libPaths("C:/software/Rpackages")
> .libPaths()
[1] "C:/software/Rpackages"               "C:/Program Files/R/R-2.15.2/library" 
```

这不是很奇怪吗？

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2013-10-29T15:43:23.120

正确的解决方案是将环境变量设置`R_LIBS_USER`为所需库文件夹的文件路径的值，而不是让 RStudio 识别 Rprofile.site 文件。

要在 Windows 中设置环境变量`R_LIBS_USER`，请转到控制面板（系统属性 -> 高级系统属性 -> 环境变量 -> 用户变量）到所需的值（库文件夹的路径），例如

```
Variable name: R_LIBS_USER 
Variable value: C:/software/Rpackages 
```

如果由于某种原因您无法访问控制面板，您可以尝试`rundll32 sysdm.cpl,EditEnvironmentVariables`从 Windows 上的命令行运行并从那里添加环境变量。

设置 R_LIBS_USER 将确保库首先显示在 .libPaths() 中，无论是直接启动 RStudio 还是通过右键单击文件并“打开方式”来启动 RStudio。

如果始终通过单击 RStudio 快捷方式启动 RStudio，则 Rprofile 解决方案可以工作。在这种情况下，[将默认工作目录设置为您的 Rprofile 所在的目录](https://support.rstudio.com/hc/en-us/articles/200549016#general)就足够了。单击文件以启动 RStudio 时，Rprofile 解决方案不起作用，因为这会将工作目录更改为远离默认工作目录。

* * *

## 回答 #2

> 赞同：201
> 
> 时间：2013-03-02T04:39:33.220

我通常会尝试将所有包保存在一个库中，但是如果您想添加一个库，为什么不将新库（必须已经存在于您的文件系统中）附加到现有库路径中呢？

```
.libPaths( c( .libPaths(), "~/userLibrary") )
 # obviously this would need to be a valid file directory in your OS
 # min just happened to be on a Mac that day 
```

或者（这将使 userLibrary 成为放置新包的第一个位置）：

```
.libPaths( c( "~/userLibrary" , .libPaths() ) ) 
```

然后我得到（至少在我最初写这篇文章时）：

```
> .libPaths()
[1] "/Library/Frameworks/R.framework/Versions/2.15/Resources/library"
[2] "/Users/user_name/userLibrary" 
```

该`.libPaths`函数与大多数其他非图形函数有点不同。它通过副作用起作用。`Sys.getenv`报告和更改 R 环境变量的函数`Sys.setenv`已分开，但`.libPaths`可以报告或更改其目标。

有关 R 启动过程的信息可以在`?Startup`帮助页面上阅读，RStudio 材料位于： https: [//support.rstudio.com/hc/en-us/articles/200549016-Customizing-RStudio](https://support.rstudio.com/hc/en-us/articles/200549016-Customizing-RStudio)

在您的情况下，RStudio 似乎不尊重 Rprofile.site 设置，或者可能通过从 RStudio 默认值之一读取 .Rprofile 设置来覆盖它们。还应该提到的是，此操作的结果还附加了对`.Library`and的调用的内容`.Library.site`，这也是为什么 RStudio-（或任何其他 IDE 或网络安装-）托管的 R 可能表现出不同行为的进一步原因。

由于`Sys.getenv()`返回 R 进程的当前系统环境，您可以通过以下方式查看库和其他路径：

```
Sys.getenv()[ grep("LIB|PATH", names(Sys.getenv())) ] 
```

对存储和访问包很重要的两个是（现在在 Linux 机器上有所不同）：

```
R_LIBS_SITE                          /usr/local/lib/R/site-library:/usr/lib/R/site-library:/usr/lib/R/library
R_LIBS_USER                          /home/david/R/x86_64-pc-linux-gnu-library/3.5.1/ 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-03-04T06:33:38.910

我设法通过将代码放在`.Rprofile`默认工作目录的文件中来解决问题。

首先，我找到了默认工作目录的位置

```
> getwd()
[1] "C:/Users/me/Documents" 
```

然后我使用文本编辑器编写了一个简单的`.Rprofile`文件，其中包含以下行

```
.libPaths("C:/software/Rpackages") 
```

最后，当我启动`R`并运行时，`.libPaths()`我得到了所需的输出：

```
> .libPaths()
[1] "C:/software/Rpackages"               "C:/Program Files/R/R-2.15.2/library"
[3] "C:/Program Files/RStudio/R/library" 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2017-12-14T05:45:00.387

[https://superuser.com/questions/749283/change-rstudio-library-path-at-home-directory](https://superuser.com/questions/749283/change-rstudio-library-path-at-home-directory)

编辑 ~/.Renviron

```
R_LIBS_USER=/some/path 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-05-04T14:01:38.150

[我在这里](http://people.stat.sfu.ca/~cschwarz/CourseNotes/R-personal-library.html)找到了我认为的解决方案（感谢 SFU 的 Carl Schwarz）添加一个永久识别的个人库（您不必在每个会话中定义它）无论是使用 R 还是 Rstudio，并且 Rstudio 将其视为默认在我的 Mac 机器上。我没有看到它在 SO 上明确列出了这一点，所以我总结了他们为 Windows 和 Mac 提供的步骤。

对于 Windows 7 操作系统：

1.  在您希望拥有个人库的驱动器上创建一个目录，例如 C:\User\Rlibs（或您有权访问的另一个目录）

2.  在 Windows 搜索栏中搜索/转到“为您的帐户编辑环境变量”以编辑控制面板设置

3.  单击“环境变量”窗口中间的“新建...”

4.  在“新建用户变量”窗口中，为“变量名称”键入**R_LIBS**，以及您创建的个人库目录的路径，例如**C:\User\Rlibs**

5.  单击确定，您应该会在用户变量窗口中看到变量/值对

6.  再次单击确定

现在，当您启动 R（或 Rstudio）并键入命令`.libPaths()`时，您应该会看到您创建的个人库以及 R 系统库。

对于 Mac：

1.  在您的“主”或“用户名”目录中创建一个名为**Rlibs的文件夹**

2.  启动终端应用程序

3.  类型：`echo "R_LIBS=~/Rlibs"> .Renvrion`确保大小写匹配。

4.  键入`ls -a`以查看目录中文件的完整列表，现在应该包括**.Renvrion**

5.  验证**.Renviron**文件是否已正确设置：`more .Renviron`

启动 R/Rstudio 并输入`.libPaths()`，您应该会看到您的个人图书馆的新路径。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-04-14T13:46:01.067

如果您没有管理员权限，打开`Rprofile.site`位于*\R-3.1.0\etc*中的 -file并添加：

```
.First <- function(){
  .libPaths("your path here")
} 
```

这会在开始时直接评估`.libPath()`命令

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-11-29T13:32:49.020

在 Ubuntu 上，更改用户默认库路径的[推荐方法](https://cran.r-project.org/bin/linux/ubuntu/README.html#pathways-to-r-packages)是在文件中设置`R_LIBS_USER`变量。`~/.Renviron`

```
touch ~/.Renviron
echo "R_LIBS_USER=/custom/path/in/absolute/form" >> ~/.Renviron 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-01-07T16:40:28.610

我真的很难理解这一点。当我上次重新安装我的操作系统和 Rstudio 时，gorkypl 在上面给出了正确的解决方案，但是这一次，设置我的环境变量并没有解决。

卸载 R 和 Rstudio，创建目录 C:\R 和 C:\Rstudio 然后重新安装两者。

将 R_LIBS_USER 用户变量定义到您喜欢的目录（根据 gorkypl 的回答）并重新启动您的机器以加载用户变量。打开 Rstudio，错误应该消失了。

您还可以使用`Sys.setenv()`将 R_LIBS_USER 修改为您的替代库的路径，这更容易并且不需要重新启动计算机。

要查看 R_LIBS_USER 设置为： `?Sys.getenv()`

读书`help(Startup)`有用。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-11-14T11:12:11.720

只需在没有管理员权限的目录中更改 R 库的默认文件夹，例如

```
.libPaths("C:/R/libs") 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-03-14T07:07:37.007

如果在安装新版本的 R 或通过任何其他方式更改了默认包库，则可以在以下命令的帮助下附加两个库以使用所有包。获取现有库路径：

`.libPaths()`

现在，设置现有路径和旧路径：

`.libPaths(c(.libPaths(), "~/yourOldPath"))`

希望能帮助到你。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-07-08T04:11:22.270

我读了自述文件。他们提到在命令行中使用 .libPaths() 来检查存在哪些路径。我之前有 2 个库路径。当我在我想要的地方使用命令 .libpath("C:/Program Files/R/R-3.2.4revised/library") 时，它改变了库路径。当我再次在命令行输入 .libPaths() 时，它显示了正确的路径。希望这可以帮助

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-09-25T11:15:51.323

**由于这里的大多数答案都与 Windows 和 Mac OS 相关，（考虑到我也为此苦苦挣扎）我决定在我的Arch Linux**设置上发布帮助我解决这个问题的过程。

**步骤1：**

*   对您的系统（例如**ANGRYSearch**）进行全局搜索以查找术语`Renviron`（这是设置用户库设置的配置文件）。
*   它应该只返回以下目录路径中的两个结果：

    1.  `/etc/R/`

    2.  `/usr/lib/R/etc/`
        **注意：存储在 1 和 2（上图）** *的`Renviron`配置文件相互热链接（这意味着当正在编辑的文件为已保存-[您还需要`sudo`保存文件编辑后的权限])*。

**第2步：**

*   导航到第一个目录路径 ( `/etc/R/`) 并`Renviron`使用您喜欢的文本编辑器打开文件。
*   在`Renviron`文件中搜索`R_LIBS_USER`标记并将大括号部分中的文本更新为所需的目录路径。

    **示例：**
    ...**更改自**（*原始条目*）：
    `R_LIBS_USER=${R_LIBS_USER-'~/R/x86_64-pc-linux-gnu-library/4.0'}`
    ...**更改为**（*您想要的条目*）：
    `R_LIBS_USER=${R_LIBS_USER-'~/Apps/R/rUserLibs'}`

**第 3 步：**

*   保存`Renviron`您刚刚编辑的文件...**完成**！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-02-07T13:48:06.943

```
getwd()
# [1] "C:/Users/..../software/My R studio" 
```

用双引号复制上面的链接

```
.libPaths(new="C:/Users/..../software/My R studio") 
```

您的默认路径将更改以安装包

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-07-03T19:12:29.633

如果您想永久更改库路径（每次进入 R 时不调用 .libPath() ，这对我有用：

1.  在您的主目录下创建 .Rprofile。(~/.Rprofile)

2.  输入 `.libPaths(c( .libPaths(), "your new path" ))` .Rprofile 文件，保存。

3.  打开 R（任何目录）并检查，只需键入`.libPaths()`，即可发现您的 libaray 路径已更新！

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2017-09-18T23:15:47.683

我正在研究这个，因为 R 在安装到默认位置时遇到问题，而只是将包放入临时文件夹。它原来是 Mcaffee Endpoint Security 的最新更新，它显然与 R 存在问题。您可以在安装软件包时禁用威胁防护，它会正常工作。

# grails - 配置一个 Activiti BPM？

> ID：15170401
> 
> 赞同：1
> 
> 时间：2013-03-02T03:36:20.677
> 
> 标签：grails, groovy, activiti

我想知道如何在 Grails 中配置/运行 Activiti BPM？我使用 fedora 作为我的操作系统 Grails 2.1 。如果他们是任何教程网站，请提及它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:43:29.967

Grails 应用程序有一个插件，它在 Grails 应用程序中提供了许多 Activiti。[http://grails.org/plugin/activiti](http://grails.org/plugin/activiti)然而，遗憾的是，主要开发人员已经停止了开发。上次更新是针对 Activiti 5.9 和 Grails 2.1，尽管大部分插件内容似乎是为旧版本的 Grails 构建的；例如，插件的 TaskController 中的操作都是闭包，而不是方法。此外，有人确实发出了拉取请求以将其更新到 5.10。

我一直在尝试自己解决该插件的来源。我一直在简单地设置一个独立的 Activiti 服务器和使用 Grails 服务类中的 RESTful API、将一些 Activiti 类导入我的 Grails 应用程序或尝试重新设计插件以满足我的需要（我的网站暂时停留在 Grails 2.0.1 上）。

# mysql - MySQL 从这三个表中查询数据的最佳方法

> ID：15170405
> 
> 赞同：-1
> 
> 时间：2013-03-02T03:37:39.733
> 
> 标签：mysql, join

来寻求你的帮助。考虑下表，以及以下数据：

```
DROP SCHEMA IF EXISTS `jointest`;
CREATE SCHEMA `jointest`;
USE `jointest`;

CREATE TABLE x ( id INT PRIMARY KEY AUTO_INCREMENT , field VARCHAR(20));
CREATE TABLE z ( id INT PRIMARY KEY AUTO_INCREMENT, field VARCHAR(20));
CREATE TABLE y ( id_x INT, id_z INT, PRIMARY KEY (id_x, id_z) );

INSERT INTO x VALUES (NULL,"Good Morning,"), (NULL,"Good Night,"), (NULL,"Bye");
INSERT INTO z VALUES (NULL, "Dad"), (NULL, "Mom"), (NULL, "Bro!");
INSERT INTO y(id_x, id_z) values(1,1), (1,2), (1,3), (2,1), (2,2), (3,3); 
```

从表 x,z 中查询数据是否有更好的解决方案？我想附近的东西

```
SELECT x.field, z.field
FROM y
  INNER JOIN x ON (y.id_x = x.id)
  INNER JOIN z ON (y.id_z = z.id)
ORDER BY x.id; 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T05:00:57.043

MySQL 有一个内置的[Query Optimizer](http://dev.mysql.com/doc/refman/5.0/en/controlling-optimizer.html)，因此放置表和连接的顺序无关紧要。选择使用哪种类型的连接不是性能问题，而是取决于您希望返回的结果[1](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

在正确的列上添加索引以获得可靠的查询性能也很重要。

# c# - 使用 XAttribute 添加和验证命名空间属性值

> ID：15170409
> 
> 赞同：1
> 
> 时间：2013-03-02T03:37:53.900
> 
> 标签：c#, xml, linq, linq-to-xml

我想使用 XObjects 以编程方式创建具有命名空间属性和属性值的“dcterms:type”元素。目标xml如下：

```
<metadata
        xmlns="http://example.org/myapp/"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://example.org/myapp/ http://example.org/myapp/schema.xsd"
        xmlns:dc="http://purl.org/dc/elements/1.1/"
        xmlns:dcterms="http://purl.org/dc/terms/">
    ...
    <dcterms:type xsi:type="dcterms:URI">test</dcterms:type>
    ...
</metadata> 
```

我努力了：

```
XNamespace dcterms= XNamespace.Get("http://purl.org/dc/terms/");
XNamespace xsi = XNamespace.Get("http://www.w3.org/2001/XMLSchema-instance");
XNamespace dc = XNamespace.Get("http://purl.org/dc/elements/1.1/");

XAttribute xsiAttribute = new XAttribute(XNamespace.Xmlns + "xsi", xsi.NamespaceName);
XAttribute dcAttribute = new XAttribute(XNamespace.Xmlns + "dc", dc.NamespaceName);
XAttribute dcmitypeAttribute = new XAttribute(XNamespace.Xmlns + "dcterms", dcterms.NamespaceName);
...
XElement typeElement = new XElement(dc + "type", "test");  
XAttribute typeAttribute = new XAttribute(xsi + "type", dcterms + "URI");
typeElement.Add(typeAttribute); 
```

但这会产生：

```
<dc:type xsi:type="{http://purl.org/dc/terms/}Text">test</dc:type> 
```

...这是错误的，当然，不验证。我还尝试对值进行硬编码：

```
XAttribute typeAttribute = new XAttribute(xsi + "type", @"dcterms:URI"); 
```

这会生成正确的 xml，但会返回“这是一个无效的 xsi:type ' [http://purl.org/dc/terms/:Text](http://purl.org/dc/terms/:Text) '。” 通过 XDocument.Validate() 验证时。

想法？

# c++ - 在 C++ 中使用合并排序算法合并文件

> ID：15170410
> 
> 赞同：0
> 
> 时间：2013-03-02T03:38:12.383
> 
> 标签：c++, sorting, merge, external

我编写了一个程序来对包含 100,000 个双打的文件进行外部合并排序。我无法快速找到 c++ 的外部存储库，因为谷歌搜索它只会导致一堆关于 extern 关键字的页面，所以我决定自己编写，我认为这就是问题所在。

该程序实际上有效，除了一些细节。输出填充将按排序顺序包含所有双打，但在文件末尾是 30 行

```
-9.2559631349317831e+061 
```

这不在输入文件中。我在输出文件和输入文件中还有 21 个值，这还不包括我刚才提到的单个数字的 30 行。

程序是如何运行的，它一次读取 100,000 双 ~ 4000 行并对其进行排序，然后将它们存储到 26 个文本文件中，然后将这 26 个文件合并为 13 个文件，将这 13 个文件合并为 7 个文件，等等......直到只有一个文件。

如果代码真的很难看，我很抱歉，我自己通过铅笔、纸、反复试验找出了所有外部存储的东西。该程序不会用于任何事情。我还没有清理它。除了调用这些方法之外，驱动程序并没有做太多事情。

//读取一个ifstream文件并将数据存储在一个双端队列中。返回一个布尔值，指示文件是否未达到 EOF

```
bool readFile(ifstream &file, deque<DEQUE_TYPE> &data){
double d;
for(int i = 0; i < DEQUE_SIZE && file.good(); i++){
    file >> d;
    data.push_back(d);
}

return file.good();
} 
```

//打开具有指定文件名的文件并将双端队列的内容打印到它。如果 append 为真，则数据将附加到文件中，否则将被覆盖

```
void printFile(string fileName, deque<DEQUE_TYPE> &data, bool append){

ofstream outputFile;

if(append)
    outputFile.open(fileName, ios::app);
else
    outputFile.open(fileName);

outputFile.precision(23);   

while(data.size() > 0){
    outputFile << data.front() << endl;
    data.pop_front();
}
} 
```

//合并排序文件，直到剩下一个文件

```
void mergeFiles(){
ifstream inFile1, inFile2;
ofstream outFile;
string fileName1, fileName2;
int i, k, max;
deque<DEQUE_TYPE> data1;
deque<DEQUE_TYPE> data2;
bool fileGood1, fileGood2;

i = 0;
k = 0;
max = 25;
while(max > 1){

    fileName1 = ""; fileName1 += "sortfile_"; fileName1 += to_string(i); fileName1 += ".txt";
    fileName2 = ""; fileName2 += "sortfile_"; fileName2 += to_string(i+1); fileName2 += ".txt";

    try{
        inFile1.open(fileName1);
        inFile2.open(fileName2);
    } catch(int e){
        cout << "Could not open the open the files!\nError " << e;
    }

    fileGood1 = true;
    fileGood2 = true;

    while(fileGood1 || fileGood2){
        fileGood1 = readFile(inFile1, data1);
        fileGood2 = readFile(inFile2, data2);

        data1 = merge(data1, data2);

        printFile("temp", data1, true);

        data1.clear();
    }

    inFile1.close();
    inFile2.close();
    remove(fileName1.c_str());
    remove(fileName2.c_str());

    fileName1 = ""; fileName1 += "sortfile_"; fileName1 += to_string(k); fileName1 += ".txt";
    rename("temp", fileName1.c_str());

    i = i + 2;
    k++;

    if(i >= max){ 
        max = max / 2 + max % 2;
        i = 0;
        k = 0;
    }
}
} 
```

//合并函数

```
deque<double> merge(deque<double> &left, deque<double> &right){
deque<double> result;

while(left.size() > 0 || right.size() > 0){
    if (left.size() > 0 && right.size() > 0){
        if (left.front() <= right.front()){
            result.push_back(left.front());
            left.pop_front();
        }
        else{
            result.push_back(right.front());
            right.pop_front();
        }
    }

    else if(left.size() > 0){
        result.push_back(left.front());
        left.pop_front();
    }
    else if(right.size() > 0){
        result.push_back(right.front());
        right.pop_front();
    }
}

return result;
} 
```

按照 ThePosey 的建议，我对包含 26 个数字（0 - 25）的文件进行了排序，结果如下：

```
-9.2559631349317831e+061 (47 lines of this)
0
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
25
25
25
25
25 
```

所以我很确定文件的最后一个数字被复制了，但我仍然不确定随机大数字的 47 次出现是由什么引起的。我检查了 100,000 个数字字的最后一个数字在输出文件中只出现了两次，而不是 22 次，所以我想我有 11 个单独的最后一个数字被重复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T05:39:14.507

我不知道这是否是整个问题，但是您的输入循环中有一个经典错误。`file.good()`不保证下一次读取会成功，它只会告诉您前一次读取成功。尝试像这样重组它：

```
for(int i = 0; i < DEQUE_SIZE && (file >> d); i++){
    data.push_back(d);
} 
```

该表达式`file >> d`返回对 的引用，当您尝试将其评估为布尔值时会`file`调用该引用。`good`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T03:53:10.643

是否有理由不能使用几兆内存将整个列表一次读入 RAM 并一次全部排序？它会大大简化你的程序。如果您尝试将此作为一项挑战，我会首先将问题缩小为 1 个包含 100 个双打的文件，将其拆分为 4、25 个双读，然后应该很容易追踪并查看额外的线来自。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T03:56:39.800

假设您的文件是文本格式，您可以使用s.`std::merge`来进行外部合并和内部合并。`std::istream_iterator`

```
std::ifstream in1("temp1.txt");
std::ifstream in2("temp2.txt");
std::ofstream out("output.txt");

std::merge(std::istream_iterator<double>(in1),
           std::istream_iterator<double>(),
           std::istream_iterator<double>(in2),
           std::istream_iteraror<double>(),
           std::ostream_iterator<double>(out, "\n")); 
```

# vb.net - 使用 Nugent 和 VB.net 的 MQL4 DLL

> ID：15170411
> 
> 赞同：0
> 
> 时间：2013-03-02T03:38:25.347
> 
> 标签：vb.net, dll

我正在使用 nugent 和 vb.net 将一个用于 MQL4 的 dll 放在一起，到目前为止它运行良好。

在我的 dll 中，我在满足条件时设置一个标志，这样我就不必在每次调用函数时都进行检查。这工作正常，但我意识到即使我从图表中删除了创建 dll 的 EA，该标志仍​​然设置在内存中。

该标志在模块中的函数内声明为静态。

如果我关闭终端然后再次打开它，则标志已经消失并且该过程再次开始。

如何从内存中删除 dll 并在删除 EA 时释放它的资源（静态变量）？

我在想它可能应该在 deinit 中调用一个函数，但我找不到任何 VB.net 的 dll '杀死'本身的例子。

任何想法将不胜感激。

史蒂夫

更新：我只是有一个想法。也许 dll 不应该在从图表中删除 EA 时结束？会不会是这样设计的？如果是这样，我猜我可以手动将标志设置为 false。

但这是否意味着如果我再次将 EA 添加到图表中，将会有另一个 dll 实例？

如果有人有明确的答案，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:34:19.663

MQL4 中使用的 DLL 公开了可以扩展 MT4 提供的功能的函数。根据我对 DLL 的了解，它们不提供数据保留。例如，在您的情况下，当您在 MT4 代码中调用 DLL 的函数时，数据会在该调用期间保留。当您重新启动 EA 时，数据消失了，一切都恢复为默认值。

希望这可以帮助。

# macos - 使用 sparkle 更新（可悲的是已经分发的）沙盒 OSX 应用程序

> ID：15170417
> 
> 赞同：7
> 
> 时间：2013-03-02T03:38:54.920
> 
> 标签：macos, sandbox, sparkle

在一阵非思考的热情中，我对我的应用程序进行了沙盒化然后更新。由于该应用程序仅具有对用户选择的文件（和音乐目录）的读/写访问权限，因此我现在无法更新自己的二进制文件。哎呀。

在过去一年左右的时间里，这与 Andy Matuschak 进行了广泛的辩论（[https://github.com/sparkle-project/Sparkle/pull/165](https://github.com/sparkle-project/Sparkle/pull/165)），但是虽然提出的解决方案“几乎足够好”，但没有任何启示关于已经分发了非沙盒应用程序的问题。

哦，看来我一直在使用闪光分布的“磁盘映像”方法可能是相关的。

我能想到的唯一解决方案是发布一个闪光更新，它*只是*向用户显示一条消息，告诉他们手动下载。有没有人有更好的想法？

-戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-14T15:54:12.713

Andy Matuschak 似乎表明 Sparkle 实际上可以为您优雅地处理“仅下载”。用他自己的话说，只需将`<enclosure>`您的元素排除在外，`<item>`然后添加一个`<sparkle:version>2.0</sparkle:version>`元素作为`<item>`.

在这里阅读他的评论：[https ://github.com/sparkle-project/Sparkle/issues/227#issuecomment-13192723](https://github.com/sparkle-project/Sparkle/issues/227#issuecomment-13192723)

就像他之前的费马一样，他遗漏了一条信息。但与定理不同的是，我们可以访问 Sparkle 源代码，尤其是`SUAppcastItem.m`. 感谢代码，我发现丢失的部分是一个`<link>`标签。这是一个示例应用广播：

```
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:sparkle="http://www.andymatuschak.org/xml-namespaces/sparkle"  xmlns:dc="http://purl.org/dc/elements/1.1/">
   <channel>
      <title>FooBar</title>
      <link>http://foobar.com/appcast.xml</link>
      <description>Most recent changes with links to updates.</description>
      <language>en</language>
        <item>
            <title>FooBar 2.0</title>
            <sparkle:releaseNotesLink>http://foobar.com/release-notes-special.html</sparkle:releaseNotesLink>
            <sparkle:minimumSystemVersion>10.9.0</sparkle:minimumSystemVersion>
            <pubDate>2014-04-14T18:40:44+02:00</pubDate>
            <sparkle:version>2013</sparkle:version>
            <sparkle:shortVersionString>2.0</sparkle:shortVersionString>
            <link>http://foobar.com/release-notes-special.html</link>
        </item>
   </channel>
</rss> 
```

在接收该应用广播且无法更新的沙盒应用中，“安装更新”已消失，取而代之的是一个“了解更多”按钮，该按钮会将用户带到该`<link>`. 这是获得下载说明的好地方。

在您的应用程序的下一个版本中，您可以为 appcast 使用不同的 URL，以便上述 appcast 仅适用于旧版本（假设您修复了一些问题，现在使用 Sparkle 的非官方 XPC 技巧）。

# html - Img Src 正确，但仍无法在 index.php 中工作

> ID：15170419
> 
> 赞同：0
> 
> 时间：2013-03-02T03:39:29.070
> 
> 标签：html, wordpress, image, src

我相信我已经为我正在开发的（超级基本）wordpress 主题正确地获取了 html 中的图像；但是它仍然没有显示。

此对话： [本地计算机上的 Img Src](https://stackoverflow.com/questions/15102122/img-src-on-local-computer) 显示了到目前为止的过程（因此我确信 html 是正确的。）

index.php 的主体：

```
<?php
    $main_menu_column_top = array(
        'theme_location' => 'main-nav-column-top',
        'container' => 'nav',
        'container_class' => 'alignleft widecol',
        'container_id' => 'column-main-nav',
        'depth' => 1
    );
?>

<div class="leftcolumn">
    <div class="logo">
        <a href="http://www.petermaurin.com">
        <img src="images/pmsplogo.jpg" alt="Peter Maurin Screenprinters"/></a>
    </div><!--logo-->

    <div>
        <ul>
            <h1><?php wp_nav_menu ( $main_menu_column_top ); ?></h1>
        </ul>
    </div>
</div>

<div class="maincontent">

    <?php 
        if (have_posts()) :
            while (have_posts()) :
                the_post();
                the_title();
                the_content();
            endwhile;
        endif;
    ?>

    </div><!-- maincontent --> 
```

函数.php：

```
<?php
register_nav_menus(
        array(
        'main-nav-column-top' => 'Main Nav, Top of Header',
        'sub-nav-column-bottom' => 'Sub Nav, Bottom of Header',
        'footer-nav' => 'Footer Menu'
    )
); 
```

CSS：

```
* {
margin: 0;
padding: 0;
}

p {
font-family: Times New Roman;
}

body {
    font-size: 100%;
    font-family: sans-serif;
    background: url(images/tshirttexture.jpg) left repeat-y #0099ff;
}

.leftcolumn{
    width:365px;    
    float:left;
}

.maincontent{
    background-color:green;
    margin-left: 375px;
    max-width: 600px;
} 
```

...如果有人可以看一下并告诉我为什么我的图片（index.php 第 26 行上的“pmsplogo.jpg”）没有显示，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T03:45:59.723

在 img 元素中，sr​​c 属性应如下所示

```
<?php bloginfo( 'template_url' );?>/images/pmsplogo.jpg 
```

所以基本上完​​整的图片网址将是：

```
<img src="<?php bloginfo( 'template_url' );?>/images/pmsplogo.jpg" alt="Peter Maurin Screenprinters"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T04:17:52.260

```
<img src="<?php echo 'dirname(__FILE__)'.'/images/pmsplogo.jpg'?>" /> 
```

不要在 PHP 中写上“ [http://www.yoursitename.com/](http://www.yoursitename.com/) ”，他们找不到源代码。

# android - styles.xml 和 theme.xml 有什么区别

> ID：15170421
> 
> 赞同：68
> 
> 时间：2013-03-02T03:40:23.550
> 
> 标签：android, android-theme, android-styles

`styles.xml`我可以知道和有什么区别`themes.xml`吗？对我来说，它们只是看起来相同，因为两个 XML 格式相同。

```
<style name="...
    <item name="... 
```

那么，在我提供自定义颜色、大小、可绘制的应用程序中……我是否也需要`styles.xml`两者`themes.xml`？我应该如何决定将哪个 XML 放入哪个文件？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-03-02T03:45:55.717

出了整页的[Styles 和 Themes](http://developer.android.com/guide/topics/ui/themes.html#ApplyingStyles)。您可能正在寻找这条线。

> 当您将样式应用于布局中的单个视图时，样式定义的属性仅应用于该视图。如果将样式应用于 ViewGroup，子 View 元素将不会继承样式属性——只有您直接应用该样式的元素才会应用其属性。但是，您可以通过将样式应用为主题来应用样式，使其适用于所有 View 元素。

当您应用为主题时，它会更改范围内的所有内容，具体取决于您将其应用于 Activity 还是 Application。风格更“本地化”。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-11-06T09:16:43.727

引用自 Android API 指南：

> 要创建一组样式，请将 XML 文件保存在`res/values/`项目目录中。XML 文件的名称是任意的，但必须使用`.xml`扩展名并保存在`res/values/`文件夹中。XML 文件的根节点必须是`<resources>`.

[完整的文档](http://developer.android.com/guide/topics/ui/themes.html)

所以我想如果你把任何样式放在任何文件中并不重要，只要它是一个位于`res/values/`文件夹中的 xml 文件。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-11-21T19:30:12.423

正如许多答案所表明的那样，styles.xml 和 theme.xml 之间没有功能差异。

值得注意的是，Google 的 iosched2014 应用程序只有一个 styles.xml（没有 theme.xml）。

[https://github.com/google/iosched](https://github.com/google/iosched)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-18T16:36:25.283

取自[样式和主题](http://developer.android.com/guide/topics/ui/themes.html)文档，在定义样式部分：

> 要创建一组样式，请将 XML 文件保存在项目的 res/values/ 目录中。XML 文件的名称是任意的，但必须使用 .xml 扩展名并保存在 res/values/ 文件夹中。
> 
> ```
> The root node of the XML file must be <resources>. 
> ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-18T23:23:59.943

我只是意识到，例如工具栏文本颜色进入主题声明，而其他方面进入样式声明

```
<style name="ToolbarTheme" parent="ThemeOverlay.AppCompat.Light">
    <item name="android:textColorPrimary">@android:color/white</item>
    <item name="android:textColorSecondary">@android:color/white</item>
</style>

<style name="ToolbarStyle" parent="Base.Widget.AppCompat.Toolbar">
    <item name="android:minHeight">?attr/actionBarSize</item>
    <item name="android:background">@color/colorPrimary</item>
</style> 
```

并在工具栏声明中

```
<android.support.v7.widget.Toolbar
    android:id="@+id/toolbar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    style="@style/ToolbarStyle"
    android:theme="@style/ToolbarTheme">
</android.support.v7.widget.Toolbar> 
```

我试图通过将其项目移动到样式中来省略主题，但这没有用。因此，在这种情况下，它们似乎只是作为主题的样式，因为它们会影响工具栏中的继承子项，例如文本字段。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2013-03-02T03:54:14.367

嗨，这是一篇关于 android 中样式和主题 XML 之间区别的文章，**[请通过](http://brainflush.wordpress.com/2009/03/15/understanding-android-themes-and-styles/)**

还有关于 Android 中的样式和主题的 android**[文档。](http://developer.android.com/guide/topics/ui/themes.html)**

# google-maps-api-3 - Rails 视图中不显眼的 Google Maps API Javascript

> ID：15170423
> 
> 赞同：1
> 
> 时间：2013-03-02T03:41:02.300
> 
> 标签：google-maps-api-3, ruby-on-rails-3.2, coffeescript, unobtrusive-javascript

我的 app/views/people/show.html.erb 中有这个 javascript 代码。它使用谷歌地图 api v3。但问题是，这非常突兀。我想要的是我希望 js 代码在咖啡脚本中。而且我应该仍然能够传递经度/纬度值以在地图中反映它们。

```
<% unless @person.addresses.blank? %>
  <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
  <script type="text/javascript">
    function initialize() {

      <%
        if @person.addresses.first.latitude.blank? && @person.addresses.first.longitude.blank?
          lat_long = @person.organization.latitude_longitude
        else
          address = @person.addresses.first
          lat_long = [address.latitude, address.longitude] 
        end

        lat = lat_long[0]
        long = lat_long[1]
      %>

      var myLatlng = new google.maps.LatLng(<%= lat %>, <%= long %>);
      var mapOptions = {
        zoom: 17,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      }
      var map = new google.maps.Map(document.getElementById('map_canvas_show'), mapOptions);

      var marker = new google.maps.Marker({
          position: myLatlng,
          map: map,
          title: 'Hello World!'
      });
    }
  google.maps.event.addDomListener(window, 'load', initialize);
  </script>

  <div id="map_canvas_show"></div>

<% end %>

<h1>
  <%= @person.name %> <small><%= link_to(t('general.edit'), edit_person_path(@person)) %></small>
</h1>

<h3>
  <%= @person.organization_names(current_organization) %>
</h3>

<div>
  <%#= image_tag @person.fb_profile_pic_large %>
</div>

<div class="sfield field_group">
  <div class="ls"><%= t('.addresses')%></div>
  <% @person.addresses.each do |address| %>
    <div class="rs"><%= address.address %></div>
  <% end %>
</div>

<div class="sfield field_group">
  <div class="ls"><%= t('.phone_numbers')%></div>
  <% @person.phone_numbers.each do |phone_number| %>
    <div class="rs field_group"><%= phone_number.phone_number %></div>
  <% end %>
</div>

<div class="sfield field_group">
  <div class="ls"><%= t('.offices')%></div>
  <% @person.office_names.each do |office_name| %>
    <div class="rs"><%= office_name %></div>
  <% end %>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-02T16:32:02.293

您可以为此使用[HTML5 data-* 属性](http://www.w3.org/TR/2010/WD-html5-20101019/elements.html#embedding-custom-non-visible-data-with-the-data-attributes)。另请参阅 rails 指南的[ujs 部分](http://edgeguides.rubyonrails.org/working_with_javascript_in_rails.html#unobtrusive-javascript)。

```
<div id="map_canvas_show" data-lat="<%= lat %>" 
                          data-long="<%= long %>" /> 
```

然后在jQuery中你可以使用类似的东西来获取坐标：

```
var map_canvas = $('#map_canvas_show'); 
var lat = map_canvas.data('lat');
var lng = map_canvas.data('long');
var myLatlng = new google.maps.LatLng(lat, lng); 
```

# java - Java - 如何验证用户名和密码

> ID：15170428
> 
> 赞同：0
> 
> 时间：2013-03-02T03:41:47.117
> 
> 标签：java, jakarta-mail

如何验证电子邮件（Yahoo、Gmail、Hotmail 和 AOL）的用户名和密码？应该把 cide 到 auth 电子邮件放在哪里？

这是我的代码

```
public class AuthMail
{
    public static void authEmail()
    {
        if(LoginDialog.t_Email.getText().isEmpty())
        {
            Util.printErrorMessage("Plase Enter an Email Address");
            JOptionPane.showMessageDialog(null, "Plase Enter an Email Address", "Error", JOptionPane.ERROR_MESSAGE);
        }
        else if(LoginDialog.p_Password.getText().isEmpty())
        {
            System.out.println("Plase Enter Your Password");
            JOptionPane.showMessageDialog(null, "Plase Enter Your Password", "Error", JOptionPane.ERROR_MESSAGE);
        }
        else if(Util.getMailType().equals("GMail"))
        {
            System.out.println("Logging...");
            System.out.println("Attempting connection to GMail...");
        }
        else if(Util.getMailType().equals("Yahoo"))
        {
           System.out.println("Logging...");
            System.out.println("Attempting connection to Yahoo...");
        }
        else if(Util.getMailType().equals("Yahoo"))
        {
            System.out.println("Logging...");
            System.out.println("Attempting connection to Hotmail...");
        }
        else if(Util.getMailType().equals("AOL"))
        {
            System.out.println("Logging...");
            System.out.println("Attempting connection to Aol...");
        }
        else if(Util.getMailType().equals("Unknown"))
        {
            System.out.println("Mail Type Unknown");
            int var1 = JOptionPane.showConfirmDialog(null, "Email Type Unknown. Did you want to try again?", "Error", JOptionPane.YES_NO_OPTION);
            if(var1 == JOptionPane.NO_OPTION)
            {
                System.exit(0);
            }
        }
    } 
```

}

注意：Util.class 是我自己创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:28:41.930

使用采用主机、用户和密码的 Store.connect 方法。您正在收集用户名和密码。“if”的每个分支中的主机名都会不同。您可以在[JavaMail FAQ](http://www.oracle.com/technetwork/java/javamail/faq/index.html#gmail)中找到常用服务的主机名。

# php - 使用 PHP 和 NestedSortable 创建列表

> ID：15170429
> 
> 赞同：3
> 
> 时间：2013-03-02T03:41:54.450
> 
> 标签：php, jquery, mysql, nested-sortable

我正在尝试制作自己的 CMS，而我想做的一件事就是制作它，这样我就可以重新排序和更改 CMS 中的导航元素。我找到了一个名为[NestedSortable](http://mjsarfatti.com/sandbox/nestedSortable/)的插件，它可以让我做到这一点。我使用它并且遇到了很多麻烦，所以我让我的 PHP 专家朋友帮我做。她坐下来，挣扎了一会儿，然后开始工作。

好吧，我是个白痴，那天晚些时候我回到家时坐下来，拿了我的本地副本，添加了一些内容并将其上传到服务器......没有意识到我忘记下载更新的版本！所以噗，我朋友的所有工作都消失了，我被一个不起作用的导航调整困住了。

我丢失了 index.php（将其显示在页面上）文件，但我保存了 nav_adjust.php（将其输入数据库）。我想要的只是能够重新排序导航并将其发送到数据库以便在刷新时正确显示。按下提交按钮时，信息将发送到 nav_adjust.php。

唯一的限制是导航只能有 3 个级别（主要、子和孙）。我的导航看起来就像它们都是主要的。我已经提醒了所有图像的回声，所以你可以看到 nav_adust.php 正在做什么：

（请注意数组值。）

![所有的父母，没有孩子](../Images/847c5d92e97bcc3d9daf917758b0f8e1.png)

这就好像父母有一个孩子：

![1 个孩子的父母](../Images/a1a1df5361a2f055590a25df45625df4.png)

这就好像一个孩子有两个孙子：

![一个孩子的两个孙子](../Images/2ff3a0037239b3a4e9f6b6a37448a39e.png)

这是混合的：

![子女、孙子女等的混血家庭](../Images/2f7c6a3aa5b8ef0880f1fb5311bb1ef2.png)

我的 index.php 文件不再起作用，如下所示：

```
<form method="post" action="nav_adjust.php"> <!--This form posts to nav_adjust.php-->
    <ol id="pageList">
    <?php 
    $nav = mysql_query("SELECT * FROM `".$name['Website']);
    $num = 0;
    while( $col_nav = mysql_fetch_assoc($nav) ){
        if ($col_nav['orderId'] != 0) {
            echo "<li id='list_".$col_nav['id']."'>
            <div>Example Title</div>";  
        } else {
            echo "<ol>
                <li id='list_".$col_nav['id']."'>
                    <div><h1>Example Title</div>";
                </li>
            </ol>\n";
        }
        echo "</li>\n";
        ++$num;
    }
    ?>
    </ol>
    <button type='submit'>Update</button>
    </form>

<script>

$(document).ready(function(){

    $('#pageList').nestedSortable({
            /*option that don't matter*/
            });

    $("button").on('click', function(event){
        serialized = $('ol#pageList').nestedSortable('serialize');
          $.post( "nav_adjust.php", serialized, function( data ) {
            alert( data );
            });
        return false;
    });

});

 </script> 
```

同样，上面的代码不起作用。而不是使列表项看起来像这样：

```
<ol>
<li>
    <ol>
    <li></li>
    ...
    </ol>
 </li>
 ...
 </ol> 
```

它使它看起来像这样（注意 ol 之前的封闭 li 标签）：

```
<ol>
<li></li>
<ol>
    <li></li>
</ol>
...
</ol> 
```

这是我的朋友为我做的 nav_adjust.php，如果从 index.php 给出正确的信息，它会很好地工作

```
$list = $_POST['list'];
$num = 1;
foreach ($list as $key => $value ) {
    if ($value == "null") {
        //$value = $num;
        mysql_query("UPDATE `myTable` SET orderId=".$num.", parent='null' WHERE id=".$key."");
        $text .= "UPDATE `myTable` SET orderId=".$num.", parent='null' WHERE id=".$key."\n\n";
    } else {
                $query = "UPDATE `myTable` SET orderId=". $num .", parent=".$value;
                $text .= "UPDATE `myTable` SET orderId=". $num .", parent=".$value."\n\n";
                $var = $list[$value];
                if ( $var != null && $list[$var] != null ) {
                    $query .= ", grandchild = 1";
                }
                $query .= " WHERE id=".$key; 
        mysql_query($query);
    }
    $num++;
}

echo "Content is below\n";
print_r( $_POST['list']);
echo $text; 
```

所以，作为回顾，我有一个导航，将序列化数据从 index.php 提交到 nav_adjust.php，然后将其提交到数据库中（并将其回显，以便我知道我做了什么）。然后 index.php 在刷新时应将列表项保留在适当的位置，所有子项都是子项等。但是我覆盖了 index.php 并且不知道我的朋友是怎么做到的。

我的表格字段是（在我忘记之前）：

id、title、orderId（父）、父（子）和孙子。

我的意思是更改 orderId 和 parent 的名称以使其不那么混乱，但我从来没有这样做过:(

如果有人可以帮助我，我将非常感激。

如果还有其他信息可以给你，请追问！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:48:10.723

经过几个小时的挣扎，我有了一个天才的想法，询问 GoDaddy 是否备份了文件和目录，他们做到了！所以我拿回了我的文件。对于任何感兴趣的人，index.php 上缺少的代码看起来像这样（其中 $name['website'] 是 'myTable'）：

```
$parents = mysql_query("SELECT * FROM `".$name['Website']."` WHERE parent = 0 ORDER BY `orderId` ASC");

    while($parent = mysql_fetch_array($parents)){            
        echo "<li id='list_".$parent['id']."'>
        <div>
            <span class='disclose'>
                <span></span>
            </span>
            <span class='title'>
                <a href='mod.php?id=".$parent['id']."'>".stripslashes($parent['page'])."</a>
            </span>
        </div>";    

        // Get chil elements

        $children = mysql_query("SELECT * FROM `".$name['Website']."` WHERE parent = " . $parent['id'] . " ORDER BY `orderId` ASC") or die(mysql_error());
        while($child = mysql_fetch_array($children)){
            echo "<ol>
            <li id='list_".$child['id']."'>
                <div>
                    <span class='disclose'>
                        <span></span>
                    </span>
                    <span class='title'>
                        <a href='mod.php?id=".$child['id']."'>".stripslashes($child['page'])."</a>
                    </span>
                </div>";
            # Get grandchild elements
            # (Please consider making an recursive function or so out of this if you plan to have grand grand children etc.,
            # Because if you create new whiles manually for every instance, this is gonna look pretty darn ugly.
            # Also, it makes it impossible to have an unknown depth.)           
            $grandchildren = mysql_query("SELECT * FROM `".$name['Website']."` WHERE parent = " . $child['id'] . " AND grandchild = 1 ORDER BY `orderId` ASC");             
            while($grandchild = mysql_fetch_array($grandchildren)){
                echo "<ol>
                    <li id='list_".$grandchild['id']."'>
                        <div>
                            <span class='disclose'>
                                <span></span>
                            </span>
                            <span class='title'>
                                <a href='mod.php?id=".$grandchild['id']."'>".stripslashes($grandchild['page'])."</a>
                            </span>
                        </div>
                    </li>
                </ol>\n";               
            }

            // Close child
            echo "</li>
            </ol>\n";
        }
        // Close parent
        echo "</li>\n";
    }
    ?> 
```

# phpunit - PHPUnit 在 PHPStorm 中不起作用

> ID：15170430
> 
> 赞同：7
> 
> 时间：2013-03-02T03:42:04.893
> 
> 标签：phpunit, phpstorm

我有以下测试文件，这是 PHPUnit 网站上的一个示例。

```
<?php

require_once 'PHPUnit/Autoload.php';

class StackTest extends PHPUnit_Framework_TestCase
{
    public function testPushAndPop()
    {
        $stack = array();
        $this->assertEquals(0, count($stack));

        array_push($stack, 'foo');
        $this->assertEquals('foo', $stack[count($stack)-1]);
        $this->assertEquals(1, count($stack));

        $this->assertEquals('foo', array_pop($stack));
        $this->assertEquals(0, count($stack));
    }
}
?> 
```

我正在尝试在 PHPStorm 5.0 中运行它，但出现以下错误：

```
E:\wamp\bin\php\php5.3.13\php.exe C:\Users\<user>\AppData\Local\Temp\ide-phpunit.php --no-configuration StackTest E:\wamp\www\renting\tests\StackTest.php
Testing started at 03:37 ...

SCREAM:  Error suppression ignored for
Warning: require_once(PHPUnit/Runner/Version.php): failed to open stream: No such file or directory in C:\Users\<user>\AppData\Local\Temp\ide-phpunit.php on line 166 
```

当我将包含路径设置为 E: 时，任何想法为什么要去 C: ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T02:16:39.867

解决了！

似乎某些依赖项存在问题，特别是 pear.symfony.com/Yaml。

通过这样做解决了它：

```
pear channel-discover pear.symfony.com
pear install pear.symfony.com/Yaml
pear channel-discover pear.phpunit.de
pear install --alldeps pear.phpunit.de/PHPUnit 
```

解决方案的想法来自：[如何正确安装 PHPUnit 和 PEAR？](https://stackoverflow.com/questions/12536668/how-do-i-correctly-install-phpunit-with-pear)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-05T21:20:07.347

我在一个类似的问题上苦苦挣扎了很长一段时间，结果证明这是一个配股问题。

这是我的解决方案：[https ://stackoverflow.com/a/22886926/1311443](https://stackoverflow.com/a/22886926/1311443)

希望它可以帮助其他人更快地解决类似的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-17T13:13:38.407

我的问题很相似 - 但我通过指向测试中的引导文件解决了这个问题。然后，一切正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-08T11:30:24.087

这是 JetBrains 可怕的黑客攻击的正确解决方案等等。

[https://stackoverflow.com/a/30122730/4878737](https://stackoverflow.com/a/30122730/4878737)

# php - scraperwiki：为什么我的刮刀适用于 1 个 url 而不是另一个？

> ID：15170431
> 
> 赞同：0
> 
> 时间：2013-03-02T03:42:08.617
> 
> 标签：php, screen-scraping, scraperwiki

这是我的第一个刮刀[https://scraperwiki.com/scrapers/my_first_scraper_1/](https://scraperwiki.com/scrapers/my_first_scraper_1/)

我设法刮掉了 google.com，但没有刮掉这个页面。

[http://subeta.net/pet_extra.php?act=read&petid=1014561](http://subeta.net/pet_extra.php?act=read&petid=1014561)

有什么理由吗？

我已按照此处的文档进行操作。

[https://scraperwiki.com/docs/php/php_intro_tutorial/](https://scraperwiki.com/docs/php/php_intro_tutorial/)

代码没有理由不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:15:51.753

看起来您正在指定查找特定元素。元素的变化取决于您正在抓取的网站。因此，如果它没有找到您正在寻找的元素，您将无法获得回报。另外我会考虑用 curl 创建你自己的抓取/爬取工具。您不仅会学到很多东西，而且会发现很多关于如何抓取网站的信息。

另外一方面，您可能不想考虑遵守您正在抓取的网站上的 robots.txt 文件，或者在抓取之前征求许可，因为这被认为是不礼貌的。

# java - 对 Web 服务的 Java 调用不更新布尔属性

> ID：15170433
> 
> 赞同：1
> 
> 时间：2013-03-02T03:42:25.913
> 
> 标签：java, web-services, swing, jaxb

场景：我正在开发一个 Swing 应用程序，它连接到由 .NET (WCF) 创建的 Web 服务。有一些问题，但现在大部分都解决了。但是，我似乎无法更新布尔属性。在我的实体中，我有一个布尔属性`Gender`：

真 = 男性，

错误 = 女性，

空 = 未知/未指定。

**代码：**

```
updatedEntry.setGender(factory.createBoolean(true)); 
```

这里，`factory`只是`ObjectFactory`为我生成的类的一个实例`Netbeans`。`updatedEntry`是类型`JAXBElement<Boolean>`，我可以看到该值确实设置为 True。更新方法运行良好，没有任何错误，但我看到数据库具有`NULL`该列。这很奇怪，因为其他列更新得很好。

只是为了确保我的 Web 服务没有问题，我使用了**SoapUI**并手动输入了参数。它运行良好。我注意到的一件事是我无法使用 string `True`，但必须输入 a`1`才能使其工作。这让我想知道；我的项目中的`JAXBElement`或其他生成的代码是否`Netbeans`发送值`true`而不是`1`？但是，如果是这样的话，为什么**SoapUI**在我尝试这样做时会抛出一个错误但`Netbeans`没有呢？就像我说的.. from ，**除**性别`Netbeans`外，所有属性都已更新。

 **有什么方法可以查看 Netbeans 生成的 Soap XML 吗？或者有没有人有任何想法......，以前见过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:29:35.123

下面是一个有帮助的例子。

**XML 架构 - schema.xsd**

`JAXBElement<Boolean>`当您有一个既是`nillable="true"`和的元素时，您将获得一个类型的属性`minOccurs="0"`。

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema" 
    targetNamespace="http://www.example.org/schema"
    xmlns:tns="http://www.example.org/schema" 
    elementFormDefault="qualified">

    <element name="root">
        <complexType>
            <sequence>
                <element name="trueValue" type="boolean" minOccurs="0" nillable="true"/>
                <element name="falseValue" type="boolean" minOccurs="0" nillable="true"/>
                <element name="nullValue" type="boolean" minOccurs="0" nillable="true"/>
                <element name="notSetValue" type="boolean" minOccurs="0" nillable="true"/>
            </sequence>
        </complexType>
    </element>

</schema> 
```

**生成的模型 - 根**

下面是从`root`elemnent 生成的类的样子：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {"trueValue", "falseValue", "nullValue", "notSetValue"})
@XmlRootElement(name = "root")
public class Root {

    @XmlElementRef(name = "trueValue", namespace = "http://www.example.org/schema", type = JAXBElement.class, required = false)
    protected JAXBElement<Boolean> trueValue;
    @XmlElementRef(name = "falseValue", namespace = "http://www.example.org/schema", type = JAXBElement.class, required = false)
    protected JAXBElement<Boolean> falseValue;
    @XmlElementRef(name = "nullValue", namespace = "http://www.example.org/schema", type = JAXBElement.class, required = false)
    protected JAXBElement<Boolean> nullValue;
    @XmlElementRef(name = "notSetValue", namespace = "http://www.example.org/schema", type = JAXBElement.class, required = false)
    protected JAXBElement<Boolean> notSetValue;

} 
```

**生成的模型 - ObjectFactory**

```
@XmlRegistry
public class ObjectFactory {

    private final static QName _RootNullValue_QNAME = new QName("http://www.example.org/schema", "nullValue");
    private final static QName _RootTrueValue_QNAME = new QName("http://www.example.org/schema", "trueValue");
    private final static QName _RootFalseValue_QNAME = new QName("http://www.example.org/schema", "falseValue");
    private final static QName _RootNotSetValue_QNAME = new QName("http://www.example.org/schema", "notSetValue");

    public ObjectFactory() {
    }

    public Root createRoot() {
        return new Root();
    }

    @XmlElementDecl(namespace = "http://www.example.org/schema", name = "nullValue", scope = Root.class)
    public JAXBElement<Boolean> createRootNullValue(Boolean value) {
        return new JAXBElement<Boolean>(_RootNullValue_QNAME, Boolean.class, Root.class, value);
    }

    @XmlElementDecl(namespace = "http://www.example.org/schema", name = "trueValue", scope = Root.class)
    public JAXBElement<Boolean> createRootTrueValue(Boolean value) {
        return new JAXBElement<Boolean>(_RootTrueValue_QNAME, Boolean.class, Root.class, value);
    }

    @XmlElementDecl(namespace = "http://www.example.org/schema", name = "falseValue", scope = Root.class)
    public JAXBElement<Boolean> createRootFalseValue(Boolean value) {
        return new JAXBElement<Boolean>(_RootFalseValue_QNAME, Boolean.class, Root.class, value);
    }

    @XmlElementDecl(namespace = "http://www.example.org/schema", name = "notSetValue", scope = Root.class)
    public JAXBElement<Boolean> createRootNotSetValue(Boolean value) {
        return new JAXBElement<Boolean>(_RootNotSetValue_QNAME, Boolean.class, Root.class, value);
    }

} 
```

**演示**

下面是一些演示代码，它们将以`JAXBElement<Boolean>`不同方式填充每个属性，以演示 4 个可能选项中的每一个。

```
public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance("forum15170433");

        Root root = new Root();
        ObjectFactory objectFactory = new ObjectFactory();

        // set the value to true
        root.setTrueValue(objectFactory.createRootTrueValue(true));

        // set the value to false
        root.setFalseValue(objectFactory.createRootFalseValue(false));

        // set the value to null
        root.setNullValue(objectFactory.createRootNullValue(null));

        // specify the value is unset
        root.setNotSetValue(null);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**输出**

下面是运行演示代码的输出。我们看到`xsi:nil`属性是用来表示`null`值的，未设置的值没有被编组。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root xmlns="http://www.example.org/schema">
    <trueValue>true</trueValue>
    <falseValue>false</falseValue>
    <nullValue xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
</root> 
```**

# asp.net - 无法将 DataKeyNames 添加到网格视图中

> ID：15170434
> 
> 赞同：0
> 
> 时间：2013-03-02T03:42:39.867
> 
> 标签：asp.net, mysql, vb.net

我最初在检测网格视图中的复选框状态时遇到问题。

显然，该问题的解决方案之一是将 DataKeyNames 值添加到网格视图。但是，如果我将 DataKey 值添加到我的网格视图中，则在我运行代码时它不会被填充。

有人可以指出我的错误吗？

这是可以填充的网格视图的原始头部：

```
<asp:GridView ID="GridView1" runat="server"  CellPadding="4" ForeColor="#333333" 
    GridLines="None" Width="1500px"> 
```

这是我添加 DataKeyNames 后的代码：

```
<asp:GridView ID="GridView1" runat="server"  CellPadding="4" ForeColor="#333333" 
    GridLines="None" Width="1500px" DataKeyNames="account_id"> 
```

这是填充gridView的后端代码

```
Dim StrQwery As String = "SELECT account_id, account_name bla bla bla"       
    Dim smd As MySqlCommand
    smd = New MySqlCommand(StrQwery, myconn)
    smd.CommandType = CommandType.Text

    Dim da As New MySqlDataAdapter(smd)
    Dim cb As New MySqlCommandBuilder(da)
    Dim ds As New DataSet()
    da.Fill(ds)

    GridView1.DataSource = ds.Tables(0)
    GridView1.DataBind() 
```

添加 DatakeyNames 后，我无法理解为什么在网格视图中未填充值

Grid View 的完整代码

```
 <asp:GridView ID="GridView1" runat="server"  CellPadding="4" ForeColor="#333333" 
        GridLines="None" Width="1500px"  >
        <Columns>

                    <asp:TemplateField >
                        <ItemTemplate>
                            <asp:CheckBox ID="CheckBox1" runat="server" textAlign="right" 
                             /> 
                        </ItemTemplate>

                    </asp:TemplateField>

          </Columns>
        <AlternatingRowStyle BackColor="White" />
        <EditRowStyle BackColor="#2461BF" />
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#EFF3FB" />
        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#F5F7FB" />
        <SortedAscendingHeaderStyle BackColor="#6D95E1" />
        <SortedDescendingCellStyle BackColor="#E9EBEF" />
        <SortedDescendingHeaderStyle BackColor="#4870BE" />
    </asp:GridView> 
```

# performance - 递归伪代码的时间复杂度

> ID：15170436
> 
> 赞同：0
> 
> 时间：2013-03-02T03:43:19.117
> 
> 标签：performance, algorithm, time-complexity

伪代码的时间复杂度函数是多少？

```
int what(int k){
   if(k==0 || k==1) 
      return k;
   else 
      return what(k-1)*what(k-2);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T04:58:33.820

虽然随着 k 的增加，调用次数在黄金比例下（渐近地）增加，但它不是斐波那契数列。从 0 开始对 n 的 what() 调用次数为：1、1、3、5、9、15。同样，函数 what(k) 为 k：-> Fib(k)。

这一切都澄清了，复杂性仍然是 O(Fib(n))，如前所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:20:21.333

我认为这段代码的时间复杂度是**O(n!)**，因为调用次数乘以每个**k**增量（这是非常非常糟糕的）。

（笑话）但我有好消息！这段代码可以简化为**O(1)**，因为它总是返回 0！

```
int what(int k) { return 0; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T03:55:06.190

该函数不计算斐波那契数列，但调用次数是斐波那契数列。

由于该函数在内部不做任何工作，因此时间复杂度与调用次数相同。

所以它是`O(fib N)`。

# ms-access - MS Access - 失焦计算

> ID：15170438
> 
> 赞同：0
> 
> 时间：2013-03-02T03:43:40.007
> 
> 标签：ms-access, minute

我正在研究 MS Access 数据库并在 access 中创建一个表单。

我有一个字段 total_hrs。在这里我需要帮助。

我只想填写分钟，它应该转换为小时。

为此，我正在使用 onlost focus total_hrs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T04:15:27.243

您可以使用`ABS(imin/60)`计算小时数，其中 imin 是 int。

```
sub Calc

Dim iHrs as int
dim iMin as int

iHrs = ABS(iMin/60)

End sub 
```

您可以将此代码放在 onlost fouce even 或 even after

不看表单或代码很难提供帮助。

# c - 每次调用 stdio 函数都会导致系统调用吗？

> ID：15170441
> 
> 赞同：2
> 
> 时间：2013-03-02T03:44:13.597
> 
> 标签：c, linux

例如`puts()`调用系统调用`write()`。这是否意味着它`write()`每次调用时都会调用`puts()`，还是在调用之前将 puts 累积到某个缓冲区中`write()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T04:07:14.293

stdio 函数确实利用了缓冲。在特定情况下`puts()`，它总是将完整的行写入`stdout`，如果`stdout`连接到终端，则通常会被行缓冲，因此每次调用`puts()`都会导致调用`write()`。

但是，`stdout`可以完全缓冲 - 使用`setvbuf()`（只要在对 的任何其他操作之前完成`stdout`），或者更常见的是通过运行`stdout`附加到管道或文件的程序。在这种情况下，每次调用`puts()`都不一定会导致调用`write()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T03:54:44.413

你是对的——通常 C`FILE*`流确实有存储数据的缓冲区。只有当缓冲区已满、流关闭或被`fflush`调用时，它们才会进行 Unix I/O 系统调用。您可以使用 C 标准函数控制流的缓冲[`setvbuf`](http://pubs.opengroup.org/onlinepubs/009695299/functions/setvbuf.html)。

# iphone - 什么事件会重置 backgroundTimeRemaining？

> ID：15170442
> 
> 赞同：2
> 
> 时间：2013-03-02T03:44:21.640
> 
> 标签：iphone, ios, cocoa, cllocationmanager

在已注册使用位置服务在后台运行的应用程序的上下文中，哪些事件将导致 backgroundTimeRemaining 重置为其最大值，并且该重置会延长允许完成正在进行的任务的持续时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:55:55.163

根据我在模拟器和硬件上运行的实验，对于我在问题中定义的上下文，只要从位置库对 didUpdateLocations（或 IOS<6 的 didUpdateToLocation）进行内部调用，就会重置 backgroundTimeRemaining。

这就是所有用于在后台连续运行的方法都以一种或另一种方式利用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:07:40.203

你到底想做什么？看起来你想[在后台连续运行](https://stackoverflow.com/questions/3947785/to-run-app-continously-in-the-background)。

或者，也许您只是想在位置更新时运行一点代码？然后不要“欺骗系统”并在您的应用程序收到位置更改通知时运行该代码（并使用 运行它`beginBackgroundTaskWithExpirationHandler:`）。

# c# - ClickOnce 应用程序访问 Web 服务

> ID：15170445
> 
> 赞同：1
> 
> 时间：2013-03-02T03:44:44.143
> 
> 标签：c#, .net, clickonce

我有一个从 Web 安装的 ClickOnce 应用程序，配置为完全信任应用程序。应用程序从与安装 URL 不同的主机访问 Web 服务。

如果我理解[正确](http://msdn.microsoft.com/en-us/library/d8saf4wy(v=vs.100).aspx)，应用程序应该无法访问 Web 服务：

> Web 安装：只能访问安装应用程序的 Web 服务器。
> 
> 如果您的 ClickOnce 应用程序由于安全限制而无法访问 Web 服务器，则该应用程序必须为该网站声明 WebPermission。有关增加 ClickOnce 应用程序安全权限的更多信息，请参阅保护 ClickOnce 应用程序。

我已经能够在几台机器上安装该应用程序而没有任何问题。我误解了上面的陈述吗？还是因为其他原因（例如我的用户帐户在管理员组中或类似的原因）我没有遇到此限制？

此外，“为该网站声明 WebPermission”是什么意思。如果有安全限制，这是否允许我的应用程序绕过它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:55:25.933

我相信您引用的关于 ClickOnce 应用程序可以访问数据的位置的限制是指数据文件。下一节将介绍 XML Web 服务。

我有几个调用 WCF 服务以获取信息的 ClickOnce 应用程序。它们与 ClickOnce 部署在同一个域中，但不在同一台服务器上。

你到底想完成什么？

# ios - 在 iOS 中从模型向控制器发送通知

> ID：15170448
> 
> 赞同：0
> 
> 时间：2013-03-02T03:45:20.583
> 
> 标签：ios, objective-c, model-view-controller, notifications

我做了一个类，叫做 Timer。其指定的初始化程序启动一个计时器，其值以秒为单位。它工作得很好。但是，我无法更新控制器 w/e 计时器滴答声。

现在，对于每个滴答声，我都会发送一个带有 userInfo 的 NSNotificationCenter ，这是一个带有当前时间的简单字典，这听起来不是最好的方法......

```
NSDictionary *dict = [NSDictionary dictionaryWithObject:[NSNumber numberWithFloat:self.timerCount] forKey:@"timerCount"];
[[NSNotificationCenter defaultCenter] postNotificationName:@"TimerCountChanged"
                                                    object:self
                                                  userInfo:dict]; 
```

我应该使用其他技术还是以正确的方式使用？

先感谢您！

**编辑：** 我需要使用不同的值初始化不同的定时器。我尝试使用 Delegates，但我的控制器中只有一种方法可以更新所有计时器的 UI！如果我做类似的事情会很糟糕吗？将 UIButton 传递给我的模型似乎也不是最好的解决方案，但它确实有效。

```
-(void)timer:(Timer *)timer didTriggerAt:(NSTimeInterval)time andButton:(UIButton *)button
{
        [button setTitle:[NSString stringWithFormat:@"%.0f", time] forState:UIControlStateNormal];
}

- (IBAction)startCountDown:(UIButton *)sender
{    
    self.timer1 = [[Timer alloc] initWithTimeInSeconds:10 andButton:sender];
    self.timer1.delegate = self;
} 
```

我的 MainView 中有 3 个计时器，用户可以随时启动它们。它们也可以有不同的时间，这也是由用户定义的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T03:51:34.493

发送通知很好，但您可能不会像常规时间那样观察它。

有时它会延迟，您可能会在不规则的时间间隔内观察它们。

您可以使用

1.  委托模式。

2.  调用方法`selector`

编辑：

从

[Apple 关于通知性能代码速度的文档](https://developer.apple.com/library/mac/#documentation/Performance/Conceptual/CodeSpeed/Articles/Notifications.html)。

> 您发送的通知越少，对应用程序性能的影响就越小。根据实现，发送单个通知的成本可能非常高。例如，在 Core Foundation 和 Cocoa 通知的情况下，发布通知的代码必须等到所有观察者完成对通知的处理。如果有许多观察者，或者每个人都执行大量工作，则延迟可能会很大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T03:48:59.987

如果每个`Timer`实例只有一个客户端对象，那么您应该使用该`delegate`模式。您将定义一个`TimerDelegate`协议，其中包含一个`Timer`对象可以在计时器滴答时调用的方法。

例如

```
@class Timer;

@protocol TimerDelegate
- (void) timer:(Timer *)timer didTriggerAt:(NSTimeInterval)time;
@end

@interface Timer
...
@property (assign) id<TimerDelegate> delegate;
...
@end 
```

如果每次`Timer`实例滴答时确实需要多个侦听器，那么该`NSNotificationCenter`方法将更合适。`userInfo`我可能不会在字典中传递信息，而是公开一个`@property`on `Timer`called `currentTime`，这样当客户端对象收到通知时，他们可以简单地访问`currentTime`通知`Timer`，而不是（IMO 笨拙地）从`userInfo`.

# jquery - Keith Wood 的 Jquery SVG 插件：没有动画的变换？

> ID：15170449
> 
> 赞同：0
> 
> 时间：2013-03-02T03:45:23.343
> 
> 标签：jquery, svg, jquery-animate, transform, jquery-svg

使用 Keith Wood 的 SVG Jquery 插件，有没有办法在不使用动画功能的情况下移动/缩放/旋转路径？我想要一个即时的改变，我猜 animate 函数有不必要的开销。

我实际上在做的是创建一条路径，克隆它，然后旋转/移动它，然后重复。（例如，为时钟绘制多个刻度线）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:49:30.300

答案是在文档的动画部分下面盯着我看：

```
var myrect = svg.rect(25, 25, 150, '25%', 10, 10, 
    {
        fill: 'none', stroke: 'blue', strokeWidth: 3, 
        transform: 'rotate(0, 100, 75)'
    }
); 
```

# python - SQLAlchemy+pymysql 错误：sqlalchemy.util.queue.Empty

> ID：15170450
> 
> 赞同：2
> 
> 时间：2013-03-02T03:45:41.093
> 
> 标签：python, mysql, sqlalchemy, python-3.2

尝试使用 Eclispse 在 Ubuntu 上运行 Python3.2、SQLAlchemy0.8 和 MySQL5.2，但我不断收到以下错误。我正在使用 pymysql（实际上是 pymysql3）引擎。

**模块监视器**

```
from sqlalchemy import create_engine, MetaData
from sqlalchemy.ext.declarative import declarative_base
Engine = create_engine('mysql+pymysql://user:mypass@localhost/mydb')
Base = declarative_base(Engine)
Metadata = MetaData(bind=Engine)

from sqlalchemy.orm import sessionmaker
from sqlalchemy import Table, Column, Integer
Session = sessionmaker(bind=Engine)
session = Session()

class Student(Base):
    __table__ = Table('student_name', Metadata,
    Column('id', Integer, primary_key=True),
    autoload=True) 
```

这样，当我运行模块时，它会抛出如下所示的错误。我究竟做错了什么？

```
Traceback (most recent call last):
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/pool.py", line 757, in _do_get
return self._pool.get(wait, self._timeout)
 File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/util/queue.py", line 166, in get
raise Empty
sqlalchemy.util.queue.Empty

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
File "/home/lukik/workspace/upark/src/monitor.py", line 12, in <module>
class Parking(Base):
File "/home/lukik/workspace/upark/src/monitor.py", line 15, in Parking
autoload=True)
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/schema.py", line 333, in __new__
table._init(name, metadata, *args, **kw)
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/schema.py", line 397, in _init
self._autoload(metadata, autoload_with, include_columns)
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/schema.py", line 425, in _autoload
self, include_columns, exclude_columns
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/engine/base.py", line 1604, in run_callable
with self.contextual_connect() as conn:
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/engine/base.py", line 1671, in contextual_connect
self.pool.connect(),
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/pool.py", line 272, in connect
return _ConnectionFairy(self).checkout()
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/pool.py", line 425, in __init__
rec = self._connection_record = pool._do_get()
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/pool.py", line 777, in _do_get
con = self._create_connection()
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/pool.py", line 225, in _create_connection
return _ConnectionRecord(self)
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/pool.py", line 322, in __init__
exec_once(self.connection, self)
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/event.py", line 381, in exec_once
self(*args, **kw)
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/event.py", line 398, in __call__
fn(*args, **kw)
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/engine/strategies.py", line 168, in first_connect
dialect.initialize(c)
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/dialects/mysql/base.py", line 2052, in initialize
default.DefaultDialect.initialize(self, connection)
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/engine/default.py", line 172, in initialize
self._get_default_schema_name(connection)
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/dialects/mysql/base.py", line 2019, in _get_default_schema_name
return connection.execute('SELECT DATABASE()').scalar()
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/engine/base.py", line 664, in execute
params)
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/engine/base.py", line 808, in _execute_text
statement, parameters
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/engine/base.py", line 871, in _execute_context
context)
File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/engine/default.py", line 322, in do_execute
cursor.execute(statement, parameters)
File "/usr/local/lib/python3.2/dist-packages/pymysql/cursors.py", line 105, in execute
query = query % escaped_args
TypeError: unsupported operand type(s) for %: 'bytes' and 'tuple' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:12:27.483

`mysql-connector-python``oursql`在 py3k 下为我工作得很好。

# 如何安装？

```
$ pip install mysql-connector-python 
```

# 用法

```
Engine = create_engine('mysql+mysqlconnector://<USERNAME>:<PASSWD>@<HOSTNAME>:<PORT>/<DBNAME>') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:14:26.660

暂时留在 py2k 或其他数据库驱动程序上。这是一个已知的 SQLAlchemy 错误：[2663](http://www.sqlalchemy.org/trac/ticket/2663)。

# ajax - 为什么没有调用 JSONP 回调函数？

> ID：15170452
> 
> 赞同：1
> 
> 时间：2013-03-02T03:45:45.060
> 
> 标签：ajax, jquery, cross-domain, jsonp

我正在尝试使用 jsonp 在以下位置访问数据：

[https://github.com/users/jbranchaud/contributions_calendar_data](https://github.com/users/jbranchaud/contributions_calendar_data)

但是，我尝试过的解决方案都没有导致回调或成功函数被调用。当我使用 Chrome/Firefox 检查工具时，我可以查看脚本并看到响应为 200 Ok，并且响应文本包含来自上述 URL 的数据。然而，回调函数和成功函数在任何时候都不会被调用。关于如何让它发挥作用的任何想法？

这是我最近尝试让它运行：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript">
        function parseResults(results) {
            console.log('hello function callback.');
        }

        $.ajax({
            url: 'https://github.com/users/jbranchaud/contributions_calendar_data',
            type: 'post',
            dataType: 'jsonp',
            jsonp: true,
            jsonpCallback: 'parseResults',
            success: function(data, textStatus, jqXHR) {
                console.log('success_function');
                console.log(data);
            },
            error: function() {
                console.log('error with jsonp request');
            }
        });
    </script> 
```

当我加载页面时，我在控制台中看到“jsonp 请求错误”，因此 ajax 请求存在错误。为什么这个请求没有成功的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T11:39:52.870

在 ajax 请求中，尝试将属性 'jsonp' 设置为 false ( **jsonp: false** )。

基本上，JQuery 会生成一个自动函数回调名称，例如：JQuery1223...34。

在您的情况下，您已经明确设置了 jsonpCallback 函数名称。所以你必须把 jsonp 属性设置为 false。你的代码应该是这样的：

```
$.ajax({
        url: 'https://github.com/users/jbranchaud/contributions_calendar_data',
        type: 'post',
        dataType: 'jsonp',
        jsonp: false,
        jsonpCallback: 'parseResults',
        success: function(data, textStatus, jqXHR) {
            console.log('success_function');
            console.log(data);
        },
        error: function() {
            console.log('error with jsonp request');
        }
    }); 
```

# segmentation-fault - 野牛生成的解析器中我的代码中的分段错误

> ID：15170459
> 
> 赞同：0
> 
> 时间：2013-03-02T03:46:19.613
> 
> 标签：segmentation-fault, bison, flex-lexer

我正在尝试构建一个可以进行逐位运算的计算器。我的代码可以正确编译。但是当我运行它并输入任何值时，就会发生分段错误。我想知道你是否可以帮助我。

.l 文件

```
%}

%option noyywrap

%%
[0-9]+  {
            yylval.dval=atof(yytext);
            return INTEGER;
        }

([0-9]+|([0-9]*\.[0-9]+)([eE][-+]?[0-9]+)?) {
                                               yylval.dval = atof(yytext);
                                               return NUMBER;
                                            }

[ \t    ]  ;

[A-Za-z][A-Za-z0-9]*   {
                      struct symtab *sp = symlook(yytext);
                      yylval.dval = 0.0;
                      return NAME;
                   }

"**"    {
    return POW;
    }

"<<"    {
    return LSHIFT;
    }

">>"    {
    return RSHIFT;
    }

"$"      { return 0; }

\n    |
.     return yytext[0];
%% 
```

.h 文件

```
 #define NSYMS 20

struct symtab {
  char *name;
  double (*funcptr)();
  double dval;
  enum constype {integer, floatingpoint} constype;
} symtab[NSYMS];

struct symtab *symlook(); 
```

.y 文件

```
%{ 
#include "zcalc.h"

#include <string.h>
#include <math.h>
#include <stdlib.h>
#include <stdio.h>

int flag = 0;

void yyerror( char *mesg ); /* yacc error checker */

%}

%union {
  double dval;
  struct symtab *symp;
}

%token <symp> NAME
%token <dval> NUMBER
%token <dval> INTEGER
%token POW
%token LSHIFT
%token RSHIFT

%left '-' '+'
%left '*' '/'

%type <symp> expression
%%

statement_list: statement '\n'
            | statement_list statement '\n'

    statement: NAME '=' expression {$1->dval = $3->dval;
                            if($3-                 >constype==integer)
                                $1-            >constype=integer;
                            else
                                $1-           >constype=floatingpoint;}
            | expression { printf("= %g\n", $1->dval); }

 expression: '+' expression expression { $$->dval = $2->dval + $3->dval; 
                                    if($2->constype==integer && $3->constype)
                                        $$->constype=integer;
                                    else $$->constype=floatingpoint;
                                    }
        | '-' expression expression { $$->dval = $2->dval - $3->dval; 
                                        if($2->constype==integer && $3->constype)
                                        $$->constype=integer;
                                    else $$->constype=floatingpoint;}
        | '*' expression expression { $$->dval = $2->dval * $3->dval; 
                                        if($2->constype==integer && $3->constype)
                                        $$->constype=integer;
                                    else $$->constype=floatingpoint;}
        | '/' expression expression { $$->dval = $2->dval / $3->dval;
                                        if($2->constype==integer && $3->constype)
                                        $$->constype=integer;
                                    else $$->constype=floatingpoint;}
        | '(' expression ')' { $$->dval = $2->dval; 
                                        if($2->constype==integer)
                                        $$->constype=integer;
                                    else $$->constype=floatingpoint;}
        | '&' expression expression { 
                                        if($2->constype!=integer||$3->constype!=integer)
                                        $$->dval = (int)($2->dval) & (int)($3->dval);
                                        else
                                        printf("Error: bitewise operations cannot be done to floating point vals./n")}
        | '|' expression expression { 
                                        if($2->constype!=integer||$3->constype!=integer)
                                        $$->dval = (int)($2->dval) | (int)($3->dval);
                                        else
                                        printf("Error: bitewise operations cannot be done to floating point values./n")}
        | '^' expression expression { 
                                        if($2->constype!=integer||$3->constype!=integer)
                                        $$->dval = (int)($2->dval) ^ (int)($3->dval);
                                        else
                                        printf("Error: bitewise operations cannot be done to floating point values./n")}
        | '~' expression { 
                                        if($2->constype!=integer)
                                        $$->dval = ~(int)($2->dval);
                                        else
                                        printf("Error: bitewise operations cannot be done to floating point values./n")}
        | LSHIFT expression expression { 
                                        if($2->constype!=integer||$3->constype!=integer)
                                        $$->dval = (int)$2->dval << (int)$3->dval;
                                        else
                                        printf("Error: bitewise operations cannot be done to floating point values./n")}
        | RSHIFT expression expression { 
                                        if($2->constype!=integer||$3->constype!=integer)
                                        $$->dval = (int)$2->dval >> (int)$3->dval;
                                        else
                                        printf("Error: bitewise operations cannot be done to floating point values./n")}    
        | POW   expression expression { $$->dval=pow($2->dval,$3->dval);}
        | NUMBER {$$->dval=$<dval>1;
                $$->constype=floatingpoint;
                 }
        | INTEGER {
                $$->dval=$<dval>1;
                    $$->constype=integer;}
        | NAME {
                $$->dval = $1->dval;
                if($1->constype==integer )
                    $$->constype=integer;
                else $$->constype=floatingpoint;}
 %%

 struct symtab * symlook( char *s ) {
    char *p;
    struct symtab *sp;

    for(sp = symtab; sp < &symtab[NSYMS]; sp++) {
      /* is it already here? */
 if (sp->name && !strcmp(sp->name, s))
   return sp;

 /* is it free */
 if (!sp->name) {
   sp->name = strdup(s);
   return sp;
 }
      /* otherwise continue to the next */
    }
    yyerror("Too many symbols...\n");
    exit(1);
 }

 void addfunc( char *name, double (*func)() ) {
   struct symtab *sp = symlook(name);
   sp->funcptr = func;
 }

 /* yacc error function */
 void yyerror( char *mesg ) {
       flag = 1;
       printf("%s \n" , mesg);  
     }

int main() {

  yyparse();

  return 0;
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T04:00:43.863

您已将令牌声明`NAME`为具有类型`symp`，但在您的 flex 文件中，当您返回时，`NAME`您正在设置`yylval->dval`. 您在其中创建了一个`symb`指针（我认为），`sp`但您从未将其分配给`yylval->sp`.

您可能会`dval`因为同时使用`symbol`数据成员和标签而感到困惑`yylval`。（至少，你那样混淆了我）。无论如何，我建议：

```
[A-Za-z][A-Za-z0-9]*   {
                         yylval.symp = symlook(yytext);
                         return NAME;
                       } 
```

# php - 从外部函数调用 php 方法会产生错误

> ID：15170460
> 
> 赞同：0
> 
> 时间：2013-03-02T03:46:20.640
> 
> 标签：php, fpdf

```
function KeepSamePage($text)
 {
$sb_w = $oPdf->GetStringWidth($text);

$num_lines = explode("\n",$text);

$total = 0;
foreach($num_lines as $line)
 {

  $y = $oPdf->GetY();
  $page_height = 11 * 25.4;

  $this_width = $oPdf->GetStringWidth(strip_tags($line));
  $extra_line = floor($this_width / $w);
  $is_line = $this_width / ($w - 1);
  $is_line = $this_width == 0 ? 1 + $extra_line : ceil($is_line) + $extra_line;
  $total = $total + $is_line;
 }

  $sb_height = $total * 5;
  if(($page_height - $y) < $sb_height){ $oPdf->AddPage(); }
}

KeepSamePage($signature_block); 
```

我正在使用 FPDF，我正在创建一个函数来将一封信的签名页全部放在同一页上。这将检查它是否会转到下一页，如果是，则执行 AddPage();

我遇到的问题是，当我在函数中没有它时，它可以完美运行，但是当我将它放在函数中时，在调用由 $oPdf 表示的类中的方法时会出错。

所以，我的问题通常是这样的：是否可以让 PHP 中的常规函数​​调用类方法，如下所示？如果有可能，我做错了什么？

产生的错误是：

```
Fatal error: Call to a member function GetStringWidth() on a non-object in /home/jarodmo/public_html/cms/attorney_signature_block.php on line 18 
```

哦，还有对我的功能的解释，以防你感兴趣或其他人发现它。

文本中有 \n 用于换行，因此 PDF 会将签名块的文本放在下一行。每个新的数组元素都应该是一个新行，因此我需要将行数乘以行高，在这种情况下为 5。（见 $total * 5）。

我检查我们在页面上的位置，找到页面高度和 Y 位置之间的差异，然后检查签名块的高度。如果签名块更大，那么它将不适合，我知道我们需要手动分页符。

另外，因为我使用 \n 进行分解以查看行，所以我还必须检查以确保没有任何行仍然比页面宽，否则它会自动换行并且实际上是 2 行（或更多），其中我只是把它算作 1，因为它只是一个数组元素。我知道签名块不应该有足够宽的文本，不能放在 2 行上，但我写这个是为了不仅仅适用于签名块。我希望能够在任何我想确保某些文本保持在同一页面上的任何地方调用此函数。调用该函数，检查我将要写入 PDF 的文本，然后继续了解所需的文本都在同一页面上。

感谢所有的帮助和评论。SO是最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T03:50:07.390

```
$oPdf 
```

未在您的代码中定义。您需要定义它，并且可能阅读[PHP 变量范围。](http://php.net/manual/en/language.variables.scope.php)

您正在尝试访问函数中 $oPdf 对象的方法，但您的函数不知道 $oPdf 是什么，因此出现错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T03:57:36.893

你必须做这样的事情。

```
function KeepSamePage($text) {
$oPdf = new your_string_class();
$sb_w = $oPdf->GetStringWidth($text);
} 
```

或者

```
$oPdf = new your_string_class();
function KeepSamePage($text, $oPdf) {
$sb_w = $oPdf->GetStringWidth($text);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T03:57:58.550

尝试以下操作：

```
function KeepSamePage($text) {
    global $oPdf;

    …
} 
```

问题是，该对象是在您的函数之外定义的，您必须允许您的函数访问它。

// 编辑：如果你想避免全局，你将不得不将你的对象传递给函数，如下所示：

```
function KeepSamePage($text, $oPdf) {
    …
    // IMPORTANT! $oPdf has changed in this function, so you will have to give it back
    return $oPdf;
} 
```

你可以这样调用你的函数：

```
$oPdf = KeepSamePage($signature_block, $oPdf); 
```

优点是，您在主线程中看到，您的函数可能已经更改了对象。

// 编辑 2：我认为，在你的情况下，我在编辑 1 上错了。当您将完整的对象传递给函数时，每个更改都会应用于对象，因此更改将仍然存在而不会返回结果。如果这是在主线程中定义的变量，则必须返回新值：

```
$a = 1;

function result1($a) {
    ++$a;
}

function result2($a) {
    return ++$a;
}

echo $a."\n"; // 1
result1($a);
echo $a."\n"; // 1
$a = result2($a);
echo $a."\n"; // 2 
```

# javascript - 我在 AngularJS 中有两个具有相同 ng-controller 的 div，我怎样才能让它们共享信息？

> ID：15170464
> 
> 赞同：12
> 
> 时间：2013-03-02T03:47:43.280
> 
> 标签：javascript, html, angularjs

我的 html 代码中有两个不同的 div 标签，它们引用了 AngularJS 中的同一个控制器。我怀疑的是，由于这些 div 没有嵌套，它们每个都有自己的控制器实例，因此两者的数据不同。

```
<div ng-controller="AlertCtrl">
<ul>
    <li ng-repeat="alert in alerts">
        <div class="span4">{{alert.msg}}</div>
    </li>
</ul>
</div>        
<div ng-controller="AlertCtrl">
<form ng-submit="addAlert()">
    <button type="submit" class="btn">Add Alert</button>
</form>
</div> 
```

我知道这可以通过在第一个 div 中包含按钮来轻松解决，但我觉得这是一个非常干净和简单的示例，可以传达我想要实现的目标。如果我们按下按钮并将另一个对象添加到我们的警报数组中，则更改将不会反映在第一个 div 中。

```
function AlertCtrl($scope) {

$scope.alerts = [{
    type: 'error',
    msg: 'Oh snap! Change a few things up and try submitting again.'
}, {
    type: 'success',
    msg: 'Well done! You successfully read this important alert message.'
}];

$scope.addAlert = function() {
    $scope.alerts.push({
        type: 'sucess',
        msg: "Another alert!"
    });
};
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-02T04:12:33.023

这是一个很常见的问题。似乎最好的方法是创造服务/价值并在两者之间分享。

```
mod.service('yourService', function() {
  this.sharedInfo= 'default value';
});

function AlertCtrl($scope, yourService) {
  $scope.changeSomething = function() {
    yourService.sharedInfo = 'another value from one of the controllers';
  }

  $scope.getValue = function() {
    return yourService.sharedInfo;
  }
} 
```

```
<div ng-controller="AlertCtrl">{{getValue()}}</div>
<div ng-controller="AlertCtrl">{{getValue()}}</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-18T02:19:45.710

如果我正确理解了这个问题，你想用同一个控制器同步两个 html 区域，保持数据同步。

> 由于这些 div 不是嵌套的，它们每个都有自己的控制器实例，因此两者的数据不同

这不是真的，如果您声明具有相同别名的控制器（我使用的是更新的角度版本）：

```
<div ng-controller="AlertCtrl as instance">
  {{instance.someVar}}
</div>
<div ng-controller="AlertCtrl as instance">
  {{instance.someVar}} (this will be the same as above)
</div> 
```

但是，如果您希望它们不同并相互通信，则必须声明不同的别名：

```
<div ng-controller="AlertCtrl as instance1">
  {{instance1.someVar}}
</div>
<div ng-controller="AlertCtrl as instance2">
  {{instance2.someVar}} (this will not necessarily be the same as above)
</div> 
```

然后您可以使用服务或广播在它们之间进行通信（应该避免第二种，很难）。

# android - 由于 xml 错误，页面退出

> ID：15170466
> 
> 赞同：2
> 
> 时间：2013-03-02T03:48:11.820
> 
> 标签：android

我已经为 curlview 的页面动画制作了一个活动，但是当我尝试为我的第二页制作活动的副本时，当我运行代码时出现此错误，这是 logcat 消息：

```
03-02 03:42:10.385: E/AndroidRuntime(1821): FATAL EXCEPTION: main
03-02 03:42:10.385: E/AndroidRuntime(1821): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.lspu.handbook/com.lspu.handbook.Hand_Book_mission}: android.view.InflateException: Binary XML file line #7: Error inflating class com.lspu.handbook.lspu_book_adapter_mission
03-02 03:42:10.385: E/AndroidRuntime(1821):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at android.os.Looper.loop(Looper.java:137)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at java.lang.reflect.Method.invokeNative(Native Method)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at java.lang.reflect.Method.invoke(Method.java:511)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at dalvik.system.NativeStart.main(Native Method)
03-02 03:42:10.385: E/AndroidRuntime(1821): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class com.lspu.handbook.lspu_book_adapter_mission
03-02 03:42:10.385: E/AndroidRuntime(1821):     at android.view.LayoutInflater.createView(LayoutInflater.java:613)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at android.app.Activity.setContentView(Activity.java:1881)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at com.lspu.handbook.Hand_Book_mission.onCreate(Hand_Book_mission.java:23)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at android.app.Activity.performCreate(Activity.java:5104)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-02 03:42:10.385: E/AndroidRuntime(1821):     ... 11 more
03-02 03:42:10.385: E/AndroidRuntime(1821): Caused by: java.lang.reflect.InvocationTargetException
03-02 03:42:10.385: E/AndroidRuntime(1821):     at java.lang.reflect.Constructor.constructNative(Native Method)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at android.view.LayoutInflater.createView(LayoutInflater.java:587)
03-02 03:42:10.385: E/AndroidRuntime(1821):     ... 22 more
03-02 03:42:10.385: E/AndroidRuntime(1821): Caused by: java.lang.IndexOutOfBoundsException: Invalid index 1, size is 1
03-02 03:42:10.385: E/AndroidRuntime(1821):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at java.util.ArrayList.get(ArrayList.java:304)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at com.lspu.handbook.lspu_book_adapter_mission.init(lspu_book_adapter_mission.java:313)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at com.lspu.handbook.lspu_book_adapter_mission.<init>(lspu_book_adapter_mission.java:233)
03-02 03:42:10.385: E/AndroidRuntime(1821):     ... 25 more 
```

这是我的 xml 代码，logcat 说有错误：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <com.lspu.handbook.lspu_book_adapter_mission
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/dcgpagecurlPageCurlView1"
        android:background="@drawable/lspuhdpg1">

    </com.lspu.handbook.lspu_book_adapter_mission>

</LinearLayout> 
```

有人知道这里有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T03:51:00.903

```
 Caused by: java.lang.IndexOutOfBoundsException: Invalid index 1, size is 1
03-02 03:42:10.385: E/AndroidRuntime(1821):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
03-02 03:42:10.385: E/AndroidRuntime(1821):     at java.util.ArrayList.get(ArrayList.java:304) 
```

问题不在给定的代码中。它在`lspu_book_adapter_mission`检查您的 AArrayList 中。因为它抛出一个`IndexOutOfBoundsException`

# matlab - MATLAB 中向量的串联

> ID：15170467
> 
> 赞同：0
> 
> 时间：2013-03-02T03:48:20.283
> 
> 标签：matlab, vector, concatenation

我在 MATLAB 中有这 10 个向量，mean(alltmws{l}')，其中 l 是从 1 到 10。每个向量的大小都是 1X10001。现在我想将所有这些值一个接一个地存储在一个向量中，以便我可以计算和绘制整体平均值。我该如何进行这种连接？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T04:49:45.327

例如，如果您有，

```
a{1} = rand(10,1);
a{2} = rand(10,1);
a{3} = rand(10,1); 
```

你可以做

```
A = [a{:}];
A = A(:) 
```

编辑：这个问题是模棱两可的，但如果它是想要连接和绘制的手段，你可以这样做：

```
% Create example data
data = {};
for k = 1:10
  data{k} = rand(100,1);
end

% Compute and plot array of means
mu = []
for k = 1:length(data)
  mu(k) = mean(data{k});
end
plot(mu) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T03:59:21.500

如果您有一个`1x10`单元格数组，那么您可以直接执行以下操作：

```
concatnatedArray=cell2mat(yourCellArray); 
```

如果您有一个`10x1`单元阵列，请先转置它，然后应用上述技术。这只有在每个单元格中的所有向量都具有相同长度时才有效，这对你来说就是这种情况。

# r - R中矩阵中的第二，第三，第四个最大值INDEX

> ID：15170477
> 
> 赞同：0
> 
> 时间：2013-03-02T03:49:24.087
> 
> 标签：r, matrix

我有一个大的无序矩阵，我想获得第二高值的索引。

```
x <- matrix(c(4:7, 2, 1), nrow = 2, ncol = 3)
which.max(x) 
```

这给了我四个作为最大值 7 的索引。但是有谁知道如何获得第二、第三或第四高的索引？

# vb.net - 列表框和案例语句 - 将其存储在数据库中

> ID：15170479
> 
> 赞同：0
> 
> 时间：2013-03-02T03:49:47.303
> 
> 标签：vb.net

在我开始之前，如果有些事情可能不清楚，我想道歉，但我会尽力而为。我使用 vb net 制作了一个使用列表框（和文本框）和案例语句的程序。我试图创建一个类，稍后允许我将用户输入发送到访问数据库。我遇到的问题是我无法将包含 case 语句的变量值发送到数据库。

这是代码，可能有人可以帮助我解决问题：

这就是我接受用户输入的形式（它还包含文本框，但我已经弄清楚了）：

```
Private Sub Form4_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    'Fill Listbox with items
    Me.Controls.Add(ListBox1)
    ListBox1.Items.Add("Shoot in-laws")
    ListBox1.Items.Add("Become a paparazzi")
    ListBox1.Items.Add("Drive 5 mph over speed limit")
    ListBox1.Items.Add("Treat for rabies once a week")
    ListBox1.Items.Add("Cheat on income taxes")
    ListBox1.Items.Add("Breathe uder water")
    ListBox1.Items.Add("Recite the Gettysburg Address")
    ListBox1.Items.Add("Smile while being staked")
    ListBox1.Items.Add("Stay calm while getting help on C#")
    ListBox1.Items.Add("Day dream about playing chess")
    ListBox1.Items.Add("Take candy from a baby")

End Sub

Private Sub ListBox1_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ListBox1.SelectedIndexChanged

    Select Case ListBox1.SelectedIndex
        Case 0
            dblTestScore = 50
        Case 1
            dblTestScore = 15
        Case 2
            dblTestScore = 25
        Case 3
            dblTestScore = 55
        Case 4
            dblTestScore = 10
        Case 5
            dblTestScore = 20
        Case 6
            dblTestScore = 40
        Case 7
            dblTestScore = 65
        Case 8
            dblTestScore = 30
        Case 9
            dblTestScore = 35
        Case 10
            dblTestScore = 45
    End Select

End Sub 
```

现在下面的代码在类中：

```
Public Class ClsWriteRecord
Public Sub addNewRecordMore(ByVal listTestScore As ListBox, ByVal listTEST As ListBox, 

'declare variables
Dim dblTestScore As Double
Dim strTEST As String

'Get values

strTEST = listTEST.GetItemText(listTEST.SelectedItem)
dblTestScore = listTEST.GetItemText(listTEST.SelectedIndex)

End Sub
End Class 
```

strTEST 正常工作并获取列表框项目并将其发送到数据库（例如“Shoot in-laws”），但 dblTestScore 没有。取而代之的是值，例如 50,15, 25 等，它发送 0,1,2 这是案例编号。

谁能帮我弄清楚？我搜索互联网但找不到答案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T04:45:18.350

这对您非常有用...请参见下文...这是您要从主窗体或其他任何需要它的地方调用的课程...

```
Public Class ClsWriteRecord

 Public Shared Function addNewRecordMore(ByVal listTestScore As Integer, ByVal listTEST As String)

    'Do your save routine here... and pass your information to it...'
    'Example...' Save(listTestScore, listTEST)
    'You would have to create the save function of course...'

 End Function

End Class 
```

然后这是您的主要形式或您拥有的任何其他形式...

```
 Public Class Form1

'Our global variables...'
Private dblTestScore As Integer = 0
Private strTest As String = String.Empty

Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

    'Put your items into an array then add this to the listbox...'
    Dim strItems As String() = {"Shoot in-laws", "Become a paparazzi", "Drive 5 mph over speed limit", "Treat for rabies once a week"} 'Add more as needed...'
    'Add your items...'
    ListBox1.Items.AddRange(strItems)

End Sub

Private Sub ListBox1_SelectedIndexChanged(sender As Object, e As System.EventArgs) Handles ListBox1.SelectedIndexChanged

    'Set your variable for your text here...'
    strTest = ListBox1.SelectedItem

    'Build your case statement...'
    Select Case ListBox1.SelectedItem

        Case "Shoot in-laws"
            dblTestScore = 50
        Case "Become a paparazzi"
            dblTestScore = 15
        Case "Drive 5 mph over speed limit"
            dblTestScore = 25
        Case "Treat for rabies once a week"
            dblTestScore = 55
            'Continue your case on down here...'
    End Select

    'Call our function from other class We have our value and we have our text already...
    ClsWriteRecord.addNewRecordMore(dblTestScore, strTest)

End Sub
End Class 
```

谢谢，让我知道它对你有用...

# javascript - AJAX 侦听器而不是轮询？

> ID：15170480
> 
> 赞同：3
> 
> 时间：2013-03-02T03:50:00.127
> 
> 标签：javascript, ajax, listener

我在 python 中创建了自己的聊天网络服务器，并且想知道不是 AJAX 每秒调用服务器（下面的 JS）。我可以修改我的服务器，所以当它更新 chat.html 文件时，它会将其推送给所有客户端。有没有办法使用 javascript 让它监听任何接收到的数据而不是轮询？

```
<script>
// Request the AJAX update the chat window every second
setInterval(function(){loadChat()},1000);

function loadChat()
{
    var xmlhttp;
    if (window.XMLHttpRequest)
    {
        xmlhttp = new XMLHttpRequest();

        xmlhttp.onreadystatechange=function()
        {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                document.getElementById("chatWindow").innerHTML=xmlhttp.responseText;
            }
        }

        xmlhttp.open("GET","chat.html",true);
        xmlhttp.send(null);
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T03:58:05.037

是的，当然有。您可以使用（至少）四种技术：

1.  **网络套接字。**这是最明显的解决方案。它允许您按需发送和接收消息，而无需轮询。但是，它可能在服务器端实现起来有些困难，因为它不是普通的 HTTP。此外，旧浏览器不支持 WebSockets。

2.  **服务器发送的事件。**这不太理想，但仍然对您有用。有了它，您无需轮询即可从服务器接收消息。它也更容易在服务器上实现，因为它只是普通的 HTTP，只是连接不会关闭。一些较旧的 Web 浏览器也不支持它，但它比 WebSockets 更受支持，并且很容易填充。

3.  **彗星。**这基本上是对以下内容的改进。基本上，你有一个`iframe`隐藏在屏幕外的东西。每当有事件出现时，您都会发送（并刷新！）一个脚本标签，但不要关闭连接。超时后，关闭连接。然后刷新`iframe`. 这也很容易实现，是纯 HTTP，不需要特殊的浏览器支持。但是，浏览器超时时间各不相同，这有点不雅。

4.  **保持连接打开，直到事件发生。**这可能是最不可取的。在事件到来之前不要发送响应。当事件到来或发生超时时，发送响应。当客户端收到响应时，重新连接。这也有点不雅，但它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T03:58:25.447

您所说的是从服务器**推送到****[彗星](http://en.wikipedia.org/wiki/Comet_%28programming%29)**客户端，您可以使用这种方式

但这可以用 HTML5 中的 node.js 和 WebSockets 完美地完成，但并非所有浏览器都支持[检查这个](http://en.wikipedia.org/wiki/WebSocket)

你可以做另一件事

从你的 JS 发送一个请求，让它存活 1 分钟，然后创建一个无限循环，休眠几秒钟，如果它找到任何东西，然后将它返回给客户端，否则发出一个新请求，这种技术称为**HeartBeat**

我希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T03:55:44.227

简单地说，在大多数情况下，您将无法这样做。但是，您可以使用[HTML5 Websockets](http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/)，尽管它们通常不受支持。

[SockJS](https://github.com/sockjs/sockjs-client)，在 JavaScript 中使用多种方法进行回调，其中一种是阻塞查询，另一种是[WebSockets](http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/)。如果您尝试做这种事情，我强烈推荐它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T03:56:09.093

您可以使用 websockets 来做到这一点。不幸的是，目前并非所有浏览器都支持它们。

[更多关于 websockets 的信息在这里。](http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/)

# c++ - wxHTTP::getinputstream() 线程安全吗？

> ID：15170483
> 
> 赞同：1
> 
> 时间：2013-03-02T03:50:11.340
> 
> 标签：c++, multithreading, wxwidgets

所以我有一个下载 HTML 文件的功能。由于这需要大量时间，我将它放在一个单独的线程中，该线程在后台运行，并且程序保持响应。当我从主线程调用该函数时，它工作正常。但是从另一个线程调用会导致 getinputstream() 总是返回 NULL。那么，是什么原因造成的呢？我该如何解决这个问题？
PS，我在 Visual Studio 10 上使用 wxwidgets 2.8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T05:19:58.523

您必须`wxHTTP::Initialize()`在主线程中调用（不仅在 中`wxApp:onInit()`）。[从这里](https://stackoverflow.com/questions/10067056/wxhttp-threads)公然复制只是为了回答这个问题。

# ios - 在 iPhone 中使用谷歌地图进行地理围栏

> ID：15170491
> 
> 赞同：3
> 
> 时间：2013-03-02T03:51:34.213
> 
> 标签：ios, google-maps, google-maps-api-3, google-maps-sdk-ios

我正在尝试使用应用程序进行地理`Google Map`围栏`iPhone`。可以找到很多关于 MKMapView 的教程。但找不到 GMSMapView。基本的事情是如何将屏幕坐标（x，y）转换为 MapCoordinate lat/lng。是否有任何`API`可用于该转换的谷歌地图`iOS`？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T03:58:06.087

你可以使用这样的东西：

```
GMSMapView* mapView = ...;
CGPoint point = ...;
...
CLLocationCoordinate2D coordinate = 
    [mapView.projection coordinateForPoint: point]; 
```

**更新：**

对该`projection`物业的评论`GMSMapView.h`如下：

```
/**
 * The GMSProjection currently used by this GMSMapView. This is a snapshot of
 * the current projection, and will not automatically update when the camera
 * moves. The projection may be nil while the render is not running (if the map
 * is not yet part of your UI, or is part of a hidden UIViewController, or you
 * have called stopRendering).
 */
@property (nonatomic, readonly) GMSProjection *projection; 
```

因此，您只能`.projection`在地图渲染后访问该属性。`loadView`如果您尝试在或期间访问它，它将为零`viewDidLoad`。

我不知道是否有更好的方法来判断地图是否已渲染，但我注意到该`mapView:didChangeCameraPosition:`方法在地图视图首次显示后被调用一次，并且地图的`projection`属性在那里有效。

因此，在您的视图控制器的标题中，添加`GMSMapViewDelegate`：

```
@interface ViewController : UIViewController <GMSMapViewDelegate> 
```

分配地图视图时，分配委托：

```
_map = [GMSMapView mapWithFrame: CGRectMake(0, 0, width, height) camera: camera]; 
_map.delegate = self;
[self.view addSubview: _map]; 
```

然后添加委托方法：

```
- (void)mapView: (GMSMapView*)mapView
    didChangeCameraPosition: (GMSCameraPosition*)position
{
    CGPoint point = CGPointMake(x, y); 
    CLLocationCoordinate2D coordinate = 
        [_map.projection coordinateForPoint: point];
} 
```

请注意，`mapView:didChangeCameraPosition:`每次用户更改相机时都会调用它，因此您可能需要使用一个标志，以便您只在第一次`mapView:didChangeCameraPosition:`调用时进行计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T12:57:02.737

**`No need to convert x,y to lat,long.`**

```
GMSCircle *fence = [GMSCircle circleWithPosition:locationCord radius:fenceRadius];
    [fence setFillColor:[UIColor colorWithRed:102.0/255 green:178.0/255 blue:255.0/255 alpha:0.3]];
    [fence setZIndex:100];

    [fence setMap: _map]; 
```

在制作 GMSMapView 时添加此代码，地理围栏将与您的位置标记一起显示。

# tomcat - Tomcat7中的Akka应用程序未发送响应

> ID：15170495
> 
> 赞同：0
> 
> 时间：2013-03-02T03:52:02.167
> 
> 标签：tomcat, get, akka

我有一个在 Tomcat 7 中部署的 Servlet 3 中开发的 akka 应用程序。在应用程序内部，servlet 有一个 doGet 方法。doGet 在异步上下文中提供服务。如果 doGet 在 12 mts 内没有获得所需的输入，则请求会发回空闲超时响应。问题是我没有得到我在应用程序中设置的这个响应。我在日志中没有看到任何异常。当我将超时值设置为 5 mts 时，我得到了响应。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:14:42.837

如果它工作 5 分钟但不能工作 12 分钟，那么我会说客户端或其他一些依赖进程在预期时间过去之前放弃了。我会检查与客户端、Tomcat 等相关的所有其他超时。

# python - ValueError：在 fmin_l_bfgs_b 中解压的值太多

> ID：15170501
> 
> 赞同：-1
> 
> 时间：2013-03-02T03:53:11.350
> 
> 标签：python

我有以下代码正在运行以运行 xfoil 以获得翼型中权重的最佳值。

```
def four_dim_opt(x0, weight_limits, cl, file_path, xfoil_path):
opt_out = fmin_l_bfgs_b(run_xfoil_wcl, x0, args = (cl, file_path, xfoil_path), bounds =    weight_limits, epsilon = 0.01, approx_grad = True)
return opt_out 
```

其中 run_xfoil_wcl 是一个函数返回阻力值的系数 (float)。

我不断收到的错误是：

```
Traceback (most recent call last):
File "<pyshell#13>", line 1, in <module>
four_dim_opt(x0, weight_limits, 1.2, file_path, xfoil_path)
File "H:/appliedlab4 - Copy(2).py", line 157, in four_dim_opt
opt_out = fmin_l_bfgs_b(run_xfoil_wcl, x0, args = (cl, file_path, xfoil_path), bounds =     weight_limits, epsilon = 0.01, approx_grad = True)
File "C:\Python27\lib\site-packages\scipy\optimize\lbfgsb.py", line 166, in fmin_l_bfgs_b
l,u = bounds[i]
ValueError: too many values to unpack 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T04:02:24.110

[scipy.optimize.fmin_l_bfgs_b](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fmin_l_bfgs_b.html)的`weight_limits`参数导致错误，它应该是一个或包含两个元素的列表：`None`

> weight_limits - x 中每个元素的 (min, max) 对，定义该参数的界限。当该方向没有界限时，将 None 用于 min 或 max 之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T04:06:18.723

您将什么传递给four_dim_opt 作为您的`weight_limits`？weight_limits 的值被传递给 bounds，然后在错误消息中的行中访问：

```
l,u = bounds[i] 
```

这意味着 weight_limits 应该是一个列表或元组，并且列表中的每个项目也应该是一个列表或元组（恰好包含两个值）。

# python - 检查 Python FTP 连接

> ID：15170503
> 
> 赞同：11
> 
> 时间：2013-03-02T03:53:25.050
> 
> 标签：python, ftplib

我有一个 FTP 连接，我从中下载许多文件并在它们之间进行处理。我希望能够检查我的 FTP 连接在两者之间没有超时。所以代码看起来像：

```
conn = FTP(host='blah')
conn.connect()
for item in list_of_items:
    myfile = open('filename', 'w')
    conn.retrbinary('stuff", myfile)
    ### do some parsing ### 
```

我如何检查我的 FTP 连接以防它在`### do some parsing ###`线路中超时？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-02T04:03:14.693

发送 NOOP 命令。这只会检查连接是否仍在进行，如果您定期执行此操作，它可以保持连接处于活动状态。

例如：

```
 conn.voidcmd("NOOP") 
```

如果连接出现问题，则 FTP 对象将引发异常。你可以从[文档](http://docs.python.org/2/library/ftplib.html "Python ftplib 文档")中看到，如果有错误，就会抛出异常：

**socket.error 和 IOError：**这些是由套接字连接引发的，很可能是您感兴趣的。

**异常 ftplib.error_reply：**从服务器收到意外回复时引发异常。

**异常 ftplib.error_temp：**收到表示临时错误的错误代码（400-499 范围内的响应代码）时引发异常。

**异常 ftplib.error_perm：**当收到表示永久错误的错误代码（500-599 范围内的响应代码）时引发异常。

**异常 ftplib.error_proto：**当从服务器接收到不符合文件传输协议响应规范的回复时引发异常，即以 1-5 范围内的数字开头。

因此，您可以使用[try-catch 块](http://docs.python.org/2/tutorial/errors.html "Python 错误和异常")来检测错误并相应地处理它。

例如，这个代码示例将捕获一个 IOError，告诉您它，然后重试该操作：

```
retry = True
while (retry):
    try:
        conn = FTP('blah')
        conn.connect()
        for item in list_of_items:
            myfile = open('filename', 'w')
            conn.retrbinary('stuff', myfile)   
            ### do some parsing ###

        retry = False

    except IOError as e:
        print "I/O error({0}): {1}".format(e.errno, e.strerror)
        print "Retrying..."
        retry = True 
```

# netty - Netty 4：是否可以在同一个ByteBuf中读取小端和大端的字节

> ID：15170508
> 
> 赞同：1
> 
> 时间：2013-03-02T03:54:24.957
> 
> 标签：netty

我有一个现有的协议（不可更改），我正在尝试用 netty 实现，其中数据包具有必须以大端和小端读取的字节以及以大端和小端写入的响应。

示例：00 00 00 04 02 00 05 00 00 00

此数据包值为 4、2 和 5。

我知道我可以以自己的方式实现这一点，但我想知道是否有“Netty”方式来做到这一点。

我找到了 .order(ByteOrder) 方法，但这似乎只是创建了一个新缓冲区，我不明白为什么我必须创建一个新对象来以不同的顺序读取字节。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:18:09.073

您可以简单地将缓冲区的字节顺序保留为 big-endian 并使用`BufUtil.swap*()`. 在你的情况下：

```
int a = buf.readInt();
int b = BufUtil.swapShort(buf.readShort());
int c = BufUtil.swapInt(buf.readInt()); 
```

另一方面，在 Netty 4 中，`.order(ByteOrder)`由原始缓冲区缓存的缓冲区，所以`.order(ByteOrder)`只要连接是短暂的，开销应该很小。如果您使用`.order(ByteOrder)`：

```
int a = buf.readInt();
int b = buf.order(LITTLE_ENDIAN).readShort();
int c = buf.order(LITTLE_ENDIAN).readInt(); 
```

我实际上很好奇 using`.order(..)`是否明显比 using 慢，`BufUtil.swap*()`尽管我的猜测是它们应该基本相同。

# c - 如何初始化静态 C 数组？

> ID：15170516
> 
> 赞同：0
> 
> 时间：2013-03-02T03:55:07.233
> 
> 标签：c, static

假设我每次调用 f() 时都想做这样的事情来增加一个 int 数组：

```
void f()
{
  static int v[100]={1,2,3...100};
  for (int i=0; i<100; i++) v[i]++;
} 
```

即我想要：

```
first call f(): v[100]={1,2,3...100};
second call f(): v[100]={2,3,4...101};
... 
```

显然以下不会这样做：

```
void f()
{
  static int v[100]; for (int i=0; i<100; i++) v[i]=i+1;
  for (int i=0; i<100; i++) v[i]++;
} 
```

不知道如何实现它。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T04:06:01.983

函数内部声明的`static`数组只能在函数内部被引用，只要程序运行它就存在。它可以在您在第一个版本中提示时进行初始化。

第二个版本首先用值填充数组，然后在每次调用函数时递增它们。大概不是你想要的。

要么将初始化和递增拆分为两个函数，`static`在两者之外定义数组，要么像第一个版本一样手动填充数组（甚至可以编写一个程序来生成初始化数组的部分到文件中，然后将其复制到你的来源）。在这种情况下，数组的填充是由编译器完成的，没有运行时损失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T04:24:30.330

您可以使用另一个包含数组标记或起点的静态变量来执行此操作。说

```
{
    static int fst = 0,
        v[MAXSIZE] = {0};    //#define MAXSIZE 100
        fst++;
        for(int i = 0; i < (MAXSIZE+fst-1); i++) v[i] = i + fst;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T04:02:51.857

你不能像那样初始化你的静态数组。第二个代码块中的第一个 for 循环只会在每次被调用时`f`被调用。

您可以将静态`v`变量初始化为 NULL，然后在实际递增数组元素的 for 循环之前，检查 NULL 并`i+1`在必要时进行初始化。

# php - 多维数组/Session

> ID：15170517
> 
> 赞同：0
> 
> 时间：2013-03-02T03:55:13.273
> 
> 标签：php, arrays, session

我建立了一个展会预订系统，参展商输入他们的详细信息，然后选择他们希望预订的“展会”，包括“展位尺寸”和展会附带的任何“额外”。（展台尺寸和附加功能因每场演出而异）。这可以正常工作，在我的数据库中输入正确的预订详细信息（每次演出预订 1 行，每次演出）。但是，在将预订数据插入数据库之前，我需要在 Conformation 页面中添加（因为用户单击后退按钮进行更正，然后再次单击“预订”，因此在某些情况下会添加重复项）。

每次预订有 1 个表演，1 个展位，但有多个 x 附加服务可以同时进行多个预订（针对不同的表演）。

我认为我在正确的轨道上：我正在尝试将每个预订的所有数据存储到一个数组中（具体来说是一个 SESSION 数组），这样我就可以输出（在 HTML 中）即将预订的内容。然后用户单击确认（或编辑），然后将会话数据提取/插入到我的数据库中。

我正在努力解决这个问题，因为我在数组中有数组，因为我需要将数据保存在一起，而且我不知道每个节目要预订多少额外的东西。这个可以吗？

下面是代码的数组部分（以及我的测试），但它没有按我的预期工作（而且我不完全理解如何提取数据）

```
session_start();
session_destroy();
$_SESSION[] = array();

$_SESSION[] = array(showID=>1, standID=>s1, extras=>array(x1, x1QT=>2 ,x2, x2QT=>4 ));
$_SESSION[] = array(showID=>2, standID=>s2, extras=>array(x1,x2));

foreach ($_SESSION as $booking) {
    foreach($booking as $showID => $show){
        echo 'Show ID = ' . $show. '<br>';
    }

} 
```

我知道我在这里需要更多代码，但我正在努力弄清楚如何从数组中访问正确的数据，具体到每个节目。我认为构建数组不会有问题，因为执行此操作的代码已经在工作（在上面手动添加，仅用于测试）。

如果有人能指出我正确的方向，我将不胜感激。也完全有可能我根本没有以正确的方式处理这件事，所以请随时告诉我，我应该走的路。（或者我应该将所有数据存储为在提交“conformation”时传递的隐藏表单输入？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T04:02:30.370

您的数组键和值必须用引号引起来 (')

```
$_SESSION[] = array('showID'=>'1', 
                    'standID'=>'s1', 
                    'extras'=>array(
                                    'x1', 
                                    'x1QT'=>'2' ,
                                    'x2', 
                                    'x2QT'=>4 ));

$_SESSION[] = array('showID' => '2', 
                    'standID'=> 's2', 
                    'extras' => array('x1','x2')); 
```

# iphone - 如何停止/使 NStimer 无效

> ID：15170518
> 
> 赞同：9
> 
> 时间：2013-03-02T03:55:14.217
> 
> 标签：iphone, ipad, nstimer

我在用

```
 [NSTimer scheduledTimerWithTimeInterval:0.1f
                                  target:self
                                selector:@selector(update)
                                userInfo:nil
                                 repeats:YES]; 
```

我想停止调用这个计时器。

```
viewDidDisappear 
```

我怎样才能做到这一点？无效？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-02T04:01:33.677

`NSTimer *myTimer`在 .h 文件中声明 。

正如汤姆所说的那样分配实例

```
myTimer = [NSTimer scheduledTimerWithTimeInterval:0.1f
                                     target:self
                                   selector:@selector(update)
                                   userInfo:nil
                                    repeats:YES]; 
```

使用此停止和无效

```
- (void) viewDidDisappear:(BOOL)animated
{
    [myTimer invalidate];
    myTimer = nil;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T04:04:07.107

试试这个

视图控制器.h

```
 NSTimer *timer; 
```

视图控制器.m

```
 timer = [NSTimer scheduledTimerWithTimeInterval:1
                                         target:self
                                       selector:@selector(pollTime)
                                       userInfo:nil
                                        repeats:YES];

  - (void) viewDidDisappear:(BOOL)animated 
    {
      [super viewDidDisappear:animated];
      [timer invalidate];
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T03:56:43.177

是的，您将`- (void)invalidate`使用`NSTimer`.

当然，要做到这一点，您必须将`NSTimer`返回的实例保存`[NSTimer scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:]`到视图控制器的 ivar 或属性中，以便您可以在`viewDidDisappear`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T04:01:16.250

`invalidate`方法`NSTimer`是用于停止计时器

```
- (void) viewDidDisappear:(BOOL)animated 
{
        [super viewDidDisappear:animated];
        [self.timer invalidate];
        self.timer = nil;
} 
```

如果您不是 ARC，请不要忘记`[self.timer release];`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-02T04:02:55.923

要首先停止或使 NSTimer 无效，您必须在全局范围内为 NSTimer 创建实例。

```
 Timer=[NSTimer scheduledTimerWithTimeInterval:0.1f
                                  target:self
                                selector:@selector(update)
                                userInfo:nil
                                 repeats:YES]; 
```

之后像这样尝试，

```
if (Timer != nil) {

            [Timer invalidate];
            Timer = nil;

        } 
```

# c# - C#中通用函数的单元测试

> ID：15170524
> 
> 赞同：0
> 
> 时间：2013-03-02T03:56:10.260
> 
> 标签：c#, unit-testing, generics

似乎是一个热门问题，但我还没有找到答案，所以

简而言之，我有一个需要对其执行的通用功能`unit test`，比如说

> `public void T[] DoSomething<T>(T input1, T input2)`

现在我需要测试这个函数是否适用于 int、ArrayList，在这种情况下我该如何编写单元测试，列出 T 的所有案例不是一个选项，我只想测试 int 和一些类实例？

我也尝试使用来自 VS2012 的自动生成的单元测试，看起来像：

```
public void DoSomethingHelper<T>() {
    T item1 = default(T);; // TODO: Initialize to an appropriate value
    T item2 = default(T); // TODO: Initialize to an appropriate value
    T[] expected = null; // TODO: Initialize to an appropriate value
    T[] actual = SomeClass.DoSomething<T>(item1, item2);
    Assert.AreEqual(expected, actual);
    Assert.Inconclusive("Verify the correctness of this test method.");
}
[TestMethod()]
public void AddTest() {
    AddTestHelper<GenericParameterHelper>();
} 
```

这对我来说更令人困惑，我应该在 DoSomethingHelper 中放入什么来初始化变量？一个int，一个字符串还是什么？

任何人都可以帮忙吗？我听说过 Pex 和其他人，但仍然没有人为我提供这个简单功能的示例单元测试代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T04:24:34.180

*您可能需要检查[NUnit 的 Generic Test Fixtures](http://nunit.com/blogs/?p=62)，以测试多个实现`T`*

首先，考虑以下问题：**为什么要创建泛型函数？**

如果您正在编写一个通用函数/方法，它**不应该**关心它正在使用的类型的实现。我的意思是，不超过您在泛型类中指定的内容（例如。`where T : IComparable<T>, new()`等）

所以，我的建议是创建一个符合泛型要求的虚拟类，并用它进行测试。使用示例`NUnit`：

```
class Sample {
    //code here that will meet the requirements of T
    //(eg. implement IComparable<T>, etc.)
}

[TestFixture]
class Tests {

    [Test]
    public void DoSomething() {
        var sample1 = new Sample();
        var sample2 = new Sample();
        Sample[] result = DoSomething<Sample>(sample1, sample2);

        Assert.AreEqual(2, result.Length);
        Assert.AreEqual(result[0], sample1);
        Assert.AreEqual(result[1], sample2);
    }
} 
```

**编辑：** 想想看，你会发现它有效。你可能会想：“*好吧，但是如果身体`DoSomething`有类似...的东西*怎么办？ ”：

```
if (item1 is int) {
    //do something silly here...
} 
```

当然，当用 测试它时它会失败`int`，而且你不会注意到它，因为你正在用这个`Sample`类进行测试，但是把它想象成你正在测试一个对两个数字求和的函数，你有类似的东西：

```
if (x == 18374) {
    //do something silly here...
} 
```

你也认不出来。

# selenium - 硒单击按钮

> ID：15170526
> 
> 赞同：1
> 
> 时间：2013-03-02T03:56:32.603
> 
> 标签：selenium

我第一次尝试硒，我有一个简单的问题。当我`click()`在 a 上调​​用该方法时`WebElement`，我注意到它是一个`void`类型方法。那么是否`HtmlUnitDriver`保留发生后呈现的更新页面`click()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:58:32.860

从您的问题中我可以看出您正在使用 HtmlUnitDriver。默认情况下，此驱动程序中禁用 JavaScript（有关说明，[请单击此处](https://code.google.com/p/selenium/wiki/HtmlUnitDriver)）。此驱动程序使用 Rhino JavaScript 引擎，未在任何流行的浏览器中使用。这可能解释了为什么您尝试的操作在 Firefox 中运行良好，但在 Selenium 中却不行。

您可以尝试在 HtmlUnit 中启用 JavaScript，如下所示：

```
HtmlUnitDriver driver = new HtmlUnitDriver();
driver.setJavascriptEnabled(true); 
```

**但相反，我建议使用 FirefoxDriver。**

```
WebDriver driver = new FirefoxDriver(); 
```

这应该模拟您在自己浏览网页时看到的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T00:01:12.197

是的。该`WebDriver`界面正在控制浏览器，但是仍然是浏览器（在您的情况下为 HtmlUnit）完成大部分工作并记住页面的状态等。

因此，`WebDriver`这样并没有真正的状态（一个过于简化的陈述，但对于您的目的来说是正确的）。当您发送`click()`命令时，它会在浏览器中执行它，然后等待浏览器完成其工作（加载新页面），然后再次在新页面上等待您的命令。

`WebDriver`始终在浏览器当前拥有的内容上运行。

# asp.net - MVC3 代码首先不创建数据库

> ID：15170530
> 
> 赞同：0
> 
> 时间：2013-03-02T03:57:20.643
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework, entity-framework-4, ef-code-first

我一直在使用 Code First 为 MVC3 做这个电影数据库教程，但是当我尝试访问该`/Movies`页面时，我得到了错误 `"The network path was not found"`。

我不认为我错过了教程中的任何步骤。

我创建了我的电影模型

```
namespace Movies.Models
{
    public class Movie
    {
        public int ID { get; set; }
        public string Title { get; set; }
        public DateTime ReleaseData { get; set; }
        public string Genre { get; set; }
        public Decimal Price { get; set; }
    }

    public class MovieDBContext : DbContext
    {
        public DbSet<Movie> Movies { get; set; }
    }
} 
```

我也添加了连接字符串

```
<add name="MovieDBContext" connectionString="Data Source=|DataDirectory|Movies.sdf" providerName="System.Data.SqlClient"/> 
```

在本教程中，连接字符串是这样的，但它在尝试创建控制器时给了我错误，所以我在某个地方将其更改为上面的那个，这使我可以很好地创建控制器，但随后出现网络路径错误。

```
<add name="MovieDBContext" connectionString="Data Source=|DataDirectory|Movies.sdf" providerName="System.Data.SqlServerCe.4.0"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T13:08:04.027

我想你忘了添加

```
Integrated Security=SSPI 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:52:00.403

你试过了吗？

```
new DbContext("MovieDBContext") 
```

[http://msdn.microsoft.com/en-us/library/gg679467(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/gg679467(v=vs.103).aspx) 您是否尝试发出至少一个*选择 1；*从你的代码？

```
 <system.data>
  <DbProviderFactories>
      <add name="SQL Server Compact Edition Data Provider" 
           invariant="System.Data.SqlServerCe" 
           description=".NET Framework Data Provider for Microsoft SQL Server Compact Edition" 
           type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=9.0.242.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
  </DbProviderFactories> 
```

另请参阅[SQL Server CE 上的实体框架，无需安装驱动程序](https://stackoverflow.com/questions/10300373/entity-framework-on-sql-server-ce-without-driver-install)

# grails - Grails create table List name

> ID：15170540
> 
> 赞同：1
> 
> 时间：2013-03-02T03:58:49.163
> 
> 标签：grails, grails-domain-class

Why i can't create table List to my database?

my domain class :

```
class Test {
   List<String> names
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T04:26:43.077

This is the supported syntax:

```
class Test {
   static hasMany = [names: String]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-22T12:35:11.847

I am using the way exposed in the question and it's working.

```
class Test {
   List<String> names
} 
```

This generates a table called: `test_names` with columns `test_names_id, names_ids, names_ids_idx`.

# javascript - 如何使用 .val() 填充输入字段？

> ID：15170541
> 
> 赞同：1
> 
> 时间：2013-03-02T03:58:56.407
> 
> 标签：javascript, jquery, local-storage

我正在尝试编辑我拥有的列表项，并且我想将父部分的文本设置为带有`.val()`. 我也想从本地存储中删除它，问题是我不知道如何做到这一点，而且它似乎在网上并不流行，因为我在任何地方都找不到它。

这就是我通过输入表单引入数据的方式：

```
function addTodo(form) {
    var input = $(form).find('input[name="todo"]').first();
    if (input) {    
        var todo = input.val();
        if (Modernizr.localstorage) {
            var todo_list = {};
            if (localStorage.todos) {
                todo_list = JSON.parse(localStorage.todos);
            }   
            var id = +new Date;
            todo_list[id] = {
                name: todo,
                completed: false
            };
            localStorage.todos = JSON.stringify(todo_list); 
            drawTodos();
        }   
        input.val('');
    }
    if ( jQuery.fn.validate ) {
        $(form).validate().resetForm();
    }
} 
```

如何选择我添加的列表项，以便它最终回到输入字段中以便我可以编辑它？

```
<section>
            <h1>List</h1>
        </section>
        <section id="todo_list">
            <header>
                <form>
                    <input type="text" name="todo" placeholder="What do you need to do?" />
                    <input type="submit" name="add_todo" value="Add To List" />
                </form>
            </header>
        </section> 
```

我在 jquery 的循环中生成了一些 html：

```
<section class="todo_item" id="item' + id + '"><span id="complete" class="colour complete">Complete</span><span id="incomplete" class="colour incomplete">Incomplete</span><span class="content editable" id="done">' + todo.name + '</span><a href="#" class="remove_todo"><img src="img/delete.png" /></a></section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T05:02:41.920

为什么不将处理程序附加到具有`editable`类的跨度？

像这样的东西：

```
$(document).ready(function () {
    $(".content.editable").click(function () {
        $("input[name='todo']").val($(this).text());
    });
}); 
```

请注意，ID 必须是唯一的。将相同的 ID 分配给多个部分是错误的：“完成”、“不完整”、“完成”。

# ios - 在 ios 4 中更改徽章图标图像？[关闭]

> ID：15170542
> 
> 赞同：-2
> 
> 时间：2013-03-02T03:59:02.710
> 
> 标签：ios, objective-c, apple-push-notifications

**问题**

如何更改 ios4 中的徽章图标图像？我希望它看起来像这样：

![徽章图标图像](../Images/057d802f2df106628df28232715d9457.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T04:00:10.503

你不能。iOS 将新功能区放在那里。开发人员无法控制。

# c# - ListBox 项来自在其他类中声明的字符串可能吗？

> ID：15170544
> 
> 赞同：0
> 
> 时间：2013-03-02T03:59:24.600
> 
> 标签：c#, icsharpcode

与此主题相关： [https ://stackoverflow.com/questions/15170054/context-hint-using-combobox](https://stackoverflow.com/questions/15170054/context-hint-using-combobox)

有没有办法可以在我的单独类中使用字符串：

```
namespace KeyWord
{
    public class KeyWord
    {
        //Definitions
    public String[] keywords = { "abstract", "as", "etc." };
    }
} 
```

到我的主窗体中的 mylistbox 项目？

```
lb = new ListBox();
        Controls.Add(lb); 
```

提前ty

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T04:02:08.137

当然。尝试这样的事情。

```
KeyWord kw = new KeyWord();
foreach (string str in kw.keywords)
{
    lb.Items.Add(str);
} 
```

或者您可以使用数据绑定。

此外，如果您所做的只是从该类中获取字符串数组，您可能需要使用静态属性，这样您就不必实例化该对象的实例。我建议以任何一种方式使用属性来公开公共数据，而不是使用公共字段。

这是一个使用静态属性的示例，而不是：

```
public class KeyWord
{
    // Private field, only accessible within this class
    private static string[] _keywords = { "abstract", "as", "etc." };

    // Public Static Property, accessible wherever
    public static string[] Keywords
    {
        get { return _keywords; }
        set { _keywords = value; }
    }
} 
```

然后：

```
foreach (string str in KeyWord.Keywords)
{
    lb.Items.Add(str);
} 
```

注意，我没有在这个例子中实例化类（否`new KeyWords()`）

# c++ - WinNt.h 编译错误

> ID：15170546
> 
> 赞同：0
> 
> 时间：2013-03-02T03:59:45.347
> 
> 标签：c++, eclipse, winsock2

我在 Eclipse 中有一个新的 C++ 项目。我必须手动添加所有包含路径，而且我一定搞砸了。这是我的代码：

```
#include <winsock2.h>
int main() {
    return 0;
} 
```

我可以在 Visual Studio 中编译相同的代码没问题，但是在 Eclipse 中我得到了很多各种各样的编译器错误。我忘了包括一些东西吗？还是我包含的太多？有任何想法吗？

我也确实包含了 WS2_32 库。

我在使用 msvc 2010 编译器的 Windows 8 x64 上。

我搜索了很长一段时间，但所有答案都是关于在包含 windows.h 之前包含 winsock，但我根本不包含 windows.h。另外，这个完全相同的代码在 MSVC 中可以正确编译；因此，我在 Eclipse 中设置错误。

冒着被 tl;dr'ed 的风险，这里是吐：

```
C:\Program Files (x86)\Windows Kits\8.0\Include\um\winnt.h(1243) : error C2065: 'SAL_sameIRQL' : undeclared identifier
C:\Program Files (x86)\Windows Kits\8.0\Include\um\winnt.h(1246) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
C:\Program Files (x86)\Windows Kits\8.0\Include\um\winnt.h(1246) : error C2513: 'int' : no variable declared before '='
C:\Program Files (x86)\Windows Kits\8.0\Include\um\winnt.h(1246) : error C2146: syntax error : missing ';' before identifier 'EXCEPTION_DISPOSITION'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\winnt.h(1246) : error C2143: syntax error : missing ';' before '__stdcall'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\winnt.h(1246) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
C:\Program Files (x86)\Windows Kits\8.0\Include\um\winnt.h(1246) : error C2377: 'EXCEPTION_DISPOSITION' : redefinition; typedef cannot be overloaded with any other symbol
    C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\excpt.h(40) : see declaration of 'EXCEPTION_DISPOSITION'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\winnt.h(1252) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
C:\Program Files (x86)\Windows Kits\8.0\Include\um\winnt.h(1254) : error C2143: syntax error : missing ';' before '*'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\winnt.h(1254) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
C:\Program Files (x86)\Windows Kits\8.0\Include\um\winnt.h(1254) : error C2365: 'EXCEPTION_ROUTINE' : redefinition; previous definition was 'function'
    C:\Program Files (x86)\Windows Kits\8.0\Include\um\winnt.h(1247) : see declaration of 'EXCEPTION_ROUTINE'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\winnt.h(1254) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
C:\Program Files (x86)\Windows Kits\8.0\Include\um\winnt.h(10749) : error C2146: syntax error : missing ';' before identifier 'Handler'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\winnt.h(10749) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
C:\Program Files (x86)\Windows Kits\8.0\Include\um\winnt.h(10749) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
C:\Program Files (x86)\Windows Kits\8.0\Include\um\winnt.h(16638) : error C2144: syntax error : 'PSLIST_ENTRY' should be preceded by ','
C:\Program Files (x86)\Windows Kits\8.0\Include\um\winnt.h(16646) : error C2144: syntax error : 'PSLIST_ENTRY' should be preceded by ','
C:\Program Files (x86)\Windows Kits\8.0\Include\um\heapapi.h(124) : error C2061: syntax error : identifier '_SA_annotes1'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\heapapi.h(125) : error C2059: syntax error : ')'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\heapapi.h(125) : error C2143: syntax error : missing ')' before ';'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\processthreadsapi.h(204) : error C2144: syntax error : 'LPVOID' should be preceded by ','
C:\Program Files (x86)\Windows Kits\8.0\Include\um\sysinfoapi.h(189) : error C2065: 'SAL_preferredFunction' : undeclared identifier
C:\Program Files (x86)\Windows Kits\8.0\Include\um\sysinfoapi.h(192) : error C2448: '_SA_annotes2' : function-style initializer appears to be a function definition
C:\Program Files (x86)\Windows Kits\8.0\Include\um\sysinfoapi.h(192) : error C2143: syntax error : missing ';' before '__stdcall'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\sysinfoapi.h(351) : error C2065: 'COMPUTER_NAME_FORMAT' : undeclared identifier
C:\Program Files (x86)\Windows Kits\8.0\Include\um\sysinfoapi.h(351) : error C2146: syntax error : missing ')' before identifier 'NameType'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\sysinfoapi.h(351) : warning C4229: anachronism used : modifiers on data are ignored
C:\Program Files (x86)\Windows Kits\8.0\Include\um\sysinfoapi.h(351) : error C2491: 'GetComputerNameExA' : definition of dllimport data not allowed
C:\Program Files (x86)\Windows Kits\8.0\Include\um\sysinfoapi.h(354) : error C2059: syntax error : ')'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\sysinfoapi.h(361) : error C2065: 'COMPUTER_NAME_FORMAT' : undeclared identifier
C:\Program Files (x86)\Windows Kits\8.0\Include\um\sysinfoapi.h(361) : error C2146: syntax error : missing ')' before identifier 'NameType'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\sysinfoapi.h(361) : warning C4229: anachronism used : modifiers on data are ignored
C:\Program Files (x86)\Windows Kits\8.0\Include\um\sysinfoapi.h(361) : error C2491: 'GetComputerNameExW' : definition of dllimport data not allowed
C:\Program Files (x86)\Windows Kits\8.0\Include\um\sysinfoapi.h(364) : error C2059: syntax error : ')'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\sysinfoapi.h(383) : error C2065: 'COMPUTER_NAME_FORMAT' : undeclared identifier
C:\Program Files (x86)\Windows Kits\8.0\Include\um\sysinfoapi.h(383) : error C2146: syntax error : missing ')' before identifier 'NameType'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\sysinfoapi.h(383) : warning C4229: anachronism used : modifiers on data are ignored
C:\Program Files (x86)\Windows Kits\8.0\Include\um\sysinfoapi.h(383) : error C2491: 'SetComputerNameExW' : definition of dllimport data not allowed
C:\Program Files (x86)\Windows Kits\8.0\Include\um\sysinfoapi.h(385) : error C2059: syntax error : ')'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\memoryapi.h(429) : error C2065: 'MEMORY_RESOURCE_NOTIFICATION_TYPE' : undeclared identifier
C:\Program Files (x86)\Windows Kits\8.0\Include\um\memoryapi.h(430) : error C2146: syntax error : missing ')' before identifier 'NotificationType'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\memoryapi.h(430) : warning C4229: anachronism used : modifiers on data are ignored
C:\Program Files (x86)\Windows Kits\8.0\Include\um\memoryapi.h(430) : error C2491: 'CreateMemoryResourceNotification' : definition of dllimport data not allowed
C:\Program Files (x86)\Windows Kits\8.0\Include\um\memoryapi.h(430) : error C2059: syntax error : ')'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\memoryapi.h(536) : error C2061: syntax error : identifier 'PWIN32_MEMORY_RANGE_ENTRY'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\threadpoolapiset.h(341) : error C2061: syntax error : identifier 'PTP_WIN32_IO_CALLBACK'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\bemapiset.h(54) : error C2061: syntax error : identifier 'BEM_FREE_INTERFACE_CALLBACK'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\bemapiset.h(64) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
C:\Program Files (x86)\Windows Kits\8.0\Include\um\bemapiset.h(64) : error C2143: syntax error : missing ',' before '*'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\bemapiset.h(73) : error C2065: 'BEM_REFERENCE' : undeclared identifier
C:\Program Files (x86)\Windows Kits\8.0\Include\um\bemapiset.h(73) : error C2065: 'reference' : undeclared identifier
C:\Program Files (x86)\Windows Kits\8.0\Include\um\bemapiset.h(74) : error C2065: 'BEM_REFERENCE' : undeclared identifier
C:\Program Files (x86)\Windows Kits\8.0\Include\um\bemapiset.h(75) : error C2065: 'copiedReference' : undeclared identifier
C:\Program Files (x86)\Windows Kits\8.0\Include\um\bemapiset.h(75) : warning C4229: anachronism used : modifiers on data are ignored
C:\Program Files (x86)\Windows Kits\8.0\Include\um\bemapiset.h(75) : error C2078: too many initializers
C:\Program Files (x86)\Windows Kits\8.0\Include\um\bemapiset.h(81) : error C2065: 'BEM_REFERENCE' : undeclared identifier
C:\Program Files (x86)\Windows Kits\8.0\Include\um\bemapiset.h(82) : error C2065: 'reference' : undeclared identifier
C:\Program Files (x86)\Windows Kits\8.0\Include\um\bemapiset.h(82) : warning C4229: anachronism used : modifiers on data are ignored
C:\Program Files (x86)\Windows Kits\8.0\Include\um\bemapiset.h(82) : error C2182: 'BemFreeReference' : illegal use of type 'void'
C:\Program Files (x86)\Windows Kits\8.0\Include\um\bemapiset.h(82) : fatal error C1903: unable to recover from previous error(s); stopping compilation 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-31T12:05:15.630

如果可能，请尝试使用 7.1 或 7.0 SDK 而不是 8.0/8.1。我们在使用 8.0 SDK 时遇到了类似的问题。

# python - 将 url 作为参数传递

> ID：15170547
> 
> 赞同：2
> 
> 时间：2013-03-02T03:59:59.297
> 
> 标签：python, command-line-arguments

每当我尝试如下运行脚本时，都会得到以下结果。代码有什么问题？

1.`python test.py`

不打印使用情况。

2.`python test.py http://link.com/index.php?title=tesst&action=raw`

印刷： `"'action' is not recognized as an internal or external command, operable program or batch file."`

我的脚本：

```
# Version YYYYMMDD
version = "20121112"

# File type to be output to logs
# Should be changed to exe before building the exe.
fileType = "py"

# Import sys to read command line arguments
import sys, getopt
#import pdb
#pdb.set_trace()

import argparse

def update (url):
    req = urllib2.Request(url=url)
    try:
        f = urllib2.urlopen(req)
        txt = f.read()
        f.close()
    except urllib2.HTTPError, e:
        txt = ''
        print 'An error occured connecting to the wiki. No wiki page will be generated.'
        return '<font color=\"red\">QWiki</font>'
    # Find the start tag of the textarea with Regular Expressions
    p = re.compile('<textarea[^>]*>')
    m = p.search(txt)
    (tagStart, tagEnd) = m.span()
    # Find the end of the textarea
    endTag = txt.index("</textarea>")

def main ():
    #For logging
    print "test"
    parser = argparse.ArgumentParser(description='This is the update.py script created by test')
    parser.add_argument('-u','--ur',action='store',dest='url',default=None,help='<Required> url link',required=True)
    results = parser.parse_args()# collect cmd line args
    url = results.url
    print url
    update(url) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T04:01:19.640

将 URL 用引号括起来：

```
python test.py "http://link.com/index.php?title=tesst&action=raw" 
```

令人`&`困惑的命令提示符。

# list - XMPP MUC 如何列出用户所属的房间

> ID：15170550
> 
> 赞同：1
> 
> 时间：2013-03-02T04:00:44.253
> 
> 标签：list, xmpp, affiliate

就聊天而言，我正在制作一个类似whatsapp的客户端。我需要用用户所属的所有房间填充“提要”区域。我找不到任何如何做到这一点。

这可以得到所有房间：

```
 <iq from='hag66@shakespeare.lit/pda'
     to='conference.someplace.com'
     type='get'>
     <query xmlns='http://jabber.org/protocol/disco#items'/>
     </iq> 
```

我只需要获取用户所属的房间。

谢谢。

# python - Punnett Square 函数：匹配列表中的项目

> ID：15170551
> 
> 赞同：1
> 
> 时间：2013-03-02T04:00:47.700
> 
> 标签：python, list, function

我想找到特定十字架的所有可能配子。

例如：`'AABB'`x`'aabb'`将被拆分为`['AA', 'BB']`和`['aa', 'bb']`。我已经完成了那部分。在此之后，它应该返回：（ `[['Aa', 'Aa', 'Aa', 'Aa'], ['Bb', 'Bb', 'Bb', 'Bb']]`对于父“A”中的每个等位基因，它与父“B”中的一个等位基因匹配；这是一个简化的 Punnett Square）。

这是我到目前为止所拥有的：

```
def punnett(a, b):
    n = int(len(a)/2)
    x = int(float(len(a)) / n)
    partsA, partsB, gametes = [a[i * x : i * x + x] for i in range(n)], [b[i * x : i * x + x] for i in range(n)], []
    for y in range(1, n):
        g = []
        for index in range(0, n/2 + y):
            for i in partsA[index]:
                for j in partsB[index]:
                    g.append(i+j)
        gametes.append(g)
    return gametes 
```

但是，它并没有达到我的预期：

```
>>> punnett('AaBb', 'AaBb')
[['AA', 'Aa', 'aA', 'aa', 'BB', 'Bb', 'bB', 'bb']] 
```

此外，三杂交也没有给出我预期的结果：

```
>>> punnett('AaBbCc', 'AaBbCc')
[['AA', 'Aa', 'aA', 'aa', 'BB', 'Bb', 'bB', 'bb'], ['AA', 'Aa', 'aA', 'aa', 'BB', 'Bb', 'bB', 'bb', 'CC', 'Cc', 'cC', 'cc']] 
```

如果我能得到关于我做错了什么以及如何改进它的意见，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T04:21:37.887

好的，我刚刚阅读了一些关于您可能想要实现的材料，以下是更改

```
>>> from itertools import product, izip 
```

如果我理解正确，等位基因是忽略大小写的连续字符。在“AaBb”的情况下，它的 ['Aa' 和 'Bb']

```
>>> def allele(e):
    return [list(v) for _, v in groupby(e, key = str.lower)] 
```

交叉定义为材料和亲本之间所有可能的等位基因交叉

然后从交叉中选择新的基因组

```
>>> def punnett(a, b):
    return [''.join(e)
        for e in product(*([''.join(e) for e in product(*e)]
                    for e in izip(allele(a), allele(b))))]

>>> punnett('AaBbCc', 'AaBbCc')
['AABBCC', 'AABBCc', 'AABBcC', 'AABBcc', 'AABbCC', 'AABbCc', 'AABbcC', 'AABbcc', 'AAbBCC', 'AAbBCc', 'AAbBcC', 'AAbBcc', 'AAbbCC', 'AAbbCc', 'AAbbcC', 'AAbbcc', 'AaBBCC', 'AaBBCc', 'AaBBcC', 'AaBBcc', 'AaBbCC', 'AaBbCc', 'AaBbcC', 'AaBbcc', 'AabBCC', 'AabBCc', 'AabBcC', 'AabBcc', 'AabbCC', 'AabbCc', 'AabbcC', 'Aabbcc', 'aABBCC', 'aABBCc', 'aABBcC', 'aABBcc', 'aABbCC', 'aABbCc', 'aABbcC', 'aABbcc', 'aAbBCC', 'aAbBCc', 'aAbBcC', 'aAbBcc', 'aAbbCC', 'aAbbCc', 'aAbbcC', 'aAbbcc', 'aaBBCC', 'aaBBCc', 'aaBBcC', 'aaBBcc', 'aaBbCC', 'aaBbCc', 'aaBbcC', 'aaBbcc', 'aabBCC', 'aabBCc', 'aabBcC', 'aabBcc', 'aabbCC', 'aabbCc', 'aabbcC', 'aabbcc']
>>> punnett('AaBb', 'AaBb')
['AABB', 'AABb', 'AAbB', 'AAbb', 'AaBB', 'AaBb', 'AabB', 'Aabb', 'aABB', 'aABb', 'aAbB', 'aAbb', 'aaBB', 'aaBb', 'aabB', 'aabb']
>>> 
```

# java - Java：围绕不同点旋转图像

> ID：15170559
> 
> 赞同：1
> 
> 时间：2013-03-02T04:01:42.143
> 
> 标签：java, rotation, center, point, slick2d

我对编程很陌生，我正在尝试制作一个小游戏，您可以在其中独立控制（旋转）坦克和坦克顶部的不同枪支。（我用的是光滑的）

在坦克旋转期间，枪应该围绕坦克图像的中心旋转，因为它们是连接的。

```
public void drawTankandGuns(){
  tankImage.draw(position.x, position.y);
  gunImage.draw(position.x+canonOffsetX, position.y+canonOffsetY);
}

public void rotateDuringMovement(){
  gunImage.setCenterOfRotation(tankImage.getWidth/2-gunOffsetX,
    tankImage.getHeight/2-gunOffsetY);

  gunImage.rotate(angle);
  tankImage.rotate(angle);
} 
```

到目前为止效果很好。枪连接并与坦克一起旋转。但是如果我想在没有坦克的情况下旋转枪（并且坦克已经旋转）并将旋转中心设置回枪，枪图像被拉回到其原始位置，失去了围绕坦克旋转的位置.. .

编辑：解决方案是使用不同的方法。绘制 gunImage 取决于 tankImage 旋转的 sin/cos。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:28:33.207

解决方案是使用不同的方法。绘制 gunImage 取决于 tankImage 旋转的 sin/cos。

```
//calculate the gun position on top of the tank
gunPosX = tankPosX + gunPosOffsetX;
gunPosY = tankPosY + gunPosOffsetY;

//calculate the tank rotation center
tankRotationsCenterX = tankPosX + tankImage.getCenterOfRotationX();
tankRotationsCenterY = tankPosY + tankImage.getCenterOfRotationY();

//calculate distance between gun position and tank rotation center
dx = tankRotationsCenterX - gunPosX ;
dy = tankRotationsCenterY - gunPosY ;
dis = Math.sqrt(dx * dx + dy * dy);

//calculate the offset based on the rotation of the tank
//rotation offset for the gun placement
gunRotaOff = 20;

gunX_offset = dis*Math.cos(Math.toRadians(tankImage.getRotation()+gunRotaOff));
gunY_offset = dis*Math.sin(Math.toRadians(tankImage.getRotation()+gunRotaOff));

gunXhalf = gun.getImage().getWidth() / 2;
gunYhalf = gun.getImage().getHeight() / 2;

//draws the gun dependend on the ship position and the ship rotation
//don't forget to subtract half the width/height for exact positioning
gun.drawIngame(tankRotationsCenterX - gun_x_offset)-gunXhalf , (tankRotationsCenterY - gun_y_offset) - gunYhalf )); 
```

# ajax - 使用隐藏做ajax上传文件时如何检测iframe接收响应

> ID：15170562
> 
> 赞同：2
> 
> 时间：2013-03-02T04:02:09.060
> 
> 标签：ajax, iframe, upload

我使用隐藏的 iframe 执行 ajax 上传文件工作，如下所示：

[http://www.alfajango.com/blog/ajax-file-uploads-with-the-if​​rame-method/](http://www.alfajango.com/blog/ajax-file-uploads-with-the-iframe-method/)

```
<form target="upload-frame" method="post" action="/upload" enctype="multipart/form-data">
    <input type="file" name="file">
    <input type="submit" value="upload">
</form>
<iframe name="upload-frame" src=""></iframe> 
```

问题是，当上传成功时，iframe 收到响应并刷新，

我怎么知道它刷新了？是否有任何事件可以收听 iframe 内容更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T04:26:55.750

1）解决这个问题的一种方法是让服务器在文件成功上传后发送响应（假设 PHP）：

```
echo '<script>parent.document.getElementById("feedback").innerHTML = "Success";</script>'; 
```

这只会将成功消息注入 iFrame 父级的 #feedback 容器。

2) 另一种方法是侦听 iFrame 的加载/加载事件并为其附加一个事件处理程序，该事件处理程序将读取 iFrame 的主体。这是该方法的一个示例：http: [//viralpatel.net/blogs/ajax-style-file-uploading-using-hidden-iframe/](http://viralpatel.net/blogs/ajax-style-file-uploading-using-hidden-iframe/)

希望有帮助！

# ios - 在标准输出上使用读取命令

> ID：15170570
> 
> 赞同：0
> 
> 时间：2013-03-02T04:03:04.680
> 
> 标签：ios, bash

`sbalert`iOS 上有一个命令行实用程序，更具体地说是来自该包的调用 sbutils 。

它像这样工作

```
Sbalert -t "title" -d "text" -p 
```

`-p`使它要求输入，但是一旦通过，它显示输入的方式是`stdout`.

我不能将`read`命令与它一起使用，因为我需要在提示中输入的内容才能在命令中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T04:07:58.923

你有没有尝试过这样的事情？

```
VAR=$(Sbalert -t "title" -d "text" -p)
echo $VAR 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-23T21:50:02.323

```
password = your - password - here;
if ["$(sbalert -p -t "
    Admin Zone " -m "
    Please enter your password ")" == "$password"
];
then activator send libactivator.menu.bunch_of_letters;
fi 
```

我将如何屏蔽输入

有时密码不起作用，您需要尝试几次，我不介意

# objective-c - 如何获取通过 initWithCoder 中的故事板添加的自定义 UIView 的尺寸：？

> ID：15170573
> 
> 赞同：15
> 
> 时间：2013-03-02T04:03:27.407
> 
> 标签：objective-c, uiview, uistoryboard

我有一个自定义 UIView 子类，它在初始化期间以编程方式添加子视图。我希望这个子视图与自定义 UIView 的宽度相同。

如果我以*编程*方式添加自定义 UIView，我的代码可以*正常工作。*但是，当 UIView 通过*StoryBoard*初始化时，我无法获得自定义 UIView 的宽度。

 **```
// Init programatically
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        NSLog (@"view: %f", self.frame.size.width);   //WILL return width
        NSLog (@"view: %f", self.bounds.size.width);  //WILL return width
    }
    return self;
}

// Init from storyboard
- (id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];
    if (self) {

        NSLog (@"view: %f", self.frame.size.width);   //Returns 0
        NSLog (@"view: %f", self.bounds.size.width);  //Returns 0
    }
    return self;
} 
```

当 initWithCoder: 由 StoryBoard 运行时，UIView 的框架和边界都返回为 0。有没有办法*在*initWithCoder 中访问 UIView 的尺寸？或者，至少在调用 drawRect:*之前访问尺寸？*

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-02T09:21:29.387

与其在 init 函数中设置子视图尺寸，不如在自定义视图的 layoutSubviews 方法中相对于自定义视图进行设置。在这里这样做意味着子视图的宽度也将始终更改以匹配自定义视图的宽度，即使您在初始化后的任何时候更改自定义视图的尺寸也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T04:11:57.417

您可以重复使用您的标准`initWithFrame`呼叫。

```
- (id)initWithCoder:(NSCoder *)aDecoder 
{
    self = [super initWithCoder:aDecoder];
    if (self) {

        [self initWithFrame:[self frame]];

        NSLog (@"view: %f", self.frame.size.width);   
        NSLog (@"view: %f", self.bounds.size.width); 
    }
    return self;
} 
```**

# ruby-on-rails-3 - Rails：使用表单将记录添加到具有 belongs_to 关联的模型

> ID：15170575
> 
> 赞同：0
> 
> 时间：2013-03-02T04:04:01.207
> 
> 标签：ruby-on-rails-3, forms, model-associations

我可以在我的视图 result.html.erb 中访问@result。@result 是一个电影对象。我想通过表单为这个@result 对象创建评论。我将评论框（表单）放在 result.html.erb 中。

我是表单语法的新手。我也对提交后将表单本身指向何处感到困惑。我是否需要为带有创建操作的评论一起创建一个新控制器？

我不确定如何创建此表单以便将其保存到 @result.comments.last

任何帮助将不胜感激！发布的是我的模型和控制器。

```
class Movie < ActiveRecord::Base
  attr_accessible :mpaa_rating, :poster, :runtime, :synopsis, :title, :year

  has_many :comments

end

class Comment < ActiveRecord::Base
  attr_accessible :critic, :date, :publication, :text, :url

  belongs_to :movie
end

class PagesController < ApplicationController

  def index
  end

  def search
    session[:search] = params[:q].to_s
    redirect_to result_path
  end

  def result
    search_query = search_for_movie(session[:search])
    if !search_query.nil? && Movie.find_by_title(search_query[0].name).nil?
      save_movie(search_query) 
      save_reviews(search_query)
    end
    @result ||= Movie.find_by_title(search_query[0].name)
  end
end 
```

结果.html.erb

我曾经使用 simple_form gem，因为我认为它会更好，但我认为我的用例足够简单，只需使用标准的 rails 表单助手即可。如果我错了，请纠正我。这是我到目前为止写的：

```
<%= simple_form_for @result do |f| %>
  <%= f.input :text %>
  <%= f.input :critic %>
  <%= f.button :submit %>
<% end %> 
```

我收到错误：

```
undefined method `movie_path' for #<#<Class:0x000001013f4358>:0x00000102d83ad0> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:43:54.593

我最终向页面控制器添加了一个#create 操作，并将表单放在我的视图中：

```
 <%= form_for @comment, :url => { :action => "create" } do |f| %>
          <div class="field">
            <%= f.text_area :text, placeholder: "Compose new review..." %>
                <%= hidden_field_tag 'critic', "#{current_user.name}"  %>
                <%= hidden_field_tag 'date', "#{Time.now.strftime("%m/%d/%Y")}"  %>
          </div>
          <%= f.submit "Post", class: "btn btn-large btn-primary" %>
        <% end %> 
```

在控制器 Pages 控制器中

```
 def create
    search_query = search_for_movie(session[:search])
    @movie = Movie.find_by_title(search_query[0].name)
    @comment = @movie.comments.create(text: params[:comment][:text], critic: params[:critic], date: params[:date])
    if @comment.save
      flash[:success] = "Review added!"
      redirect_to result_path
    else
      redirect_to result_path
    end
  end 
```

# phpfox - 具有多个连接的 Phpfox 查询

> ID：15170576
> 
> 赞同：0
> 
> 时间：2013-03-02T04:04:02.363
> 
> 标签：phpfox

这是我的查询：

```
 $aThreads = $this->database()->select('mf.parent_id,mf.forum_id,ff.user_id as favourite_id,ff.is_favourite,mf.name,ft.*,'.Phpfox::getUserField('u2','last_').'') 
                              ->from($this->_sTable, 'ft')
                              ->Join(Phpfox::getT('forum'), 'mf', 'mf.forum_id = ft.forum_id')
                              ->leftJoin(Phpfox::getT('user'),'u2', 'u2.user_id = ft.user_id')
                              ->leftJoin(Phpfox::getT('forum_favourite'), 'ff', 'u2.user_id = ff.user_id AND ft.thread_id = ff.thread_id')
                              ->where($mConditions)
                              ->execute('getSlaveRows'); 
```

我必须从`forum_favourite`表中选择两列值。

`forum_favourite`表中的列`(thread_id,user_id,is_favourite)`。由此，我需要选择`user_id and is_favourite`.

我怎样才能做到这一点？

# javascript - 在自己的行上正确使用数组函数的术语

> ID：15170584
> 
> 赞同：3
> 
> 时间：2013-03-02T04:05:13.713
> 
> 标签：javascript, terminology

我很难为以下函数找到合适的术语：

```
var array = [1, 2, 3];

array.pop();

return array; // returns [1, 2]; 
```

和：

```
var array = [1, 2, 3].pop();

return array; // returns 3 
```

我个人只是将第一个示例称为“间接”，因为您间接触发了数组上的函数并对其进行了修改。

我称之为第二个例子，你猜对了，“直接”，因为你直接将函数链接到数组。

听起来有点傻，我知道。

但是，我对这些特定代码的实际术语非常感兴趣，如果有的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T05:58:27.023

在第二种情况下，您正在执行以下操作：

```
[1,2,3].pop(); 
```

在第一种情况下，您正在执行以下操作：

```
var array = [1, 2, 3];
array.pop(); 
```

这简称为变量赋值。

在您的问题中造成一些混乱的是，在第二个示例中，您将值 3 分配给一个名为“array”的变量，它实际上应该被称为其他东西。

# c - C 字符串数组 strtok()

> ID：15170585
> 
> 赞同：0
> 
> 时间：2013-03-02T04:05:40.800
> 
> 标签：c, string, pointers, strtok

嗨，我对 C 语言很陌生，整个带有字符的指针事情让我非常困惑。我最难做一些非常简单的事情。

我想用分隔符 "?=&" 分解一个字符串（请求），并且我想将不同的部分存储在一个字符串数组中，但我似乎无法弄清楚如何。我之所以喜欢它，是因为我没有完全掌握指针的概念。

这是我的代码

```
 char buf[1024], path[1024], request[1024], **query_string, *query_pointer;

        query_pointer = strtok(request, "?=&");
        strcpy(request, query_pointer);
        while(query_pointer != NULL) {
            strcpy(query_string, query_pointer);
            query_string++;
            query_pointer = strtok(NULL, "?=&");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T04:16:31.663

一个非常基本的起始示例。

```
char **foo( char **result, char *str, const char *delim)
{
    char *p=strtok(str, delim);
    int i;
    for(i=0;  p!=NULL; p=strtok(NULL, delim)
          result[i]=p;
    result[i]=NULL;
    return result;
}

void bar(char *str)
{
   char *result[36]={NULL};  // 35 max tokens
   int i=0;
   result=foo(result, str, "?=&");
   for(i=0; result[i]!=NULL && < 35; i++)
   {
        printf("%s\n", result[i]);        
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:06:08.780

```
 strcpy(request, query_pointer); 
```

我不确定您是否真的想将第一个令牌复制回请求中，或者这是一个意外。

您的其余代码似乎很好，除了：您从未向我们展示如何将内存分配给字符串数组（query_string）。

请记住，在 C 中，没有字符串数组这样的东西。它实际上是一个字符数组的数组，因为字符串只是一个字符数组。

所以你想要做的是通过以下方式分配内存：

```
char **query_string = malloc(<max#oftokens> * sizeof(char*)); 
for (i=0; i<(max#oftokens); i++){
     query_string[i] = malloc(<maxlengthofeachtokens> * sizeof(char)); 
} 
```

另外，请记住在完成后使用 free() 函数释放内存。查找 malloc() 和 free() 的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T05:04:04.237

我发现学习 C 指针最有用的技术是花时间在纸上实际绘制内存位置，并标记所有间接。即使在今天，我也会在脑海中重新创建这些图像，以解释比日常使用更复杂的结构。

你在任何书中读到的任何东西都无法与之相比。

# jquery - jQuery 验证动态月份和日期输入

> ID：15170591
> 
> 赞同：0
> 
> 时间：2013-03-02T04:06:52.860
> 
> 标签：jquery, jquery-validate

我在使用 jQuery 验证来验证动态生成的月份和日期输入时遇到了麻烦。基本上，我想确保某些月份不能超过 30 天，而 2 月不能超过 29 天。当月份和日期输入固定时，我的方法效果很好。我很感激任何建议。这是一个[演示](http://jsfiddle.net/godhong/322f2/)。

### HTML

```
<form method="post" id="form1" action=index.html>
    <table class="tab tab_Application" border="0">
        <tr>
            <th>
                <label for="id_noa">Number of Applications:</label>
            </th>
            <td>
                <select name="noa" id="id_noa">
                    <option value="">Make a selection</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>
            </td>
        </tr>
        <tr id='noa_header' style="display:none">
            <th>App#</th>
            <th>Month</th>
            <th>Day</th>
            <th>Mass Applied (kg/hA)</th>
            <th>Slow Release (1/day)</th>
        </tr>
    </table>
    <tr>
        <input type="submit" />
    </tr>
</form> 
```

### JS

```
$(document).ready(function () {

    $('#form1').validate({ // initialize the plugin
        submitHandler: function (form) {
            alert('valid form submitted');
            return false;
        },
        rules: {
            noa: "required"
        }
    });

    var i = 1
    $('#id_noa').change(function () {
        var total = $(this).val()
        $('#noa_header').show()
        while (i <= total) {
            $('.tab_Application').append('<tr class="tab_noa1"><td><input type="text" size="5" value="' + i + '"/></td><td><input type="text" size="5" name="mm' + i + '" id="id_mm' + i + '""/></td><td><input type="text" size="5" name="dd' + i + '" id="id_dd' + i + '""/></td><td><input type="text" size="5" name="ma' + i + '" id="id_ma' + i + '""/></td><td><input type="text" size="5" name="sr' + i + '" id="id_sr' + i + '" value="0""/></td></tr>');
            i = i + 1;
        }
        while (i - 1 > total) {
            $(".tab_Application tr:last").remove();
            i = i - 1
        }

        $('</table>').appendTo('.tab_Application');

        $('[name*="mm"]').each(function () {
            $(this).rules('add', {
                required: true,
                monthCheck: true
            });
        });

        $('[name*="dd"]').each(function () {
            $(this).rules('add', {
                required: true,
                dayCheck: true
            });
        });

    });

    ////define validation functions    

    $.validator.addMethod(
        "monthCheck",

    function (value) {
        return mmCheck(value);
    },
        "Please enter a right month");

    $.validator.addMethod(
        "dayCheck",

    function (value, element) {
        return ddCheck(value, element);
    },
        "Please enter a right day");

    function mmCheck(value) {
        var mmValue = value;
        if (mmValue < 1 || mmValue > 12) return false;
        return true;
    }

    function ddCheck(value, element) {
        var mmValue1 = $(element).closest("tr").find('input').val();
        var ddValue1 = value;
        if (ddValue1 < 1 || ddValue1 > 31) return false;
        else if (mmValue1 === 2 && ddValue1 > 29) return false;
        else if ((mmValue1 === 4 || mmValue === 6 || mmValue1 === 9 || mmValue1 === 11) && (ddValue1 > 30)) return false;
        return true;
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T04:35:01.227

我在您的 jsFiddle 中修复了三个问题。

[http://jsfiddle.net/vMW37/11/](http://jsfiddle.net/vMW37/11/)

`input`1) 删除了克隆字段中多余的重复引号。

2）`name`为您的第一个字段添加了一个属性`input`。即使它没有经过验证，它仍然必须包含一个`name`属性。

3) 此行中的语法错误，请注意`mmValue === 6`缺少`1`...

```
else if ((mmValue1 === 4 || mmValue === 6 || mmValue1 === 9 || mmValue1 === 11) && (value > 30)) 
```

**注意事项**：

此行不正确，因此任何后续逻辑使用`mmValue1`都会意外失败。

```
var mmValue1 = $(element).closest("tr").find('input').val(); 
```

试试这个：

```
var mmValue1 = $(element).parent().prev('td').children('input').val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T04:26:44.423

我不确定这是否正是您所要求的，但[这里有一个指向](https://stackoverflow.com/questions/6800253/check-date-in-javascript)不同 stackoverflow 帖子的链接，该帖子解释了如何在 JavaScript 中验证日期。

基本上，每当您处理任何语言的日期时，您都想尝试使用内置日期库。不幸的是，JavaScript 的日期库很尴尬，但它仍然可用，你的 ddCheck 函数会变成这样：

```
function ddCheck(value, element) {
    var mmValue1 = $(element).closest("tr").find('input').val();
    var ddValue1 = value;
    var currentYear = new Date().getFullYear();
    var dateEntered = new Date(currentYear, mmValue1, ddValue1);

    return dateEntered.getDate() == ddValue1 && dateEntered.getMonth() == mmValue1 && dateEntered.getFullYear() == currentYear;
} 
```

ddCheck 的第 1 行在选择月份输入时也有错误。

```
var mmValue1 = $(element).closest("tr").find('input').val(); 
```

这个选择器不够具体，您总是返回第一个字段的值，即您所在月份的应用程序编号。您可以向月份添加一个类，因此代码如下所示：

```
var mmValue1 = $(element).closest("tr").find('.j-month').val(); 
```

或者您可以使用[starts-with 选择器](http://api.jquery.com/attribute-starts-with-selector/)按id 进行选择。

*编辑：我从返回中删除了三等号，因为我不想在此示例中也包含整数验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T12:16:52.390

删除一个额外的等于我把它修好了！！

$.validator.addMethod(

```
 "dobday",
    function(value,element){
        return ddCheck(value, element);
    }

);
function ddCheck(value, element) {
    var mmValue1 = $('#edit-month').val();
    //alert(mmValue1);
   // var dayval = $('#edit-date').val();
    var ddValue1 = value;

    if (ddValue1 < 1 || ddValue1 > 31) return false;
    if (mmValue1 == 2 && ddValue1 > 29) return false;
    else if ((mmValue1 == 4 || mmValue1 == 6 || mmValue1 == 9 || mmValue1 == 11) && (ddValue1 > 30)) return false;
    else         return true;
} 
```

# java - How to position two JPanels diagonal from each other in Java?

> ID：15170599
> 
> 赞同：1
> 
> 时间：2013-03-02T04:08:35.570
> 
> 标签：java, swing, layout, jframe, jpanel

I was wondering what layout or hack could be used to position these two JPanels so that it would end up looking like this?

![enter image description here](../Images/74a8ea6edc8e2dc84b325133c2730de5.png)

It seems like most layouts depend on the position of other components and either positions them vertically or horizontally in respect to the other components.

Note: Panel 2 is smaller than panel 1.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T04:11:19.530

I would use the [`BoxLayout`](http://docs.oracle.com/javase/7/docs/api/javax/swing/BoxLayout.html) layout manager in combination with [`Box`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Box.html). But there are several other options. This is just my personal preference.

For more information, please see [How to Use BoxLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html).

# opengl - OBJ 映射纹理奇怪的坐标

> ID：15170600
> 
> 赞同：0
> 
> 时间：2013-03-02T04:08:41.087
> 
> 标签：opengl, textures, lwjgl

我正在尝试使用 LWJGL 从 OBJ 文件加载纹理，但似乎有些地方纹理加载不正确。在没有灯光的情况下，它应该是这样的：

[![图像1](../Images/0f217539138dea58f6d63af4787f108a.png)](https://i.stack.imgur.com/1y4Bx.jpg)

但它看起来像这样：

[![img2](../Images/67eff0070171449b8922db18cde99217.png)](https://i.stack.imgur.com/hhLrr.png)

有人知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:16:47.650

在 LWJGL 中，纹理文件的分辨率必须是 2 乘以 2 的幂（例如：256x256、128x128、512x512）。试着让你的纹理适合这个尺寸，也许这会有所帮助。

# java - LibGDX - 带有纹理的 StillModel

> ID：15170601
> 
> 赞同：1
> 
> 时间：2013-03-02T04:08:57.073
> 
> 标签：java, opengl-es, 3d, textures, libgdx

我已经阅读了这篇文章：[https](https://code.google.com/p/libgdx-users/wiki/GenericTextureBinding) ://code.google.com/p/libgdx-users/wiki/GenericTextureBinding 并尝试使用它。我正在使用复杂的 .obj(airplane) 和 10 个纹理。在我看来，一切都按预期进行，但我在模型上看不到任何纹理。模型是灰色的。我究竟做错了什么？

```
int listPosition; 
List<Texture> modelTextures = new ArrayList<Texture>();
StillModel m_mesh;

public onCreate(){
String texturePath;
     FileHandle texturePathToLoad;
     boolean engageTextureLookupStrategy2 = false;        

     m_mesh = ModelLoaderRegistry.loadStillModel(Gdx.files.internal("obj/airplane.obj"));

     SubMesh[] subMeshes = m_mesh.getSubMeshes();

     for(SubMesh subMesh : subMeshes)
         Gdx.app.log("create", subMesh.name);
    // strategy #1: texture files share
     //              the object names as basename
     for(SubMesh subMesh : subMeshes)
     {
            // looking for texture file if sub mesh
            // has uv coordinates attached, only!
            if(m_mesh.getSubMesh(subMesh.name).mesh.getVertexAttribute(Usage.TextureCoordinates)!=null)
            {
                    texturePath = "obj/" + subMesh.name;
                    texturePathToLoad = guessTextureFile(texturePath);
                    if(texturePathToLoad!=null)
                    {
                            Gdx.app.log("create","... found Texture! Adding " + texturePathToLoad.path() + " to list of model textures.");

                            Texture temp_texture = new Texture(texturePathToLoad);                             
                            modelTextures.add(temp_texture);
                    }
                    else
                    {
                            Gdx.app.log("create","... not found. Object " + subMesh.name + " will not be textured.");
                            engageTextureLookupStrategy2 = true;
                    }
            }
     }

public void render(float delta) {
    Gdx.graphics.getGL10().glClearColor( 0.5f, 0, 0, 1 );
    Gdx.graphics.getGL10().glClear( GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT );

     listPosition = 0;      

     SubMesh[] subMeshes = m_mesh.getSubMeshes();

     for(SubMesh subMesh : subMeshes){      
     if( (modelTextures!=null)
     &&  (modelTextures.size()>0)       
     && (m_mesh.getSubMesh(subMesh.name).mesh.getVertexAttribute(Usage.TextureCoordinates)!=null)
     )
     {
            if(listPosition<modelTextures.size())
            {
                    // we don't want the texture to be tinted,
                    // thus setting white color.
                Gdx.gl11.glColor4f(1,1,1,1);

                    Gdx.app.log("render","binding texture #" + listPosition + " to texture unit #" + listPosition + " for submesh " + subMesh.name);
                    Gdx.gl.glActiveTexture(listPosition);                      
                    Gdx.gl.glEnable(GL11.GL_TEXTURE_2D);
                    modelTextures.get(listPosition).bind();                    
            }
            else
            {
                Gdx.gl.glActiveTexture(listPosition);
                Gdx.gl.glDisable(GL11.GL_TEXTURE_2D);
            }
            listPosition++;
     }
     }             
        m_mesh.render();           
} 
```

日志猫：

```
create: ... found Texture! Adding obj/left_wing_1.tga to list of model textures.
create: ... found Texture! Adding obj/rear.tga to list of model textures.
create: ... found Texture! Adding obj/wheel_support.tga to list of model textures.
create: ... found Texture! Adding obj/right_wing_1.tga to list of model textures.
create: ... found Texture! Adding obj/landing_light.tga to list of model textures.
create: ... found Texture! Adding obj/cockpit_1.tga to list of model textures.
create: ... found Texture! Adding obj/glass_1.tga to list of model textures.
create: ... found Texture! Adding obj/body_front.tga to list of model textures.
create: ... found Texture! Adding obj/pilot.tga to list of model textures.
create: ... found Texture! Adding obj/reflect.tga to list of model textures.
render: binding texture #0 to texture unit #0 for submesh left_wing_1
render: binding texture #1 to texture unit #1 for submesh rear
render: binding texture #2 to texture unit #2 for submesh wheel_support
render: binding texture #3 to texture unit #3 for submesh right_wing_1
render: binding texture #4 to texture unit #4 for submesh landing_light
render: binding texture #5 to texture unit #5 for submesh cockpit_1
render: binding texture #6 to texture unit #6 for submesh glass_1
render: binding texture #7 to texture unit #7 for submesh body_front
render: binding texture #8 to texture unit #8 for submesh pilot
render: binding texture #9 to texture unit #9 for submesh reflect 
```

结果：

![在此处输入图像描述](../Images/f5a731e3ab1ecd2241e881e54d991e99.png)

# jar - 我的 .jar 文件没有执行

> ID：15170604
> 
> 赞同：-1
> 
> 时间：2013-03-02T04:10:06.350
> 
> 标签：jar, execute, system.out

我创建了一个基本的 Noughts and Crosses 游戏，它从用户那里获取文本输入来确定 X/O 的放置位置（所有内容都使用 System.out 在屏幕上打印）并且它在 BlueJ 中运行良好，但是当我创建一个 .jar 文件，它不会显示屏幕或执行任何操作。

知道我做错了什么吗？

编辑：

这是在 Windows 7 上运行的，我试图通过双击 .jar 文件来运行应用程序。

大约 6 年前，我通过 uni 学习了基本的 java，并且正在重新自学，因此运行应用程序的不确定性。澄清一下，任何可执行文件都需要包含自己创建的清单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T21:25:37.773

`Main-Class:`您是否在 jar 的清单中定义了条目？如果没有，那么这里有一些关于该主题的资源：

```
* http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html
* http://stackoverflow.com/questions/9689793/cant-execute-jar-file-no-main-manifest-attribute 
```

双击 jar 文件是什么操作系统和什么应用程序？通常，每个系统（例如 Windows 资源管理器）都需要配置一个关联，以便在双击时知道您希望它执行的操作。也许该关联丢失了，因此没有程序运行。

如果您的环境确实在 jar 文件上运行 java，并且您在清单中指定了 Main-Class，但图形环境中没有出现任何窗口，那么您的环境很可能不知道您打算让程序在控制台中运行。您可能需要调整关联的程序，使其在控制台或终端程序中运行 java，以便其标准输出可见。（我个人通常在 Ubuntu 上打开一个终端，然后在提示符下运行“java -jar”）

# php - 为什么使用angularjs的ajax请求的数据为空？

> ID：15170608
> 
> 赞同：2
> 
> 时间：2013-03-02T04:11:20.900
> 
> 标签：php, json

我正在测试 angularjs 的简单 ajax 请求，它似乎无法正常工作。提出了请求，我得到了 200，但数据没有通过。

```
$http({
        url: "myphp.php",
        method: "GET",
        dataType: "json",
        data: {"foo":"bar"}
    }).success(function(data, status, headers, config) {
        console.log(data);
    }).error(function(data, status, headers, config) {
        $scope.status = status;
});

<?php

echo var_dump($_GET);

?> 
```

get 和 post 的结果相同。例如，如果我尝试访问 $_GET['foo'] ，则会收到未定义的索引异常。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:11:49.157

问题是您的数据以 JSON 编码的正文 ( `{dataType: "json", data: {"foo": "bar"}}`) 发送到您的 PHP。不作为 GET/POST 参数。

当您在正文中传递数据并且您的 PHP 试图在 $_GET 中检索时，您将获得`undefined index`.

不确定PHP中的正确方法是什么，但应该是这样的：

```
$requestBody = file_get_contents('php://input');
$requestBody = json_decode($requestBody); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T19:00:48.293

因为 PHP 不接受 JSON ，所以`'application/json'`您需要从 Angular 适当地更新您的标头和参数。

**首先**，参数化您的数据：

```
data: $.param({ "foo": $scope.fooValue }) 
```

**然后**，将以下内容添加到您的`$http`

```
 headers: {
     'Content-Type' : 'application/x-www-form-urlencoded; charset=UTF-8'
 }, 
```

*如果您的所有请求都发往 PHP，则可以在配置中全局设置参数，如下所示：*

```
myApp.config(function($httpProvider) {
    $httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8';
}); 
```

# c - 如何自动摆脱尾随零？

> ID：15170613
> 
> 赞同：1
> 
> 时间：2013-03-02T04:12:15.823
> 
> 标签：c

我的程序的目标是在用户指定的给定点切断 pi。

我已经想出了如何做到这一点，但我无法弄清楚如何摆脱尾随的零。

```
#include <stdio.h>
#include <math.h>
int main()
{

int i,length;
double almost_pi,pi;    
printf("How long do you want your pi: ");
scanf("%d", &length);

pi = M_PI;

i = pi * pow(10,length);

almost_pi = i / pow(10,length);

printf("lf\n",almost_pi);

return 0;
} 
```

假设用户输入 3，它应该返回 3.141，但它返回的是 3.141000。

请和谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T04:33:05.233

这是你想做的吗？？

```
#include <stdio.h>
#include <math.h>

int main()
{
    int length = 4;
    printf("How long do you want your pi: ");
    if (1 == scanf("%d", &length))
        printf("%.*f\n", length, M_PI);
    return 0;
} 
```

**样本输出 #1**

```
How long do you want your pi: 4
3.1416 
```

**样本输出 #2**

```
How long do you want your pi: 12
3.141592653590 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T04:33:14.187

您需要指定一个格式化参数，即长度，作为 printf 的附加参数：

```
printf("%.*f\n, length, almost_pi); 
```

[该参考](http://www.cplusplus.com/reference/cstdio/printf/)指出，这`.*`意味着“精度未在格式字符串中指定，而是作为必须格式化的参数之前的附加整数值参数。”

顺便说一句，您可以使用`%f`printf 用于双精度数和浮点数，但您仍然必须使用`%lf`scanf 的双精度数。见[这里](https://stackoverflow.com/questions/210590/why-does-scanf-need-lf-for-doubles-when-printf-is-okay-with-just-f)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T04:21:13.487

printf("%.3f\n",almost_pi); 会修复它。

# java - 在未修饰的 JFrame 上仅显示关闭按钮

> ID：15170616
> 
> 赞同：2
> 
> 时间：2013-03-02T04:12:37.237
> 
> 标签：java, swing

我想知道是否可以取消装饰 JFrame，然后仅在顶部显示关闭按钮或类似的东西。任何帮助将不胜感激。详细信息：实际上我正在制作一个项目，这是一个基于 GUI 的软件，我在其中使用了 JdesktopPane，并且我正在使用 JInternalFrames，因此在顶部显示标题栏不仅适合我。有什么办法可以解决我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T04:40:21.597

基本上，一旦您删除了框架边框，您就需要对它的功能负责，包括移动。

此示例基本上使用 a`JPanel`作为“标题”窗格的占位符，并使用 a`BorderLayout`来布局标题和内容。

实际的关闭按钮很简单`JButton`，它使用一些图像来表示关闭操作。显然，这只会在 Windows 上看起来正确，这些按钮是由操作系统本身正常生成的......我们无权访问该层......

![在此处输入图像描述](../Images/15d86f5c794ce3a257ec2c14f38a178b.png) ![在此处输入图像描述](../Images/f85e1f471636d9e968db33becf10adbb.png)

```
public class TestUndecoratedFrame {

    public static void main(String[] args) {
        new TestUndecoratedFrame();
    }

    public TestUndecoratedFrame() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                TitlePane titlePane = new TitlePane();

                JFrame frame = new JFrame("Testing");
                frame.setUndecorated(true);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                ((JComponent)frame.getContentPane()).setBorder(new LineBorder(Color.BLACK));
                frame.add(titlePane, BorderLayout.NORTH);
                frame.add(new JLabel("This is your content", JLabel.CENTER));
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TitlePane extends JPanel {

        public TitlePane() {
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.weightx = 1;
            gbc.anchor = GridBagConstraints.EAST;
            add(new CloseControl(), gbc);
        }
    }

    public class CloseControl extends JButton {

        public CloseControl() {
            setBorderPainted(false);
            setContentAreaFilled(false);
            setFocusPainted(false);
            setOpaque(false);
            setBorder(new EmptyBorder(0, 0, 8, 12));
            try {
                setRolloverIcon(new ImageIcon(ImageIO.read(getClass().getResource("/Highlighted.png"))));
                setRolloverEnabled(true);
                setIcon(new ImageIcon(ImageIO.read(getClass().getResource("/Normal.png"))));
            } catch (IOException ex) {
                Logger.getLogger(TestUndecoratedFrame.class.getName()).log(Level.SEVERE, null, ex);
            }

            addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    SwingUtilities.getWindowAncestor(CloseControl.this).dispose();
                }
            });
        }
    }
} 
```

# asp.net - 没有顶部的sql语法

> ID：15170617
> 
> 赞同：0
> 
> 时间：2013-03-02T04:12:57.400
> 
> 标签：asp.net, sql, syntax

我使用这个查询 atm 我想通过 TagReplies 订购。但是当它不允许我保存它时，除非我指定顶部或在第二次选择之后，但我想要所有结果。

```
AS
 SELECT
Tag,
TagReplies, 
(TagReplies*1.00) AS Weight,
TagTopics, 
(TagTopics*1.00) AS Weight2

FROM
(
SELECT
    Tags.Tag
    ,SUM(T.TopicReplies) As TagReplies
    ,Count(T.TopicId) As TagTopics
FROM
       Tags
    INNER JOIN Topics T ON Tags.TopicId = T.TopicId
GROUP BY
    Tags.Tag
if add this eg ORDER BY TagReplies DESC
)  T 
```

如果我添加一个顶部它工作正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T04:21:31.813

阅读您收到的错误消息。您不能`ORDER BY`在子查询中使用。您只能`ORDER BY`针对整个查询。 `ORDER BY`在子查询中`TOP`作为特例使用，因为这决定了哪些记录构成`TOP`.

试试这个：

```
SELECT
Tag,
TagReplies, 
(TagReplies*1.00) AS Weight,
TagTopics, 
(TagTopics*1.00) AS Weight2

FROM
(
SELECT
    Tags.Tag
    ,SUM(T.TopicReplies) As TagReplies
    ,Count(T.TopicId) As TagTopics
FROM
       Tags
    INNER JOIN Topics T ON Tags.TopicId = T.TopicId
GROUP BY
    Tags.Tag
)  T
ORDER BY TagReplies DESC 
```

此外，看起来这可能是`VIEW`定义的一部分。您不能在定义中指定`ORDER BY`子句。`VIEW`当您`SELECT`从`VIEW`.

# assembly - 如何用汇编语言计算判别式 (b^2 - 4ac)

> ID：15170622
> 
> 赞同：0
> 
> 时间：2013-03-02T04:13:53.653
> 
> 标签：assembly, x86

大家好，我是汇编语言的新手，我不知道如何创建一个程序来读取 3 个 16 位整数 a、b、c，然后让它计算判别式。(b^2-4ac) 谁能帮帮我？到目前为止，我开始尝试让程序将 a 和 c 相乘。

```
.data
Prompt  BYTE        "Enter a number ?" , 0
Message BYTE        "The discriminant is: ", 0
b       SDWORD  ?
a       SDWORD  ?
cc      SDWORD  ?
discriminant    SDWORD  ?
.code
main        PROC
mov edx, OFFSET Prompt          ; EDX must have the string's offset
    call    WriteString     ; Call the procedure to write a string
    call    ReadInt         ; Call the procedure to read an integer
    mov a, eax          ; The integer is read into AL, AX or EAX

    mov edx, OFFSET Prompt  ; Read another integer 
    call    WriteString
    call    ReadInt
    mov cc, eax

mov eax, a                          ; AL AX or EAX must have the
                    ;  multiplicand
    cdq             ; Clear the EDX register
    imul    cc          ; One operand - the multiplier
    mov Product, eax            ; The product is in AL, AX or EAX 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T04:23:22.733

您说您使用的是 16 位输入，因此 a、b 和 c 应为 16 位整数。这将为您提供 32 位签名的结果。有了这个，我们可以做到：

```
; Get b ^ 2 into EBX
movsx eax, [WORD b] ; Sign extend b to 32bit
imul eax            ; Multiply
mov ebx, eax        ; Put the result into ebx

; Get 4ac into EAX
movsx eax, [WORD a] ; Sign extend a to 32bit
shl eax, 2          ; Multiply by 4
movsx ecx, [WORD c] ; Sign extend c to 32bit
imul ecx            ; EDX:EAX = 4 * a * c

; Subtract, the result is in EBX
sub ebx, eax 
```

这是使用 32 位操作数，因为您的示例使用了。您可以使用 16 位操作数进行等效操作，但如果您使用 32 位结果，则必须从 DX:AX 转换为 32 位。请注意，根据您使用的汇编程序， for 的语法`[WORD b]`可能会发生变化。我看到了一些用途`[WORD PTR b]`或只是`WORD b`或类似的东西。

# html - 你能完全用 HTML 构建社交网站，比如 facebook、mySpace 或 youtube吗？

> ID：15170626
> 
> 赞同：0
> 
> 时间：2013-03-02T04:14:53.223
> 
> 标签：html

我刚买了一本书 HTML 来了解网页设计/编程。我的最终目标是制作社交网站，尽管那可能是在遥远的未来。我会朝着正确的方向前进吗？还是我应该从其他编程语言开始，例如 java、PHP 或其他东西。如果是这样，我应该只通过 HTML 吗？还是值得学习并强制进行网络编程？除了设计之外，我真的很困惑 HTML 在网站中可以做什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T04:16:45.367

> 你能完全用 HTML 构建社交网站，比如 facebook、mySpace 或 youtube吗？

简短的回答是*否定的*

`HTML`是用于呈现页面的客户端标记语言，但您肯定需要服务器端语言，例如`PHP`生成*动态* `HTML`页面/内容

考虑一个简单的*登录*页面，`HTML`只能显示页面（例如用户名/密码字段、按钮等），但您需要有一个处理实际登录过程的服务器端逻辑（例如用 PHP、.NET 或 Java 编写）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T04:48:05.420

简单回答是不。

HTML 是一种标记语言，它几乎完全关注页面对用户的外观。如果您在 HTML 中包含表单等，那么这只是告诉浏览器向某个服务器发送请求。如果你在 HTML 资源中嵌入可执行的东西（例如 Javascript`<script>`元素），那么可执行的东西：

*   在用户的浏览器上运行，
*   不能在用户的机器上存储东西，并且
*   无法与启动页面的站点以外的任何站点进行通信。

社交网站要求您可以（以某种方式）与其他机器上的其他用户进行通信，并且可以在某处存储信息。鉴于上述情况，很明显，仅提供 HTML 页面的网站不可能完成上述任何一项操作。

* * *

> 如果是这样，我应该只通过 HTML 吗？还是值得学习并强制进行网络编程？

任何涉及基于 Web 的用户界面*的东西都*需要您了解 HTML。如果您要实现一个做某事的网站，您也只需要学习其他*东西*。

（我想理论上可以实现一个基于 Web 的用户界面，而您不明确使用 HTML，但我怀疑这对于普通应用程序是否现实或实用。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T04:17:27.573

像社交网站这样的复杂 Web 应用程序依赖于通常从数据库提供的大量动态内容。但 HTML 是交付机制，是您在 Web 上找到的任何内容的基础。你应该从学习 HTML 开始，但你将需要它和某种编程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T04:43:57.407

通过 HTML，您只能构建静态页面，但不能构建诸如社交网站之类的复杂页面。仅使用 HTML，您就可以做博客之类的事情，它只是提供预制的 html 页面。当您开始考虑通过您的网站与用户进行密切互动的那一刻；你需要学习更多。

社交网站需要更多；在客户端，它需要你学习 HTML、JavaScript、CSS，同样你需要学习 Java/PHP 等服务器端技术，然后为了存储数据，你需要学习 MySQL/Oracle DB 等数据库。

# html - 如何在 CSS 中制作一个较大圆圈内的圆圈，以及所有圆圈中心内的文本？

> ID：15170630
> 
> 赞同：0
> 
> 时间：2013-03-02T04:15:39.813
> 
> 标签：html, css, text, geometry, shapes

如何在 CSS 中制作相对于较大圆圈内的其他内圈的位置以及所有圆圈中心内的文本的圆圈？

我正在寻找类似的东西：http: [//i.imgur.com/m8HJr09.png](http://i.imgur.com/m8HJr09.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T04:41:11.943

你可以使用这样的东西

CSS

```
 .outer_circle {
    height:400px;
    line-height:400px;
    width:400px;
    border-radius:50%;
    background-color:#000000;
    position:relative;
    margin:0 auto;
    }

.outer_circle p {
    text-align:center;
    vertical-align:middle;
    color:#ffffff;
    }

.circle {
    background-color:#aeaeae;
    border-radius:50%;
    height:40px;
    line-height:20px;
    width:40px;
    position:absolute;
    margin:10px;
    }

.circle p {
    font-size:10px;
    vertical-align:middle;
    color:#000000;
    } 
```

html

```
 <div class="outer_circle" >
<div class="circle" style="top:10px;left:150px"><p>Text</p></div>
<div class="circle" style="top:70px;left:260px"><p>Text</p></div>
<div class="circle" style="top:150px;left:320px"><p>Text</p></div>
<div class="circle" style="top:250px;left:260px"><p>Text</p></div>
<div class="circle" style="bottom:70px;left:150px"><p>Text </p></div>

<p> Text Text   Text Text   Text Text Text Text </p> 
```

根据需要调整高度、宽度等。希望这可以帮助

# c - 格式化 printf 和额外的字符串打印？

> ID：15170631
> 
> 赞同：1
> 
> 时间：2013-03-02T04:15:51.657
> 
> 标签：c, formatting, printf

我有 2 个问题，第一个是，我无法让我的行在我的阵列的打印中匹配。我只能得到第一行来匹配！

```
void printStructs(struct student *list, int size){

int j = 0;

printf("Last Name, First Name            Term      ID      Course   Section\n");
printf("-------------------------------- ----  ---------   ------   -------\n");

while(j < size){

    printf("%s, %-21s %-5d %-11d %s%d %7s\n", list[j].lastname, list[j].firstname, list[j].term, list[j].id, list[j].subjectname,list[j].catalog, list[j].section);

    j++;

}
} 
```

这为我提供了这个的输出！

![细节](../Images/2b884fa1bb5b8eca1e6227da80c057a8.png)

看看只有第一个是如何正确排列的？我如何让剩余的行来做到这一点！？

现在我的第二个问题是我根本看不到的问题。注意到在显示姓氏之前的倒数第二行中多余的“Susan”吗？这是哪里来的！？它适用于所有其他名称，我在这里没有看到什么？

编辑：在这里找不到涉及额外名称的错误！刚刚意识到这与我将名称初始化为该值的循环有关，如果我无法弄清楚，将进一步编辑，现在忽略！

EDIT2“额外字符串问题！”：

好吧，所以我已经缩小了问题所在，但不完全是它发生的原因，我相信它与分隔符有关......这是代码

```
studentsRead = readStudentList(inputf, students, N);

printf("%s\n", students[6].lastname);

printStructs(students, studentsRead);

/*for (j = 1 ; j <= 10-1 ; j++){

    for(k = 0 ; k <= 10-2 ; k++){

        if(students[k] > students[k+1]){

            temp = students[k];
            students[k] = students[k+1];
            students[k+1] = temp;

            }
        }
    }*/

fclose(inputf);

return 0;

 }

int readStudentList(FILE *f, struct student *list, int maxSize){

char buff[65];
int count = 0;

while((count < maxSize) && (fgets(buff, sizeof(buff), f) != NULL)){

    struct student item;

    if(parseStudent(&item, buff)){

        list[count++] = item;

    }
}

return count;

}

int parseStudent(struct student *person, char *data){

char *ptr;

int i = 0;

ptr = strtok(data, DELIM);

person[i].term = atoi(ptr);

ptr = strtok(NULL, DELIM);

person[i].id = atoi(ptr);

ptr = strtok(NULL, DELIM);

strcpy(person[i].lastname, ptr);

printf("%s\n", person[i].lastname);

ptr = strtok(NULL, DELIM);

strcpy(person[i].firstname, ptr);

ptr = strtok(NULL, DELIM);

strcpy(person[i].subjectname, ptr);

ptr = strtok(NULL, DELIM);

person[i].catalog = atoi(ptr);

ptr = strtok(NULL, DELIM);

strcpy(person[i].section, ptr);

} 
```

通过这段代码，一切正常打印，直到我的 readStudentList 调用之后的 printf ，它打印出姓氏，名字 String 卡在最后。尽管在我的解析函数中打印了姓氏似乎正常显示？我一直在尝试将打印输出放在整个地方，看看哪里出了问题，但其中一些甚至不会打印任何东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T04:27:28.097

问题是您打印姓氏`%s`而不是指定宽度。这意味着该行的其余部分会根据名字的长度向左或向右移动。

至于您应该如何格式化，您*可能*希望首先将名字和姓氏连接在一起，然后以固定宽度打印结果：

```
char buffer[256];

sprintf(buffer, "%s, %s", list[j].lastname, list[j].firstname);

printf("%-32s ...", buffer, ...); 
```

我的猜测是重名问题源于错误地读取数据；似乎不在您显示的代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T04:44:59.667

**printf ("%d % *.s", 数字, 大小, 字母);*** *注意：宽度（最小字段宽度）和精度（给出要打印的最大字符数）之间存在区别。**%s 指定宽度，%.s 指定精度。**（你也可以使用 %.*但是你需要两个参数，一个用于宽度，一个用于精度）

![在此处输入图像描述](../Images/dde03c021efe6489f21918e4e41bc120.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T04:48:02.617

问题在于`%s`，您必须对and`printf`使用单一格式说明符。因此，在单独的缓冲区中并在.`last name``first name``concatenate` `last name``first name``printf`

# file - 使用 SVNKit 从存储库中检出单个文件

> ID：15170636
> 
> 赞同：0
> 
> 时间：2013-03-02T04:17:05.013
> 
> 标签：file, svn, repository

[是否可以使用SVNKit](http://en.wikipedia.org/wiki/SVNKit)从 SVN 存储库中检出单个文件？

我有代码来签出一个完整的目录。但我只需要签出一个特定的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T04:56:00.267

您无法通过任何 SVN 客户端签出单个文件。您可以使用 cat（重定向到文件）或 export 从存储库中获取**未版本控制的文件。**

# django - 更改 Django 的 SECRET_KEY 的效果

> ID：15170637
> 
> 赞同：230
> 
> 时间：2013-03-02T04:17:05.697
> 
> 标签：django

我犯了一个错误，将我的 Django 项目`SECRET_KEY`提交到公共存储库中。

[根据文档，](https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-SECRET_KEY)该密钥应该保密。

Django 项目已经上线，并且已经有一些活跃用户运行了一段时间。如果我改变了会有什么影响`SECRET_KEY`？任何现有的用户、cookie、会话等会受到影响吗？显然，新的`SECRET_KEY`将不再存储在公共场所。

* * *

## 回答 #1

> 赞同：235
> 
> 时间：2013-03-13T11:16:56.033

编辑：这个答案基于 django 1.5

`SECRET_KEY`在很多地方都使用过，我会先指出受它影响的内容，然后尝试查看该列表并准确解释影响。

`SECRET_KEY`直接或间接使用的事物列表：

*   [JSON 对象签名](https://github.com/django/django/blob/stable/1.5.x/django/core/signing.py)
*   [用于盐渍 hmacs 或播种随机引擎的加密函数](https://github.com/django/django/blob/stable/1.5.x/django/utils/crypto.py)会影响：
    *   [密码重置令牌](https://github.com/django/django/blob/stable/1.5.x/django/contrib/auth/tokens.py)
    *   [评论表单安全性](https://github.com/django/django/blob/stable/1.5.x/django/contrib/comments/forms.py)以防止伪造 POST 请求
    *   [形式安全](https://github.com/django/django/blob/stable/1.5.x/django/contrib/formtools/utils.py)
    *   [防止消息篡改](https://github.com/django/django/blob/stable/1.5.x/django/contrib/messages/storage/cookie.py)，因为消息框架可能使用 cookie 在视图之间传递消息。
    *   [保护会话数据并创建随机会话密钥](https://github.com/django/django/blob/stable/1.5.x/django/contrib/sessions/backends/base.py)以避免篡改。
    *   [为大多数密码哈希创建随机盐](https://github.com/django/django/blob/stable/1.5.x/django/contrib/auth/hashers.py)
    *   如有必要，[创建随机密码](https://github.com/django/django/blob/stable/1.5.x/django/contrib/auth/models.py)
    *   [使用时创建自己`startproject`](https://github.com/django/django/blob/stable/1.5.x/django/core/management/commands/startproject.py)
    *   [创建 CSRF 密钥](https://github.com/django/django/blob/stable/1.5.x/django/middleware/csrf.py)

实际上，这里列出的许多项目都`SECRET_KEY`使用`django.utils.crypt.get_random_string()`它来为随机引擎播种。这不会受到 值变化的影响`SECRET_KEY`。

价值变化直接影响的用户体验包括：

*   会话，数据解码将中断，这对任何会话后端（cookie、数据库、基于文件或缓存）都有效。
*   已经发送的密码重置令牌将不起作用，用户将不得不要求一个新的。
*   评论表单（如果使用`django.contrib.comments`）将不会验证是否在值更改之前请求并在值更改之后提交。我认为这非常小，但可能会让用户感到困惑。
*   消息（来自`django.contrib.messages`）不会在与评论表单相同的时间条件下验证服务器端。

**更新**：现在正在使用 django 1.9.5，快速查看源代码给了我几乎相同的答案。以后可能会做一个彻底的检查。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2015-05-15T18:28:59.233

自从提出这个问题以来，[Django 文档](https://docs.djangoproject.com/en/2.1/ref/settings/#secret-key)已更改为包含答案。

> 密钥用于：
> 
> *   所有会话，如果您使用任何其他会话后端`django.contrib.sessions.backends.cache`，或者使用默认设置`get_session_auth_hash()`。
> *   如果您使用`CookieStorage`或的所有消息`FallbackStorage`。
> *   所有`PasswordResetView`代币。
> *   加密签名的任何使用，除非提供了不同的密钥。
> 
> 如果您轮换您的密钥，以上所有内容都将失效。密钥不用于用户的密码，密钥轮换不会影响他们。

我不清楚我应该如何轮换密钥。我发现了关于[Django 如何为新项目生成密钥](https://stackoverflow.com/a/16630719/4794)的讨论，以及讨论[其他选项](https://gist.github.com/ndarville/3452907)的 Gist 。我最终决定让 Django 创建一个新项目，将新密钥复制到我的旧项目中，然后**擦除新项目**。

```
cd ~/junk # Go to some safe directory to create a new project.
django-admin startproject django_scratch
grep SECRET_KEY django_scratch/django_scratch/settings.py # copy to old project
rm -R django_scratch 
```

### 更新

看起来 Django 在 1.10 版本中添加了该[`get_random_secret_key()`功能](https://github.com/django/django/blob/1.10/django/core/management/utils.py#L81)。您可以使用它来生成新的密钥。

```
$ ./manage.py shell -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
s!)5@5s79sp=92a+!f4v!1g0d0+64ln3d$xm1f_7=749ht&-zi
$ ./manage.py shell -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
_)+%kymd=f^8o_fea1*yro7atz3w+5(t2/lm2cz70*e$2mn\g3
$ 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-03-02T04:38:12.877

根据此页面[https://docs.djangoproject.com/en/dev/topics/signing/](https://docs.djangoproject.com/en/dev/topics/signing/)， SECRET_KEY 主要用于暂时性的东西——例如对通过网络发送的数据进行签名，以便您可以检测到篡改。看起来可能会破坏的东西是：

*   签名的 cookie，例如“记住我在这台计算机上的身份验证”类型的值。在这种情况下，cookie 将失效，签名将无法验证，用户将不得不重新验证。
*   对于已请求密码重置或自定义文件下载链接的任何用户，这些链接将不再有效。用户只需重新请求这些链接。

比我有更新和/或突出 Django 经验的人可能会提出其他意见，但我怀疑除非您明确使用签名 API 做某事，否则这只会给您的用户带来轻微的不便。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-13T01:36:34.537

SECRET_KEY 字符串主要用于加密和/或散列 cookie 数据。由于默认会话 cookie 有其自身的缺点，因此许多框架（包括 Django）都会这样做。

想象一下，您在 django 中有一个表单，用于编辑带有隐藏字段的文章。在此隐藏字段中存储您正在编辑的文章的 ID。如果您想确保没有人可以向您发送任何其他文章 ID，您将添加一个带有散列 ID 的额外隐藏字段。因此，如果有人更改 ID，您会知道，因为哈希值不会相同。

当然这是一个简单的例子，但这就是 SECRET_KEY 的使用方式。

Django 在内部使用它，例如 {% csrf_token %} 和其他一些东西。如果您根据您的问题更改它并且您没有使用它，它真的不应该对您的应用程序产生任何影响。

唯一的问题是会话值**可能**会被丢弃。因此，例如用户将不得不再次登录管理员，因为 django 将无法使用不同的密钥解码会话。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-14T06:27:54.900

我犯了同样的错误。默认密码是 50 长，所以我使用 powershell 生成了一个 50 长的随机字符串，并用它替换了旧的 SECRET_KEY。我已登录，在替换 SECRET_KEY 后，我之前的会话已失效。

使用 Powershell（[源](https://blogs.technet.microsoft.com/meacoex/2011/08/04/how-to-generate-a-secure-random-password-using-powershell/)）：

```
# Load the .net System.Web namespace which has the GeneratePassword function
[Reflection.Assembly]::LoadWithPartialName("System.Web")

#  GeneratePassword(int length, int numberOfNonAlphanumericCharacters)
[System.Web.Security.Membership]::GeneratePassword(50,5) 
```

使用 Bash（[来源](https://unix.stackexchange.com/questions/230673/how-to-generate-a-random-string)）：

```
# tr includes ABCabc123 and the characters from OWASP's "Password special characters list"
cat /dev/urandom | tr -dc 'A-Za-z0-9!"#$%&\''()*+,-./:;<=>?@[\]^_`{|}~' | head -c 100 ; echo 
```

此时我想为什么不尝试更大的密钥，所以我尝试了 100 和 1000 长密钥。两者都有效。如果我了解[源代码](https://docs.djangoproject.com/en/2.1/_modules/django/core/signing/#Signer)，则签名函数返回的对象是 base64 中的 hmac 哈希。[RFC 2104](https://www.rfc-editor.org/rfc/rfc2104#section-3)说明了 HMAC 密钥的所需长度。

> 使用长于 B 字节的密钥的应用程序将首先使用 H 对密钥进行哈希处理，然后使用生成的 L 字节字符串作为 HMAC 的实际密钥。

> HMAC 的密钥可以是任意长度（长于 B 字节的密钥首先使用 H 进行散列）。但是，强烈建议不要小于 L 字节，因为它会降低函数的安全强度。超过 L 字节的密钥是可以接受的，但额外的长度不会显着增加功能强度。（如果密钥的随机性被认为很弱，则建议使用更长的密钥。）

要翻译成正常的说法，密钥的大小需要与输出的大小相同。密钥也需要以位为单位。base64 中的每个数字代表 6 位。因此，如果您有一个 50 个字符的密码，那么您将拥有一个 50 x 6 = 300 位的密钥。如果您使用的是 SHA256，那么您需要一个 256 位密钥（*根据定义，sha256 使用 256 位*）。因此，除非您计划使用大于 SHA256 的散列算法，否则 50 长的密码应该可以工作。

但是由于密钥中的任何额外位都被散列，它的大小不会大大降低性能。但它会保证你有足够的位来处理更大的散列函数。SHA-512 将被 100 长的 SECRET_KEY 覆盖（*50 x 6 = 600 bits > 512 bits*）。

# php - 页面未正确刷新

> ID：15170638
> 
> 赞同：0
> 
> 时间：2013-03-02T04:17:16.070
> 
> 标签：php

通过第一条评论轻松解决问题。抱歉页面没有重定向，现在它已修复并且运行良好。

```
<?php
if (isset($_GET['logout'])) {
    $root = $_SERVER['DOCUMENT_ROOT'];
    require_once("$root/busapp/helpers/session.php");

    if ((isset($sesh_user_id)) || (isset($sesh_admin)) || (isset($sesh_email))) {
         $_SESSION = array();
    }

    if (isset($_COOKIE[session_name()])) {
        setcookie(session_id(), '', time() - 3600);
    }

    session_destroy();
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T04:23:08.210

当用户注销时，您需要向登录页面添加重定向。

试试这个：

```
<?php

// Some PHP about logging out

header('Location: php/login.php');

?> 
```

# java - Android 应用背景颜色按钮

> ID：15170640
> 
> 赞同：1
> 
> 时间：2013-03-02T04:17:37.747
> 
> 标签：java, android, button

你好，我有另一个关于我的 hello world 应用程序的问题，我想在按下 A 按钮时更改背景，所以我这样做了：

```
 public void onclick01(View View)  
       {  
           View.setBackgroundColor(Color.GREEN);

       } 
```

但这会改变按钮的背景颜色，而不是整个应用程序。

* * *

编辑

我还有两个问题。

1）我将如何设置

```
View.setBackgroundColor(Color.GREEN); 
```

类似于：

```
View.setBackgroundColor(Color.RANDOM); 
```

2）我将如何做同样的事情来改变文字颜色？就像是：

```
View.setTextColor(Color.GREEN);? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T04:21:57.883

**main_act.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Button
        android:id="@+id/b1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="button" />

</LinearLayout> 
```

**活动**

```
public class MainActivity extends Activity {
/** Called when the activity is first created. */
Button b1;
LinearLayout layout;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_act);
    layout=(LinearLayout)findViewById(R.id.layout);
    blueButton=(Button)findViewById(R.id.b1);
    b1.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
        // TODO Auto-generated method stub
        layout.setBackgroundColor(Color.BLUE);

    }
});
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T04:20:40.113

如果你想通过xml设置，那么你需要做如下：

```
 android:background="@android:color/green" 
```

如果您决定使用 android 的默认颜色代码，或者您在 colors.xml 中指定了颜色，请使用

```
 android:background="@colors/green" 
```

如果您想以编程方式进行操作，请执行以下操作：

```
 LinearLayout linearlayout=(LinearLayout) findViewById(R.layout.yourlayout);
     linearlayout.setBackgroundColor(Color.GREEN); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T04:21:52.330

这里 View 引用您的 Button 的 View。所以你需要为父布局创建对象然后

```
layout.setBackgroundColor(Color.GREEN); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T04:26:09.690

```
public void setActivityBackgroundColor(int color) {
 view = this.getWindow().getDecorView();
 view.setBackgroundColor(color);
} 
```

然后从你的 OnClickListener 调用它，传入你想要的任何颜色。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T04:28:41.747

对于这种情况，您应该使用 xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >

<item android:state_pressed="true">
    <shape android:shape="rectangle">
       <solid android:color="yourColor"/>
    </shape>
</item>

<item>
    <shape android:shape="rectangle">
        <solid android:color="yourColor"/>
    </shape>
</item>

</selector> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-02T04:36:50.913

使用`Selector`您将获得按钮按下动作。

```
 <?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
 <item android:drawable="@drawable/button_background" android:state_pressed="false"/>
 <!-- default -->
 <item android:drawable="@drawable/button_pressed" android:state_pressed="true"/>
 <!-- pressed -->
</selector> 
```

# php - preg_replace 整个单词或标点之间

> ID：15170645
> 
> 赞同：0
> 
> 时间：2013-03-02T04:18:35.727
> 
> 标签：php, preg-replace

我正在尝试扩展我之前提出的一个问题。我想使用 preg_replace 切换整个单词或与某些标点符号或符号对接的单词，例如 `\s\,\:\-\%\(\)\*\&\$\#\!\@\"\;` 目前，我正在使用这样的东西，

```
$_SESSION['ABBREV']['GENERAL']['SEARCH'][] = '/(?<=\s|^)' . preg_quote($row['word'], '/') . '(?=\s|$)/i';
$_SESSION['ABBREV']['GENERAL']['REPLACE'][] = ucwords($row['abbrev']);

$word   = $_SESSION['ABBREV']['GENERAL']['SEARCH'];  --array that holds whole words
$abbrev = $_SESSION['ABBREV']['GENERAL']['REPLACE']; --array that stores abbreviations
$string = 'James Laughlin Music Center, Chatham University';

$new_word = = preg_replace($word, $abbrev, $string); 
```

我希望它以詹姆斯·劳克林音乐中心的身份出现，查塔姆大学所在的 Cntr。是中心的缩写。如果出于某种原因是查塔姆大学中心大厅的 James Laughlin Music 出品 James Laughlin Music,Cntr，我也希望如此。霍尔查塔姆大学。我不确定我是否解释得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T12:16:14.590

使用单词边界：

```
'/\b' . preg_quote($row['word'], '/') . '\b/i' 
```

# scala - Scala中的“传播”参数？

> ID：15170646
> 
> 赞同：10
> 
> 时间：2013-03-02T04:18:50.207
> 
> 标签：scala, parameters, dsl, function-calls

**给定一个数组**（类似于 ECMAScript 6 中的 JavaScript [Spreads](http://ariya.ofilabs.com/2013/03/es6-and-spread-operator.html) ） ，有没有办法调用一个接受单个参数的 Scala 函数？

```
ys = [10.0, 2.72, -3.14]
f(x, ...ys); 
```

最简洁的语法是：

```
f(1, ys) 
```

但这似乎是不可能的。Even`f(1, ys:_*)`不起作用（也不起作用`f(ys:_*)`，因为编译器报告的参数太少 - 只有第一个被填充）。

例子：

```
def f (a:Int, b:Float, c:Float, d:Float): String

val x  = 1
val ys = List(10.0, 2.72, -3.14)  // note: non-Objects
val result = f(x, ys)  // intuitive, but doesn't work 
```

用例：将测试数据（来自集合）注入到接受单个参数的现有方法中。由于这些是测试用例，因此如果 ys 中的 #params 不匹配并且会给出运行时错误或不正确的结果，那也没关系。

问题是 Scala 是否允许在给定参数集合的情况下调用带有单个参数的函数的简洁语法——而不是它是否是一个好的*设计*（尽管当然欢迎提出意见）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T08:36:16.387

将列表作为元组传递并不容易，因为类型不太匹配（稍后会详细介绍）。有了足够的鞋拔和润滑，任何东西都适合：

```
"My hack" should {
  "allow a function to be called with Lists" in {

    def function(bar:String, baz:String)= bar+baz

    //turn the function into something that accepts a tuple
    val functionT = function _
    val functionTT = functionT.tupled

    val arguments = List("bar", "baz")

    //Give the compiler a way to try and turn a list into a tuple of the size you need
    implicit def listToTuple(args:List[String]) = args match { 
      case List(a, b) => (a, b)
      case _ => throw IllegalArgumentException("Trying to pass off %s as a pair".format(args))
    }

    //Shove it in and hope for the best at runtime
    val applied = functionTT(arguments)
    applied === "barbaz"
  }
} 
```

您可以通过将附加参数添加到列表中来扩展此方法，或者通过 Schönfinkel 将参数分成两个不同的组。我不会那样做的。

从我的评论中你可能已经注意到我不喜欢导致这个问题弹出的设计。我展示的代码本质上是将函数包装在外观中的代码。为什么不正确地做呢？

查看 Spray，您可能会看到他们的完整方法隐式接受大量不同的参数。他们为此使用的巧妙技巧将其命名为[磁铁图案](http://spray.io/blog/2012-12-13-the-magnet-pattern/)。你可以做同样的事情，并为你选择接受的不同元组引入你的磁铁的隐式转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T08:37:07.837

我认为您将不得不抛弃类型安全并诉诸使用反射。

```
scala> object Foo {
 | def doFoo(i:Int, s:String) = println(s * i)
 | }

defined module Foo

scala> val fooFunc = Foo.doFoo _
fooFunc: (Int, String) => Unit = <function2>

scala> val applyMeth = fooFunc.getClass.getMethods()(0)
applyMeth: java.lang.reflect.Method = public final void $anonfun$1.apply(int,java.lang.String)

scala> val i:Integer = 5

i: Integer = 5

scala> val seq = Seq[Object](i,"do the foo! ")
seq: Seq[Object] = List(5, "do the foo! ")

scala> applyMeth.invoke(fooFunc, seq :_*)
do the foo! do the foo! do the foo! do the foo! do the foo! 
res59: Object = null 
```

但是，除非您正在创建一些 DSL 并且确实需要这种功能，否则我会尝试寻找另一种方法。如果方法在您的控制之下，则重载方法，或者将其包装在某种外观类中。

**编辑**

在评论中回答 Rubistro 的问题。

*a) 这种技术如何调用 foo.doFoo？（也就是说，你没有对象——只有一个定义 doFoo 的类的实例。）*

`val fooFunc`是 a 的一个实例，`Function2`它是在调用 时调用的实例应用函数`applyMeth.invoke(fooFunc, seq :_*)`。

*b) 此方法是否允许在 seq 中的值之前和之后将参数传递给 doFoo？*

不是直接的。要使用它，您必须在调用该方法之前构建您的序列。但是，由于它是一个序列，因此您可以在调用该方法之前轻松地将值添加/附加到您正在使用的序列中。将其包装在构建器中可能很有用，例如

```
class InvokationBuilder(meth:java.lang.reflect.Method, args: List[Object] = Nil) {
    def invoke(instance:Object) = meth.invoke(instance, args.toSeq :_*)
    def append(arg:Object) = new InvokationBuilder(meth, args :+ arg)
    def prepend(arg:Object)= new InvokationBuilder(meth, arg :: args)
} 
```

# ios - 在 iOS 问题中播放部分音频文件？

> ID：15170647
> 
> 赞同：2
> 
> 时间：2013-03-02T04:18:54.110
> 
> 标签：ios, objective-c, cocoa, avaudioplayer

是否可以播放音频文件的一部分。所以，我有一个包含很多声音的音频文件。在这种情况下，一个音频文件就像一个“ARRAY”，包含许多项目。`{5:01 and stop at 6:08}`我想通过播放类似的东西来分离部分音频。这可能吗？我对 Xcode 非常了解，所以这可能是一个愚蠢的问题。谢谢。如果您有什么需要，请在下方评论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T04:28:24.193

无法播放一定时间的音频..但我们可以通过以下方式做到这一点。

```
-(void)Play
{
    AVAudioPlayer *avPlayer = [[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL fileURLWithPath:[FileDetailsRec valueForKey:@"Path"]] error:nil];
    [avPlayer setCurrentTime:5.01f];
    [avPlayer prepareToPlay];
    [avPlayer play];
    objTimer = [NSTimer  scheduledTimerWithTimeInterval:1.07f target:self selector:@selector(stop) userInfo:nil repeats:NO];
}

-(void)stop
{ 
    [objTimer invalidate];
    [avPlayer stop];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T04:31:14.257

这可能通过使用 AVAudioPlayer 来实现，但我不确定这个一旦在这个类中看到这个参考类 [AVAudioPlayer](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html) 使用下面的方法你可以得到你的要求

```
- (BOOL)playAtTime:(NSTimeInterval)time  and for stoping use NSTimer like

[NSTimer scheduledTimerWithTimeInterval:(place your time interval)
                                  target:self
                                selector:@selector(stop)
                                userInfo:nil
                                 repeats:NO]; 
```

# ios - 升级到 ARC 后是否必须删除我的发布声明？

> ID：15170655
> 
> 赞同：0
> 
> 时间：2013-03-02T04:19:58.487
> 
> 标签：ios, objective-c, xcode, cocos2d-iphone, automatic-ref-counting

所有这些 ARC 的东西都是新的。

我一直在使用手动引用计数开发 iOS 游戏`cocos2d-iphone 1.0.1`。

最近，在阅读了一些说明（[http://www.tinytimgames.com/2011/07/22/cocos2d-and-arc/#comment-563567859](http://www.tinytimgames.com/2011/07/22/cocos2d-and-arc/#comment-563567859)）后，我升级了我的项目以支持自动引用计数。

当我使用手动方法开发时，我当然`release`在很多地方都使用过。但是，我注意到我有很多内存泄漏并且我很难找到所有这些泄漏 - 因此我改为使用 ARC。

但是，我想知道，我是否必须删除我的`[object release];`声明才能使 ARC 正常工作？或者没关系，我真的不需要做任何改变？

如果我使用`[object retain];`and `[object release];`，我是否会摆脱前者并假设 ARC 会负责释放它？或者我是否仍然有责任手动释放它，因为我明确获得了对象的所有权？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T04:22:46.497

无需手动完成所有这些工作。

你应该**重构**你的代码。[在此处查看如何重构为 ARC。](http://www.daveoncode.com/2011/10/24/migration-to-arc-automatic-reference-counting-using-xcode-4-2-refactor/)

另外[，如何将我的 Xcode 项目转换为使用 ARC（自动引用计数）？](https://stackoverflow.com/questions/7780412/how-do-i-convert-my-xcode-project-to-use-arc-automatic-reference-counting)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T04:38:39.700

使用 ARC 时调用`retain`or`release`是一个错误，它甚至不会编译。

# c# - 从 C# 中的较长字符串中解析此数字的最佳方法是什么？

> ID：15170656
> 
> 赞同：2
> 
> 时间：2013-03-02T04:20:26.560
> 
> 标签：c#, regex, string, parsing

我有以下示例字符串

```
"CTS3010 - 6ppl" 
```

或者

```
"CTs3200 - 14ppl" 
```

或者

```
 "CTS-500 2ppl" 
```

我需要从这些字符串中解析出数字。解析字符串末尾“ppl”之前的数字的最佳方法是什么。我需要正则表达式吗？我有逻辑向后循环，但感觉这里有一个更优雅的解决方案。

这些只是示例，但所有示例似乎都遵循相同的模式

*   一堆文字
*   一个号码
*   ppl 后缀

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T04:27:15.360

您可以这样做以获取“ppl”之前的号码：

```
using System.Text.RegularExpressions;
...

Regex regex = new Regex("([0-9]+)ppl");
string matchedValue = regex.Match("CTS-500 122ppl").Groups[1].Value; 
```

在这种情况下`matchedValue`将是 122。

如果您想要安全，并且您知道“ppl”将始终位于字符串的末尾，我会将正则表达式更改为：（`"([0-9]+)ppl$"`唯一的区别是末尾的美元符号）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T04:28:18.313

这是使用 LINQ 的一种方法：

```
const String ppl = "ppl";
var examples = new[] { "CTS3010 - 6ppl", "CTs3200 - 14ppl", "CTS-500 2ppl" };
var delimiters = new[] { " " };
var result = examples
    .Select(e => e.Split(delimiters, StringSplitOptions.RemoveEmptyEntries))
    .Select(t => t.Last().ToLowerInvariant().Replace(ppl, String.Empty))
    .Select(Int32.Parse)
    .ToList(); 
```

请注意，如果它无法解析整数值，这将失败。如果您不能保证每个字符串都以结尾，`NNppl`则需要先检查它是否为数值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T05:00:07.490

我不知道“最佳方式”，但一种非常容易理解和修改的方法是字符串对象的扩展方法：

```
 public static int Parse(this string phrase)
    {
        if (string.IsNullOrWhiteSpace(phrase)) { throw new NullReferenceException("phrase is null");}

        string num = string.Empty;
        foreach (char c in phrase.Trim().ToCharArray()) {
            if (char.IsWhiteSpace(c)) { break; }
            if (char.IsDigit(c)) { num += c.ToString(); }
        }
        return int.Parse(num);
    } 
```

假设“”是中断条件。如果您有可能没有获得数字和/或 System.Text.StringBuilder，您可能更喜欢 int.TryParse。

# postgresql - Postgres 在 PostgreSQL 服务器 8.4 中重置密码

> ID：15170658
> 
> 赞同：1
> 
> 时间：2013-03-02T04:20:37.467
> 
> 标签：postgresql

我的 PostgreSQL 8.4 服务器中有 20 多个数据库。有人对我的 Postgres 做错了什么，它不再打开。它给出了以下错误：

```
error connecting to the server fatal role postgres is not permitted to log in 
```

我做了很多来恢复它，但它仍然无法正常工作。我在 Windows XP 中有 PostgreSQL 服务器 8.4。

`pg_hba.conf`文件配置为：

```
# TYPE  DATABASE    USER        CIDR-ADDRESS          METHOD

# IPv4 local connections:
#local   all   postgres                         ident sameuser
host    all         all         127.0.0.1/32          trust
#host    all         postgres trust 
#host    all         all         192.168.44.12/32      trust
#host    all         all         192.168.44.103/32     trust
# IPv6 local connections:
#host    all         all         192.168.44.18/32      trust
# host   all     all     ::1/128     md5 
```

我怀疑问题出在这里，因为有人修改了`ROLE`Postgres 用户的`NOT LOG IN`...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T05:08:33.963

可能尝试单用户模式。停止 postgres，然后从命令行运行它：

```
postgres --single -D path/to/your/postgres/directory 
```

然后：

```
ALTER ROLE postgres WITH LOGIN 
```

用于`Ctrl-D`终止会话。

这应该允许`postgres`用户再次登录服务器。

# iphone - 更新到 Xcode 4.6 后出现超过 1000 个编译器错误

> ID：15170661
> 
> 赞同：1
> 
> 时间：2013-03-02T04:21:09.367
> 
> 标签：iphone, ios, objective-c, xcode

我最近从 XCode 4.5 更新到 XCode 4.6。我有一个 iOS 项目，在 4.5 中编译时没有错误，但是现在，当我在 4.6 中构建项目时，我得到了 1000 多个错误。

错误包括`"expected property type before 'strong'`在我的`@property (nonatomic, strong)`声明中，并且每次`self.propertyName`我在收到错误时引用对象属性`request for member propertyName not found in structure of union`

这让我觉得它与 ARC 或编译器有关，但我不确定我会改变什么。我检查了该项目是否使用 LLVM GCC 4.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T04:38:11.640

ARC 仅受 LLVM 编译器（v3.0 或更高版本）支持。LLVM GCC 4.2 或 GCC 4.2 不支持它。将您的项目切换到使用 LLVM 编译器（又名 Clang），这些问题就会消失。

# arrays - 来自数组的平均值矩阵

> ID：15170668
> 
> 赞同：2
> 
> 时间：2013-03-02T04:21:51.283
> 
> 标签：arrays, r, matrix, average

现在我有一个三个维度的数组。我在第三维中有 200 行、200 列和 24 个“切片”

```
dim=c(200,200,24) 
```

我需要的是产生一个新矩阵的切片的平均值。我需要一个 200 x 200 的矩阵，这些值是对适当切片进行平均的结果。因此，在第 1 行第 1 列的位置，我需要数组中所有第 1 行和第 1 列的平均值。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T04:33:28.433

这是使用一个简单示例的一次尝试：

```
test <- 1:8
dim(test) <- c(2,2,2)

, , 1

     [,1] [,2]
[1,]    1    3
[2,]    2    4

, , 2

     [,1] [,2]
[1,]    5    7
[2,]    6    8 
```

得到你的答案：

```
apply(test,c(1,2),mean)

     [,1] [,2]
[1,]    3    5
[2,]    4    6 
```

# python - 无法导入 JSONDecodeError

> ID：15170676
> 
> 赞同：17
> 
> 时间：2013-03-02T04:22:17.857
> 
> 标签：python, macos, python-import

我正在尝试拨打以下电话：

```
from simplejson import JSONDecodeError 
```

但我收到此错误：

```
from simplejson import JSONDecodeError
ImportError: cannot import name JSONDecodeError 
```

以下信息可能会有所帮助：

*   此代码在 ubuntu 中运行良好，但在**mac**中出现此错误。

*   我有多个版本的 python，我只是删除了 python 2.6（因为我使用的是**python 2.7**）

*   并用于`easy_install_27`安装这个特定的库。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2016-02-05T01:19:08.967

您已经有了如何获取 JSONDecodeError 的答案，但我认为正确的建议应该是您不应该尝试导入它。

原因是 JSONDecodeError 仅出现在 中`simplejson`，除非您的 Python 版本严重过时，否则没有真正的理由使用它。内置`json`在最近的版本中一样快，并且没有 unicode 错误。信息：[https ://stackoverflow.com/a/16131316/723090](https://stackoverflow.com/a/16131316/723090)

解决方案：`json`引发 ValueError 而不是 JSONDecodeError，但 JSONDecodeError（由 引发`simplejson`）是 ValueError 的子类。因此，您可以简单地将 ValueError 除外，它适用于`json`and `simplejson`！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-01-08T15:21:53.683

只是为了更清楚@tim的评论，在python3中你可以写

```
from json import JSONDecodeError 
```

不需要 simplejson 包

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T21:32:52.907

它适用于我的电脑：

```
$ python
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from simplejson import JSONDecodeError
>>> 
```

您是否确认您正在运行安装了 simplejson 库的 python 安装？检查`sys.path`并确认所有预期位置都在搜索路径中。`import simplejson`行得通吗？如果是这样，请验证从哪个文件加载了模块 ( `import simplejson; print simplejson.__file__`)。如果符合预期，则验证模块的内容并查看其中是否存在 JSONDecodeError 类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-29T08:12:22.293

升级您的安装：

```
$ pip install -U simplejson
$ python
>>> from simplejson import JSONDecodeError 
```

# javascript - 单击将文本放入输入框中

> ID：15170681
> 
> 赞同：0
> 
> 时间：2013-03-02T04:22:44.217
> 
> 标签：javascript

在页面上单击按钮（图像）并显示文本。当文本出现时，您单击该文本，我希望它出现在输入框中。例如，您点击图片 red.jpg，旁边会出现“水果香味”的文字。当您单击“水果香味”时，我希望它出现在输入框中。我希望这从框 1 到框 3 的顺序发生，如果第一个框已满，则进入第二个框。我不太擅长使用数组，所以我不知道从哪里开始。这是我拥有的所有代码：

```
 <script>
   var current_obj='';
   function showLinks(objID) {
   var obj=document.getElementById(objID); if (current_obj.style) {
   current_obj.style.display='none'; }
   obj.style.display='block';
   current_obj=obj; }
</script>

<style type="text/css" media="all"> 
   .showhide_element {
    display: none; }
   html {
   background-repeat:no-repeat;
   background-size:100% 100%;
   height: 100%;
 }

   #container{width:1950px;}
   #container div{float:left;width:300px;margin-left:10px;margin-right:10px}

   div#Contact {
background: #FFF;
margin-left: auto;
margin-right: auto;
padding: 50px;
width: 1000px;
height:800px;
border-radius:25px;
-moz-border-radius:25px;
}
div#Contact_Text {
background: yellow;
}
div.Contact_Button {
background: white;
height: 500px;
margin-top: 100px;
width: 96px;
border:2px dotted;
border-radius:25px;
-moz-border-radius:25px;
}
div.test {

align:right;
}
#container #Contact .Contact_Button {
color: #909090;
}

#FruitsMenu_info {

width:96px;
height:500px;
}

#FloralsMenu_info {

width:96px;
height:500px;
}
div.Contact_Button2{

background: white;
height: 500px;
margin-top: 100px;
width: 96px;
border:2px dotted;
border-radius:25px;
-moz-border-radius:25px;
}
div.Contact_Button3{

background: white;
height: 500px;
margin-top: 100px;
width: 96px;
border:2px dotted;
border-radius:25px;
-moz-border-radius:25px;
  }
   </style> 
   </head> 

   <body  bgcolor="#ade0fa">

   <div id="container">
   <div style="position: absolute; z-index: 5000; top: 24px; left: 22px;"><img                 

   src="customize.jpg" width="288" height="100" /></div>

   <div id="Contact"> 

   <div class="Contact_Button">
   <p align="center"><b> <font color:"#a6a6a6">Select a Scent Category</font></b></p>

   <a href="#" onClick="showLinks('FruitsMenu_info');return false;"><div 
   style="position:     

   absolute;width:134px; z-index: 5000; top: 200px; left: 120px;"><img src="red.jpg"  

   width="132" height="43" /> </div></a>

    <a href="#" onClick="showLinks('FloralsMenu_info');return false;"><div   
    style="position:  

   absolute;width:134px; z-index: 5000; top: 240px; left: 120px;"><img src="Florals.jpg" 

   width="132" height="43" /></div></a>

   </div>

   <div class="Contact_Button2">
   <p align="center"><b> <font color:"#a6a6a6F">Choose 3 Scents </font></b></p>

   <div style="z-index: 5000; top: 540px; left: 220px;"id="FruitsMenu_info"  

   class="showhide_element">
<p align="center"><font color:"#000000">Fruits Scents</font></p></div>

   <div style="z-index: 5000; top: 540px; left: 220px;"id="FloralsMenu_info" 
   class="showhide_element"><p align="center"><font color:"#000000">Floral Scents</font>
   </p></div>

</div>

<div class="Contact_Button3">
  <p align="center"><b> <font color:"#a6a6a6">Your Blend</font></b></p>
    <form id="form1" name="form1" method="post" action="">
      <input type="text" name="Scent 1" id="Scent 1" />
      <label for="Scent 1"></label>
      Scent 1 

      <input name="Scent 2" type="text" />
      Scent 2
      <input name="Scent 3" type="text" />
      Scnet 3 
    </form>

</div>

  </div>
  </div>
  </body> 
  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:34:14.190

这是我为您编写的一个非常基本的示例。

使用 .value 和其他一些东西......

```
input.value="herp derp"; 
```

[JSFIDDLE 示例链接](http://jsfiddle.net/VrMXE/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:43:39.893

只需在 js 标签中的 html 之后运行此代码。由于您没有使用 jQuery，因此我们将采取严厉措施。这可能太多了，因为它会抓取页面上任何 p 标签的所有 innerHTML 并填充您的输入。

```
function updateInput(i){
   document.getElementById('name_of_input_id').value = i.innerHTML;
}
  var pTags = document.getElementsByTagName('p');
    for(i=0; i < pTags.length; i++){
      pTags[i].onclick = function(){updateInput(this)};
    } 
```

# python - python缩进错误

> ID：15170686
> 
> 赞同：0
> 
> 时间：2013-03-02T04:23:50.830
> 
> 标签：python, google-docs

python新手，写了一个小时左右。Google docs api 和示例很棒。我可以连接和创建文件等。我想将所有文件备份到谷歌驱动器，所以尝试使用`os.walk`并遇到我不明白的持久缩进错误。

```
#!/usr/bin/python

import httplib2
import pprint
from apiclient.discovery import build
from apiclient.http import MediaFileUpload
from oauth2client.client import OAuth2WebServerFlow
from oauth2client.client import Credentials
import os
import sys

rootdir = sys.argv[1]

CLIENT_ID = 'MYCLIENT ID'
CLIENT_SECRET = 'MY SECRET ID'
OAUTH_SCOPE = 'https://www.googleapis.com/auth/drive'

# Redirect URI for installed apps
REDIRECT_URI = 'urn:ietf:wg:oauth:2.0:oob'

json_creds = open('backup_credentials.json', 'r').read()
credentials = Credentials.new_from_json(json_creds)
#
# Create an httplib2.Http object and authorize it with our credentials
http = httplib2.Http()
http = credentials.authorize(http)
drive_service = build('drive', 'v2', http=http)

#Here is where the problem starts
for root, subFolders, files in os.walk(rootdir):
    for filename in files:
        filepath = os.path.join(root, filename)
        print (filepath)
        media_body = MediaFileUpload(filepath, mimetype='text/plain', resumable=True)
        body = {'title': filename,'description': 'A test document','mimeType': 'text/plain'}
        file = drive_service.files().insert(body=body, media_body=media_body).execute()
        pprint.pprint(file) 
```

令人讨厌的错误是行 file = ...

实际错误是

```
File "./quickstart.py", line 59
  file = drive_service.files().insert(body=body, media_body=media_body).execute()
                                                                              ^
IndentationError: unindent does not match any outer indentation level 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T04:25:47.757

你有

```
 body = {
     'title': filename,
     'description': 'A test document',
     'mimeType': 'text/plain'
  }  
  file = drive_service.files().insert(body=body, media_body=media_body).execute()
  pprint.pprint(file) 
```

当你应该有：

```
 body = {
     'title': filename,
     'description': 'A test document',
     'mimeType': 'text/plain'
    }
    file = drive_service.files().insert(body=body, media_body=media_body).execute()
    pprint.pprint(file) 
```

请注意，该`file =`行应该缩进到与“上方”行缩进相同的级别（`body = ...`）。

# csv - gnuplot 绘制标记数据

> ID：15170696
> 
> 赞同：12
> 
> 时间：2013-03-02T04:25:25.567
> 
> 标签：csv, label, gnuplot, labels

我是 gnuplot 的新手，无法找到某些命令的含义。我想绘制一个 csv 文件，其中行是数据点，三列分别代表数据标签、x 值和 y 值。我希望 x 轴上的第二列和 y 轴上的第三列以及第一列是附加到该点的标签。这是数据

```
ACB,  0.0000000,  0.0000000000
ASW,  1.0919705, -0.0864042502
CDX,  0.0000000,  0.0000000000
CEU, -0.4369415, -0.5184317277
CHB, -0.4686879,  0.7764323199
CHD,  0.0000000,  0.0000000000
CHS, -0.4141749,  0.7482543582
CLM, -0.2559306, -0.2535837629
FIN, -0.5004242, -0.2108050200
GBR, -0.4140216, -0.5132990203
GIH,  0.0000000,  0.0000000000
IBS, -0.4928541, -0.5812216372
JPT, -0.4821734,  0.7263450301
KHV,  0.0000000,  0.0000000000
LWK,  1.4515552, -0.0003996165
MKK,  0.0000000,  0.0000000000
MXL, -0.4019733, -0.0484315198
PEL,  0.0000000,  0.0000000000
PUR, -0.2165559, -0.3173440295
TSI, -0.3956957, -0.4549254002   
YRI,  1.5555644, -0.0202297606 
```

我尝试过类似的东西

```
plot 'infile' using 2:2 with labels, 'infile' using 1:2 
```

但它报告“这种样式的列不足”。我真的不知道冒号周围的数字是什么意思，尽管我在其他人的代码中到处都能看到它们。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-02T14:47:48.597

您可以使用以下命令执行此操作：

```
set datafile sep ','
plot 'test.dat' u 2:3:1 w labels point offset character 0,character 1 tc rgb "blue" 
```

您的部分困惑可能是 gnuplot 对很多事情的速记符号。例如，在上面的命令中，`u`代表`using`和`w`代表`with`和`tc`代表`textcolor`。通常，gnuplot 允许您将命令缩短为可用于识别它的最短的唯一字符序列。所以`with`可以是`w`,`wi`和`wit`gnuplot 将识别其中任何一个，因为没有其他绘图说明符以 . 开头`w`。

using 说明符后的数字是数据文件中的列。所以在这里，标签的 x 位置取自第 2 列。y 位置取自第 3 列。标签文本取自第一列，这是我们获得`using 2:3:1`. 它实际上比这更强大（例如，语法将允许您将 2 列添加在一起以得出 x 或 y 位置），但解释所有这些可能应该留给另一个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T09:52:05.900

由于您使用的是 csv 文件，因此您应该设置分隔符：

```
set datafile separator ',' 
```

另外，我认为这就是你想要做的：

```
plot 'infile' using 2:3, 'infile' 2:3:1 with labels offset 1 
```

# ios - 无法从僵尸那里获得有关崩溃的线索

> ID：15170699
> 
> 赞同：0
> 
> 时间：2013-03-02T04:25:56.697
> 
> 标签：ios, objective-c, zombie-process, nszombieenabled

我从控制台收到此错误

```
[Not A Type _cfTypeID]: message sent to deallocated instance 
```

我也启用了僵尸，`Diagonotics`但无法得到任何提示错误是什么。我的 xcode 已挂起，并向我发送以下消息：

![在此处输入图像描述](../Images/7af5534312edac9362ae05e1b94b09dd.png)

僵尸什么都没有告诉我

![在此处输入图像描述](../Images/e116d4b1d4c639b79630d3fa3f07a03b.png)

错误是什么以及如何以正确的方式使用僵尸来捕获错误..

# sql - 未强制执行 Amazon Redshift 密钥 - 如何防止重复数据？

> ID：15170701
> 
> 赞同：20
> 
> 时间：2013-03-02T04:26:16.943
> 
> 标签：sql, amazon-web-services, amazon-redshift

刚刚测试了**AWS Redshift**，并在插入时发现了一些重复数据，我希望这些数据在键列中的重复时会失败，阅读文档显示主键约束没有“强制”。

任何人都想出了如何防止主键重复（根据“传统”期望）。

感谢所有 Redshift 先驱！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-07T08:26:11.383

我在创建记录时分配 UUID。如果记录本质上是唯一的，我使用类型 4 UUID（随机），如果不是，我使用类型 5（SHA-1 哈希），使用自然键作为输入。
然后，您可以非常轻松地按照AWS 的[此说明](http://docs.aws.amazon.com/redshift/latest/dg/t_updating-inserting-using-staging-tables-.html)执行 UPSERT。如果您的输入有重复，您应该能够通过在临时表中发出类似于以下内容的 SQL 来进行清理：

```
CREATE TABLE cleaned AS
SELECT
  pk_field,
  field_1,
  field_2,
  ...  
FROM (
       SELECT
         ROW_NUMBER() OVER (PARTITION BY pk_field order by pk_field) AS r,
       t.*
       from table1 t
     ) x
where x.r = 1 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-05T12:10:56.007

如果添加标识列用作 rowid 为时已晚（`ALTER`不允许您`IDENTITY`在 Redshift 中添加列），您可以这样做：

*   将所有欺骗行获取到临时表（用于`DISTINCT`摆脱欺骗）
*   从主表中删除这些行
*   将行重新插入主表

这是一个示例：（假设`id`是您检查欺骗的关键，并且`data_table`是您的桌子）

```
CREATE TEMP TABLE delete_dupe_row_list AS
    SELECT t.id FROM data_table t WHERE t.id IS NOT NULL GROUP BY t.id HAVING COUNT(t.id)>1;
CREATE TEMP TABLE delete_dupe_rows AS
    SELECT DISTINCT d.* FROM data_table d JOIN delete_dupe_row_list l ON l.id=d.id;
START TRANSACTION;
DELETE FROM data_table USING delete_dupe_row_list l WHERE l.id=data_table.id;
INSERT INTO data_table SELECT * FROM delete_dupe_rows;
COMMIT;
DROP TABLE delete_dupe_rows;
DROP TABLE delete_dupe_row_list; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-10T23:37:02.600

确认，他们不强制执行：

> 唯一性、主键和外键约束仅供参考；它们不是由 Amazon Redshift 强制执行的。尽管如此，主键和外键被用作计划提示，如果您的 ETL 过程或应用程序中的某些其他过程强制执行它们的完整性，则应声明它们。
> 
> 例如，查询计划器在某些统计计算中使用主键和外键，以推断影响子查询去相关技术的唯一性和引用关系，对大量连接进行排序，并消除冗余连接。
> 
> 规划器利用这些键关系，但它假定 Amazon Redshift 表中的所有键在加载时都是有效的。如果您的应用程序允许无效的外键或主键，某些查询可能会返回不正确的结果。例如，如果主键不唯一，则 SELECT DISTINCT 查询可能会返回重复的行。如果您怀疑表的有效性，请不要为表定义键约束。另一方面，当您知道它们是有效的时，您应该始终声明主键和外键以及唯一性约束。
> 
> Amazon Redshift 确实强制执行 NOT NULL 列约束。

[http://docs.aws.amazon.com/redshift/latest/dg/t_Defining_constraints.html](http://docs.aws.amazon.com/redshift/latest/dg/t_Defining_constraints.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T16:20:14.097

一种快速而肮脏的方法是使用 group by

```
select max(<column_a>), max(<column_a>), <pk_column1>, <pk_column2>
from <table_name>
group by <pk_column1>, <pk_column2> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-08T19:45:31.680

是的，你不能那样做。目前，我认为您应该只插入带有额外时间戳列的重复数据（基本上是重复的键）。所以它将包含该特定行的所有版本，因为更新也是一个插入，当您查询 Redshift 时，请确保选择最新的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-05-14T22:09:46.463

我正在使用 IDENTITY 自动增加我的主键。

这是我在 AWS 论坛上提出的一个问题：

[https://forums.aws.amazon.com/message.jspa?messageID=450157#450157](https://forums.aws.amazon.com/message.jspa?messageID=450157#450157)

# emacs - 在 emacs 中的最后两个缓冲区之间来回切换

> ID：15170705
> 
> 赞同：2
> 
> 时间：2013-03-02T04:26:52.650
> 
> 标签：emacs, elisp

我想在最后两个访问的缓冲区（当前一个和前一个）之间来回切换并将命令绑​​定到`M-b`.

`(switch-to-buffer (other-buffer))`理论上应该可以做到这一点，但是将以下代码添加到我`.emacs`的没有效果。

```
(defun my-switch-to-other-buffer ()
  "Switch to other buffer"
  (interactive)
  (switch-to-buffer (other-buffer)))

(global-set-key [M-b] 'my-switch-to-other-buffer) 
```

请建议修复上述代码或完成此任务的更好方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T04:37:12.013

您的代码看起来很不错，似乎可以在我的 emacs 会话中使用。

你确定`[M-b]`语法吗？

如果这是您可能想要使用该`kbd`功能来确定拼写组合键的正确方法的问题。

```
(global-set-key (kbd "M-b") 'my-switch-to-other-buffer) 
```

我总是以这种方式定义我的键绑定，因为我倾向于忘记如何正确地使用 ?\C-#whatever 获得正确的名称。

使用`kbd`它非常简单，因为它接受一个与`decribe-key`通常绑定到`C-h C-k`.

这样我只需要输入`C-h C-k`以防我不知道键是如何标记的，并将这个命令的输出放在我对`kbd`. 尤其是在似乎不太明显如何正确使用它的情况下，它甚至可以使用更复杂的名称等`kbd`非常有用。`(kbd "<backtab>")`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T20:21:38.353

好的，首先避免重新绑定`M-b`，因为它是反向的，维护默认绑定并学习它们对您很有用，这样您就可以在配置不可用时使用 Emacs，比如在遥控器上框或其他一些不熟悉的站点。（我知道这些天这种可能性可能正在减少。）另一个更相关的原因是它是`bash`/上的默认键绑定，`readline`它在比我不想提及的更多地方可用。

如果您使用的是 windows 框，我建议您将 windows 键绑定到`hyper`or`super`以便您可以在不消除默认值的情况下获得一整套额外的键绑定。

在 mac 上，对`Cmd`(虽然它已经绑定到`super`，并且已经绑定了一堆 mac 特定键) 做同样的事情。

`Caps-Lock`最后，即使您不使用它来替换很多人使用的替换，也要始终重新映射`Ctrl`，它是另一个修饰符，您可以在 Emacs 中重新调整用途并更频繁地使用（真的，当有`M-l`,`M-u`并且`M-c`可用。） - 一旦你得到`hyper`并且`super`你很容易得到另外一百个绑定作为`modifier`+`key`样式快捷方式。

另外，我知道这很麻烦，但`C-x b` `enter`会切换到以前的缓冲区。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-26T11:35:49.260

顺便说一句，上面的 lisp 代码不起作用（有时它会将您带到与前一个不同的另一个缓冲区）。Emacs 有一个内置函数来执行这个任务：**mode-line-other-buffer**

# ruby-on-rails - 在 Rails 3.2.12 中从 webrat 迁移到 capybara 后未定义的方法“访问”

> ID：15170710
> 
> 赞同：0
> 
> 时间：2013-03-02T04:27:47.410
> 
> 标签：ruby-on-rails, rspec, capybara, webrat

我们正在将 rails 集成测试从 webrat 迁移到 capybara。替换`response.should`为`response.body.should`。还添加`require 'capybara/rails'`到 spec_helper.rb。但是有一个错误说`undefined method 'visit'`。每一个都会`visit`导致错误。这是导致错误的前 2 段代码：

```
describe "TestPaths" do
  describe "GET /customerx_test_paths" do
    before(:each) do
      ul = FactoryGirl.build(:user_level, :sys_user_group_id => ug.id)
      u = FactoryGirl.create(:user, :user_levels => [ul], :login => 'thistest', :password => 'password', :password_confirmation => 'password')
      visit 'authentify/'
      fill_in "login", :with => u.login
      fill_in "password", :with => 'password'
      click_button  
    end

    #customer status category
    it "should display customer status category index page" do
      visit customer_status_categories_path
      response.body.should have_selector("title", :content => "Customerx")
    end

...
end 
```

对于下面的 rspec 案例，之前的循环只是登录到系统。水豚代码有什么问题？感谢帮助。

# django - Django 表单不验证

> ID：15170717
> 
> 赞同：0
> 
> 时间：2013-03-02T04:29:02.153
> 
> 标签：django

我正在使用 django 从头开始​​制作一个名为 Startthedark 的应用程序，但我遇到了一个错误。

我会尽可能清楚地解释错误。对不起，如果我不能。

我的应用程序显示一个要求描述的文本框，当我提交描述时，它假设将我重定向到显示最新描述的另一个页面，而不是将我重定向到同一页面。

![在此处输入图像描述](../Images/f1265bb8e87e86e33ecbdd269895ea60.png)

现在我认为问题出在我的views.py 上，因为数据无效，所以它只会让我回到同一页面。而且它不会提交到管理页面的事件模型中。

我的观点.py

```
 from events.models import Event
 from django.shortcuts import render_to_response
 from django.template import RequestContext
 from events.forms import EventForm
 from django.core.urlresolvers import reverse
 from django.http import HttpResponseRedirect

 def tonight(request):
     events = Event.objects.filter(latest=True)
     return render_to_response('events/tonight.html',{'events':events},context_instance = RequestContext(request))

 def create(request):
     form = EventForm(request.POST or None)
     if form.is_valid():
         event = form.save(commit=False) 
         event.creator = request.user
         guessed_date = None
         event.start_date = guessed_date
         event.save()
         request.user.message_set.create(message='Your event was posted')
         if 'next' in request.POST:
             next = request.POST['next']
         else:
             next = reverse('ev_tonight')
         return HttpResponRedirect(next)
     return render_to_response(
         'events/create.html',
         {'form':form},
         context_instance = RequestContext(request)
     ) 
```

我的表格.py

```
 from django import forms
 from events.models import Event
 class EventForm(forms.ModelForm):
     description = forms.CharField(max_length=340,widget=forms.Textarea)

     class Meta:
         model = Event
         fields = ('description',) 
```

我的 URL.conf

```
 from django.conf.urls.defaults import *
 from django.contrib import admin
 from events import views
 urlpatterns = patterns('events.views',
         url(r'^tonight/$','tonight',name='ev_tonight'),
         url(r'^create/$','create',name='ev_create'),
 ) 
```

我的模型.py

```
 from django.db import models
 from datetime import datetime, timedelta
 from django.contrib.auth.models import User
 from django.db.models.query import QuerySet

 class Event(models.Model):
     description = models.TextField()
     creation_date = models.DateTimeField(default = datetime.now)
     start_date = models.DateTimeField(null=True, blank= True)
     creator = models.ForeignKey(User , related_name = 'event_creator_set')
     attendees = models.ManyToManyField(User , through = "Attendance")
     latest = models.BooleanField(default=True)
     def __unicode__(self):
         return self.description
     def save(self, **kwargs):
         now = datetime.now()
         start = datetime.min.replace(year = now.year , month=now.month,day=now.day)
         end = (start + timedelta(days=1)) - timedelta.resolution
         Event.objects.filter(latest=True,      creator=self.creator).filter(creation_date__range=(start,end)).update(latest=False)
         super(Event,self).save(**kwargs)

 class Attendance(models.Model):
     user = models.ForeignKey(User)
     event = models.ForeignKey(Event)
     registration_date = models.DateTimeField(default=datetime.now)

     def __unicode__(self):
         return "%s is attending %s" %(self.user.username,self.event) 
```

我的 create.html

```
 {% extends "tin.html" %}
  {% block title %}Create - {{ block.super }}{% endblock %}
  {% block main_content %}
          <form method = "POST' action"">
              <ul>
              {{ form.as_ul }}
          </ul>
          <input type = "submit" value="Create Event" />
      </form>
  {% endblock %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T06:03:36.927

看起来你需要修复你的模板。表单标签似乎是错误的。您没有正确关闭方法属性，您使用了单引号而不是双引号。这就是您的表单使用表单数据发出 GET 请求的原因。

```
{% extends "tin.html" %}
{% block title %}Create - {{ block.super }}{% endblock %}
{% block main_content %}
    <form method="POST" action"">
        {% csrf_token %}
        <ul>
            {{ form.as_ul }}
        </ul>
        <input type = "submit" value="Create Event" />
    </form>
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T05:44:01.280

```
if form.is_valid():
     .....

     return HttpResponseRedirect(reverse('events:ev_tonight')) 
```

# c# - 鼠标离开容器时关闭 Winform MenuStrip

> ID：15170720
> 
> 赞同：0
> 
> 时间：2013-03-02T04:30:13.750
> 
> 标签：c#, winforms, menu, menuitem, mouseleave

我整天都在处理这个问题。我有一个带有几个菜单项的菜单条。每个项目，也有很多项目。现在，如果我单击父菜单项，一个容器（类似于 contextmenu）会保持打开状态，直到我单击其他位置。

![在此处输入图像描述](../Images/c9e5392987e42a655fcd6d0fc244157a.png)

在图像示例中，“客户”将是父项，而“容器”将是其子菜单项。

我想做的是在鼠标离开父项或容器区域时关闭该“容器”。我不想点击表单的任何其他部分来关闭它。当我这么说时，这是因为我实际上正在使用 WPF 按钮，我需要这样做。

我在这里需要帮助，希望有人能给我一些建议。

我尝试使用父项（“Clientes”等）的 MouseLeave 事件，结果如下：

```
private void clientesToolStripMenuItem_MouseLeave(object sender, EventArgs e)
    {
        clientesToolStripMenuItem.DropDown.Close();
    } 
```

这可行，但显然，当鼠标离开菜单项“Clientes”时，它会关闭父级和容器。我需要一种方法来知道鼠标是在父菜单项上还是在他们的一个子项上，以便在我知道鼠标在其他地方时关闭它。

希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:30:49.280

您可以通过处理 clientesToolStripMenuItem 本身的事件来实现这一点。当鼠标进入您的客户主菜单矩形时，只需显示您的容器并在它离开此矩形时将其隐藏。假设 picContainer 是您的矩形，您可以执行以下操作：

```
private void clientToolStripMenuItem_MouseEnter(object sender, EventArgs e)
{
    picContainer.Location = clientToolStripMenuItem.ContentRectangle.Location;
    picContainer.Show();
}

private void clientToolStripMenuItem_MouseLeave(object sender, EventArgs e)
{
    this.picContainer.Hide();
} 
```

# c++ - 对为什么这个 main 不起作用感到困惑

> ID：15170721
> 
> 赞同：0
> 
> 时间：2013-03-02T04:30:15.140
> 
> 标签：c++

好的，所以我正在尝试编写一个主程序，它将要求用户输入数字 1 到 6，如果数字是 6，它将结束程序。如果大于6，它会要求重新输入数字。问题是，当我运行它时，它不会检查“if”语句并自动转到“请输入另一个选项”这一行

任何想法为什么我的程序会做这样的事情？

更新：我是说它会自动跳过所有`if`语句并询问`while`循环中的最后一个问题。

```
int main()
{
    int userChoice = 0;

    print(); //printing all of the options.

    cout << "Please enter one of the options listed below" <<endl;
    cin >> userChoice;

    while(userChoice != 6)// 6 = the user wishing the end the program when they press 6.
    {
        if(userChoice == 1) //adding integer to the front of the list
        {
            addValueFront();
        }
        else if(userChoice == 2)//adding integer to the back of the list
        {
            addValueBack();
        }
        else if(userChoice == 3)//removing from the list
        {
            int n = 0;
            cout << "Please enter the integer you wish to remove" << endl;
            cin >> n;
            removeValue(n);
        }
        else if(userChoice == 4)//printing the list
        {
            printList();
        }
        else if(userChoice == 5)//printing the number of items from the list
        {
            printItem();
        }

        else
        {
            cout << "The number you have entered is too high. Please try again" << endl;
            cin >> userChoice;
        }
        cout << "please enter another option" <<endl;

        cin >> userChoice; //sets up which option the user can choose from.
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T04:42:16.680

在 else 块的末尾添加“继续”。

```
cout << "The number you have entered is too high. Please try again" << endl;
cin >> userChoice;
continue; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T04:43:31.920

我认为以下程序是您想要的：

```
int main()                                                                     
{                                                                              
  int userChoice = 0;                                                         

  print(); //printing all of the options.                                      

  cout << "Please enter one of the options listed below" <<endl;                                                                                                  
  do // 6 = the user wishing the end the program when they press 6\.                  
  {                                                                            
    cin >> userChoice;
    if(userChoice > 6)                                                      
    {                                                                       
      cout << "The number you have entered is too high. Please try again" << endl;
      cout << "please enter another option" <<endl;                         
    }                                                                       
    else if(userChoice == 1) //adding integer to the front of the list         
    {                                                                          
      addValueFront();                                                         
    }                                                                          
    else if(userChoice == 2)//adding integer to the back of the list           
    {
      addValueBack();                                                          
    }
    else if(userChoice == 3)//removing from the list                           
    {
      int n = 0;                                                               
      cout << "Please enter the integer you wish to remove" << endl;           
      cin >> n;                                                                
      removeValue(n);                                                          
    }                                                                          
    else if(userChoice == 4)//printing the list                                
    {                                                                          
      printList();                                                             
    }                                                                          
    else if(userChoice == 5)//printing the number of items from the list       
    {                                                                          
      printItem();                                                             
    }                                                                          
  } while(userChoice != 6);                                                    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T04:58:30.457

请参阅[this question](https://stackoverflow.com/questions/13986794/clearing-keyboard-buffer-in-c)和[this question](https://stackoverflow.com/questions/5131647/why-would-we-call-cin-clear-and-cin-ignore-after-reading-input)的答案。您需要在每个 cin<< 之前调用 cin.clear() 和 cin.ignore() 来刷新键盘缓冲区，使其行为正确且一致。

此外，您应该从 else 块中删除 cin，因为它在逻辑上不正确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T09:59:33.500

使用 switch 将是更好的选择。

```
int main()
{
    int userChoice = 0;

    print(); //printing all of the options.

    cout << "Please enter one of the options listed below" <<endl;
    cin >> userChoice;

    while(1)// 6 = the user wishing the end the program when they press 6.
    {
        if(userChoice == 1) //adding integer to the front of the list
        {
            addValueFront();
        }
        else if(userChoice == 2)//adding integer to the back of the list
        {
            addValueBack();
        }
        else if(userChoice == 3)//removing from the list
        {
            int n = 0;
            cout << "Please enter the integer you wish to remove" << endl;
            cin >> n;
            removeValue(n);
        }
        else if(userChoice == 4)//printing the list
        {
            printList();
        }
        else if(userChoice == 5)//printing the number of items from the list
        {
            printItem();
        }
        else if(userChoice == 6)// 6 = the user wishing the end the program when they press 6.
        {
            return 0;
        }
        else
        {
            cout << "The number you have entered is too high. Please try again" << endl;
            cin >> userChoice;
        }
    }
} 
```

# haskell - 有人可以介绍一下状态单子中的绑定是如何实现的（除其他外）吗？

> ID：15170727
> 
> 赞同：4
> 
> 时间：2013-03-02T04:32:16.823
> 
> 标签：haskell, monads, state-monad

尽管阅读了 LYAH 中非常清楚的解释，然后是 Haskell Wiki 和其他一些东西，但我仍然对 state monad 的*实现*方式感到困惑。我想我明白它是什么，虽然我不自信。

所以假设我有一些微不足道的数据类型：

```
data Simple a = Top a 
  deriving ( Show ) 
```

还有这个：

```
newtype SimpleState a = SimpleState { applySimple :: Int -> ( a, Int ) } 
```

然后我让 SimpleState 成为一个单子

```
instance Monad SimpleState where
    return x = SimpleState $ \s -> ( x, s )
    st >>= g = SimpleState $ \s -> let ( x, s' ) = applySimple st s in applySimple ( g x ) s' 
```

问题 1： lambda 如何将 s ( for state ) 作为参数？它是如何传入的？

问题2：如果`applySimple`在其函数签名中接受一个参数，为什么我`applySimple st s`在lambda里面？为什么要`applySimple`申请两次？

更令人困惑的是，这件事改变了状态：

```
tic :: SimpleState Int
tic = SimpleState $ \s -> ( s, s + 1 ) 
```

问题 3\. 这是什么？为什么它对 SimpleState 执行某种操作，但它的签名不是函数？

所以现在我可以将 tic 传递给这个函数：

```
incr :: Simple a -> SimpleState ( Simple ( a, Int ) ) 
incr ( Top a ) = do 
  v <- tic
  return ( Top ( a, v ) ) 
```

问题 4：我可以/我如何将 tic 与 tic 一起使用`>>=`？

并像这样使用它：

```
applySimple ( incr ( Top 1 ) ) 3 
```

我明白了：

```
(Top (1,3),4) 
```

同样，`applySimple`应用于两个参数，这让我感到困惑。

总而言之，我对构造函数`SimpleState`正在接受一个将 s 作为参数的函数，并且不知道它来自于它在上下文中的使用方式这一事实感到非常困惑。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-02T04:55:27.440

好吧，你已经把一堆问题塞进了一个帖子里……

## 1\. lambda参数`s`从何而来？

```
return x = SimpleState $ \s -> ( x, s ) 
```

如果您查看您的构造函数`SimpleState`，您会注意到它需要一个类型的函数`Int -> (a, Int)`作为参数。所以使用 lambda 是为了给我们一个正确类型的函数。Lambda 只是创建函数的一种方式。

之所以需要一个函数，是因为只有通过函数参数才能访问状态单子的当前状态。

## 2\. 为什么`applySimple`取两个参数？

那是因为它是一个字段访问器。

```
data Point = Point { x :: Int, y :: Int } 
```

是什么类型的`x`？嗯，是的`Point -> Int`。它从一个值中提取一个字段`Point`。

```
origin = Point 0 0
potOfGold = Point 15 3

main = putStrLn $ "Pot of gold is at (" ++ show (x potOfGold) ++ ", " ++
                  show (y potOfGold) ++ ")" 
```

显然，`x`没有类型`Int`，因为每个`Point`. 同样地，

```
newtype MyState a = MyState { runState :: Int -> (a, Int) } 
```

是什么类型的`runState`？嗯，是的`MyState -> Int -> (a, Int)`。`MyState a`它从一个值中提取一个字段（唯一的字段） 。

## 为什么`tic`不是函数？

一元动作不必是函数。例如，考虑一下代码`putStrLn`：

```
main = putStrLn "Hello, world." 
```

做某事对你来说是有意义的，`putStrLn`因为它是一个函数，对吧？好吧，你是对的，它做了一些事情，但你的推理是错误的。您正在将命令式直觉用于功能语言。严格来说，`putStrLn`不打印任何东西，它是一个返回单子动作的函数，结果单子动作打印`"Hello, world."`。

```
printHello :: IO ()
printHello = putStrLn "Hello, world." 
```

显然，这会有所作为。它不是一个函数，因为它不带参数。如果您想了解 Haskell，请记住这一点：“做某事”是一元动作的属性，与函数*无关。*

## 4\. 我可以/如何使用`tic`with`>>=`吗？

就 Stack Overflow 上的问题而言，“我如何将功能 X 与功能 Y 一起使用”是我最讨厌的问题列表的顶部。这就像问“我如何在厨房里用水”，我说“你可以拖地”，但实际上你口渴了，想喝水。最好问一个问题，例如“我如何用水清洁地板？” 或“如何用水解渴？” 这些问题是可以回答的。

因此，问题 4 的答案是“是的，您可以使用`tic`with `>>=`。” 而且，“你如何使用它取决于你想做什么。”

**脚注：**我建议您遵循主要的编码风格，例如，`f (x y)`而不是`f ( x y )`，因为它会帮助人们阅读您的代码。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-02T06:18:01.893

> 问题 1： lambda 如何将 s ( for state ) 作为参数？它是如何传入的？

`get`让我们使用and的经典定义`put`，定义为：

```
put :: Int -> SimpleState ()
put n = SimpleState (\_ -> ((), n))

get :: SimpleState Int
get = SimpleState (\s -> (s, s)) 
```

当您调用时`applySimple`，您打开`SimpleState`，它公开了一个类型的函数`Int -> (a, Int)`。然后将该函数应用于初始状态。让我们用一些具体的例子来尝试一下。

首先，我们将运行命令`put 1`，初始状态为`0`：

```
applySimple (put 1) 0

-- Substitute in definition of 'put'
= applySimple (SimpleState (\_ -> ((), 1))) 0

-- applySimple (Simple f) = f
(\_ -> ((), 1)) 0

-- Apply the function
= ((), 1) 
```

请注意如何`put`忽略初始状态并仅将右侧状态槽替换为`1`，将左侧返回值槽留在后面`()`。

现在让我们尝试运行 get 命令，使用的起始状态为`0`：

```
applySimple get 0

-- Substitute in definition of 'get'
= applySimple (SimpleState (\s -> (s, s))) 0

-- applySimple (SimpleState f) = f
= (\s -> (s, s)) 0

-- Apply the function
= (0, 0) 
```

`get`只是复制`0`到左边的返回值槽，而右边的状态槽保持不变。

因此，您将初始状态传递给该 lambda 函数的方式只是展开新`SimpleState`类型以公开底层 lambda 函数并将 lambda 函数直接应用于初始状态。

> 问题 2：如果 applySimple 在其函数签名中接受一个参数，为什么我在 lambda 中有 applySimple st s？为什么 applySimple 应用了两次？

那是因为`applySimple`'s 类型不是`Int -> (a, Int)`. 其实是：

```
applySimple :: SimpleState -> Int -> (a, Int) 
```

这是 Haskell 记录语法的一个令人困惑的方面。每当您有如下记录字段时：

```
data SomeType { field :: FieldType } 
```

... then`field`的类型实际上是：

```
field :: SomeType -> FieldType 
```

我知道这很奇怪。

> 问题 3\. 这是什么？为什么它对 SimpleState 执行某种操作，但它的签名不是函数？

newtype`SimpleState`隐藏了它包装的函数。 `newtypes`可以隐藏任何东西，直到你打开它们。你`SimpleState`里面确实有函数，但是编译器看到的只是外部的新类型，直到你用`applySimple`.

> 问题 4：我可以/我如何将 tic 与 >>= 一起使用？

你在定义中犯了一个错误`incr`。正确的使用`tic`方法是这样的：

```
ticTwice :: SimpleState ()
ticTwice = do
    tic
    tic 
```

...编译器将其转换为：

```
ticTwice =
    tic >>= \_ ->
    tic 
```

使用`(>>=)`和 tic 的定义，您可以证明这会将值增加 2：

```
tic >>= \_ -> tic

-- Substitute in definition of `(>>=)`
SimpleState (\s ->
    let (x, s') = applySimple tic s
    in  applySimple ((\_ -> tic) x) s')

-- Apply the (\_ -> tic) function
SimpleState (\s ->
    let (x, s') = applySimple tic s
    in  applySimple tic s')

-- Substitute in definition of `tic`
SimpleState (\s ->
    let (x, s') = applySimple (SimpleState (\s -> (s, s + 1))) s
    in  applySimple (SimpleState (\s -> (s, s + 1))) s'

-- applySimple (SimpleState f) = f
SimpleState (\s ->
    let (x, s') = (\s -> (s, s + 1)) s
    in  (\s -> (s, s + 1)) s'

-- Apply both functions
SimpleState (\s ->
    let (x, s') = (s, s + 1)
    in  (s', s' + 1)

-- Simplify by getting rid of unused 'x'
SimpleState (\s ->
    let s' = s + 1
    in  (s', s' + 1)

-- Simplify some more:
SimpleState (\s -> s + 1, s + 2) 
```

所以你会看到，当你链接两个`tic`s using`(>>=)`时，它会将它们组合成一个有状态的函数，该函数将状态递增`2`，并返回状态 plus `1`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-02T04:55:12.493

在`State`monad 中，bind 组合有状态函数（类似于通常的`(.)`组合。当你完成组合计算（即`do`块中的所有东西）时，你可以在初始状态*value上**运行*东西。

 *> 问题 1： lambda 如何将 s ( for state ) 作为参数？它是如何传入的？

紧随其后的 lambda 绑定是您最终运行单子计算`SimpleState`的*初始状态值。*如果您使用的是一种状态可以更改类型的构造，而不是仅限于`s`.

> 为什么 applySimple 应用了两次？

具体发生的事情是从包装器`applySimple`中提取你的；然后将该函数应用于 ( ) 后面的内容。这与做的想法相同：.`Int -> ( a, Int )``newtype``s``($) (+1) 1`

> 为什么它对 SimpleState 执行某种操作，但它的签名不是函数？

我认为理解 bound`\s->`是你*最初*的TBD 状态，并且从 bind as composition 的角度思考会让你到达那里。这是一种与单子非常不同的野兽`Maybe`。

FWIW 许多人似乎发现我写的这个[旧教程](http://brandon.si/code/the-state-monad-a-tutorial-for-the-confused/)很有帮助。*

# html - 减少链接边框

> ID：15170729
> 
> 赞同：1
> 
> 时间：2013-03-02T04:32:31.523
> 
> 标签：html, css, hyperlink, border

简介 - 我需要使文本和边框之间的间距更小。

它看起来像什么：

![它看起来像什么](../Images/fa07f9392086e5f802be06e931933bcc.png)

它需要看起来像什么：

![它需要看起来像什么](../Images/a77653542a83d0e86838b9bc7318532b.png)

**HTML -**

```
<div class="navigation">
        <ul>
            <li><a href="#" class="active">Home</a></li>
            <li><a href="#">Work</a></li>
            <li><a href="#">About</a></li>
        </ul>
    </div> 
```

**CSS -**

```
a { font: 36px 'Bebas Neue', Arial, Sans-Serif; color: #fff; text-decoration: none; }
a:hover { color: #d5a72b; border-top: 3px solid #d5a72b; border-bottom: 3px solid #d5a72b; border-spacing: 0; }
a.active { color: #d5a72b; border-top: 3px solid #d5a72b; border-bottom: 3px solid #d5a72b; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T04:41:40.543

我不认为你可以减少文本和边框之间的空间。这是使用`:before`and`:after`伪元素的解决方案。要调整间距，请更改`top`和`bottom`值。

[参见 JSFiddle](http://jsfiddle.net/Y6Dj3/)

```
a { 
    font: 36px 'Bebas Neue', Arial, Sans-Serif; 
    color: red; 
    text-decoration: none;
    position:relative;
}

a:before,
a:after {
    content:"";
    position:absolute;
    left:0;
    right:0;
    height:4px;
    background-color:#000;
}

a:before {
    top:2px;
}

a:after {
    bottom:2px;
} 
```

还有一个方便的技巧，您可以使用以下规则通过 CSS 将 'Home' 更改为 'HOME'：

```
text-transform:uppercase; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T04:46:10.557

您可以使用`line-height`属性和使用`padding`. 在这种情况下，您需要调整`line-height`：

```
line-height: 10px; 
```

**演示：http: [//jsfiddle.net/Y6Dj3/1/](http://jsfiddle.net/Y6Dj3/1/)**

# terminology - 用于描述引用另一个变量的变量的术语是什么？

> ID：15170734
> 
> 赞同：0
> 
> 时间：2013-03-02T04:33:26.797
> 
> 标签：terminology

当一个变量被声明时，变量和它的值之间有一个“步骤”。

```
x = 'hi' 
```

根据代码的复杂性，x 可能被其他变量和参数引用。这可以创建许多“步骤”来恢复原始表达式。

这种现象有术语吗？长链表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T04:37:33.200

您是在谈论语义表达式（在这种情况下，可以随意称呼它，例如“递归解引用”），还是编程术语（在这种情况下，我能想到的最接近的东西是“指针”）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:24:56.090

在 C++ 中，除了指针之外，还有**引用**。

引用类似于*指针*，但保证确实有一个对象可以访问（相比之下，指针也可以为 NULL，因此，可能有必要检查它指向的实际上是否有一个对象. 或者可以有意将其设置为 NULL - 不是参考）。

那是你要找的吗？

示例（引用由类型后的 & 符号定义）：

```
std::string original = "foo";

// Reference to the original variable
std::string& myRef = original;
cout << original << "  " << myRef << endl;

// Now change the original -> reference should follow since it's not a copy
original = "bar";
cout << original << "  " << myRef << endl;

// Reference to the reference
std::string& newRef = myRef;

// Again changing the original -> both ref's follow
original = "baz";
cout << original << "  " << myRef << "  " << newRef << endl; 
```

输出将是：

```
foo  foo
bar  bar
baz  baz  baz 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T04:53:01.303

就像 roach374 所说，我认为“指针”可能是您所追求的。

# opengl-es - 在一个着色器通道中渲染多个纹理

> ID：15170736
> 
> 赞同：2
> 
> 时间：2013-03-02T04:33:40.417
> 
> 标签：opengl-es, branch, webgl

在 WebGL 中一次渲染多个纹理是否会更快，例如：

```
varying float materialIndex;
varying vec2 textureCoord; 

uniform sampler2D textureSampler1;
uniform sampler2D textureSampler2;
uniform sampler2D textureSampler3;
uniform sampler2D textureSampler4;

vec4 getMaterial(float materialId, textureCoord) {
    vec4 color;

    if (materialId == 1.0)
    {
        color = texture2D( textureSampler1, textureCoord );
    }
    else if (materialId == 2.0)
    {
        color = texture2D( textureSampler2, textureCoord );
    }
    else if (materialId == 3.0)
    {
        color = texture2D( textureSampler3, textureCoord );
    }
    else
    {
        color = texture2D( textureSampler4, textureCoord );
    }

    return color;
}

void main()               
{                  
    vec4 color = getMaterial(materialIndex, textureCoord);
    gl_FragColor = color;        
} 
```

因为这将节省 CPU 必须发送到 GPU 的指令的四分之一，除了顶点着色器必须传递的额外信息之外，在大多数情况下，它不会比 4 倍的程序调用更快吗？我已经读到，即使在 opengl 中，迄今为止最大的性能损失也是 cpu，我敢打赌 Webgl 更是如此。或者这可能会更快？

```
uniform float materialIndex;
varying vec2 textureCoord; 

uniform sampler2D textureSampler1;
uniform sampler2D textureSampler2;
uniform sampler2D textureSampler3;
uniform sampler2D textureSampler4;

void main()               
{                  
    vec4 color = getMaterial(materialIndex, textureCoord);
    gl_FragColor = color;        
} 
```

或者就 CPU 必须执行的调用次数而言，更改功能统一与加载新着色器一样糟糕？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T05:28:36.867

批处理很重要，是的。但这并不*重要*。尤其是当遇到某种硬件可以从*所有四种纹理*中采样的可能性时，无论如何。

在不同的情况下，编译器不知道值如何变化。因此，它将假设任何片段都可以获得任何值。所以它必须为所有东西做一个运行时分支。并且由于条件分支的成本，编译器通常会尝试通过简单地执行所有可用路径并使用非分支逻辑来计算最终结果来避免执行 4 个连续的条件分支。

您的统一案例也不能避免这种“优化”，因为某些较旧的硬件在功能上根本无法对重要指令进行条件分支。因此，他们别无选择，只能在每次更改制服时重新编译着色器（这不是夸张；旧硬件上的 NVIDIA 编译器实际上就是这样做的）或执行所有 4 次纹理访问。

哦，还有一件事：`texture2D`在非统一控制流中（如在条件执行的块中），函数变得未定义。现在，由于您使用它的方式，它可能不会在这里伤害您。但一般来说，您需要使用显式渐变或从条件块中删除纹理访问函数。我记得，WebGL 没有渐变纹理功能。

简而言之，只需更改纹理并重新渲染即可。即使在 JavaScript 中，这也不会像可能进行 4 次纹理访问那样影响您的性能。只要您只在渲染之间绑定纹理（即：您没有更改程序或其他状态），并且您正在观察良好做法（在状态更改之间尽可能多地渲染），您应该相对没问题.

# c# - .NET 中的异步读取问题 - 似乎我的回调在不应该被调用时被多次调用

> ID：15170738
> 
> 赞同：7
> 
> 时间：2013-03-02T04:33:47.807
> 
> 标签：c#, asynchronous

基本上，我正在为一个设计得非常快速、小巧且健壮的系统编写一些代码。我从一些异步示例开始，`TcpListener`并`TcpClient`编写了一个服务器和客户端类，该类基本上在我的项目中的多个地方使用。

基本上我的服务器类（代码将在后面）都是基于事件的，客户端代码也是如此。当我收到数据包 - 一个接一个 - 通过服务器或客户端套接字进入时 - 一切正常。

但是，如果发送方（例如 A 类使用客户端类）通过 TCP 流将一堆数据包发送到 B 类中的服务器类。当然，服务器类可能会将所有数据包作为一个大的大包来获取。所以当数据接收事件的回调发生时，我抓取缓冲区然后处理它。

这就是有趣的事情发生的地方。我的问题不是将所有数据包从大缓冲区中拆分出来。我的问题是由于某种我无法理解的原因。假设我从客户端向服务器发送了 5 个数据包（反之亦然），而另一方得到了所有 5 个数据包。触发了 datarecieve 事件，然后抓住了窃听器，所有 5 个数据包数据包在那里。它们被处理。但随后事件再次触发..

换句话说，不是事件触发一次，而是针对 5 个单独的数据包触发 5 次，我最终处理了包含这 5 个数据包的缓冲区 5 次。

由于我正在设计一个分布式网络，这意味着模块与之通信的节点（模块（客户端类）<-->节点（服务器类）<-->客户端（客户端类））获得25个数据包而不是5个. 然后它将这些转发到目的地，得到 25*5 或 125 个数据包。

我很确定我在这里遗漏了一些明显的东西。我已经尝试过让事件只触发一次的方法。我最终可能会认输并重写服务器和客户端类，以便它们是同步的并且每个客户端实例（或服务器端）都有一个线程，一个接受的线程，以及每个客户端连接一个线程）——这样我就可以更好地处理数据流。即数据包进来，如果它的整个过程。如果不是，请等待它完整，等等。使用典型的开始/结束特殊字节等等。

服务器类 - 大部分都在那里。去掉了一些不相关的，比如 KillClient 等。

```
 public class Server
{
    private TcpListener serverListener;
    private List<ServerClient> clients;

    #region Callbacks

    public delegate void incomingDataCallback(byte[] buffer, string clientID, TcpClient tcpClient);
    public incomingDataCallback incomingData = null;

    public delegate void incomingConnectionCallback(string clientID, TcpClient tcpClient);
    public incomingConnectionCallback incomingConnection = null;

    public delegate void connectionClosedCallback(string clientID, TcpClient tcpClient);
    public connectionClosedCallback connectionClosed = null;

    public delegate void dataWrittenCallback(string clientID, TcpClient tcpClient);
    public dataWrittenCallback dataWritten = null;

    #endregion

    // Constructor
    public Server(string listenIP, int listenPort)
    {
        // Create a new instance of serverlistener.
        serverListener = new TcpListener(IPAddress.Parse(listenIP), listenPort);
        this.clients = new List<ServerClient>();
        this.Encoding = Encoding.Default;
    }

    ~Server()
    {
        // Shut down the server.
        this.Stop();
    }

    public Encoding Encoding { get; set; }

    public IEnumerable<TcpClient> TcpClients
    {
        get
        {
            foreach (ServerClient client in this.clients)
            {
                yield return client.TcpClient;
            }
        }
    }

    public IEnumerable<TcpClient> TcpClients
    {
        get
        {
            foreach (ServerClient client in this.clients)
            {
                yield return client.TcpClient;
            }
        }
    }

    public void Stop()
    {
        this.serverListener.Stop();
        lock (this.clients)
        {
            foreach (ServerClient client in this.clients)
            {
                client.TcpClient.Client.Disconnect(false);
                if (connectionClosed != null)
                    connectionClosed(client.ID, client.TcpClient);
            }
            this.clients.Clear();
        }
    }

    public void WriteToClient(TcpClient tcpClient, byte[] bytes)
    {
        NetworkStream networkStream = tcpClient.GetStream();

        try
        {
            networkStream.BeginWrite(bytes, 0, bytes.Length, WriteCallback, tcpClient);
        }
        catch (System.IO.IOException ex)
        {
            // Port was closed before data could be written. 
            // So remove this guy from clients.
            lock (this.clients)
            {
                foreach (ServerClient cl in clients)
                {
                    if (cl.TcpClient.Equals(tcpClient))
                    {
                        this.clients.Remove(cl);
                        if (connectionClosed != null)
                            connectionClosed(cl.ID, cl.TcpClient);
                        break;
                    }
                }
            }

        }
    }

    private void WriteCallback(IAsyncResult result)
    {
        TcpClient tcpClient = result.AsyncState as TcpClient;
        NetworkStream networkStream = tcpClient.GetStream();
        networkStream.EndWrite(result);

        // Get the ID and return it
        //ServerClient client = result.AsyncState as ServerClient;

        //string ipaddr = ((IPEndPoint)(tcpClient.Client.RemoteEndPoint)).Address.ToString();
        string port = ((IPEndPoint)(tcpClient.Client.RemoteEndPoint)).Port.ToString();

        Console.WriteLine("Write callback called for: " + port);

        //                if (dataWritten != null)
        //                  dataWritten(client.ID, tcpClient);
    }

    private void AcceptTcpClientCallback(IAsyncResult result)
    {
        TcpClient tcpClient;

        try
        {
            tcpClient = serverListener.EndAcceptTcpClient(result);
        }
        catch
        {
            // Often get this error when shutting down the server
            return;
        }

        NetworkStream networkStream = tcpClient.GetStream();
        byte[] buffer = new byte[tcpClient.ReceiveBufferSize];

        // Get the IP Address.. this will be used for id purposes. 
        string ipaddr = ((IPEndPoint)(tcpClient.Client.RemoteEndPoint)).Address.ToString();
        string port = ((IPEndPoint)(tcpClient.Client.RemoteEndPoint)).Port.ToString();

        // Create a client object for this client.
        ServerClient client = new ServerClient(tcpClient, buffer, ipaddr + ":" + port);

        Console.WriteLine("Data availiable: " + networkStream.DataAvailable.ToString());
        Console.WriteLine("Amount of data: " + tcpClient.Available.ToString());

        // Lock the list and add it in.
        lock (this.clients)
        {
            this.clients.Add(client);
        }

        if (networkStream.DataAvailable)
        {

            int read = networkStream.Read(client.Buffer, 0, client.Buffer.Length);
            Console.WriteLine("Calling ReadHandle directly with " + read.ToString() + " number of bytes. for clientid: " + client.ID);
            ReadHandle(client, read, networkStream);

        }
        else
        {

            Console.WriteLine("Started beginRead for client in accept connection: " + client.ID);
            networkStream.BeginRead(client.Buffer, 0, client.Buffer.Length, ReadCallback, client);
            //networkStream.

            Console.WriteLine("Data availiable: " + networkStream.DataAvailable.ToString());
            Console.WriteLine("Amount of data: " + tcpClient.Available.ToString());
        }

        Console.WriteLine("Starting BeginAcceptTcpClient again - client: " + client.ID);
        serverListener.BeginAcceptTcpClient(AcceptTcpClientCallback, null);

        // Notify owner that new connection came in
        if (incomingConnection != null)
            incomingConnection(client.ID, tcpClient);
    }

    private void ReadCallback(IAsyncResult result)
    {
        ServerClient client = result.AsyncState as ServerClient;

        if (client == null)
        {
            Console.WriteLine("ReadCallback: Null client");
            return;
        }

        int read = 0;

        NetworkStream networkStream = client.NetworkStream;
        try
        {
            read = networkStream.EndRead(result);
        }
        catch (System.IO.IOException ex)
        {
            Console.WriteLine("ReadCallback: Exception occured during reading.. Message: " + ex.Message + " client " + client.ID);
            lock (this.clients)
            {
                this.clients.Remove(client);
                if (connectionClosed != null)
                    connectionClosed(client.ID, client.TcpClient);
                return;
            }

        }

        ReadHandle(client, read, networkStream);
    }

    private void ReadHandle(ServerClient client, int read, NetworkStream networkStream)
    {

        // If zero bytes read, then client disconnected.
        if (read == 0)
        {
            Console.WriteLine("ReadHandle: Read == 0, closing connection for Client: " + client.ID);
            lock (this.clients)
            {
                this.clients.Remove(client);
                if (connectionClosed != null)
                    connectionClosed(client.ID, client.TcpClient);
                return;
            }
        }

        //string data = this.Encoding.GetString(client.Buffer, 0, read);

        // Do something with the data object here.
        if (incomingData != null)
            incomingData(client.Buffer, client.ID, client.TcpClient);

        // Go back to accepting data from client.
        try
        {
          networkStream.BeginRead(client.Buffer, 0, client.Buffer.Length, ReadCallback, client);
            Console.WriteLine("ReadHandle: BeginRead called for client " + client.ID);
        }
        catch (Exception ex)
        {
            // Damn, we just lost the client.
            Console.WriteLine("ReadHandle: Exception occured during trying to BeginRead.. Message: " + ex.Message + " client " + client.ID);
            lock (this.clients)
            {
                this.clients.Remove(client);
                if (connectionClosed != null)
                    connectionClosed(client.ID, client.TcpClient);
                return;
            }
        }

    }
}

internal class ServerClient
{
    public ServerClient(TcpClient tcpClient, byte[] buffer, string ipaddr)
    {
        if (tcpClient == null) throw new ArgumentNullException("tcpClient");
        if (buffer == null) throw new ArgumentNullException("tcpClient");
        if (ipaddr == null) throw new ArgumentNullException("tcpClient");

        this.TcpClient = tcpClient;
        this.Buffer = buffer;
        this.ID = ipaddr;
    }

    public TcpClient TcpClient { get; private set; }
    public byte[] Buffer { get; private set; }
    public string ID { get; private set; }
    public NetworkStream NetworkStream
    {
        get
        {
            return TcpClient.GetStream();
        }
    }
}
} 
```

这是客户端类 - 与服务器相比，它更小更简单。

```
public class Client
{
    private IPAddress address;
    private int port;
    private string ID;

    //private WaitHandle addressSet;
    private TcpClient tcpClient;
    private int failedConnectionCount;

    public bool keepOnTrying = false;

    #region Callbacks

    public delegate void incomingDataCallback(byte[] buffer, string serverID);
    public incomingDataCallback incomingData = null;

    public delegate void connectedCallback(string serverID);
    public connectedCallback clientConnected = null;

    public delegate void connectionFailedCallback(string serverID);
    public connectionFailedCallback clientConnectionFailed = null;

    public delegate void connectionClosedCallback(string serverID);
    public connectionClosedCallback connectionClosed = null;

    public delegate void dataWrittenCallback(string serverID);
    public dataWrittenCallback dataWritten = null;

    #endregion

    public Client(IPAddress address, int port)
    {
        this.address = address;

        if (port < 0) throw new ArgumentException();

        this.port = port;
        this.tcpClient = new TcpClient();
        this.Encoding = Encoding.Default;
        this.ID = address.ToString() + ":" + port.ToString();

        tcpClient.ReceiveBufferSize = 16384;
        tcpClient.SendBufferSize = 16384;
    }

    // Destructor
    ~Client()
    {
        this.Disconnect();
    }

    public Encoding Encoding { get; set; }

    public void Connect()
    {
        tcpClient.BeginConnect(address, port, ConnectCallback, null);
    }

    public void Disconnect()
    {
        tcpClient.Close();
        if (connectionClosed != null)
            connectionClosed(ID);
    }

    public void Write(byte[] bytes)
    {
        NetworkStream networkStream = tcpClient.GetStream();

        networkStream.BeginWrite(bytes, 0, bytes.Length, WriteCallback, null);
    }

    private void WriteCallback(IAsyncResult result)
    {
        NetworkStream networkStream = tcpClient.GetStream();

        if (tcpClient.Connected)
        {
            networkStream.EndWrite(result);
        }

        if (dataWritten != null)
            dataWritten(ID);
    }

    private void ConnectCallback(IAsyncResult result)
    {
        // Check to see if connected successfully or not. If we didnt, then the try/catch block will increment
        // the failed connection count.
        try
        {
            tcpClient.EndConnect(result);
        }
        catch
        {
            Interlocked.Increment(ref failedConnectionCount);
            if (keepOnTrying)
                tcpClient.BeginConnect(address, port, ConnectCallback, null);

            if (clientConnectionFailed != null)
                clientConnectionFailed(ID);

            return;
        }

        // Connected successfully.
        // Now begin async read operation.

        NetworkStream networkStream = tcpClient.GetStream();
        byte[] buffer = new byte[tcpClient.ReceiveBufferSize];
        networkStream.BeginRead(buffer, 0, buffer.Length, ReadCallback, buffer);

        if (clientConnected != null)
            clientConnected(ID);
    }

    private void ReadCallback(IAsyncResult result)
    {
        int read;
        NetworkStream networkStream;

        try
        {
            networkStream = tcpClient.GetStream();
            read = networkStream.EndRead(result);

        }
        catch
        {
            // An error has occured when reading.. -.-
            Console.WriteLine("Error occured while reading for ID: " + ID);
            return;
        }

        // If read is 0, then connection was closed

        if (read == 0)
        {
            if (connectionClosed != null)
                connectionClosed(ID);
            return;
        }

        if (result.IsCompleted == false)
        {
            Console.WriteLine("Uh oh ");
        }

        byte[] buffer = result.AsyncState as byte[];

        if (incomingData != null)
            incomingData(buffer, ID);

        // Then begin reading again.
        networkStream.BeginRead(buffer, 0, buffer.Length, ReadCallback, buffer);
    }

} 
```

我使用这些类的方式是这样的：

1.  创建一个类，然后创建一个服务器或客户端的对象。
2.  绑定所有回调。即在你的类中为每个回调创建函数。
3.  调用服务器启动或客户端连接。取决于您使用的是哪个。

因此，要复制我的问题，请执行以下操作：

1.  在一个程序中创建服务器类，在另一个程序中创建客户端。让客户端连接到服务器。
2.  对传入的数据进行回调。我使用序列化，所以你可以做类似的事情。
3.  让客户端一次向服务器发送一堆数据。对我来说，我在模块中将 JSON 数据转换为我自己的格式，然后将其发送到服务器。所以服务器一次得到一堆数据包。
4.  应该看到 - 如果速度足够快 - 服务器会将所有数据包放入接收缓冲区，并且每次调用incomingDataCallback 时 - 您将拥有一个包含所有数据包的缓冲区。它会为收到的每个数据包调用它。不是字节，整个数据包。

因此，在我将代码重写为同步并在线程中运行之前：

1.  有什么我可以做的不同/更好的事情，以便在数据进入时做到这一点 - 要么它调用一次事件，我就可以处理缓冲区中的所有数据包 - 或者 -
2.  有没有办法确保被调用的任何其他事件不会与初始事件共享相同的缓冲区？我知道这是浪费处理器时间——但我可以在我的incomingDataCallback 处理程序中有一个“如果前10 个字节是00，则返回”行。这就是为什么我想在第一个事件中使缓冲区全部无效并在后续事件中检测这些缓冲区。

更新：由于 Servy 的评论 - 这是我使用这些类的方式。不是 c/p'ing 一切，只是相关部分。

节点 - 使用服务器类。

```
class ModuleClient
{
    private List<ModuleClientInfo> clients = new List<ModuleClientInfo>();
    private Server myServer = null;

    public ModuleClient()
    {
        // create a server object
        myServer = new Server("127.0.0.1", 9000);

        // Attach callbacks
        myServer.connectionClosed = connClosed;
        myServer.dataWritten = dataWritten;
        myServer.incomingConnection = incomingConn;
        myServer.incomingData = incomingData;
    }

    public void startListeningForModules()
    {
        if (!listeningForModules)
            myServer.Start();
        else
            return;

        listeningForModules = true;
    }

    private void incomingData(byte[] buffer, string clientID, TcpClient tcpClient)
    {
        Console.WriteLine("Incoming Data from " + clientID);

        incomingPacketStruct newPacket = new incomingPacketStruct();
        newPacket.clientID = clientID;
        newPacket.buffer = buffer;
        newPacket.tcpClient = tcpClient;
    } 
```

在incomingData 中，我注意到缓冲区中有5 个数据包，然后incomingData 被调用了5 次。

现在至于客户端的incomingData（请记住，我没有注意到传出数据中的这种行为，也没有相关性。假设我一次得到10个json数据包，我会将它们发送到节点 - 所以这是10次写入。节点会将它们全部放在同一个缓冲区中，然后它将调用服务器的传入数据 10 次，每次都会看到 10 个数据包。

客户端传入数据：

```
public partial class Program : ServiceBase
{
   // Globals
    private static SocketObject.Client myHermesClient = null;
    private static JSONInterface myJsonInterface = null;

    private static void mainThread(object data)
    {

        // Take care of client and callbacks..
        myHermesClient = new SocketObject.Client(System.Net.IPAddress.Parse("127.0.0.1"), 9000);
        myHermesClient.connectionClosed = hermesConnectionClosed;
        myHermesClient.clientConnected = hermesConnected;
        myHermesClient.dataWritten = hermesDataWritten;
        myHermesClient.incomingData = hermesIncomingData;
        myHermesClient.clientConnectionFailed = hermesConnectionFailed;

        myHermesClient.keepOnTrying = true;

        // Begin async connect
        myHermesClient.Connect();

        // Main loop for service.
        while (serviceRunning)
        {
            Thread.Sleep(500);
        }

    }

    #region Hermes Client Code
    private static void hermesIncomingData(byte[] buffer, string serverID)
    {

    } 
```

再说一次，同样的事情。当服务器将大量数据发送回客户端时。如果你打破并查看缓冲区，你会明白我在说什么。

现在，要澄清这一点。我的问题不是分解数据包。我有代码（不包括在内，因为专有，与此无关 - 它不修改缓冲区，仅从中创建对象列表） - 但问题是回调被多次调用，如上所述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T12:08:19.900

里面`private void ReadCallback(IAsyncResult result)`

```
ReadHandle(client, read, networkStream); 
```

然后在`ReadHandle()`你内部再次设置回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-08T22:37:39.293

异步网络代码已经够棘手了，没有你所有的代码可能会导致这个问题无法解决。我会回答一些想法：

1.  您正在使用的库是可靠的；我怀疑 TcpClient、TcpListener 或 NetworkStream 是问题所在。
2.  您一遍又一遍地重复使用相同的缓冲区。您的`incomingData()`方法似乎没有镜像数据，而是重新使用相同的底层缓冲区；但话又说回来，它什么也没做，所以你显然已经剪掉了可能会改变这种行为的函数。
3.  您不能保证一个数据包将包含您使用 Write 调用的完全相同的数据块；你需要做“如果一个数据包是完整的，处理它；否则，等待更多数据进来”的事情。这通常意味着从您提供给 BeginRead 的缓冲区中提取数据并将其复制到不同的缓冲区。
4.  你会想要更多的调试信息。一位评论者建议使用 WireShark，我重复该建议；这将帮助您消除客户端问题与服务器端问题的歧义。同样，您应该记录每次调用 ReadHandle 时从线路中拉出的字节数。

真的，你只需要更多的调试信息。这应该清楚为什么您似乎收到五个数据包，每个数据包包含五个数据块。

# r - 如何使用 data.table 进行完全连接？

> ID：15170741
> 
> 赞同：30
> 
> 时间：2013-03-02T04:34:04.467
> 
> 标签：r, join, data.table, outer-join

在[`data.table`FAQ](http://datatable.r-forge.r-project.org/datatable-faq.pdf)中，该`nomatch = NA`参数被称为类似于外连接。但是，我无法进行`data.table`完全*外*连接——只有右外连接。

例如：

```
a <- data.table("dog" = c(8:12), "cat" = c(15:19))

   dog cat
1:   8  15
2:   9  16
3:  10  17
4:  11  18
5:  12  19

b <- data.table("dog" = 1:10, "bullfrog" = 11:20)

    dog bullfrog
 1:   1       11
 2:   2       12
 3:   3       13
 4:   4       14
 5:   5       15
 6:   6       16
 7:   7       17
 8:   8       18
 9:   9       19
10:  10       20

setkey(a, dog)
setkey(b, dog)

a[b, nomatch = NA]

    dog cat bullfrog
 1:   1  NA       11
 2:   2  NA       12
 3:   3  NA       13
 4:   4  NA       14
 5:   5  NA       15
 6:   6  NA       16
 7:   7  NA       17
 8:   8  15       18
 9:   9  16       19
10:  10  17       20 
```

因此，`nomatch = NA`产生一个右外连接（这是默认值）。如果我需要完全加入怎么办？例如：

```
merge(a, b, by = "dog", all = TRUE) 
# Or with plyr:
join(a, b, by = "dog", type = "full")

    dog cat bullfrog
 1:   1  NA       11
 2:   2  NA       12
 3:   3  NA       13
 4:   4  NA       14
 5:   5  NA       15
 6:   6  NA       16
 7:   7  NA       17
 8:   8  15       18
 9:   9  16       19
10:  10  17       20
11:  11  18       NA
12:  12  19       NA 
```

这可能`data.table`吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-02T05:06:17.283

你实际上就在那里。使用 `merge.data.table`这正是你打电话时正在做的事情

```
merge(a, b, by = "dog", all = TRUE) 
```

因为`a`是 a `data.table`， 所以`merge(a, b, ...)`调用`merge.data.table(a, b, ...)`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-10-24T07:31:41.070

```
x= data.table(a=1:5,b=11:15)
y= data.table(a=c(1:4,6),c=c(101:104,106))

setkey(x,a)
setkey(y,a)

unique_keys <- unique(c(x[,a], y[,a]))
y[x[.(unique_keys), on="a"]  ] # Full Outer Join 
```

# html - 如何在 Bootstrap 中将轮播设为整页图片背景？

> ID：15170745
> 
> 赞同：1
> 
> 时间：2013-03-02T04:34:30.877
> 
> 标签：html, css, twitter-bootstrap

我正在使用这个：

[OneByOne jQuery 滑块](http://codecanyon.net/item/jquery-onebyone-slider-plugin/full_screen_preview/684613)

我希望滑块占据页面的整个*宽度*。我意识到图像的大小与其显示的大小相同，但每张幻灯片都包含在一个标签中。如果我删除父容器，那么每个图像都会占用整个宽度，但在最后一张幻灯片的末尾，整个滑块会消失，3 秒后它会再次开始。

我怎样才能做到这一点？

我想让它看起来像这样：http: [//twitter.github.com/bootstrap/examples/carousel.html#](http://twitter.github.com/bootstrap/examples/carousel.html#)

除了在我的示例中，标题导航覆盖了顶部，然后下面的图像采用了页面的宽度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T04:55:47.990

挖掘源代码后，您可能会看到他们是如何做到的。他们使用了一个自定义的 CSS 片段，我将其粘贴在下面。之后，将导航栏放在一个类为 navbar-wrapper 的 div 中，粘贴导航栏，然后关闭 div。将 carousel 放在一个带有 carousel 和 slide 类的 div 中，并放置一个您选择的 id。下面的示例代码和 CSS。

* * *

## 轮播代码

```
<div id="myCarousel" class="carousel slide">
      <div class="carousel-inner">
        <div class="item">
          <img src="../assets/img/examples/slide-01.jpg" alt="">
          <div class="container">
            <div class="carousel-caption">
              <h1>Example headline.</h1>
              <p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
              <a class="btn btn-large btn-primary" href="#">Sign up today</a>
            </div>
          </div>
        </div>
        <div class="item active">
          <img src="../assets/img/examples/slide-02.jpg" alt="">
          <div class="container">
            <div class="carousel-caption">
              <h1>Another example headline.</h1>
              <p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
              <a class="btn btn-large btn-primary" href="#">Learn more</a>
            </div>
          </div>
        </div>
        <div class="item">
          <img src="../assets/img/examples/slide-03.jpg" alt="">
          <div class="container">
            <div class="carousel-caption">
              <h1>One more for good measure.</h1>
              <p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
              <a class="btn btn-large btn-primary" href="#">Browse gallery</a>
            </div>
          </div>
        </div>
      </div>
      <a class="left carousel-control" href="#myCarousel" data-slide="prev">‹&lt;/a>
      <a class="right carousel-control" href="#myCarousel" data-slide="next">›&lt;/a>
    </div> 
```

* * *

## CSS 代码

```
<style>

    /* GLOBAL STYLES
    -------------------------------------------------- */
    /* Padding below the footer and lighter body text */

    body {
      padding-bottom: 40px;
      color: #5a5a5a;
    }

    /* CUSTOMIZE THE NAVBAR
    -------------------------------------------------- */

    /* Special class on .container surrounding .navbar, used for positioning it into place. */
    .navbar-wrapper {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      z-index: 10;
      margin-top: 20px;
      margin-bottom: -90px; /* Negative margin to pull up carousel. 90px is roughly margins and height of navbar. */
    }
    .navbar-wrapper .navbar {

    }

    /* Remove border and change up box shadow for more contrast */
    .navbar .navbar-inner {
      border: 0;
      -webkit-box-shadow: 0 2px 10px rgba(0,0,0,.25);
         -moz-box-shadow: 0 2px 10px rgba(0,0,0,.25);
              box-shadow: 0 2px 10px rgba(0,0,0,.25);
    }

    /* Downsize the brand/project name a bit */
    .navbar .brand {
      padding: 14px 20px 16px; /* Increase vertical padding to match navbar links */
      font-size: 16px;
      font-weight: bold;
      text-shadow: 0 -1px 0 rgba(0,0,0,.5);
    }

    /* Navbar links: increase padding for taller navbar */
    .navbar .nav > li > a {
      padding: 15px 20px;
    }

    /* Offset the responsive button for proper vertical alignment */
    .navbar .btn-navbar {
      margin-top: 10px;
    }

    /* CUSTOMIZE THE CAROUSEL
    -------------------------------------------------- */

    /* Carousel base class */
    .carousel {
      margin-bottom: 60px;
    }

    .carousel .container {
      position: relative;
      z-index: 9;
    }

    .carousel-control {
      height: 80px;
      margin-top: 0;
      font-size: 120px;
      text-shadow: 0 1px 1px rgba(0,0,0,.4);
      background-color: transparent;
      border: 0;
      z-index: 10;
    }

    .carousel .item {
      height: 500px;
    }
    .carousel img {
      position: absolute;
      top: 0;
      left: 0;
      min-width: 100%;
      height: 500px;
    }

    .carousel-caption {
      background-color: transparent;
      position: static;
      max-width: 550px;
      padding: 0 20px;
      margin-top: 200px;
    }
    .carousel-caption h1,
    .carousel-caption .lead {
      margin: 0;
      line-height: 1.25;
      color: #fff;
      text-shadow: 0 1px 1px rgba(0,0,0,.4);
    }
    .carousel-caption .btn {
      margin-top: 10px;
    }

    /* MARKETING CONTENT
    -------------------------------------------------- */

    /* Center align the text within the three columns below the carousel */
    .marketing .span4 {
      text-align: center;
    }
    .marketing h2 {
      font-weight: normal;
    }
    .marketing .span4 p {
      margin-left: 10px;
      margin-right: 10px;
    }

    /* Featurettes
    ------------------------- */

    .featurette-divider {
      margin: 80px 0; /* Space out the Bootstrap <hr> more */
    }
    .featurette {
      padding-top: 120px; /* Vertically center images part 1: add padding above and below text. */
      overflow: hidden; /* Vertically center images part 2: clear their floats. */
    }
    .featurette-image {
      margin-top: -120px; /* Vertically center images part 3: negative margin up the image the same amount of the padding to center it. */
    }

    /* Give some space on the sides of the floated elements so text doesn't run right into it. */
    .featurette-image.pull-left {
      margin-right: 40px;
    }
    .featurette-image.pull-right {
      margin-left: 40px;
    }

    /* Thin out the marketing headings */
    .featurette-heading {
      font-size: 50px;
      font-weight: 300;
      line-height: 1;
      letter-spacing: -1px;
    }

    /* RESPONSIVE CSS
    -------------------------------------------------- */

    @media (max-width: 979px) {

      .container.navbar-wrapper {
        margin-bottom: 0;
        width: auto;
      }
      .navbar-inner {
        border-radius: 0;
        margin: -20px 0;
      }

      .carousel .item {
        height: 500px;
      }
      .carousel img {
        width: auto;
        height: 500px;
      }

      .featurette {
        height: auto;
        padding: 0;
      }
      .featurette-image.pull-left,
      .featurette-image.pull-right {
        display: block;
        float: none;
        max-width: 40%;
        margin: 0 auto 20px;
      }
    }

    @media (max-width: 767px) {

      .navbar-inner {
        margin: -20px;
      }

      .carousel {
        margin-left: -20px;
        margin-right: -20px;
      }
      .carousel .container {

      }
      .carousel .item {
        height: 300px;
      }
      .carousel img {
        height: 300px;
      }
      .carousel-caption {
        width: 65%;
        padding: 0 70px;
        margin-top: 100px;
      }
      .carousel-caption h1 {
        font-size: 30px;
      }
      .carousel-caption .lead,
      .carousel-caption .btn {
        font-size: 18px;
      }

      .marketing .span4 + .span4 {
        margin-top: 40px;
      }

      .featurette-heading {
        font-size: 30px;
      }
      .featurette .lead {
        font-size: 18px;
        line-height: 1.5;
      }

    }
    </style> 
```

* * *

## 导航栏代码

```
<div class="navbar-wrapper">
      <!-- Wrap the .navbar in .container to center it within the absolutely positioned parent. -->
      <div class="container">

        <div class="navbar navbar-inverse">
          <div class="navbar-inner">
            <!-- Responsive Navbar Part 1: Button for triggering responsive navbar (not covered in tutorial). Include responsive CSS to utilize. -->
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="brand" href="#">Project name</a>
            <!-- Responsive Navbar Part 2: Place all navbar contents you want collapsed withing .navbar-collapse.collapse. -->
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
                <!-- Read about Bootstrap dropdowns at http://twitter.github.com/bootstrap/javascript.html#dropdowns -->
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                  <ul class="dropdown-menu">
                    <li><a href="#">Action</a></li>
                    <li><a href="#">Another action</a></li>
                    <li><a href="#">Something else here</a></li>
                    <li class="divider"></li>
                    <li class="nav-header">Nav header</li>
                    <li><a href="#">Separated link</a></li>
                    <li><a href="#">One more separated link</a></li>
                  </ul>
                </li>
              </ul>
            </div><!--/.nav-collapse -->
          </div><!-- /.navbar-inner -->
        </div><!-- /.navbar -->

      </div> <!-- /.container -->
    </div> 
```

**上面的代码不是我写的。这是一个示例模板的参考。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-09T02:43:47.340

尝试将此添加到您的`css`代码中：

```
.carousel-caption {
  top: 30%;
} 
```

您可以更改`30%`为您喜欢的任何百分比，使标题垂直居中。

# css - CSS translate(0,5px) 使东西在 X 轴上摆动

> ID：15170749
> 
> 赞同：1
> 
> 时间：2013-03-02T04:35:17.857
> 
> 标签：css, css-transitions, antialiasing

我有一个 css 翻译发生在悬停时。它只影响 Y 轴，但它正在跳跃。这使得悬停效果看起来很不稳定。

```
-webkit-transform: translate(0,5px); 
```

效果是在主导航上。你可以在这里看到它：http: [//pineriver.com](http://pineriver.com)

这与舍入或文本像素对齐有关吗？如果是这样，我不喜欢它:) 你可以看到我已经尝试过像`opacity:.99`.

我已经通过使用传统的`top:`和`bottom:`进行翻译来解决这个问题，但我仍然很好奇为什么会发生这种情况。我真的很想能够使用 css 翻译来做这样的视觉黄油事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T05:13:11.593

我认为这是一个有趣的问题，但我要把所有的功劳归功于谷歌。

在 nav.primary ul li 和 .siteHeader .siteLogo 规则中添加：

```
-webkit-backface-visibility: hidden; 
```

我在[这里](http://css-tricks.com/almanac/properties/b/backface-visibility/)和[这里](http://blog.kamicrafted.com/post/30975461074/quick-fix-for-twitching-text-images-when-using-css)找到了这个想法。

这里还有[一些来自 stackoverflow 的更多信息](https://stackoverflow.com/questions/2946748/iphone-webkit-css-animations-cause-flicker)。他们在谈论 iPhone 开发，但它仍然是 webkit。

# vb.net - 在VB中声明一个set参数

> ID：15170751
> 
> 赞同：1
> 
> 时间：2013-03-02T04:35:30.267
> 
> 标签：vb.net, dll, parameters

我有一个我制作的 DLL，它是一个自定义按钮和一个常规表单。要让按钮显示其属性（它只会在设计器中显示为常规按钮），用户必须输入

```
Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    CustomButton1.Initialize(Width, Height, ButtonText)
End Sub 
```

但是，我想要一个设置参数，以便用户可以执行以下操作：

```
CustomButton1.Initialize(Textlocation.Top) 
```

比如创建消息框并设置类型时做了什么：

```
MsgBox("MessageBoxText", MsgBoxStyle.Critical) 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T13:17:43.977

您可以重载该方法。假设你有这样的事情：

```
Public Sub Initialize(width As Integer, height As Integer, buttonText As String)
    ' Or however it’s declared
End Sub 
```

在它下面声明：

```
Public Sub Initialize(location As TextLocation)
    Select Case location
        Case TextLocation.Top
            Me.Initialize(*appropriate presets*)
        …
    End Select
End Sub
```

就是这样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T13:23:29.287

你想要一个枚举：

```
Enum TextLocation
    Top
    Bottom
    ...
End Enum 
```

# java - 如何返回没有 NullPointerException 的数组对象？

> ID：15170755
> 
> 赞同：0
> 
> 时间：2013-03-02T04:36:20.823
> 
> 标签：java, nullpointerexception

宣布：

```
private Man[] man; 
```

这是初始化：

```
Man[] man = new Man[1];

    for (int i = 0; i < 1; i++){
        man[i] = new Man();
            for (int j = 0; j < 3; j++){
                man[i].eatThis(table.foods[table.topFood-1]);
                table.topFood--;
            }
    } 
```

想打印这个：

```
System.out.println(getMan(0)); 
```

去：

```
public Man getMan(int k){
 return man[k];
} 
```

但我收到 NullPointerException。为什么？尽管：

```
System.out.println(man[0]); 
```

工作得很好。

```
Exception in thread "main" java.lang.NullPointerException
at ManRunning.getMan(ManRunning.java:80)
at ManRunning.newGame(ManRunning.java:133)
at ManRunning.<init>(ManRunning.java:57)
at RunDevilRun.main(RunDevilRun.java:9) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T03:46:02.443

线 (1)

```
Man[] man = new Man[1]; 
```

隐藏在这一行中声明的实例变量 (2)

```
private Man[] man; 
```

任何体面的 IDE 都会对此显示警告。

这里是你应该如何在第 (2) 行声明的第 (1) 行中初始化数组 man

```
man = new Man[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T03:38:51.927

显然，您有两个`man`数组变量，一个已初始化，一个（成员变量）未初始化。

# azure - Azure 中标记为美国东部 2 的区域在哪里？

> ID：15170756
> 
> 赞同：9
> 
> 时间：2013-03-02T04:36:50.213
> 
> 标签：azure, azure-sql-database

我找不到这方面的任何信息。这个区域在哪里？我知道**美国东部**地区位于弗吉尼亚州，但我特别询问**美国东部 2**地区。

![Azure 管理门户中美国东部 2 的屏幕截图](../Images/f2bc90afe3815397361983fbdc25ae74.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-02T14:16:34.097

[Azure 区域](http://azure.microsoft.com/en-us/regions/)：

```
AZURE REGION        LOCATION
Central US          Iowa
East US             Virginia
East US 2           Virginia
US Gov Iowa         Iowa
US Gov Virginia     Virginia
North Central US    Illinois
South Central US    Texas
West US             California
North Europe        Ireland
West Europe         Netherlands
East Asia           Hong Kong
Southeast Asia      Singapore
Japan East          Saitama Prefecture
Japan West          Osaka Prefecture
Brazil South        Sao Paulo State
Australia East      New South Wales
Australia Southeast Victoria 
```

*在提出问题时，还没有“美国东部 2”。由于错误而显示并已修复。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:56:19.603

我不认为你会找到这个问题的官方答案。除了竞争原因（人们查看卫星图像以了解数据中心有多大）之外，还有安全原因，作为客户，我们希望对此保密。例如，您不希望数据中心员工被跟踪回家并被迫交出数据（无论如何他们都不能这样做）。我不确定微软到底是如何做到的，但亚马逊将可用区（同一地区的不同数据中心）定位得相当近（10 英里），因此它们具有独立的电源和其他依赖项/风险，但对于专用带宽来说足够接近数据中心之间的负担得起。因此，您很少会注意到单个区域中两个数据中心之间的显着性能差异。

如果你正在计划一些邪恶的事情，你将不得不问其他地方。如果出于应用程序性能的原因，您想知道哪个数据中心离您“更近”，那么您只需要测量延迟即可。物理位置无关紧要。如果地理位置最远的位置延迟最低，那么您仍然会选择它。使用 Web 应用程序测量延迟很容易，[这篇博文](http://blogs.msdn.com/b/sqlazure/archive/2010/05/27/10016392.aspx)介绍了如何使用 SQL 统计信息来测量 SQL Azure 的延迟。最终，数据中心位置的选择应该基于您的客户所在的位置，而不是您的办公室，并且就客户而言，100 英里的位置保真度绝对不会产生任何影响。

# tomcat6 - 将 ClassLoader 添加到 Tomcat

> ID：15170758
> 
> 赞同：1
> 
> 时间：2013-03-02T04:36:51.350
> 
> 标签：tomcat6, classloader

我有一个包含大部分业务逻辑的 JAR 文件。我在 Spring MVC 中开发的 Web 应用程序使用该 JAR 文件。为了保护 JAR 文件，我使用了 JarCryp。JarCryp 已从 JAR 文件创建了一个 .sjar 文件。现在，为了从 Tomcat 加载 JAR 文件，我已经添加到 Tomcat 的 context.ie 中，将以下行添加到 context.xml

```
 <Loader className="ComponioSampleClassLoader" ></Loader> 
```

ComponioSampleClassLoader类扩展***了******org.apache.catalina.loader.WebappClassLoader***。

现在，当我启动tomcat时，出现以下错误

```
INFO: Deploying configuration descriptor host-manager.xml
Mar 1, 2013 11:50:41 PM org.apache.tomcat.util.digester.Digester endElement
SEVERE: End event threw exception

    java.lang.IllegalArgumentException: argument type mismatch
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.apache.tomcat.util.IntrospectionUtils.callMethod1(IntrospectionUtils.java:928)
        at org.apache.tomcat.util.digester.SetNextRule.end(SetNextRule.java:193)
        at org.apache.tomcat.util.digester.Rule.end(Rule.java:229)
        at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1138)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
        at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
        at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1642)
        at org.apache.catalina.startup.ContextConfig.processContextConfig(ContextConfig.java:793)
        at org.apache.catalina.startup.ContextConfig.contextConfig(ContextConfig.java:732)
        at org.apache.catalina.startup.ContextConfig.init(ContextConfig.java:1018)
        at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:279)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
        at org.apache.catalina.core.StandardContext.init(StandardContext.java:5700)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4448)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)
        at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:601)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1315)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1061)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
        at org.apache.catalina.core.StandardService.start(StandardService.java:525)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
    Mar 1, 2013 11:50:41 PM org.apache.catalina.startup.ContextConfig processContextConfig
    SEVERE: Parse error in context.xml for /host-manager
    java.lang.IllegalArgumentException: argument type mismatch
        at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2806)
        at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2832)
        at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1141)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
        at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
        at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1642)
        at org.apache.catalina.startup.ContextConfig.processContextConfig(ContextConfig.java:793)
        at org.apache.catalina.startup.ContextConfig.contextConfig(ContextConfig.java:732)
        at org.apache.catalina.startup.ContextConfig.init(ContextConfig.java:1018)
        at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:279)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
        at org.apache.catalina.core.StandardContext.init(StandardContext.java:5700)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4448)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)
        at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:601)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1315)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1061)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
        at org.apache.catalina.core.StandardService.start(StandardService.java:525)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
    Caused by: java.lang.IllegalArgumentException: argument type mismatch
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.apache.tomcat.util.IntrospectionUtils.callMethod1(IntrospectionUtils.java:928)
        at org.apache.tomcat.util.digester.SetNextRule.end(SetNextRule.java:193)
        at org.apache.tomcat.util.digester.Rule.end(Rule.java:229)
        at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1138)
        ... 40 more 
```

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:53:13.127

只是在同一个问题上挣扎了几个小时......

您需要从 WebappLoader (org.apache.catalina.loader.WebappLoader) 而不是 WebappClassLoader 扩展。

您会注意到两者的构造函数是相同的，因此在进行此更改时您的构造函数很可能不需要更改。

```
package tomcat7;

import org.apache.catalina.loader.WebappLoader;

public class Tomcat7CustomWebappLoader extends WebappLoader {

    public Tomcat7CustomWebappLoader() {
        super();
    }

    public Tomcat7CustomWebappLoader(ClassLoader parent) {
        super(parent);
    }
} 
```

在查看与 Tomcat 一起打包的“VirtualWebappLoader”（org.apache.catalina.loader.VirtualWebappLoader）加载器实现时，WebappLoader 的扩展也很明显。

不幸的是，您没有使用特定用例的经验，但是 Loader 需要扩展 WebappLoader。

靠近页面底部的更高级的实现在[这里](https://stackoverflow.com/questions/8444245/deployment-issues-with-spring-app-in-tomcat-6-0)

# python - 如何从 Windows cmd 运行 Python

> ID：15170761
> 
> 赞同：6
> 
> 时间：2013-03-02T04:37:05.483
> 
> 标签：python, windows, cmd

我正在尝试通过如下调用在 Windows 中运行 python 程序：

```
python pacman.py 
```

我对 python 程序有很多这样的调用。我想从 Windows 命令行运行它。当我在 Ubuntu 中运行它时它运行良好，但是当我在 Windows 中尝试它时，我收到以下错误：

```
'python' is not recognized as an internal or external command, operable program or batch file. 
```

如何从 Windows cmd 运行这些 python 程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T04:44:07.263

您需要修改 Windows %PATH% 环境变量。在我的电脑 ‣ 属性 ‣ 高级 ‣ 环境变量下，您应该修改 %PATH% 变量以包含您的 Python 目录，即 C:\Python26。

请参阅：[http ://docs.python.org/2/using/windows.html#excursus-setting-environment-variables](http://docs.python.org/2/using/windows.html#excursus-setting-environment-variables)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:47:15.243

这意味着没有声明 Python Path。尝试这个：

```
cd --> to pacman.py dir
C:\PythonVersion\python.exe pacman.py 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-06T17:06:14.933

尝试使用这个，dir C:\py*，这应该会给你这样的消息“驱动器 C 中的卷：Windows 版本---卷序列号 C 的目录：和 Python 的路径，它安装在你的计算机上“，如果你得到这个，你就可以走了......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-22T03:37:42.027

如果您`pacman.py`的 Windows 设置为`.py`使用`python.exe`. 这很容易通过文件管理器完成。（并且在安装 python 时默认设置。）

# cassandra - 如何在 64 位 Windows 上安装 Portfolio Demo 应用程序

> ID：15170766
> 
> 赞同：0
> 
> 时间：2013-03-02T04:38:10.677
> 
> 标签：cassandra

我下载了 Community Edition MSi 64 位 Datastax Cassandra 包和 OPS Dashboard 工作，但不确定如何让投资组合演示应用程序在 Windows 上工作？我下载了 tar 包，但那是为 linux 而不是 windows。请建议，这对我来说很紧急。谢谢钱德拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T06:10:55.587

您可能想尝试安装 cygwin。但是，这些演示（据我所知）仅支持 Unix。

# mysql - 在特定时间范围内获取新记录

> ID：15170771
> 
> 赞同：1
> 
> 时间：2013-03-02T04:38:40.063
> 
> 标签：mysql, sql

我的桌子设计有点像这样。

```
id |    date    | user_id
1  | 2013-02-02 |  1
2  | 2013-02-02 |  2
3  | 2013-02-02 |  5
4  | 2013-02-03 |  6
5  | 2013-02-03 |  7
6  | 2013-02-03 |  1 
```

现在我想为特定日期或时间范围内的新用户选择记录。例如，如果我选择 `date=date('2013-02-03')`，我只需要新用户的记录，即记录 id 4 和 5，并且不应返回 6，因为用户已经有记录。

简单地说，它应该只返回在他们的 user_id 上没有以前记录的用户的记录。我尝试使用 not in 运算符编写查询，但我不知道如何为日期提供小于当前记录日期的参数。

[编辑]

这是我到达的地方，也是我被困的地方。

```
select id from mytable where date=date('2013-02-03') and user_id not in (select user_id from mytable where date<date('2013-02-03')) 
```

当只有一个确切的日期时，这可以正常工作。但是当涉及到时间框架时，比如一个月，我无法弄清楚如何获取内部查询，其中 date 应该是该特定用户的记录日期。

[编辑]

使用 having 子句尝试了这个查询。它返回空结果。

```
select id, date, user_id from mytable having min(date(date))>=date("2013-01-02") and min(date(date))<=date("2013-02-02") 
```

好的，我遇到了这个查询的问题。它检查所有记录中的 min(date)。我怎样才能让这个查找每个 user_id 的最小记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T05:49:39.010

假设你有

```
+----+------------+---------+
| id | date       | user_id |
+----+------------+---------+
|  1 | 2013-02-02 |       1 |
|  2 | 2013-02-02 |       2 |
|  3 | 2013-02-02 |       5 |
|  4 | 2013-02-03 |       6 |
|  5 | 2013-02-03 |       7 |
|  6 | 2013-02-03 |       1 |
|  7 | 2013-02-04 |       6 | <-- additional record for user_id 6
+----+------------+---------+ 
```

而且您正试图在间隔内吸引新用户`2013-02-03 - 2013-02-04`

```
SELECT MIN(id) id, MIN(`date`) `date`, `user_id`
  FROM (
SELECT * 
  FROM mytable
 WHERE `date` BETWEEN DATE('2013-02-03') AND DATE('2013-02-04')
   AND user_id NOT IN (SELECT DISTINCT user_id 
                         FROM mytable 
                        WHERE `date` < DATE('2013-02-03'))
       ) t
 GROUP BY user_id 
```

这将是你的输出：

```
+------+------------+---------+
| id   | date       | user_id |
+------+------------+---------+
|    4 | 2013-02-03 |       6 |
|    5 | 2013-02-03 |       7 |
+------+------------+---------+ 
```

这是工作的**[sqlfiddle](http://sqlfiddle.com/#!2/b0636/2)**

# mysql - 如何在mysql数据库软件中更改用户名、密码

> ID：15170772
> 
> 赞同：0
> 
> 时间：2013-03-02T04:39:30.913
> 
> 标签：mysql

你能帮帮我吗，mysql datase用户名是root，数据库没有密码。现在我想为 mysql 数据库提供密码。请

谢谢 Tatarao voleti

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T04:43:40.010

```
SET PASSWORD FOR 'root' = PASSWORD('password you want') 
```

# node.js - 哪个 npm/bin 文件夹应该在 PATH 中？（ OS X 10.8.2 / npm 与 homebrew 一起安装）

> ID：15170773
> 
> 赞同：8
> 
> 时间：2013-03-02T04:39:31.577
> 
> 标签：node.js, npm, homebrew

使用**自制软件**升级**节点**

 **```
==> Downloading http://nodejs.org/dist/v0.8.21/node-v0.8.21.tar.gz
######################################################################## 100.0%
==> ./configure --prefix=/usr/local/Cellar/node/0.8.21
==> make install 
```

我注意到了这一点

```
==> Caveats
Homebrew installed npm.
We recommend prepending the following path to your PATH environment
variable to have npm-installed binaries picked up:
  /usr/local/share/npm/bin 
```

在`$PATH`我已经：`/usr/local/share/npm/lib/node_modules/scripted/bin` 我也应该添加`/usr/local/share/npm/bin`吗？

请注意，`/usr/local/share/npm/bin`它只包含两个子文件夹：`scr`并且 `scripted`那也都在，那么这两个文件夹*的用途*`/usr/local/share/npm/lib/node_modules/scripted/bin`有什么区别？

 ***EDIT** `/usr/local/share/npm/bin`仅包含两个符号链接（不是子文件夹）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T06:50:30.803

也许您正在从旧版本的节点升级？我从 0.8.17 开始使用自制软件存储库中的节点，并且我的`/usr/local/share/npm/bin`. 它仅包含指向全局安装模块的可执行脚本的 simlink（在 中`/usr/local/share/npm/lib/node_modules`）。所以，我`/usr/local/share/npm/bin`在我的 $PATH 中，它工作正常。如果您是从旧版本的`node`and升级`npm`，请在更改 $PATH 之前尝试重新安装全局安装的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-10T10:28:52.193

打开终端并运行命令：

```
$ npm bin 
```

**在.zshrc** / **.bashrc** / **.profile**中添加一行

 **```
export PATH="$PATH:/Users/USERNAME/node_modules/.bin" 
```*****

# java - 安装了eclipse但无法启动java返回exit-code = 1

> ID：15170776
> 
> 赞同：4
> 
> 时间：2013-03-02T04:40:03.670
> 
> 标签：java, eclipse, exit-code

我最近安装了 eclipse-dsl-juno-SR1-win32-x86_64 并在提取文件后，当我开始运行 Eclipse 时，它​​给了我以下错误：

> Java 已启动但返回退出代码=1（需要 Java 版本=1.5）

我检查了这个原因并尝试重新安装以及其他论坛建议的解决方案，但无济于事。

我已经安装

*   适用于 Java 和 DSL 开发人员的 Eclipse IDE：Eclipse Juno SR1 包下的 eclipse-dsl-juno-SR1-win32-x86_64 和
*   JDK 1.7.0_11 (x64)

我已正确链接我的环境变量并尝试通过 cmd 编译 Java 文件并成功。

`-vm "mypath\jdk1.7.0_11\jre\bin"`我尝试在 cmd: command as forums中运行以下命令

以及其他途径`-vm "mypath\jdk1.7.0_11\bin" -vm "mypath\jdk1.7.0_11\jre\bin\javaw.exe"`即使`-vm "mypath\jre6\bin"`是走投无路也无济于事。

这个你能帮我吗。我被困住了:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-12T07:52:24.017

对我有用的是设置 -vm 指向 jvm.dll 而不是 java.exe 或 javaw.exe

-vm C:your_java\jre7\bin\client\jvm.dll

这似乎是 Java 1.7 的一个错误。如果您回到 Java 1.6，问题似乎也消失了。

[Eclipse：Java 已启动但返回退出代码 -1073741571](https://stackoverflow.com/questions/14022257/eclipse-java-was-started-but-returned-exit-code-1073741571)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-08T12:59:03.970

我在 openFile 之后的 eclipse.ini 文件中添加了以下行。

-vm

C:/Progra~2/Java/jdk1.6.0_27/jre/bin/javaw.exe

现在它工作正常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T05:35:54.380

抱歉-评论有点太多了-我的建议：

首先：我刚刚尝试过 - 好吧 - 几乎是您拥有的配置（Win8-64bit），但已经使用了更新的 java 和 Eclipse-DSL 的 SR2 版本。没有问题。但我不认为以前的版本可能是这里的问题，但如果没有任何帮助：尝试下载 SR2 版本。

我知道这一切都在您的帖子中说明，但请确保您使用 64 位 java 启动 64 位 eclipse。此外，如果您提供 vm-argument，您始终必须在 vm-argument 中提供 java.exe、javaw.exe 或 jvm.dll 之一——而不仅仅是 java 目录。

还可以尝试以下方法：从

```
-vm "<yourjavainstallation>\bin\java.exe" -consoleLog -debug 
```

注意：它是`java.exe`，不是 javaw.exe - 将出现一个控制台（命令窗口） - 也许这些消息会有所帮助？

如果一切都失败了 - 尝试使用 32 位 java 和 32 位 eclipse 安装。您可以使用最新的 java - 不需要 JDK 1.6。最后一点：这`required java version=1.5)`表明您的系统上有一个古老的 JDK（如果错误消息是正确的）。如果您的系统上仍有 JDK 1.4 及更早版本 - 如果您真的不再需要它，请尝试卸载它（实际上我找不到原因）。

最后一件事：有一种方法可以确保 eclipse 在没有 vm-argument 的情况下使用指定的 jre。实际上，您可以将所需的 jre 复制到名为“jre”的子文件夹中的 eclipse 安装中，从而产生以下结构：

```
eclipse
    eclipse.exe
    jre
       bin
          java.exe
          ...
       lib
          ... 
```

并在没有 vm-argument 的情况下启动 eclipse。我希望其中一点会有所帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-07T00:46:53.293

JDK 1.7.0_11 (x64) 似乎发生了一个错误。解决方案在此[https://stackoverflow.com/a/14022587/2294985](https://stackoverflow.com/a/14022587/2294985)中，说明了 eclipse.ini 文件中要更改的内容

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-05T06:48:52.197

在我的笔记本电脑上安装 QTP 后，我开始遇到同样的 Eclipse 错误。

当我尝试从命令提示符运行一个简单的 java hello world 程序时，出现以下错误：

```
c:\Java\test>javac MyFirstApp.java
Picked up JAVA_TOOL_OPTIONS: -agentlib:jvmhook
Picked up _JAVA_OPTIONS: -Xrunjvmhook -Xbootclasspath/a:C:\PROGRA~2\HP\QUICKT~1\bin\JAVA_S~1\classes;C:\PROGRA~2\HP\QUICKT~1\bin\JAVA_S~1\classes\jasmine.jar;C:\Users\vivekrs\Documents\Raj\sev2\Tools\
QTP11\QuickTest\MSI\bin\java_shared\bin
Error occurred during initialization of VM
Could not find agent library jvmhook on the library path, with error: %1 is not a valid Win32 application 
```

然后我从环境中删除了 JAVA_TOOL_OPTIONS 和 _JAVA_OPTIONS 变量，java 和 Eclipse 都开始正常工作。

您可以尝试`javac`在 cmd 提示符下键入并查看您遇到了什么错误，然后尝试解决该错误，elipse 将开始工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-29T04:01:18.740

我已删除此行并在 Eclipse Luna 中为我工作：

```
-XX:-UseCompressedOops
-vm
C:\Program Files\Java\jdk1.7.0_79\jre\bin\server\jvm.dll 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-23T07:39:37.913

我添加了一行：-XX:-UseCompressedOops

到 eclipse.ini，到目前为止一切都很好！

# r - 向数据框中添加“排名”列

> ID：15170777
> 
> 赞同：34
> 
> 时间：2013-03-02T04:40:04.200
> 
> 标签：r

我有一个数据框，其中包含不同年份的不同项目的计数：

```
df <- data.frame(item = rep(c('a','b','c'), 3),
                 year = rep(c('2010','2011','2012'), each=3),
                 count = c(1,4,6,3,8,3,5,7,9)) 
```

我想添加一个“year.rank”列，它给出一个项目在给定年份内的排名，其中较高的计数会导致较高的“排名”。有了上面的内容，它看起来像：

```
 item year count year.rank
1    a 2010     1         3
2    b 2010     4         2
3    c 2010     6         1
4    a 2011     3         2
5    b 2011     8         1
6    c 2011     3         3
7    a 2012     5         3
8    b 2012     7         2
9    c 2012     9         1 
```

我知道我可以使用 对整个数据框执行此操作`order(df$count)`，但我不确定我将如何按年执行此操作。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-02T04:45:28.173

有一个`rank`功能可以帮助您：

```
transform(df, 
          year.rank = ave(count, year, 
                          FUN = function(x) rank(-x, ties.method = "first")))
  item year count year.rank
1    a 2010     1         3
2    b 2010     4         2
3    c 2010     6         1
4    a 2011     3         2
5    b 2011     8         1
6    c 2011     3         3
7    a 2012     5         3
8    b 2012     7         2
9    c 2012     9         1 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-02T05:02:15.757

`data.table`练习版：

```
library(data.table)
DT <- as.data.table(df)
DT[,yrrank:=rank(-count,ties.method="first"),by=year]

   item year count yrrank
1:    a 2010     1      3
2:    b 2010     4      2
3:    c 2010     6      1
4:    a 2011     3      2
5:    b 2011     8      1
6:    c 2011     3      3
7:    a 2012     5      3
8:    b 2012     7      2
9:    c 2012     9      1 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-02T04:48:48.287

使用`order`功能，

```
transform(dat, x= ave(count,year,FUN=function(x) order(x,decreasing=T)))
  item year count x
1    a 2010     1 3
2    b 2010     4 2
3    c 2010     6 1
4    a 2011     3 2
5    b 2011     8 1
6    c 2011     3 3
7    a 2012     5 3
8    b 2012     7 2
9    c 2012     9 1 
```

**编辑**

您也可以`plyr`在这里使用：

```
ddply(dat,.(year),transform,x =  order(count,decreasing=T)) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-06-01T13:32:20.123

使用**dplyr**你可以这样做：

```
library(dplyr) # 0.4.1
df %>% 
  group_by(year) %>% 
  mutate(yrrank = row_number(-count))

#Source: local data frame [9 x 4]
#Groups: year
#
#  item year count yrrank
#1    a 2010     1      3
#2    b 2010     4      2
#3    c 2010     6      1
#4    a 2011     3      2
#5    b 2011     8      1
#6    c 2011     3      3
#7    a 2012     5      3
#8    b 2012     7      2
#9    c 2012     9      1 
```

它与以下内容相同：

```
df %>% 
  group_by(year) %>% 
  mutate(yrrank = rank(-count, ties.method = "first")) 
```

请注意，生成的数据仍按“年份”分组。如果您想删除分组，您可以简单地用 . 扩展管道`%>% ungroup()`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-21T09:19:03.167

在使用其他人给出的答案时，我发现以下比*transform*和*dyplr*变体执行得更快：

```
df$year.rank <- ave(count, year, FUN = function(x) rank(-x, ties.method = "first")) 
```

# php - 什么是最能记住用户的？cookie 或数据库或两者兼而有之？

> ID：15170778
> 
> 赞同：-1
> 
> 时间：2013-03-02T04:40:15.160
> 
> 标签：php, security, cookies, web

我看到很多开源网站，它使用不同的方法来记住他们的登录用户，有些只使用 cookie，有些使用 cookie 和数据库。每种方法之间有什么区别？什么是最好的使用方法？

我认为有安全原因，有人可以帮我理解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T04:45:51.133

所有“记住我”功能都需要 cookie 或其他方式在用户计算机上留下一些信息，以便您以后识别他/她。然后，您将获取这些信息，这些信息将帮助您识别服务器上的用户，并执行任何您必须做的事情来将他/她重新登录到您的系统中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T11:27:18.357

要记住用户，在他们的访问中，您必须使用 cookie。数据库无法做到这一点。

会话变量只持续一个会话。例如，如果您使用会话变量，那么您第二天就不会“记住”用户。

您需要 DB 以永久方式存储有关用户的信息。“记住我”功能本身不需要它。例如，如果您只需要知道用户的姓名，不妨将其存储在 cookie 本身中。当用户回来时，名称就在 cookie 中，可以用来说“欢迎 foo”。但是，如果页面是例如电子邮件客户端，那么您不可能将所有用户的电子邮件存储在 cookie 中；并不是说无论如何它都有意义。在这种情况下，您将从 cookie 中获取登录凭据，标记用户已登录，然后进入数据库以获取他们的电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T04:49:06.020

Cookies 不会更新，否则 Sessions 会更新，所以我认为记住用户的最佳方法是通过 Session id 和数据库

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T04:40:56.797

Cookie 速度更快，因为它们本地存储在用户的计算机上。

数据库要求您在服务器上建立连接以获取数据。

您应该查看[这个问题](https://stackoverflow.com/questions/2119083/php-tutorial-that-is-security-accuracy-and-maintainability-conscious)以获得更全面的指南。

# ruby-on-rails-3 - 找不到 FakeInput

> ID：15170785
> 
> 赞同：0
> 
> 时间：2013-03-02T04:40:50.160
> 
> 标签：ruby-on-rails-3, input, simple-form

我正在尝试使用以下建议（[与模型无关的 rails simple_form 字段](https://stackoverflow.com/questions/12146466/rails-simple-form-fields-not-related-to-the-model/14659270#14659270)）向 simple_form 添加虚假输入，但它对我不起作用。

这是我用于添加虚假输入字段的 HAML 代码。

```
= f.input :agrees_to_terms, :as => :fake 
```

我将以下类放在 app/inputs/fake_input.rb

```
class FakeInput < SimpleForm::Inputs::StringInput
  # This method only create a basic input without reading any value from object
  def input
    template.text_field_tag(attribute_name, nil, input_html_options)
  end
end 
```

我收到以下运行时错误

```
No input found for fake 
```

我有两个由 Rails Composer 生成的初始化程序：simple_form.rb 和 simple_form_bootstrap.rb

如何让 Rails 找到我的 FakeInput 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-31T19:31:24.543

我有同样的问题，服务器重启解决了它。

# android - 更改 LinearLayout 中分隔线的颜色

> ID：15170790
> 
> 赞同：12
> 
> 时间：2013-03-02T04:42:03.950
> 
> 标签：android, android-linearlayout, nine-patch

我可以知道如何更改分隔线的颜色`LinearLayout`吗？

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="48dp"
    android:orientation="horizontal"
    android:divider="?android:attr/dividerVertical"
    android:dividerPadding="12dip"
    android:showDividers="middle"
    android:background="#ff2d2d2d" >
...
</LinearLayout> 
```

我是否需要手动将 Android SDK 中的 9 个补丁图像复制到我的项目中，并定义我自己的属性来引用它？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-02T04:57:46.240

看起来`android:divider`属性不接受颜色值。因此，您必须创建一个单独的可绘制分隔线才能使其正常工作：

分隔符.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">

    <size android:width="1dip" />
    <solid android:color="#f00" />

</shape> 
```

布局.xml

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="48dp"
    android:orientation="horizontal"
    android:divider="@drawable/divider"
    android:dividerPadding="12dip"
    android:showDividers="middle"
    android:background="#ff2d2d2d" > 
```

另外，请注意，该`android:divider`功能仅适用于 android 3.0 或更高版本，不适用于以前的 android 版本。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-02T04:46:18.477

我就是这样做的

```
 <ImageView
            android:id="@+id/imgVwmarkupborder"
            android:layout_width="280dp"
            android:layout_height="2dp"
            android:src="@android:color/white" /> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-02T04:55:13.243

```
<View
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:background="@android:color/white"/> 
```

在我的方法中，我使用这个..

# java - 为什么超类分配给子类会出错？

> ID：15170799
> 
> 赞同：0
> 
> 时间：2013-03-02T04:43:54.780
> 
> 标签：java, oop, inheritance, superclass

有人可以解释为什么这必须给出错误的原因吗？- 基于事物在 Java 中实现的方式

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T04:45:47.450

因为所有的猫都是哺乳动物，但并非所有的哺乳动物都是猫。

[请参阅Java 教程的继承课程中的](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)标题“转换对象”部分。

# c++ - 现代处理器（如 i7）是否会在遍历指针列表时遵循指针并预取其数据？

> ID：15170803
> 
> 赞同：12
> 
> 时间：2013-03-02T04:44:11.703
> 
> 标签：c++, performance, caching, pointers, cpu-cache

我想学习如何编写更好的代码来利用 CPU 的缓存。使用连续内存似乎是理想的情况。话虽如此，我很好奇是否可以使用非连续内存进行类似的改进，但要遵循一组指针，例如：

```
struct Position {
    int32_t x,y,z;
}
...
std::vector<Position*> posPointers;
...
updatePosition () {
    for (uint32_t i = 0; i < posPointers.size(); i++) {
        Position& nextPos = *posPointers[i];
        nextPos.x++;
        nextPos.y++;
        nextPos.z++;
    }
} 
```

这只是一些粗略的模拟代码，为了正确学习，我们假设所有 Position 结构都是在整个堆中随机创建的。

英特尔 i7 等现代智能处理器能否展望未来并看到它很快就会需要`X_ptr`数据？以下代码行会有帮助吗？

```
... // for loop
Position& nextPos1 = *posPointers[i];
Position& nextPos2 = *posPointers[i+1];
Position& nextPos3 = *posPointers[i+2];
Position& nextPos4 = *posPointers[i+3];
... // Work on data here 
```

我读过一些演示幻灯片，这些幻灯片似乎表明这样的代码会导致处理器预取一些数据。真的吗？我知道有一些非标准的、特定于平台的方法来调用预取`__builtin_prefetch`，但是到处乱扔似乎是一个丑陋的过早优化。我正在寻找一种可以下意识地编写缓存高效代码的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T18:42:57.983

我知道你没有问（并且可能不需要关于正确处理缓存的布道，但我认为无论如何我都会贡献我的两分钱。请注意，所有这些仅适用于*热*代码。请记住，过早的优化是万恶之根。

正如评论中所指出的，最好的方法是拥有实际数据的容器。一般来说，扁平数据结构比“指针意大利面条”更可取，即使您必须复制一些数据和/或为调整数据结构的大小/移动/碎片整理付出代价。

如您所知，扁平数据结构（例如，数据数组）只有在大多数情况下以线性顺序访问它们时才会得到回报。

但这种策略可能并不总是可用。代替实际的线性数据，您可以使用其他策略，例如使用池分配器，并遍历池本身，而不是遍历保存指针的向量。这当然有其自身的缺点，并且可能会更复杂一些。

我相信您已经知道这一点，但值得再次提及的是，充分利用缓存的最有效技术之一是拥有更小的数据！在上面的代码中，如果您可以使用`int16_t`而不是`int32_t`，那么您绝对应该这样做。您应该将许多`bool`s 和标志以及枚举打包到位字段中，使用索引而不是指针（特别是在 64 位系统上）在数据结构中使用固定大小的哈希值而不是字符串等。

现在，关于您的主要问题，即处理器是否可以跟随随机指针并在需要之前将数据带入缓存。在非常有限的程度上，这确实发生了。您可能知道，现代 CPU 采用了许多技巧来提高它们的速度（即提高它们的指令退休率）。诸如拥有存储缓冲区、乱序执行、超标量管道、各种功能单元、分支等技巧预测等。大多数时候，这些技巧都只是帮助 CPU*继续执行指令*，即使当前指令已停止或完成时间过长。对于内存加载（这是最慢的事情，如果数据不在缓存中），这意味着 CPU 应该尽快获取指令，计算地址，并从内存控制器请求数据。但是，内存控制器只能处理非常有限数量的未完成请求（现在通常是两个，但我不确定。）这意味着即使 CPU 做了非常复杂的事情来提前查看其他内存位置（例如你的向量的元素`posPointers`）并推断这些是你的代码将需要的新数据的地址，它不能走得太远，因为内存控制器只能有这么多的请求待处理。

无论如何，AFAIK，我认为 CPU 还没有真正做到这一点。请注意，这是一个困难的情况，因为随机分布的内存位置的地址本身就在内存中（而不是在寄存器中或可以从寄存器的内容中计算出来。）如果 CPU 做到了，它就不会由于内存接口的限制，无论如何都会产生很大的影响。

您提到的预取技术对我来说似乎是有效的，并且我已经看到它使用过，但只有当您的 CPU 在等待未来数据到达时有事情要做时，它才会产生明显的效果。增加三个整数比从内存加载 12 个字节（实际上是加载一个缓存行）花费的时间要少得多，因此它对执行时间的意义不大。但是如果你有一些有价值的和更重量级的东西可以覆盖在内存预取之上（例如计算一个不需要内存数据的复杂函数！）那么你可以获得非常好的加速。你看，通过上述循环的时间本质上是所有缓存未命中时间的总和；您将免费获得坐标增量和循环簿记。所以，如果免费的东西更有价值，你会赢得更多！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T05:00:35.470

现代处理器具有硬件预取机制：[英特尔硬件预取](http://software.intel.com/en-us/articles/optimizing-application-performance-on-intel-coret-microarchitecture-using-hardware-implemented-prefetchers)器。他们推断内存的跨步访问模式并预取可能在不久的将来访问的内存位置。

然而在完全随机指针追逐的情况下，这种技术也无济于事。处理器不知道正在执行的程序正在执行指针追逐，因此它不能相应地预取。在这种情况下，硬件机制对性能不利，因为它们会预取不太可能使用的值。

您可以做的最好的事情是尝试以更有可能访问内存的连续部分的方式组织内存中的数据结构。

# android - android：从 JNI 打开 /dev/video4（网络摄像头）时权限被拒绝

> ID：15170806
> 
> 赞同：3
> 
> 时间：2013-03-02T04:44:35.617
> 
> 标签：android, java-native-interface, permission-denied, v4l2, v4l

我已经在我的安卓设备上配置了 v4l2。我插入网络摄像头并看到 /dev/video4 节点已创建。但是当我尝试从我的 JNI 层打开它时，它显示“权限被拒绝”

我试过以下

1) 更改 /dev/video4 的权限，使其为所有人的读写 (0666)

2）在android manifest xml中添加了android.permission.camera（原来/dev/video4是系统创建的，camera group有rw权限）

它们都不起作用。关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T06:54:46.157

*我在 Android 4.4.2 (Sasmung Galaxy S5 SM-G900F)*上遇到了类似的问题。我发现更改权限`/dev/video4`并没有帮助。但是**chown**成功了：

```
su -c chown 10209:10209 /dev/video4 
```

（这里，10209 是 Android 分配给我的应用程序的 UID）。

**PS**这并没有解决我的主要问题：当我的应用程序从特定的 USB 摄像头读取视频帧时出现内核恐慌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-14T02:36:47.337

这听起来与我在 Lollipop 上的**SE Linux 权限遇到的问题相同。**[在这里](https://stackoverflow.com/a/37646688/641428 "这里")查看我的答案。

简而言之，您可以：

*   通过运行（以 root 身份）禁用 SE Linux（直到重新启动）`echo 0 > /sys/fs/selinux/enforce`
*   破解您的 Cyanogenmod 构建并添加`allow untrusted_app video_device:chr_file rw_file_perms;`到`external/sepolicy/untrusted_app.te`.

# android - 在 Android 模拟器上安装 Flash Player

> ID：15170807
> 
> 赞同：3
> 
> 时间：2013-03-02T04:44:42.570
> 
> 标签：android, installation, emulation

我想知道在安卓模拟器上安装flash player的过程（请详述）。我需要这样做来测试应用程序，目前我没有任何物理设备。

我已经尝试过的事情： 1\. 我已经检查了有关此主题的所有堆栈溢出链接。2\. 我已经知道 adobe 已经停止了 android 的 flash。所以 google play store 和 flash player 的链接都失效了。3\. 我尝试从第三方安装它，例如[http://dh.st/x4v](http://d-h.st/x4v)，但是从模拟器内的浏览器打开这个链接很痛苦。

因此，非常感谢任何形式的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T04:51:46.767

尽管 Android 模拟器只安装了少数几个应用程序，但只要您有权访问基本下载文件 APK 文件，您就可以安装其他应用程序。如果您想在模拟器上开发与 Adob​​e Flash Player 交互的应用程序，有一种方法可以在不安装 Android Market 的情况下解决这些限制。

**指示**

**1**在 Eclipse 安装中下载并安装 Android 模拟器 SDK。

**2** 下载 Adob​​e Flash 播放器的 APK 文件，并将其保存到 SDK 安装中的“yourSDK/tools/”目录下。将“yourSDK”替换为您的 SDK 根目录的名称。

**3**在 SDK 的 shell 中运行“adb install yourSDK/tools/flash.apk”。将“yourSDK”替换为您的 SDK 根目录的名称，将“flash.apk”替换为 Flash APK 文件的确切名称。

阅读更多：如何在 Android 模拟器上获取 Flash 包 | eHow.com [http://www.ehow.com/how_12172392_flash-package-android-emulator.html#ixzz2MM3xgmjX](http://www.ehow.com/how_12172392_flash-package-android-emulator.html#ixzz2MM3xgmjX)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T05:42:53.400

只需从[Adob​​e 的官方页面](http://helpx.adobe.com/flash-player/kb/archived-flash-player-versions.html)下载最新的存档。您可以从设备执行此操作。如果 URL 太笨重，只需[tinyurl](http://tinyurl.com)即可。

我已经设置了这个，因为它已经出现了不止一次： [http](http://tinyurl.com/flash4ics) ://tinyurl.com/flash4ics它从 Adob​​e 下载了最后一个（真的是最后一个！）Flash 播放器。

# java - 使用 AES/ECB/NoPadding 加密和解密不会给出相同的纯文本

> ID：15170808
> 
> 赞同：1
> 
> 时间：2013-03-02T04:44:47.417
> 
> 标签：java, encryption, aes, rijndael

```
String plain1= "Test";
byte[] cipher = SplashSecure.getInstance().encrypt2(plain1);
String plain2 = SplashSecure.getInstance().decrypt2(cipher); 
```

> 普通 = 测试������������������������

解密后`plainText2`应该等于`plaintext`. 但事实并非如此。

加密/解密方法。

```
 public void initKey(String key) {
    String paddedKey = Utils.padString(key);
    mKeyspec = new SecretKeySpec(Utils.getBytes(paddedKey), "AES/ECB/NoPadding");
                   // Utils.getBytes returns "paddedKey.getBytes("CP1252")"
 }

public byte[] encrypt2(String data) {
    try {
        Cipher cipher = Cipher.getInstance("AES/ECB/NoPadding");
        cipher.init(Cipher.ENCRYPT_MODE, mKeyspec);
        String paddedData = Utils.padString(data);
        return cipher.doFinal(Utils.getBytes(paddedData));

    } catch(InvalidKeyException e) {
        e.printStackTrace();
    // Series of catch blocks
    }
    return null;
}

public String decrypt2(byte[] cypherText) {
    try {
        Cipher cipher = Cipher.getInstance("AES/ECB/NoPadding");
        cipher.init(Cipher.DECRYPT_MODE, mKeyspec);
        byte[] plainTextBytes = cipher.doFinal(cypherText);
        return Utils.getString(plainTextBytes);
        // Utils.getString returns "new String(bytes, "CP1252");"
    } catch(InvalidKeyException e) {
        // Series of catch blocks.
    } 
    return null;
} 
```

## 编辑

```
public static String padString(String source) {
    char paddingChar = '\0';
    int size = 16;
    int padLength = size - source.length() % size;

    for (int i = 0; i < padLength; i++) {
        source += paddingChar;
    }

    return source;
} 
```

## 编辑

我试图让加密解密在 Windows（其他加密的客户端和服务器）和 Android 上工作。Windows 客户端是使用 Rijndael 类 ( [http://svn.openfoundry.org/pcman/2007.06.03/Lite/Rijndael.h](http://svn.openfoundry.org/pcman/2007.06.03/Lite/Rijndael.h) ) 的 VC++ 应用程序，Android 使用[http://www.cs.ucdavis.edu/ ~rogaway/ocb/ocb-java/Rijndael.java](http://www.cs.ucdavis.edu/~rogaway/ocb/ocb-java/Rijndael.java)。Windows 客户端已加密数据并将其存储在服务器上。我需要为 android 构建一个客户端来获取加密数据，解密并显示给用户。

我确定我使用了正确的密钥来解密。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T18:30:15.350

AES 的块大小为 128 位（即 16 字节）。它*只能*处理这种大小的块中的数据，因此即使您告诉它使用`NoPadding`它也无法遵守。

这里最有可能发生的事情是您使用的 AES 实现在内部将您的四个字节输入填充到 16 个字节并加密结果。当您解密时，您会得到相同的 16 个字节，即“T”、“e”、“s”、“t”和 12 个垃圾字节。

您看到的输出支持这一点：“测试”后跟 24 个`?`符号。我不知道为什么它`?`为每个垃圾字节打印两个符号，但我猜这与解释 unicode 中的垃圾字节有关。您可以通过打印出解密 blob 的原始字节值来查看发生了什么。

简短的回答是“NoPadding”对于分组密码没有意义（或者，如果您要使用 NoPadding，那么您必须自己填充和取消填充）。

# windows-8 - 如何使用来自 json 请求的 youtube api 处理 youtube 删除的视频

> ID：15170814
> 
> 赞同：0
> 
> 时间：2013-03-02T04:45:34.967
> 
> 标签：windows-8, microsoft-metro, youtube-api, jsonresult, youtube-channels

我想使用 json 请求从 youtube api 获取 youtube 视频。现在我使用 json 从 youtube 获取视频。例如，网址中有一些已删除的视频（[http://www.youtube.com/watch?v=MlOHWLqgcoY&list=PLD62D6701B15FD3E1](http://www.youtube.com/watch?v=MlOHWLqgcoY&list=PLD62D6701B15FD3E1)），但我只播放视频而不是删除的视频。是否有可能或任何其他方式使用 json 结果处理 youtube 删除的视频。

这是我获取 youtube 视频的代码

```
string getPlaylistVideoUrl = https://gdata.youtube.com/feeds/api/playlists/PLD62D6701B15FD3E1?v=2&safeSearch=strict&orderby=position&start-index=1&max-results=25&alt=json;
var webRequest = (HttpWebRequest)WebRequest.Create(getPlaylistVideoUrl);
using (WebResponse response=await webRequest.GetResponseAsync())
using (Stream responseStream=response.GetResponseStream())
using (StreamReader reader = new StreamReader(responseStream))
{
   var jsonResult = reader.ReadToEnd();
   var videosList = JsonConvert.DeserializeObject<YouTubeVideosByPlaylist>(jsonResult);
   if (videosList.Feed != null)
   {
      if (videosList.Feed.Entry != null)
      {
           //Add entries to class
      }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T04:46:15.277

我解决了 youtube 删除视频的问题。如果您在 youtube api Url 中获得给定**格式 = 6的播放列表。**

```
string getPlaylistVideoUrl = https://gdata.youtube.com/feeds/api/playlists/PLD62D6701B15FD3E1?v=2&safeSearch=strict&orderby=position&start-index=1&max-results=25&alt=json&format=6; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:17:04.857

`app$control`使用数据 API v2 检索时，不可播放的视频通常会在其 JSON 响应中设置元素。以下是在响应 JSON 中查找内容的示例：

```
"app$control": {
 "app$draft": {
  "$t": "yes"
 },
 "yt$state": {
  "$t": "This video is not available in your region.",
  "name": "restricted",
  "reasonCode": "requesterRegion"
 }
} 
```

在给定的播放场景中，视频可能无法播放还有[其他原因](http://apiblog.youtube.com/2011/12/understanding-playback-restrictions.html)`app$control`，因此缺少并不能确保视频始终可以播放。但如果`app$control` **存在**，则无法播放视频。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T13:29:52.797

来自 Google 文档“如果视频不可播放，则该视频的条目将不包含 <media:content> 标签。此外，该条目可能包含 <app:control> 标签，其中包含视频原因的说明无法播放”

[https://developers.google.com/youtube/2.0/developers_guide_protocol_testing](https://developers.google.com/youtube/2.0/developers_guide_protocol_testing)

# ssh - 在 ChromeOS 的 known_hosts 文件中添加密钥

> ID：15170815
> 
> 赞同：0
> 
> 时间：2013-03-02T04:45:38.247
> 
> 标签：ssh, google-chrome-os, crosh

使用非常有限的 ChromeOS crosh shell，如何将主机密钥添加到 ChromeOS 中的 known_hosts 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T02:35:16.773

我不相信可以将您的密钥添加到 Chrome OS shell。如果您处于开发人员模式，则可以添加您的密钥。您还可以从 Chrome 网上应用店安装 Secure Shell 应用程序，并在该应用程序中添加您的密钥。如果您不想使用开发人员模式，该应用程序是最好的选择，尽管它仍有一些错误需要解决。

# sql-order-by - 如何在sql select查询中使用order by按升序对投诉号进行排序

> ID：15170819
> 
> 赞同：0
> 
> 时间：2013-03-02T04:45:58.613
> 
> 标签：sql-order-by

```
qry1 = "Select * from ser_complaint_master a,ser_complaint_status b,company_master c
        where a.complaint_no=b.complaint_no
        and a.allocation_code=c.co_code
        and c.co_br_code='" + Session["BRCODE"] + "'
        and a.Complaint_Date>='" + Frdat + "' and a.Complaint_Date<='" + Todat + "'
        and a.status in ('Completed')
        and a.complaint_type in('" + cmptype + "')"; 
```

如果涉及多个表，如何在选择查询中使用 ORDER BY。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T06:26:19.630

添加`order by a.complaint_no`到查询的末尾。

# css - 使用 CSS3 旋转背景图像

> ID：15170820
> 
> 赞同：12
> 
> 时间：2013-03-02T04:46:09.340
> 
> 标签：css, rotation, background-image, css-animations

我有一个背景图像，其中有一个指向右侧的箭头。当用户单击按钮时，选定状态会将箭头更改为向下（在我的图像精灵中使用不同的背景位置）。

无论如何使用CSS3对此进行动画处理，因此一旦单击按钮并且jQuery为其分配了“选定”类，它将以动画（仅90度）从右到下旋转？（最好使用带有指向右侧的箭头的单个图像/位置）

我不确定是否需要使用变换或关键动画帧。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-02T05:50:43.343

您可以使用`::after`(or `::before`)`pseudo-element`来生成动画

```
div /*some irrelevant css */
{
    background:-webkit-linear-gradient(top,orange,orangered);
    background:-moz-linear-gradient(top,orange,orangered);
    float:left;padding:10px 20px;color:white;text-shadow:0 1px black;
    font-size:20px;font-family:sans-serif;border:1px orangered solid;
    border-radius:5px;cursor:pointer;
}

/* element to animate */
div::after               /* you will use for example "a::after" */
{
    content:' ►';        /* instead of content you could use a bgimage here */
    float:right;
    margin:0 0 0 10px;
    -moz-transition:0.5s all;
    -webkit-transition:0.5s all;
}

/* actual animation */
div:hover::after         /* you will use for example "a.selected::after" */
{
    -moz-transform:rotate(90deg);
    -webkit-transform:rotate(90deg);
} 
```

HTML：

```
<div>Test button</div> 
```

在您的情况下，您将使用 element.selected 类而不是

**jsfiddle 演示**：http: [//jsfiddle.net/p8kkf/](http://jsfiddle.net/p8kkf/)

希望这可以帮助

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-02T05:14:12.497

这是我用来旋转背景图像的旋转 css 类：

```
.rotating {
  -webkit-animation: rotating-function 1.25s linear infinite;
     -moz-animation: rotating-function 1.25s linear infinite;
      -ms-animation: rotating-function 1.25s linear infinite;
       -o-animation: rotating-function 1.25s linear infinite;
          animation: rotating-function 1.25s linear infinite;
}

@-webkit-keyframes rotating-function {
  from {
    -webkit-transform: rotate(0deg);
  }
  to {
    -webkit-transform: rotate(360deg);
  }
}

@-moz-keyframes rotating-function {
  from {
    -moz-transform: rotate(0deg);
  }
  to {
    -moz-transform: rotate(360deg);
  }
}

@-ms-keyframes rotating-function {
  from {
    -ms-transform: rotate(0deg);
  }
  to {
    -ms-transform: rotate(360deg);
  }
}

@-o-keyframes rotating-function {
  from {
    -o-transform: rotate(0deg);
  }
  to {
    -o-transform: rotate(360deg);
  }
}

@keyframes rotating-function {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
} 
```

# c - cat 终端，检查 USB 已移除（错误）？

> ID：15170824
> 
> 赞同：2
> 
> 时间：2013-03-02T04:46:39.700
> 
> 标签：c, terminal, usb, cat

对于作业，我们必须创建功能类似于 cat 命令的 C 程序。第一次提交要求它模仿 cat.... 的极少操作，即打印到输出、重定向。我遇到的问题是一个要求是在驻留在 USB 驱动器上的输出文件丢失的情况下打印错误，即在将标准输出重定向到它时拔出 USB。

我如何捕获这样的错误，以及如何为该特定错误执行测试用例？

非常感谢....真的不知道

**更新代码温度**

```
 int main(){
    char c;

    while((c = getchar()) != EOF){
       putchar(c);
       // Ensure newly created file exists
    }

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:05:58.803

假设您正在使用`fprintf()`手册[页](http://www.cplusplus.com/reference/cstdio/fprintf/)：

> 成功时，返回写入的字符总数。

所以：

1.  `char`将要写入的数组的大小存储到变量中`x`
2.  如果`fprintf()`小于`x`，则写入被中断。
3.  优雅地退出

编辑：

我在想两件事：

1：`putchar()`失败时，表示写入文件时出错。由于写入一个字节不会花费很长时间，这应该不太可能，因为一旦写入字节（或您假设）它将处于安全状态。

你可以这样做

```
if(putchar(c) == EOF){
    //write error
} 
```

2：如果您在检测到文件删除时被要求退出，那么您需要监视目录。幸运的是，您只查看一个目录。然而，该`while`循环阻碍了事情的发展，因为`getchar()`它是一个阻塞函数（在发生某些事情之前不能返回）。您应该使用[inotify](http://linux.die.net/man/7/inotify)来监视目录，然后可能[轮询](http://linux.die.net/man/3/poll)以轮询`inotify()`. 当我这样做时，我使用了[选择](http://linux.die.net/man/2/select)，因为我们被迫这样做。

某种想法如何监视目录`inotify()`

```
int length, i = 0;
char buffer[EVENT_BUF_LEN];
memset(buffer, 0, EVENT_BUF_LEN*sizeof(char));
//init inotify
fd = inotify_init();
if(fd < 0){
    perror("inotify init");
}
//add directory to watch list
wd = inotify_add_watch(fd, path , IN_DELETE | 
    IN_DELETE_SELF | IN_MODIFY | IN_MOVE_SELF | IN_MOVED_FROM | IN_MOVED_TO);
fd_set fds;
FD_ZERO(&fds);
FD_SET(fd, &fds);
//wait for event, since read() blocks
length = read( fd, buffer, EVENT_BUF_LEN );
if ( length < 0 ) {
    perror("zero event length");
}
struct inotify_event *event;
while (i < length){
    //cast the event to a char buffer
    event = (struct inotify_event*) &buffer[i];
    if (event->len){
        //this was a custom function of mine
        storeEvent(event);
    }
    i += EVENT_SIZE + event->len;
} 
```

您必须检查添加目录时要使用的属性（如`IN_DELETE`或`IN_MODIFY`），因为它们将确定触发`inotify()`事件的内容。`read()`请注意，此代码将仅检测一个事件，并在语句处阻塞。

# php - 使用 Javascript 和 PHP 的复选框 AutoSum

> ID：15170826
> 
> 赞同：2
> 
> 时间：2013-03-02T04:46:42.320
> 
> 标签：php, javascript, html, checkbox

我想在我的网站上放置一个复选框 autosum，以便任何选中一个框并提交的人，这些复选框的值（点）会自动添加到我的总和（实际上是在主页上）我到目前为止已经找到了这个代码java脚本。

```
<table border="0" cellpadding="0" cellspacing="0" width="100%">
  <tr>
    <td> <input name="sum_m_1" value="25" type="checkbox" id="sum_m_1" onclick="UpdateCost()"> </td>
    <td> ResponseOption_1 </td>
  </tr>
  <tr>
    <td> <input name="sum_m_2" value="15" type="checkbox" id="sum_m_2" onclick="UpdateCost()"> </td>
    <td> ResponseOption_2 </td>
  </tr>
</table>
<input type="text" id="totalcost" value=""> 
```

使用 JAVASCRIPT：

```
<script type="text/javascript">
function UpdateCost() {
  var sum = 0;
  var gn, elem;
  for (i=1; i<3; i++) {
    gn = 'sum_m_'+i;
    elem = document.getElementById(gn);
    if (elem.checked == true) { sum += Number(elem.value); }
  }
  document.getElementById('totalcost' ).value = sum.toFixed(2);
}
window.onload=UpdateCost
</script> 
```

这将累加值，但我想通过选中复选框来添加 --> 提交 --> 收集数据 --> 添加到我的主要总数中。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:12:45.737

简单的改变：

*   添加一个“计算成本”按钮。
*   从复选框中删除了 onclick 事件，并将 onclick 事件添加到按钮中。

请注意，“window.onload=UpdateCost”仍然存在，因为您希望在页面加载时总成本正确显示为 0.00。

**HTML**

```
<table border="0" cellpadding="0" cellspacing="0" width="100%">
  <tr>
    <td> <input name="sum_m_1" value="25" type="checkbox" id="sum_m_1"> </td>
    <td> ResponseOption_1 </td>
  </tr>
  <tr>
    <td> <input name="sum_m_2" value="15" type="checkbox" id="sum_m_2"> </td>
    <td> ResponseOption_2 </td>
  </tr>
</table>
<input type="text" id="totalcost" value="">
<input type="button" value="update cost" onclick="UpdateCost();"> 
```

**JavaScript**

```
<script type="text/javascript">
    function UpdateCost() {
      var sum = 0;
      var gn, elem;
      for (i=1; i<3; i++) {
        gn = 'sum_m_'+i;
        elem = document.getElementById(gn);
        if (elem. checked == true) { sum += Number(elem. value); }
      }
      document.getElementById('totalcost' ).value = sum.toFixed(2);
    }
    window.onload=UpdateCost
</script> 
```

希望这是你想要的那种东西，让我知道你的想法。

# asp.net - 如何从 FourSquare 获得 Shout？

> ID：15170829
> 
> 赞同：1
> 
> 时间：2013-03-02T04:46:59.083
> 
> 标签：asp.net, foursquare

我正在使用 FourSquare API v2。我已经从我的朋友列表中收到了 CheckIn 的呼声。但我想使用场地 ID 获得非朋友的 FourSquare CheckIn Shouts

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:55:28.230

由于 Foursquare 的隐私政策，您不能这样做，该政策旨在保护其用户的敏感和个人信息。

每个呼喊都与一个签到相关联，并且获取与场地 ID 关联的签到的唯一方法是通过[场所/herenow](https://developer.foursquare.com/docs/venues/herenow)端点，它不会返回您对非朋友的呼喊。

# c# - 合并多个 RSS 提要

> ID：15170830
> 
> 赞同：1
> 
> 时间：2013-03-02T04:47:04.767
> 
> 标签：c#, asp.net, rss, rss-reader

我认为这是一个非常基本的问题，但我想知道如何合并多个 rss 提要并显示合并的提要

由于提要来自多个来源，我必须删除重复的提要并仅显示相关信息。

我正在使用 asp.net(VS2010)。

其他一些帖子： [合并多个 RSS 提要](https://stackoverflow.com/questions/1499101/merging-multiple-rss-feeds)

[合并 RSS 提要](https://stackoverflow.com/questions/27148/merge-rss-feeds)

我不想使用雅虎管道。

请让我知道我该怎么做..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T05:25:03.733

提要采用 xml 格式。因此，您必须合并您的 RSS 提要的“频道”节点的内容。为此，请查看此链接[如何在 C# 中合并两个 XmlDocuments](https://stackoverflow.com/questions/3440073/how-to-merge-two-xmldocuments-in-c-sharp)

另请参阅：[单个 RSS xml 中的多个频道 - 是否合适？](https://stackoverflow.com/questions/3798863/multiple-channels-in-a-single-rss-xml-is-it-ever-appropriate)

# php - 如何在同一页面中设置和销毁cookie而不影响搜索数据？

> ID：15170833
> 
> 赞同：2
> 
> 时间：2013-03-02T04:47:38.403
> 
> 标签：php, cookies, pagination, session-cookies, setcookie

我正在尝试在 cookie 的帮助下搜索数据并在同一页面中显示数据。它工作正常，但是当我尝试销毁 cookie 时，结果数据丢失并且没有搜索发生。我也使用`pagination`. 当我点击另一个页面没有。在分页中，结果数据丢失。这仅在我销毁 cookie 时发生。如果我不销毁 cookie，即使我在 url 中按 enter，数据也会继续显示。
`php code`：

```
 $depart_type=''; 
   if(isset($_COOKIE['depart_type']))
      {
        $depart_type = $_COOKIE['depart_type'];
      }   
    if($_POST['department_type']!='')
      {
        $depart_type = $_POST['department_type'];
        setcookie("depart_type",$depart_type,time()+3600,"/"); 
     }       
     $whr ="1";
    if($depart_type!="")
    {
        $whr .= "  AND `department_type` = '$depart_type'";
     } 
       $QryStaff = mysql_query("select * from `tbl_staff` where $whr) or die(mysql_error()); 
```

所以，问题是我何时何地销毁或取消设置 cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T05:57:52.370

我有一个建议。你应该做一个按钮。在该按钮的单击事件中，清除 cookie。不是专业的解决方案，尽管它肯定会起作用..

希望能帮助到你。

# drupal - 如何将 zillow 中的数据导入 drupal 以及如何将 walk score 集成到您的 drupal 站点中？

> ID：15170839
> 
> 赞同：1
> 
> 时间：2013-03-02T04:48:14.063
> 
> 标签：drupal, zillow

我使用 Drupal 7 建立了一个房地产网站。该网站功能齐全（[http://www.HousesInUSA.com](http://www.HousesInUSA.com)）。用户可以为他们的房子注册和创建列表。此外，他们可以创建和/或参与博客、论坛、投票和群组。该网站提供了三个具有不同功能的选项。我的下一个目标是将数据从 Zillow api 导入到这个网站。如果有人有经验或曾使用过 Zillow 和 walk score，我会很乐意提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T21:51:41.930

也许你应该看看[http://drupal.org/project/migrate](http://drupal.org/project/migrate)。使用它，您可以将任何来源的数据迁移到 Drupal。它甚至支持恢复。

// 无关

您是如何在[http://www.housesinusa.com/](http://www.housesinusa.com/)上制作搜索框的，仅使用视图或自定义模块？

# php - 如何在 CakePHP 中创建自定义 MySQL 查询？

> ID：15170852
> 
> 赞同：6
> 
> 时间：2013-03-02T04:50:05.403
> 
> 标签：php, mysql, cakephp, model, controller

我正在尝试在 Cakephp 中创建自己的 MySQL 查询。

这是我的`LocationsController.php`：

```
<?php
App::uses('Location', 'Model');
class LocationsController extends AppController
{
    public $helpers = array('Html', 'Form');
    function index()
    {
        $this->loadModel("Location");
        $this->Location->get();
    }
} 
```

这是我的`LocationModel.php`：

```
<?php
App::uses('AppModel', 'Model');
class LocationModel extends Model {

    public $name = 'Location';

    public function get()
    {
        $this->Location->query("SELECT * FROM locations;");
    }
} 
```

如您所见，我只是想执行一个简单的查询，但它不起作用。我收到此错误：

```
Error: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error 
in your SQL syntax; check the manual that corresponds to your MySQL server 
version for the right syntax to use near 'get' at line 1 
```

当我使用 find("all") 之类的魔术方法之一时，它可以工作...

你能看出问题所在吗？我真的不能，我只是想做一个简单的任务！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T13:10:01.633

您的 Location 模型的类名应该是`Location`，而不是`LocationModel`。

因此，CakePHP 将为 Locations 数据库表生成一个“通用”模型，并使用该模型而不是您自己的模型。因为这个泛型模型没有*方法*`get()`，所以会作为SQL语句执行，`get`导致报错

此外，在模型内部，您不应该使用`$this->Location->query();`，而只是`$this->query();`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T04:56:26.370

位置控制器应该是：

```
<?php
App::uses('Location', 'Model'); // Y do u need this?
class LocationsController extends AppController
{
    public $helpers = array('Html', 'Form');
    function index()
    {
        $this->loadModel("Location");
        $this->LocationModel->getLocations(); // I will strongly discourage using get()
    }
} 
```

位置模型应该是：

```
<?php
App::uses('AppModel', 'Model');
class LocationModel extends Model {

    public $name = 'Location';

    public function getLocations() // Try to avoid naming a function as get()
    {
    /** Choose either of 2 lines below **/

        return $this->query("SELECT * FROM locations;"); // if table name is `locations`
        return $this->query("SELECT * FROM Location;"); // if table name is `Location` since your public name is `Location`
    }
} 
```

# file-upload - 在 JSF 2.0 中为 tomahawk 配置库

> ID：15170854
> 
> 赞同：0
> 
> 时间：2013-03-02T04:50:20.003
> 
> 标签：file-upload, jsf-2, tomahawk

我正在尝试`<t:inputFileUpload/>`在 JSF2.0 facelets 中使用 ,上传文件

为此，我需要使用命名空间**xmlns:t="http://myfaces.apche.org/tomahawk/"**

但显示错误，如**“找不到此命名空间的库”**

```
 <html xmlns="http://www.w3.org/1999/xhtml"     
      xmlns:h="http://java.sun.com/jsf/html"  
      xmlns:f="http://java.sun.com/jsf/core"  
      xmlns:ui="http://java.sun.com/jsf/facelets"  
    xmlns:t="http://myfaces.apache.org/tomahawk" <!--Error Here : No library found for this namespace---> 
```

在上面的代码最后一行显示的错误

我该如何处理这个错误...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:38:19.473

未找到此命名空间的库意味着您尚未添加库将 tomahawk-1.1.9.jar 添加到您的构建路径

# c - IO 重定向和缓冲区问题，fflush 和 c

> ID：15170858
> 
> 赞同：0
> 
> 时间：2013-03-02T04:50:48.593
> 
> 标签：c, buffer, io-redirection, dup, fflush

对于我的班级，我们将实现一个带有输出重定向的 shell。我的输出重定向工作正常，除了我的第一个命令总是损坏请参阅：

```
$ echo this doesn't work
H<@?4echo
No such file or directory
$ echo this does work
this does work 
```

但是之后的每个命令似乎都很好。我使用什么技术来查找导致此问题的错误？

我认为这与没有正确冲洗有关。我把它洒在我的代码周围（这很愚蠢），看看它在循环期间是否有帮助，但没有。我还尝试打印出我的 OrderedIds 列表，该列表只是一个命令列表，用于检查是否可以在任何地方找到 H<@?4 ，但即使我初始化它，它也不起作用。

谢谢你的帮助。

```
#define LENGTH 1000
#define MAXCMD 11
#define MAX_STR_LEN 20
void init(char *temp);
void clean(char **orderedIds);
void init_pid(int *temp);
void reap(int *temp,int ret_status); 
void jobs(int *pid_list, char **orderedIds);
int ioRedir(char **orderedIds);
void reap(int *temp,int ret_status){//chainsaws all zombies
    int a;  
    for (a=0; a<LENGTH; a++ ){
        waitpid(temp[a],&ret_status,WNOHANG) == temp[a];
    }
}
void init(char *temp){//Function to initialize/reset the cmd array
    int i;
    for(i=0; i<LENGTH; i++){
        temp[i] = 0; 
    }
}
void init_pid(int *temp){//Function to initialize/reset the pid list
    int i;
    for(i=0; i<LENGTH; i++){
        temp[i] = -777; 
    }
}
void clean(char **orderedIds){//garbage collection 
    int i; 
    for(i=0; i<MAXCMD; i++){
        free(orderedIds[i]);
    }
    free(orderedIds);
} 
void jobs(int *pid_list, char **orderedIds){//function to check for background proccesses
    printf("Jobs:\n");
    int y; 
    for(y=0; y<LENGTH; y++){
        if(kill(pid_list[y], 0) == 0){
            printf("%d\n", pid_list[y]); 
        }               
    }
    clean(orderedIds);
    printf("$ ");
}
int ioRedir(char **orderedIds){ 
    int i; 
    for ( i = 0; i<MAXCMD; i++){
        if(orderedIds[i] == NULL){
            return -1; 
        }
        if(strcmp(orderedIds[i],">")==0){
            return (i+1); 
        }

    }
}

int main (int argc, char *argv[], char *envp[])
{ 
    char temp[LENGTH];
    char * tok;
    char c = '\0';
    int saved_stdout;
    int pid_list[LENGTH];
    int ret_status;
    int numFile;
    int pid_counter = 0;
    int outputfd = -1;   
    char outputFile[MAX_STR_LEN]; 
    pid_t pid; 
    printf("$ ");
    int i, j, y, background= 0;  
    init_pid(pid_list); 
    while(c !=EOF) { //while not ^D // Source: LinuxGazzette Ramankutty
        outputfd = -1;
        fflush(0);
        c = getchar();    
        if(c=='\n'){ //entered command
            reap(pid_list, ret_status); 
            char **orderedIds = malloc(MAXCMD * sizeof(char*)); 
            for (i=0; i<MAXCMD; i++){
                 orderedIds[i] = malloc(MAXCMD * sizeof(char*)); 
            }
            int k=0; 
            tok = strtok(temp, " \n\t\r"); 
            while (tok !=NULL){ 
                strcpy(orderedIds[k], tok);
                k++;
                tok = strtok (NULL, " \n\t\r");
            }
            orderedIds[k] = NULL; //END with NULL 
            init(temp); //initialize the array
            if(orderedIds[0] ==NULL){
                printf("\n$ ");
                continue; 
            }
            numFile = ioRedir(orderedIds);
            if(strcmp(orderedIds[0],"exit")==0){// if exit
                printf("now exiting...\n"); 
                break;  
            }
            if(strcmp(orderedIds[k-1], "&")==0){//if background
                 orderedIds[k-1] = NULL; 
                 background = 1;
            }else background = 0; 

            if(strcmp(orderedIds[0], "jobs") == 0){//if jobs command    
                jobs(pid_list, orderedIds); 
                continue; 
            }   
            if(strcmp(orderedIds[0], "cd") == 0){ //if change directory command
                chdir(orderedIds[1]);
                printf("$ ");
                continue;
            }
            pid = fork();
            if (pid!=0 && background == 1)
            {
                //go to end of list in pid and put it in 
                pid_list[pid_counter] = pid; 
                pid_counter++; 
                printf("To the background: %d\n", pid);
            } else if (pid==0 && background == 1) {
                    fclose(stdin); //close child's stdin
                    fopen("/dev/null", "r"); //open a new stdin that is always empty.
                if(execvp(orderedIds[0], orderedIds)){
                    printf("%s\n", orderedIds[0]);
                    puts(strerror(errno));
                    exit(127); 
                }
            }
            if (pid != 0 && !background){
                //printf("Waiting for child (%d)\n", pid);
                fflush(0);
                pid = wait(&ret_status);
            }  else if (pid == 0 && !background) {
                    if(numFile > 0){
                        strncpy(outputFile, orderedIds[numFile], strlen(orderedIds[numFile])); 
                        numFile = 0;
                        //open the output file 
                        outputfd = open(outputFile, O_WRONLY | O_CREAT | O_TRUNC, S_IRWXU | S_IRGRP | S_IROTH); 
                        if (outputfd < 0) {
                            exit(EXIT_FAILURE);
                        }
                        //close STDOUT
                        if(close(STDOUT_FILENO) < 0 ){
                            perror("close(2) file: STDOUT_FILENO");
                            close(outputfd); 
                            exit(EXIT_FAILURE); 
                        }
                        //use dup to rerout the output
                        if(saved_stdout = dup(outputfd) != STDOUT_FILENO){
                            perror("dup(2)");
                            close(outputfd);
                            exit(EXIT_FAILURE);
                        }
                        close(outputfd);

                    }

                if (execvp(orderedIds[0], orderedIds)){
                    printf("%s\n", orderedIds[0]);
                    puts(strerror(errno));
                    exit(127);
                }
            }
            dup2(saved_stdout,outputfd);
            clean(orderedIds);
            fflush(0);
            printf("$ ");
        } else {
            strncat(temp, &c, 1); 
        }
    }
    fflush(0);
    return 0;    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T06:08:42.010

垃圾的原因是您从未`temp`在`main()`. 您`init(temp)`在处理完每个命令后调用。

您的代码中还有很多其他问题：

```
orderedIds[i] = malloc(MAXCMD * sizeof(char*)); 
```

由于`orderedIds[i]`是 char 数组，而不是 char*，因此您应该将大小乘以`sizeof(char)`. 此外，尚不清楚为什么要使用`MAXCMD`大小 - 在上一行中，这是一行中的最大单词数，而不是单词中的字符数。

```
strcpy(orderedIds[k], tok); 
```

您应该使用`strncpy()`以确保您不会复制超过`orderedIds[k]`.

另一种选择是*不*首先预先分配所有的`orderedIds[i]`。而不是使用`strcpy()`，使用`strdup()`并将其分配给`orderedIds[k]`; 如果你这样做，你必须记住`free()`所有这些字符串。

第三种选择是根本不复制字符串。只需将返回的指针分配给`strtok()`to `orderedIds[k]`。但在这种情况下，您必须`init(tmp)`在分叉后才能调用。

```
strncpy(outputFile, orderedIds[numFile], strlen(orderedIds[numFile])); 
```

限制应该是 的大小`outputFile`，而不是 的长度`orderedIds[numFile]`。`strncpy()`永远不会复制超过源的长度，您需要告诉它目标的最大大小以防止缓冲区溢出。

```
outputfd = open(outputFile, O_WRONLY | O_CREAT | O_TRUNC, S_IRWXU | S_IRGRP | S_IROTH); 
if (outputfd < 0) {
   exit(EXIT_FAILURE);
} 
```

您应该致电`perror()`报告`open()`失败的原因。

```
puts(strerror(errno)); 
```

打电话`perror()`，就像你在别处做的那样。

# c# - 如何在匹配字符串 C# 时移动到文件中的特定行

> ID：15170860
> 
> 赞同：0
> 
> 时间：2013-03-02T04:51:27.937
> 
> 标签：c#, .net, winforms, listview, windows-forms-designer

假设我有一个包含内容的文件*contacts.txt*：

```
adam
adam@gmail.com
kris
kris@gmail.com
james
james@gmail.com 
```

我还将文件的内容存储在 ListView (ListView1) 中，例如：

```
adam    adam@gmail.com
kris    kris@gmail.com
james   james@gmail.com 
```

我已经将 contextmenustrip 与项目更新一起使用。

在 ListView 上说，我右键单击 james 行并选择更新，然后将加载一个新表单，询问姓名和电子邮件以进行更新。

在文本框中输入姓名和电子邮件并在更新按钮后单击相应的人员姓名和电子邮件必须在contacts.txt文件中更新，该表格将被关闭并返回到以前的表格。

假设我将詹姆斯的名字更改为bond 并发送电子邮件至bond@gmail.com。

现在内容应该是：

```
adam
adam@gmail.com
kris
kris@gmail.com
bond 
bond@gmail.com 
```

同样在右键单击更新时，将加载新表单，提示输入此实例的名称和电子邮件。假设我单击 ListView 中的 james 行，我希望将 james 放在名称上，并将 james@gmail.com 放在电子邮件上的新表单单击 updatemenustrip 的文本框中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T05:13:34.477

有几种方法可以做到这一点。这里有几个。我会用你的例子...

1.  读取内存中文件的所有行（例如。`string[]`）。对于数组中的每一行，如果找到`james`，请将其替换为`bond`，并在下一个位置写入`bond@gmail.com`。然后将所有行写回同一个文件

    ```
    var lines = File.ReadAllLines(@"C:\test.txt");

    for (int i = 0; i < lines.Length; i++) {
        var line = lines[i];
        if (line == "james") {
            lines[i] = "bond";
            lines[i + 1] = "bond@gmail.com";
        }
    }

    File.WriteAllLines(@"C:\test2.txt", lines); 
    ```

2.  阅读整个文本，并使用正则表达式替换这些特定值：

    ```
    var text = File.ReadAllText(@"C:\test.txt");

    string oldName = "james";
    string newName = "bond";
    string oldEmail = "james@gmail.com";
    string newEmail = "bond@gmail.com";

    var newText = Regex.Replace(
        text,
        string.Format(@"{0}([\n\r]+){1}", Regex.Escape(oldName), Regex.Escape(oldEmail)),
        string.Format(@"{0}$1{1}", newName, newEmail));

    File.WriteAllText(@"C:\test.txt", newText); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T05:15:22.690

更新后，`ListView.items`是最新的。迭代`ListView.items`并将每个项目写回文件。

# c# - 数组通过参数通过引用影响另一个数组

> ID：15170867
> 
> 赞同：1
> 
> 时间：2013-03-02T04:52:40.150
> 
> 标签：c#, parameters, undefined-behavior

CardDetails 是一个结构。

```
public static void ParceIntricaciesJabber(ref CardDetails[] WhichArray) 
{
  WhichArray[0].ID = 50;
  WhichArray[0].Type = "None";
} 
```

在调用中：

```
ParceIntricaciesJabber(ref OpponentCards); 
```

不过，在我调用该函数之后，另一个名为 PlayerCards 的数组会以与 OpponentCards 完全相同的方式受到影响——尽管它被声明为两个不同的数组。它们具有相同数量的元素和相同的数据类型，仅此而已。

这可能应该很明显，但我没有看到。该代码在 VB.NET 中工作。我究竟做错了什么？

编辑：初始化代码：

```
public static class Module1{

  public static CardDetails[] PlayerCards = new CardDetails[100];
  public static CardDetails[] OpponentCards = new CardDetails[100];

} 
```

并且在导航到表单时

```
for (int n = 1; n <= 100; n++)
        {
            Module1.PlayerCards[n] = new CardDetails();
            Module1.OpponentCards[n] = new CardDetails();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:08:12.283

我的猜测是您正在共享对数组的引用。即使它是数组内部的结构，数组本身也是一个引用类型。您将需要发布您的数组实例化代码以验证一种或另一种方式

# xcode - “滥用钥匙串服务 API”分析发现了哪些类型的错误？

> ID：15170868
> 
> 赞同：3
> 
> 时间：2013-03-02T04:52:48.857
> 
> 标签：xcode, clang, keychain, clang-static-analyzer

Xcode 4.6 有一个标记为“Misuse of Keychain Services API”的构建设置，也就是`CLANG_ANALYZER_SECURITY_KEYCHAIN_API`. 快速帮助没有帮助：

> 检查钥匙串服务 API 的滥用。

那么，Clang 静态分析器在打开时会寻找什么样的“误用”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T05:03:37.787

它旨在确保调用方以正确的方式释放 Keychain Services API 中函数分配的内存。例如，`SecKeychainFindGenericPassword`通过输出参数返回密码数据。调用者需要通过`SecKeychainItemFreeContent`而不是替代 API（如`free`. 未能使用正确的 API 可能会将敏感数据（例如密码）留在内存中。

如果您对更多细节感兴趣，可以在[LLVM SVN 存储库](http://llvm.org/viewvc/llvm-project/cfe/trunk/lib/StaticAnalyzer/Checkers/MacOSKeychainAPIChecker.cpp?view=markup)中查看此检查器的实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T05:02:57.880

[源代码](http://llvm.org/viewvc/llvm-project/cfe/trunk/lib/StaticAnalyzer/Checkers/MacOSKeychainAPIChecker.cpp?revision=175812&view=markup)中的注释说明：

```
// This checker flags misuses of KeyChainAPI. In particular, the password data
// allocated/returned by SecKeychainItemCopyContent,
// SecKeychainFindGenericPassword, SecKeychainFindInternetPassword functions has
// to be freed using a call to SecKeychainItemFreeContent. 
```

它似乎没有做任何比这更花哨的事情。

# python - python路径错误

> ID：15170871
> 
> 赞同：4
> 
> 时间：2013-03-02T04:53:21.033
> 
> 标签：python, macos

我有两个版本的 python .. python 2.6 和 python 2.7

我刚刚删除了python 2.6（以非常不安全的方式）..

现在当我输入 python 时，我得到这个错误：

```
 python: VERSIONER_PYTHON_VERSION environment variable error (ignored)
python: posix_spawn: /System/Library/Frameworks/Python.framework/Versions/2.6/Resources/Python.app/Contents/MacOS/Python: No such file or directory 
```

我的 python 2.7 安装在

```
/Library/Frameworks/Python.framework/Versions/2.7/bin/python 
```

当我做哪个蟒蛇

我得到 /usr/bin/python

我该如何解决我造成的这个烂摊子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T06:30:02.820

看起来您删除了 Apple 提供的 Python 2.6。你不应该那样做。切勿删除 中`/usr`、以外`/usr/local`或中的文件`/System/Library`。`/Library/Frameworks`当您安装 Python 的另一个框架版本时，就像您将 Python 2.7 安装`PATH`到`/usr/bin/python`. 您现在有三个主要选择：（1）在您下次升级 OS X 之前，不使用 Apple 提供的 Python 2.6，并希望您不需要其他 Apple 提供的实用程序依赖它；或 (2) 重新安装所有 OS X；或 (3) 如果您确切记得删除的内容并有完整备份，请尝试恢复已删除的文件。要使用较新的 Python 2.7，请将其放在您的路径上，例如：

```
export PATH=/Library/Frameworks/Python.framework/Versions/2.7/bin:$PATH 
```

# java - NullPointerException 解析 JSON 对象

> ID：15170874
> 
> 赞同：0
> 
> 时间：2013-03-02T04:54:09.940
> 
> 标签：java, php, blackberry

我从下面的代码中得到一个例外：

```
int[] startApps;
JSONObject jsonObjectMapData=new JSONObject(result); 
JSONArray jsonaryPlaceMark = jsonObjectMapData.getJSONArray("Apps"); 
JSONObject apps=   jsonaryPlaceMark.getJSONObject(0); int indx=0; 
startApps[indx++]=Integer.parseInt(apps.getString("Thread1")); 
startApps[indx++]=Integer.parseInt(apps.getString("Thread2")); 
```

我得到 java.lang.NullPointerException 在线：

```
 startApps[indx++]=Integer.parseInt(apps.getString("Thread1")); 
```

服务器响应：

```
{
 "name": "10.000000,106.000000",
"Status": {
"code": 200,
"request": "geocode"
},
"Apps": [ {
"Thread1": 1,
"Thread2": 1,   
"Thread3": 1,
"Thread4": 1,
"Thread5": 1,
"Thread6": 1,
"Thread7": 1
} ]
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T05:01:03.887

你没有初始化你的数组。

尝试：

```
int[] startApps;
startApps = int[10]; // or however big it needs to be 
```

或者做一个步骤：

```
int[] startApps = int[10]; 
```

# android - 如何在android上将谷歌地图图层作为片段布局移动

> ID：15170875
> 
> 赞同：-1
> 
> 时间：2013-03-02T04:54:31.603
> 
> 标签：android, google-maps, draw

美好的一天，我们正在开发一个需要包含谷歌地图的安卓应用程序。对于布局，我们按照以下链接上的说明进行操作。即，我们应用程序的菜单会滑动（不会重叠，而是会“推动”地图）。

[侧边栏，如 facebook](https://stackoverflow.com/questions/8453320/android-sidebar-like-facebook-or-firefox/12103063#12103063)

地图移动，但似乎有些图层仍然存在，例如放大/缩小按钮。我们的菜单显示不正确。

另一方面，截取假定错误的屏幕截图，提供所需的显示。但为了描述错误，地图下方的区域是一个黑色区域，其中一些绿色点占据了 zoomin zoomout 的旧位置和我们的切换按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T05:39:43.517

我也遇到了这个奇怪的问题。通过在地图视图片段上应用透明视图来修复它似乎解决了这个问题。它是一种黑客。看看它是否适合你

```
<RelativeLayout
            android:id="@+id/relativeLayout1"
            android:layout_width="match_parent"
            android:layout_height="300dp" >

            <fragment
                android:id="@+id/map"
                android:name="com.google.android.gms.maps.MapFragment"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"/>

            <View
                android:id="@+id/imageView123"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
               android:background="@android:color/transparent" />         
    </RelativeLayout> 
```

# php - PHP：显示变量值而不是变量名而不连接

> ID：15170876
> 
> 赞同：-1
> 
> 时间：2013-03-02T04:54:38.443
> 
> 标签：php

我试图在字符串中获取/显示**$buttonName的值**

**$buttonName**默认初始化为 Null 并在之后进行一些处理，但即使**$buttonName**被分配了一个字符串值，该值也不会显示。例如

```
$buttonName = "Connect"

echo "Button value is $buttonName";` *//shows '$buttonName' and not "Connect" or whatever value I assigned to it* 
```

连接来自 php 变量的字符串虽然可以，但我想知道要配置什么来实现这一点，或者这可能吗？（我知道这是可能的，因为文档告诉我们，但看不到如何在不连接的情况下显示变量值）。

**添加：**

我发现的另一个奇怪的事情是，即使我没有分配任何值（Null），变量名仍然显示（$buttonName）并且没有出现任何错误。我用wamp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:51:47.370

@Raf，您的 ADDED 部分添加了我们不知道的任何内容。它只是确认没有发生变量插值，这可能意味着您的代码是用单引号编写的，如下所示：

```
$buttonName = "Connect";
echo 'Button value is $buttonName'; // note the SINGLE(!!) quotes around the string! 
```

如果确实如此，请将单引号更改为双引号，然后重试：

```
$buttonName = "Connect";
echo "Button value is $buttonName"; // double quotes! interpolation! yeah! 
```

如果您仍有疑问，请打开 php 控制台 (php -a)，然后粘贴 2 个片段以查看差异。

如果您不使用单引号，如果您需要帮助，则需要向我们提供更多代码。

# php - ELSE 语句表现滑稽

> ID：15170878
> 
> 赞同：0
> 
> 时间：2013-03-02T04:54:42.560
> 
> 标签：php

我遇到了一行代码的问题。我的老师甚至没有看到这个问题，而我已经为此奋斗了将近一个半星期。任何帮助将不胜感激。

编码：

```
{
  if (count($_POST['CINS']) > 0)
  {
    echo "<h2>Your CINS picks are:</h2>\n";
    echo "<ul>\n"; 
    foreach ($_POST['CINS'] as $element)
    {
      echo "\t<li>$element</li>\n";
    } // end of FOREACH statement
    echo "</ul>\n";
  } // end of IF count CINS

  if (count($_POST['CINT']) > 0 ) 
  {
    echo "<h2>Your CINT picks are:</h2>\n";
    echo "<ul>\n"; 
    foreach ($_POST['CINT'] as $element2)
    {
      echo "\t<li>$element2</li>\n";
    } // End of FOREACH CINT
    echo "</ul>\n";
  } // End of IF for CINT
  else
  {
    echo "CINT = " . count($_POST['CINT']) . " CINS = " . count($_POST['CINS']) . "<br />\n";
    echo __LINE__;
    if ((count($_POST['CINT'] == 0)) and (count($_POST['CINS'] == 0)))  // This is where the problem lies. It's showing up the echo statements even when CINS has a count of 1\. but if CINT has a count of 1, the echo statements do not show up. 
    {
      echo "<h2>No classes</h2>\n";
      echo "<p>You need to pick a class from BOTH CINT and CINS to be a well rounded student.</p>\n";
      echo "CINT = " . count($_POST['CINT']) . " CINS = " . count($_POST['CINS']) . "<br />\n";
    }
  } // END ELSE COUNT CINS
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T04:59:07.097

错位的括号

```
if ((count($_POST['CINT'] == 0)) and (count($_POST['CINS'] == 0))) -> wrong

if ((count($_POST['CINT']) == 0) and (count($_POST['CINS']) == 0)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T05:08:42.647

您不需要所有这些括号：

```
if(
    count($_POST['CINT']) == 0 AND
    count($_POST['CINS']) == 0
    ) 
```

看看一些缩进如何走很长的路：

```
{
    if (count($_POST['CINS']) > 0) {
        echo "<h2>Your CINS picks are:</h2>\n";
        echo "<ul>\n"; 
        foreach ($_POST['CINS'] as $element) {
            echo "\t<li>$element</li>\n";
        }

        echo "</ul>\n";
    }

    if (count($_POST['CINT']) > 0 ) {
        echo "<h2>Your CINT picks are:</h2>\n";
        echo "<ul>\n"; 
        foreach ($_POST['CINT'] as $element2) {
            echo "\t<li>$element2</li>\n";
        }

        echo "</ul>\n";
    }
else {
    echo "CINT = " . count($_POST['CINT']) . " CINS = " . count($_POST['CINS']) . "<br />\n";
    echo __LINE__;

    if(
        count($_POST['CINT']) == 0 AND
        count($_POST['CINS']) == 0
        ) {
        echo "<h2>No classes</h2>\n";
        echo "<p>You need to pick a class from BOTH CINT and CINS to be a well rounded student.</p>\n";
        echo "CINT = " . count($_POST['CINT']) . " CINS = " . count($_POST['CINS']) . "<br />\n";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T05:10:25.353

也许括号需要注意......

您的

```
if ((count($_POST['CINT'] == 0)) and (count($_POST['CINS'] == 0))) 
```

可能会更好

```
if ((count($_POST['CINT']) == 0) && (count($_POST['CINS']) == 0)) 
```

试一试 - 用结果回复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T05:03:52.733

我想，你想要这个：

```
if (count($_POST['CINS']) > 0)
{
    …
} // End of IF for CINS

if (count($_POST['CINT']) > 0 ) 
{
    …
} // End of IF for CINT

if (count($_POST['CINS']) == 0 || count($_POST['CINT']) == 0 ) 
{
    …
} 
```

# visual-studio - 通过 Visual Studio 中的内联汇编器从字符串中读取字符

> ID：15170879
> 
> 赞同：0
> 
> 时间：2013-03-02T04:54:43.567
> 
> 标签：visual-studio, assembly, x86

我在使用 Visual Studio 内联汇编程序时遇到问题，它似乎没有加载正确的值。我像这样声明一个 C 字符串：

```
const char* str = "1235"; 
```

然后我在 asm 中像这样访问字符串：

```
movzx ebx, byte ptr str[esi] 
```

问题是，不是将 49 加载到 ebx（'1' 的 ascii 代码）中，而是加载 0。由于大量调试，我确信 esi 是正确的索引。我加载字符串错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T22:07:51.953

该指令

```
movzx ebx, byte ptr str[esi] 
```

`esi`表示读取开始后的字节即字节`str`。它是汇编语言的等价物

```
ebx = *(unsigned char*)(&str) + esi); 
```

在您的情况下，`str`是一个指针变量，指针`str[0]`的低 8 位也是如此，`str[1]`是位 8-15，`str[2]`是位 16-23，`str[3]`是位 24-31。任何大于 3 的值都是缓冲区溢出，因为您正在读取不属于`str`.

您实际上想要将`str`变量加载到寄存器中，然后从该寄存器进行索引寻址。

```
mov ebx, str
movzx ebx, byte ptr [ebx+esi] 
```

在图片中：

```
 +----+
    1003 | 12 |
         +----+
    1002 | 34 |
         +----+
    1001 | 56 |
         +----+
str 1000 | 78 |
         +----+

             +----+
    1234567D | 00 |
             +----+
    1234567C | 45 |
             +----+
    1234567B | 44 |
             +----+
    1234567A | 43 |
             +----+
    12345679 | 42 |
             +----+
    12345678 | 41 |
             +----+ 
```

您正在尝试读取 byte `str+esi`，它读取变量的一部分`str`。如果`esi`大于 3，则您正在阅读超过`str`.

你真正想做的是阅读`str`指向的东西。这意味着您需要加载`str`到寄存器中（我选择了`ebx`），然后添加`esi`到结果中，然后访问那里的字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T05:07:11.157

尝试：

```
movzx     ebx, byte ptr str[esi] 
```

# c++ - libmysqlclient.18.dylib 内存泄漏

> ID：15170881
> 
> 赞同：0
> 
> 时间：2013-03-02T04:54:58.130
> 
> 标签：c++, mysql, memory-leaks

`PROBLEM`: 内存泄漏的原因是什么？

`SITUATION`：我使用 C++ 和 MySQL 使用 MySQL C API 构建了一个简单的命令行程序

问题是，该程序有许多来自对象的“轻微”内存泄漏`malloc xx bytes"`，xx 范围从几个字节到 8 kb。所有泄漏链接到库`libmysqlclient.18.dylib`。

我已经`mysql_free_result()`从代码中删除了所有内容，看看这是否是问题所在，但它仍然是一样的。

我的 MySQL 代码主要由简单的代码组成，例如：

连接：

```
MYSQL *databaseConnection()
{
    // declarations
    MYSQL *connection = mysql_init(NULL);

    // connecting to database
    if(!mysql_real_connect(connection,SERVER,USER,PASSWORD,DATABASE,0,NULL,0))
    {
        std::cout << "Connection error: " << mysql_error(connection) << std::endl;
    }
    return connection;
} 
```

执行查询：

```
MYSQL_RES *getQuery(MYSQL *connection, std::string query)
{
    // send the query to the database
    if (mysql_query(connection, query.c_str()))
    {
        std::cout << "MySQL query error: " << mysql_error(connection);
        exit(1);
    }
    return mysql_store_result(connection);
} 
```

查询示例：

```
void resetTable(std::string table)
{
    MYSQL *connection = databaseConnection();
    MYSQL_RES *result;

    std::string query = "truncate table " + table;
    result = getQuery(connection, query);

    mysql_close(connection);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T04:57:57.570

首先：为每个查询打开一个新连接（就像你在做的那样`resetTable()`）是非常浪费的。您真正想要做的是在应用程序启动时打开单个连接，将其用于所有内容（可能通过将连接存储在全局中），并在完成后关闭它。

但是，要回答您的问题：完成后，您需要调用[`mysql_free_result()`](http://dev.mysql.com/doc/refman/5.5/en/mysql-free-result.html)结果集。

# php - 使用PHP在不同目录中执行shell脚本

> ID：15170887
> 
> 赞同：0
> 
> 时间：2013-03-02T04:55:32.823
> 
> 标签：php, shell-exec, ubuntu-server

我在`/home/`目录中有一个 shell 脚本。我想通过使用网页来执行它。网络服务器位于`/var/www/.`我想知道如何使用 PHP 从主页内执行 shell 脚本？

我正在使用 Ubuntu 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T04:58:58.080

使用[php 执行功能：](http://php.net/manual/en/function.exec.php)

```
exec('/path/to/shell/script'); 
```

但是，这只有在 safe_mode 被禁用、php 对此类文件夹和文件具有权限或在您的 basedir 中定义时才有效。

# mysql - 在mysql中选择唯一的行标识符进行更新

> ID：15170890
> 
> 赞同：1
> 
> 时间：2013-03-02T04:55:49.233
> 
> 标签：mysql

在 infomix 我见过这样的查询

```
select rowid from table where condition 
```

并且对于更新，他们使用相同的行 ID

```
update table set field="val" where rowid=rowid 
```

mysql数据库中是否有类似的东西

do`uuid`函数在 mysql 中做同样的事情。

实际上我的问题是，表中没有主键，所以在将 infomix 查询移植到 mysql 时，我需要考虑 where 条件中的所有字段。如果有替代解决方案，请提供帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T03:48:56.640

为什么不...

```
select  rowid  from  table  where  condition
                                      |
                                      V
update table set field="val" where condition 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T05:35:58.780

如果要将查询从 informix 移植到 mysql，为什么不修改表以包含主键？

您甚至可以命名 PK`rowid`以维护 informix 和 mysql 查询之间的可移植性。

```
ALTER TABLE table
ADD rowid MEDIUMINT NOT NULL AUTO_INCREMENT KEY 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T05:46:12.853

```
you can use same condition for both query which you pass on first query, it returns you unique row.. 
```

试试这个

```
select  rowid  from  table  where  condition 
```

并且对于更新使用与上述相同的条件而不是`row id`

```
update table set field="val" where rowid=rowid 
```

# python - 来自多维列表的特定索引的新列表？

> ID：15170891
> 
> 赞同：0
> 
> 时间：2013-03-02T04:55:51.997
> 
> 标签：python, python-2.7

我基本上是在尝试从多维列表中提取一些数据到一个新列表中。虽然这段代码做了我想要的，但我想知道是否有更好的方法来获得这个结果而不循环原始列表？

```
aa = [
    ["a", "aa", "aaa"],
    ["b", "bb", "bbb"],
    ["c", "cc", "ccc"],
]
b = []
for a in aa:
    b.append(a[1])
b
>> Result: ['aaa', 'bbb', 'ccc'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T04:59:57.847

```
>>> aa = [["a", "aa", "aaa"],
          ["b", "bb", "bbb"],
          ["c", "cc", "ccc"]]
>>> b = zip(*aa)[2]
>>> print b
['aaa', 'bbb', 'ccc'] 
```

我很确定`zip`仍然会遍历列表，但这是获得所需结果的更简洁的方法。

请注意，在 Python 3 中，`zip`返回一个迭代器，因此您需要先转换为列表

```
list(zip(*aa))[2] 
```

或使用列表理解

```
[i[2] for i in aa] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T04:59:35.233

这是列表推导的一种方式：

```
>>> aa = [
["a", "aa", "aaa"],
["b", "bb", "bbb"],
["c", "cc", "ccc"],
]
>>> b = [i[2] for i in aa]
>>> print b
['aaa', 'bbb', 'ccc'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T04:58:41.513

你可以使用列表理解：

```
b = [aa[i][2] for i in range(len(aa))] 
```

或者像搅拌机建议的那样更快更短

```
b = [a[2] for a in aa] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T05:02:29.843

你也可以用 Numpy 来做：

```
>>> >>> a = numpy.array([
...     ["a", "aa", "aaa"],
...     ["b", "bb", "bbb"],
...     ["c", "cc", "ccc"],
... ])
>>> a[:,2]
    array(['aaa', 'bbb', 'ccc'], 
      dtype='|S3') 
```

# android - Webview不在对话框中水平滚动

> ID：15170893
> 
> 赞同：1
> 
> 时间：2013-03-02T04:56:10.950
> 
> 标签：android, dialog, horizontal-scrolling

我正在对话框中加载 webview，但它不是水平滚动。以下是我的代码。

```
@Override
    protected void onCreate(Bundle arg0) {
        // TODO Auto-generated method stub
        super.onCreate(arg0);
        TwitterDialog fb = new TwitterDialog(this);
        fb.abc();

    }

 class TwitterDialog extends Dialog {
    Context context;
    String url = "https://www.facebook.com";

    public TwitterDialog(Context context) {
        super(context);
        this.context = context;
    }

    void abc() {
        LinearLayout mContent = new LinearLayout(context);
        mContent.setOrientation(LinearLayout.VERTICAL);
        final float scale = context.getResources().getDisplayMetrics().density;
        float[] dimensions = new float[] { 400.0f, 500.0f };

        addContentView(mContent, new FrameLayout.LayoutParams(
                (int) (dimensions[0] * scale + 0.5f), (int) (dimensions[1]
                        * scale + 0.5f)));

        FrameLayout.LayoutParams FILL = new FrameLayout.LayoutParams(
                ViewGroup.LayoutParams.FILL_PARENT,
                ViewGroup.LayoutParams.FILL_PARENT);

        ScrollView _scroll = new ScrollView(MyMainActivity.this);
        _scroll.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.FILL_PARENT));

        WebView mWebView = new WebView(context);

        mWebView.setWebViewClient(new WebClicent());
        mWebView.setScrollbarFadingEnabled(false);
        mWebView.setHorizontalScrollBarEnabled(true);
        mWebView.setWebViewClient(new MyWebViewClient());
        mWebView.getSettings().setUseWideViewPort(true);

        mWebView.loadUrl(url);
        mWebView.setLayoutParams(FILL);
        // _scroll.addView(mWebView);
        mContent.addView(mWebView);

        TwitterDialog.this.show();

    }

}

     private class MyWebViewClient extends WebViewClient {

    @Override
    // show the web page in webview but not in web browser
    public boolean shouldOverrideUrlLoading(WebView view, String url) {

        view.loadUrl(url);
        return true;
        }
} 
```

我得到以下输出。但它不是水平滚动。

![输出](../Images/4a282241078887fd4a1844ff3ae82396.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T04:58:46.220

从代码中删除尺寸参数，并让它成为 fill_parent ，这样它也会水平滚动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T05:02:38.957

嘿将此代码添加到您的网络视图

```
 WebView mWebView = new WebView(context);

       mWebView.setWebViewClient(new WebClicent());
       mWebView.setScrollbarFadingEnabled(false);
       mWebView.setHorizontalScrollBarEnabled(true);
       mWebView.setWebViewClient(new MyWebViewClient());
       mWebView.getSettings().setUseWideViewPort(true); 
```

这是额外的代码，请将其添加到上面的代码中并检查一次

```
 mWebView.getSettings().setBuiltInZoomControls(false);
    mWebView.getSettings().setLoadWithOverviewMode(false);
    mWebView.getSettings().setUseWideViewPort(false);
    mWebView.getSettings().setDefaultZoom(WebSettings.ZoomDensity.CLOSE); 
```

# php - 将本地存储的文件移动到亚马逊 S3

> ID：15170895
> 
> 赞同：3
> 
> 时间：2013-03-02T04:56:43.650
> 
> 标签：php, amazon-web-services, amazon-s3, amazon

我有一个脚本（PHP），用于存储用户上传到我的服务器的图像。上传后（涉及一些处理），我想将该处理后的文件移动到 S3。

为了清楚起见，这是我想要实现的目标：

1.  让用户上传文件到我的服务器
2.  处理图像（调整大小等）
3.  **使用特定动态生成的名称将处理后的图像移动到我的 S3 存储桶，例如。123876542234.jpg**
4.  取出我的 S3 存储桶中可公开访问的文件的地址

我没有使用 S3 的经验，但对 PHP 有很强的掌握。我尝试了一些教程，但没有一个有效。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T05:11:56.483

如果您下载 SDK [http://aws.amazon.com/sdkforphp/](http://aws.amazon.com/sdkforphp/)，他们会提供一些示例，其中之一是关于 S3 的。它包括如何使用 PHP 将文件上传到 S3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T23:01:02.813

确保获得更新的版本 2。它具有更快、更可靠的 HTTP 层，并使用现代概念，例如迭代器和观察器。

这是一些特定于 S3 的文档。[https://github.com/aws/aws-sdk-php/blob/master/docs/service-s3.rst](https://github.com/aws/aws-sdk-php/blob/master/docs/service-s3.rst)。这是所有其他文档。[http://aws.amazon.com/documentation/sdkforphp2/](http://aws.amazon.com/documentation/sdkforphp2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T05:08:13.640

凭借对 PHP 的深入了解，我会直接使用 AWS PHP SDK，其中包含使用 SDK 的 API 将给定文件发送到 S3 所需的所有文档：http: [//aws.amazon.com/sdkforphp/](http://aws.amazon.com/sdkforphp/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T11:57:41.133

对于使用 S3 上传，请查看此类似主题[File upload to Amazon S3 from PHP](https://stackoverflow.com/questions/5405834/file-upload-to-amazon-s3-from-php)

和这个帖子

[http://www.9lessons.info/2012/08/upload-files-to-amazon-s3-php.html](http://www.9lessons.info/2012/08/upload-files-to-amazon-s3-php.html) [http://net.tutsplus.com/tutorials/php/how-to-use-amazon-s3 -php-to-dynamically-store-and-manage-files-with-ease/](http://net.tutsplus.com/tutorials/php/how-to-use-amazon-s3-php-to-dynamically-store-and-manage-files-with-ease/)

亚马逊不会向您收取用于上传的带宽，但您可能会浪费服务器处理时间和客户端的带宽。

我建议您使用 plupload，它是免费的，如果您愿意，它可以在客户端进行所有图像处理。

[http://www.plupload.com/](http://www.plupload.com/)

高温高压

# c - C：对包含用户输入元素的整数数组进行排序时出现问题

> ID：15170896
> 
> 赞同：0
> 
> 时间：2013-03-02T04:57:06.677
> 
> 标签：c, arrays, sorting, integer

我正在处理以下作业问题：

构建一个程序，使用一维数组来存储用户输入的 10 个数字。输入数字后，用户应该会看到一个菜单，其中包含两个选项，可以按升序或降序对 10 个数字进行排序和打印。

我遇到了一些令人费解的问题。

我的代码发布在下面。我已经设法接受数组元素的用户输入，并且在这里找到了用于对整数数组进行排序的代码：[http ://www.java-samples.com/showtutorial.php?tutorialid=1577](http://www.java-samples.com/showtutorial.php?tutorialid=1577)

该教程中的代码工作得很好，但是只要我为数组中的用户指定元素添加代码而不是自己初始化数组，我就会遇到分段错误：运行程序时出现核心转储错误。它会一直工作，直到它遇到排序程序，然后崩溃。在 gcc 中编译时没有错误。

```
#include<stdio.h>
#include<stdbool.h>

main()
{
    int temporaryStorage;
    int counter;
    int numArray[] = {0};
    int i = 0;
    bool sortExists = true;

    for (i = 0; i < 10; ++i)
    {
        fprintf(stdout, "Enter element[%d]->", i);
        fscanf(stdin, "%d", &numArray[i]);
    }

    printf("Array Before Sorting\n");
    for(counter = 0; counter < 10; ++counter){
        printf("%d ", numArray[counter]);
    }

    while (sortExists == true)
    {
        sortExists = false;
        for (counter = 0; counter < 9; ++counter)
        {
            if (numArray[counter] > numArray[counter + 1])
            {
                temporaryStorage = numArray[counter];
                numArray[counter] = numArray[counter + 1];
                numArray[counter + 1] = temporaryStorage;
                sortExists = true;
            }
        }
    }

    printf("\n\nArray After Sorting – Ascending Order\n");
    for(counter = 0; counter < 10; ++counter){
        printf("%d ", numArray[counter]);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T05:02:34.223

```
int numArray[] = {0}; 
```

数组在 C 中不是动态调整大小的。由于右手边基本上是一个`int[1]`数组，因此您的数组只有一个长度`1`（长度是从右手边推导出来的）。您需要指定尺寸：

```
int numArray[10] = {0}; 
```

（进一步的段错误提示：段错误几乎总是与分配不足、超出范围的访问或悬空指针有关）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T17:23:37.397

我已经更正了您的代码并且工作正常。

```
#include<stdio.h>
#include<stdbool.h>

int main()
 {
  int temporaryStorage;
  int counter;
  int numArray[10];
  int i = 0;
  bool sortExists = true;

for (i = 0; i < 10; ++i)
{
    fprintf(stdout, "Enter element[%d]->", i);
    fscanf(stdin, "%d", &numArray[i]);
}

printf("Array Before Sorting\n");
for(counter = 0; counter < 10; ++counter){
    printf("%d ", numArray[counter]);
}

while (sortExists == true)
{
    sortExists = false;
    for (counter = 0; counter < 9; ++counter)
    {
        if (numArray[counter] > numArray[counter + 1])
        {
            temporaryStorage = numArray[counter];
            numArray[counter] = numArray[counter + 1];
            numArray[counter + 1] = temporaryStorage;
            sortExists = true;
        }
    }
}

printf("\n\nArray After Sorting – Ascending Order\n");
for(counter = 0; counter < 10; ++counter){
    printf("%d ", numArray[counter]);
}
return 0;
} 
```

# c++ - 使用 TCP 套接字 (WIN32 API) 创建的两个窗口之间的通信

> ID：15170898
> 
> 赞同：2
> 
> 时间：2013-03-02T04:57:28.407
> 
> 标签：c++, windows, sockets, tcp, winsock

我想使用 WINAPI 创建两个窗口，然后我想使用 TCP scoket 在它们之间进行通信。到目前为止，我已经成功创建了两个窗口，并且也成功打开了套接字。但是两个窗口将如何使用这个套接字进行通信？这是我到目前为止写的代码：

另一个问题是代码仅从服务器向客户端发送一次数据。除非数据从服务器向客户端发送一次，否则不会处理其他 Windows 消息:( 请有人帮助我？`enter code here`***服务器窗口：***

```
// Program Name: server_window
// ===============================
// Author Name: Ayesha Hassan
// ===============================
// The Program creates a Listening Socket and waits for the client.
// As soon as a Client is connected to this Server's Listening Socket, a Window is launched.      
// When the user Clicks on this window using Mouse, a Message is sent to the Client over the Connected Socket. 

#include <windows.h>
#include <iostream.h>
#include "stdafx.h"
#include <winsock2.h>
#include <stdio.h>
#include <tchar.h>
#include "resource.h"
#pragma comment(lib,"ws2_32.lib")

SOCKET AH_GlbSocket;

const char AH_GlbClassName[] = "myWindClass";   ///Window Class Name
HWND AH_Glb_hwnd;   //Header to Window

LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, 
            WPARAM wParam, LPARAM lParam)
{
char message[]="Mouse Clicked On SERVER Window";
HDC hdc;

//Gets Handle for the Window 
hdc=GetDC(hwnd);

char buffer[1000];
memset(buffer,0,999);

   switch(msg)
      {

      case WM_LBUTTONDOWN:
      //Sends Text to be displayed oon Client Window
         send(AH_GlbSocket, message, strlen(message), 0);
         break;

      case WM_CREATE:
          {
             WSADATA WsaDat;
             if(WSAStartup(MAKEWORD(2,2), &WsaDat)!=0)
                {
                   //printf("WSA Initialization failed!\r\n");
                   WSACleanup();
                   system("PAUSE");
                   return 0;
                }

                AH_GlbSocket=socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
                if(AH_GlbSocket == INVALID_SOCKET)
                   {
                      //printf("AH_GlbSocket creation failed.\r\n");
                      WSACleanup();
                      system("PAUSE");
                      return 0;
                   }
                //else
                   //printf("Socket created.\n");

                SOCKADDR_IN serverInf;
                serverInf.sin_family = AF_INET;
                serverInf.sin_addr.s_addr = INADDR_ANY;
                serverInf.sin_port = htons(8888);

                if(bind(AH_GlbSocket,(SOCKADDR*)(&serverInf), sizeof(serverInf)) == SOCKET_ERROR)
                   {
                      //printf("Unable to bind AH_GlbSocket!\r\n");
                      WSACleanup();
                      system("PAUSE");
                      return 0;
                   }

                listen(AH_GlbSocket, 1);
                SOCKET TempSock = SOCKET_ERROR;

                while(TempSock == SOCKET_ERROR)
                {
                   //printf("Waiting for incoming connections...\n\n");
                  TempSock = accept(AH_GlbSocket, NULL, NULL);
                }
                AH_GlbSocket = TempSock;

         }
         break;
      case WM_CLOSE:
         DestroyWindow(hwnd);
         break;

      case WM_DESTROY:
         PostQuitMessage(0);
         break;

      default:
         return DefWindowProc(hwnd, msg, wParam, lParam);
      }
    return 0;
}

int WINAPI WinMain(  HINSTANCE hInstance, 
  HINSTANCE hPrevInstance, 
  LPSTR lpCmdLine, 
  int nShowCmd )
{

   WNDCLASSEX wc;
   MSG Msg;

   //Step 1: Registering the Window Class
   wc.cbSize        = sizeof(WNDCLASSEX);
   wc.style         = 0;
   wc.lpfnWndProc   = WndProc;
   wc.cbClsExtra    = 0;
   wc.cbWndExtra    = 0;
   wc.hInstance     = NULL;
   wc.hIcon         = LoadIcon(NULL, IDI_APPLICATION);
   wc.hCursor       = LoadCursor(NULL, IDC_ARROW);
   wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
   wc.lpszMenuName  = NULL;
   wc.lpszClassName = AH_GlbClassName;
   wc.hIconSm       = LoadIcon(NULL, IDI_APPLICATION);  
   //wc.lpszMenuName  = MAKEINTRESOURCE(IDR_MYMENU);
   //wc.hIcon  = LoadIcon(GetModuleHandle(NULL), MAKEINTRESOURCE(IDI_MYICON));
   //wc.hIconSm  = (HICON)LoadImage(GetModuleHandle(NULL), MAKEINTRESOURCE(IDI_MYICON), IMAGE_ICON, 26, 26, 0);

   if(!RegisterClassEx(&wc))
   {
      MessageBox(NULL, "Window Registration Failed!", "Error!",
                  MB_ICONEXCLAMATION | MB_OK);
      return 0;
   }

   // Step 2: Creating Window1
   AH_Glb_hwnd = CreateWindowEx( WS_EX_CLIENTEDGE,
                                 AH_GlbClassName,
                                 "I am SERVER Window",
                                 WS_OVERLAPPEDWINDOW,
                                10,30, 540, 220,
                                 NULL, NULL, NULL, NULL);
   if(AH_Glb_hwnd == NULL)
   {
      MessageBox(NULL, "Window Creation Failed!", "Error!",
                 MB_ICONEXCLAMATION | MB_OK);
      return 0;
   }

   ShowWindow(AH_Glb_hwnd,SW_SHOWDEFAULT);
   UpdateWindow(AH_Glb_hwnd);

   // Step 3: The Message Loop
   while(GetMessage(&Msg, NULL, 0, 0) > 0)
   {
      TranslateMessage(&Msg);
      DispatchMessage(&Msg);
   }
   return Msg.wParam; 

}

***CLIENT WINDOW:***
#include <windows.h>
#include "stdafx.h"
//#include <iostream.h>
#include <winsock2.h>
#include <stdio.h>
#include "resource.h"
#pragma comment(lib,"ws2_32.lib")

SOCKET AH_Glb_Socket;

const char AH_Glb_ClassName[] = "myWindClass";
HWND AH_Glb_hwnd;

// Step 4: the Window Procedure
LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{

    switch(msg)
    {

        case WM_CLOSE:
            DestroyWindow(hwnd);
        break;
        case WM_DESTROY:
            PostQuitMessage(0);
        break;
        default:
            return DefWindowProc(hwnd, msg, wParam, lParam);

    }
    return 0;
}

int WINAPI WinMain(  HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd )
{
    // Initialise Winsock
    WSADATA WsaDat;  

    if(WSAStartup(MAKEWORD(2,2),&WsaDat)!=0)
    {
        printf("Winsock error - Winsock initialization failed");
        WSACleanup();
        system("PAUSE");
        return 0;
    }
    char* buff="CLIENT says: I am Going to connect to the server now\n\n";
    printf(buff,sizeof(buff));
    // Create our socket
    SOCKET Socket=socket(AF_INET,SOCK_STREAM,IPPROTO_TCP);
    if(Socket==INVALID_SOCKET)
    {
        printf("Winsock error - Socket creation Failed!\r\n");
        WSACleanup();
        system("PAUSE");
        return 0;
    }

    // Resolve IP address for hostname
    struct hostent *host;
    if((host=gethostbyname("localhost"))==NULL)
    {
        printf("Failed to resolve hostname.\r\n");
        WSACleanup();
        system("PAUSE");
        return 0;
    }

    // Setup our socket address structure
    SOCKADDR_IN SockAddr;
    SockAddr.sin_port=htons(8888);
    SockAddr.sin_family=AF_INET;
    SockAddr.sin_addr.s_addr=*((unsigned long*)host->h_addr);

    // Attempt to connect to server
    if(connect(Socket,(SOCKADDR*)(&SockAddr),sizeof(SockAddr))!=0)
    {
        printf("Failed to establish connection with server\r\n");
        WSACleanup();
        //system("PAUSE");
        //return 0;
    }

    WNDCLASSEX wc;

    MSG Msg;

    //Step 1: Registering the Window Class
    wc.cbSize        = sizeof(WNDCLASSEX);
    wc.style         = 0;
    wc.lpfnWndProc   = WndProc;
    wc.cbClsExtra    = 0;
    wc.cbWndExtra    = 0;
    wc.hInstance     = NULL;
    wc.hIcon         = LoadIcon(NULL, IDI_APPLICATION);
    wc.hCursor       = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    wc.lpszMenuName  = NULL;
    wc.lpszClassName = AH_Glb_ClassName;
    wc.hIconSm       = LoadIcon(NULL, IDI_APPLICATION);

    //wc.lpszMenuName  = MAKEINTRESOURCE(IDR_MYMENU);
    //wc.hIcon  = LoadIcon(GetModuleHandle(NULL), MAKEINTRESOURCE(IDI_MYICON));
    //wc.hIconSm  = (HICON)LoadImage(GetModuleHandle(NULL), MAKEINTRESOURCE(IDI_MYICON), IMAGE_ICON, 26, 26, 0);

    if(!RegisterClassEx(&wc))
    {
        MessageBox(NULL, "Window Registration Failed!", "Error!",
            MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

    // Step 2: Creating Window1
    AH_Glb_hwnd = CreateWindowEx(
        WS_EX_CLIENTEDGE,
        AH_Glb_ClassName,
        "I am CLIENT Window",
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT, CW_USEDEFAULT, 440, 120,
        NULL, NULL, NULL, NULL);

    if(AH_Glb_hwnd == NULL)
    {
        MessageBox(NULL, "Window Creation Failed!", "Error!",
            MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

    ShowWindow(AH_Glb_hwnd,SW_SHOWDEFAULT);
    UpdateWindow(AH_Glb_hwnd);

    char buffer[1000];
    memset(buffer,0,999);

        recv(Socket,buffer,1000,0);
        printf(buffer,sizeof(buffer));
        TextOut(GetDC(AH_Glb_hwnd),5,5,buffer,sizeof(buffer));

    // Step 3: The Message Loop
    while(GetMessage(&Msg, NULL, 0, 0) > 0)
    {   
        TranslateMessage(&Msg);
        DispatchMessage(&Msg);
    }
    return Msg.wParam;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T06:36:44.890

尝试使用 WSAAsyncSelect 建立基于消息的连接；这样您就可以在程序运行时继续发送/接收消息。

有关 WSAAsyncSelect 功能的更多信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms741540%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741540%28v=vs.85%29.aspx)

在 codeproject.com 上还有一个关于使用 WIN32 API + winsock 的优秀教程：http: [//www.codeproject.com/Articles/13071/Programming-Windows-TCP-Sockets-in-C-for-the-Begin](http://www.codeproject.com/Articles/13071/Programming-Windows-TCP-Sockets-in-C-for-the-Begin)

如果您遵循教程，包括注册窗口消息，您应该能够多次从服务器向客户端发送数据，反之亦然，直到套接字关闭。

我希望这会有所帮助。

马斯

# c# - 在 RichTextBox 中键入单词时会出现隐藏的列表框

> ID：15170903
> 
> 赞同：0
> 
> 时间：2013-03-02T04:58:15.197
> 
> 标签：c#, winforms, autocomplete

我正在使用 texteditor，我想知道如何实现自动完成功能。

我在单独的类中有这个字符串集合（KeyWord.cs）

```
public String[] keywords = { "abstract", "as", "etc." };
public String[] events = { "AcceptRejectRule", "AccessibleEvents", "etc.2" }; 
```

我已经在位于我的主窗体的 ListBox (lb) 中输入了字符串，这些字符串已经排序：

```
lb = new ListBox();
Controls.Add(lb);
//lb.Visible = false;

KeyWord keywordsL = new KeyWord();
KeyWord eventsL = new KeyWord();
foreach (string str in keywordsL.keywords)
{
    lb.Items.Add(str);
}
foreach (string str in eventsL.events)
{
    lb.Items.Add(str);
} 
```

以及作为编辑器的 RichTextBox（也带有高亮选项）声明为 rtb。

现在我担心的是，当我在 RichTextBox(rtb) 中输入字母“A”时，如何让它像它的“上下文提示”一样，隐藏的列表框将出现在鼠标指针所在的位置，然后是所有“A”在列表框中列出的字符串的开头将出现。最后，当我从列表框中选择显示的字符串时，该字符串将被添加到 RichTextBox 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:11:01.417

实现这一点的简单方法是执行以下操作：

```
private List<string> autoCompleteList = new List<string>();

public Form1()
{
    autoCompleteList.Add("Items for the autocomplete");
}
...

private void textBox1_TextChanged(object sender, System.EventArgs e)
{
    listBox1.Items.Clear();
    if (textBox1.Text.Length == 0)
    {
        hideAutoCompleteMenu();
        return;
    }

    Point cursorPt = Cursor.Position;
    listBox1.Location = PointToClient(cursorPt);

    foreach (String s in autoCompleteList)
    {
        if (s.StartsWith(textBox1.Text))
        {
            listBox1.Items.Add(s);
            listBox1.Visible = true;
        }

    }
 }

private void hideAutoCompleteMenu()
{
    listBox1.Visible = false;
}

private void listBox1_SelectedIndexChanged(object sender, System.EventArgs e)
{
    textBox1.Text = listBox1.Items[listBox1.SelectedIndex].ToString();
    hideAutoCompleteMenu();
} 
```

但是，在实现此功能时，您必须考虑所有可能的极端情况，例如，

*   如果用户在输入内容时按 ESC/Enter 会发生什么？
*   如果用户失去对富文本框的关注会发生什么？
*   在列表框打开时如何处理向上和向下箭头键？
*   在列表框中搜索大量项目时的性能问题？

虽然上面的一些问题只是处理额外事件的问题，但上面显示的代码是一种非常快速和肮脏的方式来实现你想要的东西，但实际上你所做的似乎是为已经可用的东西重新发明轮子。我建议您查看 AvalonEdit 和 FastColoredTextBox 中的源代码，看看它是如何真正完成的。

# c# - 是否可以使用 wp 7.5 中的 Microsoft.Phone.Task 库将图片发布到 facebook、twitter

> ID：15170911
> 
> 赞同：1
> 
> 时间：2013-03-02T04:59:10.693
> 
> 标签：c#, facebook, windows-phone-7, post, photo

我正在使用 ShareLinkTask 将 URL 发布到 twitter 和 facebook 等社交网站。除了 URL，我想添加一个图片 URI，图片应该显示在站点中。这可能吗？也可以在其他用户使用该应用程序时进行共享吗？因为只有一个帐户是同步的，并且总是在该帐户与手机同步的情况下发布到网站。我们可以在共享时再次登录，以便该人使用该应用程序可以发布到他的墙上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T17:17:38.430

**不会。**与通过基于服务的 SDK 获得的直接 API 层实现相比，任务的限制要多一些。它们始终绑定到与设备关联的帐户，您无法使用应用程序中的帐户登录/注销用户，除非用户自己决定切换帐户。

此外，此时您无法将媒体内容附加到 a `ShareLinkTask`，除非您已经通过服务（例如 IMGUR）上传了它并且只是发布了指向它的链接。

# c++ - 使用列表 STL 进行测试期间出现复制构造函数错误

> ID：15170912
> 
> 赞同：-1
> 
> 时间：2013-03-02T04:59:25.670
> 
> 标签：c++, copy-constructor

以下代码会发生运行时错误，这可能非常容易。你会纠正它吗？

该代码用于使用列表测试 STL 库。

问题看起来源于两个函数 Test::Test(const Test& t)
和 Test& Test::operator= (const Test& m)。

我只想运行它而不会出错。

如果您确切知道问题发生的原因，请告诉我原因。

// 标题

```
class Test
{
public:
    int t;
    char *name;

public:
    Test() {
        t = 1;
        name = new char [strlen("test")+1];
        strcpy(name, "ssss");
    }
    Test (int i) {
        t = i;
    }

    Test(const Test& t);              
    ~Test()
    { 
        delete [] name;
    }
    Test& operator= (const Test& m);

    char * get_name();
}; 
```

// 执行

```
Test::Test(const Test& t)
{
    this->t = t.t;
    this->name = new char[strlen(t.name)+1];
    strcpy(this->name, t.name);
}

Test& Test::operator= (const Test& m)
{
    if(this == &m) return *this;

    if(this->name != NULL) delete[] name;

    name = new char[strlen(m.name)+1];
    strcpy(this->name, m.name);

    this->t = m.t;

    return *this;
}

char * Test::get_name()
{
    return name;
} 
```

// 主功能

```
int main(int argc, const char * argv[])
{   
    Test a;
    Test b(3);
    Test c(4);

    list <Test> t_list;
    t_list.push_back(a);
    t_list.push_back(b);
    t_list.push_back(c);

    list <Test>::iterator iter_begin = t_list.begin();
    list <Test>::iterator iter_end = t_list.end();

    for(; iter_begin != iter_end; iter_begin++)
    {
        printf("%d\n", iter_begin->t);
        printf("%s\n", iter_begin->get_name());
    }

    list <Test> t_list2;
    t_list2.push_back(c);
    t_list2.push_back(b);
    t_list2.push_back(a);

    iter_begin = t_list2.begin();
    iter_end = t_list2.end();

    for(; iter_begin != iter_end; iter_begin++)
    {
        printf("%d\n", iter_begin->t);
        printf("%s\n", iter_begin->get_name());
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T05:09:39.510

您的`Test(int)`构造函数没有初始化`name`。这会导致所有其他问题。（快速运行`valgrind`会告诉你这一点。）

# objective-c - 绘图功能不适用于参数

> ID：15170917
> 
> 赞同：0
> 
> 时间：2013-03-02T04:59:57.330
> 
> 标签：objective-c, cocos2d-iphone

每当我尝试将参数传递给我的绘图函数时，它都不起作用。

```
- (void)drawxy:(CGPoint)startxy //doesnt work
{
    glLineWidth(6.0f);
    ccDrawLine( ccp(0, 0), ccp(150, 150) );
}
-(void)addEnemyAtX:(int)x y:(int)y dir:(int)direction
{
    CCSprite *enemy = [CCSprite spriteWithFile:@"enemy1.png"];
    enemy.position = ccp(x, y);
    enemy.rotation = [self findDirection:direction];
    [self addChild:enemy];
    [self drawxy:enemy.position];
    [enemies addObject:enemy];
} 
```

但是当我这样做时，它出于某种原因画了一条线。

```
- (void)drawxy //works
{
    glLineWidth(6.0f);
    ccDrawLine( ccp(0, 0), ccp(150, 150) );
}
-(void)addEnemyAtX:(int)x y:(int)y dir:(int)direction
{
    CCSprite *enemy = [CCSprite spriteWithFile:@"enemy1.png"];
    enemy.position = ccp(x, y);
    enemy.rotation = [self findDirection:direction];
    [self addChild:enemy];
    [self drawxy];
    [enemies addObject:enemy];
} 
```

我知道我没有把它`enemy.position`放到线点的结尾，我只是在测试它是否有效，但它没有。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:05:56.143

```
enemy.position=CGPointMake(cp.x, cp.y); 
```

并调用函数

```
[self drawxy:enemy.position]; 
```

# objective-c - 获取 FMDB 更新查询中受影响的行数

> ID：15170921
> 
> 赞同：4
> 
> 时间：2013-03-02T05:00:30.687
> 
> 标签：objective-c, database, sqlite, fmdb

我正在用 FMDB 更新我的表。我怎样才能获得更新的总行数。（实际上我有一个问题。我的更新查询返回“true”，即使我在该表中没有数据。）

提前致谢。:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T05:03:36.757

您正在寻找：

```
- (int)changes; 
```

像这样使用：

```
FMDatabase *db = [FMDatabase databaseWithPath:@"store.db"];
if ([db executeUpdate:@"UPDATE xy SET ..."]) {
    NSLog(@"Did change %d rows", [db changes]);
}
else {
    // handle error
} 
```

# jsf - 在首次部署 JSF 应用程序时提供持久性数据库设置

> ID：15170923
> 
> 赞同：0
> 
> 时间：2013-03-02T05:00:42.530
> 
> 标签：jsf, jakarta-ee, jpa, glassfish, persistence

我使用 Netbeans 和 GlassFish 开发了 JPA 的 JSF 应用程序。它在 Netbeans 环境中运行良好。现在我想将其部署为具有不同数据库设置的远程 GlassFish 服务器。有什么方法可以在第一次部署到服务器时给出数据库设置并保存设置后记？我有一个 persistence.xml 文件，但数据库设置在 glassfish-resources.xml 文件中。

持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
 <persistence-unit name="HOPU" transaction-type="JTA">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <jta-data-source>dsHiLap2</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
      <property name="eclipselink.ddl-generation" value="create-tables"/>
    </properties>
 </persistence-unit> 
```

glassfish-resources.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE resources PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Resource Definitions//EN" "http://glassfish.org/dtds/glassfish-resources_1_5.dtd">
<resources>
    <jdbc-resource enabled="true" jndi-name="jdbc/ho" object-type="user" pool-name="connectionPoolHo">
        <description/>
    </jdbc-resource>
    <jdbc-connection-pool allow-non-component-callers="false" associate-with-thread="false" connection-creation-retry-attempts="0" connection-creation-retry-interval-in-seconds="10" connection-leak-reclaim="false" connection-leak-timeout-in-seconds="0" connection-validation-method="auto-commit" datasource-classname="org.apache.derby.jdbc.ClientDataSource" fail-all-connections="false" idle-timeout-in-seconds="300" is-connection-validation-required="false" is-isolation-level-guaranteed="true" lazy-connection-association="false" lazy-connection-enlistment="false" match-connections="false" max-connection-usage-count="0" max-pool-size="32" max-wait-time-in-millis="60000" name="connectionPoolHo" non-transactional-connections="false" pool-resize-quantity="2" res-type="javax.sql.DataSource" statement-timeout-in-seconds="-1" steady-pool-size="8" validate-atmost-once-period-in-seconds="0" wrap-jdbc-objects="false">
        <property name="URL" value="jdbc:derby://localhost:1527/healthofice"/>
        <property name="serverName" value="localhost"/>
        <property name="PortNumber" value="1527"/>
        <property name="DatabaseName" value="healthofice"/>
        <property name="User" value="healthoffice"/>
        <property name="Password" value="health"/>
    </jdbc-connection-pool>
    <jdbc-resource enabled="true" jndi-name="dsDec2012" object-type="user" pool-name="connectionPoolHo"/>
    <jdbc-connection-pool allow-non-component-callers="false" associate-with-thread="false" connection-creation-retry-attempts="0" connection-creation-retry-interval-in-seconds="10" connection-leak-reclaim="false" connection-leak-timeout-in-seconds="0" connection-validation-method="auto-commit" datasource-classname="org.apache.derby.jdbc.ClientDataSource" fail-all-connections="false" idle-timeout-in-seconds="300" is-connection-validation-required="false" is-isolation-level-guaranteed="true" lazy-connection-association="false" lazy-connection-enlistment="false" match-connections="false" max-connection-usage-count="0" max-pool-size="32" max-wait-time-in-millis="60000" name="derby_net_ho_hoPool" non-transactional-connections="false" pool-resize-quantity="2" res-type="javax.sql.DataSource" statement-timeout-in-seconds="-1" steady-pool-size="8" validate-atmost-once-period-in-seconds="0" wrap-jdbc-objects="false">
        <property name="serverName" value="localhost"/>
        <property name="portNumber" value="1527"/>
        <property name="databaseName" value="ho"/>
        <property name="User" value="ho"/>
        <property name="Password" value="ho"/>
        <property name="URL" value="jdbc:derby://localhost:1527/ho"/>
        <property name="driverClass" value="org.apache.derby.jdbc.ClientDriver"/>
        </jdbc-connection-pool>
    <jdbc-resource enabled="true" jndi-name="dsHo" object-type="user" pool-name="derby_net_ho_hoPool"/>
    <jdbc-resource enabled="true" jndi-name="ds2013Feb" object-type="user" pool-name="connectionPoolHo"/>
    <jdbc-resource enabled="true" jndi-name="drHoBuddhikaDesktop1" object-type="user" pool-name="derby_net_ho_hoPool"/>
    <jdbc-resource enabled="true" jndi-name="drHoBuddhikaLaptop1" object-type="user" pool-name="connectionPoolHo"/>
    <jdbc-resource enabled="true" jndi-name="dsHiLap" object-type="user" pool-name="derby_net_ho_hoPool"/>
    <jdbc-connection-pool allow-non-component-callers="false" associate-with-thread="false" connection-creation-retry-attempts="0" connection-creation-retry-interval-in-seconds="10" connection-leak-reclaim="false" connection-leak-timeout-in-seconds="0" connection-validation-method="auto-commit" datasource-classname="org.apache.derby.jdbc.ClientDataSource" fail-all-connections="false" idle-timeout-in-seconds="300" is-connection-validation-required="false" is-isolation-level-guaranteed="true" lazy-connection-association="false" lazy-connection-enlistment="false" match-connections="false" max-connection-usage-count="0" max-pool-size="32" max-wait-time-in-millis="60000" name="derby_net_ho1_ho1Pool" non-transactional-connections="false" pool-resize-quantity="2" res-type="javax.sql.DataSource" statement-timeout-in-seconds="-1" steady-pool-size="8" validate-atmost-once-period-in-seconds="0" wrap-jdbc-objects="false">
        <property name="serverName" value="localhost"/>
        <property name="portNumber" value="1527"/>
        <property name="databaseName" value="ho1"/>
        <property name="User" value="ho1"/>
        <property name="Password" value="ho1"/>
        <property name="URL" value="jdbc:derby://localhost:1527/ho1"/>
        <property name="driverClass" value="org.apache.derby.jdbc.ClientDriver"/>
</jdbc-connection-pool>
    <jdbc-resource enabled="true" jndi-name="dsHiLap2" object-type="user" pool-name="derby_net_ho1_ho1Pool"/>
</resources> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T06:19:16.727

您需要使用 GlassFish 部署计划为远程 GlassFish 服务器配置不同的连接池设置，因为 glassfish-resources.xml 定义了应用程序范围的资源。应用程序范围的连接池仅在应用程序部署期间创建。请参阅[使用部署计划部署应用程序或模块](http://docs.oracle.com/cd/E18930_01/html/821-2417/gilfm.html#gijyb)。基本上，您在 deploymentplan.jar 中提供 glassfish-resources.xml 的远程服务器版本（遵循 module-name.gf-dd-name 命名约定）。

另一种选择是不使用应用程序范围的资源。您可以通过 GlassFish 管理控制台定义连接池/数据源。

# cuda - 从 CUDA 内核随机访问小型常量数组的工作原理

> ID：15170930
> 
> 赞同：2
> 
> 时间：2013-03-02T05:01:49.733
> 
> 标签：cuda, gpu

我的内核使用`float`大小为 8 x 8 的数组，下面带有随机访问模式。

```
// inds - big array of indices in range 0,...,7
// flts - 8 by 8 array of floats

// kernel essentially processes large 2D array by looping through slow coordinate
// and having block/thread parallelization of fast coordinate.

__global__ void kernel (int const* inds, float const* flt, ...)
{
    int idx = threadIdx.x + blockDim.x * blockIdx.x;  // Global fast coordinate
    int idy;                                          // Global slow coordinate
    int sx = gridDim.x * blockDim.x;                  // Stride of fast coordinate

    for ( idy = 0; idy < 10000; idy++ )       // Slow coordinate loop
    {
        int id = idx + idy * sx;              // Global coordinate in 2D array

        int ind = inds[id];                   // Index of random access to small array

        float f0 = flt[ind * 8 + 0];
        ...
        float f7 = flt[ind * 8 + 7];

        NEXT I HAVE SOME ALGEBRAIC FORMULAS THAT USE f0, ..., f7
    }
} 
```

`flt`访问数组的最佳方式是什么？

1.  不要通过`flt`，使用`__const__`内存。我不确定当不同线程访问不同数据时 const 内存有多快。
2.  使用如上。不会使用负载统一，因为线程访问不同的数据。由于缓存，它仍然会很快吗？
3.  复制到共享内存并使用共享内存数组。
4.  使用纹理。从未使用过纹理...这种方法可以快速吗？

对于共享内存，转置`flt`数组可能更好，即以这种方式访问​​它以避免银行冲突：

```
float fj = flt_shared[j * 8 + ind]; // where j = 0, ..., 7 
```

PS：目标架构是费米和开普勒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:18:51.927

“最佳”方式还取决于您正在处理的架构。我个人对 Fermi 和 Kepler 上的随机访问（由于使用映射，您的访问似乎是一种随机的`inds[id]`）的个人经验是，L1 现在是如此之快，以至于在许多情况下，最好继续使用全局内存而不是共享内存内存或纹理内存。

**加速全局内存随机访问：使 L1 缓存行无效**

Fermi 和 Kepler 架构支持来自全局内存的两种类型的负载。**完全缓存**是默认模式，它尝试在 L1、L2、GMEM 中命中，加载粒度为 128 字节行。**L2-only**尝试在 L2 中命中，然后是 GMEM，加载粒度为 32 字节。对于某些随机访问模式，可以通过使 L1 无效并利用 L2 的较低粒度来提高内存效率。这可以通过编译`–Xptxas –dlcm=cg`选项来完成`nvcc`。

**加速全局内存访问的一般准则：禁用 ECC 支持**

Fermi 和 Kepler GPU 支持纠错码 (ECC)，默认启用 ECC。ECC 降低了峰值内存带宽，并被要求增强医学成像和大规模集群计算等应用程序中的数据完整性。如果不需要，可以使用 Linux 上的 nvidia-smi 实用程序（请参阅[链接](http://johanneshabich.blogspot.it/2011/04/nvidia-cuda-disableenable-ecc.html)）或通过 Microsoft Windows 系统上的控制面板禁用它以提高性能。请注意，打开或关闭 ECC 需要重新启动才能生效。

**在 Kepler 上加速全局内存访问的一般准则：使用只读数据缓存**

Kepler 具有一个 48KB 的缓存，用于存储已知在函数执行期间为只读的数据。使用只读路径是有益的，因为它减轻了共享/L1 缓存路径的负担，并且支持全速非对齐内存访问。只读路径的使用可以由编译器自动管理（使用`const __restrict`关键字）或`__ldg()`由程序员显式管理（使用内在函数）。

# f# - F# 函数 - 预期类型与实际类型不同

> ID：15170931
> 
> 赞同：1
> 
> 时间：2013-03-02T05:02:11.010
> 
> 标签：f#, f#-3.0, f#-scripting

我一直在尝试编写一个柯里化函数“multvec”，它使用 u=(u1, u2, ..., un) 和 v=(v1, v2, ..., vn) 并输出 u1*v1 + u2*v2 + ... + un*vn。我认为我的逻辑大部分是正确的（至少它会是其他语言......）但我不断得到：

```
stdin(11,57): error FS0001: This expression was expected to have type
'a list    
but here has type
'c list * 'd list -> 'b list 
```

代码如下： 问题显然出在最后一行对产品的调用中。但是，我的印象是基本情况 ( x * y )::[ ] 只会产生一个 'a 列表，而不是它实际产生的结果。

```
let rec multvec xs ys = function
    | [ ], [ ] -> failwith "Both lists cannot be empty"
    | x::[ ], y::[ ] -> ( x * y )::[ ]
    | x::xs, y::ys -> let product = multvec xs ys
                      ( x * y ) + ( List.reduce (+) product ) 
```

对此错误的任何澄清将不胜感激！先感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T05:16:58.280

老实说，您的代码错误多于正确：;-]

*   它不是尾递归的
*   使用`function`when`xs`和`ys`是单独的参数
*   不完整的模式匹配
*   让一个分支评估为列表，另一个评估为标量
*   所有产品都是手动添加在一起的，除了最后一个，它`List.reduce`在一个单元素列表上运行 - 稍微向后;-]

这是一个明智的实现，可以解决上述所有问题：

```
let inline multvec xs ys = List.map2 (*) xs ys |> List.sum 
```

请注意，如果性能是主要问题，那么它可能值得避免`List.sum`，因为它使用检查算法。如果可以使用未经检查的算术，则可以执行以下操作：

```
let inline multvec xs ys = List.map2 (*) xs ys |> List.reduce (+) 
```

如果您真的想手动执行此操作，这是一种方法：

```
let inline multvec xs ys =
    let rec impl acc = function
        | [], []         -> acc
        | x::xs', y::ys' -> impl (x * y + acc) (xs', ys')
        | _              -> failwith "lists must be of equal length" 
    impl LanguagePrimitives.GenericZero (xs, ys) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T10:14:03.573

要添加到 ildjarn 的答案，您可以融合`map2`并`reduce`使用单个函数调用`fold2`来计算两个向量的点积（“multvec”）：

```
let inline dot xs ys =
    let zero = LanguagePrimitives.GenericZero
    List.fold2 (fun acc x y -> acc + x * y) zero xs ys 
```

这将使您免于创建不必要的临时列表。

# etl - 在 SSIS 中使用正确的函数拆分列中的值

> ID：15170939
> 
> 赞同：-1
> 
> 时间：2013-03-02T05:03:05.037
> 
> 标签：etl, ssis

我需要你们的紧急帮助，我有一个代表用户全名的列，现在我想把它分成名字和姓氏。

Full name 的格式是“World, hello”，现在这里的名字是hello，姓氏是world。

我正在使用派生列（SSIS）并为名字使用右函数，为姓氏使用子字符串函数，但这些结果似乎是空白的，即使我也是空白的。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:56:31.820

它对我有用。一般来说，您应该在问题中提供更多关于此类位置的详细信息，以帮助其他人重新创建和解决您的问题。您没有指定我们是否需要解决此字段中的 NULL，我也不知道您想如何解释它，因此这个答案还有改进的余地。

我从一个简单的 OLE DB 源开始，硬编码了一个查询“SELECT 'World, Hello' AS Name”。

我创建了 2 个派生列任务。第一个向数据流中添加了一个名为 FirstCommaPosition 的列。我使用的公式是`FINDSTRING(Name,",", 1)`如果 NAME 可以为空，那么我们需要在调用 FINDSTRING 函数之前测试可空性。然后，您需要确定在 NULL 的情况下如何存储拆分数据。我会假设第一个和最后一个都应该为空，但我不*知道*。

在不同的步骤中执行此操作有两个原因。首先是性能。听起来有悖常理，在派生列中做的更少会带来更好的性能，因为 SSIS 引擎可以更好地并行化操作。另一个更简单 - 我将需要使用此值来拆分名字和姓氏，因此引用列比复制粘贴公式更容易且维护更少。

第二个派生列将实际执行拆分。

我的 FirstNameUnicode 列使用这个公式`(FirstCommaPosition > 0) ? RTRIM(LTRIM(RIGHT(Name,FirstCommaPosition))) : ""` 说“如果我们在前面的步骤中找到了一个逗号，那么从逗号的位置到字符串末尾的所有内容都切掉并应用修剪操作。如果我们没有找到一个逗号，那么就返回一个空白字符串。表达式的默认字符串类型将是 Unicode (DT_WSTR)，因此如果您不需要，您需要将结果转换为正确的字符串代码页 (DT_STR)

我的 LastNameUnicode 列使用这个公式`(FirstCommaPosition > 0) ? SUBSTRING(Name,1,FirstCommaPosition -1) : ""`与上面类似的逻辑，除了现在我使用 SUBSTRING 操作而不是 RIGHT。SSIS 2012 版及更高版本的用户很高兴您可以使用 LEFT 函数而不是 SUBSTRING。另请注意，您需要后退 1 个位置才能删除逗号。

![在此处输入图像描述](../Images/999b8019aa5c5f5c6d3af977170332f0.png)

# javascript - 如何在javascript中旋转数组中的矩阵

> ID：15170942
> 
> 赞同：22
> 
> 时间：2013-03-02T05:03:31.593
> 
> 标签：javascript, math, matrix

（披露，我主要是数学文盲）。

我有一个这种格式的数组：

```
var grid = [
  [0,0], [0,1], [0,2], [0,3],
  [1,0], [1,1], [1,2], [1,3],
  [2,0], [2,1], [2,2], [2,3],
  [3,0], [3,1], [3,2], [3,3]
]; 
```

我需要以 90 度为增量“旋转”它，所以它是这样的：

```
var grid = [
  [3,0], [2,0], [1,0], [0,0], 
  [3,1], [2,1], [1,1], [0,1], 
  [3,2], [2,2], [1,2], [0,2], 
  [3,3], [2,3], [1,3], [0,3] 
]; 
```

我如何在 Javascript 中实现这一点？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2019-11-02T04:55:55.813

## 旋转二维 mxn 矩阵

那些在此处寻找旋转二维矩阵（更一般的情况）的人是如何做到的。

示例：原始矩阵：

```
[
  [1,2,3],
  [4,5,6], 
  [7,8,9]
] 
```

旋转 90 度：

```
[
    [7,4,1]
    [8,5,2]
    [9,6,3]
] 
```

这是通过以下方式完成的：

```
matrix[0].map((val, index) => matrix.map(row => row[index]).reverse()) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-02T05:25:36.643

实际轮换方法的功劳归功于[此答案。](https://stackoverflow.com/questions/42519/how-do-you-rotate-a-two-dimensional-array)

我的方法很简单。只需确定行长是多少，然后遍历每个项目，将数组索引转换为 x/y 等效项，然后应用链接答案中使用的方法进行旋转。最后，我将旋转后的 X/Y 坐标转换回数组索引。

```
var grid = [
  [0,0], [0,1], [0,2], [0,3],
  [1,0], [1,1], [1,2], [1,3],
  [2,0], [2,1], [2,2], [2,3],
  [3,0], [3,1], [3,2], [3,3]
]; 

var newGrid = [];
var rowLength = Math.sqrt(grid.length);
newGrid.length = grid.length

for (var i = 0; i < grid.length; i++)
{
    //convert to x/y
    var x = i % rowLength;
    var y = Math.floor(i / rowLength);

    //find new x/y
    var newX = rowLength - y - 1;
    var newY = x;

    //convert back to index
    var newPosition = newY * rowLength + newX;
    newGrid[newPosition] = grid[i];
}

for (var i = 0; i < newGrid.length; i++)
{   
    console.log(newGrid[i])
} 
```

输出：

```
[3, 0] [2, 0] [1, 0] [0, 0]  
[3, 1] [2, 1] [1, 1] [0, 1]  
[3, 2] [2, 2] [1, 2] [0, 2]  
[3, 3] [2, 3] [1, 3] [0, 3] 
```

[为懒惰](http://jsfiddle.net/SbC7H/3/)的人提琴。还有一个[5x5 的网格小提琴](http://jsfiddle.net/SbC7H/7/)来证明该算法适用于 N 个网格大小，只要它们是正方形的。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-01-22T08:26:58.747

这是顺时针和逆时针 90 度旋转的两个功能：

```
 function rotateCounterClockwise(a){
        var n=a.length;
        for (var i=0; i<n/2; i++) {
            for (var j=i; j<n-i-1; j++) {
                var tmp=a[i][j];
                a[i][j]=a[j][n-i-1];
                a[j][n-i-1]=a[n-i-1][n-j-1];
                a[n-i-1][n-j-1]=a[n-j-1][i];
                a[n-j-1][i]=tmp;
            }
        }
        return a;
    }

    function rotateClockwise(a) {
        var n=a.length;
        for (var i=0; i<n/2; i++) {
            for (var j=i; j<n-i-1; j++) {
                var tmp=a[i][j];
                a[i][j]=a[n-j-1][i];
                a[n-j-1][i]=a[n-i-1][n-j-1];
                a[n-i-1][n-j-1]=a[j][n-i-1];
                a[j][n-i-1]=tmp;
            }
        }
        return a;
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-02T08:31:27.857

我真的不需要处理索引，因为我可以将值从一个地方复制到另一个地方，这简化了答案：

```
var grid = [
  [0,0], [0,1], [0,2], [0,3], [0,4],
  [1,0], [1,1], [1,2], [1,3], [1,4],
  [2,0], [2,1], [2,2], [2,3], [2,4],
  [3,0], [3,1], [3,2], [3,3], [3,4],
  [4,0], [4,1], [4,2], [4,3], [4,4]
]; 

var side = Math.sqrt(grid.length);

var rotate = function(d,i){
   return [Math.abs(i % side - side+1), Math.floor(i/side)]
}
grid = grid.map(rotate); 
```

你可以在这里看到一个 jsfiddle：http: [//jsfiddle.net/KmtPg/](http://jsfiddle.net/KmtPg/)

# php - 如何获得客户提交帖子的天数？

> ID：15170947
> 
> 赞同：0
> 
> 时间：2013-03-02T05:03:52.910
> 
> 标签：php, mysql

如何获得客户提交的帖子的天数？
图片告诉我想得到什么。我不知道如何将mysql中的日期总结为天，有人帮忙吗？
需要php来做这些工作吗？
![在此处输入图像描述](../Images/de99ae2d21053b7ba89d6787c7b76307.png)

```
select ? from table where ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T05:06:55.160

```
SELECT customers_id, SUM(customers_id) as sum_days FROM table GROUP BY customers_id,   DAY(date); 
```

那应该这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T05:55:03.450

这是我的猜测：

```
SELECT `customers_id`, COUNT(DISTINCT(`date`)) as sum_days
FROM `table` GROUP BY `customers_id` 
```

我在一张我正在修补的小桌子上试了一下，得到了以下结果：

```
SELECT author, entry_date FROM table;
+--------+------------+
| author | entry_date |
+--------+------------+
|      5 | 0000-00-00 |
|      8 | 0000-00-00 |
|      8 | 0000-00-00 |
|      8 | 2013-02-28 |
|      8 | 2013-02-28 |
|      8 | 2013-03-02 |
+--------+------------+ 
```

多田

```
SELECT author, COUNT(DISTINCT(entry_date)) as num_days 
FROM table GROUP BY author ;
+--------+----------+
| author | num_days |
+--------+----------+
|      5 |        1 |
|      8 |        3 |
+--------+----------+
2 rows in set (0.00 sec) 
```

另外，这是我之前在同一张桌子上回复的结果：

```
SELECT author, SUM(author) as sum_days FROM table 
GROUP BY author, DAY(entry_date);
+--------+----------+
| author | sum_days |
+--------+----------+
|      5 |        5 |
|      8 |       16 |
|      8 |        8 |
|      8 |       16 |
+--------+----------+
4 rows in set (0.00 sec) 
```

# angularjs - AngularJS - 使用 ngRepeat 指令的自定义过滤器

> ID：15170950
> 
> 赞同：1
> 
> 时间：2013-03-02T05:04:21.157
> 
> 标签：angularjs, angularjs-ng-repeat

我想将我的自定义过滤器与 ngRepeat 指令一起使用。这是我所拥有的

HTML：

```
<div ng-app="menuApp">
    <ul ng-controller="MenuCtrl">
        <li ng-repeat="item in menuItems | rootCategories">
            {{item.Name}}
        </li>
    </ul>
</div> 
```

JS：

```
angular.module('menuApp', [])
    .filter('rootCategories', function() {
        return function(item) {
            return item.Parent == 0;
        };
    });

function MenuCtrl($scope) {
    $scope.menuItems = [{ "Id": 1, "Name": "Sweep", "Parent": 0 }];

    /*
    $scope.rootCategories = function(item) {
        return item.Parent == 0;
    };
    */
}; 
```

我不想使用注释掉的方式来过滤我的项目，因为真正的过滤器会比提供的示例复杂。由于某些原因，未定义输入参数“item”，因此我什么也看不到。你能告诉我有什么问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T08:18:07.157

请看看这个小提琴。[http://jsfiddle.net/bKFXy/](http://jsfiddle.net/bKFXy/)。这使用将谓词对象作​​为过滤器表达式传递的语法。 `item in menuItems | filter:{Parent:0}`

还有另一种过滤方法，这里是[http://jsfiddle.net/kd5dv/](http://jsfiddle.net/kd5dv/)

# c++ - SetCursorPos 移动鼠标两次？

> ID：15170951
> 
> 赞同：0
> 
> 时间：2013-03-02T05:05:07.860
> 
> 标签：c++, windows, winapi

我正在制作一个程序，允许用户自定义热键并让它们执行特定的功能。

我所做的第一个函数将光标移动到游戏窗口中的一组特定坐标。它通过找到客户区域然后添加设置的坐标然后将光标移动到那里来做到这一点。但是，似乎每次调用 SetCursorPos 时，它都会移动两次：首先到正确的位置，然后到 (0,0)。我不确定是什么原因造成的，我花了几个小时谷歌搜索和调试都无济于事。一切正常，只是它移动了两次。我正在使用 Windows 8 并使用 Code::Blocks 进行编译。

该脚本在鼠标移动之前和之后输出它应该移动的坐标。他们应该是一样的。当热键被按下时它也会输出“key down”，当它被释放时它也会输出“key up”。

按 F1 将导致鼠标移动。

```
#include <iostream>
#include <windows.h>
using namespace std;

class macro{
public:
    int x, y, w, h;
    HWND hWnd;

    HWND get_hWnd(){
        hWnd   =   FindWindow(NULL,"Untitled - Notepad");
        return hWnd;
    }

    void get_Pos(){
        RECT pos;
        GetClientRect(hWnd,(LPRECT)&pos);
        ClientToScreen(hWnd,(LPPOINT)&pos.left);
        ClientToScreen(hWnd,(LPPOINT)&pos.right);
        w   =   pos.right;
        h   =   pos.bottom;
        x   =   pos.left;
        y   =   pos.top;
    }
    void activate(){
        ShowWindow(hWnd, SW_SHOWMAXIMIZED);
    }
    void initialize(){
        get_hWnd();
        get_Pos();
    }
    void mousemove(int rx, int ry){
        get_Pos();
        cout << "Pre-move: " << rx+x << "," << ry+y << endl;
        SetCursorPos(rx + x,ry + y);
        cout << "Post-move: " << rx+x << "," << ry+y << endl;
    }
}macro;

int main(){
    macro.initialize();
    bool loop   =   true;
    bool action_complete    =   true;
    int prev    =   0;
    int curr    =   0;
    bool key_state; // True if down, false if up.

    while(loop){
        if(GetAsyncKeyState(0x70)){
            curr    =   1;
        }
        else{
            curr    =   0;
        }
        if (prev != curr){
            if(curr){
                key_state   =   true;
                macro.mousemove(100,100);
                cout << "key down" << endl;
                Sleep(100);
            }
            else{
                key_state   =   false;
                cout << "key up" << endl;
                Sleep(100);
            }
            prev    =   curr;
        }
    }
} 
```

# java - com.mysql.jdbc.Driver 在尝试创建数据库时抛出 ClassNotFoundException

> ID：15170954
> 
> 赞同：2
> 
> 时间：2013-03-02T05:06:03.240
> 
> 标签：java, database, jdbc, classnotfound

好吧，我真的很生气，因为我意识到这很容易，但在这一点上，我不确定还有什么可以尝试的。该程序只是简单地创建一个存储硬币名称、数量和价值的硬币表。我开始从命令行启动程序，但在没有让它工作后，我将其更改为在 NetBeans 中执行。我不断收到相同的错误消息。我已经搜索了解决方案，但找不到问题，因为我的驱动程序类似乎是必需的。我目前正在使用 com.mysql.jdbc.Driver 作为驱动程序。

```
 public class CoinDataBase {

     static String file = "C:\\Users\\Dan\\Desktop\\database.properties.txt";

     public static void main(String[] args) throws SQLException, IOException,
        ClassNotFoundException {

     SimpleDataSource.init(file);

     Connection conn = SimpleDataSource.getConnection();
     try
     {
        Statement stat = conn.createStatement();

        stat.execute("CREATE TABLE Coin (Name VARCHAR(12),Value "
                + "DECIMAL(5,2),QTY DECIMAL(5,0),Value DECIMAL(5,2)"
                + ",Total DECIMAL(5,2))");
        stat.execute("INSERT INTO Coin VALUES('Penny',.01,5,.05)");
        stat.execute("INSERT INTO Coin VALUES('Nickel',.05,2,.10)");
        stat.execute("INSERT INTO Coin VALUES('Dime',.10,3,.30)");
        stat.execute("INSERT INTO Coin VALUES('Quarter',.25,2,.50)");
        stat.execute("INSERT INTO Coin VALUES('Half Dollar',.50,3,1.50)");
        stat.execute("INSERT INTO Coin VALUES('Dollar',1.00,2,2.00)"); 

        ResultSet result = stat.executeQuery("SELECT * FROM Coin");
        result.next();
        System.out.println(result.getString("Name")); 
     }
     finally
     {
        conn.close();
     }
    }
    } 
```

还有我的二等...

```
 class SimpleDataSource {

    private static String url, username, password;

    static void init(String fileName) throws IOException, ClassNotFoundException
    {
      Properties props = new Properties();
      FileInputStream in = new FileInputStream(fileName);
      props.load(in);

      String driver = props.getProperty("jdbc.driver");
      url = props.getProperty("jdbc.url");
      username = props.getProperty("jdbc.username");
      if (username == null) username = "";
      password = props.getProperty("jdbc,password");
      if (password == null) password = "";
      if (driver != null)
        Class.forName(driver);  
    }

     static Connection getConnection() throws SQLException{
     return DriverManager.getConnection(url, username, password);
    }  
    } 
```

以及完整的错误消息：

```
Exception in thread "main" java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at coindatabase.SimpleDataSource.init(SimpleDataSource.java:28)
    at coindatabase.CoinDataBase.main(CoinDataBase.java:20)
Java Result: 1 
```

我真的很感激任何帮助。我不知道我哪里错了。我可以通过 NetBeans 中的服务连接并创建数据库，所以我认为它没有配置错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T05:15:38.873

1) 确保 oracle.jar 在您项目的*运行时*类路径中：

[http://netbeans.org/kb/docs/java/project-setup.html](http://netbeans.org/kb/docs/java/project-setup.html)

2）值得一试`oracle.jdbc.Driver.OracleDriver`

'希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T19:23:10.930

当尝试在 Ubuntu（javaSE 1.6）上使用 Eclipse 连接到 Postgresql DB 时，对于同样的错误，什么对我有用。我去了 Eclipse -> Project -> Proprieties -> Java Build Path -> Libraries -> add external jar 并从[http://jdbc.postgresql.org/download.html](http://jdbc.postgresql.org/download.html)添加了 postgresql-9.3-1100.jdbc4.jar 。

```
Connection con = null;
    Statement st = null;
    ResultSet rs = null;

    String url = "jdbc:postgresql://localhost:5432/unnamed_db";
    String user = "postgres";
    String password = "*";

    try {
        con = DriverManager.getConnection(url, user, password);
        st = con.createStatement();
        rs = st.executeQuery("select * from table;");

        if (rs.next()) {
            System.out.println(rs.getString(1));
        }

    } catch (SQLException ex) {
        Logger lgr = Logger.getLogger(Version.class.getName());
        lgr.log(Level.SEVERE, ex.getMessage(), ex);

    } finally {
        try {
            if (rs != null) {
                rs.close();
            }
            if (st != null) {
                st.close();
            }
            if (con != null) {
                con.close();
            }

        } catch (SQLException ex) {
            Logger lgr = Logger.getLogger(Version.class.getName());
            lgr.log(Level.WARNING, ex.getMessage(), ex);
        }
    } 
```

# html - 如何在调整窗口大小时防止内容重叠

> ID：15170962
> 
> 赞同：0
> 
> 时间：2013-03-02T05:07:00.910
> 
> 标签：html, css

我有一个小问题——我左右有两个 div，因为我的屏幕分辨率是 1280*768，它们在这里工作正常。但是当我减小窗口大小时，它会相互重叠......就像左边的宽度减小，右边的那样会发生......

这是我的代码..

```
<div class="shareBar" align="right">
        ......
 </div> 
<div class="content">     
    .....   
 </div> 
```

我的CSS代码在这里

```
.content{
    position:relative;
    margin: 110px 5px 10px 5px;
    min-width:700px;

    }

.shareBar{
    position:relative;
} 
```

这里 shareBar 与内容重叠...

我想让这个 shareBar 始终处于静态位置，并且当窗口重新调整大小时，应该出现一个水平滚动条，以便内容始终处于静态大小。否则 shareBar 应该驻留在内容下。纯CSS可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:59:43.347

如果你想让它`.sharebar`出现在同一个地方并在调整窗口大小时触发一个水平滚动条，你应该`align="right"`从 HTML 中删除它`position:absolute`，并在 CSS 中指定一个位置。例如：

```
.shareBar{
    position:absolute;
    left:900px;
} 
```

# php - php重定向功能

> ID：15170964
> 
> 赞同：0
> 
> 时间：2013-03-02T05:07:41.807
> 
> 标签：php

如果页面被某个页面重定向到，是否有触发某个功能？我想在从我的注册页面重定向到索引页面后触发一个段落示例：当我注册并被重定向时，我希望弹出一个文本或出现感谢我注册

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:19:35.777

您可以在您的注册页面和索引页面上启动一个 SESSION，检查是否某个 SESSION['var'] isset，如果是，则显示您的欢迎/感谢消息

检查[会话](http://php.net/manual/en/features.sessions.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T05:24:29.053

当然。您只需在表单中传递您想要的任何参数：

`<form action="submit.php?code=thanks" method="get">`

然后，在提交的处理程序页面上，您会查找这些参数，如下所示：

```
if ($_GET['code'] == thanks) {
   echo "Thanks for joining us!";
} 
```

# java - 序列中存在的校验号

> ID：15170965
> 
> 赞同：0
> 
> 时间：2013-03-02T05:08:04.340
> 
> 标签：java, algorithm, math, sequence

我正在编写一个在编码竞赛网站上找到的程序，我已经想出了如何解决这个问题，但是，我被困在其中的数学部分，我完全淡化了这个问题并展示了我需要什么。

首先我需要检查一个数字是否是序列的一部分，我的序列是`2*a+1`其中 a 是序列中的前一个元素或 2^n-1 以获得序列中的第 n 个项目。所以它是**1,3,7,15,31,63** ...

我真的不想创建整个序列并检查是否存在数字，但我不确定执行此操作的更快方法是什么。

其次，如果给我一个数字，比如说 25，我想找出我的序列中的下一个最高数字到这个数字。因此，对于 25，它将是 31，对于 47，它将是 63，对于 8，它将是 13。

我怎么能在不创建整个序列的情况下做这些事情。

我在这里看到了不同序列的类似问题，但我仍然不确定如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T05:45:42.227

首先找到序列中任何术语的显式公式。我懒得写证明，所以只需添加`1`到序列中的每个术语：

```
 1 + 1 =  2
 3 + 1 =  4
 7 + 1 =  8
15 + 1 = 16
31 + 1 = 32
63 + 1 = 64
... 
```

你可以清楚地看到`a_n = 2^n - 1`。

要检查特定数字是否在您的序列中，假设它是：

```
x = 2^n - 1
x + 1 = 2^n 
```

来自维基百科：

> 整数的二进制表示可以应用非常快速的测试来确定给定的正整数 x 是否是 2 的幂：
> 
> > 正 x 是 2 的幂 ⇔ (x & (x − 1)) 等于 0。

所以要检查，只需执行以下操作：

```
bool in_sequence(int n) {
    return ((n + 1) & n) == 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T05:25:50.750

正如@Blender 已经指出你的序列本质上是`2^n - 1`，如果你使用整数格式来存储它，你可以使用这个技巧：

```
boolean inSequence(int value) {
    for (int i = 0x7FFF; i != 0; i >>>= 1) {
        if (value == i) {
            return true;
        }
    }
    return false;
} 
```

请注意，对于序列中的每个元素，其二进制表示将是很多`0`s，然后是很多`1`s。

例如，`7`in binary is`0000000000000000000000000000111`和`63`in binary is `0000000000000000000000000111111`。

该解决方案从`01111111111111111111111111111111`使用无符号移位开始，然后比较它是否等于您的值。

很好很简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T06:17:36.467

**如何找到下一个更高的数字：**

例如，我们得到 19 ( 10011 ) ，应该返回 31 (11111)

```
int findNext(int n){
    if(n == 0) return 1;

    int ret = 2;         // start from 10
    while( (n>>1) > 0){  // end with 100000
        ret<<1;
    }
    return ret-1;
} 
```

# jquery - 如何延迟显示/隐藏引导工具提示？

> ID：15170967
> 
> 赞同：61
> 
> 时间：2013-03-02T05:08:23.240
> 
> 标签：jquery, twitter-bootstrap

我无法使 twitter 引导工具提示的数据延迟属性起作用。我像这样使用它：

这是我如何使用它：

```
<a href="#" data-toggle="tooltip" data-delay="{ show: 5000, hide: 3000}">with delay</a>
<script>
    jQuery('a[data-toggle="tooltip"]').tooltip().click( function(e) {
        e.preventDefault(); 
    });
</script> 
```

但我没有看到显示/隐藏有任何延迟。任何想法为什么？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-09-11T08:41:13.720

最后我让它与数据属性一起工作。

```
data-delay='{"show":"5000", "hide":"3000"}' 
```

对象必须用单引号括起来，键用双引号和值用双引号或无，可能取决于类型。是唯一可行的方法。

这也适用于弹出窗口。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-03-02T05:16:19.100

你为什么不能这样呢？

```
$('a').tooltip({
     'delay': { show: 5000, hide: 3000 }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-06T04:44:39.243

我更喜欢这样：

```
$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip({'delay': { show: 5000, hide: 3000 }
    });   
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-02T07:50:27.777

您的答案不适用于 Bootstrap 3.3.2。这个适用于我的版本：

```
data-delay='{"show":5000, "hide":3000}' 
```

来源：[https ://github.com/twbs/bootstrap/issues/13874](https://github.com/twbs/bootstrap/issues/13874)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-28T13:44:17.457

与 AngularJS (UI) 一起使用：

```
<div tooltip="Hello" tooltip-popup-delay="500"></div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-13T03:42:06.547

您可以使用：

```
<div ... popover-popup-delay="2000" ...> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-17T10:14:45.510

解决方法！

无法让它在模态框上用于我的信息消息弹出框，但在我的 JavaScript 中使用了此解决方法：

```
$('#infoPopover').attr("data-original-title", "Delete Document");
$('#infoPopover').attr("data-content", "Success");
$('#infoPopover').popover('show');
setTimeout(function () { $('#infoPopover').popover('hide') }, 4000); 
```

它适用于空跨度...

```
<span id="infoPopover" data-toggle="popover"></span> 
```

popover 显示几秒钟然后再次隐藏。

[模态框上的弹出框信息消息的图像](https://i.stack.imgur.com/Gb7gF.jpg)

# r - 矩阵的每一行与R中的另一个矩阵的叉积

> ID：15170969
> 
> 赞同：2
> 
> 时间：2013-03-02T05:08:34.630
> 
> 标签：r, matrix, multiplication

```
Suppose I have a matrix 
```

一个=

```
 [1, 2, 3;
       4, 5, 6;
       7, 8, 9;
       8, 7, 6]; 
```

我想要A的每一行和另一个矩阵B的叉积，其中

乙 =

```
 [1, 0.5, 0.5;
       0.5, 1, 0.5;
       0.5, 0.5, 1]; 
```

for 循环可以写成，

```
for(i in 1:4)
{
      t(A[i,])%*%B;
} 
```

在不使用 for 循环的情况下，是否有更优化的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T05:42:18.877

以下三个解决方案是等效的并提供相同的结果；但是它们在性能上是不同的。我确实在`10000`迭代循环中运行了它们以比较它们的平均性能，结果如下：

1-

```
for(i in 1:4)
{
  t(A[i,])%*%B;
} 
```

**时间：0.46**

2-

```
apply(A,1,crossprod,B) 
```

**时间：0.58**

3-

```
t(A %*% B) 
```

或者

```
t(tcrossprod(A,B)) 
```

**时间：0.08**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T05:21:44.497

没有真正优化，但看起来更好，

```
apply(A,1,crossprod,B) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T05:26:15.987

R为此有一个内置函数：

```
 A %*% B
    #      [,1] [,2] [,3]
    # [1,]  3.5    4  4.5
    # [2,]  9.5   10 10.5
    # [3,] 15.5   16 16.5
    # [4,] 14.5   14 13.5 
```

# wordpress - 我如何将 Cometchat 与 Wordpress 集成

> ID：15170970
> 
> 赞同：0
> 
> 时间：2013-03-02T05:08:39.193
> 
> 标签：wordpress

我安装了 Cometchat，但不知道如何配置 integration.php 以使用 wordpress。有人对 cometchat wordpress 安装有任何了解吗？

特别是 integration.php 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T01:54:53.913

```
<?php

/* ADVANCED */

define('SET_SESSION_NAME','');          // Session name
define('DO_NOT_START_SESSION','0');     // Set to 1 if you have already started the session
define('DO_NOT_DESTROY_SESSION','0');   // Set to 1 if you do not want to destroy session on logout
define('ADD_LAST_ACTIVITY','1');        // Do not touch
define('SWITCH_ENABLED','0');       
define('INCLUDE_JQUERY','1');   
define('FORCE_MAGIC_QUOTES','1');
define('FORCE_ALL_USERS','1');

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/* DATABASE */

include_once dirname(dirname(__FILE__)).DIRECTORY_SEPARATOR."wp-load.php";

// DO NOT EDIT DATABASE VALUES BELOW
// DO NOT EDIT DATABASE VALUES BELOW
// DO NOT EDIT DATABASE VALUES BELOW

define('DB_SERVER',                 DB_HOST                                 );
define('DB_PORT',                   "3306"                                  );
define('DB_USERNAME',               DB_USER                                 );
define('TABLE_PREFIX',              $table_prefix                           );
define('DB_USERTABLE',              "users"                                 );
define('DB_USERTABLE_USERID',       "ID"                                    );
define('DB_USERTABLE_NAME',         "display_name"                          );
define('DB_AVATARTABLE',            " "                                     );
define('DB_AVATARFIELD',            " CONCAT(".TABLE_PREFIX.DB_USERTABLE.".".DB_USERTABLE_USERID.",'|',".TABLE_PREFIX.DB_USERTABLE.".user_email)");
define('DB_USERTABLE_LASTACTIVITY', "lastactivity"                          );

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/* FUNCTIONS */

function getUserID() {
    global $current_user;
    get_currentuserinfo();

    $userid = 0;

    if (!empty($_SESSION['basedata']) && $_SESSION['basedata'] != 'null') {
        $_REQUEST['basedata'] = $_SESSION['basedata'];
    }

    if (!empty($_REQUEST['basedata'])) {
        $userid = $_REQUEST['basedata'];
    }

    if (!empty($current_user->ID)) {
        $userid = $current_user->ID;
    }

    return $userid;
}

function chatLogin($userName,$userPass){
    $userid = 0;
    include(dirname(dirname(dirname(__FILE__))).DIRECTORY_SEPARATOR."wp-includes".DIRECTORY_SEPARATOR."class-phpass.php");
    $hasher = new PasswordHash(8, false);   

    if (filter_var($userName, FILTER_VALIDATE_EMAIL)) {
        $sql ="SELECT * FROM ".TABLE_PREFIX.DB_USERTABLE." WHERE user_email='".$userName."'"; 
    } else {
        $sql ="SELECT * FROM ".TABLE_PREFIX.DB_USERTABLE." WHERE user_login='".$userName."'"; 
    }

    $result=mysql_query($sql);
    $row = mysql_fetch_array( $result );        
    $check = $hasher->CheckPassword($userPass, $row['user_pass']);  

    if ($check) { 
        $userid = $row['ID'];
    }

    return $userid;
}

function getFriendsList($userid,$time) {

    $sql = ("select DISTINCT ".TABLE_PREFIX.DB_USERTABLE.".".DB_USERTABLE_USERID." userid, ".TABLE_PREFIX.DB_USERTABLE.".".DB_USERTABLE_NAME." username, ".TABLE_PREFIX.DB_USERTABLE.".".DB_USERTABLE_LASTACTIVITY." lastactivity, ".DB_AVATARFIELD." avatar, ".TABLE_PREFIX.DB_USERTABLE.".user_nicename link, cometchat_status.message, cometchat_status.status from ".TABLE_PREFIX.DB_USERTABLE." left join cometchat_status on ".TABLE_PREFIX.DB_USERTABLE.".".DB_USERTABLE_USERID." = cometchat_status.userid ".DB_AVATARTABLE." where ".TABLE_PREFIX.DB_USERTABLE.".".DB_USERTABLE_USERID." <> '".mysql_real_escape_string($userid)."' and ('".$time."'-".TABLE_PREFIX.DB_USERTABLE.".".DB_USERTABLE_LASTACTIVITY." < '".((ONLINE_TIMEOUT)*2)."') order by username asc");

    return $sql;
}

function getUserDetails($userid) {
    $sql = ("select ".TABLE_PREFIX.DB_USERTABLE.".".DB_USERTABLE_USERID." userid, ".TABLE_PREFIX.DB_USERTABLE.".".DB_USERTABLE_NAME." username, ".TABLE_PREFIX.DB_USERTABLE.".".DB_USERTABLE_LASTACTIVITY." lastactivity,  ".TABLE_PREFIX.DB_USERTABLE.".user_nicename link, ".DB_AVATARFIELD." avatar, cometchat_status.message, cometchat_status.status from ".TABLE_PREFIX.DB_USERTABLE." left join cometchat_status on ".TABLE_PREFIX.DB_USERTABLE.".".DB_USERTABLE_USERID." = cometchat_status.userid ".DB_AVATARTABLE." where ".TABLE_PREFIX.DB_USERTABLE.".".DB_USERTABLE_USERID." = '".mysql_real_escape_string($userid)."'");
    return $sql;
}

function updateLastActivity($userid) {
    $sql = ("update `".TABLE_PREFIX.DB_USERTABLE."` set ".DB_USERTABLE_LASTACTIVITY." = '".getTimeStamp()."' where ".DB_USERTABLE_USERID." = '".mysql_real_escape_string($userid)."'");
    return $sql;
}

function getUserStatus($userid) {
     $sql = ("select cometchat_status.message, cometchat_status.status from cometchat_status where userid = '".mysql_real_escape_string($userid)."'");
     return $sql;
}

function getLink($link) {
    return '';
}

function getAvatar($data) {

    $data = explode('|',$data);
    $id = $data[0];

    return 'http://www.gravatar.com/avatar/'.md5($data[1]).'?d=wavatar&s=80';
}

function getTimeStamp() {
    return current_time('timestamp');
}

function processTime($time) {
    return $time;
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/* HOOKS */

function hooks_statusupdate($userid,$statusmessage) {

}

function hooks_forcefriends() {

}

function hooks_activityupdate($userid,$status) {

}

function hooks_message($userid,$unsanitizedmessage) {

}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// 
```

# eclipse - Eclipse hadoop mapreduce 插件不起作用？

> ID：15170975
> 
> 赞同：0
> 
> 时间：2013-03-02T05:09:09.550
> 
> 标签：eclipse, hadoop, eclipse-plugin, mapreduce

我刚刚复制`hadoop-eclipse-plugin-1.0.3.jar`到`eclipse/plugins`目录以使事情顺利进行。但不幸的是，它对我不起作用。当我尝试将 eclipse 连接到我的`Hadoop Version 1.1.1`集群时，它抛出了这个错误：

```
An internal error occurred during: "Map/Reduce location status updater".
org/codehaus/jackson/map/JsonMappingException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:49:42.083

您会收到此错误，因为 hadoop 发行版附带的插件中缺少一些 jar。您需要添加这些必需的 jar 并重新 jar 插件以使其工作。您可能会发现此[链接](http://cloudfront.blogspot.in/2012/07/how-to-run-mapreduce-programs-using.html#.UUtkPzWH6IQ)很有帮助，我已尝试在其中展示整个过程。

# c# - 将数据从行保存到数据库

> ID：15170977
> 
> 赞同：3
> 
> 时间：2013-03-02T05:09:16.467
> 
> 标签：c#, .net, winforms, datagridview

参考下面的代码：

```
void loadInstallMentPattern(System.Collections.ArrayList pattern)
    {
        dataGridView1.Rows.Clear();

        for (int i = 0; i < pattern.Count; i++)
        {
            int c = dataGridView1.Rows.Add();
            dataGridView1.Rows[c].Cells["gvcSNo"].Value = (i + 1).ToString();
            dataGridView1.Rows[c].Cells["gvcDueDate"].Value = ((InstallmentPatternStruct)pattern[i]).DueDate;
            dataGridView1.Rows[c].Cells["gvcAmount"].Value = ((InstallmentPatternStruct)pattern[i]).PrincipalAmt;
            dataGridView1.Rows[c].Cells["gvcInterestAmt"].Value = ((InstallmentPatternStruct)pattern[i]).InterestAmt;

            dataGridView1.Rows[c].Cells["gvcDebitAmt"].Value = ((InstallmentPatternStruct)pattern[i]).DebitPrincipalAmt;
            dataGridView1.Rows[c].Cells["gvcEMI"].Value = ((InstallmentPatternStruct)pattern[i]).EMI;
        }
    } 
```

我务实地向 DataGridView 添加了几行，这些行需要进一步发送到数据库以进行持久性。

目前我通过从网格中读取每一行然后将其发送到数据库来发送数据。这意味着如果我在 DataGridView 中有 500 行，那么我将不得不触发 500 个插入查询。

我想知道在 DataGRidView 没有数据绑定的情况下，是否有任何其他方式可以将数据发送到 db（批量）。

我希望我能够清楚地解释我的问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T05:19:59.957

可能有一种方法可以更接近 .NET 对象让您这样做的方式，但作为后备，总有一种方法，

```
INSERT INTO Table ( ColumnA, ColumnB ) 
VALUES ( ValueA1, ValueB1 ), ( ValueB2, ValueB2 ), ... ( ValueAn, ValueBn) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:29:43.363

好吧，我找到了解决问题的方法。我不知道为什么以前没有想到它，但迟早会来的！

我从填充 DataGridView 的列表中手动创建了一个 DataTable。然后我使用 SQLBulkCopy 将整个数据一次性发送到服务器。

这是我所做的代码：

```
 public static void saveAllotmentLeaseToDb(int allotmentId, System.Collections.Generic.List<LeasePatternStruct> arr)
    {

        DataTable dt = new DataTable();
        dt.Columns.Add("AllotmentID",Type.GetType("System.Int32"));
        dt.Columns.Add("LeaseNumber", Type.GetType( "System.Int32"));
        dt.Columns.Add("DueDate",Type.GetType("System.DateTime"));
        dt.Columns.Add("Amount",Type.GetType("System.Double"));
        dt.Columns.Add("Remarks",Type.GetType("System.String"));
        dt.Columns.Add("LeaseIncrementID",Type.GetType("System.Int32"));
        dt.Columns.Add("isPaid",Type.GetType("System.Boolean"));
        dt.Columns.Add("PaymentID", Type.GetType("System.Int32"));
        for (int i = 0; i < arr.Count; i++)
        {
            DataRow dr = dt.NewRow();
            dr["AllotmentID"] = allotmentId;
            dr["LeaseNumber"] = (i + 1).ToString();
            dr["DueDate"] = arr[i].DueDate;
            dr["Amount"] = arr[i].Amount;
            dr["Remarks"] = arr[i].Remarks;
            dr["LeaseIncrementID"] = DBNull.Value; ;
            dr["isPaid"] = false; ;
            dr["PaymentID"] = DBNull.Value; ;
            dt.Rows.Add(dr);

        }
        using (SqlConnection connection = dataHandler.getConnection())
        {
            connection.Open();

            //Open bulkcopy connection.
            using (SqlBulkCopy bulkcopy = new SqlBulkCopy(connection))
            {
                //Set destination table name
                //to table previously created.
                bulkcopy.DestinationTableName = "LottaryAllotment_Lease_Details";

                    bulkcopy.WriteToServer(dt);

                connection.Close();
            }

        }

    } 
```

# nosql - 使用 NoSQL 后端进行 UML 建模？

> ID：15170979
> 
> 赞同：1
> 
> 时间：2013-03-02T05:09:43.303
> 
> 标签：nosql, uml

是否有任何 UML 建模工具（如 Sparx Enterprise Architect）能够使用 NoSQL 后端进行存储（如 MongoDB、RavenDB 等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T17:09:47.400

据我所知，UML 工具的存储是：

*   企业架构师：Microsoft Access 数据库
*   NoMagic：压缩的 XML 文件 (XMI)
*   ArgoUML：压缩的 XML 文件
*   Rational Rose：花瓣格式的 ASCII 文件
*   Poseidon UML：压缩的 XML 文件 (XMI)
*   [伞](http://uml.sourceforge.net/%3a%20XML%20%28XMI%29%20file)：XML 文件 (XMI)

有关 UML 工具的更完整列表，请参见 [http://en.wikipedia.org/wiki/List_of_Unified_Modeling_Language_tools](http://en.wikipedia.org/wiki/List_of_Unified_Modeling_Language_tools)

据我所知，目前没有任何工具具有这样的 NoSQL 后端。一些工具开始具有 RESTful 接口，这可能是从 UML 到 NoSQL 的映射的开始：

随意编辑这篇文章以添加更多细节。我自己的公司 BITPlan 提供这些建模工具和格式之间的转换服务，如果您坚持使用 UML 的子集，我们很乐意为您提供 XMI 和 NoSQL DB 之间的转换格式。如果您对详细信息感兴趣，请给我发送个人信息。

# string - Perl 字符串到底是什么？

> ID：15170982
> 
> 赞同：9
> 
> 时间：2013-03-02T05:09:54.020
> 
> 标签：string, perl, decode

我找不到关于如何在 Perl 中存储字符串数据的基本描述！就像所有文档都假设我出于某种原因已经知道这一点。我知道 encode()、decode()，而且我知道我可以将原始字节读入 Perl“字符串”并再次输出它们，而无需 Perl 搞砸它们。我知道开放模式。我还收集到 Perl 必须使用一些内部格式来存储字符串，并且可以区分字符和二进制数据。请问这是在哪里记录的？？？

等效的问题是；给定这个 perl：

```
$x = decode($y); 
```

解码到什么和从什么？

据我所知，字符串数据结构上必须有一个标志，表示这是二进制 XOR 字符数据（BTW 是 Unicode 的超集的某种内部格式 - [http://perldoc.perl.org/Encode.html #描述](http://perldoc.perl.org/Encode.html#DESCRIPTION)）。但是，如果在文档中说明或在此处确认/不可信，我会喜欢它。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-02T06:04:25.947

这是一个很好的问题。[为了进行调查，我们可以通过使用Devel::Peek](http://metacpan.org/module/Devel::Peek)来更深入地了解我们的字符串（或其他变量）中实际存储的内容。

首先让我们从一个 ASCII 字符串开始

```
$ perl -MDevel::Peek -E 'Dump "string"'
SV = PV(0x9688158) at 0x969ac30
  REFCNT = 1
  FLAGS = (POK,READONLY,pPOK)
  PV = 0x969ea20 "string"\0
  CUR = 6
  LEN = 12 
```

然后我们可以打开unicode IO层并做同样的事情

```
$ perl -MDevel::Peek -CSAD -E 'Dump "string"'
SV = PV(0x9eea178) at 0x9efcce0
  REFCNT = 1
  FLAGS = (POK,READONLY,pPOK)
  PV = 0x9f0faf8 "string"\0
  CUR = 6
  LEN = 12 
```

从那里让我们尝试手动添加一些宽字符

```
$ perl -MDevel::Peek -CSAD -e 'Dump "string \x{2665}"'
SV = PV(0x9be1148) at 0x9bf3c08
  REFCNT = 1
  FLAGS = (POK,READONLY,pPOK,UTF8)
  PV = 0x9bf7178 "string \342\231\245"\0 [UTF8 "string \x{2665}"]
  CUR = 10
  LEN = 12 
```

从中可以清楚地看到 Perl 已将其正确解释为 utf8。问题是，如果我不使用`\x{}`转义来提供八位字节，则表示看起来更像是常规字符串

```
$ perl -MDevel::Peek -CSAD -E 'Dump "string ♥"'
SV = PV(0x9143058) at 0x9155cd0
  REFCNT = 1
  FLAGS = (POK,READONLY,pPOK)
  PV = 0x9168af8 "string \342\231\245"\0
  CUR = 10
  LEN = 12 
```

Perl 看到的只是字节，并且无法知道您的意思是它们是 unicode 字符，这与您在上面输入转义八位字节时不同。现在让我们使用`decode`看看会发生什么

```
$ perl -MDevel::Peek -CSAD -MEncode=decode -E 'Dump decode "utf8", "string ♥"'
SV = PV(0x8681100) at 0x8683068
  REFCNT = 1
  FLAGS = (TEMP,POK,pPOK,UTF8)
  PV = 0x869dbf0 "string \342\231\245"\0 [UTF8 "string \x{2665}"]
  CUR = 10
  LEN = 12 
```

TADA!，现在您可以看到字符串在内部正确表示，与您使用`\x{}`转义时输入的内容匹配。

实际的答案是它是从字节到字符的“解码”，但我认为当你看到 Peek 输出时它更有意义。

最后，您可以使用`utf8`pragma 让 Perl 将源代码视为 utf8，如下所示

```
$ perl -MDevel::Peek -CSAD -Mutf8 -E 'Dump "string ♥"'
SV = PV(0x8781170) at 0x8793d00
  REFCNT = 1
  FLAGS = (POK,READONLY,pPOK,UTF8)
  PV = 0x87973b8 "string \342\231\245"\0 [UTF8 "string \x{2665}"]
  CUR = 10
  LEN = 12 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-02T06:21:43.300

与其标量变量的流动字符串/数字状态不同，Perl 字符串的内部格式是可变的并且取决于字符串的内容。

看一下[`perluniintro`](http://perldoc.perl.org/perluniintro.html)，上面写着这个。

> 在内部，Perl 当前使用平台的本机 8 位字符集（例如 Latin-1）（默认为 UTF-8）来编码 Unicode 字符串。具体来说，如果字符串中的所有代码点都是 0xFF 或更小，Perl 使用本机 8 位字符集。否则，它使用 UTF-8。

这意味着像这样的字符串`"I have £ two"`存储为 (bytes) `I have \x{A3} two`。（井号是`U+00A3`。）现在，如果我附加一个多字节 unicode 字符串，例如`U+263A`- 一个笑脸 - Perl 将在附加新字符之前将整个字符串转换为 UTF-8，给出 (bytes) `I have \xC2\xA3 two\xE2\x98\xBA`。再次删除最后一个字符会使字符串 UTF-8 编码为``I have \xC2\xA3 two`.

但我想知道为什么你需要知道这一点。除非您使用 C 编写 XS 扩展，否则内部格式对您来说是透明且不可见的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T06:03:24.163

Perls 内部字符串格式取决于实现，但通常是 UtF-8 的超集。它是什么并不重要，因为您使用 decode 和 encode 将字符串转换为内部格式以及从内部格式转换为其他编码。

解码转换为 perls 内部格式，编码转换为 perls 内部格式。

二进制数据的内部存储方式与字符 0 到 255 的存储方式相同。

编码和解码只是在格式之间转换。例如，UTF8 编码意味着每个字符只能是使用 perl 字符 vlaues 0 到 255 的八位字节，即字符串由 UTF8 八位字节组成。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-02T06:20:59.877

简短的回答：一团糟
稍微长一点：程序员看不到差异。

基本上，您必须记住您的字符串是否包含字节或字符，其中字符是 unicode 代码点。如果只遇到ASCII，区别是看不到的，很危险。

数据本身和此类数据的表示是不同的，不应混淆。字符串（在概念上）是一系列代码点，但在内存中表示为字节数组，并在`encode`d. 如果要将二进制数据存储在字符串中，则将代码点的数量重新解释为字节值，并将自己限制在 0-255 之间的代码点。

（例如，一个文件没有编码。该文件中的信息有一些编码（在字符级别是 ASCII、UTF-16 或 EBCDIC，在应用程序级别是 Perl、HTML 或 .ini））

字符串的确切存储格式无关紧要，但您可以在这样的字符串中存储完整的整数：

```
# this will work if your perl was compiled with large integers
my $string = chr 2**64; # this is so not unicode
say ord $string; # 18446744073709551615 
```

内部格式会相应调整以适应这些值；普通字符串不会占用每个字符一个整数。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-02T05:15:33.313

Perl 可以处理比 Unicode 更多的东西，所以它非常灵活。有时您想与无法连接的东西进行交互，因此您可以使用 encode(...) 和 decode(...) 处理这些转换。见[http://perldoc.perl.org/utf8.html](http://perldoc.perl.org/utf8.html)

# ios - 如何将内存中的核心数据存储转储到 NSData 对象？

> ID：15170983
> 
> 赞同：-1
> 
> 时间：2013-03-02T05:09:57.757
> 
> 标签：ios, core-data

我觉得标题已经够清楚了。如何将内存中的核心数据存储转储到 NSData 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T05:50:28.407

我不确定你的标题在哪里，但这是你要找的：

```
- (NSPersistentStore *)migratePersistentStore:(NSPersistentStore *)store   
                                        toURL:(NSURL *)URL 
                                      options:(NSDictionary *)options 
                                     withType:(NSString *)storeType 
                                        error:(NSError **)error 
```

[NSPersistentStoreCoordinator](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSPersistentStoreCoordinator_Class/NSPersistentStoreCoordinator.html)
中的参考 有了它，您可以将商店的格式更改为`NSSQLiteStoreType`或`NSBinaryStoreType`这样您就可以“持久化”它。
我认为这就是你想要一个 NSData 的原因。

# java - Write JTable Contents to Text File While Keeping its Format In Java

> ID：15170989
> 
> 赞同：-1
> 
> 时间：2013-03-02T05:11:38.317
> 
> 标签：java, swing, file, jtable

I have a Jtable which displays the following when triggered.

![Jtable](../Images/9758bd0bac73dda4fcb96a6c3b2dca23.png)

How can I write all the contents of it to a Text File while keeping its original format. The Text File should look something like this.

```
Line Number    Error   Solution Percentage(%)
 6               in     int       33% 
```

This is what I tried so far. But only value 6 is being written to the file. Any Help.

My codes(only the main parts):

```
private static final String[] columnNames = {"Line Number", "Error","Solution","Percentage (%)"};
static DefaultTableModel model = new DefaultTableModel(null,columnNames);
public static void DisplayMyJList(List<CaptureErrors> x) throws IOException
{
    String [] myErrorDetails = new String[x.size()];
    int i = 0;
    int line,percentage;
    String err, sol;
    String aLine;
    StringBuffer fileContent = new StringBuffer();
    for(CaptureErrors e: x)
    {
        Vector row = new Vector();
          row.add(e.getLinenumber());
          row.add(e.getMyfounderror());
          row.add(e.getMycorrection());
          row.add(e.getMyPercentage()+"%");
          model.addRow( row );
          for (int i1 = 0; i1 < model.getRowCount(); i1++) {

                Object cellValue = model.getValueAt(i1, 0);
                // ... continue to read each cell in a row
                fileContent.append(cellValue);
                // ... continue to append each cell value

            FileWriter fileWriter = new FileWriter(new File("C:\\Users\\Antish\\Desktop\\data.txt"));
            fileWriter.write(fileContent.toString());
            fileWriter.flush();
            fileWriter.close();

    } 
```

**Update I tried this with 2 loops and it gives me the following. I lost the original Format:**

Code:

```
String separator = System.getProperty( "line.separator" );

    try
      {
            BufferedWriter bufferedWriter = new BufferedWriter(new FileWriter(file,true));
            PrintWriter fileWriter = new PrintWriter(bufferedWriter);

            for(int i1=0; i1<model.getRowCount(); ++i1)
            {
                  for(int j=0; j<model.getColumnCount(); ++j)
                  {     String names = columnNames[counter];
                        String s = model.getValueAt(i1,j).toString();

                        fileWriter.print(names +"    ");
                        fileWriter.append( separator );
                        fileWriter.print(s + "    ");
                        counter ++;
                  }
                  fileWriter.println("");
            }      
            fileWriter.close();

      }catch(Exception e)
      { 
```

![enter image description here](../Images/237d557fa3aa8a8547b19a87b2bd009d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T05:36:44.387

Your code isn't complete but I can see 1, maybe 2 errors:

1) You need a double loop, one for the rows and then a second for every column in the row. The code you posted only shows you getting the value from the first column which would explain why you only see "6".

2) The code to write to the file needs to be outside your two loops. The way the code is written now you will recreate a new file for every row, which mean you will only ever have a single row of data in the file

# html - HTML + CSS - 标题标志的方式？

> ID：15170992
> 
> 赞同：1
> 
> 时间：2013-03-02T05:11:56.013
> 
> 标签：html, css, graphical-logo

所以我正在尝试制作这些网格，它应该适合。

*   内容 = 960px 宽度
*   网格 1 = 300 像素

960/3 = 3，剩余 60 像素。所以我为每个添加了 10px 的边距，在每个之间创建了 20px 的边距，使其成为 60px 的边距。

好吧，它不是每行 3 列。看：

*   [http://gyazo.com/5fd8e890a741a9b7977f5762dd9c8a79](http://gyazo.com/5fd8e890a741a9b7977f5762dd9c8a79)

### 代码 - CSS

```
.grid1, .grid2, .grid3 {
float: left;
margin: 10px;} 

.grid1 {width:300px;} 
```

所以我把宽度设为 250px 来看看，现在看看：

*   [http://gyazo.com/4c76187396d52cfdaa287e3577972fdd](http://gyazo.com/4c76187396d52cfdaa287e3577972fdd)

所以它看起来好像标志正在向下延伸（标志是 h1）：

### 标志代码 - CSS

```
h1 { font-size: 48px; }
.orangeText {
color: #d5a72b;
}

.bigShadow { text-shadow: 1px 1px 3px #000; }
.logo { float: left; } 
```

# linq - 将 system.collection.generic.list 转换为列表

> ID：15170995
> 
> 赞同：0
> 
> 时间：2013-03-02T05:12:01.907
> 
> 标签：linq, c#-4.0, xml-parsing, linq-to-xml

我正在使用 linq 代码解析 XML 文件。这是我的代码。我想要绑定细节和图像是列表。

```
XmlSerializer serializer = new XmlSerializer(typeof(Notchs));
      XDocument xmlDoc = XDocument.Parse(dataInXmlFile);
      Notchs notchs = (Notchs)serializer.Deserialize(xmlDoc.CreateReader());

      var query = from l in xmlDoc.Descendants("Category")
            select new Notch
            {
               name = (string)l.Attribute("name").Value,
               Titles = l.Element("Articles").Elements("article")
                         .Select(s => s.Attribute("title").ToString())
                         .ToList(),

               Image = l.Element("Articles").Elements("article").Elements("thumb_image").Elements("image")
                        .Select(x => x.Attribute("url").ToString()).ToList()
            };

      foreach (var result in query)
      {
          Console.WriteLine(result.name);
          foreach (var detail in result.Titles)
          {
              Console.WriteLine(detail);
          }
      }

      NotchsList.ItemsSource = query.ToList(); 
```

我尝试了这段代码，但我得到了如下所示的输出..但我想要详细信息和图像是列表。

```
 name

  System.Collection.Generic.List'1[string.system]

  name

  System.Collection.Generic.List'1[string.system] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:19:51.407

我认为你的

```
Titles = l.Element("Articles").Elements("article")
                                   .Select(s => s.Attribute("title").ToString())
                                   .ToList() 
```

正在返回一个`IEnumerable<IEnumerable<String>>`. 您可能想做 a`.SelectMany`而不是`.Select`.

# iphone - 在 Iphone 中的“https://path.com/”和“linkedin”上发布消息

> ID：15170997
> 
> 赞同：0
> 
> 时间：2013-03-02T05:12:40.170
> 
> 标签：iphone, ios, ios6, linkedin

我可以在以下社交网站上发布我的应用程序中的消息吗？

1)" [https://path.com/](https://path.com/) "
2) "linkedin"

我参考了这个链接。

[http://developer.linkedin.com/thread/1169](http://developer.linkedin.com/thread/1169)

[http://service.path.com/](http://service.path.com/)

[如何将 LinkedIn 集成到 iPhone 应用程序中？](https://stackoverflow.com/questions/2085048/how-can-i-integrate-linkedin-within-an-iphone-application)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T05:19:59.443

对于链接集成，您可以使用[此库](https://github.com/ResultsDirect/LinkedIn-iPhone)

# java - Java二叉搜索树删除没有子节点的节点

> ID：15170999
> 
> 赞同：1
> 
> 时间：2013-03-02T05:13:20.363
> 
> 标签：java, binary-search-tree

我正在处理要删除的节点是节点的情况。我不确定是否需要跟踪父节点，以便在找到要删除的节点时将其父节点指针设置为空。但是那我怎么知道要删除的节点是哪个子节点呢？我需要更多 if 语句吗？

任何帮助表示赞赏，我觉得它并不太复杂，但我只是对如何真正摆脱节点感到困惑。

这是我到目前为止所拥有的：

```
public void insert(E s) 
{
    root = insert(s, root);
} 

private Node<E> insert(E s, Node<E> T)
{
    //easiest case, empty tree, create new tree
    if(T == null)
    {
        T = new Node<E>(s);
    }
    //easiest case, found s
    else if(s.compareTo(T.getData()) == 0)
    {
        System.out.println("Item already present.");
    }
    //s is greater than T, insert on right subtree
    else if(s.compareTo(T.getData()) > 0)
    {
        T.setRight(insert(s, T.getRight()));
    }
    //s is less than T, insert on left subtree
    else
    {
        T.setLeft(insert(s,T.getLeft()));
    }
    return T;
}

public void delete(E d)
{
    delete( d, root);
}

private void delete( E d, Node<E> T)
{

    if(T == null)
    {

    }
    else if(d.equals(T.getData()))
    {
        System.out.println("it found the node at least");
        if(T.getRight() == null && T.getLeft() == null)
        {

        }
        //code other cases for a node with one child and node with two      children
    }
    else if(d.compareTo(T.getData()) > 0)
    {
        System.out.println("going right");
        delete(d, T.getRight());
    }
    //s is less than T, insert on left subtree
    else
    {System.out.println("going left");
        delete(d,T.getLeft());
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:40:29.990

```
public Node<E> search(Node<E> node, E d)
{
    while(node!=null && ((node.getLeft()!=null && !node.getLeft().getData().equals(d)) || (node.getRight()!=null && !node.getRight().getData().equals(d)))
    {
        if(d.compareTo(node.getData()) < 0)
        {
            node = node.getLeft();
        }
        else
        {
            node = node.getRight();
        }
    }

    return node;
}

private void delete(E d)
{
    // Search the node
    Node parent = search(root, d);

    // parent is the parent node under which the required node is present
    // Now check which child it is - left or right
    if(parent == null)
    {
         System.out.println("Element not found");
         return;
    }

    if(parent.getLeft().getData().equals(d))
    {
        // Left child
        parent.setLeft(null);
    }
    else
    {
        // Right child
        parent.setRight(null);
    }
} 
```

**注意：**如果你有`parent`节点，`Node<E>`那么它会很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:44:56.437

如果您不想更改节点结构，请在遍历树时跟踪父节点。

```
private Node<E> parent;
public void insert(E s) 
{
    root = insert(s, root);
} 

private Node<E> insert(E s, Node<E> T)
{
    //easiest case, empty tree, create new tree
    if(T == null)
    {
        T = new Node<E>(s);
    }
    //easiest case, found s
    else if(s.compareTo(T.getData()) == 0)
    {
        System.out.println("Item already present.");
    }
    //s is greater than T, insert on right subtree
    else if(s.compareTo(T.getData()) > 0)
    {
        T.setRight(insert(s, T.getRight()));
    }
    //s is less than T, insert on left subtree
    else
    {
        T.setLeft(insert(s,T.getLeft()));
    }
    return T;
}

public void delete(E d)
{
    delete( d, root);
}

private void delete( E d, Node<E> T)
{

    if(T == null)
    {

    }
    else if(d.equals(T.getData()))
    {
        System.out.println("it found the node at least");
        if(T.getRight() == null && T.getLeft() == null)
        {
             if (parent != null){//For the first node, parent will be null
                  if (d.equals(parent.getRight().getData())){//Data matches with the right node of parent
                       parent.setRight(null);
                  }else{//Data matches with the left node of parent
                       parent.setLeft(null);
                  }
                  //Reset parent node
                  parent = null;
             }
        }
        //code other cases for a node with one child and node with two      children
    }
    else if(d.compareTo(T.getData()) > 0)
    {
        parent = T;// Make the current node as parent
        System.out.println("going right");
        delete(d, T.getRight());
    }
    //s is less than T, insert on left subtree
    else
    {
        parent = T;// Make the current node as parent
        System.out.println("going left");
        delete(d,T.getLeft());
    }

} 
```