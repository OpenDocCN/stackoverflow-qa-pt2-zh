# StackOverflow 问答 13274000-13274999

# c# - 有没有办法让 IIS 默认文档 (default.asp) 优先于 .Net 路由？

> ID：13274000
> 
> 赞同：1
> 
> 时间：2012-11-07T16:30:52.907
> 
> 标签：c#, asp-classic, routing, iis-7.5, webmatrix

我正在尝试将站点从经典 ASP 迁移到 .Net（使用 WebMatrix）。我计划将新的 .cshmtl 页面与旧的 .asp 文件混合，并随着时间的推移慢慢迁移站点。迄今为止，我对每条内容（每个 url）都有单独的 .asp 页面。当我转向 .Net 时，内容将来自数据库，因此每个 url 不会有特定的页面。我喜欢 .Net 中可用的路由的强大功能，它运行良好，并且与经典 ASP 配合得很好，到目前为止有一个例外。

我的示例是我有一个位于 /crafts/default.asp 的 ASP 页面，并且目前在任何地方都将其引用为 /crafts/。当我只引用 /crafts/ 时，IIS 默认文档设置负责为 default.asp 页面提供服务。我想开始将新项目发布到网站的这个区域，但作为 .Net 页面运行。所以我创建了一个 /crafts.c​​shtml 页面，该页面旨在处理不同的 url 并转到数据库并查找项目并显示信息。举个例子，我在 /crafts/fall-crafts.asp 有一个旧页面，这很好用 - 因为有一个 .asp 页面坐在那里命名。但是当我引用 /crafts/ 时，.Net 接管并提供 /crafts.c​​shtml 页面，而不是提供 /crafts/default.asp 文件。我可以做些什么来保持 .Net 路由的强大功能，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:34:34.757

修改您的 RouteConfig

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("crafts/");
        ... 
```

有关文档，请参阅[RouteCollection.Ignore](http://msdn.microsoft.com/en-us/library/dd784609.aspx)。

类似的问题（提到了一些其他可能需要的解决方法）：[Ignore folder in ASP .NET MVC](https://stackoverflow.com/questions/5362925/ignore-folder-in-asp-net-mvc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:18:52.740

Web Pages 框架中内置的默认“路由”依赖于将传入的 URL 与磁盘上的物理文件相匹配，首先查找 cshtml 或 vbhtml 文件的存在。只要您有一个与名为 crafts 的文件夹处于同一级别的 crafts.c​​shtml 文件，就会首先提供该文件。解决方案是删除或重命名您的 crafts.c​​shtml 文件，但目前这会弄乱您的 URL。

有一个包可以更好地管理网页应用程序中的路由。它被称为网页路由。它允许您将 URL 路由到您喜欢的任何文件名。您可以通过包管理器或 Nuget 下载它并阅读我整理的这篇文章，解释如何使用它： http: [//www.mikesdotnetting.com/Article/187/More-Flexible-Routing-For-ASP.NET -网页](http://www.mikesdotnetting.com/Article/187/More-Flexible-Routing-For-ASP.NET-Web-Pages)。

# javascript - 在 ASP.NET 中将文件路径列表转换为 JSON 树

> ID：13274003
> 
> 赞同：0
> 
> 时间：2012-11-07T16:31:00.363
> 
> 标签：javascript, asp.net, .net, json, extjs

我有一个与 Amazon S3 Web 服务交互的 NET 后端。我在前端使用 Javascript 库 (ExtJs) 来尝试创建文件浏览器。为了做到这一点，我必须转换亚马逊中的所有文件路径，比如

Directory1/SubDirectory1/File.txt

Directory1/SubDirectory2/File2.txt

Directory2/SubDirectory3/File3.txt

到一个像这样的 JSON 树：

```
 root: {
        expanded: true,
        children: [
            { text: "Directory1", expanded: true, children: [
                { text: "SubDirectory1", children: [
                  {text:"File.txt", leaf: true }
                  ]
                },
                { text: "SubDirectory2",children: [
                  {text: "File2.txt"",leaf: true}
                 ]
               } 
            ] },
            { text: "Director2", expanded: true, children:[
                 {text:"SubDirectory3",children: [
                   {text:"File3.txt",leaf: true}
                     ]
                  }
             ]
             }
    } 
```

任何人都知道在 .NET 中执行此操作的好方法吗？无论如何，我能想到的似乎非常容易出错或非常低效。

# .net - .NET SmtpClient：有没有办法确保在发送 MailMessage 之前解析所有电子邮件？

> ID：13274005
> 
> 赞同：6
> 
> 时间：2012-11-07T16:31:13.843
> 
> 标签：.net, smtpclient, resolve, mailmessage, email-address

我正在使用 SmtpClient 向多个收件人发送电子邮件。随着员工离开公司，他们的电子邮件地址变得无效。由于他们的电子邮件地址保留在我们的数据库中，直到手动删除，尝试向他们发送电子邮件会导致我们的应用程序在`SmtpClient.Send(MailMessage)`. 但是，尽管抛出异常，它仍然会发送电子邮件。这是一个问题，因为我们想通过阻止用户尝试保存记录并显示友好的消息来建议从数据库中删除任何无效关联来处理此错误。

如果有一种方法可以遍历所有配方以确保它们都是有效的，我们可以阻止所有电子邮件发送，直到用户满足一组条件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-01T20:01:24.957

这是一个很老的问题，我不知道你是否解决了它。

根据 MSDN： http: [//msdn.microsoft.com/en-us/library/swas0fwc (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/swas0fwc(v=vs.100).aspx)

> *当使用Send*向多个收件人发送电子邮件并且 SMTP 服务器接受某些收件人为有效收件人并拒绝其他收件人时，*Send*会向接受的收件人发送电子邮件，然后 引发***SmtpFailedRecipientsException***。例外将包含被拒绝的收件人列表。

这是从 MSDN 中捕获此异常的示例：

```
try {
    client.Send(message);
}
catch (SmtpFailedRecipientsException ex) {
    for (int i = 0; i < ex.InnerExceptions.Length; i++) {
        SmtpStatusCode status = ex.InnerExceptions[i].StatusCode;
        if (status == SmtpStatusCode.MailboxBusy || status == SmtpStatusCode.MailboxUnavailable) {
            Console.WriteLine("Delivery failed - retrying in 5 seconds.");
            System.Threading.Thread.Sleep(5000);
            client.Send(message);
        } 
        else {
            Console.WriteLine("Failed to deliver message to {0}", ex.InnerExceptions[i].FailedRecipient);
        }
    }
} 
```

此处的完整示例：http: [//msdn.microsoft.com/en-us/library/system.net.mail.smtpfailedrecipientsexception.aspx ?cs-save-lang=1&cs-lang=csharp#code-snippet-2](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpfailedrecipientsexception.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2)

在内部，`Send`使用`statuscode`从`RCPT TO`命令返回的来引发适当的异常。

检查方法中`PrepareCommand`的实现（此方法由内部调用）。它用于获取然后在方法中解析的，并因此引发。但是，VRFY 和 RCPT 都不是很可靠，因为邮件服务器往往会延迟（限制 NDR）或吞下响应作为反垃圾邮件的措施。`RecipientCommand.Send``smtpTransport.SendMail``SmtpClient.Send``RCPT TO``StatusCode``CheckResponse``SmtpFailedRecipientsException`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-05T23:08:13.813

请看以下内容：[如何在不发送电子邮件的情况下检查电子邮件地址是否存在？](https://stackoverflow.com/questions/565504/how-to-check-if-an-email-address-exists-without-sending-an-email)

您要做的是在继续发送之前检查电子邮件是否存在。

因此，如链接答案中所述，请尝试查看您的公司邮件服务器是否支持`VRFY`或`RCPT`受支持。

**报价：**

> 您可以连接到服务器，并发出 VRFY 命令。很少有服务器支持此命令，但它正是为此而设计的。如果服务器以 2.0.0 DSN 响应，则用户存在。
> 
> VRFY 用户
> 
> 您可以发出 RCPT，并查看邮件是否被拒绝。
> 
> 发件人：<>
> 
> RCPT 至：

# jquery - 从数据库中获取内容后，如何在 jquery mobile 中创建可折叠的动态内容？

> ID：13274007
> 
> 赞同：2
> 
> 时间：2012-11-07T16:31:21.393
> 
> 标签：jquery

我在数据库中有一些值。我想基于它构建一个可折叠的列表视图。如何通过添加所有 CSS 属性来做列表视图？请回答我的疑问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:47:27.603

你的实现的更多细节可能是一个很好的奖励:)

但如果我理解正确，你可以这样做，基于 jQuery Mobile 文档：http:
[//jquerymobile.com/demos/1.2.0/docs/lists/docs-lists.html](http://jquerymobile.com/demos/1.2.0/docs/lists/docs-lists.html)

```
// This is your HTML list
<ul data-role="listview">
    <li><a href="acura.html">Acura</a></li>
    <li><a href="audi.html">Audi</a></li>
    <li><a href="bmw.html">BMW</a></li>
</ul>

// This is where you fetch data from database and add them to list
function addToList (listId) {
    var list = document.getElementById(listId);

    // Iterate over items found in database here and add them to DOM
    for ( var i = 0 ; i < dataSource.length ; i += 1 ) {
        liElem = document.createElement('li');
        liElem.textContent = dataSource[i];
        list.appendChild(liElem);
    }
    // Refresh the list
    $(list).listview('refresh');
} 
```

**简单演示：http:**
[//jsfiddle.net/dR7fx/1/](http://jsfiddle.net/dR7fx/1/)

# birt - 加入分组表

> ID：13274012
> 
> 赞同：0
> 
> 时间：2012-11-07T16:31:28.833
> 
> 标签：birt

我有两个不同的脚本数据集，我从中提取数据并进行聚合（在同一个键上）。我想要做的是一行一行地显示来自两个来源的聚合数据。数据来自脚本数据源 (POJO)。

下面给出了一个简化示例，其中一个订单包含许多组件，每个组件以不同的报价为不同的客户提供。然后当每个订单以不同的价格以不同的手数（或填充）填写时。我希望能够生成每个订单的摘要，其中包含已订购和已完成的总数量，以及加权平均报价和已完成价格。

订单组件表

```
Order ID, Customer Num, Qty, Quoted Px 
Ord01,Cust01,3,100
Ord01,Cust02,3,102 
Ord02,Cust01,5,200 
Ord02,Cust03,5,204 
```

然后是 Order Fullfillment 表

```
OrderID,FillId,Qty,CostPx 
Ord01,F01,4,100 
Ord01,F02,2,106 
Ord02,F03,2,200
Ord02,F04,8,210' 
```

我想显示如下内容：

```
Order ID, Order Qty, Fill Qty, Avg Order Px, Avg Fill Px
Ord01, 6, 6, 101, 102
Ord02, 10, 10, 202, 208 
```

我尝试过使用子报告，这似乎可以让我得到结果，但格式很糟糕。子表标题重复，因此每个订单都有自己的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:30:39.077

您可能希望基于“订单 ID”列上的完全外连接在两个脚本数据集之间创建一个 BIRT 连接数据集，然后在报表中使用此连接数据集。它应该满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:44:47.290

我或多或少地按照以下[指南](http://publib.boulder.ibm.com/infocenter/rdahelp/v7r5/index.jsp?topic=/org.eclipse.birt.doc/birt/subreport.13.11.html)解决了我的问题。

所以我创建了一个链接到我的第一个数据源的列表。然后，我在订单 ID 上添加了一个组，以便每个订单都有一个列表行。在组标题中，我添加了一个 2x1 网格，我在网格的一侧放置了一个订单组件表，在另一侧放置了一个填充表。我必须为这两个添加过滤器，以便它们只包含正确 OrderId 的数据。然后我按 OrderId 对表进行分组，添加了我的聚合字段。

剩下的就是设置可见性。所以我将表详细信息的可见性设置为 false。为了只显示一次表头（而不是每个订单一次），我在列表中添加了一个 Running Count 聚合，并在此聚合大于 1 时将可见性设置为不可见。

最后实际上很容易，但我花了很长时间才弄清楚如何去做。

# apache-flex - 从视频显示中捕获一系列位图数据

> ID：13274027
> 
> 赞同：0
> 
> 时间：2012-11-07T16:32:45.430
> 
> 标签：apache-flex, actionscript, flex4

没有录制视频，我想从视频显示中保存一堆帧。我知道如何从视频显示中抓取照片，但我更关心如何抓取一系列位图数据对象以形成一个小视频剪辑。我可以做一个循环并捕获一堆位图数据，但这是正确的方法还有更好的方法吗？恐怕我可能会将应用程序锁定为停止。我对录制flv不是很感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:04:40.337

通过阅读 FLVRecorder (code.google) 的代码找到了一些答案

# coldfusion - Coldfusion onRequestEnd 处理程序可以读取或写入客户端绑定的响应流吗？

> ID：13274031
> 
> 赞同：2
> 
> 时间：2012-11-07T16:33:00.703
> 
> 标签：coldfusion

给定一个 Coldfusion 页面生成一些内容（html、xml、json 等）来满足客户端请求，onRequestEnd 处理程序可以读取（或写入）响应流中的内容吗？如果是这样，怎么做？

如果重要的话，假设 IIS 6 上的 Coldfusion 8。

感谢您寻找
阿德里安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:42:49.303

GetPageContext().getCFOutput() 似乎可以满足我的需要，例如

```
<cfset oldContent = GetPageContext().getCFOutput().getString()>
<cfset GetPageContext().getCFOutput().clearBuffer()>

<cfset newContent = ModifyContent(oldContent)>
<cfset GetPageContext().getCFOutput().print(newContent)> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:25:23.487

是的，根据文档：[ColdFusion 8 onRequestEnd](http://livedocs.adobe.com/coldfusion/8/htmldocs/AppEvents_09.html)

> 此方法与 onRequestEnd.cfm 页面的目的相同。（如果您的应用程序有 Application.cfc 文件，则不能使用 onRequestEnd.cfm 页面。）**此方法在请求终止之前运行；因此，它可以访问页面上下文，并可以生成输出。**
> 
> 仅当 Application.cfc 文件包含调用页面的 onRequest 方法时，此方法才能访问所请求页面的变量范围。即使 Application.cfc 文件没有 onRequest 方法，您也可以使用请求范围变量与请求的页面共享数据。

# matlab - 如何解决错误“矩形空矩阵分配不当”？

> ID：13274032
> 
> 赞同：0
> 
> 时间：2012-11-07T16:33:01.967
> 
> 标签：matlab, matrix

我写了这个乱七八糟的代码。当我使用 function 运行代码的第一部分时`daa`，有时会产生结果，但有时会产生错误消息。有没有人有一些想法如何纠正它？

> 矩形空矩阵分配不当。错误`daa`（第 26 行） `favoritec(i)=find(sPref(i,:)==bestmatch(i));`

当我增加和的维度时，这尤其是一个`n`问题`m`

这是代码

```
clear all;
n=4;
m=2;
Q=[1;1];
sPref=zeros(n,m);
cPref=zeros(m,n);
for i=1:n
sPref(i,:)=randperm(m);
end
for j=1:m
cPref(j,:)=randperm(n);
end
match=daa(sPref,cPref,Q) 
```

那么函数daa定义如下：

```
function match=daa(sPref,cPref,Q)
proposition=false(size(sPref));    % keep track who has proposed to which. False= not proposed yet
match=zeros(length(sPref),1);
favoritec=zeros(length(sPref),1);
numberS=zeros(size(cPref,1),1);
bestmatch=zeros(length(sPref),1);
iter=0;
 while (min(match)==0)      % as long as there is one unmatched, continues the loop (except the break)
iter=iter+1;

app=find(match==0);
for i=app(1:end)'
    notProposed=(proposition(i,:)==false);
    bestmatch(i)=min(sPref(i,notProposed));
    favoritec(i)=find(sPref(i,:)==bestmatch(i));
    numberS(favoritec(i))= numberS(favoritec(i))+1;    % keep track of the no.of applicants
    proposition(i,bestmatch(i))=1;   % propsed to college j finishes,either reject or accept
end

% college deciding...
for j=1:size(cPref,1)
    S_comp=find(favoritec==j);   % find the students competing for the same Favoritec
    if numberS(j) <=Q(j)       % sum of students at the college smaller or equal than quota
    match(S_comp)=favoritec(S_comp);               % accept tentative offer
    numberS(j)=sum(match==j);
    sPref(S_comp,j)=NaN;
    else 
        noapl=setxor(1:length(cPref),S_comp);
        cPreft=cPref(j,:);          % truncated pref,change the pref of those who didn't apply to NaN
        cPreft(noapl)=NaN;           
        [r,I]=sort(cPreft);    
        topq=I(1:Q(j));                    % college takes the top quota q students
        match(S_comp)=0;                           % clean the previous assignment
        match(topq)= favoritec(topq);
        numberS(favoritec)=Q(j);
        rejapp=setxor(S_comp,topq);     % the students who got rejected
        sPref(rejapp,j)=NaN;
    end
    %display(match);
end
%% if all choices have proposed, then stop
 if proposition(i,:)==true;
        display('already proposed to every college')
        display(i)
        break
 end
 end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T20:36:02.850

# 背景

我相信“矩形空矩阵分配不当”意味着您尝试将矩形空矩阵分配给标量位置。矩形空矩阵是显示为“空矩阵：0×1”的矩阵。生成这样一个矩阵的一种方法是`find`对一个全部为假的矩阵或本身是一个矩形空矩阵的矩阵执行 a。

# 回答

在您的代码中，出现此错误是因为没有 sPref(i,:)==bestmatch(i) 的实例。

如果你输入

```
rng(1237) 
```

然后执行你的代码（没有全部清除）。您可以重现该错误。

查看调用 daa 之前的变量，您会发现它`daa([2, 1; 2, 1; 1, 2; 2, 1], [2, 1, 3, 4; 4, 2, 1, 3], [1;1])`失败了。另一个断点揭示了这一点`sPref(1,:) = [2,NaN]`，事实就是如此`notProposed=[false, true]`——它永远不等于任何东西。这表明错误可能在于您在下一节中分配的方式。`bestmatch(1)``NaN``NaNs``sPref`

您需要自己找到该错误。但这应该可以回答您关于“分配不当”错误的问题。

# 不请自来的建议

*   这个问题应该标记为“matlab”。使用您遇到问题的主要工具或语言标记您的帖子，以便合适的人阅读它。

*   A short set of steps to reproduce makes it much easier to answer your question. It would have been better to try a few seed values to `rng` and include the `daa` function call than the large set of steps with random numbers.

# pointers - 使用malloc时指针错误？

> ID：13274039
> 
> 赞同：1
> 
> 时间：2012-11-07T16:33:30.203
> 
> 标签：pointers, char, malloc, strlen

我正在尝试以下操作：

```
int length = strlen(input)+1;
char * toCrypt = (char*)malloc(length); 
```

其中输入是一些字符串。奇怪的是，有时这确实有效，有时 toCrypt 给出了一个错误的指针......解决方案？

# css - IE9 无法加载 CSS 字体

> ID：13274040
> 
> 赞同：4
> 
> 时间：2012-11-07T16:33:31.323
> 
> 标签：css, internet-explorer-9, webfonts, internet-explorer-10

我遇到了@font-face 字体无法在 IE9 中加载的问题。IE8 及以下版本完美运行，我尝试过的所有其他浏览器也是如此。这是我的 CSS（字体松鼠语法）：

```
@font-face {
 font-family: 'ssmicon';
 src: url('ssmfont3.eot');
 src: url('ssmfont3.eot?#iefix') format('embedded-opentype'),
  url('ssmfont3.woff') format('woff'),
  url('ssmfont.ttf') format('truetype'),
  url('ssmfont.svg#svgssmfont') format('svg');
 font-weight: normal;
 font-style: normal;
} 
```

所有字形都在基本拉丁语范围内（我在某处读到 IE 可能有问题）并且在同一台服务器上（所以没有跨域问题）。我已将 Access-Control-Allow-Origin 设置为 * 以防万一。仍然没有成功（至少不是根据[http://netrenderer.com/](http://netrenderer.com/)。不幸的是，我目前无法访问 IE 浏览器）。这是一个受影响的页面：http: [//xn--ssongsmat-v2a.nu/ssm/Test3](http://xn--ssongsmat-v2a.nu/ssm/Test3)

关于网络字体，IE9/10 可能有什么其他想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T15:58:50.317

毕竟这是一个缩小问题。似乎 IE9 和 IE10 对在某些地方保留换行符非常挑剔，因此字体声明必须远离所有缩小。

# xamarin.ios - 以编程方式更改 Monotouch 应用程序中的选项卡

> ID：13274044
> 
> 赞同：3
> 
> 时间：2012-11-07T16:33:41.497
> 
> 标签：xamarin.ios, uitabbarcontroller

请原谅我的无知，因为我是 Monotouch 的新手，我确信这是一件简单的事情，但我无法在任何地方找到答案。

我在 Monotouch 中有一个 iPhone 应用程序，它使用 UITabBarController 进行根导航。它在它自己的类文件中定义。每个选项卡的内容还有一个单独的视图控制器类文件。所以 tab1 显示 viewcontroller1，tab2 显示 viewcontroller2，等等。

我希望用户能够单击 viewcontroller1 内的 button1 并让应用程序将它们带到 tab2 并显示 viewcontroller2。

我为单击 button1 处理了一个事件，并且我可以在单击它时执行诸如弹出警报之类的操作，但是我不知道如何使标签栏可以访问以供我调用。请帮忙！

编辑：我不仅需要知道如何使它可以访问，而且我也不知道调用什么方法来改变它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:37:49.273

当您创建“子”视图控制器时，请传入对“父”选项卡控制器的引用。然后你的孩子可以在它的父级上调用一个方法来更新当前的标签索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:53:21.420

就像是

```
btn1.TouchUpInside += (sender, args) => TabBarController.SelectedIndex = 0 ; 
```

# api - Shopify 使用购物车 Cookie 跟踪购物车 ID

> ID：13274048
> 
> 赞同：0
> 
> 时间：2012-11-07T16:33:55.113
> 
> 标签：api, cookies, shopify, cart

*这是从shopify api论坛交叉发布的-*

我有一个应用程序，它依赖于在创建购物车订单时识别它，然后将该 ID 与进来的任何订单匹配（假设购物车最终成为订单）。根据@HunkyBill 的建议，这是通过阅读“购物车”cookie 来完成的。这确实有效，但是它似乎是一种脆弱的方式来做一些看起来应该用购物车对象完成的事情。我有两个问题：

**如果用户关闭了 cookie 会发生什么（有没有办法在购物车仍然是购物车时访问购物车 id.. 预购）？**

和

**是否可以简单地将 CartId 作为变量添加到购物车对象？**

每个其他对象都有自己的 id，可以通过 Liquid 访问……每一个。除了购物车对象，它是唯一直接链接到另一个对象 Order 的对象。我完全理解 Shopify 可能需要一个 cookie 变量来执行它的某些功能——我不建议以任何方式修改该过程。但是，将购物车 ID 添加到购物车对象将解决所有这些问题（对于应用程序开发人员），并提供一种简单的方法来将购物车活动与转换后的订单对齐。它也不会影响已经使用购物车 cookie 构建的任何产品。

如果有更好的解决方案/技术来识别购物车，然后将其与订单相关联，我会全力以赴。我有点惊讶的是，这个关键功能（本质上是跟踪转换）没有以更健壮和一致的方式处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T19:45:43.230

如果用户关闭了 cookie，那么无论如何你都会被淹没。如果没有 cookie 中的会话 ID，他们将无法构建购物车。

对于购物车：您是对的，在前端，液体购物车对象不包含令牌。它只能通过 cookie 获得。

省略的原因有两个：

*   首先，当时只有一个购物车在视图中处于活动状态，因此在渲染页面时无需区分它。

*   第二：在视图的上下文中，令牌是没有意义的。用户永远不需要看到它。

就我个人而言，我不相信依靠 cookie 获取数据是脆弱的论点。事实上，在液体中弹出的购物车变量是根据在同一个 cookie 中找到的会话 ID 加载的。

也就是说，我想不出一个很好的理由让它不包含在液体对象中。我将把它作为一个低优先级的功能请求提交。

# javascript - 使用 JavaScript 中对象的值获取键？

> ID：13274050
> 
> 赞同：6
> 
> 时间：2012-11-07T16:34:02.357
> 
> 标签：javascript, object, hashmap

```
c =      {
            "UNKNOWN_ERR" : 0,
            "INDEX_SIZE_ERR" : 1,
            "DOMSTRING_SIZE_ERR" : 2,
            "HIERARCHY_REQUEST_ERR" : 3,
            "WRONG_DOCUMENT_ERR" : 4,
            "INVALID_CHARACTER_ERR" : 5,
            "NO_DATA_ALLOWED_ERR" : 6,
            "NO_MODIFICATION_ALLOWED_ERR" : 7,
            "NOT_FOUND_ERR" : 8,
            "NOT_SUPPORTED_ERR" : 9} 
```

使用 key 获取值很容易，我只使用 key in`c["UNKNOWN_ERR"]`来获取`0`，假设所有值都是唯一的，可以安全地从 value(errorcode) 中获取 key(message)。

有没有一种标准的方法可以做到这一点，或者我是否需要编写一个查看所有键并搜索该特定值的函数？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-07T16:38:24.513

正如您已经假设您需要遍历对象的属性并检查值。

```
for(var key in c) {
    if(c[key] === whatever) {
        // do stuff with key
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-01-10T11:35:12.150

es6`find`方法：

```
const getKey = (obj,val) => Object.keys(obj).find(key => obj[key] === val); 
```

在你的情况下

```
console.log(getKey(c,1)); // INDEX_SIZE_ERR 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-24T11:22:05.700

[下划线](http://underscorejs.org/)为此提供了更简单的解决方案

您也可以使用此代码获取密钥

```
var errKey = _.invert(c)[errCode]; 
```

例如，如果您使用 errCode = 3，如下所示

```
var errKey = _.invert(c)[3]; 
```

然后

`errKey`将会`HIERARCHY_REQUEST_ERR`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-21T13:00:48.107

尝试[findKey()](https://lodash.com/docs/4.17.4#findKey) lodash 方法：

```
var key = _.findKey(c, v => v === val) 
```

其中 val - 属性值。

# cakephp - cakephp - 使用 cakephp 上传多个文件的代码

> ID：13274053
> 
> 赞同：0
> 
> 时间：2012-11-07T16:34:12.847
> 
> 标签：cakephp

我是 cakePHP 的新手。有人可以帮助我使用 HTML 5 使用 cake php 上传多个文件的代码。任何帮助将不胜感激。

这是我到目前为止所拥有的：

```
<tr>
    <th>ID</th>
    <th>File Name</th>
    <th>Size</th>
</tr>

<?php foreach($files as $file): ?>
    <tr>
        <td>
            <?php echo $file['Doc']['id'];?>
        </td>
        <td>
            <?php echo $this->Html->link($file['Doc']['name'], array('controller' => 'files', 'action' => 'uploads', $file['Doc']['name'])); ?>
        </td>
        <td>
            <?php echo number_format($file['Doc']['size']/1023,0).' KB';?>
        </td>
    </tr>
<?php endforeach;?>

<h1>Add a File</h1>
<?php
    echo $this->Form->create('Doc',array('type'=>'file'));
    echo $this->Form->file('File');
    echo $this->Form->submit('Upload');
    echo $this->Form->end(); 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:55:53.337

您可以为此使用现有插件吗？如果是这样，你想试试这个插件吗：[https](https://github.com/srs81/CakePHP-AjaxMultiUpload/) ://github.com/srs81/CakePHP-AjaxMultiUpload/ - 支持多文件上传，AJAX等。

# ruby-on-rails - 嵌套属性的另一个批量分配问题

> ID：13274059
> 
> 赞同：0
> 
> 时间：2012-11-07T16:34:30.313
> 
> 标签：ruby-on-rails, mass-assignment

我有活动和信息。活动有许多消息，并且消息属于活动。我为模型设置了嵌套属性，在我看来，我正在尝试创建与模型关联的消息。这是代码：

```
class Campaign < ActiveRecord::Base
  attr_accessible :message_id, :name, :group_id, :user_id, :messages_attributes

  has_many :messages
  belongs_to :group
  belongs_to :user

  accepts_nested_attributes_for :messages
end

class Message < ActiveRecord::Base
  attr_accessible :body, :sent, :sent_at

  belongs_to :user
  belongs_to :campaign
  has_many :responses

end 
```

和形式：

```
= form_for @campaign, :html => {:class => 'form-horizontal'} do |f|
...removed error output code...
  %legend
    Enter the campaign information
  .field
    .control-group
      %label.control-label
        Campaign Name
      .controls
        = f.text_field :name
        = f.collection_select(:group_id, current_user.groups.all, :id, :name, :include_blank => true)
        = f.fields_for :message do |m|
          = m.text_area :body, :rows => 3
      .form-actions= f.submit "#{params[:action] == 'new' ? 'Create New Campaign' : 'Save Campaign'}", :class => 'btn btn-success' 
```

我知道这可能很简单，但我一直收到消息的批量分配问题。这是错误：

```
ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: message):
  app/controllers/campaigns_controller.rb:18:in `update' 
```

最后是从表单创建的参数：

```
 Parameters: {"utf8"=>"✓", "authenticity_token"=>"(removed)", "campaign"=>{"name"=>"Weekly Poker", "group_id"=>"1", "message"=>{"body"=>"s"}}, "commit"=>"Save Campaign", "id"=>"1"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:10:15.183

因为它是一个`has_many`关联，所以它应该是复数形式：

```
= f.fields_for :messages do |m| 
```

此外，在控制器中，您将需要：

```
def new
  @campaign = Campaign.new
  @campaign.messages.build
end 
```

# php - PDO 准备好的语句不适用于此查询

> ID：13274065
> 
> 赞同：0
> 
> 时间：2012-11-07T16:34:40.607
> 
> 标签：php, pdo, prepared-statement

我有这个查询：

```
$query = $db->query("SELECT

                      posts.post_topic_id,
                      posts.post_content,
                      posts.post_id,
                      posts.post_date,
                      posts.post_by,    
                      posts.post_votes_total,
                      posts.post_suggested_amount, 
                      posts.post_accepted,
                      posts.post_last_edited,
                      posts.post_edit_sum,
                      users.user_id,
                      users.username

                    FROM
                      posts

                    JOIN
                      users
                    ON
                      posts.post_by = users.user_id
                    WHERE
                      posts.post_topic_id = :topic_id
                    ORDER BY
                      :sort
                    LIMIT :start , :per_page
                  ");

$query->bindParam(':topic_id', $topic_id, PDO::PARAM_INT);
$query->bindParam(':sort', $sort, PDO::PARAM_STR);
$query->bindParam(':start', $start, PDO::PARAM_INT);
$query->bindParam(':per_page', $per_page, PDO::PARAM_INT);
$query->execute(); 
```

但它不会执行，而是给我和错误：

> 带有消息“SQLSTATE [42000]”的异常“PDOException”：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法，以便在 C:\htdocs\lr\topic.php:577 中的 ':topic_id ORDER BY posts.post_id ASC ' at line 25' 附近使用正确的语法：577 堆栈跟踪：#0 C :\htdocs\lr\topic.php(577): PDO->query('SELECT???? ...') #1 {main}

如果我不准备语句，而我使用普通变量，则查询执行得很好。

我的错误是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T16:38:03.460

您混合了准备好的语句和简单查询的方法。该`bindParam()`方法仅与准备好的语句有关。就其本身而言，该`query()`方法尝试立即执行给定的查询，但失败了，因为参数尚未被替换。

要解决这个问题，只需使用以下方法一直更改为准备好的语句

```
$query = $db->prepare("SELECT ... " ); 
```

然后绑定所有变量后执行

```
$query->exec(); 
```

# python - 使用 Python 读取 FORTRAN 格式的数字

> ID：13274066
> 
> 赞同：5
> 
> 时间：2012-11-07T16:34:44.493
> 
> 标签：python, fortran

我必须阅读一个数据文件，其中包含用（非常）旧的 FORTRAN 样式格式化的数字。文件的一行如下所示：

```
 4.500000+1 1.894719-3 4.600000+1 8.196721-3 4.700000+1 2.869539-3 
```

该文件（或其中的大部分）以固定宽度格式包含这些数字。在 Python 中读取这些数字的麻烦在于`E`这些数字中没有。观察会发生什么：

```
>>> float('4.50000+1')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for float(): 4.50000+1 
```

我可以编写一个解析器来阅读这个，但想知道这是否已经完成。这是一种旧的 FORTRAN 格式，所以我想也许有人已经弄清楚了。有谁知道图书馆可以读取这样的数字？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T14:33:48.897

您可以按如下方式使用[Fortran Format Library for Python ，](https://github.com/brendanarnold/py-fortranformat)

```
>>> import fortranformat as ff
>>> reader = ff.FortranRecordReader('(6F13.7)')
>>> reader.read(' 4.500000+1 1.894719-3 4.600000+1 8.196721-3 4.700000+1 2.869539-3')
[45.0, 0.001894719, 46.0, 0.008196721, 47.0, 0.002869539] 
```

该库已针对英特尔的 ifort 9.1 编译器进行了广泛测试，以完全匹配一些更奇怪的 FORTRAN 文本 IO。

安装使用

```
pip install fortranformat 
```

我应该声明一个偏见，因为我写了这个库......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T16:40:28.087

您可以使用正则表达式在将数字传递给之前插入“E” `float`。

```
re.sub(r'(\d)([-+])', r'\1E\2', number) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T16:42:39.633

这应该工作：

```
In [47]: strs="4.500000+1 1.894719-3 4.600000+1 8.196721-3 4.700000+1 2.869539-3"

In [48]: [float(x.replace("+","e+").replace("-","e-")) for x in strs.split()]

Out[48]: [45.0, 0.001894719, 46.0, 0.008196721, 47.0, 0.002869539] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-19T00:01:27.850

另一种方法是使用系统命令访问 AWK：

注意里面的 " 字符的转义`COMMAND`

```
import subprocess
COMMAND = "awk 'gsub(/D/,\"E\");{print}' epsc8.out > epsc8E.out"
subprocess.call(COMMAND, shell=True) 
```

# vim - Vim make 使用 Quickfix 创建新文件 - Errorformat

> ID：13274068
> 
> 赞同：3
> 
> 时间：2012-11-07T16:34:55.883
> 
> 标签：vim, makefile, scanf

这似乎是由 errorformat 错误引起的，但我不确定是什么导致它查看当前值。

的结果`:make %`

```
/Users/seanhess/sandbox/typescript/main.ts (62,15): Expected ';'
"~/sandbox/typescript/main.ts " [New File] 
```

当前值`set errorformat?`

```
errorformat= %#%f(%l\,%c): %m 
```

如果有帮助，这是定义它的包。[https://github.com/leafgarland/typescript-vim/blob/master/compiler/typescript.vim](https://github.com/leafgarland/typescript-vim/blob/master/compiler/typescript.vim)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:52:19.007

显然`%#`等同`*`于正则表达式

```
errorformat=\ %#%f\ %#(%l\\\,%c):\ %m 
```

# javascript - 通过包含 jQuery 和 jQuery UI，我会加载 jQuery 两次吗？

> ID：13274071
> 
> 赞同：5
> 
> 时间：2012-11-07T16:35:03.750
> 
> 标签：javascript, jquery

我一直在玩 PHP、JavaScript 和 jQuery，并安装了几个 jQuery 插件。现在在我的标题中，我有：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script> 
```

这是加载两个不同的东西吗？或者我可以摆脱一个吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T16:35:42.603

不，您没有加载两次。它们是用于不同目的的 2 个不同的库。

[http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js)是主要用于文档遍历、事件处理、动画和 Ajax 交互的 jQuery 库。检查他们的[网站](http://jquery.com/)文档以获取信息。

[http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js)是 jQuery UI 库，其中包含选项卡/手风琴/对话框等小部件和动画/可拖动/可排序等功能. 查看[jQuery UI 网站](http://jqueryui.com/)了解更多信息。

# c# - Outlook 2003+ 将带有图像的签名嵌入到所有已发送的电子邮件中

> ID：13274078
> 
> 赞同：0
> 
> 时间：2012-11-07T16:35:22.573
> 
> 标签：c#, .net, outlook

我有一个 Win Form 应用程序，它会做一些无聊的会计工作，然后将其数据发送给一些幸运的收件人。我正在使用 Outlook 12.0 互操作对象，我的应用程序环境范围从 XP 上的 office 2003 到 Win 7 上的 office 2007。

我的问题在于在发送的电子邮件中发送公司签名。它包含两个图像，我想嵌入这些图像，使它们看起来是正文的一部分（假设接收邮件客户端支持）。

我尝试了几种不同的方法来实现这一点；但仍然没有运气！

我试过了：

*   从签名文件夹中提取 html 数据，将 html img tags src 属性更改为包含“file///”。这会导致 Outlook 用“CID”替换“文件///”，我认为它也会嵌入图像......我们永远不应该假设：|。这是我发现最适合获取签名其余部分的方法。

*   （在创建一个新的 MailItem 之后） - 抓取 MailItem 的 HTMLBody 并提取包括签名在内的相关部分......由于新的 MailItem 对象与其签名非常不一致，这不起作用。我的意思是有时新项目会包含签名，有时不会！:s 我不知道为什么它并不总是在那里，我的代码的其他部分没有改变！

我在这里阅读了关于 GetInspector 属性的另一篇文章......显然只是调用它会做“一些事情”，并且签名会神奇地出现在您的邮件项目中......不！

我不能做的事情：

*   我不能（尽可能多地）将图像推到网上某处并在电子邮件 html 中指向它们。
*   我不能使用 SMTP（它必须通过 Outlook...叹息）。

我在想最好的方法似乎是我原来弄乱 CID 的方法，但我不太了解 Outlook 在后台做什么，所以我很难弄清楚我还需要做什么才能得到与电子邮件一起发送的图像。

希望那里的人对我做错了什么或我可以尝试什么有所了解。

请让我知道代码是否有帮助，我会发布，（尝试的大部分代码都来自这个站点......我只是无法再次找到链接，并试图避免让这个问题变得太长）。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:16:58.767

这不是您可以使用的最有效或最灵活的解决方案，但可能是最强大和最便携的解决方案。您可以将图像位图转换为纯 HTML 并将该 HTML 嵌入到您的电子邮件签名中。

[转换非常简单，您可以使用我在这里](http://img2html.odednoam.com/)编写的实用程序（开源）。

# sql-server - COLLATE 子句不能用于包含 COLLATE 子句的表达式

> ID：13274083
> 
> 赞同：3
> 
> 时间：2012-11-07T16:35:41.233
> 
> 标签：sql-server, tsql, database-performance

我有两个表：tab1 和 tab2。每个表只有一个 VARCHAR(MAX) 列。

我只需要获得那些相等的值对，但仅在情况下不同。

示例输入：

```
tab1.t1     tab2.t2
-----------------------
fff     fff
FFF     fff
Fff     fff
FFF     FFA
FfA     FFF
FFF     aaa
bbb     aaa

Related output:

t1      t2
-----------------------
fff     FFF
FFF     fff
Fff     fff
Fff     FFF
FfA     FFA 
```

表 tab1 和 tab2 在我们真实的数据库中足够大（~ 800-1000 行）。我需要为大约 500-600 列进行此操作。

所以我需要写一个快速的解决方案。我写了一个算法：

1.  使用 tab1 中区分大小写的排序规则删除所有重复项
2.  使用 tab2 中区分大小写的排序规则删除所有重复项
3.  使用不区分大小写的排序规则连接来自先前步骤的结果集
4.  使用区分大小写的排序规则过滤掉（WHERE 子句）值不等于的行
5.  使用区分大小写的排序规则删除重复行

我试过这样：

```
SELECT DISTINCT tt.t1 COLLATE Cyrillic_General_CS_AS, tt.t2 COLLATE Cyrillic_General_CS_AS
FROM (
    SELECT tt1.t1, tt2.t2
    FROM 
    (
        SELECT tab1.t1 COLLATE Cyrillic_General_CS_AS
                       AS t1
        FROM (VALUES('fff'),('FFF'),('Fff'),('FFF'),('FfA'),('FFF'),('bbb')) AS tab1(t1)
        GROUP BY tab1.t1 COLLATE Cyrillic_General_CS_AS
    ) tt1 INNER JOIN
    (
        SELECT tab2.t2 COLLATE Cyrillic_General_CS_AS
                       AS t2
        FROM (VALUES('fff'),('fff'),('fff'),('FFA'),('FFF'),('aaa'),('aaa')) AS tab2(t2)
        GROUP BY tab2.t2 COLLATE Cyrillic_General_CS_AS
    ) tt2
    ON tt1.t1 = tt2.t2 COLLATE Cyrillic_General_CI_AS
) AS tt
WHERE tt.t1 <> tt.t2 COLLATE Cyrillic_General_CS_AS 
```

但它发生错误：

> “COLLATE 子句不能用于包含 COLLATE 子句的表达式。”

请建议我如何在不使用用户定义的函数、临时表或删除 group by 子句的情况下避免这个问题（我试过了——它们几乎不会减慢执行速度）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:37:28.473

因为 SQL Server 可以按任何顺序处理 JOIN，并且

1.  结转要在最终输出中评估的表达式
2.  尽早解析表达式，早在精简到从数据中进行的初始检索时

它不能保证强制应用 COLLATE 的阶段。因此，您只能将其应用于任何列/表达式一次。由于您在外部查询中已经有 DISTINCT，因此 GROUP BY 在派生表中是多余的 - 即使您觉得它会减少中间结果集。

* * *

```
SELECT DISTINCT tt.t1 COLLATE Cyrillic_General_CS_AS, tt.t2 COLLATE Cyrillic_General_CS_AS
FROM (
    SELECT tt1.t1, tt2.t2
    FROM 
        (VALUES('fff'),('FFF'),('Fff'),('FFF'),('FfA'),('FFF'),('bbb')) tt1(t1)
    INNER JOIN
        (VALUES('fff'),('fff'),('fff'),('FFA'),('FFF'),('aaa'),('aaa')) tt2(t2)
    ON tt1.t1 = tt2.t2
) AS tt
WHERE tt.t1 <> tt.t2 COLLATE Cyrillic_General_CS_AS 
```

# iphone - [NSManagedObject 名称]：无法识别的选择器发送到实例 0x6b77240'

> ID：13274085
> 
> 赞同：2
> 
> 时间：2012-11-07T16:35:47.190
> 
> 标签：iphone, ios5, core-data, ios4

> 错误 ::: 2012-11-07 16:07:31.360 随机日期 [1100:c07] -[NSManagedObject 名称]：无法识别的选择器发送到实例 0x6b77240 2012-11-07 16:07:31.363 随机日期 [1100:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSManagedObject name]: unrecognized selector sent to instance 0x6b77240' *** First throw call stack: (0x1793022 0x1193cd6 0x1794cbd 0x16f9ed0 0x16f9cb2 0xed0a57 0xed05e4 0xed00b0 0xecf45d 0xecd2fd 0x316e 0x3481 0xdea1e 0xddfec 0x104f1d 0xef1cb 0x105df1 0x105e0d 0x105ea9 0x446f5 0x4473c 0x234f 0x15386 0x16274 0x25183 0x25c38 0x19634 0x167def5 0x1767195 0x16cbff2 0x16ca8da 0x16c9d84 0x16c9c9b 0x15c65 0x17626 0x1ffd 0x1f65 0x1) terminate called throwing an exception

主要代码如下。

```
{

RootViewController *rvc = [[RootViewController alloc] init];

UINavigationController *nc = [[UINavigationController alloc] initWithRootViewController:rvc];
[[self window] setRootViewController:nc];
[rvc setManagedObjectContext:[self managedObjectContext]];

self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];
return YES;
} 
```

**在 ROOTVIEW 控制器中**

```
enter code here
-(void)addNewRandomDate
{

NSManagedObject *newRandomDate = [NSEntityDescription insertNewObjectForEntityForName:@"RandomDate"
                                                               inManagedObjectContext:managedObjectContext];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeStyle:NSDateFormatterShortStyle];
[dateFormatter setDateFormat:@"EEEE"];

NSDate *date = [NSDate dateWithTimeIntervalSince1970:arc4random()];
NSString *dayName = [dateFormatter stringFromDate:date];

[newRandomDate setValue:date forKey:@"date"];
[newRandomDate setValue:dayName forKey:@"dayName"];

NSError *error = nil;
BOOL success = [managedObjectContext save:&error];
if (!success) {

    NSLog(@"Error = %@", error);
}

[self fetchRandomDates];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:18:46.070

抛出异常的原因是：在 FecthresultControllern 中使用 insertNewObjectForEntityForName:@"RandomDate" inManagedObjectContext:managedObjectContext 而不是使用 enityForname: InManagedObjectContext ...

# matlab - 以八度相交两个矩阵

> ID：13274086
> 
> 赞同：2
> 
> 时间：2012-11-07T16:35:52.293
> 
> 标签：matlab, octave

我有两个矩阵。两者都有`nx2`值，第 1 列有 id，第 2 列有值：

```
| id1 | A1 |
| id2 | A2 |
| id3 | A3 |
| id4 | A4 | 
```

第一个代表关于 object 的数据`A`，第二个代表关于 object 的数据`B`。我需要从两个矩阵中找到共同的 id 并将它们放入一个只有值的矩阵中：

```
| A1 | B1 |
| A2 | B2 |
| A3 | B3 |
| A4 | B4 | 
```

条件是每一行表示对应于相同id的值。重要提示：忽略两个输入矩阵不共有的所有 id。我的数据集很长，我正在寻找以八度音程完成它的最佳方法（我猜类似的解决方案也适用于 matlab）。单个矩阵中的 ID 是唯一的。

**注意**：我之前忘了提到 id（对于单个矩阵）对于矩阵来说是唯一的，但它们不代表行号和没有意义的数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T16:40:43.003

这最容易通过以下方式完成`intersect`：

```
[uniqueIDs, idxA, idxB] = intersect(A(:,1),B(:,1));

result = [A(idxA,2),B(idxB,2)] 
```

# wordpress - 警告：在第 1189 行的 /home/instyle/public_html/wp-content/plugins/mailchimp.bak/mailchimp.php 中为 foreach() 提供的参数无效

> ID：13274088
> 
> 赞同：0
> 
> 时间：2012-11-07T16:35:57.087
> 
> 标签：wordpress, mailchimp

提交表单时，此错误出现在页面顶部。

`Warning: Invalid argument supplied for foreach() in /home/mysite/public_html/wp-content/plugins/mailchimp.bak/mailchimp.php on line 1189`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:35:57.087

只需更新您的 mailchimp 插件，它就会消失。

# jquery - 用鼠标单击并按住绘制形状

> ID：13274090
> 
> 赞同：2
> 
> 时间：2012-11-07T16:36:01.780
> 
> 标签：jquery, raphael

有没有办法像这样使用拉斐尔绘制形状（矩形）？

[http://devfiles.myopera.com/articles/649/example3.html](http://devfiles.myopera.com/articles/649/example3.html)

我尝试了下面的代码，但没有成功，因为矩形仅在 ((onmouseup)) 事件之后出现

与上面使用鼠标单击并按住的示例不同，形状从一个点开始，形状的大小随后随着用户移动鼠标而改变，直到用户释放鼠标，形状变为永久

```
$("#div1").mousedown(function(e) {

    var offset = $("#div1").offset();
    mouseDownX = e.pageX - offset.left;
    mouseDownY = e.pageY - offset.top;

});

$("#div1").mouseup(function(e) {
    var offset = $("#div1").offset();
    var upX = e.pageX - offset.left;
    var upY = e.pageY - offset.top;

    var width = upX - mouseDownX;
    var height = upY - mouseDownY;

    DrawRectangle(mouseDownX, mouseDownY, width, height);

});

function DrawRectangle(x, y, w, h) {

    var element = paper.rect(x, y, w, h);
    element.attr({
        fill : "gray",
        opacity : .5,
        stroke : "#F00"
    });
    $(element.node).attr('id', 'rct' + x + y);

    element.drag(move, start, up);
    element.click(function(e) {

        elemClicked = $(element.node).attr('id');

    });

} 
```

此小提琴中提供的完整示例 [http://jsfiddle.net/XMyHz/26/](http://jsfiddle.net/XMyHz/26/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T07:11:46.587

这是一个使用 Raphael 重新创建您链接到的绘图示例的示例：http: [//jsfiddle.net/4Kdhz/1/](http://jsfiddle.net/4Kdhz/1/)

正如@Neil 提到的，您需要在移动鼠标时更改形状的尺寸，所以基本流程是这样的：

**`onmousedown`**：

1.  在起点绘制一个 0 x 0 形状。
2.  添加一个事件侦听器来`onmousemove`执行绘图功能，`doDraw()`.

**`onmouseup`**：

1.  删除形状。
2.  清除`onmousemove`监听器。

**`doDraw()`**：

1.  `onmousedown`使用坐标获取起点。
2.  计算形状的 x、y、width 和 height 属性并绘制它。

请注意，对于 Raphael，矩形的宽度或高度不能为负，因此会更改起始坐标并将宽度和高度乘以 -1。

# c# - 使用 EF/Code First/Repository Pattern/Table Per Type (TPT) 时的良好编程原则？

> ID：13274096
> 
> 赞同：2
> 
> 时间：2012-11-07T16:36:29.313
> 
> 标签：c#, asp.net-mvc, entity-framework, jqgrid

只是好奇。

假设我有一个 Base 实体，我使用 Table Per Type 方法从中派生了大约 10 个不同的子实体。我还有一个通用存储库，可以从每个子实体中获取数据。我最终想将每个子实体映射到一个单独的视图模型，并将每个视图模型链接到我网站上自己的网格（JqGrid），每个网格都有自己的创建、读取、更新、删除方法。我可以做到所有这些，但我不确定在将代码保持在最低限度的同时，正确的方法是什么。

现在，我在每个视图模型中都定义了每个字段（来自父实体和子实体）。拥有一个“父”视图模型然后从中派生子视图模型以模仿实体的继承结构是否更好？我不这么认为......在视图模型中继承对我来说没有多大意义。

另外，我真的不想为每个网格重复 CRUD 操作。这被认为是好的做法吗？在这种情况下，每个视图模型是否应该有自己的一组 CRUD 操作？

以“阅读”为例。我基本上是根据每个网格的视图模型的 ID（键）字段返回 JSON 数据。并且由于所有网格都将具有此 ID 列（父实体的一部分），我是否应该只有一个函数来处理所有网格？我应该使用反射吗？我应该使用父/子实体的多态属性吗？

还是将每个网格的这些操作分开更好？

嗯..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T19:09:22.843

这取决于。

在所有规则之上，我会说：保持简单，不要重复自己。

一些评论：

> 假设我有一个 Base 实体，我使用 Table Per Type 方法从中派生了大约 10 个不同的子实体。

仅作为旁注：您知道 TPT 的性能不佳（至少对于 EF < 5），对吗？需要牢记这一点，特别是如果表可能很大或者您有很深的继承层次结构（从派生实体派生的实体......等）

> 我最终想将每个子实体映射到单独的视图模型

在我看来，这是一个好主意，仅针对可能适用于每个派生实体的 ViewModel 的不同验证规则。

> 拥有一个“父”视图模型然后从中派生子视图模型以模仿实体的继承结构是否更好？

在我看来，*模仿*实体的继承并不是一个理由。但是，例如，如果您在基本模型属性上查看验证规则并且它们适用于所有派生实体，为什么不将这些规则保存在一个地方 - 就像基本 ViewModel 一样。否则，您必须在每个派生的 ViewModel 中重复它们。

> 在这种情况下，每个视图模型是否应该有自己的一组 CRUD 操作？

如果派生实体是“扁平的”（只有标量属性，没有导航属性），您只需要类似：

```
Read: context.BaseEntities.OfType<T>().Where(...)...
Add: context.BaseEntities.Add(T entity);
Delete: context.BaseEntities.Remove(T entity);
Update: context.Entry(object o).State = EntityState.Modified; 
```

所有这些方法都适用于基础实体和派生实体。为什么要为每个实体分别创建这样的方法？尽管在更复杂的情况下，您可能需要单独的方法，例如，如果派生实体编号 7 具有到另一个实体的导航属性，并且您对该实体的视图确实允许更改与另一个实体的关系。所以，这取决于。我不会从复制所有相同的方法开始，而是稍后在我看到我需要特殊处理时进行重构（除非您可能从一开始就预见到在项目发展过程中的某个时刻需要特殊处理）。

> 我基本上是根据每个网格的视图模型的 ID（键）字段返回 JSON 数据。并且由于所有网格都将具有此 ID 列（父实体的一部分），我是否应该只有一个函数来处理所有网格？

在存储库/服务方面，是的，只要为每个派生实体加载标量属性。如果您需要派生实体 7 的导航属性，您可能需要一些特殊的东西（可能是`Include`）。将数据投影到 ViewModel 中可能特定于每个实体，因为每个实体都有单独的 ViewModel。

> 我应该使用反射吗？

怎么回事？为什么？最好不要。

> 我应该使用父/子实体的多态属性吗？

？？？（<-这应该是一个“困惑”-表情）

# boost-serialization - 使用 xml 存档提升序列化编译问题

> ID：13274097
> 
> 赞同：2
> 
> 时间：2012-11-07T16:36:35.067
> 
> 标签：boost-serialization

以下示例仅在选择文本文件存档时编译。随着 xml 文件选择大量的错误消息行出来。

我用 g++ 4.7.2 编译。

该示例包含两次以下行： boost::archive::xml_oarchive ar(ofs); boost::archive::text_oarchive ar(ofs);

xml 无效 文本有效

（我在这里只写了很多次相同的描述，因为我不能在这里发布少于 100 行的描述...... :-( )

错误行之一是

```
 /usr/include/boost/archive/basic_xml_iarchive.hpp:70:9: error: no matching function for call to 'assertion_failed(mpl_::failed************ boost::serialization::is_wrapper<Base>::************)' 
```

有什么提示吗？

```
 #include <iostream>

    #include <assert.h>
    #include <fstream>
    #include <boost/archive/text_iarchive.hpp>
    #include <boost/archive/text_oarchive.hpp>

    #include <boost/serialization/nvp.hpp>
    #include <boost/archive/xml_woarchive.hpp>
    #include <boost/archive/xml_wiarchive.hpp>
    #include <boost/archive/xml_iarchive.hpp>
    #include <boost/archive/xml_oarchive.hpp>

    using namespace std;

    class Base
    {
        public:
            int genericData;

            Base(int _genericData) : genericData(_genericData) {}
            Base() {}

            friend class boost::serialization::access;

            template<typename Archive>
                void serialize(Archive& ar, const unsigned version)
                {
                    ar & BOOST_SERIALIZATION_NVP( genericData );
                }

            virtual void Print() { cout << "Base only " << genericData << endl; }
    };

    BOOST_SERIALIZATION_ASSUME_ABSTRACT(Base) 

    class A: public Base 
    {
        public: 
            int a;

            A(int _generic, int _a):Base(_generic),a(_a){}
            A(){};

            template<typename Archive>
                void serialize(Archive& ar, const unsigned version)
                {
                    ar & boost::serialization::base_object<Base>(*this);
                    ar & BOOST_SERIALIZATION_NVP( a );
                }
            virtual void Print() { cout << "A " << genericData << " " << a << endl; }
    };

    class B: public Base
    {
        public:
            int b1;
            int b2;

            B( int _generic, int _b1, int _b2): Base( _generic), b1(_b1), b2(_b2) {}
            B() {}

            template<typename Archive>
                void serialize(Archive& ar, const unsigned version)
                {
                    ar & boost::serialization::base_object<Base>(*this);
                    ar & BOOST_SERIALIZATION_NVP( b1 );
                    ar & BOOST_SERIALIZATION_NVP( b2 );
                }
            virtual void Print() { cout << "B " << genericData << " " << b1 <<  " " << b2 << endl; }
    };

    class C: public Base
    {
        public:
            int c1;
            int c2;
            int c3;

            C( int _generic, int _c1, int _c2, int _c3): Base( _generic), c1(_c1), c2(_c2), c3(_c3) {}
            C() {}

            template<typename Archive>
                void serialize(Archive& ar, const unsigned version)
                {
                    ar & boost::serialization::base_object<Base>(*this);
                    ar & BOOST_SERIALIZATION_NVP( c1 );
                    ar & BOOST_SERIALIZATION_NVP( c2 );
                    ar & BOOST_SERIALIZATION_NVP( c3 );
                }
            virtual void Print() { cout << "C " << genericData << " " << c1 <<  " " << c2 << " " << c3 << endl; }
    };

    class Ptr
    {
        public:
            Ptr( Base* _dptr):dptr(_dptr) {}
            Ptr(){}
            Base *dptr;

            template<typename Archive>
                void serialize(Archive& ar, const unsigned version) 
                {
                    ar & BOOST_SERIALIZATION_NVP(dptr);  // Simply serialize the data members of Obj
                }   

            void Print() 
            {
                cout << "Object Ptr Points to addr: " << dptr << " und enthaelt:" << endl;
                dptr->Print();
            }
    };
    #if 0
    #include <boost/serialization/export.hpp>
    BOOST_CLASS_EXPORT_GUID( A, "A");
    BOOST_CLASS_EXPORT_GUID( B, "B");
    BOOST_CLASS_EXPORT_GUID( C, "C");
    #endif

    int main()
    {

        {
            ofstream ofs("test.data");
            boost::archive::xml_oarchive ar(ofs);
            //boost::archive::text_oarchive ar(ofs);

            A a( 111, 1);
            B b( 222, 2,20);
            C c( 333, 3,30,300);

            // Base a(1);
            // Base b(2);
            // Base c(3);

            //Ptr p1(&a);
            //Ptr p2(&b);
            //Ptr p3(&c);

            Base *p1( &a);
            Base *p2( &b);
            Base *p3( &c);

            ar.register_type(static_cast<A *>(NULL));
            ar.register_type(static_cast<B *>(NULL));
            ar.register_type(static_cast<C *>(NULL));

            ar & boost::serialization::make_nvp("dptr",p1);
            ar & boost::serialization::make_nvp("dptr",p2);
            ar & boost::serialization::make_nvp("dptr",p3);

            p1->Print();
            p2->Print();
            p3->Print();

        }

        cout << "+++" << endl;

        // Read back
        {
            ifstream ifs("test.data");
            boost::archive::xml_iarchive ar(ifs);
            //boost::archive::text_iarchive ar(ifs);

            Base* p1;
            Base* p2;
            Base* p3;

            ar.register_type(static_cast<A *>(NULL));
            ar.register_type(static_cast<B *>(NULL));
            ar.register_type(static_cast<C *>(NULL));

            ar & boost::serialization::make_nvp("dptr",p1);
            ar & boost::serialization::make_nvp("dptr",p2);
            ar & boost::serialization::make_nvp("dptr",p3);

            p1->Print();
            p2->Print();
            p3->Print();

        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T21:35:10.780

静态断言失败是由这些行触发的：

```
- ar & boost::serialization::base_object<Base>(*this); 
```

他们应该是：

```
+ ar & BOOST_SERIALIZATION_BASE_OBJECT_NVP(Base); 
```

扩展为：

```
ar & boost::serialization::make_nvp( "Base",
         boost::serialization::base_object<Base>(*this)
     ); 
```

# c++ - c++ - 遵循源文件中的结构结构

> ID：13274100
> 
> 赞同：0
> 
> 时间：2012-11-07T16:36:41.387
> 
> 标签：c++

我想从 c 源代码（同一文件）转换一个结构（可以包括更多结构），我想走那个“结构”。有没有最佳的方法来做到这一点？我可以转换为图形树的某种 Tree 类会很好。在最远的“叶”结构中，我还希望能够访问结构成员，而不仅仅是结构的树结构。我对任何算法持开放态度。这让我觉得是一种递归类型的算法。我只是不想浪费时间重新发明轮子。不，这不是家庭作业，而是与工作相关的:)。如果有人知道已经存在的工具已经这样做了。如果有人需要，我可以在下面提供更多详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T23:43:28.820

如果您只是记录您的代码，我建议使用**doxygen**软件。

如果要解析代码文件，请查看 boost 库：

[这个例子可能会给你一些动力。](http://www.boost.org/doc/libs/1_52_0/libs/graph/doc/file_dependency_example.html)

对于图形显示，我不能推荐任何 c++，但可能是基于 boost 的[NodeBox 。](http://nodebox.net/code/index.php/Graph)

然而，C++ 可能不是此类任务的正确选择工具。尝试宁愿（比方说）python。

作为最后一个选项，您还可以执行自己的递归遍历器，并将数据输出到 / 中，某些图形显示程序可以读取该 / 。

# c# - CodeContracts：错误警告“可能取消装箱空引用”

> ID：13274102
> 
> 赞同：6
> 
> 时间：2012-11-07T16:36:53.963
> 
> 标签：c#, .net, code-contracts

![在此处输入图像描述](../Images/63ef30db0f6cdbbf319b3151547f108d.png)

在上图中，您可以看到来自代码合同的警告。我不认为这是合法的，因为`this`永远不可能`null`。

这是一个错误还是我错过了什么？

* * *

此属性是以下类的成员：

```
public class NHibernateIQueryableQueryBase<TEntity, TQuery, TQueryInterface>
    : IQuery<TEntity>, IFluentQueryInterface<TEntity, TQueryInterface>
    where TQuery : NHibernateIQueryableQueryBase<TEntity, TQuery,
                                                 TQueryInterface>,
                   TQueryInterface
    where TQueryInterface : IQuery<TEntity> 
```

* * *

更新：
将属性更改为以下内容仍会显示警告 - 在线`return result;`：

```
public TQueryInterface And
{
    get
    {
        var result = this as TQuery;
        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:24:30.373

分析不明白，`this`保证执行`TQuery`。
因此，它警告您，您最终可能会`null`引用接口类型，并将其作为`struct`实现该接口的 a 返回：

您需要添加参数`: class`的约束`TQueryInterface`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:47:15.110

基于[这个问题](http://go4answers.webhost4life.com/Example/remove-null-unboxing-warnings-interface-36547.aspx)，我会说你需要指定如果演员阵容失败会发生什么。

尝试`return this as TQuery`，因为`as`如果转换失败，运算符将返回 null，而显式转换将引发错误。

# version-control - Synergy CM 相当于 SVN Externals？

> ID：13274104
> 
> 赞同：1
> 
> 时间：2012-11-07T16:36:58.790
> 
> 标签：version-control, svn-externals, cm-synergy

试图确定在 IBM Rational Synergy CM 中是否有任何类似于 SVN:Externals 的行为。

最终目标是为存在于一个数据库中的 Synergy 项目找到一种更集成的方式，以包含源自另一个数据库的文件，而无需手动将它们复制到第二个数据库并手动传播更改。SVN 当然通过 Externals 的概念来支持这一点，它允许您指向不同存储库上的目录或文件。

到目前为止，搜索没有发现任何信息，不幸的是，在这种情况下必须使用 Synergy，因此切换版本控制工具不是一种选择。如果手动复制是答案，那就这样吧，只是想确认一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:27:00.907

在数据库之间共享项目和文件的唯一方法是 DCM 概念（请参阅[手册](http://publib.boulder.ibm.com/infocenter/rsdp/v1r0m0/topic/com.ibm.help.download.synergy.doc/pdf71/dcm.pdf)）。但是，它使用起来非常复杂，并且需要一些脚本才能正常运行。如果您有简单的需求，您总是可以使用简单的文件/目录存储库“在”Synergy 之外进行。

# python - 列表理解优化

> ID：13274110
> 
> 赞同：4
> 
> 时间：2012-11-07T16:37:14.770
> 
> 标签：python, list, python-2.7, list-comprehension

我设法将 8 行代码转换为 2 行。

第一个列表理解让我得到文件夹，第二个让我得到特定过滤器的文件：

```
hideTheseFolders=[".thumb",".mayaSwatches","RECYCLER","$AVG"]
fileFilters=["ma","jpg","png","mb",'iff','tga','tif']
newLst=[]
import os
locationTxt="E:\box\scripts"
[newLst.append(each) for each in os.listdir(locationTxt)  if os.path.isdir(os.path.join(locationTxt,each)) and each not in hideTheseFolders]
[newLst.append(os.path.basename(os.path.join(locationTxt,each))) for nfile in fileFilters for each in os.listdir(locationTxt) if each.endswith(nfile)] 
```

现在，在上面的代码中，最后两行正在从 的同一目录中查找`locationTxt`，这意味着我可能有一种方法可以合并最后两行。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T23:03:22.520

首先，您滥用列表推导来通过在循环中附加来隐藏循环；您实际上是在丢弃列表理解的结果。其次，没有必要以牺牲可读性为代价将尽可能多的内容塞进一行。

如果你想使用列表推导，这在通过循环和过滤构建列表时实际上是一个非常好的主意，那么考虑这个版本：

```
ignore_dirs = set([".thumb",".mayaSwatches","RECYCLER","$AVG"])
extensions = ["ma", "jpg", "png", "mb", 'iff', 'tga', 'tif']
location = "E:\\box\\scripts"

filelist = [fname for fname in os.listdir(location)
                  if fname not in ignore_dirs
                  if os.path.isdir(os.path.join(location, fname))]
filelist += [os.path.basename(fname)
             for fname in os.listdir(location)
             if any(fname.endswith(ext) for ext in extensions)] 
```

请注意，仍然有两种理解，因为您似乎正在构建一个在逻辑上由两种项目组成的列表。无需尝试在单个表达式中执行此操作，尽管您可以使用两个推导式，`+`它们之间带有 a 而不是`+=`语句。

（我冒昧地重命名变量以反映它们所代表的内容。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T23:35:07.173

列表推导不是一种优化技术。当 Python 编译器看到一个列表推导时，它会将其分解为一个 for 循环。查看字节码 13 ( `FOR_ITER`)：

```
In [1]: from dis import dis

In [2]: code = "[i for i in xrange(100)]"

In [3]: dis(compile(code, '', 'single'))
  1           0 BUILD_LIST               0
              3 LOAD_NAME                0 (xrange)
              6 LOAD_CONST               0 (100)
              9 CALL_FUNCTION            1
             12 GET_ITER            
        >>   13 FOR_ITER                12 (to 28)
             16 STORE_NAME               1 (i)
             19 LOAD_NAME                1 (i)
             22 LIST_APPEND              2
             25 JUMP_ABSOLUTE           13
        >>   28 POP_TOP             
             29 LOAD_CONST               1 (None)
             32 RETURN_VALUE 
```

*列表推导式与 for 循环相同*的事实也可以通过计时来看出。在这种情况下，for 循环实际上运行得稍微快一些（但微不足道）：

```
In [4]: %timeit l = [i for i in xrange(100)]
100000 loops, best of 3: 13.6 us per loop

In [5]: %%timeit l = []; app = l.append  # optimise out the attribute lookup for a fairer test
   ...: for i in xrange(100):
   ...:     app(i)
   ...: 
100000 loops, best of 3: 11.9 us per loop  #  insignificant difference. Run it yourself and you might get it the other way around 
```

因此，您可以将任何给定的列表推导式编写为一个 for 循环，对性能的影响最小（实际上，由于属性查找，通常会有很小的差异），并且通常具有显着的可读性优势。特别是，有副作用的循环*不*应该写成列表推导式。您也不应该使用包含两个以上`for`关键字的列表推导式，或者使一行长度超过 70 个字符左右的列表推导式。这些不是一成不变的规则，只是编写可读代码的启发式方法。

不要误会我的意思，列表推导非常有用，而且通常比等效的 for-loop-and-append 更清晰、更简单、更简洁。但他们不应该以这种方式被滥用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T22:28:06.893

主要的建议是买一本像样的 Python 书并好好阅读。从您的代码来看，您不知道列表推导是如何工作的，但您仍然设法将 8 行可读的代码塞进了 2 行过长且难以理解的代码中。

您应该编写易于阅读的程序：

*   换行符是你的朋友，使用它们
*   空间也是你的朋友
*   行应适合屏幕（<50 个字符）
*   放在`imports`文件的开头
*   读一本python书

万一你想知道，你的代码应该是这样的：

```
import os

path = 'e:/box/scripts'

newLst = list()
for root,dirs,files in os.walk(path) :
    # add folders
    newLst.extend( [dir for dir in dirs if dir not in hideTheseFolders] )

    # add files
    newLst.extend( [file for file in files if file.lower().endswith(fileFilters)] )

    break    # don't descend into subfolders

# convert to the full path or whatever you need here
newLst = [os.path.join(path, file) for file in newLst] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T05:45:02.590

我会坚持使用更具可读性的代码并避免列表理解，或者如果我必须进行列表理解，我会保留对可读的备份引用。

到目前为止，我对列表理解的学习我会把它放在上面，以便每个人都可以跟随。

理解的主要用途是：

*   将迭代器（可能带有过滤器）的结果抓取到永久列表中：`files = [f for f in list_files() if f.endswth("mb")]`
*   在可迭代类型之间转换：`example = "abcde"; letters = [x for x in example] # this is handy for data packed into strings!`
*   简单的列表处理：`strings = [str(x) for x in list_of_numbers]`
*   使用 lambda 进行更复杂的列表处理以提高可读性： `filter_func = lambda p, q: p > q larger_than_last = [val for val in list_of_numbers if filter_func(val, 5)]`

> 谢谢大家的投入和钉钉。

更新：我的研究和故障排除给了我确切的答案。

```
filters = [[".thumb", ".mayaSwatches", "RECYCLER", "$AVG"], ["ma", "jpg", "png", "mb", 'iff', 'tga', 'tif']]
locationTxt = r"E:\box\scripts"
newLst = [each for each in os.listdir(locationTxt) if os.path.isdir(os.path.join(locationTxt, each)) and each not in filters[0]] + [each for each in os.listdir(locationTxt) if os.path.isfile(os.path.join(locationTxt, each)) and os.path.splitext(each)[-1][1:] in filters[1]] 
```

然而，正如我提到的，坚持可读的代码逻辑是正确的方法！！！

# c# - 接受管道值的变量 | 作为分隔符

> ID：13274113
> 
> 赞同：0
> 
> 时间：2012-11-07T16:37:39.797
> 
> 标签：c#, .net

我有六个类型的变量`String`，它们包含从 DB 字段位检索到的 0/1 值。

所以，这些变量是单选框的值，Y=1 | N=0。

现在，我有一个变量，它接受一个或多个枚举值，它们由管道“|”分隔。

```
if (bool.Parse(mht_ReadAccess) && bool.Parse(mht_WriteAccess))
{
  var grantAccessRequest = new GrantAccessRequest
  {
    PrincipalAccess = new PrincipalAccess
    {
      AccessMask = AccessRights.WriteAccess | AccessRights.ReadAccess,
      Principal = userreference
    },
    Target = recordentityreference
  };
} 
```

现在，这是解决此问题的静态方法。如果我有 6 个变量，如 "mht_WriteAccess" ，我如何检查其中有多少设置为 true，并自动更改 "AccessMask" 变量的情况，并使用管道传递所有正确的枚举值。

我想知道是否有办法自动执行此操作，也许有任何循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:45:21.140

```
AccessRights rights = 0;

if (bool.Parse(mht_ReadAccess))
    rights |= AccessRights.ReadAccess;

if (bool.Parse(mht_WriteAccess))
    rights |= AccessRights.WriteAccess;

// do the same for all other variables

var grantAccessRequest = new GrantAccessRequest
{
    PrincipalAccess = new PrincipalAccess
    {
        AccessMask = rights,
        Principal = userreference
    },
    Target = recordentityreference
}; 
```

# c++ - 防止课外访问

> ID：13274118
> 
> 赞同：2
> 
> 时间：2012-11-07T16:37:56.913
> 
> 标签：c++, gcc, clang

我想限制一个类只能访问它的成员，仅此而已，以显式减少对该类的副作用。

最后，如果使用了全局命名空间中的任何内容，编译器应该会给出一个错误。正如我认为这在股票 C++ 中是不可能的，是否有编译器扩展，在编译时进行此类检查？

编辑：

最佳我必须启用所有全局命名空间对象、函数等。我想允许使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:40:41.457

也许我错过了一些东西，但如果你不包含任何其他头文件，你将无法访问除了你的类之外的任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:41:23.207

我不认为这是可能的。如果您想拥有一个变量并确保一个类没有访问它。使其成为非全局变量并仅将其传递给相关类

# java - 无法通过 JDBC 驱动程序连接到 *.dbf 文件

> ID：13274120
> 
> 赞同：1
> 
> 时间：2012-11-07T16:38:11.230
> 
> 标签：java, jdbc, dbase

我正在尝试连接到我的 Java 应用程序上的 *.dbf (dBase III) 文件，该应用程序在 Windows Server 2003 系统上运行。我遇到了这个错误，我无法真正理解其含义（OdbcJdbc.java 的来源似乎不可用）：

> [Microsoft][ODBC dBase driver] '(unknown)' 不是有效路径错误

这是我在我的应用程序上运行的代码：

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");

String database = "jdbc:odbc:DRIVER={Microsoft dBase Driver(*.dbf)};DBQ=D:\\dbNeri\\CARISTAT;";

Connection conn = DriverManager.getConnection(database);

Statement s = conn.createStatement();
String selTable = "SELECT * FROM CARISTAT"; 
```

它是否存在能够连接到 dBase 文件的 JDBC 驱动程序，还是我必须导入外部库才能发挥作用？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:07:26.937

好的，伙计们，我终于找到了所有问题的答案。

无需配置 ODBC 数据源，该代码中的错误是我直接在我的连接字符串中定位了我想要访问的文件名。（在这里的代码中，我删除了“\CARISTAT”）。

因此，应用程序运行轻松，不再出现 JDBC 驱动程序错误！！

无论如何感谢您的支持！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:16:49.640

Dbase III 是 16 位产品，而 Windows Server 是 64 位环境，这就是导致兼容性问题的原因。

您必须使用 dBDOS 才能使用基于 DOS 的 dBase 在 64 位平台上运行我们的 dBase 应用程序。

这些网站有更多信息：

*   [http://pmcgee@dbasellc.com](http://pmcgee@dbasellc.com)
*   [http://www.dbase.com](http://www.dbase.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T03:37:32.633

您是否能够为该数据库设置 DSN（使用 ODBC 管理器）？也许您只是没有在该服务器上安装 dBase ODBC 驱动程序？

# qt - 使 cv mat 的缓冲区指向 QImage 的缓冲区

> ID：13274123
> 
> 赞同：0
> 
> 时间：2012-11-07T16:38:18.093
> 
> 标签：qt, opencv

我想让 cv::mat 的缓冲区指向 QImage 的缓冲区，但不将 QImage 的数据复制到 cv::mat 中。

```
cv::Mat const reference_qimage_to_mat(QImage const &img, int format)
{
    cv::Mat mat(img.height(), img.width(), format);

    for(int i = 0; i != mat.rows; ++i)
    {
        //pseudo code, wouldn't work
        //mat.ptr(i) = img.scanLine(i);
    }

    return mat;
} 
```

我尝试通过谷歌搜索答案，但我只能找到如何将 QImage 的数据复制到 cv::mat.Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:56:24.720

该`cv::Mat`对象只是图像数据的标头，因此您可以在对象构造时执行此操作：

```
cv::Mat mat(img.height(), img.width(), type, img.bits()); 
```

`type`取决于您的数据，对于`CV_8UC1`单通道，`CV_8UC3`对于 RGB 等。

# asp.net-mvc - 将站点作为角色部署到 Azure - DirectoryNotFoundException - approot / siteroot

> ID：13274127
> 
> 赞同：0
> 
> 时间：2012-11-07T16:38:25.940
> 
> 标签：asp.net-mvc, azure

我一直在检查我试图自动部署的 WebApp 的事件日志，我能找到的唯一问题是这个（Azure 事件日志）：

```
An unhandled exception occurred. Type: System.IO.DirectoryNotFoundException Process ID: 1784
Process Name: WaIISHost
Thread ID: 1
AppDomain Unhandled Exception for role Website_IN_0
Exception: Could not find a part of the path 'E:\approot'. 
```

所以我戳了一下，果然，那里什么都没有，目录甚至都不存在。但是我随后意识到该站点存在于 E:\sitesroot.... 那么为什么它在 approot 中查找？

这是我的服务定义：

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="WebsiteAzure" xmlns="etc">
  <WebRole name="Website" vmsize="Small">
    <Sites>
      <Site name="Web">
        <Bindings>
          <Binding name="Endpoint1" endpointName="Endpoint1" />
        </Bindings>
      </Site>
    </Sites>
    <Endpoints>
      <InputEndpoint name="Endpoint1" protocol="http" port="80" />
    </Endpoints>
    <Imports>
      <Import moduleName="Diagnostics" />
    </Imports>
  </WebRole>
</ServiceDefinition> 
```

那正确吗？

作为记录，部署在visual studio中运行良好，但我正在尝试使用powershell自动化，这是我遇到问题的地方。我很确定它有它需要的所有 .dll 并且配置和定义是正确的，那么为什么它会在这个目录上窒息呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:49:06.027

我建议使用 New-AzureServiceProject 和 add-azure*webrole 在本地搭建项目，并使用 Publish-AzureServiceProject 打包并发布到 Azure。

# model-view-controller - 将猫鼬连接到猫鼬中的每个MVC文件

> ID：13274128
> 
> 赞同：1
> 
> 时间：2012-11-07T16:38:27.617
> 
> 标签：model-view-controller, mongodb, mongoose

使用 MVC：

```
Node App Directory
   App.js
   Controllers
      UserController.js
      OtherController.js
   Models
      UserModel.js
      OtherModel.js 
```

由于我为我的 dba 使用了 mongoose 和 mongodb，并且在这种情况下，模式被认为是“模型”是 mongoose 模式。每次我想访问它们时，我必须将猫鼬连接到每个控制器和模型文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:39:12.560

您不需要在每个控制器/模型文件中连接到猫鼬，您只需在其中执行一次`App.js`

# javascript - 任何加载的 jquery 滑块插件都返回这个对象没有方法

> ID：13274134
> 
> 赞同：0
> 
> 时间：2012-11-07T16:38:57.927
> 
> 标签：javascript, jquery, plugins, slider

所以，这就是交易：我正在尝试在该站点的主页中实现一个滑块，并且我已经尝试过 NivoSlider，但它一直说该对象没有诸如 nivoSlider 之类的方法。

所以我放弃了它，现在我正在尝试实现 CCSlider，一个付费滑块（是的，我买了它，所以，没有破解：P），现在它说 Object 没有像 ccslider 这样的方法。

我有点迷路了！以下是对脚本的调用和激活滑块的函数：

```
<link type="text/css" rel="stylesheet" href="<?php echo $base_assets; ?>css/ccslider.css">

<script src="<?php echo $base_assets; ?>js/jquery-1.6.1.min.js"></script>
<script src="<?php echo $base_assets; ?>js/jquery-ui-1.8.18.custom.min.js"></script>
<script src="<?php echo $base_assets; ?>js/jquery.easing.1.3.min.js"></script>
<script src="<?php echo $base_assets; ?>js/jquery.ccslider.pack.js"></script>

<script type="text/javascript">
    var $sliderOptions;
    var $containerSlider = $('#home-animation');

    jQuery(document).ready(function() {
        if( !document.createElement('canvas').getContext ) {
            //If no canvas is created it shows the 2d slider.
             sliderOptions = {effectType: '2d', animSpeed: 2500};
        } else {
             //Otherwise, it goes 3d! *-* YEY
             sliderOptions = {effectType: '3d', animSpeed: 2500};
        }
        $($containerSlider).ccslider(sliderOptions);
    });
</script> 
```

所以，我认为没关系。

在你问之前，$base_assets 是正确的，并且任何脚本都没有 404 错误。顺便说一句，我在这个上使用了 CodeIgniter。所以....任何人都可以为我点亮一些东西？

在此先感谢豪尔赫法拉利。

# javascript - jQuery 的 URL 转义

> ID：13274135
> 
> 赞同：0
> 
> 时间：2012-11-07T16:39:02.570
> 
> 标签：javascript, jquery, url, escaping

我有以下网址：

```
http://s7w2p3.scene7.com/is/agm/creativprint/a4?&page=3&wid=354&fmt=jpg,rgb&setAttr.img_page3={source=@Embed%28%27/ugc/8423326.tif%27%29}. 
```

我想通过`jQuery('#divID').css`或将其设置为 div 的背景图像的 url `document.getElementByID('divID').style.backgroundImage`。它不起作用，因为我想我必须逃避其中的一些字符。Javascript 全局函数 escape() 也不能解决问题。

我已在我的 .css 文件中手动将其设置为背景图像，并且可以正常工作。有什么建议么？我已经尝试过使用其他格式的 URL `http://s7w2p3.scene7.com/is/agm/creativprint/a4?&page=3&wid=354&fmt=jpg,rgb`。这样可行。所以问题一定出在剩下的部分：`&setAttr`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:43:48.960

你可能刚刚忘记`url()`了 CSS 属性的周围：

```
$('#id').css('backgroundImage', 'url("http://s7w2p3.scene7.com/is/agm/creativprint/a4?&page=1&wid=354&fmt=jpg,rgb&setAttr.img_page1={source=@Embed%28%27/ugc/4575272.tif%27%29}")'); 
```

这样对我来说很好用：http: [//jsfiddle.net/mPyTJ/1/](http://jsfiddle.net/mPyTJ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:13:59.513

我看不出你的问题是什么。一切似乎都运行良好。[看到这个 jsFiddle](http://jsfiddle.net/g6P62/)。

```
$(document).ready(function(){
    $('#div1').css('backgroundImage','url(http://s7w2p3.scene7.com/is/agm/creativprint/a4?&page=1&wid=354&fmt=jpg,rgb&setAttr.img_page1={source=@Embed%28%27/ugc/4575272.tif%27%29})');
}); 
```

如果您可以使用 jsFiddle 重现您的错误，那将有很大帮助。

# actionscript-3 - 使用 Adob e AIR 获取任何 USB 磁盘信息

> ID：13274139
> 
> 赞同：2
> 
> 时间：2012-11-07T16:39:21.960
> 
> 标签：actionscript-3, air, adobe, usb, disk

我已经为此苦苦挣扎了几天，所以我来这里发帖。

我有一个从 USB 驱动器运行的空中应用程序。我只是希望能够检测文件是否已移动到新的 USB 磁盘上。

有什么方法可以获取磁盘上的任何信息，例如：

*   文件所在的 USB 磁盘中的任何硬件信息（ID、品牌、序列号……）？
*   USB 磁盘大小（不是 spaceAvailable，因为它可能会改变）
*   还有什么不会从一个磁盘复制到另一个磁盘的吗？

我唯一可以访问的是磁盘的名称，但是两个磁盘很容易具有相同的名称。

我也尝试使用“从 Internet 下载”标志，但它似乎不起作用。

如果你能帮助我，非常感谢。

卡尔滕先生

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T04:56:25.740

在 Adob​​e AIR 2.0 之后，他们引入了一个新的 api 来处理 StorageVolumes 您可以在此处获取参考和示例。 [http://help.adobe.com/en_US/air/reference/html/flash/filesystem/StorageVolumeInfo.html](http://help.adobe.com/en_US/air/reference/html/flash/filesystem/StorageVolumeInfo.html)

使用此方法获取所有外部/内部连接的存储卷。

```
import flash.filesystem.StorageVolume;
import flash.filesystem.StorageVolumeInfo;

var volumes = StorageVolumeInfo.storageVolumeInfo.getStorageVolumes(); 
for (var i = 0; i < volumes.length; i++) 
{ 
    var volume:StorageVolume = volumes[i];
    trace ("Name ::" + volume.name);
    trace ("Path ::" + volume.rootDirectory.nativePath); 
    trace ("isRemovable ::" + volume.isRemovable);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T21:46:32.987

这可能是向 AIR 公开该信息的另一种方式：http: [//www.mikechambers.com/blog/2008/01/17/commandproxy-net-air-integration-proof-of-concept/](http://www.mikechambers.com/blog/2008/01/17/commandproxy-net-air-integration-proof-of-concept/)

# ios - 将应用程序升级到 ios 6 时的根视图控制器

> ID：13274142
> 
> 赞同：0
> 
> 时间：2012-11-07T16:39:38.293
> 
> 标签：ios, ios4, ios6, xcode4.5

> **可能重复：**
> [XCode 4.5.1，应用程序窗口应该在应用程序启动结束时有一个根视图控制器](https://stackoverflow.com/questions/13232209/xcode-4-5-1-application-windows-are-expected-to-have-a-root-view-controller-at)

我是 IOS 应用程序开发的菜鸟。

我使用没有情节提要的 Xcode 4.5.1。

我正在升级 IOS 4 应用程序，因为它无法在 IOS 6 设备上正确运行。包含一个问题和五个答案的主视图运行一次，并在用户通过按下带有所需答案的按钮提交后停止，然后它应该重新加载一个新问题和一组新问题。

我在日志输出中得到了臭名昭著的“应用程序窗口应该在应用程序启动结束时有一个根视图控制器”。

我已经阅读并尝试了[7520971](https://english.stackexchange.com/questions/7520971)中的所有评论和解决方案，但无济于事......仍然出现错误，这似乎阻止我正确加载视图。

这是我的 appDelegate.h 中的内容

```
/*
 *  AnimViewAppDelegate.h
 *  AnimView
 *
 *  Created by Administrateur local on 11-01-19.
 *  Copyright 2011 __MyCompanyName__. All rights reserved.
 *
 */

#import <UIKit/UIKit.h>
#import "RootNavigationController.h"

@interface PPScaleAppDelegate : NSObject <UIScrollViewDelegate> {
    UIWindow *window;
    RootNavigationController *RootNavigationViewController;
}
@property (nonatomic, retain) UIWindow *window;
@property (nonatomic, retain) RootNavigationController *RootNavigationViewController;
@end 
```

我的 appDelegate.m

```
//
//  AnimViewAppDelegate.m
//  AnimView
//
//  Created by Administrateur local on 11-01-19.
//  Copyright 2011 __MyCompanyName__. All rights reserved.
//

#import "PPScaleAppDelegate.h"
#import "QuestionView.h"

@implementation  PPScaleAppDelegate
@synthesize window;
@synthesize RootNavigationViewController;

//- (void)applicationDidFinishLaunching:(UIApplication *)application {

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    //Create the main screen
    //CGRect frame = [[UIScreen mainScreen] bounds];
    //self.window = [[UIWindow alloc] initWithFrame:frame];
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; //2012

    //Create the main view controller
    RootNavigationViewController = [[RootNavigationController alloc] initWithNibName:NULL bundle:NULL];
    //[window addSubview:RootNavigationViewController.view];

    [self.window setRootViewController:RootNavigationViewController];

    //Show the main window
    [self.window makeKeyAndVisible];

    return YES;
}

- (void)dealloc {
    [window release];
    [super dealloc];
}

@end 
```

。H

```
//
//  RootNavigationController.h
//  IPhonePPS
//
//  Created by Administrateur local on 11-02-11.
//  Copyright 2011 Le Groupe CDGI Inc. All rights reserved.
//

#import <UIKit/UIKit.h>
#import "QuestionView.h"
#import "ResultView.h"
#import "ResultTableView.h"

@interface RootNavigationController : UINavigationController {

    QuestionView *QuestionViewController;
    ResultView *ResultViewController;
    ResultTableView *ResultTableViewController;

}
@property(nonatomic, assign) QuestionView *QuestionViewController;
@property(nonatomic, assign) ResultView *ResultViewController;
@property(nonatomic, assign) ResultTableView *ResultTableViewController;

-(void)switchToResultMode:(QuestionPath *)QuestionPath;
-(void)switchToResultTableMode;
-(void)switchBack:(BOOL)Reset;
@end 
```

.m

```
//
//  RootNavigationController.m
//  IPhonePPS
//
//  Created by Administrateur local on 11-02-11.
//  Copyright 2011 Le Groupe CDGI Inc. All rights reserved.
//

#import "RootNavigationController.h"

@implementation RootNavigationController
@synthesize QuestionViewController, ResultViewController, ResultTableViewController;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:nibBundleOrNil {

    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

        // Initialization code.
        QuestionViewController = [[QuestionView alloc] initWithNibName:NULL bundle:NULL];
        ResultViewController = [[ResultView alloc] initWithNibName:NULL bundle:NULL];
        ResultTableViewController = [[ResultTableView alloc] initWithNibName:NULL bundle:NULL];

        //Set the navigation bar hidden
        [self setNavigationBarHidden:YES];

        //Push the question view on the stack
        [self pushViewController:self.QuestionViewController animated:YES];

    }
    return self;
}

- (void)dealloc {
    [super dealloc];
}

-(void)switchToResultMode:(QuestionPath *)QuestionPath {
    [self pushViewController:ResultViewController animated:YES];
    [ResultViewController setQuestionPath:QuestionPath];
}

-(void)switchToResultTableMode {
    [self pushViewController:ResultTableViewController animated:YES];
}

-(void)switchBack:(BOOL)Reset{
    if(Reset){
        if([self.viewControllers count] == 3){
            [self popToRootViewControllerAnimated:YES];
        }else {
            [self popViewControllerAnimated:YES];
        }
        [QuestionViewController resetAnswers];
    }else {
        [self popViewControllerAnimated:YES];
    }
}

//-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
//  if([self visibleViewController] == self.ResultTableViewController || toInterfaceOrientation == UIInterfaceOrientationPortrait){
//      return YES;
//  }else {
//      return NO;
//  }
//}

- (BOOL) shouldAutorotate {
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
}

@end 
```

花了整整两天的时间尝试调试，但我放弃了，非常感谢您对这个问题的帮助

公关

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:36:55.633

如果您的导航控制器没有笔尖，最好只使用 [[alloc] init]。此外，您的导航控制器应使用其自己的 rootViewcontroller 进行初始化。我不知道你想成为第一个，但它应该是这样的：

```
 MyFirstViewControllerClass *rootVC = [MyFirstViewControllerClass alloc] initWithNibName:@"MyFirstViewController" bundle:nil];
  RootNavigationController *nav = [[RootNavigationController alloc]initWithRootViewController:rootVC];
  self.window.rootViewController = nav; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:08:16.063

您应该首先使用 rootViewController 初始化您的 RootNavigationController ：

```
[RootNavigationController initWithRootViewcontroller:QuestionViewController]; 
```

您可以从以下位置找到`UINavigationController reference`：

> 因为 UINavigationController 类继承自 UIViewController 类，所以导航控制器有自己的视图，可以通过 view 属性访问。部署导航界面时，您必须将此视图安装为您正在创建的任何视图层次结构的根。

例如，在`-(void)switchBack:(BOOL)Reset;`你 popToRootViewController 甚至没有设置它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T17:14:47.580

您正在调用`[self.window setRootViewController:RootNavigationViewController];`通知 - setRootViewController。它需要一个视图控制器。您的 RootNavigationViewController 是此处引用的 NavigationController，`@interface RootNavigationController : UINavigationController`而不是 viewController。

看起来你应该做这样的事情

```
RootNavigationViewController = [[RootNavigationController alloc] initWithNibName:NULL bundle:NULL];
[window makeKeyAndVisible];
[window addSubview:RootNavigationViewController.view]; 
```

（引用自[Programmatically build/navigation a Navigation Controller](https://stackoverflow.com/questions/7241923/programmatically-build-navigate-a-navigation-controller)）

我不确定是否使用

```
[self pushViewController:self.QuestionViewController animated:YES]; 
```

在 RootNavigationViewController 中与做这样的事情相同

```
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:rootViewController]; 
```

但这应该为您指明调试问题的好方向。

# ios - 在重用的 UITableViewCell 中使用动画更改图像

> ID：13274143
> 
> 赞同：1
> 
> 时间：2012-11-07T16:39:44.343
> 
> 标签：ios, uitableview, uiviewanimation, reusability

在我的应用程序中，我有一个带有帖子的提要。每个帖子由 中的一个单元格表示`UITableView`。帖子有两种状态：已读或未读。每个单元格都有一个`UIImageView`，它必须根据此状态显示不同的图像。我在表控制器的`tableView:cellForRowAtIndexPath:`方法中设置了这个 imageView 的图像。

我还在滚动表格时检查单元格的可见性，当单元格变得可见时，它的状态会发生变化，因此单元格的图像会随着动画而改变。但是，当重用单元格时，此动画无法正常工作。第一个变为可见的单元格已正确设置动画，但第一个单元格之后的所有单元格在出现在屏幕上时都已生成图像，因此不会为它们触发动画。这是我的做法：

```
// This is called when a cell becomes visible
- (void)setIsVisible:(Boolean)isVisible
{

    if (isVisible)
    {         
        UIImage * toImage = [UIImage imageNamed:@"img-cell-read.png"];

        [UIView transitionWithView:self.myImageView
                          duration:2.0f
                           options:UIViewAnimationOptionTransitionCrossDissolve
                        animations:^{
                            self.myImageView.image = toImage;
                        } completion:NULL];
    }
_isVisible = isVisible;

} 
```

我意识到当我重用一个单元格时，我应该以某种方式重置这个动画并重新启动它，但我不明白我应该怎么做。此外，如果我尝试为单元格的背景颜色而不是图像设置动画，它可以很好地重复使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T16:55:24.453

您可以覆盖 UITableViewCell 中的 prepareForReuse 方法以取消任何动画并将图像重置为原始状态。

```
- (void)prepareForReuse{
    [super prepareForReuse];

    [self.myImageView.layer removeAllAnimations];
    self.myImageView.image = YOUR_INITIAL_UIIMAGE;
} 
```

还要确保导入石英：

```
#import <QuartzCore/QuartzCore.h> 
```

# c# - 使用具有 4.5 目标的 .net 4 项目？

> ID：13274145
> 
> 赞同：3
> 
> 时间：2012-11-07T16:39:56.197
> 
> 标签：c#, .net, windows-8

我是 .NET 和 c# 的新手。

.NET 4.0 有很多很好的例子，但是当我做 NUGET 时，它抱怨目标 .net 版本不匹配。

我正在为 Windows 8 和 Windows Phone 8 开发，所以他们使用 .NET 4.5。

有什么方法可以转换旧项目并强制它们使用 .NET 4.5？还是我需要等待作者更新他的项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T16:43:50.273

您可以使用 .NET 4.0 为 Windows 8 进行开发，这不是问题。您还可以将 .NET 4.0 项目加载到 Visual Studio 2012 中，然后根据需要将项目的属性更改为 .NET 4.5。此外，所有 API 都应无需修改即可自行使用。

那么您是否有一个适用于 .NET 4.5 的项目，并且您正在尝试从 NUGET 或什么添加 .NET 4.0 的东西？

自然地，WinRT 项目与“普通”.NET 项目完全不同，因此它们需要转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:42:38.543

如果您正在开发 Windows 应用商店或手机应用程序，您将需要更新的项目，因为它是一个单独的运行时。它是“4.5”，但不是标准的 4.5 运行时。如果您正在使用 .NET 4.5 开发桌面应用程序，您应该能够毫无问题地使用 .NET 4（及更早版本）程序集。

如果可能的话，这里最好的选择是让所有目标平台都可以使用可[移植类库](http://msdn.microsoft.com/en-us/library/gg597391.aspx)的依赖关系，但这需要以这种方式设计其他项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:42:21.450

取决于您在代码中使用的引用，如果它们没有受到 4.0 到 4.5 对话的影响，那么您很幸运，但是如果不是这种情况，您将需要作者更新项目代码以匹配 4.5。

# xcode4.5 - XCode：在构建时复制捆绑资源

> ID：13274147
> 
> 赞同：3
> 
> 时间：2012-11-07T16:40:10.087
> 
> 标签：xcode4.5

在 xCode 中，我可以将资源（文件夹、文档）添加到“复制捆绑资源阶段”。第一次，资源被正确部署。但是每次之后，它们都不会更新。我必须再次清理和重建。我错过了一些重要的设置吗？如果您部署 JS 文件并更改其中的代码，这尤其令人讨厌。模拟器仍将运行旧的 JS 代码。

# ipad - 在后台运行核心位置的 ipad 应用程序崩溃

> ID：13274148
> 
> 赞同：2
> 
> 时间：2012-11-07T16:40:09.913
> 
> 标签：ipad, ios6, core-location

我已经为此工作了几天。知道这意味着什么吗？请帮忙！让我知道是否需要更多信息

> EXC_BAD_ACCESS (SIGSEGV)
> 
> 线程 11 名称：调度队列：com.apple.CoreLocation.ConnectionClient.0x200826b0.events 线程 11 崩溃：0 libdispatch.dylib 0x387b2420 dispatch_sync_f$VARIANT$mp + 0 1 CoreLocation 0x393c8088 CLConnectionClient::setCachedResponse(CLConnectionMessage*, bool (block_pointer)( ））+ 76 2 CoreLocation 0x393c8558 __setDefaultMessageHandler_onQueue_block_invoke_0 + 28 3 CoreLocation 0x393c7070 __setEventHandler_block_invoke_0 + 344 4 libxpc.dylib 0x367ef7e4 _xpc_connection_mach_event + 768 5 libdispatch.dylib 0x387b6524 _dispatch_mach_msg_invoke $ $ VARIANT熔点+ 120 6 libdispatch.dylib 0x387b2e8e _dispatch_queue_drain $ $ VARIANT熔点+ 78 7 libdispatch .dylib 0x387b67b2 _dispatch_mach_invoke $ $ VARIANT熔点+ 158 8 libdispatch.dylib 0x387b2e8e _dispatch_queue_drain $ $ VARIANT熔点+ 78 9 libdispatch.dylib 0x387b2dbc _dispatch_queue_invoke $ $ VARIANT熔点+ 36 10 libdispatch.dylib 0x387b2e8e _dispatch_queue_drain $ $ VARIANT熔点+ 78 11 libdispatch.dylib 0x387b2dbc _dispatch_queue_invoke $ $ VARIANT熔点+ 36 12 libdispatch.dylib 0x387b391a _dispatch_root_queue_drain + 182 13 libdispatch.dylib 0x387b3abc _dispatch_worker_thread2 + 80 14 libsystem_c.dylib 0x34097a0e _pthread_wqthread + 358 15 libsystem_c.dylib 0x340978a0 start_wqthread + 4dylib 0x387b2e8e _dispatch_queue_drain $ $ VARIANT熔点+ 78 9 libdispatch.dylib 0x387b2dbc _dispatch_queue_invoke $ $ VARIANT熔点+ 36 10 libdispatch.dylib 0x387b2e8e _dispatch_queue_drain $ $ VARIANT熔点+ 78 11 libdispatch.dylib 0x387b2dbc _dispatch_queue_invoke $ $ VARIANT熔点+ 36 12 libdispatch.dylib 0x387b391a _dispatch_root_queue_drain + 182 13 libdispatch.dylib 0x387b3abc _dispatch_worker_thread2 + 80 14 libsystem_c.dylib 0x34097a0e _pthread_wqthread + 358 15 libsystem_c.dylib 0x340978a0 start_wqthread + 4dylib 0x387b2e8e _dispatch_queue_drain $ $ VARIANT熔点+ 78 9 libdispatch.dylib 0x387b2dbc _dispatch_queue_invoke $ $ VARIANT熔点+ 36 10 libdispatch.dylib 0x387b2e8e _dispatch_queue_drain $ $ VARIANT熔点+ 78 11 libdispatch.dylib 0x387b2dbc _dispatch_queue_invoke $ $ VARIANT熔点+ 36 12 libdispatch.dylib 0x387b391a _dispatch_root_queue_drain + 182 13 libdispatch.dylib 0x387b3abc _dispatch_worker_thread2 + 80 14 libsystem_c.dylib 0x34097a0e _pthread_wqthread + 358 15 libsystem_c.dylib 0x340978a0 start_wqthread + 4dylib 0x387b2e8e _dispatch_queue_drain $ $ VARIANT熔点+ 78 11 libdispatch.dylib 0x387b2dbc _dispatch_queue_invoke $ $ VARIANT熔点+ 36 12 libdispatch.dylib 0x387b391a _dispatch_root_queue_drain + 182 13 libdispatch.dylib 0x387b3abc _dispatch_worker_thread2 + 80 14 libsystem_c.dylib 0x34097a0e _pthread_wqthread + 358 15 libsystem_c.dylib 0x340978a0 start_wqthread + 4dylib 0x387b2e8e _dispatch_queue_drain $ $ VARIANT熔点+ 78 11 libdispatch.dylib 0x387b2dbc _dispatch_queue_invoke $ $ VARIANT熔点+ 36 12 libdispatch.dylib 0x387b391a _dispatch_root_queue_drain + 182 13 libdispatch.dylib 0x387b3abc _dispatch_worker_thread2 + 80 14 libsystem_c.dylib 0x34097a0e _pthread_wqthread + 358 15 libsystem_c.dylib 0x340978a0 start_wqthread + 4dylib 0x34097a0e _pthread_wqthread + 358 15 libsystem_c.dylib 0x340978a0 start_wqthread + 4dylib 0x34097a0e _pthread_wqthread + 358 15 libsystem_c.dylib 0x340978a0 start_wqthread + 4

```
- (void)startupLocationManager
{
    // startup location manager for background processing
    if (self.locationManager == nil)
    {
        self.locationManager = [[CLLocationManager alloc] init];
        self.locationManager.delegate = self;
        self.locationManager.distanceFilter = kCLDistanceFilterNone;
        self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;
        [self.locationManager startUpdatingLocation];

    }
}

- (void)stopLocationManager
{
    if (self.locationManager)
    {
        [self.locationManager stopUpdatingLocation];
        self.locationManager.delegate = nil;
        self.locationManager = nil;

        if (self.isInBackground == YES)
        {
            [self startupLocationManager];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:59:40.667

我在其他帖子的帮助下找到了解决方案。原来是时间问题。我创建了另一种方法来重置我的位置管理器，并延迟调用它。这解决了一切。希望这对你也有帮助。

```
- (void)stopLocationManager
{
    if (locationManager)
    {
        [locationManager stopUpdatingLocation];
        [self performSelector:@selector(discardLocationManager) withObject:nil afterDelay:0.1];
    }
}

- (void) discardLocationManager
{
    locationManager.delegate = nil;
    locationManager = nil;

    if (self.isRestart == YES)
    {
        [self performSelector:@selector(startupLocationManager) withObject:nil afterDelay:0.1];
    }
} 
```

# python - 如何使用简单的控件和 python 后端创建网页

> ID：13274149
> 
> 赞同：0
> 
> 时间：2012-11-07T16:40:18.983
> 
> 标签：python, web

我有一个 python 函数，它接受文本和一些参数作为输入。我想用一些控件构建一个简单的网页：

1.  文件上传控件
2.  一个文本框
3.  一些单选按钮来选择参数
4.  提交按钮

用户将使用上传控件或在框中输入一些文本。提交后，我的 python 函数将在后端运行并返回结果显示在页面上。

作为一个完整的网络新手，我想知道解决这个问题的最简单方法是什么。

我不确定它将在哪台机器上运行以及我将拥有什么权限，所以让我们假设一个通用的 LAMP 服务器（如果这有意义的话）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:51:12.897

为了帮助自己快速开始使用 flask/backbone.js 网络项目，我创建了一个“Hello World”网络脚手架/骨架来让自己更快地开始。它的存在也是为了让我想起 flask/jinja/backbone.js 的基本功能是如何工作的。您可以从[github](https://github.com/softwaredoug/flask_scaffold)克隆它以开始使用。

# php - 正则表达式 - 抓取 javascript

> ID：13274150
> 
> 赞同：0
> 
> 时间：2012-11-07T16:40:20.667
> 
> 标签：php, regex, dom, web-scraping

我正在尝试从使用 cURL 获取的 HTML 页面中抓取一些数据。我一直在使用一个名为 ganon 的 PHP DOM 库；但在这种情况下，我需要的数字是 Javascript。

```
{
  label: "Views<span class='Footnote'>*</span>",
  type: "other",
  id: "Views",
  value: "7"
} 
```

我只需要`7`. 因此，如果我可以匹配`id: "Views",`并完成所有操作，`}`并且只返回数字；我相信这是可能的——我一直在努力，但 REGEX 肯定不是我的强项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:44:57.117

我想说这很简单：

```
$value = preg_replace('(.*value: "(\d+)".*)s', '\1', $scrape); 
```

给你一串`7`.

您仍然可以为该`id: "Views",`部分添加前缀，我将其留作练习。

# d3.js - d3js 缩放、转换和翻译

> ID：13274151
> 
> 赞同：10
> 
> 时间：2012-11-07T16:40:23.757
> 
> 标签：d3.js

我创建了[nycMap](https://github.com/climboid/nycMap)，一个使用 angularJS (MVC)、yeoman (build)、d3 (mapping) 和 geoJSON (geo data) 的项目。

一切都很好，但我确实必须花费相当多的时间来获得正确的比例和翻译。我想知道如何自动确定地图将以什么比例显示其最佳状态以及翻译中的 x 和 y 值？

```
'use strict';

japanAndCo2App.controller('MainCtrl', function($scope) {

 function makeJapanAll(){
    var path, vis, xy;

    xy = d3.geo.mercator().scale(16000).translate([-5600,2200]);
    path = d3.geo.path().projection(xy);
    vis = d3.select("#japanAll").append("svg:svg").attr("width", 1024).attr("height", 700);
    d3.json("data/JPN_geo4.json", function(json) {
      return vis.append("svg:g")
          .attr("class", "tracts")
          .selectAll("path")
          .data(json.features).enter()
          .append("svg:path")
          .attr("d", path)
          .attr("fill",function(d,i){ return d.properties.color || "transparent"});
    });
  }
  makeJapanAll();
}); 
```

（如果您对代码感兴趣，它都[在 github 上](https://github.com/climboid/nycMap)。地图的代码在[scripts/controllers/main.js](https://github.com/climboid/nycMap/blob/master/app/scripts/controllers/main.js)中，与上图相同。）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-18T10:03:28.083

我有同样的问题。但是当你有一个边界框时，这很容易做到，这可以从 GeoJSON 中确定（就像 meetamit 说的那样），或者在创建 GeoJson 时。以及所需 SVG 的宽度。

我将从变量`lattop, lonleft, lonright, width`和`height`geojson 的边界框和图像的尺寸开始。我还没有忙于根据纬度差异计算一个合适的高度。所以高度只是估计足够大以适合图像。其余的应该从代码中清楚：

```
var xym = d3.geo.mercator();

// Coordinates of Flanders
var lattop = 51.6;
var lonleft = 2.4;
var lonright = 7.7;
var width = 1500;
var height =1000;

// make the scale so that the difference of longitude is 
// exactly the width of the image
var scale = 360*width/(lonright-lonleft);
xym.scale(scale);

// translate the origin of the map to [0,0] as a start, 
// not to the now meaningless default of [480,250]
xym.translate([0,0]);

// check where your top left coordinate is projected
var trans = xym([lonleft,lattop]);
// translate your map in the negative direction of that result
xym.translate([-1*trans[0],-1*trans[1]]);

var path = d3.geo.path().projection(xym);

var svg = d3.select("body").append("svg").attr("width",width).attr("height",height); 
```

请注意，如果您越过日期变更线（180 度），则必须将溢出考虑在内。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-07T19:56:16.313

鉴于这种：

```
xy = d3.geo.mercator().scale(someScale).translate([0, 0]); 
```

`someScale`是使用墨卡托投影进行投影时**整个世界****的像素宽度。**所以，如果你的 json 数据有整个世界的轮廓——从 lat/lng -180,90 到 latLng 180,-90——如果是 1024，那么世界将被绘制成完全适合 1024x1024 像素正方形。这就是您在[此 Google 地图视图](https://maps.google.com/?ll=-0.35156,0.351563&spn=163.944564,10.898438&t=m&z=2)中看到的内容（嗯……有点……不完全……请继续阅读……）。**`someScale`**

 **但这还不够。当世界以 1024px 绘制时，没有任何平移，lat/lng 0,0（即世界的“中间”）将位于投影地图的 0,0 像素（即左上角）。在这些条件下，整个北半球和西半球的 x 或 y 值为负，因此落在绘制区域之外。此外，在这些条件下，世界的右下角（即 lat/lng -90, 180）将位于 1024x1024 正方形的正中间（即像素 512,512）。

因此，为了使世界在此处描述的正方形中居中，您需要`translate`将地图在 X 和 Y 方向上缩小一半宽度。即你需要

```
xy = d3.geo.mercator().scale(1024).translate([512, 512]); 
```

这将为您提供我链接到的谷歌地图视图。

如果您的 json 数据只有世界的一部分（例如，纽约市或纽约州），则使用此 xy 投影绘制它会将轮廓呈现在相对于整个 1024x1024 跨世界区域的正确地理位置。所以它看起来很小，有很多空白。

挑战在于如何缩放和平移投影，以使相关区域充满 1024x1024 正方形。而且......到目前为止，我还没有回答这个问题，但我希望这个解释能够为您指明正确的方向来弄清楚这个数学。当我有更多时间时，我也会尝试继续回答。：/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T19:12:19.733

[这里](http://www.larsko.org/v/igdp/)有一个例子，它从 geojson 获取国家的边界​​，然后缩放并将地图转换到那个国家。代码有点难看；但是，将来会努力使这更容易（请参阅[this](https://github.com/mbostock/d3/pull/330)和[this issue](https://github.com/mbostock/d3/pull/846)）。**

# dom - 有谁知道详细文档的位置，这些文档涵盖了使用带有 li ul td 之类的 html 标签的 watir 来导航 DOM？

> ID：13274160
> 
> 赞同：1
> 
> 时间：2012-11-07T16:40:43.513
> 
> 标签：dom, tags, watir

我遇到了以下代码的意外结果。我从 -unordered list- 中获取 -list- 值，该值位于我以“Employee_error_list”为目标的那个之后，为什么响应不将自身限制在 -unordered-list- 和 /-unordered-list- 之间的内容？

```
theList = browser.ul(:id, "Employee_error_list")
theList.lis.each do |li|
  puts li.text
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:43:40.517

## 回答有关文档的问题

您提到的列表类型元素是[ElementCollection](http://rubydoc.info/gems/watir-webdriver/Watir/ElementCollection)对象。

*   我找到的最好的文档是[Watir-Webdriver RDoc Documentation](http://rubydoc.info/gems/watir-webdriver/frames)。
*   可以在[此处](https://web.archive.org/web/20130719051431/http://wiki.openqa.org/display/WTR/Collections+of+HTML+Elements)找到这些列表。
*   Watir 支持的元素的完整[列表在这里](https://github.com/watir/watir/wiki/HTML-Elements-Supported-by-Watir)

您可以使用您提供的代码示例遍历 ElementCollection：

```
theList = browser.ul(:id, "Employee_error_list")
theList.lis.each do |li|
  puts li.text
end 
```

至于为什么返回的元素不限于`ul`您指定的，我不确定没有看到页面 HTML 的示例。你这样做的方式*应该可以*工作，但如果你看到意外的行为，它可能是一个错误。

# java - Java 的 Robot.createScreenCapture 方法在一台机器上花费的时间更长

> ID：13274162
> 
> 赞同：0
> 
> 时间：2012-11-07T16:40:46.437
> 
> 标签：java, graphics, screenshot

我正在使用 Java 的 Robot 类来捕获小尺寸的屏幕截图。在 machine1 上，使用 GTX460，我可以在 33ms 内截屏，但在另一台具有相同处理器的机器上，但使用 GTX630，需要 45ms 以上。两台机器都处于 16 位监控模式。

关于可能出现问题的任何指示？我检查了显卡设置，两台机器看起来都一样。这是我正在使用的电话

```
Robot robot = new Robot();
BufferedImage myImage = robot.createScreenCapture(rectangle); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:43:14.483

也许监视器大小不同，会有更多像素来捕获和写入缓冲图像。

# youtube - 带有 Fancybox 的 Internet Explorer IE9 上的 YouTube 视频出现白屏

> ID：13274164
> 
> 赞同：1
> 
> 时间：2012-11-07T16:40:52.423
> 
> 标签：youtube, fancybox

我正在使用 Shopify 购物车，其中包含用于图像的 fancybox 脚本。它在图像方面非常适用，我添加了一些脚本让它也可以与 YouTube 视频一起使用。我的脚本并不出色，但它适用于 FireFox 和 Chrome - 但在 IE9 上（不确定是否有其他版本）我得到一个覆盖视频的白屏。

[http://cycletek.com/pages/test](http://cycletek.com/pages/test)

谢谢你的帮助！

# android - Android Facebook SDK v3.0 SSO LoginButton 返回一个 null GraphUser

> ID：13274165
> 
> 赞同：5
> 
> 时间：2012-11-07T16:40:54.610
> 
> 标签：android, facebook-graph-api, facebook-android-sdk

所以我有一个简单的登录按钮，可以在我的 oncreate 中执行此操作：

```
 mLoginButton = (LoginButton)findViewById(R.id.connect_facebook_button);
    mLoginButton.setApplicationId(.getResources().getString(R.string.app_id));
    mLoginButton.setUserInfoChangedCallback(new LoginButton.UserInfoChangedCallback() {
        public void onUserInfoFetched(GraphUser user) {
            setUser(user); // Just sets mUser to be this user
            try {
            Toast.makeText(this, mUser.getFirstName(), Toast.LENGTH_SHORT).show();
            } catch (Exception FacebookException) {
                FacebookException.printStackTrace();
            }

        }
    }); 
```

所有这些都被成功调用，包括 onUserInfoFetched。

问题是，在任何情况下，我的 Graphuser 用户都是空的。

我的 appID 是正确的，我的 android 哈希是他们给我的调试程序（在示例应用程序上测试运行良好），登录屏幕确实弹出......不太确定从这里去哪里。

另外，如果我按两次按钮，我会得到一个错误：

```
an attempt was made to open a session that has a pending request 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T20:16:24.823

哎呀！忘记我的活动结果了！

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data); 
} 
```

那成功了。

# javascript - 如何使用 jquery 弹出第一个数组元素？

> ID：13274166
> 
> 赞同：13
> 
> 时间：2012-11-07T16:40:54.297
> 
> 标签：javascript, jquery

我正在迭代一个 json 数据数组，但需要在迭代之前删除第一个元素。如何删除初始元素？这是我到目前为止所拥有的：

```
 $.post('player_data.php', {method: 'getplayers', params: $('#players_search_form').serialize()}, function(data) {

        if (data.success) {

           // How do I remove the first element ?

            $.each(data.urls, function() {
                ...
            });
        }

    }, "json"); 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-07T16:42:34.663

普通的javascript会做：

```
data.urls.shift() 
```

上[`shift()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/shift)方法：

> 从数组中删除第一个元素并返回该元素。此方法更改数组的长度。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/shift](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/shift)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T16:42:46.073

有一种类似pop的方法，但是从前面代替

```
data.urls.shift() 
```

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/shift](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/shift)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T16:46:27.113

如果`data.url`只是一个数组，解决这个问题最简单的方法是使用 Javascript 的[splice()](http://www.w3schools.com/jsref/jsref_splice.asp)函数：

```
if (data.success) {
  //remove the first element from the urls array
  data.urls.splice(0,1);
  $.each(data.urls, function() {
     ... 
```

如果您需要第一个 url 的值，也可以使用[shift() ：](http://www.w3schools.com/jsref/jsref_shift.asp)

```
if (data.success) {
  //remove the first element from the urls array
  var firstUrl = data.urls.shift();
  //use the value of firstUrl
  ...
  $.each(data.urls, function() {
     ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T16:43:19.520

您可以使用

```
.shift() 
```

它将从数组中删除第一个元素

在你的情况下

```
data.urls.shift() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T16:43:21.903

您可以使用`shift()`Array 类中的函数，该函数从数组中删除（并返回 - 尽管您可以丢弃它）第一个元素。查看[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/shift)以获取更多信息。

```
data.urls.shift(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T16:43:24.153

在 JavaScript 中，您可以使用以下方法删除数组的第一个元素[`shift()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/shift)：

```
// your array
data.urls;

// remove first element
var firstElem = data.urls.shift();

// do something with the rest 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-07T16:44:06.680

要在 javascript 中删除数组的第一项（如果您使用 jquery，它也可以工作）使用`data.urls.shift()`. 这也将返回第一项，但如果您不想使用它，可以忽略返回值。有关详细信息，请参阅[http://www.w3schools.com/jsref/jsref_shift.asp](http://www.w3schools.com/jsref/jsref_shift.asp)。

# asp.net-mvc - 如何在 ASP.NET 中使用带有自定义会话密钥参数的会话

> ID：13274169
> 
> 赞同：3
> 
> 时间：2012-11-07T16:41:10.493
> 
> 标签：asp.net-mvc, session, authentication, session-variables

是否可以使用带有 URL 的 ASP.NET 会话状态

```
http://myserver/somesite?sessionKey=thekey 
```

问题是，我必须为客户端软件编写一个站点，该软件通过如下请求对用户进行身份验证

```
http://myserver/somesite?user=xyz&passwd=xyz 
```

如果身份验证成功，客户端期望得到一个会话密钥作为结果。然后，此会话密钥将用作查询中的变量，如上所示。客户端不支持 cookie。

如何使用 ASP.NET MVC 4 实现此行为？

PS：我知道这绝对不是要走的路，但我无法改变客户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:46:55.210

如果我理解正确，你可以试试，对吧？

*（我们已经遇到过，搜索引擎很痛苦）*

```
<sessionState mode="InProc" timeout="5" cookieless="true" /> 
```

我可以说它正在工作生成的 url 而不是

“http://server/Product/en-GB/MyEntity”

就是现在：

“http://server/Product/(S(rxavnpuw05o3fmy3tjnuystr))/en-GB/MyEntity”

# java - 如何将我的模式匹配结果排序为完全匹配、半匹配等

> ID：13274170
> 
> 赞同：0
> 
> 时间：2012-11-07T16:41:13.753
> 
> 标签：java, sorting

> **可能重复：**
> [正则表达式与短语中的子词不匹配](https://stackoverflow.com/questions/13272988/regular-expression-not-matching-subwords-in-phrase)

我的程序显示匹配结果，但我想将结果排序为完全匹配（100%）、半匹配等等。我的文本文件包含以下行：

1.  红车

2.  红色的

3.  车

所以如果我搜索：“红色汽车”。我得到以下结果

1.  红车

2.  红色的

3.  车

所以我想要做的是将找到的结果排序如下：

1.  “红车”100%匹配

2.  “红色” 40% 匹配

3.  “汽车” 40% 匹配

任何帮助表示赞赏。

任何帮助表示赞赏。我的代码如下：

```
public static void main(String[] args) {
  // TODO code application logic here
  String strLine;
  try{
    // Open the file that is the first 
    // command line parameter   
    FileInputStream fstream = new FileInputStream("C:\\textfile.txt"");
    // Get the object of DataInputStream
    DataInputStream in = new DataInputStream(fstream);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));

    Scanner input  = new Scanner (System.in);         
    System.out.print("Enter Your Search:  ");   // String key="red or yellow";
    String key = input.nextLine();

    while ((strLine = br.readLine()) != null) {     
      Pattern p = Pattern.compile(key); // regex pattern to search for
      Matcher m = p.matcher(strLine);  // src of text to search
      boolean b = false;
      while(b = m.find()) {                       
        System.out.println( " " + m.group()); // returns index and match
        // Print the content on the console
      }
    }
    //Close the input stream
    in.close();              
  }catch (Exception e){//Catch exception if any
    System.err.println("Error: " + e.getMessage());
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:13:44.053

假设您正在搜索“Red”或“Yellow”，and or 是您需要的唯一逻辑运算符（没有“and”或“xor”），并且您不想在搜索中使用任何通配符或正则表达式对于，然后我会简单地循环遍历，尝试将每个字符串依次匹配该行。在伪代码中，类似于：

```
foreach (thisLine: allLinesInTheFile) {
    numOfCharsMatching = 0
    foreach (thisString: allSearchStrings) {
         if (thisLine.contains(thisString) {
               numOfCharsMatching = numOfCharsMatching + thisString.length
         }
    }
    score = ( numOfCharsMatching / thisLine.length ) * 100
} 
```

如果您不希望空格计入您的分数，那么您需要将它们从 thisString.length 中删除（并且不允许它们出现在您的搜索词中）

另一个问题是，如果匹配可以重叠，numOfCharsMatching 将不正确（即，如果在“棕色行”中搜索“行”或“棕色”，则会说有 11 个字符匹配，比字符串的长度长。你可以使用 BitSet 来跟踪匹配中涉及的字符，例如：

```
foreach (thisLine: allLinesInTheFile) {
    whichCharsMatch = new BitSet()
    foreach (thisString: allSearchStrings) {
         if (thisLine.contains(thisString) {
               whichCharsMatch.set(startPositionOfMatch, endPositionOfMatch, true)
         }
    }
    score = ( numOfCharsMatching / thisLine.length ) * 100
} 
```

查看 BitSet javadoc，尤其是 set 和 cardinality 方法

# r - XCMS Package - Retention time

> ID：13274171
> 
> 赞同：0
> 
> 时间：2012-11-07T16:41:19.527
> 
> 标签：r, bioconductor

Is there a simple way to get the list/array of retention times from a `xcmsRaw` object?

Example Code:

```
xraw <- xcmsRaw(cdfFile) 
```

So for example getting information from it :

```
xraw@env$intensity 
```

or

```
xraw@env$mz 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T20:12:40.617

You can see what slots are available in your `xcmsRaw` instance with

```
> slotNames(xraw)
 [1] "env"                   "tic"                   "scantime"             
 [4] "scanindex"             "polarity"              "acquisitionNum"       
 [7] "profmethod"            "profparam"             "mzrange"              
[10] "gradient"              "msnScanindex"          "msnAcquisitionNum"    
[13] "msnPrecursorScan"      "msnLevel"              "msnRt"                
[16] "msnPrecursorMz"        "msnPrecursorIntensity" "msnPrecursorCharge"   
[19] "msnCollisionEnergy"    "filepath" 
```

What you want is `xraw@msnRt` - it is a `vector` of `numeric`.

The `env` slot is a environment that stores 3 variables:

```
> ls(xraw@env)
[1] "intensity" "mz"        "profile" 
```

More details on the class itself at `class?xcmsRaw`.

**EDIT:** The `msnRt` slot is populated only if you specify `includeMSn = TRUE` and your input file must be in `mzXML` or `mzML`, not in `cdf`; if you use the `faahKO` example from `?xcmasRaw`, you will see that

```
xr <- xcmsRaw(cdffiles[1], includeMSn = TRUE)
Warning message:
In xcmsRaw(cdffiles[1], includeMSn = TRUE) :
  Reading of MSn spectra for NetCDF not supported 
```

Also, `xr@msnRt` will only store the retention times for MSn scans, with `n > 1`. See the `xset@rt` where `xset` is an `xcmsSet` instance for the raw/corrected MS1 retention times as provided by `xcms`.

**EDIT2:** Alternatively, have a go with the [`mzR`](http://www.bioconductor.org/packages/release/bioc/html/mzR.html) package

```
> library(mzR)
> cdffiles[1]
[2] "/home/lgatto/R/x86_64-unknown-linux-gnu-library/2.16/faahKO/cdf/KO/ko15.CDF"
> xx <- openMSfile(cdffiles[1])
> xx
Mass Spectrometry file handle.
Filename:  /home/lgatto/R/x86_64-unknown-linux-gnu-library/2.16/faahKO/cdf/KO/ko15.CDF 
Number of scans:  1278 
> hd <- header(xx)
> names(hd)
 [1] "seqNum"                   "acquisitionNum"          
 [3] "msLevel"                  "peaksCount"              
 [5] "totIonCurrent"            "retentionTime"           
 [7] "basePeakMZ"               "basePeakIntensity"       
 [9] "collisionEnergy"          "ionisationEnergy"        
[11] "highMZ"                   "precursorScanNum"        
[13] "precursorMZ"              "precursorCharge"         
[15] "precursorIntensity"       "mergedScan"              
[17] "mergedResultScanNum"      "mergedResultStartScanNum"
[19] "mergedResultEndScanNum"  
> class(hd)
[1] "data.frame"
> dim(hd)
[1] 1278   19 
```

but you will be outside of the default `xcms` pipeline if you take this route (although Steffen Neumann, from `xcms`, does know `mzR` very well, oubviously).

Finally, you are better of to use the Bioconductor [mailing list](http://bioconductor.org/help/mailing-list/) of the [`xcms` online forum](http://www.metabolomics-forum.com/viewforum.php?f=10) if you want to maximise your chances to get feedback from the `xcms` developers.

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T01:03:04.717

Good answer but i was looking for this :

```
xraw <- xcmsRaw(cdfFile)
dp_index <- which(duplicated(rawMat(xraw)[,1]))
xraw_rt_dp <- rawMat(xraw)[,1]
xrawData.rt <- xraw_rt_dp[-dp_index] 
```

Now :

```
xrawData.rt #contains the retention time. 
```

Observation --> Using mzr package:

```
nc     <- mzR:::netCDFOpen(cdfFile)
ncData <- mzR:::netCDFRawData(nc)
mzR:::netCDFClose(nc)

ncData$rt #contains the same retention time for the same input !!! 
```

# php - 使用 curl 和 api v3 在 Youtube 上上传视频

> ID：13274173
> 
> 赞同：13
> 
> 时间：2012-11-07T16:41:22.710
> 
> 标签：php, curl, upload, youtube-api

我会在 PHP 中使用带有 curl 的 Youtube API v3 上传视频，如下所述：[https ://developers.google.com/youtube/v3/docs/videos/insert](https://developers.google.com/youtube/v3/docs/videos/insert)

我有这个功能

```
function uploadVideo($file, $title, $description, $tags, $categoryId, $privacy)
{
    $token = getToken(); // Tested function to retrieve the correct AuthToken

    $video->snippet['title']         = $title;
    $video->snippet['description']   = $description;
    $video->snippet['categoryId']    = $categoryId;
    $video->snippet['tags']          = $tags; // array
    $video->snippet['privacyStatus'] = $privacy;
    $res = json_encode($video);

    $parms = array(
        'part'  => 'snippet',
        'file'  => '@'.$_SERVER['DOCUMENT_ROOT'].'/complete/path/to/'.$file
        'video' => $res
    );

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, 'https://www.googleapis.com/upload/youtube/v3/videos');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $parms);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Authorization: Bearer '.$token['access_token']));
    $return = json_decode(curl_exec($ch));
    curl_close($ch);

    return $return;
} 
```

但它返回这个

```
stdClass Object
(
    [error] => stdClass Object
        (
            [errors] => Array
                (
                    [0] => stdClass Object
                        (
                            [domain] => global
                            [reason] => badContent
                            [message] => Unsupported content with type: application/octet-stream
                        )

                )

            [code] => 400
            [message] => Unsupported content with type: application/octet-stream
        )

) 
```

该文件是 MP4。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-27T02:55:47.263

更新版本：现在使用自定义上传 url 并在上传过程中发送元数据。整个过程需要2个请求：

1.  获取自定义上传位置

    首先，对上传 url 发出 POST 请求：

    ```
    "https://www.googleapis.com/upload/youtube/v3/videos" 
    ```

    您将需要发送 2 个标头：

    ```
    "Authorization": "Bearer {YOUR_ACCESS_TOKEN}"
    "Content-type": "application/json" 
    ```

    您需要发送 3 个参数：

    ```
    "uploadType": "resumable"
    "part": "snippet, status"
    "key": {YOUR_API_KEY} 
    ```

    您需要在请求正文中发送视频的元数据：

    ```
     {
            "snippet": {
                "title": {VIDEO TITLE},
                "description": {VIDEO DESCRIPTION},
                "tags": [{TAGS LIST}],
                "categoryId": {YOUTUBE CATEGORY ID}
            },
            "status": {
                "privacyStatus": {"public", "unlisted" OR "private"}
            }
        } 
    ```

    从此请求中，您应该会在标题中获得带有“位置”字段的响应。

2.  POST 到自定义位置以发送文件。

    对于上传，您需要 1 个标头：

    ```
    "Authorization": "Bearer {YOUR_ACCESS_TOKEN}" 
    ```

    并将文件作为您的数据/正文发送。

如果您仔细阅读他们的客户端是如何工作的，您会看到他们建议您在返回代码 500、502、503 或 504 的错误时重试。显然，您希望在重试之间有一个等待期和最大重试次数。它每次都在我的系统中工作，尽管我使用的是 python & urllib2 而不是 cURL。

此外，由于自定义上传位置，这个版本是上传恢复能力，虽然我还没有需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:23:43.457

不幸的是，我们还没有从 PHP 上传 YouTube API v3 的具体示例，但我的一般建议是：

*   使用[PHP 客户端库](https://code.google.com/p/google-api-php-client/)而不是 cURL。
*   将您的代码基于为 Drive API 编写的[这个示例。](https://developers.google.com/drive/examples/php#saving_new_files)由于 YouTube API v3 与其他 Google API 共享通用 API 基础架构，因此上传文件等操作的示例在不同服务之间应该非常相似。
*   查看[Python 示例](https://developers.google.com/youtube/v3/docs/videos/insert#examples)，了解需要在 YouTube v3 上传中设置的特定元数据。

一般来说，你的 cURL 代码有很多不正确的地方，我无法完成修复它所需的所有步骤，因为我认为使用 PHP 客户端库是一个更好的选择。如果您确信要使用 cURL，那么我会请其他人提供具体指导。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-12T17:21:55.983

一个python脚本：

```
# categoryId is '1' for Film & Animation
# to fetch all categories: https://www.googleapis.com/youtube/v3/videoCategories?part=snippet&regionCode={2 chars region code}&key={app key}
meta =  {'snippet': {'categoryId': '1',
  'description': description,
  'tags': ['any tag'],
  'title': your_title},
  'status': {'privacyStatus': 'private' if private else 'public'}}

param = {'key': {GOOGLE_API_KEY},
         'part': 'snippet,status',
         'uploadType': 'resumable'}

headers =  {'Authorization': 'Bearer {}'.format(token),
           'Content-type': 'application/json'}

#get location url
retries = 0
retries_count = 1
while retries <= retries_count: 
    requset = requests.request('POST', 'https://www.googleapis.com/upload/youtube/v3/videos',headers=headers,params=param,data=json.dumps(meta))
    if requset.status_code in [500,503]:
        retries += 1
    break

if requset.status_code != 200:
    #do something

location = requset.headers['location']

file_data = open(file_name, 'rb').read()

headers =  {'Authorization': 'Bearer {}'.format(token)}

#upload your video
retries = 0
retries_count = 1
while retries <= retries_count:
    requset = requests.request('POST', location,headers=headers,data=file_data)
    if requset.status_code in [500,503]:
        retries += 1
    break

if requset.status_code != 200:
    #do something

# get youtube id
cont = json.loads(requset.content)            
youtube_id = cont['id'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-30T13:03:23.980

我已经能够使用以下 shell 脚本将视频上传到我在 YouTube 上的频道。

```
#!/bin/sh

# Upload the given video file to your YouTube channel.

cid_base_url="apps.googleusercontent.com"
client_id="<YOUR_CLIENT_ID>.$cid_base_url"
client_secret="<YOUR_CLIENT_SECRET>"
refresh_token="<YOUR_REFRESH_TOKEN>"
token_url="https://accounts.google.com/o/oauth2/token"
api_base_url="https://www.googleapis.com/upload/youtube/v3"
api_url="$api_base_url/videos?uploadType=resumable&part=snippet"

access_token=$(curl -H "Content-Type: application/x-www-form-urlencoded" -d refresh_token="$refresh_token" -d client_id="$client_id" -d client_secret="$client_secret" -d grant_type="refresh_token" $token_url|awk -F '"' '/access/{print $4}')

auth_header="Authorization: Bearer $access_token"
upload_url=$(curl -I -X POST -H "$auth_header" "$api_url"|awk -F ' |\r'  '/loc/{print $2}'); curl -v -X POST --data-binary "@$1" -H "$auth_header" "$upload_url" 
```

有关如何获取自定义变量值的信息，请参阅[此类似问题。](https://stackoverflow.com/questions/19449061/upload-videos-to-my-youtube-channel-without-user-authentication-using-youtubeapi/47015834#47015834)

# java - vaadin 表单浮动字段

> ID：13274174
> 
> 赞同：2
> 
> 时间：2012-11-07T16:41:28.373
> 
> 标签：java, forms, input, vaadin

我有一个具有表单的 vaadin 应用程序，并且我使用 beanitem 作为数据源。在 beanitem 内部，我有一个浮点值，默认为 0.0。如果我输入像 123123123 这样的高值并提交（它保存到数据库），当我尝试在表单中编辑该字段时，我得到 1.23123123E9 作为值，为什么？当我编辑时，我仍然传递带有数据的beanitem，为什么它不能在文本字段中正确显示我的值？

我知道我是否必须显示我可以使用[十进制格式](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)的值，但这是在表单内，并且 vaadin 知道它是一个浮点数，所以它应该相应地处理它吗？或者我必须自己在表单域工厂中对其进行格式化吗？

PS：如何为表单内的值设置显示模式？我读过你可以实现bean内部字段的get并让它也返回一个字符串，这是正确的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T12:36:22.537

实际上 Vaadin 的行为是正确的，但它遵循幅度规则（Yogendra Singh 已经提到过）请看一个[例​​子](http://demo.vaadin.com/book-examples/book/?restartApplication#component.table.binding.editorform)

![在此处输入图像描述](../Images/5e868b2ec0b4404bc890ec90e19dca66.png)

还请检查以下内容：

```
 float value1 = 12.0f;
    float value2 = 123123123;

    BeanItem<Float> item1 = new BeanItem<Float>(value1);
    BeanItem<Float> item2 = new BeanItem<Float>(value2);

    System.out.println(" result 1: " + item1.getBean());
    System.out.println(" result 2: " + item2.getBean()); 
```

结果：

```
result 1: 12.0
result 2: 1.2312312E8 
```

所以正确的解决方案（如我所见）如下所示：

1.  定义你自己的 Bean。没有理由让 BeanItem 包装浮点值。
2.  定义您的 PropertyFormatter（[示例](http://demo.vaadin.com/book-examples/book/1_10/)）
3.  需要注意的重要一点是，不应返回 String 而不是正确的数据类型。它将影响编辑、验证等。

PropertyFormatter 示例：

```
/** Integer formatter that accepts empty values. */
public class LenientIntegerFormatter extends PropertyFormatter {

    public LenientIntegerFormatter(Property propertyDataSource) {
        setPropertyDataSource(propertyDataSource);
    }

    @Override
    public Object parse(String formattedValue) throws Exception {
        if ("".equals(formattedValue))
            return null;
        else
        return Integer.valueOf(formattedValue);
    }

    @Override
    public String format(Object value) {
        if (value == null)
            return "";

        return ((Integer) value).toString();
    }

    @Override
    public Class<?> getType() {
        return String.class;
    }
} 
```

它可能看起来有点吓人，但这是灵活性的代价。自定义 Bean 允许使用表格视图、表单等，而无需任何重大更改。基本上，这是 Vaadin UI 背后的数据模型。

![在此处输入图像描述](../Images/62d9069d7872d6018c3a48ea73dbe5ad.png)

[第 9 章将组件绑定到数据](https://vaadin.com/book/-/page/datamodel.html)

自定义 Bean 示例：

```
public class Bean implements Serializable {
    String name;
    float value;

    public Bean(String name, float newValue) {
        this.name   = name;
        this.value = newValue;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public float getValue() {
        return value;
    }

    public void setValue(float newValue) {
        this.value = newValue;
    }
} 
```

只是为了提供所有必需的见解：

```
 Bean bean = new Bean("Test", value1);
    BeanItem<Bean> beanItem = new BeanItem<Bean>(bean);
    for(Object propertyId: beanItem.getItemPropertyIds()) {
        System.out.println(" Property: '" + propertyId + 
                           "' value: " + beanItem.getItemProperty(propertyId));
    } 
```

将打印：

```
Property: 'name' value: Test
Property: 'value' value: 12.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:51:19.593

`toString()`内部调用[**toString(float)**](http://docs.oracle.com/javase/7/docs/api/java/lang/Float.html#toString%28float%29)这就是文档所说的`toString(float)`

> 否则，结果是一个字符串，表示参数的符号和大小（绝对值）。如果符号为负，则结果的第一个字符为'-'（'\u002D'）；如果符号为正，则结果中不会出现符号字符。至于大小 m：
> 
> *   如果 m 大于或等于 10-3 但小于 107，则表示为 m 的整数部分，以十进制形式表示，不带前导零，后跟“.”。('\u002E')，后跟一个或多个小数位，表示 m 的小数部分。
>     
>     
> *   如果 m 小于 10-3 或大于或等于 107，** 令 n 为唯一整数，使得 10n ≤ m < 10n+1；然后让 a 是 m 和 10n 的数学精确商，使得 1 ≤ a < 10。然后将大小表示为 a 的整数部分，作为一个十进制数字，后跟“。” ('\u002E')，后跟表示 a 小数部分的十进制数字，然后是字母 'E' ('\u0045')，然后是 n 表示为十进制整数，由 Integer 方法生成。到字符串（整数）。
>     
>     
> 
> **要创建浮点值的本地化字符串表示，请使用 NumberFormat 的子类。**

希望这可以帮助您理解`WHY`并`HOW`修复它，即使用`DecimalFormat`您在现场工厂中提到的并作为字符串表示形式返回以用于显示目的。

# string - R 编码字符串

> ID：13274175
> 
> 赞同：1
> 
> 时间：2012-11-07T16:41:29.413
> 
> 标签：string, r, parsing

我有一个包含 96 个文件的列表，我想打开这些文件并对数据执行一些功能。我对 R 非常陌生，不确定如何操作字符串来打开顺序文件名。下面是我的代码，它显然不起作用：

```
for (N in (1:96)){
  if (N > 10) 
      TrackID <- "000$N"
  }
  else{
      TrackID <- "00$N"
  }

  fname_in <- 'input/intersections_track_calibrated_jma_from1951_$TrackID.csv'
  fname_out <- 'output/tracks_crossing_regional_polygon_$TrackID.csv'

  ......data manipulations.....

} 
```

所以基本上我只需要能够，例如，当 N=1 时，引用一个名为 intersections_track_calibrated_jma_from1951_0001.csv 的文件。

提前致谢！

金佰利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:57:54.880

我认为您正在寻找的是[**sprintf()**](http://stat.ethz.ch/R-manual/R-patched/library/base/html/sprintf.html)函数...
`sprintf`将使您免于对 n 进行测试，从而知道需要多少个前导零。
结合[**paste()**或**paste0**](http://stat.ethz.ch/R-manual/R-patched/library/base/html/paste.html)函数，生成所需的文件名成为单行。
实际上，可能只使用 sprintf() 函数，
`sprintf("intersections_track_calibrated_jma_from1951_%04d.csv", n)`但具有生成文件名和/或“TrakID”的函数可能允许隐藏所有这些文件命名约定细节。

下面，看 sprintf() 和 paste0() 的作用，在一个便利函数的上下文中，创建一个给定数字 n 的文件名。

```
> GetFileName <- function(n) 
    paste0("intersections_track_calibrated_jma_from1951_",
           sprintf("%04d", n),
           ".csv")

> GetFileName(1)
[1] "intersections_track_calibrated_jma_from1951_0001.csv"
> GetFileName(13)
[1] "intersections_track_calibrated_jma_from1951_0013.csv"
> GetFileName(321)
[1] "intersections_track_calibrated_jma_from1951_0321.csv"
> 
```

当然，您可以通过添加参数来使 GetFileName 函数更加通用，其中一些参数具有默认值。以这种方式，它可以用于输入和输出文件名（或任何其他文件前缀/扩展名）。例如：

```
GetFileName <- function(n, prefix=NA, ext="csv") {
   if (is.na(prefix)) {
      prefix <- "intersections_track_calibrated_jma_from1951_"
   }

   paste0(prefix, sprintf("%04d", n), ".", ext)
}
> GetFileName(12)
[1] "intersections_track_calibrated_jma_from1951_0012.csv"
> GetFileName(12, "output/tracks_crossing_regional_polygon_", "txt")
[1] "output/tracks_crossing_regional_polygon_0012.txt"
> GetFileName(12, "output/tracks_crossing_regional_polygon_")
[1] "output/tracks_crossing_regional_polygon_0012.csv"
> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:50:11.743

尝试使用`paste`and`paste0`来生成这样的字符串。

```
for (N in (1:96)){
  if (N > 10) 
      TrackID <- paste0("000",N)
  }
  else{
      TrackID <- paste0("00",N)
  }

  fname_in <- paste0('input/intersections_track_calibrated_jma_from1951_', 
                     TrackID.'.csv')
  fname_out <- paste0('output/tracks_crossing_regional_polygon_',
                      TrackID,'.csv')

  ......data manipulations.....

} 
```

`paste0``sep=""`如果您不需要分隔符（如您的情况），只会使您免于写作

# xml - 从 Oracle 创建 XML RSS

> ID：13274177
> 
> 赞同：0
> 
> 时间：2012-11-07T16:41:36.983
> 
> 标签：xml, oracle

我要做的是创建一个存储过程，它将生成一个如下所示的 xml。

```
 <?xml version="1.0" encoding="utf-8"?>
    <rss xmlns:georss="http://www.georss.org/georss" version="2.0">
    <rowset>
    <row>
      <title>myTitle</title>
      <description>myDescription</description>
      <georss:point>myLat myLon</georss:point>
     </row>
     ...
    </rowset>
    </rss> 
```

我要生成以下内容

```
 SELECT DBMS_XMLGEN.getXML(q'!
 SELECT trim(sitedesc)  AS "title", 
    '<a href="../scripts/fmiinfo.asp?file_code=_BLDGLIST&sitecode='||trim(sitecode)||'&forceDB=">'||trim(siteabbrev)||'</a>'   AS "description", 
    trim(latitude)|| ' ' ||trim(longitude) AS "georss:point"
   FROM LS
   WHERE sold <> 1
    !') FROM dual; 
```

输出看起来像这样

```
 <ROW>
   <title>Tipton Facilities</title>
   <description>&lt;a href=&quot;../scripts/fmiinfo.asp?file_code=_BLDGLISTnull=USINTI01null=&quot;&gt;TIP1&lt;/a&gt;</description>
   <georss:point>40.286008 -86.058054</georss:point>
   </ROW> 
```

在“描述”中，我想有一个指向另一个页面的链接，我了解 xml 具有某些保留字符`> < & %`，就像输出自动将保留字符转换为相应的实体引用一样。

然而，问题是程序认为url 中的`sitecode`和`forcedb`是变量，当它们不是时，它们会从结果中删除。

网址应该是：`&lt;a href="../scripts/fmiinfo.asp?file_code=_BLDGLIST&amp;sitecode=USINTI01&amp;forceDB="&gt;`

但它是`&lt;a href=&quot;../scripts/fmiinfo.asp?file_code=_BLDGLISTnull=USINTI01null=&quot;&gt;`

我需要输入带有`ctr()`函数的 url 以获得所需的输出吗？

**`SET SCAN OFF`解决了我的可变问题。
根据以下评论更新示例代码。**

```
 SELECT XMLELEMENT("rss", XMLATTRIBUTES('http://www.georss.org/georss' AS "xmlns:georss"),
                XMLELEMENT("channel",
                             XMLAGG(XMLELEMENT("item",
                                               XMLFOREST(title AS "title",
                                                          description AS "description",
                                                          point AS "georss:point"))))).EXTRACT('/*')
             FROM (SELECT trim(longitude) || ' ' || trim(latitude) AS point, 
      '../scripts/fmiinfo.asp?file_code=_BLDGLIST&sitecode='||trim(sitecode)||'&forceDB=">'||trim(siteabbrev)||'</a>' AS description, 
      trim(sitedesc) AS title
      FROM ls 
      WHERE sold <>1
    ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:30:36.053

你已经从 sqlplus 运行了它。默认情况下，sqlplus 将 & 符号视为替换字符。要禁用此功能，请在 sqlplus 中运行“设置扫描关闭”。GUI 将有一个等效的设置来停止检查替代变量。

如果您使用 XMLX 函数（XMLForest、XMLElement），您的 rss 会更容易和更整洁。

例如

```
SQL> select xmlelement("rss", xmlattributes('http://www.georss.org/georss' as "xmlns:georss"),
  2                     xmlelement("rowset",
  3                                 xmlagg(xmlelement("row",
  4                                                    xmlforest(title as "title",
  5                                                               description as "description",
  6                                                               point as "georss:point"))))).extract('/*')
  7    from (select 'myLat myLon' point, 'asd' description, 'foo' title
  8             from dual
  9           union all
 10           select 'myLat2 myLon2' point,
 11                 '<a href="../scripts/fmiinfo.asp?file_code=_BLDGLIST&sitecode=USINTI01&forceDB=">' description,
 12                 'tetert' title
 13             from dual);

XMLELEMENT(RSS,XMLATTRIBUTES
------------------------------------------------------------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------------------------------
<rss xmlns:georss="http://www.georss.org/georss">
  <rowset>
    <row>
      <title>foo</title>
      <description>asd</description>
      <georss:point>myLat myLon</georss:point>
    </row>
    <row>
      <title>tetert</title>
      <description>&lt;a href=&quot;../scripts/fmiinfo.asp?file_code=_BLDGLIST&amp;sitecode=USINTI01&amp;forceDB=&quot;&gt;</description>
      <georss:point>myLat2 myLon2</georss:point>
    </row>
  </rowset>
</rss>

SQL> 
```

# javascript - 在给定标签之后删除所有标签

> ID：13274182
> 
> 赞同：0
> 
> 时间：2012-11-07T16:41:52.580
> 
> 标签：javascript, jquery

我有这个 html

```
<div>
    <p></p>
    <!-- here may be several tags, may be none -->
</div> 
```

我想在点击文档时，删除所有标签，这可能是标签后`<p>`的标签，（`<p>`标签后可能有几个，也可能是无标签），请告诉，这是怎么做的？

```
$(document).on("click", function () {
    // ???
}) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T16:43:45.337

```
$(document).on("click", function () {
    $('div > p').nextAll().remove();
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:47:25.523

您可以使用以下[`.nextAll()`](http://api.jquery.com/nextAll/)方法：

```
$(document).on("click", function () {
  $('div>p').nextAll().remove();
}) 
```

我建议用 class 或 id 命名您的特定元素。

# javascript - LocalStorage 存储多个 div 隐藏

> ID：13274186
> 
> 赞同：0
> 
> 时间：2012-11-07T16:42:02.473
> 
> 标签：javascript, html, hide, local-storage

如果单击隐藏它们的链接，我将使用一个简单的代码来隐藏多个 div。在其中一个上，我设置了本地存储来记住 div 是否隐藏。事情是这样的。如何编写代码以使本地存储记住多个 div 的隐藏状态，而不必为每个单独的 div 放置 localstorage.setItem。是否可以存储一个带有 div id 的数组并将它们的显示设置为 true 或 false 来决定页面是否应该显示它们？

****** *** ** *** *******已编辑****** ** *** ** *** ** *** ******

 **```
function ShowHide(id) {
if(document.getElementById(id).style.display = '') {
document.getElementById(id).style.display = 'none';
}
else if (document.getElementById(id).style.display = 'none') {
document.getElementById(id).style.display = ''; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:47:45.117

就像你说的，你已经有一个存储所有状态的数组。您可以使用序列化它[`JSON.stringify()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)并将结果放入`localStorage`.

```
 // your array
 var divstate = [ ... ];

 // store it
 localStorage.setItem( 'divstate', JSON.stringify( divstate ) ); 
```

如果要再次检索数组，请使用[`JSON.parse()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)：

```
 // restore
 var divstate = JSON.parse( localStorage.getItem( 'divstate' ); 
```

**编辑**

要存储所有 div 的实际 id，您可能会使用类似这样的东西

```
var divstate = {
  'divid1': true,
  'divid2': false,
  ...
}; 
```

这可以很容易地与上述模式一起使用。

**第二次编辑**

对于上面的代码，我建议在页面加载时使用上面的语句加载一次状态变量。

然后像这样转换函数：

```
function ShowHide(id) {
  var el = document.getElementById(id);

  if ( divstate[id] === true ) {
    divstate[id] = false;
    el.style.display = 'none';
  } else {
    divstate[id] = true;
    el.style.display = '';
  }

  localStorage.setItem( 'divstate', JSON.stringify( divstate ) );
} 
```

这样`divstate`，每个函数调用都会更新和存储。

请注意，如果 div 的数量太多，我不建议这样做，但对于较小的数量，这应该足够了。**

# ssis - 如何将 DTS 包迁移到 SSIS 2012？

> ID：13274187
> 
> 赞同：10
> 
> 时间：2012-11-07T16:42:04.937
> 
> 标签：ssis, dts

我需要将在 SQL Server 2000 中创建的所有 DTS 包迁移到 SSIS 2012。SQL Server 2000 和 SQL Server 2012 之间有什么区别。SQL 语句如插入、更新、删除等有什么不同。我有什么应该注意将 DTS 包升级到 SSIS 吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T17:16:40.977

您不能将包直接从*SQL Server 2000*中编写的**DTS**迁移到*SQL Server 2012*中的**SSIS**。您可以进行从 DTS 到 SSIS 2005 或 2008 的中间转换，然后将它们升级到 SSIS 2012 包，但我不建议这样做，因为转换向导并不出色，而且您还将失去 SSIS 优于 DTS 的大部分好处。

 ****因此，我强烈建议在 SSIS 2012 中重新编写包，复制原始 DTS 包的功能。我很欣赏，根据所涉及的软件包数量，这可能是一项大而耗时的任务，但这是最好的方法。

就差异而言，我在下面列出了一些值得注意的差异：

*   DTS 是基于 COM 的，尽管 SSIS 在幕后仍然使用许多 COM 对象，但它是封装在 .NET 中的
*   SSIS 具有序列容器，因此可以将对象组合在一起
*   SSIS 2008 和 2012 支持 C# 以及 VB.NET
*   DTS 只允许映射列名，但 SSIS 有丰富的数据转换集
*   必须丢弃 DTS 包中的 ActiveX 脚本（如果有）
*   在 SSIS 中，您需要手动映射 Unicode 和 ASCII
*   SSIS 支持 64 位

SQL Server 2000 和 SQL Server 2012 在基本 DML 方面没有区别，例如`INSERT`、`UPDATE`和`DELETE`，但 SQL 2008 及更高版本也有一个`MERGE`允许 UPSERT 的语句。这在 SSIS 中本机不支持，但有第三方`UPSERT`组件，包括 CodePlex.com 上的免费组件

然而，在 SSIS 数据流转换中，有一些组件，例如`Slowly Changing Dimension (SCD)`组件和`OLEDB Command`允许您更新行的组件。但是，这两种转换都表现不佳，通常有更好的方法。****

# jquery - 在多行上突出显示文本

> ID：13274195
> 
> 赞同：3
> 
> 时间：2012-11-07T16:42:31.363
> 
> 标签：jquery, regex, annotations, highlight

我尝试使用 jquery 突出显示文本。

我已经按照这个小提琴解决方案：http: [//jsfiddle.net/thelinh/UPs3V/](http://jsfiddle.net/thelinh/UPs3V/)

![在此处输入图像描述](../Images/057060d1ebe84705659c7c356b929e08.png)

搜索和突出显示不包含换行标记 ( `<br/>`) 标记的文本是可行的。

但如果文本包含`<br/>`标签。解决方案不起作用。

请帮我。

谢谢。

![在此处输入图像描述](../Images/d93a1a9aa635967bf0ce55343a975dd8.png)

[http://jsfiddle.net/UPs3V/80/](http://jsfiddle.net/UPs3V/80/)

![在此处输入图像描述](../Images/d93a1a9aa635967bf0ce55343a975dd8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:14:15.113

尝试用

```
var term = "high(?:<br\s*/?>)?lighting"; 
```

# python - AWS 冰川删除作业

> ID：13274197
> 
> 赞同：7
> 
> 时间：2012-11-07T16:42:34.860
> 
> 标签：python, amazon-web-services, boto, amazon-glacier

我已经开始检索存储在 Glacier AWS 上的一个保险库中的档案。

事实证明，我不再需要复活和下载该存档。有没有办法停止和/或删除我的 Glacier 工作？

我正在使用 boto，但似乎找不到合适的功能。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T17:31:58.300

AWS Glacier 服务不提供删除作业的方法。你可以：

*   开始工作
*   描述一份工作
*   获取作业的输出
*   列出你所有的工作

Glacier 服务管理与保管库关联的作业。

# c++ - 如何将数组传递给 C++ 中的类

> ID：13274204
> 
> 赞同：1
> 
> 时间：2012-11-07T16:43:10.473
> 
> 标签：c++, arrays, class, constructor

当我创建一个类时，我希望能够在该类中存储一个数组。这可能吗？

例如。如果我有一个名为数组的类来存储我的主函数中的数组

```
int main()
{
    double nums[3] = {1 2 3}
    array Vnums(nums) 
    return 0
}

class array
{
    public
    //constructor
        array(double nums[])
        {
            double vector[] = nums;
        }// end constructor
}// end array 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:51:27.220

使用 a`std::array`而不是原始数组。它就像一个原始数组，但可复制，并且具有有用的成员函数。

```
class array
{
    std::array<double, 3> classArray;
    public:
    //constructor
        explicit array(const std::array<double, 3>& rhs) 
        :classArray(rhs)
        {}// end constructor
}// end array

int main()
{
    std::array<double, 3> nums = {{1 2 3}};
    array Vnums(nums) 
    return 0
} 
```

或者`std::vector`如果您希望能够随意更改大小

```
class array
{
    std::vector<double> classArray;
    public:
    //constructor
        explicit array(const std::vector<double>& rhs) 
        :classArray(rhs)
        {}// end constructor
}// end array

int main()
{
    std::vector<double> nums{1 2 3}; //C++11 feature
    array Vnums(nums) 
    return 0
} 
```

我不确定你在做什么，所以很难给出可靠的建议。您可以通过引用、指针和计数、迭代器对传递原始数组...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T16:55:24.397

是的，但是您必须在创建类时动态分配数组，或者数组必须始终具有相同的大小。

选项 A：

```
class array{
private:
  double* data;
  unsigned size;
public:
  array(double* d, unsigned s){
    size = s;        
    data = new double[size];
    for(unsigned i = 0; i < s; i++) 
        data[i]=d[i];
  }
  array(const array& copy){
    double* temp = new double[copy.size];
    delete [] data;
    data = temp;
    size = copy.size;
    for(unsigned i = 0; i < size; i++) 
        temp[i]=copy.data[i];    
  }
  array& operator= (const array& copy){
    double* temp = new double[copy.size];
    delete [] data;
    data = temp;
    size = copy.size;
    for(unsigned i = 0; i < size; i++) data[i]=copy.data[i];
  }
  ~array(){
    delete[] data; // Don't forget the destructor!
  }
}; 
```

这可能是您需要的方式，但请注意，您几乎肯定需要自定义复制构造函数和赋值运算符，这样您就不会在此类的多个实例之间共享任何内存。更好的方法可能是制作两者都可以使用的复制功能。

选项 B：

```
class array{
private:
  double data[3];
public:
  array(double* d){ //or "double(&d)[3]" to be safer, but less flexible
    for(unsigned i = 0; i < 3; i++){
      data[i] = d[i]; // If d is not at least size 3, your program will crash here (or later on, or maybe just act in an undefined way) 
    }
  }
} 
```

尚未对此进行测试，但这应该是一个不错的起点。

# c++ - CEvent MFC 复制

> ID：13274206
> 
> 赞同：0
> 
> 时间：2012-11-07T16:43:15.340
> 
> 标签：c++, visual-c++

在继续 MFC 类复制系列的同时（对于有知识的人），这里是 CEvent 类复制：

```
class CEvent {
    HANDLE m_hEvent;
public:

    CEvent(
        BOOL bInitialState,
        BOOL bManualReset)
    {
        LPSECURITY_ATTRIBUTES lpEventAttributes = NULL;
        m_hEvent = CreateEvent(lpEventAttributes, 
                                bManualReset,
                                bInitialState,
                                NULL);
    }

    ~CEvent()
    {
        m_hEvent = NULL;
    }

    BOOL SetEvent()
    {
        return ::SetEvent(m_hEvent);
    }

    BOOL ResetEvent()
    {
        return ::ResetEvent(m_hEvent);
    }
    HANDLE GetHandle()
    {
        return m_hEvent;
    }
    operator HANDLE()
    {
        return m_hEvent;
    }
}; 
```

代码已根据答案进行了编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:48:45.990

您正在创建命名事件 - _T("Untitled")。这是故意的吗？这样，每次创建 CEvent 时，它都会引用同一个事件 - 不会创建新事件。

还可以考虑在析构函数中销毁您的事件。

# python - Python3 Recursivley Sum Digits of an Integer

> ID：13274207
> 
> 赞同：3
> 
> 时间：2012-11-07T16:43:16.513
> 
> 标签：python, recursion, python-3.x

我需要帮助实现一个函数，该函数将取整数的数字并将它们加在一起。sumDigits 函数只要实现了递归，就有效，main 函数必须保持原样。我将在下面包含一个模板：

```
def sumdigits(value): 
    #recursively sum digits 

def main():
    number=int(input(“Enter a number :  ”))
    print(sumdigits(number))

main() 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T17:18:10.363

一个非常简短的版本：

```
def sumdigits(value):
    return value and (value % 10 + sumdigits(value // 10)) 
```

该`value and`部分使其返回零，而不是一旦超过最后一位就无限递归。

该`value % 10`部分获得最后一位数字（“个”位置）。

`sumdigits(value // 10)`得到除最后一位数字之外的所有数字的总和

`//`是整数除法，自动为你丢弃结果的小数部分。

# python - 打印嵌套列表，以便列表中的每个列表位于不同的列中

> ID：13274208
> 
> 赞同：1
> 
> 时间：2012-11-07T16:43:16.167
> 
> 标签：python, list, nested

我有以下代码

```
F_list= []
C_list= []
C_approx_list = []
for F in range(0,101,10):
    F_list.append(F)
    C_approx_list.append((F-30)/2.)
    C_list.append((F-32)*(5./9))

conversion = [F_list,C_approx_list,C_list]

for list in conversion:
    for number in list:
        print number 
```

使用以下输出：

```
"""Test Execution
Terminal > python exercise2_18.py
0
10
20
30
40
50
60
70
80
90
100
-15.0
-10.0
-5.0
0.0
5.0
10.0
15.0
20.0
25.0
30.0
35.0
-17.7777777778
-12.2222222222
-6.66666666667
-1.11111111111
4.44444444444
10.0
15.5555555556
21.1111111111
26.6666666667
32.2222222222
37.7777777778
""" 
```

我希望这三个列表改为以下形式：

F_list C_approx C_list

代替：

1.  F_list
2.  C_约
3.  C_list

感谢您提供任何可能的答案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:46:30.703

```
for a,b,c in zip(F_list, C_approx_list, C_list)
    print(a,b,c) 
```

或者对于可能更容易阅读的输出

```
for a,b,c in zip(F_list, C_approx_list, C_list)
    print('{}\t{}\t{}'.format(a,b,c)) 
```

或更简单的 Python 3.X

```
for a,b,c in zip(F_list, C_approx_list, C_list)
    print(a,b,c, sep='\t') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:23:17.347

您可以使用列表推导来编写：

```
conversion = [(F, (F-30)/2., (F-32)*(5./9)) for F in range(0,101,10)]

for line in conversion:
    print temp[0], temp[1], temp[2]
    # print(*temp)                           # in python3 
```

*您可以使用以下命令移至以前的列表`zip`：*

```
F_list, C_approx_list, C_list = zip(*conversion) 
```

# rest - 正确响应 RESTful Web 应用程序中的 415 错误

> ID：13274218
> 
> 赞同：0
> 
> 时间：2012-11-07T16:43:41.157
> 
> 标签：rest, http

我正在构建一个 Web 应用程序，它可以通过`PUT`,`POST`和JSON 格式接受资源表示`PATCH`。`x-www-form-urlencoded`如果我收到另一种格式的请求正文，我想发送一个`415`响应，以及一些声明我接受哪些格式的附加数据（以类似于`405`响应的强制`Allow:`标头的方式）。我在[HTTP 406 和 415 错误代码](https://stackoverflow.com/questions/3294483/http-406-and-415-error-codes)的一个答案中看到，其中回答的人不知道是否定义了这样的机制，RFC 2616 在这方面没有提及任何内容，一些粗略的谷歌搜索也没有出现。

`Accept:`即使将其定义为请求标头，我也想使用。将其重新用于此响应似乎是最合适的。人家同意吗？有人有更好的建议吗？

**编辑：**我[在发送“415 unsupported media type”时发现指定支持的媒体类型，](https://stackoverflow.com/questions/3343165/specify-supported-media-types-when-sending-415-unsupported-media-type)它专门询问是否有这个标准。正确且被接受的答案基本上是**no**，但那里的受访者也和我有同样的想法，即 Accept 将是一个很好的标题，可以用来提供这些信息。这促使[Julian Reschke向 HTTP 工作组发送了](https://stackoverflow.com/users/50543/julian-reschke)[一条消息](http://osdir.com/ml/ietf-http-wg/2011-12/msg00187.html)，询问是否应该定义在响应中发送标头的含义。那封电子邮件只收到了一封回复，他们同意它是必要的，并且接受似乎是合适的。`Accept:`

请注意，我不是在询问是否*允许*我发送 Accept 标头，任何标头都可以在任一方向发送，但只有规范中定义的标头对中介具有*意义*（语义），并且任何未加前缀的意外标头with`X-`可能会与 HTTP 的未来版本发生冲突。这不打扰我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:03:38.927

正如你所说，[`Accept`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1)是一个请求标头。在响应中使用它是**错误的。**

[引用维基](https://en.wikipedia.org/wiki/Content_negotiation)百科，

> 内容协商是 HTTP 规范中定义的一种机制，它可以在同一个 URI 上提供文档的不同版本（或更一般地，资源表示），以便用户代理可以指定哪个版本最适合他们的能力。

所以是*客户*在请求中说他可以使用什么媒体类型`Accept`。如果服务器不能提供这种媒体类型，他会回复`406 Not Acceptable`。

由于客户端必须能够处理所请求资源的返回表示，它应该指定它可以理解的媒体类型。它可以指定*多种*媒体类型：

```
Accept: application/json, application/xml, x-www-form-urlencoded 
```

如果客户端真的想接受*任何*媒体类型，它可以设置

```
Accept: */* 
```

即使对于这样的请求，服务器也会设置适当的`Content-Type`响应头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:19:11.220

您收到无法识别的 Content-Type 很可能来自当前正在为您的服务实现客户端的开发人员。由于不存在服务器宣传其支持的内容类型的机制，您不妨在消息正文中提及您支持的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T12:33:32.733

我不知道执行此操作的任何标准机制，但您可以稍微重新调整 Alternates 标头[http://www.ietf.org/rfc/rfc2295.txt](http://www.ietf.org/rfc/rfc2295.txt)的用途来做您想做的事情。

# javascript - 不要从 DOM 加载或删除元素

> ID：13274225
> 
> 赞同：0
> 
> 时间：2012-11-07T16:43:56.713
> 
> 标签：javascript, html, css, dom

是否可以不使用 CSS 或 Javascript 在 HTML 页面的 DOM 中加载元素？

我有一个`<div>`我只想在分辨率是智能手机时加载的。只是做一段`display: none;`时间我不希望它不起作用，因为脚本（iScroll）链接到`<div>`.

我真的不必在 DOM 中加载它（或者在我加载页面时从 DOM 中删除它）。

我相信我可以使用`removeChild()`. 但是有没有办法在 CSS 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:49:34.227

我认为您遗漏了一些细节，但是如果您试图阻止加载图像，那么这样做是一种肮脏的方式。如果您仅在 css 中将图像用作“背景图像”并设置“显示：无”，则仅在更改“显示”时才会加载图像

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:46:46.803

不，如果内容存在于您请求的文件/资源​​中，您必须接收它，然后（如您所说）从 DOM 中操作它。CSS 只能改变它的外观。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T16:50:16.877

不，Css 不与 DOM 交互，并且您的页面必须在 DOM 存在之前加载。

您可以按如下方式删除元素：

```
var itemToRemove = document.getElementById("itemToRemove");
document.body.removeChild(itemToRemove); 
```

如果您的元素嵌套在 DOM 中较深，则需要遍历 DOM：http: [//javascript.about.com/od/byexample/a/dom-walknodes-example.htm](http://javascript.about.com/od/byexample/a/dom-walknodes-example.htm)

我想，理论上，你可以阻止一个元素加载一些巫毒 ajax，但我不建议这样做。

此外，JQuery remove() 方法是上述 DOM 方法的流行替代方法，因为它可以在元素本身上调用。

# c - 如何在c中使用布尔函数

> ID：13274230
> 
> 赞同：4
> 
> 时间：2012-11-07T16:44:05.967
> 
> 标签：c, boolean

任何人都请告诉我，这段代码有什么问题

```
#include<stdio.h>
bool func(char *,int);
void main()
{
   char *a="Interview";
   if(func(a,9))
   {
      printf("True");
   }
   else
   {
      printf("False");
   }

}
bool func(char *s, int len)
{
   if(len < 2)
      return true;
   else
      return s[0] == s[len-1] && func(&s[1], len-2);
} 
```

我相信这个函数总是返回`TRUE`。这是一道面试题。但是，当我尝试编译它时，它显示**6 个错误**..

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-07T16:45:47.410

我猜它不知道`bool`和`true`是什么。`bool`不是 C 中的原始数据类型，您需要额外的包括：

```
#include <stdbool.h> 
```

你问题的第二部分？`Does it always return TRUE?`

否：当您进入函数时，您将跳过第一次返回，因为您的长度为 9。因此，只有在以下情况下您`true`才会返回：

```
return s[0] == s[len-1] && func(&s[1], len-2) 
```

是真的。您可以在此处跳过递归逻辑，因为它不会修改您的字符串，只需查看第一部分：

```
s[0]     // this has to be 'I'
==       // we need so what we compare against has to be 'I' as well
s[len-1] // This will be 'w' 
```

所以......这不会返回真实......谁在乎ANDing（`&&`）递归部分？我怀疑编译器甚至会优化它，因为这里的所有内容都是硬编码的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T16:46:02.840

您只需要包含正确的标题。

```
#include <stdbool.h> 
```

或者，您可以使用`_Bool`不需要任何包含的类型。`bool`只是这种类型的别名。顺便说一句，别忘了用 C99 编译。

# c# - ASP.NET 处理来自 Sage Pay 的 POST

> ID：13274232
> 
> 赞同：0
> 
> 时间：2012-11-07T16:44:11.743
> 
> 标签：c#, asp.net, generic-handler, opayo

我正在编写一个 asp.net Web 应用程序来与 sage pay 交谈并通过他们的服务器到服务器方法进行支付。目前我的网站收集用户详细信息，然后向他们的服务器发送交易注册 HttpRequest。然后他们的服务器用一些细节和重定向链接响应我的请求。我检查了响应对象，然后重定向到他们的付款页面，可以在其中输入用户付款详细信息（卡号等）。一旦用户点击确认，sage 就会向我选择的 url 发送一个 POST，然后我可以处理并告诉他们是否继续交易。

我的目标是从他们那里接收 POST，检查内容并做出相应的回应。然后，我必须将它们作为我的成功或失败 url 的一部分，他们的网站也会在交易完成后发送给用户。如果我先发送请求，那会很容易，但我不是。他们只需要一个地址来发送响应，然后我必须处理它。

我的问题是这个。如何在我的 Web 应用程序中处理 HttpRequest（我假设这将是什么？）？

我可以通过告诉他们响应通用处理程序来做到这一点吗？如果我要给他们我的通用处理程序的 url，我可以在那里处理 POST 然后回复他们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:00:46.803

> 我可以通过告诉他们响应通用处理程序来做到这一点吗？如果我要给他们我的通用处理程序的 url，我可以在那里处理 POST 然后回复他们吗？

通用处理程序将起作用。您可以通过以下方式处理请求参数`context.Request.Params`

例子：

```
public class Handler : IHttpHandler {

    public void ProcessRequest (HttpContext context) {

    string someparamreturned = context.Request.Params["somekey"];
    //etc.. do something
    }

    public bool IsReusable {
    get {
        return false;
    }

} 
```

你真的不需要一个完整的页面来处理这个。

# ubuntu-12.04 - 如何更改 Ubuntu 下的默认 GECOS 字段？

> ID：13274235
> 
> 赞同：2
> 
> 时间：2012-11-07T16:44:29.053
> 
> 标签：ubuntu-12.04

我想知道是否有办法更改用户的默认 GECOS 字段。现在，我的意思不是更改他们的名称、编号、外壳等。我的意思是更改字段类型/名称本身。

例如，由于我从不使用“工作电话”字段，我可以说，将其重命名为其他名称，例如“地址”吗？

另外，是否也可以添加全新的字段条目？

我通过搜索真正能找到的是如何更改已经设置的字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T16:59:00.173

本质上，唯一关心 GECOS 字段内容（除了分隔全名的第一个逗号）的软件*是*，`adduser`以及用于*更新*密码文件的`chfn`类似程序。一个非常好的近似值，没有人*使用*这些子字段，因此您可以自由地将任何您喜欢的内容放入其中。

 **中的硬编码提示字符串`adduser`或选项字母`chfn`可能无法更改——无论如何它们都是常规用法，并且在任何地方都没有子字段名称的中心定义。但是，不要让这阻止你在现场存储“用户最喜欢的食物”，表面上是为了工作电话号码，如果这会让你的船浮起来的话。

但是请注意，如果您想存储有关用户的任何真实信息而不是出于玩具目的，`/etc/passwd`则很可能不是这样做的地方。使用一个单独的用户信息数据库，它更容易使 Unicode 变得干净。**

# wordpress - 我根本无法在我的 wordpress 网站上安装谷歌分析

> ID：13274237
> 
> 赞同：2
> 
> 时间：2012-11-07T16:44:35.493
> 
> 标签：wordpress, google-analytics

几年来我一直在使用分析，但最近他们的 UI 发生了变化，即使我遵循所有程序，我也无法在基于 wordpress 的网站中安装跟踪代码。我已将代码从任何地方放到任何地方，但状态仍然不会从“未安装跟踪”改变。我的网站是[http://thegreatindianroad.in](http://thegreatindianroad.in)，目前跟踪代码在之后`<head>` 这是因为它在之前`</head>`或之前没有工作`</body>`，我读到所有其他 javascripts 都应该在它之后。

在早期的 UI 中，只需单击一个按钮即可“检查跟踪状态”非常容易，但现在不再如此。当然，我错过了一些关键步骤。任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:47:05.700

为什么不尝试使用插件？比如这个：[http ://wordpress.org/extend/plugins/google-analytics-for-wordpress/](http://wordpress.org/extend/plugins/google-analytics-for-wordpress/)

这就是我所做的，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:59:21.693

我看到您的网站上安装了跟踪代码，只要您输入正确的帐号，它看起来就可以了。也许等一天，然后在 GA 中查看它是否以这种方式跟踪结果？

# html - 基于 URL 的 Drupal 7 导航

> ID：13274240
> 
> 赞同：1
> 
> 时间：2012-11-07T16:44:44.060
> 
> 标签：html, drupal-7, navigation, views

有谁知道是否可以提取 URL 以及是否在 URL 中找到一个值来显示/隐藏某些内容？

例如，如果我有一个导航栏，我只想为包含“复印机”的页面显示并且我设置了 URL 别名，我可以设置**视图**模块（或类似的东西）来检查“复印机”值的 URL如果发现它显示导航？如果是这样，我将如何去做？

我知道不能有重复的 URL 别名，但如果说我有它们：

*   节点/复印机*   节点/复印机培训

我可以检查该 URL 并查看复印机是否存在，是否显示与复印机相关的导航？

我对**Views**不是很熟悉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:24:40.427

不确定这是否回答了你的问题，提到 Views 让我有点失望，但我相信你需要的只是一个 Block。您将导航放入块中，然后将“可见性设置”设置为

```
node/*copier* 
```

并将“在特定页面上显示块”设置为“仅列出的页面”。

然后，这将在 URL 中带有复印机的任何页面上显示该块，但是这仅适用于 node/blahblahblah 类型的 URL，如果您希望它也显示在诸如 blog/copier-training 之类的 URL 上，您将拥有将另一行添加到块的可见性设置

```
node/*copier*
blog/*copier* 
```

以及任何后续的深入研究，例如说 blog/richie/copier-training 需要

```
node/*copier*
blog/*copier*
blog/richie/*copier* 
```

或者，您可以编写一整套通配符选项，这些选项与您的网站 URL 一样深

```
*/*copier*
*/*/*copier*
*/*/*/*copier*
ad infinitum 
```

这可能更好...

如果您*确实*想在块中显示视图，可以使用以下 PHP

```
<?php
//load the view by name
$view = views_get_view('sample_view');
//output the view
print views_build_view('embed', $view);
?> 
```

希望这有帮助。

# ruby-on-rails - 如何使用 ActiveRecord 3.0.4 和 db_cleaner 处理嵌套事务

> ID：13274241
> 
> 赞同：1
> 
> 时间：2012-11-07T16:44:46.653
> 
> 标签：ruby-on-rails, activerecord, transactions

`:transaction`我们在带有 MySQL 5.x 数据库的 Rails 3.0.4 应用程序（目前无法升级）上使用带有 clean 方法的 db_cleaner 。我们不能使用`:truncation`，因为我们会丢失种子数据。

现在我们面临以下问题。例如，ActiveRecord 在基于 ActiveRecord 的对象上调用`:create`或调用时会自动生成事务。`:destroy`在我们的 RSpec 套件中，我们使用机械师工厂为每个测试创建测试数据。现在，如果我们正在测试创建它自己的事务的功能，我们面临的问题是，我们`Factory.make!`在测试中调用的开始提交周期不仅退出了内部事务（由打开`:create`），而且退出了内部打开的事务测试的代码。结果 db_cleaner 触发的回滚无法回滚任何东西，并且在测试运行后我们的数据库中仍然有我们的测试数据。

我想一定有人已经面临这个问题了。由于 MySQL 不支持嵌套事务，但 ActiveRecord 从 2.3.2 版本开始通过创建保存点来模拟它们，我们没有预料到这种行为。

谁能提供信息，如何解决该特定问题？

# objective-c - 是否可以使用没有顶点着色器的片段/像素着色器来处理 FBO 的颜色附件（纹理）？

> ID：13274242
> 
> 赞同：0
> 
> 时间：2012-11-07T16:44:52.137
> 
> 标签：objective-c, opengl-es, opengl-es-2.0, glsl

我目前在 iOS 设备上使用 OpenGL ES 2.0 玩一些地形生成的东西。我有一个纹理和一个高度图。我想要做的是使用片段着色器模糊地形的纹理，但不是在每次绘制调用时（仅在需要时和开始时）。这就是为什么我决定在 FBO 中处理屏幕外的模糊，然后将此 FBO 作为纹理附加到地形。现在我想知道是否可以将图像（纹理）作为颜色附件添加到新生成的 FBO 并使用片段着色器进行处理？还是有更好的方法？不需要投影、闪电等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:27:03.707

您不能绕过顶点着色器并让片段着色器做任何事情。有很多方法可以最小化顶点着色器的作用——你可以将几何体直接传递给片段着色器。像这样的着色器通常被称为（毫不奇怪）“直通着色器”，因为它们只是将信息随机传送到管道的下一段，而不做很多事情。

# jquery - jQuery UI 和多个滑块

> ID：13274243
> 
> 赞同：0
> 
> 时间：2012-11-07T16:44:56.367
> 
> 标签：jquery, jquery-ui

如何从通过循环动态创建的多个滑块中获取值？

jQuery代码：

```
<script>
    $(function() {
            var col_text = {
                       0: "",
                       1: "Yes",
                       2: "Not sure",
                       3: "No"
                    };       
            var col_code = {
                       0: "",
                       1: "#00be00",
                       2: "#f1ee00",
                       3: "#d30000"
                    };   

        $( ".slider" ).slider({
            value:0,
            min: 0,
            max: 3,
            step: 1,
            slide: function( event, ui ) {
                $( "#answer" ).val( col_text[ui.value] );
                $( "#answer" ).css("background-color", col_code[ui.value] );
            }
        });
        $( "#answer" ).val(col_text[$(".slider").slider("value")]);
        $( "#answer" ).css("background-color",col_code[$(".slider").slider("value")]);
    });
    </script> 
```

和循环内的PHP代码：

```
 echo "<div class=\"listing-wrapper\">";
                    echo "<div style=\"margin-left: 664px\"><input type=\"text\" id=\"answer\" style=\"border: 0; font-weight: bold; width: 60px;\" /></div>";                   
                    echo "<div style=\"width: 600px; float: left;\">";
                    echo "<h3 style=\"background-color:".$answer['color']."; display: inline; \"><a href=\"".$question['url']."\" target=\"_blank\">".$question['title']."</a></h3>";
                    echo "<div style=\"\">".$question['question']."</div><br /><br />";
                    echo "</div>";
                    echo "<div class=\"slider\" style=\"width: 100px; float: left;\"></div>";
                    echo "<div style=\"clear: both;\"></div>";
                    echo "</div>"; 
```

当我移动循环生成的任何滑块时，它总是“更新”第一个问题实例。

感谢您的任何提示。

# .net - XP 上的 xaml 解析错误：“0 不是 Int32 的有效值”

> ID：13274250
> 
> 赞同：1
> 
> 时间：2012-11-07T16:45:19.533
> 
> 标签：.net, wpf, parsing, xaml, converter

有一个运行 XP 的客户端。一旦实例化了一个非常简单的 XAML 控件，他们就会有一点“怪异”。

在非 XP 机器上没有问题。特定客户机器上的零星问题。

无法在本地复制。有人经历过吗？附加属性的默认类型转换器似乎失败了......但我假设它是其他东西的副作用。

错误：

> `Cannot convert string '0' in attribute 'Row' to object of type 'System.Int32'. 0 is not a valid value for Int32`

```
<Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

    <Menu Grid.Row="0" Grid.Column="0">
       :
       :
    </Menu>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:45:44.000

这个问题可能是由于本地化造成的，听起来像这个问题（[Localization](http://social.msdn.microsoft.com/Forums/sk/wpf/thread/75a636ed-ae0f-4731-a2ab-6c361b8dc72f)），其中第 0 行指的是另一个资源中缺少的字符串，该字符串只发生在针对另一种语言的集合上；因此是零星的。

# sql - 一张表上的复杂 SQL 查询

> ID：13274255
> 
> 赞同：-2
> 
> 时间：2012-11-07T16:45:30.970
> 
> 标签：sql

SQL查询忘记了，因为很久没用了。

我有以下要求。有一个名为 match 的表格，我可以在其中保存我的竞争对手的详细信息，了解我的团队与他们进行的比赛。所以一些重要的领域是这样的

```
match_id
competior_id
match_winner_id
ismatchtied
goals_scored_my_team
goals_scored_comp 
```

从这张表中，我想获得所有竞争对手的头对头信息。像这样

```
Competitor Matches Wins Losses Draws 
A          10      5    4      1
B          8       3    2      1 
```

我可以从 ismatchtied 获得的绘制信息设置为“Y”或“N”。我想从一个查询中获取所有信息。我可以从单独执行查询中获取所有信息，并在我的服务器代码中进行复杂的逻辑处理。但是我的表现会受到打击。

任何帮助将不胜感激。

干杯，索拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:34:27.227

选择 m4.competior_id, COUNT(*) 作为 TotalMathces,

（从 m1 中选择 count(*)，`match`其中goals_scored_my_team>goals_scored_comp AND m1.competior_id=m4.competior_id）作为 WINS，

（从 m2 中选择 count(*) 作为 WIN，`match`其中goals_scored_comp>goals_scored_my_team AND m2.competior_id=m4.competior_id）作为 LOSES，

（从 m3 中选择 count(*) 作为 WIN `match`wheregoals_scored_my_team=goals_scored_comp AND m3.competior_id=m4.competior_id）作为 DRAWS

FROM `match`m4 group by m4.competior_id;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:59:04.947

您可以使用条件聚合，包括聚合函数中的 CASE 表达式，如下所示：

```
SELECT
  competitor_id,
  COUNT(*) AS Matches,
  COUNT(CASE WHEN goals_scored_my_team > goals_scored_comp THEN 1 END) AS Wins,
  COUNT(CASE WHEN goals_scored_my_team < goals_scored_comp THEN 1 END) AS Losses,
  COUNT(CASE WHEN goals_scored_my_team = goals_scored_comp THEN 1 END) AS Draws
FROM matches
GROUP BY
  competitor_id
; 
```

当条件不满足时，上面的每个 CASE 都将评估为 NULL。并且由于省略了 NULL，因此上述查询中的 each 将有效地仅计算与相应 WHEN 条件匹配的行。`COUNT(*expr*)``COUNT(CASE ...)`

So, the first COUNT counts only rows where my team scored more against the competitor, i.e. where my team won. In a similar way, the second and the third CASEs get the numbers of losses and draws.

# sql - 在“分组依据”查询中交换行和列

> ID：13274256
> 
> 赞同：0
> 
> 时间：2012-11-07T16:45:33.480
> 
> 标签：sql, sql-server, ssms

我目前有以下内容：

```
SELECT status,count(status) AS count
  FROM [DB].[dbo].[contact]
  GROUP BY status 
```

这给了我以下信息：

```
Status 1   |   12
Status 2   |   23
Status 3   |   63 
```

我试图让表格看起来像这样：

```
Status 1   Status 2   Status 3  
   12        23         63 
```

最终表格将如下所示：

```
 Status 1   Status 2   Status 3  
Date Range 1        12        23         63
Date Range 2        23        2           3 
```

我只是不确定现在该怎么做。我应该学习什么样的 SQL 命令/语法来完成这项工作？这是我第一次看 SQL，所以任何指针都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:48:41.803

您可以使用这样的查询来获取正确格式的数据：

```
SELECT 
  sum(case when status = 'Status 1' then 1 else 0 end) Status1,
  sum(case when status = 'Status 2' then 1 else 0 end) Status2,
  sum(case when status = 'Status 3' then 1 else 0 end) Status3
FROM [DB].[dbo].[contact] 
```

在 SQL Server 中，您甚至可以使用该`PIVOT`函数来转换数据：

```
select [Status 1] as Status1, 
  [Status 2] as Status2, 
  [Status 3] as Status3
from 
(
  SELECT status, status as statusToCount
  FROM [DB].[dbo].[contact]
) src
pivot
(
  count(statusToCount)
  for status in ([Status 1], [Status 2], [Status 3])
) piv 
```

# google-app-engine - 选择正确的模型来存储和查询数据？

> ID：13274259
> 
> 赞同：0
> 
> 时间：2012-11-07T16:45:44.347
> 
> 标签：google-app-engine

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:57:10.660

The answer is to use appstats and you can find out:

[AppStats](https://developers.google.com/appengine/docs/python/tools/appstats)

> To keep your application fast, you need to know:
> 
> Is your application making unnecessay RPC calls? Should it be caching data instead of making repeated RPC calls to get the same data? Will your application perform better if multiple requests are executed in parallel rather than serially?

Run some tests, try it both ways and see what appstats says.

But I'd say that your option 2) is better simply because you don't need to search millions of entities. But who knows for sure? The trouble is that "resources" are a dozen different things in app engine - CPU, datastore reads, datastore writes etc etc etc.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:13:02.890

For your User class, set a unique ID for each user (such as a username or email address). For the Word class, set the parent of each Word class as a specific User.

So, if you wanted to look up words from a specific user, you would do an ancestor query for all words belonging to that specific user.

By setting an ID for each user, you can get that user by ID as opposed to doing an additional query.

More info on ancestor queries: [https://developers.google.com/appengine/docs/java/datastore/queries#Ancestor_Queries](https://developers.google.com/appengine/docs/java/datastore/queries#Ancestor_Queries)

More info on IDs: [https://developers.google.com/appengine/docs/java/datastore/entities#Kinds_and_Identifiers](https://developers.google.com/appengine/docs/java/datastore/entities#Kinds_and_Identifiers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:57:09.617

It really depends on the queries you're using. I assume that you want to find all the words given a certain owner.

Most likely, 2 would be cheaper, since you'll need to fetch the user entity instead of running a query.

2 will be a bit more work on your part, since you'll need to manually keep the list synchronized with the instances of Word

Off the top of my head I can think of 2 problems with #2, which may or may not apply to you:

A. If you want to find all the owners given a certain word, you'll need to keep that list of words indexed. This affects your costs. If you mostly find words by owner, and rarely find owners by words, it'll still make sense to do it this way. However, if your search pattern flips around and you're searching for owners by words a lot, this may be the wrong design. As you see, you need to design the models based on the queries you will be using.

B. Entities are limited to 1MB, and there's a limit on the number of indexed properties (5000 I think?). Those two will limit the number of words you can store in your list. Make sure that you won't need more than that limit of words per user. Method 1 allows you unlimted words per user.

# php - 带有命名参数的 php sqlsrv_query 存储过程

> ID：13274261
> 
> 赞同：3
> 
> 时间：2012-11-07T16:45:52.217
> 
> 标签：php, sql-server, stored-procedures, parameters

我使用带有 sqlsrv 扩展名的 php 5.4，我正在尝试调用这个示例存储过程（NorthWind 数据库）：

```
create  PROCEDURE [dbo].[GetCategories] 
@CategoryID int = null
AS
SELECT * from dbo.Categories where CategoryID= IsNull(@CategoryID,CategoryID) 
```

我正在使用这个 sqlsrv_query 语法：

```
$sql = "{ call dbo.GetCategories (?)}";
$catID=2;
$params = array($catID);
$stmt = sqlsrv_query( $conn, $sql,$params); 
```

我想在 $params 中指定参数名称和值，就像这样：

```
$sql = "dbo.GetCategories";
$catID=2;
$params = array("@CategoryID"=>$catID);
$stmt = sqlsrv_query( $conn, $sql,$params); 
```

它返回此错误：参数数组中不允许使用字符串键。

我怎么解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:16:42.447

我使用 PDO 找到了这个解决方案：

```
$dbh = new PDO('sqlsrv:server= ...');
$sql = "{CALL dbo.GetCategories (@CategoryID=:CategoryID)}";
$stmt = $dbh ->prepare($sql);

$stmt->bindParam('CategoryID', $catID, PDO::PARAM_INT);

$stmt->execute();

$results = array();
do {
    $results []= $stmt->fetchAll();
} while ($stmt->nextRowset());

echo '<pre>';

echo($results[0][0]['CategoryID'] . ', '.
         $results[0][0]['CategoryName'] . ', '.
         $results[0][0]['Description']);
echo '</pre>';

$stmt->closeCursor();
unset($stmt); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-30T20:26:55.713

不能使用关联数组将值绑定到 SQL 参数。数组中的元素必须与参数的顺序相同。

# iis-7 - IIS7 URL 301 重定向文件夹和域

> ID：13274263
> 
> 赞同：0
> 
> 时间：2012-11-07T16:46:02.827
> 
> 标签：iis-7, url-rewriting

我正在尝试（并且非常失败）找出必要的规则来实现以下永久 301 重定向：

```
www.mysite.com                    > mysite.com
mysite.com/oldfolder              > mysite.com
www.mysite.com/oldfolder          > mysite.com
mysite.com/oldfolder/old-file     > mysite.com/old-file
www.mysite.com/oldfolder/old-file > mysite.com/old-file 
```

如果任何了解 IIS7 重写模块的人可以提供帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:56:25.237

您应该只需要添加如下规则：

请求的 URL：匹配模式

使用：正则表达式

模式：旧文件夹

忽略大小写：真

动作类型：重定向

重定向网址：htt://www.mysite.com

附加查询字符串：错误重定向类型 301

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:58:23.947

以下是我们最终使用的总规则，以供将来参考和做类似事情的其他人参考：

```
<rewrite>
        <rules>
            <!--To always remove trailing slash from the URL-->
            <rule name="Remove trailing slash" stopProcessing="true">
                <match url="(.*)/$" />
                <conditions>
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                </conditions>
                <action type="Redirect" redirectType="Permanent" url="{R:1}" />
            </rule>
            <!-- redirects blog/2012/10/post to /post. -->
            <rule name="Redirect blog with dates to root" stopProcessing="true">
                <match url="^blog/([0-9]+)/([_0-9]+)/(.*)" />
                <conditions>
                    <add input="{HTTP_HOST}" pattern="^(www\.)?mydomain.com$" />
                </conditions>
                <action type="Redirect" url="http://{C:0}/{R:3}" redirectType="Permanent" />
            </rule>
            <!-- redirects blog/post to /post. -->
            <rule name="Redirect blog to root" stopProcessing="true">
                <match url="^blog/(.*)" />
                <conditions>
                    <add input="{HTTP_HOST}" pattern="^(www\.)?mydomain.com$" />
                </conditions>
                <action type="Redirect" url="http://{C:0}/{R:1}" redirectType="Permanent" />
            </rule>
            <!-- redirects case-studies/case-study to /case-study. -->
            <rule name="Case studies redirect." stopProcessing="true">
                <match url="^case-studies/(.*)" />
                <conditions>
                    <add input="{HTTP_HOST}" pattern="^(www\.)?mydomain.com$" />
                </conditions>
                <action type="Redirect" url="http://{C:0}/{R:1}" redirectType="Permanent" />
            </rule>
            <!-- for SEO the www is stripped from the URL. -->
            <rule name="Canonical host name.">
                <match url="(.*)" />
                <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                    <add input="{HTTP_HOST}" pattern="^mydomain\.com$" negate="true" />
                </conditions>
                <action type="Redirect" url="http://mydomain.com/{R:1}" />
            </rule>
            <!-- removes index.php from the URL. -->
            <rule name="wordpress" patternSyntax="Wildcard">
                <match url="*"/>
                <conditions>
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true"/>
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true"/>
                </conditions>
                <action type="Rewrite" url="index.php"/>
            </rule>
        </rules>
    </rewrite> 
```

# c - 传递指针数组

> ID：13274271
> 
> 赞同：-4
> 
> 时间：2012-11-07T16:46:28.393
> 
> 标签：c

我正在尝试发送一组指向函数的指针。

每个指针都指向结构。

不知道该怎么做，请帮助我了解它的一般机构是什么。

谢谢。

```
#include <ansi_c.h>
#include <string.h>
#include <stdio.h>

void  sortbyname(struct worker   *p); 

void main()
{

    struct worker{
      char lastname[20],name[20];      
      int  age;int Seniority,salary,offdays [12];
    };

  int i,j;
  struct worker  employee[6],*pemp[6],*pS[6],*pN[6],*pill[6];

  for (i=0;i<6;i++)
  {
    pemp[i]=&employee[i];
    pS[i]=&employee[i];
    pN[i]=&employee[i];
    pill[i]=&employee[i];
  } 

  FILE *fp;
  fp=fopen("c:\\Users\\iliya\\Documents\\National Instruments\\CVI\\hw1-t2\\worker.txt","rt");       

  for (i=0;i<6;i++)
  {
    fscanf(fp,"%s",pemp[i]->lastname);
    fscanf(fp,"%s",pemp[i]->name); 
    fscanf(fp,"%d",&pemp[i]->age);
    fscanf(fp,"%d",&pemp[i]->Seniority);
    fscanf(fp,"%d",&pemp[i]->salary);
    for (j=0;j<12;j++)
    fscanf(fp,"%d",&pemp[i]->offdays[j]);

  } 

  sortbyname(pemp );
  //  sortbysalary();
  //  sortbydaysoff();             
  getchar();     
}` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:50:58.637

这是您声明指针数组的方式：

`<type> * <identifier_name> [size]`

例如`int *a[10] // It's the array of 10 integer pointers`

struct 也类似：

例如

```
#define Max 10

typedef struct {

int a;
float b;

} Mystruct;

Mystruct * MystArray[Max]; 
```

您可以根据自己的选择编写函数：

```
<return type>func(Mystruct * MystArray[Max])
{
 //body of func
}

<return type>func(Mystruct **MystArray)
{
 //body of func
}

<return type>func(Mystruct * MystArray[])
{
 //body of func
} 
```

任何方式数组衰减为函数调用中的指针

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:58:37.543

以下代码现在可以编译，但您需要填写其余代码。
希望这可以帮助。

```
#include <stdio.h>
#include <string.h>

struct worker{
    char lastname[20],name[20];
    int  age;int Seniority,salary,offdays [12];
};

void  sortbyname(struct worker   *p[])
{
}

int main()
{

  int i,j;
  struct worker  employee[6],*pemp[6],*pS[6],*pN[6],*pill[6];

  for (i=0;i<6;i++)
  {
    // do something

    //pemp[i]=&employee[i];
    //pS[i]=&employee[i];
    //pN[i]=&employee[i];
    //pill[i]=&employee[i];
  }

  FILE *fp;
  fp=fopen("worker.txt","rt");

  if (fp==NULL) {
      printf("\nfopen failed\n");
      return -1;
  } else {
      printf("\nfile found\n");
  }

  for (i=0;i<6;i++)
  {
    // do something
  }

  sortbyname(pemp );
  //  sortbysalary();
  //  sortbydaysoff();
  getchar();
} 
```

# mysql - Drupal 7 PDOException：（可能是 max_packet_size 问题？）

> ID：13274278
> 
> 赞同：-1
> 
> 时间：2012-11-07T16:46:58.430
> 
> 标签：mysql, drupal

保存视图后，我在 Drupal 7 的所有页面上都出现了这个错误。经过一些研究，我认为 Mysql 中的“最大允许数据包”设置得太低......目前是 68MB。我已要求将其设置为 250MB。但欢迎对该问题进行任何进一步的诊断。

```
Additional uncaught exception thrown while handling exception.

Original

PDOException: SQLSTATE[HY000]: General error: 2006 MySQL server has gone away: SELECT format, type, language FROM {date_format_locale}; Array ( ) in system_date_format_locale() (line 3650 of /home/mysite/public_html/beta1/modules/system/system.module).

Additional

PDOException: SQLSTATE[HY000]: General error: 2006 MySQL server has gone away: INSERT INTO {watchdog} (uid, type, message, variables, severity, link, location, referer, hostname, timestamp) VALUES (:db_insert_placeholder_0, :db_insert_placeholder_1, :db_insert_placeholder_2, :db_insert_placeholder_3, :db_insert_placeholder_4, :db_insert_placeholder_5, :db_insert_placeholder_6, :db_insert_placeholder_7, :db_insert_placeholder_8, :db_insert_placeholder_9); Array ( [:db_insert_placeholder_0] =&gt; 1 [:db_insert_placeholder_1] =&gt; php [:db_insert_placeholder_2] =&gt; %type: !message in %function (line %line of %file). [:db_insert_placeholder_3] =&gt; a:6:{s:5:&quot;%type&quot;;s:12:&quot;PDOException&quot;;s:8:&quot;!message&quot;;s:132:&quot;SQLSTATE[HY000]: General error: 2006 MySQL server has gone away: SELECT format, type, language FROM {date_format_locale}; Array ( ) &quot;;s:9:&quot;%function&quot;;s:27:&quot;system_date_format_locale()&quot;;s:5:&quot;%file&quot;;s:61:&quot;/home/mysite/public_html/beta1/modules/system/system.module&quot;;s:5:&quot;%line&quot;;i:3650;s:14:&quot;severity_level&quot;;i:3;} [:db_insert_placeholder_4] =&gt; 3 [:db_insert_placeholder_5] =&gt; [:db_insert_placeholder_6] =&gt; http://beta1.mysite.co.uk/ [:db_insert_placeholder_7] =&gt; [:db_insert_placeholder_8] =&gt; 83.244.234.228 [:db_insert_placeholder_9] =&gt; 1352306457 ) in dblog_watchdog() (line 157 of /home/mysite/public_html/beta1/modules/dblog/dblog.module).

Uncaught exception thrown in session handler.

PDOException: SQLSTATE[HY000]: General error: 2006 MySQL server has gone away in _drupal_session_write() (line 206 of /home/mysite/public_html/beta1/includes/session.inc). 
```

谢谢

李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:55:52.820

为了解决这个问题，PlatinumServerManagement.com 的人增加了 mysql 配置文件中的等待超时值。

李

# authentication - 用于登录的身份验证过滤器和 servlet

> ID：13274279
> 
> 赞同：22
> 
> 时间：2012-11-07T16:46:59.487
> 
> 标签：authentication, servlets, servlet-filters, login-control

我有一个用于登录的过滤器。它对“用户名”和“密码”字段执行文本检查。当且仅当文本检查正确完成时，请求才会发送到 Servlet。后者执行必须与数据库交互的控制。这个链条正确吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-07T19:44:07.803

前言：我猜您使用的是本地登录而不是容器管理的登录。对于所有方式，请参阅[如何处理数据库中用户的身份验证/授权？](https://stackoverflow.com/questions/9965708/how-to-handle-authentication-authorization-with-users-in-a-database)

* * *

过滤器（拦截器）不应检查用户名/密码组合的有效性。这是 servlet（控制器）的职责。

过滤器应该只检查用户是否登录（通常只检查会话属性的存在），然后继续请求或通过重定向回登录页面来阻止它。

```
@WebFilter("/*")
public class LoginFilter implements Filter {

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws ServletException, IOException {    
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;
        HttpSession session = request.getSession(false);
        String loginURI = request.getContextPath() + "/login";

        boolean loggedIn = session != null && session.getAttribute("user") != null;
        boolean loginRequest = request.getRequestURI().equals(loginURI);

        if (loggedIn || loginRequest) {
            chain.doFilter(request, response);
        } else {
            response.sendRedirect(loginURI);
        }
    }

    // ...
} 
```

servlet 应该收集提交的数据，`User`在数据库中找到关联的数据，如果找到，则将其存储为会话属性，然后重定向到主页，否则重新显示带有验证错误的表单。

```
@WebServlet("/login")
public class LoginServlet extends HttpServlet {

    @EJB
    private UserService userService;

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        request.getRequestDispatcher("/WEB-INF/login.jsp").forward(request, response);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String username = request.getParameter("username");
        String password = request.getParameter("password");
        Map<String, String> messages = new HashMap<String, String>();

        if (username == null || username.isEmpty()) {
            messages.put("username", "Please enter username");
        }

        if (password == null || password.isEmpty()) {
            messages.put("password", "Please enter password");
        }

        if (messages.isEmpty()) {
            User user = userService.find(username, password);

            if (user != null) {
                request.getSession().setAttribute("user", user);
                response.sendRedirect(request.getContextPath() + "/home");
                return;
            } else {
                messages.put("login", "Unknown login, please try again");
            }  
        }

        request.setAttribute("messages", messages);
        request.getRequestDispatcher("/WEB-INF/login.jsp").forward(request, response);
    }

} 
```

### 也可以看看：

*   [我们的 servlet-filters wiki 页面](https://stackoverflow.com/tags/servlet-filters/info)
*   [我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)

# javascript - 从 HTML 中获取值并存储到变量中

> ID：13274282
> 
> 赞同：0
> 
> 时间：2012-11-07T16:47:07.223
> 
> 标签：javascript, html, variables, input

我有以下代码： http: [//pastebin.com/61K2J9kR](http://pastebin.com/61K2J9kR)

谁能告诉我为什么该值没有存储到**dest_x 中**？一旦**“开始！”**，文本框中的输入应存储到**dest_x** 按钮被点击。

 **任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:50:05.177

这可能是因为您`onclick`在同一个元素上有两个属性。

```
<INPUT id="btnMove" type="button" value="GO!" onClick="javascript:var t=setInterval('moveRight()', 80)" onClick="getValue()"> 
```

你应该只有一个：

```
<input id="btnMove" type="button" value="GO!" onclick="var t=setInterval('moveRight()', 80); getValue();"> 
```

你也不应该`javascript:`在`onclick`事件中使用 - 这是一种用于将 JavaScript 放置在`href`属性中的技术。

您还应该将检索移动`dest_x`到您的 moveRight 函数中：

```
function moveRight() {
    var dest_x = document.getElementById('txtChar').value;
    //... 
```

请注意，它是`getElementById`，不是`getElementByID`- JavaScript 区分大小写。

我已将这些更改包含在您的脚本的更新版本中：http: [//pastebin.com/aX6mXRhg](http://pastebin.com/aX6mXRhg)

这些更改使事情变得正常 - 还有其他事情您可能需要稍后考虑 - 但上面的修复应该让您同时进行。

1.  确定函数和变量的范围
2.  在 JavaScript 中附加事件，而不是 HTML 属性
3.  避免使用`eval`**

# javascript - Javascript 字符串到 JSON

> ID：13274283
> 
> 赞同：0
> 
> 时间：2012-11-07T16:47:10.077
> 
> 标签：javascript

怎样才能得到这个

```
var myString = 'a,b'; 
```

以下以最有效的方式

```
var myObject = { a:1, b:1}; 
```

我需要 1 与每个参数相关联。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T16:50:08.830

假设您的字符串确实定义为

```
var myString = 'a,b'; 
```

那么你可以得到你的对象

```
var obj = {};
var t = myString.split(',');
for (var i=0; i<t.length; i++) obj[t[i]] = 1; 
```

这将使 obj 就像

```
var obj = { a:1, b:1}; 
```

请注意，我没有达到您的目标，因此这可能没用...

**旁白：**

JSON 是一种用于数据交换的文本格式。没有什么能比得上 JSON 对象。`{ a:1, b:1}`只是一个具有两个属性的普通 javascript 对象。

如果你想要的是真正的 JSON，你可以这样做

```
var myJSON = JSON.stringify(obj); 
```

Tis 相当于

```
var myJSON = '{"a":1,"b":1}'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:49:10.153

`var myString = a,b;`不做你认为它做的事。

它设置的内容`myString` 等于`a`和`b`作为 a的值`undefined`。

做你想做的事，只需写下：

```
var myJSON = { a:1, b:1}; 
```

和**p00f**，它只是工作。

* * *

*以上适用于OP的忍者编辑之前。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T16:50:21.543

您可以为此使用`.split()`和。`.reduce()`

```
var result = myString.split(',')
                     .reduce(function(obj, key) {
                         return obj[key] = 1, obj;
                     }, {}); 
```

对于较旧的 JavaScript 实现，您需要一个 shim。

# model-view-controller - 实用层的目的是什么？它如何与 Web 应用程序架构中的其他层联系起来？

> ID：13274289
> 
> 赞同：0
> 
> 时间：2012-11-07T16:47:33.887
> 
> 标签：model-view-controller, architecture, dao, layer, utility

我是 Java EE 架构的新手（尝试对此进行一些阅读 - 请建议好的资源）。

当我们使用 MVC 模式时，DAO 层由包含访问数据库的方法的类组成。同样，服务层包含使用 DAO 类中的方法并具有一些业务逻辑的类。我在一些项目中看到使用了 Util 类，它们包含为服务层类执行某些工作的方法。

这个 Utility 层的确切目的是什么？它可以包含来自 Spring 依赖注入的 getter 和 setter 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:52:21.657

没有“实用层”。像like这样`MyMagnificentMailer`的构造只是一种不同的服务。我不确定您是否真的将域对象与 DAO（或其他形式的存储抽象）分开，但就像域对象可以包含其他域对象并与之交互一样，您的`Authentication`服务可以与之交互的方式相同`Mailer`，反之亦然。

没有规则说，*真正的*服务必须建立在顶级 DAO 之上。

# ruby-on-rails - Rails：单页网站，如何组织控制器/视图等

> ID：13274295
> 
> 赞同：1
> 
> 时间：2012-11-07T16:47:57.690
> 
> 标签：ruby-on-rails, ruby, frameworks, controllers

我有一个使用 ruby​​ on rails 作为框架的单页网站。在单页上，我有一个

标题

第 1 节

第 2 节

第 3 节等

页脚

我遇到的问题是，如何组织布局/视图/控制器。只有在一个部分中，我有一个需要处理并链接到数据库表（模型）的表单。谁能告诉我如何组织我的 ROR 申请？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T17:00:59.127

[关于“如何在 Rails 中制作单页应用程序”的问题已在此处](https://stackoverflow.com/questions/3349040/single-page-rails-app)、[此处](https://stackoverflow.com/questions/10426595/how-do-i-create-a-single-page-application-in-rails)和[此处](https://stackoverflow.com/questions/10426595/how-do-i-create-a-single-page-application-in-rails)等 SO 上多次提出。

您可以尝试查找单页应用程序 (SPA) 教程，这里有一个关于 Vimeo 的视频，[其中](http://vimeo.com/25408735)Prateek Mohan Dayal 展示了如何在 Rails 和 Backbone.js 中制作单页应用程序。

## 在 SPA 的后端

在后端，**您很可能会像往常一样使用 Rails 来安排控制器和模型**，但是您将检索 JSON 数据作为视图（即 AJAX 内容），因为它们是处理数据的最简单方法客户端。

因此，请考虑您拥有哪些模型以及如何在控制器中使用它们，并像往常一样安排代码。

至于如何通过向 Rails 发送 JSON 数据来执行 AJAXy 操作，您可以查看[此 SO 答案中的 Yehuda Katz Rails 3 book，](https://stackoverflow.com/a/6889619/3713)或者您可以查看[使用 Rabl 开发 JSON API 的简单示例](http://www.rodrigoalvesvieira.com/developing-json-api-rails-rabl/)。

## 在 SPA 的前端

似乎大多数 Rails 开发人员都在使用[Backbone.js](http://backbonejs.org/)或[Ember.js](http://emberjs.com/)进行单页应用程序开发。它们都有一些强大的基于 javascript 的视图模型和数据绑定概念，有助于开发 Web 应用程序。

另一种入门方法是查看[Addi Osmani 的 TodoMVC 项目](http://addyosmani.github.com/todomvc/)，它是在许多不同的 javascript MVC 框架中开发的单页应用程序（即基于 Web 的待办事项列表）。上面提到的两个框架都可供您阅读：

*   [TodoMVC Backbone 版——源代码](https://github.com/addyosmani/todomvc/tree/gh-pages/architecture-examples/backbone)
*   [TodoMVC Ember 版本 - 源代码](https://github.com/addyosmani/todomvc/tree/gh-pages/architecture-examples/emberjs)

### 以下是一些截屏视频：

*   [Peepcode 也有一些关于 Backbone.JS 的入门项目和视频教程，](https://peepcode.com/products/backbone-js)不过就像它的截屏视频一样，它的成本很高。
*   [代码学校也有一些关于 Backbone.JS 的教程，](http://www.codeschool.com/courses/anatomy-of-backbonejs)其中介绍级别是免费的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:55:24.517

好吧，如果您不创建新布局，所有内容都将在应用程序布局中（app/views/layous/application.html.erb），在此文件中，您将为标题创建 html 和页脚。同样在这个文件中你会看到一个<%= yield %>，这个yield 将向你展示你的控制器的视图。

对不起我的英语，我希望这对你有帮助。您也可以查看[Rails 教程](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book/)

非常有帮助且非常具有描述性。您也可以查看[RailsCast](http://railscasts.com/)视频。

对于第 1 部分和第 2 部分，您可以查看 rails guide 以了解如何以任意数量的产量显示某些内容。这是链接[了解产量](http://guides.rubyonrails.org/layouts_and_rendering.html#understanding-yield)

# sql - SQL Server 的自动增量功能

> ID：13274296
> 
> 赞同：-1
> 
> 时间：2012-11-07T16:48:04.587
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我创建了一个名为 ABC 的表。它具有三列，如下所示：-

![在此处输入图像描述](../Images/ce4dc601a2d63fdf4d9bf0a31bbf90dc.png)

该列`number_pk` `(int)`是我的表的**主键**，我在其中`auto increment`为该列创建了该功能。

现在我已经从该表中删除了两行，比如`Number_pk= 5`和`Number_pk =6`。

我现在得到的表是这样的：-

![在此处输入图像描述](../Images/db84afec946f402efd2f4069f47166d7.png)

现在，如果我再次在此表中输入两个具有相同值的新行，我将得到两个新行，`Number_pk starting from 7 and 8`即

![在此处输入图像描述](../Images/702c277ddca69b3c72e811fbe16be083.png)

我的问题是，这背后的逻辑是什么，因为我已经从表中删除了两行。我知道一个简单的答案是因为我已经为我的表的主键设置了自动增量。但我想知道有什么方法可以从最后一个 Number_pk 开始插入两个新条目而不改变我的表格设计？

***自从我从数据库中删除了行后，SQL Server***如何管理这条记录？

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:56:32.283

虽然您不应该这样做，直到他们是一个特定的要求。

1.）获取最大ID：

```
Declare @id int
Select @id = Max(Number_pk) From ABC
SET @id = @id + 1; 
```

2.）并重置身份列：

```
DBCC CHECKIDENT('ABC', RESEED, @id) 
```

[DBCC CHECKIDENT (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms176057%28v=sql.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:58:21.890

逻辑是保证生成的数字是唯一的。ID 字段不一定必须具有含义，而是最常用于标识唯一记录，从而更容易对其执行操作。

如果您的数据库设计得当，如果已删除的 ID 号被外键关系中的任何其他表引用，则它们将无法删除，从而防止记录以这种方式成为孤立的。

如果您绝对想要条目序列，您可以考虑发布 a `RESEED`，但正如建议的那样，它不会真正给您带来太多优势。

身份记录是“托管的”，因为 SQL Server 将跟踪已发布的号码，无论它们是否仍然存在。

如果您想从表中删除所有记录，有两种方法可以这样做（假设不存在外键关系）：

```
DELETE FROM Table 
```

`DELETE`只是删除记录，但下一个 INSERTED 值将在 ID 编号左侧的位置继续。

```
TRUNCATE TABLE 
```

`TRUNCATE`实际上会 RESEED 表，从而保证它以您最初指定的值（很可能是 1）重新开始。*

# php - php的奇怪行为

> ID：13274298
> 
> 赞同：1
> 
> 时间：2012-11-07T16:48:06.587
> 
> 标签：php, c++

今天我注意到 php.ini 中有一个歧义。我运行了这段代码

```
$i = 5;
$i = $i ++;
var_dump($i); //output 5 instead of 6 
```

让我们假设 的初始值`$i is 5`。现在新值应该是 6 但实际上是`5`。当我做同样的事情时，`C++`我得到了`6`预期的结果。是 php 中的一些错误多年来未被注意到还是其他原因。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T16:50:23.333

为什么你认为这个值*应该是*6？

`$i`正在递增，将返回递增*之前*的值（因为您使用的是*后递增运算符*）并分配给`$i`. 似乎合乎逻辑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T16:50:31.820

尝试

```
$i = ++$i; 
```

你会得到正确的结果。

问题是，如果你这样做，`$i = $i++`则`$i`在语句之后递增，但你将它分配给另一侧的旧变量，所以它永远不会递增变量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T16:51:43.643

[查看递增/递减运算符的手册](http://php.net/manual/en/language.operators.increment.php)。你问的行为是正常的，只是违背了你作为 C++ 开发人员的直觉。

$i++*首先*返回 $i 的值，然后执行并递增，而 ++$i 在返回之前递增 $i。

# html - 使列的所有元素具有相同的宽度，没有 `display:block` 或 `width`

> ID：13274301
> 
> 赞同：4
> 
> 时间：2012-11-07T16:48:17.393
> 
> 标签：html, css, positioning

我有一个网页，其中有三个绿色框，每个都在自己的行上。每个绿色框还有一个关联的红色框，当您将鼠标悬停在绿色框上时会出现。所有的绿色框都包含在一个黑框内，该黑框的宽度刚好可以容纳最宽的绿框。

[JSFiddle](http://jsfiddle.net/APVuq/)

![在此处输入图像描述](../Images/56d8933ea11ca2af946bbbfc05d94244.png)

# 问题

**如何加宽较短的绿色框，使其与最宽的绿色框的宽度相匹配？**这是我希望看到的 MSPaint 再现：

![在此处输入图像描述](../Images/a0226405ad819d24433dfa72255cd2b2.png)

# 我正在测试的浏览器

至少，我想支持 Internet Explorer 7、8 和 9。Firefox 是可选的。我对支持任何其他浏览器不感兴趣。

# 到目前为止我尝试过的

我已经做了一些尝试来实现这一点，但我无法让它按照我想要的方式工作。（如果它们很无聊，请随意跳过接下来的部分。）

## 尝试 1

我给每个绿色块都设置了`display:block`样式，并删除了`<br/>`它们之间的 s。

[JSFiddle](http://jsfiddle.net/m5du5/1/)

![在此处输入图像描述](../Images/ce82430652ecc43196d447fa1ba3f0f0.png)

绿色框已成功调整大小！但是，现在每个红色框都出现*在*其各自的绿色框下方，而不是右侧。不知道有没有办法把红框和`block`元素放在同一行，所以放弃了这种做法。

## 尝试 2.0

我给每个绿色框设置了 100% 的宽度，并删除了`<br/>`它们之间的 s。

[JSFiddle](http://jsfiddle.net/tDGxv/1/)

![在此处输入图像描述](../Images/b785df08c1ff32a4413e9d84c8339a79.png)

（忽略绿色和红色框之间的间隙。那是因为两个跨度之间有空白，并且易于修复。）

绿色盒子的大小都一样，但它们的宽度大约为 50px，并且超出了黑色盒子的末端。

其他特定于浏览器的问题：

*   在 IE7 中，这些框都出现在一行上。
*   在 Firefox 中，红框出现在各自的绿框下方。

## 尝试 2.1

从尝试 2.0 开始，我删除了绿色框的填充。填充是一个非常强大的“拥有它会很好”的功能，但如果真的没有办法拥有它，我会放弃它。

[JSFiddle](http://jsfiddle.net/vFcjD/1/)

![在此处输入图像描述](../Images/7c3fb68efb2d4f9096d10d889f07f0d0.png)

绿色的盒子比黑色盒子的末端延伸了 1px，这很烦人，但不是不可接受的。箱子还是太宽了。2.0 中的所有特定于浏览器的问题仍然有效。

## 尝试 2.2

从尝试 2.1 开始，我重新添加了`<br/>`s。

[JSFiddle](http://jsfiddle.net/XChPP/2/)

![在此处输入图像描述](../Images/8d54129db8dabcea429a616fdc6cd253.png)

绿色框是正确的宽度，给或取一个像素！

特定于浏览器的更新：

*   这些框在 IE7 中出现在自己的行中，但它们的宽度并不完全相同。
*   Firefox 仍然在错误的位置显示红色框。此外，相邻的绿箱之间也有很大的差距。

## 尝试 2.3

从尝试 2.2 开始，我更改`width`为 99%。

[JSFiddle](http://jsfiddle.net/zJsxC/1/)

![在此处输入图像描述](../Images/e1c837a753e4240c0b95b00554212891.png)

绿色盒子比黑色盒子短一点，可以接受。只要它们的宽度相同。

特定于浏览器的更新：

*   在 IE7 中，框的宽度仍然不同。
*   Firefox 运行良好。

所以我现在有 75% 的浏览器兼容性。然而，似乎任何调整都无法让 IE7 正常工作，所以我放弃了这种技术。

# TL;博士

调整框的大小以适应列通常并不太难。但是，当框具有固定像素宽度的填充和必须出现在其右侧的绝对定位的兄弟时，常规方法会失败。我正在寻找一种在这些特殊情况下有效的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:21:02.257

I verified that this demo works in IE7+ and modern browsers:

[http://jsfiddle.net/thirtydot/APVuq/4/](http://jsfiddle.net/thirtydot/APVuq/4/)

**CSS:**

```
.hoverBox {
    position: relative;
}

.visiblePart {
    display: block;
    border: 1px solid green;
    padding: 5px;
    white-space: nowrap;
}

.hiddenPart {
    display: none;
    border: 1px solid red;
    position: absolute;
    left: 100%;
    top: 0;
    white-space: nowrap;
}

.hoverBox:hover > .hiddenPart{
    display: block;
}

.enclosingBox {
    border: 1px solid black;
    display: inline-block;
    *display: inline;
    zoom: 1;
} 
```

**HTML:**

```
<div class="enclosingBox">
    <div class="hoverBox">
        <span class="visiblePart">
            Box 1
        </span>
        <span class="hiddenPart">
            Hidden part of Box 1
        </span>
    </div>

    <div class="hoverBox">
        <span class="visiblePart">
            Box 2, which is much wider than box 1
        </span>
        <span class="hiddenPart">
            Hidden part of Box 2
        </span>
    </div>

    <div class="hoverBox">
        <span class="visiblePart">
            Box 3, which <br/> is split into two lines.
        </span>
        <span class="hiddenPart">
            Hidden part of Box 3
        </span>
    </div>
</div>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:55:09.523

我简直不敢相信我要写的东西，但为什么不使用一个好的旧的`<table>`呢？有 2 列和 3 行，第二列包含你的红色框......这应该很容易做到。

# android - 从媒体控制器中删除后退和前进按钮

> ID：13274304
> 
> 赞同：3
> 
> 时间：2012-11-07T16:48:21.873
> 
> 标签：android, android-mediaplayer

我使用 MediaController 播放我的音频。但是，我想从我的 MediaController 中删除后退和前进按钮。请帮我。（PS。代码很有用）我该如何编辑它。

```
public class Main extends Activity implements MediaPlayerControl {
    private static final String PLAY_AUDIO = "PLAY_AUDIO";  
    private MediaController mMediaController
    private MediaPlayer mMediaPlayer;
    private Handler mHandler = new Handler();

    static Context context;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        context = this;

        mMediaPlayer = new MediaPlayer();
        mMediaController = new MediaController(this);

        mMediaController.setMediaPlayer(Main.this);
        mMediaController.setAnchorView(findViewById(R.id.audioView));
        mMediaController.setPrevNextListeners(new View.OnClickListener() {
            public void onClick(View v) {
                //next button clicked
            }       
        }, new View.OnClickListener() {
            public void onClick(View v) {
                //previous button clicked
            }
        });

        try { 
            mMediaPlayer.setDataSource(
                this,
                Uri.parse("android.resource://com.app.audioplayer/raw/allforyou")
            );
            mMediaPlayer.prepare();         
        } catch (IOException e) {
            Log.e(PLAY_AUDIO, "Could not open file " + "  " + " for playback.", e);         
        }

        mMediaPlayer.setOnPreparedListener(new OnPreparedListener() {
            public void onPrepared(MediaPlayer mp) {
                mHandler.post(new Runnable() {
                    public void run() {
                        mMediaController.show(0);
                        mMediaPlayer.start();
                    }
                });
            } 
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-14T18:06:32.647

最简单的解决方案...

```
MediaController mediaController = new MediaController(this, false); 
```

礼貌：@Meow meo（在原始问题的评论中）

# php - 保护 PHP 表单的最低要求

> ID：13274305
> 
> 赞同：0
> 
> 时间：2012-11-07T16:48:27.970
> 
> 标签：php, forms, security, post

那里有很多“安全的 PHP 表单”问题，但我无法找到一个简单明确的“最低要求”答案。

我将如何使表格 100% 安全？就像在输出上运行一个函数一样简单，如下所示：

```
$text = $_POST['text'];
$text = doThisToMakeSafe($text); 
```

还是有其他方法可以通过表单获得恶意访问而不提交？

理想情况下，我想要一段可以放入所有表单的代码片段，这样我就不必担心任何安全问题。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:49:20.977

> 理想情况下，我想要一段可以放入所有表单的代码片段，这样我就不必担心任何安全问题。这可能吗？

不，这很容易回答。您正在寻找的东西是不可能的。

您可以创建一个只接受值的表单抽象，并且表单抽象足够了解如何创建输出以处理公共位置所需的所有内容，但是，反过来是不可能的 - 调用函数的方式在一些传递的数据上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:53:04.893

约翰，取决于你要如何处理价值。

大多数问题都能够防止SQL注入。您应该查找[验证](http://en.wikipedia.org/wiki/Verification_and_validation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:51:17.373

上下文感知验证是确保任何字段安全的一部分，因此，仅在这个前提下，您所要求的是不可能的。

# c++ - 在 C++ 中解耦 IPC

> ID：13274312
> 
> 赞同：2
> 
> 时间：2012-11-07T16:48:48.910
> 
> 标签：c++, multithreading, ipc, multiprocessing

我正在研究一个按不同部分组织的广泛程序（Linux 上的 C++/Qt）：从内部引擎到不同的 UI（其中一些是图形的）。到目前为止，我已经组织了这个部门，创建了许多不同的流程，这些流程的数量等于不同的 UI 和引擎的数量。每个“用户”进程通过两个管道（相反方向）与核心引擎进行通信。

我想要获得的是让每一个进程作为一个独立的进程运行，在与引擎进程通信时不会阻塞，而只是使用内部自定义“消息缓冲区”（已经构建和测试）来存储消息和进程他们有空的时候。

解决方案是（我猜）设计每个进程来生成一个额外的线程，该线程负责与引擎进程（以及另一个用于 GUI）进行通信。我正在使用 pthread.h 库（POSIX）。这样对吗？有人可以提供一个简单的例子来说明如何实现一对进程之间的通信吗？

提前致谢。

# c - 检索重置连接的客户端的 IP 地址

> ID：13274315
> 
> 赞同：0
> 
> 时间：2012-11-07T16:49:00.360
> 
> 标签：c, linux, sockets

我有这段代码，当客户端关闭或失去连接时，它会获取客户端的 ip。

```
char buffer[80]; 
ssize_t bread;
struct sockaddr_in peer;
socklen_t peer_len;

peer_len = sizeof(peer);

memset(&buffer, 0, sizeof(buffer));

bread = read(connectlist[listnum], buffer, 80);
if (bread < 0)
{

if(getpeername(connectlist[listnum],(struct sockaddr *) &peer, &peer_len) == -1){

        perror("getpeername() failed");
    }
            printf("Connection Reset From IP: %s\n", inet_ntoa(peer.sin_addr));

                _Print_To_File(inet_ntoa(peer.sin_addr));
                    close(connectlist[listnum]);
                        close(connectlist[listnum]);
                            connectlist[listnum] = 0;

}

if(bread == 0)
{
if(getpeername(connectlist[listnum],(struct sockaddr *) &peer, &peer_len) == -1){
        perror("getpeername() failed");
    }
            printf("Connection Closed From IP: %s\n", inet_ntoa(peer.sin_addr));

                _Print_To_File(inet_ntoa(peer.sin_addr));
                    close(connectlist[listnum]);
                            connectlist[listnum] = 0;
} 
```

连接关闭时我可以获取客户端的 ip，但连接重置时我没有获取客户端的 ip。我在连接重置时得到 0.0.0.0。我怎样才能解决这个问题。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:06:47.993

`getpeername()`仅适用于连接的套接字。`ENOTCONN`一旦套接字断开连接，调用它时就会出错。这就是为什么`getpeername()`有时用作检查套接字是否已连接的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:59:33.590

您可能希望在 ing之前使用 done`struct sockaddr`调用返回的。`accept()``read()`

逐字逐句`man accept`：

> **int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen);**
> 
> [...]
> 
> 参数 addr 是指向 sockaddr 结构的指针。 *如通信层所知，该结构用对等套接字的地址填充。* 返回地址 addr 的确切格式由套接字的地址族确定（参见 socket(2) 和相应的协议手册页）。addr为NULL时，不填任何内容；在这种情况下，不使用 addrlen，也应该为 NULL。

# android - Android 设备管理对话框未显示 - 自动拒绝

> ID：13274318
> 
> 赞同：0
> 
> 时间：2012-11-07T16:49:01.403
> 
> 标签：android, dialog, admin, device-policy-manager

我正在尝试用我的应用程序锁定屏幕。我已经通过谷歌文档工作并研究了示例。

当我打电话给这个

```
 void getAdmin(){
    Intent activateDeviceAdminIntent = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
        activateDeviceAdminIntent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, mPolicy.getPolicyAdmin());
        activateDeviceAdminIntent.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION,
                getResources().getString(R.string.AdminReceiverDescr));
        startActivityForResult(activateDeviceAdminIntent, REQ_ACTIVATE_DEVICE_ADMIN);
} 
```

对话没有出现（也许它闪烁了一点，不能肯定地说），它只是跳转到我的 onResult 例程中，结果是“未授予”。但是我的应用程序随后显示在设置/安全/设备管理员的列表中，如果我手动启用管理员权限，它会像魅力一样锁定我的屏幕。

我已添加权限

使用权限 android:name="android.permission.BIND_DEVICE_ADMIN"

也

接收器... android:permission="android.permission.BIND_DEVICE_ADMIN"

我的清单。

有谁知道我可能错过了什么？提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:12:40.360

在我的清单中发现了问题：您必须使用 $ 符号指定接收器子类。

示例：android:name="com.exampl.PolicyClass$PolicyReceiver"

# android - 如果我单击同一项目，则不会调用 onNavigationItemSelected 方法

> ID：13274320
> 
> 赞同：0
> 
> 时间：2012-11-07T16:49:09.017
> 
> 标签：android, android-actionbar, actionbarsherlock

我实现了一个包含超过 1000 个元素的片段列表，现在我想使用 OnNavigationListener 添加过滤，因为没有人希望看到所有项目。

有很多过滤器，所以我将它们分组（A、B、C）。如果我单击其中一个，例如：选择组 B，然后上下文菜单会显示 B1、B2、B3 过滤选项。

这是第一次效果很好，但是如果我再次尝试选择 B 组，什么也没发生， onNavigationItemSelected 不会再次调用。（仅当我选择 A 或 C 组时）。

*   一个
    *   A1
    *   A2
    *   A3
*   乙
    *   B1
    *   B2
    *   B3
*   C
    *   C1
    *   C2
    *   C3

是否可以多次选择同一个导航项，或者我必须为我的问题找到一个新的解决方案？

感谢您的建议！

# android - 修改编译Android状态栏项目（SystemUI.apk）

> ID：13274321
> 
> 赞同：1
> 
> 时间：2012-11-07T16:49:09.640
> 
> 标签：android, statusbar

我有一个“.apk”文件，在这个文件中，我想更改状态栏的行为。我可以在“res”文件夹中修改它的文件，但我想编写新代码，所以我下载了我理解的项目[链接](https://github.com/android/platform_frameworks_base/tree/ics-plus-aosp/packages/SystemUI)

我的问题是：我该如何编译它？它似乎是一个更通用的项目的一部分，我在互联网上读过有人说这是可能的，但我无法导入很多引用的类（例如 com.android.internal.R）。

如果这是一个新手问题或不够清楚，我很抱歉，但如果以前做过这件事的人可以提供帮助，我将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:00:25.360

看起来你必须得到[整个项目](https://github.com/android/platform_frameworks_base/tree/ics-plus-aosp)，而不仅仅是 SystemUI 子目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:54:53.987

尝试刷新项目。必须生成 R 文件并确保导入正确的 API 来编译项目

# javascript - firefox+jquery 鼠标滚轮滚动事件错误

> ID：13274326
> 
> 赞同：23
> 
> 时间：2012-11-07T16:49:25.180
> 
> 标签：javascript, jquery, firefox, mousewheel

**更新**大卫建议的工作修复（见下文）：

代替

```
 $('.scrollMe').bind("mousewheel DOMMouseScroll", ...) 
```

和

```
 $('.scrollMe').bind("mousewheel DOMMouseScroll MozMousePixelScroll", ...) 
```

**原帖**

Firefox 16.0.2（最新）在绑定“mousewheel / DOMMouseScroll”事件时出现问题。当鼠标指针位于我的目标 div 顶部时使用鼠标滚轮滚动会导致窗口也滚动 - 而我显然不希望这样。

我尝试添加几种方法来停止传播等，但似乎没有任何效果。

Javascript代码：

```
 $(document).ready(function() {
            $('.scrollMe').bind("mousewheel DOMMouseScroll", function(e) {
                e.stopImmediatePropagation();
                e.stopPropagation();
                e.preventDefault();

                var delta = parseInt(e.originalEvent.wheelDelta || -e.originalEvent.detail);

                $(this).empty();    
                return false;
            });
    }); 
```

要查看它的实际效果，请点击下面的 jsFiddle 链接。在示例页面上，只需将鼠标指针放在带有红色框的 div 内，然后使用鼠标的滚轮。Firefox 将第一次滚动父窗口（出乎意料），而其他浏览器则不会。

[jsFiddle 代码示例](http://jsfiddle.net/nWXBp/1/)

奇怪的是，一旦您在绑定元素上触发事件，Firefox 就不会重复该行为，这意味着它会停止滚动页面。但是，在您手动滚动页面并重试后，它确实会重复此行为。

我也在 IE9 和 Chrome 中对此进行了测试，但在这些浏览器中无法检测到这个问题（这意味着它们不会意外滚动窗口），所以我猜它是 Firefox 特定的（也禁用了 Firefox 等中的每个插件。 )

这真的是 Firefox 中的一个错误吗（如果是这样，是否有一个跨浏览器黑客可以解决问题）？或者，如果您知道任何其他解决方案可以在没有页面窗口滚动的情况下实现捕获鼠标滚轮事件的相同效果，请随时回答！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-07T16:55:56.963

我无法使用触摸板在我的 FF 16.01 OSX 中重现此错误（Fiddle 工作正常），但我知道还有另一个名为[MozMousePixelScroll](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/MozMousePixelScroll)的特定于 mozilla 的事件。您可能也想尝试参与其中。

MDN 上还有更多信息：[https ://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/DOMMouseScroll](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/DOMMouseScroll)

作为旁注，我认为停止使用默认操作`e.preventDefault()`就足够了，也不需要停止传播（除非存在其他 IE 特定错误）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-11T14:38:26.153

阅读[https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/DOMMouseScroll](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/DOMMouseScroll) 似乎 MozMousePixelScroll DOMMouseScroll 适用于 firefox 16 或更早版本。对于 Firefox >17，请使用该`wheel`事件。

```
$(document).ready(function() {
        $('.scrollMe').bind("wheel mousewheel", function(e) {
            e.preventDefault();

            var delta = parseInt(e.originalEvent.wheelDelta || -e.originalEvent.detail);

            $(this).empty();    
            return false;
        });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-11T13:12:11.113

这个问题的答案是我找到的最兼容浏览器的解决方案：

[如何检测滚动方向](https://stackoverflow.com/questions/7154967/how-to-detect-scroll-direction/11746221#11746221)

```
 $('#elem').on( 'DOMMouseScroll mousewheel', function ( event ) { 
    if( event.originalEvent.detail > 0 || event.originalEvent.wheelDelta < 0 ) { //alternative options for wheelData: wheelDeltaX & wheelDeltaY
        //scroll down
        console.log('Down');
      } else {
        //scroll up
        console.log('Up');
      }
      //prevent page fom scrolling
      return false;
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-08T08:18:21.890

**这个答案是 Chrome、Firefox 和 iExplorer 上的跨浏览解决方案**

```
var handlerMousewheel = function(){
		$(".item").on("wheel mousewheel", function(event) {
			event.preventDefault();
				var deltaY = event.originalEvent.deltaY;
				var wheelDeltaY = event.originalEvent.wheelDeltaY;

				 if( deltaY == 100 && wheelDeltaY == -120 || deltaY > 0 && wheelDeltaY == undefined ) {
			   		$(".wrapper").animate({"margin-left":"0%"},{duration:100});
				 }else if(deltaY == -100 && wheelDeltaY == 120 || deltaY < 0 && wheelDeltaY == undefined){
			      $(".wrapper").animate({"margin-left":"50%"},{duration:100});
				 }

		});
	}
  handlerMousewheel();
```

```
.container{
  display:block;
  width:100%;
  height:200px;
  overflow-x:hidden;
  overflow-y:scroll;
  background-color: grey;  
}
.wrapper{
  display:block;
  overflow:hidden;
  background-color:#a3cfef;
  padding: 2%;
  width:50%;
  margin:0 auto;
}
.item{
  width:100%;
  height:50px;
  margin:2px 0;
  display:block;
  overflow:hidden;
  border:3px solid #ad08a6;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="container">
  <div class="wrapper">
    <div class="item"></div>    
    <div class="item"></div>    
    <div class="item"></div>    
    <div class="item"></div>    
    <div class="item"></div>    
    <div class="item"></div>    
    <div class="item"></div>    
  </div>
</div>
```

[https://jsfiddle.net/rrubio/ncLjgwy0/](https://jsfiddle.net/rrubio/ncLjgwy0/)

# prolog - 矩阵（正方形）关于主对角线对称

> ID：13274327
> 
> 赞同：1
> 
> 时间：2012-11-07T16:49:26.503
> 
> 标签：prolog

定义一个判定矩阵（正方形）是否关于主对角线对称的谓词。谓词将读取，其中 Z 是关于主对角线对称的矩阵（正方形）

对称 (Z)

这个想法是检查行和列是否相等，但不知道如何开始提高练习......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:40:51.747

```
symmetrical(Z) :-
   transpose(Z,Z). 
```

Now, you only need to define transpose!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:48:20.820

好的旧矩阵 I,J 索引：

```
symmetrical(M) :-
   forall(elem(M, I, J, E), elem(M, J, I, E)).

elem(M, I, J, E) :-
   nth1(I, M, R),
   nth1(J, R, E). 
```

测试：

```
?- symmetrical([[a,b],[b,a]]).
true.

?- symmetrical([[a,b],[a,b]]).
false. 
```

*请注意*，我在看到@gusbro 评论之前写了这篇文章，但这正是他所建议的......

# c++ - rand() 在应用程序重新启动时总是返回相同的序列

> ID：13274338
> 
> 赞同：8
> 
> 时间：2012-11-07T16:49:59.420
> 
> 标签：c++, random, numbers, integer

我有以下生成随机数的方法：

```
int random_number() //Random number generator
{
    int x = rand() % 1000000 + 1; //Generate an integer between 1 and 1000000
    return x;
} 
```

对该方法的调用用于循环五次。这种方法的问题在于，在多次运行程序时，它似乎总是生成相同的数字。如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-07T16:52:00.820

您需要[播种](http://www.cplusplus.com/reference/clibrary/cstdlib/srand/)随机数生成器，例如：

```
srand ( time(NULL) );
int x = rand() % 1000000 + 1; 
```

播种伪随机数生成器基本上决定了它将迭代的随机数集。使用时间是获得足够随机结果的标准方法。

编辑：

为了澄清，您应该只播种一次并获得许多随机数，如下所示：

```
srand ( time(NULL) );
loop {
    int x = rand() % 1000000 + 1;
} 
```

而不是类似的东西：

```
loop {
    //Particularly bad if this line is hit multiple times in one second
    srand ( time(NULL) ); 
    int x = rand() % 1000000 + 1;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T16:51:17.997

`srand(time(NULL));`在您的程序启动时进行调用。

`srand`为 rand 函数设置种子。给它返回值`time(NULL)`有助于在每次程序运行时获得不同的种子。

*当您将问题标记为 c++ 时，您可以使用 c++11 功能来处理[随机](http://en.cppreference.com/w/cpp/numeric/random)数生成。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T16:52:38.840

femtoRgon 是对的。这将为程序提供种子，但请查看新的 c++ 标准，因为它们改进了随机数生成，请参见

[C++0x 中的随机数](https://stackoverflow.com/questions/7217791/random-numbers-in-c0x)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T16:55:27.040

rand 并不是真正的随机数，而是一个伪随机数，如果您不知道用于生成值的算法，它只会“看起来”随机。从手册页：

> rand() 函数返回 0 到 RAND_MAX 范围内的伪随机整数

伪随机意味着给定相同的输入，称为种子，它将给出相同的输出。当您尝试调试问题时，这实际上非常有用，因为将返回相同的“随机”值，让您重现问题。如果你真的需要随机性，那就不好了。

如上所述，通过在每次运行时将种子更改为不同的值，例如自纪元以来的秒数，您可以从对 rand() 的调用中获得不同的值。

```
srand(time(NULL)) 
```

如果您正在尝试调试，您​​可能希望打印出种子，以便在出现问题时重现问题。

# sql - 创建 SEQUENCE 以便它应该在第二天初始化

> ID：13274340
> 
> 赞同：1
> 
> 时间：2012-11-07T16:50:05.287
> 
> 标签：sql, oracle

假设 SEQUENCE 从“1”开始，今天它生成了一些序列，然后在第二天它应该再次从“1”开始。

是否有可能或需要找到任何解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:51:40.607

是：您可以安排一个作业来重新创建序列。

在这里阅读：http: [//docs.oracle.com/cd/E11882_01/server.112/e25494/scheduse002.htm](http://docs.oracle.com/cd/E11882_01/server.112/e25494/scheduse002.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:52:33.593

完全取决于您的数据库产品。默认 SQL 没有这样的东西。您需要定期调用数据库来重置该值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:56:21.097

您可以使用 CRON 作业，它可以在中午触发以下命令（如果您使用的是 MySQL）。

> **ALTER TABLE table_name AUTO_INCREMENT= 1;**

# backbone.js - 重新获取集合时是否触发了来自 Backbone.js 模型的事件

> ID：13274349
> 
> 赞同：0
> 
> 时间：2012-11-07T16:50:29.510
> 
> 标签：backbone.js, backbone.js-collections

我通过运行 collection.fetch() 方法初始化了一个主干集合，然后过了一会儿，我要求集合再次获取以刷新模型。那么，是否有任何来自 Model 的事件被触发，我可以从 View 订阅以删除/更新视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:09:45.800

没有特定的“集合已重新获取”事件，但您不需要。[`fetch`](http://backbonejs.org/#Collection-fetch)重置集合：

> **fetch** `collection.fetch([options])`
> [...]
> 当模型数据从服务器返回时，集合将*重置*。

并[`reset`](http://backbonejs.org/#Collection-reset)触发一个`"reset"`事件：

> **reset** `collection.reset(models, [options])`
> [...]
> 使用**reset**将集合替换为新的模型列表（或属性哈希），`"reset"`最后触发单个事件。

因此，只需侦听`"reset"`集合中的事件并在获得事件时重新渲染视图。

* * *

`fetch`Backbone 1.0 中更改的行为，来自[ChangeLog](http://backbonejs.org/#changelog)：

> *   将 Collection 的“更新”重命名为*set*，用于与相似的并行性`model.set()`，并与*reset*进行对比。*它现在是fetch*之后的默认更新机制。如果您想继续使用“重置”，请通过`{reset: true}`.

如果我们看[`set`](http://backbonejs.org/#Collection-set)：

> **放** `collection.set(models, [options])`
> 
> set 方法使用传递的模型列表对集合执行“智能”更新。如果列表中的模型尚未在集合中，它将被添加；如果模型已经在集合中，它的属性将被合并；如果集合包含列表中不存在的任何模型，它们将被删除。发生这种情况时会触发所有适当`"add"`的`"remove"`、 和`"change"`事件。

因此，您可以说`collection.fetch({ reset: true })`是否要继续使用该`"reset"`事件，或者您可以`collection.fetch()`监听单个`"add"`、`"remove"`和`"change"`事件。

# wpf - MVVM WPF 数据绑定复选框不会针对选中和未选中状态向 ViewModel 触发事件

> ID：13274350
> 
> 赞同：1
> 
> 时间：2012-11-07T16:50:30.820
> 
> 标签：wpf, mvvm, checkbox

我在 a 中有一个数据绑定`CheckBox`，`DataGrid`使用 WPF 和 MVVM；

```
<DataGridTemplateColumn Width="80" Header="Enabled">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <CheckBox IsChecked="{Binding Path=IsEnabled, UpdateSourceTrigger=PropertyChanged,  Mode=TwoWay}" Name="theCheckbox" HorizontalAlignment="Center"/>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

这工作正常，并且在设置`CheckBox`时正在检查`IsEnabled`。 `IsEnabled`是我绑定到的对象集合中的一个属性`DataGrid`。我想要做的是能够验证是否应该允许在用户选择它时检查其中的特定行`CheckBox`，`DataGrid`如果不删除他们的检查并显示警告消息，例如“没有第 5 行就无法检查第 1 行和 9 个正在检查”。我发现了如何使用后面的代码使用`Checked`和的`Unchecked`属性来执行此操作`CheckBox`，但是我正在使用 MVVM，因此想要处理`ViewModel`与 View`DataGrid`和相关联的事情`CheckBox`。我该怎么做？我需要一种传递 Id 字段的方法`DataRow`为了确定我正在处理哪一行，为了论证，我们可以说 Id 字段被调用`BorderId`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:40:52.020

在您的对象上实现[IDataErrorInfo](http://msdn.microsoft.com/en-us/library/system.componentmodel.idataerrorinfo.aspx)，这是 WPF 的默认验证接口，并设置您的验证代码以验证是否可以选中复选框

这实际上比正常情况要复杂一些，因为您正在使用数据项上不存在的数据来验证数据项上的属性，这意味着您需要提供某种方式在运行时将不相关的验证附加到您的对象。

我通常使用的解决方案是从我的对象中公开一个 ValidationDelegate，其他对象可以使用它来为对象附加额外的验证。它的代码发布[在我的博客上](http://rachel53461.wordpress.com/2012/01/22/validating-business-rules-in-mvvm/)，它允许您将验证附加到您的对象，如下所示：

```
public class MyViewModel
{
    // Keeping this generic to reduce code here, but it
    // should be a full property with PropertyChange notification
    public ObservableCollection<SomeObject> SomeCollection { get; set; }

    public MyViewModel()
    {
        SomeCollection = LoadDataGridObjects();

        // Add the validation delegate to each object
        foreach(var item in SomeCollection)
            item.AddValidationDelegate(ValidateObject);
    }

    // Validation Delegate to verify the right checkboxes are checked
    private string ValidateObject(object sender, string propertyName)
    {
        if (propertyName == "IsChecked")
        {
            var item = (SomeObject)sender;
            if (item.Id == 1
                && !SomeCollection.First(p => p.Id == 5).IsChecked
                && !SomeCollection.First(p => p.Id == 9).IsChecked)
            {
                return "Row 1 cannot be checked without rows 5 and 9 being checked";
            }
        }
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:04:10.403

您可以添加到列表中每个项目的 PropertyChanged 事件处理程序吗？像这样的东西：

```
foreach (Object x in List)
{
    x.PropertyChanged += OnItemChanged;
} 
```

然后在更改侦听器中，您可以对发送者对象执行任何您喜欢的操作，包括更改 IsEnabled 属性。

```
void OnItemChanged(object sender, PropertyChangedEventArgs e)
{
    // change sender object properties or set bound label text here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:29:05.323

如果我理解你的问题，你有一个复选框，你想控制它是否可以被选中。如果您不想允许，不要让用户一直检查它并推回错误消息，如果您不希望用户检查它，请首先使您的复选框处于非活动状态。

要通过您的 ViewModel（当然是您的 DataContext）执行此操作，您需要将 Checkbox 的“命令”绑定到您的 ViewModel 中的自定义命令。

[WPF 命令](http://www.codeproject.com/Articles/238657/How-to-use-Commands-in-WPF)将提供以下功能：

*   根据自定义逻辑自动启用/禁用控件
*   处理控件的“动作”事件（在复选框的按钮上，它将是“单击”）。

# iphone - NSOperationQueue 在操作之间暂停？

> ID：13274352
> 
> 赞同：2
> 
> 时间：2012-11-07T16:50:41.837
> 
> 标签：iphone, objective-c, ios, nsoperation, nsoperationqueue

我想制作一个 NSOperationQueue ，它在操作之间暂停一定的时间。它正在访问远程服务器，我想确保我不会一次因为太多操作而使它超载。我已经将 maxConcurrentOperations 设置为 1，因此一次只能运行一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:58:08.793

查看这篇文章，它描述了在您的操作之间添加睡眠操作： [iPhone - 队列中操作之间的延迟](https://stackoverflow.com/questions/4428516/iphone-a-delay-between-operations-in-the-queue)

# c# - 在实例本身中获取 EC2 实例属性的最简单方法

> ID：13274353
> 
> 赞同：11
> 
> 时间：2012-11-07T16:50:45.987
> 
> 标签：c#, amazon-ec2, amazon-web-services

你们能告诉我如何从我运行代码的地方检索 instanceId、dns 公共名称和当前 EC2 实例的类型...

我正在玩`DescribeInstanceAttribute()`，但它需要向请求提供 instanceId，我找不到如何获取当前正在运行的实例的 id。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-01-15T01:24:12.790

有一种比调用 Web API 更简单的方法，即 .NET SDK。

[在此处查看 EC2InstanceMetadata](https://docs.aws.amazon.com/sdkfornet/v3/apidocs/items/Util/TEC2InstanceMetadata.html)的SDK 文档

例如，如果您需要 InstanceId，您可以使用：

```
Amazon.Util.EC2InstanceMetadata.InstanceId.ToString(); 
```

所有其他属性都以类似的方式可用。

请注意，SDK 曾经有 Amazon.EC2.Utils - 这在 2015 年被弃用并移至 Amazon.Util 命名空间

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-07T16:55:03.753

有一个返回机器信息的网络服务。使用权

```
http://169.254.169.254/latest/meta-data/instance-id 
```

检索实例 ID

实例元[数据文档](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/AESDG-chapter-instancedata.html)很方便。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-11-10T05:40:46.260

例如，您还可以使用[AWS 的 Dot Net SDK](http://docs.aws.amazon.com/sdkfornet/v3/apidocs/Index.html)`Amazon.EC2.Util.EC2Metadata.InstanceId.ToString();`

# performance - wordpress 博客摘录 prestation

> ID：13274366
> 
> 赞同：0
> 
> 时间：2012-11-07T16:51:16.140
> 
> 标签：performance, wordpress, time, blogs

我不知道我网站的这个页面是怎么加载的，加载时间很长： michelepierri.it/blog 在这个页面中有博客的摘录。

取而代之的是其他页面，例如主页，加载时间更少。

这可能是什么原因造成的？非常感谢。

我使用的插件：

```
Advanced Code Editor
All in One SEO Pack
Better Related Content
cbnet Twitter Widget
CloudFlare
Contact Form 7
Default Thumbnail Plus
Developer Formatter
Disqus Comment System
Fancybox
Fast Secure Contact Form
FeedBurner FeedSmith Extend
Google Analytics
Google XML Sitemaps
lorem shortcode
NextScripts: Social Networks Auto-Poster
Official StatCounter Plugin
Pingler
Really Simple CAPTCHA
Shareaholic | email, bookmark, share buttons
Simple Skype Status
Single Category Permalink
Skype Online Status
Social Metrics
SyntaxHighlighter Plus
Transposh Filtro per Traduzioni
Trash Manager
W3 Total Cache
WP-Cumulus
WP-o-Matic
WP Facebook Open Graph protocol
WP Minify
WP to Twitter
Youtube shortcode 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:22:39.823

为什么这么多插件？这实际上会对您的表现产生相当大的影响。对您网站的第一个请求需要很长时间，这实际上表明存在服务器问题（如果您在共享主机上且插件数量处于活动状态，则更可能是一个问题）。

# c++ - Sum 浮点数 c++

> ID：13274372
> 
> 赞同：1
> 
> 时间：2012-11-07T16:51:20.043
> 
> 标签：c++, floating-point, c++builder

> **可能重复：**
> [表示中的浮点错误？](https://stackoverflow.com/questions/7581741/floating-point-error-in-representation)

我对这段代码有疑问

```
int cent;
int dollar ;
float cnt2dlr;
 //convert cnt to doloar ;
cnt2dlr=(cnt)/(100); 
```

问题是什么时候`cnt = 175`，`cnt2dlr = 0.17,444444`而不是`0.17,5`

有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T16:52:37.843

浮点数通常是不精确的。您对此无能为力。

您的代码很好地说明了为什么不应该使用浮点数进行涉及金钱的计算。仅仅因为货币值有小数点并不**能使**货币成为浮点数。浮点数应该用于变化无穷小的数量，比如温度或速度，而不是用于块状变化的数量，比如钱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:53:25.563

浮点数不是精确的表示。它们是近似值，因此您无法保证很高的精度。阅读[每位计算机科学家应了解的浮点运算知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

要提高数字的精度，请考虑使用 64 位`double`而不是 32 位`float`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T17:08:11.830

我有点疑惑。如果您的意思是 (cent) 而不是 (cnt)，那么

```
cnt2dlr=(cent)/(1000); 
```

（注意 e in cent）是一个 int / int 除法，175 / 1000 应该返回 int 0。

如果你这样做，你会得到相同的结果吗，例如

```
cnt2dlr=(cent)/(1000.0); 
```

注意小数点。

# visual-studio-2010 - 使用 Visual Studio 2010 进行 TFS 2012 代码审查

> ID：13274374
> 
> 赞同：2
> 
> 时间：2012-11-07T16:51:34.113
> 
> 标签：visual-studio-2010

我似乎无法使用 VS 2010 使用 TFS 2012 附带的新功能？

是否可以？我想使用代码审查功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:53:52.253

代码审查需要 Visual Studio 2012 和 tfs 2012。VS2010 根本没有内置的 UI 来支持它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:17:56.343

在 TFS 上创建帐户后：

[https://tfs.visualstudio.com/en-us/](https://tfs.visualstudio.com/en-us/) #

有一个选项  

> “初学者指南一步一步的指南，可帮助您立即开始并运行。”

在那里你会一步一步地找到，我跟着并且正在正常使用。就我而言，我必须升级：

> “如果您还没有，请安装 Visual Studio 2012。您可以使用 Visual Studio 2010，但您需要先安装 Service Pack 1 和 KB2662296。或者，您可以在此更新中使用带有 GDR 的 Visual Studio 2008 SP1。”

之后我就可以正常使用了。

我希望我有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T13:55:03.637

CMMI 流程中的 VS2010 可以使用一种代码审查形式，但它没有 VS2012 中很好的交互和代码注释功能，它只是另一种工作项形式。

更多信息[在这里](http://msdn.microsoft.com/en-us/library/ee332483%28v=vs.100%29.aspx)。

# php - 以简单的方式禁用 PHP 扩展？

> ID：13274376
> 
> 赞同：0
> 
> 时间：2012-11-07T16:51:39.370
> 
> 标签：php, apache, hosting, pecl

我正在使用不支持 PHP 的 PECL OAuth 扩展的开源库 ( [http://hybridauth.sourceforge.net )。](http://hybridauth.sourceforge.net)如果您尝试使用它运行代码，它会显示“异常：Hybridauth Library 与安装的 PECL OAuth 扩展不兼容。请禁用它。”

说起来容易做起来难。

我通过 Amazon AWS Elastic Beanstalk ( [https://aws.amazon.com/elasticbeanstalk/](https://aws.amazon.com/elasticbeanstalk/) ) 托管我的网站。我选择了这个解决方案，因为它让您无需配置、无需 SSH、无需自定义 AMI，即可快速入门……

这意味着我不能轻易修改原始 php.ini 文件或删除扩展文件。

有没有更简单的方法？即时禁用扩展？通过php方法？通过 htaccess 文件？一个恶作剧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:53:38.917

不，您不能通过 PHP 方法调用禁用扩展。在过去，您可以添加它（使用`dl()`），但即使那样，您也无法在不播放 ini 文件的情况下删除任何添加的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:57:07.053

简短版本：不，没有任何实际意义。

如果您有可用的 runkit，您应该能够删除模块定义的函数或对象，但这实际上取决于安装 PECL OAuth 扩展时 HybridAuth 无法正常工作的原因。对于任何接近生产环境的东西，不建议这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-14T23:55:55.693

如果你有你的 pem 密钥，你可以很容易地通过 ssh 进入你的实例。只需进入 ec2 控制台，选择您的实例并单击工具栏中的“连接”即可获取地址。然后您可以修改服务器上的任何文件。

# shopify - Shopify background-image with css（不显示）

> ID：13274380
> 
> 赞同：0
> 
> 时间：2012-11-07T16:51:53.180
> 
> 标签：shopify

我的问题是，当尝试在 Shopify 中插入某种背景图片时，它从不显示任何内容。

我有一个导航栏，其中包含客户想要的模式，当我尝试启用它时，再次没有任何反应。

我在那个 css 背景行上使用的代码（来自谷歌搜索）是

```
background:url( "{{'navBggreen.jpg' | asset_url }}") 
```

我也试过

```
background:url( {{'navBggreen.jpg' | asset_url }} ) 
```

没别的了。Shopify 的教程或任何类型的文档都非常稀缺，因此...

无论如何，有谁知道如何让这个工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-18T12:03:21.357

确保您的 css 文件具有 .liquid 扩展名，以便它可以处理流动代码，因为asset_url 是流动的一部分。所以请确保您的 css 文件名类似于 style.css.liquid。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-22T09:23:43.193

您可以在 Assets 中的 CSS 文件中这样调用它：

```
.nav{background: url("navBggreen.jpg");} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T15:16:42.460

如果要在布局中包含图像，则必须使用`asset_url`过滤器。但是，如果您的图像是通过 CSS 样式表调用的，那么您不需要使用`asset_url`- 除非它们在主题设置表单中使用。拿出来`asset_url`，它应该可以正常工作。

# .net - 为什么这个 .Net IL 无法验证？

> ID：13274384
> 
> 赞同：6
> 
> 时间：2012-11-07T16:52:02.117
> 
> 标签：.net, verification, il, peverify

我编写了一些自定义 IL，但它不会通过 PEVerify。我得到的错误是

```
$ peverify foo.exe

Microsoft (R) .NET Framework PE 验证程序。版本 4.0.30319.17929
版权所有 (c) 微软公司。版权所有。

[IL]：错误：[Z:\virtualbox_shared\foo.exe : HelloWorld.Program::Main][offset 0x00000021] 所有点的堆栈高度必须在 IL 的单次前向扫描中确定。
1 验证 foo.exe 的错误

```

然而，该程序将运行良好，没有任何异常。下面是相关方法的IL：

```
.method private static hidebysig
  default void Main (string[] args)  cil managed
{
// Method begins at RVA 0x2050
.entrypoint
// Code size 54 (0x36)
.maxstack 2

//custom IL
ldc.i4 1
ldc.i4 1
ceq
switch(first, second)

first:
ldc.i4 1
br.s temp
popit: pop
br.s second

temp: ldc.i4 1
brfalse temp2
temp2: br.s popit

second:
ldc.i4 2
pop

ret

} // end of method Program::Main 
```

完整的源代码在[pastebin](http://pastebin.com/TMEGuZFk)

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T17:43:46.730

> 必须在 IL 的单次前向扫描中确定

这是验证失败的关键部分。验证者不会尝试验证每一个分支路径，这需要解决停机问题。它对 POP 不满意，它无法在*单次前向扫描*中看到该操作码是由具有非空堆栈的后向分支到达的，因此是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:27:23.647

我不完全理解为什么这是答案，但这导致它被 PEVerify：

```
.method private static hidebysig
  default void Main (string[] args)  cil managed
{
// Method begins at RVA 0x2050
.entrypoint
// Code size 54 (0x36)
.maxstack 2

//custom IL
ldc.i4 1
ldc.i4 1
ceq
switch(first, second)

first:
ldc.i4 1
br.s temp
ldc.i4 1 //not reached, but required!
popit: pop
br.s second

temp: ldc.i4 1
brfalse temp2
temp2: br.s popit

second:
ldc.i4 2
pop

ret

} // end of method Program::Main 
```

# perl - 使用安装了 2 个 perl 的 cpan

> ID：13274385
> 
> 赞同：2
> 
> 时间：2012-11-07T16:52:10.777
> 
> 标签：perl

我安装了 2 个 perl

```
/usr/bin/perl 
```

和

```
/usr/local/perls/perl-5.16.2/bin/perl 
```

我在用

```
cpan -i Compress::Zlib installs 
```

安装 perl 模块

为`/usr/local/perls/perl-5.16.2/bin/perl`（使用`cpan -i`）安装 perl 模块该怎么做，因为默认情况下*cpan -i*安装 perl 模块`/usr/bin/perl`？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T16:53:50.117

要为您的 v5.16.2 安装模块，请使用

```
/usr/local/perls/perl-5.16.2/bin/cpan 
```

# java - 将文件读入多个字节数组

> ID：13274388
> 
> 赞同：6
> 
> 时间：2012-11-07T16:52:21.050
> 
> 标签：java, file, file-io

我有一个加密算法 (AES)，它接受转换为数组字节的文件并对其进行加密。由于我要处理非常大的文件，JVM 可能会出现内存不足。我打算读取多个字节数组中的文件，每个字节数组都包含文件的某些部分。然后我迭代地输入算法。最后，我将它们合并生成一个加密文件。

所以我的问题是：有没有办法将文件部分读取到多个字节数组？

我想我可以使用以下内容将文件读取到字节数组：

```
 IOUtils.toByteArray(InputStream input). 
```

然后使用以下方法将数组拆分为多个字节：

```
 Arrays.copyOfRange() 
```

但是我担心读取文件的代码`ByteArray`会使JVM内存不足。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T17:32:42.707

在 Java 中查找密码流。您可以使用它们即时加密/解密流，因此您不必将整个内容存储在内存中。您所要做的就是将`FileInputStream`源文件的常规复制到`CipherOutputStream`包装`FileOutputStream`加密接收器文件的文件中。`IOUtils`甚至方便地包含`copy(InputStream, OutputStream)`为您进行此复制的方法。

例如：

```
public static void main(String[] args) {
    encryptFile("exampleInput.txt", "exampleOutput.txt");
}

public static void encryptFile(String source, String sink) {
    FileInputStream fis = null;
    try {
        fis = new FileInputStream(source);
        CipherOutputStream cos = null;
        try {
            cos = new CipherOutputStream(new FileOutputStream(sink), getEncryptionCipher());
            IOUtils.copy(fis, cos);
        } finally {
            if (cos != null)
                cos.close();
        }
    } finally {
        if (fis != null)
            fis.close();
    }
}

private static Cipher getEncryptionCipher() {
    // Create AES cipher with whatever padding and other properties you want
    Cipher cipher = ... ;
    // Create AES secret key
    Key key = ... ;
    cipher.init(Cipher.ENCRYPT_MODE, key);
} 
```

如果您需要知道被复制的字节数，您可以使用`IOUtils.copyLarge`而不是`IOUtils.copy`文件大小超过`Integer.MAX_VALUE`字节（2 GB）。

要解密文件，请执行相同的操作，但使用`CipherInputStream` *代替*`CipherOutputStream`并初始化您的`Cipher`using `Cipher.DECRYPT_MODE`。

[在此处](http://docstore.mik.ua/orelly/java-ent/security/ch13_06.htm)查看有关 Java 密码流的更多信息。

这将为您节省空间，因为您不再需要存储`byte`自己的数组。该系统中唯一存储`byte[]`的是 的内部`byte[]`，`Cipher`每次输入足够的输入并返回一个加密块时，它都会被清除`Cipher.update`，或者在关闭`Cipher.doFinal`时会被清除`CipherOutputStream`。但是，您不必担心*任何*这些，因为这一切都是内部的，一切都是为您管理的。

**编辑：**请注意，这可能会导致某些加密异常被忽略，尤其是`BadPaddingException`和`IllegalBlockSizeException`. 这种行为可以在[`CipherOutputStream`源代码](http://www.docjar.com/html/api/javax/crypto/CipherOutputStream.java.html)中找到。（当然，这个来源来自 OpenJDK，但它可能在 Sun JDK 中做同样的事情。）另外，来自[CipherOutputStream](http://docs.oracle.com/javase/6/docs/api/javax/crypto/CipherOutputStream.html) javadocs：

> 该类严格遵守其祖先类的语义，尤其是失败语义，`java.io.OutputStream`并且`java.io.FilterOutputStream`. 此类具有在其祖先类中指定的那些方法，并覆盖它们。**此外，此类捕获其祖先类未引发的所有异常。**

这里的粗线表示加密异常被忽略，它们就是这样。这可能会在尝试读取加密文件时导致一些意外行为，尤其是对于像 AES 这样的块和/或填充加密算法。请记住这一点，您将获得零或部分加密（或解密`CipherInputStream`）文件的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:58:58.097

如果您正在使用`IOUtils`，也许您应该考虑[IOUtils.copyLarge()](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html#copyLarge%28java.io.InputStream,%20java.io.OutputStream,%20long,%20long%29)

```
public static long copyLarge(InputStream input,
                             OutputStream output,
                             long inputOffset,
                             long length) 
```

并指定一个[ByteArrayOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html)作为输出。然后，您可以使用偏移量/长度迭代和加载文件的各个部分。

从文档：

> 将大（超过 2GB）InputStream 中的部分或全部字节复制到 OutputStream，可选择跳过输入字节。

# servicestack - 如何按名称呈现模板？

> ID：13274390
> 
> 赞同：2
> 
> 时间：2012-11-07T16:52:30.867
> 
> 标签：servicestack

我正在尝试了解 ServiceStack**自托管**应用程序和新 API。

在不同的文件夹中添加两个同名的视图会导致启动时出错。这是不允许的吗？

```
Foo\
  Index.cshtml

Bar\
  Index.cshtml 
```

有没有办法通过方法上的装饰器或直接作为返回值来指定模板？我知道在 DTO 之后命名视图的约定。我更喜欢更明确或遵循更接近 Sinatra/Express 的约定。

```
return Render(typeof(Views.Foo.Index), new { Name = "Nelly" }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:45:10.980

ServiceStack 的[Razor Rockstars 网站](http://razor.servicestack.net)包含 ServiceStack 中 Razor 支持的文档，列出了一些用于选择不同模板的选项：

如果它不遵循约定（即请求或响应 DTO 名称），那么您可以通过返回`HttpResult`如下装饰来动态指定使用哪个视图或布局模板：

```
return new HttpResult(dto) {
    View = {viewName},
    Template = {layoutName},
}; 
```

如果您使用的是静态视图（即服务始终使用相同的视图），那么您可以通过使用`[DefaultView]`属性来指定要使用的视图

```
[DefaultView("Rockstars")]
public object Get(Rockstars request) { 
    ...
    return responseDto; 
} 
```

在任何一种情况下，如果你想要它是强类型的，你可以使用类似`typeof(RequestDto).Name`.

### 视图名称必须是唯一的

与 MVC 不同，heirachy's 不会影响 ServiceStack 中的视图选择，并且因为每个**视图页面**（即`/Views`文件夹中的剃须刀页面）必须是唯一的，所以您可以自由地将它们布置在您希望的任何平面或嵌套文件夹结构中。

# javascript - JavaScript：在页面加载时运行 setInterval

> ID：13274392
> 
> 赞同：2
> 
> 时间：2012-11-07T16:52:35.750
> 
> 标签：javascript, setinterval

我想每 20 秒运行一次代码。这很好用。但我想`setInterval`在第一次遇到时运行，然后开始计时（而不是先做计时）。

显然，我可以这样做：

```
myFunction();
setInterval(myFunction, 20000); 
```

但我觉得这有点不雅。我宁愿做类似的事情

```
setInterval(myFunction, 20000, { waitBeforeFirstRun: false }); 
```

这样的设置是否存在`setInterval`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T16:53:47.903

```
(function wrap(){
    myFunction();
    setTimeout( wrap, 20000 );
})(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T17:06:11.857

怎么样：

```
setInterval(​function foo(){
    // logic
    return foo;
}(), 20000);​ 
```

# asp.net-mvc-3 - Visual Studio 配置转换

> ID：13274404
> 
> 赞同：0
> 
> 时间：2012-11-07T16:53:34.120
> 
> 标签：asp.net-mvc-3, visual-studio-2010, transform, config

假设我有一个这样的 Web.config：

```
<configuration>
    <elmah>
        ...
    </elmah>
</configuration> 
```

是否可以使用配置转换删除 <elmah> 节点？到目前为止，我已经尝试过类似的东西：

```
<configuration>
    <elmah xdt:Transfrom="RemoveAll"/>
</configuration> 
```

哪个不起作用（根据预览变换）。尽管这种类型的东西似乎确实适用于其他节点。有谁知道如何删除它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:18:56.370

你的`xdt`语法有错别字——应该是`xdt:Transform`，而不是`xdt:Transfrom`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:22:46.977

您需要有一个**xdt:Locator**才能获得匹配。

尝试使用以下内容：

**调试：**

```
<configuration>
    <elmah name="debug" />       
</configuration> 
```

**释放：**

```
 <configuration>
        <elmah name="debug" xdt:Locator="Match(name)" xdt:Transform="RemoveAll" />      
    </configuration> 
```

或者不需要名称匹配：

```
 <configuration>
            <elmah name="debug" xdt:Locator="XPath(//elmah)" xdt:Transform="RemoveAll" />      
        </configuration> 
```

或者

```
 <configuration>
            <elmah name="debug" xdt:Locator="XPath(configuration/elmah)" xdt:Transform="RemoveAll" />      
        </configuration> 
```

作为说明：

目前，**Web.config**转换仅在 Publish 上的 Web Publish Pipeline (WPP) 期间应用，而不是在调试期间应用，以便在调试期间启用它们，请检查以下链接：[http ://sedodream.com/2010/10/21/ ASPNETWebProjectsWebdebugconfigWebreleaseconfig.aspx](http://sedodream.com/2010/10/21/ASPNETWebProjectsWebdebugconfigWebreleaseconfig.aspx)。

希望能帮助到你。

# php - 谷歌工具栏截断站点

> ID：13274405
> 
> 赞同：1
> 
> 时间：2012-11-07T16:53:37.920
> 
> 标签：php, wordpress

嗨，我有一个网站，我正在开发它只是一个集成了 Wordpress 的 html 网站，以便为客户端提供一些动态功能。出于某种原因，启用了 Google 工具栏的 IE 会截断信息并剥离 css。换句话说，它就像它确实阅读了任何内容，直到它到达页面的一半。当您刷新几次时，它会改变它的作用和不显示的内容。如果我删除顶部的 wordpress 代码片段（见下文），它可以工作，但当然所有动态内容都会消失。奇怪的是，如果它是 WP 生成的页面，它工作得很好。

```
<?php
require('./cms/wp-blog-header.php');
?> 
```

我对此有点迷茫。我没有做任何我以前没有做过几次的事情，结果很好，我在网上找不到任何关于它的信息。任何帮助都会很棒，谢谢。

# jsf - 不在里面工作

> ID：13274412
> 
> 赞同：2
> 
> 时间：2012-11-07T16:54:15.123
> 
> 标签：jsf, ajax4jsf

我将尝试解释自己：

我正在使用 java、JSF 2.0 和 RichFaces 4.2.1 开发一个 JSF 项目。

当我访问我的 jsf 时，它只加载一个搜索过滤器和一个 commandLink。commandLink 将在我的 backingBean 中启动一个方法来加载将显示在 dataTable 中的数据。

```
<h:commandLink id="btnRecords">
    <f:ajax render="myCompAjax" event="click" listener="#{myBean.loadRecords}" />
    <h:graphicImage value="img/ico_new.gif" alt="#{bundle['button.search']}" />
</h:commandLink> 
```

数据表一开始是不可见的，但是一旦您单击 commandLink，backingBean 中的一个标志就会发生变化，并且该表会显示我刚刚加载的数据。

```
<a4j:outputPanel ajaxRendered="true" id="myCompAjax">
    <h:dataTable id="recordsTable" value="#{myBean.records}"                   
     var="item" rendered="#{myBean.flagShowTable}">
        <h:column headerClass="thPijama" >
            <f:facet name="header">
                <table><tr class="thPijama"><td></td></tr></table>
            </f:facet>
            <h:commandLink action="#{myBean.goNextPage}">
                <h:outputText value="Go Next Page" />
                <h:inputHidden value="#{item}" />   
            </h:commandLink>                                                     
        </h:column>                   
    </h:dataTable>
</a4j:outputPanel> 
```

问题是 dataTable 中的 commandLink 操作根本不起作用。我只想导航到另一个 jsf。事实上，它所做的是隐藏 dataTable 并保持过滤器不变。操作方法仍然无法访问。

当然，如果我在 dataTable 之外设置相同的 commandLink，它会起作用。

我不能使用 Session Scope Beans，因为我工作的人不批准它。

谁能帮我？

感谢您的提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:05:19.183

> *我不能使用 Session Scope Beans，因为我工作的人不批准它。*

您是否暗示将 bean 放在会话范围而不是请求范围实际上解决了问题？如果是这样，那么只需将 bean 放在视图范围内。

```
@ManagedBean
@ViewScoped
public class MyBean implements Serializable {
    // ...
} 
```

这样，只要您通过 ajax 请求与同一个视图交互，bean 就会一直存在。该 bean*不在*同一会话中的其他浏览器选项卡/窗口中共享（这确实是架构师在简单视图的情况下禁止使用它的主要原因）。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)
*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)- 第 4 点适用于您

# php - 移动多维数组的元素

> ID：13274413
> 
> 赞同：2
> 
> 时间：2012-11-07T16:54:14.627
> 
> 标签：php, arrays, multidimensional-array

我正在从数据库接收一个数组 - 我无法控制发送哪些数据以及以什么顺序发送。这是它目前的样子：

```
Array
(
    [itemCode] => Array
        (
            [0] => Array
                (
                    [code] => P
                    [descShort] => Pepperoni
                )

            [1] => Array
                (
                    [code] => G
                    [descShort] => Green Peppers
                )

            [2] => Array
                (
                    [code] => n
                    [descShort] => No Sauce
                )

            [3] => Array
                (
                    [code] => x
                    [descShort] => No Cheese
                )

            [4] => Array
                (
                    [code] => 
                    [descShort] => Regular Cheese
                )

            [5] => Array
                (
                    [code] => 
                    [descShort] => Regular Sauce
                )

        )

) 
```

在实际实践中，在 No Sauce 选项之前可以有任意数量的元素（目前在索引 3，但并不总是这样。）客户想要的是 Cheese 和 Sauce 项目始终位于列表的末尾，并且以这种方式订购：普通奶酪，无奶酪，普通酱汁，无酱汁。

同样，请记住，我无法控制最初创建数组的方式，并且在相关元素之前和之间可能存在任意数量的其他元素，我该如何实现呢？其他需要担心的是，在某些时候，他们可能希望在此重新排序中包含其他选项（例如，他们可能会添加额外奶酪和额外酱汁的选项，并希望它们处于特定位置好。）

**添加了 var_export**

```
array (
  'itemCode' => 
  array (
    0 => 
    array (
      'code' => 'P',
      'descShort' => 'Pepperoni',
    ),
    1 => 
    array (
      'code' => 'G',
      'descShort' => 'Green Peppers',
    ),

    2 => 
    array (
      'code' => 'n',
      'descShort' => 'No Sauce',
    ),
    3 => 
    array (
      'code' => 'x',
      'descShort' => 'No Cheese',
    ),
    4 => 
    array (
      'code' => '',
      'descShort' => 'Regular Cheese',
    ),
    5 => 
    array (
      'code' => '',
      'descShort' => 'Regular Sauce',
    ),
  ),
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:57:50.600

您可以尝试使用[usort](http://php.net/manual/en/function.usort.php)，这将允许用户定义的排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:43:27.543

正如已经评论过的那样，该[`usort`](http://php.net/usort)功能可以用于此目的。但这只是开始，因为它需要比较功能。

这也不是那么难，因为我们可以创建一个。但是，了解它的工作原理至关重要：

> 如果认为第一个参数分别小于、等于或大于第二个参数，则比较函数必须返回小于、等于或大于零的整数。

好的，这不是一个障碍，而是转变了实际问题，如何找出哪个高于哪个？以及如何做到这一点？

有两种类型的值：不需要任何排序的值或需要排序的值。让我们首先为需要排序的人定义一个数组。为了明确排序是什么，请命名键：

```
$order    = 'descShort';
$ordering = ['Regular Cheese', 'No Cheese', 'Regular Sauce', 'No Sauce']; 
```

现在在比较函数中，您可以查找 A/B 值是否存在于排序中的条目。如果它不存在，则不需要排序。如果存在，则需要订购。

这两种情况得到了扩展，因为您还可以将现有的排序顺序与不存在的排序顺序结合起来。因此，有四种情况需要涵盖：

1.  A 和 B 不存在 - 平等对待 - 0
2.  A 和 B 存在 - 根据它们的 order-value 排序 - 计算位置 A - B
3.  A 存在但 B 不存在 - A 大于 B -- 1
4.  B 存在但不存在 A - A 小于 B -- -1

由于 PHP 中的函数支持，我们可以轻松地将 order-key 和排序值传递给比较函数，以作为一个快速示例。然后，该功能只需执行针对四种情况概述的操作。

这个例子：

```
$order    = 'descShort';
$ordering = ['Regular Cheese', 'No Cheese', 'Regular Sauce', 'No Sauce'];
$compare  = function($a, $b) use ($order, $ordering) {
    $hasA = array_search($a[$order], $ordering);
    $hasB = array_search($b[$order], $ordering);

    // nothing to sort
    if ($hasA === $hasB && $hasA === FALSE) {
        return 0;
    }

    // if both are found, sort
    if ($hasA !== FALSE && $hasB !== FALSE) {
        return $hasA - $hasB;
    }

    // as one of them is in there, put it to end
    return $hasA === FALSE ? -1 : 1;
};

usort($array['itemCode'], $compare); 
```

所以现在有一个警告：`usort`不稳定。这意味着，当返回 0 时，项目不会停留在它们的位置。您可以通过再次排序来解决这个问题`usort`。

```
usort($array['itemCode'], $compare); 
```

那么最终的排序顺序是（[Demo](http://eval.in/2433)）：

```
Array
(
    [itemCode] => Array
        (
            [0] => Array
                (
                    [code] => P
                    [descShort] => Pepperoni
                )

            [1] => Array
                (
                    [code] => G
                    [descShort] => Green Peppers
                )

            [2] => Array
                (
                    [code] => 
                    [descShort] => Regular Cheese
                )

            [3] => Array
                (
                    [code] => x
                    [descShort] => No Cheese
                )

            [4] => Array
                (
                    [code] => 
                    [descShort] => Regular Sauce
                )

            [5] => Array
                (
                    [code] => n
                    [descShort] => No Sauce
                )
        )
) 
```

* * *

由于稳定排序存在问题，而且我对它也不是很好（在您的情况下，建议的函数对我来说有点像开销），所以只有很好的 old `foreach`.

由于没有重复的值供以后排序的那些，好吧，这留下了一些漂亮的空间：

```
$order    = 'descShort';
$ordering = ['Regular Cheese', 'No Cheese', 'Regular Sauce', 'No Sauce'];

$result = []; // the final result
$later  = []; // to be sorted later
foreach($array as $element)
{

    $has = array_search($element[$order], $ordering);
    if ($has !== FALSE) {
        $later[$has] = $element;
        continue;
    }

    $result[] = $element;
} 
```

它只是在数组上直接 for-eaching，将所有*不*属于排序的值放入`$result`已经存在的值中。

 *那些属于排序的部分`$later`已经以其订单值作为索引放入。

只有`$later`这样才用 排序`ksort`，然后将两部分合并：

```
ksort($later);
$result = array_merge($result, $later); 
```

并做了。不需要回调函数。只需首先过滤，然后将排序值与索引一起使用`ksort`即可。[演示](http://eval.in/2442)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:43:31.257

我认为这是您想要的用户定义的排序。该数组`$last_options`列出了所有应排序到末尾的浇头，它们在数组中的顺序指定了它们应出现在结果中的顺序。

```
$last_options = array('Regular Cheese', 'No Cheese', 'Regular Sauce', 'No Sauce');

function topping_order($a, $b) {
  $a_pos = array_search($a['descShort'], $last_options);
  $b_pos = array_search($b['descShort'], $last_options);
  if ($a_pos !== false && $b_pos !== false) {
    if ($a_pos > $b_pos) {
      return 1;
    }
    if ($b_pos > $a_pos) {
      return -1;
    }
    return 0;
  }
  if ($a_pos === false) {
    return -1;
  }
  if ($b_pos === false) {
    return 1;
  }
  return 0;
}

usort($array, 'topping_order'); 
```*

# jquery - jQuery "or if" 语句

> ID：13274414
> 
> 赞同：0
> 
> 时间：2012-11-07T16:54:15.587
> 
> 标签：jquery, if-statement, jquery-validate

我有检查容器是否有无效表单字段的功能。如果它指向显示特定容器的链接，则添加“hasErrors”类。

```
function treatFormLinks () {
    if (!$('#One .required').valid() ) {
        $('#LinkOne').addClass('hasErrors');    
    }
    if (!$('#Two .required').valid() ) {
        $('#LinkTwo').addClass('hasErrors');    
    }
    if (!$('#Three .required').valid() ) {
        $('#LinkThree').addClass('hasErrors');  
    }
};

$("#Submit").click(function () {
    treatFormLinks();
}); 
```

它工作正常，但如果容器#Two 字段有效但容器#Three 字段有一些错误，则会出现问题。在这种情况下，'hasErrors' 类不会添加到#LinkThree。

我知道这个函数的逻辑有问题，但是我怎么说浏览器继续检查这些容器，直到它们都被检查。

愚蠢的问题，我知道，但无论如何都需要帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:27:47.163

好吧，我的错误一点也不明显，这就是我解决这个问题的方法。我换了

```
!$('#One .required').valid() 
```

有了这个

```
!$('#One input, #One select, #One textarea').valid() 
```

在每种情况下，现在它都按我的预期工作。

# c# - C#：如何使用控制台绘制函数

> ID：13274418
> 
> 赞同：-1
> 
> 时间：2012-11-07T16:54:20.267
> 
> 标签：c#, function, plot, console-application

我想使用控制台应用程序在 C# 中绘制任何多项式函数，而不使用任何窗口或表单，我搜索了很多，但我发现的只是窗口应用程序或涉及 MATLAB，而我想要的只是控制台中的东西。

例如，我希望它绘制给定的任何多项式函数；系数存储在一个数组中，我想绘制与之相关的函数，例如：

数组是：

`double[] array = new double[4] { 2 , 0 , -4 , 3 };`

那么函数为：3X^3 - 4X^2 + 2

它将被绘制在 XY 平面上，如下所示：

例如：X + 1

[http://i.stack.imgur.com/SD3tb.jpg](http://i.stack.imgur.com/SD3tb.jpg)

任何帮助表示赞赏。

更新：

使用您提供的方法，我尝试了以下代码：

```
 WriteAt("|", 40, 0);
        WriteAt("|", 40, 1);
        WriteAt("|", 40, 2);
        WriteAt("|", 40, 3);
        WriteAt("|", 40, 4);
        WriteAt("|", 40, 5);
        WriteAt("|", 40, 6);
        WriteAt("|", 40, 7);
        WriteAt("|", 40, 8);
        WriteAt("|", 40, 9);

        WriteAt("-----------------------------------------", 20, 10);

        WriteAt("|", 40, 11);
        WriteAt("|", 40, 12);
        WriteAt("|", 40, 13);
        WriteAt("|", 40, 14);
        WriteAt("|", 40, 15);
        WriteAt("|", 40, 16);
        WriteAt("|", 40, 17);
        WriteAt("|", 40, 18);
        WriteAt("|", 40, 19);
        WriteAt("|", 40, 20);

        WriteAt("*", 32, 12);
        WriteAt("*", 34, 11);
        WriteAt("*", 36, 10);
        WriteAt("*", 38, 9);
        WriteAt("*", 40, 8);
        WriteAt("*", 42, 7);
        WriteAt("*", 44, 6);
        WriteAt("*", 46, 5);
        WriteAt("*", 48, 4); 
```

我得到了这个：

[http://i.stack.imgur.com/cqLz2.jpg](http://i.stack.imgur.com/cqLz2.jpg)

所以，现在我必须给 WriteAt 函数提供必须绘制的点，但要记住在我的绘图中原点是 (40,10) ？

我从 x 轴减去 2，因为“-”是“|”大小的一半 所以情节会有点缩放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:01:41.793

您需要使用[Console.SetCursorPosition](http://msdn.microsoft.com/en-us/library/system.console.setcursorposition.aspx)并根据需要绘制“*”，就好像您有类似 80x25 像素的显示器一样。

您需要相应地缩放`x`和`y`轴以适应屏幕空间。不要忘记，`y`在屏幕上是向下的，而在普通图形上它是向上的 - 在计算屏幕位置时除了移位之外还需要反转（与常规图形相同）。

上述 MSDN 文章中提供的示例要点：

```
Console.SetCursorPosition(Console.CursorTop+x, Console.CursorLeft+y);
Console.Write("*"); 
```

# iphone - 无法使用目录名称删除 NSMutableArray 中的项目

> ID：13274419
> 
> 赞同：0
> 
> 时间：2012-11-07T16:54:25.327
> 
> 标签：iphone, nsmutablearray

我想检查我的文档文件夹中的所有目录，并列出那些名称不在名为 eventList 的 NSArray 中的目录。Evenlist 是 ALAssetsGroup 的数组。这是代码：

```
 NSLog(@"eventList %@",eventList);

    NSFileManager *fileManager = [NSFileManager defaultManager];        
    NSMutableArray *tagsFolderList = [[NSMutableArray alloc] init];
    tagsFolderList = [[fileManager contentsOfDirectoryAtPath:tagsPath error:nil] mutableCopy];

    NSLog(@"tagsFolderList %@",tagsFolderList);

    if(([tagsFolderList count] > 0) && ([eventList count] > 0))
    {
        for (int i=0; i<[eventList count]; i++) {
            NSString *eventName = [[eventList objectAtIndex:i] valueForProperty:ALAssetsGroupPropertyName];
            NSLog(@"eventName %@",eventName);

            [tagsFolderList removeObjectIdenticalTo:eventName];
        } 
```

以下是日志：

```
 eventList (
        "ALAssetsGroup - Name:19 ao\U00fbt 2012, Type:Event, Assets count:27",
        "ALAssetsGroup - Name:21 ao\U00fbt 2012, Type:Event, Assets count:8",
        "ALAssetsGroup - Name:2 nov. 2012, Type:Event, Assets count:12",
        "ALAssetsGroup - Name:4 nov. 2012, Type:Event, Assets count:9"
    )
    tagsFolderList (
        "1 nov. 2012",
        "19 aou\U0302t 2012",
        "2 nov. 2012",
        "4 nov. 2012",
        "6 oct. 2012"
    )
    eventName 19 août 2012 
```

即使 ALAssetsGroup 和目录的名称是相同的“2012 年 11 月 4 日”，即我无法删除该对象。我只是尝试了许多字符串编码转换而没有成功。

有什么建议吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:42:48.073

removeObjectIdenticalTo：比较对象地址，而不是字符串值。因此，即使字符串是相同的字符运行，它们也必须是完全相同的对象。如果你想比较那些具有相似字符的运行，请使用 NSString 的 isEqualToString 方法。

# java - Riak MapReduce Javascript 奇怪的输出

> ID：13274420
> 
> 赞同：0
> 
> 时间：2012-11-07T16:54:25.803
> 
> 标签：java, javascript, mapreduce, riak

我有一个由 4 个 riak 节点组成的集群，其中加载了数据。我正在尝试执行一个简单的 MapReduce 作业，它只是聚合，但我试图通过提供我自己的 javascript 函数来完成它（以便移动到更多涉及的 MapReduce 作业）。

我相关的 Java 代码片段是：

```
IndexQuery iq = new IntRangeQuery(IntIndex.named(indexId), bucketId, 11, 40);
Function mapfunc = new JSSourceFunction(
    streamToString(MapReduceDriver.class.getResourceAsStream("/map_1.js")));
Function redfunc = new JSSourceFunction(
    streamToString(MapReduceDriver.class.getResourceAsStream("/reduce_1.js")));
PBMapReduceResult result = (PBMapReduceResult) riakClient.mapReduce(iq)
            .addMapPhase(mapfunc)
            .addReducePhase(redfunc)
            .execute(); 
```

两个javascript函数在哪里：

```
function map_keepAttr(value, keyData, arg) {
    var data = Riak.mapValuesJson(value)[0];
    return [ data.Attribute_17 ];
}

function reduce_aggregate(values, arg) {
    return [values.length];
} 
```

我看到的问题如下：我的查询和映射阶段正好产生了 30 个值。但减少阶段报告 3 而不是 30（因此计数不正确）。更奇怪的是，当我使用下面的reduce函数时：

```
function reduce_aggregate(values, arg) {
    return values.length;
} 
```

我得到了预期的结果，即一个包含 30 个条目的 json 数组。

任何帮助都会救我，因为我似乎不明白 Riak 中的 MapReduce 是如何工作的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:50:33.113

我怀疑您看到的问题可能是由于没有考虑减少阶段功能中的重新减少。

虽然 map 阶段函数每条记录执行一次，但 reduce 阶段函数不一定会以完整数据集作为输入执行一次，而是在 map 阶段输出的部分上[递归](http://docs.basho.com/riak/latest/references/appendices/MapReduce-Implementation/#How-a-Reduce-Phase-Works-in-Riak)执行，直到处理完所有记录。第一次运行 reduce 函数创建的结果将包含在发送到下一次调用的数组中。

为了使用 reduce 函数计算项目的数量，您需要能够将结果与以前的 reduce 函数与 map 阶段输入区分开来，或者确保它们具有相同的格式并且无论数据来自何处都可以正确聚合从。

# c# - 在运行时将对象更改为可序列化的 .NET

> ID：13274421
> 
> 赞同：0
> 
> 时间：2012-11-07T16:54:27.660
> 
> 标签：c#, .net, serialization

我想在运行时将对象更改为 ISerializable。就像是

```
<!-- language: c# -->
var nonSerializeObject = new NonSerialize();
ISerializable mySerializeObject = 
      somethingforserializable.serialize(nonSerializeObject,TypeOfObject); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:55:57.433

`ISerializable`您可以创建一个可以序列化（转换为其他表示形式）对象的类，但无法在运行时向类添加接口（例如）。

该类`System.Xml.Serialization.XMLSerializer`可以序列化您的类，而无需实现`ISerializable`或成为`[Serializable]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T16:56:21.707

不可能。您最好的选择是使用 XML 序列化或实现您自己的序列化函数，这些函数使用反射从对象中读取所有字段（请注意，反射仅返回当前类型的私有字段，因此您必须手动遍历类型层次结构）。

你的出发点是`nonSerializeObject.GetType().GetFields()`方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T16:58:06.883

很抱歉，您不能在运行时添加接口。

能够放置一个对象来实现 ISerializable 并不意味着你可以正确地实现它。

然而...

您可以通过反射获取类的所有字段并手动对其进行序列化。也许通过将它放在一个可以作为可序列化信封的通用类中。

像这样的东西：

```
public class SerializableEnvelope<T> : ISerializable
{
    private T item;

    public T Item
    {
        get { return item; }
    }

    public SerializableEnvelope(T _item)
    {
        item = _item;
    }

    public SerializableEnvelope(SerializationInfo info, StreamingContext context)
    {
        item = Activator.CreateInstance<T>();

        FieldInfo[] fields = typeof(T).GetFields(BindingFlags.NonPublic | BindingFlags.Instance);

        foreach (FieldInfo field in fields)
            field.SetValue(item, info.GetValue(field.Name, field.FieldType));
    }

    public virtual void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        FieldInfo[] fields = typeof(T).GetFields(BindingFlags.NonPublic | BindingFlags.Instance);

        foreach (FieldInfo field in fields)
            info.AddValue(field.Name, field.GetValue(item));
    }
} 
```

现在，我还没有尝试过，它可能无法完全适用于某些以不寻常方式存储数据的类。例如，我只获取私有字段，而某些类可能有公共字段。（不寻常，但可能发生）

如果嵌套对象也不可序列化，您也可能会遇到一些问题。但是，您可以检测到这一点并自动创建信封并在反序列化时重建层次结构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T16:56:49.713

您不能添加从运行时派生的属性或接口/类。尽管取决于您的序列化方式，但它们甚至可能不需要。

# html - IE 和 Firefox 中的不同结果给同一个选择器的多个定义

> ID：13274423
> 
> 赞同：0
> 
> 时间：2012-11-07T16:54:38.353
> 
> 标签：html, css

我有两个 CSS 文件为同一个选择器指定相同的属性。第一个文件有：

```
.test{ padding: 0.3em; } 
```

第二个文件有：

```
.test{ padding: 3px; } 
```

Internet Explorer 遵循第二条规则，而 Firefox 遵循第一条规则。这是因为 Firefox 认为`em`s 具有更高的优先级吗？

# icefaces-1.8 - Icefaces 1.8 - 自动刷新数据表

> ID：13274425
> 
> 赞同：0
> 
> 时间：2012-11-07T16:54:49.330
> 
> 标签：icefaces-1.8

有关如何在不刷新页面上其他组件的情况下自动刷新 dataTable 的任何示例？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:27:02.027

如果要自动刷新数据表，可以使用ICEfaces 中的**Ajax Push**功能。

您可以做的是创建一个线程并循环推送更新。

这里有两篇解释 Ajax Push 的文章。

使用 ICEfaces 进行 Ajax 推送：http: [//bit.ly/A2Cx0](http://bit.ly/A2Cx0)

使用 ICEfaces 的 Ajax 推送，使用 RenderManager API：[http ://bit.ly/2GguWr](http://bit.ly/2GguWr)

我在 2009 年写了这些文章，但是我希望这会有所帮助，因为你已经用“icefaces-1.8”标记了这个问题。

# emacs - 如何配置 .emacs 以启用“Cv”以将光标移动一半窗口高度

> ID：13274439
> 
> 赞同：2
> 
> 时间：2012-11-07T16:55:24.443
> 
> 标签：emacs, lisp

我正在尝试使 Cv 绑定到一个函数，在该函数中它将光标向下移动一半的窗口高度，对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-30T18:21:15.837

我找到的最简单的方法：使用 View.el，它应该默认可用（至少对我来说是这样）。提示：[http ://www.emacswiki.org/emacs/HalfScrolling](http://www.emacswiki.org/emacs/HalfScrolling)

然后，做一些键绑定来改变默认行为。我的 Emacs 初始化文件现在包含：

```
;; Scroll only half-pages.
(require 'view)
(global-set-key "\C-v"   'View-scroll-half-page-forward)
(global-set-key "\M-v"   'View-scroll-half-page-backward) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:03:56.043

来自[http://www.emacswiki.org/emacs/HalfScrolling](http://www.emacswiki.org/emacs/HalfScrolling)：

> 默认情况下，Emacs 通过向上滚动和向下滚动几乎全屏滚动。我个人希望它一次滚动半页，但不幸的是无法弄清楚如何干净地做到这一点。
> 
> 有一个 next-screen-context-lines 变量，它控制在按屏幕滚动时应保留多少行连续性。手头的问题可以通过将此变量设置为 window-height/2 来解决，但显然每次使用 next-screen-context-lines 时都应该计算它，因为 window-height 不是恒定的。
> 
> 我想出的唯一可行的解​​决方案是以下糟糕的 hack。总比没有好，所以它来了：

```
(defun window-half-height ()
  (max 1 (/ (1- (window-height (selected-window))) 2)))

(defun scroll-up-half ()
  (interactive)
  (scroll-up (window-half-height)))

(defun scroll-down-half ()         
  (interactive)                    
  (scroll-down (window-half-height)))

(global-set-key [next] 'scroll-up-half)
(global-set-key [prior] 'scroll-down-half) 
```

您应该能够更改它`global-set-key`以使用`"\C-v"`并获得您想要的东西。该页面上还有一些针对同一问题的其他解决方案，请查看。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T21:24:13.963

如果这就是你想要做的，这将做到：

```
(global-set-key [(control ?v)]
 (lambda () (interactive (next-line (/ (window-height (selected-window)) 2))))) 
```

# asp.net-mvc - TFS2010 msbuild msdeploy 未经授权的错误

> ID：13274442
> 
> 赞同：1
> 
> 时间：2012-11-07T16:55:31.090
> 
> 标签：asp.net-mvc, msbuild, msdeploy, continuous-deployment

感谢有关以下问题的任何指导或建议

我正在使用 TFS2010 及以下的 msbuild 参数来在登台服务器上部署构建（持续部署）。我已经完成了所有必要的配置，例如

> 管理服务委托
> 
> 管理服务
> 
> 文件系统权限
> 
> IIS 管理员权限

msbuild 参数

```
/p:validatearchitecture=true  /p:AllowUntrustedCertificate=True /p:DeployOnbuild=True 
/p:DeployTarget=MsDeployPublish /p:MSDeployPublishMethod=WMSVC 
/p:MsDeployServiceUrl=stagingserver
/p:DeployIISAppPath="cddemo" /p:UserName=username /p:Password=password 
/p:Outdir="D:\Demo\Demo\\" 
```

有以下错误。如何解决？以及如何从链接中删除 https 并使用详细参数查看详细错误。

> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets (3588)：Web 部署任务失败。（ `https://stagingserver:8172/msdeploy.axd?site=cddemo`无法联系远程代理（URL）。确保远程代理服务已在目标计算机上安装并启动。）确保站点名称、用户名和密码正确。如果问题仍未解决，请联系您的本地或服务器管理员。`https://stagingserver:8172/msdeploy.axd?site=cddemo`错误详细信息：无法联系远程代理 (URL )。确保在目标计算机上安装并启动了远程代理服务。收到了不受支持的响应。响应标头“MSDeploy.Response”为“”，但应为“v1”。 **远程服务器返回错误：(401) Unauthorized。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T02:20:09.457

我只能想到两件事来尝试：

1.  使用服务器/域名限定您的用户名：`/p:UserName:Server\Username`
2.  尝试明确定义`/p:AuthType=Basic`或`/p:AuthType:NTLM`

# jquery - iOS Phonegap 闪烁修复导致滚动问题

> ID：13274443
> 
> 赞同：1
> 
> 时间：2012-11-07T16:55:41.133
> 
> 标签：jquery, cordova, jquery-mobile

我使用下面的代码来删除我的 iOS Phonegap 应用程序代码中的闪烁：

```
.ui-mobile, .ui-mobile .ui-page, .ui-mobile [data-role="page"],
.ui-mobile [data-role="dialog"], .ui-page, .ui-mobile .ui-page-active {
      overflow: hidden;
      -webkit-backface-visibility: hidden;
} 
```

环境：

iOS5.0 Cordova 2.0 Jquery 1.7.2 Jquery mobile 1.1.1

使用上述代码后，滚动在我的应用程序中不起作用。如果我在上面的代码中删除溢出：隐藏，那么我会遇到闪烁的问题。

如何解决我的应用程序中的滚动问题

# c# - 获取相对于其他窗口的鼠标坐标

> ID：13274444
> 
> 赞同：2
> 
> 时间：2012-11-07T16:55:49.007
> 
> 标签：c#

我想获得相对于另一个窗口（窗口客户区）的鼠标坐标，该窗口不是我的应用程序的一部分。

我宁愿在不深入研究 Win32 API 和 dll 导入的情况下这样做，但我不确定它是否可能。

基本思想是：我的 C# WPF 应用程序将使用户获得焦点，当用户按下热键 (CTRL + C) 时，应用程序将获得相对于先前指定窗口的客户区的坐标。这只是我需要为内部开发协助制作的一个快速应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:05:17.870

如果您有进程名称/ID，则可以通过调用获取句柄`System.Diagnostics.Process.MainWindowHandle`。当您有句柄时，用于`System.Windows.Forms.Control.FromHandle(handle).PointToClient(p)`获取屏幕点`p`相对于其他窗口位置的坐标。

# google-apps-script - 最大同时

> ID：13274448
> 
> 赞同：1
> 
> 时间：2012-11-07T16:55:58.943
> 
> 标签：google-apps-script, google-sheets, gs-vlookup

我的谷歌电子表格突然出现以下错误：

```
error: Service invoked too many times in a short time: exec maxSimultaneous. Try Utilities.sleep(1000) between calls. 
```

大多数错误都出现在包含 vlookup 的单元格中。一些错误出现在具有我自己的自定义函数的单元格中，尽管大多数具有自定义函数的单元格都可以正常工作。

知道 exec maxSimultaneous 是什么，如何避免错误以及 2 天前 Google 的政策 2012 年 5 月 11 日发生了什么变化，这会突然开始引起问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:39:32.343

由于错误出现在具有标准功能的单元格上。这不是真正的 Apps 脚本问题，而是电子表格问题。

但我很确定问题出在您的自定义函数上。因为与内置函数不同，自定义函数不会立即全部评估。电子表格触发每个运行，并在每个单独返回结果时触发。然后，在每次返回时，电子表格应用程序必须重新计算依赖于该单元格的所有函数，即您的 vlookups。由于这种行为，您同时触发了太多的 vlookup 重新计算，并达到了这个`maxSimultaneous`限制。

我对您的建议与我在解释 Apps Script 自定义函数的问题时给大家的建议相同（远远超出了这个问题）。**不要使用自定义函数！**

我知道它们看起来很漂亮，易于开发且易于使用。但是他们有很多问题。如果您将方法更改为“标准”脚本，您的电子表格将会快得多。您可以通过菜单或图像按钮手动触发计算，或通过触发器自动`onEdit`触发计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:19:01.110

建议：使用 Utilities.sleep(1000) - 当您多次调用 GAS 函数时往往会出现。当我尝试获得大约 30 行的行高时，我得到了这个。我怀疑进行网络调用的 GAS 功能会导致这种情况。

一个常见的原因是使用 range.getValue 而不是 range.getValues

另外，我知道 vlookup 很慢，而数据库功能更快。

# c++ - 根据命令创建或删除 GDI 形状

> ID：13274458
> 
> 赞同：1
> 
> 时间：2012-11-07T16:56:28.353
> 
> 标签：c++, winapi, gdi

我正在创建一个 win32 应用程序。在主窗口上有 5 个按钮。每个按钮前面都有一个小圆圈。（使用 GDI 工具。在 WM_PAINT 的情况下）。现在当我按下一个按钮时，它前面的圆圈应该是红色的。我怎样才能做到这一点。

如果我们随时创建一个编辑框，我们可以使用 SendMessege 更改其上的文本。像这样可以更改之前绘制的形状的颜色。

请有人给我一个建议。

```
case WM_PAINT:
    {
    PAINTSTRUCT ps;
    HDC hDC;
    HBRUSH brusha;

    hDC=BeginPaint(hWnd,&ps);       
    brusha=CreateSolidBrush(RGB(0,255,0));
    SelectObject(hDC,brusha);
    Ellipse(hDC, 20, 20, 50, 50);
    DeleteObject(brusha);
    EndPaint(hWnd, &ps);
    }

 case WM_COMMAND:
      switch(LOWORD(wParam))
        {
            case BUTTON:
            {
             //here I need to change the above drawn corcle to be red.
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:27:05.240

您无法更改已绘制图像的颜色，但可以重新绘制它。使用 Windows 函数`InvalidateRect`告诉控件它需要重绘，然后您将再次调用您的`WM_PAINT`处理程序。在处理程序中，在绘制圆圈之前选择所需的颜色。

# nhibernate - NHibernate 什么时候将 Lazy Collection 转换回 List

> ID：13274461
> 
> 赞同：1
> 
> 时间：2012-11-07T16:56:32.093
> 
> 标签：nhibernate

NHibernate 何时将一个集合转换为一个集合，当 Session 打开时表示为 PersistentGenericBag，但后来又转换回我在源代码中定义的 IList？

我以为是在提交事务或会话断开连接的时候。但是我正在编写一个单元测试，无论我关闭、刷新、提交和断开多少东西，我的对象总是有一个 PersistentGenericBag，而不是一个列表。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:11:09.220

别弄错我的意思。但是你真的有这样的映射吗？

```
public class MyObject 
{
    public virtual List<string> MyColl { get; set; }
} 
```

因为我的经验表明，这最终会出现这样的异常：

`NHibernate.PropertyAccessException: Invalid Cast (check your mapping for property type mismatches); setter of MyLib.MyObject ---> System.InvalidCastException: Unable to cast object of type 'NHibernate.Collection.Generic.PersistentGenericBag'1[System.String]' to type 'System.Collections.Generic.List`1[系统字符串]`

我在您的映射中期望的是**IList<>**。因为这将允许 NHibernate 注入它自己的实现。即：`PersistentGenericBag`

```
public class MyObject 
{
    public virtual IList<string> MyColl { get; set; }
} 
```

在这种情况下，**答案是**：**从不**。*MyObject*的代理提供了 IList<> 发布的所有功能，同时仍然使用类型的属性`PersistentGenericBag`

什么时候真正有人居住？首次访问时（通过 getter）。的内部实现`PersistentGenericBag`将执行 sql 查询并将数据加载到内部 IList<> 中。当然会话必须仍然打开并连接到 MyObject

# c++ - How do I check that stream extraction has consumed all input?

> ID：13274462
> 
> 赞同：5
> 
> 时间：2012-11-07T16:56:36.387
> 
> 标签：c++, boolean, eof, istringstream

In the following function, I try to see if a string `s` is convertible to type `T` by seeing if I can read a type `T`, and if the input is completely consumed afterwards. I want

```
template <class T>
bool can_be_converted_to(const std::string& s, T& t) 
{ 
  std::istringstream i(s);
  i>>std::boolalpha;
  i>>t;
  if (i and i.eof())
    return true;
  else
    return false;
} 
```

However, `can_be_converted_to<bool>("true")` evaluates to false, because `i.eof()` is false at the end of the function.

This is correct, even though the function has read the entire string, because it hasn't attempted to read *past* the end of the string. (So, apparently this function works for int and double because `istringstream` reads past the end when reading these.)

So, assuming that I should indeed be checking `(i and <input completely consumed>)`:

Q: How do I check that the input was completely consumed w/o using eof()?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T17:01:08.127

Use [`peek()`](http://en.cppreference.com/w/cpp/io/basic_istream/peek) or [`get()`](http://en.cppreference.com/w/cpp/io/basic_istream/get) to check what's next in the stream:

```
return (i >> std::boolalpha >> t && i.peek() == EOF); 
```

Your version doesn't work for integers, either. Consider this input: `123 45`. It'll read 123 and report true, even though there are still some characters left in the stream.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T17:01:25.893

In many implementations of the standard library the `eof` will only be set after you tried reading beyond the end. You can verify that in your code by doing:

```
char _;
if (i && !(i >> _)) { // i is in a valid state, but
                      // reading a single extra char fails 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-07T17:13:58.400

Extending on jrok's answer, you can use `i.get()` just as easily as `i.peek()`, at least in this case. (I don't know if there is any reason to prefer one to the other.)

Also, following the convention that white space is never anything but a separator, you might want to extract it before checking for the end. Something like:

```
return i >> std::ws && i.get() == std::istream::traits_type::eof(); 
```

Some older implementations of `std::ws` were buggy, and would put the stream in an error state. In that case, you'd have to inverse the test, and do something like:

```
return !(i >> std::ws) || i.get() == std::istream::traits_type::eof(); 
```

Or just read the `std::ws` before the condition, and depend uniquely on the `i.get()`.

(I don't know if buggy `std::ws` is still a problem. I developed a version of it that worked back when it was, and I've just continued to use it.)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-10T14:31:16.233

I would like to offer a completely different approach: Take your input string, tokenise it yourself, and then convert the individual fields using `boost::lexical_cast<T>`.

Reason: I wasted an afternoon on parsing a string containing 2 int and 2 double fields, separated by spaces. Doing the following:

```
int i, j;
double x, y;
std::istringstream ins{str};

ins >> i >> j >> x >> y;
// how to check errors???... 
```

parses the correct input such as

```
`"5 3 9.9e+01 5.5e+02"` 
```

correctly, but does not detect the problem with this:

```
`"5 9.6e+01 5.5e+02"` 
```

What happens is that `i` will be set to 5 (OK), `j` will be set to 9 (??), `x` to 6.0 (=0.6e+01), `y` to 550 (OK). I was quite surprised to see `failbit` not being set... (platform info: OS X 10.9, Apple Clang++ 6.0, C++11 mode).

Of course you can say now, "But wait, the Standard states that it should be so", and you may be right, but knowing that it is a feature rather than a bug does not reduce the pain if you want to do proper error checking without writing miles of code.

OTOH, if you use "Marius"'s excellent [tokeniser function](https://stackoverflow.com/questions/236129/how-to-split-a-string-in-c) and split `str` first on whitespace then suddenly everything becomes very easy. Here is a slightly modified version of the tokeniser. I re-wrote it to return a vector of strings; the original is a template that puts the tokens in a container with elements convertible to strings. (For those who need such a generic approach please consult the original link above.)

```
// \param str: the input string to be tokenized
// \param delimiters: string of delimiter characters
// \param trimEmpty: if true then empty tokens will be trimmed
// \return a vector of strings containing the tokens
std::vector<std::string> tokenizer(
    const std::string& str,
    const std::string& delimiters = " ",
    const bool trimEmpty = false
) {
    std::vector<std::string> tokens;
    std::string::size_type pos, lastPos = 0;
    const char* strdata = str.data();
    while(true) {
        pos = str.find_first_of(delimiters, lastPos);
        if(pos == std::string::npos) {
            // no more delimiters
            pos = str.length();
            if(pos != lastPos || !trimEmpty) {
                tokens.emplace_back(strdata + lastPos, pos - lastPos);
            }
            break;
        } else {
            if(pos != lastPos || !trimEmpty) {
                tokens.emplace_back(strdata + lastPos, pos - lastPos);
            }
        }
        lastPos = pos + 1;
    }
    return tokens;
} 
```

and then just use it like this (`ParseError` is some exception object):

```
std::vector<std::string> tokens = tokenizer(str, " \t", true);
if (tokens.size() < 4)
    throw ParseError{"Too few fields in " + str};

try {
    unsigned int i{ boost::lexical_cast<unsigned int>(tokens[0]) },
        j{ boost::lexical_cast<unsigned int>(tokens[1]) };
    double x{ boost::lexical_cast<double>(tokens[2]) },
        y{ boost::lexical_cast<double>(tokens[3]) };
    // print or process i, j, x, y ...
} catch(const boost::bad_lexical_cast& error) {
    throw ParseError{"Could not parse " + str};
} 
```

Note: you can use the [Boost split](http://www.boost.org/doc/libs/1_57_0/doc/html/string_algo/reference.html#header.boost.algorithm.string.split_hpp) or the [tokenizer](http://www.boost.org/doc/libs/1_57_0/libs/tokenizer/) if you wish, but they were slower than Marius' tokeniser (at least in my environment).

Update: Instead of `boost::lexical_cast<T>` you can use the C++11 "`std::sto*`" functions (e.g. `stoi` to convert a string token to an int). These throw two kinds of exceptions: `std::invalid_argument` if the conversion could not be performed and `std::out_of_range` if the converted value cannot be represented. You could either catch these separately or their parent `std::runtime_error`. Modifications to the example code above is left as an exercise to the reader :-)

# c++ - mmap 地图大小限制

> ID：13274468
> 
> 赞同：0
> 
> 时间：2012-11-07T16:56:51.517
> 
> 标签：c++, mmap, memcpy, segmentation-fault

> **可能重复：**
> [在 mmap 之后在 memcpy 中获取分段错误 SIGSEGV](https://stackoverflow.com/questions/13270689/getting-segmentation-fault-sigsegv-in-memcpy-after-mmap)

我在我的 cpp 代码中使用 mmap() 来映射一个大尺寸区域（100,000,000 字节 ~ 100MB）。

从 man mmap 我了解到我只能知道它是否成功，我不知道它成功映射了多少大小。

就我而言，我可以使用 8192 字节的缓冲区迭代地读取该区域，但是在我读取 ~24MB 之后，我得到了 SIGSEGV - 意味着 mmap 没有成功映射**整个**区域？

我正在通过 memcpy 函数读取以从映射区域复制到堆上的缓冲区。（当缓冲区在堆栈上时，我也看到了相同的行为）。

我怎么知道它是否映射了整个区域？如果它映射了整个区域，那么为什么在读取大约 24MB 字节后我会得到 SIGSEGV？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T17:13:31.513

```
int *  addr = reinterpret_cast<int *>(mmap(NULL, length , PROT_READ, flags , fd, 0));
// ...    
int * initaddr = addr;

char buffer[jbuffer_size];

void *ret_val = buffer;
int read_length = length;

while(ret_val == buffer || read_length<jbuffer_size) {
    ret_val = memcpy(buffer, addr,jbuffer_size);
    addr+=jbuffer_size;
    read_length -= jbuffer_size;
} 
```

因此，您的终止条件看起来是错误的：您*递减* `read_length`并循环，直到它*小于* `buffer_size`.

此外，您正在递增*整数*`addr`（它是一个），*而不是*字节。所以，你前进的速度太快了 4 倍。`buffer_size` *`int*`*`addr`**

 **顺便说一句，在其他代码中：`lseek`接受并返回 a `off_t`，而不是 a `size_t`。

* * *

编辑：大多数这些错误已经在另一个问题中指出，所以我不确定这个问题是否添加了任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:00:36.613

如果您遇到分段违规，这不是因为`mmap`没有成功，而是因为其他原因。您正在尝试访问映射到进程虚拟内存的任何区域之外的段。

根据程序分配的映射集检查程序的内存访问。考虑利用`pmap`和。`strace``gdb`**

# winforms - 单击标签时如何创建和显示信息提示？

> ID：13274474
> 
> 赞同：0
> 
> 时间：2012-11-07T16:57:17.700
> 
> 标签：winforms, visual-studio, popup, visual-studio-2012, tooltip

我正在使用 VSTUDIO2012，我的问题看起来很简单，但对我来说太难了，

**编辑**：这是一个“Windows 窗体应用程序”

我有一个标签，当我单击标签时，我想在“信息提示”或“工具提示”或“气球提示”中显示一些信息，我想显示一条消息，例如 5-10 秒...

有人可以指导我如何制作这个吗？或网络上的参考？

**EDIT2**：我试过这个：

```
Private Sub Label1_Click(sender As Object, e As EventArgs) Handles Label1.Click

    'MessageBox.Show("Use the 'Ctrl+C' hotkey to copy the" & vbNewLine & "mouse coordinates into the clipboard.", "Mouse XY by Elektro H@cker")
End Sub

Private Sub ToolTip1_Popup(sender As Object, e As PopupEventArgs) Handles ToolTip1.Popup
    ToolTip1.Show("Tooltip text goes here", Label1)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:38:18.793

当您启动您的应用程序时，您应该在屏幕中央处理您正在处理的表单。

在屏幕的左侧，您应该会看到一个标有“工具箱”的面板（它可能位于屏幕的不同侧面，具体取决于您排列面板的方式。我认为默认值是保留的。如果您看不到它，您可以通过从视图菜单中选择“工具箱”或按“Ctrl + Alt + X”来显示它。）。

打开“工具箱”面板后，您应该会看到几个可折叠的面板。打开“所有 Windows 窗体”或“常用控件”。每个可折叠区域的底部附近都有一个元素，您可以添加标记为“工具提示”的元素。成功添加后，将出现一个浅灰色控制面板，其中标有“ToolTip1”的新 ToolTip 控件。

添加控件后，您只需右键单击要添加工具提示的元素，例如标签。当弹出上下文菜单出现时，选择“属性”（最后一个选项）。这将打开属性面板。

当属性面板打开时，滚动到列表底部。TextAlign 属性的正下方应该是 ToolTip1 上名为 ToolTip 的属性。在此处输入您的工具提示文本。现在，当用户将鼠标悬停在您的标签上时，输入的文本将出现在标准的淡黄色弹出工具提示中。

# jquery - 将列表项从一个无序列表移动到另一个无序列表

> ID：13274481
> 
> 赞同：0
> 
> 时间：2012-11-07T16:57:46.327
> 
> 标签：jquery, ruby-on-rails-3

我正在尝试将我的列表项从一个无序列表移动到另一个。update.js.erb 在更新发生时被调用（我可以看到它在日志中被调用而没有错误）。

我对 jQuery 很陌生，所以我为我的无知道歉。

```
<% if @task.complete? %>
  $('#task_<%= @task.id%> li').detach().appendTo($('#complete_tasks ul'));
  $.('#complete_tasks').sortable_list();
<% else %>
  $('#task_<%= @task.id %> li').detach().appendTo($('#incomplete_tasks ul'));
  $.('#incomplete_tasks').sortable_list();
<% end %> 
```

[我在如何将项目从一个列表移动到另一个列表中](https://stackoverflow.com/questions/12956373/how-to-move-an-item-from-one-list-to-another)看到了 .detach() ？

我尝试了许多不同的形式，但我的猜测是我选择了错误的列表或列表项。

非常感谢任何/所有反馈！:)

更新1：

```
ul id="complete_tasks" data-update-url="http://localhost:3000/tasks/sort_incomplete" class="ui-sortable"
  li class="task" id="task_1"
  ... 
```

同样，不完整的任务

```
ul id="incomplete_tasks" data-update-url="http://localhost:3000/tasks/sort_complete" class="ui-sortable"
  li class="task" id="task_7"
  ... 
```

更新 2：这是最终的工作，当我最初测试它时，我有一个不同的函数调用，它导致了这个问题。

```
<% if @task.complete? %>
  $('#complete_tasks').append($('#task_<%= @task.id %>'));
<% else %>
  $('#incomplete_tasks').append($('#task_<%= @task.id %>'));
<% end %> 
```

如果没有额外的 $( ... )，该函数只会打印 #task_2 所以我添加了它并删除了错误的函数调用，一切都很好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:20:15.783

你不需要分离。如果您使用`appendTo`（或附加），那么它会移动元素。它不会创建副本。`$()`此外，摆脱`appendTo`- 你只需要#ID。而且您只需要 ID 即可选择一个元素 - 不需要标签名称和类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:08:13.687

这应该足够了

```
$('#task_<%= @task.id%> li').appendTo('#complete_tasks ul'); 
```

但这会将下面的所有**列表项**移动`#task_`到 ul 里面`complete_tasks`

# php - 通过 PHP 发送电子邮件的完整/正确方法是什么？

> ID：13274487
> 
> 赞同：-1
> 
> 时间：2012-11-07T16:58:05.150
> 
> 标签：php

我已经尝试过这个`mail`功能，它工作正常。现在我需要添加什么？当邮件内容由用户输入形成时。

[Doc](http://php.net/manual/en/function.mail.php)说行（由 分隔`\n`）不应大于 70 个字符。那么在使用邮件功能之前我应该​​做自动换行吗？我应该在线路的起点处理句号吗？还有什么？

该文档还推荐 PEAR 的邮件包用于复杂邮件和一起发送大量邮件。我从来没有用过PEAR，怎么样？有哪些替代方案以及如何在其中进行选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:59:56.880

php原生函数`mail()`

这个可能不是最面向对象的，但它是原生的，是你必须看的第一个。

[php邮件（）函数](http://php.net/manual/en/function.mail.php)

# c# - WinRT XAML TextBlock - 超链接功能

> ID：13274495
> 
> 赞同：2
> 
> 时间：2012-11-07T16:58:25.540
> 
> 标签：c#, windows, winrt-xaml

我有一个如下所示的文本块。我只想让一个词可点击。有点像到另一个页面的超链接。

```
<TextBlock>
    <Run Text="I can haz " />
    <Run Text="Cheezburger" Click="Cheezburger_Click" />
</TextBlock> 
```

这样的功能可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-10T23:49:33.840

这对你有用吗？

```
<TextBlock>
    <Run Text="my link " />
    <Hyperlink Click="Hyperlink_Click" >www.stackoverflow.com</Hyperlink>
</TextBlock> 
```

# algorithm - 经典圆桌算法？

> ID：13274496
> 
> 赞同：0
> 
> 时间：2012-11-07T16:58:26.587
> 
> 标签：algorithm

不同价值的硬币围绕圆桌散布。我们可以选择任何硬币，这样对于任何两个相邻的硬币对，至少必须选择一个（也可以选择两者）。在这种情况下，我们必须找到所选硬币的最小可能值。

我必须尊重时间复杂度，所以我没有使用简单的递归暴力，而是尝试使用动态编程来做到这一点。但我得到了错误的答案 - 我的算法不正确。

如果有人可以建议一种算法来动态地执行它，我可以用 C++ 编写自己的代码。硬币的最大数量也是 10^6 ，所以我认为存在 O(n) 解决方案。

编辑：好的，我还添加一个示例。如果桌子周围的硬币价值是 1,2,1,2,2（圆圈），那么通过选择 1st,3rd & 4th(或 5th) 硬币的最小值将是 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:26:39.837

把所有东西都围成一个圈会妨碍动态规划，因为没有稳定的起点。

如果您知道最佳答案中将包含特定硬币，则可以将其用作起点。重新编号硬币 1 并使用动态规划计算出 1..N 的最佳成本，选择和不选择第 N 个硬币。鉴于此，您可以计算出 1..N+1 的最佳成本，依此类推。

*实际上，如果有人告诉您不会*选择特定硬币，您也可以使用此方法- 您的起始条件略有不同。或者您可以使用这样一个事实，即如果您知道未选择特定硬币，则必须选择其两侧的两个。

任何硬币要么被选中，要么不被选中，因此你可以通过解决两个动态规划问题来查看两种方式的成本，然后选择最便宜的成本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:25:35.483

我认为以下算法将为您提供最佳解决方案。我没有通过你的代码（对不起）：

我们将在圆圈中选择一个随机点开始。假设它是 1。我们将看看如果它被选中会发生什么。

所以我们选择1。在圆圈中向上移动，您可以选择是否选择2。这可以显示在树中，其中顶部分支表示选择硬币，而下部表示未选择硬币。数字代表所选硬币的总和。

```
 3 = 1 and 2 both selected
  /
1
  \
   1 = 1 selected, 2 not 
```

现在我们继续循环并选择是否选择 3。这给出了一棵树

```
 6 = 1, 2 and 3 selected
       /
     3
    /  \
   /     3= 1 and 2 selected, 3 not
  /
1
  \
   \     4 = 1 and 3 selected, 2 not 
    \  /
     1 
      \
        1 = 1 selected, 2 and 3 not 
```

现在在那棵树上，我们可以修剪！鉴于您的问题陈述，您必须跟踪哪些硬币被拿走，以确保每枚硬币都被“覆盖”。假设最后 2 个硬币没有被选中。然后您知道必须选择下一个，以免违反您的约束。更重要的是，算法其余部分的可能性仅取决于最后 2 个硬币的选择。

现在查看所有选择了最后一个硬币 (3) 的分支。您只需要保留重量最轻的那个。这两个分支都可以在算法的其余部分中自由选择他们想要的内容。在这种情况下，我们可以安全地移除顶部分支。然后，我们剩下 3 条可能的路径。

现在看看如果我们列举硬币 4 的选择会发生什么

```
 3      7= 1, 2 and 4 selected, 3 not
    /  \   /
   /     3
  /       \
           3 =  1 and 2 selected, 3 and 4 not 
1          8 = 1, 3 and 4 selected, 2 not 
  \       /
   \     4 
    \  /  \
     1     4 = 1 and 3 selected, 2 and 4 not 
           5 = 1 and 4 selected, 2 and 3 not
      \  /
        1 
         \
           1 = only 1 selected 
```

现在你有6个选择。但是，最低的分支（只选择了 1）是无效的，因为 3 不与任何东西相邻。您可以修剪它以留下 5 个分支。在这 5 个中，有 3 个选择了 4 个（=到目前为止的最后一个硬币），我们可以像以前一样做同样的事情：只保留最便宜的分支。这将分支的数量再次减少到 3 个。

您可以在整个圈子中继续这样做，直到再次开始。那么你应该有3条路径，你可以选择其中最便宜的。如果您从选择硬币 1 开始，这将为您提供最佳解决方案。

现在我们有了选择 1 的最佳解决方案。但是，可能不应该选择 1。可能是它与另一个选择的硬币相邻：硬币 2 或硬币 6。如果我们现在对硬币 2 而不是硬币 1 执行上述算法一次，对硬币 6 执行一次，我们应该得到最佳解决方案。

这种方法依赖于选择硬币 1、2 或 6 的事实。

我希望我的方法可以理解。它相当长，您可以通过使用一些状态转换图来更快地完成它，在该图中您只维护可能的状态（取决于最后 2 个硬币）并进行处理。方法同上，只是更简洁）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:40:23.657

O(n) suggestion, by induction. Hmm, I read the wiki now and I found out it counts as dynamic programming. Really a broad term. I had a different understanding of dynamic programming before.

**Glossary**

We have `N` coins in `N` places. Coin values are `a[i]`, where `0 <= i < N`. Each coin may be selected or deselected which we express as the sequence of `0` and `1`.

**Algorithm description**

`00` is invalid sequence in any place, because it would violate the problem constraints. `111` is also invalid because it is not optimal, `101` is always better.

Sequentially for every place `i` we calculate 3 best sums, for 3 codes: `01`, `10`, `11`. The code comes from the setting of last 2 coins, that is `i-1` and `i`. So we have best (minimum) sums in variables `b01`, `b02`, `b11`.

We have to start from something sure, so we will apply the algorithm 2 times. One for coin at place 0 set, and one for unset.

At the beginning we try places `0` and `1` and initiate `b`s directly. `b01 = a[1]`, `b10 = a[0]`, `b11 = a[0] + a[1]`. However if this is the round in which we choose the first coin to be unset, we can accept only `b01` solution. So we assign a big number to `b10` and `b11`. These solutions will be quickly dropped by next algorithm steps. On the second round we will do the opposite: assign big nuber to `b01`, because first bit must be set.

At step `i` we have best sums for place `i-1` in `b`s. We compute `c`s which are the best sums for place `i`.

```
c01 = b10 + a[i]    // 101 (10 -> 01)
c10 = min(b01, b11) // 010 (01 -> 10) or 110 (11 -> 10)
c11 = b01 + a[i]    // 011 (01 -> 11) 
```

That comes from following possibilities:

```
010 - b01 -> c10
011 - b01 -> c11
100 - invalid
101 - b10 -> c01
110 - b11 -> c10
111 - invalid 
```

Of course we finish each step with assigning best sums back to `b`s.

When we processed all the coins we must drop the solutions that are incompatible with the initial assumption. Bits `i-2`, `i-1` and `0` must produce valid sequences.

**This is example run for `123456` sequence.**

A. assume first bit `0`

```
1 a[1] = 2: b01 = 2, b10 = 999, b11 = 999
2 a[2] = 3: b01 = 1002, b10 = 2, b11 = 5
3 a[3] = 4: b01 = 6, b10 = 9, b11 = 1006
4 a[4] = 5: b01 = 13, b10 = 6, b11 = 11
5 a[5] = 6: b01 = 12, b10 = 13, b11 = 19 
```

`b10` is unacceptable, we choose better from `b01` and `b11`, which is 12.

B. assume first bit `1`

```
1 a[1] = 2: b01 = 999, b10 = 1, b11 = 3
2 a[2] = 3: b01 = 4, b10 = 3, b11 = 1002
3 a[3] = 4: b01 = 7, b10 = 4, b11 = 8
4 a[4] = 5: b01 = 9, b10 = 12, b11 = 12
5 a[5] = 6: b01 = 18, b10 = 9, b11 = 15 
```

Now `b11` is invalid as it would produce `111`. So we choose best of `b01` and `b10`, which is 9\. Step A gave 12, step B gave 9\. 9 is better. This is the result.

I made the above calculations manually, so sorry if there is a mistake in them. However for the first coin unset I computed 2+4+6 and for first coin set the result was 1+3+5\. Seems to be right.

# sql - 向现有 SQL Server 数据库添加版本控制

> ID：13274498
> 
> 赞同：14
> 
> 时间：2012-11-07T16:58:41.253
> 
> 标签：sql, sql-server, sql-server-2008, version-control

我是一个开发团队的一员，目前正在使用一个没有任何源代码控制的数据库。我们使用 SQL Server 2008 R2，并且一直使用 SSMS 直接管理数据库。它现在有约 340 个表和约 1600 个存储过程，加上一些触发器和视图，所以它不是一个小数据库。

我的目标是让数据库处于版本控制之下，所以我一直在阅读文章，比如[Scott Allen 的系列](http://bitly.com/9cJmGR)和许多与 SO 相关的老问题。但我仍然无法决定如何进行。

我的想法是将数据库模式编写在一个文件中，然后将过程、触发器和视图分别放在一个文件中。然后将所有内容都保留在 Mercurial 下。但是，当然，团队的每个成员都可以访问 SSMS 并直接更改架构和过程，我们中的任何人都可能忘记在版本化文件中复制这些更改。

有什么更好的选择？而且，我是否忘记了任何值得进行源代码控制的元素？我最担心的是，我发现的大多数文献都解释了在创建新数据库时如何进行版本控制，但在它已经很旧且相对较大的情况下却没有。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-07T17:54:23.750

**一般过程**

我们为特定版本（例如`v1.0`）创建基线。基线包括一个完整的模式创建脚本，以及允许的先前版本的升级脚本（如果有的话）（稍后会详细介绍）。所以对于`v1.0`，我们只有一个脚本：

```
baseline-v1.0.sql 
```

从该基线开始，我们创建增量更改脚本，就像我们从以前的基线开始工作一样。这些脚本以可重入的方式创建，因此它们可以安全地多次运行（第一次只做任何实际工作；请参阅下一段关于如何做的建议）。我们只需为每个更改脚本创建一个文件，其中包含基线名称和时间戳（我们称之为版本）。例如，假设我们在基线之后创建了两个更改脚本。我们有以下文件：

```
baseline-v1.0.sql (for creating new installations)
baseline-v1.0-201211071220.sql (created on Nov. 7, 2012 at 12:20 PM UTC)
baseline-v1.0-201211122019.sql (created on Nov. 12, 2012 at 8:00 PM UTC) 
```

我们创建一个`schema_version`包含两列的表：`baseline`和`version`。`baseline`是一些标签（例如`v1.0`上面提到的），并且`version`只是创建更改脚本时的时间戳（我们选择这样做是因为创建任意版本号会产生烦人的管理开销，而时间戳很容易使用）。因此，在运行更改脚本之前，我们通过`baseline`and查询来检查更改脚本是否已被应用`version`。如果它已经存在，只需退出脚本或其他任何内容。否则，应用更改并插入到`schema_version`表中以标记更改脚本已完成。

示例更改脚本：

```
-- Created by <developer> on Nov. 7, 2012 at 12:20 PM UTC
declare @schema_baseline varchar(10), @schema_version varchar(12)

set @schema_baseline = 'v1.0'
set @schema_version = '201211071210'

if exists (select 1 from schema_version where baseline = @schema_baseline and version = @schema_version = @schema_version) return 0

-- begin change script

-- place your schema changes here

-- end change script

insert into schema_version(@schema_baseline, @schema_version) 
```

现在，当我们实际安装软件时，我们运行相关`baseline`脚本。当我们升级那个版本时，我们只是按顺序应用更改脚本。

当我们在产品开发阶段达到一个重要的里程碑时，我们会创建一个新的基线。因此，我们创建了一个新的基线脚本（同样，这是作为基线的数据库的快照），以及来自先前基线的升级脚本。所以假设我们有一个新的基线，`v2.0`我们会有以下文件：

```
baseline-v2.0.sql (for creating new installations)
baseline-v2.0-upgrade-v1.0.sql (for upgrading from v1.0) 
```

然后该过程继续。

**我们如何应用更改**

脚本都保存在源代码管理中。我们确实有一个工具可以打包这些文件并自动升级我们的支持和安装团队使用的数据库。该工具计算出目标数据库的当前基线，并询问用户是否希望升级到包中的基线。如果他们这样做了，并且当前版本存在有效的升级路径，它会应用升级脚本，并更新`schema_version.baseline`，并从之前的基线中删除所有更改脚本条目。如果数据库是新的，它将应用常规基线脚本。无论哪种方式，在实现基线后，它都会应用程序包中存在的基线中的所有更改脚本，一次一个，按顺序，在事务中。如果特定更改脚本失败，它将回滚最后一组更改和错误。我们查看日志，修复所有问题，然后再次重新运行包。那时，它应该只在最后一个成功的更改脚本处启动，从而节省时间。

**自动化和差异工具**

我们不允许差异工具直接升级生产数据库。这太冒险了。当然，我们确实使用 diff 工具来帮助创建我们的升级和更改脚本，但是一旦有了它们，我们就会梳理它们、按摩它们、测试它们等，然后根据上面的规范创建升级或更改脚本. 我们确实使用工具/shell 脚本来创建更改脚本文件并进行样板`schema_version`检查。

**注意事项**

它实际上非常简单，而且效果很好。唯一真正变得棘手的是分支。在大多数情况下，分支处理得很好。如果我们需要为特定分支的工作更改脚本，一旦我们将分支合并回来，它将很好地折叠到主线中。没问题。当两个分支尝试做类似的事情时，或者一个分支依赖于另一个分支时，它变得棘手。不过，这主要是一个流程和计划问题。如果我们陷入这种情况，我们只需创建一个新基线（例如`v2.1`），然后相应地更新分支。

要记住的另一件事是，如果安装想要从一个基线升级到另一个基线，它必须在我们升级到新基线之前应用当前基线的所有未完成更改。换句话说，我们不会让安装从它们所在的位置直接跳转到下一个基线（当然，除非它们已经是当前基线的最新版本）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-07T17:07:27.007

我会推荐[SQL Server Data Tools](http://msdn.microsoft.com/en-us/data/tools.aspx)和/或 Visual Studio SQL 数据库项目。它将您现有的数据库反向工程为可以受版本控制的代码（sql）文件并提供许多其他细节（发布、比较等）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-30T08:56:31.513

我们专门开发了 SQL Source Control 来解决您描述的问题。它扩展了 SSMS 以提供 SQL Server 架构对象（和静态数据）与现有源代码控制系统之间的链接。

[http://www.red-gate.com/products/sql-development/sql-source-control/](http://www.red-gate.com/products/sql-development/sql-source-control/)

如果您需要更多信息，我们很乐意为您提供帮助（联系 support@red-gate.com）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-07T17:32:03.470

在许多开发者论坛上已经有很多关于这个话题的讨论。

我所做并发现是最简单和最干净的方法是：

1.  将每个 DB 对象的 DDL 提取到自己的文件中，索引和 PK 可以与它​​们所属的表放在同一个文件中。FK、过程、视图、触发器，任何可以跨越多个表的东西都放在它们自己的文件中。

2.  根据对象类型（例如表、过程、触发器、视图等）在目录中组织 DDL 文件

3.  对于保存静态参考数据（例如邮政编码或州）的表，有一个包含一堆插入语句的单独文件

4.  将此目录结构检查到您正在使用的任何版本控制中

5.  编写一个脚本，该脚本将遍历该目录结构以对您的数据库进行映像，将其与您指向的实际数据库进行比较（从系统表中提取架构）并使用 ALTER TABLE 语句应用差异

6.  如果您在版本之间进行数据转换，例如在 v1 中您有一个字段 FirstAndLastName，而在 v2 中您决定将其拆分为 FirstName 和 LastName，您将有一些批量数据迁移/处理语句。

我已经使用几种不同的 RDBMS 成功地管理了多个作业中的数据库更改。我通常将 Perl 用于区分图像中的 DB 模式和 DDL 文件的脚本。这种方法有一些假设，其中之一是您永远不会直接在数据库中对数据库进行任何更改，而是在您的 DDL 文件中，然后运行脚本来应用它。如果您以其他方式执行此操作，则在您运行脚本时它们将被撤消。所以它需要一些团队的协议和纪律。您的里程可能会有所不同。

现在，如果有一个 FOSS 工具可以为您执行此操作，请务必使用该工具，而不是自己设计。我这样做已经超过 10 年了

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-02-04T16:58:36.097

我们的[Sql Historian](http://tessik.com/sqlhistorian)源代码控制系统可以帮助人们解决这个问题，尤其是在您提到队友在更新服务器后“忘记”签入代码的情况下。

它位于后台，并将对您的数据库对象所做的所有更改记录到源代码控制中，而用户无需签入任何内容。可以将其想象为飞机黑匣子记录器，在您需要它之前一直保持原状。

# ruby-on-rails - 嵌套资源 - 如何传递需要的键和属性来更新？

> ID：13274502
> 
> 赞同：1
> 
> 时间：2012-11-07T16:58:50.110
> 
> 标签：ruby-on-rails

我的嵌套资源适用于 form_for 更新，但我需要设置一些切换来更改状态字段。所以我正在使用link_to，并访问url helper。

```
 link_to "toggle", edit_project_expense_path(@project[:id],expense_item[:id]) 
```

路线.rb

```
 resources :projects do
    resources :expenses
  end

  match '/submit_expense/:id' => 'expenses#submit_expense', :as => 'submit_expense' 
```

耙路线

```
edit_project_expense GET    /projects/:project_id/expenses/:id/edit(.:format) expenses#edit 
```

我的问题是：我怎样才能发送：approval_status =“1”，我的link_to？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:44:37.663

```
 link_to "toggle", edit_project_expense_path(@project[:id],expense_item[:id], approval_status: 1) 
```

# checkbox - 为唯一复选框扩展行

> ID：13274506
> 
> 赞同：1
> 
> 时间：2012-11-07T16:58:58.300
> 
> 标签：checkbox, unique, rows

我最近刚刚获得了一个项目来编写一个脚本来比较两个 mysql 数据库并将信息打印到一个 html 表中。目前，我正在尝试按每个人的名字插入一个复选框，并且在选择该人时，与该人有关的行将在该人的名字下方扩展。我将 javascript 结合到我的脚本中来做到这一点，虽然我真的没有经验。The problem I am having is that when any checkbox is selected, all the rows for each individual is expanding instead of the rows pertaining only to the one individual selected.

到目前为止，这是我的代码：

PHP代码：

```
<?php

$link = mysql_connect ($server = "harris.lib.fit.edu", $username = "", $password =     "") or die(mysql_error());

$db = mysql_select_db ("library-test") or die(mysql_error());

$ids = mysql_query("SELECT * FROM `ifc_studylog`") or die(mysql_error()); //not single quotes (tilda apostrophy)

    $x=0;
    $n=0;

    while($row = mysql_fetch_array( $ids ))
    {           
        $tracksid1[$x] = $row['fitID'];
        $checkin[$x] = $row['checkin'];
        $checkout[$x] = $row['checkout'];

        $n++;
        $x++;
    }

$names = mysql_query("SELECT * FROM `ifc_users`") or die(mysql_error()); //not single quotes (tilda apostrophy)

    $x=0;

    while($row = mysql_fetch_array( $names ))
    {           
        $tracksnamefirst[$x] = $row['firstName'];
        $tracksnamesecond[$x] = $row['lastname'];
        $tracksid2[$x] = $row['fitID'];
        $tracksuser[$x] = $row['tracks'];

        $x++;           
    }           
$x=0;   

foreach($tracksid2 as $comparename)
{   
    $chk = strval($x);

?> 
```

JS代码：

```
$(window).load(function() {
    $('.varx').click(function() {
        $('.text').toggle(this.checked);
    });
});​ 
```

PHP代码：

```
<?php       
    echo '<td><input id = "<?=$chk?>" type="checkbox" class="varx" /></td>';
    echo '<td align="center">'.$comparename.'</td>';
    echo'<td align="center">'.$tracksnamefirst[$x].'</td>';
    echo'<td align="center">'.$tracksnamesecond[$x].'</td>';        

    $z=0;

    foreach($tracksid1 as $compareid)
    {
        $HH=0;
        $MM =0;
        $SS =0;

        if($compareid == $comparename)// && $tracks==$tracksuser[$x])
        {

            $SS = sprintf("%02s",(($checkout[$z]-$checkin[$z])%60));
            $MM = sprintf("%02s",(($checkout[$z]-$checkin[$z])/60 %60));
            $HH = sprintf("%02s",(($checkout[$z]-$checkin[$z])/3600 %24));

             //  echo'<td align="center">'.$HH.':'.$MM.':'.$SS.'</td>';

                    echo '</tr>';

             echo '<tr>';
               echo "<td id='txt' class='text' align='center' colspan='2' style='display:none'></td>";
               echo "<td id='txt' class='text' align='center' style='display:none'>".$checkin[$z]."</td>";

               echo  '</tr>';

        }
        echo '<tr>';
        $z++;
        echo  '</tr>';
    }       
$x++;
}           
}   
?> 
```

如果我对这个主题过于含糊，任何帮助表示赞赏和道歉。出于安全原因，用户名和密码已被省略。

# c# - 在引用类型上调用 ToString()

> ID：13274508
> 
> 赞同：0
> 
> 时间：2012-11-07T16:59:02.903
> 
> 标签：c#, object, tostring, reference-type

给定两个对象数组，我需要比较两者之间的差异（当转换为字符串时）。我已将代码简化为以下内容，但问题仍然存在：

```
public void Compare(object[] array1, object[] array2) {
    for (var i = 0; i < array1.Length; i++) {
        var value1 = GetStringValue(array1[i]);
        var value2 = GetStringValue(array2[i]);
    }
}

public string GetStringValue(object value) {
    return value != null && value.ToString() != string.Empty ?
        value.ToString() : "No Value";
} 
```

无论我扔给它什么对象数组，代码都可以正常执行。但是，如果数组中的一项是引用类型，那么会以某种方式更新引用。这会导致以后出现问题。

似乎在针对对象引用调用 ToString() 时会发生这种情况。我已将 GetStringValue 方法更新为以下内容（确保对象是值类型或字符串）并且问题消失了。

```
public string GetStringValue(object value) {
    return value != null && (value.GetType().IsValueType || value is string)
        && value.ToString() != string.Empty ? value.ToString() : "No Value";
} 
```

然而，这只是一个临时的 hack，因为我希望能够覆盖我的引用类型上的 ToString() 方法并比较它们。

如果有人能解释为什么会发生这种情况并提供潜在的解决方案，我将不胜感激。谢谢

**编辑**：

帮助进一步解释我的申请。这段代码取自 NHibernate 事件监听器。我认为问题在于 NHibernate 在类周围添加了自己的包装器来处理延迟加载。这是它抛出的错误：

> 集合 [ *** ] 没有被 flush() 处理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:04:16.097

听起来在引用类型的 ToString() 方法中很可能会产生副作用，这通常是不好的做法，因为这是 .NET 框架经常使用的方法。

要做到这一点，必须满足以下条件：

*   您正在使用您自己或其他第 3 方构建的自定义类。
*   调用 ToString() 时会发生对象的一些修改。

要验证这一点，您可以创建引用类型的实例并在其上调用 ToString()。查看对象是否已更改（GetHashCode() 可能是确定这一点的一种方法）。或者你可以检查代码...

# visual-studio-2010 - 在 Visual Studio 2010 的单元测试中保持变量值

> ID：13274510
> 
> 赞同：0
> 
> 时间：2012-11-07T16:59:07.927
> 
> 标签：visual-studio-2010, unit-testing

我刚刚开始在 vs2010 中进行一些单元测试。我有一个设置私有 int 变量的测试方法，然后是其他几个尝试使用该变量的测试方法。当第一个测试执行时，变量确实被正确设置，但是当它移动到下一个测试时，变量被重置为 0。如何为所有测试保留该变量的值？这是一些示例代码。

```
public MyClassFixture{
  private Controller controller;
  private int id;

  public MyClassFixture(){
    controller = new Controller();
  }

  [TestMethod]
  public void Should_Generate_New_Id(){
    id = controller.GenerateNewId();
    Assert.IsTrue(id > 0);
  }

  [TestMethod]
  public void Should_Get_New_Record(){
    var record = controller.GetNewRecord(id);
    Assert.IsNotNull(record);
  }

} 
```

# php - 将信息压缩成短代码

> ID：13274511
> 
> 赞同：0
> 
> 时间：2012-11-07T16:59:17.130
> 
> 标签：php, encoding, compression

我需要将一些参数组合成一个简短的、不可预测的、可拼写的代码。前任：

*   序列号：WJ-JHA5JK7E9RTAS
*   日期：2013 年 4 月 2 日
*   天数：30
*   有效：真

压缩后的代码可能如下所示：**3xy9b0laiph3s**

我的目标是使代码尽可能短（当然，不会丢失任何信息）。该算法也必须很容易用其他语言实现（因此它不能有疯狂的特定依赖关系）。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:41:09.053

对于任意短字符串，没有足够的信息来应用压缩的广义预测方法。

您需要利用数据的已知特征。

例子：

*   序列号似乎是大写字母和数字 - 每个字符 36 个值 - 和 15 个字符长。这是 36^15 个可能的值，适合 78 位。
*   日期可以转换为自固定日期以来的天数。如果已知所有日期都在 100 年内，则可以将其存储为 16 位。
*   如果天数永远不会超过数年，则可以将其存储为 9 位。
*   有效可以存储在 1 位中。

那是 104 位，可以 Base64 编码为 18 个字符

请注意，序列号通常有一两个校验和字符。如果你知道校验和是如何计算的，你可以省略这个字符并在解码时重新计算它。这可以在这里为您节省一个 Base64 数字。

如果您想让结果更难以预测，而不用担心重度加密，您可以确定性地打乱您的编码字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:07:36.340

大多数情况下，这是通过将数据存储在某处并创建一个 ID 来处理的，然后将其压缩和使用。该系统最常见的用户是短 URL 网站。

*   将数据存储在数据库中并获取行 ID
*   将基数为 10 的行 ID 转换为基数 32 或 64（PHP 中的 base_convert）
*   使用看起来像“4F7c”的新 ID
*   当传递该 ID 时，只需将其取消转换为以 10 为底并在数据库中查找数据

代码：

```
$id = 23590;
print $id;
$hash = base_convert($id, 10, 32);
print $hash;
$id = base_convert($hash, 32, 10);
print $id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:03:03.087

UUencode 或 Base64，但在这些编码中大小写是匹配的。最终，您可以根据自己的目的编辑这些编码（仅限小写字母）。如果您拥有完全相同数量的数据，这将是最简单的解决方案。但不是最小的。

# nhibernate-mapping - 使用 Fluent NHibernate，如何将一个实体映射到不同命名的表？

> ID：13274513
> 
> 赞同：1
> 
> 时间：2012-11-07T16:59:28.863
> 
> 标签：nhibernate-mapping, fluent-nhibernate-mapping

需要明确的是，我希望将一个完整的对象及其所有属性映射到基本同一张表的不同副本。我的搜索向我展示了如何在多个表中拆分对象的属性，但这不是我想要完成的。

这是我的对象模型（精简）：

```
class Customer 
{
   public Guid CustomerGuid { get; set; }
   public string Name { get; set; }
   public Address Address { get; set; }
}

class Address
{
   public Guid AddressGuid { get; set; }
   public string Line1 { get; set; }
   public string State { get; set; }
}

class Application
{
   public Guid ApplicationGuid { get; set; }
   public Address Address { get; set; }
   public DateTime SubmittedDate { get; set; }
} 
```

问题是我需要地址像一个组件一样排序，但要保存到两个单独的表中：CustomerAddress 和 ApplicationAddress，如下所示：

```
table Customer
(
   CustomerGuid
   Name
)

table Application
(
   ApplicationGuid
   SubmittedDate
)

table CustomerAddress
(
   CustomerGuid
   Line1
   State
)

table ApplicationAddress
(
   ApplicationGuid
   Line1
   State
) 
```

我知道我可以使用一对一 (HasOne) 来完成其中一个映射，比如 Customer 到 CustomerAddress，但是我怎样才能对 Application 到 ApplicationAddress 做同样的事情呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:13:28.490

用于客户和模拟应用

```
class CustomerMap : ClassMap<Customer>
{
    public CustomerMap()
    {
        Id(x => x.Id, "CustomerGuid").GeneratedBy.GuidComb();

        Map(x => x.Name);
        Join("CustomerAddress", join =>
        {
            join.KeyColumn("CustomerGuid");
            join.Component(x => x.Address, c =>
            {
                c.Map(x => x.Line1);
                c.Map(x => x.State);
            });
        });
    }
} 
```

# jquery - 扩展自定义 jquery 事件回调？

> ID：13274514
> 
> 赞同：0
> 
> 时间：2012-11-07T16:59:29.843
> 
> 标签：jquery, javascript-events

我有这个在所有页面上触发的自定义插件事件回调

```
$(document).on('pjax:complete', all.myfunction); 
```

我想扩展 myfunction：调用 all.myfunction 然后是特定代码

```
//  my specific page  
$(document).on('pjax:complete', specific.myfunction);

specific.myfunction = function() { 
    all.myfunction();
    /* code relative to this specific page */
} 
```

有没有更清洁的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:02:05.380

如果你只是想要额外的功能，你可以添加一个新的处理程序。它不会覆盖现有的处理程序

```
$(document).on('pjax.complete', specific.myfunction); 
```

一个细节是不能保证处理程序是按特定顺序调用的，即使在实践中，它们是按照安装顺序调用的。因此，如果您需要保证首先调用第一个处理程序，则必须执行以下操作。

```
$(document).off('pjax.complete', all.myfunction);
$(document).on('pjax.complete', function() {
    all.myfunction();
    specific.myfunction();
}); 
```

# javascript - Facebook 活动 + rsvp 参加

> ID：13274523
> 
> 赞同：1
> 
> 时间：2012-11-07T17:00:18.923
> 
> 标签：javascript, facebook

我正在尝试使用 fb.api 邀请用户参加 Facebook 活动：

```
FB.api('/345345345345453/attending', 'post', function (data) {
                    console.log(data);
                }); 
```

我也试过这个，但也没有帮助：

```
FB.api('/345345345345453/attending&access_token + '/ACCESSTOKEN'', 'post', function (data) {
                    console.log(data);
                }); 
```

我在日志中收到一条消息：

```
"(#100) User must be able to RSVP to the event." 
```

任何人都可以帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:32:27.323

如果你想邀请用户，你应该使用`invited`not `attending`。[请参阅文档](https://developers.facebook.com/docs/reference/api/event/#invited)。使用会`attending`自动将他们标记为参加您的活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:29:18.247

好吧，我创建了一个“秘密”的 Facebook 事件。

# hibernate - 模式中特定表的休眠逆向工程

> ID：13274524
> 
> 赞同：0
> 
> 时间：2012-11-07T17:00:21.920
> 
> 标签：hibernate, reverse-engineering, hibernate-mapping

我已经安装了带有 eclipse 的 Hibernate 工具来进行反向工程。现在，我想为模式中的一组新表生成 POJO 和 xml 文件。当我右键单击并“休眠代码生成配置”时，它会过滤架构而不是表格。结果，模式中的整个表都被反向工程了。我如何反转 engg 特定的表集？

请问有什么输入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:28:13.853

你可能在想这个：

hibernate.hbm2ddl.auto=创建

> 创建 SessionFactory 时自动验证模式 DDL 或将其导出到数据库。使用 create-drop，当 SessionFactory 显式关闭时，数据库模式将被删除。例如验证 | 更新 | 创建 | 创建删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T08:01:42.933

在 Eclipse 中，您可以创建一个 xxx.reveng.xml（文件名可以根据需要更改），如下所示。

例如

```
<hibernate-reverse-engineering>
<schema-selection match-schema="TRADE"/>
<table-filter match-name="PEOPLE"/> 
<table-filter match-name="PRODUCT"/> </hibernate-reverse-engineering> 
```

然后可以在 Hibernate 代码生成配置弹出框的 reveng.xml 字段中设置上述文件名。

然后它将为 TRADE 模式下的两个表 PEOPLE 和 PRODUCT 生成 POJO olny。

# ruby-on-rails - 无法连接到数据库时，DelayedJob 静默失败

> ID：13274526
> 
> 赞同：2
> 
> 时间：2012-11-07T17:00:25.723
> 
> 标签：ruby-on-rails, delayed-job, ruby-on-rails-2

所以，我有一个大型 Rails 应用程序，它使用 delay_job 向用户发送电子邮件和 SMS。

有时，delayed_job 进程将停止工作，而日志上没有任何消息。我终于查明了问题，因为delayed_job 进程在无法连接到数据库时崩溃。

我可以进行任何配置，以便重试连接而不是崩溃？我试过`reconnect: true`在`database.yml`文件上设置没有成功。

我正在寻找的另一个选择可能是使用像上帝或 bluepill 这样的监控工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T02:16:49.917

当您开始延迟作业时尝试使用 -m 标志 - 这应该启动一个单独的监控进程，根据我的经验，该进程非常适合重新启动该进程。

# xml - 如何通过浏览器更改xml

> ID：13274529
> 
> 赞同：1
> 
> 时间：2012-11-07T17:00:36.897
> 
> 标签：xml, xslt, browser, comments, conditional

我想根据浏览器更改我的 XML 中的一些规则。例如，在使用 IE 时，'fontcolor' 应该是黑色的。到目前为止，我用谷歌搜索了它，我发现使用 XSLT 可以做到这一点。但不幸的是，在 1/2 天后谷歌搜索/尝试和错误之后，我仍然不知道如何做到这一点。

有人可以帮我解决这个问题吗？任何帮助将不胜感激。谢谢 ！！

埃蒂D。

我当前的 XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="test.xsl"?>
<skin version='1.1' name='player' author='me'>
    <components>
        <component name='control'>
            <settings>
                <setting name='fontsize' value='10' />
                <setting name='fontcolor' value='0xffffff' /> <!-- if IE: 0x000000-->
                //..... 
```

我当前的 XSL：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<!-- .... -->
<xsl:template match="/">
  <xsl:comment>
    <![CDATA[[if !IE]>show non-iE text<![endif]]]>
  </xsl:comment>

</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:15:31.410

我认为没有一种好方法可以检测仅使用 XSLT 的浏览器。尽管 XSLT 最初设计为在浏览器内的 XML 上执行，但实际上并非如此。我认为您最好[在 Javascript 中](http://www.quirksmode.org/js/detect.html)进行浏览器检测。

从那里，您可以直接从 JavaScript 有条件地输出您想要的 XML，或者您可以将浏览器类型作为外部变量传递给您的 XSLT 并让它处理条件逻辑。

# wiql - 在 TFS 2010 工作项查询中，我可以添加两个字段值作为“值”吗？

> ID：13274535
> 
> 赞同：2
> 
> 时间：2012-11-07T17:01:15.710
> 
> 标签：wiql

**我想为我们的 TFS 用户创建一个团队查询，该查询显示 [剩余小时数] 和 [已完成小时数] 字段的总和超过 [原始估计] 值的所有任务项。**

现在，虽然我可以在 WIQL 中添加一个子句，将一个字段与另一个字段的值进行比较**（**我不得不在堆栈交换中问你们好心的人如何在[如何编写 TFS 2010 工作项查询子句中执行其值是字段值吗？](https://stackoverflow.com/questions/5870559/how-do-i-write-a-tfs-2010-work-item-query-clause-whos-value-is-a-field-value)[PVitt](https://stackoverflow.com/users/128886/pvitt)以令人钦佩的礼貌回答了这个问题——因为我根本没有正确阅读“运算符”下拉菜单！）

我正在努力寻找一种查询两个字段之和的方法。

例如：

此查询子句有效；

```
And Completed Work > [Field] Remaining Work 
```

我真正想要的是类似的东西；

```
And Completed Work > [Field] Remaining Work+Original Estimate 
```

问题是这不能完成，或者我对将两个字段值相加的正确语法的*疯狂猜测*都是错误的。

指定用**+**分隔的两个文件名只会产生**TF51005 错误** ![TF51005 对话框](../Images/af12e8e3c4d3975fed304486efcc2686.png)

类似地猜测像 Sum(Remaining Work+Original Estimate) 或 Sum(Remaining Work,Original Estimate) 这样的“宏”会得到相同的结果。

**那么这甚至可能吗？如果是这样，我会怎么做？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T16:04:24.670

你想要的是不可能的。您的选择是使用：1）对象模型编写 C# 代码，从查询中迭代工作项并自己进行数学运算 2）在 excel 中运行查询并在 excel 中进行计算和过滤 3）使用 ssrs 创建一份为您计算的报告

如果您认为这很重要，您可以随时在用户语音上发表您的建议：[https ://visualstudio.uservoice.com](https://visualstudio.uservoice.com)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T21:07:31.523

添加一个新的隐藏字段来存储总和，安装[TFS 聚合器](http://tfsaggregator.codeplex.com/)并将其设置为在更新工作项时更新隐藏字段。

然后对新字段执行查询。

在更新具有新值的总和之间可能会有几分钟的延迟。

```
<AggregatorItem operationType="Numeric" operation="Sum" linkType="Self" workItemType="Task">
<TargetItem name="Total Work"/>
<SourceItem name="Remaining Work"/>
<SourceItem name="Original Estimate"/>
</AggregatorItem> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-20T15:09:21.257

如果您只关注结果/不介意在 TFS 之外进行（短途）旅行，我所做的是运行 TFS 查询以生成我需要的单个结果，然后只需选择全部/复制/粘贴结果网格到Excel。在那里，您可以访问所有 Excel 的 suming 和 auto（col headers）/[高级过滤](http://office.microsoft.com/en-us/excel-help/filter-by-using-advanced-criteria-HP005200178.aspx)功能。您也可以使用此方法定义引用其他单元格的条件。也可以使用“If()”fcn 来（包含/排除）直接公式中的单元格值。W /一些Excel花哨的步法，甚至应该能够保留总和fcns btw运行/粘贴。

# objective-c - 目标 C 架构 i386 的未定义符号：“_secTrustEvaluate”

> ID：13274536
> 
> 赞同：0
> 
> 时间：2012-11-07T17:01:24.053
> 
> 标签：objective-c, ios, xcode4.5

我正在尝试使用[本](http://alex.tapmania.org/2011/09/check_conf_prof_is_installed_ios.html)教程检查手机是否在 iPhone 上安装了配置文件

当我写这一行时，我遇到了以下问题：

```
err = secTrustEvaluate (trust,&trustResult); 
```

我收到以下警告

```
implicit declaration of function 'secTrustEvaluate' is invalid in C99 
```

当我尝试构建时出现以下错误

```
Undefined symbols for architecture i386:
  "_secTrustEvaluate", referenced from:
      -[<Class name> <function name>] in <class object.o>
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我还包括了 Security.framework 框架（它删除了几个与此类似的问题）

为什么这不起作用？

谢谢！

# c# - 将可选参数传递给 autofac

> ID：13274547
> 
> 赞同：0
> 
> 时间：2012-11-07T17:02:20.790
> 
> 标签：c#, autofac

我正在尝试使用 Autofac 并注册以下类，该类接收参数之一作为可选参数（或者更确切地说为 null）。我的课程是：

```
class BaseSpanRecord : ISpanRecord
{
    public BaseSpanRecord(RecordType recordType, List<SpanRecordAttribute> properties)
    {
        RecordType = recordType;
        Properties = properties;
    }
} 
```

这里*RecordType*是一个枚举，而*SpanRecordAttribute*是一个只有属性的类，我不想为其创建任何接口。

构造函数中*RecordType*和*Properties*是接口*ISpanRecord*的两个公共属性， 这个类可以在程序的不同地方通过以下方式实例化：

```
ISpanRecord spanFileRecord = new BaseSpanRecord(recordType, null); 
```

或者

```
ISpanRecord spanFileRecord = new BaseSpanRecord(recordType, recordAttributeList); 
```

我应该如何尝试在 Autofac 容器中注册它以便它可以处理上述两种情况？或者我应该改变*BaseSpanRecord*类的编写方式以使其注册更容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:26:45.450

使用 a`TypeParameter`来解析实例时只要提供类型信息`null`就可以了。您不需要`UsingConstructor`在注册时使用该方法。

直接创建 TypedParameter 实例：

```
var recordTypeParam = new TypedParameter(typeof(RecordType), RecordType.Something);
var propertiesParam = new TypedParameter(typeof(List<SpanRecordAttribute>), null);
var record = container.Resolve<ISpanRecord>(recordTypeParam, propertiesParam); 
```

使用`TypedParameter.From`辅助方法：

```
var record = container.Resolve<ISpanRecord>(TypedParameter.From(RecordType.Something), TypedParameter.From((List<SpanRecordAttribute>)null)); 
```

请注意，`null`被强制转换`List<SpanRecordAttribute>`为允许使用辅助方法进行类型推断。

# jquery - 在 ajax 回调函数的函数内返回数组的最佳方法是什么？

> ID：13274551
> 
> 赞同：0
> 
> 时间：2012-11-07T17:02:38.110
> 
> 标签：jquery

我在从另一个函数内部的返回 ajax 回调函数中获取返回的数组时遇到问题。问题是在第一个周期内没有接收到数组数据.....

```
 var testFile = $("#selection").val();
              var testData = getTestData(testFile); 
              alert(testData); // not working during the first time I run the function, empty

              function getTestData(testF)
              {
                  var testArray = [];

                  $.getJSON("test.php",{fileTest: testF}, function(data)
                  {
                         $.each(data, function(index, value)
                         {
                              if(value == "")
                              {
                              }else
                              {
                                 testArray[index] = value;
                              }
                         }
                   });
                   alert(testArray); // working I see the values
                   return testArray; // not working the first time running this function
              } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:08:23.030

Ajax 调用是异步的。这意味着什么？

当你调用`$.getJson`刚刚*启动的 HTTP 请求*时，它不会立即填写`testArray`。相反，它会在 HTTP 请求完成后的`testArray` *某个未指定的时间点*填充。

您看到其中一个警报但看不到另一个警报的原因很简单：当您单击第一个警报的“确定”按钮时，请求已完成并且您的答案已准备好。我敢打赌，您看到的**第一个**`getTestData`警报（失败）实际上是 inside 。以下是可能的事件顺序：

1.  你打电话`getTestData()`
2.  你开始一个 HTTP 请求`$.getJSON()`
3.  调用内部`alert(testArray)` *getTestData*，显示警报。由于`testArray`尚未填写，因此您有一个空数组。
4.  当您坐在那里查看警报时，`$.getJSON()`呼叫完成并填写`testArray`。
5.  您单击警报框上的确定。
6.  `return testArray;`运行，返回填充的值
7.  您`alert`的第 3 行已运行，显示数组

# python - python 3.3 套接字类型错误

> ID：13274553
> 
> 赞同：3
> 
> 时间：2012-11-07T17:02:59.920
> 
> 标签：python, sockets, python-3.x, typeerror

我正在尝试制作时间戳服务器和客户端。客户端代码为：

```
from socket import *

HOST = '127.0.0.1' # or 'localhost'
PORT = 21567
BUFSIZ = 1024
ADDR = (HOST, PORT)

tcpCliSock = socket(AF_INET, SOCK_STREAM)
tcpCliSock.connect(ADDR)

while True:
    data = input('> ')
    if not data:
        break
    tcpCliSock.send(data)
    data = tcpCliSock.recv(BUFSIZ)
    if not data:
        break
    print(data.decode('utf-8'))

tcpCliSock.close() 
```

服务器代码是：

```
from socket import *
from time import ctime

HOST = ''
PORT = 21567
BUFSIZ = 1024
ADDR = (HOST, PORT)

tcpSerSock = socket(AF_INET, SOCK_STREAM)
tcpSerSock.bind(ADDR)
tcpSerSock.listen(5)

while True:
    print('waiting for connection...')
    tcpCliSock, addr = tcpSerSock.accept()
    print('connected from: ', addr)

    while True:
        data = tcpCliSock.recv(BUFSIZ)
        if not data:
            break
        tcpCliSock.send('[%s] %s' % (bytes(ctime(), 'utf-8'), data))

    tcpCliSock.close()
tcpSerSock.close() 
```

服务器工作正常，但是当我从客户端向服务器发送任何数据时，出现以下错误：

```
File "tsTclnt.py", line 20, in <module>
    tcpCliSock.send(data)
TypeError: 'str' does not support the buffer interface 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T20:17:50.590

您需要`data`使用适当的代码页将字符串编码到缓冲区中。例如：

```
data = input('> ')
if not data:
    break
tcpCliSock.send(data.encode('utf-8')) 
```

服务器代码也需要更改：

```
response = '[%s] %s' % (ctime(), data.decode('utf-8'))
tcpCliSock.send(response.encode('utf-8')) 
```

更多信息请访问：

[如何在 Python 3.1 中将字符串转换为缓冲区？](https://stackoverflow.com/questions/2176511/how-do-i-convert-a-string-to-a-buffer-in-python-3-1)

# sql - SQL 转换错误

> ID：13274556
> 
> 赞同：0
> 
> 时间：2012-11-07T17:03:02.737
> 
> 标签：sql, sql-server-2008

我真的需要第二双眼睛……我有一个带有变量的存储过程：

```
DECLARE @date_period_end int 

IF @date_period_end = '' or @date_period_end is null  
BEGIN 
    SET @date_period_end = 'DATEDIFF(dd, ''1/1/1753'', CONVERT(datetime,getdate())) + 639906 ' 
END 
```

这是我执行时返回的错误 SQL：

> 将 varchar 值 'DATEDIFF(dd, '1/1/1753', CONVERT(datetime,getdate())) + 639906 ' 转换为数据类型 int 时转换失败。

我很确定我错过了或在某处添加了不正确数量的引号。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:06:44.453

您的`DATEDIFF`函数周围有引号，使其成为字符串文字，我很确定这不是您想要的。试试这个：

```
DECLARE @date_period_end int 

IF @date_period_end = '' or @date_period_end is null  
BEGIN 
    SET @date_period_end = DATEDIFF(dd, '1/1/1753', CONVERT(datetime,getdate())) + 639906
END 
```

* * *

旁注：我不确定您为什么要将整数与空字符串 ( `@date_period_end = ''`) 进行比较，以及您期望它会做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:06:57.533

看起来你有一个关于 DATEDIFF(dd, '1/1/1753', CONVERT(datetime,getdate())) + 639906 的报价

删除引号，它应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T17:09:29.227

试试这个：

```
BEGIN
   SET @date_period_end = DATEDIFF(dd, '1/1/1753', CONVERT(datetime,getdate())) + 639906  
END 
```

DATEDIFF() 周围有不正确的引号，虚拟日期周围有双引号

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T07:35:58.430

```
DECLARE @date_period_end int

IF @date_period_end = '' or @date_period_end is null  
BEGIN 
SET @date_period_end = DATEDIFF(dd,'1/1/1753',CONVERT(datetime,getdate())) + 639906
END 
```

您还可以使用以下语句以及上面的代码查看此变量的值：

```
Print @date_period_end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T17:11:27.973

删除多余的引号就可以了-我已经使用 ISNULL 简化了您的 IF 检查

```
DECLARE @date_period_end int 

IF ISNULL(@date_period_end,'') = '' 
BEGIN 
    SET @date_period_end = DATEDIFF(dd, '1/1/1753', CONVERT(datetime,getdate())) + 639906 
END 
```

# git - 跨重命名的差异内容更改

> ID：13274557
> 
> 赞同：3
> 
> 时间：2012-11-07T17:03:07.923
> 
> 标签：git

我的项目历史如下所示：

* * *

*   编辑文件 a, b
*   提交，rev1
*   重命名文件 a, b -> c, d
*   提交，rev2
*   编辑文件 c, d
*   提交，rev3

* * *

我想查看我在这些提交中对两个文件所做的编辑的差异，但这`git diff rev0..rev3`没有帮助，因为我只看到文件 a 和 b 的删除，以及对 c 和 d 的所有编辑作为一个大添加与文件的创建混在一起。

如何查看包含 rev1 和 rev3 的差异，其中 ((a,c), (b,d)) 被视为相同的文件，而差异中没有文件重命名混乱？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:20:59.320

使用`git diff -M`.

它还可以进行微调 -`git diff -M90%`检测 90% 相似的文件。（不确定`git status`默认情况下使用什么）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:22:57.503

```
git diff -C 
```

将在重命名之间进行区分，并且还会检测副本。

正如上面的答案中提到的

```
git diff -M 
```

检测只是重命名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-11T11:58:28.937

`git diff`将接受类型的参数`<rev>:<filename`。用于`git log --follow <file>`查找您想要的版本以及该版本的文件名称。例如（在我的代码上，它过去被转换为 C++）

```
git diff 44308:./draw.c draw.cpp 
```

对你来说可能是

```
git diff rev1:./a c 
```

我发现我需要指定文件的路径，否则 git 本身给了我一个提示。

# adb - adb pull 命令从设备到电脑

> ID：13274559
> 
> 赞同：0
> 
> 时间：2012-11-07T17:03:14.300
> 
> 标签：adb

如果 adb pull 操作中目录有空格，说 adb pull data/tombstones "c:/Program files/myApp"

除了在“c://Program Files/myApp”上添加引号来完成同样的事情之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:32:34.990

您可以尝试使用文件夹的短名称。因为`program files`它是`progra~1`。你可以看到短名称`dir /x`。

我从来没有用亚行尝试过，但我认为它应该可以工作。

# objective-c - 在 UITableView 中自定义索 引/节栏的字体/背景颜色

> ID：13274562
> 
> 赞同：20
> 
> 时间：2012-11-07T17:03:30.480
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我在另一个线程中读到，您可以在 UITableView 添加 CALayer 中调整索引栏（即 AZ # 滚动条）的字体或背景颜色。我的应用程序将在 iOS 5 及更高版本上运行，并且由于我在 Apple 文档中没有看到任何关于此的内容，是否可以说如果不创建自定义表格视图就不可能？

如果这是可能的（并且苹果可以接受），我将如何去做？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-07T17:15:10.620

从 iOS 6.0 开始，有两种方法可以让您更改节索引的颜色和拖动节索引时显示的背景。

```
if ([tableView respondsToSelector:@selector(setSectionIndexColor:)]) {
    tableView.sectionIndexColor = ... // some color
    tableView.sectionIndexTrackingBackgroundColor = ... // some other color
} 
```

当然，这只会在设备具有 6.0 或更高版本时执行。在 iOS 5.x 下，什么都不会改变。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-10T06:12:34.343

**这是swift 2+的代码**

```
self.tableView.sectionIndexTrackingBackgroundColor = CustomColor
// background color while the index view is being touched
self.tableView.sectionIndexBackgroundColor = CustomColor
// title/text color of index items 
self.tableView.sectionIndexColor = CustomColor 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-23T09:59:20.533

对于 Swift 3.1：

```
 self.tblViewForContacts.sectionIndexTrackingBackgroundColor = self.view.backgroundColor
 self.tblViewForContacts.sectionIndexBackgroundColor = self.view.backgroundColor 
```

# internet-explorer - 用 span 类样式替换字符：IE 与 Mozilla 不同

> ID：13274563
> 
> 赞同：0
> 
> 时间：2012-11-07T17:03:44.373
> 
> 标签：internet-explorer, replace, html

```
<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="./jquery.js"></script>
    <style type="text/css">
      .spades { color: blue; font-family: Arial, Verdana, Tahoma, sans-serif; font-size: 120%; font-weight:bold }
      .hearts { color: red; font-family: Arial, Verdana, Tahoma, sans-serif; font-size: 120%; font-weight:bold }
      .diams { color: #FF6600; font-family: Arial, Verdana, Tahoma, sans-serif; font-size: 120%; font-weight:bold }
      .clubs { color: #009D00; font-family: Arial, Verdana, Tahoma, sans-serif; font-size: 120%}
    </style>
  </head>
  <body onload="bid_done('2C','TESTSTRING')">
    <table id="bidsdone" border="1">
      <caption><b>Bids done:</b></caption>
      <tr>
      </tr>
    </table>
    TEST3
    <div>
      <p id="clu"><span class="clubs">&clubs;</span></p>
      <p id="dia"><span class="diams">&diams;</span></p>
      <p id="hea"><span class="hearts">&hearts;</span></p>
      <p id="spa"><span class="spades">&spades;</span></p>
    </div>

  </body>
  <script type="text/javascript">
      function add_bid_done() {
        var table=document.getElementById("bidsdone");
        var row=table.insertRow(-1);
        var cell1=row.insertCell(0);
      }

      function bid_done(x,bc) {
        add_bid_done();
        var bid_abbr = x;
        var bidsdoneRows=1;
        var bidsdoneCell=0;
        var rows=document.getElementById("bidsdone").rows;
        var rowCells=rows[bidsdoneRows].cells;
        x=x.replace(/C/g,document.getElementById("clu").innerHTML);
        x=x.replace(/D/g,document.getElementById("dia").innerHTML);
        x=x.replace(/H/g,document.getElementById("hea").innerHTML);
        x=x.replace(/S/g,document.getElementById("spa").innerHTML);
        x=x.replace(/N/g,"NT");
        rowCells[bidsdoneCell].innerHTML=x;
        rowCells[bidsdoneCell].title=bc;
        rowCells[bidsdoneCell].abbr=bid_abbr;
        rowCells[bidsdoneCell].setAttribute('onclick', 'alert(title)');
      }
  </script>
</html> 
```

以上代码在 Firefox 10.0.4 中有效，但在 IE7 中无效。（这只是显示我遇到的问题的代码的一部分。）我在 IE7 中有两个问题：

1.  它显示“2<♠PANT class=clubs>♣♠PANT>”是 Green Clubs 字符。

2.  onclick 似乎不起作用。

谢谢，科恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:15:49.997

当您一个接一个地进行替换时，来自一个替换的 HTML 代码将受到其他替换的影响。由于`innerHTML`在不同的浏览器中返回的值不同，结果也不同。

一些浏览器以大写形式返回 HTML 标签，因此当`C`in 中的字符`'2C'`被大写的 SPAN 标签替换时，其他替换将替换字符串中的`S`and `N`。

一次进行所有替换，然后一个替换不会影响另一个：

```
x = x.replace(/[CDHSN]/g, function(m){
  switch (m) {
    case 'C': return document.getElementById("clu").innerHTML;
    case 'D': return document.getElementById("dia").innerHTML;
    case 'H': return document.getElementById("hea").innerHTML;
    case 'S': return document.getElementById("spa").innerHTML;
  }
  return "NT";
}); 
```

你没有任何`title`变量，所以`alert(title)`会失败。我想你想显示元素的标题：

```
rowCells[bidsdoneCell].onclick = function () { alert(this.title); }; 
```

# r - !duplicated() 和 unique() 之间的区别

> ID：13274565
> 
> 赞同：1
> 
> 时间：2012-11-07T17:03:49.763
> 
> 标签：r

我不知道R中这两个函数之间有什么区别。我有一个data.frame，我想删除与给定列中重复值对应的行；

```
 Acc         Probe             Coord_homol
1   NR_004442.1 225541_at~122     391
2   NM_028059.2 241348_at~444     4642
3   NM_028059.2 241348_at~468     4666
4   NM_001114   212306_at~4357    5034
5   NM_010573.2 230472_at~402     1987
6   NM_029633.2 212306_at~4357    4289
7   NM_00108196 212306_at~4357    4292
8   NM_029891.2 205004_at~3421    2963
9   NM_029891.2 205004_at~3635    3173
10  NM_007892.2 221586_s_at~1356 1257
11  NR_036613.1 208672_s_at~829  1301
12  NR_036613.1 208673_s_at~1472 1854
13  NM_011078.3 212726_at~3872    5175
14  NM_011078.3 212726_at~3887    5190
15  NM_013915.3 207164_s_at~1523 2911 
```

在这种情况下，我想删除第 7 行，因为探针与第 6 行相同（具有相同探针的行不必是连续的）。

我首先尝试了 unique()，后来发现重复了。但是如果下面的命令

```
dat[!duplicated(dat$probe),]

dat[unique(dat$probe),] 
```

在结果 data.frame 中给出相同数量的行，结果是不一样的。

我尝试了一个更简单的案例，如下所示：

一个简单的data.frame：

```
> dat
   probe val
1    aaa  10
2    bbb  12
3    ccc  45
4    ddd  32
5    aaa  42
6    eee  10
7    fff  13
8    ccc  85
9    aaa  75
10   ddd  64 
```

使用 !duplicated(): 这似乎是我想做的；

```
dat[!duplicated(dat$probe),]

  probe val
1   aaa  10
2   bbb  12
3   ccc  45
4   ddd  32
6   eee  10
7   fff  13 
```

使用唯一（）：

```
dat[unique(dat$probe),] 
```

我得到：

```
 probe val
1   aaa  10
2   bbb  12
3   ccc  45
4   ddd  32
5   aaa  42
6   eee  10 
```

不是我想要的；

但是 unique() 到底在做什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:42:43.090

`unique`正在返回一个因子，并且该因子的数字级别用于索引而不是标签。

```
uni <- unique(dat$probe)
str(uni)
 Factor w/ 6 levels "aaa","bbb","ccc",..: 1 2 3 4 5 6 
```

就像您正在这样做：

```
nums <- as.numeric(unique(dat$probe))
dat[nums,]
  probe val
1   aaa  10
2   bbb  12
3   ccc  45
4   ddd  32
5   aaa  42
6   eee  10 
```

`unique`正在返回一个因子，因为在这种情况下我们将一个因子放入其中。它并不总是返回因子。例如，`unique(as.character(dat$probe))`将返回字符。

# qt - 确定注册用户类型的超类

> ID：13274567
> 
> 赞同：1
> 
> 时间：2012-11-07T17:04:08.537
> 
> 标签：qt

我试图确定哪些类是从几种不同类型中子类化的。例如，如果 E1 扩展 A，E2 扩展 A，E3 扩展 B，我想查找从 A 子类化的所有类并返回类型 E1 和 E2 的列表。这些类型在 QMetaSystem 中注册。

我的第一次尝试是遍历用户声明的类型，实例化它，并获取超类名称：

```
int type = QMetaType::User;
while( QMetaType::isRegistered(type) ) {
    QObject *o = (QObject*)QMetaType::construct(type);
    QString parent = o->metaObject()->superClass()->className();
} 
```

当我写它并且没想到它会起作用时，这似乎是一个坏主意。不出所料，它在尝试获取元对象时会出现段错误。

是否可以从 QMetaType 获取我需要的信息，或者是否有其他方式获取此信息？

**更新**

问题似乎在于尝试遍历所有用户类型。在我注册我的类型之前，一些 Qt 类型似乎在我之前注册了。具体来说，注册的两个类型是QPaintBufferCacheEntry（typeId = 256）和QPaintBufferCacheEntryV2（typeId = 257）。我可以很好地初始化对象，但是当我尝试获取元对象时它会崩溃，所以我认为强制转换是非法的。我不太确定这些是在哪里注册的，因为我的代码库没有明确地这样做。

我认为这意味着迭代和构造每个用户类型是不安全的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:36:01.807

你的想法是正确的。这应该为您提供父类的名称：

```
QObject *o = (QObject*)QMetaType::construct(type);
QString parent = o->metaObject()->superClass()->className(); 
```

为了让它工作，你的类必须已经`Q_DECLARE_METATYPE(Type)`用`qRegisterMetaType()`. 情况`QMetaType::isRegistered(type)`确实如此。

您的用户定义的类还必须继承自 QObject（直接或不直接）**，并**在其定义中包含[Q_OBJECT 宏。](http://qt-project.org/doc/qt-4.8/qobject.html#Q_OBJECT)这可以解释你的段错误。

`superClass()`如果没有父类也可以返回 0，但是这里你所有的类至少应该继承 QObject。

还要`QObject::inherits(const char * className)`知道一个对象是否属于一个类继承，甚至是间接继承自 className。

# xml - 如何为同级的xml节点分配ID

> ID：13274572
> 
> 赞同：5
> 
> 时间：2012-11-07T17:04:25.247
> 
> 标签：xml, tsql, insert, dml

我正在尝试修改第三方 xml，以便所有元素都具有来自 T-SQL 的 Id。

这是原始的 xml（部分）：

```
<Tables>
   <Table Type="LineItem">
      <TableRow>
        <Field Name="LI_NominalCode" Type="wd_lit_nominalcode">244234</Field>
        <Field Name="LI_NominalDesc" Type="lit_nominaldesc">RENT RECEIVABLE - INTERNAL</Field>
        <Field Name="LI_Account" Type="lit_wd_account" />
        <Field Name="LI_AccountDesc" Type="lit_wd_accountdesc" />
        <Field Name="LI_SecondAccount" Type="lit_wd_2ndaccount" />
        <Field Name="LI_SecondAccountDesc" Type="lit_wd_2ndaccountdesc" />
        <Field Name="LI_NetValue" Type="lit_vatexcludedamount">4522.89</Field>
        <Field Name="LI_EnergyUsage" Type="wd_energyusage">56666</Field>
        <Field Name="LI_EnergyType" Type="wd_energytype">ELECTRICITY</Field>
      </TableRow>
      <TableRow>
        <Field Name="LI_NominalCode" Type="wd_lit_nominalcode">150021</Field>
        <Field Name="LI_NominalDesc" Type="lit_nominaldesc">Rent Building 1</Field>
        <Field Name="LI_Account" Type="lit_wd_account" />
        <Field Name="LI_AccountDesc" Type="lit_wd_accountdesc" />
        <Field Name="LI_SecondAccount" Type="lit_wd_2ndaccount" />
        <Field Name="LI_SecondAccountDesc" Type="lit_wd_2ndaccountdesc" />
        <Field Name="LI_NetValue" Type="lit_vatexcludedamount">456.37</Field>
        <Field Name="LI_EnergyUsage" Type="wd_energyusage">2805.00</Field>
        <Field Name="LI_EnergyType" Type="wd_energytype">ELECTRICITY</Field>
      </TableRow>
      <TableRow>
        <Field Name="LI_NominalCode" Type="wd_lit_nominalcode">2342341</Field>
        <Field Name="LI_NominalDesc" Type="lit_nominaldesc">Rent Building 2</Field>
        <Field Name="LI_Account" Type="lit_wd_account" />
        <Field Name="LI_AccountDesc" Type="lit_wd_accountdesc" />
        <Field Name="LI_SecondAccount" Type="lit_wd_2ndaccount" />
        <Field Name="LI_SecondAccountDesc" Type="lit_wd_2ndaccountdesc" />
        <Field Name="LI_NetValue" Type="lit_vatexcludedamount">355</Field>
        <Field Name="LI_EnergyUsage" Type="wd_energyusage">6900</Field>
        <Field Name="LI_EnergyType" Type="wd_energytype">ELECTRICITY</Field>
      </TableRow>
    </Table>
    <Table Type="BankAccountTable" />
    <Table Type="VATTable" />
  </Tables> 
```

如您所见，`<Table>`元素没有 Id，因此在此过程的后期很难识别它们。

我想创建一个循环来遍历所有`<Table>`元素并执行如下代码段：

```
set @xml.modify('
insert attribute ID {sql:variable("@idString")}
into (/Documents/Document/Invoice/Tables/Table[@Type="LineItem"]/TableRow)[sql:variable("@id")]') 
```

问题出在最后一个sql变量上，错误是：

> XQuery [modify()]：只有 'http://www.w3.org/2001/XMLSchema#decimal?'、'http://www.w3.org/2001/XMLSchema#boolean?' 或 'node()*' 表达式允许作为谓词，找到 'xs:string ?'

这很好用，但我不想总是更改同一行（第 1 行）。

```
set @xml.modify('
insert attribute ID {sql:variable("@idString")}
into (/Documents/Document/Invoice/Tables/Table[@Type="LineItem"]/TableRow)[1]') 
```

顺便说一句，如果我使用 int 变量而不是这样的字符串：

```
set @xml.modify('insert attribute ID {sql:variable("@idString")} 
                 into (/Documents/Document/Invoice/Tables/Table[@Type="LineItem"]/TableRow)[sql:variab‌​le("@idInt")]')` 
```

我得到另一个错误：

> XQuery [modify()]: 'insert' 的目标必须是单个节点，找到 'element(TableRow,xdt:untyped) *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:40:35.733

您可以将变量`@id`与函数进行比较`position()`。

```
declare @id int
declare @RowCount int
select @RowCount = @xml.value('count(/Tables/Table[@Type="LineItem"]/TableRow)', 'int')

set @id = 1

while @id <= @RowCount
begin
  set @xml.modify('
    insert attribute ID {sql:variable("@id")}
    into (/Tables/Table[@Type="LineItem"]/TableRow[position()=sql:variable("@id")])[1]')

  set @id = @id + 1
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:25:56.857

我唯一能想到的是一个包含所有可能行的存储过程（听说有人冲马桶？）

```
if (@row = 1)
BEGIN
    set @xml.modify('
        insert attribute ID {sql:variable("@id")}
        into (/Documents[1]/Document[1]/Invoice[1]/Tables[1]/Table[@Type="LineItem"][1]/TableRow)[1]
        ')
END
ELSE if (@row = 2)
BEGIN
    set @xml.modify('
        insert attribute ID {sql:variable("@id")}
        into (/Documents[1]/Document[1]/Invoice[1]/Tables[1]/Table[@Type="LineItem"][1]/TableRow)[2]
        ')
END 
ELSE if (@row = 3)
BEGIN
    set @xml.modify('
        insert attribute ID {sql:variable("@id")}
        into (/Documents[1]/Document[1]/Invoice[1]/Tables[1]/Table[@Type="LineItem"][1]/TableRow)[3]
        ')
END 
```

希望不要超过200...

# sql-server - Entity Framework 5 SaveChanges 不会将数据保存到所有相关表中

> ID：13274573
> 
> 赞同：0
> 
> 时间：2012-11-07T17:04:30.930
> 
> 标签：sql-server, visual-studio-2012, entity-framework-5

我正在使用 Visual Studio 2012 将实体框架 4.1 / MVC 3 更新到实体框架 5.0 / MVC 4。数据库是 SQL Server 2005。下面是数据库表及其关系的图像。每个表都有一个主键。辅助表中的主键是 Identity。表由 FormId 关联。

![数据库表](../Images/31bf00b5c5a27392b6b979a74c2b7325.png)

当我**从 Database 更新时**，EF 会导入表及其关系。

使用 EF 4.1，我能够编写以下代码，通过一次 SaveChanges() 调用成功保存（插入）到所有四个表中。我以编程方式创建了一个新的 GUID，并将 nsForm 添加到其他三个表中。执行 SaveChanges() 时，EF 4 首先保存 NSForm 并在保存每个表时自动将 FormId 应用于其他三个表。

```
 DateTime currentDateTime = DateTime.Now;
        Guid formGuid = System.Guid.NewGuid();
        bool success = false;

            using (var context = new NSAFormsEntities())
            {
                NSAFormsEDM.NSForm nsForm = new NSAFormsEDM.NSForm();
                SpeakerphoneForm speakerphoneForm = new SpeakerphoneForm();
                NSAFormsEDM.Requestor requestor = new NSAFormsEDM.Requestor();
                NSAFormsEDM.Authorizer authorizer = new NSAFormsEDM.Authorizer();

                nsForm.FormGuid = formGuid;
                nsForm.Form = "Speakerphone";
                nsForm.CreateDate = currentDateTime;
                nsForm.ModifiedBy = currentUser;

                #region Speakerphone
                speakerphoneForm.FormGuid = formGuid;
                speakerphoneForm.ServiceDate = speakerphoneVM.ServiceDate;
                speakerphoneForm.LocationId = speakerphoneVM.LocationId;
                speakerphoneForm.CreateDate = currentDateTime;
                speakerphoneForm.CreatedBy = currentUser;
                speakerphoneForm.NSForm = nsForm;
                #endregion

                #region Requestor
                requestor.FormGuid = formGuid;
                requestor.NetworkId = currentUser;
                requestor.CreateDate = currentDateTime;
                requestor.CreatedBy = currentUser;
                requestor.NSForm = nsForm;
                #endregion

                #region Authorizer
                authorizer.FormGuid = formGuid;
                authorizer.NetworkId = authorizerVM.NetworkId;
                authorizer.CreateDate = currentDateTime;
                authorizer.CreatedBy = currentUser;
                authorizer.NSForm = nsForm;
                #endregion

                context.NSForms.Add(nsForm);
                context.SaveChanges();
                success = true;
            } 
```

现在，使用 EF 5.0 仅插入 NSForm 中的数据。显然，EF 5 不再将表格关系中表示的 FormId 键传播到三个辅助表

问题：应该如何编写使用 EF 5 的代码，以便通过一次 SaveChanges() 调用将数据插入到所有表中？

谢谢，

阿诺德

# excel - MS Excel 计算 - 嵌套操作顺序

> ID：13274574
> 
> 赞同：-2
> 
> 时间：2012-11-07T17:04:39.427
> 
> 标签：excel, math

我正面临这个问题，其中 excel 没有正确遵循数学规则。这是公式

```
=((F11*4.4)-R11)/G11 
```

这是数字

```
F11 G11 R11
37  57  23.38 
```

我期望的公式的结果是 = 2.445964912

然而 Excel 将该公式计算为 3.266315789

根据数学逻辑，上述公式需要按以下步骤计算：

```
1\. (F11*4.4) = AA
2\. (AA-R11) = BB
3\. (BB/G11) = CC (in this case 2.445964912) 
```

我是不是想错了，或者这个逻辑应该以不同的方式放到 Excel 中？

![在此处输入图像描述](../Images/71deb965edfd4838a3e2c57715d1cd76.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:26:54.880

您可以使用“公式”>>“评估公式”进行检查，步骤如下：

*   37*4.4 = 162.8
*   162.8 - 23.38 = 139.42
*   139.42 / 57 = 2.445964912

如果要删除标志，可以添加`ABS()`功能：

```
=((F11*4.4)-ABS(R11))/G11 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-07T19:55:28.467

如果您的数字显示格式对数字进行四舍五入，Excel 仍将在单元格中保留全分辨率数字。当 Excel 计算公式时，它使用存储在单元格中的这些全分辨率数字，*而不是*显示在显示屏中的四舍五入数字，这可能会给您带来与预期不同的结果。

我能够得到与您图像中的结果非常相似的结果，并且我相信通过实验可以完全复制您的结果。我将单元格 F11 和 G11 的格式设置为没有小数位的数字格式。然后我将 F11 设置为 37.49999，将 G11 设置为 57.49999。由于格式化到位，我在 F11 和 G11 中只能*看到37 和 57。*

要了解类似情况是否会影响您的结果，只需将光标放在 F11、G11 和 R11 中的每一个上即可查看实际值。您还可以通过将单元格上的格式设置为“常规”来查看实际数值，即使这些值是由公式生成的，这也将起作用。

# java - Java：使用 PDFBox 将国家字符写入 PDF

> ID：13274578
> 
> 赞同：1
> 
> 时间：2012-11-07T17:05:15.970
> 
> 标签：java, utf-8, internationalization, pdfbox

> **可能重复：**
> [使用 PDFBox 将 UTF-8 编码的字符串写入 PDF](https://stackoverflow.com/questions/5425251/using-pdfbox-to-write-utf-8-encoded-strings-to-a-pdf)

我需要使用捷克国家字符创建 PDF，并且我正在尝试使用 PDFBox 库来实现。我从一些教程中复制了以下代码：

```
public void doIt(String file, String message) throws IOException, COSVisitorException
{
    PDDocument doc = null;
    try
    {
        doc = new PDDocument();
        PDSimpleFont font = PDType1Font.TIMES_ROMAN;

        TextToPDF textToPdf = new TextToPDF();

        textToPdf.setFont(font);
        textToPdf.setFontSize(12);
        doc = textToPdf.createPDFFromText(new StringReader(message));
        doc.save(file);
    }
    finally
    {
        if( doc != null )
        {
            doc.close();
        }
    }
} 
```

现在，我正在调用函数 doIt：

```
app.doIt("test.pdf", "Skákal pes přes oves, přes zelenou louku."); 
```

这完全有效，但在输出 PDF 中我得到：“þÿSkákal pes pYes oves, pYes zelenou louku。”

我试图找到如何在 PDFBox 中设置 UTF-8 编码，但恕我直言，互联网上没有解决方案。

您有什么想法，如何在输出 PDF 中获得正确的文本？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:21:33.683

我认为它的`PDType1Font.TIMES_ROMAN`字体不支持您的捷克民族字符。如果您可以设法获取 的`.ttf`文件`Czech national characters`，则使用以下获取`PDFont`如下并使用相同的：

```
 PDFont font = PDTrueTypeFont.loadTTF( doc, new File( "CheckRepFont.ttf" ) ); 
```

这`CheckRepFont.ttf`是您的字体文件名作为示例。用实际更新它。

编辑：

```
 PDStream pdStream  = new PDStream(doc);
  PDSimpleFont font = PDType1Font.TIMES_ROMAN;
  font.setToUnicode(pdStream); 
```

# javascript - 如何使用 RegEx 和 Fiddler 选择和替换整个 JavaScript 函数

> ID：13274579
> 
> 赞同：0
> 
> 时间：2012-11-07T17:05:15.687
> 
> 标签：javascript, regex, fiddler

我需要用 Fiddler 重写一个 JavaScript 函数。我相信[这个答案](https://stackoverflow.com/questions/1933934/injecting-javascript-to-website-using-fiddler)部分解决了这个问题；但是，我仍在搜索 RegEx 信息。例如：

```
function traceThis(message) {
   //setTimeout(function() { window.opener.childWindowMessageHandler(message);}, 100);
   //if (!window.console) console = {};
   //console.log(message);
} 
```

需要变成：

```
function traceThis(message) {
   setTimeout(function() { window.opener.childWindowMessageHandler(message);}, 100);
   if (!window.console) console = {};
   console.log(message);
} 
```

我想匹配和替换 traceThis() 函数中的各个行会更简单；但是，我认为学习如何从“函数”选择和替换任何所需的函数到它的结束“}”将是最有用的，而不管其中的语句如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:48:44.277

函数的来源可以从那里得到，`traceThis.toString ()`你可以做任何你想做的改变，然后使用重新创建函数`new Function`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:59:22.573

HBP 的回答不起作用，因为 toString() 函数在脚本实际运行之前不可用。但他确实指出了一种解决此问题的简单方法，可能不需要 JS 解析器或复杂的正则表达式。

即，只需对以下内容进行直接字符串替换：

```
function traceThis(message) { 
```

和

```
// Here's my NewFunction
function traceThis(message)
{
   // My new instructions here
}

function OriginalVersionOfTraceThis(message) { 
```

这样，当您的注入器运行时，它会用您想要的脚本代码覆盖旧函数的前面，并将旧函数重命名为其他名称（永远不会被调用）。

# .net - Nuget web.config.transform 奇怪地合并了dependentAssembly 部分

> ID：13274580
> 
> 赞同：0
> 
> 时间：2012-11-07T17:05:16.890
> 
> 标签：.net, asp.net-mvc-3, web-config, nuget

我刚刚创建了一个自定义 nuget 包，目的是打包我们的 Devart dll，我们在所有项目中都有适当的版本控制和更新机制。

Nuget 包的结构是根据[官方 wiki](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package)上的说明进行的，如下所示：

*   德瓦特甲骨文
    *   内容
        *   web.config.transform
    *   库
        *   Devart.Data.Oracle.dll
        *   ...
    *   DevartOracle.nuspec

nuspec 文件的内容大致如下：

```
<?xml version="1.0"?>
<package >
  <metadata>
    <id>DevartOracle</id>
    <version>6.70.311-pre6</version>
    <title>Devart Oracle dotConnect</title>
    ...
    <requireLicenseAcceptance>false</requireLicenseAcceptance>
    <description>Drivers from Devart for Oracle and Entity Framework</description>
    <releaseNotes></releaseNotes>
    <copyright>Copyright 2012</copyright>
    <tags></tags>
    <dependencies>
    </dependencies>
  </metadata>
</package> 
```

其实没什么特别的。我使用以下命令将 nuget 包发布到我们的[本地存储库：](http://juristr.com/blog/2012/04/using-nuget-to-distribute-our-company/)

```
nuget pack DevartOracle.nuspec 
```

dll 的安装很好，但是我也想创建一个 web.config 合并。因此，我添加了文档中指定的 web.config.transform 文件......再次包含以下内容：

```
 <?xml version="1.0" encoding="utf-8"?>
  <configuration>
    <runtime>
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly>
          <assemblyIdentity name="Devart.Data.Oracle" publicKeyToken="09af7300eec23701" culture="neutral" />
          <bindingRedirect oldVersion="0.0.0.0-6.70.311.0" newVersion="6.70.311.0" />
        </dependentAssembly>
      </assemblyBinding>
    </runtime>
    <system.data>
      <DbProviderFactories>
        <remove invariant="Devart.Data.Oracle" />
        <add name="dotConnect for Oracle" invariant="Devart.Data.Oracle" description="Devart dotConnect for Oracle" type="Devart.Data.Oracle.OracleProviderFactory, Devart.Data.Oracle, Version=6.70.311.0, Culture=neutral, PublicKeyToken=09af7300eec23701" />
      </DbProviderFactories>
    </system.data>
  </configuration> 
```

## 问题

当我执行合并到一个不存在或空`<assemblyBinding>`部分的 web.config 时，一切都按预期工作，但是当我有 - 比如说 - 已经存在以下内容时：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="EntityFramework" publicKeyToken="b77a5c561934e089" culture="neutral" />
      <bindingRedirect oldVersion="0.0.0.0-4.3.0.0" newVersion="4.3.0.0" />
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

那么合并的结果就是这个奇怪的结果：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="EntityFramework" publicKeyToken="b77a5c561934e089" culture="neutral" />
      <bindingRedirect oldVersion="0.0.0.0-4.3.0.0" newVersion="4.3.0.0" />
      <assemblyIdentity name="Devart.Data.Oracle" publicKeyToken="09af7300eec23701" culture="neutral" />
      <bindingRedirect oldVersion="0.0.0.0-6.70.311.0" newVersion="6.70.311.0" />
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

有任何想法吗？？

* * *

## 更新：

一位 Microsoft 员工和活跃的 NuGet 开发人员在 Twitter 上发布了一个更新，可能值得在这里分享信息： [https ://twitter.com/dotnetjunky/status/266533404143656960](https://twitter.com/dotnetjunky/status/266533404143656960)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:04:27.787

**按照设计，NuGet 仅允许将**更改附加到现有 XML 文件（合并适用于任何 XML 类型的文件，无论扩展名如何，只要您要合并的文件使用 {filename}.{extension} 的约定命名。转换）。

这是因为 NuGet 还需要能够*卸载*包安装所做的更改（除非您在安装后手动对更改的文件进行了修改，在这种情况下，NuGet 将在卸载时保持不变）。

[这与您对XML Config Transforms](http://msdn.microsoft.com/en-us/library/dd465326.aspx)的期望非常不同，这可能会导致这里的混乱。

如果您想对目标文件进行**真正的**转换，则必须使用 PowerShell 路线，并通过在包的工具文件夹中编写 install.ps1 和 uninstall.ps1 文件的脚本来实现。

# c - 在分配的内存中存储指针地址

> ID：13274583
> 
> 赞同：3
> 
> 时间：2012-11-07T17:05:19.930
> 
> 标签：c, pointers

这感觉像是一个愚蠢的问题，但我无法找到一个干净的解决方案，也无法在大量其他与指针相关的问题中找到类似的问题。

我有一些动态分配的未知类型的内存，并希望在开始时在其中存储一个指针。malloc 返回的动态内存应该适当对齐，因此我认为在写入分配块的开头时不必担心对齐问题。

这是我的代码，它可以工作，但我将指针表示为 64 位整数，并希望以更简洁/便携的方式进行：

```
void *my_area = malloc(512);
void *my_pointer = get_my_pointer();
((long long *) my_area)[0] = (long long) my_pointer; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:13:04.553

演员表`long long`只是额外的包袱。改为`void *`。

```
void *my_area = malloc(512);
void *my_pointer = get_my_pointer();
((void **) my_area)[0] = my_pointer; 
```

（我假设这是针对某种 freelist 或类似的，即您不需要同时使用该结构。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:09:16.893

会发现什么`my_area[0]`是指向某物的指针，对吧？

然后您可以将 my_area 分配为 type `void **`，它表示指向包含内存区域的指针的指针。

```
void **my_area = malloc(512 * sizeof(*my_area)); // alloc 512 pointer sized memory blocks
void *my_pointer = get_my_pointer();
my_area[0] = my_pointer; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:14:07.800

定义一个内部 8 字节数组的结构。用您的自定义结构替换所有 long long 类型引用。这样，您将不依赖于特定于平台的 long long 大小。该结构在所有平台上都是 64 位（如果您担心对齐，可以添加 #pragma pack）

# javascript - jQuery 菜单小部件 - 单击时向上弹出

> ID：13274585
> 
> 赞同：-1
> 
> 时间：2012-11-07T17:05:25.330
> 
> 标签：javascript, html, css, jquery-ui

我有一个 jQuery 菜单小部件，其中包含一个根条目和几个子条目。我希望它的行为如下：

*   它不应该在悬停时打开，而是在点击时打开
*   它不应该向侧面打开，而是向上

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:24:56.237

```
$("#menu").menu({ trigger: "click" }); 
```

这会将触发菜单的事件从“悬停”更改为“单击”

我假设“它不应该向上打开”你的意思是子菜单应该出现在选定的主菜单选项下方，扩大主菜单的高度。然而，这是一个假设；如果你能澄清你的要求，我会回来编辑我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:16:23.943

而不是悬停事件，您将使用点击事件。并且子菜单或菜单项内容的大多数时间方向是用绝对位置定义的，因此在您的情况下，您可以以定义顶部负位置的方式定义位置，其中值将是隐藏内容的高度.

希望能帮助到你。

# entity-framework - 查询的 DBContext 缓存表达式树

> ID：13274586
> 
> 赞同：0
> 
> 时间：2012-11-07T17:05:34.643
> 
> 标签：entity-framework, c#-4.0, expression-trees, dbcontext

我实际上正在开发一个使用非常大的 linq 到实体查询（大约 250 行）的项目，该项目与许多不同的实体一起工作。

这个查询取决于几个参数（最多 3 个或 4 个），所以我想“存储”我的查询的表达式树，并只用我这样的几个参数来修改这个。

```
IQueryable<Foo> myQuery = 
  GetBaseQuery()
  .Where(a => a.Param1 == "foo")
  .Where(a => a.Param2 == "bar"); 
```

除了使用编译查询，有没有办法做到这一点？

这个问题有一些条件

*   我使用 DbContext 并可能更改为 ObjectContext，这似乎是使用编译查询的先决条件。
*   我使用 Visual Studio 2010，所以...我仅限于 .NET 4 和实体框架 4.3（没有 .NET 4.5、EF5 和自动编译的查询毫无希望）

那么，有没有办法

*   存储一个表达式树，它只用作“基础”并且不会花费太多时间来生成？
*   还是在 Visual Studio 2010 中使用 .NET 4.5？
*   或者使用带有 DbContext 的编译查询

真的提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:43:46.770

从字里行间看，您似乎想要使用 DbContext 编译查询。（这与存储 LINQ 表达式树并不完全相同，但这似乎并不是我们所做的测试中的性能瓶颈。）据我所知，您有以下选择：

*   将 EF5 与 .NET 4.5 一起使用。即使您使用的是 VS2010 并以 .NET 4 为目标，如果您在运行应用程序的机器上安装 .NET 4.5，那么您将获得自动编译的查询。
*   将 EF6 与 .NET 4 或 .NET 4.5 一起使用。EF6 将自动编译的查询代码移出 .NET Framework，因此即使在 .NET 4 上运行时也可以使用它。
*   使用 ObjectContext 和 CompiledQuery

我不知道有任何方法可以将 CompiledQuery 与 DbContext 一起使用，也没有任何计划来实现这项工作。

# full-text-search - xquery完整搜索儿童的文本

> ID：13274588
> 
> 赞同：0
> 
> 时间：2012-11-07T17:05:40.087
> 
> 标签：full-text-search, xquery, exist-db

是否可以使用 xquery 在存在数据库中搜索关键字？

我试过使用

```
//foo//@val[. &= $param] 
```

但这会返回错误，因为我的exist-db（1.4.2）版本不支持

在多个节点上进行搜索的最佳方法是什么？

```
<xml>
   <foo @val='test1'>
   <bar @val='test2'>
       <thunk @val='test3'/>
   </bar>
   </foo> 
```

所以对于我的示例 XML，我该怎么做

```
let $result :=

if //xml/foo[contains(@val,$param)] or
//xml/foo/bar[contains(@val,$param)] or
//xml/foo/bar/thunk[contains(@val,$param)]

return $result 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:28:24.600

这些中的任何一个都应该起作用：

```
//foo//@val[contains(.,$param)]

//foo//@val[. eq $param] 
```

但是，在使用 contains() 而不是 equals 时，显然需要考虑一些问题。此外，如果路径将始终如您在示例中描述的那样受到限制，并且您只是检查其中任何一个是否为真（而不是实际获取所有元素），那么这应该是一个更快、更有效的查询：

```
((//xml/foo[@val eq $param])[1] or (//xml/foo/bar[@val eq $param])[1] or (//xml/foo/bar/thunk[@val eq $param])[1]) 
```

未经测试，但`[1]`应该在 xpath 评估器从查询中获得第一个结果后短路，并且当其中任何一个返回值时，OR 应该短路表达式。

# facebook - Facebook 开放图形对象链接

> ID：13274589
> 
> 赞同：1
> 
> 时间：2012-11-07T17:05:49.510
> 
> 标签：facebook, facebook-opengraph

我成功地将 OG 操作发布到我在 facebook 上的应用时间线。但是现在，当我单击对象标题时，它只会打开 facebook 获取打开图形操作数据的 url。我想在我的网站上添加一个自定义 url。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:14:27.710

这是设计使然。如果您需要用户在点击 OG 操作后访问您的网站，则在代表该操作的页面上，添加 JavaScript 重定向`location.href= 'URL to your site';`

# jquery - 滚动时将菜单栏固定在顶部

> ID：13274592
> 
> 赞同：74
> 
> 时间：2012-11-07T17:06:06.257
> 
> 标签：jquery, css

我见过一些网站，当用户向下滚动页面时，会在右侧或左侧弹出一个框...

此外，注意到这个模板：[http](http://www.mvpthemes.com/maxmag/) ://www.mvpthemes.com/maxmag/设计师做得很好，将导航栏固定在顶部。

现在，这些是如何完成的？我猜它使用 jquery 来获取页面的位置并显示框。

请您指导我到哪里可以找到一个片段，以便我可以学习做类似的事情。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-11-07T17:31:36.263

这种效果通常是通过一些 jquery 逻辑来实现的，如下所示：

```
$(window).bind('scroll', function () {
    if ($(window).scrollTop() > 50) {
        $('.menu').addClass('fixed');
    } else {
        $('.menu').removeClass('fixed');
    }
}); 
```

这表示一旦窗口滚动超过一定数量的垂直像素，它就会向菜单添加一个类，将其位置值更改为“固定”。

完整的实现细节参见：http: [//jsfiddle.net/adamb/F4BmP/](http://jsfiddle.net/adamb/F4BmP/)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-04T02:54:42.347

在此示例中，您可以将菜单居中显示。

## HTML

```
<div id="main-menu-container">
    <div id="main-menu">
        //your menu
    </div>
</div> 
```

## CSS

```
.f-nav{  /* To fix main menu container */
    z-index: 9999;
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
}
#main-menu-container {
    text-align: center; /* Assuming your main layout is centered */
}
#main-menu {
    display: inline-block;
    width: 1024px; /* Your menu's width */
} 
```

## JS

```
$("document").ready(function($){
    var nav = $('#main-menu-container');

    $(window).scroll(function () {
        if ($(this).scrollTop() > 125) {
            nav.addClass("f-nav");
        } else {
            nav.removeClass("f-nav");
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-11-07T17:31:08.937

您还可以使用 css 规则：

`position: fixed ;`和`top: 0px ;`

在您的菜单标签上。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-08-28T18:00:58.133

与 adamb 相同，但我会添加一个动态变量 num

```
num = $('.menuFlotante').offset().top; 
```

获得窗口内的确切偏移或位置以避免找到正确的位置。

```
 $(window).bind('scroll', function() {
         if ($(window).scrollTop() > num) {
             $('.menu').addClass('fixed');
         }
         else {
             num = $('.menuFlotante').offset().top;
             $('.menu').removeClass('fixed');
         }
    }); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-04-26T06:38:06.067

或者以更动态的方式执行此操作

```
$(window).bind('scroll', function () {
    var menu = $('.menu');
    if ($(window).scrollTop() > menu.offset().top) {
        menu.addClass('fixed');
    } else {
        menu.removeClass('fixed');
    }
}); 
```

在 CSS 添加类

```
.fixed {
    position: fixed;
    top: 0;
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-06-16T02:28:13.650

尝试使用粘性 jquery 插件

[https://github.com/garand/sticky](https://github.com/garand/sticky)

```
<script src="jquery.js"></script>
<script src="jquery.sticky.js"></script>
<script>
  $(document).ready(function(){
    $("#sticker").sticky({topSpacing:0});
  });
</script>
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-11-26T02:16:53.617

检查下面的链接，它有 html、css、JS 和现场演示 :) 享受

[http://codepen.io/senff/pen/ayGvD](http://codepen.io/senff/pen/ayGvD)

```
// Create a clone of the menu, right next to original.
$('.menu').addClass('original').clone().insertAfter('.menu').addClass('cloned').css('position','fixed').css('top','0').css('margin-top','0').css('z-index','500').removeClass('original').hide();

scrollIntervalID = setInterval(stickIt, 10);

function stickIt() {

  var orgElementPos = $('.original').offset();
  orgElementTop = orgElementPos.top;               

  if ($(window).scrollTop() >= (orgElementTop)) {
    // scrolled past the original position; now only show the cloned, sticky element.

    // Cloned element should always have same left position and width as original element.     
    orgElement = $('.original');
    coordsOrgElement = orgElement.offset();
    leftOrgElement = coordsOrgElement.left;  
    widthOrgElement = orgElement.css('width');

    $('.cloned').css('left',leftOrgElement+'px').css('top',0).css('width',widthOrgElement+'px').show();
    $('.original').css('visibility','hidden');
  } else {
    // not scrolled past the menu; only show the original menu.
    $('.cloned').hide();
    $('.original').css('visibility','visible');
  }
}
```

```
* {font-family:arial; margin:0; padding:0;}
.logo {font-size:40px; font-weight:bold;color:#00a; font-style:italic;}
.intro {color:#777; font-style:italic; margin:10px 0;}
.menu {background:#00a; color:#fff; height:40px; line-height:40px;letter-spacing:1px; width:100%;}
.content {margin-top:10px;}
.menu-padding {padding-top:40px;}
.content {padding:10px;}
.content p {margin-bottom:20px;}
```

```
<div class="intro">Some tagline goes here</div>
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-12-17T09:39:52.713

您可能要添加：

```
 $(window).trigger('scroll') 
```

当您重新加载已经滚动的页面时触发滚动事件。否则你可能会让你的菜单错位。

```
$(document).ready(function(){
        $(window).trigger('scroll');
        $(window).bind('scroll', function () {
            var pixels = 600; //number of pixels before modifying styles
            if ($(window).scrollTop() > pixels) {
                $('header').addClass('fixed');
            } else {
                $('header').removeClass('fixed');
            }
        }); 
}); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-12-27T10:31:11.940

这是用于在触摸浏览器顶部时修复 div 的 jquery 代码，希望对您有很大帮助。

```
<script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>
<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
$(function() {
    $.fn.scrollBottom = function() {
        return $(document).height() - this.scrollTop() - this.height();
    };

    var $el = $('#sidebar>div');
    var $window = $(window);
    var top = $el.parent().position().top;

    $window.bind("scroll resize", function() {
        var gap = $window.height() - $el.height() - 10;
        var visibleFoot = 172 - $window.scrollBottom();
        var scrollTop = $window.scrollTop()

        if (scrollTop < top + 10) {
            $el.css({
                top: (top - scrollTop) + "px",
                bottom: "auto"
            });
        } else if (visibleFoot > gap) {
            $el.css({
                top: "auto",
                bottom: visibleFoot + "px"
            });
        } else {
            $el.css({
                top: 0,
                bottom: "auto"
            });
        }
    }).scroll();
});
});//]]>  

</script> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-09-28T11:26:47.967

你可以用你的 nav 试试这个`div`：

```
div.fixed{
    postion: fixed;
    top: 0;
    width: 100%;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-09-28T07:00:34.700

```
$(window).scroll(function () {

        var ControlDivTop = $('#cs_controlDivFix');

        $(window).scroll(function () {
            if ($(this).scrollTop() > 50) {
               ControlDivTop.stop().animate({ 'top': ($(this).scrollTop() - 62) + "px" }, 600);
            } else {
              ControlDivTop.stop().animate({ 'top': ($(this).scrollTop()) + "px" },600);
            }
        });
    }); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-01-09T16:53:12.110

使用 JavaScript，您可以在某些元素进入或离开视口时使用 Intersection Observer API 触发此效果。

[https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)

# php - PHP、Jquery 和 DOM 操作

> ID：13274593
> 
> 赞同：0
> 
> 时间：2012-11-07T17:06:07.433
> 
> 标签：php, jquery, html, sql

我有一个从数据库中填充的列表，它使用时间字段按 ASC 日期排序。我正在使用`<?php foreach() :?>`循环并填充列表。

```
<li id="events">
Time: <?php echo $venue['time']; ?> 
Event: <?php echo $venue['location']; ?> 
</li> 
```

我在 php 中有一个名为 ($time_left ) 的变量，它跟踪*每个*事件开始之前的剩余天数 我通过从数据库中获取时间字段减去今天的当前日期来计算这个值，`php date()` **当它达到 0 时如何删除过期事件列表的开头并将其附加到末尾。**

这可以在页面刷新时完成，我不需要它是异步的。我可以在 PHP 中使用 DOM 操作来做到这一点吗？或者我应该使用 Jquery，如果是，我如何将 $time_left 变量从 PHP 传递到我的 Jquery 脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:14:14.260

这看起来很简单。我希望我没有误会什么。它应该是这样的。

```
foreach($venues as $k => $venue) {
    $passEvents = array();
    $currentTime = time();
    if(($venue['time'] - $currentTime) <= 0) {
        $passEvents[] = $venue;
    } else {
        echo '<li id="events">';
        echo 'Time: '.$venue['time']; 
        echo 'Event: '.$venue['location']; 
        echo '</li>';
    }
}

foreach($passEvents as $k => $venue) {
    echo '<li id="events">';
    echo 'Time: '.$venue['time']; 
    echo 'Event: '.$venue['location']; 
    echo '</li>';
} 
```

# java - 修复 servlets(java) 中的编码

> ID：13274596
> 
> 赞同：3
> 
> 时间：2012-11-07T17:06:13.727
> 
> 标签：java, servlets

帮助修复servlet中的编码，它在输出中不显示俄语字符。我将非常感谢您的回答。

那是servlet代码

```
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.List;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class servlet extends HttpServlet {
    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    public static List<String> getFileNames(File directory, String extension) {

        List<String> list = new ArrayList<String>();
        File[] total = directory.listFiles();
        for (File file : total) {
            if (file.getName().endsWith(extension)) {
                list.add(file.getName());
            }
            if (file.isDirectory()) {
                List<String> tempList = getFileNames(file, extension);
                list.addAll(tempList);          
            }
        }
        return list;
    }

@SuppressWarnings("resource")
        protected void doPost(HttpServletRequest request, HttpServletResponse response) 
                throws ServletException, IOException{ 
                request.setCharacterEncoding("utf8");
                response.setContentType("text/html; charset=UTF-8");
                String myName = request.getParameter("text");

                List<String> files = getFileNames(new File("C:\\Users\\vany\\Desktop\\test"), "txt");
                for (String string : files) {
                if (myName.equals(string)) {
                       try {
                            File file = new File("C:\\Users\\vany\\Desktop\\test\\" + string);
                            FileReader reader = new FileReader(file);
                            int b;
                            PrintWriter writer = response.getWriter();
                            writer.print("<html>");
                            writer.print("<head>");
                            writer.print("<title>HelloWorld</title>");
                            writer.print("<body>");
                            writer.write("<div>");
                            while((b = reader.read()) != -1) {
                                writer.write((char) b);
                            }
                            writer.write("</div>");
                            writer.print("</body>");
                            writer.print("</html>");

                        } 
                       catch (Exception ex) {

                        }
                    }

                }
               }
        } 
```

这是我显示的而不是字母

Псђсђс€‰Рос€€€€€€€€€€€ріс‰с€€рісрірсђрісђрісђрс,сђрісђРс，сквасђрμр，сђрμр，Сђрμр±сђрμс，Сђрμс，Сѓсђр°

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:11:45.570

您在请求而不是响应上设置字符编码。更改`request.setCharacterEncoding("utf8");`为`response.setCharacterEncoding("UTF-8");`

另外：如果您系统的默认字符编码不是 UTF-8，您应该在读取文件时明确设置编码。为此，您需要使用`FileInputStream`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-20T13:49:43.323

```
pRes.setContentType("text/html; charset=UTF-8");
    PrintWriter out = new PrintWriter(new OutputStreamWriter(pRes.getOutputStream(), "UTF8"), true); 
```

使用这个我得到了确切的结果:)

# c# - Entity Framework 5 从 4 升级

> ID：13274597
> 
> 赞同：4
> 
> 时间：2012-11-07T17:06:20.897
> 
> 标签：c#, linq, entity-framework-4, entity-framework-5

我在搜索中遇到了 Where 子句的问题，在我的原始版本 EF4 中，我可以添加一个带有 2 个参数的 Where 子句、where 子句（字符串谓词）和一个 ObjectParameter 列表，例如

```
var query = context.entities.Where(WhereClause.ToString(), Params.ToArray()); 
```

自从我升级到 EF5 后，我似乎没有该选项，我错过了什么吗？

这最初用于构建动态 where 子句，例如“it.entity_id = @entity_id”，然后将变量值保存在 ObjectParameter 中。

我希望我不必重写以这种方式构建的所有搜索，因此将不胜感激任何帮助。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:56:05.760

为了将 ESQL 与 DbContext 一起使用，您必须“下拉”到 ObjectContext。

```
var objectContext = ((IObjectContextAdapter)context).ObjectContext;
var query = objectContext.CreateQuery<MyEntity>(
    WhereClause.ToString(),
    Params.ToArray()); 
```

# sass - Sass 计算百分比减去 px

> ID：13274599
> 
> 赞同：148
> 
> 时间：2012-11-07T17:06:23.690
> 
> 标签：sass

我希望能够做到以下几点：

```
height: 25% - 5px; 
```

显然，当我这样做时，我得到了错误：

```
Incompatible units: 'px' and '%'. 
```

* * *

## 回答 #1

> 赞同：287
> 
> 时间：2012-11-07T17:28:34.660

Sass 无法对无法从一个单位转换为下一个单位的值执行算术运算。Sass 无法确切知道“100%”在像素或任何其他单位方面的宽度。这只有浏览器知道。

你需要`calc()`改用。 [检查浏览器兼容性我可以使用...](http://caniuse.com/#feat=calc)

```
.foo {
    height: calc(25% - 5px);
} 
```

如果您的值在变量中，您可能需要使用插值将它们转换为字符串（否则 Sass 只会尝试执行算术）：

```
$a: 25%;
$b: 5px;

.foo {
  width: calc(#{$a} - #{$b});
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-08-28T11:38:31.640

SCSS [编译时] 和 CSS [运行时] 都有一个`calc`函数。您可能会调用前者而不是后者。

由于显而易见的原因，混合单元不会在编译时工作，但会在运行时工作。

`unquote`您可以通过使用SCSS 函数来强制执行后者。

```
.selector { height: unquote("-webkit-calc(100% - 40px)"); } 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-08-16T02:41:39.997

```
$var:25%;
$foo:5px;
.selector {
    height:unquote("calc( #{$var} - #{$foo} )");
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-07-31T20:02:49.230

**如果**你知道容器的宽度，你可以这样做：

```
#container
  width: #{200}px
  #element
    width: #{(0.25 * 200) - 5}px 
```

我知道在许多情况下#container 可能有一个相对宽度。那么这行不通。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-01T15:51:29.427

很抱歉恢复旧线程 - Compass 使用 :after 伪选择器进行拉伸可能适合您的目的 - 例如。如果你想让一个 div 从左边填充到屏幕的（50% + 10px）宽度，你可以使用（在 SASS 缩进语法中）：

```
.example
    background: red
    +stretch(0, -10px, 0, 0)
    &:after
        +stretch(0, 0, 0, 50%)
        content: ' '
        background: blue 
```

:after 元素填充 .example 右侧的 50%（为 .example 的宽度留出 50%），然后 .example 被拉伸到该宽度加上 10px。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-06T04:14:55.913

只需将百分比值添加到变量中并使用`#{$variable}` 例如

```
$twentyFivePercent:25%;
.selector {
    height: calc(#{$twentyFivePercent} - 5px);
} 
```

# xcode - 替换 Xcode 项目中的现有图像

> ID：13274608
> 
> 赞同：0
> 
> 时间：2012-11-07T17:06:45.427
> 
> 标签：xcode, image

我正在尝试更新 Xcode 项目。更新是替换静态窗口中显示的图像。我替换了被调用的图像，新图像具有相同的名称和大小，但是当我打开窗口时，图像并没有像原始图像那样填满整个窗口。总的来说，我是一个新开发人员，但在 XCode 方面完全是新手。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:16:25.920

替换 Xcode 项目中的图像文件可以通过以下方式完成：

1.  使用 Project Navigator 在 Xcode 中转到 File。
2.  右键单击文件并选择“在Finder中显示”
3.  将新文件拖到与旧文件相同的文件夹中。（确保旧文件和文件同名）
4.  说是，你想替换文件。

你完成了。

编译并运行将显示新图像。我已经这样做了数百次，通常更新占位符图像并且从未遇到任何问题。

至于您的特定问题，您没有描述用于替换图像的步骤，因此我无法就此作证，但是如果您执行上述操作并且没有得到您想要的结果，它将来自错误的图像文件（不同的大小等）。

# java - 具有相同键的订单映射

> ID：13274614
> 
> 赞同：1
> 
> 时间：2012-11-07T17:07:12.320
> 
> 标签：java, map

我想创建一个`Integer`到的映射`String`，并且这个映射对我的键进行排序。所以我使用：

```
TreeMap<Integer, String> thm = new TreeMap<Integer, String>();
thm.put(100, "String 1");
thm.put(11, "String 2");
thm.put(100, "String 3"); 
```

问题是当我有两个相同的键时，我`TreeMap`只包含一个！如何创建一个`TreeMap`包含两个相同 kays 的 cobntains ？如果`TreeMap`不能解决我的问题，我该怎么办？

我读了你的回复， `Guava Tree multi-map` 但 multiMap 没有订购我的钥匙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:08:39.863

为此，您可能需要使用[番石榴树多地图](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/TreeMultimap.html)。如果存在，则 Map 会用新键覆盖现有键。

例子：

```
 Multimap<String, String> myMultimap = TreeMultimap.create();      
  // Adding some key/value
  myMultimap.put("Fruits", "Bannana");
  myMultimap.put("Fruits", "Apple");
  myMultimap.put("Fruits", "Pear");
  myMultimap.put("Vegetables", "Carrot") 
```

这是有关如何使用[mutli-map](http://tomjefferys.blogspot.com/2011/09/multimaps-google-guava.html)的教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:09:52.047

如果每个键需要多个值，请查看[Guava Multimap](http://guava-libraries.googlecode.com/svn/tags/release02/javadoc/com/google/common/collect/Multimap.html)。

> 类似于 Map 的集合，但可以将多个值与单个键相关联。如果您使用相同的键但值不同的两次调用 put(K, V)，则多重映射包含从键到两个值的映射。

特别是（为了满足您的排序要求）实现[TreeMultimap](http://guava-libraries.googlecode.com/svn/tags/release02/javadoc/com/google/common/collect/TreeMultimap.html)将对键和值进行排序。从文档：

> Multimap 的实现，其键和值按其自然顺序或提供的比较器排序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T17:10:50.593

**java.util.Map**实现类不允许**重复键**。寻找 **Guava Multimap**的替代品。

```
map.put("key1", "val1");
 map.put("key1", "val2"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-07T17:10:50.350

当您使用 TreeMap 时，我想您对键的自然排序感兴趣。

如果是这样，最简单的解决方案似乎使用 a `TreeMap<Integer, List<String>>`, 在添加时创建一个`ArrayList<String>`并且没有任何内容并在列表已经存在时将其添加到列表中

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-07T17:09:01.423

处理从键到多个值的映射很容易 google guava libray [`Multimap`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimap.html)，它将键映射到值，类似于 Map，但其中每个键可能与多个值相关联。Multimap的实现有ArrayListMultimap、HashMultimap、SetMultimap等。

```
Multimap<Integer, String> thm = TreeMultimap.create();
thm.put(100, "key 1");
thm.put(11, "key 2");
thm.put(100, "key 3"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T17:11:08.067

无需依赖外部库，您可以创建一个

```
`Map<Integer,List<String>> thm= new TreeMap<Integer,List<String>>();` 
```

要添加你必须做

```
 thm.get 
```

如果它返回null，则放置一个带有一个元素的新ArrayList，如果它返回一个ArrayList，则只需附加到它

# ruby-on-rails - 如何在 Mac 10.7.5 上打开端口 443？

> ID：13274618
> 
> 赞同：1
> 
> 时间：2012-11-07T17:07:27.657
> 
> 标签：ruby-on-rails, macos

嗨，我在本地服务器上的 rails 应用程序上收到 SSL 问题：

```
An error occurred during a connection to localhost:3000.

SSL received a record that exceeded the maximum permissible length.

(Error code: ssl_error_rx_record_too_long) 
```

并被告知打开端口 443 可以解决问题。我到处看了看，但似乎没有答案。有人可以完成我如何打开端口 443 的过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:39:11.200

因此，有人建议您在防火墙中打开该端口。我认为这无济于事，因为您正在连接到端口 3000，但可能是您正在端口 3000 上运行需要连接到端口 443 的代理。

我建议不要打开该端口，而是禁用防火墙并重试。如果它有效，那么您应该考虑为该端口设置一个例外。以下是禁用防火墙的方法：（这将打开该端口）

**打开系统偏好设置->安全->防火墙，然后单击“停止”。** 完成测试后不要忘记重新打开它。

# linux - 从 Linux Samba CVSROOT 在 Windows 中进行 CVS 签出

> ID：13274622
> 
> 赞同：0
> 
> 时间：2012-11-07T17:07:38.290
> 
> 标签：linux, windows, cvs

我需要从 Linux 中的 CVS 库中签出，在 Windows 机器上使用指向 Linux 上 samba 文件夹的目录链接。在 Linux 中，我的`cvsroot`文件夹是

```
mylogin$ cd /home/myuser/repositories/cvsroot
mylogin$ ls
CVSROOT PRJ1 PRJ2
mylogin$ 
```

这是从 Samba 映射的。在 Windows 上，它映射到驱动器 z: 从`/home/myuser/repositories/`. 同样在 Windows 上，我的 CVSROOT 环境变量配置为`CVSROOT=z:\cvsroot`.

因此，为了在 Windows 文件夹中检出 PRJ1，我尝试了

```
cvs co PRJ1 . 
```

它返回了我的错误信息

> cvs [checkout aborted]：无法解析路径：`Z:\cvsroot'：没有这样的文件或目录

那么，我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:15:27.517

才知道答案。

[来自 Windows 命令行的 cvs checkout](https://stackoverflow.com/questions/1286786/cvs-checkout-from-windows-command-line)的帖子帮助了我。所以我用

```
cvs -q -d /cygdrive/z/cvsroot co -d . PRJ1 
```

它奏效了。

# ios - 如何使用类方法IOS获取字符串

> ID：13274624
> 
> 赞同：1
> 
> 时间：2012-11-07T17:07:50.497
> 
> 标签：ios, string, class, methods

我有一个使用`-void`方法设置的字符串值，我需要在类方法中检索该字符串`+`

我无法更改`+`方法`-`，因此我需要找出另一种方法来检索该字符串。

```
@synthesize folderPathName=_folderPathName;

-(void)loadFolderPathName:(NSString *)folder{

    _folderPathName=[[NSString alloc] initWithString:folder];

}

+(NSString *)getDocumentsDirectory
{

   // NSString *pathwithFoldername=[NSString stringWithFormat:@"Documents/%@",_folderPathName];
    NSString *documentsDirectory = [NSHomeDirectory() 
                                    stringByAppendingPathComponent:pathwithFoldername];
    return documentsDirectory;
} 
```

我尝试过类似的东西

```
-(NSString *) getFolderPathName{

    return _folderPathName;
} 
```

但这也不是

```
NSString *pathwithFoldername=[FileUtils getFolderPathName]; 
```

或者这个允许的函数调用

```
NSString *pathwithFoldername=[self getFolderPathName]; 
```

如何获取该字符串并在 + 方法中使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:13:26.490

您需要在 .m 文件中声明一个静态 NSString 变量。

```
static NSString *Path; 
```

然后添加一个方法，如：

```
+(NSString *)valueOfPath
{
  return Path;
} 
```

您需要在设置`folderPathName`.

您可以通过以下方式调用此方法：

```
NSString *pathwithFoldername=[FileUtils valueOfPath]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:20:40.223

您需要了解面向对象的基础知识，以了解这可能无法按您的预期工作，以及为什么不应该这样做。

`+ (void)...`创建一个类方法，整个应用程序中只能有其中一个。这意味着如果我在整个应用程序中调用一个类方法，它们都将转到同一个位置。

`- (void)...`创建一个实例方法。整个应用程序中可以有很多实例，当您调用实例方法时，它只会转到您的一个实例（其他实例不受影响）

这包括在您也有可用的类方法时调用实例方法；它们的内存位置彼此分开。这意味着如果您通过实例方法设置一些数据，则该数据将无法用于类方法。（这可以反过来工作，如果您通过类方法设置一些数据，则实例可以通过引用其类来获取该数据）。

现在，毕竟，我试图通过类方法设置数据并不是非常面向对象的。就个人而言，我使用类方法作为实例的助手，实例包含我需要的所有数据。如果您需要确保在整个应用程序中只有一个实例，请使用单例模式（[请参阅此处的方法](https://stackoverflow.com/questions/7598820/correct-singleton-pattern-objective-c-ios)）。

现在，在您的情况下，这意味着您可以执行以下操作：

```
+(id)sharedInstance
{
    static dispatch_once_t pred;
    static MyClass *sharedInstance = nil;
    dispatch_once(&pred, ^{
        sharedInstance = [[MyClass alloc] init];
    });
    return sharedInstance;
}

-(void)loadFolderPathName:(NSString *)folder{

    _folderPathName=[[NSString alloc] initWithString:folder];

}

-(NSString *)getDocumentsDirectory
{
    NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
    NSString *pathwithFoldername = [documentsDirectory stringByAppendingPathComponent:_folderPathName];

    return pathwithFoldername;
} 
```

并通过以下方式访问您的单个实例：

```
[MyClass sharedInstance] 
```

# c# - 如何在 ASP.NET Web API 中为 Json.NET 设置自定义 JsonSerializerSettings？

> ID：13274625
> 
> 赞同：77
> 
> 时间：2012-11-07T17:07:54.343
> 
> 标签：c#, asp.net-web-api, json.net

我了解 ASP.NET Web API 本身使用 Json.NET 来（反）序列化对象，但是有没有办法指定`JsonSerializerSettings`您希望它使用的对象？

例如，如果我想`type`在序列化的 JSON 字符串中包含信息怎么办？通常我会在调用中注入设置`.Serialize()`，但 Web API 会默默地做到这一点。我找不到手动注入设置的方法。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-11-07T17:17:08.623

您可以`JsonSerializerSettings`使用对象`Formatters.JsonFormatter.SerializerSettings`中的属性来自定义`HttpConfiguration`。

例如，您可以在 Application_Start() 方法中执行此操作：

```
protected void Application_Start()
{
    HttpConfiguration config = GlobalConfiguration.Configuration;
    config.Formatters.JsonFormatter.SerializerSettings.Formatting =
        Newtonsoft.Json.Formatting.Indented;
} 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-09-16T16:27:58.270

您可以`JsonSerializerSettings`为每个指定`JsonConvert`，并且可以设置全局默认值。

**单`JsonConvert`**重载：

```
// Option #1.
JsonSerializerSettings config = new JsonSerializerSettings { ReferenceLoopHandling = Newtonsoft.Json.ReferenceLoopHandling.Ignore };
this.json = JsonConvert.SerializeObject(YourObject, Formatting.Indented, config);

// Option #2 (inline).
JsonConvert.SerializeObject(YourObject, Formatting.Indented,
    new JsonSerializerSettings() {
        ReferenceLoopHandling = Newtonsoft.Json.ReferenceLoopHandling.Ignore
    }
); 
```

**`Application_Start()`Global.asax.cs中带有代码的**全局设置：****

 **```
JsonConvert.DefaultSettings = () => new JsonSerializerSettings {
     Formatting = Newtonsoft.Json.Formatting.Indented,
     ReferenceLoopHandling = Newtonsoft.Json.ReferenceLoopHandling.Ignore
}; 
```

参考：[https ://github.com/JamesNK/Newtonsoft.Json/issues/78](https://github.com/JamesNK/Newtonsoft.Json/issues/78)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-19T03:49:12.743

答案是将这 2 行代码添加到 Global.asax.cs Application_Start 方法

```
var json = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
json.SerializerSettings.PreserveReferencesHandling = 
    Newtonsoft.Json.PreserveReferencesHandling.All; 
```

参考：[处理循环对象引用](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#handling_circular_object_references)**

# eventbrite - 缺少 Eventbrite VenueID

> ID：13274626
> 
> 赞同：1
> 
> 时间：2012-11-07T17:07:57.050
> 
> 标签：eventbrite

我正在打电话给；

[https://www.eventbrite.com/xml/organizer_list_events?id=](https://www.eventbrite.com/xml/organizer_list_events?id=) **MYID**

并返回一组事件。我正在将这些数据集成到内部事件系统中。

但是，我会定期获得一个没有身份证的场地。这意味着我无法将场地添加到系统中，因为在导入之前我无法检查重复项。

显示 VenueID 总是被返回？如果不是，什么情况下不退还？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:29:13.260

如果没有场地，则不会返回场地 ID，例如，如果活动是网络研讨会/仅限在线活动或尚未选择场地

# jquery - jquery.validate：验证三个字段，值应该是唯一的

> ID：13274627
> 
> 赞同：0
> 
> 时间：2012-11-07T17:07:59.973
> 
> 标签：jquery, validation

我有三个领域：

```
<input name="answerOne">
<input name="answerTwo"> 
<input name="answerThree"> 
```

我想在 jquery.validate 中创建一个添加方法，它的操作类似于 equalTo 方法。每个输入文本的值**必须**是唯一的。另外，我想重新验证其他字段并检查它们是否具有唯一值，如果它是唯一的则删除错误。

示例场景：

1.

answerOne 值 = abc

answerTwo 值 = asd

答案三值 = qwe

不应出现错误

2.

answerOne 值 = abc

答案二值 = abc

答案三值 = qwe

AnswerTwo 应该有错误

3.

answerOne 值 = fgh

答案二值 = abc

答案三值 = qwe

AnswerTwo的错误应该消失了

希望你们能帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:50:50.060

```
function validate() {
    return ($("input[name=answerOne]").val() != $("input[name=answerTwo]").val() && $("input[name=answerOne]").val() != $("input[name=answerThree]").val() && $("input[name=answerTwo]").val() != $("input[name=answerThree]").val())
} 
```

如果函数返回 false 那么它是无效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-25T22:54:38.890

我不知道基本 jQuery Validation 库中内置的规则，因此您最好的选择可能是创建一个自定义规则来处理它。我发现了这个例子，他创建了一个看起来像你要求的东西：

[http://www.anujgakhar.com/2010/05/24/jquery-validator-plugin-and-notequalto-rule-with-multiple-fields/](http://www.anujgakhar.com/2010/05/24/jquery-validator-plugin-and-notequalto-rule-with-multiple-fields/)

# sql - SQL Server - 计算两个字符之间的字符

> ID：13274628
> 
> 赞同：0
> 
> 时间：2012-11-07T17:08:06.377
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

如何计算两个字符之间的字母数（按字母顺序从 a 到 z 或 z 到 a）？

例如：

```
WITH    ExampleData
          AS ( SELECT   'a' AS StartChar, 'e' AS EndChar
               UNION ALL
               SELECT   'm', 'r'
               UNION ALL
               SELECT   'f', 'a'
             )
    SELECT  StartChar ,
            EndChar
    FROM    ExampleData 
```

需要生产：

```
StartChar   EndChar    Diff
a           e          4
m           r          5
f           a          -5 
```

我看到如何使用 udf 和 while 循环轻松完成此操作，但我想知道是否有更快的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T17:11:38.597

```
SELECT StartChar, EndChar, ASCII(EndChar) - ASCII(StartChar) AS Diff
FROM ExampleData 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!6/d41d8/898)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:11:56.380

假设您已经对 StartChar 和 EndChar 进行了有效性检查...

```
SELECT ASCII(EndChar) - ASCII(StartChar) as Diff 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:13:16.750

这应该可以为您完成工作：

```
WITH    ExampleData
          AS ( SELECT   'a' AS StartChar, 'e' AS EndChar
               UNION ALL
               SELECT   'm', 'r'
               UNION ALL
               SELECT   'f', 'a'
             )
    SELECT  StartChar ,
            EndChar, ascii(EndChar) - ascii(StartChar) as Diff
    FROM    ExampleData 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T17:13:46.427

CTE真是太棒了！如果您不想使用 ASCII，那么您可以这样做：

```
;   With    CharCodes   (
    Code
)   As          (
    Select  65
Union   All
    Select  Code
    +   1
        From    CharCodes
        Where   Code        <   90
)
    Select  Second.Code
    -   First.Code
        From    CharCodes   As  First
        ,   CharCodes   As  Second
        Where   First.Code  =   Convert(Int, Convert(VarBinary, 'A'))
        And Second.Code =   Convert(Int, Convert(VarBinary, 'E')) 
```

使用 ASCII 函数，您可以这样做：

```
Select  ASCII('E')
-   ASCII('A') 
```

# jquery - 结合jQuery来简化simpleModal调用？

> ID：13274630
> 
> 赞同：0
> 
> 时间：2012-11-07T17:08:12.567
> 
> 标签：jquery, modal-dialog

我正在使用 SimpleModal 在页面上触发多个模式。jQuery 看起来像这样：

```
jQuery(function ($) {
    $('#basic-modal .basic').click(function (e) {
        $('#basic-modal-content').modal();

        return false;
    }); 
}); 
```

但是，我在一个页面上有多个模式，每个模式都有不同的 ID ......例如：

```
#basic-modal_2
#basic-modal-content_2 
#basic-modal_3
#basic-modal-content_3 
```

ETC...

我可以通过添加更多的 jQuery 来实现这一点，例如：

```
jQuery(function ($) {
    $('#basic-modal .basic').click(function (e) {
        $('#basic-modal-content').modal();

        return false;
    }); 

   $('#basic-modal2 .basic').click(function (e) {
        $('#basic-modal-content2').modal();

        return false;
    }); 
}); 
```

但这是非常低效的。有没有一种方法可以让我通过一个电话来查找 ID 的结尾，而不是用不同的 ID 重复相同的事情？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:11:48.067

您可以将模态的ID存储在的`data-modal-id`属性中`.basic`

```
<div id="basic-modal" >
   <div class="basic" data-modal-id="basic-modal-content">

   </div>
</div>

jQuery(function($) {
    $('.basic').click(function(e) {

        var id = $(this).data('modal-id');
        $('#' + id).modal();

        return false;
    });
});​ 
```

# windows - 如何在 Windows Power Shell 中定位文件/目录

> ID：13274636
> 
> 赞同：-1
> 
> 时间：2012-11-07T17:08:41.260
> 
> 标签：windows, windows-shell

我正在使用远程 Windows 服务器，并且只能访问 Windows Power Shell。我需要找到几个目录的路径。有什么方法可以在 windows power shell 中找到文件/目录。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:29:51.713

我得到了解决方案，命令是

```
C:\> get-childitem -recurse -include *directory-name* 
```

# powershell - powershell http 获取不使用代理

> ID：13274640
> 
> 赞同：3
> 
> 时间：2012-11-07T17:09:02.710
> 
> 标签：powershell, proxy

我有获取 HTTP 内容的脚本，我需要baypass 代理（直接连接到网络服务器 IP）。是否可以不更改 Windows 中的寄存器？此代码正在通过系统中定义的代理。谢谢你的建议

此致。

```
$url='https://10.10.10.10/check';
$webClient = new-object System.Net.WebClient;
$output = $webClient.DownloadString($url) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T17:47:28.713

根据[文档](http://msdn.microsoft.com/en-us/library/system.net.webclient.proxy.aspx)，您必须将代理设置为空白代理实例。尝试这个：

```
$url = "https://10.10.10.10/check"
$webClient = New-Object System.Net.WebClient
$webClient.Proxy = [System.Net.GlobalProxySelection]::GetEmptyWebProxy()
$output = $webClient.DownloadString($url) 
```

# c# - 优先套接字通信

> ID：13274641
> 
> 赞同：2
> 
> 时间：2012-11-07T17:09:07.673
> 
> 标签：c#, sockets

我在移动设备和 PC（服务器）之间进行了客户端-服务器通信。在通信中，我有四个套接字：其中两个用于发送和接收数据，另外两个用于某种保持活动状态，因为我需要尽快检测到断开连接。

只要连接正常，数据就会毫无问题地传输。但我想建立一些优先级，以确保保持活动（记住：两个套接字）通道始终发送数据，除非服务器 - 客户端之间的连接已死。

我怎样才能做到这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T17:46:48.693

我会质疑你的四个插座的设置。

首先，有单独的连接来发现远程端何时死亡并没有给你任何优势，但实际上当“保持活动”连接断开但“数据”连接仍然完好时会引入竞争条件。当没有活动时，通过相同的数据连接实现定期心跳。

然后相同节点之间的两个独立数据连接竞争带宽。网络堆栈通常不会跨连接边界进行优化，因此您会获得两倍的 TCP 开销而无济于事。通过相同的 TCP 连接实现数据交换 - 您将获得更好的吞吐量（可能会以小延迟增加为代价，但只有良好的测量才能说明这一点）。

最后但并非最不重要的一点是，四个连接需要四个侦听 TCP 端口，因此可能在某处的防火墙中存在四个漏洞。将其减少到单个端口，该防火墙的管理员将永远是您的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:28:19.060

当使用 TCP 进行传输时，您的 TCP 协议栈会在您尝试发送数据并且 (TCP) 连接断开时通知您。如果您同时控制服务器和客户端代码，您可能会在通过 TCP 的数据传输之间实现心跳。

如果 TCP 在各个设备上的连接故障检测对于您的目的来说太慢了，您可以在客户端和服务器之间实施一些单数据包 ping-pong 方案，例如“SNMP echo request”又名“ping” - 或者如果 SNMP 不是一个选项，也许来回发送UDP数据包就可以了。

在任何情况下，您都需要某种超时机制（已在 TCP 堆栈中实现），这意味着断开连接的检测将被延迟，延迟时间受超时持续时间限制。

# java - 如何使用 arraylist 将数据存储在 JTable 的预定义默认表模型中

> ID：13274644
> 
> 赞同：2
> 
> 时间：2012-11-07T17:09:10.707
> 
> 标签：java, swing, jtable

我想在运行时将数据添加到我自己的 JTable 模型中。我的界面上有表格和添加按钮。据我了解，我不能用二维数组来做它，并且想在我的定制表模型中使用 Arraylist，但如果我使用这种类型的数据，我不知道如何制作构造函数。

```
static String[] columnNames = {"A", "B", "C"};
static Object data[][] = new Object[15][3];

public MyTableModel() {
   super(data, columnNames);
} 
```

这是将数据作为两个维度数组的构造函数，但我想使用：

```
ArrayList<Object[]> data = new ArrayList<Object[]>(); 
```

如何制作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T17:48:02.580

一种方法是使用`AbstractTableModel`. 这是一个例子：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.table.AbstractTableModel;

public class TestTable {

    public static class MyModel extends AbstractTableModel {

        private List<Object[]> data;
        private List<String> columnNames;

        public MyModel(List<String> columnNames, List<Object[]> data) {
            super();
            this.columnNames = columnNames;
            this.data = data;
        }

        @Override
        public int getRowCount() {
            return data.size();
        }

        @Override
        public int getColumnCount() {
            return columnNames.size();
        }

        @Override
        public String getColumnName(int column) {
            return columnNames.get(column);
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            return data.get(rowIndex)[columnIndex];
        }

    }

    protected void initUI() {
        JFrame frame = new JFrame(TestTable.class.getSimpleName());
        List<String> columns = Arrays.asList("Name", "Age");
        List<Object[]> data = new ArrayList<Object[]>();
        for (int i = 0; i < 50; i++) {
            Object[] value = new Object[2];
            value[0] = "Name-" + i;
            value[1] = 12 + i;
            data.add(value);
        }
        JTable table = new JTable(new MyModel(columns, data));
        frame.add(new JScrollPane(table));
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTable().initUI();
            }
        });
    }
} 
```

如果您需要修改您的`data` `List<Object[]>`，请不要忘记触发适当的表事件。`AbstractTableModel`已经包含了它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:47:39.073

由于您没有包含表模型的完整源代码，因此很难说出您在做什么，因此我将在这里做一些假设。

您可能正在扩展`AbstractTableModel`或`DefaultTableModel`. 无论哪种情况，您都不必通过构造函数将数据添加到模型中。相反，您需要在`TableModel`扩展中覆盖以下方法：

`getRowCount()`

`getColumnCount()`

`getValueAt(int row, int column)`

使这些方法中的每一个都索引到您的`ArrayList<Object[]> data`对象中-例如，`getValueAt(row,column)`应该返回类似`data.get(row)[column]`. 然后将您添加`TableModel`到 a`JTable`中，就显示自定义数据而言，您应该一切顺利。

现在...当您`data`进行更改时（您更改表中单元格的值或添加/删除行），您只需调用`fireTableDataChanged()`您的`TableModel`（假设它已扩展`AbstractTableModel`或其子类之一）。这将强制 UI 使用您对底层`data`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:48:38.490

创建自己的表模型最直接的方法是从 AbstractTableModel 继承。然后至少覆盖 getRowCount、getColumnCount 和 getValueAt。

然后，您可以使用“new JTable(mymodel)”创建表，其中“mymodel”是您创建的模型的一个实例，或者您可以只使用“new JTable”创建它，然后稍后执行 setModel 来附加您的模型到 JTable。

例如——虽然我已经做了无数次了，但我还是在脑海中写下了这个，所以没有明示或暗示的保证，很可能在某个地方有一两个语法错误：

```
class ArrayListModel extends AbstractTableModel
{
  ArrayList<Object[]> list;

  public ArrayListModel(ArrayList<Object[]> list)
  {
    this.list=list;
  }
  public int getRowCount()
  {
    return list.size();
  }
  public int getColumnCount()
  {
    if (list.size()==0)
    {
      return 0;
    }
    else
    {
      return list.get(0).length;
    }
  }
  public Object getValueat(int row, int column)
  {
    return list.get(row)[column];
  }
}

... somewhere else ...
ArrayListModel mymodel=new ArrayListModel(somedata);
JTable mytable=new JTable(mymodel);
... etc ... 
```

旁注：当我第一次学习 Java 时，我认为创建 JTable 的“正常”方法是使用默认模型，创建向量向量或二维数组，然后进行填充。我认为创建自己的模型将是您在罕见的奇怪情况下所做的事情。但我后来发现默认模型只是在罕见的简单情况下的最佳方式。现在我几乎总是创建自己的模型：它通常更容易编码和更容易理解。通常我有一个使用特定字段创建的某个类的 ArrayList，然后在我的模型类中我有类似的东西：

```
 public Object getValueAt(int row, int col)
 {
   Whatever w=list.get(row);
   if (col==0) return w.foo;
   else if (col==1) return w.bar;
   else if (col==2) return w.plugh;
   else throw SomeException();
 } 
```

或者使用 case 语句。同样的想法。

# c# - C# .net 4 依赖项

> ID：13274651
> 
> 赞同：-2
> 
> 时间：2012-11-07T17:09:40.253
> 
> 标签：c#, .net, visual-studio-2010

我有一个在 C# Visual Studio Express 2010 中开发的独立工具。我的问题是这个工具将无法在没有安装 .NET 的机器上启动，并且在 .NET 低于 3.5 或更低版本的机器上要求 .NET 4。我基本上想做的是在主脚本运行之前从我的应用程序安装 .NET 4。我可以编写一个程序从官方网页下载它，也可以运行安装程序等。但主要问题仍然存在，该应用程序甚至无法到达下载部分，因为它无法在机器上运行......我'我四处搜索，发现您可以包含 dll-s 等，但我仍然怀疑如果没有正确的 .NET 安装，我是否可以继续。那么如何使用我的 .NET 相关应用程序运行 dotnetfx.exe 呢？非常感谢您的关注和想法。CS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:12:50.327

使用[ClickOnce](http://msdn.microsoft.com/en-us/library/t71a733d%28v=vs.100%29.aspx) - 正确配置时它会处理依赖关系，并与 VS 集成/免费。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:18:28.043

编辑：所以 vs express 版本不支持设置项目。B计划：[蜡](http://sourceforge.net/projects/wix/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:18:53.800

简单的。您的安装程序不能是 .net 应用程序。只需编写您自己的 c++ 版本或使用一些现有的应用程序。这是一个链接，向您展示如何进行 .net 4 的静默安装。只需将安装应用程序包含在您的程序中即可。如果那里的某些 msi 安装程序工具不支持 .net 安装，我会感到非常惊讶。

[http://blogs.msdn.com/b/astebner/archive/2009/04/16/9553804.aspx](http://blogs.msdn.com/b/astebner/archive/2009/04/16/9553804.aspx)

# javascript - 扩展一个类或创建一个新函数，哪个更好？

> ID：13274654
> 
> 赞同：0
> 
> 时间：2012-11-07T17:09:46.680
> 
> 标签：javascript, cross-browser, ecmascript-5

如果有人想`Array.prototype.filter`为旧浏览器实现一个功能（例如），哪种方法更好？为什么？各有什么优缺点？

```
if (!Array.prototype.filter) {
  Array.prototype.filter = function() {
    //implementation
  }
} 
```

或者

```
function myFilter(e,i,f) {
    if (!Array.prototype.filter) {
        //implementation
    } else {
        return Array.prototype.filter(e,i,f);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:02:57.613

就个人而言，我大部分时间都使用第一种方法（添加`Array.prototype.filter`），但有时我不使用。在为旧浏览器编写大型框架时，我不使用第一种方法，它需要与 Internet 上的任何其他脚本（包括坏脚本）配合使用。

以下是需要考虑的事项。假设您`Array.prototype.filter`使用您描述的方法进行填充，然后向您的网站添加一个 3rd 方脚本，该脚本执行以下操作：

```
var someArray = [ 'a', 'b', 'c' ];
console.log('The first three letters of the alphabet are: ');
for (var i in someArray)
    console.log(someArray[i]); 
```

结果？

```
The first three letters of the alphabet are: 
a
b
c
function () { ... } 
```

您的过滤器功能被打印出来！现在，在技术层面上，没有人应该使用循环来迭代数组`for...in`，但是您无法控制 3rd 方脚本可能会做什么。这是主要的缺点，当您编写一个在整个 Internet 上使用的大型库时，值得考虑。

这可以防止您在`Object.prototype`句号中添加任何内容（使用简单的 Object.prototype.method = function() { ... } `assignment), because`for...in `is good to use on other types of objects, and this kind of shimming breaks`for...in`。

但是，如果您只是编写要在您自己的网站上使用的代码，并且您知道您将包含的脚本质量很高，并且不会犯这样的错误，那么这是一种很好的技术。

此外，如果您的代码仅适用于兼容 ECMAScript 5 的浏览器，您可以将 shim 定义为不可枚举，这将防止它们出现在`for...in`循环中。我目前正在开发一个项目，以在 ES5 浏览器中使用 ECMAScript 6 方法填充，因为它只打算在 ES5 浏览器中运行，所以我可以摆脱：

```
Object.defineProperty(Array.prototype, 'contains', {
    value: function(value) {
        // Implementation
    },
    enumerable: false,
    writable: true,
    configurable: true
}); 
```

以这种方式定义 shim 可以防止它出现在`for...in`循环中，因此在 上使用它甚至是安全的`Object.prototype`，**前提是您的实现准确地遵循 spec/draft**。

这带来了第二点。如果您不确定是否可以按照规范准确实现该方法，最好不要填充它。这可能会破坏检查内置并在可用时使用它的库，但会退回到某些东西否则，如果不是。最好让他们一无所有，而不是使用损坏的实现。

正是出于这个原因，我从不尝试部分实现 shim。例如，`Object.create`不能在 ES3 浏览器中完全实现，所以我永远不会填充这个。我只是使用我自己的`myLibrary.create`函数，它的功能可能类似，但至少任何可以检查是否存在的代码`Object.create`都不会被误导相信它有一个完整的工作版本。

故事的寓意：如果您要进行 shim，请查看 MDN 上一些非常棒的、符合规范的 shim，并学习编写类似的代码：[Array.prototype.filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter#Compatibility)

* * *

最后一点：许多库不在方法中填充的原因`Array.prototype`可能部分是出于这些考虑，但在许多情况下也有历史原因。*像 jQuery 这样的库之前* 正在开发，`filter`是一种标准的内置方法。Prototype.js 采取了*添加*非标准方法的方法，这比上面讨论的缺点更多。jQuery 决定不向内置原型添加非标准方法，这就是它们具有`$.filter`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:14:05.990

第二种方法更常见；它被 jQuery 和 Underscore.js 等流行的 shim JS 库所使用。

也就是说，扩展**本机对象**远不如扩展**宿主对象**危险（后者是典型的“第 22 条规则”：您扩展它们以在不能很好地处理宿主对象扩展的浏览器中提供额外的功能）。[这篇文章](http://perfectionkills.com/extending-built-in-native-objects-evil-or-not/)总结了一下：

> 不要忘记编写正确、合规的垫片很难。如有疑问，请使用独立对象。当您正在填充的方法是未完成规范的一部分时，请使用独立对象。只有当您确定方法合规性并且方法是已完成的、面向未来的规范的一部分时，直接填充原生对象才是安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T05:06:49.370

对于新的标准 js 函数和类，最佳实践是[shiming](https://github.com/kriskowal/es5-shim)，如果在旧浏览器上找不到该函数，则扩展类。

但是，如果该函数没有成为标准，最佳实践是创建新函数并且不要更改标准类，因为如果您使用将来可能以不同行为使用的函数名称，它将破坏您的应用程序。

# c# - 我应该使用 goto 语句吗？

> ID：13274661
> 
> 赞同：5
> 
> 时间：2012-11-07T17:10:10.483
> 
> 标签：c#, goto

我有一段代码如下：

```
try
{
Work:

   while(true)
   {
      // Do some work repeatedly...
   }
}
catch(Exception)
{
   // Exception caught and now I can not continue 
   // to do my work properly

   // I have to reset the status before to continue to do my work
   ResetStatus();

   // Now I can return to do my work
   goto Work; 
} 
```

与使用相比有更好的选择`goto`吗？或者这是一个很好的解决方案？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-07T17:13:28.120

听起来你*真的*想要一个循环。我会把它写成：

```
bool successful = false;
while (!successful)
{
    try
    {
        while(true)
        {
            // I hope you have a break in here somewhere...
        }
        successful = true;
    }
    catch (...) 
    {
        ...
    }
} 
```

您可能想改用`do`/`while`循环；我*倾向于*更喜欢直`while`循环，但这是个人喜好，我可以看到它在这里可能更合适。

不过我*不会*用`goto`。它往往使代码更难遵循。

当然如果你*真的*想要一个无限循环，只要把循环放在`try/catch`里面：

```
while (true)
{
    try
    {
        ...
    }
    catch (Exception)
    {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-07T17:12:53.167

`Goto`很少使用合适的构造。使用会使 99% 的查看您的代码的人感到困惑，甚至在技术上正确使用它也会显着减慢对代码的理解。

在大多数情况下，代码重构将消除对`goto`. 即在您的特定情况下，您可以简单地`try/catch`在里面移动`while(true)`。将迭代的内部代码制作成单独的函数可能会使其更加清晰。

```
while(true)
{
  try
  {
      // Do some work repeatedly...
  }
  catch(Exception)
  {
   // Exception caught and now I can not continue 
   // to do my work properly

   // I have to reset the status before to continue to do my work
   ResetStatus();
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:15:29.340

将 try/catch 移到 while 循环中似乎更有意义。然后您可以处理错误，循环将正常继续，而无需使用标签和 goto 路由控制流。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-07T17:16:16.253

在每次迭代中捕获并恢复状态，即使在外部捕获也会起作用，但您仍然处于循环中，您可以决定是继续还是中断循环。

**另外：**从一开始就捕获一个`Exception`错误（如果您捕获`StackOverflowException`或`MemoryLeachException`-**编辑：这只是例如，检查文档以了解您在现实中可以捕获什么**）。捕获您希望抛出的具体类型的异常。

```
while(true)
{
    try
    {
        // Do some work repeatedly...
    }
    catch(FileNotFoundException) //or anything else which you REALLY expect.
    {
        // I have to reset the status before to continue to do my work
        ResetStatus();
        //decide here if this is till OK to continue loop. Otherwise break.
    }
} 
```

对于那些在评论中非常聪明的人：[为什么不捕获一般异常](https://stackoverflow.com/questions/426346/is-this-a-bad-practice-to-catch-a-non-specific-exception-such-as-system-exceptio)

# c++ - 将 gsl_ran_hypergeometric_pdf(k, n1, n2, t) 转换为 boost::math::hypergeometric_distribution

> ID：13274665
> 
> 赞同：1
> 
> 时间：2012-11-07T17:10:21.267
> 
> 标签：c++, boost, statistics, gsl

如何翻译这个使用来自[GNU 科学图书馆的超几何分布函数的 C++ 程序](http://www.gnu.org/software/gsl/)

[http://www.gnu.org/software/gsl/manual/html_node/The-Hypergeometric-Distribution.html](http://www.gnu.org/software/gsl/manual/html_node/The-Hypergeometric-Distribution.html)

转换为使用[Boost 库](http://www.boost.org/)中类似函数的 C++ 程序？

```
#include <cstdlib>
#include <iostream>
#include <gsl/gsl_randist.h>
#include <gsl/gsl_cdf.h>

int main(int argc,char *argv[]) {
  unsigned int n1 = 256;
  unsigned int n2 = 1583;
  unsigned int t = 300;
  unsigned int k = 40;
  std::cout << gsl_ran_hypergeometric_pdf(k, n1, n2, t)
            << std::endl
            << gsl_cdf_hypergeometric_P(k, n1, n2, t)
            << std::endl;
  return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:12:58.253

这是对 Boost 函数的翻译：

```
#include <cstdlib>
#include <iostream>
#include <boost/math/distributions/hypergeometric.hpp>
#include <boost/math/policies/policy.hpp>

int main(int argc, char *argv[]) {
  unsigned int n1 = 256;
  unsigned int n2 = 1583;
  unsigned int t = 300;
  unsigned int k = 40;
  boost::math::hypergeometric_distribution<double> hg_dist(n1, t, n1 + n2);
  std::cout << boost::math::pdf<double>(hg_dist, k)
            << std::endl
            << boost::math::cdf<double>(hg_dist, k)
            << std::endl;
  return EXIT_SUCCESS;
} 
```

有关更多信息，请参阅 [http://www.boost.org/doc/libs/1_52_0/libs/math/doc/sf_and_dist/html/math_toolkit/dist/dist_ref/dists/hypergeometric_dist.html](http://www.boost.org/doc/libs/1_52_0/libs/math/doc/sf_and_dist/html/math_toolkit/dist/dist_ref/dists/hypergeometric_dist.html)

# cuda - 全局内存详细信息

> ID：13274666
> 
> 赞同：0
> 
> 时间：2012-11-07T17:10:27.740
> 
> 标签：cuda

这是 CUDA Global Memory 的后续问题[，它在哪里？](https://stackoverflow.com/questions/11178506/cuda-global-memory-where-is-it) 参考 GSmith 的回应。这些 Q 解决了 CC > 2.0 的情况。

当我查找我的 Nvida 卡的规格时，它列出了 2GB 的“内存” [。](http://en.wikipedia.org/wiki/Nvidia_quadro)我开始相信这是这张卡的“全球”内存。也就是说，这是驻留在“片外”但在卡上的 GDDR3 内存。这是正确的吗？

我没有看到任何规范的“内存”为零的情况。一个存在吗？也就是说，我可以有一张没有片外存储器的卡吗？我所有的纹理、本地和常量内存实际上都驻留在固定和映射的主机内存中。

我可以通过固定超过 2GB 的主机内存来扩展我的全局内存使用量吗？我可以使用我所有的片外全局内存 (2GB) 并添加 (1GB) 更多的全局固定内存吗？或者我是否理解这张卡最多只能提供 2GB 的寻址空间？即我只能访问 2GB 的内存、未固定、固定、映射或任何组合。

如果设备使用固定的主机内存（未映射），我是否需要从 dev 到主机的 Memcpy？也就是说，内存在物理上位于主机端。它正在被设备使用，所以他们都可以看到它。为什么我需要将它复制到主机，当它已经存在时。默认情况下，它似乎是“映射”的。（什么机制阻止了这种双重访问？）

如何将共享内存映射到全局内存？（我在文档中没有找到任何提及。）这是一个“映射”的安排，还是我仍然需要将它从全局复制到共享，然后再回来？（这可以为我节省复制步骤吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:42:47.747

建议[每个问题问一个问题](https://meta.stackexchange.com/questions/39223/one-post-with-multiple-questions-or-multiple-posts)。

> 当我查找我的 Nvida 卡的规格时，它列出了 2GB 的“内存”。我开始相信这是这张卡的“全球”内存。也就是说，这是驻留在“片外”但在卡上的 GDDR3 内存。这是正确的吗？

是的。

> 我没有看到任何规范的“内存”为零的情况。一个存在吗？也就是说，我可以有一张没有片外存储器的卡吗？我所有的纹理、本地和常量内存实际上都驻留在固定和映射的主机内存中。

最接近这个想法的 NVIDIA 可能是在[Ion 2 芯片组](http://www.nvidia.com/object/picoatom_specifications.html)中。但是没有支持 cuda 的 nvidia 独立显卡具有零板载片外内存。

> 我可以通过固定超过 2GB 的主机内存来扩展我的全局内存使用量吗？

您可以固定超过 2GB 的主机内存。但是，这不会扩展全局内存。它确实可以实现多种功能，例如提高主机设备传输率、重叠复制和计算以及从 GPU 对主机内存的零复制访问，但这与您使用全局内存的用途不同。零拷贝技术可能最接近将全局内存扩展到主机内存（概念上），但从 GPU 的角度来看，零拷贝非常慢。

> 如果设备使用固定的主机内存（未映射），我是否需要从 dev 到主机的 Memcpy？

是的，您仍然需要来回 cudaMemcpy 数据。

> 也就是说，内存在物理上位于主机端。它正在被设备使用

我不知道这个概念是从哪里来的。也许您指的是[零拷贝](http://docs.nvidia.com/cuda/cuda-samples/index.html#simplezerocopy)，但与访问全局内存中的数据相比，零拷贝相对较慢。在小数据大小的情况下应该明智地使用它，并且绝不是一种直接增加卡上全局内存有效大小的直接方法。

> 如何将共享内存映射到全局内存？

共享内存不会自动映射到全局内存。该方法是在共享内存和全局内存之间来回复制您需要的数据。

# c++ - 有没有更好的方法来删除对存储在向量中的元素的原始指针引用

> ID：13274668
> 
> 赞同：2
> 
> 时间：2012-11-07T17:10:34.137
> 
> 标签：c++, stl

```
class LargeClass
{}

void FunctionA(const LargeClass&) {}

std::vector<LargeClass> vecLargeClass; // populate vecLargeClass

const LargeClass* prev = vecLargeClass[0];
for( ... )
{
    ...
    if(...)
       prev = &vecLargeClass[i];
} 
```

我需要保留对存储在向量中的元素的引用。为了避免复制，我目前使用原始指针。或者我可以存储一个指向该元素的索引。

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T17:17:56.893

**是**`vector`的，只要`vector`迭代器不失效，您就可以保留对元素的“引用” 。这是一个很大的警告。

A`vector`的迭代器在`vector`重新分配时变得无效，这可能发生在您将元素添加到`vector`. 此外，当您`erase`从 a 中获取一个项目时`vector`，移除点及之后的所有迭代器都将失效。

这一切都很复杂，最好不要担心。如果您需要迭代器永远不会失效（只要您不删除*该*项目本身），a`vector`可能不是您使用的最佳集合。相反，您可能会考虑 a `list`、 a`map`或其他集合。请注意，每个都有自己的权衡取舍。

但是，您可能根本不需要关心*迭代器*。如果您`vector`存储的不是项目本身，而是指向项目的指针，那么即使重新分配向量，指针指向的东西也不会移动。走这条路，当然，如果可能的话，你应该使用智能指针。从表面上看，最好的似乎是`shared_ptr`。所以你的声明变成：

```
std::vector<shared_ptr<LargeClass>> 
```

最后，如果您真的需要使用 a`vector`并且不想弄乱智能指针，那么最好不要跟踪对 中的项目的“引用” `vector`，而是跟踪它们的索引位置。假设您要在 处跟踪项目`vecLargeClass[3]`。即使你做了一些使迭代器无效的事情，有问题的项目仍然在 index `3`。与其跟踪`interator`s 或指向事物的指针，不如跟踪它们在`vector`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:13:35.303

存储指针或对向量元素的引用时要小心。某些操作可以使这些引用无效，例如`push_back`,`resize`等。如果您确定索引不会更改，那么它将是最安全的。正如评论中提到的marcin_j，智能指针在push_back、resize等情况下无助于失效。

# android - libgdx 的 InputProcessor 不会触发

> ID：13274670
> 
> 赞同：0
> 
> 时间：2012-11-07T17:10:43.360
> 
> 标签：android, libgdx

我正在尝试在 Android 上运行一个简单的 libgdx 项目。一切都很好，但我的 InputProcessor 不会触发它的事件。我根据本教程实现了所有内容： [http ://code.google.com/p/libgdx-users/wiki/IntegratingAndroidNativeUiElements3TierProjectSetup#Code_Example](http://code.google.com/p/libgdx-users/wiki/IntegratingAndroidNativeUiElements3TierProjectSetup#Code_Example)

“showToast”的第一次调用工作正常，并显示在我的屏幕上 => showToast-Method 确实有效。不幸的是，我无法触发任何 InputProcessor 事件。甚至调试器也不会止步于此，因此绝对不会调用它们。

编辑：这是完整的代码。我只省略了计算器类，因为它工作正常，在这里不应该有任何问题。当然，如果有人不同意，我可以随时添加。

**libgdx 主项目中的 Surface 类（可以说是主类）**

```
public class Surface implements ApplicationListener {

  ActionResolver actionResolver;

  SpriteBatch spriteBatch;
  Texture texture;
  Calculator calculator;

  public Surface(ActionResolver actionResolver) {
    this.actionResolver = actionResolver;
  }

  @Override
  public void create() {

    spriteBatch = new SpriteBatch();
    texture = new Texture(Gdx.files.internal("ship.png"));
    calculator = new Calculator(texture);

      actionResolver.showToast("Tap screen to open Activity");

      Gdx.input.setInputProcessor(new InputProcessor() {
        @Override
        public boolean touchDown(int x, int y, int pointer, int button) {
            actionResolver.showToast("touchDown");
            actionResolver.showMyList();
            return true;
        }

        // overriding all other interface-methods the same way
      });
  }

@Override
public void render() {
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
    calculator.update();
    spriteBatch.begin();
    calculator.draw(spriteBatch);
    spriteBatch.end();

}

// Overriding resize, pause, resume, dispose without functionality

} 
```

**libgdx 主项目中的 ActionResolver 接口**

```
public interface ActionResolver {
  public void showMyList();
  public void showToast(String toastMessage);
} 
```

**在我的 Android 项目中实现 ActionResolver 接口**

```
public class ActionResolverImpl implements ActionResolver {

Handler uiThread;
Context appContext;

public ActionResolverImpl(Context appContext) {
    uiThread = new Handler();
    this.appContext = appContext;
}

@Override
public void showMyList() {
    appContext.startActivity(new Intent(this.appContext, MyListActivity.class));
}

@Override
public void showToast(final String toastMessage) {
    uiThread.post(new Runnable() {
        @Override
        public void run() {
            Toast.makeText(appContext, toastMessage, Toast.LENGTH_SHORT).show();
        }
    });

}

} 
```

**用于初始化 Suface-Class 的 Android Activity**

```
public class AndroidActivity extends AndroidApplication {

ActionResolverImpl actionResolver;

@Override
public void onCreate(android.os.Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    actionResolver = new ActionResolverImpl(this);

    initialize(new Surface(actionResolver), false);
} 
```

}

我还在 Surface 类中实现了 InputProcessor，但这不应该（也没有）有任何区别。任何想法，我错过了什么？

# javascript - 用纯 JavaScript 编写 jQuery 语句

> ID：13274678
> 
> 赞同：1
> 
> 时间：2012-11-07T17:11:12.450
> 
> 标签：javascript, jquery

我正在使用 Wikipedia API 仅获取已提供关键字的文章的第一段。

我必须从 JSON 响应中提取格式化文本，但在将其显示在 id 为 wiki 的 div 中之前，抑制一些不需要的信息，如侧边栏（在表格中并具有类名信息框） -

```
$.getJSON("http://en.wikipedia.org/w/api.php?" +
            "action=mobileview&format=json&page=" +
            keyword + "&redirect=no&sections=0&prop=text&" +
            "sectionprop=toclevel%7Clevel%7Cline%7Cnumber" +
            "%7Cindex%7Cfromtitle%7Canchor&callback=?",
          function(json) { 
                    $('#wiki').html(json.mobileview.sections[0].text)
                              .find("dl,sup,.thumb,table.infobox,table.metadata")
                              .remove().end(); 
          }
); 
```

我已经[修改了 jQuery 技巧，以](http://chase-seibert.github.com/blog/2012/02/03/jquery-remove-script-tags-from-a-string-of-html.html)从包含请求的 Wikipedia 页面的 HTML 代码的 JSON 响应中删除标签/选择器。我想在用 HTML/JS 编写的 Windows 8 商店应用程序中使用上述代码段。我希望将以下行转换为本机 JavaScript 并在不使用 jQuery 的情况下实现选择器删除代码 -

```
$('#wiki').html(json.mobileview.sections[0].text)
           .find("dl,sup,.thumb,table.infobox,table.metadata")
           .remove().end(); 
```

我是一个 JavaScript 新手。任何人都可以将此行转换为普通的 JavaScript 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:24:46.517

```
var wiki = document.querySelector('#wiki');
wiki.innerHTML = json.mobileview.sections[0].text;

var content = wiki.querySelectorAll("dl,sup,.thumb,table.infobox,table.metadata");

for (var i = 0; i < content.length; i++) {
    if (content[i].nodeName.toUpperCase() === "A")
        content[i].parentNode.insertBefore(content[i].firstChild, content[i]);

    content[i].parentNode.removeChild(content[i]);
} 
```

这适用于大多数浏览器，包括 IE8 和更高版本。

# postgresql - LIKE 在列名上使用 %

> ID：13274679
> 
> 赞同：42
> 
> 时间：2012-11-07T17:11:23.683
> 
> 标签：postgresql, sql-like

这是导致语法错误的查询：

```
SELECT * 
FROM account_invoice,sale_order
WHERE sale_order.name LIKE %account_invoice.origin% 
```

account_invoice.origin 字段包含 sale_order.name 的文本，以及其他文本，因此我需要在 account_invoice.origin 字符串中的任何位置匹配 sale_order.name 字符串。

我正在使用 PostgreSQL 8.4。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-11-07T17:18:36.763

试试这个

```
SELECT * 
FROM account_invoice,sale_order
WHERE sale_order.name LIKE '%'  || account_invoice.origin || '%' 
```

`%`需要单引号，因为模式是一个字符串。

`||`是连接的运算[符](http://archives.postgresql.org/pgsql-sql/2000-07/msg00294.php)。

# mysql - Redhat openshift - rails mysql响应需要超过20秒

> ID：13274681
> 
> 赞同：1
> 
> 时间：2012-11-07T17:11:32.620
> 
> 标签：mysql, ruby-on-rails-3, redhat, openshift

我有在 Redhat open shift 上运行 mysql 的 rails (v3.0.9)。

我已经看到获得由单个表中的所有记录组成的 JSON 响应大约需要**35-40 秒。**这张表中有大约 10000 条记录。

有没有办法让它更快？即至少在 10 秒内得到响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:39:20.547

首先，我希望对结果进行分页。随着您请求 JSON 响应，我假设您正在使用 AJAX 加载这些结果？

虽然我以前没有使用过它，但我相信您可以使用 mysql2 gem 为大型表“流式传输”记录。[https://github.com/brianmario/mysql2#streaming](https://github.com/brianmario/mysql2#streaming)。然而，在那之前，我会分页。无需一次性将 10k 条记录加载到页面上。

此外，缓存结果并在重要数据更改时使缓存无效。

# android - 不从 ListFragment 继承的 ListView

> ID：13274685
> 
> 赞同：1
> 
> 时间：2012-11-07T17:11:41.067
> 
> 标签：android

我在 ListView 上看到的所有使用片段的示例都扩展自 ListFragment。就我而言，当我从基本片段（不能从 ListFragment 继承）扩展我的片段时，我不能使用 ListFragment。下面有没有办法（或例子）。

1.  不从 ListFragment 继承的片段
2.  此片段显示通过 ArrayAdapter 填充的项目列表
3.  我将使用 viewholder 来显示每个项目的自定义布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:17:34.097

将 a`ListView`放入片段的 XML 文件中

# c++ - 重新排序 gnu autotools 链接器标志

> ID：13274688
> 
> 赞同：1
> 
> 时间：2012-11-07T17:11:50.010
> 
> 标签：c++, linker, g++, autotools, compiler-flags

我在 C++ 中的项目中使用 gnu autotools（autotools 配置由 eclipse cdt 自动生成，但我认为这无关紧要）。我正在使用 LLVM 库，现在我遇到了链接器标志顺序的问题。

基本上，在构建项目时，eclipse 会执行“make”。Make 执行了很多命令，但最后它执行 g++ 编译器，如下所示：

```
g++ -DPACKAGE_NAME=\"test\" -DPACKAGE_TARNAME=\"test\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"test\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"test\" -DVERSION=\"1.0\" -I.    `llvm-config --cppflags --ldflags --libs core` -g -O2 -MT test.o -MD -MP -MF .deps/test.Tpo -c -o test.o test.cpp
mv -f .deps/test.Tpo .deps/test.Po 
```

然后是链接器：

```
g++ `llvm-config --cppflags --ldflags --libs core` -g -O2   -o a.out test.o 
```

问题是，如果参数“test.o”不在行首，链接器就会失败，所以它应该是：

```
g++ test.o `llvm-config --cppflags --ldflags --libs core` -g -O2   -o a.out 
```

如何在 Makefile.am 或 gnu autotools 的任何配置文件中更改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:39:49.620

我没有找到答案，但到目前为止，我发现 LLVM 与包含自定义 automake 系统的项目模板捆绑在一起，它以正确的方式处理所有内容。

如果要访问模板，可以在 $LLVMSRC/projects/sample 文件夹中找到它。

# objective-c - 对 WCF REST 服务的 AFNetworking JSON 请求

> ID：13274689
> 
> 赞同：4
> 
> 时间：2012-11-07T17:11:51.830
> 
> 标签：objective-c, ios, wcf, rest, afnetworking

我将 AFNetworking 用于我的 REST 服务 (WCF)。这是代码：

```
 NSDictionary *userName = [NSDictionary dictionaryWithObject:@"user" forKey:@"UserNameOrEmail"];
  NSDictionary *pass = [NSDictionary dictionaryWithObject:@"123" forKey:@"Password"];
  NSArray *credentials = [NSArray arrayWithObjects:userName,pass,nil];
  NSDictionary *params = [NSDictionary dictionaryWithObject:credentials forKey:@"request"];

  AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:
  [NSURL URLWithString:@"http://server"]];

  [client postPath:@"/ProfileWebService.svc/login" parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSString *text = [[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding];
    NSLog(@"Response: %@", text);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"%@", [error localizedDescription]);
}]; 
```

但我收到 400 HTTP 错误。

使用 HTML 和 AJAX 它看起来像：

```
 $(document).ready(function () {

            $("#login_call").click(function () {
                $.ajax({
                    type: 'POST',
                    url: 'http://server/ProfileWebService.svc/login',
                    contentType : 'application/json',
                    dataType: 'json',
                    data: JSON.stringify({request: {UserNameOrEmail: $('#login_username').val(), Password: $('#login_password').val()}}),
                    success: function (data) {
                        $('#login_result').val('Code: ' + data.LoginResult.Code + '\nFault String: ' + data.LoginResult.FaultString);
                    }
                });
            });

        }); 
```

并且工作正常。

参数有什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T07:33:25.707

在 Stackoverflow 上学习和搜索更详细的 AFNetworking 文档给了我一个**解决方案**：

1.请求的参数应该是这样的：

```
 NSDictionary *params =
        [NSDictionary dictionaryWithObjectsAndKeys:
           [NSDictionary dictionaryWithObjectsAndKeys:
                           username.text, @"UserNameOrEmail",
                           password.text, @"Password",
                           nil],
        @"request",
        nil]; 
```

2.创建AFHTTPClient

```
 AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:
        [NSURL URLWithString:@"http://server"]]; 
```

3.当我将 JSON 作为参数发送时，我必须添加：

```
 client.parameterEncoding = AFJSONParameterEncoding; 
```

在我这样做之后，我摆脱了 404 错误，但我无法用 JSON 响应做任何事情，我不知道为什么。但解决方案是：

4.创建请求：

```
 NSMutableURLRequest *request = 
  [client requestWithMethod:@"POST" path:@"/ProfileWebService.svc/login" parameters:params]; 
```

5.创建操作：

```
 AFJSONRequestOperation *operation =
  [AFJSONRequestOperation JSONRequestOperationWithRequest:request
  success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON)
  {
     NSLog(@"JSON: %@", [JSON valueForKeyPath:@"LoginResult"]);
     NSLog(@"Code: %@", [[[JSON valueForKeyPath:@"LoginResult"] valueForKeyPath:@"Code"] stringValue]);
     NSLog(@"FaultString: %@", [[JSON valueForKeyPath:@"LoginResult"] valueForKeyPath:@"FaultString"]);
  }
  failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON)
  {
     NSLog(@"error opening connection");
  }]; 
```

6.开始操作：

```
 [operation start]; 
```

希望一些 AFNetworking 初学者觉得这篇文章有帮助。

# php - 在 PHP 中将十六进制转换为图像？

> ID：13274691
> 
> 赞同：4
> 
> 时间：2012-11-07T17:11:57.907
> 
> 标签：php, mysql, web-services

我正在开发通过`PHP Webservice`. 这是我第一次使用 PHP。我设法将数据上传到数据库。现在我需要发送图像以将其存储在 ftp 服务器中。为此，我转换`image->hex`并从我的应用程序发送。

**服务器端**

我得到了十六进制代码，但不确定如何将其转换为图像并存储在 ftp 服务器中。我真的在这里挣扎。我用谷歌搜索了它，但找不到确切的一个。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T17:14:27.907

将 HEX 字符串转换为二进制：

```
$binary = pack("H*", $hex); 
```

[`pack("H*", ...)`](http://php.net/pack)相当于[`hex2bin`](http://php.net/hex2bin)，从 PHP 5.4 开始可用。

将其写入磁盘：

```
file_put_contents("file.png", $binary); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:28:04.747

假设您在想要将此十六进制转换为真实图像的页面中收到一个十六进制字符串。请检查此代码段是否对您有帮助。

```
<?php  

    $hexpic=".......................
    .....................";

    # convert the hex string to binary

    $data = pack("H" . strlen($hexpic), $hexpic);

    #write the binary string into an image file

    file_put_contents("sample.png", $data);
?> 
```

# java - 如何动态填充 JTree？

> ID：13274693
> 
> 赞同：1
> 
> 时间：2012-11-07T17:12:02.003
> 
> 标签：java, swing, loops, tree, nodes

我正在做一个需要使用树数据结构的项目。做了一些研究后，我发现 Java JTree 对我的项目很有用，但是我偶然发现了一个问题，我花了一周时间修复但无济于事。

这是问题所在，为了创建一个新节点，必须实例化 DefaultMutableTreeNode ，我不确定如何在循环中完成。通常当我们想在 JTree 中创建一个新节点时，我们会首先通过以下方式声明节点：

```
DefaultMutableTreeNode parent = new DefaultMutableTreeNode("This is parent node.");
DefaultMutableTreeNode child = new DefaultMutableTreeNode("This is child node."); 
```

然后，为了将子节点添加/链接到父节点，我们将执行以下操作：

```
parent.add(child); 
```

我有两个包含父节点和子节点的arraylist，它们以父子关系相互对应，这意味着arraylistParent.get(x) 将始终是arraylistChild.get(x) 的父级。

我在想，通过使用 for 循环，我可以做到：

```
for (int x = 0; x < arraylistParent.size(); x++){
    parent.add(new DefaultMutableTreeNode(arraylistChild.get(x)));
} 
```

这只能在平面层次结构树中工作，对我来说显然不是这样。我将在 arrayListParent 中有不同的父节点，我需要在添加子节点之前对其进行检查，但同样，并非所有子节点都具有相同的单个父节点。我的数组列表可能包含如下内容：

```
arraylistParent = [root, p1, p2, p2, p3, p1]
arraylistChild = [p1, p2, p5, p3, p4, p5] 
```

我想生成这样的树结构：

```
root
  ..p1
    ..p2
      ..p5          
      ..p3
        ..p4
    ..p5 
```

显然，我可以在里面抛出一些 if 循环来检查 parent.getUserObject() 是否与 arraylistParent.get(x) 相同，但只有与字符串“这是父节点”匹配的那些才会被检查和添加。

如果在循环中找到不同的、不存在的父级，则需要创建一个新的父级，这是我不知道如何解决的棘手部分，因为我不知道如何让循环自动创建一个新的子节点的父实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:55:41.897

让我们假设您的节点数据是字符串（也就是说，您的 ArrayList 的内容是字符串）。不过，该解释适用于任何其他 Java 对象。我们将这些内容称为“节点”，与“树节点”不同。

你可以创建一个`HashMap<String, DefautMutableTreeNode> m`，这样`m.get(node)`会返回对应的`TreeNode`。

现在，您必须遍历父母的数组列表。在每个位置，您将有一个父母和一个孩子。在地图上查找它们。如果父 TreeNode 不存在，您首先必须创建它。如果子 TreeNode 不存在，则同样适用。您应该确保在创建任何 TreeNode 后更新地图。最后，您会将孩子标记为父母的孩子。

在此算法结束时，您应该查看子数组中的所有节点。无父者为根。这是你树的根。

# java - Tomcat 7 嵌套 CombinedRealm、LockoutRealm 和 DataSourceRealm

> ID：13274696
> 
> 赞同：7
> 
> 时间：2012-11-07T17:12:23.527
> 
> 标签：java, security, tomcat, realm

我试图在 Tomcat 7.0.32 中嵌套 Realms 如下（这里用伪 XML 编写）：

```
<CombinedRealm>
  <LockoutRealm>
     <DataSourceRealm/>
  </LockoutRealm>
  <UserDatabaseRealm/>
</CombinedRealm> 
```

这似乎不起作用 - 是否可以在 Tomcat 中将 Realms 嵌套两个以上的级别？我在日志中收到警告：

```
No rules found matching 'Server/Service/Engine/Realm/Realm/Realm'. 
```

背后的想法是，Web 服务有一些不能被锁定的关键用户（例如作为 DOS）和一些普通用户，这些用户的密码可能较弱，lockoutRealm 应该处于活动状态。我敢肯定，其他人也遇到过这种情况。

如果有其他方法可以实现这一点（例如 LockoutRealm 的白名单），请告诉我。

还需要单点登录。

我想扩展现有的 LockoutRealm 代码并使用一个永不锁定的帐户列表是一种选择，但我不太热衷于编写自己的 Realm，我宁愿不在该级别上向 Tomcat 添加自定义代码，因为这将对其他人来说设置复杂，并且每次 Tomcat 更新都可能会中断等。

谢谢你的帮助！

这是我的测试配置的 server.xml 的相关部分：

```
<Engine name="Catalina" defaultHost="localhost">

  <Realm className="org.apache.catalina.realm.CombinedRealm">

    <!-- Lockout realm for the DB users -->
    <Realm className="org.apache.catalina.realm.LockOutRealm">
      <!-- PRIMARY: DataSourceRealm with user DB -->
      <Realm className="org.apache.catalina.realm.DataSourceRealm"
         dataSourceName="jdbc/authority"
         userTable="user" userNameCol="username" 
         userCredCol="password" digest="SHA"
         userRoleTable="user_role" roleNameCol="rolename" />
    </Realm>

    <!-- FALLBACK:
         This Realm uses the UserDatabase configured in the global JNDI
         resources under the key "UserDatabase".  Any edits
         that are performed against this UserDatabase are immediately
         available for use by the Realm.  -->
    <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
           resourceName="UserDatabase"/>

  </Realm>

  <Host name="localhost"  appBase="webapps"
        unpackWARs="true" autoDeploy="true">

    <!-- SingleSignOn valve, share authentication between web applications
         Documentation at: /docs/config/valve.html -->
    <Valve className="org.apache.catalina.authenticator.SingleSignOn" />

    <!-- Access log processes all example.
         Documentation at: /docs/config/valve.html
         Note: The pattern used is equivalent to using pattern="common" -->
    <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
           prefix="localhost_access_log." suffix=".txt"
           pattern="%h %l %u %t &quot;%r&quot; %s %b" />

  </Host>
</Engine> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:23:20.593

现在的新答案是：

**更新到 Tomcat 7.0.33 或更高版本。**然后它完美地工作。

Christopher Schultz 非常友好地将我的问题转发到 Tomcat 用户列表。伟大的 Tomcat 开发人员立即解决了这个问题，并将其放在下一个版本中。非常感谢！

因此，您现在可以使用问题中的结构或具有不同顺序/“优先级”的结构：

```
...

<Engine name="Catalina" defaultHost="localhost">

  <Realm className="org.apache.catalina.realm.CombinedRealm">

    <!-- PRIMARY: tomcat-users.xml with critical system users
                  that should always work, DB independent and without lockout
                  NOTE: If the wrong password is given, the secondary path with
                        lockout is still attempted, so that a lockout on that path
                        will still occur and be logged. Still the primary path is not 
                        locked for access by that happening.                           -->
    <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
           resourceName="UserDatabase"/>

    <!-- SECONDARY: DataSourceRealm with DB with lockout functionality -->
    <!-- (three level nesting of realms requires Tomcat >= 7.0.33)     -->
    <Realm className="org.apache.catalina.realm.LockOutRealm" 
      failureCount="5" lockOutTime="60" > <!-- note that when an account is locked correct password
                                               login is no longer possible (would otherwise defeat purpose of lockout),
                                               but also lockoutTime is still reset in each correct attempt -->

      <Realm className="org.apache.catalina.realm.DataSourceRealm"
         dataSourceName="jdbc/authority"
         userTable="user" userNameCol="username" 
         userCredCol="password" digest="SHA"
         userRoleTable="user_role" roleNameCol="rolename" />

    </Realm>

  </Realm>

  <Host >

    ...

  </Host>
</Engine>

... 
```

当然，您也可以使用其他领域和其他组合。

请注意，日志中可能会产生误导：在此构造中，如果为存储在主要领域中的关键用户之一提供了错误密码，则主要领域拒绝访问，然后尝试通过锁定领域的辅助领域并也拒绝访问最终锁定用户名。这被锁定领域记录为警告“尝试对锁定的用户进行身份验证......”。仍然使用正确的密码，访问通过主要领域继续工作，因为它不通过锁定领域。即所有工作都按预期工作，只是日志消息可能会导致混乱（当然这是不可能避免的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T19:58:56.217

Apache commons-digester 用于解析配置文件，所以我怀疑这个特殊的用例根本不是预期的。

Tomcat`org.apache.catalina.startup.RealmRuleSet.addRuleInstances`似乎只能进行 2 级深度的`Realm`配置。似乎很简单，可以在其中添加另一层。

我必须看看如何配置消化器以查看是否可以支持任意级别，或者是否必须手动配置某些子集。

随意前往[Tomcat 用户列表](http://tomcat.apache.org/lists.html#tomcat-users)请求此类更改。

# android - 试图从主活动中停止另一个服务的 AsyncTask 中的 AsyncTask

> ID：13274697
> 
> 赞同：0
> 
> 时间：2012-11-07T17:12:23.247
> 
> 标签：android, service, android-asynctask

我有一个实现按钮单击以尝试停止我的 AsyncTask 的 Activity，它是服务的内部类并在我的服务内部执行。

主要活动

```
 if (s.equals("Stop scanning")) {
                fullscan.cancel(true);
                stopService(new Intent(AnalyzeActivity.this, ScanService.class));
                txtView.setText("Scanning is stopping...");
                txtView.setText("Scanning stopped");
                but.setText("Start scanning");
            } 
```

服务的 AsyncTask (fullscan) doInBackground

```
if (int i = 0; i < myList.size(); i++ )
        if (isCancelled()) {
            return null;
        }
}
return null; 
```

但即使在调用之后它似乎也没有被调用`fullscan.cancel(true)`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:02:36.520

您的活动如何连接到服务？您的活动应该只与绑定到它的底层服务（参考：[绑定服务](http://developer.android.com/guide/components/bound-services.html)）而不是`Service`'s进行通信`AsyncTask`。

在您的实例中，您的本地 IBinder 实现应该公开一个`cancelTask()`方法或类似的东西。当活动需要停止服务下正在完成的工作时，活动代码应该获取对服务的引用（这将在活动连接到服务时发生，参考：）`onServiceConnected`然后调用服务`cancelTask`。

然后，该服务将停止它自己的 AsyncTask 引用。

# c# - 我应该将所有构造函数参数放在要为 Unity 解析的接口中吗？

> ID：13274701
> 
> 赞同：0
> 
> 时间：2012-11-07T17:12:40.753
> 
> 标签：c#, inversion-of-control, prism, unity-container

我正在使用带有 Unity 的 Prism 来执行 IoC。我有一些类在它们的构造函数中有一些值类型参数（例如，字符串路径、整数）。

如果我想解析这些类，我应该如何处理这些参数？

我应该将这些参数放入接口还是应该将它们放入一个函数并在类解析后调用它？

谢谢，

魏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:19:11.943

您需要注册实现这些接口的类型。当您这样做时，您可以指定用于实例化类的构造函数参数，并且您可以提供实际值或要求容器注入解析的引用。请参阅[http://msdn.microsoft.com/en-us/library/ff660882(v=pandp.20).aspx](http://msdn.microsoft.com/en-us/library/ff660882(v=pandp.20).aspx)和[http://msdn.microsoft.com/en-us/library/ff660923(v=pandp. 20).aspx](http://msdn.microsoft.com/en-us/library/ff660923(v=pandp.20).aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T22:37:00.033

好吧，我尝试了很多不同的方法（例如注册具有特定名称的简单值，我尝试在入口点配置这些东西，当您配置整个 DI 容器时等），但它们都不清楚增加代码的复杂性。恕我直言，单一（少数）接口`IConfiguration`是最清晰、健壮和可维护的解决方案。

所以，现在我在几乎所有的应用程序中都使用这种方式：

```
interface IConfiguration
{
  string ConnectionString { get; }
  int MaxLevels { get; }
}

class Configuration: IConfiguration
{
  string ConnectionString { get { return "BlahBlah"; } }
  int MaxLevels { get { return 123; } }
}

myUnityContainer.RegisterType<IConfiguration, Configuration>(new ContainerControlledLifetimeManager();

class YourClass
{
  public YourClass(IConfiguration configuration)
  {
    // Use settings from "configuration"
  }
} 
```

当然，通常所有这些属性实际上都从 App.config 文件（或数据库）返回值

PS。请记住，您的代码不仅应该“干净且理论上很好”，而且好的代码的主要特征是可维护性和健壮性。任何人都应该打开您的代码并立即理解您的意思。恕我直言，此解决方案比其他解决方案更符合此标准。

# ruby-on-rails - 如何格式化多行 RSpec 期望 {}.to 改变

> ID：13274708
> 
> 赞同：7
> 
> 时间：2012-11-07T17:13:02.730
> 
> 标签：ruby-on-rails, ruby, rspec

有没有更好的方法来格式化这个测试以使其更具可读性？

```
expect { 
  within '.foo' do
    click_link 'Delete'
  end
}.to change {Foo.count}.by 1 
```

期望`do...end`有效，但更丑陋...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T18:36:10.547

也许是这样的？

```
expected = expect do
  within '.foo' do
    click_link 'Delete'
  end
end

expected.to change { Foo.count }.by 1 
```

不完全漂亮，但减少了一些线路噪音。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T02:54:31.830

由于将所有内容放在花括号中并放在一行上会太长，所以我会这样写：

```
expect do
  within(".foo") { click_link "Delete" }
end.to change { Foo.count }.by 1 
```

更新：未经测试，但这也应该有效：

```
click_delete_link = lambda { within(".foo") { click_link "Delete" } } 
expect { click_delete_link }.to change { Foo.count }.by 1 
```

但我还是更喜欢第一个版本:)

# mach-o - 男子气概标头向后兼容吗？

> ID：13274710
> 
> 赞同：2
> 
> 时间：2012-11-07T17:13:07.783
> 
> 标签：mach-o

位于`/usr/lib/mach-o`不同 iOS 版本 4、5、6 等的可执行文件的 macho 标头是否向后兼容？如果是这样，我在哪里可以获得它们的特定版本。我尝试在 Apple Darwin 网站上进行搜索，但他们并未将它们作为单独的项目进行维护。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T13:08:41.567

头文件是兼容的，但从 iOS 6 开始的 Mach-O 文件不兼容，已将 LC_UNIXTHREAD 加载命令替换为 LC_MAIN（以及添加了一些其他加载命令，这些命令在以前版本的 otool 和朋友中无法识别）操作系统）。这也适用于 Mountain Lion 二进制文件，出于同样的原因，它不能在 Lion 或更早版本上执行。

# wordpress - 处理 URL 末尾的斜杠

> ID：13274720
> 
> 赞同：0
> 
> 时间：2012-11-07T17:13:37.130
> 
> 标签：wordpress, apache, .htaccess, mod-rewrite, cpanel

对 wordpress 网站使用一致的 URL 结构有明显的优势。

我希望我的所有 URL 都以 /（主页和内部页面 URL）结尾。让我举一个示例网站，它可以非常有效地处理它，以便不以斜杠结尾或以多个斜杠结尾的 URL 被 301 重定向到带有单斜杠的 URL。

`http://viralpatel.net/blogs` 301 重定向到viralpatel.net/blogs/

`http://viralpatel.net/blogs//`301 重定向到viralpatel.net/blogs/

`http://viralpatel.net/blogs/` 200 好

`http://viralpatel.net/blogs/check-string-is-valid-date-java`301重定向到`http://viralpatel.net/blogs/check-string-is-valid-date-java/`

`http://viralpatel.net/blogs/check-string-is-valid-date-java//`301重定向到`http://viralpatel.net/blogs/check-string-is-valid-date-java/`

`http://viralpatel.net/blogs/check-string-is-valid-date-java/`200 好

知道什么 .htaccess 规则可以帮助实现这一目标。我当前的 .htaccess 看起来像：

```
 RewriteEngine On
    RewriteCond %{HTTP_HOST} ^javaexperience.com [NC]
    RewriteRule ^(.*)$ http://www.javaexperience.com/$1 [R=301,L]
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d    
    RewriteRule . /index.php [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:21:18.090

您将无法处理以 URI 结尾的 URL，`//`因为斜杠在处理 URI 之前已被规范化，因此 mod_rewrite 将永远无法匹配`//`（它只会看到一个`/`）。要处理这个问题，您可能需要浏览器方面的一些东西。`RewriteBase`对于没有斜线，在当前 htaccess 中的行上方添加：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*[^/])$ /$1/ [L,R=301] 
```

# jquery - Jquery 填充输入文本框而不是下面的下拉列表代码

> ID：13274723
> 
> 赞同：0
> 
> 时间：2012-11-07T17:13:45.573
> 
> 标签：jquery

我有一个很好的 jquery 代码片段（不是我的代码）。它按预期工作。如果我想填充文本框而不是附加到下拉列表，我该怎么做。

查询代码

```
 $('#ArtistId').append(
  $('<option></option>')
     .val(data.Artist.ArtistId)
     .html(data.Artist.Name)
     .prop('selected', true ); 
```

尝试过

```
$('#ArtistTexboxId').append($('<input></input>')
                   .val(data.Artist.ArtistId)
                   .html(data.Artist.Name); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:15:36.643

```
$('<input/>')
     .attr({
             id: 'ArtistTexboxId',
             name: data.Artist.Name
          })
    .val(data.Artist.ArtistId)
    .appendTo('#ArtistDiv')​;​ 
```

或者

```
$('#ArtistDiv')
   .append($('<input/>')
                .attr({
                        id: 'ArtistTexboxId',
                         name: data.Artist.Name
                     })
                .val(data.Artist.ArtistId)
          );​ 
```

**文本框**没有`innerHtml`

将该信息存储在 TextBox 的 name 属性中

**[小提琴](http://jsfiddle.net/sushanth009/k6wFv/)**

# css - div中的文本和图像 - 如何正确对齐？

> ID：13274724
> 
> 赞同：0
> 
> 时间：2012-11-07T17:13:45.000
> 
> 标签：css

我在 div 中有文本和图像，我希望文本在图像顶部对齐，而不是在中间对齐。

这是它的外观：[http ://bitly.com/VSSoul](http://bitly.com/VSSoul)

CSS：

```
.book1 {
    width: 100%;
    overflow: auto;
}

.book2 {
    width: 100%;
    overflow: auto;
}

.book1 img {
    float: right;
    width: 150px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
} 
```

如何使文本转到 div 的顶部，而不是图像的中心相对位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:20:36.637

它实际上与顶部对齐。h4 标签有默认边距，所以设置：

```
h4 {
  margin-top: 0;
} 
```

会成功的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:21:36.867

```
.book img {
    float: right;
    width: 150px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
}

.book {
    margin-bottom: 2em;
    overflow: auto;
} 
```

**演示 JSFiddle：http:**
[//jsfiddle.net/e636q/](http://jsfiddle.net/e636q/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:22:43.620

听你走。添加

```
h4 { margin-top: 0; }
.book1 {margin-bottom: 1.5em;} 
```

.book1 上的额外边距有助于将各个书籍分开

# sitecore - 在 Sitecores Advanced System Reporter 中是否可以选择报告中的所有项目？

> ID：13274737
> 
> 赞同：2
> 
> 时间：2012-11-07T17:14:23.990
> 
> 标签：sitecore, sitecore6

在 Sitecore Advanced System Reporter 模块中，是否有某种方法可以选择报告中的所有项目？我只能弄清楚如何一次选择一项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:57:23.417

您可以按住 control（添加个人）和 shift（选择其中的所有内容）按钮来选择项目，就像在 Windows 资源管理器中一样。我认为有一个设置可以说明每页显示多少个项目（app_config/include/asr.config，我认为）也可以添加更多项目以显示每页。

# javascript - 执行 Update.js 的问题

> ID：13274740
> 
> 赞同：0
> 
> 时间：2012-11-07T17:14:33.580
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3

我有一个控制器，其中更新操作响应 js。一切都很好，但我正在经历一些非常奇怪的行为。她是我的代码：

```
<% if @contact.errors.any? %>
<% else %>
  alert('What!?!');
  $("li#contact").replaceWith("<%= escape_javascript render @contact %>");
<% end %> 
```

当我没有错误时，我可以替换我的列表项。然而，在这条线之前或之后都没有运行。警报不会弹出，任何其他操作都不会运行。甚至将代码缩减为：

```
<% if @contact.errors.any? %>
    <% else %>
      alert('What!?!');
    <% end %> 
```

我无法让它警觉。我知道我还没有错误渲染，但我正在执行的没有错误。以前有没有人经历过不稳定的行为？（create.js、destroy.js 都可以正常工作）。

# google-analytics - 谷歌分析 utme 标签

> ID：13274741
> 
> 赞同：4
> 
> 时间：2012-11-07T17:14:34.120
> 
> 标签：google-analytics, tagging

所以我正在尝试跟踪一些标签，我发现我所有页面的 utme 标签的这个数字非常难看。它看起来像一个自定义事件标签，但我不知道这些数字代表什么，或者它们是否代表任何东西。

看起来像这样： utme: 14(1000*0*0*90*0*0*700*700)(1003*0*0*90*0*0*702*703)

14 之后的任何随机数。每次标签触发时，它们的区域也不同。

请帮忙。

# jquery - jQuery中的异常

> ID：13274742
> 
> 赞同：0
> 
> 时间：2012-11-07T17:14:43.667
> 
> 标签：jquery

如何为受 event.stopPropagation() 影响的容器内的元素创建某种形式的异常，例如

```
<ul class="test">
<li><a href="#" class="test1"></a></li>
</ul>
<script type="test/javscript">
$(".test").click(function(e){
    e.stopPropagation();
});
$(".test1").click(function(e){
    some statements...
});
</script> 
```

我希望 .test1 在单击时触发一个事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:22:24.817

事件冒泡，在您的情况下会停止任何带有点击处理[`stopPropagation`](http://api.jquery.com/event.stopPropagation/)的父元素。`<ul class="test">`

但是，您可能有兴趣检查传播是否已停止，[`event.isPropagationStopped`](http://api.jquery.com/event.isPropagationStopped/)请在事件处理中使用。

# jsf - 我怎么能从我的托管 Bean 调用 Richfaces.showModalPanel？

> ID：13274743
> 
> 赞同：0
> 
> 时间：2012-11-07T17:14:44.400
> 
> 标签：jsf, richfaces, jsf-1.2, richfaces-modal

是否有可能从我的操作返回中进行此调用？

例如：

```
public String myActionMethod() {
     // do some stuff here..

     return "Richfaces.showModalPanel('myModal')";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:22:57.103

如果有条件地显示模态面板是您的主要要求，请查看`showWhenRendered`（`show`在 RF4.x 中`popupPanel`）richfaces`modalPanel`组件的属性。将该属性绑定`showWhenRendered`到支持 bean 中的布尔值，并设置该值以反映显示弹出窗口的决定。

但是，为了反映 modalPanel 上的更改，建议将 modalPanel 本身封装在`<a4j:outputPanel layout="none"/>`容器中，然后在请求之间重新渲染该面板。至少对于 Richfaces 3.3，重新渲染动态显示的组件如果没有封装在另一个`<a4j:outputPanel layout="none"/>`.

除了上述之外，我不知道 Richfaces 明确提供客户端组件的服务器端远程处理（就像 Primefaces 对`RequestContext`对象所做的那样）

# ide - Codepad/ideone 风格的协作式 Web IDE？

> ID：13274745
> 
> 赞同：16
> 
> 时间：2012-11-07T17:14:47.300
> 
> 标签：ide, collaboration, code-editor, codepad, online-compilation

我正在寻找一个简单的协作式基于 Web 的文本编辑器，它可以编译并显示来自一些流行语言的输出，例如：C++、PHP 和 Python。

## 研究

### 编辑

*   [高手](http://ace.ajax.org)
*   [EditArea](http://www.cdolivet.com/editarea)（人们更喜欢 Ace，例如：web2py 和 ideone 移至 Ace）

### IDE 风格的编辑器

*   [艾米编辑](http://www.amyeditor.com)
*   [云9](https://c9.io)
*   [代码镜像](http://codemirror.net)
*   [日食猎户座](http://www.eclipse.org/orion)
*   [Shift编辑](http://shiftedit.net)

### 可以编译的 IDE 风格的编辑器

*   [CodeRun](http://www.coderun.com/ide)（支持 C#、JavaScript 和 PHP）
*   [程序员](http://www.programr.com)（支持 Java [和 Android！]、C++、PHP、ASP.NET、C#、VB、Flex、Flash、iOS（UI、ObjetiveC）、处理、JavaScript [包括 JQuery 和 AJAX]、Ruby、Python 甚至 SQL [不确定哪个数据库]。

### 编译的 Pastebins

*   [键盘](http://codepad.org)
*   [IDEone](http://ideone.com)（IDEone 使用 Ace）

### 协作代码编辑器

*   [合作编辑](http://collabedit.com)
*   [以太垫](http://en.wikipedia.org/wiki/Etherpad)

## 结论

到目前为止，我一直未能成功地找到一个语法高亮、代码修订、协作编辑基于 Web 的 IDE，它带有一个共享的编译/解释调试控制台。

你能推荐一个，最好是免费的？如果没有；然后我将创建一个开源概念验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-24T15:51:31.090

[Cloud9 IDE](https://c9.io)最近发布了一个新的协作工具，包括一个新的实时协作编辑（带有作者信息）、群聊和文件修订历史时间滑块。[在https://c9.io/site/blog/2013/10/new-collaboration/](https://c9.io/site/blog/2013/10/new-collaboration/)中进一步解释

Mostafa，该版本 Collab 背后的 Cloud9 IDE 开发人员

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-27T16:25:28.083

[Koding](https://koding.com/?c=ideh)为内置的团队提供了一个带有 Collaboration 的应用程序。除此之外，您拥有对 VM 的完全 root 访问权限，因此它支持您想要安装的任何 Linux 工具。附带所有标准语言（Python、GoLang、Node 等）:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T21:24:51.460

我已经对此进行了一些研究，目的是在 Rails、javascript/html 等上教授 ruby​​，以及管理技术面试，我们希望看到候选人编写代码、运行测试并在我们观察的同时让事情正常工作过程。

Cloud9 目前是我最喜欢的，因为你可以运行全栈 Rails 应用程序、在编辑器中协作、运行测试、群聊等。它真的很强大。

感谢您编制了一份很棒的清单！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-28T17:23:33.270

[https://paiza.IO/](https://paiza.IO/)提供基于网络的在线编码环境。

paiza.IO 专注于简化代码的编写和运行。您可以在打开页面后的 10 秒内编写和运行像“Hello World”这样的简单程序。

paiza.IO 或多或少拥有您想要的所有功能：

*   语法高亮（基于 ACE）
*   要点同步（用于修订）
*   协作编辑（基于 TogetherJS（与 JsFiddle 相同））
*   编译器和命令 stdout/stderr 输出选项卡。

全面披露：我是[https://paiza.IO/](https://paiza.IO/)的开发人员。

# mysql - 在 MySQL 上使用逗号分隔字段计算流行标签

> ID：13274746
> 
> 赞同：1
> 
> 时间：2012-11-07T17:14:52.650
> 
> 标签：mysql, sql, select

我的表上有一个逗号分隔的字段，它存储如下标签：

```
avengers, heroes, marvel, 2012, hulk, captain america 
```

我想获得最常用的标签。

如何在一个 SELECT 查询上执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:43:36.933

你不能——一方面，MySQL 不提供拆分字符串的功能。您需要规范化您的数据以在纯 SQL 中实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-06T21:43:01.970

五年过去了。不过，有*一种*方法可以做到这一点。您实际上可以从 MySQL 中以逗号分隔的术语列表中提取单个“术语”。这是令人难以置信的讨厌，它需要知道将出现在任何行中的最大术语数。SUBSTRING_INDEX() 函数是它的关键。

假设您在一个字段中的术语永远不会超过五个。然后，此查询会获取您的所有术语，并将它们从最频繁到最少排序。

```
SELECT COUNT(*), term FROM(
SELECT TRIM(SUBSTRING_INDEX(SUBSTRING_INDEX(CONCAT(Tags,','), ',',1), ',', -1)) term FROM Resources
UNION ALL
SELECT TRIM(SUBSTRING_INDEX(SUBSTRING_INDEX(CONCAT(Tags,','), ',',2), ',', -1)) term FROM Resources
UNION ALL
SELECT TRIM(SUBSTRING_INDEX(SUBSTRING_INDEX(CONCAT(Tags,','), ',',3), ',', -1)) term FROM Resources
UNION ALL
SELECT TRIM(SUBSTRING_INDEX(SUBSTRING_INDEX(CONCAT(Tags,','), ',',4), ',', -1)) term FROM Resources
UNION ALL
SELECT TRIM(SUBSTRING_INDEX(SUBSTRING_INDEX(CONCAT(Tags,','), ',',5), ',', -1)) term FROM Resources
UNION ALL
SELECT TRIM(SUBSTRING_INDEX(SUBSTRING_INDEX(CONCAT(Tags,','), ',',6), ',', -1)) term FROM Resources
) terms
WHERE LENGTH(term) > 0
GROUP BY term
ORDER BY COUNT(*) DESC 
```

如果您的最大任期数超过五个，您可以在联合中加入更多条款。

你应该正常化吗？是的，您应该正常化。您可以使用这种查询来创建表的规范化版本吗？是的。

# c++ - 为什么我不能将这个特定的 PNG 加载到我的 QPixmap 中？

> ID：13274747
> 
> 赞同：-1
> 
> 时间：2012-11-07T17:15:01.793
> 
> 标签：c++, qt, png, openstreetmap, qpixmap

为什么我不能将此 png 加载到我的 QPixmap 中？ [打开街道地图png](http://otile2.mqcdn.com/tiles/1.0.0/osm/8/137/79.png)

```
Q_ASSERT(fakeMap.load("C:/map71.png")); 
```

这会呈现一个 ASSERT。

如果我在 MS Paint 中打开它并重新将其保存为 jpeg 或 png（但尺寸更大），则不会呈现 ASSERT。相同的路径和语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:41:28.980

您链接到的图像实际上是 JPEG。如果我使用 jpg 扩展名保存它，它会加载到 Qt 中。Qt 可能试图将其视为 PNG，这就是它失败的原因。

# facebook - 发布链接正在合并

> ID：13274748
> 
> 赞同：0
> 
> 时间：2012-11-07T17:15:04.343
> 
> 标签：facebook, hyperlink, facebook-wall

我正在开发一个 facebook 应用程序，其中很大一部分涉及将链接发布到用户墙。但是，大多数发布的链接都属于同一页面，HTML 参数是它们之间的唯一区别。

Facebook 通常会看到该用户多次发布相同的链接（即使参数不同，结果也不同），并将它们合并到一个墙贴中。好吧，不完全是在一个墙上的帖子中，而是隐藏所有旧链接并只保留最新链接，同时将所有帖子指向同一个链接。

有没有办法让 Facebook 停止堆叠这些帖子，以便它们单独出现在朋友的新闻源中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:27:11.137

Facebook 将`og:url`标签的值视为页面的规范 url。如果您想使用查询参数来显示不同的内容，您需要有一个服务器端脚本在`og:url`标签中回显这些参数。

# java - 正则表达式：为什么 ^.*(\ba\w*\b)?.*$ 不捕获任何东西？

> ID：13274751
> 
> 赞同：1
> 
> 时间：2012-11-07T17:15:16.563
> 
> 标签：java, regex

以下 Java 代码旨在捕获单词“abc”，但它给出了“null”：

```
Pattern p = Pattern.compile("^.*(\\ba\\w*\\b)?.*$");
Matcher m = p.matcher("xxx abc yyy");
if (m.matches()) System.out.println(m.group(1)); 
```

如果删除问号，它会正确捕获“abc”。问号是贪心的，所以我原以为原始代码也应该给出“abc”。

感谢任何可以解释原因的人！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T17:17:03.260

正`.*`则表达式开头的 是贪婪的，因此它最初会尝试匹配尽可能多的字符（整个字符串）。当正则表达式引擎移动到捕获组时，它会在字符串的末尾看到`\ba\w*\b`无法匹配，但由于该组是可选的，它不会回溯并尝试找到匹配项。

要解决此问题，只需`.*`将开头的 更改为`.*?`，它仍将匹配零个或多个字符，但它会尝试尽可能少地匹配（懒惰而不是贪婪）：

```
Pattern p = Pattern.compile("^.*?(\\ba\\w*\\b)?.*$"); 
```

另一种选择是通过删除`?`after 来使您的捕获组成为必需的。这将迫使正则表达式引擎回溯，直到进行组匹配。但这可能不是您想要的，因为它会改变正则表达式的含义（匹配的字符串更少）。

**编辑：**看起来我真的应该测试一下！事实证明，仅更改`.*`to`.*?`在这里没有帮助，因为您的组仍然无法在开头匹配，并且整个字符串将`.*`在结尾处匹配（即使您将其更改为`.*?`）。

您最好的选择是`?`在组之后删除该组，以便需要该组。如果您仍想匹配所有字符串，但对于与您的组不匹配的字符串，组为空，您可以使用以下正则表达式：

```
^(?:.*(\ba\w*\b).*|.*)$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:19:25.670

FJ关于原因是正确的。

* * *

要显式匹配以一行开头的第一个 word-char 序列`a`，您可以匹配任意数量的非单词字符或以 ASCII 字母开头的单词，而不是`a`，然后是可选的捕获`a`单词，后面可能跟被忽略的内容。

该程序`abc`按预期打印

```
import java.util.regex.*;

public class Foo {
  public static void main(String[] argv) {
    Pattern p = Pattern.compile("^(?:\\W|[b-zA-Z]\\w+)*(?:(a\\w*)?(?:.*))$");
    Matcher m = p.matcher("xxx abc yyy");
    if (m.matches()) System.out.println(m.group(1));
  }
} 
```

正则表达式是明确的，因此只需要对字符串进行一次前向传递。不过，它确实需要更仔细的阅读。

我的倾向是这些情况通常是显式标记化——分成单词和非单词，然后循环遍历数组以查找您想要的内容。

* * *

或者，您可以使用未锚定的正则表达式[`find`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)来代替。`match`

> `find()`尝试查找与模式匹配的输入序列的下一个子序列。

所以你可以做

```
Pattern p = Pattern.compile("(\\ba\\w*\\b)?");
Matcher m = p.matcher("xxx abc yyy")
while (m.find()) { System.out.println(m.group(1)); } 
```

如果你只想要第一个，或者`while`用 an替换。`if`

* * *

最后，`$`并不意味着 java 中输入的结束。这意味着输入结束或输入结束时的换行符之前。javadoc 解释了端锚之间的细微差别：

> `$` 一行
> `\Z` 的结尾 输入的结尾，但对于最后的终止符，如果有的话
> `\z` 输入的结尾

# codeigniter - 在 CodeIgniter 中调用对象的方法

> ID：13274760
> 
> 赞同：0
> 
> 时间：2012-11-07T17:15:38.310
> 
> 标签：codeigniter

为什么我不能直接在 CodeIgniter 中的对象上调用方法？

例如：

```
$campaign = $this->Campaign_model->get_campaign_from_id($campaign_id);
$campaign->load_settings(); // returns error: Call to undefined method stdClass::load_settings() 
```

Campaign 对象已正确创建，但即使它在类中，我也无法对其调用方法。

这是我正在调用的 Campaign_model 方法：

```
function load_settings()
{
    echo "test";
    exit;
} 
```

那我该怎么做这种操作呢？我想我尊重基本的对象逻辑，但我不能让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:38:25.917

CodeIgniter 模型只是函数的集合，每个模型只有一个实例。您不返回“模型对象”，这不是它的工作方式。

您返回的“对象”`get_campaign_from_id`只是一个普通的 PHP 对象，与您的模型*无关。*

您不能在`stdClass`对象上调用函数，但可以将其传递给可以编辑其属性的函数。

```
// in PHP5 objects are automatically passed by reference
function load_settings($obj){
    $obj->test = '123';  // edit a property on the object
} 
```

# javascript - 创建历史导航

> ID：13274761
> 
> 赞同：1
> 
> 时间：2012-11-07T17:15:40.980
> 
> 标签：javascript, html, web-applications, html5-history

我正在使用 jquery 开发客户端应用程序，并希望保存在 appli 中访问的所有页面以返回给它们。

我为此使用**历史 API**。

如何显示所有访问过的 URL？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:30:35.347

试试**Storage.js**

"*提供了一个简单的界面来存储用户偏好等数据。存储插件可用于保存和检索用户浏览器中的数据。对于较新的浏览器，使用 HTML 5 的 localStorage。如果不支持 localStorage，则使用 cookie . 可检索的数据仅限于同一域*”。

[https://sites.google.com/site/daveschindler/jquery-html5-storage-plugin](https://sites.google.com/site/daveschindler/jquery-html5-storage-plugin)

# c# - 将 ComboBox 绑定到 CollectionViewSource 的正确方法

> ID：13274763
> 
> 赞同：2
> 
> 时间：2012-11-07T17:15:42.580
> 
> 标签：c#, wpf, collectionviewsource

嘿，我的 ViewModel 上有一个 CollectionViewSource 属性。

此 ViewModel 以这种方式绑定到 ComboBox：

```
<ComboBox   ItemsSource="{Binding Products.View}" 
SelectedItem="{Binding SelectedEntity.Product}"  
IsSynchronizedWithCurrentItem="True"/> 
```

当绑定到现有的 SelectedEntity 时，它可以正常工作。

当我尝试绑定到一个`SelectedEntity`不具有产品时，我想显示列表中的第一个项目。因此我尝试使用`Products.View.MoveCurrentToFirst()`，但仍然没有显示第一项。

当我设置时它当然有效`SelectedEntity.Product = Products.View.CurrentItem.`

我能做些什么来改进我的代码？这对我来说似乎有点不对...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T19:16:02.533

WPF 中的 SelectedItem 选择整个实例，因此如果您将 SelectedItem 绑定到实体的导航属性，那么一切都很好。但是，如果您将 SelectedItem 绑定到实体的非导航属性，那么这可能是一个问题，如果这是业务需求，我建议您改为绑定 SelectedValue。

对我来说，我发现最好将 SelectedItem 绑定到我的实体的导航属性，并将 SelectedValue 绑定到我的实体的 value 属性。

我希望这有帮助。

# visual-studio-2012 - 支持 VS2012 的 TFS2010 的 Scrum 模板或更新，无法将编码的 UI 与测试用例相关联

> ID：13274765
> 
> 赞同：1
> 
> 时间：2012-11-07T17:15:49.730
> 
> 标签：visual-studio-2012, tfs, coded-ui-tests, scrum

我正在使用带有 Scrum 模板的 TFS 2010。我正在使用 Visual Studio 2012 Ultimate 创建编码的 UI 测试用例并在 TFS 中签入。后来我使用测试管理器创建了一个手动测试用例，当我试图将它与 Coded UI 相关联时。我的 TFS Scrum 模板似乎没有完全支持所有功能，例如我无法在关联自动化选项卡上看到带有省略号 (...) 的按钮，因此我无法关联它。

Scrum 是否为 TFS 2010 上的 Visual Studio 2012 提供任何支持或模板升级或新的？

或者

还有什么我想念的吗？

[问题屏幕](https://i.stack.imgur.com/dPnwS.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:25:58.947

我假设您正在尝试在 Microsoft 测试管理器中创建关联，而不是在 Visual Studio IDE 中。

在 Visual Studio（而不是测试管理器）中打开测试用例。从那里应该会出现椭圆，您应该能够创建关联。您不能在 MTM 中创建关联，必须在 VS 中完成。

# javascript - 可以使用 Google Maps v3 API 分割多边形但保留一个命名空间吗？

> ID：13274766
> 
> 赞同：0
> 
> 时间：2012-11-07T17:15:57.120
> 
> 标签：javascript, google-maps, geometry

使用 Google Maps v3 API 可以分割同名的多边形

例如，我有一堆英国邮政编码协调到 XXX X 级别

假设我有 CR0 1 和 CR0 2 我想要一个名为 CR0 但在地图上拆分的多边形

这就是我所拥有的

```
var triangleCoords = [
new google.maps.LatLng(51.3552780000, -0.1162350000),
new google.maps.LatLng(51.3557810000, -0.1179340000),
new google.maps.LatLng(51.3572930000, -0.1171320000),
new google.maps.LatLng(51.3573480000, -0.1155220000),
new google.maps.LatLng(51.3573380000, -0.1154850000),
new google.maps.LatLng(51.3572730000, -0.1153750000),
new google.maps.LatLng(51.3557800000, -0.1149820000),
new google.maps.LatLng(51.3552780000, -0.1162350000)
]; 
```

和

```
var triangleCoords = [
new google.maps.LatLng(51.3749120000,-0.0897770000),
new google.maps.LatLng(51.3747190000, -0.0888120000), 
new google.maps.LatLng(51.3746020000, -0.0887410000), 
new google.maps.LatLng(51.3742810000, -0.0890390000), 
new google.maps.LatLng(51.3742740000, -0.0903670000), 
new google.maps.LatLng(51.3746260000, -0.0904120000), 
new google.maps.LatLng(51.3749120000, -0.0897770000) ]; 
```

我尝试将坐标放在一条路径中，但它们之间出现了一条奇怪的线

```
var triangleCoords = [ 
new google.maps.LatLng(51.3552780000, -0.1162350000), 
new google.maps.LatLng(51.3557810000, -0.1179340000), 
new google.maps.LatLng(51.3572930000, -0.1171320000), 
new google.maps.LatLng(51.3573480000, -0.1155220000), 
new google.maps.LatLng(51.3573380000, -0.1154850000), 
new google.maps.LatLng(51.3572730000, -0.1153750000), 
new google.maps.LatLng(51.3557800000, -0.1149820000), 
new google.maps.LatLng(51.3552780000, -0.1162350000), 
new google.maps.LatLng(51.3749120000, -0.0897770000), 
new google.maps.LatLng(51.3747190000, -0.0888120000), 
new google.maps.LatLng(51.3746020000, -0.0887410000), 
new google.maps.LatLng(51.3742810000, -0.0890390000), 
new google.maps.LatLng(51.3742740000, -0.0903670000), 
new google.maps.LatLng(51.3746260000, -0.0904120000), 
new google.maps.LatLng(51.3749120000, -0.0897770000) ]

  CR0_3 = new google.maps.Polygon({
      paths: triangleCoords,
      strokeColor: '#545fa4',
      strokeOpacity: 0.8,
      strokeWeight: 0.7,
      fillColor: '#545fa4',
      fillOpacity: 0.7
    }); 
```

这可以通过使用多几何在 KML 中实现 - 但我还没有弄清楚如何使用 google maps api

这个要求有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:52:34.490

由于 CR0 的两个部分不连续，因此它们需要是单独的路径（多边形具有路径数组，如果将它们分开，则不会用连续线绘制）：

```
 var triangleCoords1 = [
 new google.maps.LatLng(51.3552780000, -0.1162350000),
 new google.maps.LatLng(51.3557810000, -0.1179340000),
 new google.maps.LatLng(51.3572930000, -0.1171320000),
 new google.maps.LatLng(51.3573480000, -0.1155220000),
 new google.maps.LatLng(51.3573380000, -0.1154850000),
 new google.maps.LatLng(51.3572730000, -0.1153750000),
 new google.maps.LatLng(51.3557800000, -0.1149820000),
 new google.maps.LatLng(51.3552780000, -0.1162350000)
 ];

 var triangleCoords2 = [
 new google.maps.LatLng(51.3749120000,-0.0897770000),
 new google.maps.LatLng(51.3747190000, -0.0888120000), 
 new google.maps.LatLng(51.3746020000, -0.0887410000), 
 new google.maps.LatLng(51.3742810000, -0.0890390000), 
 new google.maps.LatLng(51.3742740000, -0.0903670000), 
 new google.maps.LatLng(51.3746260000, -0.0904120000), 
 new google.maps.LatLng(51.3749120000, -0.0897770000) ];

 var CR0_3 = new google.maps.Polygon({
    map: map,
    paths: [triangleCoords1, triangleCoords2], 
    strokeColor: '#545fa4',
    strokeOpacity: 0.8,
    strokeWeight: 0.7,
    fillColor: '#545fa4',
    fillOpacity: 0.7
  }); 
```

[工作示例](http://www.geocodezip.com/v3_postcodePolys.html)

# android - 从 Activity 中获取 ViewPager 片段

> ID：13274768
> 
> 赞同：1
> 
> 时间：2012-11-07T17:15:59.200
> 
> 标签：android, android-viewpager, fragment

我有一个`Activity`包含一些`Fragment`s 的 a `ViewPager`。这是适配器（`mFooFragment`'s 是`Activity`.

```
private class HomePagerAdapter extends FragmentPagerAdapter
{
    public HomePagerAdapter(FragmentManager fm)
    {
        super(fm);
    }

    @Override
    public Fragment getItem(int position)
    {
        switch (position)
        {
        case 0:
            mSellingFragment = new SellingFragment();
            return mSellingFragment;
        case 1:
            mSearchFragment = new SearchFragment();
            return mSearchFragment;
        case 2:
            mProfileFragment = new ProfileFragment();
            return mProfileFragment;
        }
        return null;
    }

    @Override
    public int getCount()
    {
        return 3;
    }
} 
```

然后我稍后会做类似的事情：

```
mSellingFragment.refresh(); 
```

不幸的是，成员片段可以是`null`. 一种情况我可以接受并且可以检查 - 页面是延迟加载的，因此在显示之前它们不可用。不过没关系，我只想`refresh()`对可见页面进行操作。

但有时它们`null`甚至是可见的。我*认为*正在发生的事情是这样的：

我的片段有`setRetainInstance(true)`所以当我离开活动时它被破坏但片段被保留，然后当我回到它时，活动以某种方式用旧片段重新创建，并且`getItem()`永远不会被调用，所以`mFooFragment`永远不会设置。

是对的吗？究竟应该如何处理这个问题？我能想到的一种方法是向`setFooFragment(FooFragment f) { mFooFragment = f; }`Activity 添加大量函数并从中调用它们，`FooFragment.onAttach()`但必须有更好的方法！

# 编辑

我查找了`FragmentPagerAdapter`（通常是在 Android 领域获得答案的唯一方法！）的源代码，它确实保存了片段：

```
@Override
public Object instantiateItem(View container, int position) {
    if (mCurTransaction == null) {
        mCurTransaction = mFragmentManager.beginTransaction();
    }

    // Do we already have this fragment?
    String name = makeFragmentName(container.getId(), position);
    Fragment fragment = mFragmentManager.findFragmentByTag(name);
    if (fragment != null) {
        if (DEBUG) Log.v(TAG, "Attaching item #" + position + ": f=" + fragment);
        mCurTransaction.attach(fragment);
    } else {
        fragment = getItem(position);
        if (DEBUG) Log.v(TAG, "Adding item #" + position + ": f=" + fragment);
        mCurTransaction.add(container.getId(), fragment,
                makeFragmentName(container.getId(), position));
    }
    if (fragment != mCurrentPrimaryItem) {
        fragment.setMenuVisibility(false);
    }

    return fragment;
} 
```

不幸的是，它不会使那些重新附加`Fragment`的 s 可用于子类！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:36:55.057

我目前的，有点老套的解决方案是制作 FragmentPagerAdapter 的副本，并在添加片段时添加一个处理程序：`void onItemCreated(Fragment fragment, int position)`然后您可以在自定义寻呼机适配器中覆盖它以将片段保存为成员变量。下面的完整代码（尚未测试！）

```
/*
 * Copyright (C) 2011 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.your.package.name;

import android.os.Parcelable;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentStatePagerAdapter;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.view.PagerAdapter;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;

/**
 * Implementation of {@link android.support.v4.view.PagerAdapter} that
 * represents each page as a {@link Fragment} that is persistently
 * kept in the fragment manager as long as the user can return to the page.
 *
 * <p>This version of the pager is best for use when there are a handful of
 * typically more static fragments to be paged through, such as a set of tabs.
 * The fragment of each page the user visits will be kept in memory, though its
 * view hierarchy may be destroyed when not visible.  This can result in using
 * a significant amount of memory since fragment instances can hold on to an
 * arbitrary amount of state.  For larger sets of pages, consider
 * {@link FragmentStatePagerAdapter}.
 *
 * <p>When using FragmentPagerAdapter the host ViewPager must have a
 * valid ID set.</p>
 *
 * <p>Subclasses only need to implement {@link #getItem(int)}
 * and {@link #getCount()} to have a working adapter.
 *
 * <p>Here is an example implementation of a pager containing fragments of
 * lists:
 *
 * {@sample development/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentPagerSupport.java
 *      complete}
 *
 * <p>The <code>R.layout.fragment_pager</code> resource of the top-level fragment is:
 *
 * {@sample development/samples/Support4Demos/res/layout/fragment_pager.xml
 *      complete}
 *
 * <p>The <code>R.layout.fragment_pager_list</code> resource containing each
 * individual fragment's layout is:
 *
 * {@sample development/samples/Support4Demos/res/layout/fragment_pager_list.xml
 *      complete}
 */
public abstract class FragmentPagerAdapter extends PagerAdapter {
    private static final String TAG = "FragmentPagerAdapter";
    private static final boolean DEBUG = false;

    private final FragmentManager mFragmentManager;
    private FragmentTransaction mCurTransaction = null;
    private Fragment mCurrentPrimaryItem = null;

    public FragmentPagerAdapter(FragmentManager fm) {
        mFragmentManager = fm;
    }

    /**
     * Return the Fragment associated with a specified position.
     */
    public abstract Fragment getItem(int position);

    @Override
    public void startUpdate(ViewGroup container) {
    }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        if (mCurTransaction == null) {
            mCurTransaction = mFragmentManager.beginTransaction();
        }

        final long itemId = getItemId(position);

        // Do we already have this fragment?
        String name = makeFragmentName(container.getId(), itemId);
        Fragment fragment = mFragmentManager.findFragmentByTag(name);
        if (fragment != null) {
            if (DEBUG) Log.v(TAG, "Attaching item #" + itemId + ": f=" + fragment);
            mCurTransaction.attach(fragment);
        } else {
            fragment = getItem(position);
            if (DEBUG) Log.v(TAG, "Adding item #" + itemId + ": f=" + fragment);
            mCurTransaction.add(container.getId(), fragment,
                    makeFragmentName(container.getId(), itemId));
        }
        if (fragment != mCurrentPrimaryItem) {
            fragment.setMenuVisibility(false);
            fragment.setUserVisibleHint(false);
        }

        onItemCreated(fragment, position);
        return fragment;
    }

    /**
     * Called when a fragment has been created/attached.
     */
    public abstract void onItemCreated(Fragment fragment, int position);

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        if (mCurTransaction == null) {
            mCurTransaction = mFragmentManager.beginTransaction();
        }
        if (DEBUG) Log.v(TAG, "Detaching item #" + getItemId(position) + ": f=" + object
                + " v=" + ((Fragment)object).getView());
        mCurTransaction.detach((Fragment)object);
    }

    @Override
    public void setPrimaryItem(ViewGroup container, int position, Object object) {
        Fragment fragment = (Fragment)object;
        if (fragment != mCurrentPrimaryItem) {
            if (mCurrentPrimaryItem != null) {
                mCurrentPrimaryItem.setMenuVisibility(false);
                mCurrentPrimaryItem.setUserVisibleHint(false);
            }
            if (fragment != null) {
                fragment.setMenuVisibility(true);
                fragment.setUserVisibleHint(true);
            }
            mCurrentPrimaryItem = fragment;
        }
    }

    @Override
    public void finishUpdate(ViewGroup container) {
        if (mCurTransaction != null) {
            mCurTransaction.commitAllowingStateLoss();
            mCurTransaction = null;
            mFragmentManager.executePendingTransactions();
        }
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return ((Fragment)object).getView() == view;
    }

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void restoreState(Parcelable state, ClassLoader loader) {
    }

    /**
     * Return a unique identifier for the item at the given position.
     *
     * <p>The default implementation returns the given position.
     * Subclasses should override this method if the positions of items can change.</p>
     *
     * @param position Position within this adapter
     * @return Unique identifier for the item at position
     */
    public long getItemId(int position) {
        return position;
    }

    private static String makeFragmentName(int viewId, long id) {
        return "android:switcher:" + viewId + ":" + id;
    }
} 
```

# java - 肥皂处理程序 org.w3c.dom.DOMException：HIERARCHY_REQUEST_ERR：

> ID：13274770
> 
> 赞同：1
> 
> 时间：2012-11-07T17:16:17.843
> 
> 标签：java, web-services, spring, soap, axiom

我在使用 Spring 配置（不是 Spring-WS）作为 Web 服务公开的无状态 bean 中使用 JAX-WS。我添加了一个 SOAP 处理程序，并且在处理程序中，当我尝试在 SOAPMessageContext 上获取消息（）时，我得到一个尝试插入一个不允许的节点。

```
 at org.apache.axiom.om.impl.dom.ParentNode.insertBefore(ParentNode.java:
224)
        at org.apache.axiom.om.impl.dom.NodeImpl.appendChild(NodeImpl.java:240)
        at org.apache.axis2.saaj.SOAPPartImpl.appendChild(SOAPPartImpl.java:989)

        at com.sun.xml.bind.marshaller.SAX2DOMEx.startElement(SAX2DOMEx.java:198
)
        at com.sun.xml.ws.message.SAX2DOMWriterEx.writeStartElement(SAX2DOMWrite
rEx.java:97)
        at com.sun.xml.ws.message.AbstractMessageImpl.writeTo(AbstractMessageImp
l.java:144)
        at com.sun.xml.ws.message.AbstractMessageImpl.readAsSOAPMessage(Abstract
MessageImpl.java:226)
        at com.sun.xml.ws.handler.SOAPMessageContextImpl.getMessage(SOAPMessageC
ontextImpl.java:87) 
```

我将这些依赖项添加到我的 Maven 配置中： [JAX-WS: Getting DOMException - HIERARCHY_REQUEST_ERR 在尝试添加安全标头时](https://stackoverflow.com/questions/4888412/jax-ws-getting-domexception-hierarchy-request-err-upon-trying-to-add-security)

我读到 WebLogic saaj 库已经过时了。我尝试将其添加到我的启动环境脚本中：

```
-Djavax.xml.soap.MessageFactory=com.sun.xml.internal.messaging.saaj.soap.ver1_1.SOAPMessageFactory1_1Impl 
```

并尝试过：

```
-Djavax.xml.soap.MessageFactory=org.springframework.ws.soap.axiom.AxiomSoapMessageFactory 
```

但这没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:54:04.023

事实证明，这个类使用 Axis2 是有问题的。我删除了对 Axis2 的所有依赖项和引用，现在应用程序使用 Sun 的 saaj 版本，它可以正常工作。

# java - 使用 ASM 重写 Java 本地方法

> ID：13274771
> 
> 赞同：17
> 
> 时间：2012-11-07T17:16:17.720
> 
> 标签：java, java-native-interface, metaprogramming, sandbox, bytecode

我试图通过使用[ASM 4.0](http://download.forge.objectweb.org/asm/asm4-guide.pdf)`native`重写类的字节码来用非`native`存根替换所有方法来做到这一点。

到目前为止，我有这个：

```
class ClassAdapter extends ClassVisitor {

    public ClassAdapter(ClassVisitor cv) {
        super(Opcodes.ASM4, cv);
    }

    @Override
    public MethodVisitor visitMethod(int access, String base, String desc, String signature, String[] exceptions) {
        return cv.visitMethod(access & ~Opcodes.ACC_NATIVE, base, desc, signature, exceptions);
    }

} 
```

由执行

```
private static byte[] instrument(byte[] originalBytes, ClassLoader loader) {
    ClassWriter cw = new ClassWriter(ClassWriter.COMPUTE_FRAMES);
    ClassAdapter adapter = new ClassAdapter(cw);

    ClassReader cr = new ClassReader(originalBytes);
    cr.accept(adapter, ClassReader.SKIP_FRAMES);

    return cw.toByteArray();
} 
```

这看起来很简单：我去掉了`ACC_NATIVE`这个方法`visitMethod()`，让其他所有东西都保持不变。但是，当我这样做时`java.lang.Object`，它会以

```
Exception in thread "main" 
Exception: java.lang.StackOverflowError thrown from the UncaughtExceptionHandler in thread "main" 
```

StackOverflow 发生在*检测*时，而不是*运行时*，我认为这很不寻常。但是，如果我删除`& ~Opcodes.ACC_NATIVE`修饰符，则会`java.lang.Object`被重写（在本例中未更改）并完美执行。

显然我没有做正确的事情，用`native`非`native`方法替换方法并不像剥离`native`方法上的修饰符那么简单，但我不知道从哪里开始。[ASM Docs](http://download.forge.objectweb.org/asm/asm4-guide.pdf "ASM 文档")根本不谈论使用方法`native`。有使用 ASM 经验的人知道我需要做什么才能让`native`方法重写工作吗？

## 编辑

对不起，那条简短而无用的信息是`e.printStackTrace()`给我的，但使用`e.getStackTrace()`我设法得到了一些有用的东西：

```
java.util.concurrent.ConcurrentHashMap.hash(ConcurrentHashMap.java:332)
java.util.concurrent.ConcurrentHashMap.put(ConcurrentHashMap.java:1124)
java.util.Collections$SetFromMap.add(Collections.java:3903)
sandbox.classloader.MyClassLoader.instrument(Unknown Source)
sandbox.classloader.MyClassLoader.loadClass(Unknown Source)
java.lang.ClassLoader.defineClass1(Native Method)
java.lang.ClassLoader.defineClass(ClassLoader.java:791)
java.lang.ClassLoader.defineClass(ClassLoader.java:634)
sandbox.classloader.MyClassLoader.findClass(Unknown Source)
sandbox.classloader.MyClassLoader.loadClass(Unknown Source)
sandbox.Tester.main(Unknown Source)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

所以在我看来，错误实际上是在执行时发生的（例如，我错误地认为它是在检测时发生的）并且是调用的结果`hashCode()`。碰巧`hashCode()`的是，我（可能错误地）剥离了它的`native`修饰符的本机方法之一。很明显，它正在*调用*导致问题的`native`-stripped 方法。

**真正**奇怪的是堆栈跟踪只有 16 帧深。考虑到它是一个`StackOverflowError`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:36:56.563

*   用存根替换本机代码并不是那么简单，但离那不远

*   如果您查看[ClassVisitor#visitMethod(int access, String name, String desc, String signature, String[] exceptions)](http://asm.ow2.org/asm33/javadoc/user/org/objectweb/asm/ClassVisitor.html#visitMethod%28int,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%5B%5D%29) 您会看到它返回一个`MethodVisitor`

*   您现在必须使用的[MethodVisitor 。](http://asm.ow2.org/asm33/javadoc/user/org/objectweb/asm/MethodVisitor.html)如果要制作抽象存根，则应至少添加对`methodVisitor.visitEnd()`

*   如果要制作空存根，则必须添加`visitCode`并在必要时返回一个值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-09T12:55:10.080

为了详细说明这里接受的答案是一个完整的检测代理示例，它使用 ASM 将本机方法替换为`java.net.NetworkInterface#getHardwareAddress()`返回固定值的存根。

```
public class MacModifyAgent {

    private static final String TARGET = "java/net/NetworkInterface";

    public static void premain(String agentArgs, Instrumentation inst) {
        inst.addTransformer(new ClassFileTransformer() {
            @Override
            public byte[] transform(ClassLoader l, String name, Class<?> c, ProtectionDomain d, byte[] b)
                    throws IllegalClassFormatException {
                if (TARGET.equals(name)) {
                    return instrument(b);
                }
                return b;
            }
        });
    }

    private static byte[] instrument(byte[] originalBytes) {
        ClassWriter cw = new ClassWriter(ClassWriter.COMPUTE_FRAMES);
        ClassAdapter adapter = new ClassAdapter(cw);

        ClassReader cr = new ClassReader(originalBytes);
        cr.accept(adapter, ClassReader.SKIP_FRAMES);

        return cw.toByteArray();
    }

    public static class ClassAdapter extends ClassVisitor implements Opcodes {
        public ClassAdapter(ClassVisitor cv) {
            super(ASM4, cv);
        }

        @Override
        public MethodVisitor visitMethod(int access, String name, String descriptor, String signature,
                String[] exceptions) {

            if ("getHardwareAddress".equals(name)) {
                MethodVisitor mv = super.visitMethod(access & ~ACC_NATIVE, name, descriptor, signature, exceptions);

                MethodVisitor special = new StubReturnValue(mv, new byte[] { 1, 2, 3, 4, 5, 6 });
                return special;
            } else {
                return super.visitMethod(access, name, descriptor, signature, exceptions);
            }
        }
    }

    public static class StubReturnValue extends MethodVisitor implements Opcodes {
        private final MethodVisitor target;
        private byte[] mac;

        public StubReturnValue(MethodVisitor target, byte [] mac) {
            super(ASM4, null);
            this.target = target;
        }

        @Override
        public void visitCode() {
            target.visitCode();
            target.visitVarInsn(BIPUSH, 6);
            target.visitIntInsn(NEWARRAY, T_BYTE);

            for (int i = 0; i < 6; i++) {
                target.visitInsn(DUP);
                target.visitIntInsn(BIPUSH, i);
                target.visitIntInsn(BIPUSH, mac[i]);
                target.visitInsn(BASTORE);
            }

            target.visitInsn(ARETURN);
            target.visitEnd();
        }
    }
} 
```

# matlab - Matlab，适合旋转抛物面到测量的x，y，z坐标

> ID：13274775
> 
> 赞同：1
> 
> 时间：2012-11-07T17:16:22.183
> 
> 标签：matlab

我需要你的帮助来完成一项任务。我测量了一个形状像抛物线的物体。我有对象的 X、Y、Z 坐标。任务是使旋转抛物面适合这些坐标，并确定我的抛物线和理论旋转抛物面之间的偏差（difference[dx,dy,dz]）。Matlab有什么办法吗？

非常感谢你，也很抱歉我的英语不好，我已经很久没有使用它了。

问候！丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:44:27.250

由于您只有 181 分，我敢打赌这可以大致这样解决：

确定一定范围内包含您正在寻找的抛物线的参数。

给定这些参数，创建一个函数，确定每个点与抛物线之间的最小距离。

现在，您可以以一种巧妙的方式遍历参数范围，直到获得相当好的拟合。

# sql-server-data-tools - 在 SSDT 中创建 FK 的设计师在哪里？

> ID：13274779
> 
> 赞同：3
> 
> 时间：2012-11-07T17:16:27.520
> 
> 标签：sql-server-data-tools

我刚刚开始在 VS 2012 中使用 SSDT。从 SQL Server 对象资源管理器中，我选择了一个表，右键单击并选择了视图设计器。除非我弄错了，否则创建 FK 的唯一方法是在屏幕底部的 T-SQL 窗口中手动输入它的语法。我是正确的还是有希望有更好的方法来做到这一点？

顺便说一句，当我右键单击外键时，我希望看到一个添加选项，但我看到的只是：

![在此处输入图像描述](../Images/7743f94a6c121539d1967848f5ed5cc2.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T09:20:56.997

添加外键的设计器体验（截至 2012 年 12 月版）的当前限制是能够命名（或重命名）该键。

正如@aclear16 在他们的评论中提到的那样，当您右键单击该列表中的“外键”标题时，应该会出现“添加新外键”菜单项。

所有其他更改必须通过在 T-SQL 窗格中进行编辑来完成，如 SSDT 文档中所述[如何：使用表设计器管理表和关系](http://msdn.microsoft.com/en-us/library/hh272680%28v=vs.103%29.aspx)

# php - 如何在 Controller 中调用 CodeIgniter 应用程序之外的函数？

> ID：13274780
> 
> 赞同：1
> 
> 时间：2012-11-07T17:16:26.800
> 
> 标签：php, codeigniter

嗨，我对如何调用在普通核心 php 文件中定义的函数有疑问。现在我想在 Codeigniter 应用程序的控制器中调用这个函数。

我的意思是，例如在某个目录的 test.php 中有一个名为 getdetails() 的函数。现在有一个带有控制器 email.php 的 codeIgniter 应用程序。

现在我想在 email.php 中调用 getdetails() 函数。

任何人都可以帮助我一些想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T17:22:15.417

构建您自己的助手，将其保存为 test_helper.php 在您的应用程序助手文件夹中：

```
function getdetails($paramater1, $parameter2){
    echo "test";
} 
```

然后将其加载到您的控制器中：

```
$this->load->helper('test'); 
```

你可以在它加载的任何地方使用它：

```
getdetails(); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-07T17:21:16.320

您只需要在尝试调用该函数之前包含该文件。[include](http://php.net/manual/en/function.include.php)或[include_once](http://www.php.net/manual/en/function.include-once.php)

# ios - 如何在 iOS 上生成英语句子的解析树？

> ID：13274783
> 
> 赞同：6
> 
> 时间：2012-11-07T17:16:33.100
> 
> 标签：ios, nlp, linguistics

我想在 iOS 应用程序中生成基于选区的英语句子解析树。 [http://en.wikipedia.org/wiki/Parse_tree](http://en.wikipedia.org/wiki/Parse_tree)

我目前的选择似乎是：

*   在 NSLinguisticTagger 的 POS 标记之上编写我自己的树生成。
*   将基于 python 的 NLTK 嵌入到我的应用程序中。
*   创建或使用基于服务器的方法。

任何人都可以推荐其中一种方法，或者建议另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T09:57:59.117

也许这会有所帮助：

JavaScript 是一种非常流行的语言，可以在客观的 C 代码检查中运行 JS**将 JavaScript 集成到本机应用程序**wwdc 2013 会话

所以也许你可以在 JS 中找到解决方案，而不是在本机 objc 代码中使用它。

# c - 如何在 fork() 创建的进程之间共享内存？

> ID：13274786
> 
> 赞同：66
> 
> 时间：2012-11-07T17:16:58.060
> 
> 标签：c, fork

在 fork child 中，如果我们修改一个全局变量，它不会在主程序中改变。

有没有办法改变子叉子中的全局变量？

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int glob_var;

main (int ac, char **av)
{
  int pid;

  glob_var = 1;

  if ((pid = fork()) == 0) {
    /* child */
    glob_var = 5;
  }
  else {
    /* Error */
    perror ("fork");
    exit (1);
  }

  int status;
  while (wait(&status) != pid) {
  }
   printf("%d\n",glob_var); // this will display 1 and not 5.
} 
```

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-11-07T17:17:53.047

您可以使用共享内存（`shm_open()`、`shm_unlink()`、`mmap()`等）。

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/mman.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <unistd.h>

static int *glob_var;

int main(void)
{
    glob_var = mmap(NULL, sizeof *glob_var, PROT_READ | PROT_WRITE, 
                    MAP_SHARED | MAP_ANONYMOUS, -1, 0);

    *glob_var = 1;

    if (fork() == 0) {
        *glob_var = 5;
        exit(EXIT_SUCCESS);
    } else {
        wait(NULL);
        printf("%d\n", *glob_var);
        munmap(glob_var, sizeof *glob_var);
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-07T17:47:36.087

无法更改全局变量，因为新创建的进程（子进程）拥有自己的地址空间。

所以最好使用`shmget()`, `shmat()`from `POSIX`api

或者您可以使用`pthread`，因为`pthreads`共享`global`数据并且全局变量的更改反映在父级中。

然后阅读一些[Pthreads 教程](https://computing.llnl.gov/tutorials/pthreads/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-14T07:48:25.657

这是一个替代解决方案。

```
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/shm.h>
#include <sys/stat.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <sys/wait.h>

typedef struct
{
  int id;
  size_t size;
} shm_t;

shm_t *shm_new(size_t size)
{
  shm_t *shm = calloc(1, sizeof *shm);
  shm->size = size;

  if ((shm->id = shmget(IPC_PRIVATE, size, IPC_CREAT | IPC_EXCL | S_IRUSR | S_IWUSR)) < 0)
  {
    perror("shmget");
    free(shm);
    return NULL;
  }

  return shm;
}

void shm_write(shm_t *shm, void *data)
{
  void *shm_data;

  if ((shm_data = shmat(shm->id, NULL, 0)) == (void *) -1)
  {
    perror("write");
    return;
  }

  memcpy(shm_data, data, shm->size);
  shmdt(shm_data);
}

void shm_read(void *data, shm_t *shm)
{
  void *shm_data;

  if ((shm_data = shmat(shm->id, NULL, 0)) == (void *) -1)
  {
    perror("read");
    return;
  }
  memcpy(data, shm_data, shm->size);
  shmdt(shm_data);
}

void shm_del(shm_t *shm)
{
  shmctl(shm->id, IPC_RMID, 0);
  free(shm);
}

int main()
{
  int var = 1;
  shm_t *shm = shm_new(sizeof var);

  int pid;
  if ((pid = fork()) == 0)
  { /* child */
    var = 5;
    shm_write(shm, &var);
    printf("child: %d\n", var);
    return 0;
  }
  /* Wait for child to return */
  int status;
  while (wait(&status) != pid);
  /* */
  shm_read(&var, shm);
  /* Parent is updated by child */
  printf("parent: %d\n", var);
  shm_del(shm);
  return 0;
} 
```

构建：

```
$ gcc shm.c -o shm && ./shm 
```

# visual-studio-2012 - 为程序集 mstest 提供了部分绑定信息

> ID：13274787
> 
> 赞同：5
> 
> 时间：2012-11-07T17:16:59.750
> 
> 标签：visual-studio-2012, mstest, simplemembership

我`SimpleMembership`在.Net 中使用新框架。

创建用户的单元测试（使用 API - 见下文）在 Visual Studio 2012 IDE 中本地运行良好。

`WebSecurity.CreateUserAndAccount(entity.UserName, entity.Password, new { });`

但是，在构建服务器上运行时（使用 TeamCity），我得到以下信息。

我尝试过 Dependency Walker，但没有成功。我也想不出这怎么能在 x64 中运行——考虑到 VS2012 在 x86 中运行。

任何帮助，将不胜感激。

*抛出异常：*

```
System.IO.FileNotFoundException: Could not load file or assembly 'WebMatrix.WebData' or one of its dependencies. The system cannot find the file specified.=== Pre-bind state information ===
LOG: User =  
LOG: DisplayName = WebMatrix.WebData
(Partial)
WRN: Partial binding information was supplied for an assembly:
WRN: Assembly Name: WebMatrix.WebData | Domain ID: 2
WRN: A partial bind occurs when only part of the assembly display name is provided.
WRN: This might result in the binder loading an incorrect assembly.
WRN: It is recommended to provide a fully specified textual identity for the assembly,
WRN: that consists of the simple name, version, culture, and public key token.
WRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information and common solutions to this issue.
LOG: Appbase = file:///C:/Program Files (x86)/Microsoft Visual Studio 
LOG: Initial PrivatePath = NULL
Calling assembly : (Unknown).* 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-27T17:23:07.260

我也遇到了这个问题，它与 MS Test 或任何单元测试框架无关，我实际上是在一个 Web 项目中遇到这个问题，其中代码可以很好地编译，但是当 web.config 引用 SimpleMembershipProvider 时会中断。我使用了更新的 NuGet 包 Microsoft.AspNet.WebPages.WebData，它把 WebMatrix.WebData 作为参考，但它未能设置 CopyLocal=true。

解决方案似乎是在项目的引用下的 WebMatrix.WebData（和 WebMatrix.Data）属性中简单地设置 CopyLocal=true。

我相信 CopyLocal=false 必须在 NuGet 安装脚本中明确设置，在这种情况下，这似乎是一个主要的设计愚蠢缺陷，而不是错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:21:54.173

这似乎是框架中的一个错误。但是，通过放置固定

WebMatrix.WebData.dll

在构建服务器上的 MsTest 目录 (C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE) 内

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-27T11:49:19.443

我通过更改 Web 配置中的绑定重定向配置来修复此错误。我在升级 nuget 包时设置错误。

为了解决这个问题，我改变了它：

```
<dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-6.0.4.17603" newVersion="6.0.4.17603" />
      </dependentAssembly> 
```

对此：

```
<dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0" />
      </dependentAssembly> 
```

# c# - 筛选 DataGridView

> ID：13274792
> 
> 赞同：4
> 
> 时间：2012-11-07T17:17:20.790
> 
> 标签：c#, winforms, datagridview

我在互联网上搜索了我的问题的解决方案，我和我的 studygrp 正在制作一个从 classLibrary 获取信息的 datagridview。所有这些都有效，但现在我们必须过滤它，但我只能通过 bindingsource 找到，但这不是我的想法。我只想要一个简单的过滤器，这样您就可以在文本框中输入一些内容，如果它包含该信息，它将在 datagridview 上显示。我试过了：

```
((DataTable)dataGridView1.DataSource).DefaultView.RowFilter = "FromColumn like '%" + textBox1.Text + "%'"; 
```

但它不像我想要的那样工作嗯......任何可以帮助的人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T17:43:39.473

尝试绑定源。它提供了良好的广泛过滤设施

```
BindingSource bs = new BindingSource();
bs.DataSource = dataGridView1.DataSource;
bs.Filter = "yourColumnName like '%" + textBox1.Text + "%'";
dataGridView1.DataSource = bs; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:31:09.663

尝试这个：

```
DataView dv = ((DataTable)dataGridView1.DataSource).DefaultView;
dv.RowFilter = "FromColumn like '%" + textBox1.Text + "%'";
dataGridView1.DataSource = dv; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-19T10:57:23.730

我发现这最适合我的需求：

您要在网格中显示的数据存储在 BindingList 中（支持 INotifyPropertyCchanged，当您更新列表时这非常简洁......）所以在哪里定义这个 BindingList：

```
public MyDataList = new BindingList<MyDataItem>(); 
```

将其分配给网格的数据源：

```
 myDataGrid.DataSource = MyDataList; 
```

当按下“过滤器按钮”或您想要执行的事件时：

```
myDataGrid.DataSource = MyDataList.Where(ln => ln.propertyname.Contains(textBoxFilter.Text).ToList(); 
```

重置过滤器时只需设置原始源

```
MyDataGrid.DataSource = MyDataList 
```

希望对你有帮助，问候

# java - 扩展通用接口而不分配类型？

> ID：13274794
> 
> 赞同：1
> 
> 时间：2012-11-07T17:17:31.820
> 
> 标签：java, generics, clojure

我正在尝试阅读**Clojure** [源代码](https://github.com/clojure/clojure)。

有一个 IFn 接口，其声明如下：

```
公共接口 IFn 扩展 Callable、Runnable{

```

我认为**Callable**是*通用*的。IFn 怎么知道这里指定的类型是什么？

```
Interface Callable<V> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T17:24:02.337

它不能。该声明基本上使用原始类型，这是一个坏主意。写成这样会好得多：

```
public interface Function<V> extends Callable<V>, Runnable 
```

也就是说 - 我没有注意到你在谈论 Clojure 而不是 Java。鉴于他们正在建立语言之间的桥梁，他们可以在某种程度上使用类型系统做他们想做的事情:)

# jquery - jQuery datepicker 未在所有视图中显示当前日期

> ID：13274797
> 
> 赞同：1
> 
> 时间：2012-11-07T17:17:36.317
> 
> 标签：jquery, asp.net-mvc

我正在使用 jquery datepicker，并且还为日期字段创建了一个编辑器模板。我的代码如下所示。

```
$(document).ready(function () {
    $('.date').datepicker({ dateFormat: "dd/mm/yy"});
});

@model Nullable<DateTime>

 @{
    DateTime dt = DateTime.Now;
    if (Model != null)
    {
       dt  = (System.DateTime) Model;

    }
    @Html.TextBox("", String.Format("{0:d}", dt.ToShortDateString()), new { @class = "date" })
} 
```

由于某种原因，当前日期仅显示在某些视图上。在其他日期显示为空 01/01/0001。我已经检查并仔细检查了我的代码，但找不到任何问题。我还通过开发人员工具检查了输出的 html，显示当前日期的字段和不显示当前日期的字段是相同的——当然除了值！

想知道有没有其他人经历过这种情况。它似乎只发生在有多个日期字段的视图上。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:22:58.407

我的第一个猜测是，在调用堆栈的某个较高位置，您的 Nullable<DateTime> 不是 Nullable<DateTime> ，因此会生成默认值，这就是您在结果中看到的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:13:52.960

出现在您视图中的 Date （其中一些）**不是 null**，而只是 initialize `new DateTime()`。也就是说，它已经将值设置为*01/01/0001*。因此，它在`if`语句中不会被评估为 null。所以它不会更改为`DateTime.Now`

要修复它，只需以这种方式转换您的 if 代码

```
@{
    var date = Model as DateTime?; // local reference to a DateTime? 

    if (!date.HasValue                     // check if it is not null 
        || date.Equals(default(DateTime))) // check if it is not default 01/01/0001
    {
        date = DateTime.Now;
    }

    @Html.TextBox("Name", String.Format("{0:d}", date.Value.ToShortDateString()), new { @class = "date" })
 } 
```

*这将呈现任何有意义的*传递`DateTime`值。在其他情况下，将使用。*`DateTime.Now`*

# tsql - 转换前导零的修剪

> ID：13274798
> 
> 赞同：0
> 
> 时间：2012-11-07T17:17:40.160
> 
> 标签：tsql

你会认为两者都会带来相同的结果。但这并不是因为转换正在修剪 2 个零，因此第 2 个不会返回结果，因为它将 446641 与 446641 进行比较

```
select memberID, 
            Photo as PhotoBlob 
    from    SomeTable
WHERE memberId = '00446641'

Select  memberID, 
        Photo as PhotoBlob 
from    SomeTable
WHERE memberId = convert(char(13), 00446641) - this is trimming off the 2 zeros 
```

无论出于什么奇怪的原因，memberID 都不是 int，而是该表中的 char(13)

更新

这是上下文：

```
public static MemberPhoto RetrieveMemberPhotoFromBlob(Int64 contractNumber)
{
    Database db = DatabaseFactory.CreateDatabase(Config.DbConnectionString_MemberPhotos);

    using ( DbCommand cmd = db.GetSqlStringCommand(string.Format(@" Select  memberID, 
                                                                            Photo as PhotoBlob 
                                                                    from    SomeTable
                                                                    WHERE memberId = convert(char(13), @{0})","memberID")))
    {
        try
        {
            db.AddInParameter(cmd, "@contractNumber", DbType.Int64, contractNumber); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T23:07:28.677

根据要求，

如果该字段包含有意义的前导/尾随 0，则您不能在 UI 代码中使用整数来表示 char(13) 字段。这是一个字符字段。这不是一个 int 字段。在模型中使用字符串。这是一个有点经典的错误，例如尝试使用 int 表示电话号码。你就是做不到——有些人可能会在电话号码前面放一个前导 0，电话号码以 0 结尾，等等

# python - 对方法包装器进行单元测试

> ID：13274799
> 
> 赞同：0
> 
> 时间：2012-11-07T17:17:52.630
> 
> 标签：python, unit-testing

我有一组共享一些基本检查的操作。我的代码如下所示：

```
def is_valid(param): …some pretty complex things unit-tested on their own…

class BaseAction(object):
    def run(self, param):
        if not is_valid(param):
            raise ValueError(…)

        return self.do_run(param)

class Jump(BaseAction):
    def do_run(self, param): …

class Sing(BaseAction):
    def do_run(self, param): … 
```

我应该如何对 BaseAction.run 执行验证的事实进行单元测试？

我想我可以对 Jump.run 和 Sing.run 进行单元测试，但是要正确地做到这一点，我需要为 BaseAction 的每个子类编写测试，可能有很多情况。这也意味着对子类的耦合测试与基类方法的测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:20:48.147

您将对`is_valid()`函数本身进行单元测试。然后，您只需测试在传递无效输入时`.run()`引发`ValueError`异常的事实：

```
with self.assertRaises(ValueError):
    objectundertest.run(invalid_parameter) 
```

由于您已经有`is_valid()`自己的单元测试，因此您的单元测试`.run()`不需要关注它的功能。您可以专注于`.run()`.

在您的情况下`BaseAction`，是为子类提供服务的单位；我将其作为模拟子类进行测试：

```
class MockAction(BaseAction):
    run_called = None

    def do_run(self, param):
        self.run_called = param 
```

因此您可以检查是否`run`确实`do_run`以预期`param`值调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:37:01.870

如果您想将逻辑保留在您的 Base 类中，请参阅 Martijn Pieters 的回答。

但是，一种可能性是重组您的代码以使验证发生在不是基类的一部分的函数/类中。也许实际运行动作的类本身可以检查那些......

```
class Jump(object):
    def run(self, param):
        ...

def run_action(action, param):
    if not is_valid(param):
        raise ValueError(…)

    return action.run(param) 
```

单元测试操作更容易（您无需担心基本逻辑），并且如果“BaseAction”以某种方式被破坏，它也不会破坏所有“Jump”单元测试。“run_action”（如果你愿意，你可以把它变成一个类而不是一个函数）本身可以很容易地测试（你可以创建一个假的“Action”对象）。

# postgresql - 使用 pgAdmin 将 postgis 函数加载到 PostgreSQL 8.3.7 数据库中

> ID：13274801
> 
> 赞同：1
> 
> 时间：2012-11-07T17:17:53.783
> 
> 标签：postgresql, postgis, pgadmin, phppgadmin

我正在尝试将 postgis.sql 文件加载到已经创建的 pgAdmin 数据库（使用 psql）中，这样我就可以创建一个启用空间的数据库。我已经确认语言“plpgsql”已经存在，但我无法执行以下功能：

```
psql -d yourdatabase -f lwpostgis.sql;
psql -d yourdatabase -f lwpostgis_upgrade.sql;
psql -d yourdatabase -f spatial_ref_sys.sql; 
```

我只是得到通用的“语法错误在或附近......”。

也许我没有正确格式化该行，因为从我读过的内容来看，这应该可以吗？我真的需要“psql”吗？“-d”有什么作用？我尝试在命令和 bupkiss 前面不使用 psql。想法表示赞赏...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:47:06.993

`-d yourdatabase`一旦 psql 启动，该选项就会连接到该数据库。
该`-f file.sql`选项表示加载 file.sql 并执行它包含的所有 SQL 命令。

如果您已经在里面`psql`，等效的命令将是：

`\c yourdatabase`: 连接到名为`yourdatabase`.

`\i file.sql`: 加载`file.sql`并执行其中的所有命令。它应该在当前路径中，否则指定完整路径。

# bash - 在 AWS CFN 模板中重试命令的正确方法是什么？

> ID：13274807
> 
> 赞同：2
> 
> 时间：2012-11-07T17:18:17.517
> 
> 标签：bash, amazon-web-services, amazon-cloudformation

有时，诸如`apt-get update -q`cloudformation 模板用户数据脚本中的命令会随机失败。重试它们直到成功的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:32:56.713

正如@shellter 指出的那样：

```
while ! apt-get update -q ; do sleep 1; done 
```

或者，对于脚本：

```
while ! apt-get update -q
do
    echo "Failed. Trying again..." >&2
    sleep 1
done 
```

# javascript - jQuery或Javascript将所有按钮设置为最宽按钮的宽度

> ID：13274809
> 
> 赞同：2
> 
> 时间：2012-11-07T17:18:29.073
> 
> 标签：javascript, jquery, html, css

我的客户希望我编写一段代码，首选 jQuery，它将所有链接设置为与最宽链接相同的宽度。这是HTML：

```
<div>
<h1>HEADER</h1>
<p style="text-align: right;" class="floatRight"><a href="#" class="small-button eLength"><span>BUTTON 1</span></a></p>
<p style="text-align: right;" class="floatRight"><a href="#" class="small-button eLength"><span>BUTTON 2</span></a></p>
<p style="text-align: right;" class="floatRight"><a href="#" class="small-button eLength"><span>BUTTON LONGEST</span></a></p>
</div> 
```

CSS 将所有三个按钮的最小宽度设置为 180 像素。我正在寻找这一切都取决于课程：***eLength***

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T17:25:30.307

您可以像这样获得最大宽度：

```
var widest = Math.max.apply(Math, $('.eLength').map(function() { 
    return $(this).width(); 
})); 
```

并将其包装在一个 sliver 插件中：

```
$.fn.widest = function() {
    return this.length ? this.width(Math.max.apply(Math, this.map(function() { 
        return $(this).width();
    }))) : this;
};

$('.eLength').widest(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:28:31.027

使用 John Resig 的[Fast JavaScript Max/Min](http://ejohn.org/blog/fast-javascript-maxmin/)：

```
Array.max = function(array) {
    return Math.max.apply(Math, array);
};

var widths = new Array();
$('.eLength').each(function(index) {
    widths.push($(this).width());
});

alert("Max Width: " + Array.max(widths)); 
```

# java - 使标签在代码中可见

> ID：13274810
> 
> 赞同：0
> 
> 时间：2012-11-07T17:18:30.740
> 
> 标签：java, swing, netbeans, wysiwyg, jlabel

我刚开始使用Java，我被困在一些非常烦人的事情上。
我正在使用 NetBeans IDE，并且正在`JFrame`使用拖放构建一个。我在我的框架中添加了两个标签并将它们重命名（使用`WYSIWYG interface designer`）。

现在我想进入代码并更改标签的名称，但它们不可见（在代码中）。知道为什么吗？（我通常用 C# 编程，并且使用设计器，标签在代码中自动可见）

* * *

**更新**：

当我尝试引用标签时出现以下错误。

![在此处输入图像描述](../Images/81280112e82610c2fdda0b35cfe462b2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:34:13.807

在代码中，它们在`initComponents()`Netbeans 生成的方法中声明。

如果我理解正确，您只是在寻找 JLabel 变量名称？如果是这样，这就是他们所在的位置——但不确定 Netbeans 是否允许您更改`initComponents()`方法中的任何内容。您可能必须在 GUI 编辑器中执行此操作，方法是右键单击标签并在其中设置您喜欢的属性。

**编辑**

发生这种情况是因为您可能在 main 中执行此操作，这是一种静态方法。我会亲自为标签创建一个 JPanel。例如，假设标签是“标题”。所以我会创建一个 TitlePanel 类来保存这些 JLabel（你想要的任何布局）。

这样，您可以从 main 引用该类并像这样添加它：

```
TitlePanel panel = new TitlePanel();
panel.setFirstTitle("test");    //this would be a custom method where you get the label and set it inside there
frame.add(panel); 
```

但另一方面，通过语言而不是 GUI 构建器来学习 swing 会更明智，因为您可能并不总是希望将 Netbeans 用作 IDE，但将来可能会改变您的偏好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:21:01.690

它们通常被命名为 jLabel1、jLabel2.. 默认情况下，但除非您以不同的方式所见即所得（即在设计时更改了它们的名称），否则无法从有关*如何*访问它们的问题中分辨出来。

# asp.net - Azure 缓存会话状态 - 是否部署引导用户？

> ID：13274814
> 
> 赞同：0
> 
> 时间：2012-11-07T17:18:37.873
> 
> 标签：asp.net, azure, session-state, azure-caching

如果使用 azure 缓存进行 asp.net mvc 会话状态管理，包括 dlls/web.configs 更改的部署是否仍会引导用户/强制新会话？

我假设由于会话在应用程序外部，因此它将保持打开状态，而不是强制用户再次登录。真的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:50:11.260

您应该查看 Azure 1.8 SDK（上周发布）中的新缓存功能：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh914161.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh914161.aspx)

顺便说一句，角色缓存不再是“预览”。如果您设置了一个缓存集群并且您的会话状态处于该缓存集群中，那么您的 Web 角色可能会关闭，您的应用程序将继续正常工作。

您还可以使用 Azure AppFabric 缓存（即缓存即服务），它们为 AzureCachingSessionStateProvider 提供程序集：http: [//msdn.microsoft.com/en-us/wazplatformtrainingcourse_buildingappswithcacheservice_topic3.aspx](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_buildingappswithcacheservice_topic3.aspx)

回答您的问题：如果我取消一个 Web 角色来部署代码，分布式会话状态是否有效？...是的。 [http://robbincremers.me/2012/02/23/using-windows-azure-caching-service-to-improve-performance-for-your-cloud-services/](http://robbincremers.me/2012/02/23/using-windows-azure-caching-service-to-improve-performance-for-your-cloud-services/)

我发布了一个关于它如何与负载均衡器一起工作的链接。由于负载均衡器是无状态的，它可以将任何请求路由到任何 Web 角色/服务器……由于会话状态处于分布式缓存中，因此任何 Web 角色都可以成功响应请求。如果您有 3 个 Web 角色并且您将其中的 1 或 2 个用于更新代码，那么其余的仍然可以返回请求。

# python - Django/Python 将来自 URL 的文件作为 http 代理快速流提供服务

> ID：13274816
> 
> 赞同：2
> 
> 时间：2012-11-07T17:18:47.280
> 
> 标签：python, django, http, proxy, twisted

我们的 SVG 文件存在跨域问题，这些文件由 CDN（内容交付网络）提供服务，因此来自与我们的主要域（Python/Django 应用程序）不同的域名。我们想设置一个特殊的视图，可以作为这些 SVG 文件的服务器端代理，以掩盖域名并解决跨域问题。问题是如何对 SVG 或什至其他类型（.jpg、.js、.png、.mp4 等）等静态文件的 url 发出快速 http 请求，并以分块的流式 http 响应尽快为它们提供服务我们从请求流中接收块。

我们意识到在 Django 和 WSGI 之外这样做当然可能更快，也许[扭曲的服务器](http://twistedmatrix.com)会更好，所以最终我们正在寻找完成我们需要的最快/最好的 Python 方法。真正寻找推荐解决方案的示例代码。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:36:12.950

您可以将 nginx 放在 Apache 前面，这将具有各种好处，例如更好的静态文件服务（IOW 让它处理静态文件而不是 Apache）以及将 Apache/mod_wsgi 与慢速客户端隔离。完成后，您可以让您的 Django 应用程序生成 X-Accel-Redirect 标头，nginx 将解释并发出新的子请求。该子请求的目标 URL 可以是 nginx 中的代理定义设置，用于从 CDN 获取文件并返回它们，就好像它们是对原始请求的响应一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:28:21.500

所以我有几个可能的解决方案给你。第一个是 python，但这可能不是您的最佳选择。

[1 )](http://twistedmatrix.com/documents/8.2.0/api/twisted.web.proxy.ReverseProxy.html) Twisted在`twisted.web.proxy`. [在他们的网站上](http://twistedmatrix.com/documents/current/web/examples/reverse-proxy.py)有一个非常简单（但有效）的例子

2) 根据应用程序（例如现代浏览器），在您的 CDN 配置中添加 CORS 响应标头可能对您有用。要检查，您的应用程序（浏览器？）是否尝试对 SVG 资源（带有“Origin:”http 标头）发出 GET 请求，但随后拒绝呈现它？

如果是这样，您可能会触发浏览器的同源要求。源可以通过返回`Cross-Domain-Allow-Origin: *`或类似的标头以及对带有`Origin:`标头的 HTTP 请求的响应来放宽此要求。

根据 CDN，我可能会澄清/提供示例元数据以启用跨域请求的 CORS 响应标头

3）你绝对需要使用python作为反向代理吗？[apache](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)和[nginx](http://wiki.nginx.org/HttpProxyModule#proxy_pass)都有经过很好测试的模块，可以在不使用 Python 的情况下实现流式反向代理。尝试用 python 来做这件事可能很有趣和/或令人钦佩，但它不会像直接在 HTTP 服务器中那样扩展到几乎相同的性能水平

# linux - 将执行的 ssh 脚本时间戳记录到服务器上的文件中

> ID：13274818
> 
> 赞同：2
> 
> 时间：2012-11-07T17:18:58.560
> 
> 标签：linux, bash, logging, ssh

我有一个远程执行一些命令的脚本，每次运行时都会将执行时间附加到日志中。我以为我做得对，但后来意识到脚本正在发送我机器的时间/日期，而不是使用日志中的服务器时间/日期。

这是我现在正在使用的命令：

```
ssh root@myserver "echo \"*** Log info of $(date -u) ***\" >> /var/log/app.log" 
```

我尝试使用单引号，但它根本不起作用脚本显示错误。

有没有更好的方法将该时间记录到服务器上的文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:23:49.700

将完整的命令括在单引号内，如下所示：

```
ssh root@myserver 'echo "*** Log info of $(date -u) ***" >> /var/log/app.log' 
```

# mysql - 关键字 MATCH 的 MySQL 查询

> ID：13274827
> 
> 赞同：1
> 
> 时间：2012-11-07T17:19:42.940
> 
> 标签：mysql

我在理解 MySql 中的 MATCH 时遇到了麻烦。我在“关键字”字段上有一个带有全文索引的表。关键字以逗号分隔。

我正在测试 3 行，关键字为：prep,rat,mouse

当我搜索“prep”或“rat”时，我得到了我想要的结果。但是如果我搜索“鼠标”，我没有得到任何结果。这是我正在使用的查询：

```
SELECT *, MATCH(Keywords) AGAINST('mouse') AS Score
FROM fs_Files
WHERE MATCH(Keywords) AGAINST('mouse')
ORDER BY score DESC; 
```

我也尝试过使用`IN BOOLEAN MODE`“鼠标”，但结果相同。

**编辑** 在我使用“鼠标”这个词的数据库条目中，我实际上使用了“mus”这个词（在挪威语中是鼠标）。我发现如果我把它改成“musebart”（只是让这个词更长），搜索就会把它捡起来。只有 3 个字符会不会太短？MySql 是否忽略它（停用词？），因为它只包含 3 个字符？

**再次编辑：** 宾果游戏，必须至少有 4 个字符才能搜索。否则，您必须更改它（如果您有权这样做）链接：[http](http://dev.mysql.com/doc/refman/5.1/en/fulltext-fine-tuning.html) ://dev.mysql.com/doc/refman/5.1/en/fulltext-fine-tuning.html 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:39:58.990

`match`作品当然有`like`一些差异。

我是说：

```
SELECT *, MATCH(Keywords) AGAINST('mouse') AS Score
FROM fs_Files
WHERE MATCH(Keywords) AGAINST('mouse')
ORDER BY score DESC; 
```

也可以

```
SELECT *, MATCH(Keywords) AGAINST('mouse') AS Score
FROM fs_Files
WHERE Keywords like '%mouse%'
ORDER BY score DESC; 
```

看看 Mysql 匹配：[http ://dev.mysql.com/doc/refman/5.0/es/fulltext-search.html](http://dev.mysql.com/doc/refman/5.0/es/fulltext-search.html)

看看它们之间的区别（匹配和喜欢）：[Mysql match...对抗简单的like "%term%"](https://stackoverflow.com/questions/1956236/mysql-match-against-vs-simple-like-term)

# matlab - 如何将回声的声音转换为正常的声音？

> ID：13274830
> 
> 赞同：0
> 
> 时间：2012-11-07T17:19:53.393
> 
> 标签：matlab, wav

我正在研究 MatLab 并试图提高自己。

我目前已将一些 .wav 文件转换为带有以下功能的回显版本

```
function [ ] = lab2echo(alpha,m )

fil=wavread('daffy.wav'); 
fil=transpose(fil);
fil2=[fil zeros(1,m)];
shifting_fil=[zeros(1,m) fil];
fil_echo=alpha*shifting_fil;
result=fil2+fil_echo;
sound(result);
end 
```

现在我想编写一个将回声转换为旧版本的函数。

有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:24:27.210

计算信号与自身的互相关。你应该得到两个峰值。峰值之间的差异应该是回波延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:25:33.363

很可能不是一个简单的方法。但是您可以尝试首先使用 xcorr 自行交叉关联信号以找到滞后。然后你必须估计回声的贡献并减去它。

可能有一个值 alpha，它使 的能量最小化`signal + alpha*delayed_signal`，其中 alpha>0。

# c++ - C++ 对象动态命名

> ID：13274831
> 
> 赞同：0
> 
> 时间：2012-11-07T17:20:01.347
> 
> 标签：c++, oop, pointers

> **可能重复：**
> [使用唯一的动态变量名（不是变量值！）](https://stackoverflow.com/questions/3441866/using-unique-dynamic-variable-names-not-variable-values)

我是使用 C++ 进行面向对象编程的新手。我正在尝试使用类和对象编写代数求解器。

例如，我想创建一个名为`term`. 例如，我有一个变量：

```
int number_of_term = 1; 
```

然后我想创建一个名为`number_of_term`.

我试图用指针来做，但没有用：

```
term *number_of_term; 
```

是否可以在 C++ 中动态创建和命名对象？我可以使用变量作为对象的名称吗？

如果不是，我应该怎么做才能做出类似的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:26:24.727

不，C++ 中对象的名称必须在编译时确定。C++ 不是动态语言。您可能应该使用`std::map`or`std::unordered_map`代替。这些将允许您将字符串映射到对象。这就是让您在运行时确定对象名称的动态语言通常是如何实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:26:08.720

不，您不能使用变量作为对象的名称。如果我正确理解了您的用例，您需要`number_of_term`type 的对象`term`。您可以使用容器类`vector`来保存`number_of_term`对象。像这样的东西：

```
#include <vector>

struct Term
{
};

int main ()
{
  std::vector< Term > terms;
  int number_of_term = 10;

  for(int i = 0; i < number_of_term; ++i)
  {
    terms.push_back( Term() );
  }
} 
```

# visual-studio-2010 - Intellisense 配置正确，但在我键入时不会弹出

> ID：13274832
> 
> 赞同：0
> 
> 时间：2012-11-07T17:20:03.453
> 
> 标签：visual-studio-2010, intellisense

我的电脑今天在我关闭 VS 2010 之前就出现了故障。现在 Intellisense 不再在我输入时弹出。此外，当我单击编辑 | Intellisense，我看到的菜单不包含让您清理源文件中的使用的菜单。

我已经查看了我的 VS 2010 副本中的 Intellisense 选项，并且它们设置正确。也就是说，当我转到工具 | 选项，然后选择文本编辑器，C#，常规，自动列表成员被选中，参数信息也是如此。此外，在 Intellisens 上，还会检查键入字符后的显示完成列表。

然而，直到我按下 Ctrl-J 或 Ctrl-space，Intellisense 才会弹出。

有谁知道出了什么问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:30:41.170

尝试从工具 | 禁用和重新启用 IntelliSense 选项 | 文本编辑器 | C# | IntelliSense：取消选中完整列表并应用，然后再次检查并应用。

如果这没有帮助，您可能需要修复您的 VS2010 安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:00:52.787

在愚蠢的程序员技巧下归档这个。事实证明，我在解决方案中打开了一个源文件，而不是它所属的解决方案。当我关闭该解决方案并打开正确的解决方案时，Intellisense 开始正常工作。

不管怎么说，还是要谢谢你

# opengl - 帧缓冲区对象在 Qt 4.8.1 中不起作用

> ID：13274836
> 
> 赞同：0
> 
> 时间：2012-11-07T17:20:24.937
> 
> 标签：opengl, framebuffer, fbo

我目前正在使用 Qt 中的 OpenGL 并尝试使用以下调用创建帧缓冲区对象

```
 glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_2D, scene_img, 0); 
```

当我尝试编译我的项目时，出现以下错误：

```
Error: C2065: 'GL_FRAMEBUFFER_EXT' : undeclared identifier 
```

显然，名称 GL_FRAMEBUFFER_EXT 没有在任何地方识别。我尝试导入 QtOpenGL、QGLShaderProgram 和 QGLFramebufferObject，但没有成功。还是同样的错误。我看了一下ql.h，仍然没有运气。还有什么我必须导入的吗？请注意，除了 FRAMEBUFFER 问题外，我的普通 QGLWidget 可以正常工作。

顺便说一句：在 Windows 7 上工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:10:17.697

> 尝试使用以下调用创建帧缓冲区对象
> 
> ```
> glFramebufferTexture2DEXT( 
> ```

这不会创建帧缓冲区对象。它将纹理指定为颜色附件。

顺便说一句，以 结尾的`EXT`函数是不属于核心功能的扩展函数。扩展通常从 EXT 转到 ARB 并可能成为核心，但可能会发生对 API 的细微到重大更改。

无论如何，OpenGL-1.1 (Windows) 或 OpenGL-1.2 (GLX) 之外的所有内容都必须通过扩展*机制*访问，即使它已成为核心功能。

最简单的方法：

1.  [从http://glew.sourceforge.net](http://glew.sourceforge.net)下载 GLEW
2.  将所有出现的 替换`#include <GL/gl.h>`为`#include <GL/glew.h>`
3.  `glewInit();`在（每个）上下文创建之后调用
4.  将 GLEW 库添加到您的构建链接器设置中。

# android - AssetManager.list - 结果对于某些设备来说太大了

> ID：13274841
> 
> 赞同：1
> 
> 时间：2012-11-07T17:20:42.453
> 
> 标签：android

我的资产文件夹中有一个目录，其中包含大量 png 文件（600+）。当我在旧设备上调用“assetManger.list()”时，我收到“ReferenceTable overflow (max=512)”警告，然后是“添加到 JNI 本地引用表失败（有 512 个条目）”错误，这实际上使应用程序崩溃。

在较新的设备上，这永远不会发生。

有没有不同的方法来列出/循环Android目录中的文件？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T22:50:27.103

我不得不放弃这种方法并做一些完全不同的事情。看起来除了使用 .list 方法之外，没有其他方法可以列出资产文件夹中的文件。那好吧。

# qt - QML 新手需要帮助从 C++ 中访问项目属性

> ID：13274844
> 
> 赞同：2
> 
> 时间：2012-11-07T17:20:54.530
> 
> 标签：qt, qt4, qml, qt-quick

我正在用 QT 和 QML 开发一个应用程序来访问一些 XML 数据并显示结果。

XML 是从 C++ 下载/解析的，并且工作正常。我有一个用于显示自定义布局的 QML 应用程序，它也可以正常工作。

为了使应用程序看起来更精致，我在 C++ 端完成初始下载/解析时显示了一个初始“启动屏幕”，我在主 QML 视图中创建了一个属性来表示当前应用程序“状态”，以便我可以交换数据准备好后到正确的屏幕。

**主.qml**

```
Item
{
   id: mainScreen
   width: 800; height: 600;   
   property int activeState: 0       // This controls what screen is displayed

   Item 
   {
       // screen layout .. removed .. 
   }
} 
```

C++ 代码由 QT creator 应用程序向导生成，并基于基本`QmlApplicationViewer`类。

我已经阅读（并重新阅读）了在线 QT 文档，据推测我要访问的各个属性所要做的`mainScreen`就是调用`findChild<QObject *>`应用程序查看器的方法`rootContext()`以返回`QObject`指向`mainScreen`实例的指针，然后`setProperty`像这样调用该方法.

```
QObject *mainView = ROOT_CONTEXT->findChild<QObject *>("mainScreen");

qDebug("mainView = %08X",(uint)mainView);

if(mainView)
{
    mainView->setProperty("activeState",1);
}
else
    qDebug("Unable to find the mainScreen QML object"); 
```

其中在`ROOT_CONTEXT`别处定义为

```
QDeclarativeContext *ROOT_CONTEXT;
QDeclarativeEngine  *ROOT_ENGINE;
QGraphicsObject     *ROOT_OBJECT;

void QmlApplicationViewer::createMyApplication(void)
{
    ROOT_CONTEXT = this->rootContext();
    ROOT_OBJECT  = this->rootObject();
    ROOT_ENGINE  = this->engine();

    pMyApplication = new MyApplication(this);
} 
```

并`void QmlApplicationViewer::createMyApplication(void)`在设置主 QML 文件后调用，即

```
QmlApplicationViewer viewer;

viewer.setMainQmlFile(QLatin1String("main.qml"));
viewer.showExpanded();
viewer.createMyApplication(); 
```

但...

我遇到的问题是返回的值`findChild<QObject *>("mainScreen");`始终为 NULL。我尝试使用以下代码枚举我的 QML 文件中的对象层次结构

```
QList<QObject*> list = ROOT_OBJECT->findChildren<QObject*>();

qDebug("list = %d",list.count());
int i;

for(i=0;i<list.count();i++)
{
    QObject *obj = list[i];

    qDebug() << "Object" << i << obj->objectName();
} 
```

我得到了一个大约 120 个项目的列表，但它们的名称都有一个空白字符串 ("")。

回顾 QT 文档，所有示例似乎都建议手动创建各个部分（即创建 和 的实例`QDeclarativeEngine`）`QDeclarativeComponent`并将`QDeclarativeItem`它们链接在一起，而不是使用`QApplicationViewer`此博客条目[http://xizhizhu.blogspot 中显示的类。 co.uk/2010/10/hybrid-application-using-qml-and-qt-c.html](http://xizhizhu.blogspot.co.uk/2010/10/hybrid-application-using-qml-and-qt-c.html)，但我更愿意坚持使用我已经编写的代码。

任何人都可以请帮助并建议我哪里出错或指出我可以找到一个“简单”示例的方向，该示例能够从 C++ 更改 QML 文件中项目的属性。

提前很多（很多）感谢。

乔恩...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T09:49:39.330

**更新**

以下代码

```
QList<QObject*> list = ROOT_OBJECT->findChildren<QObject*>();

qDebug("list = %d",list.count());
int i;

for(i=0;i<list.count();i++)
{
    QObject *obj = list[i];
    qDebug() << "Object" << i << obj->objectName();
} 
```

工作并转储对象列表，当我在我的 QML 文件中使用 objectName: 属性时，如上所述，我可以在我的应用程序中看到（并访问）ROOT 项的子项。

然而，我似乎无法做的是实际上访问 ACTUAL ROOT 项目并设置它的属性 - 他们在典型的面部手掌时刻让我恍然大悟，我已经参考了根对象！这是已经存储在 ROOT_OBJECT 变量中的值 * *sheesh* *

所以总结...

上述所有代码都有效——要在主视图中实际查找和调整 CHILD 的属性，请记住设置**`objectName:`**，如果要实际更改根项中的属性——只需使用函数返回的值即可**`QDeclaritiveView::rootObject()`**。

再次感谢**IvanFel**为我指明了正确的方向，希望这会在某个时候出现在搜索中并帮助其他人，就像过去很多 stackOverflow 条目帮助我一样。

8-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T18:12:52.077

**Main.qml 应该是**

```
Item
{
   id: mainScreen
   objectName: "mainScreen"
   width: 800; height: 600;   
   property int activeState: 0       // This controls what screen is displayed

   Item 
   {
       // screen layout .. removed .. 
   }
} 
```

您缺少 objectName：“mainScreen”，这就是 findChild<>() 找到它的孩子的方式。

# iframe - 更改嵌入式 Youtube 视频中菜单的语言？

> ID：13274845
> 
> 赞同：2
> 
> 时间：2012-11-07T17:20:56.243
> 
> 标签：iframe, menu, youtube

我正在开发一个双语网站（英语/法语），并且有一些页面嵌入了 Youtube 视频（使用最新的 iFrame 实现）。英文页面很好，但是对于法语页面，Youtube 视频右上角的下拉菜单仍然是英文的。我想知道是否可以更改 Youtube 视频中下拉菜单的语言？我没有找到任何有用的[参数](https://developers.google.com/youtube/player_parameters)来为此提供解决方案。这是否可以通过[iFrame API](https://developers.google.com/youtube/iframe_api_reference)进行配置？

谢谢！

# php - 在 PHP 中设置标题之前显示输出

> ID：13274847
> 
> 赞同：1
> 
> 时间：2012-11-07T17:21:00.130
> 
> 标签：php, http-headers

我有一个 HTML 表单，它通过 POST 将其数据提交到服务器页面：

```
<form id='report-inputs' method='post' action='generate.php'>...</form> 
```

`generate.php`is 对其给出的数据进行了大量工作，最终转储出 Excel 文件以供下载。它通过清理缓冲区和设置标题来做到这一点：

```
ob_end_clean();
header('Set-Cookie: fileDownloadToken='.$token); 
header('Content-type: application/vnd.ms-excel');
header('Content-Disposition: attachment; filename="'.$_DATA['title'].'.xlsx"');
$objWriter->save('php://output'); 
```

没有`ob_end_clean()`文件下载为损坏。我想在页面完成处理时显示某种确认或其他内容，但需要注意的是，在使用`ob_end_clean()`.

我该怎么做才能显示一些内容并成功交付文件？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:04:10.610

正如@mike-b 已经说过的那样，您不能同时做出相同的响应来做两件事。但这是你**可以**做的。

1.  您的 PHP 脚本应该创建下载文件并将其保存为服务器上的临时文件。
2.  向用户返回一个页面，说“感谢您对 Project X 的兴趣......”或其他任何内容。
3.  输出页面应在适当的时间间隔后将用户重定向到下载文件的 URL。或者您可以提供一个实际链接供他们点击。或两者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:02:07.717

将数据保存到文件中，在屏幕上显示您想要的任何内容，然后将 Javascript 重定向添加到您保存的文件中。

# javascript - 谷歌地球插件渴望重新渲染

> ID：13274865
> 
> 赞同：0
> 
> 时间：2012-11-07T17:22:02.220
> 
> 标签：javascript, google-earth-plugin

我正在尝试为 GE 插件中的点设置动画。问题是，每次我更改最终冻结插件的底层几何图形时，它似乎都会重新渲染自己。

```
var lineString = ge.createLineString(''),
    placemark  = ge.createPlacemark(''),
    coords     = lineString.getCoordinates(),
    features   = ge.getFeatures();

placemark.setGeometry(lineString);
features.appendChild(placemark);

myPoints.forEach(function(point) {
  // google earth re-renders on every one of these calls
  coords.pushLatLngAlt(point.lat, point.lng, 0);
});

// I want something explicit, like this, instead
placemark.redraw(); 
```

它不是将所有更改应用于 LineString 坐标，然后在地标上调用重新渲染方法，而是每次都重新渲染。

我的第一个想法是做某种类型的双缓冲。但是我加载了很多点，我无法承受双倍的内存使用量。

有什么解决方法吗？

**编辑：**

我尝试删除几何图形，对其进行编辑，然后将其添加回来。地标刚刚闪过……：/

```
placemark.setGeometry(null);

myPoints.forEach(function(point) {
  coords.pushLatLngAlt(point.lat, point.lng, 0);
});

placemark.setGeometry(lineString); 
```

**编辑：**

[通过使用google.earth.executeBatch](https://developers.google.com/earth/documentation/reference/google_earth_namespace#ab26414915202d39cad12bcd5bd99e739)，我确实设法显着提高了速度

```
google.earth.executeBatch(ge, function() {
  myPoints.forEach(function(point) {
    coords.pushLatLngAlt(point.lat, point.lng, 0);
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:18:01.920

一些想法：

*   使用[google.earth.executeBatch最小化 javascript/插件互操作](https://developers.google.com/earth/documentation/reference/google_earth_namespace#ab26414915202d39cad12bcd5bd99e739)
*   修改几何时 使用[frameend 事件来计时。](https://developers.google.com/earth/documentation/events)
    *   一种类似的技术更像是一种 hack，但当 frameend 不够时可能是一种替代方法，即在[回调](https://groups.google.com/forum/#!topic/google-earth-browser-plugin/ACw8tLnCnTI)[中进行几何操作`fetchKml`](https://groups.google.com/forum/#!topic/google-earth-browser-plugin/ACw8tLnCnTI)。
*   如果您要连接线串（或可以预生成多个线串段），请尝试使用[KmlCoordArray.push(KmlObjectBase coordOrList)](https://developers.google.com/earth/documentation/reference/interface_kml_coord_array#adaf7bbed6380b16e22b20d9bd7384ad1)来最小化 javascript/插件互操作，而不是一次推送一个。

我看到你编辑了你的问题，说你找到了 executeBatch 函数，这有帮助。您必须在每次迭代期间推送很多点才能看到插件挂起。

# iphone - 具有奇怪纹理的石英线

> ID：13274867
> 
> 赞同：1
> 
> 时间：2012-11-07T17:22:08.807
> 
> 标签：iphone, objective-c, core-graphics, quartz-graphics, textures

是否可以在 Quartz 中绘制一条具有奇怪纹理的线？这是纹理的一个例子。！

![在此处输入图像描述](../Images/8197df76951d0b0cfe73508f13dc6e98.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:57:01.213

是的。这在某种程度上取决于你如何画线。这是一个选项：制作包含所需图案的图像，然后使用创建 UIColor`[UIColor colorWithPatternImage:]`并将其设置为当前笔触颜色，然后画一条线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:31:47.850

`CGContextAddLineToPoint`一种方法：在剪裁矩形 ( ) 后绘制对角线（例如使用`CGContextClipToRect`）。

# actionscript-3 - 对列表中的不同行使用不同的皮肤

> ID：13274868
> 
> 赞同：1
> 
> 时间：2012-11-07T17:22:09.300
> 
> 标签：actionscript-3, flash, actionscript

我有一个`fl.controls.List`我正在填充的值。我希望某些行具有不同的颜色。例如，红色或绿色。

有没有办法指定特定的行应该使用特定的皮肤？

我在 swc 中将皮肤导入到我的项目中，因此可以轻松访问它们。不过，我很难找到对列表特定行的任何引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:39:46.637

解决方案是创建一个`CellRenderer`覆盖该`onDrawBackground`方法的自定义类。

然后，您可以通过执行设置单元格渲染器`list.setStyle('cellRenderer', MyCellRenderer)`

# c++ - 初始化作为类的私有成员变量的容器

> ID：13274870
> 
> 赞同：2
> 
> 时间：2012-11-07T17:22:11.567
> 
> 标签：c++, list, initialization, initializer, c++03

我有一个`list<string> myList`作为我班级的私有属性。该列表的内容在编译时是已知的并且是恒定的。是否有任何紧凑的方法（在 C++03 中）来初始化它的值？我只能这么想：

```
MyClass::MyClass(){
myList.push_back(string("str1"));
myList.push_back(string("str2"));
myList.push_back(string("str3"));
etc.
} 
```

我想要这样的东西：

```
MyClass::MyClass():list("str1","str2","str3",etc.){
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T17:32:44.433

我倾向于做这样的事情：

```
static const string my_strs[] =
{
  "str1",
  "str2",
  "str3"
};

static const num_my_strs = sizeof(my_strs)/sizeof(my_strs[0]); 
```

然后是时候初始化`list`：

```
MyClass::MyClass()
:  myList(my_strs, my_strs + num_my_strs)
{
} 
```

...或者：

```
MyClass::MyClass()
{
  copy( my_strs, my_strs+num_my_strs, back_inserter(myList));
} 
```

这种方法有利有弊。明显的缺点是您现在有 2 个数据副本。这也提出了一个问题，如果您在编译时知道内容并且它们永远不会改变，您甚至需要`list`吗？为什么不只使用`static const`数组？

在专业方面，初始化列表的代码是 1-liner，即使您更改正在处理到列表中的编译时常量数据，也永远不需要更改。

**编辑：** 您可以使用标准库算法`find`，例如普通的旧 C 样式数组。例如：

```
const string* it = std::find(my_strs, my_strs+num_my_strs, "str1");
if( it == (my_strs+num_my_strs) ) // functionally same as 'list.end()' eg, item not found
{ 
  // not found
}
else
{
  // found -- it points to item found
  string found_item = *it;
} 
```

**Edit2**像这样的表达式是否`int a[2]; &a[2];`定义明确正在争论中。我已经编辑了上面的指针数学以使用一种众所周知的不会唤起 UB 的方法。

**Edit3**我在标准中找到了与此相关的相关段落。上面的表达式 ( `int a[2]; &a[2];`) 实际上是 Undefined Behavior。我已经编辑了我的答案以不使用该方法。感谢@MooingDuck 提出这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T17:30:49.040

这段代码没有经过全面测试，但如果你不能在 C++11 中使用新的和很酷的东西，我会建议这样做：

```
class MyClassCreator
{
    MyClass result;
public:
    MyClassCreator(std::string param)
    {
        result.myList.push_back(param);
    }

    MyClassCreator& operator()(std::string param)
    {
        result.myList.push_back(param); 
        return *this;
    }

    operator MyClass() { return result; }

}; 
```

用法：

```
MyClass c = MyClassCreator("object1")("object2")("object3"); 
```

## 编辑

[请参阅http://ideone.com/LWGRCc](http://ideone.com/LWGRCc)上的完整示例

# jquery - removeClass() 不工作？

> ID：13274871
> 
> 赞同：0
> 
> 时间：2012-11-07T17:22:13.170
> 
> 标签：jquery, removeclass

我正在使用一些新的 CSS3 功能来使点击功能看起来像一张翻转卡片。在这样做时，客户要求能够翻转。我正在尝试使用 removeClass() 来实现，但我做不到。addClass() 工作正常，但“翻转”类没有被删除。我正在使用 jquery 1.8.1。

```
$(document).ready(function(){
    $('.flipper').click(function(){
        $(this).addClass('flip');
    });
    $('#flipBack').click(function(){
        $(".flipper").addClass('flipBack').removeClass('flip');
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:25:42.957

也许这两个事件都被调用了。在第二次单击中删除翻转类后，它会在第一次单击中返回

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:27:54.937

一些 html 可能会有所帮助，也许是[***jsFiddle***](http://jsfiddle.net/)，但是，您可以一起添加删除。

如果您将 FlipBack 设置为默认类（我假设它可能是动画但具有默认状态），那么您可以更轻松地使用 jQuery 的[toggleClass](http://api.jquery.com/toggleClass/)

```
$(function() {
    $('.flipper').click(function(e) { e.stopPropagation(); $(this).toggleClass('flip flipBack') });
    // and if you really need it, tho i'm still unsure the full functionality here
    $('#flipBack').click(function(e) { e.stopPropagation(); $('.flipper').toggleClass('flip flipBack') });
}) 
```

# [jdFiddle 示例](http://jsfiddle.net/SpYk3/nSyNy/)

您确定没有同时调用两次点击吗？一些 html 真的有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:35:36.600

问题可能出在您`#flipBack`的内部`.flipper`。如果是这种情况，您需要阻止事件冒泡。

这是问题的示例[http://jsfiddle.net/kSg89/1/](http://jsfiddle.net/kSg89/1/)

这是解决方案[http://jsfiddle.net/kSg89/2/](http://jsfiddle.net/kSg89/2/)

```
$(document).ready(function(){
    $('.flipper').click(function(){
        $(this).addClass('flip');
    });
    $('#flipBack').click(function(e){
        e.stopPropagation();
        $(".flipper").addClass('flipBack').removeClass('flip');
    });
}); 
```

# wpf - 当绑定在 DataGridTextColumn 中时，WPF/Xaml Datagrid 不会触发 ValidatesOnDataErros

> ID：13274875
> 
> 赞同：2
> 
> 时间：2012-11-07T17:22:28.400
> 
> 标签：wpf, xaml, mvvm

我有一个数据网格，它绑定到我的视图模型中的一个可观察集合。这一切都很好，并在数据网格中显示我的数据。

我现在需要做的是在用户更改文本时验证某些列。我正在使用 IDataErrorInfo 来执行此操作。

如果我执行以下操作：-

```
**<TextBox 
     Width="100" 
     Text="{Binding Path=CallCode,
     Mode=TwoWay,
     ValidatesOnDataErrors=True,
     UpdateSourceTrigger=PropertyChanged }"/>** 
```

这有效并触发了我的视图模型中的验证代码，但是如果我将此代码添加到数据网格中，如下所示，它不会做任何事情！：-

```
<Border x:Name="body"                    
        DockPanel.Dock="Top"   
        Grid.Row="2" 
        Grid.Column="0">

        <!-- Results -->
        <DataGrid x:Name="Results"                            
            ItemsSource="{Binding CallCodesList}"
            AutoGenerateColumns="False"
            ScrollViewer.CanContentScroll="True"
            ScrollViewer.VerticalScrollBarVisibility="Auto"
            CanUserAddRows="False">

            <DataGrid.Columns >

            **<DataGridTextColumn                                                     
                     Header="Call Code" 
                     CanUserSort="True" 
                     Width="100" 
                     Binding="{Binding CallCode, 
                     ValidatesOnDataErrors=True,  
                     UpdateSourceTrigger=PropertyChanged />**

                 <DataGridCheckBoxColumn Width="70"
                        Binding="{Binding Path=HasSpeech}"
                        Header="Speech"
                        IsThreeState="True">
                    <DataGridCheckBoxColumn.ElementStyle>
                        <Style TargetType="CheckBox">
                            <Setter Property="IsChecked" Value="{Binding HasSpeech}" />
                        </Style>
                    </DataGridCheckBoxColumn.ElementStyle>
                </DataGridCheckBoxColumn>          
        </DataGrid>
    </Border> 
```

有什么我遗漏的东西还是因为它在数据网格中而看不到某些东西，这是全新的，所以目前卡住了:(

对此的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:27:26.513

它接缝代码很好，我不知道 wpftoolkit 的数据网格是否允许 IDataErrorInfo 验证，但在这篇文章（[WPF Toolkit 的 DataGrid 中的验证](http://www.codeproject.com/Articles/272667/Validation-in-WPF-Toolkit-s-DataGrid)）中，您可以看到在 wpftoolkit 的数据网格上使用验证的一个很好的例子，但是使用IDataError 接口方式。我希望这对你有帮助...

# c++ - C++ 具有类内初始化程序的成员必须是 const

> ID：13274876
> 
> 赞同：36
> 
> 时间：2012-11-07T17:22:33.283
> 
> 标签：c++, visual-studio-2010

我正在尝试在我的类中创建一个静态字符串：（在我的头文件中）

```
static string description = "foo"; 
```

但我收到此错误：

```
IntelliSense: a member with an in-class initializer must be const 
```

如果我将其更改为：

```
static const string description = "foo"; 
```

我收到了这个错误：

```
IntelliSense: a member of type "const std::string" cannot have an in-class initializer 
```

我做错什么了？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-07T17:25:33.893

您可以做的是在标头中声明字符串并在 .cpp 中对其进行初始化。

在 MyClass.h

```
#include <string>
class MyClass
{
  static std::string foo;
} 
```

在 MyClass.cpp 中

```
#include "MyClass.h"
std::string MyClass::foo = "bar" 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-07T17:28:23.647

忽略特定的错误消息，核心问题是您试图在*声明*中初始化静态成员属性，而通常应该在*定义*中完成。

```
// header
struct test {
  static std::string x;
};
// single cpp
std::string test::x = "foo"; 
```

现在回到错误消息。在 C++03 标准中有一个例外，它允许为常量整数类型的声明提供初始化程序，以便该值可以在包含标头的所有翻译单元中可见，因此可以用作常量表达式：

```
// header
struct test {
   static const int size = 10;
};
// some translation unit can do
struct A {
   int array[test::size];
}; 
```

如果该值是在变量的定义中定义的，那么编译器只能在该单个翻译单元中使用它。似乎您的编译器正在执行两项测试，一项针对 const-ness，另一项针对*积分*部分，因此有两条错误消息。

可能影响编译器设计的另一件事是 C++11 标准允许在类的非静态成员的声明中使用初始化器，然后将在每个不提供该字段的值：

```
struct test {
   int a = 10;
   int b = 5;
   test() : a(5) // b(5) implicitly generated
   {} 
}; 
```

这与您的特定问题无关，因为您的成员是静态的，但它可能解释了为什么编译器中的测试按原样拆分。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-07T17:27:46.570

将声明与定义分开。在头文件中，执行以下操作：

```
static string description; 
```

然后在一个翻译单元（一个 CPP 文件）中，执行以下操作：

```
string type::description = "foo"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T17:32:53.280

我不知道静态成员和常量成员之间究竟需要什么。静态成员将与类本身相关联，而不是与实例相关联，而常量成员与实例相关联并且是常量。

[但是，这可能与此](https://stackoverflow.com/questions/5019856/c-initialize-static-variables-in-class)重复

问候

# http - 以字符串形式获取 HTTP 响应正文（RubyMotion 的 BubbleWrap）

> ID：13274884
> 
> 赞同：0
> 
> 时间：2012-11-07T17:23:00.940
> 
> 标签：http, twitter, rubymotion

使用 RubyMotion（第一次！），我想使用 Twitter 的搜索 API 为一些用户检索一些最近的推文，所以将下面的类放在一起。

的值`tweets`始终是一个空数组。我怀疑它`BW::HTTP.get(url)`会产生导致问题的自己的线程。

真的，我只是想`twitter_search_results`回来`response.body.to_str`，但我不知道该怎么做。

**如何使用 RubyMotion（或 BubbleWrap）将一组 Tweet 对象放入我的 UIViewController？**

```
class TweetsController
  def initialize
    @twitter_accounts = %w(dhh google)
    @tweets = []
  end

  def tweets
    twitter_search_results
    puts @tweets.count
    @tweets
  end

  def create_tweets(response)
    BW::JSON.parse(response)["results"].each do |result|
      @tweets << Tweet.new(result)
    end
  end

  def twitter_search_results
    query = @twitter_accounts.map{ |account| "from:#{account}" }.join(" OR ")
    url = "http://search.twitter.com/search.json?q=#{query}"
    BW::HTTP.get(url) do |response|
      create_tweets(response.body.to_str)
    end
  end
end

class TwitterViewController < UIViewController
  def viewDidLoad
    super
    self.view.backgroundColor = UIColor.blueColor
    @table = UITableView.alloc.initWithFrame(self.view.bounds)
    self.view.addSubview @table
    @table.dataSource = self
    @tweets_controller = TweetsController.new
  end

  def initWithNibName(name, bundle: bundle)
    super
    self.tabBarItem = UITabBarItem.alloc.initWithTitle(
      "Twitter",
      image: UIImage.imageNamed('twitter.png'),
      tag: 1)
    self
  end

  def tableView(tableView, numberOfRowsInSection: section)
    @tweets_controller.tweets.length
  end

  def tableView(tableView, cellForRowAtIndexPath: indexPath)
    @reuse_id = "Tweet"
    cell = UITableViewCell.alloc.initWithStyle(UITableViewCellStyleDefault, reuseIdentifier:@reuse_id)
    cell.textLabel.text = @tweets_controller.tweets[indexPath.row].text
    return cell
  end
end

class Tweet
  attr_reader :created_at, :from_user, :text
  def initialize(tweet_result)
    @created_at = tweet_result["created_at"]
    @from_user = tweet_result["from_user"]
    @text = tweet_result["text"]
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:07:31.683

这里的问题是异步性。我想你快到了，但是`create_tweets`之前没有调用该方法`puts @tweets`。在这种情况下，我建议使用通知，因为我认为它们很好;-)

```
TweetsReady = 'TweetsReady'  # constants are nice
NSNotificationCenter.defaultCenter.postNotificationName(TweetsReady, object:@tweets)

In your controller, register for this notification in `viewWillAppear` and unregister in `viewWillDisappear`

NSNotificationCenter.defaultCenter.addObserver(self, selector: 'tweets_ready:', name: TweetsReady, object:nil)  # object:nil means 'register for all events, not just ones associated with 'object'
# ...
NSNotificationCenter.defaultCenter.removeObserver(self, name:TweetsReady, object:nil) 
```

并且您的 tweets_ready 方法应该实现您的 UI 更改。

```
def tweets_ready(notification)
  @table.reloadData
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T16:55:20.593

完整的控制器代码如下。我也把[项目放在了 GitHub 上](https://github.com/michrome/rubymotion)

```
class TweetsController
  def initialize
    @twitter_accounts = %w(dhh google)
    @tweets = []
    create_tweets
  end

  def tweets
    @tweets
  end

  def create_tweets
    json_data = twitter_search_results.dataUsingEncoding(NSUTF8StringEncoding)
    e = Pointer.new(:object)
    dict = NSJSONSerialization.JSONObjectWithData(json_data, options:0, error: e)
    dict["results"].each do |result|
      p result.class
      p result
      @tweets << Tweet.new(result)
    end
  end

  def twitter_search_results
    query = @twitter_accounts.map{ |account| "from:#{account}" }.join(" OR ")
    url_string = "http://search.twitter.com/search.json?q=#{query}"
    url_string_escaped = url_string.stringByAddingPercentEscapesUsingEncoding(NSUTF8StringEncoding)
    url = NSURL.URLWithString(url_string_escaped)
    request = NSURLRequest.requestWithURL(url)
    response = nil
    error = nil
    data = NSURLConnection.sendSynchronousRequest(request, returningResponse: response, error: error)
    raise "BOOM!" unless (data.length > 0 && error.nil?)
    json = NSString.alloc.initWithData(data, encoding: NSUTF8StringEncoding)
  end
end 
```

# css - 旋转设备时是否有固定位置的解决方法？

> ID：13274886
> 
> 赞同：1
> 
> 时间：2012-11-07T17:23:14.807
> 
> 标签：css, position, fixed

我有一个具有以下属性的 DIV：

```
#navigation
{
    position            : fixed;
    left                : 0%;
    top                 : 0%;

    display             : block;
    width               : 100%;
    height              : 44px;

    text-align          : center;

    background          : #171717;

    -webkit-transform   : translate3d(0px, 0px, 0px);
} 
```

当用户滚动时，需要 webkit 转换来保持栏在适当的位置。

但是，当我处于纵向并滚动然后将设备旋转到横向时。酒吧消失了。当我横向滚动时，该栏会重新回到正确的位置。

然后，当我将设备旋转回纵向时，该栏在屏幕中的一半，直到我再次滚动并再次弹回正确位置。

我认为这与重绘对象有关，有没有办法强制旋转？

**编辑：仅当您在独立模式下使用应用程序时才会发生这种情况（添加到主屏幕）**

# java - 不是所有的按钮都显示在 Java 中？

> ID：13274892
> 
> 赞同：0
> 
> 时间：2012-11-07T17:23:37.520
> 
> 标签：java, eclipse, macos, swing, jbutton

当我使用 Eclipse 运行程序时，只显示一个按钮（左上角），但是当我在终端中使用 javac 时（大部分时间），所有按钮都会显示！这真的让我很烦。任何人都可以帮忙吗？谢谢！
这是我的构造函数：

```
 public TicTacToe(){
    super("Farm Tic-Tac-Toe");
    setSize(450,750);
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    Container cont = getContentPane();
    cont.setLayout(null);
    int newLine = 0;
    int lineCount = 0;
    for(int i = 0; i < buttons.length; i++){
        buttons[ i] = new JButton(blank);
        if(i == 3 || i == 6){
            newLine++;
            lineCount = 0;
        }
        buttons[ i].setBounds(lineCount*150,newLine*150,150,150);
        cont.add(buttons[ i]);
        buttons[ i].addActionListener(this);
        lineCount++;
    }
} 
```

这是动作监听器...

```
 public void actionPerformed(ActionEvent e){
    for(int i = 0; i < buttons.length; i++){
        if(e.getSource()==buttons[ i]){
            if(turn%2==0){
                buttons[ i].setName("x");
                buttons[ i].setIcon(x);
                buttons[ i].removeActionListener(this);
            }
            else{
                buttons[ i].setName("o");
                buttons[ i].setIcon(o);
            }
            buttons[ i].removeActionListener(this);
        }
    }
    turn++;
    checkWin();
} 
```

请不要告诉我太多关于我的代码设计有多糟糕，因为我（不是初学者，但是）不太擅长 Java。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T17:33:58.463

您在将所有组件添加到 GUI`setVisible(true)` *之前*调用，因此它不会全部显示。不要这样做。而是在添加所有组件`setVisible(true)` *后调用。*

还

*   正如许多人所建议的那样，不要使用空布局，而是学习和使用布局管理器。
*   是的，再买一本书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:27:33.560

Eclipse GUI 仅呈现以某些非常特定的方式绘制的按钮。如果您的代码以不同的方式执行（例如，使用循环），Eclipse 将无法绘制它。

另外，使用 a `LayoutManager`，不要做类似的事情`.setLayout(null)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T20:11:12.567

问题的解决方法真的很简单……

第一个是缺少布局管理器，另一个是您显示 UI 的顺序（如前所述）

![在此处输入图像描述](../Images/9a790b92f05e662414016944cd4b5a85.png)

```
public class SimpleTicTacToe {

    public static void main(String[] args) {
        new SimpleTicTacToe();
    }

    public SimpleTicTacToe() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new GamePane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class GamePane extends JPanel {

        public GamePane() {
            setLayout(new GridLayout(3, 3));
            for (int index = 0; index < 9; index++) {
                add(new JButton());
            }
        }

    }

} 
```

花时间阅读[使用 JFC/Swing 创建 GUI 以](http://docs.oracle.com/javase/tutorial/uiswing/)掌握基础知识。

# android - 有没有办法通过monkeyrunner检查模拟器是控制器？

> ID：13274894
> 
> 赞同：3
> 
> 时间：2012-11-07T17:23:46.907
> 
> 标签：android, monkeyrunner

我想在我的代码中设置一些条件以使其以一种方式运行，如果它由 monkeyrunner 测试，另一种方式，如果它被用户使用。

如何在测试的应用程序中检查模拟器/应用程序是否由 monkeyrunner 驱动？

PS 我知道进行此类检查是不好的做法（被测代码应该与生产中的代码相同）。但是，这是一种特殊情况，很难以其他方式处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T22:09:42.693

除了将文件上传到模拟器/设备作为 MonkeyRunner 测试的一部分并在应用程序源代码中检查它之后，我没有找到一种干净的方法来检查它。

# javascript - 是否可以从 GAS 更改 Google Sites DOM？

> ID：13274898
> 
> 赞同：1
> 
> 时间：2012-11-07T17:23:57.347
> 
> 标签：javascript, google-apps-script, google-sites

我有一个带有 Apps 脚本小工具的 Google 协作平台页面。应用脚本的代码如下：

**代码.gs：**

```
function doGet(e) {
  return HtmlService.createHtmlOutputFromFile("changedom");
} 
```

**changedom.html：**

```
<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
      function changeDom() {
        console.log('Testing container DOM change...');
        var spanTitle = $('sites-page-title');
        if(spanTitle) {
          console.log($('sites-page-title').innerHTML);
          spanTitle.innerHTML = spanTitle.innerHTML + ' (change)';
          console.log(spanTitle.innerHTML);
        }
      }
      changeDom();
    </script>
  </head>
  <body></body>
</html> 
```

其中“sites-page-title”是我的 Google App Script Gadget 中的一个 DOM 对象，因为它是 Google Sites 页面标题。

在 Chrome 中运行时的控制台日志是：

```
...
Testing container DOM change...
undefined
undefined (change)
... 
```

并且 id 为 sites-page-title 的 DOM 对象没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:55:11.670

不，您的代码无法访问小工具之外的任何内容。

# cakephp - 在 CakePHP url 中转义冒号 (:)

> ID：13274899
> 
> 赞同：3
> 
> 时间：2012-11-07T17:24:00.917
> 
> 标签：cakephp

我有一个简单的 cakePHP 操作，可以通过 url 参数查找某人通过其标题发布的帖子。`:`最近，有一篇帖子在标题中包含一个冒号（ ），蛋糕被解释为一个命名参数。

虽然用

```
str_replace(':', 'BANANA!_replace_colons, YAY safenow', $name) 
```

我很好奇是否有标准或更优雅的方式来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:09:34.890

如果你想在 url 中传递它，你总是可以对标题进行 urlencode。

如果帖子标题是“foo:bar”而不是

```
/post/foo:bar 
```

你应该有

```
/post/foo%3Abar 
```

因为稍后您可能有一个包含斜线的帖子标题，`/`并且您必须添加另一个 str_replace... 或者可能会有带有重音符号的字符。

在我的情况下，我总是在表格上有一个名为“title_url”的第二个字段，它是标题的[Slug](http://book.cakephp.org/2.0/en/core-utility-libraries/inflector.html#Inflector::slug)，我`title_url`在 url 中使用它。所以在我的例子中，网址是这样的

```
/post/foo_bar 
```

这比 urlencode 更易于阅读。

但是，路由器上有一个名为[“贪婪之星”（`/*`）和“尾随之星”（`/**`）](http://book.cakephp.org/2.0/en/development/routing.html#connecting-routes)的选项。即使它们包含特殊字符，它们也会帮助您捕获参数

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:51:54.063

我刚刚使用 array('action' => 'view', 'name' => $name); Cake 似乎能够很好地处理第一个冒号之后的所有内容。

# ruby - 获取 XML 中重复节点的值？

> ID：13274901
> 
> 赞同：0
> 
> 时间：2012-11-07T17:24:05.817
> 
> 标签：ruby, xml

如果两个节点具有相同的名称，如何使用 LibXML for Ruby 或任何其他 Ruby 库来获取它们的值？我有这个 XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<test>
  <test1>
    <foo>534569</foo>
  </test1>
  <test1>
    <foo>534570</foo>
  </test1>
</test> 
```

我想要`foo`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:30:36.827

就个人而言，我建议使用[Nokogiri](http://nokogiri.org)。它已成为 Ruby 中 XML/HTML 解析的事实标准。

```
require 'nokogiri'

doc = Nokogiri::XML(<<EOT)
<?xml version="1.0" encoding="ISO-8859-1"?>
<test>
  <test1>
    <foo>534569</foo>
  </test1>
  <test1>
    <foo>534570</foo>
  </test1>
</test>
EOT

doc.search('foo').map(&:text) 
```

返回：

```
[
    [0] "534569",
    [1] "534570"
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:46:31.120

您可以使用该`find`方法，该方法将返回与指定 xpath 匹配的所有节点。

下面是如何输出每个 foo 元素的内容的示例：

```
require 'libxml'

xml_sample = %q[<?xml version="1.0" encoding="ISO-8859-1"?>
<test>
  <test1>
    <foo>534569</foo>
  </test1>
  <test1>
    <foo>534570</foo>
  </test1>
</test>]

doc = LibXML::XML::Document.string(xml_sample)
doc.find('test1/foo').each{ |foo| puts foo.content }
#=> 534569
#=> 534570 
```

# javascript - 使用移动 Web 应用程序访问 Google API OAuth2？

> ID：13274903
> 
> 赞同：0
> 
> 时间：2012-11-07T17:24:13.027
> 
> 标签：javascript, cordova, google-api

我正在使用 JavaScript 和 HTML 编写一个移动应用程序，我将使用 PhoneGap 对其进行打包，因此最终它将是一个原生应用程序。

此应用程序的一项功能将是“从 Google 文档导入”之一。我将为该应用程序设置一个 Google 帐户并将一些文档放入其中，以便应用程序本身可以使用它们。这看起来很简单，直到我遇到了 OAuth2。

我无法弄清楚的是如何为我的应用程序提供一种使用预身份验证令牌进行身份验证的方法（我认为这是在 OAuth 工作流程中使用“密钥”）。问题似乎是在我阅读的 Google API 指南中，当谈到 JavaScript 集成时，他们总是指的是一个 Web 应用程序——作为 OAuth 流程的一部分——最终会要求用户使用她的 Google 帐户进行身份验证（而不是我的应用程序的一个）并且从不使用“密钥”（我们将把将密钥嵌入到应用程序中的问题留待以后处理）。

我在这里想念什么？有没有人做过类似的事情并愿意解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:17:28.437

我最近在 BlackBerry Jam Americas 上介绍了 OAuth。您可以在此处查看此演示文稿的记录，我认为这可能有助于回答有关 OAuth 和 OAuth2 之间差异以及如何在 PhoneGap（或 WebWorks）应用程序中实现它们的一些问题：http: [//hosting.desire2learncapture.com/RIM /1/watch/63.aspx?q=social](http://hosting.desire2learncapture.com/RIM/1/watch/63.aspx?q=social)

此外，我的同事 Chad 最近发布了一些示例代码，您可以在自己的应用程序开发中使用它们。我们在此处发布了示例 BlackBerry WebWorks 应用程序，演示了如何将 OAuth 与 Twitter、FaceBook 和 Foursquare 集成： [https ://github.com/blackberry/BB10-WebWorks-Samples](https://github.com/blackberry/BB10-WebWorks-Samples)

祝你好运！

# php - PHP + MongoDB：未捕获的异常“MongoCursorException”和消息“没有这样的文件或目录”

> ID：13274910
> 
> 赞同：29
> 
> 时间：2012-11-07T17:24:32.870
> 
> 标签：php, mongodb, mongodb-php

我正在开发一个尝试从 PHP 连接到 MongoDB 数据库的 Web 应用程序。在 90% 的页面加载中一切正常，但在其他 10% 中，当我尝试更新集合时，它会引发以下异常：

```
Fatal error: Uncaught exception 'MongoCursorException' with message 'No such file or directory' in D:\webDev\webSites\str\dev3\_global_classes\User.php:40
Stack trace:
#0 D:\webDev\webSites\str\dev3\_global_classes\User.php(40):
   MongoCollection->update(Array, Array, Array)
#1 D:\webDev\webSites\str\dev3\_init\_init.php(8):
   User->__construct(NULL)
#2 D:\webDev\webSites\str\dev3\index.php(3):
   include('D:\webDev\webSi...')
#3 {main} thrown in D:\webDev\webSites\str\dev3\_global_classes\User.php on line 40 
```

PHP代码：

```
public function __construct($SESSIONID = null) {        
    User::$_users_collection = Main::$_mongo->selectCollection("users");

     ...   

    $query = array('session_id' => session_id());

    $expiry = time() + Main::$_lifetime;
    $data = array(
        'session_id' => session_id(),
        'expiry' => (string)$expiry,
        'ip' => $_SERVER['REMOTE_ADDR']
    );

    $options = array(
        'upsert' => true,
        'safe' => true
    );

    try {
        User::$_users_collection->update($query, array('$set' => $data), $options);
    } catch (Exception $e) {
        throw $e;
    }

    ...
} 
```

蒙哥版本：

```
Wed Oct 17 10:53:48 /usr/bin/mongos db version v2.0.7, pdfile version 4.5 starting (--help for usage)
Wed Oct 17 10:53:48 git version: 875033920e8869d284f32119413543fa475227bf
Wed Oct 17 10:53:48 build info: Linux ip-10-2-29-40 2.6.21.7-2.ec2.v1.2.fc8xen #1 SMP Fri Nov 20 17:48:28 EST 2009 x86_64 BOOST_LIB_VERSION=1_41 
```

我的mongo集群只有一个shard，我的php版本是：5.4.4，我的mongo驱动版本是：1.2.12。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T16:37:41.347

检查错误代码**$e->getCode();** 使用：

```
 try {
        User::$_users_collection->update($query, array('$set' => $data), $options);
    } catch (MongoCursorException $e) {
    echo "error message: ".$e->getMessage()."\n";
    echo "error code: ".$e->getCode()."\n";
    } 
```

并使用错误代码检查 Mongo 光标异常错误列表： [http ://www.php.net/manual/pt_BR/class.mongocursorexception.php](http://www.php.net/manual/pt_BR/class.mongocursorexception.php)

例如，如果您收到错误代码 3 *“这可能表明您的 RAM 不足或其他特殊情况。”* .

*注意：避免使用安全选项，已弃用。使用 WriteConcern w 选项，也会提供更多选项。*

**关于错误：** *“由错误访问游标或接收回复错误引起。任何将信息发送到数据库并等待响应的操作都可能引发 MongoCursorException。唯一的例外是 new MongoClient()（创建新连接） ，只会抛出 MongoConnectionExceptions。”（[http://php.net/manual/en/class.mongocursorexception.php](http://php.net/manual/en/class.mongocursorexception.php)）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:59:22.420

很难知道它发生在哪里，但是[这个页面](http://php.net/manual/en/class.mongocursorexception.php) 详细解释了可能导致这个异常的原因

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T07:19:23.147

Mongo DB 库不能安装在 PHP.ini 中

对于窗口

[http://www.php.net/manual/en/mongo.installation.php#mongo.installation.windows](http://www.php.net/manual/en/mongo.installation.php#mongo.installation.windows) [https://s3.amazonaws.com/drivers.mongodb.org/php/index.html](https://s3.amazonaws.com/drivers.mongodb.org/php/index.html)

对于 Linux

[http://www.php.net/manual/en/mongo.installation.php#mongo.installation.nix](http://www.php.net/manual/en/mongo.installation.php#mongo.installation.nix)

这有助于我通过 PHP 运行 mongodb

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-04T14:54:18.663

我已经看到了很多这个错误，这是有道理的：

当游标迭代期间出现**TIMEOUT**时，MongoDB 会引发游标异常。也就是说，如果您在 Mongo 上针对大型数据集发出查询，则分配一个游标。然后，您遍历光标，一次检索一个结果，这是正常的光标行为。 **但是**，如果您在足够长的时间后仍在检索结果，则会收到上述消息。

解决这个问题的方法可能有两件事：

*   （应用层）将您的结果检索到一个临时集合中并对其进行迭代（丑陋）；
*   （连接层）在查询之前将超时设置得更高（假设有可能会更好）。

请注意，您的结果可能会有所不同，祝您好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-14T09:05:04.633

很可能，PHP Mongo 客户端在连接到实际的 MongoDB 时遇到了故障。

正如您在其他地方所说（[https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/wqcCNQgiJAQ](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/wqcCNQgiJAQ)），您通过 VMWare 运行 MongoDB，这可能会不时导致连接问题。

# php - 如何在 symfony 中获取当前用户 ID？

> ID：13274914
> 
> 赞同：1
> 
> 时间：2012-11-07T17:24:59.887
> 
> 标签：php, symfony-1.4

> **可能重复：**
> [如何从 sfUser 中获取 id？](https://stackoverflow.com/questions/6028718/how-to-catch-an-id-from-sfuser)

如何在 symfony(1.4.17) 中获取当前登录用户的 ID？

我尝试了获取保护用户的东西，但没有用。我只想将当前用户 ID 放在变量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:32:00.543

只需在登录过程中设置 id 属性

```
$this->getUser()->setAttribute("id", <your id>); 
```

然后检索它

```
$this->getUser()->getAttribute("id"); 
```

# json - 如何使用任何其他客户端将 GET 参数作为 JSON 发送

> ID：13274915
> 
> 赞同：0
> 
> 时间：2012-11-07T17:25:01.440
> 
> 标签：json, rest, parameters, get, request

我想发送一个参数为 json 的请求。我试图在请求正文中设置这些，但这不起作用。有没有其他方法可以将参数作为 JSON 发送？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:29:28.203

```
$.ajax({
  type: 'GET',
  url: url,
  data: JSON.stringify(myJsonObject),
  success: successCallback,
  dataType: 'json'
}); 
```

# python - Python 导入的模块是 None

> ID：13274916
> 
> 赞同：6
> 
> 时间：2012-11-07T17:25:14.063
> 
> 标签：python

我有一个可以正常导入的模块（我将它打印在使用它的模块的顶部）

```
from authorize import cim
print cim 
```

产生：

```
<module 'authorize.cim' from '.../dist-packages/authorize/cim.pyc'> 
```

然而后来在一个方法调用中，它神秘地变成了`None`

```
class MyClass(object):
    def download(self):
        print cim 
```

运行时显示的`cim`是`None`。该模块从未直接分配给`None`该模块中的任何位置。

任何想法如何发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T20:54:54.807

当您自己评论时-可能某些代码将 None 归因于模块本身的“cim”名称-检查此问题的方法是，您的大型模块是否将对其他模块设置为“只读”-我认为Python 允许这样做——

（20 分钟。黑客）——

在这里——只要把这个片段放在一个“protect_module.py”文件中，导入它，然后在你的模块末尾调用“ProtectdedModule()”，其中名称“cim”正在消失——它应该给你罪魁祸首：

```
"""
Protects a Module against naive monkey patching  -
may be usefull for debugging large projects where global
variables change without notice.

Just call the "ProtectedModule"  class, with no parameters from the end of 
the module definition you want to protect, and subsequent assignments to it
should fail.

"""

from types import ModuleType
from inspect import currentframe, getmodule
import sys

class ProtectedModule(ModuleType):
    def __init__(self, module=None):
        if module is None:
            module = getmodule(currentframe(1))
        ModuleType.__init__(self, module.__name__, module.__doc__)
        self.__dict__.update(module.__dict__)
        sys.modules[self.__name__] = self

    def __setattr__(self, attr, value):
        frame = currentframe(1)
        raise ValueError("Attempt to monkey patch module %s from %s, line %d" % 
            (self.__name__, frame.f_code.co_filename, frame.f_lineno))        

if __name__ == "__main__":
    from xml.etree import ElementTree as ET
    ET = ProtectedModule(ET)
    print dir(ET)
    ET.bla = 10
    print ET.bla 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-22T07:34:27.030

就我而言，这与线程怪癖有关：[https ://docs.python.org/2/library/threading.html#importing-in-threaded-code](https://docs.python.org/2/library/threading.html#importing-in-threaded-code)

# javascript - morris.js 水平条形图

> ID：13274917
> 
> 赞同：3
> 
> 时间：2012-11-07T17:25:14.993
> 
> 标签：javascript, jquery, morris.js

是否可以使用 morris.js 添加水平条形图？

[http://jsbin.com/uzosiq/2/embed?javascript,live](http://jsbin.com/uzosiq/2/embed?javascript,live)

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-08-30T12:50:54.273

如果您使用来自[https://github.com/JelteF/morris.js](https://github.com/JelteF/morris.js)的 morris， 则可以看到水平图。

[问题＃ 455](https://github.com/morrisjs/morris.js/pull/455)中给出的工作示例是 - [http://jsbin.com/pucadowa/8/edit?js,output](http://jsbin.com/pucadowa/8/edit?js,output)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-18T23:58:23.747

实际上有，但是必须编写很多代码检查这个 [在此处输入链接描述](http://jsbin.com/pucadowa/8/edit?html,css,js,output)

```
/*
 * Play with this code and it'll update in the panel opposite.
 *
 * Why not try some of the options above?
 */
/* @license
morris.js v0.5.0
Copyright 2014 Olly Smith All rights reserved.
Licensed under the BSD-2-Clause License.
*/
/* @license
morris.js v0.5.1
Copyright 2014 Olly Smith All rights reserved.
Licensed under the BSD-2-Clause License.
*/
(function(){var a,b,c,d,e=[].slice,f=function(a,b){return function(){return .......}).call(this);

Morris.Bar({
  element: 'bar-example',
  data: [
    { y: '2006', a: 100, b: 90 },
    { y: '2007', a: 75,  b: 65 },
    { y: '2008', a: 50,  b: 40 },
    { y: '2009', a: 75,  b: 65 },
    { y: '2010', a: 50,  b: 40 },
    { y: '2011', a: 75,  b: 65 },
    { y: '2012', a: 100, b: 90 }
  ],
  xkey: 'y',
  ykeys: ['a', 'b'],
  labels: ['Series A', 'Series B'],
  horizontal: true,
  stacked: true
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T17:59:22.550

快速[浏览 morris.js](http://www.oesmith.co.uk/morris.js/)网站显示没有证据表明支持水平条形图。

谷歌搜索“horizo​​ntal bar charts javascript”显示了许多可能的候选人，包括这个：[http ://www.rgraph.net/examples/hbar.html](http://www.rgraph.net/examples/hbar.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T18:05:49.693

我不这么认为，但你可以试试

> [http://www.jqplot.com/tests/bar-charts.php](http://www.jqplot.com/tests/bar-charts.php)

或者

> [http://www.jscharts.com](http://www.jscharts.com)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-05T19:27:57.037

如果有人正在寻找 morris 的更新版本，请查看原始[morrisjs 版本 6的这个分叉版本](https://github.com/pierresh/morris.js)

另外，它好多了，而且更新了！

# jquery - C# MVC 在 url (Jquery Mobile) 中返回哈希值

> ID：13274925
> 
> 赞同：0
> 
> 时间：2012-11-07T17:25:35.767
> 
> 标签：jquery, mobile, hash

我正在使用 jquery 手机。

页面从 jquery 移动页面提交到特定的操作方法。

```
<div data-role='page'> 
```

我希望 jquery mobile 在 POST 返回时显示特定页面。

```
<div data-role='page' id='errorPage'>
</div> 
```

如何在操作方法中返回视图并包含 url 的哈希部分

```
http://url?param=0#errorPage 
```

我想在响应网址中包含#errorPage。

这甚至可以在 POST 中实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:32:55.697

您可以在使用时附加片段`Redirect()`，试试这个：

```
return Redirect("~/Controller/Action/#errorPage"); 
```

如果你想维护你的路由，这样你就没有任何硬编码的字符串，你也可以这样做：

```
return Redirect(Url.RouteUrl(new { controller = "Controller", action = "Action"}) + "#errorPage"); 
```

# java - Java替换括号

> ID：13274930
> 
> 赞同：-3
> 
> 时间：2012-11-07T17:26:07.987
> 
> 标签：java, regex

如何使用 replaceAll() 方法替换括号？例如，如果我有字符串`"[][]teststring]]]]"`，我想使用 replaceAll() 将其减少为“teststring”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T17:27:20.693

假设您只想摆脱方括号：

```
String output = "[][]teststring]]]]".replaceAll("[\\[\\]]", ""); 
```

我还建议您查看[正则表达式文档](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#sum)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:29:39.230

```
return yourWord.replaceAll("\\[","").replaceAll("\\]","") 
```

[JavaDocs](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)

# list - 结构中的球拍列表

> ID：13274933
> 
> 赞同：3
> 
> 时间：2012-11-07T17:26:12.473
> 
> 标签：list, struct, scheme, racket

我刚开始用 Racket 编程，现在我遇到了以下问题。我有一个带有列表的结构，我必须将列表中的所有价格加起来。

```
(define-struct item (name category price))
(define some-items
(list
   (make-item "Book1" 'Book 40.97)
   (make-item "Book2" 'Book 5.99)
   (make-item "Book3" 'Book 20.60)
   (make-item "Item" 'KitchenAccessory 2669.90))) 
```

我知道我可以用：`(item-price (first some-items))`或返回价格`(item-price (car some-items))`。

问题是，我不知道如何将所有商品的价格加起来。

* * *

对Óscar López的回答：我可能没有正确填写空白，但是当我按下开始时，Racket将代码标记为黑色并且不返回任何内容。

```
 (define (add-prices items)
  (if (null? items)           
     0                   
      (+ (first items)                 
         (add-prices (rest items))))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:38:51.527

简短的回答：使用递归遍历列表。这看起来像家庭作业，所以我会给你一些提示；填空：

```
(define (add-prices items)
  (if (null? items)            ; if the list of items is empty
      <???>                    ; what's the price of an empty list?
      (+ <???>                 ; else add the price of the first item (*)
         (add-prices <???>)))) ; with the prices of the rest of the list 
```

(*) 请注意，您*已经*知道如何编写这部分，只需使用适当的程序获取列表中第一项的价格以获取值！

有很多方法可以解决这个问题。我建议的是遍历列表的标准方法，对每个元素进行操作并递归组合结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T02:31:46.237

使用 foldl 和地图：

```
(foldl + 0
       (map 
         (lambda (it)
           (item-price it))
             some-items)) 
```

# c# - 在gridview中添加新行时绑定下拉列表

> ID：13274934
> 
> 赞同：0
> 
> 时间：2012-11-07T17:26:13.353
> 
> 标签：c#, asp.net, gridview

我在gridview中有一个下拉菜单和一些文本框，我从DB值绑定DDL，我必须添加一个具有相同DDL和文本框的新行，但是当创建新行时如何绑定DDL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:48:11.157

`GridView`您可以在页脚中添加新行。在`RowDataBound`活动期间您可以找到 DDL 并绑定数据，

```
protected void gv1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.Footer)
    {
        DropDownList ddlName= (DropDownList)e.Row.FindControl("dlstName");
        // You can bind data to ddlName
    }
} 
```

# c# - 表单的关键事件丢失

> ID：13274936
> 
> 赞同：2
> 
> 时间：2012-11-07T17:26:23.783
> 
> 标签：c#, .net, winforms, keyevent

我的应用程序中有一个错误，我不知道如何攻击。基本上，关键事件会在一段时间后“消失”。我已将事件处理程序添加到写入控制台的 KeyDown、KeyPressed 和 KeyUp（用于表单及其文本框之一）。以下是正确的顺序：

```
control_PreviewKeyDown
ShellForm_KeyDown
control_KeyDown
ShellForm_KeyPress
control_KeyPress
ShellForm_KeyUp
control_KeyUp 
```

在失败状态（我无法始终如一地重现），我在按键时收到这些事件（TextBox 有焦点）：

```
ShellForm_KeyUp
control_KeyUp 
```

Form.KeyPreview 是真的。

表单中的所有文本框都是一样的；它们没有被禁用，也没有设置为只读，但不再可能写入文本。

问题是，我真的不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:56:53.567

从拦截事件流开始`Application.AddMessageFilter(...)`。[你可以在这里](https://stackoverflow.com/questions/6078366/c-sharp-system-windows-forms-keys-how-to-keep-application-hotkeys-in-one-pla)找到一些想法。

# github - GitHub Wiki markdown 编辑：如何避免替换“\033”？

> ID：13274939
> 
> 赞同：0
> 
> 时间：2012-11-07T17:26:44.630
> 
> 标签：github, markdown, wiki

我正在使用 Markdown 编辑模式在 GitHub 上编辑 Wiki 页面，并尝试从 shell 脚本中插入一段代码，如下所示：

```
```
if [ "$color_prompt" = yes ]; then
    PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ '
else
    PS1='${debian_chroot:+($debian_chroot)}\u@\h:\w\$ '
fi
``` 
```

但是，该块最终看起来像这样：

```
if [ "$color_prompt" = yes ]; then
    PS1='${debian_chroot:+($debian_chroot)}\[SAME-43-CHAR-SEQUENCE[01;32m\]\u@\h\[SAME-43-CHAR-SEQUENCE[00m\]:\[SAME-43-CHAR-SEQUENCE[01;34m\]\w\[SAME-43-CHAR-SEQUENCE[00m\]\$ '
else
    PS1='${debian_chroot:+($debian_chroot)}\u@\h:\w\$ '
fi 
```

所以它看起来像是将 char 序列解释`\033`为某种`SAME-43-CHAR-SEQUENCE`看起来像某种 UUID 的代码。我怎样才能避免这种情况？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:56:17.237

用另一个斜线转义斜线似乎可行。

所以，`\033`改为`\\033`

```
if [ "$color_prompt" = yes ]; then
    PS1='${debian_chroot:+($debian_chroot)}\[\\033[01;32m\]\u@\h\[\\033[00m\]:\[\\033[01;34m\]\w\[\\033[00m\]\$ '
else
    PS1='${debian_chroot:+($debian_chroot)}\u@\h:\w\$ '
fi 
```

# jquery - 默认情况下 Bigtext 的问题

> ID：13274943
> 
> 赞同：0
> 
> 时间：2012-11-07T17:27:14.230
> 
> 标签：jquery, css, jquery-plugins

我试图让 Bigtext JQuery 插件以预期的方式运行。如果我们以[这个小提琴](http://jsfiddle.net/twashing/gpyj4/2/)为例，我希望文本和标题的字体大小会根据容器中的文本量进行调整。

我尝试了[这个 SO post中建议的](https://stackoverflow.com/questions/10504243/jquery-bigtext-plugin-not-working-when-parent-class-is-identified-in-css)***“.theme”***类解决方案。但这没有用。我还需要做些什么才能让这个库正常工作吗？

```
.SO {
  won't let me post without some inlined code
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:32:11.493

我找到了解决这个问题的方法。事实证明，该库会动态地将`<style>`元素添加到文档的头部。我发现这仅适用于最简单的情况。

计算字体大小等的主要工作是在一个名为**calculateSizes**的函数中完成的。我刚刚结束了该函数，并直接调用它。从那里，我只是拿了计算出来的字体大小并自己应用它们。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T20:15:31.163

Bigtext 不能对页面中的多个元素起作用。我正在开发一个替代版本来解决这个问题。

# php - 重新加载数组而不重新加载页面

> ID：13274948
> 
> 赞同：0
> 
> 时间：2012-11-07T17:27:33.127
> 
> 标签：php, javascript, ajax, instagram

嘿嘿我有个小问题......

我正在制作一个使用来自 instagram 的图片作为背景的页面。要显示图片，我使用 jquery 插件[Supersized](http://www.buildinternet.com/project/supersized/)。

我使用的图片来自一个主题标签，所以我希望页面重新加载数组，超大的从中获取图片，因此它与最新图片无缝更新。

只需每 5 分钟重新加载一次数组就足够了，幻灯片会以这种方式工作还是我应该采用另一种方式？

可以给我一个关于如何做到这一点的小例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:36:44.320

然后我要做的是创建一个 imageQueue 数组，以及一个 currentImage 引用，通过队列中的内容轮换当前图像。当需要更新图像队列数组时，我会在轮换时间关闭。这意味着如果您的图像每 10 秒旋转一次，那么每 300 秒上传一次队列是没有意义的（5 分钟，每 30 幅图像您最终会出现竞争条件。）。相反，我会每 307 秒更新一次队列（素数）

这应该可以让您顺利过渡并实现目标。

# sql - 列出所有不存在但在视图 sql server 中使用的表

> ID：13274950
> 
> 赞同：2
> 
> 时间：2012-11-07T17:27:41.270
> 
> 标签：sql, sql-server, database, sql-server-2005

我似乎无法获得视图试图使用的所有表名。

目前，我正在使用`INFORMATION_SCHEMA.VIEW_COLUMN_USAGE`来查找使用了哪些表。但是，它只查找当前存在的表。我想知道该视图是否正在尝试使用不存在的表。

`View_Column_Usage`只会找到视图中使用的列。您可以检查这些列是否在任何当前表列中，以查找哪些列未使用，但您无法找到哪些表未使用。

有谁知道我可以用来查找视图中使用哪些表但不存在的表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:46:55.340

据我所知，没有这样的东西可以存储不存在的对象的信息，仅仅是因为它们不存在！我相信我的建议不是确切的解决方案，但我认为它会帮助您完成整个过程：

```
Select  *
    From    INFORMATION_SCHEMA.VIEWS
    Left    Outer   Join
        sys.objects
    On  objects.type        =   'U'
    And views.view_definition   Like    '%' +   objects.name    +   '%'
    Where   objects.name        Is  Null 
```

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:21:51.187

我在这里找到的脚本似乎可以找到损坏的视图。

[http://www.sqlservercentral.com/Forums/Topic785213-146-1.aspx#bm785697](http://www.sqlservercentral.com/Forums/Topic785213-146-1.aspx#bm785697)

# java - 更改数组列表时，带有 ArrayList 和 ListView 的 Android 数组适配器不会更新

> ID：13274952
> 
> 赞同：12
> 
> 时间：2012-11-07T17:27:46.897
> 
> 标签：java, android, android-activity, android-listview, android-arrayadapter

我有一个 android 应用程序，其屏幕由一个 ListView 组成，我用它来显示设备列表。这些设备被保存在一个阵列中。

我正在尝试使用 ArrayAdapter 在列表中的屏幕上显示数组中的内容。

它在我第一次加载**SetupActivity**类时工作，但是，可以在**addDevice()**方法中添加新设备，这意味着保存设备的数组已更新。

我正在使用**notifyDataSetChanged()**应该更新列表，但它似乎不起作用。

```
public class SetupActivity extends Activity
{   
    private ArrayList<Device> deviceList;

    private ArrayAdapter<Device> arrayAdapter;

    private ListView listView;

    private DevicesAdapter devicesAdapter;

    private Context context;

    public void onCreate(Bundle savedInstanceState)  //Method run when the activity is created
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.setup);  //Set the layout

        context = getApplicationContext();  //Get the screen

        listView = (ListView)findViewById(R.id.listView);

        deviceList = new ArrayList<Device>();

        deviceList = populateDeviceList();  //Get all the devices into the list

        arrayAdapter = new ArrayAdapter<Device>(this, android.R.layout.simple_list_item_1, deviceList);

        listView.setAdapter(arrayAdapter);  
    }

    protected void addDevice()  //Add device Method (Simplified)
    {
        deviceList = createNewDeviceList();    //Add device to the list and returns an updated list

        arrayAdapter.notifyDataSetChanged();    //Update the list
}
} 
```

谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-07T18:02:26.333

对于 ArrayAdapter，`notifyDataSetChanged`只有在适配器上使用 、 、 和 函数`add`时才`insert`有效`remove`。`clear`

1.  使用 clear 清除适配器 -`arrayAdapter.clear()`
2.  使用 Adapter.addAll 并添加新形成的列表 -`arrayAdapter.addAll(deviceList)`
3.  调用 notifyDataSetChanged

备择方案：

1.  形成新的设备列表后重复此步骤 - 但这是多余的

    ```
    arrayAdapter = new ArrayAdapter<Device>(this, android.R.layout.simple_list_item_1, deviceList); 
    ```

2.  创建您自己的从 BaseAdapter 和 ListAdapter 派生的类，从而为您提供更大的灵活性。这是最推荐的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-09-05T06:34:59.113

虽然接受的答案解决了问题，但解释为什么不正确，因为这是一个重要的概念，我想我会试图澄清。

Slartibartfast`notifyDataSetChanged()`仅在适配器上调用 、 、 或 时有效的解释是不 `add`正确`insert`的`remove`。`clear`

该`setNotifyOnChange()`方法的解释是正确的，如果设置为 true （默认情况下），将`notifyDataSetChanged()`在这四个操作中的任何一个发生时自动调用。

我认为海报混淆了这两种方法。 `notifyDatasetChanged()`本身没有这些限制。它只是告诉适配器它正在查看的列表已更改，而列表的更改实际上是如何发生的并不重要。

虽然我看不到您的源代码`createNewDeviceList()`，但我猜您的问题来自这样一个事实，即您的适配器引用了您创建的原始列表，然后您在 中创建了一个新列表`createNewDeviceList()`，并且由于适配器仍然指向旧的列表它看不到变化。

slartibartfast 提到的解决方案有效，因为它清除了适配器并专门将更新的列表添加到该适配器。因此，您不会遇到适配器指向错误位置的问题。

希望这对某人有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:30:57.857

您的方法 addDevice 导致无限循环。不要像您在这里所做的那样从自身调用方法：

```
deviceList = addDevice(); 
```

# tfs - Team Foundation Server：移动根级项目

> ID：13274953
> 
> 赞同：3
> 
> 时间：2012-11-07T17:27:51.937
> 
> 标签：tfs

我正在尝试清理我们的工作站点 Team Foundation Server 2010 默认集合。

不幸的是，我们最初在 defaultcollection 的根级别设置了一大堆项目。

现在我们想通过将一堆项目移动到根级存档目录来清理它，同时保留项目的历史记录。

事实证明这是极其困难的。我已经在网上阅读了很多东西并进行了一些试验，但我仍然遇到问题。

部分问题是根级别的项目似乎对您通常可以在项目上执行的一堆“正常”操作“免疫”，例如移动命令（它是灰色的）。

如果我尝试使用命令行执行这样的移动：

```
tf.exe move $/TestProj $/Archive/TestProj/ 
```

我得到：

```
TF10169: Unsupported pending change attempted on team project folder $/Test. Use the Project Creation Wizard in Team Explorer to create a project or the Team Project deletion tool to delete one. 
```

所以我想我会像这样移动内容：

```
tf.exe move $/TestProj/* $/Archive/TestProj/ 
```

那行得通，并且保留了历史记录，但是当我像这样删除原始项目时：

```
TFSDeleteProject.exe /collection:MYSERVER\DefaultCollection TestProj /force 
```

历史丢了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T18:48:20.383

这些不是“根级项目”。这些是“团队项目”。团队项目不仅仅是源代码控制，因此，不，您不能像使用较低级别的文件夹那样对“团队项目文件夹”执行相同的操作。

TFS 不像 SourceSafe 那样使用术语“项目”。在 SS 中，“项目”的含义与“文件夹”几乎相同。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T13:39:02.120

您可以尝试 /keephistory 选项...据我了解，这应该可以让您做您想做的事情。

# objective-c - 更改对不同对象的引用而不更改最初引用的对象？

> ID：13274955
> 
> 赞同：0
> 
> 时间：2012-11-07T17:27:57.360
> 
> 标签：objective-c, xcode, macos, cocoa

我目前正在尝试在 NSXMLParser 的帮助下编写一个 XML 解析器。它应该生成一个 NSMutableDictionaries 数组。

将嵌套标签制作成嵌套字典真的让我的大脑很难受。我可能还会注意到我对这门语言非常陌生，这对我来说有点像练习。

# 我的实际问题是：

假设我有一个名为`xmlArray`. 这个数组最终应该包含所有元素，包括 xml 文件的子元素——作为嵌套数组和字典的数组。

现在我可能有另一个变量`currentArray`，它引用了`xmlArray`.

这可能看起来像这样：

```
currentArray = [xmlArray objectAtIndex: 3]; 
```

现在我可能想引用`xmlArray`using的不同部分`currentArray`。

那么如果我这样做会发生什么：

```
currentArray = [xmlArray objectAtIndex: 5]; 
```

这不等于说：

```
[xmlArray objectAtIndex: 3] = [xmlArray objectAtIndex: 5]; 
```

**我是在切换对不同对象的引用 ( `[xmlArray objectAtIndex: 5]`) 还是在更改最初引用的对象 ( `[xmlArray objectAtIndex: 3]`)？**

**如何在不更改最初引用的对象的情况下更改对不同对象的引用？**

我知道这可能是一个非常nooby的问题，我仍然希望有人可能想要帮助。：） 谢谢！！！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:58:18.943

这不是变量的工作方式。

## 这是怎么回事？

`NSMutableArray* currentArray`是一个变量，它将**保存**一个*指向*我们正在处理的对象的指针。请参阅下面如何使用它的过程：

这将获取索引 3 处对象的指针地址，并将其存储在当前数组中：

```
currentArray = [xmlArray objectAtIndex: 3]; 
```

这将用另一个指针替换保存的值`currentArray`（它只是一个*指针*），这次指向索引 5 处的对象：

```
currentArray = [xmlArray objectAtIndex: 5]; 
```

内部指针的变化对**数组本身的内容没有**`currentArray`影响。

 **这也不会做任何事情，因为它不会重置数组内的任何内容来更改其索引处的指针；它只是从数组中读取，而不是写入它。

```
[xmlArray objectAtIndex: 3] = [xmlArray objectAtIndex: 5]; 
```

## 至于你的问题...

> 我是在切换对不同对象的引用（[xmlArray objectAtIndex: 5]）还是在更改最初引用的对象（[xmlArray objectAtIndex: 3]）？

您正在切换对对象的引用，而不是更改初始对象。我强烈建议您阅读[《Objective-C 简介](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html)》以及《C 风格编程简介》，因为变量管理是相当基础的东西。**

# wpf - wpf自定义按钮最佳方法

> ID：13274956
> 
> 赞同：7
> 
> 时间：2012-11-07T17:27:59.580
> 
> 标签：wpf, button, user-controls

我想`Button`在 WPF 中创建一个自定义。当然，该按钮将是一个 UserControl，它将包含许多视觉元素（如描边、高光、阴影、发光、图像等）。

问题是，如果我使用 DependencyProperties 并在 XAML 中绑定它们，我将无法在 DesignTime 看到结果（我尝试实现 IsInDesignMode 方法，但由于某种原因，我无法理解我的 VS 只是崩溃时我在 UserControls 上使用此方法，否则效果很好），这绝对不好。

所以我正在考虑根本不使用 XAML，并在后面的代码中完成我的所有工作。

你们有什么感想？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T18:57:44.880

像您一样，当我开始并想了解如何/如何使用模板以及使用模板时，需要进行大量的试验和错误。希望我的研究和一些循序渐进的组件可以帮助您根据自己的喜好进行定制，并了解事物的来源。

首先，在尝试了解新的“模板样式”如何工作时，我为我的 Any Manipulating Styles 创建了一个简单的独立 WPF 应用程序（“AMS”）。这样，我不必永远等待，看看在我的其他主要项目和主题的试验/错误期间会是什么样子。

由此，我创建了一个名为“TestingStyles”的新 WPF 窗口。保存/编译，运行，没问题。

现在，在 TestingStyles 窗口的“查看代码”中，我已经为自定义类添加了我正在玩的任何内容......为了帮助逐步展示，我创建了以下内容：

```
namespace AMS
{
    /// <summary>
    /// Interaction logic for TestingStyles.xaml
    /// </summary>
    public partial class TestingStyles : Window
    {
        public TestingStyles()
        {
            InitializeComponent();
        }
    }

    // Enumerator for a custom property sample...
    public enum HowToShowStatus
    {
        ShowNothing,
        ShowImage1
    }

    public class YourCustomButtonClass : Button
    {
        public YourCustomButtonClass()
        {
            // auto-register any "click" will call our own custom "click" handler
            // which will change the status...  This could also be done to simplify
            // by only changing visibility, but shows how you could apply via other
            // custom properties too.
            Click += MyCustomClick;
        }

        protected void MyCustomClick(object sender, RoutedEventArgs e)
        {
            if( this.ShowStatus == HowToShowStatus.ShowImage1 )
                this.ShowStatus = HowToShowStatus.ShowNothing;
            else
                this.ShowStatus = HowToShowStatus.ShowImage1;
        }

        public static readonly DependencyProperty ShowStatusProperty =
              DependencyProperty.Register("ShowStatus", typeof(HowToShowStatus),
              typeof(YourCustomButtonClass), new UIPropertyMetadata(HowToShowStatus.ShowNothing));

        public HowToShowStatus ShowStatus
        {
            get { return (HowToShowStatus)GetValue(ShowStatusProperty); }
            set { SetValue(ShowStatusProperty, value); }
        }
    }

} 
```

正如你所看到的，自定义的“按钮”类，我在默认的 TestingStyles 之外的底部：窗口声明......所以它都在同一个“项目”中。

在这个 XAML 示例中，我引用了一个“TaskComplete.png”图形文件（它应该仅用于示例目的，直接添加到项目中......即使是用于示例目的的简单笑脸）。因此，创建这样一个简单的 .png 文件……甚至使用 Microsoft Paint 并用眼睛和微笑画一个圆圈。在根目录下保存到项目中（稍后进入路径，先让它工作）。

保存并重新编译项目，以便在您开始定义 XAML 模板时项目公开知道新的“类”（按钮）是什么。

现在，回到 TestingStyles 设计器并将其放入分屏中，这样您就可以同时看到设计器和 XAML 标记......并且只需替换为以下内容......

```
<Window x:Class="AMS.TestingStyles"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:my="clr-namespace:AMS"
        Title="TestingStyles" Height="300" Width="300" >

    <Window.Resources>
        <!-- Build a "Style" based on an anticpated target control type of YourCustomButtonClass.
            per the "my:" reference, the "my" is an "alias" to the xmlsn:my in the declaration above,
            so the XAML knows which library to find such control.  In this case, I've included within
            the actual forms's 'View Code' as a class at the bottom.  

            As soon as you assign an "x:Key" reference, its like its telling XAML to make this a PRIVATE
            style so you don't reference it explicitly (yet)
        -->
        <Style TargetType="my:YourCustomButtonClass" x:Key="keyYourCustomButtonClass">
            <!-- put whatever normal "settings" you want for your common look / feel, color -->
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="0,0,1,1"/>
            <Setter Property="Width" Value="100" />
            <Setter Property="Height" Value="30" />

            <!-- Now, for the template of the button.  Things can get really crazy here
              as you are now defining what you want the "button" to look like, borders, 
              content, etc. In this case, I have two borders to give the raise/sunken effect 
              of a button and it has its own colors -->
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button" >
                        <!-- The x:Name references used during triggers to know what it is "applying" changes to -->
                        <Border x:Name="BorderTopLeft"
                                BorderBrush="Gainsboro" 
                                BorderThickness="0,0,1.5,1.5">

                            <Border x:Name="BorderBottomRight"
                                BorderBrush="Gray" 
                                BorderThickness="1.5,1.5,0,0">
                                <!-- Now, what control  type do you want the button to have... 
                                    Ex: You could use a grid (as I have here), stack panels, etc -->
                                <Grid Background="LightBlue" >
                                    <!-- I'm defining as two columns wide, one row tall.  
                                        First column fixed width 20 pixels example for an image -->
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="20px" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                    </Grid.RowDefinitions>

                                    <!-- Now, create the controls I want available within my "template".
                                        when assigned with "x:Name", thats like a property withing the template
                                        that triggers can associate and update to. -->
                                    <Image x:Name="btnImage" 
                                        Grid.Row="0" Grid.Column="0"
                                        Stretch="None"
                                        VerticalAlignment="Stretch" HorizontalAlignment="Stretch" 
                                        Source="TaskComplete.png"
                                        Visibility="Visible" />

                                    <!-- and also have the text for the button to show the user -->
                                    <TextBlock x:Name="txtNewBtn" 
                                        Grid.Row="0" Grid.Column="1"
                                        Padding="5"
                                        HorizontalAlignment="Left"
                                        VerticalAlignment="Center"
                                    Text="{TemplateBinding Content}" />
                                    <!-- The "{TemplateBinding Content}" means to set the text based on 
                                        the "CONTENT" property of the original button and not use a fixed value -->
                                </Grid>
                            </Border>
                        </Border>
                        <!-- Now, some triggers for the button itself... some can be property based, others data-based -->
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsPressed" Value="true">
                                <!-- What properties do we want to change when user CLICKS
                                    on the button, give the "EFFECT" of click down/up by
                                    changing the "Margin" and border thicknesses...  -->
                                <Setter Property="Margin" Value="1,1,0,0"/>
                                <!-- Notice the "TargetName" below referring to the x:Name I've applied in template above 
                                    so when the user clicks on the button, it changes the border thickness properties of
                                    each to give the effect of a normal button clicking.  I'm widening one border, shrinking other -->
                                <Setter TargetName="BorderTopLeft" Property="BorderThickness" Value="2.5,2.5,0,0"/>
                                <Setter TargetName="BorderBottomRight" Property="BorderThickness" Value="0,0,.5,.5"/>
                            </Trigger>

                            <!-- Here, I have a custome property on the class for "ShowStatus".  The binding is to itself
                                regardless of how many instances of this type of "button" are on a given form 
                                First trigger happens when the value is changed to "ShowNothing", but can also change 
                                when set to "ShowImage1" or other as you may need applicable
                            -->
                            <DataTrigger Binding="{Binding Path=ShowStatus, RelativeSource={RelativeSource Self}}" Value="ShowNothing">
                                <Setter TargetName="btnImage" Property="Visibility" Value="Hidden"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Path=ShowStatus, RelativeSource={RelativeSource Self}}" Value="ShowImage1">
                                <Setter TargetName="btnImage" Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- NOW, we can expose any instance of "YourCustomButtonClass" button to use the style based on definition above 
            any instance of such YourCustomButtonClass will automatically reflect this style / look -->
        <Style TargetType="my:YourCustomButtonClass" BasedOn="{StaticResource keyYourCustomButtonClass}" />

    </Window.Resources>

    <Grid>
        <my:YourCustomButtonClass Content="Button" VerticalAlignment="Top" ShowStatus="ShowImage1" />
    </Grid>
</Window> 
```

这应该为您定义自己的模板以及元素如何开始绑定在一起提供了一个很好的起点。运行此示例后，当您更改模板的任何颜色、边距、填充等时，您将立即看到该组件对控件的视觉影响。

玩得开心，不要把头撞到墙上太多……

顺便说一句，一旦这个工作正常，那么你可以在

```
<Window.Resources>
</Window.Resources> 
```

并将其放入 Windows 资源字典中，使其对您的项目具有全局性，而不仅仅是此测试表单。

# javascript - 检查最后一个函数的时间

> ID：13274962
> 
> 赞同：-3
> 
> 时间：2012-11-07T17:28:23.830
> 
> 标签：javascript, function

如果我调用一个函数 2 或 3 次，如下所示：

```
somefunction();
somefunction(); 
```

我怎么知道最后一次调用该函数是什么时候？
我问这个是因为我希望最后一个函数再做一件事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T17:31:14.203

传递一个参数，确定函数是否应该做“另一件事”

```
somefunction(false);
somefunction(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:34:31.173

您可以在调用函数时设置超时，然后一旦您退出第一个函数，将控制权返回给浏览器，代码就会被调用：

```
var timer = null;
function somefunction() {
  // do something
  if (timer == null) {
    timer = window.setTimeout(function(){
      // do one last thing
    }, 0);
  }
} 
```

演示：http: [//jsfiddle.net/Guffa/Fa5j3/](http://jsfiddle.net/Guffa/Fa5j3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:36:07.490

**你不能知道这一点。**

如果你知道它被调用的频率，你可以倒数一个变量。

如果您不知道它被调用的频率，您可以启动超时并调用特殊函数。如果您再次调用 someFunction，您将取消旧的超时并开始新的超时。

# .net - 如何在不将应用程序池标识设置为本地系统的情况下从网站重新启动应用程序池？

> ID：13274964
> 
> 赞同：3
> 
> 时间：2012-11-07T17:28:29.817
> 
> 标签：.net, iis-7, .net-3.5, application-pool, applicationpoolidentity

我在 .Net 中有一个应用程序，它为其他应用程序执行各种管理/配置。我需要能够停止和启动应用程序池。我已经实现了这一点，但前提是我将应用程序池作为本地系统运行（这通常被认为是一个坏主意）。

最初我使用 Process.Start 启动 appcmd.exe（使用适当的 ProcessStartInfo 对象），但这最终导致我的退出代码为 -1073741502，进一步的研究表明我需要使用 windows SDK 进行调试，因为它与程序集未加载，所以我在命名空间中发现了一个更简单的解决方案`Microsoft.Web.Administration`：

我使用下面的代码，但它似乎要求运行它的 AppPool 具有本地系统的身份（否则我会得到`System.UnauthorizedAccessException`） - 有没有办法使用特权较低的帐户启动/停止（我更喜欢使用应用程序身份） - 虽然暂时提升权限也是可以接受的。

```
 Dim serverManager As New ServerManager()
    Dim applicationPoolCollection As ApplicationPoolCollection = serverManager.ApplicationPools

    For Each applicationPool As ApplicationPool In applicationPoolCollection

        If applicationPool.Name = appPoolName Then
            applicationPool.Stop()
            applicationPool.Start()
        End If

    Next 
```

我已将自定义帐户设置为身份，但我无法确定该用户需要的最小 ACL。作为测试，我将用户添加到本地管理员组，但仍然得到`System.UnauthorizedAccessException`- 这表明我需要为用户配置特定权限，但我不确定这是什么或如何做。任何人都可以帮忙吗？

[问题也在这里解释](http://forums.iis.net/t/1154515.aspx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T16:18:57.380

您可以这样做的唯一方法是，如果用于运行代码的帐户（使用 Microsoft.Web.Administration）具有在 IIS 中执行“运行时操作”的正确权限，并且默认情况下仅包括管理员和 SYSTEM，并且正如您正确指出的那样，通常从 Web 公开该级别的权限是一个坏主意。

相反，您可能应该做的是创建一个应用程序池或其他方式以高权限运行，但确保只能在本地访问（例如使用 IP 和域限制）并使用额外级别的授权检查（例如例如只允许从应用程序调用），并且被限制为运行尽可能少的代码和所需的最小表面，例如仅回收属于用户的池等。这样，如果您的 Web 应用程序受到损害损害将受到更多限制。

现在，出于好奇……以下内容是“**不受支持**的”，因此请不要使用它，而只是为了提供信息而提供它。
我们在**ServerManager**中用于读取配置的 API 称为**AHADMIN**，您可以“破解足以读取配置”，例如，如果您的 ACL 如下：

```
Cd C:\Windows\System32\inetsrv\config  
icacls . /grant yourUser:(R)  
icacls redirection.config /grant yourUser:(R)  
icacls applicationHost.config /grant yourUser:(R) 
```

从那时起，您将能够与该用户一起读取配置。知道此时加密属性仍然无法读取，因为加密密钥也受到单独保护，您可能永远不应该更改那里的 ACL，但其他所有内容都将是可读的（除了运行时属性，如状态等）。您**永远不应该允许**对非特权帐户进行写访问，因为这很容易允许提升特权（例如，他们可以创建一个以 SYSTEM 身份运行的应用程序池并将其链接到现在可以以 SYSTEM 身份运行代码的随机目录）。

现在，回到运行时状态，为此我们使用我们称为**RSCA**（运行时状态和控制 API）的 API，并且它本身也受到保护，只能以 SYSTEM 或管理员身份运行，尽管您可能会找到一种方法破解它，改变它也是一个坏主意。但长话短说，这不受支持，您可能很容易导致系统出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:04:27.617

使用@CarlosAg 答案，以下解决方案有效：

1.  创建一个新用户并将其放入管理员组

2.  创建一个 Web 服务来运行重新启动代码，将其放入以您创建的用户身份运行的自己的应用程序池中（配置适当的应用程序池属性，例如队列长度等）

    一个。将以下代码放入您的 Web 方法（或 begin_reqest）中以防止它被外部调用（我认为在 IIS 中也有其他方法可以做到这一点，但这是我发现的最快的方法）

    湾。在您认为合适的情况下向 Web 服务代码添加额外的身份验证（我们有一个我可以使用的单点登录服务）。

3.  从在 ApplicationIdentity 下的应用程序池中运行的网站引用此服务

这行得通。

代码：

```
 If Not HttpContext.Current.Request.IsLocal Then
         Const msg As String = "Only local requests are allowed"
         log4net.LogManager.GetLogger(GetType(Global_asax)).Fatal(msg)
         Throw New Exception(msg)
     End If 
```

# xaml - 定期更新的动态磁贴 - 徽标不可见

> ID：13274970
> 
> 赞同：0
> 
> 时间：2012-11-07T17:28:52.370
> 
> 标签：xaml, windows-8, windows-runtime

我想定期更新动态磁贴。

```
var tileUpdater = TileUpdateManager.CreateTileUpdaterForApplication();
tileUpdater.StartPeriodicUpdate(new Uri("http://myurl/tile.xml"), PeriodicUpdateRecurrence.HalfHour); 
```

但我无法使左下角的小标志可见。

我还尝试在 xml 源中设置品牌属性。以下行启用了短应用名称。

```
<tile>
  <visual branding="name">
    <binding template="TileWideImageAndText02" >
      <image id="1" src="http://someurl/image.jpg" alt="Demo"/>
      <text id="1">line 1</text>
      <text id="2">line 2</text>
    </binding>
  </visual>
</tile> 
```

但是将品牌设置为“徽标”没有任何效果。

小标志当然是在manifast中设置的，并且图像具有“内容”的构建动作。

任何想法，为什么徽标没有显示在我的动态磁贴上？

干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:55:18.593

在磁贴通知 XML 中，将“logo”指定为[品牌](http://msdn.microsoft.com/en-us/library/windows/apps/br212854.aspx)属性的值。使用品牌属性，可以指定磁贴是否显示应用程序徽标、名称或什么都不显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T23:37:45.853

突然图标出现，没有任何变化。似乎是一个错误。

# wordpress - 我在 get_permalink(get_option(' here???') 中放了什么

> ID：13274971
> 
> 赞同：1
> 
> 时间：2012-11-07T17:28:53.507
> 
> 标签：wordpress

我正在尝试弄清楚 get_permalink(get_option('jr_dashboard_page_id') 中的选项值是什么我正在尝试遵循此约定，但无法在其来源中工作-仪表板是数据库中的后缀名，其余部分这意味着或它的工作原理我无法弄清楚......

任何帮助都会很棒..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:03:24.210

*Options API*存储键值对。例如，`add_option( 'key', 'value' );`可以使用。在这种情况下，`get_option( 'key' );`将返回`value`.

因此，在某些时候，您使用的插件或主题将 jr_dashboard_page_id 定义为某种东西。也许通过元框或类似的东西。这个问题中没有足够的信息来准确说明您需要什么“关键”。这就像说，我有一个关联数组 $array['key'] 我应该使用什么键？我们根本无法知道，因为我们不知道数组的外观，也不知道您期望什么样的值。

# android - 在 Android 上禁用 GPS 的警告

> ID：13274974
> 
> 赞同：3
> 
> 时间：2012-11-07T17:29:05.330
> 
> 标签：android, gps, warnings

在我的安卓应用中，用户可以关闭 GPS。

因为我有时需要 GPS，而且我还想要求用户再次打开 GPS。

但用户能够标记为不出现更多此警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:39:02.823

使用具有[onProviderDisabled方法的](http://developer.android.com/reference/android/location/LocationListener.html#onProviderDisabled%28java.lang.String%29)[LocationListener](http://developer.android.com/reference/android/location/LocationListener.html)。如果您已将位置提供程序设置为 GPS，则每次用户关闭 GPS 时都会调用此方法。

# objective-c - 如何将 Mac 彩色加载光标设置为 NSImageView？

> ID：13274975
> 
> 赞同：1
> 
> 时间：2012-11-07T17:29:04.417
> 
> 标签：objective-c, xcode, macos, cocoa, nscursor

我知道当鼠标进入 NSImageView 时如何设置 NSCursor，但我找不到设置这个特定光标的方法：
![在此处输入图像描述](../Images/cd017735e215be718d25c5c69699b1f3.png)

我该如何设置这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:14:44.783

旋转[等待光标](http://en.wikipedia.org/wiki/Spinning_pinwheel "旋转的死亡披萨")是一个 Mac OS X 系统光标，表示应用程序没有响应系统事件。这不是一件好事。看到此光标的有经验的用户会认为您的应用程序已挂起并强制退出它。

> 我该如何设置这个？

不要响应系统事件，系统会为您显示它... [\幽默]

# python - 以各种方式替换字符串中的字符

> ID：13274976
> 
> 赞同：4
> 
> 时间：2012-11-07T17:29:06.773
> 
> 标签：python

我正在寻找一个函数的帮助，该函数接受一个字符串，并以各种方式替换该字符串中的每个字符。我不太确定如何表达我的问题以使其有意义，因此我将向您展示它应该做什么。

```
stars('1')
returns ['*']

stars('12')
returns ['*1', '1*', '**']

stars('123')
returns ['*23', '1*3', '12*', '**3', '*2*', '**1', '***']

stars('1234')
returns ['*234', '1*34', '12*4', '123*', '**34', '*2*4', '*23*', '1**4', '1*3*', 
         '12**', '***4', '**3*', '*2**', '1***', '****'] 
```

这一切都是手工完成的，但即使我犯了一个错误，你也应该知道我现在在寻找什么。最后一个案例（所有 * 的）不是必需的，但我把它放在那里以确保问题被理解。

到目前为止，这是我想出的，但它并不完全奏效。

```
def stars(n):
    lst = []
    length = len(n)
    for j in xrange(0, length):
        p = list(n)
        for k in xrange(j, length):
            p[k] = '*'
            lst += [''.join(p)]
    return lst 
```

输出：

```
'1' returns ['*']
'12' returns ['*2', '**', '1*']
'123' returns ['*23', '**3', '***', '1*3', '1**', '12*']
'1234' returns ['*234', '**34', '***4', '****', '1*34', '1**4', '1***', '12*4', '12**', '123*'] 
```

任何帮助将不胜感激。如果可能的话，希望用 Python 回答这个问题，但如果您不了解 Python，那么伪代码或其他语言也是可以接受的。如果写得很清楚，我相信我可以自己将它转换成 Python。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T17:41:15.313

我认为 Python 中的规范方法是使用该`itertools`模块：

```
>>> from itertools import product, cycle
>>> s = 'abcde'
>>> [''.join(chars) for chars in product(*zip(s, cycle('*')))]
['abcde', 'abcd*', 'abc*e', 'abc**', 'ab*de', 'ab*d*', 'ab**e', 'ab***', 
 'a*cde', 'a*cd*', 'a*c*e', 'a*c**', 'a**de', 'a**d*', 'a***e', 'a****', 
 '*bcde', '*bcd*', '*bc*e', '*bc**', '*b*de', '*b*d*', '*b**e', '*b***',
 '**cde', '**cd*', '**c*e', '**c**', '***de', '***d*', '****e', '*****'] 
```

然后你可以只扔第一个没有任何星星，但这似乎有点神奇。

如果您不想使用内置的笛卡尔积函数，ISTM 还有另外两种方法：您可以使用递归，或者您可以利用您想要打开和关闭每颗星的事实，即二进制开关。这意味着对于`n`字母，您将有 2^n（-1，如果您删除无星号的情况）返回的可能性，并且是否在某处放置星号对应于是否设置了数字中的相应位（例如，对于“abc”，您将从 1 循环到 7（含），1 = 001 所以你会在最后一个地方放一颗星，7 = 111 所以你会在任何地方放一颗星，等等）

最后一个很容易实现，所以我把它留给你。:^)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:53:00.517

您可以将其视为查找和迭代原始字符串中所有字符子序列的问题。（对于每个子序列，将其中的字符替换为 '*'，其余部分不理会）。

对于给定的子序列，每个字符要么在其中，要么不在其中，因此对于 N 个字符的字符串，有 2^N 个子序列。可能最简单的迭代它们的方法是迭代从 0 到 (2^N)-1 的整数，并使用它们的二进制表示作为字符是否应该被替换的指示

对于 N=3，它看起来像这样：

```
0  000 abc
1  001 ab*
2  010 a*c
3  011 a**
4  100 *bc
5  101 *b*
6  110 **c
7  111 *** 
```

在 Python 中，你可以这样做：

```
def stars(input):
    l = len(input)
    for i in xrange(2**l):
        yield ''.join([('*' if i&(2**(l-pos-1)) else ch) for pos, ch in enumerate(input)]) 
```

试试看：

```
>>> print list(stars('abc'))
['abc', 'ab*', 'a*c', 'a**', '*bc', '*b*', '**c', '***'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T18:29:39.563

这是一种使用方法`combinations`：

```
from itertools import combinations
def stars(str):
    N,L = len(str), []
    for k in range(0,N+1):
        for com in combinations(range(N),k):
            S = list(str)
            for x in com: S[x] = '*'
            L.append(''.join(S))
    return L 
```

试试看：

```
>>> stars('abc')
['abc', '*bc', 'a*c', 'ab*', '**c', '*b*', 'a**', '***']
>>> stars('1234')
['1234', '*234', '1*34', '12*4', '123*', '**34', '*2*4', '*23*', '1**4', '1*3*', '12**', '***4', '**3*', '*2**', '1***', '****'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T17:33:08.160

或特定于 Python 请参阅此功能：[http ://docs.python.org/2/library/itertools.html#itertools.combinations](http://docs.python.org/2/library/itertools.html#itertools.combinations)

# .net - 如何加快 Umbraco 中的节点迭代？

> ID：13274981
> 
> 赞同：1
> 
> 时间：2012-11-07T17:29:27.937
> 
> 标签：.net, umbraco

我已经编写了一个网站搜索，它遍历某个文件夹下的所有节点，然后根据某些条件过滤掉节点。该网站本身用于搜索公寓。这是我用于构建集合的功能：

```
private static List<Apartment> GetApartmentsCollection()
        {
            List<Apartment> apartmentsCollection = new List<Apartment>();

            Document apartmentsContainer = new Document(Convert.ToInt32(ConfigurationManager.AppSettings["apartmentsContainerNodeId"]));

            if (apartmentsContainer.HasChildren)
            {
                Document[] buildings = apartmentsContainer.Children;
                foreach (Document building in buildings)
                {
                    if (building.Published)
                    {
                        // Store building id for apartment
                        int buildingId = building.Id;
                        if (building.HasChildren)
                        {
                            Document[] apartments = building.Children;
                            foreach (Document apartment in apartments)
                            {
                                if (apartment.Published)
                                {
                                    apartmentsCollection.Add(new Apartment(apartment.Id,
                                                                           buildingId,
                                                                           Convert.ToInt32(apartment.Text),
                                                                           (int)apartment.getProperty("apartmentType").Value,
                                                                           (int)apartment.getProperty("floor").Value,
                                                                           (int)apartment.getProperty("status").Value,
                                                                           (int)apartment.getProperty("bedrooms").Value,
                                                                           Convert.ToInt32(apartment.getProperty("price").Value),
                                                                           string.IsNullOrEmpty(apartment.getProperty("room1").Value.ToString()) == true ? -1 : Convert.ToInt32(apartment.getProperty("room1").Value.ToString()),
                                                                           apartment.getProperty("room1Dimensions").Value.ToString(),
                                                                           string.IsNullOrEmpty(apartment.getProperty("room2").Value.ToString()) == true ? -1 : Convert.ToInt32(apartment.getProperty("room2").Value.ToString()),
                                                                           apartment.getProperty("room2Dimensions").Value.ToString(),
                                                                           string.IsNullOrEmpty(apartment.getProperty("room3").Value.ToString()) == true ? -1 : Convert.ToInt32(apartment.getProperty("room3").Value.ToString()),
                                                                           apartment.getProperty("room3Dimensions").Value.ToString(),
                                                                           string.IsNullOrEmpty(apartment.getProperty("room4").Value.ToString()) == true ? -1 : Convert.ToInt32(apartment.getProperty("room4").Value.ToString()),
                                                                           apartment.getProperty("room4Dimensions").Value.ToString(),
                                                                           string.IsNullOrEmpty(apartment.getProperty("room5").Value.ToString()) == true ? -1 : Convert.ToInt32(apartment.getProperty("room5").Value.ToString()),
                                                                           apartment.getProperty("room5Dimensions").Value.ToString(),
                                                                           string.IsNullOrEmpty(apartment.getProperty("room6").Value.ToString()) == true ? -1 : Convert.ToInt32(apartment.getProperty("room6").Value.ToString()),
                                                                           apartment.getProperty("room6Dimensions").Value.ToString(),
                                                                           string.IsNullOrEmpty(apartment.getProperty("room7").Value.ToString()) == true ? -1 : Convert.ToInt32(apartment.getProperty("room7").Value.ToString()),
                                                                           apartment.getProperty("room7Dimensions").Value.ToString(),
                                                                           apartment.getProperty("totalArea").Value.ToString(),
                                                                           apartment.getProperty("projectArea").Value.ToString()));
                                }
                            }
                        }
                    }
                }
            }

            return apartmentsCollection;
        } 
```

唯一的问题是这需要 8 到 10 秒左右（即使只有大约 150 个节点顶部），这太长了。

请记住，这仅用于检索原始集合。然后我使用一些 linq 语句过滤掉结果，这需要几秒钟。最终，这导致搜索约 150 个节点需要大约 15 秒，这太长了。

我怎样才能加快速度？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T03:34:13.693

使用 NodeFactory 的节点而不是 Document 来访问您的数据。Document 访问数据库，这是您的性能问题的来源。NodeFactory 访问 Umbraco 缓存并且速度更快。有关更多详细信息，请参阅[节点和文档之间的差异](http://our.umbraco.org/wiki/reference/api-cheatsheet/difference-between-node-and-document)。

另一件需要注意的是缓存只包含已发布的节点。因此，您无需进行任何检查以查看它们是否已发布。

# amazon-ec2 - 是否存在预配置了 PHP4 的 Amazon EC2 AMI？

> ID：13274985
> 
> 赞同：0
> 
> 时间：2012-11-07T17:29:42.117
> 
> 标签：amazon-ec2, lamp, php4, amazon-ami, ec2-ami

我很难在 EC2 实例上设置 PHP4 LAMP 堆栈。有谁知道任何支持 PHP4 的预配置 AMI？

作为记录，我没有使用 PHP5 开发的选项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T06:26:34.380

在 EC2 上运行 php LAMP 堆栈相当轻松，而且您不需要自定义 AMI。使用标准 Amazon Linux 实例，登录`ec2-user`并运行以下命令：

```
sudo yum update -y
sudo yum install -y mysql-server mysql-client mysql-libs mysql-devel
sudo yum install -y httpd php 
```

亚马逊在管理他们的 yum 存储库中的包方面做得很好，该存储库是使用 Amazon Linux 自动配置的。如果要升级到 php 5.4.8，只需执行以下命令：

```
sudo yum install -y php54 
```

编辑：对不起，这个`php`包实际上是 5.3.8 版本，所以如果你真的想安装 php4，你最好的选择是从源代码构建它。持续支持它可能会很困难。您可能至少需要安装这些标准包来构建它：

```
sudo yum install -y gcc gcc-c++ make zlib zlib-devel
sudo yum install -y openssl openssl-devel readline readline-devel
sudo yum install -y libxml2 libxml2-devel libxslt libxslt-devel 
```

# javascript - Android onBackPress 调用 JavaScript 函数或退出 Android 应用程序

> ID：13274986
> 
> 赞同：1
> 
> 时间：2012-11-07T17:29:43.737
> 
> 标签：javascript, android

我使用 webview 构建了一个 Android 应用程序。我在 HTML 页面上创建了一个按钮，因此可以弹出一些 div 容器。问题是，当我按下后退按钮时，应用程序继续退出。我的目的是如果有 div 内容，应用程序将隐藏 div 并且进程将停止而不退出应用程序。如果没有显示 div，则应用程序将退出。我的安卓代码

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    CookieManager.setAcceptFileSchemeCookies(true);
    super.onCreate(savedInstanceState);
    super.setIntegerProperty("splashscreen", R.drawable.cover);
    super.loadUrl("file:///android_asset/www/index.html",1500);       
}

@Override
public void onBackPressed() {
    super.loadUrl("javascript:xxx()"); 
    super.onDestroy();
}

} 
```

还有我的 JavaScript

```
<script type="text/javascript">
function xxx(){
reader.dom.find('controls_contents_container').style.display = 'none';
} 
```

我的应用程序运行良好，只是在显示 div 时它存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:34:36.597

你需要删除

`super.onDestroy();`

来自 onBackPressed() 方法。如果您希望应用程序在按下后退按钮后完成调用

```
super.onBackPressed(); 
```

# android - android dialogFragment“有时”不显示webview

> ID：13274988
> 
> 赞同：9
> 
> 时间：2012-11-07T17:29:58.637
> 
> 标签：android, android-webview, android-dialogfragment

我有一个 DialogFragment，里面有一个 WebView。如果 webview 加载页面的速度不够快，DialogFragment 将完全收缩并且不显示 webview。否则，如果加载速度很快，则会显示 WebView。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-03T15:19:34.547

我自己找到了解决方案。如果您使用 LinearLayout 作为 DialogFragment 的根视图，则会发生这种情况，将其更改为 FrameLayout 可以解决问题。我不明白为什么，但它有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-01T20:36:07.980

我尝试了两个设备。

在第一个设备中，Nexus 6 的工作方式就像 David “我自己找到了解决方案。如果您使用 LinearLayout 作为 DialogFragment 的根视图，则会发生这种情况，将其更改为 FrameLayout 解决了问题。我不明白为什么，但它可以工作” . 但是我尝试了第二台设备（Galaxy Prime），但很惊讶，没有成功。尝试在我的 WebViewClient 内部回调中设置 setVisible GONE WebView`onPageStarted()`并在 setVisible VISIBLE 内部回调之后`onPageFinished()`为我工作。

```
public class MyWebClient extends WebViewClient { 

    private static final String LOG_CAT = "NetPayWebClient";

    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        Log.e(LOG_CAT, "onPageStarted(): " + url);
        view.setVisibility(View.GONE);
        super.onPageStarted(view, url, favicon);
    }

    @Override
    public void onPageFinished(WebView view, String url) {
        Log.e(LOG_CAT, "onPageFinished(): " + url);
        view.setVisibility(View.VISIBLE);
        super.onPageFinished(view, url);
    }

}
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-29T12:17:19.233

就我而言，我使用了自定义 WebView，例如`ExpandableHeightWebView`动态高度。

```
@Override
public void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
{
    if (isExpanded())
    {

        int expandSpec = MeasureSpec.makeMeasureSpec(MEASURED_SIZE_MASK,
                MeasureSpec.AT_MOST);
        super.onMeasure(widthMeasureSpec, expandSpec);

        ViewGroup.LayoutParams params = getLayoutParams();
        params.height = getMeasuredHeight();
    }
    else
    {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }
} 
```

我在删除行后 解决了这个问题`setExpanded(true);`后打电话。`myWebView.loadData(data,null);`
`setExpanded(true);`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-03T14:31:23.690

如果您可以通过 AsyncTaks 加载 Web 视图，则不会显示 Dialog 片段，因为 AsyncTasks 无法更改主线程中的布局。看看它。

# c# - C# 线程列表视图

> ID：13274990
> 
> 赞同：2
> 
> 时间：2012-11-07T17:30:03.913
> 
> 标签：c#, winforms, multithreading, listview

我是.net 的新手，我仍然在努力理解很多事情，现在我正在尝试完成一些相对简单的事情，但我每次都失败了，我想添加一个线程到我的程序，这个线程将负责对 Web 服务器执行上传操作，并保持我的程序响应通过更新 ListView 向我的用户提供操作反馈，用户将在其中看到文件上传的所有状态。

我不知道如何将此 Thread 放入程序中以使其响应，到目前为止我找不到任何示例，我正在尝试找到一个小示例来向我展示 Thread 和 WinForms 的使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:36:37.853

您将要使用的是`BackgroundWorker`. 它专为此目的而设计。

```
private void button1_Click(object sender, EventArgs e)
{
    BackgroundWorker bgw = new BackgroundWorker();

    bgw.DoWork += (_, args) => LongRunningTask(bgw);
    bgw.WorkerReportsProgress = true;
    bgw.ProgressChanged += (_, args) =>
    {
        textbox1.Text = args.ProgressPercentage.ToString();
    };
    bgw.RunWorkerCompleted += bgw_RunWorkerCompleted;

    bgw.RunWorkerAsync();
}

private void LongRunningTask(BackgroundWorker bgw)
{
    for (int i = 0; i < 10; i++)
    {
        Thread.Sleep(1000);//placeholder for real work
        bgw.ReportProgress(i);
    }
}

private void bgw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    //do stuff when completed.
} 
```

需要注意的一个关键点是该`DoWork`事件在后台线程中运行，而其他事件都在 UI 线程中运行。`BackgroundWorkder`班级负责确保一切都靠自己。

# sql - 从集合 1 ... 49 中生成 6 个不重复的数字

> ID：13274991
> 
> 赞同：3
> 
> 时间：2012-11-07T17:30:04.207
> 
> 标签：sql, oracle

我需要从 1 到 49 生成 6 个不重复的数字。我有类似的东西：

```
create table zadanie1(
NAZWISKO varchar2(30),
PUNKTY number,
ID number,
constraint stud1_nazw primary key(NAZWISKO)
);

create or replace procedure "LOTTO" IS
pkt number;
begin
   loop
       BEGIN
       pkt := round(dbms_random.value(1,14),0);
       INSERT INTO ZADANIE1(PUNKTY) VALUES (pkt);
       exit;
       Exception When DUP_VAL_ON_INDEX Then 0;
       END;
end loop;
END; 
```

但这似乎不起作用。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T17:50:36.963

```
SQL> select num 
  2  from (select rownum num 
  3        from dual 
  4        connect by level <= 49 
  5        order by dbms_random.value) 
  6  where rownum <= 6;

       NUM
----------
        10
         6
         9
        12
        22
        14 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:39:48.277

只需将 49 个数字放在一个表中并使用

```
SELECT SOME_NUMBER FROM
(
  SELECT SOME_NUMBER
  FROM TABLE_OF_NUMBERS
  ORDER BY DBMS_RANDOM.VALUE()
)

WHERE ROWNUM < 7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T18:22:29.757

好的，谢谢回答。我需要为此表添加列。并为每一行（用户）添加 6 个数字，就像彩票一样。

`create table zadanie1( user varchar2(30), PUNKTY number, ID number, constraint stud1_nazw primary key(NAZWISKO) );`

# c++ - Intellisense 不使用模板 VS2012 终极 C++

> ID：13274992
> 
> 赞同：7
> 
> 时间：2012-11-07T17:30:07.653
> 
> 标签：c++, visual-studio-2012, intellisense

Intellisense 在我的 VS 上工作得非常糟糕......

当我在 C++ 中编码时，它可以 100% 正常工作，直到我开始使用模板，然后它才完全停止工作，停止检测错误并且在所有情况下都不会自动完成。

我倾向于相信这与我对破坏它的代码所做的事情有关。

所以我首先创建了一个包含结构的类：

```
template<typename T>
class List<T>
{
private:
    struct Node
    {
        T value;
        Node* next;
        Node* previous;
    };
    Node* First;
    Node* Last;
...
}; 
```

稍后，我声明了一些附加功能：

```
template<typename T>
inline T List::First()
{
    return First;
} 
```

到目前为止一切顺利，intellisense 工作 100% 正常，但如果我尝试先做-> 它不起作用，VS 不会告诉我任何选项（ctrl + 空格不起作用）。

另外，如果我输入一些废话，它不会告诉我这是错误的：

```
sdkjgisjdga->vsrsiib = 123jgi; 
```

我真的不知道该怎么做才能解决这个问题。

感谢您的时间和努力。

PS：我已经尝试重置配置。

编辑：忘了说如果我不在我的 .h 文件中使用模板，那么智能感知工作正常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T21:05:08.723

模板需要先实例化，然后才能明确说出它们包含的内容。例如，您的`First->`代码段指向 a `List<T>::Node`，这显然取决于确切的`T`.

`T==int`当然，在这个简单的例子中，Intellisense 可以通过替换片刻来明确列出成员。但是考虑一下更糟糕的情况：Intellisense 不知道成员（就像现在一样）或 Intellisense 在您最需要它的困难情况下错误猜测？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-18T19:35:50.190

我对这个答案有点晚了，也许 OP 不再处理这个代码了，但我认为这仍然可以帮助正在搜索模板和 IntelliSense 的人。

您可以尝试的一件事——如果您希望在键入时能够看到拼写错误和错误，但如果您希望代码可模板化——使用#if-#else-#endif：

```
#if MY_USE_TEMPLATES 
template <typename T> 
#else 
typedef [**your-test-type-here**] T; 
#endif 
class List { 
... your code here ... 
} 
```

在 Visual Studio 2015 中，这似乎可行。您可以将 MY_USE_TEMPLATES 定义为 0（使用 #define），使用 IntelliSense 和自动完成等开发代码（这样您就可以减少错误），然后在准备好测试或编译时将 MY_USE_TEMPLATES 更改为 1实际的模板代码。

当您打开 MY_USE_TEMPLATES 时，引用您的 List 的代码将导致错误（即，类似“List myList”的代码），您可以在#else 语句中使用额外的虚拟“模板”来解决这个问题。但是，保留 #else 子句而不使用额外的“模板”的好处是：引用 List 时出现的错误可能会提醒您在测试代码之前打开 MY_USE_TEMPLATES，从而降低出现错误的可能性。（经验表明在处理很多事情和大型项目时很容易忘记......）

但是，在使用多个这样的类型定义时要小心：对于该名称“T”，“typedef ... T”只能安全地使用一次；虽然您可以对一个类使用 'typedef ... TYPE1' 而对另一个类使用 'typedef ... TYPE2'，但您*不能*安全地对不同类型使用相同的类型名称，除非您将不同的类型名称放入单独的命名空间中。（我在 Visual Studio 2015 中尝试过。）

# python - 将字符串写入文本文件的类似打印的函数

> ID：13274997
> 
> 赞同：2
> 
> 时间：2012-11-07T17:30:39.077
> 
> 标签：python, function, arguments

我想在 Python 中编写一个函数，它将像 dos 一样接受参数`print`，但不是将字符串打印到标准输出，我想将格式化的字符串写入文本文件。

我想知道如何为这样的函数参数定义参数以接受字符串格式？

我正在寻找可以替代的东西

```
print "Test" 
```

和

```
MyLog "Test" 
```

但也应支持 % 参数。到目前为止，我只提出了这个：

```
def logger(txt):    
fh = open (LOGFILE, "a") #Get handle in append mode
fh.write(txt)
fh.close()
print txt
return True 
```

这适用于简单的字符串，但我认为它不会接受 % 参数，我也不能像*logger "TEST"那样调用它*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T17:40:39.277

您可以使用“print chevron”语句来执行您想要的操作，如下所示：

```
with open('filename.txt', 'w') as f:
  print >> f, my_object 
```

请参阅打印语句的[文档](http://docs.python.org/2/reference/simple_stmts.html#print)。

当然，使用`print()`Martijn Pieters[建议](https://stackoverflow.com/a/13275117/600110)的函数可能是更好的做法。

**更新**

如果我将您的`logger`函数更改为使用 print chevron 语法，我会得到：

```
def logger(txt):    
  fh = open (LOGFILE, "a") #Get handle in append mode
  fh.write(txt)
  fh.close()
  print >>fh, txt
  return True 
```

如果你像这样调用这个函数：

```
now, duration = 4.0, 2.0
logger("User request at %f time took %f seconds." % (now, duration)) 
```

您的日志文件中将有如下所示的一行：

```
User request at 4.0 time took 2.0 seconds. 
```

所以你可以用它来`%`格式化（虽然你真的应该看看[新式格式化](http://docs.python.org/2/library/string.html#format-string-syntax)），但你不能这样称呼它：

```
logger "User request at %f time took %f seconds." % (now, duration) 
```

那是因为 print 是一个[简单的 statement](http://docs.python.org/2/reference/simple_stmts.html)，它是一种语言级别的构造，你不能将它们添加到 Python 中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T17:38:11.837

[`print()`](http://docs.python.org/3/library/functions.html#print) *已经*让你这样做了：

```
print(somestring, file=someopenfile) 
```

如果您使用的是 python 2，请使用`from __future__ import print_function`来获得相同的功能。

您始终可以使用与函数相同的参数来实现`print`函数并将其用作替换，或者使用通配符参数 ( `*args`, `**kw`)，然后`file`根据需要添加关键字参数。您始终可以通过以下结构访问*原始*内置`print()`函数：`__builtins__`

```
def print(*args, **kw):
    if 'file' not in kw:
        # print to a file instead of stdout
        kw['file'] = someopenfile
    return __builtins__.print(*args, **kw) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T18:23:25.007

由于默认`print`输出到，您可以按照我的这个[答案](https://stackoverflow.com/a/3378965/355230)中的描述`sys.stdout`创建一个，这将允许您使用 regular ，无论您使用的是语句还是函数版本。[`contextmanager`](http://docs.python.org/2/library/stdtypes.html?highlight=contextmanager#context-manager-types)`print`