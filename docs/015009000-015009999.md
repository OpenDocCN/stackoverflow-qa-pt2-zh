# StackOverflow 问答 15009000-15009999

# css - 将 div 定位到右下角

> ID：15009001
> 
> 赞同：0
> 
> 时间：2013-02-21T17:51:52.653
> 
> 标签：css, css-float

我正在我的网站上创建类似 Facebook 的聊天。因此，每当用户单击与某人聊天时，聊天窗口应在右下角打开。下一个窗口应留给其他打开的聊天窗口。聊天窗口也不应占用额外页面上的高度。它们应该被放置在更高的 z-index 以重叠它们后面的页面内容。我在 css 方面不是那么好，请帮助。以下是我正在使用的代码，但它不能正常工作

```
.chat{
    z-index:50;
    width: 300px;
    height:300px;
    margin-left:10px;
    float:right;
    border:1px solid blue;
} 
```

我得到了这个，它在页面上添加了滚动条，而不是非常正确。

![在此处输入图像描述](../Images/b44794d15e14fa8417a0c33a65931831.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:55:10.687

你需要有一个父元素（一个 div ）：

```
.parent { position: fixed; bottom: 0; left: 0; right:0; width: 100%; } 
```

您需要固定位置，以便栏保持在浏览器的底部，而不是您的页面。就像你的聊天 div 的容器，它应该有

```
.chat { float: right; position: relative; } 
```

所以他们可以充当他们实际聊天的容器

这是几个聊天窗口的小提琴：

[http://jsfiddle.net/SXZKe/1/](http://jsfiddle.net/SXZKe/1/)

**编辑：**添加了小提琴

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:54:26.367

尝试删除浮动：右，添加位置：固定，右：0％，底部：0％；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:54:44.717

为此使用底部 css 属性：

[http://www.w3schools.com/cssref/pr_pos_bottom.asp](http://www.w3schools.com/cssref/pr_pos_bottom.asp)

# php - 获取“WP_Post 类的对象无法转换为字符串” - 当它是字符串时

> ID：15009005
> 
> 赞同：9
> 
> 时间：2013-02-21T17:52:07.010
> 
> 标签：php, wordpress

我的functions.php中有以下代码，它在发布时执行脚本：

```
function save_new_post($post_ID) {

$site_root = '/home/forexmag/public_html/directory2';
$post = get_post($post_ID);
$title = $post->post_title;
$breaking_news = false;

$categories = get_the_category($post_ID);
if (is_array($categories) && !empty($categories))
{
    foreach ($categories as $cat_det)
    {
        //this is the id for the breaking (bad) news
        if (5668 == $cat_det->cat_ID)
        {
            $breaking_news = true;
            break;
        }
    }
}

$exec_code = "/usr/local/bin/php 
        $site_root 
        /crons/cron_notify.php '$title' $post_ID 2 " . intval($breaking_news);
exec(
    $exec_code
);
} add_action('draft_to_publish', 'save_new_post', 10, 1); 
```

当我发布新帖子时，我不断收到以下错误：

```
Catchable fatal error: Object of class WP_Post could not be converted to string in /home/forexmag/public_html/wp-content/themes/forex_magnates/functions.php on line 712 
```

这条线是我设置`$exec_code`var 的地方。但是，正如您所看到的，并且正如我通过 var_dump 确认的那样，该`$title`变量是一个字符串。我错过了什么？

编辑：更奇怪的是，当我 var_dump`$exec_code`并杀死脚本时，我得到了一个完美的字符串：

```
string(121) "/usr/local/bin/php /home/forexmag/public_html/directory2/crons/cron_notify.php '2011 Free Forex Report' 9934 2 0" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T19:23:35.870

在 Wordpress Answers 上得到正确答案。认为我应该分享它：

`$post_ID`是一个`WP_Post`对象。您的执行代码应该有效地使用`$post_ID->ID.`

```
function save_new_post($post_ID)
{
    print_r($post_ID);
    die(); 
```

退货

```
WP_Post Object ( [ID] => ... 
```

由[vancoder提供](https://wordpress.stackexchange.com/users/26778/vancoder)

请注意，这取决于您使用的钩子。例如，如果你使用`publish_page`你会得到一个整数（这实际上是我困惑的根源）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-03T15:15:59.003

我遇到了同样的错误，但最终我的问题的解决方案是

```
<?php wp_reset_query(); ?> 
```

这是因为正在使用 WP_Query 并且正在中断页面下方的其余查询。

我希望这可以帮助别人

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-01-15T02:08:21.070

有一天我在我的网站上遇到了同样的错误，但代码不是问题。问题出在数据库上。我所做的是进入我的数据库并更改站点网址和主页，因为里面有乱码。我认为我的网站受到了损害，所以我更改了数据库密码。该网站将帮助您摆脱可捕获的致命错误[https://www.msgdigital.com/catchable-fatal-error-object-of-class-wp_error-could-not-be-converted-to-string/](https://www.msgdigital.com/catchable-fatal-error-object-of-class-wp_error-could-not-be-converted-to-string/)。

我试过了，相信它有效。

# sencha-touch-2 - Sencha Architect - TypeError：'null' 不是对象（评估'reader.getReaderType'）

> ID：15009006
> 
> 赞同：1
> 
> 时间：2013-02-21T17:52:14.093
> 
> 标签：sencha-touch-2, sencha-architect

Sencha Touch Architect 在我设置商店、休息代理然后尝试将数据加载到商店时给我这个错误。

**TypeError：“null”不是对象（评估“reader.getReaderType”）**

有没有人遇到过这个问题或知道解决方法？

# r - 计算数据框子集内的比例

> ID：15009011
> 
> 赞同：7
> 
> 时间：2013-02-21T17:52:31.767
> 
> 标签：r, plyr

我正在尝试获取数据框子集中的比例。例如，在这个虚构的数据框中：

```
DF<-data.frame(category1=rep(c("A","B"),each=9),
    category2=rep(rep(LETTERS[24:26],each=3),2),
     animal=rep(c("dog","cat","mouse"),6),number=sample(18)) 
```

我想`category1`通过`category2`组合计算三种动物中每种动物的比例（例如，在所有同时为“A”和“X”的动物中，狗的比例是多少？）。在`prop.table`数据框的第 4 列上，我可以得到每行占总“数字”列的比例，但我还没有找到一种方法来为基于类别 1 和 2 的子集执行此操作。我还尝试拆分通过`category1`和`category2`使用这个数据：

```
splitDF<-split(DF,list(DF$category1,DF$category2)) 
```

然后我希望我可以应用一个函数`prop.table`来获取每个拆分组中每只动物的比例，但我无法开始`prop.table`工作，因为我似乎无法指定在拆分组中应用该函数的哪一列数据。有没有人有任何提示？也许这是可能的`plyr`或类似的东西？我在帮助论坛中找不到任何关于*在*数据子集中获取比例的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T18:03:59.480

您可以使用`ddply()`库中的函数`plyr`来计算每个组合的比例，然后将新列添加到数据框中。

```
 library(plyr)     
 DF<-ddply(DF,.(category1,category2),transform,prop=number/sum(number))
 DF
   category1 category2 animal number       prop
1          A         X    dog     17 0.44736842
2          A         X    cat      3 0.07894737
3          A         X  mouse     18 0.47368421
4          A         Y    dog      2 0.14285714 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T18:05:41.290

这会产生您想要的输出吗？

```
 DF$proportion<-as.vector(unlist(tapply(DF$number,paste(DF$category1,DF$category2,sep="."),FUN=function(x){x/sum(x)}))); 
```

# c# - 生成 StorageFile 的哈希

> ID：15009020
> 
> 赞同：0
> 
> 时间：2013-02-21T17:52:56.047
> 
> 标签：c#, windows-runtime

如何生成 StorageFile 中包含的文件的哈希（例如 md5）？我想将哈希值存储在数据库中并对其进行调查以避免重复文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:36:10.893

您可以使用 HashAlgorithmProvider 类来计算哈希

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.core.hashalgorithmprovider.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.core.hashalgorithmprovider.aspx)

看看这篇文章，这样你就不会因为大文件而 OOM

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/e8e538b5-1d71-4ba3-b1df-b74ec8978443](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/e8e538b5-1d71-4ba3-b1df-b74ec8978443)

# c# - 使用接口与。使用“使用”

> ID：15009022
> 
> 赞同：-3
> 
> 时间：2013-02-21T17:53:05.187
> 
> 标签：c#, interface

我正在阅读此[http://msdn.microsoft.com/en-us/library/87d83y5b(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/87d83y5b(v=vs.80).aspx)但我想知道，使用接口而不是简单地创建接口有什么区别或好处具有属性的类并通过“ `using MyClass.cs`？”将其添加到您的类中 似乎无论哪种方式，您都必须实例化方法或属性类......

谢谢你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:55:40.353

几个不同的类可能都实现相同的接口，因此共享一组特定的特性。例如，所有实现`IEnumerable`接口的类型都可以被枚举，而没有任何其他共同点。接口允许类型限制较少的方式来支持特定功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T18:01:34.210

An interface is *not* so you can use the interface's objects. It's, rather, so that you *must* **create** those objects.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T18:10:39.653

我看不出两者有什么相似之处。接口定义了客户端如何使用您的代码。using 关键字（后跟命名空间名称而不是文件名）仅允许您使用该命名空间中的对象，而无需每次都以整个命名空间作为前缀。

一个更常见的问题是实现接口和从类派生有什么区别。也许这就是你想问的。这个问题在其他地方已经被广泛讨论过。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T18:38:59.373

接口仅包含您的逻辑的签名。它必须在您的子类中完全实现。当我们想要包含与项目的命名空间不同的命名空间时，我们使用“using”子句，但如果您的类或接口在同一个命名空间中，则不需要使用“using”子句。

您可以使用接口继承您的子类，并使您的代码更加灵活。

它的一个例子是：

```
public interface IClown
{
  string FunnyThingIHave { get; }
  void Honk();
}

public class TallGuy : IClown
{
  public string FunnyThingIHave {
  get { return "big shoes"; }
}
  public void Honk() {
    MessageBox.Show("Honk honk!");
  }
}
public class Joker:IClown
{
  public string FunnyThingIHave
  {
    get {return "I have a clown car"}
  }
  public void Honk()
  {
    MessageBox.Show("Honk Bonk");
  }
}

public class FunnyClowns 
{
  Joker joker = new Joker();
  TallGuy tguy = new TallGuy();

  string WhichFunnyThingIWant(IClown clownType)
  {
     clownType.Honk();
  }
} 
```

现在它所做的是定义一个小丑接口，然后为它定义两个子类，然后第三个类可以动态调用 IClown 的 clowntype 对象。这是一个简单的例子，但这种逻辑可以应用于许多其他情况。这就是接口真正有用的地方。我希望这有帮助..

# spring - Spring PropertyEditor 如何知道要转换哪个 Class 属性

> ID：15009024
> 
> 赞同：0
> 
> 时间：2013-02-21T17:53:09.970
> 
> 标签：spring, propertyeditor

我在 Spring 和 Pro Spring 中搜索了文档。我不明白 CustomerEditorConfigurer 如何知道它应该在哪里应用属性转换。前任 -

我有一个联系人类，它有一个日期变量（jodatTime）我创建了一个扩展 PropertyEditorSupport 的 ContactPropertyEditor，我正在使用 setAsText() 来转换字符串日期。

然后我进入应用程序并定义 CustomerEditorConfigurer，我告诉它将 jodaTime 映射到 ContactPropertyEditor。现在这没有信息告诉 Spring 在创建 Contact 类时使用 ContactPropertyEditor 进行转换。

因此，为了测试我的理论，我创建了另一个具有与联系人相同属性（日期）的类 Contact2。当我运行转换时，Contact2 也会发生，这有点奇怪。

这是代码示例 Contact.java

```
public class Contact {
private String firstName;
private String lastName;
private DateTime birthDate;
private URL personalSite;

public String toString() {
return "First name: " + getFirstName()
+ " - Last name: " + getLastName()
+ " - Birth date: " + getBirthDate()
+ " - Personal site: " + getPersonalSite();
}
// Getter/setter methods omitted
public String getFirstName() {
    return firstName;
}

public void setFirstName(String firstName) {
    this.firstName = firstName;
}

public String getLastName() {
    return lastName;
}

public void setLastName(String lastName) {
    this.lastName = lastName;
}

public DateTime getBirthDate() {
    return birthDate;
}

public void setBirthDate(DateTime birthDate) {
    this.birthDate = birthDate;
}

public URL getPersonalSite() {
    return personalSite;
}

public void setPersonalSite(URL personalSite) {
    this.personalSite = personalSite;
}
} 
```

ContactPropertyEditor.java 导入 java.beans.PropertyEditorSupport；

```
import org.joda.time.DateTime;
import org.joda.time.format.DateTimeFormat;
import org.joda.time.format.DateTimeFormatter;
import org.springframework.stereotype.Component;

public class ContactPropertEditor extends PropertyEditorSupport{

private DateTimeFormatter dateTimeFormatter;

public ContactPropertEditor(String formatPattern){
    System.out.println("In the constructor");
    dateTimeFormatter=DateTimeFormat.forPattern(formatPattern);
}

public void setAsText(String text) throws IllegalArgumentException{
    System.out.println("Setting the value of " + text);
    setValue(DateTime.parse(text, dateTimeFormatter));
}

} 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"         xmlns:p="http://www.springframework.org/schema/p"
    xmlns:util="http://www.springframework.org/schema/util"     xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans     http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                         http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.0.xsd
                         http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:component-scan base-package="com.dinesh"></context:component-scan>
<context:annotation-config />

<!-- This holds the property values and formats -->
<context:property-placeholder location="classpath:application.properties" />

<bean class="com.dinesh.PropertyEditor.ContactPropertEditor" id="contactPropertEditor">
    <constructor-arg><value>"yyyy-MM-dd"</value></constructor-arg>
</bean>
<bean class="org.springframework.beans.factory.config.CustomEditorConfigurer">
    <property name="customEditors">
        <map>
            <entry key="org.joda.time.DateTime">
                <ref local="contactPropertEditor" />
            </entry>
        </map>
    </property>
</bean>

<bean id="clarence" class="com.dinesh.PropertyEditor.Contact"
    p:firstName="Clarence" p:lastName="Ho" p:birthDate="1970-12-31"
    p:personalSite="http://www.clarence.com" />

<bean id="contact2" class="com.dinesh.PropertyEditor.Customer2"
    p:firstName="Clarence" p:lastName="Ho" p:birthDate="1970-12-31"
    p:personalSite="http://www.clarence.com" /> 
```

现在你可以看到我所做的只是告诉 org.springframework.beans.factory.config.CustomEditorConfigurer 我的属性转换逻辑是 contactPropertEditor 类。我没有告诉 Spring 在 Contact.java 类上应用它。

魔术是如何发生的。

在 Spring 文档中，它说了一些有意义的东西。

Spring 文档有一个名为 ExoticType() 的类，它具有 name 属性。一个名为 ExoticTypeEditor 的编辑器用于将名称更改为大写，并且应用程序上下文 xml 清晰

```
<bean class="org.springframework.beans.factory.config.CustomEditorConfigurer">
 <property name="customEditors">
   <map>
     <entry key="example.ExoticType" value="example.ExoticTypeEditor"/>
   </map>
 </property> 
```

在这里，我可以看到我告诉 CustomEditorConfigurer 使用 ExoticTypeEditor 对类 ExoticType 应用转换，但在 Pro Spring 3 书中并非如此。我尝试在 Contact Example 中执行相同的操作，但出现错误。

```
<bean class="org.springframework.beans.factory.config.CustomEditorConfigurer">
    <property name="customEditors">
        <map>
            <entry key="com.dinesh.PropertyEditor.Contact">
                <ref local="contactPropertEditor" />
            </entry>
        </map>
    </property>
</bean> 
```

错误：**无法将类型 [java.lang.String] 的值转换为属性“birthDate”所需的类型 [org.joda.time.DateTime]：找不到匹配的编辑器或转换策略**

知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:10:03.853

当您`PropertyEditor`在应用程序上下文中注册 a 时，您正在提供从`String`某种类型到某种类型的转换器，在您的情况下是`JodaTime`类型。持有类型的 bean， ( `Contact`) 无关紧要。应用程序上下文将在需要设置任何 bean 类型属性的任何时候使用您`ContactPropertyEditor`的**编辑**器`JodaTime`。`String`

 **所以`ContactPropertyEdit`这是一个坏名字。它应该是 JodaTimePropertyEditor。

如果你想要一个真实的`ContactPropertyEditor`，它应该将字符串转换为联系人。例如：

```
<bean id="someBeanHoldingAContact" class="someBeanClass">
<property name="contact" value="Hendrix, Jimi, 1942-11-27, http://www.jimihendrix.com" />
</bean> 
```

并且 ContactPropertyEditor 应该使用字符串值来创建联系人。

魔术在*课堂*`org.springframework.beans.BeanWrapperImp`上。请参阅 javadoc

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-15T17:08:23.953

如果人们搜索这个标题试图找到如何在转换时动态获取目标类，您可以尝试使用 ConditionalGenericConverter。

相关部分：

检查每个转换请求：

```
 @Override
public Set<ConvertiblePair> getConvertibleTypes() {
    return null;//accept everything
} 
```

如果您处理这种情况或将其传递给 spring 默认转换器，请检查何时请求转换：

```
 @Override
public boolean matches(TypeDescriptor sourceType, TypeDescriptor targetType) {
       if (sourceType.getType().equals(String.class) && MyInterface.class.isAssignableFrom(targetType.getType()))
        return true; 
return false;
} 
```

处理转换：

```
@Override
public Object convert(Object source, TypeDescriptor sourceType, TypeDescriptor targetType) {    
output = targetType.getType().newInstance();
//do whatever is required here
return output;
} 
```**

# javascript - 在 ASP 按钮上按 Tab 并按 Enter 以触发按钮不会触发 onClick

> ID：15009025
> 
> 赞同：0
> 
> 时间：2013-02-21T17:53:11.187
> 
> 标签：javascript, button, onclick, keypress

我有一个在服务器端创建的 asp 按钮，并且我已将其 OnClientClick 事件设置为触发 Javascript 函数。它在页面上呈现 onClick 事件正确包含对 Javascript 函数的调用，当我单击按钮时，它一切正常。

当我点击按钮并按回车键时，会出现问题。它提交表单，但它不会触发 onclick 事件，所以我的 Javascript 没有被调用。

我试图将 onKeyPress 和 onKeyDown 分配给按钮，但这不起作用。这一定是我错过了一些简单的事情，但我只是在这里画一个空白。

任何帮助感激地接受，谢谢。

这是为按钮生成的 html：

```
 <input type="submit" name="SaveButtonTop" value="Save"
onclick="javascript:return ClickSubmitBtn();WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;SaveButtonTop&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" id="SaveButtonTop" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:06:38.623

您正在使用提交按钮，因此它将提交。您必须取消您正在调用的函数中按钮事件的默认操作，或者使用常规按钮，而不是提交。

请参阅：[http ://css-tricks.com/return-false-and-prevent-default/](http://css-tricks.com/return-false-and-prevent-default/)

# solr - solr 不建议完整的单词

> ID：15009028
> 
> 赞同：0
> 
> 时间：2013-02-21T17:53:19.457
> 
> 标签：solr, autosuggest

我的 solr 安装只建议单词的存根，而不是完整的单词。

如果我搜索导体，我会得到这样的结果：

```
<int name="conductor">68</int>
<int name="symphoni">51</int>
<int name="no.">46</int>
<int name="rattl">28</int> 
```

我想要的是：

*   交响乐而不是syphoni
*   拨浪鼓（Simon Rattle，指挥）而不是拨浪鼓

等等。

生成的完整查询是：

```
select?fl=abstract&facet=true&facet.field=abstract&facetlimit=8&facet.mincount=1&omitHeader=true&qf=content%5E40.0+title%5E5.0+keywords%5E2.0+tagsH1%5E5.0+tagsH2H3%5E3.0+tagsH4H5H6%5E2.0+tagsInline&json.nl=map&q=conductor&start=0&rows=5 
```

我使用 TYPO3，所以可以在这里找到配置 xml：

[https://github.com/subbugoe/typo3-solr/blob/master/resources/solr/typo3cores/conf/solrconfig.xml](https://github.com/subugoe/typo3-solr/blob/master/resources/solr/typo3cores/conf/solrconfig.xml)

架构可以在这里找到：

[https://github.com/subbugoe/typo3-solr/blob/master/resources/solr/typo3cores/conf/english/schema.xml](https://github.com/subugoe/typo3-solr/blob/master/resources/solr/typo3cores/conf/english/schema.xml)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:11:38.387

arun 是正确的，这个问题是因为您正在检索由索引分析器阻止的字段的构面。我查看了 TYPO3 提供的其他 fieldType 定义，textSpell fieldType 看起来很有希望。

我建议将以下内容添加到 general_schema_fields.xml 文件中。

```
 <field name="abstract_facet" type="textSpell" indexed="true" stored="true" />
 <copyfield source="abstract" dest="abstract_facet" /> 
```

您需要重新索引您的数据以使这些更改生效，然后您可以运行以下查询，它应该可以为您提供更好的结果。

```
 select?fl=abstract&facet=true&facet.field=abstract_facet&facetlimit=8&facet.mincount=1
  &omitHeader=true&qf=content%5E40.0+title%5E5.0+keywords%5E2.0+tagsH1%5E5.0
  +tagsH2H3%5E3.0+tagsH4H5H6%5E2.0+tagsInline
  &json.nl=map&q=conductor&start=0&rows=5 
```

如果这不能完全满足您的需求，我建议您查看[Solr Wiki - Analyzers, Tokenizers and Token Filters](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters)，以获取有关如何处理值并将其存储在索引中的更多指导。最终，您可能希望创建一个完全独立的 fieldType 以用于分面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:38:39.237

您的架构中只有两种字段类型，并且都使用 SnowballPorterFilterFactory 进行词干提取。您可以使用不进行词干提取的[复制字段，并使用该字段来获取完整词而不是词干词。](https://wiki.apache.org/solr/SchemaXml#Copy_Fields)

# javascript - 将跨度定位在相对定位的 div 内

> ID：15009033
> 
> 赞同：0
> 
> 时间：2013-02-21T17:53:28.403
> 
> 标签：javascript, html, css

我正在开发一个 Wordpress 插件，但在定位`span`. 基本上，有一个`div`包含一个`img`和一个`span`（`div`和`span`是在插件中动态添加的，但我认为这里不是这种情况）应该涵盖`img`. `span`加载图像后，其大小、浮动和边距会动态设置，因此`span`完全覆盖图像。

不幸的是，当`image`是向右浮动时，具有一个正的左边距值并且比`div`包含它的更宽（图像+边距），就会出现问题。的左边距`image`已更改，但`span`的左边距未更改，因此`span`无法正确覆盖图像。有没有办法解决这个问题或一个好的解决方法？我的意思是在其他情况下也能很好地工作，比如向左浮动图像等。我注意到它在 Chrome、IE9 和 FF19 上的工作方式类似。

一个例子：http: [//jsfiddle.net/6zQp3/1/](http://jsfiddle.net/6zQp3/1/)

**更新** 我认为我没有很好地解释这个问题，所以这里有另一个例子：

[http://jsfiddle.net/6zQp3/53/](http://jsfiddle.net/6zQp3/53/)

我已经指出了代码的哪些部分可以更改，哪些不能更改。基本上，该插件会为网站上的每个图像动态创建`div.image-container`and `span.cover`（我在这里省略了这部分，因为它并不真正相关）。`span.cover`应该完全覆盖图像。正如您在这个新示例中看到的那样，第一张图像没有被正确覆盖，而其他图像则被正确覆盖。那是我的问题 - 调整 JavaScript，也许还有 css，以便它在这种情况下也能正常工作。请注意，我无法修改图像的 css（因此不能在图像上使用绝对定位）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:08:53.773

您`span`的定位是绝对的，因此它不能向左或向右浮动。

**这是我的版本：**

**一）** [http://jsfiddle.net/6zQp3/47/](http://jsfiddle.net/6zQp3/47/)

**B）** [http://jsfiddle.net/6zQp3/49/](http://jsfiddle.net/6zQp3/49/)

现在您可以将 img + span 放置在任何位置。

# javascript - JavaScript 在页面上运行，但最后删除了自己的 DOM 节点。我如何测试它做了什么？

> ID：15009041
> 
> 赞同：3
> 
> 时间：2013-02-21T17:53:49.317
> 
> 标签：javascript, dom, browser

一个场景，

我在 DOM 中有一个脚本元素

这个脚本在页面上做了“事情”，然后它**自己删除了**

```
<script type="text/javascript" id="the-javascript">
(function (d){

    var ...,
        script = d.getElementById('the-javascript'),
        ...;

    // lotsa code !!

    script.parentNode.removeChild(script);

}(document));
</script> 
```

这是一个匿名 IIFE（立即调用函数执行）
我怎么知道页面上执行了 JavaScript。陷入我必须找到的情况。

以外的任何东西`view-source`？

编辑：

让我澄清一下。有人请解释
我正在运行一个测试用例的否决票，该测试用例需要查找 JavaScript 是否在
我知道使用开发者工具的页面上运行。呸！
在标签`code`中`script`，代码删除了`script`标签
代码是匿名的，所以我没有可以在控制台中检查的全局变量，或者
我必须找到的任何地方，如果 JavaScript 创建了任何 DOM 元素，而不使用`view-source`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:59:49.813

像 Chrome 或 IE 这样的浏览器有开发者工具，可以告诉你（几乎）关于你的页面的一切。只需激活工具并观察您的页面加载。

如果您想知道脚本的作用，您还可以导航到它的地址：`http://theirSite/main.js`

注意：脚本并没有删除自己，它只是删除了加载它的节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T18:06:43.660

> *“我的问题是——“如果 JavaScript 代码自行删除，我如何才能发现页面上已执行了 JavaScript 代码？”*

如果脚本从 DOM 中自行删除，则*无法*找到它……因为它不存在……因为它已被删除。

* * *

为了解决更新的问题和评论，除了对页面发出 XHR 请求并分析收到的内容之外，实际上没有任何方法可以安全地检测脚本是否运行然后自行删除。

你可以搜索代码的副作用，但是可能性的数量实在太多了，可能是脚本没有可见的副作用。

# sql-server - 从 SQL Server 导入时 sqoop 是否获取任何锁？

> ID：15009055
> 
> 赞同：0
> 
> 时间：2013-02-21T17:54:26.880
> 
> 标签：sql-server, hadoop, locking, hdfs, sqoop

我正在使用 sqoop 从 SQL Server 导入 HDFS。我想知道我从中导入的表上是否获得了任何锁，如果是这样，有没有办法做相当于`WITH(NOLOCK)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:09:46.517

是的，根据 SQOOP-724。

在这里，还包括一个样本

[http://mail-archives.apache.org/mod_mbox/sqoop-user/201302.mbox/%3CCAL=o-uTG3Pwrtd+brF9q+b6zEZUSnJ9Z35BYRrsvNr1gi1pxXA@mail.gmail.com%3E](http://mail-archives.apache.org/mod_mbox/sqoop-user/201302.mbox/%3CCAL=o-uTG3Pwrtd+brF9q+b6zEZUSnJ9Z35BYRrsvNr1gi1pxXA@mail.gmail.com%3E)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T02:13:21.180

Sqoop 发出通常的选择查询，因此它执行与查询相同的锁定。Sqoop 不会执行额外的附加锁定。

我们最近改进了内置 Microsoft SQL 连接器以支持表提示，请查看[SQOOP-724](https://issues.apache.org/jira/browse/SQOOP-724)。我们目前正在努力获取包含此功能的新版本 1.4.3。

# visual-studio-2012 - 如何在 Web Developer Tools 2012.2 RTW 中禁用智能感知以进行淘汰赛

> ID：15009058
> 
> 赞同：2
> 
> 时间：2013-02-21T17:54:33.003
> 
> 标签：visual-studio-2012, knockout.js, intellisense

在 Web Developer Tools 2012.2 RTW 附带的新添加的对 Knockout 的智能感知支持方面，我的 Visual Studio 运行速度非常慢。不知何故，我的工作室已更新到最新版本，现在我无法工作！请问我怎样才能禁用这个东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:21:43.733

[此博客](http://blogs.msdn.com/b/webdev/archive/2013/03/04/disabling-knockout-intellisense.aspx)详细介绍了如何禁用 KO 智能感知。

使用名称和值添加一个新的*字符串*值。`HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\HTML Editor``KnockoutSupportEnabled``0`

如果您使用的是 Express 版本，请将其添加到`HKEY_CURRENT_USER\Software\Microsoft\VWDExpress\11.0\HTML Editor`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:59:10.883

好的，这对我有用：

1.  去卸载程序并卸载“Microsoft Web Developer Tools 2012.2”。完成后您将无法再打开 Web 项目。不要惊慌失措。
2.  启动 Visual Studio 2012 的安装程序并转到“修改”
3.  选择“Microsoft Web Developer Tools”功能并安装它。
4.  问题解决了，您已经返回到以前版本的 Web 开发人员工具，但没有错误的 knockout.js 智能感知。

# memcached - Memcached：插件 Munin 错误

> ID：15009067
> 
> 赞同：1
> 
> 时间：2013-02-21T17:55:03.353
> 
> 标签：memcached, munin

下午好。

我正在尝试使用 memcached 插件，当我使用命令“munin-run”测试它们时出现错误。

返回的错误是：

```
Use of uninitialized value $ip in substitution (s///) at /etc/munin/plugins/memcached_hits line 28.
Use of uninitialized value $ip in concatenation (.) or string at /etc/munin/plugins/memcached_hits line 29.
Use of uninitialized value $port in concatenation (.) or string at /etc/munin/plugins/memcached_hits line 29.
Use of uninitialized value $ip in hash element at /usr/share/perl5/Cache/Memcached.pm line 253.
Use of uninitialized value $ip in index at /usr/share/perl5/Cache/Memcached.pm line 279.
Use of uninitialized value in subroutine entry at /usr/share/perl5/Cache/Memcached.pm line 288.
Bad arg length for Socket::pack_sockaddr_in, length is 0, should be 4 at /usr/lib/perl/5.14/Socket.pm line 260. 
```

memcached_hits 插件的第 28 行和第 29 行，分别参考下面的代码：

```
$ip =~ s/_/./g;
my $address = "$ip:$port"; 
```

我很难找到解决方案。任何人都可以帮助我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:34:05.123

确保您的 memcached 配置文件可能位于此处：

```
/etc/munin/plugin-conf.d/memcached 
```

看起来像这样：

```
[memcached_*]
env.host 127.0.0.1
env.port 11211
env.timescale 3 
```

一些默认配置文件包含有关 env 行的额外信息，如下所示：

```
# BAD! DELETE *default*
[memcached_*]
env.host 127.0.0.1  *default*
env.port 11211      *default*
env.timescale 3     *default* 
```

# code-signing - 重新签名和更新 .ipa 的内部版本号时出错

> ID：15009068
> 
> 赞同：0
> 
> 时间：2013-02-21T17:55:04.923
> 
> 标签：code-signing, ipa, info.plist

我的企业证书即将到期，我正在尝试重新签署我的应用程序。我正在获取 .ipa 文件并运行重新签名脚本。一切都在那里完美运行。我可以按预期安装和使用更新的 .ipa 文件。

但是我的 MDM 不会接受二进制文件，因为它“已经存在”，所以我必须更新版本和/或内部版本号。所以我想更新内部版本号。我编写了一个小脚本将内部版本号设置为 42。（在我实际测试后，我打算让它增加数字）。

```
$ unzip -q myApp.ipa 
$ /usr/libexec/PlistBuddy -c "Set :CFBundleVersion 42" Payload/myApp.app/Info.plist 
$ zip -qr myApp_done.ipa Payload 
```

当我将它加载到 iPhone 配置实用程序中时，它会加载，但是当我尝试在设备上安装它时，我得到“应用程序没有有效的签名”。

所以问题是，我做错了什么？

重新编译二进制文件是最后的选择，因为它需要对每个应用程序进行全面测试（毕竟，它是一个新的二进制文件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:59:17.303

我已经 fork 了一个名为 iReSign 的项目并为你编译了它。它相当简单，并且有效。让我知道事情的后续！[https://github.com/snapapps/iReSign](https://github.com/snapapps/iReSign)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:06:31.983

几年前我发现了另一个人这样做的信息......结果完全相同。我也无法在 Apple 开发者论坛上获得更多信息。

没有 100% 验证，但似乎这是不可能的。您无法在不生成阻止安装的证书错误的情况下更新 .ipa 文件的构建/版本号。

# progress - Appserver 如何从进度中捕获信息

> ID：15009069
> 
> 赞同：0
> 
> 时间：2013-02-21T17:55:05.353
> 
> 标签：progress

我正在搜索 ASBMAN 或 ProgressExplorerTools 在哪里捕获此信息，以便构建一些小型应用程序来引发警报、历史问题的收费信息等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:30:54.963

对于某些事情，虚拟系统表是您应该查看的地方。它们可以在文档中找到（从[http://communities.progress.com/pcom/index.jspa](http://communities.progress.com/pcom/index.jspa)下载）。

但是，那里并非所有东西都可用。基本上你只能在那里找到关于用户、数据库统计、数据库使用等的数据。

具体来说，您找不到有关 AppServer/WebSpeed 代理和代理等的任何信息。这些东西只能通过屏幕抓取其各自的查询命令来获得。这些的基本语法：

```
asbman -name <name> -query [-port <port unless default>] 
```

或者

```
wtbman -name <name> -query [-port <port unless default>] 
```

# php - 一个域网站下的多个应用程序最佳架构

> ID：15009072
> 
> 赞同：0
> 
> 时间：2013-02-21T17:55:14.447
> 
> 标签：php, architecture, laravel

我正在开发一个内部网站，其中包含大约 30 个单独的实用程序（将来会添加更多）。我正在尝试用 Laravel 做到这一点。这样做的最佳做法是什么？

以下是本网站的一些特点。

*   一些实用程序足够大，可以被视为单独的应用程序
*   有些很小，显示静态数据，无需用户交互，但与数据库交互
*   一些显示动态内容作为与用户交互的结果
*   有些是 CRUD 实用程序
*   每个实用程序都有自己的权限，每个用户都有不同的权限集
*   通过一次登录，用户应该能够访问他/她被允许使用的实用程序
*   每个实用程序与不同数据库中的不同表进行交互。它们有一些共同使用的表，但这种情况很少见

目前，我为每个实用程序都有单独的控制器、模型、视图，这使得 MVC 模式无用。我想将每个实用程序作为一个捆绑包，但是它违反了 DRYness（我可能不得不重复我的代码的某些部分）。

构建这个网站的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:22:11.263

将所有东西都放在一个单一的单体应用程序中可能暂时还不错，但它在未来可能会带来一些挑战。这与能够单独发布单个应用程序有关。

如果我从头开始设计你所拥有的东西，我会看到这样的东西：

1.  基本框架，可能是现有框架的扩展，添加了所有应用程序通用的组件。这个框架应该自己进行版本控制，并将链接到每个应用程序（使用类似 svn 外部的东西）。每个应用程序都可以选择他们正在使用的框架版本，以防一个或多个应用程序发生变化。

2.  单点登录，如果你有一个现有的 LDAP 服务器、域控制器、谷歌应用程序，我会用它来对任何应用程序进行基本身份验证。

3.  所有应用程序都可以访问相同的数据库或数据存储。

4.  您可能能够集中权限控制，但这取决于。这可能会变得相当笨拙，但同时它会给你一个地方来处理权限。也许允许每个应用程序发布它需要的权限。

# c# - 接口不能声明类型

> ID：15009073
> 
> 赞同：17
> 
> 时间：2013-02-21T17:55:29.067
> 
> 标签：c#

我在 API 中有一个抽象类，由另一个程序集中的方法使用。该类在其中定义了一个嵌套枚举，有点像这样：

```
abstract public class Thing
{
    public enum Status { Accepted, Denied, Pending };
    abstract public Status status { get; private set; }
    etc...
} 
```

然后我决定如果 Thing 是一个界面，那将是一个更好的设计。但我不能这样做：

```
public interface Thing
{
    enum Status { Accepted, Denied, Pending };
    Status status { get; }
    etc...
} 
```

这会产生错误消息“接口无法声明类型”。但是，如果我将枚举的定义移到接口之外，首先我会破坏封装（状态类型确实属于 Thing 并且本身没有意义），更重要的是我必须去修改代码许多其他使用它的程序集。你能想出什么解决办法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-21T17:56:49.817

如错误所示，您只需将定义拉到`Status`接口之外。我知道它破坏了封装，但实际上没有办法解决这个问题。我建议您将名称更改为`Status`表明与 - 有密切关系的东西`Thing`-`ThingStatus`应该可以解决问题。

```
enum ThingStatus { Accepted, Denied, Pending };

public interface Thing
{
    ThingStatus status { get; }
    etc...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T17:59:54.680

Oh yes, the solution is to use an abstract class if you need such implementation. Abstract classes are not a bad design and are certainly useful in situations like this.

If you insist on using interfaces, I'm afraid you'd have to go with the solution from p.s.w.g and break a rule or two (those are just guidelines anyway, really).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T18:07:06.860

`abstract`类和`interface`是不同的东西。`abstarct`类是抽象，高于您的域模型，接口是您的域实体的合同（行为）。您可以根据需要在解决方案中使用两者。在具体场景`status`中不是行为，它只是实体的状态。我认为抽象类是更可靠的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-06T03:26:29.557

您必须在命名空间内或命名空间外将类型声明为公共，然后在接口中声明此类型的方法

# php - 在没有json的ajax中使用唯一ID

> ID：15009075
> 
> 赞同：0
> 
> 时间：2013-02-21T17:55:31.130
> 
> 标签：php, jquery, html, ajax, json

ajax 请求功能在哪里：

```
success: function(data) {
   $('#totalvotes1').text(data); 
} 
```

和在哪里`<span id="totalvotes1">`，

但我需要它与唯一 id 一起工作：

```
success: function(data) { 
    $('#total_' + $(this).attr("id")). text(data); 
} 
```

和在哪里`<span id="total_vote_up_<?php echo $mes_id; ?>">`

和`<a id="vote_up_<?php echo $mes_id1; ?>">`

我无法弄清楚以下代码有什么问题。如果有人对 json 有一个简单的修复，我会尝试，但我不知道 json 是如何工作的。如果有人能帮我在这里调试这段代码，我会很高兴的

一般.js：

```
$(".vote").click(function() 
{
    var id = $(this).attr("id");
    var name = $(this).attr("name");
    var eData = $(this).attr("data-options");
    var dataString = 'id='+ id + '&' + eData ;
    var parent = $(this);

    if(name=='up')
    {
        $(this).fadeIn(200).html('');
        $.ajax({
            type: "POST",
            url: "up.php",
            data: dataString,
            cache: false,

            success: function(data) { 
                $('#total_' + $(this).attr("id")).text(data); 
            }
        });
    }

});
});
}); 
```

索引.php

```
<div id="main">
<div id="left">
    vote_up_<?php echo $mes_id1; ?>
<span class='up'><a id="vote_up_<?php echo $mes_id1; ?>" class="vote" name="up" data-options="key1=<?php echo $mes_id1;?>&key2=<?php echo $mes_id2;?>&key3=<?php echo $totalvotes1;?>&key4=<?php echo $totalvotes2;?>"> <img src="up.png" alt="Down" /></a></span><br />
<span id="total_vote_up_<?php echo $mes_id1; ?>"><?php echo $totalvotes1; ?></span><br />
</div>
<div id="message">
    <?php echo $message1; ?>
</div>
<div class="clearfix"></div>
 </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:59:06.983

识别和进入是你的朋友。

尝试做这样的事情：

```
// Before $.ajax
var that = this;
// Inside success
$('#total_' + $(that).attr("id")).text(data); 
```

大多数 jQuery 函数都会更改上下文，因此成功函数中的“this”并不指向“.vote”元素。您必须保存对元素的引用（通常使用“var that = this”之类的东西）并在成功函数中使用此引用。

编辑：

正如 Matt Burland 指出的那样，您已经保存了单击的元素引用（父级）和保存的 id，因此可以通过以下方式解决此问题：

```
$('#total_' + id).text(data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:01:36.350

```
$(".vote").click(function() 
{

var id = $(this).attr("id");
var name = $(this).attr("name");
var eData = $(this).attr("data-options");
var dataString = 'id='+ id + '&' + eData ;
var parent = $(this);

if(name=='up')
{

$(this).fadeIn(200).html('');
$.ajax({
type: "POST",
url: "up.php",
data: dataString,
cache: false,

success: function(data) { $('#total_'+id).text(data); } // here is the change

});

}

});
});
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T18:03:13.473

清理并修复。`$(this)`请注意，您可以执行一次，而不是继续执行，将其存储在变量中并再次使用它。这更有效，因为它避免了重复创建 jQuery 对象的开销（这就是这样`$(...)`做的）。

```
$(".vote").click(function() 
{
    var parent = $(this);   //Note: calling this parent is really confusing!
    var id = parent.attr("id");
    var name = parent.attr("name");
    var eData = parent.data("options");
    var dataString = 'id='+ id + '&' + eData ;

    if(name=='up')
    {

        parent.fadeIn(200).html('');
        $.ajax({
            type: "POST",
            url: "up.php",
            data: dataString,
            cache: false,

            success: function(data) { $('#total_' + id).text(data); }

        });

    }

}); 
```

注意：您的原件不起作用的原因是`this`AJAX 回调`this`的上下文与`.click`处理程序的上下文不同。当您执行回调时，`this`是您的浏览器窗口，而不是最初单击的元素。

那么，这是如何解决的呢？它利用了闭包。如果您有一个函数（如 AJAX 回调）嵌套在另一个函数中，则内部函数可以访问外部函数中定义的所有变量。因此，通过在变量中缓存您`id`的`id`变量，您可以在调用 AJAX 回调时访问它。更好的是，即使您在`.vote`调用原始点击的回调之前点击了另一个，它仍然会记住正确的值！

# javascript - 从 javascript 开始 Flash 播放

> ID：15009080
> 
> 赞同：0
> 
> 时间：2013-02-21T17:55:42.023
> 
> 标签：javascript, flash

我在我的页面中嵌入了这个 Flash：

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="180" height="76" id="SignUpTop1" align="middle">
<param name="movie" value="/Videos/SignUpTop1.swf" />
<param name="quality" value="high" />
<param name="bgcolor" value="#ffffff" />
<param name="play" value="false" />
<param name="loop" value="false" />
<param name="wmode" value="window" />
<param name="scale" value="showall" />
<param name="menu" value="false" />
<param name="devicefont" value="false" />
<param name="salign" value="" />
<param name="allowScriptAccess" value="sameDomain" />
<!--[if !IE]>-->
<object type="application/x-shockwave-flash" data="/Videos/SignUpTop1.swf" width="180" height="76">
    <param name="movie" value="/Videos/SignUpTop1.swf" />
    <param name="quality" value="high" />
    <param name="bgcolor" value="#ffffff" />
    <param name="play" value="false" />
    <param name="loop" value="false" />
    <param name="wmode" value="window" />
    <param name="scale" value="showall" />
    <param name="menu" value="false" />
    <param name="devicefont" value="false" />
    <param name="salign" value="" />
    <param name="allowScriptAccess" value="sameDomain" />
<!--<![endif]-->
    <div style="height:180px">&nbsp;</div>
<!--[if !IE]>-->
</object>
<!--<![endif]-->
</object> 
```

我想在页面加载 5 秒后开始播放 Flash 电影。所以，我这样做：

```
 setTimeout(function () {document.getElementById("SignUpTop1").play();}, 5000); 
```

并且，在 Chrome 中出现此错误：

未捕获的类型错误：对象 # 没有方法“播放”

从 Javascript 开始 Flash 播放的正确方法是什么？代码示例将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:10:47.680

尝试使用，

```
setTimeout(function () {var movie=eval(window.document[\'SignUpTop1\']); movie.play();}, 5000); 
```

或者

```
setTimeout(function () {var movie=eval(document[\'SignUpTop1\']); movie.play();}, 5000); 
```

# c# - 在 C# 中实现 FftPitchDetector

> ID：15009084
> 
> 赞同：0
> 
> 时间：2013-02-21T17:55:56.253
> 
> 标签：c#, fft, naudio, audio-processing

我已将 FftPitchDetector.cs 添加到我的项目中，但我不确定如何使用它。

我的代码：

```
private void sourceStream_DataAvailable(object sender, NAudio.Wave.WaveInEventArgs e)
        {

            if (waveWriter == null) return;

            byte[] buffer = e.Buffer;

            float sample32 = 0;
            int bytesRecorded = e.BytesRecorded;
            float[] floats = new float[buffer.Length];

            waveWriter.Write(buffer, 0, bytesRecorded);

            for (int index = 0; index < e.BytesRecorded; index += 2)
            {

                short sample = (short)((buffer[index + 1] << 8) |
                                        buffer[index + 0]);
                sample32 = sample / 32768f;
                sampleAggregator.Add(sample32);
            }
            floats = bytesToFloats(buffer);

            FftPitchDetector PitchDetect = new FftPitchDetector(sample32);
            **PitchDetect.DetectPitch(XXXXXX, XXXXXXXXXXX);**

           }

        private static float[] bytesToFloats(byte[] bytes)
        {
            float[] floats = new float[bytes.Length / 2];
            for (int i = 0; i < bytes.Length; i += 2)
            {
                floats[i / 2] = bytes[i] | (bytes[i + 1] << 8);
            }

            return floats;
        } 
```

我应该把哪些参数放在**PitchDetect.DetectPitch(XXXXXX, XXXXXXXXXXXX);** ??

如何使用 FftPitchDetector.cs 获取输入频率？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:12:04.880

我写了一篇附带的文章，解释了这段代码是如何工作的，可以在[这里](http://channel9.msdn.com/coding4fun/articles/AutotuneNET)访问。基本上，您传递的是一个样本数组，以及一个表示该数组中有多少样本的数字（以防它与数组的长度不同）。它以 Hz 为单位返回频率。但是，请记住，此代码只是尝试选择一个音符，以便计算出自动调音效果的音高偏移量，因此它仅查找特定范围内的值，实际上可能不会返回输入信号中最响亮的频率。

# asp.net - vb.net 视图状态与公共变量

> ID：15009085
> 
> 赞同：2
> 
> 时间：2013-02-21T17:56:16.367
> 
> 标签：asp.net, vb.net, class, variables, viewstate

这是aspx页面的一些代码。我不确定我应该使用公共变量还是 viewState

```
Partial Class madeUpName
 Inherits System.Web.UI.Page
  Public vin As String = ""
  Public stk As String = ""

 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
  'inside of here i use the variables
 end sub

 Protected Sub Page_Unload(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Unload
  'inside of here I also use the same variables
 end sub 
```

我应该在我的类中为页面使用 viewState 变量还是公共变量？似乎他们都实现了同样的目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:02:23.367

`ViewState`如果您希望值在回发之间保持不变，请使用。

如果值只需要在页面的生命周期内存在，那么常规变量就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:09:34.943

`ViewState`用于将 WebForm 的状态保持在`PostBacks`. 如果您希望将 WebForm 中的值获取到后面的代码中，请使用`ViewState`值，否则您可以使用`SessionState`或 根据您尝试访问的数据，您可以使用`Cookies`甚至`QueryString`. `PostBack`除非您将它们的值保存在`ViewState`或`SessionState`等中，否则公共变量将被重置。

更多信息：

[了解 Asp.Net ViewState](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

[在回发asp.net之间保存变量的最佳方法？](https://stackoverflow.com/questions/10138480/best-way-to-save-varibles-between-postbacks-asp-net)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T18:41:19.600

如果信息不是很敏感，您可以将它们存储在隐藏输入中：

`<input type="hidden" name="myvar" value="123" />`

我倾向于将其放入`ViewState`. 此外，您可以创建访问器，以便以后轻松访问这些值（请原谅我的 C# 语法）：

```
public int MyValue
{
    get { return int.Parse(Request["myvar"]); }
} 
```

当你可以在你的类中使用它就像一个属性。

否则你可以把东西放在`ViewState`（类似地）

```
public int MyValue
{
    get { return int.Parse(ViewState["myvar"]); }
} 
```

# r - 用 ggplot2 用两种不同的颜色绘制一条线

> ID：15009087
> 
> 赞同：3
> 
> 时间：2013-02-21T17:56:19.493
> 
> 标签：r, ggplot2, linear-regression

我正在尝试绘制一组数据`ggplot2`。数据分为两类。我想用一条线性回归线将它们绘制在一起。但是，我希望两组中的每一个都以不同的颜色绘制。这是我得到的：

![在此处输入图像描述](../Images/6b84c5d84289532b97e1f4d5aece48b7.png)

这是我得到它的方法：

```
library(ggplot2)
dframe1 <- structure(list(a = 1:6, b = c(5, 7, 9, 10.5, 11.7, 17), category = structure(c(1L, 
1L, 1L, 2L, 2L, 2L), .Label = c("a", "b"), class = "factor")), .Names = c("a", 
"b", "category"), class = "data.frame", row.names = c(NA, -6L
))
qplot(a, b, data = dframe1, colour = category) + geom_smooth(method = lm) 
```

如何使绘图仅对所有数据使用一条回归线？

*注意：除此之外，我很困惑为什么这些行中只有一条显示了置信区间，但这不是我当前问题的重点*。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T18:02:41.807

The equivalent of @Roland's answer, using `ggplot` instead of `qplot`

```
ggplot(dframe1, aes(x = a, y = b)) +
    stat_smooth(method = lm) +
    geom_point(aes(color = category)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T18:00:49.120

Just modify the aesthetics to exclude the grouping factor:

```
qplot(a, b, data = dframe1, colour = category) + 
  geom_smooth(aes(colour=NA),method = lm) 
```

![enter image description here](../Images/b93ab94e1a557a5b27b266490472221c.png)

# oracle - 创建 32 位 ODP.Net OracleConnection 对象非常慢

> ID：15009090
> 
> 赞同：4
> 
> 时间：2013-02-21T17:56:32.857
> 
> 标签：oracle, odp.net

我正在使用 Oracle ODP.Net 11.2.0.2 提供程序连接到 Oracle 数据库。当我将以下代码作为控制台应用程序运行时，OracleConnection 对象的创建需要 2 分钟以上：

```
using System;
using Oracle.DataAccess.Client;

namespace OracleConnectionTest
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Creating connection...");
            OracleConnection conn = new OracleConnection("Data Source=mydatabase;User Id=myuserid;Password=mypassword");

            Console.WriteLine("Opening connection...");
            conn.Open();

            Console.WriteLine("Closing connection");
            conn.Close();

            Console.WriteLine("Done");
        }
    }
} 
```

无论我是从命令行还是从 Visual Studio 运行控制台应用程序，都会出现缓慢的创建。但是，如果我在启用调试器的情况下运行它（使用 F5），它会运行得非常快。如果我将 .Net 项目编译为 64 位（并使用 64 位 Oracle 客户端），它会运行得很快。如果我在 Windows 服务应用程序中创建连接并启动服务，它会快速连接。一位同事能够在安装相同的 32 位客户端的情况下运行相同的代码，并且对他来说运行速度很快。

我的环境必须有一些独特的东西导致速度变慢。我在哪里可以确定正在发生的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T19:59:14.650

尝试在您的 Oracle 主目录中创建“log\diag\clients”目录结构。请参阅[此博客文章](http://www.geoffhudik.com/tech/2011/8/19/slow-oracleconnection-creation.html)- 博主遇到了与您相同的问题，并通过创建该目录结构解决了它。

# mysql - 在多个字段上进行 Ruby 搜索

> ID：15009092
> 
> 赞同：0
> 
> 时间：2013-02-21T17:56:34.217
> 
> 标签：mysql, ruby-on-rails, ruby

在我的 Rails 应用程序中，我需要通过表中的某个字段进行搜索，但主要问题是我必须这样做：如果我在视图 A 中选择了选择字段，我必须仅按 A 条件搜索，如果 A 和 B 都按A和B ...现在我有：

控制器

```
@pre_oils = Oil.by_brand(params[:oilbrand]).by_oiloiliness(params[:oiloiliness]).by_structure(params[:oilstructure]).by_size(params[:oilsize]) 
```

模型

```
def self.by_oiloiliness(oiloiliness)
    if oiloiliness
      where("description LIKE ?", "%#{oiloiliness}%")
    else
      scoped
    end
  end

  def self.by_brand(brand)
    if brand
      where("manufacturer LIKE ?", "%#{brand}%")
    else
      scoped
    end
  end

  def self.by_structure(structure)
    if structure
      #where("structure LIKE ?", "%#{structure}%")
      where("description LIKE ?", "%#{structure}%")
    else
      scoped
    end
  end

  def self.by_size(size)
    if size
      where("capacity LIKE ?", "#{size}")
    else
      scoped
    end
  end 
```

但它正在搜索非常非常奇怪，一次是工作，另一次没有......什么是坏的？以及如何仅按这些字段进行搜索，这些字段是在视图中选择的？

（也是 ruby​​ 1.9.3 rails 3.2.8）

也许在所有查询中使用 find 获取然后拆分它们并删除重复项？

**更新**

```
 oil = Oil.brand_like(params[:oilbrand])
    oil = Oil.description_like(params[:oiloiliness])
    oil = Oil.description_like(params[:oilstructure])
    oil = Oil.capacity_eq(params[:oilsize]) 
```

**更新2**

@pre_oils = Oil.search(:manufacturer_like => params[:oilbrand], :description_like => params[:oiloiliness], :description_like => params[:oilstructure], :capacity_eq => params[:oilsize])

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:01:47.453

For this kind of things there are many gems available. You can go through gems like [meta_search](https://github.com/ernie/meta_search), [searchlogic](https://github.com/binarylogic/searchlogic) to perform your search.

Once you install `meta_search` you can do like this:

When you have `form` with fields like following:

```
 <%= f.text_filed :capacity_eq %>
 <%= f.text_field :description_like %> 
```

You will get params like this:

```
 params => {"description_like" => "xyz", "capacity_eq" => "21"}

 Oil.search(params)  #To get your results 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:01:18.217

Use ActiveRecord

define db abstract class

```
require 'active_record'
class MyDatabase < ActiveRecord::Base
  self.abstract_class = true
  establish_connection(
    #...
    :username => "",
    :password => "",
    :url => "")
end 
```

define your table model

```
require './my_database'
class Oil < MyDatabase
  self.table_name = 'oils'
end 
```

Then use it

```
Oil.where('brand LIKE ? and oiloilness LIKE ?', params[:oilbrand], params[:oiloilness]) 
```

# android - SmartWatch 扩展启动

> ID：15009094
> 
> 赞同：1
> 
> 时间：2013-02-21T17:56:43.163
> 
> 标签：android, sony-smartwatch

从我的扩展程序中，我可以使用以下代码启动呼叫处理扩展程序：

```
 Intent i1 = new Intent("com.sonyericsson.extras.aef.control.START_REQUEST");
  i1.putExtra("aea_package_name", "com.sonyericsson.extras.liveware.extension.call");
  i1.setPackage("com.sonyericsson.extras.smartwatch");
  mContext.sendBroadcast(i1, "com.sonyericsson.extras.liveware.aef.HOSTAPP_PERMISSION"); 
```

但是我不能以同样的方式启动我自己的扩展，也不能启动任何其他第三方扩展：

```
Intent i2 = new Intent("com.sonyericsson.extras.aef.control.START_REQUEST");
  i2.putExtra("aea_package_name", "eir.log");
  i2.setPackage("com.sonyericsson.extras.smartwatch");
  mContext.sendBroadcast(i2, "com.sonyericsson.extras.liveware.aef.HOSTAPP_PERMISSION"); 
```

当从不同的应用程序调用 i2 意图时，它可以正常工作，而不是从扩展程序调用。

我很困惑。呼叫处理扩展程序是否从主机应用程序接受了一些特殊处理，或者是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T12:20:18.727

I found two ways to solve this issue:

1) Trigger stopping of the current extension before invoking the other. This happens to work with the latest SmartWatch 2, but as far as I remember, it didn't work on the original SmartWatch.

What is safer to do, in case you're starting your own extensions:

2) Define a custom intent which the extension you want to start would receive (that's, of course, done in the Manifest file); then broadcast that intent from your other extension. I chose this way, also because it enables me to pass data to the extension.

Vote up, if you find this solution useful :-)

# javascript - 在 Javascript 中播放声音

> ID：15009096
> 
> 赞同：1
> 
> 时间：2013-02-21T17:56:49.880
> 
> 标签：javascript, html, audio

我正在使用这段代码通过 javascript 播放声音

```
 var snd = new Audio("flip.mp3"); // buffers automatically when created
snd.play(); 
```

一切都很好，但我想多次播放声音，所以每次用户点击一个对象时，都会播放声音。这工作了大约 20 次，但声音根本不播放。有谁知道问题可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:20:35.020

您应该全局声明：

```
var snd = new Audio("flip.mp3"); 
```

然后在单击时调用函数中的播放：

```
function playSound() {
    snd.play();
} 
```

# xml - 所需的 perl REST-API 输出

> ID：15009100
> 
> 赞同：0
> 
> 时间：2013-02-21T17:56:55.147
> 
> 标签：xml, perl, rest

我正在使用 Perl [Apache2::REST](https://metacpan.org/module/Apache2%3a%3aREST)模块，返回数据的标准方法是发出`$resp->data()`并分配一个值。我有这样的东西

```
my $text = {
    'tag1' => 4,
    'tag2' => 5,
    'tag3' => 6,
};

$resp->data()->{'text'} = {map { $_ => [$text ->{$_}] } keys %$text}; 
```

这给了我这样的回应

```
<response message="" status="200">
  <data name="text">
    <tag1>4</tag1>
    <tag2>5</tag2>
    <tag3>6</tag3>
  </data>
</response> 
```

**是否可以将结果响应更改为以下内容**

```
<response message="" status="200">
  <content name="text">
    <tag1>4</tag1>
    <tag2>5</tag2>
    <tag3>6</tag3>
  </content>
</response> 
```

**我需要设置/发布什么？** 我试图改变响应输出 - 无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:46:24.967

我通过检查模块代码找到了解决方案（或者确切地说是我的同事之一）。

REST-API 接受用户选择的任何哈希键：

```
delete $resp->{data}; # Deletion of the defaulr data element
$resp->{content}->{'text'} = {map { $_ => [$text ->{$_}] } keys %$text}; 
```

# c++ - 线程安全 MPI 通信

> ID：15009106
> 
> 赞同：2
> 
> 时间：2013-02-21T17:57:19.687
> 
> 标签：c++, multithreading, thread-safety, mpi, mutex

在我最近了解到的一个[相关问题中，必须非常小心地使用 MPI 与多个线程通信。](https://stackoverflow.com/questions/14836560/thread-safety-of-mpi-send-using-threads-created-with-stdasync)由于我使用的实现不支持`MPI_THREAD_MULTIPLE`，所以我只是`MPI::COMM_WORLD`用`std::lock_guard<std::mutex>`.

我现在的问题是：这是矫枉过正吗？具体来说：我可以在我`Send`的确切时间`Recv`吗？

我尝试了两个`std::mutex`，一个用于发送，一个用于接收。在我的测试机器上，我进行了几次测试运行而没有错误，但这不能保证，这可能只是巧合..

补充：现在 - 通过数百次测试运行 - 实际上发生了一个糟糕的分段错误，但我不能 100% 确定这是否是由于同时发送/接收。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T06:05:35.190

您使用的是哪种 MPI 线程模式？除非您使用 ，否则使用互斥锁是不够的`MPI_THREAD_SERIALIZED`，在这种情况下，您需要在所有 MPI 调用周围使用单个互斥锁。如您所见，这确实使它们序列化。如果你不使用`MPI_Init_thread`with `MPI_THREAD_SERIALIZED`（即你正在使用`MPI_Init`或一些较低的线程设置），即使使用互斥锁也是不够的；有关确切限制，请参阅 MPI 标准。如果您使用`MPI_THREAD_SERIALIZED`，则规则是您不能同时输入来自多个线程的 MPI 调用，无论它们是相同的操作还是不同的操作。

# sql - 如何根据主表从交易表中查询客户名称

> ID：15009108
> 
> 赞同：0
> 
> 时间：2013-02-21T17:57:26.080
> 
> 标签：sql, ms-access

我想根据交易表的三列从主表中查询客户名称。

### 其他详情

我在 access 2010 中有两个表（从 dbf 文件导入）：

**主表**

```
+------------+-----------------+
| Field      | Sample data     |
+------------+-----------------+
| type       | G or S or C     |
| MASTERcode | 10 or 20 or 30  |
| SUBcode    | A1 or b1 or c1  |
|Customername|   xyz ind       |  
| Address    |    data         |
| OTHERS     | OTHER DATA      |
+------------+-----------------+ 
```

客户名称将具有与其类型相关的三个字段| 主码 | 代码

**事务表**

```
+------------+-----------------+
| Field      | Sample data     |
+------------+-----------------+
| type       | G or S or C     |
| MASTERcode | 10 or 20 or 30  |
| SUBcode    | A1 or b1 or c1  |
| TRN DATE   | DATE            |  
| TRN AMOUNT | AMOUNT          |
| OTHERS     | OTHER DATE      |
+------------+-----------------+ 
```

事务表有三个字段类型 | 主码 | 与其他数据的子代码。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:07:20.960

目前尚不完全清楚您想要的结果是什么，但您可以为此做一个简单`JOIN`的事情：

```
SELECT T.*,              --list of the columns from the Transaction table
       M.Customername
FROM TRANSACTION_TABLE AS T
INNER JOIN MASTER_TABLE AS M
    ON T.type = M.type AND T.MASTERcode = M.MASTERcode
    AND T.SUBcode = M.SUBcode 
```

# macos - 查找文件夹中的 PDF 数量

> ID：15009109
> 
> 赞同：0
> 
> 时间：2013-02-21T17:57:28.970
> 
> 标签：macos, cocoa, foundation

我在应用程序中有一个按钮，单击该按钮会打开一个对话框。然后用户选择一个文件夹，单击确定，然后应用程序会显示该文件夹中 PDF 文件的数量。

我在下面实现了以下代码。如何扫描文件夹中的 PDF 文件数量？

```
- (IBAction)selectPathButton:(NSButton *)sender {

    // Loop counter.
    int i;

    // Create a File Open Dialog class.
    NSOpenPanel* openDlg = [NSOpenPanel openPanel];

    // Set array of file types
    NSArray *fileTypesArray;
    fileTypesArray = [NSArray arrayWithObjects:@"pdf", nil];

    // Enable options in the dialog.
    [openDlg setCanChooseFiles:YES];
    [openDlg setAllowedFileTypes:fileTypesArray];
    [openDlg setAllowsMultipleSelection:TRUE];

    // Display the dialog box.  If the OK pressed,
    // process the files.
    if ( [openDlg runModal] == NSOKButton ) {

        // Gets list of all files selected
        NSArray *files = [openDlg URLs];

        // Loop through the files and process them.
        for( i = 0; i < [files count]; i++ ) {            
        }

        NSInteger payCount = [files count];
        self.payStubCountLabel.stringValue = [NSString stringWithFormat:@"%ld", (long)payCount];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T06:58:27.523

获取路径下的文件和目录

```
[NSFileManager]- (NSArray *)contentsOfDirectoryAtPath:(NSString *)path error:(NSError **)error; 
```

获取路径和子路径下的文件和目录

```
[NSFileManager]- (NSArray *)subpathsOfDirectoryAtPath:(NSString *)path error:(NSError **)error; 
```

然后过滤掉pdf文件。

```
NSMutableArray *pdfFiles = [NSMutableArray array];
for(NSString *fileName in files) {
    NSString *fileExt = [fileName pathExtension];
    if([fileExt compare:@"pdf" options:NSCaseInsensitiveSearch] == NSOrderSame) {
        [pdfFiles addObject:fileName];
    }
} 
```

现在你想要的是 pdfFiles。

```
NSUInteger pdfFilesCount = [pdfFiles count]; 
```

如果您只想计算 pdf 文件的数量，只需使用带有 forin 循环的变量即可。

# python - 如何在 Tkinter 中的一个按钮中包含图像+文本

> ID：15009117
> 
> 赞同：13
> 
> 时间：2013-02-21T17:58:02.593
> 
> 标签：python, image, button, text, tkinter

我正在尝试创建一个按钮，该按钮将包括一个左对齐的图像和一个右对齐的文本。我只想通过参数“文本”来更改文本，而不是通过修改整个图像。这有可能吗？

这是一个简单的例子，我的意思。

[http://img651.imageshack.us/img651/3776/previewrv.png](http://img651.imageshack.us/img651/3776/previewrv.png)

希望我解释得很好

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-21T18:33:02.387

查看`compound`标签的选项。它允许您指定标签与文本的关系（上、下、左、右、无）。

例如：

```
import Tkinter as tk

class View(tk.Frame):
    def __init__(self, *args, **kwargs):
        tk.Frame.__init__(self, *args, **kwargs)
        self.image = tk.PhotoImage(file="somefile.gif")
        b = tk.Button(self, text="Hello, world", image=self.image, compound="left")
        b.pack(side="top")

if __name__ == "__main__":
    root = tk.Tk()
    view = View(root)
    view.pack(side="top", fill="both", expand=True)
    root.mainloop() 
```

# javascript - JavaScript 使用数组键/值对附加到对象

> ID：15009119
> 
> 赞同：5
> 
> 时间：2013-02-21T17:58:06.173
> 
> 标签：javascript, jquery, arrays, object

我有一个动态构建的对象示例：

```
obj = {};
obj.prop1 = 'something';
obj.prop2 = 'something';
obj.prop3 = 'something'; 
```

有了这个，我现在需要从数组中获取一个项目并使用它来定义“propX”的等价物及其值

我想如果我做了类似的事情

```
obj.[arr[0]] = some_value; 
```

那，那对我有用。但我也认为我得到的错误不是语法错误。“. 运算符后缺少名称”。我明白，但我不知道如何解决它。最终目标是使用数组项的值作为对象的属性名称，然后用另一个也被传递的变量定义该属性。我的问题是，我怎样才能实现它，以便对象的附件将被视为

```
obj.array_value = some_variable; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T17:58:54.100

删除点。采用

```
obj[arr[0]] = some_value; 
```

我建议您阅读MDN 中的[使用对象](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T17:59:10.177

你可以试试

```
obj[arr[0]] = some_value; 
```

即放下点:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T17:59:47.817

你几乎是对的，但你只需要删除 . 从线：

> obj.[arr[0]] = some_value;

应该读

> obj[arr[0]] = some_value;

# java - 使在线广播应用程序在流媒体中更快

> ID：15009121
> 
> 赞同：0
> 
> 时间：2013-02-21T17:58:06.563
> 
> 标签：java, android

您好，我已经制作了一个广播应用程序，其中流媒体是从网络完成的

我的源代码是

当用户单击按钮时，将执行以下代码

```
 if (!NotifyService.iSserviceRunning) {
            new PlayRadio().execute("");
        } 
```

// 用于启动服务和创建进度条的 AYSNC 类

```
 class PlayRadio extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
        return "";
    }

    @Override
    protected void onPostExecute(String result) {
        try {
            startService(new Intent(RadioActivity.this, NotifyService.class));
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        try {
            PD = ProgressDialog.show(RadioActivity.this, "Tuning...", "Please Wait...");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

//现在服务类将是

```
 public class NotifyService extends Service {

private static String RADIO_STATION_URL;
public static  MediaPlayer player;
public static boolean iSserviceRunning = false;
@Override
public IBinder onBind(Intent intent) {
    return null;
}

@Override
public void onCreate() {
    super.onCreate();
    RADIO_STATION_URL = getResources().getString(R.string.streamurl);
    nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    initializeMediaPlayer();
    startPlaying();
    iSserviceRunning = true;
}

@Override
public void onDestroy() {
    super.onDestroy();
    nm.cancel(R.string.service_started);
    stopPlaying();
    initializeMediaPlayer();
    iSserviceRunning = false;
}

private void startPlaying() {
    player.setOnPreparedListener(new OnPreparedListener() {
        public void onPrepared(MediaPlayer mp) {
            player.start();

        }
    });
    new PrepareTask().execute();
}

private void stopPlaying() {
    if (player.isPlaying()) {
        player.pause();
        player.release();
    }
}

private void initializeMediaPlayer() {
    player = new MediaPlayer();

    try {
        player.setDataSource(RADIO_STATION_URL);
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

}

private class PrepareTask extends AsyncTask<Integer, Integer, Integer> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

    protected void onPostExecute(Integer result) {
        if(RadioActivity.PD!=null){
            if(RadioActivity.PD.isShowing()){
                RadioActivity.PD.dismiss();             
            }
        }
    }

    @Override
    protected Integer doInBackground(Integer... arg0) {
        try {
            player.prepare();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }
} 
```

}

我做错了吗，因为我的客户说应用程序加载时间过长..他告诉我他有很多这样的应用程序加载速度比我的应用程序快

任何人都可以建议我在我的代码中做错了什么，所以需要很多时间吗？

# vb.net - 使用 lambda 或 linq 驱动的查询来获取 WCF 分页结果

> ID：15009124
> 
> 赞同：0
> 
> 时间：2013-02-21T17:58:19.860
> 
> 标签：vb.net, wcf, linq, lambda

我对 WCF 相当陌生。我正在尝试使用 linq 或 lambda 作为分页响应从 WCF 服务检索查询，但没有得到它。我的代码如下：

```
Dim uri As New Uri(My.Settings.Host)
Dim context As New PMXMigrationEntities(uri)
Dim token As DataServiceQueryContinuation(Of APARTMNT) = Nothing
Dim list As New List(Of APARTMNT)

Try
    ' Execute the query for all apartments and get the response object.'
    Dim response As QueryOperationResponse(Of APARTMNT) = _
        CType(context.APARTMNTs.Execute(), QueryOperationResponse(Of APARTMNT))

    ' With a paged response from the service, use a do...while loop '
    ' to enumerate the results before getting the next link. '
    Do
        ' If nextLink is not null, then there is a new page to load.'
        If token IsNot Nothing Then
            ' Load the new page from the next link URI.'
            response = CType(context.Execute(Of APARTMNT)(token),  _
            QueryOperationResponse(Of APARTMNT))
        End If

        ' Enumerate the apartments in the response.'
        For Each a As APARTMNT In response
            list.Add(a)
        Next

        ' Get the next link, and continue while there is a next link.'
        token = response.GetContinuation()
    Loop While token IsNot Nothing
Catch ex As DataServiceQueryException
    Throw New ApplicationException( _
            "An error occurred during query execution.", ex)
End Try

Return list 
```

我想做类似以下的事情：

```
CType(context.APARTMNTs.Where(Function(a) a.city.Contains(cityStr)).Execute(), QueryOperationResponse(Of APARTMNT)) 
```

和类似的东西：

```
CType(context.APARTMNTs.Where(Function(a) a.city = cityStr).Execute(), QueryOperationResponse(Of APARTMNT)) 
```

现在，我已经读到在这种情况下，linq 或 lambda 被转换为不支持 Contains 函数的 OData 查询，我的替代方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:25:56.700

OData 不支持集合上的通用 Contains 运算符（尽管使用 any/all 不再完全正确）。但是在字符串上（假设 a.city 是一个字符串属性），您可以使用 indexof 代替。例如：

```
http://services.odata.org/Northwind/Northwind.svc/Customers?$filter=indexof(CompanyName, 'Futt') ne -1 
```

这个查询基本上等同于 CompanyName.Contains("Futt")。在 LINQ 中，这看起来像：

```
context.Customers.Where(Function(c) c.CompanyName.IndexOf("Futt") <> -1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:58:00.610

经过长时间的研究和死胡同，我想通了。这是将 DataServiceQuery 转换为 QueryOperatorResponse 的问题

```
var query = (DataServiceQuery<TENANT>)context.TENANTs.Where(a => a.name.ToLower().Contains("jeff"));

// Execute the query for all tenants and get the response object.
   QueryOperationResponse<TENANT> response =
               (QueryOperationResponse<TENANT>)query.Execute() as QueryOperationResponse<TENANT>; 
```

# iphone - 从 UITableView 移动到第二个视图时应用程序崩溃

> ID：15009126
> 
> 赞同：0
> 
> 时间：2013-02-21T17:58:37.223
> 
> 标签：iphone, ios, objective-c, uitableview, segue

我有一个 UITableView 和第二个 web 视图，我希望在触摸单元格时移动到它们。

我的问题是程序崩溃了

```
'NSInvalidArgumentException', reason: 'Receiver (<ViewController: 0x1e583890>) has no segue with identifier 'testing''
*** First throw call stack:
(0x326342a3 0x3a35197f 0x34647e31 0x78633 0x344fe28d 0x34580f81 0x32f42277 0x326095df 0x32609291 0x32607f01 0x3257aebd 0x3257ad49 0x361512eb 0x34490301 0x7724f 0x3a788b20)
libc++abi.dylib: terminate called throwing an exception 
```

我已经查看了此处发布的每个解决方案、教程，但仍然看不出有什么问题。

我是故事板和 iOS 的新手

这是我的一些代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    [self performSegueWithIdentifier:@"testing" sender:self];
} 
```

是的，我确实有一个名为“测试”的 segue

我尝试注释掉 [self performSegueWithIdentifier:@"testing" sender:self]; 并使用

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

if([segue.identifier isEqualToString:@"testing"]){
   NSLog(@"identifier is equal");
    webviewViewController *ViewController =segue.destinationViewController;
} 
```

但是当按下单元格时，什么也没有发生，并且@“identifier is equal”没有出现在日志中。

希望这可以帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:54:27.237

好的，我找到了问题，我在应用程序 delgate 文件中的 ViewController 中添加了一个导航控制器，didfinishlaunchingithoptions，我忘记了这一点。

我已将其删除，自然一切正常

非常感谢所有的答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:03:27.187

它告诉你没有名为“testing”的segue。请确定，如果您提到了segue，请检查拼写。

否则，如果您没有提到 segue，请通过单击 segue 并在检查器窗口中为其写入名称来提及它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:04:56.560

我以前遇到过这个错误，实际上[这个答案在这里帮助了我](https://stackoverflow.com/a/12904447/1219698)。

我重命名了我的 Storyboard，却忘记在其他必要的地方进行更改。确保您的所有信息都正确匹配，并且您使用的是正确版本的 Storyboard。

完成后，请确保在您的模拟器或设备上卸载该应用程序并重试。

# c++ - Qt QProgressBar - 对齐文本

> ID：15009132
> 
> 赞同：10
> 
> 时间：2013-02-21T17:59:02.343
> 
> 标签：c++, qt4, qprogressbar

有没有人对如何在 Qt 中对齐 QProgressBar 上的状态文本有任何建议？默认情况下，在 Windows 中，它显示在栏的右侧，但我更愿意将其放置在栏上方或栏本身内，而不必扩展对象并自己实现状态标签。

截图如下：

![在此处输入图像描述](../Images/b007f254bf640b545bd369fd7296212b.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-22T10:57:15.617

另一种方法是通过以下方式设置状态文本的对齐方式[`QProgressBar::setAlignment`](http://doc-snapshot.qt-project.org/4.8/qprogressbar.html#alignment-prop)：

```
barProgress_->setAlignment(Qt::AlignCenter); 
```

![进度条屏幕截图](../Images/f97432ed767d0469bf4919df28ad9d1c.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T09:58:07.183

您可以使用样式表来修改进度条的外观。这是一个例子：http: [//qt-project.org/doc/qt-4.8/stylesheet-examples.html#customizing-qprogressbar](http://qt-project.org/doc/qt-4.8/stylesheet-examples.html#customizing-qprogressbar)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T10:32:56.397

感谢上面vipw的建议，我通过一个简单的setStyleSheet（）调用实现了我想要的效果，如下所示（目前没有为此应用程序定义电子表格，它实际上已经完成，所以调用这个方法将节省我不得不包括一个全新的 css 文件）：

barProgress_->setStyleSheet(QString::fromUtf8("text-align: center;"));

结果是：

![在此处输入图像描述](../Images/1a36199fdbc1b7f226f24457e3bafd1b.png)

无论如何感谢您的帮助。

# actionscript-3 - 使用带有 htmlloader 的用户默认浏览器

> ID：15009133
> 
> 赞同：3
> 
> 时间：2013-02-21T17:59:04.963
> 
> 标签：actionscript-3, apache-flex, air

所以我在一个通过 google / youtube 进行身份验证的 air 应用程序中编写了代码。代码本身按预期工作。问题是，当我使用 HTMLLoader 打开身份验证窗口时，它使用机器的默认浏览器（mac 上的 safari，即 win），而不是用户使用的默认浏览器。因此，用户在其默认浏览器上的现有会话是无用的。我已经添加了代码来解释所有场景，但我想有一种方法可以使用用户首选的浏览器并从登录会话等中受益。

我找到并尝试了属性 navigateInSystemBrowser，这听起来没有帮助……有趣的是，这使浏览器停止工作。浏览器窗口中的链接不再起作用。

有谁知道这是否可能？我在这里错过了一些简单的东西吗？

# python - Convert date to month and day python?

> ID：15009145
> 
> 赞同：0
> 
> 时间：2013-02-21T17:59:42.343
> 
> 标签：python

if I have an array of dates:

```
["2012-1-1", "2012-1-3","2012-5-3"] 
```

I want to be able to get a result list of:

```
["January 2012", "May 2012"] 
```

What is the best way to do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:03:43.320

```
[datetime.datetime.strptime(d, '%Y-%m-%d').strftime("%B %Y") for d in my_list] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:08:14.997

如果您想按日期时间排序并剔除唯一性，我将分三部分执行此操作：

```
dates = [datetime.datetime.strptime(d, '%Y-%m-%d') for d in my_list]
dates.sort()
string_dates = [d.strftime("%B %Y") for d in dates]
## now we'll cull the list of duplicates
import itertools
[ grouped[0] for grouped in itertools.groupby(string_dates) ] 
```

# python - python distutils include shell scripts in module directory

> ID：15009146
> 
> 赞同：3
> 
> 时间：2013-02-21T17:59:44.590
> 
> 标签：python

What is the best way to include a 'helper' shell script in setup.py that is used by a python module? I don't want to include is as a script since it is not run on it's own.

Also, data_files just copies things in the the install path (not the module install path) so that does not really seem like the best route.

I guess the question is: is there a way of including non-python (non-C) scripts/binaries in a python distutils package in a generic way?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-07-10T23:21:54.063

将其包含在 MANIFEST.in 中，如下所示：

`include mycode/myscript.sh`

这是一个使用帮助脚本的示例 Python 包：

[https://github.com/pminkov/kubeutils](https://github.com/pminkov/kubeutils)

看看这个文件，它运行 shell 脚本： [https ://github.com/pminkov/kubeutils/blob/master/kubeutils/kutils.py](https://github.com/pminkov/kubeutils/blob/master/kubeutils/kutils.py)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-04T18:31:18.013

我认为没有办法打包 shell 脚本。

对于我的一个项目，我特别需要一个 shell 脚本作为子进程的参数传递给另一个工具，该工具只能使用 shell 脚本，而不是 python 脚本。

所以我终于通过让 python 即时编写 myscript.sh 来解决它。

它看起来像这样：

```
bash_script_name = cwd + "/myscript.sh"
bash_script_file_obj = open(bash_script_name, 'w')
bash_script_file_obj.write(text_of_myscript)
bash_script_file_obj.close()
os.chmod(bash_script_name, 0755)

subprocess.call([another_tool, bash_script_name])

os.remove(bash_script_name) 
```

它不是很优雅，但它确实有效。如果您可以选择用 Python 编写脚本，我肯定会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-14T23:32:57.150

另一个问题可能是包含 Bash 脚本的此类 pypi 包可能无法在例如 Windows 上正确运行？

# php - Laravel Package Authentication

> ID：15009147
> 
> 赞同：0
> 
> 时间：2013-02-21T17:59:45.237
> 
> 标签：php, laravel

I have a Laravel 4 web application where users can login and edit their profile.

I've created an API package that allows the user to login with their username/password and get a json dump of their profile.

Now, I don't want the API users to use their username/password but instead to use an app_id / app_key from another table in the database.

How to accomplish this with Laravel 4? It would be fantastic if I can create an Auth driver that works the same way `Auth:attempt()` would so I don't have to change any of my business logic, but I don't know how to inject a new Auth service provider that ONLY works inside of the API package.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:47:08.217

您可以根据需要更改身份验证设置。您可以像这样在 filters.php 中创建一个过滤器：

```
Route::filter('api_auth', function()
{
   Config::set('auth.table', 'api_table');
   // you can even change your model
   // Config::set('auth.model', 'Apiuser');
}); 
```

并在 routes.php 中的任何路由之前使用，如下所示：

```
Route::get('user', array('before' => 'api_auth', function()
{
   // some stuff
})); 
```

因此，您可以使用不同的设置并做您想做的事。

*顺便说一句，我在 Laravel 3 尝试过这种方法，它奏效了。我查看了 laravel 4 的文档，我看不到任何阻止这项工作的东西。*

# excel - Formula with obviously correct syntax still returns an input error

> ID：15009155
> 
> 赞同：3
> 
> 时间：2013-02-21T18:00:08.657
> 
> 标签：excel, excel-formula

I'm totally stuck - the below array formula copied from the respected source:

```
=SUM(LARGE(A:A,ROW(INDIRECT(“1:10”)))) 
```

produces an error during the input:

```
The formula you typed contains an error. 
```

Sure thing I press `CTRL`+`SHIFT`+`ENTER`. Obviously that should be something too simple to notice. TOO simple for me)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T18:02:41.010

I'm not 100% sure, but as soon as you copied the formula from somewhere (perhaps web or PDF or whatever) - **check the quotes**!

Many times I got stuck with exactly the same: double quotes with codes 147 & 148 look way too similar to "plain" ones, i.e. `CHAR(34)` which are generated in Excel while typing. However, only the last ones are acceptable for using in formulas. So..... check these first! ;)

# php - Why does MYSQL Server "go away" under PHP 5.4.11, but not under 5.3.17?

> ID：15009156
> 
> 赞同：2
> 
> 时间：2013-02-21T18:00:09.030
> 
> 标签：php, mysql, mysqli, installation

I've migrated to PHP 5.4.11 which works except that it'll give "MySQL server has gone away" errors in long maintenance scripts. PHP 5.3.17 didn't do this.

Do I need to add/remove php.ini or my.cnf directives? Do I need to update my query PHP class script (we're using mysqli extension)?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T11:09:22.637

您应该查看MySQL参考[手册](http://dev.mysql.com/doc/refman/5.0/en/gone-away.html)。`C.5.2.9\. MySQL server has gone away`它列出了许多可能发生这种情况的原因。它在页面上提到：

> MySQL server has gone away 错误最常见的原因是服务器超时并关闭了连接。

由于您正在运行长时间的维护脚本，我怀疑这就是原因。页面的另一点：

> 默认情况下，如果没有发生任何事情，服务器会在八小时后关闭连接。您可以通过在启动 mysqld 时设置 wait_timeout 变量来更改时间限制。请参见第 5.1.4 节，“服务器系统变量”。

您可以尝试设置`mysqli.reconnect`为 1（在您的 php.ini 中），或`MYSQLI_OPT_CONNECT_TIMEOUT`从[options](http://php.net/manual/en/mysqli.options.php)增加。请参阅[mysqli 配置](http://www.php.net/manual/en/mysqli.configuration.php)。您还应该考虑[从 5.3 迁移到 5.4](http://www.php.net/manual/en/migration54.php)注释。如果不查看您的代码，很难确定问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:12:45.947

connect_timeout wasn't the issue, I had to modify my query class and add the following:

`mysqli_options(MYSQLI_INIT_COMMAND,"SET SESSION wait_timeout=600;");`

# c++ - Something wrong with my QuickSort

> ID：15009159
> 
> 赞同：1
> 
> 时间：2013-02-21T18:00:29.123
> 
> 标签：c++, quicksort

I've following code for a quicksort:

```
typedef struct tagDataPair {
    int c_value;
    float error;
} DataPair;

void SortByErrorQS(std::vector<DataPair>& points, int left, int right)
{
    std::vector<int> stack;
    stack.push_back(left);
    stack.push_back(right);
    while(stack.size() > 0)
    {
        right = stack.back();
        stack.pop_back();
        left = stack.back();
        stack.pop_back();

        float pivot = (points.at(left).error + points.at(right).error + points.at((left + right)>>1).error)/3;
        int i = left, j = right;
        DataPair temp;
        while(i < j)
        {
            while(points.at(i).error <= pivot && (i <= right))
                ++i;
            while(points.at(j).error > pivot && (j > left))
                --j;
            if(i <= j)
            {
                temp = points[i];
                points[i] = points[j];
                points[j] = temp;
                i++; j--;
            }
        }

        if(left < j)
        {
            stack.push_back(left);
            stack.push_back(j);
        }
        if(i < right)
        {
            stack.push_back(i);
            stack.push_back(right);
        }
    }
} 
```

For some reason this is stuck in an infinite loop, and I just cannot figure out what is going wrong, or rather why. Can someone help me with a pointer what's happening here?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:10:58.747

要`std::sort`与您的`DataPair`结构一起使用，您可以提供自定义比较器。在 C++11 中，这可以通过 lambda 函数来完成：

```
std::sort(points.begin(), points.end(), [](const DataPair& a, const DataPair& b) {
  return a.error < b.error;
}); 
```

这将按`DataPair`s 的升序对 s 进行排序`error`。

C++03的做法是提供比较功能：

```
bool compare(const DataPair& a, const DataPair& b)
{
  return a.error < b.error;
}

std:sort(points.begin(), points.end(), compare); 
```

的复杂度`std::sort`保证为`O(NlogN)`。常见的实现使用快速排序或 introsort。

# javascript - Add-ons SDK Mozilla Firefox currentURI

> ID：15009161
> 
> 赞同：1
> 
> 时间：2013-02-21T18:00:33.970
> 
> 标签：javascript, firefox, mozilla, firefox-addon-sdk

I work with a [https://addons.mozilla.org/en-US/developers/builder](https://addons.mozilla.org/en-US/developers/builder) (Add-ons builder) and I try to do the following things:

1.How to change `currentURI` address? Method `setTabURL()` is not suitable because immediately opens the URL.

While found a way out:

```
tab.attach ({
    contentScript: "history.pushState ('','', '" + tab.url + "');",
}); 
```

2.How to get the url address that is entered in the address bar? Method `getTabURL()` only shows the address at which settled.

3.How to add text to an icon in the toolbar? I use it here: [https://builder.addons.mozilla.org/package/166563/](https://builder.addons.mozilla.org/package/166563/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T21:42:20.463

要访问 URL 栏及其相关值，您必须深入研究浏览器 chrome。

此代码片段将获取/设置当前焦点浏览器窗口的 URL 栏值：

```
var wuntils = require('sdk/window/utils');
var document = wuntils.getMostRecentBrowserWindow().document;
// log the current URL bar value
console.log(document.getElementById("urlbar").value);
// change the current URL bar value (this won't change the page)
document.getElementById("urlbar").value = "Thrift Shop"; 
```

# c# - Unable to install windows service with the help of InstallUtil tool

> ID：15009163
> 
> 赞同：14
> 
> 时间：2013-02-21T18:00:37.573
> 
> 标签：c#, .net, windows-services

I use VS 2012 and since the setup projects have been removed from it I have to use InstallUtil.exe.

I don't have projectInstaller class in my windows service app. I run in command prompt:

```
installutil FilesMonitoringService.exe 
```

I get:

> C:\Program Files\Microsoft Visual Studio 8\VC#>installutil "C:\Program Files\Mic rosoft Visual Studio 8\VC#\CSharpProjects\MyService\MyService\bin\Release\MyServ ice.exe" Microsoft (R) .NET Framework Installation utility Version 2.0.50727.42 Copyright (c) Microsoft Corporation. All rights reserved.
> 
> Running a transacted installation.
> 
> Beginning the Install phase of the installation. See the contents of the log file for the C:\Program Files\Microsoft Visual Studi o 8\VC#\CSharpProjects\MyService\MyService\bin\Release\MyService.exe assembly's progress. The file is located at C:\Program Files\Microsoft Visual Studio 8\VC#\CSharpProj ects\MyService\MyService\bin\Release\MyService.InstallLog. Installing assembly 'C:\Program Files\Microsoft Visual Studio 8\VC#\CSharpProjec ts\MyService\MyService\bin\Release\MyService.exe'. Affected parameters are: logtoconsole = assemblypath = C:\Program Files\Microsoft Visual Studio 8\VC#\CSharpProjects\ MyService\MyService\bin\Release\MyService.exe logfile = C:\Program Files\Microsoft Visual Studio 8\VC#\CSharpProjects\MySer vice\MyService\bin\Release\MyService.InstallLog No public installers with the RunInstallerAttribute.Yes attribute could be found in the C:\Program Files\Microsoft Visual Studio 8\VC#\CSharpProjects\MyService\ MyService\bin\Release\MyService.exe assembly.
> 
> The Install phase completed successfully, and the Commit phase is beginning. See the contents of the log file for the C:\Program Files\Microsoft Visual Studi o 8\VC#\CSharpProjects\MyService\MyService\bin\Release\MyService.exe assembly's progress. The file is located at C:\Program Files\Microsoft Visual Studio 8\VC#\CSharpProj ects\MyService\MyService\bin\Release\MyService.InstallLog. Committing assembly 'C:\Program Files\Microsoft Visual Studio 8\VC#\CSharpProjec ts\MyService\MyService\bin\Release\MyService.exe'. Affected parameters are: logtoconsole = assemblypath = C:\Program Files\Microsoft Visual Studio 8\VC#\CSharpProjects\ MyService\MyService\bin\Release\MyService.exe logfile = C:\Program Files\Microsoft Visual Studio 8\VC#\CSharpProjects\MySer vice\MyService\bin\Release\MyService.InstallLog No public installers with the RunInstallerAttribute.Yes attribute could be found in the C:\Program Files\Microsoft Visual Studio 8\VC#\CSharpProjects\MyService\ MyService\bin\Release\MyService.exe assembly. Remove InstallState file because there are no installers.
> 
> The Commit phase completed successfully.
> 
> The transacted install has completed.
> 
> C:\Program Files\Microsoft Visual Studio 8\VC#>

**OK**, seems like everything have been installed. But! When I go to task manager to the Services page I can't find my service.

What could be the reason?

Thanks in advance!

**Edits:** I pointed out that I don't have projectInstaller class because if I add it (in designer -> add installer) and run installutil command I get: (approximate translation)

> Installation of FilesMonitoringService... Creation of EventLog FilesMonitoringService in a log jornal Application...

On this setup stage the exception occured.

> System.Security.SecurityException: The source is not found, but failed to find by any or all log jornals. Not available jornals: Security.
> 
> The recoil stage starts.
> 
> // lots of text
> 
> The recoil stage has succeded
> 
> Setup group operation executed. Setup failed and recoil was executed.

So, if I add projectInstller to my windows service it definitely fails to install with installUtil.
Here is the generated code:

```
[RunInstaller(true)]
public partial class ProjectInstaller : Installer
{
    public ProjectInstaller()
    {
        InitializeComponent();
    }
    private void serviceInstaller1_AfterInstall(object sender, InstallEventArgs e)
    {}
    private void serviceProcessInstaller1_AfterInstall(object sender, InstallEventArgs e)
    {}
} 
```

Mabby I need to put some code into afterInstall methods? I also set this properies in a `properties` window:

serviceInstaller1: ServiceName -> FileMonitoringService, StartType -> Automatic
serviceProcessInstaller1: Account -> LocalSystem

Or can it be implemented without projectInstaller?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-22T07:59:20.987

好的，有几件事：

1）您需要项目安装程序。
2）你的项目->属性；启动项目 -> YourProject.Program
3）构建
4）“以管理员身份运行”命令提示符！

现在一切正常。

[完整教程链接](http://arcanecode.com/2007/05/23/windows-services-in-c-adding-the-installer-part-3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:14:33.727

我现在没有VS2012的副本来测试它，但我相信你的问题与

> 我的 Windows 服务应用程序中没有 projectInstaller 类

部分。

来自[msdn](http://msdn.microsoft.com/en-us/library/ddhy0byf.aspx)：

> 安装组件在要安装它的系统上注册单个服务，并让服务控制管理器知道该服务存在

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-23T06:07:33.010

这似乎微不足道，但在编写 installutill 参数时请仔细检查，因为您可能会将服务的 exe 文件与引用项目（没有服务安装程序）编译生成的另一个 exe 文件混淆并使其失败。

# c++ - C++ add registry key

> ID：15009167
> 
> 赞同：-1
> 
> 时间：2013-02-21T18:00:49.550
> 
> 标签：c++, registry

I have the following in my CPP code which adds the current program into startup. I'm trying to modify the code to add a different program to startup, say I want to add a key so that "C:\mytime.exe" runs on startup. Could you please help me modify the code?

```
TCHAR szPath[MAX_PATH];
DWORD pathLen = 0;

pathLen = GetModuleFileName(NULL, szPath, MAX_PATH);
if (pathLen == 0)
{
    return -1;
}
HKEY newValue;
if (RegOpenKey(HKEY_CURRENT_USER,
    TEXT("Software\\Microsoft\\Windows\\CurrentVersion\\Run"),
    &newValue) != ERROR_SUCCESS)
{
    return -1;
}
DWORD pathLenInBytes = pathLen * sizeof(*szPath);
if (RegSetValueEx(newValue,
    TEXT("My Program"),
    0,
    REG_SZ,
    (LPBYTE)szPath,
    pathLenInBytes) != ERROR_SUCCESS)
{
    RegCloseKey(newValue);
    return -1;
}
RegCloseKey(newValue);
return TRUE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:33:07.580

只需替换这段代码：

```
pathLen = GetModuleFileName(NULL, szPath, MAX_PATH);
if (pathLen == 0)
{
    return -1;
} 
```

有了这个：

```
/* of course, use your own executable - make sure to not overflow the buffer! */
_tcscpy(szPath, _T("C:\\stackoverflow.exe"));
pathLen = _tcslen(szPath); 
```

# sql - Oracle SQL: Can I combine 3 queries on the same table into one query and do complex ordering?

> ID：15009169
> 
> 赞同：0
> 
> 时间：2013-02-21T18:00:51.943
> 
> 标签：sql, oracle

I need to query a table and get the records back in a complex scheme of ordering.

I can get the results I want with 3 separate queries and then concatenate the results by brute force after retrieval with my programming code.

I would rather get everything back with one call to the database, with one database.

I have a table called "committee" listing committee names and subcommittee names.

```
committee_name               subcomittee_name
--------------               -----------------
Hals Committee on Books
Hals Committee on Books      Subcommittee on Paperbacks
Hals Committee on Books      Subcommittee on Leather Bound Volumes
General Purpose Committee
Stans Committee on Music
Stans Committee on Music     Subcommittee on CDs
Stans Committee on Music     Subcommittee on MP3s 
```

Every subcommittee belongs to a parent committee.

Not all committees have a subcommittee.

Every committee will have a null entry for subcommittee to distinguish a new/different committee

I would like to get all of the committee and subcommittee names back, sorted in ascending order, but with a twist. I would like all of "Stans" committees listed first, then Hals and then the others.

**Example:**

```
committee_name               subcomittee_name
--------------               -----------------
Stans Committee on Music
Stans Committee on Music     Subcommittee on CDs
Stans Committee on Music     Subcommittee on MP3s
Hals Committee on Books
Hals Committee on Books      Subcommittee on Paperbacks
Hals Committee on Books      Subcommittee on Leather Bound Volumes
General Purpose Committee 
```

I can get that with 3 separate queries:

```
select * from committee where substr(committee_name,1,1) = 'S' order by committee_name,subcommittee_name nulls first

select * from committee where substr(committee_name,1,1) = 'H' order by committee_name,subcommittee_name nulls first

select * from committee where substr(committee_name,1,1) not in ('H','S') order by committee_name,subcommittee_name nulls first 
```

What I would like is to get what I want with just 1 query, 1 trip to the database.

Any ideas?

Steve

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T18:03:34.927

您可以先使用 a`case`来订购“S”，然后是“H”，然后是其他字母：

```
select  committee_name
,       subcommittee_name 
from    committee 
group by 
        committee_name
,       subcommittee_name
order by
        case min(substring(comittee_name,1,1))
        when 'S' then 1
        when 'H' then 2
        else 3
        end
,       committee_name
,       subcommittee_name nulls first 
```

聚合是必需的`min`，因为您可能会对整组行进行排序。

# c# - Simple and fast async binary TCP socket server?

> ID：15009170
> 
> 赞同：6
> 
> 时间：2013-02-21T18:00:54.583
> 
> 标签：c#, sockets, asynchronous, tcp

I'm looking for a simple and fast TCP socket server written in C#. It should be async (run alongside a WinForms app) and support async receiving/sending data to connected clients. I found the following libraries that might work, but I'm looking for advice on specific libraries.

I'm trying to send binary data (using my custom serializer) from C# to an AS3 frontend. I have the client socket already written in AS3 but I need a reliable socket server in C#.

*   [XYNetSocket](http://www.codeproject.com/KB/IP/xynetsocket.aspx) - single file, unreliable and misses packets, does not support binary
*   [NetSockets](http://netsockets.codeplex.com/)
*   [SocketAsyncEventArgs](http://www.codeproject.com/Articles/83102/C-SocketAsyncEventArgs-High-Performance-Socket-Cod)
*   [SuperSocket](http://supersocket.codeplex.com/) - looks very bloated (100+ classes)

Which socket server library have you used with success? Does it support binary and is it reliable?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T18:10:39.830

有些人可能会告诉您自己从头开始创建所有内容，我并不真正理解，就像您说的那样，使用库更快更容易。

使用 networkComms.net，假设您将二进制数据作为 byte[] 发送，简单的客户端服务器示例 -[这里](http://www.networkcomms.net/how-to-create-a-client-server-application-in-minutes/)。WPF 聊天示例 -[这里](http://www.networkcomms.net/creating-a-wpf-chat-client-server-application/)。在这两个示例中，您将相关部分替换为 byte[]，而不是发送和接收字符串。根据示例和包含的评论，“相关”应该是显而易见的。

我必须补充一点，我是这个库的开发人员。

# mysql - should I use memcached mysql or NO-SQL Database?

> ID：15009172
> 
> 赞同：0
> 
> 时间：2013-02-21T18:00:59.497
> 
> 标签：mysql, nosql

I'm working on a tcp server application that need dispatch around 1000 frames per second on java. Each ingoing frame generates an update (save state) and insert(for logging) to mysql. It says, 1000 updates and 1000 inserts per second!. I have a bottleneck in this updates and inserts. At this point, I don't know if mysql is a bad solution for my scenary because I'm doing the benchmarks on a PC, not on a server. I try execute Updates and Inserts in batchs periodically, but each batch takes a lot of time. I'm using MyIsam engine and Mina to manipulates tcp connection and a pool for the mysql connections.

Should I use memcached over Mysql or NO-SQL, or it can be a hardware resource problem?

thanks! regards!!

# python - 带有自定义字段的自定义模型表单集的 Django ValidationError（数据丢失或已被篡改）

> ID：15009173
> 
> 赞同：0
> 
> 时间：2013-02-21T18:01:00.860
> 
> 标签：python, django

我正在为会员模型（模型 auth.User 会员资格到 app.Project）开发模型表单集。这里是 app/forms.py，在我删减了一些我在注释掉之后确认不相关的东西之后：

```
class EditMembership(forms.ModelForm):
  delete = forms.BooleanField(required=False, initial=False)

  class Meta:
    model = models.Membership
    fields = ('is_owner',)  

  def clean_delete(self):
    return self.cleaned_data['delete']

class BaseEditMemberships(forms.models.BaseModelFormSet):
  # Some custom methods not dealing with validation.
  pass

EditMembershipSet = forms.models.modelformset_factory(models.Membership,
  form=EditMembership, extra=0, formset=BaseEditMemberships) 
```

这是我的模板：

```
<form method="{{ method|default:"post" }}" action="{{ action }}">
  {% csrf_token %}
  <ul>
  {% for form in formset %}
    <li>{{ form.instance.user}}</li>
    {{ form.as_ul }}
  {% endfor %}
  </ul>
  <input type="submit" value="{{ submit_value|default:"Submit" }}" />
</form> 
```

而我的观点：

```
@ownership_required(message="You must be an owner to edit memberships.")
def edit_memberships(request, pk):
  project = get_object_or_404(models.Project, pk=pk)
  if request.method == "GET":
    formset = forms.EditMembershipSet(
      queryset=project.membership_set.all()
    )
    return render_formset_fullpage(request, formset, "Edit Memberships",
      template=forms.EDITMEMBERSHIPS_PATH)
  elif request.method == "POST":
    formset = forms.EditMembershipSet(request.POST)
    return HttpResponse("Hooray!") 
```

和有问题的模型：

```
class Membership(models.Model):
  class Meta:
    unique_together = ('project', 'user')

  project = models.ForeignKey('common.Project', editable=False)
  user = models.ForeignKey('auth.User')
  is_owner = models.BooleanField(default=False, blank=False,
    help_text="Indicates ownership of the project")
  project_alias = models.CharField(max_length=CHARFIELD_SHORT,
    help_text="User-given name", blank=True) 
```

问题是我在执行 POST 后不断收到 ValidationError：

```
ValidationError at /project/4/memberships
[u'ManagementForm data is missing or has been tampered with'] 
```

据我所知，forms.EditMembership 运行良好。我可以渲染该表单并从 POST 重新创建它而没有验证错误，所以我猜我使用 BaseEditMemberships/EditMembershipSet 的方式有问题。

编辑：

只是为了给您更多信息，这里有一个生成的示例表单和我的一个测试请求的 POST 变量。表格：

```
<form method="post" action="">
  <div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='d6d535efd35e83076e1ac14a82ef4cdc' /></div>
  <ul> 
    <li>someuser</li>
    <li><label for="id_form-0-is_owner">Is owner:</label>
      <input checked="checked" type="checkbox" name="form-0-is_owner" id="id_form-0-is_owner" />
    </li>
<li><label for="id_form-0-delete">Delete:</label>
  <input type="checkbox" name="form-0-delete" id="id_form-0-delete" />
  <input type="hidden" name="form-0-id" value="8" id="id_form-0-id" />
</li>

  </ul>
  <input type="submit" value="Submit" />
</form> 
```

如果我选中删除框，则对应的 POST 变量：

*   form-0-id: u'8'
*   csrfmiddlewaretoken: u'd6d535efd35e83076e1ac14a82ef4cdc'
*   form-0-delete: u'on'
*   form-0-is_owner: u'on'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:18:14.663

您需要包含`{{ formset.management_form }}`在您的模板中。请参阅[Django 的有关为表单集呈现模板的表单集文档](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#using-a-formset-in-views-and-templates)。

# android - Why does a higher weight of a child view mean less pace is taken?

> ID：15009174
> 
> 赞同：0
> 
> 时间：2013-02-21T18:01:07.200
> 
> 标签：android, android-linearlayout

I have noticed when playing with weighted layouts (one widget takes 30% of screen and the other 70%) that in order to get 30% of the screen taken I need to use a weight of .7 on the widget (this case a button) and to get 70% of space taken I need to use a weight of .3 (this case a relative layout).

Can someone tell me the logic for making a larger weight take up less space.

Thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:14:01.617

如果您将视图宽度设置为`android:layout_width="match_parent"`它的行为就像您在问题中提到的那样，这与人们所期望的相反。如果您将宽度设置为，`android:layout_height="wrap_content"`否则`android:layout_height="0dp"`它将按您的预期工作。

# css - CSS3 transition: tilt/rotate slightly while moving, then restore to horizontal

> ID：15009176
> 
> 赞同：1
> 
> 时间：2013-02-21T18:01:13.633
> 
> 标签：css, css-transitions

Is it possible, using CSS transitions, to tilt (rotate) an element slightly off-horizontal during the first half of its movement--and tilt it back to horizontal during the second half, as it reaches the end of its movement? I don't want a 360-degree spin. Just a slight tilt, then tilt back again.

Here's a picture of the beginning, middle, and end of the transition I have in mind:

![tilt during motion](../Images/c6541450903573694b25e8504529d9da.png)

This question is best demonstrated by watching it. Here's a fiddle that shows what I would like to achieve--but I'd like to achieve it with CSS transitions, not JavaScript:

[http://jsfiddle.net/bmorearty/S5Us6/22/](http://jsfiddle.net/bmorearty/S5Us6/22/)

When you run this, watch the gray box closely. It tilts a bit during motion, then reverses its tilt halfway through--so when it comes to rest, it is no longer tilted.

I would like whole motion this to happen in a single transition from one state to another simply by adding a class to an element--not in two transitions, because that would require me to time the end of one with the beginning of the next.

I suspect the answer would incorporate [`transition-delay`](http://www.the-art-of-web.com/css/css-animation/#section_4) and/or [`@keyframes`](https://developer.mozilla.org/en-US/docs/CSS/@keyframes).

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:56:23.200

I got it!

The solution is to use a CSS animation with a keyframe that transforms the rotation (e.g., to about 8deg) when it is 50% of the way through, but returns the rotation to 0deg at the end. It's pretty sweet.

Here's a demo on JSBin:

[http://jsbin.com/ogiqad/4/edit](http://jsbin.com/ogiqad/4/edit)

(The code below uses -webkit but you can add all the other browser variations to make it work on more browsers.)

```
@-webkit-keyframes tilt-and-move {
  0% {
    left: 0;
    top: 0;
  }
  50% {
    -webkit-transform: rotate(8deg);
  }
  100% {
    left: 100px;
    top: 100px;
  }
}

#card {
    position: relative;
}

#card.moved {
    left: 100px;
    top: 100px;
    -webkit-animation-duration: 0.4s;
    -webkit-animation-name: tilt-and-move;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:40:16.537

你可以做这样的事情。 [http://cdpn.io/sIxFA](http://cdpn.io/sIxFA)

显然，您可以随意平滑旋转，并在单击时添加旋转类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:47:19.050

这将是它的CSS：

```
#card {
    padding: 2em;
    border: 1px solid gray;
    display: inline-block;
    position: relative;
    background-color: #eee;
    /*instead of infinite you can add a number of times you want it running*/
    animation: moving infinite 6s;

}
@keyframes moving {
    0%{
      margin: 0;
    }
  50% {
 -webkit-transform: rotate(45deg);
  }
  100% {
    margin: 50px;
    }
} 
```

# android - wayout to play audio in android app without Java code

> ID：15009177
> 
> 赞同：0
> 
> 时间：2013-02-21T18:01:14.787
> 
> 标签：android, jquery, jquery-mobile

I am planning to create a music app which allows user to choose from a number of inbuilt audio. The closest thing I found on the web was jPlayer plugin for jQuery which I couldn't make it work on Android. My app is based on jQuery mobile.

Is there any really simple way to add audio to my web app which I am planning to convert to .apk using phonegap. I intend to provide a list of links/file names to user in my app and on clicking the file name/link, the audio player controls shall be displayed and the selected audio shall start playing.

I have also tried the HTML embed tag and it also didn't work in the apk.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:07:56.040

据我所知，PhoneGap 还不支持该标签。

我听说有人通过本教程成功使用 PhoneGap API +jQuery Mobile 让它工作：[http ://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt1part1](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt1part1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:18:14.640

看起来您可以使用 PhoneGap 插件来执行此操作：

```
window.plugins.webintent.startActivity({
    action: WebIntent.ACTION_VIEW,
    url: 'http"//whatever.mp4'}, 
    function() {console.log('Wow this actually worked!');}, 
    function() {console.log('Failed to open URL via Android Intent');}
); 
```

[https://groups.google.com/forum/?fromgroups=#!topic/phonegap/nEm47r1Bhak](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/nEm47r1Bhak)

# python - 从python字典中删除元素

> ID：15009180
> 
> 赞同：2
> 
> 时间：2013-02-21T18:01:28.560
> 
> 标签：python

我需要最有效的方法来从字典中删除几个项目，现在，我正在使用下面给出的 stmt ......认为同样的事情应该在几行中完成。

```
for eachitem in dicta:
                del eachitem['NAME']
                del eachitem['STATE']
                del eachitem['COUNTRY']
                del eachitem['REGION']
                del eachitem['LNAME']

dicta = [{'name','Bob','STATE':'VA','COUNTRY':'US','REGION':'MIDWEST','LNAME':'Brian',Salary:6000}] 
```

一旦删除，我只想要字典中的薪水项目。任何输入表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T18:12:21.533

如果您的示例数据是您正在处理的内容，而不是删除元素，只需使用该唯一键重新创建您的 dict

```
dicta = [{'Salary':e['Salary']} for e in dicta] 
```

或者对我来说，创建一个列表而不是字典列表更有意义

```
dicta = [e['Salary'] for e in dicta] 
```

但取决于您计划实现的目标

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T18:06:13.693

我想你可以使用：

```
for eachitem in dicta:
    for k in ['NAME','STATE','COUNTRY','REGION','LNAME']:
        del eachitem[k] 
```

或者，如果您只想要 1 个密钥：

```
for eachitem in dicta:
    salary = eachitem['SALARY']
    eachitem.clear()
    eachitem['SALARY'] = salary 
```

这可以完成我认为您想要的一切 - 否则，您可以通过以下方式完成它：

```
eachitem = {'SALARY':eachitem['SALARY']} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T18:25:20.587

编辑：我说过听写理解是最快的：我错了。我不小心运行`%timeit test3`而不是`%timeit test3()`. 请参阅下面的结果。

```
def test1():
    dicta = [{'NAME':'Bob','STATE':'VA','COUNTRY':'US','REGION':'MIDWEST','LNAME':'Brian','Salary':6000}]
    remove = ['NAME','STATE','COUNTRY','REGION','LNAME']
    for d in dicta:
        for r in remove:
            d.pop(r)

def test2():
    dicta = [{'NAME':'Bob','STATE':'VA','COUNTRY':'US','REGION':'MIDWEST','LNAME':'Brian','Salary':6000}]
    remove = ['NAME','STATE','COUNTRY','REGION','LNAME']
    for d in dicta:
        for r in remove:
            del d[r]

def test3():
    dicta = [{'NAME':'Bob','STATE':'VA','COUNTRY':'US','REGION':'MIDWEST','LNAME':'Brian','Salary':6000}]
    remove = ['NAME','STATE','COUNTRY','REGION','LNAME']    
    dicta = [{k:v for k,v in d.iteritems() if k not in remove } for d in dicta]

# this is really what OP was looking for, the other 3 tests are more generalized.    
def test4():    
    dicta = [{'NAME':'Bob','STATE':'VA','COUNTRY':'US','REGION':'MIDWEST','LNAME':'Brian','Salary':6000}]
    remove = ['NAME','STATE','COUNTRY','REGION','LNAME']    
    dicta = [e['Salary'] for e in dicta]

%timeit test1()
# 100000 loops, best of 3: 2.32 us per loop    
%timeit test2()
# 1000000 loops, best of 3: 1.68 us per loop    
%timeit test3()
# 100000 loops, best of 3: 3.23 us per loop
%timeit test4()
# 1000000 loops, best of 3: 1.46 us per loop 
```

# javascript - doPostback Error

> ID：15009182
> 
> 赞同：0
> 
> 时间：2013-02-21T18:01:32.540
> 
> 标签：javascript, asp.net

I am trying to execute a javascript function on page load and then do a postback that would call a function in code behind. I am getting time zone data and trying to pass them as arguments to __dopostback. Here is what I have (abbreviated):

in .aspx file

```
<body onload="GetLocalTime()">
....
function GetLocalTime(){debugger
    var d = new Date();
    var tzOffset = d.getTimezoneOffset();
    var hfOffset = document.getElementById('<%=hfOffset.ClientID%>');
    var hfTZName = document.getElementById('<%=hfTZName.ClientID%>');
    var tzName = getTimezoneName();
    hfOffset.value = tzOffset;
    hfTZName.value = tzName;
    __doPostBack('TZSessionVars', tzOffset, tzName);
} 
```

In code behind's Page_Load(), if IsPostback is true:

```
string sTarget = Request["__EVENTTARGET"];
if (sTarget.Equals("TZSessionVars"))
{
    string sArg = Request["__EVENTARGUMENT"];
    SetTZSessionVars(sArg);  // this is where I parse the argument and set session vars
} 
```

When I trace the javascript, when it hits __doPostback, it says:Microsoft JScript runtime error: Object expected

The parameters tzOffset and tzName are OK and have valid values.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:10:29.767

您可以按照本文中的说明使用 __EVENTARGUMENT。

[在 Asp.Net 中使用 Javascript 中的 __doPostBack() 函数执行或提高回发](http://www.codedigest.com/Articles/ASPNET/320_Doing_or_Raising_Postback_using___doPostBack%28%29_function_from_Javascript_in_AspNet.aspx)

尝试将连接的值作为单个 __EVENTARGUMENT 传递并在服务器上拆分它以获取实际参数

# mysql - deleting duplicates in sql and modifying relationship table accordingly

> ID：15009190
> 
> 赞同：1
> 
> 时间：2013-02-21T18:01:49.463
> 
> 标签：mysql, sql, plsql, mysql-workbench

I have three tables: menu_tab has columns (menu_id,menu_description) item_tab has columns (item_id,item_name,item_description,item_price) menu_has_item has columns{ (menu_tab_menu_id ---> which is foreign key to menu_id (pk in menu_tab)), item_tab_item_id --- which is foreign key to item_id (pk in item_tab))4

there will be 2 kinds of duplicates which will be encountered 1)Item duplicate in the same menu_description 2)Item duplicate in a different menu description

Example: Two Chicken Sandwiches in the lunch menu. One Chicken Sandwich in Lunch and another in Dinner menu _description

```
menu_tab    
menu_id menu_description
1        lunch
2        dinner
3        Specials

item_tab        
item_id item_description    
1       b 
2       d   
3       g   
4       x   
5       g          delete g
6       d   
7       e   
8       b          delete b
9       x   

menu_has_tab 
```

menu_tab_menu_id item_tab_item_id
1............................1
1............................2
1............................3
1............................4
2............................5 replace by 3
2............................6
3............................7
3............................8 replace by 1
3............................9

How do I update my menu_has_item with the replaced values after removing the duplicates?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T06:01:46.393

```
begin
  for x in (
            -- find duplicate items
            select *
              from (select rowid row_id,
                           item_id,
                           item_description,
                           row_number() over(partition by item_description order by
                           item_description) row_no
                       from item_tab)
            where row_no > 1) loop
-- replaceing duplicate Items
    update menu_has_item 
    set menu_has_item.item_tab_item_id =
           ( select item_id
              from (select item_id,
                           row_number() over(partition by item_description order by
                           item_description) row_no
                       from item_tab where 
                       item_tab.item_description = x.item_description)
             where row_no = 1)
   where menu_has_item .item_tab_item_id = x.item_id;
-- deleting duplicate items
     delete item_tab where rowid = x.row_id;
  end loop;
-- commit;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:24:29.697

首先，您需要用新值替换 menu_tab 中的重复项

```
merge into menu_tab dest
using (select *
         from (select item_id, min(item_id) over(partition by item_description) as new_item_id from item_tab)
        where item_id != new_item_id) src
on (dest.item_tab_item_id = src.item_id)
when matched then
    update set dest.item_tab_item_id = new_item_id; 
```

之后，您需要从项目表中删除重复项，您可以在那里找到脚本 [http://sprogram.com.ua/en/articles/oracle-delete-duplicate-record](http://sprogram.com.ua/en/articles/oracle-delete-duplicate-record)

ups你将问题标记为plsql，我错误地认为你关于Oracle，对不起。但我想在 MySQL 中存在合并语句祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T22:54:14.037

我为我的表 Rout(RoutID,SourceCityID,DestCityID) 和 Form(FormID,RoutID,...)
这样做了比较重复

```
(SELECT * FROM
    Rout,
    (SELECT MIN(RoutID) MinRoutID
    FROM Rout,
        (SELECT SourceCityID,DestCityID
        FROM Rout
        GROUP BY SourceCityID,DestCityID
        HAVING count(*) > 1) AS Duplicates
    WHERE Rout.SourceCityID=Duplicates.SourceCityID AND Rout.DestCityID=Duplicates.DestCityID
    GROUP BY Rout.SourceCityID,Rout.DestCityID)AS MRCols
WHERE RoutID=MinRoutID)AS DuplicateGroup 
```

然后获取所有重复的行而不进行分组，并使用将比较重复的列

```
(SELECT RoutID,Rout.SourceCityID,Rout.DestCityID FROM Rout,
    (SELECT SourceCityID,DestCityID
    FROM Rout
    GROUP BY SourceCityID,DestCityID
    HAVING count(*) > 1)AS Duplicates
WHERE Rout.SourceCityID=Duplicates.SourceCityID AND Rout.DestCityID=Duplicates.DestCityID)AS DuplicateDetail 
```

然后更新表格 tbl，如下所示：

```
UPDATE Form SET RoutID=DuplicateGroup.RoutID
FROM
    Form,
    (SELECT * FROM
        Rout,
        (SELECT MAX(RoutID) MinRoutID
        FROM Rout,
            (SELECT SourceCityID,DestCityID
            FROM Rout
            GROUP BY SourceCityID,DestCityID
            HAVING count(*) > 1) AS Duplicates
        WHERE Rout.SourceCityID=Duplicates.SourceCityID AND Rout.DestCityID=Duplicates.DestCityID
        GROUP BY Rout.SourceCityID,Rout.DestCityID)AS MRCols
    WHERE RoutID=MinRoutID)AS DuplicateGroup
    ,
    (SELECT RoutID,Rout.SourceCityID,Rout.DestCityID FROM Rout,
        (SELECT SourceCityID,DestCityID
        FROM Rout
        GROUP BY SourceCityID,DestCityID
        HAVING count(*) > 1)AS Duplicates
    WHERE Rout.SourceCityID=Duplicates.SourceCityID AND Rout.DestCityID=Duplicates.DestCityID)AS DuplicateDetail
WHERE
    Form.RoutID=DuplicateDetail.RoutID AND
    DuplicateGroup.SourceCityID=DuplicateDetail.SourceCityID
    AND DuplicateGroup.DestCityID=DuplicateDetail.DestCityID 
```

现在删除 Rout 中不在表格中的行

```
DELETE FROM Rout WHERE RoutID NOT IN(SELECT DISTINCT RoutID FROM Form) 
```

# javascript - 仅当 JavaScript 中的三元运算符中的条件为真时才赋值

> ID：15009194
> 
> 赞同：65
> 
> 时间：2013-02-21T18:02:03.507
> 
> 标签：javascript, ternary-operator

有可能在 JavaScript 中做这样的事情吗？

```
max = (max < b) ? b; 
```

换句话说，仅当条件为真时才赋值。如果条件为假，则什么也不做（不赋值）。这可能吗？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-02-21T18:07:12.213

然后不要使用[三元运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)，它需要第三个参数。如果您不希望它更改`max`，则需要重新分配( )。`max``max = (max < b) ? b : max`

[if 语句](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/if...else)更清晰：

```
if (max < b) max = b; 
```

[如果你需要它是一个表达式，你可以（ab）使用AND](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators)的短路评估：

```
(max < b) && (max = b) 
```

顺便说一句，如果你想避免重复变量名（或表达式？），你可以使用[最大函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/max)：

```
max = Math.max(max, b); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-21T18:04:29.093

带有三元运算符的表达式*必须*同时具有两个值，即真假两种情况。

但是你可以

```
max = (max < b) ? b : max; 
```

在这种情况下，如果条件为假，则值`max`不会改变。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-21T18:04:21.867

如果条件为假，您可以设置`max`为自身。

```
max = (max < b) ? b : max; 
```

或者您可以尝试使用`&&`运算符：

```
(max < b) && (max = b); 
```

或者为了让您的代码简单，只需使用`if`.

```
if(max < v) max = b; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-08-18T08:31:59.527

我认为三元更合适试试这个

```
(max < b) ? max = b : ''; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-21T18:03:34.913

没有一个特定的运算符不是三元运算符，但您可以像这样使用它：

```
max = (max < b) ? b : max; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-16T12:52:15.583

我认为更好的方法可能是

```
max = Math.max(max, b) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-11-22T12:04:13.317

你可以这样做：

```
(max < b) ? max = b : '' 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-08-12T10:57:11.870

你可以试试：

```
(max < b) && (max = b); 
```

看这个例子：

```
let max = 10;
let b = 15;
(max < b) && (max = b)// this will be true
console.log("max=", max);

let maxx = 10
let bb = 5;
(maxx < bb) && (maxx = bb)// this will be false
console.log("maxx=", maxx);
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2022-01-12T05:39:57.580

三元运算符用于我们至少有两个可能的结果。

```
let no = 10;
let max = 20;

max = no > max ? no : max 
```

如果您只想使用 if 而不是 else，那么我建议您使用 if not 三元运算符。

```
let no = 10;
let max = 20;

if (no > max){
   max = no
} 
```

如果你想使用三元运算符，但又不想使用 else 部分，那么你可以使用这个，但这并不是对每个问题都有用

```
let no = 10;
let max = 20;

no > max ? max = no : 0 
```

在这里，我们仅在条件为真时才为 max 变量赋值，否则，我们什么也不做

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-09-25T02:20:20.647

没有ES6的例子，我们可以这样使用：

```
let list = [{id: "abc", name: "test1"}, {id: "xyz", name: "test2"}]
let selectedData = {};
      list.some((exp) => {
        return (
          exp.id == "xyz" &&
          ((selectedData = exp), true)
        );
      })
console.log(selectedData); 
```

* * *

**在反对票后添加描述：** 只需添加描述来解释我的解决方案。如果你有一个对象数组，并且你想要只满足一个条件，那么我们可以使用`some`. 它将设置`selectedData`当`id == "xyz"`. 如问题中所述，仅当条件为真时才会赋值，否则`selectedData`将为空。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-01-01T14:24:24.237

您可以使用[逻辑与赋值 (&&=)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_AND_assignment)来代替*三元运算符*。

**基本示例**

```
let output = false;
output &&= true;
console.log(output)
```

无法重新分配，因为`output`已定义为*false*。

```
const b = 10;
const max = 1;
let sum = max < b;

sum &&= 'new value';
console.log(sum);
```

返回一个字符串，因为该变量`sum`已被定义为*true*。

# java - Tomcat DLL already loaded in another classloader

> ID：15009201
> 
> 赞同：1
> 
> 时间：2013-02-21T18:02:27.297
> 
> 标签：java, java-native-interface, tomcat7

I have a DLL that provides access to Window's LoadLibrary and FreeLibrary (to get around Java not being able to unload it). I need this DLL to persist between each webapp as it cannot be loaded twice.

I've followed these steps:

[http://wiki.apache.org/tomcat/HowTo#I.27m_encountering_classloader_problems_when_using_JNI_under_Tomcat](http://wiki.apache.org/tomcat/HowTo#I.27m_encountering_classloader_problems_when_using_JNI_under_Tomcat)

and placed a singleton class (as a jar) with the `static { System.loadLibrary() }` call under ${TOMCAT}/lib. When my Tomcat webapp accesses this Singleton, it still throws the error

`UnsatisfiedLinkError: Native Library ${TOMCAT}\lib\Native.dll already loaded in another classloader`

Is this wrong in thinking that Tomcat's common classloader is loading this class, instantiating it (as per: [http://tomcat.apache.org/tomcat-7.0-doc/class-loader-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/class-loader-howto.html)) and then passing the reference to the webapp thus bypassing the webapp classloader?

Is there a way to tell Tomcat to instantiate my singleton (forcing the common classloader to do it) and then provide that instance to satisfy my webapp's dependency?

Any discussion much appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-22T21:56:42.547

按照此链接卸载 dll：

[http://www.codethesis.com/blog/unload-java-jni-dll](http://www.codethesis.com/blog/unload-java-jni-dll)

（[网络存档版本](https://web.archive.org/web/20150518033642/http://www.codethesis.com/blog/unload-java-jni-dll)）

我在 Tomcat 上运行我的 Web 应用程序进行了尝试，它可以工作！

简而言之，我从我的自定义类加载器使用反射加载的类中调用 System.loadLibrary。然后这个类被垃圾收集器删除。

# actionscript-3 - AS3 gotoAndStop 导致对象自行移除

> ID：15009208
> 
> 赞同：0
> 
> 时间：2013-02-21T18:02:56.190
> 
> 标签：actionscript-3, removechild

我有一个学生正在开发 AS3 中的塔防游戏，并且遇到了一个困扰我的问题。他正在使用 hitTestObject 来改变movieClip 移动的方向。影片剪辑有自己的时间线，其中包含对象所面对的不同方向的帧和一个链接的 .as 文件，其中包含对象行为的代码。

当他调用 gotoAndStop 改变movieClip的内部帧时，触发了removed事件，但是对象停留在屏幕上不再移动。

我的所有搜索都找到了有关删除对象的答案，但我没有看到任何有关防止对象删除自身的内容。

以下代码是由 .as 类文件中针对 movieClip 对象的 ENTER_FRAME 事件触发的循环：

```
private function eFrame(event:Event):void
    {

        if (_root.isPaused == false)
        {
            //MOVING THE ENEMY
            this.x +=  speed * xDir;
            this.y -=  speed * yDir;
            if (health <= 0)
            {
                _root.currency +=  4;

                this.parent.removeChild(this);
            }
            if (this.x > 770)
            {
                this.parent.removeChild(this);
                _root.health -=  10;
                _root.gotHit = true;
            }
            //checking if touching any invisible markers
            for (var i:int=0; i<_root.upHolder.numChildren; i++)
            {
                //the process is very similar to the main guy's testing with other elements
                var upMarker:DisplayObject = _root.upHolder.getChildAt(i);
                if (hitTestObject(upMarker))
                {
                    yDir = 1;
                    xDir = 0;
                    this.gotoAndStop(3);

                }
            }
            for (i=0; i<_root.downHolder.numChildren; i++)
            {
                //the process is very similar to the main guy's testing with other elements
                var downMarker:DisplayObject = _root.downHolder.getChildAt(i);
                if (hitTestObject(downMarker))
                {
                    yDir = -1;
                    xDir = 0;
                    this.gotoAndStop(7);

                }
            }

            for (i=0; i<_root.rightHolder.numChildren; i++)
            {
                //the process is very similar to the main guy's testing with other elements
                var rightMarker:DisplayObject = _root.rightHolder.getChildAt(i);
                if (hitTestObject(rightMarker))
                {
                    yDir = 0;
                    xDir = 1;
                    this.gotoAndStop(6);
                }
            }
            for (i=0; i<_root.leftHolder.numChildren; i++)
            {
                //the process is very similar to the main guy's testing with other elements
                var leftMarker:DisplayObject = _root.leftHolder.getChildAt(i);
                if (hitTestObject(leftMarker))
                {
                    yDir = 0;
                    xDir = -1;
                    this.gotoAndStop(2);

                }
            }
        }
    }
    private function remove(event:Event):void
    {
        trace("remove");
        removeEventListener(Event.ENTER_FRAME, eFrame);
        _root.enemiesLeft -=  1;

    }
} 
```

当 gotoAndStop 行执行时，movieClip 的帧发生变化，然后代码直接跳转到由 REMOVED 事件触发的函数。

有谁知道为什么这个代码可能会触发 REMOVED 事件？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:13:28.480

如果我没记错的话，REMOVED 事件是由从包含它的 MovieClip 或 Sprite 的舞台上移除的任何东西触发的。特别是对于具有动画的 MovieClip，每次都会删除和添加内容，例如，如果动画的某些部分在时间轴上结束，或者在关键帧处结束。

Event.REMOVED_FROM_STAGE 仅在容器本身从阶段中移除时才被调度。也许这引起了你的困惑？我无法从您的代码示例中确切看到您正在侦听的事件类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:38:56.517

您在哪里添加删除侦听器？

如果没有更多信息，我猜您正在收听动画中的剪辑，并且它并非在所有帧上都存在（或者，甚至更有可能 - 该实例正在被 flash pro 换成另一个相同的实例. 这可能会发生，具体取决于您添加关键帧的顺序、月球的对齐方式和电离层的波动。最简单的解决方法是删除所有关键帧，然后重新创建它们。然后永远不要使用 flash pro 做任何事情再次。）

# python - 如何让两个 .py 文件能够调用彼此的函数？

> ID：15009221
> 
> 赞同：-1
> 
> 时间：2013-02-21T18:03:42.943
> 
> 标签：python, import

我想要两个或多个可以互相调用函数的 python 文件，就好像它们是同一个文件的一部分一样。测试了在两个文件中相互导入，但结果很奇怪，我认为这不是正确的方法。关于如何做到这一点的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:05:20.903

`import`是正确的方法。您可能遇到循环导入错误或类似问题，应通过重新组织代码来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:20:57.567

假设我在 TestFile.py 中有一个名为 test 的函数

如果我想在不同的 .py 文件中导入测试，那么我会这样做

```
from TestFile import test 
```

这将允许我在我的新 .py 文件中使用测试功能。

# android - 在 onResume Android 中刷新视图

> ID：15009223
> 
> 赞同：0
> 
> 时间：2013-02-21T18:03:46.090
> 
> 标签：android, android-view, imagebutton, onresume

如何刷新我的视图以进行更新？我想这样做的原因是因为我有一个`ImageButton`只有在某个条件为真时才会显示的。当用户导航回 Activity 时。

这是我的`onResume`方法中的代码，但它没有做任何事情。我想通过再次调用`setContentView()`它只会重新加载内容，但因为`ImageButton`现在设置为`VISIBLE`它会显示。

代码：

```
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    Toast.makeText(getApplicationContext(), "Resume Size: " + Order.getInstance().getOrderItems().size(), Toast.LENGTH_SHORT).show();
    price.setText(String.valueOf(Order.getInstance().getAmount()));
    confirmOrderBtn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                finish();
            }
        });

    if(Order.getInstance().getOrderItems().size() > 0){
        confirmOrderBtn.setVisibility(View.VISIBLE);
        this.setContentView(R.layout.activity_starters);
        confirmOrderBtn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                //Load up review order
                Toast.makeText(v.getContext(), "REVIEW ORDER", Toast.LENGTH_SHORT).show();

            }
        });
    }
    } 
```

非常感谢任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:11:53.157

`setVisibility()`就其本身应该`invalidate()`你的看法。您应该调试并检查您的`getOrderItems().size()`调用是否返回了您期望的结果。不过，你不应该再打电话`setContentView()`了`onCreate()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:24:35.390

在你`onCreate()`把这段代码

```
 confirmOrderBtn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                //Load up review order
                Toast.makeText(v.getContext(), "REVIEW ORDER", Toast.LENGTH_SHORT).show();

            }
        });
    } 
```

在您的`onResume`使用中：

```
if(Order.getInstance().getOrderItems().size() > 0){
        confirmOrderBtn.setVisibility(View.VISIBLE);
} 
```

# javascript - 在 contenteditable 中添加新行时字数错误

> ID：15009224
> 
> 赞同：4
> 
> 时间：2013-02-21T18:03:48.687
> 
> 标签：javascript, jquery, html, counter, contenteditable

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:31:40.570

你可以使用这个：

```
$("#post_content").children().each(function(index, el){buffer += $(el).text()+"\n"}) 
```

这样，您可以遍历您内部的所有元素`div`并仅获取文本，在它们之间放置一个“\n”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-04T16:30:23.160

杰斐逊的回答很棒，它帮助我解决了同样的问题。我遇到的问题是我的`contenteditable`div 的内容没有完全包裹在 HTML 标签中。

例如，我`div`包含以下 HTML 代码：

```
This is my first line<div>This is my second line</div> 
```

通过使用`$.children()`，它忽略了第一行，只返回了 5 个字数。为了解决这个问题，我`$.contents()`改用了。修改后的代码如下：

```
$("#post_content").contents().each(function(index, el){buffer += $(el).text()+"\n"}) 
```

这返回了 10 的行数。

Apologies for adding this as an answer and not as a comment to Jefferson's answer, however my reputation is too low to allow me to do that. I felt it was worth pointing the above out though.

# php - 在 PHP 中插入和查看 SQL 表

> ID：15009226
> 
> 赞同：0
> 
> 时间：2013-02-21T18:03:59.077
> 
> 标签：php, sql

config.php 是具有连接代码的全局文件。

我更新的 Insert.php 代码是：

```
<?php

include("config.php");

if ($submit) {
    if (isset($_POST[firstname]) && isset($_POST[lastname]) && isset($_POST[age])) {
        $sql = "INSERT INTO Persons (FirstName, LastName, Age) VALUES ('$_POST[firstname]','$_POST[lastname]','$_POST[age]')";
        mysql_query($sql, $connect); 
        echo "1 record added";
    }
    else {
        // do nothing now
    }
}
else {
?>
<form action="<?php echo $PHP_SELF ?>" method="post">
Firstname: <input type="text" name="firstname">
Lastname: <input type="text" name="lastname">
Age: <input type="text" name="age">
<input type="submit">
</form>

<?php
}

//if (!mysql_query($sql,$connect))
 //{
  //die('Error: ' . mysql_error());
  //}

mysql_close($connect);
?> 
```

我的 View.php 代码是：

```
<?php
include("config.php");

$sql = mysql_query("SELECT * FROM Persons");
while($results = mysql_fetch_array($sql)) {
    echo $results['FirstName'] . ', ' . $results['LastName'] . ', ' . $results['Age'] . '<br/>';
}

if (!mysql_query($sql,$connect))
{
  die('Error: ' . mysql_error());
}

mysql_close($connect);
?> 
```

我的 Config.php 代码是：

```
<?php

$dbhost="MYWEBHOST";
$dbusername="MYUSERNAME";
$dbpassword="MYPASSWORD";
$dbname="MYDATABASE";

$connect = mysql_connect($dbhost, $dbusername, $dbpassword);
mysql_select_db($dbname,$connect) or die ("Could not connect to database");

?> 
```

执行 Insert.php 后，我收到“1 条记录添加消息”，当我转到 View.php 时，我收到以下错误：“错误：您的 SQL 语法有错误；请查看对应的手册您的 MySQL 服务器版本，以便在第 1 行的“资源 id #4”附近使用正确的语法”

我做错什么了？

另外，如何防止用户刷新不断向表中添加空值的 Insert.php 页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:16:17.287

您只将 SQL 语句分配给变量，但从不执行它。试试这个：

`$sql = "INSERT INTO Persons (FirstName, LastName, Age) VALUES ('$_POST[firstname]','$_POST[lastname]','$_POST[age]')";`

`mysql_query($sql);`

`echo "1 record added";`

有不同的方法可以防止人们重新加载您的 insert.php。一般来说，您的 insert.php 需要决定当前是否允许用户调用它。在现代 php 开发中，我们不再为给定任务使用单个 .php 文件，而是使用路由和框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:26:34.843

试试这个

```
<?php
include("config.php");

$sql = mysql_query("SELECT * FROM Persons");
if ($sql) {
    while($results = mysql_fetch_array($sql)) {
        echo $results['FirstName'] . ', ' . $results['LastName'] . ', ' . $results['Age'] .     '<br/>';
    }
} else {
    die('Error: ' . mysql_error());
}

mysql_close($connect);
?> 
```

# php - 由于验证值无效，Authorize.net CIM 用户验证失败

> ID：15009228
> 
> 赞同：2
> 
> 时间：2013-02-21T18:04:03.187
> 
> 标签：php, authorize.net

我目前遇到这个问题。问题是它在测试模式下运行良好，但是当我们尝试使用实时 ID 和事务密钥时，我们不断收到错误...我在想也许请求仍在尝试发布到测试服务器，我们需要将请求强制到现场

这是我们的实例化代码

```
// authorize.net account credentials
$auth_test_mode = false;
if ($auth_test_mode) {
    define("AUTHORIZENET_API_LOGIN_ID", "testid");
    define("AUTHORIZENET_TRANSACTION_KEY", "testkey");
} else {
   define("AUTHORIZENET_API_LOGIN_ID", "ourid");
   define("AUTHORIZENET_TRANSACTION_KEY", "ourkey");
} 
```

任何帮助将不胜感激

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:28:59.647

您还需要指定您使用的 URL。测试服务器和实时服务器使用不同的 URL。如果你也不改变它，你会得到这个错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:32:05.310

如果您使用的是 authorizenet-php-api，那么也包括这一行：

```
define("AUTHORIZENET_SANDBOX", false); 
```

另外，仅供参考，您不需要为您的 API 密钥定义，您可以使用如下函数：

```
authorizeNetGetDailyTransaction($account['loginID'],$account['transactionID']) 
```

如果您必须从同一页面登录多个帐户，这是唯一的方法。

# java - 教师考勤的Netbeans桌面应用

> ID：15009230
> 
> 赞同：-5
> 
> 时间：2013-02-21T18:04:04.437
> 
> 标签：java, netbeans, frame

我使用netbeans。我做了一个让老师出席的java项目。一切都好。但问题是，当我最大化该应用程序时，所有文本字段、标签、按钮的大小都会受到干扰，这意味着它们的方式不像我在 netbeans 中所做的那样。有大小自动变化。请帮助

它是一个 netbeans 项目...查看代码

```
public class about extends javax.swing.JFrame {

    /** Creates new form about */
    public about() {
        initComponents();

    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jButton1 = new javax.swing.JButton();
        jLabel5 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setBackground(new java.awt.Color(0, 0, 0));

        jLabel1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/soft/36574_3587439778456_1199359522_n.jpg"))); // NOI18N
        jLabel1.setText("jLabel1");
        jLabel1.setAlignmentX(100);
        jLabel1.setAlignmentY(100);

        jLabel2.setText("Rajdeep Sinha");
        jLabel2.setAlignmentX(100);
        jLabel2.setAlignmentY(100);

        jLabel3.setText("B.tech  C.S.");
        jLabel3.setAlignmentX(100);
        jLabel3.setAlignmentY(100);

        jLabel4.setText("9621804097, 8687913559");
        jLabel4.setAlignmentX(100);
        jLabel4.setAlignmentY(100);

        jButton1.setText("Next-->");
        jButton1.setAlignmentX(100);
        jButton1.setAlignmentY(100);
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        jButton1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jButton1KeyPressed(evt);
            }
        });

        jLabel5.setIcon(new javax.swing.ImageIcon(getClass().getResource("/soft/ganesh-wallpapers-photos.jpg"))); // NOI18N
        jLabel5.setText("jLabel5");
        jLabel5.setAlignmentX(100);
        jLabel5.setAlignmentY(100);
        jLabel5.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(34, 34, 34)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jLabel4, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 255, Short.MAX_VALUE)
                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 115, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(jLabel3, javax.swing.GroupLayout.DEFAULT_SIZE, 138, Short.MAX_VALUE))))
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jLabel5, javax.swing.GroupLayout.PREFERRED_SIZE, 279, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 95, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jButton1))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel1)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 131, Short.MAX_VALUE)
                        .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 29, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel4, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jLabel5, javax.swing.GroupLayout.PREFERRED_SIZE, 172, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );

        pack();
    }// </editor-fold>                        

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        // TODO add your handling code here:
        p1 ll=new p1();
        ll.setVisible(true);
    }                                        

    private void jButton1KeyPressed(java.awt.event.KeyEvent evt) {                                    
        // TODO add your handling code here:

    }                                   

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(about.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(about.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(about.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(about.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new about().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify                     
    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    // End of variables declaration                   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:06:18.997

使用[GridBagLayout](http://docs.oracle.com/javase/7/docs/api/java/awt/GridBagLayout.html)它会在您调整窗口大小时自动调整组件大小

检查[这个](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)寻求帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:06:54.787

您可能希望将 LayoutManager 添加到您的窗口。NetBeans 支持它。在 NetBeans 中的窗口内单击鼠标右键，将鼠标悬停在“设置布局”并选择适当的 LayoutManager。

我总是使用 GridBagLayout。这是一个教程：[http ://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)

祝你好运。

# mysql - 如何从不符合某些条件的表中删除行

> ID：15009240
> 
> 赞同：1
> 
> 时间：2013-02-21T18:04:48.380
> 
> 标签：mysql, duplicate-removal, delete-row

我遇到了一个问题，到目前为止我找不到答案。

我有一张这样的桌子：

```
column1 | column2 | column3
---------------------------
name1   | 3       | 12
name1   | 3       | 10
name1   | 2       | 17
name2   | 3       | 15
name2   | 3       | 15
name2   | 2       | 11 
```

如何删除在`column2`和 column3 中没有最高值的行，（`Column2`具有优先级）？

结果应如下所示：

```
column1 | column2 | column3
---------------------------
name1   | 3       | 12
name2   | 3       | 15
name2   | 3       | 15 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:29:11.450

您可以使用这样的查询：

```
DELETE FROM yourtable
WHERE
  (column1, column2, column3) NOT IN (
    SELECT * FROM (
      SELECT yourtable.column1, yourtable.column2, max(column3) max_column3
      FROM
        yourtable INNER JOIN (
          SELECT   column1, max(column2) max_column2
          FROM     yourtable
          GROUP BY column1) mx
        ON yourtable.column1=mx.column1
           AND yourtable.column2=mx.max_column2
      GROUP BY
        yourtable.column1) s
  ) 
```

请[在此处](http://sqlfiddle.com/#!2/c92dc9/1)查看小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:32:32.893

删除会让人感到困惑，但这些是您要保留的行：

```
SELECT 
    a.col1, a.col2, b.col3 
FROM
    (select col1, max(col2) as col2 from table1 group by col1) as a INNER JOIN
    (select col1, col2, max(col3) as col3 from table1 group by col1, col2) as b 
    ON 
        a.col1 = b.col1 AND a.col2 = b.col2; 
```

如@fthiella 所述，您可以简单地删除不在此查询中的行。

看到这个[链接](http://sqlfiddle.com/#!2/5a9a6/1/0)。

# jquery - 使用 $this 的无效赋值左侧

> ID：15009241
> 
> 赞同：0
> 
> 时间：2013-02-21T18:04:52.463
> 
> 标签：jquery

随着浏览器宽度的减小，我正在尝试调整一系列图像的大小。下面的代码工作正常，但是当然随着浏览器的增加，传递的 img 不能被 resize 裁剪为更大的尺寸。

```
$('#image img').each(function() {
      $($(this)).resizecrop({
      width:width,
      height:height,
      vertical:"top"
    });  
}); 
```

使用此代码，我试图通过原始图像，调整大小裁剪它，然后将其换成较小的图像。我收到一个错误，将新图像分配给 $(this) （无效的左侧和侧面分配）。

这是为什么，我做错了什么？谢谢，

```
$('#image img').each(function() {
var img_path =  $($(this))[0].src;
var img = $('<img />').attr({ 'src': img_path }); 
$(this) = img;

      $($(this)).resizecrop({
      width:width,
      height:height,
      vertical:"top"
    });  
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:26:53.503

让我们澄清一些你似乎有的*误解..*

*   `$($(this))`是相同的`$(this)`
*   `$(this)[0]`何时`this`是 DOM 元素与`this`
*   you cannot assign a value to a jquery object in order to replace the referenced DOM element, so the `$(this) = img` does not work (*it is what throws that error you mention*)

* * *

Now, the plugin you use ([http://code.google.com/p/resize-crop/](http://code.google.com/p/resize-crop/)) wraps the targeted element in another in order to do its thing..

You will have to unwrap the element, and clear its style for the re-applying of the plugin to work. Also the plugin works as well with a set of element, not only for single elements so you do not have to use `.each()` to run the plugin for each image..

```
$('#image img').unwrap().removeAttr('style').resizecrop({
        width:width,
        height:height,
        vertical:"top"
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:07:20.960

您无需在`img`任何地方重新分配。它已经是一个 JQuery 对象，所以只需使用它：

```
$('#image img').each(function() {
var img_path =  $($(this))[0].src;
var img = $('<img />').attr({ 'src': img_path }); 
img.resizecrop({
      width:width,
      height:height,
      vertical:"top"
    });  
}); 
```

# asp.net - w3wp.exe 正在重新启动，但所有 GET 请求最终都会排队并得到服务？

> ID：15009243
> 
> 赞同：0
> 
> 时间：2013-02-21T18:05:00.153
> 
> 标签：asp.net, caching, iis, asp.net-mvc-4, iis-7.5

我有一个 w3wp.exe 在我的 IIS 服务器上重新启动（请参阅下面的规范）。内存逐渐攀升至约 3G，然后它大约每 1-2 分钟随机重新启动一次。

**内存使用情况：** ![在此处输入图像描述](../Images/b3eb01cb391f00e6c3cd9027ee73b0f8.png)

奇怪的是，一旦这种内存下降（看起来像重新启动 - 顺便说一句......应用程序池没有被回收/重新启动）发生 GET 请求排队，但一旦服务预热/启动就会得到服务（导致延迟响应我们的客户——他们最初有时会报告延迟的响应时间）。

一旦 .exe 重新启动（私有字节转到 ~0），我已经按照此链接获取堆栈转储，但是一旦服务重新启动，诊断调试不会记录任何内容（没有 .dmp 文件）。

我在我的网络服务器 (IIS) 日志中看到大量警告，仅此而已：

> 为应用程序池“MyApplication”提供服务的进程与 Windows 进程激活服务发生了致命的通信错误。进程 ID 为“1732”。数据字段包含错误号。

**问：**我不确定这是否是内存限制，如果缓存不能很好地与我的线程/任务一起使用，如果缓存正在爆炸，是否有看门狗服务重新启动我的应用程序等等。有没有人遇到过类似 w3wp.exe 重启的问题？很难说，因为 diagdebug 重新启动后不会给我转储。

**眼镜：**

*   MVC4 Web API 为 GET 请求提供服务（代码是 debug=true 的调试版本）
*   将 MemoryCache 与模型和业务对象一起使用，并将缓存逐出设置为 2 小时...使用
*   每个新请求的任务 (TPS)。
*   数据库：SQL Server 2008R2
*   Web 服务器：Windows Server 2008R2 Enterprise SP1（64 位，64G RAM）
*   IIS 7.5
*   一个应用程序池...此服务器上没有运行其他 LOB 应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:39:41.777

您的第一步是在您的测试环境中重现问题。设置某种负载生成应用程序（您可以很容易地自己编写）并遇到同样的问题。然后在 web.config 中关闭调试，看看是否能解决问题。然后将其更改为发布版本并再次测试。

我从未使用过 memorycache - 尝试减少缓存逐出时间或将其关闭，看看是否能解决问题。祝你好运 ：）

# java - 在两次 jodatime 之间执行函数

> ID：15009246
> 
> 赞同：0
> 
> 时间：2013-02-21T18:05:10.323
> 
> 标签：java, jodatime

我想知道如何在两次之间执行一个函数，比如早上 6 点和下午 3 点？出于测试目的，我有下面的代码，但我确信有更好的方法来做我想做的事。

`if(dt.getHourOfDay() > 12 && dt.getHourOfDay()+dt.getMinuteOfHour() < 13){ // execute function }`

该代码仅检查小时是否为 12 以及时间是否在 12 到 12:01 之间。

你能告诉我一个更好的实现我想要的东西吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:50:27.477

首先，在您的示例中，为了简单起见，您希望这样做：

```
if (dt.getHourOfDay() == 12 && dt.getMinuteOfHour() == 0) {

} 
```

也许：

```
if (dt.getHourOfDay() == 12 && dt.getMinuteOfHour() >= 0 && dt.getMinuteOfHour() < 1) {

} 
```

如果不想直接比较，可以创建两个你想要的时间对应的瞬间，使用AbstractInstant的isBefore和isAfter方法，或者isBeforeNow，isAfterNow。就像是：

```
Instant todayMidnight = new DateMidnight().toInstant();
Instant earliest = todayMidnight.plus(Hours.hours(6).toStandardDuration());
Instant latest = todayMidnight.plus(Hours.hours(15).toStandardDuration());
if (latest.isAfterNow() && earliest.isBeforeNow()) {
  // Execute 
} 
```

有点笨拙，因为您必须反复构造 todayMidnight 对象，但非常清楚您在做什么。

但你实际上想做什么？您是否正在尝试以“cron”之类的方式运行某些东西？或者将某些代码的访问权限限制在一天中的特定时间？视情况而定，可能有更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:09:56.673

我真的会研究一个调度库，这种东西可能会因为时区、夏令时等而变得非常复杂。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T18:49:57.600

这是我的解决方案。它不是更短，而是更容易理解。

```
int secBetween = Seconds.secondsBetween(new LocalTime(12, 0), dt.toLocalTime()).getSeconds(); 
if ( secBetween > 0 && secBetween < 60) { ... } 
```

# jquery - 通过执行任何 JSON 代码获取数据表的 JSON 格式错误

> ID：15009249
> 
> 赞同：0
> 
> 时间：2013-02-21T18:05:16.253
> 
> 标签：jquery, spring, rest, datatables

我正在使用 JQuery Datatables 使用 ajax 调用来获取服务器数据。我过去成功地做到了这一点。这次我尝试的新方法是使用 fnServerParams 传递 3 个参数。

在jsp中我有：

```
<script>
    <%--Initializes the datatable --%>
    var userNameJs = "${userName}";
    var startDateJs = "${startDate}";
    var endDateJs = "${endDate}";

    $(document).ready(function() {

            var oTable = $('#userSearchItems')
                .dataTable(
                    {
                    "bProcessing": true,
                    "iCookieDuration": 3600,
                    "bPaginate" : true,
                    "bServerSide": true,
                    "sPaginationType": "bootstrap",
                    "aaSorting":[[0,'asc']],
                    "sAjaxSource": '/kb/report/view/searchesByUserOverDatesAjax/{userName}/{startDate}/{endDate}',
                    "fnServerParams": function (aoData) {
                        aoData.push({ "name": "userName", "value": userNameJs});
                        aoData.push({ "name": "startDate", "value": startDateJs});
                        aoData.push({ "name": "endDate", "value": endDateJs});
                    }
                    });
    });
</script>

<table style="width: 100%; table-layout: fixed;" class="zebra-striped bordered-table" id="userSearchItems">
        <thead>
            <tr>
                <th>When Entered</th>
                <th >Search Term</th>
            </tr>
        </thead>
        <tbody>
           <tr>
               <td></td>
               <td style="word-wrap: break-word"></td>
          </tr>         
       </tbody>
    </table> 
```

在 Spring 控制器中，我有：

```
@RequestMapping(value="/searchesByUserOverDatesAjax/{userName}/{startDate}/{endDate}{", method=RequestMethod.GET)
public @ResponseBody String searchesByUserOverDates(@PathVariable("userName") String userName,
    @PathVariable("startDate") String startDate, @PathVariable("endDate") String endDate) {
System.out.print("HERE IN AJAX");
    JSONObject result = new JSONObject();
    JSONArray array = new JSONArray(); 
```

我收到一个弹出错误：

DataTables 警告：无法解析来自服务器的 JSON 数据。这是由 JSON 格式错误引起的。

但是方法 searchByUserOverDates() 永远不会执行。在 FireBug/Net 中，它显示我从 HTTP 调用收到了 200 OK，并且参数发送正常，但我的 sysout 和调试断点从未被命中。

它似乎没有调度该方法。我在日志或 js 错误控制台中没有收到任何错误。

我看到这个错误消息在 jQuery 1.4 之前存在一些 pre-JQuery 问题，但我们在 1.8

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:40:39.067

啊愚蠢的东西...额外的{在java方法parm的末尾。

现在它起作用了。有趣的是，编译器或 Spring mvc 从未注意到这一点。

干杯

# ios - 如何正确对齐应用程序设置包中的文本字段，iOS？

> ID：15009251
> 
> 赞同：3
> 
> 时间：2013-02-21T18:05:24.700
> 
> 标签：ios, alignment, bundle, settings.bundle

我的应用程序设置包中有两个文本字段，用户可以在其中提供纬度和经度值。

捆绑设置如下所示：

![在此处输入图像描述](../Images/c7bcddba0832e44b14e011d40ce9da92.png)

如您所见，值（43.46 和 -3.81）左对齐。

有没有办法让它们正确对齐，让它看起来更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:27:45.063

似乎这个问题的唯一答案是在文本字段的标题上添加空格，直到您的值移动到左侧。

不是很精致，但看起来比这更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-16T16:03:25.833

这在应用内设置视图中对我有用。我没有尝试过设置。

打开属性列表文件作为源并将以下内容粘贴到要右对齐的每个条目：

```
 <key>IASKTextAlignment</key>
        <string>IASKUITextAlignmentCenter</string> 
```

或者通过 plist 编辑器执行相同的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-29T12:51:35.493

你可以用不同的方式做到这一点。您必须添加一个标题首选项。并在其中添加标题和值。我这里有截图

![设置捆绑 plist 文件](../Images/ca507d24867d5da70082d2121318c129.png)

结果设置屏幕将如下所示，

![在此处输入图像描述](../Images/f088e5f20eb2421e3de306cd0c083813.png)

# java - 如何确定正在使用 spring logging 扫描哪些包

> ID：15009253
> 
> 赞同：1
> 
> 时间：2013-02-21T18:05:28.267
> 
> 标签：java, spring, log4j

我试图弄清楚为什么我的@Autowire 没有自动装配我的服务。我想确认正在扫描正确的包裹。

我已经在我的应用程序中实现了 log4j 并使用了配置：

```
log4j.rootCategory=DEBUG, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %t %c{2}:%L - %m%n

log4j.category.org.springframework=DEBUG 
```

我看到一些线条...

```
INFO: Building JPA container EntityManagerFactory for persistence unit 'unit'
12:45:19,627 DEBUG main packaging.AbstractJarVisitor:172 - Filtering: com.production.api.dao.Config
12:45:19,628 DEBUG main packaging.AbstractJarVisitor:172 - Filtering: com.production.api.dao.GenericDao
12:45:19,642 DEBUG main packaging.AbstractJarVisitor:172 - Filtering: com.production.api.dao.JobAssetDao
12:45:19,643 DEBUG main packaging.AbstractJarVisitor:172 - Filtering: com.production.api.dao.JobDao
12:45:19,644 DEBUG main packaging.AbstractJarVisitor:172 - Filtering: com.production.api.dao.JobSetDao 
```

这些行是否表明正在扫描这些包裹？ `Filtering`对我来说，这听起来像是被过滤掉了，而不是被扫描了。

**更新：**我在这里发布了另一个问题：[How to fix xml-less](https://stackoverflow.com/questions/15009641/how-to-fix-xml-less-autowiring-of-service) autowireing of service 解决我的自动装配问题。但我希望将这个问题集中在春季的伐木上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:15:01.327

该日志记录看起来像 Hibernate，而不是 Spring。您的转换模式没有帮助；我建议您删除`{2}`after `%c`，以显示完整的记录器包名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:21:36.033

好吧，我开始使用 Spring Stool 套件进行 Spring 开发，我的特点是，如果使用注释将类定义为 bean，您会在项目资源管理器中的文件名上看到一个箭头和一个符号“S”。

第二种方法是仅删除该特定类/方法上的注释并在您的 context.xml 类中定义。可能包名称不正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T18:19:03.583

我很失望没有人能够回答这个问题。显然，下面的行将告诉您哪些类正在作为 bean 加载......

```
Feb 28, 2013 1:16:11 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@3ff33ecb: defining beans .... 
```

# magento - Magento：在任何电子邮件模板上打印付款信息

> ID：15009254
> 
> 赞同：1
> 
> 时间：2013-02-21T18:05:40.727
> 
> 标签：magento

我已经将 var {{var payment_html}} 放在电子邮件模板“order_update.html”中进行了测试，但是当 Magento 使用此模板发送电子邮件时，任何付款信息都会打印在“付款详细信息”框中。在那之后，我搜索了一下，我在[这个链接](http://www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/system_email_template/index "这个链接")上发现有些变量对某些模板不起作用。我想知道是否可以在订单更新电子邮件模板上显示付款详情。

有人知道如何做到这一点吗？

# javascript - Javascript缓存工具和技术

> ID：15009259
> 
> 赞同：0
> 
> 时间：2013-02-21T18:05:59.073
> 
> 标签：javascript, jquery, scriptaculous

我有一个要求，我想循环浏览页面上的所有 DropDown（选择）控件。我正在使用以下方法选择所有 DropDown 控件：

```
var DropDowns = document.getElementByTagName('select'); 
```

我遍历这些 DropDowns 以编程方式设置几个控件的选项：

```
for (i=0; i<= DropDowns.Length; i++)
{
    var CurrentControl = DropDowns[i];
    CurrentControl.options[CurrentControl.selectedIndex].value = 1;
} 
```

是否有任何支持缓存的 Javascript 框架？我想缓存所有 DropDown 控件名称并循环通过缓存的名称，而不是直接循环通过 Document 对象。

有什么技巧可以提高循环的性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:12:18.070

我不认为你会看到一个只遍历 30-40 个元素的循环的性能有很大的改进，但是*一些*浏览器会通过遍历一个数组而不是 a`NodeList`或`HTMLCollection`原样来获得巨大的速度提升在一些实现 DOM 级别 1 的浏览器中调用。

因此，要回答您的问题，您可以将对象等“缓存”在一个数组中，并且它应该为将来的迭代加速该循环。

请注意，您需要使该数组保持最新，因为它不像 DOM 那样“实时”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:15:04.367

在 jquery 中，它看起来像这样：

```
var $menus = $('select');
$.each($menus, function(index, menu) {
    // Do whatever you want to the menu here
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:17:38.347

我建议一种不同的方法 - 使用逗号分隔值将选项保存在隐藏字段中，并在页面加载时通过解析分隔值来设置控件值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T18:21:51.810

我认为您已经比某些答案描述的更有效率。请记住，您不是在不断循环浏览文档，而是循环浏览缓存`NodeList`的`DropDowns`. 如果您想更改这些元素中的每一个，那么您将不可避免地需要循环访问它们以单独更改它们。

# php - PHP truncate mb_substr 给出不同长度的结果

> ID：15009260
> 
> 赞同：1
> 
> 时间：2013-02-21T18:06:00.090
> 
> 标签：php, utf-8, truncate

我正在使用此函数将某些标题截断为特定长度：

```
function truncateUTF8($str, $length, $breakWords = TRUE, $append = '...') {
    $strLength = mb_strlen($str);
    if ($strLength <= $length) {
       return $str;
    }
    if (!$breakWords) {
       while ($length < $strLength AND preg_match('/^\pL$/', mb_substr($str, $length, 1))) {
         $length++;
       }
    }
    return rtrim(mb_substr($str, 0, $length)) . $append;
} 
```

来电：

```
echo truncateUTF8($str,94); 
```

将在 UTF8 字符串上返回不同的字符串长度，看看这些字符串：

**ORIGINAL STR**
Mais de 100 carcaças de aviões de empresas falidas serão retiradas de aeroportos até o fim do ano
**// 98 个字符**

**TRUNCATED STR**
Mais de 100 carcaças de aviões de empresas falidas serão retiradas de aeroportos até o fim do...
**// 94 chars** - ok

**ORIGINAL STR**
Notícias Transbrasil – 28 – MP pod atuar em ações falimentares em que a lei não determina sua intervenção (STJ)
**// 113 chars**

**TRUNCATED STR**
Notícias Transbrasil – 28 – MP pode atuar em ações falimentares em que a lei não d...
**// 83 chars**

这里发生了什么？为什么第二个 str 被截断为 83 个字符而不是 94 个字符，就像第一个 str 一样？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:23:26.527

尝试一下

```
function truncateUTF8($str, $length, $breakWords = TRUE, $append = '...') {
    $strLength = mb_strlen($str);
    if ($strLength <= $length)
       return $str;
    return preg_replace('/(.{' . $length . '}).*/u', '$1' .  $append, $str);
} 
```

# django - 我如何显示没有相关对象的对象列表？

> ID：15009261
> 
> 赞同：1
> 
> 时间：2013-02-21T18:06:06.330
> 
> 标签：django, django-models, django-queryset

我对 django 查询有疑问。我是新的 Django 程序员。

我有三个模型：

```
class Device(models.Model):
    class Meta:
         ordering = ('dev',)
         verbose_name = _(u'Interface')

    dev = models.CharField(_(u'Interface'), max_length=5, editable=True,
          unique=True)
    enable = models.BooleanField(_(u'Enabled'), default=True)
    dhcp = models.BooleanField(_(u'DHCP'), default=False, 
```

第二个模型：

```
class Config(models.Model):
    class Meta:
       ordering = ('ip_address',)
       verbose_name = _(u'Network Configuration')
       verbose_name_plural = _(u'Network Configurations')

   device = models.ForeignKey(Device)
   ip_address = models.IPAddressField(_(u'IP Address'), unique=True)
   netmask = NetmaskAddressField(_(u'Netmask'))
   description = models.CharField(_(u'Description'), blank=True, null=True,
       max_length=255) 
```

第三个模型：

```
 class Dhcp(models.Model):

    class Meta:
       ordering = ('gateway',)
       verbose_name = _(u'DHCP Configuration')
       verbose_name_plural = _(u'DHCP Configurations')

   config = models.ForeignKey(Config)
   gateway = models.IPAddressField(_(u'Gateway'), null=True)
   dns_primary = models.IPAddressField(_(u'DNS Primary'), null=True)
   dns_second = models.IPAddressField(_(u'DNS Second'), blank=True)
   leases_time = models.IntegerField()
   nat = models.IPAddressField(_(u'NAT'), blank=True)
   max_time = models.IntegerField() 
```

**现在，我的问题是：如何显示没有 Dhcp 配置的设备列表？**

例如：我有`Device`其中具有三种配置。我需要检查所有配置`Device`以确保没有 DHCP 配置，最后显示设备，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T20:26:55.180

```
Device.objects.filter(config__dhcp__isnull=True) 
```

更多关于[这里的查询](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)

# mysql - MySQL View 无法识别 SELECT REPLACE()

> ID：15009263
> 
> 赞同：0
> 
> 时间：2013-02-21T18:06:14.363
> 
> 标签：mysql, replace, phpmyadmin, views

我被正式难住了。我使用以下代码创建了一个视图：

```
ALTER VIEW event_view AS
SELECT 
    '3' School_ID
    , P.post_title 'Short_Description'
    , P.post_content 'Description'
    , E.contact_name 'Contact_Name'
    , P.post_type 'Post_Type'
    , DATE( E.start ) 'Start_Date'
    , TIME( E.start ) 'Start_Time'
FROM cm_3_posts P
LEFT OUTER JOIN cm_3_ai1ec_events E
    ON E.post_ID = P.ID
WHERE P.post_status = 'publish'
    AND P.post_type = 'ai1ec_event' 
    AND E.start > NOW() - INTERVAL 30 DAY
    AND E.start < NOW() + INTERVAL 30 DAY 
```

但是，我想从视图的“描述”字段中的数据中删除任何逗号。这个查询似乎应该可以工作，但是当它运行时，结果显示（在 PHPMyAdmin 中）逗号被删除，但是当我重新加载视图时，逗号又回来了。

```
SELECT REPLACE( Description, ',', '' )
FROM event_view
WHERE Description LIKE '%,%'; 
```

我的问题是，如何在我的视图中永久删除“描述”列字段中的逗号？我尝试了很多方法都没有成功。非常感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:12:38.510

更改视图定义中返回`Description`列（即`post_content`列）的行。

替换这个：

```
, P.post_content `Description` 
```

有了这个：

```
, REPLACE(P.post_content, ',', '' ) AS `Description` 
```

# r - 在 xts/zoo 对象的滞后系列上应用 min/max

> ID：15009265
> 
> 赞同：1
> 
> 时间：2013-02-21T18:06:19.047
> 
> 标签：r, xts, zoo

`max`Close 列的 是有效的，但为什么是滞后`max`的 Close `NA`？

```
> library(quantmod)
> s <- get(getSymbols('nvmi'))
> max(Cl(s))
[1] 11.48
> max(Lag(Cl(s)))
[1] NA
> max(as.numeric(Lag(Cl(s))))
[1] NA 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:11:06.420

因为`Lag`垫`NA`默认情况下。`na.rm=TRUE`在您的呼叫中使用`max`.

```
> head(Cl(s))
           NVMI.Close
2007-01-03       2.60
2007-01-04       2.59
2007-01-05       2.70
2007-01-08       2.60
2007-01-09       2.47
2007-01-10       2.42
> head(Lag(Cl(s)))
           Lag.1
2007-01-03    NA
2007-01-04  2.60
2007-01-05  2.59
2007-01-08  2.70
2007-01-09  2.60
2007-01-10  2.47
> max(Lag(Cl(s)), na.rm=TRUE)
[1] 11.48 
```

# magento - 将多个项目添加到特殊页面

> ID：15009268
> 
> 赞同：0
> 
> 时间：2013-02-21T18:06:31.713
> 
> 标签：magento, magento-1.7, categories, product

我有一个快速的如何向 Magento 提问。

在我的主站点上，我需要有 7 个指向特殊“类别”项目的链接，但这些不反映项目的类别。它适用于服装店，因此链接可能指向夏季服装页面，以仅显示标记为夏季服装的商品，但来自所有类型的商品和类别。

创建此功能的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:18:00.147

您可以为您提到的 7 个页面中的每一个创建类别，但在类别设置页面的导航中隐藏它们。

然后，您可以将您的产品添加到您认为合适的这些类别中。

它们也将保留在原来的类别中，但您现在可以链接到新页面并在那里查看它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:05:31.863

我假设当您说“标记”时，您的意思是产品的属性设置为“夏季”。在这种情况下：

如果您有产品要按属性分组并列出类似于类别页面而不属于类别，您可以尝试使用 Fishpig Splash Page 扩展： [http ://fishpig.co.uk/attribute-splash-pages .html](http://fishpig.co.uk/attribute-splash-pages.html) 此扩展名允许产品属性对产品而不是类别进行分组。

我希望我正确理解了你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T20:19:11.920

在我看来，您只需像正常一样创建类别。因为产品可以属于许多类别，所以您只需根据每个产品分配哪些产品需要属于您的类别。

# php - 使用 Doctrine 和 Symfony 导出到 csv 文件

> ID：15009271
> 
> 赞同：2
> 
> 时间：2013-02-21T18:06:45.890
> 
> 标签：php, doctrine, symfony-1.4

我正在使用 Doctrine 和 symfony 从数据库表中导出。我已经调用了我的数据库

```
$variableTable = Doctrine::getTable('Table Name')->findAll(); 
```

然后我设置另一个变量来从中获取数据，如下所示：

```
$variable = $variableTable->getData(); 
```

我只是希望能够遍历它，这样我就可以将需要放入 csv 文件的数据提取出来，但我被困在了那部分。出于某种原因，当我调试时，它显示设置为 getData 值的第二个变量是 null/0。

我不确定我是否遗漏了什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T18:17:15.650

我想也许你正试图调用`getData`集合而不是调用`getData`记录......但这没有多大意义，因为你仍然必须调用`getData`每条记录，所以你不妨循环遍历集合。此外，由于某些疯狂的原因，您可能没有任何结果，`findAll`因此我认为您应该考虑到这一点。无论如何，类似于以下的代码过去对我有用，因此如果没有您的代码详细信息，它是我能提供的最好的：

```
$records = Doctrine::getTable('RecordName')->findAll();

if($records->count()) {
   $csvPath = '/path/to/csv/file.csv';

   $csvh = fopen($csvPath, 'w');
   $d = ','; // this is the default but i like to be explicit
   $e = '"'; // this is the default but i like to be explicit

   foreach($records as $record) {
       $data = $record->toArray(false); // false for the shallow conversion
       fputcsv($csvh, $data, $d, $e);
   }

   fclose($csvh);

  // do something with the file
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T15:45:34.717

现有的数据导入\导出解决方案。

考虑使用其中之一：

*   [https://github.com/orocrm/platform/tree/master/src/Oro/Bundle/ImportExportBundle](https://github.com/orocrm/platform/tree/master/src/Oro/Bundle/ImportExportBundle)
*   [https://github.com/sonata-project/exporter](https://github.com/sonata-project/exporter)

# r - R - 拆分数据，回归并将方程应用于新的拆分数据集

> ID：15009272
> 
> 赞同：5
> 
> 时间：2013-02-21T18:06:54.163
> 
> 标签：r, split, apply

我有一个包含新旧数据的大型数据集。我创建了两个数据框，EarlyYears 使用旧数据，LaterYears 使用新数据，因此它们具有相同的列。

我想要做的是回归早年的数据以确定一个方程并将其应用于晚年以测试方程的强度 - A 和 B 是常数，输入是我正在测试的 - 我为不同的运行改变它代码 - Dummy 为 1 表示没有输入数据。但是，我想将 EarlyYears 和 LaterYears 数据按其中一个变量的五分位数进行拆分，并将 EarlyYears 的五分位数 1 中的方程应用于来自 LateYears 的五分位数 1 中的数据。我在 R 方面相当新，到目前为止有：

```
Model<-data.frame(Date = rep(c("3/31/09","3/31/11"),each = 20), 
InputRating = rep(c(1:5), 8), Dummy = rep(c(rep(0,9),1),4),
Y = rep(1,3,5,7,11,13,17,19), A = 1:40,B = 1:40*3+7)
newer<-as.numeric(grep("/11",Model$Date))
later<-as.numeric(grep("/11",Model$Date,invert = TRUE))

LaterYears<-Model[newer,]
EarlyYears<-Model[later,]
newModel<-EarlyYears

DataSet.Input<-data.frame(Date = newModel$Date, InputRating = newModel$InputRating, 
Dummy = newModel$Dummy, Y = newModel$Y, A = newModel$A,B = newModel$B)
quintiles<-quantile(DataSet.Input$A,probs=c(0.2,0.4,0.6, 0.8, 1.0))
VarQuint<-findInterval(DataSet.Input$A,quintiles,rightmost.closed=TRUE)+1L

regressionData<-do.call(rbind,lapply(split(DataSet.Input,VarQuint),
FUN = function(SplitData) { 
SplitRegression<-lm(Y ~ A + B + InputRating + Dummy, data = SplitData, na.action = na.omit) 
c(coef.Intercept = coef(summary(SplitRegression))[1],
coef.A = coef(summary(SplitRegression))[2], 
coef.B = coef(summary(SplitRegression))[3],
coef.Input = coef(summary(SplitRegression))[4],
coef.Dummy= coef(summary(SplitRegression))[5])
}))

i = 0
quintiles.LY<-quantile(LaterYears$A,probs=c(0.2,0.4,0.6, 0.8, 1.0))
Quint.LY<-findInterval(LaterYears$A,quintiles,rightmost.closed=TRUE)+1L

LaterYears$ExpectedValue <-apply(split(LaterYears,Quint.LY),1,
FUN = function(SplitData) {
  i=i+1
  regressionData[i,1]+regressionData[i,2]*SplitData$A +
  regressionData[i,3]*SplitData$B + regressionData[i,4]*SplitData$Input +
  regressionData[i,5]*SplitData$Dummy    
}) 
```

第一部分非常适合在回归数据中获取数据。我希望将应用方程式的结果保存在 LateYears 数据集中的列中，但出现错误 -

```
Error in apply(split(LaterYears, Quint.LY), 1, FUN = function(SplitData) { :
dim(X) must have a positive length 
```

使用apply运行时，使用我最初尝试的lapply运行时为空白。

任何有关如何解决此问题的帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T04:42:36.293

也许像这样，使用`predict`会更好。它不适用于您的示例数据，但它可能适用于真实数据。

```
# by, splits a dataset by a factor
regressionData <- by(DataSet.Input,VarQuint,
                     function(d) {
                       lm1 <- lm(Y ~ A + B + InputRating + Dummy, d)
                     })

quintiles.LY<-quantile(LaterYears$A,probs=seq(0,1,0.2))
Quint.LY<-findInterval(LaterYears$A,quintiles,rightmost.closed=TRUE)+1L

LaterYearsPredict <- split(LaterYears,Quint.LY)

# lapply's arguments can be anything that is a sequence
LaterYears$ExpectedValue <- unlist(lapply(1:length(LaterYearsPredict),
       function(x) 
         predict(regressionData[[x]],LaterYearsPredict[[x]])
       )) 
```

# c# - “线程的同步访问”是否与“同步共享对象”相反？

> ID：15009274
> 
> 赞同：0
> 
> 时间：2013-02-21T18:06:57.543
> 
> 标签：c#, multithreading, asynchronous, synchronization, locking

什么是成语：

> “我们得到不一致的输出，因为这些线程对打印机对象的访问是同步的”

在[C# 中的 Threads 和 Thread Synchronization 一](http://www.codeproject.com/Articles/26130/Threads-and-Thread-Synchronization-in-C)文中是什么意思？

什么是“一致输出”和“同步访问”？
在同步共享对象使用的文章描述中，“线程的同步访问”是否是不一致的同义词以及以下内容的反义词/反义词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:17:00.520

> “线程的同步访问”是否与“同步共享对象”相反？

不，这些具有相同的含义。

文章应该说：

> “我们得到不一致的输出，因为这些线程对打印机对象的访问**不**同步”

> 什么是“一致输出”和“同步访问”？

每次运行程序时，一致的输出都是相同的。同步访问是互斥访问：只有一个线程可以访问资源

> 在同步共享对象使用的文章描述中，“线程的同步访问”是否是不一致的同义词以及以下内容的反义词/反义词？

不。

# python - 使用 JSON 和字典在 Python 中处理错误

> ID：15009276
> 
> 赞同：4
> 
> 时间：2013-02-21T18:07:03.397
> 
> 标签：python, json, dictionary, python-2.7

我目前有一个 Python 2.7 脚本，它可以抓取 Facebook 并从每个页面捕获一些 JSON 数据。JSON 数据包含个人信息。JSON数据的示例如下：-

```
{
   "id": "4",
   "name": "Mark Zuckerberg",
   "first_name": "Mark",
   "last_name": "Zuckerberg",
   "link": "http://www.facebook.com/zuck",
   "username": "zuck",
   "gender": "male",
   "locale": "en_US"
} 
```

JSON 值可能因页面而异。上面的示例列出了所有可能的情况，但有时，“用户名”之类的值可能不存在，我可能会遇到 JSON 数据，例如：-

```
{
   "id": "6",
   "name": "Billy Smith",
   "first_name": "Billy",
   "last_name": "Smith",
   "gender": "male",
   "locale": "en_US"
} 
```

有了这些数据，我想填充一个数据库表。因此，我的代码如下： -

```
results_json = simplejson.loads(scraperwiki.scrape(profile_url))
        for result in results_json:
            profile = dict()
            try:
                profile['id'] = int(results_json['id'])
            except:
                profile['id'] = ""
            try:
                profile['name'] = results_json['name']
            except:
                profile['name'] = ""
            try:
                profile['first_name'] = results_json['first_name']
            except:
                profile['first_name'] = ""
            try:
                profile['last_name'] = results_json['last_name']
            except:
                profile['last_name'] = ""
            try:
                profile['link'] = results_json['link']
            except:
                profile['link'] = ""
            try:
                profile['username'] = results_json['username']
            except:
                profile['username'] = ""
            try:
                profile['gender'] = results_json['gender']
            except:
                profile['gender'] = ""
            try:
                profile['locale'] = results_json['locale']
            except:
                profile['locale'] = "" 
```

我有这么多尝试/例外的原因是考虑到网页上不存在键值的情况。尽管如此，这似乎是处理这个问题的一种非常笨拙和混乱的方式。

如果我删除这些 try/exception 子句，如果我的刮刀遇到丢失的键，它会返回一个`KeyError`例如`"KeyError: 'username'"`并且我的脚本停止运行。

有关处理这些错误的更智能和改进方法的任何建议，以便在遇到丢失的密钥时，脚本继续。

我尝试创建一个 JSON 值列表，并希望使用 IF 子句遍历它们，但我就是想不通。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T18:16:48.190

请改用以下[`.get()`方法](http://docs.python.org/2/library/stdtypes.html#dict.get)：

```
>>> a = {'bar': 'eggs'}
>>> a['foo']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: 'foo'
>>> a.get('foo', 'default value')
'default value'
>>> a.get('bar', 'default value')
'eggs' 
```

该`.get()`方法返回所请求键的值，如果缺少键，则返回默认值。

或者您可以为每个键创建一个带有空字符串的新字典并[`.update()`](http://docs.python.org/2/library/stdtypes.html#dict.update)在其上使用：

```
profile = dict.fromkeys('id name first_name last_name link username gender locale'.split(), '')
profile.update(result) 
```

`dict.fromkeys()`创建一个字典，将您请求的所有键设置为给定的默认值（`''`在上面的示例中），然后我们使用`.update()`从`result`字典中复制所有键和值，替换已经存在的任何内容。

# ios - 添加 ANE 时 Flex 对象大小不同

> ID：15009287
> 
> 赞同：2
> 
> 时间：2013-02-21T18:07:42.417
> 
> 标签：ios, apache-flex, mobile, flash-builder, air-native-extension

将 ANE（我自己构建的）添加到 Flex 移动项目时遇到问题。

问题是对象的大小与我添加 ANE 之前不同。我从来没有使用过这个ANE，我只是添加了它。

这是我添加 ANE 之前的图像：

![在此处输入图像描述](../Images/f807a06d0546164c6d88838f5addd1b9.png)

添加 ANE 后的图像：

![在此处输入图像描述](../Images/e847448cdf38c3393878e91f0445bf26.png)

如您所见，整个应用程序的大小是不同的。你知道哪个可能是问题吗？

提前致谢

*****更新信息*****

ios上的代码：

```
#import "FlashRuntimeExtensions.h"

FREContext eventContext;

FREObject init(FREContext ctx, void* funcData, uint32_t argc, FREObject argv[])
{
    eventContext = ctx;

    NSLog(@"init");

    return NULL;
}

void CameraExtContextInitializer(void* extData, const uint8_t* ctxType, FREContext ctx, uint32_t* numFunctionsToTest, const FRENamedFunction** functionsToSet)
{
    NSLog(@"camera ext context initializer");
    *numFunctionsToTest = 1;

    FRENamedFunction* func = (FRENamedFunction*) malloc(sizeof(FRENamedFunction) * *numFunctionsToTest);

    func[0].name = (const uint8_t*) "init";
    func[0].functionData = NULL;
    func[0].function = &init;

    *functionsToSet = func;
}

void CameraExtensionUniversalInitializer(void** extDataToSet, FREContextInitializer* ctxInitializerToSet, FREContextFinalizer* ctxFinalizerToSet)
{
    NSLog(@"Camera extension initializer");
    *extDataToSet = NULL;
    *ctxInitializerToSet = &CameraExtContextInitializer;
} 
```

AS中的库代码：

```
package com.xxx.Controller
{   
    import flash.events.EventDispatcher;
    import flash.events.IEventDispatcher;
    import flash.events.StatusEvent;
    import flash.external.ExtensionContext;

    public class ReaderDeviceExtensionController extends EventDispatcher
    {

        private static var _instance:ReaderDeviceExtensionController;
        private var extContext:ExtensionContext;

        public function ReaderDeviceExtensionController(enforcer:SingletonEnforcer)
        {
            super();
            extContext = ExtensionContext.createExtensionContext( "com.xxx.Controller", "" );

            if ( !extContext ) {
                throw new Error( "Reader device native extension is not supported on this platform." );
            }

        }

    public static function get instance():ReaderDeviceExtensionController {
        if ( !_instance ) {
            _instance = new ReaderDeviceExtensionController( new SingletonEnforcer() );
            _instance.init();
        }

        return _instance;
    }

    public function dispose():void { 
        extContext.dispose(); 
    }

    private function init():void {
        extContext.call( "init" );
    }
}
}

class SingletonEnforcer {

} 
```

扩展名.xml：

```
<extension xmlns="http://ns.adobe.com/air/extension/3.1"> 
    <id>com.xxx.Controller</id> 
    <versionNumber>0.0.1</versionNumber> 
    <platforms>
        <platform name="iPhone-ARM"> 
            <applicationDeployment> 
                <nativeLibrary>libTestSimpleAne.a</nativeLibrary>
                <initializer>CameraExtensionUniversalInitializer</initializer>
            </applicationDeployment>
        </platform>
    </platforms> 
</extension> 
```

我使用以下 ADT 命令构建 ANE：

```
adt -package -target ane MWCameraNativeExtension.ane extension.xml -swc NativeDevicePluginForCamera.swc -platform iPhone-ARM -C ios . 
```

我在 Flex 中的应用程序代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" title="HTMLMainContent">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <s:Label x="346" y="290" fontSize="16" paddingLeft="20" text="HI HI HI"/>
</s:View> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T13:29:32.473

这是在 iPad 3 上运行的吗？我的猜测是，当您使用本机扩展时，您不小心解锁了视网膜分辨率。

Flash Builder / packager 使用的默认 iOS SDK 是不支持 iPad 3 的视网膜分辨率的旧版本。因此，当您在没有本机扩展的情况下打包应用程序时，您将获得 iPad 2 的分辨率，而 iOS 会缩放所有内容。当您使用原生扩展并指定更新的 iOS SDK 时，它将自动使用设备的原生分辨率。

尝试在包含和不包含扩展名的情况下跟踪 stage.stageWidth 和 stage.stageHeight。此外，检查项目属性 -> Flex Build Packaging -> Apple iOS -> Native Extensions -> Apple iOS SDK 框。如果已填充，那么您很可能遇到我描述的问题。

# c# - XNA C# 使用 3D 模型创建等轴测视图

> ID：15009288
> 
> 赞同：1
> 
> 时间：2013-02-21T18:07:46.747
> 
> 标签：c#, 3d, xna, isometric

我正在尝试制作一个简单的等距游戏引擎，但相机有一些问题。当我拥有它时，我可以从前面看到我的模型。但我想从等距的角度来看它。我尝试了很多方法，但似乎都没有。也许我陷入了代码本身？你们能帮我写代码吗？

```
public class Camera : PositionedObject
{

    #region Fields
    private Matrix cameraRotation;

    #endregion

    #region Properties
    public Matrix View
    {
        get;
        set;
    }

    public Matrix Projection
    {
        get;
        protected set;
    }

    public Vector3 Target
    {
        get;
        set;
    }
    #endregion

    #region Constructor
    public Camera(Game game, Vector3 position, Vector3 target, Vector3 rotation, bool Orthographic, float near, float far)
        : base(game)
    {      
        Position = position;
        RotationInRadians = rotation;
        Target = target;

        if (Orthographic)
        {
            Projection = Matrix.CreateOrthographic(Game.Window.ClientBounds.Width, Game.Window.ClientBounds.Height,
                near, far);
        }
        else
        {
            Projection = Matrix.CreatePerspectiveFieldOfView(MathHelper.PiOver4,
                (float)Game.Window.ClientBounds.Width / (float)Game.Window.ClientBounds.Height, near, far);
        }

    }
    #endregion

    #region Public Methods

    public override void Initialize()
    {
        base.Initialize();
        cameraRotation = Matrix.Identity;

    }

    public override void Update(GameTime gameTime)
    {
        base.Update(gameTime);

        cameraRotation = Matrix.CreateFromAxisAngle(cameraRotation.Forward, RotationInRadians.Z)
            * Matrix.CreateFromAxisAngle(cameraRotation.Right, RotationInRadians.X)
            * Matrix.CreateFromAxisAngle(cameraRotation.Up, RotationInRadians.Y);

        Target = Position + cameraRotation.Forward;
        View = Matrix.CreateLookAt(Position, Target, cameraRotation.Up);
    }

    public void Draw(BasicEffect effect)
    {
        effect.View = View;
        effect.Projection = Projection;
    }
    #endregion
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:54:20.300

最简单的方法是根据焦点（地面上的一个点或其他任何点）计算相机位置。

```
//Lets start with looking at origo for now.
Vector3 FocusPoint = Vector3.Zero;

//This tells us where the camera should be, RELATIVE to the point we are watching.
//I set this a little up and a little back
Vector3 CameraOffset = new Vector3(0f, 20f, 20f);

Matrix ViewMatrix
{
    get
    {
        //The Offset is just up and back, we need to rotate it 45*
        var rotatedOffset = Vector3.Transform(CameraOffset, Matrix.CreateRotationY(MathHelper.PiOver2 * 0.5f));

        //Now we can create out viewmatrix. No need to use a transformed "up" unless it's not going to be upside down or something.
        return Matrix.CreateLookAt(rotatedOffset, FocusPoint, Vector3.Up);
    }
} 
```

# html - dataTables - 具有固定列，是否可以将滚动条移到外面？它还会在我想修复的表格中创建一个空白

> ID：15009292
> 
> 赞同：1
> 
> 时间：2013-02-21T18:08:02.020
> 
> 标签：html, css, twitter-bootstrap, scrollbar, datatables

这是这个问题的延续：[dataTables - Can't get Horizo​​ntal scroll & Fixed column to do their job。似乎到处渲染不同。我究竟做错了什么？](https://stackoverflow.com/questions/14991545/datatables-cant-get-horizontal-scroll-fixed-column-to-do-their-job-seems-t/14993977#14993977)

在大多数情况下，我得到了显示我想要的方式的数据表。但这就是它的样子。

*   我有一张以前外观的照片，但在下面发布我的答案时，我设法将其编辑了。我不认为你能做到这一点。
*   通过转到下面的 jsfiddle 链接，您仍然可以看到它以前的样子。

我需要知道是否有办法不仅可以缩小滚动条明显造成的差距，而且是否有办法将滚动条移动到表格的外部。

`padding-right: 140px;`确实将它移了过来，但也掩盖了 Action 列。然后我尝试将 z-index 应用于操作列，但是当我将其移到上方时，它会覆盖底部的水平滚动。我显然无法改变高度，因为那样它就不会与桌子的其余部分对齐。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:38:46.043

在我弄清楚之前，我花了一些时间和一些失败。最终，我最终为生成滚动条的容器添加了一个填充，向操作 div 添加了一个 z-index，这已经是`{position: absolute;}`. 然后，我添加了一些 jquery 来调整几件事的高度和宽度，并且必须相应地调整样式。

在填充、z-index 和定位之后，其中很大一部分是非静态表格将滚动到现在悬停的 Actions Columns 后面。因此，我使用 jquery 在其之前插入了 Actions 列的克隆（或任何最后一列，例如，它可能是也可能不是其他页面上的 Actions），因此它将充当占位符并将所有内容推到左侧并且静态操作列现在将与克隆重叠，并且您希望保持可见的所有内容都保留在它的左侧。如果您以这种方式执行此操作，重要的是创建克隆列的 jquery 发生在 dataTable.js 和/或 FixedColumns.js 之前，因为它需要表 HTML 就位，以便它可以正确地完成它。

现在看起来像这样：

![在此处输入图像描述](../Images/b78844248517c9376f4713725f033661.png)

后期调整很多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T17:14:45.487

我使用以下内容从固定列数据表中删除滚动条间隙。

```
 table#mainDataTable{
       margin-left: 300px !important; 
 }

 div.DTFC_ScrollWrapper div.dataTables_scroll div.dataTables_scrollBody{
       padding-left: 300px;
       left: -300px; 
 }

 div.DTFC_ScrollWrapper div.DTFC_LeftWrapper div.DTFC_LeftBodyWrapper{
       z-index: 1;
 } 
```

这假设您`iLeftWidth`在 FixedColumn 初始化中设置为 300px。选择器还假设`bJQueryUI`：数据表初始化为假。

# iis - Web 平台安装程序 - 自定义 Web 应用程序安装 UI

> ID：15009293
> 
> 赞同：0
> 
> 时间：2013-02-21T18:08:03.430
> 
> 标签：iis, web-applications, web-platform-installer

我正在尝试实现一个 Web 应用程序，它可以通过 Microsoft Web 平台安装程序部署以供私人使用（我不想发布我的应用程序，所以我制作了一个自定义提要）。我可以通过 Web 平台安装程序在我的 IIS 上部署我的 Web 应用程序，但不是以我想要的方式，因为我无法调整安装 UI。

我在我的项目中创建了一个 paramaters.xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<parameters>
<parameter name="Paramètre 1" description="Blablabla" defaultValue="MySite/MyApplication" tags="IisApp">
    <parameterEntry kind="ProviderPath" scope="iisApp" match="MySite/MyApplication" />
</parameter>
<parameter name="Paramètre 2" description="Blablabla" defaultValue="MySite" tags="AppHostConfig">
    <parameterEntry kind="ProviderPath" scope="appHostConfig" match="MySite" />
</parameter>
<parameter name="Paramètre 4" description="Blablabla" defaultValue="C:\inetpub\wwwroot\MySite\MyApplication" tags="PhysicalPath">
    <parameterEntry kind="DestinationVirtualDirectory" scope="MySite/MyApplication/" match="" />
</parameter>
<parameter name="Paramètre 5" description="Blablabla" defaultValue="MyAppPool" tags="AppPoolConfig">
    <parameterEntry kind="ProviderPath" scope="appPoolConfig" match="MyAppPool" />
</parameter> 
```

感谢您的帮助，对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:34:05.987

您不能让 Web PI 自动加载您的自定义提要。但是，您可以使用[WebPICmdLine 工具](http://msdn.microsoft.com/en-us/library/windowsazure/gg433092.aspx)自动化该过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:07:27.833

我没有将 manifest.xml 文件放入我的包中，因此没有出现配置屏幕。

```
<?xml version="1.0" encoding="utf-8"?>
<MSDeploy.iisApp>
<iisapp path="application" />
</MSDeploy.iisApp> 
```

虽然，您必须在 Web 平台安装程序的选项中激活 Web 应用程序的整个参数的配置。

# objective-c - 检查整体 UIColor？

> ID：15009294
> 
> 赞同：2
> 
> 时间：2013-02-21T18:08:04.787
> 
> 标签：objective-c, uiimage, uicolor

有没有一种简单的方法来检查 UIImage 的*整体*颜色？

```
//For example
if ([someImage isMostly:[[UIColor whiteColor] CGColor]] {
    NSLog(@"This image is mostly white!");
} 
```

我想这并不是那么简单。一种方法可能是选择一些随机坐标并将颜色平均在一起。我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:13:51.570

一种方法是创建[图像直方图](http://en.wikipedia.org/wiki/Image_histogram)，然后简单地选择最常见的颜色。

# jquery - 我希望向已经有 2 个类的 DIV 添加一个新类

> ID：15009301
> 
> 赞同：-1
> 
> 时间：2013-02-21T18:08:34.150
> 
> 标签：jquery

你好，我有一个有两个类的 Div

```
<div class="box_box my_pages">some text</div> 
```

我需要添加另一个类到这个 div 说 - myaccordion

结果应该是这样的：

```
<div class="box_box my_pages myaccordion">some text</div> 
```

我怎么做 ？我只想在两个类 box_box my_pages 都存在于一个 DIV 时添加类，而不仅仅是一个具有类“box_box”或“my_pages”的 div

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T18:09:28.473

你可以做

```
$('div.box_box.my_pages').addClass('myaccordion'); 
```

# asp.net-mvc - 发布项目时出错

> ID：15009303
> 
> 赞同：0
> 
> 时间：2013-02-21T18:08:38.700
> 
> 标签：asp.net-mvc

我刚刚尝试发布我的项目，但出现以下错误：

```
Copying file obj\Release\Package\PackageTmp\bin\Antlr3.Runtime.dll to obj\Release\Package\PackageTmp\obj\Release\Package\PackageTmp\bin\Antlr3.Runtime.dll failed. Could not find file 'obj\Release\Package\PackageTmp\bin\Antlr3.Runtime.dll'. 
```

我在调试和发布下得到它。我能够进行构建并且项目运行良好。

我之前已经能够发布这个项目。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:10:46.283

我已经通过删除 Visual Studio 中 obj\Release 下的所有文件和文件夹解决了这个问题。

然后我重建了项目并正常发布，一切都恢复正常了。

我相信这可能是由于对项目不再需要的一些文件的旧引用造成的。

希望这对其他人有帮助。

# rotation - RotationInterpolator干扰java3d中的翻译

> ID：15009304
> 
> 赞同：0
> 
> 时间：2013-02-21T18:08:53.043
> 
> 标签：rotation, java-3d

我希望下面的代码翻译 ColorCube，然后围绕自身旋转它，而不是它不翻译，它只是围绕原点旋转。我在这里做错了什么？

```
import javax.media.j3d.Alpha;
import javax.media.j3d.BoundingSphere;
import javax.media.j3d.BranchGroup;
import javax.media.j3d.RotationInterpolator;
import javax.media.j3d.Transform3D;
import javax.media.j3d.TransformGroup;
import javax.media.j3d.View;
import javax.vecmath.Vector3f;

import com.sun.j3d.utils.geometry.ColorCube;
import com.sun.j3d.utils.universe.SimpleUniverse;

public class TestRotTrans {

    public TestRotTrans(){
        SimpleUniverse su = new SimpleUniverse();
        BranchGroup root = new BranchGroup();
        TransformGroup tg = new TransformGroup();
        tg.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        root.addChild(tg);

        // Move to center
        Transform3D translater = new Transform3D();
        translater.setTranslation(new Vector3f(-0.3f, -0.3f, -0.3f));
        tg.setTransform(translater);

        // Rotate around y
        TransformGroup tgRot = new TransformGroup();

        RotationInterpolator rotator = new RotationInterpolator(new Alpha(-1,5000), tg);
        BoundingSphere bounds = new BoundingSphere();
        rotator.setSchedulingBounds(bounds);
        tgRot.addChild(rotator);
        tg.addChild(tgRot);
        tg.addChild(new ColorCube(0.4f));

        su.addBranchGraph(root);
        su.getViewingPlatform().setNominalViewingTransform();
        su.getViewer().getView().setProjectionPolicy(View.PERSPECTIVE_PROJECTION);
    }

    public static void main(String[] args) {
        new TestRotTrans();
    }
} 
```

嗯......它似乎确实翻译了一瞬间，然后旋转开始并撤消翻译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:26:59.390

解决这个问题的方法是让 tgRot 成为 tg 的父节点，让 rotator 查看 tgRot，这样树最终看起来像这样：

```
BranchGroup root
---- TransformGroup tgRot
     ---- RotationInterpolator rotator
     ---- TransformGroup tg
          ---- ColorCube cube
          ---- Transform3D translator 
```

# ios - 移动和 HTML 清单缓存性能

> ID：15009305
> 
> 赞同：0
> 
> 时间：2013-02-21T18:09:01.213
> 
> 标签：ios, html, web-applications, cache-manifest

我正在考虑开发一个 Web 应用程序，它允许用户根据使用 HTML5 清单在线存储的事件来创建截止日期日历，以存储一些基本的用户信息。然而，在开始之前，了解清单的健壮程度会很有用：

*   如果用户清除了他们的移动 Safari 缓存，它是否也会删除任何 web 应用程序清单？
*   webapp有没有办法将唯一的识别信息发送到服务器，这样用户信息就可以在线存储而无需登录？

非常感谢你。任何有关此类开发的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:35:21.680

要回答您的第一点，清除 Safari 的缓存*将*删除清单数据，但不适用于已作为“网络应用程序”添加到主屏幕的站点。

# iphone - 如何检查用户是否打开了通知中心

> ID：15009306
> 
> 赞同：1
> 
> 时间：2013-02-21T18:09:12.037
> 
> 标签：iphone, ios, notifications

当我使用 [UIApplication enabledRemoteNotificationTypes] 时，我只能看到用户是否打开了警报、声音、徽章通知。我似乎无法辨别他们是否打开了“通知中心”开关。有没有办法检查这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:12:21.563

那没有。`+enabledRemoteNotificationTypes`旨在帮助您确定应在推送通知中包含哪些内容；您的应用程序并没有真正了解用户是否选择根本不看到它们。

# linux - CentOS 6 解压缩文件，但文件将转到根文件夹

> ID：15009314
> 
> 赞同：4
> 
> 时间：2013-02-21T18:09:38.987
> 
> 标签：linux, centos, centos6

当我这样做的时候

```
unzip /var/www/html/web.zip 
```

它将 zip 解压缩到 /root/ 文件夹。我需要它将文件解压缩到 /var/www/html/

为什么会这样？

CentOS 6.3 64位

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T18:14:40.030

试试这个：

```
unzip /var/www/html/web.zip -d /var/www/html/ 
```

您的命令将存档内容提取到当前目录。您可以使用以下命令检查您是否在 /root

```
pwd 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-21T18:10:46.557

做：

```
cd /var/www/html/
unzip web.zip 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-11T11:40:06.290

要了解有关解压缩的更多信息，您可以尝试运行以下命令。这将为您返回所有可能的选项`unzip`

`unzip -man`

# asp.net - 我怎样才能让它执行？

> ID：15009315
> 
> 赞同：1
> 
> 时间：2013-02-21T18:09:40.410
> 
> 标签：asp.net

我有一系列输入源，我想用它们在我的 sql 数据库上执行存储过程。存储过程如下所示：

```
USE [InvoiceSHC]
GO
/****** Object:  StoredProcedure [dbo].[UpdateSHCInvoice]    Script Date: 02/21/2013 12:03:58 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      <Author,,Name>
-- Create date: <Create Date,,>
-- Description: <Description,,>
-- =============================================
ALTER PROCEDURE [dbo].[UpdateSHCInvoice] 
    -- Add the parameters for the stored procedure here
    @Ref nvarchar(50), 
    @PhaseName nvarchar(50),
    @PageType nvarchar(50),
    @Page float,
    @Percent nvarchar(50),
    @ChngType nvarchar(50),
    @RowCount int output
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    insert into MasterData2 ([Ad],[Phase],[Page Type] , [Page Rate], [Percent] , [Change Type] )
                    values(@Ref, @PhaseName , @PageType , @Page , @Percent ,@ChngType );

    /* @@ROWCOUNT returns the number of rows that are affected by the last statement. */
    select @RowCount = @@ROWCOUNT 
END 
```

我的表单上有一个按钮，提示用户更新表格。这是它的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;

namespace WebApplication1
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
        {

        }

        protected void MasterData_Selecting(object sender, SqlDataSourceSelectingEventArgs e)
        {

        }

        protected void btnUpdate_Click(object sender, EventArgs e)
        {

            SqlConnection con = new SqlConnection("server=(local);database=InvoiceSHC;Trusted_Connection=Yes");

            SqlDataAdapter DA = new SqlDataAdapter("UpdateSHCInvoice", con);

            SqlCommand cmd = new SqlCommand("UpdateSHCInvoice", con);
            cmd.CommandType = CommandType.StoredProcedure;

            SqlParameter Ref = cmd.Parameters.Add("@Ref", SqlDbType.NVarChar, 50);
            SqlParameter Phase = cmd.Parameters.Add("@Phase", SqlDbType.NVarChar, 50);
            SqlParameter PageType = cmd.Parameters.Add("@PageType", SqlDbType.NVarChar, 50);
            SqlParameter Page = cmd.Parameters.Add("@Page", SqlDbType.NVarChar, 50);
            SqlParameter Percent = cmd.Parameters.Add("@Percent", SqlDbType.Float );
            SqlParameter ChngType = cmd.Parameters.Add("@ChngType", SqlDbType.NVarChar, 50);

            Ref.Value = dlRef.SelectedItem;
            Phase.Value = dlPhase.SelectedItem;
            PageType.Value = dlPageType.SelectedItem;
            Page.Value = tbPage.Text;
            Percent.Value = dlPercent.SelectedItem;
            ChngType.Value = dlChngType.SelectedItem;

            con.Open();
            cmd.ExecuteNonQuery();

        }

    }
} 
```

当我取出 cmd.ExecuteNonQuery() 时，我没有收到任何错误，也没有结果。当我在那里时，结果是一个错误 System.InvalidCastException：对象必须实现 IConvertible。

我提前为我的无知道歉，我是自学成才，每天都在学习新东西。在大约 127 年零 4 天后，我或许能够理解这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:13:09.313

您正在寻找将值添加到数据库中，而不是相应的对象。

像这样更正您的代码

```
 Ref.Value = dlRef.SelectedItem.Value;
        Phase.Value = dlPhase.SelectedItem.Value;
        PageType.Value = dlPageType.SelectedItem.Value;
        Page.Value = tbPage.Text;
        Percent.Value = dlPercent.SelectedItem.Value;
        ChngType.Value = dlChngType.SelectedItem.Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:19:25.103

除了传递`SelectedItem.Value` *而不是*`SelectedItem`本身，如果你在一个块中执行你的命令（`using`如下所示），你不需要担心保持连接打开。您也可以使用`Parameters.AddWithValue()`.

```
using(SqlConnection con = new SqlConnection("yourConnectionString"))
{
  //Not sure why you need a SqlDataAdapter unused here.
  //SqlDataAdapter DA = new SqlDataAdapter("UpdateSHCInvoice", con);
  SqlCommand cmd = new SqlCommand("UpdateSHCInvoice", con);
  cmd.CommandType = CommandType.StoredProcedure;

  cmd.Parameters.AddWithValue("@Ref", dlRef.SelectedItem.Value);
  cmd.Parameters.AddWithValue("@Phase", dlPhase.SelectedItem.Value);
  cmd.Parameters.AddWithValue("@PageType", dlPageType.SelectedItem.Value);
  cmd.Parameters.AddWithValue("@Page", tbPage.Text);
  cmd.Parameters.AddWithValue("@Percent", dlPercent.SelectedItem.Value);
  cmd.Parameters.AddWithValue("@ChngType", dlChngType.SelectedItem.Value);
  con.Open();
  cmd.ExecuteNonQuery();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:17:42.777

在您的存储过程中，@Page 是浮点类型，但在您的 click 方法中，您将 tbPage.text 分配给该值。您必须转换为正确的类型。

# highcharts - Highcharts 是否使用 Cookie？

> ID：15009317
> 
> 赞同：1
> 
> 时间：2013-02-21T18:10:03.183
> 
> 标签：highcharts

我只是想知道 Highcharts 在添加到页面时是否默认删除任何 cookie？根据我的 yslow 报告，我得到了 2507 字节的 cookie 使用量。我不确定他们可能来自哪里。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:37:39.457

不，Highcharts 不会创建任何 cookie。Cookies 用于数据恒定且长期不变的情况，而 highcharts 提供每次访问时数据的动态可视化，因此它不保存任何 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:18:38.733

您可以使用 Chrome 插件“Attacat Cookie 审核工具”和“站点蜘蛛”从定义的 URL 中查找所有 cookie。

# c++ - 如何强制程序的一部分只运行一次？

> ID：15009318
> 
> 赞同：0
> 
> 时间：2013-02-21T18:10:06.373
> 
> 标签：c++

我正在编写一个需要数据库的 c++ 程序，并且我正在使用 SQLite。我有一个函数，`createTables()`它在我的数据库中创建表。但是程序中真正困扰我的部分是`createTables()`每次程序启动时我都必须调用。尽管用于创建表的 SQL 查询是这样的：

```
CREATE TABLE IF NOT EXISTS table_name 
```

但我想知道是否可以在**不使用`if`或其他条件语句的情况下只运行一部分代码。**我可以自行更改程序工作流程吗？程序可以改变自己吗？
例如假设原始代码是：

```
createTables();
otherPartOfProgram(); 
```

但是下一次（假设表在之前的运行中成功创建）程序改变了自己，工作流程是这样的：

```
otherPartOfProgram(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:12:39.293

那是不能直接做的。您可以在程序（配置文件、注册表...）*之外*存储表已创建的事实，或者更改`createTables`函数以便在尝试创建它们之前测试它们是否存在。

不过，更简单的方法是将表格作为运行程序的先决条件。让一些外部代码创建它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T18:23:17.107

标准库有一个解决方案，尽管它不是为您的情况设计的：

```
#include <mutex>

std::once_flag flag;
void f();             // to be called once

void main_function()
{
    std::call_once(flag, f);
    // ...
} 
```

# php - 为什么我会收到“在非对象上调用成员函数 fetch_assoc()”错误？

> ID：15009320
> 
> 赞同：-2
> 
> 时间：2013-02-21T18:10:17.603
> 
> 标签：php, mysql

为什么这段代码不起作用？当 PHP 到达这一点时，我遇到了“在非对象上调用成员函数 fetch_assoc()”错误。

```
 $result = $db->query("SELECT * FROM users");
                while ($row = $result->fetch_assoc()) {
                    print_r($row);
                    // echo "<tr><td>" . $row["username"] . "</td> <td>" . $row["wins"] . "</td> <td>" . $row["losses"] . "</td></tr>\n";
                } 
```

我可以包含其他信息，但这是我认为相关的所有信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:11:57.410

基本上， $result 不是一个对象。检查 SQL 查询是否返回结果以及 $result 是否应该是一个 php 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:14:31.153

你用什么？MySQLi? 如果是 $db->query() 之后写入：

```
if(!$result)
    echo $db->error;
else
{
    while ($row = $result->fetch_assoc()) {
        print_r($row);
        // echo "<tr><td>" . $row["username"] . "</td> <td>" . $row["wins"] . "</td> <td>" . $row["losses"] . "</td></tr>\n";
    }
} 
```

# java - 注入设置或加载一次全局查找？

> ID：15009325
> 
> 赞同：1
> 
> 时间：2013-02-21T18:10:39.493
> 
> 标签：java, architecture, dependency-injection, guice, application-settings

仍然掌握良好的依赖注入技术与矫枉过正。想法赞赏。

我有一个应用程序，它在启动时会从文件中读取设置。以后可能是数据库，我已经编写了以依赖注入（Guice）方式加载设置的部分，这不是问题。这些设置不会因应用程序的正常使用而改变，但在未来的版本中，我可能希望允许用户从 GUI 更改这些设置。

这是实际的问题：我应该如何让代码的各个部分访问这些设置？一些设置只在对象层次结构中非常重要，但父对象不需要知道它们。所以，我可以：

1.  使用单例，然后在构造函数中查找适当的设置
2.  将不同的设置（或整个设置类）向下传递到对象树
3.  创建由 Guice 模块加载的工厂，然后使用`Factory.get()`

我不确定#3 比#1 好多少……还是完全有更好的方法？

注意：当我使用 Guice 时，这更像是一个架构问题，而不是“我如何使用 XXX 框架”问题。因此，即使您不认识 Guice，也不要害怕回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:20:15.403

如果您使用 CDI，您可以使用“@Singleton”注释您的 Singleton 类，并将此类的一个对象注入到子类属性中。
不知道 Guice 怎么样。
我认为使用注入机制来确保只有一个 Property 实例是最好的解决方案。
希望我能帮上忙。

# python - 迭代中的嵌套循环出错？

> ID：15009328
> 
> 赞同：0
> 
> 时间：2013-02-21T18:10:42.693
> 
> 标签：python

考虑

```
a = [1,2,3,4]

i = 0

j = 1

for i in range(len(a)):

       for j in range(len(a)):

          d = (a[i]-a[j])
          j = j + 1
          print i, j, d
       i = i + 1 
```

输出

```
0 1 0

0 2 -1 

0 3 -2

0 4 -3

1 1 1

1 2 0

1 3 -1

1 4 -2

2 1 2

2 2 1

2 3 0

2 4 -1

3 1 3

3 2 2

3 3 1

3 4 0 
```

我正在尝试遍历我的数组，以便我只能获得 d 非零的数字，并且我不会遍历相同的 i 和 j（例如：如果 i = 0,j=1 或 i=1， j=0)。这就像做一个组合问题，我正在寻找我的数组中的对数和它的 d。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:17:14.010

只需`permutations`使用`itertools`：

```
import itertools
a = [1,2,3,4]
for permutation in itertools.permutation(a, 2):
    print permutation 
```

输出

```
(1, 2)
(1, 3)
(1, 4)
(2, 1)
(2, 3)
...
... 
```

如果你也想要你可以做的距离

```
a = [1,2,3,4]
for permutation in itertools.permutation(a, 2):
    print permutation, permutation[1] - permutation[0]

(1, 2) 1
(1, 3) 2
(1, 4) 3
(2, 1) -1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:20:10.480

> 我正在尝试遍历我的数组，以便我只能获得 d 非零的数字

除非这是一项家庭作业，否则我建议您使用带有反向排序列表的 itertools.combinations 或[itertools.permutations](http://docs.python.org/2/library/itertools.html#itertools.combinations)[来](http://docs.python.org/2/library/itertools.html#itertools.permutations)解决您的问题

```
>>> list((a,b) for a,b in itertools.permutations(a, 2) if a > b)
[(2, 1), (3, 1), (3, 2), (4, 1), (4, 2), (4, 3)]
>>> list(itertools.combinations(sorted(a, reverse = True), 2))
[(4, 3), (4, 2), (4, 1), (3, 2), (3, 1), (2, 1)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:16:24.430

尝试这个：

```
a = [1,2,3,4]

i = 0

j = 1

for i in range(len(a)):

    for j in range(len(a)):

        d = (a[i]-a[j])
        j = j + 1
        if i != j and d != 0:
            print i, j, d
    i = i + 1 
```

输出：

```
>>> 
0 2 -1
0 3 -2
0 4 -3
1 3 -1
1 4 -2
2 1 2
2 4 -1
3 1 3
3 2 2 
```

# c# - Windows 8 Store App - MediaElement no longer playing Audio

> ID：15009331
> 
> 赞同：1
> 
> 时间：2013-02-21T18:10:55.177
> 
> 标签：c#, xaml, audio, windows-8, mediaelement

I am trying to play an audio file (.wav) when a toggle button is pressed (and pause when pressed again). I had it working initially, but now I must of messed something up and am looking for help. This is how I'm doing it:

Create `MediaElement` in XAML

```
<MediaElement x:Name="myMediaElement" HorizontalAlignment="Center" VerticalAlignment="Center" PosterSource="vuvuzela.png" IsLooping="True" Source="Assets/vuvuzela.wav" Grid.Row="1" AutoPlay="False"/> 
```

Then My `ToggleButton` is this:

```
<ToggleButton x:Name="ToggleButton" Content="Activate" HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Row="2" FontSize="32" Style="{StaticResource ToggleButtonStyle1}" Checked="Tog_Checked" Unchecked="Tog_Unchecked"/> 
```

And in my Code-behind, I have the `ToggleButton`'s checked/unchecked handlers:

```
private void Tog_Checked(object sender, RoutedEventArgs e)
    {
        myMediaElement.Play();
    }

    private void Tog_Unchecked(object sender, RoutedEventArgs e)
    {
        myMediaElement.Pause();
    } 
```

Any ideas as to what might be going wrong or how to check it? Thanks!

* * *

EDIT: Debugged some more. Looks like the `myMediaElement` is not getting past the `Opening` state?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:30:03.907

Apparently it was a hardware problem. My computer (MacBook running Bootcamp) was the issue. Finally found that answer in this post --> [MediaElement in WinRT / Win8 does not work at all](https://stackoverflow.com/questions/12738382/mediaelement-in-winrt-win8-does-not-work-at-all)

Thanks for all the help though everyone

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:31:52.583

Is it important to you that your media element be visual like that?

Try this in your click event instead:

```
var _Media = new Windows.UI.Xaml.Controls.MediaElement() { AutoPlay = false };
var _Location = Windows.ApplicationModel.Package.Current.InstalledLocation;
var _Folder = await _Location.GetFolderAsync("Assets");
var _File = await _Folder.GetFileAsync("Ding.wav");
var _Stream = await _File.OpenAsync(Windows.Storage.FileAccessMode.Read);
_Media.SetSource(_Stream, _File.ContentType);
_Media.Play(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:10:16.753

Have shown code required to play audio file. (code for playing next audio is bonus )

1.Add media element, play/pause/stop buttons to the XAML file.

```
<MediaElement x:Name="media" Source="Assets/page1/para1.mp3"  
              Grid.Column="0" Grid.Row="0"  AutoPlay="True" />
<Button Click="StopMedia" Grid.Column="0" Grid.Row="1" Content="Stop" />
<Button Click="PauseMedia"  Grid.Column="1" Grid.Row="1" Content="Pause" />
<Button Click="PlayMedia" Grid.Column="2" Grid.Row="1" Content="Play" /> 
```

2.Add the following code to the code-behind file:

```
 private void StopMedia(object sender, RoutedEventArgs e)
    {
        media.Stop();
    }
    private void PauseMedia(object sender, RoutedEventArgs e)
    {
        media.Pause();
    }
    private  void PlayMedia(object sender, RoutedEventArgs e)
    {
        media.Source = new Uri(this.BaseUri, "Assets/page1/para1.mp3");
        media.Play();
    }

    protected override async void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
    {
        media.MediaEnded += media_MediaEnded;

    }

    private void media_MediaEnded(object sender, RoutedEventArgs e)
    {
        media.Source = new Uri(this.BaseUri, "Assets/page1/para2.mp3");
        media.Play();
    } 
```

# python - 基于 requests 模块将 curl 执行的 post 请求转换为 python 请求

> ID：15009332
> 
> 赞同：3
> 
> 时间：2013-02-21T18:10:55.357
> 
> 标签：python, post, curl, python-requests

当我运行蜘蛛时，我必须将扩展设置发送到scrapy。当我使用 curl 时真的很容易：

```
 http://localhost:6800/schedule.json -d project=myproject -d spider=somespider -d setting=DOWNLOAD_DELAY=2 -d arg1=val1 
```

但是当我想根据模块请求将它插入python脚本时，我对设置=DOWNLOAD_DELAY=2有点困惑，因为它不遵循通常的形式（key=value）。所以我尝试了这个：

```
r = requests.post("http://httpbin.org/get", params={'arg1': 'val1', 'setting=DOWNLOAD_DELAY': '2'}) 
```

但对通常的scrapy行为没有影响。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T18:54:00.670

通常，在命令行上传递的键值对中，您拆分第*一个* `=`，而不是第二个。所以，这样做：

```
r = requests.post("http://httpbin.org/get", params={'arg1': 'val1', 'setting': 'DOWNLOAD_DELAY=2'}) 
```

例如，在[Program Argument Syntax Conventions](http://www.gnu.org/software/libc/manual/html_node/Argument-Syntax.html)的 GNU 文档中：

> 长选项由 '--' 后跟由字母数字字符和破折号组成的名称组成。选项名称通常为一到三个单词，并用连字符分隔单词。只要缩写是唯一的，用户就可以缩写选项名称。
> 
> 要为长选项指定参数，请编写“--name=value”。此语法允许长选项接受本身是可选的参数。

换句话说， in `--foo=bar=baz`,`foo`是`name`,`bar=baz`是`value`, 因为`=`不是字母数字字符或破折号。

同样，将`curl`选项作为`-d foo=bar=baz`和作为值处理。`foo``name``bar=baz`

您不能从任何规范中直接推断出这一点——事实上，您甚至根本无法直接推断出`curl`遵循 GNU 参数语法，因为它不是 GNU 程序，并且 (IIRC) 进行自己的自定义参数解析。因此，您必须阅读[源代码](https://github.com/bagder/curl)才能确定。

或者，更简单地说，测试它。`curl`捕获发出的表单编码请求。（如果您不知道如何操作：尝试仅使用 运行假服务器`netcat`，例如`nc -kl 8888`在 Mac/BSD 系统上，然后`curl http://localhost:8888/schedule.json -d project=myproject -d spider=somespider -d setting=DOWNLOAD_DELAY=2 -d arg1=val1`查看命令行上显示的内容。）

`name=value`但是，只要你有对，这种行为几乎就是一个隐含的标准。

# onclick - mediaelement js点击事件

> ID：15009335
> 
> 赞同：0
> 
> 时间：2013-02-21T18:10:58.903
> 
> 标签：onclick, mediaelement.js

我对 Javascript 很陌生，并且努力在 mediaelment 播放器上获得点击事件。我的目标是阻止点击它没有通过播放器后面的模态框。

这里是html的相关部分：

```
<div class="player_bg" id="mybg" style="display: none" onclick="close_over(this.id)">
  <!-- onclick="close_over(this.id)" -->
  <div class="video-modal" onclick="close_over(this.parentNode.id)"></div>
  <div class="videoplayer">
    <video id="myVideo" width="640" height="360" poster="" controls="controls" preload="auto" onclick="close_over(this.id)">
      <!-- MP4 for Safari, IE9, iPhone, iPad, Android, and Windows Phone 7 -->
      <source type="video/mp4" src="">                            
      <!-- WebM/VP8 for Firefox4, Opera, and Chrome -->
      <source type="video/webm" src="">
      <!-- Ogg/Vorbis for older Firefox and Opera versions -->
      <source type="video/ogg" src="">
      <object width="640" height="360" type="application/x-shockwave-flash" data="../_styles/js/flashmediaelement.swf">
        <param name="movie" value="flashmediaelement.swf" />
        <param name="flashvars" value="controls=true&amp;file=">
        <img src="" width="320" height="220" title="No video playback capabilities, please download the video" alt="" >
      </object>
  </video>
  </div>
</div> 
```

这是我的javascript：

```
function close_over(who) {
if (who == "myVideo") {
} else  {

el = document.getElementById("mybg");
el.style.display ="none";
//(el.style.display == "block") ? "none" : "block";
    $('video, audio').each(function() {
        $(this)[0].player.pause();        
    });

} 
```

}

（视频模式只是一个定义为背景图像的按钮，“活动层”是“mybg”）

这给了我两次点击事件。首先我得到它，它被 if 子句阻止（正如我想要的那样），然后它进入模态框（mybg）并由 else 子句（我不想要）处理。

作为起点，我只有这个 javascript 代码：

```
function close_over(who) {
el = document.getElementById("mybg");
el.style.display ="none";
//(el.style.display == "block") ? "none" : "block";
    $('video, audio').each(function() {
        $(this)[0].player.pause();        
    }); 
```

}

（是的，本例中的“谁”已过时）

当我单击控件中的播放/暂停按钮时，这两个脚本的反应都很好，但如果我单击视频以暂停它或在控件中的时间轴中单击则不会。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T17:35:35.800

您可以在启动 mediaelement 播放器时监听 mediaelement 播放器点击事件。一旦你获得了 mediaelement 播放器点击事件，你就可以停止事件的传播，这样它就不会传播到外部元素。这是上面要做的代码片段。

```
$("#myVideo").mediaelementplayer({
        // if the <video width> is not specified, this is the default
        defaultVideoWidth: 480,
        // if the <video height> is not specified, this is the default
        defaultVideoHeight: 270,
        // if set, overrides <video width>
        videoWidth: -1,
        // if set, overrides <video height>
        videoHeight: -1,
        // width of audio player
        audioWidth: 30,
        // height of audio player
        audioHeight: 400,
        // initial volume when the player starts
        startVolume: 0.8,
        // useful for <audio> player loops
        loop: false,
        // enables Flash and Silverlight to resize to content size
        enableAutosize: false,
        // the order of controls you want on the control bar (and other plugins below)

        features: ["playpause", "progress", "current", "duration", "tracks", "volume", "fullscreen"],
        // Hide controls when playing and mouse is not over the video
        alwaysShowControls: false,
        // force iPad's native controls
        iPadUseNativeControls: false,
        // force iPhone's native controls
        iPhoneUseNativeControls: false,
        // force Android's native controls
        AndroidUseNativeControls: false,
        // forces the hour marker (##:00:00)
        alwaysShowHours: false,
        // show framecount in timecode (##:00:00:00)
        showTimecodeFrameCount: false,
        // used when showTimecodeFrameCount is set to true
        framesPerSecond: 25,
        // turns keyboard support on and off for this instance
        enableKeyboard: true,
        // when this player starts, it will pause other players
        pauseOtherPlayers: true,
        // array of keyboard commands
        keyActions: [],
        //autoPlay the video on load;
        autoPlay: false,
        //path to get flash player;
        pluginPath: 'specify your plugin path here',
        //name of the flash;
        flashName: "flashmediaelement.swf",
        // show mode on browser.
        success: function (player, node) {

            //Add the custom event here.            
            player.addEventListener("click", function (e) {

               console.log("clicked ", e);

               //IE9 & Other Browsers
               if (e.stopPropagation) {
                      e.stopPropagation();
               }
               //IE8 and Lower
               else {
                 e.cancelBubble = true;
               }
            });
        },
        error: function (e) {
            //TODO: fires when a problem is detected
        }
     }); 
```

# bash - 使用 xargs 将命令传递给子shell 在别名中不起作用

> ID：15009344
> 
> 赞同：1
> 
> 时间：2013-02-21T18:11:18.577
> 
> 标签：bash, alias, xargs, subshell

我试图构建一个快速脚本来查找目录下的所有 git repos，并依次“git pull”每个。

这是我到目前为止发现的：

```
find ~/ -name ".git" -type d | sed 's,/*[^/]\+/*$,,' | xargs -L1 bash -c 'cd "$1" && git pull' _ 
```

如果粘贴到终端中，这将完全按照预期工作。但是，如果我在我的`.bashrc`文件中将其设为别名：

```
alias gpa="find ~/ -name ".git" -type d | sed 's,/*[^/]\+/*$,,' | xargs -L1 bash -c 'cd "$1" && git pull' _" 
```

该命令不起作用。我对其进行了修改，试图让它打印 xargs 启动的子shell正在接收的内容：

```
alias printgpa="find ~/ -name ".git" -type d | sed 's,/*[^/]\+/*$,,' | xargs -L1 bash -c 'echo "$1"' _" 
```

运行时，每个子shell 都打印一个换行符，但没有其他内容。

谁能回答为什么会这样？我的直觉说这是我在别名中的语法有问题，但我不知道到底发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:16:00.797

问题是`$1`在您定义别名时被替换，而不是在您运行它时。为了防止这种情况，您需要`$`使用反斜杠或使用一些单引号来引用 。例如：

```
alias printgpa='find ~/ -name .git -type d | sed '\''s,/*[^/]\+/*$,,'\'' | xargs -L1 bash -c '\''echo "$1"'\'' _' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T22:49:18.497

使用 GNU Parallel 时可能更容易阅读：

```
alias gpa="find ~/ -name .git -type d | parallel 'cd {//} && git pull'" 
```

此外，您还可以获得让更多 git 并行处理的额外好处。

安装 GNU Parallel 实际上需要 10 秒：

```
wget pi.dk/3 -qO - | sh -x 
```

观看介绍视频以了解更多信息：[https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

# java - 有没有办法限制 jaxb 类中字符串的长度？

> ID：15009346
> 
> 赞同：3
> 
> 时间：2013-02-21T18:11:29.310
> 
> 标签：java, jaxb

如何在带注释的 jaxb java 类中为 xsd 指定方面？

我想使用注释（而不是来自 xsd）将字符串限制为仅 1 个字符。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T21:54:54.590

对于这个用例，您可以使用[Bean Validation (JSR-303)的实现。](http://jcp.org/en/jsr/detail?id=303)它允许您通过注释或 XML 为对象属性指定验证规则。Hibernate 实现了参考实现：

*   [http://www.hibernate.org/subprojects/validator.html](http://www.hibernate.org/subprojects/validator.html)

# google-apps-script - 基于Google Docs的志愿者管理系统结构

> ID：15009348
> 
> 赞同：0
> 
> 时间：2013-02-21T18:11:42.887
> 
> 标签：google-apps-script

这就是我希望能够做到的。这样做的目的是管理使我们的教堂每周日运行所需的各种志愿者。

有一个 Google Docs 电子表格，其中包含志愿者的姓名以及他们愿意担任哪些角色（例如，蒂姆自愿担任引座员；安娜自愿担任讲师）。

有一张单独的表格列出未来 6 个月需要填补的每个志愿者职位（例如，我们需要 2 名引座员和 1 名讲师在周日）。

编写一个 Google Apps 脚本，该脚本将遍历需要填补的职位列表，然后选择下一个被要求填补该职位的志愿者（可能基于过去担任该职位的人数最少）。然后，该脚本会向该志愿者发送一封电子邮件，并询问他们是否可以担任该职位。理想情况下，电子邮件将基于 HTML 并在其中包含 2 个链接：1 个供他们单击以接受该职位，1 个供他们单击以拒绝该职位。

如果志愿者接受该职位，脚本会将他们的姓名添加到该职位。如果志愿者拒绝该职位，脚本将转到下一个志愿者并发送相同的电子邮件。

脚本将继续此过程，直到所有空位都被填满或所有志愿者都拒绝为止。

除了电子邮件中的链接，我可以概念化我需要做的所有事情。

有人对动态生成这样的链接的方法有任何建议吗？

关于如何构造我的脚本来做我想做的事，还有什么其他想法吗？

显然，我仍处于思考阶段，所以我愿意接受任何建议。

提前致谢。（我们小教会的成员也感谢你！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:48:03.793

生成链接当然是可能的！[我最近写了一个答案](https://stackoverflow.com/questions/14914955/how-to-call-google-apps-script-from-web-page/14915184#14915184)。您不需要该答案的所有部分。也许你应该[看看这个答案](https://stackoverflow.com/questions/14733831/anchor-link-to-app-with-parameters-google-apps-script/14738143#14738143)。

无论如何，一些示例/伪代码。

```
var scriptUrl = ScriptApp.getService().getUrl(); //URL to invoke your script

var message = "blah blah event details blah blah"
    +" <a href=\""+scriptUrl+"?user="+user+"&accept=no\">Decline</a>"
    +" or <a href=\""+scriptUrl+"?user="+user+"&accept=yes\">Accept</a>";

MailApp.sendEmail(recipent,subject,"",{htmlBody:message}); 
```

然后，您可以使用我在上面的答案中解释的 doGet(e) 参数来处理它。

```
function doGet(e) {
  var user = e.parameter.user;
  var accept = e.parameter.accept;

  if (accept=="yes") {
    //he/she accepted!!
  } else {
    //he/she declined. =(
  }
} 
```

# php - 在 MySQL 中插入时间戳？

> ID：15009350
> 
> 赞同：1
> 
> 时间：2013-02-21T18:11:50.177
> 
> 标签：php, mysql, insert, timestamp

**大家好。**

我无法弄清楚，所以如果有人可以帮助我；是的，请！
现在花几个小时搜索，但谁在乎，这就是问题所在。

```
$enddate = time() + $packagesrow['length'];

if ($packagesrow['length'] != 0) mysql_query("INSERT INTO memberships (id_package,    id_user, enddate) VALUES ('$packageid', '$userid', '$enddate')");
mysql_query("INSERT INTO purchases (id_package, id_user) VALUES ('$packageid', '$userid')"); 
```

由于某种原因 MySQL 不接受 '$enddate' 变量，我确实通过回显它来确保它只是一个 int。但是当我查看 MySQL 数据库内部时，它会显示“0000-00-00 00:00:00”（这是默认值）

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:16:37.100

**您的 mysql 列是 datetime 数据类型**使用：

```
$enddate = date('Y-m-d H:i:s', (time() + $packagesrow['length'])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:56:23.473

您应该将列**结束**日期更改为时间戳数据类型。

# jquery - 仅当特定条件为真时才运行 jQuery 函数

> ID：15009356
> 
> 赞同：0
> 
> 时间：2013-02-21T18:12:15.683
> 
> 标签：jquery, html, css

我有一个名为“测试”的 div。此 div 可以在同一页面上出现一次或多次，其中包含 1 个或多个标签。例如，一页可能有

```
<div class="testing">
   <span>hello</span>
</div> 
```

或者另一个页面可能有

```
<div class="testing">
   <span>hello</span>
   <span>hello again </span>
</div> 
```

我想在“测试” div 上运行 jQuery 函数，条件如下：

*   如果“测试” div 包含多个跨度标记，我只希望该函数运行。
*   我只希望函数在包含多个跨度标记的“测试”div 上运行。

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:14:52.753

在提问之前，请尝试发布您已有的代码。照这样说...

```
$('div.testing span').length 
```

这将返回带有类测试的 div 内的 span 元素的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:14:44.367

把它放在你的函数中：

```
if($('.testing span').length > 1) { /* relevant code here */ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:15:34.187

1.  编写你的函数
2.  检查测试中的跨度数（提示`if($('.testing').children('span').length`：）
3.  在 if 语句的“then”部分运行相应的函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T18:18:11.447

尝试这个

```
 if($('.testing span').length > 1) { 

 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T18:23:44.113

试试这个。将背景设置为红色的部分替换为您想要执行的任何操作。

```
$(".testing").each(function(index, value) { 
    var spans = $(this).find("span");
    if(spans.length > 1){
        $(this).css("background-color", "red");
    } 
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T18:25:07.717

您想要的条件是相同的，因此对于 1 个条件，您可以执行以下操作：

```
if($('.testing span').length > 1) console.log('more than one'); 
```

**带有函数的示例**

```
if($('.testing span').length > 1) myFunction(); 
```

# html - CSS：背景尺寸：封面；Firefox18 中的奇怪行为 - 它附加到父绝对定位元素的父相对定位元素

> ID：15009362
> 
> 赞同：1
> 
> 时间：2013-02-21T18:12:31.450
> 
> 标签：html, firefox, css

今天我发现 Firefox 18.0.2 的一个奇怪行为。即使更新到 FF19.0 也无济于事。

我需要创建具有动态大小并保持特定纵横比的拇指。可能还有其他更好的解决方案，如下所示。

**Html:** - 文档类型是 HTML5

```
<div class="img">
   <img alt="" src="/blank.gif" class="imgScalar">
   <div class="imgA">
       <div class="imgP">
           <div style="background-image:url(-pathToThumb-)" class="thumb"></div>
       </div>
   </div>
</div> 
```

“blank.gif”的固定大小为 2x2px。具有相同的边长很重要。

**CSS：**

```
.img {
    position: relative;
    overflow: hidden;
    margin: 1px 0;
}
.img .imgScalar {
    width: 100%;
}
.img .imgA {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background-image: url('../gfx/loader.gif');
    background-repeat: no-repeat;
    background-position: 50% 50%;
}
.img .imgP {
    padding: 0 1px;
    height: 100%;
    overflow: hidden;
}
.img .thumb {
    position: relative;
    width: 100%;
    height: 100%;
    background-position: center top;
    background-repeat: no-repeat;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}
.img .imgScalar,
.img.r16-9 .imgScalar {
    margin-bottom: -43.75%;
}
.img.r16-10 .imgScalar {
    margin-bottom: -37.5%;
}
.img.r4-3 .imgScalar {
    margin-bottom: -25%;
}
.img.r9-16 .imgScalar {
    margin-bottom: 77.77777777777777%;
}
.img.r10-16 .imgScalar {
    margin-bottom: 60%;
}
.img.r3-4 .imgScalar {
    margin-bottom: 33.333333333333314%;
} 
```

* * *

对我来说的好处是，我可以在点击@media 规则时通过 CSS 切换宽高比。

```
@media (max-width: 767px) {
    .img.r9-16 .imgScalar,
    .img.r10-16 .imgScalar,
    .img.r3-4 .imgScalar {
        margin-bottom: -25%;
    }
} 
```

作为信息：这被集成在默认为 1200px 宽度的静态布局中，如果分辨率低于 1200px 并且客户端浏览器支持规则并且还对移动分辨率做出反应 - 仅 CSS 所有内容。

我已经用 Google Chrome、Opera、Safari、Internet Explorer 和我的 iPhone 测试了上述内容，它似乎可以在这些测试的设备上运行……唯一这样做的浏览器是 Firefox。

**似乎是什么问题：**

因为*.thumb是绝对定位的**.imgA*的子元素，所以背景大小似乎应用于 .imgA 的下一个相对父*级*，而不是*.thumb*本身也是相对定位的。出于测试目的，我还将*.imgP 设为*相对，但这也无济于事。

* * *

**临时解决办法：**

**html:**

```
<div class="img">
    <div class="imgWrap">
        <img alt="" src="/iS16-9.gif" style="background-image:url(-imgPath-)" class="imgScalar">
    </div>
</div> 
```

iS16-9.gif 是几个用作“帮助”元素的空白图像之一。顾名思义，它有 16px 的宽度和 9px 的高度来表示纵横比。

**CSS：**

```
.img > .imgWrap {
    position: relative;
    margin: 1px;
    background-image: url('../gfx/loader.gif');
    background-repeat: no-repeat;
    background-position: 50% 50%;
}
.img > .imgWrap > img {
    width: 100%;
    background-position: center top;
    background-repeat: no-repeat;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

太糟糕了，我现在错过了在不使用 javascript-components 的情况下响应不断变化的分辨率的能力。

* * *

也许你们中的一些人知道如何解决这个问题？

* * *

**//编辑：我检查了哪些浏览器与第一个解决方案*不兼容：***

*   火狐
*   冰鼬
*   风波濑 0.5.8
*   冰猿
*   海猴子

除了 MSIE5.5 之外的任何其他浏览器都没有问题 - 即使 MSIE6.0 似乎也能够处理这个问题。只有基于 mozilla 的浏览器在所有版本中都完全失败了（我见过的甚至是 20 个）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T07:29:43.530

经过几个小时的调试，我已经能够自己解决问题。感谢@IgorJerosimic 推动我在 jsfiddle 上发布示例。发布我的示例后，我可以看到，代码本身完全符合它应该做的事情。

这个问题与缩放的方式无关。事实上，它导致了我的 css-grid-system 在处理列时的行为方式。我需要使用有点棘手的 inline-block 而不是使用 float - Firefox2.0 的旧后备导致崩溃。

```
display: inline-block;
display: -moz-inline-grid;
vertical-align: top;
min-height: 1px; 
```

删除不推荐使用的行**显示后：-moz-inline-grid;** 一切都恢复正常了。（代码最初来自德国页面[http://bittersmann.de/articles/inline-block/example9.html](http://bittersmann.de/articles/inline-block/example9.html)）

第一种解决方案是跨浏览器兼容甚至到MSIE6.0（如果为背景的缩放功能添加过滤规则，否则图像按比例格式化但不放大或缩小）。诚然，所需的代码量有点重......但到目前为止，这是我制作响应式自动缩放图像框的唯一解决方案，例如用于具有固定比例的拇指预览并避免图像周围出现黑色条纹。

* * *

**如何优化？**

从现在开始，问题是如何最好地优化第一个示例的代码以避免过多的流量。如果我比较两个样本，第一个样本和第二个样本之间的大小差异为 26%。在有 250 个缩略图的画廊中，第一个样本将产生 12.250 个字符的开销。根据 UTF-8 字符集计算，这将是（如果我计算正确的话）11,9kB 的流量或对于具有 30kB 下行链路的慢速“DSL”，每个请求的差异为 0.399 秒。

* * *

亲切的问候，并希望这可能会帮助可能面临这个问题的人，

多米尼克·哈比希茨贝格

# math - 二进制乘法 - 负数 X 负数

> ID：15009363
> 
> 赞同：1
> 
> 时间：2013-02-21T18:12:37.400
> 
> 标签：math, binary

请不要告诉我将数字转换为正数并尝试将其作为 - X - = +

数字是 -3 (101)

-3 X -3 = +9

这个总和如何以二进制形式完成？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T20:01:02.300

负整数通常以 2 的补码表示形式存储，这意味着作为 m 位数 -x 存储为 2 ^m -x。这就是**二的**补码这个名字的由来：加 x 得到二的完全幂。

假设我们使用 32 位，-3 存储为 2 ^(32) -3 = 4294967293。

所以，-3 × -3 = 4294967293 × 4294967293 = 18446744047939747849。但是这个数字不适合 32 位。它溢出了，剩下最后 32 位。这些位自然地编码数字 9。

您想以二进制形式查看它吗？行。-3 是 2 ^(32) -3 是 11111111111111111111111111111101 [2]。

```
11111111111111111111111111111101×11111111111111111111111111111101 =
 1111111111111111111111111111101000000000000000000000000000001001
        (32 msb)                         (32 lsb) 
```

结果的最低 32 位是 00000000000000000000000000001001 [2]，即数字 9。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T18:19:45.667

您似乎正在寻找对以[**2 的补码**](http://en.wikipedia.org/wiki/Two%27s_complement)表示的值执行乘法的方法...

这个[**来自威斯康星大学 Karen Miller 的网页**](http://pages.cs.wisc.edu/~cs354-1/beyond354/int.mult.html)提供了其中几种方法，包括不需要首先将数字转换为倒数的方法。

# sql - 相同的 SQL 使用相同的参数运行得更慢或更快

> ID：15009365
> 
> 赞同：1
> 
> 时间：2013-02-21T18:12:38.947
> 
> 标签：sql, sql-server, performance, stored-procedures, sql-execution-plan

我有一个运行速度非常快（1 秒）的查询，见下文：

```
SELECT *
FROM    ( select ROW_NUMBER() OVER ( ORDER BY  [Rank] DESC ) AS RowNum, *
          FROM [product].[FnSearchKeyword]('basic', null, null, null, null, null, null,           null)
    ) AS RowConstrainedResult
WHERE   RowNum     = 1 AND RowNum < 30 
```

糟糕的是，如果我将此查询**放在一个过程**中，它需要 15 秒才能运行，如下所示：

```
 CREATE  anydata 
    @keywords nvarchar(4000),
    @minimunRate int, 
    @priceFrom decimal, 
    @priceTo decimal, 
    @relaeseStart datetime,
    @releaseEnd datetime,
    @categoryList nvarchar(4000), 
    @storeList nvarchar(4000),
    @rowBegin int,
    @rowEnd int,
    @orderBy int,
    @isAdult bit = null
 AS 
 SELECT *
 FROM    ( select ROW_NUMBER() OVER ( ORDER BY  [Rank] DESC ) AS RowNum, *
           FROM [product].[FnSearchKeyword]('basic', @minimunRate , @priceFrom , @priceTo      , null, null, null, null)
    ) AS RowConstrainedResult
 WHERE   RowNum     = 1 AND RowNum < 30 
```

当我播放 SQL 时，返回延迟 15 秒：

```
 exec anydata  null, null, null, null, null, null, null, null, null, null, null 
```

笔记：

*   函数 FnSearchKeyword 的参数在 AnyData 过程中具有相同的声明类型。

*   我在 exec 过程中传递了所有值“NULL”，只是为了得到与上面快速运行的查询相同的结果。参数范围没有变化

老实说，当我通过程序运行查询时，我注意到“执行计划”发生了变化，但不知道如何解决这个问题，因为查询的参数是相同的。

不幸的是，由于此处未提及的其他原因，我需要将其放入 PROC 查询中，以免使问题进一步复杂化。

关于重复消息：它的问题没有重复，因为它在任何系统（查询分析器、C# asp.net 等）中运行缓慢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T18:19:41.887

您的存储过程的参数*现在*是相同的，但是当计划第一次缓存时它们是什么？您可以通过添加来阻止参数嗅探`OPTION RECOMPILE`。

如果是 2008+（请指定版本！），由于语句本身应该使用相同的计划，您还应该检查会话和存储过程的 SET 设置。例如，`ARITHABORT`对一个而不是另一个可能会导致不同的计划，如果你有不同的计划，一个可能是坏的，一个可能是好的。另请注意，即使查询文本中的单个空格差异也可以使 SQL Server 将它们视为两个不同的计划。

通过强制设置和查询文本相同，您可以避免这些计划差异，但您仍然无法通过这种方式控制参数嗅探问题。如果是参数嗅探问题，您还可以尝试`OPTIMIZE FOR`...

# c# - C# 下载 - 有趣的错误

> ID：15009369
> 
> 赞同：0
> 
> 时间：2013-02-21T18:12:50.690
> 
> 标签：c#, download

我目前正在用 C# 做一个补丁程序，但是有一个有趣的错误。在代码中，所有链接和文件名都有一个循环，程序需要下载它们。代码：（fájlNév = 文件名，letöltött = 下载，összes = 全部，JelenlegiLetöltés = CurrentDownload，állás = 状态）

```
<!-- language: lang-c# -->
    private void button1_Click(object sender, EventArgs e)
    {
        WebClient myWebClient = new WebClient();
        string[] remoteUrl = new string[4] { "https://www.dropbox.com/s/62tt9w194xefk7t/", "https://www.dropbox.com/s/spni307vmk4zng9/", "https://www.dropbox.com/s/fsa29pelfwgk5ha/", "https://www.dropbox.com/s/mcn0wy2te4zqj1i/" };

        string[] fájlNév = new string[4] { "alut.dll", "DevIL.dll", "fltkdll.dll", "glew32.dll" };
        string fájlNévAlap = "BlackBox.dll", WebResource = null;

        int letöltött = 0;
        int össz = remoteUrl.Length;

        for (int i = 0, x = 0; i < remoteUrl.Length && x < fájlNév.Length; i++, x++)
        {
            WebResource = remoteUrl[i] + fájlNév[x];
            letöltött++;
            // MessageBox.Show(letöltött.ToString());
            jelenlegiLetöltés.Text = fájlNév[x]; 
            myWebClient.DownloadFile(WebResource,fájlNév[x]);
            double állás = letöltött / össz * 100;
            progressBar.Value = Convert.ToInt32(állás);
        } 
```

所以，问题是，程序只下载第一个文件（4次），其他3个文件只是第一个文件的重命名版本。有人可以说是什么问题吗？

谢谢，汤姆科

这是显示错误的图像：（![http://img11.imageshack.us/img11/9339/erroraz.png](../Images/34b89e3bc830bf28c8be3c09096a9316.png)如您所见，所有文件大小都等于第一个文件的大小）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:24:57.343

我刚刚尝试将这段代码复制粘贴到 LINQPad 中并运行它（进行了一些小的改动，主要是重命名变量以便我可以轻松阅读它们），并注意到正在下载的“文件”是一个 HTML 转储......那是什么你也看到了吗？

乍一看，您使用的简单 URI 似乎不足以用作下载链接 - 该 HTML blob 中的链接具有额外的查询字符串参数，如哈希等。

HTML 中的示例链接：

```
https://dl.dropbox.com/s/62tt9w194xefk7t/alut.dll?token_hash=AAHQmybYdR44TRrS9bWQWV7jlZBzZQ-mmmjNy1Kv_qR4cg&amp;dl=1 
```

# c++ - C++ 类中的成员通常不应该是 const 吗？const 成员的实际用途

> ID：15009371
> 
> 赞同：2
> 
> 时间：2013-02-21T18:12:51.490
> 
> 标签：c++

起初，我的印象是成员变量在 C++ 类中通常应该是 const，除非我希望它的成员函数在内部为每个对象修改这些变量（我通常将变量放入私有 :)。

但我现在发现我可能一直都错了。例如，我不能再分配给这样的对象了。我什至不能做移动分配。

比如说 std::string。你可以这样做：

```
std::string foo("foo");
foo = std::string("bar"); 
```

这必须暗示在内部， std::string 只有非常量成员变量，对吗？

我的想法正确吗？对于 C++ 来说相对较新，它的新思维有点奇怪。const 的目的可能不是我想的那样。

那么拥有 const 成员变量的实际目的是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T18:17:13.823

> C++ 类中的成员通常不应该是 const 吗？

*我建议您忽略“通常*”如何声明变量。的出现*频率*`const`不应让您决定*下一个*要声明的变量 is 或 is `const`。

`const`如果在整个程序执行过程中初始化后不应该更改成员的值，则成员应该是。否则，他们不应该是`const`。这是数据的语义属性，决定是否创建变量的唯一标准`const`是变量相对于值变化的性质。

*它可以改变，还是保持不变？* **在后一种情况下，一定要做到`const`**。

> 这必须暗示在内部， std::string 只有非常量成员变量，对吗？

**不**，这并不意味着它，尽管这可能恰好是`std::string`.

重要的是，你的类中*不仅* `const`有成员（当然，只要你想离开它并且你的类封装了一些资源），所以那些实际上*可以*用来判断一个对象是否已经被移动自是可修改的。

当你离开一个物体时，你留下的是一个骨架。移动构造函数或移动赋值运算符需要一种方法来“标记”这个被移动的对象作为骨架。通常，这很自然地源于从对象中“窃取内脏”的过程，即复制一些指针并将它们设置为空 - 这样，析构函数和赋值运算符就不会尝试释放它们。为了将移动对象标记为“僵尸”，显然您需要*一些*可修改的成员变量。

*但是，在您的班级中也*有一些`const`成员并没有错。`const`是一个重要的修饰符，它使你的程序的**语义**更清晰，你的程序不太可能破坏它。**只要合适**（即，只要 A 变量的值在初始化后的整个程序执行过程中都不会改变），请**使用它**。

简单地说，`const`成员变量不会被移动构造函数或移动赋值运算符修改（事实上，它们不会被*任何*函数修改）；但同样，这并不意味着他们不能在场。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T18:23:23.923

> 我的印象是成员变量在 C++ 类中通常应该是 const，除非我希望它的成员函数来修改这些变量

您忘记的是赋值运算符（包括默认运算符）*是*成员函数。例子：

```
struct Foo {
    const int i = 0;

    Foo& operator =(const Foo& src)
    {
        if (&src == this)
            return *this;
        i = src.i;
        return *this;
    }
}; 
```

由于赋值运算符是成员函数，它显然必须能够修改`Foo::i`. 如果没有，则不能调用它。请记住，给定`Foo`对象`a`和`b`，这：

```
a = b; 
```

实际上是语法糖：

```
a.operator= (b); 
```

还要记住，在这种情况下，默认赋值运算符会被删除，因为`Foo::i`is `const`。这意味着`Foo`如果您自己不编写赋值运算符，则完全没有赋值运算符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T18:16:50.060

const 对象是您不想更改的对象，它们在程序执行期间保持不变。您可以在类的构造函数的成员初始化列表中为它们分配一个值，但不能超出此范围。如果您有一个可以具有不同值的变量，则不应使用 const。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T18:29:41.120

我首先建议你看看[这个相关问题](https://stackoverflow.com/questions/355258/why-must-const-members-be-intialized-in-the-constructor-initializer-rather-than)的答案。

快速而肮脏的答案是 const 成员属性包含在对象初始化后保持不变的值。复制操作正在尝试执行导致构造新对象的操作，然后将旧对象的值分配给新对象（在隐式复制构造函数主体中）。作为解决方案，您最可能想要的是创建一个显式复制构造函数，它将原始对象作为参数并初始化初始化列表中的 const 属性值。

复制构造器示例：

```
ClassWithConstantProperties( const ClassWithConstantProperties &orig) :
    constProperty1(orig.constProperty1)
    constProperty2(orig.constProperty2)
{
} 
```

[本教程](http://www.cplusplus.com/doc/tutorial/classes/)更全面地解释了 C++ 中隐式定义的类的构造函数，并且在一个优秀的 C++ 参考页面上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T18:47:52.677

它取决于对象，但一般来说，当您为对象编写代码时，*您*要对它的不变量负责。我很少使用`const`或引用成员，但它们在不支持分配的类中是完全可以接受的。

通常，`const`用作逻辑常量，而不是按位常量。const 更像是你和你的客户之间的合同，而不是保护你免受自己伤害的东西。从这个意义上说，拥有 const 函数、返回 const 引用以及将 const 引用作为参数是很有意义的。然而，参数上的顶级 const 或类中的 const 并没有多大意义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T18:18:58.307

类的数据成员描述了该类型对象的状态。`const`数据成员意味着对象具有某种永不改变的状态。这不是很常见。通常`const`成员也是`static`。

对数据成员唯一能做的`const`就是将它初始化为构造函数的成员初始化列表。

`std::string`您可以从另一个分配给 a 的事实`std::string`仅意味着它的复制分配运算符不会对其`const`数据成员做任何事情（因为它当然不能）。

具有`const`数据成员的类或结构将没有隐式默认的复制赋值运算符。编译器无法分配给您的`const`数据成员，所以它只是说“如果您想分配，您必须自己定义它。”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-21T18:22:09.337

当构造后不应在类内部更改值时，使用常量变量。
一些例子：数字常数（pi，e）和参考。

```
struct Database_Record
{
    Database_Record(const std::string& table_name)
      : m_table_name(table_name)
    { ; }
    const std::string& get_table_name(void) const
    {  return m_table_name; }
private:
    const std::string m_table_name;
}; 
```

在上述表示数据库记录的结构中，它有一个与记录关联的表名，初始化后不能更改；这可以防止记录被写入错误的表。

# php - MYSQL/PHP：使用 INSERT INTO 的新手

> ID：15009372
> 
> 赞同：0
> 
> 时间：2013-02-21T18:12:54.873
> 
> 标签：php

伙计们，我有以下问题。我创建了一个名为“dsaidovsite”的数据库，并在其中创建了一个名为“General Settings”的 SQL 表，在那里我添加了 ID 和 PageTopTitle 列。在列 ID 中，PageTopTitle 已经添加了第 0 行，DSPixels 设计。我想做以下操作：我打开 ACP，插入网站标题，PHP 脚本删除当前行，并再次插入 ID 为 0 的新行（因为 php 应该知道要删除哪一行，这就是为什么我使用 ID 来标识行）和新的 PageTopTitle 值。这是我尝试制作的 PHP：

```
$qry = "DELETE FROM General Settings WHERE id = 0"
$qry = "INSERT INTO `dsaidovsite`.`GeneralSettings`(`ID`, `PageTopTitle`) VALUES('0','$PageTopTitle')";
$result = mysql_query($qry); 
```

它给了我以下错误`unexpected T_VARIABLE`：

```
$qry = "INSERT INTO `dsaidovsite`.`GeneralSettings`(`ID`, `PageTopTitle`) VALUES('0','$PageTopTitle')";` 
```

我认为它来自`0`，我不知道如何使它在 ID 列中添加一个确切的值。我希望你明白我的意思，如果你能帮助我，我会很高兴。

亲切的问候，丹尼斯赛多夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:28:17.973

让我们分解一下。

首先`unexpected T_VARIABLE`是 PHP 告诉你它在不期望的时候遇到了一个变量。考虑到这一点，它告诉你是哪条线，所以我们在那里环顾四周。

```
 $qry = "DELETE FROM General Settings WHERE id = 0"
error line-> $qry... 
```

查看错误提供的行，您会看到有一个变量，而在它之前的是另一行。在该行的末尾，我们注意到 no `;`。完毕。那个问题是固定的。

至于你的想法`0`可能是这样做的。PHP 不关心您在 MySQL 命令中所做的事情，只是评估字符串然后传递给 MySQL。您的命令很好，因为您使用了双引号，`$PageTopTitle`将被评估。

进一步评论：

你只运行`mysql_query`一次，那是在第二次设置之后，`$qry`所以`DELETE`命令不会被执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:18:43.480

你的代码应该是这样的：

```
$qry = "DELETE FROM General Settings WHERE id = 0";
mysql_query($qry); //first delete
$qry = "INSERT INTO `dsaidovsite`.`GeneralSettings`(`ID`, `PageTopTitle`)     VALUES('0','$PageTopTitle')";
$result = mysql_query($qry); //then add 
```

你错过了这个；在删除结束时；）

PS：您应该选择 mysqli 或 PDO ...不推荐使用 mysql 扩展

萨卢多斯。

# d3.js - 在 d3.js 中传递给事件处理程序的常量索引

> ID：15009373
> 
> 赞同：0
> 
> 时间：2013-02-21T18:12:59.423
> 
> 标签：d3.js

我在处理 D3 代码中的事件处理程序时遇到问题：在重构之前，它按预期工作：

```
choice_groups
  .append("span")
  .attr("class", "repeat-choice")
  .text("Modifica questa scelta")
  .on("click", repeat_choice); 
```

在单击 span.repeat-choice 元素的索引 i 参数的情况下调用了 repeat_choice() 函数。

由于我只想将此事件处理程序附加到具有多个嵌套数据元素的元素，因此我将上面的代码重构如下：

```
choice_groups
  .each(function(d, i) {
    if(d.length > 1) {
      d3.select(this)
        .append("span")
        .attr("class", "repeat-choice")
        .text("Modifica questa scelta")
        .on("click", repeat_choice);
    } else {
      d3.select(this)
        .append("span")
        .attr("class", "no-choice")
        .html("&nbsp;");
    }
  }); 
```

然而，repeat_choice() 处理函数现在总是在 i=0 时被调用，无论哪个是被点击元素的索引。

我想我没有正确使用 selection.each() ：生成的标记与预期的一样（和重构之前一样），只有点击处理函数没有通过元素的索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T08:03:18.580

您的内部 d3.select() 正在创建一个新选择，因此每次都重置 i=0 （在该选择的上下文中）。您可以有条件地设置属性：

```
choice_groups
  .append("span")
  .attr("class", function(d,i) { return d.length > 1 ? "repeat-choice" : "no-choice"; })
  .text(function(d,i) { return d.length > 1 ? "Modifica questa scelta" : null; }); 
```

或者可能只重新选择“重复选择”元素并稍后绑定点击处理：

```
choice_groups
    .filter(function(d,i){ return d.length > 1;})
    .on("click", repeat_choice); 
```

（我认为，传递给 repeat_choice 的 i 也只会计算第二次选择中的过滤元素）

希望有帮助。

# actionscript-3 - AS3 - 嵌套 SWF 按钮问题

> ID：15009374
> 
> 赞同：0
> 
> 时间：2013-02-21T18:13:03.130
> 
> 标签：actionscript-3, flash, actionscript, flash-builder, flash-cs6

所以我有一个主 SWF 作为启动其他 SWF 的主菜单，它启动正常，但是当其他应用程序运行时，您仍然可以单击主菜单上的按钮......

```
function startLoad(e:MouseEvent){
    var mLoader:Loader = new Loader();
    var mRequest:URLRequest;

    if (e.target == btnOne){
        mRequest = new URLRequest("appOne.swf");
    }
    else if (e.target == btnTwo){
        mRequest = new URLRequest("appTwo.swf");
    }

    mLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onCompleteHandler);
    mLoader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, onProgressHandler);
    mLoader.load(mRequest);
} 
```

我可以禁用主菜单按钮并且可以工作，但到目前为止我还没有找到触发主菜单以重新启用它们的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:17:26.780

当事件到达 startLoad 方法时禁用从 e.target 获得的按钮将改善代码的行为。然后区分每个 swf 的 onCompleteHandler 方法将使您有机会重新启用相应的按钮。

由于我对你的按钮类一无所知，所以我称它为 YourButtonClass，我将编写 disable(); 和启用（）；在下面的示例中，用于禁用和启用按钮的方法。请用适当的正确类名方法或属性设置替换它们。同时检查 e.target 类和按钮将避免不必要的悲剧。

```
function startLoad(e:MouseEvent){
var mLoader:Loader;      // we havent seen the river, lets not inflate our boat.
var mRequest:URLRequest;

if(!(e.target is YourButtonClass)) return;            // no nightmares..
if((e.target != btnOne)&&(e.target != btnTwo))return; // no nightmares..
YourButtonClass(e.target).disable();                  // disable the button here
mLoader = new Loader(); // river! inflate the boat :)
if (e.target == btnOne){
    mRequest = new URLRequest("appOne.swf");
    mLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onCompleteAppOne);
}
else { // we are sure it is btnTwo if not btnOne now...
    mRequest = new URLRequest("appTwo.swf");
    mLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onCompleteAppTwo);
}    
mLoader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, onProgressHandler);
mLoader.load(mRequest);
}

// this method is for enabling btnOne
protected function onCompleteAppOne(Event: e){ 
    btnOne.enable();
    commonCompleteOperations(e);// if you have other operations post processing
}

// this method is for enabling btnTwo
protected function onCompleteAppTwo(Event: e){ 
    btnTwo.enable();
    commonCompleteOperations(e);// if you have other operations post processing
}   

// this method is for on complete common operations if you have.
protected function commonCompleteOperations(Event e){
    // do some processing here, for instance remove event listener check for
    // application domain etc...
} 
```

作为预防措施，我会监听安全错误和 io 错误事件。两个错误事件都可以由每个按钮/文件的单个处理程序方法处理。

# asp.net - ASP.NET 4.5 ZipFile 类如何从 FTP 下载和打开 zip

> ID：15009377
> 
> 赞同：1
> 
> 时间：2013-02-21T18:13:11.537
> 
> 标签：asp.net, ftp, zipfile, ftpwebrequest

我的总体目标是从我的 ftp 中获取一个 zip 文件，即时打开它，读取 excel 文件中特定字段的内容（任何 zip 文件中都只有一个文件）。

到目前为止，我已经成功地使用 ftpwebrequest 连接到我的 ftp，并且我可以将文件下载到本地文件夹（不是我想要的工作流程，但我正在采取“婴儿步骤”的方法）

我发现在 Asp.Net 4.5 中引入了一个名为 ZipFile 的类，它似乎有一种打开和读取 zip 的方法，但我似乎无法让它接受我的 ftp 路径作为有效路径。

这是我要下载的内容。

```
var file = f.Element("FILE_PATH").Value;
                string ftpHost = "ftp.com";

                var URI = @"ftp://" + ftpHost + "/download/" + file;
                var UserName = @"ftp@mysite.com";

                FtpWebRequest ftp = (FtpWebRequest)FtpWebRequest.Create(URI);
                ftp.UsePassive = true;
                ftp.Credentials = new NetworkCredential(UserName, "Password");
                ftp.UseBinary = true;
                ftp.Method = WebRequestMethods.Ftp.DownloadFile;

                FtpWebResponse ftpResponse = (FtpWebResponse)ftp.GetResponse();
                string theFile = ftpResponse.ResponseUri.ToString();

                Stream responseStream = ftpResponse.GetResponseStream();
                FileStream writer = new FileStream(@"C:\websites\" + file, FileMode.Create);

                long length = response.ContentLength;
                int bufferSize = 2048;
                int readCount;
                byte[] buffer = new byte[2048];

                readCount = responseStream.Read(buffer, 0, bufferSize);
                while (readCount > 0)
                {
                    writer.Write(buffer, 0, readCount);
                    readCount = responseStream.Read(buffer, 0, bufferSize);
                }
                responseStream.Close();
                ftpResponse.Close();
                writer.Close(); 
```

我尝试执行以下操作来打开和阅读 zip。我把这个块放在创建字符串“theFile”的行之后，因为我不知道它有更好的归宿。这将返回路径无效的错误。

```
.... FtpWebResponse ftpResponse = (FtpWebResponse)ftp.GetResponse();
                    string theFile = ftpResponse.ResponseUri.ToString();
using (ZipArchive archive = ZipFile.OpenRead(theFile))
                    {
                        foreach (ZipArchiveEntry zfile in archive.Entries)
                        {
                            var FileName = zfile.Name;

                        }
                    } 
```

我怎样才能完成从 ftp 打开和读取这个文件？

# java - 如何从 servlet 获取值到 JSP

> ID：15009378
> 
> 赞同：1
> 
> 时间：2013-02-21T18:13:19.900
> 
> 标签：java, jsp, servlets

我在 com.company.abc 中编写了一个 servlet 代码，即

```
public class Controller extends HttpServlet {
    public void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        XYZ xyz = new XYZ();

        int value = xyz.fucn();

        request.setAttribute("value", value);
        request.getRequestDispatcher("page.jsp").forward(request, response);

    }
} 
```

web文件夹下的page.jsp文件

```
<html>

<head>
    <title>My JSP 'indexnewpage.jsp' starting page</title>
</head>

</body>
<%
    Object value = request.getAttribute("value");
%>
<p><%=value%></p>
<body>

</html> 
```

现在我想在 JSP 页面中查看 Object 值的值，但是我看不到请帮助我，如果您发现其中有任何错误，请更正代码，或者帮助我将值从 servlet 获取到 jsp 页面示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T05:02:33.190

我终于明白了，我唯一错过的就是在 page.jsp 之前放一个 /，所以它应该像 /page.jsp。

# c++ - 函数解析中使用的多重继承顺序？

> ID：15009383
> 
> 赞同：1
> 
> 时间：2013-02-21T18:13:27.417
> 
> 标签：c++, interface, multiple-inheritance, name-lookup

有一个关于继承和混合接口类的问题：
[C++中接口的多重继承](https://stackoverflow.com/questions/15007940/multiple-inhertance-of-interfaces-in-c)
导致我提出这个问题： **继承顺序是否影响函数解析规则？**

鉴于：

```
struct Binary_Stream_Read_Intf
{
  virtual void load_from_buffer(uint8_t*& buffer_ptr) = 0;
};

struct Binary_Stream_Write_Intf
{
  virtual void store_to_buffer(uint8_t*& buffer_ptr) const = 0;
};

struct Binary_Stream_Read_Write_Intf
: public Binary_Stream_Read_Intf,
  public Binary_Stream_Write_Intf
{ ; };

struct Binary_Stream_Write_Read_Intf
: public Binary_Stream_Write_Intf,
  public Binary_Stream_Read_Intf
{ ; }; 
```

**以下是我的问题：**

1.  `Binary_Stream_Read_Write_Intf`和 `Binary_Stream_Write_Read_Intf`一样吗？
2.  在函数调用中可以用一个代替另一个吗？
3.  它们都可以用于需要 a 的功能 `Binary_Stream_Read_Intf`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:44:43.007

1 不，它们不一样。您用两个不同的名称声明了两个不同的结构。编译器会将它们视为完全不同的。这类似于说

```
class Newspaper
{
    int volume;
};
class TelevisionAudioControl
{
    int volume;
}; 
```

这两个是一样的吗？它们具有相同成员的事实不足以让编译器将它们视为相同。但是，在我的示例中，由于它们确实共享相同的成员，因此您可以通过将一个地址显式转换为另一个来避免：

```
TelevisionAudioControl tac;
Newspaper * n = (Newspaper *)&tac; 
```

并且`n->volume`仍然可以工作。然而，这更多是由于指针的魔力和危险性而不是其他任何东西，并且依赖于编译器的行为方式，技术上未定义的行为也是如此。如果它完全有效，它只有在所有成员都相同*且顺序*相同时才有效。我不确定在你的例子中，函数的顺序是一样的，所以我不能保证你能做那种糟糕的铸造魔法。由于这些函数是虚拟的，您可能会通过虚拟函数指针表，并且没问题。

2 如果函数正在调用 Binary_Stream_Read_Write_Intf 或 Binary_Stream_Write_Read_Intf，则否。编译器只接受该类或从它继承的任何东西，并且两个类都不是另一个类的后代。（不过，您可以说它们是兄弟姐妹。）但是，如果该函数调用 Binary_Stream_Write_Intf 或 Binary_Stream_Read_Intf，那么您可以，因为这是调用它们共同的父级。像往常一样，如果没有共同继承，那么你不能替代。如果该函数需要一个公共超类，是的，任何一个都可以。

3 它们都继承自 Binary_Stream_Read_Intf，所以是的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:25:07.447

1.  不，就像`struct Foo {};`和`struct Bar {};`不一样。

2.  不，见上文。

3.  是的。

# javascript - DIV 按钮上的单击事件

> ID：15009386
> 
> 赞同：4
> 
> 时间：2013-02-21T18:13:33.033
> 
> 标签：javascript, jquery, css

我有一个 DIV 元素，用作 javascript 按钮。除非我点击某个区域，否则它工作正常，那么点击事件根本不会被触发。这似乎只是 Chrome 中的一个问题。

HTML

```
<div class="button">Close</div> 
```

Javascript

```
$('.button').on('click', function(e) {
    var currentDate = new Date();
    $debug.html('Clicked: ' + currentDate.getMinutes() + ':' + currentDate.getSeconds() + ':' + currentDate.getMilliseconds());
}); 
```

[http://jsfiddle.net/cellenburg/uwGK4/](http://jsfiddle.net/cellenburg/uwGK4/)

单击按钮上的任何位置都可以正常工作，除非您准确单击左侧文本开始的位置。在我的小提琴的情况下，单击字母“C”的左侧。您会看到该事件没有触发。虽然这是一个很小的区域，但似乎我几乎每次都点击它。

我已经尝试了一切。我猜这只是文本节点接受点击的问题，它没有传播到它的父节点？有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T18:17:09.333

问题似乎是选择文本的“尝试”。

将此添加到您的 CSS 中：

```
body {
    -moz-user-select: -moz-none;
    -webkit-user-select: none;
} 
```

小提琴更新为我在 chrome 中工作：

[http://jsfiddle.net/uwGK4/1/](http://jsfiddle.net/uwGK4/1/)

也只是一个想法。您可以将其从正文更改为任何内容，以防止您的“按钮”文本被选择。

更新：

告诉我你能不能打破这个！我也没办法。基本上我删除了填充，声明了高度和宽度，将 Close 包裹在一个`<div>`名为的类中`.label`并设置了它的边距。

[http://jsfiddle.net/uwGK4/5/](http://jsfiddle.net/uwGK4/5/)

新JS：

```
.label{
    margin: 5px;
} 
```

新的 HTML：

```
<div class="button"><div class="label">Close</div></div> 
```

`.button`从和中删除了填充 CSS `.button:active`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:13:25.727

尝试从 :active 事件中删除填充更改。我认为在您单击文本时移动文本的开头会导致一些奇怪的行为。我承认它改变了按钮的外观，这有点蹩脚。

另外，尝试使填充非常高（如`padding:60px 90px 40px 110px;`）。您应该看到单击文本本身的任意位置似乎将其视为拖动操作而不是单击操作。

顺便说一句，这也发生在 Windows 的 Safari 中，所以我猜这是 WebKit 的事情。

可能值得提交错误报告。

# javascript - 如何制作一个可读写的弹出窗口？

> ID：15009393
> 
> 赞同：1
> 
> 时间：2013-02-21T18:13:54.697
> 
> 标签：javascript, html

我可以制作一个弹出窗口，但是如何让它接受击键。我的似乎以只读模式打开......这是我使用的代码

```
window.open('http://fous.com/testfile.html','popup','width=800,height=1000,scrollbars=no,resizable=no,toolbar=no,directories=no,location=no,menubar=no,status=no,left=0,top=0'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T15:16:59.780

选项组合似乎在使用时锁定了窗口：

```
window.open('http://fous.com/testfile.html', 'popup','width=800,height=1000,scrollbars=no,resizable=no,toolbar=no,directories=no,location=no,menubar=no,status=no,left=0,top=0'); 
```

这似乎给出了理想的结果。

```
myWindow=window.open('http://fous.com/testfile.html','','width=800,height=1000', top=0,left=0,scrollbars=0) 
```

# ruby-on-rails - 在 Windows 8 上的 Rails 上安装 ruby 时出错

> ID：15009395
> 
> 赞同：0
> 
> 时间：2013-02-21T18:13:58.850
> 
> 标签：ruby-on-rails, ruby, windows

我需要为大学安装 ruby​​ on rails。我可以到达“欢迎页面”，但是当我尝试运行示例页面时出现错误。

我的一个朋友也有类似的问题，他也使用 Windows 8。

我拿出一台旧笔记本电脑（Windows 7）并安装它，但我没有收到错误页面，所以我很确定它与 Windows 8 有关。

截图在这里...

[http://i48.tinypic.com/29c5ms1.png](http://i48.tinypic.com/29c5ms1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:27:36.357

您必须安装 nodejs，或者将 TheRubyRacer gem 添加到您的项目中。要执行后者，请编辑您的 Gemfile 并添加：

```
gem 'therubyracer' 
```

然后运行：

```
bundle install 
```

那应该解决它。

# javascript - 如何使用 jQuery 选择和单击

> ID：15009399
> 
> 赞同：1
> 
> 时间：2013-02-21T18:14:19.457
> 
> 标签：javascript, jquery, web-applications, user-interface

```
<div id="subNav-Requests" class="suit-sub-nav" style="">
  <ul class="page-container">
    <li>
    <a class="navLink0" href="/MyApp/reporting/list/data.do">
        <span>Report Data</span>
    </a>
    </li>
  </ul>
</div> 
```

我有这样的代码。我正在尝试模拟点击`'Report Data'`。我正在尝试的是

```
var nav = 'div#subNav-' + mainNavId; //results in 'div#subNav-Requests'
$(nav+' a.navLink0').trigger('click'); 
```

没有错误，没有任何反应。我也试过这个

```
$('a.navLink0').trigger('click'); 
```

达到同样的效果。我必须选择，`subNav-Requests`因为还有更多类似的，例如 Eg`subNav-Reports`等`subNav-Allergies`，具有相同的结构但`navLinks`内部有很多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:20:38.077

在元素上调用 click 只会执行附加到该元素的任何事件处理程序。它不会将浏览器发送到 a 标签的 href。为此，我能想到的最好的方法是：

```
var href = $('a.navLink0').attr('href');
window.location.href = href; 
```

这能满足你的需要吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:16:51.207

请试试`$('a.navLink0', nav).click();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:21:10.110

据我所知，您无法模拟链接上的实际点击，您所做的只是触发点击事件，但这还不够。

您可以通过以下方式为事件设置监听器

```
$('a.navLink0').click(function() {
    window.location = $(this).attr("href");
}); 
```

然后触发点击事件，但是你为什么要这样做呢？重定向不会更适合您的目的吗？

```
window.location = $('a.navLink0').attr("href"); 
```

# ios - iOS 中包含的视图控制器的大小裁剪 91 像素

> ID：15009400
> 
> 赞同：0
> 
> 时间：2013-02-21T18:14:20.173
> 
> 标签：ios, ios6

我正在试验一个包含的视图控制器，但即使是最简单的形式也有问题。基本上，它切断了底部的 90 个像素，我不知道为什么。

我已经包含了我的代码和一个屏幕截图，旁边有一个类似大小的 UIView。这 90 像素`clipping`在不同大小上是一致的（即，如果将高度设为 200 像素，则显示为 110 像素）。任何帮助将不胜感激，因为这变得非常令人沮丧。为什么它的尺寸是这个尺寸，我该如何解决？

提前谢谢

```
- (void)viewDidLoad
{
  // this is the left one below that is the problem
   [super viewDidLoad];
   self.myView=[[JtViewController alloc] initWithNibName:@"JtViewController" bundle:nil];
   self.myView.view.frame=CGRectMake(10.0f,10.0f,100.0f,100.0f);
   self.myView.view.backgroundColor=[UIColor orangeColor];
   [self addChildViewController:self.myView];                 // 1
   [self.view addSubview:self.myView.view];
   [self.myView didMoveToParentViewController:self.myView];          // 3

   // this one is ok
   self.testView=[[UIView alloc] init];
   self.testView.frame=CGRectMake(150.0f,10.0f,100.0f,100.0f);
   self.testView.backgroundColor=[UIColor whiteColor];
   [self.view addSubview:self.testView]; 
```

![在此处输入图像描述](../Images/bce4e53cd4c1f20741ef0bb92d6a84cc.png)

**编辑 1**

我已经更新了代码，所以前 4 条评论实际上是无关紧要的

**编辑 2**

```
@implementation JtViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:55:38.397

**这是在- (void)viewDidLoad**中设置子视图边界的常见错误

 **> *- (void)viewDidLoad;* 这是放置大量设置代码的绝佳场所。但要小心，因为您的视图的几何形状（其边界）尚未设置。如果您需要根据视图的几何形状初始化某些内容，请使用*- (void)viewWillAppear:(BOOL)animated;* 方法
> 
> *- (void)viewWillAppear:(BOOL)动画;* 调用此方法时，您的界限已设置（通过您的超级视图或类似的框架）。您的视图可能只会“加载”一次，但它可能会出现和消失很多次。所以不要在这个方法中放入真正想在viewDidLoad中的东西。否则，您可能会一遍又一遍地做一些不必要的事情。通过等待此方法（即在视图出现之前）启动昂贵的操作（尽管可能必须放置一个旋转的“加载”图标），使用它来优化性能。

为了更好地理解，请参阅[斯坦福讲座](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/lectures/Lecture%206.pdf)和 Apple 文档[Responding to Display-Related Notifications](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDisplay-Notifications/RespondingtoDisplay-Notifications.html)

所以只需将设置子视图框架移动到*- (void)viewWillAppear:(BOOL)animated;* 方法

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    self.myView.view.frame=CGRectMake(10.0f,10.0f,100.0f,100.0f);
} 
```

**PS**我注意到另一个错误（也许只是错字）：

```
[self.myView didMoveToParentViewController:self.myView]; 
```

应该：

```
[self.myView didMoveToParentViewController:self]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:50:32.213

我正在使用界面生成器。

所以修复似乎是从包含的 ViewController 中删除窗口，只需添加一个 UIView 并将其设置为文件所有者的视图。可能学会了从不担心 UIWindow，但在这种情况下，您必须担心 UIWindow。**

# javascript - 访问 scorm 数据/包

> ID：15009402
> 
> 赞同：0
> 
> 时间：2013-02-21T18:14:25.133
> 
> 标签：javascript, jquery, sql-server, ajax, scorm

我必须构建一些东西来使用通过配置有 scorm 输出的 Captivate 培训/测验收集的数据。我已经对 LMS 与 scorm 的交互进行了一些研究，但似乎并不能完全理解它。我的意思是，我知道 scorm 是一种过时的标准，而且我见过的大多数解决方案或多或少都是指向过度定价许可方向的策略。

当我尝试运行其中一个训练文件时，在推进幻灯片时出现以下错误 - 'g_objAPI' 为空或不是对象。根据我从阅读中收集到的信息，我假设我需要构建脚本以通过 LMS 专有功能之一实例化该对象 -

```
LMSInitialize()
LMSFinish()
LMSGetValue()
LMSSetValue()
LMSCommit()
LMSGetLastError()
LMSGetErrorString()
LMSGetDiagnostic() 
```

但我有一种感觉，或者我被引导相信它的意义远不止于此。我不能只与scorm互动吗？或者知道什么时候触发了一个事件，我可以通过我的一个处理函数移植数据。还是真的像在演示完成后访问这个 g_objAPI 一样简单？阅读那里的一些参考资料并没有真正涉及到这一点。我的意思是我可以在清单中添加一个 js，但是可以使用哪些可访问的内容？我知道有很多人支持使用这个标准，但考虑到它最近的版本是 2004 年，它不是一个非常现代的标准，而且这不是在 ajax、jquery 和其他技术出现之前设计的吗？这似乎是一种古老的设计模型。对不起，最后有点沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:36:53.493

SCORM 是一个标准，它不强制使用任何特定技术（尽管它暗示了 javcascript 并且几乎每个实现都在 javascript 中）。我自己已经成功地将 SCORM 与 ajax 和许多 js 框架（jquery、原型）结合使用。所以它是旧的，但不是过时的。1.2 版也非常成功并且使用非常广泛（与 SCORM2004 不同）。

话虽如此，构建一个SCORM播放器还是相当复杂的。至少，您需要使用您提到的功能实现一个 API 对象。例如：

```
function API(){}
window.API     = API;
API.LMSInitialize     = LMSInitialize;
API.LMSFinish         = LMSFinish;
API.LMSGetValue       = LMSGetValue;
API.LMSSetValue       = LMSSetValue;
API.LMSCommit         = LMSCommit;
API.LMSGetLastError   = LMSGetLastError;
API.LMSGetErrorString = LMSGetErrorString;
API.LMSGetDiagnostic  = LMSGetDiagnostic;

function LMSInitialize() {
//...do your SCORM-compatible stuff
} 
```

为了实现完整的 SCORM 标准，包括对象模型，您实际上需要编写数千行代码（我知道，因为我已经这样做了）

我建议您查看包含 SCORM 播放器的开源 LMS o 项目，以了解您需要做什么（或者，如果他们的许可证批准，请按原样使用他们的代码）

# jquery - jQuery 函数调用多个 Ajax 函数；只有第一个 AJAX 有效

> ID：15009403
> 
> 赞同：1
> 
> 时间：2013-02-21T18:14:27.913
> 
> 标签：jquery, ajax

我会尽量让这个范围更广（我对使用 AJAX 还很陌生），但我离题了。

目前，我有一个调用不同函数的函数 - 因此，getContents() 调用 getWeather()、getMovies() 等。

在上述每个 getXXXX() 函数中，都有一个对一些 php 内容的 AJAX 调用 - 然后我使用一个函数来遍历数据并获取我需要的东西 - 一切都很好而且很花哨。

但是，只有 getWeather() 执行 - 以下函数永远不会被调用。下面是一些相关代码的片段，我认为问题在于分离 AJAX，但我不能确定，搜索并没有为我提供任何太相关的东西。

我曾尝试在一个函数中执行我需要的操作，但无济于事——如果我按照第一个 AJAX 函数工作的顺序进行操作，而其他函数则永远不会被触发。

```
function getContent(zipcode){
    getWeather(zipcode);
    getMovies(zipcode);
    getPlaces(zipcode);
    getMorePlaces(zipcode); 
} 
```

与 getmovies 等相同

```
function getWeather(zipcode){
    $.ajax({ 
        url: '/dshbrd/php/weather.php',
        data: "zip_code=" + zipcode,
        dataType: "xml",
        type: 'POST',
        async: 'false',
        success: parseWeatherXml
    });
} 
```

与 parseMoviesXml 等相同。

```
function parseWeatherXml(xml){
    $(xml).find("channel").each(function(){
        /*do stuff*/
    });
} 
```

我意识到这或多或少是一个“新手”问题，如果我使用了错误的单词/实际上搜索不够努力，我深表歉意。有趣的是，所有的 php 文件都在网络上执行（至少在 Chrome 中）并且它们正在返回相关数据 - 这个问题似乎或多或少涉及我的成功没有被评估。好吧，无论如何，我的第一个成功是。

编辑：我还应该提到，这绝不是“最终”代码——我最终计划通过一次调用等来完成所有事情，但这个错误在这个原型阶段确实让我感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:27:10.617

Ajax 请求是异步的，幸好它们返回一个扩展 Deferred 对象的对象，所以使用类似的东西：

```
function getWeather(zipcode){
    return $.ajax({ 
        url: '/dshbrd/php/weather.php',
        data: "zip_code=" + zipcode,
        dataType: "xml",
        type: 'POST',
        async: 'false',
        success: parseWeatherXml
    });
}

function getContent(zipcode){
    getWeather(zipcode).done(function () {
        getMovies(zipcode).done(function () {
            getPlaces(zipcode).done(function () {
                getMorePlaces(zipcode)
            });
        });
    }); 
} 
```

请注意，每个 getX 函数都会返回 ajax 请求的结果，以便您可以使用 Deferred 对象的 .done。

# c# - C# 月历

> ID：15009412
> 
> 赞同：0
> 
> 时间：2013-02-21T18:14:45.537
> 
> 标签：c#, winforms, monthcalendar

我正在使用 VS2010 中工具箱中的 monthCalendar 控件，我很难尝试使日历日期“可选择”。选定的日期将与用户输入的其余输入一起存储在一个数组中。我觉得经过几个小时的搜索并找到与我的问题无关的结果，在这里发布将是最好的解决方案。任何帮助表示赞赏。

```
 int currentIndex;
        int arraySize = 0;
         Meeting[] meetingArray = new Meeting[100];

      private void monthCalendar1_DateSelected(object sender, DateRangeEventArgs e)
    {
        e.Start.ToShortDateString();
    }

    private void calendarSaveChangesButton_Click(object sender, EventArgs e)
    {
        Meeting m = new Meeting();
        m.title = textBoxTitle.Text;
        m.location = textBoxLocation.Text;
        m.startTime = textBoxStartTime.Text;
        m.endTime = textBoxEndTime.Text;
        m.notes = notesTextBox.Text;
        meetingArray[arraySize] = m;
        currentIndex = arraySize;
        arraySize++;
        meetingListBox.Enabled = true;
        textBoxTitle.Text = "";
        textBoxLocation.Text = "";
        textBoxStartTime.Text = "";
        textBoxEndTime.Text = "";
        notesTextBox.Text = "";

        meetingListBox.Items.Add(m);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:29:00.273

转到表单中的monthCalendar 并右键单击。选择属性。然后单击事件并双击 DateSelected。

这将由 VS2010 生成：

```
private void monthCalendar1_DateSelected(object sender, DateRangeEventArgs e)
{

} 
```

在该方法内部，`e.Start.ToShortDateString()`用于捕获所选日期并将其分配给数组的适当索引。

**在评论/新发布的代码中更新您的问题：**

根据我对您项目的了解，这可能是您的最佳解决方案（无需完全重组所有内容）。添加另一个文本框（将其命名为 dateBox）。然后在 DateSelected 方法中添加以下代码：

```
dateBox.Text = e.Start.ToShortDateString(); 
```

然后在您发布的 Click 方法中（假设您的 Meeting 类具有某种 Date 属性）添加以下代码：

```
m.Date = dateBox.Text; 
```

**更新**

或者（更简单 - 我不知道为什么我之前不建议这样做），您可以`string`在名为 dateStr 的表单中定义一个全局变量，并使用它来保存会议日期的信息，直到您单击“保存更改”，然后将其分配给`m.Date`. 这将是一个比创建另一个文本框更简单的解决方案（这可能是您无论如何都试图避免的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:33:09.223

该`MonthCalendar`控件具有一些您应该能够访问的属性：SelectionRange、SelectionStart 和 SelectionEnd，其中包含所选日期的值。

# matlab - Matlab 音频处理

> ID：15009417
> 
> 赞同：0
> 
> 时间：2013-02-21T18:14:56.570
> 
> 标签：matlab, audio, equalizer, channels

我被分配了一个作业，其中包括在 matlab 中进行音频处理，我要做的是在一首歌曲中获得至少 3 个不同频率的通道，并根据通道增加 dB 输出。它必须像均衡器一样工作，但只使用 3 个通道。我最大的问题是获取频率和幅度值并将其保存到以通道（低、中和高）频率分隔的变量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:40:09.613

1.  使用 wavread 读取文件
2.  *使用**fdesign**（[FDesign 帮助）](http://www.mathworks.com/help/dsp/ref/fdesign.html)*指定*滤波器，您需要 3 个滤波器低通、带通和高通。（您可能需要抽取）*
**   使用**设计**从上述规格实际设计过滤器。您需要指定和设计三次，因为您有 3 个通道。这可以做成一个函数，并且可以将 wavread 输出传递给它。*   最后使用**filter**命令来实际过滤数据。（再次 3 个过滤器）*   现在您有 3 个输出，属于 3 个频率。（使用 Matlab 帮助它真的很好）*

 *PS：我假设你有信号处理工具箱。*

# python - Reddit 的 JSON API 允许哪些不同的排序类型？

> ID：15009422
> 
> 赞同：0
> 
> 时间：2013-02-21T18:15:21.893
> 
> 标签：python, json, api, reddit

我遇到了一个函数，它使用它的 API 从 reddit 获取顶级图像。

```
sr='pics'
sorting=''
url = r'http://www.reddit.com/r/{sr}/{top}.json'.format(sr=sr, top=sorting) 
```

但是我发现在原始编码器的早期发布了这样的内容：

```
#'sorting' is whether or not the sorting of the reddit should be customized or not,
# if it is: Allowed passing params/queries such as t=hour, week, month, year or all""" 
```

我不确定如何使用这些其他“排序”命令，或者在哪里可以找到更多关于如何使用它们的信息。我什至不确定我是否应该更多地了解“排序”作为 json/reddit/python 表示法的一部分。

我想做的不仅是通过另一个查询获得由sorting =''定义的顶部图像，而且还获得底部图像（如果可能的话，以其他方式排序）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:27:31.627

如果您正常访问 subreddit 并单击顶部，然后单击“本周”的链接，则 URL 为

[http://www.reddit.com/r/pics/top/?sort=top&t=week](http://www.reddit.com/r/pics/top/?sort=top&t=week)

如果我将 top/ 更改为 top.json

[http://www.reddit.com/r/pics/top.json?sort=top&t=week](http://www.reddit.com/r/pics/top.json?sort=top&t=week)

我得到了 JSON 等价物。但是，来自周 URL 的有争议的链接是

[http://www.reddit.com/r/pics/controversial/?sort=controversial&t=week](http://www.reddit.com/r/pics/controversial/?sort=controversial&t=week)

变成

[http://www.reddit.com/r/pics/controversial.json?sort=controversial&t=week](http://www.reddit.com/r/pics/controversial.json?sort=controversial&t=week)

因此，从该测试中似乎不可能触底。

就像@Martijn 评论的那样。这是一个 reddit API 问题，而不是 Python 或 JSON 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T20:05:58.780

[![热的, 新的, 上升的, 有争议的, 最佳的, 维基](../Images/1890a4b18aa5dc92dd4f984057f787b9.png)](https://i.stack.imgur.com/rjdXT.png)

要坚持使用您的 url 变量：`url = 'http://www.reddit.com/r/{sr}/{top}.json'`您的方法需要分配上述数组中的参数之一，例如“rising”

您应该设置一个默认值，以便方法调用不会在没有传递参数的情况下失败，例如：

```
def get_data_from_reddit_api(sr="default subreddit value", top="hot")
  #url = ...
  #rest of reddit api request & subsequent parsing of the json feed
end 
```

# c# - 生成在合理时间内不重复的唯一编号的方法？

> ID：15009423
> 
> 赞同：16
> 
> 时间：2013-02-21T18:15:30.567
> 
> 标签：c#, algorithm, guid

我正在与远程 Web 服务集成/测试，即使它是“QA”端点，它仍然会在*每次*呼叫时强制使用唯一的电子邮件地址。

我能想到`DateTime.Now.Ticks`（例如634970372342724417）和 `Guid.NewGuid()`20 个字符（或者可以吗？）。

我想将包含最后使用的数字然后使用的数字写入文件并不难，`email1@x.com, email2@x.com, etc...`但如果我可以避免持久状态，我总是这样做。

有没有人有一个技巧或算法，它给出了一个相当长的时间段（比如一年）独有的短长度“guid”，我可以将其用于我的电子邮件地址，最大长度为 20 个字符（最大长度为guid) = 14 = 20 - "@x.com" 的长度？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-21T18:26:10.340

如果您假设您不会在同一个“刻度”处生成两个电子邮件地址，那么您确实可以使用这些刻度来生成一个电子邮件地址。

但是，如果 ticks 是一个 64 位数字，并且您写出该数字，那么您最终将得到 20 多个字符。

诀窍是使用不同的方案对您的 64 位数字进行编码。假设您可以使用西方字母表中的 26 个字符 + 10 位数字。这使得 36 个可能的字符。如果取 5 位，则可以表示 32 个字符。这应该足够了。取 64 位并将它们分成 5 位一组（64 / 5 约为 13 组）。将每 5 位转换为一个字符。这样你最终会得到 13 个字符，你仍然可以在它前面添加一个字符）。

```
long ticks = DateTime.Now.Ticks;
byte[] bytes = BitConverter.GetBytes(ticks);
string id = Convert.ToBase64String(bytes)
                        .Replace('+', '_')
                        .Replace('/', '-')
                        .TrimEnd('=');
Console.WriteLine (id); 
```

产量：

```
Gq1rNzbezwg 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-21T18:22:12.413

如果您从日期时间中获得以下数字，您应该能够使其工作......类似于：

```
DateTime.Now.ToString("yyMMddHHmmssff"); 
```

这是 16 个字符，剩下 4 个作为您需要的其他前缀。

所以，2013 年 2 月 21 日，大约 10:21 将是“130321102142”，下一个将是“130321102169”，等等......

有关日期时间格式的更多详细信息，请查看[http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-21T18:21:00.183

由于您在每次调用之间指定至少 1 秒，这应该有效：

```
DateTime.Now.ToString("yyyyMMddHHmmss"); 
```

它正好是 14 个字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-26T11:53:34.823

只是要添加...如果您只想使用刻度中的数字，您可以使用`substring`，例如：

```
int onlyThisAmount = 20;
string ticks = DateTime.Now.Ticks.ToString();
ticks = ticks.Substring(ticks.Length - onlyThisAmount); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-17T14:46:49.810

```
 /// <summary>
    /// Get a unique reference number.
    /// </summary>
    /// <returns></returns>
    public string GetUniqueReferenceNumber(char firstChar)
    {
        var ticks = DateTime.Now.Ticks;
        var ticksString = ticks.ToString();
        var ticksSubString = ticksString.Substring((ticksString.Length - 15 > 0) ? ticksString.Length - 15 : 0); 
        if (this.currentTicks.Equals(ticks))
        {
            this.currentReference++;

            if (this.currentReference >= 9999)
            {
                // Only when there are very fast computers.
                System.Threading.Thread.Sleep(1);
            }

            return (firstChar + ticksSubString + this.currentReference.ToString("D4")).PadRight(20, '9');
        }

        this.currentReference = -1;
        this.currentTicks = ticks;
        return (firstChar + ticksSubString).PadRight(20, '9');
    } 
```

在我的情况下，我需要创建一个唯一的参考号，其中包含唯一的第一个字符和最多 20 个字符。也许您可以使用下面的功能，它可以让您在一个刻度内创建 9999 个唯一数字。（包括零）

当然，您可以在没有第一个字符和最大字符数 20 的情况下创建自己的实现

# haskell - Haskell - 类型/模式匹配

> ID：15009425
> 
> 赞同：0
> 
> 时间：2013-02-21T18:15:48.737
> 
> 标签：haskell, types, pattern-matching

以下代码无法编译。我收到类型错误。我认为这将是更好的版本，因为它清楚地将两种不同的情况分开......该函数应该有助于确定有限状态机是否接受输入字。

```
import Text.Show.Functions
import qualified Data.Set as Set
import qualified Data.List as List

setTransition :: (Int -> Char -> [Int])  -> [Int] -> Char -> [Int]
setTransition delta [] sigma            = []
setTransition delta xs@[x:xs'] sigma    = foldl f [] xs
                where f ys q = (delta q sigma) `List.union` ys 
```

但是，这（删除了模式匹配）确实可以编译。有人能告诉我为什么吗？？

```
import Text.Show.Functions
import qualified Data.Set as Set
import qualified Data.List as List

setTransition :: (Int -> Char -> [Int])  -> [Int] -> Char -> [Int]
setTransition delta [] sigma            = []
setTransition delta xs sigma    = foldl f [] xs
                where f ys q = (delta q sigma) `List.union` ys 
```

谢谢帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T18:21:29.467

您刚刚遇到语法错误：

```
xs@[x:xs'] 
```

应该

```
xs@(x:xs') 
```

但你实际上并不需要两种情况，因为

```
foldl f b [] = b 
```

所以

```
foldl f [] [] = [] 
```

就像您的空列表案例需要的那样。

事实上，在`[]`没有模式匹配和`(x:xs)`使用的情况下进行模式匹配是非常罕见的——这就是我知道如何考虑在这两种情况下是否会给你正确的答案。不过，它确实偶尔会发生。`x``xs``foldl`

# .net - .NET 通用从文件夹重定向

> ID：15009429
> 
> 赞同：2
> 
> 时间：2013-02-21T18:16:15.490
> 
> 标签：.net, redirect, iis-7, directory, response.redirect

我有一个包含多个 ASPX 文件的文件夹

```
folder/file1.aspx
folder/file2.aspx
folder/file3.aspx
etc.. 
```

我需要将这些文件移动到另一个文件夹并将它们的扩展名更改为静态 html 文件，如下所示。

```
folder2/file1.htm
folder2/file2.htm
folder2/file3.htm
etc.. 
```

我正在尝试优雅地重定向用户，但不确定如何继续？在 .NET 中是否可以拦截对 aspx 文件的请求并重定向到新目录中的 html 等效项？

这也需要以编程方式完成，我不能将所有 aspx 文件留在第一个文件夹中，并在 page_load 中进行 301 重定向。如何获取对**folder/any_resource**的调用，获取资源名称，将 .aspx 替换为 .htm 并使用修改后的资源名称重定向到新目录？

这是可能吗？

我在 IIS 7 上使用 .NET 框架版本 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:22:42.283

查看 URL 重写功能。IIS7 支持它。它可以通过 web.config 文件完成，也可以使用 IIS GUI 来创建规则。

几乎它的作用是，如果您尝试访问 folder/page.aspx 服务器将自动获取 folder2/page.aspx。

您可以为每个页面提供完全匹配（繁琐），也可以使用正则表达式并使用一条规则完成（假设所有页面在下一个文件夹中具有相同的名称。）

您要做的是捕获任何前往文件夹/.aspx 的内容并让服务器返回文件夹2/.aspx。

因此，用于捕获对文件夹//aspx 的请求的正则表达式可能如下所示：

```
folder/(\w*).aspx 
```

\w* 周围的括号将使其可用于反向引用（ {R:1} ）

```
folder2/{R:1}.htm 
```

以上是您的重定向 URL。它的作用是获取文件名并在文件夹 2 中查找它的 .htm 版本。

如果您想重定向所有内容，只需删除 .aspx 和 .htm。所以：

```
folder/(\w*) 
```

和

```
folder2/{R:1} 
```

这是一个快速教程，向您展示如何在 IIS 中执行此操作。创建规则时，请确保在操作类型下选择重定向而不是重写。

[网址重写](http://www.msguy.net/post/2012/02/01/url-rewrite.aspx)

# php - PHP 命名空间和全局自动加载单个文件

> ID：15009432
> 
> 赞同：1
> 
> 时间：2013-02-21T18:16:22.013
> 
> 标签：php, namespaces, autoload

这是一个在单个文件中使用 PHP 命名空间/自动加载的实验。

```
namespace trust;

class trust_network{        
    public function __construct(){      
        print "SUP";
    }
}

namespace trust2;

$trust = new \trust\trust_network(); $do = new \test();

function __autoload($class){
    require($class.".php");     
    print $class;
} 
```

所以在命名空间 trust2 下，我调用“\test”——也就是我想从全局基础上的外部文件自动加载该类。我写的东西不起作用。我知道我在命名空间下有 __autoload，但是如何在全局基础上声明它？不能在命名空间声明之前包含。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:32:38.667

对于一个文件中的多个命名空间，您应该使用大括号语法：

```
namespace n1 {
...
}
namespace n2 {
...
}
namespace {
...
} 
```

在最后一个块中，您可以在全局命名空间中声明函数。参考：[http ://www.php.net/manual/en/language.namespaces.definitionmultiple.php](http://www.php.net/manual/en/language.namespaces.definitionmultiple.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T18:36:35.260

自动加载通常是为了让您可以为每个文件放置一个类。因此，您应该具有以下布局

**/index.php**

```
function __autoload($class){
    // You may need to convert backslashes in $class to forward slashes 
    // and strip the first slash, we'll leave the
    require($class.".php");
    // debug-only:  print $class;
}
// Calling new here triggers __autoload to be called
$trust = new \trust\trust_network();
$do = new \test(); 
```

**/trust/trust_network.php**

```
namespace trust;

class trust_network{        
    public function __construct(){      
        print "TRUST_NETWORK";
    }
} 
```

**/test.php**

```
class test() {
    public function __construct(){      
        print "TEST";
    }
} 
```

请注意，您应该改用[spl_autoload_register](http://php.net/manual/en/function.spl-autoload-register.php)，因为它允许多个系统挂钩自己的自动加载行为。从 PHP 5.3 开始，您可以执行以下操作

```
spl_autoload_register(function ($class) {
    require($class.".php");
}); 
```

# html - 如何与 SWF 对象通信？

> ID：15009437
> 
> 赞同：0
> 
> 时间：2013-02-21T18:16:45.277
> 
> 标签：html, flash, swfobject

我的网站中嵌入了一些 Flash 游戏（.swf 文件）。我想知道我是否可以从他们那里获得数据（如最终比赛得分），以创建“顶级球员”数据库？

有什么方法可以在不重新编译文件的情况下从 swf 对象中获取这些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:21:51.967

您可以将数据（例如分数）发送到 php 文件（或者可能是 asp）并将其存储在数据库中。例子：

```
function SendRequest(dataToBeStoredInDB:URLVariables, callback:Function):void 
{
var urlReq:URLRequest = new URLRequest("/path/to/phpfile/on/server.php");
urlReq.method = URLRequestMethod.POST;

urlReq.data = dataToBeStoredInDB;

var loader:URLLoader = new URLLoader(urlReq);
loader.addEventListener( Event.COMPLETE, callback_function );
loader.dataFormat = URLLoaderDataFormat.VARIABLES;
loader.load(urlReq);
} 
```

# c++ - C++ push_back vs Insert vs emplace

> ID：15009442
> 
> 赞同：10
> 
> 时间：2013-02-21T18:16:53.493
> 
> 标签：c++, vector, insert, push-back

我目前正在使用带有 C++ 的向量制作应用程序。

我知道预优化是万恶之源。

但我真的忍不住好奇。

我正在将其他向量的一部分添加到另一个向量中。
我们会说向量的大小永远不会改变 300。

因为我总是附加到向量的末尾

这样做是否更快：
`a.reserve(300);`
`a.insert(a.end(), b.begin(), b.end());`

或者循环遍历我想要附加的向量并使用`push_back`or单独添加每个项目（同时仍然预先保留）会更快吗`emplace`？（不确定哪个更快）

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T18:31:00.410

这是一个一般原则：当一个库同时提供`do_x_once`和`do_x_in_batch`时，后者应该至少与`do_x_once`在简单循环中调用一样快。如果不是，那么该库的实现非常糟糕，因为一个简单的循环足以获得更快的版本。通常，此类批处理函数/方法可以执行额外的优化，因为它们具有数据结构内部的知识。

所以，`insert`应该*至少和循环一样*快`push_back`。在这种特殊情况下，智能实现可以为您要插入的所有元素`insert`执行一次。每次都必须检查向量的容量。不要试图智取图书馆:)`reserve``push_back`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T14:56:23.720

我想这真的取决于编译器（库实现）、编译选项和架构。在 VS2005 中进行快速基准测试，无需在 Intel Xeon 上进行优化 (/Od)：

```
std::vector<int> a;
std::vector<int> b;

// fill 'a' with random values for giggles

timer.start()
// copy values from 'a' to 'b'
timer.stop() 
```

我使用这些不同的“复制值...”方法获得了 10 000 000 个项目的这些结果：

1.  为“b”保留空间，然后使用 for 循环`b.push_back(a[i]);`：0.808 秒
2.  调整“b”的大小，然后使用索引分配进行 for 循环`b[i] = a[i];`：0.264 秒
3.  无需重新调整“b”的大小，只需`b.insert(b.end(), a.begin(), a.end());`：0.021 秒（与先保留没有显着差异）
4.  `std::copy(a.begin(), a.end(), std::back_inserter(b));`: 0.944 秒（0.871 保留优先）
5.  调整“b”的大小，然后在基指针上进行内存复制`memcpy(&(b[0]), &(a[0]), 10000000*sizeof(int));`：0.061 秒

然而，启用优化 (/Ox) 后，情况就不同了。我不得不将大小增加到 100 000 000 以获得更多差异化：

1.  push_back 循环：0.659 秒
2.  索引循环：0.482 秒
3.  插入：0.210 秒（与先保留没有显着差异）
4.  std::copy: 0.422 秒，先保留。没有它有一个 bad_alloc。
5.  内存：0.329 秒

值得注意的是，无论有没有优化，插入方法都是线性缩放的。其他方法在没有优化的情况下显然效率低下，但使用它们仍然不能那么快。正如 James Kanze 所指出的，它在 g++ 上有所不同。使用您自己的平台运行测试以进行验证。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-21T18:40:26.020

正如 larsmans 所说，你在单个库调用中做的越多，它就越有可能变得更有效率。在`insert` 进入向量的情况下，库通常最多会进行一次重新分配，并且最多复制每个移位的元素一次。如果您使用循环 and `push_back`，它可能会重新分配多次，这可能会明显变慢（例如一个数量级）。

但是，根据类型的不同，执行以下操作也可能更快：

```
a.resize( 300 );
std::copy( b.begin(), b.end(), a.end() - 300 ); 
```

我发现这对于 `int`在英特尔机器上使用 g++ 的简单标量类型（如 ）更快。

# loops - 批处理文件以在每个文件中的变量名称更改时提取值

> ID：15009447
> 
> 赞同：1
> 
> 时间：2013-02-21T18:17:10.780
> 
> 标签：loops, batch-file, cmd, extract

好的，我有数百个文件，其中有一个文本标题，其中包含一组八个不同变量（名称、主机、年、月、小时、分钟、秒）的一个或多个条目。第一次显示该值时，它看起来像：

```
@name 4 10
3 4 DHARLAN 
```

此后每次（变量集每个文件可以出现 1 到 100 次）它只显示为：

```
3 4 DHARLAN 
```

问题在于，在这种情况下，4 可能是 1 到 99 之间的任何值。所以在下一个文件中它可能是：

```
3 15 DHARLAN 
```

所以实际上每个变量条目是这样的：

```
3 ## <value> 
```

其中 ## 在标头的前面由以下方式确定：

```
@name ## X 
```

我不明白 FOR /F TOKENS 如何工作以接近任何东西。

```
What I need is to parse a directory and end up with a file something like:
<filenameA> <name1> <host1> <year1> <month1> <day1> <hour1> <minute1> <second1>
<filenameA> <name2> <host2> <year2> <month2> <day2> <hour2> <minute2> <second2>
<filenameB> <name1> <host1> <year1> <month1> <day1> <hour1> <minute1> <second1>
... 
```

到目前为止我所拥有的：

```
FOR /f "tokens=*" %%i IN ('dir /a-d /s /b') DO call :findfile "%%i"

:findfile
REM Print Filename
FINDSTR /B /M "#UGC">>output.txt
REM set Name Variable, need 2nd word (7th & if exists (8th) character) from this line only
FINDSTR /B "@name">%%n
REM Find all lines with name variable
FINDSTR /B "3 %n%">>output.txt 
```

非常感谢您的帮助，甚至对可以执行此操作的程序的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:27:33.887

## 想法

所以...这就是我阅读您的问题的方式。您有许多具有许多值的文件，并且您希望为每个文件输出所有文件变量的单行。每个变量由两行组成。1\. 变量声明（名称）和 2\. 变量值（DHARLAN）。这些行由一个数字（1 到 99）关联。这个对吗？

这应该让你开始......

```
@echo off
setlocal EnableExtensions EnableDelayedExpansion

<nul set /p "=">output.txt
for /f "delims=" %%F in ('dir /a:-d /b /s') do if exist "%%~fF" (
    set "name="
    set "namenum="
    set "host="
    set "hostnum="
    set "year="
    set "yearnum="
    set "month="
    set "day="
    set "daynum="
    set "monthnum="
    set "hour="
    set "hournum="
    set "minute="
    set "minutenum="
    set "second="
    set "secondnum="
    set "count=0"
    for /f "usebackq delims=" %%L in ("%%~fF") do (
        for /f "tokens=1,2,3*" %%X in ("%%L") do (
            if "%%Y"=="!namenum!" set "name=%%Z" & set /a "count+=1"
            if "%%Y"=="!hostnum!" set "host=%%Z" & set /a "count+=2"
            if "%%Y"=="!yearnum!" set "year=%%Z" & set /a "count+=4"
            if "%%Y"=="!monthnum!" set "month=%%Z" & set /a "count+=8"
            if "%%Y"=="!daynum!" set "day=%%Z" & set /a "count+=16"
            if "%%Y"=="!hournum!" set "hour=%%Z" & set /a "count+=32"
            if "%%Y"=="!minutenum!" set "minute=%%Z" & set /a "count+=64"
            if "%%Y"=="!secondnum!" set "second=%%Z" & set /a "count+=128"
            if /i "%%X"=="@name" set "namenum=%%Y"
            if /i "%%X"=="@host" set "hostnum=%%Y"
            if /i "%%X"=="@year" set "yearnum=%%Y"
            if /i "%%X"=="@month" set "monthnum=%%Y"
            if /i "%%X"=="@day" set "daynum=%%Y"
            if /i "%%X"=="@hour" set "hournum=%%Y"
            if /i "%%X"=="@minute" set "minutenum=%%Y"
            if /i "%%X"=="@second" set "secondnum=%%Y"
            if "!count!" equ "255" (
                echo %%~nxF !name! !host! !year! !month! !day! !hour! !minute! !second!>>output.txt
                set "name="
                set "namenum="
                set "host="
                set "hostnum="
                set "year="
                set "yearnum="
                set "month="
                set "day="
                set "daynum="
                set "monthnum="
                set "hour="
                set "hournum="
                set "minute="
                set "minutenum="
                set "second="
                set "secondnum="
                set "count=0"
            )
        )
    )
)

goto :eof

:End
endlocal 
```

* * *

## 更新

这是上面带有注释的脚本的更新版本。它还应该使用设置部分和`cd`命令来解决您在下面的评论。

```
@echo off
setlocal EnableExtensions EnableDelayedExpansion

:: Setup
set "ResultsFolder=results"
set "ExportFile=output.txt"

:: Set the Working Directory
cd data

:: Verify that the Results folder exists
if not exist "%ResultsFolder%\*" md "%ResultsFolder%"
set "OutputFile=%ResultsFolder%\%ExportFile%"

:: Empty the results file.
<nul set /p "=">%OutputFile%

:: Loop through the files /a:-d in the directory and its subdirectories /s.
for /f "delims=" %%F in ('dir /a:-d /b /s') do if exist "%%~fF" (
    call :Reset
    rem Loop through the file contents and parse each line.
    for /f "usebackq delims=" %%L in ("%%~fF") do (
        for /f "tokens=1,2,3*" %%X in ("%%L") do (
            rem Keep track of the variables.
            if "%%Y"=="!namenum!"   set "name=%%Z"   & set /a "count+=1"
            if "%%Y"=="!hostnum!"   set "host=%%Z"   & set /a "count+=2"
            if "%%Y"=="!yearnum!"   set "year=%%Z"   & set /a "count+=4"
            if "%%Y"=="!monthnum!"  set "month=%%Z"  & set /a "count+=8"
            if "%%Y"=="!daynum!"    set "day=%%Z"    & set /a "count+=16"
            if "%%Y"=="!hournum!"   set "hour=%%Z"   & set /a "count+=32"
            if "%%Y"=="!minutenum!" set "minute=%%Z" & set /a "count+=64"
            if "%%Y"=="!secondnum!" set "second=%%Z" & set /a "count+=128"
            if /i "%%X"=="@name"   set "namenum=%%Y"
            if /i "%%X"=="@host"   set "hostnum=%%Y"
            if /i "%%X"=="@year"   set "yearnum=%%Y"
            if /i "%%X"=="@month"  set "monthnum=%%Y"
            if /i "%%X"=="@day"    set "daynum=%%Y"
            if /i "%%X"=="@hour"   set "hournum=%%Y"
            if /i "%%X"=="@minute" set "minutenum=%%Y"
            if /i "%%X"=="@second" set "secondnum=%%Y"
            rem When a full set is reached print it out.
            if "!count!" equ "255" (
                echo %%~nxF !name! !host! !year! !month! !day! !hour! !minute! !second!>>%OutputFile%
                call :Reset
            )
            if "!count!" gtr "255" (
                echo %%~nxF: Incomplete Set Encountered.  Stopping parsing of this file, continuing to the next.
                rem You can also use other validations to identify incomplete sets.
            )
        )
    )
)

goto :eof

:: Reset all of the variables for the next set.
:Reset
set "name="
set "namenum="
set "host="
set "hostnum="
set "year="
set "yearnum="
set "day="
set "daynum="
set "month="
set "monthnum="
set "hour="
set "hournum="
set "minute="
set "minutenum="
set "second="
set "secondnum="
set "count=0"
goto :eof

:End
endlocal 
```

### 概括

这是脚本正在做什么以及它是如何工作的摘要。

1.  Main for 循环将遍历当前工作目录中的所有文件。`dir /a:-d /b /s`
2.  在这个循环中，我们首先设置跟踪文件变量所需的变量。`:Reset`
3.  下一个 for 循环将打开文件并读取文件的每一行。`%%L`
4.  然后第三个 for 循环将解析该行以获取相关变量信息。将行 ( ) 中的第一个、第二个和所有剩余标记检索`1,2,*`到变量中 (%%X, %%Y, %%Z)
5.  现在执行逻辑来跟踪变量集。如果已经设置了变量号并且该行与变量号匹配，则保存变量值。否则，如果变量名称匹配，则检索变量编号以在以下几行中进行比较。
6.  还要增加集合计数，当发现完整集合时，将其写入带有文件名的输出文件。
7.  重置变量以供下一组使用。
8.  如果计数不等于 255，则文件格式不正确或变量集不完整。

### 笔记

该脚本似乎是针对所提出的问题和其中提供的信息的最佳解决方案。我不得不对正在处理的文件做出假设，因此可能需要进行一些修改。如果您想向我们展示要解析的文件的完整示例，这将有助于确定要做什么。

# javascript - 使用 jquery 为每个输入值动态创建 JSON

> ID：15009448
> 
> 赞同：99
> 
> 时间：2013-02-21T18:17:12.027
> 
> 标签：javascript, jquery, html, json

我遇到了一种情况，我想通过 PHP 从 JSON 格式中读取一些数据，但是我在理解如何构造 Javascript 对象以动态创建 JSON 格式时遇到了一些问题。

我的情况如下：

```
<input title="QA" type="text" class="email">
<input title="PROD" type="text" class="email">
<input title="DEV" type="text" class="email"> 
```

到目前为止，我通过每个输入的 Javascript 代码都会抓取数据，但是我无法理解如何从这里开始处理。

```
var taskArray = {};

$("input[class=email]").each(function() {
  var id = $(this).attr("title");
  var email = $(this).val();

  //how to create JSON?

}); 
```

如果可能，我想获得以下输出。

```
[{title: QA, email: 'a@a.com'}, {title: PROD, email: 'b@b.com'},{title: DEV, email: 'c@c.com'}] 
```

通过输入字段值获取电子邮件的位置。

* * *

## 回答 #1

> 赞同：294
> 
> 时间：2013-02-21T18:23:27.240

像这样：

```
function createJSON() {
    jsonObj = [];
    $("input[class=email]").each(function() {

        var id = $(this).attr("title");
        var email = $(this).val();

        item = {}
        item ["title"] = id;
        item ["email"] = email;

        jsonObj.push(item);
    });

    console.log(jsonObj);
} 
```

**解释**

您正在寻找`an array of objects`. 因此，您创建了一个空白数组。`input`使用“title”和“email”作为键为每个对象创建一个对象。然后将每个对象添加到数组中。

如果你需要一个字符串，那么做

```
jsonString = JSON.stringify(jsonObj); 
```

**样本输出**

```
[{"title":"QA","email":"a@b"},{"title":"PROD","email":"b@c"},{"title":"DEV","email":"c@d"}] 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-21T18:28:04.563

假设您需要 JSON 字符串作为输出，我认为您不能仅使用 jQuery 将 JavaScript 对象转换为 JSON 字符串。

根据您定位的浏览器，您可以使用该`JSON.stringify`函数生成 JSON 字符串。

有关更多信息，请参阅[http://www.json.org/js.html](http://www.json.org/js.html)，您还可以在此处找到适用于本机不支持 JSON 对象的旧浏览器的 JSON 解析器。

在你的情况下：

```
var array = [];
$("input[class=email]").each(function() {
    array.push({
        title: $(this).attr("title"),
        email: $(this).val()
    });
});
// then to get the JSON string
var jsonString = JSON.stringify(array); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-21T18:20:20.467

可能这会有所帮助，我希望尽可能使用纯 JS，因为您不会有很多 JQuery 函数调用，因此它可以极大地提高性能。

```
var obj = [];
var elems = $("input[class=email]");

for (i = 0; i < elems.length; i += 1) {
    var id = this.getAttribute('title');
    var email = this.value;
    tmp = {
        'title': id,
        'email': email
    };

    obj.push(tmp);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-28T19:33:25.090

与上面的示例相同 - 如果您只是在寻找 json（不是对象数组），只需使用

```
function getJsonDetails() {
      item = {}
      item ["token1"] = token1val;
      item ["token2"] = token1val;
      return item;
}
console.log(JSON.stringify(getJsonDetails())) 
```

此输出将打印为（有效的 json）

```
{ 
   "token1":"samplevalue1",
   "token2":"samplevalue2"
} 
```

# c# - 异步调用方法

> ID：15009455
> 
> 赞同：0
> 
> 时间：2013-02-21T18:17:32.390
> 
> 标签：c#, asp.net, asynchronous, delegates, begininvoke

这是我调用异步函数的旧代码：

```
 public class Caller {

    public void Calculate(CalcParameters calcParameters, string sourceApp) {
        AsyncCaller caller = new AsyncCaller(_username, _password, new Token());
        caller.Calculated += new CalculatedHandler(OnCalculated);
        caller.calculate(sourceApp, calcParameters);
    }

    protected virtual void OnCalculated(object sender, CalculatedEventArgs e) {
        if (OnCalculatedEvent != null) OnCalculatedEvent(e);
    }

    public void calculate(string calcID, WebService.CalcParameters calcParams) {
        calculate(0, calcID, calcParams);
    }

    public void calculate(long callID, string calcID, WebService.CalcParameters calcParams) {
        try {
            lock(this) {
                Worker wsWorker = MakeCalculateWorker(callID, calcID, new OnCalculatedHandler(OnCalculated), calcParams);
                Thread wsThread = new Thread(new ThreadStart(wsWorker.calculate));
                wsThread.IsBackground = true;
                wsThread.Start();
            }
        } catch (Exception ex) {
            _log.WriteError(
            Assembly.GetExecutingAssembly().GetName().Name,
            this.GetType().Name,
            MethodBase.GetCurrentMethod().Name,
            _username,
            ex.Message);
            throw ex;
        }
    }
} 
```

但现在我需要使用委托和 begininvoke 来做到这一点。

请有人可以帮助我或给我一些样本以供阅读。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:38:53.693

这是一个 MSDN 示例，它解释了如何使用异步委托。

通读它，但也要一步一步地通读它，就好像你是理解它的程序一样。

[异步委托编程示例](http://msdn.microsoft.com/en-us/library/h80ttd5f%28v=vs.71%29.aspx)

# c++ - 为 IShellItemArray 创建 PCIDLIST_ABSOLUTE_ARRAY

> ID：15009458
> 
> 赞同：1
> 
> 时间：2013-02-21T18:17:48.023
> 
> 标签：c++, winapi, com, windows-8

我必须调用[IApplicationActivationManager::ActivateForProtocol](http://msdn.microsoft.com/de-de/library/windows/desktop/hh706905%28v=vs.85%29.aspx)来打开 Windows 8 应用程序，因此我必须提供`IShellItemArray*`数据。

基本上，我只想创建一个新的`IShellItemArray`，所以我尝试调用[SHCreateShellItemArrayFromIDLists](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762146%28v=vs.85%29.aspx)。

但我真的不*知道*第二个参数有哪种类型。MSDN 说：

> rgpidl [in]
>   类型：PCIDLIST_ABSOLUTE_ARRAY
>     指向 ITEMIDLIST 结构的 cidl 常量指针列表。

我无法在任何地方找到有关此类型的信息。不在 MSDN 中，不在我最喜欢的搜索引擎中。

如果有人能澄清这种类型及其创建/初始化或者可以提供一些示例代码，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:53:48.897

该类型`PCIDLIST_ABSOLUTE_ARRAY`等价于`LPCITEMIDLIST *`，即指向 ITEMIDLIST（也称为 PIDL）的常量指针数组。typedef 的“ABSOLUTE”部分表示 PIDL 必须是绝对的（即，从桌面开始的完全限定的 PIDL）而不是子 PIDL（相对于某个文件夹）。

您可以像制作任何数组一样创建一个，例如

```
PCIDLIST_ABSOLUTE pIdlArray[10];
pIdlArray[0] = myFirstPidl;
pIdlArray[1] = mySecondPidl;
... 
```

不同 typedef 的原因是`STRICT_TYPED_ITEMIDS`定义。如果定义了此符号，则 shell API 标头切换为使用“类型化”PIDL 指针，这在您打算使用绝对 PIDL、子 PIDL、const PIDL 等时更加明显。如果`STRICT_TYPED_ITEMIDS`未定义，您可以在任何地方使用 LPITEMIDLIST 及其变体。

# facebook - og：图像未显示

> ID：15009464
> 
> 赞同：3
> 
> 时间：2013-02-21T18:18:07.333
> 
> 标签：facebook, image

几个小时前，每个 og 标签都正常工作，显示正确的 og:images 等等（即使图像很小）。我没有改变标签或图像大小，但现在当我在 facebook 上分享一个 url 时，它不显示 og:image

```
<meta property="og:type" content="article" />
<meta property="og:title" content="my title" />
<meta property="og:description" content="my description" />
<meta property="og:image" content="my image url"/>
<meta property="og:site_name" content="My web name" /> 
```

重要的是昨天一切都很好，即使图像大小和现在没有任何改变它不起作用。

- 已编辑：在 Google+ 上，og:image 一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:52:38.417

我在将 mod_pagespeed 与 apache 一起使用时遇到了这个问题，facebook linter 说图像太小了，但事实并非如此如果它在调试器上完美运行，我无能为力，也许等待。

如果您最近在服务器上安装了 mod_pagespeed，它可能有助于禁用它。

# mysql - mysql - 如何查询表，按名称分组和同一表中的标题计数？

> ID：15009473
> 
> 赞同：1
> 
> 时间：2013-02-21T18:18:35.743
> 
> 标签：mysql, sql

试图绕过这个查询，并尝试分组，但没有运气：

如果我有一张桌子：

```
name         title         (some other fields)
John Doe     Engineer      ...
John Doe     Tech          ...
John Doe     Tech          ...
Frank Smith  Tech          ...
Frank Smith  Tech          ... 
```

我需要一个会导致：

```
name         title      count(title)
John Doe     Engineer   1
John Doe     Tech       2
Frank Smith  Tech       2 
```

已尝试按名称和头衔使用分组，但它似乎只是将一个或另一个分组，给我总工程师 (1) 和技术人员 (4) 或总客户 (2) 的数量，但我需要总头衔 BY姓名。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T18:24:44.033

不知道为什么这不起作用：

```
SELECT name, title, COUNT(*) Titles
FROM YourTable
GROUP BY name, title 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:24:23.440

试试这个

```
 SELECT name , title , count(*) count
 FROM Table1
 GROUP BY name , title
 ORDER BY count 
```

[**演示 SQLFIDDLE**](http://sqlfiddle.com/#!2/8d217/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:25:12.737

```
SELECT NAME, TITLE, COUNT(*) FROM BOOKS GROUP BY NAME, TITLE 
```

# scala - Scala模式匹配导致两个输出

> ID：15009474
> 
> 赞同：1
> 
> 时间：2013-02-21T18:18:40.497
> 
> 标签：scala, split, match, case

我正在匹配一个包含一些列 [String Double Double Double Double] 的文本文件。我想为文件 [String Double Double] 和 [String Double Double] 的每一行获取以下内容，其中 String 是两者的标签相同，但我将前两个双打和最后两个双打分成两个独立的行。

我正在使用以下不起作用：

```
val out = Source.fromFile(filename).getLines.collect(_.split("\\s+").toList match {
      case s1 :: points1 :: points2 => (s1,"4",Point(points1.map(_.toDouble).toIndexedSeq))
                                    => (s1,"6",Point(points2.map(_.toDouble).toIndexedSeq)) 
```

我的双打是点的坐标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:53:35.140

首先`points1`匹配您的第二列和`points2`其余列。这是因为在`::`符号左侧是列表的第一个元素（头），但第二个是其余子列表（尾）。

将行分解为所有列的列表可能很容易，如下所示：

```
... match {
  case s1 :: p1x :: p1y :: p2x :: p2y :: Nil => 
```

然后您可以再次将其组合成两行，将它们放在二元素列表中：

```
=> List( (s1,"4",Point(Vector(p1x,p1y).map(_.toDouble))),
         (s1,"6",Point(Vector(p2x,p2y).map(_.toDouble))) ) 
```

但是，结果你会得到一个 List[List[..]]，所以你需要把它展平。最简单的方法是使用`flatMap`而不是`collect`.

因此，您的完整代码将如下所示：

```
val out = Source.fromFile(filename).getLines.flatMap(_.split("\\s+").toList match {
  case s1 :: p1x :: p1y :: p2x :: p2y :: Nil => 
    List( (s1,"4",Point(Vector(p1x,p1y).map(_.toDouble))),
          (s1,"6",Point(Vector(p2x,p2y).map(_.toDouble))) )
}) 
```

# java - 当用户输入每个数字时，如何使用 libPhoneNumber-iOS 即时格式化电话号码

> ID：15009475
> 
> 赞同：3
> 
> 时间：2013-02-21T18:18:41.267
> 
> 标签：java, iphone, ios, phone-number, libphonenumber

libPhoneNumber 具有 AsYouTypeFormatter 函数（在用户输入每个数字时即时格式化电话号码）。工作示例：

```
PhoneNumberUtil phoneUtil = PhoneNumberUtil.getInstance();
AsYouTypeFormatter formatter = phoneUtil.getAsYouTypeFormatter("US");
System.out.println(formatter.inputDigit('6'));  // Outputs "6"
...  // Input more digits
System.out.println(formatter.inputDigit('3'));  // Now outputs "650 253" 
```

如何使用 libPhoneNumber-iOS 做到这一点？是真的？我没有找到类似的功能。

谢谢！

# php - 从 url 或 html 获取所有图像名称并保存在文件夹中

> ID：15009476
> 
> 赞同：2
> 
> 时间：2013-02-21T18:18:41.953
> 
> 标签：php, html-parsing

如果我有一个字符串

```
<div> balah balah <img src='image/www.png' /> balah balah</div>
<div> balah balah <img src='image/ttt.png' /> balah balah</div>
<div> balah balah <img src='image/rrr.png' /> balah balah</div> 
```

我怎么能找到 src 中的图像名称。我使用此代码

```
 $pos = strpos($srt,".png"); 
```

为了找到.png的位置，我得到了位置。

我找到了第一个“.png”，但没有找到从“.png”到“/”返回的任何方法。

我怎么能在“/”和“。”之间找到名字。这是“www”。

有点混乱。

**更新的问题：实际问题**

`HTML`假设我`PHP`在`cURL()`.

我如何检索所有图像名称并存储在文件夹中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T18:22:52.337

你可以使用这样的东西来获取图像的来源：

```
<?php
    $doc = new DOMDocument();
    $doc->loadHTML(htmlstring);
    $imageTags = $doc->getElementsByTagName('img');

    foreach($imageTags as $tag) {
        echo $tag->getAttribute('src');
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:24:53.847

您应该使用[preg_match_all](http://php.net/preg_match_all)来完成这样的任务。未测试：

`preg_match_all('/image\/(.*)\.png/iU', $str, $matches);`

`var_dump($matches);`

`$matches`现在应该包含 www、ttt、rrr。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T18:26:31.460

```
$text = "
<div> balah balah <img src='image/www.png' /> balah balah</div>
<div> balah balah <img src='image/ttt.png' /> balah balah</div>
<div> balah balah <img src='image/rrr.png' /> balah balah</div>
";
preg_match_all("/src='image\/([^.]+)/i", $text, $out);
/*
echo $out[1][0]; //www
echo $out[1][1]; //ttt
echo $out[1][2]; //rrr
*/
print_r($out);

OUTPUT
Array
(
    [0] => Array
        (
            [0] => src='image/www
            [1] => src='image/ttt
            [2] => src='image/rrr
        )

    [1] => Array
        (
            [0] => www
            [1] => ttt
            [2] => rrr
        )

) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T08:39:05.063

在大家的帮助下，我写了一个脚本。希望这将帮助许多与我的问题相同的解决方案寻求者。

```
 <?php
        $url='http://php.net/'; 
        $returned_content = get_url_contents($url); 

        /* gets the data from a URL */

        function get_url_contents($url){
                $crl = curl_init();
                $timeout = 5;
                curl_setopt ($crl, CURLOPT_URL,$url);
                curl_setopt ($crl, CURLOPT_RETURNTRANSFER, 1);
                curl_setopt ($crl, CURLOPT_CONNECTTIMEOUT, $timeout);
                $ret = curl_exec($crl);
                curl_close($crl);
                return $ret;
        }

        $doc = new DOMDocument();
        $doc->loadHTML($returned_content);
        $imageTags = $doc->getElementsByTagName('img');
        $img1 = array();
        foreach($imageTags as $tag) {
            $img1[] = $tag->getAttribute('src');

        }

        foreach($img1 as $i){
            save_image($i);
            if(getimagesize(basename($i))){
                echo '<h3 style="color: green;">Image ' . basename($i) . ' Downloaded OK</h3>';
            }else{
                echo '<h3 style="color: red;">Image ' . basename($i) . ' Download Failed</h3>';
            }
        }

        //Alternative Image Saving Using cURL seeing as allow_url_fopen is disabled - bummer
        function save_image($img1,$fullpath='http://example.com/'){
            if($fullpath=='http://example.com/'){
                $fullpath = basename($img1);
            }
            $ch = curl_init ($img1);
            curl_setopt($ch, CURLOPT_HEADER, 0);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
            curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
            $rawdata=curl_exec($ch);
            curl_close ($ch);
            if(file_exists($fullpath)){
                unlink($fullpath);
            }
            $fp = fopen($fullpath,'x');
            fwrite($fp, $rawdata);
            fclose($fp);
        }
    ?> 
```

# ruby-on-rails - 如何通过基于将另一个表连接到连接表的条件来执行 has_many

> ID：15009482
> 
> 赞同：1
> 
> 时间：2013-02-21T18:19:03.153
> 
> 标签：ruby-on-rails, has-many-through, rails-activerecord

我需要在 Rails 中建立一个 has many_through 关系，其中返回的唯一记录是连接表附加到另一个表中的特定记录的那些记录。

我在 SQL 中尝试过，但它不起作用。如何以活动记录的方式表达下面的 SQL 关系？

以下是模型：

```
class User
  has_many :organisation_roles
  has_many :organisations,
           through: :organisation_roles
end 

class OrganisationRole
  belongs_to :user
  belongs_to :organisation
  belongs_to :role
end

class Role
  has_many :organisation_roles
end

class Organisation

  has_many :organisation_roles
  has_many :roles, through: :organisation_roles
  has_many :users, through: :organisation_roles

  # This doesn't work
  has_many :members, 
           class_name: 'User', 
           through: :organisation_roles,
           finder_sql: Proc.new {
             %Q{
               SELECT u.*
                 FROM users u, organisation_roles ors, roles r
                WHERE ors.organisation_id = #{id} AND r.name = 'member'
       }
  }

  # This doesn't either
  has_many :managers, 
           through: :organisation_roles, 
           source: :user, 
           conditions: { organisation_roles: { role: { name: 'manager' }}}

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:09:30.850

找到了解决方案，虽然使用的是实例方法，而不是has_many：

```
class Organisation
  # other stuff

  def members
    users.joins(:roles).where("roles.name = 'member'")
  end
end

class User
  # other stuff

  has_many :roles,
           through: :organisation_roles
end 
```

# php - “fetchAll”命令对长 sql 查询语句不起作用（Zend 框架）

> ID：15009483
> 
> 赞同：1
> 
> 时间：2013-02-21T18:19:11.963
> 
> 标签：php, mysql, sql, zend-framework, fetchall

我正在尝试通过 zend 框架（PHP）的“fetchAll”命令向 mysql DB 发送查询。查询由大量字符（约 9000 个字符）组成。我的查询是这样的： `select * from mytable where name_text like 'bla bla bla....(about 8600 characters)..'`

结果是我的 php 应用程序的进程处于“等待”状态（没有错误，但进程没有继续），并且在 mysql db 上保持连接处于睡眠状态。

注意：如果我直接在 phpmyadmin 中执行 sql 语句，它会运行，几秒钟后我就有了结果集。

我的系统配置是：ubuntu 12.10 mysql apache2 php5

你有什么想法来解决这个问题吗？先感谢您

# mercurial - Mercurial中修订号后面的加号是什么

> ID：15009487
> 
> 赞同：2
> 
> 时间：2013-02-21T18:19:18.577
> 
> 标签：mercurial, tortoisehg

我们在工作中使用 Mercurial 和 TortoiseHg，我总是`+`在我的工作目录修订号之后看到标志，而 Google 没有告诉我任何有关它的信息。有谁能解释一下吗？

这是我正在谈论的内容的快照：

![在此处输入图像描述](../Images/9be1cd56dc8dab327b4bd900f00e20fd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:31:23.490

谷歌告诉我这意味着你的存储库中有未提交的本地更改。

另请参阅[Java：如何获取 mercurial current changeset number for use in program](https://stackoverflow.com/questions/2805976/java-how-to-get-mercurial-current-changeset-number-for-use-in-program#comment2846011_2806080)、[https://stackoverflow.com/a/9301105/1848654](https://stackoverflow.com/a/9301105/1848654)和[http://stackingcode.com/blog/2011/01/21/assembly-versioning -与-汞](http://stackingcode.com/blog/2011/01/21/assembly-versioning-with-hg)。

# string - 注册表枚举调用失败的字符串/值

> ID：15009489
> 
> 赞同：0
> 
> 时间：2013-02-21T18:19:24.240
> 
> 标签：string, winapi, visual-c++, unicode, registry

您好，提前致谢。我今天的问题是我正在为注册表键值名称和值数据的字符串取回“垃圾”。除了最后一个值之外，这似乎是键/文件夹中所有注册表值的问题，尽管有时我能够读取第一个值的名称（但仍然不是数据）

我正在尝试做的是能够显示单个可能变量注册表项中的值名称和值数据（此时我不关心子项）我正在尝试使用 windows unicode 字符串执行此操作, WCHAR * 和 LPWSTR 类型。我看到的问题字符串的“垃圾”是一系列重复的非英文字符，这会弄乱随后的 wcout 显示。在注册表编辑器显示中，我尝试读取的值具有 REG_SZ 类型的数据，我理解它是一个字符串。

可能我最大的问题是我找不到一个明确的指南来简单地说明如何做我正在尝试做的事情，查看注册表项，并列出值名称和值数据。任何帮助将不胜感激。我是 unicode 字符串和 windows api 的新手。我的环境是windows xp sp3，visual c++ 2010 express。

```
#include <stdio.h>
#include <iostream> /* for std::wcin and wcout */
#include <windows.h>
#include <stdlib.h>
#include <string.h>
#include <process.h>
#include "conio.h"
#

include "stdafx.h"
    int _tmain(int argc, _TCHAR* argv[])

    {
        int return_val;
        DWORD error;
        HKEY hkey;
        BYTE iterations = 0;

        /* 1\. first, open key (folder) */
        return_val = RegOpenKeyExW(HKEY_LOCAL_MACHINE, L"HARDWARE\\DEVICEMAP\\VIDEO", 0, KEY_READ, &hkey);

        /* check how the open went */
        if(return_val != ERROR_SUCCESS)
        {
            std::wcout << L"error opening the key: " << return_val << std::endl;
        }
        else
        {
            std::wcout << L"it's cool" << std::endl;

            /* 1.a. query the key (optional) */
            LPTSTR className = new WCHAR[255];
            DWORD classNameSize = MAX_PATH;
            DWORD subKey = 0; 
            DWORD maxSubKey;
            DWORD maxClass;
            DWORD value;
            DWORD maxValue;
            DWORD maxValueData;
            DWORD securityDescriptor;
            FILETIME ftLastWriteTime;
            DWORD sectionNameSize;

            return_val = RegQueryInfoKey(hkey, className, &classNameSize, NULL, 
                                        &subKey, &maxSubKey, &maxClass, &value, &maxValue, 
                                        &maxValueData, &securityDescriptor, &ftLastWriteTime);
            std::wcout << L"query return: " << return_val << std::endl;
            std::wcout << L"class name: " << className << L", (size): " << classNameSize << std::endl;
            std::wcout << L"subkey: " << subKey << L", max: " << maxSubKey << L", maxClass: " << maxClass << std::endl;
            std::wcout << L"Value: " << value << L", maxval: " << maxValue << L", maxvaldata: " << maxValueData << std::endl;
            std::wcout << L"Sec descrpt: " << securityDescriptor << std::endl << std::endl;

            /* now enumerate the strings in the key */
            int count = 0;
            DWORD valuename_size = 16, type_return = 0, data_size = 102;
            LPWSTR valuename = new WCHAR[valuename_size];//maxValue
            LPWSTR data = new WCHAR[data_size];//maxValueData>>1

            /* 2\. the outer loop grabs the values one at a time (the data within the key/folder) */
            do {
                iterations++; /* just for debugging */

                return_val = RegEnumValue(hkey, count, valuename, &valuename_size, 0, &type_return, (LPBYTE)data, &data_size);

               /* return of RegEnumValue */
                std::wcout << L"RegEnumValue return val: " << return_val << std::endl;
                /* double check sizes */
                std::wcout << L"size: valname_size: " << valuename_size << L", data_size: " << data_size << std::endl;

                if(return_val == ERROR_SUCCESS || return_val == ERROR_MORE_DATA)
                {
                    /* to try and avoid bad strings */
                    if(type_return == REG_DWORD || count == 0)
                    std::wcout << L"Value - " << valuename << L", Type: " << type_return << L" Data - " << (BYTE)(*data) << std::endl;
                    else
                    std::wcout << L"Value - " << valuename << L", Type: " << type_return << L" Data - " << data << std::endl;

                }
                //data = REG_SZ;
                count++;
            } while (return_val != ERROR_NO_MORE_ITEMS && count < value);
        }

        /* just to check my code */
        std::wcout << L"iterations: " << iterations << std::endl;
        /* to "pause" during debugging */
        std::wcin >> input;
        return 0;
    } 
```

此版本部分基于评论者的帮助似乎可以按我的意愿工作，我将其发布以供其他人参考。我不清楚的是，当取回 valuename 的字符数时，不包括空终止字符（当然），而且你传递给它的缓冲区的大小需要包括它，所以如果你返回 16并且您输入 16，这就是为什么它会返回 234，（输入遵循与输出不同的约束是不公平的，但生活不公平），然后您需要输入 17 作为字符串大小

```
 /* now enumerate the strings in the key */
        int count = 0;
        DWORD valuename_size, type_return = 0, data_size;
        LPWSTR valuename;
        BYTE *data;

        /* 2\. the outer loop grabs the values one at a time (the data within the key/folder) */
        do {
            valuename_size = maxValue;
            data_size = maxValueData;

            iterations++; /* just for debugging */

            return_val = RegEnumValue(hkey, count, NULL, &valuename_size, 0, &type_return, NULL, &data_size); /* value name */
            //return_val = RegEnumValue(hkey, count, NULL, NULL, 0, &type_return, NULL, &data_size); /* value data */

            valuename = new WCHAR[valuename_size+1];
            data = new BYTE[data_size]; /* data_size is in BYTES, of any type */

            valuename[0] = L'\0'; /* if the string returned is still invalid, this will help make sure wcout doesnt mess up */
            return_val = RegEnumValue(hkey, count, valuename, &valuename_size, 0, &type_return, (LPBYTE)data, &data_size); /* value name */
            //return_val = RegEnumValue(hkey, count, NULL, NULL, 0, &type_return, (LPBYTE)data, &data_size); /* value data */

            /* return of RegEnumValue */
            std::wcout << L"RegEnumValue return val: " << return_val << std::endl;
            /* double check sizes */
            std::wcout << L"size: valname_size: " << valuename_size << L", data_size: " << data_size << L", Type: " << type_return << std::endl;

            if(return_val == ERROR_MORE_DATA /*&& type_return == REG_DWORD*/)
            {
                /* try again? */
                delete valuename;//free(valuename);
                delete data;

                /* double the "global" max number of WORDs for the string (including null termination) */
                maxValue <<= 1;
                valuename_size = maxValue;
                maxValueData <<= 1;
                data_size = maxValueData;

                /* doublecheck */
                std::wcout << L"new val size before enum: " << valuename_size << L", new data size before enum: " << data_size << std::endl;
                return_val = RegEnumValue(hkey, count, NULL, &valuename_size, 0, &type_return, NULL, &data_size); /* value name */

                /* the return version of valuename_size is the number of characters, not including the null terminating character */
                valuename = new WCHAR[valuename_size+1];
                data = new BYTE[data_size];

                valuename[0] = L'\0'; /* if the string returned is still invalid, this will help make sure wcout doesnt mess up */
                return_val = RegEnumValue(hkey, count, valuename, &valuename_size, 0, &type_return, (LPBYTE)data, &data_size); /* value name */

                std::wcout << std::endl << L"return: " << return_val << L", Val size: " << valuename_size << L", data_size: " << data_size << std::endl << std::endl;
            }

            if(return_val == ERROR_SUCCESS)
            {
                valuename[valuename_size] = L'\0'; /* null terminate the string before printing */

                /* I only care about string data */
                if (type_return == REG_SZ)
                {
                    data[data_size] = 0; /* null terminate the string before printing */
                    std::wcout << L"Value - " << valuename << L", Type: " << type_return << L" Data - " << (LPWSTR)data << std::endl;
                }
            }

            count++;
        } while (return_val != ERROR_NO_MORE_ITEMS && count < value);
    }

    /* just to check my code */
    std::wcout << L"iterations: " << iterations << std::endl;
    /* to "pause" during debugging */
    std::wcin >> input;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:50:06.843

几个明显的问题：

*   当您调用 RegEnumValue 时，valuename_size 和 data_size 应该包含缓冲区的大小，但它们只对第一个值这样做。对于第二个值及之后的值，它们包含上一次调用的结果。
*   不保证注册表中的字符串值以 NULL 结尾。您需要在使用字符串之前显式终止字符串（使用返回的长度）。请注意，由于您使用的是 unicode，因此您需要将字节长度除以 2 以获得代码单元的长度。这些注释仅适用于值，而不适用于名称。
*   您假设任何不是 DWORD 的值都是字符串。二进制值呢？

# c# - 为 HttpWebRequest 混合同步和异步方法

> ID：15009493
> 
> 赞同：0
> 
> 时间：2013-02-21T18:19:41.500
> 
> 标签：c#, .net, asynchronous, httpwebrequest

在[这个 msdn 页面上](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse.aspx)，我读到：

> 您的应用程序不能为特定请求混合使用同步和异步方法。如果调用 BeginGetRequestStream 方法，则必须使用 BeginGetResponse 方法来检索响应。

反之亦然吗？如果我调用`BeginGetResponse`异步读取响应，我是否也应该使用它`BeginGetRequestStream`来编写请求？

我的请求很小（100-1000 个字符），响应可能很大。 [Jeffrey Richter 的这篇文章](http://www.wintellect.com/cs/blogs/jeffreyr/archive/2009/02/08/httpwebrequest-its-request-stream-and-sending-data-in-chunks.aspx)似乎说，在小负载的情况下，它可以同步完成（并且无需设置`ContentLength`属性）。那是对的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:24:37.387

从技术上讲不是，您*可以*根据您的要求同步发送请求并异步处理响应，反之亦然，但通常不建议这样做。为了保持一致性，请选择最能满足您需求的方法，并使用相同的方法实现请求/响应

例如，当您发送可能需要一些时间才能完成的报告请求时，您可能会混合使用各种方法。您希望同步发送请求，因为您希望确保在继续之前完全发送请求（例如，如果从 Windows 应用程序发送，则考虑连接问题），但异步处理响应，因为您不想占用等待响应返回时的 UI。尽管如此，我仍然建议您在发送/接收方面保持一致。

# asp.net-mvc - MVC4区域渲染基础_Layout不同

> ID：15009498
> 
> 赞同：1
> 
> 时间：2013-02-21T18:19:54.510
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-areas

我有一个 MVC4 应用程序，它有两个区域，“报告”和“管理员”。我希望这些区域中的视图`_Layout`使用在整个应用程序中使用的相同视图 ( `~/Shared/_Layout.cshtml`)。当我构建应用程序并在我的开发工作站上点击它时，两个区域都正确渲染。但是，当我将它发布到 Server 2008 R2（运行 IIS 7.5）时，管理区域中的所有视图都没有 _Layout。我已经切换了浏览器，在网络服务器上尝试过，并从域中的另一个系统上点击它，清除缓存......没有任何效果。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:26:46.577

在当前项目中，我有一个区域，在该区域的`Views`文件夹中有一个名为`_ViewStart.cshtml`. 它的`Layout`属性指向文件夹`_Layout.cshtml`中的应用程序级文件`ApplicationName/Views/Shared`。

**_ViewStart.cshtml**

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

这样做，您可以`_Layout.cshtml`与所有或仅部分区域共享一个公用文件。

* * *

有关该`_ViewStart.cshtml`文件的更多信息，请务必查看此答案：

[https://stackoverflow.com/a/9300466/114029](https://stackoverflow.com/a/9300466/114029)

# javascript - 轴刻度标记

> ID：15009500
> 
> 赞同：5
> 
> 时间：2013-02-21T18:19:56.860
> 
> 标签：javascript, d3.js

我的折线图的 x 轴代表金钱。有没有办法在每个刻度的开头附加一个€符号？

目前它们只是值 2000000、250000、300000....

我希望他们展示 2000000 欧元、250000 欧元、300000 欧元......

我尝试将 € 添加到我的 .CSV 文件中，但是当我尝试调用数据来制作我的轴时它导致了错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T21:18:42.350

使用`tickFormat`功能：

[https://github.com/mbostock/d3/wiki/Quantitative-Scales#wiki-linear_tickFormat](https://github.com/mbostock/d3/wiki/Quantitative-Scales#wiki-linear_tickFormat)

例如：

```
axis.tickFormat( function(d) { return "€" + d } ); 
```

还可以考虑使用[d3.format](https://github.com/mbostock/d3/wiki/Formatting#wiki-d3_format)用逗号/句点等对数字进行分组。

# java - 如何使用 JSONArray 从数据库中检索项目

> ID：15009505
> 
> 赞同：1
> 
> 时间：2013-02-21T18:20:13.743
> 
> 标签：java, json, servlets

我正在尝试使用`JSONArray`. 我的代码运行良好，但它仅将数据库中的最后一项显示为数据库中的项目数。

我的代码是：

```
 Gson gson = new Gson();
    JsonObject myObj = new JsonObject();
    JSONObject Obj = new JSONObject();
    Connection conn = null; 
    try {
        conn=prepareConnection();
    } catch (ClassNotFoundException e1) {
        System.out.println( "Error --> " + displayErrorForWeb(e1));
        e1.printStackTrace();
    } catch (SQLException e1) {
        System.out.println( "Error --> " + displayErrorForWeb(e1));
        e1.printStackTrace();
    }

    try {
        JsonElement commentObj;

        StringBuilder sb1=new StringBuilder(1024);
        sb1.append("insert into ").append(uname.trim()).append("vcomments values(?,?,?,?)");
        String sql1=sb1.toString();
        PreparedStatement stmt1 = conn.prepareStatement(sql1);
         stmt1.setString(1,uname);
         stmt1.setString(2,message);
         stmt1.setInt(3,itemId);
         stmt1.setInt(4,albumId);
         int i=stmt1.executeUpdate();

        if(i!=1){
        myObj.addProperty("success", false);
    }
    else {
        myObj.addProperty("success", true);
    }
    PreparedStatement stmt = null;    
    String sql = null;

     try {     

        StringBuilder sb=new StringBuilder(1024);
        sb.append("select * from ").append(uname.trim()).append("vcomments").append(" where itemid=").append(itemId).append(" and albumid=").append(albumId);
        sql=sb.toString();
        stmt = conn.prepareStatement(sql);
        ResultSet rs = stmt.executeQuery();
        ArrayList<JSONObject> CommArray=new ArrayList<JSONObject>();

         while(rs.next()){
            Obj.put("uname",rs.getString("uname").trim());
            Obj.put("comment",rs.getString("comments").trim());
            CommArray.add(Obj);

            }    
         JSONArray arrayObj=JSONArray.fromObject(CommArray);
         commentObj=gson.toJsonTree(arrayObj);
         myObj.add("commentInfo", commentObj);
         out.println(myObj.toString());
         rs.close();                                                              
         stmt.close();                                                            
         stmt = null;                                                             

         conn.close();                                                            
         conn = null;                                                  

     }                                                              
     catch(Exception e){System.out.println( "Error --> " + displayErrorForWeb(e));} 
```

收到的回复：

```
 {"success":true,"commentInfo":[{"uname":"shyam","comment":"erxdg"},{"uname":"shyam","comment":"erxdg"},{"uname":"shyam","comment":"erxdg"},{"uname":"shyam","comment":"erxdg"}]} 
```

该数据库包含两个项目。最后一项是*erxdg*。Servlet 仅将响应发回最后一项。

请任何人帮我解决它......谢谢............

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:30:30.570

您必须`JSONObject`为每个结果集创建一个新的。在循环中创建一个，并将其添加到数组中。否则，您只是替换旧对象的字段，并将对它的另一个引用添加到结果中。

```
while(rs.next()){
    //new line:
    JSONObject Obj = new JSONObject();
    // original part looks fine:
    Obj.put("uname",rs.getString("uname").trim());
    Obj.put("comment",rs.getString("comments").trim());
    CommArray.add(Obj);
} 
```

# asp.net - 无法在 VB.NET 上调用 Request.PhysicalApplicationPath

> ID：15009513
> 
> 赞同：0
> 
> 时间：2013-02-21T18:20:52.727
> 
> 标签：asp.net, vb.net, path

我正在尝试请求我的应用程序的路径以在其上保存新文件，我知道我应该这样做：

```
Dim mypath As String = Request.PhysicalApplicationPath 
```

但由于某种原因，我什至找不到 Request 类。

![在此处输入图像描述](../Images/1e274bd6f3cad74a706a3a44e2e98c9c.png)

我读到它属于 System.Web 命名空间，我添加了它但仍然无法正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:33:30.710

您可以使用`Server.MapPath("~/logfiles")`获取网页所在目录中子目录日志文件的路径。

这是在实际的 ASP.NET 网页中还是在处理程序中？

编辑

另一种方法是使用`Path.Combine(HttpRuntime.AppDomainAppPath, "logfiles")`

# linker - 针对 libB.so、libB.so.3 或 libB.so.3.0 的共享链接？

> ID：15009514
> 
> 赞同：0
> 
> 时间：2013-02-21T18:20:54.190
> 
> 标签：linker, dynamic-linking, abi

假设我想创建一个库 A 链接到另一个（系统）库 B，其中安装了以下文件：

```
$ ll /usr/lib/libB*
libB.so -> libB.so.3
libB.so.3 -> libB.so.3.0
libB.so.3.0 
```

在创建我自己的`libA.so*`时，我认为`libB.so*`在链接行中包含任何一个都是很好的做法。事实上，链接器标志`-Wl,--no-undefined`甚至强制执行此操作。

`libB`上面哪些文件用于链接似乎没有什么区别，因为最终它们都指向同一个文件`libB.so.3.0`，但我猜也有最好的做法。

推荐什么，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T04:16:40.243

> 推荐什么，为什么？

`libB.so`官方仅支持链接。链接`libB.so.3`或`libB.so.3.0`或多或少是偶然的；不要这样做。

[您可以在此处](http://docs.oracle.com/cd/E19082-01/819-0690/chapter5-5/index.html)阅读有关外部库版本控制的信息。

# computer-vision - 计算机视觉 - 视频中的人体检测

> ID：15009517
> 
> 赞同：2
> 
> 时间：2013-02-21T18:20:59.200
> 
> 标签：computer-vision

我需要实时检测视频中的人。我想这与在静态图像中检测人没有太大区别（除了视频图像的分辨率通常要低得多）。你们能给我指出一些方向吗？我在计算机视觉领域没有经验，所以任何可以给我介绍的链接、文章、视频都会很有用。任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T00:27:49.350

人类检测最著名的方法之一是[定向梯度直方图 (HoG)](http://lear.inrialpes.fr/people/triggs/pubs/Dalal-cvpr05.pdf)检测器。这已在[OpenCV 库](http://docs.opencv.org/modules/gpu/doc/object_detection.html?highlight=hog)中实现，应该是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-16T12:16:32.220

一种方法是使用 HOG 功能。第一种方法似乎很耗时，但它是一种非常成功的人体检测算法。第二种方法是通过调整图像大小来优化 HOG 算法，这种方法导致在图像中检测到人的次数增加两倍以上，而主要是当人在边缘时检测精度会受到影响。第三种方法包括将 Haar 特征用于人体检测，尽管精度高，但该解决方案显着降低了计算成本。为了评估所提出的方法，我们建立了一个顶视图人类数据库。实验结果证明了所提出算法的有效性和效率，该算法具有良好的比率精度/时间执行。

# ruby-on-rails - 如何增加 Heroku 30s h12 超时

> ID：15009519
> 
> 赞同：5
> 
> 时间：2013-02-21T18:21:01.853
> 
> 标签：ruby-on-rails, heroku, timeout

我正在运行一个 rails 应用程序，该应用程序具有来自用 c++ 开发的本地客户端的 json webservice 调用（具有多部分 json 表单的 post 命令，上传流文件）

我已经在 Heroku 文档中阅读了有关[路由网格](https://devcenter.heroku.com/articles/http-routing#routing-mesh)的信息，提到了 http 连接的 30 秒 Heroku 限制，以及关于[长轮询](https://devcenter.heroku.com/articles/request-timeout)的替代方案，指的是 worker dynos。

在通话期间，我处理 pdf 文档并在其中插入签名。这个 pdf 文档可以是 100kb 或 11Mb（或者更多）。

我知道我最终将不得不在后台进程上执行此操作，但我想在绝对必须之前避免这样做。

你知道增加这个超时的任何方法吗？

正如您在下面的代码中看到的那样，我在保存文档后正在处理我的文档（我在`after_save`.

我希望客户端会在文档处理之前得到响应，但是我仍然在 heroku 端超时，在客户端出现错误。

这一切都适用于较小的文档，但对于只有 400kb 的 121 页 pdf 文档来说，它会爆炸......

最后，我的文件被上传，所以我只需要在发送超时响应之前将该响应继续发送到我的客户端应用程序......

有什么建议么？

我的错误：

```
 at=error code=H12 desc="Request timeout" method=POST path=/documents host=fierce-beach-2720.herokuapp.com fwd="81.193.155.217/bl4-155-217.dsl.telepac.pt" dyno=web.1 queue=0ms wait=0ms connect=1ms service=32272ms status=503 bytes=0 
```

我的控制器：

```
respond_to do |format|
      if @document.save!
        format.html { redirect_to root_path, :flash => { :success =>  'Document was successfully created.'} }
        format.json { render json: @document, status: :created, location: @document}
        @document.document_process 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T02:31:25.710

我已经结束了使用[延迟工作](https://github.com/collectiveidea/delayed_job)+[无](https://github.com/lostboy/workless)工作，现在我的工人测功机只在需要时运行。

由于 heroku 为每个应用计划提供 750 小时的免费使用时间，因此当您的使用率较低时，您也许可以继续免费使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:12:13.210

建议是：使用后台进程！

我读到你想避免它，但没有办法绕过它！尽可能快地返回客户端是 Web 应用程序的最佳实践，因为它可以释放资源。当您在 heroku 上仅运行一个 dyno 并且您有多个请求时，它们将因您的超时而被阻止，并且没有用户能够访问您的页面。当您拥有如此长时间运行的流程时，您很容易遇到拒绝服务案例。

如果您因为成本而不想执行后台进程，请查看免费增值：[https ://github.com/phoet/freemium](https://github.com/phoet/freemium)

# javascript - 在 Jquery 中克隆表行

> ID：15009547
> 
> 赞同：0
> 
> 时间：2013-02-21T18:22:42.713
> 
> 标签：javascript, jquery

用jquery遇到了一点砖墙，我目前有以下代码：

[http://jsfiddle.net/uSLhb/1/](http://jsfiddle.net/uSLhb/1/)

克隆方法是：

```
$("#addMore").click(function() {
    $('.user_restriction:last').clone().insertAfter(".user_restriction:last");
    return false;
}); 
```

如您所见，我已对其进行了设置，因此您可以轻松地克隆该行。

我面临的问题是在新的克隆元素中显示正确的选择列表（在“字段”列中），具体取决于他们从行中的第一个选择（在“表”列中）字段中选择的字段。

想知道有没有人能帮我找到解决办法，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:38:55.800

[这里的工作示例](http://jsbin.com/uliyec/1/edit)- 我不得不使用 jsbin 作为小提琴演奏！

克隆不会保持选定状态，因此您需要在克隆之前获取值并在之后设置它。

您的点击现在变为：

```
$("#addMore").click(function() {
   var value = $('.user_restriction:last').find('select').val(); 
  $('.user_restriction:last').clone().insertAfter(".user_restriction:last");

        //alert(value);
$('.user_restriction:last').find('select').val(value);
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:05:19.277

您面临的问题发生了，因为您使用 ID 进行选择。ID在一个页面中*必须*是唯一的，否则你会遇到麻烦。如果您正在克隆带有 id 的 select，则该 id 也将被克隆，从而生成无效文档。

[看看我在 JsBin 上创建的示例](http://jsbin.com/axomoy/1/edit)

标记：

```
<tr class="user_restriction">
    <td>
        <select name="table[]" class="userselect">
            <option value="" selected>---</option>
            <option value="members">Members</option>
            <option value="staff_positions">Staff Positions</option>
        </select>
    </td>
    <!-- and so on, basically just changed ids to classes -->            
</tr> 
```

我将所有 ID 更改为类并更改了更改处理程序，因为这是您的第二个问题。

事件处理程序绑定到选定的元素，而不是您之后添加的元素。这是事件委托的正确用例，当处理程序绑定到父级并在此示例中捕获来自子选择元素的更改事件时，无论何时将其添加到 DOM。

使用 jQuery，这是实现此目的的一种方法：

```
$('table.table').on('change', '.userselect', function() {

    var activeRow = $(this).parents('tr');

    activeRow.find('td').eq(1).find('select').hide();

    if(this.value.length === 0){
        activeRow.find('td').eq(1).find('select').eq(0).show();
    }else{
        activeRow.find("." + this.value).show();
    }

}); 
```

处理程序绑定到您的`table`- 元素，`.userselect`是我添加到连续第一个选择的类。因此，以后添加的元素的每一个更改也将被处理。在处理程序中，我将行为更改为仅影响实际的表行，而不是整个表。

# linear-programming - 意外的 VARSYM、ZIMPL 程序

> ID：15009548
> 
> 赞同：1
> 
> 时间：2013-02-21T18:22:50.027
> 
> 标签：linear-programming, lpsolve, scip

我的 ZIMPL 程序出现意外的 VARSYM 错误，我不知道问题出在哪里，这是代码的一部分

这里是变量

```
var FWPlus1 integer   >= 0 <= 4;
var FWPlus2 integer   >= 0 <= 4;
var FWPlus3 integer   >= 0 <= 4; 
```

上升到 28，其中一些点的上限为 3、2 和 1

这是得到错误的方程

```
 subto R3: FCOMx ==
    ((FWPlus1  * (FWPlus1  * 0       + 0       ))  +(FWPlus2  * (FWPlus2  * .105   + 5.47008 ))   +
     (FWPlus3  * (FWPlus3  * .2054   + 10.70110))  +(FWPlus4  * (FWPlus4  * .29683 + 15.46443))   +
     (FWPlus6  * (FWPlus6  * .48028  + 25.02197))  +(FWPlus7  * (FWPlus7  * .50223 + 26.16553))   +
     (FWPlus8  * (FWPlus8  * .50223  + 26.16553))  +(FWPlus9  * (FWPlus9  * .48028 + 25.02197))   +
     (FWPlus10 * (FWPlus10 * .43734  + 22.78483))  +(FWPlus11 * (FWPlus11 * .37529 + 19.55188))   +
     (FWPlus12 * (FWPlus12 * .29683  + 15.46443))  +(FWPlus13 * (FWPlus13 * .20540 + 10.70110))   +
     (FWPlus14 * (FWPlus14 * .105    + 5.47008))   +(FWPlus15 * (FWPlus15 * 0      + 0))          +
     (FWPlus16 * (FWPlus16 * -.105   + -5.47008))  +(FWPlus17 * (FWPlus17 * -.2054 + -10.70110))  +
     (FWPlus18 * (FWPlus18 * -.29683 + -15.46443)) +(FWPlus19 * (FWPlus19 * -.37529 + -19.55188)) +
     (FWPlus20 * (FWPlus20 * -.43734 + -22.78483)) +(FWPlus21 * (FWPlus21 * -.48028 + -25.02197)) +
     (FWPlus22 * (FWPlus22 * -.50223 + -26.16553)) +(FWPlus23 * (FWPlus23 * -.50223 + -26.16553)) +
     (FWPlus24 * (FWPlus24 * -.48028 + -25.02197)) +(FWPlus25 * (FWPlus25 * -.37529 + -19.55188)) +
     (FWPlus26 * (FWPlus26 * -.29683 + -15.44827)) +(FWPlus27 * (FWPlus27 * -.20540 + -10.68992)) +
     (FWPlus28 * (FWPlus28 * -.10499 + -5.46437)))

      /(FWPlus1 +FWPlus2 +FWPlus3 +FWPlus4 +FWPlus6 +FWPlus7 +FWPlus8 +FWPlus9 +FWPlus10 +FWPlus11 +FWPlus12 +
        FWPlus13 +FWPlus14 +FWPlus15 +FWPlus16 +FWPlus17 +FWPlus18 +FWPlus19 +FWPlus20 +FWPlus21 +FWPlus22 +FWPlus23 +
        FWPlus24 +FWPlus25 +FWPlus26 +FWPlus27 + FWPlus28); 
```

错误说它在分号的末尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:52:23.363

抱歉，但我想我明白了，它不喜欢我在 2 项中乘以零

# php - MongoDB 从集合中返回 6 个随机行

> ID：15009568
> 
> 赞同：0
> 
> 时间：2013-02-21T18:23:40.120
> 
> 标签：php, mongodb, random, find

嗨，我想从集合中随机显示 6 行。每行作为时间戳，所以我可以使用它，但我的问题是如何从集合中只返回 6 行并使其随机

这是我收藏的一个示例 - 我使用 PHP

```
{
   "age": "2",
   "breed": "Bengal",
   "dislikes": "Dislikes being patted by people",
   "likes": "Like to purr and get headbutts. Sleeps on our bed, with Woody our dog, and also comes in for food at 6pm, loves Tin fish and is known to meow quite lo [...]",
   "lost": true,
   "pet_lost_date": NumberInt(1361366445),

   "type": "cat" 
} 
```

我看到了这个 db.items.find().skip(randonNumberHere).limit(1); - [MongoDB：从集合中提取多个随机文档](https://stackoverflow.com/questions/9315375/mongodb-pulling-multiple-random-documents-from-a-collection)

但我不明白，我从中了解到的只是 find() ，它找到了所有的 skip() ，它跳过了一些行，limit() 是返回的行数。

**但是我的问题更多是关于获取所有丢失的宠物并将它们随机化并且只显示 6**

```
public function lost_pets($no){
        $collection = static::db()->ipet_mypet;
        $pet = $collection->find(array('lost': true, '$where'=> function(){var randomNumber=Math.random(); return this.random>=randomNumber || this.random>randomNumber })).sort(array('pet_lost_date'=> 1)).limit(6);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-09T10:46:07.100

根据我在逻辑上看到的方式，简单的方法是用随机数保存记录，然后在从数据库读取时按该数字排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:31:03.747

你可以使用这个：

```
db.collection.find({'lost': true, $where: function(){var randomNumber=Math.random(); return this.pet_lost_date>=randomNumber || this.pet_lost_date>randomNumber }}).next(); 
```

Find({'lost':true}) 获取具有字段 'lost': true 的文档。

$where 子句返回一个 DBCursor，它指向一个特定的文档。通过调用“next()”，我们获得了光标指向的下一个文档。所以我们一次获取一个随机文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-22T08:50:24.063

假设您有 20 条记录要随机获取 5 条记录

我们将生成一个介于 0 到 20 - 极限值 (5) = 15 之间的随机跳跃值。
这样，即使随机跳跃值从 15 开始，
我们也可以确保返回 5 条记录。我们也可以强制跳跃值为零，如果在我们从总记录中减去随机值后，它变为负数

示例代码：

```
$total_records = $collection->count(); <br>
$limit = 5; <br>
$skip = mt_rand(0, $total_records);<br>
$collection->find()->skip($skip < 0 ? 0 : $skip)->limit($limit); 
```

# java - java中的URL验证

> ID：15009573
> 
> 赞同：2
> 
> 时间：2013-02-21T18:23:58.903
> 
> 标签：java, regex, validation, url

嘿，我正在尝试基于[什么是检查字符串是否为有效 URL 的最佳正则表达式的 url 验证？](https://stackoverflow.com/questions/161738/what-is-the-best-regular-expression-to-check-if-a-string-is-a-valid-url)在java中，但由于某种原因它不起作用。建议？

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class urlValidate {

    /**
     * @param args
     */
    public static void main(String[] args) {
        test_url("http://brb/", false);
            test_url("https://localserver/projects/public/assets/javascript/widgets/UserBoxMenu/widget.css", false);
    test_url("https://www.google.com/", true);
    test_url("https://www.google.co.uk/projects/my%20folder/test.php", false);
    test_url("https://myserver.localdomain/", true);
    test_url("https://192.168.1.120/projects/index.php/", false);
    test_url("https://192.168.1.1/", true);
    test_url("https://projectpier-server.localdomain/projects/public/assets/javascript/widgets/UserBoxMenu/widget.css", false);
    test_url("https://2.4.168.19/project-pier?c=test&a=b", false);
    test_url("https://localhost/a/b/c/test.php?c=controller&arg1=20&arg2=20", false);
    test_url("https://user:password@localhost/a/b/c/test.php?c=controller&arg1=20&arg2=20", false);
    test_url("myserver",false);
    test_url("https://tomcat:8080/",true);
    test_url("https://facebook.com",false);
}

public static void test_url(String url, boolean expected) {
    boolean valid = isURLValid(url, true);
    String out = "URL Valid?: " + (valid ? "yes" : "no") + " for URL: "
            + url + ". Expected: " + (expected ? "yes" : "no") + ". ";
    if (valid == expected) {
        out += "PASS\n";
    } else {
        out += "FAIL\n";
    }
    System.out.println(out);
}

public static boolean isURLValid(String url, boolean forcehttps) {
    String regex = "";
    if (forcehttps) {
        regex = "/^(https):\\/\\/";
    } else {
        regex = "/^(https?):\\/\\/";
    }
    regex += "((([a-z0-9]\\.|[a-z0-9][a-z0-9-]*[a-z0-9]\\.)*"
            + "[a-z][a-z0-9-]*[a-z0-9]"
            + "|((\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\.){3}"
            + "(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])"
            + ")(:\\d+)?)"
            + "(#([a-z0-9$_\\.\\+!\\*\\'\\(\\),;:@&=-]|%[0-9a-f]{2})*)?(\\/)"
            + "$/i";

    Pattern p = Pattern.compile(regex);
    Matcher m = p.matcher(url); // get a matcher object
    return m.matches();
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:25:48.993

正则表达式最初用斜杠包裹（用作分隔符，这是 PHP 中 PCRE 所必需的）。Java 不使用这些。

```
if (forcehttps) {
    regex = "^(https):\\/\\";
} else {
    regex = "^(https?):\\/\\";
} 
```

最后`/i`也是不可取的。相反，写

```
Pattern p = Pattern.compile(regex, Pattern.CASE_INSENSITIVE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:27:30.470

您可以使用 Apache *commons-validator* api。有一个名为*UrlValidator*的类，或者类似的东西。
看看这个：[http](http://commons.apache.org/validator/)
: //commons.apache.org/validator/ 我不懂很多正则表达式，所以在这个主题上我帮不了你太多。
祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:30:21.660

虽然将正则表达式写入 URL 验证不是问题，但为什么不直接使用`java.io.URL`类呢？只需创建`URL`如下实例：如果语法错误`new URL(spec)`，它将抛出。`MalformedURLExcption`

# android-emulator - Android：我的模拟器没有出现在 DDMS 设备列表中

> ID：15009575
> 
> 赞同：0
> 
> 时间：2013-02-21T18:24:17.497
> 
> 标签：android-emulator, eclipse-plugin, ddms

有时突然我无法`Emulator`从我的 连接到`eclipse`，同时我没有看到设备下的模拟器`DDMS`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:00:47.053

似乎这`adb`会导致您的问题。我`adb restart.bat`为这种情况创建了（我使用 Windows）文件：

```
adb kill-server
adb start-server 
```

# charts - （Highcharts）极坐标图中的圆形/楔形区域

> ID：15009577
> 
> 赞同：2
> 
> 时间：2013-02-21T18:24:21.183
> 
> 标签：charts, highcharts, diagram

我需要绘制一些图表来描述两种类型的区域效应模式（游戏相关的东西）：

(1) 具有 3-4 个强度半径值的圆形“飞溅”，由颜色分隔（例如红色、橙色和黄色的 1、2、3）。

(2) 具有起始角度、终止角度和半径的楔形（例如 -30、+30 和 5）。

我将从一堆现有数据中提取数据，示例如下。但是我可以用 Highcharts 极坐标图做到这一点吗？有没有好的方法来定义这样的区域？例如，您可以制作一个范围系列以绕极轴旋转吗？以及如何制作合适的楔子？

```
area_effect: {
| distance: {
| | short: 0f;
| | medium: 0.5f;
| | long: 1.2f;
| | distant: 1.2f;
| };
| area_info: {
| | angle_left: 0f;
| | angle_right: 0f;
| | radius: 1.2f;
| | area_type: "Circle";
| };
| hp_damage: {
| | short: 1f;
| | medium: 0.4f;
| | long: 0.2f;
| | distant: 0.2f;
| };
};

area_info: {
| angle_left: -70f;
| angle_right: 70f;
| radius: 5f;
| area_type: "Pie";
| line_length: 0f;
| radius_inner: 0f;
}; 
```

# android - Camera Intent 图片文件路径

> ID：15009581
> 
> 赞同：0
> 
> 时间：2013-02-21T18:24:32.267
> 
> 标签：android, path, image

我试图将我用相机拍摄的照片的路径作为字符串。当我尝试用我的代码拍照时，字符串为空。当我关闭我的应用程序时，打开相机应用程序并在那里拍照，然后重新打开我的应用程序并使用我的代码，然后我会得到我用相机应用程序拍摄的最后一张照片的字符串。我的问题是为什么我的相机意图不起作用，为什么当我使用相机应用程序时它起作用？

这是我的代码：

```
public void onClick(View arg0) {
    switch (arg0.getId()) {     
      case R.id.btnImageCapture:
        Intent openCamera = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
          startActivityForResult(openCamera, OPEN_CAMERA); 
                    break;
    }
} 
```

* * *

```
private String getLastImagePath() {
            final String[] imageColumns = { MediaStore.Images.Media._ID,
                    MediaStore.Images.Media.DATA };
            final String imageOrderBy = MediaStore.Images.Media._ID + " DESC";
            Cursor imageCursor = managedQuery(
                    MediaStore.Images.Media.EXTERNAL_CONTENT_URI, imageColumns,
                    null, null, imageOrderBy);
            if (imageCursor.moveToFirst()) {
                String fullPath = imageCursor.getString(imageCursor
                        .getColumnIndex(MediaStore.Images.Media.DATA));
                imageCursor.close();
                return fullPath;
            }
        } 
```

* * *

```
 @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
         switch(requestCode){
         case OPEN_CAMERA:
             if (resultCode == RESULT_OK && data != null) {
                 String picturePath = getLastImagePath(); 
                 break;
             } 
             }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:32:15.560

尝试这个。有用..

```
 private Uri imageUri;

  public void onClick(View arg0) {
    switch (arg0.getId()) {     
      case R.id.btnImageCapture:

    Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
    File photo = new File(Environment.getExternalStorageDirectory(),  "Pic.jpg");
    intent.putExtra(MediaStore.EXTRA_OUTPUT,
            Uri.fromFile(photo));
    imageUri = Uri.fromFile(photo);
    startActivityForResult(intent, OPEN_CAMERA);
                    break;
    }
} 
```

* * *

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
    case OPEN_CAMERA:
        if (resultCode == Activity.RESULT_OK) {
            Uri selectedImage = imageUri;
            getContentResolver().notifyChange(selectedImage, null);
            ImageView imageView = (ImageView) findViewById(R.id.ImageView);
            ContentResolver cr = getContentResolver();
            Bitmap bitmap;
            try {
                 bitmap = android.provider.MediaStore.Images.Media
                 .getBitmap(cr, selectedImage);

                imageView.setImageBitmap(bitmap);
                Toast.makeText(this, selectedImage.toString(),
                        Toast.LENGTH_LONG).show();

            } catch (Exception e) {
                Toast.makeText(this, "Failed to load", Toast.LENGTH_SHORT)
                        .show();

            }
        }
    }
} 
```

# mysql - SQL 语句思维不明显

> ID：15009596
> 
> 赞同：-8
> 
> 时间：2013-02-21T18:25:09.627
> 
> 标签：mysql, sql

我想从一个表中检索所有行，其中一行中两列的所有值与另一个 roe 中的其他两个值匹配，例如，我将 gps 坐标拆分为 long 和 lat，我想在任何行中查看这些匹配？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:34:22.060

一个简单的`GROUP BY`应该适合你：

```
SELECT Col1,Col2
FROM YourTable T
GROUP BY Col1,Col2
HAVING COUNT(*) > 1 
```

请发布您尝试过的内容...

**- 编辑 -**

如果您正在查看返回具有相同纬度/经度的所有行，那么这样的事情会起作用：

```
SELECT *
FROM YourTable
WHERE (lat,lon) IN (
      SELECT lat,lon
      FROM YourTable
      GROUP BY lat,lon
      HAVING COUNT(*) > 1
) 
```

[http://sqlfiddle.com/#!2/f9658/5](http://sqlfiddle.com/#!2/f9658/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:31:02.883

在 where 子句中可以有多个条件：

```
SELECT * FROM tbl1 
WHERE tbl1.lat = tbl2.lat AND tbl1.long = tbl2.long 
```

因为在您要求的同一张表中，您可以尝试这样的自联接：

```
SELECT t1.ID, t2.ID from myTable as t1
INNER JOIN myTable as t2
WHERE t1.lat = t2.lat and t1.long = t2.long 
```

或者使用 group 查看有多少并且可以通过子选择或对返回的纬度/经度进行第二次查询来获取实际记录：

```
SELECT t.lat, t.lng, count(*) from myTable as t
GROUP BY (t.lat, t.long)
HAVING Count(*) >=2 
```

使用子选择类似的东西（可能需要调试）：

```
SELECT * from myTable as t1, 
(SELECT t.lat, t.lng from myTable as t
GROUP BY (t.lat, t.long)
HAVING Count(*) >=2) as t2
WHERE t2.lat = t1.lat and t2.long = t1.long 
```

如果可能有许多具有相同纬度/经度的记录，我建议使用具有2个或更多匹配条件的组来拉回纬度/经度，然后再次遍历表以获取与代码中每一对匹配的所有记录.

# html - HTML默认拒绝检查单选按钮？

> ID：15009597
> 
> 赞同：15
> 
> 时间：2013-02-21T18:25:11.840
> 
> 标签：html, forms

这看起来是一个非常基本的问题，我已经创建了几十个表单，但我就是看不出这里有什么问题。

我有这两个单选按钮：

```
<input type='radio' class='free atype' value='0' name='dutch' checked='checked'/> Free<br/>
<input type='radio' class='paid atype' value='1' name='dutch' /> Paid 
```

显然第一个应该默认选中。

但是，当我检查第二个然后刷新页面时，第二个收音机仍然处于选中状态。我知道这是错误的行为，但我一辈子都看不到我做错了什么。

我正在 Firefox 上尝试这个。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-21T18:27:15.970

`autocomplete="off"`这就是所谓的自动完成，您可以尝试通过将属性添加到您的输入来关闭它

```
<input type='radio' class='free atype' value='0' name='dutch' checked='checked' autocomplete="off"/> Free<br/>
<input type='radio' class='paid atype' value='1' name='dutch' autocomplete="off"/> Paid 
```

你也可以把它放在`<form>`元素所在的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:34:16.900

使用**Autocomplete="Off"**作为标签中的属性之一

这将对该代码有意义。

# z3 - z3 行为根据 unsat 核心的请求而改变

> ID：15009599
> 
> 赞同：1
> 
> 时间：2013-02-21T18:25:14.207
> 
> 标签：z3

我有几个 SMTLIB2 示例，z3 通常会在 10 毫秒内找到 unsat，但是，当我添加一个请求以生成 unsat 核心时，check-sat 会持续几分钟而不会返回。这种行为是可以预期的吗？请求 unsat 核心是否不仅仅打开检测记录依赖项，并更改 z3 运行的过程和选项？是否可以设置更多选项，以便在使用 unsat 核心生成时看到与不使用时相同的行为？

我在 Scientific Linux 6.3 上使用 Z3 4.3.1（稳定分支）。

这些示例在 AUFNIRA 中，尽管有几个不涉及实数并且可能不是非线性的。

谢谢，

保罗。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T19:36:56.237

使用“答案文字”（又名假设）跟踪未饱和核心。当我们启用 unsat 核心提取并使用断言时，例如

```
(assert  (! (= x 10) :named a1)) 
```

Z3 将在内部为 name 创建一个新的布尔变量`a1`，并断言

```
(assert  (=> a1 (= x 10))) 
```

调用时`check-sat`，它假定所有这些辅助变量都为真。也就是说，Z3 试图表明问题是 unsat/sat 以这些假设为模。对于可满足的实例，它将像往常一样以模型终止。对于不可满足的实例，只要生成仅包含这些假定布尔变量的引理，它将终止。引理的形式`(or (not a_i1) ... (not a_in))`是`a_i`'s 是假定的布尔变量的子集。据我所知，这种技术是由 MiniSAT 求解器引入的。[此处](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.4.8161)对其进行了描述（第 3 节）。我真的很喜欢它，因为它实现起来很简单，而且我们基本上可以免费获得 unsat 核心生成。

然而，这种方法有一些缺点。首先，一些预处理步骤不再适用。如果我们只是断言

```
(assert (= x 10)) 
```

Z3 将替换`x`为`10`无处不在。我们说 Z3 正在执行“价值传播”。如果断言的形式为，则不应用此预处理步骤

```
(assert  (=> a1 (= x 10))) 
```

这只是一个示例，许多其他预处理步骤都会受到影响。在求解期间，一些简化步骤也被禁用。如果我们检查 Z3 源文件[smt_context.cpp](http://z3.codeplex.com/SourceControl/changeset/view/3d4a42c27088#src/smt/smt_context.cpp)，我们会发现如下代码：

```
 void context::simplify_clauses() {
        // Remark: when assumptions are used m_scope_lvl >= m_search_lvl > m_base_lvl. Therefore, no simplification is performed.
        if (m_scope_lvl > m_base_lvl)
            return;
        ...
   } 
```

当使用“答案文字”/假设时，条件`m_scope_lvl > m_base_lvl)`始终为真。因此，当我们启用 unsat 核心生成时，我们可能会真正影响性能。似乎没有什么是真正免费的:)

# java - java struts.xml中的差异路径类型是什么？

> ID：15009602
> 
> 赞同：3
> 
> 时间：2013-02-21T18:25:30.793
> 
> 标签：java, struts, struts-config, struts-action

我是新的 java struts 框架。但我想问一个问题。

在`struts.xml`路径中`.do`就像`"/AddReq.do"` 或路径只是名称一样`"AddReq"`

`"/AddReq.do"`和有什么区别`"AddReq"`？

例如

```
<action path="/AddReqPage"
type="...actions.AddReqPageAction">
        <forward name="success" path="AddReq" /> 
        <forward name="failure" path="/bos.jsp" />
</action>
<action path="/AddReq"
type="...actions.AddReqAction"
name="AddReqForm" validate="true"
scope="request">
        <forward name="success" path="/AddReqDetail.do" />
        <forward name="hata" path="AddReq" />
        <forward name="failure" path="/bos.jsp" />
</action> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T18:31:20.087

差别不大。两者都应该工作 - 只要您在 web.xml 中正确映射到 struts ActionServlet。

```
<servlet-mapping>
    <servlet-name>action</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping> 
```

按照惯例，struts 使用 *.do 模式将其 servlet 与其他 servlet 和 JSP 区分开来

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:27:35.507

“.do”是一个动作扩展。您可以在 servlet 映射中对其进行配置。当 struts 解析 url 时，它正在寻找这样的扩展来区分静态调用和 struts 动作。然后找到与该 URL 对应但没有“.do”的映射。但是，如果您的应用程序配置为使用该扩展名，您仍然需要在转发中指定“.do”。如今，这个扩展的意义不如以前了。[URL 重写](http://tuckey.org/urlrewrite/)技术完全忽略了该扩展。和

```
<servlet-mapping>
  <servlet-name>action</servlet-name>
  <url-pattern>/c/*</url-pattern>
</servlet-mapping> 
```

和上面的参考你可以完全忽略它。

# ruby - rspec-fire 规范在不应该通过的时候通过

> ID：15009603
> 
> 赞同：0
> 
> 时间：2013-02-21T18:25:36.673
> 
> 标签：ruby, rspec

我正在尝试[rspec-fire](https://github.com/xaviershay/rspec-fire)，但它的行为似乎不像 README 所建议的那样。我的项目在这里：

[https://github.com/andyw8/try-rspec-fire](https://github.com/andyw8/try-rspec-fire)

当我运行时：

```
rspec spec/user_spec.rb 
```

正如预期的那样，它通过了。但是当我运行时：

```
rspec -Ilib/email_notifier.rb spec/user_spec.rb 
```

它仍然通过，即使自述文件说应该失败（因为`email_notifier.rb`是一个空类）。

我是否误解了 rspec-fire 应该如何工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:47:33.970

自述文件略有错误。这是您实际需要的命令：

```
bin/rspec -Ilib -remail_notifier.rb spec/user_spec.rb 
```

您运行的命令（基于自述文件）被放入`lib/email_notifier.rb`加载路径，但它在任何地方都不需要它。需要加载该类以供 rspec-fire 为您进行接口验证。

我刚刚[更新了 README](https://github.com/xaviershay/rspec-fire/commit/84eb8ca68845c3d1648b5507737e2ae3019c3328)。谢谢！

# jquery - JQuery 移动工具提示弹出（“关闭”）功能在 iPhone 5 中不起作用

> ID：15009607
> 
> 赞同：8
> 
> 时间：2013-02-21T18:25:41.220
> 
> 标签：jquery, iphone, html, jquery-mobile

在我的 JQuery Mobile 站点中，我添加了一个工具提示对话框，以便在页面加载时打开，它会在 5 秒后消失。我的代码类似于以下，

```
 <div data-role="popup" id="popupInfo">
     <p>This is a completely basic popup, no options set.<p>
  </div>

  <script type="text/javascript">
 $(document).live( 'pagechange',function(event){
     $('#popupInfo').popup("open")
      setTimeout(function() {
      $('#popupInfo').popup("close");
      }, 5000);
  });
   </script> 
```

此更新在除**iPhone 5 iOS 6**之外的所有设备上运行良好。因为当我尝试在**iPhone 5 iOS 6**设备中使用上述脚本加载我的 JQuery 移动页面时，它会在弹出窗口关闭时将我重定向到上一页。我不确定我在这里错过了什么，但对我来说，jQuery Mobile **popup("close")**函数似乎不支持**iPhone 5 iOS 6**。

此外，当工具提示加载以下附加到 URL 的哈希标记文本时，我们如何避免这种情况`#&ui-state=dialog`

谁能让我知道我们该如何解决这个问题？

我什至也尝试过以下代码；

```
 $(document).on('pagechange',function(event){
        $('#popupInfo').popup("open").delay(2000).popup("close");

    }); 
```

但这根本不起作用

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-22T09:34:08.417

知道了。添加`data-history="false"`到`popupBasic`弹出 div。

```
<!-- Button / works without it -->
<a href="#popupBasic" data-rel="popup">Open Popup</a>

<!-- Popup #popupBasic -->
<div data-role="popup" id="popupBasic" data-history="false">
<p>This is a completely basic popup.<p>
</div> 
```

JS：

```
<script type="text/javascript">

 $(document).live( 'pagechange',function(){
 $('#popupBasic').popup("open")
  setTimeout(function() {
  $('#popupBasic').popup("close");
  }, 5000);
 });

</script> 
```

JSfiddle：[弹出窗口](http://jsfiddle.net/zQtvp/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T06:15:54.147

另外，..jquery mobile 使用 ID = "yourpopupid-popup" 的 div 围绕弹出窗口，因此您可以简单地隐藏该 div。

> > 例如：<div id="basic" data-role="popup" >我弹出</div>，那么你可以通过： **$('#basic-popup').hide();**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-26T06:52:28.440

使用两个函数 hide() 或者您可以在单击按钮时使用 close() 函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-23T01:33:43.513

我在使用弹出工具栏菜单（jQuery Mobile 1.2）时遇到了同样的问题。例如：

```
<a href="#popupBasic" data-rel="popup">Open Popup</a>

<!-- Popup #popupBasic -->
<div data-role="popup" id="popupBasic" data-history="false">
<ul data-role="listview" data-inset="true">
<li><a href='item1.html'>Item1</a></li>
</ul>
</div> 
```

以上代码不适用于 iPhone 5（但适用于 android、iPhone4 等）。如果我按以下方式更改它，它就可以工作。

```
<a data-ajax="false" href='item1.html'>Item1</a> 
```

# php - 字符串在第一个重音字符后停止显示

> ID：15009612
> 
> 赞同：1
> 
> 时间：2013-02-21T18:25:56.383
> 
> 标签：php, laravel, laravel-4, non-ascii-characters

** Laravel 4 beta 3 的问题：

字符串在第一个重音字符后停止显示。**

我有一个数据库表，用于存储 DVD 条目（标题、导演、...）

数据库是`utf_8`，标题的排序规则是`utf8_unicode_ci`

database.php 配置文件表明`utf8_unicode_ci` ......在模型中（扩展 Eloquent）：

```
class Dvdentry extends Eloquent {
public $table = 'dvd_entry';
public $timestamps = false;
} 
```

......... 在控制器中：

```
 $entries=Dvdentry::where($field,'like',$ulike)->get(); 
```

........ 在视图中：

```
 @foreach($entries as $entry)
    <a href={{$entry->imdb_link}} page=_blank>{{$entry->title}}</a> 
```

.... 那应该显示一个标题列表。对于其中有重音的标题（即 Mépris (Le) ），只有 M 是

显示。我试过没有成功：

```
 {{{$entry->title}}}
 <?php echo $entry->title; ?>
 <?php echo utf_decode($entry->title); ?> 
```

......任何线索。谢谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T14:45:57.533

您是否尝试过 e() 助手？

> e() - 在给定的字符串上运行 htmlentites，支持 UTF-8。

```
$entities = e('<html>foo</html>'); 
```

* * *

此时检查 Laravel 文档：http: [//laravel.com/docs/helpers#strings](http://laravel.com/docs/helpers#strings)

我还推测重音会导致 Blade 失败。在保存到数据库之前尝试对标题进行编码。所以重音被编码在 HTML 实体中......

```
Mépris => M&eacute;pris 
```

# jquery - 如何使用动态创建的分页拇指创建垂直轮播/自动收报机

> ID：15009614
> 
> 赞同：0
> 
> 时间：2013-02-21T18:26:00.440
> 
> 标签：jquery, pagination, carousel, ticker, caroufredsel

> 注意：虽然我现在正在使用 CarouFredSel，但我对特定插件没有任何偏好。我只对完成任务的目标感兴趣，所以如果您有建议，请发表评论！:D 谢谢

这是我正在尝试做的事情：

我有包含动态创建的 HTML 内容的框，我需要：

**1)**提供内容的垂直（向上）轮播/提示效果，仅当盒子中加载的项目超过 4 个时。

**2）**如果有> 4个项目，启动轮播/滚动条，允许在鼠标悬停时暂停，在鼠标悬停时恢复并提供导航以更改方向（上/下）或在轮播中的每个项目前进/后退

**3）**每个盒子的底部都有一个div。如果盒子有> 4个项目，那么我需要遍历每个项目，获取其中图像的来源（img.bimage）并在盒子底部的那个div中建立一个拇指分页。这应该允许用户单击拇指并让列表滚动到它。

**这是我们到目前为止的工作示例：http:** [//jsfiddle.net/revive/jZMhE/](http://jsfiddle.net/revive/jZMhE/)

`(note, the pagination callback is commented out of the JS, but that is what the pagination should look like)`

如果您对如何使用 CarouFredSel***或其他插件或功能***完成这些事情有任何建议，请告诉我。我们不会坚持使用一件事或另一件事。我们坚持让它工作：D

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:02:45.503

经过一些`JS`嘎吱嘎吱和头发拉扯..我决定放弃 CarouFredSel 中的功能并使用这个例子：http: [//jsfiddle.net/revive/jZMhE/](http://jsfiddle.net/revive/jZMhE/)

# python - 从 CSV 文件中提取列以用作 NetworkX 中的节点列表

> ID：15009615
> 
> 赞同：1
> 
> 时间：2013-02-21T18:26:05.147
> 
> 标签：python, csv, header, networkx, nodelist

我有一个包含 2 列的 CSV 文件：用户和位置。我想创建两个列表：一个只有用户，另一个只有位置，以便我可以使用 networkx 中的 draw_network_nodes(nodelist=...) 函数将用户和位置分别绘制为具有不同形状和颜色的节点（所有用户将是蓝色框，所有位置都将是红色圆圈）。

此外，我的 CSV 文件中有一个标题，因此我不希望标题名称成为任一列表的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:01:48.200

由于您没有提供任何输入、预期输出，因此我对它们进行了一些假设。假设输入文件名为**data.csv**：

```
user,location
john,seattle
alan,los angeles
trish,new york 
```

将 csv 拆分为两个文件的脚本称为**csv_split.py**：

```
import csv

with open('data.csv') as csv_in,          \
     open('users.txt', 'w') as users_out, \
     open('locations.txt', 'w') as locations_out:
    csv_dict_reader = csv.DictReader(csv_in)
    for line in csv_dict_reader:
        users_out.write(line['user'] + '\n')
        locations_out.write(line['location'] + '\n') 
```

### 讨论

*   我的代码用于演示目的，因此不提供任何错误检查。
*   csv.DictReader() 类假定第一行是标题并将其用作每*行的键*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:36:42.470

基于 Hai Vu 的回答：

```
import csv
def reader(filename):
    for (lineno, line) in enumerate(open(filename)):
        if lineno > 0: # skip header
            yield line

filename = "locations.csv"
(users, locations) = zip(*( row for row in csv.reader(reader(filename))))
print "users     =", users
print "locations =", locations 
```

给出：

```
locations = ('seattle', 'los angeles', 'new york', 'london')
users     = ('john', 'alan', 'trish', 'jack') 
```

从：

```
user,location
john,seattle
alan,los angeles
trish,new york
jack,london 
```

# c# - 虚拟键盘的单元测试

> ID：15009621
> 
> 赞同：1
> 
> 时间：2013-02-21T18:26:34.363
> 
> 标签：c#, unit-testing, nunit, keyboard-events, keyboard-hook

我正在开发的一个项目是一个键盘钩子，它可以捕获一些编号较高的功能按钮（f13-f20）。这将在其上工作的平板电脑上有按钮，这些按钮映射到那些更高功能的按钮。因此，我正在创建一个具有作为其构造函数的类的任何人都输入一个 Key（来自 System.Windows.Forms.Keys）和一个 AbstractTask。由于使用钩子将执行各种任务，我认为这将是一种巧妙的方式。其中一项任务是键盘任务。超级简单的课程（我希望至少）

```
public class KeyboardTask : AbstractTask
{
    private KeyboardTask ()
    { }
    public KeyboardTask (KeyboardCommand key)
    {
        Options = "{" + key + "}";
    }
    public override void PerformTask()
    {
        Globals.WriteLog("KeyboardTask:PerformTask()+");
        try
        {
            System.Windows.Forms.SendKeys.Send(Options);
        }
        catch (System.Exception ex)
        {
            Globals.WriteExceptionLog(ex);
        }
        Globals.WriteLog("KeyboardTask:PerformTask()-");
    }
}
public enum KeyboardCommand
{
    BACKSPACE,//{BACKSPACE}, {BS}, or {BKSP}
    BREAK,//{BREAK}
    CAPSLOCK,//{CAPSLOCK}
    DELETE,//{DELETE} or {DEL}
    DOWN, //{DOWN}
    END,//{END}
    ENTER,//{ENTER}or ~
    ESC,//{ESC}
    //etc
} 
```

因此，作为非单元测试，我编译了我的程序并添加了这个

```
 ksel1 = new KeyboardSystemEventListener((Keys.F13), new KeyboardTask(KeyboardCommand.F1));//F1
        ksel6 = new KeyboardSystemEventListener((Keys.F18), new ECTask(EmbeddedControllerCommand.DecreaseBackLight));//RB 
```

（这样做有一个巨大的错误，但这已经解决了我只需要实现它）我把程序放在我的平板电脑上，我打开了 IE，按下 F13 按钮，它打开了 IE 的帮助（是的！） ..我按了F18，背光变小了..（没什么大惊喜）

所以我开始思考..必须有更好的方法（我应该说的是，为什么我不先编写单元测试）所以我开始编写单元测试..问题是我不'没有 F13 键.. 好吧，没什么大不了的. 我更愿意看到的是这样的东西（把我排除在外）

```
 [Test]
    public void TestKeyboardTask()
    {
        KeyboardTask kkt = new KeyboardTask(KeyboardCommand.F1);
        kkt.PerformTask();

        Assert.IsTrue(/*F1 key was pressed*/false);
    } 
```

有任何想法吗？我正在使用 NUnit 2.6.2 和 Visual Studio 2012 pro。我更喜欢使用 NUnit，因为 VS 测试套件似乎没有那么精致（尽管如果它有效的话会方便十亿倍）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:05:04.923

**测试班**

```
 [Test]
    public void TestKeyboardTask()
    {
        KeyboardTask kkt = new KeyboardTask(KeyboardCommand.F1);
        using (MockKeyboardTest f = new MockKeyboardTest())
        {
            f.ShowDialog(kkt);
            Assert.AreEqual(Keys.F1, f.PressedKey);
        }
    } 
```

**模拟键盘测试**

```
class MockKeyboardTest : Form
{
    public MockKeyboardTest()
    {
        InitializeComponent();
        PressedKey = Keys.BrowserBack;
    }
    public void ShowDialog(KeyboardTask kkt)
    {
        Keyboard = kkt;
        base.ShowDialog();

    }
    public void InitializeComponent()
    {
        this.Shown += MockKeyboardTest_Shown;
        KeyboardTestTextbox.AcceptsTab = true;
        KeyboardTestTextbox.Location = new Point(2, 22);
        KeyboardTestTextbox.MaxLength = 50;
        KeyboardTestTextbox.Multiline = true;
        KeyboardTestTextbox.Size = new Size(195, 25);
        KeyboardTestTextbox.KeyDown += this.KeyboardTestTextbox_KeyDown;

        Controls.Add(KeyboardTestTextbox);
    }

    void MockKeyboardTest_Shown(object sender, System.EventArgs e)
    {
        Keyboard.PerformTask();
    }

    private void KeyboardTestTextbox_KeyDown(object sender, KeyEventArgs e)
    {
        PressedKey = e.KeyData;
        this.DialogResult = DialogResult.OK;
    }
    private TextBox KeyboardTestTextbox = new TextBox();
    private KeyboardTask Keyboard;
    public Keys PressedKey;
} 
```

奇迹般有效。

# c# - 我可以在提交到商店之前测试真正的应用内购买吗？

> ID：15009624
> 
> 赞同：1
> 
> 时间：2013-02-21T18:26:38.300
> 
> 标签：c#, in-app-purchase, windows-store-apps, winrt-xaml

在 Windows 应用商店应用中构建应用内购买需要使用应用内购买模拟器。它*几乎*与真正的应用内购买命名空间相同。在构建我的应用程序时，我使用模拟器。我在商店中保留了我的名字。我什至在商店中为我的应用创建了应用内购买。在提交我的应用程序进行认证之前，有没有办法测试真正的 IAP？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T18:26:38.300

不，在您的应用提交认证之前，Windows 应用商店中的应用内购买不是“真实的”。这意味着您在提交之前的最后一步是将模拟器代码换成真实代码。而且，是的，这意味着您无法测试您的真实代码 - Store 测试人员将是第一个为您测试它的人。

**还有一件事**

话虽如此，我创建了一个包含真实 API 和模拟器 API 的辅助类。虽然它只能帮助 90% 的用例，但它非常适合这 90% 的用例。我已经与 IAP 产品团队验证了代码并提交了使用它的真实应用程序。

你可以在这里找到这个助手：http: [//codepaste.net/rqwtcy](http://codepaste.net/rqwtcy)

如果要删除广告，请使用以下语法，例如...

我将它添加到我的视图模型中，如下所示：

```
public async Task Start()
{
    // in app purchase setup
    m_HideAdsFeature = await new InAppPurchaseHelper(HIDEADSFAETURENAME,
        System.Diagnostics.Debugger.IsAttached).Setup();
    this.HideAds = m_HideAdsFeature.IsPurchased;
}

bool m_HideAds = false;
public bool HideAds { get { return m_HideAds; } set { SetProperty(ref m_HideAds, value); } }

const string HIDEADSFAETURENAME = "HideAds";
InAppPurchaseHelper m_HideAdsFeature;

// http://codepaste.net/ho9s5a
DelegateCommand m_PurchaseHideAdsCommand = null;
public DelegateCommand PurchaseHideAdsCommand
{
    get
    {
        if (m_PurchaseHideAdsCommand != null)
            return m_PurchaseHideAdsCommand;
        m_PurchaseHideAdsCommand = new DelegateCommand(
            PurchaseHideAdsCommandExecute, PurchaseHideAdsCommandCanExecute);
        this.PropertyChanged += (s, e) => m_PurchaseHideAdsCommand.RaiseCanExecuteChanged();
        return m_PurchaseHideAdsCommand;
    }
}
async void PurchaseHideAdsCommandExecute()
{
    PauseCommandExecute();
    await m_HideAdsFeature.Purchase();
    HideAds = m_HideAdsFeature.IsPurchased;
}
bool PurchaseHideAdsCommandCanExecute()
{
    if (m_HideAdsFeature == null)
        return false;
    return !m_HideAdsFeature.IsPurchased;
} 
```

我将它添加到我的 XAML 中，如下所示：

```
<UI:AdControl x:Name="MyAdControl"
    Width="250" Height="250"
    HorizontalAlignment="Left" VerticalAlignment="Top"
    AdUnitId="10043107" ApplicationId="d25517cb-12d4-4699-8bdc-52040c712cab"
    Visibility="{Binding HideAds,
            Converter={StaticResource CollapsedWhenTrueConverter}}" /> 
```

祝你好运！

# php - 正确设置我的 mysql 表

> ID：15009628
> 
> 赞同：0
> 
> 时间：2013-02-21T18:26:41.057
> 
> 标签：php, mysql, database-design

我正在就如何最好地设置我的 mySQL 表进行一些输入。

有问题的表是一个存储有关发布到我的网站上的广告信息的表。大多数列都很简单，包含所有常用信息，如价格、提交者的用户 ID、提交日期等。

我遇到问题的部分是照片。可以将任意数量的照片添加到广告中，从最少 1 张到可能无限制（尽管我会在某个时候限制它，但实际上最多可以达到 40 张）。

目前，我有 1 个“照片”列，其中存储所有照片路径，用逗号分隔。

首先，有人告诉我这不是最佳做法。

此外，它使从网站上带有“删除”按钮的列表中删除单张照片相当冗长；我必须得到逗号分隔的列表，将其分解，找到与我要删除的图像匹配的位并将其删除，将列表重新组合在一起并再次将其重新插入同一字段。

大概答案是每张照片的一列，以某种方式根据需要动态创建？但我不确定这将如何工作，就添加列的代码而言（通过插入时的 php），而且，1 行可能有 30 张照片，而另一行只有 1 张，所以 1 的行将有 29 张空列？这很糟糕吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:29:33.760

这就是所谓的*一对一*关系。而且你是对的，你所采取的方法不是一个好的方法，它会导致很多麻烦。在 Google 上快速搜索“数据库规范化”，您会发现很多关于该主题的信息。必读的东西。

您的方法：从您的广告表中删除`photos`列，并引入一个额外的`ads_photos`表。该表将至少有两列，一`ad_id`列引用照片所属的广告，另一列包含`url`照片的 URL。

这允许您将任意数量的照片与给定的广告相关联。我建议使用 InnoDB 表来启用表之间的“真实”外键关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:31:39.383

而不是每张照片的列，您为什么不尝试使用照片表格：

TB_PHOTO id (INT) path (VARCHAR) userId（引用到用户的表）

然后，您可以检索照片的数据以及您想要的所有照片。例如

```
select path from TB_PHOTO where userId='?'; 
```

您将获得属于特定用户的所有照片。

# matlab - Interpolating a histogram matlab

> ID：15009630
> 
> 赞同：0
> 
> 时间：2013-02-21T18:26:44.237
> 
> 标签：matlab

I have discrete empirical data which forms a histogram with gaps. I.e. no observations were made of certain values. However in reality those values may well occur. This is a fig of the scatter graph.

![enter image description here](../Images/2d4140ff105466088332859ca691de2a.png)

So my question is, SHOULD I interpolate between xaxis values to make bins for the histogram ? If so what would you suggest to be best practice?

Regards,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:36:13.483

Don't do it.

With that many sample points, the probability (p-value) of getting empty bins if the distribution is smooth is quite low. There's some underlying reason they're empty, which you may want to investigate. I can think of two possibilities:

1.  Your data actually is discrete (perhaps someone rounded off to 1 signficant figure during data collection, or quantization error was significantly in an ADC) and then unit conversion caused irregular gaps. Even conversion from `.12` and `.13` to 12,13 as shown could cause this issue, if `.12` is actually represented as `.11111111198` inside the computer. But this would tend to double-up in a neighboring bin and the gaps would tend to be regularly spaced, so I doubt this is the cause. (For example, if 128 trials of a Bernoulli coin-flip experiment were done for each data point, and someone recorded the percentage of heads in each series to the nearest 1%, you could multiply by 1.28/% to try to recover the actual number of heads, but there'd be 28 empty bins)

2.  Your distribution has real lobes. Because the frequency is significantly reduced following each empty bin, I favor this explanation.

But these are just starting suggestions for your own investigation.

# php - 如何发布使用 xampp 制作的网站？

> ID：15009632
> 
> 赞同：0
> 
> 时间：2013-02-21T18:26:45.247
> 
> 标签：php

我在 codeigniter 中使用 xampp 制作了一个本地网站，我想将其公开。我安装了域提供的 joomla 3.0.3 控制面板，但我不知道如何调整它以使其在线显示。是否有可能做到这一点？如果是这样，我想要一些指导方针。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:33:29.260

如果您试图将您的域直接指向您的文件并使用 xampp 作为实时服务器，我强烈建议您不要这样做。Xampp 旨在用作开发服务器，而不是生产服务器。它不具备实时服务器防止安全漏洞所需的安全功能。

如果您尝试将当前在 xampp 上的文件部署到实时服务器，我强烈建议您阅读有关 Git、FTP 以及您正在使用的任何 Web 主机/服务器的基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:38:10.220

XAMPP 用于本地（本地主机）开发。

你可以在 XAMPP 上开发你的网站，但你需要获得一些安全的托管解决方案并购买一个唯一的域名（我使用的是 GoDaddy，请不要为此投票！），然后 FTP您使用某些[FTP 解决方案](http://filezilla-project.org/)在 XAMPP 上开发和测试的站点代码到该网络服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T19:35:15.390

Codeigniter 和 Joomla 是两个不同的东西。

Codeigniter 是一个用于 php 的应用程序开发框架。

Joomla 是一个非常强大和流行的内容管理系统。

如果您的网站已准备就绪，请离开 joomla 并使用您首选的迁移技术将基于 codeigniter 的网站文件从您的测试环境加载到网络服务器。

您可以探索 joomla，看看它是否适合您。然后您可能想使用 Joomla！用于创建您的网站。它使用 PHP 并且非常用户友好。

现在，为了将本地服务器的开发移动到网络服务器

*   您需要使用托管服务提供商提供的 FTP 将文件从本地机器移动到网络服务器。
*   一旦 php/html/css/js/image 等文件被加载到网络服务器上，您将不得不使用托管服务提供商 phpmyadmin 链接来创建本地计算机数据库的副本（很可能您的托管服务提供商也会提供 MySQL 作为数据库）。

祝你好运！

# mysql - 将数据添加到列以激活触发器然后将其删除

> ID：15009636
> 
> 赞同：0
> 
> 时间：2013-02-21T18:26:52.747
> 
> 标签：mysql, sql

我有一个 mysql 表，它有一个触发器，将在执行更新时激活。我想通过向姓氏添加一个值来强制此触发器运行，但仅适用于特定用户。

我在想的是要使这项工作，我需要获取的价值`lname`并添加一些东西，比如'$'。这将使触发器运行，然后重新运行一些 SQL 以从`lname`.

我认为它看起来像这样：

```
Update table set lname = (current_value_OF_LNAME & "$")
where active = 1 
```

然后

```
Update table set lname = (Remove($ from current_value_OF_LNAME) 
```

很抱歉伪代码，但我想把它放在那里，看看这是否是最好的方法，或者是否有更好的方法。或者，如果有一种方法可以强制它运行，那也是可以接受的。

感谢和抱歉的问题是泥泞的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:05:21.363

像这样的东西

```
Update table set lname = concat(lname,'$') 
 where active = 1 
```

然后

```
Update table set lname = substr(lname,1,length(lname)-1)
 where active = 1 
```

您是单独在数据库上还是可以添加或更新更多行。我希望不是。如果是，您可以这样查询（仍然不完美但有帮助）

```
Update table set lname = substr(lname,1,length(lname)-1)
 where substr(test,-1) = '$' 
```

# flash - 物体之间的不同深度

> ID：15009637
> 
> 赞同：0
> 
> 时间：2013-02-21T18:26:53.523
> 
> 标签：flash, actionscript-2, depth

我在两个对象上做了一个游戏。背景和主角。但是我希望背景的一些元素高于字符。将元素的深度更改为大于玩家的深度不起作用。请帮忙。有什么办法可以避免在两个物体中制作背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:09:07.913

如果你想在不同的影片剪辑之间交换深度，你必须在同一个父级上创建所有元素。您不应将元素放置在 Flash IDE 层中。

例如 ：

```
myGameMC.attachMovie("#myBackground","myBackground",1);
myGameMC.attachMovie("#myCharacter","myCharacter",2);
myGameMC.attachMovie("#myForegroundElement","myForegroundElement",3); 
```

然后你可以交换元素的深度

```
myGameMC.myCharacter.swapDepths(myGameMC.myCharacter.myForegroundElement); 
```

或者

```
myGameMC.myCharacter.swapDepths(3); 
```

或者

```
myGameMC.myCharacter.swapDepths(myGameMC.getNextHighestDepth()); 
```

希望对您有所帮助。

# parsing - 解析文本文件并写出数据

> ID：15009639
> 
> 赞同：0
> 
> 时间：2013-02-21T18:26:56.710
> 
> 标签：parsing, powershell, powershell-2.0, printers

我正在创建一个 powershell 脚本的第一步，该脚本将读取打印机日志（可能使用 get-WMI cmdlet）并解析日志。之后，我计划将脚本输出到 .txt 文件中，包括打印机名称、打印机使用次数计数器（如果可能）以及日志中的特定信息。

为了做到这一点，我决定尝试向后工作。下面是日志的一小部分：

```
10         Document 81, A361058/GPR0000151814_1: owned by A361058 was printed on R3556 via port IP_***.***.***.***.  Size in bytes: 53704; pages printed: 2                                                                  20130219123105.000000-300  
10         Document 80, A361058/GPR0000151802_1: owned by A361058 was printed on R3556 via port IP_***.***.***.***.  Size in bytes: 53700; pages printed: 2 
```

向后工作并首先专注于解析，我希望能够专门获得“/GRP”、“R3446（通常，R* ***因为这是打印机名称）”，并获得一个显示如何日志文件中经常出现特定的打印机。

自从我上次使用 Powershell 以来已经有一段时间了，但是目前这是我为了尝试实现我的目标而设法创建的：

```
Select-String -Path "C:\Documents and Settings\a411882\My Documents\Scripts\Print Parse Test.txt" -Pattern "/GPR", " R****" -AllMatches -SimpleMatch 
```

该代码不会产生任何错误，但是我也无法让任何输出出现在屏幕上以查看我是否正在捕获 /GRP 和打印机名称。目前，我正试图确保在担心任何计数器之前收集正确的输出。谁能帮助我并告诉我我的代码做错了什么？

谢谢！

编辑：修复了我的代码导致屏幕上没有数据出现的一个小错误。目前，此代码输出整两行测试文本，而不是仅输出 /GPR 和服务器名称。新的输出如下：

```
My Documents\Scripts\Print Parse Test.txt:1:10         Document 81, A361058/GPR0000151814_1: owned by A361058 was printed on
 R3556 via port IP_***.***.***.***.  Size in bytes: 53704; pages printed: 2                                                  
                20130219123105.000000-300  
My Documents\Scripts\Print Parse Test.txt:2:10         Document 80, A361058/GPR0000151802_1: owned by A361058 was printed on
 R3556 via port IP_***.***.***.***.  Size in bytes: 53700; pages printed: 2 
```

我想尝试让它最终看起来像下面这样：

```
/GPR, R****, count: ## (although for now I'm less concerned about the counter) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:12:25.133

你可以试试这个。`/GPR`它仅在存在（以及“打印在”中的“打开”）时返回一行。

```
Get-Content .\test.txt | % { 
    if ($_ -match '(?:.*)(/GPR)(?:.*)(?<=on\s)(\w+)(?:.*)') {
        $_ -replace '(?:.*)(/GPR)(?:.*)(?<=on\s)(\w+)(?:.*)', '$1,$2'
    }
} 
```

输出：

```
/GPR,R3556
/GPR,R3556 
```

我确信有更好的正则表达式版本。我还在学习它:-)

**编辑**这更容易阅读。正则表达式仍然可以提取，但我首先使用 /GPR 过滤掉行`select-string`：

```
Get-Content .\test.txt | Select-String -SimpleMatch -AllMatches -Pattern "/GPR" | % {
    $_.Line -replace '(?:.*)(/GPR)(?:.*)(?<=on\s)(\w+)(?:.*)', '$1,$2'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:59:29.197

我通常从我正在匹配的行的示例开始，并从中构建一个正则表达式，用正则表达式元字符替换文本的可变部分。这使得正则表达式更长，但以后阅读起来更直观。

将正则表达式分配给一个变量，然后在后续代码中使用该变量以防止正则表达式的混乱细节弄乱其余代码：

```
[regex]$DocPrinted = 
'Document \d\d, \w+/(\D{3})[0-9_]+: owned by \w+ was printed on (\w+) via port IP_[0-9.]+  Size in bytes: \d+; pages printed: \d+'

get-content <log file> |

foreach {
 if ($_ -match $DocPrinted)
   {
     $line -match $docprinted  > $null 
     $matches 
   }
 } 
```

# spring - 如何修复服务的无 xml 自动装配

> ID：15009641
> 
> 赞同：1
> 
> 时间：2013-02-21T18:26:59.783
> 
> 标签：spring, jersey, grizzly

当我直接在我的服务中调用服务时，`main()`我可以查询数据库并且一切正常。当收到球衣请求并将 JSON 映射到`NewJobRequest`我无法使用我的服务时，因为`@Autowire`失败了。

**我的应用程序：**

```
public class Main {

    public static final URI BASE_URI = getBaseURI();

    private static URI getBaseURI() {
        return UriBuilder.fromUri("http://localhost/").port(9998).build();
    }

    protected static HttpServer startServer() throws IOException {
        ResourceConfig rc = new PackagesResourceConfig("com.production.api.resources");
        rc.getFeatures()
            .put(JSONConfiguration.FEATURE_POJO_MAPPING, true);

        return GrizzlyServerFactory.createHttpServer(BASE_URI, rc);
    }

    public static void main(String[] args) throws IOException {
        AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(Config.class);

        //if this is uncommented, it'll successfully query the database
        //VendorService vendorService = (VendorService)ctx.getBean("vendorService");
        //Vendor vendor = vendorService.findByUUID("asdf"); 

        HttpServer httpServer = startServer();
        System.out.println(String.format("Jersey app started with WADL available at " + "%sapplication.wadl\nTry out %shelloworld\nHit enter to stop it...", BASE_URI, BASE_URI));
        System.in.read();
        httpServer.stop();
    }
} 
```

**我的资源（控制器）：**

```
@Component
@Path("/job")
public class JobResource extends GenericResource {
    @Path("/new")
    @POST
    public String New(NewJobRequest request) {
        return "done";
    }
} 
```

**Jersey 将 JSON 帖子映射到：**

```
@Component
public class NewJobRequest {

    @Autowired
    private VendorService vendorService;

    @JsonCreator
    public NewJobRequest(Map<String, Object> request) {
        //uh oh, can't do anything here because @Autowired failed and vendorService is null
    }
} 
```

**供应商服务：**

```
@Service
public class VendorService extends GenericService<VendorDao> {

    public Vendor findByUUID(String uuid) {
        Vendor entity = null;
        try {
            return (Vendor)em.createNamedQuery("Vendor.findByUUID")
                    .setParameter("UUID", uuid)
                    .getSingleResult();
        } catch (Exception ex) {
            return null;
        }
    }
} 
```

-

```
@Service
public class GenericService<T extends GenericDao> {

    private static Logger logger = Logger.getLogger(Logger.class.getName());

    @PersistenceContext(unitName = "unit")
    public EntityManager em;

    protected T dao;

    @Transactional
    public void save(T entity) {
        dao.save(entity);
    }
} 
```

**我的服务配置：**

```
@Configuration
public class Config {
    @Bean
    public VendorService vendorService() {
        return new VendorService();
    }
} 
```

**我的配置**

```
@Configuration
@ComponentScan(basePackages = {
        "com.production.api",
        "com.production.api.dao",
        "com.production.api.models",
        "com.production.api.requests",
        "com.production.api.requests.job",
        "com.production.api.resources",
        "com.production.api.services"
})
@Import({
        com.production.api.services.Config.class,
        com.production.api.dao.Config.class,
        com.production.api.requests.Config.class
})
@PropertySource(value= "classpath:/META-INF/application.properties")
@EnableTransactionManagement
public class Config {
    private static final String PROPERTY_NAME_DATABASE_URL = "db.url";
    private static final String PROPERTY_NAME_DATABASE_USER = "db.user";
    private static final String PROPERTY_NAME_DATABASE_PASSWORD = "db.password";

    private static final String PROPERTY_NAME_HIBERNATE_DIALECT = "hibernate.dialect";
    private static final String PROPERTY_NAME_HIBERNATE_FORMAT_SQL = "hibernate.format_sql";
    private static final String PROPERTY_NAME_HIBERNATE_SHOW_SQL = "hibernate.show_sql";
    private static final String PROPERTY_NAME_ENTITYMANAGER_PACKAGES_TO_SCAN = "entitymanager.packages.to.scan";

    @Resource
    Environment environment;

    @Bean
    public DataSource dataSource() {
        MysqlDataSource dataSource = new MysqlDataSource();

        dataSource.setUrl(environment.getRequiredProperty(PROPERTY_NAME_DATABASE_URL));
        dataSource.setUser(environment.getRequiredProperty(PROPERTY_NAME_DATABASE_USER));
        dataSource.setPassword(environment.getRequiredProperty(PROPERTY_NAME_DATABASE_PASSWORD));

        return dataSource;
    }

    @Bean
    public JpaTransactionManager transactionManager() throws ClassNotFoundException {
        JpaTransactionManager transactionManager = new JpaTransactionManager();

        transactionManager.setEntityManagerFactory(entityManagerFactoryBean().getObject());

        return transactionManager;
    }

    @Bean
    public LocalContainerEntityManagerFactoryBean entityManagerFactoryBean() throws ClassNotFoundException {
        LocalContainerEntityManagerFactoryBean entityManagerFactoryBean = new LocalContainerEntityManagerFactoryBean();

        entityManagerFactoryBean.setDataSource(dataSource());
        entityManagerFactoryBean.setPersistenceUnitName("unit");
        entityManagerFactoryBean.setPackagesToScan(environment.getRequiredProperty(PROPERTY_NAME_ENTITYMANAGER_PACKAGES_TO_SCAN));
        entityManagerFactoryBean.setPersistenceProviderClass(HibernatePersistence.class);

        Properties jpaProperties = new Properties();
        jpaProperties.put(PROPERTY_NAME_HIBERNATE_DIALECT, environment.getRequiredProperty(PROPERTY_NAME_HIBERNATE_DIALECT));
        jpaProperties.put(PROPERTY_NAME_HIBERNATE_FORMAT_SQL, environment.getRequiredProperty(PROPERTY_NAME_HIBERNATE_FORMAT_SQL));
        jpaProperties.put(PROPERTY_NAME_HIBERNATE_SHOW_SQL, environment.getRequiredProperty(PROPERTY_NAME_HIBERNATE_SHOW_SQL));

        entityManagerFactoryBean.setJpaProperties(jpaProperties);

        return entityManagerFactoryBean;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:41:26.133

和注释是 JAX-RS，而不是 Spring `@Path`。`@POST`因此，容器会自行实例化您的端点，而不需要任何有关 Spring bean 的知识。您很可能没有得到任何 Spring 日志记录，因为根本没有使用 Spring。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:46:16.050

我已经发现了这个问题并在这里写了博客：http: [//blog.benkuhl.com/2013/02/how-to-access-a-service-layer-on-a-jersey-json-object/](http://blog.benkuhl.com/2013/02/how-to-access-a-service-layer-on-a-jersey-json-object/)

同时，我也将在这里发布解决方案：

我需要利用 Spring 已经创建的 bean，所以我使用了 Spring 的[ApplicationContextAware](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/ApplicationContextAware.html)

```
public class ApplicationContextProvider implements ApplicationContextAware {
    private static ApplicationContext applicationContext;

    public static ApplicationContext getApplicationContext() {
        return applicationContext;
    }

    public void setApplicationContext (ApplicationContext applicationContext) {
        this.applicationContext = applicationContext;
    }
} 
```

然后在我的对象中使用该静态上下文引用进行映射，以便我可以在服务中执行查找：

```
public class NewJobRequest {

    private VendorService vendorService;

    public NewJobRequest() {
        vendorService = (VendorService) ApplicationContextProvider.getApplicationContext().getBean("vendorService");
    }

    @JsonCreator
    public NewJobRequest(Map<String, Object> request) {
        setVendor(vendorService.findById(request.get("vendorId")); //vendorService is null
    }
    ....
} 
```

# mercurial - 如何在 Mercurial 中比较本地分支和远程分支

> ID：15009643
> 
> 赞同：0
> 
> 时间：2013-02-21T18:27:02.417
> 
> 标签：mercurial, remote-branch

有人可以告诉我如何比较本地分支和远程分支以查看所有差异或添加的新变更集吗？

我只想看看有什么新的喜欢`hg incoming`或`hg outgoing`。我不想比较单个文件。

它会是这样`hg incoming --branches Branch:Branch`的，所以第一个是本地分支，第二个是远程分支，类似这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:03:50.053

好的，所以我将回答我自己的问题：

我们显然可以使用`-b`（或`--branch`以确切的方式）标志和类似的`hg incoming`命令`hg outgoing`。因此，当我想比较特定分支时，我需要执行以下操作

1.  比较本地分支 1 和远程分支 1：`hg outgoing -b branch1`
2.  比较远程分支 1 和本地分支 1：`hg incoming -b branch1`

这有帮助。

# c# - 寻找 C# 算法以从 DateTime 对象集合中获取重复项（同时考虑日期和时间）？

> ID：15009648
> 
> 赞同：0
> 
> 时间：2013-02-21T18:27:23.200
> 
> 标签：c#, datetime, collections, recurrence

我有一个`DateTime`对象集合。我需要从这个原始列表中“解析”出子集合，以根据重复获取相关项目。所以我需要采取这个单一的原始集合：

```
var collectionOfDateTime = GetDateTimeCollection(); 
```

并将其转换为`DateTime`集合列表，其中每个集合都包含来自第一个列表的一组日期，这些日期遵循特定的重复模式。

**在下面的示例中，我不包括时间，但在实际要求中，这些项目同时具有日期和时间元素。因此，例如，日期需要相隔 7 天，但也要相同（2 月 3 日上午 11 点的时间与 2 月 10 日下午 3 点不匹配，但与 2 月 10 日上午 11 点匹配）**

例如，假设我的重复模式是“每周”（在其他情况下可能是“每月”），我的日期集合如下所示：

```
 var date1 = DateTime.Today.AddHours(8);
 var date2 = DateTime.Today.AddWeeks(1).AddHours(8);
 var date3 = DateTime.Today.AddDays(3);
 var date4 = DateTime.Today.AddWeeks(8).AddHours(6);

 var collectionOfDateTime = new List<DateTime>() { date1, date2, date3, date4 }; 
```

我想要一个函数（让我们调用它`StripOutSubCollections()`）传递`collectionOfDateTime`它的“每周”这一事实并返回一个包含`date1`,的集合`date2`（因为它们都是同一个每周时段的一部分）。注意 date3 不适合， date4 也不适合，因为时间与其他时间不匹配

另一个帮助证明需求的例子，如果原始集合的输入是这样的：

```
 var date1 = DateTime.Today;
 var date2 = DateTime.Today.AddWeeks(1);
 var date3 = DateTime.Today.AddDays(3);
 var date4 = DateTime.Today.AddWeeks(8);
 var date5 = DateTime.Today.AddDays(3).AddWeeks(2);

 var collectionOfDateTime = new List<DateTime>() { date1, date2, date3, date4, date5 }; 
```

我希望这个函数返回 2 个列表（一个带有`date1`,`date2`和`date4`的列表）和另一个带有`date3`and的列表`date5`。

让我知道是否需要更多示例来阐明要求？请注意，其中一个日期可能会落入多个输出列表中，这很好。

我可以将每周转换为数字 7 并循环遍历每个项目，从第一个项目开始到最后，然后第二个项目到最后，然后是第三个项目，等等，但想看看是否有更优雅的方式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:33:44.680

如果我正确理解您的问题，您是否正试图`DateTime`按星期几“分块”这些值？

如果是这样，应该这样做：

```
var byDayOfWeek = collectionOfDateTime.GroupBy(dt => dt.DayOfWeek);
// Optionally convert to a dictionary by day of week
var asDict = byDayOfWeek.ToDictionary(grp => grp.Key, grp => grp.ToList());

foreach(var kvp in asDict)
{
    Console.WriteLine("Day:" + kvp.Key);
    foreach (var value in kvp.Value)
    {
        Console.WriteLine(value);
    }
} 
```

输出：

```
Day:Thursday
2/21/2013 12:00:00 AM
2/28/2013 12:00:00 AM
4/18/2013 12:00:00 AM
Day:Sunday
2/24/2013 12:00:00 AM 
```

编辑：对于多个“分组依据”规则：

```
public enum ChunkType
{
    Weekly,
    Monthly,
    Yearly
}

public IEnumerable<IEnumerable<DateTime>> ChunkDates(IEnumerable<DateTime> collection, ChunkType chunkBy)
{
    switch(chunkBy)
    {
        case ChunkType.Weekly:
            // roughly equals by day of week
            return collection.GroupBy(dt => dt.DayOfWeek).Select(grp => grp.ToList());
        case ChunkType.Monthly:
            // Trickier - assume by ordinal day of month?
            return collection.GroupBy(dt => dt.Day).Select(grp => grp.ToList());
        case ChunkType.Yearly:
            // Trickier - assume by ordinal day of year?
            return collection.GroupBy(dt => dt.DayOfYear).Select(grp => grp.ToList());        
    }
    return new[]{ collection };
}

var date1 = DateTime.Today;
var date2 = DateTime.Today.AddDays(7);
var date3 = DateTime.Today.AddDays(3);
var date4 = DateTime.Today.AddDays(8*7);

var collectionOfDateTime = new List<DateTime>() { date1, date2, date3, date4};

foreach(var type in new [] { ChunkType.Weekly, ChunkType.Monthly, ChunkType.Yearly })
{
    Console.WriteLine("Now grouping by:" + type);
    var grouped = ChunkDates(collectionOfDateTime, type);
    foreach(var groupOfDates in grouped)
    {
        Console.WriteLine("New group!");
        foreach (var value in groupOfDates)
        {
            Console.WriteLine(value);
        }
    }
} 
```

输出：

```
Now grouping by:Weekly
New group!
2/21/2013 12:00:00 AM
2/28/2013 12:00:00 AM
4/18/2013 12:00:00 AM
New group!
2/24/2013 12:00:00 AM

Now grouping by:Monthly
New group!
2/21/2013 12:00:00 AM
New group!
2/28/2013 12:00:00 AM
New group!
2/24/2013 12:00:00 AM
New group!
4/18/2013 12:00:00 AM

Now grouping by:Yearly
New group!
2/21/2013 12:00:00 AM
New group!
2/28/2013 12:00:00 AM
New group!
2/24/2013 12:00:00 AM
New group!
4/18/2013 12:00:00 AM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:34:48.613

使用 LINQ

尝试（类似于，这是 LINQesque 伪代码）

```
var datecollections = from d in collectionOfDateTime
          group d by d.DayOfWeek into g
          select new { Day = g.Key, Date = g }; 
```

试一试，看看它会把你带到哪里......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:36:16.447

```
var dict = new Dictionary<int, List<DateTime>>();
foreach (var date in collectionOfDateTime) 
{
  if (dict.Contains(date.DayOfWeek))
  {
     dict[date.DayOfWeek].Add(date);
  }
  else 
  {
     dict.Add(date.DayOfWeek, new List<Date> { date });
  }
} 
```

# xcode - 使用 NSCoder 保存一组自定义对象，然后从保存的数据中加载 UITableView

> ID：15009649
> 
> 赞同：2
> 
> 时间：2013-02-21T18:27:24.863
> 
> 标签：xcode, uitableview, nscoding

当退出主页按钮或程序时，我正在尝试使用 NSCoding 保存一组对象，但似乎没有任何反应。

我究竟做错了什么？？？？

//Fieldbook.h 自定义对象

```
@interface FieldBook : NSObject <NSCoding>
{
    NSString *title;
    NSDate *date;
}

@property (nonatomic, retain) NSString *title;
@property (nonatomic, retain) NSDate *date;

-(id) init:(NSString *)aTitle;
- (NSString *) description;

@end 
```

//Fieldbook.m

```
#import "FieldBook.h"
@implementation FieldBook
@synthesize title, date;

-(id) init:(NSString *)aTitle
{
    title = aTitle;
    return  self;
}

- (NSString *) description
{
    NSString *desc = [NSString stringWithFormat:@"%@\n", title];
    return desc;
}

- (id)initWithCoder:(NSCoder *)decoder
{
    if (self = [super init])
    {
        self.title = [decoder decodeObjectForKey:@"title"];
        self.date = [decoder decodeObjectForKey:@"date"];
    }
    return self;
}

- (void)encodeWithCoder:(NSCoder *)encoder
{
    [encoder encodeObject:title forKey:@"time"];
    [encoder encodeObject:date forKey:@"date"];
}

@end 
```

//ViewController.h

```
@interface ViewController : UIViewController <UITableViewDataSource, UITableViewDelegate, UIAlertViewDelegate>

@property (weak, nonatomic) IBOutlet UITableView *myTableView;
@property (strong, nonatomic) NSMutableArray *fieldBooks;
@property (nonatomic, retain) UITextField *projectName;

- (NSString *)dataFilePath;

@end 
```

//ViewController.m

```
#import "FieldBook.h"
#import "ViewController.h"
@implementation ViewController
@synthesize myTableView, fieldBooks, projectName;

- (void)viewDidLoad
{
    // Do any additional setup after loading the view, typically from a nib.
    [super viewDidLoad];

    if(fieldBooks == nil)
        fieldBooks = [[NSMutableArray alloc]init];

    NSMutableArray *tempArray = [NSKeyedUnarchiver unarchiveObjectWithFile:[self dataFilePath]];
    [self.fieldBooks addObjectsFromArray:tempArray];

    UIApplication *app = [UIApplication sharedApplication];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(applicationWillResignActive:)
                                                 name:UIApplicationWillResignActiveNotification
                                               object:app];

    [self.myTableView reloadData];

    //Set title
    self.title = @"FieldBooks";

    //Add edit button
    self.navigationItem.leftBarButtonItem = self.editButtonItem;

    //Add the add button
    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd
                                                                               target:self
                                                                               action:@selector(insertNewObject)];

    self.navigationItem.rightBarButtonItem = addButton;

}

- (void)applicationWillResignActive:(NSNotification *)notification
{
    [NSKeyedArchiver archiveRootObject:self.fieldBooks toFile:[self dataFilePath]];
}

- (NSString *)dataFilePath
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    return [documentsDirectory stringByAppendingPathComponent:@"datafile"];
}

- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing:editing animated:animated];
    [myTableView setEditing:editing animated:animated];
}

- (void)insertNewObject
{
    UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Enter name"
                                                     message:@""
                                                    delegate:self
                                           cancelButtonTitle:@"Cancel"
                                           otherButtonTitles:@"OK", nil];

    alert.alertViewStyle = UIAlertViewStylePlainTextInput;
    projectName = [alert textFieldAtIndex:0];

    [alert show];
}

#pragma mark - UIAlertView delegate method
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    //Only perform if OK button is pressed
    if (buttonIndex == 1)
    {        
        FieldBook *fb = [[FieldBook alloc] init:(NSString *)projectName.text];
        [fieldBooks addObject:fb];

        [myTableView reloadData];

        NSLog(@"FieldBook created: %@", fb);
    }
}

#pragma mark - UITableView Datasource
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return  [fieldBooks count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }

    FieldBook *fbName = [self.fieldBooks objectAtIndex:[indexPath row]];
    cell.textLabel.text = fbName.title;

    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        //remove from NSMutable array
        [fieldBooks removeObjectAtIndex:indexPath.row];

        //remove from table view
        [myTableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }
}

@end 
```

# asp.net - 使用 MSBuild 构建客户端时的 ASP.NET Web 服务 SoapException

> ID：15009651
> 
> 赞同：0
> 
> 时间：2013-02-21T18:27:30.833
> 
> 标签：asp.net, web-services, soap, msbuild, asmx

我有一个 .NET (2.0) Windows 窗体应用程序，它使用作为 .NET (3.5) 网站的一部分托管的 ASP.NET Web 服务。该网站托管在运行 IIS7 的 Windows 服务器上。当我在 Visual Studio (2010) 中运行 Forms 应用程序时，我可以毫无问题地使用 Web 服务。但是，当我使用 MSBuild (4.0) 构建 Forms 应用程序时，它会构建并运行，但是在使用该服务时会引发以下异常：

```
System.Web.Services.Protocols.SoapException: Server was unable to read request. --->
System.InvalidOperationException: There is an error in XML document (the line number
varies). --->     System.FormatException: Input string was not in a correct format. 
```

我使用 MS 网络监视器查看 SOAP 以查看 XML 文档中的问题所在。似乎至少有一个标签没有被正确解析。例如，MS 网络监视器显示明显损坏的标签之一，如下所示：

```
- Element: XmlElement:<Country> - USA</
    - STag: <Country>
        - Tag: <Country>
            - TagName: Country
                Name: Country
    Content: USA</ 
```

无法识别 ETag（结束标签）。内容应为“USA”，ETag 应为“ `</Country>.`”

为什么会这样？具体来说，在 Visual Studio 中运行的应用程序与使用可能导致此问题的 MSBuild 构建的应用程序之间有什么区别？我比较了构建输出，它们是相同的文件，但其中一些文件之间存在大小差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:05:44.540

事实证明，这是由过期的 Web 服务代理类引起的。在客户端应用程序中更新 Web 引用解决了该问题。

# python - 如何使用 NLTK 从诱导语法生成句子？

> ID：15009656
> 
> 赞同：20
> 
> 时间：2013-02-21T18:27:37.383
> 
> 标签：python, nlp, nltk

我有一个（大）已解析句子列表（使用斯坦福解析器解析），例如，句子“现在你可以被娱乐”具有以下树：

```
(ROOT
  (S
    (ADVP (RB Now))
    (, ,)
    (NP (PRP you))
    (VP (MD can)
      (VP (VB be)
        (VP (VBN entertained))))
    (. .))) 
```

我正在使用一组句子树来诱导使用 nltk 的语法：

```
import nltk

# ... for each sentence tree t, add its production to allProductions
allProductions += t.productions()

# Induce the grammar
S = nltk.Nonterminal('S')
grammar = nltk.induce_pcfg(S, allProductions) 
```

现在我想用它`grammar`来生成新的随机句子。我的希望是，由于语法是从一组特定的输入示例中学习的，因此生成的句子在语义上将是相似的。我可以在 nltk 中做到这一点吗？

如果我不能使用 nltk 来执行此操作，是否存在任何其他可以获取（可能重新格式化）`grammar`并生成句子的工具？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-25T14:39:05.103

在 NLTK 2.0 中，您可以使用[为给定语法](http://nltk.org/_modules/nltk/parse/generate.html)`nltk.parse.generate`生成*所有*可能的句子。

此代码定义了一个函数，该函数应根据 (P)CFG 中的产生式规则生成单个句子。

```
# This example uses choice to choose from possible expansions
from random import choice
# This function is based on _generate_all() in nltk.parse.generate
# It therefore assumes the same import environment otherwise.
def generate_sample(grammar, items=["S"]):
    frags = []
    if len(items) == 1:
        if isinstance(items[0], Nonterminal):
            for prod in grammar.productions(lhs=items[0]):
                frags.append(generate_sample(grammar, prod.rhs()))
        else:
            frags.append(items[0])
    else:
        # This is where we need to make our changes
        chosen_expansion = choice(items)
        frags.append(generate_sample,chosen_expansion)
    return frags 
```

为了利用 PCFG 中的权重，您显然希望使用比 更好的采样方法`choice()`，这隐含地假设当前节点的所有扩展都是等概率的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T22:31:05.413

首先，如果你生成随机句子，它们可能在语义上是正确的，但它们可能会失去意义。

*（在我看来，这听起来有点像麻省理工学院的学生在他们的[SCIgen 程序](http://pdos.csail.mit.edu/scigen/)中所做的，该程序是自动生成科学论文。顺便说一句，非常有趣。）*

无论如何，我自己从来没有这样做过，但是使用 nltk.bigrams 似乎是可能的，您可以在**使用 Bigrams 生成随机文本**下[查看那里](http://nltk.org/book/ch02.html)。

 **您还可以[生成当前树的所有子树](http://nltk.org/_modules/nltk/tree.html#Tree.subtrees)，我也不确定它是否是您想要的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-06T18:56:03.173

我从现有 nltk.CFG 语法生成随机句子的解决方案：

```
def generate_sample(grammar, prod, frags):        
    if prod in grammar._lhs_index: # Derivation
        derivations = grammar._lhs_index[prod]            
        derivation = random.choice(derivations)            
        for d in derivation._rhs:            
            generate_sample(grammar, d, frags)
    elif prod in grammar._rhs_index:
        # terminal
        frags.append(str(prod)) 
```

现在可以使用它：

```
frags = []  
generate_sample(grammar, grammar.start(), frags)
print( ' '.join(frags) ) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-23T22:39:35.907

使用 nltk[文本](http://nltk.org/_modules/nltk/text.html)对象，您可以在其上调用“生成（）”，这将“打印随机文本，使用三元语言模型生成”。[http://nltk.org/_modules/nltk/text.html](http://nltk.org/_modules/nltk/text.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-23T21:40:59.323

受上述启发，这是一个使用迭代而不是递归的方法。

```
import random

def rewrite_at(index, replacements, the_list):
    del the_list[index]
    the_list[index:index] = replacements

def generate_sentence(grammar):
    sentence_list = [grammar.start()]
    all_terminals = False
    while not all_terminals:
        all_terminals = True
        for position, symbol in enumerate(sentence_list):
            if symbol in grammar._lhs_index:
                all_terminals = False
                derivations = grammar._lhs_index[symbol]
                derivation = random.choice(derivations) # or weighted_choice(derivations) if you have a function for that
                rewrite_at(position, derivation.rhs(), sentence_list)
    return sentence_list 
```

或者，如果您想要派生树，这棵。

```
from nltk.tree import Tree

def tree_from_production(production):
    return Tree(production.lhs(), production.rhs())

def leaf_positions(the_tree):
    return [the_tree.leaf_treeposition(i) for i in range(len(the_tree.leaves()))]

def generate_tree(grammar):
    initial_derivations = grammar._lhs_index[grammar.start()]
    initial_derivation = random.choice(initial_derivations) # or weighed_choice if you have that function
    running_tree = tree_from_production(initial_derivation)
    all_terminals = False
    while not all_terminals:
        all_terminals = True
        for position in leaf_positions(running_tree):
            node_label = running_tree[position]
            if node_label in grammar._lhs_index:
                all_terminals = False
                derivations = grammar._lhs_index[node_label]
                derivation = random.choice(derivations) # or weighed_choice if you have that function
                running_tree[position] = tree_from_production(derivation)
    return running_tree 
```

这是用于 NLTK PCFG 生产规则的 weighted_choice 函数，可与上述内容一起使用，改编自 Ned Batchelder 的回答[，](https://stackoverflow.com/questions/3679694/a-weighted-version-of-random-choice)用于一般的加权选择函数：

```
def weighted_choice(productions):
    prods_with_probs = [(prod, prod.prob()) for prod in productions]
    total = sum(prob for prod, prob in prods_with_probs)
    r = random.uniform(0, total)
    upto = 0
    for prod, prob in prods_with_probs:
        if upto + prob >= r:
            return prod
        upto += prob
    assert False, "Shouldn't get here" 
```**

# android - Android SetColorFilter() 与 SetBackgroundResource() / SetColorBackground()

> ID：15009657
> 
> 赞同：1
> 
> 时间：2013-02-21T18:27:43.950
> 
> 标签：android, android-edittext, background-color

谁能解释这种外观上的差异？
SetColorFilter() 作用于背景 Drawable，setBackgroundResource() 是否设置背景颜色。
在 Android 2.3 版本中，我安全地使用 SetColorFilter() 来更改 EditText 的背景颜色，因为通过清除过滤器很容易恢复原始颜色。无需获取并记住它。现在这两种方式似乎有所不同。

这是一个 EditTextPreference 对话框，et 是 EditText id。

```
 public void afterTextChanged(Editable s) {
            String source = s.toString();
            et.removeTextChangedListener(this);
            if( !source.matches("^[0-9]+$") ) {
                et.getBackground().setColorFilter(getResources().getColor(R.color.invalid), Mode.OVERLAY);
                et.invalidate();
                et.selectAll();
            } else {
                et.getBackground().clearColorFilter();
                et.invalidate();
            }
            et.addTextChangedListener(this);
        } 
```

![在此处输入图像描述](../Images/38f4fd90250110cfc5dddf9652f346be.png)

这是使用 SetBackgroundResource() 的相同代码

```
 public void afterTextChanged(Editable s) {
            String source = s.toString();
            et.removeTextChangedListener(this);
            if( !source.matches("^[0-9]+$") ) {
                et.setBackgroundResource(R.color.invalid);
                et.selectAll();
            } else {
                et.setBackgroundResource(R.color.valid);
            }
            et.addTextChangedListener(this);
        } 
```

![在此处输入图像描述](../Images/2d9ca632fe3124f74c4834ba4fe24e56.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-02T15:11:30.423

你可以使用`textView.setError("Error message")`上面提到的。但是，如果您想自定义 setError() 的行为（例如更改背景颜色），您将需要重写 EditText 并为 setError 编写自己的处理程序，如下所示：[EditText setError() with icon but without Popup message](https://stackoverflow.com/questions/8985295/edittext-seterror-with-icon-but-without-popup-message)

# javascript - 提交表单时在另一个页面上生成弹出窗口？

> ID：15009658
> 
> 赞同：0
> 
> 时间：2013-02-21T18:27:47.590
> 
> 标签：javascript, jquery, ajax

我在jsp中有2页。1 是医生.jsp，另一个是患者.jsp。两个页面都在 2 台不同的电脑上打开，并且有不同的视图。我想要做的是，当提交患者表单时，刷新了 patient.jsp，但表单的数据移动到了医生页面，并且在医生.jsp 中生成了一个 div 的弹出窗口。但是患者视图保持原样，并且在医生.jsp 中仅生成一个弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:01:57.717

要使用 jquery 将信息推送到页面，请查看[Atmosphere 框架](https://github.com/Atmosphere/atmosphere/wiki/jQuery.atmosphere.js-API)。您将需要服务器端和客户端代码来处理事务，而 Atmosphere 可以使它变得更容易。我没有在常规的 jsp 中使用它，但也许[这篇文章](http://www.ncolomer.net/2012/03/cometwebsocket-introducing-the-atmosphere-framework/)对你来说是一个很好的起点。

# vb.net - 组框内的组框文本属性 - 较小的文本

> ID：15009661
> 
> 赞同：1
> 
> 时间：2013-02-21T18:28:03.997
> 
> 标签：vb.net, winforms, groupbox

我的情况是，我有一个包含表单上所有控件的组框。在那个 groupbox 里面我有另一个 groupbox 但是这个 groupbox 的文本比以前的 groupbox 小很多。是否有财产可以防止这种情况发生？我假设它是较小的文本，因为它在另一个分组框中，但只是想知道是否有解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:50:53.790

我嵌套了许多组框，我添加的越多，它看起来好像文本越小越低。我用尺子测量了文本的长度，它们实际上是相同的大小。我不确定这是否是发生在你身上的事情，但也许这种影响就是所谓的[庞佐错觉](http://en.wikipedia.org/wiki/Ponzo_illusion)。如果你测量你的，我很感兴趣，结果是什么。

# javascript - 在 Angular 函数中访问 Get 变量

> ID：15009664
> 
> 赞同：2
> 
> 时间：2013-02-21T18:28:13.760
> 
> 标签：javascript, node.js, express, angularjs

我正在用 node express 和 angular js 构建一个应用程序。我将一个变量传递给我的视图，如下所示......

```
app.get('/profile', ensureAuthenticated, function(req, res){
  res.render('profile', { user: req.user });
}); 
```

我可以像这样（玉）访问我视图中的变量......

```
h1 #{user} 
```

但是如何从控制器或指令中的角度函数访问此变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T06:49:49.790

我写了一篇关于这个主题的博客文章 -[如何将 JavaScript 变量从服务器传递到 Angular](http://mircozeiss.com/how-to-pass-javascript-variables-from-a-server-to-angular/)。

总而言之，您有三个选择：

1.  使用内联 JavaScript 标签（不推荐）
2.  发出 HTTP 请求（如您在自己的解决方案中所示）
3.  使用[ngInit](http://docs.angularjs.org/api/ng.directive%3angInit)

你可以在我的帖子中阅读详细信息，我只会展示最后一个，也是我认为最聪明的解决方案。

要将您的`user`对象从您的快速服务器传递到 Angular 控制器，请使用以下`ngInit`指令：

```
div(ng-controller="UserCtrl", ng-init="user= #{JSON.stringify(user)}") 
```

这会将内容加载到 Angular 范围内，您应该能够通过调用在控制器内部访问它`$scope.user`。

```
function UserCtrl($scope) {
  console.log($scope.user);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-08T09:59:21.193

`ng-init`不是在 Angular 中加载/存储常量的方法**。**介绍一下，Angular 方式：

```
<script>
  angular.module('$preloaded', []).constant('$preloaded', <%= preloaded %>)
</script> 
```

然后，您可以在代码中的任何位置注入`$preloaded`依赖项并访问常量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T20:38:58.540

Thanks James, the FoodMe demo looks like a great learning resource. Having read your reply, it shifted my thinking enough for me to come up with my own solution. I will add it as an alternative answer, simply because code in comments suck. For the sake of improving my understanding of how node and angular can work together, perhaps you or somebody else might be kind enough to comment on how our two solutions compare, and why or when one might be preferable.

In my express app.js...

```
app.get('/api/user', api.user); 
```

and in my routes/api.js...

```
exports.user = function (req, res) {
  res.json(req.user);
}; 
```

and then in my angular controller...

```
function profileCtrl($scope, $http) {

  $http.get('/api/user/').success(function(data) {
    $scope.user = data;
  });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T19:35:52.113

在我看来，您可能正在以一种不理想的方式混合事物。我认为最好的方法是在 Angular 代码中使用[$resource](http://docs.angularjs.org/api/ngResource.%24resource)来调用 /profile 并以这种方式获取数据。

这样想，你刚刚使用 node 创建了一个 webservice，现在你使用 AngularJS 从你的 Services 层调用 webservice。调用它的代码非常简单，可以在我链接的文档中找到。

您可能还想查看[FoodMe 演示](https://github.com/IgorMinar/foodme)，它使用 node.js 作为 web 服务层，使用 angularJS 作为客户端 UI 层，与您设置的方式完全相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-30T06:50:44.820

这是一篇旧帖子，但很相关。Zemrico 的答案很好，但需要更新，因为jade/pug 语法有一些变化。首先，他的答案中的链接已损坏，应该是

[http://www.mircozeiss.com/how-to-pass-javascript-variables-from-a-server-to-angular](http://www.mircozeiss.com/how-to-pass-javascript-variables-from-a-server-to-angular)

如果您正在阅读博客文章，请注意以下内容不再适用，因为 pug 不再接受插值作为属性。

```
div(ng-controller="UserCtrl", ng-init="user= #{JSON.stringify(user)}") 
```

相反，请使用它。

```
div(ng-controller="UserCtrl", ng-init="user=" + JSON.stringify(user) ) 
```

# objective-c - 使用 UIActivityViewController 发送电子邮件时如何保存用户的电子邮件收件人？

> ID：15009666
> 
> 赞同：0
> 
> 时间：2013-02-21T18:28:19.120
> 
> 标签：objective-c, ios6, mfmailcomposeviewcontroller, uiactivityviewcontroller

我正在使用 UIActivityViewController，当用户从选项列表中选择电子邮件时，有没有办法保存用户输入的电子邮件收件人？

我需要像这里所做的那样子类化 ActivityItemSource[吗](https://stackoverflow.com/questions/12623260/how-do-i-set-recipients-for-uiactivityviewcontroller-in-ios-6?rq=1)？

我意识到即使只使用[这里](https://stackoverflow.com/questions/8985140/getting-the-recepients-list-in-mfmailcomposeviewcontroller)的 MFMailcomposeViewController 来获取电子邮件收件人也很棘手。

我是否需要子类化 MFMailcomposeViewController 来保存用户输入的电子邮件收件人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T05:02:39.620

从[类参考](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)：

> **重要提示**：邮件撰写界面本身是不可定制的，并且不能由您的应用程序修改。此外，在呈现界面后，您的应用程序不允许对电子邮件内容进行进一步的更改。用户仍然可以使用界面编辑内容，但程序更改会被忽略。因此，您必须在呈现界面之前设置内容字段的值。

所以不行。您不应`MFMailcomposeViewController`为了“窃取”用户输入的电子邮件地址而进行子类化。这是一个隐私问题，Apple 专门设计了这种方式。如果您试图规避这一点，那么您的应用很可能会（并且应该）被拒绝。

# php - 我的 SQL 表不会更新

> ID：15009668
> 
> 赞同：0
> 
> 时间：2013-02-21T18:28:20.413
> 
> 标签：php, mysql, sql

我正在创建一个网站，但更新页面遇到了一些问题。该页面更新现有帖子。

这是失败的代码：

```
$result = mysql_query("UPDATE php_blog SET timestamp='$timestamp',
title='$title', entry='$entry', WHERE id='$id' LIMIT 1") or die(mysql_error()); 
```

当我按下表单上的“更新”按钮时，我收到以下 SQL 消息：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'WHERE id='9' LIMIT 1' 附近使用正确的语法

但我不知道这意味着什么。我已经检查了那个地方，但找不到任何问题...帮助？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:31:26.193

在 WHERE 语句之前有一个额外的逗号。您的 SQL 应如下所示：

```
UPDATE php_blog 
SET timestamp='$timestamp', title='$title', entry='$entry' 
WHERE id='$id' LIMIT 1 
```

请注意，mysql_ 函数已被弃用：

[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:32:07.440

去掉前面的逗号`WHERE`：

```
$result = mysql_query("UPDATE php_blog SET timestamp='$timestamp', 
    title='$title',
    entry='$entry' WHERE id='$id' LIMIT 1") 
    or die(mysql_error()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:50:20.643

你的答案的问题：删除之前的逗号`WHERE`

但是你很幸运你有这个问题并将它发布在这里。您的代码非常脆弱，您应该真正学习如何使用准备好的语句。

也谷歌“SQL注入”来了解这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T18:33:16.540

`WHERE`像这样删除子句前的逗号

```
$result = mysql_query("UPDATE php_blog SET timestamp='$timestamp', title='$title',entry='$entry' WHERE id='$id' LIMIT 1") or die(mysql_error()); 
```

# r - 以编程方式将列名传递给 data.table

> ID：15009669
> 
> 赞同：12
> 
> 时间：2013-02-21T18:28:22.580
> 
> 标签：r, data.table

我希望能够编写一个`data.table`按组运行回归的函数，然后很好地组织结果。这是我想做的一个示例：

```
require(data.table)
dtb = data.table(y=1:10, x=10:1, z=sample(1:10), weights=1:10, thedate=1:2)
models = c("y ~ x", "y ~ z")

res = lapply(models, function(f) {dtb[,as.list(coef(lm(f, weights=weights, data=.SD))),by=thedate]})

#do more stuff with res 
```

我想将所有这些包装成一个函数，因为它`#doe more stuff`可能很长。我面临的问题是如何将事物的各种名称传递给`data.table`? 例如，如何传递列名`weights`？我如何通过`thedate`？我设想一个看起来像这样的原型：

```
myfun = function(dtb, models, weights, dates) 
```

让我明确一点：将公式传递给我的函数不是问题。如果`weights`我想使用和描述日期的列名`thedate`是已知的，那么我的函数可能看起来像这样：

```
 myfun = function(dtb, models) {
res = lapply(models, function(f) {dtb[,as.list(coef(lm(f, weights=weights, data=.SD))),by=thedate]})

 #do more stuff with res
 } 
```

`thedate`但是，与和对应的列名`weights`事先是未知的。我想将它们传递给我的函数：

```
#this will not work
myfun = function(dtb, models, w, d) {
res = lapply(models, function(f) {dtb[,as.list(coef(lm(f, weights=w, data=.SD))),by=d]})

 #do more stuff with res
 } 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T22:40:40.523

这是一个依赖于长格式数据的解决方案（这对我来说更有意义，在这种情况下

```
library(reshape2)
dtlong <- data.table(melt(dtb, measure.var = c('x','z')))

foo <- function(f, d, by, w ){
  # get the name of the w argument (weights)
  w.char <- deparse(substitute(w))
  # convert `list(a,b)` to `c('a','b')`
  # obviously, this would have to change depending on how `by` was defined
  by <- unlist(lapply(as.list(as.list(match.call())[['by']])[-1], as.character))
  # create the call substituting the names as required
  .c <- substitute(as.list(coef(lm(f, data = .SD, weights = w), list(w = as.name(w.char)))))
  # actually perform the calculations
  d[,eval(.c), by = by]
}

foo(f= y~value, d= dtlong, by = list(variable, thedate), w = weights)

   variable thedate (Intercept)       value
1:        x       1   11.000000 -1.00000000
2:        x       2   11.000000 -1.00000000
3:        z       1    1.009595  0.89019190
4:        z       2    7.538462 -0.03846154 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T19:39:16.610

一种可能的解决方案：

```
fun = function(dtb, models, w_col_name, date_name) {
     res = lapply(models, function(f) {dtb[,as.list(coef(lm(f, weights=eval(parse(text=w_col_name)), data=.SD))),by=eval(parse(text=paste0("list(",date_name,")")))]})

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T19:01:15.500

你不能只添加（在那个匿名函数调用中）：

```
 f <- as.formula(f) 
```

...作为`dtb[,as.list(coef(lm(f, ...)`?之前的单独行 这是将字符元素转换为公式对象的常用方法。

```
> res = lapply(models, function(f) {f <- as.formula(f)
                 dtb[,as.list(coef(lm(f, weights=weights, data=.SD))),by=thedate]})
> 
> str(res)
List of 2
 $ :Classes ‘data.table’ and 'data.frame':  2 obs. of  3 variables:
  ..$ thedate    : int [1:2] 1 2
  ..$ (Intercept): num [1:2] 11 11
  ..$ x          : num [1:2] -1 -1
  ..- attr(*, ".internal.selfref")=<externalptr> 
 $ :Classes ‘data.table’ and 'data.frame':  2 obs. of  3 variables:
  ..$ thedate    : int [1:2] 1 2
  ..$ (Intercept): num [1:2] 6.27 11.7
  ..$ z          : num [1:2] 0.0633 -0.7995
  ..- attr(*, ".internal.selfref")=<externalptr> 
```

如果您需要从组件名称构建公式的字符版本，只需使用`paste`or`paste0`并传递给模型字符向量。测试代码随可测试示例一起提供。

# ios - 在 OpenGL ES 中隐藏部分图像

> ID：15009670
> 
> 赞同：0
> 
> 时间：2013-02-21T18:28:24.590
> 
> 标签：ios, objective-c, opengl-es, glkit

我正在使用 GLKView 在 iOS 应用程序中渲染一些精灵。

我的问题是，如何仅删除/绘制一张图像的一部分？例如，我有一个背景，在它上面有一个图像（两个精灵）。我想从顶部的图像中取出一些随机矩形，以便在这些矩形中可以看到背景。那可能吗？

我正在创建这样的纹理：

```
 - (id)initWithFile:(NSString *)fileName effect:(GLKBaseEffect *)effect position:(GLKVector2)position{
    if ((self = [super init])) {
        self.effect = effect;

        NSDictionary * options = [NSDictionary dictionaryWithObjectsAndKeys:
                                  [NSNumber numberWithBool:YES],
                                  GLKTextureLoaderOriginBottomLeft, 
                                  nil];

        NSError * error;    
        NSString *path = [[NSBundle mainBundle] pathForResource:fileName ofType:nil];
        self.textureInfo = [GLKTextureLoader textureWithContentsOfFile:path options:options error:&error];

        self.contentSize = CGSizeMake(self.textureInfo.width, self.textureInfo.height);

        TexturedQuad newQuad;
        newQuad.bl.geometryVertex = CGPointMake(0, 0);
        newQuad.br.geometryVertex = CGPointMake(self.textureInfo.width, 0);
        newQuad.tl.geometryVertex = CGPointMake(0, self.textureInfo.height);
        newQuad.tr.geometryVertex = CGPointMake(self.textureInfo.width, self.textureInfo.height);

        newQuad.bl.textureVertex = CGPointMake(0, 0);
        newQuad.br.textureVertex = CGPointMake(1, 0);
        newQuad.tl.textureVertex = CGPointMake(0, 1);
        newQuad.tr.textureVertex = CGPointMake(1, 1);
        self.quad = newQuad;

        self.position = position;

        self.frameHeight = self.textureInfo.height;

    }
    return self;
} 
```

然后像这样渲染它们

```
- (void)render { 

    self.effect.texture2d0.name = self.textureInfo.name;
    self.effect.texture2d0.enabled = YES;        

    self.effect.transform.modelviewMatrix = self.modelMatrix;

    [self.effect prepareToDraw];

    long offset = (long)&_quad;

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);

    glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, geometryVertex)));
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, textureVertex)));

    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:01:00.687

通常，这是通过作为[alpha 贴图](http://en.wikipedia.org/wiki/Alpha_mapping)的第二个纹理完成的。在着色器中，alpha 纹理将具有完全不透明的区域和完全透明的其他区域。阿尔法纹理的阿尔法通道乘以图像纹理阿尔法得到最终的颜色。

# php - 尝试通过 PHP / MySQL 下载 Blob

> ID：15009672
> 
> 赞同：3
> 
> 时间：2013-02-21T18:28:27.907
> 
> 标签：php, mysql, download, blob

这是我无法弄清楚的：我已经成功地在网页上构建了一个上传功能，以将文件上传到 MySQL 数据库。当我在服务器上通过 phpMyAdmin 打开它们时，它们看起来都很好……txt、jpg、pdf 等。

然而，在把这个东西（下面）放在一起下载之后，我遇到了一个奇怪的问题：所有的文本文档（以及所有其他类型的文件，在我将扩展名更改为“txt”之后）都包含页面本身的 HTML 代码，后跟原创内容！

此外，不同的浏览器在 POST 后显示不同。尝试下载 txt 文件时，IE 将在页面本身的 ECHO 中显示正确的数据（不下载），并在其前面显示错误消息：

> 警告：标头不能包含多个标头，检测到新行。在第 82 行的 C:\wamp\www\ace\dmain.php 中。
> 
> 第 82 行是 'header("Content-length...'

Firefox 和 Chrome 都没有显示任何内容。他们只允许我下载它。

这是代码：

```
<?php
if (isset($_POST['downloadid'])) {
    $fileid = $_POST['downloadid'];
    try {
      $sql = "SELECT * FROM `datastore` WHERE `id` = '".$fileid."'";
        $results = $pdo->query($sql);echo $sql;
        while ($row = $results->fetch()) {
            $filename = $row['filename'];
            $mimetype = $row['mimetype'];
            $filedata = $row['filedata'];
            header("Content-length: strlen($filedata)");
            header("Content-type: $mimetype");
            header("Content-disposition: download; filename=$filename"); //disposition of download forces a download
            echo $filedata; 
            // die();
        } //of While
    } //try
    catch (PDOException $e) {
        $error = '<br>Database ERROR fetching requested file.';
        echo $error;
        die();    
    } //catch
} //isset
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T18:33:28.090

这：

```
header("Content-length: strlen($filedata)"); 
```

不会产生你所期望的。如果您查看wireshark 中的标头，或者查看请求的其他方法，您会发现它不包含整数。

改用这个：

```
header("Content-length: ".strlen($filedata)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:15:13.090

在对就地修复它（即与其余 html 和代码在同一页面上）苦恼之后，我决定将它移动到一个专用的 PHP 页面。在那之后，它工作得很好。

感谢您的评论！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-31T08:55:14.860

[这是很好的例子和完整的源代码](http://smartcoderszone.com/2010/09/upload-files-in-blob-type-using-mysql-and-php/)

# java - 调用函数

> ID：15009674
> 
> 赞同：0
> 
> 时间：2013-02-21T18:28:39.370
> 
> 标签：java, android, admob

我在一个类中定义了这个布尔值：

```
private boolean showad; 
```

我在同一个类中定义了这个函数，它检查是否`showad`设置为`true`：

```
public void adon() {
  if (showad == true) {
    AdView adView = (AdView) this.findViewById(R.id.ad);
    adView.loadAd(new AdRequest());
  }
} 
```

如何让这个函数`adon()`重复运行以检查`showad`布尔值的变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T18:39:09.750

好的，我将在这里冒险并猜测您实际上并不需要无限循环来检查您的布尔值以显示广告。所以让我给你一些真正的建议，而不是在评论中怒火中烧。您似乎想检查是否在某个屏幕上显示广告：活动或片段。

所以我给你的建议是：

将 if 条件检查放在您的 onResume() 方法中，并在那里显示/不显示您的广告。

```
@Override
    public void onResume() {
        super.onResume();
            if (showad == true) {
                  AdView AdView = (AdView) this.findViewById (R.id.ad);
                  adView.loadAd (AdRequest new ());
            }
} 
```

这样，每当您的屏幕加载/刷新时，它都会检查。我认为您并不真的想要实时检查是否显示您的广告，因为这对用户来说非常不和谐。只需在 onResume() 中检查它。如果您有任何进一步的问题，请发表评论，我会扩展我的答案。如果你喜欢这个答案，请点赞并采纳。

但如果它真的必须是实时的。我可以帮助您设置一个计时器/延迟可运行，它会每隔一段时间检查一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T18:35:35.703

```
void setShowad(boolean val) {
    if (showad) {
        AdView AdView = (AdView) this.findViewById (R.id.ad);
        adView.loadAd (AdRequest new ());
    }
    showad = val;
} 
```

# aes - 从 C++ 代码和命令行生成相同的 Key 和 IV

> ID：15009678
> 
> 赞同：4
> 
> 时间：2013-02-21T12:14:57.833
> 
> 标签：aes, openssl, c++

我的命令行工具 openssl 有问题，或者我的 C++ 代码有问题。我不知道哪个是不正确的，但是当我使用这两种方法从 passphase 和 salt 生成密钥和 IV 时，我没有得到相同的 key/IV 值。您可以看到的代码或命令行是否有任何拼写错误或问题？openssl 0.9.8i的版本坏了吗？我使用 1 的 nround 值，因为命令行无法传递迭代计数值。它应该是匹配的，但它不是，我无法发现我的错误在哪里。

-----------------以下代码将字符串 XYZ 正确加密为 2OG7CNt/SjFEZ4RM3ZS4ZA== 密钥：eaa4d33f9f6a9a8e543c0ae80eef651b675ef50682e5f144f1c140269531ddb2 IV：e94c989252a82fcb6b934752c0-----

```
EVP_CIPHER_CTX ctx;
unsigned char acOutbuf[cMaxEncryptLen + EVP_MAX_BLOCK_LENGTH + 1];
int nOutLen;
std::string strDecrypt;

// Key and IV values.
const unsigned char pcCode[] = "f7bUtborBWdBIUkZuLr9oVGzGsc7Y6AMMe7U3z+AQo8";
const unsigned char pcSalt[] = {0x78,0x01,0x3E,0x00,0xD8,0x04,0x3E,0x00};
unsigned char acKey[EVP_MAX_KEY_LENGTH + 1];
unsigned char acIV[EVP_MAX_IV_LENGTH + 1];

// Load all the encryption ciphers and lookup the one we want to use.
OpenSSL_add_all_algorithms();
const EVP_CIPHER *cipher = EVP_get_cipherbyname("aes-256-cbc");

// Generate HashKey for the password.
int nrounds = 1;
int nCnt = EVP_BytesToKey(cipher, EVP_sha1(), pcSalt, pcCode, sizeof(pcCode), nrounds, acKey, acIV);

char *pcPassword = const_cast<char *> (strPassword.c_str());
nBase64DecodeCnt = strPassword.length();

EVP_CIPHER_CTX_init(&ctx);

EVP_CipherInit_ex(&ctx, cipher, NULL, acKey, acIV, 1);
if(!EVP_CipherUpdate(&ctx, acOutbuf, &nOutLen, (const unsigned char *) pcPassword, nBase64DecodeCnt))
{
    EVP_CIPHER_CTX_cleanup(&ctx);
    return strDecrypt;
}
if(!EVP_CipherFinal_ex(&ctx, acOutbuf, &nOutLen))
{
    EVP_CIPHER_CTX_cleanup(&ctx);
    return strDecrypt;
}

strDecrypt.assign((const char *) acOutbuf, nOutLen);

EVP_CIPHER_CTX_cleanup(&ctx);
return strDecrypt; 
```

-----------------以下代码将2OG7CNt/SjFEZ4RM3ZS4ZA==解密为XYZ ---------- -

```
EVP_CIPHER_CTX ctx;
unsigned char acOutbuf[cMaxEncryptLen + EVP_MAX_BLOCK_LENGTH + 1];
int nOutLen;
std::string strDecrypt;

// Key and IV values.
const unsigned char pcCode[] = "f7bUtborBWdBIUkZuLr9oVGzGsc7Y6AMMe7U3z+AQo8";
const unsigned char pcSalt[] = {0x78,0x01,0x3E,0x00,0xD8,0x04,0x3E,0x00};
unsigned char acKey[EVP_MAX_KEY_LENGTH + 1];
unsigned char acIV[EVP_MAX_IV_LENGTH + 1];

// Load all the encryption ciphers and lookup the one we want to use.
OpenSSL_add_all_algorithms();
const EVP_CIPHER *cipher = EVP_get_cipherbyname("aes-256-cbc");

// Generate HashKey for the password.
int nrounds = 1;
int nCnt = EVP_BytesToKey(cipher, EVP_sha1(), pcSalt, pcCode, sizeof(pcCode), nrounds, acKey, acIV);

// Convert the base64 password string back into a real password.
int nBase64DecodeCnt;
char *pcPassword = Base64ToByteStream ((char *) strPassword.c_str(), (int) strPassword.length(), &nBase64DecodeCnt);

EVP_CIPHER_CTX_init(&ctx);

EVP_CipherInit_ex(&ctx, cipher, NULL, acKey, acIV, 0);
if(!EVP_CipherUpdate(&ctx, acOutbuf, &nOutLen, (const unsigned char *) pcPassword, nBase64DecodeCnt))
{
    EVP_CIPHER_CTX_cleanup(&ctx);
    return strDecrypt;
}
if(!EVP_CipherFinal_ex(&ctx, acOutbuf, &nOutLen))
{
    EVP_CIPHER_CTX_cleanup(&ctx);
    return strDecrypt;
}

strDecrypt.assign((const char *) acOutbuf, nOutLen);

EVP_CIPHER_CTX_cleanup(&ctx);
return strDecrypt; 
```

请注意，虽然我可以使用 openssl 命令行工具解密和加密，但我似乎无法使用命令行正确生成密钥和 iv。

```
---- Encrypts correct -----
echo -n XYZ | openssl enc -e -a -aes-256-cbc -K eaa4d33f9f6a9a8e543c0ae80eef651b675ef50682e5f144f1c140269531ddb2 -iv e94c989252a82fcb6b934752c0f3702b

Produces : 2OG7CNt/SjFEZ4RM3ZS4ZA==

---- Decrypts correct to XYZ ----

echo 2OG7CNt/SjFEZ4RM3ZS4ZA== | openssl.exe enc -d -a -aes-256-cbc -K eaa4d33f9f6a9a8e543c0ae80eef651b675ef50682e5f144f1c140269531ddb2 -iv e94c989252a82fcb6b934752c0f3702b

Produces : XYZ

-----  Does not produce the correct key and IV --------
openssl enc -aes-256-cbc -md sha1 -S 78013E00D8043E00 -P -pass pass:f7bUtborBWdBIUkZuLr9oVGzGsc7Y6AMMe7U3z+AQo8

salt=78013E00D8043E00
key=718D65A221F0B2F12B6C92B7E54501DD63A8E156E03CA0E98E73653B1D0F58E5
iv =A5FDF910766E727E2100FA09B7578685 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T19:37:06.107

似乎 openssl 命令行工具使用了字符指针和字符串长度。我正在使用一个字符数组和字符数组的大小。这从我的计算中遗漏了最后一个 '\0' 字符，导致我生成不同的键和 IV 值。更正后的代码是：

```
{
...
    // Key and IV values.
    const char *pcCode = "f7bUtborBWdBIUkZuLr9oVGzGsc7Y6AMMe7U3z+AQo8";
    unsigned char acKey[EVP_MAX_KEY_LENGTH + 1];
    unsigned char acIV[EVP_MAX_IV_LENGTH + 1];

    // Load all the encryption ciphers and lookup the one we want to use.
    OpenSSL_add_all_algorithms();
    const EVP_CIPHER *cipher = EVP_get_cipherbyname("aes-256-cbc");
    const EVP_MD *digest = EVP_get_digestbyname("sha1");

    // Generate HashKey for the password.
    int nrounds = 1;
    int nCnt = EVP_BytesToKey(cipher, digest, Global::acDecryptSalt, (const unsigned char *) pcCode, strlen(pcCode), nrounds, acKey, acIV);

...
} 
```

# jquery - 通过清除 src 属性使用 jquery 动态删除图像

> ID：15009680
> 
> 赞同：3
> 
> 时间：2013-02-21T18:29:04.040
> 
> 标签：jquery, loading-image, dynamic-attributes

我知道可以使用动态加载图像

```
$("#id").attr("src","path of the image"), 
```

但是要在特定事件上加载特定图像，

```
$("id").attr("src","") 
```

不起作用。

使用 jquery 卸载图像运行时的​​正确方法是什么？

我无法更改图像的显示或可见性属性，我需要加载卸载它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-03-21T10:43:59.550

有很多方法可以做到这一点。您可以使用适合您的那一款

1.  `$('#id').removeAttr('src');​ // Remove the src`
2.  `$('#id').remove(); //This will remove the element from DOM so be careful`
3.  `$('#id').attr('src', 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=='); // This will change the src to a 1x1 pixel`

4.  `$('#id').removeAttr('src').replaceWith($image.clone()); //That worked for few people`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:32:51.813

只需使用 ID[删除](http://api.jquery.com/remove/)元素：

```
$("#id").remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-17T10:17:11.630

浏览器不会注册任何更改。因此传递随机函数将强制浏览器在 DOM 中进行更改。 *下面是使用的jquery和HTML*

```
$('#uploaded_image').attr('src',data+'?'+Math.random());

<img src="logo.png?1576573831" class="NO-CACHE img-responsive p-b-10" id="uploaded_image"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-29T05:28:48.360

document.getElementById("ImgID").style.display = "none"; document.getElementById("ImgID").removeAttribute('src'); ... ... ... ... document.getElementById("ImgID").src = NewSrc; document.getElementById("ImgID").style.display = "initial";

# c# - 删除asp按钮背景？

> ID：15009689
> 
> 赞同：0
> 
> 时间：2013-02-21T18:29:41.220
> 
> 标签：c#, asp.net, html, css

在我的模态标题中，我需要 x 按钮来做一些服务器端的工作，所以它需要是一个 asp 按钮。

我这里都有：

```
<div class="modal-header">
   <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        ×</button>
   <asp:Button ID="btnX" CssClass="close no-bg" runat="server" Text="×" 
          OnClientClick="closeModal('#projectModal')"  
          OnClick="btnClose_Click" aria-hidden="true" />
   <h3 id="projectModalLabel">Edit Project</h3>
</div> 
```

但是，我的 asp 按钮仍然看起来像一个按钮，而另一个带有 boostrap 关闭样式的 html 按钮看起来是正确的，只是显示了一个“x”。

如何使 asp 按钮看起来像 html 按钮（例如删除背景）

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T18:36:38.033

这是因为`<asp:Button>`托管控件呈现的是`<input>`元素而不是`<button>`元素。它们可以有不同的风格。[您可以在此处](http://web.archive.org/web/20110721191046/http://particletree.com/features/rediscovering-the-button-element/)阅读不同之处。

**编辑：**在您引用的示例中，他们使用锚`<a>`元素和使用背景图像的样式等。您可以根据需要使用[LinkBut​​ton](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.aspx)和样式。

# html - 幻灯片动画的问题

> ID：15009697
> 
> 赞同：0
> 
> 时间：2013-02-21T18:30:32.443
> 
> 标签：html, css

我是一个没有太多 CSS 经验的开发人员。我想使用两个图像创建一个纯 CSS3 幻灯片。我为此找到[了一些漂亮的代码](http://css3.bradshawenterprises.com/cfimg/#cfimg3 "纯 CSS 幻灯片")`#cf3`，并且我在下面实现了一个非常小的变化（基本上我只是取出了id 选择器`img .top`）：

```
.slide {
    position:absolute;
}   

@keyframes cf3FadeInOut {
    0% {
          opacity:1;

}           
45% {
    opacity:1;

}           
55% {       
    opacity:0;

}       
100% {  
    opacity:0;

}       

}

img.top {
    animation-name: cf3FadeInOut;
    animation-timing-function: ease-in-out;
    animation-iteration-count: infinite;
    animation-duration: 10s;
    animation-direction: alternate;

} 
```

第一个图像定义为`<img class="slideshow top" src="img1.jpg">`。第二个是相同的，除了没有`"top"`类。

当我加载页面时，我所有的其他 CSS 都可以工作，但是找不到动画。有人看到我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:08:18.393

您需要添加供应商特定的属性名称，[CSS3 动画](http://www.w3.org/TR/2013/WD-css3-animations-20130219/)仍然是一个草案规范。

```
-webkit-animation-name: cf3FadeInOut;
-webkit-animation-timing-function: ease-in-out;
-webkit-animation-iteration-count: infinite;
-webkit-animation-duration: 10s;
-webkit-animation-direction: alternate;

-moz-animation-name: cf3FadeInOut;
-moz-animation-timing-function: ease-in-out;
-moz-animation-iteration-count: infinite;
-moz-animation-duration: 10s;
-moz-animation-direction: alternate;

-o-animation-name: cf3FadeInOut;
-o-animation-timing-function: ease-in-out;
-o-animation-iteration-count: infinite;
-o-animation-duration: 10s;
-o-animation-direction: alternate;

animation-name: cf3FadeInOut;
animation-timing-function: ease-in-out;
animation-iteration-count: infinite;
animation-duration: 10s;
animation-direction: alternate;

/* and all the keyframes too */
@-webkit-keyframes cf3FadeInOut { ... }
@-moz-keyframes cf3FadeInOut { ... }
@-o-keyframes cf3FadeInOut { ... }
@keyframes cf3FadeInOut { ... } 
```

# javascript - 处理 GET char 限制

> ID：15009700
> 
> 赞同：2
> 
> 时间：2013-02-21T18:30:40.103
> 
> 标签：javascript, python, sockets, get

我有一个 .js 脚本，它将数据发送到在本地主机上运行的 .py 脚本。

要从 .js 发送数据，我有以下工作（处理 XmlHTTPRequest 的限制）：

```
var req = document.createElement("img");
req.src = "http://0.0.0.0:8000?var="+data 
```

要在 python 端接收它：

```
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)

s.bind((HOST, PORT))
s.listen(5)

conn, addr = s.accept()
data = conn.recv(1024)
conn.close()

print data 
```

这很好用，但我的问题是 GET 的字符限制阻止我发送我需要的所有数据。我尝试发出 URI GET 请求（使用第一个代码块两次），但我的 python 只收到了第一个请求。如何发送/接收多个 GET 请求？我假设我需要某种循环，但不确定循环中需要哪些步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:32:56.677

从您的 Python 代码来看，使用的 HTTP 请求方法似乎没有任何区别。在这种情况下，我建议您设置一个表单元素，`method="post"`然后将您想要的任何内容放入其中。柱体长度没有理论上的限制。

# api - 过滤一个用户的曲目时的 Soundcloud API 错误

> ID：15009701
> 
> 赞同：2
> 
> 时间：2013-02-21T18:30:40.020
> 
> 标签：api, filter, filtering, soundcloud

我正在尝试使用查询（甚至是标签/流派过滤器）过滤单个 SoundCloud 用户的曲目。我可以获取用户的曲目，但是一旦我添加了查询参数，它就会返回所有声音云用户的曲目。

**这不起作用：**

```
SC.get('/users/00001/tracks', {q: 'Black Night'}, function(tracks) {
   // returns tracks from all soundcloud users which contain 'Black Night'
   // rather than the single user    
}); 
```

**这也不是：**

```
SC.get('/tracks', {user_id: '00001', q: 'Black Night'}, function(tracks) {
   // returns tracks from all soundcloud users which contain 'Black Night'
   // rather than the single user    
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:24:15.783

soundcloud api 不能那样工作。

您可以按术语、流派、bpm、日期等搜索所有曲目，也可以获取用户资源（曲目、收藏夹、群组、关注者等）

搜索曲目或任何其他用户资源的最佳方法是获取所有结果，然后在结果中进行搜索。

[在子资源下，您](http://developers.soundcloud.com/docs/api/reference#users)可以找到`/users/{id}/tracks`- 用户曲目列表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:54:12.793

您将首先获得该特定用户的所有歌曲，因为您可以使用您使用的代码。

之后，您需要遍历刚刚检索到的所有歌曲并将tracks[i].genre分配给一个变量（比如说var track_genre）

接下来，检查 track_genre === myGenre（你给函数的参数，用户可以选择）

如果是这种情况，请继续并嵌入小部件

我想主要的收获是您可以使用“SC.get”访问您检索到的歌曲的流派并对其进行过滤，但您不能 SC.get 从特定用户那里获取特定流派。

无论如何，这就是我刚刚解决这个特殊问题的方法；我敢肯定会有更好的解决方案，但是这个很有效...... ;-)

# regex - 在它们之间没有空格的大小字母之间添加

> ID：15009702
> 
> 赞同：0
> 
> 时间：2013-02-21T18:30:45.227
> 
> 标签：regex, replace, notepad++

我有多行文本，有时可以在其中找到这样的文本：“blabla bla bla blaLia lia lia lia”

是否有可能找到这样不被空格分隔的小写和大写字母并`<br />`在它们之间插入以获得这样的文本：“blabla bla bla bla `<br />`Lia lia lia lia”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:37:24.193

我没有安装记事本++，但你可以从内存中使用正则表达式

`([a-z])([A-Z])`

在替换字段中，您应该可以做到`\1<br />\2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:35:44.573

你当然可以

正则表达式：`(?<=[a-z])(?=[A-Z])`

用。。。来代替：`<br />`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T18:38:28.783

你可以试试

```
$string = 'blabla bla bla blaLia lia lia lia';

$string = preg_replace('/[A-Z]/', '<br>$0', $string);

echo $string; 
```

# jenkins - 如果一个或多个_多个作业_都不成功，我怎么能导致多配置詹金斯作业失败？

> ID：15009703
> 
> 赞同：1
> 
> 时间：2013-02-21T18:30:51.530
> 
> 标签：jenkins

我需要运行 jenkins 作业，但如果其他 5 个作业都成功，​​则它必须失败。它需要失败或拒绝运行，除非其所有五个上游作业都具有“成功”状态。

这是一项多配置工作，我需要在主服务器上运行检查，然后再将其分支到多个从服务器。

因此，我需要一些东西，使我能够在触发这个特定的多配置作业时，检查它的五个上游作业是否成功，如果其中一个不成功，则在作业拆分为多个从属之前失败运行。

编辑：要**清楚**，我不是要*触发器*。如果某些其他工作不是绿色的（即他们的最后一次运行成功），我正在寻求一种使工作*失败的方法。*我不能将其作为构建步骤来执行，因为它是一项多配置工作，我宁愿不让不同的配置在运行前自行检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:36:15.467

看看[这个](https://stackoverflow.com/questions/9012310/how-do-i-make-a-jenkins-job-start-after-multiple-simultaneous-upstream-jobs-succ)类似的问题。我还会看一下[脚本触发器插件](https://wiki.jenkins-ci.org/display/JENKINS/ScriptTrigger+Plugin)，它允许您使用脚本轮询您想要的作业，该脚本可以检查它们的状态。

# django - django 管理站点：外键下拉列表

> ID：15009708
> 
> 赞同：0
> 
> 时间：2013-02-21T18:31:11.183
> 
> 标签：django, foreign-keys, admin

例如，对于 django 管理站点，我有一个模型如下：

```
class Book(models.Model):
    ...
    author = models.ForeignKey(Author)
    ... 
```

（为简单起见，我们假设每本书只有一位作者）

因此，当我尝试在管理站点中添加新书时，作者将显示为下拉列表，我可以滚动并选择它所属的作者。问题是当你有很多作者时，很难找到你想要的。所以有人建议使用“raw_id_fields”来解决问题。

我认为它有效。不过，我想要更好的。我想要在同一页面内的搜索框之类的东西，而不是弹出一个页面来这样做。并且可能同时保留下拉列表。

我在想的是我可能需要编写一些自定义模板。我对此进行了一些研究，但我仍然感到困惑。我想知道应该覆盖哪个模板以及应该使用哪种方法。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:34:33.420

有几个用于 Django admin 的预先输入/自动完成插件将取代标准下拉列表。这是一对：[https](https://github.com/artscoop/django-admin-autocomplete) ://github.com/artscoop/django-admin-autocomplete或[https://github.com/sxalexander/django-autocomplete](https://github.com/sxalexander/django-autocomplete)

# python - Django if 语句没有按预期工作

> ID：15009712
> 
> 赞同：2
> 
> 时间：2013-02-21T18:31:20.610
> 
> 标签：python, django

我的 html 文件中有以下内容：

```
{% trans "Result: "%} {{result}} 
```

这将在浏览器上打印出 SUCCESS 一词（因为这就是字符串包含的内容）

但如果我执行以下操作：

```
{% if result == 'SUCCESS' %}
   do something
{% else %} 
   do something else
{% endif %} 
```

我发现 if 语句没有按预期工作。

为什么是这样？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:35:09.773

该`if`声明工作正常。您的问题必须与字符串有关。也许它根本不是一个字符串。

尝试`ifequal`模板标签：

```
{% ifequal result 'SUCCESS' %}
   do something
{% else %} 
   do something else
{% endifequal %} 
```

你可以尝试不同的东西。如果您在视图中分配`result`，您可以在同一个视图中验证它是一个字符串：

```
def my_view(request):
    # ... processing ...
    result = something()

    # Let's make sure it's a string containing 'SUCCESS'
    assert type(result) == str
    assert result == 'SUCCESS' 
```

如果它是上下文处理器，您可以应用相同的逻辑。 [https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#ifequal](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#ifequal)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-26T01:46:38.403

检查此链接： [Django 字符串格式](https://docs.djangoproject.com/en/2.2/ref/templates/builtins/#stringformat)。根据 django 文档，您应该使用这种格式：

```
{% if result|stringformat:"s" == 'SUCCESS' %}
   do something
{% else %} 
   do something else
{% endif %} 
```

或者

```
{% if result|stringformat:"s" in 'SUCCESS' %}
       do something
    {% else %} 
       do something else
    {% endif %} 
```

或者

```
{% ifequal result|stringformat:"s" 'SUCCESS' %}
       do something
    {% else %} 
       do something else
    {% endif %} 
```

这个问题是由于您的变量类型而发生的，您应该在将其与另一个字符串进行比较之前将其更改为字符串。

# android - OpenGL es 2.0 和 16 位通道

> ID：15009715
> 
> 赞同：3
> 
> 时间：2013-02-21T18:31:25.697
> 
> 标签：android, opengl-es-2.0, glsl

可以从 Android 设备上的片段着色器返回 16 位值吗？我进行了这种转换，将 16 位“x”值转换为 4444：

```
vec4 convertToVec4(float x)
{
    int iX = int(65535.0 * x);
    int r = (iX / (0x1000));
    int g = (iX / (0x100)) - r*0x10;
    int b = (iX / (0x10)) - (r*0x100 + g*0x10);
    int a = (iX) - (r*0x1000 + g*0x100 + b*0x10);
    return vec4(float(r)/15.0, float(g)/15.0, float(b)/15.0, float(a)/15.0);
} 
```

并从 4444 取回 16 位“x”：

```
float getFloat(vec4 v)
{
    vec4 col = v * 15.0;
    int sum = int(col.r*4096.0) + int(col.g*256.0) + int(col.b*16.0) + int(col.a);
    return float(sum) / 65535.0;
} 
```

它工作正常，但速度很慢。有没有办法在一个通道中传递 16 位颜色（例如红色或 alpha）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:16:49.637

着色器中有两个功能？如果是这样，你最好用霓虹灯在 cpu 中计算，然后将返回值提供给 GLSL

为什么不使用 32 位通道而不是 16 位？

# d3.js - 解释 Mike Bostock 的 d3.js dragmove 函数

> ID：15009718
> 
> 赞同：1
> 
> 时间：2013-02-21T18:31:39.170
> 
> 标签：d3.js, draggable

我目前正在尝试在我的 d3 脚本中创建可拖动的行为。我在这里学习 Mike Bostock 的例子：http: [//bl.ocks.org/mbostock/1557377](http://bl.ocks.org/mbostock/1557377)

这是有问题的功能：

```
function dragmove(d) {
  d3.select(this)
      .attr("cx", d.x = Math.max(radius, Math.min(width - radius, d3.event.x)))
      .attr("cy", d.y = Math.max(radius, Math.min(height - radius, d3.event.y)));
} 
```

这似乎真的很混乱。

*   为什么使用这个 Math.max 和 Math.min 功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:11:07.897

它被用来限制每个圆圈的拖动范围。

x 被限制在范围内`[radius, width-radius]`

y 被限制在范围内`[radius, height-radius]`

这些都在经过适当转换的 svg`g`元素内，因此 x 和 y 相对于每个单元格。因此，当拖动时，圆圈的边缘将穿过单元格边界。

# javascript - 如何在帧之间保存Javascript变量？

> ID：15009722
> 
> 赞同：6
> 
> 时间：2013-02-21T18:31:54.317
> 
> 标签：javascript, html, variables, frame, parent-child

我在两个不同的框架（frame1 和 frame2）中有一个名为“myvar”的 javascript 变量。我需要将frame1中的myvar设置为frame2中myvar的值。如果没有外部脚本，我该如何做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T18:37:07.213

如果变量在父级中，请使用：

```
window.parent.varName 
```

如果它在另一个框架中，请通过父级，然后到框架：

```
window.parent.frameName.varName 
```

# ruby-on-rails - 删除 Rails 引擎的路由

> ID：15009724
> 
> 赞同：0
> 
> 时间：2013-02-21T18:32:01.193
> 
> 标签：ruby-on-rails, rails-engines

我已经阅读[了 Rails 3 Engines 提供的 Overriding named routes](https://stackoverflow.com/questions/5997527/overriding-named-routes-provided-by-rails-3-engines)并征求了一些新的答案，但是如果您的目标是批量*删除路由，那么所有解决方案都感觉很糟糕。*

[预先设置路由](https://stackoverflow.com/a/14967741/1152759)以覆盖引擎的路由是有效的；但是，当引擎资源丰富时，它会变得很耗时。嵌套资源使复杂性更加复杂。

```
An::Engine.routes.prepend do
  match "/route_goes_here" => redirect("/404")
end 
```

就我而言，我想确信所有的路线都消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:46:11.197

如果您要删除路由，则很有可能您还需要修改其他代码（想想使用路径帮助程序的代码，一旦删除路由就不会定义）。

对于我的 SuperDuper::Engine，我创建了一个 SuperDuper::Configuration 模块。在引擎的 config/routes.rb 中，我根据配置定义路由。定义辅助方法以有条件地呈现您的各种链接/表单/按钮。

通过覆盖配置模块的设置，您可以控制在应用程序启动时如何或是否包含引擎的路由。

```
module SuperDuper
  module Configuration
    def self.documents=(bool)
      @documents = bool
    end

    def self.documents
      @documents.nil? ? true : @documents
    end
  end
end 
```

# ios - 如何有效地使用 NSMutableDictionaries 作为字典的键？

> ID：15009725
> 
> 赞同：1
> 
> 时间：2013-02-21T18:32:01.430
> 
> 标签：ios, objective-c, nsdictionary, nsmutabledictionary

我想将`NSMutableDictionary`实例用作另一个`NSMutableDictionary`.

```
 NSMutableDictionary *stuff = [NSMutableDictionary dictionary];
    NSMutableDictionary *first = [NSMutableDictionary dictionary];
    [stuff setObject:@"A" forKey:first];
    NSLog(@"I GOT %@",[stuff objectForKey:first]); 
```

`@"A"`正如预期的那样，这输出很好。

但是，如果之后我`first`像这样修改对象中的值：

```
[first setObject:@"C" forKey:@"Something"]; 
```

我现在无法得到`@"A"`：

```
NSLog(@"I GOT %@",[stuff objectForKey:first]); 
```

哪个输出`nil`。

我假设这`objectForKey`会将键的内存地址与字典中的现有键进行比较 - 因为尽管更改了字典的内部值（我认为），但这样的内存地址不会改变，我希望它会起作用。

我设法让它使用不同的方法工作 - 通过使用`NSString`s 作为键 - 字符串的值将是内存地址本身，如下所示：

```
 NSMutableDictionary *stuff = [NSMutableDictionary dictionary];
    NSMutableDictionary *first = [NSMutableDictionary dictionary];
    [stuff setObject:@"A" forKey:[NSString stringWithFormat:@"%p",first]];
    [first setObject:@"C" forKey:@"Something"];
    NSLog(@"I GOT %@",[NSString stringWithFormat:@"%p",first]); 
```

哪个有效，打印`@"A"`。

我的问题：

*   为什么我原来的方法不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T18:34:49.770

字典在设置时获取其键的副本（并且该副本是不可变的）。然后，当您更改用于键的对象时，它和副本不再比较相等：在检查键时`NSDictionary`使用`hash`and 。`isEqual:`（集合在这些方法中不使用对象的地址来确定它们是否相等，即使它们相等，副本和原始地址也不同。）因此您无法检索该值。如果您将字典重新更改为原来的样子，则检索将成功。

您想出的字符串技巧是一个很好的解决方法；您也可以`+[NSValue valueWithNonRetainedObject:]`用于此目的。*由于键字典的地址在您对其进行变异*时不会改变，因此您仍然可以获得相同的值以供以后查找。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T18:38:44.040

> 我假设 objectForKey 会将键的内存地址与字典中的现有键进行比较

在多个层面上都错了。

如果通过内存地址比较键，则没有可行的方法来获取键的对象。如果你使用常量字符串`@"Foo"`作为键，并且在运行时，你传递了另一个`NSString`带有内容的实例，`Foo`但它是一个不同的对象（因此它的内存地址完全不同）？

所以不行。`objectForKey:`相反，将消息`isEqual:`发送到键以决定它们是否相等。默认情况下，此方法被实施，`NSObject`它确实比较内存地址，但它在大多数标准集合类中被覆盖，它是明智的（for `NSString`, `NSNumber`, `NSArray`, `NSDictionary`, 等）并且它在语义上更正确，内容相关的比较.

此外，当设置键-对象对时，`NSDicionary`会**复制的键。**这意味着如果使用直接指针比较，**则根本无法获取任何对象，**因为副本是不同的对象，是对象的另一个实际实例，其指针指向其他地方（显然）。（旁注：这对于一些不可变的 Cocoa 类来说并不完全正确，比如`NSString`，其中`copy`本质上是使用 实现的`retain`，但你应该明白这个概念）。

# algorithm - 寻找最小化节点深度总和的生成树

> ID：15009727
> 
> 赞同：8
> 
> 时间：2013-02-21T18:32:14.463
> 
> 标签：algorithm, graph, tree, spanning-tree

我有一个带有未加权边的无向连通图。如何构建生成树（解决方案可能不是唯一的），以使所有节点的深度总和最小化？这显然没有找到最小生成树，因为边缘的“权重”实际上取决于孩子的深度。

我认为，给定一个指定的根，深度总和最小的树可以通过以广度优先顺序贪婪地将所有可以连接的子节点连接到每个节点来形成。因此，我将通过应用相同的过程 N 次来找到总深度最小的树，将 N 个节点中的每一个指定为根，并在 N 个候选者中选择最小的一个。这是一个有效的算法吗？请指出它是否错误，或者是否存在更有效的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T19:29:11.640

> 这是一个有效的算法吗？

是的，算法是正确的。

给定一个`R`要被认为是生成树根的节点，该节点在生成树中的深度至少是图中从到到`N`的最短路径的长度，所以深度之和至少是和最短路径的长度（从）。`R``N``R`

该算法构建的树将每个节点`R`与最短路径之一连接起来，因此深度的总和就是距离的总和，我们在上面看到是一个下限。

作为一个小的优化，如果节点数至少为 3，则不需要将度数为 1 的节点视为树的根。（对于`R`以度为 1 的节点为根的树，考虑相同的图，将其视为以`R`的邻居为根的树。深度`R`增加 1，所有其他节点的深度减少 1，因此深度总和减少由`number_of_nodes - 2`.)

# wpf - 绑定源的 WPF Treeview (MVVM) 实时表示（分组）

> ID：15009729
> 
> 赞同：1
> 
> 时间：2013-02-21T18:32:22.010
> 
> 标签：wpf, mvvm, treeview, wpf-controls, reactiveui

任何人都可以提供 WPF 树视图（绑定到实时源）的任何指针或示例，其中每个根节点及其子节点代表不同类型的绑定源摘要？

*道歉 - 我通常不会问这样开放的“编写一些示例代码”问题，但我对 WPF 相对较新，并且努力在最佳前进方向上站稳脚跟。*

例如;

```
Year of Birth
 [] 80 (2)
 [] 85 (1)
 [] 90 (14)

Course
 [] Engineering (20)
 [] Accountancy (2)

Gender
 [] Male (10)
 [] Female (1) 
```

例如，此树视图将绑定到可观察的学生列表（学生模型将包含他们的 DOB、学习的课程和性别）。[] 表示一个复选框，允许用户根据他们的选择过滤数据源。

附言。我将使用 MVVM 方法并计划使用 ReactiveUI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:37:43.157

让我们从基础开始 - 实际上代表这个视图：

```
IEnumerable<ICategoryTileViewModel> TreeView;

public interface ICategoryTileViewModel
{
    public string CategoryName { get; set; }
    public IEnumerable<IFilterValueTileViewModel> Children { get; set; }
}

public interface IFilterValueTileViewModel
{
    public bool Checked { get; set; }
    public string Description { get; set; }
    public int CurrentCount { get; set; }
} 
```

如何生成 TreeView 取决于您尚未提及的数据源的外观。但是，它几乎肯定会涉及到`GroupBy`运营商

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:02:06.897

这涉及使用 HierarchicalDataTemplate 修改树视图的项目模板，该模板应如下所示：

你的看法

```
<TreeView ItemsSource="{Binding Children, Mode=TwoWay}">
    <TreeView.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding Children, Mode=TwoWay}">
            <StackPanel Orientation="Horizontal" ToolTip="{Binding Description}">
                <!--You can add your checkbox here and remove the image-->
                <Image Source="{Binding Icon}" Height="16" Width="16"/>
                <!--You can add your checkbox here and remove the image-->
                <TextBlock Text="{Binding Name}" Margin="4,0,4,0"/>
            </StackPanel>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

你的虚拟机应该从这个类继承

```
public abstract class VM
{
   public string Name {get; set;}
   public ObservableCollection<VM> Children {get; set;}
} 
```

您的应用程序的数据上下文应该公开指向树视图的项目源的 Children。

您必须将其扩展到您对树视图摘要的想法。

# c - 从结构中删除元素

> ID：15009734
> 
> 赞同：0
> 
> 时间：2013-02-21T18:32:39.340
> 
> 标签：c, struct, pthreads

我有以下代码工作正常，除了当一个元素被删除时，它会从父结构中删除。我需要父母结构（first_name）与所有元素保持不变：

```
struct names_list {
    char username[20];
    struct names_list * next;
};
pthread_mutex_t name_list;

int retu = 0;
char username[20];
struct names_list * curr_name = first_name;
struct names_list * temp_name = NULL;
while( curr_name != NULL )
{
    pthread_mutex_lock(&name_list);
    strncpy(username, curr_name->username, sizeof( username ) - 1 );
    pthread_mutex_unlock(&name_list);
    //validate
    retu = validate_name(sock,buff,sizeof(buff),username,domain);
    switch ( retu )
    {
    case 0:
        pthread_mutex_lock(&name_list);
        if (temp_name == NULL)
             first_name = curr_name->next;  //this is used for removing when current is first record
        else
            temp_name->next = curr_name->next; //this is used for removing current record from mid-list

        free(curr_name);//Freeing should be needed
        curr_name = curr_name->next;
        pthread_mutex_unlock(&name_list);
        break;

    case 1:
        pthread_mutex_lock(&name_list);
        temp_name = curr_name;
        curr_name = curr_name->next;
        pthread_mutex_unlock(&name_list);
        break;
    }

    if (retu == 2)
        break;
}

pthread_mutex_lock(&name_list);
curr_name = first_name;
pthread_mutex_unlock(&name_list); 
```

***如何仅从 curr_name 中删除元素并将原始结构保留在 first_name 中？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:40:22.247

这是您的解决方案。

```
struct names_list {
        char username[20];
        struct names_list * next;
};
pthread_mutex_t name_list;

int retu = 0;
char username[20];
struct names_list * temp_list_head=NULL;
struct names_list * prev_list_node=NULL;
struct names_list * curr_name = first_name;
struct names_list * temp_name = NULL;

//make a copy of your list
while (curr_name){
    struct names_list *tempNode = malloc(sizeof( struct names_list));
    *tempNode = *curr_name;
    if (temp_list_head== NULL)
        temp_list_head = tempNode;
    if (prev_list_node!=NULL)
        prev_list_node->next = tempNode;
    prev_list_node = tempNode;
    curr_name = curr_name->next;
}

curr_name = temp_list_head;

while( curr_name != NULL )
{
    pthread_mutex_lock(&name_list);
    strncpy(username, curr_name->username, sizeof( username ) - 1 );
    pthread_mutex_unlock(&name_list);
    //validate
    retu = validate_name(sock,buff,sizeof(buff),username,domain);
    switch ( retu )
    {
       case 0:
         pthread_mutex_lock(&name_list);
         if (temp_name == NULL)
              temp_list_head = curr_name->next;  //this is used for removing when current is first record
         else
              temp_name->next = curr_name->next; //this is used for removing current record from mid-list
         free(curr_name);//Freeing should be needed
        // curr_name = curr_name->next; //not needed, its removed from the list
         pthread_mutex_unlock(&name_list);
         break;
       case 1:
         pthread_mutex_lock(&name_list);
         temp_name = curr_name;
         curr_name = curr_name->next;
         pthread_mutex_unlock(&name_list);
         break;
    }
    if (retu == 2)
         break;
}
pthread_mutex_lock(&name_list);
curr_name = temp_list_head;
pthread_mutex_unlock(&name_list); 
```

# gnuplot - 有条件地在 Gnuplot 中绘制多个文件

> ID：15009735
> 
> 赞同：0
> 
> 时间：2013-02-21T18:32:47.540
> 
> 标签：gnuplot

这是这个问题的一个分支，尽管有点复杂（或者看起来）。

[使用 Gnuplot 有条件地绘制点颜色](https://stackoverflow.com/questions/14993538/using-gnuplot-to-plot-point-colors-conditionally)

这是交易。我有两个不同的文件。一个文件具有最佳数据点，一个文件具有不可行和非最佳数据点。

这些文件的格式与上一个问题中的格式相同，但我稍后会再次发布它们。

我的目标是用脉冲（可能）在一个 3D 散点图上绘制所有内容。

想象一下，我有一个约束，即 Xvalue > 18、Yvalue < 20 和 Zvalue > 65。典型范围是 X=[0:22]、Y=[0:500]、Z=[0:85]（从最后一个帖子）。

任何不符合此标准的点都是不可行的，必须以灰色绘制。满足此标准但来自 non_optimal_file.dat 的任何点都必须绘制为红色。最后，optimal_data.dat 文件中的点必须绘制为蓝色。不用说，这些文件中的点必须是可行的。

我正在使用@andyras 的解决方案，可以解决问题的第一部分。但是当我将另一个文件合并到同一个图中时，它只是把所有的点都变成了灰色。我重新定义了我的调色板等，但能够获得蓝色和红色的不可行和非最佳点，而不是灰色和红色。我能够用黑色绘制最佳颜色，但我无法使用任何其他颜色。有人可以指导我为这个问题设置调色板吗？

我用这个：

> 设置调色板定义 (0 0 0 1, 1 1 0 0, 2 1 0 0) # (blue, yellow, red)

```
 >splot 'data.dat' using 2:1:3:(isbig($2,$1,$3)) with points pt 8 palette notitle, \
 >      '' using (1e6):1:1 with points pt 8 lc rgb 'blue' title 'Optimal non-pareto', \
 >      '' using (1e6):1:1 with points pt 8 lc rgb 'red' title 'Non-optimal',    
 "./8_77_pareto_data.dat" u 2:1:3:(isbig($2,$1,$3)) w i lt 3 lc rgb 'black' t "Optimal 
 pareto" 
```

数据文件的格式与前一种情况相同。我需要按 2:1:3 的顺序使用前三列作为 X:Y:Z。

样本数据： 最佳点：

```
20      10.078509647223639      50      172
46      10.395137748213685      43      18
34      10.1846571593967        33      18
74      11.054241806019         42      18
34      11.472806910917914      30      92 
```

非最佳/不可行点：

```
20      9.835854999471227       42      35
20      11.901179073913957      44      35
20      12.204287402540535      51      35
255     15.216006917180689      66      172
20      11.651167171495924      52      172
20      11.89284904845455       48      172 
```

我被引导为此创建一个新问题，因为它略有不同。因此分支。抱歉，如果它没有完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:36:26.100

好的，我想我想出了一个解决方案（抱歉耽搁了）。

```
#!/usr/bin/env gnuplot

set terminal png
set output 'test.png'

# cutoffs for non-optimal points
bigx = 16; bigy = 400; bigz = 65
# big value to shift dummy points off of plot
shift = 1e6

# conditional for non-pareto
isbig(x,y,z) = (x > bigx || y > bigy || z > bigz) ? 1 : 0
# conditional for pareto
isbig2(x,y,z) = (x > bigx || y > bigy || z > bigz) ? 0 : 2

set palette defined (0 0.5 0.5 0.5,\
                     1 1.0 0.0 0.0,\
                     2 0.0 0.0 1.0) # (grey, red, blue)

unset colorbox

set xrange [0:20]; set yrange [0:500]; set zrange [0:100]

# plot commands for points use dummy points just to make key
# this is because there are multiple types of points coming from one file
splot 'data.dat' using 2:1:3:(isbig($2,$1,$3)) with points pt 7 palette notitle, \
      'optimal.dat' using 2:1:3:(isbig2($2,$1,$3)) with points pt 7 palette notitle, \
      '' using (shift):(1):(1) with points pt 7 lc rgb 'blue' title 'optimal non-pareto', \
      '' using (shift):(1):(1) with points pt 7 lc rgb '#888888' title 'optimal pareto', \
      '' using (shift):(1):(1) with points pt 7 lc rgb 'red' title 'non-optimal' 
```

![在此处输入图像描述](../Images/f67c82c451ab690d5766f22075fa9e04.png)

我认为这个脚本就像你描述的那样；我主要对最佳与非最佳等感到困惑。我认为您的脚本不起作用的原因是您使用相同的比较器 (isbig(x,y,z)) 来尝试获得三种可能的结果，但是该函数只定义了两个。我刚刚定义了第二个比较器以在第二个数据文件上使用，它似乎工作正常。

# javascript - 如何遍历 javascript 行分隔的字符串，检查分号分隔的第一个值，并连接值相等的行？

> ID：15009744
> 
> 赞同：3
> 
> 时间：2013-02-21T18:33:19.687
> 
> 标签：javascript, jquery, arrays, csv, delimiter

我有一个用作数据源的 CSV。我需要将换行符 ('\n') 上的行拆分为一个名为 'lines' 的变量，并且我需要将每行中的分号 (';') 分隔值拆分为一个名为 'items' 的变量.

我希望能够检查一行上的第一个值，如果它等于输入框中的输入值，我想将这一行（值之间的分号分隔符）添加到一个名为 newData 的新变量中。如果不等于输入框中的值，我想排除它。

我基本上想过滤掉第一个值不等于我正在搜索的值的每一行。

这是数据示例（假设每行后面都有一个换行符（'\n'））：

```
"ID";"Date";"Time";"Status"
"1";"2013.01.01";"10:03 AM";"Active"
"1";"2013.01.05";"07:45 AM";"Active"
"2";"2013.01.03";"9:12 PM";"Active"
"2";"2013.01.11";"6:37 AM";"Inactive"
"1";"2013.01.22";"12:57 PM";"Inactive" 
```

我可以拆分第一个标题行，这不会包含在我正在寻找的结果中。如果我的搜索在 ID 列上并且搜索值为 1，我只想返回 ID 等于 1 的行并希望它与上面的格式匹配（无标题行）。相反，如果搜索值为 7，我将只返回不返回任何行或只返回标题行。

到目前为止，我所能做的就是从我正在导入的数据中拆分行（我发现的所有这些代码，我真的不太熟悉 javascript 或 jQuery）：

```
$.get("myFile.csv", function(data) {
    data = data.replace(/"/g, "");

    var lines = data.split('\n');

    var first = lines.shift().split(';');
});

// HTML Input Box
<input id="search_box" type="text">
<button id="btn_search">Search</button> 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T19:11:04.660

这是一个使用纯 JavaScript 的简单解决方案：

```
// Assuming csvString is the string given in the question
var inputArray = csvString.split('\n');
var filteredArray = inputArray.filter(function (rowString) {
  return (rowString.split(";")[0] === '"1"');
});
var filteredString = filteredArray.join('\n'); 
```

在此结束时，`filteredString`将是：

```
"1";"2013.01.01";"10:03 AM";"Active"
"1";"2013.01.05";"07:45 AM";"Active"
"1";"2013.01.22";"12:57 PM";"Inactive" 
```

有关此解决方案中使用的方法如何工作的更多信息，请参阅：

*   [数组过滤法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)。
*   [数组连接方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)
*   [字符串拆分方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T19:38:10.137

这可能看起来有点夸大其词，但我认为解决此类问题的最佳方法是首先将您的深奥数据格式 (CSV) 转换为 Javascript 可以整体理解的内容（JSON 类型的数据 - 数组和对象）。我无法使用 AJAX（但你已经对那部分进行了排序），所以我举了一个例子，我从 HTML 中的元素中提取 CSV 数据。

### 工作演示

[jsFiddle 示例](http://jsfiddle.net/barney/7vpAJ/)。

### 后台代码

```
function findEntriesWithID(ID){
  var entries = [];

  for(var i = 0; i < csvArray.length; ++i){
    var row = csvArray[i];

    if(row.ID === ID){
      entries.push(row);
    }
  }

  return entries;
}

function csvToArray(csvString){
  // The array we're going to build
  var csvArray   = [];
  // Break it into rows to start
  var csvRows    = csvString.split(/\n/);
  // Take off the first line to get the headers, then split that into an array
  var csvHeaders = csvRows.shift().split(';');

  // Loop through remaining rows
  for(var rowIndex = 0; rowIndex < csvRows.length; ++rowIndex){
    var rowArray  = csvRows[rowIndex].split(';');

    // Create a new row object to store our data.
    var rowObject = csvArray[rowIndex] = {};

    // Then iterate through the remaining properties and use the headers as keys
    for(var propIndex = 0; propIndex < rowArray.length; ++propIndex){
      // Grab the value from the row array we're looping through...
      var propValue =   rowArray[propIndex].replace(/^"|"$/g,'');
      // ...also grab the relevant header (the RegExp in both of these removes quotes)
      var propLabel = csvHeaders[propIndex].replace(/^"|"$/g,'');;

      rowObject[propLabel] = propValue;
    }
  }

  return csvArray;
} 
```

### 解释

1.  `csvToArray`将 CSV 作为字符串并输出一个对象数组，其中第一行（标题）用于确定每个后续行的属性。这是代码的核心，可以在各种情况下应用，以便以可管理的形式获取数据。可能会详细说明，但对于您的用例来说相当可靠。剩下的代码就更容易理解了：

2.  `findEntriesWithID`获取给定 ID 并返回具有该 ID 属性的所有对象（以前的行），并将它们作为新数组返回。

3.  顶部的 jQuery 函数绑定用户交互，然后在窗格中将结果作为字符串化 JSON 输出。使用这些长度将 CSV 字符串转换为深奥的对象只是为了将其转换回具有不同语法的字符串似乎很愚蠢，但优点是您可以将函数的这一部分交换为您真正想要的任何内容做你的结果。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T19:03:05.713

这里有一些代码可以做到这一点，假设你知道如何让数据像在 lines 变量中一样（你说你做了）。您可以按任何字段和任何值进行搜索。

[这段代码的jsFiddle](http://jsfiddle.net/8YANp/14/)

```
$(document).ready(function() {

    var headers = '"ID";"Date";"Time";"Status"';
    var lines = [
    '"1";"2013.01.01";"10:03 AM";"Active"',
    '"1";"2013.01.05";"07:45 AM";"Active"',
    '"2";"2013.01.03";"9:12 PM";"Active"',
    '"2";"2013.01.11";"6:37 AM";"Inactive"',
    '"1";"2013.01.22";"12:57 PM";"Inactive"'
        ];

    // these contain the name of the field you want to search in
    //  as defined by your header and the value to search for.
    var searchField = 'ID';
    var searchForThisValue = 1; // this would be a parameter in your code
    var endResult =[]; // this is the stored result
    var fieldIndex = -1;

    $.each(headers.split(';'), function(index) {
        if( this.replace(/["']/g, "") == searchField ) {
            fieldIndex = index;
        }
    });

    $.each(lines, function() {
        var fields = this.split(';'); // split up by semicolon

        // strip the quotes around around the numbers
        if(fields[fieldIndex].replace(/["']/g, "") == searchForThisValue) {
            endResult.push(this);
        } 
    });

    // do whatever you want with your result, here I have just thrown 
    // them into an element with the id of 'blah'
    $.each(endResult, function() {
        $('#blah').append(this + '<br/>');
    });
}); 
```

# java - Spring @Inject 服务类返回空指针异常

> ID：15009745
> 
> 赞同：0
> 
> 时间：2013-02-21T18:33:20.593
> 
> 标签：java, spring, jsf-2

我有一个`Converter`类，我使用了以下内容，以便我可以`@Inject`用来访问我的服务类。

```
@Named("myMB")
@ViewAccessScoped 
```

但是，当我尝试使用

```
myservice.getCategories(); 
```

我正在`null pointer exception`这条线上。这可能是什么原因？我使用了相同的服务方法`ManagedBean`来填充`selectOneMenu`，但是当在 Converter 类中使用时，给了我异常。

**转换器类**

```
@FacesConverter("categoryConverter")
@Named("myMB")
@ViewAccessScoped
public class CategoryConverter implements Converter {

@Inject
CategoryService myservice;

    @Override
        public Object getAsObject(FacesContext facesContext, UIComponent component,
                String value) {
            System.out.println("reached in converter "+value);
            try {

                    List<Category> cat = myservice.getCategories();
                    for (Category cat : category) {
                        if (cat.getCategoryCode() == value) {
                            return cat;
                        }
                    }
                }

            } catch (Exception e) {
                System.out.println("exception from getAsObject  ");
                e.printStackTrace();
            }
            return null;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:37:44.957

如果您将其用作`@FacesConverter`实例而不是实例，则可能会发生这种`@Named`情况。对`@Inject`不起作用`@FacesConverter`。摆脱`@FacesConverter`以避免将来的混淆并将转换器引用为`converter="#{categoryConverter}"`（使用`@Named`）而不是`converter="categoryConverter"`（使用`@FacesConverter`）。

请注意，我假设 Spring 部分已正确配置，否则它将仍然是`null`. 我不使用 Spring，所以如果它在 CDI 托管 bean 而不是 Spring 托管 bean 中工作，我无法判断它是否在头顶上工作。我发现您将 CDI 和 Spring 混合在一起只是令人惊讶和有趣，而 Spring 旨在作为 CDI/EJB 的竞争对手/替代品。

# android - 包含片段的 ActionBar 选项卡在重新显示时崩溃

> ID：15009747
> 
> 赞同：0
> 
> 时间：2013-02-21T18:33:23.447
> 
> 标签：android, android-actionbar

我有一个使用带有选项卡的 ActionBar 的 SherlockFragmentActivity。其中一个选项卡是一个 SherlockFragment，它有一个包含片段的布局文件。首次显示该选项卡时，一切都很好。如果我切换到另一个选项卡，然后返回到该选项卡，我会崩溃：

`02-21 10:25:10.077: E/AndroidRuntime(3916): Caused by: java.lang.IllegalArgumentException: Binary XML file line #29: Duplicate id 0x7f06006e, tag null, or parent id 0x0 with another fragment for com.nexapps.myq.fragments.TitleInfo 02-21 10:25:10.077: E/AndroidRuntime(3916): at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:275) 02-21 10:25:10.077: E/AndroidRuntime(3916): at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676) 02-21 10:25:10.077: E/AndroidRuntime(3916): ... 21 more`

我的主要活动：

```
public class TitleActivity extends SherlockFragmentActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {       
        ...
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        ...
        Tab tab = actionBar.newTab().setText(R.string.details);
        tab.setTabListener(new TabListener<TitleDetailsFragment>(this, "details", TitleDetailsFragment.class));
        actionBar.addTab(tab);         
    }

} 
```

标签监听器：公共类 TabListener 实现 com.actionbarsherlock.app.ActionBar.TabListener { private Fragment mFragment; 私人最终活动 mActivity；私有最终字符串 mTag；私有最终类 mClass；

```
 public TabListener(Activity activity, String tag, Class<T> cls) {
      mActivity = activity;
      mTag = tag;
      mClass = cls;
  }

  public TabListener(Activity activity, String tag, Class<T> clz, Fragment fragment) {
      mActivity = activity;
      mTag = tag;
      mClass = clz;
      mFragment = fragment;
  }

  public void onTabSelected(Tab tab, FragmentTransaction ft) {
      if (mFragment == null) {
          mFragment = Fragment.instantiate(mActivity, mClass.getName());
          ft.add(android.R.id.content, mFragment, mTag);
      } else {
          ft.attach(mFragment);
      }

      TabChangeInterface tci = (TabChangeInterface) mActivity;
      if (tci != null) {
        tci.tabSelect(mTag);
      }
  }

  public void onTabUnselected(Tab tab, FragmentTransaction ft) {
      if (mFragment != null) {
          ft.detach(mFragment);
      }
  }

  public void onTabReselected(Tab tab, FragmentTransaction ft) {
  } 
```

}

我的标签片段：

```
public class TitleDetailsFragment extends SherlockFragment {
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.activity_title, container, false);
        return view;
    }
} 
```

R.layout.activity_title：

```
<fragment
   android:id="@+id/info"
   android:name="foo.TitleInfo"
   ... 
```

我可以删除 id （这解决了问题），但这些有助于状态更改。关于如何保留 ID 并解决问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:42:54.843

您不能删除嵌入在 xml 布局中的片段。为此，您应该更改您的 xml 以包含 a `<FrameLayout android:id="fragment_container" .../>`，然后通过调用以编程方式替换框架中的片段：

```
MyFrag newFragment = new MyFrag();
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.replace(R.id.fragment_container,newFragment,"myFragName")
.addToBackStack("myFragName")//optional
.commit(); 
```

假设您正在使用支持包，否则您只需更改`getSupportFragmentManager()`为`getFragmentManager()`

您可以在此处阅读有关使用片段的更多信息：http: [//developer.android.com/training/basics/fragments/index.html](http://developer.android.com/training/basics/fragments/index.html)

编辑：更新以包含基于新信息的代码

R.layout.activity_title：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Title" >

    <FrameLayout
        android:id="@+id/fragment_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</LinearLayout> 
```

TitleActivity.class:

```
public class TitleActivity extends SherlockFragmentActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {       
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_title);        
         ...
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        ...
        Tab tab = actionBar.newTab().setText(R.string.details);
        tab.setTabListener(new TabListener<TitleDetailsFragment>(this, "details", TitleDetailsFragment.class));
        actionBar.addTab(tab);         
    }

} 
```

R.layout.details_fragment：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:id="@+id/textView1"
       android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:textSize="10sp"
        android:textStyle="italic"
        android:text="Details are here!"/>
</RelativeLayout> 
```

标签片段：

```
public class TitleDetailsFragment extends SherlockFragment {

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
       return inflater.inflate(R.layout.details_fragment, container, false);
    }
} 
```

您可以保持与上面的代码相同的 TabListener。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T00:27:58.733

所以这与选项卡内容是一个片段的事实有关，而片段不能包含片段。因此，请在此处改用视图或使用事务手动删除/添加。

# python - 如何强制窗口在 GTK+ 中保持特定比例？

> ID：15009749
> 
> 赞同：1
> 
> 时间：2013-02-21T18:33:28.860
> 
> 标签：python, gtk

我有一个`GtkWindow`我想调整大小，但限制在它的比例上。实现这一目标的最简单方法是什么？我应该在每个 上手动调整它的大小`configure-event`，还是有更简单的方法来做到这一点？

我的小部件层次结构如下所示：

```
GtkWindow
  GtkBox
    GtkToolbar
    GtkBox
      GtkAspectFrame 
```

* * *

从我得到的答案中，我尝试了类似的方法：

```
 gh = Gdk.Geometry()
    gh.min_aspect = 0.5
    gh.max_axpect = 0.5
    w.set_geometry_hints(None, gh, Gdk.WindowHints.ASPECT) 
```

但是，我仍然可以根据需要调整窗口大小。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T01:15:31.880

正如另一个答案所暗示的，您可以使用[gtk_window_set_geometry_hints()](http://developer.gnome.org/gtk3/stable/GtkWindow.html#gtk-window-set-geometry-hints)。文档说：

> **此函数设置有关用户如何调整窗口大小的提示。您可以设置最小和最大尺寸**；允许调整大小增量（例如，对于 xterm，您只能按字符大小调整大小）；**纵横比**；和更多。

该函数的原型如下：

```
void gtk_window_set_geometry_hints (GtkWindow *window,
                                    GtkWidget *geometry_widget,
                                    GdkGeometry *geometry,
                                    GdkWindowHints geom_mask); 
```

[您将使用GdkGeometry](http://developer.gnome.org/gdk3/stable/gdk3-Windows.html#GdkGeometry)数据类型指定最小和最大宽度和高度，该数据类型是具有以下指定字段的结构：

```
struct GdkGeometry {
  gint min_width;
  gint min_height;
  gint max_width;
  gint max_height;
  gint base_width;
  gint base_height;
  gint width_inc;
  gint height_inc;
  gdouble min_aspect;
  gdouble max_aspect;
  GdkGravity win_gravity;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T01:04:14.647

使用 gtk_window_set_geometry_hints()。您需要使用 GdkGeometry 结构中的 min_aspect 和 max_aspect 字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-03T15:07:10.327

您需要更改`max_axpect`为`max_aspect`.

那应该有帮助。

# git - 合并本地文件而不是推送到 git

> ID：15009753
> 
> 赞同：2
> 
> 时间：2013-02-21T18:33:44.247
> 
> 标签：git, merge, git-merge, local-files

所以，我的机器上有一个克隆的 repo。（文件夹 A）。而且我有另一个文件夹，其中更新了我的文件，但它不是 git repo。（文件夹 B）。我想将文件夹 B 中的所有文件和文件夹与文件夹 A（这是我的克隆仓库）合并。其余的很简单，`git add`只需`git commit`和`git push`。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:48:10.510

我这样做

```
aa=/path/to/folder-a
bb=/path/to/folder-b

cd $aa
git rm -qr .
cp -r $bb/. .
git add -A
git commit
git push 
```

[**参考**](http://github.com/svnpenn/a/blob/master/scripts/jekyll-publish.sh)

# javascript - 如何在 Mongoose 中排除字段被“更新插入”？

> ID：15009755
> 
> 赞同：1
> 
> 时间：2013-02-21T18:33:49.327
> 
> 标签：javascript, node.js, mongoose, upsert

```
var UserData = function(){
    var self = this;
    this.schema = Schema({
        userID: String,
        firstName: String,
        lastName: String,
        ...
        //many other fields.
        ...
        isActive: {type: "Boolean", default: true}
    },  { collection: 'UserData' });

    this.model = db.model('UserData', self.schema);

    this.upsert = function(object){
        //some logic
        self.model.update({userID: object.userID}, object, {upsert: true}, function(err){...});
    };
} 
```

此代码工作正常，除了**isActive**将在 upsert 期间被覆盖。

我想实现这样的逻辑：

1.  对于新记录，默认**isActive**为 true。
2.  当做 upsert 时，保持**isActive**不变。

如何做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T14:18:02.967

将文档转换为对象并删除您不想编写的属性。然后插入对象。

```
this.upsert = function (doc) {
    var object = doc.toObject();
    delete object.isActive;

    self.model.update({userID: object.userID}, object, {upsert: true}, function(err){...});
}; 
```

# apache-flex - 缩放 Flex 对象会导致旋转动作异常

> ID：15009757
> 
> 赞同：3
> 
> 时间：2013-02-21T18:33:56.500
> 
> 标签：apache-flex, actionscript, rotation, scale

当我在 Flex 容器中有一个对象（绝对定位）并将其比例值设置得非常低，然后旋转它，随着比例的减小，旋转变得“更不稳定”。我包括重现问题的代码。您可以点击“向上箭头”以缩小对象（“向下”以放大）和“向上”以增加对象的大小，以便您仍然可以看到它。缩小后，您可以使用“左”和“右”来旋转它。请注意，当对象未按比例缩小时，它会干净地旋转，但如果您将对象按比例缩小（同时增加对象的大小以便您仍然可以看到它），则旋转会变得不稳定。有任何想法吗？

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                   xmlns:s="library://ns.adobe.com/flex/spark" 
                   xmlns:mx="library://ns.adobe.com/flex/mx" xmlns:test="com.test.*"
                   resize="onResize()" addedToStage="onStart()" removedFromStage="onEnd()">
<fx:Script>
    <![CDATA[
        [Bindable]
        private var _rotation:Number = 0;

        [Bindable]
        private var _scale:Number = 1;

        [Bindable]
        private var _blockSize:Number = 100;

        protected function onStart():void {
            stage.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);
        }

        protected function onEnd():void {
            stage.removeEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);
        }

        protected function onResize():void {
            if (Layer) {
                Layer.x = width/2
                Layer.y = height/2;
            }
        }

        protected function onKeyDown(event:KeyboardEvent):void {
            if (event.keyCode == Keyboard.LEFT) {
                Layer.rotation += -1;
            }
            if (event.keyCode == Keyboard.RIGHT) {
                Layer.rotation += 1;
            }
            if (event.keyCode == Keyboard.UP) {
                Layer.scaleX = Layer.scaleY = (Layer.scaleX / 2);
            }
            if (event.keyCode == Keyboard.DOWN) {
                Layer.scaleX = Layer.scaleY = (Layer.scaleX * 2);
            }
            if (event.keyCode == Keyboard.PAGE_UP) {
                _blockSize *=2;
            }
            if (event.keyCode == Keyboard.PAGE_DOWN) {
                _blockSize /=2;
            }
            this._rotation = Layer.rotation;
            this._scale = Layer.scaleX;
        }
    ]]>
</fx:Script>
<s:SkinnableContainer id="Layer">
    <test:RotatedComponent width="{_blockSize}" height="{_blockSize}"/>
</s:SkinnableContainer>
<s:Label x="10" y="10" text="Rotation: {_rotation}"/>
<s:Label x="10" y="30" text="Scale: {_scale}"/>
<s:Label x="10" y="50" text="Block: {_blockSize}"/>
</s:WindowedApplication> 
```

RotatedComponent.mxml 的代码

```
package com.test {

import mx.core.UIComponent;

public class RotatedComponent extends UIComponent {

    public function RotatedComponent() {
        super();
    }

    override public function set width(value:Number):void {
        super.width = value;
        this.x = - (width/2);
    }

    override public function set height(value:Number):void {
        super.height = value;
        this.y = - (height/2);
    }

    override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void {
        graphics.lineStyle(2, 0x333333);
        graphics.beginFill(0x660000);
        graphics.drawRect(0, 0, unscaledWidth, unscaledHeight);
        graphics.endFill();
        graphics.lineStyle(2, 0xffffff);
        graphics.drawCircle(unscaledWidth/2, unscaledHeight/2, 5);
    }
}
} 
```

谢谢！德里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:04:10.643

我认为这可以正式称为错误。如果我计算转换的矩阵而不是设置 component.scale() 和 component.rotation() 结果是正确的。我最好的猜测是 Flex 设置器下面的代码中的某处存在舍入错误（我单步执行了所有 Flex 代码，没有发生任何奇怪的事情）。所以简短的回答：

代替：

```
component.scaleX = component.scaleY = _scale;
component.rotation = _rotation; 
```

利用

```
var matrix:Matrix = new Matrix();
matrix.scale(_scale, _scale);
matrix.rotate(_rotation * Math.PI / 180);
component.transform.matrix = matrix; 
```

希望有帮助！德里克

# java - 移动列表 元素到列表末尾

> ID：15009758
> 
> 赞同：2
> 
> 时间：2013-02-21T18:34:00.617
> 
> 标签：java, list, arraylist

我有一个 ArrayList，我想将其前三个元素移到列表的末尾。我使用'set'，但它没有按预期工作：

```
List<Integer> integers = new ArrayList<Integer>();

for(Integer i : integers) {
    int index = integers.indexOf(i);
    if(index==0 || index==1 || index==2) {
        integers.set(i, integers.size()-1);
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-21T18:41:29.013

```
List<Integer> integers = new ArrayList<Integer>(); 
```

采用：`Collections.rotate(integers, -3);`

供参考： [http ://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#rotate%28java.util.List,%20int%29](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#rotate%28java.util.List,%20int%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T18:35:22.683

适当的使用`subList()`和`addAll()`方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:55:18.853

```
for(int index=0;index<3;index++){
    integers.add(integers.get(0));
    integers.remove(0);
} 
```

我认为应该这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T19:21:00.943

set 方法至少按照[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#set%28int,%20E%29)中的描述工作。

> integers.set(i, integers.size()-1);

通过在列表的位置 i 设置值 integers.size()-1 来更改列表:)

我认为 Collections.rotate 是最好的解决方案，但您也可以将列表的第一个元素添加到其末尾，然后删除第一个元素并重复 3 次：

```
for(int i = 0; i < 3; i++){
    integers.add(integers.get(0));
    integers.remove(0);
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-21T18:39:43.083

作为第一个答案，表格将是：

```
List<Integer> auxList = originalList.subList(0, 3);
for(int i =0; i < 3; i++) {originalList.remove(i);}
originalList.addAll(auxList); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-21T18:45:19.613

为什么不使用 add() 将它们放在最后，然后删除旧元素？异常是由于在修改列表后使用了迭代器。答案是使用迭代器保存这三个项目，然后在迭代器之外修改列表。

```
List<Integer> integers = new ArrayList<Integer>();
Integer keep[] = new Integer[3];

for(Integer i : integers) {
    int index = integers.indexOf(i);
    if(index==0 || index==1 || index==2) {
        keep[i] = i;  // save the first three
    }
}

// add the first three to the end of the list
integers.add(keep[0]);
integers.add(keep[1]);
integers.add(keep[2]);

// remove the previous first three
integers.remove(0);
integers.remove(1);      
integers.remove(2); 
```

我想知道您是否需要`integers.remove(0)`根据第 0 个元素是被回收还是留空来做 3 次。

# command-line - 从命令行打开另一个 IntelliJ IDEA 项目

> ID：15009759
> 
> 赞同：23
> 
> 时间：2013-02-21T18:34:00.687
> 
> 标签：command-line, intellij-idea

所以我正在创建一个可以从命令行自动打开 IntelliJ IDEA 项目 (.ipr) 的程序。我使用以下命令成功打开了它：

```
Path\To\idea.exe Path\To\ProjectFile\project.ipr 
```

但是，如果项目当前已在 IntelliJ IDEA 中打开，则不会在新窗口中打开新项目。它可以通过执行 File -> Open... 在新窗口中打开一个新项目但是有没有办法通过命令提示符参数（可能是某种标志或其他东西？）来做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-01-28T11:54:43.023

您可以在 IntelliJ IDEA 中创建命令行启动器：Tools->Create command line Launcher

这个答案可能会有所帮助：[https ://stackoverflow.com/a/41592203/4191683](https://stackoverflow.com/a/41592203/4191683)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-06-04T20:02:57.063

如果其他人遇到这个问题。只需在 Tools -> Create command line Launcher 中重新创建 shell 命令。一个新的启动器在更新后工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-12-22T09:13:32.523

首先将 IntelliJ 的路径添加到 bin 到环境变量中。

C:\Users\XXXXX.XXXXX\AppData\Local\JetBrains\IntelliJ IDEA 社区版 2019.2\bin

然后打开命令行并输入 `idea64 <path_to_folder_where_the_project/code_lies>`

这将打开具有给定路径的 IntelliJ。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-25T23:14:52.677

从“工具”菜单（重新）创建`idea`shell 命令适用于 IntelliJ 2019.x。只需确保在（重新）创建 shell 命令后打开一个新的终端会话。然后您可以从终端打开一个或多个项目。

```
idea <my_project>
idea <my_other_project> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-17T09:31:41.317

如果您看到此消息 [![在此处输入图像描述](../Images/5ea76cd8ac31bff4d4bfe35ba0161555.png)](https://i.stack.imgur.com/M1jOP.png)

对于 Intellij 2019.+，请检查此答案。它使用 Jetbrains 工具箱。您只需要在 Jetbrains 工具箱 [https://stackoverflow.com/a/56050914](https://stackoverflow.com/a/56050914)`Generate shell scripts`中的选项中设置路径`/usr/local/bin/`

然后只是运行`idea .` 或`pycharm .`等等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-14T04:23:03.367

我正在使用较旧的 Intellij IDEA 2016。对我有用的是指示启动器使用 python2 而不是默认 python，对我来说是 python3。

所以改成`#!/usr/bin/env python`in`#!/usr/bin/env python2`对`/usr/local/bin/idea`我有用。

# html - 使用负边距左技巧修复小窗口的中心对齐

> ID：15009763
> 
> 赞同：0
> 
> 时间：2013-02-21T18:34:20.177
> 
> 标签：html, css

我有一个 div 以这种方式居中对齐：

```
<div id="container" style="position:absolute; top:0px; left:50%; margin-left:-500px; width:1000px;"></div> 
```

正如这个解决方案[试图在屏幕中水平和垂直居中 div](https://stackoverflow.com/questions/8811427/trying-to-center-div-horizontally-and-vertically-in-screen)建议的那样。

问题在于，如果客户端窗口的宽度（在 FF 15.0.1 中尝试过）小于 1000px，水平滚动条将不允许显示 div 的左侧。

有没有纯 html/css 的方法来解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:16:27.377

唔。您不能调整客户端窗口的大小。
您可以做的一件事是避免左滚动将父 div 的宽度设置为`1000px`

```
 <div id="parent" style="min-width:1000px;"> 
      <div id="container" style="position:absolute; top:0px; left:50%;
        margin-left:-500px; width:1000px;"></div>
  </div> 
```

**注意：**
您可能需要将 html 和 body 标签的宽度设置为`min-width=100%`

**更新：**

```
 <html style="min-width: 100%; background-color:Gray;">
 <body style="min-width: 100%; background-color:White;">
 <div id="parent" style="min-width: 1000px; position:relative;">
    <div id="container" style="position: absolute; top: 0px; left: 50%; margin-left: -500px;
        width: 1000px; border: 1px solid red; height: 10px;">
        1 2 3 4 5
    </div>
  </div>
 </body>
 </html> 
```

我错过`position:relative`了描述。此代码正在运行。

# entity-framework - 实体框架 TransactionScope 不回滚

> ID：15009764
> 
> 赞同：0
> 
> 时间：2013-02-21T18:34:21.270
> 
> 标签：entity-framework, transactionscope

我有一张`Publication`桌子和一张`Receipt`桌子。当我发布数据时，我会在`Publication`表格中跟踪它。当我的测试客户端从代理收到该发布时，我会在`Receipt`表中对其进行跟踪。

为了便于报告，我的`Publication`表上有一个非规范化列。`ReceiptCount`

当我的测试消费者收到发布时，将执行以下代码：

```
try
{
    using (var context = new PublicationVerifierEntities())
    {
        using (var transaction = new TransactionScope())
        {
            if (request.PublicationGuid == Guid.Empty)
            {
                context.AddToUnknownPublications(new UnknownPublication
                {
                    DateReceived = request.DateReceived,
                    Publication = request.Publication,
                });
            }
            else
            {
                // look up the publication by Guid
                var publication = context.Publications.FirstOrDefault(m => m.PublicationGuid.Equals(request.PublicationGuid));

                if (publication == null)
                {
                    throw new Exception("UpdatePublicationReceipt, provided PublicationGuid not found in database.");
                }
                else
                {
                    context.AddToUnknownPublications(new UnknownPublication
                    {
                        DateReceived = request.DateReceived,
                        Publication = request.Publication,
                    });

                    context.AddToReceipts(new Receipt
                    {
                        DateReceived = request.DateReceived,
                        Publication = publication,
                    });

                    publication.ReceiptCount++;
                }
            }

            context.SaveChanges(System.Data.Objects.SaveOptions.None);
            transaction.Complete();
            context.AcceptAllChanges();
        }
    }
}
catch (Exception ex)
{
    _logger.Error("Unable to update publication record receipt.", ex);
    throw;
} 
```

问题是如果插入`Receipt`失败，`Publication.ReceiptCount`则永远不会回滚。只是删除`Receipt`表来测试它，尽管抛出了列，但该`ReceiptCount`列继续成功更新。`System.Data.UpdateException`我在 SQL Profiler 中看到以下查询执行，但没有关于回滚：

```
exec sp_executesql N'update [dbo].[Publication]
set [ReceiptCount] = @0
where ([PublicationId] = @1)
',N'@0 int,@1 int',@0=10,@1=3414639

exec sp_executesql N'insert [dbo].[Receipt]([PublicationId], [DateInserted], [DateReceived])
values (@0, null, @1)
select [ReceiptId]
from [dbo].[Receipt]
where @@ROWCOUNT > 0 and [ReceiptId] = scope_identity()',N'@0 int,@1 datetime',@0=3414639,@1='2013-02-21 18:12:47:513' 
```

SO上的另一个答案让我相信我做的一切都是正确的：[如何在实体框架中回滚事务](https://stackoverflow.com/questions/1070040/how-to-rollback-a-transaction-in-entity-framework)，所以......

**我在这里想念什么？**

到目前为止，我已经尝试围绕上下文的创建和 SaveChanges() 的每个重载来包装 TransactionScope using 语句。没有任何改变。

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:24:52.863

拉起我的评论，因为它们原来是答案：

您的观察意味着您没有生成交易（您正在使用每个语句的隐式交易）。找出 TScope 没有采取的原因。尝试将其放在新实体之外。请注意，如果 TScope 不接受，则不会生成警告。它只是默默地什么都不做。

你的 conn str 包含`Enlist=false`吗？

# java - 与 Spring MVC 2.5 的 Tiles 集成

> ID：15009766
> 
> 赞同：0
> 
> 时间：2013-02-21T18:34:22.867
> 
> 标签：java, spring, spring-mvc, tiles2, apache-tiles

我正在尝试将 Tiles 集成到我们当前基于 Spring MVC (Spring 2.5) 的应用程序中，并且在大多数情况下它在初始页面上运行良好。我们有近 300 个 jsp 页面和一个新的网站部分，我们正在通过 Tiles 实现。我知道我需要`ResourceBundleViewResolver` 与`view.properties`文件一起使用以混合不同的视图技术（JSTL/JSP 和 Tiles）。
看到这种方法，使用属性文件似乎有点过头了，我的意思是我必须特别提到这个文件中的 300 左右的 JSP 返回以及 Tiles 返回。
我想知道是否有某种基于通配符的方法，例如：
*.html = 返回所有 JSP，*.ti = 返回所有图块
任何帮助实现类似的东西都非常感谢。附上我目前的配置：

```
 <bean id="viewResolver" class="org.springframework.web.servlet.view.ResourceBundleViewResolver">
        <property name="basename" value="views"/>
  </bean> 
```

视图属性：

```
tilehome.class=org.springframework.web.servlet.view.tiles2.TilesView
tilehome.url=tilehome
login.class=org.springframework.web.servlet.view.JstlView
login.url=/WEB-INF/jsp/login.jsp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:50:43.300

您不需要在 view.properties 中提及 jsp 页面

相反，还将 InternalResourceViewResolver 定义为后备视图解析器（具有比现有视图解析器更高的顺序）

然后会发生的情况是，当在您的 views.properties 中找不到视图（即您想要解析为 jsps 的视图）时，它将使用 InternalResourceViewResolver 来解析视图。

# grails - Grails 资源插件并在每个环境中使用不同的资源

> ID：15009767
> 
> 赞同：3
> 
> 时间：2013-02-21T18:34:31.913
> 
> 标签：grails, resources, minify

在我当前的 grails 项目中，我们正在使用 UglifyJS 缩小 JavaScript 文件，并且还在开发环境中使用这些缩小的资源。正如您所想象的那样，在缩小版本上进行调试有点痛苦，修复未缩小版本中的错误，缩小并再次调试。因此，我想在开发环境中包含未缩小的版本，在生产环境中包含缩小的版本。所以我尝试调整 ApplicationResources.groovy 以获得以下方案：

```
environments {
    development {
        modules = {
            core {
                resource url:"js/core.js"
            }
        }
    }
    production {
        modules = {
            core {
                resource url:"js/core.min.js"
            }
        }
    }
} 
```

这不知何故不起作用，并引发异常，例如

```
Caused by GrailsTagException: Error executing tag <r:layoutResources>: No module found with name [core] 
```

我在这里做错了什么？

更新：

我不确定我是否理解正确。我尝试了以下也不起作用：

更新：

添加 id 可以解决问题:)

应用资源.groovy

```
modules = {
    core {
        resource id: 'core', url:"js/core.min.js"
    }
} 
```

开发资源.groovy

```
environment {
    development {
        modules = {
            overrides {
                core {
                    resource id: 'core', url:"js/core.js"
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T06:05:32.373

尝试在单独的文件中定义 dev 和 prod 资源模块。像 StaticResources.groovy 和 ProductionResources.groovy。

> 每个 Resources 文件最终都会为 Grails 提供一个“模块”闭包，然后 Grails 将每个文件提供的闭包中的定义组合起来以生成最终配置。

这是[完整的 nabble 讨论](http://grails.1312388.n4.nabble.com/Environment-Configuration-in-Resources-Files-is-that-possible-Not-working-anyway-td3985335.html)。

# scala - FOR LOOP 多台发电机

> ID：15009769
> 
> 赞同：2
> 
> 时间：2013-02-21T18:34:38.220
> 
> 标签：scala

理解以下代码如何工作的问题。我是 Scala 的新手，现在已经学习了 2 周的语言。

```
for (i <- 1 to 3; j <- 1 to 3) print((10 * i + j) + " ") 
```

它打印`11 12 13 21 22 23 31 32 33`。它是否依次分配每个值，即

```
i = 1

j = 0 
```

还是每次循环时都会分配值，即

```
i = 1

j = 1 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T18:39:19.407

它只是 for 的嵌套循环`j`。因此，对于 的每个分配值，都会迭代的`i`所有值。`j`

```
for (i <- 1 to 3) {
  for (j <- 1 to 3) {
    print((10 * i + j) + " ")
  }
} 
```

因为`for`循环扩展为`foreach`，所以您的代码也相当于：

```
(1 to 3).foreach { i =>
  (1 to 3).foreach { j =>
    print((10 * i + j) + " ")
  }
} 
```

也许在这种形式下，更容易看到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:51:12.730

循环是从 1 到 3

```
print((10 * i + j) + " ") 
```

相当于

```
val tmp = (10*i)+j //* is higher than +
print(tmp + " ") 
```

您的代码结果：

```
对于 i=1，j=1 --> 11
    i=1' j=2 --> 12
    . .
    . .
    i=2, j=1 --> 21
    . .
    i=2, j=3 --> 23
    . .
    i=3, j=3 --> 33

```

# php - 将数组与数据库匹配

> ID：15009770
> 
> 赞同：0
> 
> 时间：2013-02-21T18:34:43.657
> 
> 标签：php, arrays

我有一个数组（61），其中包含可能的用户名，我想根据数据库条目验证每个用户名。我正在使用以下代码：

```
foreach(profileName("Dev","Db") as $k => $val){
    $db->query("SELECT profile_name FROM eb_user_account WHERE profile_name = '$val'");
    if($db->numRows() == 0){
        echo $val ." [match found at key: {$k}]";
        break;
    }
} 
```

`profileName("Dev","Db")`函数保存数组。此代码运行良好且流畅，并且在不发生匹配的地方完全中断。我只是好奇是否有更快更好的方法来执行此任务。请建议我。

感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:39:09.563

您可以使用 MySQL 的`IN()`子句，例如

```
SELECT * FROM myTable WHERE profile_name IN ('foo', 'bar') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:44:51.757

您正在寻找 mySQL`IN`运算符和 PHP[`implode()`](http://php.net/manual/en/function.implode.php)函数的组合：

```
$query = sprintf(
    'SELECT profile_name FROM eb_user_account WHERE profile_name IN (%s)',
    implode(',', profileName("Dev","Db"))
); 
```

值得注意的是，如果您使用参数化查询，则无法传递任意长度的参数列表。例如：

```
$stmt = $dbh->prepare('SELECT * FROM table WHERE col IN (?)');
$rs = $stmt->execute(array(implode(',', $myarray))); 
```

将失败。`IN`语句中的参数数量必须与占位符的数量相匹配。例如：

```
$stmt = $dbh->prepare('SELECT * FROM table WHERE col IN (?,?,?)');
$rs = $stmt->execute(array(1,2,3)); 
```

转念一想...

```
$myarray = profileName("Dev","Db");
$placeholders = array_fill(0, count($myarray), '?');
$query = sprintf(
    'SELECT profile_name FROM eb_user_account WHERE profile_name IN (%s)',
    implode(',', $placeholders);
);
$stmt = $dbh->prepare($query);
$rs = $stmt->execute($myarray); 
```

应该正确参数化所有内容。

# xslt - 每个循环的 XSL 只抓取特定索引的数据

> ID：15009777
> 
> 赞同：0
> 
> 时间：2013-02-21T18:35:01.167
> 
> 标签：xslt, for-loop

如何让 xsl 使用 for each 循环来抓取项目，但只能在所选内容中达到某个索引。我尝试做的是获取一个由 web 服务控制的数字，并将 out_data_info 中的项目返回到该索引。我遇到的问题是它只返回该索引处的数据，而不是该索引之前的所有数据。

```
<xsl:variable name="count" select=".//out_rec_count/text()"/>
<xsl:for-each select="//out_data_info[number($count)]">
<xsl:apply-templates select="." />
</xsl:for-each> 
```

有没有办法在使用 for each 循环时做我想做的事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:46:23.730

```
<xsl:for-each select="//out_data_info[position() &lt;= $count]"> 
```

将选择作为其父元素的第一个、第二个`out_data_info`、...- th子元素的所有元素。这可能完全正确，也可能不完全正确，具体取决于源 XML 的结构（如果您想要一个准确的答案，您必须编辑问题以包含输入示例） - 您可能会发现您需要`$count``out_data_info`

```
<xsl:for-each select="/descendant::out_data_info[position() &lt;= $count]"> 
```

相反，它将选择整个文档中第一次`$count`出现的`out_data_info`，而不管它们在其父元素中的什么位置。

（这是边缘情况之一，其中`descendant::`和`//`含义略有不同）

# macos - AudioFilePlayer 音频单元沙箱是否兼容？

> ID：15009778
> 
> 赞同：7
> 
> 时间：2013-02-21T18:35:02.080
> 
> 标签：macos, cocoa, core-audio, sandbox, audiounit

我在 OS X 10.8 上使用启用了应用沙盒的 AudioFilePlayer 音频单元时遇到了问题。我有一个只有两个节点的 AUGraph，由一个连接到 DefaultOutput 单元的 AudioFilePlayer 单元组成。目标（现在）是简单地播放单个音频文件。如果未启用沙盒，一切正常。如果我启用沙盒，则`AUGraphOpen()`返回错误 -3000 (invalidComponentID)。如果我从 AUGraph 中删除文件播放器节点，错误就会消失，这至少意味着音频文件播放器导致了问题。

这是我用来设置文件播放器节点的代码：

```
OSStatus AddFileToGraph(AUGraph graph, NSURL *fileURL, AudioFileInfo *outFileInfo, AUNode *outFilePlayerNode)
{
    OSStatus error = noErr;

    if ((error = AudioFileOpenURL((__bridge CFURLRef)fileURL, kAudioFileReadPermission, 0, &outFileInfo->inputFile))) {
        NSLog(@"Could not open audio file at %@ (%ld)", fileURL, (long)error);
        return error;
    }

    // Get the audio data format from the file
    UInt32 propSize = sizeof(outFileInfo->inputFormat);
    if ((error = AudioFileGetProperty(outFileInfo->inputFile, kAudioFilePropertyDataFormat, &propSize, &outFileInfo->inputFormat))) {
        NSLog(@"Couldn't get format of input file %@", fileURL);
        return error;
    }

    // Add AUAudioFilePlayer node
    AudioComponentDescription fileplayercd = {0};
    fileplayercd.componentType = kAudioUnitType_Generator;
    fileplayercd.componentSubType = kAudioUnitSubType_AudioFilePlayer;
    fileplayercd.componentManufacturer = kAudioUnitManufacturer_Apple;
    fileplayercd.componentFlags = kAudioComponentFlag_SandboxSafe;
    if ((error = AUGraphAddNode(graph, &fileplayercd, outFilePlayerNode))) {
        NSLog(@"AUAudioFilePlayer node not found (%ld)", (long)error);
        return error;
    }

    return error;
} 
```

请注意，AudioFileOpenURL() 调用中的 fileURL 是从安全范围的书签数据中获取的 URL，并且是指向已被用户拖入应用程序的文件的 URL。

如果我设置了 com.apple.security.temporary-exception.audio-unit-host 沙盒权利，当调用 AUGraphOpen() 时，系统会提示用户降低安全设置，并假设他们接受，再次播放正常（沙盒被禁用）。

因此，这表明 AudioFilePlayer 单元不是沙盒安全/兼容的。这是真的？很难相信 Apple 不会将 CoreAudio API 中如此重要的部分修复为与沙盒兼容。另请注意，我`kAudioComponentFlag_SandboxSafe`在传递给 AUGraphAddNode 的描述中指定了标志，并且该调用不会失败。此外，我只能在 CoreAudio 邮件列表的[这篇文章](http://lists.apple.com/archives/coreaudio-api/2012/Jul/msg00064.html)中找到一个关于 AudioFilePlayer 在线沙盒安全的参考，但它没有收到任何回复。也许我犯了一些其他微妙的错误，碰巧会导致启用沙盒的问题，但不是在它关闭时（我是 Core Audio 的新手）？

# drupal - drupal ajax 表单更改

> ID：15009781
> 
> 赞同：0
> 
> 时间：2013-02-21T18:35:10.417
> 
> 标签：drupal, drupal-7, drupal-ajax

我正在开发一个drupal 7模块，我希望在页面上打印信息（MENU_LOCAL_TASK node/%node/something），使用ajax过滤器。我创建了一个表单并添加了 2 个复选框，默认情况下有 1 个，其他没有。我想根据选中的复选框向用户显示信息。1 在表格第 1 行显示，2 在表格第 2 行显示。如果其中一些已关闭，则该表行已关闭。我是否提到过，我想在不提交和重新加载的情况下解决它，只需要 ajax。我在两个“复选框”中添加了以下内容`'ajax' => array('callback' => 'my_module_callback')` 。这是剩下的代码，简化了。

```
function my_module_callback($form, $form_state) {
    $data = array();
    $nid = 1;
    if ($form_state['values']['checkbox1']) { 
        $data += load_data($nid, "checkbox1");
    }
    if ($form_state['values']['checkbox1']) { 
        $data += load_data($nid, "checkbox2");
    }
    $commands[] = ajax_command_html("#here", my_module_table($data));
    return array('#type' => 'ajax', '#commands' => $commands);
}

function my_module_table($data){
    //do some stuff with the data in a foreach
    return theme("my_module_fancy_table",array("data" => $data));
}

function theme_my_module_fancy_table($data){ //registered with my_module_theme()
    // putting html into $output in a foreach
    return $output;
}

function my_module_page_callback_from_menu_function($nid){
    $output = drupal_render(drupal_get_form('my_module_custom_ajax_form'));
    $output .= "adding other stuffs including div#here";
    return $output;
} 
```

首先，这是执行此操作的“好方法”，因为我有点失去信心:) 第二个问题，如何在页面加载时显示数据，现在需要更改一个复选框以查看一些信息。

感谢并为简短的描述感到抱歉:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:44:52.883

你不应该真的在回调中进行处理，它应该在表单构建函数中完成。回调通常只返回表单中已更改的部分。另外，我认为在这种情况下不需要设置 commands[] ，因为返回部分表单将自动替换由“包装器”设置的内容。

```
function my_module_form($form, $form_state){
  $data = array();
  $nid = 1;
  if ($form_state['values']['checkbox1']) { 
    $data += load_data($nid, "checkbox1");
  }
  if ($form_state['values']['checkbox2']) { 
    $data += load_data($nid, "checkbox2");
  }

  $form = array();
  $form['checkbox1'] = array(
    '#type' => 'checkbox',
    '#ajax' => array(
      'callback' => 'my_module_callback'
      'wrapper' => 'mydata',
      'event' => 'change',
    ),
  );
  $form['checkbox2'] = array(
    '#type' => 'checkbox',
    '#ajax' => array(
      'callback' => 'my_module_callback'
      'wrapper' => 'mydata',
      'event' => 'change',
    ),
  );
  $form['mydata'] = array(
    '#prefix' => '<div id="mydata">',
    '#suffix' => '</div>',
    '#markup' => my_module_table($data),
  );
  return $form;
}

function my_module_callback($form, $form_state){
  // $form_state['rebuild'] = true; may have to be set because the form has not been submitted and wont be rebuilt...I think, I cant remember for sure.
  return $form['mydata'];
} 
```

要在页面加载时显示数据，您只需在表单构建函数中更改设置数据的逻辑即可。另外，仅供参考，有一个专门针对 drupal 的堆栈站点：http: [//drupal.stackexchange.com](http://drupal.stackexchange.com)

# jquery - 在 jQuery 对话框中导航

> ID：15009782
> 
> 赞同：0
> 
> 时间：2013-02-21T18:35:17.830
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jquery-dialog

我有一个对话框，里面有一个按钮。单击按钮时，我希望在同一个对话框中呈现操作（替换当前内容）。那可能吗？

现在，我有这段代码，但它不会在对话框中呈现操作，它只是重定向整个页面。

```
<button style="float: right" class="awe-btn" onclick="location.href='@Url.Action("Edit", "Agenda", new { paramid = Model.ID })'">
    @:Modify
</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:54:00.387

您需要进行 ajax 调用并在成功时替换对话框的内部内容。您不能以当前的方式执行此操作，因为这会导致整个页面刷新。对话框只是一个定位在屏幕顶部显示的 div，而不是单独的 iFrame 或任何东西。

添加一个名为 data-action 的数据属性以及要执行的操作，然后执行以下操作：

```
$('.awe-btn').click(function(e) {
   var url  = $(e.target).data('action');
   $.ajax({
      url: url,
      type: 'GET'
   }).done(function(html) {
       $('.my-modal').html(html);
   });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T18:06:31.883

基思的回答是对的。我只是提供一个更完整的例子。

这是**控制器**：

```
public class HomeController : Controller
    {
        public ActionResult Index()
        {
            return View();
        }

        public JsonResult WhatTimeIsIt()
        {
            return Json(DateTime.Now.ToString(), JsonRequestBehavior.AllowGet);
        }

    } 
```

和**观点**：

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <script src="~/Scripts/jquery-1.9.1.min.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <script src="~/Scripts/bootstrap-modal.js"></script>
    <script type="text/javascript">
        function showModal() {
            $('#TheModal').modal('show');
        }

        function whatTimeIsIt() {
            $.ajax({
                url: '/home/whattimeisit',
                type: 'GET'
            }).done(function (data) {
                showCurrentTime(data);
            });
        }

        function showCurrentTime(data) {
            $('#TheModal .modal-header h3').html('Current time and date from the server');
            $('#TheModal .modal-body').html(data);
        }
    </script>
</head>
<body>
    <button class="btn btn-primary" onclick="showModal(); return false;">Show the modal window!</button>

    <div class="modal hide" id="TheModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>This is your modal</h3>
    </div>
    <div class="modal-body">
        Modal content goes here.
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" onclick="whatTimeIsIt(); return false;">What time is it?</button>
    </div>
</div>
</body>
</html> 
```

注意事件必须如何由 javascript 处理。这是一个带有 DOM 操作的 AJAX 调用。

# rest - 球拍中的其余参数，零或一参数程序

> ID：15009783
> 
> 赞同：2
> 
> 时间：2013-02-21T18:35:18.023
> 
> 标签：rest, lisp, arguments, scheme, racket

我有这个程序：

```
(define count-calls
  (let ((count 0))
    (lambda char  
           (cond ((null? char) 
                  (begin(set! count (+ 1 count))
                        count))
                 ((eq? char 'how-many-calls) count)
                 ((eq? char 'reset) (set! count 0)))))) 
```

当调用 (count-calls) 时，它确实加 1，但是当我调用 (count-calls 'how-many-calls) 时，它不能按预期工作。我发现如果你定义 (lambda (char) 而不是 (lambda char) 则找到 (eq? ...) 部分，但对于 (lambda char) 它似乎无法识别 char。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:58:36.163

You have a couple of coding errors, this should fix them:

```
(define count-calls
  (let ((count 0))
    (lambda char
      (cond ((null? char) 
             (set! count (+ 1 count))
             count)
            ((eq? (car char) 'how-many-calls)
             count)
            ((eq? (car char) 'reset)
             (set! count 0)))))) 
```

In particular, notice that:

*   If a `lambda`'s parameters are *not* surrounded by parenthesis (as is the case with `char`), then the procedure expects a *list* of arguments with variable size, possibly empty
*   With that in mind, it's clear why you need to do `(car char)` for extracting a parameter, if it was provided
*   It's not necessary to use a `begin` after a condition in `cond`, it's implicit

Use the procedure like this:

```
(count-calls)
=> 1
(count-calls 'how-many-calls)
=> 1
(count-calls 'reset)
=> 
(count-calls 'how-many-calls)
=> 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T18:49:56.557

如果您在 lambda 参数周围没有括号，那么您将获得列表中的所有参数。因此，您的代码正在将“多少调用”与列表进行比较。

```
Welcome to DrRacket, version 5.3.3.5 [3m].
Language: racket [custom]; memory limit: 8192 MB.
> ((lambda args (displayln args)) "a")
(a)
> ((lambda args (displayln args)) "a" "b")
(a b)
> ((lambda (args) (displayln args)) "a")
a
> ((lambda (args) (displayln args)) "a" "b")
#<procedure>: arity mismatch;
 the expected number of arguments does not match the given number
  expected: 1
  given: 2
  arguments...:
   "a"
   "b" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T19:02:56.853

扩展stchang的答案，这是解决此问题的一种方法：

```
(define count-calls
  (let ((count 0))
    (case-lambda
      (() (set! count (+ 1 count)) count)
      ((char) (cond
                ((eq? char 'how-many-calls) count)
                ((eq? char 'reset ) (set! count 0) 'reset)
                (else 'wot?)))))) 
```

# java - ServletRequest 中的会话变量

> ID：15009784
> 
> 赞同：15
> 
> 时间：2013-02-21T18:35:18.657
> 
> 标签：java, servlets, servlet-filters

我需要通过过滤器访问会话变量。我什至不知道这是否可能。在实践中，问题是实现的`doFilter`方法类型`javax.Servlet.Filter`是`ServletRequest`，而 HttpServlet 继承类，doPost 方法参数`request`是 HttpServletRequest。

1.  我可以在过滤器中访问 ServletRequest 中的会话吗？
2.  我应该这样做吗？
3.  你能给我推荐什么？

谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-21T18:42:55.253

只需将获得的内容投射[`ServletRequest`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html)到[`HttpServletRequest`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html).

```
@Override
public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
    HttpServletRequest request = (HttpServletRequest) req;
    HttpSession session = request.getSession(false);
    // ...
} 
```

### 也可以看看：

*   [我们的 servlet-filters wiki 页面](https://stackoverflow.com/tags/servlet-filters/info)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:41:42.383

你当然可以。`ServletRequest`允许您访问包含属性的会话。您可以在过滤器、servlet、jsp、会话侦听器中随时查看、添加、删除和修改属性。这种技术非常有用，尤其适用于同一会话中不同组件之间的通信。

# sql - 查询中的一些错误

> ID：15009787
> 
> 赞同：0
> 
> 时间：2013-02-21T18:35:24.733
> 
> 标签：sql, sql-server

我是 MS SQL-Server 的新手。我对此有疑问。
我有一个查询：

```
with by_segment as (
SELECT  
    Road.Road_ID,
    GEOMETRY::STGeomFromText(Track.Track.STAsText(),4326) as the_geom,
    row_number() over (partition by road_id order by Segment_Id) as [rn],
    count(*) over (partition by road_id) as [c]
FROM dbo.Road
LEFT JOIN Segment_ID  ON Road.Road_ID = Segment_ID.Road_ID
LEFT JOIN Track ON Segment_ID.Segment_ID = Track.Segment_ID
),
roads_by_segment as (
select 
   road_id,
   the_geom,
   [rn],
   [c]
from by_segment
where [rn] = 1

union all

select 
   [a].road_id,
   [a].the_geom.STUnion([b].the_geom),
   [b].[rn],
   [b].[c]
from by_segment as [a]
inner join roads_by_segment as [b]
   on [a].segment_id = b.[segment_id]
   and [a].[rn] = [b].[rn]+1
)

select * from roads_by_segment where [rn] = [c] 
```

但是会出错（我尝试从俄语翻译）：

```
Message 209, level 16, state 1, line 5
Ambiguous column name "road_id".
Message 209, level 16, state 1, line 5
Ambiguous column name "Segment_Id".
Message209, level 16, state 1, line 6
Ambiguous column name "road_id". 
```

第 5 行和第 6 行：

```
 row_number() over (partition by road_id order by Segment_Id) as [rn],
    count(*) over (partition by road_id) as [c] 
```

这里有什么问题？

**更新**

我从`bluefeet`答案中做所有事情并得到新的错误：

```
on [a].segment_id = b.[segment_id] 
```

它说：

```
Message 207, level 16, state 1, line 29
Ambiguous column name "segment_id".
Message 207, level 16, state 1, line 29
Ambiguous column name "segment_id". 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:36:32.343

您必须以`road_id`它来自的表格开头。每当您在多个表中具有相同名称的列时，您需要在列前加上表名：

```
with by_segment as (
SELECT  
    Road.Road_ID,
    GEOMETRY::STGeomFromText(Track.Track.STAsText(),4326) as the_geom,
    row_number() over (partition by Road.road_id order by Segment_ID.Segment_Id) as [rn],
    count(*) over (partition by Road.road_id) as [c]
FROM dbo.Road
LEFT JOIN Segment_ID  ON Road.Road_ID = Segment_ID.Road_ID
LEFT JOIN Track ON Segment_ID.Segment_ID = Track.Segment_ID
), 
```

*注意：我使用过`Road.`，但您可能需要使用`Segment_ID`*

编辑，对于第二个错误，您需要在 中包含`segment_id`并且`roads_by_segment`您似乎没有`Segment_id`在`by_segment`CTE 中选择 ：

```
with by_segment as 
(
    SELECT  
        Segment_ID.Segment_ID, 
        Road.Road_ID,
        GEOMETRY::STGeomFromText(Track.Track.STAsText(),4326) as the_geom,
        row_number() over (partition by Road.road_id order by Segment_ID.Segment_Id) as [rn],
        count(*) over (partition by Road.road_id) as [c]
    FROM dbo.Road
    LEFT JOIN Segment_ID  ON Road.Road_ID = Segment_ID.Road_ID
    LEFT JOIN Track ON Segment_ID.Segment_ID = Track.Segment_ID
),
roads_by_segment as 
(
    select 
       road_id,
       the_geom,
       [rn],
       [c],
       [segment_id]
    from by_segment
    where [rn] = 1
    union all
    select 
       [a].road_id,
       [a].the_geom.STUnion([b].the_geom),
       [b].[rn],
       [b].[c],
       [b].[segment_id]
    from by_segment as [a]
    inner join roads_by_segment as [b]
       on [a].segment_id = b.[segment_id]
       and [a].[rn] = [b].[rn]+1
)

select * from roads_by_segment where [rn] = [c] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:36:52.553

如果列存在于多个表中，则需要用表名限定列。在 row_number 函数中指定 Road.Road_ID 或 Segment_ID.Road_ID。由于您正在执行 LEFT JOIN，因此您想使用 Road.Road_ID。Segment_ID.Segment_ID 或 Track.Segment_ID 也是如此

# javascript - 在jquery mobile中将复选框添加到可折叠列表标题

> ID：15009790
> 
> 赞同：2
> 
> 时间：2013-02-21T18:35:29.350
> 
> 标签：javascript, jquery, css, jquery-mobile, mobile

我在 jQuery Mobile 网站上遇到了一个问题。我正在开发一个带有可折叠列表 ( [http://dev.sreejesh.in/jqmobile/inbox.html](http://dev.sreejesh.in/jqmobile/inbox.html) ) 的 jQuery 移动网站。

我的客户需要在标题内有一个复选框，以便用户可以在不打开列表的情况下检查列表。我试着把它放进去，但效果不好。复选框出现，但不可点击。我在谷歌搜索了很多，但找不到解决方案。希望你们能帮助我。请.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:50:10.583

这应该有效。如果您有多个复选框，请确保为您的复选框提供一个唯一的 ID。不要忘记复选框标签。

```
<div id="collapsibleSetWrapper" data-role="collapsible-set">
    <div data-role="collapsible" data-collapsed="true">
        <h3>
           <span>some title</span>
           <input class="mycheckbox" type="checkbox" id="uniqueID"/>
           <label for="uniqueID">&nbsp;</label>
        </h3>
        <div id="mycontent">
              <p>this is the content</p>
        </div>
    </div>
</div>

<script>    
$('#collapsibleSetWrapper .mycheckbox').checkboxradio({
    create: function(event,ui){
        var checkbox = $(event.target);
        var clickTarget = $(event.target).parent();
        $(clickTarget).click(function(e){
            if($(checkbox).is(':checked')){
                $(checkbox).attr("checked",false).checkboxradio("refresh");
                // select all the nested checkboxes here
            }
            else{
                $(checkbox).attr("checked",true).checkboxradio("refresh");
                // unselect all the nested checkboxes here
            }
            e.preventDefault();
            return false;
        });
    }
})
</script> 
```

# javascript - 检索我的所有状态

> ID：15009794
> 
> 赞同：0
> 
> 时间：2013-02-21T18:35:37.127
> 
> 标签：javascript, facebook-graph-api

我正在尝试使用图形 api 检索我所有的 facebook 状态。

```
FB.api('/me/statuses?fields=message', function(response) {
            plot(response)
}); 
```

此代码只能检索我发布的最后 25 个状态。所以我尝试了这个：

```
FB.api('/me/statuses?fields=message&limit=100000', function(response) {
            plot(response)
}); 
```

而且我仍然得到一个有限的数组（只有 100 个元素，而我知道我一生中发布了 100 多个）。

我在哪里可以找到有关此的一些解释？文档似乎没有谈论这个限制：如何`limit`工作？

我应该“翻页”并获得另一个 100 个状态的数组（然后重复直到我完成）还是只需要一个电话就可以得到它们？

# oracle - JDeveloper 10g 重命名表单中的列并调整其大小

> ID：15009797
> 
> 赞同：0
> 
> 时间：2013-02-21T18:35:58.530
> 
> 标签：oracle, oracle-adf, jdeveloper

在使用表单时，我在 JDeveloper 10g 中遇到了一个奇怪的问题： **我无法选择单个列并重命名它**。实际上，除了整个表单之外，我无法在表单上选择任何元素。所以，我的问题是如何选择表单上的单个元素，例如列“Ime”，以及如何重命名它？

![在 for 中选择单列](../Images/df6c7f7767374657a8aaffa94042f572.png)

另一个问题是如何有效地调整表单上的字段大小和位置？例如，即使我在这里选择它并调整它的大小：

![调整字段的大小和重新定位](../Images/9ecff576fb2ad7a1a0b38cc8ea330d37.png)

当我开始表单时它会恢复吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:47:34.620

另请查看您是否有权在屏幕截图左下方的结构窗格窗口中访问要更改的项目。

# ruby-on-rails - 仅针对 Rails 中的一个文件进行实时资产编译

> ID：15009799
> 
> 赞同：1
> 
> 时间：2013-02-21T18:36:05.637
> 
> 标签：ruby-on-rails, ruby, assets, precompile

有**config.assets.compile=true**参数可以启用所谓的“实时编译”。我需要 Rails 在实时模式下针对每个请求编译一个特定的资产（sample.css.scss.erb），但其余资产仍应进行预编译。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:49:06.817

选项 1 - 放入`sample.css.scss.erb`不同的路径`config.assets.manifest (default="public/assets")`并添加它`javascript_include_tag`

选项 2 - 从 config.assets.precompile 中删除它

```
config.assets.precompile -= %w( sample.css.scss.erb ) 
```

确保你清理然后预编译来测试它。

我没有测试任何一个选项，请告诉我们是否对您有用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-02-25T12:50:23.927

当 css 被 .css.erb 文件预处理时，需要对文件进行实时编译。这意味着动态编译css。

例如：允许用户设置颜色并希望有条件地使用“实时编译”

在这种情况下，我会建议动态渲染 /users/:id/styles.css.erb 而不是实时编译。

原因可能有数百万用户，并且在生产环境中使用 Ec2 实例会花费更多。这就是为什么我会建议以下解决方案：

首先在 上定义您的自定义操作`UsersController`：

```
# config/routes.rb
match '/users/:id/styles' => 'users#styles', :as => :user_styles 
```

链接到布局中的“样式表”：

```
# app/views/layouts/application.html.erb
= stylesheet_link_tag 'application', user_styles_path(current_user, :format => 'css') 
```

在控制器中定义操作。您可以在此处执行任何您想要检索用户首选项的操作：

```
# app/controllers/users_controller.rb
class UsersController < ApplicationController
  def styles
    @colors = User.find(params[:id]).colors
  end
end 
```

该操作将自动呈现此视图：

```
# app/views/users/styles.css.scss.erb
$background-color: <%= @colors[:background] %>;

body {
  background-color: $background-color;
} 
```

欢迎更多的想法和建议。

# python - 具有可配置验证的 WTForms 动态表单

> ID：15009800
> 
> 赞同：1
> 
> 时间：2013-02-21T18:36:05.933
> 
> 标签：python, flask, wtforms, flask-wtforms

我正在构建一个允许管理员用户向数据库添加“问题”的系统。每种类型的问题都有一个与之关联的 WTForms 对象。为了显示一个页面，我遍历所有问题并为每个问题生成一个由表单域组成的表单。

```
class TextQuestionForm(Form):
  value = TextField("Value", validators=[])

class Question(db.Model):
  # sqlAlchemy model using single table inheritance
  def field_name(self):
    return "question_%s" % self.id

class TextQuestion(Question):
  form = TextQuestionForm

def get_form(page_id):
  questions = Question.query.filter(Question.page_id == page_id).all()

  class F(Form):
    pass

  for q in questions:
    setattr(F, q.field_name(), FormField(q.form))

  return F() 
```

这适用于给定问题类型的所有验证都相同的简单情况，但我需要为 的每个实例提供可配置的验证选项，例如`Question`，假设我的 Question 模型已扩展：

```
class Question(db.Model):
  # ... other fields
  min_length = db.Column(db.Integer, nullable=True)
  max_length = db.Column(db.Integer, nullable=True) 
```

考虑到每个问题的最小/最大长度不同（或缺失），将 WTForms 长度验证器添加到`value`我的表单字段中的字段的适当方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:53:09.673

要完全控制验证，您可以创建自定义字段继承`TextField` 并重新定义`pre_validate`方法

```
def pre_validate(self, form=None) 
```

在那个函数里面你可以做所有你想要的检查

[http://wtforms.simplecodes.com/docs/0.6/fields.html#wtforms.fields.Field.pre_validate](http://wtforms.simplecodes.com/docs/0.6/fields.html#wtforms.fields.Field.pre_validate)

# backbone.js - 设置主干集合的默认选项

> ID：15009804
> 
> 赞同：3
> 
> 时间：2013-02-21T18:36:15.977
> 
> 标签：backbone.js, backbone.js-collections

我有一个这样的骨干集合：

```
var ThreadCollection = Backbone.Collection.extend({
  url: '/api/rest/thread/getList'
});
var myCollection = new ThreadCollection(); 
```

然后我使用数据对象从服务器获取它以附加查询参数（所以在这种情况下它出现'/api/rest/thread/getList?userId=487343'）

```
myCollection.fetch({
  data: {
    userId: 487343
  }
}) 
```

我可能想使用其他参数来代替 userId（groupId、orgId 等），但理想情况下，我会在初始化时定义数据参数，然后在不指定的情况下运行 fetch()。像这样的东西：

```
var myCollection = new ThreadCollection({
  data: {
    userId: 487343
  }
});

myCollection.fetch() 
```

但它不起作用。有谁知道是否有办法做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T18:51:52.940

`fetch`一种方法是在您的集合上定义一个自定义方法，该方法调用`fetch`具有一些可覆盖默认值的超级方法：

```
var ThreadCollection = Backbone.Collection.extend({
    url: '/api/rest/thread/getList',
    fetch: function(options) {
        return Backbone.Collection.prototype.fetch.call(this, _.extend({
            data: {
                userId: 48743
            }
        }, options));
    }
});

var myCollection = new ThreadCollection();

myCollection.fetch(); 
```

# scala - “Scala 编程”一书中第 699 页的 Actor 示例引发了太多参数错误

> ID：15009806
> 
> 赞同：2
> 
> 时间：2013-02-21T18:36:22.823
> 
> 标签：scala

书中的代码：

```
object NameResolver extends Actor{
    import java.net.{InetAddress, UnknownHostException}

    def act(){
        react{
            case(name:String, actor:Actor) =>
                actor ! getIp(name)
                act()
            case "EXIT" => 
                println("Name resolver is exiting.")//quit
            case msg =>
                println("Unhandled message: "+msg)
                act()
        }
    }

    def getIp(name:String):Option[InetAddress]={
        try{
            Some(InetAddress.getByName(name))
        } catch {
            case _ : UnknownHostException => None
        }
    }

} 
```

口译行：

```
NameResolver ! ("http://stackoverflow.com", self) 
```

但我得到了错误：

```
scala> NameResolver ! ("http://stackoverflow.com", self)
<console>:8: error: too many arguments for method !: (msg: Any)Unit
              NameResolver ! ("http://stackoverflow.com", self) 
```

根据书，它应该工作。我从书中复制的代码中是否存在会导致异常的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T19:13:53.233

您正在尝试传递一个元组，但编译器认为您正在`!`使用两个参数进行调用。因为有时可以省略括号，所以有时元组需要额外的括号，例如 in `((1, 2))`。这可能会引起混淆。尝试`NameResolver !(("http://stackoverflow.com", self))`

# google-chrome - 带有角度的 CSS 渐变背景的 Chrome 问题

> ID：15009807
> 
> 赞同：0
> 
> 时间：2013-02-21T18:36:23.530
> 
> 标签：google-chrome, css

我在使用 100% 宽度/高度 div 的 CSS 渐变背景时遇到问题。这只是 Chrome 中的一个问题。我在 div 顶部有一些内容，当我将鼠标悬停在该 div 中的链接上时，渐变背景以奇怪的方式中断，并且根本不显示角度（只是显示为水平渐变）。这是我的CSS：

```
.landing{
display: block;
width: 100%;
min-height: 100%;
background: #f6e25a;
background: -moz-linear-gradient(-80deg,#f6e25a 0%,#f6e25a 35%,#f8e979 35.01%,#f6e25a 100%);
background: -webkit-gradient(linear, left top, right bottom, color-stop(0%,#f6e25a), color-stop(35%,#f6e25a), color-stop(35.1%,#f8e979), color-stop(100%,#f6e25a));
background: -webkit-linear-gradient(-80deg,#f6e25a 0%,#f6e25a 35%,#f8e979 35.01%,#f6e25a 100%);
background: -o-linear-gradient(-80deg,#f6e25a 0%,#f6e25a 35%,#f8e979 35.01%,#f6e25a 100%);
background: -ms-linear-gradient(-80deg,#f6e25a 0%,#f6e25a 35%,#f8e979 35.01%,#f6e25a 100%);
background: linear-gradient(150deg,#f6e25a 0%,#f6e25a 35%,#f8e979 35.01%,#f6e25a 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f6e25a', endColorstr='#f6e25a',GradientType=1 );
} 
```

这是它在 Chrome 中的样子：

![图片](../Images/17a877ea0a64996ff3cbeef1c937b7c5.png)

任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:58:14.910

这是 Chrome 中的一个已知错误。它于 2012 年 11 月首次被注意到，目前是优先级 2，因此可能不会在下一个版本中修复。[在此处](https://code.google.com/p/chromium/issues/detail?id=162538)查看 Chromium 开发论坛

如果你稍微改变你的角度，它应该会再次起作用。尝试使用 -78deg 而不是 -80deg

# java - 防止 Java 框架的多个实例

> ID：15009816
> 
> 赞同：0
> 
> 时间：2013-02-21T18:36:55.553
> 
> 标签：java, swing, jframe, visibility

我正在处理的应用程序涉及根据用户选择从 JPanel 创建的框架。如果选择两次相同的项目，我试图阻止用户启动同一框架的多个实例。这是我为此目的而写的条件。

主类：

```
public void showPieGraphFrame()
{
    final PieGraph gPieGraph = new PieGraph("Traffic Type Distribution", counterOne, counterTwo);
    gPieGraph.pack();
    RefineryUtilities.positionFrameOnScreen(gPieGraph, 0.35, 0.03);

    if(!gPieGraph.isVisible())  
    {
    gPieGraph.setVisible(true);
    }
} 
```

我想防止多个实例的 PieGraph 类：

```
public class PieGraph extends ApplicationFrame implements ActionListener {

    public PieGraph(final String title) {
        super(title);

        // create a menubar
        setJMenuBar(createMenuBar());

        // create a dataset...
        final PieDataset dataset = trafficTypeDataset();

        // create the chart...
        final JFreeChart chart = createChart(dataset);

        // add the chart to a panel...
        final ChartPanel chartPanel = new ChartPanel(chart);
        chartPanel.setPreferredSize(new java.awt.Dimension(width, height));
        setContentPane(chartPanel);
    }

    private JFreeChart createChart(final PieDataset dataset) {

        final JFreeChart chart = ChartFactory.createPieChart("Test Chart", dataset, false, false, false);

        final PiePlot plot = (PiePlot) chart.getPlot();

        return chart;
    } 
```

但是，它不起作用，您仍然可以多次启动同一帧。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T18:38:50.837

> 我怎样才能防止这种情况？

将框架交换为模态框`JDialog`或`JOptionPane`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T18:45:39.060

使用单例模式作为框架，例如：

```
public class MainFrame extends JFrame() {

 private static MainFrame instance;

 public static MainFrame getInstance(//parameters) {
   if (instance == null){
    instance = new MainFrame(//parameters)
 }
    return instance;
 }

 private MainFrame(//parameters){}

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T18:39:40.340

这很简单，不允许您调用`setVisible`两次。`JFame`只有当您有两个对象时才会出现两个窗口。做你`JFrame`的`Singleton`.
希望我能帮上忙。

# node.js - What are the way programmers are using to deploy its node.js app in ubuntu?

> ID：15009818
> 
> 赞同：0
> 
> 时间：2013-02-21T18:36:58.677
> 
> 标签：node.js, deployment, ubuntu-12.04, production-environment

What is the recommended way to deploy Node.js on Ubuntu 12.04 in a production environment?

I saw [this ppa](https://launchpad.net/~chris-lea/+archive/node.js/) but I don't know if is well maintained or if it will and if is a source in witch one can trust.

I know that is easy install Node.js manually, but seem to me that install it using the Ubuntu packages manager will allow me safe some management time and will be more integrated with the way the underlying server is being currently management. So, what are your recommendations? Thanks in advanced.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:50:25.147

we are using [Chef](http://www.opscode.com/chef/) with the existing [node.js cookbook](http://community.opscode.com/cookbooks/nodejs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:49:40.663

Well, after read lot of posts and pages that talk about Node.js deployment-installation, I must said that Chris PPA is mentioned in tons of them as an official source. Beside one can see her PPA linked at the [Github Node.js wiki](https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager).

So, seem to me that is trust enough to be used in production, what made it the choice if you want keep your system updated using standards Ubuntu tools.

# android - 两个活动还是两个片段？

> ID：15009819
> 
> 赞同：1
> 
> 时间：2013-02-21T18:36:58.983
> 
> 标签：android, android-fragments

在一个 Android 应用程序中，我有两个用户看到的屏幕*，一个用于准备查询，另一个用于显示结果。此处正确的 UI 是在一个屏幕上进行查询准备，然后在第二个屏幕上查看结果。由于此应用针对的是手机用户，因此无需同时显示两者。

传统的 Android 方式是使用两个活动， a`QueryPreparationActivity`和 a `DisplayResultActivity`，并在两者之间切换。然而，我听到越来越多的关于 Android UI 如何切换到 Fragment 的消息。我可以将两个屏幕实现为两个片段，并让活动切换它们，但值得麻烦吗？我将基本上复制 Android 已经拥有的 Activity 管理代码。

有理由在这里使用两个片段吗？

[*我使用这个词`screen`，因为它不一定是一个活动......]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T18:55:55.907

就个人而言，我总是使用 Fragments 进行开发。

但我可以为您提供使用 Fragments 的最佳理由是，当您为手机和平板设备进行开发时，您会获得很多可重用性。

我知道您已经提到没有必要同时显示两个屏幕。但是稍后说您要为平板设备开发相同的“屏幕”并意识到准备屏幕太贫瘠并且想要同时显示查询准备和显示结果，您将不得不编写一个全新的第三个活动.

如果您使用片段，您将重用您的 1 个活动和 2 个片段，并且该活动应该被编码得足够聪明，以确定屏幕的大小并显示正确的布局。

代码可重用性和灵活性是这里的流行语。

如果您有任何问题，请发表评论，我将扩展我的答案。如果你喜欢我的回答，请点赞并采纳。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T18:58:53.293

引入的片段将 UI 元素和相关行为封装到单个可重用模块中。在片段之前，您必须重新编写 2 个或更多活动共有的大部分相同代码，特别是如果您找不到将 UI/控制代码抽象为超类的好方法。`setContentView`由于活动只调用一次的限制，这进一步复杂化了。所以在活动之间共享一些代码并不是那么好。

现在，要回答您的问题，这完全取决于您。如果您认为更进一步，您可以使用 QueryPreparation 或 DisplayResult ui 作为模块（其背后的布局和逻辑），然后进行片段实现。它可能是手机横向视图的不同布局，或者如果您决定支持像 nexus 7 这样的小型平板电脑。如果您确定它永远不会发生，那么坚持活动。就个人而言，我在任何地方都使用片段，它们是“未来证明”您的实现以供将来重用的可靠方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T19:07:12.503

简而言之，引入 Fragment 是为了适应平板电脑/大屏幕设备的出现，并允许开发人员创建可在各种屏幕尺寸上运行的应用程序，而对代码的更改很少。

更多内容可以[在 Android 博客上阅读](http://android-developers.blogspot.co.uk/2011/02/android-30-fragments-api.html)。该博客还详细介绍了转向 Fragments 的一些更精细的技术细节。Goolge IO 2012 还介绍了 DialogFragments，您应该考虑使用它来代替 Dialogs。这里的另一篇博文[描述](http://android-developers.blogspot.co.uk/2012/05/using-dialogfragments.html)了它们。

你最好从一开始就习惯使用 Fragments 和 DialogFragments，因为这是 Android 的发展方式。仅当您确实出于测试目的确实需要做一个快速而肮脏的应用程序时，才使用单独的活动。在我看来，片段确实需要更多的代码工作才能整合并初步了解，但值得付出努力。

# c++ - C++：向量容器和 标准::查找

> ID：15009823
> 
> 赞同：1
> 
> 时间：2013-02-21T18:37:09.757
> 
> 标签：c++, vector, stl, iterator

我创建了一个结构，其中包含有关变量的信息，即它们的名称和编号

```
struct var{
  string name;
  int value;
}; 
```

现在，我想使用迭代器来更新它，使用以下函数：

```
void updateVariable(vector<Variable>& vars,Variable& newVar){
    vector<Variable>::iterator it = find(vars.begin(), vars.end(), newVar);

    if(it == vars.end()){
        vars.push_back(newVar);
    }
    else{
        *it = newVar;
    }
} 
```

可以肯定的是，我得到的错误与调用 find() 一致。任何想法为什么我会收到错误？这是错误：

```
/usr/include/c++/4.6/bits/stl_algo.h:162:4: error: no match for ‘operator==’ in ‘__first.__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* [with _Iterator = Variable*, _Container = std::vector<Variable>, __gnu_cxx::__normal_iterator<_Iterator, _Container>::reference = Variable&]() == __val’ 
```

**更新：**

感谢大家的快速帮助和明确的答案！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T18:38:27.623

你还没有`operator ==`为你的`var`结构定义。默认情况下，该`find()`算法将使用`operator ==`您提供的值与指定范围内的值进行比较，并将迭代器返回到比较相等的第一个元素。

`operator ==`要解决此问题，只需为您的班级重载即可。一种方法是：

```
struct var
{
    string name;
    int value;
};

bool operator == (var const& v1, var const& v2)
{
    return (v1.name == v2.name) && (v1.value == v2.value);
} 
```

确保`operator ==`在与结构相同的命名空间中定义`var`，否则 ADL（参数依赖查找）将失败，并且您可能会收到编译器错误。

如果您正在使用 C++11 并且不想费心定义 的重载版本`operator ==`，您甚至可以使用`find_if()`并传递 lambda 作为最后一个参数：

```
find_if(vars.begin(), vars.end(), [&] (var const& v) { 
    return (v.name == newVar.name) && (v.value == newVar.value);
    }); 
```

正如[GManNickG](https://stackoverflow.com/users/87234/gmannickg)正确指出的那样，当您需要比较多个成员时，使用`std::tie`和重载`operator ==`的 for`std::tuple`可能会为您节省一些输入：

```
 auto const tieMembers = [] (const var&) { 
    return std::tie(v.name, v.value, ...);
    }; 
```

然后可以在比较值`v1`和`v2`类型时以这种方式使用上面的 lambda `var`：

```
return (tieMembers(v1) == tieMembers(v2)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T18:39:48.450

您需要定义`operator==`for的重载`var`。这应该有效。

```
bool operator==(const var& a, const var& b){
  return (a.name == b.name) && (a.value == b.value);
} 
```

# c# - invalid_grant 使用服务帐户和 Google Drive API 返回

> ID：15009826
> 
> 赞同：3
> 
> 时间：2013-02-21T18:37:23.603
> 
> 标签：c#, asp.net, google-drive-api

我花了 2 天时间使用服务帐户处理各种 Drive API 教程。

我最近使用的教程是这个：[https ://developers.google.com/drive/delegation](https://developers.google.com/drive/delegation)

尝试上传文件时，我不断收到此错误：

```
ProtocolException was unhandled
Error occurred while sending a direct message or getting the response. 
```

我安装了[Fiddler](http://www.fiddler2.com/fiddler2/)并确定何时`POST /o/oauth2/token`返回：

```
{
    "error:"invalid_grant"
} 
```

我已经三重检查了我的应用程序范围。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T18:37:23.603

原来我的服务器上的时间快了 5 分钟。

当我更正服务器上的时间时，一切正常。

我相信这会导致某种身份验证问题，因为 Google 服务器时间不接受来自我的服务器的请求的时间戳或类似的东西......

（希望这可以节省一些人的头）

# django - Django 的 ContentType 只在 app_label 中存储了 App 的导入路径的最后一部分，如何才能唯一地描述已安装的模型？

> ID：15009835
> 
> 赞同：0
> 
> 时间：2013-02-21T18:37:44.490
> 
> 标签：django, django-contenttypes

文档声明三个字段（app_label、model、name）[唯一标识已安装的模型](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#django.contrib.contenttypes.models.ContentType)，同时仅将模型导入路径的最后一部分存储在 app_label 中。当您可以在不同的包中有两个具有相同名称的模型碰巧共享最后一个模块名称时，这怎么可能，例如：

1) coke.auth.User

2) pepsi.auth.User

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:45:28.863

没关系：当您放入 时`'auth'`，`INSTALLED_APPS`只能导入一个 Django 应用程序，它可能`auth`来自`coke`或`pepsi`，或其他包含 的地方`auth`，具体取决于它们第一次出现在`sys.path`.

此外，在 DB 中，唯一约束应用于`(app_label, model)`，名称用于描述。

# performance - 为什么从 GPU 到 CPU 的数据传输很慢？

> ID：15009838
> 
> 赞同：1
> 
> 时间：2013-02-21T18:37:53.993
> 
> 标签：performance, opengl-es, embedded, gpu

今天我发现了一件让我很疑惑的事情。我有三星 Exynos 4412 ARM9 CPU，它有一个 GPU400（四核）。我试图通过所有已知的方法从 GPU 到 CPU 获取纹理，它真的很慢。PC 平台的现代 CPU 和 GPU 也会出现相同的情况和缓慢的速度。我想知道这是怎么发生的，三星 Exynos 是一个 SoC，它们都有相同的内存，我不应该关心总线。为什么会这样？

从 GPU 到 CPU 的数据通过多种方法传输，我尝试过 glReadpixels、gltexSubImage2D、gltexImage2d、FBO。在纹理 1024*1024 24 位上使用任何这些方法时，帧速率从 40FPS 下降到 7FPs 或 7FPS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:56:03.007

[从 OpenGL 论坛获取的](http://www.opengl.org/discussion_boards/showthread.php/168710-Why-is-GPU-CPU-transfer-slow)可能答案：

*   延迟：读取命令到达硬件需要时间。
*   OpenGL 命令缓冲：读取数据需要 OpenGL 驱动程序完成所有未完成的命令。
*   硬件缓冲：在进行回读之前，硬件必须清空所有 GPU 核心管道。

可能的解决方案： - 在 GPU 内部将数据复制到另一个位置，并在计算后将其读回一些帧。这应该允许写入该位置的所有内容在您尝试读取之前完成。

# autoit - 窗口的主把手

> ID：15009845
> 
> 赞同：-1
> 
> 时间：2013-02-21T18:38:10.497
> 
> 标签：autoit

只是尝试使用 ControlSend 但程序仍然不情愿。现在我找到了主句柄，但我仍然不知道如何正确编写它。有助于获得赞赏。

```
;   Process: System.Diagnostics.Process (javaw)
;   Process ID: 4752
;   Handle Count: 430
;   Responding: Yes
;   Title: ?ok???O?
;                                               <= Looks stange but this is the title.
;   ?
;   Main Handle: 1115426

$mainHanlde = ""

While 1
   ControlClick("", "", $mainHanlde,"{Down}")
   Sleep(900)
   ControlClick("", "", $mainHanlde,"{Down}")
   Sleep(900)
   ControlClick("", "", $mainHanlde,"{Down}")
   Sleep(900)
   ControlClick("", "", $mainHanlde,"a")
   Sleep(Random(750, 2000, 1))
   ControlClick("", "", $mainHanlde,"a")
   Sleep(Random(750, 2000, 1))
   ControlClick("", "", $mainHanlde,"a")
   Sleep(Random(750, 2000, 1))
   ControlClick("", "", $mainHanlde,"a")
   Sleep(3000)
WEnd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:53:04.877

首先你需要把手。`$handle = WinGetHandle("[ACTIVE]")`单击应用程序时，您可以在 Sleep(999) 后获取它。请注意，句柄可以随着每个程序运行而改变。

然后你尝试用 确认它`WinFlash($handle)`。或者将 WinGetTitle(...) 的结果写入您的控制台。

最后你将它与 Control-Functions 一起使用`ControlSend($handle, Default, "", "{Down}")`......

这三个简单的步骤可以帮助我完成我的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T21:43:38.283

You can try to use the title and text and leave the id blank. That should work.

# parallel-processing - 为 MPI 连接 2 台笔记本电脑

> ID：15009855
> 
> 赞同：1
> 
> 时间：2013-02-21T18:38:42.133
> 
> 标签：parallel-processing, cluster-computing, mpi, mpich

我是 MPI 的新手，但是在玩了几个示例 MPI 代码（在 c 中）之后，我对它有了一些熟悉。但是当我尝试连接两台笔记本电脑（通过大学局域网）时，我无法完成这些事情。我正在关注[这个](http://byobu.info/wiki/Building_a_simple_Beowulf_Like_Cluster_with_Ubuntu)链接。

*   我完成了上述所有步骤：“ssh-copy-id node 1”
*   给出此命令后，我收到一条错误消息 - “错误：未找到身份”。

    如果你能告诉我我哪里错了，或者可以建议我其他更好的方法来完成这些事情，那对我来说会很好。

    ```
    (I want to run a MPI program on two laptops connected via LAN). 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T22:08:00.670

ssh-copy-id 报告它在默认位置找不到 ssh 密钥。您需要使用 -i 选项指定公钥的位置，或者如果您没有密钥，请使用以下命令生成一个：

```
ssh-keygen 
```

# ios - ios中的后台线程和多任务处理？

> ID：15009859
> 
> 赞同：0
> 
> 时间：2013-02-21T18:38:50.233
> 
> 标签：ios, upload, fetch, multitasking, background-thread

我是iOS的新手。我有一个要求，我需要从本地数据库中获取数据并将其上传到服务器。当互联网连接可用时，这必须在后台完成。我该如何继续？我需要一个开始。

我读到我可以在 NSThread 或 GCD 的帮助下实现这一点，但我不知道什么时候最合适。有人可以建议正确的方法吗？一个示例或伪代码会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:47:48.627

这是 gcd 代码的样子：

```
dispatch_queue_t queue = dispatch_queue_create("queue_name", 0);
    dispatch_async(queue, ^(){
    // code
}); 
```

由于 GCD 使用块，它允许您捕获局部变量的状态。

仅供参考：在发布到 stackoverflow 之前，您可能已经在 Google 上进行了搜索。您的问题很常见，之前已经回答过了。您也可以考虑查看苹果文档。

# r - 无法理解 R 中 if 条件中的错误消息

> ID：15009868
> 
> 赞同：1
> 
> 时间：2013-02-21T18:39:03.880
> 
> 标签：r, if-statement

我用 R 编写的程序有时（不总是，但几乎总是在多次运行模拟时）显示以下错误消息：

```
Error in if (sum.wt1y1 == 0 | sum.wt2y2 == 0) zn[k] <- 0 else zn[k] <- (sum.wt1y1 *  : 
  missing value where TRUE/FALSE needed 
```

谁能解释一下这个错误信息的含义是什么？我找不到错误在哪里。最终输出是一个向量。现在在该向量中最多显示一些值，但当出现错误消息时，其余部分为 0、0、0、...、0。如果没有出现错误消息，则向量的所有位置都填充有值（没有零）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T18:42:25.650

错误通常是由于`NA`值引起的：

```
if (NA == 0) print('foo')

# Error in if (NA == 0) print("foo") : 
#   missing value where TRUE/FALSE needed 
```

解决方案是删除缺失值或对它们进行检查：

```
if (!is.na(x) & x == 0) ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:52:44.340

为了扩展@justin 所说的内容，错误消息本质上是在告诉您它期待一个 T/F 但没有得到它。

当您看到这样的错误时，最好的办法是探索语句
中括号内的值。`if( .... )`

在这种特定情况下，查看`sum.wt1y1 == 0 | sum.wt2y2 == 0`可能会帮助您找到罪魁祸首。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T18:57:20.433

试试这个：

```
which(is.na( sum.wt1y1 == 0 | sum.wt2y2 == 0)) 
```

# plot - 用 2 x 轴绘制一条线

> ID：15009869
> 
> 赞同：0
> 
> 时间：2013-02-21T18:39:04.053
> 
> 标签：plot, gnuplot, axes

我正在测量调用大量子程序的程序的性能。我已经输出了一段时间内的 cpu 性能，以及调用每个子程序的时间。

我想将其绘制成图表，以便可视化每个性能影响的位置、它所在的子程序以及它的时间。

所以我认为最好的方法（可能）是用时间 x 轴和子程序 x 轴来绘制它。这可能与 gnuplot 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:02:38.317

当然，这样的事情（当然取决于你的数据我是如何安排的......）

```
 plot 'file' using 1:2 axes x1y1 , 'file' using 3:4 axes x2y1 
```

有关您可能需要的选项，请参阅 set x1axes 下的手册，例如 nomirror..

# wolfram-mathematica - 如何从数据集中删除散点

> ID：15009875
> 
> 赞同：1
> 
> 时间：2013-02-21T18:39:24.580
> 
> 标签：wolfram-mathematica, noise-reduction

我将点云的坐标存储在矩阵中。很少有点与其他点是隔离的。有人知道我如何删除它们吗？点如图所示。如果您能帮助我，我将不胜感激，因为我不是数学专家 :( 由于我是新用户，我无法上传图片，但底部的点显示了包含 4 个我想删除的分散点的数据集。

```
…………
 ...........
  …………
  …………
  …………
  …………
  ......
  ...
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:33:57.700

这里有一些代码希望对你有帮助：

```
data = Table[{Random[], Random[]}, {100}];

DynamicModule[{p = {0.5, 0.5}, linePts = {}, p1 = {0., 0.}, 
  pts = data}, 
 Manipulate[
  Graphics[{Dynamic[Point[pts]], Locator[Dynamic[p]], 
    Line[Dynamic[If[p != p1, AppendTo[linePts, p]; p1 = p]; 
      linePts]]}], 
  Row[{Button["updata", 
     pts = Select[pts, ! Graphics`Mesh`InPolygonQ[linePts, #] &]], 
    Button["copy points", Print[Flatten[Position[data, #] & /@ pts]]],
     Button["Reset", linePts = {}; pts = data;]}]]] 
```

您可以在图中绘制一个区域，然后在图中将其删除。“更新”按钮将显示剩余点，“复制点”将复制剩余点位置，“重置”将重置为原始图。

![在此处输入图像描述](../Images/a278b77d6f68be780940b5459ffac3df.png)

# migration - Websphere CE（社区版）无法将属性从文件加载到 InitialContext

> ID：15009876
> 
> 赞同：0
> 
> 时间：2013-02-21T18:39:27.957
> 
> 标签：migration, websphere-ce

我的网络应用程序在 tomcat 服务器上运行良好，现在我将它移植到 Websphere CE，

应用程序读取属性文件并将其加载到 IntialContext，如果我使用运行应用程序

*   tomcat >> InitialContext ic 有 env 变量和属性被加载到 env

但在

*   Websphere CE >> InitialContext ic 具有 env 变量并且 env 为空

应用程序失败了？

只是为了在这两种情况下添加（在 tomcat 或 websphere CE 上运行），InitialContext 具有变量 myProp ，它具有文件中的所有属性......这意味着属性文件已被读取..

我在类目录中有属性文件，并使用调试器和反编译器从第三方 jar 文件调用服务，我可以找到上述差异，但现在卡在这里？

你能在这种情况下分享提示/建议吗？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:40:48.077

通过在 WAS-CE 的认可目录中添加 jboss jars（用于 NJDI）修复了这个问题。

但是现在在获取远程对象时面临 SocketTimeout。

我们如何/在哪里可以设置 WAS-CE 的 sockettimeout 属性？

# php - 在当前鼠标位置单击鼠标插入文本字段或复选框或拖放它

> ID：15009877
> 
> 赞同：0
> 
> 时间：2013-02-21T18:39:33.410
> 
> 标签：php, javascript, html

我试图在页面上任何位置的鼠标单击鼠标时动态插入复选框或文本字段，甚至更好地将文本字段和复选框拖放到页面的任何位置。

目标是向这样的页面添加可编辑的文本字段和[复选框](http://vz275.worldserver.net/converter/files/38053/38053.html)

如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:45:51.630

您可以使用 Draggle-Jquery 插件。[文档和演示](http://jqueryui.com/draggable/)

你只需要添加 jquery 文件和这个简单的代码：

```
 $(function() {
  $( "#draggable" ).draggable();
 }); 
```

html（您可以使用其他 html 元素）：

```
<div id="draggable" class="ui-widget-content">
<p>Drag me around</p>
</div> 
```

[还有一些演示](http://coursesweb.net/jquery/drag-drop)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:47:32.780

快速思考：

**创建可重复使用的输入字段（模板）**

```
var $textinput = '<input type="text" value="" style="position:absolute" />'; 
```

**将点击处理程序添加到页面**

```
// Using jquery
$('body').on('click', function(event) {
    var posX = event.offsetX;
    var posY = event.offsetY;
    var $input = $textinput
    this.append($input);
    $input.css('{x: posX, y: posY}');
}); 
```

**然后只需在保存时将所有值发送回服务器**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T19:01:38.803

抱歉回复晚了，实际上是在测试；）尝试一些东西（根据您的需要修改逻辑），如下所示：

```
$('body').click(function(e){ $('body').append($('<input />').css({position:'absolute',left:e.pageX,top:e.pageY}).focus());}) 
```

# knockout.js - Smarty 评论剥离和 KnockoutJS

> ID：15009881
> 
> 赞同：0
> 
> 时间：2013-02-21T18:39:43.783
> 
> 标签：knockout.js, smarty, smarty3, html

我正在尝试在我的 Web 框架中使用 KnockoutJS，它使用普通的 Smarty。

KnockoutJS 语法的某些部分使用`<!-- ko foreach: array -->`.

Smarty 去除所有 HTML 注释（除了 IE 条件），包括这些。

我可以删除`preg_replace`Smarty 中的责任线，但我宁愿有不需要更改第三方代码的解决方案。

有什么办法可以跳过 Smarty 中的评论剥离？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:12:31.727

实际上 Smarty 会显示所有 HTML 注释，例如`<!-- comment -->`在模板的最终输出中。只有 Smarty 特定的注释`{* this is a comment *}`隐藏在最终输出中。您的框架可能在后端隐藏了 HTML 注释，可能是为了进行 HTML 压缩。

参考[Smarty 注释语法](http://www.smarty.net/docsv2/en/language.basic.syntax.tpl)

# jsf-2 - 如何正确地将 JSF 2.0 Web 应用程序导出到战争中？

> ID：15009886
> 
> 赞同：0
> 
> 时间：2013-02-21T18:39:57.280
> 
> 标签：jsf-2, ejb, glassfish-3, java-ee-6, war

我有一个 JSF 2.0 Web 项目，我使用 Glassfish 3.1.2 服务器。在这个项目中，我除其他外还有：

*   一个名为 AjaxServlet 的类，用 @javax.servlet.annotation.WebServlet 注释
*   一个名为 Session 的类，用 @javax.ejb.Stateful 注释

当我从 Eclipse 将这个项目部署到 Glassfish 时，一切都运行良好：在 Glassfish 的管理控制台中，与应用程序关联的引擎是 [ejb, jpa, web, Weld]。但是当我第一次将项目导出为战争时，然后从管理控制台部署战争时，应用程序不起作用：与应用程序关联的引擎只有 [web]。

如何在不丢失任何信息（所有引擎）的情况下将应用程序导出到战争？我没有在 web.xml 中声明我的 Servlet，因为在 JSF 2.0 中，我们不需要它：注释就足够了。有谁知道这里发生了什么？我很确定这不是 Glassfish 发行版（Web Profile Vs Full Platform）的问题，因为相同的 Glassfish 服务器用于上述 2 个场景。

请注意那些错误地认为我的问题离题的人：Jsf 是一个用于编写 Java EE Web 应用程序的框架。war 是一种打包 Jsf 应用程序的方式，就像 jar 是一种打包 java 类的方式一样。所以我的问题完全是一个编程话题！在 StackOverflow 中使用它是完全合法的。如果将 JSF 应用程序导出到 war 不是编程问题，那么将 java 类编译成 .class 也不应该是编程话题！所以请不要因为这个原因降级！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:17:07.853

***您必须了解eclipse 环境***和***glassfish 环境***之间的区别。并非所有在 eclipse 中可用的库都可能包含在您的外部环境中。有些情况下程序在 Eclipse 中编译，但不是从控制台运行时。

这里有一个提示：

> 右键单击项目 -> 导航到**Properties > Java Build Path > Order and Export**，并确保您需要的所有库都将被导出。

# synchronization - 如何使用 webRTC Javascript API 访问发送方的传出音频 RTP 时间戳和接收方的传入音频 RTP 时间戳？

> ID：15009887
> 
> 赞同：2
> 
> 时间：2013-02-21T18:40:02.497
> 
> 标签：synchronization, webrtc

例如，对于接收器的传入音频流，这个 webRTC 内部函数给了我 RTP 时间戳！

[http://www.webrtc.org/reference/webrtc-internals/voevideosync#TOC-GetPlayoutTimeStamp](http://www.webrtc.org/reference/webrtc-internals/voevideosync#TOC-GetPlayoutTimeStamp)

您可以使用 WireShark 嗅探所有这些信息。但我希望通过 javascript 函数请求来访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:11:51.347

正如您在共享的 url 中看到的那样，该文档位于“webrtc-internals”下，并描述了浏览器应如何在浏览器中实现 WebRTC。这些低级功能无法通过 Javascript 获得。

[您可以在此处](http://dev.w3.org/2011/webrtc/editor/webrtc.html)通过 Javascript 找到可用的内容（现在或将来）。

# actionscript-3 - 绘图应用程序。如何在动作脚本 3 中创建撤消功能？

> ID：15009888
> 
> 赞同：-1
> 
> 时间：2013-02-21T18:40:11.170
> 
> 标签：actionscript-3, function, undo

谁能告诉我如何使撤消功能？所以这是我当前的动作脚本。我不知道该怎么做，我在一些网站上看到了一些例子，动作脚本很长，无法理解。请展示一个简单的方法，我可以使这项工作。

对不起语法不好...

```
import flash.display.MovieClip;
import flash.events.MouseEvent;

var pen_mc:MovieClip;
var drawing:Boolean = false;
var penSize:uint = 1;
var penColor:Number = 0x000000;

function init():void{

pen_mc = new MovieClip();
stage.addEventListener(MouseEvent.MOUSE_DOWN, startDrawing);
stage.addEventListener(MouseEvent.MOUSE_MOVE, isDrawing);
stage.addEventListener(MouseEvent.MOUSE_UP, finishedDrawing);
addChild(pen_mc);

}

init();

function startDrawing(e:MouseEvent):void{

trace("Pen Has started drawing");

drawing = true;
pen_mc.graphics.lineStyle(penSize, penColor);
pen_mc.graphics.moveTo(mouseX, mouseY);

}

function isDrawing(e:MouseEvent):void{
if(drawing){

    pen_mc.graphics.lineTo(mouseX, mouseY);
}

}

function finishedDrawing(e:MouseEvent):void{

     trace("finished drawing");
     drawing = false;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:40:18.000

您希望将用户绘制的每一行都存储在历史数组中。当用户想要撤消时，您可以在数组中后退一步并逐行删除每一行。

# c# - 检测焦点何时通过键盘移动到捕获的元素之外

> ID：15009899
> 
> 赞同：2
> 
> 时间：2013-02-21T18:40:45.567
> 
> 标签：c#, .net, wpf

我有这个代码：

```
Mouse.AddPreviewMouseDownOutsideCapturedElementHandler(this, 
                                                      OnMouseDownOutsideCapture); 
```

当鼠标点击发生在我的 WPF 弹出窗口之外时，它会完全捕获（所以我可以关闭它）。

```
private void OnMouseDownOutsideCapture(object sender, MouseButtonEventArgs e)
{
   if (Mouse.Captured is ComboBox) return;

   if (IsOpen) 
       IsOpen = false;

   ReleaseMouseCapture();
} 
```

但是我需要一些方法来知道焦点是否通过键盘移到了我的弹出窗口之外。更具体地说，通过快捷方式（即 Alt + T）。

现在，当用户以这种方式将焦点移开时，我的弹出窗口不会关闭。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:48:37.030

我是这样做的：

将此添加到构造函数中：

```
EventManager.RegisterClassHandler(typeof(UIElement),
          Keyboard.PreviewGotKeyboardFocusEvent, 
          (KeyboardFocusChangedEventHandler)OnPreviewAnyControlGotKeyboardFocus); 
```

然后添加此事件处理程序：

```
 /// <summary>
    /// When focus is lost, make sure that we close the popup if needed.
    /// </summary>
    private void OnPreviewAnyControlGotKeyboardFocus(object sender, KeyboardFocusChangedEventArgs e)
    {
        // If we are not open then we are done.  No need to go further
        if (!IsOpen) return;

        // See if our new control is on a popup
        var popupParent = VLTreeWalker.FindParentControl<Popup>((DependencyObject)e.NewFocus);

        // If the new control is not the same popup in our current instance then we want to close.
        if ((popupParent == null) || (this.popup != popupParent))
        {
            popupParent.IsOpen = false;
        }
    } 
```

VLTreeWalker 是一个自定义类，它沿着可视化树查找与传入的泛型类型匹配，然后（如果它没有找到匹配项，将沿着逻辑树走。）遗憾的是，我不能轻易发布这里的来源。

`this.popup`是您要比较的实例（您想知道它是否应该关闭）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:45:28.680

您可以添加一个 KeyDown 事件并检查是否按下了 alt+tab。

# visual-studio-2012 - 远程调试不起作用。“无法附加到进程。RPC 服务器不可用。”

> ID：15009901
> 
> 赞同：20
> 
> 时间：2013-02-21T18:40:53.787
> 
> 标签：visual-studio-2012, visual-studio-2013, remote-debugging

我的开发工作站正在运行 VS2012 Update 1。操作系统是 Windows 7 Professional Service Pack 1 x64。我有一台运行 Windows 8 的笔记本电脑，上面安装了 VS2012 远程调试器。我已经启动了 msvsmon，它静静地坐在系统托盘中，或者在 Windows 8 上通过它。

我在 VS2012 中的一个需要进行调试的位置设置了一个断点。在 VS2012 中，我点击调试 | 附加到进程... 我得到一个对话框，显示我的机器上运行的进程列表。我将机器名称更改为笔记本电脑的名称。

我有两个不同的问题：

问题1：

在 Windows 防火墙运行的情况下，VS2012 连接到远程调试器服务器。我看到笔记本电脑上运行的进程列表。我选择要调试的那个，然后单击附加。我得到“无法附加到进程。RPC 服务器不可用。”

这里发生了什么？

问题2：

我关闭了桌面上的 Windows 防火墙。当我尝试连接到笔记本电脑上运行的进程时，它会连接并加载所有符号。到现在为止还挺好。一旦所有这些都完成，我将执行会导致我的断点被命中的操作。远程机器上的进程冻结，但是 VS2012 也是如此。我已经坐在这里等了10分钟，没有任何变化。那时，我在远程机器上杀死了 msvsmon，我的程序随之消失，但 VS 仍然被锁定。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2015-09-23T22:36:31.370

我在 VS 2013 中遇到了类似的问题，显示消息“无法附加到进程。RPC 服务器不可用”。

我已通过***取消****选中“***调试”>“选项和设置”>“常规**”选项卡中的“使用托管兼容模式”选项来解决此问题。

# php - PHP中的购物车没有相应地工作

> ID：15009902
> 
> 赞同：1
> 
> 时间：2013-02-21T18:41:04.430
> 
> 标签：php, session, cart, shopping

我一直在为购物车编写 PHP 代码而苦苦挣扎。

特别是添加商品的功能，可以很容易地拥有具有多个数量订单的商品。

这是我所拥有的，但它似乎不适用于添加第二项：

```
function addtocart($pid,$q)
    {
        if($pid<1 or $q<1) return;
        if (is_array($_SESSION['cart']))
            {
                $max=count($_SESSION['cart']);
                $_SESSION['cart'][$max]['itemId']=$pid;
                $_SESSION['cart']['itemId']['qty']= $_SESSION['cart']['itemId']['qty'] + $q;
                $max=count($_SESSION['cart']);
                echo "SECOND";
            }
            else
            {
                $_SESSION['cart']=array();
                $_SESSION['cart'][0]['itemId']=$pid;
                $_SESSION['cart'][0]['qty'] = $q;
                $max=count($_SESSION['cart']);
            }
    } 
```

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:48:40.690

你太复杂了。

```
function addtocart($pid,$q) {
    if($pid<1 or $q<1) return;

    // has the main 'cart' array been set up in session yet? If not, do it
    if (!array_key_exists('cart', $_SESSION) || !is_array($_SESSION['cart']))
        $_SESSION['cart']=array();

    // has this item been added to the cart yet? If not, do it (0 qty)
    if (!array_key_exists($pid, $_SESSION['cart'])) {
        $_SESSION['cart'][$pid] = array(
            'itemId'=>$pid,
            'qty'=>0
        );  
    }

    // add the requested quantity of items to the cart
    $_SESSION['cart'][$pid]['qty'] = $_SESSION['cart'][$pid]['qty'] + $q;
} 
```

第一次使用此函数添加项目时，它将在会话数组中设置正确的条目。任何后续使用该函数来添加相同的项目都会增加`qty`密钥。当一切都说完了，你会得到这样的：

```
array(
    '54'=>array(
        'itemId'=>54,
        'qty'=>4
    ),
    '99'=>array(
        'itemId'=>99,
        'qty'=>2
    ),  
) 
```

**文档**

*   `is_array`- [http://php.net/manual/en/function.is-array.php](http://php.net/manual/en/function.is-array.php)
*   `array_key_exists`- [http://php.net/manual/en/function.array-key-exists.php](http://php.net/manual/en/function.array-key-exists.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:47:45.837

您的功能可以简化为这样的东西..

```
function addtocart($pid,$q)
    {
        if($pid<1 or $q<1) return;

        //if the cart is not defined, define it
        if (!is_array($_SESSION['cart'])) $_SESSION['cart']=array();

        //See if an arry item for the part number exists, or add it
        if (!$_SESSION['cart'][$pid]) 
            $_SESSION['cart'][$pid]=$q;
        else
            $_SESSION['cart'][$pid]+=$q;
    } 
```

然后以后再读...

```
foreach($_SESSION['cart'] as $item=>$qty){
    echo $item.': '.$qty;
} 
```

这种方法很好，因为如果您添加两次相同的项目，数量将加在一起

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:48:41.453

也许这对你有帮助。第二个索引应该是`$max`，不是`'itemId'`。

```
function addtocart($pid,$q)
    {
        if($pid<1 or $q<1) return;
        if (is_array($_SESSION['cart']))
            {
                $max=count($_SESSION['cart']);
                $_SESSION['cart'][$max]['itemId']=$pid;
                $_SESSION['cart'][$max]['qty']= $_SESSION['cart'][$max]['qty'] + $q;
                $max=count($_SESSION['cart']);
                echo "SECOND";
            }
            else
            {
                $_SESSION['cart']=array();
                $_SESSION['cart'][0]['itemId']=$pid;
                $_SESSION['cart'][0]['qty'] = $q;
                $max=count($_SESSION['cart']);
            }
    } 
```

# xampp - WAMP 到 XAMPP WordPress 传输

> ID：15009903
> 
> 赞同：0
> 
> 时间：2013-02-21T18:41:04.973
> 
> 标签：xampp, localhost, wamp, wordpress

我想将 WordPress 站点从 wamp localhost 转移到 xampp localhost。使用工具 > 导出，我将 WordPress 内容保存到 XML 文件中。我没有创建 MySQL 数据库的类似备份（现在也不能这样做），但所有文件都来自 wamp。

如何在无需安装新版本的 WordPress 的情况下进行转移？我需要保留小部件和插件中的重要设置。我希望将相关的 wamp 和 WordPress 文件放在正确的 xampp 和 WordPress 文件夹中。

提前致谢。

# java - 如何在 Flow 中访问 exceptionPayload

> ID：15009904
> 
> 赞同：1
> 
> 时间：2013-02-21T18:41:10.653
> 
> 标签：java, exception, mule, flow

我一直在谷歌上寻找这个但找不到解决方案。

如何访问 mule 流中的 exceptionPayload，就像我可以访问有效负载 #[message.payload] 一样。同样，有什么办法我也可以拥有 exceptionPayload 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T19:00:19.647

使用`#[exception]`，`null`如果当前事件没有异常有效负载。

# java - Java学校项目随机错误

> ID：15009908
> 
> 赞同：1
> 
> 时间：2013-02-21T18:41:23.453
> 
> 标签：java, eclipse, random, system, project

[https://www.dropbox.com/s/5iklxvhslh4kfe7/CS%203114.zip](https://www.dropbox.com/s/5iklxvhslh4kfe7/CS%203114.zip)

我的学校项目的代码中有一些我无法弄清楚的错误。上面的链接是我的项目代码。项目说明在 P1.pdf 文件中。

我的错误与此代码有关：

```
 /*
                for (int i = 0; i < reactions.length; i++)
                {
                    reactions[i].UpdateFireTime();
                    debugwriter.write(i + "| " + reactions[i].FireTime());
                    debugwriter.newLine();
                }
                debugwriter.newLine();
                heap.build();
                //*/

                //*
                for (int i = 0; i < table[reactionIndex].length; i++)
                {
                    int rindex = table[reactionIndex][i];
                    reactions[rindex].UpdateFireTime();
                }
                for(int i = 0; i < reactions.length; i++)
                {
                    debugwriter.write(i + "| " + reactions[i].FireTime());
                    debugwriter.newLine();
                }
                debugwriter.newLine();
                heap.build();

                //*/ 
```

第一个 for 循环更新每个反应的触发时间，而第二个 for 循环使用我的表来更新特定的相关反应。我的答案对于第一个 for 循环是正确的，但在我使用第二个循环时不正确。如果我更新每个反应触发时间并且结果与我的表匹配，我已经测试过哪些倾向会发生变化。这意味着唯一的区别是 -Math.log(Math.random()) 因子。如果我将随机数设置为常数，那么使用两个循环都会得到相同的结果。我已经多次查看我的代码，但我无法弄清楚问题可能是什么。谁能帮我吗？

PS：.ltf 文件只是 .txt 文件，非常大。我使用 .ltf 将它们与常规 .txt 文件区分开来

DIMER 示例的正确方法是：~650 ~650 ~220

编辑：第三个循环仅用于调试目的。我正在谈论的 2 个循环是第一个和第二个循环，其中第一个是被注释掉的循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:43:24.080

您不需要`table[reactionIndex]`在第一个循环中。只需使用`table.length-1`，您就可以将`i`其用作索引中的位置来循环并执行操作。

# javascript - setAttribute 的问题

> ID：15009911
> 
> 赞同：1
> 
> 时间：2013-02-21T18:41:30.260
> 
> 标签：javascript, arrays, setattribute

```
function Todo(id, task, who, dueDate) {
    this.id = id;
    this.task = task;
    this.who = who;
    this.dueDate = dueDate;
    this.done = false;
}

function updateDone(e) { 
      var spanClicked = e.target;
      var id = spanClicked.parentElement.id;
      spanClicked.innerHTML = "&nbsp;&#10004;&nbsp;";
      spanClicked.setAttribute("class", "done");
      console.log("you clicked this span" + id);

      for(var i = 0; i < todos.length; i++) {
        if (todos[i].id == id) {
            var mark = todos[i];
            mark.setAttribute("class", "done");
            console.log(mark);
            break;
            }
           } 
    } 
```

此函数的第一部分更新网页以显示对象已“完成”。第二部分是我遇到问题的地方。我正在尝试将对象更新为数组内的“完成”。这个想法是将用户单击的 id 与数组中的 id 匹配，然后使用 setAttribute 将其设置为“完成”。但是，我为 console.log(mark) 获得的控制台消息是 mark.setAttribute 不是函数。关于如何修改它以便我可以将数组中的对象更新为“完成”的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:51:19.733

使用 setAttribute 设置类不是一个好主意。

```
//Works with FF and Chrome
obj.setAttribute("class", "done");

//works with IE
obj.setAttribute("className", "done");

//works with all browsers
obj.className = "done"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:52:40.710

```
for(var i = 0; i < todos.length; i++) {
    if (todos[i].id == id) {
        var element = document.getElementById(todos[i].id);
        element.setAttribute("class", "done");
        console.log(element);
        break;
    }
} 
```

或者如果您的示例中的“mark”不是 DOM 对象，那么您只需将它的 done 属性设置为 true。

```
for(var i = 0; i < todos.length; i++) {
    if (todos[i].id == id) {
        todos[i].done = true;
        console.log(todos[i]);
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:59:44.493

嘿@user2084813 我知道这看起来有点矫枉过正，但从长远来看它会很有用。JQuery 具有跨浏览器工作的功能（无需检查验证），允许您检查/添加/删除类。IE 通常以不同的方式处理删除。

[http://api.jquery.com/hasClass/](http://api.jquery.com/hasClass/)

[http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

[http://api.jquery.com/removeClass/](http://api.jquery.com/removeClass/)

# module - SugarCRM - 如何自动绑定（关联）两个单独的模块？

> ID：15009912
> 
> 赞同：0
> 
> 时间：2013-02-21T18:41:30.837
> 
> 标签：module, sugarcrm

例如，我有一个帐户。在其子面板中，我为该帐户创建报价。在该报价的子面板中，我为该报价创建了两个产品。如何自动关联该帐户的两个产品？我希望产品自动显示在帐户模块的子面板中。

请如果有人可以告诉我如何绑定它们以及我应该将自定义逻辑放在哪个自定义文件夹中。谢谢

# php - Can't use SSH to fix 'Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)'

> ID：15009929
> 
> 赞同：0
> 
> 时间：2013-02-21T18:42:52.363
> 
> 标签：php, mysql

我收到以下消息：

> 无法通过套接字 '/var/run/mysqld/mysqld.sock' 连接到本地 MySQL 服务器 (2)

我已经研究过这个问题：[错误：'Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)'](https://stackoverflow.com/questions/11990708/error-cant-connect-to-local-mysql-server-through-socket-var-run-mysqld-mysq)，但我的主机（肥牛）不允许SSH .

我查看了我的 php.ini 文件，但没有看到任何有用的东西。我已经给他们发了一张票，但如果我能弄清楚如何解决这个问题，那就太好了。

起初我能够连接它，但我搞砸了 php 中的一些登录，那么我该如何解决这个问题？

我将 PHP 5.2 与 mySQL_* 一起使用（我知道我需要更改为 PDO，但我需要先阅读一下它）。

```
$local = "fatcowmysql.com";
$user = "user";
$pass = "pass";
$dbName = "dbName";

$connectMySQL=mysql_connect($local,$user,$pass);

$dbSelect=mysql_select_db($dbName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:06:03.683

您的错误消息和代码彼此不一致。

仅当您通过指定的 UNIX 套接字连接时，*才会*出现给定的错误消息，仅当“主机名”为`localhost`.

如果套接字不存在，则有两种可能性：

1.  MySQL 没有运行，或者
2.  别的东西（不小心？）删除了套接字文件

如果您想尝试通过 TCP/IP 进行连接（并且如果 MySQL 与您的 PHP 代码在同一台服务器上运行），请指定`127.0.0.1`而不是`localhost`.

# asp.net-mvc - 替代 StackTrace.GetFrame... 在调用方法的控制器上查找操作

> ID：15009933
> 
> 赞同：0
> 
> 时间：2013-02-21T18:42:57.957
> 
> 标签：asp.net-mvc, stack-trace, onactionexecuting

## 设置：

我编写了一个 ASP.NET MVC 向导，最初基于 Steve Sanderson 的向导（Pro ASP.NET MVC 2 Framework）。我的巫师是普通的，是一个梦想。

每个向导步骤都是一个动作。

但是，我现在发布了一个广泛使用该向导的应用程序。显然，该应用程序处于发布模式。

WizardController<> 类是我所有向导的基类。它有一个 OnActionExecuting 方法，我怀疑它可以为我的问题提供解决方案。问题是如何，或者更确切地说，以正确的顺序遍历堆栈，问题是什么......

## 问题：

位于 WizardController 深处的代码使用：

```
var stackTrace = new StackTrace();
string actionName = stackTrace.GetFrame(n).GetMethod().Name 
```

获取调用此代码的操作的名称（其中 n 是我知道调用操作的框架......在调试模式下）。这使我可以确定我在哪个向导步骤/操作上。

这在调试模式下工作正常，但在发布模式下，编译器会优化我的代码。所以 n 可能代表我的堆栈中的正确帧，也可能不代表。

现实情况是，在发布模式下，有时 n 并不代表正确的帧。有时还不够好。有时是我的问题。我想要一个防弹解决方案。

## 问题：

那么使用堆栈跟踪的替代方法是什么？我怀疑我可以使用我的 OnActionExecuting 方法来获取操作的名称，这是我需要的，因为这个名称是我向导中的步骤的标识。

但是怎么做？

忘记存在或不存在。如何？就是那个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:49:20.417

好吧，写这篇文章让我意识到答案正盯着我的脸发青。

OnActionExecuting 方法的 ActionExecutingContext 参数为我提供了我需要的 Action 名称句柄，如下所示：

在我的 WizardController 类中，我添加了以下内容：

```
private string ActionName { get; set; } 
protected override void OnActionExecuting(ActionExecutingContext filterContext) 
{ 
    ActionName = filterContext.ActionDescriptor.ActionName; 
    // All the other stuff...
} 
```

我现在可以使用 ActionName 属性来代替：

```
stackTrace.GetFrame(n).GetMethod().Name 
```

其中 n 在调试模式下可能是已知的，但在发布模式下肯定是不确定的。

呸！

希望这可以帮助像水仙一样陷入反思陷阱的其他人。

# json - 将 JSON 对象转换为数组？

> ID：15009936
> 
> 赞同：2
> 
> 时间：2013-02-21T18:43:14.073
> 
> 标签：json

我在萤火虫的控制台上有这个，

```
[Object { fa_id="1167535",  f_id="1000",  loc_type="6",  more...}, Object { fa_id="1167535",  f_id="1000",  loc_type="6",  more...}] 
```

它是来自服务器端的数据。现在，我将如何将其转换为数组，以便可以在另一个文件中使用这些数据。我试过了`JSON.parse`，`jQuery.parseJSON`但都没有工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T18:49:01.753

那不是 JSON，而是对象的 Javascript 数组，而不是字符串。我的猜测是你已经从一个 jQuery ajax 调用中收到了这个，并且你已经`dataType : 'json'`设置好了，以便 jQuery 自动将 JSON 解析到这个数组中。

要将其发送到 PHP 脚本，您可以使用以下方法将其转换回 JSON：

```
var myString = JSON.stringify(data); 
```

然后启动对 PHP 脚本的 ajax 调用，并将其作为 POST 数据：

```
var myString = JSON.stringify(data);
$.post('page.php', { data : myString }, function(){
    console.log( "sent" );
}); 
```

在 PHP 中，您可以使用以下方法对其进行解码：

```
$data = json_decode($_POST['data']); // <-- or whatever your post variable is named

foreach($data as $obj)
{
    echo $obj->fa_id;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:47:56.943

如果你想获得一个 php 数组，请使用这个

[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:48:45.497

您提供的字符串不是有效的 JSON。

```
[Object { fa_id="1167535",  f_id="1000",  loc_type="6",  more...}, 
 Object { fa_id="1167535",  f_id="1000",  loc_type="6",  more...}] 
```

特别是，JSON 解析器无法解释" `Object`" 和 " " 字符串。`more...`

假设您正在检查的对象是一个名为的变量`foo`：

```
console.log(JSON.stringify(foo)); 
```

应该将对象的有效 JSON 表示形式打印到 Javascript 控制台。

# iphone - JPEG编码器超慢，如何优化？

> ID：15009938
> 
> 赞同：3
> 
> 时间：2013-02-21T18:43:22.077
> 
> 标签：iphone, ios, actionscript-3, flash-builder, image-conversion

我正在我的 Flash 构建器中构建一个带有 actionscript 3.0 的应用程序。这是[this question](https://stackoverflow.com/questions/14970353/how-to-rotate-image-from-cameraui-for-ios-in-actionscript-3-0)的后续问题。

我需要将字节数组上传到我的服务器，但我用来将位图数据转换为 a 的函数`ByteArray`非常慢，所以它会冻结我的移动设备。我的代码如下：

```
var jpgenc:JPEGEncoder = new JPEGEncoder(50);
trace('encode');
//encode the bitmapdata object and keep the encoded ByteArray

    var imgByteArray:ByteArray = jpgenc.encode(bitmap);
temp2 = File.applicationStorageDirectory.resolvePath("snapshot.jpg");
    var fs:FileStream = new FileStream();
    trace('fs');
    try{     
     //open file in write mode     
     fs.open(temp2,FileMode.WRITE);
          //write bytes from the byte array

     fs.writeBytes(imgByteArray);
          //close the file

     fs.close();
         }catch(e:Error){ 
```

有没有其他方法可以将其转换为`byteArray`? 有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-12T07:24:35.670

使用 BitmapData.encode()，它在移动设备上的速度要快几个数量级[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#encode%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#encode%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T08:26:53.683

尝试使用血腥图书馆： http: [//www.blooddy.by](http://www.blooddy.by)。但我没有在移动设备上测试它。评论如果你会成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:01:46.780

伊利亚的回答是对我有什么帮助。我下载了这个库，里面有一个如何使用它的例子。我一直在努力让 flashbuilder 中的 CameraUI 拍照，对其进行编码/压缩，然后通过 Web 服务将其发送到我的服务器（数据作为压缩字节数组发送）。我这样做了：

by.blooddy.crypto.image.JPEGEncoder.encode(bmp, 30);

其中 bmp 是我的位图数据。编码耗时不到 3 秒，并且很容易同步融入我的控制流程。我尝试了异步方法，但它们最终花费了很长时间，并且很难跟踪用户何时从手机服务移动到 wifi 或在上传过程中从塔到塔。

如果您需要更多详细信息，请在此处评论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T19:31:55.530

您应该尝试找到能够异步编码的 JPEG 编码器。这样，在压缩图像时仍可以使用该应用程序。我没有尝试过任何库，但这个看起来很有希望：

[http://segfaultlabs.com/devlogs/alchemy-asynchronous-jpeg-encoding-2](http://segfaultlabs.com/devlogs/alchemy-asynchronous-jpeg-encoding-2)

它使用[Alchemy](http://en.wikipedia.org/wiki/Adobe_Alchemy)，它应该比 as3corelib 中的 JPEGEncoder 更快（我猜这是你目前正在使用的那个。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T23:41:20.133

原生 JPEG 编码器是理想的，异步会很好，但可能仍然很慢（只是不阻塞）。另外的选择：

```
var pixels:ByteArray = bitmapData.getPixels(bitmapData.rect);
pixels.compress(); 
```

我不确定本机性能，性能绝对取决于您拥有的图像类型。

# php - php表单插入到mysql

> ID：15009941
> 
> 赞同：0
> 
> 时间：2013-02-21T18:43:49.957
> 
> 标签：php, html, mysql

我的 php 代码似乎无法正常工作。昨天还在工作，但我一定改变了一些东西，现在没有了。据我所知，是 if($word) 导致了问题。else 部分起作用，它与 mysql db 连接，但那个 if 语句什么也不做。

这是php：

```
<?php
  require('connect.php');
  $word=$_POST['word'];
  $submit=$_POST['submit'];

  if($submit){
      if($word){
         mysql_query("INSERT INTO words (word) VALUES ($word)");
      }
      else{
         echo "Enter a word.";
      }
  }
?> 
```

这是html表单：

```
<form name="form" id="form" method="post" action="index.php">
    <p><label>Label</label></p>
    <p><input type="text" name="word" id="word" maxlength="16"/></p>
    <p><input type="submit" name="submit" id="submit" value="Save"/></p>
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T18:46:28.133

您应该立即停止使用此代码。它容易受到 SQL 注入的攻击。您需要学习如何绑定参数以防止这种情况发生，以及如何使用未弃用的 API。我还建议您检查`REQUEST_METHOD`而不是 if`$_POST['word']`设置，因为它可以为空。

由于您没有任何类型的错误捕获功能，因此很难判断可能是什么问题。如果我不得不猜测，这可能是因为您在发布的变量周围**缺少单引号：**

```
...INSERT INTO words (word) VALUES ('$word')... 
```

使用参数：

```
<?php

if( $_SERVER['REQUEST_METHOD'] == 'POST' && !empty($_POST['submit']) ) {

    $link = mysqli_connect('localhost', 'my_user', 'my_password', 'world');

    /* check connection */
    if (!$link) {
        printf("Connect failed: %s\n", mysqli_connect_error());
        exit();
    }

    $stmt = mysqli_prepare($link, "INSERT INTO words (word) VALUES (?)");
    mysqli_stmt_bind_param($stmt, 's', $_POST['word']);

    /* execute prepared statement */
    mysqli_stmt_execute($stmt);

    printf("%d Row inserted.\n", mysqli_stmt_affected_rows($stmt));

    /* close statement and connection */
    mysqli_stmt_close($stmt);

    /* close connection */
    mysqli_close($link);
}
?> 
```

[文档](http://php.net/manual/en/mysqli-stmt.bind-param.php)是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:46:58.583

您很可能需要引用您的`$word`价值...

```
INSERT INTO words (word) VALUES ('$word') 
```

正如评论中提到的......

[为什么我不应该在 PHP 中使用 mysql_* 函数？](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)

并且不要忘记输入清理。

[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php/60496#60496)

![xkcd.com](../Images/333b81cab6dadb1064b9d1eaeb4d961a.png)

# boolean - 简化布尔代数

> ID：15009949
> 
> 赞同：0
> 
> 时间：2013-02-21T18:44:28.017
> 
> 标签：boolean, signal-processing, boolean-logic, digital-logic

我试图证明`BC + !A!B + !A!C = ABC +!A`

我曾尝试使用德摩根定律，并用 和 代替`X for !A!B`，`Y for !A!C`但是我在这方面没有取得任何进展。

我也尝试过像这样对 A 进行 gruopoing `!A(!B+!C)`，但是我还是无法到达任何地方。如果有人能指出我正确的方向，帮助我解决问题，向我展示一个可以做到的工具，等等。我会感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:53:57.663

```
 BC + !A!B + !A!C
= BC + !A(!B + !C)          distributive law
= BC + !A!(BC)              De Morgan's law
= (A + !A)BC + !A!(BC)      identity and x OR !x = true
= A(BC) + !A(BC) + !A!(BC)  distributive law
= ABC + !A((BC) + !(BC))    distributive law
= ABC + !A                  x OR !x = true and identity 
```

# jax-ws - 修改内存中的wsdl，在Service.create(..)中使用

> ID：15009950
> 
> 赞同：1
> 
> 时间：2013-02-21T18:44:31.010
> 
> 标签：jax-ws, httpurlconnection

我有一个 JAX-WS，它的 WSDL 有以下行：

```
 <wsp:PolicyReference URI="policy:Xyz-UserNameToken-Plain.xml"/> 
```

我不得不在上面手动注释并将修改后的 WSDL 放在类路径中

我的 JAX-WS 客户端代码如下：

```
URL wsdlLocation = new URL("host:port/WSServiceImpl/WSService");
QName serviceName = new QName("http://ws2.service.abc.xyz.com/", "WSService");

Service s = Service.create(this.getClass().getResource("WSService.wsdl"), serviceName);
=========================================================================================
WSService wsService = s.getPort(WSService.class); 
```

正如您在上面看到的，带下划线的行读取 WSService wsdl 文件。

我不想阅读手动预编辑的 WSDL 我宁愿想即时阅读 WSDL URL 并编辑它（通过评论

我猜它可以通过使用对象读取 wsdl `HttpURLConnection`，修改内存中的 wsdl 并在`Service.create(....)`

从`HttpURLConnection`，我可以即时读取 WSLD 并创建一个字符串形式的 WSDL，它不会有

但问题是我如何在运行时将此字符串转换为 URL 对象？因为 URL 应该在::`Service.create(URl url, QName qName)`

有人可以提供示例代码吗？

问候，

# mysql - MySQL最大数据包错误centOS 6.3

> ID：15009954
> 
> 赞同：0
> 
> 时间：2013-02-21T18:44:42.450
> 
> 标签：mysql, linux

刚刚尝试从 vBulletin 论坛导入 .SQL 备份。

几分钟后，我收到此错误：

[http://gyazo.com/1b50e0f20cdec58ebe5722965857595c.png](http://gyazo.com/1b50e0f20cdec58ebe5722965857595c.png)

为什么会这样？

我假设我必须增加数据包的大小，但是如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:58:01.923

在`my.cnf`配置文件中，您可以配置该值。可能已经有一个可以编辑的设置。如果没有，请添加它。有关详细信息，请参阅 MySQL 手册。

但是，这不是 StackOverflow 的问题，而是 ServerFault 的问题。在那里看到这个问题：[https ://serverfault.com/questions/244818/setting-max-allowed-packet-commandline-vs-config](https://serverfault.com/questions/244818/setting-max-allowed-packet-commandline-vs-config)

# svn - 为什么 svn 忽略我的 -r 参数？

> ID：15009958
> 
> 赞同：2
> 
> 时间：2013-02-21T18:44:55.327
> 
> 标签：svn

我正在尝试获取已删除文件的内容。

```
$ svn log -v path_to_file/
...
r123 | user | date
D path_to_file/the_file 
```

好的，所以它在修订版 123 中被删除.. 并在修订版 10 左右添加。

```
$ svn cat -r 122 svn+ssh://server/repo/path_to_file/the_file
svn: File not found: revision 554, path '/path_to_file/the_file'
$ svn log -r 122 svn+ssh://server/repo/path_to_file/the_file
svn: File not found: revision 554, path '/path_to_file/the_file' 
```

这是为什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:09:06.627

`svn cat -r xxx <path to file>`文件被删除后不工作；
如果要获取该文件的副本，请使用以下命令：
`svn copy <path to file>@xxx <path to workspace>`其中*xxx*是修订版

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T20:11:55.193

我能够使它与以下内容一起使用：

```
svn cat svn+ssh://server/repo/path_to_file/the_file@122 
```

这让我前段时间用一个合并命令，似乎 svn 正在慢慢迁移到 '@rev' 而不是'-r rev'。

log 命令可以同时采用这两个选项，但结果不同：

```
svn log -v -r 122 svn+ssh://server/repo/path_to_file/the_file@122
svn log svn+ssh://server/repo/path_to_file/the_file@122 
```

第一个日志请求只会给出 r122 的日志。第二个日志命令执行 r122:0

# forms - Ajax表单提交、验证并返回成功或失败

> ID：15009960
> 
> 赞同：3
> 
> 时间：2013-02-21T18:45:17.403
> 
> 标签：forms, jquery, form-submit

搜索并浏览了论坛，并尝试了许多 ajax 和表单提交的示例，但对于我想要实现的目标，没有任何东西可以接近。我必须承认我已经为此转了好几天，需要一个有一双新眼睛的人。

我有 2 页： page1.php page2.php

使用 Google jquery/1.9.0/jquery.js 并在本地开发。

page1.php 如下（为了清楚起见，我省略了 head 脚本和 body/html 标签）

```
$(document).ready(function() {
$('#theForm').submit(function(){
$.ajax({
      type: "POST",
      url: "page2.php",
      data: 'html',
     success: function(html){
        if(html == 'success'){
        $('#address').fadeOut('slow');
        $('#done').fadeIn('slow');
    }else if(html == 'fail'){
       alert('fail');
    }
}
});
return false;
});
});

<div id="address">
<form action="page2.php" method="post" name="theForm">
<input name="checkname" type="text" id="checkname">
 <input name="Proceed" type="submit" id="submit" value="Next Page" />
</form>
</div>
<div id="done">
That Worked!
</div> 
```

Page2.php 有一个 mysql 查询，用于检查数据库中的 checkname 并根据结果回显“成功”或“失败”。查询运行良好，没有显示任何错误。

提交表单时 page2.php 加载并在浏览器中显示“成功”。Firebug 在响应和 html 下也显示成功。firebug 中没有错误。

我基本上希望 page1.php 保留并隐藏 #address div 并显示 #done div 何时从 page2.php 传递成功

希望有人可以提供帮助。

**更新** 我试过这个测试页：

**ajaxone.php**

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.js"></script>
<script type="text/javascript">
$(document).ready(function() {
$('#theForm').submit(function(){

$.ajax({
type: "POST",
url: "ajaxtwo.php",
data: 'html',
success: function(html){
    if(html == 'success'){
        $('#address').fadeOut('slow');
    $('#payment').fadeIn('slow');
        alert('ok');
    }else if(html == 'fail'){
       alert('fail');
    }
}
});
    return false;
});
});
</script>
<style type="text/css">
#payment{
visibility:hidden;
}
</style>

<div id="address">
<form action="ajaxtwo.php" method="post" name="theForm" id="theForm">
<p>
    <input name="name" type="text" id="name">
</p>
  <p>
    <input type="submit" name="submit" value="submit">
</p>
</form></div>
<div id="payment">Name is correct</div> 
```

**ajaxtwo.php**

```
print_r($_POST);
if($_POST['name'] == 'rob'){
echo 'success';
}else{
echo 'fail';
} 
```

使用上面的萤火虫显示以下错误：

Array ( ) 未定义索引：名称失败

但是，当我删除 ajax 调用时，提交工作并传递数据。那么，我是否可以假设如果您没有在 ajax 调用中指定表单变量，则不会将任何内容发布到下一页？

**更新 2** 对不起，我在这里回答自己。看来您需要指定要在 ajax 调用中发送的表单数据。我刚刚添加了：

```
$('#theForm').serialize(); 
```

在 ajax 调用中，现在表单提交没有错误。但是，这仍然会转到 ajaxtwo.php，并且不会在 ajaxone.php 页面上显示成功或失败。所以我的下一个阶段是在 ajaxone.php 上显示成功或失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:19:53.693

您需要添加`id="theForm"`表单标签本身。

**例子：**

```
<form action="page2.php" method="post" id="theForm" name="theForm"> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-17T19:53:27.203

我会说，添加一个然后让 jq 读取输出然后相应地重定向，或者使用 php 根据 $success_fail 结果进行重定向。

# java - 如何在 JAVA 中使用 rtrim PHP 函数

> ID：15009963
> 
> 赞同：0
> 
> 时间：2013-02-21T18:45:31.043
> 
> 标签：java, jsp, csv, trim

从复选框中，我得到了一组值。在这里，我正在循环并获取这样的 CSV 值。我正在尝试删除java中的最后一个逗号。我试过谷歌搜索和堆叠。我可以得到一些它会做到这一点的功能。

```
PHP,JAVA,MYSQL, 
```

在 PHP 中，我们执行 rtrim('PHP,JAVA,MYSQL,',',');

如何在 JAVA 中做同样的事情。希望我的问题很清楚。提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:48:57.063

如果您的数组如下：

PHP, JAVA, MYSQL,

然后，您始终拥有最后一个将被删除的元素。

所以，然后你使用：

```
String commaDeleted = yourStringWithComas.subString(0,yourStringWithComas.length - 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:50:28.483

[您可以使用来自http://www.dzone.com/snippets/remove-space-using-trim-ltrim](http://www.dzone.com/snippets/remove-space-using-trim-ltrim)的代码执行正则表达式：

```
String.prototype.trim = function() {
    return this.replace(/^\s+|\s+$/g,"");
}
String.prototype.ltrim = function() {
    return this.replace(/^\s+/,"");
}
String.prototype.rtrim = function() {
    return this.replace(/\s+$/,"");
} 
```

例子：

```
// example of using trim, ltrim, and rtrim
var myString = " hello my name is imdadhusen  ";
alert("*"+myString.trim()+"*");
alert("*"+myString.ltrim()+"*");
alert("*"+myString.rtrim()+"*"); 
```

编辑：

而不是 \s 您应该将其更改为任何漂浮的船：或用它创建一个函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:51:43.620

采用[`String.substring(int beginIndex, int endIndex)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int,%20int%29)

`"abcde".substring(0, 4)`返回`"abcd"`

# javascript - 动画表格单元格中的颜色Javascript

> ID：15009969
> 
> 赞同：1
> 
> 时间：2013-02-21T18:45:43.663
> 
> 标签：javascript, html

我用php做了一个表。这是 HTML 生成的代码。 [http://pastebin.com/4X5RmA8B](http://pastebin.com/4X5RmA8B)

我在 Javascript X 和 Y 中有 2 个数组，它们对应于某些单元格的 x 和 y 坐标。我想使用 javascript 动态更改这些单元格的背景颜色。即坐标取自 X 和 Y 数组的每个单元格的颜色会在 2 秒后发生变化。因此，坐标在 X 和 Y 数组中的单元格的颜色会在 2 秒后继续变化。我无法使用 javascript 更改单元格的颜色。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:02:14.840

您可以使用 CSS 颜色转换，或者您可以使用 javascript 属性转换，我建议您在处理 javascript 中的动画时使用框架。

虽然这样做的能力在普通的 jQuery 中并不固有......（即 jQuery Color）。

来自 jquery 网站：

> 大多数非数字属性无法使用基本的 jQuery 功能进行动画处理（例如，宽度、高度或左侧可以进行动画处理，但背景颜色不能进行动画处理，除非使用 jQuery.Color() 插件） [http://api .jquery.com/animate/](http://api.jquery.com/animate/)

# android - 谷歌地图 API v2 api 密钥

> ID：15009972
> 
> 赞同：1
> 
> 时间：2013-02-21T18:45:48.320
> 
> 标签：android, google-maps, xamarin.android

我正在开发一个使用 Google Maps API v2 的 Android 应用程序。我在谷歌网站上生成了一个 API 密钥，但它总是在一天左右后变得不活跃。

如何获得更永久的 API 密钥，这样我就可以让用户测试我的应用，而不会让它每天都处于非活动状态？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:58:54.220

也许您正在单击现有密钥右侧的“生成新密钥”链接。那是为了替换现有的密钥，原始密钥将在 24 小时后被删除。

相反，请单击页面底部的“创建新的 Android 密钥...”。

# c# - 将字符串转换为十进制 - 留下数字

> ID：15009976
> 
> 赞同：0
> 
> 时间：2013-02-21T18:46:00.917
> 
> 标签：c#

我有一个允许用户输入价格的表单，例如，`10.00`.

但是，由于表单是purley 文本，用户可以输入`$10.00`或`10.00 for book`. 我无法更改 UI，这必须在后台完成。所以基本上我只想要一个十进制结果。

我开始这样做

```
public decimal FilterPrice(dynamic price) {
    string convertPrice=price.ToString();

    var filterNumber=
        from letter in convertPrice
        where char.IsDigit(letter)
        select letter;

    return something;
} 
```

但是，这将剥离`.`。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T18:57:32.363

你可以用一个简单的正则表达式来解决它。

```
 public bool TryGetPreisAsDecimal(string price, out decimal convertedPrice)
    { 
        Match match = Regex.Match(price,@"\d+(\.\d{1,2})?");

        if (match != null)
        {
            convertedPrice = decimal.Parse(match.Value);
            return true;
        }
        else
        {
            convertedPrice = 0.0m;
            return false;
        }
    } 
```

# powershell - powershell 从 csv 创建具有特定内容的多个文件

> ID：15009979
> 
> 赞同：2
> 
> 时间：2013-02-21T18:46:17.750
> 
> 标签：powershell, csv, createfile

所以，问题是我必须创建一个 300 个 ini 文件。在 CSV 文件中，我有一个计算机名称和 MAC 地址。Ini 文件必须以 MAC 地址命名。为此，我有解决方案：

```
$data = Import-CSV d:\import.csv
ForEach ($i in $data){

$name = $i.name
$MAC = $i.MAC

New-Item -ItemType file -name $_.MAC.ini
} 
```

但是在这段代码中，我需要在这些 inies 中放置一些 txt。例如：

```
some value
some text
some value=$_.name
and more txt 
```

内容必须具有与 CSV 中的 MAC 地址在同一行中的某个值的计算机名称。

在这里，我需要帮助。首先，我尝试使用 Add-Content，但没有运气:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:20:28.277

```
Import-CSV d:\import.csv | %{ 
    "some value`r`nsome text`r`nsome value=$($_.name)`r`nand more txt" | sc "$($_.MAC).ini" 
} 
```

% 是 Foreach-Object 的简写，sc 是 Set-Content 的别名。

确保您的 MAC 地址使用破折号而不是冒号，因为冒号在文件名中无效。

# java - 从地名实现 Google API 搜索

> ID：15009985
> 
> 赞同：0
> 
> 时间：2013-02-21T18:46:46.060
> 
> 标签：java, android, api, google-maps, geonames

我一直在关注一个很棒的教程，它允许用户输入邮政编码，然后 ListView 显示全球与邮政编码匹配的地方。单击填充的 ListView 中的地址后，其位置将由 mapView 上的标记显示。

我已经完成了本教程，并且已经掌握了 HTTP Web 服务。目前，代码正在使用“geonames”数据库中的在线服务来查询提供的**邮政编码，我现在想在我的代码中实现 Google API 以搜索超市。**

geonames 使用来自提供的邮政编码的 JSON 响应，格式如下：

```
{"postalCodes":[{"adminName2":"El Paso","adminCode2":"041","adminCode1":"CO","postalCode":"80907","countryCode":"US","lng":-104.817034,"placeName":"Colorado Springs","lat":38.876001,"adminName1":"Colorado"}]} 
```

上面的字符串来自邮政编码“80907”。

这是地名的字符串 URL：

```
private static final String GEONAME_RESTURL 
    = "http://api.geonames.org/postalCodeSearchJSON?maxRows=8&username=demo&postalcode="; 
```

我已阅读 Google API 文档并找到以下“附近搜索请求”搜索字符串：

```
https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AddYourOwnKeyHere 
```

这是返回邮政编码匹配的代码：

```
 DataWrapper wrap = new DataWrapper();
wrap = wrap.fromJson(responseString);
return wrap.postalCodes; 
```

如何从中找到返回的 JSON 搜索字符串，如上图所示，以及 Google 超市搜索字符串的地理名称结果？

我意识到我可以将搜索半径固定为指定的数字，但我想接收我的搜索字符串的匹配项以列出超市。

希望我对这个问题已经足够清楚了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:03:44.387

看起来我设法通过简单地使用 geonames API 解决了这个问题。我不确定它是否像 Google API 一样完整，但它的注册值得一看。

# .net - 调试时看不到变量

> ID：15009986
> 
> 赞同：1
> 
> 时间：2013-02-21T18:46:47.383
> 
> 标签：.net, visual-studio-2012

今天早上我遇到了最奇怪的问题。我正在单步执行代码，调试器中无法访问某些变量：

![调试](../Images/e1c14b9f8809511dc1e7abf4d10dc2f3.png)

正如您在上面看到的，调试器无法访问 a 和 b，而 'TrsApp' 变量是。我在模块窗口中突出显示了我正在调试的 dll，因此您可以看到 pdb 已正确加载且未优化。

我当然试图重建一切，但我仍然有问题。

我有一台完全更新的 Win 7 x64 机器。Visual Studio 已应用更新 1。该项目使用 .Net Framework 4.0

更新：我真的认为这是我的机器出了问题，所以我将解决方案发送给了一位开发人员。同样的结果。他看不到变数。到目前为止，我正在逐步执行的函数中定义的任何变量似乎都不可见。到目前为止，我在外部定义的所有变量似乎都是可见的。

更新 2：我认为这可能与我们通过反射加载 dll 的事实有关。不知道为什么这很重要，但这确实是这个程序集和其他程序集之间的唯一区别。您会在模块窗口中注意到目录不同。

# html - 将一个 div 放在另一个绝对定位的 div 下

> ID：15009991
> 
> 赞同：-2
> 
> 时间：2013-02-21T18:47:06.097
> 
> 标签：html, css

我有一个 div `position`，`absolute`我们称之为`abs`。直接在（不在）该 div 之后，我创建了一个名为`footer`. `Footer`没有位置值，尽管我尝试将位置设置`relative`为相同的结果。我的问题是它`footer`直接出现在我在我的 div 中的图像之上，`abs`尽管在那之后被声明了。我认为这与 的绝对定位有关`abs`，因为我通常定位的 div 的行为与我期望的一样：它们出现在其他 div 的下方。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:13:17.920

好的，所以`<div id="container"> many stacked absolute divs in here </div><div id="footer">footer stuff</div>`将 #container css 设置为所需的高度/最小高度。容器和页脚在流程中，而堆叠的 div 不在。

# c# - 为什么 C# 的 Replace 方法需要在我的代码中同时替换“\n”和“\r”？

> ID：15009993
> 
> 赞同：-1
> 
> 时间：2013-02-21T18:47:08.743
> 
> 标签：c#, string, razor, replace

使用 Replace 函数时，我注意到在尝试替换值“\r”和/或“\n”时没有预料到的事情。

我在外部 .cs 文件中有以下方法（正在进行中）：

```
public static string UrlEncode(string stringItem)
{
    stringItem = stringItem.Replace("%", "%25").
    Replace("\"", "%22").Replace("#", "%23").
    Replace("\\", "%5C").Replace("&", "%26").
    Replace("'", "%27").Replace("+", "%2B").
    Replace("\r", "").Replace("\n", " ");
    return stringItem;
} 
```

这会产生所需的结果（即，用单个空格替换任何新行）。

所以，如果我用一个“enter-key-press”传入一个字符串，它会存储一个空格。

我不明白的（因此是问题）：为什么，如果我只使用“替换（'\r'，''）”或“替换（'\n'，''）”它仍然存储一个新队。我可以理解其中一个不起作用，但为什么我需要同时包含两者？如果 '\r' 或 '\n' 替换方法都不能单独工作，为什么同时使用这两种方法？

我问这个问题是因为在不理解的情况下使用代码（至少对我来说）是一个非常糟糕的习惯。此外，我对我打算使用的代码了解得越多，我就越能在未来根据情况利用它的有用性。

-------------------------另一个特点------------------------ -----

如果我只使用 Replace("\r", " ")，它会提供空间（好像替换有效）但不会摆脱新行。

或者，如果我只使用 Replace("\n", " ")，它会保留新行，然后提供空间。

----------------------最后一点---------- ----------

如果有任何问题，输出将进入 cshtml 页面上的文本区域。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T18:51:55.523

这是因为你的输入数据中包含`"\r\n"`了（回车+换行）对，这是很常见的，实际上是HTTP标准所*要求*的（方法名中的“URL”表示这里可能涉及到HTTP）数据。当您查看数据时，渲染器对所有三个行尾（单独、单独和单独）的行为`"\r\n"`都`"\r"`相同`"\n"`。这是由[鲁棒性](http://en.wikipedia.org/wiki/Robustness_principle)决定的行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T18:53:47.723

这是因为，虽然有很多可能的新行序列，但 windows（在其他上下文中）常用的一种是`\r\n`. 看起来这就是您的数据实际包含的新行分隔符。

但是，某些应用程序/环境仅用`\r`作换行符，而其他应用程序/环境仅使用`\n`. 因此，许多应用程序已经学会在显示文本时将这三个可能值中的任何一个解释为新行。

如果你*只* `\r`用一个空格替换，你最终会得到一个空格`\n`，如果你的输入最初`\r\n`是 ，那么它会被解释为一个空格，后跟一个换行符。同样，仅替换`\n`会导致换行符 ( `\r`) 后跟一个空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:49:39.057

您是否尝试过替换 Environment.NewLine？

如

```
str.Replace(Environment.NewLine, " "); 
```

# javascript - 图像调整Jquery

> ID：15009996
> 
> 赞同：1
> 
> 时间：2013-02-21T18:47:20.927
> 
> 标签：javascript, jquery, html, css, ajax

这是网络： http: [//ldlocal.web44.net/test2/gallery.html](http://ldlocal.web44.net/test2/gallery.html)

可以在这里下载：http: [//ldlocal.web44.net/test2/test.zip](http://ldlocal.web44.net/test2/test.zip)

我已经设法自动适应每行画廊的图像，具体取决于它是水平的（每行一个图像）还是垂直的（每行两个图像）。

现在的问题是我希望图像是可缩放的（在窗口调整大小时调整大小），但我不知道如何实现它。我应该怎么做？

这是我的代码：

```
var gallery = new Gallery($('#gallery_images_inner'));

function Gallery(selector){

this.add_module = function(type, image){
    var container = $('<div />' , {
        'class' : 'gallery_container'
    }).append(image);
    if(type == 'horizontal'){
        var h_ar = image.attr('height') / image.attr('width');
        container.css({
            'width' : selector.width(),
            'height' : selector.width()*h_ar
        })
    }
    if(type == 'vertical'){
        container.css({
            'width' : v_width,
            'height' : v_height
        })
    }
    container.appendTo(selector);
    container.children('img').fitToBox();
}
var _this = this;
var gutter = 0;
// start vars for counting on vertical images
var v_counter = 0;
var w_pxls = 0;
var h_pxls = 0;
// iterates through images looking for verticals
selector.children('img').each(function(){
    if($(this).attr('width') < $(this).attr('height')){
        v_counter++;
        h_pxls += $(this).attr('height');
        w_pxls += $(this).attr('width');
    }
})
// calculates average ar for vertical images (anything outside from aspect ratio will be croped)
var h_avrg = Math.floor(h_pxls/v_counter);
var w_avrg = Math.floor(w_pxls/v_counter);
var v_ar = h_avrg/w_avrg;
var v_width = (selector.width())/2;
var v_height = v_width*v_ar;
selector.children('img').each(function(){
    if(parseInt($(this).attr('width')) > parseInt($(this).attr('height'))){
        _this.add_module('horizontal', $(this));
    }else{
        _this.add_module('vertical', $(this));
    }
})
selector.isotope({
    masonry: {
        columnWidth: selector.width() / 2
    }
});

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:12:16.540

@media='sceen' 或者你正在使用的任何东西，然后

```
img {max-width: 100%, height: auto;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:15:30.680

您可以在 javasript 中通过附加到此处介绍的窗口调整大小事件[http://api.jquery.com/resize/](http://api.jquery.com/resize/)

# javascript - 减少在同一 HTML 元素上使用 getElementById 的次数

> ID：15009997
> 
> 赞同：2
> 
> 时间：2013-02-21T18:47:22.037
> 
> 标签：javascript, html, global-variables, getelementbyid

在将相同元素传递给多次调用的函数的情况下，将元素存储为全局变量是否更有效？

例如，您有一个函数，它在每次按下按键时都被调用，并采用按钮的参数。

```
<input type="button" onkeydown="func1(document.getElementById('menu')" />
<div id="menu">
Dynamic text here
</div> 
```

而不是拥有

```
function func1(div)
{
....//body of function
} 
```

这样做更好吗

```
var div//global variable
function func1()
{
  if(div === null)
  {
    div = document.getElementById('menu')
  }
  ...//rest of code
} 
```

并调用它`<input type="button" onkeydown="func1()" />`

还是全局变量总是一件坏事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:52:20.327

> 将元素存储为全局变量是否更有效？

严格来说，答案是肯定的。您正在保存函数调用。但在实践中，差异可能可以忽略不计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:52:42.057

全局变量对于一个大项目来说是危险的，你将无法控制变量，它更有可能发生冲突等等......对于你的问题，你可以创建一个对象来保存一些函数的缓存，这个使用更少的全局变量并最好地组织代码的方式。全局变量需要适度使用。=D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:54:07.010

您可以将元素添加为函数的属性，如下所示：

```
function func1()
{
  console.log(func1.element);
}

func1.element = document.getElementById('menu');

func1(); 
```

您还可以检查该元素是否存在于函数中：

```
function func1()
{
  if(func1.element == undefined) {
    func1.element = document.getElementById('menu'); 
  }

    console.log(func1.element);
}

func1(); 
```

这将使您远离全局变量，并仍然保留缓存元素的好处。

# sql-server - 为什么 Microsoft SQL Server 会开始为一个表抛出死锁异常，而以前从未有过呢？

> ID：15009998
> 
> 赞同：0
> 
> 时间：2013-02-21T18:47:26.783
> 
> 标签：sql-server

几天后，我们开始在我们的一个应用程序中频繁抛出异常。这些都是以下形式：

```
Exception : com.microsoft.sqlserver.jdbc.SQLServerException: 
Transaction (Process ID 66) was deadlocked on lock resources with 
another process and has been chosen as the deadlock victim. 
Rerun the transaction. 
```

一些有趣的事实：

*   这些异常都发生在单个表上的特定更新中。
*   由于系统中发生的事情的方式，通常会在不同的线程中同时触发一大堆这些更新。但是，只要系统一直在运行，这种行为就不会导致问题（据任何人所知，我们也知道，异常严重地使日志混乱），SQL Server 已经以排队的方式正确处理了这个问题没有锁定问题。
*   大量其他更新查询将同时针对其他表发生，创建相同的情况，但不会引起问题。
*   这是 SQL Server 2005
*   据称服务器、数据库、模式或表配置没有任何变化。

但是，我怀疑最后一个说法是否属实。关于服务器配置可以改变哪些类型的事情会改变服务器处理同时更新的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:52:54.197

如果表变得碎片化或统计信息随着时间的推移变得陈旧，就会发生类似的事情。也许有人删除了索引？另请参阅[主动死锁通知](http://blogs.lessthandot.com/index.php/DataMgmt/DBAdmin/MSSQLServerAdmin/proactive-deadlock-notifications)，了解如何在死锁发生时收到通知