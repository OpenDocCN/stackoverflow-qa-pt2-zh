# StackOverflow 问答 12918000-12918999

# twitter-bootstrap - 引导行内的流体缩略图

> ID：12918001
> 
> 赞同：0
> 
> 时间：2012-10-16T15:19:19.740
> 
> 标签：twitter-bootstrap, thumbnails, fluid-layout

我试图让我的缩略图在一行内均匀分布。他们每个人都是一个span2，有一个240x240的图像，行是span12。所以当我有 6 个时，它看起来很完美。当我有 5 个时，它只会将最后 2 个跨度留空。我应该怎么做才能自动均匀地间隔 span2 缩略图，以便它以相等的间距占据整行？

添加代码：

```
 <div class="row-fluid">
  <ul class="thumbnails">
     <li class="span2">
       <a href="#edithotelModal" class="thumbnail" data-toggle="modal">
        <img src="http://placehold.it/240x240" alt="">
        <h3>Room 1</h3>
        <p> <%= Forgery(:lorem_ipsum).words(20) %></p>
         </a>
     </li>

     <li class="span2">
       <a href="#editroomtypeModal" class="thumbnail" data-toggle="modal">
       <img src="http://placehold.it/240x240" alt="">
       <h3>Room 2</h3>
       <p> <%= Forgery(:lorem_ipsum).words(20) %></p>
       </a>
     </li>

     <li class="span2">
        <a href="#editroomModal" class="thumbnail" data-toggle="modal">
        <img src="http://placehold.it/240x240" alt="">
        <h3>Room 3</h3>
        <p> <%= Forgery(:lorem_ipsum).words(20) %></p>
        </a>
     </li>

     <li class="span2">
        <a href="#managepricesModal" class="thumbnail" data-toggle="modal">
        <img src="http://placehold.it/240x240" alt="">
        <h3>Room 4</h3>
        <p> <%= Forgery(:lorem_ipsum).words(20) %></p>
        </a>
     </li>

     <li class="span2">
        <a href="#manageextrasModal" class="thumbnail" data-toggle="modal">
        <img src="http://placehold.it/240x240" alt="">
        <h3>Room 5</h3>
        <p> <%= Forgery(:lorem_ipsum).words(20) %></p>
        </a>
     </li>

</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:11:58.473

如果您只使用“标准”引导程序，我认为这是不可能的，因为不同的跨度有自己的值。

您可以创建自己的课程 - 以满足特殊需求，但您必须计算百分比。

也许这是一个很好的阅读： [引导流体行宽](https://stackoverflow.com/questions/12380384/bootstrap-fluid-row-width)

还有一个： [http ://coding.smashingmagazine.com/2009/06/09/smart-fixes-for-fluid-layouts/](http://coding.smashingmagazine.com/2009/06/09/smart-fixes-for-fluid-layouts/)

```
.my-span5 {
 width: // Should be 20% minus a few something
 margin-left: // do the calculations...
} 
```

您还可以使用 javascript 来计算包含元素的宽度，并将其均匀地分配给您的元素 - 但您必须牢记边距！

# windows-8 - 如何抢先确定电子邮件何时到达？

> ID：12918012
> 
> 赞同：1
> 
> 时间：2012-10-16T15:19:49.567
> 
> 标签：windows-8, microsoft-metro, email

我想收听传入的电子邮件，如果它们具有某种格式，则拦截它们（处理它们并最好阻止它们继续进入电子邮件收件箱）。

我应该为此监控什么事件？是否有类似“FileSystemWatcher”的东西知道何时收到电子邮件，或者......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:24:30.353

你问的是不可能的。

原因是：您在收听哪个电子邮件帐户？是什么引发了事件？您引用了文件观察器，但您看到文件观察器与电子邮件相比有多么简单吗？如果当前用户有 10 个电子邮件帐户怎么办 - 您希望操作系统做什么？为每封电子邮件引发一个 NewEmail 事件？而且，如果他们正在运行 Outlook、Windows Live Mail、Windows 8 Mail 和其他一些客户端怎么办。操作系统如何首先知道？如果每个客户端都在监视不同的客户端，您期望会发生什么？出于这个原因，你问的是不可能的。

> 简而言之：操作系统没有监控用户电子邮件帐户。

但是，如果您尝试完成的是监控电子邮件帐户并在该帐户收到新电子邮件时做出响应，那么**这不再是 Windows 8 的问题**了。这是一个 POP 或 EAS 问题，您可以像电子邮件客户端一样连接和监控帐户。在客户端上执行此操作也不明智。由于 Windows 8 应用程序并不总是在运行 - 服务器/服务将是一种更智能的方法。

但是，特别针对您的问题：不可能。

祝你好运，我希望能回答你的问题。

# html - 列表以错误的方式对齐

> ID：12918015
> 
> 赞同：0
> 
> 时间：2012-10-16T15:20:15.263
> 
> 标签：html, css

这是我的 HTML

```
<div id="footer">
    <div id="footer_content">
           &#169; 2012 Company, Inc.
           <ul>
                <li><a href="/contact">Contact</a></li>
                <li><a href="/terms">Terms</a></li>
                <li><a href="/privacy">Privacy</a></li>
           </ul>
    </div>
</div>​ 
```

这是我的 CSS

```
/* FOOTER */ 
#footer {
    position: relative; 
    margin-top: -60px; 
    text-size:12px; 
    height: 60px; 
    clear:both; 
    background-color: blue; 
    line-height: 60px; 
    text-align:right
} 
#footer_content { 
    width: 940px; 
    margin: 0 auto;
}
#footer ul { 
    list-style: none; 
    position: absolute; 
    top: 0px; 
}
#footer ul li { 
    float: left; 
    margin-right: 5px; 
}
#footer ul li a { 
    font-weight: bold; 
    margin-right: 5px; 
    text-decoration: none; 
}
#footer ul li a:hover {  }​ 
```

目前版权在右边，链接在左边。应该反过来。您打算进行哪些调整来移动它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:42:31.253

我非常同意 Space Beers 的说法，但有一些方法可以改善这一点。

HTML：

```
 <div id="footer">
        <div id="footer_content">
           <ul>
               <li><a href="/contact">Contact</a></li>
               <li><a href="/terms">Terms</a></li>
               <li><a href="/privacy">Privacy</a></li>
           </ul>
           <div class="copyright">
               &#169; 2012 Company, Inc.
           </div>
        </div>
    </div>​ 
```

CSS：

```
 #footer {
        position: relative; 
        margin-top: -60px; 
        text-size:12px; 
        height: 60px;
        background-color: blue; 
        line-height: 60px; 
        text-align:right
    } 
    #footer_content { 
        width: 940px; 
        margin: 0 auto;
    }
    #footer ul { 
        float:right;
        list-style: none; 
    }
    #footer ul li { 
        display:block;
        float: left; 
        margin-right: 5px; 
    }
    #footer ul li a { 
        font-weight: bold; 
        margin-right: 5px; 
        text-decoration: none; 
    }

    #footer .copyright{
        float:left;
    } 
```

这应该与浏览器完全兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:22:14.307

将您的公司信息放在一个包含的 div 中，然后将其浮动。

```
<div id="footer">
    <div id="footer_content">
       <div class="company_info">&#169; 2012 Company, Inc.</div>
       <ul>
          <li><a href="/contact">Contact</a></li>
          <li><a href="/terms">Terms</a></li>
          <li><a href="/privacy">Privacy</a></li>
       </ul>
     </div>
</div>​

.company_info{
    float: left;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-16T15:29:57.213

`display:inline;`在 li 类中使用

# django - “添加或编辑”上的 permission_required_or_403 装饰器？

> ID：12918016
> 
> 赞同：0
> 
> 时间：2012-10-16T15:20:16.340
> 
> 标签：django, forms, permissions, decorator, django-guardian

我有一个典型的 django 视图设置，用于添加新的或编辑当前的“书”模型（通过表单）。这是性质的：

```
def bookedit(request, bookid=None):
    if bookid:
        book = get_object_or_404(Book, pk=bookid)
    else: 
        book = Book()

    if request.method == 'POST':
        <form handling code.....> 
```

我现在想在上面添加一个装饰器，以限制对创建这本书的用户进行编辑。使用 django-guardian 我有以下装饰器来包装上面的代码：

```
@permission_required_or_403('myapp.edit_book', (Book, 'id', 'bookid')) 
```

这在编辑已经创建的书籍的情况下可以正常工作，即如果用户不是创建者，则会抛出 403。但是，在添加新书时 bookid 是空的并且会使装饰器代码崩溃。有没有处理这种情况的好方法（不分离编辑和添加功能）？

谢谢，格里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:14:28.913

我很抱歉，但那是不可能的。django-guardian 不是为该请求而构建的。无论如何，我建议自己创建所有 CRUD 视图（创建、读取、更新、删除）。

# objective-c - 核心数据组 NSDate 成月/年

> ID：12918017
> 
> 赞同：0
> 
> 时间：2012-10-16T15:20:17.120
> 
> 标签：objective-c, core-data

假设我在一个表中有一些 NSDates：

*   2012 年 1 月 11 日
*   2012 年 1 月 16 日
*   2012 年 2 月 14 日
*   2012 年 4 月 13 日
*   2012 年 4 月 14 日
*   2012 年 4 月 18 日

我想按月份和年份对这些日期进行分组，以便得到：

*   1/2012
*   2012 年 2 月
*   2012 年 4 月

我目前求助于获取表中的每条记录，`valueForKeyPath`对日期列执行 a，提取`NSDateComponents`结果并将其存储在`NSSet`. 这似乎有点低效。

我想知道是否有办法编写一个 NSPredicate 将这些日期分组在数据库端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:54:45.417

我做了类似的事情，我在名为 的实体中使用了一个额外的属性`sortDate`。我从我的自定义日期设置器中设置了 sortDate。

像这样的东西：

```
- (NSDate *)monthDateFromDate:(NSDate *)date {
    NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *components = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit fromDate:date];
    NSDate *monthDate = [calendar dateFromComponents:components];
    return monthDate;
}

- (void)setDate:(NSDate *)date {
    [self willChangeValueForKey:@"date"];
    [self setPrimitiveStartDate:date];
    [self didChangeValueForKey:@"date"];

    NSDate *sortDate = [self monthDateFromDate:date];
    [self willChangeValueForKey:@"sortDate"];
    [self setPrimitiveSortDate:sortDate];
    [self didChangeValueForKey:@"sortDate"];
} 
```

# android - Android 套接字 NullPointerException

> ID：12918021
> 
> 赞同：1
> 
> 时间：2012-10-16T15:20:24.260
> 
> 标签：android, sockets, nullpointerexception

我的 android 套接字有问题，我有两个 android 应用程序`Server`，并且`ServerClient` 在下面写的第二行中 `ServerClient`给出`nullPointerException`

```
InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
socket = new Socket(serverAddr, REDIRECTED_SERVERPORT); 
```

我检查`serverAddr`的是 10.0.2.2 ，但后来我看到套接字为空。有人可以帮忙吗？

编辑：使用此 serverAddress 我看到它无法访问，也许我必须手动使其可访问？这是来源

```
*ServerClient*

package com.example.serverclient;

import android.os.Bundle;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;

import android.app.Activity;
import android.util.Log;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.view.View;
import android.view.Menu;

public class MainActivity extends Activity {

    private Button bt;
    private TextView tv;
    private Socket socket;
    private String serverIpAddress = "10.0.2.2";
    private static final int REDIRECTED_SERVERPORT = 5000;

    // AND THAT'S MY DEV'T MACHINE WHERE PACKETS TO
    // PORT 5000 GET REDIRECTED TO THE SERVER EMULATOR'S
    // PORT 6000

    @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);
       bt = (Button) findViewById(R.id.myButton);
       tv = (TextView) findViewById(R.id.myTextView);
       try {
          InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
          socket = new Socket(serverAddr, REDIRECTED_SERVERPORT);
       } catch (UnknownHostException e1) {
          e1.printStackTrace();
       } catch (IOException e1) {
          e1.printStackTrace();
       }
       bt.setOnClickListener(new OnClickListener() {
          public void onClick(View v) {
             try {
                EditText et = (EditText) findViewById(R.id.EditText01);
                String str = et.getText().toString();
                OutputStream sk = socket.getOutputStream();

                PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())),true);
                out.println(str);
                Log.d("Client", "Client sent message");
             } catch (UnknownHostException e) {
                tv.setText("Error1");
                e.printStackTrace();
             } catch (IOException e) {
                tv.setText("Error2");
                e.printStackTrace();
             } catch (Exception e) {
                tv.setText("Error3");
                e.printStackTrace();
             }
          }
       });
    }
}

**Server**
package com.example.myserver;

import android.os.Bundle;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.ServerSocket;
import java.net.Socket;
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.widget.TextView;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    ServerSocket ss = null;
       String mClientMsg = "";
       Thread myCommsThread = null;
       protected static final int MSG_ID = 0x1337;
       public static final int SERVERPORT = 6000;

       @Override
       public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        TextView tv = (TextView) findViewById(R.id.TextView01);
        tv.setText("Nothing from client yet");
        this.myCommsThread = new Thread(new CommsThread());
        this.myCommsThread.start();
       }

       @Override
       protected void onStop() {
        super.onStop();
        try {
            // make sure you close the socket upon exiting
            ss.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
       }

       Handler myUpdateHandler = new Handler() {
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case MSG_ID:
                TextView tv = (TextView) findViewById(R.id.TextView01);
                tv.setText(mClientMsg);
                break;
            default:
                break;
            }
            super.handleMessage(msg);
        }
       };
       class CommsThread implements Runnable {
        public void run() {
            Socket s = null;
            try {
                ss = new ServerSocket(SERVERPORT );
            } catch (IOException e) {
                e.printStackTrace();
            }
            while (!Thread.currentThread().isInterrupted()) {
                Message m = new Message();
                m.what = MSG_ID;
                try {
                    if (s == null)
                        s = ss.accept();
                    BufferedReader input = new BufferedReader(new InputStreamReader(s.getInputStream()));
                    String st = null;
                    st = input.readLine();
                    mClientMsg = st;
                    myUpdateHandler.sendMessage(m);
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:26:37.827

你确定你没有得到 a`UnknownHostException`或 a`IOException`吗？其中之一必须被调用，否则`socket`不会为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T04:53:27.193

将错误 3 para 的（Exception e）更改为 NullPointerException，然后运行客户端并发送消息。错误 3 将不再显示在屏幕上，您将在 Myserver 上收到消息。

异常 e --> NullPointerException

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-26T10:25:11.220

此类返回您的响应，但还需要清单文件中的互联网许可。

```
public class ChatApplication extends Application {

    private Socket mSocket;
    {
        try {
            mSocket = IO.socket("http://chat.socket.io");
        } catch (URISyntaxException e) {
            throw new RuntimeException(e);
        }
    }

    public Socket getSocket() {
        return mSocket;
    }
} 
```

# javascript - Jquerymobile数据拆分图标位置

> ID：12918023
> 
> 赞同：1
> 
> 时间：2012-10-16T15:20:48.893
> 
> 标签：javascript, listview, jquery-mobile

我试图将列表视图中的数据拆分图标移动到左侧而不是右侧，但无法弄清楚如何解决这个问题。除此之外，我希望列表视图项目具有相同的外观/功能，问题是 JQM 突出默认第一个链接作为列表项链接，第二个链接作为数据拆分图标，我希望它是另一种方式大约。

我想你应该能够在 .css 文件的某个地方进行更改，但我不知道在哪里。

BR托马斯

# ios - iOS 上的自定义动态框架

> ID：12918027
> 
> 赞同：1
> 
> 时间：2012-10-16T15:20:58.413
> 
> 标签：ios, dynamic, frameworks

关于为 iOS 创建自定义动态框架有很多问题（其中一些有答案）。我的实际经验表明，在 iPad2 和 iPad3 上可以使用自定义动态框架，并且可以正常工作。在 iPad1 上它不起作用。所以我的问题是。是否可以在新版本的 iOS 上使用动态框架？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T15:26:57.053

Apple 不允许您为 iOS 平台创建自己的动态框架。然而，有一种方法可以打包您的静态库并以与框架类似的方式使用。

你看到[这个帖子](https://stackoverflow.com/questions/4065052/how-to-build-a-framework-or-library-for-other-developers-the-secure-way)了吗？

我特别查看了这个 GitHub 存储库，这是我用来启动和运行的，非常简单的解释：[https ://github.com/jverkoey/iOS-Framework](https://github.com/jverkoey/iOS-Framework)

基本上，您将创建一个静态库并为每个平台创建多个目标 - 模拟器和设备以及我通常称之为“构建和合并”的最后一个目标，该目标有一个脚本，用于获取设备和模拟器的生成库，并将它们打包在一个名为 xxxxxx.framework 的文件夹中，里面是标准结构，它包含您的静态库，当您在其他项目中使用它时，您将框架导入该项目并包含头文件，就像您使用任何其他真正的 dylib 框架一样。

# php - ionauth 登录最大尝试次数实现

> ID：12918033
> 
> 赞同：3
> 
> 时间：2012-10-16T15:21:09.790
> 
> 标签：php, codeigniter, authentication, captcha, ion-auth

我刚刚开始使用**ionauth**，并且正在尝试实现最大登录尝试次数功能。

问题是，我似乎无法在文档中找到有关此功能[的任何文档](http://benedmunds.com/ion_auth/)。

我想出了要调用的函数来检查是否超过了最大登录尝试次数

```
$this->ion_auth->is_max_login_attempts_exceeded() 
```

我想知道如果超过登录尝试，应该采取什么保护措施？

```
<ul>
 <li>block the user for a specific time?</li>
 <li>enforce a captcha?</li>
 <li>both?</li>
</ul> 
```

如果他输入了正确的验证码（假设我强制执行验证码）或者时间用完（假设我在特定时间停止登录尝试），我该如何再次允许登录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:10:51.477

这完全取决于您的项目的设计，如果它是一些商店或付费服务提供商，那么您可以考虑实现这一点并禁止用户登录一两分钟，如果是您的个人博客，我建议您不要实现这一点都没有。

要强制清除尝试，如果需要，您可以调用

```
$this->ion_auth->clear_login_attempts($identity); 
```

并阻止用户尝试登录，您可以使用 if 语句

```
if(!is_max_login_attempts_exceeded($identity)) {
    // try to login
} 
```

如果要实现验证码，可以更改上面的 if 语句以检查验证码输入是否正确，并使用上面的代码块来决定是否在登录表单中显示验证码。

在任何情况下，如果您以前从未被暴力破解，并且如果黑客可以收集/运行的信息/操作不够危险，因为它只会惹恼那些忘记密码的人，请不要费心实施此操作并尝试他们以前使用过的每个密码。

# spring-mvc - 使用 Spring、WebFlow、Dojo 和 Dijit 向用户显示验证错误

> ID：12918042
> 
> 赞同：0
> 
> 时间：2012-10-16T15:21:35.523
> 
> 标签：spring-mvc, dojo, spring-webflow

我正在开发一个使用 Dojo (dijit) 表单的 Spring WebFlow 项目，如果用户现在填写了所需的文本字段，则单击提交按钮时该字段会变为红色。但是单选按钮和复选框不..

1）如何使单选按钮和复选框像文本字段一样变成红色？

2）如何更改以下代码弹出用户必须修复某些文本字段的消息。

```
<input type="submit" name="_eventId_submit" id="submit" value="Submit"  tabindex="11" />
<script type="text/javascript">
            Spring.addDecoration(new Spring.ValidateAllDecoration({
                elementId : 'submit',
                event : 'onclick'
            }));
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:32:44.490

对于 2) 您可以使用`Spring.validateAll()`ValidateAllDecoration 代替。（您必须删除 ValidateAllDecoration）

该函数`Spring.validateAll()`根据验证结果返回真或假。

onClick 上的类似内容：

```
onclick="if(!Spring.validateAll()){alert('errors')}else{Spring.submitForm(...)}" 
```

应该管用

# oracle11g - 是否需要删除和重新创建索引来更改未包含在索引中的列大小？

> ID：12918046
> 
> 赞同：2
> 
> 时间：2012-10-16T15:21:49.047
> 
> 标签：oracle11g

我有一个脚本可以删除 3 个索引，更改同一个表中但与这些索引无关的列，然后重新创建索引。索引位于需要 45 分钟重新创建的大型表上。删除并重新创建索引是否必要？

```
DROP INDEX index1;

ALTER TABLE table1 MODIFY colNotInIndex VARCHAR(4000);

CREATE INDEX index1 ON table1(col0, col1, col2)
 TABLESPACE INDX
 STORAGE ( INITIAL 100k NEXT 100k PCTINCREASE 0)
/ 
```

数据库是 Oracle 11g

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:29:37.540

如果您不更改索引中的任何列，则无需删除并重新创建索引。

如果您正在更新非索引列中的数据（例如，如果您正在更新`colNotInIndex`以在重建索引之前存储其他数据）并且这些更新会导致大量行被迁移，则可能是在禁用索引的情况下执行此 DML 将更有效（或尽管删除索引更危险且更难维护）。额外的索引维护是否会比重建索引增加更多时间是您必须测试的，但根据您的描述，删除和重新创建索引似乎不太可能节省时间。

# php - 如何在 Smarty 修饰符函数中分配新变量？

> ID：12918052
> 
> 赞同：1
> 
> 时间：2012-10-16T15:22:15.653
> 
> 标签：php, plugins, smarty, modifier

我编写了一个模拟 JavaScript 推送的基本 Smarty 修饰符。

```
function smarty_modifier_push($array, $push){
    if(!isset($array)){
        $array = array($push);
    }elseif(is_array($array)){
        $array[] = $push;
    }
    return $array;
} 
```

这是我的 .tpl 文件中的代码

```
Problems: 
<select name="problems[]" multiple="multiple">
    <option value="">Select Problems</option>
    {foreach from=$problems key=id item=name}
        {$newArray|push:$id}
        <option value="{$id}">{$name}</option>
    {/foreach}
</select>
{$newArray} 
```

**问题：** 我的下拉列表包含大约 20 个元素，所以`$newArray`应该有大约 20 个 id，但是当我检查时`$newArray`，它是空的。因此，在修改器运行后，它似乎永远不会被分配回模板。

我知道我可以`{assign var=newArray}`事先在我的 .tpl 文件中使用，但我希望有一种方法可以从修饰函数中分配新变量。我也知道它可以从函数插件中获得，因为它通过了`$smarty`变量，但我只想知道，**如何使用修饰符插件来完成这项工作？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:26:10.680

[SMARTY FORUM](http://www.smarty.net/forums/viewtopic.php?t=220)上发布了一些代码，可能会对您有所帮助。其他人指出，这是一种让你做你需要的事情的方式，但它有点复杂，并且不能保证在新的更新出现时工作。希望它可以帮助你。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:01:46.603

尝试像这样在 $array 变量之前按“&”

```
function smarty_modifier_push(& $array, $push){
    if(!isset($array)){
        $array = array($push);
    }elseif(is_array($array)){
        $array[] = $push;
    }
    return $array;
} 
```

# events - gwt - 触发重新计算 100% 宽度

> ID：12918053
> 
> 赞同：1
> 
> 时间：2012-10-16T15:22:17.103
> 
> 标签：events, firefox, google-chrome, gwt, resize

我有一个 ScrollPanel，其中有一个包含两列和动态行数的 FlexTable。第一列只包含标签，第二列是各种小部件。

第二列中的一些小部件是由 ResizeEvent 触发的手动布局。当其中一个手动调整大小的小部件出现时，并且浏览器窗口的大小被调整为较小的大小，则会出现垂直滚动条并允许以先前存在的大小滚动区域。当我第二次调整大小时，第一个调整大小步骤的宽度将是 ScrollPanel 将表示的新的最小大小。

这个问题只存在于 firefox 和 chrome，IE 确实按预期工作。

我尝试使用相同的 ResizeEvent 手动调用我的调整大小过程两次，但这没有帮助。在我的小部件完成手动调整大小过程后，我还尝试在 ScrollPanel 上触发 ResizeEvent，但对这个问题也没有影响。

我无法完全禁用垂直滚动条。一些小部件具有最小宽度，如果浏览器变小，则最大最小宽度 + 标签列的宽度比滚动条是必要的。

# objective-c - 如何使用 Objective C 将包含和弦和歌词的 txt 文件转换为 ChordPro 格式？

> ID：12918057
> 
> 赞同：0
> 
> 时间：2012-10-16T15:22:26.277
> 
> 标签：objective-c, nsstring, converter

我正在尝试将`txt`包含歌词和和弦的文件转换为**ChordPro**格式，反之亦然。所以是这样的：

```
G                   Em
I heard there was a secret chord

G                        Em
that David played and it pleased the Lord 
```

会成为：

```
[G]I heard there was [Em] a secret chord

[G] that David played and [Em] it pleased the Lord 
```

我目前正在使用一个`NSDictionary`键值（例如键 E 值 [E]）并以此为基础从文件中转换字符串。我正在使用[Replace multiple groups of characters in an NSString 中](https://stackoverflow.com/questions/3733980/replace-multiple-groups-of-characters-in-an-nsstring)`stringByReplacingStringsFromDictionary`的自定义方法。

我现在只需要在转换实际上包含和弦（并且没有歌词）的行时才需要这样做。例如，我不想转换`David`为`[D]avid`.

我认为最好的方法是检查该行是否包含任何未被识别为和弦的内容，如果是则跳过它。但是我怎样才能以这种方式测试一个`NSString`（`NSDictionary`或其他集合）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:12:15.613

没有必要为此使用 NSDictionary。您可以使用包含和弦名称的 NSString 变量`[NSString stringWithFormat:@"[%@]", chord]`来创建字符串。`chord`

话虽如此，在这种情况下，字典很小并且没有任何害处，只是用我们可以从一个简单操作（在字符串周围添加括号）推断出的数据填充字典是没有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:40:17.813

所以它是由空格分隔的单词，如果任何一行不包含任何单词或一个未被识别为和弦的单词，那么它就会被单独留下，否则你将它们包裹在方括号中并将它们插入到它们的原始位置到下面的行中？

您将按单词进行搜索，因此我会将已知的和弦放入`NSSet`. 然后我会看看`NSString`'s `componentsSeparatedByCharactersInSet:`。我会使用`newlineCharacterSet`来划分行，而不必痴迷于回车与换行。我会使用`whitespaceCharacterSet`来获取每行的单词列表。根据集合检查它们并完成决策逻辑。

然后，您可以使用对 的顺序调用，随时`rangeOfString:options:range:`修改第三个参数，以在丢弃所有空格之前恢复和弦的字符位置。

如果你不太可能编译出完整的和弦列表，那么一个聪明的方法可能是将任何你识别出超过 50% 的单词的行标记为和弦线或任何减少的和弦线当您删除空格时，长度按足够的比例。

# php - PHP imageconvolution() 在左上角留下黑点

> ID：12918060
> 
> 赞同：3
> 
> 时间：2012-10-16T15:22:42.827
> 
> 标签：php, transparent, image-resizing, php-gd

我正在尝试使用以下代码锐化调整大小的图像：

```
imageconvolution($imageResource, array(
        array( -1, -1, -1 ),
        array( -1, 16, -1 ),
        array( -1, -1, -1 ),
    ), 8, 0); 
```

当透明PNG图像被锐化时，使用上面的代码，它在左上角出现了一个黑点（我尝试了不同的卷积核，但结果是一样的）。调整大小后，图像看起来不错。

第一张图是原图

第二张图片是锐化的

![原始图像](../Images/718b797832805c5b677e39488ba636f9.png) ![锐化图像](../Images/5060708dda64e612fdcd7cc98bdf04bf.png)

**编辑**：我怎么了？我正在使用从像素检索到的颜色。

```
$color = imagecolorat($imageResource, 0, 0);
    imageconvolution($imageResource, array(
        array( -1, -1, -1 ),
        array( -1, 16, -1 ),
        array( -1, -1, -1 ),
    ), 8, 0);
            imagesetpixel($imageResource, 0, 0, $color); 
```

是`imagecolorat`正确的功能吗？还是位置正确？

**EDIT2**：我已经改变了坐标，但仍然没有运气。我检查了`imagecolorat`（根据这篇[文章](https://stackoverflow.com/questions/5702953/imagecolorat-and-transparency)）给出的透明度。这是转储：

```
array(4) {
   red => 0
   green => 0
   blue => 0
   alpha => 127
} 
```

Alpha 127 = 100% 透明。那些零可能会导致问题...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T15:28:20.787

看起来像卷积代码中的错误（角落是某些实现中的特殊情况）。

作为一种解决方法，您可以在卷积之前将像素值保存在该角落中，然后使用`imageSetPixel()`.

您需要保存的像素位于 (0,0)，并且可能您还需要检查透明度（但我认为它应该只`imageColorAt`与 and一起使用`imageSetPixel`）。

**测试代码**

我从您上面发布的文件中获得了文件“giants.png”。如果我不使用`imageSetPixel`，我会体验到与您相同的额外像素。使用`imageSetPixel`，图像对我来说看起来是正确的。

`ImageSaveAlpha`我运行或设置 Alpha 混合的序列可能略有不同。

```
<?php
        $giants = ImageCreateFromPNG('giants.png');

        $imageResource = ImageCreateTrueColor(190, 190);

        ImageColorTransparent($imageResource, ImageColorAllocateAlpha($imageResource, 0, 0, 0, 127));
        ImageAlphaBlending($imageResource, False);
        ImageSaveAlpha($imageResource, True);

        ImageCopyResampled($imageResource, $giants, 0, 0, 0, 0, 190, 190, ImageSX($giants), ImageSY($giants));

        $color = ImageColorAt($imageResource, 0, 0);
        ImageConvolution($imageResource, array(
                        array( -1, -1, -1 ),
                        array( -1, 16, -1 ),
                        array( -1, -1, -1 ),
                ), 8, 0);
        ImageSetPixel($imageResource, 0, 0, $color);
        ImagePNG($imageResource, 'dwarves.png');
?> 
```

# sql - 组合 2 个 SQL SELECT 语句

> ID：12918061
> 
> 赞同：1
> 
> 时间：2012-10-16T15:22:42.747
> 
> 标签：sql, sql-server, sql-server-2008, tsql, select

** 显然有些人认为我的问题不值得他们花时间。我全心全意地为此道歉。然而，与其否决投票，为什么不利用这段时间做一些积极的事情，至少告诉我你需要什么信息才能让这不是你眼中的 cr@p 问题。**

我在 table 中有一个员工列表，在 table 中有`tblMembers`一个客户列表`tblClients`。

一个人可能有几个客户。

与客户相关联的工作人员通过`staffId`客户记录来识别。

每个员工都有一个针对他们拥有的客户类型的类别 ID `catId`。

***我需要找到给定客户类型的所有员工，然后按他们拥有的客户数量对他们进行排序。没有任何客户的员工应该显示结果为 0 而不是不显示。***

一个简化的表结构是：

`tblMembers`：

```
Id | catId 
```

`tblClients`：

```
Id | staffId 
```

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:27:16.327

试试这个：

```
SELECT m.Id 'Member Id', ISNULL(c.StaffCount, 0) 'StuffCount'
FROM tblMembers m
LEFT JOIN
(
    SELECT staffId, COUNT(staffId) 'StaffCount'
    FROM tblClients
    GROUP BY staffId
) c ON m.Id = c.staffId
WHERE m.Cat = 'Some Id'
ORDER BY StuffCount 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T15:28:00.820

加入/组和计数相当简单

```
SELECT
   s.id,
   s.catid,
   COUNT(c.id)
FROM 
   tblMembers s
   LEFT JOIN tblClients  c
   ON s.id = c.staffid
WHERE
   s.catid = @catID
GROUP BY 
  s.id,
  s.catid
ORDER BY 
    COUNT(c.id) desc 
```

然而，一个棘手的问题是

> 显示结果为 0 而不是不显示。

为此，您需要进行左连接以确保即使没有匹配的记录也能显示它们，并且您需要确保计算连接右侧表中的字段。否则你会得到 1

[演示](http://sqlfiddle.com/#!6/1d76d/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T15:30:34.183

希望我正确理解了你的情况。
尝试这样的事情：

```
SELECT T1.ID, 
       Count(*) 
FROM   MEMBERS T1 
       INNER JOIN CLIENTS T2 
               ON T1.ID = T2.STAFFID 
WHERE  T1.CATID = 2 
GROUP  BY T1.ID 
UNION 
SELECT DISTINCT ID, 
                0 
FROM   MEMBERS 
WHERE  CATID != 2 
```

[此处](http://sqlfiddle.com/#!3/c44ee/4)提供了一个工作示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T15:31:12.127

尝试：

```
select tblMembers.id, count(tblClient.id)
from tblMembers left join tblCLient on staffId = tblMembers.id
where tblMembers.catId = ??
group by tblMembers.id
order by 2 desc 
```

# wcf - 尝试执行 Web 服务时出现 404 错误

> ID：12918062
> 
> 赞同：0
> 
> 时间：2012-10-16T15:22:46.637
> 
> 标签：wcf, iis-7.5, http-status-code-404

我创建了一个简单的 Web 服务。我正在使用 Visual Studio 2012 .NET 4.5。

这是服务合同：

```
using System.Runtime.Serialization;
using System.ServiceModel;

namespace GEMS.Core.WCFService
{
    [ServiceContract]
    public interface IMenuService
    {
        [OperationContract]
        void AddMenuItem(string menuId, string parentId, string title, string description, string url);
        [OperationContract]
        void UpdateMenuItem(string menuId, string parentId, string title, string description, string url);
        [OperationContract]
        void DeleteMenuItem(string menuId);
        [OperationContract]
        MenuEntry[] GetAllMenuItems();
    }

    [DataContract]
    public class MenuEntry
    {
        [DataMember]
        public string MenuId { get; internal set; }
        [DataMember]
        public string ParentId { get; internal set; }
        [DataMember]
        public string Title { get; internal set; }
        [DataMember]
        public string Description { get; internal set; }
        [DataMember]
        public string Url { get; internal set; }
    }
} 
```

app.config 的相关部分是：

```
<system.serviceModel>
  <services>
    <service name="GEMS.Core.WCFService.MenuService">
      <host>
        <baseAddresses>
          <add baseAddress="http://localhost:8020/GEMS.Core.WCFService/MenuService/" />
        </baseAddresses>
      </host>
      <endpoint address="" binding="basicHttpBinding" contract="GEMS.Core.WCFService.IMenuService" >
        <identity>
          <dns value="localhost"/>
        </identity>
      </endpoint>
      <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
    </service>
  </services>
  <behaviors>
    <serviceBehaviors>
      <behavior>
        <serviceMetadata httpGetEnabled="True" httpsGetEnabled="True"/>
        <serviceDebug includeExceptionDetailInFaults="False" />
      </behavior>
    </serviceBehaviors>
  </behaviors>
</system.serviceModel> 
```

我将它发布到我的 IIS 服务器（我的盒子本地）。

在客户端应用程序中，我创建了一个服务引用。当我单击发现时，它会发现：

```
http://localhost:8020/GEMS.Core.WCFService/MenuService/mex 
```

但是，当我运行客户端时，我收到以下消息：

```
There was no endpoint listening at:
http://localhost:8020/GEMS.Core.WCFService/MenuService/ that could
accept the message. This is often caused by an incorrect address or
SOAP action. See InnerException, if present, for more details. 
```

内部异常只是说它从 Web 服务器收到了 404 错误。

客户端的 .config 文件具有以下自动生成的 xml：

```
<system.serviceModel>
  <bindings>
    <basicHttpBinding>
      <binding name="BasicHttpBinding_IMenuService" />
    </basicHttpBinding>
  </bindings>
  <client>
    <endpoint address="http://localhost:8020/GEMS.Core.WCFService/MenuService/"
      binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IMenuService"
      contract="WCF_MenuService.IMenuService" name="BasicHttpBinding_IMenuService" />
  </client>
 </system.serviceModel> 
```

我已经转了几个小时，无法弄清楚我出了什么问题，但我肯定做错了什么。

不确定这是否重要，但客户端是 ASP.NET MVC 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:39:58.183

正如 Pete 解释的那样，Newtonsoft.json.dll 会导致客户端不生成服务代码。您可以删除 dll，然后再次添加服务引用。

或者您可以尝试以下对我有用的解决方案。添加服务引用时，

1.  单击“添加服务参考”窗口中的“高级...”按钮
2.  禁用“在引用的程序集中重用类型”。

然后应该生成你的类。

# java - 弹簧单例范围 - 每个容器每个 bean

> ID：12918066
> 
> 赞同：10
> 
> 时间：2012-10-16T15:22:58.987
> 
> 标签：java, spring

我在参考我的问题时问这个问题：

[弹簧单例范围](https://stackoverflow.com/questions/11631047/spring-singleton-scope)

Spring singleton 在参考手册中**根据容器 per bean**定义。

**每个容器**意味着如果我们喜欢：

```
ApplicationContext context = new ClassPathXmlApplicationContext("Beans.xml")
MyBean myobj=(MyBean)context.getBean("myBean"); //myBean is of singleton scope.
MyBean myobj1=(MyBean)context.getBean("myBean"); 
```

**Beans.xml：**

```
<bean id="myBean" class="MyBean"/> 
```

然后`myobj==myobj1`会出来为真。意味着都指向*同一个实例*。

对于**每个 bean****每个容器每个 bean**的短语部分，我有些困惑。**对于每个 bean**，我是否正确：

如果我们喜欢

```
ApplicationContext context = new ClassPathXmlApplicationContext("Beans.xml")
MyBean myobj=(MyBean)context.getBean("myBean"); 
MyBean myobj1=(MyBean)context.getBean("mySecondBean"); 
```

**Beans.xml：**

```
<bean id="myBean" class="MyBean"/>
<bean id="mySecondBean" class="MyBean"/> 
```

然后`myobj==myobj1`就会出来假。意味着它们是*两个不同的实例*？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T15:33:37.303

那是对的。

如果有帮助，您还可以将 Spring bean 视为实例，否则您将使用构造函数在 Java 代码中手动创建它们。

通过在 Spring XML 文件中定义 bean，该 bean（实例）注册到 Spring 的 App Context，然后该实例可以传递到代码的其他区域。

通过创建一个新 bean，您实际上是在创建一个新实例。因此，您可能可以创建任意数量的同一类的 bean（实例）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-10T09:50:50.453

myBean 是一个 Spring 单例，因为每次调用 beans.getBean("myBean") 都会返回相同的实例。而具有不同 id 的 mySecondBean 是另一个 Spring 单例。您可以在同一个 ApplicationContext 中拥有同一类的不同单例 bean。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T15:24:46.610

你是对的。测试它会告诉你。

# windows - 查询映射的网络驱动器

> ID：12918070
> 
> 赞同：1
> 
> 时间：2012-10-16T15:23:06.973
> 
> 标签：windows, vbscript, wmi, wmi-query

此查询在我的本地机器上运行良好：

```
strComputer = "."
drive = "C:"
path = "\\path\\to\\local\\folder\\"

Set objWMIService = GetObject("winmgmts:" & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
Set colFiles = objWMIService.ExecQuery("Select * From CIM_DataFile Where Path = '"&path&"' and drive='"&drive&"'")

If colFiles.Count < 1 Then
    Wscript.Echo "Folder does not exist"
Else
    Wscript.Echo "Folder does exist"
End If 
```

但是当我尝试查询映射的网络驱动器时，程序失败并显示“文件夹不存在”。但我确信这是文件的正确路径。

唯一改变的部分是：

```
drive = "Z:"
path = "\\path\\to\\mapped\\drive\\folder\\" 
```

关于为什么这不起作用的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T03:32:24.930

尝试通过 WMI 映射远程计算机上的驱动器将失败，但有一种解决方法。感谢 Frank White 鼓舞人心的代码，现在存在一个完整的过程，可以通过 WMI 使用命令提示符并传递显式凭据来映射远程计算机上的驱动器。

[https://stackoverflow.com/a/11948096/1569434](https://stackoverflow.com/a/11948096/1569434)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:23:12.137

因此，为了调试它，我运行了以下命令：

```
strComputer = "."
 Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
 Set colFiles = objWMIService.ExecQuery("Select * from CIM_Datafile Where Drive = 'Z:'")
 For Each objFile in colFiles
    Wscript.Echo objFile.Name
 Next 
```

这导致错误“远程过程调用失败”，我理解这意味着映射驱动器不支持 WMI。

# android - 难以在 SQLite 中更新联系人

> ID：12918079
> 
> 赞同：0
> 
> 时间：2012-10-16T15:23:38.173
> 
> 标签：android, sqlite

我正在使用 sqlite 在我的 android 应用程序中维护数据库。其他操作工作正常，但`Update Operation`不工作。这是代码：

```
public int updateContact(Contact contact,String Type) 
    {
        int a = 0;
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();

        values.put(KEY_NAME, contact.getName());
        values.put(KEY_PH_NO, contact.getPhoneNumber());
        values.put(KEY_TIME, contact.getTime());
        values.put(KEY_ID , contact.getID());

        if(Type == "name")
        {
            a = db.update(TABLE_CONTACTS, values, KEY_NAME + " = ?",
                    new String[] { String.valueOf(contact.getName()) });
        }

        else if(Type == "id")
            // updating row
            a =  db.update(TABLE_CONTACTS, values, KEY_ID + " = ?",
                    new String[] { String.valueOf(contact.getID()) });

        else if(Type == "number")
            // updating row
            a= db.update(TABLE_CONTACTS, values, KEY_PH_NO + " = ?",
                    new String[] { String.valueOf(contact.getPhoneNumber()) });

        else if(Type == "time")
            a= db.update(TABLE_CONTACTS, values, KEY_TIME + " = ?",
                    new String[] { String.valueOf(contact.getTime())}); 

        return a;
    } 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:24:27.667

`String`比较总是应该使用`.equals()`而不是`==`

```
if(Type == "name")
......
else if(Type == "number") 
```

应该改为

```
 if("name".equals(Type))
  ......
   else if("number".equals(Type)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T15:30:29.940

你为什么不使用这种方式：

```
 if(Type == "name")
    {
        a = db.update(TABLE_CONTACTS, values, KEY_NAME + "=" + String.valueOf(contact.getName()),null);
    }

    else if(Type == "id")
        // updating row
        a =  db.update(TABLE_CONTACTS, values, KEY_ID + "=" + String.valueOf(contact.getID()),null);

    else if(Type == "number")
        // updating row
        a= db.update(TABLE_CONTACTS, values, KEY_PH_NO + "=" + String.valueOf(contact.getPhoneNumber()),null);

    else if(Type == "time")
        a= db.update(TABLE_CONTACTS, values, KEY_TIME + "=" + String.valueOf(contact.getTime()),null); 
```

# ssas - 如何在 Cognos 的参数中传递参数？

> ID：12918084
> 
> 赞同：0
> 
> 时间：2012-10-16T15:23:53.377
> 
> 标签：ssas, cognos

我在 Cognos Report Studio 10.2 中创建了以下宏提示，以获取“Officer Employee 2011 Jan”维度，该维度在附加到末尾的日期中会有所不同。我在同一个官员层次结构的 2008 SSAS 多维数据集中对维度进行了版本化，每个月都会创建一个新版本的层次结构。我希望报告中的用户能够选择一个月，（从日期值提示下拉菜单中，当他们选择月份时，我正在构建的这个宏将替换宏的“？DateSelection？”部分正确的日期维度。维度是使用上述名称动态创建的，但日期会随月份而变化。如果我要在宏中手动替换 ?DateSelection? 说“2011 Jan”，它会拉起正确的尺寸。有人可以帮助我根据 ?DateSelection 更改此宏以动态执行相同的操作吗？提示我包含在这个宏中吗？谢谢！

```
 #prompt ('Officer', 'token', '[CPDM].[Officer Employee ' + 
    '?DateSelection?' +  '].[Officer Employee Hierarchy]')# 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:10:09.960

以下表达式适用于 SSAS 2008 GOSalesFact_EN_MSAS2005 包：

```
#prompt('Orgcode','token','[GO Sales Fact].[Organization].[Organization].[Organization
Code1]','[GO Sales Fact].[Organization].[Organization].[Organization C','',']')# 
```

所以，我想等价的表达式是：

```
#prompt ('Officer', 'token', '[CPDM].[Officer Employee].[Officer Employee 2011 Jan]',
'[CPDM].[Officer Employee].[Officer Employee 2011 ','',']')# 
```

如果您未选择任何内容，Jan 层次结构是默认层次结构。
现在您所要做的就是创建一个值提示，参考官员提示并输入月份列表（'jan'，'feb'，...）。

Cognos 10.2 的提示宏引用位于此处（框架管理器）：
[使用查询宏创建提示](http://pic.dhe.ibm.com/infocenter/cbi/v10r2m0/topic/com.ibm.swg.ba.cognos.ug_fm.10.2.0.doc/c_using_macro.html?path=5_10_5_7_8#using_macro)
和此处（Report Studio）：
[使用查询宏创建提示](http://pic.dhe.ibm.com/infocenter/cbi/v10r2m0/topic/com.ibm.swg.ba.cognos.ug_cr_rptstd.10.2.0.doc/c_cr_rptstd_wrkdat_creating_prompts_using_query_macros.html?path=3_5_18_2#cr_rptstd_wrkdat_creating_prompts_using_query_macros)

# java - 如何在我的文档中记录或排除生成的 BuildConfig 类？

> ID：12918095
> 
> 赞同：0
> 
> 时间：2012-10-16T15:24:35.790
> 
> 标签：java, android, eclipse, javadoc, buildconfig

显然，从 Android SDK 17 开始，构建会生成一个名为 BuildConfig 的自动类并将其添加到我的包中。[http://android-developers.blogspot.com/2012/03/updated-sdk-tools-and-adt-revision-17.html](http://android-developers.blogspot.com/2012/03/updated-sdk-tools-and-adt-revision-17.html)说：

> 添加了一项功能，允许您仅在调试模式下运行某些代码。构建现在会生成一个名为 BuildConfig 的类，其中包含一个根据您的构建类型自动设置的 DEBUG 常量。您可以检查代码中的 (BuildConfig.DEBUG) 常量以运行仅调试功能，例如输出调试日志。

由于生成了这个源文件，我看不到如何向它添加 JavaDoc 注释。有没有一种简单的方法可以从我的包文档中排除这个类？或者有没有一种简单的方法可以向这个类添加一些评论？由于此类已添加到我的包中，因此我不能简单地将包从文档中排除。

我在 Windows 和标准 Doclet 上使用 Eclipse Indigo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:14:41.177

要删除`BuildConfig.java`，只需在 javadoc 导出向导中取消选中您的 project/gen 文件夹。请注意，这也会`R.java`从导出的 javadoc 中删除：

![在此处输入图像描述](../Images/cba0e730d6ddd3cbc3653e4c013fcbe7.png)

# html - class="#language("x.dir") 在 HTML 中是什么意思？

> ID：12918097
> 
> 赞同：0
> 
> 时间：2012-10-16T15:24:38.680
> 
> 标签：html, tags, velocity

我是相当新的 HTML 和标记/速度文档。了解基本的 html，但我不明白这是什么意思：

```
<html class="#language("lang.dir")" dir="#language("lang.dir")" lang="$w3c_language_id"> 
```

可能有人可以对每个属性有所了解吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:29:46.213

这些是服务器端语言/模板引擎的变量，它们正在被替换，从而产生*类似于*以下内容的有用信息：

```
<html class="ltr" dir="ltr" lang="en"> 
```

属性的详细描述可以在[MDN-HTML 属性](https://developer.mozilla.org/en-US/docs/HTML/Attributes)中找到。基本上`lang`是文档的语言并且`dir`是文本方向（从左到右或从右到左）。

# asp.net - 将行单击事件添加到 Asp.Net GridView 行

> ID：12918098
> 
> 赞同：0
> 
> 时间：2012-10-16T15:24:39.523
> 
> 标签：asp.net, web-applications

有没有一种方法可以将 RowClick 事件添加到 Gridview Rows 而无需为每个事件添加一个按钮？我希望能够单击行中的任意位置并引发 SelectedIndexChanged 事件。

我尝试了以下但我需要添加页面 enableEventValidation="true" 我真的不想这样做。

```
Private Sub GridView1_RowDataBound(sender As Object, e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles GridView1.RowDataBound
    Try
        Select Case e.Row.RowType
            Case DataControlRowType.DataRow
                e.Row.Attributes.Add("onclick", Page.ClientScript.GetPostBackClientHyperlink(GridView1, "Select$" & e.Row.RowIndex))
        End Select
    Catch ex As Exception

    End Try
End Sub 
```

RowCommands 也不起作用，因为您必须有一个按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:34:26.510

您执行了 2 中的第 1 步。第一部分是`onclick`在`RowDataBound`. 现在您需要处理该`SelectedIndexChanged`事件。我不是 VB.Net 人，所以我不能 100% 确定如何连接它。但是，事件处理程序将如下所示：

```
Private Sub GridView1_SelectedIndexChanged(sender As Object, e As System.EventArgs) Handles GridView1.SelectedIndexChanged
    ' Do stuff here.
End Sub 
```

此外，将您的`onclick`连线代码更改为使用`Page.ClientScript.GetPostBackEventReference`而不是`Page.ClientScript.GetPostBackClientHyperlink`.

这是一些示例标记：

```
<asp:GridView ID="GridView1"
    runat="server"
    Width="665px"
    OnSelectedIndexChanged="GridView1_SelectedIndexChanged">

    <HeaderStyle BackColor="#0033CC" />

    <Columns>
        <asp:CommandField ShowSelectButton="True" />
    </Columns>

</asp:GridView> 
```

# c# - 一些必填字段不适用于 ViewModel MVC3

> ID：12918099
> 
> 赞同：1
> 
> 时间：2012-10-16T15:24:40.330
> 
> 标签：c#, asp.net-mvc, validation, data-annotations

控制器动作：

```
 [AjaxRequestOnly, HttpPost, Authorize]
    public ActionResult AddCreditCard(CustomerCreditCardModelView cc) {
        if (!ModelState.IsValid) {
            Response.StatusCode = 400;
            return Content(Newtonsoft.Json.JsonConvert.SerializeObject(ModelState.Values.SelectMany(v => v.Errors).Select(e=>e.ErrorMessage)));
        }
        // .... do something ...        
    } 
```

模型视图：

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Web;
using CheckoutVC.CheckoutServiceReference;
using Newtonsoft.Json;

public class CustomerCreditCardModelView {

    [Display(Name = "Número")]
    [Required(ErrorMessage = "El Número es requerido")]
    [StringLength(20, MinimumLength = 12, ErrorMessage = "El número parece ser incorrecto")]
    [JsonIgnore, ScriptIgnore]
    public string CardNumber { get; set; }

    [Display(Name = "Código de seguridad")]
    [Required(ErrorMessage = "El Código de seguridad es requerido")]
    public string CardSecurityCode { get; set; }

    [Display(Name = "Nombre en la tarjeta")]
    [Required(ErrorMessage = "El Nombre en la tarjeta es requerido")]
    public string NameOnCard { get; set; }

    [Display(Name = "Dirección de cobro")]
    [Required(ErrorMessage = "La Dirección de cobro es requerida")]
    public string BillingAddress { get; set; }

    [Display(Name = "Mes de vencimiento")]
    [Required(ErrorMessage = "El Mes de vencimiento es requerido")]
    public int ExpirationMonth { get; set; }

    [Display(Name = "Año de vencimiento")]
    [Required(ErrorMessage = "El Año de vencimiento es requerido")]
    public int ExpirationYear { get; set; }

    [Display(Name = "Documento")]
    [Required(ErrorMessage = "El documento es requerido")]
    public string Document { get; set; }

    [Display(Name = "Tipo de tarjeta")]
    public int IdCreditCard { get; set; }

    public int IdCustomer { get; set; }
    public bool IsDeleted { get; set; }
    public int IdCustomerCreditCard { get; set; }
    public CustomerCreditCardModelView() {

    } 
```

请求有效载荷：

```
{"idCreditCard":1,"nameOnCard":"fdsa","billingAddress":"fdsa"} 
```

请求响应：

```
["El Número es requerido","El Código de seguridad es requerido","El documento es requerido"] 
```

如您所见，除了 int ExpirationMonth 和 int ExpirationYear 应该返回验证错误（必需）之外，一切都运行良好，但它们没有。

实际上，modelstate 只有 6 个键....

什么可能导致这种行为？我想 expireMonth 和 expirationYear 考虑到 [Required] DataAnnotation 属性。

很确定这里发生了同样的事情：[mvc model validation required not working on all fields](https://stackoverflow.com/questions/12359334/mvc-model-validation-required-not-working-on-all-fields)

编辑：阅读对该问题的评论，发现问题出在使用上，而不是我的情况。我包括了使用部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T15:39:54.623

这可能是因为`ExpirationMonth`和`ExpirationYear`属性是整数值。Integer 是值类型，因此它不能为 null，默认值为 0，从 RequiredAttribute 的角度来看是正确的。

您可以做的是将类型从更改为`int`，`int?`以便它可以为空。

请参阅[可空类型](http://msdn.microsoft.com/en-us/library/1t3y8s4s%28v=vs.80%29.aspx)。

您的视图模型：

```
public class CustomerCreditCardModelView {

    [Display(Name = "Número")]
    [Required(ErrorMessage = "El Número es requerido")]
    [StringLength(20, MinimumLength = 12, ErrorMessage = "El número parece ser incorrecto")]
    [JsonIgnore, ScriptIgnore]
    public string CardNumber { get; set; }

    [Display(Name = "Código de seguridad")]
    [Required(ErrorMessage = "El Código de seguridad es requerido")]
    public string CardSecurityCode { get; set; }

    [Display(Name = "Nombre en la tarjeta")]
    [Required(ErrorMessage = "El Nombre en la tarjeta es requerido")]
    public string NameOnCard { get; set; }

    [Display(Name = "Dirección de cobro")]
    [Required(ErrorMessage = "La Dirección de cobro es requerida")]
    public string BillingAddress { get; set; }

    [Display(Name = "Mes de vencimiento")]
    [Required(ErrorMessage = "El Mes de vencimiento es requerido")]
    public int? ExpirationMonth { get; set; }

    [Display(Name = "Año de vencimiento")]
    [Required(ErrorMessage = "El Año de vencimiento es requerido")]
    public int? ExpirationYear { get; set; }

    [Display(Name = "Documento")]
    [Required(ErrorMessage = "El documento es requerido")]
    public string Document { get; set; }

    [Display(Name = "Tipo de tarjeta")]
    public int IdCreditCard { get; set; }

    public int IdCustomer { get; set; }
    public bool IsDeleted { get; set; }
    public int IdCustomerCreditCard { get; set; }
    public CustomerCreditCardModelView() {

    }
} 
```

**另一种方法**是从名称上使验证更加严格，`ExpirationMonth`我`ExpirationYear`认为[RangeAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.rangeattribute.aspx) 适合您。

# php - 是否可以在禁用 javascript 的 php 中显示消息？

> ID：12918100
> 
> 赞同：-1
> 
> 时间：2012-10-16T15:24:39.980
> 
> 标签：php, javascript

> **可能重复：**
> [仅在禁用 JavaScript 时显示“启用 JavaScript”消息](https://stackoverflow.com/questions/5334329/display-enable-javascript-message-only-when-javascript-is-disabled)

我有一个包含 php 和 jquery 编码的 php 文档。我的问题是，在 php 中是否有一种方法，如果禁用了浏览器的 javascript，它会显示一条消息，指出“为了毫无问题地使用此应用程序，您必须启用 javascript”？

当用户禁用 javascript 时，消息会立即出现吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:25:56.947

如果不支持 JavaScript，您可以使用 noscript 标签 tyo 检测。

```
<noscript>Your browser does not support JavaScript!</noscript> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T15:26:28.600

使用`<noscipt>In order to use this application without any problems, you must have javascript enabled</noscript>`标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T15:28:09.833

在禁用 JavaScript 的情况下，标签周围的任何内容都会执行，因此您可以简单地在块`<noscript>`内显示警告。`noscript`

```
<noscript>In order to use this application without any problems, you must have javascript enabled</noscript> 
```

# css - 多列文本适合高度并水平滚动页面

> ID：12918102
> 
> 赞同：0
> 
> 时间：2012-10-16T15:24:44.493
> 
> 标签：css, html

[这是 jsfiddle](http://jsfiddle.net/6ZLRp/) - red`div`将在`px`. 黄色会有很多内容。我希望将黄色分为`columns`（如报纸）有`height`红色的`div`，`margin`在它们之间有，如果它们中有很多我希望它们使页面水平滚动并且红色`div`必须将它们放在内部，它们不能`overflow`。（最后一个可能是可选的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:30:18.333

只需删除高度，它显示相同的红色和黄色高度。你可以[在这里查看：](http://jsfiddle.net/6ZLRp/1/)

```
#a{background:red;}
#b{width:200px; background:yellow;}
h1{font-size:40pt;}​ 
```

# interop - 可以共享 Skydrive 凭据吗？

> ID：12918104
> 
> 赞同：0
> 
> 时间：2012-10-16T15:24:46.477
> 
> 标签：interop, windows-8, microsoft-metro, windows-phone, onedrive

我想在桌面/笔记本电脑/平板电脑应用程序和 Windows Phone 之间发送信息。一种可能性是将数据发送到 SkyDrive 帐户，然后让另一端从那里提取数据。这可行吗？我想到的是在台式机、笔记本电脑或平板电脑上运行的“Windows 8”应用程序，允许 Windows Phone 应用程序向其帐户发送数据。这可能吗，例如通过向 Windows Phone 应用程序提供 Skydrive 登录信息，或者...？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:34:29.470

从您围绕此查询发布的所有其他问题来看，听起来您希望建立一种机制来在 Windows 8 应用程序和 Windows Phone 应用程序之间进行通信。我建议您考虑构建一个服务来处理通信，而不是尝试利用不是为您想要实现的目标而设计的机制。

不过，直接回答这个问题，您可能可以通过这种方式实现它，但是如果用户删除您创建的文件会发生什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:16:15.003

因此，SkyDrive 是用户独有的，而不是设备。这意味着如果您的应用程序在多个设备上运行，您可以将 SkyDrive 用作共享的统一存储选项。不仅适用于文件，还适用于应用程序设置。每个平台都有一个 SDK，而不仅仅是 MS。

这是您需要考虑的。

Windows 8 中的漫游 API 将信息放在 SkyDrive 的受保护区域中。结果，用户无法删除或搞砸存储在那里的文件。为此，使用 SkyDrive 作为共享位置（如您所问）没有此好处。用户可以破坏您的文件或删除它们 - 并破坏您的应用程序。SkyDrive 中没有保护您的应用程序文件（此时）。

具体来说，对于您的问题：

SkyDrive 的授权模型需要一个实际上无法为任何应用程序缓存的令牌。此外，您无法缓存凭据，因为您从一开始就没有获得凭据 - 您只能获得生成的令牌。听着，如果您//询问// 用户提供他们的用户名和密码并存储它们，您将违反所有可能的最佳实践。请不要这样做。

最终答案是这样的：多个设备上的应用程序可以使用 SkyDrive 作为文件和设置（如 XML 文件）的共享存储解决方案 - 但开发人员需要了解风险并减轻风险（减轻对您的应用程序来说可能很容易）。每个设备上的用户都需要登录并授予每个应用程序对其文件夹的访问权限。而且，就是这样。

# android - Android：对话框将微调器返回到主机

> ID：12918105
> 
> 赞同：0
> 
> 时间：2012-10-16T15:24:50.037
> 
> 标签：android, android-dialog

所以我需要有一个对话框，用户可以在其中选择年/月（用于信用卡）。当用户单击对话框的确定​​时，应该通知主机（即创建对话框的活动）有关更改。

我需要应用程序在 SDK 版本 7 上工作，因此我不能使用此处建议的 DialogFragment：http: [//developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

目前这是我得到的：

```
public class DatePicker {

    /* The activity that creates an instance of this dialog fragment must
     * implement this interface in order to receive event callbacks.
     * Each method passes the DialogFragment in case the host needs to query it. */
    public interface DatePickerListener {
        public void onDialogPositiveClick(int month, int year);
        public void onDialogNegativeClick();
    }

    // Use this instance of the interface to deliver action events
    static DatePickerListener mListener;

    public static void show(Activity listner) {
        mListener = (DatePickerListener)listner;
        // Use the Builder class for convenient dialog construction
        AlertDialog.Builder builder = new AlertDialog.Builder((Activity)mListener);
        LayoutInflater inflater = listner.getLayoutInflater();

        builder.setView(inflater.inflate(R.layout.date_picker, null))
               .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                   @Override
                   public void onClick(DialogInterface dialog, int id) {
                       mListener.onDialogPositiveClick(11, 11);
                   }
               })
               .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       dialog.cancel();
                   }
               }

            );  
        // Create the AlertDialog object and return it
        builder.create();
        builder.show();
    }

} 
```

和 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="15dp" >

    <Spinner
        android:id="@+id/spinnerMonth"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_weight="1" />

    <Spinner
        android:id="@+id/spinnerYear"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_weight="1" />

</LinearLayout> 
```

所以我有两个问题：第一个是我似乎无法在 onClick 对话框中获取微调器值，其次我需要以编程方式设置微调器内容，我似乎也无法弄清楚如何做到这一点（因为我不能似乎正确地获得了对话框内容）。

谁能指出我正确的方向？非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:09:39.660

首先，我在手机、计算机或任何地方看到的每一个信用卡实现都在一个窗口中包含所有元素。您确定要将用户最可能期望的体验更改为涉及弹出对话框的体验吗？

如果活动本身具有所有必要的输入，对您和他们来说不是更简单：信用卡号的文本字段，日期和月份的两个微调器，以及 CVS 文本字段 - 好像它不会即使在小屏幕手机上，空间也会不足。

不管你是否对你的想法死心塌地，答案都是一样的，就像这样：

```
class something {
  int mMonth;
  int mDay;
  (...)
monthSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
  @Override
  public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    mMonth = pos;   
  }
  @Override
  public void onNothingSelected(AdapterView<?> parent) { }
}); 
```

# c++ - Windows Media Foundation 使用原始图像对视频进行编码

> ID：12918107
> 
> 赞同：0
> 
> 时间：2012-10-16T15:25:00.177
> 
> 标签：c++, directshow, rgb, screen-capture, ms-media-foundation

我正在做一个需要我录制网络摄像头、麦克风和屏幕的项目。我有网络摄像头录制，[音频正在进行](https://stackoverflow.com/questions/12917256/windows-media-foundation-recording-audio/12917612)中，我偶然发现了[CMonitor 包装器](http://www.codeguru.com/cpp/article.php/c18347/C-Programming-Easy-Screen-Capture-Using-MFCATL.htm)（我对其做了一些小的修改）以在指定的监视器上获取桌面的 RGB 图像（如果有多个监视器）。

如何将我的原始 RGB 帧推送到 Windows Media Foundation 中以编码为视频文件？我当前的视频编码使用的是[这个 msdn 示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663604(v=vs.85).aspx)的略微修改版本，如果修改比编写新的类处理程序更容易的话。

或者，也许有某种媒体基础路线来记录我不知道的屏幕（这是可能的，我不是一个很棒的 win32 程序员）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:29:20.423

在 Windows SDK 示例中找到 PushSource，它执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-26T02:34:45.480

检查[桌面复制 API](https://msdn.microsoft.com/en-us/library/windows/desktop/hh404487%28v=vs.85%29.aspx?f=255&MSPPError=-2147217396)以获取桌面。Media Foundation 提供了两种编码解决方案，MF Sink Writer 用于简单编码，Media Session 用于更灵活地控制媒体管道。首先阅读此[概述页面](https://msdn.microsoft.com/en-us/library/windows/desktop/ff485861)。

# android - 无法在 Webview 上使用 html 读取内部存储文件

ID：12918109

赞同：2

时间：2012-10-16T15:25:08.687

标签：android

# sql - PostgreSQL 查询返回空

> ID：12918110
> 
> 赞同：0
> 
> 时间：2012-10-16T15:25:11.093
> 
> 标签：sql, postgresql

谁能告诉我为什么我的查询返回空。我对 postgreSQL 很陌生，我不确定我是否正确访问了这两个数组。我还尝试了一个带有状态的子查询。

这是查询：

```
SELECT * FROM piecedef pd, pieceinst pi 
WHERE pi.truckno IN ('29,26,25,2,16,15,14,13,12,11,10')
AND pi.status IN (3601,102,201)        
AND pi.defid=pd.pdid
AND pd.projectid='4592'
ORDER BY pi.piid 
```

Truckno 是 varchar (15)，状态是 int4 (32)。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:27:11.083

尝试

```
SELECT * FROM piecedef pd, pieceinst pi
WHERE pi.truckno IN ('29','26','25','2','16','15','14','13','12','11','10') 
AND pi.status IN (3601,102,201)        
AND pi.defid=pd.pdid
AND pd.projectid='4592'
ORDER BY pi.piid 
```

您的错误似乎是：varchar 数组需要引号之间的每个元素，否则它将被视为长 varchar 的元素...

# php - Yii - 我如何提交表单并将用户发送到给定的锚点？

> ID：12918111
> 
> 赞同：2
> 
> 时间：2012-10-16T15:25:11.613
> 
> 标签：php, yii

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T15:48:50.590

使用 的`action`属性`CActiveForm`。替换`'controller/acion'`您的特定需求。

```
 <?php $form=$this->beginWidget('CActiveForm', array(
                        'id'=>'contact-form',
                        'enableClientValidation'=>true,
                        'action'=>array('controller/acion','#'=>'fragment-id')
                    )); ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T15:49:49.363

在接收表单提交的控制器/动作中，一旦表单被处理，只需重定向到您想要的 URL。例如：

```
$this->redirect(Yii::app()->request->baseUrl."/myurl#fragment-id"); 
```

你甚至可以得到真正的幻想并使用这个简短的 jQuery 滚动来运行：

```
function goToByScroll(id){
    $('html,body').animate({scrollTop: $("#"+id).offset().top},'slow');
} 
```

哪个 get 是这样调用的：

```
goToByScroll("theIdIWantToGoTo"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T15:49:53.623

您正在查看错误的选项。你需要它的[动作](http://www.yiiframework.com/doc/api/1.1/CActiveForm#action-detail)：

```
<?php $form=$this->beginWidget('CActiveForm', array(
                    'id'=>'contact-form',
                    'action'=>$this->createUrl('')."#fragment-id",
                    'enableClientValidation'=>true,
                )); ?>

  //form here
  <?php echo CHtml::submitButton('send')); ?>

<?php $this->endWidget(); ?> 
```

`createUrl`其为当前请求的 URL 生成 URL的空参数

# ember.js - 如何使自定义事件在视图层次结构中冒泡？

> ID：12918112
> 
> 赞同：4
> 
> 时间：2012-10-16T15:25:13.257
> 
> 标签：ember.js

我有按钮视图，它们是我编写的一组 Ember.js 表单助手的一部分。例如 MyAddressFormView 有以下模板：

```
{{#form}}
  {{textArea address}}
  {{submitButton}}
  {{cancelButton}}
{{/form}} 
```

为了处理“提交”按钮，我让“提交”表单事件冒泡，并在`submit`MyAddressFormView 的方法中处理它。

但是我该如何为“取消”按钮做同样的事情呢？例如，有什么方法可以在子视图中触发自定义“取消表单”事件，让它冒泡，然后在祖先视图中处理它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T06:17:10.747

我建议触发一个 jQuery 特殊事件并使用您的 Ember 应用程序上的映射注册该事件。例如：

```
Ember.Application.create({
  customEvents: {
    // key is the jquery event, value is the name used in views
    formcancel: 'formCancel'
  }
}); 
```

在您的 cancelButton 视图中：

```
click: function(evt){
  Ember.$().trigger('formcancel')
} 
```

这将以与其他映射的 Ember DOM 事件相同的方式冒泡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T17:52:18.340

Ember.ActionHandler 通过其“目标”属性冒泡事件。默认情况下，可以覆盖 Ember.View 的目标以让事件通过 parentViews 冒泡。

首先包含这个mixin：

```
(function() {
    Ember.View.reopen({
        // Let actions bubble to parentView by default.
        target: function() {
            return this.get('parentView');
        }.property('parentView')
    });
})(); 
```

然后像往常一样发送事件：

```
tap: function() { this.send('someEvent'); } 
```

# .net - WCF 服务器端设置可由客户端应用程序更改

> ID：12918116
> 
> 赞同：2
> 
> 时间：2012-10-16T15:25:26.423
> 
> 标签：.net, wcf

我有一个 WCF 服务，它接收文件作为请求，处理文件，并将响应异步返回给客户端。我想添加让不同的客户端控制服务生成的响应的类型和数量的能力。

例如，我的服务可能会返回好的响应、坏的响应和错误响应。我希望 UI 客户端能够打开/关闭每种响应类型并更改返回的好/坏响应的数量。

这是我目前的服务：

```
[ServiceContract(
SessionMode = SessionMode.Required,
CallbackContract = typeof(IEmulatorServiceCallback))]
public interface IEmulatorService
{
    [OperationContract]
    void Submit(TransferredFile file);

    [OperationContract]
    bool Subscribe();

    [OperationContract]
    bool Unsubscribe();
}

[ServiceContract]
public interface IEmulatorServiceCallback
{
    [OperationContract(IsOneWay = true)]
    void OnResponseReady(TransferredFile file);
} 
```

在客户端，我有以下内容。

```
public interface IResponseListener : IEmulatorServiceCallback
{
    event EventHandler<MessageEventArgs> OnMessageReceived;
    bool Connect();
    void Disconnect();
}

[CallbackBehavior(
    ConcurrencyMode = ConcurrencyMode.Single,
    UseSynchronizationContext = false)]
[Export(typeof(IResponseListener))] // MEF
public class CallbackListener : IResponseListener
{
    // Sets up and creates the service to be used.
    public CallbackListener()
    {
        DuplexChannelFactory<IEmulatorService> pipeFactory =
              new DuplexChannelFactory<IEmulatorService>(
                  new InstanceContext(this),
                  new NetTcpBinding(),
                  new EndpointAddress("net.tcp://localhost:8000/EmulatorService"));

        _service = pipeFactory.CreateChannel();
    }

    // Connects & Subscribes as service callback
    public bool Connect() { /* Code removed */ }

    // Removed as service callback
    public void Disconnect() { /* Code removed */ }

    // Implementation of interface that raises event to be captured by client   
    public void OnResponseReady(TransferredFile file) { /* Code removed */ }

    [Export]
    IEmulatorService _service;

    // Event raised when the OnResponseReady method is called
    public event EventHandler<MessageEventArgs> OnMessageReceived;
}

public interface IServiceProxy
{
    void SendMessage(string path);       
}

[Export(typeof(IServiceProxy))]
public class EmulatorServiceProxy : IServiceProxy
{
    public void SendMessage(string path)
    {
        var file = new TransferredFile(
            File.ReadAllBytes(path),
            Path.GetFileName(path));

        EmulatorService.Submit(file);
    }

    [Import]
    public IEmulatorService EmulatorService { get; set; }
} 
```

不要太深入到完整的实现中，但是客户端有一个引导程序，它从 MEF 获取 IResponseListener 和 IServiceProxy，然后将它们传递到 ViewModel 的构造函数中以供在那里使用。因此，绑定到 WPF 应用程序的 ViewModel 实际上使用 IServiceProxy 和 IResponseListener 来更新模型。

我希望使用上述服务合同的客户端很可能与控制设置（响应类型/数量）的客户端不同。我相信会有一个客户端根据用户的请求设置设置，而另一个客户端（单独应用程序的一部分）将发送请求并接收异步响应。

所以，我只是不确定如何解决这个问题。我正在考虑几种方法：1）拥有一个完全独立的服务，允许客户端更改设置，然后以某种方式让服务共享设置合同。2）添加此服务实现的第二个接口（用于设置），设置合同也将在服务内。

第一种方法，我认为很难共享这些设置。但是，我使用的是 MEF，所以这可能会使它更容易。

至于第二种方法，那会奏效吗？我可以使用相同的服务类实现两个服务合同吗？如果是这样，我是否必须单独托管服务？

我想另一种选择是将所有设置方法放在同一个服务中，但如果可能的话，我想将它们分开，这样当不关心设置的客户端连接时，他们不必担心那些方法。

有没有人必须做类似的事情？你会推荐什么方法？

谢谢

-G

# java - 序列化杰克逊生成的类

> ID：12918122
> 
> 赞同：1
> 
> 时间：2012-10-16T15:25:37.670
> 
> 标签：java, jackson, resteasy

我使用 jackson（通过 resteasy）将 json 转换为 Java 对象。我只为对象定义了一个接口，杰克逊自动生成了实现。伟大的！

现在我正在尝试保存对象并稍后恢复它。我的界面 extends `Serializable`，所以我的数据存储区毫无怨言地保存了它。但是，当需要稍后加载它时，找不到生成的类定义。我明白了

```
java.lang.ClassNotFoundException: org.codehaus.jackson.generated.my.class.name 
```

使用 Jackson 生成的类定义保存和加载对象时，我有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:36:31.943

也许将 POJO 序列化为`java.util.Map`？JDK 序列化与具体类紧密绑定，因此它可能不适用于 Jackson 的抽象类型实现（我假设您使用的是“Mr Bean”模块）。

# django - 在我的 post_compile 脚本中进行模式迁移有什么缺点吗

> ID：12918123
> 
> 赞同：1
> 
> 时间：2012-10-16T15:25:40.843
> 
> 标签：django, heroku, django-south

我有一个在 heroku 上运行的 django 应用程序。我想在依赖于它们的任何代码上线之前运行我的 South 迁移。在快速查看当前推荐的做法后，我发现了两个建议的迁移程序。

### 建议 1

1.  提交并推送所有更改
2.  `heroku run python manage.py migrate <APP_NAME>`为每个应用程序运行

这会在步骤 1 和 2 之间有一段时间，我的代码假设最新的模式已经到位，但数据库尚未更新。

### 建议 2

1.  提交并推送所有数据库更改。
2.  迁移。
3.  推送所有代码更改。

这解决了前面的问题，但增加了部署过程的复杂性，总有一天我会搞砸的。

### 潜在的解决方案？

看来我可以避免建议 1 中的问题，*并*`python $MANAGE_FILE migrate <APP_NAME>`通过使用调用我的每个应用程序的自定义 post_compile 脚本（按依赖顺序）将我的部署保持在一个步骤中。

我没有在任何地方看到这个推荐，所以我的问题是双重的。你能看出这种方法有什么潜在的问题吗？你有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:33:04.057

如果您的应用程序可以承受一些停机时间，在我看来，最简单的方法是

1.  使用暂停您的应用程序`$ heroku maintenance:on`
2.  一次迁移所有应用程序`heroku run python manage.py migrate`
3.  重新启动您的应用程序：`$ heroku maintenance:off`

是否足够或您有更复杂的需求？

# .net - 使用 .NET SQLite 驱动程序编译的 C# 应用程序？

> ID：12918126
> 
> 赞同：0
> 
> 时间：2012-10-16T15:25:44.980
> 
> 标签：.net, sqlite, driver

真正的快速问题！***如果我将 SQLite 驱动程序加载到我的 .NET 项目中，当我保存并编译这个项目（它是一个简单的 Windows 窗体应用程序）时，SQLite 驱动程序会构成应用程序的一部分吗？**基本上，我计划让我的一个表单控件在用户机器上存在的 SQLite 数据库上执行 SQL 查询。显然，如果这个驱动程序不存在，那么 SQLite 数据库文件将无法被解释！

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:31:44.667

我假设驱动程序是指外部 DLL——类似于[ADO.NET](http://sourceforge.net/projects/sqlite-dotnet2/)库。您需要将 DLL 与您的可执行文件一起分发，或者将源代码直接编译到您的解决方案中。

您还可以在事后使用[ILMerge](http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx)将 DLL 合并到您的可执行文件中。

# asp.net - 使用 Linq、asp.net 连接到 SQL 服务器

> ID：12918128
> 
> 赞同：1
> 
> 时间：2012-10-16T15:25:48.973
> 
> 标签：asp.net, sql, linq

我正在使用 asp.net 创建一个网站，我需要使用本地 SQL 服务器（使用 Microsoft SQL 服务器）。我已经使用 MS SQL Server Management Studio 在其中创建了数据库和表。

现在我成功连接到数据库并使用以下命令进行一些简单的添加/查询：

```
string connectionString = "data source=ABCD\\SQLEXPRESS;initial catalog=PMD;Trusted_Connection=yes;";

string sqlQuery = "INSERT INTO PMD (username, userID, userAddress)";
sqlQuery +=               " VALUES (@user,    id,     add)";
SqlConnection dataConnection = new SqlConnection(connectionString);
SqlCommand dataCommand = new SqlCommand(sqlQuery, dataConnection);

dataCommand.Parameters.AddWithValue("user", USER.Value);
dataCommand.Parameters.AddWithValue("id", ID.Value);
dataCommand.Parameters.AddWithValue("add", ADDRESS.Text);

dataConnection.Open();
dataCommand.ExecuteNonQuery();
dataConnection.Close(); 
```

上面的命令可以在表格中添加一列，并注明值。查询以类似的方式完成。与Linq相比，这不是很简洁。

所以我想知道如何更改代码以便可以使用 Linq。

现在对我来说最大的问题是如何连接到基地。我已经知道 Linq 的所有语法。

```
eg: var query=from c in db.username where c.Contain(“Micheal”) select c (or maybe db.PMD.username) 
```

如何让数据库与 ABCD/SQLEXPRESS、表 PMD 链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:33:23.887

首先，您需要一个**对象/关系映射器**(O/RM)。您不能只将 LINQ 放在旧的 ADO.NET 代码之上。

微软提供了两种：**Linq2SQL**和**Entity Framework**。

**Linq2SQL**已停止使用。如果我必须在两者之间进行选择，我会选择**Entity Framework**。

在这里可以找到介绍：[http ://www.asp.net/entity-framework](http://www.asp.net/entity-framework)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:36:21.283

例如，安装[Entity Framework](http://msdn.microsoft.com/en-us/data/ee712906.aspx)，然后[使用实体框架连接到 sql server](https://stackoverflow.com/questions/2710654/how-to-connect-to-sqlexpress-for-entity-framework-using-visual-studio-2010-expre)

# java - 虽然 nextLine() 不等于 ""

> ID：12918146
> 
> 赞同：1
> 
> 时间：2012-10-16T15:26:56.743
> 
> 标签：java, string, input, while-loop

当输入文件在下一行有一个字符串时，我试图继续循环，但我得到一个错误。知道为什么吗？

```
while( !((input = in.nextLine()).equals(""))){
   ...
} 
```

输出：

```
Enter file name: input1.txt
evil live
Exception in thread "main" This is a palindrome
level
This is a palindrome
dog
Not a palindrome
java.util.NoSuchElementException: No line found
    at java.util.Scanner.nextLine(Scanner.java:1516)
    at Palindrome.main(Palindrome.java:41) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T15:30:25.980

您的代码不正确，因为输入可能会在没有提供空行的情况下结束。在检查它是否为空之前，您应该检查该行是否可用：

```
while(in.hasNextLine() && !((input = in.nextLine()).equals(""))){
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T15:30:25.180

文件末尾没有一行。当读取最后一行时，下一次调用`nextLine()`将失败。用于[`hasNextLine()`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#hasNextLine%28%29)防止这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T15:29:59.460

`in.nextLine()`可能返回一个空值，它被分配给`input`你试图调用的空值`equals`。

使用`hasNextLine`（[此处的文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#hasNextLine%28%29)）确保您可以获得下一行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T15:30:48.990

设置循环的方式，它永远不会到达 "" 字符串，因为它会在这样做之前到达文件的末尾。它应该是这样的

```
while (input.hasNextLine()) {
    ...
} 
```

这意味着它将继续，直到文件没有下一行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T15:30:58.003

比较`null`以检查`End-Of-File`

作为

```
 while(((input = in.nextLine())!= null) && !(input.equals(""))){ 
```

或尝试：

```
 while(in.hasNextLine(){
       input = in.nextLine();
        if(input != null && !(input.equals(""))){
          ........
        }
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T15:33:16.740

尝试使用这种类型的东西，如果需要，捕获异常：

```
input = in.nextLine();
while( !(input.equals(""))){
...
} 
```

如果它抛出一个错误，然后设置一个 try...catch 循环

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-16T15:35:23.327

可能你需要，

```
while(in.hasNextLine()){
    input = in.nextLine();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-16T15:37:53.623

Scanner 在输入用完时抛出异常。你似乎在想它会返回一个零长度的字符串。

您是否使用扫描仪一次读取文件一行？那不是它的用途。您可能想查看 BufferedReader。

# java - GWT 运行时 Java 仿真

> ID：12918150
> 
> 赞同：0
> 
> 时间：2012-10-16T15:27:03.400
> 
> 标签：java, javascript, gwt

我对 GWT 实现 JRE 库仿真技术很感兴趣。

GWT 如何模拟 Java 库？

在 JavaScript 中如何有效地实现 HashMap？它是用纯 JavaScript 实现的，还是在代码中使用时编译为 Java 源代码？

我了解 gwt-dev 库中存在一些用于开发（托管）模式的实现。生产代码的实现是否相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T15:57:17.517

您可以[在此处](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation)查看模拟的 JRE 库。对于他们中的大多数，GWT 将使用 JavaScript 对应物，但在某些情况下，GWT 将拥有自己的 JavaScript 实现版本。

在 HashMaps 的情况下，由于内置 JavaScript 版本仅提供 String->value 映射，GWT 将使用它自己的实现来支持 Object->Object 映射。[您可以在此处](http://code.google.com/p/google-web-toolkit/wiki/HashMapOptimization)找到更多详细信息。

另外要了解生产（编译）和开发模式（调试）之间的区别，您可以查看[编译和调试](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging)部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T19:05:33.033

您可以在线浏览代码，例如[HashMap](http://google-web-toolkit.googlecode.com/svn/trunk/user/super/com/google/gwt/emul/java/util/HashMap.java)，或者更有趣的是[AbstractHashMap](http://google-web-toolkit.googlecode.com/svn/trunk/user/super/com/google/gwt/emul/java/util/AbstractHashMap.java)。如您所见，有一些 JSNI 方法（带有`native`关键字和`/*-{ ... }-*/`语法的方法）。但是仿真代码中的许多方法都建立在 JSNI 方法之上：它们被编写为“更高级别”的 Java 方法。

该仿真代码实际上只是您自己编写的 GWT 代码（当然，统计上 JSNI 代码的百分比更高）。它使用了这种[`<super-source>`](https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects#DevGuideModuleXml)机制：这样，同一个类的客户端代码在生产模式和开发模式下可以不同。

# arrays - 在 csv 数据文件中像矩阵一样组织值

> ID：12918152
> 
> 赞同：1
> 
> 时间：2012-10-16T15:27:08.067
> 
> 标签：arrays, vbscript, formatting, string-formatting

其实我正在写一个文件转换工具。数据值表示 120x120 矩阵。我的第一个想法是两个嵌套的 for 循环，第一个循环中只有一个新行：Easy。

输入文件的每个 fith 值都有一个 vbNewLine。我将输入文件解析为字符串`strAll`。

**输入**

strAll 包含 10 个字符长的值

```
"  -24.1189"  (two blanks before value)
"    1.2345"  (four blanks before value) 
```

**输出**

```
-24.1189;-24.1189; (...total 120 values...)
-24.1234;-24.1189; (...total 120 values...)
(... total 120 rows ...) 
```

使用`Mid`hat 应该很容易解析：`Mid(strAll, 1+i, 10+i)`，`i`for 循环中的计数器在哪里。A`Replace(stAll, " ", "")`应删除所有 3 个空白、2 个空白和 1 个空白。

**问题：**如何将字符串输出到文件，格式类似于矩阵？

```
Dim intValueLength, maxValue, intValueInRowMax
intValueLength=10
intValueInRowMax=120
maxValues=intValueInRowMax * intValueInRowMax

Sub Strg2Array
  arrAll = array()

  ' convert to array
      For i=1 To maxValues
        ReDim Preserve arrAll(UBound(arrAll) +1)
        arrAll(UBound(arrAll)) = Mid(strAll, 1+(i-1)*intValueLength, i*intValueLength)
      Next
End Sub

Sub SaveAll
      Dim intValueInRow
      intValueInRow=0
  Const ForWriting = 2
  Set objFSOOut = CreateObject("Scripting.FileSystemObject")
  Set objOutput = objFSOOut.OpenTextFile(strFileName, ForWriting, true)
      for each value in arrAll
        objOutput.Write value
        intValueInRow = intValueInRow + 1  'Argh, there is no "++" operator?
        If (intValueInRow = intValueInRowMax) Then
          objOutput.Write vbNewLine
          intValueInRow=0
        End If
      next
objOutput.Close
Set objFSOOutput = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:08:27.177

一方面，您的程序中似乎有错字`Strg2Array()`。

```
arrAlles(UBound(arrAll)) = ... 
```

应该是

```
arrAll(UBound(arrAll)) = ... 
```

话虽如此，我可以建议一种不同的方法吗？由于您似乎有这样的输入文件：

```
"  -24.1189";"    1.2345";"  124.5290";"   -5.3951";"    2.1062"
"    2.6702";"  -23.1502";"   -1.5028";"   -2.6223";"  -24.3573"
... 
```

并且似乎想只用数字（没有双引号和空格）创建以分号分隔的输出，如下所示：

```
-24.1189;1.2345;124.5290;-5.3951;2.1062;...(115 more)...
... 
```

我会使用更像这样的东西：

```
Set fso = CreateObject("Scripting.FileSystemObject")

strAll = fso.OpenTextFile(WScript.Arguments.Unnamed(0), 1).ReadAll

Set re = New RegExp
re.Pattern = "\s+"

strAll = Replace(strAll, vbNewLine, ";")
strAll = Replace(strAll, """", "")
strAll = re.Replace(strAll, "")

arrAll = Split(strAll, ";")

For i = 0 To UBound(arrAll)
  WScript.StdOut.Write arrAll(i)
  If i Mod 120 = 119 Then
    WScript.StdOut.WriteLine
  Else
    WScript.StdOut.Write ";"
  End If
Next 
```

这将从作为脚本第一个参数给出的文件中读取输入，删除双引号和空格，然后将字段写入`StdOut`（每行 120 个字段）。将输出重定向到一个新文件，你就完成了。

如果您需要用空字段填充最后一行，请附加如下内容：

```
If (i Mod 120) <> 0 Then
  For n = i Mod 120 To 118   ' max. index - 1
    WScript.StdOut.Write ";"
  Next
End If 
```

你会这样调用脚本：

```
cscript.exe input.csv > output.csv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:39:59.363

（几乎）与 Ansgar 相同的想法，不同的实现：

```
 Const cnRows = 4    ' to keep the demo simple
  Const cnCols = 3
  Const csFSep = ";"
' Const csRSep = vbLf
  Dim   csRSep : csRSep = vbLf

  Dim aInps : aInps = Array( _
      Join(Array("A1  B1 C1 A2", vbLf, "B2,C2", "comment", vbCrLf, "A3 B3 C3", vbTab, "A4-B4-C4")) _
    , "1 2 3 4 5 6 7 8 9 10 11 12" _
    , Join(Array("1.1 -2.2 3.3 4", vbLf, "0.5 -6.6", "comment", vbCrLf, "7 8.0 -9.99", vbTab, "10.10*11.11***-12.12")) _
  )
  ' no need to care for the input format, as long as the valid data can be
  ' specified by a RegExp pattern (and the file contains 'enough' info)
  Dim reCut : Set reCut = New RegExp
  reCut.Global  = True
  reCut.Pattern = "([A-Z-])?\d+(\.\d+)?"

  Dim sInp
  For Each sInp In aInps
      WScript.Echo Join(Array("----", vbCrLf, sInp, vbCrLf, "----"), "")
      Dim oMTS : Set oMTS = reCut.Execute(sInp)
      If oMTS.Count <> cnRows * cnCols Then
         WScript.Echo "Bingo:", oMTS.Count, "<>", (cnRows * cnCols)
      Else
         Dim m
         For m = 0 To oMTS.Count - 1
             WScript.Stdout.Write oMTS(m).Value
             If 0 = (m + 1) Mod cnCols Then WScript.Stdout.Write csRSep Else WScript.Stdout.Write csFSep
         Next
      End If
  Next 
```

输出：

```
----
A1  B1 C1 A2
 B2,C2 comment
 A3 B3 C3        A4-B4-C4
----
A1;B1;C1
A2;B2;C2
A3;B3;C3
A4;B4;C4
----
1 2 3 4 5 6 7 8 9 10 11 12
----
1;2;3
4;5;6
7;8;9
10;11;12
----
1.1 -2.2 3.3 4
 0.5 -6.6 comment
 7 8.0 -9.99     10.10*11.11***-12.12
----
1.1;-2.2;3.3
4;0.5;-6.6
7;8.0;-9.99
10.10;11.11;-12.12 
```

我的模式试图识别有效数据并避免（可能是昂贵的）字符串操作。

# android - Android屏幕尺寸分辨率纵横比

> ID：12918153
> 
> 赞同：0
> 
> 时间：2012-10-16T15:27:10.500
> 
> 标签：android, drawable, resolution, aspect-ratio, screen-size

我几乎完成了我的第一个应用程序，没有什么了不起的。但我的问题是我只使用了 hdpi 可绘制文件夹。我让它适合屏幕分辨率 480x800，即 3:5 的纵横比。它适用于 3:5 纵横比的所有尺寸。但是，例如三星 Galaxy S3 的屏幕分辨率为 720x1280，纵横比为 9:16，所有按钮都太小而且位置错误！我需要做什么？

注意：改变屏幕大小不是问题，但改变屏幕纵横比是一个问题！

我需要在所有四个可绘制文件夹中制作图像吗？在那种情况下，如果我在 hdpi 中已经有 480x800，我应该在不同的文件夹中制作什么尺寸的不同图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:39:20.780

在创建图像尺寸时遵循 3:4:6:8 以支持多个屏幕。要支持所有屏幕尺寸，您应该使用所有四个文件夹。

您可能还想看看这个问题的答案，它很有帮助：[How do I convert ppi into dpi for Android images？](https://stackoverflow.com/questions/6930031/how-do-i-convert-ppi-into-dpi-for-android-images)

# vb.net - 将字符串转换为其他类型

> ID：12918156
> 
> 赞同：1
> 
> 时间：2012-10-16T15:27:16.693
> 
> 标签：vb.net, type-conversion

我想将字符串转换为其他类型。问题是我只在运行时知道类型。我不想使用 Select 案例。有更好的方法吗？更多信息：我想在运行时构建一个表单。因此，在 xml 中，我拥有该表单的控件，其中包含我想要设置值的所有属性：

```
 <Controls>
   <Label>
    <Text>Names</Text>
    <AutoSize>False</AutoSize>
    <Enabled>True</Enabled>
   </Label>
   <TextBox>
     <Text>Id:</Text>
     <Enabled>FALSE</Enabled>
   </TextBox>
 </Controls> 
```

不，我的代码是：

```
 For Each elem As XElement In xmlDoc.Root.Element("Controls").Elements  
         Dim oType As Type
         oType = FindType("System.Windows.Forms." & elem.Name.ToString) 'FindType is a function to return the type
         Dim cnt As New Control
         cnt = Activator.CreateInstance(oType)
                For Each proper As XElement In elem.Elements
                  Dim propName As String = proper.Name.ToString
                  Dim myPropInfo As PropertyInfo = cnt.GetType().GetProperty(propName)
                    If myPropInfo IsNot Nothing Then
                        Dim val As String = proper.Value
                       ' HERE SOMETHING TO CONVERT THE STRING TO myPropInfo.PropertyType
                        ' Setting a value to the property
                        cnt.GetType().GetProperty(propName).SetValue(cnt, val, Nothing)
                    End If
                  Next
            Me.FlowLayoutPanel1.Controls.Add(cnt)
          Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:36:08.020

您正在寻找的是该[`Convert.ChangeType`](http://msdn.microsoft.com/en-us/library/dtb69x08.aspx)方法，它接收两个参数，您要转换的字符串，以及`Type`您要转换为：

```
Dim val As Object = proper.Value
Dim targetProperty as PropertyInfo = cnt.GetType().GetProperty(propName)
Dim convertedVal = Convert.ChangeType(val, targetProperty.PropertyType)
targetProperty.SetValue(cnt, convertedVal, Nothing) 
```

# python - 打开文件和使用模块的区别

> ID：12918157
> 
> 赞同：0
> 
> 时间：2012-10-16T15:27:25.820
> 
> 标签：python

下面，我打印出`html`外部定义的表单。`foo.py`除了语法之外，每个字符串的检索和使用方式是否有区别？如果是这样，在什么情况下一种方法优于另一种方法？例如，我是否最好将`html`模块中的多个文件定义为字符串并以这种方式访问​​它们，而不是将它们保存在单独的 .html 文件中并`open`一遍又一遍地使用？

**模组.py**

```
form = """\
<form type="POST" action="test.py">
   Enter something:<input type="text" name="somethign">
</form>
""" 
```

**表单.html**

```
<form type="POST" action="test.py">
   Enter something:<input type="text" name="something">
</form> 
```

**foo.py**

```
import mod

print mod.form

with open('form.html', 'r') as form:
   print form.read() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:40:07.130

拥有 .html 文件会更好。当然，打开文件、读取其内容然后关闭它会有一些开销，但您将有很多优势：

*   任何了解 HTML 语法的人都可以编辑 .html 文件。
*   .html 文件可以在不重新启动程序的情况下进行编辑，这对服务非常有用。
*   您可以通过引入一些缓存技术来消除打开/读取/关闭开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T15:35:50.547

设计师编辑离散的 HTML 文件比处理嵌入在代码中的 HTML 要容易得多。

# php - 时间戳：天 - 小时 - 分钟

> ID：12918158
> 
> 赞同：1
> 
> 时间：2012-10-16T15:27:26.850
> 
> 标签：php

有人可以告诉我如何在 PHP 中将特定时间戳转换为天 - 小时 - 分钟吗？

例如我想得到这样的东西：（20天13小时35分钟）从这样的随机时间戳：534222234

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-30T08:14:41.513

```
function time2string($time) {
    $d = floor($time/86400);
    $_d = ($d < 10 ? '0' : '').$d;

    $h = floor(($time-$d*86400)/3600);
    $_h = ($h < 10 ? '0' : '').$h;

    $m = floor(($time-($d*86400+$h*3600))/60);
    $_m = ($m < 10 ? '0' : '').$m;

    $s = $time-($d*86400+$h*3600+$m*60);
    $_s = ($s < 10 ? '0' : '').$s;

    $time_str = $_d.':'.$_h.':'.$_m.':'.$_s;

    return $time_str;
} 
```

使用示例：

```
echo time2string(86500); // 01:00:01:40  dd:hh:mm:ss 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T15:30:59.460

这是我在几分钟内所做的示例，几秒钟

```
function convertToMinSec($time) {
    $min = intval(($time / 60) % 60);
    $minSec = $min.'m ';

    $sec = intval($time % 60);
    $sec = str_pad($sec, 2, "0", STR_PAD_LEFT);
    $minSec .= $sec.'s';

    return $minSec;
} 
```

这是在几分钟内将时间（以秒为单位）除以 60 并获得 60 的模数。这将获得分钟数。

然后我基本上做同样的事情来获得秒数（mod 是余数）然后如果它低于 10 秒我填充左边

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T15:48:05.957

您可以执行以下操作

```
$now = date_create("now");
$other_date = date_create("2012/05/10");
$interval = date_diff($now, $other_date);
$interval->format("d h i"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T15:33:40.847

您可以使用日期函数转换时间戳。

[http://de2.php.net/manual/en/function.date.php](http://de2.php.net/manual/en/function.date.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-12T12:34:55.883

我的代码支持数年和数周

```
function array2readable($array, $separator, $last_separator) {                              
    $result = preg_replace(strrev("/$separator/"),strrev($last_separator),strrev(implode($separator, $array)), 1);
    return strrev($result);
}

function unixTime2text($time) {
    $value['y'] = floor($time/31536000);
    $value['w'] = floor(($time-($value['y']*31536000))/604800);
    $value['d'] = floor(($time-($value['y']*31536000+$value['w']*604800))/86400);
    $value['h'] = floor(($time-($value['y']*31536000+$value['w']*604800+$value['d']*86400))/3600);
    $value['m'] = floor(($time-($value['y']*31536000+$value['w']*604800+$value['d']*86400+$value['h']*3600))/60);
    $value['s'] = $time-($value['y']*31536000+$value['w']*604800+$value['d']*86400+$value['h']*3600+$value['m']*60);

    $unit['y'] = 'year' . ($value['y'] > 1 ? 's' : '');
    $unit['w'] = 'week' . ($value['w'] > 1 ? 's' : '');
    $unit['d'] = 'day' . ($value['d'] > 1 ? 's' : '');
    $unit['h'] = 'hour' . ($value['h'] > 1 ? 's' : '');
    $unit['m'] = 'minute' . ($value['m'] > 1 ? 's' : '');
    $unit['s'] = 'second' . ($value['s'] > 1 ? 's' : '');

    foreach($value as $key => $val) {
        if (!empty($val)) {
            $not_null_values[] .= $val . ' ' . $unit[$key];
        }
    }

    return array2readable($not_null_values, ', ', ' and ');
} 
```

# 示例 1

```
echo unixTime2text(1776900); # 20 days 13 hours 35 minutes 
```

# 示例 2

```
echo unixTime2text(534222234); # 16 years, 49 weeks, 3 hours, 3 minutes and 54 seconds 
```

# css - “部分”相对 放置？

> ID：12918159
> 
> 赞同：-1
> 
> 时间：2012-10-16T15:27:31.827
> 
> 标签：css, html, placement

我想放置一个距离页面中心 20 像素的固定宽度和高度的 HTML div 元素。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:29:26.900

是的。将 div 的 css 更改为：

```
position: absolute; 
top: 50%; 
left: 50%; 
margin: (whatever direction you want to move) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:34:32.703

如果没有更多信息，这有点难以判断，但是是的，你可以。

水平居中，距“边”20px：

```
#my-element {
    margin: 0 auto; /* center */
    position: relative;
    left: -20px; /* offset */
} 
```

水平和垂直居中（需要元素的固定高度）：

```
#my-element {
    width: 100px;
    height: 100px;

    position: absolute; /* or fixed */
    left: 50%;
    top: 50%;

    margin: -50px 0 0 -50px; /* half of the elements width and height in negative margin pulls it to the center - to offset it 20px simply increase/decrease these values */
} 
```

# events - Magento 清空购物车事件

> ID：12918160
> 
> 赞同：3
> 
> 时间：2012-10-16T15:27:32.113
> 
> 标签：events, magento, shopping-cart

我是 Magento 的真正新手，购物车页面中有一个按钮可以清空购物车的内容。我试图找到此操作触发的事件，我尝试了 checkout_quote_destroy 但不是那个，也不是 sales_quote_remove_item。

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:48:54.620

您可以做的是记录所有事件，并在它们中搜索正确的事件：

1.  打开：`/app/code/core/Mage/Core/Model/App.php`
2.  搜索：`public function dispatchEvent($eventName, $args) {`
3.  在下面添加这一行：`Mage::log("Event name: $eventName");`
4.  往里看，`var\log\system.log`你会看到一长串事件。

# sockets - Phusion Passenger 中运行的应用程序是否需要在 fork 上重新连接 ActiveRecord？

> ID：12918163
> 
> 赞同：1
> 
> 时间：2012-10-16T15:27:43.550
> 
> 标签：sockets, activerecord, passenger, phusion

根据本文档：

[http://www.modrails.com/documentation/Users%20guide%20Nginx.html#_smart_spawning_gotcha_1_unintentional_file_descriptor_sharing](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#_smart_spawning_gotcha_1_unintentional_file_descriptor_sharing)

智能生成操作后，套接字连接将继续共享。列出的示例适用于 Memcached。

在这种情况下是否也必须类似地重新连接 ActiveRecord？就像是：

```
PhusionPassenger.on_event(:starting_worker_process) do |forked|
        if forked
            # We're in smart spawning mode.
            ActiveRecord.establish_connection(...)
        else
            # We're in conservative spawning mode. We don't need to do anything.
        end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:23:03.670

根据指南，乘客在创建新的工作进程时会自动重新建立与数据库的连接，因此您不必这样做。

您是否遇到任何麻烦，导致您相信情况并非如此？

# c# - 我可以让 C# 自动将用户设置填充到 DataView 中吗？

> ID：12918165
> 
> 赞同：0
> 
> 时间：2012-10-16T15:27:48.503
> 
> 标签：c#, .net, winforms

我有一堆用户设置，`Properties.Settings.Default`并且觉得/认为我可以简单地填充一个`DataView`（或其他东西），从而避免对“每个设置的控制”的需要，并允许我在将来添加一个设置变量。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T15:56:21.517

您可以改为查看使用 PropertyGrid 控件来托管用户设置：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.propertygrid(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.propertygrid(v=vs.100).aspx)

# ruby-on-rails - 强制 Rails cookie 发送任何类型的连接（安全/非安全）

> ID：12918167
> 
> 赞同：5
> 
> 时间：2012-10-16T15:27:55.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cookies

我在浏览器中设置了一个cookie，如下所示：

```
def set_browser_cookie
  cookies.permanent[:ignore_stats_cookie] = {
    :value => STAT_COOKIE,
    :domain => :all,
    :secure => false,
    :httponly => false
  }
  redirect_to settings_path
end 
```

当我在 DEVELOPMENT 中查看 Chrome 中的 cookie 时，cookie 允许任何类型的连接。

![本地主机](../Images/3f66193bc0507b4dbe9afd5dd7b82a49.png)

当我在 PRODUCTION 中查看 Chrome 中的 cookie 时，cookie 只允许安全连接（应用程序本身是 https）。

![生产](../Images/5b49f13e5ebe6df5b6df1d614291b2af.png)

我将 cookie 设置为`:secure => false,`，为什么只在生产中为安全连接设置 cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T16:39:34.680

我遇到了同样的问题，并且能够使用`tunnels`gem 作为代理在我的开发机器上重现，并`force_ssl = true`在“开发”环境中设置。

我调试了Rack和ActionPack，发现`; secure`最后没有发送header，但之后修改了。

我的下一步是使用 Wireshark 捕获 SSL 会话并对其进行解密，但我已经没有时间了。

我使用托管在 nginx 后面的 PHP 应用程序进行了测试，在使用 HTTPS 时，服务器能够发送不包含`secure`标志的 cookie。所以这个问题肯定是特定于我们在 Rails 中使用的堆栈，而不是浏览器问题。

# c++ - 在头文件中定义的模板类成员函数中使用命名空间

> ID：12918173
> 
> 赞同：2
> 
> 时间：2012-10-16T15:28:02.377
> 
> 标签：c++, templates, header-files

我是 C++ 新手，但据我所知，`using namespace`在头文件中使用关键字是不好的。我正在尝试编写一个模板类，并且已阅读模板类成员函数的定义必须在标头中，并且所有模板代码必须在同一个位置。`using namespace`我的问题是，如果没有关键字，编写所有代码会很乏味。例如，目前我有：

```
#ifndef RANDOMTREE_H_
#define RANDOMTREE_H_

template<class T>
class RandomTree {
private:
    typedef double (*funcion_ptr) (T, T);
public:
    RandomTree(std::vector<T> data, std::vector<funcion_ptr>){
        ...
    }
    void train_tree();
};

#endif /* RANDOMTREE_H_ */ 
```

但我打算在函数体内使用一些提升方法等，并想知道是否有办法不必继续输入前缀`std::`和`boost::`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T15:32:05.447

好吧，这段代码对我来说看起来不错。

在声明中写一次它们并不是什么大问题。

在定义中，如果你想省略写作`ns::`，你可能有`using namespace ns;` *一个 function*。

或者，只包含一些名称，例如：`using ns::name;`. 但我不会那样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T15:56:56.863

您还可以使用 typedef：

`typedef std::string string;`

它的优点是不使用`using`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T15:29:59.610

不必键入限定符 ( `std::`, `boost::`)的选项**是**具有`using`指令。如果有任何其他方式（在这种情况下没有），它会带来与拥有指令相同的问题`using`，所以任何一种选择都会同样糟糕。

请注意，`using`不必将其应用于命名空间。例如，您可以执行以下操作：

```
using std::string; 
```

然后直接使用`string`，但也不建议这样做。

# ssis - 创建事实表

> ID：12918175
> 
> 赞同：2
> 
> 时间：2012-10-16T15:28:06.140
> 
> 标签：ssis, ssas, data-warehouse

我了解事实表背后的逻辑以及它应该包含的内容。我想知道的是如何创建这些事实表。

这些事实表可以是视图或命名查询，还是必须是实际表？采取一种或另一种方式的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T23:16:15.520

是的，*从技术上讲*，事实表可以是视图或命名查询。

好处

*   不需要额外的磁盘空间:-)
*   零数据可用性延迟（数据在插入源后立即可用）

缺点

*   不缩放
*   较慢的查询响应速度（因视图定义的复杂性而异）
*   不缩放
*   增加维护复杂性（这是巨大的顺便说一句）
*   不缩放
*   灵活性降低
*   没有代理键
*   没有 type2 SCD
*   索引问题
*   **不缩放**

FWIW - 我使用视图构建了一个小型星型模式（3 个事实表，10 个维度），但这只是为了证明概念，我强烈反对将其用于生产用途。

# php - 正则表达式 URL 剪切问号

> ID：12918177
> 
> 赞同：1
> 
> 时间：2012-10-16T15:28:10.753
> 
> 标签：php, regex

> **可能重复：**
> [从 PHP 中的 URL 解析域](https://stackoverflow.com/questions/276516/parsing-domain-from-url-in-php)
> [如何在 PHP 中解析 URL？](https://stackoverflow.com/questions/5624370/how-do-i-parse-a-url-in-php)

我有这个代码：

```
$url = preg_replace("/^(http:\/\/)*(www.)*/is", "", $url);
    $url = preg_replace("/\/.*$/is" , "" ,$url); 
```

在 .com 之后是 / 的位置获取域名效果很好。如果有这样的网址，我会遇到问题：

```
http://www.something.com?id=21213 
```

我需要在正则表达式中添加什么来剪切 ?id=21213 所以只剩下 something.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:31:16.790

看看神奇的内置功能[`parse_url()`](http://php.net/manual/en/function.parse-url.php)。

使用`parse_url()`，您可以仅通过以下方式检索域名：

```
$domain = parse_url($url, PHP_URL_HOST);
if(0 === strpos('www.', $domain)){
    $domain = substr($domain, 4);
} 
```

# php - 两张表一起查询，只显示一条记录

> ID：12918183
> 
> 赞同：1
> 
> 时间：2012-10-16T15:28:35.780
> 
> 标签：php, mysql, sql

我正在构建一个投票系统，我现在有一个查询，应该选择所有投票并计算每个投票的所有投票（位于单独的表中）。所以我的表看起来像：

```
Polls:  
ID  
Title  
Body

Votes:  
ID  
PollID  
Vote  (This value is either 0 or 1) 
```

好吧，总票数看起来很有效，问题是它目前只显示一条记录。

目前我的查询如下所示：

```
SELECT POLLS.ID, 
       POLLS.TITLE, 
       POLLS.BODY, 
       Sum(CASE 
             WHEN VOTES.VOTE = 1 
                  AND VOTES.POLLID = POLLS.ID THEN 1 
             ELSE 0 
           END) AS yay, 
       Sum(CASE 
             WHEN VOTES.VOTE = 0 
                  AND VOTES.POLLID = POLLS.ID THEN 1 
             ELSE 0 
           END) AS nay, 
       FROM     polls, 
       VOTES 
ORDER  BY POLLS.ID 
```

我也将 PHP 与 Codeigniter 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:35:33.133

```
SELECT polls.ID,polls.title,polls.body,
  SUM(case when votes.vote = 1 then 1 else 0 end) AS yay,
  SUM(case when votes.vote = 0 then 1 else 0 end) AS nay,
FROM polls 
JOIN votes ON polls.ID = votes.pollID
  GROUP BY poll.ID, polls.title, polls.body
  ORDER BY polls.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:33:00.377

您需要表中`GROUP BY pollID`的值`votes`：

```
SELECT p.ID, p.title, p.body, v.yay, v.nay
FROM
(
    SELECT PollID,
      SUM(CASE WHEN vote = 1 THEN 1 ELSE 0 END) AS yay,
      SUM(CASE WHEN vote = 0 THEN 1 ELSE 0 END) AS nay,
    FROM votes
    GROUP BY PollID
) v
INNER JOIN Polls p ON v.PollID = p.Id
ORDER BY p.ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T15:36:52.890

我会去：

```
 SELECT polls.ID, polls.title, polls.body,
    SUM(IF(votes.vote = 1, 1, 0)) AS yay, 
    SUM(IF(votes.vote = 0, 1, 0)) AS nay
    FROM polls
    JOIN votes ON (votes.pollID = polls.ID)
    GROUP BY ID, title, body 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T15:48:00.280

你缺少的是“ `GROUP BY`”。`GROUP BY PollID`取和时使用。

# netbeans - 为什么 NetBeans 不断启动新的模拟器？

> ID：12918185
> 
> 赞同：1
> 
> 时间：2012-10-16T15:28:46.947
> 
> 标签：netbeans, android-emulator

通常情况下，当我点击“运行”时，NetBeans 会不断启动一个新的模拟器，但从不运行应用程序。是的，我确实等了几分钟，因为我知道这可能需要一段时间。如果我通过“工具 | Android SDK 和 AVD 管理器”菜单栏项启动模拟器，就会发生这种情况。最终，事情将开始正常工作（当然我不知道我做了什么让它工作）。有时我会收到要求选择正在运行的 AVD 或设备或启动 AVD 的对话框，但通常我没有收到该对话框。

有人知道这里发生了什么吗？

非常感谢，比尔

# javascript - 根据占位符的值显示具有值的动态复选框

> ID：12918186
> 
> 赞同：0
> 
> 时间：2012-10-16T15:28:52.870
> 
> 标签：javascript, dynamic, checkbox

我需要根据同一页面上占位符文本框中的值在我的页面中添加 chckboxes。当页面加载时，它应该检查占位符文本框的值。如果文本框值为“A”，则在页面上显示 2 个值为 B 的复选框和 C。如果文本框的值为“B”或“C”，则在页面上只显示一个值为“A”的复选框。我该怎么做？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:38:44.993

说这是你的例子（使用jQuery）：

```
<div id="placeholder"><input name="textbox" type="text" value="A" /></div> 
```

你需要这样的东西

```
$(function() {
    var value = $('#placeholder').find('input[name="textbox"]').val();
    if (value == "A") {
         var checkboxB = $('<input type="checkbox" value="b"/>'),
             checkboxC = $('<input type="checkbox" value="c"/>');
         $('#placeholder').append(checkboxB, checkboxC);
    }
    else {
         // ...
    }
} 
```

# python - Python 中的 dir() 和 locals() 有什么区别？

> ID：12918189
> 
> 赞同：9
> 
> 时间：2012-10-16T15:29:03.797
> 
> 标签：python

根据 Python 文档，`dir()`（不带 args）和`locals()`计算结果为名为`local scope`. 第一个返回名称列表，第二个返回名称-值对字典。这是唯一的区别吗？这总是有效的吗？

```
assert dir() == sorted( locals().keys() ) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T15:31:36.647

不带参数调用时的输出与`dir()`几乎相同`locals()`，但`dir()`返回字符串列表并`locals()`返回字典，您可以更新该字典以添加新变量。

```
dir(...)
    dir([object]) -> list of strings

    If called without an argument, return the names in the current scope.

locals(...)
    locals() -> dictionary

    Update and return a dictionary containing the current scope's local variables. 
```

* * *

类型：

```
>>> type(locals())
<type 'dict'>
>>> type(dir())
<type 'list'> 
```

* * *

使用更新或添加新变量`locals()`：

```
In [2]: locals()['a']=2

In [3]: a
Out[3]: 2 
```

但是，`dir()`这不起作用：

```
In [7]: dir()[-2]
Out[7]: 'a'

In [8]: dir()[-2]=10

In [9]: dir()[-2]
Out[9]: 'a'

In [10]: a
Out[10]: 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:32:11.797

> 确切的问题是“使用什么函数来检查是否在本地范围内定义了某个变量”。

在 Python 中访问未定义的变量会引发异常：

```
>>> undefined
NameError: name 'undefined' is not defined 
```

就像任何其他异常一样，您可以捕获它：

```
try:
    might_exist
except NameError:
    # Variable does not exist
else:
    # Variable does exist 
```

> 我需要了解语言架构才能编写更好的代码。

那不会使您的代码更好。你*永远不*应该让自己陷入需要这种事情的境地，这几乎总是错误的方法。

# javascript - 使用 javascript 管理动态生成的元素

> ID：12918190
> 
> 赞同：0
> 
> 时间：2012-10-16T15:29:14.390
> 
> 标签：javascript, html, google-maps-api-3

我有根据某些标准在谷歌地图上生成标记的代码。我试图做的是在地图旁边生成一个列表，其中包含与列表上出现的每个标记相关联的地址以及每个地址旁边的复选框。在这个列表的底部是一个“优化”按钮，它只返回选中了复选框的结果。

我的问题是：

1.  我将如何存储动态生成的复选框及其各自的地址字段，以便我可以使用优化按钮更新和修改选择？

2.  我将如何（或应该）实际设置每个复选框以在 onClick 上运行一个函数，该函数将从地图中删除标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:07:06.677

在给定的 div 中动态创建复选框

```
var holder = document.getElementById('holdingDiv');
var newCheckbox = document.createElement('input');
newCheckbox.type = 'checkbox';
newCheckbox.id = 'holdingDiv_option' + someValueIdentifier;
holder.appendChild(newCheckbox); 
```

要通过这些复选框添加事件处理程序：

```
// modify this if not just a bunch of checkboxes in a div:
var checkboxes = holder.getElementsByTagName('input'); 
for(var i=0; i < checkboxes.length; ++i) {
    var thisCheckBoxId = checkboxes[i].id;
    // create a listener
    var callback = function(event) {
        myGeneralHandler(i, event);
    }
    if(checkboxes[i].addEventListener) {
      checkboxes[i].addEventListener('click', callback, false);
    } else { //IE
      checkboxes[i].attachEvent('click', callback);
    }
} 
```

然后设置`myGeneralHandler`处理来自任何复选框的点击。

# linux - 返回 sg 设备大小的 shell 命令 (Linux)

> ID：12918191
> 
> 赞同：0
> 
> 时间：2012-10-16T15:29:17.943
> 
> 标签：linux, shell

我需要一个可以为我返回 sg 设备大小的 shell 命令。我在互联网上搜索了将近两个小时，但没有任何成功。

我可以通过编写程序来做到这一点，但必须有一种方法可以通过命令来实现它！我根本找不到！

不幸的是，在我工作的戴尔服务器上，sg_inq 和 sginfo 返回的是戴尔的 PERC 信息，而不是我尝试获取信息的设备。

我尝试使用 smartctl，但它返回有关设备（SSD）的静态（而不是真实）信息，因为它返回的字节数除以 512 显示我可以访问的扇区数更大（原文如此！）

任何 [shell 命令] 提示将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T21:57:10.123

我在这里为任何寻找它的人提供答案。

编写自己的程序或使用 smartctl ( [http://sourceforge.net/projects/smartmontools/files/smartmontools/6.0/](http://sourceforge.net/projects/smartmontools/files/smartmontools/6.0/) ) 并调用以下命令的最终方法：

```
#>./smartctl -a /dev/sdc
smartctl 6.0 2012-10-10 r3643 [x86_64-linux-2.6.18-274.18.1.el5] (local build)
Copyright (C) 2002-12, Bruce Allen, Christian Franke, www.smartmontools.org

Vendor:               DELL
Product:              PERC H710P
Revision:             3.13
User Capacity:        179,443,728,384 bytes [179 GB]
Logical block size:   512 bytes
Logical Unit id:      --------------------------------
Serial number:        --------------------------------
Device type:          disk
Local Time is:        Tue Sep 24 17:54:13 2013 EDT
Device does not support SMART

Error Counter logging not supported
Device does not support Self Test logging 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:55:23.680

利用`#fdisk -l /dev/sg2`

或者`# parted -l /dev/sg2`

# entity-framework-5 - EF 的自定义 ValidationContext？

> ID：12918194
> 
> 赞同：2
> 
> 时间：2012-10-16T15:29:34.853
> 
> 标签：entity-framework-5

我使用 EF 作为我的数据提供者来保存和验证我的项目。我有一些需要访问其他服务或项目的自定义验证逻辑。我知道 ValidationContext 类提供了这些选项。我的问题是如何获得自己的验证上下文与服务提供商或 EF 的项目？

当我在我的 POCO 实体上实现 IValidateObject 接口时，我得到了一个验证上下文的实例，但是我在哪里可以确保使用我自己的 ValidationContext 而不是 EF 默认值呢？

我想根据 ValidationContext 中提供的服务或项目这一事实进行一些验证

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:49:53.967

要传递 ValidationContext，您需要重写 DbContext.ValidateEntity()。该方法采用两个参数 - 实体条目和项目。您将在 items 字典中传递您的验证上下文。看看[这个 stackoverflow 问题](https://stackoverflow.com/questions/6495157/entity-framework-ivalidatableobject-reference-dbcontext)。

# c# - ReferenceEquals(variable, null) 和 variable == null 一样吗？

> ID：12918197
> 
> 赞同：3
> 
> 时间：2012-10-16T15:29:50.113
> 
> 标签：c#, reference, null

基本上是标题。我在我正在处理的代码中看到了很多前者，我想知道他们为什么不使用后者。两者之间有什么区别吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:32:41.177

并不真地。一个可以超载`operator ==`，所以你基本上可以让它返回，例如`false`总是。此运算符的推荐用法是表示值相等，因此（对于正确实现的运算符）如果对象是语义上的，则基本上检查`null` *可能会*`null`返回 true 。

有关更多详细信息和一些历史概述，请参阅[本文](http://blogs.msdn.com/b/ericlippert/archive/2009/04/09/double-your-dispatch-double-your-fun.aspx)。

另一个区别是对于值类型`ReferenceEquals`没有多大意义：例如，`int 0`在任何正常情况下，任何两个“实例”都必须被认为是相同的。（对于纯粹主义者：我加引号是因为严格来说，我们不能谈论值类型的实例。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T15:33:34.540

直接来自[文档](http://msdn.microsoft.com/en-us/library/system.object.referenceequals.aspx)

> 与 Equals 方法和相等运算符不同，ReferenceEquals 方法不能被覆盖。因此，如果您想测试两个对象引用的相等性并且不确定 Equals 方法的实现，您可以调用 ReferenceEquals 方法。但是，请注意，如果 objA 和 objB 是值类型，则在将它们传递给 ReferenceEquals 方法之前将它们装箱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T15:41:24.400

的主要好处`ReferenceEquals()`是意图更加清晰，您试图确定两个引用是否相等，而不是引用的对象的内容是否相等。

它通过检查转换为`operator ==`的两个引用之间的相等性来做到这一点`object`（因为参数都是`object`），这消除了任何`operator ==`可能混淆问题的子类重载（如`string`'s）。

所以本质上，这个：

```
if (ReferenceEquals(x, y)) 
```

与此相同：

```
if (((object)x) == ((object)y)) 
```

虽然前者更容易阅读。

肯定有它派上用场的时候，特别是当你超载`operator ==`自己时避免无限递归：

```
public class Foo
{
    public static bool operator ==(Foo first, Foo second) 
    {
        // can't say if (first == second) here or infinite recursion...
        if (ReferenceEquals(first, second))
        {
            // if same object, obviously same...
            return true;
        }

        // etc.
    }
 } 
```

# java - 如何通过次对角线穿过 2D 阵列？

> ID：12918198
> 
> 赞同：1
> 
> 时间：2012-10-16T15:29:52.860
> 
> 标签：java, c++, multidimensional-array, diagonal

正如我所说，我想通过辅助对角线“滚动”多维数组，我想要的输入是：（案例 a）[可以是 C++ 或 Java，没关系]

注意+编辑：顺序不是随机的。它从底部的 1 开始，一直向上。

这可能吗？

如果没有，那么至少有一半的代码？（案例二）

```
// Case a:
16 15 13 10
14 12 9 6
11 8 5 3
7 4 2 1

// Case b:
0 0 0 1
0 0 9 6
0 8 5 3
7 4 2 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T15:33:04.540

你可以用一个简单的循环来做到这一点（这是Java）：

```
int size = 4;
int[][] matrix = new int[size][size];
// . . .
for (int i = 0; i < size; ++i) {
    doSomethingWith(matrix[i][size - i - 1]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T15:49:37.413

```
 int[][] a={{7,6,4,1},{5,3,9,6},{2,8,5,3},{7,4,2,1}};
  for(int i=0; i<a.length; i++)
  {
   for(int j=a[i].length-1; j>=a[i].length-(i+1); j--)
   {
    System.out.print(a[i][j]+",");
   }
   System.out.println();
  } 
```

# excel - 为什么在 VBScript 中写入 Excel 单元格值很快，而在 PowerShell 中却很慢？

> ID：12918206
> 
> 赞同：5
> 
> 时间：2012-10-16T15:30:05.860
> 
> 标签：excel, optimization, powershell, vbscript, powershell-2.0

为什么在 VBScript 中将单元格值写入 Excel 比在 PowerShell 中快得多？PowerShell 不是新事物，而 VBScript 不是已弃用的 MS 脚本语言吗？

**VBScript 示例（保存到 filename.vbs）** 这将在瞬间运行。

```
Set objExcel = CreateObject("Excel.Application")
objExcel.Visible = false
Set objWorkbook = objExcel.Workbooks.Add()

' Edit: increased number of writes to 500 to make speed difference more noticeable
For row = 1 To 500
     'Edit: using .cells(row,1) instead of .cells(50,1) - this was a mistake
     objWorkbook.workSheets(1).cells(row,1).value = "test"
Next

objWorkbook.SaveAs(CreateObject("Scripting.FileSystemObject").GetParentFolderName(WScript.ScriptFullName) & "\test.xlsx")
objExcel.Quit
msgbox "Done." 
```

**PowerShell 示例（保存到 filename.ps1）**这需要几秒钟才能运行（数千条记录有问题）

```
#need this to work around bug if you use a non-US locale: http://support.microsoft.com/default.aspx?scid=kb;en-us;320369
[System.Threading.Thread]::CurrentThread.CurrentCulture = "en-US" 

$excel = New-Object -ComObject Excel.Application
$excel.Visible = $False
$xls_workbook = $excel.Workbooks.Add()

# Edit: using foreach instead of for
# Edit: increased number of writes to 500 to make speed difference more noticeable
foreach ($row in 1..500) {
    # Edit: Commented out print-line, slows down the script
    #"Row " + $row
    # This is very slow! - http://forums.redmondmag.com/forums/forum_posts.asp?tid=4037&pn=7
    $xls_workbook.sheets.item(1).cells.item($row,1) = "test"
}

$xls_workbook.SaveAs($MyInvocation.MyCommand.Definition.Replace($MyInvocation.MyCommand.Name, "") + "test.xlsx")
$excel.Quit()
[System.Runtime.Interopservices.Marshal]::ReleaseComObject($excel) 
```

我想将它用于数千条记录。如果没有快速的方法来做到这一点，PowerShell 不是一个选项。有更好的选择吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T19:14:29.463

您可以通过不遍历单个单元格来加快速度：

```
$excel = New-Object -ComObject Excel.Application
$excel.Visible = $True
$xls_workbook = $excel.Workbooks.Add()

$range = $xls_workbook.sheets.item(1).Range("A1:A100")
$range.Value2 = "test" 
```

如果您想将值数组写入范围，这里有一篇很好的博客文章，演示了类似的技术：

[如何使用 PowerShell 快速将数据导入 Excel 电子表格](http://powertoe.wordpress.com/2010/11/05/how-to-get-data-into-an-excel-spreadsheet-very-quickly-with-powershell-contd/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T15:51:32.363

有些事情在这里没有加起来：

您的 VBScript 一遍又一遍地写入一个单元格，而您的 PowerShell 代码写入 100 个单元格

```
objWorkbook.workSheets(1).cells(50,1).value = "test"

$xls_workbook.sheets.item(1).cells.item($row,1) = "test" 
```

您正在`"Row " + $row`PowerShell 上执行 - 这也可能会抵消比较。

如果要写入多个单元格，则应考虑使用数组并写入整个范围，因为这样具有更好的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T16:20:29.143

通过消除`for`循环测试并使用`foreach`.

```
for ($row = 1; $row -le 100; $row++) 
```

去：

```
foreach ($row in 1..100) 
```

通过这样做，您消除了比较和增量。

但除此之外，我的观察结果与您的一致（请参阅我对 Jook 回答的评论）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T23:58:51.800

PowerShell，就其对 cmdlet 的设计和使用而言，是一个非标准的混乱，至少对于基本的东西。任何程序员都应该能够使用和理解的 VBScript 具有执行基本操作的通用方法，不需要安装特殊的 cmdlet 或将其包含在部署的代码中。我相信这在很多方面都是一种倒退。

在有人诋毁我说我只是不使用 PowerShell 之前，我必须提到我在 UNIX shell 脚本编写方面有着悠久的历史。很明显，PowerShell 是类似的，但对我来说，它的实现几乎没有那么好。

我确实知道现实决定了我迟早会使用 PowerShell——我只是希望它在未来演变成一个更“标准”的替代品。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T02:26:25.607

不过，您仍然通过 COM 与 Excel 交互。由于 COMInterop 处理，这增加了一些开销。

# c# - 串口写入时需要显示新表单

> ID：12918207
> 
> 赞同：0
> 
> 时间：2012-10-16T15:30:12.590
> 
> 标签：c#, serial-port

尝试在 IDTECH 卡写入器等待刷卡时显示一个新表单，上面写着“请刷卡”。

```
private void writecard(string track1) //string track2)
    {

        SerialPort sp1 = new SerialPort(encoderport, 9600, Parity.None, 8, StopBits.One);
        sp1.ReadTimeout = 10000;

        if (sp1.IsOpen == true)
        {
            sp1.Close();
        }

        sp1.Open();
        sp1.Write(new byte[] { 0x1B, 0x77 }, 0, 2);
        Thread.Sleep(100);
        sp1.Write(new byte[] { 0x1B, 0x73 }, 0, 2);
        Thread.Sleep(100);
        sp1.Write(new byte[] { 0x1B, 0x01 }, 0, 2);
        Thread.Sleep(100);
        sp1.Write(track1);                              // Track 1
        Thread.Sleep(100);

        sp1.Write(new byte[] { 0x3f, 0x1c }, 0, 2);
        swipeform swipepop = new swipeform();
        swipepop.ShowDialog();                        // **Problem**

        Thread.Sleep(100);

        try
        {
            swipepop.Close();                         // **Problem**
            int firstChar = sp1.ReadChar();
            Thread.Sleep(500);
            string data = String.Concat(Convert.ToChar(firstChar), sp1.ReadExisting());
            //textBox3.Text = String.Format(data);
            if (data != "")
            {
                char result = data[1];
                if (result == '0')
                    MessageBox.Show("Encoding Successful");

                else
                    MessageBox.Show("Encoding Failed - Please try again");
            }
        }
        catch (System.TimeoutException)
        {
            MessageBox.Show("Timed out.  Please try again.");
            sp1.Write(new byte[2] { 0x1b, 0x61 }, 0, 2);
        }
        sp1.Close();
    } 
```

我遇到的问题是，一旦调用 writecard 方法，就会弹出 swipeform 并且设备要您滑动。但是，一旦您滑动表单，表单就会停留并且不会关闭，并且该方法不会继续，直到您关闭 swipeform。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:34:07.223

`Form.ShowDialog()`正在阻塞。这意味着它不会在表单关闭之前返回。

解决方案之一是： 检查`swipepop`表单中的串行端口。您可以通过`SerialPort`表单的构造函数传递您的对象。

# ruby - 多次读取/greping ruby 中的文件

> ID：12918213
> 
> 赞同：10
> 
> 时间：2012-10-16T15:30:28.133
> 
> 标签：ruby, file

如何在不重新打开文件的情况下将文件的*“指针”*重置为其开头？（类似于`fseek`C 语言？）

例如，我有一个文件，我想用 grep 查找两种模式：

```
f=open('test') => #<File:test> 
f.grep(/llo/)  => ["Hello world\n"] 
f.grep(/wo/)   => [] 
```

是否可以在`f`不重新打开文件的情况下重置？

注意：我不是在寻找解决方法；我可以自己想一些；）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-16T15:36:19.297

使用[倒带](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-rewind)

将 ios 定位到输入的开头，将 lineno 重置为零。

```
f = File.new("testfile") 
f.readline   #=> "This is line one\n"
f.rewind     #=> 0 
f.lineno     #=> 0 
f.readline   #=> "This is line one\n" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T15:38:52.090

查看该`IO`课程的 ruby​​ 文档。要重置流：

```
f.pos = 0 
```

或者

```
f.seek 0 
```

请注意，您还可以使用这些方法将流设置为任意字节位置，但如果文件包含多字节字符，请小心。

提示：`File.ancestors`将告诉您继承链，以便您可以查找可能完成您想要的方法（但有时您必须对单例方法和 进行更高级的反射`method_missing`）。

更新：

megas 的答案可能更干净，因为`rewind`也重置了`lineno`。`grep`的输出不受 的值的影响`lineno`，但`lineno`会变得越来越不准确，除非它被重置。如果您不关心`lineno`，您可以安全地使用我们的任一解决方案。

# jquery - 使用javascript设置带有特殊字符的隐藏字段值

> ID：12918219
> 
> 赞同：1
> 
> 时间：2012-10-16T15:30:39.317
> 
> 标签：jquery, escaping, special-characters, hidden-field, setvalue

我正在尝试将以下文本“这是评论”设置为使用 javascript 的隐藏字段的值。但它呈现以下输出。

```
<input type="hidden" comment"'="" a="" s="" value="1051_"Here" name="comment"> 
```

我需要在表单提交的 MVC 控制器操作中获取上述文本。如何使用 JavaScript 将上述带有特殊字符的文本设置为隐藏字段的值，以便在使用特殊字符发送时可以捕获该值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:37:28.020

只需用这样的反斜杠*转义*单引号：`'``\`

```
<input type="hidden" id="comment" name="comment" value="">

$('#comment').val('Here\'s a comment'); 
```

这是一个要测试的 jsFiddle：http: [//jsfiddle.net/leniel/vK2a9/](http://jsfiddle.net/leniel/vK2a9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:32:31.720

您的输入代码放错了位置`quote`，并且`double quote`.

```
<input type="hidden" comment="" a="" s="" value="1051_Here" name="comment"> 
```

设定值

```
 $("input[name='comment']").val("Here's a comment"); 
```

# oauth-2.0 - 我无法弄清楚 OAuth2

> ID：12918220
> 
> 赞同：0
> 
> 时间：2012-10-16T15:30:45.257
> 
> 标签：oauth-2.0, google-drive-api

好的，所以我只是想弄清楚如何设置 Google API，以便我可以开始使用我的 APP，但我要么错过了明显的东西，要么就是不太明白。

因此，当我看到 OAuth2 之后通常是 Drive SDK 时，每当我尝试进行设置时，似乎我也需要有一个网站才能正常工作。我是正确的还是我没有得到它？

什么是有效的“打开 URL”？我找不到任何可以正确解释这一点的东西...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T20:28:52.310

您需要一个网络服务器，但它不需要是一个可公开访问的网站。如果你有一个本地 Apache 服务器在你的开发机器上运行，那就可以正常工作。您只需要在 /etc/hosts 文件中给它一个域名（例如 localhost.example.com），然后将其指定为 Open URL。

# c - 堆栈处理函数参数的方式

> ID：12918224
> 
> 赞同：2
> 
> 时间：2012-10-16T15:30:54.883
> 
> 标签：c, exploit

我正在研究 The Shellcoder's Handbook 的 Format String 部分。正如本书建议的那样，我使用这样的代码进行测试：

[格式字符串.c]

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[]) {

    if(argc>1) {

        if(argc>2) {
            printf("Push a key to continue...\n");
            getc(stdin);
        }   
        printf("Sortie format string =>  ");
        printf( argv[1] );
        printf("\n"); 

    }
    printf("\n");

} 
```

所以，我明白诀窍是在堆栈上找到你的参数（你传递给 formatstring 的链，稍后由 printf 使用）。

```
./formatstring "aaaa%$offset\$x" 
```

（将 kernel.randomize_va_space 设置为 0，因此偏移量保持不变）。为了找到这个偏移量，他们使用了一个小批量脚本

```
for((i=0; i<1000; i++)); do echo -n "$i " && ./formatstring "AAAAAAAA%$i\$x"; done | grep 4141 
```

我得到了这个（这里偏移量= 137）

```
137 Sortie format string =>  AAAAAAAA41414141
138 Sortie format string =>  AAAAAAAA25414141 
```

首先，我的“AAAAAAA”在堆栈上没有“对齐”（我在这里只能数 7 个 41，但我将 8 个“A”发送到格式字符串），并且它们在堆栈上的放置方式似乎会随着时间而改变 => 如果我在 2 小时后启动我的 bash 脚本（for）可能是“A”的“对齐”会改变。

更令人不安的是，当我向发送到 ./formatstring 的参数添加字节时，偏移量似乎发生了变化。如果我跑

```
for((i=0; i<1000; i++)); do echo -n "$i " && ./formatstring "AAAAAAAA%32x%$i\$x"; done | grep 4141 
```

我明白了

```
136 Sortie format string =>  AAAAAAAA                        b7ff103041414141
137 Sortie format string =>  AAAAAAAA                        b7ff103025414141 
```

或运行

```
for((i=0; i<1000; i++)); do echo -n "$i " && ./formatstring "AAAAAAAA%320x%$i\$x"; done | grep 4141 
```

我明白了

```
139 Sortie format string =>  AAAAAAAA                                                                                                                                                                                                                                                                                                                        b7ff103041410067
140 Sortie format string =>  AAAAAAAA                                                                                                                                                                                                                                                                                                                        b7ff103041414141
141 Sortie format string =>  AAAAAAAA                                                                                                                                                                                                                                                                                                                        b7ff103033254141 
```

如您所见，偏移量发生变化并遵循我无法理解的逻辑。根据这本书，这一切都不应该发生。你知道它来自哪里吗？它是一种堆栈保护机制吗？当我 gcc formatstring.c 时我可以删除它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:55:26.597

嗯，我想通了。这本书没有解释的东西（或者我误解了，因为你可以看到英语不是我的母语语言）是，如果你希望它在堆。

因此，如果您在参数中添加“%320x”，您还必须使用 (16-5=11) 'A'（或任何其他字符）完成，因为 strlen("%320x")=5。

# c# - 如何在 C++ 中将对象作为参数传递？

> ID：12918227
> 
> 赞同：2
> 
> 时间：2012-10-16T15:30:56.697
> 
> 标签：c#, c++, object, types, arguments

如果我们在 C# 中有以下简单代码：

```
class Program
{
     static void Main(string[] args)
     {
          string x = "Hello World";
          test(x);
          int y = 101;
          test(y);
          Console.ReadKey();
      }

      static void test(object val)
      {
          Console.WriteLine(val);
      }
} 
```

因此，我们有一个**引用类型对象**作为参数 - 工作正常。如何在 C++ 中做类似的事情？

OT：无需直接输入，我们可以使用**var**关键字，在 C++ 中存在关键字**auto**。这里是否有任何类似的引用类型，如对象或某种方式/技巧来证明它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T15:35:14.497

在 C++ 中，并不是所有的对象都派生自一个通用的基类型。没有通用的运行时多态性。但是，您可能会通过模板使用编译时多态性来获得所需的行为。

```
#include <iostream>
#include <string>

template <class T> void test(const T& val)
{
    std::cout << val << "\n";
}

int main(int ac, char **av)
{
    std::string x = "Hello World";
    test(x);
    int y = 101;
    test(y);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T15:35:02.713

C++ 没有类似于 C# 的“根类型” `System.Object`。您可以使用[`boost::any`](http://www.boost.org/doc/libs/1_51_0/doc/html/any.html)来模拟这个概念，但这需要使用外部库。

至于通过引用传递参数，您可以在 C++ 中使用`MyType &myTypeRef`语法通过引用传递，或者通过指针传递`MyType *myTypePtr`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T15:36:26.370

因为 C++ 没有为所有类型强制使用一个通用的基类型，所以你不能做完全相同的事情。但是，您可以使用模板来实现相同的目的：

```
 void fn(....)
 {
      string x = "Hello World";
      test(x);
      int y = 101;
      test(y);
  }

  template <typename T>
  void test(const T& val)
  {
      cout << val;
  } 
```

# ruby-on-rails - Mongrel_rails start 抛出错误

> ID：12918229
> 
> 赞同：1
> 
> 时间：2012-10-16T15:31:04.277
> 
> 标签：ruby-on-rails, ruby, mongrel

我是使用 mongrel 服务 Rails 应用程序的新手。我已经设法做到了这一点，但我遇到了以下问题。我正在使用centOs，当我输入时`mongrel_rails start`，我收到了这个错误。我是不是错过了什么。谢谢

```
 /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/yaml.rb:56:in `<top (required)>':
    It seems your ruby installation is missing psych (for YAML output).
    To eliminate this warning, please install libyaml and reinstall your ruby.
    NOTE: Gem::SourceIndex.from_installed_gems is deprecated with no replacement. It will be removed on or after 2011-10-01.
    Gem::SourceIndex.from_installed_gems called from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/gem_plugin-0.2.3/lib/gem_plugin.rb:109.
    NOTE: from_installed_gems(arg) is deprecated. From /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/deprecate.rb:63:in `block (2 levels) in deprecate'
    NOTE: Gem::SourceIndex.from_gems_in is deprecated with no replacement. It will be removed on or after 2011-10-01.
    Gem::SourceIndex.from_gems_in called from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb:50.
    NOTE: Gem::SourceIndex#each is deprecated with no replacement. It will be removed on or after 2011-11-01.
    Gem::SourceIndex#each called from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/gem_plugin-0.2.3/lib/gem_plugin.rb:112.
    ** Starting Mongrel listening at 0.0.0.0:3000
    ** Starting Rails with development environment...
    /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require': cannot load such file -- dispatcher (LoadError)
            from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
            from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
            from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
            from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mongrel-1.2.0.pre2/lib/mongrel/rails.rb:148:in `rails'
            from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mongrel-1.2.0.pre2/bin/mongrel_rails:116:in `block (2 levels) in run'
            from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mongrel-1.2.0.pre2/lib/mongrel/configurator.rb:149:in `call'
            from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mongrel-1.2.0.pre2/lib/mongrel/configurator.rb:149:in `listener'
            from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mongrel-1.2.0.pre2/bin/mongrel_rails:102:in `block in run'
            from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mongrel-1.2.0.pre2/lib/mongrel/configurator.rb:50:in `call'
            from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mongrel-1.2.0.pre2/lib/mongrel/configurator.rb:50:in `initialize'
            from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mongrel-1.2.0.pre2/bin/mongrel_rails:86:in `new'
            from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mongrel-1.2.0.pre2/bin/mongrel_rails:86:in `run'
            from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mongrel-1.2.0.pre2/lib/mongrel/command.rb:210:in `run'
            from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mongrel-1.2.0.pre2/bin/mongrel_rails:282:in `<top (required)>'
            from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/mongrel_rails:19:in `load'
            from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/mongrel_rails:19:in `<main>'
            from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
            from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

宝石清单：

```
actionmailer (3.2.8)
actionpack (3.2.8)
activemodel (3.2.8)
activerecord (3.2.8)
activeresource (3.2.8)
activesupport (3.2.8)
arel (3.0.2)
bcrypt-ruby (3.0.1)
bootstrap-sass (2.0.4.0)
bootstrap-will_paginate (0.0.6)
builder (3.1.4, 3.0.3)
bundle (0.0.1)
bundler (1.2.1)
capistrano (2.13.4)
cgi_multipart_eof_fix (2.5.0)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.3.3)
daemons (1.1.9, 1.0.10)
erubis (2.7.0)
execjs (1.4.0)
faker (1.0.1)
fastthread (1.0.7)
gem_plugin (0.2.3)
highline (1.6.15, 1.6.2)
hike (1.2.1)
i18n (0.6.1)
journey (1.0.4)
jquery-rails (2.1.3, 2.0.2)
jruby-pageant (1.1.1)
json (1.7.5)
libv8 (3.11.8.3 x86_64-linux, 3.3.10.4 x86_64-linux)
mail (2.4.4)
mime-types (1.19)
mongrel (1.2.0.pre2)
mongrel_cluster (1.0.5)
multi_json (1.3.6)
mysql (2.8.1)
mysql2 (0.3.11)
net-scp (1.0.4)
net-sftp (2.0.5)
net-ssh (2.6.0)
net-ssh-gateway (1.1.0)
polyglot (0.3.3)
psych (1.3.4)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.2, 0.6.1)
rails (3.2.8)
railties (3.2.8)
rake (0.9.2.2)
rdoc (3.12)
rubygems-bundler (1.1.0)
rubygems-update (1.4.1)
rvm (1.11.3.5)
sass (3.2.1)
sass-rails (3.2.5)
sprockets (2.7.0, 2.1.3)
sqlite3 (1.3.6)
therubyracer (0.10.2)
thor (0.16.0)
tilt (1.3.3)
treetop (1.4.11, 1.4.10)
tzinfo (0.3.33)
uglifier (1.3.0, 1.2.3)
will_paginate (3.0.3) 
```

# jquery - 手风琴画廊使用 mouseleave 进入第一个 div

> ID：12918239
> 
> 赞同：0
> 
> 时间：2012-10-16T15:31:38.353
> 
> 标签：jquery, gallery, accordion, mouseover, mouseleave

我正在做一个图像库水平手风琴。在鼠标输入不同的图像显示。当我不悬停时，如何添加 mouseleave 以返回第一个 div？

谢谢

```
$(document).ready(function(){

activeItem = $("#accordion div:first");
$(activeItem).addClass('active');

$("#accordion div.bkgdImg").mouseenter(function(){
$('.tab-content').hide();
$(activeItem).animate({width: "50px"}, {duration:300, queue:false});
$(this).animate({width: "557px"}, {duration:300, queue:false});
activeItem = this;
});

$("#accordion div.bkgdImg").mouseleave(function() { 
$(this).tabs('select', '#accordion div:first');
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:48:37.137

只是为了展示供以后使用的解决方案：

我再次将活动类添加到我想显示的 div 中，现在当你悬停它时，它会打开你所在的 div，当你离开它时，它会使第一个 div 处于活动状态。

```
$(document).ready(function(){

activeItem = $("#accordion div:first");
$(activeItem).addClass('active');

$("#accordion div.bkgdImg").mouseenter(function(){
$('.tab-content').hide();
$(activeItem).animate({width: "50px"}, {duration:500, queue:false});
$(this).animate({width: "557px"}, {duration:500, queue:false});
activeItem = this;
});
$("#accordion div.bkgdImg").mouseleave(function(){
$(this).animate({width: "50px"}, {duration:500, queue:false});
activeItem = $("#accordion div:first");
$(activeItem).addClass('active');
$(activeItem).animate({width: "557px"}, {duration:500, queue:false});
});
$('.sub-tab-trigger').hover(function(){
$('.tab-content').hide();
$('#' + $(this).attr('data-ref')).show()
});         
}); 
```

# yii - 为什么当 DB Schema 更新或模型更新时 Yii 注销用户

> ID：12918242
> 
> 赞同：1
> 
> 时间：2012-10-16T15:31:46.010
> 
> 标签：yii

每当我对数据库架构进行一些更改（在表中添加/删除列）并相应地更新模型时，Yii 都会在随后对可能涉及或不涉及该模型的 url 的任何调用中将我注销。是否有任何其他适当的方法来更新生产站点，以便当前使用该应用程序的用户不会受到影响（注销）。

# .net - .NET SDK 是否可以与 VB 一起使用

> ID：12918243
> 
> 赞同：1
> 
> 时间：2012-10-16T15:31:48.580
> 
> 标签：.net, vb.net, amazon-web-services

我对 .NET 有点陌生，我有一个简单的问题。亚马逊网络服务有 .NET SDK 提到它有一个 C# 代码示例。我只是想确认一下，如果使用的语言是 VB，SDK 可以工作吗？谢谢你。

编辑：一致的答案似乎是肯定的，但我不知道该怎么做。当我尝试创建一个新项目时，我只能选择在 Visual C# 下创建一个“AWS”项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:40:26.243

是的，它会起作用。C# 编译成在 CLR 上运行的 MSIL，VB.NET 也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T22:58:00.350

AWS sdk 仅附带 C# 项目模板，但您可以将 SDK 用于任何 .NET 项目。要在 VB 中使用它，您只需像往常一样创建您的 VB 项目，然后添加对 AWSSDK.dll 的引用。

AWS 项目模板所做的另一件事是在您的 app.config 中设置凭证。您可以通过手动将它们放入 app.config 文件中来遵循 VB 中的相同模式。

```
<?xml version="1.0"?>
<configuration>
    <appSettings>
        <add key="AWSAccessKey" value="YOUR_ACCESS_KEY"/>
        <add key="AWSSecretKey" value="YOUR_SECRET_KEY"/>
    </appSettings>
</configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:38:55.877

简短的回答是**肯定**的。

长答案是这里是我在谷歌搜索中找到的三个链接

> 亚马逊网络服务 vb .net

*   [代码项目](http://www.codeproject.com/Articles/4968/Implementing-Amazon-Web-Services-in-VB-NET)
*   [代码大师](http://www.codeguru.com/vb/vb_internet/webservices/article.php/c4823/Querying-the-Amazoncom-Web-Service.htm)
*   [亚马逊网络服务](http://aws.amazon.com/code/.NET)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T06:54:19.957

www.java2v.com/Code/VB/CatalogVB.htm

VB.Net示例（示例源代码）按主题组织

110+ – VB.Net 示例（示例源代码） 按主题组织... 3D 17 AccessText 4 BackgroundWorker 2 Binding 30

# internet-explorer-9 - IE9中的页面居中不起作用

> ID：12918248
> 
> 赞同：1
> 
> 时间：2012-10-16T15:32:12.357
> 
> 标签：internet-explorer-9

在我的一生中，我不能只把这个网站的主页放在 IE9 浏览器上。每个内部页面中心都很好，所有其他浏览器和版本似乎也运行良好。我错过了什么？有解决办法吗？

见： http: [//www.newlandmarkgroup.com/index_test2.php](http://www.newlandmarkgroup.com/index_test2.php)

此外，下拉导航项似乎并没有出现在 IE9 中，因为我已经实现了 jQuery 图像滚动器，但这是一个单独的问题！

# javascript - Javascript 表单/文本框/警报

> ID：12918249
> 
> 赞同：1
> 
> 时间：2012-10-16T15:32:17.647
> 
> 标签：javascript, jquery

这是我使用 JavaScript 的第一天，我需要一个简单演示的帮助。我需要从中获取值`class="populateValue"`，并使其填充文本框并在单击按钮时发出警报。

现在它`'[object Object]'`在文本框和警报中都返回。

我的代码是：

```
<section>
    <form>
        <input type="text" id="demoText" />
        <button class="populateValue" value="1234">Populate Value</button>
    </form>
</section>

<script>
    $(document).ready(function () {
        $('.populateValue').on('click', function (event) {
            event.preventDefault();
            $('#demoText').val($('.populateValue'))
            alert($('#demoText').val());
        });
    });
</script> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T15:33:51.830

改变这一行：

```
$('#demoText').val($('.populateValue').val()); 
```

# url - Yii URL 自定义规则

> ID：12918250
> 
> 赞同：0
> 
> 时间：2012-10-16T15:32:18.617
> 
> 标签：url, yii

我在添加自定义 url 规则时遇到了很多困难（无论如何我都应该这样做）。我的情况如下：

我的网站托管在`domain.com` 我想重定向`games.domain.com/ID`到`domain.com/games/index/id`.

此时`games.domain.com`指向`domain.com` 我想要以重定向开头的任何内容。在要指向的 url 中`domain.com/games/index/id/IDHERE`

任何提示/建议/帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:36:03.607

试试这个规则：

```
'http://games.domain.com/<id:.+>' => 'games/index/id/<id>', 
```

# jquery-ui - 页面放大 chrome 后，jQuery 自动完成插件建议弹出窗口位置不正确

> ID：12918251
> 
> 赞同：3
> 
> 时间：2012-10-16T15:32:20.410
> 
> 标签：jquery-ui

我使用 jQuery 自动完成插件。

当我访问一个页面并开始在自动完成的文本框中输入时 - 如果我放大（放大或缩小）页面并将文本输入到同一个框中，建议会正确显示 - 建议 div 的位置不正确。

自动完成在 IE 和 FF 中都可以正常工作。

**如果我在第一次使用自动完成之前**缩放页面- 自动完成工作正常。

jQuery UI：1.9.0 Chrome：版本 22.0.1229.94 m

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T07:22:04.017

我刚刚遇到了完全相同的问题，并且整个星期都在寻找解决方案。

您需要添加以下 css 来覆盖生成的 jquery`position: relative`

```
.ui-autocomplete {
    position: absolute!important;
} 
```

我希望我的回答对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-02T13:28:33.983

帮助我的一种方法是记住上次打开的自动完成输入并为浏览器窗口的缩放编写事件处理函数，以便在每次调整大小时手动刷新。同样的事情适用于日期选择器。你甚至可以通过设置一个小的超时来保存一些刷新：

```
 var lastOpenedInput;
        myInput.on('autocompleteopen', function (event) {
            lastOpenedInput = $(event.target);
        }

        $(window).on('resize', function () {
            if (lastOpenedInput !== undefined) {
                if (lastOpenedInput.autocomplete('widget').css('display') !== 'none') {
                    lastOpenedInput.autocomplete('search');
                }
                if (lastOpenedInput.datepicker('widget').css('display') !== 'none') {
                    lastOpenedInput.datepicker('hide');
                    setTimeout(function () {
                        lastOpenedInput.datepicker('show');
                    }, 1000);
                }
            }
        }); 
```

# google-maps-api-3 - 创建要素时触发的最后一个事件是什么

> ID：12918254
> 
> 赞同：1
> 
> 时间：2012-10-16T15:32:31.563
> 
> 标签：google-maps-api-3

我正在对复选框单击进行 Ajax 查找，以检索纬度/经度并在地图上创建标记。我有一个加载 gif，它显示以提醒用户 Ajax 查找正在进行中，并在返回 lat/lngs 并制作标记时删除 gif。但是，从用户的角度来看，加载 gif 消失了，几秒钟后标记出现了。

在此过程中触发的最后一个事件是什么？我不想在代码说创建标记时删除我的加载 gif，而是在它们实际显示在地图上之后。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:00:58.687

我会尝试[“空闲”事件](https://developers.google.com/maps/documentation/javascript/reference#Map)。

# javascript - 在javascript中将浮点数转换为字符串

> ID：12918265
> 
> 赞同：1
> 
> 时间：2012-10-16T15:33:07.803
> 
> 标签：javascript, byte, three.js, chars

好的，我想将一组 THREE.Vector3 有效地保存到本地存储中。由于 javascript 使用字符串工作，我想使用最有效的比特率将 32 位浮点数转换为字符串。即理想的 32 位浮点 = 4 * 8 位，这在 C++ 之类的东西中很容易做到

问题似乎是第一个 Javascript 字符串是 UTF，其中包括一些填充

[http://en.wikipedia.org/wiki/UTF-8](http://en.wikipedia.org/wiki/UTF-8)

其次，我当前使用的代码 0 被转换为 '' 然后被省略，使得转换后的字节长度不可靠。

String.fromCharCode(0) == ''

```
var float2str = function(num)
{
    var bytestream = new Array();
    var view = new DataView(new ArrayBuffer(4));
    view.setFloat32(0,num);

    bytestream.push(view.getUint8(0));
    bytestream.push(view.getUint8(1));
    bytestream.push(view.getUint8(2));
    bytestream.push(view.getUint8(3));
    return String.fromCharCode(view.getUint8(0),view.getUint8(1),view.getUint8(2),view.getUint8(3))

}

var str2float = function(str)
{

    var bytestream = unpack(str)
    var view = new DataView(new ArrayBuffer(4));
    view.setUint8(0,bytestream[0]);
    view.setUint8(1,bytestream[1]);
    view.setUint8(2,bytestream[2]);
    view.setUint8(3,bytestream[3]);
    return view.getFloat32(0);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:24:18.050

诀窍在于获取可打印的无符号 8 位整数的字符串值。我发现如果您的 8 位数字太小或太大（超出 ASCII 值的“面包​​和黄油”范围），您最终会得到无法打印的东西。因此，我们可以使用浮点数的 4 位值来使用长度为 8 的字符串，并将这些值偏移到可打印范围 (+32) 中，而不是使用浮点数的四个 ASCII 值创建长度为 4 的字符串。这是我的解决方案：

```
var offset = 33;

var float2str = function(num){
    var view = new DataView(new ArrayBuffer(4));
    view.setFloat32(0,num);

    var fourbits = [];
    for ( var i = 0; i < 4; i++ ){
        // split each byte into two 4-bit values
        fourbits.push(view.getUint8(0) >> 4);
        fourbits.push(view.getUint8(0) & 15);
    }

    for ( var i = 0; i < 8; i++ ){
        // build a string with offset four-bit values
        fourbits[i] = String.fromCharCode(offset+fourbits[i]);
    }
    return fourbits.join('');

};

var str2float = function(str){
    var bytestream = str;
    var view = new DataView(new ArrayBuffer(4));

    for(var i = 0; i < 4; i++){
        // re-convert the characters into bytes.
        view.setUint8(i, ((bytestream[i*2].charCodeAt() - offset) << 4) + bytestream[i*2+1].charCodeAt() - offset);
    }

    return view.getFloat32(0);
};

console.log(float2str('2.251')); // "%!\"!\"!'#"
console.log(str2float(float2str('2.251'))); // 2.250999927520752 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:09:09.900

使用 base64 编码。它将一次将 6 位转换为可打印的 ASCII 字符（在 UTF-8 中也是如此）。因此，一个浮点数实际上需要 5.33 个字节（分数是可用的，即只要将数组编码为一个整体而不是单个浮点数，它就不是 6 个字节），但这仍然可以节省一些空间。

这是一个直接转换`ArrayBuffer`为base64字符串的函数（不是我的）：[https ://gist.github.com/958841](https://gist.github.com/958841)

# sql - 取决于输入值的 SQL

> ID：12918269
> 
> 赞同：0
> 
> 时间：2012-10-16T15:33:18.363
> 
> 标签：sql, input

我有七个输入框，人们可以在其中输入值。这些值与表格进行比较，最终会出现结果，这是一个搜索功能。现在我有一个包含三个输入框的页面并编辑以下内容：

```
if (box1 is filled && box2 is filled & box 3 is filled) {
sql="take all three values into account when comparing..";
}

if (box1 is not filled && box2 is not filled & box 3 is nog filled) {
sql="take no values into account when comparing..";
}

and so on... 
```

对于三个盒子，这没关系，你只有几个与三个盒子的组合。然而，这对于 7 个盒子是不可行的，你会得到更多的组合！如何使我的 SQL 依赖于填写的字段？希望大家有一个聪明的解决方案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:36:13.870

您可以使用[`COALESCE`](http://msdn.microsoft.com/en-us/library/ms190349.aspx)（或`ISNULL`）：

```
...
WHERE Column1 = COALESCE(@Column1, Column1) 
AND   Column2 = COALESCE(@Column2, Column2) 
...
AND   Column7 = COALESCE(@Column7, Colum7) 
```

因此，只有当参数不为空时，`WHERE`才会应用于该字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T15:58:53.003

分段构建查询。像：

```
StringBuilder where=new StringBuilder();
String conj=" where ";
if (box1.length()>0)
{
  where.append(conj).append("value1=").append(esc(box1));
  conj=" and ";
}
if (box2.length()>0)
{
  where.append(conj).append("value2=").append(esc(box2));
  conj=" and ";
}
... etc ...
String sql="select value1, value2, value3 from mytable" + where.toString(); 
```

几点注意事项：

假设您不知道可以输入哪些字段组合，您可能需要进行一些操作才能正确连接，即您不希望查询显示“where and value2='x'”。上面的代码将“where”放在第一个条件之前，将“and”放在以下每个条件之前。

旁注：当您构建这样的查询时，您需要注意 SQL 注入。编写一个转义函数——在这里我假设你称之为“esc”——将任何引号加倍。对于大多数 SQL 引擎，这就是您所要担心的。有些还有其他魔法角色，比如 backslah，你也需要逃脱。或者，您可以构建一个准备好的语句，然后返回并填写值。这更安全，但会强制您检查两次填写了哪些字段，一次用于构建 SQL，第二次用于填写值。这有点混乱，但更安全。永远不要将用户输入的值插入到 SQL 语句中，只需输入 "'"+value+"'"：这会让你对输入 "' ; delete from user; select * from user where 的黑客敞开大门'

# android - 布局在更大的屏幕尺寸上搞砸了，没有利用额外的空间？

> ID：12918271
> 
> 赞同：0
> 
> 时间：2012-10-16T15:33:19.487
> 
> 标签：android, xml, image, android-layout, layout

我的应用程序快完成了，我遇到了一个巨大的错误。正如标题所说；我刚刚在 Galaxy Nexus 上测试了我的应用程序。比我迄今为止测试我的应用程序的屏幕更大。欲望高清。该应用在 DesireHD 上看起来不错，但在 GNexus 上却很糟糕。

这就是我的意思：[Desire HD screenshot](http://i.imgur.com/VLlcC.png)和[GNexus screenshot](http://i.imgur.com/Nap8t.png)

我已经为每个文件夹 -hdpi -xhdpi 等创建了图像。我按照开发指南中的 3:4:6:8 比例正确创建它们。它肯定是从 xhdpi 获取图像。我可以这么说，因为关于我们和反馈 ImageViews 改变了设计。

一切都有一个 ImageView，我应该提一下。我不知道为什么他们没有正确显示。我尝试在 layout-xlarge 中创建 main.xml，然后在 layout-sw360dp 中创建，但都没有解决问题。事情看起来真的很不合适。考虑到它正在拾取 xhdpi 图像，我不知道为什么它们不能正确缩放。如果需要，我会发布我的 XML。我已经回到只有一个 res-layout 文件夹，因为它似乎没有任何区别。

不妨现在添加我的 XML：我们开始吧，[http](http://pastebin.com/PkzSDxxw) ://pastebin.com/PkzSDxxw - 我已经用上面的屏幕截图对其进行了颜色编码。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:fillViewport="true"
   android:background="@color/mainback">

    <!-- Title contains application info and content starts immediately below. -->

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
   android:layout_height="wrap_content">
    <!-- red -->
    <ImageView
       android:id="@+id/ColourTitle"
       android:layout_height="wrap_content"
       android:layout_width="fill_parent"
       android:src="@drawable/main_colourtitle"
       android:contentDescription="@string/ContentDescColourTitle"/>
    <!-- blue -->          
    <ImageView
       android:id="@+id/PastSeason"
       android:layout_height="wrap_content"
       android:layout_width="fill_parent"
       android:layout_below="@id/ColourTitle"
       android:contentDescription="@string/ContentDescHistory"
       android:layout_marginBottom="12dp"
       android:layout_marginTop="12dp"
       android:onClick="PastSeason"
       android:src="@drawable/main_history"/>
    <!-- green first row -->
                                <LinearLayout
                                    android:id="@+id/DriveCurrent"
                                    android:layout_height="wrap_content"
                                    android:layout_width="match_parent"
                                    android:layout_below="@id/PastSeason"
                                    android:gravity="center"
                                    android:layout_marginTop="7dp">

                                        <ImageView
                                                android:id="@+id/Drivers"
                                                android:layout_height="wrap_content"
                                                android:layout_width="wrap_content"
                                                android:onClick="F1Drivers"
                                                android:src="@drawable/main_driver"
                                                android:contentDescription="@string/ContentDescDriver"
                                                android:layout_marginRight="30dp"/>

                                        <ImageView
                                                android:id="@+id/CurrentF1"
                                                android:layout_height="wrap_content"
                                                android:layout_width="wrap_content"
                                                android:onClick="CurrentSeason"
                                                android:src="@drawable/main_currentseason"
                                                android:contentDescription="@string/ContentDescCurrentF1"
                                                android:layout_marginLeft="15dp"/>

                                </LinearLayout>  
   <!-- green 2nd line -->
                                <LinearLayout
                                    android:layout_below="@id/DriveCurrent"
                                    android:layout_height="wrap_content"
                                    android:layout_width="match_parent"
                                    android:gravity="center"
                                    android:layout_marginTop="10dp"
                                    android:id="@+id/TeamDriverRecord">

                                            <ImageView
                                                android:layout_height="wrap_content"
                                                android:layout_width="wrap_content"
                                                android:src="@drawable/main_driver_record"
                                                android:contentDescription="@string/ContentDescDriverRecord"
                                                android:layout_marginRight="30dp"
                                                android:onClick="DriverRecord"/>

                                            <ImageView
                                                android:id="@+id/teamrecord"
                                                android:layout_height="wrap_content"
                                                android:layout_width="wrap_content"
                                                android:src="@drawable/main_team_record"
                                                android:contentDescription="@string/ContentDescTeamRecord"
                                                android:layout_marginLeft="15dp"
                                                android:onClick="TeamRecord"/>

                                </LinearLayout>

        <!-- faq aboutus feedback -->                  
                                <LinearLayout
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_alignParentBottom="true"
                                    android:layout_below="@id/TeamDriverRecord">       

                                        <ImageView
                                                android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:src="@drawable/main_faq"
                                        android:contentDescription="@string/ContentDescFAQ"
                                        android:onClick="FAQPage">
                                        </ImageView>

                                        <ImageView
                                                android:layout_width="wrap_content"
                                        android:layout_height="wrap_content"
                                        android:src="@drawable/main_feedback"
                                        android:contentDescription="@string/ContentDescFeedback"
                                        android:onClick="FeedbackPage">
                                        </ImageView>

                                        <ImageView
                                            android:layout_width="wrap_content"
                                            android:layout_height="wrap_content"
                                            android:contentDescription="@string/ContentDescAboutUs"
                                            android:src="@drawable/main_aboutus"
                                            android:onClick="AboutUs">
                                        </ImageView>                               
                                </LinearLayout>

</RelativeLayout>

</ScrollView> 
```

我真的可以得到一些帮助，这让我发疯，我以为我已经涵盖了所有内容。：（ 谢谢。

**编辑：在 Eclipse 中，当在 XML 编码旁边的“图形布局”选项卡中选择不同的屏幕尺寸时，它不会正确缩放任何大于 4 英寸的屏幕的图像。如果我选择 Nexus S 则显示它可以正常缩放。下一个是 GNexus，然后你会遇到同样的问题。ImageViews 不会按比例放大以满足更大的屏幕尺寸。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:50:25.507

有时，RelativeLayouts 可能很难使用，有时它可能像反转操作一样微妙（例如，B 上方的 A 并不总是与 A 下方的 B 相同）。我推荐以下内容：

为每个孩子设置以下属性（红色、蓝色和三个 LinearLayout）

```
android:layout_alignParentLeft="true"
android:layout_alignParentRight="true" 
```

为了让它们放大以填满屏幕。

对于每个绿色的 ImageView，`android:gravity="center"`为了让每个绿色方块都位于其可用空间的中间 - 这应该确保尽可能一致的间距。

在绿色的第 2 行 LinearLayout 中，放入

```
android:layout_above="@+id/TeamDriverRecord" 
```

并从常见问题解答/关于我们/反馈行中删除以下内容

```
android:layout_below="@id/TeamDriverRecord" 
```

这样做的原因是它首先布置绿色的第二行，然后将常见问题解答/其他内容行放在其下方的*所有*空间中，在此过程中覆盖 height=wrap_content - 这就是为什么该行在更大的屏幕上显得更高而不是正确捕捉到底部。您还可以通过添加`android:layout_alignParentBottom="true"`到 FAQ LinearLayout 的每个子项来解决这个问题。

# jquery - 隐藏表格行不适用于 jQuery

> ID：12918280
> 
> 赞同：-2
> 
> 时间：2012-10-16T15:33:44.743
> 
> 标签：jquery, html

为什么它不工作？

jQuery代码：

```
 $("table.test #ro").hide(); 
```

HTML：

```
 <table class="test">
  <thead><tr class="ro"  id='ro' ><th>test</th>
  </tr>
  </thead>
  <tbody>
  <tr class="ro"><td>test</td>
  </tr>
  <tr><td>test</td>
  </tr></tbody>
  </table> 
```

我以不同的方式尝试过；`.hide()`并且`.css('display', 'none')`不工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:38:24.060

您可能需要等待文档准备好，使用`$(document).ready(`事件。您可以使用 id 直接访问，因为 id 应该是唯一的，而不是制作复杂的选择器。

**[现场演示](http://jsfiddle.net/rajaadil/vQSY7/1/)**

```
$(document).ready(function(){        
    $("#ro").hide();
}); 
```

这是`also working`您有问题的，我认为您需要将其放入`$(document).ready(`.

```
$(document).ready(function(){        
     $("table.test #ro").hide();
}); 
```

​</p>

# python - Python：如何为 64 位 python 导入 32 位模块

> ID：12918283
> 
> 赞同：4
> 
> 时间：2012-10-16T15:33:51.780
> 
> 标签：python, import, 32bit-64bit

由于系统限制，我只能使用 64 位版本的 Python，但是，我打算使用的一些模块没有附带 64 位版本（例如 httplib2）。在这种情况下，我应该怎么做才能利用这些 32 位功能？

![在此处输入图像描述](../Images/770e53f30cc59e0a8d220f930d26ff1e.png)

感谢 j_mcnally 的回答。这样可行。最终对我有用的另一种方法是如果安装了多个版本的python（例如32/64），则使用前缀参数：

> python setup.py install --prefix = "你的 python 根目录"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T15:36:13.340

请原谅我的无知，但您不能将它们编译为 64 位模块吗？

[http://code.google.com/p/httplib2/](http://code.google.com/p/httplib2/)

源就在那里。我会想象最现代的 ./configure 脚本会检测你的拱门，并编译适当的扩展。

以下似乎对我有用：

`ARCHFLAGS='-arch x86_64' python setup.py install`

> 运行安装运行 bdist_egg 运行 egg_info 写入
> 
> python2/httplib2.egg-info/PKG-INFO 将顶级名称写入
> 
> python2/httplib2.egg-info/top_level.txt 将dependency_links写入
> 
> python2/httplib2.egg-info/dependency_links.txt 读取清单文件
> 
> 'python2/httplib2.egg-info/SOURCES.txt' 阅读清单模板
> 
> 'MANIFEST.in' 写入清单文件
> 
> 'python2/httplib2.egg-info/SOURCES.txt' 安装库代码到
> 
> build/bdist.macosx-10.8-x86_64/egg running install_lib running
> 
> build_py 创建 build 创建 build/lib 创建 build/lib/httplib2
> 
> 复制 python2/httplib2/ **init** .py -> build/lib/httplib2 复制
> 
> python2/httplib2/iri2uri.py -> build/lib/httplib2 复制
> 
> python2/httplib2/socks.py -> build/lib/httplib2 复制
> 
> python2/httplib2/cacerts.txt -> build/lib/httplib2 创建
> 
> build/bdist.macosx-10.8- **x86_64**创建
> 
> build/bdist.macosx-10.8- **x86_64** /egg 创建

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T16:04:25.447

[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)

这家伙为科学 python 中使用的许多模块制作了一个 Windows 安装程序（参见底部的 Base-12.9.15.win-amd64-py2.7.‌exe）。如果您不习惯从源代码编译，请考虑使用它。

# ios - 我们可以阻止用户使用来自应用商店的新版本更新应用吗

> ID：12918284
> 
> 赞同：1
> 
> 时间：2012-10-16T15:33:55.087
> 
> 标签：ios, ipad, app-store, app-store-connect

我在应用商店注册了一个应用程序，最近我用新版本 1.1 更新了它。该版本已获得批准，其状态已准备好出售。我的一个用户在使用新版本更新后启动应用程序时遇到了崩溃应用商店。

我立即从所有应用商店中删除了该应用，其状态为“开发者下架销售”，这会阻止任何新用户下载该应用。

要求：如何防止我当前的用户（购买了 1.0 版）更新版本？他们仍然可以从 ipad 上的 appstore 应用程序中的已购买部分更新应用程序。

有没有办法让用户在我上传修复了错误的新版本之前无法更新应用程序。

请帮助你的想法

提前Tnx。

# android - 在其他活动开始时保留信息

> ID：12918287
> 
> 赞同：0
> 
> 时间：2012-10-16T15:34:08.597
> 
> 标签：android, android-activity, listactivity

我有一个扩展 ListActivity 的活动。

当用户搜索电影时，listview 会充满来自 ArrayList 的电影。

这是一种简单的方法，以便在启动新活动时列表视图中的信息不会消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:38:08.627

存储在适配器中的数据应该被保存/重新加载，并且列表视图应该在重新加载列表并填充来自适配器的数据时重建。

列表应始终动态创建视图以节省资源。

如前所述，尝试从您的适配器保存数据！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:31:14.243

据我了解，您想保存第一次加载到 ListView 中的数据。

您需要保存数据，因此请参阅 Android 开发人员指南中的以下[指南](http://developer.android.com/guide/topics/data/data-storage.html)：

# php - 一些 preg_replace 需要修复

> ID：12918288
> 
> 赞同：0
> 
> 时间：2012-10-16T15:34:10.717
> 
> 标签：php, regex, preg-replace

嗨，我对 preg replace 有一些问题。我正在修复一些 php 脚本，将 html 标签与 php 分开，所以我尝试了这个：

```
$string = preg_replace('/print(agF1gTdKEBPd6CaJ((.*?)));/', '?>print(agF1gTdKEBPd6CaJ($1));<?php'); 
```

但它不起作用`agF1gTdKEBPd6CaJ`这里有一些样本的变量：

```
print(agF1gTdKEBPd6CaJ($pnjkaa235));
print(agF1gTdKEBPd6CaJ($srpmjk236));
print(agF1gTdKEBPd6CaJ($ydxxqb237)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:42:11.063

`preg_replace`更改with的第一部分`/print\(agF1gTdKEBPd6CaJ\((.*?)\)\);/`

您还需要添加一个第三个参数来`preg_replace`保存您正在搜索的文本： http: [//us.php.net/manual/en/function.preg-replace.php](http://us.php.net/manual/en/function.preg-replace.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T15:40:50.047

`'/print(agF1gTdKEBPd6CaJ((.*?)));/'`=>`'/print\(agF1gTdKEBPd6CaJ\((.*?)\)\);/'`

# mysql - 阻止两个连接运行相同的查询

> ID：12918289
> 
> 赞同：0
> 
> 时间：2012-10-16T15:34:17.587
> 
> 标签：mysql

我在我的站点中使用此查询来获取下一个自动增量，但问题是两个或多个连接可以同时运行此查询，并且它们都具有相同的 AUto-Increment 值。

```
SHOW TABLE STATUS LIKE 'TABLE_ORDERS'; 
```

有什么方法可以阻止两个或多个连接同时运行此查询？

非常感谢！！

```
Edit 
```

然后使用此自动增量的值将记录存储在另一个表“收据”中。如果两个连接从 Orders 表中获得相同的 Auto-increment 值，我最终在 Receipt 表中有两行具有相同的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:37:08.813

你可以把它放在一个存储过程中并添加一个

```
SELECT SLEEP(2); 
```

在里面。

> 这在需要暂停先前的查询时很有用，例如，当从站重新连接到主站时。

[MySQL 睡眠](http://dev.mysql.com/doc/refman/5.1/en/miscellaneous-functions.html#function_sleep)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:26:51.027

您不应该直接使用自动增量值，因为这总是会导致您所描述的各种竞争条件。

相反，您应该插入一条记录并检查`LAST_INSERT_ID()`向您的行发出了哪个标识符。然后可以将该值安全地转置到其他表中。

好消息是`LAST_INSERT_ID()`值代表每个连接的最后一行的插入 ID，因此那里不应该存在竞争条件的风险。

# sql - Access 2010 创建包含来自其他表中多个列的字段列表的列

> ID：12918290
> 
> 赞同：1
> 
> 时间：2012-10-16T15:34:21.687
> 
> 标签：sql, ms-access

经过太多时间尝试谷歌搜索并将结果返回到 concat 或 sum 列，我要在这里问它。我希望这将是一个简单的问题，我只是在进行谷歌搜索时未能正确使用正确的关键字。

我有两个表（电机和联轴器），其中包含有关井电机和联轴器的信息。以下是表的基本结构：

表名称：电机列：过程、电机名称

表名：联轴器列：过程、联轴器名称

还有许多其他列，但它们都与创建查询无关。我要做的就是创建一个查询，该查询可以检索属于特定进程的所有电机名称和所有耦合名称，显然使用 WHERE 语句，并将它们放入名为 Component 的列（很可能是临时列）中。不幸的是，谷歌告诉我连接或总结结果......这不是我想做的。只是一个列表或摘要。我很抱歉，因为我知道这是一个 SQL 101 问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:43:34.453

联合选择将从两个表中获取数据。

```
SELECT * from Motors Where process="Text"
Union
Select * from Couplings Where process="Text" 
```

虽然我习惯于`*`在示例中获取数据，但您必须在每个选择中返回相同数量的列，否则 Access 可能会返回一些奇怪的结果，或者只是失败。

我建议您进行 2 个查询，然后将每个查询中的 SQL 复制到另一个空查询中。将`;`第一个查询末尾的 替换为单词`UNION`。这应该创建您需要的查询

# awk - grep 访问多行，查找两个模式之间的所有单词

> ID：12918292
> 
> 赞同：10
> 
> 时间：2012-10-16T15:34:25.147
> 
> 标签：awk, sed, line

在扫描文本文件和查找两种模式之间的所有单词时需要帮助。比如说如果我们有一个 .sql 文件，需要扫描并找到 from' 和 'where' 之间的所有单词。Grep 一次只能扫描 1 行。对于这个要求，最好使用的 unix 脚本是什么？sed、awk有这些功能吗？非常感谢您指出任何示例。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-16T15:42:02.920

Sed 有这个：

```
sed -n -e '/from/,/where/ p' file.sql 
```

打印带有 a`from`的行和带有 a 的行之间的所有行`where`。

对于可以包含同时具有 from 和 where 的行的内容：

```
#!/bin/sed -nf

/from.*where/ {
    s/.*\(from.*where\).*/\1/p
    d
}
/from/ {
    : next
    N
    /where/ {
        s/^[^\n]*\(from.*where\)[^\n]*/\1/p
        d
    }
    $! b next
} 
```

这（编写为 sed 脚本）稍微复杂一些，我将尝试解释细节。

第一行在包含 a`from`和 a的行上执行`where`。如果一行与该模式匹配，则执行两个命令。我们使用`s`替换命令仅提取 from 和 where 之间的部分（包括 from 和 where）。该`p`命令中的后缀打印该行。delete 命令清除模式空间（工作缓冲区），加载下一行并重新启动脚本。

当找到包含的行时，第二个命令开始执行一系列命令（由大括号分组）`from`。基本上，这些命令形成一个循环，它将不断将输入中的行追加到模式空间中，直到找到带有 a 的行`where`或直到我们到达最后一行。

“`:`命令”创建一个标签，脚本中的一个标记，允许我们在需要时“跳”回来。该`N`命令从输入中读取一行，并将其附加到模式空间（用换行符分隔行）。

当`where`找到 a 时，我们可以打印出模式空间的内容，但首先我们必须用替换命令清理它。它与之前使用的类似，但我们现在用 替换前导和尾随`.*`，`[^\n]*`这告诉 sed 仅匹配非换行符，有效地匹配第一行中的 a from 和最后一行中的 a where。然后该`d`命令清除模式空间并在下一行重新启动脚本。

该`b`命令将跳转到一个标签，在我们的例子中是 label `next`。但是，`$!`地址说它不应该在最后一行执行，让我们离开循环。以这种方式离开循环时，我们没有找到相应的`where`，因此您可能不想打印它。

但是请注意，这有一些缺点。以下情况将不会按预期处理：

```
from ... where ... from

from ... from
where

from
where ... where

from
from
where
where 
```

处理这些情况需要更多代码。

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T16:09:46.330

使用 GNU awk，您可以将 RS 设置为 RE：

```
gawk -v RS='[[:space:]]+' '
   /where/ { found=0 }
   found   {  print  }
   /from/  { found=1 }
' file 
```

以上假设您不希望打印“from”和“where”，如有必要，请移动线条。

如果有帮助，以下成语描述了如何选择给定特定模式的记录范围进行匹配：

a) 从某个模式打印所有记录：

```
awk '/pattern/{f=1}f' file 
```

b) 以某种模式打印所有记录：

```
awk 'f;/pattern/{f=1}' file 
```

c) 在某种模式之后打印第 N 条记录：

```
awk 'c&&!--c;/pattern/{c=N}' file 
```

d) 在某种模式之后打印除第 N 条记录之外的每条记录：

```
awk 'c&&!--c{next}/pattern/{c=N}1' file 
```

e) 在某种模式之后打印 N 条记录：

```
awk 'c&&c--;/pattern/{c=N}' file 
```

f) 在某种模式之后打印除 N 条记录之外的每条记录：

```
awk 'c&&c--{next}/pattern/{c=N}1' file 
```

g) 从某个模式打印 N 条记录：

```
awk '/pattern/{c=N}c&&c--' file 
```

我将变量名称从“found”的“f”更改为“count”的“c”，因为这更能表达变量的实际含义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T00:34:27.230

您可以使用`ed`它，它允许正则表达式范围的正负偏移。如果输入是：

```
seq 10 | tee > infile
1
2
3
4
5
6
7
8
9
10 
```

在命令中输入管道`ed`：

```
<<< /3/,/6/p | ed -s infile 
```

即打印包含`3`和的行之间的所有内容`6`。

结果：

```
3
4
5
6 
```

要在每一端多取一行：

```
<<< /3/-1,/5/+1p | ed -s infile 
```

结果：

```
2
3
4
5
6
7 
```

或者反过来：

```
<<< /3/+1,/6/-1p | ed -s infile 
```

结果：

```
4
5 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-26T20:25:37.983

我只用 grep 就可以做到这一点：

```
#> grep -A#### "start pattern" file | grep -B#### "end pattern" 
```

问题是我必须找到正确数量的行来包含在 A 和 B 选项中，它们是相同的。希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T17:54:31.280

为了只返回两个给定字符串中的一个字符串，按照`awk`（不发疯）我只是运行这个非常扁平的脚本，拖曳冗长：

```
.\gnucoreutils\bin\awk "{startstring = \"RETURN STUFF AFTER ME \"; endstring = \"RETURN STUFF BEFORE ME\"; endofstartstring = index($0,startstring)+length(startstring); print substr($0,endofstartstring,index($0,endstring)-endofstartstring)}" /dev/stdin 
```

请注意，我使用的是`cmd.exe`（Windows 的命令解释器）和[gnuwin32 awk](http://gnuwin32.sourceforge.net/packages/gawk.htm)，所以请注意“双引号”和 ^\转义字符^\：

```
GNU Awk 3.1.6
Copyright (C) 1989, 1991-2007 Free Software Foundation. 
```

请指出缺陷。

例子：

```
echo "hello. RETURN STUFF AFTER ME i get returned RETURN STUFF BEFORE ME my face is melting" | .\gnucoreutils\bin\awk "{startstring = \"RETURN STUFF AFTER ME \"; endstring = \" RETURN STUFF BEFORE ME\"; endofstartstring = index($0,startstring)+length(startstring); print substr($0,endofstartstring,index($0,endstring)-endofstartstring)}" /dev/stdin
i get returned 
```

# websocket - 在 WebRTC Demo 中集成 JSEP

> ID：12918293
> 
> 赞同：0
> 
> 时间：2012-10-16T15:34:26.007
> 
> 标签：websocket, webrtc

我找到了这个[视频会议原型](http://blog.gingertech.net/2012/06/04/video-conferencing-in-html5-webrtc-via-web-sockets/)。但我无法让它运行，因为 ROAP 协议已被 JSEP 取代。

我尝试使用以下来源解决问题：

[示例 ROAP 和 JSEP](http://lists.w3.org/Archives/Public/public-webrtc/2012Jan/0093.html)

[JSEP 上的 ROAP](http://code.google.com/p/webrtc-samples/source/browse/trunk/roap-jsep/roap_on_jsep.js)

我想很多人会很高兴有一个可以工作的 JSEP 示例来构建。

```
<script>
  var socket = new WebSocket('ws://mydomain.com:1337');
  var sourcevid = document.getElementById('sourcevid');
  var remotevid = document.getElementById('remotevid');
  var localStream = null;
  var peerConn = null;
  var started = false;

  var logg = function(s) { console.log(s); };

  // when PeerConn is created, send setup data to peer via WebSocket
  function onSignal(message) {
      logg("Sending setup signal");
      socket.send(message);
  }

  // when remote adds a stream, hand it on to the local video element
  function onRemoteStreamAdded(event) {
    logg("Added remote stream");
    remotevid.src = window.webkitURL.createObjectURL(event.stream);
  }

  // when remote removes a stream, remove it from the local video element
  function onRemoteStreamRemoved(event) {
    logg("Remove remote stream");
    remotevid.src = "";
  }

  function createPeerConnection() {
    try {
      logg("Creating peer connection");
      peerConn = new webkitDeprecatedPeerConnection("STUN stun.l.google.com:19302", onSignal);
    } catch (e) {
      try {
        peerConn = new webkitPeerConnection00("STUN stun.l.google.com:19302", onSignal);
      } catch (e) {
        console.log("Failed to create PeerConnection, exception: " + e.message);
      }
    }
    peerConn.addEventListener("addstream", onRemoteStreamAdded, false);
    peerConn.addEventListener("removestream", onRemoteStreamRemoved, false)
  }

  // start the connection upon user request
  function connect() {
    if (!started && localStream) {
      createPeerConnection();
      logg('Adding local stream...');
      peerConn.addStream(localStream);
      started = true;
    } else {
      alert("Local stream not running yet.");
    }
  }

  // accept connection request
  socket.addEventListener("message", onMessage, false);
  function onMessage(evt) {
    logg("RECEIVED: "+evt.data);
    if (!started) {
      createPeerConnection();
      logg('Adding local stream...');
      peerConn.addStream(localStream);
      started = true;
    }
    // Message returned from other side
    logg('Processing signaling message...');
    peerConn.processSignalingMessage(evt.data);
  }

  function hangUp() {
    logg("Hang up.");
    peerConn.close();
    peerConn = null;
    started = false;
  }

  function startVideo() {
      // Replace the source of the video element with the stream from the camera
      try { //try it with spec syntax
        navigator.webkitGetUserMedia({audio: true, video: true}, successCallback, errorCallback);
      } catch (e) {
        navigator.webkitGetUserMedia("video,audio", successCallback, errorCallback);
      }
      function successCallback(stream) {
          sourcevid.src = window.webkitURL.createObjectURL(stream);
          localStream = stream;
      }
      function errorCallback(error) {
          console.error('An error occurred: [CODE ' + error.code + ']');
      }
  }
  function stopVideo() {
    sourcevid.src = "";
  }
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:41:11.170

[apprtc.appspot.com](http://apprtc.appspot.com)上的示例显示了 WebRTC 与 JSEP 的作用。

还有一个[ROAP to JSEP 库](http://code.google.com/p/webrtc-samples/source/browse/#svn/trunk/roap-jsep)，它在使用 JSEP API 时抽象了 DeprecatedPeerConnection。

# c# - 有没有办法强制实体框架在我枚举时一次从 Db 读取一条记录？

> ID：12918294
> 
> 赞同：1
> 
> 时间：2012-10-16T15:34:25.243
> 
> 标签：c#, .net, entity-framework, entity-framework-4

有没有办法强制实体框架一次从 Db 读取一条记录？

基本上让它像一个一样工作`SqlDataReader`（我只需要向前阅读，我根本不会改变数据！）

为了简化我用一个例子提出的问题，在下面的循环中，我希望 EF 在每次迭代中获得 1 个城市。

```
var context = new CityEntities();

var cities = from c in context.Cities
             select c;

foreach (var c in cities) {
    Console.WriteLine(c);   // I want to have only 1 city in the memory at this point
} 
```

**为什么**：因为我想利用强类型的优势来编写查询，并防止在我的情况下将查询写为字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T17:02:59.267

实体框架实际上是一次读取一个实体。如果您在 IQueryable 上有一个 foreach 循环（即您没有强制执行评估），那么实体框架只会在您访问它时实现每个实体。这就是为什么在使用延迟加载时需要启用 MARS（多个活动结果集）的原因 - 当您启动嵌套查询时，外部查询仍在进行中。

**编辑**

在 EF6 中，默认策略现在是缓冲以支持连接弹性。但是，如果不使用连接弹性，则可以关闭缓冲。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T15:45:39.880

你可以试试这个

```
while(cities.Any())
{
    var city = cities.First();
    cities = cities.Skip(1);
} 
```

但是您最终可能会得到非常不理想的 SQL。所以我强烈建议您一次加载所有记录。

# c++ - BitBlt 从剪贴板复制位图给出错误的颜色

> ID：12918303
> 
> 赞同：0
> 
> 时间：2012-10-16T15:34:45.367
> 
> 标签：c++, winapi, palette, bitblt

我正在将剪贴板中的图像粘贴到我的程序中。位图放在背景 memDC 位图上，然后在绘制到屏幕之前与另一个 memDC 合成。背景位图是每像素 8 位。问题是 bitblt 将黑色（0x00000000）变成了几乎黑色（0x00010101）。如果我将相同的东西粘贴到 MSPaint 中，我会得到黑色。如果我从 MSPaint 复制黑色，我会得到几乎黑色。（其他颜色也被破坏）。如果我将背景位图更改为 32bpp，我会得到正确的颜色，但目前这不是一个选项。

以下是一些演示该问题的代码：

```
/*
 *HWND hWnd; // main window handle
 *HDC hDC; // main window DC (set elsewhere)
 *HDC memDC; // background DC (set elsewhere)
 */
HBITMAP hClipBitmap=NULL;
OpenClipboard(hWnd);

hClipBitmap = (HBITMAP)GetClipboardData(CF_BITMAP);
if (hClipBitmap!=NULL)
{
    // I now want to make a copy of the bitmap
    BITMAP bm;
    HDC hSrcDC,hDestDC;
    HANDLE OldObject1, OldObject2;
    DWORD sz = GetObject(hClipBitmap, sizeof(BITMAP), &bm);
    if(sz == sizeof(BITMAP))
    {
            // make a bitmap to allow positioning before actual pasting
        hPasteBitmap = ::CreateCompatibleBitmap(memDC, bm.bmWidth, bm.bmHeight); 
        if (hPasteBitmap==NULL)
            FATAL_ERROR;
        hSrcDC = CreateCompatibleDC(hDC);
        hDestDC = CreateCompatibleDC(hDC);
        OldObject1 = SelectObject(hSrcDC, hClipBitmap); // bpp is 32
        OldObject2 = SelectObject(hDestDC, hPasteBitmap); // bpp is 8
        BitBlt(hDestDC, 0, 0, bm.bmWidth, bm.bmHeight, hSrcDC, 0, 0, SRCCOPY);
        COLORREF color2 = ::GetPixel(hSrcDC, 1, 1); // color2 is 0x00000000
        COLORREF color3 = ::GetPixel(hDestDC, 1, 1);// color2 is 0x00010101
        COLORREF color4 = ::GetNearestColor(hSrcDC, color2); //  0x00000000
        COLORREF color5 = ::GetNearestColor(hDestDC, color2);//  0x00000000
        // hPasteBitmap now contains the clipboard data
    }
}
// other cleanup snipped for clarity 
```

使用 GetPixel() 和 GetNearestColor()，似乎我应该得到我正在寻找的结果，但我没有。我想我错过了某种调色板操作？

**更新**

我真正遇到问题的部分，也许我误解了这些 API 的重点，是我可以查询像素颜色，然后询问上下文它将使用什么颜色，它会返回正确的颜色（黑色），而不是 BitBlt 生成的几乎黑色。

其他程序似乎没有在剪贴板上放置调色板——可能是因为它们放置了不需要调色板的 32bpp 位图？根据[MSDN 的剪贴板翻译表查看可用的内容，他们甚至没有像我所知的那样做 DIB](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649013%28v=vs.85%29.aspx#_win32_Synthesized_Clipboard_Formats)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T22:36:34.447

每像素 8 位的位图需要一个关联的调色板来指定颜色，这是独立的 - 您可以使用[`CF_PALETTE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ff729168%28v=vs.85%29.aspx). 一旦你有了它，你就可以在位图被选中的 DC 上[`SelectPalette`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162958%28v=vs.85%29.aspx)使用它。[`RealizePalette`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162896%28v=vs.85%29.aspx)

# javascript - 这是检测 IE 版本的好方法吗？

> ID：12918304
> 
> 赞同：1
> 
> 时间：2012-10-16T15:34:48.377
> 
> 标签：javascript

我发现一篇文章解释了如何“通过检查是否存在非标准 document.all 仅在 IE 中可用的对象”来检测 IE。

这种方法会被认为是好的做法吗？它是否稳定且真正面向未来？

这是文章：[http ://tanalin.com/en/articles/ie-version-js/](http://tanalin.com/en/articles/ie-version-js/)

另外，不要忘记未来打样部分： http: [//tanalin.com/en/articles/ie-version-js/#h-future-proof](http://tanalin.com/en/articles/ie-version-js/#h-future-proof)

这是建议的代码：

```
if (document.all && !document.querySelector) { // IE7 or lower

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T15:36:20.530

> 这种方法会被认为是好的做法吗？

不

> 它是否稳定且真正面向未来？

不

一般来说，浏览器检测并不是一个好的做法。

在那些情况下，它是解决问题的最佳方案，并且您需要检测的浏览器是 IE 的版本，那么[条件注释](http://en.wikipedia.org/wiki/Conditional_comment)就是要走的路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T15:45:42.793

我和@Quentin 在一起，特别是如果你在 JS 中不是真的*“在家” 。*我并不是说这有什么不好，但在极少数情况下，你可以使用完整的浏览器检测脚本，但除非你能完全理解代码，否则我建议你不要使用它。

有一篇关于[quirksmode](http://www.quirksmode.org/js/support.html)的好文章很好地解释了原因。
同样在 quirksmode 上，您可以找到[完整的浏览器检测脚本](http://www.quirksmode.org/js/detect.html)。但正如我所说：除非您可以诚实地说您完全理解代码，否则我建议您暂时保留它......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T15:40:58.567

浏览器检测是一个谬误。

您应该关注的是“特征检测”，它是一种[鸭式类型](http://en.wikipedia.org/wiki/Duck_typing)。

换句话说，您对用户是否正在运行特定的浏览器版本不太感兴趣，而对他们正在运行的浏览器（无论品牌或版本）是否支持您想要使用的功能更感兴趣。

这样做的好处是除了升级浏览器之外，还有很多方法可以添加功能。像[Modernizr](http://modernizr.com/)这样的库通过 JavaScript 实现添加了“缺失”的功能。浏览器检测会错过这一点。

浏览器检测的“优势”是它是许多单个特征检测代码的简写。然而，这可能是一种虚假的经济。

通常，请执行以下操作之一：

1.  如果您正在编写库，请明确说明您希望测试的每个功能。
2.  如果您不编写库，请使用库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T14:53:29.527

*直接检测新*功能总是更好。这篇文章*仅是*关于检测*旧*版本（比当前稳定版本更旧）的 IE，以防直接检测功能/错误是不可能的，或者考虑到除旧 IE 之外的所有浏览器都支持很久以前的功能，这将是矫枉过正。

# excel - Excel VBA：以某种方式告诉打印设置哪一行=第一页的结尾？

> ID：12918306
> 
> 赞同：1
> 
> 时间：2012-10-16T15:34:53.183
> 
> 标签：excel, vba

我的电子表格中有两个表（一个在另一个之上，由几行分隔），分别称为 T1 和 T2。T1 在包含多少行方面是动态的，T2 是静态的。我可以很容易地找出 T1 在哪一行结束，然后在上面加 1 左右——调用这个变量 T1EndRow。

我想对其进行编码，以便它知道从第 1 行到 T1EndRow 的所有内容都将在打印预览的第一页上。T2 将流到第二页。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:39:28.263

使用对象的`HPageBreaks`和`VPageBreaks`成员`Sheet`设置水平和垂直分页符的位置。

例如，如果 T1EndRow 是您希望出现在第 1 页上的最后一行中的命名范围，请执行以下操作：

```
Set ActiveSheet.HPageBreaks(1).Location = ActiveSheet.Range("T1EndRow") 
```

如果 T1EndRow 是`Long`，请尝试：

```
Set ActiveSheet.HPageBreaks(1).Location = ActiveSheet.Cells(T1EndRow, 1) 
```

奇怪的是，除非您处于 xlPageBreakPreview 模式，否则 Excel 会在这一行抛出错误（这是调整分页符的唯一方法）：

```
ActiveWindow.View = xlPageBreakPreview
Set Sheet1.HPageBreaks(1).Location = Sheet1.Cells(58, 1)
ActiveWindow.View = xlNormalView 
```

我还注意到，如果`.Location`您设置的设置在`UsedRange`工作表之外，它会引发不同的错误，因此您可能需要确保已满足该要求。

# c# - 命名空间遍历

> ID：12918310
> 
> 赞同：0
> 
> 时间：2012-10-16T15:35:02.963
> 
> 标签：c#, xml, xpath

我正在尝试解析以下 XML 示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <soapenv:Body>
        <d2LogicalModel modelBaseVersion="1.0" xmlns="http://datex2.eu/schema/1_0/1_0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://datex2.eu/schema/1_0/1_0 http://datex2.eu/schema/1_0/1_0/DATEXIISchema_1_0_1_0.xsd">
            <payloadPublication xsi:type="PredefinedLocationsPublication" lang="en">
                <predefinedLocationSet id="GUID-NTCC-VariableMessageSignLocations">
                    <predefinedLocation id="VMS30082775">
                        <predefinedLocationName>    
                            <value lang="en">VMS M60/9084B</value>
                        </predefinedLocationName>
                    </predefinedLocation>
                </predefinedLocationSet>
            </payloadPublication>
        </d2LogicalModel>
    </soapenv:Body>
</soapenv:Envelope> 
```

我特别需要获取顶级predefinedLocation 标记的内容。根据我的计算，正确的 XPath 应该是

```
/soapenv:Envelope/soapenv:Body/d2LogicalModel/payloadPublication/predefinedLocationSet/predefinedLocation 
```

我正在使用以下 C# 代码来解析 XML： string filename = "content-sample.xml";

```
 XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load(filename);

        XmlNamespaceManager nsmanager = new XmlNamespaceManager(xmlDoc.NameTable);
        nsmanager.AddNamespace("soapenv", "http://schemas.xmlsoap.org/soap/Envelope");

        string xpath ="/soapenv:Envelope/soapenv:Body/d2LogicalModel/payloadPublication/predefinedLocationSet/predefinedLocation";
        XmlNodeList itemNodes = xmlDoc.SelectNodes(xpath, nsmanager); 
```

但是，这一直没有结果。任何人都可以对此有所了解，因为我觉得我的头撞在了砖墙上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:58:32.237

d2LogicalModel 及其后代不在空命名空间中，而是在“http://datex2.eu/schema/1_0/1_0”命名空间中。您需要将此命名空间添加到命名空间管理器才能选择您的元素：

```
XmlDocument xmlDoc = new XmlDocument(); 
xmlDoc.Load(filename); 

XmlNamespaceManager nsmanager = new XmlNamespaceManager(xmlDoc.NameTable); 
nsmanager.AddNamespace("soapenv", "http://schemas.xmlsoap.org/soap/Envelope"); 
nsmanager.AddNamespace("dataexNs", "http://datex2.eu/schema/1_0/1_0"); 

string xpath ="/soapenv:Envelope/soapenv:Body/dataexNs:d2LogicalModel/dataexNs:payloadPublication/dataexNs:predefinedLocationSet/dataexNs:predefinedLocation"; 
XmlNodeList itemNodes = xmlDoc.SelectNodes(xpath, nsmanager); 
```

即使您使用的是 Linq to Xml，也值得使用完全限定名称来避免选择恰好具有相同本地名称的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:22:43.870

如果你想避免处理命名空间（使用 Linq2Xml）

```
var xDoc = XDocument.Load(.....);

var loc = xDoc.Root.Descendants2("predefinedLocation").First();
var id = loc.Attribute("id");
var value = loc.Descendants2("value").First().Value;

public static class S_O_Extensions
{
    public static IEnumerable<XElement> Descendants2(this XElement xRoot, string name)
    {
        return xRoot.Descendants().Where(n => n.Name.LocalName == name);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T15:50:03.280

我想这个**LINQ2XML**会帮助你

```
XElement doc = XElement.Load("yourStream.xml");
XNamespace s="http://datex2.eu/schema/1_0/1_0";

foreach (var itm in doc.Descendants(s+ "predefinedLocation"))
{
itm;//your required predefinedLocationName node 
itm.Element(s+"predefinedLocationName").Element(s+"value").Value;//VMS M60/9084B
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T16:12:57.900

谈到 XPath，我总是发现更小/更短/更简单的 XPath 表达式更好。我会用这个：

```
//predefinedLocationSet 
```

这对你有什么作用？在 XPath 测试仪上，它确实对我有用。

# css - 动画钟摆效果

> ID：12918313
> 
> 赞同：1
> 
> 时间：2012-10-16T15:35:13.900
> 
> 标签：css, css-transforms

我正在尝试创建一个动画钟摆。我设法用两个嵌套的 div 来做到这一点，一个用于字符串，一个用于钟摆。动画是通过将字符串从 45 度旋转来完成的，如下所示：

```
.string{
  -webkit-animation-name: rotate;
  -webkit-animation-duration: 1s;
  -webkit-animation-iteration-count: infinite;
  -webkit-animation-direction: linear;
  -webkit-transform-origin:50% 0%;
}

@-webkit-keyframes rotate {
  0%   { -webkit-transform: rotate(0deg); }
  25%  { -webkit-transform: rotate(45deg); }
  50%  { -webkit-transform: rotate(0deg); }
  100% { -webkit-transform: rotate(0deg); }
} 
```

它工作正常，但速度的印象不是很好。

现在我希望钟摆的速度从 到 减小，从`0deg`到`45deg`增加。`45deg``0deg`

**我怎么能做到这一点？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:54:05.740

有一个用于构建自定义缓动效果的好工具：[**Ceaser**](http://matthewlein.com/ceaser/)

但是，因为你使用相同的动画来回做，我认为你可以处理它：

```
.string{
  -webkit-animation-name: rotate;
  -webkit-animation-duration: 1s;
  -webkit-animation-iteration-count: infinite;
  -webkit-animation-direction: linear;
  -webkit-transform-origin:50% 0%;
  -webkit-animation-timing-function:ease-in-out; /* or make your custom easing */
}

@-webkit-keyframes rotate {
  0%   { -webkit-transform: rotate(0deg); }
  40%  { -webkit-transform: rotate(45deg); }
  70%  { -webkit-transform: rotate(0deg); }
  100% { -webkit-transform: rotate(0deg); }
}​ 
```

所以上升需要 40% 的时间，下降只需要 30% :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-27T15:51:30.740

您需要的内容如下：

```
.string{
    -webkit-animation-name: rotate;
    -webkit-animation-duration: 2s;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-direction: alternate;
    -webkit-transform-origin:50% 0%;
    -webkit-animation-timing-function:ease-in-out;
}

@-webkit-keyframes rotate {
    0%   { -webkit-transform: rotate(45deg); }
    100% { -webkit-transform: rotate(-45deg); }
} 
```

这将创建一个从两侧 45 度开始的平滑动画。您可以使用动画持续时间增加或减少频率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T15:52:57.617

[我通过谷歌搜索CSS3 Pendulum](http://daneden.me/2011/04/pendulum-effect-in-css/)找到了这个资源。这似乎是您正在寻找的东西。

这是使用您的代码的[演示：](http://codepen.io/anon/pen/iKICp)

```
.string{
  -webkit-transform-origin:50% 0%;
  -webkit-animation: rotate 2s infinite ease-in-out;
}

@-webkit-keyframes rotate {
  0% {
        -webkit-transform: rotate(-45deg);
    }

    50% {
        -webkit-transform: rotate(45deg);
    }

    100% {
        -webkit-transform: rotate(-45deg);
    }
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T15:44:05.783

您正在寻找的物业是`-webkit-animation-timing-function`。尝试使用不同的值来查看它如何影响动画的速度。

见：[http ://w3schools.com/cssref/css3_pr_animation-timing-function.asp](http://w3schools.com/cssref/css3_pr_animation-timing-function.asp)

将方向设置为交替然后为单个摆动设置动画不是更有意义吗？这样它会从左到右然后从右到左播放。使用“轻松”的默认计时功能，您将获得摆动钟摆运动的正确物理学。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-06T10:27:44.603

实际上，我自己创建了一个钟摆效果版本。 [http://codepen.io/khanhhua/full/jbOLJb/](http://codepen.io/khanhhua/full/jbOLJb/)

从技术上讲，实现将涉及变换、变换原点、动画定时功能和更多计算。我在 SCSS 中做了以下代码（你可以在[上面的笔](http://codepen.io/khanhhua/full/jbOLJb/)中看到）。

有关更多详细信息，您可以阅读[我的博客](http://fatmandesigner.com/pendulum-effect/)，该博客向您展示了更多关于背后的数学和物理学的信息。

希望这会有所帮助！

```
[class*=pendulum] {
  position: absolute;
  bottom: 0;
  width: 32px;
  height: 32px;
  left: 112px;
  border: 2px solid #white;
  border-radius: 50%;
  background-color: #5c9bf3;
  box-shadow: 0px 0px 5px 0px white;
  animation: swing 1s infinite ease-in-out alternate;
}
[class*=pendulum]:after {
  content: "";
  display: block;
  width: 1px;
  margin-left: 16px;
  background: white;
  animation: tracing 1s infinite ease-in-out alternate;
}

.pendulum-1 {
  bottom: 0px;
  transform-origin: center -512px;
  transform-origin: center -512px;
  animation-duration: 1.13542s;
  z-index: -1;
}
.pendulum-1:after {
  height: 512px;
  margin-top: -512px;
  animation-timing-function: step(0, 4);
  animation-delay: 300ms;
  animation-duration: 0.56771s;
} 
```

PS：如果您正在寻找某些面试问题的答案，请务必提及来源。你可能永远不知道我是面试官。

# android - 带有 ViewPager.OnPageChangeListener 的 ActionBarSherlock TabPageIndicator - 选项卡被卡住

> ID：12918315
> 
> 赞同：0
> 
> 时间：2012-10-16T15:35:15.710
> 
> 标签：android, android-viewpager, actionbarsherlock

我正在运行 ABS (SampleTabsDefault) 提供的示例代码。我添加了 OnPageChangeListener 如下所示，现在 TabPageIndicator 始终卡在第一个选项卡上，即使选项卡内容发生更改。难道我做错了什么？

@Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.simple_tabs);

```
 mAdapter = new GoogleMusicAdapter(getSupportFragmentManager());

    mPager = (ViewPager)findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);

    mIndicator = (TabPageIndicator)findViewById(R.id.indicator);
    mIndicator.setViewPager(mPager);

    ViewPager.OnPageChangeListener changeListener = new ViewPager.OnPageChangeListener() {

       @Override
       public void onPageScrolled(int i, float v, int i1) {}

       @Override
       public void onPageSelected(int i) {}

       @Override
       public void onPageScrollStateChanged(int i) {}
    };

    mPager.setOnPageChangeListener(changeListener);
    mIndicator.setOnPageChangeListener(changeListener);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T18:26:18.850

问题是设置更改侦听器会覆盖负责切换选项卡的代码。我本可以对 ABS 类进行子类化，但选择切换到 TitlePageIndicator，它在设置侦听器方面没有任何问题。

# cuda - 如何在visual studio2010中为windows上的nvidia的gpu配置OpenCL？

> ID：12918320
> 
> 赞同：3
> 
> 时间：2012-10-16T15:35:28.940
> 
> 标签：cuda, opencl, gpgpu, gpu

我在华硕笔记本电脑的 Wwindows 7 操作系统上使用 NVIDIA 的 GeForce GTX 480 GPU。我已经为 CUDA 4.2 配置了 Visual Studio 2010。如何在 Visual Studio 2010 上为 nvidia 的 gpu 配置 OpenCL？尝试了所有可能的方法。

是否可以通过任何方式使用“CUDA 工具包（CUDA 4.2）”和“nvidia 的 gpu 计算 sdk”来编程 OpenCL？如果是，那么如何？如果没有，那么还有什么其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:20:25.617

更新后的 SDK 可以在： [https](https://developer.nvidia.com/cuda-downloads) ://developer.nvidia.com/cuda-downloads 找到 （各种平台，包括 windows 8）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:48:33.437

是的。您应该能够使用 Visual Studio 2010 为 OpenCL 编程。这应该只是确保您拥有正确的包含目录和库设置的情况。

从[这个线程](https://stackoverflow.com/questions/3076485/the-right-way-to-setup-visualstudio-2010-for-opencl)中查看[这个站点](http://www.guineacode.com/2010/linking-and-compiling-opencl/)，了解如何为 OpenCL 设置 VS2010 解决方案。

# visual-studio-2012 - 为什么 Visual Studio 2012 Web 发布向导不将我的文件复制到目标？

> ID：12918321
> 
> 赞同：3
> 
> 时间：2012-10-16T15:35:30.257
> 
> 标签：visual-studio-2012, web-publishing

更新：最近使用 Visual Studio 2012 Update 2 修复了此问题（[Visual Studio 2012 Web Publish 不复制文件](https://stackoverflow.com/questions/12201146/visual-studio-2012-web-publish-doesnt-copy-files)）

我正在使用 Visual Studio 2012 Web 发布向导。我有一些保存的配置文件。用于各种开发和测试服务器。在两个不同的项目中，对于某些发布配置文件，向导实际上不会部署任何文件。它删除服务器上的现有文件，然后不部署任何东西。

这是我进入输出窗口的内容：（在此示例中，我尝试关闭“在目标上删除文件”选项以查看它是否会有所作为。它没有。）

```
1>------ Build started: Project: WebProject, Configuration: Prod Any CPU ------
1>  WebProject -> C:\_TFS\WebProject\Release\R2012-10-16\Source\WebProject\Website\bin\Website.dll
2>------ Publish started: Project: Website, Configuration: Prod Any CPU ------
2>Connecting to C:\Deployments\Web Sites\Website...
2>Transformed Web.config using C:\_TFS\Website\Release\R2012-10-16\Source\Website\Website\Web.Prod.config into obj\Prod\TransformWebConfig\transformed\Web.config.
2>Copying all files to temporary location below for package/publish:
2>obj\Prod\Package\PackageTmp.
2>Publishing folder /...
2>
========== Build: 1 succeeded, 0 failed, 0 up-to-date, 0 skipped ==========
========== Publish: 1 succeeded, 0 failed, 0 skipped ========== 
```

（项目名称匿名。）

请注意，它说的是`Publishing folder /...`，但随后只是停止并声称成功。目标文件夹为空。这在部署到本地目录和网络路径时发生。

如果我使用完全相同的设置创建一个新的发布配置文件，它就可以正常工作。我刚刚删除它，然后用相同的名称重新创建它，现在它部署了所有文件。我不应该这样做。有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T13:22:34.853

我不知道您是否找到了解决方案，但我认为您可能会发现这很有帮助 - 基本上是一样的 - 我自己遇到了这个问题，并使用其他人创建的“发布配置文件”，保存在我们的源中控制系统和平坦出不工作。向下滚动过去接受的答案并查看该人谈论XML配置文件差异的描述......看起来Visual Studio的部署中有一个小错误，即使它只是退出，它也会显示成功如果部分 XML 发布文件不完全匹配。

[另一个 StackOverflow 页面，这应该可以回答您的问题](https://stackoverflow.com/questions/12201146/visual-studio-2012-web-publish-doesnt-copy-files)

另外，在 Properties --> PublishProfiles 文件夹中查看您的项目（确保您在解决方案资源管理器中打开了“显示所有文件”，然后打开您的 *.pubxml.user 文件并查看是否有是否列出了任何文件...当我的失败时，该文件中没有任何引用的文件。

# windows - 如何在 BatchFile 中实现 StopClock？

> ID：12918323
> 
> 赞同：0
> 
> 时间：2012-10-16T15:35:32.060
> 
> 标签：windows, batch-file, stopwatch

我想测量在批处理文件中调用的多个应用程序所花费的时间（在某些条件下）。您能否告诉我如何在 BatchFile 中实现 StopClock。我们在 C# 和 C++ 中有一个 StopClock 类。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:27:09.607

您可以通过将变量设置为 来捕获变量中的开始和停止时间`%TIME%`。

FOR /F 可用于将时间解析为小时、分钟、秒和厘秒（1/100 秒）。

SET /A 将前导 0 的数字视为八进制，因此每个数字必须以 1 为前缀以强制十进制表示法。其他一切都是相对简单的数学。

该`:timeDiff`例程可以测量少于 24 小时的任何经过时间。结果以厘秒（1/100 秒）为单位。

```
@echo off
setlocal

:: Measure the time to do something
set start=%time%
for /l %%N in (1 1 100000) do echo off
set stop=%time%

:: Echo the elapsed time
call :timeDiff start stop

:: Store the elapsed time in variable named result
call :timeDiff start stop result
echo result=%result%

exit /b

:timeDiff  StartVar  StopVar  [RtnVar]
::
:: Compute elapsed time between time stored in StartVar and StopVar.
::
:: Return result in RtnVar, or echo result if RtnVar not specified
::
:: Result is in units of csec (1/100 second)
::
setlocal enableDelayedExpansion
for /f "tokens=1-4 delims=:.," %%A in ("!%~1!") do set /a timeDiff.start=(1%%A*360000)+(1%%B*6000)+1%%C%%D-36610000
for /f "tokens=1-4 delims=:.," %%A in ("!%~2!") do set /a timeDiff.stop=(1%%A*360000)+(1%%B*6000)+1%%C%%D-36610000
set /a rtn=timeDiff.stop-timeDiff.start
if rtn lss 0 set /a rtn+=864000
( endlocal
  if "%~3" neq "" (set %~3=%rtn%) else echo %rtn%
)
exit /b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:03:50.430

这是我放在一起的批处理文件，用于测量 2 个应用程序（在此为`notepad`和`rdp`）运行直到它们在几秒钟内关闭所花费的时间。

```
@echo off
set stime=0
start notepad.exe
start mstsc.exe
set /a stime+=1

:LOOP
timeout /t 1 >nul
set /a stime+=1
tasklist /nh /fi "imagename eq notepad.exe" | find /i "notepad.exe" >nul && goto :LOOP || goto :LOOP2

:LOOP2
timeout /t 1 >nul
set /a stime+=1
tasklist /nh /fi "imagename eq mstsc.exe" | find /i "mstsc.exe" >nul && goto :LOOP2 || goto :BREAK

:BREAK
echo Time taken = %stime%
pause >nul 
```

它不像 C# 和类似的类那样准确，`StopWatch`但非常接近。只是玩弄时代，直到你足够接近它。

只需为您要运行的每个应用程序复制循环部分（并增加标签，即`:LOOP3`, ）并相应地替换文件名。`:LOOP4`

希望这可以帮助

# symfony - 具有多个扩展的容器构建器编译

> ID：12918327
> 
> 赞同：1
> 
> 时间：2012-10-16T15:35:43.690
> 
> 标签：symfony, dependency-injection

我目前正在尝试测试我的 symfony2 扩展之一。为此，我已经实例化了一个容器构建器，然后在其上注册了我的扩展。

问题是我的扩展需要编译其他扩展（来自其他扩展的一些服务被注入到我测试的扩展服务中）。所以，我已经在我之前注册了这些其他扩展，以便能够编译容器。

```
$container = new ContainerBuilder();

$container->registerExtension(new AcmeOtherExtension());
$container->registerExtension(new AcmeMainExtension());

// Loads configuration

$container->compile(); 
```

此时，容器拒绝编译，IMO 由于缺少一些编译通道。所以，我添加了以下几行：

```
$container->getCompilerPassConfig()->setOptimizationPasses(array(new ResolveDefinitionTemplatesPass()));
$container->getCompilerPassConfig()->setRemovingPasses(array()); 
```

使用这些行，可以编译容器而不会出现任何错误，但是当我请求一个服务注入了来自另一个扩展的服务时，容器会抛出一个异常，通知我在另一个扩展中定义的服务不存在。

有人可以给我有关容器通行证和编译的提示吗？

# .net - WebAPI 中的单元测试操作参数

> ID：12918328
> 
> 赞同：3
> 
> 时间：2012-10-16T15:35:44.993
> 
> 标签：.net, unit-testing, asp.net-web-api, url-parameters, controller-action

我正在为 WebAPI 控制器编写一些单元测试，我想断言的方面之一是参数匹配。

我遵循了[Filip Wojcieszyn 的博客](http://www.strathweb.com/2012/08/testing-routes-in-asp-net-web-api/)中使用的方法，该方法运行良好，但我现在正在寻求扩展它的断言。

我在一个控制器上做了三个动作（这三个动作都经过实际使用验证）：

```
[HttpGet]
public IEnumerable<Task> Get()

[HttpGet]
public IEnumerable<Task> Get(string elementType)

[HttpGet]
public Task Get(long id) 
```

我有以下代码

```
var actionSelector = new ApiControllerActionSelector();
var descriptor = actionSelector.SelectAction(_controllerContext);
return descriptor.GetParameters(); 
```

问题是，当我在无参数路由上调用 descriptor.GetParameters() 时，它返回一个包含 1 个参数的集合 - “long id”参数。

谁能解释为什么它只返回这个而不返回其他两个重载，以及是否有可能获得重载的可能性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:06:34.707

问题的原因是被调用的路由不够具体。

*   我有一条路线允许 ID 参数是可选的
*   在控制器上有 3 个 Get() 重载。
*   选择 Get(long id) 操作是因为虽然没有指定“id”参数，但“id”参数是可选的，因此该方法适合。

WebAPI 选择匹配参数数量最多的方法，在这种情况下，这意味着在代码行上

```
var descriptor = actionSelector.SelectAction(_controllerContext); 
```

选择了一个意外的操作 - 意外，因为我正在寻找 Get() 并获得了 Get(long id)。

为了解决这个问题，我简单地将我配置的路由分成两部分：第一个需要（*即*非可选的）'id' 参数，以及不接受'id' 参数的更一般的路由。

然后一切都到位了。

# mysql - 我有任务获得两个选择按列合并的一个查询结果

> ID：12918329
> 
> 赞同：2
> 
> 时间：2012-10-16T15:35:44.663
> 
> 标签：mysql

第一个查询：

```
SELECT COUNT(*)
FROM `test` t ,`user_test` ut,`user` u 
WHERE test_type_id = 1
AND t.created_on >= DATE_SUB(CURDATE(), INTERVAL 1 DAY) AND t.created_on < CURDATE()
AND t.id = ut.test_id
AND u.id = ut.user_id
AND u.user_account_type_id != X 
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...'  
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...' 
```

第二个查询：

```
SELECT COALESCE(SUM(IF(tt.type = 0, 1, 0)), 0) aaa, COALESCE(SUM(IF(tt.type = 1, 1, 0)), 0) bbb 
FROM transaction_test tt ,USER u
WHERE tt.created_on >= DATE_SUB(CURDATE(), INTERVAL 10000 DAY) AND tt.created_on < CURDATE()
AND u.id = tt.user_id
AND u.user_account_type_id != X
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...'  
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...' 
```

必须从一个选择中获得结果我试试这个

```
SELECT COALESCE(SUM(IF(tt.type = 0, 1, 0)), 0) Email, COALESCE(SUM(IF(tt.type = 1, 1, 0)), 0) SMS ,(
SELECT COUNT(*)
FROM `test` t ,`user_test` ut,`user` u 
WHERE test_type_id = 1
AND t.created_on >= DATE_SUB(CURDATE(), INTERVAL 1 DAY) AND t.created_on < CURDATE()
AND t.id = ut.test_id
AND u.id = ut.user_id
AND u.user_account_type_id != X 
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...'  
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...' 
)
FROM transaction_test tt ,USER u
WHERE tt.created_on >= DATE_SUB(CURDATE(), INTERVAL 10000 DAY) AND tt.created_on < CURDATE()
AND u.id = tt.user_id
AND u.user_account_type_id != X
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...'  
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...' 
```

我不满意使用两次

```
AND u.user_account_type_id != X
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...'  
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...' 
```

这部分任何机构都可以建议如何避免这种情况？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T11:55:36.310

Give it a try i have joined your both query because in queries you have the same conditions and i have used the `INNER JOIN` to sure that both tables have the data if your concerned to get data from the right table or left table change it accordingly to the `RIGHT JOIN` or `LEFT JOIN`

```
SELECT COUNT(*) ,COALESCE(SUM(IF(tt.type = 0, 1, 0)), 0) aaa, COALESCE(SUM(IF(tt.type = 1, 1, 0)), 0) bbb 
FROM `test` t ,
INNER JOIN `user_test` ut ON (t.id = ut.test_id)
INNER JOIN `user` u  ON (u.id = ut.user_id)
INNER JOIN `transaction_test` tt  ON (u.id = tt.user_id)
WHERE test_type_id = 1
AND t.created_on >= DATE_SUB(CURDATE(), INTERVAL 1 DAY) AND t.created_on < CURDATE()
AND u.user_account_type_id != X 
AND u.usr NOT LIKE '%...' AND u.usr NOT LIKE '%...' AND u.usr NOT LIKE '%...' 
AND u.usr NOT LIKE '%...' AND u.usr NOT LIKE '%...' AND u.usr NOT LIKE '%...' 
```

Hope it works fine

# java - 使用 hashset 值作为 hashmap 中的键

> ID：12918334
> 
> 赞同：0
> 
> 时间：2012-10-16T15:35:50.810
> 
> 标签：java, initialization, hashmap, declaration, hashset

我的问题是我有 2 个类，一个称为 Set，它包含一个值的哈希集，现在哈希集中的这些值已用作哈希映射中的键，该哈希映射位于一个名为 Map 的单独类中，我不知道从哪里开始但是它必须是小东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:51:53.950

一般来说，如果你想用 HashSet 中的键为你的 HashMap 播种，你可以这样做：

```
HashSet<KeyClass> set;
HashMap<KeyClass,ValueClass> map = new HashMap<KeyClass,ValueClass>();

for (KeyClass key : set) {
   map.put( key, new ValueClass() );
} 
```

# ruby-on-rails - Rails：从另一个控制器调用控制器方法-> NoMethodError

> ID：12918336
> 
> 赞同：3
> 
> 时间：2012-10-16T15:36:02.823
> 
> 标签：ruby-on-rails, devise, controller, nomethoderror

我正在使用 Devise gem 并拥有 2 个控制器：

1：控制器/管理员/mailings_controller.rb：

```
class Admin::MailingsController < ApplicationController
  def self.send_emails
    ...
    RegistrationsController.create
    ...
  end
end 
```

2：控制器/registrations_controller.rb：

```
class RegistrationsController < Devise::RegistrationsController
  ...
  # POST
  def create
     # do some stuff
     super
     # do some stuff
  end
  ...
end 
```

但是当我执行（在控制台中）...

```
Admin::MailingsController.send_emails 
```

……我明白了……

```
"NoMethodError: undefined method `create' for RegistrationsController:Class" 
```

为什么？以及如何解决这个问题？

```
rake routes 
```

...显示没有问题：

```
user_registration POST  ->  /users(.:format)  ->  registrations#create 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:35:25.123

更改`RegistrationsController.create`为`RegistrationsController.new.create`

或者

更改`def create`为`def self.create`.

您在这里遇到的困惑是使用类方法，您的意思是调用实例方法。您可以通过调用实例上的方法或将方法更改为类方法来解决此问题。

# java - Socket.getRemoteSocketAddress() 不返回客户端的私有 IP 地址

> ID：12918337
> 
> 赞同：1
> 
> 时间：2012-10-16T15:30:48.350
> 
> 标签：java

我有一个客户端服务器程序，其中客户端在具有两个 IP 地址（通过 Internet 可见的公共 IP 地址和私有 IP 地址）的 PC 上运行。我的服务器在不同的网络上运行。当我使用套接字连接客户端和服务器并在服务器端使用 java 的 socket.getRemoteSocketAddress 方法时，我得到了客户端连接的公共 IP 地址。即使我使用 InetAddress.getByName(socket.getInetAddress().getHostName) 我仍然可以获得公共地址。

问题是我需要打印私人地址。你能告诉我我怎样才能做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:58:08.437

只有客户知道这一点。无法从服务器检索内部 IP 地址。客户端必须确定其本地 IP 地址，然后将该信息发送到服务器。

# eclipse - Git 显示一行已被删除和添加，但没有任何改变？

> ID：12918350
> 
> 赞同：1
> 
> 时间：2012-10-16T15:36:27.930
> 
> 标签：eclipse, git

我在 Ubuntu 上使用 Eclipse。我已经完成了很多 Eclipse 配置以使其正常工作（例如，行尾、空格、制表符等）。有一件事我无法弄清楚它发生了什么。当我做 git diff 时：

```
-  $entity_info = entity_get_info($form['#entity_type']);  
+  $entity_info = entity_get_info($form['#entity_type']); 
```

除了空白编码之外，没有任何变化？当我执行 git diff -w 时，这不会显示。实际发生了什么？如何让 Eclipse 不这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:01:39.687

`-w`标志忽略空格。所以这是一个空格问题，可能是从制表符更改为空格（反之亦然），或者您更改了行尾，或者您添加了尾随空格......等等

Windows 和 UNIX 系统不使用相同的行尾，为了防止基于这些的冲突发生，你应该这样设置你的 git config：

*   **窗户**：`git config --global core.autocrlf true`
*   **Unix** ：`git config --global core.autocrlf input`

接下来，为了确保我们只提交理想的空白规则，您可以设置此配置选项：

`git config --global core.whitespace trailing-space,space-before-tab,indent-with-non-tab`

# android - 启用 Android NFC 可以充当 NFC 标签吗

> ID：12918357
> 
> 赞同：2
> 
> 时间：2012-10-16T15:36:52.710
> 
> 标签：android, nfc, rfid

具有 NFC 功能（例如 Galaxy SIII）的 Android 设备能否充当 NFC 或 RFID 卡，可以使用另一个 NFC 阅读器读取？不是通过 android 设备，而是其他任何通用类型的 NFC 读卡器？

Android也可以读取NFC卡吗？如果是的话——任何类型的？它可以读取 RFID 吗？

# sql - SQL查询的临时表vs短路操作

> ID：12918362
> 
> 赞同：2
> 
> 时间：2012-10-16T15:37:06.427
> 
> 标签：sql, database, sql-server-2008, sql-optimization

以下是我要优化的查询，这里优化的瓶颈是 CONDITION_B。

```
select @COMPUTE_X = count(distinct TABLEA.COLUMN_T5)
from #TMP_TABLEA TABLEA
inner join TABLEB on TABLEB.ID = TABLEA.ID
left join....
where
(
  CONDITION_A --Complex condition
) and
(
  CONDITION_B --Complex condition with some functions returning table
) 
```

如果我将上述查询的结果留下 CONDITION_B 到一个临时表，然后在该临时表上应用 CONDITION_B，我会获得非常好的性能提升。我认为 CONDITION_B 总是评估 CONDITION_A 的结果是否为假。

任何人都可以让我知道是否有更好的方法。并且短路操作是否在 SQL 查询语句中起作用，如果是，它们的处理顺序是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:44:29.707

强制执行评估顺序的唯一方法是使用`CASE`语句。尽管它可能看起来不漂亮，但以下可能具有相似的性能：

```
select @COMPUTE_X = count(distinct TABLEA.COLUMN_T5)
from #TMP_TABLEA TABLEA
inner join TABLEB on TABLEB.ID = TABLEA.ID
left join....
where 1 = (CASE WHEN CONDITION_A then 1
                WHEN CONDITION_B then 1
                else 0
           end) 
```

请记住，SQL 是一种*描述性*语言而不是过程性语言。您编写 SQL 来描述您想要的结果。您在语句中放置事物的顺序可以完全由查询优化器重新排列。但是，`CASE`语句是一个例外。在大多数情况下，评估的顺序是有保证的（尽管在涉及聚合时不是这样）。

顺便说一句，如果您使用完整查询发布另一个查询，则可能还有其他机会来加快查询速度。

# java - 从显示图像的活动来回移动时，会出现内存错误。不释放图像？

> ID：12918365
> 
> 赞同：1
> 
> 时间：2012-10-16T15:37:08.640
> 
> 标签：java, android, image

我有一个名为的活动。此活动将显示图像。问题是，如果我转到同一应用程序中的上一个活动，然后再回忆它。如果我做的次数足够多，我会得到一个内存错误。有没有办法让它在你返回/结束活动时释放空间？

我以为它会自动释放，但也许它没有？有我应该做的电话吗？像 onDestroy(){ image.recycle(); 和所有这些东西？

我想这里发生了一些事情。

**例外**

```
10-16 11:50:27.778: E/AndroidRuntime(18255): FATAL EXCEPTION: main
10-16 11:50:27.778: E/AndroidRuntime(18255): java.lang.OutOfMemoryError
10-16 11:50:27.778: E/AndroidRuntime(18255):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
10-16 11:50:27.778: E/AndroidRuntime(18255):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:530)
10-16 11:50:27.778: E/AndroidRuntime(18255):    at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:299)
10-16 11:50:27.778: E/AndroidRuntime(18255):    at com.bentley.cordova.plugins.ZoomImageActivity$1.run(ZoomImageActivity.java:111)
10-16 11:50:27.778: E/AndroidRuntime(18255):    at android.os.Handler.handleCallback(Handler.java:605)
10-16 11:50:27.778: E/AndroidRuntime(18255):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-16 11:50:27.778: E/AndroidRuntime(18255):    at android.os.Looper.loop(Looper.java:137)
10-16 11:50:27.778: E/AndroidRuntime(18255):    at android.app.ActivityThread.main(ActivityThread.java:4697)
10-16 11:50:27.778: E/AndroidRuntime(18255):    at java.lang.reflect.Method.invokeNative(Native Method)
10-16 11:50:27.778: E/AndroidRuntime(18255):    at java.lang.reflect.Method.invoke(Method.java:511)
10-16 11:50:27.778: E/AndroidRuntime(18255):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
10-16 11:50:27.778: E/AndroidRuntime(18255):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
10-16 11:50:27.778: E/AndroidRuntime(18255):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:43:45.973

由于另一个stackoverflow用户，我遇到了这个问题并解决了它。我没有找到答案，所以我会在这里发布：

如果您的布局看起来像这样：

```
<LinearLayout
android:id="@+id/yourcontainer"
...>

more objects

</LinearLayout> 
```

在您的 onDestroy 方法中，您应该像这样取消绑定所有可绘制对象：

```
@Override
protected void onDestroy() {
    super.onDestroy();
    unbindDrawables(findViewById(R.id.yourcontainer));
}

private void unbindDrawables(View view) {
    if (view == null)
        return;
    if (view.getBackground() != null)
    view.getBackground().setCallback(null);
    if (view instanceof ViewGroup) {
    for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
            unbindDrawables(((ViewGroup) view).getChildAt(i));
    }
    try {
        ((ViewGroup) view).removeAllViews();
    } catch (UnsupportedOperationException mayHappen) {
        Log.e("Error:", mayHappen.getMessage());
        }
    }
} 
```

# r - 如何以png为背景进行绘图？

> ID：12918367
> 
> 赞同：39
> 
> 时间：2011-03-11T17:50:19.530
> 
> 标签：r, data-visualization, large-data

我制作了一个 300 万点的图并将其保存为 PNG。花了几个小时，我想避免重新绘制所有点。

![在此处输入图像描述](../Images/0f2caac7db335ad558abd45c69d65557.png)

如何生成以该 PNG 为背景的新图？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2011-03-11T20:07:36.363

试试这个：

```
library(png)

#Replace the directory and file information with your info
ima <- readPNG("C:\\Documents and Settings\\Bill\\Data\\R\\Data\\Images\\sun.png")

#Set up the plot area
plot(1:2, type='n', main="Plotting Over an Image", xlab="x", ylab="y")

#Get the plot information so the image will fill the plot box, and draw it
lim <- par()
rasterImage(ima, lim$usr[1], lim$usr[3], lim$usr[2], lim$usr[4])
grid()
lines(c(1, 1.2, 1.4, 1.6, 1.8, 2.0), c(1, 1.3, 1.7, 1.6, 1.7, 1.0), type="b", lwd=5, col="white") 
```

下面是剧情。

![在此处输入图像描述](../Images/bc94a51e9d78bc53315b8ea6e64f7bd2.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-16T08:01:01.490

虽然@bill_080 的回答直接回答了您的问题，但这真的是您想要的吗？如果你想在上面绘制，你必须仔细对齐你的坐标系。例如，请参阅[休斯顿犯罪地图](https://github.com/hadley/ggplot2/wiki/Crime-in-Downtown-Houston,-Texas-:-Combining-ggplot2-and-Google-Maps)如何使用 ggplot2 完成此操作。

对于您的问题，在我看来，可能有一个更简单的解决方案：分箱，即 ceating 2d histograms。

```
> df <- data.frame (x = rnorm (1e6), y = rnorm (1e6))
> system.time (plot (df))
       User      System verstrichen 
     54.468       0.044      54.658 
> library (hexbin)
> system.time (binned <- hexbin (df, xbins=200))
       User      System verstrichen 
      0.252       0.012       0.266 
> system.time (plot (binned))
       User      System verstrichen 
      0.704       0.040       0.784 
```

![在此处输入图像描述](../Images/2c31da51ec902d2047d1cb33dd31e31a.png)

hexbin 直接与 lattice 和 ggplot2 一起使用，但 bin 的中心坐标位于`binned@xcm`和中`binned@ycm`，因此您也可以在基本图形中绘制结果。使用大量垃圾箱，您可以获得原始绘图的快速版本：

```
> system.time (plot (binned@xcm, binned@ycm, pch = 20, cex=0.4))
       User      System verstrichen 
      0.780       0.004       0.786 
```

![在此处输入图像描述](../Images/3279aaa39200b755846a0e928f841a02.png)

但是你可以很容易地用颜色来编码密度：

```
> plot (binned@xcm, binned@ycm, pch = 20, cex=0.4, col = as.character (col))

> col <- cut (binned@count, 20)
> levels (col) <- grey.colors (20, start=0.9, end = 0)
> plot (binned@xcm, binned@ycm, pch = 20, cex=0.4, col = as.character (col)) 
```

![在此处输入图像描述](../Images/1f7b69fe0fac74b325c3c0116ac09b91.png)

# batch-file - 批量查找特殊字符

> ID：12918374
> 
> 赞同：0
> 
> 时间：2012-10-16T15:37:37.660
> 
> 标签：batch-file, find

我有以下文件 repoinfo.tmp：

```
Revisión: 7 //(7 or any number) 
```

我想找到数字 7 以创建增量备份

我的代码是：

```
SET LAST_REV=

for /f "usebackq tokens=1,2 delims=: " %%i in 
```

( `find "Revision: " "%TEMP%\repoinfo.tmp"`) 做 (

```
SET LAST_REV=%%j

) 
```

问题是我的输出是西班牙语和字符 ó 产生问题，也许我应该尝试使用 findstr 或正则表达式......

该文件完全包含：我只是获取comans输出并通过管道保存它。这就是为什么 out 不是 'ó'

```
Ruta: hardware
URL: http://localhost:800/hardware
Ra¡z del repositorio: http://localhost:800/hardware
UUID del repositorio: fc0eaf3c-dae0-114c-8de9-14799a96cf30
Revisi¢n: 8
Tipo de nodo: directorio
Autor del £ltimo cambio: ruben
Revisi¢n del £ltimo cambio: 8
Fecha de £ltimo cambio: 2012-10-16 17:26:39 +0200 (mar 16 de oct de 2012) 
```

我更改了我的代码，现在它可以工作了，在 find 参数中我写了“Revisi¢n”并且它可以工作。

```
for /f "usebackq tokens=1,2 delims=: " %%i in 
```

( `find "Revisi¢n: " "%TEMP%\repoinfo.tmp"`) 做 (

```
 SET LAST_REV=%%j

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:43:07.497

根据您提供的信息，我建议使用带有 findstr 的正则表达式。让我知道以下代码的输出是否是您要查找的内容：

```
SET LAST_REV=
for /f "usebackq tokens=1,2 delims=: " %%i in (`findstr /brc:"Revisi.n: ." "%TEMP%\repoinfo.tmp"`) do (
SET LAST_REV=%%j
) 
```

# java - PreparedStatement 将没有时间信息的 java.util.Date 和 java.sql.Date 设置为 Mysql dateTime 列

> ID：12918385
> 
> 赞同：2
> 
> 时间：2012-10-16T15:38:03.447
> 
> 标签：java, mysql

为什么`java.sql.PreparedStatement#setDate`dateTime mysql 列上的结果总是像`2012-10-16 00:00:00` 没有时间信息的日期格式？我将 Date 存储在这样的循环中：

```
protected Date getIncrementedDateTime() {
    additionalTime += 1000;
    return new Date(System.currentTimeMillis() + additionalTime);
}

preparedStatement.setDate(j, new java.sql.Date(getIncrementedDateTime().getTime()); 
```

我调试了这些值，但 mysql 数据库总是有 2012-10-16 00:00:00 值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T15:41:06.537

根据以下文档[`java.sql.Date`](http://docs.oracle.com/javase/7/docs/api/java/sql/Date.html)：

> 一个围绕毫秒值的瘦包装器，允许 JDBC 将其识别为 SQL DATE 值。[...]
> 
> 为了符合 SQL DATE 的定义，由 java.sql.Date 实例包装的毫秒值必须通过在实例关联的特定时区中将小时、分钟、秒和毫秒设置为零来“规范化” .

基本上，对于日期时间列，您可能应该使用不同的类型，例如[`Timestamp`](http://docs.oracle.com/javase/7/docs/api/java/sql/Timestamp.html). （这在其他方面并不理想，但它可能更适合......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:41:15.943

java.sql.Date 只是一个日期——没有时间。不要将它与包含时间信息的 java.util.Date 混淆。您可能想查看 java.sql.Timestamp。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T15:44:12.987

它基于表列的数据类型。尝试使用`TimeStamp`或`Time`根据数据库服务器。

# objective-c - 为什么我在提供 getter 和 setter 时需要写 @synthesize？

> ID：12918388
> 
> 赞同：9
> 
> 时间：2012-10-16T15:38:21.577
> 
> 标签：objective-c, properties, synthesize

所以属性的自动合成很棒。但是，当您同时提供 getter 和 setter 时，会出现错误。

```
@property (strong, nonatomic) NSArray *testArray;

- (NSArray *)testArray {
    return _testArray;
}

- (void)setTestArray:(NSArray *)testArray {
    _testArray = testArray;
} 
```

错误：`Use of undeclared identifier '_testArray'`。

添加`@synthesize testArray = _testArray;`解决问题。我只是想知道这是为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T15:44:37.520

当您同时提供 getter 和 setter 时，通常根本不需要实例变量，即当您只是转发这些消息或将数据存储在其他地方时。

一旦缺少其中一个，就需要 ivar 来合成该功能。

如果我没记错的话，对于只读属性，模拟假设也成立。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-16T15:56:16.130

在最新的编译器/运行时下，当您使用

```
@synthesize testArray = _testArray; 
```

编译器创建

*   一个`_testArray`ivar，*如果*它不存在；
*   一个`testArray`方法，*如果*你还没有实现它；
*   一个`setTestArray:`方法，*如果*你还没有实现它。

如果你使用

```
@synthesize testArray; 
```

`testArray`如果 ivar 不存在，编译器会创建一个ivar，而不是`_testArray`.

如果您不使用`@synthesize`，并且依赖自动合成，`_testArray`则仅在（两者都必须应用）时创建 ivar

*   `_testArray`尚不存在；
*   至少已经合成了一种方法（getter for `readonly`、getter 和/或 setter for `readwrite`）。

在您的示例中，您已经实现了所有方法，因此自动合成不会合成任何方法，因此它不会创建 ivar。您可以`_testArray`自己声明 ivar，也可以像以前那样使用显式综合。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-19T08:59:14.733

我做了一些测试：

在最近的 Objective-c 约定下，您不需要综合属性。

如果你这样做

```
@property (strong, nonatomic) Business* theBiz; 
```

iOs 会自动创建一个名为 _theBiz 的私有 ivar 变量；

如果您只实现一个 getter 或一个 setter，它似乎工作得很好：

```
-(void)setTheBiz:(Business *)theBiz
{
    _theBiz = theBiz;
} 
```

但是，如果您声明 BOTH，即使其中之一只是空函数，您也会收到编译错误。

```
-(void)setTheBiz:(Business *)theBiz
{
    _theBiz = theBiz;
}

-(Business *) theBiz
{

} 
```

当你同时实现 getter 和 setter 时，你会得到一个编译错误，说没有 _theBiz 这样的东西。

通过添加以下内容可以轻松解决此问题：

```
@synthesize theBiz = _theBiz; 
```

但这破坏了Objective-c这个令人敬畏的新特性的全部意义。

我想知道这是设计使然还是我只是遗漏了一些东西。苹果的东西是什么？

我最好的猜测是这是一个错误。

纪尧姆的回答没有解决这个事实。

他说过

> **至少**已经合成了一种方法

**如果只**设置了 getter 或 setter 之一，似乎就会创建 _theBiz 。当**两者**都设置时，它不再被创建，这一定是一个错误。事实上，根本不需要设置任何变量，仍然会创建 ivar。

解决这个问题的唯一方法是明确地做

```
@synthesize theBiz = _theBiz; 
```

# list - List ::: 运算符和++之间的区别

> ID：12918392
> 
> 赞同：25
> 
> 时间：2012-10-16T15:38:39.213
> 
> 标签：list, scala, operators

`:::`scala和`++`operator有什么区别？根据[文档](http://www.scala-lang.org/api/current/scala/collection/immutable/List.html)，行为是相同的。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-16T15:44:49.980

他们做同样的事情，除了`++`可以与任何一起使用`Traversable`并且`:::`只能与列表一起使用。此外，以 结尾的方法`:`在右侧的对象上调用，因此`:::`' 的参数是前缀，而`++`' 的参数是后缀。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-16T16:36:51.933

行为是相同的。不同之处在于他们接受的类型。

`:::`只接受一个`List`. `++`接受是一系列类型，`[B >: A, That]`意思是`++`接受一个类型，其下限是`List`，上限是`GenTraversableOnce[B]`，类型介于两者之间。

因此，在类型层次图中，扩展 trait`GenTraversableOnce`并且是超类型的类`List`是有效的

![列表类型层次结构](../Images/63578e5b87f623be51aca163f7c30afe.png)

使用 List 和 LinkedList 的示例显示此行为：

```
scala> val l = List(1,2,3)
l: List[Int] = List(1, 2, 3)

scala> val l2 = List(4,5,6)
l2: List[Int] = List(4, 5, 6)

scala> l ++ l2
res0: List[Int] = List(1, 2, 3, 4, 5, 6)

scala> l ::: l2
res1: List[Int] = List(1, 2, 3, 4, 5, 6)

scala> import scala.collection.mutable.LinkedList
import scala.collection.mutable.LinkedList

scala> val ll = LinkedList(1,2,3)
ll: scala.collection.mutable.LinkedList[Int] = LinkedList(1, 2, 3)

scala> ll ++ l2
res2: scala.collection.mutable.LinkedList[Int] = LinkedList(1, 2, 3, 4, 5, 6)

scala> ll ::: l2
<console>:11: error: type mismatch;
found   : scala.collection.mutable.LinkedList[Int]
required: List[?]
          ll ::: l2 
```

另外，请参阅 Kim 关于关联性的说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:53:21.923

@lukas，这篇文章也可能有用。[如何从 Scala API for List 解释 :::？](https://stackoverflow.com/questions/12904505/how-to-interpret-from-the-scala-api-for-list/12911919#12911919) 其他人对该帖子（我的）中的问题给出的答案有助于理解 ::: 方法的作用，尽管它没有与 ++ 方法进行对比。但我认为包括这个可能会有所帮助。

# perl - 找到一个数字并增加它

> ID：12918393
> 
> 赞同：2
> 
> 时间：2012-10-16T15:38:39.297
> 
> 标签：perl

我想创建一个小的 perl 脚本，它会在 c++ 标头中找到某个声明来修改它。到目前为止，我已经能够创建“查找”部分：

```
my $buildFile = "..\\Support\\BuildVersion.h";

my @result;
open( File, $buildFile ) or die "Can't open $buildFile.\n";
@result = <File>;
close( File );

print "Updating build version...\n";

open( NEWFOUT, ">", "$buildFile" ) or die "Can't open $buildFile.\n";
foreach( @result )
{
    print $_;
    if( $_ =~ m/#define BUILD_COUNT [0-9]+/ig )
    {
        $_ =~ s/$_/#define BUILD_COUNT 77/;

    }
}
print NEWFOUT @result;
close( NEWFOUT ); 
```

所以在我的 c++ 文件中，我有这个名为`BUILD_COUNT`. 我想在每次构建我的解决方案之前调用这个脚本，以便它将后面的值增加 1 `BUILD_COUNT`。我怎么能那样做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T15:50:33.613

单行应该就足够了。

```
perl -i -pe 's/#define BUILD_COUNT \K(\d+)/$1 + 1/e' yourfile 
```

在没有备份的情况下使用 -i 开关是危险的，但我觉得这就是你想要的。为了更安全，但不完整，请使用`-i.bak`.

-p 开关将打开并读取参数文件，替换运算符上的 /e 选项将导致在插入替换表达式之前对其进行评估。逃跑将导致它之前的`\K`任何东西被保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:51:10.773

使用括号将版本捕获到 $1 并在打印前递增

```
if( $_ =~ m/#define BUILD_COUNT ([0-9]+)/ig )
{
    my $v = $1 + 1;
    $_ =~ s/$_/#define BUILD_COUNT $v/;

} 
```

# jquery - 使用 jquery 文件上传插件从服务器获取文本响应

> ID：12918395
> 
> 赞同：3
> 
> 时间：2012-10-16T15:38:45.803
> 
> 标签：jquery, file-upload, jquery-callback

我的服务器返回一个简单的字符串，我想提醒它并附加到一个 div 中。所以我在[jquery 文件上传中执行以下操作](https://github.com/blueimp/jQuery-File-Upload/wiki/API)

```
$('#fileupload').fileupload({
    dataType: 'text',
    done: function (data) {
        alert(data)
       $('#result').html(data); 
    }
}); 
```

我也尝试过这种变化

```
$('#fileupload').fileupload({
    dataType: 'html',
    done: function (e, data) {
        alert(data)
       $('#result').html(data); 

    }
}); 
```

但是，警报显示`'Object'`并且`#result`div 不会随响应更新。我已经看到使用 firebug 的响应，他的响应确实来自服务器，它只是一个字符串。

**更新**

经过一些调试后，我发现这段代码工作正常，但不确定这是否是最好的方法。

```
$('#fileupload').fileupload({
    dataType: 'text',
    done: function (e, data) {
        console.log("done", data.result);
       $('#result').html(data.result); 

    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:47:00.937

如果您使用 FireBug for Firefox 或 Chrome，请按 F12 并在`debugger;`语句之前放置一个`alert`语句。
Javascript 调试器（其中任何一个）将在此行暂停，以便您可以探索`data`变量的值。它似乎是一个结构，而不仅仅是纯文本。

# django - 具有正确输入值的字段的 mongo 引擎更新命令

> ID：12918401
> 
> 赞同：0
> 
> 时间：2012-10-16T15:39:15.367
> 
> 标签：django, mongodb, mongoengine

我有必须更新许多记录的情况。但问题是我必须更新那些有一些变量作为输入的字段。如果任何传入字段都没有，那么它不应覆盖其现有的数据库值。

```
new_code = None
new_type = "new values"

user.objects(query).update(set__type=new_type ,set__code=new_code) 
```

上面的查询返回 10 条记录，但我只想更新类型，因为它有一个值。但代码值不应在 db 中更新。因为它的变量是无（来自用户输入表单）

我必须做一些 if else 条件

在 db 中，我有 type=old,code=111 之类的记录，因为 new_code 没有作为输入出现，因此它应该只更新 type 并且 db 应该看起来像 type = new values ，code = 111

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:30:26.867

您需要在更新之前清理用户输入 - None 是要存储的有效数据类型和值。

由于这些只是 kwargs，您可以构建一个您想要更新的字典：

```
update = {}
if new_type:
    update['set__new_type' = new_type
if new_code:
    update['set__new_code' = new_code

user.objects(query).update(**update) 
```

# sencha-touch-2 - Native iOS Sencha 2 build - 我们可以动态更新应用程序吗

> ID：12918404
> 
> 赞同：0
> 
> 时间：2012-10-16T15:39:27.700
> 
> 标签：sencha-touch-2

Native iOS Sencha 2 build - 我们是否可以像从 Web 下载它时那样动态更新应用程序，还是每次都需要向 iTunes 提交一个新应用程序？

[http://docs.sencha.com/touch/2-0/#!/guide/native_packaging](http://docs.sencha.com/touch/2-0/#!/guide/native_packaging)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:19:55.080

如果您不想通过 iTunes 推送更新，您可以使用 3rd 方服务，例如：[https](https://testflightapp.com/sdk/live/) ://testflightapp.com/sdk/live/以 OTA 方式分发您的更新

# c# - 无法打开路径中有空格的 DBF

> ID：12918405
> 
> 赞同：1
> 
> 时间：2012-10-16T15:39:30.903
> 
> 标签：c#

当目录名称中没有空格时使用以下作品

对于字符串file1，它将使用字符串file2执行reader，它会创建一个异常吗？对于我们的一些客户，我需要访问路径中有空格的文件夹。

```
file1 = "C:\\test1\\file.dbf";
file2 = "C:\\test 2\\file.dbf";

OdbcConnection Connection = new OdbcConnection();
Connection.ConnectionString = @"Driver={Microsoft Visual FoxPro Driver};Exclusive=No;SourceType=DBF;SourceDB=" + strFilename + ";";
Connection.Open();

OdbcCommand Command = Connection.CreateCommand();
Command.CommandText = @"SELECT * FROM " + file1; //Command.CommandText = @"SELECT * FROM " + file2; 
```

一旦执行 Connection.Open(); 它正确打开它，

一旦我们执行 OdbcDataReader Reader = Command.ExecuteReader();

我得到*{System.Data.Odbc.OdbcException: ERROR [42S02] [Microsoft][ODBC Visual FoxPro Driver]File 'file2.dbf' 不存在。*

* * *

回答，因为我没有足够的代表

感谢大家对我的问题的解决方案的贡献。该解决方案要求我放置完整路径（其中有一个空格）并使用 @ char 使其成为文字字符串。出于某种原因，通过使用转义字符（“\””）加上引号使其文字化并没有解决它。

总之，我在连接字符串和命令字符串中的路径前面使用了@。

```
strFilename = S.ImportFolder + "\\" +"file"+ ".dbf";

OdbcConnection Connection = new OdbcConnection();
Connection.ConnectionString = @"Driver={Microsoft Visual FoxPro Driver};Exclusive=No;SourceType=DBF;SourceDB="+@strFilename+";";
Connection.Open();

OdbcCommand Command = Connection.CreateCommand();
Command.CommandText = @"SELECT * FROM "+ @strFilename;

OdbcDataReader Reader = Command.ExecuteReader(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T15:42:24.463

您是否已经尝试将路径放入引号中？

```
Connection.ConnectionString = @"Driver={Microsoft Visual FoxPro Driver};Exclusive=No;SourceType=DBF;SourceDB=""" + strFilename + """;"; 
```

# hsqldb - HSQLDB 对象名称已存在

> ID：12918407
> 
> 赞同：10
> 
> 时间：2012-10-16T15:39:47.783
> 
> 标签：hsqldb

我正在尝试使用版本 2.2.9、Hibernate 3.6.9 和 Spring 3.1.2 设置 HSQL 数据库进行测试。我们一直在使用本地 postgresql 数据库，但正在切换以进行测试。我有 40-50 个测试课程，总共有 200 多个测试。如果从 Eclipse 单独运行，每个测试类都可以正常工作。当我使用 Maven 编译和测试所有内容时，我遇到了测试错误。在某些时候，它似乎试图再次运行我的 init.sql 脚本并再次创建表。我将此作为我的最终原因：

```
Caused by: org.hsqldb.HsqlException: object name already exists: DUAL_ASSET_ASSETID_SEQ
at org.hsqldb.error.Error.error(Unknown Source)
at org.hsqldb.error.Error.error(Unknown Source)
at org.hsqldb.SchemaObjectSet.checkAdd(Unknown Source)
at org.hsqldb.SchemaManager.checkSchemaObjectNotExists(Unknown Source)
at org.hsqldb.StatementSchema.setOrCheckObjectName(Unknown Source)
at org.hsqldb.StatementSchema.getResult(Unknown Source)
at org.hsqldb.StatementSchema.execute(Unknown Source)
at org.hsqldb.Session.executeCompiledStatement(Unknown Source)
at org.hsqldb.Session.executeDirectStatement(Unknown Source)
at org.hsqldb.Session.execute(Unknown Source) ... 52 more 
```

我在创建该表时尝试使用“如果不存在”，但是当我去创建序列时，我得到了同样的错误。所以它试图做的不仅仅是一张表，而且我不能在 CREATE SEQUENCE 语句上使用“IF NOT EXISTS”，所以我被困在那里。

我的数据似乎再次加载有什么原因吗？我也偶尔会收到此错误：

```
2012-10-16 10:55:48,489 [Thread-0] WARN
org.springframework.jdbc.datasource.embedded.HsqlEmbeddedDatabaseConfigurer:shutdown:46 - Could not shutdown embedded database java.sql.SQLException: Database lock acquisition failure: attempt to connect while db opening /closing
at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
at org.hsqldb.jdbc.JDBCConnection.<init>(Unknown Source)
at org.hsqldb.jdbc.JDBCDriver.getConnection(Unknown Source)
at org.hsqldb.jdbc.JDBCDriver.connect(Unknown Source)
at org.springframework.jdbc.datasource.SimpleDriverDataSource.getConnectionFromDriver(SimpleDriverDataSource.java:140)
at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:149)
at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnection(AbstractDriverBasedDataSource.java:119)
at org.springframework.jdbc.datasource.embedded.AbstractEmbeddedDatabaseConfigurer.shutdown(AbstractEmbeddedDatabaseConfigurer.java:40)
at org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactory.shutdownDatabase(EmbeddedDatabaseFactory.java:152)
at org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactoryBean.destroy(EmbeddedDatabaseFactoryBean.java:65)
at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:211)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:498)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:474)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:442)
at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1071)
at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1045)
at org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:963) Caused by: org.hsqldb.HsqlException: Database lock acquisition failure: attempt to connect while db opening /closing at org.hsqldb.error.Error.error(Unknown Source)
at org.hsqldb.error.Error.error(Unknown Source)
at org.hsqldb.error.Error.error(Unknown Source)
at org.hsqldb.DatabaseManager.getDatabase(Unknown Source)
at org.hsqldb.DatabaseManager.newSession(Unknown Source) ... 16 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-09T17:20:47.830

当前版本的 HSQLDB 允许 CREATE SEQUENCE IF NOT EXISTS 语句。

或者，对于测试，您可以在创建任何对象之前简单地删除 PUBLIC 模式的全部内容。

```
DROP SCHEMA PUBLIC CASCADE 
```

# java - 如何更改 package-info.java 内容

> ID：12918409
> 
> 赞同：3
> 
> 时间：2012-10-16T15:39:56.573
> 
> 标签：java, jax-ws, xml-namespaces

简单的问题，但我整天都在敲我的头。JAX-WS Web 服务，从第三方 WSDL 生成。内容是这样的：

```
@javax.xml.bind.annotation.XmlSchema(namespace = "http://foo.it/bar",
elementFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED)
package it.foo.bar.webservice.generated; 
```

网络服务工作，输出产生如下：

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
 <S:Body>
   <response xmlns="it.foo.bar.bean">
     <result> 
```

问题是使用 Web 服务的客户端，需要这样的响应：

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
 <S:Body>
   <ns:response xmlns:ns="it.foo.bar.bean">
     <ns:result> 
```

**如果我手动将XmlNs**注释添加到 package-info ：

```
@javax.xml.bind.annotation.XmlSchema(namespace = "http://foo.it/bar", xmlns = {
@javax.xml.bind.annotation.XmlNs(namespaceURI = "it.foo.bar.bean", prefix = "sms")
}, elementFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED)
package it.foo.bar.webservice.generated; 
```

响应按预期生成。有没有办法只使用 wsimport 或一些 jaxb 绑定或其他方式来实现相同的结果？我很确定有比每次都覆盖 package-info.java 更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:11:56.990

这是一个已知问题：http: [//java.net/jira/browse/JAXB-818](http://java.net/jira/browse/JAXB-818)

随意投票、评论和/或提供修复。

# iphone - 使用仅 iPad 组件的通用应用程序的正确设计模式是什么？

> ID：12918416
> 
> 赞同：0
> 
> 时间：2012-10-16T15:40:30.083
> 
> 标签：iphone, objective-c, ios, ipad, ios-universal-app

我正在为仅限 iPad 的应用程序添加通用支持。第一个屏幕有一个视图，其中包含一个用于访问应用程序设置的按钮。目前，在仅限 iPad 的版本中，设置出现在 UIPopoverView 中，而 UIPopoverController 是应用程序视图控制器的属性。在 iPhone 版本中，它应该使用模态弹出窗口，但问题是如何分解视图控制器和现在的视图。

```
@interface ClientSelectionController : UIViewController <UISearchBarDelegate, UIAlertViewDelegate>
{
@private
    UIPopoverController *settingsPopover;
}

-(IBAction)btnSettingsTouchedDown:(id)sender;
@end 
```

我应该为控制器创建两个不同的视图类，并使 UIPopoverController 成为 ClientSelectionView_iPad 版本的子级，还是应该创建两个不同版本的 ClientSelectionController，一个带有 UIPopover，另一个带有模态弹出窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:45:39.910

您首先会了解您使用的是哪种设备

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
//iphone
    } else {
//ipad
    } 
```

然后分别调用 popover/modal

通常虽然你会有 2 个 xib 文件到一个视图控制器。iphone 一个xib 一个ipad 因为分辨率不同

# c# - Multithreaded transaction aborts with entity framework

> ID：12918421
> 
> 赞同：2
> 
> 时间：2012-10-16T15:40:52.760
> 
> 标签：c#, entity-framework-4, threadpool, transactionscope

I have a problem with multithreaded transaction and entity framework. I have a thread, which operates in transaction and I would like to have a few more worker threads working within same transaction. The following code illustrates situation (there is one dummy entity in EF context, the code basically spawns 5 threads, I would like to insert some entities within each thread and at the end in main thread, I would like to continue working with DB, but to keep whole process isolated in ONE transaction):

```
using(var scope = new TransactionScope())
{
    int cnt = 5;
    ManualResetEvent[] evt = new ManualResetEvent[cnt];

    for(int i = 0; i < cnt; i++)
    {
        var sink = new ManualResetEvent(false);
        evt[i] = sink;

        var tr = Transaction.Current.DependentClone(
            DependentCloneOption.BlockCommitUntilComplete);

        Action run = () =>
        {
            using (var scope2 = new TransactionScope(tr))
            {
                using (var mc = new ModelContainer())
                {
                    mc.EntitySet.Add(new Entity()
                    {
                        MyProp = "test"
                    });
                    mc.SaveChanges();
                }
            }

            sink.Set();
        };

        ThreadPool.QueueUserWorkItem(r => run());
    }

    ManualResetEvent.WaitAll(evt);

    using (var mc = new ModelContainer())
    {
        Console.WriteLine(mc.EntitySet.Count());
    }
    Console.ReadKey();
} 
```

The problem is, that exception is thrown on mc.SaveChanges();. Inner exception is TransactionException: "The operation is not valid for the state of the transaction." It seems that at some point, transaction is aborted. I think it is after first thread calls SaveChanges(), but Im not sure. Any idea why transaction is aborted?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:34:12.303

I discovered what was the problem happening here. Based on [this article](http://www.b10g.dk/2007/09/07/dependenttransaction-and-multithreading/ "article"), I found that it is impossible to work with two MSSQL server connections within one transaction at the same time. I also discovered that I was not properly handling dependent transaction in previous code. My working illustration code follows:

```
 class Context
    {
        public ManualResetEvent sink;
        public DependentTransaction transaction;
    }

    static object syncRoot = new object();

    static void Main(string[] args)
    {
        using (var scope = new TransactionScope())
        {
            int cnt = 5;
            ManualResetEvent[] evt = new ManualResetEvent[cnt];

            for (int i = 0; i < cnt; i++)
            {
                var sink = new ManualResetEvent(false);
                evt[i] = sink;

                var context = new Context()
                {
                    // clone transaction
                    transaction = Transaction.Current.DependentClone(DependentCloneOption.BlockCommitUntilComplete),
                    sink = sink
                };

                ThreadPool.QueueUserWorkItem(new WaitCallback(Run), context);
            }

            // wait for all threads to finish
            ManualResetEvent.WaitAll(evt);

            using (var mc = new ModelContainer())
            {
                // check database content
                Console.WriteLine(mc.EntitySet.Count());
            }

            // after test is done, the transaction is rolled back and the database state is untouched
            Console.ReadKey();
        }
    }

    static void Run(object state)
    {
        var context = state as Context;

        // set ambient transaction
        Transaction oldTran = Transaction.Current;
        Transaction.Current = context.transaction;

        using (var mc = new ModelContainer())
        {
            mc.EntitySet.Add(new Entity()
            {
                MyProp = "test"
            });

            // synchronize database access
            lock (syncRoot)
            {
                mc.SaveChanges();
            }
        }

        // release dependent transaction
        context.transaction.Complete();            
        context.transaction.Dispose();

        Transaction.Current = oldTran;

        context.sink.Set();            
    }
} 
```

It is probably not very nice way of writing multithreaded bussiness layer, but this shared transaction approach is WERY useful for testing in my case. The only modification need to make this work is to override Db context and synchronize save method in test runs.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:52:12.677

A SqlConnection is not thread-safe (and an EF ObjectContext/DbContect isn't thread-safe as well), so this will only work when you synchronize the access to the context and connection. You coming up with a model where you process the CPU intensive stuff in parallel and write all changes in one thread after all threads have finished.

# android - 空指针异常 EditText - Android

> ID：12918427
> 
> 赞同：1
> 
> 时间：2012-10-16T15:41:14.483
> 
> 标签：android, dialog, nullpointerexception, android-edittext

我试图用一个对话框提示用户，该对话框包含两个 EditText 框，一个正面和负面按钮。我遇到的问题是尝试从 EditText 框中检索值时出现空指针异常。这是我的代码，

```
 LinearLayout layout = new LinearLayout(context);
            layout.setOrientation(LinearLayout.VERTICAL);

            LayoutInflater inflater = LayoutInflater.from(context);
            AlertDialog.Builder builder = new AlertDialog.Builder(context);
            builder.setTitle("New Location");
            builder.setView(inflater.inflate(R.layout.new_location_dialog, null)); 

            final EditText titleBox = (EditText)findViewById(R.id.title);
            final EditText descriptionBox = (EditText)findViewById(R.id.description);             

            builder.setPositiveButton("Save", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int button) {

                    String title = titleBox.getText().toString();
                    String description = descriptionBox.getText().toString();
                    Log.d("User Setting title / description to: ", title + " : " + description);

                    //Add new Point to Map
                    addGeoPointToMap(mapOverlays,longpressLocation,title, description);    

                    return;
                }
            });

            builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    Log.d("Cancel setting Title & adding point","");
                    return;
                }
            });
            builder.show(); 
```

如果有人能帮我一把，我将不胜感激！此外，如果有人可以解释在整个应用程序中处理多个对话框的最佳约定是什么，则加分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T15:46:26.177

您没有正确引用 EditText 对象。

执行以下操作，它将起作用：

```
View v = inflater.inflate(R.layout.new_location_dialog, null);
builder.setView(v); 

//here is your mistake:

final EditText titleBox = (EditText)v.findViewById(R.id.title);
final EditText descriptionBox = (EditText)v.findViewById(R.id.description); 
```

# javascript - 仅从 Google Maps API 获取要自动完成的国家/地区

> ID：12918431
> 
> 赞同：14
> 
> 时间：2012-10-16T15:41:21.890
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在使用 Google Maps API 来获取城市和国家/地区的自动完成列表（没有其他详细信息），并且效果很好。

```
var input = document.getElementById('newAddress');
    var options = {
        types: ['(cities)']
    };

    autocomplete = new google.maps.places.Autocomplete(input, options); 
```

现在我想做完全相同的事情，但只获得国家名称。类似于替换`types: ['(cities)']` 为 `types: ['(countries)']`...
（我尝试过但没有用）

我应该怎么做才能只让国家进入我的自动完成功能？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-06-10T15:52:53.130

我一直在使用 Google Autocomplete API，这是我能找到的将您的结果仅限于国家/地区的最佳解决方案：

```
var autocomplete = new google.maps.places.Autocomplete(input, options);
var result = autocomplete.getPlace();
console.log(result); // take a look at this result object
console.log(result.address_components); // a result has multiple address components

for(var i = 0; i < result.address_components.length; i += 1) {
  var addressObj = result.address_components[i];
  for(var j = 0; j < addressObj.types.length; j += 1) {
    if (addressObj.types[j] === 'country') {
      console.log(addressObj.types[j]); // confirm that this is 'country'
      console.log(addressObj.long_name); // confirm that this is the country name
    }
  }
} 
```

如果您查看返回的结果对象，您会看到有一个 address_components 数组，其中包含代表地址不同部分的多个对象。在每个对象中，它将包含一个“类型”数组，在这个“类型”数组中，您将看到与地址相关的不同标签，包括国家标签。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-16T15:52:05.723

没有快速的解决方案，因为 Google 仅提供两种类型的集合：['(cities)'] 和 ['(regions)']

没有可用的 ['(国家)']。

此处的文档：[https ://developers.google.com/places/documentation/autocomplete#place_types](https://developers.google.com/places/documentation/autocomplete#place_types)

**编辑：**

您也可以使用来自以下网址的自动完成插件：[http ://www.geognos.com/api/en/countries/info/all.json](http://www.geognos.com/api/en/countries/info/all.json)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-30T10:44:29.277

这是我使用 python sdk 所做的事情，但它应该很容易翻译成任何其他 sdk，包括 JS：

```
import googlemaps

def country_search():
    gmaps = googlemaps.Client(key='Your-Key')

    # Country code is ISO standard, so it is easy to get country_name based on the code
    country_name, country_code = 'Bahamas', 'BS'

    # This limits the search for very few results
    result = gmaps.places_autocomplete(input_text=country_name, types='(regions)', components={'country': [country_code]})

    # There should be only one item that has type 'country' in `result`
    country = next(filter(lambda info: any(type == 'country' for type in info['types']), result))

    print(country["place_id"]) 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2017-03-10T07:34:52.687

```
<!DOCTYPE html>
<html>
<head>
<link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places"></script>
</head>
<body>
<div id="locationField">
<input id="autocomplete" placeholder="Enter your address" type="text"></input>
</div>
<div><pre><p id="data"></p></pre></div>
<script type=">
var autocomplete;
function initialize() {
autocomplete = new google.maps.places.Autocomplete(document.getElementById('autocomplete'),{ types: ['(cities)'] });
google.maps.event.addListener(autocomplete, 'place_changed', function() {
var address_components=autocomplete.getPlace().address_components;
var city='';
var country='';
for(var j =0 ;j<address_components.length;j++)
{
 city =address_components[0].long_name;
 if(address_components[j].types[0]=='country')
{
    country=address_components[j].long_name;
}
}
document.getElementById('data').innerHTML="City Name : <b>" + city + "</b> <br/>Country Name : <b>" + country + "</b>";
});
}
initialize();
</script>
</body>
</html> 
```

# ruby-on-rails - Instagram：取消标记照片删除

> ID：12918432
> 
> 赞同：0
> 
> 时间：2012-10-16T15:41:23.547
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, json, instagram

我们正在使用 Instagram API 来获取带有特定主题标签并实时显示的照片列表。使用 Rails 构建它。

我们的问题：当用户在不刷新浏览器的情况下取消标记照片时，如何构造一个查询，从显示的获取中删除照片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:57:56.293

`onclick`删除图像标签或将其显示设置为无

# asp.net-mvc-3 - 将用户信息传递给 MVC 控制器

> ID：12918435
> 
> 赞同：0
> 
> 时间：2012-10-16T15:41:41.853
> 
> 标签：asp.net-mvc-3

我正在研究在我的 MVC3 应用程序中实现身份验证的各种方法。我想使用自己的代码进行身份验证——类似于[Is it possible to create a Logon System with ASP.NET MVC but not use the MembershipProvider?](https://stackoverflow.com/questions/1438151/is-it-possible-to-create-a-logon-system-with-asp-net-mvc-but-not-use-the-members) *（我知道还有其他方法。）*我想知道，一旦我使用其中一种方法对用户进行身份验证，如何将用户信息获取到 Controller 构造函数。*（通过用户信息，我的意思是用户名或用户 ID）。*

我考虑的选项之一是将这些信息放入`Session`. 这行得通，但很难测试，因为我得到了`Session`在`Context`测试期间不存在的东西。

我将不胜感激有关如何将用户信息传递给控制器​​构造函数的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:01:00.043

不，不要使用 Session 进行身份验证。它不太安全，而且不稳定（会话可以被服务器随意销毁）。

在 MVC 中，您根本不需要使用成员资格，但是.. 我会强调但是... 正确地进行身份验证并不是一件容易的事。很容易出错，甚至没有意识到。即使你知道你在做什么。这是应该进行大量分析、测试、验证和重新分析的东西。

我建议，如果您不想扩展这项工作，您可能应该只使用默认提供程序（您可以选择几个）。

但无论如何，如果你决心自己做，你所需要的只是某种方式来验证用户。MVC 不像 WebForms 那样与成员资格提供程序集成。它使用它是为了方便。`AccountController`如果您查看创建 Internet 项目时为您生成的默认值，它所做的只是调用`Membership.VerifyUser()`.

真正重要的是 Authentication cookie 系统，它是 MS 以`FormsAuthentication`类的形式提供的。我非常强烈推荐使用它来管理 cookie，除非你真的真的真的知道你在做什么。

只要看一下`AccountController`，它应该很明显它是如何工作的。 `FormsAuthentication`是集成到应用程序中并告诉 asp.net 用户已经通过身份验证的部分。它使用安全、加密的 cookie，并且设计得很好（它甚至允许您以加密格式存储自己的附加数据）。

Forms Authentication 是一组共同工作以提供透明身份验证机制的类，并集成到 MVC 和 Asp.net WebForms 中。它们基本上是 IPrincipal 和 IIdentity 系统的实现，该系统是 asp.net 的组成部分（如果您键入`User.IsAuthenticated`它，则使用 IPrincipal 接口）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:52:31.487

在我原来的帖子中，我正在研究将用户信息传递给`Controller`构造函数。我不想`Controller`依赖`HttpContext`，因为这会使测试变得困难。

虽然我感谢**Mystere Man**的解决方案，但我希望以下替代解决方案对某人有所帮助。我有一个小项目*（大约十几个控制器）*，所以还不错。

我基本上创建了我的自定义`ControllerFactory`继承自`DefaultControllerFactory`：

```
public class MyCustomControllerFactory : DefaultControllerFactory
    {
        public MyCustomControllerFactory ()
        {
        }

        protected override IController GetControllerInstance(RequestContext requestContext, Type controllerType)
        {
            if (controllerType == null)
            {
                return null;
            }
            else
            {
                //Example of User Info - Customer ID
                string customerIDStr =  requestContext.HttpContext.Session["CustomerID"].ToString();
                int customerID = Int32.Parse(customerIDStr);

                //Now we create each of the Controllers manually
                if (controllerType == typeof(MyFirstController))
                {
                    return new MyFirstController(customerID);
                }
                else if (controllerType == typeof(MySecondController))
                {
                    return new MySecondController(customerID);
                }
                //Add/Create Controllers similarly
                else //For all normal Controllers i.e. with no Arguments
                {
                    return base.GetControllerInstance(requestContext, controllerType);
                }
            }
        }
    } 
```

然后我`ControllerFactory`在`Global.asax.cs` `Application_Start()`方法中设置。

```
protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            RegisterGlobalFilters(GlobalFilters.Filters);
            RegisterRoutes(RouteTable.Routes);

            ControllerBuilder.Current.SetControllerFactory(new MyCustomControllerFactory ());
        } 
```

**PS**我研究过使用像 Ninject 这样的 DI 容器，但我认为它们对于我当前的项目来说太复杂了。几个月后，当使用它们真的很有意义时，我会看看它们。

# google-app-engine - 如何实现 Django 嵌套表达式，或在表达式 {{ {{ expr }} }} 中评估表达式？

> ID：12918437
> 
> 赞同：1
> 
> 时间：2012-10-16T15:41:46.460
> 
> 标签：google-app-engine, django-templates

在 python 中，我在 django 模板中传递以下上下文：

```
{'expr': 'next_expr', 'next_expr': 'value'} 
```

在模板中，我正在尝试打印“价值”：

```
{{ {{ expr }} }} 
```

我知道上面的表达式行不通，但我想实现这样的目标：

```
{{ {{ expr }} }} ---> {{ next_expr }} ---> 'value' 
```

django 中是否有任何内置方法可以让我获得“价值”？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:05:42.213

`tmp`如果我理解正确并且 Python 对象作为变量传递：

```
tmp = {'expr': 'next_expr', 'next_expr': 'value'} 
```

你可以在 Jinja2 中做到这一点：

```
{{tmp[tmp['expr']]}} 
```

在 Django 中，我只能[找到](https://stackoverflow.com/a/1724201)类似的东西，但我认为这不是你想要的

```
{% for k, v in tmp.items %} 
  {{k}} - {{v}} |
{% endfor %} 
```

# jquery - jQuery如何为fadIn添加一个类？

> ID：12918444
> 
> 赞同：0
> 
> 时间：2012-10-16T15:42:18.520
> 
> 标签：jquery

当我将鼠标悬停时，`#PARENT` `div`此脚本会`highlight`向其添加/删除类。我想通过让这个类（颜色/背景-img真的）褪色来增加一些优雅，在这里我失败了，但为什么呢？

为您提供舒适的小提琴：http: [//jsfiddle.net/4y4vQ/1/](http://jsfiddle.net/4y4vQ/1/)

```
<div id=PARENT>
    <div id=CHILD>Content</div>
</div>​
<script>
$("#PARENT").hover(function () {
    $(this).fadeIn('slow', function() {
        $("#PARENT").toggleClass("highlight");
    });
});​
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T15:46:50.037

您可以使用 jQuery UI Switch 类，这将完全满足您的需求

[http://jqueryui.com/switchClass/](http://jqueryui.com/switchClass/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T15:49:26.630

像这样使用 CSS3 过渡：

```
#PARENT{
  padding: 5px 10px;
  background: white;
  -webkit-transition: background 0.3s ease;
  -moz-transition: background 0.3s ease;
  -o-transition: background 0.3s ease;
  transition: background 0.3s ease;
  }
#PARENT:hover {
  background: red;
  } 
```

这也不需要客户端进行大量处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T15:47:34.357

`fadeIn`不能那样工作。它将元素的不透明度从 0 更改为 1。由于您的元素已经可见，因此它什么也不做。您的 toggleClass 在回调中，因此动画一结束就会立即调用它。

您需要将自定义动画与`.animate`.

# perl - 使用 tcp 协议的 Perl ping

> ID：12918449
> 
> 赞同：0
> 
> 时间：2012-10-16T15:42:34.743
> 
> 标签：perl, networking, tcp, ping, icmp

我正在使用 perl 模块 Net::Ping 来 ping 一组远程主机。我使用的是默认协议，即 tcp 协议。我无法使用此协议 ping 1 台特定的远程机器。

Unix ping 工作正常，icmp 协议也是如此。

这次失败的原因可能是什么？我需要在主机上进行任何设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:20:50.427

可能是防火墙设置。ping-ish 的东西是通过 udp 和 icmp 完成的。为此目的，tcp 太过分了，所以他们可能会阻止它，假设客户端没有好处。

# apache-flex - ActionScript：在文件夹中搜索图像

> ID：12918450
> 
> 赞同：0
> 
> 时间：2012-10-16T15:42:38.903
> 
> 标签：apache-flex, actionscript, components, file-search, horizontallist

我在 mxml 中有一个组件，它接受一个字符串作为输入，并且必须在当前文件夹中使用该字符串搜索图像并在 Horizo​​ntalList 中显示图像。

有什么简单的方法可以做到这一点吗？我尝试附加字符串并查看绝对网址，但也不确定特定输入会有多少图像。

我当前的组件代码如下所示：

```
<s:Group ..>
  <fx:Declarations>
    <fx:String id="INPUT"/>
  <fx:Declarations>

    <fx:Script>
    <![CDATA[
      import ..;

      private var arrColl:ArrayCollection;
      private var arr:Array = [ "images/" + INPUT + "a.jpg", 
                                "images/" + INPUT + "b.jpg", .. ];
      private function initHList(items:Array):void
      {
        arrColl = new ArrayCollection(items);
        myList.dataProvider = arrColl;
      }
    ]]>
    </fx:Script>

  <mx:HorizontalList id="myList" .. columnCount="2" creationComplete="initHList(arr)"/>
</s:Group> 
```

我该怎么做才能使图像 url 更加动态并在水平列表中显示可变数量的图像（而不是上述情况下的常量 2）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:33:57.710

您应该创建一个执行实际搜索的服务器端方法，即将搜索短语作为参数传递，作为响应，您将获得序列化为 JSON 的图像 URL 数组，例如。然后您可以将 JSON 解析为 Array 并将其作为数据提供者分配给您的 Horizo​​ntalList 组件实例。好的，这里的重点是您无法在作为客户端应用程序的 Flex 中获取服务器上的文件列表。

# mysql - DATEDIFF 子查询在 mysql 中返回多于 1 行

> ID：12918451
> 
> 赞同：0
> 
> 时间：2012-10-16T15:42:39.707
> 
> 标签：mysql

使用以下查询的特定部分有问题`DATEDIFF`：

```
select 1 as NumApps, 
LenderInfo.Name as LenderName,
CASE WHEN ApplicationInfo.AEType IS NULL OR ApplicationInfo.AEType = 0 THEN 'Unknown' ELSECONCAT    (AEContact.FirstName, ' ', AEContact.LastName) END As AEName,
CASE WHEN b.createdby > 0 THEN CONCAT (contactinfo.firstname, ' ', contactinfo.lastname) END AS LogActionBy,
CASE WHEN ApplicationInfo.RecertificationById IS NULL THEN CASE WHEN ApplicationInfo.IsCorrespondent IS NULL OR ApplicationInfo.IsCorrespondent = 0 THEN 'Wholesale' ELSE 'Correspondent' END ELSE CASE WHEN ApplicationInfo.IsCorrespondent IS NULL OR ApplicationInfo.IsCorrespondent = 0 THEN 'Wholesale - Recert' ELSE 'Correspondent- Recert' END END As AppType,
Applicationinfo.SubmissionDate,
ApplicationInfo.ApplicationID,
b.status AS LogStatus,
b.CreatedOn as LogDate,
companyinfo.Name,
companyinfo.NMLSEntityID,
applicationinfo.CreatedDate,        
ApplicationInfo.Status as ApplicationStatus,
ApplicationInfo.StatusChangeDate,
DATEDIFF ((Select CreatedOn From ApplicationStatusChangeLog a where a.ApplicationId = b.ApplicationId
And a.status = 'Approved'),(Select CreatedOn From ApplicationStatusChangeLog a Where a.ApplicationId = b.ApplicationId And a.status = 'Pending Approval')) AS DaysToApprove
from applicationinfo 
INNER JOIN CompanyInfo ON(ApplicationInfo.CompanyId = CompanyInfo.CompanyId)
left join   CompanyInfo As LenderInfo ON (ApplicationInfo.LenderId = LenderInfo.CompanyId)
LEFT JOIN UserInfo ON (UserInfo.UserId = ApplicationInfo.LastModifiedById)
LEFT JOIN ContactInfo ON UserInfo.ContactId = ContactInfo.ContactId
LEFT JOIN ContactInfo AS Comergence ON(ApplicationInfo.ComergenceRepId = Comergence.ContactId)
LEFT JOIN UserInfo AS AEUser ON(AEUser.UserId = ApplicationInfo.AEType)
left join   paymentinfo on applicationinfo.applicationid = paymentinfo.applicationid
Inner join applicationstatuschangelog b on applicationinfo.applicationid = b.applicationid
LEFT JOIN ContactInfo AS AEContact ON(AEContact.ContactId = AEUser.ContactId)
LEFT JOIN UserInfo AS StatusUser ON(StatusUser.UserId = ApplicationInfo.StatusChangeById)
LEFT JOIN ContactInfo AS StatusContact ON(StatusContact.ContactId = StatusUser.ContactId)
LEFT JOIN ApprovalStatus ON(ApplicationInfo.ApplicationId = ApprovalStatus.ApplicationId AND ApplicationInfo.CompanyId = ApprovalStatus.CompanyHQId
AND ApplicationInfo.CompanyId = ApprovalStatus.CompanyId)
Where ApplicationInfo.Status NOT In ('Approved Monitor Only')
AND LenderInfo.ActiveLenderContract = 1
AND COALESCE(ApplicationInfo.IsDeleted,0) <> 1
AND b.Status NOT IN ('Incomplete', 'Not Submitted')
Group BY b.ApplicationID` 
```

我见过一些人在子查询中提到使用`IN`而不是`=`，但我似乎无法让它工作。有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:54:17.537

通过在确定的状态后添加“限制 1”，我能够使查询正常工作：

`(Select CreatedOn From ApplicationStatusChangeLog a where a.ApplicationId = b.ApplicationId And a.status = 'Approved' LIMIT 1),(Select CreatedOn From ApplicationStatusChangeLog a Where a.ApplicationId = b.ApplicationId And a.status = 'Pending Approval' LIMIT 1)`

# iphone - 尝试在 MapView 中模拟路线

> ID：12918453
> 
> 赞同：5
> 
> 时间：2012-10-16T15:42:45.677
> 
> 标签：iphone, ios, ios5, mkmapview, mapkit

`CLLocation`我有一个从文件中解析的对象数组。我想模拟用户正在沿着这条路线移动，我已经实现了这个：

```
for (CLLocation *loc in simulatedLocs) {
            [self moveUser:loc];
            sleep(1);
        } 
```

这是循环中调用的方法：

```
- (void)moveUser:(CLLocation*)newLoc
{
    CLLocationCoordinate2D coords;
    coords.latitude = newLoc.coordinate.latitude;
    coords.longitude = newLoc.coordinate.longitude;
    CustomAnnotation *annotation = [[CustomAnnotation alloc] initWithCoordinate:coords];
    annotation.title = @"User";

    // To remove the previous location icon
    NSArray *existingpoints = self.mapView.annotations;
    if ([existingpoints count] > 0) {
        for (CustomAnnotation *annotation in existingpoints) {
            if ([annotation.title isEqualToString:@"User"]) {
                [self.mapView removeAnnotation:annotation];
                break;
            }
        }
    }

    MKCoordinateRegion region = { coords, {0.1, 0.1} };
    [self.mapView setRegion:region animated:NO];
    [self.mapView addAnnotation: annotation];
    [self.mapView setCenterCoordinate:newLoc.coordinate animated:NO];
} 
```

但在运行 iPhone 模拟器时，只有数组中的最后一个位置及其区域会显示在 mapView 中。我想模拟用户每 1 秒“移动”一次，我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:07:09.167

在每次迭代中使用 a 一次循环遍历所有位置是`sleep`行不通的，因为 UI 将被阻塞，直到循环所在的方法完成。

相反，安排`moveUser`为每个位置单独调用该方法，以便 UI 在整个序列中不会被阻塞。调度可以使用`NSTimer`或可能更简单和更灵活的方法来完成，例如`performSelector:withObject:afterDelay:`方法。

保留索引 ivar 以跟踪每次`moveUser`调用时要移动到的位置。

例如：

```
//instead of the loop, initialize and begin the first move...
slIndex = 0;  //this is an int ivar indicating which location to move to next
[self manageUserMove];  //a helper method

-(void)manageUserMove
{
    CLLocation *newLoc = [simulatedLocs objectAtIndex:slIndex];

    [self moveUser:newLoc];

    if (slIndex < (simulatedLocs.count-1))
    {
        slIndex++;
        [self performSelector:@selector(manageUserMove) withObject:nil afterDelay:1.0];
    }
} 
```

现有`moveUser:`方法不必更改。

`coordinate`请注意，如果不是每次都重新删除和添加注释，而是在开始时添加一次并在每次“移动”时 更改其属性，则可以简化用户体验和代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:07:21.720

您的问题是其中带有睡眠的 for 循环阻塞了主线程，直到 for 循环结束。这会冻结整个期间的整个用户界面，包括您在 moveUser 中所做的任何更改。

代替 for 循环，使用每秒触发一次并且每次执行一个步骤的 NSTimer。

或者，为了获得更平滑的效果，可以设置一个动画，沿着预定义的路径移动注释的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T15:51:54.263

您不应该使用 MKAnnotation，而是使用 MKPolyline。检查[文档](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKPolyline_class/Reference/Reference.html)。另外，请查看 2010 年的 WWDC MapKit 视频。它有一个可变 MKPolyline 的示例。

# iphone - 视网膜图像在 cocos2d ios6 中显示 1/4 大小

> ID：12918455
> 
> 赞同：2
> 
> 时间：2012-10-16T15:42:53.297
> 
> 标签：iphone, cocos2d-iphone, ios6

我对此进行了很多研究，但我找不到任何有趣的东西..实际上我有一个在 ios5 中制作的 cocos2d 项目，并且在视网膜中显示图像大小很好..当升级到 ios6 时，它显示四分之一的图像大小..它显示 Retina 显示在 CCDirector 中打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:41:24.997

我认为这会对你有所帮助。

```
NSString *iPadtext;
NSString *device = [UIDevice currentDevice].model;
NSLog(@"deive name is %@",device); 
```

添加两个图像，如 pause.png 和 pause-hd.png

```
if([device isEqualToString:@"iPad"] || [device isEqualToString:@"iPad Simulator"] ){
iPadtext = @"-hd"; 
```

}

```
CCMenuItemImage *pauseMenuItem = [CCMenuItemImage 
                             itemFromNormalImage:[NSString stringWithFormat:@"pause_01%@.png",iPadText] selectedImage:[NSString stringWithFormat:@"pause_01-over%@.png",iPadText] 
                             target:self selector:@selector(PauseButtonTapped:)]; 
```

我希望它会帮助你

# mysql - MySQL SELECT 多个 DISTINCT COUNT

> ID：12918459
> 
> 赞同：2
> 
> 时间：2012-10-16T15:43:13.990
> 
> 标签：mysql

这就是我想要做的。我有一个包含重复行的用户评估表。我希望只`DISTINCT`为每个用户获取值。

在下表的示例中。如果只有 user_id 1 和 50 属于特定位置，则只有每个用户的唯一 video_id 应作为`COUNT`. 用户 1 传递了视频 1、2 和 1。所以应该只有 2 条记录，而用户 50 传递了视频 2。所以这个位置的总数是 3。我想我需要`DISTINCT's`在查询中有两个，但不是确定如何做到这一点。

```
+-----+----------+----------+
| id  | video_id | user_id  |
+-----+----------+----------+
| 1   |       1  |        1 |
| 2   |       2  |       50 |
| 3   |       1  |      115 |
| 4   |       2  |       25 |
| 5   |       2  |        1 |
| 6   |       6  |       98 |
| 7   |       1  |        1 |
+-----+----------+----------+ 
```

这就是我当前查询的样子。

```
$stmt2 = $dbConn->prepare("SELECT COUNT(DISTINCT user_assessment.id)
FROM user_assessment
LEFT JOIN user ON user_assessment.user_id = user.id
WHERE user.location = '$location'");
$stmt2->execute();
$stmt2->bind_result($video_count);
$stmt2->fetch();
$stmt2->close(); 
```

因此，我的查询返回该特定位置的所有计数，但它不会忽略来自每个特定用户的非唯一结果。

希望这是有道理的，感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T15:58:19.110

```
SELECT COUNT(DISTINCT ua.video_id, ua.user_id)
FROM user_assessment ua
INNER JOIN user ON ua.user_id = user.id
WHERE user.location = '$location' 
```

你可以在里面写很多东西，`COUNT`所以不要犹豫，把你真正想要的东西放进去。这将给出不同情侣的数量，`(video_id, user_id)`如果我理解正确的话，这就是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T15:51:31.773

下面的查询加入了一个子查询，该查询为每个用户获取不同的视频。然后，主查询对这些数字进行求和，以获得该位置的视频总数。

```
SELECT 
  SUM(video_count)
FROM 
  user u
  INNER JOIN 
  ( SELECT
      ua.user_id,
      COUNT(DISTINCT video_id) as video_count
    FROM
      user_assessment ua
    GROUP BY
      ua.user_id) uav on uav.user_id = u.user_id
WHERE 
  u.location = '$location' 
```

请注意，由于您已经使用了绑定，因此您还可以传入`$location`绑定参数。我把这个留给你，因为它不是问题的一部分。;-)

# c# - datalist 内的复选框列表

> ID：12918462
> 
> 赞同：1
> 
> 时间：2012-10-16T15:43:28.880
> 
> 标签：c#, asp.net

我在数据列表中有一个复选框列表：

```
 <asp:DataList ID="dtlstfilter" runat="server">
      <ItemTemplate>
      <div style="display: none;" id='<%#changes(Eval("FilterCode")) %>' class="p7ABcontent">
       <p>
        <asp:CheckBoxList AutoPostBack="true" Font-Size="12px" ID="chklist" runat="server" ></asp:CheckBoxList>
        </p>
        </div>
       </ItemTemplate>
       </asp:DataList> 
```

我在其中加载了两个列表项来表示“是”和“否”。如何在选定的复选框中获取事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T16:09:26.007

您需要绑定 SelectedIndexChanged 事件并传递参数以获取当前 rowNumber 或使用自定义属性（用户定义的属性）所需的任何其他内容。

**在 html 中**

```
<asp:DataList ID="dtlstfilter" runat="server"  >
    <ItemTemplate>
      <div style="display: none;" id='<%#changes(Eval("FilterCode")) %>' class="p7ABcontent">
         <p>
             <asp:CheckBoxList AutoPostBack="true" Font-Size="12px" ID="chklist" runat="server"  onselectedindexchanged="chklist_SelectedIndexChanged"   CommandName="myCommand" CommandArguments="1" DataListRowNumber="1" ></asp:CheckBoxList>
        </p>
     </div>
    </ItemTemplate>
</asp:DataList> 
```

**在后面的代码中**

```
protected void chklist_SelectedIndexChanged(object sender, EventArgs e)
{
    CheckBoxList chklst = (CheckBoxList)sender;
    string commandName = chklst.Attributes["CommandName"].ToString();
    string commandArguments = chklst.Attributes["commandArguments"].ToString();
    string dataListRowNumber = chklst.Attributes["DataListRowNumber"].ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T06:20:26.927

另一种方式，只是想想。该解决方案最大限度地减少了客户端和服务器之间的往返。

使用按钮的点击事件。您可以遍历 DataListItems 并使用 FindControl 方法查找 CheckBoxList。现在您可以确定检查了哪些元素：

```
foreach (DataListItem item in dtlstfilter.Items)
{
  if (item.ItemType == ListItemType.Item)
  {
    CheckBoxList checkBox = item.FindControl("chklist") as CheckBoxList;
  }
} 
```

# imap - 雅虎 IMAP UID+ COPYUID 坏了？

> ID：12918463
> 
> 赞同：2
> 
> 时间：2012-10-16T15:43:32.190
> 
> 标签：imap, uid, yahoo-mail

雅虎 IMAP UID+ 中的 COPYUID 功能似乎根本不起作用。例如，我们移动消息的任务接收到跟踪：

```
S: C32 OK [COPYUID 1348693428 122572 122552] COPY completed 
```

我们登录该框并验证 uidvalidity：

```
S: * OK [UIDVALIDITY 1348693428] UIDs valid 
```

但是获取失败：

```
C: C6 UID FETCH 122552 (BODY.PEEK[] UID)
S: C6 OK UID FETCH completed 
```

我想知道是否有人对 Yahoo UID+ 有过类似的挫败感，是否有解决方法，我的客户端出现错误等。

此外，我正在我的个人帐户上对此进行测试，并且消息在被复制后不会被修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:34:20.310

经过几周的开发之后，我可以自信地说是的，它只是彻底坏了，不应该使用。

# django - 在 Django 中，如何为“/”和其他基于根的 url 编写 url 模式

> ID：12918464
> 
> 赞同：21
> 
> 时间：2012-10-16T15:43:40.770
> 
> 标签：django, url, routing, url-pattern

我是 django 的新手，我仍在学习的一件事是 url_patterns。我设置了一个页面应用程序来处理根路径（http://www.mysite.com）以及一些静态页面，例如关于页面。我想出了如何为根路径设置 url 模式，但我无法让网站将路径“/about”指向页面“about”视图。

这是我的主要 urls.py

```
 from django.conf.urls import patterns, include, url
 from django.conf import settings
 urlpatterns = patterns('',
     url(r'^polls/', include('polls.urls')),
     url(r'^$', 'pages.views.root'),
     url(r'^/', include('pages.urls')),
  ) 
```

这是我的页面 urls.py

```
 from django.conf.urls import patterns, include, url
 urlpatterns = patterns('pages.views',
      url(r'^about', 'about'),
 ) 
```

这是我的页面views.py

```
 # Create your views here.
 from django.shortcuts import render_to_response
 from django.template import RequestContext
 from django.http import HttpResponse, HttpResponseRedirect
 from django.core.urlresolvers import reverse

 def root(request):
    return render_to_response('pages/root.html',context_instance=RequestContext(request))
 def about(request):
    return render_to_response('pages/about.html',context_instance=RequestContext(request)) 
```

如果我将主 urls.py 文件更改为，`r'^a/', include('pages.urls')`那么路径“/a/about”将指向 about 操作。所以我认为这一定是我在此文件中编写 url 模式的方式的问题。但是，我不知道如何改变它。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-16T16:03:48.763

弄清楚问题是什么。项目级别的正确 url_pattern 是：

```
 urlpatterns = patterns('',
    url(r'^polls/', include('polls.urls')),
    url(r'^$', 'pages.views.root'),
    url(r'', include('pages.urls')),
 ) 
```

当它到位时，'/about' 和其他简单路径会正确定向。

感谢大家！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-16T15:51:55.037

试试这个，对于项目级别的 url.py：

```
urlpatterns = patterns('',
# Examples:
url(r'^$', 'apps_name.views.home', name='home'),

# Uncomment the admin/doc line below to enable admin documentation:
# url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

# Uncomment the next line to enable the admin:
url(r'^admin/', include(admin.site.urls)),

(r'^about/', include('about.urls')),
) 
```

然后是应用程序的 url.py

```
urlpatterns = patterns('',
    url(r'^$', direct_to_template, {"template": "about/about.html"}, name="about"),
) 
```

考虑到正则表达式是从上到下评估的，那么如果路径适合它将进入的正则表达式。[要了解更多关于正则表达式的信息，请在谷歌上搜索或尝试Zed](http://regex.learncodethehardway.org/book/) Shaw 的关于正则表达式的好书

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-12-08T12:52:53.710

请注意，从 Django 2.0 版开始，URL 模式已更改为 `django.urls.path()`在此处使用检查示例：[链接](https://docs.djangoproject.com/en/2.0/intro/tutorial03/)

```
from django.urls import path

from . import views

urlpatterns = [
    # ex: /polls/
    path('', views.index, name='index'),
    # ex: /polls/5/
    path('<int:question_id>/', views.detail, name='detail'),
    # ex: /polls/5/results/
    path('<int:question_id>/results/', views.results, name='results'),
    # ex: /polls/5/vote/
    path('<int:question_id>/vote/', views.vote, name='vote'),
] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-17T23:15:39.687

关于`url`方法：

```
url(r'^$', 'pages.views.root') 
```

`url`在 Django 3.1 中已弃用，最好`re_path`改用它。

[https://docs.djangoproject.com/en/3.1/ref/urls/#s-url](https://docs.djangoproject.com/en/3.1/ref/urls/#s-url)

[https://docs.djangoproject.com/en/3.1/ref/urls/#re-path](https://docs.djangoproject.com/en/3.1/ref/urls/#re-path)

注意：该`r'^$'`模式不适用于`path`函数，并且会给您一个误导性错误，即找不到路由。

`re_path(r'^$', [etc])`每次使用正则表达式而不是模式中的简单字符串时，都必须使用。

# javascript - 哈希标记、查询字符串和 Ajaxified 搜索结果

> ID：12918467
> 
> 赞同：0
> 
> 时间：2012-10-16T15:43:48.413
> 
> 标签：javascript, ajax, codeigniter, codeigniter-2

我有一个搜索表单，只要表单中的某些内容发生更改，它就会自动向我的 Web 应用程序发送 POST 数据。Web 应用程序（用 PHP/CodeIgniter 编写）接受 POST 或 GET 并返回正确的结果并将其显示在页面上。一切正常。

现在，我担心的是 URL 没有反映获取当前搜索结果所需的查询参数。因此，如果有人复制并分享了地址，点击该 URL 的人将看不到预期的数据。书签等问题也一样。

可以在 jQuery 中更新查询字符串，但这会强制浏览器重定向到新 URL（这样做时，页面会显示正确的搜索结果，因为 Web 应用程序实际上最初是为非 JS 工作而编写的）。这种重定向意味着 Ajaxifying 的努力被浪费了。

似乎哈希 # 可用于更新地址而不使浏览器重定向，但我似乎无法在非 JS 情况下使用该信息（我无法通过 GET 访问该信息）。

我应该使用什么方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:45:15.850

HTML5 浏览器支持[History pushState](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)，它可以在不刷新页面的情况下更新浏览器的 url。

```
var stateObj = { foo: "bar" };
history.pushState(stateObj, "page 2", "bar.html"); 
```

[您可以使用history.js](https://github.com/balupton/History.js/)添加对不支持它的浏览器的支持

# php - 如何在prestashop中获取所有属性

> ID：12918476
> 
> 赞同：2
> 
> 时间：2012-10-16T15:44:38.487
> 
> 标签：php, e-commerce, smarty, prestashop

我需要获取我的 Prestahop 商店中存在的所有属性，无论是什么或分配了什么产品我只想生成这些属性的数组，然后在 ProductController.php 类中使用它们。我检查了文件 classes/Product.php 并且存在一个名为 getDefaultAttribute($id_product, $minimumQuantity = 0) 的方法，但我认为这仅适用于分配给特定产品的属性，而不是返回所有我需要的。有什么帮助吗？我是 Prestashop 的新手，需要学习很多东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T17:07:43.077

检查文件`classes/Attribute.php`。您可以使用静态函数`Attribute::getAttributes($id_lang, $not_null = false)`。它返回给定语言的所有属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-16T11:55:18.957

您可以使用以下 SQL 查询获取所有属性：

```
$atbt = "SELECT a.id_attribute_group , a.name 
              FROM  " . _DB_PREFIX_ . "attribute_group_lang a                   
              where id_lang='".$id_lang."'";
    $res = Db::getInstance()->ExecuteS($atbt);
    $product_result = array();
    $i=0;
    foreach ($res as $key => $row) {
     $sql = 'SELECT pal.name AS label,pal.id_attribute AS value,0 AS status' 
                . ' FROM ' . _DB_PREFIX_ . 'attribute AS pa
        RIGHT  JOIN ' . _DB_PREFIX_ . 'attribute_group_lang AS pagl ON (pagl.id_attribute_group =pa.id_attribute_group)
        LEFT JOIN ' . _DB_PREFIX_ . 'attribute_lang AS pal ON (pal.id_attribute =pa.id_attribute)
        JOIN ' . _DB_PREFIX_ . 'product_attribute_combination  AS pacl ON (pacl.id_attribute =pal.id_attribute)
        JOIN ' . _DB_PREFIX_ . 'product_attribute  AS pat ON (pat.id_product_attribute =pacl.id_product_attribute)
        JOIN ' . _DB_PREFIX_ . 'product  AS prot ON (prot.id_product =pat.id_product)
        WHERE pagl.id_lang="'.$id_lang.'" AND pal.id_lang="'.$id_lang.'" AND pagl.id_attribute_group=' . $row['id_attribute_group'].' AND prot.id_category_default = "'.$id_category.'" GROUP BY pacl.id_attribute';

        $result = Db::getInstance()->ExecuteS($sql);
} 
```

# javascript - 需要 Javascript 函数帮助

> ID：12918478
> 
> 赞同：-1
> 
> 时间：2012-10-16T15:44:50.780
> 
> 标签：javascript, jquery

当单击按钮时，我试图隐藏一个 div 并显示另一个。单击后按钮需要更改类。

`toggleClass`我试图用and改变这些`toggleSlide`，但它没有用。现在我只是尝试在点击时显示和隐藏 div。它似乎以某种方式工作，但`removeClass`不会工作。

有人能理解有什么问题吗？或者有更好的方法吗？

也许我可以使用切换数组或其他东西来简化代码或点击次数（`if count c++%2!=2`），甚至不知道这是否可能。

```
$('div.more-lang').hide();
$('div.lang-arrow').click(function () {
    $('div.lang-arrow').addClass('more');
    $('#lang').hide('');
    $('div.more-lang').show('');
});

$('div.lang-arrow.more').click(function () {
    $('div.lang-arrow').removeClass('more');
    $('div.more-lang').hide('');
    $('#lang').show('');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:06:01.420

这应该有效：

```
$("div.lang-arrow").on('click', function() {
    $(this).toggleClass("more");
    $("#lang").toggle();
}); 
```

[http://jsfiddle.net/zmvQp/](http://jsfiddle.net/zmvQp/)

# c# - 在 foreach 循环中抓取数据后如何返回预先排序的数据？

> ID：12918491
> 
> 赞同：0
> 
> 时间：2012-10-16T15:45:41.670
> 
> 标签：c#, sql, asp.net-mvc

首先，我正在获取 ClientID。然后，我得到与该 ClientID 关联的所有发票。我想返回所有按 InvoiceNumber 排序的数据，降序。这是我的代码：

```
var rvInvoices =
             (from i in db.QB_INVOICES_HEADER
                where i.ClientID == cId
                select i).ToList();
foreach (var itm in rvInvoices)
{
        InvoiceModel cm = new InvoiceModel()
        {
                InvoiceNumber = itm.InvoiceNumber,
                InvoiceSentDt = itm.InvoiceSentDt,
                InvoiceDt = itm.InvoiceDt,
                Amount = itm.Amount,
                Term = itm.Term,
                ClientName = itm.CI_CLIENTLIST.ClientName
        };

        listInvoices.Add(cm);
}

return listInvoices; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:47:07.560

```
listInvoices.OrderByDescending(x => x.InvoiceNumber).ToList() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T15:48:21.837

你应该尝试这样的事情：

```
var rvInvoices =
               (from i in db.QB_INVOICES_HEADER
                where i.ClientID == cId
                select i).OrderByDescending(x => x.InvoiceNumber); 
```

而且我看不出你需要打电话的理由`.ToList()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T15:49:15.610

您应该在数据库而不是客户端上订购它们：

```
var rvInvoices = db.QB_INVOICES_HEADER
    .Where(i => i.ClientID == cId)
    .OrderByDescending(i => i.InvoiceNumber); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T15:49:46.883

您可以在三个地方下订单。

1.  在初始查询中，
2.  在`foreach`, 或
3.  在里面`return`

选项1：

```
var rvInvoices =
    (from i in db.QB_INVOICES_HEADER
    where i.ClientID == cId
    select i).OrderByDescending(i => i.InvoiceNumber).ToList(); 
```

选项 2：

`foreach (var itm in rvInvoices.OrderByDescending(i => i.InvoiceNumber))`

选项 3：

`return listInvoices.OrderByDescending(i => i.InvoiceNumber).ToList();`

我建议采用路线 1，因为它将在数据库级别运行订单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T19:38:32.257

您当前拥有的方法创建多个列表，具有显式`foreach`循环，并且需要对其输出进行排序。只需创建一个列表，无需显式循环，数据库为您进行排序即可完成：

```
return
    (from i in db.QB_INVOICES_HEADER
     where i.ClientID == cId
     // have the database do the sorting
     orderby i.InvoiceNumber descending
     select i)
     // break out of the DB query to make InvoiceModel
    .ToEnumerable()
    .Select(itm => new InvoiceModel()
    {
        InvoiceNumber = itm.InvoiceNumber,
        InvoiceSentDt = itm.InvoiceSentDt,
        InvoiceDt = itm.InvoiceDt,
        Amount = itm.Amount,
        Term = itm.Term,
        ClientName = itm.CI_CLIENTLIST.ClientName
    })
     // only create one list as the last step
    .ToList(); 
```

# cuda - CUDA 5.0 驱动程序慢

> ID：12918494
> 
> 赞同：0
> 
> 时间：2012-10-16T15:45:50.967
> 
> 标签：cuda

我刚刚从 CUDA 4 迁移到 5，并在 Ubuntu 12.04 上安装了刚刚发布的 CUDA 5.0，但性能急剧下降。过去需要 1 秒的特定 CUDA 内核现在需要 6 秒。似乎新驱动程序是罪魁祸首，因为当我重新安装旧的 4 驱动程序时性能恢复了，但我不知道为什么。有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:50:26.953

抱歉花了这么长时间才回来..

我发现罪魁祸首是__threadfence()。不太了解它的用途我正在写类似的东西

```
 __threadfence()
 __syncthreads() 
```

在新驱动程序上，这需要花费很多额外的时间

我正在研究 GTX680

非常感谢丹尼尔

# php - 在 PHP 的 html 表的第一行显示最后一条 SQL 数据库记录

> ID：12918498
> 
> 赞同：2
> 
> 时间：2012-10-16T15:46:06.493
> 
> 标签：php

嗨，下面的代码打印从第一次保存到最后一次保存的结果。显示数据后，有没有办法将最后一次保存在第一行？（所有记录以相反的顺序。）谢谢。

```
while ($recz = mysql_fetch_array($runz))
{

    echo "<tr class='taB'>";
    echo "<td>".$recz["chkNum"]."</td>";
    echo "<td>".$recz["InvoNum"]."</td>";
    echo "<td>".$recz["InvoVal"]."</td>";
    echo "<td>".$recz["InvoDate"]."</td>";
    echo "<td>".$recz["type"]."</td>";
    echo "<td class='ta'>".$recz["statu"]."</td>";
    echo "</tr>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:49:15.440

您将需要更改您的查询。使用[`ORDER BY ... DESC`](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)，其中`...`是确定结果顺序的列名。

在您的 HTML 输出中，您似乎有一个名为`InvoDate`. 也许这就是您需要的专栏。如果是这样，您的查询将以`ORDER BY InvoDate DESC`.

# ruby-on-rails-3 - Rails 3 - 警告：无法批量分配受保护的属性：user_ids

> ID：12918499
> 
> 赞同：1
> 
> 时间：2012-10-16T15:46:19.267
> 
> 标签：ruby-on-rails-3, has-many-through

我在课程和用户之间有一个 has_many through 关系。

```
class Course < ActiveRecord::Base
  belongs_to :user

  has_many :enrollments, :dependent => :delete_all
  has_many :users, :through => :enrollments

  attr_accessible :description, :duration, :name, :prerequisites, :short_name, :start_date, :user_id

  accepts_nested_attributes_for :users, :allow_destroy => true
  attr_accessible :users_attributes 
```

和用户：

```
class User < ActiveRecord::Base

has_many :subjects, :class_name => "Course"  # to get this call user.subjects
has_many :enrollments, :dependent => :delete_all
has_many :courses, :through => :enrollments 
```

和注册：

```
class Enrollment < ActiveRecord::Base

belongs_to :course
belongs_to :user

attr_accessible :course_id, :user_id

end 
```

现在我正在尝试使用嵌套表单从 Course 内部设置 user_ids。它一直给我那个 Mass Assignment 警告，没有任何东西被保存。我读到我应该添加 attr_accessible user_id 但它仍然不起作用。

即使我从 rails 控制台做这样的事情：

```
@c.update_attributes({:user_ids => [7,8]}) 
```

@c 是课程

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:47:33.477

是`user_ids`，不是`user_id`。

您需要添加`user_ids`到您的`attr_accessible`.

# r - 如何将多个波段从 netcdf 写入二进制文件？

> ID：12918506
> 
> 赞同：0
> 
> 时间：2012-10-16T15:46:50.743
> 
> 标签：r, binary, netcdf

我有 netcdf 文件，我打开它并读取一个变量：

```
 K=open.ncdf("C:\\hiba_history.nc")
Smonthly= get.var.ncdf(nc=K,varid="evap",verbose=TRUE)

[1] "vobjtodimname: is a character type varid.  This file has 9 dims"
[1] "vobjtodimname: no cases found, returning FALSE"
[1] "get.var.ncdf: isdimvar: FALSE"
[1] "vobjtovarid: entering with varid=evap"
[1] "Variable named evap found in file with varid= 10"
[1] "vobjtovarid: returning with varid deduced from name; varid= 10"
[1] "get.var.ncdf: ending up using varid= 10"
[1] "ndims: 3"
[1] "get.var.ncdf: varsize:"
[1] 34 30 12
[1] "get.var.ncdf: start:"
[1] 1 1 1
[1] "get.var.ncdf: count:"
[1] 34 30 12
[1] "get.var.ncdf: totvarsize: 12240"
[1] "Getting var of type 3  (1=short, 2=int, 3=float, 4=double, 5=char, 6=byte)"
[1] "get.var.ncdf: C call returned 0"
[1] "count.nodegen: 34    Length of data: 12240" "count.nodegen: 30    Length of data: 12240"
[3] "count.nodegen: 12    Length of data: 12240"
[1] "get.var.ncdf: final dims of returned array:"
[1] 34 30 12
[1] "varid: 10" 
```

正如你所看到的，这个变量有 30 像素和 34 行和 12 个波段（月）我想只写 12 的总和所以我最终得到一个文件来计算所有 12 个月的总和（每年）

```
 apply(Smonthly, c(1,2), sum) -> Sannual 
  to.write = file(paste("C:\\annual.bin",sep=""),"wb")

   writeBin(as.double(Sannual),to.write,size=4) 
```

当我通过另一个程序打开文件时，我发现地图（文件）是颠倒的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:01:44.870

...一旦你有了每月的总和，你就可以打电话`writeBin`把它们保存到文件中：

```
a = array(runif(10*10*10), dim = c(10,10,10))
a_sum = apply(a, c(1,2), sum)
# Write stuff
writeBin(as.numeric(a_sum), "/tmp/test.bin", size = 4)
# read stuff back in
test = readBin("/tmp/test.bin", numeric(), 10*10, size = 4)
# ...succes???
> head(data.frame(test, as.numeric(a_sum)))
      test as.numeric.a_sum.
1 5.581374          5.581374
2 5.974429          5.974429
3 4.854637          4.854637
4 5.040194          5.040193
5 3.709209          3.709210
6 6.119048          6.119048
>     all.equal(test, as.numeric(a_sum))
[1] "Mean relative difference: 2.313248e-08"
>     all.equal(test, as.numeric(a_sum), tolerance = 1e-7)
[1] TRUE 
```

注意：为什么你需要设置`tolerance`返回我`all.equal`留给`TRUE`读者作为练习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T07:57:51.933

至于将 12 个月加在一起，这里是这样做的方法：

```
library(ncdf)
K <- open.ncdf("math.nc")
Smonthly <- get.var.ncdf(nc=K,varid="evap")
apply(Smonthly, c(1,2), sum) -> Sannual 
# Since the months are represented by dimension 3, you apply sum on dimensions 1 and 2 
```

根据请求，这里尝试使用以下方法执行相同操作`raster`：

```
library(raster)
library(ncdf)
Smonthly <- raster("math.nc", varname="evap", band=12)
Sannual <- calc(Smonthly, sum) 
```

# asp.net - asp.net 链接按钮无法正常工作

> ID：12918512
> 
> 赞同：0
> 
> 时间：2012-10-16T15:47:07.300
> 
> 标签：asp.net

**asp.net 链接按钮无法正常工作**

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Ui/MasterPage_UI.master" AutoEventWireup="true" CodeFile="Default2.aspx.cs" Inherits="Ui_Default2" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">

<div class="content" runat="server">
<p>
I am a returning customer</p>
<b>E-Mail Address:</b><br />
    <asp:TextBox name="email" runat="server" ID="email" 
    ValidationGroup="email" ></asp:TextBox>
    <br />
    <br />
    <b>Password:</b><br />
    <asp:TextBox  ID="pwd" runat="server" name="password" TextMode="Password"></asp:TextBox>
    <br />
    <br />
    <asp:LinkButton ID="Submit" runat="server" CssClass="button" Text="Login" onclick="Submit_Click" ValidationGroup="email" />
</div>

</asp:Content> 
```

动态生成的菜单的 aspx 代码是--> `

```
<div class="categories" runat="server">
<ul runat="server" id="nav">
<li class="home" style="background-repeat: no-repeat; background-color: #94C23C; background-image: url(home.jpg); background-position: center;"><a href="index.htm">Home</a></li>
<!--Dynamic menu-->
</ul>
</div>
</div>` 
```

你的cs代码是-->

`public void bindmenu() { HtmlGenericControl li; HtmlAnchor 链接；HtmlGenericControl div；

```
 //for main menu
    DataTable dt = new BALCate().GetCate();
    foreach (DataRow dr in dt.Rows)
    {
        int cateid = int.Parse(dr["cate_id"].ToString());
        String cate_name = dr["cate_name"].ToString();
        li = new HtmlGenericControl("li");
        link = new HtmlAnchor();
        link.InnerText = dr["cate_name"].ToString();
        link.HRef = "CateProducts.aspx?cate_id=" + cateid + "&" + "catename=" + cate_name;
        li.Controls.Add(link);

        //for submenu
        DataTable subcate = new BALCate().GetSubCate(cateid);
        if (subcate.Rows.Count > 0)
        {
            div = new HtmlGenericControl("div");
            div.Attributes.Add("class", "sub-menu column-1");
            HtmlGenericControl sul = new HtmlGenericControl("ul");

            foreach (DataRow sdr in subcate.Rows)
            {
                int subcateid = int.Parse(sdr["subcate_id"].ToString());
                String subcatename = sdr["subcate_name"].ToString();
                HtmlGenericControl sli = new HtmlGenericControl("li");
                HtmlAnchor slink = new HtmlAnchor();
                slink.InnerHtml = sdr["subcate_name"].ToString();
                sli.Controls.Add(slink);
                slink.HRef = "SubCateProducts.aspx?subcate_id=" + subcateid + "&" + "catename=" + cate_name + "&" + "subcatename=" + subcatename;
                sul.Controls.Add(sli);

                DataTable subsubcate = new BALCate().GetSubSubCate(subcateid);
                if (subsubcate.Rows.Count > 0)
                {
                    HtmlGenericControl subdiv = new HtmlGenericControl("div");
                    subdiv.Attributes.Add("class", "sub-menu");
                    HtmlGenericControl ssul = new HtmlGenericControl("ul");

                    foreach (DataRow ssdr in subsubcate.Rows)
                    {
                        int subsubcateid = int.Parse(ssdr["subsubcate_id"].ToString());
                        String subsubcatename = ssdr["subsubcate_name"].ToString();
                        HtmlGenericControl ssli = new HtmlGenericControl("li");
                        HtmlAnchor sslink = new HtmlAnchor();
                        sslink.HRef = "SubSubCateProducts.aspx?subsubcate_id=" + subsubcateid + "&" + "catename=" + cate_name + "&" + "subcatename=" + subcatename + "&" + "subsubcatename=" + subsubcatename;
                        sslink.InnerText = ssdr["subsubcate_name"].ToString();
                        ssli.Controls.Add(sslink);
                        ssul.Controls.Add(ssli);
                    }
                    subdiv.Controls.Add(ssul);
                    sli.Controls.Add(subdiv);
                }
            }
            div.Controls.Add(sul);
            li.Controls.Add(div);
        }
        nav.Controls.Add(li);
    }
}` 
```

实际上还有一个母版页，其中包含**动态菜单**，其中在页面加载时从数据库中动态加载数据（类别和子类别）。但问题是，**每当我点击链接按钮时，菜单不会从数据库中检索数据，并且显示为空白**，其余的静态部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T15:50:27.300

将 onclick 添加到执行数据检索的方法的按钮。

```
<asp:LinkButton ID="Submit" runat="server" CssClass="button" Text="Login" 
ValidationGroup="email" onclick="MethodName" /> 
```

# iphone - iOS TabBar 和导航控制器

> ID：12918513
> 
> 赞同：0
> 
> 时间：2012-10-16T15:47:08.577
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller, uinavigationbar

好的，那么我将如何执行此操作。

1.  我有一个标签栏
2.  在标签栏的一个视图控制器中，有两个按钮
3.  当我单击 button1 时，它应该将我带到另一个屏幕，但它必须在底部有标签栏。
4.  当我单击按钮 2 时，它应该带我到另一个屏幕，但又必须在底部有标签栏。

我试过 1\. presentModalViewController - 但这只是覆盖整个屏幕 2\. 将第二个屏幕作为子视图添加到第一个屏幕。- 这显示了我想看到的第二个视图，并且底部还有标签栏。但是它不起作用。这意味着我在出现的视图中嵌入了一个滚动视图等，但在添加为子视图 3 时，这些都不起作用。导航控制器 - 我认为这应该是这种方式，并再次尝试在 viewdidload 中添加一个新的导航控制器，但程序崩溃了。

```
 @interface SettingsViewController : UIViewController <CLLocationManagerDelegate>
    @property (nonatomic,retain) UINavigationController * navigationController;

 - (void)viewDidLoad
{
    [super viewDidLoad];
    [self.view setBackgroundColor:[[ApplicationResources applicationResources]lightGreyColour]];
self.postCodeTextField.hidden = TRUE;
self.navigationController = [[UINavigationController alloc] initWithRootViewController:self];
   [self.view addSubview:self.navigationController.view];
//self.facebookSwitch
 } 
```

那么解决方案是什么？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T15:55:32.407

`presentModalViewController`完全是为了覆盖整个屏幕。

似乎您希望每个选项卡中都有一个导航控制器，因此每个选项卡都有自己的导航堆栈。诀窍是您应该将导航控制器添加到标签栏，然后将视图控制器添加到导航控制器。

```
tabbar
|
+- navigationController1
|     |
|     +- myViewController1
|
+- navigationController2
      |
      +- myViewController2 
```

从上面的代码中，您似乎忽略了 UIViewController 已经有一个名为 的属性`navigationController`，因此您不应该自己声明它。

要正确设置导航控制器，请参阅[带有导航控制器的标签栏应用程序](https://stackoverflow.com/questions/369128/tab-bar-application-with-navigation-controller)

当`myViewController1`作为 的根视图控制器正确插入时`navigationController1`，您可以轻松地呈现后续视图控制器，如下所示：

```
//in myViewController1
[self.navigationController pushViewController:myViewController3 animated:YES]; 
```

# spring - 如何将依赖项自动装配到 Spring @Configuration 实例中？

> ID：12918515
> 
> 赞同：1
> 
> 时间：2012-10-16T15:47:13.243
> 
> 标签：spring, spring-mvc, configuration, annotations

我需要将一个对象注入到我的 No XML Spring @Configuration 对象中，如下所示：

```
@Configuration
@EnableWebMvc
@ComponentScan(basePackages = "web.client")
public class WebApplicationConfiguration extends WebMvcConfigurerAdapter {

private static final Logger log = LoggerFactory.getLogger(WebApplicationConfiguration.class);

@Inject
private MonitoringExceptionResolver resolver;  // always null

@Override
public void configureHandlerExceptionResolvers(List<HandlerExceptionResolver> exceptionResolvers) {
    log.debug("configuring exception resolvers");
    super.configureHandlerExceptionResolvers(exceptionResolvers);
    exceptionResolvers.add(new DefaultHandlerExceptionResolver());
    exceptionResolvers.add(new AnnotationMethodHandlerExceptionResolver());
    exceptionResolvers.add(new ResponseStatusExceptionResolver());
    exceptionResolvers.add(resolver);  // passing null ref here
}

} 
```

其中 MonitoringExceptionResolver 定义如下：

```
@Service
public class MonitoringExceptionResolver implements HandlerExceptionResolver {

private final Counters counters;

@Inject
public MonitoringExceptionResolver(Counters counters) {
    super();
    this.counters = counters;
}

public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) {
    Counter counter = counters.getCounterFor(ex.getClass());
    if(counter != null) {
        counter.increment();
    }
    return null;
}

} 
```

但是，由于上面的“解析器”字段为空，即使我使用@Autowired，我也会在执行链的后期得到 NPE。

其他类正在使用组件扫描成功地连接到其他地方。为什么上面总是为空？难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:28:03.537

@Inject 和 @Autowired 在 Spring 中的工作方式应该非常相似。确保使用中的*BeanPostProcessor 知道MonitoringExceptionResolver：将其标记为@Component 并使其成为某个@ComponentScan 的主题，或者使@Bean 工厂方法成为某个正在使用的@Configuration 类。

# javascript - 如何取消绑定带有锚标记的标签的超链接？

> ID：12918516
> 
> 赞同：0
> 
> 时间：2012-10-16T15:47:16.113
> 
> 标签：javascript, jquery

我有一个`label`内部`link`标签。我这样做是为了参考其他一些脚本。我只想删除`hyperlink`for that `label`。

```
<a href="/" title="Go to homepage">
<label for="enr_rds_batch_update_Section" id="section">Section</label>
<img alt="Look up Questions" class="image_section_search" src="/assets/Search-icon.gif" title="Lookup Questions">
</a>​ 
```

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:57:19.940

只需使用 jQuery[`.unwrap()`](http://api.jquery.com/unwrap/)函数。

您关心的线路是：

`$('#section').unwrap();`

只需将其放在要删除`a`标签时会被调用的地方。

小提琴：http: [//jsfiddle.net/gromer/6YSQQ/](http://jsfiddle.net/gromer/6YSQQ/)

# qt - 如何在 Qt 中呈现自定义视频数据？

> ID：12918518
> 
> 赞同：2
> 
> 时间：2012-10-16T15:47:24.243
> 
> 标签：qt, render, qimage

我从来没有做过 Qt 视频应用程序——这方面的新手。我有一个自定义视频文件格式可以使用 Qt 进行渲染。视频文件格式是 256 字节头，然后是像素数据，然后是 256 字节头，然后是像素数据，依此类推。标头包含宽度、像素高度、每像素字节数、帧速率等信息，像素数据采用拜耳 (GBRG) 格式。我可能必须在显示之前处理数据——比如转换为 RGB（还不确定）。我看到有很多与视频相关的课程，例如 QGL*、QMovie、QVideo* ... 不知道从哪里开始？我看过 mandelbrotwidget 示例，它看起来是一个不错的起点，但仍然需要一些建议。另外，我是否必须为拜耳模式编写 Qt Image 插件？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:17:06.343

最好的*起点*是学习 Qt 中自定义绘图的基础知识。简而言之，一个非常简单的实现将要求您：

1.  创建自定义`QWidget`子类
2.  覆盖`paintEvent()`方法
3.  使用`QPainter`/`QImage`将原始视频数据解码为图像数据并在屏幕上绘制

Qt 有很多很好的示例代码可以帮助您入门，例如：

[http://qt-project.org/doc/qt-4.8/examples-painting.html](http://qt-project.org/doc/qt-4.8/examples-painting.html)

一旦您启动并运行了一个简单的实现，并且基本掌握了 Qt 概念/类，*那么*您将准备好根据需要分析、优化和使用更高级的 Qt 功能（GL、视频）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:30:59.747

好的建议是自己做所有事情。如果您有简单的数据结构，请通过简单的代码读取它`C++`。

您也可以在不使用任何 Qt 对象的情况下进行从`Bayer RGB`到`RGB` [喜欢的](http://www.siliconimaging.com/RGB%20Bayer.htm)对话。

现在，当您每帧获得微不足道的 RGB 图像（即使在您自己的结构中）时，您可以在小部件上显示它`QGL*`——如果您更喜欢`OpenGL`渲染，或者 Qt 的类，例如`QPainter`，`QImage`...

更多链接：[C++ GUI Programming with Qt4, 2nd Edition](http://www.informit.com/articles/article.aspx?p=1174421) , [Graphics View Framework](http://qt-project.org/doc/qt-4.8/graphicsview.html)

# javascript - 倾斜段落中的文本

> ID：12918520
> 
> 赞同：2
> 
> 时间：2012-10-16T15:47:33.213
> 
> 标签：javascript, html, css

我想像在图像周围环绕文本一样“包裹”文本，但是没有图像可以做到这一点吗？

右边的文字是我想要的结果。 ![在此处输入图像描述](../Images/e841f5b777c4ab90423beae3385171d5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:54:14.303

您可以使用 CSS3 转换。

**[jsFiddle 示例](http://jsfiddle.net/j08691/ELv6g/1/)**

```
div {
    position:relative;
    width:300px;
    left: 40px;
    transform: skew(-20deg);
   -ms-transform: skew(-20deg); /* IE 9 */
   -moz-transform: skew(-20deg); /* Firefox */
   -webkit-transform: skew(-20deg); /* Safari and Chrome */
   -o-transform: skew(-20deg); /* Opera */
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:51:09.183

这是可能的，但它不能用漂亮的标记来完成。

看看[http://www.torylawson.com/index.php?title=CSS_-_Wrapping_text_around_non-rectangular_shapes](http://www.torylawson.com/index.php?title=CSS_-_Wrapping_text_around_non-rectangular_shapes)

[http://www.csstextwrap.com/](http://www.csstextwrap.com/) - 是一个在线工具，如果您想要“复制和粘贴”方法，它可能会有所帮助。

[http://www.jwf.us/projects/jQSlickWrap](http://www.jwf.us/projects/jQSlickWrap) - 如果不要求 IE 支持，它是一个用于非 ie 浏览器的 jquery 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:14:53.560

我设法编写了自己的小脚本。这个想法来自 jQSlickWrap，每行都有一个元素。

它是：http: [//jsfiddle.net/m4jLt/1/](http://jsfiddle.net/m4jLt/1/) 它还不完美，但经过一些调整，我认为它会工作得很好。那个小提琴有三个版本。（只是让你知道）

如果你做得更好，请分享:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T15:53:43.470

在现代浏览器中，您可以使用转换，但这也会扭曲内容（字母）。例子：

[http://jsfiddle.net/willemvb/LftMA/](http://jsfiddle.net/willemvb/LftMA/)

# asp.net-mvc - 在这个模式中业务逻辑应该在哪里？

> ID：12918521
> 
> 赞同：2
> 
> 时间：2012-10-16T15:47:33.370
> 
> 标签：asp.net-mvc, entity-framework, design-patterns, domain-driven-design, repository-pattern

这是我在阅读了很多关于 DDD、TDD 和 Repository / UnitOfWork 模式之后的第一次尝试，以制作我自己的应用程序。

我在 .NET 4.0 上使用实体框架、MVC 4（将运行此应用程序的服务器是 Windows 2003）

这是基本的简化模式逻辑（原始模式使用 IRepository、IUnitOfWork、GenericRepository 并使用 IEntity 接口扩展 EF POCO 以提供对公共 ID 字段的访问。但这个简化的示例足以提出我的问题）

```
View -> ViewModel -> Controller <- UnitOfWork <- Repository <- EntityFramework <- Database 
```

**看法**

```
Model.Employee.GetSeniority() 
```

**EmployeeDetailsViewModel**

```
Employee e { get; set; } 
```

**员工**

```
DateTime dateHired { get; set; }
TimeSpan GetSeniority()
{
    return DateTime.Today - dateHired;
} 
```

**控制器 EmployeeDetails()**

```
using(var unitOfWork = new UnitOfWork) {
    return View(EmployeeDetailsViewModel model = new EmployeeDetailsViewModel {
        e = unitOfWork.GetEmployeRepository().Find(o=>o.id == id)
    });
} 
```

**UnitOfWork GetEmployeRepository()**

```
return (_employeeRepository ?? _employeeRepository = new EmployeeRepository(this.dbContext)); 
```

**存储库查找（）**

```
dbContext.Configuration.EnableProxyCreation = false;
Employee e = dbContext.Employees.Where(expression);
dbContext.Configuration.EnableProxyCreation = true;
return e; 
```

一切实际上都正常工作。问题是我觉得这里有些地方很不对劲，我不确定应该在哪一层修复它。

在得到很多人（Hi Darin）的建议后，总是将 ViewModels 传递给视图而不是模型，我开始这样做。但是，我正在做的（我认为）并没有好多少。我只是将我的模型封装在视图模型中。起初，这听起来并没有那么糟糕，因为我的 Find() 方法会在获取对象之前关闭代理，这将导致 POCO 不了解持久性。但是，现在我想在 POCO 中添加一些逻辑，我觉得有什么问题。

我认为问题出在我的业务逻辑所在的位置以及我的 Employee POCO 应该映射到 DTO 对象的事实。但是，我应该在哪里将 Employee POCO 转移到 EmployeeDTO？那应该是存储库、控制器还是其他什么的任务？我也不确定我应该把我的业务逻辑放在哪里（就像示例中显示的 GetSeniority() 一样简单）。应该通过部分类将其添加到 EF POCO 中还是应该在 DTO 中？或者 Employee -> EmployeeDTO 转移中是否还有另一个缺失的步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:14:25.723

这是一个很好的问题。看起来您正在尝试找到非常棒的干净分离。我会解决这个问题。你有数据访问，你有 UI 显示，在两者之间你有你的业务逻辑。如果您想使用域模型方法，我将如何构建它。

*   永远不要在存储库之外公开 EntityFramework 实体类。您可以选择从存储库返回 Dto (POCO') 或域对象。如果您希望 Dto 进行更多分离，那很好，您只需要另一个层（例如服务层）将 Dto 转换为域对象。

*   将您的业务逻辑放入您的域对象中。因此 Domain.Employee.GetSenority() 将在您的域对象上。

*   任何不适合您的域对象的逻辑都可以驻留在您的 UnitOfWork 或服务层中。

*   在控制器中将域对象转换为 ViewModel。此时将 Employee.GetSenority() 映射到 MyViewModel.Senority 属性。基本上，您的 ViewModel 是一个 Dto，仅包含通常不多的视图特定逻辑。

*   你在哪里调用存储库。您可以使用 UnitOfWork 模式，也可以简单地创建一个服务层类。这里的关键是这些应该可用于其他应用程序类型。例如，如果您要编写桌面或 Windows 8 风格的应用程序，您可能希望将其中任何一个与您的域实体一起重用。

我相信你对此很开心。祝你好运。

# c# - 异常属于堆栈跟踪中的哪个方法？

> ID：12918523
> 
> 赞同：2
> 
> 时间：2012-10-16T15:47:35.973
> 
> 标签：c#, asp.net, debugging, exception, stack-trace

在堆栈跟踪中 - 异常是否发生在最后一个方法、最后一个方法之前的方法或将要遵循的方法中（即，由于异常，它没有走那么远）？

那么，在下面的示例中，Method3 是发生异常的方法吗？或者它是一个“方法4”（它只完成了方法3）？

```
STACK TRACE:
Method3()
Method2()
Method1() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T15:51:45.353

在 Method3 中引发了异常，堆栈跟踪的其余部分显示了 Method3 的调用链。[该线程](https://stackoverflow.com/questions/628565/display-lines-number-in-stack-trace-for-net-assembly-in-release-mode)也向您展示了如何在堆栈跟踪中获取行号（即使对于发布版本），这将准确说明抛出异常的位置。

# c# - 显示设置更改时 Windows 窗体控件的大小会更改

> ID：12918525
> 
> 赞同：1
> 
> 时间：2012-10-16T15:47:40.170
> 
> 标签：c#, .net, winforms, custom-controls

我正在开发一个 Windows 窗体项目。在这个项目中，控件的大小在设计器中设置，并且自动调整大小被关闭。然而，当 Windows 7 中的显示设置设置为*中 (125%)*或*大 (150%)*时，控件会更改大小。如何防止这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T15:53:35.140

您很可能*可以通过将表单的*[**`AutoScaleMode`属性**](http://msdn.microsoft.com/de-de/library/system.windows.forms.containercontrol.autoscalemode.aspx)设置为 来关闭此行为`AutoScaleMode.None`。

话虽如此，**不要**只是关闭自动缩放，因为它很可能是一件好事！它使您的表单可以在各种分辨率和字体比例设置下工作。例如，如果您设计表单但忘记了视力受损的用户（例如将系统字体缩放增加到异常高百分比的人），由于自动缩放，您的表单可能仍然有效。

正如其他答案所暗示的那样，**不要**根据固定像素值指定每个控件的位置和大小，然后关闭自动缩放，而是使用自动布局技术：

*   将控件放入各种容器元素中以排列控件（在网格中 - `TableLayoutPanel`，一个接一个 -`FlowLayoutPanel`等）；
*   设置每个控件的`Dock`和`Anchor`属性；
*   设置每个控件的`AutoSize`和`AutoSizeMode`属性。

正确执行此操作需要一些练习，但会使表单的布局更加健壮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:50:07.643

使用控件的 Anchor 和 Dock 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-03T14:13:40.663

在您的用户控件或表单上设置`AutoScaleMode`为`Dpi`

# php - 如何在我的网站上使用 fsockopen？

> ID：12918526
> 
> 赞同：0
> 
> 时间：2012-10-16T15:47:45.957
> 
> 标签：php, eval, fopen, fsockopen

我在我的网站上使用货币代码。具有以下内容：

```
<?php
$contents = file_get_contents('http://www.tcmb.gov.tr/kurlar/today.html'); 
$contents = iconv("windows-1254" , "utf8" , $contents);

$dollar = preg_match('~ABD DOLARI\s+(.+?)\s+(.+?)\s+~i', $contents, $matches) ? array('buying' => $matches[1], 'selling' => $matches[2]) : ''; 
$euro = preg_match('~EURO\s+(.+?)\s+(.+?)\s+~i', $contents, $matches) ? array('buying' => $matches[1], 'selling' => $matches[2]) : ''; 
$gbp = preg_match('~İNGİLİZ STERLİNİ\s+(.+?)\s+(.+?)\s+~i', $contents, $matches) ? array('buying' => $matches[1], 'selling' => $matches[2]) : ''; 
$chf = preg_match('~İSVİÇRE FRANGI\s+(.+?)\s+(.+?)\s+~i', $contents, $matches) ? array('buying' => $matches[1], 'selling' => $matches[2]) : ''; 

echo ' 
    <table class="form" style="background:#fff;width:300px;margin-left:14px;"> 
        <tr style="border-bottom:1px solid #e4e4e4;">
        .. 
```

但今天我的网站出现错误：

```
Warning: eval() (/var/www/vhosts/mysite.com/httpdocs/modules/php/php.module(80) : eval()'d code dosyasının 2 satırı) içinde file_get_contents() [function.file-get-contents]: http:// wrapper is disabled in the server configuration by allow_url_fopen=0. 
```

我确实向我的托管支持询问了这个问题，他们说：

“不要使用 fopen 选项，请使用 'fsockopen'” 但我不知道我该怎么做？

请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:33:34.520

那就改用`curl`吧。`file_get_contents`从远程服务器替换的功能是：

```
function get_web_page( $url ) {
    $options = array(
    CURLOPT_RETURNTRANSFER => true,     // return web page
    CURLOPT_HEADER         => false,    // don't return headers
    CURLOPT_FOLLOWLOCATION => true,     // follow redirects
    CURLOPT_ENCODING       => "",       // handle all encodings
    CURLOPT_USERAGENT      => "spider", // who am i
    CURLOPT_AUTOREFERER    => true,     // set referer on redirect
    CURLOPT_CONNECTTIMEOUT => 120,      // timeout on connect
    CURLOPT_TIMEOUT        => 120,      // timeout on response
    CURLOPT_MAXREDIRS      => 10,       // stop after 10 redirects
    );

    $ch      = curl_init( $url );
    curl_setopt_array( $ch, $options );
    $content = curl_exec( $ch );
    $err     = curl_errno( $ch );
    $errmsg  = curl_error( $ch );
    $header  = curl_getinfo( $ch );
    curl_close( $ch );

    $header['errno']   = $err;
    $header['errmsg']  = $errmsg;
    $header['content'] = $content;
        //If you want error information, 'return $header;' instead.
    return $content;
} 
```

从那里改变`$contents = file_get_contents('http://www.tcmb.gov.tr/kurlar/today.html');`到`$contents = get_web_page('http://www.tcmb.gov.tr/kurlar/today.html');`

# java - java计算重复的键值对？

> ID：12918527
> 
> 赞同：1
> 
> 时间：2012-10-16T15:47:48.273
> 
> 标签：java, count, compare

我有一个 Tuple 类，它有：

```
private class Tuple {
    private int fileno;
    private int position;

    public Tuple(int fileno, int position) {
        this.fileno = fileno;
        this.position = position;
    }
} 
```

我也有一个哈希图，它引用了这个列表，比如

```
 Map<String, List<Tuple>> index = new HashMap<String, List<Tuple>>(); 
```

现在有一个场景需要统计一个文件有多少个单词： 数据如下：

```
abc 10.txt
abc 10.txt
abc 10.txt
abc 12.txt
abc 12.txt
ghost 15.txt
and so on.... 
```

现在如何计算上述发生的次数？这很容易，但我已经编写了这么长时间的代码，而且对 java 也很陌生。我还了解到重复项不能进入 hashmap！谢谢。

要将数据添加到列表：

```
List<Tuple> idx = index.get(word);
                            if (idx == null) {
                                idx = new LinkedList<Tuple>();
                                index.put(word, idx);
                            }
                            idx.add(new Tuple(fileno, pos)); 
```

上面的代码只是转储数据，现在我将与字符串数组[]中的单词进行比较。我最后需要的是这样的： abc 10.txt count - 3 abc 12.txt count - 2 ghost 15.txt count - 1

我不确定 map 是否有帮助/我需要再次使用列表/编写函数来执行此操作？谢谢！

我用简单的条件语句解决了上述问题！谢谢@codeguru

```
/*
                     consider all cases and update wc as along
                     Lesson learnt - Map does not handle duplicates
                                    - List does not work
                                    - spend half a day figuring out 
                     */
                    if(wordInstance == null && fileNameInstance == null) {
                          wordInstance = wordOccurence;
                          fileNameInstance = files.get(t.fileno);
                    }
                    if(wordInstance == wordOccurence && fileNameInstance ==files.get(t.fileno)) {
                          wc++;
                    }
                    if(wordInstance == wordOccurence && fileNameInstance !=files.get(t.fileno)) {
                        wc=0;
                        fileNameInstance = files.get(t.fileno);
                        wc++;
                    }
                    if(wordInstance != wordOccurence && fileNameInstance ==files.get(t.fileno)) {
                        wc=0;
                        wordInstance = wordOccurence;
                        wc++;
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:54:35.973

我认为您可能使这比需要的更复杂。我建议你从电脑上退后一步。首先，您应该举一个简单的输入示例，并手动计算输出应该是什么。接下来，写几句话（用你的母语）描述你为计算出这个输出所采取的步骤。从那里开始，您需要完善您的描述，直到您可以轻松地将其翻译成 Java。

# php - 如何继续 PHP 中的 If 语句？

> ID：12918529
> 
> 赞同：-1
> 
> 时间：2012-10-16T15:47:54.833
> 
> 标签：php

假设我有一堆 if 语句。

假设其中一个已解决并且其中的代码运行。我是否可以这样做，以便如果我有其他一些失败的条件，它会退出 if 块，但是，继续检查其余的语句。例如

```
if(condition){

}elseif(condition2){
  //If this code runs, but there are some more conditions within it that fail. 
  //I want the code to continue but
  //continue checking condition3 and condition4\. Not exiting the whole block with 
  //continue, nor do I want it to start again.

}elseif(condition3){

}elseif(condition4){

}else{

} 
```

我希望这有点道理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:02:59.607

我不完全知道您的目标是什么，但是您可以使用 switch(true) 技巧并且不要调用 break；如果您想进一步检查案例。这是一些示例伪代码。

```
switch(true) {
  case <cond1>:
    <some action>
    break; // breaks the switch      
  case <cond2>:
    if (<cond2_1>) {
       <some action when cond2_1 is true>
       break; // breaks the switch
    }
    // if <cond2_1> failed, no break; is called, so execution continues with next case
  case <cond3>:
    <some action>
    break;
  default: ...      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:54:42.223

只需编写代码

```
if(condition){
}
if(condition2){
}
if(condition3){
}
if(condition4){
} 
```

如果条件为真，这将检查每个条件并独立运行每个条件。

# php - Zend PDF 和 Zend Guard Loader 入门

> ID：12918530
> 
> 赞同：0
> 
> 时间：2012-10-16T15:47:57.757
> 
> 标签：php, zend-framework, pdf, zend-autoloader

我正在尝试安装 Zend PDF，以便在我客户的共享主机帐户（媒体殿堂）上填写可编辑的 PDF。我现在启用了它，在 phpinfo [http://i.imgur.com/lDiLk.png](http://i.imgur.com/lDiLk.png)中确认，但在那之后，我找不到我需要开始的东西。如果我尝试加载 Zend_Pdf 类，我会收到“致命错误：未找到 Class 'Zend_Loader'”消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:50:59.020

这些是非常不同的。Zend Guard Loader 用于运行由 Zend Guard 编码的 PHP 脚本。Zend [Loader](http://framework.zend.com/manual/1.12/en/zend.loader.load.html)组件用于简化开发等。例如，这...

```
$pdf = new Zend_Pdf(); // what's Zend_Pdf, people? 
```

... 语句对 PHP 来说毫无意义，除非它知道什么是`Zend_Pdf`类。值得庆幸的是，在 PHP 中有一种自动导入这些文件的特殊机制——[自动加载](http://php.net/manual/en/language.oop5.autoload.php)。下面是使用 Zend_Loader 的方法：

```
set_include_path(
    implode(PATH_SEPARATOR, array(
        get_include_path(),
        PATH_TO_ZF_LIBRARY
    )));

require_once 'Zend/Loader/Autoloader.php';
$autoloader = Zend_Loader_Autoloader::getInstance();
...
$pdf = new Zend_Pdf(); // no error, as correct file should be imported automatically 
```

实际上，如果只有一个文件会使用 Zend 组件，则不需要使用自动加载机制。一个简单的`require_once`（没有双关语）就足够了：

```
require_once 'Zend\Pdf.php';
...
$pdf = new Zend_Pdf(); // oh, now I know all about Zend_Pdf! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T15:52:05.797

Zend Guard Loader 和 Zend Loader 不是一回事。Zend Guard 是另一个 Zend 产品，与 Zend Framework 无关。Zend Loader 是 Zend Framework 中类加载器的名称。

确保您的应用程序中有 Zend Framework 的副本，并且您已设置包含路径以指向该位置。

# java - 在java中使用charAt

> ID：12918533
> 
> 赞同：0
> 
> 时间：2012-10-16T15:48:05.803
> 
> 标签：java, compiler-errors

这是我的任务：

> 编写一个程序，用户输入一个字符串，程序将其回显到监视器，每行一个字符：

```
C:\>java LinePerChar
Enter a string:
Octopus

O
c
t
o
p
u
s 
```

我已经尝试过了，但是我遇到了一些编译错误。这是我的代码：

```
import java.util.*;

class CharactorEcho{
    public static void main(String args []){

        Scanner sc = new Scanner(System.in);

        System.out.println("Enter a string :");

        try {
            String inputString = sc.nextLine();
            for(int i=0; i < sc.length(); i++) {
                char c = inputString.charAt(i);
                System.out.println("" + c);
            }
        } catch(IOException e) {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T15:51:24.347

在您的循环中，您应该循环从`String`获得的长度`Scanner.nextLine`，而不是扫描仪本身。

```
for(int i=0; i<inputString.length(); i++){ 
```

如果您希望输入与*同一*行上的每个字符一起回显，请使用`System.out.print`而不是`println`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T15:54:55.240

**两个问题：**

更改`for(int i=0; i<sc.length(); i++){`为`for(int i=0; i<inputString.length(); i++){`

您关心与扫描仪而不是输入字符串进行比较。

**另外，请尝试捕捉**

```
 java.util.NoSuchElementException
   java.lang.IllegalStateException 
```

代替`IOException`, 作为你的声明`sc.nextLine()`与 throws`NoSuchElementException`和`IllegalStateException`, not `IOException`。

确保添加相关的导入语句。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T16:02:11.033

您需要导入`IOException`. 将此行添加到代码的顶部，`package`如果有的话，就在该行之后：

```
import java.io.IOException; 
```

另外，您要`sc`的是长度而不是字符串，因此请更改`for`为：

```
for(int i = 0; i < inputString.length(); i++) { 
```

真的，你不应该抓到`IOException`。事实上，你的代码永远不会抛出异常。这确实是您所需要的：

```
public static void main(String args []){

    Scanner sc = new Scanner(System.in);

    System.out.println("Enter a string :");

    String inputString = sc.nextLine();
    for(int i=0; i < sc.length(); i++) {
        char c = inputString.charAt(i);
        System.out.println("" + c);
    }
} 
```

调用made with只会在不可访问时抛出异常`nextLine`，甚至不会是，所以不用担心。`Scanner``System.in``System.in``IOException`

最后一个观察，你不需要`"" + c`在你的`println`. `System.out`有一个`println`专门用于的方法`char`，所以你可以调用：

```
System.out.println(c); 
```

# entity-framework - 与 EF5 的多对多 2 路关系

> ID：12918535
> 
> 赞同：0
> 
> 时间：2012-10-16T15:48:11.813
> 
> 标签：entity-framework, many-to-many, fluent

对于用户和角色之间的简单多对多关系，我有以下流畅的配置。我需要两种方式的导航属性，因此在角色中有一组用户，反之亦然。

当我在用户中插入一个新实体时，EF 尝试插入一个 Role_Id 列，当我使用以下映射它时。该列显然是 RoleId，而不是 Role_Id，而且它位于多对多表中。用户上不能有 Role_Id。

我想通过在双方都有一个集合，EF 会以某种方式感到困惑。

```
modelBuilder.Entity<User>().HasMany(_ => _.Roles).WithMany()
                        .Map(_ => 
                        {
                            _.MapLeftKey("UserId");
                            _.MapRightKey("RoleId");
                            _.ToTable("UserRole", "dbo");
                        }); 
```

当我尝试以另一种方式创建关系时，通过将以下配置放在上述配置之后，我得到一个异常，指出关系已经定义。

```
modelBuilder.Entity<Role>().HasMany(_ => _.Users).WithMany()
                    .Map(_ =>
                    {
                        _.MapLeftKey("RoleId");
                        _.MapRightKey("UserId");
                        _.ToTable("UserRole", "dbo");
                    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:17:03.030

我想通了，真的很简单，因为这种关系是我必须指定另一条腿的两种方式。

当导航是一种方式时，我拥有它的方式。这在导航有两种方式时有效。

```
modelBuilder.Entity<Role>().HasMany(_ => _.Users).WithMany(_ => _.Roles)
                    .Map(_ =>
                    {
                        _.MapLeftKey("RoleId");
                        _.MapRightKey("UserId");
                        _.ToTable("UserRole", "dbo");
                    }); 
```

# java - Android UI：在 RelativeLayout 中定位自定义 GIF 视图

> ID：12918543
> 
> 赞同：1
> 
> 时间：2012-10-16T15:48:40.357
> 
> 标签：java, android

因此，我创建了自己的自定义 GIFView 组件来显示动画 GIF。我的问题是 Android 无法将其正确放置到中心位置。我试图从各种来源中寻找这个，但大多数都是关于如何动态地做到这一点，而我想纯粹使用 XML 布局来做到这一点。

问题是这样的：

1.  如果我不覆盖“onMeasure()”，那么我的 GIFView 似乎占据了屏幕上的所有空间。这导致布局中的所有元素都被绘制到屏幕的最顶部。我的 GIF 就像一个进度条（高度 = 8px，宽度 = 152px），所以它不会占用太多高度。无论如何，Android 是这么认为的，并给它整个屏幕（我的解释基于对 onMeasure 方法的 MeasureSpecs 的解释）。动画现在位于 TextView 下方，但不在中心区域。相反，它位于该区域的左上角。

2.  如果我确实覆盖了“onMeasure()”，那么 TextView 将正确绘制在屏幕中间，并在其下方显示进度动画。但是，在这种情况下，动画 GIF 的位置也在该区域的左上角，而它应该在它的中间。

3.  如果我确实覆盖了“onMeasure()”，然后根据需要通过调用“setMeasuredDimension()”来设置测量值，但不要调用 super.onMeasure()，那么它的行为就像情况 (1) 中一样。这意味着布局占据了整个屏幕，我的 TextView 可以从屏幕的最顶部找到。

我不确定我是否有任何意义，所以我试着在这里给你数学意义上的想法（我无法发布截图，因为我是一个新用户）。因此，相对布局在 TextView 下方提供与屏幕一样宽 (screenWidth) 和所需高度 (paddingTop + paddingBottom + GIFView.getHeight()) 的区域。现在我想看到我的动画从以下位置开始绘制：(x = paddingLeft + (screenWidth - paddingLeft - paddingRight - GIFView.getWidth())/2) 和 (y = paddingTop)。相反，我看到 Android 将其绘制到位置 (x = 0) 和 (y = 0)。

我确信这里的问题是我刚刚忽略的问题，但如果有人有时间研究这个问题，我将不胜感激......

所以，我遇到这个问题的片段：

可样式声明：

```
<declare-styleable name="GIFView">
    <attr name="resourceId" format="reference" />
</declare-styleable> 
```

主要布局 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical"
   android:paddingLeft="10dip"
   android:paddingRight="10dip"
   android:isScrollContainer="true"
   android:background="#EFEFEF" >  

   <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:custom="http://schemas.android.com/apk/res/com.myown.smthg"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_centerHorizontal="true"
      android:layout_centerVertical="true"
      android:orientation="vertical"
      android:background="@drawable/background_white_gray"
      android:paddingLeft="16dip"
      android:paddingRight="16dip"
      android:isScrollContainer="true" >

  <TextView
     android:id="@+id/TextViewWaitReason"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:layout_gravity="center"
         android:gravity="center"
         android:paddingTop="12dip"
         android:paddingLeft="12dip"
         android:paddingRight="12dip"
         android:textColor="#343434"
         android:textSize="20sp" />

  <com.myown.smthg.util.GIFView
     custom:resourceId="@drawable/progress_bar"
     android:id="@+id/progressGIF"
     android:layout_below="@id/TextViewWaitReason"
     android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_gravity="center"
         android:gravity="center"
         android:paddingTop="0dip"
         android:paddingLeft="24dip"
         android:paddingRight="24dip"
         android:paddingBottom="16dip" />
  </RelativeLayout> 
```

然后GIFView.java的代码：

```
public class GIFView extends View {
// The resource id of the GIF
private int mResourceId;

// Movie to be shown
private Movie mMovie;
private long mStartTime;

// Size of this View
private int mHeight, mWidth;

/**
 * Constructor
 * 
 * @param context
 * @param attributes
 */
public GIFView( Context context, AttributeSet attributes ) {
    super( context, attributes );

    // Get the attribute for resource id
    TypedArray t = context.getTheme().obtainStyledAttributes( 
            attributes, R.styleable.GIFView, 0, 0 );

    mResourceId = -1;
    mMovie = null;
    mStartTime = 0;
    mHeight = 0;
    mWidth = 0;

    // This call might fail
    try
    {
        mResourceId = t.getResourceId ( R.styleable.GIFView_resourceId, -1 );

        mMovie = Movie.decodeStream( context.getResources().openRawResource( mResourceId ) );
        if( mMovie != null )
        {
            mWidth = mMovie.width();
            mHeight = mMovie.height();
        }
    }
    finally
    {
        t.recycle();
    }
}

@Override
protected void onMeasure (int widthMeasureSpec, int heightMeasureSpec)
{   
    final int desiredHSpec = MeasureSpec.makeMeasureSpec( mHeight, MeasureSpec.EXACTLY );
    final int desiredWSpec = MeasureSpec.makeMeasureSpec( mWidth, MeasureSpec.EXACTLY );
    setMeasuredDimension( desiredWSpec, desiredHSpec );

    super.onMeasure( desiredWSpec, desiredHSpec );
}

@Override
protected void onDraw( Canvas canvas )
{
    super.onDraw( canvas );

    // Return if we have no movie
    if( mMovie == null ) return;

    // Catch the time now
    long now = System.currentTimeMillis();

    // Catch the start time if needed
    if( mStartTime == 0 ) mStartTime = now;

    int relTime = (int)( (now- mStartTime) % mMovie.duration() );
    mMovie.setTime( relTime );
    mMovie.draw( canvas, 0, 0 );

    this.invalidate();
} 
```

}

如果这很重要，那么活动构造函数如下所示：

```
super.onCreate( savedInstanceState );
// Set the content view
setContentView( R.layout.layout_wait );

// Get the String to be shown
Intent intent = getIntent();
String waitStr = intent.getStringExtra( myService.EXTRA_TEXT );

// Set the done text
TextView t = (TextView)findViewById( R.id.TextViewWaitReason );
if( t != null && waitStr != null )
    t.setText( waitStr ); 
```

那么，为什么我不能让动画在文本下方和屏幕中央运行呢？如果我能解决这个问题，我会在这里发布修复...它与 onMeasure() 方法有关，因为覆盖它会改变一切。

片段免责声明：我不会在 onDraw() 的末尾留下那个 invalidate() ...

兄弟，提姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:02:17.193

好的，感谢所有有时间研究这个问题的人。我也这样做了，正如我所料，解决方案相当简单......

问题是我没有为我的视图声明正确的大小，只是声明它与 GIF 一样宽。因此，修复 onMeasure 以设置尺寸以采用所有给定的宽度，然后考虑填充并绘制正确的位置来修复所有问题。固定的代码片段：

新变量：

```
private int mDrawLeftPos; 
```

固定onMeasure

```
@Override
protected void onMeasure( int widthMeasureSpec, int heightMeasureSpec )
{   
    int p_top = this.getPaddingTop(), p_bottom = this.getPaddingBottom();

    // Calculate new desired height
    final int desiredHSpec = MeasureSpec.makeMeasureSpec( mHeight + p_top + p_bottom , MeasureSpec.EXACTLY );

    setMeasuredDimension( widthMeasureSpec, desiredHSpec );
    super.onMeasure( widthMeasureSpec, desiredHSpec );

    // Update the draw left position
    mDrawLeftPos = Math.max( ( this.getWidth() - mWidth ) / 2, 0) ;
} 
```

固定 onDraw

```
@Override
protected void onDraw( Canvas canvas )
{
    super.onDraw( canvas );

    // Return if we have no movie
    if( mMovie == null ) return;

    // Catch the time now
    long now = System.currentTimeMillis();

    // Catch the start time if needed
    if( mStartTime == 0 ) mStartTime = now;

    int relTime = (int)( (now- mStartTime) % mMovie.duration() );
    mMovie.setTime( relTime );
    mMovie.draw( canvas, mDrawLeftPos, this.getPaddingTop() );
} 
```

兄弟，提姆

# c# - 数千个临时 ASP.NET 文件的 ASP.NET 网站调试极其缓慢

> ID：12918550
> 
> 赞同：7
> 
> 时间：2012-10-16T15:48:56.317
> 
> 标签：c#, asp.net, .net, iis, webforms

我的团队负责维护一个遗留的 ASP.NET Webforms Web 应用程序项目。

我们目前正在使用 Visual Studio 2010，该项目的目标是 .NET Framework 4.0。

该项目有超过 200 个 ASCX 控件和近 900 个 RESX 资源文件。它会生成一个包含 2000 多个文件的 Temporary ASP.NET Files 文件夹。

这些临时文件中有121个.cmdline文件，151个.compiled文件，64个.delete文件，121个.err文件（都是0字节），121个.out文件，59个.pdb文件，121个.tmp文件，和 246 个 .cs 文件。

当我们开始调试项目时，它似乎需要很长时间才能加载（大约 5 分钟左右）。

调试输出窗口显示了许多类似于以下内容的行：

```
'w3wp.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\project\c8633237\88f5a808\App_Web_snat3rsu.dll' 
```

这些行出现得很慢，大约每秒一个，直到最终加载第一页。

在浏览器中加载第一页后，项目性能似乎是合理的，但到达那里似乎需要非常长的时间。

我正在寻找有关如何改善该项目的加载时间的建议。

我担心该项目存在根本性的问题需要解决，因为将其加载到调试器中需要 5 分钟似乎是不合理的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T17:30:17.027

加载时间（第一次编译）与您拥有的资源文件数量有关是正常的。第一次加载它会预编译东西，所以第二次运行它会更快。我会让你尝试实现这个网站上的内容。

[https://web.archive.org/web/20171230155418/http://blog.lavablast.com/post/2010/12/01/Slash-your-ASPNET-compileload-time.aspx](https://web.archive.org/web/20171230155418/http://blog.lavablast.com/post/2010/12/01/Slash-your-ASPNET-compileload-time.aspx)

# apache-flex - 如何在flex中将数据从一个组件传递到另一个组件

> ID：12918557
> 
> 赞同：0
> 
> 时间：2012-10-16T15:49:16.837
> 
> 标签：apache-flex, property-injection

我有一个名为 EmployeeResult 的类，我从服务中获取响应。在结果处理程序中，我得到了一组员工，如姓名、身份证、年龄等。在employeeView.mxml 文件中有一个dataGrid。在employeeView.mxml 文件中，我有一个ArrayCollection，它是数据网格的数据提供者。我想从 EmployeeResult 文件中更新该数组集合。在使用 Cairngorm 框架时，我使用了单例中的 arraycollection 来实现目标。在 mate 框架的情况下，我使用了 propertyinjector 标签。但是在没有任何框架的情况下，我如何实现这个目标。如何在不使用框架或单例类的情况下实现属性注入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:03:08.007

继续上一个问题：[如何监听由父组件调度的子组件内部的事件](https://stackoverflow.com/questions/12916727/how-to-listen-to-events-inside-the-child-component-dispatched-by-the-parent-comp)，您可以简单地调度一个包含该员工列表的自定义事件，并通知整个应用程序它的到来。

像这样的东西：

```
private function handleMyEmployeeResults(event:ResultEvent):void {
    var employees:IList = EmployeeResult(event.result).employeeList;
    dispatchEvent(new EmployeeEvent(EmployeeEvent.LIST_LOADED, employees, true));
} 
```

由于这是一个服务结果处理程序，我们可以假设它的类实例不是视图，因此它不在显示列表中，这就是事件不能冒泡的原因。为了解决这个问题，我们可以直接在`stage`.

```
FlexGlobals.topLevelApplication.stage.dispatchEvent(
    new EmployeeEvent(EmployeeEvent.LIST_LOADED, employees)
); 
```

您应用程序中的任何视图现在都可以侦听此事件并相应地设置其属性：

```
//inside View1
stage.addEventListener(EmployeeEvent.LIST_LOADED, handleEmployeesLoaded);

private function handleEmployeesLoaded(event:EmployeeEvent):void {
    myDataGrid.dataProvider = event.employees;
}

//inside View2
stage.addEventListener(EmployeeEvent.LIST_LOADED, handleEmployeesLoaded);

private function handleEmployeesLoaded(event:EmployeeEvent):void {
    myOtherKindOfList.dataProvider = event.employees;
    myFirstEmployeeLabel.text = 
        event.employees[0].firstname + event.employees[0].lastname;
} 
```

* * *

另一种更直接的方法是将您的`Application`用作单例。`employeeList`在您的主应用程序上创建一个可绑定属性。现在在结果出现时设置它的值：

```
private function handleMyEmployeeResults(event:ResultEvent):void {
    var employees:IList = EmployeeResult(event.result).employeeList;
    FlexGlobals.topLevelApplication.employeeList = employees;
} 
```

现在，您可以从应用程序中的任何位置绑定到此属性。

```
<View1>
    <s:DataGrid dataProvider="{FlexGlobals.topLevelApplication.employeeList}" />
</View1>

<View2>
    <s:List dataProvider="{FlexGlobals.topLevelApplication.employeeList}" />
</View2> 
```

尽管这种方法具有非常容易实现的优点，但它也具有单例的所有缺点（例如，可测试性差）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:00:35.340

鉴于您一直在问的问题类型，您确实应该考虑使用诸如[Robotlegs](http://robotlegs.org/)或[Mate](http://mate.asfusion.com/)之类的框架。它们为您提供了将应用程序连接在一起的工具，而没有可怕的黑客攻击，这些黑客攻击会限制您的灵活性或长期使维护复杂化。

[在此处](https://stackoverflow.com/questions/9509807/cairngorm-vs-mate-framework-comparison-in-flex)查看我之前的答案，以获取在没有框架、Mate 和 Robotlegs 的情况下完成的同一个项目的链接。

# youtube-api - Youtube 或 dailymotion 播放器 api 使用规则

> ID：12918558
> 
> 赞同：0
> 
> 时间：2012-10-16T15:49:18.367
> 
> 标签：youtube-api

我想开发一个使用dailymotion或youtube发布的视频的应用程序。我想知道使用本网站的播放器api是否有一些条件或法律规则。我的主要问题：我想做一个对视频起作用的应用程序，所以用户应该看并且不能交互。如果用户不能对视频采取行动，这会是一个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:56:46.327

YouTube API 服务条款规定了您可以使用 YouTube 数据和播放器 API 做什么和不可以做什么：

[https://developers.google.com/youtube/terms](https://developers.google.com/youtube/terms)

我无法回答具体的法律/政策问题——您应该自己阅读 ToS 并对其进行解释。

# android - Android 应用程序标签如何？

> ID：12918561
> 
> 赞同：0
> 
> 时间：2012-10-16T15:49:25.023
> 
> 标签：android, tabs

我正在尝试编写一个 android 应用程序，实际上已经有一段时间了，但我找不到关于我的问题的正确文档。我什至不知道从哪里开始。我需要的是能够将标签放入 android 操作栏，比如标签 x、y 和 z。我需要每个选项卡由一个活动或一个布局文件组成。所以说选择选项卡 x 将显示布局 1。y 布局 2 和 z 布局 3。或者 x 激活活动 1、y 活动 2 等。你明白了。我已经能够做到这一点。但是，我似乎无法做的是让 tab x 说出一个按钮，点击它后，它将执行一些操作。所以层次结构是这样的。

```
Main Activity
----Add Tabs (x,y,z) to action bar and assign each tab to a layout/activity. 
----Select Tab y
---------Show layout 2, which contains a button
---------click button > starts activity "blah"

Activity Blah
----DO something. 
```

我希望这是有道理的，但我已经搜索了 20 多个小时，根本找不到我需要的东西。谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:54:43.220

你想要的可能是[Intents](http://developer.android.com/reference/android/content/Intent.html)

# c# - .Net 图表没有被覆盖

> ID：12918563
> 
> 赞同：0
> 
> 时间：2012-10-16T15:49:27.563
> 
> 标签：c#, .net, web-config

我在使用 MSFT .Net Charts API 时遇到了一些困难。我希望图表图像不被删除

```
 deleteAfterServicing=false 
```

我希望它们每 15 分钟重写一次

```
 timeout=900 
```

但相反，每次我加载图表时，它都会创建一个新文件。如果我将 deleteAfterServicing 设置为 true，则文件不会保留（它们会立即被删除）

这是我的全部钥匙

```
<add key="ChartImageHandler" value="storage=file;timeout=900;dir=D:\StatTick\tempCharts\;deleteAfterServicing=false"/> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:04:05.860

这似乎是 API 的限制。无论哪种方式，我都重新编写了它，以便在代码中生成图表，使用 .SaveImage() 将其保存在我想要的位置，这样我就可以在我想要的任何时间间隔覆盖它。

# java - SD卡中的二维数组太慢了

> ID：12918565
> 
> 赞同：1
> 
> 时间：2012-10-16T15:49:34.393
> 
> 标签：java, android, multidimensional-array, matrix, sd-card

我正在开发一个用 Java 处理图像的项目。现在我遇到了太多 MB 的问题。我有大约 70,000 行和 500 列的矩阵，它存储在 SD 卡上。访问行和列太慢，因为没有二维数组或类似的东西。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:04:15.837

是的，我使用 sqlite，以下几点可以： 1\. 首先我从 SD 卡上的列中创建“矩阵” 2\. 第一种方法我需要“矩阵”中的所有行-（75000！）-非常慢 3\. 下一个方法我需要访问一些选定的行 aprox.-56% of all.,-并保存到另一个临时矩阵，如行 / 会好的，但是！4.在最后一种方法中，我需要从临时 Matirx 列或仅从临时矩阵 -1,1;2,2;2.1 等中获取点。但列会好 10 倍！当我保存列并读取行时出现问题......因为......没有像 Jama 中的二维数组 r 矩阵对象：，我需要一些技巧，或者一些想法。

# scala - 如何在scala中的两个日期之间获得工作日

> ID：12918574
> 
> 赞同：2
> 
> 时间：2012-10-16T15:49:51.017
> 
> 标签：scala, datetime, jodatime

如何在 Scala 中获取两个日期之间的工作日列表（不包括假期和周末）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:49:51.017

我使用 Joda Time 作为[这个问题中推荐的](https://stackoverflow.com/questions/2689379/how-to-get-a-list-of-dates-between-two-dates-in-java)使用时间的基础，我只是拿了代码并对其应用了一些 Scala 的爱！

```
import scala.collection.JavaConversions.asScalaIterator
import org.joda.time.DateTime
import org.joda.time.Days
import org.joda.time.DurationFieldType
import org.joda.time.DateTimeConstants

object DateHelpers {
  // populate with your own holidays, this is a small subset of canadian holidays
  private val holidays = List(
      new DateTime("2012-01-02").toDateMidnight(),
      new DateTime("2012-05-21").toDateMidnight(),
      new DateTime("2012-07-01").toDateMidnight(),
      new DateTime("2012-08-06").toDateMidnight(),
      new DateTime("2012-09-03").toDateMidnight(),
      new DateTime("2012-10-08").toDateMidnight(),
      new DateTime("2012-11-12").toDateMidnight(),
      new DateTime("2012-12-25").toDateMidnight(),
      new DateTime("2012-12-26").toDateMidnight()
      )

  def businessDaysBetween(startDate: DateTime, endDate: DateTime): Seq[DateTime] = {
    val daysBetween = Days.daysBetween(startDate.toDateMidnight(), endDate.toDateMidnight()).getDays()
    1 to daysBetween map { startDate.withFieldAdded(DurationFieldType.days(), _)} diff holidays filter { _.getDayOfWeek() match {
      case DateTimeConstants.SUNDAY | DateTimeConstants.SATURDAY => false
      case _ => true
    }}
  }
} 
```

# ruby-on-rails - ParserError 字符串到哈希的转换

> ID：12918580
> 
> 赞同：1
> 
> 时间：2012-10-16T15:50:07.457
> 
> 标签：ruby-on-rails, ruby

我需要将此字符串转换为哈希

```
{lhs: "1 Euro",rhs: "0.809656799 British pounds",error: "",icc: true} 
```

我试过这样

```
JSON.parse('{lhs: "1 Euro",rhs: "0.809656799 British pounds",error: "",icc: true}'.to_s)
JSON::ParserError: 757: unexpected token at '{lhs: "1 Euro",rhs: "0.809656799 British pounds",error: "",icc: true}' 
```

任何提示？

仅供参考 [http://www.google.com/ig/calculator?hl=en&q=1EUR=?GBP](http://www.google.com/ig/calculator?hl=en&q=1EUR=?GBP)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:55:37.407

您的字符串不是有效的 JSON 传输。必须引用所有键。

例如，这有效：

```
1.9.3:1 > require 'json'
 => true 

1.9.3:2 > s = '{"lhs": "1 Euro","rhs": "0.809656799 British pounds","error": "", "icc": true}'
 => "{\"lhs\": \"1 Euro\",\"rhs\": \"0.809656799 British pounds\",\"error\": \"\", \"icc\": true}" 

1.9.3:3 > JSON.parse(s)
 => {"lhs"=>"1 Euro", "rhs"=>"0.809656799 British pounds", "error"=>"", "icc"=>true} 
```

如果您无法将哈希字符串转换为有效的 JSON 传输，这应该可以解决问题：

```
1.9.3:1 > s = '{lhs: "1 Euro",rhs: "0.809656799 British pounds",error: "",icc: true}'
 => "{lhs: \"1 Euro\",rhs: \"0.809656799 British pounds\",error: \"\",icc: true}" 

1.9.3:2 > s.gsub(/(?<key>\w+)\:/, '"\k<key>":')
 => "{\"lhs\": \"1 Euro\",\"rhs\": \"0.809656799 British pounds\",\"error\": \"\",\"icc\": true}"

1.9.3:3 > JSON.parse(s.gsub(/(?<key>\w+)\:/, '"\k<key>":'))
 => {"lhs"=>"1 Euro", "rhs"=>"0.809656799 British pounds", "error"=>"", "icc"=>true} 
```

使用正则表达式：`/(?<key>\w+)\:/`，它捕获键，然后使用`gsub`添加引号。

# android - Android、FragmentActivity和防止Swipe

> ID：12918581
> 
> 赞同：0
> 
> 时间：2012-10-16T15:50:08.073
> 
> 标签：android, android-fragments, android-viewpager, android-fragmentactivity

我`android.support.v4.app.FragmentActivity`用于创建具有多个片段/面板的应用程序，可以通过在应用程序的不同部分之间拖动/滑动来访问。在我的一个片段中，我有一个可缩放视图，我的问题是如果我在可缩放视图上，我将阻止使用拖动/滑动到另一个片段。

我试图侵入`android.support.v4.view.ViewPager`以从触摸事件中获取操作但不起作用。

我已经尝试了所有这种情况但不起作用：（所有代码都是子类的一部分`android.support.v4.view.ViewPager`）

情况1：

```
// Not working
@Override
protected void onPageScrolled(int position, float offset, int offsetPixels) {
    if (isPreventDrag()) {
        super.onPageScrolled(position, 1, 0);
    } else {
        super.onPageScrolled(position, offset, offsetPixels);
    }
} 
```

案例二：

```
// Work but stop all event include the event to the target image view.
@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
    switch (ev.getAction()) {
        case MotionEvent.ACTION_DOWN:
            lastX = ev.getX(); // float 
            lockScroll = false;
            return super.onInterceptTouchEvent(ev);
        case MotionEvent.ACTION_MOVE:
            this.lockScroll = this.isPreventDrag();
            break;
    }
    if (lockScroll) {
        ev.setLocation(lastX, ev.getY());
        return super.onInterceptTouchEvent(ev);
    } else {
        return super.onInterceptTouchEvent(ev);
    }
} 
```

案例3：

```
// Work good, but by some unknown error I can drag the screen
// some pixels before this stop the event.
@Override
public boolean onTouchEvent(MotionEvent ev) {

    if (this.isPreventDrag()) {
        return true;
    } else {
        return super.onTouchEvent(ev);
    }
} 
```

如果允许使用切换到其他片段，我想要一种简单的方法来停用停止或停用。

这是我的工作代码，我不知道我以前犯了什么错误。

```
// This work for me,
@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
    if (this.isPreventDrag()) {
        return false;
    } else {
        return super.onInterceptTouchEvent(ev);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:54:22.253

我使用这个 ViewPager 类来控制 viewpager 的“可滑动性”：

```
public class MyViewPager extends ViewPager {

    public MyViewPager(Context context) {
        super(context);
    }

    public MyViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    private boolean blockSwipe = false;
    public void setBlockSwipe(boolean blockSwipe) {
        this.blockSwipe = blockSwipe;
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent arg0) {
        if (blockSwipe)
            return false;
        else 
            return super.onInterceptTouchEvent(arg0);
    }

} 
```

# c# - 滑块缩放控件动态不更新值

> ID：12918582
> 
> 赞同：0
> 
> 时间：2012-10-16T15:50:16.207
> 
> 标签：c#, windows-runtime, winrt-xaml

我通过编辑滑块模板并添加一个继承 Win RT 中的滑块基类的类来创建滑块比例控件。它将相对于滑块的最大值和最小值动态显示比例值创建除法。例如：如果最小值为 0，最大值为 100；它将显示 0,100,200,300 等。该方法从 OnApplyTemplate 覆盖调用

```
 public sealed class ScaleControl : Slider
{      
protected override void OnApplyTemplate()
    {
        base.OnApplyTemplate();
        SetScaleValues(this.Minimum, this.Maximum);
    }   

 private void SetScaleValues(double MinValue, double MaxValue)
    {
     //logic here
} 
```

}

如果我们在 XAML 中提供 Max 和 Min，它将正常工作。我的问题是“当我们通过后面的代码动态地提供 Slider Max 和 Min 时，它不会更新部门”。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T03:58:02.530

您可以尝试使用 WinRT XAML 工具包中的[PropertyChangeEventSource](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/0657c67a93d5#WinRTXamlToolkit/Controls/PropertyChangeEventSource.cs)控件。您可以检查[NumericUpDown](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/0657c67a93d5#WinRTXamlToolkit/Controls/NumericUpDown.cs)控件中的示例使用。

基本上你可以做类似的事情

```
var pcc =
    new PropertyChangeEventSource<double>(this, "Minimum");
pcc.ValueChanged += OnMinimumChanged;

private void OnMinimumCHanged(object source, double minimum) {} 
```

# c++ - 提取运算符 (>>) 可以覆盖变量吗？

> ID：12918585
> 
> 赞同：2
> 
> 时间：2012-10-16T15:50:26.210
> 
> 标签：c++, stringstream

我写了以下测试代码：

```
int main(int argc, char* argv[]) {
    stringstream ss;
    int num;

    ss << "54321";
    ss >> num;
    ss.str("");
    ss << "12345";
    ss >> num;

    fprintf(stderr, "%d\n", num);
} 
```

令我惊讶的是，结果是 54321。如何使用提取运算符 (>>) 正确覆盖变量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T15:54:15.427

第一次提取后，您到达了流的末尾，因此`eofbit`设置和第二次提取失败。

```
int main(int argc, char* argv[]) {
    stringstream ss;
    int num;

    ss << "54321";
    ss >> num;

    // eofbit was set above,
    // we need to clear it
    ss.clear();

    ss.str("");
    ss << "12345";
    ss >> num;

    fprintf(stderr, "%d\n", num);
} 
```

[`clear()`](http://en.cppreference.com/w/cpp/io/basic_ios/clear)在尝试第二次提取之前调用成员函数。~~第二个问题是内部 get 指针的位置，它不会自动重置。用来[`seekg()`](http://en.cppreference.com/w/cpp/io/basic_istream/seekg)设置。~~

编辑：被击中的东西不是必需的，[在这里](http://en.cppreference.com/w/cpp/io/basic_stringbuf/str)解释。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T16:01:17.573

当流到达流的末尾时，`std::ios_base::eofbit`被设置。在尝试提取任何日期之前，提取会检查是否设置了任何状态标志，如果是，则它不执行任何操作并且您的提取失败：

```
std::stringstream ss;
ss << "54321";
ss >> num; // sets eof:
std::cout << "eof: " << ss.eof() << "\n"; 
```

一旦设置了任何状态标志，要让流执行任何操作，您需要首先清除标志：

```
ss.clear();
ss << "12345";
if (ss >> num) {
    std::cout << "num=" << num << "\n";
}
else {
    std::cout << "failed to extract a value\n";
} 
```

就个人而言，我一般不使用输出运算符来设置字符串流的内容。相反，我通常使用该`str()`成员：

```
std::ostringstream out; // note: this is just an output string stream
...
out.clear();            // the clear is still needed
out.str("12345"); 
```

# php - 来自样式对象的 PHPExcel 特定单元格格式

> ID：12918586
> 
> 赞同：5
> 
> 时间：2012-10-16T15:50:26.487
> 
> 标签：php, phpexcel

我在一个项目中使用 PHPExcel，需要对 excel 表的单元格进行样式设置。

我所做的是创建一个这样的 PHPExcel 样式对象：

```
$style['red_text'] = new PHPExcel_Style(); 
```

然后我使用这种风格的集合函数来填充对象，如下所示：

```
$style['red_text']->getFont()
        ->applyFromArray(
                array('name'=>'Arial')
         ) 
```

现在我正在尝试在单元格中使用此样式对象。我尝试像这样使用 applyFromArray 函数：

`$objPHPExcel->getActiveSheet()->getStyleByColumnAndRow($x, $y)->applyFromArray( $style['red_text'] );`

我不认为这不是这样做的方法。对我来说，这是分配样式的最易读和最一致的方式，但如果有人更流利地使用 PHPExcel 可以指导我采用正确的方法，我将非常感激！

PS请原谅格式; 这是我的第一篇文章 ：）

编辑：刚刚发现错误：这`"Invalid style array passed"` 是否意味着我错误地创建了样式对象？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T16:03:11.423

从数组应用实际上是从数组应用，而不是从样式对象

```
$style['red_text'] = array(
    'font' => array(
        'name' => 'Arial',
        'color' => array(
            'rgb' => 'FF0000'
        )
    ),
);
$objPHPExcel->getActiveSheet()
    ->getStyleByColumnAndRow($x, $y)
    ->applyFromArray($style['red_text']); 
```

或者：

```
$style['red_text'] = array(
    'name' => 'Arial',
    'color' => array(
        'rgb' => 'FF0000'
    )
);
$objPHPExcel->getActiveSheet()
    ->getStyleByColumnAndRow($x, $y)
    ->getFont()
    ->applyFromArray($style['red_text']); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T05:55:17.180

你也可以这样做：

```
$objPHPExcel->getActiveSheet()
    ->getStyle('A1:B30')
    ->getFont()
    ->applyFromArray(
        array(
            'name' => 'Arial',
            'color' => array(
                'rgb' => 'FF0000'
            )
        )
    ); 
```

# sql-server - 在 SSRS 报表查看器 Web 控件中显示整个报表？

> ID：12918593
> 
> 赞同：4
> 
> 时间：2012-10-16T15:50:50.403
> 
> 标签：sql-server, reporting-services, reportviewer, multiple-browsers

因此，我的项目中的 WebForm 上有 SSRS Report Viewer Web 控件，它现在按预期工作。

由于打印按钮不会在 IE 以外的浏览器中自然呈现，因此我[在 Chrome 和 Firefox 中实现了此解决方案 SSRS 打印按钮，](https://stackoverflow.com/q/4208457/97879)以使这些浏览器中的用户仍然能够打印。

但是，我的一些报告是多页报告。一次显示整个报告会很有用，因此用户只需单击一次打印按钮。

我在控件中寻找了一个设置，但根本没有看到。由于我正在使用服务器报告，因此无法修改 RDL 以使页面“更大”。

我可以采取什么其他方法来一次显示整个多页报告？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T14:48:13.750

如果我理解正确，您希望交互式大小显示所有数据，但正常打印输出（通过 SSRS 按钮）使用正确的页面大小。

为此，您可以修改报表的**InteractiveSize Height**属性并将其设置为零 ( **0in** )。您可以在报告的属性页上找到它（如果未显示，请按**F4**键查看属性页）。它不显示在正常的报告属性对话框中——仅显示在属性窗口中。

这将使交互式报表无页面并一次性呈现所有报表数据。假设它不是非常大，这对于那些对交互式报表查看器上的分页感到恼火并且只想滚动浏览数据列表的人来说效果很好。

# facebook - 面向多租户应用程序的 Facebook Insights

> ID：12918598
> 
> 赞同：0
> 
> 时间：2012-10-16T15:51:04.970
> 
> 标签：facebook, multi-tenant, facebook-insights

我们有一个多租户应用程序，它代表许多不同的客户将新闻故事发布到我们拥有的网站上。这些故事随后由网站访问者在 Facebook 上分享。我们希望能够与我们的客户分享他们的故事的洞察数据。然而，Facebook 似乎只提供域级别的聚合洞察数据。因此，我们正试图找出如何最好地实现这一目标。

我们的一个想法是细分客户发布我们的新闻故事的网站，给每个客户一个子域，即client-a.website.com、client-b.website.com，...等，然后为每个客户端设置一个 Facebook 应用程序。根据[Facebook 的文档](http://www.facebook.com/help/157134244354040/)，这种方法应该可行。但是，我们有数百个客户，我不确定 A) 设置那么多 Facebook 应用程序是否可行；B) 即使可行，这是否是个好主意；似乎与可能的维护问题有关。

我们的另一个想法是以某种方式利用 Open Graph 来创建与我们的每个客户相关的对象。我相信您可以通过打开的图形对象获取聚合的 Insights 数据，但是，我不确定这是对象类型还是对象*实例*，例如，Recipe (Type) vs. Grandma's Mac+Cheese (Instance)。

无论如何，我很想知道是否有其他人以前处理过这个问题以及你可能采取的方法（好或坏）。

# java - Eclipse 插件性能随着时间的推移而降低

> ID：12918603
> 
> 赞同：0
> 
> 时间：2012-10-16T15:51:21.513
> 
> 标签：java, performance, eclipse-plugin, eclipse-rcp, jface

我有 2 个`views`A 和 B，每个都有一个`treeViewer`. B 在 A 中有一个to`listener`树。所以每次我在 A 中选择一个项目时，操作是：`selectionChanged``view``tree``selectionChanged`

1-`setInput`到`tree`B

2-应用过滤器

3-展开所有元素

这里的问题是每次我单击 A 中的树项时，对于树`View`A`View`中的相同选择，B 显示树项所需的时间每次都在增加。并且每次显示的项目都变慢。

操作的哪一部分`selectionChanged`可能导致此性能问题！？

经过一番调查，我发现这种方法`TreeViewer.expandAll()`是导致每次延迟大的原因之一。这是一个`Eclipse`问题还是我应该修改它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:59:12.053

性能错误很难被发现。在执行这些操作时，尝试观察系统的 CPU、磁盘活动和内存使用情况。检查您的代码以查看是否有任何未正确初始化的集合正在构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:59:58.203

另外，尝试安装一些分析器，我建议[YourKit Profiler](http://www.yourkit.com/)它有 1 个月的试用版，我认为这足以发现你的问题。它有很多很棒的特性，比如与 eclipse 的集成以及直接从分析器进入问题的地方。当我在性能上苦苦挣扎时，给了我很多帮助。

# struts2 - 使用 Struts2 渲染 html

> ID：12918604
> 
> 赞同：0
> 
> 时间：2012-10-16T15:51:22.847
> 
> 标签：struts2

使用 Struts2，我的目标是使用 Struts2 迭代器向用户展示一个简单的博客，例如：

最近的话题

*   回应 1
*   回应 2
*   ...

上一主题

*   回应 1
*   回应 2
*   ...

用户使用单独的表单生成和提交每个主题/响应，但是，一旦提交，我不希望他们编辑博客。

为了生成主题或响应，我提供了一个编辑器（就像我现在使用的 stackoverflow 编辑器），它可以生成 html 格式的文本，包括用户选择的任何样式（粗体、下划线、列表等）。用户创建的主题/响应的文本（包括 html 标记）存储在数据库中。

但是，我找不到在博客中将主题/响应呈现为 html 的方法。例如，编辑器中加粗的**文本**显示为`<strong>text</strong>`struts2 s:textarea 标记。

我知道 s:property 标签有一个 'escapeHtml' 属性可以防止这种情况发生，但是 s:property 标签不能正确布局文本，而且似乎只有 s:property 标签有这个属性。

我尝试`<input value="%{#topic.content}" />`在迭代器中使用而不是 s:textarea，但它似乎无法识别#topic 迭代引用。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:02:06.593

使用税收区域的文本。如果您仍然面临这个问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-09T06:20:54.223

使用 escapeHtml="false"。我自己试过了，它按预期工作。例如，使用：

```
<s:set var="var1"><p>some stuff</p><p>other stuff</p></s:set>

<s:property value="var1" escapeHtml="false" /> 
```

如您所料呈现段落标签。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T16:53:37.997

`<pre>`使用with怎么样`<s:property>`。

关于html`<pre>`标签： [http ://www.w3schools.com/tags/tag_pre.asp](http://www.w3schools.com/tags/tag_pre.asp)

# python - 什么是默认的 nltk 词性标签集？

> ID：12918606
> 
> 赞同：7
> 
> 时间：2012-10-16T15:51:28.630
> 
> 标签：python, nlp, nltk

在尝试使用 NLTK 词性标记时，我注意到`VBP`在调用`nltk.pos_tag`. 我注意到这个标签不在布朗语料库的词性标签集中。然而，它是 UPenn 标记集的一部分。

nltk 默认使用什么标签集？我在官方文档或 apidocs 中找不到这个。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T08:58:52.050

Ntlk 使用 PennTreebank 标记集。看看这个链接[http://nltk.org/api/nltk.tag.html](http://nltk.org/api/nltk.tag.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-20T07:19:56.073

它使用 Penn Treebank 项目中使用的 POS 标签。[您可以在“ http://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html](http://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html) ”上查看具有含义的标签列表

# 7zip - 7z 和 lzma 压缩机有什么区别？

> ID：12918607
> 
> 赞同：13
> 
> 时间：2012-10-16T15:51:30.670
> 
> 标签：7zip, lzma

7-Zip 声称使用[LZMA](http://en.wikipedia.org/wiki/Lempel%E2%80%93Ziv%E2%80%93Markov_chain_algorithm)作为压缩算法。但是，[LZMA SDK](http://www.7-zip.org/sdk.html)带有两个可执行文件，7zr.exe 和 lzma.exe，它们具有不同的选项/开关，并且会产生不同的结果，即使它们的大小非常接近，也无法互换。

所以问题是：这两个处理器有什么区别？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-17T16:30:42.763

我最终在 SourceForge 的 7-Zip 论坛中直接从 Igor Pavlov 收到了对类似问题的回复，所以我认为如果我在此处复制该回复可能对其他人有用。

> 1) .lzma 文件格式使用简单的头文件，它只支持 LZMA 方法，并且每个存档只支持一个文件。它不存储文件名。
> 
> 2) .7z 文件格式使用复杂的头文件，它支持不同的方法（包括 LZMA），并且它支持存档中的大量文件。
> 
> *   lzma.exe 仅适用于 .lzma 文件
> *   7zr.exe 支持 .7z 文件和 .lzma 文件。
> 
> lzma.exe 和 7z.exe 对 LZMA 使用不同的默认设置（字典大小和其他）。因此，您会看到压缩比的差异。如果您为 LZMA 设置相同的设置，则差异会更小。
> 
> [Sourceforge 论坛](https://sourceforge.net/projects/sevenzip/forums/forum/45797/topic/6029740)中的 Igor Pavlov

# php - CakePHP - BaseAuthenticate 改变 loginRedirect

> ID：12918611
> 
> 赞同：0
> 
> 时间：2012-10-16T15:51:39.447
> 
> 标签：php, cakephp, authentication, cakephp-2.0

我有许多扩展`BaseAuthenticate`类的身份验证组件。这些都是以正常方式在 AppController 中设置的。

**身份验证组件是否可以更改 AuthComponent 的 loginRedirect 变量？**

为了澄清这种情况，我的一个身份验证组件查看了用户的某个子集。在检查该人是否有任何未结发票之前，它会检查凭据是否有效。根据突出的价值，我想将用户重定向到给定的页面或完全阻止它们。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:22:41.470

是的，这是可能的。AuthComponent 的重定向位置只是一个会话变量（因此从技术上讲，它可以在任何地方设置）。

要更改重定向位置，您可以手动设置：

```
$this->Session->write('Auth.redirect', 'http://example.com'); 
```

在下一个请求中，它们将被 AuthComponent 重定向。

或者，让您的组件在那时和那里重定向它们：

```
$this->_Collection->getController()->redirect('http://example.com'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:50:54.813

非常感谢@jerermyharris 将我推向正确的方向。这与我最终做的事情有关。

**1.扩展了AuthComponent**

```
 App::uses('AuthComponent', 'Controller/Component');

    class MyAuthComponent extends AuthComponent {

      var $components = array('Session'); 

      public function identify(CakeRequest $request, CakeResponse $response) {
        if (empty($this->_authenticateObjects)) {
            $this->constructAuthenticate();
        }
        foreach ($this->_authenticateObjects as $auth) {
            $result = $auth->authenticate($request, $response);
            if (!empty($result) && is_array($result)) {
                if(isset($result['Redirect']))
                {
                    $this->Session->write('Auth.redirect', $result['Redirect']);            
                }
                return $result;
            }
        }
        return false;
      }
    } 
```

**2\. 添加这个 AppController 组件**

```
public $components = array(
        'Auth' => array(
            'className' => 'MyAuth',
        )
); 
```

围绕您对 AuthComponent 的任何其他定义添加这一点。

**3\. 从您的身份验证组件返回重定向**

```
App::uses('BaseAuthenticate', 'Controller/Component/Auth');

class TutorAuthenticate extends BaseAuthenticate {

    public function authenticate(CakeRequest $request, CakeResponse $response) {
        $user = ...... // However you authenticate your user
        $user['Redirect'] = "http://example.com";
        return $user;
    }
} 
```

所以现在如果你想基于用户进行重定向，你可以添加它，如果你不这样做，那么 cake 将遵循你在 AppController 中设置的指令。

哇，这似乎我不得不做额外的工作，但这是正确的做法。

# file - 如何在行、列中使用 fscanf 来获取值

> ID：12918615
> 
> 赞同：1
> 
> 时间：2012-10-16T15:51:46.727
> 
> 标签：file, scanf

我正在尝试读取包含值及其位置（行和列）的 .txt 文件，如下所示：

```
   0 0 1.00000000 1 1 1.00000000 2 2 1.00000000 0 3 2.00000000

```

我的问题是我不知道如何使用 fscanf 读取文件来分隔行、列和值。

我有文本文件，不是另一组下的一组数字，而是另一个旁边的一组数字。

# c# - 选择不同的值忽略一个字段

> ID：12918626
> 
> 赞同：0
> 
> 时间：2012-10-16T15:52:13.810
> 
> 标签：c#, .net, sql, sql-server, sql-server-2008

我有一张类似的桌子

```
Table(Id int, PropertyId int, UserId int, AccesedOn datetime) 
```

因此，该表可以为一个用户提供一个属性的值，但时间不同。

```
Eg.
1,100,5, 2012-10-16 16:24:48
2,100,5, 2012-10-17 11:22:00
3,100,5, 2012-10-18 17:10:05 
```

我在这里尝试的是为特定用户选择不同的属性，但按最近的访问时间排序。

此外，我将此表加入到其他三个表中，这会导致提供重复值。因此我必须使用`DISTINCT`命令。

我遇到的问题是，因为我做了`orderby AccesedOn`，它需要出现在 select 语句中，它不会带来不同的值，因为***AccesedOn***列具有不同的值。

对于上面的例子，它应该只返回`3,100,5, 2012-10-18 17:10:05`

有什么建议可以克服这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T15:59:17.987

```
;WITH CTE as(
select *,ROW_NUMBER() over (partition by PropertyId,UserId  order by AccesedOn desc) as rn
from table1)

select * from CTE where rn=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T15:58:20.220

您更有可能需要一个子选择，而不是为此需要一个独特的。

```
select * 
from Table A
where AccessedOn in
  (Select max(AccessedOn) from table B where A.UserId = B.UserId) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T16:05:28.363

而不是 using `DISTINCT`，您可以使用`MAX()`并按其余列分组

```
Select Id, PropertyId, UserId, MAX(AccesedOn)
From Table t
group by Id, PropertyId, UserId 
```

这应该会给你你正在寻找的结果。

# jquery - jQuery插件从函数调用函数

> ID：12918627
> 
> 赞同：0
> 
> 时间：2012-10-16T15:52:15.943
> 
> 标签：jquery, jquery-plugins, call

如何从同一个对象内部调用 jQuery 插件的函数。我使用确切的建议解决方案[http://docs.jquery.com/Plugins/Authoring#Plugin_Methods](http://docs.jquery.com/Plugins/Authoring#Plugin_Methods)。从外部代码我可以这样调用：

```
$('div').tooltip("myMethod", an_attr); 
```

但是当'this'不是插件的对象时，我怎么能从内部特别是表单事件中调用它。

```
var methods = {
    var $this = $(this);
    init : function( options ) {
        $this.click(function(){
            $this.fn2("myMethod", an_attr); //is it right way?

        });
    },
    fn2 : function() {
        //but how can I call the myMethod. here ?
    },
    myMethod : function() {... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:21:35.650

在`fn2`调用中`myMethod`，您可以执行以下操作：

```
...
fn2: function() {
  methods.myMethod();
}
... 
```

为确保`myMethod`与其他所有内容具有相同的上下文，您可以执行以下操作：

```
...
fn2: function() {
  methods.myMethod.call(this);
}
... 
```

更多细节在`call()` [这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)。

[这里](http://jsfiddle.net/edslocombe/UGbYz/)有一个 JS Fiddle 。

# excel - 将 ColB 和 ColC 中的数据移动到 ColA 中的数据下方

> ID：12918628
> 
> 赞同：2
> 
> 时间：2012-10-16T15:52:17.323
> 
> 标签：excel, csv

我尝试查找我需要做的事情，但我对 Excel 不是很好，所以我不确定如何搜索我正在尝试做的事情......在这里......

我有一个客户发给我的文件，我需要将其导出为 .csv 文件以便直接邮寄。她发送的内容包括 A 列下的所有 1463 个客户姓名、他们在 ColB 中的地址和在 ColC 中的第二个地址行。我需要将 .csv 文件导入到其中的程序需要将所有信息放在一列中，以便它读取的内容就像您可能读取信封上的地址一样，将整个名称和地址放在一个单元格中（每个条目一个单元格）。因此，我需要将 C 列中的数据移到 B 列中的数据下方，然后将该数据移到 A 列中的名称数据下方。

旁注：第三个地址行在城市和州之间确实有一个逗号，但我已经完成并删除了它们，因为我知道该文件不会正确导出 .csv 文件中的数据中的逗号。

在 Windows 7 上使用 Excel 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T16:59:51.393

1.  将公式分配到单元格 C1 中，您可以使用`=CONCATENATE(A1,CHAR(10),B1)`或`=A1&CHAR(10)&B1`
2.  复制单元格 C1 并将其粘贴到 C 列中的所有必需行
3.  右键单击 C 列标题并选择`Wrap Text`
4.  调整 C 列的大小，使所有行全部显示

如果您以 CSV 格式保存，系统会要求您确认不兼容的功能。如果您同意，则需要重复步骤 3 两次（Unwrap 然后再次 Wrap it），如果再次打开此文件，则需要重复步骤 4。公式将消失。我建议以 xls 或 xlsx 格式保存。

# maven - 不断收到 java.lang.OutOfMemoryError: PermGen space 错误

> ID：12918634
> 
> 赞同：1
> 
> 时间：2012-10-16T15:52:31.723
> 
> 标签：maven, maven-2, jvm, out-of-memory, jvm-crash

我需要在本地启动几台服务器。我时不时地收到“java.lang.OutOfMemoryError: PermGen space”错误。我试图通过以下命令增加我的 JVM 大小。出口 MAVEN_OPTS="-Xmx128m -XX:MaxPermSize=512m"

运行上述命令后，我看到 MAVEN_OPTS 已正确更新。$ echo $MAVEN_OPTS -Xmx128m -XX:MaxPermSize=512m

但是，在启动服务器几分钟后，出现内存不足错误。

$ 回声 $MAVEN_OPTS -Xmx512m:wq

有人可以告诉我是什么导致属性发生变化以及 :wq 来自什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:41:33.670

`wq`是`vim`保存和退出的命令。看起来你的 jvm 选项被破坏了。你可以删除它并重试。

增加`-XX:MaxPermSize`是正确的做法。

# c++ - 为什么定义纯虚函数有意义？

> ID：12918637
> 
> 赞同：24
> 
> 时间：2012-10-16T15:52:50.450
> 
> 标签：c++, class, polymorphism, virtual-functions

Scott 在《Effective C++, 3rd Edition, pg.》上说。43 要创建一个抽象类，我们只需要给它一个纯虚析构函数：

```
class AWOV {                  // AWOV = "Abstract w/o Virtuals"
public:
  virtual ~AWOV() = 0;        // declare pure virtual destructor
}; 
```

然后，他继续说有一个转折点：我们必须为纯虚析构函数提供一个定义：

```
AWOV::~AWOW() {}              // definition of pure virtual dtor 
```

我的问题是，通过指定`= 0`，对于纯虚函数，我们说该函数不能对声明这个纯虚函数的类有任何定义。

为什么在这里为纯虚拟析构函数提供定义（即使它是空的）也可以？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-16T15:56:34.450

> “我们是说函数不能对声明这个纯虚函数的类有任何定义。”

这不是纯虚拟的意思。纯虚拟只意味着包含的类不能被实例化（是抽象的），所以它必须被子类化，并且子类必须覆盖该方法。例如，

```
struct A {
    virtual ~A() = 0;
};

A::~A() {}

struct B : A {};

int main()
{
    A a;  // error
    B b;  // ok
} 
```

这里，`B`析构函数是隐式定义的。如果它是另一种纯虚拟方法，则必须显式覆盖它：

```
struct A {
    virtual void foo() = 0;
};

void A::foo() {}

struct B : A {};

int main()
{
    B b;  // error
} 
```

当基类必须是抽象的但仍提供一些默认行为时，需要为纯虚方法提供定义。

在析构函数的特定情况下，*必须*提供它，因为[它会](https://stackoverflow.com/a/677626/166749)在子类实例被销毁时自动调用。尝试使用没有定义的纯虚析构函数实例化类的子类的程序将不会通过链接器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-16T15:57:28.033

使其成为纯粹的派生（非抽象）类来实现自己的。

提供实现允许派生类调用基类行为（默认情况下析构函数会这样做）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-16T16:11:26.627

有2例。

## 纯虚析构函数

这种情况是由标准专门处理的。

### 12.4 析构函数 [class.dtor]

> 9）析构函数可以声明`virtual`（10.3）或纯`virtual`（10.4）；如果在程序中创建了该类或任何派生类的任何对象，则应定义析构函数。如果一个类有一个带有虚拟析构函数的基类，那么它的析构函数（无论是用户声明的还是隐式声明的）都是虚拟的。

析构函数的情况不同，因为所有析构函数在继承层次结构（假设正确删除）中以相反的构造顺序调用，即使不是显式的。因此，当对象被删除时会调用基类析构函数——这就是它需要实现的原因。

## 纯虚方法

它们与析构函数的不同之处在于它们不需要实现，也不需要实现。缺少要求的不同之处在于，当 a`Derived::foo()`被调用时，它不会自动调用`Base::foo()`（不是它可以，因为它可以实现或不可以实现）。

为什么要实现纯`virtual`方法取决于具体情况。我将纯说明符视为对程序员的提示，而不是与逻辑相关。它告诉你——程序员——**你应该实现那个方法**。基类是否有实现并不重要。

> 通过指定 = 0，对于纯虚函数，我们说该函数不能对声明此纯虚函数的类有任何定义。

并不真地。您是说派生的非抽象类必须覆盖该函数。这并不妨碍您自己实现它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T15:59:27.723

*对于所有纯虚*函数，这不是必需的。一点也不。

这样，派生类**仍然会被强制覆盖实现**，但基类中会有一个默认实现，**以****备*不时之需***。这就是这里的情况——因为你正在处理一个析构函数：当一个派生对象被销毁时，它的析构函数被调用*，它的基类析构函数也被调用*。这就是为什么您需要实现`A::~A`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T15:59:11.340

通过使函数成为纯虚函数，我们强制类的用户用派生类中的另一个函数替换该函数。

基类函数仍然可以调用`BaseClass::myfunction(...)`

现在，基类可能想要提供派生类可以使用的一些核心功能，如果它选择这样做的话。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-12-08T14:17:43.903

正确答案：假设类中有 2 个纯虚函数。现在假设两者都有实现。为 PVF 提供实现的原因是，如果通过实现这些 PVF 方法由子类派生基类，则基类方法可以充当默认行为（使类变得具体）

# asp.net - 如何在 32 位机器上编译 ASP .NET 网站并在 64 位机器上部署它

> ID：12918638
> 
> 赞同：0
> 
> 时间：2012-10-16T15:52:50.320
> 
> 标签：asp.net, 64-bit, 32-bit

我正在重组一个用 ASP .NET 编写的网站。我正在使用 2010 的 Vista 机器。预期的部署服务器是运行 IIS 的 64 位机器。

现在，我知道完全相同的代码可以在两台机器上运行，但我可能必须为部署服务器编译不同的代码。谁能指导我有关此和更改这些设置的正确设置？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:42:11.997

只需在项目属性中将“任何 CPU”设置为平台即可。您可以通过

构建-> 配置管理器...

而且您的网站可以在 x32 和 x64 上运行

# jquery - 通过 AJAX 延迟加载表单并在提交时显示 div

> ID：12918639
> 
> 赞同：1
> 
> 时间：2012-10-16T15:52:51.397
> 
> 标签：jquery

我正在使用 jQuery 通过 AJAX 加载表单。我想在用户被发送到返回 url 之前在提交时显示一个 div。我尝试了几种解决方案，但从未显示 div。

```
// Delay form from being submitted
$('#order-btn').live('click', function() { 
    $('#processing_alert').show('fast', function() {
        $('#order').submit();
    });
    return false;
}); 
```

理想情况下，我想将表单延迟一小段时间，以显示用户在发送表单之前有时间阅读消息。

# networking - 从子网掩码计算 IP 范围

> ID：12918644
> 
> 赞同：16
> 
> 时间：2012-10-16T15:52:53.850
> 
> 标签：networking, tcp, ip, subnet

比如说，我有一个 255.255.255.242 的子网，并且我在该子网中有一个已知的 IP，比如 192.168.1.101。

现在我计算IP范围的方式是这样的：

在子网掩码中，找到不是 255 的第一个八位字节。在我的示例中，它是第 4 个八位字节，它的 242。所以用 256 减去 242，得到 14。所以我们现在知道这些网络，即 192.168 .1.x 网络的范围都是 14。所以就开始列出它们吧……

```
192.168.1.0
192.168.1.14
192.168.1.28
....42
....56
....70
....84
....98
....112 
```

在这里我们可以停下来。我的地址 192.168.1.101 属于 .98 网络。.98 包含从 192.168.1.98 到 192.168.1.111 的所有 IP 地址，因为我们知道 192.168.1.112 启动下一个网络。

我想确认，这是否是正确和最简单的过程。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-16T18:45:29.800

网络掩码是一系列 1 位。这些位必须是连续的，没有 0 间隙。任何使用 1 位的东西都是网络的一部分，剩下的任何东西对于该网络内的主机分配都是有效的。255.255.255.224 有 27 个“1”位，这意味着它是 /27 网络。

要计算这一权利，您需要将 IP 转换为数字表示。例如，255.255.255.224 是 11111111 11111111 11111111 11100000 是 4294967264。192.168.1.101 是 3232235877 (11000000 10101000 00010001 01)。

如果您将 IP 和网络掩码按位与它，则为您提供网络地址。这是范围的底端：

```
11111111 11111111 11111111 11100000  (mask)
11000000 10101000 00000001 01100101  (ip)
-----------------------------------
11000000 10101000 00000001 01100000  = 192.168.1.96  (network address) 
```

掩码的补码（按位非）为您提供范围的大小：

```
00000000 00000000 00000000 00011111  = 31 
```

因此，该 IP 的范围在 192.168.1.96 - 192.168.1.127 之间。(127 = 96 + 31)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-30T02:31:19.997

感谢你们两个 Joe 和 dig_123，但是，Joe 的答案可以用 /28 子网来澄清，而不是所述 /27 女巫会更接近他的例子并且落在 92-112 之间。

所以，乔，如果我明白你的意思，你是说你采用子网八位字节；确定增量位值并将其添加到 SN 八位字节中的子网值，这应该给出范围并提供网络、第一个主机、最后一个主机和广播地址的值。那是对的吗？即在我的示例中，第 4 个八位字节为 240，增量为 16。由于第 4 个八位字节中的值为 96，因此它属于 16 位增量的计算范围内，实际上它介于 96 和 112 之间，即16 位范围之一，因此我们可以得出结论，此示例的网络地址是：

```
0-15
15-31
32-47
48-63
64-79
80-95
96-111
112-127
128
NW 192.168.1.96 /28
1st 192.168.1.97 /28
Last 192.168.1.110 /28
Bcast 192.168.1.111 /28 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-30T07:32:20.340

在乔的回答中添加一些内容：如果您想以编程方式进行操作（假设了解按位运算符）。

你已经知道只有最后一个数字会改变，但是这个方法可以以稍微不同的方式用于其他情况，我稍后会展示。

```
Number from mask: 224
Number from IP:   101 
```

使用例如 python 或你最喜欢的计算器程序：

*   `Start address byte: 224 & 101 = 96`
*   `End address byte: (~224 & 255) | 96 = 127`

`(~224 & 255)`只需将不是 244 中的一位（即最后 5 位）的每一位设置为一位；`96`仅从第一个地址复制前 3 位对结果进行或运算。

因此，结果是预期的：192.168.1。**96** - 192.168.1。**127** .

* * *

如果掩码在最后一个数字之前结束，则过程非常相似；让我们举个例子：

让我们使用 255\. **224** .0.0 作为掩码，并使用相同的 IP 地址 (192\. **168** .1.101)。

同样只有一个数字需要处理，现在是第二个数字：168。

*   `Start address byte: 224 & 168 = 160`
*   `End address byte: (~224 & 255) | 160 = 191`

现在，左边的数字（第一个位置）保持不变（192），右边的其余数字范围从 0 到 255（根据他们的要求，也可能是从 1 到 254）。

所以解决方案是：192\. **160** .0.0 - 192\. **191** .255.255

# php - PHP 事件源不断执行

> ID：12918650
> 
> 赞同：3
> 
> 时间：2012-10-16T15:53:08.650
> 
> 标签：php, javascript, html, server-sent-events

我开始使用 JavaScript EventSource 对象在 HTML5 中使用 push。我对 PHP 中的工作解决方案非常满意：

```
$time = 0;
while(true) {
    if(connection_status() != CONNECTION_NORMAL) {
        mysql_close()
        break;
    }
    $result = mysql_query("SELECT `id` FROM `table` WHERE UNIX_TIMESTAMP(`lastUpdate`) > '".$time."'");
    while($row = mysql_fetch_array($result)) {
        echo "data:".$row["id"].PHP_EOL;
        echo PHP_EOL;
        ob_flush();
        flush();
    }
    $time = time();
    sleep(1);
} 
```

但突然间，我的 WebApp 因 MySQL 错误“连接过多”而无法访问。

原来在 JavaScript 中关闭事件源后 MySQL 连接没有关闭：

```
window.onload = function() {
    sse = new EventSource("push.php");
    sse.onmessage = function(event) {
        console.log(event.data.split(":")[1]);
    }
}
window.onbeforeunload = function() {
    sse.close();
} 
```

所以我猜PHP脚本不会停止执行。有没有办法`die();`在客户端连接断开之前调用函数（如）？为什么我的脚本在调用`.close();`EventSource 后没有终止？！

感谢帮助！——</p>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T16:20:45.700

首先：当您将代码包装在一个巨大的`while(true)`循环中时，您的脚本将永远不会终止。*当您的脚本“没有执行的代码”*时，与数据库的连接将被关闭，但由于您已经编写了死锁，这不会发生......永远。
这不是`EventSource`问题，只是做了它应该做的事情。老实说，真的，可悲的是你的错。

问题是：用户连接到您的站点，并且`EventSource`对象被实例化。建立到服务器的连接并请求返回值的`push.php`请求。您的服务器按要求执行并运行脚本，这 - 再次 - 只不过是死锁。没有错误，所以只要 php.ini 允许它运行，它就可以继续运行。该`.close()`方法确实取消了输出流（或者应该取消），但是您的脚本正忙于执行其无限循环或休眠。假设由于客户端断开连接而停止脚本就像假设*任何*客户端都可能干扰服务器所做的事情。安全方面，这将是可能发生的最糟糕的情况。现在，回答您的实际问题：是什么导致了问题，如何解决？
答案：**标题**

看看[这个 PHP 小例子](http://www.html5rocks.com/en/tutorials/eventsource/basics/)：脚本不是在服务器端保持活动（通过无限循环），而是通过设置正确的标头。

就像旁注一样：请`mysql_*`尽快放弃，它正在被弃用（最终），使用`PDO`或`mysqli_*`代替。老实说，这并不难。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-22T22:56:03.277

我遇到了完全相同的问题，据我所知，原因是 apache 没有终止 php 脚本，直到我再次尝试通过关闭的套接字连接写入数据。

我的数据库中没有任何更改，因此没有输出。

为了解决这个问题，我只需在我的 while 循环中回显一个事件源注释，例如：

```
echo ": heartbeat\n\n";
ob_flush();
flush(); 
```

如果套接字连接关闭，这将导致脚本终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T15:57:15.997

您可能想尝试将其添加到循环中：

```
if(connection_status() != CONNECTION_NORMAL)
{
    break;
} 
```

但是当客户端断开连接时，php应该停止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T08:07:51.943

1.

```
window.onbeforeunload = function() {
    sse.close();
} 
```

这不是必需的，EventSource 将在页面卸载时关闭。

1.  即使在 PHP 上找不到检测断开客户端的方法，也可以在 N 秒后停止执行，EventSource 会自动重新连接。

[http://www.php.net/manual/ru/function.connection-aborted.php](http://www.php.net/manual/ru/function.connection-aborted.php) 此页面上的评论说，无论如何，你应该在 connection_status 之前使用“flush”，你应该在 N 秒后断开连接，因为你无法检测到“坏”断开连接。

3\. 回显“重试：1000\n”；// 用它来告诉 EventSource 重新连接延迟（以 ms 为单位）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-22T09:28:16.380

```
$time = 0;
while(true) { 
    if(connection_status() != CONNECTION_NORMAL) {
        mysql_close()
        break;
    }
    $result = mysql_query("SELECT id FROM table WHERE UNIX_TIMESTAMP(lastUpdate) > '".$time."'");
    while($row = mysql_fetch_array($result)) {
        $rect[] = $row;
    }
    for($i-0;$i echo "data:".implode('',$disp)."\n\n"; $time = time(); sleep(1);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-22T04:36:52.980

正如 Elias Van Ootegem 指出的那样，您的脚本永远不会终止，因此您有一堆 MySQL 连接处于活动状态。更令人担忧的是，您有大量资源以 PHP 循环的形式使用，而且看不到尽头！

不幸的是，保留的解决方案不是“标题”。在[Elias 引用的](http://www.html5rocks.com/en/tutorials/eventsource/basics/)此链接的示例中，php 脚本终止，客户端 javascript 实际上必须重新打开连接。您可以使用以下代码对此进行测试

```
source.addEventListener('open', function(e) {
  // Connection was opened.
    console.log("Opening new connection");
}, false); 
```

如果您按照他在 github 上的示例，在实现中作者实际上使用了一个在 X 秒后终止的循环。[请参阅脚本底部的 do 循环和注释。](https://github.com/html5rocks/www.html5rocks.com/blob/master/content/tutorials/eventsource/basics/static/demo/sse.php)

## 解决方案是给你的循环一个生命周期。

By defining a limit to the loop, IE X itterations or after X amount of time to trigger the end of the loop or `die();`, you will make it so that if the client disconnects there is a limit to how long a script will remain active. If the client is still there after X amount of time, they will simply re connect.

# django - 通过 admin.py 中表示的 ManyToMany 关系在我的数据库中添加值

> ID：12918651
> 
> 赞同：1
> 
> 时间：2012-10-16T15:53:11.347
> 
> 标签：django, django-admin, manytomanyfield

我有一个小问题，不幸的是，它占用了我所有的时间。

这真的很简单，我已经有了我的数据库，我创建了然后修改了 models.py 和 admin.py。一些需要在我的数据库中输入值的员工用户需要最简单的表格。

这是我的数据库：

* * *

- 表`NGSdb`。`line`

* * *

```
CREATE  TABLE IF NOT EXISTS `NGSdb`.`line` (
  `id` INT NOT NULL AUTO_INCREMENT ,
  `value` INT NOT NULL ,
  PRIMARY KEY (`id`) )
ENGINE = InnoDB;

CREATE UNIQUE INDEX `value_UNIQUE` ON `NGSdb`.`line` (`value` ASC) ; 
```

* * *

- 表`NGSdb`。`run_has_sample_lines`

* * *

```
CREATE  TABLE IF NOT EXISTS `NGSdb`.`run_has_sample_lines` (
  `line_id` INT NOT NULL ,
  `runhassample_id` INT NOT NULL ,
  PRIMARY KEY (`line_id`, `runhassample_id`) ,
  CONSTRAINT `fk_sample_has_line_line1`
    FOREIGN KEY (`line_id` )
    REFERENCES `NGSdb`.`line` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_sample_has_line_run_has_sample1`
    FOREIGN KEY (`runhassample_id` )
    REFERENCES `NGSdb`.`run_has_sample` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION) 
```

* * *

- 表`NGSdb`。`run_has_sample`

* * *

```
CREATE  TABLE IF NOT EXISTS `NGSdb`.`run_has_sample` (
  `id` INT NOT NULL AUTO_INCREMENT ,
  `run_id` INT NOT NULL ,
  `sample_id` INT NOT NULL ,
  `dna_quantification_ng_per_ul` FLOAT NULL ,
  PRIMARY KEY (`id`, `run_id`, `sample_id`) ,
  CONSTRAINT `fk_run_has_sample_run1`
    FOREIGN KEY (`run_id` )
    REFERENCES `NGSdb`.`run` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_run_has_sample_sample1`
    FOREIGN KEY (`sample_id` )
    REFERENCES `NGSdb`.`sample` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION) 
```

这是我的 models.py ：

```
class Run(models.Model):
    id = models.AutoField(primary_key=True)   
    start_date = models.DateField(null=True, blank=True, verbose_name='start date')
    end_date = models.DateField(null=True, blank=True, verbose_name='end date')
    project = models.ForeignKey(Project)
    sequencing_type = models.ForeignKey(SequencingType)
    def __unicode__(self):
        return u"run started %s from the project %s" % (self.start_date,self.project)

class Line(models.Model):
    id = models.AutoField(primary_key=True)
    value = models.IntegerField()
    def __unicode__(self):
        return u"%s" % str(self.value)

class RunHasSample(models.Model):
id = models.AutoField(primary_key=True)
run = models.ForeignKey(Run)
sample = models.ForeignKey(Sample)
dna_quantification_ng_per_ul = models.FloatField(null=True, blank=True)
lines = models.ManyToManyField(Line)
def __unicode__(self):
    return u"Sample %s from run %s" % (self.sample, self.run) 
```

这是我的 admin.py ：

```
class RunHasSamplesInLine(admin.TabularInline):
    model = RunHasSample
    fields = ['sample', 'dna_quantification_ng_per_ul', 'lines']    
    extra = 6

class RunAdmin(admin.ModelAdmin):
    fields = ['project', 'start_date', 'end_date', 'sequencing_type']
    inlines = [RunHasSamplesInLine]
    list_display = ('project', 'start_date', 'end_date', 'sequencing_type') 
```

如您所见，我的样本在运行表单中按行显示，以便工作人员可以轻松填写​​数据库。当我尝试填充数据库时，出现此错误：

> （1054，“'字段列表'中的未知列'run_has_sample_lines.id'”）

当然，我的数据库中没有字段“行”！这是一个多对多字段，所以我已经创建了我的中间表！

好吧好吧 ！所以我尝试为中间表（run_has_sample_lines）创建模型，并在 RunHasSample 模型中的 ManyToManyField 中添加“through”。但是，当我手动添加“通过”时，我无法使用 ManyToMany 字段。将行添加到管理视图的唯一方法是将它们堆叠成行......正如您所见，样本已经成行，不可能在已经成行的样本中放置新的“内联”......

最后，我只是想看看 django 用 manage.py sqlall 创建了什么。我看到 ：

```
 CREATE TABLE `run_has_sample_lines` (
    `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY,
    `runhassample_id` integer NOT NULL,
    `line_id` integer NOT NULL,
    UNIQUE (`runhassample_id`, `line_id`)
)
;
ALTER TABLE `run_has_sample_lines` ADD CONSTRAINT `line_id_refs_id_4f0766aa` FOREIGN KEY (`line_id`) REFERENCES `line` (`id`); 
```

run_has_sample 表上似乎没有外键，而我首先在数据库中创建了它。我想问题来自这里，但我无法解决它，我真的希望你能......

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:00:41.733

您可能希望在多对多关系上尝试“通过”属性并在 Django 中声明您的中间表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:23:20.803

我发现问题出在哪里...

在 ManyToManyField 中不是问题，而是在中间表中。Django 拒绝我的中间表没有唯一的 id ！

因此，在创建 django 的 sql 中，它自动创建了一个名为“id”的唯一 id，但在我的数据库中我没有创建一个（因为两个外键通常就足够了）。

下一次，我会更加小心。

# iphone - UIImageView 中的 UIImage 渲染失真

> ID：12918655
> 
> 赞同：0
> 
> 时间：2012-10-16T15:53:27.567
> 
> 标签：iphone, ios, uiview, uiimageview, uiimage

我在超级视图中有一个 UIImageView 3 个级别。（灰色矩形顶部的白色区域是我的超级视图，灰色拉长的矩形是一个子视图，黑色方块是拉长的灰色矩形的另一个子视图，齿轮是 UIImageView 的图像，它是黑色方块的子视图）。UIImageView 的边框矩形计算如下，其中 _normalImage 是一个 UIImage 对象。我在代表黑色方块的子类中执行此操作

```
 CGFloat xPoint = self.bounds.size.width/2 - _normalImage.size.width/2;
    CGFloat yPoint = self.bounds.size.height/2 - _normalImage.size.height/2;
    CGRect frameRect = CGRectMake(xPoint, yPoint, _normalImage.size.width, _normalImage.size.height);
    self.imageHolder = [[UIImageView alloc] initWithFrame:frameRect]; 
```

![在此处输入图像描述](../Images/8baa6c009a48ba2a8b099e90060e119e.png)

_normalImage 是 26X26，应该是一个完美的正方形。然而，图像呈现扭曲，就好像存在纵横比损失一样。

怎么了 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:02:17.960

尝试对您的坐标使用 floorf() 函数以防止它们包含小数部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:04:50.433

图像被拉伸是因为默认情况下它使用 UIViewContentModeScaleToFill 内容模式。

```
self.imageHolder.contentMode = UIViewContentModeScaleAspectFit; 
```

# jquery - JQuery 新闻自动收报机，但带有滚动文本

> ID：12918658
> 
> 赞同：0
> 
> 时间：2012-10-16T15:53:30.217
> 
> 标签：jquery, animation, jquery-plugins

**问题更新：** 我正在使用这个新闻自动收录器插件来显示列表中的内容。不幸的是，当我需要它来淡入淡出时，动画会使用某种类型的打字动画。

如何在没有打字动画的情况下将 Fiddle 示例中使用的动画更改为淡入/淡出？

希望有人可以提供帮助。

**JSFiddle 更新了控件：**

代码：http: [//jsfiddle.net/bleachie/AvFMZ/5/](http://jsfiddle.net/bleachie/AvFMZ/5/)

谢谢。

# python - Django 静态文件 - CSS 不起作用

> ID：12918665
> 
> 赞同：0
> 
> 时间：2012-10-16T15:53:47.597
> 
> 标签：python, django, django-urls, static-files

> **可能重复：**
> [Django 和服务静态文件](https://stackoverflow.com/questions/1179453/django-and-serving-static-files)

我在 base.html 加载 CSS 时遇到了一个问题。我把所有的css文件放在/static目录下。

在`urls.py`我把这段代码：

```
if settings.DEBUG:
    urlpatterns += patterns('',
        (r'^static/(?P<path>.*)$', 'django.views.static.serve',
           { 'document_root': '/home/bkcherry/botstore/botstore/static' }),
    ) 
```

在 base.html 我放了以下内容：

```
<link rel="Stylesheet" type="text/css" href="/static/css.css" /> 
```

当我转到 main.html 时，css 样式不起作用。我需要配置 settings.py `MEDIA_ROOT`，`MEDIA_URL`还是`STATIC_ROOT`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:27:58.513

你**不能**使用 MEDIA_ROOT 或 MEDIA_URL 这是上传的媒体而不是你的静态内容，你不需要设置 URL 模式，因为这仅适用于 django 1.2 或“如果你使用其他服务器进行本地开发”：[https：/ /docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development)

你需要有你的静态文件：botstore/botstore/static/botstore/css.css

然后使用：

```
HOME_ROOT = os.path.dirname(__file__)

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"

STATIC_ROOT = os.path.join(HOME_ROOT, 'staticfiles')

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# URL prefix for admin static files -- CSS, JavaScript and images.
# Make sure to use a trailing slash.
# Examples: "http://foo.com/static/admin/", "/static/admin/".
ADMIN_MEDIA_PREFIX = '/static/admin/'

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
) 
```

然后在您的 HTML 中，您可以这样引用您的静态文件：

```
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}botstore/css.css" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:11:53.070

如果您查看官方文档

```
from django.conf import settings

# ... the rest of your URLconf goes here ...

if settings.DEBUG:
    urlpatterns += patterns('',
        url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {
            'document_root': settings.MEDIA_ROOT,
        }),
    ) 
```

MEDIA_ROOT 最后应该有 / （[https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-MEDIA_ROOT](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-MEDIA_ROOT)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:06:31.623

我认为您需要在路径末尾使用斜杠，即`'/home/bkcherry/botstore/botstore/static/'`

# git - “git push.HEAD:refs/for/foo”有什么作用？

> ID：12918666
> 
> 赞同：1
> 
> 时间：2012-10-16T15:53:47.507
> 
> 标签：git, gerrit

我试图将新补丁集推送到 Gerrit 中正在审查的现有更改：

```
git push origin HEAD:refs/for/foo 
```

但它失败并显示更改已关闭。然后，我愚蠢地尝试：

```
git push . HEAD:refs/for/foo 
```

这似乎是成功的，但是当我检查 Gerrit 时，没有新的补丁集。我认为部分原因是我的提交评论不包含我想要推送到的 Gerrit 更改 ID。但是最后一个命令实际上做了什么？我该如何撤消它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:27:20.663

“ `.`” 参数的意思是“推送到这个存储库”，而 refspec 的`HEAD:refs/for/foo`意思是“获取 HEAD 指向的当前提交，并创建一个新的 ref（类似于一个分支，尽管它们通常存储为`refs/heads/something`），命名为`refs/for/foo`指向相同的提交”。

本质上，它是在当前提交时创建一个新的“分支”，但由于所需的名称不在正常的分支名称空间中，我们不能只使用`git branch refs/for/foo`.

您应该能够撤消它`git push . :refs/for/foo`- 命名一个空源以替换 ref。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:28:24.623

`git push`不仅接受远程名称，还接受地址（请参阅文档中的[Git URL](http://www.kernel.org/pub/software/scm/git/docs/git-push.html#URLS)）。特别是它接受到本地存储库的路径，因此`.`只是当前存储库并且您在其中创建了一个新的 ref。

您可以像往常一样删除它：

```
git push . :refs/for/foo 
```

# asp.net - 缩小日历

> ID：12918667
> 
> 赞同：0
> 
> 时间：2012-10-16T15:53:48.487
> 
> 标签：asp.net, .net

我的 ASPX 页面上有一个日历对象，一切正常，直到我的用户要求它更小。

我尝试设置高度和宽度。但它不会从默认大小减小日历，但是，如果我将它们设置为大于默认大小，它会增加大小。我只是坚持默认尺寸是最小的吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:46:50.930

我问了5分钟后的另一个答案……总是这样。

缩水的问题全部出在字体大小上。它不会自动缩小字体以适应较小的日历。所以我只是使用 CSS 来做到这一点：

```
font:12px arial,tahoma,sans-serif; 
```

它最终会缩小。

# css - 是否可以为 ap:first-line 添加边距

> ID：12918668
> 
> 赞同：1
> 
> 时间：2012-10-16T15:53:48.750
> 
> 标签：css, pseudo-class

为什么我不能像这样在 p 的第一行添加边距？

```
p:first-line{
 color:red; /* ok */
 margin-bottom:20px; /* nothing */
} 
```

[http://jsfiddle.net/xtb5M/](http://jsfiddle.net/xtb5M/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T15:56:22.963

根据**[W3C](http://www.w3.org/wiki/CSS/Selectors/pseudo-elements/%3afirst-line)**，边距属性不适用于`first-line`选择器：

::first-line 伪元素类似于内联元素，但有一些限制。以下 CSS 属性适用于 ::first-line 伪元素：

*   字体属性
*   颜色属性
*   背景属性
*   '字间距'</li>
*   '字母间距'
*   '文字装饰'
*   '垂直对齐'</li>
*   '文本转换'</li>
*   '行高'</li>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:17:27.250

你可以用 line-height 伪造它

```
p{
    margin-top:-10px;
}

p:first-line{
  color:red;  
  line-height: 40px;      
}​ 
```

[http://jsfiddle.net/willemvb/Y9M28/](http://jsfiddle.net/willemvb/Y9M28/)

# asp.net - ASP.NET：会话过期后保持变量值

> ID：12918669
> 
> 赞同：0
> 
> 时间：2012-10-16T15:53:49.587
> 
> 标签：asp.net, session, session-timeout

我正在开发一个会话必须在 15 分钟内到期的网站。15 分钟后，一旦用户单击任何按钮，就会被重定向到另一个页面。然而，我的问题是，在会话到期后，我需要维护一个整数变量中的一个值。

会话到期后保持此值的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T15:55:09.817

您需要将该值放在某个持久性介质上，可能是数据库或磁盘上的某个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:10:31.360

如果该值不安全（例如登录名或角色 ID 等），您可以将其放入 cookie 中。请注意，cookie 很容易被篡改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:43:21.993

如果您想存储同一页面，您可以使用视图状态或静态变量，或者您可以妥协安全并将数据存储在 cookie 中，可靠的方法是将数据存储在数据库中并通过在某些事件上使用触发器将其删除

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T16:02:04.357

这是一种选择。您可以将此 Int 维护为`ViewState`，但请记住，每个页面都有自己的页面`ViewState`，您无法在其他页面上访问一个页面的 ViewState。

# c - 使用 MPI 进行简单的消息交换

> ID：12918674
> 
> 赞同：0
> 
> 时间：2012-10-16T15:53:53.477
> 
> 标签：c, mpi

我有这个简单的 MPI 程序在两个处理器上运行。在我的示例中（或者可能只是在我的计算机上），我的控制台在发送消息之前输出接收消息。

我知道有一种使用 MPI 对接收进行排序的方法，但我认为我的示例将等待处理器 0 发送数据，因此接收输出必然是第二个。

发送消息后如何打印接收消息？

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <mpi.h>

int main(int argc, char *argv[]){
        int np, myId;
        char send[100], recv[100];

        MPI_Init(&argc, &argv);

        MPI_Comm_size(MPI_COMM_WORLD, &np);
        MPI_Comm_rank(MPI_COMM_WORLD, &myId);

        MPI_Status stat;
        if(myId == 0){
                int length = sprintf(send, "hey!"); 

                for(int i = 1; i < np; i++){
                        printf("send %d => %d (%d)", myId, i, length);
                        MPI_Send(send, length, MPI_CHAR, i, 0, MPI_COMM_WORLD);
                }

        }else if (myId == 1){
                MPI_Recv(send, 41, MPI_CHAR, 0, 0, MPI_COMM_WORLD, &stat); 
                printf("receive %d <= %d\n", myId, 0);
        }

        MPI_Finalize();
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:18:34.817

当并行写入共享缓冲区时，如果不使用并行 i/o 库，则无法保证首先清除哪个缓冲区。如果您希望它们按顺序出现，您应该在打印命令之后刷新输出缓冲区，例如，`fflush(stdout);`打印到每次自动刷新的缓冲区，例如，`fprintf(stderr,...);`或者用于`MPI_Barrier`分隔打印命令。不建议使用最后一种，因为它可能会导致性能不佳。

# ssl - Facebook 的 IE 9 安全警告 - 查看页面选项卡时的相关文件

> ID：12918675
> 
> 赞同：1
> 
> 时间：2012-10-16T15:53:54.897
> 
> 标签：ssl, facebook-javascript-sdk, facebook-page

我有一个页面标签应用程序。托管我的应用程序的网站启用了 SSL。当我使用 IE9 查看页面选项卡时，我收到一个不安全的内容错误，在我的控制台中我可以看到：

```
HTTPS security is compromised by http://static.ak.facebook.com/connect/xd_arbiter.php?version=11 
```

仅当我使用常规 http 协议查看页面选项卡时，例如：

```
http://www.facebook.com/mypage/myapp 
```

如果我安全地查看 Facebook，它就不会发生，例如：

```
https://www.facebook.com/mypage/myapp 
```

该应用程序使用 JavaScript SDK，但我正在做一些事情以确保它使用安全版本，例如：

```
FB._https = true; 
```

前

```
FB.init() 
```

当我链接到 SDK 时，我确定我使用的是安全连接：

```
(function (d) {
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) { return; }
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "https://connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
} (document)); 
```

如果我直接在我的服务器上查看页面，我不会收到这些错误，它只会在页面选项卡内查看时发生**。**我在想 Facebook 正在发出这个不安全资源的调用。我已经完成了很多搜索，但找不到解决此问题的方法。任何人都可以推荐一种方法来处理这个问题吗？任何帮助将不胜感激。谢谢！

# plsql - 无法将值存储到 oracle 中的嵌套表中

> ID：12918676
> 
> 赞同：1
> 
> 时间：2012-10-16T15:53:55.250
> 
> 标签：plsql, oracle11g

我正在尝试编写一个函数来根据用户在月度报告中所做的选择来显示月度数据的值。下面的代码片段只是试图在嵌套表中获取值，一旦数据成功加载到嵌套表中，我将调用该函数来显示表。我尝试了几件事；但是在加载数据时遇到了问题。下面是创建此函数的 2 个不同的 SQL，但它们都在错误值方面得到相同的错误；我尝试了几件事但无济于事：

片段1：

```
/* Formatted on 10/16/2012 8:40:45 AM (QP5 v5.215.12089.38647) */

CREATE OR REPLACE TYPE tempObject AS OBJECT
(
   kpiid number,
   kpigroup VARCHAR2 (300)
);

CREATE OR REPLACE TYPE tempTable AS TABLE OF tempObject;

CREATE OR REPLACE FUNCTION KPI_HORIZON.Monthly_All_Data (
   mainarea IN VARCHAR2)

   RETURN tempTable
IS
   MonthlyData   temptable := temptable ();
   n             INTEGER := 0;

BEGIN

   IF (mainarea = 'ALL')

   THEN
      FOR r IN (SELECT DISTINCT kpiid, kpigroup
                  FROM kpi_summary_reporting
                 WHERE kpifrequency = 'Monthly' AND active_ind = 'Y')
      LOOP
         monthlydata.EXTEND;
         n := n + 1;
         monthlydata (n) := tempobject (r.kpiid, r.kpigroup);
      END LOOP;
  END IF;

   RETURN MonthlyData;
END; 
```

错误：[错误] PLS-00306 (26: 29)：PLS-00306：调用“TEMPOBJECT”时参数的数量或类型错误

片段2：

```
/* Formatted on 10/16/2012 8:27:22 AM (QP5 v5.215.12089.38647) */
CREATE OR REPLACE TYPE tempObject AS OBJECT
(
   kpiid NUMBER,
   kpigroup VARCHAR2 (300)
);

CREATE OR REPLACE TYPE tempTable AS TABLE OF tempObject;

CREATE OR REPLACE FUNCTION KPI_HORIZON.Monthly_All_Data (
   mainarea IN VARCHAR2)
   RETURN tempTable
AS
   MonthlyData   temptable := temptable ();
BEGIN
   IF (mainarea = 'ALL')
   THEN
      SELECT DISTINCT ksr.kpiid, ksr.kpigroup
        INTO MonthlyData 
        FROM kpi_summary_reporting ksr
       WHERE kpifrequency = 'Monthly' AND active_ind = 'Y';
   ELSE
      SELECT DISTINCT kpiid, kpigroup
        INTO MonthlyData
        FROM kpi_summary_reporting;
   END IF;

   RETURN MonthlyData;
END; 
```

错误：[错误] ORA-00947 (24: 9): PL/SQL: ORA-00947: 没有足够的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:03:00.573

我会做这样的事情，假设数据足够小，将它完全加载到服务器 PGA 中的嵌套表中确实有意义。如果数据量较大，您可能希望使用流水线表函数。

由于您的嵌套表是对象类型表，因此您需要使用对象类型构造函数。

```
CREATE OR REPLACE FUNCTION KPI_HORIZON.Monthly_All_Data (
   mainarea IN VARCHAR2)
   RETURN tempTable
IS
   MonthlyData   temptable;
BEGIN
   IF (mainarea = 'ALL')
   THEN
      SELECT tempObject( kpiid, kpigroup )
        BULK COLLECT INTO monthlydata
        FROM kpi_summary_reporting
       WHERE kpifrequency = 'Monthly' 
         AND active_ind = 'Y';
   END IF;

   RETURN MonthlyData;
END; 
```

当我在查询中看到 a 时，我总是很怀疑`DISTINCT`。您真的希望获得需要删除的重复行吗？如果没有，你会得到更好的服务，`DISTINCT`就像我在上面所做的那样。如果您真的需要`DISTINCT`，那么您的对象类型将需要一个`MAP`或 一个`ORDER`方法，这会使示例变得有点复杂。

这项工作的演示

```
SQL> CREATE OR REPLACE TYPE tempObject AS OBJECT
  2  (
  3     kpiid NUMBER,
  4     kpigroup VARCHAR2 (300)
  5  );
  6  /

Type created.

SQL> CREATE OR REPLACE TYPE tempTable AS TABLE OF tempObject;
  2  /

Type created.

SQL> create table kpi_summary_reporting (
  2  kpiid integer,
  3  kpigroup varchar2(300),
  4  kpifrequency varchar2(30),
  5  active_ind varchar2(1)
  6  );

Table created.

SQL> insert into kpi_summary_reporting values( 1, 'Foo', 'Monthly', 'Y' );

1 row created.

SQL> ed
Wrote file afiedt.buf

  1  CREATE OR REPLACE FUNCTION Monthly_All_Data (
  2     mainarea IN VARCHAR2)
  3     RETURN tempTable
  4  IS
  5     MonthlyData   temptable;
  6  BEGIN
  7     IF (mainarea = 'ALL')
  8     THEN
  9        SELECT tempObject( kpiid, kpigroup )
 10          BULK COLLECT INTO monthlydata
 11          FROM kpi_summary_reporting
 12         WHERE kpifrequency = 'Monthly'
 13           AND active_ind = 'Y';
 14     END IF;
 15     RETURN MonthlyData;
 16* END;
 17  /

Function created.

SQL> select monthly_all_data( 'ALL' ) from dual;

MONTHLY_ALL_DATA('ALL')(KPIID, KPIGROUP)
--------------------------------------------------------------------------------
TEMPTABLE(TEMPOBJECT(1, 'Foo')) 
```

# php - file_get_contents / curl 使用浏览器 ip 还是服务器 ip？

> ID：12918681
> 
> 赞同：1
> 
> 时间：2012-10-16T15:54:26.287
> 
> 标签：php, xml, curl, ip, file-get-contents

我目前正在对仅限于某些 IP 地址的 xml 提要进行采样。我的个人 IP 地址亮了绿灯，我可以通过浏览器访问提要，而 file_get_contents 在从本地主机运行时也能够访问提要。

我将站点移动到生产服务器，其 ip 地址应该为提要亮起绿灯（我让他们仔细检查），现在相同的文件获取内容不再有效。我目前正在通过从我的浏览器访问某个 url 来触发 file_get_contents，在我验证提要正常工作后，我将对其进行更改。由于我从浏览器触发它，我想知道它是否以某种方式使用了错误的 ip。

我现在用 curl 和 file_get_contents 都试过了，得到了相同的结果，来自提供提要的服务器的 401 未经授权的返回，所以我认为提要公司可能只是没有将生产服务器 ip 添加到绿灯列表呢。

有没有什么特别的东西需要在生产服务器上实现而不会在我的本地主机上实现，这可能会阻止我访问提要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T15:55:35.370

请求是从服务器发出的，因此它将使用服务器的 IP。

# php - 菜单中的 Wordpress 自定义链接不起作用

> ID：12918687
> 
> 赞同：4
> 
> 时间：2012-10-16T15:54:44.413
> 
> 标签：php, wordpress

我正在使用空白主题模板来创建 wordpress 主题，并通过将以下代码添加到 header.php 来启用菜单：

```
<body <?php body_class(); ?>>
    <div id="navbar"></div>

    <div id="wrapper" class="clear">

        <nav> 
                <?php wp_nav_menu( array('theme_location' => 'primary' ) ); ?>

        </nav> 
```

我将它添加到functions.php：

```
if (function_exists('register_nav_menus')) {
    register_nav_menus(
        array(
            'main_nav' => 'Main Navigation Menu'
            )
        );
}; 
```

当我添加指向页面的链接时，菜单显示并且工作正常，但是当我添加自定义链接以说带有 Google 标签的[http://www.google.com](http://www.google.com)时，导航栏中没有显示任何内容。当我查看源时，根本没有填充自定义链接。

![使用 google.com 进行测试](../Images/4e3d082b5c11a584df5635c20b5d4e43.png)

```
<nav>                  
       <div class="menu">
          <ul>
              <li class="page_item page-item-9"><a href="http://localhost/wordpress/anatomy/">Anatomy</a></li>
              <li class="page_item page-item-11"><a href="http://localhost/wordpress/history/">History</a></li>
              <li class="page_item page-item-7"><a href="http://localhost/wordpress/home/">Home</a></li>
          </ul>
       </div>
</nav> 
```

我的导航 CSS 很简单：

```
 nav {
    padding:0;
    margin:0;
    position:absolute;
    width: 900px;
} 
nav ul li
    {list-style: none;
    font-family: 'Numans', sans-serif;
    font-size: 15px;
    color: #ffffff;
    text-align:left;
    text-transform: uppercase;
    padding: 0;
    margin: 0 30px;
    display: inline;
    position: relative;
    top:-32px;
}  
nav ul li a {
    text-decoration: none;
    color: #ffffff;
}
nav ul li a:visited 
    {color: #ffffff;
}
nav ul li a:hover
    {color: #cccccc;
}
nav ul li a:active 
    {color: #ffffff;
} 
```

我对 php 和 wordpress 主题非常陌生，我在网上找不到有同样问题的人。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T15:56:45.397

问题是您`theme_location`在注册菜单时指定的名称不匹配。

当您注册菜单时，您调用了它`main_nav`。既然您这样称呼它，为了显示该菜单，您需要将对菜单的调用更改为 reference `main_nav`，如下所示：

`wp_nav_menu( array('theme_location' => 'main_nav' ) );`

# android - 解决问题

> ID：12918691
> 
> 赞同：0
> 
> 时间：2012-10-16T15:54:56.753
> 
> 标签：android

我有一台分辨率为 800*480 的设备。我创建“Hello word”应用程序。然后我在 MainActivity 的 onCreate 中得到 DisplayMetrics。

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
Log.d("Resolution", "resolution: " + metrics.widthPixels + " x " + metrics.heightPixels); 
```

在 DisplayMetrics 中有 533*320 像素。为什么？

如何申请分辨率为 800*480 像素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:58:14.893

那是因为你不`device independent pixels`读书`real pixels`。这些`dip`等于`mdpi`分辨率。因此，尽管实际屏幕尺寸，您应该检查它的**密度**（`mdpi`或`hdpi`或`xdpi`），然后将您的高分辨率资产放在`-hdpi`后缀文件夹中（即`drawable-hdpi`或`layout-hdpi`）。通常你设置你的布局`dp`（所以每个活动一个布局 XML 文件通常就足够了，你应该像往常一样把它们放在通用`res/layout`文件夹中）。然后放入高分辨率可绘制对象以使应用程序在`hdpi`设备上看起来更好

有关像素大小和密度关系的信息，请参阅[本文...](http://developer.android.com/guide/practices/screens_support.html#testing)

# core-data - 多对多实体和 NSPopUpButton

> ID：12918695
> 
> 赞同：0
> 
> 时间：2012-10-16T15:55:08.773
> 
> 标签：core-data, many-to-many, nsarraycontroller, nspopupbutton

全部。

实体：

```
[Library {title}] <-->> [Book {title}] <<-->> [Author {name}] 
```

控制器：

```
NSArrayController [Library] => {Entity: Library}
NSArrayController [Book] => {Entity: Book, ContentSet: Library, books}
NSArrayController [Author] => {Entity: Author, ContentSet: Book, authors}
NSArrayController [Authors] => {Entity: Author} 
```

形式：

```
[ NSPopUpButton *]
[ NSTableView **]
[ add ] [ remove ] 
```

> * 按钮从 NSArrayController [Author w/o contentset option] 获取内容
> 
> ** 表从另一个 NSArrayController 获取内容 [作者将 contentset 选项设置为 Library.books]

问题：

> 我如何从作者实体将作者添加到 Book.authors 中？（任何一本书都使用以前的作者）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:11:16.617

1) 设置 PopUpButton 属性

```
 {
     Content: NSArrayController [Authors], ArrangedObjects
     Content Values: NSArrayController [Authors], ArrangedObjects, name
     Selected Index: NSArrayController [Authors], selectionIndex
   } 
```

2）添加

```
@property (assign) IBOutlet *authorsController, *bookController; 
```

并将其与 NSArrayControllers 链接

3）添加此代码并与按钮链接：

```
- (IBAction)insertSelectedItem:(id)sender
{
    MOAuthor *author = self.authorsController.content[self.authorsController.selectionIndex]; // get current (selected) author

    MOBook *book = self.bookController.content[self.bookController.selectionIndex]; // get current guide

    [book addAuthorsObject:author]; // add step into guide

    NSError *err = nil;

    [book.managedObjectContext save:&err]; // save all
} 
```

**MOBook, MOAuthor** - 从 Entity 创建的 ManagedObject 类

# c# - 从 .net 程序调用哪个 Windows 打印 API

> ID：12918698
> 
> 赞同：0
> 
> 时间：2012-10-16T15:55:19.967
> 
> 标签：c#, file, winapi, sharepoint, printing

我需要将在我的 SPFolder 中找到的文件直接打印到打印机而不识别文件类型，那么要调用哪个 Windows API 以及如何调用它？另外，当有很多文件要同时打印时，启动打印作业的过程是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:36:47.873

您可以使用系统的文件关联来进行打印。

```
ProcessStartInfo psi = new ProcessStartInfo(documentFileName);
psi.Verb = "Print";
Process.Start(psi); 
```

这依赖于具有能够打印您感兴趣的所有文档类型的程序的机器。

# sql - SQL 视图中列的默认值

> ID：12918700
> 
> 赞同：0
> 
> 时间：2012-10-16T15:55:26.737
> 
> 标签：sql, view, default, isnull

我有一个包含许多列的 SQL 视图。ID (地块 ID) ex : 7465-85-7468 Building (如果需要特定建筑物的 ID) ex : 102 Room (如果需要特定房间的 ID) ex : 0023

我为每一行都有一个 ID，但对于大多数行，没有 Building ID 或 Room ID

我想用“000”填充空行，用“0000”填充房间。

我可以在第四个字段（完整 ID）中连接这些字段

它尝试使用“ISNULL”获取默认值，但没有成功。

**现在，我有这样的东西**

> ID / 建筑物 / 房间 / 完整 ID
> 
> 7848-05-6956 / / / 7848-05-6956--
> 
> 6985-26-7485 / 102 / 0000 / 6985-26-7485-102-0000
> 
> 7236-12-0145 / / 0223 / 7236-12-0145--0223

**我需要这个**

> ID / 建筑物 / 房间 / 完整 ID
> 
> 7848-05-6956 / 000 / 0000 / 7848-05-6956-000-0000
> 
> 6985-26-7485 / 102 / 0000 / 6985-26-7485-102-0000
> 
> 7236-12-0145 / 000 / 0223 / 7236-12-0145-000-0223

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T15:58:21.853

如果该字段不可为空，则数据可能存储为空字符串而不是 NULL。

尝试执行以下操作：

```
SELECT x.ID, x.Building, x.Room, ID + '-' + Building + '-' + Room AS [Full ID]
FROM (
  SELECT
    ID
  , CASE WHEN ISNULL(Building, '') = '' THEN '000' ELSE Building END AS Building
  , CASE WHEN ISNULL(Room, '') = '' THEN '0000' ELSE Room END AS Room
  FROM MyTable ) x 
```

这将同时处理 NULL 和空字符串，它允许您构建完整 ID 而无需执行 CASE 语句两次。

# dns - 二进制数据的 Erlang 错误

> ID：12918702
> 
> 赞同：2
> 
> 时间：2012-10-16T15:55:32.330
> 
> 标签：dns, binary, erlang

我刚开始在 Erlang 上的道路，我遇到了一个我无法解决的问题：

我写了一个方法来将域表示为二进制字符串，即 <<"www.404pagenotfound.com">> 并将其转换为 DNS 协议所需的域格式，因此：<<3,"www",15 "pagenotfound",3,"com">>.

在下面的代码中（我以不同的方式重写了很多次）：

```
domainbyte(Bin) ->
    if byte_size(Bin) > 0 ->
        Res =  binary:split(Bin, <<".">>),
        [Chunk|[RestList]] = Res, 
        ChunkSize = byte_size(Chunk),   
        if length(RestList) > 0 -> 
            Rest = domainbyte(RestList),  %% <- Got "bad argument" here!
            <<ChunkSize/binary,Chunk,Rest>>;
        true ->
            <<ChunkSize/binary,Chunk>>
        end
    end. 
```

提前谢谢任何线索。

PS。

感谢评论，我在上面的代码中发现了错误：

```
if length(RestList) > 0 -> %% here RestList is binary data so length throw "bad argument" error. 
```

我以这种方式重写了该方法，但仍然没有运气：

**注意：我能够修复以下代码，问题是如果你有一个二进制块并且你想在另一个二进制字符串中使用它，你必须在它上面指定 /binary：这对我来说并不明显。

即：考虑这个小代码片段：

**

TT = <<"com">>, SS = <<3, TT, 0>> %% <- 你得到错误：参数错误

** 必须以这种方式修复：**

TT = <<"com">>, SS = <<3, TT/二进制, 0>>

```
domainbyte(Bin) ->
    if byte_size(Bin) > 0 ->
        Res =  binary:split(Bin, <<".">>),
                if length(Res) > 1 -> 
                    [Chunk|[RestList]] = Res, 
                    ChunkSize = byte_size(Chunk),
                    Rest = domainbyte(RestList),
                    <<ChunkSize,Chunk,Rest>>;
                true -> 
                    [Chunk] = Res,
                    ChunkSize = byte_size(Chunk), 
                    <<ChunkSize,Chunk>>
                end
    end. 
```

甲基苯丙胺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:25:47.980

我认为最简单的解决方案是使用二进制理解来定义函数：

```
domainbyte(Bin) ->
    Chunks = binary:split(Bin, <<".">>, [global]),      %A list of all the chunks
    << <<byte_size(C),C/binary>> || C <- Chunks >>.     %Build output binary 
```

将输出二进制文件构建为单独函数中的段列表然后将它们放在一个`iolist_to_binary/1`. 请注意，如果一个 '.' 出现在二进制文件的最外层，则此代码会将其视为长度为 0 的空段。如果应丢弃这些，则需要将选项添加`trim`到`binary:split/3`. 另请注意，大小将仅占用**一个**字节。

@Alnitak 具有单独的功能，但一次构建二进制一个段，因此它并不比执行相同操作的二进制理解更有效。

**注意**，如果你`Chunk/binary`在构建二进制文件时有一个二进制段，这意味着它`Chunk` **是**一个二进制文件，而不是它应该成为一个二进制文件。二进制是平面结构，想想字节数组，所以一切都变成了二进制。或者更确切地说是二进制文件。

**编辑：**虽然我看到我错过了应该在最后的 0 。这留给读者作为练习。

**编辑：**在*教学模式下*，除了构建二进制文件之外，编写好的**Erlang**代码的关键是理解模式匹配。你用了一点，但可以做得更多：

```
domainbyte(Bin) ->
    case binary:split(Bin, <<".">>) of
        [Chunk,Rest] ->                       %There was a '.'
            RestBin = domainbyte(Rest),
            Size = byte_size(Chunk),
            <<Size,Chunk/binary,RestBin/binary>>;
        [Chunk] ->                            %This was the last chunk
            Size = byte_size(Chunk),
            <<Size,Chunk/binary,0>>           %Add terminating 0
end. 
```

这基本上与您的代码相同，但我们使用模式匹配来选择一个子句，而不仅仅是分离一个已知的结构。模式匹配是控制的基本方法，不仅在`case`as 中，而且在函数和`receive`中。这导致`if`使用非常谨慎。

我现在就够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:02:05.230

我对 Erlang 有点生疏，但我认为你的问题是`RestList`来自`binary:split`.

`domainbyte`因此，当您以错误的格式将其以递归方式退回时。

另外 - 不要忘记终止 NUL 字节来表示根标签！

FWIW，这是我的工作版本：

```
label([]) ->
    << 0 >>;

label([H|T]) ->
    D = label(H),
    P = label(T),
    << D/binary, P/binary>>;

label(A) ->
    L = byte_size(A),
    << <<L>>/binary, A/binary>>.

domainbyte(A) ->
    Res = binary:split(A, <<".">>, [global, trim]),
    label(Res). 
```

它正确地添加了一个尾随 NUL 字节，并修剪任何额外的尾随点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:55:33.107

二进制文件的 concat 应该这样写：

```
<< <<ChunkSize>>/binary, Chunk/binary, Rest/binary>>
% and
<< <<ChunkSize>>/binary, Chunk/binary>> 
```

# css - CSS翻转错误

> ID：12918708
> 
> 赞同：0
> 
> 时间：2012-10-16T15:55:49.630
> 
> 标签：css

好的，这让我发疯了！

它一定很简单，但我找不到。

[http://keith464.fahrradhamburg.de](http://keith464.fahrradhamburg.de)

当您滚动导航时，您会看到白色背景和蓝色字体。但是当您进入其中一个下拉菜单时，背景保持白色（应该如此）但字体恢复为白色，而不是保持蓝色？

一些css大师可以给我一个线索，至于出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:59:10.173

代替

```
.kw-class > li > a:hover { color: blue } 
```

做

```
.kw-class > li:hover > a { color: blue } 
```

# html - Image Logo 在移动设备和浏览器之间的位置不同

> ID：12918709
> 
> 赞同：0
> 
> 时间：2012-10-16T15:55:53.353
> 
> 标签：html, css, graphical-logo

我的 CSS 徽标定位有问题。我的网站是：[http](http://www.askjansen.co.cc) ://www.askjansen.co.cc 问题是，当我用浏览器（如 chrome、safari 等）和智能手机浏览器（iPhone）打开它时，标题徽标很好。但是如果我用我的黑莓浏览器打开它，图像就没有很好地对齐。

下面是我的 HTML 语法：

```
<h1 class="logo" id="image-logo">       
    <a style="background:url(http://askjansen.co.cc/wp-content/themes/Weekly/images/logo.png) no-repeat" href="http://askjansen.co.cc" title="Ask Jansen" rel="home">Ask Jansen <span class="desc">Good Nutrition is a Start</span></a>

    </h1> 
```

这是我的 CSS 语法：

```
 ![.logo {
    float: left;
}

.logo {
    margin: 20px 0px 0px 0px;
    font-family: Georgia,serif;
    font-size: 36px;
    font-weight: bold;
    line-height: 30px;
    text-transform: uppercase;
    letter-spacing: 0px;
}

.logo a {
    color: #333;
    display: block;
}

.logo a:hover {
    color: #333;
}

.logo .desc {
    display: block;
    font-family: Arial,serif;
    font-size: 11px;
    font-weight: normal;
    color: #aaa;
    letter-spacing: 0px;
    text-transform: none;
}

.logo a:hover .desc {
    color: #aaa;
}

#text-logo a {
    padding: 0 15px;
}

#image-logo {
    margin: 18px 0px 0px 15px;
}

#image-logo a {
    position:absolute;
    top: 80px;
    width: 300px;
    height: 90px;
    text-indent: -5555em;
    overflow: hidden;
}][1] 
```

下面是来自黑莓浏览器的图片（注意标志上的不同位置）：http: [//i.stack.imgur.com/CVdaG.jpg](http://i.stack.imgur.com/CVdaG.jpg)

如何解决这个问题？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:07:09.690

我现在正在查看它，它在我尝试的每个浏览器上都关闭了：Firefox、Safari、IE。

将您的#image-logo 顶部样式更改为 60 像素而不是 80 像素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T17:13:08.593

您可以真正优化和清理您的代码，这将减少（理论上）错误的发生。

将 logo 设置为`<img>`tag 而不是更正确`<h1>`，因为 logo 是内容，而不是样式。

的**HTML**：

```
<a href="./" class="logo">
    <img src="path/to/logo.png" alt="Ask Jansen, Good nutrition is a Start" width="300" height="90">
</a> 
```

的**CSS**：

```
.logo {
    position: absolute;
    top: 100px;
    left: 0; }
.logo img {
    display: block; } 
```

有关作为 h1 或图像的徽标的更多信息：http: [//csswizardry.com/2010/10/your-logo-is-an-image-not-a-h1/](http://csswizardry.com/2010/10/your-logo-is-an-image-not-a-h1/)

希望这可以帮助。

# 快速解决

您是否尝试过删除并在(60px + 20px)`margin: 20px 0 0 0;`上添加它的值？`top: 80px;`

# java - 在Android中为不同的尺寸设置不同的布局

> ID：12918710
> 
> 赞同：0
> 
> 时间：2012-10-16T15:55:57.097
> 
> 标签：java, android, android-layout

```
res/layout/main_activity.xml           
res/layout-small/main_activity.xml   
res/layout-large/main_activity.xml   
res/layout-xlarge/main_activity.xml
res/layout-xlarge-land/main_activity.xml 
```

我有两个名称相同但内部文本消息不同的布局文件。当我尝试在`Samsung-Galaxy 10.1 or Google Nexus 7`英寸平板电脑或我的密度所在的模拟器中加载我的应用程序时，`1024dp * 600dp`它总是加载 res/layout/main_activity.xml

我不确定我在这里犯了什么错误。下面是清单文件。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.sample"
    android:versionCode="2"
    android:versionName="2.3.4" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="15" />

<supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
        <activity
            android:name=".Splash"
            android:label="@string/title_activity_splash"
             >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".Trial"
            android:label="@string/title_activity_trial"
            android:exported="false"
             >
            <intent-filter>
                <action android:name="com.sample.TRIAL" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

我正在使用 4.1.1.4 版本的 android.jar。

```
 <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <version>4.1.1.4</version>
        <scope>provided</scope>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:22:03.507

根据[这张图表](http://developer.android.com/guide/practices/screens_support.html#testing)，1024x600 被归类为`xlarge`. 您的标签中没有提到 xlarge `<support-screens>`。

# java - Java：将字符串转换为 KeyEvent 虚拟键代码？

> ID：12918711
> 
> 赞同：1
> 
> 时间：2012-10-16T15:55:59.660
> 
> 标签：java, regex, keyevent, keycode

我正在尝试编写一个方法，该方法将采用单个字符串并（如果可能）返回它对应的[虚拟键码。](http://docs.oracle.com/javase/6/docs/api/java/awt/event/KeyEvent.html)

例如：

```
private static int getKeyCode(final String key) {
    if(key.length != 1)
        throw new IllegalArgumentException("Only support single characters");

    // Also check to see if the 'key' is (1-9)(A-Z), otherwise exception

    // How to perform the conversion?
}

// Returns KeyEvent.VK_D
MyKeyUtils.getKeyCode("D"); 
```

因此，传递`MyKeyUtils.getKeyCode("blah")`会抛出一个，`IllegalArgumentException`因为“blah”有 4 个字符。此外，传递`MyKeyUtils.getKeyCode("@")`会引发相同的异常，因为“@”既不是数字 0-9 也不是字符 A - Z。

任何想法如何进行正则表达式检查以及实际转换？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:04:24.600

```
if (key.matches("[^1-9A-Z]"))
  throw new IllegalArgumentException("..."); 
```

* * *

可以使用`(int) key.charAt(0)`value进行[转换，因为：](http://docs.oracle.com/javase/1.4.2/docs/api/constant-values.html#java.awt.event.KeyEvent.VK_1)

```
public static final int VK_0 48 
public static final int VK_1 49 
...
public static final int VK_9 57 
public static final int VK_A 65 
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:59:02.340

`^[0-9A-Za-z]$`将您的输入与或匹配`^[\\w&&[^_]]$`

```
if(!key.matches("[0-9A-Za-z]")) 
  throw new IllegalArgumentException("invalid input ..."); 
```

和

```
int code = key.charAt(0); 
```

# java - 使用 Apache POI WordToHtmlConverter 获取文档的文本

> ID：12918712
> 
> 赞同：1
> 
> 时间：2012-10-16T15:56:06.820
> 
> 标签：java, apache-poi

我有一些将 Word 文档转换为 HTML 的软件。我需要的是一种获取文档文本的方法。下面是我的代码示例。当文档转换为 html 时，文档似乎被写入 html 标签。我对 html 和 web 开发没有太多经验。我主要是应用程序和桌面开发人员。什么是获取段落文本的简单方法。以下是我到目前为止的代码。我需要将信息作为字符串获取，以便解析它。

```
private void convertWordDoctoHTML(File file) throws ParserConfigurationException, TransformerConfigurationException, TransformerException, IOException {
    HWPFDocumentCore wordDocument = null;
    try {
        wordDocument = WordToHtmlUtils.loadDoc(new FileInputStream(file));
    } catch (IOException ex) {
        Exceptions.printStackTrace(ex);
    }

    WordToHtmlConverter wordToHtmlConverter = new WordToHtmlConverter(DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument());
    wordToHtmlConverter.processDocument(wordDocument);
    org.w3c.dom.Document htmlDocument = wordToHtmlConverter.getDocument();
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    DOMSource domSource = new DOMSource(htmlDocument);
    StreamResult streamResult = new StreamResult(out);

    StringWriter stringWriter = new StringWriter();
    TransformerFactory tf = TransformerFactory.newInstance();
    Transformer serializer = tf.newTransformer();
    serializer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
    serializer.setOutputProperty(OutputKeys.INDENT, "yes");
    serializer.setOutputProperty(OutputKeys.METHOD, "html");
    serializer.transform(domSource, streamResult);
    out.close();

    String result = new String(out.toByteArray());
    System.out.println(result);
    docEditorPane.setPage(selectedFile.toURI().toURL());
    newDocText = result;
} 
```

# jaxb - 使用 JAXB 在 xsd:choice 中强制 minOccurs 为 1

> ID：12918717
> 
> 赞同：1
> 
> 时间：2012-10-16T15:56:17.673
> 
> 标签：jaxb, xjc

在这篇[文章](https://stackoverflow.com/questions/10137968/xjc-java-class-generation-for-xschoice-element-which-is-not-unbounded/12917183#12917183)之后，我已经能够使用 JAXB 创建一个正确的选择，但是当 jaxb 从架构生成 Java 类时，它会生成 minOccurs 等于 0 而不是 1 的选择元素，这会更合适。

有谁知道谁来解决这个问题？如果我在已生成的类中[添加](https://stackoverflow.com/questions/6022690/jaxb-xmlelements-to-have-minoccurs-1)所需的属性，则我强制将 minOccurs 设置为 1，但我想从 XSD 执行此操作，而不是直接修改 java 类。

# multithreading - Thread，QThread，每个进程有多少是“合理的”？

> ID：12918718
> 
> 赞同：1
> 
> 时间：2012-10-16T15:56:16.567
> 
> 标签：multithreading, qt, threadpool, qthread

**问题：每个进程有多少个“QThread”实例是“合理的”？**

*（这特别引用了 Qt 的`QThread`实例，但从逻辑上讲，这个问题应该与使用任何库的任何基于线程的设计有关。）*

例如，我了解特定于平台的资源限制可能默认支持最多三十 (30) 个 " " 实例，因此理论上，如果您有 30 个活动套接字，那么当系统处于最大负载下时`QTcpSocket`，这将是 30 个实例`QThread`. 但是，这可能没什么大不了的，因为这些线程中的大多数应该为网络流量“休眠/等待”。

同样，我会假设对于承担`QThread`“繁重连续工作”的实例，最多可以实例化“核心”或“本机线程可以执行”的数量。因此，如果您有八 (8) 个内核，则可能是另外八个`QThread`实例（当系统处于最大负载时，这些实例可能一直在工作）。

然后，当然，我们有“主线程”。

这是否意味着将实例化：

（30 个套接字线程）+（每个核心 8 个工作线程）+（1 个主线程）

...对于 39 个线程（在 8 核系统上）？

具体来说，如果特定于应用程序的需求有其他线程池需求，并且您添加了`QThread`十几个`QThread`- 这里和十几个 - 实例 - 似乎 100 个`QThread`实例有点愚蠢，即使它们中的大多数是“空闲/睡觉/等待”，对吧？

那么，有断档吗？“39 线程”是“合理的”，但“300 线程”是“不合理的”？

（是的，我知道有一个“每个线程的默认堆栈大小”，例如“每个线程10MB”，所以我受到虚拟内存的限制。但是，真的，实例化30K线程是不是很愚蠢- - 这是一个糟糕的设计，会想要这样的东西吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:43:07.540

您可以使用[QThread::idealThreadCount()](http://doc.qt.digia.com/stable/qthread.html#idealThreadCount)找出当所有线程都忙时有多少线程可能会提高性能。对于大部分等待的线程，限制是依赖于操作系统的，但对于 Qt，最好使用信号槽系统而不是非常多的线程。只连接一个带有信号的对象总是比额外的线程更轻，特别是如果额外的线程也有它自己的事件循环。大多数 Qt 网络应用程序可能根本不应该使用线程。

# php - 通过 Session Login 拉取 SQL 数据

> ID：12918726
> 
> 赞同：1
> 
> 时间：2012-10-16T15:56:34.333
> 
> 标签：php

我正在尝试提取 SQL 数据。用户的登录名是他们的用户名，但我不希望将其显示给任何其他用户。因此，我定义了 nicename。这是另一个与用户登录信息无关的显示名称；当我尝试发送消息时，我希望 from 字段显示其显示名称；有谁知道为什么这最终不会通过 from 字段中的查询发送任何数据？

```
<?php
$link = mysqli_connect("$server", "$user", "$pass", "$webdb");
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT nicename FROM user WHERE name=$_SESSION['admin_login']";
$result = mysqli_query($link, $query);
$row = mysqli_fetch_array($result, MYSQLI_ASSOC);
$display_name = $row['nicename'];
{
echo '<input name="from" type="hidden" value="' .$display_name.'">';
}
mysqli_free_result($result);
mysqli_close($link);
?> 
```

好的，所以我运行了查询并修复了显示名称变量；当我收到查询时。

```
INSERT INTO messages (`owner`, `from`, `content`, `date`, `title`) VALUES ('Morgan', '', 'Query', 'Oct/16/2012', 'Testing The ') 
```

From 变量仍然不显示任何内容；我在我的网站上添加了一个调试页面，我在其中输入了我的查询

```
$query = "SELECT nicename FROM user WHERE username=$_SESSION[admin_login]";
$result = mysqli_query($link, $query);
$row = mysqli_fetch_array($result, MYSQLI_ASSOC); 
```

然后我回显了我的查询并回显了 $row[nicename] 我在页面上收到的位置： SELECT nicename FROM user WHERE username= *** *<-- 它确实添加了我的用户名；但是 $row[nicename] 上的回显在页面上没有返回任何结果。

```
{
echo $query;//<--Returns Query with the correct login variable.
echo '<br>';
echo $row['nicename'];//<--Returns no info.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:27:10.647

在发现错误的人的帮助下进行调试后，我的查询最终是：

```
$query = "SELECT nicename FROM user WHERE username='$_SESSION[admin_login]'"; 
```

我在表单上的输入是

```
echo '<input name="from" type="hidden" value="' .$display_name.'">'; 
```

并且 $display_name 定义为 $row['nicename'] 这些设置在 From 字段中显示显示名称并隐藏登录名。感谢所有帮助过的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T16:05:19.940

**改变这个：**

```
$display_name = $row['title']; 
```

**对此：**

```
$display_name = $row['nicename']; 
```

*   我总是喜欢在我的 SQL 语句中使用普通的 PHP 变量而不是会话变量。这可以避免与数据类型混淆。

    $username = $_SESSION['admin_login'];
    $query = "SELECT nicename FROM user WHERE name = '$username'";

另一个例子：

```
$chatroomNumber = intval($_SESSION['chatroomid']);
$query = "SELECT * FROM rooms WHERE chatroomnumber = $chatroomNumber"; 
```

这可确保您在 SQL 语句中使用 int。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T16:18:36.100

首先在浏览器中检查 from 的源代码，以检查它是否创建了具有正确值的隐藏输入。

如果隐藏没问题，请检查处理表单的 PHP 文件接收到的内容（print_r($_POST) 可能会有所帮助）。

如果它得到了值，那么检查你是如何构建 SQL 查询的。

发布更多代码可以让我们更好地了解问题所在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T15:58:24.590

根据其中`$_SESSION['admin_login']`包含的内容，您可能需要引用它：

```
$query = 'SELECT nicename FROM user WHERE name="' . $_SESSION['admin_login'] . '"'; 
```

# c# - 创建代理而不添加服务引用

> ID：12918727
> 
> 赞同：0
> 
> 时间：2012-10-16T15:56:34.717
> 
> 标签：c#, asp.net, web-services, web

我在 Microsoft Web Developer Express 2010 上使用 C#/ASP.NET。

我的任务是验证和调用 Web 服务功能（我拥有所有数据 - Web 服务地址、登录/密码、功能参数）。

我唯一受到限制的事情是 - 我不能使用 VS2010 添加参考功能，必须以编程方式进行。这是必要的，因为上传我的 .cs 和 .aspx 文件的系统会独立于我的项目编译它们。所以我的 .cs 文件应该包含我知道所有参数的 Web 服务函数调用。

我已经阅读了一些关于此的主题，但仍然没有结果，可能是因为人们不经常使用自行编译 .cs 和 .aspx 文件的系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:34:39.107

这是以编程方式创建 WCF 客户端的示例：-

*   [通道工厂](http://msdn.microsoft.com/en-us/library/ms734681.aspx)

如果您在客户端中根本无法使用 WCF，并且您正在调用的服务基本上是绑定的，您可以使用以下命令调用它`HttpWebRequest`：-

*   [在没有代理的情况下调用 WCF 服务方法](https://stackoverflow.com/questions/6606317/invoking-wcf-service-methods-without-having-a-proxy/6609105#6609105)

# cordova - 在在线网站中使用 phonegap 代码

> ID：12918728
> 
> 赞同：4
> 
> 时间：2012-10-16T15:56:35.737
> 
> 标签：cordova, twitter-bootstrap

我有一个基于 Twitter Bootstrap 的网站。通过一些额外的改进，它在手机和平​​板电脑上运行良好。但我想要一个真正的应用程序，并且不想复制所有内容。首先，仅适用于 Android。

我尝试的第一件事是 AppsGeyser，很简单，但不是我真正想要的。如果用户没有互联网连接，我会看到那些丑陋的浏览器消息。如果用户按下他手机上的菜单按钮，我想要来自 Twitter Bootstrap 的“菜单栏”的菜单切换。所以 AppsGeyser 不是我想要的。并且没有 iOS 支持。

接下来我用PhoneGap做了很多尝试，太棒了！我想要的一切都是可能的，但是最好的解决方案是什么？我想要的是以下我的意见：

*   如果应用程序启动它会检查互联网连接，没有连接？从缓存加载。否则只显示网站。HTML5 缓存清单的最佳选择？玩过它，但如果没有互联网连接，我只想从缓存中加载。到目前为止，这似乎是不可能的..？
*   如果要提交一些表格，再次检查是否有互联网连接，没有互联网连接？只是一个警告：“没有互联网连接！” 并且不要提交，所以表单仍然填写，就像用户刚刚做的那样。点击/提交 => 对网站的 ajax 调用 => 失败？=> 显示警报 => 返回 false，因此不会提交表单。最佳选择？
*   我想要的最后一件事，就像我之前说过的那样，当用户按下手机上的菜单按钮时，它会从 Twitter Bootstrap 切换“菜单栏”。

所以我认为前两件事不是问题，但最后一件事......？我发现了这个：[http](http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html#menubutton) ://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html#menubutton 如果网站在“应用程序中”，这没什么大不了的，但我不想要该网站“在应用程序中”。只需从互联网加载它（如果没有互联网连接，则缓存），所以如果我更改某些内容，我不必更改网站和应用程序。只是网站！但是是否可以在“远程”网站中使用 Cordova？如果该网站通过PhoneGap 运行该应用程序，它就会运行，并且可以工作！？

就像，如果我将此代码放在我的网站中：

```
document.addEventListener("menubutton", onMenuKeyDown, false);

function onMenuKeyDown() {
    alert('Menu button pressed!');
} 
```

并包含cordova js文件，它对普通访问者没有任何作用，但是如果使用该应用程序并且该网站是从PhoneGap应用程序加载的，并且带有webview它可以工作吗？

请你对这一切的意见！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T21:56:37.113

对我来说，PhoneGap 中的教科书方法是将应用程序编写为一个独立的 JavaScript/HTML/CSS 应用程序，它可以位于设备上并从服务器端 Web 服务检索数据。这需要共同努力，并且通常对传统的服务器端 Web 应用程序（这似乎是您所描述的）进行逆向工程并不是特别容易。此模型为您提供出色的性能，让您无需发布更新即可更新应用程序内容。

我认为最好的办法是将应用程序的表示层重写为由后端派生的 API 驱动的 JavaScript 应用程序。这应该会为您提供非常出色的性能，如果您要与其他本地应用程序竞争，这一点很重要。另外，如果您正确构建它，它将为您提供离线功能和更多功能（缓存、日志记录等）。

快速的方法（但可能不是我推荐的方法）是只在设备上打包主页（HTML/JS/CSS），然后像往常一样链接到您的网络内容。这不是我以前使用过的方法，但应该可以很好地工作。如果您想构建离线功能，将这种方法与 jQuery Mobile 之类的工具包结合起来应该可以很好地工作（jQM 不会按 sae 提供离线功能，但应该为您提供合适的基础来构建自己的离线处理）。

我希望这有帮助！

# magento - 如何将布局渲染为var？

> ID：12918730
> 
> 赞同：1
> 
> 时间：2012-10-16T15:56:40.580
> 
> 标签：magento

我有控制器动作。它是通过 ajax 请求调用的。操作应返回 json 对象。我知道如何从动作中返回 json。没问题。

在操作中，我使用键“购物车”和“搜索”创建了关联数组。每个元素都应该包含针对适当事物的解析布局：购物车布局和搜索布局。

所以问题是如何将布局渲染/解析成var？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T03:23:31.290

我自己找到了答案。

```
$var = $this->getLayout($action_handle)->getOutput(); 
```

现在 $var 将包含布局 html。

# android - 如何获取试图从 onBind 函数绑定我的服务的应用程序包名称或 UID？

> ID：12918731
> 
> 赞同：21
> 
> 时间：2012-10-16T15:56:40.537
> 
> 标签：android

我在一个应用程序中有一个服务，我可以从不同的应用程序访问这个服务。当应用程序尝试绑定此服务时，我想知道哪个应用程序试图在 onBind 函数中绑定我的服务，但我无法在 onBind 函数中获取此应用程序的包名称或 UID。

是否可以获得试图在 onBind 函数中绑定我的服务的应用程序名称或 UID？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-16T16:07:00.880

您可以使用以下内容来确定调用应用程序。

```
 String callingApp = context.getPackageManager().getNameForUid(Binder.getCallingUid()); 
```

重要的是要注意[JavaDoc`getCallingUid()`](http://developer.android.com/reference/android/os/Binder.html#getCallingUid())说：

> 返回分配给向您发送当前正在处理的事务的进程的 Linux uid。此 uid 可与更高级别的系统服务一起使用，以确定其身份并检查权限。如果当前线程当前没有执行传入事务，则返回它自己的 uid。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T18:28:03.187

你不能这样做。

onBind() 从 Android“生命周期管理器”（组成一个有用的名称）调用，并且只会为每个 Intent 调用一次（因此它可以了解应该为该 Intent 返回哪个 Binder）。

然后对您的服务的调用通过该 Binder 进行，您可以在其中任何一种方法中执行 Binder.getCallingUid()。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-03T07:22:02.130

**接受的答案不太正确！**为什么？如果两个或多个应用程序使用相同`android:sharedUserId`的，该方法`Binder.getCallingUid()`将返回相同的**uid**并将`getPackageManager().getNameForUid(uid)`返回相同的字符串，它看起来像：**com.codezjx.demo:10058**，但不是包名！

正确的方法是使用**pid**：

```
int pid = Binder.getCallingPid(); 
```

然后使用pid获取包名`ActivityManager`，每个进程可以持有多个包，如下图：

```
private String[] getPackageNames(Context context, int pid) {
    ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
    List<RunningAppProcessInfo> infos = am.getRunningAppProcesses();
    if (infos != null && infos.size() > 0) {
        for(RunningAppProcessInfo info : infos) {
            if(info.pid == pid) {
                return info.pkgList;
            }
        }
    }
    return null;
} 
```

**警告**：使用方法时`Binder.getCallingPid()`，如果当前线程当前未执行传入事务，则返回其自己的 pid。这意味着您需要在 AIDL 公开的接口方法中调用此方法。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-02-02T00:08:36.503

上述接受的答案对我不起作用。但一个小小的修改就奏效了。这非常适合基于[Messenger](https://developer.android.com/guide/components/bound-services.html#Messenger)的通信。

```
public class BoundService extends Service {

    public static final int TEST = 100;
    private final Messenger messenger = new Messenger(new MessageHandler());

    class MessageHandler extends Handler {
        @Override
        public void handleMessage(Message msg) {

            String callerId = getApplicationContext().getPackageManager().getNameForUid(msg.sendingUid);
            Toast.makeText(getApplicationContext(), "Calling App: " + callerId, Toast.LENGTH_SHORT).show();

            switch (msg.what) {
                case TEST:
                    Log.e("BoundService", "Test message successfully received.")
                    break;
                default:
                    super.handleMessage(msg);
            }
        }
    }

    @Override
    public IBinder onBind(Intent intent) {
        return messenger.getBinder();
    }
} 
```

从上面的答案，你只需要将 from`Binder.getCallingUid()`改为`msg.sendingUid`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-07T05:16:34.723

我正在寻找如何`LocationManagerService`限制访问，这是我发现的：

1.  每当您尝试访问位置时，它们都会让您传递包名称

```
// android.location.ILocationService

Location getLastLocation(LocationRequest request, String packageName) throws RemoteException; 
```

2.  在处理事务时，他们检查调用者 uid 是否与提供的包名称匹配（如其他答案中所述，可能有多个包名称共享相同的 uid）。

```
// com.android.server.LocationManagerService

public Location getLastLocation(LocationRequest r, String packageName) {
    ...
    checkPackageName(packageName);

    // From this point on we assume that the provided packageName is the real one
    if (mBlacklist.isBlacklisted(packageName)) {
        if (D) {
            Log.d(TAG, "not returning last loc for blacklisted app: "
                    + packageName);
        }
        return null;
    }
    ...
}
...
private void checkPackageName(String packageName) {
    if (packageName == null) {
        throw new SecurityException("invalid package name: " + null);
    }
    int uid = Binder.getCallingUid();
    String[] packages = mPackageManager.getPackagesForUid(uid);
    if (packages == null) {
        throw new SecurityException("invalid UID " + uid);
    }
    for (String pkg : packages) {
        if (packageName.equals(pkg)) return;
    }
    throw new SecurityException("invalid package name: " + packageName);
} 
```

我想，这是令人满意的，因为要让应用程序共享 uid，它们需要使用相同的密钥进行签名，因此可以同样受到信任

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-03T13:58:45.777

您现在可以使用`getPackagesForUid`而不是`getNameForUid`.

（`getName`postPends uid，`getPackages`没有）

```
class MyService : Service() {

    override fun onBind(intent: Intent): IBinder {
        return Messenger(IncomingHandler(this, packageManager).binder
    }

    internal class IncomingHandler(
        private val context: Context,
        private val packageManager: PackageManager
    ) : Handler() {

         override fun handleMessage(msg: Message) {
            val sendingUid = msg.sendingUid
            val potentialCallingPackageNames = packageManager.getPackagesForUid(sendingUid)!!.toList()
            Log.d("TUT", "One of these packages called you $potentialCallingPackageNames")
         }
    }
} 
```

请记住，如果您希望系统应用程序调用您，那么它的 UID 将匹配许多其他系统应用程序，因此列表将有很多项目。如果它只是另一个应用程序呼叫您，那么列表可能会有 1 个项目。

# java - 通过 Java 在 Websockets 上 STOMP

> ID：12918734
> 
> 赞同：4
> 
> 时间：2012-10-16T15:56:45.103
> 
> 标签：java, javascript, websocket, stomp

我有一个 WebSocket 服务器，它将通过来自客户端的 WebSocket 消息接收 STOMP。真正的客户正在使用 javascript 来执行[此](http://www.jmesnil.net/stomp-websocket/doc/)操作。但我想用 Java 创建我的测试客户端（我不太了解 javascript）。问题是我为 Java 找到的 STOMP 客户端库，例如来自 ActiveMQ 和 stompj 的客户端库似乎不支持使用 WebSockets。我对 STOMP 和 STOMP over WebSockets 的概念完全陌生，所以我想知道我是否遗漏了什么，或者是否真的没有公众支持这样做。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:04:00.967

支持 STOMP over WebSocket，ActiveMQ 支持 STOMP [http://activemq.apache.org/stomp.html](http://activemq.apache.org/stomp.html)。

我认为您必须包含该链接中提供的 javascript 库。

# php - 为什么我的 MySQL 查询返回的是多维数组而不是单维数组？

> ID：12918735
> 
> 赞同：3
> 
> 时间：2012-10-16T15:56:46.083
> 
> 标签：php, mysql, sql, arrays, web-applications

这是我的查询：

```
SELECT DISTINCT ap.apptype_id
FROM tblSubmission AS s
JOIN tblApp AS ap ON ap.app_id = s.app_id
WHERE s.app_id =406
OR s.app_id =180
OR s.app_id =179 
```

它只返回与数据库中的行有关的唯一 apptype_id。它现在就像它应该的那样工作，除了它返回一个多维数组而不是一维数组这一事实。我可以继续编写一个 PHP 函数来解决这个问题，但我宁愿让查询正确返回数组，而不是让服务器做额外的工作来解决查询问题。谁能帮我吗？

此外，如果有人看到我可以优化此查询以使其更快的方法，那也很棒！

```
function db_query($querystring) { 
   $rec_set = array(); 
   $result = mysql_query($querystring); 
   if (!$result) { 
       // do nothing, query might have failed but it might have just returned no results          
       #echo ("Invalid Query Result:<br /><b>" . $querystring . "</b><br />"); // debug 
    }elseif($result === true){ 
       // do nothing, query didn't return anything but succeeded 
    }else{ 
       while ($row = mysql_fetch_assoc($result)) { $rec_set[] = $row; }            
       mysql_free_result($result); 
    } 
    return $rec_set; 
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:11:17.847

您要返回两条记录，因此它是多维的。

您有`DISTINCT ap.apptype_id`并且您的查询找到了两条具有不同 ID 的记录。

编辑：只是为了澄清；在您要查找的一维数组中，我相信您想要的结果是：

```
array([7], [2]) // i.e your two distinct ids. 
```

试着记住，使用 mysql 你也会返回列标题，所以这种布局没有意义。

编辑2：

也许这样的事情会有所帮助？

```
$a = array(
    0 => array('first'=>7),
    1 => array('second'=>2)
);

$row = array_map('implode', $a); 
```

输出：

```
array(2) { [0]=> string(1) "7" [1]=> string(1) "2" } 
```

array_map 是您想要的功能。它应该可以根据需要工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:05:28.790

```
SELECT DISTINCT ap.apptype_id
FROM tblSubmission AS s
JOIN tblApp AS ap ON ap.app_id = s.app_id 
```

上面的部分将选择所有不同`apptype_id`的`app_id`两者都在`tblSubmission`和中`tblApp`。如果 ID 是，那么你正在服用`406 OR 180 OR 179`。因此它将返回所有与这三个s 匹配并且在两个表中的`apptype_id`对应s。`ID``ID`

认为，

`tblApp(id, type)`有三个条目`<406, 10>`和。 有三个条目和。加入后会有两个条目 ， 想想如果你选择不同的类型会发生什么？它将返回两个条目 和`<180, 11>``<100, 12>``tblSubmission(id, ...)``<406, ...>``<180, ...>``<179, ...>``table(id, type, ...)``<406, 10, ...>``<180, 11, ...>``<10>``<11>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:49:10.707

它正在返回多维数组，因为您要求它使用 `mysql_fetch_assoc($result)`

如果你将你的代码移动到类似 PDO 的地方，你可以使用 fetch 列来获取你想要的东西。 [http://www.php.net/manual/en/pdostatement.fetchcolumn.php](http://www.php.net/manual/en/pdostatement.fetchcolumn.php)

关于您的原始问题，查询很好，您从 PHP 获取它的方式是导致问题的原因。至于让它更快，你可能会考虑使用`IN`而不是多个`ORs`，但我不确定这是否会对 mysql 产生任何影响（你可以在查询中使用 EXPLAIN 来显示数据库使用什么来获取结果）

# java - 应用程序崩溃时的编辑对话框

> ID：12918744
> 
> 赞同：0
> 
> 时间：2012-10-16T15:57:09.660
> 
> 标签：java, android

我想知道是否可以编辑 android 应用程序崩溃时显示的对话框。我想编辑整个消息“'ApplicationName'已停止”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:04:32.303

你不能这样做。更好地设计和正确测试您的应用程序，并确保没有未捕获的异常。当您的应用程序出现问题时，会出现强制关闭对话框。你没有办法控制它。

# javascript - jQuery 1.4.4 -- .val() 不返回值，而是返回文本 假设我们有以下下拉列表 <select id="status"><option value="123" selected="selected">OPEN</option> <option value="987">CLOSE</option></select> 在 jQuery 1.4.4 中，如果调用 j('#status').val(); 它只返

> ID：12918746
> 
> 赞同：1
> 
> 时间：2012-10-16T15:57:15.510
> 
> 标签：javascript, jquery, html

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T15:59:37.737

尝试以下操作：

```
j('#status option:selected').val(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T16:00:04.630

`$('#status option:selected').val();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:02:37.237

其实挖了一阵子，我找到了这个问题的解决方案（应该只适用于那个特定的版本），这个表达式：

```
 $('input[name=status]').val() 
```

应该给出值而不是所选选项的文本。

所以留下这个答案作为记录。

干杯

# sql - Postgresql 计数+排序性能

> ID：12918750
> 
> 赞同：3
> 
> 时间：2012-10-16T15:57:27.513
> 
> 标签：sql, postgresql, aggregate, postgresql-performance

我使用 postgresql 和 psycopg2 构建了一个小型库存系统。一切都很好，除了当我想创建内容的汇总摘要/报告时，由于 count()'ing 和排序，我得到了非常糟糕的性能。

数据库架构如下：

```
创建表主机
(
        id 序列主键，
        名称 VARCHAR(255)
);
创建表项
(
        id 序列主键，
        说明文字
);
创建表 host_item
(
        id 序列主键，
        host INTEGER REFERENCES hosts(id) ON DELETE CASCADE ON UPDATE CASCADE,
        item INTEGER REFERENCES items(id) ON DELETE CASCADE ON UPDATE CASCADE
);
```

还有一些其他领域，但这些领域并不相关。

我想提取 2 个不同的报告： - 包含每个项目数量的所有主机列表，从最高到最低计数排序 - 包含每个主机数量的所有项目列表，从最高到最低计数排序

为此，我使用了 2 个查询：

具有主机计数的项目：

```
SELECT i.id, i.description, COUNT(hi.id) AS 计数
从项目 AS i
LEFT JOIN host_item AS hi
开（i.id=hi.item）
按 i.id 分组
ORDER BY 计数 DESC
限制 10；
```

具有项目计数的主机：

```
选择 h.id, h.name, COUNT(hi.id) 作为计数
FROM 主机 AS h
LEFT JOIN host_item AS hi
开（h.id=hi.host）
按隐藏组分组
ORDER BY 计数 DESC
限制 10；
```

**问题是：查询在返回任何数据之前运行 5-6 秒。**由于这是一个基于 Web 的应用程序，因此 6 秒是不可接受的。该数据库大量填充了大约 50k 主机、1000 个项目和 400 000 个主机/项目关系，并且在使用应用程序时（或者如果）可能会显着增加。

在玩了之后，我发现通过删除“ORDER BY count DESC”部分，两个查询都会立即执行而没有任何延迟（完成查询不到 20 毫秒）。

有什么办法可以优化这些查询，以便我可以毫不拖延地对结果进行排序？我正在尝试不同的索引，但是看到计数被计算出来，可以为此使用索引。我读过postgresql中的count（）'ing很慢，但它的排序给我带来了问题......

我目前的解决方法是将上述查询作为每小时作业运行，将结果放入一个新表中，该表在计数列上有一个索引，以便快速查找。

我使用 Postgresql 9.2。

更新：按顺序查询计划:)

```
EXPLAIN ANALYZE
SELECT h.id, h.name, COUNT(hi.id) AS count
FROM hosts AS h
LEFT JOIN host_item AS hi
ON (h.id=hi.host)
GROUP BY h.id
ORDER BY count DESC
LIMIT 10;

 Limit  (cost=699028.97..699028.99 rows=10 width=21) (actual time=5427.422..5427.424 rows=10 loops=1)
   ->  Sort  (cost=699028.97..699166.44 rows=54990 width=21) (actual time=5427.415..5427.416 rows=10 loops=1)
         Sort Key: (count(hi.id))
         Sort Method: top-N heapsort  Memory: 25kB
         ->  GroupAggregate  (cost=613177.95..697840.66 rows=54990 width=21) (actual time=3317.320..5416.440 rows=54990 loops=1)
               ->  Merge Left Join  (cost=613177.95..679024.94 rows=3653163 width=21) (actual time=3317.267..5025.999 rows=3653163 loops=1)
                     Merge Cond: (h.id = hi.host)
                     ->  Index Scan using hosts_pkey on hosts h  (cost=0.00..1779.16 rows=54990 width=17) (actual time=0.012..15.693 rows=54990 loops=1)
                     ->  Materialize  (cost=613177.95..631443.77 rows=3653163 width=8) (actual time=3317.245..4370.865 rows=3653163 loops=1)
                           ->  Sort  (cost=613177.95..622310.86 rows=3653163 width=8) (actual time=3317.199..3975.417 rows=3653163 loops=1)
                                 Sort Key: hi.host
                                 Sort Method: external merge  Disk: 64288kB
                                 ->  Seq Scan on host_item hi  (cost=0.00..65124.63 rows=3653163 width=8) (actual time=0.006..643.257 rows=3653163 loops=1)
 Total runtime: 5438.248 ms

EXPLAIN ANALYZE
SELECT h.id, h.name, COUNT(hi.id) AS count
FROM hosts AS h
LEFT JOIN host_item AS hi
ON (h.id=hi.host)
GROUP BY h.id
LIMIT 10;

 Limit  (cost=0.00..417.03 rows=10 width=21) (actual time=0.136..0.849 rows=10 loops=1)
   ->  GroupAggregate  (cost=0.00..2293261.13 rows=54990 width=21) (actual time=0.134..0.845 rows=10 loops=1)
         ->  Merge Left Join  (cost=0.00..2274445.41 rows=3653163 width=21) (actual time=0.040..0.704 rows=581 loops=1)
               Merge Cond: (h.id = hi.host)
               ->  Index Scan using hosts_pkey on hosts h  (cost=0.00..1779.16 rows=54990 width=17) (actual time=0.015..0.021 rows=11 loops=1)
               ->  Index Scan Backward using idx_host_item_host on host_item hi  (cost=0.00..2226864.24 rows=3653163 width=8) (actual time=0.005..0.438 rows=581 loops=1)
 Total runtime: 1.143 ms 
```

**更新：这个问题的所有答案都非常有助于学习和理解 Postgres 的工作原理。这个问题似乎没有任何明确的解决方案，但我非常感谢您提供的所有优秀答案，我将在以后的 Postgresql 工作中使用这些答案。非常感谢你们！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:52:28.780

正如@GordonLinoff 所说，无论涉及什么数据库，这些查询都会很慢，但了解*原因*会很有帮助。考虑数据库如何执行此查询：

```
SELECT table1.*, count(*)
FROM table1
JOIN table2 ON table2.id1 = table1.id
GROUP BY table1.id 
```

假设`table2`其中包含大多数行的数据`table1`并且两个表的大小都非常大，关系数据库将倾向于执行以下操作：

*   Scan `table2`，计算 上的聚合`id1`，产生`{ id1, count }`结果集。
*   扫描`table1`。
*   哈希连接。

添加或不添加 an`ORDER BY count`不会实质性地改变工作量：您仍然有两个表扫描和 a `JOIN`，您只是添加了一个排序步骤。您可能会尝试在 上添加索引`table2 (id1)`，但可以改进的只是聚合步骤：现在不是读取两个完整的表，而是读取一个完整的表和一个完整的索引。喜悦。

如果您可以在一个或两个表上使用索引来消除考虑中的大多数行，那么一定要这样做。否则，该操作将始终归结为两次扫描，并且随着您的数据集变得越来越大，它的性能会越来越低。

顺便说一句，这是`ORDER BY`在查询中删除的效果：通过离开`LIMIT`子句，您已经告诉 PostgreSQL 您只对前 N 行感兴趣。这意味着它可以从中选择 N 行并针对其中的 N 行中的每一行`table1`执行嵌套循环，它使用该 ID 上的索引查找该特定 ID。这就是让它变得更快的原因：您已经排除了大部分.`table2``table1``count(*)``table2``table2`

如果您的应用程序通常需要关联记录的计数，通常的解决方案是自己维护一个计数器。一种约定（[Rails](http://railscasts.com/episodes/23-counter-cache-column?view=asciicast)和其他几个 ORM 原生支持）是`table2_count`在`table1`. 如果您索引此计数器，`ORDER BY ... LIMIT`查询将非常高效。

如果您的工具无法立即执行此操作，或者您正在使用一组不同的工具来操作此数据库，那么触发器是一个更好的选择。正如@GordonLinoff 建议的那样，您可以将它放在一个单独的汇总表中——这可能意味着基表中的争用较少，但它会`JOIN`在检索计数时强制执行。我建议先添加一`table2_count`列，`table1`然后仅在性能测量表明它是胜利时才将其拆分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T00:55:50.873

@Gordon 和 @willglynn 提供了很多有用的背景来说明您的查询为何缓慢。

一种解决方法是向表中添加一个计数器，并添加`items`使`hosts`它们保持最新的触发器 - 以降低写入操作的成本。
或者像你一样使用物化视图。我可能会选择那个。

为此，您仍然需要定期执行这些查询，并且*可以*对其进行改进。将您的第一个重写为：

```
SELECT id, i.description, hi.ct
FROM   items i
JOIN  (
    SELECT item AS id, count(*) AS ct
    FROM   host_item
    GROUP  BY item
    ORDER  BY ct DESC
    LIMIT  10
    ) hi USING (id); 
```

*   如果表`items`中的大多数行都存在表中的一行`host_item`，则先聚合再聚合会更快`JOIN`。与@willglynn 推测的相反，这在 Postgres 9.1 中并没有自动优化。

*   `count(*)`比`count(col)`在主体上更快 - 并且等价的同时`col`不能为 NULL。（A`LEFT JOIN`可能会引入 NULL 值。）

*   简化`LEFT JOIN`为`JOIN`. 假设总是至少有十个不同的主机应该是安全的。对您的原始查询无关紧要，但这是此查询的要求。

*   表上的索引`host_item`无济于事，`items`其余部分由 PK 覆盖。

对于您的情况，可能仍然不够好，但在我使用 Postgres 9.1 进行的测试中，这种形式的速度是**两倍多**。应该转换为 9.2，但`EXPLAIN ANALYZE`可以肯定地测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T16:15:45.570

您编写的查询在任何数据库中都会很慢。与没有 的查询的比较`order by`很有趣。速度返回表明涉及索引。如果是这样，那么它可以从索引中找到计数。

更公平的比较是不带`order by`and 不带`limit`子句的查询。这样，将生成所有行，就像在带有`order by`. 基本上，数据库引擎必须评估所有行才能找到前 10 行。优化器决定是否需要对数据进行排序或采取其他方法。

你有几个选择。首先是查看是否可以通过更改特定于 Postgres 的参数来加快查询的性能。例如，页面缓存可能太小并且可以扩展。或者，也许有一些排序优化参数可以提供帮助。

其次，您可以按照您的建议创建一个汇总表，该表由定期运行的作业构建。如果稍微过时的数据没有问题，那么这很好。

第三，您可以拥有汇总表，但使用触发器而不是作业来填充它。当数据发生变化时，更新各种计数。

第四，您可以尝试其他方法。例如，也许 Postgres`COUNT(*) over ()`比聚合更优化窗口函数。或者，它可能`row_number()`比`order by`. 或者，如果您只能使用一个值而不是 10 个值，那么`MAX()`就足够了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T07:56:00.330

根据发布的计划，您的行数估计很好，并且计划看起来有点理智。您的主要问题是大问题，可能是以下原因所必需的`ORDER BY`：

```
Sort Method: external merge Disk: 64288kB 
```

即使您有快速存储，这也会受到伤害。如果您在单个硬盘驱动器或（更糟糕的）RAID5 阵列上，那将非常非常慢。这种排序随着 Erwin 的更新查询而消失，但增加`work_mem`仍然可能为您带来一些性能。

您应该[`work_mem`](http://www.postgresql.org/docs/current/static/runtime-config-resource.html)为此查询或（更少）全局增加 ，以获得*更好的*性能。尝试：

```
SET work_mem = '100MB';
SELECT your_query 
```

看看它有什么不同。

您可能还想使用`random_page_cost`和`seq_page_cost`参数来查看不同的平衡是否会产生更适合您的环境的成本估算，从而导致规划器选择更快的查询。对于像这样的相对少量的数据，其中大部分数据将缓存在 RAM 中，我会从 和 之类的东西`random_page_cost = 0.22`开始`seq_page_cost = 0.2`。你可以`SET`像你一样使用它们`work_mem`，例如：

```
SET work_mem = '100MB';
SET random_page_cost = 0.22;
SET seq_page_Cost = 0.2;
SELECT your_query 
```

如果您正在设置它并且您有很多活动连接，请不要设置*那么*高，因为它是按排序而不是按查询，因此某些查询可能会使用多次，而一次只有几个可能会使系统内存耗尽; 您需要将其设置得足够低，以使每个连接都可以使用 2x 或 3x ，而不会出现系统内存不足的情况。您可以使用 为每个事务设置它，使用 为每个用户，使用 为每个数据库或全局设置它。`work_mem``postgresql.conf``work_mem``max_connections``work_mem``SET LOCAL``ALTER USER ... SET``ALTER DATABASE ... SET``postgresql.conf`

看：

*   [资源消耗配置参数](http://www.postgresql.org/docs/current/static/runtime-config-resource.html)
*   [调整你的 PostgreSQL 服务器](http://wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server)

# image - 在分类产品中显示属性图像

> ID：12918751
> 
> 赞同：0
> 
> 时间：2012-10-16T15:57:27.207
> 
> 标签：image, list, magento, categories

我有这个属性“品牌”的文件显示在产品页面中：

`brands.phtml`---- [http://pastebin.com/kfiuGTdh](http://pastebin.com/kfiuGTdh) `adminhtml.xml` ---- [http://pastebin.com/rFj4KMR4](http://pastebin.com/rFj4KMR4) `config.xml` ---- [http://pastebin.com/ac76KLcT](http://pastebin.com/ac76KLcT) `system.xml` ---- [http://pastebin.com /iGdF14sc](http://pastebin.com/iGdF14sc) `data.php` ---- [http://pastebin.com/Zdg3VZbU](http://pastebin.com/Zdg3VZbU) `v1_brands.xml` ---- [http://pastebin.com/6mm3iBdk](http://pastebin.com/6mm3iBdk)

此代码用于在产品页面中显示品牌，位于 view.phtml 中：

```
<?php echo $this->getChildHtml('product_attributes_placeholder'); ?> 
```

我想修改它以在每个产品的类别/主页中显示品牌形象，如下所示：

[http://postimage.org/image/op26uwz6b/](http://postimage.org/image/op26uwz6b/)

我尝试了更多选择，但没有任何效果，我现在不知道该怎么做。我希望你明白我想要什么..提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:49:30.530

您是否确保在 magento 管理员的属性选项中启用了“在产品列表中显示属性”？

这将确保将属性加载到列表页面/集合上使用的集合中，否则您将无法使用它:)

# php - WordPress搜索忽略每页限制的帖子？

> ID：12918755
> 
> 赞同：1
> 
> 时间：2012-10-16T15:57:41.637
> 
> 标签：php, wordpress

我想覆盖 CMS 中指定的发布限制（设置为 12）。我在参数中添加了“posts_per_page”，这是我在 Wordpress Codex 中找到的，但它不起作用。

此搜索代码来自 CookingPress 主题。

**问题**：为什么参数 'posts_per_page' => 24 不起作用？

```
<?php 
if ($_GET['submit']) {

    $args = array(
            'posts_per_page' => 24,
            'tax_query' => array(
                    'relation' => 'AND'
            )
            ,'post_type' => 'post'
    );

    $cat = mysql_real_escape_string($_GET['cat']);
    $categories = array();
    if($cat) {
        $categories = array (
                'taxonomy' => 'category',
                'field' => 'term_id',
                'terms' => array( $cat )
        );
        array_push($args['tax_query'],$categories);
    }

    $level = mysql_real_escape_string($_GET['level']);
    $levels = array();
    if($level) {
        $levels = array (
                'taxonomy' => 'level',
                'field' => 'slug',
                'terms' => array( $level )
        );
        array_push($args['tax_query'],$levels);
    }

    $serving = mysql_real_escape_string($_GET['serving']);
    if($serving) {
        $servings = array (
                'taxonomy' => 'serving',
                'field' => 'slug',
                'terms' => array( $serving )
        );
        array_push($args['tax_query'],$servings);
    }

    $time = mysql_real_escape_string($_GET['timeneeded']);
    if($time) {
        $times = array (
                'taxonomy' => 'timeneeded',
                'field' => 'slug',
                'terms' => array( $time )
        );
        array_push($args['tax_query'],$times);
    }

    $allergen = $_GET['allergens'];
    if($allergen) {
        $allergens = array (
                'taxonomy' => 'allergen',
                'field' => 'slug',
                'terms' => $allergen
        );
        array_push($args['tax_query'],$allergens);
    }

    $tags = $_GET['include_ing'];

    if($_GET['relation']=='all') {
        if($tags) {
            foreach ($tags as $t) {
                $tagsquery = array (
                        'taxonomy' => 'post_tag',
                        'field' => 'slug',
                        'terms' => mysql_real_escape_string($t)
                );
                array_push($args['tax_query'],$tagsquery);
            }
        }
    } else {
        if($tags) {
            $tagsquery = array (
                    'taxonomy' => 'post_tag',
                    'field' => 'slug',
                    'terms' => $tags
            );

            array_push($args['tax_query'],$tagsquery);
        }
   }

    $extags = $_GET['exclude_ing'];
    if($extags) {
            $extagsquery = array (
                    'taxonomy' => 'post_tag',
                    'field' => 'slug',
                    'terms' => $extags,
                    'operator' => 'NOT IN'
            );
            array_push($args['tax_query'],$extagsquery);
        }

    if(!$wp_query) global $wp_query;
    $args = array_merge( $args , $wp_query->query );
    query_posts( $args);

}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-09T14:51:29.850

### 可能的解决方案

尝试将`nopaging`参数设置为`false`：

```
$args = array(
  'posts_per_page' => -1,
  'nopaging' => false,
  'post_type' => 'post'
); 
```

### 参考

[Codex：分页参数](http://codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters)

# d3.js - .map 生成错误形状的多边形点列表

> ID：12918757
> 
> 赞同：0
> 
> 时间：2012-10-16T15:57:45.380
> 
> 标签：d3.js

实际上，这可能更像是一个 Javascript 问题，但是由于我在 d3 中编码时遇到了这个问题，并且由于它只出现在 IE9 中，所以我认为它与 d3 用户特别相关。

这是我所做的：我开始将鼠标单击添加到数组中：

```
daLineArray.push({ x: d3.mouse(this)[0], y: d3.mouse(this)[1] }); 
```

通过将结果数组输入 d3.svg.line 生成器，我由此生成了一条路径。这适用于所有浏览器。

然后我通过首先将原始数组映射到一个较短的数组来将路径变成一个多边形：

```
daLineArrayShort = daLineArray.map(function(d) { return d3.values(d) }); 
```

然后将其输入 d3.area 生成器。

这会在所有浏览器中生成一个精细的多边形，除了 IE9，它抱怨点列表没有正确的形式。

老实说，IE9 是对的。

当我以 html 形式检查生成的多边形时，它看起来像这样（在这种情况下，数字是虚构的）：

```
points="10,10,20,20,30,30,40,40,etcetera" 
```

虽然我猜它应该是这样的：

```
points="10,10 20,20 30,30 40,40 etcetera" 
```

换句话说，在需要空格的坐标对之间有一个逗号。

我之前注意到了这一点，但是当我在 IE9 中测试我的工作时，我才意识到这是一个问题。

所以，我的问题是：如何生成正确解析的数组？

（我确实尝试将点直接推到 上`daLineArrayShort (.push([d3.event.pageX, d3.event.pageY])`，但这也没有产生正确的点列表 - 逗号一直在支撑。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:12:49.933

由 Alexander Skarburskis 在 google d3 组中解决：

[http://groups.google.com/group/d3-js/browse_thread/thread/10387708619aab34](http://groups.google.com/group/d3-js/browse_thread/thread/10387708619aab34)

# javascript - 在 javascript 中使用 Math.round 在末尾添加了奇怪的 0

> ID：12918761
> 
> 赞同：-1
> 
> 时间：2012-10-16T15:57:59.660
> 
> 标签：javascript, floating-point, rounding, digits, decimal

> **可能的重复：**
> [JavaScript 的数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)

我正在使用 Math.round 对数字进行四舍五入，并且由于某种原因，它在末尾添加了奇怪的 0 数量，而这些 0 不应该存在。这是我的代码：

```
return Math.round($digit * 1000) / 1000; 
```

我希望数字有 3 个小数点

例子：

```
 Math.round(29.469 * 1000) / 1000 = returns this value: 29.469000000000023 
```

似乎无法弄清楚为什么。有没有不同的方法将小数四舍五入到某个小数点？我需要 3 个小数点。或者也许修剪第三位小数后的所有内容？这将是完美的取返回的数字并在小数点后三位修剪所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:00:36.133

```
yourVariable.toFixed(3); 
```

会给你你想要的。

[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)

# amazon-web-services - Amazon-MWS 没有处理我们的请求。[没有错误，没有节流]

> ID：12918763
> 
> 赞同：1
> 
> 时间：2012-10-16T15:58:11.563
> 
> 标签：amazon-web-services, amazon-mws

我们正在托管一个有 30 个用户的应用程序。我们每 10 分钟发送一次`_GET_FLAT_FILE_OPEN_LISTINGS_DATA_`请求。如果完成，我们每 4 分钟查看一次。周五前一切顺利。我们甚至每两分钟查看一次。并在不到 10 分钟的时间内获得了结果。现在（从星期五开始）我们必须等待一个多小时。我们没有改变任何东西。没有错误，应该没有节流？它可能与关闭 AWS API 有关吗？所以大家都改用MWS了？亚马逊 MWS 支持很慢，他们不回答我们，这就是我们寻求其他用户帮助的原因。从星期五开始你有类似的问题吗？这可能是什么原因？

PS我们正在使用PHP库。我们使用 MWS Scratchpad 查找了 ReportRequestList。请求已成功交付。所以唯一的问题是，亚马逊现在花了很长时间来处理 ReportRequest。

就像罗伯特说的那样，仅仅一周后问题就消失了。您无能为力（如果有，请告诉我；）），所以如果发生这种情况，请保持冷静。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:12:59.327

不幸的是，MWS 可能需要一些时间来生成报告。根据我的经验，这是正常的行为。

至于 AWS - AWS 和 MWS 是完全不同的 API，服务于不同的目的。所以一个不应该影响另一个。

您可能想查看另一份报告是否符合您的目的——例如是否符合您`_GET_MERCHANT_LISTINGS_DATA_LITE_`的`_GET_MERCHANT_LISTINGS_DATA_LITE_`目的？返回较少的列可能有助于提高报告生成速度。

除此之外，唯一的另一件事是为这些不测事件计划某种应急措施，因为它们将再次发生。

请记住，我们正随着假期进入旺季 - 生成报告可能需要比正常时间更长的时间。

- 编辑 -

我刚刚生成了我们的订单报告，从 to 到 5 分钟，从`_SUBMITTED_`to 到1`_IN_PROGRESS_`分钟。您知道哪个状态导致延迟吗？`_IN_PROGRESS_``_DONE_`

# wordpress - 从主要 RSS 提要中排除类别，但不是所有提要

> ID：12918765
> 
> 赞同：0
> 
> 时间：2012-10-16T15:58:12.003
> 
> 标签：wordpress, rss

我有一个博客，它通过 RSS 向多个 MailChimp 时事通讯提供内容。第一份时事通讯工作正常，但第二份我遇到了问题。我遇到的问题是第二个时事通讯有“隐藏”的内容。此内容不适合广泛使用，因此不会出现在首页上，但可以在网站的其他地方访问。与此有关的问题是，并非所有这些内容都被隐藏，只是其中的一些内容，而此时事通讯的其他内容可能与第一个时事通讯重叠。这显然会使排除所有内容成为问题，因为它们可以被分配多个类别，其中一些我不想隐藏。

我遇到的问题是我有办法将这些内容从首页中排除，但不能从主 RSS 提要中排除。我为此使用了 WP Hide Post，它允许我从提要中排除，进而将其从所有提要中删除，包括提供新闻通讯的提要。我目前正在使用 /feed?cat=XXX 来引用这些提要。有没有办法让它类别提要仍然有效，只是主要的 /feed RSS 会排除它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:50:59.417

我不确定你是否想要这个。我猜你想从你的`rss`提要中排除一个或多个类别，为此你可以在你的`functions.php`

```
function myFeedExcluder($query) {
    if ($query->is_feed) {
       $query->set('cat','-10'); // excludes category with id 10
    }                            // for multiple you can use ‘-10,-20,-30′  
    return $query;
}
add_filter('pre_get_posts','myFeedExcluder'); 
```

您也可以直接在链接中使用

```
<a href="<?php bloginfo('url'); ?>/feed?cat=-10&cat=-20">Entries (RSS)</a>
<a href="<?php bloginfo('url'); ?>/feed=rss2&cat=-10,-20">Entries (RSS)</a> 
```

你也可以检查这个[插件](http://coffee2code.com/wp-plugins/stealth-publish/)来排除一些帖子，`feed`但我没有测试它，这是[另一篇](http://zenverse.net/wordpress-exclude-categories/)关于从`RSS Feed And More`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:57:59.673

我最终不得不从另一个角度重新考虑这个问题。我不得不为我的每个类别创建独特的提要，而不是能够从主要提要中排除帖子。这使得这些提要独立于主要提要，并且不会受到 WP Hide Posts 插件的影响。

我所做的是将这个文件放到我的主题文件夹中，然后使用分配给它的模板创建空白页面。在顶部，我让它处理我创建的每个页面并将其分配给相应的类别。

```
<?php 
/* 
Template Name: Custom feeds
*/
$numposts = 10; // number of posts in feed

if ( is_page( 'custom-feed-1' )) {    
    $posts = query_posts('showposts='.$numposts.'&cat=1'); 
} elseif ( is_page( 'custom-feed-2' )) {  
    $posts = query_posts('showposts='.$numposts.'&cat=2');  
} elseif ( is_page( 'custom-feed-3' )) {  
    $posts = query_posts('showposts='.$numposts.'&cat=3'); 
}

$more = 1;

header('Content-Type: '.feed_content_type('rss-http').'; charset='.get_option('blog_charset'), true);
echo '<?xml version="1.0" encoding="'.get_option('blog_charset').'"?'.'>';
?>

<rss version="2.0"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:wfw="http://wellformedweb.org/CommentAPI/"
  xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
  xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
  xmlns:media="http://search.yahoo.com/mrss/">

<channel>
  <title><?php bloginfo_rss('name'); wp_title_rss(); ?> - Article Feed</title>
  <atom:link href="<?php self_link(); ?>" rel="self" type="application/rss+xml" />
  <link><?php bloginfo_rss('url') ?></link>
  <description><?php bloginfo_rss("description") ?></description>
  <lastBuildDate><?php echo mysql2date('D, d M Y H:i:s +0000', get_lastpostmodified('GMT'), false); ?></lastBuildDate>
  <?php the_generator( 'rss2' ); ?>
  <language>en-US</language>
  <sy:updatePeriod><?php echo apply_filters( 'rss_update_period', 'hourly' ); ?></sy:updatePeriod>
  <sy:updateFrequency><?php echo apply_filters( 'rss_update_frequency', '1' ); ?></sy:updateFrequency>
  <?php do_action('rss2_head'); ?>
  <?php while( have_posts()) : the_post(); ?>

  <item>
    <title><?php the_title_rss(); ?></title>
    <link><?php the_permalink_rss(); ?></link>
    <comments><?php comments_link(); ?></comments>
    <pubDate><?php echo mysql2date('D, d M Y H:i:s +0000', get_post_time('Y-m-d H:i:s', true), false); ?></pubDate>
    <dc:creator><?php the_author(); ?></dc:creator>
<?php the_category_rss(); ?>
    <guid isPermaLink="false"><?php the_guid(); ?></guid>
<?php if (get_option('rss_use_excerpt')) : ?>
    <description><![CDATA[<?php the_excerpt_rss() ?>]]></description>
<?php else : ?>
    <description><![CDATA[<?php the_excerpt_rss() ?>]]></description>
  <?php if ( strlen( $post->post_content ) > 0 ) : ?> 
    <content:encoded><![CDATA[<?php the_content() ?>]]></content:encoded>
  <?php else : ?>
    <content:encoded><![CDATA[<?php the_excerpt_rss() ?>]]></content:encoded>
  <?php endif; ?>
<?php endif; ?>

<?php do_action('rss2_item'); ?>

  </item>
  <?php endwhile; ?>

</channel>
</rss> 
```

另外我不想声称这个模板，我前一段时间在网上找到了它并对其进行了修改，我只是不记得我在哪里看到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:54:55.990

```
add_action('pre_get_posts', 'exclude_category' );
function exclude_category( &$wp_query ) 
    // Exclude from loop, archive and feed but not from category page/feed
   if( is_home() || ( is_feed() && !is_category() ) || ( is_archive() && !is_category() )) { // Exclude from home, feed, but not from category page/feed
        set_query_var('category__not_in', array(120)); // Exclude category with ID 120
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-09T06:50:19.097

谢谢！这可以完美地从主 rss 提要中排除一个类别，但仍将其包含在类别 rss 提要中。

但是，当我将代码插入到 functions.php 中时，代码中有一个小的语法错误导致我的网站崩溃。它缺少 if 语句的左“{”括号。这是更正后的代码：

```
add_action('pre_get_posts', 'exclude_category' );
function exclude_category( &$wp_query ) 
    // Exclude from loop, archive and feed but not from category page/feed
   { if( is_home() || ( is_feed() && !is_category() ) || ( is_archive() && !is_category() )) { // Exclude from home, feed, but not from category page/feed
        set_query_var('category__not_in', array(120)); // Exclude category with ID 120
    }
} 
```

当然，请记住将“120”更改为您的类别 ID。

再次感谢你。这太有帮助了！

# php - 无法在 Csv 中加载 Utf8 列

> ID：12918768
> 
> 赞同：0
> 
> 时间：2012-10-16T15:58:19.037
> 
> 标签：php, csv, utf-8

我想用 php 上传一个 csv 文件，它的英文列没有任何问题，但是 utf8 和波斯字符有问题我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:09:51.030

使用一些东西：unicode、utf-16 或 utf-32

# python - 递归星模式

> ID：12918773
> 
> 赞同：0
> 
> 时间：2012-10-16T15:58:26.320
> 
> 标签：python, recursion

我需要从递归解决方案中打印出特定的星星图案。输入看起来很像这样：

```
printPattern(2,8) 
```

输出将是：

```
 *
  **
   *
  ****
    *
    **
     *
  ********
      *
      **
       *
      ****
        *
        **
         * 
```

是的，开头已经有 2 个空格。对于 printPattern(0,4)：

```
*
**
 *
****
  *
  **
   * 
```

我已经从以下内容开始，但我知道我的方向是错误的，“重复”任何关于如何继续的指示，还是应该放弃它？

现在我所做的就是找出偶数和奇数行，我计划从 0 开始重复打印星，但我得到一个 UnboundLocalError：

```
repeat = 0
def printPattern(n,k):
    'prints a pattern of stars'
    if n == k:
        print("Done")
    elif n%2 == 0:
        print('even')
        repeat +=1
        printPattern(n+1,k)
    else:
        print (end=' ')*repeat
        print ('*')
        repeat+=1
        printPattern(n+1,k) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-04T19:01:13.697

大多数讨论都集中在`repeat`真正不需要的变量上，无论是作为全局变量还是作为参数。您的终止案例`n == k`似乎很奇怪，因为终止取决于`k`但`k`不取决于`n`. 我认为`k < 1`真的是当这种递归停止时。最后，您的偶数案例不会打印任何内容。

我把这个问题分为三个步骤：递归地在中心左侧打印一个较小的图案；打印中心；递归地在中心右侧打印一个较小的图案偏移：

```
def printPattern(n, k):
    ''' print a pattern of stars '''

    if k < 1:  # base case
        return

    printPattern(n, k // 2)
    print(' ' * n, '*' * k, sep='')
    printPattern(n + k - k // 2, k // 2)

print(2, 8)
printPattern(2, 8)
print(0, 4)
printPattern(0, 4)
print(5, 9)
printPattern(5, 9) 
```

输出

```
> python3 test.py
2 8
  *
  **
   *
  ****
    *
    **
     *
  ********
      *
      **
       *
      ****
        *
        **
         *
0 4
*
**
 *
****
  *
  **
   *
5 9
     *
     **
      *
     ****
       *
       **
        *
     *********
          *
          **
           *
          ****
            *
            **
             *
> 
```

由于没有提供示例，并且我无法从您的代码中对其进行逆向工程，因此我没有对奇数输入做任何太有趣的事情。

# java - 在 Java 中准确地绘制图像

> ID：12918780
> 
> 赞同：2
> 
> 时间：2012-10-16T15:58:49.623
> 
> 标签：java, swing, jpanel, bufferedimage, paintcomponent

在下面的代码中，我将 2dim 数组转换为缓冲图像（有效，图像是二进制（背面和白色））。然后我显示这个图像。

我现在的问题是**如何更新此图像**（因为我想在每次循环运行中绘制一些未在此处显示的内容）。

这也引出了我的第二个问题：我**怎样才能在这张图片上画一个点**。（这也意味着如果我想在 150,100 上画一个点；它应该在图像的 150,100 像素上）。

```
public void showImage(int xPoint, int yPoint) throws IOException {

    // Two dim array conversion to a bufferedImage
    BufferedImage bimg = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
    for (int y = 0; y < width; y++) {
        for (int x = 0; x < height; x++) {

            tempValue = (pixelArray[y][x]==1) ? 255 : 0;
            int value = tempValue << 16 | tempValue << 8 | tempValue;
            bimg.setRGB(x, y, value);

        }
    }

    JFrame canvas = new JFrame();
    canvas.setSize(bimg.getWidth(), bimg.getHeight());
    canvas.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    canvas.setTitle("Contour");
    Container pane = canvas.getContentPane();
    ColorPanel panel = new ColorPanel(bimg,xPoint,yPoint);
    pane.add(panel);
    canvas.setVisible(true);
} 
```

和

```
 class ColorPanel extends JPanel {
    BufferedImage bimg;
    int x;
    int y;

    public ColorPanel(BufferedImage image,int _x, int _y) {
        bimg = image;
        x = _x;
        y = _y;
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        g2d.drawImage(bimg, null, 0, 0);
    }
} 
```

我尝试的是：

```
 g2d.setColor(Color.RED);
  g2d.drawLine(x, y, x, y); 
```

尽管每次运行都会打开一个新窗口，但我认为重点不对

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:22:20.043

我为你做了一个小例子。

基本上它是`JFrame`一个*自定义* `JPanel`调用`ColorPanel`（这很像你的一些额外的方法，即`drawDot(..)`and `setBufferedImage(..)`）

将`JFrame`初始化并添加`JPanel`（`BufferedImage`在这种情况下完全黑色）。此后，*每*`Image`2 秒使用`BufferedImage#setRGB(...)`.

我将计时器设置为更快（200milis），这就是图片开始的样子：

注意它是准确的，让它像一个明显的坐标一样着色`drawPoint(0,0)`，你会看到（我没有证明这一点，因为截图是不可能的或没有任何用处）

![在此处输入图像描述](../Images/d6ee9b86ae7e13f78dbc932b224f9689.png)

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.image.BufferedImage;
import java.net.URL;
import java.util.Random;
import javax.imageio.ImageIO;
import javax.swing.AbstractAction;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class PixelDotOnImage {

    public PixelDotOnImage() throws Exception {
        JFrame frame = new JFrame();
        frame.setTitle("Random Pixel Dots On Image with Timer");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setResizable(false);

        initComponents(frame);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {

        //create frame and components on EDT
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    new PixelDotOnImage();
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            }
        });
    }

    private void initComponents(JFrame frame) throws Exception {

        final BufferedImage bi = ImageIO.read(new URL("http://2.bp.blogspot.com/_KI3IRH6RxSs/S-uuLsgGJ3I/AAAAAAAAA5E/AA5mWBMLIvo/s1600/mat-black-lg.jpg"));
        final ColorPanel cPanel = new ColorPanel(bi);
        frame.add(cPanel);

        //create timer to color random pixels
        Timer timer = new Timer(2000, new AbstractAction() {
            int xMax = bi.getWidth(), yMax = bi.getHeight();
            Random rand = new Random();

            @Override
            public void actionPerformed(ActionEvent ae) {

                int x = rand.nextInt(xMax);
                int y = rand.nextInt(yMax);

                if (cPanel.drawDot(x, y)) {
                    System.out.println("Drew white dot at: (" + x + "," + y + ")");
                } else {
                    System.out.println("Cant draw white dot at: (" + x + "," + y + ")");
                }

            }
        });

        timer.start();
    }
}

class ColorPanel extends JPanel {

    private BufferedImage bimg;
    private Dimension dims;

    public ColorPanel(BufferedImage image) {
        bimg = image;
        dims = new Dimension(bimg.getWidth(), bimg.getHeight());
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        g2d.drawImage(bimg, 0, 0, null);
    }

    //this method will allow the changing of image
    public void setBufferedImage(BufferedImage newImg) {
        bimg = newImg;
    }

    //ths method will colour a pixel white
    public boolean drawDot(int x, int y) {

        if (x > dims.getWidth() || y > dims.getHeight()) {
            return false;
        }

        bimg.setRGB(x, y,  0xFFFFFFFF);//white

        repaint();
        return true;
    }

    @Override
    public Dimension getPreferredSize() {
        return dims;
    }
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T16:29:52.553

与其构建图像然后将其添加到 JPanel，不如考虑通过覆盖它的paintComponent 方法来直接在面板上进行绘图，如下所示：

```
public class PainterPanel extends JPanel {
    public void paintComponent(Graphics g){     
        super.paintComponent(g);

        // draw a diagonal line from top left to bottom right
        Dimension d = getSize();
        g2.draw(new Line2D.Double(0,0,d.width,d.height));
    }
} 
```

每次调用该方法时都会调用此方法`repaint()`（例如，通过调整框架的大小，或通过自己手动调用它）。您可以进行任何所需的复杂处理，包括绘制点矩阵。

唯一的问题（如果您也坚持原来的行为，这将是真的）是重新绘制发生在一个单独的线程中，因此您需要注意何时以及如何更新数据，以便以线程安全的方式完成.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T18:14:50.203

> 我怎样才能更新这个图像

*   要在图像上绘图，请使用 bimg.getGraphics() 获得的图形（然后像在 a 中一样使用它`paintComponent`）。[请参阅 Javadocs](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html#getGraphics%28%29)

> 我怎样才能在这张图片上画一个点

*   要在缓冲图像的特定点上绘画，请使用从上述答案中检索到的图形对象的任何方法。例子`g.drawLine(150,100,150,100)`

# algorithm - 二维网格上的基本数学

> ID：12918781
> 
> 赞同：0
> 
> 时间：2012-10-16T15:58:51.610
> 
> 标签：algorithm, math

想象一个显示在 2D 屏幕上的美式足球场。场地每十码有一个标记。每个标记只是跨越场地高度的一条垂直线。假设有人在场上给了你一个 (x, y) 位置。**如何在不使用循环的情况下确定最接近 (x, y) 位置的垂直标记？**

目前我正在使用这样的简单循环：

```
// want marker closest to x
float x = randomFloat();

double minDistance = Double.MaxValue;
Marker closestMarker = null;

foreach (Marker m in markers) {
    double d = ABS(x - m.x);
    if (d < minDistance) {
        minDistance = d;
        closestMarker = m;
    }
} 
```

我觉得这可以在不检查每个标记的情况下完成，因为标记是均匀间隔的，而且我们知道总标记数。但是，在必要的划分等方面，我是空白的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T16:46:29.030

让我们假设有`n`标记并且. 然后，离点最近的一个由 给出。`x[0] ... x[n-1]``x[i] = x[0] + 10 * i``x``i = min(n-1, max(0, round((x - x[0]) / 10)))`

这比其他答案稍微更一般，因为它处理第一个标记不在的情况，以及在场外的情况。`x[0] = 0``x`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:03:50.680

在java中：

```
int distanceOfClosestMarker = (int) (Math.floor(givenX / tenYards) * tenYards);
// markersByDistance is map of markers by theirs distance. you can use array instead.
Marker closestMarker = markersByDistance.get(distanceOfClosestMarker);
// array version is this
closestMarker = arrayOfMarkers[distanceOfClosestMarker / tenYards]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T16:06:33.757

如果您只需将其四舍五入到最接近的十位，则使用除以乘以 10 以获得最接近的标记。

（顺便说一句，如果你使用 C#，你可以做类似的事情

```
var nearestMarker = markers.Min(m => x-m.x); 
```

)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T16:26:04.253

```
// Assuming that markers is ordered by X coordinate and the first one has X = 0
Marker ClosestMarker(float x, List<Marker> markers) {
    int m = (int)Math.Floor(x / 10);

    if(x - m * 10 < 5) return markers[m];
    else return markers[m + 1];
} 
```

# ruby-on-rails - 计数 > 0 个 mongoid 标准

> ID：12918783
> 
> 赞同：1
> 
> 时间：2012-10-16T15:58:57.683
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongoid

```
Class User
has_many :gifts
end

Class Gift
belongs_to :user
end 
```

我想知道一位或多位用户是否有一件或多件礼物，例如：

```
User.any_of(gift: > 0).count 
```

正确的查询如何？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:35:48.210

恕我直言，仅适用于 map-reduce：

```
 mapper = %{
function() { emit(this.user_id, 1) }
}

reducer = %{
function(k, vals) {
  var sum = 0;
  vals.forEach(function(val) {
    sum += val;
  });
return sum;
}
}

Gift.collection.map_reduce(mapper, reducer, out: {inline: 1}, raw: true) 
```

然后您可以查看结果并选择您喜欢的结果。如果你有很大的集合，并且你不希望它们被内联返回，那么你可以使用 out: {replace: 'collection_name'}，然后你甚至可以链接选择器，比如：.where(value.gte = > 2).limit(10) 我认为你可以从这里拿走。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:59:19.370

如果嵌入文档

```
User.any_of(:gifts.exists => true) 
```

会出人意料的

如果不是嵌入文档

也许我认为你需要执行这样的事情

```
users_has_gifts = User.includes(:receivers).map { |user| 
  user if user.receivers.exits?
} 
```

# mysql - MySQL：SELECT 不返回任何结果，但 INSERT 抛出“重复条目”错误

> ID：12918787
> 
> 赞同：3
> 
> 时间：2012-10-16T15:59:08.423
> 
> 标签：mysql, select

我正在尝试使用产品描述表，但我有一个头疼的问题......
我有一个方法 (php) 可以查找记录的 ID 键。***如果不存在***
与搜索条件的匹配项，它会尝试创建行并返回该 ID。

 *现在，SELECT 正在返回零行，但具有相同值的 INSERT 会引发重复错误。

```
SELECT `id`
FROM (`m3sandbox_product_description`)
WHERE `product_id` =  '403466'
AND `company_id` =  '5'
AND `value` =  'TERMINAL, FEMALE DISCONNECT, 6.3MM, RED; Connector Type:Female Disconnect; Insulator Color:Red; Termination Method:Crimp; Stud/Tab Size:6.35mm x 0.81mm; Wire Size (AWG):22AWG to 16AWG; Contact Material:Copper; Contact Plating:Tin ;RoHS Compliant: Yes'
LIMIT 1 
```

.

```
INSERT INTO `m3sandbox_product_description`  (`product_id`, `company_id`, `value`, `datetime_created`)
VALUES  ('403466', '5', 'TERMINAL, FEMALE DISCONNECT, 6.3MM, RED; Connector Type:Female Disconnect; Insulator Color:Red; Termination Method:Crimp; Stud/Tab Size:6.35mm x 0.81mm; Wire Size (AWG):22AWG to 16AWG; Contact Material:Copper; Contact Plating:Tin ;RoHS Compliant: Yes', '2012-10-16T15:39:44+00:00') 
```

事实证明，我们公司的另一位开发人员针对同一个数据库使用完全不同的代码库（但类似的方法），他面临着完全相同的特殊障碍。

**我们应该做些什么**特别的事情来查询描述值，比如确保我们的 SELECT 的行为符合预期**？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:03:16.617

重复条目仅由重复的主键触发，而与使用的其他值无关。如果 product_id 是主键（？），那么可能存在 product_id = 403466 具有不同其他值的记录？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:06:54.320

*我找到了！！！！*

**端子串长度**

search/insert 语句的长文本值超过了列大小，因此，在搜索该长字符串时***没有***完全匹配，但在插入时，字符串的末尾被截断，新截断的字符串***确实***有完全匹配。

我希望这可以帮助将来的人:)*

# c# - 从 app.config 读取值

> ID：12918791
> 
> 赞同：5
> 
> 时间：2012-10-16T15:59:14.573
> 
> 标签：c#, app-config

我有一个存储在 .config 文件中的连接字符串，我不知道如何从中读取。
我四处搜索，发现最多的是关于如何读取存储在 AppSetting 中的键/值对。但是这个文件的组织方式不同。我只需要获取 ConnectionString 的值。
**注意：我无法修改`.config`文件。它是给我的。**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <sectionGroup name="userSettings" type="System.Configuration.UserSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
            <section name="Assessment.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" allowExeDefinition="MachineToLocalUser" requirePermission="false" />
        </sectionGroup>
    </configSections>
    <userSettings>
        <Assessment.Properties.Settings>
            <setting name="ConnectionString" serializeAs="String"> //This value I need
                <value>Provider=Microsoft.ACE.OLEDB.12.0;Data Source=[%CURRENT%]\DB.mdb</value>
            </setting>
        </Assessment.Properties.Settings>
    </userSettings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T16:03:26.337

项目的命名空间中会有 Settings 类（Assessment.Properties.Settings）

该类是自动生成的。

要访问您的连接字符串，只需使用

`Assessment.Properties.Settings.Default.ConnectionString`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T16:03:37.333

使用[ConfigurationManager.ConnectionStrings](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.connectionstrings.aspx)属性从应用程序配置文件中检索连接字符串。

您应该将连接字符串存储在配置文件的[connectionStrings](http://msdn.microsoft.com/en-us/library/system.configuration.connectionstringssection.aspx)部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T16:16:37.797

```
connectionString = ConfigurationManager.AppSettings["ConnectionString"]; 
```

在你的配置中

```
<appSettings> <add key="ConnectionString" value="whatever" /> </appSettings> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T16:07:00.823

如果不查看自定义配置部分处理程序，我只能猜测：

在你的代码中试试这个：

```
 var connString = System.Configuration.ConfigurationManager.GetSection
                    ("Assessment.Properties.Settings")["ConnectionString"]; 
```

但更好的是切换到使用 Microsoft Built-in ConnectionString 部分
`System.Configuration.ConnectionStringSettings`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T16:09:55.177

您可以访问“用户设置”部分，例如：

```
var userSection = (ConfigurationSection)ConfigurationManager.GetSection("userSettings"); 
```

# java - Eclipse JUnit 4 给出 NullPointerException

> ID：12918793
> 
> 赞同：4
> 
> 时间：2012-10-16T15:59:22.673
> 
> 标签：java, eclipse, junit

当我尝试运行 JUnit 4 测试时，我在 Eclipse 中得到 NullPointerException。JUnit3 虽然有效。

我正在尝试以下测试类：

```
import static org.junit.Assert.fail;
import org.junit.Test;

public class Test {

    @Test
    public void test() {
        fail("Not yet implemented");
    }

} 
```

这是异常堆栈跟踪：

```
java.lang.NullPointerException
    at org.eclipse.jdt.junit.launcher.JUnitLaunchConfigurationDelegate$ClasspathLocalizer.localURL(JUnitLaunchConfigurationDelegate.java:420)
    at org.eclipse.jdt.junit.launcher.JUnitLaunchConfigurationDelegate$ClasspathLocalizer.entryString(JUnitLaunchConfigurationDelegate.java:409)
    at org.eclipse.jdt.junit.launcher.JUnitLaunchConfigurationDelegate$ClasspathLocalizer.addEntry(JUnitLaunchConfigurationDelegate.java:396)
    at org.eclipse.jdt.junit.launcher.JUnitLaunchConfigurationDelegate$ClasspathLocalizer.localizeClasspath(JUnitLaunchConfigurationDelegate.java:387)
    at org.eclipse.jdt.junit.launcher.JUnitLaunchConfigurationDelegate.getClasspath(JUnitLaunchConfigurationDelegate.java:364)
    at org.eclipse.jdt.junit.launcher.JUnitLaunchConfigurationDelegate.launch(JUnitLaunchConfigurationDelegate.java:147)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:855)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:704)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:1047)
    at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1251)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

我正在使用带有 Java SDK 1.6.0_35（来自 Apple）的 OS X Snow Leopard。JDK 和 JUnit 4 都在我的构建路径中。Java版本与问题有关吗？

更新：

好吧，我是个白痴，没想到这一点。我为 C/C++ 开发人员安装了 Eclipse，因为我必须在 C++ 中做一些事情。但我也使用同一个实例为 Android 开发了 Android SDK 插件，并做了一些小的 Java 应用程序。但是我没有安装 Java 开发工具或 Java EE 开发工具。我现在安装了它们，JUnit 4 现在可以工作了。

我想其中一个工具用于 JUnit 4。奇怪的是 JUnit 3 工作。无论如何，它现在有效。

不过还是谢谢大家的支持。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T09:48:36.993

好吧，我是个白痴，没想到这一点。我为 C/C++ 开发人员安装了 Eclipse，因为我必须在 C++ 中做一些事情。但我也使用同一个实例为 Android 开发了 Android SDK 插件，并做了一些小的 Java 应用程序。但是我没有安装 Java 开发工具或 Java EE 开发工具。我现在安装了它们，JUnit 4 现在可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T05:07:17.927

我有同样的问题，因为升级问题，我将 ADT 从版本重新安装到 22.3 到 23。似乎新版本的 ADT 不包括“Java 开发工具”。

您可以查看“帮助”->“关于”->“安装详细信息”了解详细信息。

所以我使用eclipse中现有的Juno升级站点来安装JDT（Juno - [http://download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno)），之后就可以正常工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:09:20.780

您的导入 org.junit.Test 与类名冲突。您可能希望将您的类 Test 重命名为例如 ATest 以获得：

```
java.lang.AssertionError: Not yet implemented
    at org.junit.Assert.fail(Assert.java:91)
    at ATest.test(ATest.java:8) 
```

另一种选择可能是将 Test 放在一个包中（因为不使用默认包）

源代码：

```
import static org.junit.Assert.fail;
import org.junit.Test;

public class ATest {

    @Test
    public void test() {
        fail("Not yet implemented");
    }

} 
```

在 Max OS 10.8.0 上使用 Eclipse Juno 进行测试

```
java version "1.6.0_35"
Java(TM) SE Runtime Environment (build 1.6.0_35-b10-428-10M3811)
Java HotSpot(TM) Client VM (build 20.10-b01-428, mixed mode) 
```

我很确定这也适用于狮子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-03T07:52:13.003

解决方案是，是的，正如您的 UPDATE 描述的那样，默认值为尚未安装的 JUnit 4。一旦更改为 JUnit 3，它就可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-24T12:55:00.177

我在新安装的 Eclipse Neon 和 ADT（Android，包括 Java，通常安装 Junit）中遇到了同样的问题。

我刚刚安装了 JDT（Java 开发工具），之后它运行良好。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-08-26T09:16:10.173

我遇到过同样的问题！只需重置透视图（右键单击->重置），它就会起作用！

# smtp - 如何让 Jenkins/TeamCity 电子邮件通知器在企业网络上工作？什么可能是网络问题？

> ID：12918800
> 
> 赞同：1
> 
> 时间：2012-10-16T15:59:42.230
> 
> 标签：smtp, jenkins

1.  每当我尝试测试 Jenkins/TeamCity 电子邮件通知程序时，我都会收到 java.net.Connectexception:Connection timed out。计算机位于公司网络上。尽管关闭了计算机上的防火墙，但它不起作用。我已经完成了 gmail/yahoo 设置的尝试。

2.  一点背景知识，我之前从其他计算机上收到了来自 TeamCity 的电子邮件通知器的相同异常。那台计算机也在同一个网络上。

3.  此外，我尝试根据这些指南以编程方式发送电子邮件。 [http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/](http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/)。它适用于我的家庭网络，但不适用于公司网络。与上述公司网络上的相同例外。

4.  基于以上事实，我无法得出与网络问题相关的任何具体结论。因此，我无法将问题转给相关人员。附上屏幕截图以获取详细信息。

![在此处输入图像描述](../Images/e46ea19a2596dcb41357e8214296756d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T19:43:38.410

尝试使用 telnet 测试您的 SMTP 通信：[如何使用 Telnet 测试 SMTP 通信](http://technet.microsoft.com/en-us/library/aa995718%28v=exchg.65%29.aspx)

看起来您在公司网络内的机器和 SMTP 服务器之间存在一些通信问题。

# uitextfield - 故事板控制器中的 UITextField 在 iOS6 中停止工作

> ID：12918804
> 
> 赞同：3
> 
> 时间：2012-10-16T15:59:58.093
> 
> 标签：uitextfield, ios6, xcode-storyboard

我们有一个显示地图的故事板控制器。屏幕有许多嵌套视图来显示搜索文本、地图和地图的其他选择标准。此控制器适用于 5.0/5.1，但是当我在 6.0 模拟器中运行它时，搜索文本字段停止响应（没有光标闪烁或键盘弹出）。为了解决这个问题，我尝试了一些方法，例如 makeKeyWindowVisible 上的应用程序委托方法调用、文本委托回调中的 resignFirstResponder 方法调用等。然后我尝试从视图中删除控件并重建它们。这些方法都不起作用。最后，当它神秘地工作时，我将 segue 分离到控制器并重新连接它。这个解决方案没有解释，但它有效！

# mysql - IF 在 SWITCH CASE 语句中

> ID：12918808
> 
> 赞同：1
> 
> 时间：2012-10-16T16:00:20.770
> 
> 标签：mysql

我收到以下查询：

```
SELECT      ua.attribute_id, ma.attribute_name, ma.attribute_type, ma.attribute_default, ma.attribute_format,
    (CASE ma.attribute_type
        WHEN 0 THEN ua.attribute_default
        WHEN 1 THEN ua.attribute_bool
        WHEN 2 THEN ua.attribute_combo
        WHEN 3 THEN ua.attribute_decimal
        WHEN 4 THEN ua.attribute_integer
        WHEN 5 THEN ua.attribute_decimal
    END) AS attribute_value 
FROM        units_attributes AS ua
LEFT JOIN   models_attributes AS ma ON ma.attribute_id = ua.attribute_id
WHERE       ua.unit_id = 1 
```

我想为`attribute_value`. 如果`attribute_value`是`NULL`，那我想用`ua.attribute_default`。

我试图在 AS 之后使用 IF 语句，但它不起作用......

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T16:01:48.360

不要使用 IF，而是尝试使用[`COALESCE()`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce). 它接受多个参数并返回第一个非空值。

```
COALESCE(attribute_value, ua.attribute_default) 
```

# jquery - 调用谷歌地图和 bmap 脚本并添加功能

> ID：12918810
> 
> 赞同：0
> 
> 时间：2012-10-16T16:00:27.533
> 
> 标签：jquery, google-maps-api-3

我试图用get脚本调用google map api，然后用getscript调用bmap脚本，然后将bmap函数添加到同一个脚本中。这就是我试图调用谷歌地图 api 和 bmapsc 的方式

```
$.getScript("http://maps.google.co.uk/maps?    
file=api&v=2&async=2&callback=placeMap&key=my_API_key");
$.getScript("http://www.klossal.com/js/bmap/jQuery.bMap.1.3.js");
$("#map").bMap({
    mapZoom: 11,
    mapCenter:[51.501690392607,-0.1263427734375],
    mapSidebar:"sideBar", //id of the div to use as the sidebar
    markers:{"data":[
        {

"lat":51.49757618329838,"lng":-0.1746654510498047,"title":"Science  
Museum","body":"Exhibition Road, London SW7"
        },{

 "lat":51.47769451182406,"lng":-0.0009441375732421875,"title":"Royal Observatory 
Greenwich","body":"Blackheath Ave, Greenwich, London SE10"
        },{

"lat":51.49624032118747,"lng":-0.10857582092285156,"title":"Imperial War 
Museum","body":"Lambeth, London, SE1"
        },{

"lat":51.51792987720294,"lng":-0.1272869110107422,"title":"British Museum"                  
        },{

"lat":51.495625811469374,"lng":-0.17642498016357422,"title":"Natural History 
Museum","body":"Cromwell Road, London, SW7"                 
        },{

"lat":51.50177053585362,"lng":-0.12908935546875,"title":"Churchill Museum"                  
        }
    ]}
});
}); 
```

我不确定为什么这不起作用，对此的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:23:56.197

我认为您在 getScript 中使用的 google maps API 的链接是错误的，不是吗？不应该

> [http://maps.google.co.uk/maps/api/js?sensor=false](http://maps.google.co.uk/maps/api/js?sensor=false)

代替

```
$.getScript("http://maps.google.co.uk/maps?file=api&v=2&async=2&callback=placeMap&key=my_API_key"); 
```

您不再需要 get 来使其工作，只有当您想监控地图使用情况[时，您才能在此处看到](https://developers.google.com/maps/signup)：

> 谷歌地图 JavaScript API v3
> 
> Google Maps JavaScript API v3 不需要 API 密钥即可正常运行。但是，我们强烈建议您使用 API 控制台密钥加载 Maps API，该密钥允许您监控应用程序的 Maps API 使用情况。了解如何使用 API 控制台密钥。

这是一种方法：

***警告 UGLY 代码，仅用于回答钱包请使用 Require.js 或类似的东西在生产环境中进行这样的加载***

```
$(document).ready(function(){
        $.getScript("http://maps.google.co.uk/maps/api/js?sensor=false",
            $.getScript("http://www.klossal.com/js/bmap/jQuery.bMap.1.3.js",
                function(){
                    $("#map").bMap({
                        mapZoom: 11,
                        mapCenter:[51.501690392607,-0.1263427734375],
                        mapSidebar:"sideBar", //id of the div to use as the sidebar
                        markers:{"data":[
                            {
                                "lat":51.49757618329838,"lng":-0.1746654510498047,"title":"Science Museum","body":"Exhibition Road, London SW7"
                            },{
                                "lat":51.47769451182406,"lng":-0.0009441375732421875,"title":"Royal Observatory Greenwich","body":"Blackheath Ave, Greenwich, London SE10"
                            },{
                                "lat":51.49624032118747,"lng":-0.10857582092285156,"title":"Imperial War Museum","body":"Lambeth, London, SE1"
                            },{
                                "lat":51.51792987720294,"lng":-0.1272869110107422,"title":"British Museum"                  
                            },{
                                "lat":51.495625811469374,"lng":-0.17642498016357422,"title":"Natural History Museum","body":"Cromwell Road, London, SW7"                    
                            },{
                                "lat":51.50177053585362,"lng":-0.12908935546875,"title":"Churchill Museum"                  
                            }
                        ]}
                    });
                }));
    }); 
```

这个回调应该有你的代码，所以它在 bMap 和 googleMaps 都加载后运行，这是因为 ajax 是异步的，所以它向 google 请求脚本，然后应用程序继续。

# wix - Wix TextStyle 到文本的一部分

> ID：12918813
> 
> 赞同：3
> 
> 时间：2012-10-16T16:00:36.753
> 
> 标签：wix, windows-installer

我正在创建一个 MSI 包，我需要将 CheckBox 控件的文本设置为“*这是我的**粗体**部分*”。

我尝试了类似的东西：

```
this is my {\WixUI_Font_Bold}bold portion 
```

但它不起作用，有没有人知道是否可以在不必一个接一个地放置 2 个文本控件的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T20:12:58.073

当您将某些样式应用于显示的文本时，您可以通过在字符串前面加上样式标识符来做到这一点，它会更改控件整个文本的外观。显然，您不能单独使用 Checkbox 控件来实现这一点。

如果是关键要求，再引入 3 个 Text 控件，将第一个的文本设置为“this is my”，将第二个的文本设置为“{\WixUI_Font_Bold}bold”，将最后一个的文本设置为“portion”。将这些 Text 控件对齐到 Checkbox 前面的一行，并将 Checkbox 的 Text 属性置空。因此，Text 控件将模拟 Checkbox 的 Text 属性，并保持所需的格式。

老实说，这看起来很难看，尽管在技术上是可行的。如果你需要付出这么多的努力来完成这么一件小事，最好把这个想法扔掉，用开箱即用的东西生活。你永远不会让纯粹的 Windows Installer UI 看起来和感觉像一个丰富的 WPF 应用程序，所以没有理由假装你可以:)

# linux - Bash 重定向和标准输入

> ID：12918815
> 
> 赞同：2
> 
> 时间：2012-10-16T16:00:54.693
> 
> 标签：linux, bash

我希望这是一个大师的快速问题。我有以下命令，它在命令行中效果很好：

```
 src/protected/yiic shell src/index.php <<< createmvp < /dev/tty 
```

该命令执行 yiic bash 脚本并将参数 shell 和 src/index.php 传递给它。

第一个 <<< 将参数 createmvp 传递给终端提示符，该提示符在 yiic shell src/index.php 自己运行时显示。

第二个 < 然后允许将 std in 返回给应用程序。

但是，当我在 bash 脚本中运行它时

```
#!/bin/bash
src/protected/yiic shell src/index.php <<< createmvp < /dev/tty 
```

该脚本不会将 createmvp 传递到 shell 中。如果我删除传递 createmvp 的 < /dev/tty 位，但随后重新捕获终端显然不会。我似乎没有做任何事情。

```
while(!isset($input))
{
    $input = trim(fgets(STDIN));
    if(!$input)
        echo "$configVar can not be NULL";
} 
```

关于如何使这项工作像从命令行一样工作的任何想法？

提前致谢

艾伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T02:17:40.400

`(echo createmvp; cat /dev/tty) | src/protected/yiic shell src/index.php`

我认为原因`<<< createmvp < /dev/tty`不起作用是因为两者`<<<`都是`<`指定标准来源的方法，而您不能两者都做。`<<<`接受一个字符串作为参数并将其传递给标准输入，而`<`接受一个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:12:11.167

我认为你应该使用 eval：

```
#!/bin/bash
cmd="src/protected/yiic shell src/index.php <<< createmvp < /dev/tty"
eval $cmd 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-26T16:26:39.190

`yiic`要在处理`exit`命令本身后立即退出脚本，`trap`可以`yiic`对子 shell 使用 on exit：

```
# small addition to cpugeniusmv's answer
(echo createmvp; cat /dev/tty) | 
    (trap 'kill 0' EXIT; src/protected/yiic shell src/index.php) 
```

# java - 如何制作可以自动关闭的独立 Camel 应用程序？

> ID：12918820
> 
> 赞同：5
> 
> 时间：2012-10-16T16:01:12.370
> 
> 标签：java, apache-camel

我有一个作为独立 Java 应用程序运行的简单文件传输应用程序。它从 SFTP 端点获取文件并将它们移动到另一个端点。

文件在传输后会从 SFTP 端点中删除。**当没有更多文件时，最好让程序结束**。但是，我无法找到可以启动 Camel 并使其**有条件地结束的解决方案（例如，当 SFTP 端点中没有更多文件时）**。我目前的解决方法是启动 Camel，然后让主线程休眠很长时间。然后用户必须手动终止应用程序（通过 CTRL+C 或其他方式）。

有没有更好的方法让应用程序自动终止？

以下是我当前的代码：

在 CamelContext（Spring App 上下文）中：

```
<route>
    <from uri="sftp:(url)" />
    <process ref="(processor)" />
    <to uri="(endpoint)" />
</route> 
```

main() 方法：

```
public static void main(String[] args)
{
  ApplicationContext appContext = new ClassPathXmlApplicationContext("applicationContext.xml");
  CamelContext camelContext = appContext.getBean(CamelContext.class);

  try
  {
    camelContext.start();
    Thread.sleep(1000000000); // Runs the program for a long time -- is there a better way?
  }
  catch (Exception e)
  {
    e.printStackTrace();
  }

  UploadContentLogger.info("Exiting");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T17:39:56.090

你可以改变你的路线是这样的：

```
<route>
    <from uri="sftp:(url)?sendEmptyMessageWhenIdle=true" />
    <choose>
        <when>
            <simple>${body} != null</simple>
            <process ref="(processor)" />
            <to uri="(endpoint)" />
        </when>
        <otherwise>
            <process ref="(shutdownProcessor)" />
        </otherwise>
    </choose>
</route> 
```

注意使用`sendEmptyMessageWhenIdle=true`

这是`shutdownProcessor`

```
public class ShutdownProcessor {
    public void stop(final Exchange exchange) {
        new Thread() {
            @Override
            public void run() {
                try {
                    exchange.getContext().stop();
                } catch (Exception e) {
                    // log error
                }
            }
        }.start();
    }
} 
```

实际上我没有运行这段代码，但它应该可以按需要工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:53:26.647

我只是想向您指出这个常见问题解答 [http://camel.apache.org/how-can-i-stop-a-route-from-a-route.html](http://camel.apache.org/how-can-i-stop-a-route-from-a-route.html)

# javascript - 没有 jquery 或插件的 javascript 文本框日期掩码

> ID：12918821
> 
> 赞同：0
> 
> 时间：2012-10-16T16:01:15.323
> 
> 标签：javascript

我正在为 javascript 寻找一个简单的文本框日期掩码“mm/dd/yy”函数。我不需要它依赖于 jquery 或任何其他类型的插件。

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:08:42.180

```
function validateDate(date) { 
    var re = /^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.](\d\d)$/;
    return re.test(date);
} 
```

# c# - 如何使用 ACE OLEDB 提供程序在 64 位操作系统中读取 Excel 文件？

> ID：12918822
> 
> 赞同：1
> 
> 时间：2012-10-16T16:01:14.740
> 
> 标签：c#, excel, 64-bit, aceoledb

我有 ac# 应用程序已移至 64 位机器。此应用程序读入 Excel 文件以获取一些数据输入。我想将此项目构建为 64 位。有什么办法可以让我的程序读入这个文件？我很难相信没有办法使用 Excel 文件作为 64 位应用程序的输入。我已经安装了 Office 2010 64 位以及 2010 Office System Driver Beta：数据连接组件，但没有成功。我确定我只是错过了一些非常简单的东西。我的应用程序与 .xls 和 .xlsx 文件的 32 位环境完美配合。对于 64 位，它仅适用于 .xls 而不适用于 .xlsx。以下代码抛出不支持指定方法的异常（当我尝试在 64 位环境中打开与 xlsx 的连接时。）。

例外：

```
<Exception>
  <Description>An exception of type 'System.NotSupportedException' occurred and was caught.</Description>
  <DateTime>2012-10-12 17:53:53Z</DateTime>
  <ExceptionType>System.NotSupportedException, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
  <Message>Specified method is not supported.</Message>
  <Source>ExcelHelper</Source>
  <HelpLink />
  <Property name="Data">System.Collections.ListDictionaryInternal</Property>
  <Property name="TargetSite">System.Data.OleDb.OleDbConnection GetConnection(System.String)</Property>
  <StackTrace>   at ExcelOperations.ExcelHelper.GetConnection(String excelFile)
   at ExcelOperations.ExcelHelper.GetExcelSheetDataSet(String excelFile, String sheetName)
   at ExcelOperations.ExcelHelper.GetXLSXDataSet(String dataFilePath, String sheetName, Int64 rowNo)
   at Intralinks.Platform.ObjectImpl.DataSource.ExcelFileSource.UpdateDataFilePath(String dataFilePath)</StackTrace>
  <additionalInfo>
    <info name="MachineName" value="NYCVMQCA007" />
    <info name="TimeStamp" value="10/12/2012 9:53:53 PM" />
    <info name="FullName" value="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling, Version=2.0.0.0, Culture=neutral, PublicKeyToken=null" />
    <info name="AppDomainName" value="ILPlatform.exe" />
    <info name="ThreadIdentity" value="" />
    <info name="WindowsIdentity" value="INTRALINKS\VPatel" />
  </additionalInfo>
</Exception>
Category: Logging Exception
Priority: 1
EventId: 100
Severity: Error
Title:Enterprise Library Exception Handling
Machine: NYCVMQCA007
Application Domain: ILPlatform.exe
Process Id: 3548
Process Name: C:\IntraLinks\IntraLinks Designer\ILPlatform.exe
Win32 Thread Id: 5360
Thread Name: 
```

代码片段：

```
 public static OleDbConnection GetConnection(string excelFile)
    {
        OleDbConnection objConn = null;
        try
        {
            // Connection String. Change the excel file to the file you
            // will search.
            String connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + excelFile + ";Extended Properties=\"Excel 12.0 xml;IMEX=1\"";
            // Create connection object by using the preceding connection string.
            objConn = new OleDbConnection(connString);
            // Open connection with the database.
            objConn.Open();
        }
        catch (Exception)
        {
            try
            {
                // Connection String. Change the excel file to the file you
                // will search.
                String connString = "Provider=Microsoft.Jet.OLEDB.4.0;" +
                      "Data Source=" + excelFile + ";Extended Properties=Excel 8.0;";
                // Create connection object by using the preceding connection string.
                objConn = new OleDbConnection(connString);
                // Open connection with the database.
                objConn.Open();
            }
            catch (Exception)
            {
                throw new NotSupportedException(); 
            }
        }
        return objConn;
    } 
```

# guice - Guice ThrowingProvider 接口

> ID：12918832
> 
> 赞同：0
> 
> 时间：2012-10-16T16:01:50.277
> 
> 标签：guice, provider, throw

我对 guice 扩展没有太多经验。我会很感激一些指导。有人可以给我一个示例，说明如何为接口而不是具体类实现抛出提供程序。

例如 javax.mail.Session。如何将代码转换为投掷提供程序？

```
public class MailSessionProvider implements Provider<Session> {

  @Inject
  @Named("mailSession")
  private static String snName;

  @Override
  public Session get() {
     Session session = null;
     try {
        Context ctx = new InitialContext();
        return (Session) ctx.lookup(snName);
     } catch (NamingException e) {

     }
     return session;
  } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:29:00.773

从 Guice-3.0 开始，您必须像这样使用 CheckedProvider：

```
public class MailSessionThrowingProvider implements CheckedProvider<Session> {

@Inject
@Named("mailSession")
private static String snName;

@Override
public Session get() throws NamingException {
    final Context ctx = new InitialContext();
    return (Session) ctx.lookup(snName);
}
} 
```

# javascript - 同步 javascript 调用

> ID：12918842
> 
> 赞同：1
> 
> 时间：2012-10-16T16:02:12.433
> 
> 标签：javascript, jquery, html

加载我正在处理的 html 页面的一部分（使用 JQuery）涉及实例化几个 javascript 对象，每个对象都向页面添加图像。对象构造函数等待图像加载使用`$(window).load()`获取它们的尺寸，并根据 cookie 值进行缩放。

页面加载后（再次使用`$(window).load()`），主页面使用`.hide()`;隐藏大部分图像。它们稍后会再次出现。

我遇到的问题是主页在 JS 对象可以获取它们的尺寸之前隐藏了图像。我需要主页等待所有对象在隐藏图像之前完成图像处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:17:51.947

不要将图像添加到页面并在加载后隐藏它们。

加载它们，测量它们的大小（参见[jQuery：如何获取外部图像的尺寸？](https://stackoverflow.com/q/10338613/1048572)，[图像加载时的 jQuery 回调（即使图像被缓存）](https://stackoverflow.com/q/3877027/1048572)）并在需要时将它们添加到 DOM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:24:45.017

扩展@Bergi的回答：

通常所做的是将图像元素渲染到您想要它们的位置，但将它们替换`src`为其他一些 1 像素虚拟图像并将真实源保存在其他地方（例如，在数据属性上）：

```
<img src="/img/dummy.png" data-original-src="/img/path/to/real-image.png"> 
```

然后，一旦页面准备就绪（在它完全加载之前；使用 jQuery.ready），找到所有这些图像并使用原始源创建相应的外部图像。

对于每个这样的外部图像，一旦它被加载（使用 jQuery 的[图像加载回调](https://stackoverflow.com/q/3877027/1048572)），你可以[测量它](https://stackoverflow.com/questions/10338613/jquery-how-to-get-the-dimensions-of-a-external-image)和任何你想要的大小，然后最后`src`用它的真实源替换原始图像，这将是即时的，因为浏览器已经加载此图片网址：

```
$('img').each(function() {
   var originalImg = $(this);
   var externalImg = $('<img>').attr('src', originalImg.data('original-src'));
   externalImg.load(function() { 
        // measure, scale, center, and pre-process as you wish
        originalImg.attr('src', externalImg.attr('src'));
        originalImg.data('original-src', null);
   }); // you'll also have to use .complete() here, see links for details
} 
```

这导致图像在完全加载之前不会显示，并且您有机会缩放（或居中，或以其他方式预处理）它们。

# javascript - 圆圈应该相互碰撞，不起作用

> ID：12918846
> 
> 赞同：1
> 
> 时间：2012-10-16T16:02:24.723
> 
> 标签：javascript, canvas, geometry, square-root

我有一个大圆圈和大约 30 个在大圆圈内的小气泡。小气泡不能走出大圆圈，当一个小气泡与另一个小气泡相遇时，它们会偏向相反的方向。

这是两个小圆圈偏转的代码：

```
var xVelocityBubble1 = Math.random();
var yVelocityBubble1 = Math.random();

var xVelocityBubble2 = Math.random();
var yVelocityBubble2 = Math.random();

moveBubbles = function() {
xbubble1 += xVelocityBubble1;
ybubble1 += yVelocityBubble1;

xbubble2 -= xVelocityBubble2;
xbubble2 -= yVelocityBubble2;

if (Math.sqrt(Math.pow(xbubble1 - xbubble2, 2) + Math.pow(ybubble1 - ybubble2, 2)) < radius * 2) {
xVelocityBubble1 *= -1;
yVelocityBubble1 *= -1;
xVelocityBubble2 *= -1;
yVelocityBubble2 *= -1;
}
} 
```

![大圆圈内的气泡](../Images/c44a7d0038204c285af9f8fda3e743b0.png)

现在，问题来了。正如你在这张照片上看到的，有时我的气泡会碰撞，我不知道为什么。一切正常，直到一个圈子崩溃，然后突然越来越多的气泡陷入战争。看看圆圈 375、240,330 和 410。首先我认为这可能与不同的速度有关，但这不是问题所在。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:19:56.453

您的代码假定圆圈发生碰撞是因为它们正朝着彼此直线移动，因此碰撞的反应是两个圆圈都朝着完全相反的方向移动。

对于朝几乎相同方向移动的圆圈相遇，这种反应会很奇怪。您应该计算圆相交的角度，并据此计算它们交换的动量以及对每个圆的影响。

这可能是因为这种不稳定的反应加上圆圈在一轮计算中发生不止一次碰撞，使它们相互移动。当一个圆在任何碰撞中旋转 180 度时，这意味着如果它碰撞两次（或任何偶数次），它将继续前进，就好像什么都没发生一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:10:53.757

```
var xVelocityBubble1 = Math.random();
var yVelocityBubble1 = Math.random();

var xVelocityBubble2 = Math.random();
var yVelocityBubble2 = Math.random();

moveBubbles = function() {
xbubble1 += xVelocityBubble1;
ybubble1 += yVelocityBubble1;

xbubble2 -= xVelocityBubble2;
xbubble2 -= yVelocityBubble2;

if (Math.sqrt(Math.pow(xbubble1 - xbubble2, 2) + Math.pow(ybubble1 - ybubble2, 2)) < radius * 2) {
xbubble1 -= xVelocityBubble1;
ybubble1 -= yVelocityBubble1;
xbubble2 += xVelocityBubble2;
xbubble2 += yVelocityBubble2;

xVelocityBubble1 *= -1;
yVelocityBubble1 *= -1;
xVelocityBubble2 *= -1;
yVelocityBubble2 *= -1;
}
} 
```

您需要撤消导致碰撞的操作，因为这会使气泡处于一种非法状态

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:08:17.580

在我看来，一个半径进入另一个半径，您检测到碰撞，但是在您到达半径之外之前，您再次检测到碰撞并且方向再次以错误的方式反转。一旦一个圆圈在另一个圆圈内，这将导致两个圆圈永远振动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T16:10:11.517

我认为您需要检查碰撞，当检测到碰撞时，将气泡从碰撞的物体上移开，以免重叠。现在您确实检查了碰撞，但同时允许它们重叠，直到反向速度可以解决这种情况。永远不应该有重叠。

# c++ - NVCC 对“名称”的未定义引用

> ID：12918861
> 
> 赞同：0
> 
> 时间：2012-10-16T16:03:47.070
> 
> 标签：c++, gcc, cuda, nvcc

我正在尝试以非标准方式编译 gpgmg CUDA 模拟，因为我没有对尝试运行它的机器的 root 访问权限。

该模拟广泛使用了 HDF5 库 (http://www.hdfgroup.org/HDF5/)。当我在没有 root 访问权限的机器上运行它时，我无法安装 HDF5。因此，我下载了这些文件并将它们保存在一个`include`目录中。我通过以下命令使用 NVCC 进行编译（是的，我知道这应该是 makefile 格式）。

```
nvcc main.cpp CAnnihilationProblem.cpp CCompartment.cpp CDiffusionModel.cpp CFirstOrderReaction.cpp CFisherProblem.cpp CLocalizedAnnihilationProblem.cpp CModel.cpp CReaction.cpp CReactionProblem.cpp CSecondOrderReaction.cpp CSemiInfiniteSlabProblem.cpp CSimpleDiffusionProblem.cpp CSimpleInhomogeneousDiffusionProblem.cpp CSimpleLocalizedFirstOrderReaction.cpp CSimpleLocalizedSecondOrderReaction.cpp CSimpleLocalizedZerothOrderReaction.cpp CZeroOrderReaction.cpp -lgsl -I ../include 
```

这编译得很好（如果我只使用 -c 标志），但是当我链接它时，我得到以下错误：

```
/usr/lib64/gcc/x86_64-suse-linux/4.3/../../../../lib64/crt1.o: In function `_start':
/usr/src/packages/BUILD/glibc-2.11.1/csu/../sysdeps/x86_64/elf/start.S:109: undefined reference to `main'
/tmp/tmpxft_0000061e_00000000-2_CCompartment.o: In function `gpgmp::CCompartment::saveHdf5(int)':
CCompartment.cpp:(.text+0xbb): undefined reference to `H5Screate_simple'
CCompartment.cpp:(.text+0xc3): undefined reference to `H5open'
CCompartment.cpp:(.text+0xc9): undefined reference to `H5T_NATIVE_INT_g'
CCompartment.cpp:(.text+0x106): undefined reference to `H5Dcreate2'
CCompartment.cpp:(.text+0x13f): undefined reference to `H5open'
CCompartment.cpp:(.text+0x145): undefined reference to `H5T_NATIVE_INT_g'
CCompartment.cpp:(.text+0x164): undefined reference to `H5Dwrite'
CCompartment.cpp:(.text+0x16f): undefined reference to `H5Dclose'
CCompartment.cpp:(.text+0x17a): undefined reference to `H5Sclose'
/tmp/tmpxft_0000061e_00000000-3_CDiffusionModel.o: In function `gpgmp::CDiffusionModel::closeOutputFile(gpgmp::DiffusionModelRuntimeInformation const*)':
CDiffusionModel.cpp:(.text+0x336): undefined reference to `H5Gclose'
CDiffusionModel.cpp:(.text+0x364): undefined reference to `H5Fclose'
/tmp/tmpxft_0000061e_00000000-3_CDiffusionModel.o: In function `gpgmp::CDiffusionModel::prepareOutputFile(gpgmp::DiffusionModelRuntimeInformation*)':
CDiffusionModel.cpp:(.text+0x4bc): undefined reference to `H5check_version'
CDiffusionModel.cpp:(.text+0x4e7): undefined reference to `H5Fopen'
CDiffusionModel.cpp:(.text+0x646): undefined reference to `H5Gcreate2'
CDiffusionModel.cpp:(.text+0x6e8): undefined reference to `H5Gclose'
CDiffusionModel.cpp:(.text+0x719): undefined reference to `H5Fclose'
/tmp/tmpxft_0000061e_00000000-3_CDiffusionModel.o: In function `gpgmp::CDiffusionModel::createOutputFile(gpgmp::DiffusionModelRuntimeInformation*)':
CDiffusionModel.cpp:(.text+0x8f3): undefined reference to `H5check_version'
CDiffusionModel.cpp:(.text+0x923): undefined reference to `H5Fcreate'
CDiffusionModel.cpp:(.text+0x99d): undefined reference to `H5Gcreate2'
CDiffusionModel.cpp:(.text+0x9bb): undefined reference to `H5Screate_simple'
CDiffusionModel.cpp:(.text+0x9c3): undefined reference to `H5open'
CDiffusionModel.cpp:(.text+0x9c9): undefined reference to `H5T_NATIVE_INT_g'
CDiffusionModel.cpp:(.text+0x9ec): undefined reference to `H5Dcreate2'
CDiffusionModel.cpp:(.text+0xa06): undefined reference to `H5open'
CDiffusionModel.cpp:(.text+0xa0c): undefined reference to `H5T_NATIVE_INT_g'
CDiffusionModel.cpp:(.text+0xa2b): undefined reference to `H5Dwrite'
CDiffusionModel.cpp:(.text+0xa36): undefined reference to `H5Dclose'
CDiffusionModel.cpp:(.text+0xa41): undefined reference to `H5Sclose'
CDiffusionModel.cpp:(.text+0xad0): undefined reference to `H5open'
CDiffusionModel.cpp:(.text+0xad6): undefined reference to `H5T_C_S1_g'
CDiffusionModel.cpp:(.text+0xadb): undefined reference to `H5Tcopy'
CDiffusionModel.cpp:(.text+0xaed): undefined reference to `H5Tset_size'
CDiffusionModel.cpp:(.text+0xb03): undefined reference to `H5Screate_simple'
CDiffusionModel.cpp:(.text+0xb2c): undefined reference to `H5Dcreate2'
CDiffusionModel.cpp:(.text+0xb51): undefined reference to `H5Dwrite'
CDiffusionModel.cpp:(.text+0xb5c): undefined reference to `H5Dclose'
CDiffusionModel.cpp:(.text+0xb67): undefined reference to `H5Sclose'
CDiffusionModel.cpp:(.text+0xb8e): undefined reference to `H5Screate_simple'
CDiffusionModel.cpp:(.text+0xb96): undefined reference to `H5open'
CDiffusionModel.cpp:(.text+0xb9c): undefined reference to `H5T_NATIVE_INT_g'
CDiffusionModel.cpp:(.text+0xbbf): undefined reference to `H5Dcreate2'
CDiffusionModel.cpp:(.text+0xbd9): undefined reference to `H5open'
CDiffusionModel.cpp:(.text+0xbdf): undefined reference to `H5T_NATIVE_INT_g'
CDiffusionModel.cpp:(.text+0xbfe): undefined reference to `H5Dwrite'
CDiffusionModel.cpp:(.text+0xc09): undefined reference to `H5Dclose'
CDiffusionModel.cpp:(.text+0xc14): undefined reference to `H5Sclose'
CDiffusionModel.cpp:(.text+0xc34): undefined reference to `H5Gcreate2'
CDiffusionModel.cpp:(.text+0xcb4): undefined reference to `H5Gclose'
CDiffusionModel.cpp:(.text+0xcbf): undefined reference to `H5Gclose'
/tmp/tmpxft_0000061e_00000000-3_CDiffusionModel.o: In function `gpgmp::CDiffusionModel::openOutputFile(gpgmp::DiffusionModelRuntimeInformation*)':
CDiffusionModel.cpp:(.text+0xe1d): undefined reference to `H5check_version'
CDiffusionModel.cpp:(.text+0xe48): undefined reference to `H5Fopen'
CDiffusionModel.cpp:(.text+0xf9c): undefined reference to `H5Gopen2'
/tmp/tmpxft_0000061e_00000000-3_CDiffusionModel.o: In function `gpgmp::CDiffusionModel::writeAllSpecies(float, gpgmp::DiffusionModelRuntimeInformation*)':
CDiffusionModel.cpp:(.text+0x141b): undefined reference to `H5Gcreate2'
CDiffusionModel.cpp:(.text+0x147f): undefined reference to `H5Screate_simple'
CDiffusionModel.cpp:(.text+0x1487): undefined reference to `H5open'
CDiffusionModel.cpp:(.text+0x148d): undefined reference to `H5T_NATIVE_FLOAT_g'
CDiffusionModel.cpp:(.text+0x14b0): undefined reference to `H5Dcreate2'
CDiffusionModel.cpp:(.text+0x14b8): undefined reference to `H5open'
CDiffusionModel.cpp:(.text+0x14be): undefined reference to `H5T_NATIVE_FLOAT_g'
CDiffusionModel.cpp:(.text+0x14e0): undefined reference to `H5Dwrite'
CDiffusionModel.cpp:(.text+0x14eb): undefined reference to `H5Dclose'
CDiffusionModel.cpp:(.text+0x14f6): undefined reference to `H5Sclose'
CDiffusionModel.cpp:(.text+0x15c6): undefined reference to `H5Screate_simple'
CDiffusionModel.cpp:(.text+0x15ce): undefined reference to `H5open'
CDiffusionModel.cpp:(.text+0x15d4): undefined reference to `H5T_NATIVE_INT_g'
CDiffusionModel.cpp:(.text+0x161e): undefined reference to `H5Dcreate2'
CDiffusionModel.cpp:(.text+0x165e): undefined reference to `H5open'
CDiffusionModel.cpp:(.text+0x1664): undefined reference to `H5T_NATIVE_INT_g'
CDiffusionModel.cpp:(.text+0x1683): undefined reference to `H5Dwrite'
CDiffusionModel.cpp:(.text+0x168e): undefined reference to `H5Dclose'
CDiffusionModel.cpp:(.text+0x1699): undefined reference to `H5Sclose'
CDiffusionModel.cpp:(.text+0x16bb): undefined reference to `H5Gclose'
/tmp/tmpxft_0000061e_00000000-3_CDiffusionModel.o: In function `gpgmp::CDiffusionModel::runSomeGmps(void*)':
CDiffusionModel.cpp:(.text+0x17ff): undefined reference to `chooseDevice(int)'
CDiffusionModel.cpp:(.text+0x1883): undefined reference to `gpgmp::CDiffusionModel::cudaRunGMPInhomogeneous(gpgmp::DiffusionModelRuntimeInformation*)'
CDiffusionModel.cpp:(.text+0x1892): undefined reference to `gpgmp::CDiffusionModel::cudaRunGMP(gpgmp::DiffusionModelRuntimeInformation*)'
/tmp/tmpxft_0000061e_00000000-3_CDiffusionModel.o: In function `gpgmp::CDiffusionModel::runMultipleGmps(int, int, float, float, float, int, bool, void*)':
CDiffusionModel.cpp:(.text+0x2b4d): undefined reference to `queryCudaDevices()'
/tmp/tmpxft_0000061e_00000000-7_CModel.o: In function `gpgmp::CModel::gillespie(int, bool)':
CModel.cpp:(.text+0x8d9): undefined reference to `gpgmp::cudaRunGillespie(float*, int*, float*, float*, gpgmp::RateLaw*, int, int, int)'
collect2: ld returned 1 exit status 
```

我的第一个想法是`main()`没有定义，但它是。这是main.cpp：

```
#include "CModel.h"
#include "CDiffusionModel.h"
#include "CAnnihilationProblem.h"
#include "CSemiInfiniteSlabProblem.h"
#include "CSimpleDiffusionProblem.h"
#include "CSimpleInhomogeneousDiffusionProblem.h"
#include "CLocalizedAnnihilationProblem.h"
#include "CFisherProblem.h"
#include "CReactionProblem.h"
#include "definitions.h"
#include "CSecondOrderReaction.h"

#include <getopt.h>
#include <cstdio>
#include <iostream>

using namespace std;

int chooseCudaDevice(int device);

int main(int argc, char **argv) {

    // parameters
    int dx=32, dy=32;
    int numRuns=10;
    int numSteps=500000;
    float time=100.;
    REAL length=40.;

    //opterr = 0;
    int c;

    int numCudaDevices=-1;
    int problem=0;
    float p0 = 0.1;
    float dt = 0.1;

    gpgmp::OutputFormat outputFormat = gpgmp::OUTPUT_HDF5;

    while ((c = getopt (argc, argv, "x:y:t:l:n:r:d:p:w:o:f:")) != -1)
        switch (c)
        {
        case 'x':
            dx = atoi(optarg);
            break;
        case 'y':
            dy = atoi(optarg);
            break;
        case 't':
            time = atof(optarg);
            break;
        case 'l':
            length = atof(optarg);
            break;
        case 'n':
            numSteps = atoi(optarg);
            break;
        case 'r':
            numRuns = atoi(optarg);
            break;
        case 'd':
            // number of devices to run on
            numCudaDevices = atoi(optarg);
            break;
        case 'p':
            problem = atoi(optarg);
            break;
        case 'o':
            dt = atof(optarg);
            break;
        case 'w':
            p0 = atof(optarg);
            break;
        case 'f':
            switch(atoi(optarg)) {
            case 0:
                cout <<"Setting output format to ASCII.\n";
                outputFormat = gpgmp::OUTPUT_ASCII;
                break;
            case 1:
                cout <<"Setting output format to HDF5.\n";
                outputFormat = gpgmp::OUTPUT_HDF5;
                break;
            }
            break;
            case '?':
                if (optopt == 'x' || optopt =='y' || optopt == 't'
                        || optopt =='l' || optopt == 'n' || optopt=='r' || optopt=='d'
                                || optopt=='p' || optopt == 'w')
                    fprintf (stderr, "Option -%c requires an argument.\n", optopt);
                else if (isprint (optopt))
                    fprintf (stderr, "Unknown option `-%c'.\n", optopt);
                else
                    fprintf (stderr,
                            "Unknown option character `\\x%x'.\n",
                            optopt);
                return 1;
            default:
                abort ();
        }

    int index=optind;

    cout <<"Welcome to gmp.\n";
    cout <<"System dimensions: length="<<length
            <<", dx="<<dx<<", dy="<<dy<<"\n";
    cout <<"Runtime configuration: time="<<time
            <<", number of Runs="<<numRuns
            <<", number of Steps="<<numSteps
            <<", output dt="<<dt
            <<", problem nr="<<problem
            <<"\n";

    if (problem == 0) {
        // A plus B reaction model
        float diffusionConstant;
        float k1;
        float k2;
        float k3;
        float k4;
        if (index == argc-5) {
            diffusionConstant=atof(argv[index++]);
            k1=atof(argv[index++]);
            k2=atof(argv[index++]);
            k3=atof(argv[index++]);
            k4=atof(argv[index++]);
        } else if (index==argc) {
            cout <<"No parameters given, using default.\n";
            length=100.;
            dx=128;
            dy=128;
            p0=0.1;
            time=500.;
            k1=1e-3;
            k2=1e-2;
            k3=1.2;
            k4=1.;
            diffusionConstant=0.;
        } else {
            cout <<"Mismatching parameters. Usage:\n";
            cout <<"gpgmp -p 3 [diffusionConstant k1 k2 k3 k4].\n";
            exit(1);
        }
        cout <<"Setting up A plus B reaction problem with diffusion Constant :"
                <<diffusionConstant<<"\n";
        cout <<"k1 = "<<k1<<", k2 = "<<k2<<", k3 = "<<k3<<", k4 = "<<k4<<"\n";
        gpgmp::CReactionProblem reaction(length, dx, dy, diffusionConstant, k1, k2, k3, k4);
        reaction.setOutputFormat(outputFormat);
        reaction.runMultipleGmps(numRuns, numSteps, time, p0, dt);
    } else if (problem == 1) {
        // FISHER PROBLEM
        float baseConcentration = atof(argv[index++]);
        cout <<"Setting up Fisher Problem with concentration "<<baseConcentration<<".\n";

        gpgmp::CFisherProblem fisher(length, dx, dy, baseConcentration);
        fisher.setOutputFormat(gpgmp::OUTPUT_HDF5);
        fisher.runMultipleGmps(numRuns, numSteps, time, p0, dt);
    } else if (problem == 2) {
        // SIMPLE DIFFUSION
        float diffusionConstant;
        int numMolecules;

        if (index == argc-2) {
            diffusionConstant=atof(argv[index++]);
            numMolecules = atoi(argv[index++]);
        } else if (index==argc) {
            cout <<"No parameters given, using default.\n";
            length=100.;
            dx=128;
            dy=128;
            p0=0.1;
            dt = 5.;
            time=20.;
            diffusionConstant=1.;
            numMolecules = 1e5;
        } else {
            cout <<"Mismatching parameters. Usage:\n";
            cout <<"gpgmp -p 2 [diffusionConstant numMolecules].\n";
            exit(1);
        }

        cout <<"Setting up simple diffusion problem with diffusion Constant :"<<diffusionConstant
                <<", nMol:"<<numMolecules<<" \n";

        gpgmp::CSimpleDiffusionProblem diffusion(
                length, dx, dy, diffusionConstant, numMolecules);
        diffusion.setOutputFormat(gpgmp::OUTPUT_HDF5);
        diffusion.runMultipleGmps(numRuns, numSteps, time, p0, dt,numCudaDevices);
    } else if (problem ==3) {
        // LOCALIZED A+B ANNIHILATION
        cout <<"Setting up localized A plus B reaction problem.\n";
        float diffusionConstant;
        float k1, k2, k3, k4;
        float xminA, xmaxA,xminB, xmaxB;

        if (index == argc-9) {
            diffusionConstant=atof(argv[index++]);
            k1=atof(argv[index++]);
            k2=atof(argv[index++]);
            k3=atof(argv[index++]);
            k4=atof(argv[index++]);
            xminA=atof(argv[index++]);
            xmaxA=atof(argv[index++]);
            xminB=atof(argv[index++]);
            xmaxB=atof(argv[index++]);
        } else if (index==argc) {
            cout <<"No parameters given, using default.\n";
            length=1000.;
            dx=32;
            dy=32;
            p0=0.1;
            time=1800.;
            k1=9.4096e+09;
            k2=9.4096e+10;
            k3=1.27529e-13;
            k4=1.06274e-13;
            diffusionConstant=100.;
            xminA = 0.;
            xmaxA = 900.;
            xminB = 400.;
            xmaxB = 1000.;
        } else {
            cout <<"Mismatching parameters. Usage:\n";
            cout <<"gpgmp -p 3 [diffusionConstant k1 k2 k3 k4 xminA xmaxA xminB xmaxB].\n";
            exit(1);
        }
        cout <<"Parameters : diffusion Constant :"<<diffusionConstant<<"\n";
        cout <<"k1 = "<<k1<<", k2 = "<<k2<<", k3 = "<<k3<<", k4 = "<<k4<<"\n";
        cout <<"xminA = "<<xminA<<", xmaxA = "<<xmaxA<<", xminB = "<<xminB<<", xmaxB = "<<xmaxB<<"\n";

        gpgmp::CLocalizedAnnihilationProblem problem(length, dx, dy,
                diffusionConstant, k1, k2, k3, k4,
                xminA, xmaxA, xminB, xmaxB);
        problem.runMultipleGmps(numRuns, numSteps, time, p0, dt);
    } else if (problem == 4) {
        // SEMI-INFINITE SLAB problem
        cout <<"Setting up semi-infinite slab problem.\n";
        float diffusionConstant;
        float sourceNumber;

        if (index == argc-2) {
            diffusionConstant=atof(argv[index++]);
            sourceNumber=atof(argv[index++]);
        } else if (index==argc) {
            cout <<"No parameters given, using default.\n";
            length=40.;
            dx=64;
            dy=64;
            p0=0.1;
            time=1000;
            diffusionConstant=1.;
            sourceNumber = 10.;
            dt=500.;
        } else {
            cout <<"Mismatching parameters. Usage:\n";
            cout <<"gpgmp -p 4 [diffusionConstant sourceNumber].\n";
            exit(1);
        }
        cout <<"Setting up semi-infinite slab problem.\n";
        cout <<"Source number is:"<<sourceNumber<<", diffusion Constant:"
                <<diffusionConstant<<"\n";
        gpgmp::CSemiInfiniteSlabProblem
        slabModel(length, dx, dy, sourceNumber, diffusionConstant);
        slabModel.setOutputFormat(gpgmp::OUTPUT_HDF5);
        slabModel.runMultipleGmps(numRuns, numSteps, time, p0, dt);
    } else if (problem == 5) {
        // Sets up the A+B annihilation model
        REAL length = 12.8; // In micrometer
        REAL nx = 64; // Number of cells in each direction
        gpgmp::CDiffusionModel testModel(length, nx, nx);

        // add species to model
        REAL diffusivity = 1; // In micrometer^2 s^-1
        testModel.addDiffusionSpecies("A", diffusivity);
        testModel.addDiffusionSpecies("B", diffusivity);
        testModel.addDiffusionSpecies("C", diffusivity);

        // create "source" and "world" compartments
        gpgmp::CCompartment comp1("Source", 32, 32, 32, 32);
        gpgmp::CCompartment comp2("World",0, 0, 63, 63);

        // add species to compartment
        comp1.setInitialAmount("A", 1000, gpgmp::DIST_HOMOGENEOUS);
        comp2.setInitialAmount("B", 1000, gpgmp::DIST_RANDOM);

        // and add it to the main model
        testModel.addCompartment(0, comp1);
        testModel.addCompartment(1, comp2);

        // add the annihilation reaction
        // A+B -> C
        REAL reactionRate = 1e8; // Reaction rate in M^-1 s^-1

        // set the reaction products
        std::map<std::string, int> aplusbAnnihilationMap;
        aplusbAnnihilationMap["C"]=1;

        // and create the reaction
        gpgmp::CSecondOrderReaction *aplusbAnnihilation =
                new gpgmp::CSecondOrderReaction("A plus B annihilation",
                testModel.getSecondOrderReactionRate(reactionRate),
                "A", "B", aplusbAnnihilationMap);
        testModel.addReaction(aplusbAnnihilation);

        // set output format
        testModel.setOutputFormat(gpgmp::OUTPUT_HDF5);

        // run the GMP to test the output
        int nRuns = 100; // Number of runs
        int nSteps = 10000; // Max number of steps
        REAL simTime = 5.; // Max simulation time
        REAL p = 0.1; // Probability for a particle to stay
        REAL dumpTime = 1.; // Interval of output dumps
        testModel.runMultipleGmps(nRuns, nSteps, simTime, p, dumpTime);

    } else if (problem==6) {
        // 2D A+B annihilation problem
        std::cout <<"Setting up 2D annihilation problem.";

        // default parameters
        REAL diffusionConstant = 1.;
        REAL rate;
        int numMolecules;

        // check if more parameters are given - if not take defaults
        if (index == argc-3) {
            diffusionConstant=atof(argv[index++]);
            rate=atof(argv[index++]);
            numMolecules = atoi(argv[index++]);
        } else if (index == argc) {
            // use defaults
            cout <<"No parameters given ... using defaults.\n";
            length=12.8;
            dx=64;
            dy=64;
            p0=0.1;
            time=4.;
            rate = 1e8;
            numMolecules = 100000.;
        } else {
            cout <<"Mismatching parameters. Usage:\n";
            cout <<"gpgmp -p 6 diffusionConstant rate numMolecules.\n";
            exit(1);
        }
        std::cout <<"Annihilation rate is:"<<rate<<", diffusion Constant:"
                <<diffusionConstant<<", number of Molecules:"
                <<numMolecules<<".\n";

        gpgmp::CAnnihilationProblem model(length, dx, dy, numMolecules,
                diffusionConstant, rate);
        model.setOutputFormat(outputFormat);
        model.runMultipleGmps(numRuns, numSteps, time, p0, dt,numCudaDevices);
    } else if (problem == 7) {
        // SIMPLE INHOMOGENEOUS DIFFUSION
        float diffusionConstant=atof(argv[index++]);
        int numMolecules = atoi(argv[index++]);
        int testModel = atoi(argv[index++]);

        gpgmp::InhomogeneousDiffusionParameters kernelParams;

        // set dimensionality
        kernelParams.dimensionality = 1;

        cout <<"Setting up simple inhomogeneous diffusion problem with diffusion Constant :"
                <<diffusionConstant <<", nMol:"<<numMolecules<<".\n";
        cout <<"Test model is ";
        REAL u0, a;

        gpgmp::CSimpleInhomogeneousDiffusionProblem *diffusion;

        switch (testModel) {
        case 0:
            cout <<"constant diffusivity.\n";
            kernelParams.diffusionType =
                    gpgmp::InhomogeneousDiffusionParameters::DT_HOMOGENEOUS;
            diffusion = new gpgmp::CSimpleInhomogeneousDiffusionProblem(
                    length, dx, dy, diffusionConstant, numMolecules, true);
            break;
        case 1:
            u0 = atof(argv[index++]);
            cout <<"population pressure model with u0="<<u0<<".\n";
            kernelParams.diffusionType =
                    gpgmp::InhomogeneousDiffusionParameters::DT_LOCAL_AVERAGE;
            kernelParams.testModelType =
                    gpgmp::InhomogeneousDiffusionParameters::TM_POPULATION_PRESSURE;
            kernelParams.u0 = u0;
            diffusion = new gpgmp::CSimpleInhomogeneousDiffusionProblem(
                    length, dx, dy, diffusionConstant, numMolecules, false);
            break;
        case 2:
            a = atof(argv[index++]);
            cout <<"contact inhibition model with A="<<a<<".\n";
            kernelParams.diffusionType =
                    gpgmp::InhomogeneousDiffusionParameters::DT_LOCAL_AVERAGE;
            kernelParams.testModelType =
                    gpgmp::InhomogeneousDiffusionParameters::TM_CONTACT_INHIBITION;
            kernelParams.a = a;
            diffusion = new gpgmp::CSimpleInhomogeneousDiffusionProblem(
                    length, dx, dy, diffusionConstant, numMolecules, false);
            break;
        }

        diffusion->runMultipleGmps(numRuns, numSteps, time, p0, dt,numCudaDevices,
                true, (void *) &kernelParams);
    } else if (problem == 8) {
        // Slit Problem
        REAL length = 1200.;
        gpgmp::CDiffusionModel testModel(length, dx, dy);

        // create new Compartment
        gpgmp::CCompartment comp1("Explant", dx/2-1, dy/2-1, dx/2, dy/2);

        // add species to compartment
        comp1.setInitialAmount("Cells", 20398, gpgmp::DIST_HOMOGENEOUS);

        // and add it to the main model
        testModel.addCompartment(0, comp1);

        // add species
        testModel.addDiffusionSpecies("Cells", 0.56);

        // create the kernel parameters structure
        gpgmp::InhomogeneousDiffusionParameters kernelParams;
        kernelParams.dimensionality = 2;
        kernelParams.testModelType =
                gpgmp::InhomogeneousDiffusionParameters::TM_SLIT;
        // slit parameters
        kernelParams.lambda = 0.01;
        kernelParams.beta = 20;
        kernelParams.length = length;
        REAL subVolume = length/dx*length/dx;
        kernelParams.a = 0.02*subVolume;
        kernelParams.ta = 24.*3600.;
        kernelParams.xi = 1e4/3600.;

        // set diffusion type
        int diffType = atoi(argv[index++]);

        switch(diffType) {
        case 0:
            kernelParams.diffusionType =
                    gpgmp::InhomogeneousDiffusionParameters::DT_STRICTLY_LOCAL;
            break;
        case 1:
            kernelParams.diffusionType =
                    gpgmp::InhomogeneousDiffusionParameters::DT_LOCAL_AVERAGE;
            break;
        case 2:
            kernelParams.diffusionType =
                    gpgmp::InhomogeneousDiffusionParameters::DT_NEIGHBOUR_BASED;
            break;
        case 3:
            kernelParams.diffusionType =
                    gpgmp::InhomogeneousDiffusionParameters::DT_GRADIENT_BASED;
            break;
        }

        // run the GMP to test the output
        testModel.runMultipleGmps(numRuns, numSteps, time, p0, dt, numCudaDevices,
                true, (void *) &kernelParams);
    }
} 
```

由于这是同行评审的代码，我假设错误与我链接它的方式有关....

我怎样才能让它正确链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-25T07:00:00.523

您必须在代码中*显式*链接库依赖项。这里的错误是因为没有链接合适的HDF5库，导致依赖不满足。如果您将缺少的库安装在`../include`相对于工作目录的路径中，则如下所示：

```
nvcc -I ../include main.cpp CAnnihilationProblem.cpp CCompartment.cpp CDiffusionModel.cpp \
      CFirstOrderReaction.cpp CFisherProblem.cpp CLocalizedAnnihilationProblem.cpp \ 
      CModel.cpp CReaction.cpp CReactionProblem.cpp CSecondOrderReaction.cpp 
      CSemiInfiniteSlabProblem.cpp CSimpleDiffusionProblem.cpp \
      CSimpleInhomogeneousDiffusionProblem.cpp \
      CSimpleLocalizedFirstOrderReaction.cpp CSimpleLocalizedSecondOrderReaction.cpp  \
      CSimpleLocalizedZerothOrderReaction.cpp CZeroOrderReaction.cpp \
      -L../include -lgsl -lhdf5 
```

*应该*允许代码正确链接。

[这个答案是从社区 wiki 条目的评论中收集的，以将问题从未回答的列表中删除]。

# sql - 约束检查

> ID：12918874
> 
> 赞同：-2
> 
> 时间：2012-10-16T16:04:32.343
> 
> 标签：sql, constraints

我们正在尝试创建一个约束来决定一个等级是否应该是 F。如果一门课程没有完成，那么学生应该获得 F 级。否则，学生应该获得另一个成绩。

这是我们的约束

```
ALTER TABLE Registrerad_på ADD CONSTRAINT chk_avslutadkurs CHECK (CASE WHEN FinishedCourse 
= 'No' THEN Grade = 'F') 
```

Grade 是一个接受空值的 varchar(50) 列，FinishedCourse 是相同的，除了它不能包含空值并且此时它只包含“是”值。表 Registrerad_på 包含数据（int 和 varchar(50)）。

问题：Check 有什么问题，错误出现在 THEN 语句的最后一个“=”处。如果我需要添加更多信息，请告诉我，如果不清楚，抱歉。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:12:44.933

你的约束是

```
ALTER TABLE Registrerad_på 
ADD CONSTRAINT chk_avslutadkurs 
CHECK (CASE WHEN FinishedCourse = 'No' THEN Grade = 'F') 
```

CASE 语句（标准 SQL）的框架语法通常是

```
CASE WHEN ... THEN ... ELSE ... END 
```

所以你至少需要 END 关键字。

```
CHECK (CASE WHEN FinishedCourse = 'No' THEN Grade = 'F' END) 
```

但你*可能*真的需要更多这样的东西。

```
CHECK (CASE WHEN FinishedCourse = 'No' THEN Grade = 'F' 
            WHEN FinishedCourse = 'Yes' THEN Grade IN ('A','B','C','D','F')
            ELSE Grade = 'Somebody let some bad data into FinishedCourse'
       END) 
```

考虑在 FinishedCourse 上添加另一个约束。

```
CHECK (FinishedCourse IN ('Yes', 'No') ) 
```

# javascript - 当出现“网络错误 - uri 太大”错误时，可以使用哪些替代方法？

> ID：12918877
> 
> 赞同：1
> 
> 时间：2012-10-16T16:04:37.267
> 
> 标签：javascript, jquery, ajax, forms, uri

我有一个产品搜索，我将其发布到添加到购物车网络服务。

问题是，我正在可视化所有产品变化（比如颜色和尺寸）。我刚刚在数据库中遇到了一个项目，它有 10 种尺寸和 30 种颜色可供选择，结果是`network error, uri too large`，因为我的 AJAX 发布了这个：

```
"NetworkError: 414 Request-URI Too Large - http://www.page.de/test/services/form_cfc?form_submitted=add&s_artikelnummer=TSHIRT+2011+nos+ja&ean1=2011301051003&menge1=&ean2=2011301051004&menge2=&ean3=2011301051005&menge3=&ean4=2011301051006&menge4=&ean5=2011301051007&menge5=&ean6=2011301051008&menge6=&ean7=2011301051009&menge7=&ean8=2011301051010&menge8=&ean9=2011301051011&menge9=&ean10=2011301050903&menge10=&ean11=2011301050904&menge11=&ean12=2011301050905&menge12=&ean13=2011301050906&menge13=&ean14=2011301050907&menge14=&ean15=2011301050908&menge15=&ean16=2011301050909&menge16=&ean17=2011301050910&menge17=&ean18=2011301050911&menge18=&ean19=2011301050803&menge19=&ean20=2011301050804&menge20=&ean21=2011301050805&menge21=&ean22=2011301050806&menge22=&ean23=2011301050807&menge23=&ean24=2011301050808&menge24=&ean25=2011301050809&menge25=&ean26=2011301050810&menge26=&ean27=2011301050811&menge27=&ean28=2011301052103&menge28=&ean29=2011301052104&menge29=&ean30=2011301052105&menge30=&ean31=2011301052106&menge31=&ean32=2011301052107&menge32=&ean33=2011301052108&menge33=&ean34=2011301052109&menge34=&ean35=2011301052110&menge35=&ean36=2011301052111&menge36=&ean37=2011301052003&menge37=&ean38=2011301052004&menge38=&ean39=2011301052005&menge39=&ean40=2011301052006&menge40=&ean41=2011301052007&menge41=&ean42=2011301052008&menge42=&ean43=2011301052009&menge43=&ean44=2011301052010&menge44=&ean45=2011301052011&menge45=&ean46=2011301052203&menge46=&ean47=2011301052204&menge47=&ean48=2011301052205&menge48=&ean49=2011301052206&menge49=&ean50=2011301052207&menge50=&ean51=2011301052208&menge51=&ean52=2011301052209&menge52=&ean53=2011301052210&menge53=&ean54=2011301052211&menge54=&ean55=2011301052303&menge55=&ean56=2011301052304&menge56=&ean57=2011301052305&menge57=&ean58=2011301052306&menge58=&ean59=2011301052307&menge59=&ean60=2011301052308&menge60=&ean61=2011301052309&menge61=&ean62=2011301052310&menge62=&ean63=2011301052311&menge63=&ean64=2011301052903&menge64=&ean65=2011301052904&menge65=&ean66=2011301052905&menge66=&ean67=2011301052906&menge67=&ean68=2011301052907&menge68=&ean69=2011301052908&menge69=&ean70=2011301052909&menge70=&ean71=2011301052910&menge71=&ean72=2011301052911&menge72=&ean73=2011301052703&menge73=&ean74=2011301052704&menge74=&ean75=2011301052705&menge75=&ean76=2011301052706&menge76=&ean77=2011301052707&menge77=&ean78=2011301052708&menge78=&ean79=2011301052709&menge79=&ean80=2011301052710&menge80=&ean81=2011301052711&menge81=&ean82=2011301052603&menge82=&ean83=2011301052604&menge83=&ean84=2011301052605&menge84=&ean85=2011301052606&menge85=&ean86=2011301052607&menge86=&ean87=2011301052608&menge87=&ean88=2011301052609&menge88=&ean89=2011301052610&menge89=&ean90=2011301052611&menge90=&ean91=2011301052803&menge91=&ean92=2011301052804&menge92=&ean93=2011301052805&menge93=&ean94=2011301052806&menge94=&ean95=2011301052807&menge95=&ean96=2011301052808&menge96=&ean97=2011301052809&menge97=&ean98=2011301052810&menge98=&ean99=2011301052811&menge99=&ean100=2011301053003&menge100=&ean101=2011301053004&menge101=&ean102=2011301053005&menge102=&ean103=2011301053006&menge103=&ean104=2011301053007&menge104=&ean105=2011301053008&menge105=&ean106=2011301053009&menge106=&ean107=2011301053010&menge107=&ean108=2011301053011&menge108=&ean109=2011301051903&menge109=&ean110=2011301051904&menge110=&ean111=2011301051905&menge111=&ean112=2011301051906&menge112=&ean113=2011301051907&menge113=&ean114=2011301051908&menge114=&ean115=2011301051909&menge115=&ean116=2011301051910&menge116=&ean117=2011301051911&menge117=&ean118=2011301051803&menge118=&ean119=2011301051804&menge119=&ean120=2011301051805&menge120=&ean121=2011301051806&menge121=&ean122=2011301051807&menge122=&ean123=2011301051808&menge123=&ean124=2011301051809&menge124=&ean125=2011301051810&menge125=&ean126=2011301051811&menge126=&ean127=2011301051403&menge127=&ean128=2011301051404&menge128=&ean129=2011301051405&menge129=&ean130=2011301051406&menge130=&ean131=2011301051407&menge131=&ean132=2011301051408&menge132=&ean133=2011301051409&menge133=&ean134=2011301051410&menge134=&ean135=2011301051411&menge135=&ean136=2011301051703&menge136=&ean137=2011301051704&menge137=&ean138=2011301051705&menge138=&ean139=2011301051706&menge139=&ean140=2011301051707&menge140=&ean141=2011301051708&menge141=&ean142=2011301051709&menge142=&ean143=2011301051710&menge143=&ean144=2011301051711&menge144=&ean145=2011301051503&menge145=&ean146=2011301051504&menge146=&ean147=2011301051505&menge147=&ean148=2011301051506&menge148=&ean149=2011301051507&menge149=&ean150=2011301051508&menge150=&ean151=2011301051509&menge151=&ean152=2011301051510&menge152=&ean153=2011301051511&menge153=&ean154=2011301051603&menge154=&ean155=2011301051604&menge155=&ean156=2011301051605&menge156=&ean157=2011301051606&menge157=&ean158=2011301051607&menge158=&ean159=2011301051608&menge159=&ean160=2011301051609&menge160=&ean161=2011301051610&menge161=&ean162=2011301051611&menge162=&ean163=2011301050203&menge163=&ean164=2011301050204&menge164=&ean165=2011301050205&menge165=&ean166=2011301050206&menge166=&ean167=2011301050207&menge167=&ean168=2011301050208&menge168=&ean169=2011301050209&menge169=&ean170=2011301050210&menge170=&ean171=2011301050211&menge171=&ean172=2011301050103&menge172=&ean173=2011301050104&menge173=&ean174=2011301050105&menge174=&ean175=2011301050106&menge175=&ean176=2011301050107&menge176=&ean177=2011301050108&menge177=&ean178=2011301050109&menge178=&ean179=2011301050110&menge179=&ean180=2011301050111&menge180=&ean181=2011301050603&menge181=&ean182=2011301050604&menge182=&ean183=2011301050605&menge183=&ean184=2011301050606&menge184=&ean185=2011301050607&menge185=&ean186=2011301050608&menge186=&ean187=2011301050609&menge187=&ean188=2011301050610&menge188=&ean189=2011301050611&menge189=&ean190=2011301050703&menge190=&ean191=2011301050704&menge191=&ean192=2011301050705&menge192=&ean193=2011301050706&menge193=&ean194=2011301050707&menge194=&ean195=2011301050708&menge195=&ean196=2011301050709&menge196=&ean197=2011301050710&menge197=&ean198=2011301050711&menge198=&ean199=2011301050303&menge199=&ean200=2011301050304&menge200=&ean201=2011301050305&menge201=&ean202=2011301050306&menge202=&ean203=2011301050307&menge203=&ean204=2011301050308&menge204=&ean205=2011301050309&menge205=&ean206=2011301050310&menge206=&ean207=2011301050311&menge207=&ean208=2011301050503&menge208=&ean209=2011301050504&menge209=&ean210=2011301050505&menge210=&ean211=2011301050506&menge211=&ean212=2011301050507&menge212=&ean213=2011301050508&menge213=&ean214=2011301050509&menge214=&ean215=2011301050510&menge215=&ean216=2011301050511&menge216=&ean217=2011301050403&menge217=&ean218=2011301050404&menge218=&ean219=2011301050405&menge219=&ean220=2011301050406&menge220=&ean221=2011301050407&menge221=&ean222=2011301050408&menge222=&ean223=2011301050409&menge223=&ean224=2011301050410&menge224=&ean225=2011301050411&menge225=&ean226=2011301052403&menge226=&ean227=2011301052404&menge227=&ean228=2011301052405&menge228=&ean229=2011301052406&menge229=&ean230=2011301052407&menge230=&ean231=2011301052408&menge231=&ean232=2011301052409&menge232=&ean233=2011301052410&menge233=&ean234=2011301052411&menge234=&ean235=2011301052503&menge235=&ean236=2011301052504&menge236=1&ean237=2011301052505&menge237=1&ean238=2011301052506&menge238=1&ean239=2011301052507&menge239=&ean240=2011301052508&menge240=&ean241=2011301052509&menge241=&ean242=2011301052510&menge242=&ean243=2011301052511&menge243=&ean244=2011301051203&menge244=&ean245=2011301051204&menge245=1&ean246=2011301051205&menge246=1&ean247=2011301051206&menge247=1&ean248=2011301051207&menge248=&ean249=2011301051208&menge249=&ean250=2011301051209&menge250=&ean251=2011301051210&menge251=&ean252=2011301051211&menge252=&ean253=2011301051103&menge253=&ean254=2011301051104&menge254=&ean255=2011301051105&menge255=&ean256=2011301051106&menge256=1&ean257=2011301051107&menge257=&ean258=2011301051108&menge258=&ean259=2011301051109&menge259=&ean260=2011301051110&menge260=&ean261=2011301051111&menge261=&ean262=2011301051303&menge262=&ean263=2011301051304&menge263=&ean264=2011301051305&menge264=1&ean265=2011301051306&menge265=1&ean266=2011301051307&menge266=&ean267=2011301051308&menge267=&ean268=2011301051309&menge268=&ean269=2011301051310&menge269=&ean270=2011301051311&menge270=&artikel_anzahl=270&radio_add=1&method=process&returnformat=JSON" 
```

**问：**
怎么办？我无法更改底层程序，那么限制用户可以创建的变化数量的唯一方法是什么？这是一个边缘案例，但尽管如此。

感谢您的输入！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T16:09:06.400

发布数据而不是在 url 中传递它。这可能是一个小调整，但您可以发布更多数据。最大 uri 长度取决于客户端和服务器。对于 IIS，默认值为 2Kb（约 2000 个字符），但可以修改为更大。我认为 IE 使用了相同的限制，尽管我不确定更新的版本。

无论如何，最大 2Kb 是您应该遵守的限制，尽管它不是官方限制。如果数据较大，请发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:08:08.100

检查这个更好[http://www.checkupdown.com/status/E414.html](http://www.checkupdown.com/status/E414.html)

这也可能有助于[Request-URI Too Large](https://stackoverflow.com/questions/9877744/request-uri-too-large)

或者

[如何解决 HTTP 414“请求 URI 太长”错误？](https://stackoverflow.com/q/2891574/1723626)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T16:14:01.400

TL;DR：使用 POST 而不是 GET。

# git - 执行更新后挂钩后如何更改所有者？

> ID：12918887
> 
> 赞同：2
> 
> 时间：2012-10-16T16:05:34.453
> 
> 标签：git, gitolite, post-update

Gitolite 和存储在一台服务器上的 Web 服务器。目录`/var/www/site`是回购“站点”的克隆。Git 用户包含在组 www-data 中。我有`/home/git/repositories/site.git/hooks/post-update hook`：

```
#!/bin/sh    
unset GIT_DIR
cd /var/www/site && git pull origin master 
```

一切正常，但在“拉”所有更新或新文件后将所有者更改为 git:git。我不知道如何在没有 root 用户权限的情况下更改所有者。有什么建议么？

我找到了很好的方法（更新后）：

```
#!/bin/sh

PATH=/usr/bin:/bin:/sbin:/usr/sbin:/usr/local/bin:/usr/local/sbin:$PATH
PROJECT="projectname"
GIT_URL="http://factory.domain.ru/git"

git update-server-info

if [ ! -f $1 ]; then
    exit 0
fi

while [ -n "$1" ]
do
    REF=`echo $1 | awk --field-separator="/" '{print $2}'`
    if [ $REF = "branches" -o $REF = "heads" ]; then
        BRANCH=`echo $1 | awk --field-separator="/" '{print $3}'`

        if [ ! -d /srv/www/$PROJECT/repo/master ]; then
            mkdir -p /srv/www/$PROJECT/repo
            GIT_SSL_NO_VERIFY=true git clone $GIT_URL/$PROJECT /srv/www/$PROJECT/repo/master
        fi

        if [ ! -d /srv/www/$PROJECT/repo/$BRANCH ]; then
            GIT_SSL_NO_VERIFY=true git clone -b $BRANCH $GIT_URL/$PROJECT /srv/www/$PROJECT/repo/$BRANCH
        else
            cd /srv/www/$PROJECT/repo/$BRANCH
            GIT_SSL_NO_VERIFY=true git fetch origin
            GIT_SSL_NO_VERIFY=true git reset --hard origin/$BRANCH
            GIT_SSL_NO_VERIFY=true git clean -d -f
            GIT_SSL_NO_VERIFY=true git checkout
            GIT_SSL_NO_VERIFY=true git pull
        fi
    fi
    shift
done 
```

和“更新”：

```
#!/bin/sh

refname="$1"
oldrev="$2"
newrev="$3"

PROJECT="projectname"

# --- Safety check
if [ -z "$GIT_DIR" ]; then
        echo "Don't run this script from the command line." >&2
        echo " (if you want, you could supply GIT_DIR then run" >&2
        echo "  $0 <ref> <oldrev> <newrev>)" >&2
        exit 1
fi

if [ -z "$refname" -o -z "$oldrev" -o -z "$newrev" ]; then
        echo "Usage: $0 <ref> <oldrev> <newrev>" >&2
        exit 1
fi

# --- Check types
# if $newrev is 0000...0000, it's a commit to delete a ref.
zero="0000000000000000000000000000000000000000"
if [ "$newrev" = "$zero" ]; then
        newrev_type=delete
else
        newrev_type=$(git cat-file -t $newrev)
fi

BRANCH=`echo $1 | awk --field-separator="/" '{print $3}'`

delete () {
    mv /srv/www/$PROJECT/repo/$BRANCH /srv/www/$PROJECT/repo/$BRANCH.removed_by_git
    rm -rf /srv/www/$PROJECT/repo/$BRANCH.removed_by_git
}

case "$refname","$newrev_type" in
        refs/heads/*,delete)
                # delete branch
                delete
                ;;
        refs/remotes/*,delete)
                # delete tracking branch
                delete
                ;;
esac

exit 0 
```

[habrahabr.ru](http://habrahabr.ru/post/158855/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:14:55.643

您不能不授予用户 root 访问权限 - 但是，您可以这样做，`sudo`因此他只能更改该文件夹的所有者。

以这种方式配置 sudo 后，您可以简单地添加`sudo chown -R www-data:www-data /var/www/site`到钩子中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:29:40.073

正如@ThiefMaster 所说，您不能像那样更改文件所有权，但是有一种不同的方法可以解决这个问题。

当您从某个开发系统（可能与部署系统相同的系统，也可能是其他系统）推送并使用 gitolite 进行访问时，您正在推送到`ssh://git@server/repo`（或某些 URL 变体，但无论如何，使用 ssh 到 gitolite 服务器机器，以用户`git`身份登录该服务器机器 - 我们设置为登录，`gitolite`但基于您使用的问题 user `git`）。但是，除了身份验证的工作方式之外，从服务器的角度来看，“developer@dev-host 推送给我，用户 git”实际上与“我，用户 git，从 developer@dev-host 拉取”相同。这就是为什么在你的 post-receive 钩子中，当你运行类似`cd /var/www/site && git pull origin master`的命令时，新文件由 user 拥有`git`：它是用户 git 合并到“他的”本地 repo，`cd`并`git pull`踏上另一个回购。

`developer@dev-host`首先可以 ssh 进入的原因`git@server`是服务器的`~git/.ssh/authorized_keys`文件包含公钥`developer@dev-host`（通过 gitolite 的管理存储库以及添加用户密钥时应用的各种魔法）。所以，假设 user`git@server`有他自己的 ssh 密钥对，假设你想`/var/www/site`被 user 拥有`www-site`。然后，如果用户`www-site`有一个主目录（`/var/lib/www-site`也许）并且该主目录有一个`.ssh/authorized_keys`授权用户`git`密钥的文件，那么用户`git`可以作为用户 ssh 进入`www-site`。然后，您的更新后挂钩将执行以下操作：

```
#! /bin/sh

# update running copy on real host
update_master() {
    ssh www-site@server "cd /var/www/site && git pull origin master"
}

# update test copy on test host
update_test() {
    ssh www-site@testhost "cd /var/www/site && git pull origin test"
}

for ref do
    case "$ref" in
    refs/heads/master) update_master;;
    refs/heads/test) update_test;;
    *) ;; # ignore other branches
done 
```

（我添加了代码来识别两个特定的分支并只为这些分支进行更新。注意：这些都没有经过测试。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-06T11:29:27.040

`# su requireduser -c 'git pull origin branch'`

# objective-c - 将 UIImage/UIGraphics 导入/包含到 Objective C

> ID：12918890
> 
> 赞同：3
> 
> 时间：2012-10-16T16:05:48.097
> 
> 标签：objective-c

我试图让我的头脑围绕目标 C 并快速挣扎。我猜我在这里问的是相当初级的，但我似乎无法在 StackOverflow、Mac 开发人员库或一般互联网上的任何地方找到我的问题的答案。

我尝试使用此处的代码：http: [//snipplr.com/view/23024/](http://snipplr.com/view/23024/)导入图像并显示它。

```
UIGraphicsBeginImageContext 
```

和

```
[img drawInRect:...] 
```

正在引发错误，即“未知名称类型 UIImage”和“'UIImage' 没有可见的@interface 声明选择器'drawInRect'”

看[这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/instm/UIImage/drawInRect%3a)我可以发现drawInRect是UIImage的一个方法。我猜我的问题是在我的代码中找不到 UIImage 类。

所以我试图包含它，或者导入它——我只是在这里画一个空白——这些代码行不起作用：

```
#import "UIImage"
#import "UIImage.h"
#include "UIImage"
#include "UIImage.h" 
```

他们踢出“找不到文件”错误。我不知道如何找到这些文件，我确定我错过了一些非常基本和简单的东西，但是在网上找不到任何可以说明如何阻止 UIImage 成为“未知名称类型”的东西。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T16:08:40.453

如果你在 Mac 上你会想要 NSImage 代替。

如果您使用的是 iphone，请确保您的 prefix.pch 包括 `#import <UIKit/UIKit.h>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T16:10:45.847

转到您的项目设置 - 选择目标 - 构建阶段 - 将二进制文件与库链接并确保核心图形和 UIKit 已链接。并且 UIKit 也包含在头文件中，就像 Martin 建议的那样。

![在此处输入图像描述](../Images/4c647d6015c5e9ade43951d79ed1c423.png)

# c# - 如何本地化水晶报表图例标签文本？

> ID：12918891
> 
> 赞同：0
> 
> 时间：2012-10-16T16:05:49.820
> 
> 标签：c#, asp.net, .net, crystal-reports, crystal-reports-2008

我有一个水晶报表图表，并希望将其所有标签文本本地化以支持多文化
软件。我可以使用“编辑轴标签”选项编辑标签文本。但是我如何才能外部化/本地化？如果我必须从资源 .resx 文件中提取键值并删除硬编码字符串？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-17T02:46:45.230

[Crystal Reports：本地化报表的策略（标签）](http://cogniza.com/wordpress/2009/07/09/crystal-reports-strategy-to-localize-a-report-labels/)

# visual-c++ - 从 cpp 更新文本框

> ID：12918892
> 
> 赞同：1
> 
> 时间：2012-10-16T16:05:51.620
> 
> 标签：visual-c++, managed-c++

构建解决方案后我仍然收到错误。请帮忙。错误是：1>test.cpp(15): error C2143: syntax error: missing ';' 在'->'之前

//Form1.h

```
public ref class Form1 : public System::Windows::Forms::Form
{

    public:
    static Form1^ myForm1;
Form1(void)
{
    InitializeComponent();
    myForm1 = this;
    //
    //TODO: Add the constructor code here
    //
}
} 
```

在 cpp 文件中：

```
Form1^ myform1 = gcnew Form1();
Form1::myForm1->textBox1->Text = L" FROM the main.cpp "; 
```

# javascript - Javascript将未知名称函数推入数组

> ID：12918893
> 
> 赞同：1
> 
> 时间：2012-10-16T16:05:57.567
> 
> 标签：javascript, arrays, function

我正在尝试制作一个新闻系统。我有一个表格，其中每个元素都是一个生成文本的函数。

我有一个循环来检查 news+number 是函数还是未定义。如果它是一个函数，那么我将 news+number 推送到数组 [number] 中。

我正在使用 eval，因为我不知道将函数名称和数字推送到数组的任何其他方式。

代码：

```
var tablicaNewsow = [news1,news2]

function addNews ()
{
  var counterArray = 0;
  var fName = " ";
  fName = "news1";
  while (eval('typeof' + " " + fName) == "function")
  {
    //---------------sprawdzenie czy news istnieje----------
    fName = "news" + (counterArray+1);
    if (eval('typeof' + " " + fName) == "function")
    {
      //------------jest news
      tablicaNewsow.push(eval(fName+"()"));
      }
    else
    {
      //-----------nie ma newsa
      }
    counterArray++;
  }
} 
```

注意：这是我系统中的一个代码段，它将函数推送到数组中。

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:07:31.080

我认为您正在寻找`window["news"+number]`（或类似的）。任何全局变量都可以通过这种方式访问​​。

否则，您可以只使用数组而不是索引多个变量名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:14:26.470

这是一个期望函数是全局的代码示例：

```
function addNews ()
{
    var counterArray = 0;
    var f = window["news1"];
    while (typeof f == "function")
    {
        //---------------sprawdzenie czy news istnieje----------
        f = window["news" + (counterArray+1)];
        if (typeof f == "function")
        {
            //------------jest news
            tablicaNewsow.push(f);
        }
        counterArray++;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:14:27.583

*您可以使用this*引用当前范围内的函数名称：

```
if (typeof(this[fName]) == 'function') {
  this[fName]();
} 
```

或者，如果你在一个对象中，但你知道函数存在于全局范围内，你可以使用*window*：

```
if (typeof(window[fName]) == 'function') {
  window[fName]();
} 
```

当然，**如果**上面的代码片段在 global/window 范围内运行——或者甚至在一个位于global/window 范围内的**函数**中，this == window 和任何一个选项都可以工作。

# java - 类方法检查它自己的成员不为空？

> ID：12918902
> 
> 赞同：0
> 
> 时间：2012-10-16T16:06:41.607
> 
> 标签：java, nullpointerexception

我有一个模型类，它代表数据库中的一个表。该表有 7 列，因此该类有 7 个属性。其中一些允许为空，其他则不允许。

因此，当我将一个人传递给公共函数时，我会检查不允许为空的属性是否不为空。与正常检查一样

```
if(person.getName() == null || person.getSurname() == null ...)
     throw new NullPointerException(); 
```

我现在想知道在 Person 类中创建一个基本上可以做到这一点的函数是否有任何缺点？像

```
public void checkFullDataset()
{
   if(name == null || surname() == null ...)
       throw new NullPointerException();
   return;
} 
```

因此，每当我与一个人一起工作时，我都会调用此方法，而不是手动测试所有字段。如果将来更改表（添加新字段，更改空/非空行为等），这也是有利的，因为我只需要更改此函数而不是代码周围的许多“if”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:11:37.017

两个想法：

1.  最好禁用空构造函数并引入一个将所有字段作为参数并将检查放在那里的构造函数。

2.  如果你想添加这样的方法，最好让会话返回`boolean`类似于标准`check`函数，如`hasElement()`，`hasNext()`等`iEmpty()`，并让用户处理它。

    ```
    public boolean checkFullDataset() {
       if(name == null || surname() == null ...)
         return false;
        return true;
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:16:27.390

满足您的需求的最佳解决方案是使您的`Person`类不可变，并使用**Builder 模式**在初始化时检查必填字段，之后再**也不**检查：

看看这个样本：http: [//xavimiro.blogspot.fr/2008/04/new-builder-pattern.html](http://xavimiro.blogspot.fr/2008/04/new-builder-pattern.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:17:13.833

您似乎发现的是“类不变”的概念。有一些编程语言，例如`Eiffel`语言在进入和退出类的每个公共函数之前检查约束，如果不满足则抛出异常；几乎是你自己在做的事情。

还要查找函数的前置条件和后置条件，类似的概念。

根据代码，您可能会发现检查是性能问题，在这种情况下，您可以为生产代码禁用它们

# php - 邀请好友参加活动 php api

> ID：12918903
> 
> 赞同：0
> 
> 时间：2012-10-16T16:06:45.927
> 
> 标签：php, facebook, facebook-graph-api

好吧，我现在被困住了。每次我尝试邀请用户加入群组时都会收到此错误。致命错误：未捕获的 OAuthException: (#200) 在第 1133 行的 /home/xxx/public_html/konkurrence/src/base_facebook.php 中抛出

$id is ex: 531559617,578399497,597219863,611583892,615217497,615862203,622354685,641989790,642609101,664099777,684181267,685978537,688529379,702356299,731199845,735261307,747864007,753442688,757574019,757617533,773399820,805573671,824600788 ,827164118,899525726

我的范围是：read_friendlists、user_likes、create_event、user_events、friends_events、offline_access

PS：Ofcouse facebook 和 $eventid 已设置等。

```
if ( isset ( $_POST['friends'] ) ) :

foreach ( $_GET as $l => $fis ) {
   $e.= $l . "=".$fis."&";
}
$i=0;
foreach ( $_POST['friends'] as $ids ) {
   if ( $i>48 && $user == $ids) :
   else:
       $id.=$ids . ",";
       $i=$i+1;
   endif;
}
$id = substr_replace($id ,"",-1);

echo $facebook->api($event_id . "/invited",'POST', array("users" => $id));

endif; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:49:32.167

您可以在此处阅读更多相关信息：[https ://developers.facebook.com/blog/post/560/](https://developers.facebook.com/blog/post/560/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:00:23.053

错误 #200 是一个权限错误，您没有通过诸如

```
try {
    echo $facebook->api($event_id . "/invited",'POST', array("users" => $id));
} catch (FacebookApiException $e) {
    error_log($e);
} 
```

您可能还想在用户邀请朋友之前检查当前经过身份验证的用户是否为该事件设置了 RSVP。您不能邀请用户参加您自己没有回复的活动。

```
/EVENT_ID/invited/USER_ID 
```

# .htaccess - .htaccess 缓存控制标头导致 500 服务器错误

> ID：12918904
> 
> 赞同：1
> 
> 时间：2012-10-16T16:06:50.590
> 
> 标签：.htaccess, http-headers, cache-control

我正在尝试学习如何使用 .htaccess 来操作我的标题，并且用 Google 的话说，“利用浏览器缓存”来改善页面加载时间。我试验过的代码是这样的：

```
<FilesMatch "\.(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf)$">
Header set Cache-Control "max-age=2592000, public"
</FilesMatch>
<FilesMatch "\.(js|css)$">
Header set Cache-Control "max-age=604800, public"
</FilesMatch>
<FilesMatch "\.(html|php)$">
Header set Cache-Control "max-age=14400, public"
</FilesMatch> 
```

出于某种原因，这导致整个网站抛出 500 错误。万一有什么不同，我很早就在 .htaccess 文件中插入了这段代码，在一些需要某些子域的密码和一长串 301 RewriteEngine 重定向的身份验证逻辑之前，因为这个网站最近进行了重组，而且很多的 URL 已更改。

你知道为什么这会导致错误吗？我或多或少地从博客中复制了代码并对其进行了编辑以满足我的需要。在我更新 .htaccess 文件后，500 错误也不会立即出现，这对我来说意味着错误是在 Apache 服务器的默认四小时缓存到期标头失效后开始的。

编辑 2012 年 10 月 17 日：

现在已经尝试添加和删除此代码几次，我已经确认标题可以正常工作，尽管时间很短。将 FireBug 与 PageSpeed 结合使用，我可以看到 max-age 设置已正确应用于文件。然后过了一段时间，正如我之前提到的，网站一直都变成了 500 个。

另一件值得注意的事情：我实际上是在尝试在受密码保护的测试子域上测试新标头，然后再将其推广到主站点。据我所知，由于某种原因，在更新了 SUBDOMAIN 上的 .htaccess 之后（它甚至用完了它自己的文件夹，与 /public_html/ 分开），主（www）站点中断了。

当我认为我正在更新测试子域时，可能是我做错了什么，或者不小心上传到了主站点，但我开始犹豫是否要为此在主站点上冒更多停机时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-11-14T19:36:33.223

You need to enable the `mod_headers` module in apache.

```
sudo a2enmod headers 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:20:57.263

确保您的 http.conf 文件中有配置条目，*允许*您在文件中添加这些条目`.htaccess`。一个很好的测试方法是将此部分移动到 apache 配置中，看看它是否仍然失败。

If it doesn't fail, make sure you have `override all` applying to the directory you're modifying.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:53:27.380

It's possible my 500 errors have nothing to do with the caching code, but with my site's Control Panel. Apparently, just accidentally clicking on its built-in .htaccess editor menu causes it to edit my own hand-coded file and shuffle lines around to an order IT likes to see them in for use with its own tools. This is breaking the site with or without the Cache-Control lines.

I'll try testing things one more time, and if all goes well this problem will be solved.

# java - 将数组添加到 List 时出错

> ID：12918908
> 
> 赞同：0
> 
> 时间：2012-10-16T16:07:00.677
> 
> 标签：java, arrays, list

```
List<String[]> list = new ArrayList<String[]>();
String str = "a b c";
list.add(str.split(" ")); 
```

基本上我想要一个 {a, b, c} 数组，但这不起作用。我是否必须迭代并加载每个元素？我该怎么做？

我的错误输出如下所示：

```
[Ljava.lang.String;@3d4b7453
[Ljava.lang.String;@24c21495 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T16:10:06.333

您的代码工作正常，但看起来您正在打印错误的内容。改为这样做：

```
for (String[] strs : list) {
    System.out.println(Arrays.toString(strs));
} 
```

仅打印一个数组将为您提供您所看到的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:10:12.920

您可以[`Arrays.toString()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5b%5d%29)用来打印数组的元素，

```
System.out.println(Arrays.toString(list.get(0))); 
```

或者迭代它们：

```
for(String s : list.get(0)) System.out.println(s); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T16:10:50.703

尝试

```
List<String[]> list = new ArrayList<String[]>();
String str = "a b c";
list.add(str.split(" "));
System.out.println(Arrays.toString(list.get(0))); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T16:12:10.680

我想你想这样打印： -

```
 List<String[]> list = new ArrayList<String[]>();
    String str = "a b c";
    list.add(str.split(" "));

    System.out.println(Arrays.toString(list.get(0))); 
```

这打印： -`[a, b, c]`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T16:16:11.277

您可以使用 Arrays.asList()

```
List<String> list = new ArrayList<String>();
String str = "a b c";
list.addAll(Arrays.asList(str.split(" "))); 
```

打印结果如下：

```
for (int i = 0; i < list.size(); i++) {
        System.out.println(list.get(i));
    }
} 
```

# jquery - 使用 wp_dropdown_pages 可以在没有提交按钮的情况下跳转到页面

> ID：12918909
> 
> 赞同：0
> 
> 时间：2012-10-16T16:07:00.917
> 
> 标签：jquery, forms, wordpress, submit

我使用 wp_dropdown_pages 作为页面上的导航。导航正在获取其父页面的子页面。我需要能够在没有提交按钮的情况下跳转到我选择的页面。

这是我到目前为止所拥有的。

```
<form id="form-dropdown" action="<?php bloginfo('url'); ?>" method="get">
                    <?php
                        $children = wp_dropdown_pages('title_li=&child_of='.$post->post_parent. '&echo=0');
                        echo $children;

                    ?>
                    <input type="submit" name="submit" value="view" />
                    </form>
                </div> 
```

对此的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:17:39.430

试试这个，你需要把这条线`?cat`改成`?page_id`

```
<?php wp_dropdown_categories('show_option_none=Select category'); ?>

<script type="text/javascript"><!--
var dropdown = document.getElementById("cat");
function onCatChange()
{
    if ( dropdown.options[dropdown.selectedIndex].value > 0 )
    {
        location.href = "<?php echo get_option('home');
        ?>/?cat="+dropdown.options[dropdown.selectedIndex].value;
    }
}
dropdown.onchange = onCatChange;
--></script> 
```

# mysql - 基于三列和特定值创建mysql唯一键

> ID：12918910
> 
> 赞同：0
> 
> 时间：2012-10-16T16:07:06.090
> 
> 标签：mysql, unique-key

我有一个跨两列具有唯一索引的表，`user_id`并且`country_id`

我添加了一个新列`deleted_at`，因此我可以在保留数据的同时删除行。

我现在想更新唯一键，使其基于`user_id`，`country_id`并且`deleted_at`IS NULL。这可能吗，如果可以，怎么办？

```
+----+---------+------------+------------+
+ id | user_id | country_id | deleted_at |
+----+---------+------------+------------+
+  2 |    3    |      1     |     NULL   |
+  3 |    3    |      1     | 2012-10-16 |
|  4 |    3    |      1     | 2012-10-15 |
+----+---------+------------+------------+ 
```

使用上述作为参考，由于 id 2 无法添加行，但是如果未设置第 2 行，则可以创建新行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:19:16.890

修改你的表 mytable 应该可以解决问题：

```
alter table mytable drop index user_country;
alter table mytable add 
unique index user_country_deleted (user_id, country_id, deleted_at); 
```

**编辑：**我太快了。根据[CREATE INDEX 语法](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)，这仅适用于 BDB 存储。

# google-api - Google Calendar API 事件空闲/忙碌/阻塞数据

> ID：12918917
> 
> 赞同：3
> 
> 时间：2012-10-16T16:07:24.490
> 
> 标签：google-api, google-calendar-api

我一直在使用 Google Calendar API，并试图弄清楚如何判断一个日历是否应该被视为一个阻塞时间的事件。例如，“哥伦布日”是美国许多人的全天活动（假期），对他们的工作日没有影响，但出现在日历上。我在其他地方读到，判断事件是否在日历上阻塞的方法是使用每个[This Post](https://stackoverflow.com/questions/6338320/getting-show-me-available-busy-value-in-google-calendar-events-net-api)的透明度字段。但是，当我使用我的日历事件并来回切换它们时，事件本身在日历上始终保持“透明”。

**我的问题是：** 有没有办法通过查看事件资源来判断事件是否阻塞了日历上的时间，或者这些信息是否应该从忙/闲查询中得出？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T16:39:30.557

事实证明，当使用 Ruby Google API 客户端时，只有当用户将事件标记为“可用”时，透明度字段才会包含在事件资源中。根据文档，默认值为“不透明”。据推测，当事件资源中不存在透明度字段时，则应将事件视为日历上的“不透明”或“阻塞”。在 API 客户端的结果请求正文中，这应该产生一个 nil 值而不是“透明”值。不是最干净的东西，但我认为它有效。

# opengl - OpenGL - 为什么我的对象是透明的？

> ID：12918920
> 
> 赞同：5
> 
> 时间：2012-10-16T16:07:32.607
> 
> 标签：opengl, transparency

我正在尝试制作具有原始形状的摩托车。由于某种原因，我制作的形状是透明的。我没有在任何地方指定任何 alpha；这是我的代码：

```
#include <GL/glut.h>
#include <math.h>

GLUquadricObj *quadratic;
static int isWire = 0; // Is wireframe?
static int distance = 10;
static float angleH = 0;
static float angleV = 0;

static float R = 2.0; // Radius of hemisphere.
static int p = 4; // Number of longitudinal slices.
static int q = 6; // Number of latitudinal slices.

#define PI 3.14159265358979324

static unsigned int pipe, seat, cover, wheel, wheelCenter, cycles; // parts of the motorcycle to make as display lists.
GLUquadricObj *cylinder;

void drawCoordinates();
void drawMotorcycle();
void drawTrailer();
void drawHemisphere();
void drawCylinder(float x, float y, float z);
void drawHandle(float x, float y, float z);
void drawLight();
void drawBase();
void setup();

void display () {

    /* clear window */
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    gluLookAt(distance*cos(angleH), distance*cos(angleV), distance*sin(angleH), 0.0, 0.0, 0.0, 0.0, 1.0, 0.0);

    /* future matrix manipulations should affect the modelview matrix */
    glMatrixMode(GL_MODELVIEW);

    if (isWire) glPolygonMode(GL_FRONT_AND_BACK, GL_LINE); else glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);

    glPushMatrix();

        drawCoordinates();

        glPushMatrix();
            glTranslatef(0.0, 0.0, 0.0);   // Move the motorcycle around the world space
            drawMotorcycle();
            drawTrailer();
        glPopMatrix();

    glPopMatrix();

    /* flush drawing routines to the window */
    glFlush();
}

void drawCoordinates()
{
    /***************** DRAW AXIS *****************/
    glPushMatrix();
        GLUquadricObj *xAxis; 
        xAxis=gluNewQuadric();
        glColor3f(1,0,0);
        glRotatef(-90, 0, 1, 0);
        gluCylinder(xAxis,0.05,0.05,1,5,5); 
    glPopMatrix();

    glPushMatrix();
        GLUquadricObj *yAxis; 
        yAxis=gluNewQuadric();
        glColor3f(0,1,0);
        glRotatef(-90, 1, 0, 0);
        gluCylinder(yAxis,0.05,0.05,1,5,5); 
    glPopMatrix();

    glPushMatrix();
        GLUquadricObj *zAxis; 
        zAxis=gluNewQuadric();
        glColor3f(0,0,1);
        gluCylinder(zAxis,0.05,0.05,1,5,5); 
    glPopMatrix();
    /***************** END OF DRAW AXIS *****************/
}

void drawMotorcycle()
{
    //DRAW ENGINE
    glPushMatrix();
        //drawCoordinates();
        glColor3f(.6, 0, 0);
        glScalef(1.4, 0.8, 1.0);
        glutSolidSphere(1,8,8);
        glPushMatrix();
            //drawCoordinates();
        glPopMatrix();
    glPopMatrix();

    //DRAW PIPES UNDER ENGINE
    glPushMatrix();
        glRotatef(-90, 1, 0, 0);
        glRotatef(80, 0, 1, 0);
        glTranslatef(0.5, 1.0, -1.5);
        glCallList(pipe);
        glTranslatef(0.0, -2.0, 0.0);
        glCallList(pipe);
    glPopMatrix();

    //DRAW SEAT
    glPushMatrix();
        glPushMatrix();
            glRotatef(15, 0, 0, 1);
            glTranslatef(-2.0, -0.4, 0.0);
            glScalef(2.0, 0.2, 1.2);
            glCallList(seat);
        glPopMatrix();

        //DRAW BACK SEAT
        glRotatef(-40, 0, 0, 1);
        glTranslatef(-2.3, -2.8, 0.0);
        glScalef(2.0, 0.2, 1.2);
        glCallList(seat);
    glPopMatrix();

    //DRAW FRONT PLATE
    glPushMatrix();
        glRotatef(120, 0, 0, 1);
        glTranslatef(0.8, -1.3, 0.0);
        glScalef(2.0, 0.2, 1.35);
        glColor3f(0.5,0.0,0.0);
        glutSolidCube(1);
        glPushMatrix();
            //drawCoordinates();
        glPopMatrix();
    glPopMatrix();

    //DRAW FRONT PIPES
    glPushMatrix();
        glRotatef(-90, 1, 0, 0);
        glRotatef(-30, 0, 1, 0);
        glTranslatef(1.3, -0.9, -5.7);
        glScalef(1.0, 1.0, 2.5);
        glCallList(pipe);
        glTranslatef(0.0, 1.7, 0.0);
        glCallList(pipe);
    glPopMatrix();

    //DRAW WHEEL COVERS
    glPushMatrix();
        glTranslatef(3.5, -3.0, 0.0);
        glScalef(1.0, 0.5, 1.0);
        glRotatef(45, 0, 0, 1);
        glCallList(cover);
        glTranslatef(-5.5, 0.0, 0.0);
        glRotatef(-100, 0, 0, 1);
        glTranslatef(-8.5, 0.2, 0.0);
        glCallList(cover);
    glPopMatrix();

    //DRAW WHEELS
    glPushMatrix();
        glTranslatef(3.9, -4.1, 0.0);
        glCallList(wheel);
        glTranslatef(-9.2, 2.0, 0.0);
        glCallList(wheel);
    glPopMatrix();

    //DRAW WHEEL CENTER PIECES
    glPushMatrix();
        glTranslatef(3.9, -4.1, 0.0);
        glCallList(wheelCenter);
        glTranslatef(-9.2, 2.0, 0.0);
        glCallList(wheelCenter);
    glPopMatrix();

    //DRAW CYCLES AROUND WHEELS
    glPushMatrix();
        glTranslatef(3.9, -4.1, 0.0);
        glRotatef(-90, 1, 0, 0);

        for(int i=0; i<8; i++)
        {
            glRotatef(45, 0, 1, 0);
            glPushMatrix();
                glCallList(cycles);
            glPopMatrix();
        }

        glTranslatef(-9.2, 0.0, 2.0);

        for(int i=0; i<8; i++)
        {
            glRotatef(45, 0, 1, 0);
            glPushMatrix();
                glCallList(cycles);
            glPopMatrix();
        }
    glPopMatrix();

    //DRAW HANDLE BARS
    glPushMatrix();
        glTranslatef(0.2, 2.0, 0.0);
        glRotatef(-45, 1, 0, 0);
        glScalef(0.7, 0.7, 0.7);
        glCallList(pipe);
        glRotatef(-90, 1, 0, 0);
        glCallList(pipe);
    glPopMatrix();

    //DRAW LIGHT
    glPushMatrix();
        glTranslatef(1.0, 1.0, 0.0);
        glColor3f(0.5, 0.5, 0.0);
        //glScalef(1.0, 0.5, 1.0);
        glutSolidSphere(0.5, 5, 5);
        glPushMatrix();
            //drawCoordinates();
        glPopMatrix();
    glPopMatrix();

    //DRAW BASE
    glPushMatrix();
        glRotatef(10.0, 0.0, 0.0, 1.0);
        glScalef(3.5, 1.5, 1.0);
        glTranslatef(-0.4, -1.0, 0.0);
        glColor3f(0.3, 0.3, 0.3);
        glutSolidCube(1);
    glPopMatrix();

    //GAS TANK
    glPushMatrix();
        glScalef(2.5, 1.0, 0.8);
        glTranslatef(-0.8, -1.7, -1.4);
        glCallList(pipe);
    glPopMatrix();
}

void drawTrailer()
{
    //DRAW BODY
    glPushMatrix();
        glColor3f(0.0, 0.0, 0.3);
        glScalef(2.0, 2.5, 1.5);
        glTranslatef(-4.5, -0.5, 0.0);
        glutSolidCube(1);
    glPopMatrix();

    //DRAW WHEELS
    glPushMatrix();
        glPushMatrix();
            glScalef(0.8, 0.8, 0.8);
            glTranslatef(-12.0, -1.5, 2.0);
            glCallList(wheel);
            glCallList(wheelCenter);

            glRotatef(90, 1, 0, 0);
            for(int i=0; i<8; i++)
            {
                glRotatef(45, 0, 1, 0);
                glPushMatrix();
                    glCallList(cycles);
                glPopMatrix();
            }
        glPopMatrix();

        glPushMatrix();
            glScalef(0.8, 0.8, 0.8);
            glTranslatef(-12.0, -1.5, -2.0);
            glCallList(wheel);
            glCallList(wheelCenter);

            glRotatef(90, 1, 0, 0);
            for(int i=0; i<8; i++)
            {
                glRotatef(45, 0, 1, 0);
                glPushMatrix();
                    glCallList(cycles);
                glPopMatrix();
            }
        glPopMatrix();
    glPopMatrix();

    //DRAW CONNECTION TO MOTORCYCLE
    glPushMatrix();
        glRotatef(90, 0, 1, 0);
        glTranslatef(0.0, -1.0, -8.0);
        glCallList(pipe);
    glPopMatrix();
}

void drawHemisphere()
{
    for(int j = 0; j < q; j++)
    {
        // One latitudinal triangle strip.
        glBegin(GL_TRIANGLE_STRIP);
        for(int i = 0; i <= p; i++)
        {
            glVertex3f( R * cos( (float)(j+1)/q * PI/2.0 ) * cos( 2.0 * (float)i/p * PI ),
            R * sin( (float)(j+1)/q * PI/2.0 ),
            R * cos( (float)(j+1)/q * PI/2.0 ) * sin( 2.0 * (float)i/p * PI ) );
            glVertex3f( R * cos( (float)j/q * PI/2.0 ) * cos( 2.0 * (float)i/p * PI ),
            R * sin( (float)j/q * PI/2.0 ),
            R * cos( (float)j/q * PI/2.0 ) * sin( 2.0 * (float)i/p * PI ) );         
        }
        glEnd();
    }
}

void reshape (int w, int h)
{

    // (Window of width = zero is not possible).
    if(h == 0)
        h = 1;

    float ratio = 1.0* w / h;

    // Reset the coordinate system before modifying
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    // Set the viewport to be the entire window
    glViewport(0, 0, w, h);

    // Set the correct perspective.
    gluPerspective(90,ratio,-1,1);
}

// Keyboard input processing routine.
void keyInput(unsigned char key, int x, int y)
{
   switch(key) 
   {
    case 'c' : distance = 10; angleH=0; angleV=0.0; break;
    case 'C' : distance = 10; angleH=0; angleV=0.0; break;
    case 'f': distance = (distance == 4)? 4:distance-1; break;
    case 'F': distance = (distance == 4)? 4:distance-1; break;
    case 'b': distance = (distance == 20)? 20:distance+1; break;
    case 'B': distance = (distance == 20)? 20:distance+1; break;
    case 'w': if (isWire == 0) isWire = 1; else isWire = 0; break;
    case 'W': if (isWire == 0) isWire = 1; else isWire = 0; break;
    //case 27: exit(0); break;
    default: break;
   }
}

void specialKeyboard(int key, int x, int y) {
   switch (key)
   {
       case GLUT_KEY_RIGHT:
      angleH -= .2;
      break;
   case GLUT_KEY_LEFT:
      angleH += .2;
      break;
   case GLUT_KEY_UP:
       angleV += .2;
      break;

   case GLUT_KEY_DOWN:
       angleV -= .2;
      break;
   }

}

void update(void){
   glutPostRedisplay();
}

void setup()
{
    // PARTS
    pipe = glGenLists(1);
    seat = glGenLists(1);
    cover = glGenLists(1);
    wheel = glGenLists(1);
    wheelCenter = glGenLists(1);
    cycles = glGenLists(1);

    glNewList(pipe, GL_COMPILE);   // Any cylinder on the motorcycle
        GLUquadricObj *cylinder; 
        cylinder=gluNewQuadric();
        glPushMatrix();
            glColor3f(.5,.5,.5);
            gluCylinder(cylinder,0.2,0.2,3,5,5);
                glPushMatrix();
                    //drawCoordinates();
                glPopMatrix();
        glPopMatrix();
    glEndList();

    glNewList(seat, GL_COMPILE);
        glPushMatrix();
            glColor3f(0.5, 0.35, 0.05);
            glutSolidCube(1);
                glPushMatrix();
                    //drawCoordinates();
                glPopMatrix();
        glPopMatrix();
    glEndList();

    glNewList(cover, GL_COMPILE);
        glPushMatrix();
            glColor3f(0.5, 0.0, 0.0);
            drawHemisphere();
                glPushMatrix();
                    //drawCoordinates();
                glPopMatrix();
        glPopMatrix();
    glEndList();

    glNewList(wheel, GL_COMPILE);
        glPushMatrix();
            glColor3f(0.1, 0.1, 0.1);
            glutSolidTorus(0.2, 1.2, 20, 20);
                glPushMatrix();
                    //drawCoordinates();
                glPopMatrix();
        glPopMatrix();
    glEndList();

    glNewList(wheelCenter, GL_COMPILE);
        glPushMatrix();
            glColor3f(0.4, 0.5, 0.5);
            glScalef(1.0, 0.5, 1.0);
            glutSolidSphere(0.8, 5, 5);
                glPushMatrix();
                    //drawCoordinates();
                glPopMatrix();
        glPopMatrix();
    glEndList();

    glNewList(cycles, GL_COMPILE);
        glColor3f(0.5, 0.5, 0.5);
        glScalef(0.25, 0.25, 0.25);
        cylinder=gluNewQuadric();
        gluCylinder(cylinder,0.5,0.5,5,15,5);
    glEndList();
}

int main (int argc, char** argv) {

    /* initialize GLUT, using any commandline parameters passed to the 
       program */
    glutInit(&argc,argv);

    /* setup the size, position, and display mode for new windows */
    glutInitWindowSize(500,500);
    glutInitWindowPosition(0,0);
    glutInitDisplayMode( GLUT_RGB | GLUT_DEPTH );

    /* create and set up a window */
    glutCreateWindow("Motorcycle");
    setup(); // Build all the display lists, ready to use

    glutIdleFunc(update);
    glutDisplayFunc(display);
    glutReshapeFunc(reshape);
    glutKeyboardFunc(keyInput);
    glutSpecialFunc(specialKeyboard);

    /* set up depth-buffering */
    glEnable(GL_DEPTH_TEST);

    /* background color */
    glClearColor(0.0f, 0.0f, 0.0f, 1.0f);

    /* tell GLUT to wait for events */
    glutMainLoop();
    return 0;
} 
```

您可以使用箭头键旋转相机以查看对象是否被透视。我怎样才能解决这个问题？我还能做些什么来改进我的代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T16:17:10.637

在`reshape()`：

```
// Set the correct perspective.
gluPerspective(90,ratio,-1,1); 
```

我猜你是从`glOrtho()`调用中音译参数，其中否定`zNear`是完全合法的。

[从`gluPerspective()`文档](http://www.opengl.org/sdk/docs/man/xhtml/gluPerspective.xml#parameters)：

> zNear：指定从查看器到近剪裁平面的距离**（始终为正）**。

试试这个：

```
gluPerspective(90,ratio,1,100); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T16:15:33.653

您需要添加 glEnable(GL_DEPTH_TEST); 到你的初始化函数。

# actionscript-3 - 在 as3 中添加一个活动状态

> ID：12918922
> 
> 赞同：-1
> 
> 时间：2012-10-16T16:07:40.470
> 
> 标签：actionscript-3

在 jQuery 中，我经常添加一个“活动”类，让我知道 div/img 或其他任何东西是否处于活动状态。我有一组 mc，想打开/关闭活动状态。这可能是as3吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:10:49.220

是的，您可以为 MovieClip 使用自定义属性，例如：

```
myMc.isactive = false;
     ^^^^^^^^
[you can use any word] 
```

# matlab - MATLAB在uicontrol的单元格中设置背景颜色

> ID：12918923
> 
> 赞同：1
> 
> 时间：2012-10-16T16:07:44.290
> 
> 标签：matlab, cell, uicontrol

我想在单元格中设置背景颜色..

**就像是：**

![在此处输入图像描述](../Images/e6272685d0c141d930494f1eff435b35.png)

所以我有 RGB 颜色和我想要着色的单元格数量。

你可以假设单元格的位置就是我写的。

我的颜色由 RGB 给出：

```
color = [255 0 0]; 
```

我想将它添加到第 10 个单元格中，所以我写了如下内容：

```
S.cell_data(10) = uicontrol('style','text',...
               'units','pix',...
               'Position',[20 70 80 40],...
               'string',color); 
```

但样式不是“文本”，也不是字符串。

这就是我现在正在尝试的：

```
S.cell_data(10) = uicontrol('style','text',...
               'units','pix',...
               'Position',[125 70 80 40],...
               'string','fh');

parentColor = get(get(S.cell_data(10), 'parent'), 'color');

set(S.cell_data(num_of_cols+1),'foregroundcolor', [0 0 0], ...
  'backgroundcolor', parentColor); 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:46:24.510

```
blue = 255;
green = 0;
red = 0;

rgb_str = strcat('<HTML><BODY bgcolor = "rgb(', num2str(red), ', ', num2str(green), ', ', num2str(blue), ')">green background</BODY></HTML>');

S.cell_data(10) = uicontrol('Style','pushbutton', 'Position',[20 70 80 40], 'String', {rgb_str}); 
```

# c# - 如何获取存储在 Outlook 2010 中的 CRM Dynamics 2011 约会的 GUID？

> ID：12918924
> 
> 赞同：0
> 
> 时间：2012-10-16T16:07:46.320
> 
> 标签：c#, dynamics-crm-2011, outlook-addin

我想拨打存储在 Dynamics 中**但**显示在 Outlook 中的约会。

假设用户打开一个带有所述约会的窗口（比如说“打电话给妈妈”）。我在功能区中添加了一个按钮，我希望它在单击时引起性别切换。如果用户点击按钮，我想

1.  将约会更新为“打电话给爸爸”，然后
2.  更新 Outlook 中未表示的某些字段。

第一部分，我认为可以通过更改打开窗口中的文本并允许用户以通常的方式存储新的、对爸爸友好的值来解决 - 通过在关闭框架时保存。

但是，第二部分需要“在后台”完成，因为 Outlook 客户端窗口的任何部分可能都不包含 CRM Dynamics 中相应字段的值。据我所知，我需要直接创建与 CRM 服务器的连接并写入那里的字段，**但**我不确定如何获取该特定约会的 GUID 以便在 CRM 服务器上引用它。

编辑：

需要澄清一下。所描述的操作将在 Outlook中针对相关约会**的额外开放框架内执行。**如果用户双击日历中的约会，则会弹出一个窗口，其中包含有关它的所有信息。在**该**窗口中，我需要参考**当前打开/编辑**的约会并获取**其**GUID 以供 CRM 参考。如果它不像我头脑中那样清楚“在纸上”，我深表歉意。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:08:36.623

唯一的 CRM 信息作为自定义存储在 Outlook 项目中`UserProperties`。如果您遍历`UserProperties`任何跟踪的约会，您会发现一个名为 的属性`crmid`。假设您可以找到感兴趣的约会，您可以找到`GUID`以下内容：

```
var guid = Guid.Parse((string)appt.UserProperties["crmid"].Value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:56:51.043

作为对@PeterMajeed 回复的补充，可以构建访问**所有**窗口的代码，如下所示。

```
foreach (Outlook.Inspector inspector in this.Application.Inspectors)
{
  Outlook.AppointmentItem item 
    = inspector.CurrentItem as Outlook.AppointmentItem;
  Outlook.UserProperty property = item.UserProperties["crmid"];
  String crmId = String.Empty;
  if (property != null)
    crmId = (String) item.UserProperties["crmid"].Value;
} 
```

如果您对触发事件的实际事件感兴趣（基于它是活动事件的假设），您可以使用下面的代码。

```
Outlook.Inspector inspector 
  = this.Application.ActiveInspector().CurrentItem 
    as Outlook.Inspector; 
```

# php - 使用 jQuery 和 PHP 实现长轮询

> ID：12918925
> 
> 赞同：4
> 
> 时间：2012-10-16T16:07:53.323
> 
> 标签：php, jquery, chat, comet, long-polling

我想建立一个基于 JavaScript（jQuery 将用于 AJAX）和 PHP 的聊天。

我听说这样做的一个好方法是使用长轮询。

我确实理解这个想法，但我不知道如何在服务器端实现它。

无限循环听起来是个坏主意。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T16:13:20.310

您不想创建无限循环，但可以设置超时。基本上循环 X 秒以等待某种数据，如果没有发生这种情况，则向客户端发送响应，告诉它它需要启动一个新请求，该请求将具有相同的超时时间。

```
$source; // some data source - db, etc
$data = null; // our return data
$timeout = 30; // timeout in seconds
$now = time(); // start time

// loop for $timeout seconds from $now until we get $data
while((time() - $now) < $timeout) {
    // fetch $data
    $data = $source->getData();

    // if we got $data, break the loop
    if (!empty($data)) break;

    // wait 1 sec to check for new $data
    usleep(10000);
}

// if there is no $data, tell the client to re-request (arbitrary status message)
if (empty($data)) $data = array('status'=>'no-data');

// send $data response to client
echo json_encode($data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:55:34.413

在 php 中实现这种聊天不是一个好主意，您可以使用[CometChat](http://www.cometchat.com/?r=AD3&gclid=CKyI8oWth7MCFVEP6wod6XEABQ)、[Nodjs](http://nodejs.org/)，如果您无法在服务器上安装脚本，那么您可以使用 Available APIs for Realtime Sending Data，

如[Pubnub](http://www.pubnub.com/)、[Pushemr](http://pusher.com/)、[Beaconpush](http://beaconpush.com/)。

# git - 在 git 中推送大量文件

> ID：12918930
> 
> 赞同：1
> 
> 时间：2012-10-16T16:08:33.413
> 
> 标签：git

我有一个非常大的 git 提交，有超过 200,000 个文件。提交需要很长时间，但推送需要更长的时间。

我正在运行的命令是：

```
git push -v -u origin master 
```

我所看到的是：

```
Counting objects: 251803, done. 
```

我等着。等等。等等。

它在做什么，还是我在徒劳地等待？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:38:48.987

我在推送 SSH 时有时会看到这种情况。有时按下 Ctrl-Z 然后用 重新启动进程`fg`会有所帮助，但有时我只需要等待。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:44:45.000

从理论上讲，它正在寻找 delta's，其中有超过 200,000 个文件可能很多。

如果您只使用一个线程，我相信 git 不会显示它正在寻找增量，这需要一段时间。

当你做一个更小尺寸的推送时，你的输出是什么？您是否看到以下输出的第二行中显示的内容？

```
Counting objects: 15, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (11/11), done. 
```

如果您没有看到第二行，则表示您只使用了一个线程。

# eclipse - 调用maven之前的eclipse变量替换

> ID：12918932
> 
> 赞同：1
> 
> 时间：2012-10-16T16:08:40.127
> 
> 标签：eclipse, maven, m2eclipse, m2e

有没有办法告诉 m2e 在调用 maven 之前解析 eclipse 变量？我有这个配置

```
<plugin>
    <!-- Done to create Target Platform needed by eclipse -->
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <version>2.5.1</version>
    <executions>
        <execution>
            <id>copy-dependencies</id>
            <phase>process-resources</phase>
            <goals>
                <goal>copy-dependencies</goal>
            </goals>
            <configuration>

                <outputDirectory>${workspace_loc}/project-OSGi/target/dependency</outputDirectory>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

但是`${workspace_loc}`在调用 maven 之前没有得到解决，所以我最终得到了一个名为 workspace_loc 的文件夹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:45:31.853

我的结论是在调用 maven 之前无法解析 eclipse 变量。`{env.XX}`我发现的唯一解决方法是在 maven和 eclipse中使用环境变量`${env_var:XX}`，这样 maven 和 eclipse 都解析为相同的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:55:19.990

我相信`${workspace_loc}`是一些特定于 CDT 的 Eclipse 变量，不是吗？

这里需要的是`${project.build.directory}`，也就是`target`你需要的目录。您还可以尝试其他一些选项，只需键入`${`并按*Ctrl+Space*，它就会向您显示所有可用的属性及其实际解析值作为提示。

# post - 无法在将照片上传到用户墙时标记朋友 - Facebook iOS

> ID：12918934
> 
> 赞同：3
> 
> 时间：2012-10-16T16:08:42.073
> 
> 标签：post, tags, photo, facebook-ios-sdk

我在将照片和标签用户的朋友上传到 Facebook 用户的墙上时遇到问题。它返回未知错误

如果我删除了标签参数，它将完美运行。

这是我用来发布照片和标记用户的代码

```
NSMutableArray *chunks = [[NSMutableArray alloc] init];

NSMutableDictionary *tagDict=[[NSMutableDictionary alloc]init];

for(int i=0; i < appDelegate.listFriend.count ;i++) {
      NSDictionary *friend = [appDelegate.listFriend objectAtIndex:i];
      NSString *type = [NSString stringWithFormat:@"%@",[friend objectForKey:@"type"]]; 
      if([type intValue] == 1) {

                    [tagDict setValue:[friend objectForKey:@"id"] forKey:@"tag_uid"];
                    [chunks addObject:tagDict];
      } 
}

[photoParams setObject:[chunks JSONString]  forKey:@"tags"];

 //test posting facebook's image's url
NSString *imagePath = urlPhoto;
NSURL *imageUrl = [NSURL URLWithString:imagePath];
NSData *imageData = [NSData dataWithContentsOfURL:imageUrl];

NSMutableDictionary *photoParams = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                                    message, @"message", imageData, @"source", nil];              

[appDelegate.facebook requestWithGraphPath:@"/me/photos" andParams:photoParams andHttpMethod:@"POST" andDelegate:appDelegate.self]; 
```

请帮我解决这个问题，感谢所有想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T08:32:03.557

从 facebook 开发者帐户检查此链接。对我来说效果很好，如果您愿意，请先尝试一下，我也可以提供代码。

[Facebook 文档在这里](https://developers.facebook.com/docs/graph-api/reference/v2.2/photo/tags#publish)

# c# - 如何为多个 DataTemplate 使用相同的 DataTrigger？

> ID：12918935
> 
> 赞同：0
> 
> 时间：2012-10-16T16:08:51.853
> 
> 标签：c#, wpf, datatemplate, itemscontrol, datatrigger

我想为多个 DataTemplate 设置一个 DataTrigger 但我不确定是否有办法做到这一点？我的视图结构如下

```
<ItemsControl ItemsSource="{Binding Collection}"
              AlternationCount="2"
              ItemTemplateSelector="{StaticResource RowSelector}" >
<local:HeaderTemplateSelector x:Key="RowSelector"
            NormalTemplate="{StaticResource NormalTemplate}"
            ExpanderTemplate1="{StaticResource ExpanderTemplate1}"
            ExpanderTemplate2="{StaticResource ExpanderTemplate2}"
            ExpanderTemplate3="{StaticResource ExpanderTemplate3}"  />
<DataTemplate x:Key="NormalTemplate" ...>
    <stackpanel  x:Name="main"
<DataTemplate x:Key="ExpanderTemplate1" ...>
    <Grid  x:Name="main" ..>
<DataTemplate x:Key="ExpanderTemplate2" ...>
    <Expander  x:Name="main"
<DataTemplate x:Key="ExpanderTemplate3" ...>
    <Textblock  x:Name="main" ...> 
```

我想要这个为行提供替代背景的数据触发器，下面定义的触发器

```
<DataTemplate.Triggers>
    <Trigger Property="ItemsControl.AlternationIndex" Value="0">
        <Setter Property="Background" Value="Blue" TargetName="main"/>
    </Trigger>
    <Trigger Property="ItemsControl.AlternationIndex" Value="1">
        <Setter Property="Background" Value="black"  TargetName="main"/>
    </Trigger>
</DataTemplate.Triggers> 
```

我可以将它添加到每个 DataTemplate 的末尾并且它工作正常，但这意味着我必须将某些代码复制 4 次，有什么办法可以避免这种情况吗？（我知道我可以使用数据网格，但对于这个简单的结构来说它是矫枉过正的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:17:34.840

您可以尝试使用以下样式设置触发器：

```
<Style TargetType="Panel" x:Key="AlternatelyPainted">
    <Style.Triggers>
        <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContentPresenter}}, Path=(ItemsControl.AlternationIndex)}" Value="0">
            <Setter Property="Background" Value="Red"/>
        </DataTrigger>
        <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContentPresenter}}, Path=(ItemsControl.AlternationIndex)}" Value="1">
            <Setter Property="Background" Value="Blue"/>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

（谢天谢地从[这个答案](https://stackoverflow.com/a/3567894/276994)中窃取的代码）并在您的模板中使用它：

```
<DataTemplate x:Key="NormalTemplate" ...>
    <StackPanel Style="{StaticResource AlternatelyPainted}">
        ...
    </StackPanel>
</DataTemplate> 
```

等等

编辑：如果您希望样式是通用的，而不是`Panel`特定的，您可以尝试以下技巧：

```
<Style x:Key="AlternatelyPainted">
    <Style.Triggers>
        <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContentPresenter}}, Path=(ItemsControl.AlternationIndex)}" Value="0">
            <Setter Property="Panel.Background" Value="Red"/>
            <Setter Property="Control.Background" Value="Red"/>
            <Setter Property="TextBlock.Background" Value="Red"/>
        </DataTrigger>
        <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContentPresenter}}, Path=(ItemsControl.AlternationIndex)}" Value="1">
            <Setter Property="Panel.Background" Value="Blue"/>
            <Setter Property="Control.Background" Value="Blue"/>
            <Setter Property="TextBlock.Background" Value="Blue"/>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

（删除了`TargetType`属性名称并添加了显式类型）。请注意，`TextBlock`它不继承它`Background`，因此我们需要为它增加一行。

# sql-server - 提高在 where 子句中使用 isnull 的性能

> ID：12918936
> 
> 赞同：1
> 
> 时间：2012-10-16T16:08:54.743
> 
> 标签：sql-server, reporting-services

有一个报告，其查询在 where 子句中使用 isnull，这会导致一些性能问题。这是一个非常简化的示例。 [http://www.sqlfiddle.com/#!6/79759/11](http://www.sqlfiddle.com/#!6/79759/11)

该查询使用多值参数，通常只返回一个或两个值。（我尝试使用 sqlfiddle 中的表变量复制 SSRS 多值参数）

```
select 
  isnull(descrL,descr) as division,
  product
from Upper
left join Lower on product = productL
where isnull(DescrL,Descr) in (@params) 
```

有一个拥有所有产品的上部门。一些产品存在于一个子部门。如果它存在于较低的分区中，那就是应该显示的分区。

公司参数可以接受上级、下级或两者兼有。

关于如何更改查询以获得更好的性能的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:35:28.477

```
select  descrL as division, product
from Lower 
where DescrL like @params + '%'
union
Select descr, product
from Upper
where Descr like @params = '%' 
```

这将非常高效。如果在顶部选择中找到匹配项，则应在底部选择中抑制它，因为它是联合而不是联合全部。注意 like 而不是 in。如果您执行 in，则无法使用 DescrL 或 Descr 上的索引来查找结果。如果您喜欢，则可以很好地使用索引。您可能必须调整您的应用程序逻辑才能使其正常工作。

如果你不能这样做，那么有这个解决方案。您必须将 fn_split 添加到您的数据库中。 [http://msdn.microsoft.com/en-us/library/aa496058(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa496058%28v=sql.80%29.aspx)

```
 select  descrL as division, product
    from Lower l 
    join dbo.fn_Split(@params, ',') p1
        on l.DescrL = p1.value
    union
    Select descr, product
    from Upper u 
    join dbo.fn_Split(@params, ',') p2
        on u.Descr = p2.value 
```

如果您真的想获得最后一点性能，您可以声明一个表变量并只运行一次 fn_split 以填充表变量，然后使两个连接成为表变量。因此，在这里您还可以利用列上的索引，这是使查询更快所需的主要内容。运行时始终在 sql server 中“包含实际执行计划”，并查看结果并确保您看到的是索引搜索而不是表扫描。

编辑：我去了你的 sqlfiddle 链接。之前没看到。这行得通。工会本身不会压制骗子，因为您也在选择部门，对不起。因此，您必须使用 not in 或者我更喜欢的 left outer where null。

```
select descrL as division, productL as product
    from Lower l 
    join @params p1
        on l.DescrL = p1.division
    union
    Select u.descr, u.product
    from Upper u 
    join @params p2
        on u.Descr = p2.division
    left join (select productL as product
                from Lower l2 
               join @params p3
                 on l2.DescrL = p3.division) sub1
     on u.product = sub1.product
        where sub1.product is null
order by 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:08:10.910

我不确定，但是 cte 在您的情况下是否有效？

```
;with BothDivs as
(
  select 
  isnull(descrL,descr) as division,
  product
  from Upper
  left join Lower on product = productL
)
select division, product
from BothDivs
where division in (@params) 
```

# php - 如何使用 ajax 和 php 在聊天和消息传递系统中创建用户文件

> ID：12918938
> 
> 赞同：0
> 
> 时间：2012-10-16T16:09:01.167
> 
> 标签：php, javascript, ajax

我真的希望得到一个有用的答案。我一直在努力制作一个允许两个用户之间进行私人会话的聊天框，其中只有两个用户可以选择加入普通聊天室进行聊天，我这样做没有任何 xmpp、套接字等，我是仅使用可用作日志的文件，我将解释这个概念：用户已登录，他们被定向到聊天页面，其中存储在数据库中的朋友列表加载到他们的右侧，这部分是工作正常：

```
//i've declared all the variables previously
//skip to the part that loads the names:   
 while($rowb=mysql_fetch_array($done))
{
$rafiki=$rowb['name'];
//show the names,when the user clicks on any of them, the name(variable $jina) of the user
//and the friend's name are sent to the function makefile()
echo "<a href='Javascript:makefile(".$jina.",".$rafiki.")'>"."$rafiki"."</a>"."<br/>";
} 
```

当用户点击任何名字时，它们会被发送到 javascript 函数，该函数接受两个参数，用户名和朋友的名字，然后在末尾添加一个扩展名，以生成一个日志文件，作为两人聊天记录：

```
function makefile(username,friendname)
{
//add file extension
var ext=".html";
//concatenate
var dash="-";
var full=username.concat(dash,friendname,dash,ext);
var str=friendname.concat(dash,username,dash,ext); 
```

所以每一对都有自己的文件，变量 full 通过 ajax 发送到脚本以使过程无缝，脚本做了很多事情：它首先检查是否有一个日志文件，它承载从客户端存在，以用户名或朋友名开头，如果其中一个文件存在，则检查是否已发送任何消息并将其写入文件，如果两个文件都不存在，则创建一个新文件，并提示朋友要开始聊天的用户，当朋友点击用户的名字时，第一个条件将成功，因为已经制作了一个文件：

```
<?php
session_start();
$full=$_POST['full'];
//first, check to see if variations of the file already exist
//start by exploding the sent data
$result=explode("-",$full);
$usrnme=$result[0];
$frndnme=$result[1];
$ext=$result[2];
//make varied names for comparison
$vrdfull=array($result[1],$result[0],$result[2]);
$str=implode("-",$vrdfull);
$_SESSION['str']=$str;
$_SESSION['full']=$full;
//start actual comparison
if(file_exists($full)||file_exists($str))
{
//stuff to do if first file exists
if(file_exists($full))
{
//check to see if message has been sent
if (isset($_POST['message']))
{
$message=$_POST['message'];
//update existing file with message
$fp=fopen($full,'a');
fwrite($fp, "<div id=\"sent\">".$usrnme." :"." ".$message."<br/>"."</div>");
//close the file
fclose($fp);
}
}
else
//stuff to do if second file exists
{if(file_exists($str))
{
//check to see if message has been sent
if (isset($_POST['message']))
{
$message=$_POST['message'];
//update existing file with message
$fpp=fopen($str,'a');
fwrite($fpp, "<div id=\"sent\">".$usrname." :"." ".$message."<br/>"."</div>");
//close the file
fclose($fpp);
}
}
}
}
else
{
//create file, since neither files exist
$fhandel=fopen($full,'a');
//check if message has been sent
if(isset($_POST['message']))
{
$messssage=$_POST['message'];
fwrite($fhandel,"<div id=\"sent\">".$usrname." "." : ".$messssage."<br/>"."</div>");
}
fclose($fhandel);
//send msg to friend, incurring them to accept
$ext=".html";
$frrnme=$frndnme.$ext;
$fpp=fopen($frrnme,'a');
//prompt the user to initiate chat by opening file,by clicking on the name he/she would see
fwrite($fpp,"<div id=\"msg\">".$frndnme." wants to chat, click on their name to accept"."</div>");
fclose($fpp);
}
?> 
```

我认为这部分没有任何问题，只是发布它以帮助传达这个想法。这是将字符串完整发送到脚本的 ajax（我认为它可能是错误的）：

```
$.ajax({
type:'POST',
url:'makesend.php',
data: {full:full},
//what to do if data was sent:
success: function(full){
$('#myResponse').html(full);

}
});
return false; 
```

div“myresponse”中没有显示数据，所以我认为这里有问题，我不知道是什么。接下来是处理用户发送的消息，这是获取他们输入的表单：

```
<form name="message" action="">
    <input name="message" type="text" id="usermsg" size="63" />
    <input name="submitmsg" type="submit" onclick="send()"  id="submitmsg" value="Send" />
</form> 
```

这是将数据发送到 makeend.php 文件的函数 send()：

```
function send(){
var clientmsg = $("#usermsg").val();
    $.post("makesend.php", {message: clientmsg});               
    $("#usermsg").attr("value", "");
    return false;
} 
```

同样，当我对此进行测试并写了一条消息时，页面重新加载并且没有数据发送到脚本！这里也有问题，不知道是什么问题。继续，在创建文件并与用户开始交互后，需要将其上传到用户可以看到的消息区域，这里是消息区域 div：

请记住，我需要加载一个存在的文件，所以在将其加载到该区域之前，我需要使用 php 来查看存在哪个版本，要么是用户名在前，要么是朋友名（$full或 $str):

```
$("#msgarea").html(
"<?php
    //check to see if either file exists
if(file_exists($_SESSION['full'])||file_exists($_SESSION['str'])){
    //check to see if the first file exists:
            if(file_exists($_SESSION['full']))
    {
    $full=$_SESSION['full'];
    $handlle = fopen($full, "r");
    $contents = fread($handlle, filesize($full));
    fclose($handlle);
    //load it's contents to the division if it does
    echo $contents;}
    else
    { 
            //if first file doesn't exist, load the second one:
    $str=$_SESSION['str'];
            //check to see if it exists before loading it
    if(file_exists($str))
    {
    $handle = fopen($str, 'r');
    $contents = fread($handle, filesize($str));
    fclose($handle);
    //load it to the division
    echo $contents;
    }
    }
}
?>"
 ); 
```

我认为这样做是合法的，将 php 代码添加到元素的 innerHTML 中，因此此代码将加载存在的文件的任何版本。我从会话中获取文件名，因为这部分代码在数据发送到 makeend.php 文件后执行，该文件启动会话并提供它们 ($_SESSION['full'] 和 $_SESSION['str'] ) 值。加载文件的这部分是函数 makefile() 中的最后一段代码，首先，该函数以用户单击的名称的形式从用户那里获取数据，然后将它们发送到一个脚本 (makesend.php)，该脚本创建在此之后，聊天日志文件是最后一部分，它将数据加载到“msgarea”部门。接下来，我需要在一定时间后刷新/重新加载创建的日志文件以显示用户发送的消息，我选择使用 2.

```
 <?php
//set up the conditions

$full=$_SESSION['full'];
$str=$_SESSION['str'];
//check whether either file exists
if(file_exists($full)||file_exists($str))
{
 //reload the first file if it exists
if(file_exists($full)){
//this is the jquery inside the php(which is also in javascript tags)
echo '<script type="text/javascript" src="jquery-1.8.0.min (1).js"></script>';
echo '<script type="text/javascript">';
echo
'function loadLog(){        
    var oldscrollHeight = $("#msgarea").attr("scrollHeight") - 20;
    $.ajax({
        url: <?php session_start(); echo $_SESSION[\'full\']?>,
        cache: false,
        success: function(html){        
            $("#msgarea").html(html); //Insert chat log into the #msgarea div               
            var newscrollHeight = $("#msgarea").attr("scrollHeight") - 20;
            if(newscrollHeight > oldscrollHeight){
                $("#msgarea").animate({ scrollTop: newscrollHeight  }, \'normal\'); //Autoscroll to bottom of div
            }               
        },
    });
}
setInterval (loadLog, 2500);    //Reload file every 2.5 seconds';
}
else{
    //this will reload the second file since the first doesn't exist:
echo 
'function lloadLog(){       
    var oldscrollHeight = $("#msgarea").attr("scrollHeight") - 20;
    $.ajax({
        url: <?php session_start(); echo $_SESSION[\'str\']?>,
        cache: false,
        success: function(html){        
            $("#msgarea").html(html); //Insert chat log into the  #msgarea div              
            var newscrollHeight = $("#msgarea").attr("scrollHeight") -  20;
            if(newscrollHeight > oldscrollHeight){
                $("#msgarea").animate({ scrollTop: newscrollHeight }, \'normal\'); //Autoscroll to bottom of div
            }               
        },
    });
}
setInterval (lloadLog, 2500);   //Reload file every 2.5 secsonds';

}
echo '</script>';
}
?> 
```

我认为就是这样，整个系统，还有注销调用有问题，这是代码，它在文件的最后： $("#exit").click(function(){ var exit = confirm("您确定要结束会话吗？"); if(exit==true){window.location = 'testing.php?logout=true';}
}); 这是它的标记：

```
<p class="logout"><a id="exit" href="#">Exit Chat</a></p> 
```

在文件的顶部，这是检查它是否设置为 true 的部分：

```
session_start();
//logout function
if(isset($_GET['logout']))
{
if(file_exists($_SESSION['full'])||file_exists($_SESSION['str']))
{
if(file_exists($_SESSION['full']))
{
$full=$_SESSION['full'];
$flogout=fopen($full,'a');
fwrite($flogout, $_SESSION['username']." has left the anichat!!!  "."<br>");
fclose($flogout);
}
else
{
$str=$_SESSION['str'];
if(file_exists($str))
{
$flogoout=fopen($str,'a');
fwrite($flogoout, $_SESSION['username']." has left the chat  "."<br>");
fclose($flogoout);
}
}
}
session_destroy();
header("Location:testing.php");//user redircect.
} 
```

用户的页面甚至没有刷新，因此会话被破坏，它只是刷新并且会话数据仍然存在（这是因为登录表单没有显示，如果 $_SESSION['name']是空的）。我知道这是一个很长的问题，但我是初学者，我真的需要帮助，我认为主要问题是 ajax，但如果你能发现其他任何东西，我将非常感激，我恳请相关答案将帮助我实现这一点，如果您希望我以一种不像我在这里说明的方式那样分开的方式发布 testing.php 和 makeend.php 中存在的整个代码，请询问如果它有帮助。我感谢所有不遗余力地帮助他人的高级程序员，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:22:38.830

我想这是处理页面`makesend.php`没有检索到任何请求。您可以使用萤火虫来确定它是否正在写一些东西。我这么说是因为您在更新后没有读取文件（没有看到它）您可以创建一个新的 ajax 请求，该请求在一段时间后定期调用，并将内容与对话一起加载到日志文件中。

# internet-explorer - IE: 无法从 SITENAME 下载 FILENAME。无法打开此 Internet 站点

> ID：12918942
> 
> 赞同：0
> 
> 时间：2012-10-16T16:09:14.413
> 
> 标签：internet-explorer, asp-classic, download

经过一天徒劳地在相关网站上搜索信息内核后，我决定是时候询问 Stack Overflow 的专家了。我们有一个经典的 ASP 站点，用于通过 https 向用户提供报告。多年来一直运行良好。我们最近添加了一个非常大的报告（压缩后 250 MB），当用户尝试下载报告时会破坏软件。我们得到“打开/保存/取消”对话框确定，但单击“打开”失败，单击“保存”会在标题中显示错误消息。较小的文件可以正常工作。我们能够使用相同的数据集在我们测试区域的各种 IE 版本中复制这个问题。

下载报告的技术大约是 1990 年。我们有一个 VB6 DLL，它从 ASP 代码内部调用，并带有所需文件的地址。DLL 打开文件并用 zip 文件的字节填充字节数组，然后将其传递回 ASP 页面，该页面在“Response.BinaryWrite”调用中流出字节数组。就像我说的那样，这适用于较小的文件，并且似乎适用于比所讨论的文件更大的文件（至少我们没有听到用户的抱怨）。我会说文件有问题，除了我们可以在各种环境中复制错误。

我和我的队友尝试了我们所做的谷歌搜索中提供的简单解决方案，结果没有任何变化（'Response.AddHeader "Cache-Control", "no-store, no-cache" '，修改注册表， ETC）。我希望有人以前遇到过这个问题并且可以提供一些新的想法。如果您需要更多信息，请询问，我们会尽力回答。

提前感谢您的帮助，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:42:06.953

谢谢，AardVark71，我们按照您的建议增加了服务器上的 aspbufferinglimit，它现在正在工作。我们还增加了服务器和页面上的脚本超时变量，以确保页面有足够的时间来完成任务。

# ios - 放大 UIImageView 和 UIImageView.center

> ID：12918945
> 
> 赞同：2
> 
> 时间：2012-10-16T16:09:22.807
> 
> 标签：ios, cocoa-touch, uiview, uiimageview

试图放大/缩小 imageView。

我已经成功地做到了，所以现在我试图在视图上放置一些按钮，并在点击按钮时放大该区域。

我该如何实施？

到目前为止，这是我的代码

```
-(void)zoomHere:(UIButton *)sender{

    NSLog(@"zoom in");
    //[self performSelector:@selector()
    //         withObject:nil
    //         afterDelay:1.6f];

    CGAffineTransform transformer = CGAffineTransformScale(imageView.transform, 1.05, 1.05);

    if (transformer.a < 5) {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration: 0.2];
        imageView.transform = transformer;
        [UIView setAnimationDelegate:self];
        [UIView commitAnimations];
    }

} 
```

并且视图确实加载了

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIView *buttonView = [[UIView alloc]initWithFrame:CGRectMake(00.0, 20.0, 768, 1004.0)];

    zoomHere = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [zoomHere addTarget:self
               action:@selector(zoomHere:)
     forControlEvents:UIControlEventTouchDown];
    [zoomHere setTitle:@"ZoomIN" forState:UIControlStateNormal];
    zoomHere.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
    [buttonView addSubview:zoomHere];

    buttonView.multipleTouchEnabled = YES;

    [self.view addSubview:buttonView];

} 
```

它仍然会放大，但不会放大按钮所在的屏幕区域！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:24:16.500

如果你想使用缩放变换，你可能应该
像这样使用平移变换：

```
CGAffineTransform scale = CGAffineTransformMakeScale(1.05, 1.05);
CGAffineTransform translate = CGAffineTransformMakeTranslation(10, 20);
CGAffineTransform delta = CGAffineTransformConcat(scale, translate);
imageView.transform = CGAffineTransformConcat(imageView.transform, delta); 
```

这就是您知道图像视图上按钮位置的方式：

```
[imageView convertPoint:button.center fromView:self.view] 
```

因此，如果您知道按钮的坐标和当前的比例，那么您可以计算新的平移变换
但至于我，我宁愿使用滚动视图来放大和缩小该图像视图。你可以有很好的弹跳动画和缩放动画，也可以有平移和捏合，但当然这取决于你。

# java - JSF 我需要用 StringArray 填充 selectItems 但我需要先解析它

> ID：12918956
> 
> 赞同：0
> 
> 时间：2012-10-16T16:10:07.210
> 
> 标签：java, jsf

我创建了另一个问题，希望能找到答案，但我走错了方向。这是供参考的问题（[如何将其解析为多值映射？](https://stackoverflow.com/questions/12916993/how-do-i-parse-this-into-a-multivalued-map)）

我从属性文件中拉出一个字符串数组（使用 Apache 配置），然后数组进来，看起来像这样

```
name,5486984,189.658.235.215,3.158.68.15,name2,189189,189.658.218.268,3.158.68.13... 
```

这是JSF的一部分

```
<f:selectItems itemValue="#{mainBean.information}" value="#mainBean.information}" /> 
```

这是Java的片段

```
Private String [] information;
information = config.getStringArray("information"); // This brings in this string from the property file 
```

我一直在参考这个[http://www.horstmann.com/corejsf/refcard.html](http://www.horstmann.com/corejsf/refcard.html)

因此，就我在这里所拥有的而言，我刚刚发布了。它将填充该字符串数组的每个元素。我只希望显示“名称”并将其他三个值作为实际“值”传递。

我试图制作一个 Map 对象，它是一个字符串和一个字符串数组，但 JSF 拒绝接受它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:36:14.950

> *我试图制作一个 Map 对象，它是一个字符串和一个字符串数组，但 JSF 拒绝接受它。*

A`Map`应该工作。[您可以在我们的`selectOneMenu`标签 wiki 页面](https://stackoverflow.com/tags/selectonemenu/info)中找到具体示例。映射键成为选项标签，映射值成为选项值。

您应该只意识到选项值最终会出现在 HTML 响应中，在`value`HTML 元素的属性中，`<option>`就像这样

```
<option value="someValue"> 
```

由于 HTML 实际上是纯文本，因此如果不先转换它们，就无法在 HTML 中表示非标准 Java 对象。A`String[]`是非标准的，当您没有明确指定转换器时，默认情况下，[`Object#toString()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#toString%28%29)结果将内联在 HTML 中，并且`String[]`看起来像

```
<option value="[Ljava.lang.String;@1860045"> 
```

Exactly that value is in turn thus submitted to the server side when the option is selected. 但是，由于该值是一个难以理解的字符序列，因此无法`String[]`使用 Java/JSF/EL 以任何方式将其转换回原始值。

除了提供转换器，您还可以只传递`List<String>`包含名称的 a。

```
<h:selectOneMenu value="#{bean.name}">
    <f:selectItems value="#{bean.names}" />
</h:selectOneMenu> 
```

在处理表单提交时，您可以直接从配置文件或一些被记住为 bean 属性`String[]`的提交名称中获取相关的返回。`Map`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:25:29.277

好吧，在 JSF 2.0`Map`中为`<f:selectItems>`我工作。您可以尝试为每个选项创建 JSF [，](http://www.roseindia.net/jsf/selectItems.shtml)[`SelectItem`](http://docs.oracle.com/cd/E17824_01/dsc_docs/docs/jscreator/apis/jsf/javax/faces/model/SelectItem.html)如下所示。它应该工作。

# windows-services - 多线程在多线程应用程序中访问相同的代码

> ID：12918964
> 
> 赞同：0
> 
> 时间：2012-10-16T16:10:20.573
> 
> 标签：windows-services, threadpool

我在 Windows 服务多线程项目的中间，我需要你们的一些输入才能成功运行它。下面是代码并描述了我正在尝试做的事情和问题。

```
// I created a new thread and call MyTimerMethod() from the Main method.
private void MyTimerMethod()
{
    timer = Timers.Timer(5000)
    timer.Elapsed += new ElapsedEventHandler(OnElapsedTime);
    timer.Start();

    // make this thread run every time.
    Application.Run(); 
}

private void OnElapsedTime(object source, ElapsedEventArgs e)
{
    for(int i = 0; i < SomeNum; i++) //SomeNum > 0    
    ThreadPool.QueueUserWorkItem(WaitCallback(MyWorkingMethod),null);
}

private void MyWorkingMethod(object state)
{
    // each thread needs to go and check the status and print if currentStatus = true.
    // if currentStautus = true then that jobs is ready to print.
    // FYI ReadStatusFromDB() from the base class so I cannot modify it.

     ReadStatusFromDB(); // ReadStatusFromDB() contains jobs to be printed.
    // after doing some work store procedure update the currentStatus = false. 

    //do more stuff.
} 
```

长话短说，程序每五秒运行一次，并检查是否还有更多工作要做。如果有则从线程池创建一个新线程并推入队列。现在我的问题是队列中有多个线程时。即使是 currentStatus = false 多个线程也会抓取相同的作业并尝试打印。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:12:44.300

我建议创建工作项的[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)，并将您的程序构建为生产者/消费者应用程序。提交作业时（通过计时器滴答声或其他方式），它只是添加到集合中。

然后，您有一个或多个持久线程正在使用[TryTake](http://msdn.microsoft.com/en-us/library/dd287135.aspx)等待集合。当一个项目被添加到集合中时，其中一个等待线程将获取并处理它。

这种结构有几个优点。首先，它可以防止多个线程处理同一个项目。其次，它限制了将同时处理项目的线程数。第三，线程正在对集合进行非忙碌等待，这意味着它们不会消耗 CPU 资源。唯一的缺点是您有多个持久线程。但是，如果您大部分时间都在处理项目，那么持久线程根本不是问题。

# mysql - MySQL函数用反引号引用标识符

> ID：12918965
> 
> 赞同：2
> 
> 时间：2012-10-16T16:10:26.070
> 
> 标签：mysql, sql

是否有一个 MySQL 内置函数用反引号包围标识符（简单或限定）？即这样的功能`f`将像：

`f('my')`会回来``my``，

`f('my.table')`会返回``my`.`table``，并且

`f(`my`)`会回来``my``

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:23:09.183

通常这是您的数据库驱动程序的功能，而不是您的数据库。MySQL 语句解析器使用反引号来正确标记您的语句，因此返回此类值的函数将毫无意义，因为它们将是字符串而不是表或列标记。

您的数据库驱动程序可能具有转义表名的功能，如果有，请使用它。否则，您将需要以某种方式推出自己的产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T18:16:23.413

```
concat('`',replace(your_identifier,'`','``'),'`') 
```

# gnuplot - 如何使用包含 f(x) +- df(x) 的一组数据对 a 进行加权拟合？

> ID：12918968
> 
> 赞同：3
> 
> 时间：2012-10-16T16:10:34.427
> 
> 标签：gnuplot, uncertainty

我有一个函数`f(x) = a/x`，我有一组包含`f(x) +- df(x)`和值的数据`x +- dx`。我如何告诉 gnuplot 进行加权拟合`a`？

我知道`fit`接受这个`using`术语，这适用于`df(x)`，但它不适用于`dx`。似乎 gnuplot 将我所遇到的错误视为我的函数 ( )`x`的整个 RHS 的错误。`a/x +- dx`

如何进行加权拟合`f(x) +- df(x) = a/(x +- dx)`以找到最佳值`a`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-21T09:26:20.703

从 5.0 版开始，gnuplot 明确规定要考虑自变量的不确定性

```
fit f(x) datafile using 1:2:3:4 xyerror 
```

使用“Orear 的有效方差法”。

（上面的命令需要格式为 的数据`x y dx dy`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:19:33.813

你正在拟合一个方程，如：

```
 z = a/(x +- dx) 
```

这可以等效地写为：

```
 z = a/x +- dz 
```

一个合适的dz。

我认为（如果我的微积分和统计数据正确），您可以通过以下方式从 x 和 dx 计算 dz：

```
dz = partial_z/partial_x*dx 
```

假设 dx 很小。

对于这种情况，这会产生：

```
dz = -a/x**2*dx 
```

所以现在您有一个包含 2 个变量 ( `z = a/x - (a/x**2)*dx`) 的函数，您希望它适合 1 个常数。当然，我可能是错的......我已经有一段时间没有玩过这些东西了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-20T18:21:27.757

这里一个简单的例子就足以证明 gnuplot 正在做你想做的事：

使用以下玩具模型数据构造一个平面文本文件 data.dat：

```
#f  df  x  dx
1  0.1  1  0.1
2  0.1  2  0.1
3  0.1  3  0.1
4  0.1  4  0.1
10 1.0  5  0.1 
```

仅仅通过观察数据，我们预计一个好的模型将是直接比例 f = x，在 x = 5，f = 10 处有一个明显的异常值。我们可以告诉 gnuplot 以两种非常不同的方式拟合这些数据。以下脚本 weightedFit.gp 演示了差异：

```
 # This file is called weightedFit.gp
    #
    # Gnuplot script file for demonstrating the difference between a 
    #  weighted least-squares fit and an unweighted fit, using mock data in "data.dat"
    #
    # columns in the .dat are 
    # 1:f, 2:d_f, 3: x, 4: d_x
    # x is the independent variable and f is the dependent variable

    # you have to play with the terminal settings based on your system
    # set term wxt
    #set term xterm

     set   autoscale                        # scale axes automatically
     unset log                              # remove any log-scaling
     unset label                            # remove any previous labels
     set xtic auto                          # set xtics automatically
     set ytic auto                          # set ytics automatically
     set key top left

    # change plot labels!
     set title "Weighted and Un-weighted fits"
     set xlabel "x"
     set ylabel "f(x)"
     #set key 0.01,100

    # start with these commented for auto-ranges, then zoom where you want!
    set xr [-0.5:5.5]
    #set yr [-50:550]

    #this allows you to access ASE values of var using var_err
     set fit errorvariables

    ## fit syntax is x:y:Delta_y column numbers from data.dat

    #Fit data as linear, allowing intercept to float
    f(x)=m*x+b
    fW(x)=mW*x+bW

    # Here's the important difference.  First fit with no uncertainty weights:
    fit f(x) 'data.dat' using 3:1 via m, b
    chi = sprintf("chiSq = %.3f", FIT_WSSR/FIT_NDF)
    t = sprintf("f = %.5f x + %.5f", m, b)
    errors = sprintf("Delta_m = %.5f, Delta_b = %.5f", m_err, b_err)

    # Now, weighted fit by properly accounting for uncertainty on each data point:
    fit fW(x) 'data.dat' using 3:1:2 via mW, bW
    chiW = sprintf("chiSqW = %.3f", FIT_WSSR/FIT_NDF)
    tW = sprintf("fW = %.5f x + %.5f", mW, bW)
    errorsW = sprintf("Delta_mW = %.5f, Delta_bW = %.5f", mW_err, bW_err)

    # Pretty up the plot
    set label 1 errors at 0,8
    set label 2 chi at 0,7
    set label 3 errorsW at 0,5
    set label 4 chiW at 0,4

    # Save fit results to disk
    save var 'fit_params'

    ## plot using x:y:Delta_x:Delta_y column numbers from data.dat

    plot "data.dat" using 3:1:4:2 with xyerrorbars title 'Measured f vs. x', \
         f(x) title t, \
         fW(x) title tW

    set term jpeg
    set output 'weightedFit.jpg'
    replot
    set term wxt 
```

生成的绘图 weightedFit.jpg 讲述了这个故事：绿色拟合没有考虑数据点的不确定性，并且对于数据来说是一个糟糕的模型。蓝色拟合说明了异常值中的较大不确定性，并正确拟合了比例模型，获得斜率 1.02 +/- 0.13 和截距 -0.05 +/- 0.35。

因为我今天刚加入，所以我缺乏发布图片所需的“10 名声望”，所以你只需要自己运行脚本来查看是否合适。在工作目录中拥有脚本和数据文件后，请执行以下操作：

gnuplot> 加载“weightedFit.gp”

您的 fit.log 应如下所示：

```
*******************************************************************************
Thu Aug 20 14:09:57 2015

FIT:    data read from 'data.dat' using 3:1
        format = x:z
        x range restricted to [-0.500000 : 5.50000]
        #datapoints = 5
        residuals are weighted equally (unit weight)

function used for fitting: f(x)
    f(x)=m*x+b
fitted parameters initialized with current variable values

iter      chisq       delta/lim  lambda   m             b            
   0 1.0000000000e+01  0.00e+00 4.90e+00  2.000000e+00 -2.000000e+00
   1 1.0000000000e+01  0.00e+00 4.90e+02  2.000000e+00 -2.000000e+00

After 1 iterations the fit converged.
final sum of squares of residuals : 10
rel. change during last iteration : 0

degrees of freedom    (FIT_NDF)                        : 3
rms of residuals      (FIT_STDFIT) = sqrt(WSSR/ndf)    : 1.82574
variance of residuals (reduced chisquare) = WSSR/ndf   : 3.33333

Final set of parameters            Asymptotic Standard Error
=======================            ==========================
m               = 2                +/- 0.5774       (28.87%)
b               = -2               +/- 1.915        (95.74%)

correlation matrix of the fit parameters:
                m      b      
m               1.000 
b              -0.905  1.000 

*******************************************************************************
Thu Aug 20 14:09:57 2015

FIT:    data read from 'data.dat' using 3:1:2
        format = x:z:s
        x range restricted to [-0.500000 : 5.50000]
        #datapoints = 5
function used for fitting: fW(x)
    fW(x)=mW*x+bW
fitted parameters initialized with current variable values

iter      chisq       delta/lim  lambda   mW            bW           
   0 2.4630541872e+01  0.00e+00 1.78e+01  1.024631e+00 -4.926108e-02
   1 2.4630541872e+01  0.00e+00 1.78e+02  1.024631e+00 -4.926108e-02

After 1 iterations the fit converged.
final sum of squares of residuals : 24.6305
rel. change during last iteration : 0

degrees of freedom    (FIT_NDF)                        : 3
rms of residuals      (FIT_STDFIT) = sqrt(WSSR/ndf)    : 2.86534
variance of residuals (reduced chisquare) = WSSR/ndf   : 8.21018
p-value of the Chisq distribution (FIT_P)              : 1.84454e-005

Final set of parameters            Asymptotic Standard Error
=======================            ==========================
mW              = 1.02463          +/- 0.1274       (12.43%)
bW              = -0.0492611       +/- 0.3498       (710%)

correlation matrix of the fit parameters:
                mW     bW     
mW              1.000 
bW             -0.912  1.000 
```

有关文档，请参阅[http://gnuplot.info/](http://gnuplot.info/)。干杯!

# php - 用 PHP 解析 XML。重复的节点名称

> ID：12918969
> 
> 赞同：4
> 
> 时间：2012-10-16T16:10:40.313
> 
> 标签：php, xml

我正在使用 simplexml_load_file() 函数解析 xml 文件。当我遇到两个具有相同名称的节点时，我遇到了问题。我的 XML 文件结构是：

```
<company>
    <name>Test Co</name>
    <link href="link1" rel="self"/>
    <link href="link2" rel="www"/>
</company> 
```

这是代码：

```
$parametrs = simplexml_load_file("my.xml");
foreach ($parametrs->company as $param ) {
    echo $param->name;    
} 
```

我怎样才能从每家公司回显link2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:23:44.960

```
<?php
$xml = '<?xml version="1.0" ?>
<company>
<name>Test Co</name>
<link href="link1" rel="self"/>
<link href="link2" rel="www"/>
</company>';

$parameters = new SimpleXmlElement($xml);

echo (string)$parameters->link[1]['href'];  // note you must cast here! 
```

这将输出“link2”（周围没有引号）。

此外，您可能需要预先检查这些元素是否存在，但我将把它留给您，因为它超出了问题的范围；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:23:20.730

您可以使用 xPath：

```
 <?php
$sxml = simplexml_load_string('<company>
<name>Test Co</name>
<link href="link1" rel="self"/>
<link href="link2" rel="www"/>
</company>');

$link = $sxml->xPath('//link[@rel="www"]');

var_dump($link); 
```

[http://codepad.viper-7.com/C4VU9q](http://codepad.viper-7.com/C4VU9q)

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:29:01.947

`<company>`当您将 XML 文件加载到 SimpleXML 中时，在您的情况下，返回的对象代表 XML 根节点。

所以，你只需要获取第二个链接标签，并获取它的`href`.

```
$parametrs = simplexml_load_file("my.xml");
// you need to case here, as this is actually a SimpleXML element, not a string
echo (string)$parametrs->link[1]['href']; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-16T16:28:59.113

你可以试试我的课它使用**简单的xml**

这是代码

```
<?php
  class xml_grabber
        {
            private $xml_file       = '' ;
            private $xml_link       = '' ;
            private $xml_dom        = '' ;
            private $xml_type       = '' ;
            private $xml_content    = '' ;
            private $xml_errors     = array() ;
            public  $xml_stack      = 0  ;
            public  $only_text      = 0 ;

            private $xml_connect_count  = 0 ;

            public function __construct($link_file_com = '')
                   {
                       if(!$link_file_com)
                            {
                              $this->xml_errors['construct'] = 'No Xml In Construct' ;
                              return false;
                            }
                       elseif(!function_exists('simplexml_load_file') || !function_exists('simplexml_load_string') || !function_exists('simplexml_import_dom'))
                            {
                              $this->xml_errors['functions'] = 'simple xml function not exists' ;
                              return false;
                            }
                       else
                            {
                             $this->set_xml(trim($link_file_com)) ;
                            }
                   }

             public function only_text( $val = 0 )
                  {
                    $this->only_text = $val ;
                  }

             public function set_xml($xml)
                   {
                      if(isset($xml{3}))
                        {
                           if(file_exists($xml))
                              {
                                $this->xml_type = 1 ;
                                $this->xml_file = $xml ;
                              }
                          elseif(filter_var($xml, FILTER_VALIDATE_URL))
                              {
                                $this->xml_type = 2 ;
                                $this->xml_link = $xml ;
                              }
                          else
                              {
                                $this->xml_type = 3 ;
                                $this->xml_dom  = $xml ;
                              }
                        }
                      else
                        {
                          $this->xml_type = '' ;
                        }
                   }

             public function get_xml()
                   {
                      if($this->xml_type == '')
                            {
                              return false ;
                            }
                      elseif($this->xml_type == 1)
                            {
                              return $this->xml_file ;
                            }
                      elseif($this->xml_type == 2)
                            {
                              return $this->xml_link ;
                            }
                      elseif($this->xml_type == 3)
                            {
                              return $this->xml_dom ;
                            }
                   }

             public function set_columns($new_columns= array())
                   {
                      return $this->xml_columns = $new_columns ;
                   }
             public function get_columns()
                   {
                     return $this->xml_columns ;
                   }

             public function load()
                   {
                     if($this->xml_type == '')
                            {
                              $this->xml_errors['loader'] = 'Unknown XML type' ;
                              return false;
                            }
                      elseif($this->xml_type == 1)
                            {
                              $xml = simplexml_load_file($this->xml_file,null, LIBXML_NOCDATA) ;
                              $this->xml_content = $xml ;
                            }
                      elseif($this->xml_type == 2)
                            {
                               $con = $this->connect($this->xml_link);
                               $this->xml_content = simplexml_load_string(trim($con),null, LIBXML_NOCDATA) ;
                            }
                      elseif($this->xml_type == 3)
                            {
                              return $this->xml_dom ;
                            }
                   }

             public function fetch($return = 'array')
                    {
                        $xml  = array() ;
                        if($this->xml_content)
                            {
                               print_r ( $this->get_attribute($this->xml_content)) ;
                            }
                    }

            public function get_attribute($object)
                    {
                       if( (is_array( $object ) || is_object( $object )) && count( $object ) > 0 )
                            {
                                  foreach( $object as $k => $val )
                                      {
                                          $count = count( $val ) ;

                                          $cou   = count( $object->$k ) ;

                                          if( $count > 0 and is_array( $val ) || is_object( $val ) )
                                              {
                                                if( $cou > 1 )
                                                     {
                                                       $result['item'][] = $this->get_attribute( $val ) ;
                                                     }
                                                else
                                                     {
                                                       $result[$k] = $this->get_attribute( $val ) ;
                                                     }
                                              }
                                          else
                                              {
                                                $attr = $val->attributes() ;

                                                if( count( $attr ) > 0 )
                                                      {
                                                        $var  ;
                                                        foreach( $attr as $kk => $vv )
                                                              {
                                                                $var[$kk] = (string) $vv ;
                                                              }
                                                        if( $cou > 1 )
                                                             {
                                                               $result[$k][] =  $var ;
                                                             }
                                                        else
                                                             {
                                                               $result[$k] =  $var ;
                                                             }
                                                      }
                                                else
                                                      {

                                                        $result[$k] =  (string) $val ;
                                                      }
                                              }
                                      }
                            }
                       else
                            {
                              $result[] =  $object ;
                            }

                       return $result ;
                    }

/*
             public function fetch($return = 'array')
                    {

                        if($this->xml_content)
                            {
                               $rss_feed = $this->xml_content ;
                               $rss_title = (string) $rss_feed->channel->title ;
                               $rss_link  = (string) $rss_feed->channel->link  ;
                               $rss_cat   = (string) $rss_feed->channel->category  ;
                               $rss_image = (string) $rss_feed->channel->image->url  ;

                               $rss_summary =
                                            array
                                            (
                                              'info' =>
                                                        array(
                                                                'title'=>$rss_title ,
                                                                'link'=>$rss_link ,
                                                                'cat'=>$rss_cat ,
                                                                'image'=>$rss_image
                                                                ) ,
                                              'item' =>  array()

                                            ) ;

                            if(is_array($rss_feed->channel) or is_object($rss_feed->channel))
                                {
                                      if(is_array($rss_feed->channel->item) or is_object($rss_feed->channel->item))
                                         {
                                             foreach($rss_feed->channel->item as $item)
                                                     {
                                                         if($item->enclosure && $item->enclosure->attributes())
                                                              {
                                                                  $image0 = $item->enclosure->attributes() ;
                                                                  $image_url = $image0 ['url'] ;
                                                              }

                                                         $result = array() ;
                                                         foreach($item as $k=>$v)
                                                                {
                                                                      $result[strtolower($k)] = strip_tags((string) $v) ;
                                                                }
                                                         if(isset($image_url{1}))
                                                            {
                                                              $result['image0'] = $image_url ;
                                                            }
                                                        $rss_summary['item'][] = $result ;
                                                     }
                                         }
                                      elseif(is_array($rss_feed->channel->entry) or is_object($rss_feed->channel->entry))
                                         {
                                             foreach($rss_feed->channel->entry as $item)
                                                     {
                                                         if($item->enclosure && $item->enclosure->attributes())
                                                              {
                                                                  $image0 = $item->enclosure->attributes() ;
                                                                  $image_url = $image0 ['url'] ;
                                                              }
                                                         $result = array() ;
                                                         foreach($item as $k=>$v)
                                                                {
                                                                      $result[strtolower($k)] = (string) $v ;
                                                                }
                                                         if(isset($image_url{1}))
                                                            {
                                                              $result['image0'] = $image_url ;
                                                            }
                                                        $rss_summary['item'][] = $result ;
                                                     }
                                         }
                              }
                            else
                              {
                                 if(is_array($rss_feed->item) or is_object($rss_feed->item))
                                         {
                                             foreach($rss_feed->item as $item)
                                                     {
                                                         if($item->enclosure && $item->enclosure->attributes())
                                                              {
                                                                  $image0 = $item->enclosure->attributes() ;
                                                                  $image_url = $image0 ['url'] ;
                                                              }
                                                         $result = array() ;
                                                         foreach($item as $k=>$v)
                                                                {
                                                                      $result[strtolower($k)] = (string) $v ;
                                                                }
                                                         if(isset($image_url{1}))
                                                            {
                                                              $result['image0'] = $image_url ;
                                                            }
                                                        $rss_summary['item'][] = $result ;
                                                     }
                                         }
                                      elseif(is_array($rss_feed->entry) or is_object($rss_feed->entry))
                                         {
                                             foreach($rss_feed->entry as $item)
                                                     {
                                                         if($item->enclosure && $item->enclosure->attributes())
                                                              {
                                                                  $image0 = $item->enclosure->attributes() ;
                                                                  $image_url = $image0 ['url'] ;
                                                              }
                                                         $result = array() ;
                                                         foreach($item as $k=>$v)
                                                                {
                                                                      $result[strtolower($k)] = (string) $v ;
                                                                }
                                                         if(isset($image_url{1}))
                                                            {
                                                              $result['image0'] = $image_url ;
                                                            }
                                                        $rss_summary['item'][] = $result ;
                                                     }
                                         }
                              }

                                if($return == 'json')
                                       {
                                         return json_encode($rss_summary) ;
                                       }
                                elseif($return == 'serialize')
                                       {
                                         return serialize($rss_summary) ;
                                       }
                                elseif($return == 'xml')
                                       {
                                         return xml_encode($rss_summary) ;
                                       }
                                else
                                       {
                                         return $rss_summary ;
                                       }

                            }
                        else
                            {
                              $this->xml_errors['fetch'] = 'No Xml Content' ;
                            }
                    }
*/

             protected function connect($link,$post='')
                    {
                      if(!filter_var($link, FILTER_VALIDATE_URL))
                              {
                                $this->xml_errors['connect'] = 'Not Vaild Link To Get data' ;
                                return false ;
                              }
                      if(function_exists('curl_init'))
                           {
                             $cu = curl_init();
                             curl_setopt($cu,CURLOPT_URL,$link);
                             curl_setopt($cu,CURLOPT_AUTOREFERER,true);

                             if($post != '')
                                {
                                    curl_setopt($cu,CURLOPT_HEADER, 1);
                                    curl_setopt($cu,CURLOPT_POST,3);
                                    curl_setopt($cu,CURLOPT_POSTFIELDS,$post);
                                }

                                 curl_setopt($cu,CURLOPT_USERAGENT,$_SERVER['HTTP_USER_AGENT']);
                                 curl_setopt($cu,CURLOPT_SSL_VERIFYPEER,false);
                                 curl_setopt($cu,CURLOPT_SSL_VERIFYHOST,false);
                                 curl_setopt($cu,CURLOPT_RETURNTRANSFER,true);

                             $co = curl_exec($cu) ;
                               if($co)
                                    {
                                        $con = $co ;
                                    }
                               else
                                    {
                                      $this->xml_errors['connect'] = 'No Result From Curl' ;
                                      $this->xml_errors['curl']  = curl_error($cu);
                                    }
                              curl_close($cu) ;
                           }

                    if(!$con and function_exists('ini_get'))
                        {

                             $url_fopen = ini_get('allow_url_fopen') ;

                             if($url_fopen == 0)
                                {
                                   if(function_exists('ini_set'))
                                        {
                                          ini_set('allow_url_fopen', 1) ;
                                        }
                                   $check_fopen = 1 ;
                                }
                             else
                                {
                                   $check_fopen = 0 ;
                                }

                             if($check_fopen == 1)
                                {
                                  $url_fopen = ini_get('allow_url_fopen') ;
                                }

                             if($url_fopen == 1)
                                {

                                  if(function_exists('file_get_contents') and !$con)
                                   {
                                        $con = @file_get_contents($link) ;
                                        if($con)
                                            {
                                              $con ;
                                            }
                                       else
                                            {
                                              $this->xml_errors['connect'] = 'No Result From file_get_contents' ;
                                            }
                                   }

                              elseif(function_exists('readfile') and !$con)
                                   {
                                        $con = @readfile($link);
                                        if($con)
                                            {
                                              $con ;
                                            }
                                       else
                                            {
                                              $this->xml_errors['connect'] = 'No Result From readfile' ;
                                            }
                                   }

                              elseif(function_exists('file') and !$con)
                                   {
                                        $con = @file($link)  ;
                                        if($con)
                                            {
                                               $con ;
                                            }
                                       else
                                            {
                                              $this->xml_errors['connect'] = 'No Result From file' ;
                                            }
                                   }

                                }
                        }

                      if(!$con)
                           {
                             $this->xml_errors['connect'] = 'Curl And Allow Url Fopen Disabled On Server' ;
                             return false ;
                           }
                      elseif(stripos($con,'DDoS protection by CloudFlare') and $this->xml_connect_count < 1)
                           {

                                echo '<h2> Curl Answer No : '.$this->xml_connect_count.' </h2>'.$con.'<br />';
                                preg_match('/'.preg_quote('.val(').'(.*?)'.preg_quote(');').'/is', $con, $match);
                $matc = str_replace('+', " + ", $match[1]) ;
                $matc = str_replace('*', " * ", $matc) ;
                $post = eval ("return $matc ;") ;
                $html=new DOMDocument();
                $html->loadHTML($con) ;
                $xpath = new DOMXPath($html);
                $tags = $xpath->query('//input[@type="hidden"]');
                $fields = array();
                foreach ($tags as $tag) {
                  $fields[trim($tag->getAttribute('name'))] = trim($tag->getAttribute('value')) ;
                }
                $post_data = 'act=jschl&jschl_vc='.$fields['jschl_vc'].'&jschl_answer='.$post ;
                 echo '<h2> I will post this info to curl </h2>'.$post_data.'<br /> ' ;
                $this->xml_connect_count = $this->xml_connect_count + 1 ;
                sleep(5) ;
                $con = $this->connect($link , $post_data) ;
                echo '<h2> Curl Answer No : 1 </h2>'. $con.'<br />' ;
                preg_match('/^Set-Cookie: (.*?);/m', $con, $m);
                echo '<h2> Cookie from Result </h2>' ;var_dump(parse_url($m[1]));
                           }
                      else
                           {
                             return $con ;
                           }
                    }

             public function get_error()
                    {
                       return $this->xml_errors ;
                    }

        }

?> 
```

这是如何使用它

```
<?php
    $rss = new xml_grabber('xml.xml') ;
         $rss -> load() ;
    $x = $rss -> fetch() ;

    print_r ( $x ) ;   
?> 
```

例子

```
<?xml version="1.0" encoding="Windows-1256"?>
  <rss version="2.0">
    <channel>
           <info name="xml_reader" vesrion="1.0" author="sec.php"></info>
           <title> Xml By sec.php </title>
           <company>
              <name>Test Co</name>
              <link href="link1" rel="self"/>
              <link href="link2" rel="www"/>
           </company>
           <company>
              <name>Test Co</name>
              <link href="link1" rel="self"/>
              <link href="link2" rel="www"/>
           </company>
           <company>
              <name>Test Co</name>
              <link href="link1" rel="self"/>
              <link href="link2" rel="www"/>
           </company>
    </channel>
  </rss> 
```

结果数组（[频道] => 数组（[信息] => 数组（[名称] => xml_reader [vesrion] => 1.0 [作者] => sec.php）

```
 [title] =>  Xml By sec.php 
        [item] => Array
            (
                [0] => Array
                    (
                        [name] => Test Co
                        [link] => Array
                            (
                                [0] => Array
                                    (
                                        [href] => link1
                                        [rel] => self
                                    )

                                [1] => Array
                                    (
                                        [href] => link2
                                        [rel] => www
                                    )

                            )

                    )

                [1] => Array
                    (
                        [name] => Test Co
                        [link] => Array
                            (
                                [0] => Array
                                    (
                                        [href] => link1
                                        [rel] => self
                                    )

                                [1] => Array
                                    (
                                        [href] => link2
                                        [rel] => www
                                    )

                            )

                    )

                [2] => Array
                    (
                        [name] => Test Co
                        [link] => Array
                            (
                                [0] => Array
                                    (
                                        [href] => link1
                                        [rel] => self
                                    )

                                [1] => Array
                                    (
                                        [href] => link2
                                        [rel] => www
                                    )

                            )

                    )

            )

    ) 
```

)

# c# - TYPO3 到 Joomla 的现有数据图？

> ID：12918971
> 
> 赞同：-2
> 
> 时间：2012-10-16T16:10:47.123
> 
> 标签：c#, mysql, joomla, typo3

我正在寻找可以在 TYPO3 和 Joomla 之间迁移数据的现有数据映射和/或 MySQL 脚本。显然，两个 CMS 都使用 MySQL，这很好，但我想知道是否已经有一个文档/脚本从 TYPO3 数据库中获取元素并将它们放入 Joomla 数据库中。

我打算用 C# 编写我自己的迁移程序，所以如果有人有一些代码片段，它也会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:33:56.227

忘记这一点，有太多的差异使得它成为可能...... TYPO3 实例通常由许多不同的扩展 + 页面 + 内容元素等构建。虽然当你添加新的时 Joomla 的初始结构非常简单（据我所知）插件它以许多不同的方式变化。*如果有人在他的*TYPO3 和*他的*Joomla之间写了这样的“映射器”，那么结论很简单，很可能在任何其他组合中都不起作用。

TYPO3 中有多少页？如果少于 100，我不会浪费时间在任何程序上，只需在常用编辑模式下复制/粘贴即可。

如果更多，我认为这将是编写 TYPO3 扩展（PHP）的最佳解决方案，它将使用它的解析器、配置等从某个页面获取所有必需的数据，并将其转换为具有结构的 JSON（甚至是纯 SQL 插入语句）在 Joomla 中可以理解。请记住，数据库中的许多元素可能与客户端中的许多元素完全不同。最好的例子是内部链接，它们在数据库中被保存为它们指向的页面的 ID。您需要在 TYPO3 端解决它，或者您需要了解关系是如何在 TYPO3 的数据库中构建的，以便在您的 C# 应用程序中执行相同的任务。

# asp.net-mvc - 对在客户端创建的记录使用内置验证

> ID：12918978
> 
> 赞同：1
> 
> 时间：2012-10-16T16:11:11.137
> 
> 标签：asp.net-mvc, jquery-validate, asp.net-mvc-4, validation

我有一个 ASP.NET MVC4 应用程序，我允许用户使用 javascript 模板向客户端上的许多记录添加 1。它工作正常并且使用正确的命名约定，模型绑定正确地将发布数据转换为操作方法所需的对象集合。

我的问题是，有没有办法使用内置的 MVC 验证来验证使用这种方法添加的记录。我已经向我的模型添加了数据注释属性，但是因为我正在为客户端上的每条新记录生成 html，所以我无法使用通常使流程正常工作的 html 帮助程序。

显然，我可以自己添加客户端验证并让数据注释在服务器上验证，但我想知道是否有办法利用这种方法的内置验证堆栈，这样我就可以维护我的所有验证服务器上的逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:07:43.610

例如： View 有两种形式：form1 和 form2。</p>

form1 有两部分。

第一部分： 有两个文本框和一个创建按钮和一个保存按钮。

第二部分：有一个。

因此，当我们填写两个文本框并按下创建按钮时，如果没有通过验证，则显示错误消息。如果通过验证，则将值插入到 form2 中，并将值插入到 form2 中。

[HttpPost] Action Create 有一个参数 List 模型。

当我们按下 Save 按钮时，会将 form2 的值映射到 List 模型的控制器。

模型

```
public class HomeModel
{
    [Required]
    public string Name { get; set; }

    [Required]
    public string Number { get; set; }
} 
```

控制器：

```
 [HttpPost]
    public ActionResult Create(List<HomeModel> models)
    {
        // TODO: Add insert logic here
    } 
```

查看：</p>

```
@model MvcApplication1.Models.HomeModel
@{
   ViewBag.Title = "Create";
 }

<h2>Create</h2>

@using (Html.BeginForm("Create", "Home", FormMethod.Post, new { id = "form1" }))
{
@Html.ValidationSummary(true)

<fieldset>
    <legend>HomeModel</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Name)
        @Html.ValidationMessageFor(model => model.Name)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Number)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Number)
        @Html.ValidationMessageFor(model => model.Number)
    </div>

    <p>
        <input type="submit" value="Create" id="btnCreate" />
        <input type="button" value="Save" id="btnSave" />
    </p>
</fieldset>
<table id="tb"></table>
}

<div id="FormInfo" style="display: none;">
    <form action="/Home/Create" id="form2" method="post"></form>
</div>

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script type="text/javascript">
        $(function () {
            $("#form1").submit(function () {
                var ErrorLength = $(".field-validation-error").length;
                if (ErrorLength <= 0) {
                    var nameValue = $("#Name").val();
                    var numberValue = $("#Number").val();
                    InsertToForm2(nameValue, numberValue);
                    InsertToTable(nameValue, numberValue);
                }
                return false;
            });

            $("#btnSave").click(function () {
                $("#form2").submit();
            });
        });

        function InsertToForm2(nameValue, numberValue) {
            var inputCount = $("#form2 input").length / 2;
            var combineHTML = "<input type='text' name='models[" + inputCount + "].Name' value='" + nameValue + "' /> ";
            combineHTML += "<input type='text' name='models[" + inputCount + "].Number' value='" + numberValue + "'/> ";
            $("#form2").append(combineHTML);
        }

        function InsertToTable(nameValue, numberValue) {
            var combineHTML = "<tr><td>" + nameValue + "</td><td>" + numberValue + "</td></tr>";
            $("#tb").append(combineHTML);
        }
    </script>
} 
```

[示例下载](http://www.mediafire.com/?8mekwbf836c8kk4)

# jquery - jQuery - 将类添加到下一个元素并在一段时间后将其从当前元素中删除

> ID：12918983
> 
> 赞同：2
> 
> 时间：2012-10-16T16:11:23.617
> 
> 标签：jquery

我需要做的“活动”类将在 3 秒后从第一个列表项移动到下一个......在那里停留 3 秒然后移动到下一个，再过 3 秒移动到下一个......然后下一个，然后...

当谈到最后一个 (list_4) hten 它应该从第一个 li 重新开始

我需要......如果list_3有活动类，具有相同编号的类“块”应该是可见的，其他“块”隐藏或不显示（在这种情况下是block_3）

```
<ul>
 <li class="list_1 active"><a href="#">some text</a>
 <li class="list_2"><a href="#">some text</a>
 <li class="list_3"><a href="#">some text</a>
 <li class="list_4"><a href="#">some text</a>
</ul>
<div>
 <span class="block_1" style="display:block">some content</span>
 <span class="block_2" style="display:none">some content</span>
 <span class="block_3" style="display:none">some content</span>
 <span class="block_4" style="display:none">some content</span>
</div> 
```

我还想暂停 ul:hover 上的“跳跃”，当鼠标熄灭时“跳跃”应该继续

是否有任何不复杂的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T16:13:12.140

以下代码可能会对您有所帮助：[jsfiddle](http://jsfiddle.net/535u2/)

```
 setInterval(function(){

           var active = $(".active").removeClass('active');
          if(active.next() && active.next().length){
                active .next().addClass('active');
    }
    else{
      active.siblings(":first").addClass('active');
    }

  }, 100);​ 
```

# nhibernate - NHibernate 与映射视图的一对一关系

> ID：12918986
> 
> 赞同：0
> 
> 时间：2012-10-16T16:11:28.487
> 
> 标签：nhibernate, view, mapping

我有一个映射视图，我想在另一个映射中引用它。

映射视图：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class name="Model.TagBE, Model" table="vw_CurrentTag" lazy="true" schema="dbo">
    <id name="Id" column="TAG_HISTORY_ID" type="Guid" 
         unsaved-value="00000000-0000-0000-0000-000000000000">
    </id>

    <property name="Tag" column="TAG"/>
    <property name="TagStatus" column="TAG_STATUS"/>
    <property name="Created" column="CREATE_DATE"/>

    <many-to-one name="Defect" class="Model.DefectBE, Model" fetch="join"
         not-found="ignore" cascade="none" column="DEFECT_ID" />
    <many-to-one name="CreatedBy" class="Model.UserBE, Model" lazy="false" 
         fetch="join" cascade="none" column="CREATE_USER_ID" />
  </class>
</hibernate-mapping> 
```

我想在这个映射中使用它，以获得一个 TagBE：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class name="DefectBE, Model" lazy="true" table="DEFECT" schema="dbo">
    <id name="Id" column="DEFECT_ID" type="Guid">
        <generator class="assigned" />
    </id>
      <property name="Sn" column="SERIAL_NUMBER" />
      <property name="Description" column="PART_DESCRIPTION" />

      <many-to-one name="System" class="Model.SystemBE, Model" fetch="join"  
           cascade="none" column="SYSTEM_ID" not-found="ignore"/
  </class>
</hibernate-mapping> 
```

为了举例，上面的映射已经被删减了（删除了一堆与手头的问题无关的属性和一对一的关系。

以“系统”名称显示的多对一按预期工作，它只是另一个映射表，而不是视图。我的问题是，当我尝试映射视图“vw_CurrentTag”时，只有当我专门使用 ISession 和 ICriteria 来获取 TagBE 类的特定内容时，我才能访问数据。

当我尝试在 DefectBE 映射中使用以下内容时，它只会为 TagBE 提供 null：

```
<many-to-one name="Tag" class="Model.TagBE, Model" fetch="join" cascade="none" 
     column="DEFECT_ID" not-found="ignore"/> 
```

我也尝试过使用一对一，但是当 TagBE 对象是 DefectBE 对象的一部分时，我总是得到空值。

如果不可能，我总是可以使用只有 1 个条目的包。

该视图只是对单个表的查询，以基于其他列返回唯一的 Tag 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:16:32.590

多对一“标签”使用表 DEFECT 上的列 DEFECT_ID 来匹配视图 TAG_HISTORY_ID 的主键，该主键从不相等。

您可能想要的是 Defect 类上的一对一映射，它指向视图上的 DEFECT_ID。

`<one-to-one name="Tag" class="Model.TagBE, Model" fetch="join" property-ref="Defect" foreign-key="none"/>`

# zend-framework2 - 在 Zend Framework 2 中的表单提交按钮中使用图像类型

> ID：12918987
> 
> 赞同：0
> 
> 时间：2012-10-16T16:11:28.907
> 
> 标签：zend-framework2

我想使用带有图像类型的表单提交按钮。这在 Zend Framework 2 中怎么可能？

我有正常提交按钮的代码：

```
$this->add(array(
    'name' => 'send',
    'type'  => 'Zend\Form\Element\Submit',
    'attributes' => array(
        'type' => 'submit',
        'value' => 'Send',
    ),
)); 
```

我尝试将类型更改为“Zend\Form\Element\Image”或将类型设置为“图像”，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T05:55:18.573

在表格类

```
$this->add(array(
        'name' => 'submit',
        'attributes' => array(
            'type'  => 'image',
            'src'   => './images/signin.png',
            'height'=> '28',
            'width' => '98',
            'border'=> '0',
            'alt'   => 'SIGN IN'
        ),
    )); 
```

在 .phtml 中

```
echo $this->formRow($form->get('submit')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:14:56.153

Zend\Form\Element\Image 需要 'src' 属性，用法如下：

```
$form = new \Zend\Form\Form();
$form->add(array(
    'name' => 'send',
    'type'  => 'Zend\Form\Element\Image',
    'attributes' => array(
        'value' => 'Send',
        'src' => 'abc.jpg',
    ),
));

$helper = new Zend\Form\View\Helper\FormImage();
echo $helper($form->get('send'));
//output <input type="image" name="send" src="abc.jpg"> 
```

# excel - 如何将多个文本文件打开到一个 Excel 工作表中，但每个文本文件跳过第 1 行？

> ID：12918992
> 
> 赞同：2
> 
> 时间：2012-10-16T16:11:40.010
> 
> 标签：excel, file, vba, text, import

使用下面的代码，我可以将文件夹中的所有文本文件打开到一张 Excel 表中。每个文件都有标题，我不知道如何让它跳过每个文本文件的第一行。

```
Dim fso As FileSystemObject
Dim folder As folder
Dim file As file
Dim FileText As TextStream
Dim TextLine As String
Dim Items() As String
Dim i As Long
Dim cl As Range

' Get a FileSystem object
Set fso = New FileSystemObject
' get the directory you want
Set folder = fso.GetFolder("\\mydirectoryfolderhere")
' set the starting point to write the data to
Set cl = ActiveSheet.Cells(1, 1)
' Loop thru all files in the folder
For Each file In folder.Files
' Open the file
Set FileText = file.OpenAsTextStream(ForReading)

' Read the file one line at a time
Do While Not FileText.AtEndOfStream
TextLine = FileText.ReadLine
' Parse the line into | delimited pieces
Items = Split(TextLine, "|")
' Put data on one row in active sheet
For i = 0 To UBound(Items)
cl.Offset(1, i).Value = Items(i)
Next
'Move to next row
Set cl = cl.Offset(1, 0)
Loop

' Clean up
FileText.Close
Next file

Set FileText = Nothing
Set file = Nothing
Set folder = Nothing
Set fso = Nothing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:52:12.600

像这样的东西（未经测试）

```
Dim firstline as boolean
'.....
For Each file In folder.Files
Set FileText = file.OpenAsTextStream(ForReading)
firstline=True

Do While Not FileText.AtEndOfStream
    TextLine = FileText.ReadLine

    If Not firstline then

        Items = Split(TextLine, "|")
        For i = 0 To UBound(Items)
            cl.Offset(1, i).Value = Items(i)
        Next
        Set cl = cl.Offset(1, 0)

    End If

    firstline=False
Loop

' Clean up
FileText.Close
Next file
'.... 
```

# mysql - 将数据库模式与 MySQL 工作台进行比较

> ID：12918993
> 
> 赞同：1
> 
> 时间：2012-10-16T16:11:51.120
> 
> 标签：mysql, mysql-workbench

我在我的 Windows 7 PC 上使用 MySQL Workbench，并且有一个保存的数据库模型。

我在 Linux 服务器上运行 MySQL。

使用 MySQL Workbench 的“管理数据库连接”，我能够连接到在 Linux 服务器上运行的 MySQL。

使用 MySQL Workbench 社区版，我可以将 MySQL Workbench 模型架构与在 Linux 服务器上运行的 MySQL 数据库架构进行比较吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:17:27.310

如果我正确理解您，您想要的是对实时数据库进行逆向工程。这是有关如何在 mysql 工作台中执行此操作的手动条目。

[http://dev.mysql.com/doc/workbench/en/wb-reverse-engineer-live.html](http://dev.mysql.com/doc/workbench/en/wb-reverse-engineer-live.html)