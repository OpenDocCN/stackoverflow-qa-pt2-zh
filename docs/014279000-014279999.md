# StackOverflow 问答 14279000-14279999

# localization - 如何避免 liferay 中的语言更改以触发最后一个 actionReques

> ID：14279004
> 
> 赞同：0
> 
> 时间：2013-01-11T13:16:36.023
> 
> 标签：localization, liferay, portlet

从语言 portlet 更改语言时，用户将被重定向到最后一个 URL。如果 URL 对应于 actionRequest，则第二次触发该操作。

我在 liferay 6.1 GA2 中尝试了以下简单代码，经典主题

视图.jsp：

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>
<portlet:defineObjects />
<portlet:actionURL name="myProcessAction" var="myProcessActionURL" />
<a href="<%= myProcessActionURL %>">my process action</a>
<form action="<%= myProcessActionURL %>" method="post">
    <input type="submit" />
</form> 
```

testportlet.java：

```
public class TestPortlet extends MVCPortlet {
    public void myProcessAction(ActionRequest actionRequest,
            ActionResponse actionResponse) throws IOException, PortletException {
        _log.info("processing action");
    }
    private static Log _log = LogFactoryUtil.getLog("TestPortlet");
} 
```

我将我的测试 portlet 以及语言 portlet 添加到一个新页面。

提交表格 -> 日志显示“处理动作”切换语言 -> 日志再次显示“处理动作”！

最好的问候， 阿兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:55:12.233

您可以通过包含“redirect”参数来指定页面重定向的位置。例如：

```
<input type="hidden" name="<portlet:namespace />redirect" value="/" /> 
```

如果请求成功，`MVCPortlet`该类将自动看到此参数并重定向到它。

# android - android 4.0 标签滑动崩溃

> ID：14279006
> 
> 赞同：2
> 
> 时间：2013-01-11T13:16:41.140
> 
> 标签：android, user-interface, tabs, swipe

我添加了一个新活动并将其设置为导航类型中的标签滑动。到目前为止一切顺利，然后当我滑动到另一个选项卡时，它崩溃并给我这个错误（但它至少向我显示了布局）：

```
01-11 15:01:45.342: D/AndroidRuntime(29447): Shutting down VM
01-11 15:01:45.342: W/dalvikvm(29447): threadid=1: thread exiting with uncaught exception (group=0x4208a930)
01-11 15:01:45.350: E/AndroidRuntime(29447): FATAL EXCEPTION: main
01-11 15:01:45.350: E/AndroidRuntime(29447): java.lang.NullPointerException
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.support.v4.app.BackStackRecord.doAddOp(BackStackRecord.java:352)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.support.v4.app.BackStackRecord.add(BackStackRecord.java:347)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.support.v4.app.FragmentPagerAdapter.instantiateItem(FragmentPagerAdapter.java:99)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:692)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.support.v4.view.ViewPager.populate(ViewPager.java:875)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.support.v4.view.ViewPager.populate(ViewPager.java:772)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.support.v4.view.ViewPager.completeScroll(ViewPager.java:1539)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.support.v4.view.ViewPager.computeScroll(ViewPager.java:1422)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.View.getDisplayList(View.java:12633)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.View.getDisplayList(View.java:12689)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.View.getDisplayList(View.java:12583)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.View.getDisplayList(View.java:12689)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.View.getDisplayList(View.java:12583)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.View.getDisplayList(View.java:12689)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.View.getDisplayList(View.java:12583)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.View.getDisplayList(View.java:12689)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:1198)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.ViewRootImpl.draw(ViewRootImpl.java:2173)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2045)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1854)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.Choreographer.doCallbacks(Choreographer.java:562)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.Choreographer.doFrame(Choreographer.java:532)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.os.Handler.handleCallback(Handler.java:725)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.os.Looper.loop(Looper.java:137)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at java.lang.reflect.Method.invokeNative(Native Method)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at java.lang.reflect.Method.invoke(Method.java:511)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-11 15:01:45.350: E/AndroidRuntime(29447):    at dalvik.system.NativeStart.main(Native Method) 
```

切换标签：

```
@Override
        public Fragment getItem(int position) {
            // getItem is called to instantiate the fragment for the given page.
            // Return a DummySectionFragment (defined as a static inner class
            // below) with the page number as its lone argument.
            Fragment fragment = null;           
            switch (position) {
            case 0:
                fragment = new AddExpense();
                break;
            case 1:
                fragment = new AddIncomeSource();
                break;
            default:
                break;
            }
            return fragment;
        } 
```

选项卡的内部类（每个选项卡的每个类）：

```
public static class AddExpense extends Fragment {
        /**
         * The fragment argument representing the section number for this
         * fragment.
         */
        public static final String ARG_SECTION_NUMBER = "section_number";

        public AddExpense() {
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

            View v = inflater.inflate(R.layout.add_expense, null);
            return v;
        }
    }

    public static class AddIncomeSource extends Fragment {
        public static final String ARG_SECTION_NUMBER = "section_number";

        public AddIncomeSource() {
        }
        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

            View v = inflater.inflate(R.layout.add_income, null);
            return v;
        }
    } 
```

# arrays - 检查数组中是否有咖啡脚本中的某些项目

> ID：14279009
> 
> 赞同：13
> 
> 时间：2013-01-11T13:17:00.640
> 
> 标签：arrays, coffeescript

当数组中有一些项目时，coffeescript 中是否有一些方法返回 true？像 ruby​​ 中的方法`present?`：

```
[].present? false
[1].present? true 
```

根据[http://arcturo.github.com/library/coffeescript/07_the_bad_parts.html，coffeescript](http://arcturo.github.com/library/coffeescript/07_the_bad_parts.html)中的数组空性由其长度决定

```
alert("Empty Array")  unless [].length 
```

这对我来说似乎很蹩脚。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-11T13:37:01.040

我认为没有但可以：

```
Array::present = ->
  @.length > 0

if [42].present()
  # why yes of course
else
  # oh noes 
```

一个非常简单和不完整的实现，但它应该给你一些想法。并且为了记录，Ruby中没有`present?`方法，该方法是由`active_support`gem添加的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T13:28:13.713

不幸的是，没有。最好的方法是比较它的长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-11T11:27:48.453

我认为使用`in`也有效。

```
arr = [1, 2, 3, 4, 5]
a = 1
if a in arr
  console.log 'present'
else
  console.log 'not present'

Output
$ present 
```

# opengl - 展开显示列表

> ID：14279015
> 
> 赞同：1
> 
> 时间：2013-01-11T13:17:20.930
> 
> 标签：opengl

我在 OpenGL 中使用显示列表，我很惭愧，但它很容易工作。但是我不知道如何扩展显示列表，换句话说，添加到它。

我在 glNewlist 之后尝试了 glCallList，但显然它不是那样工作的。

有没有办法扩展显示列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:29:10.593

> 有没有办法扩展显示列表？

没有。生成一个包含新旧数据的新数据。

# django - Django i18n 在代码中工作，但不在模板中？

> ID：14279021
> 
> 赞同：1
> 
> 时间：2013-01-11T13:17:27.470
> 
> 标签：django, internationalization, django-templates, translation

我创建了我的语言文件（其中包含来自我的模板的消息）然后编译它们。

这是我的设置文件中的内容：

```
USE_I18N = True
LOCALE_PATHS = (
    '/srv/www/rewards_system/locale',
)

ugettext = lambda s: s
LANGUAGES = (
    ('bg', ugettext('Bulgarian')),
    ('en', ugettext('English')),  
)
LANGUAGE_CODE = 'bg'
USE_L10N = True 
```

结果是，所有从带有`ugettext()`函数的代码运行的翻译都完美地翻译成保加利亚语，但所有来自内部模板的翻译`({% trans "word" %})`都以英语显示。

我`{% load i18n %}`在我的模板之上。

我正在使用[渲染](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render)功能加载它

```
render(request,
       'company/signup.html', 
       { 'form': form }) 
```

这意味着 RequestContext 被发送到模板。

我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-28T14:47:57.363

我遇到了类似的问题，最终使用`strace`. 我的问题是由目录内语言子目录的名称不正确引起的`locale`。这有点误导，因为浏览器传递或配置的语言代码`settings.py`包含连字符（例如`zh-CN`），而目录名称需要包含下划线（例如`locale/zh_CNL`）。这实际上是 Django 正在寻找的：

```
stat("/myapp/locale/zh_CN/LC_MESSAGES/django.mo", 0x7fff08a385c0) = -1 ENOENT (No such file or directory) 
```

一旦目录被重命名为`ru_RU`Django 就可以找到它：

```
stat("/home/webcookies/wps2/locale/ru_RU/LC_MESSAGES/django.mo", {st_mode=S_IFREG|0664, st_size=689, ...}) = 0 
```

我还发现以下代码片段可用于测试翻译正确性：

```
import os
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "myapp.settings")

from django.utils.translation import ugettext as _
from django.utils.translation import activate
activate('ru-RU')
print(_("English text to be translated")) 
```

# java - 如何向我的这部分代码添加异常处理？

> ID：14279023
> 
> 赞同：0
> 
> 时间：2013-01-11T13:17:35.383
> 
> 标签：java, exception, exception-handling

我有两个问题。首先，我在代码的第一部分创建了一个异常处理，即重试概念。

```
do {
    try {
        if(exitType.length()==1){
            char exitChar = exitType.charAt(0);
            exit = exitChar;
            if (exit == 'Y' || exit == 'y' || exit == 'N' || exit == 'n') {
                x = 1; 
            } else {
                throw new StringException("Invalid letter...\n");
            }
        } else {
            throw new StringException("Invalid input a string...\n");
        } 
    } catch(StringException i) {
        System.out.println("-------------------------------------------");
        System.out.print("You typed: " + exitType + i);
        System.out.println("-------------------------------------------");

        System.out.println("Try again? (y/n): ");
        exitType = input.next();
        x = 0;
    } 
```

当用户输入除 y/n 之外的字母时，输出将是：

```
Try again? (y/n): w
-------------------------------------------
You typed: wStringException: Invalid letter...
------------------------------------------- 
```

第一个问题：如何将 StringException: Invalid letter... 放在下一行，使其不在“w”旁边（只是为了输出的清晰和整洁）。希望你能得到我。

顺便说一句，我创建了自己的异常：

```
public class StringException extends Exception {
    public StringException(String message) {
        super(message);
    }   
} 
```

其次，我不知道如何在要求用户输入选择字母的这部分添加异常处理：

```
public static void operation() {
    Scanner input = new Scanner(System.in);
    String choiceString = "";
    char choice = 'a';
    System.out.print("Enter letter of choice: ");
    choiceString = input.next();
    if (choiceString.length() == 1) {
        choice = choiceString.charAt(0);
        System.out.println("-------------------------------------------");

        switch(choice) {
            case 'a': {
                try {
                    System.out.print("Enter width: ");
                    double width = input.nextDouble();
                    System.out.print("Enter height: ");
                    double height = input.nextDouble();
                    System.out.print("What is the color of the shape? ");
                    String color = input.next();
                    System.out.println("-------------------------------------------");
                    Shape cia;
                    Shape rec = new Rectangle(color, width, height);
                    cia = rec;
                    System.out.println(rec);
                    Rectangle r = new Rectangle(color, width, height);
                    r.print();
                } catch(InputMismatchException i) {
                    System.out.println("InputMismatchException caught");
                }
                break;  
            }
            case 'b': {
            //**** 
            }
            case 'c': {
            //****
            }
            default:
                System.out.println("Invalid choice...");
        }
    } else {
        System.out.println("Invalid input...");
    } 
```

我只需要知道应该将 try-catch 块放置在提示选择字母的部分的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:26:38.270

第一个问题：在你的捕获中，你有

```
System.out.print("You typed: " + exitType + i); 
```

只需更改为

```
System.out.print("You typed: " + exitType + "\n" + i); 
```

`\n`是一个[转义代码](http://www.java-tips.org/java-se-tips/java.lang/character-escape-codes-in-java.html)，充当新行。为了完整起见，您实际上应该使用`\n\r`系统兼容性

`try/catch`我并没有真正得到第二个问题，如果你把你放在周围还不够`choiceString = input.next();`吗？它还取决于您在捕获异常后如何管理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:24:46.473

> 第一个问题：如何将 StringException: Invalid letter... 放在下一行，使其不在“w”旁边

改变

```
System.out.println("You typed: " + exitType);
System.out.println(" ");
System.out.println(i); 
```

至

```
System.out.println("You typed: " + exitType + i); 
```

`println`在打印参数中的内容后添加换行符（与 不同`print`）

> 其次，我不知道如何在要求用户输入选择字母的这部分添加异常处理：

您可以将其添加到`default`案例中，或者更好的是，在`else`

```
else {
        throw new ...
    } 
```

# javascript - Javascript多维数组往返JSON（jQuery？）

> ID：14279026
> 
> 赞同：0
> 
> 时间：2013-01-11T13:17:46.693
> 
> 标签：javascript, jquery, json

我有一个 Javascript 问题，我需要能够存储如下数据：

```
MainArray(Array(JavaScript Object, JavaScript Object, etc etc..), Array(JavaScript Object, JavaScript Object, etc etc..), etc etc..) 
```

主数组有 10 个子数组，这些子数组包含任意数量的`JavaScript`对象。

我需要一种以这种方式存储数据的有效方法，并且需要知道如何解析为 JSON/解码回 Javascript 中的可管理结构。

这种结构的原因是因为我正在与之通信的 Java 程序使用这种结构。

如果这有什么不同，我可以使用 jQuery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:20:21.213

您的结构看起来像这样

```
var myVariable = [
   [
       { }, { }, { }
   ],
   [
       { }, { }, { }
   ]
] 
```

这可以是 JSON 字符串化的。它产生`"[[{},{},{}],[{},{},{}]]"`

使用`JSON.stringify`和`JSON.parse`。

# c# - 获取比较的不同布尔值的相互布尔状态

> ID：14279030
> 
> 赞同：-1
> 
> 时间：2013-01-11T13:18:08.797
> 
> 标签：c#

**场景**1：hasError1 为假 hasError2 为真

**场景**2：hasError1 为真 hasError2 为真

true 必须在这两种情况下都获胜。如何将 hasError1 和 hasErro2 分配给第三个变量以获得正确的错误状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:21:51.710

运营商`||`：

```
var hasError3 = hasError1 || hasError2; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T13:22:01.437

如果您阅读[布尔代数](http://en.wikipedia.org/wiki/Boolean_algebra)，您会发现您需要将`|`这些值“或”( ) 在一起。

```
bool b1 = false;
bool b2 = true;
bool b3 = b1 | b2; // b3 is assigned the value of b1 ORed with b2
// b3 has the value "true" now 
```

请注意，您经常会看到`b1 || b2`used 而不是`b1 | b2`. 这同样适用，并且[差异的细节](http://en.wikipedia.org/wiki/Short-circuit_evaluation)对你来说不太重要

最后，我建议阅读“真值表”的使用。这些是理解布尔代数（AND、OR、XOR、NOT）的好方法。

# android - 如何从 ProGuard 中排除 Facebook 项目？

> ID：14279034
> 
> 赞同：1
> 
> 时间：2013-01-11T13:18:15.713
> 
> 标签：android, facebook, proguard

Facebook 项目`com.facebook.*`是主项目的库项目。如果我使用 ProGuard 默认文件编译 APK `proguard-android.txt`，那么它会在 Facebook 项目中弄乱一些东西，并且某些功能无法按计划工作。

如何从 ProGuard 中排除整个 FB 项目？

# c++ - 从dll导出省略号函数

> ID：14279037
> 
> 赞同：0
> 
> 时间：2013-01-11T13:18:27.393
> 
> 标签：c++, arguments, export, ellipsis

是否可以导出省略号（mutli arg）函数？例子

```
// dll function
extern "C" __declspec(dllexport) int __cdecl LogText(const wchar_t* fmt, ...);

// application 
typedef int (__cdecl *LogText)(const wchar_t* fmt, ...);
LogText doLog;
doLog = (LogText) GetProcAddress( hDll, "LogText"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:06:23.040

当然。例如，C 运行时 DLL 导出`printf`.

但是，您的代码不会按原样工作，因为它没有考虑[名称修改](http://en.wikipedia.org/wiki/Name_mangling#C_name_decoration_in_Microsoft_Windows)。对于`__cdecl`，这意味着在对 的调用中添加下划线`GetProcAddress`：

```
doLog = (LogText) GetProcAddress( hDll, "_LogText"); 
```

# android - 签名后按后退按钮未最小化Android应用程序

> ID：14279040
> 
> 赞同：2
> 
> 时间：2013-01-11T13:18:37.143
> 
> 标签：android, cordova, back-button, minimization

我想通过按返回和主页按钮来最小化应用程序。所以我使用了以下代码。

```
 public void onBackPressed() {
            Intent setIntent = new Intent(Intent.ACTION_MAIN);
            setIntent.addCategory(Intent.CATEGORY_HOME);
            setIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(setIntent);
     } 
```

在签署应用程序之前，它在模拟器和设备中运行良好。但是签名后，应用程序会通过按返回按钮关闭。我也试过下面的代码。

```
 public boolean onKeyDown(int keyCode, KeyEvent event)  
        {
             if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0)
             {
                this.moveTaskToBack(true);
                return true;
             }
            return super.onKeyDown(keyCode, event);
        } 
```

但结果是一样的。任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:26:16.453

重申一下，在 Android 中按下后退按钮旨在退出应用程序。如果您按下足够多的时间以删除您的每个活动，应用程序将关闭。

我不建议覆盖此功能（无论这是否是电话间隙应用程序）。

# r - R中的部分字符串匹配具体化

> ID：14279042
> 
> 赞同：0
> 
> 时间：2013-01-11T13:18:48.687
> 
> 标签：r, text-mining

我需要将类似的字符串调和为最长的字符串。我被agrep困住了，你会怎么做？

**更新：更好的问题定义** 我有一个面包店地址的 .csv，我想知道（1）面包店有多少家分店，（2）有多少家企业。

因此，我只提取了面包店的名称（参见下面的示例），现在我需要找到所有非常相似以至于它们代表相同业务的字符串。然后我计算业务和分支机构的数量。

```
c("5 Meister Bäcker", "5 Meister Bäcker H. Breunung GmbH & Co. KG", 
"5 Meister Bäcker Hubert Breunung Amthorpassage Ba...", "5 Meister Bäcker Hubert Breunung Bäckerei", 
"5 Meister Bäcker Hubert Breunung Backshop", "5 Meister Bäcker Hubert Breunung Backshop", 
"5 Meister Bäcker Hubert Breunung Backshop", "5 Meister Bäcker Hubert Breunung Backshop", 
"5 Meister Bäcker Hubert Breunung Backshop", "5 Meister Bäcker Hubert Breunung Backshop", 
"5 Meister Bäcker Hubert Breunung GmbH & Co. KG", "5 Meister Bäcker Hubert Breunung GmbH & Co. KG", 
"5 Meister Bäcker Hubert Breunung GmbH & Co. KG", "5 Meister Bäcker Hubert Breunung GmbH & Co. KG", 
"5 Meister Bäcker Hubert Breunung GmbH & Co. KG", "5 Meister Bäcker Hubert Breunung", 
"5 Meister Bäcker Verwaltung", "Abel Backwaren", "Abele Bäckerei Filiale", 
"Abele Bruno Bäckerei", "Abele Eugen Bäckerei", "Abele Stefan Bäckerei", 
"Abel Lutz Feinbäckerei", "Abelmann Guido Bäckerei", "Abelmann Guido Bäckerei", 
"Abeln", " 05432 6 79", "Abeln Der City Bäcker", "Abeln", " 05933 18 12", 
"Abeln", " 05432 90 46 10", "Abeln", " 04471 72 93", "Abeln", 
" 05431 90 40 87", "Abeln", " 04471 93 03 47", "Abeln der City Bäcker", 
"Abeln Der City Bäcker", "Abeln Der City Bäcker", "Abeln", 
" 05961 95 53 30", "Abeln Der City Bäcker", "Abeln mein City-Bäcker Bäckerei", 
"Abeln", " 05933 64 76 23", "Abel Rupert Bäckerei und Konditorei", 
"Abels Bäckerei", "Abenthum Heinrich Bäckerei und Konditorei", 
"Aberle Hanno Bäckerei", "Abholzer Bäckerei Inh. Bernard u. Rosi Sproß") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:10:48.627

不清楚你想做什么。我假设对于向量数据中的每个元素，您尝试找到相似的最长字符串，或相似物中的最长字符串（agrep 结果）。

1.  您可以先删除所有重复项（当有完全匹配时，我做 grep 没有意义）

    ```
    stats.nd <- dat[!duplicated(dat)]   #I remove duplicated, but below
                                        # I will do the job in the origin vector 
    ```

2.  假设`dat`是你的字符串向量，你可以这样做：

    ```
    ll.lmatch <- sapply(seq_along(dat),function(x){
             ll <- agrep(pattern=dat[x],         # for each string
                         dat[-x],                # I search between the others strings 
                         value=T,max.distance=0.5)    # I set the Levenshtein distance
             ll[which.max(rank(ll))]                  # I choose the longest using rank
    })
    res <- cbind(dat,dat.match) 
    ```

# amazon-web-services - 如何将在 VPS 上运行的 WAMP 堆叠应用程序转换为可扩展的 AWS 应用程序？

> ID：14279044
> 
> 赞同：1
> 
> 时间：2013-01-11T13:18:51.623
> 
> 标签：amazon-web-services

我有一个在虚拟 Windows 服务器上的 php、mysql、apache 上运行的 web 应用程序。我想重新设计它，使其在 AWS 上具有可扩展性（为了好玩，以便我可以学习新事物）。

我可以看到如何设置 EC2 并将其全部转储到其中，但我希望使其可扩展并利用 AWS 上的所有酷功能。

我试过谷歌搜索，但找不到简单的指南（注意 - 我没有 Linux 的命令行经验）

谁能指导我找到可以引导我完成这些步骤并教我的详细资源？或者，总结答案中的步骤，以便我可以根据您所说的进行研究。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:12:44.793

AWS 一直在发展和变化，因此没有很多书籍可以提供帮助。亚马逊提供非常好的[培训](http://aws.amazon.com/aws-training/)。[我参加了他们关于使用 AWS](http://aws.amazon.com/aws-training/architect/)进行架构的为期三天的课程，这似乎正是您想要的。

当然，并不是每个人都能负担得起花费旅行时间和金钱去上课的费用。2012 年 11 月的[AWS re:Invent 大会](http://reinvent.awsevents.com/)有很多与您想要的内容相关的会议，并且大多数（可能是所有）会议都提供免费在线视频。使用 AWS 构建 Web 规模的应用程序可能是相关的（提供[幻灯片](http://www.slideshare.net/AmazonWebServices/building-webscale-applications-architectures-with-aws-aws-reinvent-2012-arc205)和[视频](http://www.youtube.com/v/2wZAN2_W6Ns?autoplay=1&rel=0&enablejsapi=1&playerapiid=ytplayer)），就像剖析 Internet 规模的应用程序（提供[幻灯片](http://www.slideshare.net/AmazonWebServices/arc303-dissecting-and-internet-scale-application)和[视频](http://www.youtube.com/v/1YYPt5ox-fQ?autoplay=1&rel=0&enablejsapi=1&playerapiid=ytplayer)）一样。

更好地理解这些选项的一个好方法是修改 AWS 上的现有应用程序。只需将其移动到 AWS 中的 EC2 实例，然后开始更多地利用可用的东西，这将很容易。我要做的第一件事是摆脱您自己机器上的 MySql 服务器并使用 RDS 提供的服务器。一旦稳定，在 RDS 中创建一个或多个只读副本，并更改​​您的应用程序以从它们读取大多数操作，仅当您需要完整的当前结果时才从主（可写）数据库读取。

除了数据库之外，您的应用程序是否在 Web 服务器上保留任何数据？如果是这样，通过将数据移出 EC2 实例来摆脱所有本地存储。其中一些可能会进入数据库，一些（如大文件）可能适用于 S3。DynamoDB 是存放会话数据之类的好地方。

以上所有内容都将 Web 服务器上的负载减少到您的应用程序代码上，这有助于提高可伸缩性。现在您在 Web 服务器上不保留任何状态，您可以使用 ELB 和 Auto-scaling 自动运行多个 Web 服务器（甚至根据需要自动启动更多）以处理更大的负载。

该应用程序是否有任何您现在根据 Web 请求按需执行的长时间运行的密集操作？考虑在被询问时不执行操作，而是使用 SQS 对请求进行排队，并告诉用户您将得到它。现在有长时间运行的进程（或 cron 作业或计划任务）定期检查队列，运行请求的操作，并将结果（使用 SES）通过电子邮件发送给用户。要真正扩大规模，您可以将这些工作从 Web 服务器转移到专用机器上，并在需要时再次使用自动缩放。

您需要更大的机器，还是可以使用更小的机器？CloudWatch 指标可以显示一段时间内使用了多少 IO、内存和 CPU。您可以根据需要将预置 IOPS 与 EC2 或 RDS 实例一起使用以提高性能（有偿），并使用不同大小的实例来获得更多内存或 CPU。

所有这些 AWS 设置和配置都可以使用 AWS Web 控制台、命令行工具或提供多种语言的 SDK（Python 的[boto 库](https://github.com/boto/boto)很棒）来完成。在学习了基础知识之后，研究 CloudFormation 以更好地自动化它（到目前为止，我已经写了几篇关于此[的](http://blog.engelke.com/2012/12/19/learning-about-aws-cloudformation/)文章[） 。](http://blog.engelke.com/2012/12/28/provisioning-a-server-with-cloudformation/)

这是一种方法的 10,000 英尺高的视图。当您尝试使用每项 AWS 服务时，您需要了解它们的详细信息。AWS对所有这些都有[很好的文档。](http://aws.amazon.com/documentation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:26:34.257

取决于你如何看待它，这更像是一个评论而不是一个答案，但写成评论太长了。

您的要求真的无法在 SO 上得到回答——这是一个巨大而复杂的问题。您基本上是在问*“我如何设计一个可以部署在基于云的平台上的高度可扩展、持久的应用程序？”* 答案很大程度上取决于：

*   你的应用程序的细节——它做什么以及它是如何工作的？
*   您对停机时间的容忍度与您的预算相平衡
*   您当前的开发和部署工作流程
*   您在员工中支持应用程序的资源/技能组合
*   您的发布时间框架是什么样的。

我经营一家软件咨询公司，专门提供有关 Amazon Web Services 架构的咨询。我们大约 80% 的业务正在为我们的客户调查和回答这些问题。每次都是一个多周的项目。

但是，为了让您指出正确的方向，我建议您查看[Elastic Beanstalk](https://aws.amazon.com/elasticbeanstalk/)。这是一种类似于 PaaS 的服务，可以抽象出底层 AWS 资源，让没有太多系统管理员经验的开发人员更容易使用 AWS。将其视为在 AWS 上设计自动扩展应用程序的“训练轮”。

# php - 使用自定义 php 更改 Joomla 文章列表的布局

> ID：14279046
> 
> 赞同：0
> 
> 时间：2013-01-11T13:18:53.823
> 
> 标签：php, joomla

花了几天时间把我的头撞在砖墙上，我需要一些帮助。我基本上想在这里更改代码：

```
<div class="itemList">

        <?php if(isset($this->leading) && count($this->leading)): ?>
        <!-- Leading items -->
        <div id="itemListLeading">
            <?php foreach($this->leading as $key=>$item): ?>

            <?php
            // Define a CSS class for the last container on each row
            if( (($key+1)%($this->params->get('num_leading_columns'))==0) || count($this->leading)<$this->params->get('num_leading_columns') )
                $lastContainer= ' itemContainerLast';
            else
                $lastContainer='';
            ?>

            <div class="itemContainer<?php echo $lastContainer; ?>"<?php echo (count($this->leading)==1) ? '' : ' style="width:'.number_format(100/$this->params->get('num_leading_columns'), 1).'%;"'; ?>>
                <?php
                    // Load category_item.php by default
                    $this->item=$item;
                    echo $this->loadTemplate('item');
                ?>
            </div>
            <?php if(($key+1)%($this->params->get('num_leading_columns'))==0): ?>
            <div class="clr"></div>
            <?php endif; ?>
            <?php endforeach; ?>
            <div class="clr"></div>
        </div>
        <?php endif; ?>

        <?php if(isset($this->primary) && count($this->primary)): ?>
        <!-- Primary items -->
        <div id="itemListPrimary">
            <?php foreach($this->primary as $key=>$item): ?>

            <?php
            // Define a CSS class for the last container on each row
            if( (($key+1)%($this->params->get('num_primary_columns'))==0) || count($this->primary)<$this->params->get('num_primary_columns') )
                $lastContainer= ' itemContainerLast';
            else
                $lastContainer='';
            ?>

            <div class="itemContainer<?php echo $lastContainer; ?>"<?php echo (count($this->primary)==1) ? '' : ' style="width:'.number_format(100/$this->params->get('num_primary_columns'), 1).'%;"'; ?>>
                <?php
                    // Load category_item.php by default
                    $this->item=$item;
                    echo $this->loadTemplate('item');
                ?>
            </div>
            <?php if(($key+1)%($this->params->get('num_primary_columns'))==0): ?>
            <div class="clr"></div>
            <?php endif; ?>
            <?php endforeach; ?>
            <div class="clr"></div>
        </div>
        <?php endif; ?>

        <?php if(isset($this->secondary) && count($this->secondary)): ?>
        <!-- Secondary items -->
        <div id="itemListSecondary">
            <?php foreach($this->secondary as $key=>$item): ?>

            <?php
            // Define a CSS class for the last container on each row
            if( (($key+1)%($this->params->get('num_secondary_columns'))==0) || count($this->secondary)<$this->params->get('num_secondary_columns') )
                $lastContainer= ' itemContainerLast';
            else
                $lastContainer='';
            ?>

            <div class="itemContainer<?php echo $lastContainer; ?>"<?php echo (count($this->secondary)==1) ? '' : ' style="width:'.number_format(100/$this->params->get('num_secondary_columns'), 1).'%;"'; ?>>
                <?php
                    // Load category_item.php by default
                    $this->item=$item;
                    echo $this->loadTemplate('item');
                ?>
            </div>
            <?php if(($key+1)%($this->params->get('num_secondary_columns'))==0): ?>
            <div class="clr"></div>
            <?php endif; ?>
            <?php endforeach; ?>
            <div class="clr"></div>
        </div>
        <?php endif; ?>

        <?php if(isset($this->links) && count($this->links)): ?>
        <!-- Link items -->
        <div id="itemListLinks">
            <h4><?php echo JText::_('K2_MORE'); ?></h4>
            <?php foreach($this->links as $key=>$item): ?>

            <?php
            // Define a CSS class for the last container on each row
            if( (($key+1)%($this->params->get('num_links_columns'))==0) || count($this->links)<$this->params->get('num_links_columns') )
                $lastContainer= ' itemContainerLast';
            else
                $lastContainer='';
            ?>

            <div class="itemContainer<?php echo $lastContainer; ?>"<?php echo (count($this->links)==1) ? '' : ' style="width:'.number_format(100/$this->params->get('num_links_columns'), 1).'%;"'; ?>>
                <?php
                    // Load category_item_links.php by default
                    $this->item=$item;
                    echo $this->loadTemplate('item_links');
                ?>
            </div>
            <?php if(($key+1)%($this->params->get('num_links_columns'))==0): ?>
            <div class="clr"></div>
            <?php endif; ?>
            <?php endforeach; ?>
            <div class="clr"></div>
        </div>
        <?php endif; ?>

    </div> 
```

所以'leading'显示一定数量的文章，然后'primary'显示接下来的两个，'secondary'显示接下来的四个，依此类推。

关于如何做到这一点的任何帮助都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-31T07:08:49.133

The file is located here:

> /layouts/joomla/content/category_default.php

To override it place a copy here:

> [YOUR_TEMPLATE]/html/layouts/joomla/content/

You can read more about Joomla layouts here:

[Sharing layouts across views or extensions with JLayout](http://docs.joomla.org/J3.3%3ASharing_layouts_across_views_or_extensions_with_JLayout)

# c# - 如何在字符串中附加\？

> ID：14279049
> 
> 赞同：3
> 
> 时间：2013-01-11T13:18:57.017
> 
> 标签：c#, string

我尝试过这样的事情

```
 string path= Server.MapPath("~") + "color\"; 
```

但它抛出一个错误

> “不断的新线”

有什么办法可以追加`"\"`字符串吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T13:19:43.217

使用逐字字符串文字

```
string path= Server.MapPath("~") + @"color\"; 
```

或者`\\`

```
string path= Server.MapPath("~") + "color\\"; 
```

问题是`\`逃脱了 close `"`，这就是为什么这不起作用：

```
string invalid = "color\"; // same as: "color; 
```

但是，如果您正在构建路径，您应该真正使用[`Path`](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)该类及其方法，因为 [codingbiz 在他的回答中已经提到过](https://stackoverflow.com/a/14279110/284240)。它将使您的代码更具可读性且不易出错

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T13:22:00.587

试试这个

```
string path = Path.Combine(Server.MapPath("~") + @"color\"); 
```

或者

```
string path = Path.Combine(Server.MapPath("~") + "color\\"); 
```

Path.Combine will make sure the path character "\" are inserted where missing

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T13:19:44.473

使用`@`，逐字字符串，

```
string path = Server.MapPath("~") + @"color\"; 
```

或加倍`\`

```
string path = Server.MapPath("~") + "color\\"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T13:19:50.130

用这个

```
string path= Server.MapPath("~") + "color\\"; 
```

或者

```
string path= Server.MapPath("~") + @"color\"; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-11T13:20:15.083

用另一个逃脱它。

```
string path= Server.MapPath("~") + "color\\"; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-11T13:20:36.060

在你的字符串中使用`@`verbtaim；

```
string path= Server.MapPath("~") + @"color\"; 
```

或`\\`不逐字使用；

```
string path= Server.MapPath("~") + "color\\"; 
```

[`String literals`](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)从 MSDN 签出。

# mysql - DBForge 用数千条记录挂起服务器

> ID：14279054
> 
> 赞同：0
> 
> 时间：2013-01-11T13:19:22.773
> 
> 标签：mysql, devart, dbforge

第一的，

*   我有一张有 1500 条记录的表
*   我正在使用 MySQL 5.0.54。
*   我正在为 MySQL 5.0.97 使用 dbForge

桌子：

```
CREATE TABLE IF NOT EXISTS s_users(
  user_id MEDIUMINT(9) NOT NULL,
  employee_id INT(11) NOT NULL,
  surname VARCHAR(50) NOT NULL,
  firstname VARCHAR(50) DEFAULT NULL,
  phone VARCHAR(25) DEFAULT NULL,
  email VARCHAR(100) DEFAULT NULL,
  organization_eng VARCHAR(100) DEFAULT NULL,
  organization_fra VARCHAR(100) DEFAULT NULL,
  unit_id SMALLINT(6) NOT NULL DEFAULT 0,
  unit_name_eng VARCHAR(150) DEFAULT NULL,
  unit_name_fra VARCHAR(150) DEFAULT NULL,
  status ENUM('active', 'inactive') NOT NULL DEFAULT 'inactive',
  udate TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
ENGINE = MYISAM
AVG_ROW_LENGTH = 131
CHARACTER SET utf8
COLLATE utf8_unicode_ci; 
```

该声明：

```
select * from s_users; 
```

以下是重现的步骤：

1.  运行查询：**select * from s_users;**
2.  不要滚动到记录集的末尾，它表示 1 of 302+
3.  在另一个窗口中，运行查询**显示完整进程列表；**
4.  状态下会显示**Writing to net**
5.  直到我滚动到初始 SQL 语句的记录集的末尾，或关闭运行语句的选项卡，查询将继续占用 CPU（时间列不断增加）并阻止其余语句。

我想我在 dbForge 的某个地方缺少一个设置？

**更新#1**

这引起了我的注意： [https ://stackoverflow.com/a/802686/503246](https://stackoverflow.com/a/802686/503246)

也许 DBForge 正在使用导致这种情况的特定 C API 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:29:03.293

看来您必须切换到分页模式。默认情况下，它处于获取模式，这会保持连接打开，直到您导航到记录集的末尾。

要更改为分页模式：

1.  从主菜单中选择“工具 -> 选项”。“选项”窗口打开。
2.  导航到“数据编辑器 -> 常规”分支。
3.  选择“默认使用分页模式”选项并设置“初始页面大小”。

# php - 如何将网站从 WAMP 移动到 LAMP 服务器

> ID：14279056
> 
> 赞同：0
> 
> 时间：2013-01-11T13:19:27.080
> 
> 标签：php, lamp, wampserver

我在 WAMP 上构建了我的网站，现在需要将所有内容移至 LAMP。我了解 LAMP 中的包含路径不同。我需要做什么才能使网站正常工作而无需更改我的代码？

```
phpinfo();
include_path

.:/usr/share/php:/usr/share/pear 
```

将网站从 WAMP 迁移到 LAMP 时，还有什么需要注意的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:51:34.973

在将站点从 Windows 移植到 Linux 时，我遇到的最大问题是**文件名和路径**。看，Linux 是区分大小写的，而 Windows 不是。

为了帮助您调试这些错误和其他错误，您可以通过在以下位置搜索和更改两个设置来打开 PHP 错误`/etc/php5/apache2/php.ini`：

```
error_reporting = E_ALL | E_STRICT
display_errors = On 
```

您还可以读取错误日志，`/var/log/apache2/error.log`而不是显示所有错误。

另外，将来我建议您**在要部署到的平台上进行开发**。

# python - 使用 dateutil 解析多个日期

> ID：14279058
> 
> 赞同：4
> 
> 时间：2013-01-11T13:19:28.270
> 
> 标签：python, parsing, python-dateutil

我正在尝试借助此代码从 Python 中的字符串中解析多个日期，

```
from dateutil.parser import _timelex, parser
a = "Approve my leave from first half of 12/10/2012 to second half of 20/10/2012 "
p = parser()
info = p.info
def timetoken(token):
  try:
    float(token)
    return True
  except ValueError:
    pass
  return any(f(token) for f in (info.jump,info.weekday,info.month,info.hms,info.ampm,info.pertain,info.utczone,info.tzoffset))

def timesplit(input_string):
  batch = []
  for token in _timelex(input_string):
    if timetoken(token):
      if info.jump(token):
        continue
      batch.append(token)
    else:
      if batch:
        yield " ".join(batch)
        batch = []
  if batch:
    yield " ".join(batch)

for item in timesplit(a):
  print "Found:", item
  print "Parsed:", p.parse(item) 
```

并且代码将字符串的*后半部分*作为第二个日期并给我这个错误，

```
raise ValueError, "unknown string format"

ValueError: unknown string format 
```

当我将“后半部分”更改为“后半部分”或“前半部分”时，一切正常。

谁能帮我解析这个字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:36:29.857

您的解析器无法处理`"second"`找到的`timesplit`，如果您将`fuzzy`参数设置为`True`，它不会中断，但也不会产生任何有意义的东西。

```
from cStringIO import StringIO
for item in timesplit(StringIO(a)):
    print "Found:", item
    print "Parsed:", p.parse(StringIO(item),fuzzy=True) 
```

*出去：*

```
Found: 12 10 2012
Parsed: 2012-12-10 00:00:00
Found: second
Parsed: 2013-01-11 00:00:00
Found: 20 10 2012
Parsed: 2012-10-20 00:00:00 
```

您必须修复时间分割或处理错误：

*选择1：*

失去`info.hms`从`timetoken`

*选择2：*

```
from cStringIO import StringIO
for item in timesplit(StringIO(a)):
    print "Found:", item
    try:
        print "Parsed:", p.parse(StringIO(item))
    except ValueError:
        print 'Not Parsed!' 
```

*出去：*

```
Found: 12 10 2012
Parsed: 2012-12-10 00:00:00
Found: second
Not Parsed!
Parsed: Found: 20 10 2012
Parsed: 2012-10-20 00:00:00 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T13:43:31.527

如果您只需要日期，可以使用正则表达式提取它并使用日期。

```
a = "Approve my leave from first half of 12/10/2012 to second half of 20/10/2012 "

import re
pattern = re.compile('\d{2}/\d{2}/\d{4}')
pattern.findall(a)
['12/10/2012', '20/10/2012'] 
```

# wpf - WPF DataGrid 绑定 - 哪个最好？

> ID：14279061
> 
> 赞同：0
> 
> 时间：2013-01-11T13:19:36.207
> 
> 标签：wpf, binding, datagrid

我对 WPF 和 MVVM 相当陌生。

我看到 DataGrid 可以绑定到 CollectionViewSource 或 ObservableCollection 或 DataSet。

使用其中一个有什么意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:26:02.000

我不建议您使用 DataSet。您可以使用 CollectionViewSource 对数据进行排序、分组和过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:31:36.373

`CollectionViewSource`[是CollectionView](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionview.aspx)的 XAML 等效项（可以在 XAML 中实例化），它提供了在任何数据集合中进行分组、排序、过滤和导航的功能。*如果您只想*在视图 (XAML) 中提供这些功能中的任何一个，并且不想在视图模型中执行此操作，请在您的视图模型中使用`CollectionViewSource`else 使用`ObservableCollection`or `CollectionView`。当您的数据已经采用`DataSet`该形式并且不想经历创建视图模型的麻烦时，请使用。

我主要`ObservableCollection`在视图模型中使用。

# c++ - 不同函数中结构成员的动态内存分配

> ID：14279068
> 
> 赞同：0
> 
> 时间：2013-01-11T13:19:50.253
> 
> 标签：c++, struct, dynamic-memory-allocation

我想做类似下面的代码片段：

```
using namespace std;

struct str {
    int *integs;
};

void allocator(str*& str1) {str1.integs=new int[2];}
void destructor(str*& str1) {delete [] str1.integs;}

int main () {

    str str1;
    allocator(str1);
    str1.integs[0]=4;
    destructor(str1);
    return 0;
} 
```

但是，这不起作用；我收到*错误：在“str1”中请求成员“integs”，它是非类类型“str* ”*

这不可能与 struct 做，我需要一个类？我必须以某种方式使用 -> 运算符吗？想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:21:51.523

您将`str1`作为对指针的引用。你可能的意思是：

```
void allocator(str& str1) {str1.integs=new int[2];}
void destructor(str& str1) {delete [] str1.integs;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:23:16.417

str1 是对指针的引用，您应该使用

```
str1->integs 
```

或将其用作参考：

```
void allocator(str& str1) {str1.integs=new int[2];}
void destructor(str& str1) {delete [] str1.integs;} 
```

应该没问题

# c++ - glXGetCurrentDisplay() 分段错误 (Linux)

> ID：14279069
> 
> 赞同：1
> 
> 时间：2013-01-11T13:19:53.063
> 
> 标签：c++, opengl, interop, segmentation-fault, opencl

我正在使用 OpenCL/OpenGL 互操作，并且已经能够让它在 OSX 上成功运行：

```
props[0] = CL_CONTEXT_PROPERTY_USE_CGL_SHAREGROUP_APPLE;
props[1] = (cl_context_properties) CGLGetShareGroup( CGLGetCurrentContext() ); 
```

但是，当使用 X 通讯员时：

```
props[0] = CL_GL_CONTEXT_KHR;
props[1] = (cl_context_properties) glXGetCurrentContext();
props[2] = CL_GLX_DISPLAY_KHR;
props[3] = (cl_context_properties) glXGetCurrentDisplay();
props[4] = CL_CONTEXT_PLATFORM;
props[5] = (cl_context_properties) pID; 
```

OpenGL初始化代码：

```
glutInit(&argc, argv);
glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | GLUT_DEPTH);

screenWidth  = glutGet(GLUT_SCREEN_WIDTH);
screenHeight = glutGet(GLUT_SCREEN_HEIGHT);

glutInitWindowPosition( (screenWidth - width)/2 , (screenHeight - height)/2 );
glutInitWindowSize(width, height);
glutCreateWindow(appName.c_str());

glClearColor (0.0, 0.0, 0.0, 0.0);
glEnable(GL_DEPTH_TEST);
glEnable(GL_LIGHTING);
glEnable(GL_LIGHT0);

glEnable(GL_COLOR_MATERIAL);

glShadeModel(GL_SMOOTH);
glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);

glEnable (GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

glutDisplayFunc(render_s);
glutIdleFunc(render_s);
glutReshapeFunc(resize_s);
glutKeyboardFunc(keyPress_s);
glutKeyboardUpFunc(keyRelease_s);
glutMouseFunc(mousePress_s);
glutMotionFunc(mouseDrag_s);
glutPassiveMotionFunc(mouseMove_s); 
```

在获取上下文之前调用初始化代码。

glXGetCurrentContext() 没有段错误，但 glXGetCurrentDisplay() 有。

排除互操作，为什么即使在调用 glutInit() 之后 glXGetCurrentDisplay() 也会出现段错误

PS有没有办法在OpenGL下明确选择平台/设备？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T13:54:19.897

> 即使在调用 glutInit() 之后也会出现故障

`glutInit`不会创建 OpenGL 上下文，因此 glXGetCurrentDisplay 将失败。您需要调用`glutCreateWindow`以实际创建上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T14:17:22.230

我只是面临同样的问题。我发现你需要初始化 glx 扩展。我正在为此使用 glew，因此我需要`glewInit()`在创建上下文后调用才能`glXGetCurrentDisplay()`正常工作。

检查你的标题。如果包括在内，则`GL/glxew.h`需要以某种方式初始化函数指针。如果包含`GL/glx.h`它应该可以正常工作。

# symfony - Symfony 2 中的两种不同的登录表单

> ID：14279070
> 
> 赞同：3
> 
> 时间：2013-01-11T13:19:53.610
> 
> 标签：symfony

## 背景

根据 Symfony 文档，登录表单需要在 security.yml 文件中指定，也是 login_check 路径。到目前为止，我的应用程序运行良好，用户尝试访问安全页面 (mysite.com/edit/123)，如果他们没有登录，他们将被重定向到 /login，并且在他们登录后，他们将再次被重新定向到原来的预期路径 (/edit/123)。

类似的问题：[Symfony 2 中的两个单独的登录页面](https://stackoverflow.com/questions/10166081/two-separate-login-pages-in-symfony-2)

## 问题

现在的问题是，我需要一个不同的登录表单，比如说 /minimal_login，我需要将其包含在 security.yml 但我知道的唯一方法是创建一个不同的防火墙，正如我在文档中看到的那样，这会创建一个单独的识别方案，所以我想通过不同防火墙登录的用户不能共享相同的安全页面，这不是我想要的。

## 需要什么

如果用户尝试访问任何安全页面，但 /popup 他们将被重定向到 /login，但是如果他们尝试访问 /popup（并且他们没有登录），他们将被重定向到 /minimal_login。而且无论用户如何登录我的应用程序，他们将始终共享相同的访问权限，我的意思是，如果他们使用 /login 或 /minimal_login 登录，他们可以访问相同的页面。

* * *

## 我的安全.yml

```
jms_security_extra:
    secure_all_services: false
    expressions: true

security:
    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH ]

    providers:
        main:
            entity: {class: Done\PunctisBundle\Entity\User, property: username}

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false
        main:
            remember_me:
                key: %secret%
                lifetime: 3600
                path: /
                domain: ~
            pattern: ^/
            anonymous: ~
            form_login:
                login_path: /login
                check_path: /login_check
            logout:
                path:   /logout
                target: /

    access_control:
        - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/signup, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/verification, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/popup/, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/ajax/track, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/ajax/socialbox, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/$, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/, roles: ROLE_USER }

    encoders:
        Done\PunctisBundle\Entity\User:
            algorithm:   md5
            iterations: 1
            encode_as_base64: false 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-13T08:00:13.773

我遇到了类似的问题，我使用`firewall context`配置解决了。

```
firewalls:
    somename:
        # ...
        context: my_context
    othername:
        # ...
        context: my_context 
```

[http://symfony.com/doc/current/reference/configuration/security.html#firewall-context](http://symfony.com/doc/current/reference/configuration/security.html#firewall-context)

# r - 基于包含重复项的列子集列

> ID：14279074
> 
> 赞同：0
> 
> 时间：2013-01-11T13:20:05.850
> 
> 标签：r, unique

我想根据具有重复 ID 的列之一对 3 列进行子集化，这样我只能得到 3 列具有唯一值

```
structure(list(ID = 1:4, x = c(46L, 47L, 47L, 47L), y = c(5L, 
```

6L, 7L, 7L)), .Names = c("ID", "x", "y"), row.names = c(1L, 6L, 11L, 16L), class = "data.frame")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:32:36.053

在数据框上使用重复的方法应该有效：

```
dat[!duplicated(dat),] # (equivalent here to dat[!duplicated(dat$ID),] )
   ID  x y
1   1 46 5
6   2 47 6
11  3 47 7
16  4 47 7 
```

# javascript - 处理jquery事件时ie9中的权限被拒绝

> ID：14279082
> 
> 赞同：1
> 
> 时间：2013-01-11T13:20:27.813
> 
> 标签：javascript, jquery, internet-explorer, iframe

当我从事件处理程序返回时，我在 i9、ie8 中有权限被拒绝错误。在其他浏览器（firefox、chrome）中一切正常。jquery 1.8.1 中的错误：

```
nodeName: function( elem, name ) {
    return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
}, 
```

我像这样在iframe中绑定点击

```
 var bindClicks = function (iframe, events) {
    $.each(events, function (key, value) {
        iframe.contents().find(key).click(value);
    });
}; 
```

像这样使用：`bindClicks(iframe, { '#showDetails':onShowTechnicalDetails });`

```
var onShowTechnicalDetails = function (e) {
    alert('Error after end this');
}; 
```

这种风格的所有其他处理程序都可以正常工作，除了这个。有什么问题？

修复：我不知道这是否对某人有帮助，问题是我挂起事件的元素是链接`<a href ='#'> text </a> i change it to <a href='javascript:void(0)'> text </a> and it work!`

# ios - Game Center 回合制比赛中玩家之间的聊天

> ID：14279084
> 
> 赞同：5
> 
> 时间：2013-01-11T13:20:31.617
> 
> 标签：ios, game-center

我正在尝试使用 Game Center 创建一个回合制游戏。我想知道是否可以让比赛中的玩家互相聊天（语音或文字）。

我已经研究了一下，似乎可以通过普通游戏而不是回合制游戏来实现。

如果不可能，允许这种类型聊天的解决方案或方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T10:54:40.433

是的，您可以通过以下方式进行文字聊天：在不结束回合的情况下，`matchData`更新`GKTurnBasedMatch`. 更新后的 NSData 将提供给所有打开您的应用程序并参与游戏的玩家。因此，您的`matchData`对象必须同时携带游戏状态和聊天状态。不幸的是，我看不出如何触发用户通知或标记应用程序以进行新的聊天，而不必每次都结束玩家的回合。

# rest - 在 Java EE Web 应用程序之间共享队列？

> ID：14279088
> 
> 赞同：0
> 
> 时间：2013-01-11T13:20:45.907
> 
> 标签：rest, jakarta-ee, queue, jms

我有 REST 服务器 Web 应用程序，它可以捕获数据、将其持久化，然后将其添加到队列中。

我有另一个 Web 应用程序应该从这个队列中获取项目并每隔 X 秒将它们传输给客户端。

我将如何使用 Java EE 实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:32:01.227

您将阅读[JMS](http://en.wikipedia.org/wiki/Java_Message_Service)并在您选择的 EE 容器中寻找具体实现。

# javascript - 如何从html中的超链接获取数据

> ID：14279089
> 
> 赞同：0
> 
> 时间：2013-01-11T13:20:51.180
> 
> 标签：javascript, jquery, html

我被困在试图检索类别`id`从 HTML5 中的超链接中检索类别。首先，我使用 jQuery 解析了 HTML5 中的 JSON 链接。

我的代码： HTML 代码： jquery 代码：

```
<script src="jquery-1.8.3.min.js"></script>
<script>
    $.getJSON('http://'    '/storejson.php', function(data) {
        var output="<ul>";
        for (var i in data.items) {
            output += "<li>" + data.items[i].categories_name + " " "</li>";
        }
        output += "</ul>";
        document.getElementById("placeholder").innerHTML=output;
    });
</script> 
```

HTML 代码：

```
<a href="http://'     '/storesubcatjson.php?cat_id=&cat_id"><div id="placeholder" align="justify"></a> 
```

我已经给出了一个超链接到上面的占位符。通过解析 JSON 显示类别，但我想通过超链接显示子类别。所以请告诉我我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:27:58.637

您可以做的是从 a 标签中获取 href，然后在单击时将链接传递给您的 getjson，或者最适合您的方式，这会将请求发送到 php 文件，但请记住，您的 php 文件也必须设置从 href 中获取 url 字符串中传递的参数。

```
 <script>
    var link;

 $("a").click(function(){link = $(this).attr("href")}); // get this inside a click event on the 'a' tag
     alert(link);// to see the url being passed
    $.getJSON(link, function(data) {
             var output="<ul>";
             for (var i in data.items) {
             output += "<li>" + data.items[i].categories_name + " " "</li>";
       }
       output += "</ul>";
    document.getElementById("placeholder").innerHTML=output;
});
 </script>

 <a href="http://storesubcatjson.php?cat_id=&cat_id">CLICK</a> // If you click here it should send the href data 
```

# merge - 使用 tortoise/svn 和 TeamCity 执行验证合并

> ID：14279090
> 
> 赞同：1
> 
> 时间：2013-01-11T13:20:53.750
> 
> 标签：merge, tortoisesvn

我们正在使用 TortoiseSVN 和 TeamCity，该项目现在有一个主干和一个分支（*主干*和*release201301*）。有时，不是经常，开发人员忘记将我们在*realese201301*中的更改合并到*主干*- 这当然会在某个阶段导致各种问题。

任何人都知道用于验证何时将 Commit 从一个（或多个）分支合并到其他分支的工具或技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:34:50.350

在最近的 TortoiseSVN 版本中，您的团队执行的每个合并步骤都注册到一个名为`svn:mergeinfo`. 您只需要检查应该合并的分支中的修订是否已注册到此属性中（您可以自行决定使用`SVN Log`或`SVN Revision Graph`其他功能）。

# xml - Groovy：为具有属性集合的对象集合动态创建 XML

> ID：14279092
> 
> 赞同：1
> 
> 时间：2013-01-11T13:20:59.547
> 
> 标签：xml, groovy

我有一组带有属性的字段。每个属性是单个值或对象集合（null、一个或多个）

我需要为此创建一个像 xml 这样的树。

到目前为止，我发现的所有示例都是静态的或将地图转换为 xml。在循环中将节点添加到 xml 的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:38:16.927

你可以做这种事情，但没有任何输入示例和所需输出，这一切都只是盲目的猜测：

```
import groovy.xml.*

def collection = [
  [ name:'tim', pets:['cat','dog'], age:null ],
  [ name:'brenda', pets:null, age:32 ]
]

def process = { binding, element, name ->
  if( element[ name ] instanceof Collection ) {
    element[ name ].each { n ->
      binding."$name"( n )
    }
  }
  else if( element[ name ] ) {
    binding."$name"( element[ name ] )
  }
}

println XmlUtil.serialize( new StreamingMarkupBuilder().with { builder ->
  builder.bind { binding ->
    data {
      collection.each { e ->
        item {
          process( binding, e, 'name' )
          process( binding, e, 'pets' )
          process( binding, e, 'age' )
        }
      }
    }
  }
} ) 
```

打印：

```
<?xml version="1.0" encoding="UTF-8"?><data>
  <item>
    <name>tim</name>
    <pets>cat</pets>
    <pets>dog</pets>
  </item>
  <item>
    <name>brenda</name>
    <age>32</age>
  </item>
</data> 
```

* * *

### 编辑

在下面的评论之后仍然不确定您拥有或想要什么，但这似乎满足您的标准：

```
import groovy.xml.*

def process = { binding, element, name ->
  if( element[ name ] instanceof Collection ) {
    element[ name ].each { n ->
      binding."$name"( n )
    }
  }
  else if( element[ name ] ) {
    binding."$name"( element[ name ] )
  }
}

class Form {
  List fields  
}

// Create a new Form object
f = new Form( fields:[ [ name:'a', val:21 ], [ name:'b' ], [ name:'c', val:[ 1, 2 ], x:'field x' ] ] )

// Serialize it to XML
println XmlUtil.serialize( new StreamingMarkupBuilder().with { builder ->
  builder.bind { binding ->
    data {
      f.fields.each { fields ->
        item {
          fields.each { name, value ->
            process( binding, fields, name )
          }
        }
      }
    }
  }
} ) 
```

并打印：

```
<?xml version="1.0" encoding="UTF-8"?><data>
  <item>
    <name>a</name>
    <val>21</val>
  </item>
  <item>
    <name>b</name>
  </item>
  <item>
    <name>c</name>
    <val>1</val>
    <val>2</val>
    <x>field x</x>
  </item>
</data> 
```

# vb.net - 网络浏览器当前 URL (VB.NET)

> ID：14279094
> 
> 赞同：1
> 
> 时间：2013-01-11T13:21:01.620
> 
> 标签：vb.net

我正在做一个项目，我在 vb.net 中遇到了关于 webbrowser 工具的障碍。当用户在特定站点时，我想显示一个 msgbox，如何做到这一点？，换句话说，如何在 vb.net 的 webberowser 工具中获取当前 url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:30:51.270

`Webbrowser.Url`是一个`Uri`，而不是一个字符串。因此，将其与`Uri`.

```
If WebBrowser1.Url = New Uri("http://stackoverflow.com") Then 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T18:12:06.653

我会说你应该检查 URI 的主机，这样它就适用于所有 URL，而不仅仅是给定站点的顶层：

```
Private Sub Button1_Click_1( sender As System.Object,  e As System.EventArgs) Handles Button1.Click
       WebBrowser1.Navigate("http://www.stackoverflow.com")
End Sub

Private Sub WebBrowser1_DocumentCompleted( sender As System.Object,  e As System.Windows.Forms.WebBrowserDocumentCompletedEventArgs) Handles WebBrowser1.DocumentCompleted
    If WebBrowser1.Url.Host = "stackoverflow.com"
        MessageBox.Show("You are at stack overflow")
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-12T12:22:17.480

你是这个意思吗？

```
Dim browser As String

    browser = TextBox1.Text
    WebBrowser1.Navigate(browser)

    MsgBox("Your visiting " & browser)

End Sub 
```

# php - 允许 HTTPS 包装器的自签名证书

> ID：14279095
> 
> 赞同：11
> 
> 时间：2013-01-11T13:21:03.260
> 
> 标签：php, https, certificate, self-signed

基本上我有这个：

```
function request($url) {
    return file_get_contents($url, false, stream_context_create(array(
        "ssl" => array(
            "verify_peer" => true,
            "allow_self_signed" => false,
        )
    )));
}

request("https://[A]");
request("https://[B]"); 
```

其中 [A] 是具有“真实”证书的服务器上的某个 URL，而 [B] 是仅具有自签名证书的某个 URL。

使用 [A] 它工作正常，使用 [B] 我得到这个：

```
file_get_contents(): Failed to enable crypto 
```

这是一个相当不幸的错误消息，应该类似于“服务器证书验证失败”，但很好......

现在我想：“好吧，[B] 是我的测试系统 - 我不在乎证书”并将上下文更改为：

```
"verify_peer" => false,
"allow_self_signed" => true, 
```

它现在[应该](http://php.net/manual/en/context.ssl.php)接受任何服务器证书，甚至是我的自签名证书。但它仍然是相同的行为 - [A] 有效，[B] 无效。为什么？

* * *

顺便说一句：我知道它适用于 curl 扩展，但我想在没有它的情况下击败它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-01-06T19:54:58.607

这对我有用。祝你好运。

```
$context = [ 'http' => [ 'method' => 'GET' ], 'ssl' => [ 'verify_peer' => false, 'allow_self_signed'=> true ] ];
$context = stream_context_create($context);
$resp = file_get_contents('https://site/', false, $context); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-02T02:00:38.590

```
$contextOptions = array(
    'ssl' => array(
        'verify_peer'       => true,
        'allow_self_signed'=> true
    )
);
$sslContext = stream_context_create($contextOptions); 
```

file_get_contents("https://...., false, $sslContext);

以上工作正常

# php - 实现推送通知系统的最佳方式

> ID：14279098
> 
> 赞同：5
> 
> 时间：2013-01-11T13:21:19.280
> 
> 标签：php, javascript, push, comet

我们希望建立一个实时价格变化系统，以便能够看到竞争对手价格与我们产品价格的差异。

我们没有使用 Javascript 和 PHP 推送通知 / COMET 系统的经验。如果你不介意，我想听听你的经验，关于这项技术的建议。所以这是我的问题：

*   像那个系统那样做的最好方法是什么？
*   我们是经验丰富的 PHP 开发人员，那么 PHP 是否适合这项任务？
*   如果您知道任何能够做到这一点的项目或解决方案（开源或商业），您能分享一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:52:56.097

1.  这是我们使用的方法。Javascript 向 PHP 文件发送常规 AJAX 请求。PHP 文件进行数据库查询，如果发现，只需休眠 0.5 秒（或 1 秒），然后再次进行数据库查询。如果 30 秒过去了，但在数据库中仍然没有发现任何新内容（这是在 HTTP 超时发生之前给出输出所必需的），那么它会输出一些东西（比如发现发现）。Javascript 在收到上一个查询的输出后立即启动另一个查询。Javascript 始终跟踪彗星正在监视的数据库表的最后一个 ID。这用于仅查询大于我们看到的最后一个 ID 的数据库行。
2.  是的 PHP 是合适的。只记得一件重要的事情！**在进入彗星循环之前，您需要关闭所有打开的会话。**PHP 使用会话锁定来防止两个线程同时写入同一个会话。如果您忘记关闭会话，所有其他线程都将被锁定（例如无法浏览网站）。
3.  我可以建议我们使用的开源 PHP 框架。它称为[Stingle](https://github.com/webemedianet/stingle)。它具有可靠且可用于生产的 Comet 插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-04T06:11:39.853

尝试使用 socket.io ，不需要从客户端向服务器发送请求来获取数据，在服务器端只需使用套接字发送数据，客户端将获取数据。只是避免发出http请求通知，因为通知几乎是实时的。

# c++ - “找不到包含”，如何解决？

> ID：14279102
> 
> 赞同：0
> 
> 时间：2013-01-11T13:21:43.330
> 
> 标签：c++, xcode4.5, osx-mountain-lion, openscenegraph

我正在使用`OpenSceneGraph`. 我从[**用户可运行**](http://www.artoolworks.com/dist/openscenegraph/3.1.x/)的安装程序安装它。

当我尝试使用 OpenSceneGraph 编译应用程序时，出现以下错误：

`Lexical or preprocessor error : Include cannot be found`对于所有`<osg/*>`包括 like `<osg/AnimationPath>`。

该文件可在此处获得`/Library/Frameworks/osg.framework/Versions/92/Headers/XXXX`因此，按照有关如何[将现有框架添加到新 Xcode 的](https://stackoverflow.com/questions/3352664/how-to-add-existing-frameworks-in-xcode-4)解决方案，我将**osg.framework**添加到项目中。

![在此处输入图像描述](../Images/7bd49edc09f5ea1044a23f20b2acba70.png)

任何想法都是受欢迎的。

我在用 ：

*   IDE *Xcode 4.5*
*   *铿锵声4.1*
*   *OS X 山狮*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:25:53.387

编译时，您必须使用编译器的选项添加包含文件`-I`，还可能使用编译器的选项添加库目录`-L`（如果您使用与 gcc 不同的编译器，选项可能会有所不同）。

我猜这个产品的库和包含目录都应该是您选择的安装目标的子目录。对于包含目录，当然要查找包含某种头文件的目录，`.h`或者`.hpp`对于库，查找`.lib`或`.dll`库文档是否提到您需要的包含和库以及在哪里可以找到它们？

编辑：您还必须告诉 xcode 在哪里搜索您的包含。我尝试用谷歌搜索它，[这](http://forums.macrumors.com/showthread.php?t=756243)是关于如何将目录添加到项目的包含路径的众多结果之一。

您必须找到要添加到包含路径的目录。似乎他们在官方文档中为此设置了一些[环境变量](http://openscenegraph.sourceforge.net/documentation/OpenSceneGraph/doc/install.html#Mac%20OSX)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:36:13.523

您需要添加`/Library/Frameworks`到*项目设置*中的***“框架搜索路径”***。

# java - 将 WMF 转换为 PNG/BMP/JPG

> ID：14279104
> 
> 赞同：5
> 
> 时间：2013-01-11T13:21:44.130
> 
> 标签：java, image-processing, png, wmf

如何将一个 WMF 文件转换为具有自定义输出分辨率的 PNG/BMP/JPG 格式？

示例：获取 WMF 文件并输出 2000x2000 像素的 PNG 文件。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T13:23:38.917

您可以使用出色的 Batik ( [http://xmlgraphics.apache.org/batik/](http://xmlgraphics.apache.org/batik/) ) 库来实现此目的。但是您需要按照以下步骤操作：

1.  使用 WMFTranscoder 将 WMF 文件转换为 SVG
2.  使用 JPGTranscoder 将 SVG 转换为 JGP

WMF >> SVG >> JPG

这是关于 coderanch 的讨论：http: [//www.coderanch.com/t/422868/java/java/converting-WMF-Windows-Meta-File](http://www.coderanch.com/t/422868/java/java/converting-WMF-Windows-Meta-File)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-01T23:28:56.840

WMF、EMF 和 EMF+ 是幻灯片的组成部分，因此我为它们开发了一个渲染器作为 Apache POI 的一部分。至于即将到来的 POI-4.1.2，这仍在进行中 - 如果您有任何渲染问题，请在我们的 bugzilla中以[新的错误报告上传您的文件。](https://bz.apache.org/bugzilla/enter_bug.cgi?product=POI&component=SL+Common&short_desc=EMF+WMF+rendering+issue&rep_platform=All&op_sys=All)

主要描述可以在[POI 文档](http://poi.apache.org/components/slideshow/ppt-wmf-emf-renderer.html)中找到。

这是一段摘录：

## #1 - 通过文件或标准输入使用 PPTX2PNG

对于文件系统访问，您需要先将您的幻灯片/WMF/EMF/EMF+ 保存到光盘，然后`PPTX2PNG.main()`使用相应的参数调用。

要`stdin`访问，您需要先重定向`System.in`：

```
/* the file content */
InputStream is = ...;
/* Save and set System.in */
InputStream oldIn = System.in;
try {
    System.setIn(is);
    String[] args = {
        "-format", "png", // png,gif,jpg,svg or null for test
        "-outdir", new File("out/").getCanonicalPath(),
        "-outfile", "export.png",
        "-fixside", "long",
        "-scale", "800",
        "-ignoreParse",
        "stdin"
    };
    PPTX2PNG.main(args);
} finally {
    System.setIn(oldIn);
} 
```

## #2 - 通过 *Picture 类渲染 WMF / EMF / EMF+

```
File f = samples.getFile("santa.wmf");
try (FileInputStream fis = new FileInputStream(f)) {
    // for WMF
    HwmfPicture wmf = new HwmfPicture(fis);
    // for EMF / EMF+
    HemfPicture emf = new HemfPicture(fis);
    Dimension dim = wmf.getSize();
    int width = Units.pointsToPixel(dim.getWidth());
    // keep aspect ratio for height
    int height = Units.pointsToPixel(dim.getHeight());
    double max = Math.max(width, height);
    if (max > 1500) {
    width *= 1500/max;
    height *= 1500/max;
    }
    BufferedImage bufImg = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);
    Graphics2D g = bufImg.createGraphics();
    g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    g.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
    g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);
    g.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);
    wmf.draw(g, new Rectangle2D.Double(0,0,width,height));
    g.dispose();
    ImageIO.write(bufImg, "PNG", new File("bla.png"));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:30:06.237

对于这种格式，您可以使用[不同的工具。](http://www.fileinfo.com/extension/wmf)您可以选择例如 GIMP。在 Java 中，您有一个[用于转换 WMF 文件的库](http://wvware.sourceforge.net/libwmf.html)。

# c# - SqlCommand.Prepare 方法要求所有参数都具有显式类型集

> ID：14279116
> 
> 赞同：1
> 
> 时间：2013-01-11T13:22:18.137
> 
> 标签：c#, sql, sql-server

我想使用准备好的语句将一些数据插入到 SQL Server 数据库中。

我想要的查询是：

```
INSERT INTO salesdata([OriginalFilename], [InterchangeReceiverID], [Distributor],
       [DE_Date], [DE_VendorNR], [DE_VendorDEANR], [DE_VendorName],
       [DE_DistributionCenterNR], [DE_DistributionCenterID],
       [DE_DistributionCenterName], [DE_ItemNR],[DE_ItemNDCNR], [DE_ProductUOM],
       [DE_CustomerAccountNR], [DE_CustomerDEANR], [DE_CustomerNPINR],
       [DE_CustomerHINNR], [DE_CustomerName], [DE_CustomerAddress1],
       [DE_CustomerAddress2], [DE_CustomerCity], [DE_CustomerState],
       [DE_CustomerZipcode], [DE_CustomerCountry], [DE_InvoiceNR], [DE_Invoicedate],
       [DE_QuantitySold], [DE_QuantityReturned], [DE_SalesReturnCode],
       [DE_ContractNR], [DE_Price])
VALUES(@OriginalFilename, @InterchangeReceiverID, @Distributor,
       @DE_Date, @DE_VendorNR, @DE_VendorDEANR, @DE_VendorName,
       @DE_DistributionCenterNR, @DE_DistributionCenterID,
       @DE_DistributionCenterName, @DE_ItemNR, @DE_ItemNDCNR, @DE_ProductUOM,
       @DE_CustomerAccountNR, @DE_CustomerDEANR, @DE_CustomerNPINR,
       @DE_CustomerHINNR, @DE_CustomerName, @DE_CustomerAddress1,
       @DE_CustomerAddress2, @DE_CustomerCity, @DE_CustomerState,
       @DE_CustomerZipcode, @DE_CustomerCountry, @DE_InvoiceNR, @DE_Invoicedate,
       @DE_QuantitySold, @DE_QuantityReturned, @DE_SalesReturnCode,
       @DE_ContractNR, @DE_Price) 
```

我像这样遍历所有参数：

```
command.Parameters.Add(new SqlParameter("@InterchangeReceiverID", SqlDbType.NVarChar,500));
command.Parameters["@InterchangeReceiverID"].Value = "VALUEGOESHERE"; 
```

我也尝试了该`Parameters.Add(name,value)`方法，但已弃用。

我不断收到的错误是：

> *System.InvalidOperationException：SqlCommand.Prepare 方法要求所有参数都具有明确设置的类型。*

不幸的是，他没有提到导致问题的参数。我正在使用大小为 500 的 NVarchar 和大小为 18 且比例为 6 的小数。

我做错了什么，或者我怎样才能找出导致问题的参数？我将所有参数写入文件（带有大小/比例和值），所有参数看起来都很好......

完整代码：

```
SqlCommand command = GetNewSQLCommand(SALESDATAQRY);
        //command.CommandText = SALESDATAQRY;
        logger.Info(command.CommandText);
        command.Parameters.Add(new SqlParameter("@InterchangeReceiverID", SqlDbType.NVarChar,500));
        command.Parameters["@InterchangeReceiverID"].Value = obj.INTERCHANGE.INTERCHANGE_HEADER.INTERCHANGE_RECEIVER_ID;

        command.Parameters.Add(new SqlParameter("@DE_VendorNR", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_VendorNR"].Value= obj.INTERCHANGE.INTERCHANGE_HEADER.INTERCHANGE_RECEIVER_ID;

        foreach (PRODUCT_TRANSFER_AND_RESALE_REPORTINTERCHANGEFUNCTIONAL_GROUP funcGroup in obj.INTERCHANGE.FUNCTIONAL_GROUP)
        {                
            if (command.Parameters.Contains("@OriginalFilename")) command.Parameters.Remove("@OriginalFilename");

            command.Parameters.Add(new SqlParameter("@OriginalFilename", SqlDbType.NVarChar,500)) ;
        command.Parameters["@OriginalFilename"].Value = filename;
            command.Parameters.Add(new SqlParameter("@Distributor", SqlDbType.NVarChar,500)) ;
        command.Parameters["@Distributor"].Value = "-";
            foreach (PRODUCT_TRANSFER_AND_RESALE_REPORTINTERCHANGEFUNCTIONAL_GROUPTRANSACTIONNAME_INFO ni in funcGroup.TRANSACTION.NAME_INFO){

                if (command.Parameters.Contains("@DE_DistributionCenterNR")) command.Parameters.Remove("@DE_DistributionCenterNR");
                if (command.Parameters.Contains("@DE_DistributionCenterID")) command.Parameters.Remove("@DE_DistributionCenterID");
                if (command.Parameters.Contains("@DE_DistributionCenterName")) command.Parameters.Remove("@DE_DistributionCenterName");

                if (ni.IDENTIFICATION_CODE_QUALIFIER.Equals("ZZ"))
                {
                    if (command.Parameters.Contains("@Distributor")) command.Parameters.Remove("@Distributor");
                    command.Parameters.Add(new SqlParameter("@Distributor", SqlDbType.NVarChar,500)) ;
        command.Parameters["@Distributor"].Value = ni.IDENTIFICATION_CODE;
                }

                command.Parameters.Add(new SqlParameter("@DE_DistributionCenterNR", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_DistributionCenterNR"].Value = ni.IDENTIFICATION_CODE;
                command.Parameters.Add(new SqlParameter("@DE_DistributionCenterID", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_DistributionCenterID"].Value = ni.IDENTIFICATION_CODE;//identifier code intern 
                command.Parameters.Add(new SqlParameter("@DE_DistributionCenterName", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_DistributionCenterName"].Value = ni.NAME;//iodentifeirname

            }

            foreach (DTM dtm in funcGroup.TRANSACTION.DTM){
                if (dtm.DATE_QUALIFIER.Equals("090")) {
                    if (command.Parameters.Contains("@DE_Date")) command.Parameters.Remove("@DE_Date");
                    command.Parameters.Add(new SqlParameter("@DE_Date", SqlDbType.DateTime )) ;
        command.Parameters["@DE_Date"].Value=dtm.DATE; //090 start, 091 end
                }
            }

            if (command.Parameters.Contains("@DE_VendorDEANR")) command.Parameters.Remove("@DE_VendorDEANR");
            if (command.Parameters.Contains("@DE_VendorName")) command.Parameters.Remove("@DE_VendorName");

            command.Parameters.Add(new SqlParameter("@DE_VendorDEANR", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_VendorDEANR"].Value = "-";
            command.Parameters.Add(new SqlParameter("@DE_VendorName", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_VendorName"].Value = "-";
            foreach (PRODUCT_TRANSFER_AND_RESALE_REPORTINTERCHANGEFUNCTIONAL_GROUPTRANSACTIONPTD ptd in funcGroup.TRANSACTION.PTD){                
                if (command.Parameters.Contains("@DE_ItemNR")) command.Parameters.Remove("@DE_ItemNR");
                if (command.Parameters.Contains("@DE_ItemNDCNR")) command.Parameters.Remove("@DE_ItemNDCNR");
                if (command.Parameters.Contains("@DE_ProductUOM")) command.Parameters.Remove("@DE_ProductUOM");
                if (command.Parameters.Contains("@DE_CustomerAccountNR")) command.Parameters.Remove("@DE_CustomerAccountNR");
                if (command.Parameters.Contains("@DE_CustomerDEANR")) command.Parameters.Remove("@DE_CustomerDEANR");
                if (command.Parameters.Contains("@DE_CustomerNPINR")) command.Parameters.Remove("@DE_CustomerNPINR");
                if (command.Parameters.Contains("@DE_CustomerHINNR")) command.Parameters.Remove("@DE_CustomerHINNR");
                if (command.Parameters.Contains("@DE_CustomerName")) command.Parameters.Remove("@DE_CustomerName");
                if (command.Parameters.Contains("@DE_CustomerCity")) command.Parameters.Remove("@DE_CustomerCity");
                if (command.Parameters.Contains("@DE_CustomerState")) command.Parameters.Remove("@DE_CustomerState");
                if (command.Parameters.Contains("@DE_CustomerZipcode")) command.Parameters.Remove("@DE_CustomerZipcode");
                if (command.Parameters.Contains("@DE_CustomerCountry")) command.Parameters.Remove("@DE_CustomerCountry");
                if (command.Parameters.Contains("@DE_QuantitySold")) command.Parameters.Remove("@DE_QuantitySold");
                if (command.Parameters.Contains("@DE_QuantityReturned")) command.Parameters.Remove("@DE_QuantityReturned");
                if (command.Parameters.Contains("@DE_SalesReturnCode")) command.Parameters.Remove("@DE_SalesReturnCode");
                if (command.Parameters.Contains("@DE_ContractNR")) command.Parameters.Remove("@DE_ContractNR");
                if (command.Parameters.Contains("@DE_Price")) command.Parameters.Remove("@DE_Price");

                command.Parameters.Add(new SqlParameter("@DE_ItemNR", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_ItemNR"].Value = ptd.NAME_INFO.SALES_ITEM_INFORMATION.PRODUCT_SERVICE_ID;
                command.Parameters.Add(new SqlParameter("@DE_ItemNDCNR", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_ItemNDCNR"].Value = ptd.NAME_INFO.SALES_ITEM_INFORMATION.PRODUCT_SERVICE_ID;
                command.Parameters.Add(new SqlParameter("@DE_ProductUOM", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_ProductUOM"].Value = ptd.NAME_INFO.SALES_ITEM_INFORMATION.UNIT_OR_BASIS_FOR_MEASUREMENT_CODE;
                command.Parameters.Add(new SqlParameter("@DE_CustomerAccountNR", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_CustomerAccountNR"].Value = ptd.NAME_INFO.IDENTIFICATION_CODE;
                if (ptd.NAME_INFO.IDENTIFICATION_CODE_QUALIFIER.Equals("11")){
                    command.Parameters.Add(new SqlParameter("@DE_CustomerDEANR", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_CustomerDEANR"].Value = ptd.NAME_INFO.IDENTIFICATION_CODE;
                    command.Parameters.Add(new SqlParameter("@DE_CustomerNPINR", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_CustomerNPINR"].Value = "-";
                    command.Parameters.Add(new SqlParameter("@DE_CustomerHINNR", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_CustomerHINNR"].Value = "-";
                }else if (ptd.NAME_INFO.IDENTIFICATION_CODE_QUALIFIER.Equals("21")){
                    command.Parameters.Add(new SqlParameter("@DE_CustomerDEANR", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_CustomerDEANR"].Value = "-";
                    command.Parameters.Add(new SqlParameter("@DE_CustomerNPINR", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_CustomerNPINR"].Value = "-";
                    command.Parameters.Add(new SqlParameter("@DE_CustomerHINNR", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_CustomerHINNR"].Value = ptd.NAME_INFO.IDENTIFICATION_CODE;
                }
                command.Parameters.AddWithValue("@DE_CustomerName", SqlDbType.NVarChar ).Value=ptd.NAME_INFO.NAME;
                foreach (PRODUCT_TRANSFER_AND_RESALE_REPORTINTERCHANGEFUNCTIONAL_GROUPTRANSACTIONPTDNAME_INFOADDRESS_INFO add in ptd.NAME_INFO.ADDRESS_INFO){
                    if (command.Parameters.Contains("@DE_CustomerAddress1")) command.Parameters.Remove("@DE_CustomerAddress1");
                    if (command.Parameters.Contains("@DE_CustomerAddress2")) command.Parameters.Remove("@DE_CustomerAddress2");
                    command.Parameters.Add(new SqlParameter("@DE_CustomerAddress1", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_CustomerAddress1"].Value = add.ADDRESS_INFORMATION_1;
                    command.Parameters.Add(new SqlParameter("@DE_CustomerAddress2", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_CustomerAddress2"].Value = add.ADDRESS_INFORMATION_2;
                }
                command.Parameters.Add(new SqlParameter("@DE_CustomerCity", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_CustomerCity"].Value = ptd.NAME_INFO.GEOGRAPHIC_LOCATION.CITY_NAME;
                command.Parameters.Add(new SqlParameter("@DE_CustomerState", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_CustomerState"].Value = ptd.NAME_INFO.GEOGRAPHIC_LOCATION.STATE_OR_PROVINCE_CODE;
                command.Parameters.Add(new SqlParameter("@DE_CustomerZipcode", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_CustomerZipcode"].Value = ptd.NAME_INFO.GEOGRAPHIC_LOCATION.POSTAL_CODE;
                command.Parameters.Add(new SqlParameter("@DE_CustomerCountry", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_CustomerCountry"].Value = ptd.NAME_INFO.GEOGRAPHIC_LOCATION.COUNTRY_CODE;
                foreach (PRODUCT_TRANSFER_AND_RESALE_REPORTINTERCHANGEFUNCTIONAL_GROUPTRANSACTIONPTDNAME_INFOSALES_ITEM_INFORMATIONREF_ID refid in ptd.NAME_INFO.SALES_ITEM_INFORMATION.REF_ID ){
                    if (refid.REFERENCE_IDENTIFICATION_QUALIFIER.Contains("DI")){
                        if (command.Parameters.Contains("@DE_InvoiceNR")) command.Parameters.Remove("@DE_InvoiceNR");
                        if (command.Parameters.Contains("@DE_Invoicedate")) command.Parameters.Remove("@DE_Invoicedate");
                        command.Parameters.Add(new SqlParameter("@DE_InvoiceNR", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_InvoiceNR"].Value = refid.REFERENCE_IDENTIFICATION;
                        command.Parameters.Add(new SqlParameter("@DE_Invoicedate", SqlDbType.DateTime)) ;
        command.Parameters["@DE_Invoicedate"].Value = refid.DATE;
                    }
                }

                command.Parameters.Add(new SqlParameter("@DE_QuantitySold", SqlDbType.Decimal, 18)) ;
        command.Parameters["@DE_QuantitySold"].Value = ptd.NAME_INFO.SALES_ITEM_INFORMATION.QUANTITY;
                command.Parameters.Add(new SqlParameter("@DE_QuantityReturned", SqlDbType.Decimal,18)) ;
        command.Parameters["@DE_QuantityReturned"].Value = ptd.NAME_INFO.SALES_ITEM_INFORMATION.QUANTITY;
                command.Parameters.Add(new SqlParameter("@DE_SalesReturnCode", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_SalesReturnCode"].Value = "-";
                command.Parameters.Add(new SqlParameter("@DE_ContractNR", SqlDbType.NVarChar,500)) ;
        command.Parameters["@DE_ContractNR"].Value = ptd.NAME_INFO.SALES_ITEM_INFORMATION.PRODUCT_SERVICE_ID;
                command.Parameters.Add(new SqlParameter("@DE_Price", SqlDbType.Decimal,18)) ;
        command.Parameters["@DE_Price"].Value = ptd.NAME_INFO.SALES_ITEM_INFORMATION.MONETARY_AMOUNT;

        for (int i = 0; i < command.Parameters.Count; i++)
                {

                    if (command.Parameters[i].SqlDbType == SqlDbType.NVarChar) command.Parameters[i].Size = 500;
                    if (command.Parameters[i].SqlDbType == SqlDbType.Decimal)
                    {
                        command.Parameters[i].Size = 18;
                        command.Parameters[i].Scale = 6;
                    }
                    if (!SALESDATAQRY.Contains(command.Parameters[i].ParameterName)) logger.Error("Parameter not found: " + command.Parameters[i].ParameterName);
                    logger.Info(command.Parameters[i].ParameterName + ": " + command.Parameters[i].SqlDbType + " " + command.Parameters[i].Size + " " + command.Parameters[i].Scale + " " + command.Parameters[i].Value);

                }
                command.Prepare();

                logger.Info("inserted " + command.ExecuteNonQuery()+ " rows");       
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:28:58.670

您可以使用以下语法：

```
var parameter = new SqlParameter("@InterchangeReceiverID", SqlDbType.NVarChar, 500);
parameter.Value = "VALUEGOESHERE";

command.Parameters.Add(parameter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:23:37.337

或者，您可以使用`AddWithValue`which 隐式转换您的数据类型，

```
command.Parameters.AddWithValue("@InterchangeReceiverID", "VALUEGOESHERE"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T10:12:15.430

尝试使用`command.CreateParameter()`而不是 instatiating `SqlParameter`。

# c - 用汇编语言打印数组元素

> ID：14279119
> 
> 赞同：-1
> 
> 时间：2013-01-11T13:22:35.920
> 
> 标签：c, assembly, nasm

我在 nasm 程序集中编写了以下代码，用于在 scree 上打印数组元素。在此代码中没有编译错误，但我在屏幕上得到了垃圾值。

```
section .data
num1: dd 10, 20, 30, 40, 50, 10, 20, 30, 40, 50,300
total: dd 0
msg :  dd "Value=%d",10,0

    section .text
        extern _printf
        global _main
    _main:
        push ebp
        mov ebp,esp
        mov ebx,num1 ;point bx to first number
        mov ecx,11     ;load count of numbers in ecx
        mov eax,0       
    loop:
        mov eax,[ebx]

        push msg
        call _printf

        add ebx,4
        sub ecx,1
        jnz loop

        mov esp,ebp
        pop ebp

        ret 
```

**解决方案**

```
section .data
num1: dd 10, 20, 30, 40, 50, 10, 20, 30, 40, 50,300
total: dd 0
msg :  dd "Value=%d",10,0

    section .text
        extern _printf
        global _main
    _main:
        push ebp
        mov ebp,esp
    mov eax,10
        mov ebx,num1 ;point bx to first number
        mov ecx,0 ;load 0

    loop:

    ;store the value because external function like printf modify the value
    push ebx
    push eax
    push ecx

        push DWORD [ebx]

        push msg
        call _printf
    add esp,8

    ;restore thses values
    pop ecx
    pop eax
    pop ebx
    inc ecx
    add ebx,4
    cmp ecx,eax
    jne loop

        mov esp,ebp
        pop ebp

        ret 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:28:26.327

1.  显然你想将两个参数传递给 printf。然后你必须同时推动它们（你似乎认为其中一个是在 EAX 中传递的，但事实并非如此）。
2.  C 函数可以随意破坏 ECX，因此您应该保存并恢复它（您现在没有使用其他调用者保存的寄存器，但现在是时候阅读有关 X86 调用约定的更多信息了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:37:32.700

我已经弄清楚了我的问题的解决方案。所以我在这里为其他人发帖

```
section .data
num1: dd 10, 20, 30, 40, 50, 10, 20, 30, 40, 50,300
total: dd 0
msg :  dd "Value=%d",10,0

    section .text
        extern _printf
        global _main
    _main:
        push ebp
        mov ebp,esp
    mov eax,10
        mov ebx,num1 ;point bx to first number
        mov ecx,0 ;load 0

    loop:

    ;store the value because external function like printf modify the value
    push ebx
    push eax
    push ecx

        push DWORD [ebx]

        push msg
        call _printf
    add esp,8

    ;restore thses values
    pop ecx
    pop eax
    pop ebx
    inc ecx
    add ebx,4
    cmp ecx,eax
    jne loop

        mov esp,ebp
        pop ebp

        ret 
```

# android - 自定义背景颜色不覆盖整个背景

> ID：14279123
> 
> 赞同：0
> 
> 时间：2013-01-11T13:22:55.663
> 
> 标签：android, android-layout, background-color

我在 xml 中编写了一个简单的自定义样式：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="Light">
        <item name="android:textColor">@color/text_light</item>
        <item name="android:background">@color/background_light</item>
    </style>
</resources> 
```

但是，当我应用它时，为视图的每个元素正确设置了文本颜色，而没有为整个屏幕设置背景颜色，而只是为其中的单个视图（例如列表视图、文本视图、按钮）设置了背景颜色。

这是我用来设置主题的代码：

```
public void onCreate(Bundle icicle) {
    this.setTheme(R.android.Light);
    super.onCreate(icicle); 
```

如何更改整个布局的背景颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:47:30.793

```
<item name="android:windowBackground">@color/background_light</item>
<item name="android:colorBackground">@color/background_light</item> 
```

> 请注意，这里需要将颜色作为单独的资源提供，因为该`android:windowBackground`属性仅支持对另一个资源的引用；不像`android:colorBackground`，它不能被赋予颜色文字。

（引自[http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T13:47:47.533

您必须将主题应用到 Activity 或应用程序才能在整个应用程序中应用背景图像。

这是[查看本教程的链接](http://developer.android.com/guide/topics/ui/themes.html#ApplyATheme)

# ios - 与电子邮件中的图像战斗

> ID：14279133
> 
> 赞同：0
> 
> 时间：2013-01-11T13:23:30.090
> 
> 标签：ios, image, email

我的应用程序发送一封包含图像的电子邮件，但电子邮件中没有图像。

我创建了一个 HTML 字符串并将其作为正文发送到电子邮件中。但是在设备上执行此操作时，电子邮件中没有任何内容。在模拟器里没问题。我在我的应用程序中放置了一个 WebView 并将 HTML 放入其中并显示所有图像。

有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:31:33.177

这是我用来在邮件正文中附加图像的代码

```
NSMutableString *htmlBody = [[NSMutableString alloc] initWithString:@"<html><body>"];
    [htmlBody appendString:@"<p>Enter Text Here</p>"];
    UIImage *emailImage = [UIImage imageNamed:@"image.png"];
    NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation(emailImage)];
    NSString *base64String = [imageData base64EncodedString];
    [htmlBody appendString:[NSString stringWithFormat:@"<p><b><img src='data:image/png;base64,%@'>  </b></p>",base64String]];
    [htmlBody appendString:@"</body></html>"];
    NSLog(@"%@",htmlBody);
    [mailComposer htmlBody isHTML:YES]; 
```

希望对你有帮助。。

# python - 如何仅按日期从 Mercurial 服务器获取修订号？

> ID：14279140
> 
> 赞同：0
> 
> 时间：2013-01-11T13:23:51.887
> 
> 标签：python, mercurial

我对 Python 和 Django 不是很熟悉。我们使用 Jenkins 作为持续集成的服务器。但是当 Jenkins 克隆存储库时，会省略一些修订（这是自动过程）。当我们需要为测试/生产目的构建一个包时，我们必须用与我们可以在 Mercurial 服务器（存储库）上检查的完全相同的修订号来标记它。我们使用织物。我尝试在一个脚本中结合 Fabric 和 Python（Python 的 Paramiko 将用于连接第三方 Mercurial 服务器并获取正确的修订号）。修订版取自 Jenkins 在本地服务器上制作的包，作为最后一次提交的日期。这很简单：

```
pipe = subprocess.Popen(
    ['hg', 'log', '-l', '1', '--template', '{date|isodatesec}', env.repo_dir],
    stdout=subprocess.PIPE,
) 
```

但问题是从 Mercurial 服务器获取修订号。我试过了：

```
stdin, stdout, stderr = ssh_conn.execute('hg log -l 1 --date /"%s to %s/" --template {rev}') 
```

...但没有预期的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:26:21.913

只是肮脏的想法：

*   如果您在日志中获得正确的使用日期并以正确的格式提供它们（请参阅`hg help dates`）（顺便说一句，单个日志记录不仅仅是“
*   我只看到我的工作命令和你的 in " 字符使用和转义的小差异。JFYI，经过测试（在 Win 端，在 cmd-shell 中）命令

`hg log -l 1 --date "Sun Oct 30 10:16:00 2011 +0600 to Sun May 27 19:55:34 2012 +0600" --template "{rev}"`

`38`

（日期是“按原样”从日志输出中获取的，也许模板中的尾随 \n 也可以玩游戏 - 我现在正在考虑麻烦）

**笔记：**

任何没有 -R 的 hg 命令只有在 $PWD 是 mercurial repo 时才有效。恐怕，任何〜都不是存储库的地方

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:54:44.797

更好的解决方法是更改​​您的 Jenkins 克隆以获取所有内容。你说：

> 但是当 Jenkins 克隆存储库时，会省略一些修订（这是自动过程）。

让詹金斯克隆所有东西——只需要很长时间一次，然后让詹金斯逻辑类似于：

```
hg pull                   # get everything new
hg update XXXXXXXXXX      # update to the desired revision
./build VERSION=$(hg id)  # do a parameterized build 
```

尝试从远程 mercurial 存储库中获取除了克隆/拉取之外的任何东西很少值得复杂。

# c# - 过程或函数“ACMS_add”需要参数“@ACMS_doc_nane”，但未提供该参数

> ID：14279143
> 
> 赞同：1
> 
> 时间：2013-01-11T13:24:04.077
> 
> 标签：c#, stored-procedures, ado.net

我收到这个错误，你能帮帮我吗？提前致谢

> 过程或函数“ACMS_add”需要未提供的参数“@ACMS_doc_name”。

班级

```
public bool ACMS_add( string ENTRYUSER)
{
    bool status = false;
    ACMS_core.settings.ACMS_global_settings Conn = new ACMS_core.settings.ACMS_global_settings();

    SqlConnection conn = new SqlConnection(Conn.myConnectionString());
    SqlCommand cmd = new SqlCommand("ACMS_add", conn);
    cmd.CommandType = CommandType.StoredProcedure;

    cmd.Parameters.Add("@ACMS_Number", SqlDbType.NVarChar).Value = ACMS_Number;
    //cmd.Parameters.Add("@ACMS_Date", SqlDbType.DateTime).Value = ACMS_Date;
    cmd.Parameters.Add("@ACMS_Type", SqlDbType.Int).Value = ACMS_Type;
    cmd.Parameters.Add("@enrty_user", SqlDbType.NVarChar).Value = ENTRYUSER;
    cmd.Parameters.Add("@ACMS_doc_name", SqlDbType.NVarChar).Value = ACMS_doc_name;
    cmd.Parameters.Add("@ACMS_doc_file", SqlDbType.Image).Value = ACMS_doc_file;
    cmd.Parameters.Add("@ACMS_doc_ext", SqlDbType.VarChar).Value = ACMS_doc_ext;
    cmd.Parameters.Add("@ACMS_doc_mime_type", SqlDbType.VarChar).Value = ACMS_doc_mime_type;

    conn.Open();

    try
    {
        cmd.ExecuteNonQuery();
        status = true;
    }
    catch (Exception ex)
    {
        // return ex.Message;
        status = false;
    }

    conn.Close();
    conn.Dispose();

    return status;
} 
```

程序

```
 USE [TaxDisputes]
        GO
        /****** Object:  StoredProcedure [dbo].[ACMS_add]    Script Date: 1/11/2013 5:04:01 PM ******/
        SET ANSI_NULLS ON
        GO
        SET QUOTED_IDENTIFIER ON
        GO
        -- =============================================
        -- Author:      <Author,,Name>
        -- Create date: <Create Date,,>
        -- =============================================
        ALTER PROCEDURE [dbo].[ACMS_add]

        @ACMS_Number as nvarchar (50),
        --@ACMS_Date as datetime,
        @ACMS_Type as int,
        @enrty_user as nvarchar (50),
        @ACMS_doc_name  nvarchar (250),         
        @ACMS_doc_file image ,
        @ACMS_doc_ext nvarchar(50),
        @ACMS_doc_mime_type varchar(250)

        AS
        BEGIN

        SET NOCOUNT ON;
        ----#
        DECLARE @doc_type int

        IF exists (select mimetype from dbo.itdc_doc_extenstions where mimetype = @ACMS_doc_mime_type)
        BEGIN

        SET @doc_type = (select doc_ext_id from dbo.itdc_doc_extenstions where mimetype = @ACMS_doc_mime_type)

        END
        ELSE

        BEGIN
        INSERT INTO [dbo].[itdc_doc_extenstions]
                        (
                        [doc_ext],
                        [mimetype]
                        )
        VALUES
                        (
                        @ACMS_doc_ext,  
                        @ACMS_doc_mime_type                     
                        )   
        SET @doc_type = @@IDENTITY          

        END

        ----#
        BEGIN
        INSERT INTO [dbo].[itdc_ACMS]
        (
        [ACMS_Number]
        -- ,[ACMS_Date]
        ,[ACMS_Type]
        ,[entry_user]
        ,[ACMS_doc_name]
        ,[ACMS_doc_file]
        )
        VALUES

        (
        @ACMS_Number,
        -- @ACMS_Date,
        @ACMS_Type,
        @enrty_user,
        @ACMS_doc_name, 
        @ACMS_doc_file
        )

        END
        END 
```

代码隐藏

```
protected void Submitform_Click(object sender, EventArgs e)
{
    itdc_core.db_ACMS.acms acmsAdd = new acms();
    String fileName = DocUpload.FileName;

    if (fileName != "")
    {
        String file_ext = "";

        try
        {
            file_ext = fileName.Substring(fileName.LastIndexOf("."), fileName.Length - fileName.LastIndexOf("."));
        }
        catch
        {
            file_ext = "";
        }

        try
        {
            acmsAdd.ACMS_Number = docNumber.Text.Trim();
            //acmsAdd.ACMS_Date = Convert.ToDateTime("2013-01-10 19:08:12.300");
            acmsAdd.ACMS_Type = Convert.ToInt32(docType.SelectedValue);
            acmsAdd.ACMS_add(Page.User.Identity.Name);
            acmsAdd.ACMS_doc_name = DocUpload.FileName.ToString();
            acmsAdd.ACMS_doc_file = DocUpload.FileBytes;
            acmsAdd.ACMS_doc_mime_type = DocUpload.PostedFile.ContentType;
            acmsAdd.ACMS_doc_ext = file_ext;

            litDeleteDocumentMessage.Text = ("File added succsesfully");
        }
        catch
        {
            litDeleteDocumentMessage.Text = "Error !!! try again later";
        }
    }
    else
    {
        litDeleteDocumentMessage.Text = "Please choose  document !!! ";
    }
} 
```

![在此处输入图像描述](../Images/3026ab6997bd34a0dd0fd97605ee5174.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T13:32:07.113

您应该在初始化所有属性后调用您的方法：

```
acmsAdd.ACMS_Number = docNumber.Text.Trim();
//acmsAdd.ACMS_Date = Convert.ToDateTime("2013-01-10 19:08:12.300");
acmsAdd.ACMS_Type = Convert.ToInt32(docType.SelectedValue);
acmsAdd.ACMS_doc_name = DocUpload.FileName.ToString();
acmsAdd.ACMS_doc_file = DocUpload.FileBytes;
acmsAdd.ACMS_doc_mime_type = DocUpload.PostedFile.ContentType;
acmsAdd.ACMS_doc_ext = file_ext; 
```

最后一个（因为它正在执行存储过程）：

```
acmsAdd.ACMS_add(Page.User.Identity.Name); 
```

更好的方法是更改​​方法的签名，以便必须提供所有参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T13:30:57.840

在您的程序代码中，您有以下内容......

```
@ACMS_Number as nvarchar (50),
--@ACMS_Date as datetime,
@ACMS_Type as int,
@enrty_user as nvarchar (50),
@ACMS_doc_name  nvarchar (250),         
@ACMS_doc_file image ,
@ACMS_doc_ext nvarchar(50),
@ACMS_doc_mime_type varchar(250) 
```

现在我不是 C# 的用户，但我注意到您的 doc_file_name 和其他一些行中没有“AS”子句......

你认为这可能是问题吗？

# javascript - 动态启用和禁用 jquery 旋钮

> ID：14279148
> 
> 赞同：1
> 
> 时间：2013-01-11T13:24:36.510
> 
> 标签：javascript, jquery, jquery-knob

我正在使用出色的[jQuery 旋钮插件](http://anthonyterrien.com/knob/)。但是，我需要根据用户输入动态启用/禁用元素。支持`disabled`在页面加载时设置状态，其效果是没有鼠标（或触摸）事件绑定到画布元素。有谁知道如何解决这个问题，即如何（在页面加载后）绑定和取消绑定这些鼠标事件侦听器？

理想情况下，我想做这样的事情（在禁用的旋钮上）

```
$('.button').click(function() {
    $('.knob').enable();
}); 
```

**编辑：** 我最终重写了绑定/取消绑定鼠标和触摸事件的源代码。该解决方案并不完美，所以如果有人可能有更好（更清洁）的解决方案，我会留下这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-25T09:56:53.017

**html**

```
<input class="knobSlider" data-readOnly="true">
<button id="testBtn">clickHere</button> 
```

**脚本**

*在准备好的文档中，*

```
$(".knobSlider").knob();
$("#testBtn").click(function(){
    $(".knobSlider").siblings("canvas").remove();
    if($(".knobSlider").attr("data-readOnly")=='true'){
        $(".knobSlider").unwrap().removeAttr("data-readOnly readonly").data("kontroled","").data("readonly",false).knob();
    }
    else{
        $(".knobSlider").unwrap().attr("data-readOnly",true).data("kontroled","").data("readonly",true).knob();
    }
}); 
```

作为参考，您可以使用我的 jsfiddle 链接 > [http://jsfiddle.net/EG4QM/](http://jsfiddle.net/EG4QM/)（在 Firefox 中检查，因为 chrome 中存在一些外部资源加载问题）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-13T12:11:04.843

如果有人不喜欢接受的答案如何破坏和重新创建内部画布元素，请查看我的方法：

[https://jsfiddle.net/604kj5g5/1/](https://jsfiddle.net/604kj5g5/1/)

本质上，检查`draw()`实现（我还建议监听方法中的值变化，`draw`而不是`change`and `release`，它们分别适用于 and`click`和`mousewheel`事件，这很不方便）。

```
var $input = $("input");

var knobEnabled = true;
var knobPreviousValue = $input.val();

$input.knob({
  draw: function () { 
    if (knobPreviousValue === $input.val()) {
      return;
    }

    if (!knobEnabled) {
      $input.val(knobPreviousValue).trigger("change");
      return;
    }

    knobPreviousValue = $input.val();

    console.log($input.val()); 
  },
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T13:30:15.577

试试[这个](http://jsfiddle.net/cFKh9/1/)来禁用控制。我仍在尝试找到一种方法来启用它

```
 $("#btnDisable").click(function(){
      $("#knob").off().prev().off();
    }); 
```

# java - SSLException：无效填充展开 TLS 应用程序数据

> ID：14279151
> 
> 赞同：0
> 
> 时间：2013-01-11T13:24:51.733
> 
> 标签：java, ssl, jsse, sslengine

几个月前，我[使用 NIO 和 SSLEngine 开发了一个 SSL Web 服务器](https://stackoverflow.com/questions/9604532/ssl-handshaking-using-self-signed-certs-and-sslengine-jsse)。GET 请求和小型 POST 请求（大约 10KB 以下）一样有效。但是，当我发布比这更大的东西时，我会收到零星的 SSLException 异常。

例如，如果我发布一个小图像 (~16KB)，我可以看到 3 条 TLS 记录代表应用程序数据。第一个是 HTTP 标头，另外两个包含有效负载。这是数据包有多小的感觉：

```
1: 613 bytes
2: 16341 bytes
3: 549 bytes 
```

在我的代码中，我调用 SSLEngine 来解包/解密 TLS 记录（应用程序数据）。SSLEngine 在尝试解开第二条记录时经常会阻塞。这是错误：

```
javax.net.ssl.SSLException: Invalid padding
    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLEngineImpl.fatal(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLEngineImpl.readRecord(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLEngineImpl.readNetRecord(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLEngineImpl.unwrap(Unknown Source)
    at javax.net.ssl.SSLEngine.unwrap(Unknown Source)
    at javaxt.http.servlet.HttpServletRequest.getApplicationData(HttpServletRequest.java:1793)
    ...

    Caused by: javax.crypto.BadPaddingException: Invalid TLS padding: 199
    ... 
```

这是引发错误的代码。

```
private byte[] getApplicationData() throws IOException {

  //Read the next 5 bytes from the socket channel. This should contain TLS
  //record information.
    if (recordHeader==null){
        recordHeader = ByteBuffer.allocateDirect(5);
        read(recordHeader);
    }

  //Verify that the message contains application data
    recordHeader.rewind();
    if(recordHeader.get()!=23) throw new IOException();

  //Get the length of the TLS record
    recordHeader.position(3);
    int recordLength = Integer.parseInt(getHex(recordHeader) + getHex(recordHeader), 16);
    recordHeader.rewind();

  //Read the TLS record
    ByteBuffer recordData = ByteBuffer.allocateDirect(recordLength);
    read(recordData);
    recordData.rewind();

  //Merge the TLS header and record data into a single buffer
    ByteBuffer tlsRecord = ByteBuffer.allocateDirect(recordLength+recordHeader.capacity());
    tlsRecord.put(recordHeader);
    tlsRecord.put(recordData);
    tlsRecord.rewind();

  //Decrypt the application data
    ByteBuffer output = ByteBuffer.allocateDirect(tlsRecord.capacity());
    SSLEngineResult serverResult = sslEngine.unwrap(tlsRecord, output);
    runDelegatedTasks(serverResult, sslEngine);

    byte[] arr = new byte[output.position()];
    output.rewind();
    output.get(arr);

  //Clean up
    recordHeader.clear();
    recordData.clear();
    tlsRecord.clear();
    output.clear();
    recordHeader = recordData = tlsRecord = output = null;

  //Return array
    return arr;
} 
```

SSLException 在这一行被抛出：

```
SSLEngineResult serverResult = sslEngine.unwrap(tlsRecord, output); 
```

此错误偶尔发生。有时我看到它，有时我没有。通常，如果我确实看到错误并简单地重新发布数据（例如刷新浏览器），一切正常（没有错误）。

我无论如何都不是 SSL 专家，所以我不知道如何最好地调试这个问题。我很确定我正确地调用了 unwrap 方法。第二条记录是否以某种方式损坏？密码是否已更改，我需要重新启动握手？遇到此错误时我该怎么办？

其他几点：

*   我正在使用 Sun/Oracle JDK 6 和与之捆绑的 Java 安全套接字扩展 (JSSE)。
*   在使用 Mobile Safari、iOS 6 时，我经常看到这个错误。我很少遇到 FireFox 的这个问题。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T23:38:46.177

你做这一切都是错的。

当您需要传入数据时，您应该只调用 unwrap() 。unwrap() 将通过其返回状态告诉您在必要时（BUFFER_UNDERFLOW）从网络读取；它还可能会告诉您运行任务、执行包装等。您不应该*自行*读取网络、查看 TLS 记录、读取长度、读取数据、重新组装它们并将它们提供给 SSLEngine。它已经做到了这一切。你的代码是颠倒的。

同样在写的时候，调用wrap()即可。它会告诉您何时写入网络（BUFFER_OVERFLOW）、运行任务等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-19T16:22:38.010

经过长时间的中断，我终于解决了这个问题。问题是当我读取 TLS 记录时，我假设我的 read() 方法正在返回所有请求的字节（即 recordData ByteBuffer 已满）。那不是真的。结果， sslEngine.unwrap() 调用被炸毁了。

为了解决这个问题，我简单地替换了这个：

```
 //Read the TLS record
    ByteBuffer recordData = ByteBuffer.allocateDirect(recordLength);
    read(recordData) 
```

有了这个：

```
 //Read the TLS record
    ByteBuffer recordData = ByteBuffer.allocateDirect(recordLength);
    int ttl = read(recordData);
    if (ttl<recordLength){
        while (ttl<recordLength){
            recordData.position(ttl);
            ByteBuffer tmp = ByteBuffer.allocateDirect(recordLength-ttl);
            ttl += read(tmp);
            recordData.put(tmp);
        }
        recordData.rewind();
    } 
```

一旦 recordData ByteBuffer 被填满，SSLEngine unwrap() 方法就可以完美运行。

# javascript - Knockout.js - 如何在 foreach 中绑定数据变量

> ID：14279153
> 
> 赞同：3
> 
> 时间：2013-01-11T13:24:54.150
> 
> 标签：javascript, data-binding, knockout.js

我想`data-id`在淘汰赛中绑定到我的循环项目

```
 <ul data-bind="foreach: items">
        <li data-bind="attr: {data-id: $data.id}">
            <p data-bind="text: title"></p>
            <img alt="" data-bind="attr: {src: $data.img}">
            <h4>Volkswagen.co.uk</h4>
        </li>
    </ul> 
```

`<li data-bind="attr: {data-id: $data.id}">`所以特别是这行代码是我想要工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:27:27.427

因为`data-id`不是 JavaScript 中的合法标识符名称，您需要编写：

```
<li data-bind="attr: { 'data-id' : $data.id}"> 
```

请参阅 attr 绑定文档[应用名称不合法的 JavaScript 变量名称](http://knockoutjs.com/documentation/attr-binding.html)部分的属性。

# node.js - 如何安装旧版本的 express.js

> ID：14279155
> 
> 赞同：5
> 
> 时间：2013-01-11T13:25:03.513
> 
> 标签：node.js, express, socket.io

如何安装正确版本的 express，在安装 2.x 之前是否必须卸载 3.x？

这是我要测试的教程：http: [//psitsmike.com/2011/09/node-js-and-socket-io-chat-tutorial/](http://psitsmike.com/2011/09/node-js-and-socket-io-chat-tutorial/)

我使用了这个 package.json：

```
{
     "name": "mukhin_chat",
     "description": "example chat application with socket.io",
     "version": "0.0.1",
     "dependencies": {
        "express": "2.4.6",
        "socket.io": "0.8.4"
     }
} 
```

并使用以下命令：

```
npm install -d 
```

当我运行该应用程序时，我仍然会收到以下问题：...您是否正在从 Express 2.x 迁移到 3.x...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-12T02:36:34.453

这很容易，要删除当前版本的 express，只需键入

```
npm uninstall express 
```

后跟以下命令安装特定版本的包：

```
npm install express@2.x.x 
```

# json - JSON RFC 4627：“false = %x66.61.6c.73.65 ; false”的含义是什么

> ID：14279156
> 
> 赞同：0
> 
> 时间：2013-01-11T13:25:06.427
> 
> 标签：json, rfc4627

我正在阅读 RFC 4627 (http://www.ietf.org/rfc/rfc4627.txt)。在第 2.1 段中，它谈到了三个字面名称 true、false、null。

```
 false = %x66.61.6c.73.65   ; false

     null  = %x6e.75.6c.6c      ; null

     true  = %x74.72.75.65      ; true 
```

我完全迷失在这里。有谁知道 %x66.61.6c.73.65 是什么意思？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:27:56.940

它们是用于这些单词的字节。简而言之，文本将以 ASCII（或等效的）编码，而不是其他编码。

```
>>> print '\x66\x61\x6c\x73\x65'
false 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T13:28:53.287

乍一看，这些似乎是字母的 ascii 代码：

*   false = "f"+"a"+"l"+"s"+"e" 例如：char(0x65)+char(0x61)+char(0x6c)+char(0x73)+char(0x65)

# python - 如何在 bulkloader 中配置导出属性 db.ListProperty(db.Key)

> ID：14279159
> 
> 赞同：-1
> 
> 时间：2013-01-11T13:25:21.877
> 
> 标签：python, google-app-engine, google-cloud-datastore, bulkloader

我开始使用在 bulkloader.yaml 中配置的 bulkLoader 从 Google AppEngine 导出数据。对于像 string、int 和 bool 这样的“标准”数据，这没问题。即使是单个密钥也可以轻松导出。

现在我有一些数据`db.ListProperty(db.Keys)`并且导出失败。在我试过的 export_transform 中，看到 ??? 在下面的 bulkloader_config.yaml 中：

*   `transform.key_id_or_name_as_string`
*   `transform.create_deep_key(('Coupon', db.Key))`
*   `join_list(",")`
*   和许多其他来自[http://googleappengine.googlecode.com/svn/trunk/python/google/appengine/ext/bulkload/transform.py](http://googleappengine.googlecode.com/svn/trunk/python/google/appengine/ext/bulkload/transform.py)

知道如何导出密钥列表吗？

数据模型.py

```
 class Receipt(db.Model):
    coupons = db.ListProperty(db.Key) # only coupon ids of approved coupons 
```

bulkloader_config.yaml

```
 - kind: Receipt
      connector: csv
      connector_options:
        columns: from_header
      property_map:
        - property: __key__
          export_transform: transform.key_id_or_name_as_string
        - property: coupons
          import_transform: transform.create_foreign_key('Coupon')
          export_transform: transform.??? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:13:21.877

我必须做一些小技巧，但它有效

```
 def prop_name_converter(obj):
    if not obj:
      return ''
    str_list = []
    for o in obj:
      str_list.append(`o`)
    return ''.join(str_list) 
```

# c++ - QT QGraphicsScene 绘制圆弧

> ID：14279162
> 
> 赞同：2
> 
> 时间：2013-01-11T13:25:34.913
> 
> 标签：c++, qt, qgraphicsscene, qpainter

我有一个关于在场景上绘制特定弧线的问题。我有关于弧的这些信息：

起始坐标，起始角度，结束角度，半径。

但我不能有效地使用它们`QPainter`。实际上我尝试`QPainterPath`使用形状来显示`QGraphicsScene`，`addPath("")`但我无法正确使用功能。我的问题是关于如何使用这些信息来绘制弧线以及如何在我的图形场景中显示它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T13:38:37.770

您可以使用 a[`QGraphicsEllipseItem`](http://doc-snapshot.qt-project.org/4.8/qgraphicsellipseitem.html#details)将椭圆、圆和线段/弧添加到 a`QGraphicsScene`中。

尝试

```
QGraphicsEllipseItem* item = new QGraphicsEllipseItem(x, y, width, height);
item->setStartAngle(startAngle);
item->setSpanAngle(endAngle - startAngle);
scene->addItem(item); 
```

不幸的是，QGraphicsEllipseItem 只支持`QPainter::drawEllipse()`和`QPainter::drawPie()`- 后者可用于绘制弧线，但有副作用，即从弧线的起点和终点到中心始终绘制一条线。

如果您需要一个真正的弧，您可以例如子类`QGraphicsEllipseItem`化并覆盖该`paint()`方法：

```
class QGraphicsArcItem : public QGraphicsEllipseItem {
public:
    QGraphicsArcItem ( qreal x, qreal y, qreal width, qreal height, QGraphicsItem * parent = 0 ) :
        QGraphicsEllipseItem(x, y, width, height, parent) {
    }

protected:
    void paint ( QPainter * painter, const QStyleOptionGraphicsItem * option, QWidget * widget) {
        painter->setPen(pen());
        painter->setBrush(brush());
        painter->drawArc(rect(), startAngle(), spanAngle());

//        if (option->state & QStyle::State_Selected)
//            qt_graphicsItem_highlightSelected(this, painter, option);
    }
}; 
```

然后您仍然需要处理项目突出显示，不幸`qt_graphicsItem_highlightSelected`的是 Qt 库中定义了一个静态函数。

# forms - 对表单的绑定请求不适用于集合类型

> ID：14279174
> 
> 赞同：0
> 
> 时间：2013-01-11T13:26:44.527
> 
> 标签：forms, symfony, symfony-2.0

我不对实体使用任何 ORM。此表单仅用于发送电子邮件。

在我的控制器中，我有这个：

```
 $builder = $this->myHelper
        ->createBuilder('form', null)

        ->add('my_group', 'collection', array(
        'type' => 'text',
        'label' => 'mylabel'
    ));

    $builder->get('my_group')->add('first_node', 'text');
    $builder->get('my_group')->add('second_node', 'text');

    return $builder->getForm(); 
```

表单呈现正常 - 具有预期的其他输入字段。但是当涉及到绑定请求以在我的数据后处理操作中形成时 -`my_group`字段为空（即使由于该字段已发布在`'form'`数组中）：

```
// var_dump($request->get('form'));die;
array
 'my_group' => 
   array
     'first_node' => string 'asdasd' (length=3)
     'second_node' => string 'asdasda' (length=3) 
```

当我将请求绑定到表单时，我在`my_group`集合字段中有 null （所有其他输入都可以）。

```
$form->bindRequest($request);
$formData = $form->getData();
var_dump($formData);die; // Outputs my_group => null 
```

我究竟做错了什么？

* * *

**更新 1**

Twig 模板的一部分（由[Max](https://stackoverflow.com/users/1073535/max-malecki)请求）：

```
{% for field in form.children if 'hidden' not in field.vars.types %}
    ...
    {% elseif 'collection' in field.vars.types %}
        <th>{{ form_label(field) }}</th>
        <td>
            {% for collection_field in field %}
                {{ form_widget(collection_field) }}
            {% endfor %}
        </td>
    {% else %}
    ...
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:05:43.497

您需要创建：

1.  表单类
2.  表单模板（带宏）
3.  jQuery 脚本来操作表单中的数据

检查本教程:)

[http://toni.uebernickel.info/2012/03/15/an-example-of-symfony2-collectiontype-form-field-prototype.html](http://toni.uebernickel.info/2012/03/15/an-example-of-symfony2-collectiontype-form-field-prototype.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:54:17.083

当我`FormType`为所需的集合定义时，我的问题得到了解决：

```
class MyType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('first_node', 'text');
        $builder->add('second_node', 'text');
    }

    public function getDefaultOptions(array $options)
    {
        return array();
    }

    public function getName()
    {
        return 'mytype';
    }
} 
```

然后我在构建器中使用它：

```
$builder = $this->myHelper
    ->createBuilder('form', null)

    ->add('my_group', new MyType(), array(
    'label' => 'mylabel'
));

return $builder->getForm(); 
```

在这个数据被正确地形成之后。

# asp.net-mvc - MVC3 自定义路由

> ID：14279175
> 
> 赞同：0
> 
> 时间：2013-01-11T13:26:44.870
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我用 MVC 开发了一个网站，但我对地址栏中的链接地址如何显示有一点问题。当我打开网站时，我必须先登录；登录账号后，首页出现了，但是在浏览器地址栏还是有

```
http://localhost:1413/Account/LogOn 
```

代替

```
http://localhost:1413/Home 
```

另外，注销后，我被重定向到登录页面，但在地址栏中出现

```
http://localhost:1413/Account/LogOn 
```

我想只是

```
http://localhost:1413/Account/LogOff 
```

我的 Global.asx 代码

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );           
    } 
```

我使用了这种类型的重定向，但结果是一样的：

```
public ActionResult LogOn()
    {
        if (HttpContext.User.Identity.IsAuthenticated == true)
        {
            return RedirectToAction("Index", "Home");
        }
        return View();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:33:37.787

您需要像这样使用重定向操作到主页

```
RedirectToAction("Action", "Controller") 
```

因此，当用户通过身份验证后，您需要将用户重定向到特定控制器。

用户注销时也是如此

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:34:53.813

如我所见，您的问题不是路由，因为您的路由工作正常。您的问题是您在控制器帐户中工作。这就是为什么帐户总是出现在您的网址中。如果你想得到这个：

```
http://localhost:1413/Home 
```

您必须链接到您称为 HomeController.cs 的控制器

我希望你能理解我试图解释的内容。

也许这可以帮助你更多： http: [//www.codeproject.com/Articles/190267/Controllers-and-Routers-in-ASP-NET-MVC-3](http://www.codeproject.com/Articles/190267/Controllers-and-Routers-in-ASP-NET-MVC-3)

# blackberry - 在黑莓中将json数据发送到服务器

> ID：14279178
> 
> 赞同：0
> 
> 时间：2013-01-11T13:27:00.340
> 
> 标签：blackberry, java-me

在我的应用程序中，我必须集成 API。我没有得到如何检查互联网是否可用的代码。如何将 JSON 数据发送到服务器。请帮帮我。与在 android 中一样，我们在 AsyncTask 类中调用 API。在黑莓中我没有找到这样的。

建议我一些链接或想法，以便我可以集成代码。我在谷歌搜索。但没有得到结果。我尝试过的是：

```
 JSONObject postData = new JSONObject();
 postData.put("userId", "24");
 postData.put("messageTime","06:00:00");
 postData.put("language", language[lang_Ocf.getSelectedIndex()]);
 System.out.println("********json********"+postData);

 ConnectionFactory conFactory = new ConnectionFactory();
 ConnectionDescriptor conDesc = null;
 try
 {
    conDesc = conFactory.getConnection(url+";deviceside=true");
 }
 catch(Exception e)
 {
    System.out.println(e.toString()+":"+e.getMessage());
 }

 String response = ""; // this variable used for the server response
 // if we can get the connection descriptor from ConnectionFactory
 if(null != conDesc)
 {
    try
    {
       HttpConnection connection = (HttpConnection)conDesc.getConnection();
       //set the header property
       connection.setRequestMethod(HttpConnection.POST);
       connection.setRequestProperty("Content-Length", Integer.toString(postData.length())); 
       connection.setRequestProperty("Content-Type","application/json");
       OutputStream out = connection.openOutputStream();
       out.write(postData.get);
       out.flush();
       out.close();
       int responseCode = connection.getResponseCode(); 
       if(responseCode == HttpConnection.HTTP_OK){

          InputStream in = connection.openInputStream();
          StringBuffer buf = new StringBuffer();
          int read = -1;
          while((read = in.read())!= -1)
             buf.append((char)read);

          response = buf.toString();
       }
       Dialog.inform(response);

       connection.close();
    } catch(Exception e) {

    }
 }

 return response; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:27:02.867

我解决了这个问题

错误：

> 错误：无法运行程序“jar”：CreateProcess error=2，系统找不到指定的文件打包项目HelaBibleWhereUR失败（耗时10.715秒）

我只是将 jar.exe 放在 jre bin 文件夹中的 java bin 文件夹下。

# php - symfony 1.4 路由：使用 URL 参数匹配路由

> ID：14279184
> 
> 赞同：0
> 
> 时间：2013-01-11T13:27:13.547
> 
> 标签：php, symfony1, routes, symfony-1.4

我为几个搜索结果页面设置了友好的 URL，每个页面都使用了自定义路由：

```
friendly_search_resultpage:
  url: /products/my-friendly-alias
  param:
    module: products
    action: search
    querystring: searchattribute
    querystring2: searchattribute2 
```

这很好用，但是当直接进行搜索（即浏览到`/products/search?querystring=search...`）时，我想设置一个`<link rel="canonical">`包含匹配的友好 URL。这将有助于 Google 了解这种关系并且不存在重复的内容。

我将友好的 URL 路由放在顶部，`routes.yml`并希望有一个神奇的匹配，但是在 symfony 所做的检查中无法识别 URL 参数。我已经深入研究了 sfRoute，但没有运气。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:54:52.567

我最终编写了一个自定义路由类来用于这些路由，它在调用 url_for() 时执行。这是代码：

```
<?php
class mySearchFriendlyRoute extends sfRoute
{
  public function matchesParameters($params, $context = array())
  {
    // I can't find symfony sorting parameters into order, so I do
    // (so that foo=x&bar=y is treated the same as bar=y&foo=x)
    ksort($params);
    $mine = $this->defaults;
    ksort($mine);
    if ($params == $mine) {
      return true;
    }
    return false;
  }
} 
```

要使用，请添加`class: mySearchFriendlyRoute`到 routes.yml 条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:17:26.303

尝试使用您自己的路线：

```
friendly_search_resultpage:
  class: YourRouteClassName
... 
```

并通过具体的规范化重载 sfRoute::generate() （返回规范的 URL）。

在上次 sf1.4 修订后，这在我的项目中重定向为 301。

# scala - 如何避免由于akka actor中的锁定超时而丢弃消息？

> ID：14279185
> 
> 赞同：2
> 
> 时间：2013-01-11T13:27:13.340
> 
> 标签：scala, akka, actor

波纹管是来自以下构建日志的一行：[https ://travis-ci.org/plokhotnyuk/actors/jobs/4088637/#L630](https://travis-ci.org/plokhotnyuk/actors/jobs/4088637/#L630)

```
[WARN] [01/11/2013 12:26:04.908] [Thread-47] [akka://system/user/$t] dropping message of typeclass com.github.plokhotnyuk.actors.Message due to lock timeout 
```

是否有能力配置此超时或完全避免锁定？

测试代码在这里： [https ://github.com/plokhotnyuk/actors/blob/master/src/test/scala/com/github/plokhotnyuk/actors/AkkaActorSpec.scala](https://github.com/plokhotnyuk/actors/blob/master/src/test/scala/com/github/plokhotnyuk/actors/AkkaActorSpec.scala)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:45:50.313

此超时可在 中配置`akka.actor.unstarted-push-timeout`，但如果您要创建许多顶级演员 ( `system.actorOf`)，您应该将演员创建为另一个演员的孩子 ( `context.actorOf`)。

# silverlight - 如何在 Mac OS 上使用 Silverlight 的 SLLauncher？

> ID：14279189
> 
> 赞同：3
> 
> 时间：2013-01-11T13:27:39.450
> 
> 标签：silverlight, silverlight-5.0

我想绕过 Silverlight 的内置 OOB 安装机制。通过使用 sllauncher 工具，我在 Windows 平台上取得了成功：

```
"C:\Program Files\Microsoft Silverlight\sllauncher.exe" /emulate:"C:\path\app.xap" /origin:"http://domain.org/content/app.xap?launchArguments" 
```

Mac OS 版本还有一个同名工具：

```
/Library/Application Support/Microsoft/Silverlight/OutOfBrowser/SLLauncher.app 
```

不幸的是，我找不到有关此工具的任何文档。它是否具有与 Windows 版本相同的功能？如果是，应该如何调用它？

# javascript - 如何使用 jquery 将外部 html 文件包含到 html 页面中

> ID：14279190
> 
> 赞同：0
> 
> 时间：2013-01-11T13:27:44.820
> 
> 标签：javascript, html, jquery, iframe

> **可能重复：**
> [规避同源策略的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

我有 url 包含 html。

[http://s3test.sirahu.net/12518%3A11679%3A581?&AWSAccessKeyId=AKIAJEI7M6ZBESTUUDIA&Expires=1357973634&Signature=2G7M2uQJ%2Ba9LJUcGgEbxcItsBKQ%3D](http://s3test.sirahu.net/12518%3A11679%3A581?&AWSAccessKeyId=AKIAJEI7M6ZBESTUUDIA&Expires=1357973634&Signature=2G7M2uQJ%2Ba9LJUcGgEbxcItsBKQ%3D)

我需要在我的网页中包含并显示此 CDN HTML 内容。我尝试过使用 ajax，但遇到了跨域问题，我也尝试过使用 iframe，但 url 将下载而不显示在 iframe 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:16:58.083

服务器响应`Content-Disposition: attachment; filename="17893_content.html"`（意思是“下载这个，不要显示它”）并声称该文件`binary/octet-stream`不是`text/html`.

如果您希望浏览器呈现它，那么服务器必须声明它是 HTML，而不是说应该下载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:41:42.577

在 JavaScript 中，您可以使用 postMessage 方法进行跨域请求（[https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)）。

# javascript - 如何在网络浏览器中即时客户端解密/加密文件传输？

> ID：14279196
> 
> 赞同：7
> 
> 时间：2013-01-11T13:28:06.757
> 
> 标签：javascript, html, encryption, filesystems

> **轻松隐私**过去，安全地存储和传输机密信息需要安装专用软件。新的 Mega 可以在您的浏览器中即时透明地加密和解密您的数据。您掌握存储在云中的内容的密钥，而不是我们。

此报价来自新的 MegaUpload 文件托管服务的[网站，该服务计划于本月 1 月 19 日推出。](http://mega.co.nz/)

作为一名网络开发人员，我自然对背后的技术感兴趣和好奇。

我所能找到的只是屏幕截图和声明，它们看起来很真实，数据*真的*永远不会让客户端未加密！

使用 AES 保护文件和传输。

每个客户端都有一个非对称密钥对，我只能猜测为什么，但我认为它将用于加密 AES 初始化向量和密钥，以供您要与之共享文件的其他客户端。

然而我的问题是这样的：

如何在技术上拦截文件上传/下载？

我知道 RSA 和 AES 都有在 javascript 中运行并且非常高效的加密算法。

但是似乎支持在文件系统内操作的唯一浏览器是 chrome。

数据如何从硬盘驱动器传输到客户端浏览器以进行加密？它如何从那里到达硬盘驱动器上的文件？

我不知道文件系统 API 之类的东西。甚至 html5 也只支持某种对象存储。

我想它对于某些浏览器插件或可能是一个 java 或 adobe air 小程序来说非常微不足道，但他们声称不会有需要安装的第 3 方软件之类的东西。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T14:21:22.413

> 如何在技术上拦截文件上传/下载？

你不*拦截*它。用户使用一个元素选择一个文件（或多个文件）`<input type="file">`，然后 JavaScript 读取文件输入的值并对其进行加密。上传可能会通过 Ajax 完成。

> 但是似乎支持在文件系统内操作的唯一浏览器是 chrome。

Chrome 是第一个实现[*文件系统*API](http://www.html5rocks.com/en/tutorials/file/filesystem/)的，这与[*文件*API](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)不同。文件系统 API 管理沙盒文件系统（不是用户真正的操作系统文件系统）；文件 API 从`<input type="file">`元素中读取文件。在大多数现代浏览器中，文件 API 具有[更广泛的支持](http://caniuse.com/fileapi)（但不是完美的支持）。

对于加密和上传，JavaScript 可以读取用户使用文件输入专门选择的文件，并通过 Ajax 将加密值发送到服务器。对于下载，浏览器可以执行资源的 Ajax 获取、解密并提示用户保存文件（例如，通过重定向到`data:`URI）。无需对文件系统进行编程访问。

# lazy-evaluation - haskell中严格版本的含义是什么？

> ID：14279199
> 
> 赞同：6
> 
> 时间：2013-01-11T13:28:16.020
> 
> 标签：lazy-evaluation, haskell, strictness

关注<Real World Haskell>，据说 `foldl'`是严格版的`foldl`。

但是我很难理解，是什么`strict`意思？

```
foldl f z0 xs0 = lgo z0 xs0
         where
            lgo z []     =  z
            lgo z (x:xs) = lgo (f z x) xs

foldl' f z0 xs0 = lgo z0 xs0
    where lgo z []     = z
          lgo z (x:xs) = let z' = f z x in z' `seq` lgo z' xs 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T16:39:17.557

它并不广为人知，但`foldl'`实际上它的累加器参数并不严格！回想一下类型：

```
foldl' :: (a -> b -> a) -> a -> [b] -> a 
```

它在参数 2 中的严格性取决于为参数 1 给出的函数的严格性，正如您通过传递看到的那样`const`：

```
Prelude Data.List> foldl' (const (+1)) undefined [1]
2
Prelude Data.List> foldl' (const (+1)) undefined [1..4]
5 
```

你会天真地认为，“foldl' 是严格的”意味着“在累加器参数中是严格的”。以上与此相矛盾。

然而，它更加隐蔽，因为严格性只针对循环的 cons 情况下函数应用的结果。所以如果你输入基本情况，你仍然会得到底部，但不是归纳情况：

```
Prelude Data.List> foldl' (const (+1)) undefined []
*** Exception: Prelude.undefined 
```

所以[参数 2的严格性](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/Data-List.html#foldl%27) *也*取决于参数 3 的*值*！

这就是我写它的方式：在它的第二个论点中“完全”严格。

```
foldl' f z0 xs0 = go z0 xs0
  where
    go !z []     = z
    go !z (x:xs) = go (f z x) xs 
```

如您所见，第二个论点确实很严格：

```
Prelude Data.List.Stream> foldl' (\a b -> 1) undefined [undefined]
*** Exception: Prelude.undefined 
```

与Haskell2010版本相比：

```
Prelude Data.List.Stream> Data.List.foldl' (\a b -> 1 ) undefined [undefined]
1 
```

这实际上具有实际影响——当前定义不会一致地拆箱其累加器参数。

历史记录：这是我们在 2007 年为流融合论文指定列表库的严格语义时发现的，指定严格的方法在 Duncan Coutt 的[博士论文](http://community.haskell.org/~duncan/thesis.pdf)中给出。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-11T13:54:56.263

foldl 和（严格的） foldl' 在语义上接近等价。不同之处在于性能，尤其是在您遍历大型列表时。懒惰具有构建 thunk 的开销，而 foldl' 是获得该结果的更有效方法，因为它不会构建巨大的 thunk。

[Haskell Wiki](http://www.haskell.org/haskellwiki/Foldr_Foldl_Foldl%27)上有一篇非常好的文章详细解释了这一点

严格函数的工作方式与 C 或其他语言中的函数类似，因为它们的参数通常会被急切地求值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T13:30:13.493

严格函数是一个函数，其参数在主体之前被评估。

# java - URL编码Java中带有换行符的文本

> ID：14279203
> 
> 赞同：0
> 
> 时间：2013-01-11T13:28:39.993
> 
> 标签：java, httprequest, urlencode

所以我有一个`ArrayList`对象`String`，我想使用 Apache Http 客户端在 Http POST 请求中发送。

我现在正在做的是将 List 对象连接到一个新的`String`每个对象，然后是`System.getProperty("line.separator")`一个换行符。但是我从服务器收到了错误的响应，告诉我的 URL 格式不正确。在此先感谢您的帮助！

```
ArrayList<String> episodeList
String episodesAsString = "";

    for(String s : episodeList)     
            episodesAsString = episodesAsString.concat(s + NL);

        URI uri = new URI(
                "https", 
                "my.domain.com", 
                "/path/add?this=123456&application=myApp&event=myEvent&description=" + episodesAsString,
                null);

    HttpClient client = new DefaultHttpClient();
    HttpPost request = new HttpPost(uri);
    HttpResponse response = client.execute(request); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:00:07.467

我认为URI是问题所在。即使我认为您可以使用它构建正确的 URL，但您在主机名之前缺少“//”。我以您的为例，我相信该请求将：

```
https:my.domain.com/path/addthis=123456&application=myApp&event=myEvent&description=XXX 
```

这是基于我刚刚花了 5 分钟阅读 URI 类的 JavaDoc。您可能可以通过打开代理或嗅探器并查看标头的有效负载的样子来测试这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:35:15.440

在您的情况下，您没有发送`POST`数据。问题可能出在错误的 URL 上。

尝试这个：

```
String strUrl = "http://localhost:7001/RESTFUL_Tutorial/rest/hello/test1/test naveen kumar/test pwd";

URL url = new URL(strUrl);
// for getting URI
URI urlinfo = new URI(url.getProtocol(), url.getUserInfo(), url.getHost(), url.getPort(), url.getPath(), url.getQuery(), url.getRef());
// for getting URL
url = urlinfo.toURL(); 
```

为了更好地使用[URLEncoder](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLEncoder.html#encode%28java.lang.String%29)

放置您的网址.. :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:39:09.907

你的意思似乎`NL`是换行符。而是在连接所有字符串并使用`\n`而不是 NL 之后，使用[URLEncoder](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLEncoder.html#encode%28java.lang.String%29)对字符串进行编码。还要检查是否在调试中错误地传递了 URL。

# php - Fuel PHP - ORM - 有很多并且属于

> ID：14279204
> 
> 赞同：2
> 
> 时间：2013-01-11T13:28:44.963
> 
> 标签：php, orm, fuelphp

我遇到了关系问题（大声笑）......它与ORM有关。

我有两个模型“项目”和“报价”。一个项目可以有许多优惠 - 所以优惠属于项目。但是，要约也有一个不同的项目。

这是我的（简化的）项目模型：

```
class Model_Item extends \Orm\Model
{

  protected static $_belongs_to = array('user', 'offer');
  protected static $_has_many = array('offers');

  protected static $_properties = array(
    'id',
    'user_id',
  );

} 
```

这是我的（简化的）优惠模型：

```
class Model_Offer extends \Orm\Model
{
protected static $_belongs_to = array('item');
protected static $_has_one = array('item');

protected static $_properties = array(
  'id',
  'item_id',
  'owneditem_id', // <- THIS IS THE ITEM IT OWNS
  );
} 
```

如您所见，我需要能够在报价模型中保存“拥有”项目，以及它“拥有”的项目，但我无法重新声明 item_id，因为它已经被报价的所有者使用。我如何告诉 Fuel 和 ORM ownitem_id 是一个项目对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:08:53.813

我终于明白了！

报价关系：

```
protected static $_has_one = array(
        //(offered item)
        'offereditem' => array(
            'key_from' => 'offereditem_id',
            'model_to' => 'Model_Item',
      'key_to' => 'id',
      'cascade_save' => true,
      'cascade_delete' => false,
        )
    ); 
```

和项目模型关系：

protected static $_belongs_to = array('user', 'item'); 受保护的静态 $_has_many = array('offers');

有迁移：

```
//Add OfferedItem to Offers Migration
oil generate migration add_offereditem_to_offers offereditem:int

//Rename OfferedItem to OfferedItem_ID in Offers Migration
oil generate migration rename_field_offereditem_to_offereditem_id_in_offers 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:17:05.807

在fuel/app/migration 修改你的create_Offers.php

```
public function up()
{
    \DBUtil::create_table('offers', array(
        'id' => array('constraint' => 11, 'type' => 'int', 'auto_increment' 
    ), array('id'),false, 'InnoDB', 'utf8_general_ci',
array(
    array(
        'constraint' => 'offers_items',
        'key' => 'offer_id',
        'reference' => array(
            'table' => 'items',
            'column' => 'id',
        ),
        'on_update' => 'CASCADE',
        'on_delete' => 'RESTRICT'
    ))););
} 
```

# c# - 与错误代码集成的购物车范围内的运费：10413

> ID：14279207
> 
> 赞同：0
> 
> 时间：2013-01-11T13:28:54.747
> 
> 标签：c#, asp.net, paypal, paypal-sandbox

我正在尝试通过*沙箱*为我的网站*集成 payapl 。*

 *我能够将多个项目发送到*贝宝*，它工作正常。但是我想设置*CART-WIDE*运费并将其发送到*paypal*。

我收到错误代码：

*`10413 ("ErrorCode=10413&Desc=Transaction refused because of an invalid argument. See additional error messages for details.& Desc2=The totals of the cart item amounts do not match order amounts.")`*

```
My CART:
Item: Mens Jackets
Price: 14.99
DESC: "SAMPLE"
QTY: 1
ITEM TOTAL: 14.99
SHIPPING: 5.99

CART TOTAL: 20.94 
```

我正在设置以下变量，但我不知道我做错了什么。

```
NVPCodec encoder = new NVPCodec();
                        encoder["METHOD"] = "SetExpressCheckout";
                        encoder["RETURNURL"] = returnURL;
                        encoder["CANCELURL"] = cancelURL;
                        encoder["BRANDNAME"] = "Mountain Warehouse Sample Application";
                        encoder["PAYMENTREQUEST_0_PAYMENTACTION"] = "Sale";
                        encoder["PAYMENTREQUEST_0_CURRENCYCODE"] = "GBP";

                        // Get the Shopping Cart Products
                        int i = 0;
                        Decimal totalItemAmt = 0.00M;
                        string cartShippingAmt = "";
                        foreach (BasketItem item in basket.Items)
                        {
                                    if (item.OrderItemType == OrderItemType.Product)
                                    {
                                                encoder["L_PAYMENTREQUEST_0_NAME" + i] = item.Name.ToString();
                                                encoder["L_PAYMENTREQUEST_0_AMT" + i] = item.Price.ToString("0.00");
                                                encoder["L_PAYMENTREQUEST_0_QTY" + i] = item.Quantity.ToString();
                                                i++;
                                                totalItemAmt += Convert.ToDecimal(item.Price.ToString("0.00"));
                                    }

                                    if (item.OrderItemType == OrderItemType.Shipping)
                                    {
                                                cartShippingAmt = item.Price.ToString("0.00");
                                    }
                        }

                        encoder["PAYMENTREQUEST_0_ITEMAMT"] = totalItemAmt.ToString();
                        encoder["PAYMENTREQUEST_0_AMT"] = amt;
                        encoder["HANDLING_CART"] = cartShippingAmt; 
```

这是发送到*贝宝的查询*

```
METHOD=SetExpressCheckout&
RETURNURL=http%3a%2f%2flocalhost%3a1234%2fCheckout%2fCheckoutReview.aspx&
CANCELURL=http%3a%2f%2flocalhost%3a1234%2fCheckout%2fCheckoutCancel.aspx&
BRANDNAME=Sample+Application&
PAYMENTREQUEST_0_PAYMENTACTION=Sale&
PAYMENTREQUEST_0_CURRENCYCODE=GBP&
L_PAYMENTREQUEST_0_NAME0=MENS+JACKETS&
L_PAYMENTREQUEST_0_AMT0=14.99&
L_PAYMENTREQUEST_0_QTY0=1&
PAYMENTREQUEST_0_ITEMAMT=14.99&
HANDLING_CART=5.95&
PAYMENTREQUEST_0_AMT=20.94 
```

我想我为整个购物车分配了错误的可变运费。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:12:43.440

你这里有一些问题。

首先，您使用的某些请求参数不正确。HANDLING_CART 不是有效的请求参数。我认为您正在寻找的是 HANDLINGAMT（实际上是 PAYMENTREQUEST_0_HANDLINGAMT）。

在每次付款中，ITEMAMT + SHIPPINGAMT + HANDLINGAMT + TAXAMT 的总和需要等于 AMT。在您的情况下，PayPal 忽略了您发送的无效参数，因此最终会看到以下内容......

PAYMENTREQUEST_0_ITEMAMT = 14.99 PAYMENTREQUEST_0_AMT = 20.94

它没有看到您的处理量，因为该参数无效，因此，总数与他们看到的不匹配。您只需将 HANDLING_CART 更改为 PAYMENTREQUEST_0_HANDLINGAMT 即可解决您的问题。

这是一个工作 SetExpressCheckout 请求的示例，其中包含多个项目和一些附加选项......

```
[USER] => ****
[PWD] => ****
[VERSION] => 97.0
[BUTTONSOURCE] => AngellEYE_PHPClass
[SIGNATURE] => ****
[METHOD] => SetExpressCheckout
[MAXAMT] => 200.00
[RETURNURL] => http://paypal.angelleye.com/standard/samples/DoExpressCheckoutPayment.php
[CANCELURL] => http://paypal.angelleye.com/paypal/class/cancel.php
[ALLOWNOTE] => 1
[HDRIMG] => http://paypal.angelleye.com/images/hdrimg.jpg
[SOLUTIONTYPE] => Sole
[LANDINGPAGE] => Billing
[BRANDNAME] => Angell EYE
[CUSTOMERSERVICENUMBER] => 555-555-5555
[GIFTMESSAGEENABLE] => 1
[GIFTRECEIPTENABLE] => 1
[GIFTWRAPENABLE] => 1
[GIFTWRAPNAME] => Box with Ribbon
[GIFTWRAPAMOUNT] => 2.50
[BUYEREMAILOPTIONENABLE] => 1
[SURVEYQUESTION] => Did you like this checkout?
[SURVEYENABLE] => 1
[BUYERREGISTRATIONDATE] => 2012-07-14T00:00:00Z
[L_SURVEYCHOICE0] => Yes
[L_SURVEYCHOICE1] => No
[PAYMENTREQUEST_0_AMT] => 100.00
[PAYMENTREQUEST_0_CURRENCYCODE] => USD
[PAYMENTREQUEST_0_ITEMAMT] => 80.00
[PAYMENTREQUEST_0_SHIPPINGAMT] => 15.00
[PAYMENTREQUEST_0_TAXAMT] => 5.00
[PAYMENTREQUEST_0_DESC] => This is a test order.
[PAYMENTREQUEST_0_NOTETEXT] => This is a test note before ever having left the web site.
[PAYMENTREQUEST_0_PAYMENTACTION] => Sale
[L_PAYMENTREQUEST_0_NAME0] => Widget 123
[L_PAYMENTREQUEST_0_DESC0] => Widget 123
[L_PAYMENTREQUEST_0_AMT0] => 40.00
[L_PAYMENTREQUEST_0_NUMBER0] => 123
[L_PAYMENTREQUEST_0_QTY0] => 1
[L_PAYMENTREQUEST_0_ITEMURL0] => http://www.angelleye.com/products/123.php
[L_PAYMENTREQUEST_0_NAME1] => Widget 456
[L_PAYMENTREQUEST_0_DESC1] => Widget 456
[L_PAYMENTREQUEST_0_AMT1] => 40.00
[L_PAYMENTREQUEST_0_NUMBER1] => 456
[L_PAYMENTREQUEST_0_QTY1] => 1
[L_PAYMENTREQUEST_0_ITEMURL1] => http://www.angelleye.com/products/456.php 
```*

# sh - /bin/sh RHEL6 源不工作

> ID：14279209
> 
> 赞同：0
> 
> 时间：2013-01-11T13:28:58.437
> 
> 标签：sh

我们有一个构建环境，它为几个环境设置提供脚本，如下所示

```
if test -f build_env
then
# Source the config file
. build_env 
```

但是在 RHEL6 中这似乎是如何失败的

```
sh-4.1$ . build_env
sh: .: build_env: file not found 
```

而在 RHEL4 中它可以工作

```
sh-3.00$ . buildenv
sh-3.00$ 
```

可能是什么问题 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:34:02.963

尝试`. ./build_env`（注意'./'）。

此外，您的*if*语法值得怀疑，但在您修复问题中的格式之前我无法确定。我会这样写：

```
if test -f build_env; then . ./build_env; fi 
```

# objective-c - 项目“test.xcodeproj”已修改，但已在外部更改

> ID：14279210
> 
> 赞同：4
> 
> 时间：2013-01-11T13:29:00.997
> 
> 标签：objective-c, xcode, macos, cocoa, svn

错误地我恢复了我的 test.xcodeproj 文件。现在每次我收到这条消息。

![在此处输入图像描述](../Images/4c6151164d890675e7657770ffb842b2.png)

如何保存当前版本？我正在使用 xcode 版本 3.2.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:14:57.767

1.  按“保留此版本”。
2.  强制退出 Xcode。

# delphi - 使用 Indy 9 发送带有嵌入图片的电子邮件

> ID：14279211
> 
> 赞同：2
> 
> 时间：2013-01-11T13:29:22.357
> 
> 标签：delphi, delphi-7, indy

我正在尝试向我的程序添加使用 Indy 9 通过 SMTP 发送 html 电子邮件的功能。如果程序只包含文本（文本将是希伯来语，所以我需要从右到左显示它，这意味着我是使用 HTML 语句），然后正确发送电子邮件。我的问题在于将图片嵌入到 HTML 流中。

HTML 流将使用类似的命令

```
<IMG SRC="cid:foo4atfoo1atbar.net" ALT="IETF logo"> 
```

虽然 Indy 10 组件 TIdAttachmentFile 有一个 ComponentID 属性，其值必须设置为“cid”引用的值，但我找不到在 Indy 9 中设置 ComponentID 属性的位置。

目前，处理添加图片（名称在 laPicture.text 中）的代码如下所示

```
 if laPicture.text <> '' then
  with TIdAttachment.Create (email.MessageParts, laPicture.text) do
   begin
    ContentDisposition:= 'inline';
    ContentType:= 'image/jpeg';
    DisplayName:= ExtractFileName (laPicture.text);
    filename:= ExtractFileName (laPicture.text);
   end; 
```

我在哪里定义 ContentID？

而且，虽然这是一个愚蠢的问题，但我怎么知道我拥有的是哪个版本的 Indy？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T16:37:28.877

`TIdAttachment`派生自`TIdMessagePart`，它具有公共`ContentID`属性。如果您安装的 Indy 9 版本没有该属性，那么您使用的是过时的版本，因此请使用该`ExtraHeaders`属性来`Content-ID`手动添加标题。

有关使用 HTML 电子邮件的更多信息，请查看 Indy 网站上的以下博客文章：

[HTML 消息](http://www.projectindy.org/Sockets/Blogs/RLebeau/2005_08_17_A.EN.aspx)

**更新：**因此，如果 HTML 显示，`cid:foo4atfoo1atbar.net`那么您需要在代码中执行此操作以匹配它：

```
with TIdAttachment.Create (email.MessageParts, laPicture.text) do
begin
  ...
  ContentID := '<foo4atfoo1atbar.net>';
  // or this, if you do not have the ContentID property available:
  // ExtraHeaders.Values['Content-ID'] := '<foo4atfoo1atbar.net>';
end; 
```

请注意，在 Indy 9 中，您必须手动提供括号。如果省略它们，Indy 10 会为您插入它们，例如：

```
ContentID := 'foo4atfoo1atbar.net'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:05:17.057

我找到*了一个*解决方案——我不需要 Indy10 而不是 Content-ID 字段。

我在问题中显示的代码很好，问题可能出在显示图片的 HTML 代码中。我认为“cid”变量必须“指向” Content-ID 的值；发现可以设置为文件名（TIDAttachment.filename），如下

```
<img src="cid:' + ExtractFileName (laPicture.text) + '"><br> 
```

上面的行被插入到适当位置的 html 流中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-27T09:18:22.877

这对我有用：

```
function SendEmail(SMTP: TIdSMTP; CONST AdrTo, AdrFrom, Subject, Body, HtmlImage, DownloadableAttachment: string; SendAsHtml: Boolean= FALSE): Boolean;
VAR MailMessage: TIdMessage;
begin
 Result:= FALSE;
 Assert(SMTP <> NIL, 'SMTP in NIL!');

 MailMessage:= TIdMessage.Create(NIL);
 TRY
  MailMessage.ConvertPreamble:= TRUE;
  MailMessage.Encoding       := meDefault;
  MailMessage.Subject        := Subject;
  MailMessage.From.Address   := AdrFrom;
  MailMessage.Priority       := mpNormal;
  MailMessage.Recipients.EMailAddresses := AdrTo;

  {How to send multi-part/attachment emails with Indy:
  www.indyproject.org/2005/08/17/html-messages
  www.indyproject.org/2008/01/16/new-html-message-builder-class }
  WITH IdMessageBuilder.TIdMessageBuilderHtml.Create DO
  TRY
    if SendAsHtml
    then Html.Text := Body
    else PlainText.Text := Body;

    { This will be visible ONLY if the email contains HTML! }
    if SendAsHtml AND FileExists(HtmlImage)
    then HtmlFiles.Add(HtmlImage);

    if FileExists(DownloadableAttachment)
    then Attachments.Add(DownloadableAttachment);
    FillMessage(MailMessage);
  FINALLY
    Free;
  END;

  { Connect }
  TRY
    if NOT SMTP.Connected
    then SMTP.Connect;
  EXCEPT
    on E: Exception DO
     begin
      AppLog.AddError('Cannot connect to the email server.');
      AppLog.AddError(E.Message);
     end;
  END;

  { Send mail }
  if SMTP.Connected then
   TRY
     SMTP.Send(MailMessage);
     Result:= TRUE;
   EXCEPT
     on E:Exception DO
      begin
       AppLog.AddError('Connected to server but could not send email!');
       AppLog.AddError(E.Message);
      end;
   END;

  if SMTP.Connected
  then SMTP.Disconnect;

 FINALLY
  FreeAndNil(MailMessage);
 END;
end; 
```

注意：将 AppLog 替换为您的个人日志记录系统或 ShowMessage。

你当然需要 libeay32.dll + ssleay32.dll。我会张贴他们的链接，但找不到他们了。

# vim - 将按钮映射到按钮序列

> ID：14279212
> 
> 赞同：0
> 
> 时间：2013-01-11T13:29:24.113
> 
> 标签：vim, vi, macvim

我想映射`tab`到以下按钮序列：`ctrl+x`->`tab`到 .vimrc 中的方法调用（在插入模式下）。该方法也在 .vimrc 中

我哇我应该用`inoremap <tab> button-sequence=method()<CR>`

但是我应该如何在上面的行中编写按钮序列？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:38:09.490

我不确定我是否理解您的问题，但这就是您映射以在*插入*`<Tab>`模式下执行的方式。`function()`

 *```
inoremap <Tab> :call function()<CR> 
```

***编辑***

我不得不仔细检查，因为我不知道那`<C-x><Tab>`件事。事实证明，真正的映射是`<C-x><C-i>`: `:h i_ctrl-x_ctrl-i`。`<Tab>`并`<C-i>`从终端（和 Vim）的角度表示相同的字符。

所以......这就是你想要的，即使映射到*插入*`<Tab>`模式以外`<Tab>`的任何东西对我来说似乎都很愚蠢：

 *```
inoremap <Tab> <C-x><C-i> 
```

见`:h key-notation`和`:h mapping`。**

# c# - 为什么后面的代码写的锚标签的href不接受'aspx'

> ID：14279214
> 
> 赞同：0
> 
> 时间：2013-01-11T13:29:32.250
> 
> 标签：c#, javascript, jquery, json

我有一个日历控件，在选择相应的日期时，我需要在手风琴中将 Today's Due 和 Over due 显示为两个部分。我在后面的代码中编写了手风琴的 div，并设置了 style.css 以呈现手风琴的外观。后面代码中的数据被转换成json并显示出来。后面的代码如下：

```
[WebMethod(EnableSession = true)]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
        public string CalenderBinderAccordian()
        {
            try
            {
                //Code to fetch productGroup is not shown
                foreach (var p in productGroup)
                {
                    var todoCount = 1;
                    string todoString = "";
                    int uniqueID = Guid.NewGuid().GetHashCode();
                    todoString = "<div class='accordion vertical'><section id='" + uniqueID + "' style='overflow-y: scroll;'> <h2><a href=#" + uniqueID + "><b>Due Today</b></a></h2>";    
                    foreach (var t in p.todo)
                    {
                        var tempAmt = String.Empty;
                        if ((t.Amount == null) || t.Amount == String.Empty)
                            tempAmt = "0";
                        else
                            tempAmt = Convert.ToDecimal(t.Amount.ToString()).ToString();                          
                        todoString += "<p><div style='padding:5px 0px; border-bottom:dashed 1px #dddddd;'><b>" + todoCount.ToString() + "</b>. " + t.ProductName + "<span style='text-align:right; padding-right:5px;'> $" + tempAmt + "</span><a href='www.google.com' target='_blank' style='text-decoration:none;'><b>Pay Now</b></a></div></p>";
                        todoCount++;
                    }
                    todoString += "</section>";   

                    var overDue = temps.Select(x => new { x.DueDate }).Distinct().ToList();
                    int overDueCount = 0;
                    uniqueID = Guid.NewGuid().GetHashCode();
                    todoString += "<section id='" + uniqueID + "'> <h2><a href=#" + uniqueID + "><b>Over Due</b></a></h2>";
                    int todoCount1 = 1;
                    for (int i = 0; i < overDue.Count(); i++)
                    {

                        if ((Convert.ToDateTime(overDue[i].DueDate) - Convert.ToDateTime(p.dates)).Days < 0)
                        {
                            overDueCount++;

                            var overDueList = temps.FindAll(x => x.DueDate.Equals(overDue[i].DueDate)).ToList();
                            foreach (var t in overDueList)
                            {
                                var tempAmt = String.Empty;
                                if ((t.Amount == null) || t.Amount == String.Empty)
                                    tempAmt = "0";
                                else
                                    tempAmt = Convert.ToDecimal(t.Amount.ToString()).ToString();
      //Error occurs when the href is given as aspx                                                           
                                todoString += "<p><div style='padding:5px 0px; border-bottom:dashed 1px #dddddd;'><b>" + todoCount1.ToString() + "</b>. " + t.ProductName + "<span style='text-align:right; padding-right:5px;'> $" + tempAmt + "</span><a href='PaymentDetails.aspx' target='_blank' style='text-decoration:none;'><b>Pay Now</b></a></div></p>";
                                todoCount++;
                                todoCount1++;
                            }

                        }
                    }

                    todoString = todoString + "</section></div>\",\"count\":\"" + todoCount + "\"},";
                    jsonString = jsonString + String.Format("{{\"{0}\" : \"{1}\",\"{2}\" : \"{3}", "dates", p.dates, "todo", todoString);

                    if (overDueCount.Equals(0))
                    {
                        jsonString = jsonString.Replace("</section><section id='" + uniqueID + "'> <h2><a href=#" + uniqueID + "><b>Over Due</b></a></h2></section>", "</section>");
                    }  

                }
                jsonString = jsonString.TrimEnd(',');
                jsonString = '[' + jsonString + ']';
               string data= jsonString; JavaScriptSerializer().Serialize(productGroup);
                return data;
            }
            catch (Exception ex)
            {
                throw;
            }
        } 
```

//如何将数据转换为Json`var tododate = [];`

```
$(window).bind('loaded', function () {
    $.ajax({
        type: "POST",
        url: "ChartBinder.asmx/CalenderBinderAccordian",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {        
            tododate = JSON.parse(msg.d);

        },
        error: function (msg) {
            alert("error");
        }
    });   
}); 
```

请注意，当 href 提供为 www.google.com 时，该功能运行良好，但当它提供为 PaymentGateway.aspx 时，它不会以手风琴格式显示日期，而是显示错误警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:06:26.363

使用 Firebug，注意到以下错误：使用 JSON JavaScriptSerializer 进行序列化或反序列化期间出错。字符串的长度超过了 maxJsonLength 属性上设置的值解决方案：尝试更改配置：

```
<configuration> 
<system.web.extensions>
<scripting>
  <webServices>
    <jsonSerialization maxJsonLength="50000000"/>
  </webServices>
</scripting> 
```

# javascript - 如何调试 Javascript 进程和动画？

> ID：14279217
> 
> 赞同：3
> 
> 时间：2013-01-11T13:29:59.530
> 
> 标签：javascript, debugging, css, firebug

有很多调试`JavaScript`代码的工具（如 FireBug、Chrome 控制台），但是否有调试进程的工具。这可能需要监视资源（例如CPU）的使用情况以找到进程中的瓶颈。

我创建了用于移动元素的 Javascript 动画（在更简单的情况下打开/关闭菜单），但现在移动很流畅。不同的因素会导致过载，例如沉重的 CSS3 渐变。但是如何检测限速过程呢？

*这确实是大多数网站的问题。打开网页时，javascript 进程的过载会终止页面加载。大多数动画/菜单动作都被破坏了。*

当`JavaScript`动画运行不流畅时，如何调试问题？

或者一个更普遍的问题，如何监控运行 JS 进程的资源使用情况以使网页更轻（在资源有限的计算机上更快地加载）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T13:40:21.520

我会在 Chrome 中使用时间线-> 帧。Paul Irish 对此进行了很多精彩的讨论，这里有一个[https://www.youtube.com/watch?v=Vp524yo0p44](https://www.youtube.com/watch?v=Vp524yo0p44)

另外做动画的时候不要使用setTimeout/setInterval，精度不够好。而是使用 requestAnimationFrame。有关 requestAnimationFrame 的更多信息可以在这里找到。[http://paulirish.com/2011/requestanimationframe-for-smart-animating/](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)

编辑：Paul 的这次谈话关于浏览器中的速度和调试速度也很有趣：[https](https://www.youtube.com/watch?v=MllBwuHbWMY) ://www.youtube.com/watch?v=MllBwuHbWMY ，这是最近讨论的 2D 变换与绝对定位：[https： //www.youtube.com/watch?v=NZelrwd_iRs](https://www.youtube.com/watch?v=NZelrwd_iRs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:34:38.720

## 不同的机器 => 不同的性能 => 不同的瓶颈

如果动画运行不顺畅，我会尝试降低图形或动画本身。谁说用户使用的机器和你一样强大？所以他们可能会比你更早地解决问题。

但我仍然建议使用[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)，因为它可以单独显示特定进程的负载。一般来说，与 Windows 提供的默认任务管理器相比，它是一个更有洞察力的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:32:27.920

我在 Windows 中只使用任务管理器，但可以使用[http://www.compuware.com/application-performance-management/ajax-performance-testing.html](http://www.compuware.com/application-performance-management/ajax-performance-testing.html)（不仅适用于 JavaScript）。

# java - 在 Java 中使用 Windows 代理设置调用 SOAP Web 服务

> ID：14279220
> 
> 赞同：1
> 
> 时间：2013-01-11T13:30:04.643
> 
> 标签：java, web-services, https, proxy

我正在编写一个独立的 Java 应用程序。我必须使用默认系统（Windows XP、7）代理设置来调用使用 HTTPS 协议的 SOAP Web 服务。

要确定系统代理设置，我使用 ProxySelector 类。这是代码：

```
System.setProperty("java.net.useSystemProxies", "true");
List proxies = ProxySelector.getDefault().select(new URI("https://www.google.com/"));
for (Iterator iter = proxies.iterator(); iter.hasNext();) {
    Proxy proxy = (Proxy) iter.next();
    InetSocketAddress address = (InetSocketAddress) proxy.address();
    if (address == null) {
        UTLogger.getLogger().debug("No proxy (direct connection)");
    } else {
        if (proxy.type().equals(Proxy.Type.HTTP)) {
            System.setProperty("http.proxyHost", address.getHostName());
            System.setProperty("http.proxyPort", String.valueOf(address.getPort()));
            System.setProperty("https.proxyHost", address.getHostName());
            System.setProperty("https.proxyPort", String.valueOf(address.getPort()));
        } else if (proxy.type().equals(Proxy.Type.SOCKS)) {
            System.setProperty("socksProxyHost", address.getHostName());
            System.setProperty("socksProxyPort", String.valueOf(address.getPort()));
        }
    }
}
System.setProperty("java.net.useSystemProxies", "false"); 
```

这是我初始化连接的方式：

```
SSLContext sc = SSLContext.getInstance("SSL");
sc.init(null, new TrustManager[]{new TrustDummy()}, new SecureRandom());
HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
servicePort = new MyPort(new URL(wsdlLocation), new QName(nameSpaceURI, localPart)).getMyPortSoap(); 
```

我不明白为什么没有`Proxy.Type.HTTPS`？如果我调用 Web 服务方法，我会收到以下错误。

使用 http 代理集：

```
javax.xml.ws.WebServiceException: Failed to access the WSDL at: ht tps://...?wsdl. It failed with: Got Unrecognized SSL message, plaintext connection? while opening stream from ht tps://...?wsdl. 
```

并使用 https 代理集：

```
javax.xml.ws.WebServiceException: Failed to access the WSDL at: ht tps://...?wsdl. It failed with: Got Unable to tunnel through proxy. Proxy returns "HTTP/1.0 403 Forbidden" while opening stream from ht tps://...?wsdl. 
```

我做错了吗？

# hibernate - 在 Hibernate Criteria 中查询小时数

> ID：14279224
> 
> 赞同：0
> 
> 时间：2013-01-11T13:30:17.737
> 
> 标签：hibernate, criteria

我想知道是否可以在休眠条件中查询指定小时数的表。例如我有 mysql 查询

```
SELECT * FROM eventlog WHERE HOUR(CREATED_AT) BETWEEN 8 AND 16 
         AND CREATED_AT BETWEEN '2013-01-01 11:00:00' AND '2013-01-08 11:00:00' 
```

我想在标准中转换：

```
criteria.add(Property.forName("HOUR(created_at)").between(8, 16));
criteria.add(Property.forName("created_at").between('2013-01-01 11:00:00', '2013-01-08 11:00:00')); 
```

它一定很简单，但我真的很喜欢这个。

我将不胜感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:17:25.313

看看这个[例子](http://www.roseindia.net/hibernate/hibernate-between-date.shtml)，他们做的事情类似于你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:07:14.847

好吧，我找到了一种可能的解决方案。虽然必须有另一种方法来做到这一点，但我会把它放在这里供您参考。

```
String sql = "HOUR(CREATED_AT) BETWEEN 8 AND 16";
criteria.add(Expression.sql(sql)); 
```

# iphone - 重复的 UItableViewCell，UITableView 的行

> ID：14279225
> 
> 赞同：0
> 
> 时间：2013-01-11T13:30:21.133
> 
> 标签：iphone, ios, uitableview

在这里上下滚动 2 3 次后的 tableview 将图像添加到所有单元格。这是代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

HomeCell *cell = (HomeCell *) [tableView dequeueReusableCellWithIdentifier:@"HomeCell"];
if (cell == nil) {
    cell = [[HomeCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"HomeCell"] ;
}

VenueDC *venueObj = [subSubCategoriesArray objectAtIndex:indexPath.row];
cell.lblName.text = venueObj.name;
if ([venueObj.imagesArray count] > 0) {
    [cell.ivVenue setImage:venueObj.ivVenue];
    [cell.ivVenue setHidden:NO];
    cell.lblName.frame = CGRectMake(80, cell.lblName.frame.origin.y, 200, cell.lblName.frame.size.height);
}
venueObj = nil;

return  cell;
} 
```

知道这里发生了什么吗？

图像仅在一个对象中，第一次加载时它显示一个带有图像的单元格，但滚动后它也开始在其他单元格上显示图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:58:05.757

像这样解决它，首先我将 lblName 框架设置为其原始位置，因此每次使用单元格时它都会重置其位置

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

HomeCell *cell = (HomeCell *) [tableView dequeueReusableCellWithIdentifier:@"HomeCell"];

if (cell == nil) {

    NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"HomeCell" owner:self options:nil];

    for (id currentObject in topLevelObjects){
        if ([currentObject isKindOfClass:[UITableViewCell class]]){
            cell =  (HomeCell *) currentObject;
            break;
        }
    }
}

VenueDC *venueObj = nil;
venueObj = [subSubCategoriesArray objectAtIndex:indexPath.row];
cell.lblName.text = venueObj.name;
[cell.ivVenue setHidden:YES];
cell.lblName.frame = CGRectMake(20 , 19, 250, 20);
if (venueObj.ivVenue) {
    [cell.ivVenue setImage:venueObj.ivVenue];
    [cell.ivVenue setHidden:NO];
    cell.lblName.frame = CGRectMake(80, cell.lblName.frame.origin.y, 200, cell.lblName.frame.size.height);
} 
return  cell;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T13:33:45.150

`UITableViewCells`被重用，这就是`dequeueReusableCellWithIdentifier`: 方法的作用。为了节省内存，`UITableView`唯一的实例是在任何给定点上尽可能多地实例化单元格，然后继续重复使用它们。因此，您应该始终在重用之前清理您的单元格，即将其所有内容重置为`nil`.

如果您使用的是自定义表格视图，例如您的情况`HomeCell`，则覆盖 -(void)`prepareForReuse`并将图像设置为 nil 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T13:39:13.777

发生这种情况是因为您的单元格被重用，因此请编写以下代码：

```
HomeCell *cell = (HomeCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {

        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"HomeCell" owner:self options:nil];

        for (id currentObject in topLevelObjects){
            if ([currentObject isKindOfClass:[UITableViewCell class]]){
                cell =  (HomeCell *) currentObject;
                break;
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T13:32:42.033

你需要一个`else`声明：

```
else {
venueObj = nil;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T13:35:02.677

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

HomeCell *cell = (HomeCell *) [tableView dequeueReusableCellWithIdentifier:@"HomeCell"];
if (cell == nil) {
    cell = [[HomeCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"HomeCell"] ;
}

VenueDC *venueObj = [subSubCategoriesArray objectAtIndex:indexPath.row];
cell.lblName.text = venueObj.name;
    [cell.ivVenue setImage:nil];

if ([venueObj.imagesArray count] > 0) {
    [cell.ivVenue setImage:venueObj.ivVenue];
    [cell.ivVenue setHidden:NO];
    cell.lblName.frame = CGRectMake(80, cell.lblName.frame.origin.y, 200, cell.lblName.frame.size.height);
}
venueObj = nil;

return  cell;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T13:38:35.640

您只需要添加一行`cellForRowAtIndexPath`

```
NSString *CellIdentifier = [NSString stringWithFormat:@"S%1dR%1d",indexPath.section,indexPath.row]; 
```

**并改变**

```
HomeCell *cell = (HomeCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

# lwuit - 如何实现向导屏幕之类的东西？

> ID：14279228
> 
> 赞同：0
> 
> 时间：2013-01-11T13:30:34.453
> 
> 标签：lwuit, lwuit-form

我想放置一个“下一步”按钮，单击该按钮将显示另一组组件；我还想放置一个“上一个”按钮，单击该按钮时，会显示上一组组件。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:35:22.493

我最近实施了数据输入表格。通常，我有一个向导类，其中包含向导中的所有表单，因此我可以轻松地在它们之间来回导航。当我调用一个新表单时，我会传递向导的对象。

下面是我的向导，省略了实现。

```
public final class ReportWizard {

    public static ReportWizard instance = null;
    Form parent = null;
    Form titleForm = null;
    Form budgetForm = null;
    Form iconForm = null;

    final Report reports[] = new Report[20];

    public ReportWizard(Form parent) {
        this.parent = parent;
        this.instance = this;
    }

    void getTitle() {
        AddReportForm reportForm = new AddReportForm(parent, this);
        reportForm.showReportForm();
        titleForm = reportForm;
        ImageListPicker getIcon = new ImageListPicker(titleForm, reports, this);
        iconForm = getIcon.imageListForm;
    }

    void getIcon() {
        iconForm.show();        
    }

    public void cancelWizard() {

        titleForm = null;
        iconForm = null;
        budgetForm = null;
        instance = null;

        parent.show();
        parent = null;
        System.gc();
    }
} 
```

# php - Json_Decode 以 int 为名称

> ID：14279229
> 
> 赞同：1
> 
> 时间：2013-01-11T13:30:39.140
> 
> 标签：php, json

好的，所以我有一个巨大的 JSON 提要，
一切运行良好。Exept，关键之一

目前我正在做

```
$json=file_get_contents($source);
$data = json_decode($json,true);
foreach($data->items->features as $a){
   echo "{$a->properties->tpegMessage->generation_time_pretty}\n";
   echo '<br />';
   echo "{$a->properties->tpegMessage->title}\n";
   echo '<br />';
   echo "{$a->properties->geometry->coordinates->1}\n";
   echo '<br />';
   echo "{$a->properties->geometry->coordinates->0}\n";
   echo '<br />';   echo '<br />';   echo '<br />';   echo '<br />';   echo '<br />';
} 
```

现在的关键问题是

''$a->属性->几何->坐标->0''

由于 php 不会使用 0 或 1 名称重新遍历 JSON 值

这些值通常是浮点数，值是 lat 或 long。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:47:35.537

尝试

```
$a->properties->geometry->coordinates->{0} 
```

在回声的情况下：

```
echo $a->properties->geometry->coordinates->{0} . "\n"; 
```

# javascript - 扩展安装后在 Safari 中重新加载选项卡

> ID：14279230
> 
> 赞同：0
> 
> 时间：2013-01-11T13:30:41.880
> 
> 标签：javascript, google-chrome-extension, safari, safari-extension

在这样的代码的 safari 扩展中是否有任何等价物：

```
chrome.tabs.getSelected(null,function(tab) { 
        chrome.tabs.reload(tab.id);
    });
This code comes from Chrome. 
```

我想把这段代码放到 global.html 中。我想在扩展安装后立即重新加载页面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T06:08:27.123

```
var activeTab = safari.application.activeBrowserWindow.activeTab;
activeTab.url = activeTab.url; 
```

# java - java xml document.getTextContent() 保持为空

> ID：14279231
> 
> 赞同：5
> 
> 时间：2013-01-11T13:30:42.363
> 
> 标签：java, xml, xmldom

我正在尝试在 JUnit 测试中构建一个 xml 文档。

```
doc=docBuilder.newDocument();   
Element root = doc.createElement("Settings");
doc.appendChild(root);          
Element label0 = doc.createElement("label_0");
root.appendChild(label0);
String s=doc.getTextContent();
System.out.println(s); 
```

然而，该文件仍然是空的（即`println`收益率`null`。）我不知道为什么会这样。实际的问题是后续的 XPath 表达式会抛出错误：`Unable to evaluate expression using this context`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:51:56.950

`getTextContent`on的返回值`Document`被定义为 null - 请参阅[Node](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Node.html#getTextContent%28%29)。

要检索文本内容，请在根元素上调用 getTextNode

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:56:36.027

我想您想序列化文档以将其传递给测试用例。为此，您必须将文档传递给一个空的 XSL 转换器，如下所示：

```
Transformer transformer = TransformerFactory.newInstance().newTransformer();
transformer.setOutputProperty(OutputKeys.INDENT, "yes");
//initialize StreamResult with File object to save to file
StreamResult result = new StreamResult(new StringWriter());
DOMSource source = new DOMSource(doc);
transformer.transform(source, result);
String xmlString = result.getWriter().toString();
System.out.println(xmlString); 
```

另请参阅：[如何从 Java 中漂亮地打印 XML？](https://stackoverflow.com/questions/139076/how-to-pretty-print-xml-from-java)

# eclipse - 默认工作区首选项

> ID：14279232
> 
> 赞同：3
> 
> 时间：2013-01-11T13:30:45.547
> 
> 标签：eclipse

每次创建新工作区时，我都必须为每个工作区设置工作区首选项“构建前自动保存”。此外，我还有几个工作区，直到现在我都没有接触过，我不想错过这个选项。

*   如何设置此默认首选项？
*   我可以为所有工作区全局设置此首选项吗？

我有两个 Eclipse 安装。一个（CCS）默认启用此功能，另一个默认禁用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:11:03.680

首选项存储在工作区中，因此无法存储所有工作区的全局首选项。

你可以做什么：

*   导出您的首选项并将生成的文件导入您的其他工作区
*   将`.metadata/.plugins/org.eclipse.core.runtime/.settings`文件夹从旧工作区之一复制到您创建的任何新工作区

另请参阅[为所有 Eclipse 工作区设置首选项](https://stackoverflow.com/questions/7933882/setting-preferences-for-all-eclipse-workspaces?rq=1)和[维护一组通用的 Eclipse 首选项](https://stackoverflow.com/questions/951509/maintaining-a-common-set-of-eclipse-preferences?rq=1)

# wpf - 如何公开嵌套在 UserControl 中的控件的 DependencyProperty？

> ID：14279236
> 
> 赞同：5
> 
> 时间：2013-01-11T13:30:53.160
> 
> 标签：wpf, binding, nested, dependency-properties

我正在尝试将图像从窗口绑定到 UserControl 'DisplayHandler' 内的 UserControl'DisplayHandler' 中。Display 有一个 DependancyProperty 'DisplayImage'。This is Similar to [this](https://stackoverflow.com/questions/4741178/wpf-nested-usercontrol-bindings)，但他们的回答对我的问题没有帮助。

DisplayHandler 还应该具有“DisplayImage”属性并将绑定传递给 Display。但是 Visual Studio 不允许我两次注册同名的 DependancyProperty。所以我试图不注册两次，而只是重复使用它：

**窗户**

```
<my:DisplayHandler DisplayImage=
    "{Binding ElementName=ImageList, Path=SelectedItem.Image}" /> 
```

**显示处理程序**

xml

```
<my:Display x:Name="display1"/> 
```

CS

```
public static readonly DependencyProperty DisplayImageProperty =
    myHWindowCtrl.DisplayImageProperty.AddOwner(typeof(DisplayHandler));

public HImage DisplayImage {
    get { return (HImage)GetValue(DisplayImageProperty); }
    set { SetValue(DisplayImageProperty, value); }
}
public HImage DisplayImage /*alternative*/ {
    get { return (HImage)display1.GetValue(Display.DisplayImageProperty); }
    set { display1.SetValue(Display.DisplayImageProperty, value); }
} 
```

**这两个属性都没有解决。*

**展示**

```
public HImage DisplayImage {
    get { return (HImage)GetValue(DisplayImageProperty); }
    set { SetValue(DisplayImageProperty, value); }
}
public static readonly DependencyProperty DisplayImageProperty =
    DependencyProperty.Register("DisplayImage", typeof(HImage), typeof(Display)); 
```

* * *

我一直在想一个控件如果没有定义它自己的值，它会爬上树并寻找它的属性。[->参考](http://www.wpftutorial.net/DependencyProperties.html)

所以它**应该**以某种方式工作......

我对模板和 ContentPresenter 进行了一些尝试，因为这适用于 ImageList（ImageList 还包含显示），但我无法让它像 ListBoxItem 那样绑定值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T14:03:43.303

该`AddOwner`解决方案应该可以工作，但是您必须添加一个更新嵌入式控件的[PropertyChangedCallback](http://msdn.microsoft.com/en-us/library/system.windows.propertychangedcallback.aspx)。

```
public partial class DisplayHandler : UserControl
{
    public static readonly DependencyProperty DisplayImageProperty =
        Display.DisplayImageProperty.AddOwner(typeof(DisplayHandler),
            new FrameworkPropertyMetadata(DisplayImagePropertyChanged));

    public HImage DisplayImage
    {
        get { return (Image)GetValue(DisplayImageProperty); }
        set { SetValue(DisplayImageProperty, value); }
    }

    private static void DisplayImagePropertyChanged(
        DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        var dh = obj as DisplayHandler;
        dh.display1.DisplayImage = e.NewValue as HImage;
    }
} 
```

# php - 插入函数时mysql版本错误

> ID：14279240
> 
> 赞同：1
> 
> 时间：2013-01-11T13:31:07.700
> 
> 标签：php, mysql, sql, feed

我正在解析一个提要，我想将它插入到我的数据库中。我回显了正确的提要条目，但是当我想插入数据库时​​，我收到了这个错误：

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在第 1 行的 'update, link) VALUES (...) 附近使用。

这是代码：

```
include_once("connect_to_mysql.php");

$xml= simplexml_load_file('http://somefeed/feeds/rss');
$list = $xml->entry;
$title = $list[0]->title;
$img = $list[0]->summary->div->img['src'];
$update = $list[0]->updated;
$link = $list[0]->link['href'];

$sql = mysql_query("INSERT INTO table (title, img, update, link) 
VALUES ('$title', '$img', '$update', '$link')") or die (mysql_error()); 
```

这在我的网站上运行良好，但现在我收到了这个错误。我正在使用 xampp。还有一些条目是带有 http:// 的文件，有问题吗？我发现了类似的帖子，但他们的修复对我不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T13:32:07.477

这是两个保留关键字：在您的查询`table`中`update`使用，它必须用反引号转义。

```
INSERT INTO `table` (title, img, `update`, link) 
VALUES ('$title', '$img', '$update', '$link') 
```

*   [MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

作为旁注，`SQL Injection`如果值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用 PreparedStatements，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# c# - 数据流的设计模式

> ID：14279241
> 
> 赞同：1
> 
> 时间：2013-01-11T13:31:15.323
> 
> 标签：c#, design-patterns, selenium, automation, workflow

我们有某种由步骤组成的测试工作流程。现在我想建立类来代表它。

例如

```
Step 1: Get edit control for username
Step 2: Write username into the control
Step 3: Get edit control for password
Step 4: Write password into the control
Step 5: Click Login Button 
```

问题是：我怎样才能有这些步骤来轻松交换信息？如何在步骤 2 的代码中轻松使用步骤 1 的编辑控件？

目前我只有以下代码：

```
public abstract class TestCase
{
    // the Steps to build the test
    public IList<TestStep> TestSteps { get; set; }

    public TestCase()
    {
        this.TestSteps = new List<TestStep>();
    }

    public abstract void Run();

    public override string ToString()
    {
        return this.GetType().Name;
    }
}

public class TestStep
{
    public int StepNumber { get; set; } 
    public Func<bool> StepFunc { get; set; }
} 
```

现在我想在 Step1 中获取 Control，在 Step2 中使用它等等。

考虑拥有不同的 StepFunc，它们具有适合需求的返回值或专门的 TestStep 派生类中的成员。但可能有更好的方法。

**请注意：**目前我无法一步完成。

任何想法高度赞赏！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-11T13:44:31.083

引入一个 stepcontroller 保存要执行的步骤并控制步骤的执行，当它执行步骤 2 时，它将步骤 1 的结果传递给步骤 2。步骤 2 不应访问步骤 1 的编辑控件，而是访问到第1步的结果，也就是在第1步的编辑控件中输入的文本。当然也可以对第4步的结果进行累加，这样第4步的结果就包含了用户名和密码。

# c - 将位图文件读入结构

> ID：14279242
> 
> 赞同：30
> 
> 时间：2013-01-11T13:31:21.830
> 
> 标签：c, bitmap, structure, bitmapimage

我想将位图文件读入结构并像例如一样操作它。制作镜像效果，但我不明白我应该创建哪种结构才能读入它。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-11T13:48:48.923

»这是您手动加载 .BMP 文件的方式

位图文件格式：

*   位图文件头
*   位图信息头
*   调色板数据
*   位图数据

等等代码部分。这是我们需要创建的结构来保存位图文件头。

```
#pragma pack(push, 1)

typedef struct tagBITMAPFILEHEADER
{
    WORD bfType;  //specifies the file type
    DWORD bfSize;  //specifies the size in bytes of the bitmap file
    WORD bfReserved1;  //reserved; must be 0
    WORD bfReserved2;  //reserved; must be 0
    DWORD bfOffBits;  //specifies the offset in bytes from the bitmapfileheader to the bitmap bits
}BITMAPFILEHEADER;

#pragma pack(pop) 
```

bftype字段检查您是否*确实*在加载 .BMP 文件，如果是，则该字段应为 0x4D42。

现在我们需要创建我们的*bitmapinfoheader*结构。这包含有关我们位图的信息。

```
#pragma pack(push, 1)

typedef struct tagBITMAPINFOHEADER
{
    DWORD biSize;  //specifies the number of bytes required by the struct
    LONG biWidth;  //specifies width in pixels
    LONG biHeight;  //specifies height in pixels
    WORD biPlanes;  //specifies the number of color planes, must be 1
    WORD biBitCount;  //specifies the number of bits per pixel
    DWORD biCompression;  //specifies the type of compression
    DWORD biSizeImage;  //size of image in bytes
    LONG biXPelsPerMeter;  //number of pixels per meter in x axis
    LONG biYPelsPerMeter;  //number of pixels per meter in y axis
    DWORD biClrUsed;  //number of colors used by the bitmap
    DWORD biClrImportant;  //number of colors that are important
}BITMAPINFOHEADER;

#pragma pack(pop) 
```

现在开始加载我们的位图。

```
unsigned char *LoadBitmapFile(char *filename, BITMAPINFOHEADER *bitmapInfoHeader)
{
    FILE *filePtr;  //our file pointer
    BITMAPFILEHEADER bitmapFileHeader;  //our bitmap file header
    unsigned char *bitmapImage;  //store image data
    int imageIdx=0;  //image index counter
    unsigned char tempRGB;  //our swap variable

    //open file in read binary mode
    filePtr = fopen(filename,"rb");
    if (filePtr == NULL)
        return NULL;

    //read the bitmap file header
    fread(&bitmapFileHeader, sizeof(BITMAPFILEHEADER),1,filePtr);

    //verify that this is a .BMP file by checking bitmap id
    if (bitmapFileHeader.bfType !=0x4D42)
    {
        fclose(filePtr);
        return NULL;
    }

    //read the bitmap info header
    fread(bitmapInfoHeader, sizeof(BITMAPINFOHEADER),1,filePtr); 

    //move file pointer to the beginning of bitmap data
    fseek(filePtr, bitmapFileHeader.bfOffBits, SEEK_SET);

    //allocate enough memory for the bitmap image data
    bitmapImage = (unsigned char*)malloc(bitmapInfoHeader->biSizeImage);

    //verify memory allocation
    if (!bitmapImage)
    {
        free(bitmapImage);
        fclose(filePtr);
        return NULL;
    }

    //read in the bitmap image data
    fread(bitmapImage,bitmapInfoHeader->biSizeImage,1,filePtr);

    //make sure bitmap image data was read
    if (bitmapImage == NULL)
    {
        fclose(filePtr);
        return NULL;
    }

    //swap the R and B values to get RGB (bitmap is BGR)
    for (imageIdx = 0;imageIdx < bitmapInfoHeader->biSizeImage;imageIdx+=3)
    {
        tempRGB = bitmapImage[imageIdx];
        bitmapImage[imageIdx] = bitmapImage[imageIdx + 2];
        bitmapImage[imageIdx + 2] = tempRGB;
    }

    //close file and return bitmap image data
    fclose(filePtr);
    return bitmapImage;
} 
```

现在要利用所有这些：

```
BITMAPINFOHEADER bitmapInfoHeader;
unsigned char *bitmapData;
// ...
bitmapData = LoadBitmapFile("mypic.bmp",&bitmapInfoHeader);
//now do what you want with it, later on I will show you how to display it in a normal window 
```

稍后我将发布写入 .BMP 文件，以及如何加载 targa 文件以及如何显示它们。«

*引自：[http](http://www.vbforums.com/showthread.php?261522-C-C-Loading-Bitmap-Files-%28Manually%29) ://www.vbforums.com/showthread.php?261522-CC-Loading-Bitmap-Files-%28Manually%29（用户：BeholderOf）。（做了一些小的修正）*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T14:03:32.720

[这里](http://pastebin.com/m6NCiY0Z)是一个简短的工作示例。

它将 wav 文件转换为 bmp（很久以前我玩得很开心）。

**代码：**

```
#include <stdio.h>
#include <strings.h>
#include <sndfile.h>
#include <stdlib.h>
#include <math.h>

#define RATE 44100

typedef struct {
    unsigned short type;                 /* Magic identifier            */
    unsigned int size;                       /* File size in bytes          */
    unsigned int reserved;
    unsigned int offset;                     /* Offset to image data, bytes */
} HEADER;
typedef struct {
    unsigned int size;               /* Header size in bytes      */
    int width,height;                /* Width and height of image */
    unsigned short planes;       /* Number of colour planes   */
    unsigned short bits;         /* Bits per pixel            */
    unsigned int compression;        /* Compression type          */
    unsigned int imagesize;          /* Image size in bytes       */
    int xresolution,yresolution;     /* Pixels per meter          */
    unsigned int ncolours;           /* Number of colours         */
    unsigned int importantcolours;   /* Important colours         */
} INFOHEADER;
typedef struct {
    unsigned char r,g,b,junk;
} COLOURINDEX;

int main(int argc, char *argv[]){
    int i,j,rd;
    int gotindex = 0;
    unsigned char grey,r,g,b;
    double ampl;
    short _2byte[2];
    HEADER header;
    INFOHEADER infoheader;
    COLOURINDEX colourindex[256];
    FILE *fptr; 
    SNDFILE* sndfile = NULL;
    SF_INFO sfinfo;
    long rate = RATE;

    void (*bmpread)();
    void _eightbit(){
        if(fread(&grey, sizeof(unsigned char), 1, fptr) != 1){
        fprintf(stderr,"Image read failed\n");
        exit(-1);
        }
        if (gotindex){
            ampl =  colourindex[grey].r * 64\. +
                colourindex[grey].g * 128.+
                colourindex[grey].b * 64.;
        } else {
            ampl = grey * 256\. - 32768.;
        }
//      printf("%.2f\n", ampl);
    }
    void _twentyfourbit(){
        do{
            if((rd = fread(&b, sizeof(unsigned char), 1, fptr)) != 1) break;
            if((rd = fread(&g, sizeof(unsigned char), 1, fptr)) != 1) break;
            if((rd = fread(&r, sizeof(unsigned char), 1, fptr)) != 1) break;
        }while(0);
        if(rd != 1){    
            fprintf(stderr,"Image read failed\n");
            exit(-1);
        }
        ampl = r * 64\. + g * 128\. + b * 64\. - 32768.;
//      printf("%.2f\n", ampl);
    }
    if (argc < 3){
        printf("Usage: %s <input.bmp> <output.wav> [samplerate]\n", argv[0]);
        printf("For example:\n\t%s pict.bmp sample.wav 44100 2\n", argv[0]);
        exit(0);
    }
    printf("Input file: %s\n", argv[1]);
    printf("Output file: %s\n", argv[2]);
    if(argc > 3) rate = atoi(argv[3]);
    if(rate < 4000) rate = 4000;
    //if(argc > 4) channels = atoi(argv[4]);        
    sfinfo.samplerate = rate;
    sfinfo.channels = 2;
    sfinfo.format = SF_FORMAT_WAV|SF_FORMAT_PCM_16;
    if((fptr = fopen(argv[1],"r")) == NULL) {
        fprintf(stderr,"Unable to open BMP file \"%s\"\n",argv[1]);
        exit(-1);
    }
        /* Read and check BMP header */
    if(fread(&header.type, 2, 1, fptr) != 1){
        fprintf(stderr, "Failed to read BMP header\n");
        exit(-1);
    }
    if(header.type != 'M'*256+'B'){
        fprintf(stderr, "File is not bmp type\n");
        exit(-1);
    }
    do{
        if((rd = fread(&header.size, 4, 1, fptr)) != 1) break;
        printf("File size: %d bytes\n", header.size);
        if((rd = fread(&header.reserved, 4, 1, fptr)) != 1) break;
        if((rd = fread(&header.offset, 4, 1, fptr)) != 1) break;
        printf("Offset to image data is %d bytes\n", header.offset);
    }while(0);
    if(rd =! 1){
        fprintf(stderr, "Error reading file\n");
        exit(-1);
    }
    /* Read and check the information header */
    if (fread(&infoheader, sizeof(INFOHEADER), 1, fptr) != 1) {
        fprintf(stderr,"Failed to read BMP info header\n");
        exit(-1);
    }
    printf("Image size = %d x %d\n", infoheader.width, infoheader.height);
    printf("Number of colour planes is %d\n", infoheader.planes);
    printf("Bits per pixel is %d\n", infoheader.bits);
    printf("Compression type is %d\n", infoheader.compression);
    printf("Number of colours is %d\n", infoheader.ncolours);
    printf("Number of required colours is %d\n", infoheader.importantcolours);
    /* Read the lookup table if there is one */
    for (i=0; i<255; i++){
        colourindex[i].r = rand() % 256;
        colourindex[i].g = rand() % 256;
        colourindex[i].b = rand() % 256;
        colourindex[i].junk = rand() % 256;
    }
    if (infoheader.ncolours > 0) {
        for (i=0; i<infoheader.ncolours; i++){
            do{
            if ((rd = fread(&colourindex[i].b, sizeof(unsigned char),1,fptr)) != 1)
                break;
            if ((rd = fread(&colourindex[i].g, sizeof(unsigned char),1,fptr)) != 1)
                break;
            if ((rd = fread(&colourindex[i].r, sizeof(unsigned char),1,fptr)) != 1)
                break;
            if ((rd = fread(&colourindex[i].junk, sizeof(unsigned char),1,fptr)) != 1)
                break;
            }while(0);
            if(rd != 1){
                fprintf(stderr,"Image read failed\n");
                exit(-1);
            }           
            printf("%3d\t%3d\t%3d\t%3d\n", i,
            colourindex[i].r, colourindex[i].g, colourindex[i].b);
        }
        gotindex = 1;
    }
    if(infoheader.bits < 8){
        printf("Too small image map depth (%d < 8)\n", infoheader.bits);
        exit(-1);
    }
    /* Seek to the start of the image data */
    fseek(fptr, header.offset, SEEK_SET);
    printf("Creating 16bit WAV %liHz.\n", rate);
    sndfile = sf_open(argv[2], SFM_WRITE, &sfinfo);
    if(sndfile == NULL){
        fprintf(stderr, "Cannot open output file!\n"); exit(-1);
    }
    bmpread = _eightbit;
    if(infoheader.bits == 24)
        bmpread = _twentyfourbit;

    /* Read the image */
    for (j=0;j<infoheader.height;j++) {
        _2byte[1] = 32700;
        for (i=0;i<infoheader.width;i++) {
            bmpread();
            _2byte[0] = (short)ampl;
            sf_write_short(sndfile, _2byte, 2);
            _2byte[1] = 0;
        } // i
    } // j
    fclose(fptr);
    sf_close(sndfile);
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2020-12-31T15:36:32.320

因此，要读取位图，您需要@ollo 回答的结构，但也有一种更简单的方法。

*   如果您在 Windows 上，那么您只需添加`#include <wingdi.h>`代码即可访问所有结构，而无需将它们写入单独的文件中。
*   如果您需要一些示例代码，那么我已经在 bmp 文件上实现了各种过滤器，例如：

1.  *灰度*
2.  *边缘检测*
3.  *模糊*
4.  *棕褐色*

在 CS50x 课程中，但问题是生成的 output.bmp 在**CS50 ide**上是完全正确的，但它在我装有**Windows 10**的本地计算机上不起作用。所以我对它做了一些改变，它奏效了。该代码对于 Linux 和其他操作系统也是可移植的。我所做更改并将在您的系统上运行的代码在[这里](https://github.com/Lovish-Garg/Aplying-Filters-on-BMP)

# java - 从java中的许多小svg文件创建SVG文件

> ID：14279243
> 
> 赞同：0
> 
> 时间：2013-01-11T13:31:25.920
> 
> 标签：java, svg, javafx-2, batik

我目前正在使用 JavaFX 2.2 和 Batik。我有一个带有窗格的应用程序，您可以在该窗格上拖动多张 SVG 图片。这一切都解决了，每张图片的 svg 代码都存储在每个对象中，所以我也可以得到它。

但是现在我想对该窗格及其当前的 SVG 子项进行“截图”并将其导出为 svg 文件。

在我看来，有两种可能：

1) 使用 takeSnapshot() 函数将其导出为 .png 文件并将其转换为 svg

2）或从所有小svg文件中创建一个新的svg文件，注意每个svg图片对象的位置。

后者可能吗？或者有谁知道，蜡染是否可以做这个 png 到 svg 的转换？

非常感谢你的帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:11:04.737

使用方法 1) 您将丢失所有矢量信息并最终有效地使用位图。结果通常会更大（就磁盘空间而言）并且在缩放时质量会变差。

所以方法2）显然更好。Batik 实现了 SVG DOM，因此对单个文档的操作应该不会很困难。

# ios - 从 ios 中的 XMPP 服务器检索存档消息

> ID：14279249
> 
> 赞同：8
> 
> 时间：2013-01-11T13:31:45.707
> 
> 标签：ios, xmpp, archive

我正在我的 ios 应用程序中集成 XMPP 功能，但遇到了一个我无法解决的问题。问题是我无法从服务器获取存档消息。我的客户能够登录，并且我已经成功测试了几个服务调用（发送、接收消息、获取有关用户的信息）。

发送时

```
<iq type='get' id='pref1'>
  <pref xmlns='urn:xmpp:archive'/>
</iq> 
```

回应是

```
SEND: <iq type="get"><pref xmlns="urn:xmpp:archive"/></iq>

RECV: <iq xmlns="jabber:client" type="error" to="1@iis2/ae76edc"><error code="501"    
type="cancel"><feature-not-implemented xmlns="urn:ietf:params:xml:ns:xmpp-
stanzas"/</error></iq> 
```

服务器管理员在激活归档时能够看到归档的消息。

为了实现这个功能，必须在服务器端或客户端做些什么吗？难道是看到旧消息和服务器实际实现和支持 XEP-0136，是两件不同的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-21T13:46:51.217

如果您想从服务器获取意味着使用此代码

```
 internal var xmppMAM: XMPPMessageArchiveManagement?

func setupXMPPMam(){
    xmppMAM = XMPPMessageArchiveManagement.init()
    xmppMAM?.addDelegate(self, delegateQueue: .global(qos: .background))
    // stream is XMPPStream
    xmppMAM?.activate(stream)
} 
```

XMPP 连接后调用 setupMam 函数

```
 func retrieveArchiveMessage(){
    let set = XMPPResultSet(max: totalCount)
    xmppMAM?.retrieveMessageArchive(at: XMPPJID(string: user), withFields: nil, with: set)
  }

 func xmppStream(_ sender: XMPPStream, willReceive message: XMPPMessage) -> XMPPMessage? {
    if let forwardedMessage = message.mamResult?.forwardedMessage{
      debugPrint(forwardedMessage)
      return message
    }
  } 
```

如果您使用[Robbiehanson 框架](https://github.com/robbiehanson/XMPPFramework)，上面的代码非常适合从服务器获取值。

我希望这篇文章对你有用@Akash Thakkar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-22T19:48:04.693

在 Swift 4 中获取归档消息的示例

声明并初始化变量 XMPPMessageArchivingCoreDataStorage 我在其中初始化 XMPPStream

```
var xmppMessageStorage: XMPPMessageArchivingCoreDataStorage?
var xmppMessageArchiving: XMPPMessageArchiving?

xmppMessageStorage = XMPPMessageArchivingCoreDataStorage.sharedInstance()
    xmppMessageArchiving = XMPPMessageArchiving(messageArchivingStorage: xmppMessageStorage)

    xmppMessageArchiving?.clientSideMessageArchivingOnly = true
    xmppMessageArchiving?.activate(stream)
    xmppMessageArchiving?.addDelegate(self, delegateQueue: DispatchQueue.main) 
```

这样做，每当消息到达时，这将导致它被归档而无需执行任何其他操作。

然后，检索归档的消息

```
func RecibedMessageArchiving(idFriend: String) {

    let JabberIDFriend = idFriend   //id friend chat, example test1@example.com

    let moc = xmppMessageStorage?.mainThreadManagedObjectContext
    let entityDescription = NSEntityDescription.entity(forEntityName: "XMPPMessageArchiving_Message_CoreDataObject", in: moc!)
    let request = NSFetchRequest<NSFetchRequestResult>()
    let predicateFormat = "bareJidStr like %@ "
    let predicate = NSPredicate(format: predicateFormat, JabberIDFriend)

    request.predicate = predicate
    request.entity = entityDescription

    //jabberID id del usuario, cliente
    var jabberIDCliente = ""
    if let jabberj = globalChat.value(forKey: "jabberID"){
        jabberIDCliente = jabberj as! String
    }

    do {
        let results = try moc?.fetch(request)

        for message: XMPPMessageArchiving_Message_CoreDataObject? in results as? [XMPPMessageArchiving_Message_CoreDataObject?] ?? [] {

            var element: DDXMLElement!
            do {
                element = try DDXMLElement(xmlString: (message as AnyObject).messageStr)
            } catch _ {
                element = nil
            }

            let body: String
            let sender: String
            let date: NSDate
            let isIncomings: Bool
            if message?.body != nil {
                body = (message?.body)!
            } else {
                body = ""
            }

            if element.attributeStringValue(forName: "to") == JabberIDFriend {
                sender = jabberIDCliente
                isIncomings = false

            } else {
                sender = "test2@example.com"
                isIncomings = true

            }

                var m: [AnyHashable : Any] = [:]
                m["msg"] = message?.body

                print("body", message?.body)

                print("test", element.attributeStringValue(forName: "to"))
                print("test2", element.attributeStringValue(forName: "body"))

        }
    } catch _ {
        //catch fetch error here
    }

} 
```

# php - 如何检查我的表单是否达到帖子限制

> ID：14279250
> 
> 赞同：1
> 
> 时间：2013-01-11T13:31:54.110
> 
> 标签：php, html, forms

我有一个很大的 HTML 表单，我认为它达到了 php post 限制，因为数据的最后部分被遗漏了，尽管它仍然可以测试/确保这是原因？

我知道这可以通过增加 php.ini 值来轻松解决，但是 PHP 中是否有任何方法来检查这是 PHP 中的原因？

例如：它写入一个日志，显示表单发送的已发布数据量，并根据 php.ini 中的值进行检查

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:41:53.013

如果您的 php 安装使用 suhosin，请确保以下值是适当的：

```
suhosin.request.max_vars
suhosin.post.max_vars 
```

它们将限制 php 接收的接受的 POST 变量的数量（[http://forums.digitalpoint.com/showthread.php?t=1513000](http://forums.digitalpoint.com/showthread.php?t=1513000)）。

要查找 POST 数据的长度，您可以使用 $HTTP_RAW_POST_DATA [http://php.net/manual/en/reserved.variables.httprawpostdata.php](http://php.net/manual/en/reserved.variables.httprawpostdata.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T13:35:55.907

有三个因素

*   PHP 中的 Post_max_size（使用 phpinfo() 获取限制）
*   Apache 中的 LimitRequestBody
*   IIS 上的 MaxClientRequestBuffer

# php - 在 PHP 中作为非字符串参数类

> ID：14279252
> 
> 赞同：0
> 
> 时间：2013-01-11T13:31:58.493
> 
> 标签：php, class, static

文件 1 中的示例：

```
namespace A;

class Foo{

} 
```

文件 2：

```
use A\Foo;

do_stuff('A\Foo');  // <- need namespace here :(

Foo::someStaticMethod();  // <- namespace not required :D 
```

有什么方法可以在函数参数中传递类名，比如常量或其他东西，所以我不需要在命名空间前面加上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:34:04.683

更新 ：）

当我知道时，我需要将某些类的类名作为字符串传递，我用于创建特殊的类常量

```
namespace Foo\Bar;
class A {
    const __NAMESPACE = __NAMESPACE__;
    const __CLASS = __CLASS__;
} 
```

现在您可以引用类名，例如

```
use Foo\Bar\A as Baz;
echo Baz::__CLASS; 
```

使用 PHP5.5，这将是内置的

```
echo Baz::class; 
```

* * *

命名空间的完全限定名称 (FQN) 始终以命名空间分隔符开头

```
do_stuff('\A\Foo'); 
```

*除了*- 语句中的（这是唯一的例外）`use`，因为只能出现完整的名称空间标识符，因此为方便起见，您可以在此处省略它。

但是，字符串是一个字符串，您将它用作类名的地方超出了解释器的范围，因此它失去了对前`use A\Foo`一个别名的引用。使用 PHP5.5 你可以编写`Foo::class`，但我认为现在不是一个选项；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:35:52.163

不，据我所知，不是没有追踪来电者。您正在调用的函数必须与您尝试传递的对象存在于同一命名空间中。

`debug_backtrace`如果您需要命名空间解析，您可能想查看该函数。**但这**需要将文件路径转换为名称空间解析或类似内容。

然而这是可能的：（我看到安德鲁用相同类型的解决方案回答了。）

```
function doStuff ($obj)
{
    $name = (is_object($obj))
        ? (new ReflectionClass(get_class($obj)))->getName()
        : $obj;

    // $name will now contain the fully qualified name
}

namespace Common;

class Test
{}

$testObj = new Test();

// This will work, but requires argument to be
// fully quialified or an instance of the object.
\doStuff($testObj);
\doStuff("\Common\Test"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T13:51:49.657

您可以实例化一个新对象，然后调用 get_class() 来获取该类的完全限定名称。

```
use A\Foo;

$foo = new Foo();

do_stuff(get_class($foo));  // get_class($foo) = '\A\Foo' 
```

这意味着 Foo 的命名空间**仅**由*use*语句定义（即更少的代码维护）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T14:36:42.137

或者你可以通过类反射。

[反射类](http://php.net/manual/en/class.reflectionclass.php)

# sql - 基于选择标准的数据的 sql 转储

> ID：14279256
> 
> 赞同：1
> 
> 时间：2013-01-11T13:32:08.163
> 
> 标签：sql, sql-server, sql-server-2008

从表中提取数据（模式和数据）时，我可以通过右键单击数据库并转到任务-> 生成脚本来执行此操作，它会为我提供表中的所有数据，包括创建脚本，这很好。

这虽然给了我表格中的所有数据 - 可以将其更改为只给我表格中的一些数据吗？例如，只有某个 dtmTimeStamp 之后的表上的数据？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:39:01.663

我建议使用查询将数据提取到单独的表中，然后在该表上使用生成脚本。或者，您可以使用导出数据向导将数据单独提取到平面文件中（包括列标题并使用带有双引号字段分隔符的逗号分隔符）。

要复制您的表格：

```
SELECT Col1 ,Col2 
INTO CloneTable 
FROM MyTable 
WHERE Col3 = @Condition 
```

（感谢@MarkD 添加）

# ios - 在我的 iOS 应用程序中，调用 viewDidLoad 时如何知道设备方向？

> ID：14279257
> 
> 赞同：0
> 
> 时间：2013-01-11T13:32:09.273
> 
> 标签：ios, cocoa-touch, uiview

我正在尝试这个：

```
- (void)viewDidLoad {

    [super viewDidLoad];

    if (UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation])) {

        NSLog(@"PORTRAIT");

    } else {

        NSLog(@"LANDSCAPE");
    }
} 
```

但似乎`[[UIDevice currentDevice] orientation]`返回 0，所以我不知道当时设备的方向。我怎么知道呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:42:31.197

我在用

```
UIInterfaceOrientationIsPortrait([[UIApplication sharedApplication]statusBarOrientation] 
```

这来自：

[iOS 开发者库：响应可见视图控制器中的方向变化](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html)

> 窗口调整视图控制器视图的边界。这会导致视图对其子视图进行布局，从而触发视图控制器的 viewWillLayoutSubviews 方法。**当此方法运行时，您可以查询应用程序对象的 statusBarOrientation 属性以确定当前的用户界面布局。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:35:42.240

您可以像这样检查设备的方向

```
 if (UIInterfaceOrientationIsPortrait([UIApplication sharedApplication].statusBarOrientation))
{
NSLog (@"Device is in Portrait Mode");
}
else
{
NSLog (@"Device is in Landscape Mode");
} 
```

# ruby-on-rails - Rails：干燥相似但不同的观点

> ID：14279258
> 
> 赞同：0
> 
> 时间：2013-01-11T13:32:14.327
> 
> 标签：ruby-on-rails, view

我有一对非常相似的视图，它们呈现几乎相同的信息，只有在一个视图中有几个额外的列，而在另一个视图中，行链接略有不同的嵌套资源。我最初的方法是通过使用部分保持它干燥，然后在整个视图中放置条件。生成的部分看起来像这样：

```
<div id='overview_table'>
  <div id="overview_header">
    <span id="sort_title" class="title cell">Title<span id="publication_sort_arrow"> &darr;</span></span>
    <span id="sort_author" class="author cell">Author</span>
    <span id="sort_status" class="status cell">Status</span>
    <% if @user.present? %>
        <span id="sort_impression_date" class="date cell">Date</span>
        <span id="sort_impression_vote" class="votes cell">Votes</span>
        <span id="sort_children_total" class="children_total cell">Replies</span>
    <% end %>
  </div>
  <span id="sort_method">title ASC</span>
  <% @publications.each do |publication| %>
    <div class='<%= cycle("odd", "even") %>'>
        <% if @user.present? %>
            <% link = [@user, publication] %>
        <% else %>
          <% link = [@group, publication] %>
        <% end %>
        <%= link_to(link, :remote => true) do %>
            <span class="title cell"><%= publication.full_title %></span>
            <span class="author cell"><%= publication.authors %></span>
            <span class="status cell"><%= publication_status(publication.status) %></span>
            <% if @user.present? %>
                <span class="date cell"><% if publication.impression_date %><%= publication.impression_date.strftime("%B %d, %Y") %><% end %></span>
                <span class="votes cell"><% if publication.impression_vote %><%= publication.impression_vote.to_i %><% end %></span>
                <span class="children_total cell"><% if publication.impression_vote %><%= publication.children_total %><% end %></span>
            <% end %>
        <% end %>
    </div>
<% end %> 
```

它工作得很好，但代码感觉很hacky。我最终将它们分成了两个不同的视图，尽管现在有很多重复的代码。两种方法都感觉不足。还有另一种我不考虑的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:02:38.733

这里有不同的策略，但在这种情况下，如果您只是添加一些字段，我会做这样的事情（这与您正在做的事情相似）。

在我的控制器中，我将一些标记值设置为 true：

```
@show_val_extra=true 
```

在我看来（在您的示例中可能是部分代码而不是内联代码）：

```
 <%="something here" unless @show_val_extra.nil? %> 
```

无论您要检查什么，以及在控制器中管理视图的其他问题对我来说都是丑陋的。YMMV 但这就是我要做的，因为它基本上使它成为一个值，并在你需要不同的信息时进行一次检查。通常，它在多个地方，但您在多个地方都有内容，如果出现这种情况，进一步的重构很容易。

# namespaces - 更改当前命名空间中使用关联对象的名称

> ID：14279259
> 
> 赞同：1
> 
> 时间：2013-01-11T13:32:20.137
> 
> 标签：namespaces, fortran

我觉得这必须是重复的，但我似乎无法在任何地方找到它，而且我没有通过非常快速的谷歌搜索得到任何东西。

有没有办法更改模块中的东西的名称，使其不与本地（或全局）的名称冲突？考虑这个例子：

```
module namespace
   real x  !some data
   contains
   subroutine foo()
     write(0,*) "foo!"
   end subroutine foo
end module
subroutine foo()
   write(0,*) "foo is the new bar :)"
end subroutine

program main
  use namespace
  real x
  call foo() !should print "foo is the new bar"
  call namespacefoo() !somehow call module namespace's version of foo
end program main 
```

上面的代码没有编译，因为`x`没有定义。当然，如果我不想要一个名为 的局部变量`x`，那么我可以`use namespace, only: foo`，但是必须弄乱我的局部变量名称似乎有点麻烦。（作为旁注，我很确定我以前在`only`声明的一部分中看到过一些魔法......）

* * *

为了那些也了解python的人的利益，我正在寻找类似于python的东西：

```
import namespace as other_namespace 
```

或者我猜因为 Fortran 没有那种级别的命名空间控制：

```
from namespace import somefunc as otherfunc
from namespace import somedata as otherdata 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T13:42:32.117

您需要重命名：

```
[luser@cromer stackoverflow]$ cat ren.f90
module namespace
   real x  !some data
   contains
   subroutine foo()
     write(0,*) "foo!"
   end subroutine foo
end module
subroutine foo()
   write(0,*) "foo is the new bar :)"
end subroutine

program main
  use namespace, local_name => x, namespacefoo => foo  
  real x
  call foo() !should print "foo is the new bar"
  call namespacefoo() !somehow call module namespace's version of foo
end program main
[luser@cromer stackoverflow]$ nagfor ren.f90
NAG Fortran Compiler Release 5.3.1 pre-release(904)
Warning: ren.f90, line 17: X explicitly imported into MAIN (as LOCAL_NAME) but not used
Warning: ren.f90, line 17: Unused local variable X
[NAG Fortran Compiler normal termination, 2 warnings]
[luser@cromer stackoverflow]$ ./a.out
 foo is the new bar :)
 foo! 
```

当然，如果可能的话，最好将模块私有化，以避免这种事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:40:03.160

似乎我应该在我的谷歌搜索中更加努力：

```
use namespace, only: namespace_x => x, namespacefoo => foo 
```

“imports”命名空间`x`在本地名称`namespace_x`和命名空间的子例程下`foo`，就像`namespacefoo`在本地命名空间中一样。

一些代码是为了他人的利益：

```
module namespace
   real x  !some data
   real y
   contains
   subroutine foo()
     write(0,*) "foo!"
   end subroutine foo
end module

subroutine foo()
   use namespace, only: x,y
   write(0,*) "foo is the new bar :)"
   write(0,*) "by the way, namespace.x is:",x
   write(0,*) "by the way, namespace.y is:",y
end subroutine

program main
  use namespace, only: namespacefoo => foo, y, z => x
  real x
  x = 0.0
  y = 1.0
  z = 2.0
  call foo() !should print "foo is the new bar"
  call namespacefoo() !somehow call module namespace's version of foo
end program main 
```

# cakephp - 如何检查用户正在编辑的角色？

> ID：14279260
> 
> 赞同：1
> 
> 时间：2013-01-11T13:32:20.090
> 
> 标签：cakephp

我有所有者、管理员和用户角色。只有一个主人，那就是我。如何拒绝管理员编辑或删除我？所有者的 id 为 1，所以如果我要签入 isAuthorized() 如果管理员不是所有者，我会这样做：`$user['id'] != 1`。现在我将如何检查被编辑或删除的用户是否是所有者。我知道如何通过以下方式获取用户 ID：`$this->request->params['pass'][0]`但不是用户角色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:44:55.453

我认为我不会将“所有者”作为角色。`owner_id`允许某人成为普通角色类型，然后在项目表中保留一个字段要容易得多。

这样，您可以让角色处理更高级别的授权，并且在单个项目的操作/方法中，您可以检查所有权（通常使用自定义`isOwner()`函数来保持代码 DRY）。

以您的`PostsController->edit($id)`功能为例，您可以`find()`在 Post 上进行操作，然后进行比较`owner_id`以`$this->Auth->user('id')`确保他们只有在他们是所有者的情况下才能进行编辑。

如果您想检索 Role 并使其保持可用，您可以在 AppController 的 beforeFilter 中执行此操作，并根据Auth->user`roles`的字段在表上正常查找。`role_id`

# facebook - 在朋友的时间轴上分享

> ID：14279264
> 
> 赞同：2
> 
> 时间：2013-01-11T13:32:40.563
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-sharer

我怎样才能像图片一样在朋友时间轴上共享项目。我正在使用 Facebook 共享者 url，就像在下面的代码中的[**演示一样。**](http://jsfiddle.net/86EvD/)我必须添加哪个参数才能在朋友的时间轴上共享此 url？

```
<a target="_blank" title="Share on Facebook" href="https://www.facebook.com/dialog/feed?%20app_id=<?php echo FACEBOOK_APP_ID;?>&%20link=<?php echo urlencode(url_cevir(APP_BASE_URL.'/index.php?view=s&artist='.$a[artistname].'&track='.$a[trackname]));?>&%20picture=<?php echo $a[pic_large];?>&%20name=<?php echo urlencode($a[artistname].' - '.$a[trackname]);?>&caption=cruisear.com&description=Discover new artists, listen new songs.&redirect_uri=<?php echo APP_BASE_URL; ?>"> <img src="img/face.gif" alt="share on facebook" /> </a> 
```

![在此处输入图像描述](../Images/5e25013315ae66c0c396905298f9222e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:19:14.483

为了在朋友的墙上分享内容，您需要在 `to`链接中添加参数：

```
https://www.facebook.com/dialog/feed?
app_id=458358780877780&
  link=<?php echo $link ?>/&
  picture=<?php echo $pic ?>&
  to=<?php echo $friendId ?>
  name=<?php echo $name ?>&
  caption=<?php echo $caption ?>&
  description=<?php echo $description ?>&
  redirect_uri=<?php echo $url ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:00:38.060

您正在寻找 Facebook 的新发送按钮。

[http://developers.facebook.com/docs/reference/plugins/send/](http://developers.facebook.com/docs/reference/plugins/send/)

# python - 添加数字时python / numpy中的浮点精度细分

> ID：14279267
> 
> 赞同：10
> 
> 时间：2013-01-11T13:33:02.933
> 
> 标签：python, numpy, precision

由于 numpy 使用的数字非常低，我遇到了一些问题。我花了几个星期才将我在数值积分方面经常遇到的问题追溯到一个事实，即当我在函数中添加浮点数时，float64 精度会丢失。使用乘积而不是总和执行数学上相同的计算会得到正确的值。

这是一个代码示例和结果图：

```
from matplotlib.pyplot import *
from numpy import vectorize, arange
import math

def func_product(x):
    return math.exp(-x)/(1+math.exp(x))

def func_sum(x):
    return math.exp(-x)-1/(1+math.exp(x))

#mathematically, both functions are the same

vecfunc_sum = vectorize(func_sum)
vecfunc_product = vectorize(func_product)

x = arange(0.,300.,1.)
y_sum = vecfunc_sum(x)
y_product = vecfunc_product(x)

plot(x,y_sum,    'k.-', label='sum')
plot(x,y_product,'r--',label='product')

yscale('symlog', linthreshy=1E-256)
legend(loc='lower right')
show() 
```

![在此处输入图像描述](../Images/33e2a5bd9c409faf4a474ee80316cbdb.png)

如您所见，非常低的总和值分散在零附近或恰好为零，而相乘的值很好......

请，有人可以帮助/解释吗？非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T14:10:17.163

由于舍入误差，浮点精度对加法/减法非常敏感。最终，`1+exp(x)`变得如此之大，以至于将 1 加到 exp(x) 得到与 exp(x) 相同的结果。在双精度中，大约在某处`exp(x) == 1e16`：

```
>>> (1e16 + 1) == (1e16)
True
>>> (1e15 + 1) == (1e15)
False 
```

请注意，`math.log(1e16)`大约是 37 —— 这大概是你的情节变得疯狂的地方。

你可以有同样的问题，但在不同的规模：

```
>>> (1e-16 + 1.) == (1.)
True
>>> (1e-15 + 1.) == (1.)
False 
```

对于您政权中的绝大多数要点，您`func_product`实际上是在计算：

```
exp(-x)/exp(x) == exp(-2*x) 
```

这就是为什么你的图表有一个很好的-2斜率。

把它带到另一个极端，你的另一个版本正在计算（至少大约）：

```
exp(-x) - 1./exp(x) 
```

这大约是

```
exp(-x) - exp(-x) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T14:14:55.203

这是[灾难性取消](http://en.wikipedia.org/wiki/Loss_of_significance)的一个例子。

让我们看看计算出错的第一点，当`x = 36.0`

```
In [42]: np.exp(-x)
Out[42]: 2.3195228302435691e-16

In [43]: - 1/(1+np.exp(x))
Out[43]: -2.3195228302435691e-16

In [44]: np.exp(-x) - 1/(1+np.exp(x))
Out[44]: 0.0 
```

使用的计算`func_product`不会减去几乎相等的数字，因此它避免了灾难性的取消。

* * *

顺便说一句，如果你`math.exp`改为`np.exp`，你可以摆脱`np.vectorize`（这很慢）：

```
def func_product(x):
    return np.exp(-x)/(1+np.exp(x))

def func_sum(x):
    return np.exp(-x)-1/(1+np.exp(x))

y_sum = func_sum_sum(x)
y_product = func_product_product(x) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T14:14:12.197

问题是您`func_sum`的[数值不稳定](http://en.wikipedia.org/wiki/Numerical_stability)，因为它涉及两个非常接近的值之间的减法。

`func_sum(200)`例如在计算`math.exp(-200)`和`1/(1+math.exp(200))`具有相同的值，因为加到`1`没有`math.exp(200)`效果，因为它超出了 64 位浮点的精度：

```
math.exp(200).hex()
0x1.73f60ea79f5b9p+288

(math.exp(200) + 1).hex()
0x1.73f60ea79f5b9p+288

(1/(math.exp(200) + 1)).hex()
0x1.6061812054cfap-289

math.exp(-200).hex()
0x1.6061812054cfap-289 
```

这就解释了为什么`func_sum(200)`给出零，但是那些位于 x 轴之外的点呢？这些也是由浮点不精确引起的；偶尔会发生`math.exp(-x)`不等于`1/math.exp(x)`; 理想情况下，`math.exp(x)`是最接近 的浮点值`e^x`，并且`1/math.exp(x)`是最接近由 计算的浮点数的倒数的浮点值`math.exp(x)`，不一定是`e^-x`。确实，`math.exp(-100)`并且`1/(1+math.exp(100))`非常接近，实际上仅在最后一个单元中有所不同：

```
math.exp(-100).hex()
0x1.a8c1f14e2af5dp-145

(1/math.exp(100)).hex()
0x1.a8c1f14e2af5cp-145

(1/(1+math.exp(100))).hex()
0x1.a8c1f14e2af5cp-145

func_sum(100).hex()
0x1.0000000000000p-197 
```

因此，您实际计算的是 和 之间的差异（如果有`math.exp(-x)`）`1/math.exp(x)`。您可以跟踪函数的行`math.pow(2, -52) * math.exp(-x)`以查看它是否通过了正值`func_sum`（回想一下，52 是 64 位浮点中有效数的大小）。

# sql-server - TDS 缓冲区长度太大

> ID：14279269
> 
> 赞同：2
> 
> 时间：2013-01-11T13:33:19.477
> 
> 标签：sql-server, informatica-powercenter

我有一个 Informatica 9.1 会话从 SQL Server 2008R2 数据库服务器接收 Microsoft OLE DB Provider for SQL Server 错误“TDS 缓冲区长度太大”。我发现了一些关于此类问题的旧参考，但所有内容都可以追溯到更早版本的 SQL Server。我想知道是否有人见过类似的东西。该服务器是 VMWare Vsphere 5.X 上的主机。所涉及的所有来宾操作系统服务器都在 Windows 2008 上运行，并且应该使用 MDAC 2.8。任何帮助，将不胜感激。在这一点上，我只是想弄清楚从哪里开始寻找？

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-12T08:37:31.157

它解决了我的问题，希望它也适合你：

1.  在数据库服务器上右键单击“网络”-> 属性
2.  右键单击本地连接-> 属性
3.  选择 Internet 协议 (TCP/IP) -> 配置
4.  转到高级选项卡 -> 速度和双工，如果**值为**“自动”，请将值设置为 ->“ **100mb full** ”

# c++ - 包括 secExt.h 会导致错误

> ID：14279276
> 
> 赞同：1
> 
> 时间：2013-01-11T13:33:48.110
> 
> 标签：c++, windows

我正在尝试将其包含`secExt.h`在我的 C++ 项目中，但它给了我错误：

> 错误 C2086：'BOOLEAN SEC_ENTRY'：重新定义

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:37:16.350

**编辑**：来自微软的文档，包括[security.h](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724435%28v=vs.85%29.aspx)，而不是 [secext.h]。

原始答案（在我自己搜索标题名称之前，OP没有提供任何信息）：

* * *

如果标题是您的，请添加

```
#pragma once 
```

在顶部。

如果这不起作用（据报道，某些 IBM 系统上有编译器或不支持的东西`#pragma once`），则使用标头保护。

如果标头不是您的，请创建一个像这样的标头包装器：

```
#pragma once
#include <secExt.h> 
```

然后包含您的包装标头，而不是直接包含 [secExt.h]。

# c++ - 如何使用 GCC 或 Clang 构建 Objective-c++ 代码？

> ID：14279278
> 
> 赞同：2
> 
> 时间：2013-01-11T13:33:49.610
> 
> 标签：c++, objective-c, gcc, clang, objective-c++

我对 C++ 有完整的了解，对 Objective-C 有一点了解所以请告诉我如何用 Objective-C++ 代码编写和编译

1) 编写代码

2）使用 GCC 或 Clang（命令）编译（如果可能的话，请告诉我 GCC）

3）我应该写哪个.extension来保存Objective-C++

4) 我可以在 Qt Creator 中使用它吗

5）学习Objective-C++的好书或网站

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:47:13.823

1.  最常见的是将 xcode 用作 IDE。

2.  最新的 xcode 版本确实使用 CLang 作为其默认编译器。MinGw 是 Windows 的编译器，因此您必须在 Windows 上使用诸如 GnuStep 之类的东西来运行目标 c 代码[http://www.gnustep.org/](http://www.gnustep.org/)。

3.  Objective-C++ 扩展名是“.mm”

4.  我不这么认为。

5.  苹果开发者网站。

# jquery - 避免右键单击剑道网格

> ID：14279285
> 
> 赞同：0
> 
> 时间：2013-01-11T13:34:27.953
> 
> 标签：jquery, telerik, kendo-ui

这是我的网格：

```
$("#myHtmlTable1").kendoGrid({
    dataSource: {
        pageSize: 18
    },
    scrollable: false,
    sortable: true,
    filterable: true,
    selectable: true,
    pageable: {
        input: false,
        numeric: false
    },
    change: function () {
        // MY LOGIC
    },
    columns: [
    {
        field: "Col1",
        width: 40
    },
    {
        field: "Col2",
        width: 250
    },
    {
        width: 40,
        field: "Col3"
    },
    {
        width: 150,
        field: "Col4"
    }
    ]
}); 
```

当我单击一行时，我得到行文本并将其放在另一个文本框中。但我只想用鼠标左键执行此操作，以便我可以在网格上使用右键查看源代码页。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T13:54:09.880

您可以在触发文档事件时将以下 keydown 处理程序附加到 Grid 的 tbody 元素，以防止右键单击 mousedown 事件冒泡，从而避免 Grid 对其做出反应。

```
$(function(){
    $('#myHtmlTable1').data('kendoGrid').tbody.on('mousedown',function(e){
        if(e.button==2){
            e.stopImmediatePropagation()
        }
    })
}) 
```

# c++ - 定时器中断中的 ATMega32 C++ 对象

> ID：14279286
> 
> 赞同：0
> 
> 时间：2013-01-11T13:34:36.757
> 
> 标签：c++, c, embedded, interrupt, avr

是否有可能调用成员函数，例如通过 UART 的输出，以由中断触发？通常我会使用 TIMER0_COMP vect，但我似乎无法让它与对象一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:38:20.427

```
SomeClass theObject;

// ...

ISR(USART_RX_vect)
{
   theObject.someMethod();
} 
```

这是你要找的吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T16:42:41.907

没有办法让中断向量指向特定**对象的**成员函数。这是因为不可能将 *this 指针直接传递给 ISR。

可以让中断向量指向特定**类的**成员函数，前提是它是一个返回 void 且没有参数的静态函数。但是，由于它是一个静态函数，它无法访问任何单个对象的非静态数据成员。

下面是一个 IAR 编译器和来自 AVR 的定时器中断向量的示例：

```
class theClass
{
  public:
  ...

  #pragma vector=TCC1_CCA_vect
  __interrupt static void isrTimer1CompareA(void);

  ...
 } 
```

同样，这种方法的局限性在于 ISR 只能访问类的静态数据。

如果您希望中断与特定对象相关，则需要符合 H2C03 建议的内容，即让 ISR 了解特定对象，然后在 ISR 中调用该对象的成员本身。

# android - 使用 android 虚拟设备测试 activesync

> ID：14279296
> 
> 赞同：0
> 
> 时间：2013-01-11T13:35:24.330
> 
> 标签：android, activesync

我正在尝试设置一个 android 虚拟设备来测试与`activesync-server`. 我按照以下[步骤操作：](http://exchangeserverpro.com/exchange-activesync-virtual-android-device)

问题是同步根本不起作用，但是没有像连接错误这样的错误......

IMO的问题是虚拟设备只有一个私有IP，所以服务器永远不能向它发送任何东西？

所以我可能需要某种转发，比如[这里：](http://developer.android.com/tools/devices/emulator.html#redirection)

但我不确定这是否正确，我也不确定应该转发哪些端口。

这是logcat，当我想同步时：

```
W/InputMethodManagerService（148）：窗口已经聚焦，忽略焦点增益：com.android.internal.view.IInputMethodClient$Stub$Proxy@41302038 属性=null
I/Choreographer(274)：跳过41帧！应用程序可能在其主线程上做了太多工作。
D/dalvikvm(477)：GC_CONCURRENT 释放 396K，6% 释放 8392K/8903K，暂停 15ms+7ms，总共 527ms
D/dalvikvm(274)：GC_CONCURRENT释放360K，11%释放9493K/10567K，暂停29ms+48ms，共142ms
I/EAS ContactsSyncAdapterService(477)：为 test@example.com 请求联系人同步
D/dalvikvm（148）：GREF 已增加到 601
D/dalvikvm（477）：WAIT_FOR_CONCURRENT_GC 阻塞 0 毫秒
I/Choreographer(274)：跳过33帧！应用程序可能在其主线程上做了太多工作。
D/dalvikvm(477)：GC_EXPLICIT 释放 333K，7% 释放 8355K/8903K，暂停 78ms+32ms，总共 1269ms
I/EAS EmailSyncAdapterService（477）：执行同步
I/EAS EmailSyncAdapterService(477)：为 test@example.com 请求邮件同步
D/dalvikvm（460）：WAIT_FOR_CONCURRENT_GC 阻塞 0 毫秒
D/dalvikvm(460)：GC_EXPLICIT释放216K，5%释放8483K/8839K，暂停145ms+94ms，共914ms
D/dalvikvm（148）：WAIT_FOR_CONCURRENT_GC 阻塞 0 毫秒
D/dalvikvm(148)：GC_EXPLICIT释放510K，7%释放11338K/12167K，暂停8ms+35ms，共323ms
D/dalvikvm(274): GC_CONCURRENT freed 415K, 11% free 9486K/10567K, paused 25ms+28ms,总共125ms
E/Inbox[test@example.com](477)：EasSyncServicejava.lang.ArrayIndexOutOfBoundsException 中未捕获的异常：长度=32；索引=32
E/Inbox[test@example.com](477)：同步因异常而结束。
D/dalvikvm(477)：GC_CONCURRENT释放376K，6%释放8420K/8903K，暂停5ms+18ms，共66ms

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:23:04.727

我认为这不是您的网络设置的问题。您的同步代码中似乎有错误，导致进程停止：

E/Inboxtest@example.com：EasSyncServicejava.lang.ArrayIndexOutOfBoundsException 中未捕获的异常：length=32；index=32 E/Inboxtest@example.com：同步因异常而结束。

>

将此代码包装在 try/catch 块中以更好地了解正在发生的事情。

# jquery - 在同一文本框中自动填充多个城市的名称

> ID：14279297
> 
> 赞同：-1
> 
> 时间：2013-01-11T13:35:25.710
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

目前我正在使用这个插件（页面末尾的示例）

[http://api.jqueryui.com/autocomplete/](http://api.jqueryui.com/autocomplete/)

如果我输入“p”，那么“php”就会出来。

怎样修改插件，让我输入SPACE或“，”再输入“c”，c++就出来了？因此，我可以在文本框中拥有的是“php，c++”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:40:36.797

为什么当 jquery autocomplete multiple 为你做任何事情时你需要“SPACE”或“”..看看这个

```
.autocomplete({
 ......
 select: function( event, ui ) {
      var terms = split( this.value );
      // remove the current input
      terms.pop();
      // add the selected item
      terms.push( ui.item.value );
      // add placeholder to get the comma-and-space at the end
      terms.push( "" );
      this.value = terms.join( ", " );
      return false;
    }
 }); 
```

你可以看看 jquery autocomplete multiple example ..[这](http://jqueryui.com/autocomplete/#multiple)是链接

> 这是一个示例，展示了如何使用 source-option 以及一些事件来启用将多个值自动填充到单个字段中。

您可以单击示例中的查看源链接并查看他们是如何完成的。

# c - 从标准输入读取数据而不阻塞的便携方式

> ID：14279298
> 
> 赞同：0
> 
> 时间：2013-01-11T13:35:25.517
> 
> 标签：c, asynchronous, stream, stdin

有没有一种可移植的方式来读取数据`stdin`而不阻塞，或者检查数据是否可以在没有阻塞的情况下读取？请记住，标准输入可以从另一个进程通过管道传输，而不仅仅是终端/键盘输入。

最好只使用 stdlib.h 或 stdio.h 中的 ANSI C 函数，但使用 POSIX 函数也非常可移植。

我也不确定这一点，但有[一些论坛帖子](http://www.gamedev.net/topic/285863-non-blocking-stdin-read-on-win32/)他们说`select()`实际上在 Windows 上不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T13:57:05.023

`select()`并且`poll()`是 POSIX 方式，但它们不适用于非套接字的 Windows。

如果 Windows 和 Unix 都是您的目标，那么就没有足够的便携性。更重要的是，在 Windows 上，您必须分别处理管道和控制台句柄：`PeekNamedPipe()`对于管道，`PeekConsoleInput()`对于控制台（即使您没有`ENABLE_LINE_INPUT`，后者也相当复杂，如果有的话，请转向真正的蠕虫罐头）。

在单独的线程中进行输入更具可移植性，即使 pthread 与 Windows 存在差异（并且有 pthread-for-Win32 库可以消除这些差异）。

# php - xmlhttp.readyState 不适用于 mysql 事务

> ID：14279300
> 
> 赞同：0
> 
> 时间：2013-01-11T13:35:31.893
> 
> 标签：php, mysql, ajax, readystate

我有一个 ajax 函数，我只是调用一个要运行 mysql 事务的 php 页面。在检查 mysql 日志时，我已验证事务运行成功但 xmlhttp 对象跳转到 else 语句 readyState 和状态。

我的js代码：

```
function promoteOptionsAllot(stid,cid,nsid,elid,flag){
anchor = document.getElementById('promoteAnchor'+elid);
imgContainer = document.getElementById('promoteStatus'+elid);
if(flag == 1){
opt1 = encodeURIComponent(document.getElementById('promote_option1').value);
opt2 = encodeURIComponent(document.getElementById('promote_option2').value);
opt3 = encodeURIComponent(document.getElementById('promote_option3').value);
opt4 = encodeURIComponent(document.getElementById('promote_option4').value);
params =   "stid="+encodeURIComponent(stid)+"&course="+encodeURIComponent(cid)+"&sem="+encodeURIComponent(nsid)+"&element="+encodeURIComponent(elid)+"&popt1="+opt1+"&popt2="+opt2+"&popt3="+opt3+" &popt4="+opt4+"&flag="+encodeURIComponent(flag);
 }
else if(flag == 2){
params =   "stid="+encodeURIComponent(stid)+"&course="+encodeURIComponent(cid)+"&sem="+encodeURIComponent(nsid)+"&element="+encodeURIComponent(elid)+"&flag="+encodeURIComponent(flag);
}

if (window.XMLHttpRequest)
 { 
 xmlhttp=new XMLHttpRequest();
 }
else
 {
 xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  { 
 if (xmlhttp.readyState==4 && xmlhttp.status==200)
  {
document.body.removeChild(document.getElementById('prBox'));
document.body.removeChild(document.getElementById('prBackground'));
result = xmlhttp.responseText;  
if(result == "done"){
anchor.innerHTML = "<span style='color:#198D19;'><b>Promoted</b></span>";
imgContainer.src = "tick.png";
}else {
alert("There was a problem serving the request. Please try again.");
imgContainer.src = "cross.jpg";
}
 }
else{
imgContainer.src = "alert.gif";
}
 }
xmlhttp.open("POST","promoptallot.php",true);
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.send(params);
} 
```

它是链接的 onclick 事件，并且在单击链接时虽然事务成功但不知何故 imagecontainer 显示 alert.gif 这意味着它永远不会在 readystate == 4 和 status == 200 语句中运行代码。

请不要建议使用jquery。我知道它是一个稳定的框架和其他东西，但我只需要一个答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:17:34.213

检查控制台，我发现问题在线`document.body.removeChild(document.getElementById('prBox')); document.body.removeChild(document.getElementById('prBackground'));`

这些行必须基于案例执行，我没有将其放在 if 语句中。

现在，在`if (flag ==1){ document.body.removeChild(document.getElementById('prBox')); document.body.removeChild(document.getElementById('prBackground')); }`按预期工作之后。

谢谢。

# ios - iOS 6 - 无法访问照片？

> ID：14279308
> 
> 赞同：0
> 
> 时间：2013-01-11T13:35:53.243
> 
> 标签：ios, objective-c, cocoa-touch

[http://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniPhoneOS/Articles/iOS6.html](http://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniPhoneOS/Articles/iOS6.html)

在那里它说“对于照片库，现有界面支持应用程序被拒绝访问。” 这是否意味着应用程序无法请求用户访问他的照片的权限？他需要手动转到设置->隐私->照片并切换我的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:14:51.117

如果您`ALAssets`用于访问照片库，系统将首次询问用户是否愿意将照片分享到您的应用程序。如果用户点击“允许” - 一切都会好起来的，否则，用户应该转到首选项并在需要时手动允许。希望它有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:15:57.250

不，那不是真的。当用户第一次从您的应用访问他的照片时，iOS 会请求用户许可。

# java - Eclipse Ant Build 未在 Jenkins 中编译

> ID：14279311
> 
> 赞同：0
> 
> 时间：2013-01-11T13:35:55.570
> 
> 标签：java, eclipse, ant, jenkins

我正在尝试在 jenkins 中安排以下 ANT 构建来执行 java 类。当我在 Eclipse 中运行构建配置时，它会编译并执行我的 java 类。当我在 Jenkins 中安排并执行 build.xml 时，它会执行构建但无法编译我的 java 类。然后它将构建标记为成功完成。我在 eclipse 和 jenkins 中运行 ANT 版本 1.8.4 和 Java 版本 1.7.0_03。我不确定为什么 Jenkins 无法编译该类？

```
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
     <!-- WARNING: Eclipse auto-generated file.
          Any modifications will be overwritten.
          To include a user specific buildfile here, simply create one in the same
          directory with the processing instruction <?eclipse.ant.import?>
          as the first entry and export the buildfile again. -->
     <project basedir="." default="build" name="Sel_Framework_Grid">
<property environment="env"/>
<property name="debuglevel" value="source,lines,vars"/>
<property name="target" value="1.7"/>
<property name="source" value="1.7"/>
<path id="TestNG.libraryclasspath">
    <pathelement location="../../../.eclipse/com.springsource.sts_2.9.1.RELEASE_1574885722/plugins/org.testng.eclipse_6.7.0.20120802_0752/lib/testng.jar"/>
</path>
<path id="Sel_Framework_Grid.classpath">
    <pathelement location="bin"/>
    <pathelement location="lib/activation.jar"/>
    <pathelement location="lib/apache-mime4j-0.6.jar"/>
    <pathelement location="lib/axis.jar"/>
    <pathelement location="lib/bsh-1.3.0.jar"/>
    <pathelement location="lib/cglib-nodep-2.1_3.jar"/>
    <pathelement location="lib/commons-codec-1.4.jar"/>
    <pathelement location="lib/commons-collections-3.2.1.jar"/>
    <pathelement location="lib/commons-discovery.jar"/>
    <pathelement location="lib/commons-exec-1.1.jar"/>
    <pathelement location="lib/commons-io-2.0.1.jar"/>
    <pathelement location="lib/commons-jxpath-1.3.jar"/>
    <pathelement location="lib/commons-lang-2.6.jar"/>
    <pathelement location="lib/commons-logging-1.1.1.jar"/>
    <pathelement location="lib/commons-logging.jar"/>
    <pathelement location="lib/cssparser-0.9.5.jar"/>
    <pathelement location="lib/cxf-2.5.2.jar"/>
    <pathelement location="lib/geronimo-activation_1.1_spec-1.1.jar"/>
    <pathelement location="lib/geronimo-annotation_1.0_spec-1.1.1.jar"/>
    <pathelement location="lib/geronimo-javamail_1.4_spec-1.7.1.jar"/>
    <pathelement location="lib/geronimo-stax-api_1.0_spec-1.0.1.jar"/>
    <pathelement location="lib/guava-10.0.1.jar"/>
    <pathelement location="lib/hamcrest-all-1.1.jar"/>
    <pathelement location="lib/htmlunit-2.9.jar"/>
    <pathelement location="lib/htmlunit-core-js-2.9.jar"/>
    <pathelement location="lib/httpclient-4.1.2.jar"/>
    <pathelement location="lib/httpcore-4.1.3.jar"/>
    <pathelement location="lib/httpmime-4.1.2.jar"/>
    <pathelement location="lib/jaxb-api-2.2.3.jar"/>
    <pathelement location="lib/jaxb-impl-2.2.4-1.jar"/>
    <pathelement location="lib/jaxb-xjc-2.2.4-1.jar"/>
    <pathelement location="lib/jaxen-core.jar"/>
    <pathelement location="lib/jaxen-jdom.jar"/>
    <pathelement location="lib/jaxrpc.jar"/>
    <pathelement location="lib/jcommander-1.13.jar"/>
    <pathelement location="lib/jcspclasses.jar"/>
    <pathelement location="lib/jdom.jar"/>
    <pathelement location="lib/jna-3.3.0.jar"/>
    <pathelement location="lib/json-20080701.jar"/>
    <pathelement location="lib/junit-dep-4.10.jar"/>
    <pathelement location="lib/jython.jar"/>
    <pathelement location="lib/log4j-1.2.8.jar"/>
    <pathelement location="lib/mail.jar"/>
    <pathelement location="lib/neethi-3.0.1.jar"/>
    <pathelement location="lib/nekohtml-1.9.15.jar"/>
    <pathelement location="lib/operadriver-v0.8.1.jar"/>
    <pathelement location="lib/phwclasses.jar"/>
    <pathelement location="lib/protobuf-java-2.4.1.jar"/>
    <pathelement location="lib/saaj.jar"/>
    <pathelement location="lib/sac-1.3.jar"/>
    <pathelement location="lib/saxpath.jar"/>
    <pathelement location="lib/serializer-2.7.1.jar"/>
    <pathelement location="lib/sqljdbc4.jar"/>
    <pathelement location="lib/stax2-api-3.1.1.jar"/>
    <pathelement location="lib/velocity-1.7.jar"/>
    <pathelement location="lib/woodstox-core-asl-4.1.1.jar"/>
    <pathelement location="lib/wsdl4j-1.6.2.jar"/>
    <pathelement location="lib/wsdl4j.jar"/>
    <pathelement location="lib/xalan-2.7.1.jar"/>
    <pathelement location="lib/xercesImpl-2.9.1.jar"/>
    <pathelement location="lib/xml-apis-1.3.04.jar"/>
    <pathelement location="lib/xml-resolver-1.2.jar"/>
    <pathelement location="lib/xmlschema-core-2.0.1.jar"/>
    <pathelement location="lib/AspriseJavaPDF-free.jar"/>
    <pathelement location="lib/im4java-1.3.1-1.5.jar"/>
    <pathelement location="lib/im4java-1.3.1.jar"/>
    <pathelement location="lib/antlr-runtime-3.4.jar"/>
    <pathelement location="lib/jna-3.4.0.jar"/>
    <pathelement location="lib/testng-6.5.1.jar"/>
    <pathelement location="lib/testng-6.5.1.zip"/>
    <pathelement location="lib/slf4j-api-1.6.4.jar"/>
    <pathelement location="lib/slf4j-nop-1.6.4.jar"/>
    <pathelement location="lib/dom4j-1.6.1.jar"/>
    <pathelement location="lib/poi-3.8-20120326.jar"/>
    <pathelement location="lib/netty-3.2.7.Final.jar"/>
    <pathelement location="lib/webbit-0.4.8-SNAPSHOT.jar"/>
    <pathelement location="lib/dbunit-2.4.8-compatibileWithPoi-3.5-XLSXSupport.jar"/>
    <pathelement location="lib/poi-ooxml-3.8-20120326.jar"/>
    <pathelement location="lib/poi-ooxml-schemas-3.8-20120326.jar"/>
    <pathelement location="lib/xbean.jar"/>
    <pathelement location="lib/Aspose.Words.jdk16.jar"/>
    <pathelement location="lib/ojdbc14.jar"/>
    <pathelement location="lib/selenium-java-2.24.1-srcs.jar"/>
    <pathelement location="lib/selenium-java-2.24.1.jar"/>
    <pathelement location="lib/vim25.jar"/>
    <path refid="TestNG.libraryclasspath"/>
</path>
<target name="init">
    <mkdir dir="bin"/>
    <copy includeemptydirs="false" todir="bin">
        <fileset dir="src">
            <exclude name="**/*.java"/>
        </fileset>
    </copy>
</target>
<target name="clean">
    <delete dir="bin"/>
</target>
<target depends="clean" name="cleanall"/>
<target depends="build-subprojects,build-project" name="build"/>
<target name="build-subprojects"/>
<target depends="init" name="build-project">
    <echo message="${ant.project.name}: ${ant.file}"/>
    <javac debug="true" debuglevel="${debuglevel}" destdir="bin" source="${source}" target="${target}">
        <src path="src"/>
        <classpath refid="Sel_Framework_Grid.classpath"/>
    </javac>
</target>
<target name="BaseSet Test">
    <java classname="BaseSet" failonerror="true" fork="yes">
        <arg line="C:\temp\testng-customsuite.xml c:\Jenkinstest Firefox,IE,EN,Ready"/>
        <classpath refid="Sel_Framework_Grid.classpath"/>

    </java>
</target> 
```

**詹金斯控制台输出**

由用户匿名开始在工作区 C:\Users\blank\Documents\workspace-sts-2.9.1.RELEASE\Sel_Framework_Grid [Sel_Framework_Grid] $ cmd.exe /C '"C:\AutomatedTesting\apache-ant-1.8.4 -bin\apache-ant-1.8.4\bin\ant.bat -file buildA.xml -Dbuild.sysclasspath=false -buildfile C:\Users\blank\Documents\workspace-sts-2.9.1.RELEASE\Sel_Framework_Grid\ buildA.xml && exit %%ERRORLEVEL%%"' 构建文件：C:\Users\blank\Documents\workspace-sts-2.9.1.RELEASE\Sel_Framework_Grid\buildA.xml

构建子项目：

在里面：

构建项目：[echo] Sel_Framework_Grid：C:\Users\blank\Documents\workspace-sts-2.9.1.RELEASE\Sel_Framework_Grid\buildA.xml

建造：

构建成功总时间：0 秒完成：成功

**Eclipse 控制台输出**

构建文件：C:\Users\blank\Documents\workspace-sts-2.9.1.RELEASE\Sel_Framework_Grid\buildf.xml 构建子项目：初始化：构建项目：[echo] Sel_Framework_Grid：C:\Users\blank\Documents\ workspace-sts-2.9.1.RELEASE\Sel_Framework_Grid\buildf.xml [javac] C:\Users\blank\Documents\workspace-sts-2.9.1.RELEASE\Sel_Framework_Grid\buildf.xml：构建：BaseSet 测试：[java ] [TestNG] 运行：[java] C:\temp\testng-customsuite.xml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:55:45.813

您似乎没有指定要从 Jenkins 构建中运行的一组目标。这意味着将运行默认目标“build”：

```
<target depends="build-subprojects,build-project" name="build"/> 
```

目标“BaseSet Test”是运行您的 java 类的目标。似乎失踪了。我建议更改您的 Jenkins 工作以运行以下目标

```
build, BaseSet Test 
```

# php - PHP 应用程序的部分和层

> ID：14279312
> 
> 赞同：0
> 
> 时间：2013-01-11T13:35:57.080
> 
> 标签：php, oop

我正在建立一个大型网站，并希望使其具有可扩展性。我最近阅读了一篇由经验丰富的高负载项目开发人员 (Oleg Bunin) 撰写的文章，其中指出：

> 高负载应用必须分为三个部分：
> 
> 1) 前端（HTML、CSS、JS、图像）
> 
> 2) 后端（服务器端：使用 PHP、Python 或其他服务器端语言的繁重计算任务）
> 
> 3) 数据库

在这种情况下，应用程序将能够承受巨大的流量。文章还指出，`SQL`查询必须放在应用程序的一个地方。

我正在使用 PHP5 OOP 和 MySQL 数据库。我的解决方案：

1) 我将所有 SQL 查询放入类中。

2）我使用包装到数据库层类中的PHP PDO。

3) 每个类都使用数据库层对象进行初始化，并使用它来运行 SQL 查询。

例子：

```
// On the public accessible page
$DBH    = new RwtDatabaseLayer(['messages']); # database name
$msgs   = new GetMessages($DBH); 
```

在我的`GetMessages`课堂上：

```
class GetMessages
{
    private $_DBH;

    function __construct($DBH)
    {
        $this->_DBH = $DBH;
    }
    function get_messages()
    {
            $this->_DBH->run(QUERY HERE); // `run` is Database Layer method
    }
 } 
```

因此，我的公共可访问页面上的代码不包含任何 SQL 查询。

我这样做对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:45:03.360

如果您希望能够处理大量流量，您应该尝试将缓存合并到您的程序中。从这个意义上说，将所有查询放在专门的类中将帮助您围绕它们构建缓存。静态内容（html、css）也是如此，可以压缩/缓存或从不同的服务器（或自定义 CDN）提供。

我建议看看 memcache（以及 APC 等加速器）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:57:42.747

我强烈建议您阅读许多主要框架使用的模型视图控制器设计模式，然后至少学习其中一个主要框架，[Zend Framework 2](http://framework.zend.com/manual/2.0/en/user-guide/overview.html)和[Symfony 2](http://symfony.com/)将是很好的起点。IMO 在尝试创建“巨大流量”网站之前，您确实需要了解技术和设计原则

# java - 用字符串列表和计数构造一棵树

> ID：14279316
> 
> 赞同：0
> 
> 时间：2013-01-11T13:36:11.973
> 
> 标签：java, algorithm, tree

我有一个`Map<List<String>,Integer>`每个条目是一个路径（`List<String>`）和一个计数

前任：

```
["a1", "a2", "a3"] => 4
["a1", "a2"] => 2
["b1", "b2", "b3"] => 3
["b1"] => 4
["b1", "b2"] => 3
["c1", "c2", "c3", "c4"] => 5 
```

我想为每个节点输出一个带有计数的树

树：

```
- ROOT
-- a1 : 6
--- a2 : 6
---- a3 : 4
-- b1 : 7
--- b2 : 3
-- c1 : 5
--- c2 : 5
---- c3 : 5
----- c4 : 5 
```

JSON结构：

```
{
    "name": "",
    "count": "",
    "children": [
        {
            "name": "",
            "count": "",
            "children": []
        }
    ]
} 
```

什么是最有效的数据结构，然后在这种情况下如何使用它（然后应该将树序列化为 JSON 树）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:41:09.377

我将使用节点创建一个树结构，然后使用 XStream 序列化该结构。下面的例子，希望对你有所帮助。

**转换为节点结构**

```
public static Node createNodes(Map<List<String>, Integer> map) {
    Map<String, Node> namemap = new HashMap<String, Node>();
    Node root = new Node();
    Node current;
    for (Entry<List<String>, Integer> path : map.entrySet()) {
        current = root;
        for (String nodename : path.getKey()) {
            Node p;
            if (!namemap.containsKey(nodename)){
                p = new Node(nodename, path.getValue());
                namemap.put(nodename, p);
            }else {
                p = namemap.get(nodename);
                p.addCost(path.getValue());
            }
            current.addChild(p);
            current = p;
        }

    }

    return root;
} 
```

**序列化**

```
public static String toXML(Node n) {
    XStream xstream = new XStream(new JsonHierarchicalStreamDriver());
    xstream.alias("node", Node.class);
    return xstream.toXML(n);
} 
```

**节点对象**

```
public class Node {

    private String name;
    private int count;
    private List<Node> children;

    public Node() {
        this(null, 0);
    }

    public Node(String name, int count) {
        this.name = name; 
        this.count = count;
        this.children = new ArrayList<Node>();
    }

    public void addChild(Node n) {
        for (Node nn : children) {
            if (nn.name.equals(n.name)) {
                return;
            }
        }
        this.children.add(n);
    }

    public void addCost(int i) {
        this.count += i;
    }
} 
```

**JSON 输出**

```
{"node": {
  "count": 0,
  "children": [
    {
      "name": "c1",
      "count": 5,
      "children": [
        {
          "name": "c2",
          "count": 5,
          "children": [
            {
              "name": "c3",
              "count": 5,
              "children": [
                {
                  "name": "c4",
                  "count": 5,
                  "children": [
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "b1",
      "count": 10,
      "children": [
        {
          "name": "b2",
          "count": 6,
          "children": [
            {
              "name": "b3",
              "count": 3,
              "children": [
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "a1",
      "count": 6,
      "children": [
        {
          "name": "a2",
          "count": 6,
          "children": [
            {
              "name": "a3",
              "count": 4,
              "children": [
              ]
            }
          ]
        }
      ]
    }
  ]
}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:02:50.153

我会将您的地图更改为：

```
Map<String[], Integer> 
```

如果您想继续使用 List，请使用`ArrayList`and `trim(`) 它。

然后你必须决定是使用 a`HashMap`还是真的想要一棵树 ( `TreeMap`)。在后一种情况下，您应该创建一个带有字段`String[]`或`List<String>`.
然后这个 Path 对象必须实现`Comparable`，你必须实现它。

要执行`Serialisation`（Json 或其他系统），您通常会写出键值对。再次阅读时，您将通过输入（键，值）对再次构建您的地图或树。

在 json 或其他序列化文件中具有树结构不是一个好主意。你几乎永远不需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:43:27.297

就我个人而言，我会创建一个包含子节点和我的计数值的 Node 类，然后告诉您的 JSON 序列化程序如何根据您的需要正确序列化它。

# ios - 从子视图更改界面方向 - iOS

> ID：14279319
> 
> 赞同：0
> 
> 时间：2013-01-11T13:36:18.113
> 
> 标签：ios, subview, uiinterfaceorientation

我有一个始终是纵向的 iPhone 应用程序。但我需要旋转视图以显示表格。该按钮位于子视图中。我有这个代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
} 
```

但是因为这个视图是从子视图中调用的，所以界面方向被忽略了。

有没有办法改变界面方向？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:43:21.890

您是否尝试过以下操作？

[UIApplication sharedApplication].statusBarOrientation = UIInterfaceOrientationLandscapeRight;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:39:37.780

您需要在要旋转的视图上设置变换，然后将其设置回身份变换。

这将在纵向和横向之间切换...

```
 UIView* viewToTransform = self.newview;
    if (CGAffineTransformIsIdentity(viewToTransform.transform)) {
        CGAffineTransform transform = CGAffineTransformMakeRotation(M_PI/2);
        viewToTransform.transform = transform;

    }else{
        viewToTransform.transform = CGAffineTransformIdentity;
    } 
```

更好的是，将现有转换保存在一个属性中，以便您以后可以重置它（这将处理原始转换不是恒等转换的情况）。

# android - 微调项目只是黑条

> ID：14279320
> 
> 赞同：1
> 
> 时间：2013-01-11T13:36:28.773
> 
> 标签：android, spinner

这是我的第一个安卓应用，我是一个笔记应用。但是现在我遇到了微调器的问题。

在我的一个屏幕中，我有一个`Spinner`用户可以从给定类别中选择的屏幕。现在的问题是微调器中有正确数量的项目，并且注释被分配到正确的类别，但微调器中只有黑条而不是类别名称。

也许你们中的一些人遇到过同样的问题或知道如何处理它。下面是我如何创建和填充微调器的代码。

微调器`layout.xml`：

```
<Spinner
    android:id="@+id/note_cat_value_dd"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/note_name_value_tf"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/note_name_value_tf"
    android:prompt="@string/note_spin_prompt"
    android:textSize="12sp" /> 
```

填充微调器：

```
 Cursor cat = connect.query("category", new String[] {"_id", "name"}, null, null, null, null, null);
    ArrayList<String> options=new ArrayList<String>();
    cat_spin = (Spinner) findViewById(R.id.note_cat_value_dd);

    while(cat.moveToNext())
        options.add(cat.getString(1));      

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,options);
    cat_spin.setAdapter(adapter); 
```

并且没有其他代码包含微调器，除了一次我用`"cat = cat_spin.getSelectedItem().toString();"`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:44:34.410

您还需要设置 drop_down_item 布局，Spinner 使用两种不同的布局。一种用于折叠微调器 (spinner_simple_item)，一种用于下拉列表中每个选项的布局：

```
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
```

# asp.net-mvc - 如何使用uploadify发布IEnumerable 反对我的控制器中的 actionresult

> ID：14279323
> 
> 赞同：1
> 
> 时间：2013-01-11T13:36:31.337
> 
> 标签：asp.net-mvc, uploadify

我正在使用 uploadify 插件在 IE 中选择多个文件。我目前能够一次回发一个文件作为 HttpPostedFileBase 对象。如果我在文件上传对话框中选择 3 个文件，我将为每个文件发布 3 次。有没有办法一次回发所有三个文件并将它们提取为 IEnumerable 对象？

我的要求是，我需要所有文件的文件名和文件内容，将它们传递给模型并使用此模型对象作为参数调用服务。

感谢你的帮助。

谢谢

# c# - WM 6.5 从 SQL Server 2008 检索数据，DataSet 包含数据（在 XML 中看到），但没有找到行/值

> ID：14279325
> 
> 赞同：1
> 
> 时间：2013-01-11T13:36:32.757
> 
> 标签：c#, xml, sql-server-2008, windows-mobile

正如标题中所说，我在运行 Windows Mobile 6.5 的移动设备上从我的 WiFi 网络中的 SQL Server 检索数据时遇到问题。

每当我填写我的数据集时，我都不会收到任何错误。接下来，我将我的 XML 备份文件写入设备磁盘。这个 XML 文件包含一个模式和数据（它确实如此！）。

这是此 XML 文件的摘录：

```
/* The way datatable values are presented in my xml backup file */
<Table> 
   <c0>value0</c0> 
   <c1>value1</c1> 
   <c2>value2</c2>
   <c3>value3</c3> 
   <c4>value4</c4> 
</Table>
<Table>
   ...
</Table>
... 
```

所以这显然是有效的......不是，如果我现在尝试访问该表应包含的数据。我通过以下两种方式做到这一点：

```
// 1 (in forms):
textBox1.Text = ds.Tables[0].Rows[0]["c2"].ToString();

// 2 (in testing log):
DataTable dt = ds.Tables["tablename"]; // ds is static class member DataSet
                                       // and definitely not null, but strongly 
                                       // named DataSet (tablenameDataSet.xsd type)
foreach (DataRow row in dt.Rows)
                    {
                        foreach (DataColumn col in dt.Columns)
                            sw.WriteLine(row[col]);
                        sw.WriteLine("".PadLeft(16, '='));
                    } 
```

现在最后但并非最不重要的是，我检索数据的代码：

```
string connString = "Data Source=servername;Initial Catalog=databasename;
                     User ID=user;Password=pw";
string sql = @"SELECT c0, c1, c2, c3, c4, c5, c6
               FROM tablename
               ORDER BY c5";

System.Data.SqlClient.SqlConnection conn = new System.Data.SqlClient.SqlConnection(connString);
conn.Open();

System.Data.SqlClient.SqlDataAdapter da = new System.Data.SqlClient.SqlDataAdapter(sql, conn);
ds = new tablenameDataSet();
da.Fill(ds); 
```

然后我正在编写 XML，然后是日志，然后以表单形式访问数据。ds.Tables[0].Rows.Count 为 0，而找到所有 7 列。所以它是正确的表。数据只能在那个 XML 备份文件中找到......

提前致谢！- 丹尼尔

# javascript - 从 JavaScript 函数的字符串参数中获取值

> ID：14279326
> 
> 赞同：1
> 
> 时间：2013-01-11T13:36:34.063
> 
> 标签：javascript

在以下标准函数中，您可以为第二个和第三个参数输入多个参数。

```
var retval = window.showModalDialog(dialog, varArgIn, varOptions); 
```

varOptions 参数可以填写：

```
'dialogHeight:580px;dialogWidth:700px;center=yes;scroll=no', 
```

如何获得在 dialogHeight 中设置的唯一值？所以我只能在其他地方重用那个值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:50:07.490

您可以使用简单的正则表达式：

```
'dialogHeight:580px;dialogWidth:700px;center=yes;scroll=no'.match(/dialogHeight:\w+/)[0]; //dialogHeight:580px 
```

在您的情况下，您可能需要：`varOptions.match(/dialogHeight:\w+/)[0];`.

如果您只需要该值，则可以使用：

`varOptions.match(/dialogHeight:(\w+)/)[1];`.

正如founddrama 所建议的那样，如果`dialogHeight`不是`varOptions`代码的子字符串将产生错误。做上述事情的更好方法是：

```
var match = varOptions.match(/dialogHeight:(\w+)/);
if (match && match.length >= 1) {
    console.log("The value is: " + match[1]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:43:10.523

不明白你的问题。你填写 varOptions，不是吗？只需为每个选项创建新变量并根据需要重新使用它们。

所以像

```
var dialogHeight = 580;
var dialogWidth = 700;
var center = 'yes';
var scroll = 'no';

var options = 'dialogHeight:'+ dialogHeight +'px;dialogWidth:'+ dialogWidth '+x;center='+ center +';scroll='+ scroll;
var retval = window.showModalDialog(dialog, varArgIn, options);
alert('Reusing dialog height vairable here:'+ dialogHeight); 
```

如果您想从您提供的字符串中获取 dialogHeight，您可以执行以下操作：

```
var input = 'dialogHeight:580px;dialogWidth:700px;center=yes;scroll=no';
var dialogHeight = input.match(/(?!dialogHeight:)[0-9]*(?=p)/ ,input);
alert(dialogHeight); 
```

[http://jsfiddle.net/E67RF/](http://jsfiddle.net/E67RF/) <- 处理这段代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T13:52:26.047

按以下方式使用正则表达式：

```
var s= 'dialogHeight:580px;dialogWidth:700px;center=yes;scroll=no';
alert(s.match(/dialogHeight:[\w]+\;/)[0].match(/:[\w]+;/)[0].replace(':','')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T14:00:59.063

如果您可能需要任何其他值，那么拥有一个将选项字符串转换为字典样式对象的函数将很有用。

```
function getOptions(s) {
  var r = {}, kv;
  s = s.split(';');
  for (var i = 0; i < s.length; i++) {
    kv = s[i].split(s[i].indexOf(':') > -1 ? ':' : '=');
    r[kv[0]] = kv[1];
  }
  return r;
}
var opts = 'dialogHeight:580px;dialogWidth:700px;center=yes;scroll=no';
var optsObj = getOptions(opts);
console.log(optsObj.dialogHeight); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T14:01:12.040

假设您还没有这些值，就像@Henrik Peinar 的回答一样，您可以解析字符串中的值（只要它遵循示例中的约定）。

这里有几种方法可以做到：

1) 将字符串格式化为 JSON 表示法，转换为对象，访问值

```
var objOptions = JSON.parse("{" + varOptions.replace(/;/g,",").replace(/=/g,":").replace(/(\w+)/g,'"$1"') + "}");

console.log(objOptions.dialogHeight); 
```

2) 使用 RegEx 仅解析您要查找的值（我的示例容易出错，所以我会在生产中做一些不同的操作。这只是一个简单的示例。）

```
varOptions.match(/dialogHeight:(\w+);/)[1] 
```

3)`split`用于获取名称-值对的数组，然后循环并拆分这些结果，测试“名称”部分，直到找到所需的部分。（我的时间不多了，所以我放弃了这个例子）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T14:11:24.837

```
var parseDialogOptions = function() {
  var optionDivider = /\s*;\s*/
    , valueDivider = /\s*[:=]\s*/
    , whiteSpace = /^\s+|\s+$/g

  return function(optionString) {
    var options = optionString.split(optionDivider)
      , obj = {}
    for (var i = 0, l = options.length; i < l; i++) {
      var parts = options[i].split(valueDivider)
      if (parts.length == 2) {
        obj[parts[0].replace(whiteSpace, '')] = parts[1].replace(whiteSpace, '')
      }
    }
    return obj
  }
}() 
```

用法：

```
>>> parseDialogOptions('dialogHeight:580px;dialogWidth : 700px; center=yes ; scroll=no ; ')
Object { dialogHeight="580px", dialogWidth="700px", center="yes", scroll="no" } 
```

# css - 有没有办法在 Less 中为 ~ 运算符使用变量，比如 ~"calc(100% - @spacing)";

> ID：14279328
> 
> 赞同：64
> 
> 时间：2013-01-11T13:36:39.397
> 
> 标签：css, less, css-calc

有没有办法在 less`~`运算符中使用变量，比如

```
~"calc(70% - @spacing)"; 
```

当我尝试过它时，它仅适用于静态值，例如

```
 ~"calc(70% - 10px)"; 
```

我可以在将字符串设置为属性之前获取要评估的字符串吗？

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2013-01-11T13:49:28.083

要禁用 LESS 在发现`-`两个数值之间的 a 但仍然能够使用变量时自动执行的计算，您可以编写以下内容之一：

1）只转义触发计算的运算符并像往常一样使用变量

```
@padding: 20px;
body {
    padding: calc(100% ~"-" @padding);
} 
```

2) 转义整个表达式并用`@{padding}`符号插入变量

```
@padding: 20px;
body {
    padding: ~"calc(100% - @{padding})";
} 
```

我更喜欢第二个版本，因为它类似于[javascript 的模板文字](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals)并且看起来更简洁，但无论哪种方式都可以。

两种解决方案都禁用自动 Less 计算并编译为正确的结果：

```
body {
  padding: calc(100% - 20px);
} 
```

# algorithm - 使用 MapReduce 实现快速傅里叶变换算法

> ID：14279333
> 
> 赞同：6
> 
> 时间：2013-01-11T13:37:00.887
> 
> 标签：algorithm, mapreduce, fft

我想用**MapReduce实现****快速傅里叶变换**算法。我知道递归 FFT 算法，但我需要您的指导才能使用 Map/Reduce 方法实现它。

 **有什么建议/参考吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T14:35:03.743

我们可以使用一些定理将问题划分为子问题的基本思想。

在傅立叶变换的情况下，问题是 FT 的标准定义：

![](../Images/a164513b60de50aff53af1f86a47331c.png)

应用[Cooley–Tukey FFT 算法](http://en.wikipedia.org/wiki/Cooley%E2%80%93Tukey_FFT_algorithm)后，我们可以将其拆分为两个子问题：

![](../Images/f461f2c1f02150d2282de183b115d579.png)

继续进行这种转换，理论上它可以通过并行编程来解决。

也许，您会发现以下链接很有用：

*   [带有 MapReduce 的 Schönhage-Strassen 算法用于乘以 T 比特整数](http://people.apache.org/~szetszwo/ssmr20110430.pdf)
*   [使用 MapReduce 进行 FFT](http://blog.jierenchen.com/2010/08/fft-with-mapreduce.html)**

# matlab - Matlab：使用kmeans函数时是否可以找到每个簇的半径？

> ID：14279334
> 
> 赞同：0
> 
> 时间：2013-01-11T13:37:01.303
> 
> 标签：matlab, k-means

从[文档](http://www.mathworks.com/help/stats/kmeans.html)中没有找到每个集群半径的选项。最接近我想要的是命令：

```
[IDX,C,sumd] = kmeans(X,k) 
```

它为每个集群返回`sumd`集群点到集群质心之间的距离总和。

是否可以专门找到每个集群的半径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:24:43.957

假设您将半径（下界）定义为任何点到它所在的集群中心的最大距离。

查看文档时，可以使用第四个输出参数，因此函数调用可以是：

```
[IDX,C,sumd, D] = kmeans(X,k); 
```

现在您可以看到每个集群内的最大距离是多少，并且您拥有每个半径的最小值。

# android - WebView loadUrl 只工作一次

> ID：14279335
> 
> 赞同：24
> 
> 时间：2013-01-11T13:37:03.847
> 
> 标签：android, webview, webviewclient

编辑：我几年前参与过这个项目，不幸的是我无法验证任何答案是否在给定的场景中有效。

我很难使用一个应该显示我们博客的 WebView。初始化后，它工作得很好。用户可以导航到 WebView 中的不同链接。回到博客，WebView 外面有一个按钮，它应该再次加载主博客站点。

问题是，在第二次调用 loadUrl 之后没有加载任何内容。这是我的代码：

```
private WebView wv;

        @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

            this.setContentView(R.layout.blog);

    wv = (WebView) findViewById(R.id.blog_webview);
    wv.getSettings().setJavaScriptEnabled(true);
    wv.setWebViewClient(new WebViewClient() {

        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon {
            MyLog.logDump("onPageStarted: " + url);
        }

        @Override
        public void onPageFinished(WebView view, String url) {
                            MyLog.logDump("onPageFinished: " + url);
        }
    });

    wv.loadUrl(Constants.BLOG_URL);
} 
```

我的 OnClickListener 调用的函数如下：

```
 public void reLoadUrl() {
        wv.loadUrl(Constants.BLOG_URL);

} 
```

但是，尽管 onPageFinished 和 onPageStarted 中的日志显示我的 wv.loadUrl 正在被调用并且它正在加载正确的 url，但 webview 本身的内容并没有改变。我尝试清除缓存、历史记录、视图，尝试不同的 WebSettings，尝试使用 webView.goBack() - 没有结果。这些想法也行不通：[Strange webview goBack issue in android](https://stackoverflow.com/questions/8386726/strange-webview-goback-issue-in-android)

有时，reLoadUrl 会显示所需的结果 - 但一旦失败，它就不能再工作了。任何想法可能会发生什么？我确实尝试阅读 WebView 代码，但找不到任何可以帮助我的东西。

我唯一可以补充的是，我们正在使用一些严重依赖 webViews 的广告网络——我试图将其关闭，但我没有删除这些库，所以我不确定它们是否是罪魁祸首。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-01T07:05:12.777

按以下顺序使用exact。

```
 wv.clearCache(true);
   wv.clearView();
   wv.reload();
   wv.loadUrl("about:blank");
   wv.loadData(Constants.BLOG_URL); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-11T13:44:05.417

我花了最后一天左右的时间在一个使用 WebView 的应用程序上工作。我在将数据加载到 WebView 时确实遇到了一些问题。

我不完全确定这会起作用，但可能会替换此代码：

```
public void reLoadUrl() {
    wv.loadUrl(Constants.BLOG_URL); 
```

}

使用此代码：

公共无效重载Url（）{

```
 wv.clearView();
    wv.loadUrl(Constants.BLOG_URL); 
```

}

也许当您清除 WebView 时，它会解决问题

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-17T15:45:22.017

我有同样的问题，调用 resumeTimers() 为我解决了这个问题......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-05T14:18:17.937

我建议您`WebView`每次使用它时都尝试重新创建它，看看是否有什么不同。

首先保存上下文、布局参数和父级。

```
Context context = wb.getContext();
ViewGroup.LayoutParams lp = wv.getLayoutParams();
ViewGroup parent = (ViewGroup)wv.getParent(); 
```

然后停止加载并从其父级中删除视图。

```
wv.stopLoading();
parent.removeView(wv); 
```

然后重新创建并添加回来。

```
wv = new WebView(context);
parent.addView(wv, lp); 
```

这可能是您需要恢复的其他属性，但这是一般的想法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-03T12:16:52.253

只需创建一个方法，您将在其中刷新重新初始化整个 WebView 并从 reLoadUrl() 调用它。

```
void loadWebView() {
    wv = (WebView) findViewById(R.id.blog_webview);
    wv.getSettings().setJavaScriptEnabled(true);
    wv.setWebViewClient(new WebViewClient() {

    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon {
        MyLog.logDump("onPageStarted: " + url);
    }

    @Override
    public void onPageFinished(WebView view, String url) {
                        MyLog.logDump("onPageFinished: " + url);
    }
});

wv.loadUrl(Constants.BLOG_URL);
}

public void reLoadUrl() {
   loadWebView();
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-05-03T06:42:18.667

```
@override
public void onFormResubmission(WebView view, Message dontResend, Message resend){
   resend.sendToTarget();
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-28T14:23:28.047

尝试加载一个空白页之前：

```
wv.loadUrl("about:blank");
wv.clearHistory();
wv.clearView();
wv.loadUrl(Constants.BLOG_URL); 
```

编辑：这是我以前使用的代码，因为我也遇到了问题，请尝试一下。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-05-01T08:27:04.237

尝试设置 WebChrome 客户端。webview 在某些情况下需要 WebChrome Clint 的支持才能正常工作。

```
wv.setWebChromeClient(new WebChromeClient()); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-07-08T09:05:04.717

我面临同样的问题，并通过以下步骤使其工作：

```
webView.clearCache(true);
webView.loadUrl("Url"); 
```

我成功加载了多个网址。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-05-10T07:16:51.857

我遇到了同样的问题，终于设法解决了这个问题。我是 android 新手，不确定这是好是坏，但它对我有用。我只是从 web 视图中清除捕获并在重新加载另一个 url 之前销毁并重新创建。

```
mWebView.clearCache(true);
// destroy before reload new url
parentView.removeView(mWebView);
mWebView.clearHistory();    
mWebView.destroy(); 
```

虽然 mWebView.destroy(); 生成错误“java.lang.Throwable: Error: WebView.destroy() called while still attach!” 我搜索它但没有得到任何解决方案，许多人说它直到现在都不会影响应用程序（我仍然不知道解决这个问题：我使用 WebChromeClient ）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-07-24T07:37:29.403

我面临着同样的问题。我每次都在创建一个新的 Webview。只需在创建新的 webView 之前先销毁您以前的 webView。我希望这有帮助！使您的 webview 成为全局变量。喜欢 -

网页视图 w;

然后在创建一个新的 webview 之前销毁前一个

```
 if(null != w)
                {
                    //destroy the previous webview, before creating the new one
                    w.destroy();
                }
                w= new WebView(activity); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-01-24T06:22:57.697

调用这个方法`onPause()`

```
 private void pauseWebView() {
            try {
                Class.forName("android.webkit.WebView")
                        .getMethod("onPause", (Class[]) null)
                        .invoke(webview, (Object[]) null);

            } catch(ClassNotFoundException cnfe) {

            } catch(NoSuchMethodException nsme) {

            } catch(InvocationTargetException ite) {

            } catch (IllegalAccessException iae) {

            }
        } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-02-14T18:39:39.923

我遇到了同样的问题，上述解决方案都不适合我。所以我通过使用 JavaScript 重新加载 WebView 来修复它，如下所示：

```
webView.loadUrl( "javascript:window.location.reload( true )" ); 
```

还需要为 WebView 启用 JavaScript：

```
webView.getSettings().setJavaScriptEnabled(true); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-05-08T17:05:38.800

尝试重新加载 url 并正确销毁 webview 以避免缓存和内存泄漏问题，正如我在这里回答的那样[https://stackoverflow.com/a/67450119/1843984](https://stackoverflow.com/a/67450119/1843984)

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2014-08-08T04:16:08.303

在`onCreate`，而不是使用 `wv.loadUrl(Constants.BLOG_URL);`，只是使用`wv.loadDataWithBaseURL(baseUrl, readFileAsString("index.html") , mimeType, "UTF-8", null);`

# python - 如何使用 scipy.weave 更改 python 代码？（如何更快地完成代码？）

> ID：14279337
> 
> 赞同：2
> 
> 时间：2013-01-11T13:37:06.790
> 
> 标签：python, arrays, algorithm, numpy, scipy

在 Python 中：我有 2 个数组：lon、lat（超过 500 000 个点）。

```
 lon = numpy.array()
     lat = numpy.array()

     flag = True
     while flag:
        lon1 = lon[:-1]
        lon2 = lon[1:]
        lat1 = lat[:-1]
        lat2 = lat[1:]

        '''distance'''
        x = (lon2 - lon1)
        y = (lat2 - lat1)
        d = numpy.sqrt(x * x + y * y)

        min = numpy.min(d)
        if min < 0.015:
            j = numpy.where(d == min)[0][0]

            lon[j] = (lon[j] + lon[j + 1]) / 2
            lat[j] = (lat[j] + lat[j + 1]) / 2

            lon = numpy.delete(lon, j + 1)
            lat = numpy.delete(lat, j + 1)

        else:
            flag = False 
```

这段代码运行得很慢！

1.  请提示，**如何更快地执行代码？**

2.  我知道有**scipy.weave**。请提示，如何使用**scipy.weave**更改代码？

    ```
    import scipy
    from scipy import weave

    codeC = """
    ???
    """
    scipy.weave.inline(codeC, ['lon', 'lat'], compiler='gcc') 
    ```

谢谢。

**更新：**

```
 lon1 = lon[:-1]
    lon2 = lon[1:]
    lat1 = lat[:-1]
    lat2 = lat[1:]

    x = (lon2 - lon1)
    y = (lat2 - lat1)
    d = x * x + y * y

    while True and d.size > 1:

        j = np.argmin(d)
        if d[j] > min_radius:
            break

        lon[j] = (lon[j] + lon[j + 1]) / 2
        lat[j] = (lat[j] + lat[j + 1]) / 2

        '''lon = np.delete(lon, j + 1)
           lat = np.delete(lat, j + 1)
           d = np.delete(d, j)'''
        if j == (d.size - 1):
            lon = lon[:j + 1]
            lat = lat[:j + 1]
            d = d[:j]
        else:
            lon = np.hstack((lon[:j + 1], lon[j + 2:]))
            lat = np.hstack((lat[:j + 1], lat[j + 2:]))
            d = np.hstack((d[:j], d[j + 1:]))

        if j > 0:
            x = lon[j] - lon[j - 1]
            y = lat[j] - lat[j - 1]
            d[j - 1] = x * x + y * y
        if j < (d.size - 1):
            x = lon[j + 1] - lon[j]
            y = lat[j + 1] - lat[j]
            d[j] = x * x + y * y 
```

@ilmiacs、@Jaime、@Luke，谢谢！它工作得更快！

**但**作为一个整体，代码在 500 个点的数组上工作的时间很长......:(((

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T14:37:03.917

您正在循环中的每次迭代重做整个昂贵的计算。一次迭代只删除一个节点，然后在删除一个元素时复制整个数组并重做距离计算。然后你搜索下一个节点。

因此，您的代码是次优的，因为它至少运行`O(N^2)`. 但是，对于您想要实现的目标， `O(N log N)`或者可能`O(N)`就足够了。

如果你重新排列算法，一个没有 numpy 的简单 python 模块应该足够快。食谱：

1.  避免重新计算整个距离数组。删除一个节点时只需要重新计算两个值。
2.  避免抄袭。它也很贵。

希望这可以帮助。

**编辑：**

无需重新计算距离数组的示例实现如下：

```
lon = numpy.array()
lat = numpy.array()

lon1 = lon[:-1]
lon2 = lon[1:]
lat1 = lat[:-1]
lat2 = lat[1:]

'''distance'''
x = (lon2 - lon1)
y = (lat2 - lat1)
d = x * x + y * y

while True:
    min = numpy.min(d)
    if min < 0.015 * 0.015:
        j = numpy.where(d == min)[0][0]
    else:
        break

    lon[j] = (lon[j] + lon[j + 1]) / 2
    lat[j] = (lat[j] + lat[j + 1]) / 2

    lon = numpy.delete(lon, j + 1)  # <-- you spend most of the time here
    lat = numpy.delete(lat, j + 1)  # <-- and here

    d = numpy.delete(d, j)      # <-- and here

    x = lon[j]-lon[j-1]
    y = lat[j]-lat[j-1]
    d[j-1] = x * x + y * y
    x = lon[j+1]-lon[j]
    y = lat[j+1]-lat[j]
    d[j] = x * x + y * y 
```

尽管这会给您带来动力，但`O(N^2)`由于大量复制，您仍然是。为避免这种情况，您需要将数组存储在双向链表中。然后删除一个元素将是 of `O(1)`，而不是`O(N)`。使用链表，您最糟糕的操作将是找到最小值。您可以通过引入 的排序版本来改进这一点`d`，您还可以在其中跟踪`d`. 不过，您需要跟踪更改。但最终你会得到一个算法，即`O(N log N)`.

**编辑2：**

正如@Jaime 所指出的，也不需要比较平方距离。我已经更正了上面的代码。

**编辑 3：**

周末我更多地思考算法，结果证明这是一个非常有趣的问题，而且思考起来很有趣。我想分享我的想法。

让它发挥`O(N log N)`作用并不像我想象的那么简单。我建议保留一份清单`sorted_d`并进行管理。每次删除链接时，我们都必须更新`sorted_d`. 这意味着，我们必须在 中找到两个对应距离的新位置`sorted_d`。在普通列表中，可以通过二等分来找到位置`O(log N)`。但是，据我了解，二等分在链表中是不可行的`O(N)`。这就是问题。如果有人能证明我错了，我会很高兴能找到一种将元素插入到`O(log N)`. 我个人是看不出来的。

但是，对于 的链表还有一个替代方案`sorted_d`。只需要一棵 B-tree 或 Patricia-tree，它使用浮点数作为键。在这样的树中插入可以（相当快）'O（log N）'完成。但是，我不知道这种树的任何标准实现。标准实现适用于字符串或整数。因此，如果我们有一个从浮点数到整数的有序且无冲突的映射，我们就可以实现它。这种映射一般不存在，但毫无疑问可以为任何特定数据集构建。毫无疑问，所讨论的数据集是特定的：肯定有一个上限和一个精度。

希望这可以帮助。如果有进一步的兴趣，我还可以提出我对这个问题的最佳数据结构的想法。

# jquery - 允许用户选择保存文件的文件路径

> ID：14279338
> 
> 赞同：1
> 
> 时间：2013-01-11T13:37:09.327
> 
> 标签：jquery, asp.net, file

我`EPPlus`用来创建 excel 文件并为它们提供数据。我想允许用户为将要创建的文件选择路径和名称。文件应存储在客户端计算机上。

我有`RadTreeView`我用的地方`context menu`。我想展示`pop-up window`

```
<telerik:RadTreeView 
    runat="server" 
    ID="TreeViewUnit" 
    OnContextMenuItemClick="TreeViewUnit_OnContextMenuItemClick"
    meta:resourcekey="TreeViewUnitResource1">
    <DataBindings>
         <telerik:RadTreeNodeBinding />
         </DataBindings>
         <ContextMenus>
         <telerik:RadTreeViewContextMenu runat="server" 
                    ID="cmTreeViewUnitContextMenu">
                     <Items>
                          <telerik:RadMenuItem Text="Export" Value="Export"> 
                          </telerik:RadMenuItem>
                          <telerik:RadMenuItem Text="Import" Value="Import">  
                          </telerik:RadMenuItem>
                      </Items>
          <CollapseAnimation Type="none"></CollapseAnimation>
       </telerik:RadTreeViewContextMenu>
                        </ContextMenus>
</telerik:RadTreeView> 
```

我怎样才能做到这一点？我目前没有想法=/我检查了`jquery`图书馆但没有找到任何东西，也许我错过了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:39:14.637

## 浏览器安全不允许您这样做

如果我理解正确，您要做的是读取客户端计算机的文件夹结构并将其显示给您的用户，以便他们能够选择特定的文件夹和文件名。

**用户只有在文件传输时点击保存文件**时才能选择文件夹，因为该选择是由浏览器本身提供的。但他们也可以选择**打开文件**，这可能会将文件放在某个临时文件夹（Firefox 和 IE）或默认下载文件夹（Chrome）中。（出于安全原因）您无法在服务器或浏览器上运行的应用程序中提供客户端计算机的文件夹结构。而且您无法控制用户是否会点击**Save**或**Open**。

只能向用户询问文件名。但这只是意味着您的文件将以该名称传输，用户仍然可以在保存对话框中重命名它。

### 防止浏览器直接在浏览器中打开 Excel 文件？

由于您正在传输 Excel 文件，您应该知道它们可能会在没有任何确认对话框的情况下直接在浏览器 (Internet Explorer) 中打开，从而绕过保存文件的可能性。您可以通过设置特定的 mime 类型以及其他一些东西来说服浏览器询问用户如何处理文件，从而在服务器端防止这种情况发生。

[请参阅此 Stackoverflow 问题](https://stackoverflow.com/q/1597364/75642)以规避此*问题*。

# jquery - JQuery 不醒

> ID：14279341
> 
> 赞同：0
> 
> 时间：2013-01-11T13:37:16.973
> 
> 标签：jquery

我的 JQuery 没有启动清理功能。我需要从输入字段名称中获取值，对其进行清理（使用清理功能）并将其显示在路径输入字段中。为什么它不起作用？我使用 PHP 5.3 和 HEIDISQL

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <?php 

    include('conect.php');
    if(($_POST)&&(!empty($_POST['name']))&&(!empty($_POST['path'])) ){
    $name=$_POST['name'];
    $path=$_POST['path'];

    function sanitize($title) {
        $title = strip_tags($title);
        // Preserve escaped octets.
        $title = preg_replace('|%([a-fA-F0-9][a-fA-F0-9])|', '---$1---', $title);
        // Remove percent signs that are not part of an octet.
        $title = str_replace('%', '', $title);
        // Restore octets.
        $title = preg_replace('|---([a-fA-F0-9][a-fA-F0-9])---|', '%$1', $title);

        if (seems_utf8($title)) {
            if (function_exists('mb_strtolower')) {
                $title = mb_strtolower($title, 'UTF-8');
            }
            $title = utf8_uri_encode($title, 200);
        }

        $title = strtolower($title);
        $title = preg_replace('/&.+?;/', '', $title); // kill entities
        $title = str_replace('.', '-', $title);
        $title = preg_replace('/[^%a-z0-9 _-]/', '', $title);
        $title = preg_replace('/\s+/', '-', $title);
        $title = preg_replace('|-+|', '-', $title);
        $title = trim($title, '-');

        return $title;
    }   

    mysql_query("UPDATE menus SET name='$name' , path='$path'");
    }

    ?>
    <html>
    <head>

    <script>

$(document).ready(
function(){
          $("#name").change(function(){
             $("#path").sanitize("name").val();             

          });
} );

</script>

    </head>

    <body>
            <form action="<?php $_PHP_SELF ?>" method="post">
            <label for="nume">Name</label><input type="text" name="name" />
            <label for="cale">Path</label><input type="text" name="path" />
            <input type="submit" name="submit"/>
    </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:27:31.047

因为其余的是 PHP 代码，您可以将其作为 Javascript 运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:28:42.057

它不起作用，因为它是用 PHP 编写的，并且您正试图在客户端运行它，就好像它是 JavaScript 一样。

您不能相信客户端会向您发送经过清理的数据——您无法控制客户端。

# dojo - 道场窗口.onscroll

> ID：14279343
> 
> 赞同：0
> 
> 时间：2013-01-11T13:37:29.277
> 
> 标签：dojo, onscroll

是否有包装 window.onscroll 的 Dojo 方法？

我希望能够捕获页面滚动。我可以捕获鼠标滚轮，但似乎找不到任何关于捕获实际页面滚动的参考。我尝试了很多变化，但事件似乎根本没有发生。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:59:50.913

```
dojo.connect(window, 'onscroll', this, function(event) {
    var scrollTop = dojo._docScroll().y;

    //code to handle scroll
}); 
```

无论文档是通过鼠标滚轮、滚动条还是向上/向下键滚动，这都适用于我，这几乎涵盖了所有滚动场景。

# python - 如何为我的条形和楔形添加纹理？

> ID：14279344
> 
> 赞同：22
> 
> 时间：2013-01-11T13:37:40.867
> 
> 标签：python, matplotlib

[`matplotlib.pyplot.bar()`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.bar)我正在使用and绘制几个条形图和饼图[`matplotlib.pyplot.pie()`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.pie)。在这两个功能中，我都可以更改条形和楔形的颜色。

但是，我需要用黑白打印这些图表。能够在条形和楔形上放置纹理会更有用，类似于[`Line2D`](http://matplotlib.org/api/artist_api.html#matplotlib.lines.Line2D)可用于绘制线条的标记属性。我可以用这些标记以一致的方式填充条形和楔形吗？或者有没有其他方法可以实现这样的目标？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-11T13:55:38.597

```
import matplotlib.pyplot as plt

fig = plt.figure()

patterns = [ "/" , "\\" , "|" , "-" , "+" , "x", "o", "O", ".", "*" ]

ax1 = fig.add_subplot(111)
for i in range(len(patterns)):
    ax1.bar(i, 3, color='red', edgecolor='black', hatch=patterns[i])

plt.show() 
```

![在此处输入图像描述](../Images/ef8e9dd79efa58cab932031aab93a461.png)

它在[此处](https://matplotlib.org/api/_as_gen/matplotlib.patches.Patch.html#matplotlib.patches.Patch.set_hatch)的文档中。

好的 - 所以要纹理饼图，你需要这样做：

如果你看[这里](http://matplotlib.org/api/pyplot_api.html?highlight=pie#matplotlib.pyplot.pie)：

```
Return value:
If autopct is None, return the tuple (patches, texts):

patches is a sequence of matplotlib.patches.Wedge instances
texts is a list of the label matplotlib.text.Text instances. 
```

然后我们查看[Wedges](http://matplotlib.org/api/artist_api.html#matplotlib.patches.Wedge)页面，发现它有一个 set_hatch() 方法。

所以我们只需要在饼图演示中添加几行...

示例 1：

```
import matplotlib.pyplot as plt

fig = plt.figure()

patterns = [ "/" , "\\" , "|" , "-" , "+" , "x", "o", "O", ".", "*" ]

ax1 = fig.add_subplot(111)
for i in range(len(patterns)):
    ax1.bar(i, 3, color='red', edgecolor='black', hatch=patterns[i])

plt.show() 
```

示例 2：

```
"""
Make a pie chart - see
http://matplotlib.sf.net/matplotlib.pylab.html#-pie for the docstring.

This example shows a basic pie chart with labels optional features,
like autolabeling the percentage, offsetting a slice with "explode",
adding a shadow, and changing the starting angle.

"""

from pylab import *
import math
import numpy as np

patterns = [ "/" , "\\" , "|" , "-" , "+" , "x", "o", "O", ".", "*" ]

def little_pie(breakdown,location,size):
    breakdown = [0] + list(np.cumsum(breakdown)* 1.0 / sum(breakdown))
    for i in xrange(len(breakdown)-1):
        x = [0] + np.cos(np.linspace(2 * math.pi * breakdown[i], 2 * math.pi *    
                          breakdown[i+1], 20)).tolist()
        y = [0] + np.sin(np.linspace(2 * math.pi * breakdown[i], 2 * math.pi * 
                          breakdown[i+1], 20)).tolist()
        xy = zip(x,y)
        scatter( location[0], location[1], marker=(xy,0), s=size, facecolor=
               ['gold','yellow', 'orange', 'red','purple','indigo','violet'][i%7])

figure(1, figsize=(6,6))

little_pie([10,3,7],(1,1),600)
little_pie([10,27,4,8,4,5,6,17,33],(-1,1),800)

fracs = [10, 8, 7, 10]
explode=(0, 0, 0.1, 0)

piechart = pie(fracs, explode=explode, autopct='%1.1f%%')
for i in range(len(piechart[0])):
    piechart[0][i].set_hatch(patterns[(i)%len(patterns)])

show() 
```

![在此处输入图像描述](../Images/c5f4dbe266a3c428cf426a77b9be28f0.png)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-11T13:48:45.880

使用`bar()`，您可以直接使用舱口盖（带有一些后端）：[http](http://matplotlib.org/examples/pylab_examples/hatch_demo.html) ://matplotlib.org/examples/pylab_examples/hatch_demo.html ： ![带阴影的条形图](../Images/7b57e70c8663561843e7b4ef8237061c.png)

它通过将`hatch`参数添加到您对`bar()`.

* * *

至于`pie()`，它没有`hatch`关键字。相反，您可以获取单个饼图补丁并为其添加阴影：您可以通过以下方式获得补丁：

```
patches = pie(…)[0]  # The first element of the returned tuple are the pie slices 
```

然后将阴影应用于每个切片（补丁）：

```
patches[0].set_hatch('/')  # Pie slice #0 hatched. 
```

（孵化列表位于[https://matplotlib.org/api/_as_gen/matplotlib.patches.Patch.html#matplotlib.patches.Patch.set_hatch](https://matplotlib.org/api/_as_gen/matplotlib.patches.Patch.html#matplotlib.patches.Patch.set_hatch)）。

然后您应用更改：

```
pyplot.draw() 
```

![阴影饼图]](../Images/18234ee82904ba98f92cc5c43d71829e.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-09T15:23:43.330

这可能会帮助您：

[http://matplotlib.org/examples/pylab_examples/demo_ribbon_box.html](http://matplotlib.org/examples/pylab_examples/demo_ribbon_box.html)

它使用**matplotlib.image.BboxImage**

我相信这可以根据输入数据调整给定图像的大小。

# extjs - 在 extjs 窗口中显示 Am 图表

> ID：14279345
> 
> 赞同：0
> 
> 时间：2013-01-11T13:37:44.467
> 
> 标签：extjs, amcharts, extjs2

我一直在尝试构建一个将 amChart 与 extjs 2.3 集成的示例 Web 应用程序。我所要做的就是在弹出窗口中显示图表。我通过创建一个加载图表的页面来做到这一点，然后我在表单面板上使用 autoLoad 来加载页面。然后我将表单面板放在窗口中。显示页面上的文本，但不显示图表。

我正在使用 amCharts 2.8.4 和 extjs 2.3

html加载图表：

```
 <html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
         <link rel="stylesheet" type="text/css" href="frontend/include/lib/ext/resources/css/ext-all.css" />
        <!-- GC -->
        <!-- LIBS -->
        <script type="text/javascript" src="frontend/include/lib/ext/adapter/ext/ext-base.js"></script>
        <script type="text/javascript" src="frontend/include/lib/ext/ext-all.js"></script>
        <link rel="stylesheet" type="text/css" href="frontend/include/lib/ext/resources/css/xtheme-gray.css" />
        <script type="text/javascript" src="frontend/public/page/displayGraphs.js"></script>
    </head>
    <body>
        <h1>Hello World!</h1>
        <div id="buttonDiv"></div>
    </body>
</html> 
```

弹出窗口的javascript代码：

```
 Ext.onReady(function(){

    function displayGraph() {
        window.show();
    }

    var displayButton = new Ext.Button({
        text: 'Display Graph',
        renderTo:'buttonDiv',
        tooltip: 'View the full message and delivery statuses',
        handler : displayGraph 
    });

    var form = new Ext.form.FormPanel({
        border: false,
        buttonAlign: 'center',
        items:[]
    });

    form.add({
        cls: 'someCls',
        id: 'someId',
        autoLoad: {
            url:'graphs.jsp',
            scripts:true
        }
    //  html: '<div id="chartdiv" style="width: 100%; height: 355px;"></div>'
    })

    var window = new Ext.Window({
        id: 'graphDetailsWindow',
        title: 'View AmChart Graph',
        modal: false,
        closable: true,
        closeAction: 'hide',
        width: 800,
        height: 480,
        plain:true,
        layout: 'fit',
        items: [form]
    })
}); 
```

amChartsExample.js：

```
 var chart;

var chartData = [{
    country: "USA",
    visits: 3025,
    color: "#FF0F00"},
{
    country: "China",
    visits: 1882,
    color: "#FF6600"},
{
    country: "Japan",
    visits: 1809,
    color: "#FF9E01"},
{
    country: "Germany",
    visits: 1322,
    color: "#FCD202"},
{
    country: "UK",
    visits: 1122,
    color: "#F8FF01"},
{
    country: "France",
    visits: 1114,
    color: "#B0DE09"},
{
    country: "India",
    visits: 984,
    color: "#04D215"},
{
    country: "Spain",
    visits: 711,
    color: "#0D8ECF"},
{
    country: "Netherlands",
    visits: 665,
    color: "#0D52D1"},
{
    country: "Russia",
    visits: 580,
    color: "#2A0CD0"},
{
    country: "South Korea",
    visits: 443,
    color: "#8A0CCF"},
{
    country: "Canada",
    visits: 441,
    color: "#CD0D74"}];

AmCharts.ready(function() {
    // SERIAL CHART
    chart = new AmCharts.AmSerialChart();
    chart.autoMarginOffset = 0;
    chart.dataProvider = chartData;
    chart.categoryField = "country";
    chart.startDuration = 1;

    // AXES
    // category
    var categoryAxis = chart.categoryAxis;
    categoryAxis.labelRotation = 45; // this line makes category values to be rotated
    categoryAxis.gridAlpha = 0;
    categoryAxis.fillAlpha = 1;
    categoryAxis.fillColor = "#FAFAFA";
    categoryAxis.gridPosition = "start";

    // value
    var valueAxis = new AmCharts.ValueAxis();
    valueAxis.dashLength = 5;
    valueAxis.title = "Visitors from country";
    valueAxis.axisAlpha = 0;
    chart.addValueAxis(valueAxis);

    // GRAPH
    var graph = new AmCharts.AmGraph();
    graph.valueField = "visits";
    graph.colorField = "color";
    graph.balloonText = "[[category]]: [[value]]";
    graph.type = "column";
    graph.lineAlpha = 0;
    graph.fillAlphas = 1;
    chart.addGraph(graph);

    // WRITE
    chart.write("chartdiv");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-02T01:07:20.490

validateNow() 将用新数据**重绘**图表，但我认为你的问题是 renderTo ..你可以检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T01:02:46.317

我正在为 Extjs4 和 Extjs5 开发 AmCharts 包装器模块。

还是测试版。。

[https://github.com/VladimirCacicArapovic/AmChartsExtjs5](https://github.com/VladimirCacicArapovic/AmChartsExtjs5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T15:53:23.327

初始化弹出窗口后尝试调用 chart.validateNow()。

# c# - 如何在 .NET 4.5 Core 中计算 HMAC-SHA1 身份验证码

> ID：14279346
> 
> 赞同：5
> 
> 时间：2013-01-11T13:37:47.760
> 
> 标签：c#, .net, cryptography, hmac, hmacsha1

我目前面临一个大问题（环境：.NET 4.5 Core）：我们需要使用 HMAC-SHA1 算法来保护带有密钥的消息。问题是命名空间的HMACSHA1-class`System.Security.Cryptography`和命名空间本身在.NET 4.5 Core中是不存在的，这个命名空间只存在于普通版本的.NET中。

我尝试了很多方法来为我们的目的找到一个等效的命名空间，但我唯一发现的是`Windows.Security.Cryptography`它没有提供 HMAC 加密。

有谁知道我可以如何解决我们的问题，或者是否有任何免费使用的 3rd-party 解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T13:43:10.317

`Windows.Security.Cryptography`命名空间确实包含 HMAC 。

> `MacAlgorithmProvider`您可以通过调用静态`OpenAlgorithm`方法并指定以下算法名称之一来创建对象：`HMAC_MD5 HMAC_SHA1 HMAC_SHA256 HMAC_SHA384 HMAC_SHA512 AES_CMAC`

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.core.macalgorithmprovider.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.core.macalgorithmprovider.aspx)

```
public static byte[] HmacSha1Sign(byte[] keyBytes, string message){ 
    var messageBytes= Encoding.UTF8.GetBytes(message);
    MacAlgorithmProvider objMacProv = MacAlgorithmProvider.OpenAlgorithm("HMAC_SHA1");
    CryptographicKey hmacKey = objMacProv.CreateKey(keyBytes.AsBuffer());
    IBuffer buffHMAC = CryptographicEngine.Sign(hmacKey, messageBytes.AsBuffer());
    return buffHMAC.ToArray();

} 
```

# azure - web-sso-with-cloud-ad-Office365-users

> ID：14279349
> 
> 赞同：1
> 
> 时间：2013-01-11T13:37:57.580
> 
> 标签：azure, single-sign-on, office365

在 .net 应用程序中实现 web-sso-with-cloud-ad-o365-users 的最佳解决方案是什么？我仔细观察并找到了很少的解决方案，但我对这些解决方案不太相信。

我正在 Windows Azure 上构建一个 ASP.NET Web 应用程序。应用程序用户名和密码与使用 Windows Identity Foundation 的 office 365 相同。

我可以在我的应用程序和 Office365 环境之间建立单点登录吗？因此，用户一旦登录我的应用程序，就必须登录 Office365。

我尝试了下面的链接并制作了 MVC3 Web 应用程序。

[https://www.windowsazure.com/en-us/develop/net/how-to-guides/web-sso/](https://www.windowsazure.com/en-us/develop/net/how-to-guides/web-sso/)

[http://veerendracloudblogs.blogspot.in/2012/07/web-sso-with-cloud-ad-o365-users.html](http://veerendracloudblogs.blogspot.in/2012/07/web-sso-with-cloud-ad-o365-users.html)

当我运行应用程序并提供登录凭据时发生错误：-

“/”应用程序中的服务器错误。

**ID1038：** AudienceRestrictionCondition 无效，因为指定的 Audience 不在 AudienceUris 中。观众：'spn：b6933382-49c5-4430-81cc-36dd50a3c971'

**说明：**执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

**异常详细信息：** Microsoft.IdentityModel.Tokens.AudienceUriValidationFailedException：ID1038：AudienceRestrictionCondition 无效，因为 AudienceUris 中不存在指定的受众。观众：'spn：b6933382-49c5-4430-81cc-36dd50a3c971'

**源错误：**

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

**堆栈跟踪：**

[AudienceUriValidationFailedException：ID1038：AudienceRestrictionCondition 无效，因为 AudienceUris 中不存在指定的受众。受众：'spn:b6933382-49c5-4430-81cc-36dd50a3c971'] Microsoft.IdentityModel.Tokens.SamlSecurityTokenRequirement.ValidateAudienceRestriction(IList`1 allowedAudienceUris, IList`1 tokenAudiences）+1287 Microsoft.IdentityModel.Tokens.Saml2.Saml2SecurityTokenHandler.ValidateConditions（Saml2Conditions 条件，布尔型enforceAudienceRestriction）+2309 Microsoft.IdentityModel.Tokens.Saml2.Saml2SecurityTokenHandler.ValidateToken（SecurityToken 令牌）+786 Microsoft.IdentityModel.Tokens.SecurityTokenHandlerCollection。 ValidateToken(SecurityToken token) +297 Microsoft.IdentityModel.Web.TokenReceiver.AuthenticateToken(SecurityToken token, Boolean ensureBearerToken, String endpointUri) +279 Microsoft.IdentityModel.Web.WSFederationAuthenticationModule.SignInWithResponseMessage(HttpRequest request) +822 Microsoft.IdentityModel.Web.WSFederationAuthenticationModule .OnAuthenticateRequest(Object sender, EventArgs args) +363 System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep。Execute() +136 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +69

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:11:55.530

似乎您在上面确实有正确的信息，但是当您说“没有成功”时，这是什么意思。当您尝试配置它时实际发生的情况以及连接不起作用时实际发生的情况。您需要添加一些错误信息以获得准确的帮助。

我看到的大多数问题都与获取/设置正确的智能链接有关，该链接在 Web 应用程序中用于将用户转移到 O365 服务器以获得积极的身份验证声明。因此，如果您已经通过了这一点，则应该没有问题，因为一旦您获得了索赔，您就是经过身份验证的用户。因此，您真正需要的是使用 Smart Links 校正，下面将详细描述问题，因此请验证您是否正确设置了它：

[通过 Office 365 使用智能链接或 IdP 发起的身份验证](http://community.office365.com/en-us/wikis/sso/using-smart-links-or-idp-initiated-authentication-with-office-365.aspx?sort=mostrecent&pageindex=1)

Office 365 单点登录配置是与通过 WS-Federation (WS-Fed) 和 WS-Trust 协议支持的公司 ADFS 一起完成的，此处有一份白皮书“ [Office 365 Single Sign-On with AD FS 2.0 白皮书](http://www.microsoft.com/en-us/download/details.aspx?id=28971)”进行了说明过程。

[您还可以在此处查看](http://www.microsoft.com/en-us/download/details.aspx?id=35464)基于 SAML 2.0 协议的 Internet2 Shibboleth 2，使用 Office 365 产品的基于声明的 (Web) 单点登录。

# excel - Excel验证取决于列值

> ID：14279355
> 
> 赞同：1
> 
> 时间：2013-01-11T13:38:14.923
> 
> 标签：excel, vba

我的问题如下。我正在研究一个 excel 数据库，我有一个如下表

列a_A|列_B

值 1........|..a

值 2........|..a

值 3........|..a

值 4........|..b

值 5........|..b

我想添加一个验证列表，该列表显示的值取决于可以是“a”或“b”的其他字段值。我知道您可以这样做分隔列表并使用“=Indirect()”公式，但我需要将列表放在同一张桌子上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:04:40.367

所以这就是我所做的。

首先，我选择了我计划对其进行数据验证的单元格范围。

就我而言，它是 B1:B7。

然后我在验证条件下选择了“允许：”并选择了“列表”。

然后我把这个公式放在“来源：”

```
 =IF(A1="a",$C$1:$C$3,$D$1:$D$3) 
```

如果您不为 A1 锚定（不要使用 $ 符号），它将调整公式以在 B1:B7 的所有单元格上连续。例如，数据验证会将 B3 的公式更改为： =IF(A3="a",$C$1:$C$3,$D$1:$D$3)

观察：

![对于值'a'](../Images/ce0fcbbc18b2c471508229b773244249.png)

![对于“a”之外的另一个值](../Images/b26cd0cdc975d8033b3f65801bd4648a.png)

如果你愿意，我可以把这本工作簿上传到某个地方。

# java - RabbitMQ 和 Camel：路由因“恢复时丢失消息”而中断

> ID：14279365
> 
> 赞同：1
> 
> 时间：2013-01-11T13:38:48.660
> 
> 标签：java, rabbitmq, message-queue, apache-camel, spring-rabbit

我对 RabbitMQ 和 sprimg-amqp 有一个令人沮丧的问题。我需要从外部进程向队列发送消息（一个 JUnit 类只是为了测试路由是否正常工作）。这是我的 camel-context.xml 文件：

```
<camelContext xmlns="http://camel.apache.org/schema/spring">
    <route> 
        <from uri="spring-amqp:KipcastDirect:KipcastQueue:KipcastRouting?type=direct&amp;autodelete=true&amp;durable=true" />
        <log message="Message received!!! "/> 
        <to   uri="spring-amqp:KipcastDirect2:TestQueue:KipcastRouting2?type=direct&amp;autodelete=false&amp;durable=true" />
    </route>
</camelContext>

<rabbit:connection-factory id="amqpConnectionFactory" />
<rabbit:template id="amqpTemplate" connection-factory="amqpConnectionFactory" message-converter="messageConverter" exchange="KipcastBean" />
<rabbit:admin connection-factory="amqpConnectionFactory"/>

<bean id="amqpConnectionFactory" class="org.springframework.amqp.rabbit.connection.CachingConnectionFactory">
    <property name="host" value="10.211.55.20"/>
    <property name="port" value="5672"/>
    <property name="username" value="guest"/>
    <property name="password" value="guest"/>
    <property name="virtualHost" value="/"/>
</bean>

<bean id="messageConverter" class="amqp.spring.converter.XStreamConverter"/> 
```

当我使用 maven camel:run 启动它时，它运行良好。交换可用并且还在 RabbitMQ 管理中排队。当我尝试向该 Exchange 发送消息时会出现问题：

```
ConnectionFactory factory = new ConnectionFactory();
factory.setHost("10.211.55.20");
factory.setPort(5672);
factory.setVirtualHost("/");
factory.setUsername("guest");
factory.setPassword("guest");
Connection connection = factory.newConnection();
Channel channel = connection.createChannel();

channel.exchangeDeclare("KipcastDirect", "direct", 
       true,    /* durable */
       true,    /* autodelete */
       null);   /* */

byte[] messageBodyBytes = "Hello, world!".getBytes();

AMQP.BasicProperties.Builder bob = new AMQP.BasicProperties.Builder();
AMQP.BasicProperties minBasic = bob.build();
minBasic = bob.priority(0).messageId("Test").build(); 
minBasic = bob.priority(0).deliveryMode(1).build(); 

while (true) {

    channel.basicPublish("KipcastDirect", "KipcastRouting", minBasic, messageBodyBytes);
    System.out.println(" [x] Sent ");

} 
```

消息已正确发送到队列（我可以在日志中看到它们），但引发异常并且路由停止：

```
[     SimpleAsyncTaskExecutor-1] SpringAMQPConsumer             WARN  Caused by: [org.springframework.amqp.rabbit.listener.ListenerExecutionFailedException - Listener threw exception]
org.springframework.amqp.rabbit.listener.ListenerExecutionFailedException: Listener threw exception
    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.wrapToListenerExecutionFailedExceptionIfNeeded(AbstractMessageListenerContainer.java:590)[spring-rabbit-1.0.0.RELEASE.jar:]
    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:529)[spring-rabbit-1.0.0.RELEASE.jar:]
    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:472)[spring-rabbit-1.0.0.RELEASE.jar:]
    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$001(SimpleMessageListenerContainer.java:56)[spring-rabbit-1.0.0.RELEASE.jar:]
    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$1.invokeListener(SimpleMessageListenerContainer.java:103)[spring-rabbit-1.0.0.RELEASE.jar:]
    at sun.reflect.GeneratedMethodAccessor21.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)[:1.6.0_37]
    at java.lang.reflect.Method.invoke(Method.java:597)[:1.6.0_37]
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)[spring-aop-3.0.7.RELEASE.jar:3.0.7.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)[spring-aop-3.0.7.RELEASE.jar:3.0.7.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)[spring-aop-3.0.7.RELEASE.jar:3.0.7.RELEASE]
    at org.springframework.retry.interceptor.StatefulRetryOperationsInterceptor$MethodInvocationRetryCallback.doWithRetry(StatefulRetryOperationsInterceptor.java:173)[spring-retry-1.0.0.RELEASE.jar:]
    at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:239)[spring-retry-1.0.0.RELEASE.jar:]
    at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:186)[spring-retry-1.0.0.RELEASE.jar:]
    at org.springframework.retry.interceptor.StatefulRetryOperationsInterceptor.invoke(StatefulRetryOperationsInterceptor.java:145)[spring-retry-1.0.0.RELEASE.jar:]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)[spring-aop-3.0.7.RELEASE.jar:3.0.7.RELEASE]
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)[spring-aop-3.0.7.RELEASE.jar:3.0.7.RELEASE]
    at $Proxy46.invokeListener(Unknown Source)[:]
    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.invokeListener(SimpleMessageListenerContainer.java:560)[spring-rabbit-1.0.0.RELEASE.jar:]
    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:452)[spring-rabbit-1.0.0.RELEASE.jar:]
    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:436)[spring-rabbit-1.0.0.RELEASE.jar:]
    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:420)[spring-rabbit-1.0.0.RELEASE.jar:]
    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$200(SimpleMessageListenerContainer.java:56)[spring-rabbit-1.0.0.RELEASE.jar:]
    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:505)[spring-rabbit-1.0.0.RELEASE.jar:]
    at java.lang.Thread.run(Thread.java:680)[:1.6.0_37]
[     SimpleAsyncTaskExecutor-1] erationsInterceptorFactoryBean WARN  Message dropped on recovery: (Body:'Hello, world!'; ID:Test; Content:text/plain; Headers:{}; Exchange:KipcastDirect; RoutingKey:KipcastRouting; Reply:null; DeliveryMode:NON_PERSISTENT; DeliveryTag:2)
org.springframework.amqp.rabbit.listener.ListenerExecutionFailedException: Listener threw exception
    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.wrapToListenerExecutionFailedExceptionIfNeeded(AbstractMessageListenerContainer.java:590)[spring-rabbit-1.0.0.RELEASE.jar:]
    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:529)[spring-rabbit-1.0.0.RELEASE.jar:]
    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:472)[spring-rabbit-1.0.0.RELEASE.jar:]
    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$001(SimpleMessageListenerContainer.java:56)[spring-rabbit-1.0.0.RELEASE.jar:]
    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$1.invokeListener(SimpleMessageListenerContainer.java:103)[spring-rabbit-1.0.0.RELEASE.jar:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)[:1.6.0_37]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)[:1.6.0_37]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)[:1.6.0_37]
    at java.lang.reflect.Method.invoke(Method.java:597)[:1.6.0_37]
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)[spring-aop-3.0.7.RELEASE.jar:3.0.7.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)[spring-aop-3.0.7.RELEASE.jar:3.0.7.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)[spring-aop-3.0.7.RELEASE.jar:3.0.7.RELEASE]
    at org.springframework.retry.interceptor.StatefulRetryOperationsInterceptor$MethodInvocationRetryCallback.doWithRetry(StatefulRetryOperationsInterceptor.java:173)[spring-retry-1.0.0.RELEASE.jar:]
    at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:239)[spring-retry-1.0.0.RELEASE.jar:]
    at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:186)[spring-retry-1.0.0.RELEASE.jar:]
    at org.springframework.retry.interceptor.StatefulRetryOperationsInterceptor.invoke(StatefulRetryOperationsInterceptor.java:145)[spring-retry-1.0.0.RELEASE.jar:]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)[spring-aop-3.0.7.RELEASE.jar:3.0.7.RELEASE]
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)[spring-aop-3.0.7.RELEASE.jar:3.0.7.RELEASE]
    at $Proxy46.invokeListener(Unknown Source)[:]
    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.invokeListener(SimpleMessageListenerContainer.java:560)[spring-rabbit-1.0.0.RELEASE.jar:]
    at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:452)[spring-rabbit-1.0.0.RELEASE.jar:]
    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:436)[spring-rabbit-1.0.0.RELEASE.jar:]
    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:420)[spring-rabbit-1.0.0.RELEASE.jar:]
    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$200(SimpleMessageListenerContainer.java:56)[spring-rabbit-1.0.0.RELEASE.jar:]
    at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:505)[spring-rabbit-1.0.0.RELEASE.jar:]
    at java.lang.Thread.run(Thread.java:680)[:1.6.0_37] 
```

那有什么问题？我必须生成消息 ID 的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:43:30.663

问题与 messageConverter bean 有关：

```
<bean id="messageConverter" class="amqp.spring.converter.XStreamConverter"/> 
```

已被替换为

```
<bean id="jsonMessageConverter" class="amqp.spring.converter.XStreamConverter"/>
<bean id="textMessageConverter" class="amqp.spring.converter.StringConverter"/>
<bean id="messageConverter" class="amqp.spring.converter.ContentTypeConverterFactory">
    <property name="converters">
        <map>
            <entry key="application/json" value-ref="jsonMessageConverter"/>
            <entry key="application/xml" value-ref="textMessageConverter"/>
        </map>
    </property>
    <property name="fallbackConverter" ref="textMessageConverter"/>
</bean> 
```

这解决了问题，并且消息被正确路由。

# java - 为什么必须在 java 程序的 main 中有 String args[]

> ID：14279367
> 
> 赞同：-1
> 
> 时间：2013-01-11T13:38:51.797
> 
> 标签：java

我只是想知道为什么必须在 main 方法中使用 String args[]。

我知道它用于命令行参数，但是每次我们运行程序时，都不需要命令行。

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T13:41:08.863

这是在[Java 规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.1)中指定的。

> 方法 main 必须声明为 public、static 和 void。它必须指定一个声明类型为字符串数组的形式参数（第 8.4.1 节）。因此，可以接受以下任一声明：
> 
> 公共静态无效主要（字符串 [] 参数）
> 
> 公共静态无效主要（字符串...参数）

如果没有给出参数，则数组为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:44:26.730

您可以根据 Java 规范将其用于命令行参数。您还可以使用：

```
public static void main(String... args) 
```

它被称为可变参数表示法，意味着可以有零个或多个参数。

# reporting-services - SSRS 初始化问题

> ID：14279377
> 
> 赞同：0
> 
> 时间：2013-01-11T13:39:17.537
> 
> 标签：reporting-services, reportingservices-2005

我想知道如果托管 Reporting Server 数据库的 SQL Server 实例脱机，会对 SSRS 初始化产生什么影响。

为了提供更多详细信息，数据库实例是灾难恢复 (DR) 实例，必须保持脱机状态以方便从实时数据库复制数据。

目前 DR SSRS 尚未初始化，但它是在使 DR SQL Server 实例脱机之前。它还具有与已初始化的实时 SSRS 相同的配置。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:00:11.660

在这种情况下，我希望 SSRS 服务将继续运行，但报表管理器网站（或 SharePoint SSRS 内容）、Web 服务等将不可用。

# command-line-arguments - 如何在 Fortran 90 中执行名称在运行时已知的子例程？

> ID：14279379
> 
> 赞同：1
> 
> 时间：2013-01-11T13:39:33.307
> 
> 标签：command-line-arguments, fortran90, subroutine

假设我在 Fortran 中有一个带有各种子例程的程序，我不知道所有子例程*的先验*，并且用户通过命令行提供了其中一个子例程的名称，如下所示：

```
    程序 subroutine_name

```

因此，我将*subroutine_name*存储在**字符**变量中。这样，我就不能声明一个**外部**变量来存储子程序了。那么，我怎么能只知道它的名字来称呼它呢？有可能通过这种方式，还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:04:18.353

实际上没有办法编写 Fortran 语句，例如

```
call character_variable_containing_subroutine_name 
```

它违背了静态类型编译语言（如 Fortran）提供这种功能的方式。

当然，如果您问过*我能否向 Fortran 程序提供一个输入参数，该程序将在运行时确定程序采用的执行路径，*那么答案*当然*是. 我将忽略您的情况的任何复杂性，并假设您想调用`sin`,`cos`或之一`tan`。

首先，将程序的参数文本捕获到字符变量中：

```
character(len=*) :: user_choice
...
call get_command_argument(1,user_choice)
...
select case (user_choice)
case ('sin')
   ... do stuff with sin
case ('cos')
   ... do stuff with cos
case ('tan')
   ... do stuff with tan
case default
   ... do whatever
end select 
```

您可以通过使用过程指针来更详细地说明这一点。例如，您可以定义：

```
pointer :: rp
interface
 real function rp(inval)
    real, intent(in) :: inval
  end function rp
end interface 
```

然后将`select case`构造的第一个版本替换为：

```
select case (user_choice)
case ('sin')
   rp => sin
case ('cos')
   rp => cos
case ('tan')
   rp => tan
case default
   ... do whatever
end select 
```

这可能会简化以后的代码。我想这也可能使它更复杂。

请注意，我没有测试任何这些片段，我的语法可能有点不稳定。

# dotless - dotless css 参考在发布模式下不起作用（使用 Combrress）

> ID：14279384
> 
> 赞同：4
> 
> 时间：2013-01-11T13:40:13.080
> 
> 标签：dotless, combres

我正在使用无点 css。这是我的代码

```
.jqmWindowBig
{
    width: 800px;
    height: 500px;
    margin-left: -400px;
    margin-top: -250px;
    .jqmWindowCommon;
}

.jqmWindowCommon {
    background-color: #EEE;
    color: #333;
    border: 1px solid black;
    display: none;
    position: absolute;
    left: 50%;
    top: 50%;
    padding: 12px;
    overflow: auto;
} 
```

当我在自己的机器上，在调试模式下，所有 css 文件（也是这个 main.less 文件）都被单独引用。

在这种情况下，`jqmWindowBig`该类是 and 的组合`jqmWindowBig`，`jqmWindowCommon`并且一切正常。

现在在生产中，combrress 为我的所有 CSS 文件创建了一个大文件，然后，CSS 包含我在 .LESS 文件中输入的代码，因此该`.jqmWindowCommon`部分不会被该`'jqmWindowCommon'`部分替换，因此该部分是不`jqmWindowBig`完整的。

这是我的梳子配置：

```
<resourceSets url="~/combres.axd"
                defaultDuration="30"
                defaultVersion="auto"
                defaultDebugEnabled="auto"
                defaultIgnorePipelineWhenDebug="true"
                localChangeMonitorInterval="30"
                remoteChangeMonitorInterval="60"
                >

    <resourceSet name="siteCss" type="css" >
      <resource path="~/Content/StyleSheet/start.css" />
      <resource path="~/Content/StyleSheet/Site.css" />
      <resource path="~/Content/StyleSheet/reset.css" />
      <resource path="~/Content/StyleSheet/screen.css" />
      <resource path="~/Content/StyleSheet/razortemplates.css" />
      <resource path="~/Content/StyleSheet/logonsmall.css" />
      <resource path="~/Content/StyleSheet/ui-lightness/jquery-ui-1.8.23.custom.css" />
      <resource path="~/Content/StyleSheet/MainLess.LESS" />
    </resourceSet> 
```

简而言之：`.jqmWindowCommon;`在发布模式下运行时，引用不会被替换。

编辑不仅这不起作用，我可以看到这些规则

```
width: @planningEventItemWidth; 
```

也不工作，所以基本上没有 .LESS 功能与 Combress 结合使用时>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:28:40.787

您的梳子配置缺少 LESS 过滤器：

```
<filters> 
  <filter type="Combres.Filters.DotLessCssFilter, Combres" />
</filters> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T06:43:03.073

如果你直接调出你的链接资源，你会注意到它可能有一个错误。我不认为你可以在同一个资源集中添加 css 和 less 文件。

**更新** **确认过滤器是每个资源集：* * [https://github.com/buunguyen/combres/issues/5#issuecomment-12915712](https://github.com/buunguyen/combres/issues/5#issuecomment-12915712)

您可以通过使用无点过滤器并将较少的文件移动到单独的资源集来使其工作，如下所示：

```
<filters>
  <filter type="Combres.Filters.DotLessCssCombineFilter, Combres" 
    acceptedResourceSets="siteLess"/>
</filters>
<resourceSet name="siteLess" type="css">
  <resource path="~/Content/StyleSheet/MainLess.LESS" />
</resourceSet> 
```

希望有帮助。

# java - OSGi ClassNotFoundException

> ID：14279388
> 
> 赞同：4
> 
> 时间：2013-01-11T13:40:28.177
> 
> 标签：java, osgi

我正在尝试运行 Modular Java book 中的示例并面临 ClassNotFoundException。错误的要点是我有 2 个捆绑包。

Bundle 1 称为索引。Bundle 2 是 Compass 项目的包装包。

Bundle 1 使用 Bundle 2，并在其清单的“Import-Package”标头中声明了它使用的来自 Bundle 2 的包。Bundle 2 也导出了相同的包。

Index 使用的 Bundle 2 的类（Bundle 1），调用了 Bundle 2 内部的更多类。这些类的包也由 Bundle 2 导出。但是，每当我在 Felix 上部署这些（使用 Pax-runner）时，启动都会失败并出现以下错误。

```
[FelixDispatchQueue] DEBUG main-findmyjar.index - BundleEvent STOPPED - main-findmyjar.index
ERROR: Bundle main-findmyjar.index [7] Error starting file:bundles/main-findmyjar.index_1.0.0.SNAPSHOT.jar (org.osgi.framework.BundleException: Activator start error in bundle main-findmyjar.index [7].)
org.compass.core.config.ConfigurationException: Failed to instantiate [org.compass.core.config.binding.metadata.AsmMetaDataReader], please verify class type at setting [compass.scanner.reader]; nested exception is java.lang.ClassNotFoundException: org.compass.core.config.binding.metadata.AsmMetaDataReader
java.lang.ClassNotFoundException: org.compass.core.config.binding.metadata.AsmMetaDataReader
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:247)
        at org.compass.core.util.ClassUtils.forName(ClassUtils.java:90)
        at org.compass.core.config.CompassSettings.getSettingAsInstance(CompassSettings.java:304)
        at org.compass.core.config.binding.metadata.MetaDataReaderFactory.getMetaDataReader(MetaDataReaderFactory.java:35)
        at org.compass.core.config.binding.AbstractClassMetaDataMappingBinding.setUpBinding(AbstractClassMetaDataMappingBinding.java:24)
        at org.compass.annotations.config.binding.AnnotationsMappingBinding.setUpBinding(AnnotationsMappingBinding.java:93)
        at org.compass.core.config.CompassMappingBinding.setUpBinding(CompassMappingBinding.java:56)
        at org.compass.core.config.CompassConfiguration.getMappingBinding(CompassConfiguration.java:121)
        at org.compass.core.config.CompassConfiguration.addClass(CompassConfiguration.java:500)
        at org.gt.osgi.findmyjar.index.internal.Activator.getCompass(Activator.java:40)
        at org.gt.osgi.findmyjar.index.internal.Activator.start(Activator.java:35)
        at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:645)
        at org.apache.felix.framework.Felix.activateBundle(Felix.java:1977)
        at org.apache.felix.framework.Felix.startBundle(Felix.java:1895)
        at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1191)
        at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:295)
        at java.lang.Thread.run(Thread.java:662)
[FelixDispatchQueue] DEBUG main-findmyjar.index - FrameworkEvent ERROR - main-findmyjar.index
org.osgi.framework.BundleException: Activator start error in bundle main-findmyjar.index [7].
        at org.apache.felix.framework.Felix.activateBundle(Felix.java:2027)
        at org.apache.felix.framework.Felix.startBundle(Felix.java:1895)
        at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1191)
        at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:295)
        at java.lang.Thread.run(Thread.java:662)
Caused by: org.compass.core.config.ConfigurationException: Failed to instantiate [org.compass.core.config.binding.metadata.AsmMetaDataReader], please verify class type at setting [compass.scanner.reader]; nested exception is java.lang.ClassNotFoundException: org.compass.core.config.binding.metadata.AsmMetaDataReader
        at org.compass.core.config.CompassSettings.getSettingAsInstance(CompassSettings.java:306)
        at org.compass.core.config.binding.metadata.MetaDataReaderFactory.getMetaDataReader(MetaDataReaderFactory.java:35)
        at org.compass.core.config.binding.AbstractClassMetaDataMappingBinding.setUpBinding(AbstractClassMetaDataMappingBinding.java:24)
        at org.compass.annotations.config.binding.AnnotationsMappingBinding.setUpBinding(AnnotationsMappingBinding.java:93)
        at org.compass.core.config.CompassMappingBinding.setUpBinding(CompassMappingBinding.java:56)
        at org.compass.core.config.CompassConfiguration.getMappingBinding(CompassConfiguration.java:121)
        at org.compass.core.config.CompassConfiguration.addClass(CompassConfiguration.java:500)
        at org.gt.osgi.findmyjar.index.internal.Activator.getCompass(Activator.java:40)
        at org.gt.osgi.findmyjar.index.internal.Activator.start(Activator.java:35)
        at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:645)
        at org.apache.felix.framework.Felix.activateBundle(Felix.java:1977)
        ... 4 more
Caused by: java.lang.ClassNotFoundException: org.compass.core.config.binding.metadata.AsmMetaDataReader
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:247)
        at org.compass.core.util.ClassUtils.forName(ClassUtils.java:90)
        at org.compass.core.config.CompassSettings.getSettingAsInstance(CompassSettings.java:304)
        ... 14 more
[FelixDispatchQueue] DEBUG org.apache.felix.framework - BundleEvent STARTED - org.apache.felix.framework
[FelixDispatchQueue] DEBUG org.apache.felix.framework - FrameworkEvent STARTED - org.apache.felix.framework 
```

有什么可能是问题的线索？

这是清单。

```
Manifest-Version: 1.0
Export-Package: org.gt.osgi.findmyjar.index;uses:="org.gt.osgi.findmyj
ar.domain";version="1.0.0.SNAPSHOT"
Private-Package: org.gt.osgi.findmyjar.index.internal
Ignore-Package: org.gt.osgi.findmyjar.index.internal   
Built-By: tyagig
Tool: Bnd-0.0.255
Bundle-Name: main-findmyjar.index
Created-By: Apache Maven Bundle Plugin
Build-Jdk: 1.6.0_32
Bundle-Version: 1.0.0.SNAPSHOT
Bnd-LastModified: 1357910690482
Bundle-ManifestVersion: 2
Bundle-Activator: org.gt.osgi.findmyjar.index.internal.Activator
Bundle-Description: Generated using Pax-Construct
Bundle-SymbolicName: main-findmyjar.index
Import-Package: org.compass.core,org.compass.core.config,org.compass.c
ore.config.binding.metadata,org.gt.osgi.findmyjar.domain;version="1.0
.0.SNAPSHOT",org.gt.osgi.findmyjar.index;version="1.0.0.SNAPSHOT",org
.osgi.framework 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:06:08.643

好像您有一个 org.compass.core.util.ClassUtils，它执行 Class.forName()，从而级联问题。

如果 ClassUtils 在 bundle 2 中并且没有明确指定要使用的类加载器，它将默认为 bundles 类加载器。bundleclassloader 只能实例化对 bundle2 可见的类（在整个类图中）。

它尝试加载的设置很可能是 bundle1 中指定的类，这是不可见的。

解决方案是在动态加载类或查看类加载器伙伴机制时将类加载器从 bundle1 传递到 bundle2。有一篇旧[文章](http://www.eclipsezone.com/articles/eclipse-vms/)可能会更清楚地解释这一点。

# java - 从 Jtable 更新数据库行：错误

> ID：14279389
> 
> 赞同：0
> 
> 时间：2013-01-11T13:40:33.970
> 
> 标签：java, sql, database, button

我有一个 jTable，当应用程序运行时，它会用数据库项填充它。现在我制作了一个保存按钮，它可以修改更改并将其保存到数据库中，但我不断收到一个我无法弄清楚的错误。

按钮：

```
private void btnOpslaanActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:
        int row = jTable1.getSelectedRow();
        int col = jTable1.getSelectedColumn();

        int category_id = (Integer)(jTable1.getValueAt(row, 1));
        String name = jTable1.getValueAt(row, 2).toString();
        double price = (Double)jTable1.getValueAt(row, 3);
        String description = jTable1.getValueAt(row, 4).toString();

        queryManager.updateProductList(category_id, name, price, description);
    } 
```

变量已根据系统输出的测试进行更新（因此工作正常）我收到此行的错误：

```
queryManager.updateProductList(category_id, name, price, description); 
```

queryManager.updateProductList 方法：

```
public void updateProductList(int category_id, String name, double price, String description){
        String sql ="UPDATE product SET categorie_id='" +category_id+ "', naam='" +name+ "', prijs='" +price+ "', omschrijving='"+description+"'";
        ResultSet result = dbmanager.doQuery(sql);
        try {
            result.next();
        } catch (SQLException e) {
            System.out.println("Productlijst updaten is niet gelukt: " + e.getMessage());
        }

    } 
```

希望任何人都可以帮助我解决这个问题！还有我得到的错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at view.ShowProductList.btnOpslaanActionPerformed(ShowProductList.java:162)
    at view.ShowProductList.access$400(ShowProductList.java:19)
    at view.ShowProductList$6.actionPerformed(ShowProductList.java:108)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2028)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2351)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6382)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3275)
    at java.awt.Component.processEvent(Component.java:6147)
    at java.awt.Container.processEvent(Container.java:2083)
    at java.awt.Component.dispatchEventImpl(Component.java:4744)
    at java.awt.Container.dispatchEventImpl(Container.java:2141)
    at java.awt.Component.dispatchEvent(Component.java:4572)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4619)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4280)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4210)
    at java.awt.Container.dispatchEventImpl(Container.java:2127)
    at java.awt.Window.dispatchEventImpl(Window.java:2489)
    at java.awt.Component.dispatchEvent(Component.java:4572)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:704)
    at java.awt.EventQueue.access$400(EventQueue.java:82)
    at java.awt.EventQueue$2.run(EventQueue.java:663)
    at java.awt.EventQueue$2.run(EventQueue.java:661)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    at java.awt.EventQueue$3.run(EventQueue.java:677)
    at java.awt.EventQueue$3.run(EventQueue.java:675)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:674)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:50:07.037

可能“queryManager”没有正确实例化。你试过调试你的代码吗？

# r - 在函数中按值/按引用复制

> ID：14279394
> 
> 赞同：0
> 
> 时间：2013-01-11T13:40:52.490
> 
> 标签：r, reference, return-value, data.table

> **可能重复：**
> [为 data.table 对象编写函数（过程）](https://stackoverflow.com/questions/13756178/writings-functions-procedures-for-data-table-objects)

我有一个关于按值/按引用的问题。`data.table`带来引用`data.table<-`and `:=`，但是函数呢？

```
DT <- data.table(a=c(1L,2L),b=c("foo","fii"));
f <- function(table){ table[,add:=1L]; }; 
f(DT); # would 0 or 1 copy of DT be performed here ?

R) DT
   a   b add
1: 1 foo   1
2: 2 fii   1 
```

我的理解是使用函数应该意味着按值复制，但真的是这样吗？问候

# java - Android：拖放图像

> ID：14279395
> 
> 赞同：3
> 
> 时间：2013-01-11T13:40:59.083
> 
> 标签：java, android, drag-and-drop

我有这个“拖放”的东西。

所以基本上我们正在制作一个原型，让用户（孩子）将糖果拖放到罐子里。

这些是我研究了一段时间的代码

```
package edu.sbcc.cs123.draganddropbasic;

import android.app.*;
import android.graphics.*;
import android.os.*;
import android.view.*;
import android.view.View.*;
import android.widget.*;

@SuppressWarnings("deprecation")
public class DragAndDropBasicActivity extends Activity implements OnTouchListener {
    private ImageView letterView;                       // The letter that the user drags.
    private ImageView emptyLetterView;              // The letter outline that the user is supposed to drag letterView to.
    private AbsoluteLayout mainLayout;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mainLayout = (AbsoluteLayout) findViewById(R.id.mainLayout);
        mainLayout.setOnTouchListener(this);
        letterView = (ImageView) findViewById(R.id.letterView);
        letterView.setOnTouchListener(this);

        emptyLetterView = (ImageView) findViewById(R.id.emptyLetterView);
    }

    private boolean dragging = false;
    private Rect hitRect = new Rect();

    @Override
    /**
     * NOTE:  Had significant problems when I tried to react to ACTION_MOVE on letterView.   Kept getting alternating (X,Y) 
     * locations of the motion events, which caused the letter to flicker and move back and forth.  The only solution I could 
     * find was to determine when the user had touched down on the letter, then process moves in the ACTION_MOVE 
     * associated with the mainLayout.
     */
    public boolean onTouch(View v, MotionEvent event) {
        boolean eventConsumed = true;
        int x = (int)event.getX();
        int y = (int)event.getY();

        int action = event.getAction();
        if (action == MotionEvent.ACTION_DOWN) {
            if (v == letterView) {
                dragging = true;
                eventConsumed = false;
            }
        } else if (action == MotionEvent.ACTION_UP) {

            if (dragging) {
                emptyLetterView.getHitRect(hitRect);
                if (hitRect.contains(x, y))
                    setSameAbsoluteLocation(letterView, emptyLetterView);
            }
            dragging = false;
            eventConsumed = false;

        } else if (action == MotionEvent.ACTION_MOVE) {
            if (v != letterView) {
                if (dragging) {
                    setAbsoluteLocationCentered(letterView, x, y);
                }
            }
        }

        return eventConsumed;

    }

    private void setSameAbsoluteLocation(View v1, View v2) {
        AbsoluteLayout.LayoutParams alp2 = (AbsoluteLayout.LayoutParams) v2.getLayoutParams();
        setAbsoluteLocation(v1, alp2.x, alp2.y);
    }

    private void setAbsoluteLocationCentered(View v, int x, int y) {
        setAbsoluteLocation(v, x - v.getWidth() / 2, y - v.getHeight() / 2);
    }

    private void setAbsoluteLocation(View v, int x, int y) {
        AbsoluteLayout.LayoutParams alp = (AbsoluteLayout.LayoutParams) v.getLayoutParams();
        alp.x = x;
        alp.y = y;
        v.setLayoutParams(alp);
    }
} 
```

这些用于 main.xml

```
<?xml version="1.0" encoding="utf-8"?>

<AbsoluteLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/mainLayout">

<ImageView 
    android:layout_height="wrap_content" 
    android:layout_width="wrap_content" 
    android:id="@+id/emptyLetterView" 
    android:src="@drawable/candy" 
    android:layout_x="200px" 
    android:layout_y="300px"></ImageView>

<ImageView 
    android:layout_height="wrap_content" 
    android:layout_width="wrap_content" 
    android:id="@+id/letterView" 
    android:src="@drawable/candy1" >

</ImageView>
</AbsoluteLayout> 
```

但是，我还想添加其他要拖动的糖果。我该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:58:27.683

好吧，既然你是初学者，我会彻底了解这一点。

您选择的方法对于您正在尝试的方法并不理想，您可能会更好地使用自定义视图和使用 Canvas。

但是，您仍然可以使用此方法做您想做的事情（并且可以避免重写）

这里的问题是`ImageView`当你想要它的多个实例时你有一个。

因此，由于您希望多个实例动态创建它们，因此首先从您的 XML 文件中删除糖果，然后按照此代码

```
ImageView[] candies = new ImageView[10];
 for(int i=0;i<candies.length;i++){
      candies[i]=new ImageView(this);
      // TODO: Set LayoutParams for each imageView
      // i.e. AbsoluteLayout.LayoutParams imageParams1 = new AbsoluteLayout.LayoutParams(imageWidth, imageHeight); 

     candies[i].setBackgroundResource(R.drawable.candy); 
     layout.addView(candies[i], imageParams1);
} 
```

现在你有'n'个糖果添加到你的屏幕上，你需要能够移动它们。

`onTouch`现在需要编辑您的遗嘱代码。

现在而不是`boolean dragging`拖动一个`int`指示正在拖动哪个视图。

也代替

```
setSameAbsoluteLocation(letterView, emptyLetterView); 
```

采用

```
setSameAbsoluteLocation(v, emptyLetterView); 
```

因此该代码适用于所有收听的视图（即所有糖果）。在所有`letterView`地点`MOUSE_UP`执行此操作`MOUSE_DOWN`

现在在你的`MOUSE_MOVE`你必须做这样的事情来拖动适当的视图

```
if (v != letterView) {
    if (dragging!=-1) {
        setAbsoluteLocationCentered(letterView[dragging], x, y);
     }
} 
```

# mocking - Typo3 extbase 在 phpunit 测试中使用 toArray

> ID：14279398
> 
> 赞同：0
> 
> 时间：2013-01-11T13:41:02.780
> 
> 标签：mocking, phpunit, typo3, extbase

我有一个 extbase-extension (typo3 4.5)

```
$test = $this->testRepository->findAll();
$this->view->assign('test', 
    array_merge(
        array('0' => 'select'), 
        $test->toArray()
    )
); 
```

它工作得很好，但我想测试代码并模拟我的 testrepository 的 findAll 方法。我不知道我必须返回哪种类型才能拥有 toArray 方法

```
...
$method->will($this->returnValue(array($testModelObject)));
... 
```

当然，我的单元测试会引发错误：“在非对象上调用成员函数 toArray()”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:43:15.507

只需`var_dump()`您的真实`$test`对象，您就会看到课程。

# pinvoke - 在哪里可以找到 P/Invoke 的 WinAPI 常量值？

> ID：14279399
> 
> 赞同：0
> 
> 时间：2013-01-11T13:41:06.587
> 
> 标签：pinvoke, constants

我正在尝试关注[有关使用 PInvoke 进行 COM 反射的 MSDN 杂志文章](http://msdn.microsoft.com/en-us/magazine/dd347981.aspx)。早期的片段之一（就在图 2 下方）用于`CoCreateInstance`创建 WebBrowser 控件。代码片段引用了两个常量`CLSID_WebBrowser`和`IID_IUnkown`，但没有定义它们中的任何一个：

```
Dim b = CoCreateInstance(CLSID_WebBrowser, Nothing, 1, IID_IUnknown) 
```

当然，这些不是自动定义的，它会产生错误。也许对于更熟悉 P/Invoke 的人来说，这些只是已知的，但我在任何地方都找不到列出的值。我有 Windows SDK 并搜索了 Include 目录中的所有头文件，但也找不到它们。

那么，如何找到用于 P/Invoke 的这些常量的值呢？

# c# - crm 2011 中的 TargetCreateDynamic 是什么

> ID：14279401
> 
> 赞同：0
> 
> 时间：2013-01-11T13:41:12.297
> 
> 标签：c#, dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-4

我必须将 CRM 4 插件转换为 CRM 2011 插件。在我的代码中有一个名为

> 目标创建动态。

```
create = new TargetCreateDynamic();
                    create.Entity = counter;
                    cRequest = new CreateRequest();
                    cRequest.Target = create;
                    cResponse = (CreateResponse)_cs.Execute(cRequest); 
```

有人知道 2011 年应该是哪个班吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:31:48.373

仅使用`Microsoft.Xrm.Sdk.Entity`类 for `CreateRequest`。下面的示例代码将使您了解如何在 CRM 2011 中创建一个简单的 CreateRequest

```
 internal Guid CreateEntity(IServiceProvider serviceProvider)
    {
        IOrganizationServiceFactory serviceFactory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
        IOrganizationService organizationService = serviceFactory.CreateOrganizationService(null);

        CreateRequest createRequest = new CreateRequest();
        Entity entityToCreate = new Entity("Some_Entity_LogicalName");
        createRequest.Target = entityToCreate;
        CreateResponse response = (CreateResponse)organizationService.Execute(createRequest);

        return response.id;
    } 
```

但是，如果我想为插件中的某个实体创建新记录 - 我使用以下较短的代码：

```
 internal Guid CreateEntity(IServiceProvider serviceProvider)
    {
        IOrganizationServiceFactory serviceFactory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
        IOrganizationService organizationService = serviceFactory.CreateOrganizationService(null);

        Entity entityToCreate = new Entity("Some_Entity_LogicalName");
        return organizationService.Create(entityToCreate);
    } 
```

请注意，这只是一个示例代码，您不需要在每次保存/更新/删除某些实体时创建 OrganizationService。您可以为您的插件创建一次组织服务，将其存储在一些“全局”变量中，而不仅仅是在任何地方使用它

# vba - 将Outlook中的附件保存在不同的文件夹中

> ID：14279402
> 
> 赞同：0
> 
> 时间：2013-01-11T13:41:17.240
> 
> 标签：vba, outlook, outlook-2003

我在互联网上找到了这段代码，您可以在其中自动将附件保存在某个文件夹中：

```
 Public Sub saveAttachtoDisk(itm As Outlook.MailItem)
Dim objAtt As Outlook.Attachment
Dim saveFolder As String
saveFolder = "C:\Temp"
    For Each objAtt In itm.Attachments
        objAtt.SaveAsFile saveFolder & "\" & objAtt.DisplayName
        Set objAtt = Nothing
    Next
End Sub 
```

有什么办法可以将附件保存在不同的文件夹中？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:59:31.260

您的示例代码对`saveAttachtoDisk`子目录中的目标文件夹进行硬编码。您可以通过参数将此信息传递到此子（的变体）：

```
Public Sub saveAttachtoDisk(itm As Outlook.MailItem, saveFolder As String)
  Dim objAtt As Outlook.Attachment
  For Each objAtt In itm.Attachments
      objAtt.SaveAsFile saveFolder & "\" & objAtt.DisplayName
      Set objAtt = Nothing
  Next
End Sub 
```

并这样称呼它：

```
Dim saveFolder As String
saveFolder = "C:\Some\Where\Else"
saveAttachtoDisk itm, saveFolder
...
saveAttachtoDisk otheritm, "d:\why\not\here" 
```

当然，现在的问题是：这些“其他文件夹”应该如何确定？通过用户交互？通过应用于某些 Outlook/User/Main/System 属性的功能？

# pdf - 批量重命名 pdf 文件（IEEE 文章）

> ID：14279403
> 
> 赞同：2
> 
> 时间：2013-01-11T13:41:18.797
> 
> 标签：pdf, rename, ieee

我有大量（数千个）从 IEEE Xplore 下载的 pdf 文件。

文件名仅包含文件的文章编号。例如

6215021.pdf

现在如果你访问

[http://ieeexplore.ieee.org/xpl/freeabs_all.jsp?arnumber=6215021](http://ieeexplore.ieee.org/xpl/freeabs_all.jsp?arnumber=6215021)

您可以找到有关本文的所有可用信息。

如果您检查站点源代码，您可以找到以下部分：

```
 <meta name="citation_title" content="Decomposition-Based Distributed Control for Continuous-Time Multi-Agent Systems">
        <meta name="citation_date" content="Jan. 2013">
        <meta name="citation_volume" content="58">
        <meta name="citation_issue" content="1">
        <meta name="citation_firstpage" content="258">
        <meta name="citation_lastpage" content="264">
        <meta name="citation_doi" content="10.1109/TAC.2012.2204153">
        <meta name="citation_abstract_html_url" content="http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=6215021' escapeXml='false'/>">
        <meta name="citation_pdf_url" content="http://ieeexplore.ieee.org/iel5/9/6384835/06215021.pdf?arnumber=6215021">
        <meta name="citation_issn" content="0018-9286">
        <meta name="citation_isbn" content="">
        <meta name="citation_language" content="English">
        <meta name="citation_keywords" content="
        Distributed control;
        Output feedback;
        Satellites;
        Stability criteria;
        Standards;
        State feedback;
        Upper bound;
        Distributed control;
        linear matrix inequality (LMI);
        multi-agent systems;
        robust control;"> 
```

我想将我拥有的文件重命名为“firstpage - citation_title.pdf”

我的编程技能有限（只有一些 C，没有关于解析的线索）所以我指望你的帮助。

提前感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:44:09.373

您可以使用[iTextSharp](http://sourceforge.net/projects/itextsharp/)库编译以下 C# 代码。它根据 PDF 文件的元数据重命名目录中的所有 PDF 文件，包括它们的主题或标题。

```
using System.IO;
using iTextSharp.text.pdf;

namespace BatchRename
{
    class Program
    {
        private static string getTitle(PdfReader reader)
        {
            string title;
            reader.Info.TryGetValue("Title", out title); // Reading PDF file's meta data
            return string.IsNullOrWhiteSpace(title) ? string.Empty : title.Trim();
        }

        private static string getSubject(PdfReader reader)
        {
            string subject;
            reader.Info.TryGetValue("Subject", out subject); // Reading PDF file's meta data
            return string.IsNullOrWhiteSpace(subject) ? string.Empty : subject.Trim();
        }

        static void Main(string[] args)
        {
            var dir = @"D:\Prog\1390\iTextSharpTests\BatchRename\bin\Release";
            if (!dir.EndsWith(@"\"))
                dir = dir + @"\";

            foreach (var file in Directory.GetFiles(dir, "*.pdf"))
            {
                var reader = new PdfReader(file);
                var title = getTitle(reader);
                var subject = getSubject(reader);
                reader.Close();

                string newFile = string.Empty;
                if (!string.IsNullOrWhiteSpace(title))
                {
                    newFile = dir + title + ".pdf";
                }
                else if (!string.IsNullOrWhiteSpace(subject))
                {
                    newFile = dir + subject + ".pdf";
                }

                if (!string.IsNullOrWhiteSpace(newFile))
                    File.Move(file, newFile);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T09:19:37.137

这是我在python中的代码。

```
#!/usr/bin/env python
'''
Created on Sep 28, 2013

@author: dataq <http://stackoverflow.com/users/2585246/dataq>

This is a simple code to rename the paper based on the ORIGINAL FILENAME and their website.
Your are free to use this code, but don't blame me for the error.
I am not writing any documentation, so please read my mind in this code.
USE ON YOUR OWN RISK *evil smirk*
'''
import urllib2, re, time, random
from os import listdir, rename
from os.path import isfile, join

# for every publisher we have different way of scraping
IEEE = 1
SCIENCEDIRECT = 2

# yes, I know, this very bad and stupid web scraping. But it's work at least.

# get title for IEEE paper
# the IEEE paper filename is looks like this '06089032.pdf'
def getIEEETitle(fname):
    # get url
    number = int(fname.split('.')[0])    
    targeturl = 'http://ieeexplore.ieee.org/xpl/freeabs_all.jsp?arnumber='+str(number)
    # open and read from those url
    opener = urllib2.build_opener()
    opener.addheaders = [('User-agent', 'Mozilla/5.0')]
    ieeePage = opener.open(targeturl).read()
    # split  every tag in the html. this is the stupid part :p
    ieeePageSplit = ieeePage.replace('<','>').split('>')
    title = None
    # find a tag that start with 'meta name="citation_title" content="'
    for i in ieeePageSplit:
        if i.startswith('meta name="citation_title" content="'):
            # get the paper title
            title = i.split('"')[3]
            break
    # a file name cannot be longer than 255 character (theoretically)
    # http://msdn.microsoft.com/en-us/library/aa365247.aspx 
    return title.strip()[:150]

# get title for Science Direct paper
# the Science Direct paper filename is looks like this '1-s2.0-0031320375900217-main.pdf'
def getScienceDirectTittle(fname):
    # get url
    number = fname.split('-')[2]
    targeturl = 'http://www.sciencedirect.com/science/article/pii/'+number
    # open and read from those url
    opener = urllib2.build_opener()
    opener.addheaders = [('User-agent', 'Mozilla/5.0')]
    sdPage = opener.open(targeturl).read()
    # split  every tag in the html. this is the stupid part :p
    sdPageSplit = sdPage.replace('<','>').split('>')
    title = None
    for i in range(len(sdPageSplit)):
        if sdPageSplit[i].startswith('title'):
            title = sdPageSplit[i+1]
            break
    # a file name cannot be longer than 255 character (theoretically)
    # http://msdn.microsoft.com/en-us/library/aa365247.aspx 
    return title.strip()[:150]

def batchRename(workingdir, site):
    # list all file in working directory
    files = [ fInput for fInput in listdir(workingdir) if isfile(join(workingdir,fInput)) ]
    # compiled regular expression for illegal filename character
    reIlegalChar = re.compile(r'([<>:"/\\|?*])')
    # rename all files
    for f in files:
        try:
            # find title
            if site == IEEE:
                title = getIEEETitle(f)
            elif site == SCIENCEDIRECT:
                title = getScienceDirectTittle(f)
            else:
                title = None

            if title:
                # remove illegal file name character
                fnew = reIlegalChar.sub(r' ', title) + '.pdf'
                print '{} --> {}'.format(f, fnew)
                # rename file
                rename((workingdir + f), (workingdir + fnew))
                print 'Success'
            else:
                print '{}\nFailed'.format(f)
        except:
            print '{}\nERROR'.format(f)
        # give some random delay, so we will not be blocked (hopefully) :p
        time.sleep(random.randrange(10))

if __name__ == '__main__':
    print 'Please be patient, it takes time depending on your internet connection speed...'
    workingdir = 'C:\\Users\\dataq\\Downloads\\paper\\' 
    batchRename(workingdir, IEEE) 
```

此代码适用于 IEEE 和 Science Direct 文章。您可以将您的文章放在`workingdir`. 当然，您可以将 的值更改`workingdir`为您自己的文件夹。

在该代码中，我将文件夹中的 IEEE 文章重命名`C:\Users\dataq\Downloads\paper\`。如果您想重命名 Science Direct 文章，您必须更改`batchRename(workingdir, IEEE)`为`batchRename(workingdir, SCIENCEDIRECT)`

您必须确保文章文件名是原始的（原始 IEEE 文章看起来像这样：`06089032.pdf`而对于 Science Direct 文章看起来像这样`1-s2.0-0031320375900217-main.pdf`：）

我不保证这些工具可以正常工作，所以使用它需要您自担风险。

# c++ - synology 交叉编译 gcc -std=c++0x

> ID：14279404
> 
> 赞同：1
> 
> 时间：2013-01-11T13:41:20.557
> 
> 标签：c++, gcc

我愿意编译一个需要 gcc 的 -std=c++0x 选项的程序，以使其执行 Synology x86 NAS 系统（Intel Atom）。我正在使用交叉编译工具链（synoroot 目录）。

```
$cat tst.cpp
tst.cpp:
    int main() {
    return 0;
}

$ gcc --version
gcc (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2

$gcc tst.cpp -std=c++0x --sysroot=/usr/local/synoroot -nodefaultlibs /usr/local/synoroot/lib/libc.so /usr/local/synoroot/lib/ld-linux.so.2 /usr/local/synoroot/usr/lib/libstdc++.so /usr/local/synoroot/lib/libm.so -o tst

$./tst && echo $?
0 
```

在 Synology 上：

```
$./tst
Floating point exception (core dumped) 
```

如果我使用工具链 gcc (i686-linux-gnu-gcc (GCC) 4.2.1)，./tst 在 Synology 上正确执行，但不支持 -std=c++0x。

那么我怎样才能获得成功的执行和 C++0x 支持呢？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:57:57.607

如果您的目标系统 (Synology) 与您的主机系统 (Ubuntu) 完全不同，需要交叉编译器，那么您只有两个选择：

1.  获取更新的交叉编译工具链，支持您需要的新语言/库功能（可能自己从源代码构建）
2.  重写应用程序，使其不需要 C++0x 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-05T15:45:38.237

如果您只是想在您的 Synology 上运行或编译并运行，您可以选择 Debian Chroot 您的 DSM。有了这个，您可以在您的 Synology 上做任何您想做的事情。

这是我用于 DSM6.x 存储库的 Debian-Chroot.pkg，您可以使用它进行安装。 [https://github.com/OKit-Scripts-Projects/DSM.Customizations/blob/master/App.Debian-Chroot.md](https://github.com/OKit-Scripts-Projects/DSM.Customizations/blob/master/App.Debian-Chroot.md)

有任何问题，请随时发表评论或打开问题。

# java - 显示来自 servlet 过滤器的消息

> ID：14279406
> 
> 赞同：0
> 
> 时间：2013-01-11T13:41:39.077
> 
> 标签：java, servlet-filters

我有一个 servlet 过滤器，它检查附加的文件名，在我的 servlet 过滤器中，我得到了我验证它的文件名，但是我无法向用户显示消息，请有人帮我解决这个问题。谢谢 ：）

下面是`doFilter()`：

```
HttpServletRequest request = (HttpServletRequest) req;
String name=request.request.getParameter("filename");
if(name.contains(".bat"))
{
    System.out.println("You cannot attach files with .bat extension");
}
chain.doFilter(req, res); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:46:16.493

`System.out`是后端（服务器端）的输出流，如果要将消息发送到最终用户可以看到的前端，则需要将消息写入`ServletResponse`，即`res`。例如：`res.getWriter().println("You cannot attach files with .bat extension")`。

# sql - SQL - 返回字段的一部分

> ID：14279407
> 
> 赞同：0
> 
> 时间：2013-01-11T13:41:40.783
> 
> 标签：sql, sql-server-2008, tsql, reporting-services, ssrs-2008

> **可能重复：**
> [SQL 中的拆分字符串](https://stackoverflow.com/questions/2647/split-string-in-sql)

我在数据库中有一个名为的列，该列`LastName`具有以下值：

```
Johnson  (Ext. 12345) 
```

我只想返回没有扩展名的姓氏。

知道在 T-SQL 中使用什么命令吗？（适用于 SSRS 2008 版本）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:44:09.557

试试这个，

```
SELECT RTRIM(SUBSTRING(LastName, 1, CHARINDEX('(', LAstName) - 1)) LastName
FROM table1 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/176db/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:45:25.580

你可以;

```
left(fld, charindex(' ', fld + ' ', 1) - 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:47:27.023

首先请允许我说，单个字段中的此类复合值不利于规范化，会出现有关数据完整性、重复性等的各种问题，并且还会在您尝试执行的简单查询中出现问题。

如果可以的话，您应该将姓氏和分机拆分为两个不同的列。

有关您问题的答案，请检查[此](https://stackoverflow.com/questions/314824/t-sql-opposite-to-string-concatenation-how-to-split-string-into-multiple-reco)

# c# - 使用列表 与 IList

> ID：14279410
> 
> 赞同：1
> 
> 时间：2013-01-11T13:41:51.377
> 
> 标签：c#, asp.net, .net

> **可能重复：**
> [何时使用 IList 以及何时使用 List](https://stackoverflow.com/questions/17170/when-to-use-ilist-and-when-to-use-list)

这个问题可能只是对 .NET 框架缺乏了解，但实际上在接口中拥有一组数据而不是仅仅将其放在列表中有什么好处？到目前为止，我只使用`List<T>`了它，而且它似乎做了我需要它做的事情，但是查看其他人的代码，我发现有人经常使用`IEnumerable<T>`, `IQueryable`/ `IQueryable<T>`, `ICollection<T>`, 甚至`IList<T>`. `List<T>`话虽如此，和之间甚至有什么区别`IList<T>`？

我知道其中一些在包含的对象上具有不同的功能，但哪个最安全？`IEnumerable`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:43:28.170

如果将类型设置为接口类型，则可以使用*任何*实现`IList<T>`.

如果您使用`List<T>`，则只能使用该类型和从它继承的类型。

这取决于使用情况 - 如果您只需要迭代，请使用`IEnumerable<T>`，如果您还需要添加/删除项目，请使用`ICollection<T>`. 如果您需要对集合进行索引，请使用`IList<T>`等...

# osgi - 带有 JSP 和 BNDtools 的 Servlet

> ID：14279413
> 
> 赞同：0
> 
> 时间：2013-01-11T13:42:07.420
> 
> 标签：osgi, bndtools

我在这里看到了一个关于使用 BNDtool 的 Servlets 的好教程：[http](http://www.ralfebert.de/tutorials/osgi_server/) ://www.ralfebert.de/tutorials/osgi_server/ 。

但是我如何从这个 Servlet 访问静态 html 文档和 JSP？当我想把它们放在哪里时，我应该把它们存放在哪里`request.getRequestDispatcher("*.jsp")`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:30:11.507

深入了解[HttpService#registerResource](http://www.osgi.org/javadoc/r4v42/org/osgi/service/http/HttpService.html#registerResources%28java.lang.String,%20java.lang.String,%20org.osgi.service.http.HttpContext%29)。[Apache Felix HttpService](http://felix.apache.org/site/apache-felix-http-service.html)附带了一个适当的实现。那应该以编程方式解决您的问题。不幸的是，我现在没有任何声明性的。

**更新：**[此页面](http://www.javaworld.com/javaworld/jw-06-2008/jw-06-osgi3.html?page=2)上的清单 7概述了如何使用它。本文的其余部分与 Equinox 框架一起使用。

# actionscript-3 - 从 URI 获取 XML 命名空间的前缀

> ID：14279416
> 
> 赞同：0
> 
> 时间：2013-01-11T13:42:35.823
> 
> 标签：actionscript-3, apache-flex

如何从 URI 获取 xml 命名空间的前缀？

例子：

```
<Name xmlns:tiger="http://www.census.gov">
</Name> 
```

我有

```
"http://www.census.gov" 
```

我想得到前缀

```
tiger 
```

如何在 Actionscript / Flex 中执行此操作？

谢谢

**编辑**

答案不适用于这个复杂的例子：

```
<Name xmlns:tiger="http://www.census.gov" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wfs" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ows="http://www.opengis.net/ows" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:it.geosolutions="http://www.geo-solutions.it" xmlns:cite="http://www.opengeospatial.net/cite" xmlns:worldWS="worldWS" xmlns:sde="http://geoserver.sf.net" xmlns:topp="http://www.openplans.org/topp" xmlns:sf="http://www.openplans.org/spearfish" xmlns:nurc="http://www.nurc.nato.int" xmlns:solWS="solWS">
    tiger:poly_landmarks
</Name> 
```

我有空数组。

**回答我自己的问题**

**对于编辑示例**

```
var xml:XML = <Name xmlns:tiger="http://www.census.gov" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wfs" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ows="http://www.opengis.net/ows" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:it.geosolutions="http://www.geo-solutions.it" xmlns:cite="http://www.opengeospatial.net/cite" xmlns:worldWS="worldWS" xmlns:sde="http://geoserver.sf.net" xmlns:topp="http://www.openplans.org/topp" xmlns:sf="http://www.openplans.org/spearfish" xmlns:nurc="http://www.nurc.nato.int" xmlns:solWS="solWS">
    tiger:poly_landmarks
</Name>

var ns:Namespace = xml.namespace("http://www.census.gov");
if(ns.uri == "http://www.census.gov")
.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:00:12.317

```
 var xml:XML = <Name xmlns:tiger="http://www.census.gov"></Name>;
    var ns:Array = xml.namespaceDeclarations();
    trace(ns[0].prefix); //output: tiger 
```

复杂 xml 的 UPD（`tiger`也可以输出）：

```
 var xml:XML = <Name xmlns:tiger="http://www.census.gov" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wfs" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ows="http://www.opengis.net/ows" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:it.geosolutions="http://www.geo-solutions.it" xmlns:cite="http://www.opengeospatial.net/cite" xmlns:worldWS="worldWS" xmlns:sde="http://geoserver.sf.net" xmlns:topp="http://www.openplans.org/topp" xmlns:sf="http://www.openplans.org/spearfish" xmlns:nurc="http://www.nurc.nato.int" xmlns:solWS="solWS">
        tiger:poly_landmarks
    </Name>

    var nss:Array = xml.namespaceDeclarations();
    for each(var ns:Namespace in nss)
    {
        if(ns.uri == "http://www.census.gov")
        {
            trace(ns.prefix);
            break;
        }
    } 
```

# namespaces - 如果我重命名应用程序的命名空间，批准的打开图形操作是否需要重新提交

> ID：14279417
> 
> 赞同：0
> 
> 时间：2013-01-11T13:43:07.393
> 
> 标签：namespaces, action, facebook-opengraph, rename

我们需要重命名我们已经批准打开图形操作的应用程序之一，如果我们重命名应用程序的命名空间，是否需要重新提交已批准的打开图形操作？

干杯

布雷特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:07:33.667

我想是的，因为 facebook 已经明确提到过——

> 确保您为 API 调用使用了正确的命名空间。请记住，应用程序名称空间一旦设置就无法修改。

参考：[OG 教程](https://developers.facebook.com/docs/technical-guides/opengraph/opengraph-tutorial/#debug)

# c++ - 将错误代码映射到 C++ 中的字符串

> ID：14279420
> 
> 赞同：4
> 
> 时间：2013-01-11T13:43:10.180
> 
> 标签：c++, string, error-code

将错误代码从枚举映射到字符串的更有效方法是什么？（在 C++ 中）

例如，现在我正在做这样的事情：

```
std::string ErrorCodeToString(enum errorCode)
{
   switch (errorCode)
   {
      case ERROR_ONE:   return "ERROR_ONE";
      case ERROR_TWO:   return "ERROR_TWO";
      ...
      default:
         break;
   }

   return "UNKNOWN";
} 
```

如果我做这样的事情会更有效吗？：

```
#define ToStr( name ) # name;

std::string MapError(enum errorCode)
{
   switch (errorCode)
   {
      case ERROR_ONE:   return ToStr(ERROR_ONE);
      case ERROR_TWO:   return ToStr(ERROR_TWO);
      ...
      default:
         break;
   }

   return "UNKNOWN";
} 
```

也许有人对此有任何建议或想法？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T13:47:30.850

如果您要使用宏，为什么不一路走下去：

```
std::string MapError(enum errorCode)
{
    #define MAP_ERROR_CODE(code) case code: return #code ;
    switch (errorCode)
    {
       MAP_ERROR_CODE(ERROR_ONE)
       MAP_ERROR_CODE(ERROR_TWO)
       ...
    }
    #undef MAP_ERROR_CODE
    return "UNKNOWN";
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-24T15:09:02.737

我想要一种在一个且仅一个位置声明错误代码（int）和字符串描述（任何字符串）的方法，并且上面的示例都不允许这样做。

所以我声明了一个简单的类，它同时存储了 int 和 string，并为 int->string 转换维护了一个静态映射。我还添加了一个“自动转换为”int 函数：

```
class Error
{
public:
    Error( int _value, const std::string& _str )
    {
        value = _value;
        message = _str;
#ifdef _DEBUG
        ErrorMap::iterator found = GetErrorMap().find( value );
        if ( found != GetErrorMap().end() )
            assert( found->second == message );
#endif
        GetErrorMap()[value] = message;
    }

    // auto-cast Error to integer error code
    operator int() { return value; }

private:
    int value;
    std::string message;

    typedef std::map<int,std::string> ErrorMap;
    static ErrorMap& GetErrorMap()
    {
        static ErrorMap errMap;
        return errMap;
    }

public:

    static std::string GetErrorString( int value )
    {
        ErrorMap::iterator found = GetErrorMap().find( value );
        if ( found == GetErrorMap().end() )
        {
            assert( false );
            return "";
        }
        else
        {
            return found->second;
        }
    }
}; 
```

然后，您只需声明您的错误代码如下：

```
static Error ERROR_SUCCESS(                 0, "The operation succeeded" );
static Error ERROR_SYSTEM_NOT_INITIALIZED(  1, "System is not initialised yet" );
static Error ERROR_INTERNAL(                2, "Internal error" );
static Error ERROR_NOT_IMPLEMENTED(         3, "Function not implemented yet" ); 
```

然后，任何返回 int 的函数都可以返回 1

```
return ERROR_SYSTEM_NOT_INITIALIZED; 
```

并且，您的库的客户端程序在调用时会得到“系统尚未初始化”

```
Error::GetErrorString( 1 ); 
```

或者：

```
Error::GetErrorString( ERROR_SYSTEM_NOT_INITIALIZED ); 
```

我看到的唯一限制是，如果声明它们的 .h 文件包含在许多 .cpp 中，则会多次创建静态错误对象（这就是为什么我在构造函数中进行 _DEBUG 测试以检查地图的一致性）。如果您没有数千个错误代码，那应该不是问题（并且可能有解决方法......）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T13:49:05.100

```
enum errors {
    error_zero,
    error_one,
    error_two
};

namespace {
const char *error_names[] = {
    "Error one",
    "Error two",
    "Error three"
};
}

std::string map_error(errors err) {
    return error_names[err];
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-11T13:50:02.043

您建议的替代方案不再有效，但您可以通过两种方式改进：

1.  您显然在`errorCode`枚举和此函数之间存在重复。
2.  由于枚举值与字符串给出的名称相同，因此您的函数中也存在某种重复。

你可以用一点预处理魔法来修复这两个问题：

```
// This is your definition of available error codes
#define ERROR_CODES \
  ERROR_CODE(ERROR_ONE) \
  ERROR_CODE(ERROR_TWO) \
  ERROR_CODE(ERROR_THREE)

// Define ERROR_CODE macro appropriately to get a nice enum definition
#define ERROR_CODE(a) ,a
enum ErrorCode {
  None,
  ERROR_CODES
};
#undef ERROR_CODE

// Define ERROR_CODE macro differently here to get the enum -> string mapping
std::string MapError(enum errorCode)
{
   #define ERROR_CODE(a) case a: return #a;

   switch (errorCode)
   {
      case None: return "None";
      ERROR_CODES
   }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-11T13:47:15.023

不，在预处理器传递您的代码后，两者将完全相同。唯一的问题是第二种方法不太容易出现拼写错误。

我想说您实施的已经是一个很好的解决方案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-03T01:50:23.963

我知道这是一个旧线程，但我确实喜欢 Frerich Raabe 的方法，并让它在 VS 中正常工作：

```
#define ERROR_CODES \
    ERROR_CODE(NO_ERROR) \
    ERROR_CODE(ERROR_ONE) \
    ERROR_CODE(ERROR_TWO) \
    ERROR_CODE(ERROR_THREE) \
    ERROR_CODE(ERROR_FOUR)

#define ERROR_CODE(code) code,
typedef enum { ERROR_CODES } ErrorCodes;
#undef ERROR_CODE

const char *MapError(const int errorCode)
{
#define ERROR_CODE(code) case code: return #code;   
    switch (errorCode)
    {
        ERROR_CODES
    default: return "UNKNOWN ERROR";
    };
#undef ERROR_CODE
} 
```

# mysql - Neo4j - 如何在 Neo4j 中模拟 MySQL 多模式部署

> ID：14279421
> 
> 赞同：4
> 
> 时间：2013-01-11T13:43:14.067
> 
> 标签：mysql, neo4j, multiple-schema

使用 Neo4j 服务器的单个实例（未嵌入），如何在 Neo4j 中添加多个模式类型的部署（类似于 MySQL）？如何在部署为服务器的 Neo4j 中添加/删除模式运行时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:46:40.757

您可以将每个表转换为节点类型，将列转换为节点（或关系）属性，将外键转换为关系（在这里您可以存储更多属性）。

Neo4j 是无模式的，但您在 Neo4j 中可以做的是创建链接到您的根节点的节点，每个节点代表一个“类”。如果将所有实例链接到“类”节点，则可以像在类似 SQL 的表中迭代一样浏览它们，或者知道该节点后面的“模式”。

下面是一个关于如何对从 SQL 到 Neo4j 的类别进行建模的示例：http: [//blog.neo4j.org/2010/03/modeling-categories-in-graph-database.html](http://blog.neo4j.org/2010/03/modeling-categories-in-graph-database.html)

# scala - 在 Scala 中实现一个 SOAP 网络服务

> ID：14279429
> 
> 赞同：2
> 
> 时间：2013-01-11T13:43:40.170
> 
> 标签：scala, scalaxb

在 Scala 中实现 SOAP Web 服务的最佳库/框架是什么？

使用 scalaxb 实现 SOAP Web 服务的示例？

请不要使用升降机等重型框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:14:43.213

我想目前没有这样的图书馆，也许永远不会，无论如何，情况并不像看起来那么糟糕。您可以在现有 Java SOAP 库之上创建一个 Scala 包装器。在这里查看更多信息[Scala 中的 SOAP 代理 - 我需要什么？](https://stackoverflow.com/questions/3650457/soap-proxy-in-scala-what-do-i-need)对于初学者来说：http: [//java.dzone.com/articles/basic-ws-scala-sbt-and-jee-6](http://java.dzone.com/articles/basic-ws-scala-sbt-and-jee-6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-20T18:50:47.080

我遇到了这个非常老的问题，我不确定发布时情况是否有所不同，但这里有一个使用 jax-ws 的示例，来自[https://redsigil.weebly.com/home/a-scala-肥皂网络服务](https://redsigil.weebly.com/home/a-scala-soap-web-service)。

```
@WebService(
  targetNamespace = "http://com.redsigil/soapserver",
  name = "com.redsigil.soapserver",
  portName = "soap",
  serviceName = "SoapServerSample")
@BindingType(javax.xml.ws.soap.SOAPBinding.SOAP12HTTP_BINDING)
@Addressing(enabled = true, required = false)
class SoapServerImpl() {
  @WebMethod(action = "hashing")
  def test(@WebParam(name = "mystr", mode = WebParam.Mode.IN) value: String): String = sha256Hash(value)

  def sha256Hash(text: String): String =
    String.format("%064x",
      new java.math.BigInteger(1, java.security.MessageDigest.getInstance("SHA-256").digest(text.getBytes("UTF-8"))))
} 
```

如您所见，它相当简单，尽管注释使它有点难看。该服务定义了一个 SOAP 方法（“test”），它接受一个字符串并返回其哈希值。主函数如下所示：

```
val myservice: SoapServerImpl = new SoapServerImpl()
val ep:Endpoint = Endpoint.publish("http://localhost:8080/test", myservice) 
```

是的，我知道 OP 表示他不喜欢使用 jax-ws——在评论中有点咆哮，但考虑到这不是通过适当的设计和抽象无法解决的问题。

# php - 使用 PHP 确认文件类型与扩展名匹配（MS Word、Excel 和 PowerPoint 的问题）

> ID：14279433
> 
> 赞同：1
> 
> 时间：2013-01-11T13:44:01.833
> 
> 标签：php, mime-types

在接受文件之前，我希望确认实际文件与文件扩展名匹配。为此，我执行以下操作：

```
$finfo = finfo_open(FILEINFO_MIME_TYPE);
$mime=finfo_file($finfo, $filename);
$ext=getExtFromMime($mime); //Simple switch lookup table
if($ext==pathinfo($filename, PATHINFO_EXTENSION)) {//File is okay}
else {//file is bad} 
```

除了我与 Microsoft 文件相关的问题之外，您是否发现这种方法有任何问题？

PHP finfo_file() 用于为 MS Word 2007、Excel 2007 和 PowerPoint 2007 文件提供相同的 mime“应用程序/zip”类型。然后，PHP >= 5.3.11 和 >= 5.4.1 将返回的 mime 类型从 "application/zip" 更改为 2003 mime

*   应用程序/msword
*   应用程序/vnd.ms-excel
*   应用程序/vnd.ms-powerpoint）。

然而，这三种文件类型的正确 mime 类型如下：

*   应用程序/vnd.openxmlformats-officedocument.wordprocessingml.document
*   应用程序/vnd.openxmlformats-officedocument.spreadsheetml.sheet
*   应用程序/vnd.openxmlformats-officedocument.presentationml.presentation

我应该如何为 2007 文件获取正确的 mime 类型，以便确认它们与文件类型匹配？

# android - 我使用 google mapV2 并从 google place api 下载图像并希望在弹出窗口中显示

> ID：14279442
> 
> 赞同：1
> 
> 时间：2013-01-11T13:44:27.957
> 
> 标签：android, google-maps, popupwindow

我使用所有类通过 URL 获取图像。

```
 ImageView imV=  ((ImageView) view.findViewById(R.id.badge));
        // Image url
        String image_url = "http://maps.gstatic.com/mapfiles/place_api/icons/cafe-71.png";
        final int stub_id = R.drawable.ic_action_search;
        // ImageLoader class instance
        ImageLoader imgLoader = new ImageLoader(getApplicationContext());

        // whenever you want to load an image from url
        // call DisplayImage function
        // url - image url to load
        // loader - loader image, will be displayed before getting image
        // image - ImageView
        imgLoader.DisplayImage(image_url,stub_id ,imV); 
```

但它显示的是默认图像，而不是 URL 下载的图像。

[https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.InfoWindowAdapter](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.InfoWindowAdapter)

我正在使用 goolge 的 infowindowAdapter 类，它说一旦在窗口中加载数据和图像，我就无法更改图像，这就是为什么它显示第一个默认图像.....并且以后不会更改

那么还有其他方法吗？提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T11:55:23.170

我有同样的问题。我已经用 asyncTask 解决了它。

像这样的东西

```
private Drawable _infoImageDrawable;
public class MyMapActivity extends MenuActivity
{
    .....code code code....

    protected void handleMarkerClicked(final Marker marker, final String url) {
        new AsyncTask<Void, Void, Void>()
        {   
            @Override
            protected void onPreExecute() 
            {
                super.onPreExecute();
                _infoImageDrawable = null;
            }

            @Override
            protected Void doInBackground(Void... params) 
            {
                InputStream is;
                try {
                     is = (InputStream) new URL(url).getContent();
                     _infoImageDrawable = Drawable.createFromStream(is, "");
                } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                }
                return null;                
            }

            @Override
            protected void onPostExecute(Void result) 
            {
            super.onPostExecute(result);
            marker.showInfoWindow();
            }
        }.execute();
    }
} 
```

然后我只是将 InfoWindowAdapter 中的 drawable 首先设置为 null（删除旧图像），然后设置为 _imageInfoDrawable。它有效 - 但我想要一个更好的解决方案。

# c# - 尝试从 URL 下载字符串时连接已关闭

> ID：14279445
> 
> 赞同：1
> 
> 时间：2013-01-11T13:44:31.480
> 
> 标签：c#, winforms, webclient, connectionexception

我想将字符串从一种语言翻译成另一种语言。我试过这段代码：

```
 input = clipoard_word;
        string languagePair = "en|bn";
        string url = String.Format("http://www.google.com/translate_t?hl=en&ie=UTF8&text={0}&langpair={1}", input, languagePair);
        WebClient webClient = new WebClient();
        webClient.Encoding = System.Text.Encoding.UTF8;
        try
        {
             result = webClient.DownloadString(url);
        }
        catch (Exception e)
        {
            MessageBox.Show(e.Message);
        }
        result = result.Substring(result.IndexOf("<span title=\"") + "<span title=\"".Length);
        result = result.Substring(result.IndexOf(">") + 1);
        result = result.Substring(0, result.IndexOf("</span>"));
        result = WebUtility.HtmlDecode(result.Trim());
        label1.Text = result; 
```

但是我遇到了一个例外：

```
 result = webClient.DownloadString(url); 
```

错误消息说：

> 底层连接已关闭；接收时发生意外错误

这里有什么问题，我该如何解决？N:B：我不想在这里使用谷歌翻译 api。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:31:36.373

嗨，我终于为你找到了解决方案

你需要在你的配置文件中添加这个

```
 <system.net>
    <defaultProxy enabled="true" useDefaultCredentials="true">
      <proxy />
      <bypasslist/>
      <module/>
    </defaultProxy>
  </system.net> 
```

**问题**---**是服务器只是使用 IE 的代理设置来执行 DownloadString 调用。我的本地 IIS (7.0) 要求必须正确配置代理内容，以使服务器端 http 访问正常工作。这可以通过 web.config 中的一些设置来完成：**

# vb.net - z.Repeat.Once 不工作

> ID：14279449
> 
> 赞同：1
> 
> 时间：2013-01-11T13:45:00.260
> 
> 标签：vb.net, unit-testing, mocking, rhino-mocks

我正在使用 Rhino Mocks 编写我的单元测试，并且我想使用`Assert.WasCalled`功能，但我一直收到错误消息。

一堆测试使用的我的帮助方法：

```
Private Function CreateSecurityTicketHelper(userName As String, validFrom As DateTime, validTo As DateTime) As ISecurityTicket
    ' Prepare a mock object for ITicketingDataManager interface
    Dim dataManagerMock = MockRepository.GenerateMock(Of ITicketingDataManager)()
    ' Prepare a mock function for ITicketingDataManager.InitializeNewTicket(string, string)
    Dim returnSecurityTicket As Func(Of String, String, ISecurityTicket) = Function(u, k) New SecurityTicketEntity() With {.UserName = u, .Key = k}
    dataManagerMock.Stub(Function(x) x.InitializeNewTicket(Nothing, Nothing)).IgnoreArguments().Do(returnSecurityTicket)

    ' Create new TicketingManager instance
    Dim ticketingManager = New TicketingManager(dataManagerMock)
    ' Try creating new security ticket
    Dim ticket = ticketingManager.CreateSecurityTicket(userName, validFrom, validTo)

    ' Check if proper ITicketingDataManager method was invoked
    dataManagerMock.AssertWasCalled(Sub(x) x.InitializeNewTicket(Nothing, Nothing), Sub(z) z.Repeat.Once())

    ' Return the ticket
    Return ticketingManager.CreateSecurityTicket(userName, validFrom, validTo)
End Function 
```

我可以调试该方法并且一切正常，直到`AssertWasCalled`调用方法，当我得到以下异常时：

> 测试方法 Authentication.UnitTests.TicketingManagerTests.CreateSecurityTicket_ValidUserNameAndKey_TicketIsCreated 抛出异常：Rhino.Mocks.Exceptions.ExpectationViolationException: ITicketingDataManager.InitializeNewTicket(null, null); 预期 #1，实际 #0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:41:32.923

您的断言说该`InitializeNewTicket()`方法应该使用 arguments 调用一次`(Nothing, Nothing)`。

**如果使用其他**参数调用此方法，则断言失败。

您必须将断言重写为 A) 接受**任何参数**或 B) 指定**正确的参数**。

请参阅下面的示例。
关于示例的几点说明：
1\. 不幸的是，我不擅长 VB 语法，所以在 C# 中提供示例。
2\. 没有提到哪个参数类型有方法`InitializeNewTicket()`，所以例如我假设它有`String`参数。

接受断言中的任何参数：

```
dataManagerMock.AssertWasCalled(
    x => x.InitializeNewTicket(Arg<String>.Is.Anything, Arg<String>.Is.Anything),
    z => z.Repeat.Once()); 
```

要指定预期的参数（例如`expected1, expected2`）：

```
dataManagerMock.AssertWasCalled(
    x => x.InitializeNewTicket(Arg<String>.Is.Equal(expected1), Arg<String>.Is.Equal(expected2)),
    z => z.Repeat.Once()); 
```

希望能解释您的问题的原因并有助于解决:)。

# wordpress - Wordpress 类别与子类别条件

> ID：14279452
> 
> 赞同：0
> 
> 时间：2013-01-11T13:45:05.907
> 
> 标签：wordpress, conditional, categories

我正在尝试开发两个不同的模板；一个类别列表的布局和一个单独的子类别布局。

我相信它需要一个条件语句来检测当前类别是类别还是子类别。

我熟悉：

```
<?php if (is_category('Category A')) : ?>
<p>This is the text to describe category A</p>
<?php elseif (is_category('Category B')) : ?>
<p>This is the text to describe category B</p>
<?php else : ?>
<p>This is some generic text to describe all other category pages, 
I could be left blank</p>
<?php endif; ?> 
```

但我需要它更加动态并处理任何类别或子类别，而无需对猫 ID 号进行硬编码。

任何帮助将不胜感激，在此先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:59:23.663

您可以使用`get_category()`( [WordPress Codex](http://codex.wordpress.org/Function_Reference/get_category#Examples) ) 获取有关某个类别的所有信息。使用它，您可以在 functions.php 中创建一个自定义条件函数，**如下**所示：

```
function is_subcategory ($catid) {

  $currentcat = get_category($catid);

  if ( $currentcat->parent ) {
    return true;
  } else {
    return false;
  }
} 
```

现在您可以使用这个函数来确定一个类别是否有一个父类别，因此是一个子类别。

不幸的是，我不知道您发布的代码的上下文。您将需要以某种方式获取类别 ID。您是使用循环遍历类别还是自定义 sql 查询？

如果答案没有帮助，也许您可​​以在您的问题中添加一些周围的代码。

# security - 在 Glassfish 上进行领域身份验证后重定向

> ID：14279453
> 
> 赞同：3
> 
> 时间：2013-01-11T13:45:06.160
> 
> 标签：security, jsf-2, java-ee-6, glassfish-3, realm

我目前正在 Glassfish 上运行 JPA/EJB/JSF 应用程序，并使用安全 JDBC 领域进行身份验证。该领域运行良好，满足要求，直到客户要求对导航进行小幅更改。

今天，如果您尝试访问受保护的页面，身份验证机制会将您重定向到 web.xml 中指定的登录页面。完美的！身份验证成功后，您将被重定向回您尝试访问的页面。很公平。但是，客户决定在每次成功的身份验证后，无论他/她之前尝试访问哪个页面，都应该将用户重定向到主页。问题是，我们如何更改领域以便在每次成功验证后重定向到固定页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:08:01.193

你不能。容器管理的身份验证不允许这种细粒度的配置（这正是[Apache Shiro](http://shiro.apache.org)和[Spring Security](http://static.springsource.org/spring-security/site/)等第三方身份验证框架存在的原因）。

最好的办法是用[程序登录替换容器管理登录](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#login%28java.lang.String,%20java.lang.String%29)。将提交给这样的 JSF 操作方法的`<form action="j_security_check">`by更改为`<h:form>`

```
public void login() throws IOException {
    FacesContext context = FacesContext.getCurrentInstance();
    ExternalContext externalContext = context.getExternalContext();
    HttpServletRequest request = (HttpServletRequest) externalContext.getRequest();

    try {
        request.login(username, password);
        externalContext.redirect(homepageURL);
    } catch (ServletException e) {
        context.addMessage(null, new FacesMessage("Unknown login"));
    }
} 
```

### 也可以看看：

*   [使用 j_security_check 在 Java EE / JSF 中执行用户身份验证](https://stackoverflow.com/questions/2206911/best-way-for-user-authentication-on-javaee-6-using-jsf-2-0/2207147#2207147)

# php - 当我访问该网站时，Laravel 抛出 404

> ID：14279454
> 
> 赞同：0
> 
> 时间：2013-01-11T13:45:09.830
> 
> 标签：php, content-management-system, http-status-code-404, laravel

我在 Laravel 框架上安装了 PongoCMS 并配置了 evrything（如 pongocms.com 指南中所示），但问题是当我完成`cms::setup`并导航到站点 url（http://localhost/laravel/public）时，它会在另一边向我抛出 404可以完美地登录仪表板并做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:46:03.577

我有同样的问题。application/config/application.php 中的设置`'index' => ''`为我修复了它。

# visual-studio-2010 - Visual Studio 2008 和 Visual Studio 2012 解决方案是否“兼容”？

> ID：14279457
> 
> 赞同：3
> 
> 时间：2013-01-11T13:45:27.107
> 
> 标签：visual-studio-2010, visual-studio-2008, backwards-compatibility, assemblyinfo

我在家里使用 Visual Studio 2010 Express 编辑了我的项目（它是在学校使用 Visual Studio 2008 编写的）。回到学校后，我无法再打开我的解决方案，因为 Visual Studio 2008 告诉我该文件是使用较新版本的 Visual Studio 创建的。我向我的教授寻求帮助，他在解决方案的装配信息中编辑了一些东西，瞧，我可以打开、运行、再次编辑它，因为什么都没发生。

但是，我忘记了他对集会信息做了什么。这里有人知道他能做什么吗？还是这种方法不可取？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:50:41.530

在`.sln`文件的顶部会有一行：

```
Microsoft Visual Studio Solution File, Format Version 11.00 
```

如果将版本更改为`10.00`，它将对应于 Visual Studio 2008。为此请使用任何文本编辑器。

这些版本之间的文件格式没有改变（Visual Studio 2012 也没有）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T13:49:10.783

在记事本中编辑 .sln 文件并在第一行或第二行找到版本号 (11.0)。将其更改为 10.0，保存文件，您应该一切顺利。

# glade - 如何在另一个函数中调用变量

> ID：14279458
> 
> 赞同：1
> 
> 时间：2013-01-11T13:45:29.247
> 
> 标签：glade

**嗨，我有 2 个函数可以打印 ai 在文本条目中输入的内容（用于 GUI 的林间空地）。像这样：**

```
void on_adress_activate(GtkWidget * adress, GdkEvent * event, gpointer data)
{
const gchar *adress_text;
adress_text=gtk_entry_get_text (GTK_ENTRY (adress));
printf ("IP Adress: %s\n",adress_text);
}

void on_port_activate(GtkWidget * port, GdkEvent * event, gpointer data)
{
const gchar *port_text;
port_text=gtk_entry_get_text (GTK_ENTRY (port));
printf ("Port Number: %s\n",port_text);
} 
```

**现在我需要在另一个函数中调用 port_text 和 adress_text 的值，当我单击 gui 上的按钮时，它应该显示它们的另一个 printf：**

```
void on_connect_clicked(GtkWidget * widget, gpointer user_data)
{
printf("Connection done%s,port%s\n",adress_text,port_text);
} 
```

**有没有办法做到这一点？请更正我的代码。我希望我很清楚。提前致谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-14T00:13:51.267

在放置变量的函数中

```
global name_of_variable 
```

# java - onCreate() 是在实现 Runnable 的 Activity 中调用的吗？

> ID：14279461
> 
> 赞同：0
> 
> 时间：2013-01-11T13:45:35.453
> 
> 标签：java, android

我正在使用代码调用可运行的活动

```
Mover simulationRuntime = new Mover(); 
```

`onCreate()`不运行什么给出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:47:25.400

这是开始活动的错误方式。您应该使用`startActivity`Google 为您提供的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:47:53.813

`onCreate`仅在框架实例化活动时由框架调用。要从您的代码开始另一个活动，请创建一个`Intent`然后使用`startActivity`.

当您在代码示例中创建`Mover`对象时，只会运行构造函数。

# open-source - 当创建一个开源项目时，放什么版权年份？

> ID：14279462
> 
> 赞同：1
> 
> 时间：2013-01-11T13:45:41.570
> 
> 标签：open-source, copyright-display

假设我在 2012 年的几个月内创建了一个开源项目，然后将其发布。

如果我在 2013 年回来修改它，我放什么版权？应该是 (c) 2012 - 2013 还是只是 (c) 2013？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:54:29.523

坦率地说，这并不重要，因为版权文本没有任何法律意义。无论是否有任何版权声明，您都拥有相同的权利。

使用与产品相关的任何东西。我只会使用最近的一年，直到产品具有足够长的使用寿命，以至于似乎有必要使用几年。

# python - 遍历多个字典并获取其中值的字典名称

> ID：14279469
> 
> 赞同：2
> 
> 时间：2013-01-11T13:46:04.507
> 
> 标签：python

我想遍历多个字典以找到其中的值。如果找到该值，我想要返回值和字典的名称。我已经编写了一个函数来做到这一点，但我不能只提取完整的字典名称。这是代码：

```
a = {1: ((1,1),999), 2: ((2,2),998), 3:((3,3),998)}
b = {1: ((4,4),997), 5:((5,5),996)}

def retOBJECT(tup):
    for l in [a,b]:
        for v in l:
            if tup in l[v]:
                return l,v,l[v][1]

print retOBJECT((1,1))

>>> 
({1: ((1, 1), 999), 2: ((2, 2), 998), 3: ((3, 3), 998)}, 1, 999) 
```

我不希望返回整个字典，而只希望返回它的名称，这样我就知道其他值的来源，即最后两个数字。

这就是我希望它的样子：

```
>>> ('a', 1, 999) 
```

任何人都可以在这里帮忙。我总是在这里找到很好的建议，我期待着一些天才指出如何检索字典的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:56:39.307

```
def retOBJECT(tup):
    for l_name, l in [('a',a),('b',b)]:
        for v in l:
            if tup in l[v]:
                return l_name, v,l[v][1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:56:42.737

`a`并且`b`只是对字典对象的引用，所以每当你使用`a`和`b`python 实际使用它们指向的对象时。

虽然你可以`globals()`用来实现你想要做的事情，但我不知道你为什么要这样做：

> globals() -> 字典
> 
> 返回包含当前作用域的全局变量的字典。

```
In [110]: globals()['a']
Out[110]: {1: ((1, 1), 999), 2: ((2, 2), 998), 3: ((3, 3), 998)}

In [111]: def retOBJECT(tup):
        for l in ['a','b']:
                for v in globals()[l]:
                        if tup in globals()[l][v]:
                                return l,v,globals()[l][v][1]
   .....:             

In [112]: print retOBJECT((1,1))
('a', 1, 999)

In [113]: print retOBJECT((2,2))
('a', 2, 998)

In [114]: print retOBJECT((5,5))
('b', 5, 996) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:54:57.120

如果您真的想要字典的名称，我建议给字典一个`'name'`键，其中包含字典的“名称”。

```
a['name'] = 'a' 
```

您还可以`a`使用对象的“名称”和字典创建一个元组。

```
a = ('a', some_dict) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T14:16:18.450

我认为推荐的方法是将整个数据结构包装在一个字典中，例如：

```
names = {}
names["a"] = {1: ((1,1),999), 2: ((2,2),998), 3:((3,3),998)}
names["b"] = {1: ((4,4),997), 5:((5,5),996)}

def ret_name(tup):
    for k1, v1 in names.iteritems():
        for k2, v2 in names[k1].iteritems():
            if v2[0]==tup:
                return names[k1], k1, names[k1][k2][1]

print ret_name( (1,1) )
print ret_name( (5,5) ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T14:36:44.697

使用您的 dicts 作为函数的关键字参数：

```
a = {1: ((1,1),999), 2: ((2,2),998), 3:((3,3),998)}
b = {1: ((4,4),997), 5:((5,5),996)}

def ret_obj(tpl,**kwargs):
    for k,v in kwargs.iteritems():
        for k2,v2 in v.iteritems():
            if tpl in v2:
                return (k,k2,v2[1])

ret_obj((1,1),a=a,b=b)
#returns ('a', 1, 999) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-13T17:49:53.170

十分感谢大家。有一些非常有价值的结果，但我非常喜欢 ilmiacs、volatility 和 root 的方法，因为它们简单且易于实现。我很高兴你帮我解决了这个问题，我可以解决我的项目。干杯！！

# jquery - Ipad/Iphone 双击/点击问题

> ID：14279474
> 
> 赞同：3
> 
> 时间：2013-01-11T13:46:17.230
> 
> 标签：jquery, iphone, ipad

有人，让我知道一些关于 Ipad/Iphone 中双击/点击问题的想法。

我有一个在 iPhone 上呈现的 Web 应用程序。但是在页面上有这样的元素可以执行悬停。当我要单击元素时，它会影响它必须单击两次。

我有一个[链接](http://www.nczonline.net/blog/2012/07/05/ios-has-a-hover-problem/)，但我也有在桌面上呈现的相同应用程序。

你能建议我好的解决方案吗？

# php - 如何将变量会话从一个页面发送到另一个页面

> ID：14279478
> 
> 赞同：-1
> 
> 时间：2013-01-11T13:46:43.763
> 
> 标签：php, html

> 在我的第一页上，我的会话通过 index.php 的标头在 log.php 上传递了 log.php，并且此页面包含代码

```
<a style="color:white; font-size:30px; text-decoration: none"  href="/mn.php">FR</a> 
```

> 在 mn.php 上，我回显了之前在 index.php 中声明的会话变量，但它没有回显任何内容。
> 
> > 在 mn.php 上

```
echo $_SESSION['login-id']; 
```

> > 但是当我从带有标头的 index.php 传递变量时，可以在 log.php 上评估变量

```
header('location: index.php'); 
```

> 那么，我们如何在不使用标题的情况下将这些会话从一个页面传递到另一个页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T13:47:30.390

`session_start();`在您尝试访问`$_SESSION`超级全局变量之前，您需要在每一页的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:05:28.880

您必须在访问任何会话变量之前使用 session_start() ，并且假设您想删除任何页面上的任何特定会话变量，那么您可以使用 unset() 方法。

[请在此处](http://www.w3schools.com/php/php_sessions.asp)检查基础知识。

# redirect - 在 Backbone.JS“同步”方法中处理 HTTP 302 错误和重定向

> ID：14279480
> 
> 赞同：4
> 
> 时间：2013-01-11T13:47:00.047
> 
> 标签：redirect, backbone.js, spring-security, http-status-code-302

我有一个受保护的 Backbone.js 应用程序（使用[Spring 安全性](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html)atm。），因此登录用户必须具有有效的会话 cookie (JSESSIONID)。现在，如果此会话无效（删除、过期等）并且用户尝试发出请求，Spring 安全性将返回 302 错误以尝试将用户重定向到登录表单。

正如[这个答案中所解释的](https://stackoverflow.com/questions/10249310/backbone-sync-get-all-response-error-status-codes)，这个 302 响应由浏览器处理（它没有到达我的应用程序）所以返回给我的应用程序的是一个 200 OK 响应，内容类型 =“text/html”（包含登录表单） .

这是一个问题，因为当我的 Backbone 模型尝试同步到 url 时，它需要 JSON。如果在没有有效会话的情况下发生此同步，则在需要“application/json”时返回 200“text/html”响应，从而在`jQuery.extend.parseJSON`.

在[这个问题/答案](https://stackoverflow.com/questions/10237103/catching-302-error-and-then-redirecting-in-backbone-js-sync-method-override)的大力帮助下，我重写了该`Backbone.sync`方法以使用我自己的错误处理。但是，由于 302 从未到达我的错误处理程序，我无法自己覆盖重定向。

[我的情况与这个问题](https://stackoverflow.com/questions/10237103/catching-302-error-and-then-redirecting-in-backbone-js-sync-method-override)非常相似，但是从未发布过该问题的最终解决方案。有人可以帮我找出确保重定向到登录页面的理想方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:10:41.637

`HTTP 200 OK`您应该将 Spring Security 配置为返回`HTTP 401 Unauthorized`未经身份验证的 AJAX 请求，而不是返回登录页面。您可以通过检查`X-Requested-With: XMLHttpRequest`请求标头来检测 AJAX 请求（与普通页面请求相反）。

您可以使用全局[`$.ajaxError`](http://api.jquery.com/ajaxError/)处理程序来检查`401`错误并重定向到那里的登录页面。

这就是我们实现它的方式，并且效果很好。不过，我不是 Spring 人，所以我对 Spring Security 配置无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:18:56.433

**编辑。**而不是自定义 coockie，最好使用@fencliff 提供的解决方案。

我认为您可以使用 XHR 的其他一些领域来检测这种情况。一个特殊的饼干可能会成功。

您可以从 Spring Security 端定义自己的身份验证失败处理程序。在重定向到登录页面的那一刻，您将能够向 HttpServletResponse 添加一些 cookie。您的自定义 Backbone.sync 方法将检查此 cookie。如果它存在，它将为这种情况启动您的自定义处理程序（不要忘记同时删除 cookie）。

```
<sec:http ... >
    <sec:form-login login-page='/login.html' authentication-failure-handler-ref="customAuthenticationFailureHandler" />
</sec:http>

<bean id="customAuthenticationFailureHandler" class="com.domain.CustomAuthenticationFailureHandler" /> 
```

CustomAuthenticationFailureHandler 必须实现 org.springframework.security.web.authentication.AuthenticationFailureHandler 接口。您可以添加您的 coockie，然后调用默认的 SimpleUrlAuthenticationFailureHandler.onAuthenticationFailure(...) 实现。

# scala - 在测试中获取用于在 Akka 中创建演员的类的实例

> ID：14279482
> 
> 赞同：5
> 
> 时间：2013-01-11T13:47:02.343
> 
> 标签：scala, integration-testing, akka, actor

使用 ActorSystem.actorOf 创建演员时，如何获取传递给 Props 的类的实例？我需要它来进行单元测试以获取对参与者的某些属性的引用，因此参与者在与测试相同的 JVM 中是本地的。

我不想使用 Akka 的测试框架，因为我需要演员直播，这是一种集成测试。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T16:00:47.390

Actor 子类的底层实例与您完全隔离开来，如果不使用 Akka 代码本身，您将无法获得它。如果您查看 ActorRef 的定义，您会发现它甚至不包含对 Actor 的引用！

同样，您不能直接使用实例化 Actor 子类`new`。

我猜 Akka 设计师对 ActorRef / Actor 防火墙是认真的......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T16:32:03.940

[Akka`Testkit`](http://doc.akka.io/docs/akka/2.0.2/scala/testing.html#Integration_Testing_with_TestKit)是为集成测试而设计的。要访问参与者的内部状态，请向它发送一条消息来请求它。您的演员可以回复发件人，即`TestKit`'s `testActor`。

# android - 谷歌日历周视图

> ID：14279483
> 
> 赞同：0
> 
> 时间：2013-01-11T13:47:08.103
> 
> 标签：android, google-calendar-api

我正在开发一个需要
1.WeekView 布局显示存储的事件（本地数据库并与谷歌日历同步）
2.在本地数据库中添加事件，事件应该与本地日历同步（谷歌日历）就是这样......我试过了很多事情，但没有成功...我尝试了 AnCal，但 Google 日历没有同步选项。![在此处输入图像描述](../Images/1fa5bc811538f2ac0edaa40995829270.png)

我有 AnCal，它工作正常，问题是我需要与谷歌日历同步，但它没有......是否有任何带有谷歌同步的 AnCal..请建议我使用带有谷歌同步的示例 cal APP...

# java - 从远程服务器获取环境变量

> ID：14279493
> 
> 赞同：0
> 
> 时间：2013-01-11T13:47:32.267
> 
> 标签：java, ssh

Java中有没有办法从远程服务器获取环境变量？我目前正在执行：

```
Runtime.getRuntime().exec(new String[] { 
     "ssh", "myuser@myserver", "source myenvfile; echo $MY_VAR" 
}); 
```

~~但它返回空白（尽管我的变量应该包含一些东西）。~~

~~我得到命令的结果，例如`df`但没有`echo`。有人可以告诉我我做错了什么吗？~~

**编辑：**有没有人有更好的解决方案来做到这一点？

**注意：**我想避免使用 SSH 库。

预先感谢您帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:11:12.510

实际上有一个更好的解决方案：使用[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)。

`Runtime.getRuntime().exec()`有[很多问题](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html)，使其不太适合流程执行。

# wordpress - 每天一次随机化 Wordpress 发布时间或随机帖子

> ID：14279500
> 
> 赞同：0
> 
> 时间：2013-01-11T13:47:56.137
> 
> 标签：wordpress, posts

我真的为此做了我的搜索作业，但我仍然没有解决方案。

我有一个基于 wordpress 引擎的视频管站点，它显示 12 个 vid 缩略图（帖子）/页面。但它出现在发布时间顺序中（与 wordpress 一样），但在这个站点中它不是那么好。我希望帖子每天一次随机（随机发布日期）。

我可以整合

query_posts($query_string . '&orderby=rand');

但这只是解决方案的一半，因为这会在每个页面加载和每个页面上随机发布帖子，因此第 1 和第 2 页上可能会出现相同的视频。

因此，我需要一种解决方案，可以一次将整个站点上的帖子随机化，并且每天一次。

最好的方法是以某种方式改变每个帖子的发布时间的发布日期。

我不敢相信没有插件可以解决这个问题：）谢谢转发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-29T13:08:29.917

所以这里有一个随机发布日期的小脚本。

```
$date_format = 'Y-m-d H:i:s';
$date1       = date( $date_format, strtotime("-1 year", time()) );
$date2       = date( $date_format, time() );
$post_type   = 'post'; // post, page, product or some other custom post type

// Get all the posts
$posts = get_posts( array( 
        'numberposts' => -1, // get ALL posts
        'post_status' => 'any', // published, pending, draft, future, trash
        'post_type'   => $post_type 
  ));

foreach( $posts as $post ) {

  //* Generate a random post dates
  $random_date = mt_rand( strtotime( $date1 ), strtotime($date2) );

  //* Format the date that WordPress likes
  $post_date = date( $date_format, $random_date );

  // We only want to update the post date
  $update = array(
        'ID'            => $post->ID,
        'post_date'     => $post_date,
        'post_date_gmt' => null,
  );

  //* Update the post
  wp_update_post( $update );

} 
```

奥尔多这个线程很老了，我希望这对将来寻找这个答案的人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:04:34.210

由于您假设您的查询是随机的，因此 Wordpress 无法避免在不同页面中显示相同的内容。

# c - 分配的堆栈空间没用？

> ID：14279507
> 
> 赞同：13
> 
> 时间：2013-01-11T13:48:40.873
> 
> 标签：c, assembly, x86, stack

为什么这个函数在调用之前分配了比它需要的更多的堆栈空间`gets()`？

```
echo:
  pushl  %ebp
  movl   %esp, %ebp
  pushl  %ebx
  leal   -8(%ebp), %ebx
  subl   $20,  %esp       <-- Why so much space?
  movl   %ebx, (%esp)
  call   gets
  ... 
```

对应的C代码：

```
void echo()
{
  char buf[4];
  gets(buf);
  puts(buf);
} 
```

为什么在缓冲区和获取的参数之间有额外的三个单词的空间？

[![堆](../Images/2d8f8706c6b5f6a70f0ea80b28da34aa.png)](https://i.stack.imgur.com/5OLQ5.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T13:59:49.550

《计算机系统》一书中有两句话。“gcc 遵循 x86 编程准则，即函数使用的总堆栈空间应为 16 字节的倍数。” 和“包括保存的 %ebp 的 4 个字节和返回地址的 4 个字节”

# string - 使用 fortran77 将文本文件读入字符串

> ID：14279512
> 
> 赞同：0
> 
> 时间：2013-01-11T13:48:48.757
> 
> 标签：string, file, text, fortran77

是否可以使用 fortran77 将文本文件读取为字符串。我实际上有一个以下格式的文本文件

```
Some comments
Some comments

n1  m1  comment_with_unknown_number_of_words
..m1 lines of data..

n2  m2  comment_with_unknown_number_of_words
..m2 lines of data..
and so on 
```

而 n1,n2.. 是对象的顺序。m1, m2,..分别是包含这些对象数据的行数。我还想存储每个对象的评论以供进一步调查。

我该如何处理？非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:28:14.147

我不敢相信没有人为此打电话给我。我很抱歉，这实际上只是抓住了评论的第一个字……

------------原始答案----

不推荐F77，但这也不是什么棘手的问题。只需声明一个足够长的 char 变量来保存最长的评论并使用列表定向读取。

```
integer m1,n1
char*80 comment

...
read(unit,*)m1,n1,comment 
```

如果您想在不填充一堆额外空格的情况下将其写回，那会有点努力，但几乎不是世界末日。

在 f77 中你根本不能做的是辨别你的文件是否在行尾有尾随空格，除非你去直接访问读取。

------------改进的答案

您需要做的是将整行作为字符串读取，然后从字符串中读取整数：

```
read(unit,'(a)')comment
read(comment,*)m1,n1 
```

此时`comment`包含整行，包括您的两个整数（也许这将为您完成这项工作）。如果您想提取实际的字符串，则需要进行一些编码（我有一个约 40 行的子程序将字符串拆分为单词）。如果有兴趣，我可以发布，但我更倾向于像其他人一样鼓励您查看您的代码是否可以与更现代的编译器一起使用。

# php - PHP不会将文本区域发送到文件

> ID：14279515
> 
> 赞同：1
> 
> 时间：2013-01-11T13:48:59.033
> 
> 标签：php, html, scripting

我现在对 Jquery 有所了解，但想将文本区域保存到 txt 文件中。最终目标是能够将文本文件上传到同一个地方。我的代码中缺少什么？

不知道我在哪里定义了这段代码中的文本区域，或者它是否应该在另一个文件中，或者 html 文件是否应该有 php 的后缀？

下面的欢呼是我对 php.ini 的尝试。

代码

```
<?php
    if(isset($_POST['submit_save'])) {
        $file = "output.txt";
        $output = $_POST['output_str'];
        file_put_contents($file, $output);
        $text = file_get_contents($file);

        header("Content-type: application/text");
        header("Content-Disposition: attachment; filename=\"$file\"");
        echo $text; 
    }  
    else 
    {    
        $_POST['output_str'] = "";
    }
?>

</head>

<body>
    <input id="submit_save" type="button" value="save" />
    </br></br></br>
    <div id="opt"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:53:09.380

`$_POST`是为了名字。您需要将名称添加到`#submit_save`

```
<input name="submit_save" id="submit_save" type="button" value="save" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:55:31.567

使用 readfile 功能，不要忘记“退出”，以免损坏文件。就像[Enve 所说](https://stackoverflow.com/a/14279571/246263)，POST 数组键是 html“名称”。

这是手册页中的一个示例：

```
<?php
$file = 'monkey.gif';

if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
} 
```

来源： http: [//php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:04:24.103

您的 PHP 脚本在您的网络服务器上运行，而不是在浏览器中。脚本的结果就是浏览器接收到的！

在阅读您的问题时，（对我来说）不清楚您是想将输入的数据（文本区域的）作为**文件**还是作为**HTML 页面**发送到浏览器。你似乎两者都想要，这是不可能的，选择一个。

[Fab Sa](https://stackoverflow.com/a/14279605/246263)已经演示了如何从 PHP 向浏览器发送**文件**，所以我不再讨论这个。

**要在HTML 页面**的文本区域中填写输入的数据，您必须`<textarea>`在 HTML 中添加 -tag `<form>`。像这样的东西：

```
<form method="post" action="<?= $PHP_SELF ?>">
<textarea name="output_str"><?= $_POST['output_str'] ?></textarea>
<input id="submit_save" name="submit_save" type="button" value="save" />
</form> 
```

并**删除**这部分代码（部分将数据作为文件发送）：

```
 $text = file_get_contents($file);
    header("Content-type: application/text");
    header("Content-Disposition: attachment; filename=\"$file\"");
    echo $text; 
```

注意：出于安全原因，您不应该在**未**[消毒](https://stackoverflow.com/questions/129677/whats-the-best-method-for-sanitizing-user-input-with-php)`$_POST['output_str']`的情况下使用它（我在示例中省略了以保持清晰）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T14:10:48.377

我想你正在尝试这样的事情。

```
<?php

  if(isset($_POST['textfield'])) {
    $file = "output.txt";
    $output = htmlspecialchars ($_POST['textfield'] );
    file_put_contents($file, $output );
    $text = file_get_contents($file);

    header("Content-type: application/text");
    header("Content-Disposition: attachment; filename=\"$file\"");
    echo $text;
    exit;

  }
?>

<html>
<head>
    <title>Your app</title>
</head>

<body>
  <form method="POST">
    <textarea name="textfield"></textarea>
    <input id="submit_save" type="button" value="save" />
  </form>

</body>
</html> 
```

# ios - 返回 JSON Appcelerator 云服务

> ID：14279517
> 
> 赞同：1
> 
> 时间：2013-01-11T13:49:06.493
> 
> 标签：ios, xcode, appcelerator

[我使用此代码使用 Cocoa SDK https://github.com/cocoafish/cocoafish-ios-sdk](https://github.com/cocoafish/cocoafish-ios-sdk)在 ACS（Appcelerator 云服务）中为自定义对象获取 Json

```
if ([response.meta.methodName isEqualToString:@"showObjects"]) {
  NSArray *institucional = [response.response objectForKey:@"Institucional"];
  NSString *strinstitucional  = [institucional objectAtIndex:0];
} 
```

我的问题是 NSString strinstitucional JSON 无效。他更改 : for = 并删除某些参数的引号。这个对吗？

我是客观的菜鸟

谢！

# hadoop - Pig 中的条件 SUM

> ID：14279519
> 
> 赞同：1
> 
> 时间：2013-01-11T13:49:18.050
> 
> 标签：hadoop, apache-pig

我正在使用三元运算符`SUM()`有条件地在操作中包含值。这是我的做法。

```
GROUPED = GROUP ALL_MERGED BY (fld1, fld2, fld3);

REPORT_DATA = FOREACH GROUPED
              {     GENERATE group,
                    SUM(GROUPED.fld4 == 'S' ? GROUPED.fld5 : 0) AS sum1,
                    SUM(GROUPED.fld4 == 'S' ? GROUPED.fld5 : (GROUPED.fld5 * -1)) AS sum2;
               } 
```

架构`ALL_MERGED`是

```
{ALL_MERGED: {fld1:chararray, fld2:chararray, fld3:chararray, fld4:chararray: fld5:int}} 
```

当我执行此操作时，它给了我以下错误：

```
ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1000: Error during parsing. Invalid alias: SUM in {group: (fld1:chararray, fld2:chararray, fld3:chararray), ALL_MERGED: {fld1:chararray, fld2:chararray, fld3:chararray, fld4:chararray: fld5:int}} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:35:53.680

`SUM`是一个以包为输入的 UDF。您正在做的事情有很多问题，我怀疑它会帮助您查看关于 Pig 的良好参考。我推荐[Programming Pig](http://ofps.oreilly.com/titles/9781449302641/)，可在线免费获得。首先，`GROUPED`有两个字段：一个被调用的元组`group`和一个被调用的包`ALL_MERGED`，这是错误消息试图告诉你的。（我说“尝试”是因为 Pig 错误消息通常很神秘。）

此外，您不能像您希望的那样将表达式传递给 UDF。相反，您必须先访问`GENERATE`这些字段，然后再传递它们。尝试这个：

```
ALL_MERGED_2 =
    FOREACH ALL_MERGED
    GENERATE
        fld1 .. fld5,
        ((fld4 == 'S') ? fld5 : 0) AS sum_me1,
        ((fld4 == 'S') ? fld5 : fld5*-1) AS sum_me2;

GROUPED = GROUP ALL_MERGED_2 BY (fld1, fld2, fld3);
DATA =
    FOREACH GROUPED
    GENERATE
        group,
        SUM(ALL_MERGED_2.sum_me1) AS sum1,
        SUM(ALL_MERGED_2.sum_me2) AS sum2; 
```

# jquery - 如何修复jqueryUI容差：排序动画时相交

> ID：14279525
> 
> 赞同：2
> 
> 时间：2013-01-11T13:49:39.143
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我有一个自定义的动画排序，唯一的问题是选项

```
tolerance : "intersect" 
```

没有按预期运行。我期望的是，当一个元素被拖动到另一个元素上时，重叠的元素被拖动的元素重叠 +50%，排序开始。

然而，这似乎是 jqueryUI 中的一个错误，它实际上需要与 intersect 100% 重叠而不是 50%。

我在这个线程中找到的解决方案不适用于我的代码，因为我在排序时使用克隆来为元素设置动画。

[jQuery UI 可排序容差选项未按预期工作](https://stackoverflow.com/questions/10637095/jquery-ui-sortable-tolerance-option-not-working-as-expected)

鉴于我的情况和我的代码，我该如何解决这个问题？

是否有已知的解决方法？

我意识到这是同一个问题，但我的情况不同，也许有更好的方法来解决这个问题，然后是旧问题。

这是我的代码：

[http://jsbin.com/otoquh/19/edit](http://jsbin.com/otoquh/19/edit)

```
$("#original_items li").each(function(){
  var item = $(this);
  var item_clone = item.clone();
  item.data("clone", item_clone);
  var position = item.position();
  item_clone.css("left", position.left);
  item_clone.css("top", position.top);
  $("#cloned_items").append(item_clone);
});

$("#original_items").sortable({
  start: function(e, ui) {
    ui.helper.addClass("exclude-me");
    $("#original_items li:not(.exclude-me)").css("visibility", "hidden");
    ui.helper.data("clone").hide();

  },
stop: function(e, ui){
  $("#original_items li.exclude-me").each(function() {
    var item = $(this);
    var clone = item.data("clone");
    var position = item.position();
    clone.css("left", position.left);
    clone.css("top", position.top);
    clone.show();
    item.removeClass("exclude-me");

  });
  $("#original_items li").css("visibility", "visible");
},
  change: function(e, ui) {
    $("#original_items li:not(.exclude-me, .ui-sortable-placeholder)").each(function() {
      var item = $(this);
      var clone = item.data("clone");
      var position = item.position();
      clone.stop(true, false);
      clone.animate({
        left: position.left,
        top: position.top
      }, 500);

    });
  },
  revert: 500,
  axis: "y"
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T23:34:30.467

尝试`tolerance`与`cursorAt`.

我对您的代码进行了以下更改：

```
$("#original_items").sortable({
  tolerance:"pointer",
  cursorAt:{ top: 50 },
  start: function(e, ui) {
    ui.helper.addClass("exclude-me");
    $("#original_items li:not(.exclude-me)").css("visibility", "hidden");
    ui.helper.data("clone").hide();

  },
stop: function(e, ui){
  $("#original_items li.exclude-me").each(function() {
    var item = $(this);
    var clone = item.data("clone");
    var position = item.position();
    clone.css("left", position.left);
    clone.css("top", position.top);
    clone.show();
    item.removeClass("exclude-me");

  });
  $("#original_items li").css("visibility", "visible");
},
  change: function(e, ui) {
    $("#original_items li:not(.exclude-me, .ui-sortable-placeholder)").each(function() {
      var item = $(this);
      var clone = item.data("clone");
      var position = item.position();
      clone.stop(true, false);
      clone.animate({
        left: position.left,
        top: position.top
      }, 500);

    });
  },
  revert: 500,
  axis: "y"
}); 
```

演示：http: [//jsbin.com/otoquh/23/edit](http://jsbin.com/otoquh/23/edit)

希望这会有所帮助，如果您有任何问题，请告诉我！

* * *

链接：

*   [http://api.jqueryui.com/sortable/#option-cursorAt](http://api.jqueryui.com/sortable/#option-cursorAt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T17:22:48.227

发生的事情是光标需要超过元素顶部（或左/右等）的 50%。这就是为什么您似乎必须将其拖过元素本身的原因。

我个人更喜欢这个`tolerance : "pointer"`选项，它允许元素在光标进入目标元素后立即替换目标元素！可能是也可能不是您正在寻找的东西。

[https://api.jqueryui.com/sortable/#option-tolerance](https://api.jqueryui.com/sortable/#option-tolerance)

# visual-studio-lightswitch - 如何存储其他用户信息

> ID：14279526
> 
> 赞同：1
> 
> 时间：2013-01-11T13:49:39.360
> 
> 标签：visual-studio-lightswitch

在我的 Lightswitch 应用程序中，我必须为用户存储附加信息，例如地址和电话号码。这可能吗？如果可以，该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:20:07.993

您已阅读通过 SecurityData.UserRegistrations Table和 Richard Waddell 的帖子[在当前用户上创建关系。](http://lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/19/LightSwitch-Creating-a-Relationship-on-current-User-through-SecurityData-UserRegistrations-Table.aspx)

本文介绍了如何在 lightswitch 中扩展用户信息。

基本上你应该创建一个具有`username`属性的模型。此属性绑定到灯开关表单用户。来自迈克尔的帖子：

```
 partial void MyProfiles_Inserting(MyProfile entity)

    {

        var reg = (from regs in 
                      this.DataWorkspace.SecurityData.UserRegistrations
                   where regs.UserName == entity.UserName
                   select regs).FirstOrDefault();

        if (reg == null)

        {

            var newUser = this.DataWorkspace.SecurityData
                              .UserRegistrations.AddNew();
            newUser.UserName = entity.UserName;
            newUser.FullName = entity.Name;
            newUser.Password = "changeme/123";
            this.DataWorkspace.SecurityData.SaveChanges();

        }

    } 
```

获取当前用户配置文件：

```
 MyProfile profile = (from persons in          
                             Application.Current.CreateDataWorkspace()
                                    .ApplicationData.MyProfiles
                              where persons.UserName == 
                                    Application.Current.User.Name
                              select persons).FirstOrDefault(); 
```

# android - 我在哪里可以在新的 Android 控制台中查看已停用的 APK？

> ID：14279528
> 
> 赞同：1
> 
> 时间：2013-01-11T13:49:52.263
> 
> 标签：android, google-play

在旧的 Android 控制台中，可以通过切换到高级模式来查看已停用的 APK。

![](../Images/21b2bf1eec53db2f12b9b03f0f5f9f2e.png)

在新控制台的 APK 选项卡中，我找不到非活动 APK。

![](../Images/3eb143af008b24daf3a35d5d6614e045.png)

有任何想法吗？？？

**编辑**

我已经上传了 2 个 APK 文件，但在新控制台中都看不到它们。您可以在第一张图像的旧控制台视图中看到它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:42:09.353

谷歌似乎在处理 APK 的方式上做了一些改变。**也就是说，在您首次发布应用程序之前**，您将无法查看已上传的 APK 。

我正在阅读他们有关新控制台的所有消息，但我从未阅读过有关此更改的信息。

因此，解决方案是**首先**发布应用程序，**然后**您才能查看所有 APK 并相应地处理它们。

# objective-c - 互联网连接丢失或应用程序关闭后，NSStream FTP 恢复文件上传

> ID：14279542
> 
> 赞同：2
> 
> 时间：2013-01-11T13:50:55.393
> 
> 标签：objective-c, cocoa

这就是我使用 NSStream 实现 FTP 文件上传的方式，它工作正常，没有问题，但我无法弄清楚如何恢复文件上传，以防连接丢失或用户在上传时不小心关闭了应用程序进行中。

```
@implementation QFTPOperation

-(id)uploadFile:(NSString *)filePath
{
    NSURL *localpath = [NSURL URLWithString:filePath];
    NSLog(@"file url: %@",[localpath path]);

    if([[NSFileManager defaultManager] fileExistsAtPath:[localpath path]]) {
        NSLog(@"files exists");
    }

    self.readStream = [NSInputStream inputStreamWithFileAtPath:[[NSURL URLWithString:filePath] path]];
    [self.readStream open];
    NSURL *uploadUrl = [NSURL URLWithString:@"ftp://domain.example.com/test.png"];

    uploadUrl = CFBridgingRelease(
                            CFURLCreateCopyAppendingPathComponent(NULL, (__bridge CFURLRef) uploadUrl, (__bridge CFStringRef) [filePath lastPathComponent], false)
                            );

    NSLog(@"upload url: %@",uploadUrl);
    self.writeStream = CFBridgingRelease(
                      CFWriteStreamCreateWithFTPURL(NULL, (__bridge CFURLRef) uploadUrl)
                      );

    [[self writeStream] setDelegate:self];
    [[self writeStream] scheduleInRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode];
    [[self writeStream] setProperty:@"foo" forKey:(id)kCFStreamPropertyFTPUserName];
    [[self writeStream] setProperty:@"bar" forKey:(id)kCFStreamPropertyFTPPassword];

    [[self writeStream] open];

    while ([[self writeStream] hasSpaceAvailable])
    {
        NSLog(@"yes ready");
        NSInteger bufferOffset = 0;
        NSInteger bufferLimit = 0;
        UInt8 buffer[1024];

        if (bufferOffset == bufferLimit) {
            NSInteger   bytesRead;

            bytesRead = [self.readStream read:buffer maxLength:1024];

            if (bytesRead == -1) {
                NSLog(@"faild to readstream");
                [self closeStream];
            } else if (bytesRead == 0) {
                NSLog(@"read completed");
                [self closeStream];
            } else {
                NSLog(@"bytes read");
                bufferOffset = 0;
                bufferLimit  = bytesRead;
            }
        }

        if (bufferOffset != bufferLimit) {
            NSLog(@"yes waiting to write");
            NSInteger   bytesWritten;
            bytesWritten = [self.writeStream write:&buffer[1024] maxLength:bufferLimit - bufferOffset];
            if (bytesWritten == -1) {
                NSLog(@"failed to write");
                [self closeStream];
            } else {
                bufferOffset += bytesWritten;
            }
        }

    }

    return self;
}

- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode
{
    switch (eventCode) {
        case NSStreamEventOpenCompleted:
            NSLog(@"yes stream open");
            break;
        case NSStreamEventHasBytesAvailable:
            break;
        case NSStreamEventHasSpaceAvailable: {
                NSLog(@"yes space available");
            NSInteger bufferOffset = 0;
            NSInteger bufferLimit = 0;
            UInt8 buffer[1024];

            if (bufferOffset == bufferLimit) {
                NSInteger   bytesRead;

                bytesRead = [self.readStream read:buffer maxLength:1024];

                if (bytesRead == -1) {
                    NSLog(@"faild to readstream");
                    [self closeStream];
                } else if (bytesRead == 0) {
                    NSLog(@"read completed");
                    [self closeStream];
                } else {
                    NSLog(@"bytes read");
                    bufferOffset = 0;
                    bufferLimit  = bytesRead;
                }
            }

            if (bufferOffset != bufferLimit) {
                NSLog(@"yes waiting to write");
                NSInteger   bytesWritten;
                bytesWritten = [self.writeStream write:&buffer[1024] maxLength:bufferLimit - bufferOffset];
                if (bytesWritten == -1) {
                   NSLog(@"failed to write");
                    [self closeStream];
                } else {
                    bufferOffset += bytesWritten;
                }
            }

        }
            break;
        case NSStreamEventEndEncountered:
            NSLog(@"error occurred");
            [self closeStream];
            break;
        case NSStreamEventErrorOccurred:
            NSLog(@"error occurred");
            [self closeStream];
            break;
        case NSStreamEventNone:
            break;
        default:
            break;
    }
}

-(void)closeStream
{
    [[self writeStream] removeFromRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode];
    [[self writeStream] setDelegate:nil];
    [[self writeStream] close];
    self.writeStream = nil;

    [[self readStream] close];
    self.readStream = nil;
} 
```

假设用户在中间退出应用程序时上传 200 MB，假设上传了 100 MB。我想从 100 MB 恢复上传，而不是重新开始。

任何帮助提前谢谢

# jquery - 最近的 flickrAPI 问题：photo.description 未定义？

> ID：14279544
> 
> 赞同：0
> 
> 时间：2013-01-11T13:51:17.757
> 
> 标签：jquery, json, api, flickr

我有两个网站通过使用 JSON 和 jQuery 的简单 FlickrAPI 调用来填充画廊。在过去的几年里，他们一直在愉快地相处，但他们都在上周开始犯错误，导致画廊人数减少。

我已将问题与对`photosets.getInfo.photo.description`. 其他请求工作正常：请求带有“特色”标签的图像，文本描述，所有工作都按预期工作。

这是显式调用：

```
$.getJSON('http://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key=' + apiKey + '&photo_id=' + rPhoto.id + ' &format=json&jsoncallback=?', function(data){
    var PhotoDescription=data.photo.description._content.replace(/\n/g, "<br />");
    ... 
```

}

错误内容如下：

```
Uncaught TypeError: Cannot read property 'description' of undefined 
```

由于这个问题同时出现在多个站点上，我想我可以假设 Flickr 方面发生了一些我需要以某种方式适应的变化，但我找不到任何关于这种变化的文档，或者任何其他正在经历的人同样的问题。

非常感谢任何提示或帮助！斯泰西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T05:08:08.287

看起来请求中也需要图像机密。更新了 JSON 请求以反映这一点：

```
$.getJSON('http://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key=' + apiKey + '&photo_id=' + rPhoto.id + '&secret=' + rPhoto.secret + '&format=json&jsoncallback=?', function(data){...} 
```

现在似乎工作正常。（还为将来的问题添加了错误处理。）

# c# - 交易上的奇怪错误->必须关闭使用非查询获取阅读器

> ID：14279546
> 
> 赞同：0
> 
> 时间：2013-01-11T13:51:27.720
> 
> 标签：c#, transactions, database, datareader, npgsql

我正在用 C# 和 POSTGRESQL 开发一个客户端。

它需要解析一些文本并在表中正确插入数据，所以我们有一个解析器，它为每个表提供了一个字典（目前为 4 个）。

**所以我们有一个线程，它在队列中插入 ConcurrentQueue 上的那些字典。**

现在，我们有两个计时器：

1)**每 10 秒提交一个打开的事务并重新创建一个**

这些是方法：

```
 void transactionTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
            try
            {
                Commit();
            }
            catch (Exception ex)
            {
                Logger.Log(Logger.LogType.ERROR, ex);
                Rollback();
            }

            Transaction();
        }
    }
    public void Commit()
    {
        if (trans != null)
        {
            trans.Commit();
            trans.Dispose();
            trans = null;
        }
    }
    public void Transaction()
    {
        if (dbCon == null || (dbCon != null && dbCon.State != ConnectionState.Open))
            dbCon = Connection;

        if (trans == null)
            trans = dbCon.BeginTransaction();
    }
    public void Rollback()
    {
        if (trans != null)
        {
            trans.Rollback();
            trans.Dispose();
            trans = null;
        }
    } 
```

2）**在队列中选择一百个数据并使用如下参数进行巨大的插入**（不是 100* 插入一个）：

```
 insert into Tabletest1_HandsData( handDataId, handData) values( @handDataId0,   @handData0),( @handDataId1, @handData1),( @handDataId2, @handData2),( @handDataId3, @handData3) .... 
```

通过使用这个助手

```
 public bool Insert(String tableName, Dictionary<String, object> data, bool usingTransaction = false)
    {
        Boolean returnCode = true;
        var sql = GetSQL(tableName, data);
        try
        {
            int rowsUpdated = -1;
            var conn = (!usingTransaction) ? Connection : dbCon;
            DbCommand mycommand = GetCommand(conn, sql);
            GetCommandByDictionary(mycommand, data);
            rowsUpdated = mycommand.ExecuteNonQuery();
            if (!usingTransaction)
            {
                conn.Close();
                conn.Dispose();
            }
        }
        catch (Exception ex)
        {
            Logger.Log(Logger.LogType.ERROR, ex);
            returnCode = false;
        }
        return returnCode;
    }
    protected override void GetCommandByDictionary(DbCommand cmd, Dictionary<string, object> data)
    {
        foreach (var val in data)
            (cmd as NpgsqlCommand).Parameters.AddWithValue(val.Key.ToString(), val.Value);
    } 
```

因此，我们解析并插入一个队列，然后每 3 秒我们选择其中的 100 个并插入，每 10 秒提交并重新创建一个事务

我的错误是 ExecuteNonQuery 给了我：

```
 There is already an open DataReader associated with this Command which must be closed first. 
```

为什么会这样？

我可以借此机会问你，我怎样才能做得更好？请随意侮辱我，我已经尝试了很多东西

谢谢卢卡

# hadoop - Hadoop Pig GROUP by id，获取 owner_id？

> ID：14279549
> 
> 赞同：0
> 
> 时间：2013-01-11T13:51:37.053
> 
> 标签：hadoop, apache-pig

在 Hadoop 中，我有很多看起来像这样： `(item_id,owner_id,counter)`- 可能有重复，但总是`item_id`有相同的`owner_id`！

我想获得`counter`每个的总和，`item_id`所以我有以下脚本：

```
alldata = LOAD '/path/to/data/*' USING D; -- D describes the structure
known_items = FILTER alldata BY owner_id > 0L;
group_by_item = GROUP known_data BY (item_id);
data = FOREACH group_by_item GENERATE group AS item_id, OWNER_ID_COLUMN_SOMEHOW, SUM(known_items.counter) AS items_count; 
```

问题在于，`FOREACH`如果我想采取`known_items.owner_id`- 那将是一个包含所有分组之和的元组`item_id`。获得第一个所有者的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:22:10.210

如果您认为每个`item_id`人都有相同的假设`owner_id`是正确的，那么最简单的解决方案会给您正确的答案，并且如果不是，则会让您知道：将`owner_id`包括为组的一部分。

```
alldata = LOAD '/path/to/data/*' USING D; -- D describes the structure
known_items = FILTER alldata BY owner_id > 0L;
group_by_item = GROUP known_data BY (item_id, owner_id);
data = FOREACH group_by_item GENERATE FLATTEN(group), SUM(known_items.counter) AS items_count; 
```

# php - 用于从电子邮件标头获取 IP 地址的正则表达式

> ID：14279553
> 
> 赞同：0
> 
> 时间：2013-01-11T13:51:45.473
> 
> 标签：php, regex

> **可能重复：**
> [正则表达式匹配 DNS 主机名或 IP 地址？](https://stackoverflow.com/questions/106179/regular-expression-to-match-hostname-or-ip-address)

我需要正则表达式来从电子邮件标头中获取 IP 地址。收到的部分下有很多标题。

但我只想从具有这样模式的行中读取 ipaddress。

```
Received: from unknown 124.253.91.178 by rediffmail.com via HTTP; 11 Jan 2013 10:10:35 -0000 
```

我尝试了下面的正则表达式，但它返回了电子邮件标题文本的所有 IP 地址。

```
 preg_match_all("/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/", $this->email, $matches); 
```

我想 在一行中匹配单词和ip地址`Received:`。`from`IP 地址可以是 IPv6 或 IPv4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:53:44.643

您可以尝试使用以下正则表达式：

```
/^Received: .*?(\d{1,3}(?:\.\d{1,3}){3}))/ 
```

IPv4 和 IPv6 的正则表达式：

```
/^Received: .*?((?:\d{1,3}(?:\.\d{1,3}){3})|([a-z0-9]{4}(?::[a-z0-9]{4}){7}))/ 
```

# c++ - 绘制静止的背景

> ID：14279557
> 
> 赞同：0
> 
> 时间：2013-01-11T13:51:53.933
> 
> 标签：c++, algorithm, opengl, 3d

在我的程序中，我尝试使用图像并将其绘制为固定背景。前景确实有一些模型加载到相机中并且运行良好。

但是，当我应用背景图像时，整个模型和其他对象都不会出现，我只能看到背景图像出现在屏幕上。

我在绘制背景之前禁用了 Depth_Test，然后在绘制模型之前重新启用它。

```
glDisbale(GL_DEPTH_TEST);
bgImage.draw(0,0); //draw the background image. Width and height parameters previously while initializing image

glEnable(GL_DEPTH_TEST);
cam.begin();
//stuff drawn inside
cam.end(); 
```

还尝试清除`Depth Buffer/Depth Color bit`之后`bgImage.draw`但没有任何变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:56:25.903

您需要禁用深度写入，以便背景不会占用深度缓冲区。

```
glDepthMask(GL_FALSE);
background();
glDepthMask(GL_TRUE); 
```

或者您在绘制背景后仅清除深度缓冲区：

```
glDisable(GL_DEPTH_TEST);
background();  // instead of clearing the color
glClear(GL_DEPTH_BUFFER_BIT);
glEnable(GL_DEPTH_TEST); 
```

# android - 如何保留之前加载的图像？

> ID：14279559
> 
> 赞同：1
> 
> 时间：2013-01-11T13:52:04.173
> 
> 标签：android, android-image

我有3个碎片。这些片段被放置到 TabsAdapter 中，用于在这些片段之间切换。

问题在于，当应用程序加载并创建 fragmentA 视图时，它会下载图像，然后更改图像视图：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    this.myFragmentView = inflater.inflate(R.layout.foto_setmana, container, false); //Això conté els "edittext i altres"
        new DownloadImageTask(myFragmentView).execute("http://192.168.1.35/testing/fotos/foto1.jpg");
    }
} 
```

DownloadImageTask 中的代码：

```
public class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {
View myfragmentview;

public DownloadImageTask(View myfragmentview) {
    this.myfragmentview=myfragmentview;
}

protected Bitmap doInBackground(String... urls) {
    String urldisplay = urls[0];
    Bitmap mIcon11 = null;
    try {
        InputStream in = new java.net.URL(urldisplay).openStream();
        mIcon11 = BitmapFactory.decodeStream(in);
        Log.d("debugging","mIcon11"+mIcon11.getHeight());
    } catch (Exception e) {
        Log.e("Error", e.getMessage());
        e.printStackTrace();
    }
    return mIcon11;
}

protected void onPostExecute(Bitmap result) {
    ImageView imv=(ImageView)this.myfragmentview.findViewById(R.id.imageView1);
    imv.setImageBitmap(result);
} 
```

所以这就是正在发生的事情： ![在此处输入图像描述](../Images/ef388527058b6be71473476dbc853c7a.png)

1.- 我点击应用程序 2.- 应用程序加载。此屏幕是在应用程序有时间检索图像之前拍摄的。3.- 当它检索图像时，它会显示出来。4.- 我将片段滑动到下一个片段。5.- 第二个片段 6.- 我再次滑动到第三个片段。7\. 第三个片段。8.我回到第一个片段，图像不再加载。显然我不会再次调用 DownloadImageTask，因为它会降低很多用户体验。

**我应该怎么做才能保留图像？**

哦，顺便说一句。如果我只是从第 1 次滑动到第 2 次，则图像不会“卸载”，如果我转到第 3 次或更远，就会发生这种情况。知道为什么会这样吗？我只是对此感到好奇。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:57:13.833

使用 LruCache 创建位图的 RAM 缓存。

这个很棒的 Google IO 演讲准确地解释了如何使用它：http: [//youtu.be/gbQb1PVjfqM ?t=5m](http://youtu.be/gbQb1PVjfqM?t=5m)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:11:31.590

**我发现了一种工作方式：**

我们要做的是在片段上创建一个变量以了解我们是否下载，并创建另一个变量来保存位图，例如：

```
int downloaded;
Bitmap pictureSaved; 
```

然后我们在片段的“onAttach”方法上对其进行初始化。

```
@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    this.downloaded=0;
} 
```

之后，在“主代码”上：

```
if (this.downloaded==0){
//we're here if we didn't download yet
            new DownloadImageTask(myFragmentView, this).execute("http://192.168.1.33/testing/fotos/foto1.jpg");
            this.downloaded=1;
        } else if(this.downloaded==1) {
//we're here if we already downloaded.
            ImageView imv=(ImageView)myFragmentView.findViewById(R.id.imageView1);
            imv.setImageBitmap(this.pictureSaved);
        } 
```

DownloadImageTask 代码，应该下载图像，如您所见，我将其传递给他的构造函数“this”，因此我可以访问片段方法和变量。

我在片段中创建了一个方法来更新图片：

```
public void update(Bitmap updated){
    ImageView imv=(ImageView)myFragmentView.findViewById(R.id.imageView1);
    this.pictureSaved=updated;
    imv.setImageBitmap(this.pictureSaved);
    this.downloaded=1;
} 
```

DownloadImageTask 像这样调用片段的方法。变量：

```
MyFragment frag; 
```

构造函数：

```
public DownloadImageTask(View myfragmentview, MyFragmentA parent) {
    this.myfragmentview=myfragmentview;
    this.frag=parent;
} 
```

执行后：

```
protected void onPostExecute(Bitmap result) {
    frag.update(result);
} 
```

它完美地工作。

希望这可以帮助某人。

# python - os.environ['http_proxy'] 不工作

> ID：14279560
> 
> 赞同：3
> 
> 时间：2013-01-11T13:52:18.947
> 
> 标签：python

> **可能重复：**
> [是否可以在 python 中更改父进程的环境？](https://stackoverflow.com/questions/263005/is-it-possible-to-change-the-environment-of-a-parent-process-in-python)

我正在使用 python 2.4.3。我试图设置我的 http_proxy 变量。请看下面的例子，请让我知道出了什么问题。该变量是根据python设置的，但是当我退出交互模式时。http_proxy 变量仍未设置。我已经在脚本中尝试过，也尝试过使用其他变量，但我得到了相同的结果。操作系统中实际上没有设置任何变量。

```
Python 2.4.3 (#1, May  1 2012, 13:52:57)
Type "help", "copyright", "credits" or "license" for more information.
>>> import os
>>> os.environ['http_proxy']="abcd"
>>> os.system("echo $http_proxy")
abcd
0
>>> print os.environ['http_proxy']
abcd
>>>
user@host~$ echo $http_proxy

user@host~$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:59:38.220

当你运行这段代码时，你设置了环境变量，它的工作范围只在进程内。退出后（退出python的交互模式），这些环境就会消失。

正如您的代码“os.system("echo $http_proxy")”所示，如果要使用这些环境变量，则需要在进程内运行外部程序。这些变量将被转移到子进程中并可供它们使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:01:52.400

环境变量不是“全局设置数据库”；在这里设置环境在那里没有任何影响。

例外情况是调用其他程序的程序可以为其子程序提供不同的环境。

在 shell 中，当您键入

```
[~/]$ FOO=bar baz 
```

你是在告诉*shell*`baz`用一些额外的环境调用程序`FOO`。

您也可以在 python 中执行此操作，但更改`os.environ`不会有任何效果。该变量只包含一个常规的python dict，无论它是从什么环境开始的。您可以通过将替代值传递给`env`to来更改 python 将使用的环境[`subprocess.Popen`](http://docs.python.org/2/library/subprocess#subprocess.Popen)

# jsf - 如何使用 log4j 从第三方 jar 记录错误

> ID：14279563
> 
> 赞同：0
> 
> 时间：2013-01-11T13:52:32.840
> 
> 标签：jsf, jar, log4j

我有一个工作的 jsf 应用程序，其中 log4j 配置为将不同的消息记录到不同的日志文件中。但有时错误会记录到控制台而不是特定的日志文件。这主要是在我使用的第三方 jar 中发生空指针错误时。有没有办法配置 log4j，以便所有未专门发送到日志文件的错误都不会发送到控制台而是发送到常规日志文件？

```
 <?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "dtd/log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="false">
    <appender name="LogAppender" class="org.apache.log4j.RollingFileAppender">
        <param name="File" value="C:\\logs\\web.log"/>
        <param name="MaxFileSize" value="10000KB"/>
        <param name="MaxBackupIndex" value="10"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%x %-5p [%d{yyyyMMdd HH:mm:ss}] - %c:%L - %m%n"/>
        </layout>
    </appender>

    <appender name="WarnAppender" class="org.apache.log4j.RollingFileAppender">
        <param name="File" value="C:\\logs\\warn.log"/>
        <param name="Threshold" value="warn"/>
        <param name="MaxFileSize" value="10000KB"/>
        <param name="MaxBackupIndex" value="10"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%x %-5p [%d{yyyyMMdd HH:mm:ss}] - %c:%L - %m%n"/>
        </layout>
    </appender>

    <appender name="WSAppender" class="org.apache.log4j.RollingFileAppender">
        <param name="File" value="C:\\logs\\milesws.log"/>
        <param name="MaxFileSize" value="10000KB"/>
        <param name="MaxBackupIndex" value="10"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%x %-5p [%d{yyyyMMdd HH:mm:ss}] - %c:%L - %m%n"/>
        </layout>
    </appender>

    <appender name="AccessAppender" class="org.apache.log4j.RollingFileAppender">
        <param name="File" value="C:\\logs\\access.log"/>
        <param name="MaxFileSize" value="10000KB"/>
        <param name="MaxBackupIndex" value="10"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%x %-5p [%d{yyyyMMdd HH:mm:ss}] - %c:%L - %m%n"/>
        </layout>
    </appender>

    <logger name="be.sofico.api.ws">
        <level value="debug" />
        <appender-ref ref="WSAppender" />
    </logger>

    <logger name="be.sofico.web">
        <level value="debug" />
        <appender-ref ref="LogAppender" />
    </logger>

    <logger name="org.ajax4jsf.event">
        <level value="all" />
        <appender-ref ref="LogAppender" />
    </logger>

    <logger name="org.apache">
        <level value="info" />
        <appender-ref ref="LogAppender" />
    </logger>

    <logger name="javax.enterprise.resource.webcontainer.jsf.lifecycle">
        <appender-ref ref="LogAppender" />
    </logger>

    <logger name="javax.faces">
        <level value="debug" />
        <appender-ref ref="LogAppender" />
    </logger>

    <logger name="com.sun.faces">
      <level value="all"/>
      <appender-ref ref="LogAppender" />
    </logger>

    <logger name="org.apache.catalina">
      <level value="warn"/>
      <appender-ref ref="LogAppender" />    
    </logger>

    <logger name="AccessLog">
      <level value="info"/>
      <appender-ref ref="AccessAppender" />
    </logger>

    <root>
        <level value="debug"/>
        <appender-ref ref="WarnAppender" />
    </root>
</log4j:configuration> 
```

记录到控制台而不是任何日志文件中的错误

```
managedbean   E   <Null Message>
                                 com.sun.faces.spi.InjectionProviderException
    at com.sun.faces.vendor.WebContainerInjectionProvider.invokeAnnotatedMethod(WebContainerInjectionProvider.java:111)
    at com.sun.faces.vendor.WebContainerInjectionProvider.invokePreDestroy(WebContainerInjectionProvider.java:79)
    at com.sun.faces.mgbean.BeanBuilder.destroy(BeanBuilder.java:119)
    at com.sun.faces.mgbean.BeanManager.destroy(BeanManager.java:248)
    at com.sun.faces.application.WebappLifecycleListener.handleAttributeEvent(WebappLifecycleListener.java:265)
    at com.sun.faces.application.WebappLifecycleListener.sessionDestroyed(WebappLifecycleListener.java:133)
    at com.sun.faces.config.ConfigureListener.sessionDestroyed(ConfigureListener.java:306)
    at com.ibm.ws.session.http.HttpSessionObserver.sessionDestroyed(HttpSessionObserver.java:179)
    at com.ibm.ws.session.SessionEventDispatcher.sessionDestroyed(SessionEventDispatcher.java:160)
    at com.ibm.ws.session.StoreCallback.sessionInvalidated(StoreCallback.java:126)
    at com.ibm.ws.session.store.memory.MemorySession.invalidate(MemorySession.java:225)
    at com.ibm.ws.session.store.memory.MemoryStore.checkSessionStillValid(MemoryStore.java:429)
    at com.ibm.ws.session.store.memory.MemoryStore.runInvalidation(MemoryStore.java:373)
    at com.ibm.ws.session.WsSessionInvalidator.alarm(WsSessionInvalidator.java:64)
    at com.ibm.ejs.util.am._Alarm.run(_Alarm.java:133)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1659)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.GeneratedMethodAccessor1125.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at com.sun.faces.vendor.WebContainerInjectionProvider.invokeAnnotatedMethod(WebContainerInjectionProvider.java:109)
    ... 15 more
Caused by: java.lang.NullPointerException
    at be.sofico.web.frmwrk.FacesBean.getBean(FacesBean.java:59)
    at be.sofico.web.frmwrk.FacesBean.getWS(FacesBean.java:70)
    at be.sofico.web.frmwrk.mgbean.menu.MenuModelBase.destroy(MenuModelBase.java:46)
    ... 19 more 
```

# c++ - std::vector 的字符串表示

> ID：14279566
> 
> 赞同：0
> 
> 时间：2013-01-11T13:52:42.580
> 
> 标签：c++, string, vector

是否可以实现一个 C++ 函数，该函数给出每个字符串的表示形式`std::vector<T>`，只要类型的元素`T`可以附加到输出流，如

```
T x;
...
std::cout << x << std::endl; 
```

字符串表示应该看起来像

```
[x, y, z] 
```

我尝试了以下方法，但应该`?`是什么？

```
template <typename T> std::string vectorToString(std::vector<T>& vec) {
    std::string s;
    for (T element : vec) {
        ?
    }
    return s;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:56:58.110

您需要`stringstream`进行格式化：

```
std::ostringstream ss;
ss << '['
bool first = true;
for (T const & element : vec) {
    if (!first) {
        ss << ", ";
    }
    ss << element;
    first = false;
}
ss << ']';
return ss.str(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T13:55:30.710

使用[`std::ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream)实例`?`并返回[`std::ostringstream::str()`](http://en.cppreference.com/w/cpp/io/basic_ostringstream/str)：

```
std::ostringstream s;
s << "[";

for (auto i(vec.begin()); i != vec.end(); i++)
{
    if (vec.begin() != i) s << ", ";
    s << *i;
}
s << "]";

return s.str(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T14:18:12.370

如果你正在使用 C++11，你可以使用这个简单的版本：

```
#include <sstream>
#include <algorithm>

using namespace std;

template<typename T>
string format(vector<T> const& v)
{
    if (v.empty()) return "[]";
    ostringstream ss;
    ss << "[" << v[0];
    for_each(begin(v) + 1, end(v), [&ss] (T const& s) { ss << ", " << s; });
    ss << "]";
    return ss.str();
} 
```

如果您想让它对**其他类型的集合**（不仅仅是`vector`）或什至对于**集合的子范围**来说通用，您可以这样概括它：

```
#include <sstream>
#include <algorithm>

using namespace std;

template<typename It>
string format(It b, It e)
{
    if (b == e) return "[]";
    ostringstream ss;
    ss << "[" << *b;
    for_each(++b, e, [&ss] (decltype(*b)& s) { ss << ", " << s; });
    ss << "]";
    return ss.str();
}

template<typename C>
string format(C const& c)
{
    return format(begin(c), end(c));
}

int main()
{
    vector<int> v = { 4, 5, 5, 8 };
    cout << format(v) << endl;
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T14:07:38.027

快一点的版本

```
template <typename T> std::string vectorToString( const std::vector<T>& vec ) {
    if ( vec.empty() ) {
        return "[]";
    }
    std::ostringstream s;
    s << "[" << vec.front();

    for (auto i = vec.begin() + 1, e = vec.end(); i != e; i++)
    {
        s << ", " << *i;
    }
    s << "]";

    return s.str();
} 
```

另一个时刻：也许将这个函数专门用于字符串并引用它们是正确的，因为如果向量中的字符串以它开头或结尾，`,`那么很难理解打印了多少个字符串。

```
template <>
std::string vectorToString< std::string >( const std::vector<std::string>& vec ) {
    if ( vec.empty() ) {
        return "[]";
    }
    std::ostringstream s;
    s << "[" << vec.front();

    for (auto i = vec.begin() + 1, e = vec.end(); i != e; i++)
    {
        s << ", \"" << *i << "\"";
    }
    s << "]";

    return s.str();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T14:33:26.040

使用通常简化代码的算法（不确定是否在这种情况下，但为了完成而添加）：

```
template <typename T>
std::string toString( std::vector<T> const & v ) {
   if (v.empty()) 
      return "[]";
   typename std::vector<T>::const_iterator last = std::prev(v.end());
   std::ostringstream st;
   st << "[ ";
   std::copy( v.begin(), last, std::ostream_iterator<T>(st,", ") );
   st << *last << " ]";
   return st.str();
} 
```

# android - 用于本地化布局的横向文件夹

> ID：14279568
> 
> 赞同：2
> 
> 时间：2013-01-11T13:52:51.753
> 
> 标签：android, xml, eclipse, layout

由于语言差异，我需要为德语提供单独的横向布局。我如何在 Eclipse 中创建一个新文件夹来保存布局，但现在我遇到了一个错误。文件夹的名称是否正确？这是截屏的链接

[https://docs.google.com/file/d/0B9OVrUvUh2stdmhkQzNFNkcxS28/edit](https://docs.google.com/file/d/0B9OVrUvUh2stdmhkQzNFNkcxS28/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:01:00.210

要支持不同语言的不同应用程序，您可以有两种选择来实现这些。

***A. 最优选的方式***

您只需要添加 `res/values-__/string.xml`不同的`string.xml`.

要支持德语，您只需添加`res/values-de/strings.xml`which 包含您的德语字符串值 which**`Android can display to user at runtime on the basis of their locale.`**

***B. 增加应用程序大小作为根据语言创建的新布局。***

`layout-de-land`您需要根据[developer.android.com](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)将文件夹名称更改 为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:58:46.367

您的链接不起作用，但根据[http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)名称应该是`layout-de-land`

> 如果对资源目录使用多个限定符，则必须按照它们在表中列出的顺序将它们添加到目录名称中。

# c# - 如何在 Winform 中的 WPF UserControl 中播放多个图像的简单幻灯片

> ID：14279569
> 
> 赞同：0
> 
> 时间：2013-01-11T13:53:03.097
> 
> 标签：c#, wpf, winforms

我在 Windows 窗体的 ElementHost 中有 WPF UserControl。我不得不使用互操作，因为我需要简单的缩放和平移功能。一切都很完美，除了我不能播放幻灯片。

有趣的是，每个图像都可以在 ListBox 中选择显示，没有任何问题。但是当我循环播放列表时，它只显示最后一张图像。我将 Thread.Sleep(1000)、this.Refresh() 或其他任何东西放在每个循环中都是徒劳的。任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:01:42.683

通过在 UserControl 中创建以下代码并在需要时调用其 Refresh 方法解决了该问题。

```
 public delegate void MyDelegate();

    public void Refresh()
    {
        //this.Refresh();
          this.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Render, (MyDelegate) delegate() { });        
    } 
```

# silverlight - 银光。隐藏控制

> ID：14279572
> 
> 赞同：0
> 
> 时间：2013-01-11T13:53:18.453
> 
> 标签：silverlight, user-controls

我有silverlight应用程序。他存在几个 SL dll，它们存在一些控件列表。在工具箱中，我看到了我所有的用户控件。它不太好，因为添加了一些控件来帮助主控件显示数据。

我可以设置一些属性/类扩展/其他人来隐藏控件吗？我在我的dll中使用了他。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:53:55.727

这也在这里得到了回答：

*   [https://stackoverflow.com/a/1424776/1308645](https://stackoverflow.com/a/1424776/1308645)

只需将`[ToolboxItem(false)]`属性添加到您不想在工具箱中显示的类。

```
[ToolboxItem(false)]
public class HelperControl : UserControl 
{
    ...
} 
```

# apache-flex - Flex 3：在数据网格中动态创建复选框列 - 数据填充问题和事件监听器

> ID：14279576
> 
> 赞同：4
> 
> 时间：2013-01-11T13:53:42.427
> 
> 标签：apache-flex

我的 mxml 文件中有一个 datagrid 控件：

现在在我的 AS 文件中，在从 DB 获取数据时的结果函数中，我可以动态创建列。假设我创建 1 列（客户名称）：

```
private function GetDebtors_Result(event:ResultEvent):void
{
var arrayCol:Array = new Array();
var xmlSrc:XML = new XML("<main></main>");
var xmlTmp:XML;
var colClientname:DataGridColumn;

//Build an XML from DB data received (could as well use "event.result" directly to act as dataprovider for the datagrid, but I needed to break it down here)
for each(var o:Object in event.result)
{
xmlTmp = <row>
<CLIENTNAME>{o.CLIENTNAME}</CLIENTNAME>
</row>;
xmlSrc.appendChild(xmlTmp);
}

//Create the column CLIENTNAME
colClientname = new DataGridColumn("CLIENTNAME");
colClientname.headerText = "Client Name";

//Add the newly created column in the "Column" array.
arrayCol.push(colClientname);

//Use the "Column" array to set the columns of the datagrid.  
dgSearch.columns = arrayCol;

//Populate the datagrid with the XML data.
dgSearch.dataProvider = xmlSrc.row;
} 
```

这很好用。

现在问题来了：我需要添加第二列，其中包含复选框。它们将根据数据库中的数据被选择或取消选择。我将通过更新与上面相同的“GetDebtors_Result”函数来展示我是如何做到的（添加的行被注释为“// **ADDED** ”）：

```
private function GetDebtors_Result(event:ResultEvent):void
{
var arrayCol:Array = new Array();
var xmlSrc:XML = new XML("<main></main>");
var xmlTmp:XML;
var colClientname:DataGridColumn;
var colSel:DataGridColumn; // **ADDED**

//Build an XML from DB data received (could as well use "event.result" directly to act as dataprovider for the datagrid, but I needed to break it down here)
for each(var o:Object in event.result)
{
xmlTmp = <row>
<CLIENTNAME>{o.CLIENTNAME}</CLIENTNAME>
<SELECTED>{(o.SELECTED == 1)?true:false}</SELECTED>  //**ADDED**
</row>;
xmlSrc.appendChild(xmlTmp);
}

//Create the column CLIENTNAME
colClientname = new DataGridColumn("CLIENTNAME");
colClientname.headerText = "Client Name";

//Create the column SELECTED
colSel = new DataGridColumn("SELECTED"); // **ADDED**
colSel.headerText = ""; // **ADDED**
colSel.itemRenderer = new ClassFactory(mx.controls.CheckBox); // **ADDED**
colSel.dataField = "SELECTED"; // **ADDED**

//Add the newly created column in the "Column" array.
arrayCol.push(colClientname);

//Add the "selection" column in the "Column" array.
arrayCol.push(colSel); // **ADDED**

//Use the "Column" array to set the columns of the datagrid.  
dgSearch.columns = arrayCol;

//Populate the datagrid with the XML data.
dgSearch.dataProvider = xmlSrc.row; 
```

}

问题#1：出现复选框列，我可以选中和取消选中复选框，但在加载时它们没有被选中/取消选中与数据库数据相关的复选框。

问题#2：我如何将一个函数关联到复选框，例如一个将更新 XML 以便我可以将新数据保存到数据库的函数？

有人得到解决方案吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-18T11:18:26.150

似乎是我今天看到的一个非常古老的问题。希望您现在已经找到了解决方案，以防万一有人遇到同样的问题：

在向列添加复选框时 - 只需第一次实例化它：

```
var chkTempCheck: Checkbox = new CheckBox(); 
```

然后设置所有需要的属性：

```
chkTempCheck.selected = o.dBColumnToDecideCheckUnCheck 
```

这里的 'o' 是您在 event.result 中使用的对象。这肯定会奏效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T11:36:30.770

最初的场景是：所有列都在 mxml 文件中定义。复选框列使用了 itemrenderer 并且工作正常。我在 3 种不同的情况下使用相同的数据网格 - 唯一的问题是根据“视图”将某些列设置为可见/不可见。问题是当移动“视图”并填充网格并再次移动“视图”时，列宽一直呈指数增长。我排除了复选框列，一切正常；列宽还可以。我将复选框列包含在后面，并尝试在 AS 文件中设置列宽，并且修复了列增加指数问题，但是在视图 A 中填充网格和在视图 B 中填充网格时，列宽永远不会相同。...所以我冒险尝试在获取数据库数据后尝试在 AS 文件中设置列。希望你能在这些情况下找到自己。感谢您的帮助。

# bluetooth - 如何获取 android.jar 在 BluetoothAdapter 类中包含 startLeDiscovery() 方法

> ID：14279577
> 
> 赞同：0
> 
> 时间：2013-01-11T13:53:42.953
> 
> 标签：bluetooth

我看到一个页面， [使用三星 Galaxy S3 创建与蓝牙设备的连接](https://stackoverflow.com/questions/13169987/create-a-connection-to-a-bluetoothle-device-using-galaxy-s3) 但我无法获取 jar 文件。或者有没有在android中使用蓝牙le的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:45:06.950

你可以试试这个[框架。](https://github.com/android-btle/framework)

此外，还有关于[这个 Android 问题](https://code.google.com/p/android/issues/detail?id=33371)的代码示例（请参阅评论[208](https://code.google.com/p/android/issues/detail?id=33371#c208) / [209](https://code.google.com/p/android/issues/detail?id=33371#c209)），但我认为它们中的任何一个都没有提供完整的端到端工作解决方案。

您也可以尝试直接联系三星并询问他们是否有可用的 SDK（他们可能会，但如果有，此时它是私有的）。

# c# - 如何使用 C# 从 SQL Server 获取唯一的约束名称

> ID：14279579
> 
> 赞同：-1
> 
> 时间：2013-01-11T13:53:44.597
> 
> 标签：c#, sql, sql-server, unique-constraint

我使用以下语句在 SQL Server 数据库中创建了唯一约束：

```
ALTER TABLE mytable ADD CONSTRAINT mytable_unique UNIQUE (uid) 
```

如何使用 C# SQLConnection 对象以编程方式获取所有唯一约束名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:57:34.333

查询`information_schema.constraint_column_usage`

```
SELECT  TC.Constraint_Name ,
        CC.Column_Name
FROM    information_schema.table_constraints TC
        INNER JOIN information_schema.constraint_column_usage CC
            ON TC.Constraint_Name = CC.Constraint_Name
WHERE   TC.constraint_type = 'Unique'
ORDER BY TC.Constraint_Name 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T14:22:59.447

您也可以从[sys.key_constraints](http://msdn.microsoft.com/en-us/library/ms174321.aspx)获得这些：

```
select name from sys.key_constraints where type = 'UQ' 
```

# javascript - 另一个ajax调用的成功函数中的Jquery ajax调用不起作用并且没有正确地告诉错误类型

> ID：14279581
> 
> 赞同：0
> 
> 时间：2013-01-11T13:53:49.513
> 
> 标签：javascript, jquery

我正在尝试在另一个 ajax 调用成功的情况下进行 ajax 调用。这在服务器上运行良好，`localhost`但不在服务器上。

这就是我正在做的事情。

```
 FB.api('/me', function(response) {  
            $.ajax({
                    type:"POST",
                     url:"http://gagsterz.com/index.php/home/InsertUser",
                     data:{id: response.id,name:response.name,at:self.access_token},
                     error: function (xhr, ajaxOptions, thrownError) {
    alert(xhr.responseText);
    $('#error').html(xhr.responseText);
  },
                    success:function(data)
                    {
                            FB.api('/me/friends',function(response) {
                                if(response.data) 
                                {
                                    countfriends = 0;
                                    filedata="";
                                    self.friendsID = new Array();
                                    self.friendsName = new Array();

                                    $.each(response.data,function(index,friend) {

                                        filedata+=friend.id+"\t"+friend.name+"\t"+self.UID+"\n";
                                        countfriends++;

                                        self.friendsID.push(friend.id);
                                        self.friendsName.push(friend.name);
                                    });

                        if($.trim(data)=="InsertFriends")
                        {

                            $.ajax({
                                    url:"http://gagsterz.com/index.php/home/InsertFBFriends",
                                    type:"POST",
                                    data: {fdata : filedata },
                                    success:function(r)
                                    {
                                        alert("success");
                                    },
                                     error: function (xhr, ajaxOptions, thrownError) {
                                    alert(xhr.responseText);                                      },
                                });

                        }
                          });

               }); 
```

现在，当我单击按钮时。第一个 ajax 调用`(parent)`工作正常，并从 php 脚本返回我`InsertFriends`作为答案。现在 if 条件中存在的 ajax 请求`InsertFriends`无法正常工作，并且`xhr.responseText`是空字符串。现在我不知道为什么它不能正常工作。为了简单起见，我只是`abc`在服务器端脚本上回显，但我不知道这有什么问题。

我在`Chrome Network Tab`.

![在此处输入图像描述](../Images/9ddb04ba25e3334a6990191206e43bf2.png)

那么为什么它不起作用呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:04:46.983

我只是将 requesttype 从`POST`to更改为`GET`有效。

# c# - 如何在浏览器处理请求时禁用开始按钮

> ID：14279584
> 
> 赞同：1
> 
> 时间：2013-01-11T13:54:02.833
> 
> 标签：c#, javascript, jquery, asp.net

我有启动和停止按钮，我用它来启动和停止服务器上的窗口服务。
当我单击启动按钮时，服务启动，但在该时间跨度内启动服务需要一些时间，这意味着启动服务。我必须禁用客户端的开始按钮，禁用停止按钮也是如此。

虽然按钮被禁用，但我使用了下面的代码 btnStart 禁用但 Windows 服务没有启动......

javascript

```
 function btnStartClick()
 {
 $("input[ID=btnStart]").attr("disabled", "disabled");
 } 
```

C＃

```
protected void btnStart_Click(object sender,EventArgs e)
{
//service starst code here
} 
```

标记

```
 <asp:Button ID="btnStart" runat="server" Text="Start" OnClientClick="return btnStartClick();" OnClick="btnStart_Click" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:00:24.207

你为什么不使用'#'..而不是属性选择器..这比你使用的更快更高效

```
$('#<%= btnStart.ClientID %>').attr("disabled", "disabled"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:03:53.453

```
$('#<%= btnStart.ClientID %>').attr("disabled", "disabled"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:09:25.387

如果我理解你的话。

您可以在此时将 ajax 请求发送到您有服务启动逻辑并禁用按钮的 asp 页面，然后检查您的 ajax 响应，如果您的服务启动则启用按钮，如果不显示消息或以任何其他方式处理它。

如果您只询问如何使用 jQuery 禁用按钮，请查看humpty **dumpty**或**bipen**答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T14:18:41.843

你有几个选择：

```
$('#<%= btnStart.ClientID %>').prop("disabled", true); 
```

使用 ASP.NET 选择 OR：

```
$("input[id$=btnStart]").prop("disabled", true); 
```

`btnStart`当您的控件不在范围内时，每个以 ID 结尾的输入有时都会很有用。

正如另一条评论指出的那样，一旦按钮被禁用，它可能不会触发代码隐藏`onClick`，因此在这种情况下，最好隐藏/只读按钮而不是禁用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T14:23:20.633

他的问题不是他不能禁用按钮，而是他希望他的`OnClick`事件触发。他的按钮单击事件不会为禁用的按钮触发。

如果您试图阻止未来的点击，您可以隐藏该按钮，然后从代码隐藏中禁用它：

```
<script>
    function btnStartClick() {
        $("#<%= btnStart.ClientID %>").hide();
        return true;
    }
</script> 
```

和后面的代码：

```
protected void btnStart_Click(object sender, EventArgs e)
{
     btnStart.Enabled = false;
     //service starts code here
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-12T13:17:06.890

感谢您的回复，我得到了解决方案

```
<asp:Button ID="btnStart" runat="server" Text="Start" OnClientClick="this.disabled = true; this.value = 'Please Wait';"
            UseSubmitBehavior="false" OnClick="btnStart_Click" /> 
```

# ruby-on-rails - 如果外部服务关闭，请使用其他来源

> ID：14279588
> 
> 赞同：1
> 
> 时间：2013-01-11T13:54:09.537
> 
> 标签：ruby-on-rails, ruby, api, backup, external

在我的项目中，我使用以下小型库与外部服务进行交互：

```
class ExternalServiceInteraction
  include Singleton

    URL = Rails.env.production? ? 'https://first.production.url.com' : 'http://sandbox.url.com'
    API_KEY = Rails.env.production? ? 'qwerty' : 'qwerty'
    DOMAIN = Rails.env.production? ? 'prod.net' : 'stage.net'

  def connection
    conn = Faraday.new(url: URL) do |faraday|
      faraday.response :logger                  # log requests to STDOUT
      faraday.adapter  Faraday.default_adapter  # make requests with Net::HTTP
    end
  end

  def return_response(item=true)
    if @resp.status == 200
      response = item ? Hash.from_xml(@resp.body)['xml']['item'] : Hash.from_xml(@resp.body)['xml']
    else
      response =  Hash.from_xml(@resp.body)['xml']['error']
      Rails.logger.info "response_error=#{response}"
    end
    response
  end

  def get_subscribers
    path = 'subscribers'
    data = { 'X-API-KEY' => API_KEY, 'domain' => DOMAIN }
    @resp = connection.get(path, data)
    return_response
  end

  def get_subscriber(physical_id)
    path = 'subscriber'
    data = { 'X-API-KEY' => API_KEY, 'Physical_ID' => physical_id, 'domain' => DOMAIN }
    @resp = connection.get(path, data)
    return_response
  end
  # and so on
end 
```

现在我想使用“https://second.production.url.com”，如果通过第一个 url 进行交互服务有任何错误，如何更好地设置它？

起初，我尝试从服务器 ping / 获取 200 ok，如果失败，则切换到第二个 URL。但是有些情况是服务器启动并运行，返回 200 OK，但 API 无法访问。我的主要问题是我看不到如何捕获错误并使用库中的另一个 URL 重新运行方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:31:45.600

在构造函数中创建一个`ExternalServiceInteractionWithoutFallback`接受 URL 的对象。然后，将所有 API 方法移至该方法，并在其中`ExternalServiceInteraction`捕获所有 API 方法`method_missing`并委托给 的“活动”实例`ExternalServiceInteractionWithoutFallback`，如果调用失败，则更改委托给的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T08:45:12.903

我为这种情况编写了自己的 HostBackup Faraday 中间件。欢迎您使用它！[https://github.com/dpsk/faraday_middleware](https://github.com/dpsk/faraday_middleware) 这里有一篇文章： http: [//nikalyuk.in/blog/2013/06/25/faraday-using-backup-host-for-remote-request/](http://nikalyuk.in/blog/2013/06/25/faraday-using-backup-host-for-remote-request/)

# ios - 测试字典数组中是否存在具有特定属性的对象

> ID：14279589
> 
> 赞同：1
> 
> 时间：2013-01-11T13:54:12.817
> 
> 标签：ios, objective-c, nsarray, nsdictionary, for-in-loop

好的男孩和女孩，我有一个社区问题。

我实际上有`NSMutableArray`一些`NSDictionnary`。

我执行一种`-(void) refresh`方法来重新解析我的 JSON 提要，但在将新闻（是的，它用于显示新闻）添加到之前，`NSMutableArray`我想检查数组中是否有不同的新闻。

所以我认为我必须使用多个 for、forin 和 if boucles & conditions，但我不知道。

我尝试将新闻标题放入an`NSArray`中，然后检查json解析返回的是否有同一篇文章的新闻，没有任何结果。

不幸的是，我删除了代码并保存了项目，所以我很抱歉，我没有代码可以给你看。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:02:07.930

尝试这种方式...首先将来自 Json 或任何来源的任何消息附加到数组中，然后执行此逻辑。

```
NSArray *array=[[NSMutableArray alloc]initWithObjects:@"A",@"B",@"A",@"C",@"A", nil];    
NSMutableArray *arr=[NSMutableArray new];
for(id obj in array){
    if (![arr containsObject:obj]) {
        [arr addObject:obj];
    }
}
array=arr;
NSLog(@"==> %@",array); 
```

你也可以这样做：

```
NSArray *array=[[NSMutableArray alloc]initWithObjects:@"A",@"B",@"A",@"C",@"A", nil];    
NSMutableDictionary *dict=[[NSMutableDictionary alloc]initWithObjects:array forKeys:array];
array=[dict allKeys];

NSLog(@"==> %@",array); 
```

输出 ：

```
==> (
    A,
    B,
    C
) 
```

# javascript - Javascript弹出框的设计/样式？

> ID：14279592
> 
> 赞同：-1
> 
> 时间：2013-01-11T13:54:22.970
> 
> 标签：javascript

> **可能重复：**
> [如何更改 javascript 警报按钮的样式？](https://stackoverflow.com/questions/12997944/how-can-change-a-styling-of-javascript-alert-button)

只是想知道是否有任何方法来设置弹出框的样式？

**“更新”**

这是创建警报的实际代码。如果我使用 jQuery 对话框，那么代码的形式是什么？我的意思是如何使用这段代码插入 jQuery 的代码？谢谢

```
<?php 
// Start YOURLS engine
require_once( '../y/includes/load-yourls.php' );

function selfURL() { $s = empty($_SERVER["HTTPS"]) ? '' : ($_SERVER["HTTPS"] == "on") ? "s" : ""; $protocol = strleft(strtolower($_SERVER["SERVER_PROTOCOL"]), "/").$s; $port = ($_SERVER["SERVER_PORT"] == "80") ? "" : (":".$_SERVER["SERVER_PORT"]); return $protocol."://".$_SERVER['SERVER_NAME'].$port.$_SERVER['REQUEST_URI']; } function strleft($s1, $s2) { return substr($s1, 0, strpos($s1, $s2)); }
?>

    <?php
    // Part to be executed if FORM has been submitted
    if ( isset($_REQUEST['url']) ) {
        $url     = yourls_sanitize_url( $_REQUEST['url'] );
        $return  = yourls_add_new_link( $url );     
        $shorturl = isset( $return['shorturl'] ) ? $return['shorturl'] : '';        
        echo "<script type='text/javascript'>alert('$shorturl')</script>";

    // Part to be executed when no form has been submitted
    }   
        $site = YOURLS_SITE;
        $var = selfURL();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:55:34.233

如果“弹出框”是指由 生成的本机对话框`alert()`，`confirm()`以及类似的 - 不，没有。

如果它们的外观那么重要，那么您将需要生成 DOM 元素，绑定事件处理程序以复制按钮的功能，并设置它们的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:55:43.033

如果您的意思是`alert`，`prompt`或者其他内置的东西 - 不，您不能为它们设置自定义样式，它们使用默认浏览器样式。

如果您想要自定义样式，则需要 JavaScript 窗口插件。一些提供窗口小部件的 UI 库是 jQuery UI、jQWidgets、Kendo UI、Sencha 等。

这里有几个例子：

**jQWidgets的jqxWindow**

![在此处输入图像描述](../Images/340d909fa184fd9fb95264493daa0620.png)

**jQuery UI 对话框**

![在此处输入图像描述](../Images/37b4905804d0569ddb4a5c3bed013383.png)

# php - php字符串排序

> ID：14279594
> 
> 赞同：1
> 
> 时间：2013-01-11T13:54:30.567
> 
> 标签：php, string, sorting

我在 mysql 数据库中有一个包含字符的字符串，并且接下来想执行此操作：

```
$string = "actor1 as aaa, actor2 as bbb, actor3 as ccc";

for (do a loop for 0 to length of the $string) {
   echo actor1
   echo aaa
} 
```

所以每次循环都会打印：

```
actor1
aaa

actor2
bbb

actor3
ccc 
```

如何在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T13:57:32.387

尝试：

```
$string = "actor1 as aaa, actor2 as bbb, actor3 as ccc";
$groups = explode(',', $string);

foreach ( $groups as $group ) {
  $items = explode(' as ', trim($group));
  foreach ( $items as $item ) {
    echo $item . '<br/>';
  }
  echo '<br/>';
} 
```

或在没有第二个循环的情况下改进：

```
foreach ( $groups as $group ) {
  list($actor, $role) = explode(' as ', trim($group))
  echo $actor . '<br/>';
  echo $role . '<br/>';
  echo '<br/>';
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T13:58:04.317

```
foreach(explode(",", $string) as $value) {
    $parts = explode(" as ", $value);
    echo trim($parts[0])."<br/>".trim($parts[1])."<br/>";        
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:02:28.867

注意：我假设您有一个查询，但只是没有输入适当的查询字符串，所以我添加了一个典型的 mySQL 示例。

```
$query = mysql_query("SELECT actor1 as aaa, actor2 as bbb, actor3 as ccc FROM some_table");
$result = mysql_fetch_object($query);
$numrows = mysql_num_rows($query);

for ($i = 1; $i <= $numrows; $i++) {
  echo "actor1 <br>";
  echo $result->aaa . "<br>";
  echo "actor3 <br>";
  echo $result->bbb . "<br>";
  echo "actor3 <br>";
  echo $result->ccc . "<br>";
} 
```

# javascript - 使用Javascript从整个div中提取图像src

> ID：14279595
> 
> 赞同：1
> 
> 时间：2013-01-11T13:54:33.750
> 
> 标签：javascript, html

嗨，我正在使用 JavaScript。我的代码是：

```
<div id="myDiv" onClick="myfn()">
<img src="a.png">
<img src="b.png">
</div> 
```

我想通过单击按钮获取图像的来源并将其存储在数组中。有什么帮助吗？？？

```
myfn() {    
  var a = new Array(); 
  var mainDivData = document.getElementById('myDiv').innerHTML;
  var mainDivData2 = mainDivData.getElementByTag('src');

  for(var i =0 ; i<mainDivData2.length; i ++) {
    //a[i] = mainDivData2;
    alert(a[i]);
  }
} 
```

但是警报中没有显示任何内容，即使警报窗口没有打开。有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T13:56:48.670

纯 JavaScript 解决方案：

```
var imgs = document.getElementById("myDiv").getElementsByTagName("img"),
    arr = [];

for (var i = 0; i < imgs.length; i++) {
    arr.push(imgs[i].src);
}

console.log(arr); 
```

jQuery解决方案：

```
var arr = $("#myDiv img").map(function() {
    return this.src;
}).get();

console.log(arr); 
```

# python - 提交 HTML 调查时会发生什么

> ID：14279598
> 
> 赞同：-2
> 
> 时间：2013-01-11T13:54:41.177
> 
> 标签：python, html, survey, submit-button

我的问题是，当您点击像这样的 html 服务上的提交按钮时，究竟会发生什么？

```
<INPUT TYPE="radio" NAME="bev" VALUE="no" CHECKED>No beverage<BR>
<INPUT TYPE="radio" NAME="bev" VALUE="tea">Tea<BR>
<INPUT TYPE="radio" NAME="bev" VALUE="cof">Coffee<BR>
<INPUT TYPE="radio" NAME="bev" VALUE="lem">Lemonade<BR> 
```

更具体地说，我的意思是浏览器如何将我的 choie 数据发送到服务器，因为我想编写一个 Python 代码，在这样的 HTML 调查中为我投票

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:05:36.803

如果表单`method`属性是 post(我认为是) ，那么浏览器会发送一个 post 请求。如果你使用 requests 库，这是代码

```
data = {'bev': 'tea'}
#Define a dict with parameter with keys as name attribute values and value as the content you want to send
r = requests.get("http://awebsite.com/", params=data)
print r.content 
```

[Requests docs POST requests](http://docs.python-requests.org/en/latest/user/quickstart/#passing-parameters-in-urls)
如果您不使用请求，那么上帝会帮助您编写代码。

# c# - 如何在 XAML 中使用枚举类型？

> ID：14279602
> 
> 赞同：39
> 
> 时间：2013-01-11T13:55:26.387
> 
> 标签：c#, wpf, xaml, triggers, enums

我正在学习WPF，遇到了以下问题：

我在 XAML 之外的另一个命名空间中有一个枚举类型：

```
 public enum NodeType
 {
    Type_SYSTEM = 1,              // System
    Type_DB     = 2,              // Database
    Type_ROOT   = 512,            // Root folder
    Type_FOLDER = 1024,           // Folder
 } 
```

在我的 XAML 中，我想用整数触发图像

```
<Image.Style>
    <Style TargetType="{x:Type Image}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Type}" Value="{NodeType: }">
                <Setter Property="Source" Value="/Images/DB.PNG"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding Type}" Value="128">
                <Setter Property="Source" Value="/Images/SERVER.PNG"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>
</Image.Style> 
```

有没有办法直接在 XAML 代码中获取整数值并将其与枚举类型进行比较？

我的枚举在命名空间中`AnotherNamespace.Types`

```
<DataTrigger Binding="{Binding IntegerType}" Value="MyEnumType.Type_DB">
    <Setter Property="Source" Value="/Images/SERVER.PNG"/> 
</DataTrigger> 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-11T13:57:49.753

[我在这里](https://stackoverflow.com/q/7110464/302677)有一个类似的问题，我的最终结果是创建一个通用的[IValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)`enum` ，它将我想要匹配的值作为 传递`ConverterParameter`，它返回`true`或`false`取决于绑定值是否与`(int)`Enum 的值匹配。

最终结果如下所示：

XAML 代码：

```
<DataTrigger Value="True"
             Binding="{Binding SomeIntValue, 
                 Converter={StaticResource IsIntEqualEnumConverter},
                 ConverterParameter={x:Static local:NodeType.Type_DB}}"> 
```

转换器

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
    if (parameter == null || value == null) return false;

    if (parameter.GetType().IsEnum && value is int)
    {
        return (int)parameter == (int)value;
    } 
    return false;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-07-08T23:51:18.683

您只需要确保您的命名空间在您的 XAML 标头中进行了说明，然后您就可以直接在您的标记中引用自定义 DP 和枚举值。

例如，我使用此代码来做到这一点：

```
<DataTemplate.Triggers>
  <MultiDataTrigger>
    <MultiDataTrigger.Conditions>
      <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListBoxItem}}}" Value="True" />
      <Condition Binding="{Binding Type}" Value="{x:Static loc:AppProfileItemType.Custom}" />
    </MultiDataTrigger.Conditions>
    <MultiDataTrigger.Setters>
      <Setter TargetName="PART_Delete" Property="Visibility" Value="{x:Static Visibility.Visible}" />
    </MultiDataTrigger.Setters>
  </MultiDataTrigger>
</DataTemplate.Triggers> 
```

请注意，您不能在样式中访问 DataTrigger，您需要为此创建一个 DataTemplate 或 ControlTemplate（但是，.NET 4 添加了在样式中设置触发器的功能）。您可以像这样从 Style 覆盖 ControlTemplate：

```
<Style x:Key="MyCustomButtonStyle" TargetType="Button">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="Button">
        <ContentPresenter />
        <ControlTemplate.Triggers>
          <!-- Put your DataTriggers here -->
        </ControlTemplate.Triggers>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

对于希望绑定到对象的 DataTemplate，您可以简单地使用 ContentPresenter 并将其内容设置为要显示的对象以及用于显示对象的 DataTemplate 定义。总有一种使用 DataTriggers 的方法，它并不总是直接的或像使用样式那样简单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-08-10T14:36:57.210

没有必要让生活变得如此复杂。枚举很容易转换为字符串，因此您可以在 tirgger 中使用该字符串值。

```
<Image.Style>
    <Style TargetType="{x:Type Image}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Type}" Value="Type_DB">
                <Setter Property="Source" Value="/Images/DB.PNG"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding Type}" Value="Type_SERVER">
                <Setter Property="Source" Value="/Images/SERVER.PNG"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>
</Image.Style> 
```

* * *

但是如果你在你的枚举中存储一个 int 值......因为你可以分配：

```
NodeType val = (NodeType)619; 
```

然后...是的...您必须使用转换器。

# c# - 如何创建作为另一种数据类型的可能值子集的数据类型

> ID：14279603
> 
> 赞同：2
> 
> 时间：2013-01-11T13:55:27.010
> 
> 标签：c#

如何创建只允许其他数据类型的特定值的数据类型。例如，假设我想创建一个限制为 50 个状态的类型作为字符串。我该怎么做呢？使用一个`enum`然后一个辅助函数对我来说感觉有点hacky。

编辑：我想添加这个已经很晚了，但是编译时错误检查解决方案将是理想的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:58:56.240

对于您的具体示例，枚举确实是最好的解决方案。对于更复杂的事情，您可以使用工厂方法。这是一个例子：

```
public class State
{
   public string Name { get; private set; }

   private State(string name)
   {
      this.Name = name;
   }

   public static State CreateState(string name)
   {
      // validate and throw error if invalid
      return new State(name);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:00:14.580

使用一个类，并且只允许构造函数中的特定值。这样就不可能创建具有不正确值的类的实例。（使用枚举不会将值限制为仅指定的值。）

简单的例子：

```
public class Paint {

  public string Name { get; private set; }

  public Paint(string name) {
    switch (name) {
      case "Red":
      case "Green":
      case "Blue":
        Name = name;
        break;
      default:
        throw new ArgumentException("Illegal paint name '" + name + "'.");
    }
  }

} 
```

在内部，您可以将值表示为字符串或枚举，这取决于您要如何使用它。

# c# - 如何使活动中的画布可见？

> ID：14279609
> 
> 赞同：0
> 
> 时间：2013-01-11T13:55:38.273
> 
> 标签：c#, wpf, computer-science

我有以下问题，我想通过单击按钮生成一个小画布，生成后我想通过按键事件移动它，但我无法在事件中看到画布。我怎样才能让它可见？（在 WPF 的源代码中，不在 XAML 中）

```
public void Button_Click_1(object sender, RoutedEventArgs e)
{   
    Canvas c = new Canvas();
    c.Height = System.Windows.SystemParameters.PrimaryScreenHeight;
    c.Width = System.Windows.SystemParameters.PrimaryScreenWidth;
    c.Loaded += c_Loaded;
    Grid.Children.Add(c);

    Canvas ship = new Canvas();
    ship.Background = Brushes.Aquamarine;
    ship.Height = 30;
    ship.Width = 30;
    ship.KeyDown += ship_KeyDown;
    Canvas.SetTop(ship, 50);
    c.Children.Add(ship);  
}

void ship_KeyDown(object sender, KeyEventArgs e)
{
    canvas.Setleft(ship, canvas.Getleft(ship) +10);  //here i can not see the object "ship" :(          
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:07:53.587

使用参数发送者：

```
Canvas ship = (Canvas) sender; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:07:07.277

您需要添加 c 或运送到 layoutroot`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T09:10:09.383

最简单的方法是将其添加到 a `<list>`of`UIElement`并使用`foreach`-loop对其进行修改

# youtube - 通过 Wget 下载 YouTube 视频

> ID：14279610
> 
> 赞同：2
> 
> 时间：2013-01-11T13:55:41.380
> 
> 标签：youtube, firebug, wget

我正在尝试通过[Wget](http://en.wikipedia.org/wiki/Wget)下载 YouTube 视频。首先需要捕获实际视频资源的 URL。假设我想下载这个视频：[video](https://www.youtube.com/watch?v=r-KBncrOggI)。[在Firebug](http://en.wikipedia.org/wiki/Firebug_%28software%29)控制台中打开页面会显示如下内容：

![在此处输入图像描述](../Images/ed820c48639a272afb631df34a88f881.png)

我圈出的链接看起来像资源的链接，因为我们只看到视频：[http](http://www.youtube.com/v/r-KBncrOggI?version=3&autohide=1) ://www.youtube.com/v/r-KBncrOggI?version=3&autohide=1 。但是，当我尝试使用 Wget 下载此资源时，名称为**r-KBncrOggI@version=3&autohide=1**的 4 KB 文件存储在我的硬盘中，仅此而已。我应该怎么做才能获得实际的视频？

其次，有没有办法为不同分辨率的视频捕捉不同的资源，比如 360px、480px 等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:18:33.370

这是我在另一个答案中引用的[youtube-download实用程序的一个](https://metacpan.org/module/XAICRON/WWW-YouTube-Download-0.43/bin/youtube-download)**非常**简化但功能强大的版本：

```
#!/usr/bin/env perl
use strict;
use warnings;

# CPAN modules we depend on
use JSON::XS;
use LWP::UserAgent;
use URI::Escape;

# Initialize the User Agent
# YouTube servers are weird, so *don't* parse headers!
my $ua = LWP::UserAgent->new(parse_head => 0);

# fetch video page or abort
my $res = $ua->get($ARGV[0]);
die "bad HTTP response" unless $res->is_success;

# scrape video metadata
if ($res->content =~ /\byt\.playerConfig\s*=\s*({.+?});/sx) {

    # parse as JSON or abort
    my $json = eval { decode_json $1 };
    die "bad JSON: $1" if $@;

    # inside the JSON 'args' property, there's an encoded
    # url_encoded_fmt_stream_map property which points
    # to stream URLs and signatures
    while ($json->{args}{url_encoded_fmt_stream_map} =~ /\burl=(http.+?)&sig=([0-9A-F\.]+)/gx) {
        # decode URL and attach signature
        my $url = uri_unescape($1) . "&signature=$2";
        print $url, "\n";
    }
} 
```

使用示例（它返回几个 URL 到具有不同编码/质量的流）：

```
$ perl youtube.pl http://www.youtube.com/watch?v=r-KBncrOggI | head -n 1
http://r19---sn-bg07sner.c.youtube.com/videoplayback?fexp=923014%2C916623%2C920704%2C912806%2C922403%2C922405%2C929901%2C913605%2C925710%2C929104%2C929110%2C908493%2C920201%2C913302%2C919009%2C911116%2C926403%2C910221%2C901451&ms=au&mv=m&mt=1357996514&cp=U0hUTVBNUF9FUUNONF9IR1RCOk01RjRyaG4wTHdQ&id=afe2819dcace8202&ratebypass=yes&key=yt1&newshard=yes&expire=1358022107&ip=201.52.68.216&ipbits=8&upn=m-kyX9-4Tgc&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&itag=44&sver=3&source=youtube,quality=large&signature=A1E7E91DD087067ED59101EF2AE421A3503C7FED.87CBE6AE7FB8D9E2B67FEFA9449D0FA769AEA739 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:06:24.020

恐怕要获得视频资源的正确链接并不容易。

您获得的链接[http://www.youtube.com/v/r-KBncrOggI?version=3&autohide=1](http://www.youtube.com/v/r-KBncrOggI?version=3&autohide=1)指向播放器而不是视频本身。有一个 Perl 实用程序[youtube-download](https://metacpan.org/module/XAICRON/WWW-YouTube-Download-0.43/bin/youtube-download)，它维护得很好并且可以解决问题。这是获取该`fmt=18`视频的总部版本（魔术）的方法：

```
stas@Stanislaws-MacBook-Pro:~$ youtube-download -o "{title}.{suffix}" --fmt 18 r-KBncrOggI 
--> Working on r-KBncrOggI
Downloading `Sourav Ganguly in Farhan Akhtar's Show - Oye! It's Friday!.mp4`
75161060/75161060 (100.00%)
Download successful!
stas@Stanislaws-MacBook-Pro:~$ 
```

周围可能有更好的命令行*YouTube 下载*器。但是很抱歉，人们不再简单地使用 Firebug 和 wget 下载视频:(

我知道手动捕获该 URL 的唯一方法是查看浏览器的活动下载：

![铬检查员](../Images/b7f3fe3e26ebd63b4b06847c34a9b194.png)

最大的数据块是视频数据，所以你可以复制它的 URL：

[http://s.youtube.com/s?lact=111116&uga=m30&volume=4.513679238953965&sd=BBE62AA4AHH1357937949850490&rendering=accelerated&fs=0&decoding=software&nsivbblmax=679542.000&hcbt=105.345&sendtmp=1&fmt=35&w=640&vtmp=1&referrer=None&hl=en_US&nsivbblmin=486355.000&nsivbblmean= 603805.166＆MD = 1＆PLID = AATTCZEEeM825vCx＆纳秒= YT＆PTK = youtube_none＆csipt = watch7＆RT = 110.904＆tsphab = 1＆nsiabblmax = 129097.000＆tspne = 0＆TPMT = 110＆nsiabblmin = 123113.000＆tspfdt = 436＆HBD = 30900552＆等= 110.146＆HBT = 30.770＆ST = 70.213＆CFPS = 25＆CR = BR＆H = 480＆screenw = 1440＆nsiabblmean = 125949.872 &cpn=JlqV9j_oE1jzk7Zc&nsivbblc=343&nsiabblc=343&docid=r-KBncrOggI&len=1302.676&screenh=900&abd=1&pixel_ratio=1&bc=26131333&playerw=854&idpj = 0＆六氯丁二烯= 25408143＆playerh = 510＆ldpj = 0＆FEXP = 920704,919009,922403,916709,912806,929110,928008,920201,901451,909708,913605,925710,916623,929104,913302,910221,911116,914093,922405,929901＆斯科维尔= 1&el=detailpage&bd=6676317&nsidf=1&vid=Yfg8gnutZoTD4G5SVKCxpsPvirbqG7pvR&bt=40.333&mos=0&vq=auto](http://s.youtube.com/s?lact=111116&uga=m30&volume=4.513679238953965&sd=BBE62AA4AHH1357937949850490&rendering=accelerated&fs=0&decoding=software&nsivbblmax=679542.000&hcbt=105.345&sendtmp=1&fmt=35&w=640&vtmp=1&referrer=None&hl=en_US&nsivbblmin=486355.000&nsivbblmean=603805.166&md=1&plid=AATTCZEEeM825vCx&ns=yt&ptk=youtube_none&csipt=watch7&rt=110.904&tsphab=1&nsiabblmax=129097.000&tspne=0&tpmt=110&nsiabblmin=123113.000&tspfdt=436&hbd=30900552&et=110.146&hbt=30.770&st=70.213&cfps=25&cr=BR&h=480&screenw=1440&nsiabblmean=125949.872&cpn=JlqV9j_oE1jzk7Zc&nsivbblc=343&nsiabblc=343&docid=r-KBncrOggI&len=1302.676&screenh=900&abd=1&pixel_ratio=1&bc=26131333&playerw=854&idpj=0&hcbd=25408143&playerh=510&ldpj=0&fexp=920704,919009,922403,916709,912806,929110,928008,920201,901451,909708,913605,925710,916623,929104,913302,910221,911116,914093,922405,929901&scoville=1&el=detailpage&bd=6676317&nsidf=1&vid=Yfg8gnutZoTD4G5SVKCxpsPvirbqG7pvR&bt=40.333&mos=0&vq=auto)

但是，对于大型视频，这只会返回一部分流，除非您找出负责要下载的流范围的 URL 查询参数并对其进行调整。

奖励：随着 YouTube 的不断发展，一切都会定期发生变化。因此，除非您刻苦，否则不要手动执行此操作。

# ruby-on-rails - Rails 多对多创建控制器

> ID：14279619
> 
> 赞同：2
> 
> 时间：2013-01-11T13:56:20.240
> 
> 标签：ruby-on-rails, ruby, many-to-many, dropdownbox

并提前感谢这里提供的任何帮助。实际上，我是 Rails 开发和 stackoverflow 的新手。我正在创建多对多的关系，并且在一些基础知识方面遇到了麻烦。我想做一个用户和组的关系。

楷模：

```
 class User < ActiveRecord::Base
      attr_accessible :name
      has_and_belongs_to_many :groups
    end

    class Group < ActiveRecord::Base
      attr_accessible :name
      has_and_belongs_to_many :users
    end 
```

db/migrate create_groups_users_join

```
class CreateGroupsUsersJoin < ActiveRecord::Migration
  def self.up
    create_table 'groups_users', :id => false do |t|
      t.column 'group_id', :integer
      t.column 'user_id', :integer
     end
   end
 def self.down
   drop_table 'groups_users'
 end
end 
```

我使用此代码在我的用户表单上创建了一个下拉列表。

> 真 }) %>

控制器

> ```
> def edit
>   @user = User.find(params[:id])
>   @groups = Group.all
>   ...
> end
>   def new
>   @user = User.new
>   @groups = Group.all
>   ...
> end 
> ```

我现在迷失了要添加到控制器以更新创建/编辑/更新的连接表的内容。谁能解释我需要改变什么才能做到这一点？谢谢你。

这是我现在得到的错误输出：

```
 {"utf8"=>"✓",
    "authenticity_token"=>"pgyajCT23qQVMuS+MQgG6E7M7Q8AWjfGaYbe3q7QDSA=",
    "group"=>{"group_id"=>"1"},
    "user"=>{"name"=>"ymudfg"},
    "commit"=>"Create User"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:12:18.300

您可以通过在控制器中执行以下操作将用户添加到组：

```
 user = User.find(params[:uid])
   group = Group.find(params[:gid])

   group.users <<  user  #Adding user to group 
```

为用户分配组：

```
 user.groups << group 
```

编辑：根据您的评论

```
 class UsersController < ApplicationController
    def new
      @user = User.new
      @group = Group.all
    end

    def create
      @user = User.new(params[:user])
      @group = Group.find(params[:group][:group_id]) # As per log
      if @user.save
        @group.users << @user
      else
        render :new
      end
    end

    #Similarly you can implement edit
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:14:45.500

用户和组之间的关联由 rails 自动处理，这就是您添加`has_and_belongs_to_many`.

如果要将用户添加到组中，可以执行以下操作：

`@group.users.create(params[:user])`

另一边你可以做：

`@user.groups.create(params[:group])`

要查找您可以执行的用户组：

`@user.groups.find(params[:id])`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-29T23:20:18.327

现在最好使用：[has many through associations](http://guides.rubyonrails.org/association_basics.html#the-has-many-through-association)比 has_and_belongs_to_many

# c# - IE9 缓存文本文件

> ID：14279621
> 
> 赞同：2
> 
> 时间：2013-01-11T13:56:24.970
> 
> 标签：c#, asp.net, internet-explorer, web-applications

我有一个 ASP.NET Web 应用程序，它创建一个文本文件报告，然后重定向到该文件。

```
Response.Redirect(strFileName); 
```

问题是 IE9 似乎在缓存方面做了一些不同的事情。如果我生成两个报告，IE9 总是显示生成的第一个。我必须按 CTRL+F5 才能看到更新的文件。在任何其他浏览器上都不会出现此问题。

我尝试添加命令来更改缓存无济于事。

```
Response.Cache.SetNoStore();
Response.Cache.SetCacheability(HttpCacheability.NoCache); 
```

我想保留为记录目的生成文本文件的功能。一种解决方案是将文本文件中的所有信息转储到页面上并避免`Response.Redirect`. 有没有办法强制IE重新加载文本文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:02:27.867

你可以使用类似版本的东西。

```
string strFileName = GetReportUrl();
string version = GetCurrentReportVersion(); // - or to use DateTime.Now.ToString();
string url = string.Format("{0}?v={1}", strFileName, version);

Response.Redirect(url); 
```

在这种情况下，浏览器将始终使用最新的报告版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:13:29.360

@Oleksandr 的答案应该有效并且易于实施。

另一种方法是重定向到另一个包含`Response.Cache`您提到的设置的 .net 页面。您可以将文本文件的内容写入这个新页面。

您的方法的问题在于您的`Response.Cache`设置适用于您所在的页面，而不是您重定向到的页面。

# mapping - 如何使用 maven 创建包含 rpm 模块的 rpm？

> ID：14279631
> 
> 赞同：1
> 
> 时间：2013-01-11T13:56:58.613
> 
> 标签：mapping, rpm-maven-plugin, requires

我正在尝试使用 rpm-maven-plugin 生成一个“rpm 容器”。这个容器应该包括我之前生成的三个 rpm，并在 yum 存储库中共享。所以想法是有一个带有 pom 文件的空项目，该文件生成一个 rpm 文件，其中仅包含来自存储库的三个 rpm。我的问题是我不想包含其他任何东西，所以我不需要在其中映射任何东西，因为它们里面的 rpms 有自己的映射配置和安装后脚本。我添加了一个小例子来更好地解释我的问题。

*   我在本地 yum 存储库 (aaa.repo) 中有三个项目 proj1.rpm、proj2.rpm、proj3.rpm。
*   我创建了一个带有 rpm-plugin 的孤独 pom.xml 的新项目，以创建一个包含这三个项目的“全局”rpm，到目前为止我所做的是：

<插件>

```
< groupId>org.codehaus.mojo< /groupId>
<artifactId>rpm-maven-plugin</artifactId>
<version>2.1-alpha-2</version>
<inherited>false</inherited>
<executions>
...
</executions>
<configuration>
    ...
<provides>
<provide>dump</provide>
</provides>
<requires>
<require>proj1</require>
<require>proj2</require>
<require>proj3</require>
</requires>
<mappings>
<mapping>
<directory>/usr/local/globalProject</directory>    
</mapping>
</mappings>
</configuration>
</plugin> 
```

我不得不添加一个空映射，因为没有它它就无法运行。当我执行时：

sudo yum -v --nogpgcheck localinstall globalProject.noarch.rpm

它解决了依赖关系，但不安装 rpm 的内容。有任何想法吗？

# c++ - 为什么我可以像标量矩阵一样初始化常规 Boost 矩阵？

> ID：14279639
> 
> 赞同：3
> 
> 时间：2013-01-11T13:57:13.537
> 
> 标签：c++, boost, boost-ublas

为什么这行得通？它不在任何地方的文档中...

```
#include <iostream>
#include <boost/numeric/ublas/matrix.hpp>
#include <boost/numeric/ublas/io.hpp>

int main()
{

boost::numeric::ublas::matrix<double> twoByTwoMat(2,2,-2);

std::cout << "This is the matrix: " << twoByTwoMat << std::endl;

return 0;
} 
```

输出：

```
This is the matrix: [2,2]((-2,-2),(-2,-2)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T14:08:23.957

它在`<boost/numeric/ublas/matrix.hpp>`头文件中定义。

```
matrix (size_type size1, size_type size2, const value_type &init):
        matrix_container<self_type> (),
        size1_ (size1), size2_ (size2), data_ (layout_type::storage_size (size1, size2), init) {
    } 
```

# javascript - Javascript范围问题 - 变量未定义

> ID：14279640
> 
> 赞同：0
> 
> 时间：2013-01-11T13:57:18.720
> 
> 标签：javascript, jquery, scope

我对此感到有些困惑，因为我确信所有变量在运行时之前都会被带到 javascript 的“顶部”，然后从那里处理。

所以我的**错误**

```
 TypeError: hutber.portfolio.ko is undefined
 [Break On This Error]  
 items: ko.observableArray(hutber.portfolio.ko.data), 
```

**目的**

```
(function ($) {
"use strict"; //For good development standards :)
hutber.portfolio = {
    init: function(){
        e(typeof(hutber));
        hutber.portfolio.changeOptionsBoxHeight();
        //Bind the height resize in window resize
        $(window).resize(function(){
            hutber.portfolio.changeOptionsBoxHeight();
        });
        //start KO
        hutber.portfolio.ko.init();
    },
    changeOptionsBoxHeight: function(){
        var height = $(window).height();
        $('.portfolio--options').height(height-400);
    }
};
hutber.portfolio.ko = {
    init: function(){
        ko.applyBindings(new hutber.portfolio.ko.portfolioViewModel());
    },
    data: [],
    items: ko.observableArray(hutber.portfolio.ko.data),
    portfolioViewModel: function(){

        hutber.portfolio.ko.items = ko.observableArray(hutber.portfolio.ko.data);

        $.getJSON('/js/pages/portfolio.json').done(function(info){
            hutber.portfolio.ko.data = info;
            hutber.portfolio.ko.items (hutber.portfolio.ko.data);
        });
    }
};
hutber.portfolio.init();
})(jQuery); 
```

我真的很想把它上传到小提琴，但由于某种原因，我在他们的网站上遇到了 js 错误。我相信我的防火墙阻止了某些文件的加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:05:08.827

此时`ko.observableArray(hutber.portfolio.ko.data)`运行，`hutber.portfolio.ko`尚未定义。

你可以像这样解决它：

```
hutber.portfolio.ko = {
    init: function(){
        ko.applyBindings(new hutber.portfolio.ko.portfolioViewModel());
    },
    data: [],
    portfolioViewModel: function(){

        hutber.portfolio.ko.items = ko.observableArray(hutber.portfolio.ko.data);

        $.getJSON('/js/pages/portfolio.json').done(function(info){
            hutber.portfolio.ko.data = info;
            hutber.portfolio.ko.items (hutber.portfolio.ko.data);
        });
    }
};

hutber.portfolio.ko.items = ko.observableArray(hutber.portfolio.ko.data); 
```

但此时`hutber.portfolio.ko.data`始终是`[]`。所以你不妨`ko.observableArray([])`输入你的原始代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:59:33.777

只是猜测：因为您在声明变量之前访问了它？

# android - ListView 中的 EditText 作为该列表的过滤器：焦点问题

> ID：14279641
> 
> 赞同：0
> 
> 时间：2013-01-11T13:57:19.173
> 
> 标签：android, listview, filter

在我的活动中，我有一个带有 customadapter 的 ListView。该 ListView 中的第一项是 EditText。这个 EditText 有一个 TextWatcher 导致列表被过滤。

```
search.addTextChangedListener(textWatcher);
search.setOnFocusChangeListener(focusListener);

TextWatcher textWatcher = new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        if(getContext() instanceof ListActivity) {
            ListAdapter adapter = ((ListActivity)getContext()).getListAdapter();
            if(adapter instanceof TCListObjectAdapter) {
                requestfocus = true;
                ((TCListObjectAdapter) adapter).getFilter().filter(s);
            }
        }
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) { }
    @Override
    public void afterTextChanged(Editable s) { }
};

OnFocusChangeListener focusListener = new OnFocusChangeListener() {
    public void onFocusChange(View v, boolean hasFocus) {
        if (!hasFocus && requestfocus){
            search.post(new Runnable() {

                @Override
                public void run() {
                    search.requestFocus();
                    requestfocus = false;
                }
            });
        }
    }
}; 
```

列表的过滤按预期进行。但有时在文本更改后，列表视图的第一行成为焦点：在这种情况下，搜索框的单元格而不是 EditText。如果用户想要继续过滤列表，他首先必须再次选择 EditText。

我不想关闭在列表视图中聚焦单元格的选项以获得视觉效果。

有什么方法可以避免在过滤时失去 EditText 的焦点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:33:24.267

```
getListView().addHeaderView(new EditText(this)); 
```

这满足了这些需求。

# mysql - 这个查询有什么问题？

> ID：14279642
> 
> 赞同：0
> 
> 时间：2013-01-11T13:57:31.320
> 
> 标签：mysql, sql, select

我有 3 个 sql 表调用类别、电影、类别电影。类别和电影表具有多对多关系。这就是我使用 category_movies 表的原因。这是表的结构...

> ```
> Category : cat_id, cat_name, 
> movies : mov_id, mov_name, 
> category_movies : cat_id, mov_id 
> ```

现在我动态地获得了 3 个类别 ID，现在我想单独选择电影的名称以及属于 3 个 category_id 的类别名称。

这是我到目前为止尝试过的查询..

```
SELECT  c.cat_name AS cn, m.mov_name AS mn, m.mov_id 
FROM    category AS c 
        INNER JOIN category_movies AS cm ON cm.cat_id = c.cat_id        
        INNER JOIN movies AS m ON m.mov_id = cs.mov_id
WHERE   c.cat_id IN (2, 5, 7)
GROUP BY c.cat_name, m.mov_name, m.mov_id 
HAVING COUNT(*) >= 3 
```

但这现在正在工作..有人可以告诉我这个查询有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T13:58:51.260

在此使用`IN`子句

```
SELECT..
FROM..
WHERE cat_id IN (2, 5, 7) 
```

和一样

```
SELECT..
FROM..
WHERE cat_id = 2 OR
      cat_id = 5 OR
      cat_id = 7 
```

另请注意，它`INNER JOIN`不是`INNOR JOIN`

但我想，你想表演`RELATIONAL Division`（*你想搜索一部包含你想要找到的所有类别的电影*）

```
SELECT  c.cat_name, m.mov_name, m.mov_id 
FROM    category AS c 
        INNER JOIN movies AS m ON m.cat_id = c.cat_id
        INNER JOIN category_movies AS cm ON cm.mov_id = m.mov_id
WHERE   cat_id IN (2, 5, 7)
GROUP BY c.cat_name, m.mov_name, m.mov_id 
HAVING COUNT(*) >= 3 
```

*   [关系部](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:58:55.477

INNOR -> INNER WHERE cat_id = 2 AND 5 AND 7

这几乎不可能是正确的，它可能应该是 OR

# css - HTML5 标签行为与 Div 标签行为

> ID：14279648
> 
> 赞同：3
> 
> 时间：2013-01-11T13:57:36.503
> 
> 标签：css, html

我有两个相同的代码部分，其中父标记内包含三个 div。一个父标签是 HTML5 标签，另一个是带有“.footer”类的 div 标签。我已经为这两个部分提供了相同的 css 代码，但我收到了不同的结果。我将第一个包含“.one”类的 div 标签的高度调整为 400px，它大于其包含标签的高度，即 300px。使用 HTML5 标记，整个包含的 div 会随着更大的 div 展开。然而，“页脚”类的 div 保持不变。这是因为我的 css 编写不当还是 HTML5 标签的行为与 div 标签不同？

[在 JSFiddle 上查看](http://jsfiddle.net/wTarb/)

```
 <div class="footer">

        <div class="one">
            div 1
        </div>

        <div class="two">
            div 2
        </div>

        <div class="three">
            div 3
        </div>

    </div>

    <footer>

        <div class="one">
            div 1
        </div>

        <div class="two">
            div 2
        </div>

        <div class="three">
            div 3
        </div>

    </footer> 
```

这是我使用的 CSS

```
.footer{
    background-color: rgba(0,0,102,1);
    width: 1000px;
    height: 1%;
    overflow: auto;
    }
.footer div {
    margin-right: 50px;
    width: 200px;
    height: 300px;
    float: left;
    margin-left: 50px;
    }
footer{
    background-color: rgba(0,51,255,1);
    width: 1000px;
    height: 1%;
    overflow: auto;
    }
footer div {
    margin-right: 50px;
    width: 200px;
    height: 300px;
    float: left;
    margin-left: 50px;
    }
.one{
    height: 400px;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T14:00:07.747

这可能是由于[用户代理样式表](http://meiert.com/en/blog/20070922/user-agent-style-sheets/)。浏览器为不同的元素提供默认格式。例如，Chrome 显示`p`为`display: block;`并给它一些`margin`，但对`span`. 如果没有[重置样式表](http://meyerweb.com/eric/tools/css/reset/)，就没有理由认为两个 HTML 元素会在给定的浏览器中显示相同的内容。

编辑：

但是，这不是你的问题。这里的问题是特异性。您可能已经知道这一点，但是当给定元素的属性有两个竞争值时，CSS 会选择由[最具体的选择器](http://css-tricks.com/specifics-on-css-specificity/)定义的属性。在这种情况下，选择器`.footer div`比 更具体`.one`，因此子 div 使用由定义的高度`.footer div`，恰好是较短的高度。

将您孩子的选择器更改`div`为更具体，您可以通过使用 来做到这一点`id`，并且[它可以按您的预期工作。](http://jsfiddle.net/cksYQ/)

# axis2 - 使用 Axis EmailWS-1.6 发送 HTML 电子邮件

> ID：14279649
> 
> 赞同：0
> 
> 时间：2013-01-11T13:57:38.347
> 
> 标签：axis2, tomcat6, html-email

我目前仅限于将 Tomcat 与 Axis2 及其 EmailWS-1.6 网络服务一起使用来发送电子邮件。这必须是 HTML 邮件。

这是 EmailWS.properties 的配置

```
Email Service Configuration
(This configuration requires EmailWS-1.6 or later)
contentType=text/html;charset=utf-8
returnAddress=

mail.transport.protocol=smtp
mail.host=
mail.smtp.port=465
mail.smtp.auth=true
mail.smtp.socketFactory.port=465
mail.smtp.socketFactory.class=javax.net.ssl.SSLSocketFactory
mail.smtp.socketFactory.fallback=false
mail.smtp.starttls.enable=true
mail.smtp.quitwait=false

authUsername=
authPassword= 
```

我可以成功发送一封电子邮件，但它似乎以纯文本形式到达。电子邮件客户端不会将其转换为 HTML。Tomcat/Axis2 的正确配置是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T09:13:03.837

Tomcat Axis2 电子邮件 Web 服务还包含一个操作，使您能够发送基于 xml 的电子邮件消息。通过使用此操作，我能够发送 HTML 电子邮件。它也以 HTML 格式接收。

# opencv - javaCV中的CvMat setTo等价物

> ID：14279655
> 
> 赞同：3
> 
> 时间：2013-01-11T13:57:54.430
> 
> 标签：opencv, javacv

我一直在尝试在 cvMat 上应用椭圆蒙版。在 C++ 中，代码如下所示：

```
Mat mask = Mat(warped.size(), CV_8UC1, Scalar(255));
double dw = DESIRED_FACE_WIDTH;
double dh = DESIRED_FACE_HEIGHT;
Point faceCenter = Point( cvRound(dw * 0.5),
cvRound(dh * 0.4) );
Size size = Size( cvRound(dw * 0.5), cvRound(dh * 0.8) );
ellipse(mask, faceCenter, size, 0, 0, 360, Scalar(0),CV_FILLED);
filtered.setTo(Scalar(128), mask); 
```

我无法在 javaCV 中找到任何等效于 setTo 的方法。任何人都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-05T14:52:58.460

您需要从标量创建一个 1x1 矩阵并使用它来代替：

```
filtered.setTo(Mat(1,1,CV_16S1C1, 128), mask); 
```

该方法定义为：

```
@ByRef
        public native opencv_core.Mat setTo(@ByVal opencv_core.Mat var1, @ByVal(
    nullValue = "cv::noArray()"
) opencv_core.Mat var2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:20:59.240

您可以设置一个可选的掩码`cvCopy(CvArr src, CvArr dst, CvArr mask)`

[水印示例](http://code.google.com/p/javacv/wiki/OpenCV2_Cookbook_Examples_Chapter_2#Example%3a_Watermarking)显示了一些用法，与您所做的不太一样，但可能会有所帮助。

# javascript - 如何使用 childBrowser 进行地理定位？

> ID：14279656
> 
> 赞同：0
> 
> 时间：2013-01-11T13:57:56.107
> 
> 标签：javascript, android, cordova, childbrowser

如何使用 childBrowser 激活地理定位？

我解释我的问题。我想用 childBrowser 进入 Doogle 地图网站以显示我的位置。

childBrowser 显示谷歌地图和其他网站，但无法显示我在谷歌地图中的位置。

我已经在android清单中添加了权限：

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS"/> 
```

但这还不够。我不明白为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:44:04.870

在 ChildBrowser 中默认不启用地理位置。您需要打开 ChildBrowser.java 文件，转到 showWebPage 方法，然后找到定义 WebSettings 的位置。然后加：

```
settings.setGeolocationEnabled(true); 
```

你应该很高兴。

# python - 在 Windows 中的 Python 文件上混合 read() 和 write()

> ID：14279658
> 
> 赞同：6
> 
> 时间：2013-01-11T13:57:58.733
> 
> 标签：python, windows, file-io

在 Windows 中使用（或）权限打开的文件上的`write()`紧跟 a似乎不会更新文件。`read()``r+``r+b`

假设`testfile.txt`当前目录中有一个文件，内容如下：

```
This is a test file. 
```

我执行以下代码：

```
with open("testfile.txt", "r+b") as fd:
    print fd.read(4)
    fd.write("----") 
```

我希望代码可以打印`This`并将文件内容更新为：

```
This----a test file. 
```

这至少在 Linux 上运行良好。但是，当我在 Windows 上运行它时，消息会正确显示，但文件没有更改 - 就像`write()`被忽略了一样。如果我调用`tell()`文件句柄，则表明该位置已更新（在`4`之前`write()`和`8`之后），但文件没有更改。

`fd.seek(4)`但是，如果我在该行之前添加一个明确的内容，`write()`那么一切都会按我的预期进行。

有人知道 Windows 下这种行为的原因吗？

作为参考，我在带有 NTFS 分区的 Windows 7 上使用 Python 2.7.3。

**编辑**

作为对评论的回应，我尝试了两者`r+b`，并且`rb+`-[官方 Python 文档](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)似乎暗示前者是规范的。

我`fd.flush()`在各个地方打了电话，并在和之间放置了一个，`read()`如下`write()`所示：

```
with open("testfile.txt", "r+b") as fd:
    print fd.read(4)
    fd.flush()
    fd.write("----") 
```

...产生以下有趣的错误：

```
IOError: [Errno 0] Error 
```

**编辑 2**

间接地添加 a 有`flush()`帮助，因为它使我看到描述类似问题的[这篇文章。](http://blog.myjotnotes.com/2008/07/08/bizarre-python-file-error/)如果其中一位评论者是正确的，则它是底层 Windows C 库中的一个错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T14:15:30.143

Python 的文件操作应遵循其`libc`内部使用 C 文件 IO 函数实现的约定。

引用 cplusplus 中的[fopen 手册页](http://linux.die.net/man/3/fopen)或[fopen 页面](http://www.cplusplus.com/reference/cstdio/fopen/)

> 对于为追加而打开的文件（包含“+”号的文件），在这些文件上允许输入和输出操作，应在写入操作之后刷新（fflush）或重新定位（fseek、fsetpos、rewind）流读取操作或未到达文件末尾的读取操作，然后是写入操作。

所以总结一下，如果您需要在写入后读取文件，则需要`fflush`缓冲区，并且读取后的写入操作应该以a 开头`fseek`，如`fd.seek(0, os.SEEK_CUR)`

所以只需将您的代码片段更改为

```
with open("test1.txt", "r+b") as fd:
    print fd.read(4)
    fd.seek(0, os.SEEK_CUR)
    fd.write("----") 
```

该行为与类似的 C 程序的行为方式一致

```
#include <cstdio>
int main()
{   
    char  buffer[5] = {0};
    FILE *fp = fopen("D:\\Temp\\test1.txt","rb+");
    fread(buffer, sizeof(char), 4, fp);
    printf("%s\n", buffer);
    /*without fseek, file would not be updated*/
    fseek(fp, 0, SEEK_CUR); 
    fwrite("----",sizeof(char), 4, fp);
    fclose(fp);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T14:19:45.867

这似乎是由于底层 Windows 库的行为（我个人认为这是错误的），而 Python 没有任何问题。在阅读和写作之间添加`flush()`调用（这显然是一种[很好的做法](http://www.cplusplus.com/reference/cstdio/fopen/)）时，我得到了一个零 errno，这与[这篇博](http://blog.myjotnotes.com/2008/07/08/bizarre-python-file-error/)`IOError`文中讨论的问题相同。

从那篇文章中，我发现[了这个 Python 问题](http://bugs.python.org/issue3207)，它提到了这个问题，并说`seek()`调用实际上是最好的解决方法，以及`flush()`每次你从阅读变为写作时。

考虑到所有这些，编写上面的代码以使其在 Windows 上成功运行的最佳方法似乎是：

```
with open("testfile.txt", "r+b") as fd:
    print fd.read(4)
    fd.flush()
    fd.seek(4)
    fd.write("----") 
```

对于任何试图编写可移植代码的人来说，这可能是需要牢记的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T14:04:48.097

你试过冲洗吗？

```
fd.flush() 
```

它依赖于操作系统，因为 write 使用文件系统缓存机制

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-11T14:02:34.060

实施是否有可能误解了“r+b”？Afaik "rb+" 用于二进制读写。

# c# - 如何通过属性名称和内部 xml 反序列化为属性

> ID：14279665
> 
> 赞同：1
> 
> 时间：2013-01-11T13:58:21.777
> 
> 标签：c#, xml, serialization, deserialization

我有一个这样的xml：

```
<employees>
  <employee id="11629">
   <field id="displayName">First Last</field>
   <field id="email">test@test.com</field>
  </employee>
</employees> 
```

我创建了一个类：

```
public class Employee
{
    [XmlAttribute("id")]
    public string Id { get; set; }

    public string DisplayName { get; set; }

    public string Email { get; set; }
} 
```

对于 Id，一切正常，但我不知道如何将属性设置为 DisplayName 属性。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:26:13.753

你可以试试这个：

```
public class Employee
{
    [XmlAttribute("id")]
    public string Id { get; set; }

    [XmlElement("field")]
    public List<Field> Fields { get; set; }

    public string DisplayName 
    { 
        get 
        {
            return Fields.Where(i => i.Id == "displayName").FirstOrDefault().Value;
        } 
    }

    public string Email
    {
        get
        {
            return Fields.Where(i => i.Id == "email").FirstOrDefault().Value;
        }
    }
}

public class Field
{
    [XmlAttribute("id")]
    public string Id { get; set; }

    [XmlText]
    public string Value { get; set; }
} 
```

# spring - Junit 测试开始 Spring 上下文

> ID：14279675
> 
> 赞同：2
> 
> 时间：2013-01-11T13:59:04.120
> 
> 标签：spring, junit

我有一个 junit 测试用例，它使用 @RunWith(SpringJUnit4ClassRunner.class) 实例化和配置 spring 上下文

在这个 spring 上下文中，我有实现 Lifecycle 接口的 bean。

如何在调用测试之前“启动”spring 上下文并在之后再次停止它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:03:52.860

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "/applicationContext-TEST.xml")
public class MyIntegrationTest {} 
```

然后像往常一样引用bean

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:48:15.777

`@RunWith(SpringJUnit4ClassRunner.class)`over 类命名`MyTestCase`就足够了。[Spring 测试框架](http://static.springsource.org/spring/docs/3.0.x/reference/testing.html)`MyTestCase-test.xml`将在 CLASSPATH 上查找文件。如果你不喜欢这个命名约定，你可以指定你自己的：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "/applicationContext.xml")
public class MyTestCase {

  @Autowired
  private Dependency dep;

} 
```

> 如何在调用测试之前“启动”spring 上下文并在之后再次停止它？

通常你不需要做任何事情。Spring 将在第一次测试之前启动应用程序上下文，并在运行测试的 JVM 关闭时自动关闭它。您也可以在每次测试后重新启动上下文（请参阅`@DirtiesContext`注释）。

# xml - XPath、Acess 和 VBA。谓词使用

> ID：14279679
> 
> 赞同：0
> 
> 时间：2013-01-11T13:59:24.710
> 
> 标签：xml, vba, ms-access, xpath

我正在尝试使用 XPath 从 XML 文档中提取地址信息，并使用这些值填充访问数据库中的字段。在我必须使用谓词之前，我能够得到我需要的一切（我认为这是这样做的方法）。这是 XML 的示例：

```
<GeocodeResponse>
<status>OK</status>
<result>
<type>street_address</type>
<formatted_address>
Street Number Street Address, Kansas City, MO 64120, USA
</formatted_address>
<address_component>
<long_name>Street Number</long_name>
<short_name>Street Number</short_name>
<type>street_number</type>
</address_component>
<address_component>
<long_name>Street Address</long_name>
<short_name>Street Address</short_name>
<type>route</type>
</address_component>
<address_component>
<long_name>Kansas City</long_name>
<short_name>KCMO</short_name>
<type>locality</type>
<type>political</type>
</address_component> 
```

我想提取街道号、名称和城市的文本。这是我的 VBA 代码中的内容：

```
rst.Edit
rst("Str_Num").Value =.SelectSingleNode("GeocodeResponse/result/address_component/long_name[1]").Text
rst.Update
rst.Edit
rst("Str_Name").Value =SelectSingleNode("GeocodeResponse/result/address_component/long_name[2]").Text
rst.Update
rst.Edit
rst("City").Value =SelectSingleNode("GeocodeResponse/result/address_component/long_name[3]").Text
rst.Update
rst.Edit
rst("Zip").Value =SelectSingleNode("GeocodeResponse/result/address_component/long_name[8]").Text
rst.Update 
```

运行时出现错误 91 对象变量或未设置块变量。

上面的代码按我的预期工作，但我在理解谓词时遇到了问题。上面的代码：

```
rst.Edit
rst("frm_addr").Value = .SelectSingleNode("//formatted_address").Text
rst.Update
rst.Edit
rst("lat").Value = .SelectSingleNode("//location/lat").Text
rst.Update
rst.Edit
rst("lng").Value = .SelectSingleNode("//location/lng").Text
rst.Update 
```

那我有什么错？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:22:26.740

每个结果有几个`address_components`标签，而不是`long_name`每个 s `address_component`。将您的 XPath 表达式修改为

```
GeocodeResponse/result/address_component[1]/long_name 
```

等等。

# javascript - 单击时使提交按钮消失

> ID：14279686
> 
> 赞同：2
> 
> 时间：2013-01-11T13:59:53.647
> 
> 标签：javascript, html

我想知道是否有一种方法可以调整此代码，以便在单击提交按钮时它会消失，但输入框会保留。

```
<script type="text/javascript">

 var Text = 'hello';

    function setInput(button) {
       var buttonVal = button.name,
       textbox = document.getElementById('input_' + buttonVal);
       textbox.value = Text ;
    }
</script>

<html>
      <input class='input' id="input_a1" name="a1" value="<?php {echo $a1;} ?>"> 
      <input type='submit' name='a1' value='x' onclick='setInput(this); return false;'>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T14:01:29.787

只需添加：

```
 button.style.visibility = "hidden"; 
```

在您的`SetInput`功能结束时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-11T08:52:55.210

```
<button onclick="style.display = 'none'">Click Me</button> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T14:02:38.997

如果您希望它消失，请使用...

```
button.style.visibility = "hidden"; 
```

但是，这将留下按钮占用的空间（但它将是空白的）。

如果您也希望空间消失，请使用它而不是`visibility`...

```
button.style.display = "none"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T14:04:22.723

```
<script type="text/javascript">

 var Text = 'hello';

    function setInput(button) {
       var buttonVal = button.name;
       button.style.display = 'none'; // insert this line
       textbox = document.getElementById('input_' + buttonVal);
       textbox.value = Text ;
    }
</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T14:05:46.017

编写一个隐藏元素的 js 函数。

```
function hide() {
    var div = document.getElementyById('whatYouWantToHide');
    div.style.display = 'none';
} 
```

您当然可以将它作为参数传递，这将是一个不错的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-06T08:12:11.160

HTML（无按钮）：输入 id="myButton" type="hidden" value="点击我？"

此行将使按钮可见： document.getElementById("myButton").type="button";

我发现它很简单

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-11-08T15:35:43.477

```
<script type="text/javascript">
function submitform()
{
    document.forms["myform"].submit();
}
</script>
<form id="myform" action="submit-form.php">
Search: <input type='text' name='query'>
<a href="javascript: submitform()">Submit</a>
</form> 
```

# android - 为什么扩展意图服务的类需要空构造函数？

> ID：14279687
> 
> 赞同：2
> 
> 时间：2013-01-11T13:59:57.747
> 
> 标签：android

任何人都可以解释它并帮助我理解它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T14:07:21.087

所有组件（活动、服务、内容提供者和广播接收器）都需要一个空的构造函数，因为这就是 Android 根据需要尝试创建对象的方式。Android 不能使用其他构造函数，因为它无法知道将什么作为参数值传入。

# c# - MVC 3 API 自定义响应正文出错

> ID：14279688
> 
> 赞同：0
> 
> 时间：2013-01-11T14:00:04.370
> 
> 标签：c#, asp.net-mvc, json, http-status-codes

我正在尝试使用登录方法+其他方法编写 API。当登录出现问题时，我想使用自定义响应正文向客户端返回自定义 HTTP 错误代码。问题是在错误时请求被重定向到主页。

```
[HttpPost]
[AllowAnonymous]
public JsonResult ApiLogIn(LoginModel model)
{
    if (ModelState.IsValid)
    {
        var outcome = _authService.LogIn(model);

        if (outcome == LogInOutcome.Success)
        {
            return Json(new { }); // Empty on success
        }
        else
        {
            Response.StatusCode = (int)HttpStatusCode.Unauthorized;
            return Json(new { reason = outcome.ToString() });
        }
    }

    Response.StatusCode = (int)HttpStatusCode.BadRequest;
    return Json(new { }); // Empty or invalid model
} 
```

如何阻止它在错误时被重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:06:00.430

问题是在请求生命周期的后期，FormsAuth 模块会检查是否`Response.StatusCode`为 401，如果是，则重定向到登录页面。

您可以尝试不同的状态代码（例如 403，当然这不太适合您的场景）。另一个选项是延迟设置`Response.StatusCode`为 401，直到`EndRequest`Global.asax 中的事件。

我通过添加一个标志`Context.Items`并检查标志的存在解决了这个问题`EndRequest`：

**Global.asax.cs - 添加此方法**

```
protected void Application_EndRequest(Object sender, EventArgs e)
{
    if(Context.Items["AjaxPermissionDenied"] is bool) // FormsAuth module intercepts 401 response codes and does a redirect to the login page. 
    {
        Context.Response.StatusCode = 401;
        Context.Response.StatusDescription = "Permission Denied";
        Context.Response.End();
        return;
    }
} 
```

**在您的控制器中**

```
[HttpPost]
[AllowAnonymous]
public JsonResult ApiLogIn(LoginModel model)
{
    if (ModelState.IsValid)
    {
        var outcome = _authService.LogIn(model);

        if (outcome == LogInOutcome.Success)
        {
            return Json(new { }); // Empty on success
        }
        else
        {
            Context.Items["AjaxPermissionDenied"] = true;
            return Json(new { reason = outcome.ToString() });
        }
    }

    Response.StatusCode = (int)HttpStatusCode.BadRequest;
    return Json(new { }); // Empty or invalid model
} 
```

# jquery-mobile - 将移动站点添加到 iPhone 上的主屏幕后的 Photoswipe 捏缩放行为

> ID：14279693
> 
> 赞同：1
> 
> 时间：2013-01-11T14:00:12.337
> 
> 标签：jquery-mobile, pinchzoom, photoswipe

我正在使用 jQuery Mobile 构建一个移动站点，并使用 Photoswipe 从滑块打开图像。

我遇到的问题是，如果在移动 Safari 中或从主屏幕图标打开移动网站，则捏缩放的工作方式会有所不同。

场景 1 - 在移动 Safari 中打开网站。一切正常，我可以单击滑块中的图像，然后打开 Photoswipe 层。我可以毫无问题地滑动和捏缩放。

场景 2 - 从主屏幕图标打开网站。当我尝试捏缩放图像时，黑屏会持续几毫秒，然后图像就会显示出来。如果我在“黑屏闪烁”期间查看手机的顶部栏（放置 wifi 等图标的位置），我还可以看到某些内容已加载。这在场景 1 中不会发生。

我使用最新版本的 jQuery mobile 和 PhotoSwipe。

任何人都知道为什么它的行为不同？

# android - 无法在android中取消异步任务

> ID：14279695
> 
> 赞同：0
> 
> 时间：2013-01-11T14:00:23.213
> 
> 标签：android, asynchronous, task

我需要取消我的 asyncthread 。在我的应用程序中，我正在做一些繁重的计算，我想让用户能够取消计算（然后重试）。我在论坛上读到，您不能只是停止任务正在执行的操作，并且您需要检查任务 isCancelled=true 在您的 DoinBackground 代码中是否存在。但这对我不起作用。

任务本身运行良好，如果我让它自行结束，它会输出正确的数据。

在我的应用程序中，我首先调用函数 naredi_pdf_start(view)，然后当任务运行时，如果我调用 close_pdf1(view)，它会给我一个错误。（我正在更改视图并且应用程序在调用 publishProgress 时找不到我的 pdf_text1 Textview - 空指针异常）。我真的不知道如何使用 task.cancel(true) 方法（在我的例子中：start_pdf.cancel(true))）。

这是我的代码：

```
String progress_pdf;
naredi_pdf start_pdf;

public void naredi_pdf_start(View view) {
    start_pdf=new naredi_pdf();
    start_pdf.execute();
}

public void close_pdf1(View view) {

    if(start_pdf!=null) {
        Log.v("not null","not null");

        start_pdf.cancel(true);
        setContentView(R.layout.other_view); //This is where 
                                             //I don't have TextView pdf_text1
    }
}

private class naredi_pdf extends AsyncTask<Void, String, Void> {

    protected Void doInBackground( Void... ignoredParams ) {
        progress_pdf="Calculating Statistical Data";

        //A LOT OF CODING

        for(int i = 0; i < 1; i++) {
            if(isCancelled()) {
                break;
            }
            else {
                publishProgress("Calculating team statistics");  
            }
        }

        //MORE OF CODING              

        for (int i = 0; i < 1; i++) {
            if (isCancelled()) {
                break;
            }
            else {
                publishProgress("Calculating player's BIO");  
            }
        }

        //MORE OF CODING       

        for (int i = 0; i < 1; i++) {
            if (isCancelled()) {
                break;
            }
        else {
                publishProgress("Calculating player's individual performance");
            }
        }

        return null; 
    }

    protected void onPostExecute( Void array ) {
        //saving to database
    }

    protected void onProgressUpdate(String... values) {
        progress_pdf=values[0]+"\n"+progress_pdf;

        if (isCancelled())  {

        }
        else {
            TextView pdf_text1 = (TextView) findViewById (R.id.pdf_text1);
            pdf_text1.setText(progress_pdf);
            // dialog(view);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:10:28.617

该`return`语句取消了 doInBackground 方法的执行，而不是`break`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:13:28.600

您的问题不在于您无法取消`AsyncTask`. 您可能会收到`NullPointerException`，因为您`setContentView()`之前的电话`AsyncTask.cancel()`已成功通过。A`onProgressUpdate()`被调用，却发现布局现在已更改，并且没有`View`with `id=R.id.pdf_text1`！

来自[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)的文档。

> 可以通过调用 cancel(boolean) 随时取消任务。调用此方法将导致对 isCancelled() 的后续调用返回 true。调用此方法后，将在 doInBackground(Object[]) 返回后调用 onCancelled(Object)，而不是 onPostExecute(Object)。为了确保尽快取消任务，如果可能（例如在循环内），您应该始终从 doInBackground(Object[]) 定期检查 isCancelled() 的返回值。

由于`onCancelled()`在 UI 线程上运行，并且您确定不会发生后续调用`onProgressUpdate()`，因此它是调用`setContentView()`.

超越`onCancelled()`你`AsyncTask`

```
private class naredi_pdf extends AsyncTask<Void, String, Void> {

    protected Void doInBackground( Void... ignoredParams ) { // YOUR CODE HERE}
    protected void onPostExecute( Void array ) { // YOUR CODE HERE}
    protected void onProgressUpdate(String... values) {// YOUR CODE HERE}

    // ADD THIS
    @Override
    protected void onCancelled() {
        // Do not call super.onCancelled()!

        // Set the new layout
        setContentView(R.id.other_layout);
    }
} 
```

改变`close_pdf1()`

```
public void close_pdf1(View view) {
    if(start_pdf!=null) {
        Log.v("not null","not null");

        start_pdf.cancel(true);
    }
} 
```

你应该有一个`AsyncTask`在取消时自动改变你的布局。希望您也不应该遇到任何问题`NullPointerException`。虽然没有尝试过代码:)

**编辑**

如果您觉得花哨，请按照 Rezooms 的建议使用`return`.

```
for(int i = 0; i < 1; i++) {
    if(isCancelled()) {
        return null;
    }
    .
    .
    .
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:19:50.283

isCancelled 是 AsyncTask 类的专有方法。

你应该在你的扩展类上定义一个私有布尔属性，做这样的事情

```
private class myAsyncTask extends AsyncTask<Void, String, Void> {
          private boolean isTaskCancelled = false;

          public void cancelTask(){
               isTaskCancelled = true;
          }

          private boolean isTaskCancelled(){
               return isTaskCancelled;
          }

          protected Void doInBackground( Void... ignoredParams ) {
            //Do some stuff
             if (isTaskCancelled()){
                return;
             }
          }

          protected void onPostExecute( Void array )
          {
           //Do something
          }

          protected void onProgressUpdate(String... values)
          {
           //Do something
          }
    } 
```

# css - 给定一个带边框的图像按钮，如何在 CSS 中拉伸/重复可变长度内容的中间部分？

> ID：14279696
> 
> 赞同：4
> 
> 时间：2013-01-11T14:00:22.630
> 
> 标签：css, tabs

这类似于从 Soda Theme (Sublime Text 2) 中获取的 Google Chrome 标签样式：

![谷歌 chrome 标签 sublime text 2](../Images/334e19b746f999bf1483f2a628d80a2b.png)

您会看到它有 3 个部分：上升沿、2-3px 平坦中间、下降沿。

**问：如何在 CSS 中“重复”中间部分并拉伸制表符以适应字符串的大小？**

图像尺寸：42 x 28。

如果它有帮助，这里是**.sublime-theme**文件的片段：

```
 // Tab element
    {
        "class": "tab_control",
        "content_margin": [12, 3, 12, 3],
        "max_margin_trim": 0,
        "hit_test_level": 0.0,
        "layer0.texture": "Theme - Soda/Soda Dark/tab-inactive.png",
        "layer0.inner_margin": [5, 5],
        "layer0.opacity": 1.0
    }, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T14:34:43.330

有很多不同的方法可以实现这种效果，这实际上取决于您的偏好。正如您正确假设的那样，您需要将其视为 3 个不同的部分。因此，最简单的方法是将其分成 3 个不同的图像。

该解决方案还取决于您的 HTML 标记的外观。例如，如果您只有：

```
<a class="tab" href="#">My Tab</a> 
```

然后，您只有一个可以设置样式的元素来使其工作（这使得它变得更加困难）。

但是，如果您在选项卡周围有一个包装元素：

```
<li class="tab"><a href="#">My Tab</a></li> 
```

然后，您可以使用 LI 元素来帮助实现所需的结果。

## 单元素

在我的第一个示例中，您只有一个“锚”元素可以使用。检查您要用于选项卡的图像，我可以看到它有一些斜角，并且不是简单的平面颜色，也不是带有简单边框的平面颜色。这意味着我们无法使用直接的 CSS 来实现这种效果，因此我们需要 CSS 来平铺图像。

你有两个选择。

**选项1**

将图像拆分为两个图像，左侧和右侧，将其从中间向下分割。接下来，在您的图像编辑应用程序中，将您的画布向右扩展，例如 200 像素（或者您认为选项卡的最大宽度）。最后，选择最右边的边缘（这应该是选项卡的中间）并将其水平拉伸到右边框。

您最终应该得到的是倾斜的左侧，然后是约 200 像素的“中间区域”。

现在您有两个图像，我们将调用`tab-left-side.png`和`tab-right-side.png`。使用这两个图像，您可以使用以下 CSS 实现选项卡效果：

```
.tab {
    background: url(tab-left-side.png) no-repeat 0 0;
    overflow: hidden;
    padding-left: 10px; /* width of the left edge of the tab, before the middle section begins. If you want more horizontal tabbing, add it to this value */
}

.tab:after {
    content: ' ';
    overflow: hidden;
    width: 10px; /* width of the right edge of the tab */
    background: url(tab-right-side.png) no-repeat 0 0;
} 
```

**选项 2**

此选项需要将您的图像拆分为三个图像。您将拥有`tab-left-side.png`、`tab-middle.png`和`tab-right-side.png`。您可以猜到，您应该将图像适当地分成这些。

现在，您可以使用 CSS：

```
.tab {
    background: url(../images/tab-middle.png) repeat-x 0 0;
    overflow: hidden;
    color: white;
    float: left;
    margin: 0 10px; /* must be same as side widths */
}

.tab:after {
    content: '.';
    overflow: hidden;
    text-indent: -999px;
    float: right;
    width: 17px; /* width of the right edge of the tab */
    background: url(../images/tab-right-side.png) no-repeat 0 0;
}

.tab:before {
    content: '.';
    text-indent: -999px;
    overflow: hidden;
    float: left;
    background: url(../images/tab-left-side.png) no-repeat 0 0;
    width: 17px; /* width of the left edge of the tab */
} 
```

## 双元素

双元素的实现方式与单元素示例的选项 1 完全相同，只是您不必使用伪类选择器。如果您编写的代码必须支持不支持伪类选择器（或至少是`:before`and `:after`）的旧浏览器，那么这是您**唯一**的选择。

同样，您将两个图像拆分为`tab-left-side.png`和`tab-right-side.png`。

然后，你的 CSS：

```
LI.tab {
    background: url(tab-left-side.png) no-repeat 0 0;
    overflow: hidden;
    padding-left: 10px; /* width of the left edge of the tab, before the middle section begins. If you want more horizontal tabbing, add it to this value */
}

LI.tab A {
    content: ' ';
    overflow: hidden;
    width: 10px; /* width of the right edge of the tab */
    background: url(tab-right-side.png) no-repeat 0 0;
} 
```

它与选项 1 示例中的 CSS 几乎相同，只是我们更改了选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:37:38.707

实现类似结果的另一种方法是使用多个背景和背景大小：

```
li.tab a {
  /* using inline-block for simplicity you could easily switch to
     display block and floats. */
  display: inline-block;
  overflow: hidden;
  color: #fff;
  padding: 0px 20px;
  /* I'm using 75% sizing on my middle image which means my min and
     max calculations work out as follows. This can change depening
     on the images you use. */
  min-width: 80px;
  max-width: 160px;
  /* height is obviously dependent on many things, I'm using line-height
     to center my text but there are other ways. */
  height: 26px;
  line-height: 30px;
  text-align: center;
  /* depending on how your images are designed you may wish to have
     the left and right images layered on top of the middle. To do this
     just reverse the order of the background images. */
  background: 
    url(middle.png) center bottom / 75% 26px no-repeat,
    url(left.png) left bottom no-repeat,
    url(right.png) right bottom no-repeat
  ;
} 
```

但是，这确实有一些先决条件：

1.  这依赖于相对较新的 css 功能，因此不适用于旧浏览器。
2.  您必须定义选项卡的最小和最大宽度。
3.  您必须使用两个或三个图像，这不适用于 spritesheet。
4.  您需要一个必须是矩形的中间图像。

# c# - 如何隐藏实现

> ID：14279699
> 
> 赞同：6
> 
> 时间：2013-01-11T14:00:32.740
> 
> 标签：c#, oop

假设我有一个类库，其中任何内部类都可以访问以下接口：

```
interface myInterface
{
    string myProperty { get; set; } // notice setter.
} 
```

但是如果有人将这个类库添加到他们的项目中，他们会得到以下接口：

```
public interface myInterface
{
    string myProperty { get; }
} 
```

这样做的最有效和最被接受的方式是什么？有一个接口实现另一个接口吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:15:38.653

让你的公共接口只有 getter：

```
public interface myInterface
{
    string myProperty { get; } 
} 
```

然后从中派生另一个具有 setter 的内部接口：

```
internal interface myInternalInterface : myInterface
{
    new string myProperty { get; set; }
} 
```

你可以让他们实现内部接口：

```
class myImplementation : myInternalInterface
{
    public string myProperty{get; set;}
} 
```

如果您需要调用设置器，您可以将您的实例转换为内部接口并在其上调用它。不过，这种方法有点设计味道，因此请谨慎使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:33:35.327

您可以让内部接口扩展公共接口，如下所示：

```
public interface MyInternalInterface: MyPublicInterface
{
    string MyProperty { set; }
}

public interface MyPublicInterface
{
    string MyProperty { get; }
}

internal class A: MyInternalInterface
{
    public string MyProperty { get; set; }
}

public class Foo
{
    private A _a = new A();
    internal MyInternalInterface GetInternalA() { return _a; }
    public MyPublicInterface GetA() { return _a; }

} 
```

这样你就不需要任何演员或任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:11:41.360

*我认为@adrianbanks 的回答可能是对我的改进，但我不认为它真的是（尽管很漂亮）——因为你不能保证传递给你的公共接口实例也实现了内部接口实例——这这个解决方案也是如此。还有一个问题是，它仅在实现类型为`internal`- 如果您想提供公共类型作为标准接口实现或作为层次结构的基础时才有效。*

这就是我使用的。鉴于：

```
interface myInterface
{
  string myProperty { get; set; }
}

public interface myPublicInterface
{
  string myProperty { get; }
} 
```

首先，您*不能*进行`myPublicInterface`继承`myInterface`，因为编译器会抱怨不一致的可访问性。因此，您可以使用属性支持者显式地实现内部的，然后隐式地实现公共的：

```
public class MyClass : myInterface, myPublicInterface
{
    private string _myProperty;

    string myInterface.myProperty
    {
        get { return _myProperty; }
        set { _myProperty = value; }
    }

    public string myProperty
    {
        get { return _myProperty; }
    }
} 
```

注意 - 在某些情况下，getter 可能不适合私人支持者，但可能是一些从其他属性计算值的逻辑。在这种情况下——为了保持 DRY——你可以将逻辑放在公共 getter 中，并为显式 getter 提取它：

```
string myInterface.myProperty
{
  get { return MyProperty; }
  set { /*whatever logic you need to set the value*/ }
}

public string myProperty
{
  get { /*whatever complex logic is used to get the value*/ }
} 
```

你可以反过来做，但是你必须对内部接口做一个看起来很糟糕的内联转换：

```
string myInterface.myProperty
{
  get { /*whatever complex logic is used to get the value*/ }
  set { /*whatever logic you need to set the value*/ }
}

public string myProperty
{
  get { return ((myInterface)this).myProperty; }
} 
```

你应该尽可能地避开它。

# ios - Interface Builder 3 找不到 com.apple.imagekit.ibplugin

> ID：14279703
> 
> 赞同：1
> 
> 时间：2013-01-11T14:00:48.763
> 
> 标签：ios, objective-c

我在 Mountain Lion 中使用 Interface Builder 3。它运行良好，但由于某种原因无法加载 2 个 xib 文件。错误信息是：

```
Locate the com.apple.imagekit.ibplugin Interface Builder plug-in to continue opening this document. Press "continue" to continue opening without resolving the dependency. 
```

我不确定是什么样的插件`com.apple.imagekit.ibplugin`，我应该从哪里得到它。我确实找不到它安装在系统上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:42:43.877

您的错误意味着 Xcode（或 Interface Builder）不知道 com.apple.imagekit.ibplugin （这很奇怪）

在苹果的 Xcode 发行说明中，从 Xcode 4.1 开始，不再支持 IBPlugins。因此，它们在 Lion 中不存在（我相信）。为了解决此问题，请打开 Interface Builder 首选项，然后单击插件。如果您看到 imagekit，那很有趣，但您可能没有。这只是为了检查您是否有插件。

要解决此问题，您必须将 imagekit 框架重新添加到项目中。它现在应该可以工作了。如果没有，您必须转到界面构建器插件首选项并添加位于 imagekit 框架中的插件（在 imagekit.framework/resources 下）。

对不起，如果它不起作用，因为我没有遇到问题并且我也在运行 Xcode 4。

# c# - 显示不在表中的所有 AD 组成员

> ID：14279704
> 
> 赞同：-1
> 
> 时间：2013-01-11T14:00:54.003
> 
> 标签：c#, linq, linq-to-sql, active-directory

我将如何将以下 sql 查询转换为 LINQ

```
select *
from groupprincipal.members 
where displayname not in (select adusername 
                          from employees) 
```

我想列出 Active Directory 组中不在员工表中的所有成员

我试过了

```
var notLoggedIn = from groupMembers in groupPrincipal.Members
                          from loggedIn in employeeRepository.All
                          where groupMembers.DisplayName != loggedIn.ActiveDirectoryName
                          select groupMembers; 
```

但你会知道它没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:12:17.567

```
var notLoggedIn = from groupMembers in groupPrincipal.Members
                  where !employeeRepository.Select(p=> p.adUserName).Contains(groupMembers.DisplayName)
                  select groupMembers; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:09:32.853

我相信这应该这样做：

```
var notLoggedIn = 
from groupMembers in groupPrincipal.Members
where !(from loggedIn in employeeRepository.All
        select loggedIn.ActiveDirectoryName).Contains(groupMembers.DisplayName)
select notLoggedIn; 
```

# javascript - 使用 jQuery 添加动态 Javascript 会停止以前添加的功能

> ID：14279708
> 
> 赞同：0
> 
> 时间：2013-01-11T14:01:03.053
> 
> 标签：javascript, jquery

我有一个向表单添加可拖动元素的脚本。

这真的很好，直到我添加另一个 - 加上它的脚本 - 然后前一个就停止响应。这两个脚本都存在于 DOM 中。

为什么第一个停了？

我努力了

```
$.noConflict() 
```

和

```
jQuery.noConflict() 
```

但这只是让它完全停止工作。

我添加可拖动元素的脚本如下所示。

```
 function createTextBox() {
     //Random name for out text box. users dont see this.

     var textBoxName = 'tb_' + Math.floor(Math.random() * 10000)
     var html_script;

     html_script="<div id='draggable" + textBoxName + "' style='position: absolute; top: 100px; left: 100px;'>" +
              "<img src='../../Images/next.png' style='cursor: pointer;'/><img style='cursor: pointer;' src='../../Images/delete.png' onclick=\"RemoveTextBox('" + textBoxName + "')\"/>" +
              "<a href='#' class='data_field ui-draggable ui-resizable' id='draggable" + textBoxName + "'></a>" +
              "<textarea rows='5' cols='80' title='Text Box' data-tooltip='Tool'" +
              " data-width='100'" +
              " data-height='20'" +
              " data-topx='10'" +
              " data-topy='10" +
              " data-multiline='true'" +
              " data-hidden='false'" +
              " data-type='textBox'" +
              " name='" + textBoxName + "'" +
              " id='" + textBoxName + "'" +
              " class='data_field ui-widget-content ui-corner-all'" +
              " style='background-color: transparent; width: 100px; height: 20px;'>Text Box</textarea> " +
              "</div>" 

     document.getElementById('text_boxes').innerHTML += html_script;

     var java_script = "$(function () {" +
     "            var sh = 0;" +
     "            var sw = 0;" +
     "            $('#draggable" + textBoxName + "').draggable({" +
     "               drag: function (event, ui) {" +
     "                  dragposition = ui.position;" +
     "                  $('#" + textBoxName + "').attr('data-topx', dragposition.left);" +
     "                  $('#" + textBoxName + "').attr('data-topy', dragposition.top);" +
     "              }" +
     "        });" +
     "          $('#" + textBoxName + "').resizable({" +
     "              stop: function (event, ui) {" +
     "                 s = ui.size;" +
     "                 sh = s.height;" +
     "                 sw = s.width;" +
     "                 $('#" + textBoxName + "').attr('data-width', s.width);" +
     "                 $('#" + textBoxName + "').attr('data-height', s.height);" +
     "     }" +
     "  });" +
     "});"

     var script = document.createElement('script');
     script.type = 'text/javascript';
     script.text = java_script;
     document.getElementById("text_boxes").appendChild(script);
 }; 
```

如果有人认为它的代码不好但只使用了几个月，我真的很抱歉！

因此，每次用户单击图标时，我都会尝试执行此操作，从而生成一个可拖动的框。然后，如果用户产生另一个盒子，它们都保持可移动。

我确定有更好的方法可以不用为每个盒子生成一个脚本，但我还不知道！

谢谢

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:25:43.750

好吧，您的代码有几个问题。

**(1)**不要将 ID 定义为随机的。更多的盒子=更高的冲突概率。相反，只需在函数之前定义计数器并在内部更新它，即

```
var counter = 0;
function createTextBox() {
    var textBoxName = 'tb_' + counter;
    counter++
    // other code 
```

**(2)**你正在使用 jQuery，所以要充分利用它。例如这一行：

```
document.getElementById('text_boxes').innerHTML += html_script; 
```

应该

```
$( "#text_boxes" ).append( html_script ); 
```

例如，您的整个`html_script`变量可以是：

```
html_script = $( '<div></div>' );
html_script.attr( "id", "draggable"+textBoxName );
html_script.css({
    position : "absolute",
    top : 100
});
html_script.append( $( "<img></img>", { 
    src : "../../Images/next.png", 
    style : "cursor:pointer" 
});
...and so on 
```

更好的是：你应该只在你的 DOM 元素上设置类并单独处理 CSS。

**(3)**你`$(function(){...})`在你的 JavaScript 中使用。当 DOM 准备好时，JQuery 使用它来触发脚本。但是由于 ready 事件只触发一次，所以这个脚本只执行一次（假设`createTextBox()`在事件触发之前被调用）。这个函数里面的代码永远不会被调用！这就是为什么它不起作用。简单的解决方案：去除`$(function(){...})`包装。

**(4)**不要在 DOM 中添加 JavaScript 标签。它是 JavaScript，你不必弄乱 DOM 树。代替

```
var java_script = "$(function () {" +
     "            var sh = 0;" +
...and so on 
```

只需这样做：

```
var sh = 0;
var sw = 0;
$( "#draggable" + textBoxName ).draggable({
    drag : function(event, ui) {
        var dragposition = ui.position; // <--- missing var keyword
        ...and so on 
```

**(5)**在几个地方你缺少`var`关键字。没有关键字定义的变量`var`是全局的，对所有其他脚本可见。这可能会导致冲突。

经验法则：始终使用`var`. 如果要定义全局变量，请这样做：

```
window.myVar = 5; 
```

（请注意，这`window`是浏览器中的顶级对象）。

# wordpress - 将js文件和css文件添加到wordpress

> ID：14279709
> 
> 赞同：1
> 
> 时间：2013-01-11T14:01:06.433
> 
> 标签：wordpress

我是 wordpress 的新手。我已经安装了名为“hare”的主题。现在我想在 index.php 页面中添加一些 javascripts 文件和 css 文件。但我没有找到所需的输出。

以下是我写的代码..

```
 <?php get_header(); ?>
    // Some content
    <?php get_footer(); ?>
<!-- JQuery libs
================================================== -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<!-- js jQuery wait for images Plugin ====================== -->
<script src="<?php bloginfo(template_directory ); ?>/javascripts/jquery.waitforimages.js"></script>
<!-- js jQuery flexslider Plugin ====================== -->
<script src="<?php bloginfo(template_url); ?>/javascripts/jquery.flexslider-min.js"></script>
<!-- jQuery Cycle Plugin ====================================== -->
<script src="<?php bloginfo(template_url); ?>/javascripts/jquery.cycle.all.js"></script>
<!-- jQuery Cycle Plugin ====================================== -->
<script src="<?php bloginfo(template_url); ?>/javascripts/jquery.fullscreen-min.js"></script>
<!-- js jQuery jcarousellite Plugin ====================== -->
<script src="<?php bloginfo(template_url); ?>/javascripts/jcarousellite_1.0.1.min.js"></script>

<!-- js Fancybox Plugin ================================= -->
<link rel="stylesheet" href="<?php bloginfo(template_directory); ?>/javascripts/fancyBox-2/jquery.fancybox.css">
<script src="<?php bloginfo(template_url); ?>/javascripts/fancyBox-2/jquery.fancybox.pack.js"></script>
<!--fancybox helpers-->

<link rel="stylesheet" href="<?php bloginfo(template_directory); ?>/javascripts/fancyBox-2/helpers/jquery.fancybox-buttons.css"/>
<script src="<?php bloginfo(template_url); ?>/javascripts/fancyBox-2/helpers/jquery.fancybox-buttons.js"></script>
<!-- js jQuery qtip plugin ====================== -->
<script src="<?php bloginfo(template_url); ?>/javascripts/jquery.qtip-1.0.0-rc3.min.js"></script>
<!-- toTop ====================== -->
<script src="<?php bloginfo(template_url); ?>/javascripts/goToTop.js"></script>
<!-- js jQuery my own functions ====================== -->
<script src="<?php bloginfo(template_url); ?>/javascripts/functions.js"></script>

<!-- <script src="javascripts/jquery.tweet.js"></script> -->

<!-- JS twitter scripts ================================== -->
<script src="http://twitter.com/javascripts/blogger.js"></script>
<script src="http://twitter.com/statuses/user_timeline/EnvatoWebDesign.json?callback=twitterCallback2&amp;count=5"></script>

    <!-- End Document
    ================================================== -->
    </body>

    </html> 
```

我的这种方式正确吗？？如果不是那么请纠正我..

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-11T01:16:41.463

在您的评论中，您可能指的是[来自 yahoo 的这些指南](http://developer.yahoo.com/blogs/ydn/high-performance-sites-rule-6-move-scripts-bottom-7200.html)。然而，这条规则有一些警告。最重要的是，Google Analytics 更喜欢将它的代码段放在该`<head>`部分中，并且除非代码段在头部，否则不允许您使用 Analytics 进行网站管理员工具身份验证。

更重要的是，您不想像这样将 JS 和 CSS 文件直接包含在您的主题模板中。它有效，但它非常不适合 WordPress。

在 WordPress 主题中包含其他脚本和样式的“正确”方法是在functions.php的挂钩中使用`wp_enqueue_script()`and`wp_enqueue_style()` [函数，如下所示：](http://wordpress.org/search/wp_enqueue_style)

```
function my_custom_styles_function() {
wp_enqueue_style( 'my-style', get_stylesheet_directory() . DS . 'javascript' . DS . 'my-plugin' . DS . 'my-plugin-style.css', array(), '1.0' );
    ...
}
add_action('wp_enqueue_scripts', 'my_custom_styles_function'); 
```

WordPress 实际上默认包含 jQuery，尽管没有`$`建立快捷方式。您可以使用 WordPress 的 jQuery 并使用 not 启动所有自定义脚本，`jQuery(...);`但这`$(...);`可能会导致某些插件出现问题。如果你想包含你自己的 jquery 版本，你应该首先使用`wp_dequeue_style()`出[列](http://codex.wordpress.org/Function_Reference/wp_dequeue_style)“内置”jQuery。

最后，如果您*确实*想在页脚中包含脚本，该`wp_enqueue_script()`函数有一个标志，`$in_footer`用于将特定脚本推迟到页脚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-28T15:45:10.290

@qccreative 提供的答案是正确的。您应该使用您的主题中必须拥有的 functions.php 文件将您需要的所有 js/css 文件包含到您的页面中。如果你没有它，只需创建一个并制作一个导入文件的功能，就像上面的答案一样。

您甚至可以管理要在哪个页面加载脚本。

这也是 WP 提供的以有组织的方式包含脚本的最安全方式。

wordpress 提供的这个钩子 WP_ENQUEQUE_SCRIPTS 它是一个函数，可以将你的操作中的脚本添加到站点。

这是另一个例子：

```
function load_javascript_files(){

      wp_register_script( 'jquery-accordion', get_template_directory_uri() . '/js/jquery.accordion.js', array('jquery'),true );
      wp_enqueue_script('jquery-accordion'); 
  }

 add_action('wp_enqueue_scripts', 'load_javascript_files'); 
```

祝你好运朋友

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T20:02:23.753

从您放置的代码中，您将在主题文件夹中创建一个**header.php**文件，并将 JS 包含在其中。一个例子如下：

```
 `<!DOCTYPE html>
    <html>
    <head>
    <title><?php bloginfo( 'name' ); ?></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <script src="<?php bloginfo( 'template_url' ); ?>/jquery-1.8.3.min.js" type="text/javascript"></script>

    <script src="<?php bloginfo( 'template_url' ); ?>/jQuery-validate.js" type="text/javascript"></script>

<link rel="stylesheet" href="<?php bloginfo( 'template_url' ); ?>/style.css" type="text/css" />            
<?php wp_head(); ?>
</head>
<body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-04T19:53:14.877

```
/**
 * Proper way to enqueue scripts and styles.
 */

    function custom_links() {
        wp_enqueue_style( 'style-name', get_stylesheet_uri() );
        wp_enqueue_script( 'script-name', get_template_directory_uri() . '/js/example.js', array(), '1.0.0', true );
    }
    add_action( 'wp_enqueue_scripts', 'custom_links' ); 
```

如果您需要链接 CSS 文件，则可以使用**wp_enqueue_style**，如果需要链接 JavaScript，则可以使用**wp_enqueue_script**。

**wp_enqueue_scripts**这是在 wordpress 前端工作的。

**admin_enqueue_scripts**这适用于 wordpress 的后端。

我希望它对所有人都有帮助。

# c++ - 在opencv中获取灰度图像中的最大像素值

> ID：14279711
> 
> 赞同：0
> 
> 时间：2013-01-11T14:01:12.400
> 
> 标签：c++, opencv, mask, grayscale

在我进行一些图像处理并应用蒙版后，我得到了我想要的。我可以在“裁剪”的 imshow 结果中清楚地看到图像中间有灰色像素。我正在尝试获取最大像素值位置。我检查了crop.channels()，它返回1。

```
 Mat mask = drawing2;
    drawContours(mask, contours, -1, Scalar(255), CV_FILLED);
    Mat dist;
    distanceTransform( cannyInv, dist, CV_DIST_L2, 3 );
    normalize(dist,dist,0.0,1.0,NORM_MINMAX);
    Mat crop;
    dist.copyTo(crop, mask);
    cout << "max.. "<< *std::max_element(crop.begin<double>(),crop.end<double>()) <<endl; 
```

返回最大值.. 4.25593e-08

```
 for(int y = 0; y < crop.rows; y++)
    {
        for(int x = 0; x < crop.cols; x++)
        {
            if (crop.at<unsigned char>(x,y) > 0){      
                cout << "X........"<<x<<" Y......"<<y<< " = "<<crop.at<unsigned char>(x,y) <<endl;
            }
        }
    } 
```

输出是：

```
X........604 Y......479 = ¿
X........607 Y......479 =   
X........610 Y......479 = ¿ 
```

请帮帮我

PD：我知道有类似的问题。但这是具体问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T16:38:05.290

我不确定我是如何解决的。很多时间过去了。但是我目前拥有并且有效的代码是这样的：

```
 Mat dist=Mat::zeros(480,640, CV_8UC1);;
    distanceTransform( cannyInv, dist, CV_DIST_L2, 3 );
    Mat distNorm;
    dist.convertTo(distNorm, CV_8UC1,1,0);
    Mat result= Mat::zeros(480,640, CV_8UC1);
    distNorm.copyTo(result, mask);
    Mat tmp=Mat::zeros(480,640, CV_8UC1);
    Mat fik=Mat::zeros(480,640, CV_8UC3);
    for(int i = 0; i < result.rows; i++)
    {
        for(int j = 0; j < result.cols; j++)
        {
            if ( result.at< uchar >( i,j ) > 0){
                uchar val = result.at< uchar >( i,j  );
                if(val>maxVal){
                    if(val>0){
                        cv::circle(tmp,cvPoint(j,i),2,255,-1);
                    }
                    maxVal=val;
                    maxX = j;
                    maxY = i;
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T21:08:16.710

您确定标准化 Mat 会自动将其从 uchar 转换为 double 吗？数据很可能仍以 uchars 形式存储，而您从中读取了错误的数字。

尝试 dist.convertTo(dist, CV_64F); 到处打印数字作为双打

或仅使用 uchars。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T22:27:16.917

试试这个代码：

```
cout << "X........"
     << x
     << " Y......"
     << y
     << " = "
     << (double) crop.at< unsigned char>(x,y) <<endl; 
```

# java - Android ScrollView 过度滚动指示器问题

> ID：14279713
> 
> 赞同：0
> 
> 时间：2013-01-11T14:01:25.420
> 
> 标签：java, android, xml, scrollview, overscroll

这是我的三星 GT-I9003L 遇到的一个奇怪问题。我有一个 ScrollView，其中包含一个带有不同内容（ImageView、Button、EditText 等）的 LinearLayout，并且在 2.3.3 和 4.2 版本的模拟器中测试时它工作得很好。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scroll_view"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="16dp" >

        <ImageView
            android:id="@+id/image"
            android:layout_width="fill_parent"
            android:layout_height="200dp"
            android:contentDescription="@string/img_description"
            android:src="@drawable/ic_launcher" />

        <Button
            android:id="@+id/btn_camera"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/add_new_btn_camera" />

        <Button
            android:id="@+id/btn_gallery"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/add_new_btn_gallery" />

        <EditText
            android:id="@+id/name"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="@string/add_new_name_hint"
            android:inputType="text"
            android:maxLength="80" />

        [...]
    </LinearLayout>

</ScrollView> 
```

问题是当我在手机上测试它时，过度滚动指示器（蓝色/橙色发光）根本不显示。我设法让他们使用这条线：

```
ScrollView addNewScroll = (ScrollView)findViewById(R.id.scroll_view);
addNewScroll.setOverScrollMode(ScrollView.OVER_SCROLL_IF_CONTENT_SCROLLS); 
```

但是当我到达顶部或尽头时，光晕只是“出现”，它没有动画或淡入。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:48:56.963

我们遇到了完全相同的问题。Overscolling 似乎不适用于三星 Galaxy 2 (Touchwiz)，但也适用于 HTC One X 手机（旧款 H​​TC 似乎可以使用）。

怀疑他们用自己的替换了 ScrollView 实现，可能是为了弹性滚动条或其他东西。

# ruby-on-rails - 是否可以将默认值添加到现有列？

> ID：14279720
> 
> 赞同：0
> 
> 时间：2013-01-11T14:01:57.437
> 
> 标签：ruby-on-rails, ruby-on-rails-3, migration

我没有添加默认值就做了脚手架。
有没有可能的方法只向现有列添加默认值？
如果是这样，我该如何写入迁移文件？

我要添加默认值的值是配置文件表中的“country_id”列。

谢谢！！！

# php - 在 PHP 中按创建日期列出和链接大于 X 的文件

> ID：14279721
> 
> 赞同：0
> 
> 时间：2013-01-11T14:02:01.400
> 
> 标签：php, html

我在一组静态 HTML 页面上使用 php 列出文件并使用以下脚本链接它们：

```
<?php

$dir="./content"; // Directory where files are stored

if ($dir_list = opendir($dir)) {
    while(($filename = readdir($dir_list)) !== false) {
        //this kills the annoying .. and . directory listing
        if($filename == ".." || $filename == ".") continue; ?>
    <p><a href="<?php echo $filename; ?>"><?php echo $filename; ?></a></p>
<?php
}
closedir($dir_list);
}
?> 
```

我现在想做的是列出大于某个文件大小的文件（即大于 35 字节的文件）并按创建日期（从最新到最旧）对它们进行排序。

您的帮助和专业知识将不胜感激。提前对代码格式表示歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:04:49.747

使用[filesize()](http://php.net/manual/en/function.filesize.php)检查文件的大小，使用[filectime()](http://www.php.net/manual/en/function.filectime.php)获取创建日期。希望能给你一些方向。

```
if(filesize($filename) >= YOUR_LIMIT){
    //show file
} 
```

要进行排序，您可以将所有文件插入到数组中。像这样的东西：

```
while(($filename = readdir($dir_list)) !== false){
  $arr[filectime($filename)] = $filename;
} 
```

然后用[ksort()](http://php.net/manual/en/function.ksort.php)排序：

```
ksort($arr); 
```

然后将它们循环出来：

```
foreach ($arr as $value){
    echo $value;
} 
```

# regex - 正则表达式在输入中的任意位置查找字符类的 n 到 m 之间

> ID：14279723
> 
> 赞同：1
> 
> 时间：2013-01-11T14:02:11.627
> 
> 标签：regex, regex-lookarounds

断言输入中至少有 n 个但不超过 m 个字符类的正则表达式展望是什么。

举一个简单的具体例子，假设我想断言输入中有**5-8 位数字**，并且输入由单词字符和空格组成（即`[ \w]*`）。然后：

```
this line 123 does not match
this line 123 foo 456 matches
this line 123 % 456 does not match
this line 123 foo 456 bar 789 does not match 
```

我已经尝试了各种组合`{5,8}`：

```
^(?=(.*\d){5,8})[ \w]*$ 
```

但 的 上限`8`没有被应用为匹配上面的第 4 行（例如在[regexpal](http://regexpal.com/)上）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T14:08:40.257

`^`从字符串的开头，匹配 0 个或多个非数字，然后是数字`{5 to 8 times}`，然后是非数字，直到字符串的结尾`$`：

```
^([^\d]*\d){5,8}[^\d]*$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:55:14.553

我终于找到了办法。您必须使用*两种*前瞻性 - 一种用于下限，一种用于上限：

```
^(?=(.*\d){5,8})(?!(.*\d){9,})[\w ]+$ 
```

# java - 将 Access 数据库连接到 Java Netbeans

> ID：14279739
> 
> 赞同：-1
> 
> 时间：2013-01-11T14:03:18.957
> 
> 标签：java, database, ms-access, netbeans

我目前是一名信息系统学生，已完成最后一年的编程课程。我在任何方面都不擅长编程，并且依靠谷歌和课堂笔记来执行最简单的任务。

我的任务是设计一个简单的超市应用程序，它有 10 个项目。用户单击一个项目并选择数量/重量，然后在底部的文本框中将其添加到总计中。单击时，每个项目都会添加到总和中。

我已经做了我糟糕的技能所能做的事情，但我有两个错误。

1.  我在程序中手动写入了 10 个项目。它们需要通过访问数据库连接。我用谷歌搜索了这个方法，发现 Netbeans 对这个功能有很大帮助，通常只需要一行，例如

    DriverManager.getConnection("jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};Dbq=d:\test.mdb");

我不知道如何连接数据库或在连接到 Netbeans 时如何提取或使用信息。

1.  一开始，我对它进行了编程，一次只能选择一个项目。其余的将变为空白，只有单击的项目的总和会出现在下面的框中。对于我的生活，我无法弄清楚如何在单击时添加要添加的项目。我很确定这是一个简单的 SUM 函数，但我很困惑。

任何意见，将不胜感激。请尽可能简单地解释。我知道基础知识，但我的能力几乎没有延伸到“Hello World”程序哈哈

* * *

```
import static javax.swing.JOptionPane.*;
import java.sql.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.text.DecimalFormat;

public class Supermarket1 extends JFrame implements ActionListener {
Connection conn = null;

JButton oneP, twoP, fiveP, tenP, twentyP, fiftyP, onePound, twoPounds, fivePounds,            tenPounds, twentyPounds, fiftyPounds, beans, flakes, sugar, tea, coffee, bread, sausage,   egg, milk, potato;
JLabel messLabel = new JLabel("Amount to pay:  ");
JTextField message = new JTextField(10);
int amount = 0; // payment in pence
DecimalFormat pounds = new DecimalFormat("£0.00");

public static void main(String[] args) {
    Supermarket1 c = new Supermarket1();
    c.setTitle("Supermarket payment simulator");
    c.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    c.setSize(500, 200);
    c.setVisible(true);
}

Supermarket1() {
    setLayout(new BorderLayout());
    oneP = new JButton("1p"); oneP.addActionListener(this);
    twoP = new JButton("2p"); twoP.addActionListener(this);
    fiveP = new JButton("5p"); fiveP.addActionListener(this);
    tenP = new JButton("10p"); tenP.addActionListener(this);
    twentyP = new JButton("20p"); twentyP.addActionListener(this);
    fiftyP = new JButton("50p"); fiftyP.addActionListener(this);
    onePound = new JButton("£1"); onePound.addActionListener(this);
    twoPounds = new JButton("£2"); twoPounds.addActionListener(this);
    fivePounds = new JButton("£5"); fivePounds.addActionListener(this);
    tenPounds = new JButton("£10"); tenPounds.addActionListener(this);
    twentyPounds = new JButton("£20"); twentyPounds.addActionListener(this);
    fiftyPounds = new JButton("£50"); fiftyPounds.addActionListener(this);
    beans = new JButton("Baked Beans"); beans.addActionListener(this);
    flakes = new JButton("Corn Flakes"); flakes.addActionListener(this);
    sugar = new JButton("Sugar"); sugar.addActionListener(this);
    tea = new JButton("Tea Bags"); tea.addActionListener(this);
    coffee = new JButton("Instant Coffee"); coffee.addActionListener(this);
    bread = new JButton("Bread"); bread.addActionListener(this);
    sausage = new JButton("Sausage"); sausage.addActionListener(this);
    egg = new JButton("Egg"); egg.addActionListener(this);
    milk = new JButton("Milk"); milk.addActionListener(this);
    potato = new JButton("Potatoes"); potato.addActionListener(this);

    rightButtons();

    JPanel leftSide = new JPanel();
    leftSide.setLayout(new GridLayout(5, 1));
    leftSide.add(oneP);
    leftSide.add(twoP);
    leftSide.add(fiveP);
    leftSide.add(tenP);
    leftSide.add(twentyP);
    leftSide.add(fiftyP);
    leftSide.add(onePound);
    leftSide.add(twoPounds);
    leftSide.add(fivePounds);
    leftSide.add(tenPounds);
    leftSide.add(twentyPounds);
    leftSide.add(fiftyPounds);
    add("West", leftSide);

    JPanel rightSide = new JPanel();
    rightSide.setLayout(new GridLayout(10, 1));
    rightSide.add(beans);
    rightSide.add(flakes);
    rightSide.add(sugar);
    rightSide.add(tea);
    rightSide.add(coffee);
    rightSide.add(bread);
    rightSide.add(sausage);
    rightSide.add(egg);
    rightSide.add(milk);
    rightSide.add(potato);
    add("East", rightSide);

    JPanel middle = new JPanel();
    middle.setLayout(new FlowLayout());
    middle.add(messLabel);
    message.setEditable(false);
    middle.add(message);
    add("Center", middle);
}

public void actionPerformed(ActionEvent e) {
    if (e.getSource() == beans) { amount = 35; leftButtons(); }
    if (e.getSource() == flakes) { amount = 100; leftButtons(); }
    if (e.getSource() == sugar) { amount = 50; leftButtons(); }
    if (e.getSource() == tea) { amount = 115; leftButtons(); }
    if (e.getSource() == coffee) { amount = 250; leftButtons(); }
    if (e.getSource() == bread) { amount = 50; leftButtons(); }
    if (e.getSource() == sausage) { amount = 130; leftButtons(); }
    if (e.getSource() == egg) { amount = 75; leftButtons(); }
    if (e.getSource() == milk) { amount = 65; leftButtons(); }
    if (e.getSource() == potato) { amount = 125; leftButtons(); }
    if (e.getSource() == oneP) amount -= 1;
    if (e.getSource() == twoP) amount -= 2;
    if (e.getSource() == fiveP) amount -= 5;
    if (e.getSource() == tenP) amount -= 10;
    if (e.getSource() == twentyP) amount -= 20;
    if (e.getSource() == fiftyP) amount -= 50;
    if (e.getSource() == onePound) amount -= 100;
    if (e.getSource() == twoPounds) amount -= 200;
    if (e.getSource() == fivePounds) amount -= 500;
    if (e.getSource() == tenPounds) amount -= 1000;
    if (e.getSource() == twentyPounds) amount -= 2000;
    if (e.getSource() == fiftyPounds) amount -= 5000;

    if (amount > 0) message.setText(pounds.format(amount / 100.0));
    else {
        message.setText("");
        if (amount < 0) {
            int change = -amount;
            showMessageDialog(this, "Your change is "
                + pounds.format(change / 100.0)
                + coins(change),
                "Change", JOptionPane.INFORMATION_MESSAGE);
        } else {
            showMessageDialog(this, "Thank you",
                "Exact amount", JOptionPane.INFORMATION_MESSAGE);
        }
        rightButtons();
    }
}

// enable left buttons, disable right buttons
void leftButtons() {
    oneP.setEnabled(true);
    twoP.setEnabled(true);
    fiveP.setEnabled(true);
    tenP.setEnabled(true);
    twentyP.setEnabled(true);
    fiftyP.setEnabled(true);
    onePound.setEnabled(true);
    twoPounds.setEnabled(true);
    fivePounds.setEnabled(true);
    tenPounds.setEnabled(true);
    twentyPounds.setEnabled(true);
    fiftyPounds.setEnabled(true);
    beans.setEnabled(true);
    flakes.setEnabled(true);
    sugar.setEnabled(true);
    tea.setEnabled(true);
    coffee.setEnabled(true);
    bread.setEnabled(true);
    sausage.setEnabled(true);
    egg.setEnabled(true);
    milk.setEnabled(true);
    potato.setEnabled(true);
}

// enable right buttons, disable left buttons
void rightButtons() {
    oneP.setEnabled(false);
    twoP.setEnabled(false);
    fiveP.setEnabled(false);
    tenP.setEnabled(false);
    twentyP.setEnabled(false);
    fiftyP.setEnabled(false);
    onePound.setEnabled(false);
    twoPounds.setEnabled(false);
    fivePounds.setEnabled(false);
    tenPounds.setEnabled(false);
    twentyPounds.setEnabled(false);
    fiftyPounds.setEnabled(false);
    beans.setEnabled(true);
    flakes.setEnabled(true);
    sugar.setEnabled(true);
    tea.setEnabled(true);
    coffee.setEnabled(true);
    bread.setEnabled(true);
    sausage.setEnabled(true);
    egg.setEnabled(true);
    milk.setEnabled(true);
    potato.setEnabled(true);
}

String coins(int change) {
    String answer = ":";
    if (change >= 5000) {
        answer += "\nOne £50 note";
        change -= 5000;
    }
    if (change >= 4000) {
        answer += "\nTwo £20 notes";
        change -= 4000;
    }
    if (change >= 2000) {
        answer += "\nOne £20 note";
        change -= 2000;
    }
    if (change >= 1000) {
        answer += "\nOne £10 note";
        change -= 1000;
    }
    if (change >= 500) {
        answer += "\nOne £5 note";
        change -= 500;
    }
    if (change >= 400) {
        answer += "\nTwo £2 coin";
        change -= 400;
    }
    if (change >= 200) {
        answer += "\nOne £2 coin";
        change -= 200;
    }
    if (change >= 100) {
        answer += "\nOne £1 coin";
        change -= 100;
    }
    if (change >= 50) {
        answer += "\nOne 50p coin";
        change -= 50;
    }
    if (change >= 40) {
        answer += "\nTwo 20p coins";
        change -= 40;
    }
    if (change >= 20) {
        answer += "\nOne 20p coin";
        change -= 20;
    }
    if (change >= 10) {
        answer += "\nOne 10p coin";
        change -= 10;
    }
    if (change >= 5) {
        answer += "\nOne 5p coin";
        change -= 5;
    }
    if (change >= 4) {
        answer += "\nTwo 2p coin";
        change -= 4;
    }
    if (change >= 2) {
        answer += "\nOne 2p coin";
        change -= 2;
    }
    if (change >= 1) {
        answer += "\nOne 1p coin";
        change -= 1;
    }
    return answer;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:07:54.983

NetBeans 只是一个 IDE；您没有将任何东西连接到 NetBeans。

您的 Java 代码是连接到 Access 数据库的代码。

您正在做的是建立 JDBC 连接。我推荐一个[JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/)。

听起来你犯了一个典型的学生错误：分解不良。

你通过将大问题分解成你可以处理的小问题来解决它们。

你有一个用户界面、数据库访问和你的应用程序都在这里进行。我建议您首先从数据库访问开始。编写一个处理您需要的 Java 对象。对其进行彻底测试，然后使用它对您的用户界面进行下一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T20:30:15.983

```
public class StudentFunctions  implements StudentInterface
{
    String database = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ=//////URL where your database is located//////";

    String query = "";

    Connection conn;
    Statement s;

@Override
public boolean AddStudent(String name, String age, String contact, String program) {
 try {
     Connection conn = DriverManager.getConnection(database, "", "");
       Statement s = conn.createStatement();
        query ="insert into StudentRecord([stname],[age],[contact],[program])values('"+name+"','"+age+"','"+contact+"','"+program+"')";

        if(s.executeUpdate(query) > 0)
        {
             JOptionPane.showMessageDialog(null,"Record successfully add in database");
            return true;
        } else {
            return false;
        }
 } catch (SQLException ex) {
     JOptionPane.showMessageDialog(null,ex.getMessage());
     Logger.getLogger(StudentFunctions.class.getName()).log(Level.SEVERE, null, ex);
 } 
```

这是我连接访问我的学生记录项目的代码，希望它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T17:56:18.823

从以下位置修改您的代码：

```
DriverManager.getConnection("jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};Dbq=d:\test.mdb"); 
```

使用双反斜杠 ( `\\`)

```
DriverManager.getConnection("jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};Dbq=d:\\test.mdb"); 
```

# java - Xuggler NoClassDefFoundError

> ID：14279751
> 
> 赞同：1
> 
> 时间：2013-01-11T14:03:54.307
> 
> 标签：java, xuggler

我正在尝试使用以下教程制作一个简单的媒体播放器： [http ://www.youtube.com/watch?v=9aJvPPzhyik](http://www.youtube.com/watch?v=9aJvPPzhyik)

首先，我将解释我到目前为止所做的事情，我在没有使用 Apache Maven 或 Apache Ivy 的情况下下载了 xuggler，我进入了 5.1 版并且只下载了 xuggle-xuggler-5.4.jar，我将它导入到eclipse 并且它起作用了，因为我开始编写我的代码并且所有媒体类都没有错误。

我需要一个 flv 文件，所以我只是将任何随机 youtube 链接放入该网站[http://keepvid.com/?url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DvNoKguSdy4Y](http://keepvid.com/?url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DvNoKguSdy4Y)并获得了我的 flv 视频下载到我的桌​​面，现在这是我认为问题所在，在教程中显示他必须将此flv视频放入 Xuggle/Workspace/MediaToolsIntro1 但由于我刚刚下载了一个 jar 文件，所以我没有 xuggle 文件夹，只有我的桌面上有一个 jar 文件，所以我把它放到了 Users/Me/Workspace/Myjavaproject 中。我运行代码并收到以下错误：

线程“主”java.lang.NoClassDefFoundError 中的异常：org/slf4j/LoggerFactory

我做错了什么，当指南视频中的程序员这样做时，他会在他的 flv 旁边创建一个 QT 文件，但我得到一个错误，我和他之间的唯一区别是 flv 文件位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:23:37.463

我建议你下载所有`jar`文件并将它们放在你的类路径中。

# jquery - JQuery，如何在 div 中放置图像？

> ID：14279753
> 
> 赞同：-2
> 
> 时间：2013-01-11T14:03:56.207
> 
> 标签：jquery, image, html

我正在尝试将图像放置在 div 中。

```
function pleaseW(){
    $('#info').html("Please wait ...");                         //1 this works
    $('#info').html("<img id='busy01' src='busy01.gif' />");    //2 doesn't work
    $('#info').append("<img id='busy01' src='busy01.gif' />");  //3 doesn't work
    $('#info').prepend("<img id='busy01' src='busy01.gif' />"); //4 doesn't work
} 
```

调用的图像`busy01.gif`与当前文件位于同一文件夹中。问题是第 2、3 和 4 行没有在 div 中放置图像。

如果我将 html 直接放入页面中，则会显示图像。页面一定有一些不相关的问题，因为这个 Javascript/jQuery 是完全有效的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:07:04.860

尝试

```
$('#info').html("<img id='busy01' style='width:100px; height:100px;' src='busy01.gif' />"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T19:33:44.800

**来自作者：**

我将脚本从页面底部移动到 html 的头部。现在它起作用了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T14:06:11.730

这似乎是浏览器兼容性的一个古老问题，而不是 JavaScript 问题。

这些行中的每一行都应该显示一个图像：

```
function pleaseW(){
    $('#info').html("<img id='busy01' src='busy01.gif' />");    //2 doesn't work
    $('#info').append("<img id='busy01' src='busy01.gif' />");  //3 doesn't work
    $('#info').prepend("<img id='busy01' src='busy01.gif' />"); //4 doesn't work
} 
```

# javascript - 一种将“for”变量的当前迭代保留在闭包中的方法

> ID：14279754
> 
> 赞同：0
> 
> 时间：2013-01-11T14:04:03.817
> 
> 标签：javascript, closures

> **可能重复：**
> [循环内的 Javascript 闭包 - 简单的实际示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

```
for (i=0; i<N; i++) {
   $.get("script"+ i +".jsp", function() {
       //I want to use i here
       //but by the time the ajax request comes back i==N, but I want the old i
   })
} 
```

所以我得到了这段代码，我想知道是否有比我的回复更好的方法来做到这一点。这与 jquery ajax 调用无关，我知道有办法通过事件对象传递“i”，我想要一个比我想出的更好的通用解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:04:03.817

制作一个自动执行的函数来保存 i 工作，但非常难看：

```
for (i=0; i<N; i++) {
   (function(i) {
      $.get("script"+ i +".jsp", function() {
          //I want to use i here
          //but by the time the ajax request comes back i==N, but I want the old i
      })
   } (i) );
} 
```

# asp.net - 将 Asp.net 应用程序部署到 IIS 服务器时出错

> ID：14279756
> 
> 赞同：0
> 
> 时间：2013-01-11T14:04:17.343
> 
> 标签：asp.net, iis

将 Asp.Net 应用程序部署到 IIs 服务器时出错。

HTTP 错误 500.19 - 内部服务器错误

此配置部分不能在此路径中使用。当该部分锁定在父级别时会发生这种情况。锁定是默认情况下 (overrideModeDefault="Deny")，或由具有 overrideMode="Deny" 或传统 allowOverride="false" 的位置标记显式设置。

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
</authentication>

<membership>
  <providers>
    <clear/>
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
         enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
         maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
         applicationName="/" />
  </providers>
</membership>

<profile>
  <providers>
    <clear/>
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
  </providers>
</profile>

<roleManager enabled="false">
  <providers>
    <clear/>
    <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
    <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
  </providers>
</roleManager> 
```

我是 ASP.Net 的新手。帮助我如何解决这个问题。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:10:02.487

解决方案是更改 applicationHost.config 文件。

1.  浏览到“C:\Windows\System32\inetsrv\config”（这里需要管理员权限）

2.  打开 applicationHost.config

3.  找到错误消息页面的“配置源”部分中显示的部分。对我来说，这通常是“模块”或“处理程序”</p>

4.  将 overrideModeDefault 属性更改为“允许”</p>

5.  所以整行现在看起来像：

保存文件后，页面在我的浏览器中加载正常。

欲了解更多信息：[http ://blog.thinkoriginally.com/2010/02/17/asp-net-config-error-this-configuration-section-cannot-be-used-at-this-path/](http://blog.thinkoriginally.com/2010/02/17/asp-net-config-error-this-configuration-section-cannot-be-used-at-this-path/)

# mysql - JOIN 同一张表的数据

> ID：14279757
> 
> 赞同：1
> 
> 时间：2013-01-11T14:04:17.507
> 
> 标签：mysql, database, join

我有一个表格，其中包含学生的姓名、电子邮件、职位等，以及他们的“状态”（可以是 Y 或 N 之一。）我想编写一个查询来计算每种职位的数量，以及使用 JOIN 的每种类型内的 Y 的数量和 N 的数量。（也就是说，这将是一个包含三列的表：Position、StatusIsYes 和 StatusIsNo。）

我已经通过以下方式使用 CASE 子句完成了此操作，但我无法弄清楚如何使用 JOIN 子句来执行此操作。

```
SELECT position,
COUNT(CASE WHEN status = 'Y' THEN 1 ELSE NULL END) AS StatusIsYes,
COUNT(CASE WHEN status = 'N' THEN 1 ELSE NULL END) AS StatusIsNo
 FROM 
students GROUP BY crd 
```

我很感激任何建议！

编辑：我知道它可以在*不*使用 JOIN 的情况下完成，但我想知道如何使用 JOIN*来*完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:08:43.097

您不需要加入：

```
SELECT
    position,
    SUM(status = 'Y') AS StatusIsYes,
    SUM(status = 'N') AS StatusIsNo
FROM students
GROUP BY position 
```

注意 的相当时髦的分配`CASE`，因为在 mysql 中（仅）`true`is`1`和`false`is `0`，所以`sum()`一个条件计算它有多少次是真的:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:09:42.363

尝试 ：：

```
SELECT 
position,
COUNT(status = 'Y' ) AS StatusIsYes,
COUNT(status = 'N' ) AS StatusIsNo
 FROM 
students GROUP BY POSITION 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T14:32:14.207

当您想从同一个表中获取记录时，您可以使用 SELF JOIN。
例如：
**表名称**：员工
**字段**：EmpId，EmpName，ManagerId
现在，如果您想获取处于经理职位的员工的详细信息，我们需要编写如下查询：
SELECT e1.EmpId，e1.EmpName FROM EmployeeDetails e1 , EmployeeDetails e2 其中e1.EmpId=e2.ManagerId;

希望它会帮助你。

如需更多信息，请查看[此](http://www.w3resource.com/sql/joins/perform-a-self-join.php)链接。

# asp.net - 如何抑制 DataGrid 中的虚假换行符？

> ID：14279758
> 
> 赞同：0
> 
> 时间：2013-01-11T14:04:19.553
> 
> 标签：asp.net, datagrid

我有一个像这样创建的 DataGrid：-

```
<asp:DataGrid id="myGrid"
              BorderWidth="1"
              CellPadding="3"
              AutoGenerateColumns="true"
              runat="server"
              OnSelectedIndexChanged="myGridSelectedCallback">
    <HeaderStyle CssClass="subHeader"></HeaderStyle >
    <Columns>
        <asp:ButtonColumn HeaderText=""
                          ButtonType="LinkButton"
                          Text="Display"
                          CommandName="Select">
        </asp:ButtonColumn>
     </Columns>
 </asp:DataGrid> 
```

并在代码隐藏中添加列，如下所示：-

```
 DataTable dt = new DataTable();
 dt.Columns.Add(new DataColumn("MyCol", typeof(string))); 
```

但是当我向其中添加行时，有时列中的文本会换行。似乎没有任何理由。该列的 MaxLength 为 -1，并且添加的字符串中没有换行符或其他控制字符。

我想要做的是加宽列以容纳其中最长的字符串（字符串只有约 20 个字符左右）。我在这方面找不到任何东西，因为其他人似乎都有相反的问题。

（此网格包含在 a`div`中，但`div`没有最大宽度。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:30:12.060

尝试使用`HeaderStyle-Wrap="False"`

```
<asp:DataGrid id="DataGrid1" runat="server">
    <Columns>
        <asp:BoundColumn HeaderStyle-Wrap="False"></asp:BoundColumn>
        <asp:TemplateColumn HeaderStyle-Wrap="False"></asp:TemplateColumn>
    </Columns>
</asp:DataGrid> 
```

此外，您可以检查：[DataGrid Web 服务器控件在 Visual Basic .NET 中 ItemStyle Wrap 属性或 HeaderStyle Wrap 属性设置为 false 时进行换行](http://support.microsoft.com/kb/323169)

# java - 适用于 java 7 的简单代码度量独立 maven 插件

> ID：14279759
> 
> 赞同：8
> 
> 时间：2013-01-11T14:04:21.110
> 
> 标签：java, maven, maven-3, code-analysis

我正在寻找一种为 maven 多模块 java 7 构建生成简单指标报告（更具体地说，代码行）的方法。

*   我已经尝试过 maven [javancss 插件](http://mojo.codehaus.org/javancss-maven-plugin/)，但它在 java 7 语法上窒息，似乎被放弃了。
*   我知道 maven[声纳插件](http://mojo.codehaus.org/sonar-maven-plugin/)，但我不想安装（和维护）声纳安装，我只想要一个简单的静态 html。
*   我查看了[cloc](http://cloc.sourceforge.net/)和[代码分析器](http://sourceforge.net/projects/codeanalyze-gpl/)，但找不到任何将它们集成到 maven 构建中的方法

所以我的问题是 - 我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:15:15.633

声纳真的很容易安装。下载包解压并运行批处理脚本。它将使用嵌入式数据库和 Web 服务器

如下运行 Maven 假设 Sonar 在本地运行，因此您不需要在 POM 中进行任何特殊配置。

```
 mvn sonar:sonar 
```

我建议尝试一下。它似乎更复杂，但 Sonar 团队已经做了很多工作来使 Sonar 真正易于使用。

# linux - sed 在每一行重复字符串

> ID：14279762
> 
> 赞同：1
> 
> 时间：2013-01-11T14:04:33.160
> 
> 标签：linux, bash, shell, sed, grep

我有一个`inventory.txt`包含数百行的文件。它列出了与客户 ID/名称、库存 ID/名称和产品 ID/名称相关的数据。`customerId=123`可能出现在任何给定行上的文件的一般设置 a 。在这条线之后，`inventoryId=abc`将出现一条线。这个文件看起来像这样：

```
<> START OF FILE
Customer ID=9000, Customer Name=Acme, Inc
Inventory ID=INV_ID1, Inventory Name=Acme_INV1
Product ID=100, Product Name=Banana
Product ID=200, Product Name=Apple
Inventory ID=INV_ID2, Inventory Name=Acme_INV2
Product ID=100, Product Name=Banana
Product ID=300, Product Name=Kiwi
Customer ID=7500, Customer Name=Anvil, Corp
Inventory ID=INV_ID3, Inventory Name=Anvil_INV1
Product ID=200, Product Name=Apple
<> END OF FILE 
```

我想使用 SED 或任何运行良好的替代方法创建一个 CSV 格式的文件，该文件为每个客户/库存组合包含一行数据，其中仅包括客户 ID/名称和库存 ID/名称字段。所以输出看起来像：

```
"9000", "Acme, Inc.", "INV_ID1", "Acme_INV1"
"9000", "Acme, Inc.", "INV_ID2", "Acme_INV2"
"7500", "Anvil, Inc.", "INV_ID3", "Anvil_INV1" 
```

我了解如何使用 SED 将输入数据格式化为带有逗号和引号的 CSV 文件输出，但我无法弄清楚如何强制`Customer ID`and在每一行`Customer Name`的开头重复。`Inventory ID``Inventory Name`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:28:47.993

这是一种使用方法`awk`：

```
awk -F= '{ sub(/,.*/,"",$2) } /^Customer ID/ { r = $2 OFS $3 } /^Inventory ID/ { print "\"" r, $2, $3 "\"" }' OFS="\", \"" inventory.txt 
```

或`sed`解决方案：

```
sed -n '/^Customer ID/ h; /^Inventory ID/ { G; s/.*=\([^,]*\).*=\([^\n]*\).*=\([^,]*\).*=\(.*\)/"\3", "\4", "\1", "\2"/; p }' inventory.txt 
```

结果：

```
"9000", "Acme, Inc", "INV_ID1", "Acme_INV1"
"9000", "Acme, Inc", "INV_ID2", "Acme_INV2"
"7500", "Anvil, Corp", "INV_ID3", "Anvil_INV1" 
```

* * *

`awk`解释：

```
 OFS="\", \""          # set the output field separator to: ", "

-F=                    # split the line into three fields using the '=' character

{ sub(/,.*/,"",$2) }   # one each line of input, remove everything trailing a
                       # comma from field two.

/^Customer ID/ { ... } # if the line starts with 'Customer ID'; do

r = $2 OFS $3          # build a record using field two and three separated by 'OFS'

/^Inventory ID/ {...}  # if the line starts with 'Inventory ID'; do

print "\"" r, $2, $3 "\""   # print out a double-quote, the record, OFS, $2, OFS, 
                            # $3 and lastly a double quote 
```

`sed`解释：

> `-n`使用标志禁用默认打印。当一行以“客户 ID”开头时，复制该行以保留空间。当找到以“Inventory ID”开头的行时，将保留空间附加到当前行。使用一些神奇的正则表达式重新排列不同的字段并修复格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:13:21.460

这可能对您有用（GNU sed）：

```
sed -r '/^Customer/{h;d};/^Inventory/!d;G;s/.*=([^,]*).*=([^\n]*).*=([^,]*).*=(.*)/"\3", "\4", "\1", "\2"/' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T14:17:56.340

Perl 解决方案：

```
#!/usr/bin/perl
use warnings;
use strict;
use feature qw(say);

my ($customer, $name);
while (<>) {
    if (/Customer ID=(.*), Customer Name=(.*)/) {
        ($customer, $name) = ($1, $2);
    } elsif (/Inventory ID=(.*), Inventory Name=(.*)/) {
        say join ', ' => map qq("$_"), $customer, $name, $1, $2;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T14:57:42.973

另一个不使用 FS 的 awk one-liner

```
awk -vq="\"" '/^(Cus|Inv)/{f=$0~/^Cus/;gsub(/[^,]*=/,q);sub(/,/,q",");c=f?$0q:c;if(!f)print c","$0q}' file 
```

测试：

```
kent$  echo "Customer ID=9000, Customer Name=Acme, Inc
Inventory ID=INV_ID1, Inventory Name=Acme_INV1
Product ID=100, Product Name=Banana
Product ID=200, Product Name=Apple
Inventory ID=INV_ID2, Inventory Name=Acme_INV2
Product ID=100, Product Name=Banana
Product ID=300, Product Name=Kiwi
Customer ID=7500, Customer Name=Anvil, Corp
Inventory ID=INV_ID3, Inventory Name=Anvil_INV1
Product ID=200, Product Name=Apple"|awk -vq="\"" '/^(Cus|Inv)/{f=$0~/^Cus/;gsub(/[^,]*=/,q);sub(/,/,q",");c=f?$0q:c;if(!f)print c","$0q}'                                   
"9000","Acme, Inc","INV_ID1","Acme_INV1"
"9000","Acme, Inc","INV_ID2","Acme_INV2"
"7500","Anvil, Corp","INV_ID3","Anvil_INV1" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T16:30:01.887

[`match()`](http://www.gnu.org/software/gawk/manual/html_node/String-Functions.html#index-g_t_0040code_007bmatch_0028_0029_007d-function-1373)对函数使用 gawk 扩展

```
gawk '
    match($0, /^Customer ID=([^,]+), Customer Name=(.*)/, cust) {
        c_id=cust[1]; c_name=cust[2]
        next
    }
    match($0, /^Inventory ID=([^,]+), Inventory Name=(.*)/, inv) {
        printf "\"%s\",\"%s\",\"%s\",\"%s\"\n", c_id, c_name, inv[1], inv[2]
    }
' filename 
```

输出

```
"9000","Acme, Inc","INV_ID1","Acme_INV1"
"9000","Acme, Inc","INV_ID2","Acme_INV2"
"7500","Anvil, Corp","INV_ID3","Anvil_INV1" 
```

# java - 从写入器向读取器发出信号时正确使用 ReentrantReadWriteLock？

> ID：14279765
> 
> 赞同：3
> 
> 时间：2013-01-11T14:04:36.007
> 
> 标签：java, multithreading, concurrency, reentrantreadwritelock

使用模式源于以下原因：

1.  如果条件不存在，我需要读取线程来等待数据。

2.  读锁不支持条件，所以条件应该取自写锁。

3.  由于读线程会等待条件，它也应该获得写锁来等待。

我在课堂上有以下锁定义：

```
private final ReentrantReadWriteLock rwl = new ReentrantReadWriteLock();
protected final Lock readLock = rwl.readLock();
protected final Lock writeLock = rwl.writeLock();
protected final Condition hasData = writeLock.newCondition(); 
```

在我的作家方法中，我有以下模式：

```
try {
   writeLock.lock();    

   //...

   if( something_written ) {
      hasData.signalAll();
   }

}
finally {
   writeLock.unlock();
} 
```

在我的阅读方法中，我有以下模式

```
try {
   readLock.lock();    

   while( data_absent ) {

      // I need to acquire write lock to wait for condition!
      try {

          // first releasing read lock since we can't acquire write lock otherwise
          // unfortunately this won't release a lock if it was acquired more than once (reentrant)
          readLock.unlock();

          // acquiring write lock to wait it's condition
          writeLock.lock();
          hasData.await(1000, TimeUnit.MILLISECONDS);
      }
      finally {

          // releasing write lock back
          writeLock.unlock();

          // reacquiring read lock
          // again see note about reentrancy
          readLock.lock();
      }

   }

   // reading

}
finally {
   readLock.unlock();
} 
```

上面的模式正确吗？

问题是如果读者是可重入的，即多次锁定读，则释放代码不起作用，读者在获得写锁的那一行挂起。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T11:40:11.780

这听起来像是经典的生产者/消费者模式，所以我建议您为此目的查看现有数据结构，例如[BlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)实现。

队列中的生产者线程`put()`数据，队列中的消费者线程`take()`数据。

手动同步/锁定应始终是最后的手段。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T14:12:55.743

你的使用模式是错误的：阅读器必须只使用读锁；作家也一样。语义是这样的：只要写锁是空闲的，许多读者可以一次获得读锁；只有在没有获取其他锁（读取或写入）时，writer 才能获取写入锁。

在您的编写器代码中，您尝试在仍持有写锁的同时获取读锁；对于阅读器代码也是如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T20:43:14.243

这是我在你的情况下会做的：

```
private final ReentrantReadWriteLock    rwl         = new ReentrantReadWriteLock();
protected final Lock                    readLock    = rwl.readLock();
protected final Lock                    writeLock   = rwl.writeLock();
protected final Condition               hasData     = writeLock.newCondition();

public void write() {

    writeLock.lock();
    try {
        // write data
        // ...
        if (something_written) {
            hasData.signalAll();
        }
    }
    finally {
        writeLock.unlock();
    }
}

// replace Object by something else
public Object read() throws InterruptedException {

    Object data = tryRead();

    while (data == null) {
        waitForData();
        data = tryRead();
    }

    return data;
}

// replace Object by something else
private Object tryRead() {

    readLock.lock();
    try {
        Object data = null;
        // read data
        // ...
        // if there no data available, return null
        return data;
    }
    finally {
        readLock.unlock();
    }
}

private void waitForData() throws InterruptedException {

    writeLock.lock();
    try {
        boolean data_available = // check data
        while (!data_available) {
            hasData.await(1000L, TimeUnit.MILLISECONDS);
            data_available = // check data
        }
    }
    finally {
        writeLock.unlock();
    }
} 
```

**如果有可供读取的数据，** 这与典型的 ReadWriteLock 用例的行为相同。如果不存在数据，则读取器将成为“写入器”（在锁的意义上）并等待直到某些数据可用。循环重复直到返回一些可用数据（或直到发生中断）。

* * *

由于您使用的是 ReadWriteLock，这意味着您期望**读取次数比写入次数多得多**，因此您选择了一个可以最大限度地减少读取器线程之间争用的锁（readLock）。

waitForData() 方法将读取器变成“写入器”，因为它们锁定在 writeLock 上，导致所有线程（读取器和写入器）之间的争用增加。但是，由于假定写入比读取少得多，因此不会出现数据在“可用”和“不可用”之间快速切换的情况。换句话说，*假设写入很少*：

*   如果没有可供读取的数据，那么几乎所有的读取器通常都会在一段时间后阻塞在方法 waitForData() 中，并且在写入一些新数据时都会同时收到通知。

*   如果有一些可用的数据可供读取，那么所有读取器都将简单地读取它，而不会在锁定 readLock 时在线程之间产生任何争用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T16:04:28.410

我认为你想要做的是让你的读者等待作家写，然后返回**一些**价值。如果没有价值，您希望您的阅读器线程只是等待或休眠。那是对的吗 ？如果我的理解是正确的，这是*一种方法*。

```
private final ReentrantReadWriteLock rwl = new ReentrantReadWriteLock();
protected final Lock readLock = rwl.readLock();
protected final Lock writeLock = rwl.writeLock();
protected final Condition hasData = writeLock.newCondition();
private HashMap myData = new HashMap(); //example structure to read and write

private final ReentrantLock dataArrivalLock = new ReentrantLock();
private final Condition dataArrivalSignal = dataArrivalLock.newCondition(); 
```

你的作家方法模式：

```
try {
   writeLock.lock();    

   //...
   myData.put("foo","ffoo"); //write something !!
   if( something_written ) {
      hasData.signalAll();
   }

}
finally {
   writeLock.unlock();
}
  try {
                //signal other threads that data has been put in
                dataArrivalLock.lock();
                dataArrivalSignal.signalAll();

            } finally {
                dataArrivalLock.unlock();
            } 
```

您的阅读器方法模式

```
try {
            boolean gotData = false;
            while (!gotData) {
                try {
                    readLock.lock();
                    if (myData.size() > 0) {
                        gotData = true;
                        //retrieve the data that is written by writer thred!!
                        myData.get("foo");
                    }
                } finally {
                    readLock.unlock();
                }
                if(!gotData) {
 //sleep the reader thread for x milliseconds. x depends on your application requirement
                  //   Thread.sleep(250);
                    try {
                        //instead of Thread.sleep(), use the dataArrivalLock signal to wakeup
                        dataArrivalLock.lock();
                        dataArrivalSignal.await();
                        //based on how the application works a timed wait might be better !!
                        //dataArrivalSignal.await(250);
                    } finally {
                        dataArrivalLock.unlock();
                    }
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

这样做是**强制**您的阅读器线程休眠**，直到**写入器线程写入一些数据。

> （而不是 Thread.sleep(250)，你也可以使用一个额外的锁 b/w reader 和 writer 来做同样的事情）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T18:36:49.627

以下方法怎么样（注释在代码中）：

```
public class ReadWrite
{
    private final Lock readLock;
    private final Lock writeLock;
    private final Condition condition;

    {
        ReadWriteLock rwl = new ReentrantReadWriteLock ();
        readLock = rwl.readLock ();
        writeLock = rwl.writeLock ();
        condition = writeLock.newCondition ();
    }

    private Object data;

    // If data is there, return it, otherwise, return null
    private Object tryGetData ()
    {
        readLock.lock ();
        try
        {
            return data; // May return null
        }
        finally
        {
            readLock.unlock ();
        }
    }

    // Wait for data if necessary and then return it
    private Object doGetData () throws InterruptedException
    {
        writeLock.lock ();
        try
        {
            while (data == null)
                condition.await ();

            return data;
        }
        finally
        {
            writeLock.unlock ();
        }
    }

    // Used by reader, return value cannot be null, may block
    public Object getData () throws InterruptedException
    {
        Object result = tryGetData ();
        return result == null ? doGetData () : result;
    }

    // Used by writer, data may be null
    public void setData (Object data)
    {
        writeLock.lock ();
        try
        {
            Object previousData = this.data;
            this.data = data;
            if (previousData == null && data != null)
                condition.notifyAll ();
        }
        finally
        {
            writeLock.unlock ();
        }
    }
} 
```

# jquery-selectors - jQuery单击下一个元素

> ID：14279774
> 
> 赞同：0
> 
> 时间：2013-01-11T14:04:53.867
> 
> 标签：jquery-selectors, jquery, next

我在编写 jQuery 时遇到问题，我希望你能帮助我，即使你像外星人一样会说英语 %)。

我正在做一个水平滚动的网站，你可以在这里看到它[http://www.kinetics.ru/index_kin.html](http://www.kinetics.ru/index_kin.html) 我在左侧有一个菜单，底部有两个按钮 PREV 和 NEXT。菜单工作正常，但我需要让底部按钮工作。例如，通过单击 NEXT，我需要该代码在具有样式“on”的菜单之后单击下一个菜单 btn。

代码是：

```
<div class="menu">
        <ul class="nav">
           <li id="main"><a href="#about"><img src="img/menu/about.png" /></a></li>
           <li><a href="#uslugi"><img src="img/menu/uslugi.png"/></a></li>
           <li><a href="#portfolio"><img src="img/menu/portfolio.png"/></a></li>
           <li><a href="#clients"><img src="img/menu/clients.png"/></a></li>
           <li><a href="#contacts"><img src="img/menu/contacts.png"/></a></li>
        </ul>
    </div>
...
<div class="bottomNav" style="position: absolute; z-index: 11">
<div style="height: 26px; width:98px; margin:-75px 0 0 500px; position: fixed" class="back"><img src="img/back.png"</div>
<div style="height: 26px; width:114px; margin:-25px 0 0 600px; position: fixed" id="next"><img src="img/forward.png"</div> 
```

我的下一个 btn 的 jQuery 代码不起作用：

```
$('bottomNav, #next img').click(function(){
    if ($('ul.nav').find('img').hasClass('on')){
        $('ul.nav').next().click();
    }
}); 
```

我也试过这样做：

```
 $('bottomNav, #next img').click(function(){
    $('ul.nav img').click(function(){
        if ($(this).hasClass('on')){
            $(this).next().click();}
    });
}); 
```

PS对不起我的noobish问题。我刚接到一项工作要做一个网站，没有人关心设计师与网页设计师不同。我没有先学的可能，我必须同时学习和做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:43:24.060

您必须查看 jQuery 选择器以及您的 HTML 代码，这是非常错误的。萤火虫 说：

![在此处输入图像描述](../Images/bdef9d94c017bfe64f24e7ba9bf3e005.png)

我以正确的方式修改了您的代码：

```
<div class="bottomNav" style="position: absolute; z-index: 11">
    <div id="prev" style="height: 26px; width:98px; margin:-75px 0 0 500px; position: fixed">
        <img src="img/back.png" />
    </div>
    <div id="next" style="height: 26px; width:114px; margin:-25px 0 0 600px; position: fixed" >
        <img src="img/forward.png" />
    </div>
</div> 
```

JavaScript（它非常简单，我没有测试它，但它应该给你一个想法）。

```
$('#prev').click(function () {
    var $activeLi = getActiveLi();
    var $prevLi = $parentLi.prev();

    if ($prevLi.length > 0) {
        $prevLi.find('a').click();
    }
});

$('#next').click(function () {
    var $activeLi = getActiveLi();
    var $nextLi = $parentLi.next();

    if ($nextLi.length > 0) {
        $nextLi.find('a').click();
    }
}); 

function getActiveLi() {
    var $activeImg = $('.menu .nav img.on');
    var $activeLi = $activeImg.closest('li');

    return $activeLi;
}; 
```

但是认真对待：在继续开发您的网站之前，您应该认真学习如何使用 jQuery 以及如何构建 HTML...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:02:41.970

解决了！再次感谢你！你的代码真的很有帮助。我已经根据我的需要对其进行了一些修改，并且也进行了更改

```
var $activeLi = $activeImg.closest('li'); 
```

最接近（'li'）父母（'li'），因为它不是那样工作的。

所以现在代码看起来像这样：

```
$('#prev').click(function () {
    var $prevLi = getActiveLi().prev();
    if ($prevLi.length > 0){$prevLi.find('img').click();}
});

$('#next').click(function () {
    var $nextLi = getActiveLi().next();
    if ($nextLi.length > 0){$nextLi.find('img').click();}
});

function getActiveLi() {
var $activeImg = $('.menu .nav img.on');
var $activeLi = $activeImg.parents('li');
return $activeLi;
}; 
```

我也想，我明白为什么萤火虫在代码中表现出如此大的灾难......我忘了关闭标签:)))

无论如何...非常感谢你！

PS 第三天阅读一本关于 jQuery 的巨著 :)

# express - Express 3.x 和 socket.io 教程

> ID：14279778
> 
> 赞同：6
> 
> 时间：2013-01-11T14:05:11.770
> 
> 标签：express, socket.io

有没有使用 Express 3.x 结合 socket.io 和 express 的好的入门教程？

实际上，一个简单的聊天应用程序会很棒。

它使用的代码行数越少越好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:45:58.260

您可以查看任何 2.x 教程并更改启动服务器的方式，如本文所述： [socket.io.js not found](https://stackoverflow.com/questions/10191048/socket-io-js-not-found)

2.XX

```
var app = require('express').createServer();
var io = require('socket.io').listen(app);

app.listen(10000); 
```

3.XX

```
var express = require('express')
, http = require('http');

var app = express();
var server = http.createServer(app);
var io = require('socket.io').listen(server);

server.listen(10000); 
```

# regex - 只打印两行

> ID：14279779
> 
> 赞同：1
> 
> 时间：2013-01-11T14:05:21.273
> 
> 标签：regex, optimization, html-email, clipping, template-toolkit

我正在制作一个 html 电子邮件模板，并且我正在寻找一种仅在电子邮件中的两行上输出文本的解决方案。我找不到一个简单的解决方案，我即将编写一个复杂的正则表达式，考虑大写和特殊字符。目前我有这个正则表达式，它保留 160 个第一个字符并删除其余字符。

```
[% IF doc.text.length > 160 %][% doc.text.replace('(?<=.{160}).*', '') %]...[% ELSE %][% doc.text %][% END %] 
```

有没有更简单的解决方案只打印超过 2 行的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T21:16:36.900

在表格单元格中使用 a`textarea`来截断文本：

```
 <td>
   <textarea rows="2" readonly>
    ...
    ...
    ...
   </textarea>
 </td> 
```

# ssis - SSIS Year() 函数对于年终不正确？

> ID：14279781
> 
> 赞同：0
> 
> 时间：2013-01-11T14:05:30.470
> 
> 标签：ssis, ssis-2008

在我的 OLE DB 源中，我有一个使用参数的查询：

```
AND x.plan_year = YEAR(?) 
```

该参数是一个日期值，设置为我控制的变量。对于大多数日期，这会返回正确的数据库值，但我注意到 12/30/2012 和 12/31/2012 正在评估为“2013”​​。有没有人见过这个？如果我在派生列或任何内容中使用 YEAR 函数，则不会发生这种情况，只是这种特定情况。知道发生了什么吗？

# javascript - 如何在jsp文件中包含js文件并初始化一些函数

> ID：14279783
> 
> 赞同：0
> 
> 时间：2013-01-11T14:05:36.440
> 
> 标签：javascript, jsp, spring-mvc

基本上我有 2 个关于 javascript 和 jsp 文件的问题。第一个问题是我不能将外部 js 文件包含到 jsp 文件中。我的项目的基本结构如下所示：

```
system.web
       |
      WebContent
         |
         js
           |
            nowa_postac.js
         |
         jsp
           |
            nowa_postac.jsp 
```

nowa_postac.js 只有

```
 init = function() {
    test();
}
function test() {
        var myObject = JSON.parse('${gson}', null);
        alert(myObject.rasy.rasaList.length);
        alert(document.getElementById("testowy").id);
    } 
```

我在 nowa_postac.jsp 中包含 javascript：

```
<script type="text/javascript" src="${pageContext.request.contextPath}/js/nowa_postac.js"></script> 
```

但我不能从 jsp 文件中的 nowa_postac.js 调用任何函数，并且

```
 src="<c:url value="/js/nowa_postac.js" 
```

似乎也不起作用... test() 只返回 alert(test) 返回文本，因此加载了 javascript 文件...此外，当 test() 在 jsp 文件中时，一切正常。

第二个问题是关于jsp页面加载后如何初始化function；

```
<body onload='init()'> 
```

这里不好，因为在 init() 中我需要引用一些在 jsp 中创建的对象...感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:23:58.480

我使用 jQuery 来回答这个问题。首先，我有一个名为 includeScripts.txt 的外部 .txt 文件，其格式如下：

```
NameOfFile~pathToJSFile 
```

例如：

```
nowa_postac~nowaPostAc.js 
```

请注意， nowaPostAc.js 将驻留在名为**Scripts**的子文件夹中。

接下来我加载 jQuery（我假设您知道如何执行此操作，如果没有，您可以阅读[http://www.learningjquery.com/2006/09/introducing-document-ready#more-5](http://www.learningjquery.com/2006/09/introducing-document-ready#more-5)）并在我的jQuery 文件我有以下内容：

```
/*
    *
    * LOAD ADDITIONAL SCRIPTS
    */
    jQuery.ajax(
    {
        url: 'Scripts/includedScripts.txt'
        , timeout: 5000
        , success:
            function (data) {
                myArray = data.split(/\n/);
                for (var i = 0; i < myArray.length; i++) {
                    theContents = myArray[i].split("~");
                    goodToGo = false;
                    theFileName = "";

                    if (theContents.length == 1) {
                        goodToGo = true;
                        theFileName = theContents[0];
                    }
                    else {
                        for (var t = 0; t < theContents.length; t++) {
                            if (theContents[t].indexOf(".") != -1) {
                                theFileName = theContents[t];
                            }
                            else if (location.pathname.indexOf(theContents[t]) != -1) {
                                goodToGo = true;
                            }
                        }
                    }
                    if (goodToGo == true) {
                        pathToScript = (theFileName.indexOf("..") >= 0) ? theFileName.replace("..", "") : "Scripts/" + theFileName;
                        script = document.createElement('script');
                        script.type = 'text/javascript';
                        script.src = pathToScript;
                        if (jQuery("#ctl01").length > 0) {
                            jQuery("#ctl01").append(script);
                        }
                        else if (jQuery(".page").length > 0) {
                            jQuery(".page").append(script);
                        }
                    }
                }
            }
        , error:
            function (xhr, textStatus, errorThrown) {
                //alert("Could not load additional modules, please alert IT");
                //make a log entry...
            }
        , async: false
    }); // load additional scripts 
```

您很可能需要编辑以下行：

```
if (jQuery("#ctl01").length > 0) {
                            jQuery("#ctl01").append(script);
                        }
                        else if (jQuery(".page").length > 0) {
                            jQuery(".page").append(script);
                        } 
```

可能读到类似的东西：

```
if (jQuery("body").length > 0) {
                            jQuery("body").append(script);
                        }
                        else if (jQuery("SomeOtherDivOrClass").length > 0) {
                            jQuery("SomeOtherDivOrClass").append(script);
                        } 
```

该脚本的作用（与包含的Scripts.txt 文件一起）允许您根据页面指定要加载的不同脚本。当然，这假设您在所有页面上都加载了一个单一的脚本，例如：

```
<script type="text/javascript"> src="Scripts/customeJQuery.js"></script> 
```

这将具有上述代码（加载附加脚本）。

这对我有用，你必须做一些调整——如果你通过了，请告诉我。

# javascript - 如何在 WordPress 3.5 上传器中上传新图像后立即运行一些代码

> ID：14279786
> 
> 赞同：7
> 
> 时间：2013-01-11T14:05:43.397
> 
> 标签：javascript, wordpress, file-upload, backbone.js, wordpress-3.5

在 WordPress 3.5 上传器中上传新图像后，我需要立即运行一些代码。这是 wp-includes/js/media-views.js 的代码（第 529-540 行）

```
 uploading: function( attachment ) {
        var content = this.frame.content;

        // If the uploader was selected, navigate to the browser.
        if ( 'upload' === content.mode() ) 
            this.frame.content.mode('browse');

        // If we're in a workflow that supports multiple attachments,
        // automatically select any uploading attachments.
        if ( this.get('multiple') )
            this.get('selection').add( attachment );
    }, 
```

我在这个上传功能的底部添加了alert('New image upload!')，浏览器警告'New image upload!' 上传新图像时。但是我不想破解 WordPress 的核心，所以我想知道是否有一种方法可以在我的主题中编写一些代码来做同样的事情？对不起我的英语不好。谢谢小伙伴们的关注！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T05:09:48.517

[**这行**](https://github.com/WordPress/WordPress/blob/master/wp-includes/js/plupload/wp-plupload.js#L221) **wp-plupload.js**显示上传者队列将在完成时重置。所以你可以这样做：

```
wp.Uploader.queue.on('reset', function() { 
    alert('Upload Complete!');
}); 
```

我已经对其进行了测试，它适用于 WP **3.5**网站。

因此，这里是完整版，包括对“**上传新媒体**”***页面*****上的常规上传器和“插入媒体**”***对话框***上的新[plupload](http://www.plupload.com/)上传器的支持。

 ***创建一个名为：的 javascript 文件*`wp-admin-extender.js`*并将其保存在您的`/custom/js/`文件夹或模板目录中的任何内容下。

```
// Hack for "Upload New Media" Page (old uploader)

// Overriding the uploadSuccess function:
if (typeof uploadSuccess !== 'undefined') {
    // First backup the function into a new variable.
    var uploadSuccess_original = uploadSuccess;
    // The original uploadSuccess function with has two arguments: fileObj, serverData
    // So we globally declare and override the function with two arguments (argument names shouldn't matter)
    uploadSuccess = function(fileObj, serverData) 
    {
        // Fire the original procedure with the same arguments
        uploadSuccess_original(fileObj, serverData);
        // Execute whatever you want here:
        alert('Upload Complete!');
    }
}

// Hack for "Insert Media" Dialog (new plupload uploader)

// Hooking on the uploader queue (on reset):
if (typeof wp.Uploader !== 'undefined' && typeof wp.Uploader.queue !== 'undefined') {
    wp.Uploader.queue.on('reset', function() { 
        alert('Upload Complete!');
    });
} 
```

最后；将此添加到主题的 functions.php 以在 WP Admin 中获取此功能：

```
//You can also use other techniques to add/register the script for WP Admin.
function extend_admin_js() {
    wp_enqueue_script('wp-admin-extender.js', get_template_directory_uri().'/custom/js/wp-admin-extender.js', array('media-upload', 'swfupload', 'plupload'), false, true);
}
add_action('admin_enqueue_scripts', 'extend_admin_js'); 
```

这可能不是合法的解决方案，但至少是一种解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-17T15:31:14.183

Onur Yıldırım 的回答是建议连接到所有上传的完成。但是根据您的问题，您需要挂钩每个成功的上传。您可以通过扩展 wp.Uploader.prototype 来做到这一点。有关 jQuery 的正确说明，请点击 stackexchange 的链接：[https ://wordpress.stackexchange.com/a/131295](https://wordpress.stackexchange.com/a/131295)

我已经测试过，它确实可以让你挂钩到“成功”响应（以及其他，包括初始化、错误、添加、进度、完成），这象征着每个文件单独的 plupload“FileUploaded”自触发事件，得到async-upload.php json 字符串。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-12T06:35:53.590

在 Javascript 中，这可能会有所帮助：

```
wp.media.view.Attachments.prototype.on('ready',function(){console.log('your code here');}); 
```

php代码中可能还有一个可以工作的动作，我注意到[async-upload](http://xref.yoast.com/trunk/wp-admin/async-upload.php.source.html) .php`echo apply_filters("async_upload_{$type}", $id);`的末尾有。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-24T07:54:43.333

也许您可以加入 add_attachment 操作？

```
function do_my_attachment_manipulation($attachment_ID)
{          
    $attachment = get_attached_file($attachment_ID); // Gets path to attachment
    // Javascript alert:
    ?>
         <script>
               alert('Media uploaded!');
         </script>
    <?php

}

add_action("add_attachment", 'do_my_attachment_manipulation'); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-06-10T11:53:20.193

Олег，非常感谢链接[https://wordpress.stackexchange.com/a/131295](https://wordpress.stackexchange.com/a/131295)。

这是一个非常有效的解决方案！

这就是我为自己使用此解决方案的方式：

```
$.extend(wp.Uploader.prototype,{
    success: function(file_attachment){
        console.log(file_attachment);
        if(wp.media.frame.content.get() !== null){
            setTimeout(function(){
                wp.media.frame.content.get().collection.props.set({ignore: (+ new Date())});
            },100);
        }
    }
}); 
```***

# c#-4.0 - 在 Word ContentControl 中提取图像和其他组件？

> ID：14279789
> 
> 赞同：4
> 
> 时间：2013-01-11T14:06:04.943
> 
> 标签：c#-4.0, ms-word, vsto, word-2010

c# VSTO

如何在 word 2010 的富文本内容控件中插入带有一些标题的图像。属性 formattedtext 甚至不接受范围对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T14:24:16.200

将图像添加到富文本内容控件非常简单，您只需将其添加到`Range.InlineShapes`集合中即可。

要从 Word 文档中检索图像，您可以执行以下操作：

1.  循环遍历文档中的所有内容控件
2.  如果内容控件有图像，请将其复制到剪贴板
3.  从剪贴板中检索图像对象
4.  对图像进行任何必要的处理（保存到磁盘、数据库等）

这是一个例子：

添加对 System.Windows.Forms.dll 的引用以允许使用[剪贴板](http://msdn.microsoft.com/en-us/library/system.windows.forms.clipboard%28v=vs.100%29.aspx)类

```
 string imagePath = @"D:\microsoft.jpg";
    string title = "Microsoft";
    Word.ContentControls cc = this.Application.ActiveDocument.ContentControls;

    //Add a rich content control,add an image to the rich content control
    var richContentControl = cc.Add(Word.WdContentControlType.wdContentControlRichText);
    richContentControl.Range.FormattedText.Text = title;

    if (System.IO.File.Exists(imagePath))
    {
        Word.InlineShape image = richContentControl.Range.InlineShapes.AddPicture(imagePath);
        image.Height = 70;
        image.Width = 100;

        //Retrieve all images from content controls and save to disk
        foreach (Word.ContentControl c in cc)
        {
            if (c.Range.InlineShapes.Count > 0)
            {
                foreach (Word.InlineShape shape in c.Range.InlineShapes)
                {
                    shape.Range.Copy();
                    if (System.Windows.Forms.Clipboard.ContainsImage())
                    {
                        System.Drawing.Image clipboardImage = Clipboard.GetImage();
                        string path = System.IO.Path.Combine(@"D:\imageName.jpg");
                        clipboardImage.Save(path);
                    }
                    Clipboard.Clear();
                }
            }
        }
    } 
```

# excel - 如何访问具有多个区域的 Excel-VBA 中的命名范围？

> ID：14279790
> 
> 赞同：5
> 
> 时间：2013-01-11T14:06:09.340
> 
> 标签：excel, vba

在一个区域范围内一切正常：选择单元格 A1 和 B1 并将其命名为“foo”。

```
?ThisWorkbook.Names.Item("foo").RefersTo
 =Tabelle1!$A$1:$B$1
?ThisWorkbook.Names.Item("foo").RefersToRange.Address
 $A$1:$B$1 
```

但是，两个区域范围将失败（Excel 2010）：单击单元格 A2 和 B2 并**按下 ctrl**并将其命名为“bar”。

```
 ?ThisWorkbook.Names.Item("bar").RefersTo
  =Tabelle1!$A$2,Tabelle1!$B$2
 ?ThisWorkbook.Names.Item("bar").RefersToRange.Address
  -> Run-time error '1004' 
```

为什么我们不能得到“bar”-name 所指的范围？

是否有**不使用** `sheet.Range("bar")`的解决方法，因为我不知道哪个表包含名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:13:44.210

您可以尝试 global `Range`，而不是 a `sheet.Range`：

```
? Range(ThisWorkbook.Names("bar").RefersTo).Address 
```

~~为了避免可能的跨工作簿陷阱，您可以使用`ConvertFormula`将工作簿名称添加到范围：~~

 ~~```
? ThisWorkbook.Names("bar").RefersTo
  =Sheet1!$A$2,Sheet1!$B$2

? Application.ConvertFormula(ThisWorkbook.Names("bar").RefersTo, xlA1, xlA1)
  =[Book1]Sheet1!$A$2,[Book1]Sheet1!$B$2

? Application.Range(Application.ConvertFormula(ThisWorkbook.Names("bar").RefersTo, xlA1, xlA1)).Address
  =$A$2,$B$2 
```~~  ~~* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-01T21:08:54.677

这里的一个皱纹是`RefersToRange`对于由以下定义的多区域命名范围失败：

```
=Sheet1!$B$2 + Sheet1!$D$4 
```

但它适用于：

```
=Sheet1!$B$2 , Sheet1!$D$4 
```

区别在于`,`vs `+`。~~

# android - org.junit 无法在 IntelliJ 中解决

> ID：14279792
> 
> 赞同：3
> 
> 时间：2013-01-11T14:06:14.960
> 
> 标签：android, junit, intellij-idea, actionbarsherlock, junit4

我想将 IntelliJ 中的 ActionBarSherlock 编译为我的项目的库模块，但导入和`import static org.hamcrest.CoreMatchers.equalTo;`无法解决。`import static org.junit.Assert.assertThat;``import org.junit.Test;`

任何想法如何解决它？

编辑：当我取消注释`ManifestParsingTest.java`并`ActionBarSherlock`尝试编译我的项目时，我得到了这些：

```
Android Dex: [MoneyTracker] UNEXPECTED TOP-LEVEL EXCEPTION:
[...]
Android Dex: [MoneyTracker] 1 error; aborting 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T15:41:56.017

解决了。`test.com.actionbarsherlock.internal`被定义为`ActionBarSherlock`模块中的源文件夹。

# wpf - 如何在我的 GUI 中正确实施严格的控制流程？

> ID：14279794
> 
> 赞同：0
> 
> 时间：2013-01-11T14:06:20.893
> 
> 标签：wpf, swing, user-interface, javafx

首先，让我尝试澄清一下我所说的“控制流”是指用户在我的 UI 中导航的方式。（这很可能不是我所描述的正确术语，所以如果你知道的话，请推荐一个更好的术语！）

大多数现代应用程序似乎让用户决定什么时候做什么。独立的控制单元主要涉及一些文本输入和最多鼠标点击。

对于我正在开发的应用程序，我想要一些不同的东西（*请参阅这篇文章的结尾，以了解不可避免的“你为什么想要那个，那不是好的设计？”的答案*）。下图显示了一个与我正在做的非常接近的示例 GUI，它只是被剥离并且业务域已被更改以使其易于理解：

![示例 UI 图片](../Images/1bc81d14d8ae5e36eca6ba0cd80c33c6.png)

预期的控制流程如下：

```
1 user enters name of recipe, presses Enter
2 user enters ingredient, presses Enter
3 if ingredient field is empty, we're done: go to 9
4 dialog window shows up, queries database with user input and lets him select from a list of possible ingredients
5 if nothing was selected, go to 2
6 user enter amount, presses Enter
7 add this ingredient to an observable collection which is bound to the list
8 go to 2
9 dialog window shows up, prompts user for price of the mixture 
```

我当前的代码基于`KeyListener`附加到所有那些拦截`Enter`按键的控件，调用所涉及的逻辑，然后手动`setFocus()`执行适当的下一个文本字段/其他控件。这行得通，但代码看起来很难维护，感觉很像几十年前我用 VB5 编写的代码。

**有没有更好的方法来实现这一目标？我对通用设计模式和 WPF、JavaFX 或 Swing 等框架可能提供的特定解决方案都感兴趣。**

* * *

*为什么会有人想要那个？*

两个原因：

*   这个特殊的应用程序一直以这种方式工作，并且被许多计算机经验很少的人使用。给他们太多选择如何做以及何时做只会增加不必要的混乱。
*   对于像这样的简单任务（或多或少只是数据输入），使用鼠标手动导航肯定比通过输入掩码的预定义路径更慢且更容易出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:09:18.750

**问题**

您正在重载 Enter 键。一种首选方法是让按钮代表动作。

如果您的金额字段与整个食谱而不是成分有关，那么您的金额字段位于错误的位置。将其移到成分列表之后。

**纽扣**

回到按钮。您可以在名称字段后、成分字段后和底部金额字段后有一个按钮。这允许用户明确他们想要更新的内容。

**状态模式**

您可以使用[状态模式](http://en.wikipedia.org/wiki/State_pattern)来跟踪用户已经做了什么，以及用户接下来可以做什么。如果用户不按顺序执行操作，您会在屏幕上的某处返回错误消息，指导用户下一步该做什么。

您必须枚举用户操作的所有不同可能性。使用 3 个按钮，可进行 6 种组合。

*   名称、成分、数量（您所描述的）
*   名称、数量、成分
*   成分、名称、数量
*   成分、数量、名称
*   数量、名称、成分
*   数量、成分、名称

您将决定哪些组合是有效的，哪些是无效的。状态树还有一个更复杂的地方，即您的用户可能要输入多种成分。

**确定和取消按钮**

除了管理状态，您还可以在 GUI 底部添加一对按钮，确定和取消。这允许您的用户以他们选择的任何顺序填写字段。在单击确定按钮之前，您不会检查有效性。

OK 按钮是通常与 Enter 键绑定的按钮。

您仍然需要在成分字段后有一个按钮，以允许用户输入多个成分。

# linux - linux / libusb 获取usb设备路径

> ID：14279796
> 
> 赞同：9
> 
> 时间：2013-01-11T14:06:24.240
> 
> 标签：linux, path, usb, device, libusb

我使用 libusb 来枚举一些 USB 设备。现在我想获得“设备路径”。我认为它不称为 USB 设备路径，因为我在谷歌上没有成功。

如果我将 USB 设备与 linux 连接，我会收到一条消息`dmesg`，这里有一些带有 USB 温度传感器的“设备路径”示例（类似[这样](http://www.ohgizmo.com/wp-content/uploads/2007/09/usb_temper.jpg)）：

直接连接到 USB 端口： `[68448.099682] generic-usb 0003:0C45:7401.0056: input,hidraw1: USB HID v1.10 Keyboard [RDing TEMPer1V1.2] on usb-0000:00:12.0-1/input0`=> **12.0-1**

直接到另一个端口： `[68560.853108] generic-usb 0003:0C45:7401.0058: input,hidraw1: USB HID v1.10 Keyboard [RDing TEMPer1V1.2] on usb-0000:00:13.0-1/input0`=> **13.0-1**

到第一个使用的端口上的 USB 集线器： `[68600.245809] generic-usb 0003:0C45:7401.005A: input,hidraw1: USB HID v1.10 Keyboard [RDing TEMPer1V1.2] on usb-0000:00:12.2-1.4/input0`=> **12.2-1.4**

到同一个 USB 集线器上的另一个端口： `[68647.925092] generic-usb 0003:0C45:7401.005C: input,hidraw1: USB HID v1.10 Keyboard [RDing TEMPer1V1.2] on usb-0000:00:12.2-1.3/input0`=> **12.2-1.3**

现在到之前使用的 USB 集线器上的 USB 集线器： `[68740.715518] generic-usb 0003:0C45:7401.005E: input,hidraw1: USB HID v1.10 Keyboard [RDing TEMPer1V1.2] on usb-0000:00:12.2-1.4.4/input0`=> **12.2-1.4.4**

长话短说：内核消息始终包含物理 USB 设备位置的唯一路径（参见前面的粗体文本）。是否可以通过 libusb 在用户空间中获取此“路径”？`struct usb_bus`我用and尝试了很多东西`struct usb_device`，但我总是不成功。

我需要这个来识别这些 USB 温度计中的多个，因为它们没有唯一的序列号，有时它们只是在运行时“重新连接”，所以它们得到不同的 USB ID。所以我认为识别它们的唯一方法是通过物理位置。

谢谢您的帮助，

最好的问候凯文M。

-编辑-

目前我使用以下代码搜索我的 USB 设备：

```
usb_dev_handle *find_lvr_winusb() {

     struct usb_bus *bus;
        struct usb_device *dev;

        for (bus = usb_busses; bus; bus = bus->next) {
        for (dev = bus->devices; dev; dev = dev->next) {
                        if (dev->descriptor.idVendor == VENDOR_ID && 
                                dev->descriptor.idProduct == PRODUCT_ID ) {
                                usb_dev_handle *handle;
                                if(debug) {
                                  printf("lvr_winusb with Vendor Id: %x and Product Id: %x found.\n", VENDOR_ID, PRODUCT_ID);
                                    printf("INFO: %d\n", dev->bus->location);
                                    printf("INFO: %d %s\n", bus->location, bus->dirname);
                                }

                                if (!(handle = usb_open(dev))) {
                                        printf("Could not open USB device\n");
                                        return NULL;
                                }
                                return handle;
                        }
                }
        }
        return NULL;
} 
```

但是使用此代码，我无法获得唯一的物理位置 ID。返回一个整数（`bus->location`bus->dirname 包含相同，但作为字符串），它不是唯一的。我知道 USB 有一个层次结构，在`dmesg`我可以看到这个层次结构路径。

使用 libusb 我只能获取总线 ID（？）和一些设备 ID。但它们对我没有帮助，因为我需要识别两个或更多这样的温度传感器。当温度传感器重置连接（每 5 到 60 秒）并且总线 ID 不唯一时，设备 ID 始终会更改。不幸的是，温度传感器没有唯一的序列号。

所以我认为物理路径是识别设备的唯一方法。

最好的问候凯文 M。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-07T10:50:03.357

从 libusb 1.0.12 开始，他们引入了 libusb_get_port_path()，并在 1.0.16 中将其替换为[libusb_get_port_numbers()](http://libusb.sourceforge.net/api-1.0/group__dev.html#gaa4b7b2b50a9ce2aa396b0af2b979544d)，它允许您查询总线拓扑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-08T14:11:19.530

sysfs 结构路径的总体总结：

```
1-1.3:1.0

|_usb root hub - bus number - 1
  |_ port number - 1 of root hub
    |_port number - 3 of intermediate hub
      |_current configuration number - 1
        |_ current interface number - 0 
```

更多信息[在这里](http://gajjarpremal.blogspot.in/2015/04/sysfs-structures-for-linux-usb.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:12:57.707

有可能，[就像这里一样](http://code.google.com/p/apogee-lib/source/browse/ApogeeUsb/ApogeeUsbLinux.cpp#202)。

只需扫描所有总线上的所有 USB 设备。当您找到所需的 VID/PID 时，这就是您的设备。

或者你可以做的更简单：编写一个 udev 规则，当你连接你的设备时，它会创建像 /dev/thermoX 这样的符号链接。之后您只需要打开所需的 /dev/thermoX。

# c# - 在 WPF 中缺少带有 EventHandler 的事件

> ID：14279798
> 
> 赞同：-1
> 
> 时间：2013-01-11T14:06:31.347
> 
> 标签：c#, wpf, event-handling

我最近创建了一个 WPF 游戏，我们添加的最后一件事是音乐，只是一个带有循环的 mp3。

这就是我为实现它所做的。

```
Music = new MediaPlayer();
Music.Open(new Uri("Sounds/MyMusic.mp3", UriKind.Relative));
Music.MediaEnded += MusicEnded;
Music.Play();

private void MusicEnded(object sender, EventArgs e)
{
Music.Stop();
Music.Play();
} 
```

游戏一直运行良好，我们使用了 3 天超过 2 小时没有问题，但有 1 天音乐刚刚停止，其他声音继续播放。

这怎么可能发生？事件处理程序可以错过 1 个事件吗？在那种情况下，我的代码将停止工作，因为没有人监控 EventHandler 或音乐。

如何改进此代码？或避免这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:10:04.587

尝试在音乐结束时设置位置属性而不停止和开始

对于 XNA 媒体播放器，您可以使用 IsRepeating 属性 [http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.mediaplayer.isrepeating.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.mediaplayer.isrepeating.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T14:51:26.753

你从 GUI 线程开始音乐吗？

如果您的 GUI 线程正忙于做其他事情并且错过了事件，那是为什么。可能会增加一些时间来进行额外的循环并尝试重复问题。

另一种重复方式：

```
private void MusicEnded(object sender, EventArgs e)
{
    Music.Position = TimeSpan.FromSeconds(0);
    Music.Play();
} 
```

# meteor - 看起来 Meteor.http.post 工作不正常

> ID：14279800
> 
> 赞同：4
> 
> 时间：2013-01-11T14:06:31.790
> 
> 标签：meteor

我正在尝试从 Meteor 应用程序的服务器端发布用户的 Facebook 提要：

```
result = Meteor.http.call 'POST',
    "https://graph.facebook.com/#{facebook_id}/feed?access_token=#{app_access_token}",
    { data: { message: "some message", link: "http://www.somelink.com" } } 
```

结果我得到了以下结果：

```
{"statusCode":400,"content":"{\"error\":{\"message\":\"(#100) Missing message or attachment\",\"type\":\"OAuthException\",\"code\":100}}","headers":{"access-control-allow-origin":"*","cache-control":"no-store","content-type":"text/javascript; charset=UTF-8","expires":"Sat, 01 Jan 2000 00:00:00 GMT","pragma":"no-cache","www-authenticate":"OAuth \"Facebook Platform\" \"invalid_request\" \"(#100) Missing message or attachment\"","x-fb-rev":"710505","x-fb-debug":"doa24fNWaPsogxv4HmXa1/5KA30BBct86VZWVeYsins=","date":"Fri, 11 Jan 2013 13:57:52 GMT","connection":"keep-alive","content-length":"95"},"data":{"error":{"message":"(#100) Missing message or attachment","type":"OAuthException","code":100}},"error":{}} 
```

我试图在 Facebook 调试器中重现这个问题 - 只有当我没有在 POST 正文中发送任何参数时，我才会收到相同的消息。会不会是 Meteor.http.call 中 POST 实现的问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T15:28:47.423

您在 HTTP POST 请求内容正文中发送数据`data`，您需要使用`params`将正确的变量作为 postdata 传递

尝试

```
result = Meteor.http.post(
   "https://graph.facebook.com/#{facebook_id}/feed?access_token=#{app_access_token}",
   { params: { message: "some message", link: "http://www.somelink.com" } } ); 
```

另外，如果您在`Meteor.methods`存根中对此进行操作，请尝试使用`this.unblock();`，以便可以同时进行其他操作

**更新**：新版本的流星使用`HTTP`而不是`Meteor.http`，上面的代码将作为`HTTP.post`替代品。

# .htaccess - （共享主机解决方案）保护文档根目录中的子目录，但其中的一个文件夹除外（htaccess）

> ID：14279801
> 
> 赞同：1
> 
> 时间：2013-01-11T14:06:34.677
> 
> 标签：.htaccess, subdirectory, document-root

我需要在“Public_html 文件夹”中安装“Laravel”，因为我在共享主机上。Laravel 文档给出了[解决方案](http://forums.laravel.io/viewtopic.php?id=1258)

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteCond %{REQUEST_URI} !^public
    RewriteRule ^(.*)$ public/$1 [L]
</IfModule> 
```

这会将所有内容重定向到我放在“Public_html 文件夹”中的主“Laravel 文件夹”中的“公共”文件夹，你跟着？

我还能用htaccess保护“公用文件夹”的“父文件夹”吗？通常我会使用我自己的小型前端控制器框架，我刚刚意识到我从未保护过 Public_html 中需要保护的任何子文件夹。

在保护子文件夹方面我有哪些选择，但请记住我使用共享主机？使用 Laravel，它必须更复杂？或者如果它们以相同的方式运行，则使用任何其他框架？

[Laravel 文档](http://forums.laravel.io/viewtopic.php?id=1258)

感谢广告

# javascript - Greasemonkey 脚本没有点击按钮

> ID：14279802
> 
> 赞同：-1
> 
> 时间：2013-01-11T14:06:36.903
> 
> 标签：javascript, jquery, button, click, greasemonkey

这里有什么问题; 它不点击？

我的代码：

```
// ==UserScript==
// @name        premiumleech
// @namespace   premiumleech
// @include     http://generator.premiumleech.com/link/*.html
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
introduced in GM 1.0\.   It restores the sandbox.
*/

/*
<p class="leech-btn"><button onclick="javascript:window.open('http://generator.premiumleech.com/redir/BtPpnGJv2HcZRa2BTxsEQzUdDQbb6WO1','_blank');">Leech it!</button></p>
*/
/*
/html/body/div[2]/div/section/p[2]
*/

var targBtn = $("#content > p.leech-btn > button");
if (targBtn.length) {
targBtn[0].click ();
} 
```

我首先尝试了 JavaScript，但未能将其调整为`queryselector`“在 Weired 按钮上找不到任何单词”并 get..ByTagName 至少对我来说没有明显的原因而失败

```
function clickc()
{
var el = document.querySelector("_blank"); or document.getElementsByTagName("TABLE");
var evt = document.createEvent("MouseEvents");
event.initMouseEvent("click", true, true, window,
            0, 0, 0, 0, 0,
            false, false, false, false,
            0, null);
el.dispatchEvent(evt);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:13:04.700

jQuery 的 click() 方法不会触发元素的点击动作。它会触发为单击事件处理程序注册的操作，如果传递了参数，则将其用作单击该元素的回调函数。要单击该 HTML 元素，您需要使用

```
$("body > div:second > div:first > div:first > p:second").get(0).click(); 
```

这将实质上选择 HTML 元素（而不是 jQuery 对象）并触发 click 事件。

# iframe - 如何在当前网页上渲染来自外部网站的页面？

> ID：14279804
> 
> 赞同：0
> 
> 时间：2013-01-11T14:06:36.973
> 
> 标签：iframe, render

我想知道抓取相应网页后从外部 URL 呈现内容的不同方式？我听说过 iframe。这是最好的方法吗？或者还有其他更好的方法吗？PS，我也想渲染动态的东西，比如游戏和其他互动内容。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T05:42:34.990

iframe 效果很好，但仍然有相同的来源策略，如果两者不在同一个域中，它会阻止您访问来自父级的子内容，反之亦然

# ssas - MDX 查询返回意外（空）

> ID：14279805
> 
> 赞同：1
> 
> 时间：2013-01-11T14:06:38.487
> 
> 标签：ssas, mdx, olap, ssas-2008

我遇到了 MS SSAS 2008 R2 (10.50.4000.0) 的奇怪问题：我希望返回相同结果的两个 MDX 查询表现不同：

此查询返回**正确的**数字：

```
select
    [Measures].[Fact Count] on 0
from
    [Cube]
where
    [Dimension].[Attribute].&[id] 
```

而这个预计等同于第一个查询时会返回**（null）**（请参阅下面的详细信息）。

```
select
    [Measures].[Fact Count] on 0
from
(
    select
        [Dimension].[Attribute].&[id] on 0,
    from
        [Cube]
) 
```

一些细节

1.  问题不是持久的。它在来自不同物理服务器的不同数据库上**随机**出现和消失（！）。
2.  我们正在使用增量数据导入和非延迟处理。问题出现和数据导入之间没有严格的相关性。但我们继续朝这个方向进行调查。
3.  将其他成员添加到子选择的轴可以解决问题，即 *{[Dimension].[Attribute].&[id1], [Dimension].[Attribute].&[id2] on 0}*工作正常。
4.  几个维度受到影响。它们都有整数键。Prolbem 出现在可见和隐藏维度属性上。
5.  向子选择的第二个轴添加额外维度*修复*了某些维度对的问题，即过滤器*[Dimension1].[Attribute].[&id] on 0*失败，但过滤器*[Dimension1].[Attribute].[&id]在 0 上，[Dimension2].[Attribute].[&id] 在 1 上*有效。
6.  我们有两个度量值组，每个度量值组有几个度量值。所有维度都与第一个度量值组中的某些（默认）度量值相关，但某些维度仅与第二个度量值组相关。问题只出现在第二种类型的尺寸上。

有人知道 MS OLAP 这种奇怪的非确定性行为的原因吗？

谢谢。

# javascript - 如何使用jquery触发点击按键

> ID：14279806
> 
> 赞同：0
> 
> 时间：2013-01-11T14:06:39.093
> 
> 标签：javascript, jquery, key, keypress, keyup

我需要触发单击某个按键操作，如果它是我的键盘脚本上的向上或向下键，将从指定元素中删除某些类。所以按键工作但触发和上下按下不，这是我的代码，寻求帮助。

```
$('.main_search_field').keypress(function(evt){
    $('.live_search_plugin').addClass('visible');

    var scroll_pane = $('.scroll-pane');
        scroll_pane.click();
        scroll_pane.trigger('click');
    if (evt.keyCode == 40) {
        $('.live_search_list ul li').removeClass('active');    
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:17:13.313

您可以尝试以下代码：

```
var e = jQuery.Event("keypress");
e.which = 50;
$(".main_search_field").trigger(e); 
```

输入`e.which`所需字符的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:08:55.070

您必须像这样检查 evt 按键：

```
if (evt.which == 40) {  } 
```

使用 keypress 时，通常我会在函数内运行任何代码之前检查我想要与之交互的键。如果您不这样做，您的代码将使用任何按键运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:15:23.877

`.keypress()`在这里可能不是您最好的解决方案，您最好使用`keydown()`and`keyup()`或使用完整版：`.bind('keydown', handler)`（keyup 同上）

来自 jquery 文档：

> 注意：由于 keypress 事件未包含在任何官方规范中，因此使用它时遇到的实际行为可能因浏览器、浏览器版本和平台而异。 [http://api.jquery.com/keypress/](http://api.jquery.com/keypress/)

`.click()`是简写`.trigger("click")`，你用得很好，但你真的有一个点击处理程序`$('.scroll-pane)`吗？

您的代码将（假设浏览器依赖项）导致两次点击被触发`$('.scroll-pane')`，然后`if()`被评估。但是您没有向我们展示您的点击处理程序，`scroll-pane`因此我们无法查看这是否有问题。

# android - 如何显示动态创建的 EditText 中的值

> ID：14279808
> 
> 赞同：0
> 
> 时间：2013-01-11T14:06:47.423
> 
> 标签：android

```
 final LinearLayout ll=new LinearLayout(this);
 ll.setOrientation(LinearLayout.VERTICAL);
 scrl.addView(ll);
 Button add_btn=new Button(this);
 add_btn.setText("Click to add TextViiews and EditTexts");
 ll.addView(add_btn);
 add_btn.setOnClickListener(new OnClickListener() {
 public void onClick(View v) {
 //String str;
TextView tv=(TextView)findViewById(R.id.tv1);    
 EditText et2=new EditText(getApplicationContext());
 String s=et2.getText().toString();
tv.setText(s);
 ll.addView(et2); 
```

我创建了一个按钮，当我单击此按钮时，如果我输入一个值，我将动态获取 edittext 我应该显示该值我不知道如何显示值并使用它如果我想动态添加输入的值创建编辑文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:15:07.920

如果您没有添加视图，则无法获取文本。此外，您还可以在单​​击按钮时添加文本视图。您可以从 onClick() 中删除 textview 创建并将其添加到它之外

编辑（像这样）：

```
 final LinearLayout ll=new LinearLayout(this);
   ll.setOrientation(LinearLayout.VERTICAL);
   scrl.addView(ll);
   Button add_btn=new Button(this);
   add_btn.setText("Click to add TextViiews and EditTexts");
   ll.addView(add_btn);
   add_btn.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            String s=et2.getText().toString();
            tv.setText(s);
         }
    });
   TextView tv=(TextView)findViewById(R.id.tv1);    
   EditText et2=new EditText(getApplicationContext()); 
   ll.addView(et2); 
```

# c# - FtpWebRequest 返回“远程服务器返回错误：（530）未登录”

> ID：14279817
> 
> 赞同：3
> 
> 时间：2013-01-11T14:07:16.573
> 
> 标签：c#, ftp, ftpwebrequest

我收到此错误“远程服务器返回错误：（530）未登录。” 使用 FtpWebRequest 上传文件时。

1.  仅当我将文件传输到具有子文件夹的路径时才会发生错误，否则它可以正常工作。

2.  上传大约 5 到 10 MB 的大文件时，它会超时。

    ```
    void FtpTransfer(string siteName, string portNumber, string ftpUser, string ftpPassword, string destPath)
    {
        FtpWebRequest request;
        DateTime now = DateTime.Now;
        string now_string =
            (now.Year).ToString()
            + "_" +
            (now.Month).ToString("0#")
            + "_" +
            (now.Day).ToString("0#");

        foreach (object item in listBox1.Items)
        {
            string srcFile = item.ToString();
            lblSource.Text = srcFile;
            Uri uri = new Uri(srcFile);
            string destFile = srcFile.Replace(lblPath.Text, "").Replace("\\\\", "\\").Replace("\\", "/").Replace("www/","");

            Configuration oConfig = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
            int timeout = int.Parse(oConfig.AppSettings.Settings["TimeOut"].Value);

            if (siteName == "mysite1.co.in" || siteName == "sd1.mysite2.net")
                destFile = "ftp://" + siteName + ":" + portNumber + "/" + siteName + "/_test" + destFile; //error here
            else
                destFile = "ftp://" + siteName + ":" + portNumber + "/" + siteName + destFile; //no error
            lblDestn.Text = destFile;

            request = (FtpWebRequest)WebRequest.Create(destFile);
            request.Credentials = new NetworkCredential(ftpUser, ftpPassword);
            request.Timeout = 6000;
            request.Method = WebRequestMethods.Ftp.UploadFile;
            request.UsePassive = true;
            request.UseBinary = true;
            request.KeepAlive = true;

            // Copy the contents of the file to the request stream.
            StreamReader sourceStream = new StreamReader(@srcFile);
            byte[] fileContents = Encoding.UTF8.GetBytes(sourceStream.ReadToEnd());
            sourceStream.Close();
            request.ContentLength = fileContents.Length;

            Stream requestStream = request.GetRequestStream();
            requestStream.Write(fileContents, 0, fileContents.Length);
            requestStream.Close();

            FtpWebResponse response = (FtpWebResponse)request.GetResponse();

            string path = System.IO.Path.GetDirectoryName(Environment.GetCommandLineArgs()[0]);
            System.IO.StreamWriter w = System.IO.File.AppendText(path + "\\log_" + now_string + ".txt");
            w.WriteLine(DateTime.Now.ToString("yyy-MM-dd HH:mm:ss")
                + " "
                + srcFile
                + " "
                + destFile
                + " "
                + response.StatusDescription);

            w.Close();

            response.Close();
        } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:17:13.727

我假设您已经尝试通过标准 FTP 客户端执行相同的操作。如果没有，请尝试。然后，我将使用 Wireshark 确保这是来自服务器的响应，并验证是否正在发送凭据。验证后，请与 FTP 所有者核实并确保服务器配置正确。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-11T14:29:24.213

我不完全知道您的问题的解决方案。但一些建议：

`using(...)`尽可能在`IDisposable`课堂上使用。当你完成它时，这会促进适当的资源释放和清理。[MSDN：使用](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)

您使用`6000`毫秒的超时，您是否应该为大文件增加它或使用您的本地变量`timeout`（从您的应用程序设置中读取）。

改进的代码`using`：

```
private void FtpTransfer(string siteName, string portNumber, string ftpUser, string ftpPassword, string destPath)
        {
            DateTime now = DateTime.Now;
            string now_string =
                (now.Year).ToString()
                + "_" +
                (now.Month).ToString("0#")
                + "_" +
                (now.Day).ToString("0#");

            foreach (object item in listBox1.Items)
            {
                string srcFile = item.ToString();
                lblSource.Text = srcFile;
                Uri uri = new Uri(srcFile);
                string destFile = srcFile.Replace(lblPath.Text, "").Replace("\\\\", "\\").Replace("\\", "/").Replace("www/", "");

                Configuration oConfig = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
                int timeout = int.Parse(oConfig.AppSettings.Settings["TimeOut"].Value);

                if (siteName == "mysite1.co.in" || siteName == "sd1.mysite2.net")
                    destFile = "ftp://" + siteName + ":" + portNumber + "/" + siteName + "/_test" + destFile; //error here
                else
                    destFile = "ftp://" + siteName + ":" + portNumber + "/" + siteName + destFile; //no error
                lblDestn.Text = destFile;

                FtpWebRequest request = (FtpWebRequest)WebRequest.Create(destFile);
                request.Credentials = new NetworkCredential(ftpUser, ftpPassword);
                request.Timeout = 6000;
                request.Method = WebRequestMethods.Ftp.UploadFile;
                request.UsePassive = true;
                request.UseBinary = true;
                request.KeepAlive = true;

                // Copy the contents of the file to the request stream.
                byte[] fileContents;
                using (StreamReader sourceStream = new StreamReader(@srcFile))
                {
                    fileContents = Encoding.UTF8.GetBytes(sourceStream.ReadToEnd());
                }
                request.ContentLength = fileContents.Length;

                using (Stream requestStream = request.GetRequestStream())
                {
                    requestStream.Write(fileContents, 0, fileContents.Length);
                }

                using (FtpWebResponse response = (FtpWebResponse)request.GetResponse())
                {
                    string path = System.IO.Path.GetDirectoryName(Environment.GetCommandLineArgs()[0]);
                    System.IO.StreamWriter w = System.IO.File.AppendText(path + "\\log_" + now_string + ".txt");
                    w.WriteLine(DateTime.Now.ToString("yyy-MM-dd HH:mm:ss")
                                + " "
                                + srcFile
                                + " "
                                + destFile
                                + " "
                                + response.StatusDescription);

                }
            }

        } 
```

# c++ - 使用 Swig 为 Python 编译 C++

> ID：14279819
> 
> 赞同：2
> 
> 时间：2013-01-11T14:07:37.297
> 
> 标签：c++, python, g++, solaris, swig

我已经成功生成了所需的 .py 和 .cpp 文件：

`swig -c++ -python sf_c_api.i`

但现在我正在尝试制作共享对象（.so）并且我被错误所淹没。

`g++ -Wall -g -fPIC -I/usr/include/python2.6 -c atob.c fish.c maby_swap.c pwd_file.c pwd.c setup_fish.c shs.c sf_c_api.cpp sha1.cpp sf_c_api_wrap.cpp`

任何人都可以对这个 g++ 输出做出正面或反面吗？

```
In file included from /usr/include/python2.6/Python.h:8,
                 from sf_c_api_wrap.cpp:149:
/usr/include/python2.6/pyconfig.h:1038:1: warning: "_XOPEN_SOURCE" redefined
<built-in>: warning: this is the location of the previous definition
In file included from /usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/bits/postypes.h:42,
                 from /usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/bits/char_traits.h:42,
                 from /usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/string:42,
                 from /usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/stdexcept:39,
                 from sf_c_api_wrap.cpp:3024:
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:143: error: ‘::btowc’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:148: error: ‘::fwide’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:149: error: ‘::fwprintf’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:150: error: ‘::fwscanf’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:153: error: ‘::mbrlen’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:154: error: ‘::mbrtowc’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:155: error: ‘::mbsinit’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:156: error: ‘::mbsrtowcs’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:159: error: ‘::swprintf’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:160: error: ‘::swscanf’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:162: error: ‘::vfwprintf’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:166: error: ‘::vswprintf’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:170: error: ‘::vwprintf’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:174: error: ‘::wcrtomb’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:185: error: ‘::wcsrtombs’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:195: error: ‘::wctob’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:196: error: ‘::wmemcmp’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:197: error: ‘::wmemcpy’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:198: error: ‘::wmemmove’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:199: error: ‘::wmemset’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:200: error: ‘::wprintf’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:201: error: ‘::wscanf’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:205: error: ‘::wcsstr’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:206: error: ‘::wmemchr’ has not been declared
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar: In function ‘wchar_t* std::wcsstr(wchar_t*, const wchar_t*)’:
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:223: error: invalid conversion from ‘const wchar_t*’ to ‘wchar_t*’
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:223: error:   initializing argument 1 of ‘wchar_t* std::wcsstr(wchar_t*, const wchar_t*)’
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar: In function ‘wchar_t* std::wmemchr(wchar_t*, wchar_t, size_t)’:
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:227: error: invalid conversion from ‘const wchar_t*’ to ‘wchar_t*’
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/cwchar:227: error:   initializing argument 1 of ‘wchar_t* std::wmemchr(wchar_t*, wchar_t, size_t)’
In file included from /usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/string:42,
                 from /usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/stdexcept:39,
                 from sf_c_api_wrap.cpp:3024:
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/bits/char_traits.h: In static member function ‘static int std::char_traits<wchar_t>::compare(const wchar_t*, const wchar_t*, size_t)’:
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/bits/char_traits.h:330: error: ‘wmemcmp’ was not declared in this scope/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/bits/char_traits.h: In static member function ‘static const wchar_t* std::char_traits<wchar_t>::find(const wchar_t*, size_t, const wchar_t&)’:
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/bits/char_traits.h:338: error:   initializing argument 1 of ‘wchar_t* std::wmemchr(wchar_t*, wchar_t, size_t)’
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/bits/char_traits.h: In static member function ‘static wchar_t* std::char_traits<wchar_t>::move(wchar_t*, const wchar_t*, size_t)’:
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/bits/char_traits.h:342: error: ‘wmemmove’ was not declared in this scope
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/bits/char_traits.h: In static member function ‘static wchar_t* std::char_traits<wchar_t>::copy(wchar_t*, const wchar_t*, size_t)’:
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/bits/char_traits.h:346: error: ‘wmemcpy’ was not declared in this scope
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/bits/char_traits.h: In static member function ‘static wchar_t* std::char_traits<wchar_t>::assign(wchar_t*, size_t, wchar_t)’:
/usr/gcc/4.4/lib/gcc/i386-pc-solaris2.11/4.4.4/../../../../include/c++/4.4.4/bits/char_traits.h:350: error: ‘wmemset’ was not declared in this scope

/../include/c++/4.4.4/bits/char_traits.h:338: error: invalid conversion from ‘const wchar_t*’ to ‘wchar_t*’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:33:12.947

我找到了解决方案。

问题是在solaris下：

> 如果`-D_XOPEN_SOURCE_EXTENDED=1`, g++ 甚至不能编译一个空的`#includes <iostream>`. 如果未定义，则 gcc 无法编译 C 代码。

[[来源]](http://lists.randombit.net/pipermail/botan-devel/2008-December/000707.html)

并从`/usr/include/python2.6/pyconfig.h`：

```
/* Define to activate Unix95-and-earlier features */
#define _XOPEN_SOURCE_EXTENDED 1 
```

删除 XOPEN 定义解决了我的问题。

# c++ - 在编译时将 std::array 转换为另一种数据类型？

> ID：14279821
> 
> 赞同：7
> 
> 时间：2013-01-11T14:07:38.580
> 
> 标签：c++, arrays, casting, c++11, compile-time

在 C++11 中有没有办法在编译时将一种类型的数组转换为另一种数据类型：

```
#include <iostream>
#include <array>
#include <type_traits>

int main()
{
   static constexpr std::array<double, 3> darray{{1.5, 2.5, 3.5}};
   static constexpr std::array<int, 3> iarray(darray); // not working
   // Is there a way to cast an array to another data type ? 
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T14:39:43.203

不，但是您可以使用[索引技巧](http://loungecpp.wikidot.com/tips-and-tricks:indices)相当容易地手动完成，假设实现提供`constexpr` `std::get`（或等效的`constexpr`重载`operator[]`）：

```
#include <iostream>
#include <array>
#include <type_traits>

// http://loungecpp.wikidot.com/tips-and-tricks%3aindices
template <std::size_t... Is>
struct indices {};
template <std::size_t N, std::size_t... Is>
struct build_indices: build_indices<N-1, N-1, Is...> {};
template <std::size_t... Is>
struct build_indices<0, Is...>: indices<Is...> {};

template<typename T, typename U, size_t i, size_t... Is>
constexpr auto array_cast_helper(
   const std::array<U, i> &a, indices<Is...>) -> std::array<T, i> {
   return {{static_cast<T>(std::get<Is>(a))...}};
}

template<typename T, typename U, size_t i>
constexpr auto array_cast(
   const std::array<U, i> &a) -> std::array<T, i> {
   // tag dispatch to helper with array indices
   return array_cast_helper<T>(a, build_indices<i>());
}

int main() {
   static constexpr std::array<double, 3> darray{{1.5, 2.5, 3.5}};
   static constexpr std::array<int, 3> iarray = array_cast<int>(darray);
} 
```

如果您的实现不提供`constexpr` `get`or `operator[]`，则不能使用`array`，因为当前没有访问数组元素的标准方法`constexpr`；你最好的选择是使用你自己`array`的`constexpr`扩展实现。

建议添加库`constexpr`以添加到[n3470](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3470.html)中的标准。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T20:32:04.593

我找到了一个非常简单的解决方案，只有一个可变参数函数：

```
#include <iostream>
#include <array>
#include <type_traits>

template<typename Type, typename OtherType, std::size_t Size, typename... Types, class = typename std::enable_if<sizeof...(Types) != Size>::type>
constexpr std::array<Type, Size> convert(const std::array<OtherType, Size> source, const Types... data);

template<typename Type, typename OtherType, std::size_t Size, typename... Types, class = typename std::enable_if<sizeof...(Types) == Size>::type, class = void>
constexpr std::array<Type, Size> convert(const std::array<OtherType, Size> source, const Types... data);

template<typename Type, typename OtherType, std::size_t Size, typename... Types, class>
constexpr std::array<Type, Size> convert(const std::array<OtherType, Size> source, const Types... data)
{
    return convert<Type>(source, data..., static_cast<const Type>(source[sizeof...(data)]));
}

template<typename Type, typename OtherType, std::size_t Size, typename... Types, class, class>
constexpr std::array<Type, Size> convert(const std::array<OtherType, Size> source, const Types... data)
{
    return std::array<Type, Size>{{data...}};
}

int main()
{
   static constexpr std::array<double, 3> darray{{1., 2., 3.}};
   static constexpr std::array<int, 3> iarray = convert<int>(darray);
   std::cout<<(std::integral_constant<int, iarray[2]>())<<std::endl;
   return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T14:57:36.080

与其使用目前最常用的 C++ 编译器无法编译的难以维护的混乱模板代码，还可以避免数字规范中的不良冗余，只需使用宏：

```
#include <iostream>
#include <array>
#include <type_traits>

#define MY_VALUES( T ) {T(1.5), T(2.5), T(3.5)}

int main()
{
    static constexpr std::array<double, 3>   darray  = { MY_VALUES( double ) };
    static constexpr std::array<int, 3>      iarray  = { MY_VALUES( int ) };
    // Whatever...
} 
```

这是宏擅长的东西。

只需确保通过使用全大写的宏名称以及一些自定义前缀来最小化名称冲突的可能性。

* * *

一般建议：不要太聪明，保持简单。

请记住，以后必须有人维护它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T14:11:57.990

您不能投射，但可以复制：

```
static constexpr std::array<double, 3> darray{{1.5, 2.5, 3.5}};
std::array<int, 3> iarray;

std::copy(begin(darray), end(darray), begin(iarray)); 
```

不幸的是，在这种情况下`iarray`不能再`constexpr`这样了。

# wordpress - 更改 WordPress 结构 - 帖子流位于页面中

> ID：14279822
> 
> 赞同：0
> 
> 时间：2013-01-11T14:07:42.503
> 
> 标签：wordpress, post, stream, structure

我必须创建一个 WordPress 网站，我想知道制作它的最佳实践。我必须尊重这两件事：

*   着陆页是静态的
*   帖子流显示在另一个页面中

是否有任何模块可以自动配置此结构更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:34:12.800

如果我对您的理解正确，那就是标准的 WordPress 功能。您创建两个页面（例如“登陆”和“发布流”）。在阅读设置中（参见[Codex](http://codex.wordpress.org/Settings_Reading_Screen)）：

1.  将“首页显示”设置为“静态页面”
2.  将“首页”设置为“登陆”
3.  将“帖子页面”设置为“帖子流”

你就完成了。“帖子流”中的任何内容都将被您的帖子替换。

# php - Php Magento 列出所有可配置产品，简单产品缺货

> ID：14279823
> 
> 赞同：1
> 
> 时间：2013-01-11T14:07:43.850
> 
> 标签：php, magento, filter

我们为我们的产品制作了一个 xml 文件，但我们遇到了问题。

在我们的 Magento 商店中，如果简单产品的数量为 0，所有可配置产品也会有库存。我们的管理/库存系统需要此功能。我们有一套过滤器，可以过滤掉所有没有库存的产品（见下文）。现在我们还需要一个过滤器来筛选有库存的可配置产品，但简单的产品缺货并且数量为 0。

过滤以不显示缺货产品

```
->joinField('is_in_stock',
                'cataloginventory/stock_item',
                'is_in_stock',
                'product_id=entity_id',
                'is_in_stock=1',
                '{{table}}.stock_id=1',
                'left');

        $products->addAttributeToFilter('is_in_stock', array('eq' => 1)); 
```

所以例子：

```
Configurable product: is in stock
Simple 1, simple 2, simple 3: are out of stock 
```

我们需要过滤掉所有状态为 out of stock 或 qty0 的简单产品的可配置产品

如果有人有答案，那就太好了，因为我们只是看不到解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:16:39.500

这是一个脚本，您可以使用它找到所有没有库存的简单配置。之后，您可以使用该 ID 数组将它们排除在您的过滤器中。

```
<?php
require_once('app/Mage.php');
umask(0);
Mage::app();

$collectionConfigurable = Mage::getResourceModel('catalog/product_collection')->addAttributeToFilter('type_id', array('eq' => 'configurable'));

$outOfStockConfis = array();
foreach ($collectionConfigurable as $_configurableproduct) {
    $product = Mage::getModel('catalog/product')->load($_configurableproduct->getId());
    if (!$product->getData('is_salable')) {
       $outOfStockConfis[] = $product->getId();
    }
} 
```

然后使用它从您的收藏中删除不可销售的可配置产品：

```
$products->addAttributeToFilter('entity_id',array('nin' => $outOfStockConfis)); 
```

# c# - 使用 jQuery 编辑 MVC MultiSelectList

> ID：14279829
> 
> 赞同：0
> 
> 时间：2013-01-11T14:07:53.797
> 
> 标签：c#, jquery, model-view-controller

我正在 MVC 中制作一个多选列表。它的 html 如下所示：

```
<select multiple="multiple"  id="foo" name="foo">
<option value="15">Doctor of Medicine</option>
<option value="10">Doctor of Osteopathy</option>
... 
```

我正在尝试使用 jquery 删除或隐藏选项：

```
$('#foo option:contains("' + removeThis + '")').remove(); 
```

或者

```
$('#foo option:contains("' + removeThis + '")').hide(); 
```

第一个什么都不做。第二个似乎在 html 中添加了 display: none ，但它对列表项没有影响（您仍然可以看到它）。为什么不？我该如何编辑它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:01:49.480

谜团解开了……原来我已故的同事正在使用这个[多选小部件](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)。我需要使用 UI 来刷新它。

故事的寓意：充分研究现有代码 - 在尝试编辑对象之前了解对象的来源会有所帮助。

# c# - 检测字符串长度超过服务器maxJsonLength属性设置的值

> ID：14279834
> 
> 赞同：1
> 
> 时间：2013-01-11T14:08:13.803
> 
> 标签：c#, asp.net, .net, ajax, json

首先让我先说我知道这个错误意味着什么。我知道 `&lt;jsonSerialization maxJsonLength="50000000"/&gt;` 并且我理解（在我看来，非常好的）限制的原因。

因此，我使用 .NET ScriptManager 从 javascript 调用 Web 服务来为我创建所有客户端代码。

Web 服务从 SQL 中获取一堆数据，将其转换为对象数组，然后返回该数组。

在后台，.NET 引擎将此数组转换为 JSON 数组以发送到客户端。

然而，有时生成的 JSON 字符串太长并且会引发异常。

我想要一些通用的方法来检测这个错误并优雅地处理它（例如，通过发送一些带有指示符的数据，表明应该发出另一个后续请求来获取其余部分）

我不想做的是对 json 字符串的长度设置一个很高的限制，因为这可能导致客户端需要很长时间才能获取所有数据。我相信这个设置的上限是 2147483644，即 2GB。当所有数据及时到达时，客户端可能已经厌倦并迷失了方向，从而在尝试解析它时使 javascript 引擎崩溃。

所以我想我真正追求的是一种方法来“知道”生成的 json 字符串在返回之前将有多长，以便可以适当截断它，或者以某种方式处理生成的错误，缩短数组并重试（并不断缩短并重试，直到它起作用或数组为空）。

我尝试在 return 语句周围放置一个 try/catch ，但这不起作用 - 我怀疑是因为 webservice 方法成功地将数据返回到框架，但框架随后阻塞了数据。

我更喜欢不涉及返回字符串的解决方案，但如果没有其他方法我可以忍受。

```
[WebMethod]
[System.Web.Script.Services.ScriptMethod(ResponseFormat = System.Web.Script.Services.ResponseFormat.Json)]
public MyClass[] GetMyClasses()
{
  List<MyClass> lst;
  //code that populate lst with enough instances to break the JSON.
  return lst.ToArray();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:45:22.243

而不是试图找出结果 JSON 长度然后应用某种分页，也许你应该总是分页你的数据..？

您已经知道该方法会产生大量数据，所以为什么不将您的方法更改为 GetMyClasses(int skip, int take) 以强制执行大小合理的数据块。

# jquery-ui - Spring mvc jquery ui“手风琴不是函数”

> ID：14279835
> 
> 赞同：0
> 
> 时间：2013-01-11T14:08:16.893
> 
> 标签：jquery-ui, spring-mvc, accordion

我有和手风琴在一个普通的 html 页面上工作，但是当我尝试将它添加到 Spring MVC 页面时，我得到了错误：`$(...).accordion is not a function`.

**这是我的`WEB-INF\views\index.jsp`文件的标题：**

```
<!DOCTYPE html>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<html>
         <head>
  <title>Jeeni Software Ltd</title>
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="<c:url value="css/style.css"/>" type="text/css"> 
  <link rel="stylesheet" href="<c:url value="css/menu/menu_style.css"/>" type="text/css"/>
  <script type="text/javascript" src="<c:url value="js/jquery-1.8.3.js"/>"></script>
  <script type="text/javascript" src="<c:url value="js/jquery-ui-1.9.2.js">"></script>       
  <script type="text/javascript" src="<c:url value="js/jquery.flip.js"/>"></script>

...
<!-- This is the 'accordion' div -->
<div id="accordion" style="height:800px;">
   <h3>Title...</h3>
   ... 
```

**这是准备好的功能：**

```
$(document).ready(function() {

  var object = $("#accordion");
  alert("object: "  + object.accordion);

  $("#accordion").accordion({ collapsible: true, active: 'false', autoHeight: false });
  $("#banner").fadeIn(1000);

  alert("Done");
}); 
```

有了这个`alert("object: " + object.accordion);`节目`object: undefined`，它就在下一行爆炸了。

**这是我的`servlet-context.xml`文件**

```
<mvc:resources mapping="/cv/**" location="/cv/" />
<mvc:resources mapping="/wow/**" location="/wow/" />
<mvc:resources mapping="/css/**" location="/css/" />
<mvc:resources mapping="/imgs/**" location="/imgs/" />
<mvc:resources mapping="/js/**" location="/js/" />
<mvc:resources mapping="/inc/**" location="/inc/" />
<mvc:resources mapping="/article-imgs/**" location="/article-imgs/" />

<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
  <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
  <property name="prefix" value="/WEB-INF/views/"/>
  <property name="suffix" value=".jsp"/>
</bean> 
```

Firebug 显示加载任何 jquery 文件都没有问题。我可以在 Spring mvc 之外重新创建正确的行为，所以问题一定与 Spring/Java 有关？！？但我不知道是什么。Firebug 报告的唯一错误是`$(...).accordion is not a function`，但一切都像 jquery ui 手风琴示例一样设置。

顺便说一句，我在过去的 3 个小时里搜索了互联网，发现了类似的问题，这些问题是由拼写错误修复的。这不是拼写错误。关于 jquery UI 和 Spring MVC，我找不到类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:16:15.313

```
<script type="text/javascript" src="<c:url value="js/jquery-ui-1.9.2.js">"></script> 
```

在某种程度上是不正确的。

*   你能让任何 jquery 函数工作吗？
*   只是 jquery-ui 功能不起作用吗？
*   您是否自定义了 jquery-ui 下载而不包括手风琴？
*   你在浏览器调试器中得到 404 吗？
*   您是否正在打开一个用其他内容覆盖 jQuery 对象的弹出窗口？

使用 jQuery lib 文件的 cdn 托管版本也可能更好。下面获取最新版本并与手风琴一起使用。

```
<script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js' type='text/javascript'></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:29:49.260

# 解决了！

问题是我正在通过以下方式导入一些内容：

```
<jsp:include page="../includes/index_page_intro_txt.jsp" /> 
```

这个 JSP 文件正在重新导入 jquery。把这个拿出来，一切都很好。

特别感谢@NimChimpsky 作为一个共鸣板并让我继续前进。

没有人可以用上面的信息解决这个问题。因此，请让大家知道我是如何解决的：

我首先从文件中删除除了库导入、就绪语句和手风琴 div 块之外的所有内容。然后它起作用了。所以我慢慢地把所有东西都加回来，直到它停止工作，然后调查那个原因。

应该首先做到这一点 - 呃！

# html - 在布局中定位不同的移动版本

> ID：14279840
> 
> 赞同：0
> 
> 时间：2013-01-11T14:08:33.180
> 
> 标签：html, css, mobile

我一直在尝试以下方法以在我的布局中定位我的移动 lumia 920。

```
<!--[if IEMobile]>
        <link rel="stylesheet" href="/Content/windowsPhone.css"/>
<![endif]-->
<!--[if IEMobile 8]>
        <link rel="stylesheet" href="/Content/windowsPhone.css"/>
<![endif]-->
<!--[if IEMobile 7]>
        <link rel="stylesheet" href="/Content/windowsPhone.css"/>
<![endif]-->
<!--[if IE]>
        <link rel="stylesheet" href="/Content/windowsPhone.css"/>
<![endif]--> 
```

这些都不起作用。还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:14:34.767

它不起作用，因为此代码仅适用于 Windows Phone 7，而 Lumia 920 是 Windows Phone 8。[在此处阅读更多信息](http://css-tricks.com/iemobile-conditional-comment/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:20:13.947

我建议使用 JS 来检测浏览器。

```
browserUA = navigator.userAgent.toLowerCase();
if (browserUA.search('windows phone os 7') > -1)
   //Load WP 7 CSS file 
```

# ruby - to_s 和 to_sym 不起作用

> ID：14279841
> 
> 赞同：1
> 
> 时间：2013-01-11T14:08:36.393
> 
> 标签：ruby, string, symbols

就那么简单

```
c = :cat
c.to_s
puts c.class 
```

给我符号，和

```
c = "cat"
c.to_sym
puts c.class 
```

给出字符串。我使用的 Ruby 是 1.9.3，文档说这应该将符号转换为字符串，并将字符串转换为符号。什么可能是错的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T14:11:00.997

`to_s`并且`to_sym`不要改变原始变量，而是返回一个值。您需要`.class`使用`.to_s`.

```
c = :cat
c.to_s.class
# "String"

c = "cat"
c.to_sym.class
# "Symbol" 
```

如果要转换新变量，则必须对其进行赋值。

```
c = "cat"
d = c.to_sym
puts d.class
# d is a symbol
# "Symbol" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T14:10:36.463

`to_s`并`to_sym`返回新值，它们不会转换变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T14:13:55.523

尝试：

```
c = :cat
c = c.to_s
puts c.class # "String"

c = "cat"
c = c.to_sym
puts c.class # "Symbol" 
```

# c++ - Directx9 表面转纹理

> ID：14279843
> 
> 赞同：2
> 
> 时间：2013-01-11T14:08:41.507
> 
> 标签：c++, 3d, directx, textures, geometry-surface

我想将我的 Backbuffer 捕获到我的 LPDIRECT3DSURFACE9 中，然后将表面复制到我的 IDirect3DTexture9 中，最后使用该纹理作为我的对象皮肤。我编写了代码，但刚刚收到黑色像素。

```
IDirect3DTexture9* texture;
LPDIRECT3DSURFACE9 pd3dsBack = NULL;

void init()//init point
{

    D3DXCreateTexture(g_pd3dDevice, 640, 480, D3DUSAGE_DYNAMIC,
        0, D3DFMT_X8R8G8B8, D3DPOOL_DEFAULT, &texture);

}

void render()//render point
{

    g_pd3dDevice->BeginScene();

    g_pd3dDevice->Clear(0, NULL, D3DCLEAR_TARGET | D3DCLEAR_ZBUFFER,
        D3DCOLOR_COLORVALUE(0.0f, 1.0f, 0.0f, 1.0f), 1.0f, 0);

    //my scene (1) 3d objects codes for draw.

    g_pd3dDevice->EndScene();

    //now try to get back-buffer into surface

    g_pd3dDevice->GetBackBuffer(0, 0, D3DBACKBUFFER_TYPE_MONO, &pd3dsBack);

    //i add this Save section to ensure the backbuffer data received complete and work.(it was ok and save complete true picture of Scene(1) ).

    D3DXSaveSurfaceToFileA("BackbufferImage.BMP", D3DXIFF_BMP, pd3dsBack, NULL, NULL);

    //this line put surface into my texture ; if u think this way is false please give me a simple code to fill texture by surface.

    texture->GetSurfaceLevel(0, &pd3dsBack);

    pd3dsBack->Release();//release my surface

                         //scene(2)
    g_pd3dDevice->BeginScene();

    g_pd3dDevice->Clear(0, NULL, D3DCLEAR_TARGET | D3DCLEAR_ZBUFFER,
        D3DCOLOR_COLORVALUE(1.0f, 0.0f, 0.0f, 1.0f), 1.0f, 0);

    //now render my scene(2) and useing the texture object for draw it as skin of my 3d     object
    g_pd3dDevice->SetTexture(0, texture);

    g_pd3dDevice->EndScene();

    g_pd3dDevice->Present(NULL, NULL, NULL, NULL);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T17:25:45.440

你可以试试这样的

```
LPDIRECT3DDEVICE9 l_Device= RenderManager()->GetDirectXDevice();
LPDIRECT3DSURFACE9 l_RenderTarget, l_Surface;

m_Texture->GetSurfaceLevel(0,&l_Surface);
l_Device->GetRenderTarget(IdStage,&l_RenderTarget);
l_Device->StretchRect(l_RenderTarget,NULL, l_Surface,NULL,D3DTEXF_NONE);
l_RenderTarget->Release(); 
```

IdStage是您要复制的当前渲染目标，在您的情况下它将是**0**

**m_Texture**是一个 DirectX 纹理，您希望从后台缓冲区接收副本

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-04T13:23:56.977

另一种方式：

***第 1 步：***获取后台缓冲区作为表面：

```
 LPDIRECT3DSURFACE9 pBackBuffer;
 GetBackBuffer(0, D3DBACKBUFFER_TYPE_MONO, &pBackBuffer) 
```

***第 2 步：***创建一个空纹理

```
 LPDIRECT3DTEXTURE9 textureMap
 D3DXCreateTexture(device, width, height, D3DX_DEFAULT,  D3DUSAGE_RENDERTARGET, 
                                 D3DFMT_X8R8G8B8, D3DPOOL_DEFAULT,&textureMap); 
```

注意：如果您想要 Alpha 通道，请使用 D3DFMT_A8R8G8B8 格式。

***第三步：***获取指向空纹理顶面的指针

```
LPDIRECT3DSURFACE9 pTexSurface;
textureMap->GetSurfaceLevel(0, &pTexSurface); 
```

***第 4 步：*** Surface to Surface Copy（后台缓冲表面到空表面）

```
StretchRect(pBBsurface, NULL, pTexSurface, NULL, D3DTEXF_NONE); 
```

***第 5 步：***具有后台缓冲区内容的结果纹理

```
textureMap 
```

# sql - 如何从日期时间中删除时间

> ID：14279849
> 
> 赞同：45
> 
> 时间：2013-01-11T14:09:19.887
> 
> 标签：sql, date, reporting-services

数据库中的字段 DATE 具有以下格式：

```
2012-11-12 00:00:00 
```

我想从日期中删除时间并返回这样的日期：

```
11/12/2012 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-01-11T17:25:15.313

首先，如果您的日期是 varchar 格式，[请将日期存储为日期](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)，这将为您省去很多麻烦，而且最好尽早完成。问题只会变得更糟。

其次，一旦有了日期，**就不**要将日期转换为 varchar！将其保留为日期格式，并在应用程序端使用格式来获​​取所需的日期格式。

根据您的 DBMS，有多种方法可以做到这一点：

* * *

**SQL-Server 2008**及更高版本：

```
SELECT  CAST(CURRENT_TIMESTAMP AS DATE) 
```

* * *

**SQL-Server 2005**及更早版本

```
SELECT  DATEADD(DAY, DATEDIFF(DAY, 0, CURRENT_TIMESTAMP), 0) 
```

* * *

**SQLite**

```
SELECT  DATE(NOW()) 
```

* * *

**甲骨文**

```
SELECT  TRUNC(CURRENT_TIMESTAMP) 
```

* * *

**PostgreSQL**

```
SELECT  CURRENT_TIMESTAMP::DATE 
```

* * *

如果您需要在报告中使用特定于文化的格式，您可以明确说明接收文本框的格式（例如 dd/MM/yyyy），或者您可以设置语言以便显示该语言的相关日期格式。

无论哪种方式，这在 SQL 之外都可以更好地处理，因为在 SQL 中转换为 varchar 会影响您在报告中可能执行的任何排序。

如果您不能/不会将数据类型更改为 DATETIME，那么`CONVERT(DATETIME, yourField)`在发送到报告服务之前仍将其转换为 SQL 中的日期（例如 ）并按上述方式处理它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-11T14:10:40.347

只需使用，（*在 TSQL 中*）

```
SELECT convert(varchar, columnName, 101) 
```

在*MySQL中*

```
SELECT DATE_FORMAT(columnName, '%m/%d/%Y') 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-09-07T09:24:11.503

我发现这个方法非常有用。但是，它将您的日期/时间格式转换为日期，但它为我需要的工作所做的工作永远不会少。（我只需要在报告上显示日期，时间无关紧要）。

```
CAST(start_date AS DATE) 
```

*更新*

（请记住，我是一名实习生；））

如果您使用 SSRS，我想出了一个更简单的方法。

实际更改报表中字段所在的文本框属性更容易。右键单击字段>数字>日期并选择适当的格式！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-11T14:22:04.377

就个人而言，我会返回完整的本机日期时间值并在客户端代码中对其进行格式化。

这样，您可以使用用户的语言环境设置为该用户赋予正确的含义。

“11/12”是模棱两可的。是吗：

*   11 月 12 日
*   12 月 11 日

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-11T14:10:52.657

```
SELECT DATE('2012-11-12 00:00:00'); 
```

返回

```
2012-11-12 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-11T14:11:32.983

有关更多信息，请参阅：**[SQL Server 日期格式](http://www.sql-server-helper.com/tips/date-formats.aspx)**

*[月/日/年]*

```
SELECT CONVERT(VARCHAR(10), cast(dt_col as date), 101) from tbl 
```

*[日/月/年]*

```
SELECT CONVERT(VARCHAR(10), cast(dt_col as date), 103) from tbl 
```

## [现场演示](http://sqlfiddle.com/#!3/e7875/5)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-09-19T14:40:44.280

TSQL

```
SELECT CONVERT(DATE, GETDATE())         // 2019-09-19
SELECT CAST(GETDATE() AS DATE)          // 2019-09-19
SELECT CONVERT(VARCHAR, GETDATE(), 23)  // 2019-09-19 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-11T14:10:31.560

至少在 mysql 中，您可以使用`DATE(theDate)`.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-11T14:12:02.560

您可以尝试以下方法：

```
SELECT CONVERT(VARCHAR(10),yourdate,101); 
```

或这个：

```
select cast(floor(cast(urdate as float)) as datetime); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-11T14:13:37.533

使用这个 SQL：

```
SELECT DATE_FORMAT(date_column_here,'%d/%m/%Y') FROM table_name; 
```

# magento - 如何获取所有类别和子类别？

> ID：14279853
> 
> 赞同：12
> 
> 时间：2013-01-11T14:09:31.347
> 
> 标签：magento, navigation, categories

如果类别处于活动状态，但“包含在导航菜单中”设置为“否”，我如何获取所有类别和子类别？

我尝试使用这个：

```
<?php 
$_categories = Mage::getBlockSingleton('catalog/navigation'); 
foreach ($_categories->getStoreCategories() as $_category) { 
$category = Mage::getModel('catalog/category'); 
$category->load($_category->getId()); 
$subcategories = explode(',', $category->getChildren()); 
?> 
<dl> 
<dt><?php echo $this->htmlEscape($_category->getName()); ?></dt> 
<dd> 
<ol> 
<?php 
foreach ($subcategories as $subcategoryId) { 
$category->load($subcategoryId); 
echo '<li><a href="' . $category->getURL() . '">' . $category->getName() . '</a></li>'; 
} 
?> 
</ol> 
</dd> 
</dl> 
<?php

} 
?> 
```

但是如果一个类别的“包括在导航菜单中”是“否”，它就不会显示在首页上！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-12T04:05:18.527

你只需要改变一件事！当您调用时，`$_categories = Mage::getBlockSingleton('catalog/navigation')`您实际上是在`catalog/navigation`专门从模型中获取类别——“非导航”类别的过滤已经完成。相反，我们可以从`catalog/category`模型中获取一个集合，以确保我们获得网站上可用的所有类别：

```
$categories = Mage::getModel('catalog/category')
        ->getCollection()
        ->addAttributeToSelect('*')
        ->addIsActiveFilter(); 
```

请注意，我`addIsActiveFilter()`用来确保我们只获取当前活动/启用的类别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-30T14:39:40.807

我更喜欢使用目录/类别助手

```
$helper = Mage::helper('catalog/category');
$categories = $helper->getStoreCategories(); 
```

# regex - 什么正则表达式将包含单词“索引”和后面的所有行，直到双 cr 或 lf？

> ID：14279865
> 
> 赞同：0
> 
> 时间：2013-01-11T14:10:17.363
> 
> 标签：regex

我希望使用 PDFregex 从 PDF 文档中提取索引，作为数据库中的参考条目。索引（正如预期的那样）都以单词 index 开头，但以 (moslty0 双回车符结尾。我可以使用什么正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:22:41.777

尝试这个：

```
Index(.|\s)*?(?=(?:\n\r|\n|\r){2})

# Index                 --> Find `Index`
# (.|\s)*?              --> Followed by any string including linefeeds (? to make it not greedy)
# (?=(?:\n\r|\n|\r){2}) --> Stop at (the first) double linefeed:

# (?=)       --> Positive lookahead: Matches if the previous is followed by it's contents.
# (?:)       --> Non-capturing group.
# \n\r|\n|\r --> Linefeeds: Windows or LF or CR
# {2}        --> Exactly 2 of the previous. 
```

确保在代码中指定点`.`与换行符匹配。

# java - 异或的反函数是什么？

> ID：14279866
> 
> 赞同：134
> 
> 时间：2013-01-11T14:10:19.797
> 
> 标签：java, xor, inverse

Java中有XOR函数-`a^b`

举个例子：`5^3 = 6`

你能告诉我反函数吗？如果我有`6`并且`3`可以得到包括 number 的数字范围`5`吗？

* * *

## 回答 #1

> 赞同：287
> 
> 时间：2013-01-11T14:14:19.103

逆是异或！

如果你有：

```
c = a^b; 
```

如果您有其他可用值，则可以取回`a`或取回：`b`

```
a = c^b; // or b^c (order is not important)
b = c^a; // or a^c 
```

例如，如果`a = 5`，`b = 3`（因此`c = 6`正如你所提到的）你得到：

```
b=0011 (3)            a=0101 (5)
c=0110 (6) XOR   or   c=0110 (6) XOR
----------            ----------
a=0101 (5)            b=0011 (3) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2021-02-06T01:09:19.887

XOR 的逆是 XOR 本身。
我在 leetcode 上遇到了类似的问题。[Leetcode-1720](https://leetcode.com/problems/decode-xored-array/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-12-23T14:46:18.910

XOR 的逆是 XOR 本身。例如，如果您执行此操作：

```
3 ^ 4 = 7 
```

以下陈述是正确的：

```
4 ^ 7 = 3

3 ^ 7 = 4 
```

希望这会有所帮助。

# java - 使用扫描仪接受字符串输入并存储在字符串数组中

> ID：14279870
> 
> 赞同：3
> 
> 时间：2013-01-11T14:10:33.980
> 
> 标签：java, arrays, string, java.util.scanner

有人能帮助我吗。我进行了多次搜索，但在任何地方都找不到解决方案。我是 Java 的初学者，目前正在大学休息期间练习一些代码。

我正在尝试制作电话簿程序。目前我正在尝试添加新联系人，下面是我拥有的代码，但我不确定如何将信息存储在数组中，有人可以给我一些指示。

```
 import java.util.Scanner;

    public class addContact {
    public static void main(String [] args){

    //declare arrays
        String [] contactName = new String [12];
        String [] contactPhone = new String [12];
        String [] contactAdd1 = new String [12];
        String [] contactAdd2 = new String [12];

    //inputs
    String name = "";
    String phone = "";
    String add1 = "";
    String add2 = "";

    //method of taken input
    Scanner input = new Scanner(System.in);

    //while name field is empty display prompt etc.
    while (name.equals(""))
    {
    System.out.println("Enter contacts name: ");
    name = input.nextLine();
    name += contactName[];
    }

    while (add1.equals(""))
    {
    System.out.println("Enter contacts addressline1:");
    add1 = input.nextLine();
    add1 += contactAdd1[];
    }

    while (add2.equals(""))
    {
    System.out.println("Enter contacts addressline2:");
    add2 = input.nextLine();
    add2 += contactAdd2[];
    }

    while (phone.equals(""))
    {
    System.out.println("Enter contact phone number: ");
    phone = input.nextLine();
    phone += contactPhone[];
    }

    }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:20:53.090

一种更简洁的方法是创建一个`Person`包含`contactName`,`contactPhone`等的对象。然后，使用一个`ArrayList`而不是一个数组来添加新对象。创建一个循环，接受每个“Person”的所有字段：

```
while (!done) {
   Person person = new Person();
   String name = input.nextLine();
   person.setContactName(name);
   ...

   myPersonList.add(person);
} 
```

使用列表将消除对数组边界检查的需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T14:25:37.257

这段代码的问题之一是：

```
name += contactName[]; 
```

该指令不会在数组中插入任何内容。相反，它会将变量名称的当前值与contactName 数组的字符串表示形式连接起来。

而是使用这个：

```
contactName[index] = name; 
```

该指令将变量名称存储在索引处的contactName数组中`index`。

您遇到的第二个问题是您没有变量`index`.

您可以做的是一个包含 12 次迭代的循环来填充所有数组。（`index`并将成为您的迭代变量）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-11T13:06:55.920

```
//go through this code I have made several changes in it//

import java.util.Scanner;

public class addContact {
public static void main(String [] args){

//declare arrays
String [] contactName = new String [12];
String [] contactPhone = new String [12];
String [] contactAdd1 = new String [12];
String [] contactAdd2 = new String [12];
int i=0;
String name = "0";
String phone = "0";
String add1 = "0";
String add2 = "0";
//method of taken input
Scanner input = new Scanner(System.in);

//while name field is empty display prompt etc.
while (i<11)
{
    i++;
System.out.println("Enter contacts name: "+ i);
name = input.nextLine();
name += contactName[i];
}

while (i<12)
{
    i++;
System.out.println("Enter contacts addressline1:");
add1 = input.nextLine();
add1 += contactAdd1[i];
}

while (i<12)
{
    i++;
System.out.println("Enter contacts addressline2:");
add2 = input.nextLine();
add2 += contactAdd2[i];
}

while (i<12)
{
    i++;
System.out.println("Enter contact phone number: ");
phone = input.nextLine();
phone += contactPhone[i];
}

}   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-17T22:15:24.610

这会更好吗？

```
import java.util.Scanner;

public class Work {

public static void main(String[] args){

    System.out.println("Please enter the following information");

    String name = "0";
    String num = "0";
    String address = "0";

    int i = 0;

    Scanner input = new Scanner(System.in);

    //The Arrays
    String [] contactName = new String [7];
    String [] contactNum = new String [7];
    String [] contactAdd = new String [7];

    //I set these as the Array titles
    contactName[0] = "Name";
    contactNum[0] = "Phone Number";
    contactAdd[0] = "Address";

    //This asks for the information and builds an Array for each
    //i -= i resets i back to 0 so the arrays are not 7,14,21+
    while (i < 6){

        i++;
        System.out.println("Enter contact name." + i);
        name = input.nextLine();
        contactName[i] = name;
    }

    i -= i;
    while (i < 6){
        i++;
        System.out.println("Enter contact number." + i);
        num = input.nextLine();
        contactNum[i] = num;
    }

    i -= i;
    while (i < 6){
        i++;
        System.out.println("Enter contact address." + i);
        num = input.nextLine();
        contactAdd[i] = num;
    }

    //Now lets print out the Arrays
    i -= i;
    while(i < 6){
    i++;
    System.out.print( i + " " + contactName[i] + " / " );
    }

    //These are set to print the array on one line so println will skip a line
    System.out.println();
    i -= i;
    i -= 1;

    while(i < 6){
    i++;

    System.out.print( i + " " + contactNum[i] + " / " );
    }

    System.out.println();
    i -= i;
    i -= 1;

    while(i < 6){
        i++;

    System.out.print( i + " " + contactAdd[i] + " / " );
    }

    System.out.println();

    System.out.println("End of program");

}

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-02T08:50:20.420

如果我错了，请纠正我。`

```
public static void main(String[] args) {

    Scanner na = new Scanner(System.in);
    System.out.println("Please enter the number of contacts: ");
    int num = na.nextInt();

    String[] contactName = new String[num];
    String[] contactPhone = new String[num];
    String[] contactAdd1 = new String[num];
    String[] contactAdd2 = new String[num];

    Scanner input = new Scanner(System.in);

    for (int i = 0; i < num; i++) {

        System.out.println("Enter contacts name: " + (i+1));
        contactName[i] = input.nextLine();

        System.out.println("Enter contacts addressline1: " + (i+1));
        contactAdd1[i] = input.nextLine();

        System.out.println("Enter contacts addressline2: " + (i+1));
        contactAdd2[i] = input.nextLine();

        System.out.println("Enter contact phone number: " + (i+1));
        contactPhone[i] = input.nextLine();

    }

    for (int i = 0; i < num; i++) {
        System.out.println("Contact Name No." + (i+1) + " is "+contactName[i]);
        System.out.println("First Contacts Address No." + (i+1) + " is "+contactAdd1[i]);
        System.out.println("Second Contacts Address No." + (i+1) + " is "+contactAdd2[i]);
        System.out.println("Contact Phone Number No." + (i+1) + " is "+contactPhone[i]);
    }
} 
```

`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-04-20T11:22:03.177

到目前为止，Java 中还没有使用指针。您可以从类中创建一个对象，并使用相互链接的不同类，并使用主类中每个类的功能。

# git - 用于 Minecraft 服务器备份/版本控制的 Git 替代品

> ID：14279872
> 
> 赞同：7
> 
> 时间：2013-01-11T14:10:36.303
> 
> 标签：git, bash, scripting, backup, minecraft

目前我的 Minecraft 服务器，驻留在 CentOS 服务器上，使用 Git 作为版本控制和“灾难管理”的手段。除了两个问题之外，这非常有效：

1.  它很大。因为服务器有一个中央存储库、主分支（服务器实际运行在其上）和一个测试服务器分支，每个分支都包含曾经做出的每一个已提交的更改，都会无限地填充 SSD（使用过去 1.5 个月的大约 70GB )

2.  它很慢。在对象目录中存储了这么多数据之后，提交、推送和拉取都很慢，因为它会尝试压缩/解压缩和解析所有这些数据。

我正在寻找一种解决方案，让 Git 对这个应用程序更有效，或者寻找替代品。以下是我选择使用 Git 的一些原因：

*   增量备份 - 每次我想备份时，我都不必保存整个 8GB 未压缩/2GB 压缩服务器！
*   Cherry-pick restore - 我需要能够轻松地恢复服务器的某些部分（例如特定的插件配置，而无需恢复人们对主要世界的更改）
*   能够将项目克隆到家庭计算机以进行异地备份和测试
*   能够为测试服务器创建一个分支以在推出之前尝试不稳定的功能

当我们过去使用精确的 tarballing bash 脚本来备份服务器时，我们通常会删除超过 2 周的备份。对于增量备份，这段时间应该是一个月或更长时间。

如果你不熟悉 Minecraft 的结构，它有点像这样：

```
.
|-- plugins
    |-- SomePlugin
        |-- config.yml
    |-- SomePlugin.jar
|-- world
    |-- region
        |-- (binary files of chunks, a 2000x2000 world is often 1GB in size)
    |-- mcmmo_data (third party plugin)
        |-- x coordinate
            |-- y coordinate
                |-- small flatfile
    |-- level.dat
|-- stuff.txt
|-- properties.yml
|-- server.jar 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:03:58.720

为了存储二进制/大文件，您可能会考虑的一种选择是[git-annex](http://git-annex.branchable.com/)，它是为管理 git 内部的大对象而设计的。它可以让您签入那些巨大的文件，而不会弄乱中央 git 数据库本身。但是，这需要重新考虑如何处理这些文件并让它们随着时间的推移而改变。它确实有一个不错的推/拉/备份组件，它可能会很好地工作，但你会遇到其他需要处理的“新思维方式”。当然，首先在测试系统上尝试一下。

# c++ - 如何使用 static_cast 解决重载函数？

> ID：14279874
> 
> 赞同：3
> 
> 时间：2013-01-11T14:10:46.693
> 
> 标签：c++

```
 void hello()
  {
    cout << "helloworld" << endl;
  }

  void hello(string s)
  {
    cout << "hello " << s << endl;
  }

  void doWork()
  {
    thread t1(static_cast<void ()>(&hello));
    thread t2(static_cast<void (string)>(&hello),"bala");
    t1.join();
    t2.join();
  } 
```

错误：

```
thread.cc|19 col 42| error: invalid static_cast from type '<unresolved overloaded function type>' to type 'void()'                                                          
thread.cc|20 col 48| error: invalid static_cast from type '<unresolved overloaded function type>' to type 'void(std::string) {aka void(std::basic_string<char>)}' 
```

我知道我可以使用`typedef`函数指针或 lambda。不可以用`static_cast`吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T14:14:56.653

您必须转换为函数指针类型（不是函数类型）

```
thread t1(static_cast<void (*)()>(&hello));
                           ^^^ 
```

函数类型（例如`void()`）是一种通过参数和返回类型表示函数的类型。但是程序中不能有这些类型的变量（除了函数本身，这些是函数类型的左值）。但是，可以有对函数的引用或指向函数的指针，您希望使用后者。

当您*不*尝试创建函数类型的变量（或临时对象）时（例如，您 typedef 一个函数类型，或将其用作模板参数），它的使用是可以的。`std::function<void()>`仅使用参数来指定其参数和返回类型，因此其设计者决定使用这种圆滑的语法。在内部，它不会尝试使用该类型创建变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:18:55.070

该标准确定，在获取重载函数的地址时，可以使用该地址来消除歧义。这包括分配给适当类型的变量或强制转换。

您可能缺少的是 of 的类型`&hello`不是函数签名，而是函数指针，因此强制转换应该是 to`void (*)()`和/或`void (*)(std::string)`。

```
void (*f)() = &hello;                  // target variable determines
                                       // the correct overload
thread thr( (void(*)())&hello );       // or a cast (C or static_cast<>)
thread thr( static_cast<void(*)()>(&hello) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:18:00.050

如果你使用 std 线程你可以写

```
std::thread(hello);
std::thread(hello, "blabla"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-11T14:12:15.180

为什么要投？您可以使用 std::bind 或直接发送指针

编辑：

正确，这是做不到的，肯定需要演员表。

# image - Amazon S3 - 存储数十万张图像的最佳实践

> ID：14279882
> 
> 赞同：0
> 
> 时间：2013-01-11T14:11:17.443
> 
> 标签：image, amazon-s3, amazon

我们正在将我们的图像存储库移动到 Amazon S3，我想知道将图像存储在那里的最佳做法是什么。

我们永远不会浏览实际的文件夹，所有图像的名称`hash-type.ext`如下：

```
22ads432b3b2j32-default.png
22ads432b3b2j32-mini.png 
```

我是否应该费心将图像组织到单独的文件夹中，例如`default/`和`mini/`？或者将它们全部放在一个文件夹中可以吗？

我不知道在一个文件夹中拥有数十万张甚至数百万张图像是好事还是坏事。就像我之前提到的，我们永远不会遍历/浏览 S3 文件夹，因为我们将它们的位置存储在数据库中，以防我们必须删除。

现在我们使用 DNS cname 作为存储桶，但最终将迁移到云端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:28:35.383

每个存储桶没有最大对象数。只要你能保证对象的键是唯一的，你只需要一个桶。一个重要的考虑因素是[您最多只能拥有 100 个存储桶](http://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html)。

# php - 使用 RegEx + XPath 检查 2 个关键字

> ID：14279885
> 
> 赞同：0
> 
> 时间：2013-01-11T14:11:22.250
> 
> 标签：php, regex, xpath

$string() = "这是管理费";

我打算做的是用 RegEx 写下一个 X-Path 以返回上面的语句为真，因为当 $string 包含“管理费用”时，该语句返回真。

看，上面的语句可以有以下关键字，

> 1.  管理 && 收费 || 收费
> 2.  行政&&收费|| 收费
> 3.  行政&&收费|| 收费

总而言之，这里的根关键字是“admin”和“charge”。

因此，我想编写一个包含 X-Path 和 RegEx 的脚本。

以下是我到目前为止的方法，

```
contains(upper-case(normalize-space($string)), "ADMIN CHARGES") 
```

这仍然只是完全匹配。

我研究过，但主要是检查单个关键字，比如

```
contains(upper-case($string), "^[m/ADMIN CHARGE/]" 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:38:09.537

正则表达式函数是[XPATH 2.0](http://www.w3.org/TR/xpath-functions/#regex-syntax)语法的一部分。

但是，PHP 使用[libxml PHP 扩展](http://php.net/manual/en/dom.requirements.php)来处理其 XML 操作，它[仅实现 XPATH 1.0 规范](http://www.xmlsoft.org/)。

[这个答案](https://stackoverflow.com/a/2085666/165969)显示了使用 PHP/Java Bridge 和 Saxon 的替代方案。这可能是目前最好的选择。

使用 XSLT 2.0 库，可以使用[match](http://www.w3.org/TR/xpath-functions/#func-matches)函数。来自 TFM：

```
fn:matches($input as xs:string?, $pattern as xs:string) as xs:boolean
fn:matches( $input   as xs:string?,
            $pattern     as xs:string,
            $flags   as xs:string) as xs:boolean

matches(., "admin\S*\scharges?", "i") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:02:00.043

将@JWiley 的评论变成答案：

```
contains($string,'admin') and contains($string,'charge') 
```

# java - 用于 OGC 模式的 Jaxb

> ID：14279887
> 
> 赞同：2
> 
> 时间：2013-01-11T14:11:28.300
> 
> 标签：java, jaxb, ogc

这是我的方案（scheme1.xsd）

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:app="http://www.deegree.org/app" xmlns:deegreewfs="http://www.deegree.org/wfs" xmlns:dgjdbc="http://www.deegree.org/jdbc" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wfs="http://www.opengis.net/wfs" attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://www.deegree.org/app">
    <xs:import namespace="http://www.opengis.net/gml" schemaLocation="http://schemas.opengis.net/gml/3.1.1/base/feature.xsd" />
    <xs:import namespace="http://www.opengis.net/gml" schemaLocation="http://schemas.opengis.net/gml/3.1.1/base/geometryAggregates.xsd" />
    <xs:import namespace="http://www.opengis.net/wfs" schemaLocation="http://schemas.opengis.net/wfs/1.1.0/wfs.xsd" />
    <!-- CONFIGURACI N DE LA BASE DE DATOS -->
    <!-- ==============================Genera una clave como identificador======================================== -->
    <xs:element name="Entidad" substitutionGroup="gml:_Feature" type="app:EntidadType">
        <!-- DEFINICI N DE GML:ID -->
    </xs:element>
    <!-- ==============================RESOLUCION DE CAMPOS======================================== -->
    <xs:complexType name="EntidadType">
        <xs:complexContent>
            <xs:extension base="gml:AbstractFeatureType">
                <xs:sequence>
                    <!-- Campo simple - INTEGER -->
                    <xs:element name="fid" type="xs:integer">
                    </xs:element>
                    <!-- Campo simple - INTEGER -->
                    <xs:element name="nombreEntidad_nombre" type="xs:string">
                    </xs:element>
                    <xs:element name="entidadLocal_municipioReal" type="xs:string">
                    </xs:element>
                    <xs:element name="entidadLocal_municipio" type="xs:string">
                    </xs:element>
                    <xs:element name="entidadLocal_provinciaReal" type="xs:string">
                    </xs:element>
                    <xs:element name="entidadLocal_provincia" type="xs:string">
                    </xs:element>
                    <xs:element name="posicionEspacial_BBOX" type="gml:GeometryPropertyType">
                    </xs:element>
                    <xs:element name="posicionEspacial_Centroide" type="xs:string">
                    </xs:element>
                    <!-- GEOM -->
                    <xs:element name="geom" type="gml:GeometryPropertyType">
                    </xs:element>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
</xs:schema> 
```

当我使用：

```
xjc scheme1.xsd 
```

我明白了：

```
parsing a schema...
[ERROR] Property "Title" is already defined. Use &lt;jaxb:property> to resolve this conflict.
line 232 of "http://www.w3.org/1999/xlink.xsd"

[ERROR] The following location is relevant to the above error
line 219 of "http://www.w3.org/1999/xlink.xsd"

[ERROR] Property "Title" is already defined. Use &lt;jaxb:property> to resolve this conflict.
line 261 of "http://www.w3.org/1999/xlink.xsd"

[ERROR] The following location is relevant to the above error
line 246 of "http://www.w3.org/1999/xlink.xsd"

Failed to parse a schema. 
```

我使用了这个文件（binding.xjb）：

```
<jxb:bindings version="2.0"
          xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
          xmlns:xs="http://www.w3.org/2001/XMLSchema" >

    <jxb:bindings schemaLocation="http://www.w3.org/1999/xlink.xsd" node="/xs:schema">

        <jxb:bindings node="//xs:attributeGroup[@name='locatorAttrs']">
            <jxb:bindings node=".//xs:attribute[@ref='xlink:title']">
                <jxb:property name="title1"/>
            </jxb:bindings>
        </jxb:bindings>

        <jxb:bindings node="//xs:attributeGroup[@name='arcAttrs']">           
            <jxb:bindings node=".//xs:attribute[@ref='xlink:title']">
                <jxb:property name="title2"/>
            </jxb:bindings>            
        </jxb:bindings>        

    </jxb:bindings>

</jxb:bindings>

xjc scheme1.xsd -b binding.xjb 
```

我得到这个错误：

```
parsing a schema...
compiling a schema...
[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 1466 of http://schemas.opengis.net/gml/3.1.1/base/geometryPrimitives.xsd

[ERROR] (Related to above error) This is the other declaration.   
line 1520 of "http://schemas.opengis.net/gml/3.1.1/base/geometryPrimitives.xsd"

[ERROR] Two declarations cause a collision in the ObjectFactory class.
 line 206 of "http://schemas.opengis.net/gml/3.1.1/base/defaultStyle.xsd"

[ERROR] (Related to above error) This is the other declaration.   
 line 225 of "http://schemas.opengis.net/gml/3.1.1/base/defaultStyle.xsd"

[ERROR] Two declarations cause a collision in the ObjectFactory class.
 line 287 of "http://schemas.opengis.net/gml/3.1.1/base/geometryBasic0d1d.xsd" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:42:54.833

问题是 xjc 构建的 ObjectFactory 将包含一个工厂方法，用于包内的元素，在您的情况下：

在 geometryPrimitives.xsd，第 1466 行：

```
<element name="_Solid" type="gml:AbstractSolidType" abstract="true" ... 
```

在第 1520 行：

```
<element name="Solid" type="gml:SolidType" substitutionGroup="gml:_Solid"/> 
```

它们都将在 ObjectFactory 中创建一个名为“createSolid()”之类的工厂方法。要解决此问题，您可以在 binding.xjb 中包含如下内容：

```
<jxb:bindings schemaLocation="http://schemas.opengis.net/gml/3.1.1/base/geometryPrimitives.xsd" node="/xs:schema">
    <jxb:bindings node="//xs:element[@name='_Solid']">
        <jxb:factoryMethod name="gmlAbstractSolidElementFactory" />
    </jxb:bindings>
</jxb:bindings> 
```

如果冲突来自不同的模式文件，您可以指定每个模式在哪个包中。这样，您不必替换每个冲突工厂方法名称的名称，从而节省时间：

```
<bindings schemaLocation="../path/to/my.xsd">
   <schemaBindings>
      <package name="org.acme.foo"/>
   </schemaBindings>
</bindings> 
```

# r - 为名称添加双引号

> ID：14279892
> 
> 赞同：0
> 
> 时间：2013-01-11T14:11:44.617
> 
> 标签：r

我试图在 R 中为名称添加双引号，但对我来说不起作用。

我有一个名为 X 的变量，它看起来像这样

```
> X
[1] BD          Rbo5s        SMA.         01m          bo.
[6] Lv          w8s          it           2s           ds          
[11] J.t        r.Dt         2i.          J_D          32i.        
[16] V          tpMin3_Bh.s. T1m          R8m          o8m         
[21] m          wM12_AEA.dm. A3i          R8m          28s 
```

我有一个大矩阵（file1），我试图找到具有“X”中的列名的列并将它们保存在（file2）中。

现在我正在使用此命令，但它不起作用

```
file2 = file1[,X] 
```

我认为添加双引号可以解决这个问题（会吗？），但我没有为此输入命令。需要帮助！:)

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:28:14.303

X 应该是一个字符向量。

```
R> X = c("BD","Rbo5s", "SMA.", "01m")
R> X
[1] "BD"    "Rbo5s" "SMA."  "01m" 
```

当您显示 X 时，它具有以下格式：

```
> X
[1] BD          Rbo5s        SMA.         01m          bo. 
```

-- 不带引号，表示这不是字符向量。解决这个问题，索引应该可以工作。

# java - Java 自己的组件通过拖放进行可视化连接

> ID：14279893
> 
> 赞同：3
> 
> 时间：2013-01-11T14:11:44.900
> 
> 标签：java, swing, user-interface, components

我正在为小型工作流编辑器开发软件解决方案。为此，我创建了一个自己的`JPanel`，具有一些功能，例如删除自身或编辑主要信息。

这是它的外观：

![可移动组件](../Images/fabc4a27f707f1f795a90e1230319bb8.png)

关键是，我需要一个动态连接器，如箭头或类似的东西。我用drawline试过了，但它不是动态的，看起来不太好。我的意思是如果我移动其中一个框，那么绘制的线也必须改变它的位置。

大的盒子`JPanel`是可移动的和可调整大小的。左右连接点为`JButton`s。该结构是任何传出连接都从右侧开始，从左侧开始`JButton`。

任何想法如何设置它？

我不能发布太多源代码，因为该软件是为公司服务的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:44:17.797

您是否将`Graphics`对象转换为[`Graphics2D`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics2D.html)并设置[`RenderHints`](http://docs.oracle.com/javase/7/docs/api/java/awt/RenderingHints.html)？IE

```
Graphics2D g2d=(Graphics2D)g;   
g2d.setRenderingHint(RenderHints.KEY_ANTIALIASING,RenderHints.VALUE_ANTIALIASING _ON); 
```

这将添加一些很好的[抗锯齿](http://en.wikipedia.org/wiki/Anti-aliasing_filter)效果，并可能使线条看起来更直。

通过增加笔画宽度[`Graphics2D#setStroke`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Graphics2D.html#setStroke%28java.awt.Stroke%29)也会使锯齿状边缘消失，因为它现在更厚了。

看这个例子（按下、拖动和释放鼠标来创建一条线）：

With`g2d.setRenderingHint(..)`和`g2d.setStroke(..)`inside`paintComponent(..)`注释掉：

![在此处输入图像描述](../Images/c77e074cf12284d1c93f08813365fbe1.png)

带有`g2d.setRenderingHint(..)`和`g2d.setStroke(..)`未注释：

![在此处输入图像描述](../Images/cab354df9b413d33531864a870de2e18.png)

```
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.RenderingHints;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.Line2D;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                Test gui = new Test();
            }
        });
    }

    public Test() {
        initComponents();
    }

    private void initComponents() {
        JFrame frame = new JFrame("Line Demo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.add(new MyPanel());

        frame.pack();
        frame.setVisible(true);
    }
}

class MyPanel extends JPanel {

    Point point1;
    Point point2;
    Line2D line2d;

    public MyPanel() {
        addMouseListener(new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent me) {
                super.mousePressed(me);
                point1 = me.getPoint();
            }
        });
        addMouseMotionListener(new MouseAdapter() {
            @Override
            public void mouseDragged(MouseEvent me) {
                super.mouseDragged(me);
                point2 = me.getPoint();
                line2d = new Line2D.Double(point1, point2);
                repaint();
            }
        });
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(300, 300);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;

        //Set  anti-alias!
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);

        if (point1 != null && point2 != null) {
            g2d.setPaint(Color.RED);
            g2d.setStroke(new BasicStroke(1.5f));//set stroke size
            g2d.draw(line2d);
        }
    }
} 
```

如果以上没有帮助，发布 SSCCE 将使我们能够测试并查看可能出现的问题/使其变得更好。

# salesforce - 我将如何以流的形式访问存储在注册表中的字符串对象？（骡 ESB 3.3）

> ID：14279894
> 
> 赞同：0
> 
> 时间：2013-01-11T14:11:50.597
> 
> 标签：salesforce, mule

我有一些密码，我通过自定义编写的 java 类访问这些密码，并将注册表中的解密值保存为字符串对象。（注意：我们无权访问 Enterprise Edition 以利用 Credentials Vault 功能。）

我可以成功地保存它们并在代码中访问它们，但我无法在流程中访问它。特别是 Salesforce 连接器：

```
<sfdc:config name="ConfigurableSalesforceConnection" username="${sfdc.username}" password="#app.registry.get('salesforcepassword')" securityToken="${sfdc.securityToken}" doc:name="Salesforce" url="${sfdc.url}"/ 
```

我使用的一些语法是：

```
password="#app.registry.get('salesforcepassword')" 
```

和

```
app.registry['salesforcepassword'] 
```

这甚至可能还是我应该探索不同的途径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:12:29.223

尝试这个

```
#[app.registry['salesforcepassword']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T17:04:06.920

除了处理注册表，您还可以加密属性文件中的凭据，并在文件加载时使用 Jasypt 解密它们。这对应用程序来说是透明的并且更容易。

查看本教程：[http ://www.jayway.com/2008/12/09/encrypting-properties-with-jasypt/](http://www.jayway.com/2008/12/09/encrypting-properties-with-jasypt/)

# c# - 从查找编辑选定项目分配

> ID：14279902
> 
> 赞同：0
> 
> 时间：2013-01-11T14:12:13.713
> 
> 标签：c#, devexpress

有没有这样的方法：

```
 product.supplier = combobox.SelectedItem as suppier 
```

在开发快递`LookUpEdit`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:10:47.927

I believe you can use approach demonstrated in the following KB-article: [How to obtain the selected row from the LookUp editor](http://www.devexpress.com/Support/Center/p/A495.aspx)

PS. The official [DevExpress Support Center](http://www.devexpress.com/Support/Center) is much better than Google or Stackoverflow when you are searching anything related to DevExpress controls.

# c# - 使用 NOW() 函数调用的参数化查询

> ID：14279911
> 
> 赞同：1
> 
> 时间：2013-01-11T14:12:36.677
> 
> 标签：c#, mysql, sql

我正在用 C# 创建一个参数化的 MySQL 查询。我需要`NOW()`在此查询中传递函数，但我不知道如何执行此操作。

这是我的代码的一部分：

```
MySqlParameter param = new MySqlParameter();
param.Value = field[1];
param.ParameterName = field[0];
cmd.Parameters.Add(param); 
```

如果我作为参数传递`NOW()`，这是行不通的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:14:02.087

您不能参数化`NOW()`，但是，只需将其插入到您的查询中，例如

```
string myQuery = "INSERT INTO tableName (col1, col2,) VALUES (@val1, NOW())"; 
```

# ruby-on-rails - 我可以使用 AR 对象作为哈希键还是应该使用 object_id

> ID：14279913
> 
> 赞同：4
> 
> 时间：2013-01-11T14:12:45.600
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-activerecord

由于 Ruby 非常棒，可以使用任何对象作为键

```
document = Document.find 1
o = Hash.new
o[1] = true
o[:coool] = 'it is'
o[document] = true
# an it works

o[document]
#=> true 
```

但仅仅因为它是可能的并不意味着是好的做法

但是我有一种情况，在我的控制器中我需要设置类似的东西，所以我可以在视图中循环遍历它

```
#controller
@users_with_things = Hash.new
Things.accessible_by(some_curent_user_logic).each do |thing|
  @user_with_things[thing.user] ||= Array.new
  @user_with_things[thing.user] <<  thing.id
end 

#view
- @users_with_things.each do |user, thing_ids|
  %input{type: :checkbox, name: "blank[user_#{user.id}]", value: 1, class: "select_groups", :'data-resource-ids' => "[#{thing_ids.join(',')}]", :'data-user-type' => user.type } 
```

我之所以要这样做是因为我不想从我的角度来看`User.find_by_id` （想让它变得干净）

```
#controller
@users_with_things = Hash.new
Things.accessible_by(some_curent_user_logic).each do |thing|
  @user_with_things[thing.user.id] ||= Array.new
  @user_with_things[thing.user.id] <<  thing.id
end 

#view
- @users_with_things.each do |user_id, thing_ids|
  - user = User.find user_id
  %input{type: :checkbox, name: "blank[user_#{user.id}]", value: 1, class: "select_groups", :'data-resource-ids' => "[#{thing_ids.join(',')}]", :'data-user-type' => user.type } 
```

所以我的第一个问题是：**在这种情况下可以使用 ActiveRecord 对象作为哈希键吗**

我可以想象几种可能出错的场景（会话、模型中的对象更改等），但这只是为了在视图中呈现

## 选择 ！

所以这是一种方法，另一种可能是这样

```
#controller
@users_with_things = Hash.new
Things.accessible_by(some_curent_user_logic).each do |thing|
  @user_with_things[thing.user.object_id] ||= Array.new
  @user_with_things[thing.user.object_id] <<  thing.id
end 

#view
- @users_with_things.each do |user_object_id, thing_ids|
  - user = ObjectSpace._id2ref(user_object_id)  #this will find user object from object_id
  %input{type: :checkbox, name: "blank[user_#{user.id}]", value: 1, class: "select_groups", :'data-resource-ids' => "[#{thing_ids.join(',')}]"", :'data-user-type' => user.type } 
```

……更重要的是，铁杆。但是，如果出于某种原因`hash[ARobject] = :something`会由于某种原因创建大内存集群，那是一种解决方法

问题2：**这样做是个好主意吗？**

* * *

要完整，还有另一种选择，那就是

```
# ...
@user_with_thing[ [thing.user.id, thing.user.type] ] << thing_id
# ... 
```

所以基本上数组对象将是关键

```
@user_with_thing[ [1, 'Admin'] ] 
#=> [1,2,3] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T14:35:06.373

我认为使用哈希是根据您的情况进行组织的好方法。但是，我建议不要使用用户或将对象大作为哈希键，这仅仅是因为它使您的哈希不可读，并且因为它实际上只有具有对象 ID 的唯一对象可以用作键。

```
o = Object.new
h = { o => 'something' }
h[Object.new] #=> nil 
```

在您的情况下，这可能不是问题，因为您只需要迭代它。但是，如果您想用该哈希做其他事情，或者您有相同 Active Record 数据的不同实例（这在 Rails 应用程序中很常见，除非您真正注意什么何时加载）。除此之外，我认为最好遵守广泛使用的约定，使用简单对象（字符串、符号）作为哈希键，以使您的代码具有可读性和可维护性。

也许最好保留一个二维哈希，如下所示：

```
@users_with_things = Things.accessible_by(some_curent_user_logic).inject({}) do |a, thing|
  user_id = thing.user.id
  a[user_id] ||= { :user => thing.user, :things => [] }
  a[user_id][:thing] << thing
  a
end 
```

`@users_with_things`然后你可以像这样在你的视图中迭代：

```
@users_with_things.each do |user_id, values|
  # values[:user] is the user, values[:things] the array of things 
```

# xslt-1.0 - 如何获取xslt中最后一个子节点特定元素的值？

> ID：14279914
> 
> 赞同：2
> 
> 时间：2013-01-11T14:12:50.127
> 
> 标签：xslt-1.0

我有一个如下的xml

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Body>
        <InsertConcurSAE_batch_req xmlns="http://ws.wso2.org/dataservice">
            <InsertConcurSAE>
                <constant>DETAIL</constant>
                <batch_id>6</batch_id>
                <batch_date>2012-08-13</batch_date>
                <sequence_number>1</sequence_number>
                <emp_id>8535</emp_id>
                <last_name>Burson</last_name>
                <first_name>Sherrie</first_name>
                <group_id>US</group_id>
                <employee_org_unit_1>30</employee_org_unit_1>
                <employee_org_unit_2>80</employee_org_unit_2>
                <employee_org_unit_3>500</employee_org_unit_3>
                <employee_org_unit_4>G&amp;A Function</employee_org_unit_4>
                <report_id>4CDF6336F5C947E2A0F8</report_id>
                <report_key>1</report_key>
                <ledger>SEMTECH</ledger>
                <reimburse_currency_alpha_ise>USD</reimburse_currency_alpha_ise>
                <home_country>UNITED STATES</home_country>
                <report_submit_date>2012-08-08</report_submit_date>
                <report_user_defined_date>2012-08-01</report_user_defined_date>
                <report_payment_processing_date>2012-08-10</report_payment_processing_date>
                <report_name>August</report_name>
                <report_image_required>Y</report_image_required>
                <report_has_vat_entry>N</report_has_vat_entry>
                <report_has_ta_entry>N</report_has_ta_entry>
                <report_total_post_amount>314.4200</report_total_post_amount>
                <report_total_approved_amount>314.4200</report_total_approved_amount>
                <report_policy_name>Non VAT Expense Policy</report_policy_name>
                <report_org_unit_1>30</report_org_unit_1>
                <report_org_unit_2>99</report_org_unit_2>
                <report_org_unit_3>500</report_org_unit_3>
                <report_org_unit_4>G&amp;A Function</report_org_unit_4>
                <report_custom_1>G&amp;A Function</report_custom_1>
                <report_custom_15>US</report_custom_15>
                <report_custom_16>8535</report_custom_16>
                <report_custom_17>N02574</report_custom_17>
                <report_custom_18>46</report_custom_18>
                <report_custom_19>1402</report_custom_19>
                <report_custom_20>BE1</report_custom_20>
                <entry_id>1</entry_id>
                <entry_transaction_type>REG</entry_transaction_type>
                <expense_type>D-Business Meal with attendees</expense_type>
                <entry_transaction_date>2012-07-31</entry_transaction_date>
                <spend_currency_alpha_iso>USD</spend_currency_alpha_iso>
                <currency_exchange_rate>1.0000</currency_exchange_rate>
                <exchange_rate_direction>M</exchange_rate_direction>
                <is_personal>N</is_personal>
                <receipt_received>N</receipt_received>
                <receipt_type>N</receipt_type>
                <total_employee_attendee>7</total_employee_attendee>
                <report_entry_custom_1>No</report_entry_custom_1>
                <report_entry_custom_35>US</report_entry_custom_35>
                <report_entry_custom_39>0.0000</report_entry_custom_39>
                <report_entry_custom_40>90.9900</report_entry_custom_40>
                <entry_transaction_amount>90.9900</entry_transaction_amount>
                <entry_posted_amount>90.9900</entry_posted_amount>
                <entry_approved_amount>90.9900</entry_approved_amount>
                <entry_payment_code>CASH</entry_payment_code>
                <entry_payment_code_name>Cash</entry_payment_code_name>
                <entry_country>US</entry_country>
                <entry_country_sub>US-CA</entry_country_sub>
                <domestic_foreign>HOME</domestic_foreign>
                <payer_pay_type>Company</payer_pay_type>
                <payer_pay_code>Company/Employee Pseudo Payment Code</payer_pay_code>
                <payee_pay_type>Employee</payee_pay_type>
                <payee_pay_code>Company/Employee Pseudo Payment Code</payee_pay_code>
                <account_code>70210</account_code>
                <drcr>DR</drcr>
                <journal_amount>+90.9900</journal_amount>
                <journal_key>34</journal_key>
                <allocation_alloc_key>1</allocation_alloc_key>
                <allocation_percentage>100.0000</allocation_percentage>
                <report_entry_total_tax_posted_amount>0.0000</report_entry_total_tax_posted_amount>
                <net_tax_amount>90.9900</net_tax_amount>
                <report_entry_total_reclaim_adjusted_amount>0.0000</report_entry_total_reclaim_adjusted_amount>
                <net_adjusted_reclaim_amount>90.9900</net_adjusted_reclaim_amount>
                <payment_type>Out of Pocket</payment_type>
            </InsertConcurSAE>
            <InsertConcurSAE>
                <constant>DETAIL</constant>
                <batch_id>6</batch_id>
                <batch_date>2012-08-13</batch_date>
                <sequence_number>2</sequence_number>
                <emp_id>8535</emp_id>
                <last_name>Burson</last_name>
                <first_name>Sherrie</first_name>
                <group_id>US</group_id>
                <employee_org_unit_1>30</employee_org_unit_1>
                <employee_org_unit_2>80</employee_org_unit_2>
                <employee_org_unit_3>500</employee_org_unit_3>
                <employee_org_unit_4>G&amp;A Function</employee_org_unit_4>
                <report_id>4CDF6336F5C947E2A0F8</report_id>
                <report_key>1</report_key>
                <ledger>SEMTECH</ledger>
                <reimburse_currency_alpha_ise>USD</reimburse_currency_alpha_ise>
                <home_country>UNITED STATES</home_country>
                <report_submit_date>2012-08-08</report_submit_date>
                <report_user_defined_date>2012-08-01</report_user_defined_date>
                <report_payment_processing_date>2012-08-10</report_payment_processing_date>
                <report_name>August</report_name>
                <report_image_required>Y</report_image_required>
                <report_has_vat_entry>N</report_has_vat_entry>
                <report_has_ta_entry>N</report_has_ta_entry>
                <report_total_post_amount>314.4200</report_total_post_amount>
                <report_total_approved_amount>314.4200</report_total_approved_amount>
                <report_policy_name>Non VAT Expense Policy</report_policy_name>
                <report_org_unit_1>30</report_org_unit_1>
                <report_org_unit_2>99</report_org_unit_2>
                <report_org_unit_3>500</report_org_unit_3>
                <report_org_unit_4>G&amp;A Function</report_org_unit_4>
                <report_custom_1>G&amp;A Function</report_custom_1>
                <report_custom_15>US</report_custom_15>
                <report_custom_16>8535</report_custom_16>
                <report_custom_17>N02574</report_custom_17>
                <report_custom_18>46</report_custom_18>
                <report_custom_19>1402</report_custom_19>
                <report_custom_20>BE1</report_custom_20>
                <entry_id>5</entry_id>
                <entry_transaction_type>REG</entry_transaction_type>
                <expense_type>D-Business Meal with attendees</expense_type>
                <entry_transaction_date>2012-08-02</entry_transaction_date>
                <spend_currency_alpha_iso>USD</spend_currency_alpha_iso>
                <currency_exchange_rate>1.0000</currency_exchange_rate>
                <exchange_rate_direction>M</exchange_rate_direction>
                <is_personal>N</is_personal>
                <receipt_received>N</receipt_received>
                <receipt_type>N</receipt_type>
                <total_employee_attendee>9</total_employee_attendee>
                <report_entry_custom_1>No</report_entry_custom_1>
                <report_entry_custom_35>US</report_entry_custom_35>
                <report_entry_custom_39>0.0000</report_entry_custom_39>
                <report_entry_custom_40>138.6700</report_entry_custom_40>
                <entry_transaction_amount>138.6700</entry_transaction_amount>
                <entry_posted_amount>138.6700</entry_posted_amount>
                <entry_approved_amount>138.6700</entry_approved_amount>
                <entry_payment_code>CASH</entry_payment_code>
                <entry_payment_code_name>Cash</entry_payment_code_name>
                <entry_country>US</entry_country>
                <entry_country_sub>US-CA</entry_country_sub>
                <domestic_foreign>HOME</domestic_foreign>
                <payer_pay_type>Company</payer_pay_type>
                <payer_pay_code>Company/Employee Pseudo Payment Code</payer_pay_code>
                <payee_pay_type>Employee</payee_pay_type>
                <payee_pay_code>Company/Employee Pseudo Payment Code</payee_pay_code>
                <account_code>70210</account_code>
                <drcr>DR</drcr>
                <journal_amount>+138.6700</journal_amount>
                <journal_key>35</journal_key>
                <allocation_alloc_key>5</allocation_alloc_key>
                <allocation_percentage>100.0000</allocation_percentage>
                <report_entry_total_tax_posted_amount>0.0000</report_entry_total_tax_posted_amount>
                <net_tax_amount>138.6700</net_tax_amount>
                <report_entry_total_reclaim_adjusted_amount>0.0000</report_entry_total_reclaim_adjusted_amount>
                <net_adjusted_reclaim_amount>138.6700</net_adjusted_reclaim_amount>
                <payment_type>Out of Pocket</payment_type>
            </InsertConcurSAE>
            <InsertConcurSAE>
                <constant>DETAIL</constant>
                <batch_id>6</batch_id>
                <batch_date>2012-08-13</batch_date>
                <sequence_number>3</sequence_number>
                <emp_id>8535</emp_id>
                <last_name>Burson</last_name>
                <first_name>Sherrie</first_name>
                <group_id>US</group_id>
                <employee_org_unit_1>30</employee_org_unit_1>
                <employee_org_unit_2>80</employee_org_unit_2>
                <employee_org_unit_3>500</employee_org_unit_3>
                <employee_org_unit_4>G&amp;A Function</employee_org_unit_4>
                <report_id>4CDF6336F5C947E2A0F8</report_id>
                <report_key>1</report_key>
                <ledger>SEMTECH</ledger>
                <reimburse_currency_alpha_ise>USD</reimburse_currency_alpha_ise>
                <home_country>UNITED STATES</home_country>
                <report_submit_date>2012-08-08</report_submit_date>
                <report_user_defined_date>2012-08-01</report_user_defined_date>
                <report_payment_processing_date>2012-08-10</report_payment_processing_date>
                <report_name>August</report_name>
                <report_image_required>Y</report_image_required>
                <report_has_vat_entry>N</report_has_vat_entry>
                <report_has_ta_entry>N</report_has_ta_entry>
                <report_total_post_amount>314.4200</report_total_post_amount>
                <report_total_approved_amount>314.4200</report_total_approved_amount>
                <report_policy_name>Non VAT Expense Policy</report_policy_name>
                <report_org_unit_1>30</report_org_unit_1>
                <report_org_unit_2>99</report_org_unit_2>
                <report_org_unit_3>500</report_org_unit_3>
                <report_org_unit_4>G&amp;A Function</report_org_unit_4>
                <report_custom_1>G&amp;A Function</report_custom_1>
                <report_custom_15>US</report_custom_15>
                <report_custom_16>8535</report_custom_16>
                <report_custom_17>N02574</report_custom_17>
                <report_custom_18>46</report_custom_18>
                <report_custom_19>1402</report_custom_19>
                <report_custom_20>BE1</report_custom_20>
                <entry_id>6</entry_id>
                <entry_transaction_type>REG</entry_transaction_type>
                <expense_type>D-Business Meal with attendees</expense_type>
                <entry_transaction_date>2012-08-03</entry_transaction_date>
                <spend_currency_alpha_iso>USD</spend_currency_alpha_iso>
                <currency_exchange_rate>1.0000</currency_exchange_rate>
                <exchange_rate_direction>M</exchange_rate_direction>
                <is_personal>N</is_personal>
                <receipt_received>N</receipt_received>
                <receipt_type>N</receipt_type>
                <total_employee_attendee>4</total_employee_attendee>
                <report_entry_custom_1>No</report_entry_custom_1>
                <report_entry_custom_35>US</report_entry_custom_35>
                <report_entry_custom_39>0.0000</report_entry_custom_39>
                <report_entry_custom_40>26.9500</report_entry_custom_40>
                <entry_transaction_amount>26.9500</entry_transaction_amount>
                <entry_posted_amount>26.9500</entry_posted_amount>
                <entry_approved_amount>26.9500</entry_approved_amount>
                <entry_payment_code>CASH</entry_payment_code>
                <entry_payment_code_name>Cash</entry_payment_code_name>
                <entry_country>US</entry_country>
                <entry_country_sub>US-CA</entry_country_sub>
                <domestic_foreign>HOME</domestic_foreign>
                <payer_pay_type>Company</payer_pay_type>
                <payer_pay_code>Company/Employee Pseudo Payment Code</payer_pay_code>
                <payee_pay_type>Employee</payee_pay_type>
                <payee_pay_code>Company/Employee Pseudo Payment Code</payee_pay_code>
                <account_code>70210</account_code>
                <drcr>DR</drcr>
                <journal_amount>+26.9500</journal_amount>
                <journal_key>36</journal_key>
                <allocation_alloc_key>6</allocation_alloc_key>
                <allocation_percentage>100.0000</allocation_percentage>
                <report_entry_total_tax_posted_amount>0.0000</report_entry_total_tax_posted_amount>
                <net_tax_amount>26.9500</net_tax_amount>
                <report_entry_total_reclaim_adjusted_amount>0.0000</report_entry_total_reclaim_adjusted_amount>
                <net_adjusted_reclaim_amount>26.9500</net_adjusted_reclaim_amount>
                <payment_type>Out of Pocket</payment_type>
            </InsertConcurSAE>
            <InsertConcurSAE>
                <constant>DETAIL</constant>
                <batch_id>6</batch_id>
                <batch_date>2012-08-13</batch_date>
                <sequence_number>4</sequence_number>
                <emp_id>8535</emp_id>
                <last_name>Burson</last_name>
                <first_name>Sherrie</first_name>
                <group_id>US</group_id>
                <employee_org_unit_1>30</employee_org_unit_1>
                <employee_org_unit_2>80</employee_org_unit_2>
                <employee_org_unit_3>500</employee_org_unit_3>
                <employee_org_unit_4>G&amp;A Function</employee_org_unit_4>
                <report_id>4CDF6336F5C947E2A0F8</report_id>
                <report_key>1</report_key>
                <ledger>SEMTECH</ledger>
                <reimburse_currency_alpha_ise>USD</reimburse_currency_alpha_ise>
                <home_country>UNITED STATES</home_country>
                <report_submit_date>2012-08-08</report_submit_date>
                <report_user_defined_date>2012-08-01</report_user_defined_date>
                <report_payment_processing_date>2012-08-10</report_payment_processing_date>
                <report_name>August</report_name>
                <report_image_required>Y</report_image_required>
                <report_has_vat_entry>N</report_has_vat_entry>
                <report_has_ta_entry>N</report_has_ta_entry>
                <report_total_post_amount>314.4200</report_total_post_amount>
                <report_total_approved_amount>314.4200</report_total_approved_amount>
                <report_policy_name>Non VAT Expense Policy</report_policy_name>
                <report_org_unit_1>30</report_org_unit_1>
                <report_org_unit_2>99</report_org_unit_2>
                <report_org_unit_3>500</report_org_unit_3>
                <report_org_unit_4>G&amp;A Function</report_org_unit_4>
                <report_custom_1>G&amp;A Function</report_custom_1>
                <report_custom_15>US</report_custom_15>
                <report_custom_16>8535</report_custom_16>
                <report_custom_17>N02574</report_custom_17>
                <report_custom_18>46</report_custom_18>
                <report_custom_19>1402</report_custom_19>
                <report_custom_20>BE1</report_custom_20>
                <entry_id>7</entry_id>
                <entry_transaction_type>REG</entry_transaction_type>
                <expense_type>D-Business Meal with attendees</expense_type>
                <entry_transaction_date>2012-08-07</entry_transaction_date>
                <spend_currency_alpha_iso>USD</spend_currency_alpha_iso>
                <currency_exchange_rate>1.0000</currency_exchange_rate>
                <exchange_rate_direction>M</exchange_rate_direction>
                <is_personal>N</is_personal>
                <receipt_received>N</receipt_received>
                <receipt_type>N</receipt_type>
                <total_employee_attendee>6</total_employee_attendee>
                <report_entry_custom_1>No</report_entry_custom_1>
                <report_entry_custom_35>US</report_entry_custom_35>
                <report_entry_custom_39>0.0000</report_entry_custom_39>
                <report_entry_custom_40>57.8100</report_entry_custom_40>
                <entry_transaction_amount>57.8100</entry_transaction_amount>
                <entry_posted_amount>57.8100</entry_posted_amount>
                <entry_approved_amount>57.8100</entry_approved_amount>
                <entry_payment_code>CASH</entry_payment_code>
                <entry_payment_code_name>Cash</entry_payment_code_name>
                <entry_country>US</entry_country>
                <entry_country_sub>US-CA</entry_country_sub>
                <domestic_foreign>HOME</domestic_foreign>
                <payer_pay_type>Company</payer_pay_type>
                <payer_pay_code>Company/Employee Pseudo Payment Code</payer_pay_code>
                <payee_pay_type>Employee</payee_pay_type>
                <payee_pay_code>Company/Employee Pseudo Payment Code</payee_pay_code>
                <account_code>70210</account_code>
                <drcr>DR</drcr>
                <journal_amount>+57.8100</journal_amount>
                <journal_key>37</journal_key>
                <allocation_alloc_key>7</allocation_alloc_key>
                <allocation_percentage>100.0000</allocation_percentage>
                <report_entry_total_tax_posted_amount>0.0000</report_entry_total_tax_posted_amount>
                <net_tax_amount>57.8100</net_tax_amount>
                <report_entry_total_reclaim_adjusted_amount>0.0000</report_entry_total_reclaim_adjusted_amount>
                <net_adjusted_reclaim_amount>57.8100</net_adjusted_reclaim_amount>
                <payment_type>Out of Pocket</payment_type>
            </InsertConcurSAE>
        </InsertConcurSAE_batch_req>
    </soapenv:Body>
</soapenv:Envelope> 
```

我想得到最后一个序列号，即 4。

我有以下 xslt 要检索，但它没有显示任何值。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dat="http://ws.wso2.org/dataservice" version="1.0">
    <xsl:template match="/">
        <ns:text xmlns:ns="http://ws.apache.org/commons/ns/payload"><xsl:text>
            </xsl:text>
            <xsl:for-each select="//InsertConcurSAE[last()]">

                <xsl:variable name="sequence_number" select="//dat:sequence_number" />
                <xsl:value-of select="$sequence_number" />
            </xsl:for-each> 

    </ns:text>

    </xsl:template>
</xsl:stylesheet> 
```

请帮我解决这个问题。如果我放置

```
<xsl:for-each select="*"> 
```

代替

```
<xsl:for-each select="//InsertConcurSAE[last()]"> 
```

那么它只会产生 1。我需要检索最后一个序列号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:24:15.020

**使用**：

```
/*/*/*/dat:InsertConcurSAE[last()]/dat:sequence_number/text() 
```

**这是一个完整的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:dat="http://ws.wso2.org/dataservice">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:copy-of select=
   "/*/*/*/dat:InsertConcurSAE[last()]
                 /dat:sequence_number/text()"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Body>
        <InsertConcurSAE_batch_req xmlns="http://ws.wso2.org/dataservice">
            <InsertConcurSAE>
                <constant>DETAIL</constant>
                <batch_id>6</batch_id>
                <batch_date>2012-08-13</batch_date>
                <sequence_number>1</sequence_number>
                <emp_id>8535</emp_id>
                <last_name>Burson</last_name>
                <first_name>Sherrie</first_name>
                <group_id>US</group_id>
                <employee_org_unit_1>30</employee_org_unit_1>
                <employee_org_unit_2>80</employee_org_unit_2>
                <employee_org_unit_3>500</employee_org_unit_3>
                <employee_org_unit_4>G&amp;A Function</employee_org_unit_4>
                <report_id>4CDF6336F5C947E2A0F8</report_id>
                <report_key>1</report_key>
                <ledger>SEMTECH</ledger>
                <reimburse_currency_alpha_ise>USD</reimburse_currency_alpha_ise>
                <home_country>UNITED STATES</home_country>
                <report_submit_date>2012-08-08</report_submit_date>
                <report_user_defined_date>2012-08-01</report_user_defined_date>
                <report_payment_processing_date>2012-08-10</report_payment_processing_date>
                <report_name>August</report_name>
                <report_image_required>Y</report_image_required>
                <report_has_vat_entry>N</report_has_vat_entry>
                <report_has_ta_entry>N</report_has_ta_entry>
                <report_total_post_amount>314.4200</report_total_post_amount>
                <report_total_approved_amount>314.4200</report_total_approved_amount>
                <report_policy_name>Non VAT Expense Policy</report_policy_name>
                <report_org_unit_1>30</report_org_unit_1>
                <report_org_unit_2>99</report_org_unit_2>
                <report_org_unit_3>500</report_org_unit_3>
                <report_org_unit_4>G&amp;A Function</report_org_unit_4>
                <report_custom_1>G&amp;A Function</report_custom_1>
                <report_custom_15>US</report_custom_15>
                <report_custom_16>8535</report_custom_16>
                <report_custom_17>N02574</report_custom_17>
                <report_custom_18>46</report_custom_18>
                <report_custom_19>1402</report_custom_19>
                <report_custom_20>BE1</report_custom_20>
                <entry_id>1</entry_id>
                <entry_transaction_type>REG</entry_transaction_type>
                <expense_type>D-Business Meal with attendees</expense_type>
                <entry_transaction_date>2012-07-31</entry_transaction_date>
                <spend_currency_alpha_iso>USD</spend_currency_alpha_iso>
                <currency_exchange_rate>1.0000</currency_exchange_rate>
                <exchange_rate_direction>M</exchange_rate_direction>
                <is_personal>N</is_personal>
                <receipt_received>N</receipt_received>
                <receipt_type>N</receipt_type>
                <total_employee_attendee>7</total_employee_attendee>
                <report_entry_custom_1>No</report_entry_custom_1>
                <report_entry_custom_35>US</report_entry_custom_35>
                <report_entry_custom_39>0.0000</report_entry_custom_39>
                <report_entry_custom_40>90.9900</report_entry_custom_40>
                <entry_transaction_amount>90.9900</entry_transaction_amount>
                <entry_posted_amount>90.9900</entry_posted_amount>
                <entry_approved_amount>90.9900</entry_approved_amount>
                <entry_payment_code>CASH</entry_payment_code>
                <entry_payment_code_name>Cash</entry_payment_code_name>
                <entry_country>US</entry_country>
                <entry_country_sub>US-CA</entry_country_sub>
                <domestic_foreign>HOME</domestic_foreign>
                <payer_pay_type>Company</payer_pay_type>
                <payer_pay_code>Company/Employee Pseudo Payment Code</payer_pay_code>
                <payee_pay_type>Employee</payee_pay_type>
                <payee_pay_code>Company/Employee Pseudo Payment Code</payee_pay_code>
                <account_code>70210</account_code>
                <drcr>DR</drcr>
                <journal_amount>+90.9900</journal_amount>
                <journal_key>34</journal_key>
                <allocation_alloc_key>1</allocation_alloc_key>
                <allocation_percentage>100.0000</allocation_percentage>
                <report_entry_total_tax_posted_amount>0.0000</report_entry_total_tax_posted_amount>
                <net_tax_amount>90.9900</net_tax_amount>
                <report_entry_total_reclaim_adjusted_amount>0.0000</report_entry_total_reclaim_adjusted_amount>
                <net_adjusted_reclaim_amount>90.9900</net_adjusted_reclaim_amount>
                <payment_type>Out of Pocket</payment_type>
            </InsertConcurSAE>
            <InsertConcurSAE>
                <constant>DETAIL</constant>
                <batch_id>6</batch_id>
                <batch_date>2012-08-13</batch_date>
                <sequence_number>2</sequence_number>
                <emp_id>8535</emp_id>
                <last_name>Burson</last_name>
                <first_name>Sherrie</first_name>
                <group_id>US</group_id>
                <employee_org_unit_1>30</employee_org_unit_1>
                <employee_org_unit_2>80</employee_org_unit_2>
                <employee_org_unit_3>500</employee_org_unit_3>
                <employee_org_unit_4>G&amp;A Function</employee_org_unit_4>
                <report_id>4CDF6336F5C947E2A0F8</report_id>
                <report_key>1</report_key>
                <ledger>SEMTECH</ledger>
                <reimburse_currency_alpha_ise>USD</reimburse_currency_alpha_ise>
                <home_country>UNITED STATES</home_country>
                <report_submit_date>2012-08-08</report_submit_date>
                <report_user_defined_date>2012-08-01</report_user_defined_date>
                <report_payment_processing_date>2012-08-10</report_payment_processing_date>
                <report_name>August</report_name>
                <report_image_required>Y</report_image_required>
                <report_has_vat_entry>N</report_has_vat_entry>
                <report_has_ta_entry>N</report_has_ta_entry>
                <report_total_post_amount>314.4200</report_total_post_amount>
                <report_total_approved_amount>314.4200</report_total_approved_amount>
                <report_policy_name>Non VAT Expense Policy</report_policy_name>
                <report_org_unit_1>30</report_org_unit_1>
                <report_org_unit_2>99</report_org_unit_2>
                <report_org_unit_3>500</report_org_unit_3>
                <report_org_unit_4>G&amp;A Function</report_org_unit_4>
                <report_custom_1>G&amp;A Function</report_custom_1>
                <report_custom_15>US</report_custom_15>
                <report_custom_16>8535</report_custom_16>
                <report_custom_17>N02574</report_custom_17>
                <report_custom_18>46</report_custom_18>
                <report_custom_19>1402</report_custom_19>
                <report_custom_20>BE1</report_custom_20>
                <entry_id>5</entry_id>
                <entry_transaction_type>REG</entry_transaction_type>
                <expense_type>D-Business Meal with attendees</expense_type>
                <entry_transaction_date>2012-08-02</entry_transaction_date>
                <spend_currency_alpha_iso>USD</spend_currency_alpha_iso>
                <currency_exchange_rate>1.0000</currency_exchange_rate>
                <exchange_rate_direction>M</exchange_rate_direction>
                <is_personal>N</is_personal>
                <receipt_received>N</receipt_received>
                <receipt_type>N</receipt_type>
                <total_employee_attendee>9</total_employee_attendee>
                <report_entry_custom_1>No</report_entry_custom_1>
                <report_entry_custom_35>US</report_entry_custom_35>
                <report_entry_custom_39>0.0000</report_entry_custom_39>
                <report_entry_custom_40>138.6700</report_entry_custom_40>
                <entry_transaction_amount>138.6700</entry_transaction_amount>
                <entry_posted_amount>138.6700</entry_posted_amount>
                <entry_approved_amount>138.6700</entry_approved_amount>
                <entry_payment_code>CASH</entry_payment_code>
                <entry_payment_code_name>Cash</entry_payment_code_name>
                <entry_country>US</entry_country>
                <entry_country_sub>US-CA</entry_country_sub>
                <domestic_foreign>HOME</domestic_foreign>
                <payer_pay_type>Company</payer_pay_type>
                <payer_pay_code>Company/Employee Pseudo Payment Code</payer_pay_code>
                <payee_pay_type>Employee</payee_pay_type>
                <payee_pay_code>Company/Employee Pseudo Payment Code</payee_pay_code>
                <account_code>70210</account_code>
                <drcr>DR</drcr>
                <journal_amount>+138.6700</journal_amount>
                <journal_key>35</journal_key>
                <allocation_alloc_key>5</allocation_alloc_key>
                <allocation_percentage>100.0000</allocation_percentage>
                <report_entry_total_tax_posted_amount>0.0000</report_entry_total_tax_posted_amount>
                <net_tax_amount>138.6700</net_tax_amount>
                <report_entry_total_reclaim_adjusted_amount>0.0000</report_entry_total_reclaim_adjusted_amount>
                <net_adjusted_reclaim_amount>138.6700</net_adjusted_reclaim_amount>
                <payment_type>Out of Pocket</payment_type>
            </InsertConcurSAE>
            <InsertConcurSAE>
                <constant>DETAIL</constant>
                <batch_id>6</batch_id>
                <batch_date>2012-08-13</batch_date>
                <sequence_number>3</sequence_number>
                <emp_id>8535</emp_id>
                <last_name>Burson</last_name>
                <first_name>Sherrie</first_name>
                <group_id>US</group_id>
                <employee_org_unit_1>30</employee_org_unit_1>
                <employee_org_unit_2>80</employee_org_unit_2>
                <employee_org_unit_3>500</employee_org_unit_3>
                <employee_org_unit_4>G&amp;A Function</employee_org_unit_4>
                <report_id>4CDF6336F5C947E2A0F8</report_id>
                <report_key>1</report_key>
                <ledger>SEMTECH</ledger>
                <reimburse_currency_alpha_ise>USD</reimburse_currency_alpha_ise>
                <home_country>UNITED STATES</home_country>
                <report_submit_date>2012-08-08</report_submit_date>
                <report_user_defined_date>2012-08-01</report_user_defined_date>
                <report_payment_processing_date>2012-08-10</report_payment_processing_date>
                <report_name>August</report_name>
                <report_image_required>Y</report_image_required>
                <report_has_vat_entry>N</report_has_vat_entry>
                <report_has_ta_entry>N</report_has_ta_entry>
                <report_total_post_amount>314.4200</report_total_post_amount>
                <report_total_approved_amount>314.4200</report_total_approved_amount>
                <report_policy_name>Non VAT Expense Policy</report_policy_name>
                <report_org_unit_1>30</report_org_unit_1>
                <report_org_unit_2>99</report_org_unit_2>
                <report_org_unit_3>500</report_org_unit_3>
                <report_org_unit_4>G&amp;A Function</report_org_unit_4>
                <report_custom_1>G&amp;A Function</report_custom_1>
                <report_custom_15>US</report_custom_15>
                <report_custom_16>8535</report_custom_16>
                <report_custom_17>N02574</report_custom_17>
                <report_custom_18>46</report_custom_18>
                <report_custom_19>1402</report_custom_19>
                <report_custom_20>BE1</report_custom_20>
                <entry_id>6</entry_id>
                <entry_transaction_type>REG</entry_transaction_type>
                <expense_type>D-Business Meal with attendees</expense_type>
                <entry_transaction_date>2012-08-03</entry_transaction_date>
                <spend_currency_alpha_iso>USD</spend_currency_alpha_iso>
                <currency_exchange_rate>1.0000</currency_exchange_rate>
                <exchange_rate_direction>M</exchange_rate_direction>
                <is_personal>N</is_personal>
                <receipt_received>N</receipt_received>
                <receipt_type>N</receipt_type>
                <total_employee_attendee>4</total_employee_attendee>
                <report_entry_custom_1>No</report_entry_custom_1>
                <report_entry_custom_35>US</report_entry_custom_35>
                <report_entry_custom_39>0.0000</report_entry_custom_39>
                <report_entry_custom_40>26.9500</report_entry_custom_40>
                <entry_transaction_amount>26.9500</entry_transaction_amount>
                <entry_posted_amount>26.9500</entry_posted_amount>
                <entry_approved_amount>26.9500</entry_approved_amount>
                <entry_payment_code>CASH</entry_payment_code>
                <entry_payment_code_name>Cash</entry_payment_code_name>
                <entry_country>US</entry_country>
                <entry_country_sub>US-CA</entry_country_sub>
                <domestic_foreign>HOME</domestic_foreign>
                <payer_pay_type>Company</payer_pay_type>
                <payer_pay_code>Company/Employee Pseudo Payment Code</payer_pay_code>
                <payee_pay_type>Employee</payee_pay_type>
                <payee_pay_code>Company/Employee Pseudo Payment Code</payee_pay_code>
                <account_code>70210</account_code>
                <drcr>DR</drcr>
                <journal_amount>+26.9500</journal_amount>
                <journal_key>36</journal_key>
                <allocation_alloc_key>6</allocation_alloc_key>
                <allocation_percentage>100.0000</allocation_percentage>
                <report_entry_total_tax_posted_amount>0.0000</report_entry_total_tax_posted_amount>
                <net_tax_amount>26.9500</net_tax_amount>
                <report_entry_total_reclaim_adjusted_amount>0.0000</report_entry_total_reclaim_adjusted_amount>
                <net_adjusted_reclaim_amount>26.9500</net_adjusted_reclaim_amount>
                <payment_type>Out of Pocket</payment_type>
            </InsertConcurSAE>
            <InsertConcurSAE>
                <constant>DETAIL</constant>
                <batch_id>6</batch_id>
                <batch_date>2012-08-13</batch_date>
                <sequence_number>4</sequence_number>
                <emp_id>8535</emp_id>
                <last_name>Burson</last_name>
                <first_name>Sherrie</first_name>
                <group_id>US</group_id>
                <employee_org_unit_1>30</employee_org_unit_1>
                <employee_org_unit_2>80</employee_org_unit_2>
                <employee_org_unit_3>500</employee_org_unit_3>
                <employee_org_unit_4>G&amp;A Function</employee_org_unit_4>
                <report_id>4CDF6336F5C947E2A0F8</report_id>
                <report_key>1</report_key>
                <ledger>SEMTECH</ledger>
                <reimburse_currency_alpha_ise>USD</reimburse_currency_alpha_ise>
                <home_country>UNITED STATES</home_country>
                <report_submit_date>2012-08-08</report_submit_date>
                <report_user_defined_date>2012-08-01</report_user_defined_date>
                <report_payment_processing_date>2012-08-10</report_payment_processing_date>
                <report_name>August</report_name>
                <report_image_required>Y</report_image_required>
                <report_has_vat_entry>N</report_has_vat_entry>
                <report_has_ta_entry>N</report_has_ta_entry>
                <report_total_post_amount>314.4200</report_total_post_amount>
                <report_total_approved_amount>314.4200</report_total_approved_amount>
                <report_policy_name>Non VAT Expense Policy</report_policy_name>
                <report_org_unit_1>30</report_org_unit_1>
                <report_org_unit_2>99</report_org_unit_2>
                <report_org_unit_3>500</report_org_unit_3>
                <report_org_unit_4>G&amp;A Function</report_org_unit_4>
                <report_custom_1>G&amp;A Function</report_custom_1>
                <report_custom_15>US</report_custom_15>
                <report_custom_16>8535</report_custom_16>
                <report_custom_17>N02574</report_custom_17>
                <report_custom_18>46</report_custom_18>
                <report_custom_19>1402</report_custom_19>
                <report_custom_20>BE1</report_custom_20>
                <entry_id>7</entry_id>
                <entry_transaction_type>REG</entry_transaction_type>
                <expense_type>D-Business Meal with attendees</expense_type>
                <entry_transaction_date>2012-08-07</entry_transaction_date>
                <spend_currency_alpha_iso>USD</spend_currency_alpha_iso>
                <currency_exchange_rate>1.0000</currency_exchange_rate>
                <exchange_rate_direction>M</exchange_rate_direction>
                <is_personal>N</is_personal>
                <receipt_received>N</receipt_received>
                <receipt_type>N</receipt_type>
                <total_employee_attendee>6</total_employee_attendee>
                <report_entry_custom_1>No</report_entry_custom_1>
                <report_entry_custom_35>US</report_entry_custom_35>
                <report_entry_custom_39>0.0000</report_entry_custom_39>
                <report_entry_custom_40>57.8100</report_entry_custom_40>
                <entry_transaction_amount>57.8100</entry_transaction_amount>
                <entry_posted_amount>57.8100</entry_posted_amount>
                <entry_approved_amount>57.8100</entry_approved_amount>
                <entry_payment_code>CASH</entry_payment_code>
                <entry_payment_code_name>Cash</entry_payment_code_name>
                <entry_country>US</entry_country>
                <entry_country_sub>US-CA</entry_country_sub>
                <domestic_foreign>HOME</domestic_foreign>
                <payer_pay_type>Company</payer_pay_type>
                <payer_pay_code>Company/Employee Pseudo Payment Code</payer_pay_code>
                <payee_pay_type>Employee</payee_pay_type>
                <payee_pay_code>Company/Employee Pseudo Payment Code</payee_pay_code>
                <account_code>70210</account_code>
                <drcr>DR</drcr>
                <journal_amount>+57.8100</journal_amount>
                <journal_key>37</journal_key>
                <allocation_alloc_key>7</allocation_alloc_key>
                <allocation_percentage>100.0000</allocation_percentage>
                <report_entry_total_tax_posted_amount>0.0000</report_entry_total_tax_posted_amount>
                <net_tax_amount>57.8100</net_tax_amount>
                <report_entry_total_reclaim_adjusted_amount>0.0000</report_entry_total_reclaim_adjusted_amount>
                <net_adjusted_reclaim_amount>57.8100</net_adjusted_reclaim_amount>
                <payment_type>Out of Pocket</payment_type>
            </InsertConcurSAE>
        </InsertConcurSAE_batch_req>
    </soapenv:Body>
</soapenv:Envelope> 
```

**对 XPath 表达式求值，并将该求值的结果复制到输出中：**

```
4 
```

# javascript - HTML5 Canvas：从居中的 DIV 绘制线条，连接到它周围的其他 DIV？（蜘蛛网效果）Kinetic JS

> ID：14279921
> 
> 赞同：2
> 
> 时间：2013-01-11T14:13:04.747
> 
> 标签：javascript, jquery, html, html5-canvas, kineticjs

我的问题是：如何绘制来自特定 DIV 的线条，并让它们连接到页面上的其他 DIV？（蜘蛛网效果）

到目前为止，我得到了 - **jsFiddle：http:** [//jsfiddle.net/audnB/3/](http://jsfiddle.net/audnB/3/)

**但我想做的是......**
所有的行都来自母亲的div，如下所示：

![在此处输入图像描述](../Images/81d6ee0ef92a8ba5e447b5ae61d57a78.png)

下面是我目前正在使用的代码（与我的 JsFiddle 中的代码相同）：
我实际上使用的是`<a>`（链接）而不是 DIV，但你知道我的意思......

```
var lineCoords = new Array();
var stage;
var globalTimer = null;

$(window).resize(function() {
  clearTimeout(globalTimer);
  globalTimer = setTimeout(doneResize, 100);
});

function doneResize(){
 drawLines();
}

function drawLines(){
      lineCoords = new Array();
      $('div#container > a').each(function(){
        if ($(this).attr('data-action-properties').length>0){
          var actionProperties = $.parseJSON($(this).attr('data-action-properties'));
        }
    var dx = $(this).css('left').replace('px','');
    var dy = $(this).css('top').replace('px','');
    var wd = ($(this).css('width').replace('px','') /2);
    var hi = ($(this).css('height').replace('px','') /2);

    var position = $(this).offset();

    lineCoords.push(parseInt(dx)+(wd));
    lineCoords.push(parseInt(dy)+(hi));
   }); 

      var layer = new Kinetic.Layer();
      var redLine = new Kinetic.Line({
      points: lineCoords,
      stroke: '#000',
      strokeWidth: 2,
      lineCap: 'round',
      lineJoin: 'round',
    dashArray: '0 30 0 30'
  });

      layer.add(redLine); 
      stage.add(layer);
  }

$(document).ready(function() {
   stage = new Kinetic.Stage({
        container: "container",
        width: $('#container').width(),
        height: $(window).height()
      });
    setTimeout(drawLines,100);
  });

  $(window).resize(function(e){
stage.clear();
});

 function imageresize() {
   var contentwidth = $('body').width();
   if ((contentwidth) < '700'){
   $('.fluidimage').attr('src','little.jpg');
   } else {
   $('.fluidimage').attr('src','big.jpg');
    }
   }

   imageresize();// Triggers when document first loads

   $(window).bind("resize", function(){ // Adjusts image when browser resized
    imageresize();
   }); 
```

非常感谢您的帮助，我非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:13:37.387

当您如下声明 redLine

```
var redLine = new Kinetic.Line({
    points: lineCoords,
    stroke: '#000',
    strokeWidth: 2,
    lineCap: 'round',
    lineJoin: 'round',
    dashArray: '0 30 0 30'
    }); 
```

基本上使用`points: lineCoords` 在连续点之间画线，所以你有 2 个选项，1\. 从点 2 的坐标开始，在每个点之后添加点 1（母亲）的坐标，假设母亲总是第一个。

```
points: [lineCoords[0],lineCoords[1],lineCoords[2],lineCoords[3],lineCoords[0],lineCoords[1],lineCoords[4],lineCoords[5]] 
```

或 2\. 制作一个 for 循环，在其中分别绘制每条线，其中将点指定为：`point: [lineCoords[0],lineCoords[1],lineCoords[2*i],lineCoords[2*i+1]]`，本质上是线的起点和终点，其中`i = 1,2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:11:43.573

这接近您正在寻找的内容：http: [//jsfiddle.net/audnB/9/](http://jsfiddle.net/audnB/9/)

基本上和阿尼说的差不多。

您所有的线都需要从 0,1 到 2i,2i+1 以便坐标匹配。并在一个循环中。

```
 var layer = new Kinetic.Layer();
    for (var i=0; i<lineCoords.length / 2; i++){
         var redLine = new Kinetic.Line({
                 points: [lineCoords[0], lineCoords[1], lineCoords[2*i],lineCoords[2*i+1]],
                 stroke: '#000',
                 strokeWidth: 2,
                 lineCap: 'round',
                 lineJoin: 'round',
                 dashArray: '0 30 0 30'
         });
        layer.add(redLine); 
    };
    stage.add(layer); 
```

# vba - 如何将字符串格式化为日期——Microsoft Project 导出到 Excel？

> ID：14279922
> 
> 赞同：2
> 
> 时间：2013-01-11T14:13:07.517
> 
> 标签：vba, excel

我正在从 Microsoft Project 导出 Excel 工作表，并尝试将该导出的工作表导入 Excel 中的现有工作表。

`m/d/yy hh:mm AM/PM`它工作正常，但是，即使我`Format Cells`在 Excel 的 GUI 中选择并尝试格式化为日期，也有字符串日期表示（存储为）格式不正确。字符串只是不会改变。

我能做些什么？我可以在我的导入子中放置代码吗？有没有更好的方法通过 Project 导出，以便日期的格式已经正确？

这是我当前用于导入工作表的子（通过项目保存）：

```
Sub Import_from_Project()
    Dim wbSource As Workbook, wbDestination As Workbook
    Dim wsSource As Worksheet, wsDestination As Worksheet
    Dim DTAddress As String

    DTAddress = CreateObject("WScript.Shell").SpecialFolders("Desktop") & Application.PathSeparator

    Application.ScreenUpdating = False

    Set wbSource = Workbooks.Open(DTAddress & "Import.xlsx")
    Set wbDestination = ThisWorkbook

    Set wsSource = wbSource.Sheets(1)
    Set wsDestination = wbDestination.Sheets(6)

    'The range below is the data I'm copying
    'Only columns B and C contain the strings that I want to convert to date
    With wsSource
        .Range(.Range("A2"), .Range("C2").End(xlDown)).Copy wsDestination.Range("A3")
    End With

    'Pseudocode to loop through strings and convert to dates
    'With wsSource
    '    .Range(.Range("B2"), .Range("C2").End(xlDown)) .FORMAT TO DATE?

    wbSource.Close SaveChanges:=False
    ' wbDestination.Close SaveChanges:=True
    Application.ScreenUpdating = True

End Sub 
```

我假设我必须使用 CDATE 函数，但我不确定它如何适合上面的伪代码：

```
Format(CDate(stringDateRepresentation), "m/yyyy") 
```

编辑：如果它很重要，我正在使用 Office 2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:18:55.683

1.  将列格式化为日期
2.  然后使用此代码覆盖单元格。假设`A1`有一个存储为字符串的日期

**代码示例**

```
Columns(1).NumberFormat = "m/d/yy hh:mm AM/PM"
Range("A1").Formula = Range("A1").Value 
```

以上是一个示例，对于一个充满值的列，您必须遍历单元格并执行上述操作。

**截屏**

![在此处输入图像描述](../Images/74101d6477d418ef314284ce82aa1308.png)

# node.js - 猫鼬：按字母顺序排序

> ID：14279924
> 
> 赞同：20
> 
> 时间：2013-01-11T14:13:18.500
> 
> 标签：node.js, mongodb, mongoose

我有一个`User`模型

```
var User = mongoose.model('Users',
    mongoose.Schema({
        username: 'string',
        password: 'string',
        rights: 'string'
    })
); 
```

我想获取所有用户，按字母顺序排序`username`。这是我尝试过的

```
User.find({}, null, {sort: {username: 1}}, function (err, users) {
    res.send(users);
}); 
```

但是，这不会按字母顺序对用户进行排序。如何按字母顺序排序？

***编辑***：我很困惑，因为我期待 Mongoose 的“纯粹按字母顺序”排序，而不是`Z`>`a`。基本上，我想要一种基于`username.toLowerCase()`.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2017-06-26T21:09:39.793

这个问题和答案已有几年历史了，据我所知，现在有一种正确的方法可以做到这一点。为未来的搜索者提供：

```
User.find().collation({locale:'en',strength: 2}).sort({username:1})
    .then( (users) =>{ 
        //do your stuff
    }); 
```

您也可以在`username`不区分大小写的情况下进行索引：

```
UserSchema.index({username:1}, {collation: { locale: 'en', strength: 2}}); 
```

`strength:1`是另一种选择 - 最好参考文档来决定哪个最适合您。

有关这一切的详细信息，[请看这里。](https://docs.mongodb.com/manual/reference/collation/)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-14T16:43:37.920

编辑：根据评论，问题原来是排序的`toLowerCase(username)`。MongoDB 没有用于复杂排序的内置方法。所以基本上有两种方法：

1.  `usernameLowerCase`向 Schema添加一个字段。如果您需要经常这样做，这是更好的选择。
2.  [`$toLower`使用运算符](http://docs.mongodb.org/manual/reference/aggregation/toLower/)执行带有投影[的聚合](http://docs.mongodb.org/manual/applications/aggregation/)以动态生成`usernameLowerCase`字段。这带有性能和内存警告，但它可能是更方便的选择。

原始答案：这是一个使用问题中的特定代码正确排序的完整示例。所以肯定有其他事情发生：

```
#! /usr/bin/node

var mongoose = require('mongoose');
mongoose.connect('localhost', 'test');
var async = require('async');

var User = mongoose.model('Users',
    mongoose.Schema({
        username: 'string',
        password: 'string',
        rights: 'string'
    })
);

var userList = [
    new User({username: 'groucho', password: 'havacigar', rights: 'left'}),
    new User({username: 'harpo', password: 'beepbeep', rights: 'silent'}),
    new User({username: 'chico', password: 'aintnosanityclause', rights: 'all'})
];

async.forEach(userList, 
    function (user, SaveUserDone) {
        user.save(SaveUserDone);
    },
    function (saveErr) {
        if (saveErr) {
            console.log(saveErr);
            process.exit(1);
        }
        User.find({}, null, {sort: {username: 1}}, function (err, users) {
            if (err) {
                console.log(err);
                process.exit(1);
            }
            console.log(users);
            process.exit(0);
        });
    }
); 
```

# c# - 通过拖放移动

> ID：14279931
> 
> 赞同：3
> 
> 时间：2013-01-11T14:13:39.093
> 
> 标签：c#, visual-studio, picturebox

我正在尝试`PictureBox`使用拖放来移动 a。使用我的代码，`PictureBox`克隆了。但我需要能够移动它。我怎样才能做到这一点？

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        this.AllowDrop = true;
        this.pictureBox1.MouseDown += pictureBox1_MouseDown;
    }
    private void pictureBox1_MouseDown(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        {
            var dragImage = (Bitmap)pictureBox1.Image;
            IntPtr icon = dragImage.GetHicon();
            Cursor.Current = new Cursor(icon);
            DoDragDrop(pictureBox1.Image, DragDropEffects.Copy);
            DestroyIcon(icon);
        }
    }
    protected override void OnGiveFeedback(GiveFeedbackEventArgs e)
    {
        e.UseDefaultCursors = false;
    }
    protected override void OnDragEnter(DragEventArgs e)
    {
        if (e.Data.GetDataPresent(typeof(Bitmap))) e.Effect = DragDropEffects.Copy;
    }
    protected override void OnDragDrop(DragEventArgs e)
    {
        var bmp = (Bitmap)e.Data.GetData(typeof(Bitmap));
        var pb = new PictureBox();
        pb.Image = (Bitmap)e.Data.GetData(typeof(Bitmap));
        pb.Size = pictureBox1.Size;
        pb.Location = this.PointToClient(new Point(e.X - pb.Width / 2, e.Y - pb.Height / 2));
        this.Controls.Add(pb);
    }

    [System.Runtime.InteropServices.DllImport("user32.dll")]
    extern static bool DestroyIcon(IntPtr handle);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:22:28.167

无需创建新的 PictureBox，只需将旧的位置更新为放置位置。也就是说，而不是：

```
protected override void OnDragDrop(DragEventArgs e)
{
    var bmp = (Bitmap)e.Data.GetData(typeof(Bitmap));
    var pb = new PictureBox();
    pb.Image = (Bitmap)e.Data.GetData(typeof(Bitmap));
    pb.Size = pictureBox1.Size;
    pb.Location = this.PointToClient(new Point(e.X - pb.Width / 2, e.Y - pb.Height / 2));
    this.Controls.Add(pb);
} 
```

就用这个：

```
protected override void OnDragDrop(DragEventArgs e)
{
    pictureBox1.Location = this.PointToClient(new Point(e.X - pictureBox1.Width / 2, e.Y - pictureBox1.Height / 2));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:22:47.163

这是一个扩展方法，它将为任何 WinForms 控件执行此操作：http: [//www.codeproject.com/Tips/178587/Draggable-WinForms-Controls? display=Print](http://www.codeproject.com/Tips/178587/Draggable-WinForms-Controls?display=Print)

# javascript - 将类属性设置为函数 - 当创建类的实例时会调用该函数吗？

> ID：14279934
> 
> 赞同：0
> 
> 时间：2013-01-11T14:13:41.073
> 
> 标签：javascript, class, function

如果我写这个：

```
function thing() {
    this.timer = Date.now();
} 
```

`Date.now()`每次我创建一个类的实例时会返回我创建一个类的时间，或者只是继续返回加载脚本的时间？

对不起菜鸟问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:22:12.307

*每次*调用它时都会执行构造函数的主体。就像任何其他功能一样。由于您的构造函数的主体调用`Date.now`，因此每次都会调用它。

如果不是每次都执行，每个实例都将共享所有相同的属性……这有点违背了它的意义！

但是，您可能一直在考虑`thing.prototype`. 如果您将其设置`timer`为它的属性，则*不会*为每个实例评估它，并且每个实例将共享相同的属性（因此具有相同的值）：

```
thing.prototype.timer = Date.now(); // Not what you want! 
```

看看[这个例子](http://jsfiddle.net/jamesallardice/MUsP2/1/)。注意前 2 次是不同的，而后 2 次是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:19:58.770

**是**的，它会返回您创建实例的时间，

```
function thing() {
    this.timer = Date.now();
    console.log(this.timer)
} 
```

//这两者都会记录不同的时间。

```
new thing();
new thing() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T14:21:17.490

`this.timer`将始终返回`thing`实例化时间的值。当被调用时，它将为该实例设置一次，`new thing()`并且除非明确重置，否则将始终返回此值。

小提琴：http: [//jsfiddle.net/sajjansarkar/QrUWR/1/](http://jsfiddle.net/sajjansarkar/QrUWR/1/)

```
function thing() 
{
    this.timer = Date.now();
}

var o1 = new thing();
alert(o1.timer);
alert(o1.timer);

var o2 = new thing();
alert(o2.timer);
alert(o1.timer); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T14:19:38.477

从[规范](http://es5.github.com/#x15.9.4.4)：

> 该`now`函数返回一个 Number 值，它是指定调用 UTC 日期和时间的时间值`now`。

所以，

> 将`Date.now()`返回我每次创建类实例的时间

是的。

# android - 旋转后可见的所有片段

> ID：14279941
> 
> 赞同：2
> 
> 时间：2013-01-11T14:13:57.777
> 
> 标签：android, android-layout, android-fragments

我的设备旋转时出现碎片问题：我有 5 个碎片：

1.  菜单是第一个片段，当活动开始时，它被启动。
2.  AddUser（当我按下菜单片段中的按钮时可以看到的简单片段）
3.  DetailApp（当我按下菜单片段中的按钮时可以看到的简单片段）
4.  DetailUser（当我按下菜单片段中的按钮时可以看到的简单片段）
5.  ListUser（当我按下菜单片段中的按钮时可以看到的 ListFragment）

当我以垂直模式开始活动时，我可以正确看到我的片段，当我旋转智能手机时，我可以看到..所有片段重叠！如果我启动 ListUser 我有：

```
IllegalArgumentException: No view found for id 0x... for fragment ... 
```

当启动我的菜单片段时：

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_manager); 
```

这是 oncreate

```
// Check whether the activity is using the layout version with
// the fragment_container FrameLayout. If so, we must add the first fragment
if (findViewById(R.id.fragment_container) != null) {
    // However, if we're being restored from a previous state,
    // then we don't need to do anything and should return or else
    // we could end up with overlapping fragments.
    if (savedInstanceState != null) {
        return;
    }

    //first frame show a menu
    Menu firstFragment = new Menu();

    // In case this activity was started with special instructions from an Intent,
    // pass the Intent's extras to the fragment as arguments
    firstFragment.setArguments(getIntent().getExtras());

    // Add the fragment to the 'fragment_container' FrameLayout
    getSupportFragmentManager().beginTransaction()
    .add(R.id.fragment_container, firstFragment).commit();    
    } 
```

片段容器在开始时是无效的..

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/fragment_container"
android:layout_width="match_parent"
android:layout_height="match_parent" /> 
```

当我按下一个按钮并且其中一个片段开始时：

```
@Override
public void onDetailApp(int position) {
// The user selected the headline of an article from the HeadlinesFragment
// Capture the article fragment from the activity layout
DetailApp appFrag = (DetailApp)
        getSupportFragmentManager().findFragmentById(R.id.detailapp_fragment);

if (appFrag != null) {
    // If article frag is available, we're in two-pane layout...

    // Call a method in the ArticleFragment to update its content
    appFrag.updateAppointmentView(position);

} else {
    // If the frag is not available, we're in the one-pane layout and must swap frags...

    // Create fragment and give it an argument for the selected article
    DetailApp newFragment = new DetailApp();
    Bundle args = new Bundle();
    args.putInt(DetailApp.ARG_APPOINTMENT, position);
    newFragment.setArguments(args);
    FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

    // Replace whatever is in the fragment_container view with this fragment,
    // and add the transaction to the back stack so the user can navigate back
    transaction.replace(R.id.fragment_container, newFragment);
    transaction.addToBackStack(null);

    // Commit the transaction
    transaction.commit();
}
} 
```

这是来自 DetailUser、AddUser、DetailApp 的 onCreateView：

```
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, 
    Bundle savedInstanceState) {
    // If activity recreated (such as from screen rotate), restore
    // the previous article selection set by onSaveInstanceState().
    // This is primarily necessary when in the two-pane layout.
    if (savedInstanceState != null) {
        mCurrentPosition = savedInstanceState.getInt(ARG_POSITION);
    }
    // Inflate the layout for this fragment
    return inflater.inflate(R.layout.detail_adduser, container, false);
} 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-12T08:44:59.500

我将此添加到我的清单活动并覆盖 onConfigurationChanged: android:configChanges="keyboardHidden|orientation|screenSize"

```
 <activity
        android:name="com.map.manager.ManagerActivity"
        android:configChanges="keyboardHidden|orientation|screenSize"
        android:label="@string/title_activity_manager" >
    </activity> 
```

我没有更多的问题了！我可以看到正确的垂直和水平布局（当我旋转智能手机时）。但我发现了这一点：[为什么](https://stackoverflow.com/questions/7818717/why-not-use-always-androidconfigchanges-keyboardhiddenorientation) 我必须将所有可能的配置更改都放入“黑名单”中？区域设置触摸屏屏幕尺寸等？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T14:28:03.460

代替

```
 getSupportFragmentManager().beginTransaction()
 .add(R.id.fragment_container, firstFragment).commit(); 
```

经过

```
 getSupportFragmentManager().beginTransaction()
 .replace(R.id.fragment_container, firstFragment).commit(); 
```

99% 的时间它解决了重复问题。

# mysql - 如何从列为 NULL 的 MySQL 表中选择数据

> ID：14279947
> 
> 赞同：4
> 
> 时间：2013-01-11T14:14:19.540
> 
> 标签：mysql, sql, select

我希望以下代码向我显示表中交换列为空但结果集显示 0 行的所有记录。知道为什么吗？

```
SELECT * FROM pubco WHERE exchange IS NULL; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T14:16:14.843

也许你已经解释`''`为`NULL`不一样了，但试试这个

```
SELECT * 
FROM pubco 
WHERE exchange IS NULL OR
      exchange = '' 
```

但如果仍然没有得到价值，也许它上面有空格，所以你应该`TRIM`这样做，

```
SELECT * 
FROM pubco 
WHERE exchange IS NULL OR
      TRIM(exchange) = '' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:17:28.600

一个重要的说明：`NULL`和`''`（即空字符串）不是一回事，很可能您的列包含空字符串，因此您需要放置另一个条件：

```
SELECT * FROM pubco WHERE (exchange IS NULL OR exchange = ''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:17:36.597

你确定它们是空的吗？

也许他们有一个不一样的字符串值“NULL”，如果你这样做，它会返回什么：

```
SELECT * FROM pubco WHERE exchange == "NULL"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T14:24:14.997

而不是使用这个查询

```
SELECT * 
FROM pubco 
WHERE exchange IS NULL OR
      exchange = '' 
```

试试这个

```
SELECT * FROM pubco 
WHERE isnull(exchange,'')=''; 
```

它会提高你的**表现**。

# java - 我可以部分回放 Cassandra 提交日志吗？

> ID：14279949
> 
> 赞同：0
> 
> 时间：2013-01-11T14:14:34.063
> 
> 标签：java, cassandra, hector

假设我有一个在 9:00 备份的 Cassandra 集群。然后在 9 点 30 分，我发布了一些破坏所有数据的代码。在 10:00，我注意到了问题，但损坏已经造成。有没有办法将提交日志回放到 9:29？我找不到任何关于这种事情的文档。我只需要删除一半的提交日志文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:23:32.573

删除一半的提交日志就可以了。它用时间戳很好地格式化，所以它应该是微不足道的。旧版本的 cassandra 将在您启动时自动检查并重播提交日志。

# eclipse - eclipse - 搜索一次只打开一个文件

> ID：14279958
> 
> 赞同：8
> 
> 时间：2013-01-11T14:15:00.650
> 
> 标签：eclipse, search

在 Eclipse 中，当我进行全局搜索（打开搜索对话框）时，我可以获得结果列表。

但是，当我打开这些结果时，eclipse 一次只会打开一个文件。也就是说，给定结果：

```
A
B
C 
```

我可以双击`A`并看到该文件。但是，如果我然后双击`B`，文件`A`将被关闭，并替换为`B`

我希望能够读取这两个文件（或我想双击的任意多个文件）......我该怎么做？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-31T19:47:37.933

1.  转到首选项 > 常规 > 搜索
2.  取消选中标记为“重用编辑器以显示匹配项”的框
3.  单击确定。

那应该这样做。

# javascript - Require.js 错误：模块加载超时：主干，jquerymobile

> ID：14279962
> 
> 赞同：64
> 
> 时间：2013-01-11T14:15:07.560
> 
> 标签：javascript, jquery, backbone.js, requirejs

我正在尝试使用 r.js 来优化我的代码，但我一直运行到这个错误：

跟踪依赖项：init

```
Error: Load timeout for modules: backbone,jquerymobile 
```

我正在运行的命令是这样的：

```
$ java -classpath /Users/dixond/build-tools/rhino1_7R4/js.jar:/Users/dixond/build-tools/closurecompiler/compiler.jar org.mozilla.javascript.tools.shell.Main /Users/dixond/build-tools/r.js/dist/r.js -o /Users/dixond/Sites/omm_mobile/js/build.js 
```

我的 build.js 文件如下所示：

```
( {
    //appDir: "some/path/",
    baseUrl : ".",
    mainConfigFile : 'init.js',
    paths : {
        jquery : 'libs/jquery-1.8.3.min',
        backbone : 'libs/backbone.0.9.9',
        underscore : 'libs/underscore-1.4.3',
        json2 : 'libs/json2',
        jquerymobile : 'libs/jquery.mobile-1.2.0.min'
    },
    packages : [],
    shim : {
        jquery : {
            exports : 'jQuery'
        },
        jquerymobile : {
            deps : ['jquery'],
            exports : 'jQuery.mobile'
        },
        underscore : {
            exports : '_'
        },
        backbone : {
            deps : ['jquerymobile', 'jquery', 'underscore'],
            exports : 'Backbone'
        }
    },
    keepBuildDir : true,
    locale : "en-us",
    optimize : "closure",
    skipDirOptimize : false,
    generateSourceMaps : false,
    normalizeDirDefines : "skip",
    uglify : {
        toplevel : true,
        ascii_only : true,
        beautify : true,
        max_line_length : 1000,
        defines : {
            DEBUG : ['name', 'false']
        },

        no_mangle : true
    },
    uglify2 : {},
    closure : {
        CompilerOptions : {},
        CompilationLevel : 'SIMPLE_OPTIMIZATIONS',
        loggingLevel : 'WARNING'
    },
    cssImportIgnore : null,
    inlineText : true,
    useStrict : false,
    pragmas : {
        fooExclude : true
    },
    pragmasOnSave : {
        //Just an example
        excludeCoffeeScript : true
    },
    has : {
        'function-bind' : true,
        'string-trim' : false
    },
    hasOnSave : {
        'function-bind' : true,
        'string-trim' : false
    },
    //namespace: 'foo',
    skipPragmas : false,
    skipModuleInsertion : false,
    optimizeAllPluginResources : false,
    findNestedDependencies : false,
    removeCombined : false,
    name : "init",
    out : "main-built.js",
    wrap : {
        start : "(function() {",
        end : "}());"
    },
    preserveLicenseComments : true,
    logLevel : 0,
    cjsTranslate : true,
    useSourceUrl : true
}) 
```

我的 init.js 看起来像这样：

```
 requirejs.config({
      //libraries
      paths: {
          jquery:       'libs/jquery-1.8.3.min',
          backbone:     'libs/backbone.0.9.9',
          underscore:   'libs/underscore-1.4.3',
          json2 :       'libs/json2',
          jquerymobile: 'libs/jquery.mobile-1.2.0.min'
      },

      //shimming enables loading non-AMD modules
      //define dependencies and an export object
      shim: {
          jquerymobile: {
              deps: ['jquery'],
              exports: 'jQuery.mobile'
          },
          underscore: {
              exports: '_'
          },
          backbone: {
              deps: ['jquerymobile', 'jquery', 'underscore', 'json2'],
              exports: 'Backbone'
          }
      }
    });

requirejs(["backbone",], function(Backbone) {
    //Execute code here
}); 
```

我在这个构建过程中做错了什么？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-01-11T17:23:03.183

Require.js 有一个名为 waitSeconds 的配置选项。这可能会有所帮助。

[RequireJS waitSeconds](http://requirejs.org/docs/api.html#config-waitSeconds)

这是一个使用 waitSeconds 的示例：

```
requirejs.config({
    baseUrl: "scripts",
    enforceDefine: true,
    urlArgs: "bust=" + (new Date()).getTime(),
    waitSeconds: 200,
    paths: {
        "jquery": "libs/jquery-1.8.3",
        "underscore": "libs/underscore",
        "backbone": "libs/backbone"
    },
    shim: {
        "underscore": {
            deps: [],
            exports: "_"
        },
        "backbone": {
            deps: ["jquery", "underscore"],
            exports: "Backbone"
        },
    }
});

define(["jquery", "underscore", "backbone"],
    function ($, _, Backbone) {
        console.log("Test output");
        console.log("$: " + typeof $);
        console.log("_: " + typeof _);
        console.log("Backbone: " + typeof Backbone);
    }
); 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2014-01-23T14:29:13.027

# 错误

我最近在一个`angularJS`使用`requireJS`.

我正在使用 Chrome canary build ( `Version 34.0.1801.0 canary`)，但也安装了稳定版本 ( `Version 32.0.1700.77`)，在打开加载应用程序时显示完全相同的问题`Developer console`：

```
Uncaught Error: Load timeout for modules 
```

**开发人员控制台在这里很关键，**因为在控制台未打开时我没有收到错误消息。我尝试重置所有 chrome 设置，卸载任何插件，......到目前为止没有任何帮助。

# 解决方案

大指针是关于`waitSeconds`配置选项的 Google 小组讨论（请参阅下面的资源）。将其设置为 0 解决了我的问题。我不会检查这个，因为这只是将超时设置为无限。但是作为开发过程中的修复，这很好。[示例配置](http://requirejs.org/docs/api.html#config)：

```
<script src="scripts/require.js"></script>
<script>
  require.config({
    baseUrl: "/another/path",
    paths: {
      "some": "some/v1.0"
    },
    waitSeconds: 0
  });
  require( ["some/module", "my/module", "a.js", "b.js"],
    function(someModule,    myModule) {
      //This function will be called when all the dependencies
      //listed above are loaded. Note that this function could
      //be called before the page is loaded.
      //This callback is optional.
    }
  );
</script> 
```

**此错误最常见的其他原因是：**

*   模块中的错误
*   配置中的错误路径（检查`paths`和`baseUrl`选项）
*   配置中的双重输入

# 更多资源

requireJS 的故障排除页面：[http:](http://requirejs.org/docs/errors.html#timeout) //requirejs.org/docs/errors.html#timeout point 2、3 和 4 可能很有趣。

类似的 SO 问题：[Ripple - Uncaught Error: Load timeout for modules: app http://requirejs.org/docs/errors.html#timeout](https://stackoverflow.com/questions/20736547/ripple-uncaught-error-load-timeout-for-modules-app-http-requirejs-org-docs)

相关的 Google 群组讨论：[https ://groups.google.com/forum/#!topic/requirejs/70HQXxNylYg](https://groups.google.com/forum/#!topic/requirejs/70HQXxNylYg)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-07-15T17:35:21.113

如果其他人有这个问题并且仍然在努力解决它（就像我一样），这个问题也可能来自循环依赖，例如 A 依赖于 B，B 依赖于 A。

[RequireJS 文档](http://requirejs.org/docs/api.html#circular)没有提到循环依赖会导致“加载超时”错误，但我现在已经观察到两种不同的循环依赖。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-04-29T15:26:57.763

waitSeconds 的默认值 = 7（7 秒）

如果设置为 0，则完全禁用超时。

来源：[http ://requirejs.org/docs/api.html](http://requirejs.org/docs/api.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-11T21:11:31.320

问题的原因是*Require.js*运行超时，因为项目可能依赖于大型库。默认超时为 7 秒。增加此配置选项的值（称为 waitSeconds）当然可以解决它，但这不是正确的方法。正确的做法是**提高页面加载时间**。加速页面加载的最佳技术之一是**缩小**- 压缩代码的过程。有一些很好的缩小工具，例如[r.js](https://github.com/jrburke/r.js)或[webpack](https://webpack.github.io/docs/amd.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-15T10:35:33.980

我只在 Mobile Safari 6.0.0 (iOS 6.1.4) 上运行测试时收到此错误。`waitSeconds: 0`现在给了我一个成功的构建。如果我的构建再次失败，我会更新

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-25T08:28:28.233

**TLDR：使用两个有效的不同名称**两次要求同一个文件，可能是以下两个：

*   绝对路径：'/path/to/file.js'

*   相对路径：'./path/to/file.js'

*   作为一个模块：'路径/到/文件'

*   作为主路径配置的模块：

    路径：{'我的/模块/文件'：'/path/to/file'}

最近有同样的问题。我确实批量更改了一些需要路径，所以我知道问题是关于那个的。

我可以在服务器端日志和网络调试选项卡上清楚地看到文件在不到一秒的时间内提供服务。这不是一个真正的超时问题。

我尝试按照建议使用[xrayrequire](https://github.com/requirejs/xrayquire)来查找任何循环依赖，但没有成功。我查找了冲突文件的要求，发现我要求它两次使用不同的名称。

# c# - Xml 序列化和反序列化失败

> ID：14279969
> 
> 赞同：-2
> 
> 时间：2013-01-11T14:15:53.450
> 
> 标签：c#, xml, xml-serialization, xml-deserialization

我知道这个问题已经被问过了，但是我有一个奇怪的问题，我不知道该怎么做：

```
public static class XmlHelper
{
    public static T Deserialize<T>(string xml)
    {
        using (var sr = new StringReader(xml))
        {
            var xs = new XmlSerializer(typeof(T));
            return (T)xs.Deserialize(sr);
        }
    }

    public static string Serialize(object o)
    {
        using (var sw = new StringWriter())
        {
            using (var xw = XmlWriter.Create(sw))
            {
                var xs = new XmlSerializer(o.GetType());
                xs.Serialize(xw, o);
                return sw.ToString();
            }
        }
    }
}

[Serializable]
public class MyClass
{
    public string Property1 {get;set;}
    public int Property2 {get;set;}
} 
```

我正在序列化课程：

```
var a = XmlHelper.Serialize(new MyClass{ Property1 = "a", Property2 = 3 });
var b = XmlHelper.Deserialize<object>(a); 
```

错误：XML 文档 (1, 41) 中存在错误。

编辑：我想反序列化一个 as 对象，有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:20:53.307

您没有传递正确的序列化类型，请将代码更改为：

```
public static string Serialize<T>(T o)
{
    using (var sw = new StringWriter())
    {
        using (var xw = XmlWriter.Create(sw))
        {
            var xs = new XmlSerializer(typeof(T));
            xs.Serialize(xw, o);
            return sw.ToString();
        }
    }
}
...
// we don't need to explicitly define MyClass as the type, it's inferred
var a = XmlHelper.Serialize(new MyClass{ Property1 = "a", Property2 = 3 });
var b = XmlHelper.Deserialize<MyClass>(a); 
```

# java - 为什么 PrepareStatement 不能生成正确的 SQL 查询？

> ID：14279972
> 
> 赞同：2
> 
> 时间：2013-01-11T14:16:08.507
> 
> 标签：java, mysql, sql, jdbc

下面是我的 PrepareStatement 代码。它不会生成正确的 SQL 查询。它也没有超出第一个 println 语句。它还在查询中显示** NOT SPECIFIED **（请参见下文）。

请问我们如何解决这个问题？

```
 ps1 = con.prepareStatement(
                     "select stuId, name, relationsName, houseAddress, houseNumber from temp where "
                        + " stuId like '?%' and " 
                        + " sex = '?' and " 
                        + " name like '?%' and "
                        + " age BETWEEN ? and ? and "
                        + " relationsName like '?%' " 
                        + " order by name asc limit 0, 150000 "
               );

               System.out.println("ps1 Before : " + ps1); 
```

输出：

> ps1 之前：com.mysql.jdbc.JDBC4PreparedStatement@14d55de：选择 stuId、name、relationshipName、houseAddress、houseNumber from temp where stuId like '?%' and sex = '?' and name like '?%' and age BETWEEN ** NOT SPECIFIED ** and ** NOT SPECIFIED ** and relationsName like '?%' order by name asc limit 0, 150000

它并没有超出这一点。它还在查询中表示**未**指定（请参阅最后）。

请问有什么见解吗？

```
 ps1.setString(1, stuId);
       ps1.setString(2, gender);
       ps1.setString(3, name);
       ps1.setInt(4, startAge);
       ps1.setInt(5, endAge);
       ps1.setString(6, relationsName);

       System.out.println("ps1 After : " + ps1);

       rs = ps1.executeQuery(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T14:17:17.807

因为占位符用单引号括起来，因此使其不再是值而不是参数。你应该摆脱它，例如

```
ps1 = con.prepareStatement(
                 "select stuId, name, relationsName, houseAddress, houseNumber from temp where "
                    + " stuId like ? and " 
                    + " sex = ? and " 
                    + " name like ? and "
                    + " age BETWEEN ? and ? and "
                    + " relationsName like ? " 
                    + " order by name asc limit 0, 150000 "
           ); 
```

for`LIKE`语句，你应该在java中连接值，而不是在sql中，

```
ps1.setString(1, stuId + '%'); 
```

# c# - 如何将数据源转换为列表 ?

> ID：14279977
> 
> 赞同：18
> 
> 时间：2013-01-11T14:16:17.683
> 
> 标签：c#, winforms, datagridview, casting, datasource

我有以下在 DataGridView 上加载产品的方法

```
private void LoadProducts(List<Product> products)
{
    Source.DataSource = products;  // Source is BindingSource
    ProductsDataGrid.DataSource = Source;
} 
```

现在我正试图将它们还给我以保存它们，如下所示。

```
private void SaveAll()
{
   Repository repository = Repository.Instance;
   List<object> products = (List<object>)Source.DataSource; 
   Console.WriteLine("Este es el número {0}", products.Count);
   repository.SaveAll<Product>(products);
   notificacionLbl.Visible = false;
} 
```

但我`InvalidCastException`在这条线上得到了一个：

```
List<object> products = (List<object>)Source.DataSource; 
```

那么如何将 DataSource 转换为 List 呢？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-11T14:20:08.230

您不能将协变直接转换为 List；

任何一个：

```
List<Product> products = (List<Product>)Source.DataSource; 
```

或者：

```
List<Object> products = ((List<Product>)Source.DataSource).Cast<object>().ToList(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T14:25:54.973

> 那么如何将 DataSource 转换为 List 呢？

你有很多选择

```
var products = (List<Product>)Source.DataSource; // products if of type List<Product> 
```

或者

```
 List<Object> products = ((IEnumerable)Source.DataSource).Cast<object>().ToList(); 
```

或者

```
List<Object>  products = ((IEnumerable)Source.DataSource).OfType<object>().ToList(); 
```

或者

```
List<Object> products = new List<Object>();
((IEnumerable)Source.DataSource).AsEnumerable().ToList().ForEach( x => products.Add( (object)x)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T14:19:29.160

您的 List 类型`List<Product>`不同于`List<object>`. 尝试投射到`List<Product>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T14:39:23.237

说服答案这是我的解决方案：

```
private void SaveAll()
{
    Repository repository = Repository.Instance;
    List<Product> products = (List<Product>)Source.DataSource;
    IEnumerable<object> objects = products.Cast<object>();
    repository.SaveAll<Product>(objects.ToList<object>());
    notificacionLbl.Visible = false;
} 
```

我接受建设性的批评。

# java - 计算渲染的文本字符串的尺寸（在渲染之前）

> ID：14279980
> 
> 赞同：0
> 
> 时间：2013-01-11T14:16:27.047
> 
> 标签：java, string, canvas, paint

我想在中间完美对齐**画布绘制的字符串。**所以如果我有这样的代码

```
Paint p = new Paint();
Canvas c = holder.lockCanvas();

String centered_text = "Hello World"; 
```

然后设置我的绘画**风格**和**大小**

```
p.setTextSize(35);
p.setStyle(Style.STROKE); 
```

现在要在中间绘制我的字符串，我会这样做

```
c.drawText(centered_text, c.getWidth()/2, c.getHeight()/2, p); 
```

但这实际上不会使我的文本居中，它会将左上角置于中心。为了使其居中，我需要知道以像素而不是字符为单位的字符串字面宽度和高度。

```
int string_width = centered_text.getWidth(); //String.getWidth() is not a real methode
int string_height = centered_text.getHeight(); //String.getHeight() is not a real methode

c.drawText(centered_text, (c.getWidth()/2)-(string_width/2), (c.getHeight()/2)-(string_height/2), p); 
```

这将使文本居中，但`String.getWidth()`不是`String.getHeight()`真正的方法。所以我的想法是使用**文本**的**大小**和**字符串**的**大小**来找到**宽度**和**高度**。所以有些事情是这样的：

 ******```
int string_width = centered_text.length()*p.getTextSize();
int string_height = p.getTextSize(); 
```

但我觉得这是错误的，因为不同的字符大小不同......任何人都有任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:38:19.597

假设您在 Java Swing 中，您想要的是[FontMetrics](http://docs.oracle.com/javase/6/docs/api/java/awt/FontMetrics.html "字体度量")。

```
new FontMetrics(canvas.getFont()).getStringBounds(someString, canvas.getGraphics()); 
```

将返回一个包含字符串大小的 Rectangle2D。******

# ruby-on-rails - 删除记录时的 HTTP 代码

> ID：14279982
> 
> 赞同：2
> 
> 时间：2013-01-11T14:16:34.753
> 
> 标签：ruby-on-rails, http

我正在使用 Ruby on Rails，我试图了解 HTTP 代码的所有微妙之处，以使我的应用程序符合标准，我正面临以下情况。

假设我有一个包含两个表，Company 和Employees 的数据库。

*   如果用户尝试删除没有员工的公司，则会将其删除并且服务器会发送代码 200。
*   如果用户试图删除一个有员工的公司，它不会被删除，服务器会发送一条消息（“有员工链接到这家公司......”）。在这种情况下，服务器必须发送什么代码？我在考虑 HTTP 4XX，但在我看来，这不是客户端错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:24:16.463

使用**409 冲突**错误代码。表示由于请求中的冲突而无法处理该请求。

一旦员工离开，冲突就会被删除，删除将起作用。您可以将其视为客户端错误，因为它是来自客户端的冲突请求。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T14:25:20.120

如果不允许客户对有员工的公司使用 DELETE 方法，我建议不允许使用 405 方法。在响应正文中包含对原因的解释。

# java - 访问 Java Corba 名称服务

> ID：14279987
> 
> 赞同：2
> 
> 时间：2013-01-11T14:16:59.727
> 
> 标签：java, corba, nameservice

有什么方法可以从正在运行的 Java (1.5) 程序访问 corba 名称服务。我想看看哪些其他进程注册到给定的进程。

我知道，JRE 中有三个工具。`servertool`，但要么我没有正确使用它们，要么它们不是正确的工具`orbd`。`tnameserv`

附加信息：程序开始于`-ORBInitialPort 1234`

执行`orbd -ORBInitialPort 1234`-> 由于已在使用中而返回错误（是的，很好，因为应用程序正在运行）与`tnameserv`. 但如果我使用`servertool -ORBInitialPort 1234`，则不会发生错误。但是，如果我在命令提示符或其他命令中键入“list”，它将始终返回一个空列表。

真诚的基督徒

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T15:29:02.310

可以通过[org.omg.CosNaming](http://docs.oracle.com/javase/1.4.2/docs/api/index.html)包中的类访问现有的、正在运行的 CORBA 命名服务。您需要获取`NamingContextExt`. 它具有遍历所有现有绑定以及按名称解析对象的方法。

当您启动一个`tnameserv`工具时，它会为您打印 IOR - 这是 CORBA URL。如果可以通过网络访问并提供 IOR，则可以从世界上的任何 ORB 获取 CORBA 对象（包括名称服务）：

```
public static void main(String args[]) throws Exception {
   ORB orb = ORB.init(args, null);
   // pass the IOR as command line parameter for this program
   String ior = args[0];
   org.omg.CORBA.Object objRef = orb.string_to_object(ior);
   NamingContextExt nameService = NamingContextExtHelper.narrow(objRef);

   // Now you can work with your naming service. 
} 
```

有关如何访问 CORBA 对象的教程和有关如何使用命名服务的教程，[请](http://docs.oracle.com/javase/1.4.2/docs/guide/idl/tnameserv.html)参见此处[。](http://www.javaworld.com/jw-02-1999/jw-02-enterprise.html)

默认情况下`orb.resolve_initial_references("NameService")`（如果未配置）返回正在运行的虚拟机上的本地服务，您需要查询外部服务。要使用它，您需要传递正确的配置属性（在我的示例中为 null 的第二个参数），并将 ORBInitRef.NameService 属性设置为您的名称服务的地址，如此处[所述](https://stackoverflow.com/questions/2633790/error-when-trying-to-connect-to-jacorb-naming-service/2921952#2921952)。许多（或大多数）生产环境都设置了此属性，以便此方法返回正确的远程名称服务。

[servertool](http://docs.oracle.com/javase/1.4.2/docs/guide/idl/servertool.html)是一个命令行工具，允许在不编写 Java 代码的情况下列出已注册的 CORBA 对象。您需要指定感兴趣的名称服务在哪个主机上运行。如果服务在给定的主机和端口上运行，servertool 不会抱怨。如果它没有找到它应该抱怨！

最重要的是，您的 CORBA 对象必须通过调用来向获得的名称服务注册

```
nameService.bind(yourName, yourCORBAObject); 
```

如果名称服务是远程的，这将发送包含您的球体的 URL 和对您的对象的引用的网络消息。如果您没有注册您的对象，那么该引用当然在那里不可用，并且服务器工具将向您显示一个空列表，就像您抱怨一样。

# jquery - 获取动态添加的表行

> ID：14279989
> 
> 赞同：1
> 
> 时间：2013-01-11T14:17:07.013
> 
> 标签：jquery, jquery-ui

我正在动态地将行添加到 Jquery 对话框中存在的表中。每当关闭对话框时，我想清除该表的除第一行之外的所有行，这样如果再次打开对话框，则只能看到新的行集。

我的目标是在打开此对话框时带一个空表。

这是我的对话框代码

```
$( "#personPmt" ).dialog({
    autoOpen: false,
    width: 675,
    modal: true,
    position: { my: "left top", at: "left bottom", of: $("#pmtDetails") },
    close: function() {
      $('#personPmtTable').remove("tr:gt(0)");
     }
  }); 
```

这是我的对话

```
<div id="personPmt" title="Personal Payment">
      <table border="0" cellpadding="0" cellspacing="0" class="pmtEntry" id="personPmtTable">
        <tr>
          <th style="display:none">ID</th>
          <th class="cell_date">DOS</th>
          <th class="cell_code">CPT</th>
          <th class="cell_name">Description</th>
          <th class="cell_amt">Billed</th>
          <th class="cell_amt">Payment</th>
          <th class="cell_amt">Balance</th>
          <th class="cell_amt">New Balance</th>
        </tr>            
      </table>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:21:49.790

## 将您的标题包装在一个`thead`元素中

```
<div id="personPmt" title="Personal Payment">
  <table class="pmtEntry" id="personPmtTable">
    <thead>
      <tr>
        <th style="display:none">ID</th>
        <th class="cell_date">DOS</th>
        <th class="cell_code">CPT</th>
        <th class="cell_name">Description</th>
        <th class="cell_amt">Billed</th>
        <th class="cell_amt">Payment</th>
        <th class="cell_amt">Balance</th>
        <th class="cell_amt">New Balance</th>
      </tr>
    </thead>
    <tbody>
    </tbody>        
  </table>
</div> 
```

然后删除`tbody`其中将`thead`保持不变的所有内容。

```
$("#personPmtTable tbody tr").remove(); 
```

只需确保将新行附加到`tbody`. :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:30:56.587

尝试这个

```
 $('#personPmt >  tr').not(':first').remove(); 
```

# android - 未找到可绘制的 alert_dialog_icon

> ID：14279992
> 
> 赞同：1
> 
> 时间：2013-01-11T14:17:11.080
> 
> 标签：android, drawable, menuitem

我正在尝试做一个菜单项的例子

```
MenuItem mnu1 = menu.add(0, 0, 0, "Item 1");
    {
        mnu1.setAlphabeticShortcut('a');
        mnu1.setIcon(R.drawable.alert_dialog_icon);            
    } 
```

但是在我的日食中我找不到`alert_dialog_icon`。谁能解释一下为什么会这样。我只能使用`ic_launcher`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:20:21.527

你需要检查 3 件事。

首先检查是否`alert_dialog_icon`存在于任何`drawable`文件夹中。

其次检查`R`您导入了哪个类。

第三清理您的项目并构建项目。如果以上两者都很好，这次它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:20:42.450

您需要在您的项目（或链接到您的项目）中有一个可绘制资源（PNG 或 XML 可绘制资源），其名称为：alert_dialog_icon。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-19T15:15:00.000

正如其他人所解释的，您可能需要将自己的图像添加到项目中。

但 ...

如果您不想将自己的资源添加到“res”文件夹（例如 - 您只是在尝试和测试东西），您可以使用 Android 附带的一些资源 - 只需使用“android.R. drawable.*" ...虽然不建议这样做-其中一些图像在遥远的将来可能会变得不可用（我怀疑）-但测试很好。

她就是一个例子……

```
mnu1.setIcon(android.R.drawable.ic_dialog_alert); 
```