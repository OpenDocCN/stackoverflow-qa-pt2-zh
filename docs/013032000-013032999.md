# StackOverflow 问答 13032000-13032999

# html - Css3 响应式滑块自动化

> ID：13032001
> 
> 赞同：1
> 
> 时间：2012-10-23T13:50:34.763
> 
> 标签：html, css

我已经设置了一个仅使用 CSS3 的滑块，如此[处所述。](http://csscience.com/responsiveslidercss3/)

我的问题是，我已经看到了自动的 css3 动画，有没有办法让这个滑块自动旋转并且按钮仍然可以工作？

CSS看起来像这样：

```
/* Slider Setup */

input {
display: none;
}

#slide1:checked ~ #slides .inner { margin-left:0; }
#slide2:checked ~ #slides .inner { margin-left:-100%; }
#slide3:checked ~ #slides .inner { margin-left:-200%; }
#slide4:checked ~ #slides .inner { margin-left:-300%; }

#overflow {
width: 100%;
overflow: hidden;
}

#slides .inner {
width: 500%;
line-height: 0;
}

#slides article {
width: 20%;
float: left;
}

/* Slider Styling */

/* Control Setup */

#controls {
margin: -25% 0 0 0;
width: 100%;
height: 50px;
}

#controls label { 
display: none;
width: 50px;
height: 50px;
opacity: 0.3;
}

#active {
margin: 23% 0 0;
text-align: center;
}

#active label {
-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px;
display: inline-block;
width: 10px;
height: 10px;
background: #bbb;
}

#active label:hover {
background: #ccc;
border-color: #777 !important;
}

#controls label:hover {
opacity: 0.8;
}

#slide1:checked ~ #controls label:nth-child(2), 
#slide2:checked ~ #controls label:nth-child(3), 
#slide3:checked ~ #controls label:nth-child(4), 
#slide4:checked ~ #controls label:nth-child(1){
background: url('imgs/next.png') no-repeat;
float: right;
margin: 0 -70px 0 0;
display: block;
}

#slide1:checked ~ #controls label:nth-child(4),
#slide2:checked ~ #controls label:nth-child(1),
#slide3:checked ~ #controls label:nth-child(2),
#slide4:checked ~ #controls label:nth-child(3){
background: url('imgs/prev.png') no-repeat;
float: left;
margin: 0 0 0 -70px;
display: block;
}

#slide1:checked ~ #active label:nth-child(1),
#slide2:checked ~ #active label:nth-child(2),
#slide3:checked ~ #active label:nth-child(3),
#slide4:checked ~ #active label:nth-child(4) {
background: #333;
border-color: #333 !important;
}

/* Info Box */

.info {
line-height: 20px;
margin: 0 0 -150%;
position: absolute;
font-style: italic;
padding: 30px 30px;
opacity: 0;
color: #000;
text-align: left;
}

.info h3 {
color: #333;
margin: 0 0 5px;
font-weight: normal;
font-size: 22px;
font-style: normal;
}

/* Slider Styling */

/* Animation */

#slides .inner {
-webkit-transform: translateZ(0);
-webkit-transition: all 800ms cubic-bezier(0.770, 0.000, 0.175, 1.000); 
-moz-transition: all 800ms cubic-bezier(0.770, 0.000, 0.175, 1.000); 
-ms-transition: all 800ms cubic-bezier(0.770, 0.000, 0.175, 1.000); 
-o-transition: all 800ms cubic-bezier(0.770, 0.000, 0.175, 1.000); 
transition: all 800ms cubic-bezier(0.770, 0.000, 0.175, 1.000); /* easeInOutQuart */

-webkit-transition-timing-function: cubic-bezier(0.770, 0.000, 0.175, 1.000); 
-moz-transition-timing-function: cubic-bezier(0.770, 0.000, 0.175, 1.000); 
-ms-transition-timing-function: cubic-bezier(0.770, 0.000, 0.175, 1.000); 
-o-transition-timing-function: cubic-bezier(0.770, 0.000, 0.175, 1.000); 
transition-timing-function: cubic-bezier(0.770, 0.000, 0.175, 1.000); /* easeInOutQuart */
}

#slider {
-webkit-transform: translateZ(0);
-webkit-transition: all 0.5s ease-out;
-moz-transition: all 0.5s ease-out;
-o-transition: all 0.5s ease-out;
transition: all 0.5s ease-out;
}

#controls label{
-webkit-transform: translateZ(0);
-webkit-transition: opacity 0.2s ease-out;
-moz-transition: opacity 0.2s ease-out;
-o-transition: opacity 0.2s ease-out;
transition: opacity 0.2s ease-out;
}

#slide1:checked ~ #slides article:nth-child(1) .info,
#slide2:checked ~ #slides article:nth-child(2) .info,
#slide3:checked ~ #slides article:nth-child(3) .info,
#slide4:checked ~ #slides article:nth-child(4) .info{
opacity: 1;
-webkit-transition: all 1s ease-out 0.6s;
-moz-transition: all 1s ease-out 0.6s;
-o-transition: all 1s ease-out 0.6s;
transition: all 1s ease-out 0.6s;
}

.info, #controls, #slides, #active, #active label, .info h3, .desktop, .tablet, .mobile {
-webkit-transform: translateZ(0);
-webkit-transition: all 0.5s ease-out;
-moz-transition: all 0.5s ease-out;
-o-transition: all 0.5s ease-out;
transition: all 0.5s ease-out;
} 
```

基本上我有四个，作为我的幻灯片：

```
 <article >
                    <div class="info">                  
                        <div id="slideContent">
                            <div>
                                <h1></h1>
                                <h1 style="color:#ff9900;"><b></b></h1>
                            </div>
                            <div id="slideTxt"></div>
                            <div id="slideBtn"></div>
                        </div> 
                    </div>
                    <img src="imgs/slide background" />
                </article> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:29:49.460

尝试查看该页面的页面源。因为它主要是直接的 HTML，所以这是最好的起点。只需右键单击页面并点击“查看源代码”。你所需要的就在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:10:33.100

在环顾四周并尝试其他方法时，我发现 IE 不能很好地与较新的 css3 动画配合使用。因此，我将考虑使用 javascript 来执行此操作。

**编辑：所以我决定，因为 Jquery 是问题，只使用一些基本的 Javascript 并制作我自己的滑块。我喜欢这个 css 之一，因此只制作了一个小 JS，每 10 秒“假点击”一次滑块的按钮。**

```
 var labelNumber=1;
var flag = true;
function customSlideShow(){  
    if(flag){
        $("label[for='slide" + labelNumber + "']").trigger('click');
        labelNumber++;
        if (labelNumber==5){labelNumber=1;};
        setTimeout(customSlideShow, 10000);
    };} 
```

# websocket - Websocket 握手与 HAProxy 挂起

> ID：13032005
> 
> 赞同：5
> 
> 时间：2012-10-23T13:50:40.363
> 
> 标签：websocket, haproxy, sockjs

使用最新的 Chrome 浏览器，我正在尝试使用`sockjs`客户端与位于`haproxy`. 在我的本地主机上（没有`haproxy`中间），这工作正常 - 客户端可以使用`websocket`协议连接、发送和接收消息。例如：

```
conn.onopen = function() {
    if (conn.readyState === SockJS.OPEN) {
        conn.send("hello server");
        console.log("msg sent");
    }
}; 
```

一旦我将它部署到服务器上`HAProxy`，就会发生奇怪的事情，`sockjs`认为连接是打开的（如`conn.readyState === SockJS.OPEN`控制台日志中出现“发送的消息”），但是，`websocket`握手只是挂起，服务器永远不会收到消息。以下是我在`haproxy`日志中看到的内容：

```
Oct 23 09:08:25 localhost.localdomain haproxy[14121]: 129.xx.xxx.105:55000 [23/Oct/2012:09:08:24.459] public www/content 777/0/0/1/778 200 375 - - ---- 3/3/0/1/0 0/0 "GET /sockjs/info HTTP/1.1"
Oct 23 09:10:54 localhost.localdomain haproxy[14121]: 129.xx.xxx.105:55015 [23/Oct/2012:09:08:25.398] public www/content 0/0/0/1/149017 101 147 - - CD-- 4/4/0/0/0 0/0 "GET /sockjs/478/kyi342s8/websocket HTTP/1.1" 
```

请注意，第二个日志消息**仅在我关闭后端服务器时出现`haproxy`**。关机前，日志中没有错误，但是 websocket 握手没有完成，服务器也没有收到 msg。

使用 Chrome 的开发人员工具，在“网络”选项卡中，我看到以下内容：

```
Request URL:ws://www.mysite.com/sockjs/478/kyi342s8/websocket
Request Method:GET
Status Code:101 Switching Protocols

Request Headers
Connection:Upgrade
Host:www.mysite.com
Origin:http://www.mysite.com
Sec-WebSocket-Extensions:x-webkit-deflate-frame
Sec-WebSocket-Key:TFEIKYhlqWWBZKlXzXAuWQ==
Sec-WebSocket-Version:13
Upgrade:websocket
(Key3):00:00:00:00:00:00:00:00

Response Headers
Connection:Upgrade
Sec-WebSocket-Accept:D+s3va02KH6QTso24ywcdxcfDgM=
Upgrade:websocket
(Challenge Response):00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00 
```

并且对象的“类型”和“时间延迟”都在`websocket`开发人员工具的网络选项卡下显示“待定”。

最后，这是我的`haproxy`配置（版本 1.4.22）：

```
global
        log 127.0.0.1   local1 info
        log 127.0.0.1   local1 notice
        #log loghost    local0 info
        maxconn 4096
        chroot /usr/share/haproxy
        uid 99
        gid 99
        daemon
        #debug
        #quiet

defaults
        log             global
        mode            http
        option          httplog
        option          dontlognull
        retries         3
        option          redispatch
        maxconn         500
        timeout connect 6s

frontend public
        mode    http
        bind    *:80
        timeout client  300s
        option  http-server-close
        #option         http-pretend-keepalive
        # define ACLs
        acl host_static hdr_beg(host) -i static. data.
        acl host_www hdr_beg(host) -i www.
        acl url_static path_end .ico .txt .pdf .png .jpg .css .js .csv
        acl is_stats path_beg /haproxy/stats
        # define rules
        use_backend nginx if host_static or host_www url_static
        use_backend stats if is_stats
        default_backend www

backend nginx
        timeout server 20s
        server nginx 127.0.0.1:8484

backend stats
        stats enable
        stats uri /haproxy/stats

backend www
        timeout server 300s
        option forwardfor
        #no option httpclose
        option http-server-close
        server sockcontent 127.0.0.1:8080 
```

有谁知道为什么会这样？是由于某些`haproxy`配置，甚至是服务器的某些常规网络设置（例如`iptables`）吗？

PS 我试过启用`http-pretend-keepalive`in `haproxy`，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:07:53.957

就像@Joes 所说，这是防火墙行为不端的错误。有人说，例如 FortiGate 导致了这种情况。

更多讨论：[https ://github.com/sockjs/sockjs-client/issues/94](https://github.com/sockjs/sockjs-client/issues/94)

通过 SSL 服务 SockJS 似乎解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:36:29.107

我已经遇到过这种情况，我不记得它是什么服务器，但它并不完全符合 WebSocket 规范。实际上，它失败了，因为它在 Connection 标头中找到了“关闭”令牌以及“升级”令牌，而规范说需要“升级”令牌并且（幸运的是）不建议拒绝其他令牌。

理论上，如果您按照您的评论使用“选项 http-pretend-keep-alive”，它应该可以工作。至少它对我有用。但也许这里有一个不同的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T20:36:25.770

最有可能的是，您的网络中有透明的防火墙，它弄乱了到端口 80 的 websocket 连接。

要验证情况是否如此：

1.  让haproxy在不同的端口上监听并尝试它是否开始工作；
2.  尝试在您的网络之外访问您的服务。

如果它开始工作，那么您的网络有问题。

不幸的是，SockJS 在这种情况下不会使用回退传输，因为客户端认为它已连接，但连接并未真正建立。

作为可能的解决方案：让 haproxy 监听两个端口，端口 80 用于 Web 流量，不同端口用于 SockJS 流量。这保证了透明的 HTTP 代理不会干扰你的 websocket 连接。

# .net - ICSharp.texteditor 中的自定义语法突出显示

> ID：13032007
> 
> 赞同：0
> 
> 时间：2012-10-23T13:50:41.213
> 
> 标签：.net, vb.net, icsharpcode

我正在尝试制作语言 PAWN 的 IDE。

我在 C# 中使用 ICSharp 进行语法高亮。由于 PAWN 在 scintilla 中还没有，有人可以告诉我如何创建自定义语法突出显示吗？

以下是关键词

> assert char #assert const break defined #defined enum case sizeof #else forward continue state #elseif native default tagof #emit new do #endif operator else #endinput public exit #endscript static for #error stock goto #file if #if return #include sleep #line state #pragma switch #section while #tryinclude #undef

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:17:30.143

您应该首先检查 jEdit 是否支持该语言，

[http://www.lextm.com/2012/01/tritonmate-words-syntax-highlighting-for-smimib/](http://www.lextm.com/2012/01/tritonmate-words-syntax-highlighting-for-smimib/)

如果 jEdit 支持它，您可以轻松地将 jEdit 语法文件转换为 SharpDevelop TextEditor 期望的样式。

如果jEdit中没有的话，按照自己写也不是太难

[https://github.com/icsharpcode/SharpDevelop/wiki/Syntax-highlighting](https://github.com/icsharpcode/SharpDevelop/wiki/Syntax-highlighting)

# javascript - YAHOO.widget.RecordSet getRecord() 基于一个属性值

> ID：13032008
> 
> 赞同：0
> 
> 时间：2012-10-23T13:50:41.237
> 
> 标签：javascript, yui, extjs3, yui2

从 EXT 3.x（最高 v3.4）迁移到 YUI 2.x（最高 v2.9.0）javascript 开发 - 根据新项目的需要 - 在 YUI 中选择数据中的某个记录的替代方法是什么基于该记录的给定属性的值的表（相当于 EXT 中的网格面板）？在 EXT 中，可以使用以下内容：

```
new Ext.grid.GridPanel({...}).getStore( ).find(fieldName, value); 
```

在 YUI 中，YAHOO.widget.DataTable 类有一些自己的方法来检索记录实例（YAHOO.widget.Record）：getRecord()、getRecordIndex() 或检索整个记录集：getRecordSet() - YAHOO 的一个实例。 widget.RecordSet 类 - 并使用该类的一些方法来获取记录（getRecord()），但这些方法都不能根据一个属性的值检索记录。我有点惊讶 YUI 没有这个基本功能（它应该在 YAHOO.widget.RecordSet 类级别）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:15:28.207

恐怕没有这样的功能。您必须自己遍历 RecordSet 中的所有 Record 实例。在 YUI 的最新 2.9 版本中，Record、RecordSet 和 ScrollingDataTable 的 API 文档放错了位置，并且与 DOM 的 API 文档放在一起，这使得除非您只使用搜索框，否则很难找到。

# google-calendar-api - 从谷歌日历获取当天事件列表

> ID：13032011
> 
> 赞同：7
> 
> 时间：2012-10-23T13:50:55.810
> 
> 标签：google-calendar-api

我无法弄清楚如何获取特定日期的事件列表，无论它们是在当天还是之前开始并且还没有结束？

在此页面[https://developers.google.com/google-apps/calendar/v3/reference/events/list](https://developers.google.com/google-apps/calendar/v3/reference/events/list)我已经阅读了两个可选参数**timeMax** — 不包括上限值。开始事件时间和**timeMin**的界限——下限，包括。结束事件时间的界限。但问题是，**如何以正确的方式设置它们**以获取在**某一天**发生的**所有事件**，例如 2012-10-25

 **如果我是对的，timeMax='2012-10-25T23:59:59Z' - 给了我可能从 ? 到这个日期时间 timeMin='2012-10-25T23:59:59Z' - 给了我结束这个日期时间的事件

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-24T15:38:23.797

其实我觉得应该是这样的：

```
timeMin='2012-10-25T00:00:00Z' 
timeMax='2012-10-26T00:00:00Z' 
```

因为`timeMax`在您的示例中是排他性的，如果您碰巧在 25 日晚上 11:59:59 有一个日历事件，您将无法检索它（我知道很少见，但仍然可能）。

这就是我所做的，即使现在我遇到了检索日历事件的另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:12:13.427

对不起，timeMin 的设置是开界的，timeMax 的设置是在查找周期内的。将值设置为 timeMin='2012-10-25T00:00:01Z' 和 timeMax='2012-10-25T23:59:59Z' 将提供所需的输出。**

# r - 数据框列中大于零的 R 计数值

> ID：13032014
> 
> 赞同：2
> 
> 时间：2012-10-23T13:51:04.653
> 
> 标签：r, count, dataframe

我有数据框：

```
mat=data.frame(A=c(12,10,0,14,0,60),B=c(0,0,0,0,13,65)) 
```

问题是：如何过滤掉包含过多零的列 [例如 > 50%]？例如，必须删除 B 列。

最好用 nrow(mat) * 0.5 设置阈值，然后删除计数为零高于该阈值的列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T13:54:28.337

这是一种方法：

```
> mat <- data.frame(A=c(12,10,0,14,0,60),B=c(0,0,0,0,13,65))
> 
> keep <- (colSums(mat > 0) / nrow(mat)) > 0.5
> keep
    A     B 
 TRUE FALSE 
> 
> mat[, keep, drop = FALSE]
   A
1 12
2 10
3  0
4 14
5  0
6 60 
```

# c++ - 如何在c中实现一个类

> ID：13032015
> 
> 赞同：0
> 
> 时间：2012-10-23T13:51:04.377
> 
> 标签：c++, c

> **可能重复：**
> [你如何在 C 中实现一个类？](https://stackoverflow.com/questions/1403890/how-do-you-implement-a-class-in-c)

在我的测试中，我被告知我需要找到一种方法来在 C 中实现以下类

```
class A
{
    private:
      int a,b;
    public:
      void func1();
      int c,d;
    protected:
      int e,f;
      void fun();
}; 
```

C 编译器是否还支持访问说明符 private、public 和 protected 内部结构？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T13:51:53.007

C中没有类，只有结构。C++中有类。

也没有`private`：

```
struct A
{
   int a, b;
   int c, d;
   int e, f;
};

void func1( struct A* );

void fun( struct A* ); 
```

但一切都是公开的。

为了使事情更加封装，您将隐藏 struct A 的实际实现细节并仅显示带有公共方法的前向声明。

`protected`没有真正的意义，因为没有继承。您可以通过将您的细节或其功能暴露给某些内部模块来实现“友谊”，但友谊与受保护的不同，后者在 C 中根本不存在。

在您的课程中，您已经公开了两个成员，但是如果我们“隐藏”结构 A，我们会隐藏所有内容，因此请提供 getter 和 setter。

或者，我们可以“隐藏”结构的一部分，例如： struct A1;

```
struct A
{
   struct A1 * privatePart;
   int b, c;  // public part     
}; 
```

尽管它变得“混乱”，因为您必须开始分配私有部分（记住在 C 中没有智能指针或析构函数，因此您必须更加小心内存管理）。

许多 C API 为此使用的是一种命名约定，它们将“私有”变量称为“保留”，通常是 reserved1、reserved2 等。编译器不会阻止您向它们写入，但显然这样做需要您自担风险，并且意图很明显，您不应该访问这些成员（直接复制或类似的除外）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T14:17:32.290

这就是你在 C 中进行私有封装的方式。这个概念被称为不透明类型，或者更正式地说，不完整类型。

我的班级.h

```
typedef struct myclass myclass;

myclass* myclass_construct (void);

void     myclass_set_x (myclass* this, int x);
int      myclass_get_x (const myclass* this);

void     myclass_destruct (myclass* this); 
```

我的班级.c

```
#include "myclass.h"

struct myclass
{
    int x; // this is a private variable
};

myclass* myclass_construct (void)
{
    myclass* instance = malloc (sizeof(myclass));

    if(instance == NULL) { /* error handling */ }

    instance->x = 0;

    return instance; 
}

void myclass_set_x (myclass* this, int x)
{
    this->x = x;
}

int myclass_get_x (const myclass* this)
{
    return this->x;
}

void myclass_destruct (myclass* this)
{
    free(this);
}

static myclass_private_member (something_t s)
{
    // pure private function, do something internal here
} 
```

主程序

```
#include "myclass.h"

myclass* mc = myclass_construct();
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T14:05:45.327

C 不支持访问说明符，但是您可以使用仅在实现文件中定义的匿名结构来模拟它们的某些功能。

```
// foo.h
typedef struct Foo Foo;
Foo * FooAlloc(int bar);
void  FooFree(Foo *);

// foo.c
struct Foo {
    int bar;
};
Foo * FooAlloc(int bar){
    Foo * f = malloc(sizeof(*f));
    f->bar = bar;
    return f;
}
void FooFree(Foo * f){free(f);} 
```

struct Foo的`bar`成员只能被 foo.c 中的函数访问。缺点是您不能在堆栈上创建 Foo 。同样，您可以将定义放入单独的“foo_private.h”标头中以模拟受保护的访问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T13:55:31.010

C 中没有访问控制。否则，您可以通过自由函数来近似 C++ 类成员函数的一些功能：

```
struct A { int a, b, c, d, e, f; };

void A_func1(struct A * th) { /* use "th->a" etc. */ }
void A_fun(struct A * th) { /* ditto */ } 
```

用法：

```
struct A a;

A_func1(&a);
A_fun(&a); 
```

* * *

正如@CashCow 所说，您可以通过正确构建翻译单元来实现实现和接口的相当大的分离。例如：

**mylib.h：（**发货）

```
struct A;
void A_func1(struct A *); 
```

**mylib_secret_impl.c：（**只发送二进制文件！）

```
#include "mylib.h"

struct A { int a, b, c, d, e, f; };

void A_fun(struct A * th) { /* ... */ }
void A_func1(struct A * th) { /* use A_fun(th) and members of *th */ } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T14:24:20.557

即使没有语言支持，也有众所周知的方法可以在 C 中实现大部分功能。*您不能*手动做的一件事是区分私有和受保护。

```
/* Foo.h */
struct Foo {
    int c, d;
};

struct Foo* newFoo(); /* you can't create these on the stack */
void Foo_func1(struct Foo*); 
```

诀窍只是*隐藏*调用者不应访问的内容。与使用完全不透明的类型不同，我们可以选择直接公开公共成员而不需要函数调用。

```
/* Foo.c */
struct Foo_private {
    struct Foo pub;
    int a, b;
    int e, f; /* note I'm not distinguishing private */
};

struct Foo* newFoo()
{
    struct Foo_private *f = malloc(sizeof(*f))
    /* initialize */
    return &f->pub;
}

struct Foo_private* cast(Foo *f)
{
    /* can do cunning things with offsets for inheritance,
       but this is the easy case */
    return (Foo_private *)f;
}

void Foo_func1(Foo *f)
{
    struct Foo_private *fp = cast(f);
    /* access private members here */
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T14:02:19.980

类是 C++ 概念，而不是 C 概念。但是，您*可以*通过使用指针和 PIMPL 在 C 中实现一些 OO 设计功能。

以下是我将如何在 C 中实现一个类：

啊

```
 struct privateA;
   struct A {
     struct A_private* private;
     int c,d;
   };
   extern void A_func1(struct A*);
   extern struct A* A_new(); 
```

交流电

```
 struct A_private {
     int a,b;
     int e,f;
   };

   static struct A_private* A_private_new() {
     struct A_private_new* this = malloc(sizeof(struct A_private);
     this->a = 0;
     this->b = 0;
     this->e = 0;
     this->f = 0;
   }

   struct A* A_new() {
     struct A* this = malloc(sizeof (struct A));
     this->private = A_private_new();
     this->c = 0;
     this->d = 0;
   }

   void A_func1(struct A* this) { this->c = 12; }
   static void A_fun(struct A* this) { this->d = 7; } 
```

主.c：

```
#include "A.h"
int main () {
  struct A* a = A_new();
  A_func1(a);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-23T14:27:52.187

C 中没有类，但通过使用结构和函数，您可以在没有继承和多态的情况下执行基本过程。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-23T13:54:35.080

在结构中，您可以在函数上编写指针以模拟 C++ 类...

# php - 为什么类是字符串的实例？

> ID：13032018
> 
> 赞同：-3
> 
> 时间：2012-10-23T13:51:11.423
> 
> 标签：php

突然在 PHP 中遇到了这个问题：

```
<?php
  class MyClass{}; 
  $a=new MyClass(); 
  $b="MyClass"; 
  var_dump($a instanceof $b); 
```

结果：

```
bool(true) 
```

为什么这是真的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T13:54:25.417

检查[文档，示例 5](http://php.net/instanceof)：（强调我的）

> 尽管 instanceof 通常与文字类名一起使用，但它也可以与另一个对象或**字符串变量**一起使用：

```
$a = new MyClass;
var_dump($a instanceof $c); // $c is a string 'MyClass' 
```

结果：

```
bool(true) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T13:55:22.367

*尽管 instanceof 通常与文字类名一起使用，但它也可以与另一个对象或字符串变量一起使用*

[http://php.net/instanceof](http://php.net/instanceof)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T13:55:32.510

运算符可以使用`instanceof`类，也可以使用类名作为字符串。

> 尽管 instanceof 通常与文字类名一起使用，但它也可以与另一个对象或字符串变量一起使用

[http://php.net/manual/en/language.operators.type.php](http://php.net/manual/en/language.operators.type.php)

还有你发布的确切例子，所以我不知道你的来自哪里，但是......

# google-chrome - 单独的 div 标签在 Chrome 中附加在一起

> ID：13032022
> 
> 赞同：-1
> 
> 时间：2012-10-23T13:51:33.393
> 
> 标签：google-chrome, html

我需要帮助的网页位于[http://djdavid98.zymichost.com/.bio/](http://djdavid98.zymichost.com/.bio/)

我的问题是，正如您将能够在源代码中看到的那样，`div`我的页面上有 2 个：（
*注意“hu”和“en”属性，它们被 JS 使用）*

```
<div hu>
    - content -
    <table>
        <tr><td>- stuff -</td></tr>
    </table>
</div>

<div style="display:none;" en>
    - content -
    <table>
        <tr><td>- stuff -</td></tr>
    </table>
</div> 
```

这是我使用的 JS。jQuery：

```
//readCookie() is a different function for reading a cookie that was set before. 

if (readCookie('lang') == "en"){
    $('*[hu]').hide()
    $('*[en]').show()
} 
```

因此，如果`lang`cookie 的值设置为`en`，它将隐藏任何具有该`hu`属性的内容，并显示任何具有该`en`属性的内容。

当我检查**谷歌浏览器如何加载**页面内容时，问题就出现了：（
*第二个`div`被附加到第一个，当第一个被隐藏时，第二个也不会显示）*

```
<div style="display:none;" hu>
    - content -
    <table>
        <tr><td>- stuff -</td></tr>
    </table>

    <div en>
        - content -
        <table>
            <tr><td>- stuff -</td></tr>
        </table>
    </div>
</div> 
```

我尝试将第一个 div 更改为`span`，与第二个相同，但都没有解决合并问题。我猜这与表格有关，因为页面的其他部分不受此问题的影响。

那么，我该如何解决这个问题？

注意：在页面上，可以使用JS控制台设置cookies，使用createCookie('lang',['en'|'hu'],2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:12:01.973

您尚未关闭`table`HTML 源代码中的 -tags - 但您已将其发布在上方且没有错误。下次请将页面中的代码粘贴到问题中……</p>

查看源：http://djdavid98.zymichost.com/.bio/

```
<table>
    <!-- … ->
<table>
<div id="contact"> 
```

# python - Python PIL CGM 支持

> ID：13032028
> 
> 赞同：2
> 
> 时间：2012-10-23T13:51:49.993
> 
> 标签：python, python-imaging-library

使用 Python读取[CGM 格式](http://en.wikipedia.org/wiki/Computer_Graphics_Metafile)文件的最佳方法是什么？PIL 似乎不支持它。

# c++ - boost::asio tcp 数据库服务器

> ID：13032030
> 
> 赞同：2
> 
> 时间：2012-10-23T13:51:52.943
> 
> 标签：c++, database, sqlite, tcp, boost-asio

我需要一些提示：我正在编写一个 tcp 数据库服务器，它可以容纳 100 个字符串（我使用字符串向量来保存数据）。到目前为止，我实现的基本功能是：

客户端发送：PUT "index" "value" - 字符串被放入向量[index]。
客户端发送：GET "index" - vector[index] 被发送到客户端

我的工作基于 boost::asio 异步回显服务器示例 [http://www.boost.org/doc/libs/1_39_0/doc/html/boost_asio/example/echo/async_tcp_echo_server.cpp](http://www.boost.org/doc/libs/1_39_0/doc/html/boost_asio/example/echo/async_tcp_echo_server.cpp)

现在，我想将服务器的功能扩展到：

**仍然未解决**1\. 能够在启动时从文件加载向量的起始内容并在退出时保存。

**已解决**2\. 在数据库元素上设置计时器：vector[index] 中字符串的生存期应为 30 秒，如果在输入的 30 秒内，新数据未到达 vector[index]，则应删除内容。

剩下的唯一问题是在退出/启动时保存/加载矢量数据。由于该向量仅包含 100 个字符串，因此我可以使用 fstream 简单地读取/写入，但触发保存时遇到问题。

我的异步服务器的主要功能包含： io_service.run(); 如何在运行服务器期间通过按键触发操作？我的第一个猜测是来自用户输入的 async_read，如[http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/example/chat/posix_chat_client.cpp](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/example/chat/posix_chat_client.cpp)示例。还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:54:06.850

我将通过保存带有该值的时间戳来实现计时器，并在查找时检查条目是否已过期。如果没有人询问条目是否仍然有效，则无需使用计时器唤醒 CPU。

此外，只要您在网络代码和数据库实现之间有适当的抽象，您就可以使您的数据库适应最合适的任何内容。如果有最大数量的条目并且它们都适合内存，那么无论如何 a`vector`都很好，而 SQLite 可能是矫枉过正的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:57:23.130

使用[Redis](http://redis.io/)或[Memcached](http://memcached.org/)，因为它们已经拥有宝贵的生存时间。两者都有 C++ 驱动程序。

# c# - 蓝牙 Obex 使用 brecham.obex 上传和下载文件夹

> ID：13032031
> 
> 赞同：1
> 
> 时间：2012-10-23T13:51:54.183
> 
> 标签：c#, obex

我已经看到了许多示例如何使用 brecham.obex 上传和下载文件，并且我能够做到这一点，但我的问题是，使用 brecham.obex，我可以上传或下载文件夹而不是仅文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:54:34.673

您只需列出文件夹/文件夹中的文件并单独上传/下载每个文件。OBEX 中没有其他功能可用于此目的。

# sitecore - 在 sitecore 6.5 中向现有项目添加工作流

> ID：13032040
> 
> 赞同：4
> 
> 时间：2012-10-23T13:52:16.810
> 
> 标签：sitecore, sitecore-workflow

我正在尝试在 sitecore 6.5 中设置工作流程。我可以让工作流在从模板创建的新数据项上正常运行，但是每次我转到创建工作流之前存在的数据项时，功能区栏都会告诉我“该项目当前不是工作流的一部分”。

我已经在默认工作流字段和数据项的工作流字段中添加了我想要设置的工作流，但仍然没有应用工作流。

我不确定如何将新创建的工作流应用于现有数据项。这在 sitecore 6.5 中可行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T05:26:41.120

好的..所以这一切的关键是出版。

*   在标准值上设置默认工作流对已经属于工作流一部分的项目没有影响。这样做只会更改现有项目的“默认工作流程”字段，但对已创建项目的影响为零

    *   如果您要添加工作流的内容当前不是工作流的一部分并且该内容当前已发布，则更改模板标准值上的工作流也没有效果。原因是这是已发布的内容，如果要在已发布时将其放入工作流中，它将取消发布。坏消息。

    *   您不应该在模板标准值上设置工作流和工作流状态......永远。你没有必要这样做，正如你所看到的，它会产生意想不到的后果，起初没有意义。

这是你需要做的。您只需在模板标准值上设置默认工作流程。现在..如果您有当前已发布的内容，您只需要创建一个新版本（如果您在 web.config 中设置了它应该自动为您的内容作者执行此操作...它不会如果您是管理员，请不要为您执行此操作，因为您可以编辑已发布的内容），只要他们尝试编辑项目。只要“默认工作流程”字段在创建项目的新版本时仍设置为“标准值”，它就会根据您的默认工作流程中的内容将新版本放入工作流程中。

# windows - node.js 和命令行 (cmd.exe)

> ID：13032044
> 
> 赞同：4
> 
> 时间：2012-10-23T13:52:26.750
> 
> 标签：windows, node.js, cmd

我正在寻找从 node.js 应用程序调用 Windows 命令行的解决方案或 NPM。

我想要的是调用一些批处理文件并在带有 node.js 的机器上运行它们，当然还有参数并读取它们的输出。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T13:59:08.757

您可以为此使用标准模块[child_process.spawn()](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)。

从文档示例中：

```
var spawn = require('child_process').spawn,
    ls    = spawn('ls', ['-lh', '/usr']);

ls.stdout.on('data', function (data) {
  console.log('stdout: ' + data);
});

ls.stderr.on('data', function (data) {
  console.log('stderr: ' + data);
});

ls.on('exit', function (code) {
  console.log('child process exited with code ' + code);
}); 
```

替换`'ls'`为`'c:/windows/system32/cmd.exe'`和`['-lh', '/usr']`以`['/c', 'batfile.bat']`运行批处理文件`batfile.bat`。

# xml - 是否可以从 DOM 中获取所有处理指令元素

> ID：13032046
> 
> 赞同：1
> 
> 时间：2012-10-23T13:52:28.857
> 
> 标签：xml, node.js, dom, xmldom, processing-instruction

我有一个 XML 文件，其中包含`<?myinst contents ?>`. 如果可能的话，我需要使用单个 DOM 查询将它们全部放在一个集合中。如果不遍历所有树，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:23:32.510

您必须使用 xml-dom 遍历树。您指向的实现实际上甚至对 getElementByID 或其他选择器方法都使用了完全迭代。更好的实现将使用 tagName 和 id 缓存......如果您的目标是全层兼容性（浏览器和 nodejs 代码通用性），那么您根本没有其他选项，然后是基于递归的过滤器，就像这样。

```
function _visitNode(node,callback){
    if(callback(node)){
        return true;
    }
    if(node = node.firstChild){
        do{
            if(_visitNode(node,callback)){return true}
        }while(node=node.nextSibling)
    }
}

function getPIs(rootNode){
  var ls = [];
  _visitNode(rootNode, function(node){
     if(node !== rootNode && node.nodeType == 7) {
       ls.push(node);
       return true;
     }
   });
   return ls;
} 
```

我们使用 libxmljs 和 xslt 来选择东西，但对于 PI，这可能是一种矫枉过正...... HTH

# facebook - 图像数组的“源”字段是持久的，还是会改变？

> ID：13032052
> 
> 赞同：2
> 
> 时间：2012-10-23T13:52:38.497
> 
> 标签：facebook, image, facebook-graph-api, photo

有谁知道照片的**图像数组中的****源**字段是否是持久的？似乎它是指向 FB CDN 的动态 - 我们试图确定在我们的数据库中缓存这些链接是否安全，或者在我们加载照片之前是否应该始终重新查询照片？它们会随着时间而改变吗？语言环境？

 **```
"images": [
            {
               "height": 1152,
               "width": 2048,
               "source": "http://sphotos-d.ak.fbcdn.net/hphotos-ak-ash4/s2048x2048/394054_352972968053308_1128645961_n.jpg"
            }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:55:01.353

是的..这是一个 CDN 托管的图像。URL 可能会根据服务器负载和用户位置而改变。我不建议缓存这些 URL。**

# jquery - jQuery/regex 未能通过 selenium IDE 测试

> ID：13032055
> 
> 赞同：0
> 
> 时间：2012-10-23T13:52:48.357
> 
> 标签：jquery, regex, selenium, selenium-ide

我有一些必须通过 Selenium 测试的 jQuery 验证代码。但是，每次我运行测试时，不同的失败和不同的通过。例如，在一次测试中，密码太短会失败，密码太长会通过。但是，如果我重新运行测试，可能会发生相反的情况！

这是正则表达式：

```
var password = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*(_|[-+_!@#$%^&*.,?])).{6,20}$/; 
```

这是jQuery：

```
if($('#password').val() ==""){
$('#passwordErrorMsg').text("Your password must be between 6 and 20 characters. It must contain a mixture of upper and lower case letters, and at least one number or symbol.");  
}        
else if(password.test($('#password').val())){      
$('#passwordErrorMsg').text("OK");
}    
else($('#passwordErrorMsg').text("Your password must be between 6 and 20 characters. It must contain a mixture of upper and lower case letters, and at least one number or symbol."));
}); 
```

通过 Selenium 测试的任何帮助都会有所帮助和感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:08:44.840

```
/^((?<lowerCase>[a-z])|(?<upperCase>[A-Z])|(?<numberOrSymbol>[0-9+_!@#$%^&*.,?-])){6,20}(?(lowerCase)|(?!))(?(upperCase)|(?!))(?(numberOrSymbol)|(?!))$/ 
```

从行首开始。

取小写字母、大写字母或 NumberOrSymbol 的 6-20 次，同时计算每种类型的出现次数。

验证每种类型至少出现一次。

验证我们是否在行尾。

关于问题中出现的正则表达式的注意事项：它验证是否存在所需的符号，但它不要求 pwd 中的所有字符都属于“指定”类之一，例如它会接受字符串“aA3@\\ \"，作者可能不打算将其作为可接受的密码。

# c# - 如何让 nunit-console 在 \bin\Debug\ 而不是 \bin\x86\Debug 中查找程序集？

> ID：13032056
> 
> 赞同：4
> 
> 时间：2012-10-23T13:52:49.200
> 
> 标签：c#, .net, unit-testing, nunit

我正在尝试设置构建机器并希望从批处理脚本运行 nunit（在几个相对较大且动态的解决方案上）。我运行了以下命令行

```
"C:\Program Files (x86)\NUnit 2.6.1\bin\nunit-console-x86.exe" "C:\MySolutionPath\MySolution.sln"
"C:\Program Files (x86)\NUnit 2.6.1\bin\nunit-console.exe" "C:\MySolutionPath\MySolution.sln" 
```

两者都给出了 System.IO.DirectoryNotFoundException：

```
NUnit-Console version 2.6.1.12217
Copyright (C) 2002-2012 Charlie Poole.
Copyright (C) 2002-2004 James W. Newkirk, Michael C. Two, Alexei A. Vorontsov.
Copyright (C) 2000-2002 Philip Craig.
All Rights Reserved.

Runtime Environment -
   OS Version: Microsoft Windows NT 6.1.7601 Service Pack 1
  CLR Version: 2.0.50727.5456 ( Net 3.5 )

ProcessModel: Default    DomainUsage: Default
Execution Runtime: net-3.5
Unhandled Exception:
System.IO.DirectoryNotFoundException: Could not find a part of the path 'C:\MyProjectPath\bin\x86\Debug\MyAssembly.dll'.
   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean
 useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, St
ring msgPath, Boolean bFromProxy)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access)
   at NUnit.Core.AssemblyReader.CalcHeaderOffsets()
   at NUnit.Core.AssemblyReader..ctor(String assemblyPath)
   at NUnit.Util.RuntimeFrameworkSelector.SelectRuntimeFramework(TestPackage package)
   at NUnit.Util.DefaultTestRunnerFactory.GetTargetProcessModel(TestPackage package)
   at NUnit.Util.DefaultTestRunnerFactory.MakeTestRunner(TestPackage package)
   at NUnit.ConsoleRunner.ConsoleUi.Execute(ConsoleOptions options)
   at NUnit.ConsoleRunner.Runner.Main(String[] args) 
```

对我来说，它看起来像是在错误的文件夹中查找：

```
C:\MyProjectPath\bin\x86\Debug\MyAssembly.dll 
```

应该

```
C:\MyProjectPath\bin\Debug\MyAssembly.dll 
```

有没有办法在 NUnit 中指定这个（或者如果必须在解决方案中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:55:47.450

您可以将测试程序集路径作为参数而不是解决方案文件传递：

```
"C:\Program Files (x86)\NUnit 2.6.1\bin\nunit-console-x86.exe" "C:\MyProjectPath\bin\Debug\MyAssembly.dll" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:31:57.367

不知道这是否可以做到，但我认为大多数构建服务器都可以为您做到这一点。[TeamCity 可以做到这一点](http://confluence.jetbrains.net/display/TCD7/NUnit)，我相信其他人也可以。TeamCity 很棒而且免费（有一定的项目限制）。

# bash - 将多个字幕自动转换为视频 mp4 容器文件的 Bash 脚本

> ID：13032059
> 
> 赞同：2
> 
> 时间：2012-10-23T13:52:55.157
> 
> 标签：bash, find

首先——我不是程序员或脚本编写者——这正是我这几天一直在玩的东西。

我有一个包含 mp4 视频文件和 srt 字幕文件的文件夹。我已经使用 mencoder 和 handbrake 手动重新编码，将字幕硬编码到视频文件中。

```
mencoder -oac pcm -ovc raw -sub NAMEOFVIDEO.sub -utf8 -o NAMEOFVIDEO_SRT NAMEOFVIDEO.mp4 
```

这很好用，是我正在寻找的。所以我所拥有的是这个 /working 目录，其中包含多个 .srt 和 .mp4 （每天可能有 2 或 3 个新视频和 srt 文件）

如果只有 1 个 .srt 和 1 个 .mp4 文件，我可以管理但是我试图弄清楚如果我有 2 或 3 个不同的 srt 和 mp4 文件作为 mencoder，我如何创建一个可以运行 mencoder 命令的 Bash 脚本行必须使用正确的相应 srt 文件和 mp4 文件组合运行。

我能想到的只是`mp4_file= find \working -type f -name "*.mp4" | head -1`找到第一个结果.mp4

`srt_file = find \working -type f -name "*.srt" | head -1`找到第一个结果 .srt （幸运的是它是相同的基本名称文件）

然后通过 mencoder 命令运行变量，`mencoder -oac pcm -ovc raw -sub $srt_file -utf8 -o $mp4_file-SRT $mp4_file`但正如我所说，如果有超过 1 个文件组合（可能是一个循环），那么我必须坚持输出`HandBrakeCLI --preset "High Profile" -i $mp4_file-SRT -o $mp4_file`

这太可怕了，我错过了一些更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:26:00.907

如果它总是相同的基本名称，你可以用`find`一个循环来做到这一点：

```
find /working -type f -name '*.mp4' | while read mp4; do
    b=`basename $mp4 .mp4`
    d=`dirname $mp4`
    mencoder -oac pcm -ovc raw -sub $d/$b.sub -utf8 -o $mp4-SRT $mp4
done 
```

如果 mp4 和子文件有不同的名称或位于不同的目录中，这当然行不通。

# android - 从 Activity 中启动广播接收器

> ID：13032063
> 
> 赞同：0
> 
> 时间：2012-10-23T13:53:03.793
> 
> 标签：android, android-activity, broadcastreceiver

我已经阅读了大多数关于这个问题的帖子，但仍然无法让我的实现工作，你能帮忙吗？

基本上我想从一个活动中启动一个广播接收器，每 10 秒做一次。所以我设置了警报，但代码实际上从未到达“onReceive（）”......我的代码与其他示例没有任何区别，你能看看吗？

还要提一下，我没有在清单文件中放置接收器，因为我知道不需要它，因为我在活动中注册了它。

谢谢！

```
package alarm.in;

import alarm.in.activity.R;
import android.app.Activity;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.os.PowerManager;
import android.util.Log;
import android.view.View;
import android.widget.TextView;

public class activityActivity extends Activity {

    private Alarm alarm;  

    private static final String TAG = "AlarmInActivity";
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        alarm = new Alarm();           
    }

    public void onResume() {
        super.onResume();
        IntentFilter filter = new IntentFilter();
        filter.addAction(ALARM_SERVICE);
        registerReceiver(alarm, filter);
    }

    public void onPause() {
        super.onPause();
        this.unregisterReceiver(alarm);
    }

    public void setAlarm(View view){
        alarm.SetAlarm(getBaseContext(),1,10);             
    }

    public void cancelAlarm(View view){     
        alarm.CancelAlarm(getBaseContext());                    
    }

    private class Alarm extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {
            PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
            PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "");
            wl.acquire();

            Log.d(TAG, "Alarm Worked!");     
            wl.release();
        }

        public void SetAlarm(Context context, int minutes, int seconds)
         {
             AlarmManager am=(AlarmManager)context.getSystemService(ALARM_SERVICE);

             Intent i = new Intent(context, Alarm.class);
             PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);
             am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 1000 * seconds * minutes, pi); // Millisec * Second * Minute
             Log.d(TAG, "AlarmSet");         
         }

         public void CancelAlarm(Context context)
         {
             Intent intent = new Intent(context, Alarm.class);
             PendingIntent sender = PendingIntent.getBroadcast(context, 0, intent, 0);
             AlarmManager alarmManager = (AlarmManager) context.getSystemService(ALARM_SERVICE);
             alarmManager.cancel(sender);
             Log.d(TAG, "AlarmCancel");    
         }

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T13:59:51.563

您注册了您的接收器，但忘记将操作发送给接收器：

```
Intent intent = new Intent(ALARM_SERVICE);
sendBroadcast(intent); 
```

# vbscript - VBS 脚本错误

> ID：13032065
> 
> 赞同：0
> 
> 时间：2012-10-23T13:53:06.610
> 
> 标签：vbscript

当我尝试运行我的 vbs 脚本时出现此错误，

> 对象不支持此属性或方法

我的vbs代码是

```
Rem -- This example will show you how to create a very simple runonce configuration.

Rem -- Get current path of this script.
Set fso = CreateObject("Scripting.FileSystemObject")
currentdir = fso.GetAbsolutePathName(".")

Rem -- Read the info xml
Set xmldom = CreateObject("MSXML.DOMDocument")
xmldom.Load("c:\Montupet\PDF" & "\info.xml")

Rem -- Get the program id of the automation object.
progid = xmldom.SelectSingleNode("/xml/progid").text

Rem -- Create the COM object to control the printer.
set obj = CreateObject(progid)

Rem -- Get the default printer name.
Rem -- You can override this setting to specify a specific printer.
printername = "PDF Writer - bioPDF" 

runonce = obj.GetSettingsFileName(true)
              ^
              Error here

set oArgs=wscript.Arguments 

Rem -- Print all the files in the 'in' folder

dim file_name, template
dim command_line_args

set command_line_args = wscript.Arguments

'Check if any Arguments have been passed to our script. 
if command_line_args.count > 0 then
file_name = command_line_args(0)
template = command_line_args(1)

Set oWd = CreateObject("Word.Application")
oWd.Visible = False
wordname = """" & "c:\MTMS\MTMSPRT\" & file_name & """"
    wscript.echo wordname
Set oDoc = oWd.Documents.Open(wordname)
    Set oPS = oDoc.PageSetup 

    ' Reduce the margins to .5" (36 points) 
oPS.LeftMargin = 8.4 
    oPS.RightMargin = 0.2 

'Save changes to doc on closing and quit Word
oDoc.Saveas wordname , 0
wscript.echo "Saved"
oDoc.Close
wscript.echo "close"
oWd.Quit
wscript.echo "Quit"
Set oWd = Nothing
Set objShell = Nothing

wscript.echo "Cleared Word"
Set oWd = Nothing
Set objShell = Nothing

output = "c:\MTMS\MTMSPRT\PDFs\" & Replace(ucase(file_name), "DOC", "") & "PDF"

Rem -- Set the values
obj.Init
obj.SetValue "Output", output
obj.SetValue "ShowSettings", "never"
obj.SetValue "ShowPDF", "no"
obj.SetValue "ShowProgress", "no"
obj.SetValue "ShowProgressFinished", "no"
obj.SetValue "SuppressErrors", "no"
obj.SetValue "ConfirmOverwrite", "no"
obj.SetValue "superimpose", template

Rem -- Write settings to the runonce-Invoice.ini
obj.WriteSettings True
wscript.echo "runonce created"
Rem -- Print the document
printfile = "c:\MTMS\MTMSPRT\" & file_name
cmd = """" & "c:\Montupet\PDF\printto.exe"" """ & printfile & """ """ &     printername & """"
wscript.echo "printfile line setup" 
Set WshShell = WScript.CreateObject("WScript.Shell")
ret = WshShell.Run(cmd, 1, true)
wscript.echo "shell run start"
Rem -- Wait until the runonce is removed.
Rem -- When the runonce is removed it means that the gui.exe program 
rem -- has picked up the print job and is ready for the next.
While fso.fileexists(runonce)
wscript.echo "checking for runonce"
    Rem -- Wait for some milliseconds before testing again
    wscript.sleep 100
Wend
wscript.echo "runonce gone"
end if

Rem -- Dispose the printer control object
set obj = Nothing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:05:31.650

从[这篇 VB6 的博客文章](http://www.biopdf.com/guide/examples/vb6/)来看，

```
runonce = obj.GetSettingsFileName(true) 
```

应该改为

```
runonce = obj.GetSettingsFilePath(true) 
```

BioPDF 网站有一个[参考资料](http://www.biopdf.com/guide/dotnet/chm/html/AllMembers_T_bioPDF_PdfWriter_PdfSettings.htm)，可能会有所帮助。

# connection - 我需要关闭 Apache HTTPAsyncClient 中的过期连接吗？

> ID：13032070
> 
> 赞同：5
> 
> 时间：2012-10-23T13:53:30.440
> 
> 标签：connection, apache-httpcomponents

我是否需要像使用 HttpClient 一样关闭 Apache HttpAsyncClient 中的过期连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:44:26.527

我只是仔细检查了源代码。是的，仍然必须从池中明确驱逐过期的连接。*但是*，底层的 NIO 通道和套接字将立即关闭并释放。过期连接不会自动从池中逐出的问题是 HttpAsyncClient 4.0 beta3 中的一个错误。随意为这个缺陷提出一个 JIRA。

# javascript - 在 JavaScript 正则表达式中将可选组与前瞻匹配

> ID：13032074
> 
> 赞同：2
> 
> 时间：2012-10-23T13:53:36.733
> 
> 标签：javascript, regex, regex-greedy, regex-lookarounds

我正在尝试使用正则表达式解决字符串匹配问题。我需要匹配这种形式的 URL：

```
http://soundcloud.com/okapi23/dont-turn-your-back/ 
```

我需要“拒绝”这种形式的 URL：

```
http://soundcloud.com/okapi23/sets/happily-reversed/ 
```

尾随的“/”显然是可选的。

所以基本上：

*   在主机名之后，可以有 2 或 3 个组，如果在第二个中等于 *"sets"*，则正则表达式不应匹配。
*   *"sets"*可以包含在 URL 中的任何其他位置
*   *"sets"*需要完全匹配

到目前为止，我想出的是`http(s)?://(www\.)?soundcloud\.com/.+/(?!sets)\b(/.+)?`，失败了。

有什么建议么？是否有任何库可以简化任务（例如，使斜杠可选）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T15:32:42.803

假设 OP 想要测试给定的字符串是否包含满足以下要求的 URL：

*   URL 方案必须是`http:`或`https:`。
*   URL 权限必须是`//soundcloud.com`或`//www.soundcloud.com`。
*   URL 路径必须存在并且必须包含 2 或 3 个路径段。
*   第二个路径段不能是：`"sets"`。
*   每个路径段必须由一个或多个仅由字母数字字符 ( `[A-Za-z0-9]`) 组成的“单词”组成，并且多个单词由一个短划线或下划线分隔。
*   URL 必须没有查询或片段组件。
*   URL 路径可能以可选的`"/"`.
*   URL 应该不区分大小写。

这是一个经过测试的 JavaScript 函数（带有完全注释的正则表达式），它可以解决问题：

```
function isValidCustomUrl(text) {
    /* Here is the regex commented in free-spacing mode:
    # Match specific URL having non-"sets" 2nd path segment.
    ^                          # Anchor to start of string.
    https?:                    # URL Scheme (http or https).
    //                         # Begin URL Authority.
    (?:www\.)?                 # Optional www subdomain.
    soundcloud\.com            # URL DNS domain.
    /                          # 1st path segment (can be: "sets").
    [A-Za-z0-9]+               # 1st word-portion (required).
    (?:                        # Zero or more extra word portions.
      [-_]                     # only if separated by one - or _.
      [A-Za-z0-9]+             # Additional word-portion.
    )*                         # Zero or more extra word portions.
    (?!/sets(?:/|$))           # Assert 2nd segment not "sets".
    (?:                        # 2nd and 3rd path segments.
      /                        # Additional path segment.
      [A-Za-z0-9]+             # 1st word-portion.
      (?:                      # Zero or more extra word portions.
        [-_]                   # only if separated by one - or _.
        [A-Za-z0-9]+           # Additional word-portion.
      )*                       # Zero or more extra word portions.
    ){1,2}                     # 2nd path segment required, 3rd optional.
    /?                         # URL may end with optional /.
    $                          # Anchor to end of string.
    */
    // Same regex in javascript syntax:
    var re = /^https?:\/\/(?:www\.)?soundcloud\.com\/[A-Za-z0-9]+(?:[-_][A-Za-z0-9]+)*(?!\/sets(?:\/|$))(?:\/[A-Za-z0-9]+(?:[-_][A-Za-z0-9]+)*){1,2}\/?$/i;
    if (re.test(text)) return true;
    return false;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T13:57:47.693

而不是`.`使用`[a-zA-Z][\w-]*` 这意味着“匹配一个字母后跟任意数量的字母、数字、下划线或连字符”。

```
^https?://(www\.)?soundcloud\.com/[a-zA-Z][\w-]*/(?!sets(/|$))[a-zA-Z][\ w-]*(/[a-zA-Z][\w-]*)?/?$

```

要获取可选的尾部斜杠，请使用`/?$`.

在 Javascript 正则表达式文字中，所有正斜杠都必须转义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T14:17:35.937

我建议你使用正则表达式模式

```
^https?:\/\/soundcloud\.com(?!\/[^\/]+\/sets(?:\/|$))(?:\/[^\/]+){2,3}\/?$ 
```

# asp.net - 锚标签在 Safari、Chrome、Firefox 中不起作用

> ID：13032091
> 
> 赞同：0
> 
> 时间：2012-10-23T13:54:19.377
> 
> 标签：asp.net

我有一个自定义锚创建功能

```
public static Anchor Create(string name, object variant)
{
    return new Anchor(string.Format("{0}{1}", (name.StartsWith("#") ? name : string.Format("#{0}", name)), variant).Replace(' ', '_'));
}

public static Anchor Create(string name)
{
    return Create(name, string.Empty);
} 
```

这会在网页上创建锚标记。以下是`.ascx`控件上的调用

```
<asp:DataList ID="_meterLinkBar" runat="server" RepeatDirection="Horizontal" CssClass="bodytext4" RepeatLayout="Flow">
<ItemTemplate>
   <a href='<%# Anchor.Create("Meter", Container.ItemIndex + 1) %>' title='<%#  Eval("Name", "{0} measurement results") %>'>
  <%# FormatMeterName(Eval("Name") as string, Container.ItemIndex) %></a>
</ItemTemplate>

<SeparatorTemplate>|</SeparatorTemplate>
<FooterTemplate>
    <hr style="height: 1px; border-width: 0; color: #006690; background-color: #006690;" />
</FooterTemplate>
</asp:DataList> 
```

以下是带有锚标签的实际项目

```
<ItemTemplate>
<a id='<%# Anchor.Create("Meter", Container.ItemIndex + 1) %>'></a>
....
</ItemTemplate> 
```

**编辑**

这是 toString 方法

```
public override string ToString()
{
    return _name;
} 
```

下面是构造函数

```
private Anchor(string name)
{
    _name = name;
} 
```

现在一切都在 IE 中运行，但在其他浏览器中，链接可以正确呈现，但实际的锚标记本身显示为 ##whatever

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:06:10.443

理想情况下，我们可能还需要查看生成的 HTML。听起来你得到了两个 # `href="##name"`。如果是这种情况，那么 Anchor 的 .toString() 方法可能还会在锚名称之前添加 #。所以，在这种情况下，如果它在 IE 中工作，那是因为 IE 忽略了重复，而其他浏览器没有忽略它。

检查 .toString() 方法并查看其中的内容。如果它还添加了 #，那么您需要像这样更改代码：

```
public static Anchor Create(string name, object variant)
{
    return new Anchor(string.Format("{0}{1}", 
        (name.StartsWith("#") ? name.Replace('#','') : name),
        variant).Replace(' ', '_'));

} 
```

**编辑**

啊，我傻了。我刚刚意识到，您将其放入`<a>`标签的“ID”中。您不要将# 放入ID 中。您只需将其放入`href="#Meter"`, 例如

```
<a id='Meter' name='Meter'></a>

<a href='#Meter'>Go back to Meter</a> 
```

如果您的 id='#Meter'，那么这会导致问题。

# cakephp - 未使用 CakePHP 保存关系 hasMany 关系

> ID：13032101
> 
> 赞同：0
> 
> 时间：2012-10-23T13:54:37.007
> 
> 标签：cakephp, model

我有两个模型：`Event`和`Venue`. 一个 Event 属于一个 Venue，一个 Venue 可以有多个 Event。我正在尝试使用一个表单同时保存一个事件和场地。这是我到目前为止在我的控制器中所拥有的：

```
public function add() {
    if ($this->request->is('post')) {
        if ($this->Event->saveAll($this->request->data)) {
            $this->Session->setFlash('Event successfully saved');
        }
    }
} 
```

这是我的表格：

```
<?php
    echo $this->Form->create('Event');
    echo $this->Form->inputs(array(
        'legend' => 'Event Details',
        'Event.date',
        'Event.title'
    ));
    echo $this->Form->inputs(array(
        'legend' => 'Venue Details',
        'Venue.name',
        'Venue.street_address',
        'Venue.locality' => array('label' => 'Town/city'),
        'Venue.postal_code'
    ));
    echo $this->Form->end('Save Event');
?> 
```

很简单。

现在，`Event`和`Venue`记录都已创建。但是`venue_id`在我的`events`表中是零；它没有设置为新创建的 Venue 的 ID。我该如何纠正这个问题？我敢肯定这很简单！

**编辑：**我的`Event`模型：

```
<?php
class Event extends AppModel {

    public $name = 'Event';
    public $actsAs = array(
        'Containable'
    );
    public $belongsTo = array(
        'Venue'
    );
} 
```

我的`Venue`模型：

```
<?php
class Venue extends AppModel {
    public $name = 'Venue';
    public $hasMany = array(
        'Event'
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:37:18.793

似乎我需要`array('deep' => true)`在使用该`saveAll()`方法时使用。

```
if ($this->Event->saveAll($this->request->data, array('deep' => true))) {
    $this->Session->setFlash('Event successfully saved');
} 
```

感谢所有仍然发表评论的人。

# c# - 加密文件会附加最后一个

> ID：13032107
> 
> 赞同：0
> 
> 时间：2012-10-23T13:55:06.140
> 
> 标签：c#, .net, xml, encryption

我的目标是混淆 XML 配置文件，以便用户无法编辑它。我使用以下代码：

```
 XmlSerializer xs = new XmlSerializer(typeof(this));

        SymmetricAlgorithm symmetricAlgorithm = DES.Create();
        symmetricAlgorithm.Key = new byte[8] { 1, 2, 3, 4, 5, 6, 7, 8 };
        symmetricAlgorithm.Mode = CipherMode.ECB;

        using (FileStream fs = File.OpenWrite(filename))
        {
            using (CryptoStream cryptoStream = new CryptoStream(fs, symmetricAlgorithm.CreateEncryptor(), CryptoStreamMode.Write))
            {
                xs.Serialize(cryptoStream, this);
            }
        } 
```

大多数时候它工作正常。但是偶尔，在写入文件时，它会在文件末尾添加最后几行（最新情况下为 211 个字节）。解密仍然可以正常工作，但它不再反序列化为 XML 文件。

编辑：这只发生在我删除我的一个参数并保存配置时。就好像序列化程序在最后写了一些东西以保持文件大小相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:59:35.673

为什么不使用[EncryptedXml](http://msdn.microsoft.com/en-us/library/system.security.cryptography.xml.encryptedxml.aspx)而让框架担心加密/解密。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:58:49.723

在打开文件进行写入之前清空文件。[检查Microsoft 文档](http://msdn.microsoft.com/en-us/library/system.io.file.openwrite.aspx)的备注部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:04:05.610

用不同的方法解决了这个问题，正如这里所建议的，使用了 DeflateStream 而不是 CryptoStream： [c# encrypt xml file](https://stackoverflow.com/questions/4017534/c-sharp-encrypt-xml-file)

# ruby-on-rails - 如何解锁我的 gemfile，以便我可以访问 rails 服务器？

> ID：13032108
> 
> 赞同：1
> 
> 时间：2012-10-23T13:55:08.253
> 
> 标签：ruby-on-rails, ruby, git, bundler, gemfile

我正在尝试从 Git 中的分支合并灾难中恢复；由于“”，我无法将我的主题分支合并到主分支`merge conflict in gemfile.lock`。在寻找解决方案时，我在一篇博客文章中读到使用“捆绑锁”命令会有所帮助（我不知道它已经过时了），当我使用它时，我被警告说“ `Lock is deprecated. Your bundle is now locked whenever you run 'bundle install'`”。

所以我最终合并了我的主题分支，但是当我尝试访问 rails 服务器时，我收到一个涉及捆绑程序的错误。我假设这是因为我的捆绑包被锁定了。运行 ' `bundle unlock`' 没有任何作用。

还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:16:36.137

我认为现在没有解锁了。您可以通过删除 Gemfile.lock 文件来解锁。

您需要在 git 中解析 Gemfile.lock。做任何你需要做的事情，以便 git 接受 Gemflie.lock。然后，更新到 git 分支的当前版本，重做 bundle install，并签入新的 Gemfile.lock。

# jquery - jQuery在链接点击时添加视频

> ID：13032109
> 
> 赞同：0
> 
> 时间：2012-10-23T13:55:09.120
> 
> 标签：jquery, html

我正在尝试编写一个 jQuery 脚本，每当在某个页面上单击链接时，都会将视频附加到正文中，播放视频，然后它会转到链接的预期目标。

到目前为止，这就是我所拥有的：

HTML

```
<body>
<div id="videoHolder">
<a href="http://www.google.com">Google, as an example</a>
</div>
</body> 
```

jQuery

```
window.onbeforeunload=function(event) {
$("#videoHolder").html(
'<video width="600" height="600" autoplay="autoplay">' +
    '<source src="images/doors.mp4" type="video/mp4"></source>' +
     '</video>');
    setTimeout('window.location.href=' + $('a').attr(href), 5000);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:06:30.647

您需要先防止链接重定向，我已经修改了您的代码以使其在下面工作

```
<html>
  <head>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript">
    $(function() {
    $('a').click(function(event) {
        // prevent the navigation from happening
        event.stopImmediatePropagation();
        event.preventDefault();

        // play the video
        $("#videoHolder").html(
        '<video width="600" height="600" autoplay="autoplay">' +
            '<source src="http://www.html5rocks.com/en/tutorials/video/basics/Chrome_ImF.mp4" type="video/mp4"></source>' +
             '</video>');

        // redirect the user
        var url = $(this).attr('href');
        setTimeout(function() { window.location = url }, 5000);

        });
      });
    </script>     
  </head>
  <body>
    <div id="videoHolder">
      <a href="http://www.google.com">Google, as an example</a>
    </div>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:06:48.240

最好的方法是：添加一个 id 标签到这样的：

```
<span link ='images/doors.mp4' id='watch_video' />Click to view video</span> 
```

然后在jquery上工作：

```
$("#watch_video").live("click", function(){
   var getlink = $(this).attr("href");

   var htmls = '<video width="600" height="600" autoplay="autoplay">' +
               '<source src="'+ getlink +'" type="video/mp4"></source>' +
               '</video>');

    $("#videoHolder").html(html);

}); 
```

我还没有测试过这个，但试一试让我知道

# python - 使用 NLTK 的半监督朴素贝叶斯

> ID：13032114
> 
> 赞同：6
> 
> 时间：2012-10-23T13:55:20.837
> 
> 标签：python, machine-learning, nltk, naivebayes, unsupervised-learning

我基于 EM（期望最大化算法）在 Python 中构建了 NLTK 朴素贝叶斯的半监督版本。但是，在 EM 的某些迭代中，我得到了负对数似然（EM 的对数似然在每次迭代中都必须为正），因此我相信我的代码中一定有一些错误。仔细查看我的代码后，我不知道为什么会发生这种情况。如果有人能在下面的代码中发现任何错误，将不胜感激：

（[半监督朴素贝叶斯参考资料](http://web.engr.oregonstate.edu/~xfern/classes/cs534/notes/semi-supervised1.pdf)）

**EM算法主循环**

```
#initial assumptions:
#Bernoulli NB: only feature presence (value 1) or absence (value None) is computed 

#initial data:
#C: classifier trained with labeled data
#labeled_data: an array of tuples (feature dic, label)
#features: dictionary that outputs feature dictionary for a given document id  

for iteration in range(1, self.maxiter):    

  #Expectation: compute probabilities for each class for each unlabeled document
  #An array of tuples (feature dictionary, probability dist) is built       
  unlabeled_data = [(features[id],C.prob_classify(features[id])) for id in U]

  #Maximization: given the probability distributions of previous step,
  #update label, feature-label counts and update classifier C
  #gen_freqdists is a custom function, see below
  #gen_probdists is the original NLTK function
  l_freqdist_act,ft_freqdist_act, ft_values_act = self.gen_freqdists(labeled_data,unlabeled_data)
  l_probdist_act, ft_probdist_act = self.gen_probdists(l_freqdist_act, ft_freqdist_act, ft_values_act, ELEProbDist)
  C = nltk.NaiveBayesClassifier(l_probdist_act, ft_probdist_act)                    

  #Compute log-likelihood 
  #NLTK Naive bayes classifier prob_classify func gives logprob(class) + logprob(doc|class))
  #for labeled data, sum logprobs output by the classifier for the label
  #for unlabeled data, sum logprobs output by the classifier for each label
  log_lh = sum([C.prob_classify(ftdic).prob(label) for (ftdic,label) in labeled_data])      
  log_lh += sum([C.prob_classify(ftdic).prob(label) for (ftdic,ignore) in unlabeled_data for label in l_freqdist_act.samples()])

  #Continue until convergence               
  if log_lh_old == "first": 
    if self.debug: print "\tM: #iteration 1",log_lh,"(FIRST)"
    log_lh_old =  log_lh            
  else:
    log_lh_diff = log_lh - log_lh_old
    if self.debug: print "\tM: #iteration",iteration,log_lh_old,"->",log_lh,"(",log_lh_diff,")"
    if log_lh_diff < self.log_lh_diff_min: break        
    log_lh_old =  log_lh 
```

**自定义函数 gen-freqdists，用于创建所需的频率分布**

```
def gen_freqdists(self, instances_l, instances_ul):     
    l_freqdist = FreqDist() #frequency distrib. of labels
    ft_freqdist= defaultdict(FreqDist) #dictionary of freq. distrib. for ft-label pairs
    ft_values = defaultdict(set) #dictionary of possible values for each ft (only 1/None)
    fts = set() #set of all fts

    #counts for labeled data
    for (ftdic,label) in instances_l:
      l_freqdist.inc(label,1)
      for f in ftdic.keys():
        fts.add(f) 
        ft_freqdist[label,f].inc(1,1)
        ft_values[f].add(1)

    #counts for unlabeled data
    #we must compute maximum a posteriori label estimate
    #and update label/ft occurrences accordingly
    for (ftdic,probs) in instances_ul:
      map_l = probs.max() #label with highest probability
      map_p = probs.prob(map_l) #probability of map_l
      l_freqdist.inc(map_l,count=map_p)
      for f in ftdic.keys():
        fts.add(f)
        ft_freqdist[map_l,f].inc(1,count=map_p)             
        ft_values[f].add(1)

    #features not appearing in documents get implicit None values
    for l in l_freqdist.samples():
    num_samples = l_freqdist[l] 
    for f in fts:
      count = ft_freqdist[l,f].N()              
      ft_freqdist[l,f].inc(None, num_samples-count)
      ft_values[f].add(None)    

    #return computed frequency distributions
    return l_freqdist, ft_freqdist, ft_values 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:42:50.203

我认为你在总结错误的值。

这是您的代码，应该计算日志概率的总和：

```
 #Compute log-likelihood 
  #NLTK Naive bayes classifier prob_classify func gives logprob(class) + logprob(doc|class))
  #for labeled data, sum logprobs output by the classifier for the label
  #for unlabeled data, sum logprobs output by the classifier for each label

  log_lh = sum([C.prob_classify(ftdic).prob(label) for (ftdic,label) in labeled_data])
  log_lh += sum([C.prob_classify(ftdic).prob(label) for (ftdic,ignore) in unlabeled_data for label in l_freqdist_act.samples()]) 
```

根据 prob_classify 的 NLTK 文档[（](http://nltk.googlecode.com/svn/trunk/doc/api/nltk.classify.naivebayes.NaiveBayesClassifier-class.html#prob_classify)在 NaiveBayesClassifier 上），将返回[ProbDistI](http://nltk.googlecode.com/svn/trunk/doc/api/nltk.probability.ProbDistI-class.html)对象（*not* `logprob(class) + logprob(doc|class)`）。当你得到这个对象时，你正在`prob`为给定的标签调用它的方法。您可能还想调用`logprob`，并否定该返回。

# algorithm - 尝试复杂性和搜索

> ID：13032116
> 
> 赞同：39
> 
> 时间：2012-10-23T13:55:24.487
> 
> 标签：algorithm, data-structures, time-complexity, hashtable, trie

创建单词列表的[trie](http://en.wikipedia.org/wiki/Trie)的复杂性是什么？在该 trie 中搜索其他单词集的复杂性是什么？当我有哈希表时，我应该使用 trie 进行字符串搜索吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-23T14:02:12.253

创建 trie 的复杂性是`O(W*L)`，其中`W`是单词的数量，并且`L`是单词的平均长度：您需要对集合中的`L`每个单词进行平均查找。`W`

稍后查找单词也是如此：您`L`为每个`W`单词执行步骤。

哈希插入和查找具有相同的复杂性：对于每个单词，您需要检查相等性，这需要`O(L)`，对于`O(W*L)`.

如果您需要查找整个单词，哈希表更容易。但是，您不能使用哈希表通过前缀查找单词；如果您对基于前缀的查找不感兴趣，请使用哈希表；否则，使用 trie。

# html - css设置左固定右流体布局

> ID：13032122
> 
> 赞同：4
> 
> 时间：2012-10-23T13:55:35.293
> 
> 标签：html, css, sass

我需要处理 html 和 css 这样的布局：对于 250 像素，左侧宽度是静态的，对于屏幕的其他其余部分（100%-250 像素），右侧是流动的

我尝试这样做（我正在使用 sass）：

```
 .wrapper{
    width:100%;
    margin: 0 auto;
    .left{
      width:250px;
      float:left;
    }
    .right{
      float:right;
      width:100%;
      margin-left: 250px;
    }
  } 
```

那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-23T13:59:50.010

这很简单：http: [//jsfiddle.net/joplomacedo/ExHzk/](http://jsfiddle.net/joplomacedo/ExHzk/) 如果你看不到小提琴，这里是 html 和 css。

HTML：

```
<div class="fixed"></div>
<div class="fluid"></div>​ 
```

CSS：

```
.fixed {
    float: left;
    width: 250px;
}

.fluid {
    margin-left: 250px;
} 
```

**除此之外**
，我省略了包装。它与演示并不真正相关。但是有一个问题：如果您给包装器的宽度为 100%，那么 margin: 0 auto 是多少？你真的需要指定宽度吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T13:57:44.107

如果我理解良好，请尝试此代码：

```
.wrapper{
    width:100%;
    margin: 0 auto;
    .left{
      width:250px;
      float:left;
    }
    .right{
      float:right;
      width:100%;
      margin-right: 250px;
    }
  } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T14:00:48.540

您可以删除`float:right`.right 上的 .right ，例如：

```
right{
  width:100%;
  margin-left: 250px;
}​ 
```

[http://jsfiddle.net/RfHqX/](http://jsfiddle.net/RfHqX/)

请注意，我没有使用 SASS 样式。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-23T14:02:25.220

`margin`不用于`float`_`right div`

```
.wrapper{
    width:100%;
    margin: 0 auto;
}
    .left{
      width:250px;
  height:100%;
      float:left;
    background:#f00;
    }
    .right{

      height:100%;
      margin-left: 250px;
    background:#0f0;
    } 
```

**[演示](http://jsbin.com/exeloz/3/edit)**

# solr - 多核连接查询

> ID：13032125
> 
> 赞同：4
> 
> 时间：2012-10-23T13:55:39.493
> 
> 标签：solr

我的 solr 版本是 4.0
我有一个多核环境，其中一个核心用于**产品**，一个核心用于这些产品的**可用性**记录。产品核心将包含详细的描述，大约有 10,000 个文档。可用性核心包含多达 400 万个文档。

我构建了一个小型测试集，并尝试使用连接语法获得结果，旨在查找包含“迪士尼”的产品的所有可用性。

```
http://localhost:8080/solr/product/select?q={!join%20from=productid%20to=id%20fromindex=availp}disney&fl=* 
```

我得到零结果。
每个核心上的单独查询确实会产生结果。
**问题**：
1\. 我应该如何构造查询以获得结果
2\. 当我优化查询以过滤特定日期时，语法是什么。
例如 ?fq=period:"november 2012" AND country:France

country 是产品索引中的一个字段， period 是当时可用索引中的一个字段。

单个查询的结果：产品核心

```
<response>
<lst name="responseHeader">
  <int name="status">0</int>
  <int name="QTime">1</int>
  <lst name="params">
    <str name="fl">id,productname</str>
    <str name="indent">1</str>
    <str name="q">disney</str>
    <str name="rows">1</str>
  </lst>
</lst>
<result name="response" numFound="31" start="0">
<doc>
    <str name="productname">DPAZ00 DPAZ00-02 DPAZ0002 Disneyland Parijs Hotel Disney's Santa Fe</str>
    <str name="id">44044</str></doc>
</result>
</response> 
```

其他核心：availp

```
<response>
<lst name="responseHeader">
  <int name="status">0</int>
  <int name="QTime">0</int>
  <lst name="params">
    <str name="fl">*</str>
    <str name="indent">1</str>
    <str name="q">productid:44044</str>
    <str name="rows">1</str>
  </lst>
</lst>
<result name="response" numFound="42" start="0">
  <doc>
    <date name="datefrom">2012-10-01T10:00:00Z</date>
    <arr name="period">
      <str>oktober 2012</str>
    </arr>
    <str name="productid">44044</str>
    <double name="minpriceperperson">209.0</double>
    <int name="durationcode">1</int>
    <str name="id">3890</str>
    <int name="budgetcode">2</int>
</result>
</response> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-08T17:56:33.723

1）您应该查询库存核心（以产品为内部索引）。这就是查询应该是 http://localhost:8080/solr/product/select?q=*& fl={!join from=id to=id fromIndex=availp}productname:disney

2) 您可以使用上述相同的查询语法。http:// localhost:8080/solr/product/select?q=period:november&fl={!join from=id to=id fromIndex=availp}productname:disney AND country:France 如果不需要，您可以从上面删除产品名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T04:13:44.940

您是否尝试过将**fromindex**更改为**fromIndex**（大写**I**）？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-20T03:18:39.783

根据[Adventures with Solr Join](http://mullingmethodology.blogspot.com/2012/03/adventures-with-solr-join.html)，查询如下所示：

```
http://localhost:8983/solr/parents/select?q=alive:yes AND _query_:"{!join fromIndex=children from=fatherid to=parentid v='childname:Tom'}" 
```

应该是作品

# matrix - 坐标变换

> ID：13032127
> 
> 赞同：0
> 
> 时间：2012-10-23T13:55:40.947
> 
> 标签：matrix, coordinates, transformation, coordinate-systems, coordinate-transformation

我在空间中有两个 3D 对象，我想将点从一个对象复制到另一个对象。问题是这些对象不共享一个共同的坐标系，我必须进行坐标转换。我有两个对象的局部变换矩阵，我也可以访问世界变换矩阵。我知道要使用这些转换矩阵进行一些计算，但我不知道如何。

如果我将它复制到另一个对象（或其坐标系）中，如何转换第一个对象中的一个点，使其具有相同的位置（相对于世界坐标）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:05:41.180

好吧，您必须应用您拥有的转换运算符。例如，极坐标 (r, t) 和笛卡尔坐标 (x, y) 之间的关系定义为：

```
x = rcost
y = rsint 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-20T15:58:15.587

我晚了大约 9 年，但我必须解决同样的问题。

使用齐次变换矩阵。为此，首先使用描述局部 cs 的单位向量（使用相对于全局 cs 的值）计算 4x4 旋转矩阵。然后计算一个类似的 4x4 平移矩阵。那么变换矩阵就是平移矩阵和旋转矩阵的点积。计算齐次变换矩阵的逆并不是那么简单。我发现[伊利诺伊大学机器人课堂](http://motion.cs.illinois.edu/RoboticSystems/CoordinateTransformations.html)笔记帮助我理解了需要什么。当然，细节真的会让你大吃一惊，所以我觉得有必要将细节呈现为 python 代码。

让我们调用以下代码“transform_coord_sys.py”：

```
# Functions to convert points etc from one coordinate system to another
#
# These functions are based on a 4x4 homogeneous matrices or
# homogeneous coordinates introduced by August Ferdinand Möbius
# See: https://en.wikipedia.org/wiki/Homogeneous_coordinates
#
# Other work I found useful in developing this code includes:
# University of Illinois Robotics course http://motion.cs.illinois.edu/RoboticSystems/CoordinateTransformations.html

import numpy as np

def unit_vector(xyz_array):
    """
    Compute unit vector of vector from origin to specified xyz point
    :param xyz_array: numpy array of length 3\. x = 1st element, y = 2nd element, z = 3rd element
    :return: xyz_unit : unit vector (ie ijk) in specified direction
    """
    num_xyz = len(xyz_array)
    if num_xyz != 3:
        raise ValueError('Input array to "unit_vector" must have length of 3.')

    xyz_unit = xyz_array / np.linalg.norm(xyz_array)

    return xyz_unit

def create_rotation_matrix_from_points(local_origin, local_x_dir, local_xy_plane):
    """
    Create a 4x4 homogeneous rotation matrix 
    :param local_origin: np_array of x,y,z wrt global cs
    :param local_x_dir:  np_array of x,y,z point. vector from local_origin to this point defines X
    :param local_xy_plane: point in xy plane
    :return: rot_matrix: homogeneous rotation matrix
    """
    local_x_vec = local_x_dir - local_origin
    local_unit_x = unit_vector(local_x_vec)

    local_xy_vec = local_xy_plane - local_origin
    local_z_vec = np.cross(local_x_vec, local_xy_vec)
    local_unit_z = unit_vector(local_z_vec)

    local_y_vec = np.cross(local_z_vec, local_x_vec)
    local_unit_y = unit_vector(local_y_vec)

    # print('local_unit_x = {}'.format(local_unit_x))
    # print('local_unit_y = {}'.format(local_unit_y))
    # print('local_unit_z = {}'.format(local_unit_z))

    rot_matrix = np.zeros((4, 4))
    rot_matrix[3, 3] = 1.0
    rot_matrix[0:3, 0] = local_unit_x
    rot_matrix[0:3, 1] = local_unit_y
    rot_matrix[0:3, 2] = local_unit_z
    determinant = np.linalg.det(rot_matrix)
    assert np.isclose(determinant, 1.0)

    # print('rot_matrix = \n{}'.format(rot_matrix))
    # print('determinant = {}\n'.format(determinant))

    return rot_matrix

def create_translation_matrix_from_point(point, origin=np.zeros(3)):
    """
    Create a 4x4 homogeneous translation matrix
    :param point: np_array of x,y,z wrt global cs
    :param origin:  np_array of x,y,z point. vector from local_origin to this point defines X
    :return: translation_matrix : homogeneous translation matrix
    """
    translation_matrix = np.identity(4)
    deltas = point - origin
    translation_matrix[0:3, 3] = deltas

    # print('translation_matrix = \n{}'.format(translation_matrix))

    return translation_matrix

def invert_homogeneous_transformation_matrix(transformation_matrix):
    """
    Invert a homogeneous transformation matrix
    :param transformation_matrix: homogeneous transformation matrix
    :return: inverse_transform: inverted matrix
    """

    rot_matrix = transformation_matrix[0:3, 0:3]
    translation = transformation_matrix[0:3, 3]
    # for orthogonal arrays the transpose is equal to the inverse
    rot_inverse = rot_matrix.transpose()

    trans_inv = -rot_inverse.dot(translation)

    inverse_transform = np.identity(4)
    inverse_transform[0:3, 0:3] = rot_inverse
    inverse_transform[0:3, 3] = trans_inv

    return inverse_transform

def calculate_homogeneous_transforms(local_origin, local_x_dir, local_xy_plane):

    rot_matrix_4x4 = create_rotation_matrix_from_points(local_origin, local_x_dir, local_xy_plane)
    translation_matrix = create_translation_matrix_from_point(local_origin)

    # This is the key step showing how the transformation_matrix is created
    # using matrix multiplication of the translation and rotation matrices.
    # Order is CRITICAL:
    #     translation_matrix.dot(rot_matrix_4x4) IS NOT EQUAL TO rot_matrix_4x4.dot(translation_matrix)
    #     (except it trivial cases where it provides the correct answer but is still wrong)
    transformation_matrix = translation_matrix.dot(rot_matrix_4x4)
    inverse_transform = invert_homogeneous_transformation_matrix(transformation_matrix)

    return transformation_matrix, inverse_transform

def test_pure_rotation():
    print('{}'.format('-'*80))
    print('testing test_pure_rotation')

    local_origin = np.asarray([0.0, 0.0, .0])
    local_x_dir = np.asarray([0.0,  1.0, 0.0])
    local_xy_plane = np.asarray([-1.0, 1.0, 0.0])

    print('    local_origin = {}'.format(local_origin))
    print('    local_x_dir = {}'.format(local_x_dir))
    print('    local_xy_plane = {}'.format(local_xy_plane))

    transformation_matrix, inverse_transform = calculate_homogeneous_transforms(local_origin,
                                                                                local_x_dir,
                                                                                local_xy_plane)

    tm_str = '     {}'.format(transformation_matrix)
    tm_str = tm_str.replace('\n', '\n     ')
    print('\n    transformation_matrix = \n{}'.format(tm_str))

    point = np.asarray([1.0, 1.0, 2, 1.0])

    point_local = inverse_transform.dot(point)
    print('\n    point {} in local cs = {}'.format(point, point_local))

    point_global = transformation_matrix.dot(point_local)
    print('    local point {} in global cs = {}\n'.format(point_local, point_global))

    assert np.isclose(point, point_global).all()
    assert np.isclose(point_local, [1.0, -1, 2, 1.]).all()

    print('    Successfully completed test of test_pure_rotation\n')
    return None

def test_pure_translation():
    print('{}'.format('-'*80))
    print('testing test_pure_translation')

    local_origin = np.asarray([0.0, 0.0, 1.0])
    local_x_dir = np.asarray([1.0,  0, 1.0])
    local_xy_plane = np.asarray([0.0, 1.0, 1.0])

    print('    local_origin = {}'.format(local_origin))
    print('    local_x_dir = {}'.format(local_x_dir))
    print('    local_xy_plane = {}'.format(local_xy_plane))

    transformation_matrix, inverse_transform = calculate_homogeneous_transforms(local_origin,
                                                                                local_x_dir,
                                                                                local_xy_plane)

    tm_str = '     {}'.format(transformation_matrix)
    tm_str = tm_str.replace('\n', '\n     ')
    print('\n    transformation_matrix = \n{}'.format(tm_str))
    point = np.asarray([1.0, 1.0, 0, 1.0])

    point_local = inverse_transform.dot(point)
    print('\n    point {} in local cs = {}'.format(point, point_local))

    point_global = transformation_matrix.dot(point_local)
    print('    local point {} in global cs = {}\n'.format(point_local, point_global))

    assert np.isclose(point, point_global).all()
    assert np.isclose(point_local, [1.0, 1, -1, 1.]).all()

    print('    Successfully completed test of test_pure_translation\n')
    return None

def test_rotation_and_translation():
    print('{}'.format('-'*80))
    print('testing test_rotation_and_translation')

    local_origin = np.asarray([1.0, 1.0, 1.0])
    local_x_dir = np.asarray([.0,  1, 1.0])
    local_xy_plane = np.asarray([1.0, 2.0, 1.0])

    print('    local_origin = {}'.format(local_origin))
    print('    local_x_dir = {}'.format(local_x_dir))
    print('    local_xy_plane = {}'.format(local_xy_plane))

    transformation_matrix, inverse_transform = calculate_homogeneous_transforms(local_origin,
                                                                                local_x_dir,
                                                                                local_xy_plane)

    tm_str = '     {}'.format(transformation_matrix)
    tm_str = tm_str.replace('\n', '\n     ')
    print('\n    transformation_matrix = \n{}'.format(tm_str))

    point = np.asarray([-1.0, 2.0, 2, 1.0])
    # point = np.asarray([1.0, 1.0, 1, 1.0])
    # point = np.asarray([0.0, 0.0, 1, 1.0])

    point_local = inverse_transform.dot(point)
    print('\n    point {} in local cs = {}'.format(point, point_local))

    point_global = transformation_matrix.dot(point_local)
    print('    local point {} in global cs = {}\n'.format(point_local, point_global))

    assert np.isclose(point, point_global).all()
    assert np.isclose(point_local, [2.0, 1, -1, 1.]).all()

    print('    Successfully completed test of test_rotation_and_translation\n')
    return None

if __name__ == '__main__':
    test_pure_rotation()
    test_pure_translation()
    test_rotation_and_translation()
    print('') 
```

现在，测试用例产生了非常简单的输出，并展示了如何将单个点从一个坐标系转换到另一个坐标系。

```
--------------------------------------------------------------------------------
testing test_pure_rotation
    local_origin = [0\. 0\. 0.]
    local_x_dir = [0\. 1\. 0.]
    local_xy_plane = [-1\.  1\.  0.]

    transformation_matrix = 
     [[ 0\. -1\.  0\.  0.]
      [ 1\.  0\.  0\.  0.]
      [ 0\.  0\.  1\.  0.]
      [ 0\.  0\.  0\.  1.]]

    point [1\. 1\. 2\. 1.] in local cs = [ 1\. -1\.  2\.  1.]
    local point [ 1\. -1\.  2\.  1.] in global cs = [1\. 1\. 2\. 1.]

    Successfully completed test of test_pure_rotation

--------------------------------------------------------------------------------
testing test_pure_translation
    local_origin = [0\. 0\. 1.]
    local_x_dir = [1\. 0\. 1.]
    local_xy_plane = [0\. 1\. 1.]

    transformation_matrix = 
     [[1\. 0\. 0\. 0.]
      [0\. 1\. 0\. 0.]
      [0\. 0\. 1\. 1.]
      [0\. 0\. 0\. 1.]]

    point [1\. 1\. 0\. 1.] in local cs = [ 1\.  1\. -1\.  1.]
    local point [ 1\.  1\. -1\.  1.] in global cs = [1\. 1\. 0\. 1.]

    Successfully completed test of test_pure_translation

--------------------------------------------------------------------------------
testing test_rotation_and_translation
    local_origin = [1\. 1\. 1.]
    local_x_dir = [0\. 1\. 1.]
    local_xy_plane = [1\. 2\. 1.]

    transformation_matrix = 
     [[-1\.  0\.  0\.  1.]
      [ 0\.  1\.  0\.  1.]
      [ 0\.  0\. -1\.  1.]
      [ 0\.  0\.  0\.  1.]]

    point [-1\.  2\.  2\.  1.] in local cs = [ 2\.  1\. -1\.  1.]
    local point [ 2\.  1\. -1\.  1.] in global cs = [-1\.  2\.  2\.  1.]

    Successfully completed test of test_rotation_and_translation 
```

要一次使用多个点的代码，我们可以调用以下代码“example_transform_cs.py”。

```
import numpy as np
import matplotlib.pyplot as plt

import transform_coord_sys as tcs

if __name__ == '__main__':
    local_origin = np.asarray([1.0, 1.0, 1.0])
    local_x_dir = np.asarray([0, 1, 1.0])
    # local_x_dir = np.asarray([-7, 2, -3])
    local_xy_plane = np.asarray([1.0, 2.0, 1.0])

    print('    local_origin = {}'.format(local_origin))
    print('    local_x_dir = {}'.format(local_x_dir))
    print('    local_xy_plane = {}'.format(local_xy_plane))

    transformation_matrix, inverse_transform = tcs.calculate_homogeneous_transforms(local_origin,
                                                                                    local_x_dir,
                                                                                    local_xy_plane)

    tm_str = '     {}'.format(transformation_matrix)
    tm_str = tm_str.replace('\n', '\n     ')
    print('\n    transformation_matrix = \n{}'.format(tm_str))

    # all points have an extra dimension with the fourth item set to 1.0
    # this is to make them compatible with homogeneous transforms
    point = np.asarray([.4, 0.6, 0.7, 1.0])

    point_local = inverse_transform.dot(point)
    print('\n    point {} in local cs = {}'.format(point, point_local))

    point_global = transformation_matrix.dot(point_local)
    print('    local point {} in global cs = {}\n'.format(point_local, point_global))

    global_cs_line_x = np.asarray([0.0, 1.0, 0.0, 0.0, 0.0])
    global_cs_line_y = np.asarray([0.0, 0.0, 1.0, 0.0, 0.0])
    global_cs_line_z = np.asarray([0.0, 0.0, 0.0, 0.0, 1.0])

    global_homogenous = np.ones(len(global_cs_line_x))

    global_cs_3d = np.concatenate((global_cs_line_x, global_cs_line_y,
                                   global_cs_line_z, global_homogenous)).reshape((4, 5))

    local_cs_3d = transformation_matrix.dot(global_cs_3d)

    ax = plt.figure().add_subplot(projection='3d')

    ax.plot(global_cs_line_x, global_cs_line_y, global_cs_line_z, label='global_cs')
    ax.plot(local_cs_3d[0, :], local_cs_3d[1, :], local_cs_3d[2, :], label='local_cs')
    ax.plot(point[0], point[1], point[2], label='point', marker='x', markersize=14)

    fig = plt.gcf()
    text = 'Point\nGlobal CS {}\nLocal CS {}'.format(point[0:3], point_local[0:3])
    fig.text(.1, .9, text, fontsize=8)

    # ax.set_box_aspect((np.ptp(xs), np.ptp(ys), np.ptp(zs)))  # aspect ratio is 1:1:1 in data space
    ax.set_box_aspect((1., 1., 1.))  # aspect ratio is 1:1:1 in data space
    ax.legend()

    plt.show() 
```

该代码创建表示全局坐标系的单位矢量的简单线表示，然后将数据转换为局部坐标系。单个点在全局和局部坐标系中都表示。当然，一张图片确实可以帮助我了解正在发生的事情以及它是否正常工作。 [![在此处输入图像描述](../Images/1a8dd66cb9acb9e8c89a75d89fc59903.png)](https://i.stack.imgur.com/Z1YbV.png)

祝你有美好的一天，并付出代价。

# linux - 如何减少以下 awk 语句中的一个管道

> ID：13032137
> 
> 赞同：3
> 
> 时间：2012-10-23T13:56:24.170
> 
> 标签：linux, bash, shell, awk

`ls -lrt | awk ' !/dly/ { print $NF } ' | awk ' /000001.txt.gz/ { print } '`

我想显示符合以下条件的文件名：1）不应包含“dly”关键字。2）应包含“000001.txt.gz”关键字。

我使用了上面的命令。是否可以合并我使用的 2 个管道？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T14:48:42.250

这不使用`awk`，但它确实减少了管道的数量。

```
find -name "*dly*" -o -name "*000001.txt.gz*" -exec basename {} \; 
```

编辑：添加了[Zack](https://stackoverflow.com/users/388520/zack)建议的更改（对于 GNU `find`）

```
find -maxdepth 1 -name "*dly*" -o -name "*000001.txt.gz*" -printf '%f\n' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T14:06:16.590

您可以将条件组合起来，`awk`就好像它们是 C 表达式一样，所以

```
ls -lrt | awk '/000001\.txt\.gz/ && !/dly/ { print $NF }' 
```

应该管用。（根本没有经过测试。）但是，如果您想要针对不寻常的事情（例如文件名中的空格）提高效率和鲁棒性，那么您应该这样做：

```
ls -1rt | awk '/000001\.txt\.gz/ && !/dly/ { print }' 
```

只要您的文件名中没有*换行符，这将是可靠的。*（*唯一*的字节值——*不是*字符；内核不知道字符编码——不能出现在路径名组件中的是 0x2F 和 0x00，但你通常不必担心，除非你正在编写一个必须处理*恶意*文件名。）另一种选择是使用更强大的语言，可以`opendir`：

```
perl -le 'opendir(my $dh, ".") or die;
          print for sort grep { /00001\.txt\.gz/ && !/dly/ } readdir $dh' 
```

或更简洁（但效率较低）

```
perl -le 'print for sort grep { /00001\.txt\.gz/ && !/dly/ } glob("*")' 
```

不过，这并不像这样`ls -rt`。我不记得你是如何在 Perl 中做到这一点的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T16:59:48.693

```
ls -lrt | awk ' !/dly/ && $NF~/000001.txt.gz/ { print $NF }' 
```

# android - 如何让Activity控制服务？

> ID：13032145
> 
> 赞同：0
> 
> 时间：2012-10-23T13:56:54.573
> 
> 标签：android, service

> **可能重复：**
> [示例：Activity 和 Service 之间使用消息传递的通信](https://stackoverflow.com/questions/4300291/example-communication-between-activity-and-service-using-messaging)

我的服务有问题，我从昨天到现在用谷歌搜索，没有得到任何体面的结果。

现在我有一个带有一些按钮（播放/暂停、下一个、上一个）和一个服务（包含一个 MediaPlayer 和其他）的活动。当我按下 Activity 上的按钮时，我想控制我的服务做某事。

我知道如何将数据从活动发送到服务，但这会导致我的问题。

为了连接到服务，我使用 startService(intent) 意图包含一些数据，在服务类中，我覆盖了 onStartCommand(...) ，现在我的服务收到了该数据。

太好了，但现在我无法控制我的服务。

然后，我走近了另一种方式——绑定服务。

我还了解了如何创建绑定服务类并连接到它以与之交互。但是现在，因为 onstartCommand 仅由 startService() 调用，所以我不知道如何在不覆盖此方法的情况下从活动中获取数据。

我的问题是：如何让活动控制并将数据发送到服务？谢谢你。

# delphi - 将图形栏添加到 StringGrid col

> ID：13032146
> 
> 赞同：6
> 
> 时间：2012-10-23T13:56:59.183
> 
> 标签：delphi, delphi-2010, custom-draw, stringgrid

使用 Delphi 2010 和 TStringGrid 组件，我目前显示来自数据库查询的五个字段。

这是我正在做的一个简单示例

//设置网格

```
procedure TGriddata.FormCreate(Sender: TObject);
begin
 grdMain.Rows[0].commatext:='"One","Two","Three","Four","Five"';
 grdMain.ColWidths[0]:= 50;
 grdMain.ColWidths[1]:= 175;
 grdMain.ColWidths[2]:= 175;
 grdMain.ColWidths[3]:= 100;
 grdMain.ColWidths[4]:= 300;
end; 
```

//在网格中显示数据 //注意，我没有显示查询的创建、执行或销毁

```
procedure TGriddata.load;
begin
 ... 
 grdMain.Cells[0,row]:= FieldByName('one').AsString;
 grdMain.Cells[1,row]:= FieldByName('two').AsString;
 grdMain.Cells[2,row]:= FieldByName('three').AsString;
 grdMain.Cells[3,row]:= FieldByName('four').AsString;
 //draw progress bar here
 ...
end; 
```

其中一列（“五”）需要在列中显示一个深蓝色水平条。它还应该在栏中显示一些居中的文本。我没有使用自定义绘图的经验。我将哪些属性设置为仅自定义绘制一列并为其他列使用默认绘图？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T17:09:43.597

像往常一样将文本添加到单元格中。但是你必须在`OnDrawCell`事件中画出那些条。保持`DefaultDrawing`原样（`True`默认情况下），并通过预先填充来擦除这些列中已绘制的单元格文本：

```
procedure TForm1.grdMainDrawCell(Sender: TObject; ACol, ARow: Integer;
  Rect: TRect; State: TGridDrawState);
var
  Progress: Single;
  R: TRect;
  Txt: String;
begin
  with TStringGrid(Sender) do
    if (ACol = 4) and (ARow >= FixedRows) then
    begin
      Progress := StrToFloatDef(Cells[ACol, ARow], 0) / 100;
      Canvas.FillRect(Rect);
      R := Rect;
      R.Right := R.Left + Trunc((R.Right - R.Left) * Progress);
      Canvas.Brush.Color := clNavy;
      Canvas.Rectangle(R);
      Txt := Cells[ACol, ARow] + '%';
      Canvas.Brush.Style := bsClear;
      IntersectClipRect(Canvas.Handle, R.Left, R.Top, R.Right, R.Bottom);
      Canvas.Font.Color := clHighlightText;
      DrawText(Canvas.Handle, PChar(Txt), -1, Rect, DT_SINGLELINE or
        DT_CENTER or DT_VCENTER or DT_END_ELLIPSIS or DT_NOPREFIX);
      SelectClipRgn(Canvas.Handle, 0);
      ExcludeClipRect(Canvas.Handle, R.Left, R.Top, R.Right, R.Bottom);
      Canvas.Font.Color := clWindowText;
      DrawText(Canvas.Handle, PChar(Txt), -1, Rect, DT_SINGLELINE or
        DT_CENTER or DT_VCENTER or DT_END_ELLIPSIS or DT_NOPREFIX);
      SelectClipRgn(Canvas.Handle, 0);
    end;
end; 
```

![StringGrid 中的自定义绘制条形图](../Images/d7601028c8ca687b56e5504bde12f5ae.png)

如需更多选择，您可以考虑使用[此`DrawStatus`例程](https://stackoverflow.com/a/7048062/757830)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T14:25:16.597

在这里您可以查看示例（[在网格中的单元格中绘制百分比](http://neftali.clubdelphi.com/?p=152)），以在 TStringGrid 的单元格中绘制条形图。解释是西班牙语，但你可以下载代码，很简单。您也可以在页面右侧使用自动翻译。

![在此处输入图像描述](../Images/337af340f37018a31a3fca04a2a61e4e.png)

```
procedure TFormDrawCell.DBGrid1DrawColumnCell(Sender: TObject;
  const Rect: TRect; DataCol: Integer; Column: TColumn;
  State: TGridDrawState);
const
  STR_EMPTY = '';
  CHAR_PERCENT = '%';
  SPACE_TO_CENTER_CELLTEXT = 0;
var
  fValue: Integer;
  ActualPenColor, ActualBrushColor: TColor;
  EmptyDS: Boolean;
  DrawRect: TRect;
  fWidth1, fLeft2: Integer;
  StrValue: string;
begin
  if not (Column.FieldName = 'Precent') then
    Exit;

  if not (cbdraw.Checked) then
    Exit;

  EmptyDS := ((TDBGrid(Sender).DataSource.DataSet.EoF) and
              (TDBGrid(Sender).DataSource.DataSet.Bof));

  if (Column.Field.IsNull) then begin
    fValue := -1;
    StrValue := STR_EMPTY;
  end
  else begin
    fValue := Column.Field.AsInteger;
    StrValue := IntToStr(fValue) + CHAR_PERCENT;
  end;

  DrawRect := Rect;
  InflateRect(DrawRect, -1, -1);

  fWidth1 := (((DrawRect.Right - DrawRect.Left) * fValue) DIV 100);

  ActualPenColor := TDBGrid(Sender).Canvas.Pen.Color;
  ActualBrushColor := TDBGrid(Sender).Canvas.Brush.Color;
  TDBGrid(Sender).Canvas.Pen.Color := clHighlight;
  TDBGrid(Sender).Canvas.Brush.Color := clWhite;
  TDBGrid(Sender).Canvas.Rectangle(DrawRect);

  if (fValue > 0) then begin
    TDBGrid(Sender).Canvas.Pen.Color := clSkyBlue;
    TDBGrid(Sender).Canvas.Brush.Color := clSkyBlue;
    DrawRect.Right := DrawRect.Left + fWidth1;
    InflateRect(DrawRect, -1, -1);
    TDBGrid(Sender).Canvas.Rectangle(DrawRect);
  end;

  if not (EmptyDS) then begin
    DrawRect := Rect;
    InflateRect(DrawRect, -2, -2);
    TDBGrid(Sender).Canvas.Brush.Style := bsClear;
    fLeft2 := DrawRect.Left + (DrawRect.Right - DrawRect.Left) shr 1 -
              (TDBGrid(Sender).Canvas.TextWidth(StrValue) shr 1);
    TDBGrid(Sender).Canvas.TextRect(DrawRect, fLeft2,
                                    DrawRect.Top + SPACE_TO_CENTER_CELLTEXT, StrValue);
  end;

  TDBGrid(Sender).Canvas.Pen.Color := ActualPenColor;
  TDBGrid(Sender).Canvas.Brush.Color := ActualBrushColor;
end; 
```

问候。

# plone - plone.caching 所有 304 的拦截错误

> ID：13032151
> 
> 赞同：0
> 
> 时间：2012-10-23T13:57:09.497
> 
> 标签：plone

我最近开始在我的视图中添加 plone.caching 规则集声明：

```
<cache:ruleset
    for=".views.MyContentTypeView"
    ruleset="plone.content.itemView"
    /> 
```

我已经开始在我的开发站点的日志中看到这些：

```
2012-10-23 14:48:02 ERROR Zope.SiteErrorLog 1351000082.330.867850813917 http://localhost:12311/my_content_type/@@landing
Traceback (innermost last):
  Module ZPublisher.Publish, line 117, in publish
  Module zope.event, line 31, in notify
  Module zope.component.event, line 24, in dispatch
  Module zope.component._api, line 136, in subscribers
  Module zope.component.registry, line 321, in subscribers
  Module zope.interface.adapter, line 585, in subscribers
  Module plone.caching.hooks, line 102, in intercept
Intercepted 
```

来自 hooks.py，在 intercept() 的文档字符串中：

```
To properly abort request processing, this will raise an exception. The
actual response (typically an empty response) is then set via a view on
the exception. We set and lock the response status to avoid defaulting to
a 404 exception. 
```

因此，看起来这些错误可能是预期的行为？如果是这样，是否有可能让 Zope 忽略这些错误，以免它们弄乱我的日志？

# java - 添加 google jar 后出现 IllegalArgumentException 错误

> ID：13032153
> 
> 赞同：1
> 
> 时间：2012-10-23T13:57:15.847
> 
> 标签：java, android, google-api, android-library

我收到这个错误

```
java.lang.IllegalArgumentException: already added: Lcom/google/protobuf/AbstractMessageLite$Builder$LimitedInputStream; 
```

在日志的底部，

```
Conversion to Dalvik format failed with error 1 
```

在我添加了包含 jar 文件的“libs”文件夹之后，我试图将其实现到现有包中。

![在此处输入图像描述](../Images/a2afa9f64f46311a77ddabac4520f7e3.png)

我做了一些研究并找到了一个解决方案

项目 » 属性 » Java 构建路径 » 库并删除除“Android XY”之外的所有内容

但这不是我的情况，因为我无法将它们从列表中删除。（我可以删除 Android Dependencies 文件夹，但我不确定是否应该这样做）

![在此处输入图像描述](../Images/672c6c244227499ada9caf0695466c92.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:49:44.207

这个问题是您有两个具有重复类的 jar 文件。尝试删除 protobuf，如果一切仍然可以顺利编译，那么你很幸运。

否则，我在[这里](http://code.google.com/p/android/issues/detail?id=20956#c17)找到的一种解决方法是：

> 1.  使用项目属性添加库项目 - > android - 添加库项目。
> 2.  将链接的 src 文件也添加到您的构建路径中。
> 3.  构建项目。您应该在 bin 文件夹中看到您的库项目中的类文件。
> 4.  之后，从应用程序>项目中的库项目中删除链接的 src 文件。
> 5.  运行您的应用程序。
> 
> 如果您清理项目，请从步骤 2 开始重复这些步骤。

# javascript - BigCommerce Express Checkout vs Nivo Slider Javascript

> ID：13032158
> 
> 赞同：0
> 
> 时间：2012-10-23T13:57:23.920
> 
> 标签：javascript, nivo-slider

我已经在我的 BigCommerce 商店中实现了 Nivo Slider。当我开始使用 Express Checkout 选项结帐时，它会导致“未定义：ExpressCheckout”错误，不允许用户完成结帐。

我联系了 BigCommerce 支持，他们说这很可能是我的滑块有问题，我需要删除与此滑块相关的所有 javascript 实例。

在这样做之前，我想看看其他人是否遇到了 BigCommerce 的这个问题，或者我的 javascript 是否不正确？

此外，如果您有任何资源可以调试或检查我的 javascript，这也会很有用。

链接如下：[http ://teaetc.mybigcommerce.com/](http://teaetc.mybigcommerce.com/)

1.  转到 T 型 > 绿色
2.  将产品添加到购物车
3.  继续结帐
4.  尝试以访客身份结账

按照这些步骤，您应该会收到错误消息。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T14:33:24.040

I've recently run into this issue on my sandbox version of a site that was just handed to me: [https://medicalsupplies.eppmo.com/checkout.php#](https://medicalsupplies.eppmo.com/checkout.php#)

We cannot checkout either. I'm attempting to remove all notations of any slider right now, but my boss said he's run across this before due to slider issues as well.

I know this issue is old, but I'll post any finds if I make any progress, because I found this thread by searching for the same issue. Might help someone else out.

If anyone else has an idea on this, feel free to hop on my link and try to check out and let me know if you have any input. Thanks :)

# ruby-on-rails - 使用 Doorkeeper 的 OAuth 回调 URL 参数

> ID：13032160
> 
> 赞同：2
> 
> 时间：2012-10-23T13:57:27.497
> 
> 标签：ruby-on-rails, rest, oauth, oauth-2.0

我正在使用 OAuth2 和 Doorkeeper 来保护我的 API。

问题是一个客户有几个不同的流程，他将用户重定向到我的 OAuth 流程。

他想在将用户重定向到我的 OAuth 流时**动态添加一些参数**，并在我调用他的回调 URL 时**取回这些参数。**通过这种方式，他将能够判断此回调源自哪个流。

OAuth 2可以做到这一点吗？与门卫？如何？

**编辑：**

感谢 Zólyomi István 的提示。我在调用 auth 端点之前设置了 state 参数，并在回调中取回了它。但是，我发现即使我没有设置任何内容，我也会返回带有一些明显随机字符串的状态参数。知道它是什么吗？我想确保我没有搞砸任何事情......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T09:33:29.770

好吧，使用状态参数确实是解决方案。只需将状态添加到请求中，然后在控件返回到我的代码时将其取回。根据规范：

> state 参数用于链接请求和回调以防止 CSRF 攻击，其中攻击者授权访问他自己的资源，然后诱使用户使用攻击者的令牌跟随 edirect。

显然 ominauth oauth 2 会为该参数分配随机值，除非它用于检测 CSRF 攻击。

# android - 如何在 android 的 twitter 集成中获取用户个人资料图片？

> ID：13032161
> 
> 赞同：1
> 
> 时间：2012-10-23T13:57:41.790
> 
> 标签：android

嗨，我是 android 新手，试图将 twitter 与我的应用程序集成。用户登录后，我需要获取 twitter 个人资料名称和个人资料图片。我可以获取个人资料名称，但不能获取个人资料图片。如何获取个人资料图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-10T10:00:40.270

你可以通过这种方式获取一些信息：

```
TwitterApiClient twitterApiClient = TwitterCore.getInstance().getApiClient();
twitterApiClient.getAccountService().verifyCredentials(false, false, new Callback<User>() {
    @Override
    public void success(Result<User> userResult) {
        String name = userResult.data.name;
        String email = userResult.data.email;
        // ... other infos

        // Get the profile pic
        // _normal (48x48px) | _bigger (73x73px) | _mini (24x24px)  
        String photoUrlNormalSize   = userResult.data.profileImageUrl;
        String photoUrlBiggerSize   = userResult.data.profileImageUrl.replace("_normal", "_bigger");
        String photoUrlMiniSize     = userResult.data.profileImageUrl.replace("_normal", "_mini");
        String photoUrlOriginalSize = userResult.data.profileImageUrl.replace("_normal", "");
    }

    @Override
    public void failure(TwitterException exc) {
        Log.d("TwitterKit", "Verify Credentials Failure", exc);
    }
}); 
```

来自官方文档：

> 您可以从 获取用户最近的个人资料图片`GET users/show`。在用户对象中，您会找到`profile_image_url` 和`profile_image_url_https`字段。这些字段将包含用户上传图像的调整大小的“正常”变体。这种“正常”变体通常为 48x48 像素。
> 
> 通过修改 URL，您可以检索其他变体大小，例如“更大”、“迷你”和“原始”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:39:41.333

如果您已获取[用户配置文件](https://dev.twitter.com/docs/platform-objects/users#profile_image_url)，请注意名为“profile_image_url”的 json 条目。也可以在[此处](https://dev.twitter.com/docs/user-profile-images-and-banners)找到来自 twitter 的一些文档。将此与 ImageDownloader 结合使用，以下载要在项目中用作位图的图像。这是如何下载和显示图像的第一个谷歌结果：

[http://getablogger.blogspot.com/2008/01/android-download-image-from-server-and.html](http://getablogger.blogspot.com/2008/01/android-download-image-from-server-and.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-18T09:30:55.053

```
private TwitterApp mTwitter;
mTwitter.getUserProfileImage(); 
```

返回登录用户的个人资料图片。

您也可以根据参考自定义图片：[Android Twitter 获取个人资料图片大小问题](https://stackoverflow.com/questions/14698531/android-twitter-getting-profile-image-size-issue)

# java - 如何通过 System.out.println 在控制台上不显示任何内容？

> ID：13032162
> 
> 赞同：0
> 
> 时间：2012-10-23T13:57:41.083
> 
> 标签：java, stack

这是关于 StackOverflow 上的 Stack 的问题。

我的问题可能看起来非常模糊，但是如果您检查我编写的程序，那么您可能会理解我要问的内容。我自己实现了堆栈。我向用户展示了 3 个选择。推送、弹出和查看堆栈。当调用 view(display) 方法时，会显示一堆 0 而不是什么也没有。我们知道堆栈不包含任何内容，除非我们在上面放一些东西。但是由于我实现的堆栈是使用数组的整数堆栈，因此调用显示方法时会显示一堆 0（数组中整数的默认值）。我如何不显示任何内容而不是 0。我知道我可以为空白字符添加 ASCII，但我认为它仍然会违反堆栈规则（没有元素时堆栈应该为空，甚至没有空格代码）。

这是我的程序：

```
import java.util.Scanner;
public class StackClass
  {

public static void main(String []args)
{

    Scanner input=new Scanner(System.in);
    int choice=0;
    int push;
    Stack stack=new Stack();

    do
    {
        System.out.println("Please select a stack operation:\n1\. Press 1 for adding to stack\n2\. Press 2 for removing elements from stack\n3\. View the stack");
        choice=input.nextInt();

        switch(choice)
            {
                case 1:
                        System.out.println("Please enter the number that you want to store to stack");
                        push=input.nextInt();
                        stack.push(push);

                case 2:
                        stack.pop();
                case 3:
                        stack.display();
            }

    }
    while((choice==1)||(choice==2)||(choice==3));

}    
}
class Stack

{

    private int size;
    private int[] stackPlaces=new int[15];
    private int stackIndex;

    Stack()
    {
        this.size=0;
        this.stackIndex=0;
    }

    public void push(int push)
    {
        if(size<15)
        {
            stackPlaces[stackIndex]=push;
            size++;
            stackIndex++;
        }
        else
        {
            System.out.println("The stack is already full. Pop some elements and then try again");
        }
    }
    public void pop()
    {
        if(size==0)
        {
        System.out.println("The stack is already empty");
        }
        else
        {
        stackPlaces[stackIndex]=0;
        size--;
        stackIndex--;
        }
    }
    public void display()
    {
        System.out.println("The stack contains:");
        for(int i=0;i<stackPlaces.length-1;i++)
            {
            System.out.println(stackPlaces[i]);
            }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:01:20.343

在`display()`中，只需将循环更改`size`为用于循环条件，以便显示元素的*逻辑*数量：

```
for (int i=0;i < size; i++)
{
    System.out.println(stackPlaces[i]);
} 
```

请注意，您现有的循环也只显示了 15 个值中的 14 个......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:03:09.070

您初始化一个大小为 15 的 int-s 数组。 int 数据类型默认为 0（与其默认为 null 的包装类 Integer 不同），因此您真正要做的是创建一个包含 15 个 0 的 int 数组。因此，当您遍历数组并打印其内容时，您将得到 15 个 0。

正如其他人所暗示的那样，解决方案是将循环限制交换为堆栈的大小（实际添加的元素数量），而不是数组的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:01:40.520

而不是`for(int i=0;i<stackPlaces.length-1;i++)`，做`for(int i=0;i<stackIndex;i++)`

# c# - 如何从 url 检索 Json 作为字符串？

> ID：13032165
> 
> 赞同：2
> 
> 时间：2012-10-23T13:57:53.710
> 
> 标签：c#, json, web-services, windows-phone-7

我有一个返回 JSON 的 URL。我正在 Windows Phone 中开发一个应用程序，我想通过发送 url 来获取该 json 数据，然后将其转换为字符串并从中提取数据。我已经下载了 json.net 来读取 json 数据。
我是否必须反序列化数据.. 有必要吗？
我不能只获取字符串格式的数据然后解析它。

我正在使用以下代码来读取字符串格式的 json 数据。

```
Array Movies = jObject["movies"].ToArray();
foreach (JToken Movie in Movies)
    MessageBox.Show(Movie["title"].ToString()); 
```

json 看起来像这样：

```
这部电影讲述了迈克（塔图姆饰）带领一位名叫小子（佩蒂弗饰）的年轻舞者在他的羽翼下，教他参加聚会、搭讪女人和轻松赚钱的艺术。-- (C) Warner Bros.","posters":{"thumbnail":"http://content8.flixster.com/movie/11/16/66/11166610_mob.jpg","profile":"http: //content8.flixster.com/movie/11/16/66/11166610_pro.jpg","详细":"http://content8.flixster.com/movie/11/16/66/11166610_det.jpg","原文":"http://content8.flixster.com/movie/11/16/66/11166610_ori.jpg"},"abridged_cast":[{"name":"Channing Tatum","id":"162661835" ,"字符":["魔术麦克"]},{"姓名":"亚历克斯·帕蒂弗","id":"326298019","

```

`

我只想要电影名称和标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:39:52.800

如果您的问题是“是否有必要反序列化”，那么答案是否定的，没有必要。

也就是说，在处理数据服务器端时，通常首选将 JSON 字符串反序列化为强类型对象，因为它可以减少运行时错误并更容易测试代码。

使用[JSON.Net 的](http://james.newtonking.com/projects/json-net.aspx)示例：

```
public class Movie
{
    public string Name { get; set; }
    public string Title { get; set; }
}

public Movie Convert(string jsonString)
{
    return JsonConvert.DeserializeObject<Movie>(jsonString);
} 
```

还有其他选项可将 JSON 反序列化为对象。如果你有一个代表 JSON 对象的 DataContract，你可以使用[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer%28v=vs.100%29.aspx)。

# iphone - 文本字段的自定义占位符

> ID：13032167
> 
> 赞同：1
> 
> 时间：2012-10-23T13:57:56.327
> 
> 标签：iphone, objective-c, xcode, ios6

我需要为文本字段创建一个自定义占位符。我创建了自定义占位符方法，但没有得到如何在我的类中调用它，代码是：

```
(void)drawPlaceholderInRect:(CGRect)rect {
// Set colour and font size of placeholder text
[[UIColor redColor] setFill];
[[UIColor colorWithRed:255.0 green:0.0 blue:0.0 alpha:0.7] setFill];
[[self placeholder] drawInRect:rect withFont:[UIFont systemFontOfSize:5]];
} 
```

在 main .h 中为自定义文本字段类创建了对象

```
CustomUITextFieldPlaceholder *txtName; 
```

但不知道如何要求

```
**txt_userinput.placeholder=?** 
```

如果有多个文本字段那么如何打电话请帮助提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:04:08.323

您可以通过这种方式调用该方法（在您的 CustomUITextFieldPlaceholder 类中）：

```
[self drawPlaceholderInRect:aRect]; 
```

或者，如果您想从 CustomUITextFieldPlaceholder 类外部调用：

```
[txtName drawPlaceholderInRect:aRect]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:06:01.047

制作你的`CustomUITextFieldPlaceholder`对象，然后你可以调用它 -

```
CustomUITextFieldPlaceholder *obj = [[CustomUITextFieldPlaceholder alloc]init];
[obj drawPlaceholderInRect:CGRectMake(x,y,width,height)]; 
```

# php - PHP 和 mysql 查询以检索名称

> ID：13032169
> 
> 赞同：1
> 
> 时间：2012-10-23T13:58:02.910
> 
> 标签：php, mysql

我有以下代码，它根据用户的登录详细信息从表中获取用户数据

```
//==========================================
//  CONNECT TO THE LOCAL DATABASE
//==========================================
$user_name = "xxxx";
$pass_word = "xxxxx";
$database = "xxxx";
$server = "xxxxxx";

$db_handle = mysql_connect($server, $user_name, $pass_word);
$db_found = mysql_select_db($database, $db_handle);

if ($db_found) {
    $SQL = "SELECT * FROM students WHERE L1 = '$uname' AND L2 = '" .md5 ($_POST['password'])."'";
    $result = mysql_query($SQL);
    $num_rows = mysql_num_rows($result);

    //====================================================
    //  CHECK TO SEE IF THE $result VARIABLE IS TRUE
    //====================================================

    if ($result) {
        if ($num_rows > 0) {
            $color="1";

            $result = mysql_query("SELECT * FROM entry, students   WHERE entry.studentName = students.studentName AND students.L1='$uname' ") or die(mysql_error());  

            echo "<p>Welcome "; echo $row[studentName];
            echo "<p>You records as of ";
            echo date('l jS \of F Y h:i:s A');  

            echo "<table border='1' cellpadding='2' cellspacing='0'>";
            echo "<tr> <th>Date</th><th>Student Name</th> <th>Tutor name</th> <th>Procedure name</th> <th>Grade</th><th>Student Reflection</th><th>Tutor Comments</th><th>Professionalism</th> <th>Communication</th> <th>Alert</th> <th>Dispute</th> </tr>";
            // keeps getting the next row until there are no more to get

            while($row = mysql_fetch_array( $result )) {
                if($color==1){
                    echo "<tr bgcolor=#DDD ><td>".$row['date']."</td><td>".$row['studentName']."</td><td>".$row['tutorName']."</td><td>".$row['procedureName']."</td><td>".$row['grade']."</td><td>".$row['studentReflection']."</td><td>".$row['tutorComments']."</td><td>".$row['professionalism']."</td><td>".$row['communication']."</td><td>".$row['alert']."</td><td>".$row['dispute']."</td></tr>";

                    // Set $color==2, for switching to other color
                    $color="2";
                }
                // When $color not equal 1, use this table row color
                else {
                    echo "<tr bgcolor='#CCC'><td>".$row['date']."</td><td>".$row['studentName']."</td><td>".$row['tutorName']."</td><td>".$row['procedureName']."</td><td>".$row['grade']."</td><td>".$row['studentReflection']."</td><td>".$row['tutorComments']."</td><td>".$row['professionalism']."</td><td>".$row['communication']."</td><td>".$row['alert']."</td><td>".$row['dispute']."</td></tr>";
                    // Set $color back to 1
                    $color="1";
                }
            }
            echo '</table>';
        } 
```

我想要做的是回显或打印出表格上方的用户名，但我很难这样做。我唯一想让它工作的就是将它添加到 while 循环中，但它会根据用户的记录多次打印出来。

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:04:20.533

您需要获取第一行才能访问用户信息。这意味着您必须`mysql_fetch_array`在循环之前调用一次。

这会给你带来麻烦，因为你还需要在循环中调用它。你可以通过使用各种布尔标志或行的副本来解决这个问题，但最好的方法是稍微改变你的代码结构。

使用 a `do-while loop`，与 a 结合使用`if statement`。这允许您首先获取单行，如果没有找到则采取特殊操作。之后，你得到了一个循环，它现在做的事情，只是它检查迭代*之后*是否有下一行而不是之前，否则第一行将在表输出中被跳过。

```
if ($row = mysql_fetch_array( $result )) {
  // Print user info
  // Print table header

  do {

    // Print table row

  } while ($row = mysql_fetch_array( $result ));

  // Print table footer
}
else
{
  // User not found. Print error or whatever.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:04:34.090

您的逻辑有误...您正在制作学生表，并且您想回应 Welcome to the student which is logged_in

但是你用`echo "<p>Welcome "; echo $row[studentName];`

未设置 $row 的地方...此名称应来自先前的选择 ..

# java - 为什么我的向量会重复？

> ID：13032175
> 
> 赞同：-1
> 
> 时间：2012-10-23T13:58:26.683
> 
> 标签：java, vector

我想知道为什么我的向量会重复？我知道我可以使用 ArrayList，但这是对我目前仅使用向量的黑莓应用程序的测试。这是我继续得到的结果：

```
ID:3 and Name:Catty and Price:100 and Msg:Catty is a preety girl
ID:3 and Name:Catty and Price:100 and Msg:Catty is a preety girl
ID:3 and Name:Catty and Price:100 and Msg:Catty is a preety girl 
```

这是代码，**testapp.java**

```
package testing;

import java.util.Vector;

public class testapp {
    private static Vector<String> listElements= new Vector<String>();
    private static Vector<String> listName= new Vector<String>();
    private static Vector<Integer> listPrice= new Vector<Integer>();
    private static Vector<String> listDate= new Vector<String>();
    private static Vector<String> listAbstract= new Vector<String>();
    private static Vector<rec> a = new Vector<rec>();
    static rec record = new rec();

    public static void main(String[] args){

        vectorBuilder();
        recordBuilder();
        showElements();

    }

    public static void recordBuilder(){

        try{
            for(int i=0;i<listElements.size();i++){
                record.setId((String) listElements.elementAt(i));
                record.setName((String) listName.elementAt(i));
                record.setDate((String) listDate.elementAt(i));
                record.setPrice(((Integer) listPrice.elementAt(i)).intValue());
                record.setAbstract((String) listAbstract.elementAt(i));
                a.addElement(record);   
            }

        }catch (Exception e){
            System.out.println("Record Builder Error: " + e.getMessage());
        }
    }

    public static void vectorBuilder(){
        //Ben
        listElements.addElement("1");
        listName.addElement("Ben");
        listPrice.addElement(502);
        listDate.addElement("2012-05-12");
        listAbstract.addElement("Ben is a Good Boy");

        //Kesha
        listElements.addElement("2");
        listName.addElement("Kesha");
        listPrice.addElement(367);
        listDate.addElement("2012-02-24");
        listAbstract.addElement("Kesha Works hard in her school work");

        //Catty
        listElements.addElement("3");
        listName.addElement("Catty");
        listPrice.addElement(100);
        listDate.addElement("2012-01-04");
        listAbstract.addElement("Catty is a preety girl");

    }

    public static void showElements(){
        for(int i=0;i<a.size();i++)
        {
            rec r = (rec) a.elementAt(i);
            System.out.println("ID:"+r.getId()+" and Name:"+r.getName()+" and Price:"+r.getPrice()+" and Msg:"+r.getAbstract());
        }

    }
} 
```

这是**rec.java**

```
package testing;

public class rec {
        String name;
        String id;
        String date;
        String strAbstract;
        int price;

        public String getName() {
            return name;
        }
        public void setName(String name) {
            this.name = name;
        }
        public String getId() {
            return id;
        }
        public void setId(String id) {
            this.id = id;
        }

        public String getDate() {
            return date;
        }
        public void setDate(String date) {
            this.date = date;
        }

        public String getAbstract() {
            return strAbstract;
        }
        public void setAbstract(String strAbstract) {
            this.strAbstract = strAbstract;
        }

        public int getPrice() {
            return price;
        }
        public void setPrice(int price) {
            this.price = price;
        }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T14:00:11.407

您需要在调用时创建新的记录`recordBuilder`。如果您不创建新的`record`相同实例，则会更新这就是您获得重复的原因。

```
for(int i=0;i<listElements.size();i++){
                rec record = new rec();
                record.setId((String) listElements.elementAt(i));
                record.setName((String) listName.elementAt(i));
                record.setDate((String) listDate.elementAt(i));
                record.setPrice(((Integer) listPrice.elementAt(i)).intValue());
                record.setAbstract((String) listAbstract.elementAt(i));
                a.addElement(record);   
            } 
```

注意：Java 命名约定建议类名以大写字母开头。`Record`可能比名字好`rec`。

# python - cx_Freeze 无法独立生成

> ID：13032183
> 
> 赞同：0
> 
> 时间：2012-10-23T13:59:03.900
> 
> 标签：python, macos, module, cx-freeze

我正在尝试使用 cx_Freeze 生成独立版本。我在 MacOS 10.5.8 上使用来自 mac 端口的 py31-cx_Freeze 包运行 python3.1。

在构建过程中，我注意到以下内容：

```
 Missing modules:
    ? _md5 imported from hashlib
    ? _sha1 imported from hashlib
    ? _sha256 imported from hashlib
    ? _sha512 imported from hashlib
    ? readline imported from cmd 
```

然后，生成后，当我运行应用程序时，我得到：

```
 Traceback (most recent call last):
      File "/opt/local/Library/Frameworks/Python.framework/Versions/3.1/lib/python3.1/site-packages/cx_Freeze/initscripts/Console3.py", line 27, in <module>
        exec(code, m.__dict__)
      File "proactive-agent", line 5, in <module> 
```

我错过了什么 ？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:58:57.243

好的，问题来自应用程序本身，而不是来自不良一代的独立设备。我的错。

该应用程序正在引用具有相对路径的文件，生成后相对路径无效，因为生成后应用程序本身位于 build/exe.macosx-10.5-i386-3.1/library.zip/myapp ...

# ruby-on-rails - has_one 根据参数从许多中选择

> ID：13032186
> 
> 赞同：0
> 
> 时间：2012-10-23T13:59:10.490
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个名为 Address 的多态模型。我想要实现的是将**许多**地址绑定到其他模型（例如用户），但仍然像**只有一个**一样使用它们，并尝试按类型区分它们。

我的项目设计为只使用一个地址，所以我有很多类似的代码，`User.first.address`或者`User.first.address=...`我无能为力。

这是一个例子：

```
|id|addressable_type|addressable_id| type   | street |
  1|User            |1             | first  | Foo
  2|User            |1             | second | Bar  
  3|User            |1             | NULL   | Other 
```

我想做的是：

```
User.find(1).address(:second) 
```

哪个应该返回`<Address street:"Bar">`，

```
User.find(1).address 
```

哪个应该返回`<Address street:"Other">`，但`User.find(1).addresses`应该返回对象集合。

我使用一段代码为我的模型添加地址行为：

```
 module Ext::Models::Addressable

def self.included(mod)
    super
    mod.class_eval do
      def self.acts_as_addressable          
        include InstanceMethods

        # Use has_many :delete_all for better performance
        has_many :addresses, :as => :addressable, :dependent => :delete_all
        has_one :address, :as => :addressable
      end
    end
end

module InstanceMethods
            # I tried with this, but this doesn't even allow me to start rails becauses raises "there is no address method"  
    def address_with_type(type = nil)
        if type
            self.addresses.find(:first, :conditions => ["type = ?", type.to_s])
        else
            address_without_type
        end
    end
    alias_method_chain :address, :type
end
end 
```

我正在使用 Rails 2.3.14 和 Ruby 1.9.2。

如果这是可能的，我还想知道为给定模型创建新地址的最佳方法（比如说用户）。

提前致谢。

# 解决方案

我缩小了所有可能性，目前在项目中只有两种类型的地址。我能够大大简化我的方法。目前我的`self.included`样子：

```
has_many :addresses, :as => :addressable, :dependent => :delete_all
has_one :address, :as => :addressable, :conditions => {:type => nil}
has_one :foo_address, :class_name => 'Address', :as => :addressable, :conditions => {:type => "foo"} 
```

现在我能够像这样构建新对象： `user.build_address(:street => "abc")`而且`user.build_foo_address(:street => "def")`，我需要什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T22:15:57.330

我会小心以这种方式覆盖默认和预期行为。有你不能放手的理由`user.address`吗？

我不确定您正在解决什么问题，但也许您可以执行以下操作：

```
class User < ActiveRecord::Base
  has_many :addresses, :as => :addressable, :dependent => :delete_all

  def address(only_type = "primary")
    addresses.find_first("type" => only_type)
  end

  def address=(addr)
    addresses.delete address
    addresses << addr.update_attribute("type", "primary")
  end

  def build_address(attr)
    addresses.delete address
    addresses.build attr.merge("type" => "primary")
  end

  def create_address(attr)
    addresses.delete address
    addresses.create attr.merge("type" => "primary")
  end
end 
```

我还没有测试过这段代码，而且我对 rails 2 不再那么熟悉了，所以只是将它作为灵感。您可以将它包装在一些元数据中以对其进行模块化。顺便说一句，如果您使用“类型”，您会得到 STI，不确定这是否是您想要的。

# infragistics - Infragistics NetAdvantage 的哪些版本提供 IGUltraGrid20.ocx？

> ID：13032195
> 
> 赞同：0
> 
> 时间：2012-10-23T14:00:00.967
> 
> 标签：infragistics, ocx, netadvantage

有谁知道我在哪里可以找到迄今为止发布的所有 Infragistics NetAdvantage 版本的列表？我正在专门寻找提供控件 IGUltraGrid20.ocx 的版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:18:21.503

Infragistics 网站上的这个 PDF 可能是您的答案。

[http://download.infragistics.com/download/pubs/ProductLifeCycle.pdf](http://download.infragistics.com/download/pubs/ProductLifeCycle.pdf)

该控件的最新版本是 2.01.60，它与 2006 年 3 月的 UltraSuite 3.02 一起发布。
它已正式退役，不再受支持。
从同一个文档中，IGUltraGrid20.ocx 版本 2.01.25 包含在 NetAdvantage 套件中，直到版本 2005 v.2 并在下一个版本 2005 v.3 中消失

# openssl - OpenSSL 使用带有非阻塞套接字的 libev 读取客户端证书错误

> ID：13032202
> 
> 赞同：7
> 
> 时间：2012-10-23T14:00:21.193
> 
> 标签：openssl, libev

我花了一些时间搜索互联网寻找更好的方法来分析和调试我的问题，但我似乎找不到解决方案。所以我想我会问。

简要地。我正在尝试创建一个非阻塞 ssl 转发代理。代理的服务器部分使用的是自签名服务器证书，我使用自己的 CA 证书进行了签名。如果重要的话，我正在使用 libev。我首先成功地创建了一个非加密代理（它盲目地转发了网络流量），现在我正在尝试向它添加 SSL。:)

我在让客户端连接到代理时遇到问题。我已经尝试过 wget 和 ssl 的 s_client 作为测试客户端，因为我想进行一些自动化测试。

ssl 服务器设置（此代码在 EV_READ 事件上从 libev 观察程序侦听套接字 accept_handler() 调用）：

```
/* setup client side ssl state (we are a SERVER) */
ctx = SSL_CTX_new(SSLv23_server_mode());
SSL_CTX_set_options(ctx, SSL_OP_NO_SSLV2 | SSL_OP_ALL);
SSL_CTX_set_info_callback(ctx, client_info_cb);
SSL_CTX_set_cipher_list(ctx, "ALL:!SSLv2:-aNULL");
//SSL_CTX_load_verify_locations(ctx, CA_CERTIFICATE, NULL);
//SSL_CTX_set_client_CA_list(ctx, SSL_load_client_CA_file(CA_CERTIFICATE));
SSL_CTX_set_verify(ctx, SSL_VERIFY_NONE, NULL);
SSL_CTX_set_verify_depth(ctx, 0);
SSL *client_ssl = SSN_new(ctx);
SSL_set_mode(client_ssl, SSL_MODE_ENABLE_PARTIAL_WRITE);
SSL_set_accept_state(client_ssl);
SSL_set_fd(client_ssl, client_fd);

/* initialize client handshake watchers */
ev_io_init(&ev_r_ch, client_handshake, client_fd, EV_READ);
ev_io_init(&ev_w_ch, client_handshake, client_fd, EV_WRITE);
... other watcher inits and set watcher data portions ...

/* start the read */
ev_io_start(loop, &ev_r_ch); 
```

libev 循环设置为：

```
loop = ev_default_loop(EVFLAG_AUTO); 
```

我有计时器等来检查关闭标志以及其他家务活动。

我的 client_handshake() 主函数基本上看起来像这样：

```
int t = SSL_accept(client_ssl);
if (t == 1) { // SSL_ERROR_NONE
    end_client_handshake(...);
} else {
    int err = SSL_get_error(client_ssl, t);
    if (err == SSL_ERROR_WANT_READ) {
        ev_io_stop(loop, &ev_w_ch);
        ev_io_start(loop, &ev_r_ch);
    }
    else if (err == SSL_ERROR_WANT_WRITE) {
        ev_io_stop(loop, &ev_r_ch);
        ev_io_start(loop, &ev_w_ch);
    }
    else ...
} 
```

在 client_info_cb() 中，我打印出内部 SSL 状态，并从我的 print() 函数中获得以下信息：

```
client_info_cb: 8193: SSLv3 read client hello A
client_info_cb: 8193: SSLv3 write server hello A
client_info_cb: 8193: SSLv3 write certificate A
client_info_cb: 8193: SSLv3 write server done A
client_info_cb: 8193: SSLv3 flush data
client_info_cb: 8194: SSLv3 read client certificate A
client_info_cb: 8194: SSLv3 read client certificate A 
```

这就是它挂起的地方。如果我检测到 SSL_ERROR_WANT_READ（这是 SSL_get_error() 在上面的第二个“读取客户端证书 A”消息之后返回的内容），我尝试将 client_handshake() 函数修改为在 SSL_accept() 周围循环（1）{}。

那什么也没做，只是让我进入一个无限循环（），不断调用 SSL_accept（）。

我假设 SSL 状态机需要一些它无法获得的附加信息。起初我以为我需要继续从套接字读取，但这没有用。

另外，我对为什么我的代理尝试读取客户端证书感到困惑，因为我已明确指定我不想验证上面的客户端证书 (SSL_VERIFY_NONE)；除非我误解了该功能的目的。

如果有人对此有任何见解，我将不胜感激。或者也许是调试此问题的更好方法。strace() 对此毫无用处，而且我从 wget 或 s_client 都没有得到任何好的返回/错误消息。

我尝试在 SSL 的状态机中设置 alert_callbacks 和 msg_callbacks，但这并没有给我提供比 info 回调更多的信息。

在这一点上，我不确定这是套接字问题，还是 SSL 问题，或者什么。

edit1：我想指出，在accept_handler() 中，我首先通过ssl 连接到服务器，以便在完成accept() 之前验证我正在代理的主机的证书。如果我颠倒操作顺序，并在connect()之前先接受()，它就可以工作。

edit2：我尝试查看 s_client 和代理之间的 tcpdump 输出。在client_info_cb中引用的写入服务器数据和flush数据后，客户端发送“Client Key Exchange”、“Change Cipher Spec”和“Encrypted Finished Message”。但是 ssl 状态机正在寻找客户端证书？？？

```
--> Client Key Exchange
write to 0x9547a78 [0x9592e90] (523 bytes => 523 (0x20B))
0000 - 16 03 01 02 06 10 00 02-02 02 00 be 51 c7 3d 77   ............Q.=w
0010 - 5a b3 9e 28 81 f4 4e b5-63 ce ce 0b 19 f3 85 64   Z..(..N.c......d
0020 - 29 0e e8 22 83 b8 60 a6-54 e3 7a 62 b3 37 d8 04   ).."..`.T.zb.7..
0030 - 6c f1 8e ff 50 44 ed cc-7b 08 61 0c 16 88 f4 61   l...PD..{.a....a
0040 - 7b 8d f2 1e 04 1d 74 3d-cc ee a4 93 d3 bb 90 ee   {.....t=........
<snip>
--> Change Cipher Spec
write to 0x9547a78 [0x9592e90] (6 bytes => 6 (0x6))
0000 - 14 03 01 00 01 01
--> Finished Message                                 ......
write to 0x9547a78 [0x9592e90] (53 bytes => 53 (0x35))
0000 - 16 03 01 00 30 9a 88 8b-14 d6 d1 f1 f7 d8 0d ac   ....0...........
0010 - 38 cd 54 78 26 85 7b 11-c8 e9 db 8d a2 0c 6a a8   8.Tx&.{.......j.
0020 - d4 e7 d4 ad 5d 7a 6d 47-eb f9 5f 2c f6 ca 6a 1f   ....]zmG.._,..j.
0030 - 17 a6 58 25 41                                    ..X%A 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T21:03:16.293

只需使用**libevent** API 中的 OpenSSL bufferevents 即可。您将获得相同甚至更好的功能。我不确定，但您似乎正在尝试在非常低的级别实现 SSL 服务器，但是，例如，使用某些原生 Linux 异步 I/O 机制 [会很痛苦。](http://developerweb.net/viewtopic.php?pid=30055)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:07:54.850

也许您可能会遇到一些会话缓存问题（默认情况下已启用并且*“edit 1”*指向它），¿您是否试图向客户端提供来自服务器的欺骗证书？也许内部缓存是按证书名称存储的，它会尝试恢复服务器会话......

`SSL_CTX_set_session_cache_mode`尝试使用该`SSL_SESS_CACHE_OFF`选项关闭缓存。

关于*“编辑 2”*，客户端密钥交换阶段不讨论发送客户端的证书，它发送一个用于所选密码系统的秘密（或什么都没有）（如果所选密码不需要，它可以发送一个空的客户端交换秘密）。[在这里阅读它。](http://en.wikipedia.org/wiki/Transport_Layer_Security#TLS_handshake_in_detail)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-14T18:18:56.570

您是否首先将`client_fd`套接字设置为非阻塞模式？

```
int fd_nonblock(int client_fd)
{
    int flags = fcntl(client_fd, F_GETFL, 0);
    flags |= O_NONBLOCK;
    return fcntl(client_fd, F_SETFL, flags);
} 
```

# ruby - ruby 3上的activerecord单表继承

> ID：13032204
> 
> 赞同：2
> 
> 时间：2012-10-23T14:00:33.473
> 
> 标签：ruby, activerecord, orm, ruby-on-rails-3.2, single-table-inheritance

我有以下类与 STI 映射：

```
class Employee < ActiveRecord::Base
end

class StudentEmployee < Employee
  # I'd like to keep university only to StudentEmployee...
end
#Just to make this example easier to understand, not using migrations
ActiveRecord::Schema.define do
    create_table :employees do |table|
        table.column :name, :string
        table.column :salary, :integer
        table.column :university, :string # Only Students

    end
end

emp = Employee.create(:name=>"Joe",:salary=>20000,:university=>"UCLA") 
```

我想阻止为员工设置大学领域，但允许为 StudentEmployees 设置。我尝试使用 attr_protected，但它只会阻止质量设置：

```
class Employee < ActiveRecord::Base
  attr_protected :university
end

class StudentEmployee < Employee
  attr_accessible :university
end
#This time, UCLA will not be assigned here
emp = Employee.create(:name=>"Joe",:salary=>20000,:university=>"UCLA")
emp.university = "UCLA" # but this will assign university to any student...
emp.save
puts "only Students should have univesities, but this guy has one..."+emp.university.to_s 
```

这里的问题是它将在数据库中插入一所简单员工的大学。另一个问题是，我认为最好在 StudentEmployee 类中说大学是一个属性，而不是在 Employee 中说大学“不是”一个可见属性......它只是逆向自然抽象。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T01:39:05.103

我会尝试这样的事情：

```
class Employee < ActiveRecord::Base
  validate :no_university, unless: lambda { |e| e.type === "StudentEmployee" }
  def no_university
    errors.add :university, "must be empty" unless university.nil?
  end
end 
```

它不是最漂亮的，但它应该可以工作。

# c++ - 对齐ofstream的输出

> ID：13032214
> 
> 赞同：7
> 
> 时间：2012-10-23T14:01:19.023
> 
> 标签：c++, iostream, fstream

我希望将数据从我的程序输出到文本文件。这是一个工作示例，显示了我当前的操作方式，其中还包括了日期/时间（我正在运行 Windows）：

```
#include <iostream>
#include <fstream>
#include <time.h>

using namespace std;

int main()
{

char dateStr [9];
char timeStr [9];

_strdate(dateStr);
_strtime(timeStr);

ofstream output("info.txt", ios::out);
output << "Start time part 1 " << "\t" << timeStr << " on " << dateStr << "\n";
output << "Start time part 1000000 " << "\t" << timeStr << " on " << dateStr << "\n";
output.close();

return 0;
} 
```

但是，作为用户，“info.txt”的输出对我来说不是很可读，因为末尾的时间和日期戳没有对齐。这是输出：

```
Start time part 1   15:55:43 on 10/23/12
Start time part 1000000     15:55:43 on 10/23/12 
```

我的问题是，有没有办法对齐后半部分？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T14:04:56.417

是的，[`<iomanip>`](http://www.cplusplus.com/reference/iostream/manipulators/)header 提供了`setw`操纵器，让您可以将输出的每个字段的宽度设置为`ostream`. 对每一行使用`setw`操纵器而不是制表符可以更严格地控​​制输出：

```
output << setw(25) << "Start time part 1 " << timeStr << " on " << dateStr << endl;
output << setw(25) << "Start time part 1000000 " << timeStr << " on " << dateStr << endl; 
```

要在左侧对齐字符串，请添加`left`操纵器：

```
output << left << setw(25) << "Start time part 1 " << timeStr << " on " << dateStr << endl;
output << left << setw(25) << "Start time part 1000000 " << timeStr << " on " << dateStr << endl; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T14:05:21.473

```
int max_align = 10;
output << "Start time part 1 " << "\t" << timeStr 
<< std::string(max_align-timeStr.size(), " ") << " on " << dateStr << "\n"; 
```

# python - 如何在不知道 html 中的字段名称的情况下验证表单的所有字段

> ID：13032220
> 
> 赞同：-3
> 
> 时间：2012-10-23T14:01:22.753
> 
> 标签：python, django

我想验证一个任何字段都不应该为空的表单。我不知道字段的名称。代码是：

```
 <form action="/addproductgroupinsert_fun/" method="post" name="SForm" onsubmit="return validateForm()">
    {% for id in ProductTypefeatureentryList %}
       <label for="{{id.Name}}">{{id.Name}}</label>
       <input id="{{id.Name}}" type="text"name="{{id.Name}}" />
    {% endfor %} 
```

怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:11:16.533

您可以考虑 HTML-5`data-val-*`属性并查看 jquery unobtrusive validation plugin。你的输入看起来像

```
 <form action="/addproductgroupinsert_fun/" method="post" name="SForm" onsubmit="return validateForm()">
    {% for id in ProductTypefeatureentryList %}
       <label for="{{id.Name}}" data-val-required='true'>{{id.Name}}</label>
       <input id="{{id.Name}}" type="text"name="{{id.Name}}" data-val-required='true' />
    {% endfor %} 
```

`data-val-required`用于告诉不显眼的 js 需要 feild 的值。您在互联网上看到的大多数文章都会将不显眼的 js 与 asp.net mvc 链接起来，但它是一个客户端库，可以使用任何服务器端技术。此外，我还没有测试过代码，我认为还有一个属性可以指定错误消息，以防字段的值无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:11:18.500

在您的模板中，添加一个类以根据需要标记它们。然后您可以使用该类验证所有元素：

```
{% for id in ProductTypefeatureentryList %}
   <label for="{{id.Name}}">{{id.Name}}</label>
   <input class="required" id="{{id.Name}}" type="text"name="{{id.Name}}" />
{% endfor %} 
```

在`validateForm()`：

```
$('.required').each(function () {
    if (this.value === '') {
        // form is invalid
    }
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T14:10:31.410

这贯穿您的输入列表：

```
$('input').each(function() {
   //Do your validation
}); 
```

# c++ - c++ 使用命令行参数覆盖默认数组大小

> ID：13032222
> 
> 赞同：0
> 
> 时间：2012-10-23T14:01:32.400
> 
> 标签：c++, arrays, command-line-arguments

我在类似的行上看到了一个问题 [Specify Array from Command Line Argument](https://stackoverflow.com/questions/3901944/specify-array-from-command-line-argument)

虽然我的问题有点不同。

我有多个文件实现相同大小的数组（NOC_SIZE）。我的程序有一个默认模式和一个用户模式（命令行参数）。我给了'unsigned int NOC_SIZE = 16;' 在 main 函数开始之前在我的代码中添加一行。在另一个头文件中，我声明了一个带有参数'static unsigned int NOC_SIZE;'的结构（noc_package）。这个头文件包含在所有需要的文件中。

但是在我声明了一个数组的文件中（int arr[noc_package :: NOC_SIZE]）它给出了一个错误，说数组绑定不是整数。

有人可以建议解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:03:04.430

C++ 不支持变长数组。

你最好使用 an`std::vector`代替：

```
std::vector<int> arr(noc_package::NOC_SIZE); 
```

# c# - 查找共享特殊文件夹（虚拟文件夹）中的所有文件

> ID：13032223
> 
> 赞同：0
> 
> 时间：2012-10-23T14:01:33.430
> 
> 标签：c#, windows, file, special-folders

我正在寻找一种方法来查找共享特殊文件夹（虚拟文件夹）中的所有文件。例如`Desktop`是一个共享文件夹，`Desktop`所有用户都有一个 public 和一个 private `Desktop`。通过使用文件资源管理器导航到`Desktop`您将看到两个桌面的内容合并在一起。

* * *

例子：

所有人的共享文件夹：

```
dir C:\Users\Public\Desktop
Testfile1
Testfile2 
```

当前用户的文件夹：

```
dir C:\Users\usera\Desktop
Testfile3
Testfile4 
```

现在我想通过循环`Testfile1`获取所有文件`Testfile4``C:\Users\usera\Desktop`

有人知道如何将两个目录的文件列表合并在一起吗？同样不仅适用于桌面，还有其他行为方式相同的文件夹。

* * *

伪代码：

```
arrayDesktop = FunctionThatGetsAllFilesFrom(@"C:\Usera\Desktop");
foreach (var file in arrayDesktop)
{
    Console.WriteLine(file);
} 
```

现在应该打印出来

```
Testfile1
Testfile2
Testfile3
Testfile4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:16:17.660

这不是经过测试的代码，因此请原谅任何错误，但它应该足以让您入门。

```
foreach (string dir in Directory.GetDirectories(@"c:\Users"))
{
    string fullDir = Path.Combine(dir, "Desktop");

    if (Directory.Exists(fullDir))
    {
        foreach (string file in Directory.GetFiles(fullDir))
        {
            Console.WriteLine(file);
        }
    }
} 
```

除非您以管理员身份运行它，否则您可能会遇到安全问题，即无法读取目录。在这种情况下，您将需要该`System.Net.NetworkCredential`对象并将管理员帐户存储在本地缓存中 - 类似这样。

```
NetworkCredential credential = new NetworkCredential(username, password, domain);
CredentialCache credentialCache = new CredentialCache();
credentialCache.Add(new Uri(@"\\computer-uri"), "Basic", credential); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:13:43.747

使用`Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory)`和`Environment.GetFolderPath(Environment.SpecialFolder.CommonDesktopDirectory)`分别获取桌面和公共文件上的文件。

对于其他虚拟文件夹，您可以查看[文档](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)。但是您仍然必须自己合并所有文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T14:09:10.207

它们是文件系统上的单独文件夹。Windows 只是将它们结合起来显示在桌面上。您将不得不从两个文件夹中获取所有文件并将它们组合到一个列表中。

您可以使用 . 获取给定文件夹中的文件列表[`Directory.GetFiles`](http://msdn.microsoft.com/en-us/library/wz42302f%28v=vs.100%29.aspx)。

从两个文件夹中获得文件后，您可以将它们与 Linq[`Concat`](http://msdn.microsoft.com/en-us/library/bb302894%28v=vs.100%29.aspx)扩展方法结合使用。

# jsp - javax.faces.webapp.UIComponentClassicTagBase.setJspId 处的 java.lang.NullPointerException

> ID：13032224
> 
> 赞同：4
> 
> 时间：2012-10-23T14:01:36.363
> 
> 标签：jsp, jsf

我已经阅读了本教程，它是一本电子书，我一直坚持将 JSP 页面部署到我的 tomcat 服务器，因为它是一个 jsp 页面，但它使用的是 JSF 标签我已经将我的 javax.faces-2.1.13 jar 放在 lib 中，真正应该属于哪里。。

这是我的 JSP 页面标题 hello.jsp：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@ taglib prefix="f"  uri="http://java.sun.com/jsf/core"%>
<%@ taglib prefix="h"  uri="http://java.sun.com/jsf/html"%>

<html>
<head>
<title>JSF In Action</title>
</head>
<body>
<f:view>
    <h:form id="welcome-form">
        <h:outputText id="welcomeOutput" value="Welcome to JavaServer Faces!" style="font-family: Arial, Sans-serif; font-size: 24; color: green;" />
        <p><h:message id="error" for="helloInput" style="color: red;" /></p>

        <p><h:outputLabel for="helloInput">
            <h:outputText id="helloInputLabel" value="Enter Number of Controls to Display:" />
        </h:outputLabel>
        <h:inputText id="helloInput" value="#{ helloBean.numcontrol }" required="true">
            <f:validateLongRange minimum="1" maximum="500" />
        </h:inputText></p>

        <p><h:panelGrid id="controlPanel" binding="#{ helloBean.controlPanel }" columns="20" border="1" cellspacing="0">
        </h:panelGrid></p>
        <h:commandButton id="redisplaycommand" type="submit" value="Redisplay" actionListener="#{ helloBean.addControl }" />
        <h:commandButton id="goodbyecommand" type="submit" value="GoodBye" action="#{ helloBean.goodbye }" immediate="true" />
    </h:form>
</f:view>
</body>
</html> 
```

这是我得到的堆栈跟踪错误：

```
 SEVERE: Servlet.service() for servlet [jsp] in context with path [/SampleJSF1] threw exception [An exception occurred processing JSP page /hello.jsp at line 5

2: <%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %>
3: <%@ taglib uri="http://java.sun.com/jsf/html" prefix="h" %>
4: 
5: <f:view>
6: <html>
7: <head>
8: <title>

Stacktrace:] with root cause
java.lang.NullPointerException
    at javax.faces.webapp.UIComponentClassicTagBase.setJspId(UIComponentClassicTagBase.java:1858)
    at org.apache.jsp.hello_jsp._jspx_meth_f_005fview_005f0(hello_jsp.java:126)
    at org.apache.jsp.hello_jsp._jspService(hello_jsp.java:100)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

任何可以帮助我的人，我都非常感激。:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T14:07:35.000

```
java.lang.NullPointerException
    at javax.faces.webapp.UIComponentClassicTagBase.setJspId(UIComponentClassicTagBase.java:1858) 
```

`FacesContext`就是在`null`那个时候。这意味着它`FacesServlet`没有完成它的工作。堆栈跟踪也证明了这一点；这条线`at javax.faces.webapp.FacesServlet.service()`不见了。

请求 URL 需要与您配置的匹配`<url-pattern>`，以便正确调用它。`FacesServlet``/WEB-INF/web.xml`

因此，如果是例如`<url-pattern>*.jsf</url-pattern>`，那么您应该打开页面`/hello.jsf`而不是`/hello.jsp`在浏览器地址栏中。

* * *

**与具体问题无关**，自 JSF 2.0 起已*弃用*JSP 。您应该放弃这种传统的视图技术，并着眼于它的继任者 Facelets。您应该绝对确保您没有阅读针对 JSF 1.x 而不是 JSF 2.x 的书籍/教程/资源。JSF 2.x 与 1.x 相比，很多事情的完成方式都不同，从长远来看，这只会导致初学者感到困惑。

### 也可以看看：

*   [找不到 http://java.sun.com/jsf/facelets 的标记库描述符](https://stackoverflow.com/questions/6322127/can-not-find-the-tag-library-descriptor-for-http-java-sun-com-jsf-facelets/6322355#6322355)
*   [如何使用 JSF 2.0 Facelets 在 XHTML 中包含另一个 XHTML？](https://stackoverflow.com/questions/4792862/how-to-include-another-xhtml-in-xhtml-using-jsf-2-0-facelets/4793959#4793959)
*   [从 JSF 1.2 迁移到 JSF 2.0](https://stackoverflow.com/questions/4441713/migrating-from-jsf-1-2-to-jsf-2-0/4532870#4532870)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-30T14:49:05.820

要解决此问题，请遵循以下给定步骤：

1.  转到项目属性
2.  项目面
3.  检查 javaServer Faces
4.  单击所需的进一步配置
5.  在 JSF 实现库中选择：禁用库配置
6.  申请

# jquery - 在浏览器中的 POST 后重定向会终止 POST 请求！为什么？

> ID：13032226
> 
> 赞同：0
> 
> 时间：2012-10-23T14:01:43.127
> 
> 标签：jquery, http, redirect, post

这把我带到了疯狂的边缘。我有一个动态表单，它本质上是通过 jquery 创建的，然后通过 post 提交：

```
//post_form
document.body.appendChild(form);
form.submit(); 
```

但我这样称呼这个脚本：

```
post_form(url,params);
window.location = "/myurl"; 
```

将 window.location 放在 post_form() 调用之后永远不会发送发布请求，当调试时，我可以看到代码正在执行......有人愿意给我一个原因吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:08:39.243

代码正在执行，表单被附加到文档正文，并且它的提交开始，但是在您重定向离开页面的那一刻，页面与您的表单一起被处理，这将中止其正在进行的提交。您已经标记了您的问题，`jQuery`但您没有在示例代码中使用任何实际的 jQuery — 您应该[`.serialize()`](http://api.jquery.com/serialize/)使用表单并提交它，[`jQuery.post()`](http://api.jquery.com/jQuery.post/)或者[`jQuery.ajax()`](http://api.jquery.com/jQuery.ajax/)仅在 jQuery 调用成功回调后重定向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T14:08:50.257

就像您提交表单一样，然后很快点击不同的链接。浏览器只能执行一个“主要”请求。它要么发送一个 POST 请求并用它收到的任何响应刷新视图，要么它发送一个 GET 请求并用它收到的响应刷新视图。该脚本以非常快的速度连续执行，因此第一个 POST 请求被取消。这两个动作都是“转到另一个页面”动作，它们不能同时发生。

执行 AJAX POST 请求并在完成后通过 Javascript 重定向，或者通过 HTTP 标头重定向以响应 POST 请求。

# scala - 在 Scala 中实现“.clone”

> ID：13032227
> 
> 赞同：4
> 
> 时间：2012-10-23T14:01:47.073
> 
> 标签：scala

我试图弄清楚如何`.clone`在 Scala 中创建自己的对象。

这是为了模拟，所以可变状态是必须的，由此产生了对克隆的全部需求。在将模拟时间提前之前，我将克隆一个完整的状态结构。

这是我目前的尝试：

```
abstract trait Cloneable[A] {
  // Seems we cannot declare the prototype of a copy constructor
  //protected def this(o: A)    // to be defined by the class itself

  def myClone= new A(this)
}

class S(var x: String) extends Cloneable[S] {
  def this(o:S)= this(o.x)    // for 'Cloneable'
  def toString= x
}

object TestX {
  val s1= new S("say, aaa")
  println( s1.myClone )
} 
```

一种。为什么上面没有编译。给出：

```
错误：需要类类型但找到 A
  def myClone=new A(这个)
                   ^

```

湾。有没有办法在 trait 中声明复制构造函数 ( `def this(o:A)`)，以便使用该 trait 的类显示需要提供一个。

C。说出来有什么好处`abstract trait`吗？

最后，对于这一切，有没有更好的标准解决方案？

我研究了 Java 克隆。似乎不是为了这个。Scala`copy`也不是 - 它仅适用于案例类，它们不应该具有可变状态。

感谢您的帮助和*任何*意见。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T14:16:29.177

特征不能定义构造函数（我认为`abstract`对特征没有任何影响）。

是否有任何理由需要使用复制构造函数而不仅仅是实现克隆方法？可能不必在类上声明 [A] 类型，但我至少声明了一个 self 类型，因此编译器将确保该类型与类匹配。

```
trait DeepCloneable[A] { self: A =>
    def deepClone: A
}

class Egg(size: Int) extends DeepCloneable[Egg] {
    def deepClone = new Egg(size)
}

object Main extends App {
    val e = new Egg(3)
    println(e)
    println(e.deepClone)
} 
```

[http://ideone.com/CS9HTW](http://ideone.com/CS9HTW)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T14:36:21.000

*   一种。当您定义一个*类型参数*时，`A`它会在编译阶段后被*删除。*

    这意味着编译器使用类型参数来检查您是否使用了正确的类型，但生成的字节码不保留`A`.

    这也意味着您不能`A`在代码中用作真正的类，而只能用作“类型引用”，因为在运行时此信息会丢失。

*   b＆c。*trait*不能通过定义定义构造函数参数或辅助构造函数，它们也是抽象的定义。

    您可以做的是定义一个特征体，该特征体在具体实现的实例化时被调用

一种替代解决方案是定义一个`Cloneable` *typeclass*。有关这方面的更多信息，您可以找到很多关于该主题的博客，但我没有具体的建议。

[scalaz](https://github.com/scalaz/scalaz-type-class)有很大一部分是使用这种模式构建的，也许你可以在那里找到灵感：你可以查看[Order](https://github.com/scalaz/scalaz-type-class/blob/master/core/src/main/scala/scalaz/Order.scala)、[Equal](https://github.com/scalaz/scalaz-type-class/blob/master/core/src/main/scala/scalaz/Equal.scala)或[Show](https://github.com/scalaz/scalaz-type-class/blob/master/core/src/main/scala/scalaz/Show.scala)来了解它的要点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T16:34:31.367

它会建议一种基于类型类的方法。有了这个，也可以让现有的类是可克隆的：

```
class Foo(var x: Int)

trait Copyable[A] {
  def copy(a: A): A
}

implicit object FooCloneable extends Copyable[Foo] {
  def copy(foo: Foo) = new Foo(foo.x)
}

implicit def any2Copyable[A: Copyable](a: A) = new {
  def copy = implicitly[Copyable[A]].copy(a)
}

scala> val x = new Foo(2)
x: Foo = Foo@8d86328

scala> val y = x.copy
y: Foo = Foo@245e7588

scala> x eq y
res2: Boolean = false 
```

# entity-framework - 跨项目保持数据库与 EF 同步

> ID：13032228
> 
> 赞同：1
> 
> 时间：2012-10-23T14:01:47.867
> 
> 标签：entity-framework, wcf-data-services

我正在使用模型优先实体框架 (edmx) 在大约 4 个单独的项目中连接到我的数据库。

现在，每当我进行数据库更改时，我都必须为每个项目更新 edmx。我考虑过创建 WCF 数据服务，但我仍然需要更新每个项目中的服务引用。

有一个更好的方法吗？

# javascript - 从 Javascript 访问 NPAPI 插件的数组元素

> ID：13032229
> 
> 赞同：2
> 
> 时间：2012-10-23T14:01:48.793
> 
> 标签：javascript, arrays, element, npapi

我创建了一个 NPAPI 插件，并希望从 Javascript 访问插件中的数组元素。我使用的javascript如下：

```
var foo_plug = document.getElementById('foo');
var elem = foo_plug.array_p[index]; 
```

1.  调用 NPClass 中的所有方法来访问上面显示的代码的数组元素？
2.  我将如何返回 NPAPI 插件的数组索引处的值？
3.  数组索引如何从 Javascript 传递到 NPAPI 插件？

PS：我在访问插件中的变量时调用了 NPClass 的 hasProperty 和 getProperty 方法，并且工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:31:49.767

您需要了解的第一件事是调用链。让我们看看有问题的行：

```
var elem = foo_plug.array_p[index]; 
```

这将首先在 NPObject 上为 foo_plug 调用 NPN_GetProperty，并使用转换为字符串“array_p”的 NPIdentifier。

接下来发生的事情取决于返回的内容；如果您返回一个字符串，则 index 将是该字符串的索引。如果它是一个 int，它会给你一个错误。另一方面，如果它是一个 NPObject，则下一个调用将是该 NPObject 上的 NPN_GetProperty，其 NPIdentifier 将是一个 IntIdentifier（使用 NPN_GetIntIdentifier）或一个带有数字作为字符串的字符串标识符（使用 NPN_IdentifierIsString 来确定哪个） .

现在，如果返回的 NPObject 是一个实际的 javascript 数组，您不必担心；您可以获取窗口的 NPObject 并使用标识符“Array”且没有参数对其调用 Invoke，它将返回一个带有空数组的 NPObject；您可以使用它将东西放入其中并返回它，这将正常工作。

或者，您可以返回一个支持“长度”属性 NPN_Enumerate 的 NPObject，并且可以智能地处理数字字符串标识符或 intidentifier（实际上您需要同时处理这两者，因为某些浏览器使用每种类型）以及它是否足够像javascript 数组，您可能不知道其中的区别。

[FireBreath](http://www.firebreath.org)对所有这些选项都有很好的支持。

# c++ - 寻找一种更有效的方式在 C++ 中生成/打印“进度条”

> ID：13032237
> 
> 赞同：1
> 
> 时间：2012-10-23T14:02:23.047
> 
> 标签：c++

我正在编写一些网格生成代码，在此期间我真的很想看看我在哪里，所以我从互联网上下载了一段进度条代码，然后将它插入到我的代码中，例如：

```
std::string bar;

for(int i = 0; i < 50; i++)
{
    if( i < (percent/2))
    {
        bar.replace(i,1,"=");
    }
    else if( i == (percent/2))
    {
        bar.replace(i,1,">");
    }
    else
    {
        bar.replace(i,1," ");
    }
}

std::cout<< "\r" "[" << bar << "] ";
std::cout.width( 3 );
std::cout<< percent << "%     "
    << " ieration: " << iterationCycle << std::flush; 
```

这非常简单。但是，它大大减慢了整个过程，请注意`percent=iterI/nIter`。

我真的很生气，我想知道是否有任何更智能、更有效的方法可以将进度条打印到屏幕上。

太感谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:06:33.200

首先，您可以考虑仅在每 100 或 1000 次迭代时更新它。其次，我认为除法不是瓶颈，而是字符串操作和输出本身。

我想唯一的显着改进就是*减少输出频率*。

哦，只是为了很好的衡量 - 一种只执行代码的有效方法，比如 1024 次迭代，不是使用模运算来查看 1024 是否是除数，而是使用按位调用。类似的东西

```
if (iterationCycle & 1024) { 
```

会工作。您将计算`iterationCycle`和 1024 的按位与，只有每次第 10 位的位为 1 时才返回正数。这类操作的完成速度非常快，因为您的 CPU 具有特定的硬件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:09:09.563

这个你可能想多了。我只会在您的主应用程序代码的每个循环中输出一个字符。运行一些测试看看有多少（亿？百万？），但你不应该打印超过每秒一次。然后做：

```
std::fputc('*', stdout);
std::fflush(stdout); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:09:10.070

你真的应该检查“效率”，但几乎相同的 ist boost.progress 会起作用：

```
#include <boost/progress.hpp>
...
boost::progress_display pd(50);
for (int i=0; i<=60; i++) {
 ++pd;
} 
```

正如 Joost 已经回答的那样，输出频率较低

# html - 处理 Internet Explorer 兼容模式时的并排 Divs

> ID：13032242
> 
> 赞同：0
> 
> 时间：2012-10-23T14:02:29.597
> 
> 标签：html, css, internet-explorer-7

我正在使用 MVC-3 框架设计一个网站。虽然没有使用 IE 兼容模式，但它会正确显示，如下所示：

![一个](../Images/f8c8d647539781a3b9bf781dcdc8a934.png)

我正在使用的代码是这样的：

```
<div id="header">
        <div id="title">                                 /* NUMBER 1 */
            <img src="@Url.Content("~/Content/A_picture.png")" />
        </div>
        <div id="menucontainer">                         /* NUMBER 2 */
            <ul id="menu">
                /* some menu items*/
            </ul>
        </div>
</div>
<div id="main">                                          /* NUMBER 3 */
   @RenderBody()
</div> 
```

有一天，我不得不强迫我的代码相信它正在运行 IE7 以解决其他格式一致性问题。

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /> 
```

但是现在，强制这样做会破坏我最初的网站布局。在使用 IE7 的强制时，它看起来像这样：

![b](../Images/50cc6398f9cc832f46cb793714329711.png)

感谢您通过解释与我在一起。现在我的问题 - 我如何操纵我的 div 部分，这些部分现在已损坏，以在我的第一张图片中出现，同时仍然强制模拟 IE7？

非常感谢任何想法、想法和建议。

编辑：CSS

我认为可能有助于解决这个问题的一些 CSS 如下。抱歉，我显然应该一开始就包括这个。

```
header,
footer,
nav,
section {
    display: block;
}

header, #header {
    position: relative;
    margin-bottom: 0px;
    padding: 0;
}

nav, 
#menucontainer {
    margin-top: 40px;
}

div#title {
    display: block;
    float: left;
    text-align: left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:08:07.740

也许你需要使用`vertical-align`，因为你应该像这样设置：

```
#id_top_elements {
  display: table-cell; 
  vertical-align: bottom;
} 
```

但如果你可以展示你的 CSS，它可能是 heplfull ;)

或像这样尝试：

```
<!--[if lt IE 8]>
<style>
   #id_top_elements {
       position: relative; 
       top: -50%
   }
</style>
<![endif]–&gt; 
```

但现在你需要为顶级元素添加一些包装器，它必须有`position: absolute;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:51:51.647

令人惊讶的是，解决方案只是在#menucontainer css 中添加一行，如下所示：

```
nav, 
#menucontainer {
    margin-top: 40px;
    display: inline;
} 
```

添加的行是“显示：内联”，我将它添加到图表中的数字 2 div。

感谢所有参与此主题的人！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:29:12.593

而不是使用花车，你也可以使用

```
 display: inline-block; /*which works for most browsers including newer versions of ie, the following two lines are the fix for older versions of ie.*/
     *display: inline;
     zoom: 1; 
```

对需要“坐在”另一个对象/元素旁边的任何对象/元素执行此操作

# javascript - 谷歌地图API3，折线不在中心且未缩放

> ID：13032245
> 
> 赞同：1
> 
> 时间：2012-10-23T14:02:36.920
> 
> 标签：javascript, google-maps, google-maps-api-3, timeout, polyline

我得到了关于如何在中心获得折线的问题的答案，但这就是问题所在。当我想看地图时。地图仅在我的 div 的左上角初始化。当我调用这个函数时：

```
setTimeout(function() {
            google.maps.event.trigger(map,'resize');
                    }, 200); 
```

我可以在整个 div 中看到地图，但折线没有缩放，它位于左上角内。

我该怎么办？

我的代码：

全局定义：

```
var flightPlanCoordinates=[];
var flightPath;
var map;
var myLatLng = new google.maps.LatLng(0, 0);
var mapOptions = {
              zoom: 5,
          center: myLatLng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
                                          }; 
```

后来用的代码...

```
$.ajax({
                  type: 'POST',
                  url: 'history.php',
                  data: {
                  'd_year1':$('#select-choice-year1').val(),
                  'd_month1':   $('#select-choice-month1').val(),
                  'd_day1':$('#select-choice-day1').val(),
                  'd_year2':$('#select-choice-year2').val(),
                  'd_month2':   $('#select-choice-month2').val(),
                  'd_day2':$('#select-choice-day2').val()
                  },
                  success: function(data)//callback to be executed when the response has been received
                       {
                       if(data=="[]")
                       {

                            alert("None");

                       }else
                       {

                            data = JSON.parse(data);
                            for (var i=0;i<data.length;i++)
                            {

                                flightPlanCoordinates[i] = new google.maps.LatLng(data[i].x,data[i].y); 
                            }
                            map = new google.maps.Map(document.getElementById("map_find"),
                          mapOptions);
                        flightPath = new google.maps.Polyline({
                        path: flightPlanCoordinates,
                        strokeColor: "#8a2be2",
                        strokeOpacity: 1.0,
                        strokeWeight: 3
                      });

                    flightPath.setMap(map);
                    zoomToObject(flightPath);

                        }
                        }
                }); 
```

以及对折线进行缩放和居中的功能：

```
function zoomToObject(obj){
    var bounds = new google.maps.LatLngBounds();
    var points = obj.getPath().getArray();
    for (var n = 0; n < points.length ; n++){
        bounds.extend(points[n]);
    }
    map.fitBounds(bounds);
    setTimeout(function() {

                        google.maps.event.trigger(map,'resize');
                    }, 200);
} 
```

那么如何真正初始化地图以适应整个 div 以及如何缩放和居中折线以适应地图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T21:29:58.000

将缩放和居中功能更改为：

```
function zoomToObject(obj){
    var bounds = new google.maps.LatLngBounds();
    var points = obj.getPath().getArray();
    for (var n = 0; n < points.length ; n++){
        bounds.extend(points[n]);
    }
    map.fitBounds(bounds);
    setTimeout(function() {
                google.maps.event.trigger(map,'resize');
                map.fitBounds(bounds);
                }, 200);
} 
```

或者在调用它之前触发地图调整大小事件（在 AJAX 回调中）。

# php - 使用 Facebook SDK for PHP 登录 Facebook

> ID：13032246
> 
> 赞同：6
> 
> 时间：2012-10-23T14:02:37.247
> 
> 标签：php, facebook-graph-api, facebook-php-sdk, facebook-login, facebook-access-token

我在使用 Facebook 登录我的网站时遇到问题。

我按照developers.facebook.com 上的教程使用Facebook SDK 创建了登录，但它对我不起作用。

我写了一个简单的测试页面来找出问题所在。这是代码：

```
<!DOCTYPE html>
<html>
<head></head>
<body>
<pre>
<?php

$app_id         = '446458238729594';
$app_secret     = '********';
$redirect_uri   = 'http://mysite.localhost/';

try {

    echo( 'Including "facebook.php"...' );
    require './src/facebook.php';
    echo( "done.\n\n" );

    echo( 'Starting session...' );
    $result = session_start();
    if( $result ) {
        echo( "done.\n\n" );
        echo( "\n=====>>>>> Session array:\n" . var_export( $_SESSION, true )
                . "\n\n" );
    } else {
        echo( "fail.\n\n" );
        echo( "\n=====>>>>> Session array:\n" . var_export( $_SESSION, true )
                . "\n\n" );
    }

    echo( "Trying to get counter from the session...\n");
    if( isset( $_SESSION['counter'] ) ) {
        echo( 'Value: ' . $_SESSION['counter'] . "\n" );
        echo( "Increasing to one...\n");
        $_SESSION['counter']++;
        echo( "done.\n" );
        echo( 'Value: ' . $_SESSION['counter'] . "\n\n" );
    } else {
        echo( "fail.\n" );
        echo( "Trying to add a counter and set it's value to 0...\n");
        $_SESSION['counter'] = 0;
        echo( 'Value: ' . $_SESSION['counter'] . "\n" );
        echo( "done.\n\n" );
    }

    echo( 'Creating an instance of Facebook class...' );
    $facebook = new Facebook(
        array(
            'appId'     => $app_id,
            'secret'    => $app_secret,
        )
    );
    echo( "done.\n\n" );
    echo( "The instance of Facebook class:\n" . str_replace( $app_secret,
            '>>>APP_SECRET<<<', var_export( $facebook, true ) ) . "\n\n" );

    echo( "\n=====>>>>> Session array:\n" . var_export( $_SESSION, true )
            . "\n\n" );

    echo( 'Trying to get user ID...' );
    $user_id = $facebook->getUser();
    echo( "done.\n\n" );
    echo( "User ID:\n" . var_export( $user_id, true ) . "\n\n" );

    echo( "\n=====>>>>> Session array:\n" . var_export( $_SESSION, true )
            . "\n\n" );

    echo( 'Trying to get user profile info...' );
    try {
        $user_profile = $facebook->api( '/me' );
        echo( "done.\n\n" );
        echo( "User profile info:\n" . var_export( $user_profile, true )
                . "\n\n" );
    } catch( Exception $exception ) {
        echo( "fail. Probably user is not logged in.\n\n" );
        echo( "Exception:\n--------\n" . str_replace( $app_secret,
                '>>>APP_SECRET<<<', var_export( $exception, true ) )
                . "\n--------\n\n" );
        $user_id = null;
        echo( "User ID is now NULL.\n\n" );
    }

    echo( "\n=====>>>>> Session array:\n" . var_export( $_SESSION, true )
            . "\n\n" );

    if( $user ) {
        echo( 'Seems like user is logged in. Getting logout url...' );
        $url = $facebook->getLogoutUrl();
        echo( "done.\n\n" );
    } else {
        echo( 'Seems like user is NOT logged in. Getting login url...' );
        $url = $facebook->getLoginUrl(
            array(
                'scope'         => 'read_stream, publish_stream, user_birthday,'
                        . ' user_location, user_work_history, user_hometown,'
                        . ' user_photos',
                'redirect_uri'  => $redirect_uri,
            )
        );
        echo( "done.\n\n" );
    }
    echo( 'URL:<br></pre><a href=' . $url .">Login / Logout</a><pre>\n\n" );

    echo( "\n=====>>>>> Session array:\n"
            . var_export( $_SESSION, true ) . "\n\n" );

    if( $user ) {
        echo( 'Seems like user is still logged in. Trying to get some profile'
                . ' info...' );
        echo( "\nCreating request...\n" );
        $queries = array(
            array(
                'method'        => 'GET',
                'relative_url'  => '/' . $user,
            ),
            array(
                'method'        => 'GET',
                'relative_url'  => '/' . $user . '/home?limit=50',
            ),
            array(
                'method'        => 'GET',
                'relative_url'  => '/' . $user . '/friends',
            ),
            array(
                'method'        => 'GET',
                'relative_url'  => '/' . $user . '/photos?limit=6',
            ),
        );
        echo( "Request:\n\n" . var_export( $queries, true ) . "\n\n" );
        echo( "\nEncoding request using JSON format...\n" );
        $queries_encoded = json_encode( $queries );
        echo( "Encoded request:\n\n" . var_export( $queries_encoded, true )
                . "\n\n" );
        try {
            echo( "\nTrying to get response...\n" );
            $response = $facebook->api( '?batch=' . $queries_encoded, 'POST' );
            echo( "Response:\n\n" . var_export( $response, true ) . "\n\n" );
            echo( "\nTrying to decode response...\n" );
            echo( "\n" . json_decode( $response[0]['body'], true ) . "\n" );
            echo( "\n" . json_decode( $response[1]['body'], true ) . "\n" );
            echo( "\n" . json_decode( $response[2]['body'], true ) . "\n" );
            echo( "\n" . json_decode( $response[3]['body'], true ) . "\n" );
            echo( "\n\ndone.\n\n" );
        } catch( Exception $exception ) {
            echo( "fail.\n\n" );
            echo( "Exception:\n--------\n\n" . str_replace( $app_secret,
                    '>>>APP_SECRET<<<', var_export( $exception, true ) )
                    . "\n--------\n\n" );
        }
    } else {
        echo( 'Seems like user is still NOT logged in. At now we can\'t do'
                . ' anything. Try to login using the URL above.' );
    }

    echo( "\n\n========\n\nSession array:\n" . var_export( $_SESSION, true )
            . "\n\n" );

} catch( Exception $exception ) {
    echo( "\n\n\nAn exception have been trown:\n--------\n\n" . str_replace(
            $app_secret, '>>>APP_SECRET<<<', var_export( $exception, true ) )
            . "\n--------\n\n" );
    echo( "\n\n========\n\nSession array:\n" . var_export( $_SESSION, true )
            . "\n\n" );
}

?>
</pre>
</body>
</html> 
```

第一次访问此页面后（我没有登录 Facebook），我得到以下输出：

```
Including "facebook.php"...done.

Starting session...done.

=====>>>>> Session array:
array (
)

Trying to get counter from the session...
fail.
Trying to add a counter and set it's value to 0...
Value: 0
done.

Creating an instance of Facebook class...done.

The instance of Facebook class:
Facebook::__set_state(array(
   'sharedSessionID' => NULL,
   'appId' => '446458238729594',
   'appSecret' => '>>>APP_SECRET<<<',
   'user' => NULL,
   'signedRequest' => NULL,
   'state' => NULL,
   'accessToken' => NULL,
   'fileUploadSupport' => false,
   'trustForwarded' => false,
))

=====>>>>> Session array:
array (
  'counter' => 0,
)

Trying to get user ID...done.

User ID:
0

=====>>>>> Session array:
array (
  'counter' => 0,
)

Trying to get user profile info...fail. Probably user is not logged in.

Exception:
--------
FacebookApiException::__set_state(array(
   'result' => 
  array (
    'error_code' => 7,
    'error' => 
    array (
      'message' => 'Failed to connect to 2a03:2880:2050:1f01:face:b00c:0:2: Network is unreachable',
      'type' => 'CurlException',
    ),
  ),
   'message' => 'Failed to connect to 2a03:2880:2050:1f01:face:b00c:0:2: Network is unreachable',
   'string' => '',
   'code' => 7,
   'file' => '/srv/www/htdocs/mysite/web/src/base_facebook.php',
   'line' => 967,
   'trace' => 
  array (
    0 => 
    array (
      'file' => '/srv/www/htdocs/mysite/web/src/base_facebook.php',
      'line' => 899,
      'function' => 'makeRequest',
      'class' => 'BaseFacebook',
      'type' => '->',
      'args' => 
      array (
        0 => 'https://graph.facebook.com/me',
        1 => 
        array (
          'method' => 'GET',
          'access_token' => '446458238729594|>>>APP_SECRET<<<',
        ),
      ),
    ),
    1 => 
    array (
      'file' => '/srv/www/htdocs/mysite/web/src/base_facebook.php',
      'line' => 866,
      'function' => '_oauthRequest',
      'class' => 'BaseFacebook',
      'type' => '->',
      'args' => 
      array (
        0 => 'https://graph.facebook.com/me',
        1 => 
        array (
          'method' => 'GET',
        ),
      ),
    ),
    2 => 
    array (
      'function' => '_graph',
      'class' => 'BaseFacebook',
      'type' => '->',
      'args' => 
      array (
        0 => '/me',
      ),
    ),
    3 => 
    array (
      'file' => '/srv/www/htdocs/mysite/web/src/base_facebook.php',
      'line' => 644,
      'function' => 'call_user_func_array',
      'args' => 
      array (
        0 => 
        array (
          0 => 
          Facebook::__set_state(array(
             'sharedSessionID' => NULL,
             'appId' => '446458238729594',
             'appSecret' => '>>>APP_SECRET<<<',
             'user' => 0,
             'signedRequest' => NULL,
             'state' => NULL,
             'accessToken' => '446458238729594|>>>APP_SECRET<<<',
             'fileUploadSupport' => false,
             'trustForwarded' => false,
          )),
          1 => '_graph',
        ),
        1 => 
        array (
          0 => '/me',
        ),
      ),
    ),
    4 => 
    array (
      'file' => '/srv/www/htdocs/mysite/web/index.php',
      'line' => 69,
      'function' => 'api',
      'class' => 'BaseFacebook',
      'type' => '->',
      'args' => 
      array (
        0 => '/me',
      ),
    ),
  ),
   'previous' => NULL,
))
--------

User ID is now NULL.

=====>>>>> Session array:
array (
  'counter' => 0,
)

Seems like user is NOT logged in. Getting login url...done.

URL:
Login / Logout

=====>>>>> Session array:
array (
  'counter' => 0,
  'fb_446458238729594_state' => '84260edcd60940884d261812496a488c',
)

Seems like user is still NOT logged in. At now we can't do anything. Try to login using the URL above.

========

Session array:
array (
  'counter' => 0,
  'fb_446458238729594_state' => '84260edcd60940884d261812496a488c',
) 
```

然后我尝试使用给定的 URL 登录。它引导我进入我的 Facebook 应用授权页面。确认请求的权限后，它会将我重定向到此 URL：

```
http://mysite.localhost/?state=84260edcd60940884d261812496a488c&code=AQDkHPlXXweEiTjXg-sUXwwQAy0_xRYc89Opfz6AF9dlGOomCSG7fjf0440ctHuADKMEG4P7CheeNx9PnwUta-jkfpm03MjDCKyieOZpIPG-evlKYm64mRxD2Q5f_-HJROIC9I_-lHswr5RT3huSQySA55pD28b07Ouv87NqihZ1brGfU-_0LyhcdldtNikb-2xn6NRpa17xEmU37pBqDV1r#_=_ 
```

之后，我希望我已登录并且我的页面会从我的 Facebook 个人资料中检索并显示一些信息，但事实并非如此。我得到这个输出：

```
Including "facebook.php"...done.

Starting session...done.

=====>>>>> Session array:
array (
  'counter' => 0,
  'fb_446458238729594_state' => '84260edcd60940884d261812496a488c',
)

Trying to get counter from the session...
Value: 0
Increasing to one...
done.
Value: 1

Creating an instance of Facebook class...done.

The instance of Facebook class:
Facebook::__set_state(array(
   'sharedSessionID' => NULL,
   'appId' => '446458238729594',
   'appSecret' => '>>>APP_SECRET<<<',
   'user' => NULL,
   'signedRequest' => NULL,
   'state' => '84260edcd60940884d261812496a488c',
   'accessToken' => NULL,
   'fileUploadSupport' => false,
   'trustForwarded' => false,
))

=====>>>>> Session array:
array (
  'counter' => 1,
  'fb_446458238729594_state' => '84260edcd60940884d261812496a488c',
)

Trying to get user ID...done.

User ID:
0

=====>>>>> Session array:
array (
  'counter' => 1,
)

Trying to get user profile info...fail. Probably user is not logged in.

Exception:
--------
FacebookApiException::__set_state(array(
   'result' => 
  array (
    'error_code' => 7,
    'error' => 
    array (
      'message' => 'Failed to connect to 2a03:2880:2050:1f01:face:b00c:0:2: Network is unreachable',
      'type' => 'CurlException',
    ),
  ),
   'message' => 'Failed to connect to 2a03:2880:2050:1f01:face:b00c:0:2: Network is unreachable',
   'string' => '',
   'code' => 7,
   'file' => '/srv/www/htdocs/mysite/web/src/base_facebook.php',
   'line' => 967,
   'trace' => 
  array (
    0 => 
    array (
      'file' => '/srv/www/htdocs/mysite/web/src/base_facebook.php',
      'line' => 899,
      'function' => 'makeRequest',
      'class' => 'BaseFacebook',
      'type' => '->',
      'args' => 
      array (
        0 => 'https://graph.facebook.com/me',
        1 => 
        array (
          'method' => 'GET',
          'access_token' => '446458238729594|>>>APP_SECRET<<<',
        ),
      ),
    ),
    1 => 
    array (
      'file' => '/srv/www/htdocs/mysite/web/src/base_facebook.php',
      'line' => 866,
      'function' => '_oauthRequest',
      'class' => 'BaseFacebook',
      'type' => '->',
      'args' => 
      array (
        0 => 'https://graph.facebook.com/me',
        1 => 
        array (
          'method' => 'GET',
        ),
      ),
    ),
    2 => 
    array (
      'function' => '_graph',
      'class' => 'BaseFacebook',
      'type' => '->',
      'args' => 
      array (
        0 => '/me',
      ),
    ),
    3 => 
    array (
      'file' => '/srv/www/htdocs/mysite/web/src/base_facebook.php',
      'line' => 644,
      'function' => 'call_user_func_array',
      'args' => 
      array (
        0 => 
        array (
          0 => 
          Facebook::__set_state(array(
             'sharedSessionID' => NULL,
             'appId' => '446458238729594',
             'appSecret' => '>>>APP_SECRET<<<',
             'user' => 0,
             'signedRequest' => NULL,
             'state' => NULL,
             'accessToken' => '446458238729594|>>>APP_SECRET<<<',
             'fileUploadSupport' => false,
             'trustForwarded' => false,
          )),
          1 => '_graph',
        ),
        1 => 
        array (
          0 => '/me',
        ),
      ),
    ),
    4 => 
    array (
      'file' => '/srv/www/htdocs/mysite/web/index.php',
      'line' => 69,
      'function' => 'api',
      'class' => 'BaseFacebook',
      'type' => '->',
      'args' => 
      array (
        0 => '/me',
      ),
    ),
  ),
   'previous' => NULL,
))
--------

User ID is now NULL.

=====>>>>> Session array:
array (
  'counter' => 1,
)

Seems like user is NOT logged in. Getting login url...done.

URL:
Login / Logout

=====>>>>> Session array:
array (
  'counter' => 1,
  'fb_446458238729594_state' => '6ae5ea9e5f7199fb6d19793905dcdd65',
)

Seems like user is still NOT logged in. At now we can't do anything. Try to login using the URL above.

========

Session array:
array (
  'counter' => 1,
  'fb_446458238729594_state' => '6ae5ea9e5f7199fb6d19793905dcdd65',
) 
```

请帮我弄清楚，为什么登录不起作用？为什么 Facebook 类的实例不检索访问令牌？为什么 Facebook::getUser() 方法总是返回 0？我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T16:32:56.837

打算在这里尝试一下-请耐心等待：

可能原因 1：您的 FB 代码看起来不错 - 但您的错误表明：

“无法连接到 2a03:2880:2050:1f01:face:b00c:0:2：网络无法访问”，这表明存在 cURL 问题。

您能否确认您的 cURL 已在您的网络服务器上安装/运行？一个简单的 phpinfo(); 会告诉你。

可能的原因 2：检查您的应用程序 URL 是否设置为运行测试的位置。您的重定向 URI 是“http://mysite.localhost/” - 因此请确保在您的应用设置页面中它对应。

最后，

只需从基础开始，然后开始添加所有额外的代码。这对我有用：

```
<?php

require 'src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'xxxxxxxxxxxxxxxxxxx',
  'secret' => 'xxxxxxxxxxxxxxxxxxx',
));

// See if there is a user from a cookie
$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
$logoutUrl = $facebook->getLogoutUrl();
  } catch (FacebookApiException $e) {
    echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>';
    $user = null;
$loginUrl = $facebook->getLoginUrl($params);
  }
}

?>

<?php if ($user) { ?>
    Your user profile is
    <?php print htmlspecialchars(print_r($user_profile, true)) ?>
    <a href="<?php echo $logoutUrl; ?>">Logout</a>
<?php } else { ?>
    <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
<?php } ?>' 
```

# combobox - 带有 FXML 的组合框 JavaFx

> ID：13032257
> 
> 赞同：4
> 
> 时间：2012-10-23T14:03:12.677
> 
> 标签：combobox, javafx-2, javafx, fxml

我如何使用FXML**组合****框**？我需要设置动态数据..有人有例子吗？

 **这是我的 Sample.fxml

```
<AnchorPane id="AnchorPane" prefHeight="200" prefWidth="320" xmlns:fx="http://javafx.com/fxml" fx:controller="javafxapplication15.SampleController">
    <children>
        <Button layoutX="126" layoutY="90" text="Click Me!" onAction="#handleButtonAction" fx:id="button" />
        <Label layoutX="126" layoutY="120" minHeight="16" minWidth="69" fx:id="label" />
        <ComboBox  fx:id="ciudad" prefWidth="123.0" GridPane.columnIndex="1" GridPane.rowIndex="3">                
            <cellValueFactory>
                    <PropertyValueFactory property="firstName" />
            </cellValueFactory>
        </ComboBox>
    </children>
</AnchorPane> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T15:36:40.463

请参阅此[JavaFX FXML ComboBox 演示应用程序](https://gist.github.com/3062859)。[对于动态数据，您可以使用Velocity](http://velocity.apache.org/)等动态生成 fxml ，或者可能更好的是，填充 ObservableList 并将其提供给 fxml 注入的 ComboBox 实例。

这是演示应用程序的修改版本，它在控制器初始化程序中填充 ComboBox 项的 ObservableList。

*水果组合.css*

```
/** fruitcombo.css
place in same directory as FruitComboApplication.java
ensure build system copies the css file to the build output path */

.layout {
  -fx-background-color: cornsilk;
}

#selected-fruit-frame {
  -fx-border-color: burlywood;
  -fx-border-width: 5;
  -fx-background-color: white;
}

.bold-label {
  -fx-font-weight: bold;
} 
```

*水果组合.fxml*

```
<?xml version="1.0" encoding="UTF-8"?>

<!-- fruitcombo.fxml
     place in same directory as FruitComboApplication.java
     ensure build system copies the fxml file to the build output path -->

<?import java.lang.*?>
<?import java.net.*?>
<?import java.util.*?>
<?import javafx.collections.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>
<?scenebuilder-stylesheet fruitcombo.css?>

<AnchorPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="205.0" prefWidth="168.0" styleClass="layout" xmlns:fx="http://javafx.com/fxml" fx:controller="fruit.FruitComboController">
  <children>
    <ComboBox fx:id="fruitCombo" layoutX="15.0" layoutY="33.0" prefWidth="90.0" promptText="choose"/>
    <Label id="fruitSelectorLabel" layoutX="15.0" layoutY="10.0" styleClass="bold-label" text="Fruit Selector" />
    <VBox alignment="TOP_CENTER" layoutX="14.0" layoutY="62.0" prefHeight="134.0" prefWidth="140.0" spacing="8.0">
      <children>
        <StackPane id="selected-fruit-frame" minHeight="100.0" minWidth="118.0" prefHeight="108.0" prefWidth="140.0">
          <children>
            <ImageView fx:id="orangeImage" fitHeight="91.99999237060547" fitWidth="122.66666035739114" pickOnBounds="true" preserveRatio="true" visible="false">
              <image>
                <Image url="http://i.i.com.com/cnwk.1d/i/tim/2011/03/10/orange_iStock_000001331357X_540x405.jpg" preserveRatio="false" smooth="false" />
              </image>
            </ImageView>
            <ImageView fx:id="pearImage" fitHeight="93.0" fitWidth="124.0" pickOnBounds="true" preserveRatio="true" visible="false">
              <image>
                <Image url="http://smoothiejuicerecipes.com/pear.jpg" preserveRatio="false" smooth="false" />
              </image>
            </ImageView>
            <ImageView fx:id="appleImage" fitHeight="93.0" fitWidth="124.0" pickOnBounds="true" preserveRatio="true" visible="false">
              <image>
                <Image url="http://uhallnyu.files.wordpress.com/2011/11/green-apple.jpg" preserveRatio="false" smooth="false" />
              </image>
            </ImageView>
          </children>
        </StackPane>
        <Label fx:id="selectedFruit" textAlignment="CENTER" />
      </children>
    </VBox>
  </children>
  <stylesheets>
    <URL value="@fruitcombo.css" />
  </stylesheets>
</AnchorPane> 
```

*FruitComboController.java*

```
package fruit;

import java.net.URL;
import java.util.ResourceBundle;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.control.ComboBox;
import javafx.scene.control.Label;
import javafx.scene.image.ImageView;

/** JavaFX fxml controller for fruit combo fxml demo application. */
public class FruitComboController implements Initializable {

  @FXML // fx:id="appleImage"
  private ImageView appleImage; // Value injected by FXMLLoader

  @FXML // fx:id="fruitCombo"
  private ComboBox<String> fruitCombo; // Value injected by FXMLLoader

  @FXML // fx:id="orangeImage"
  private ImageView orangeImage; // Value injected by FXMLLoader

  @FXML // fx:id="pearImage"
  private ImageView pearImage; // Value injected by FXMLLoader

  @FXML // fx:id="selectedFruit"
  private Label selectedFruit; // Value injected by FXMLLoader

  @Override // This method is called by the FXMLLoader when initialization is complete
  public void initialize(URL fxmlFileLocation, ResourceBundle resources) {
    assert appleImage != null : "fx:id=\"appleImage\" was not injected: check your FXML file 'fruitcombo.fxml'.";
    assert fruitCombo != null : "fx:id=\"fruitCombo\" was not injected: check your FXML file 'fruitcombo.fxml'.";
    assert orangeImage != null : "fx:id=\"orangeImage\" was not injected: check your FXML file 'fruitcombo.fxml'.";
    assert pearImage != null : "fx:id=\"pearImage\" was not injected: check your FXML file 'fruitcombo.fxml'.";
    assert selectedFruit != null : "fx:id=\"selectedFruit\" was not injected: check your FXML file 'fruitcombo.fxml'.";

    // populate the fruit combo box with item choices.
    fruitCombo.getItems().setAll("Apple", "Orange", "Pear");

    // bind the selected fruit label to the selected fruit in the combo box.
    selectedFruit.textProperty().bind(fruitCombo.getSelectionModel().selectedItemProperty());

    // listen for changes to the fruit combo box selection and update the displayed fruit image accordingly.
    fruitCombo.getSelectionModel().selectedItemProperty().addListener(new ChangeListener<String>() {
      @Override public void changed(ObservableValue<? extends String> selected, String oldFruit, String newFruit) {
        if (oldFruit != null) {
          switch(oldFruit) {
            case "Apple": appleImage.setVisible(false); break;
            case "Orange": orangeImage.setVisible(false); break;
            case "Pear": pearImage.setVisible(false); break;
          }
        }
        if (newFruit != null) {
          switch(newFruit) {
            case "Apple": appleImage.setVisible(true); break;
            case "Orange": orangeImage.setVisible(true); break;
            case "Pear": pearImage.setVisible(true); break;
          }
        }
      }
    });
  }
} 
```

*FruitComboApplication.java*

```
package fruit;

import java.io.IOException;
import java.net.URL;
import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Scene;
import javafx.scene.image.Image;
import javafx.scene.layout.AnchorPane;
import javafx.stage.Stage;

/** Main application class for fruit combo fxml demo application */
public class FruitComboApplication extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(Stage stage) throws IOException {
    stage.setTitle("Choices");
    stage.getIcons().add(new Image("http://files.softicons.com/download/application-icons/pixelophilia-icons-by-omercetin/png/32/apple-green.png"));
    AnchorPane layout = FXMLLoader.load(
      new URL(FruitComboApplication.class.getResource("fruitcombo.fxml").toExternalForm())
    );
    stage.setScene(new Scene(layout));
    stage.show();
  }
} 
```

示例程序输出：

![示例程序输出](../Images/948b692f16bf90d88681c3c33a7ad86c.png)**

# jquery - JQM Listview 加载和点击缓慢

> ID：13032258
> 
> 赞同：1
> 
> 时间：2012-10-23T14:03:19.137
> 
> 标签：jquery, json, listview, jquery-mobile

我最近开始为我所在的开普敦市创建一个交通移动网站，以庆祝交通月。它似乎运作良好，但是我从用户那里收到一致的反馈，他们特别是在与一个列表视图作斗争，这是加载到这个多页中的“位置”列表视图：http: [//findmyway.mobi/GoldenArrow/index。 aspx](http://findmyway.mobi/GoldenArrow/index.aspx)

该列表是通过页面加载时的 JSON 对象动态创建的，因此我希望一旦用户单击位置链接以显示列表，它应该立即加载，因为它已经在初始页面加载时创建。

滞后似乎只在移动设备而不是台式机上出现问题，并且在使用 JQM listview-filter 以及选择列表项时会发生。下面是生成位置列表视图的代码。如您所见，此代码在最初加载多页时运行一次，因此在用户单击位置列表视图时应该很容易完成。我已经简化了 JS，并插入了一个 APPKey 供测试使用：

```
if (event.type == 'pageinit') {
jsonURL = "http://api.wimt.co.za/v1/json/public.svc/" + "GetStopNames?op=metrorail&appKey=" + "9A4A49F1-7051-45C6-B4B1-10DF2C016874";

$.ajax({
    url: jsonURL,
    dataType: 'jsonp',
    success: function (data) {
        $.each(data, function (key, val) {
            items = [];
            $.each(data['GetStopNamesResult']['Results'], function (index, value) {
                if (value.charAt(0).toUpperCase() == curChar) {
                    items.push('<li class="ui-btn-icon-left" data-icon="arrow-l"><a href="#' + provider + '"  data-direction="reverse">' + value + '</a>');
                }
                else {
                    curChar = value.charAt(0).toUpperCase();
                    items.push('<li data-role="list-divider">' + curChar + '</li>');
                    items.push('<li class="ui-btn-icon-left" data-icon="arrow-l"><a href="#' + provider + '"  data-direction="reverse">' + value + '</a></li>');
                }
            });
            $('#locList').append(items.join(''));

            for (i = 0; i < items.length; i++) {
                items[i].replace('locListIcon', 'destListIcon');
            }
            $('#destList').append(items.join(''));
        });
    },
    error: function () {}
}); 
```

}

以下是上述 JS 影响的 HTML：

```
 <!-- Start of Location Selection page -->
    <div data-role="page" id="GAloc" data-title="Golden Arrow Stop Locations" data-theme="a" data-content-theme="a">
        <div data-role="header" data-theme="e"><h1>Locations</h1><a data-rel="back">Back</a></div>
        <div data-role="content">   
            <ul id="locList" data-role="listview" data-inset="true" data-filter="true" data-split-theme="e" data-divider-theme="e"></ul>    
        </div>
        <div data-role="footer" class="header" data-theme="f"><img class="banner" src="../img/banner/greenpopBanner.png" alt="http://www.greenpop.org"/></div>
    </div> 
```

从构思到发布，这是一个疯狂的 34 天，这是我无法理解的最后一个与性能相关的问题。我希望有人可以帮助我解决这个问题。

非常感谢，德文

# java - Android 警报管理器和通知

> ID：13032259
> 
> 赞同：2
> 
> 时间：2012-10-23T14:03:26.243
> 
> 标签：java, android, notifications, alarmmanager

以下代码不起作用。也试试这个而不是getapplicationcontext。我需要一个提示：

```
public class AlarmReceiver extends BroadcastReceiver {
     @Override
     public void onReceive(Context context, Intent intent) {     
         NotificationCompat.Builder nb = new NotificationCompat.Builder();
         nb.setContentTitle("title");
         nb.setContentText("message");
         nb.setSmallIcon(R.drawable.ic_launcher);
         NotificationManager nm = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
         final Intent notificationIntent = new Intent(getApplicationContext(), MainActivity.class);
         notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
         final PendingIntent contentIntent = PendingIntent.getActivity(getApplicationContext(), 0, notificationIntent, 0);
         nb.setContentIntent(contentIntent);
         Notification notification = nb.getNotification();
         nm.notify(0, notification);
      }

    } 
```

onclick 后如何删除通知？

**更新：** 我解决了一个错误。但是还有一个错误：

![截屏](../Images/c3aa6051da28f04d398516135c98b684.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:58:02.550

用 context.getSystemService 替换 getSystemService！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:03:01.413

BroadcastReceivers 没有上下文，所以你不能这样做。

您应该将收到的意图转发给服务或活动，并让该类可以处理通知。

# jmeter - 使用JMeter，如果我们增加负载，我们测试的服务器是否有可能崩溃？

> ID：13032261
> 
> 赞同：-2
> 
> 时间：2012-10-23T14:03:27.980
> 
> 标签：jmeter

如果假设我将使用 5000 个线程或更多线程运行负载测试，那么被测主服务器是否会在某个级别崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:58:28.123

正如 EJP 所说，JMeter 的目的是找出测试应用程序的极限以及它在性能下的反应。

所以是的，这是完全可能的。

您应该阅读 JMeter 手册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:04:43.227

如果您正在进行任何类型的性能测试（负载、压力、浸泡等），您将想知道您的应用程序服务器在什么时候崩溃，即它的断点。

一旦你确定了你的上限是多少，开始回拨线程数，直到你找到应用程序的“最佳位置”，例如 CPU 使用率 <80% 和 >70%

# tfs - TFS - 允许用户撤消结帐

> ID：13032262
> 
> 赞同：0
> 
> 时间：2012-10-23T14:03:29.347
> 
> 标签：tfs

有没有办法允许用户撤消另一个用户的结帐而不给他们完整的管理员角色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:20:34.823

如果是一组用户（例如贡献者组），那么您可以简单地更新该组的权限。

在源代码管理资源管理器中转到团队项目的根目录，右键单击并从上下文菜单中选择“安全”。在出现的窗口中，在顶部面板中选择您的贡献者组，然后向下滚动到“撤消其他用户的更改”并选择“允许”复选框。 ![Tfs 源代码管理权限](../Images/330e255cb0dc24745d95d1c2690146fa.png)

如果您想限制可以执行此操作的用户，请创建一个新的 TFS 组。

# version-control - 为什么在一台机器上从 CVS 迁移到 Mercurial 失败，而在另一台机器上却没有？

> ID：13032266
> 
> 赞同：1
> 
> 时间：2012-10-23T14:03:47.743
> 
> 标签：version-control, mercurial, repository, cvs

我正在使用以下命令将 CVS 存储库转换为 Mercurial：

```
cvs -d :pserver:<user>@<cvsroot> mymodule
hg convert mymodule 
```

在 Ubuntu 12.04 机器上，这可以工作，并生成一个有效的 Mercurial 存储库。在 Fedora 17 机器上它花了一些时间工作，然后失败并出现以下错误：

```
...
38000 <commit message>
37930 changeset entries
sorting...
converting...
37929 Initial Checkin.
cvs server: cvs checkout: cannot find module `mymodule/<cvsroot>/<some file>` - ignored
abort: unknown CVS response: error 
```

编辑：起初我忽略了这一点，但它找不到的路径有点有趣；它由模块名称后跟 CVSROOT 和实际路径组成。

两台机器都有相同的 .hgrc 文件并且都运行 CVS 1.12.13。唯一似乎相关的环境变量是 CVSROOT，它在两台机器上都是相同的，并且设置为与我`<cvsroot>`上面的占位符相同的值。

每次产生错误的文件都是相同的，但它是一个完全正常的文件；我无法识别任何将它与任何其他文件区分开来的东西。

为了清楚起见，我知道我可以简单地使用工作机器，并且我知道还有许多其他工具，例如 cvs2svn[hg] 也可以进行存储库转换。但我对此不感兴趣；我想了解这个具体问题。

为什么同一存储库的转换在不同的机器上会失败，有哪些进一步调试的策略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:16:29.403

事实证明，Ubuntu 机器有一个对该存储库的现有签出，该存储库最初是使用`<cvsroot>`指定为`<server>:/<path>/`. 我使用的命令将其指定为`<server>/<path>/`，不带冒号。

CVS 接受这两种形式——带和不带冒号——但是在 hg convert 的 cvsps.py 中有一个特殊的函数假定前者。如果最初签出存储库时没有冒号，则 hg convert 不会正确地从文件名中去除前缀​​。这最终导致它使用错误的路径，正如我在错误消息中注意到的那样，当它尝试下拉文件修订时。

所以它可以在 Ubuntu 机器上运行，因为它最初是用冒号签出的，随后使用非冒号形式的签出只是在不更改 /CVS/Root 的内容的情况下更新它，hg convert 读取该文件以查找根。

为了让另一台机器正常工作，我所要做的就是 rm 存储库并使用在服务器和路径之间包含冒号的 cvsroot 将其检查干净。

# magento - 更改 Magento 中结帐按钮的显示顺序

> ID：13032267
> 
> 赞同：4
> 
> 时间：2012-10-23T14:03:53.193
> 
> 标签：magento, shopping-cart

我需要按顺序在购物车页面中放置结帐按钮

```
1) Proceed to checkout 
2) Google checkout 
3) Paypal Express 
```

checkout.xml 里面

```
 <checkout_cart_index>
          <block type="core/text_list" name="checkout.cart.methods" as="methods" translate="label">
                <label>Payment Methods After Checkout Button</label>
                <block type="checkout/onepage_link" name="checkout.cart.methods.onepage"  as="testproceed" after="-" template="checkout/onepage/link.phtml"/>
                <block type="checkout/multishipping_link" name="checkout.cart.methods.multishipping" template="checkout/multishipping/link.phtml"/>
            </block> 
```

googlecheckout.xml

```
 <reference name="checkout.cart.methods">
        <block type="googlecheckout/link" name="checkout.cart.methods.googlecheckout.bottom" after="testproceed" as="testgoogle" template="googlecheckout/link.phtml"/>
    </reference> 
```

贝宝.xml

```
 <reference name="checkout.cart.methods">
        <block type="paypal/express_shortcut" name="checkout.cart.methods.paypal_express.bottom" as="testpaypal"  after="testgoogle"  template="paypal/express/shortcut.phtml">
            <action method="setIsQuoteAllowed"><value>1</value></action>
             <action method="setIsInCatalogProduct"><value>1</value></action>
                <action method="setShowOrPosition"><value>before</value></action>
        </block>
    </reference> 
```

但没有得到正确的顺序。请帮忙..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T05:55:21.670

我刚换

```
 <block type="paypal/express_shortcut" after="checkout.cart.methods.googlecheckout.bottom"  name="checkout.cart.methods.paypal_express.bottom"  template="paypal/express/shortcut.phtml"> 
```

# java - 从 JSP 向 servlet 发送响应和请求

> ID：13032269
> 
> 赞同：2
> 
> 时间：2012-10-23T14:03:54.907
> 
> 标签：java, jsp, servlets, request, response

如何通过代码将我的响应和请求对象从 jsp 文件发送到 servlet？我不想提交表格左右。

我试过了：

```
response.setRedirect("my page"): 
```

但随后它说：

```
Exception in thread "main" org.apache.http.client.HttpResponseException: Moved Temporarily
    at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:68)
    at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:54)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:945)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:919)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:910)
    at com.xx.xx.client.Client.sendPOSTRequest(Client.java:185)
    at com.xx.xx.client.Client.main(Client.java:46) 
```

**澄清**一下：我有一个将发布请求发送到 JSP 文件的客户端。该 JSP 文件解析文件并将所需信息放入会话中。我想从这个 jsp 文件中调用一个 servlet 来将一些东西添加到数据库中。我认为这个错误代码是由这一行抛出的`String responseBody = httpclient.execute(httppost, responseHandler);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:21:42.177

您可以只`<jsp:include>`在 servlet URL 上使用。

```
<jsp:include page="/servletURL" /> 
```

servlet`doXxx()`方法将仅使用当前请求/响应调用。请注意，servlet 之后不能转发到另一个 JSP。它必须直接写入响应，或者设置一些 JSP 可以在该行*之后拦截的请求/会话属性。*`<jsp:include>`

请注意，这是一个糟糕的设计。您正在滥用 JSP 作为前端控制器。应该反过来。servlet 应充当前端控制器，而 JSP 应充当视图。客户端应该将请求直接发送到 servlet URL，而不是发送到某个 JSP 文件。servlet 应该执行业务工作并最终转发给 JSP，让它以 HTML 形式呈现结果。另请参阅[我们的 servlets 标签 wiki 页面](https://stackoverflow.com/tags/servlets/info)以获取一些 Hello World 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:10:54.837

你可以使用[RequestDispatcher](http://docs.oracle.com/javaee/5/api/javax/servlet/RequestDispatcher.html) `forward(ServletRequest request, ServletResponse response)`

> 将来自 servlet 的请求转发到服务器上的另一个资源（servlet、JSP 文件或 HTML 文件）。

你可以这样做：

```
ServletContext context= getServletContext();
RequestDispatcher rd= context.getRequestDispatcher("/YourServlet");
rd.forward(request, response); 
```

**更新**

还要注意您的代码，`response.setRedirect`但`response.sendRedirect(...)`请注意，此方法不会按您希望的方式工作，因为它只是要求浏览器向您的 servlet 发出新请求，而不是将您的`request`和`response`对象转发给该 servlet。有关更多信息，请参阅[RequestDispatcher.forward() 与 HttpServletResponse.sendRedirect()](https://stackoverflow.com/questions/2047122/requestdispatcher-interface-vs-sendredirect)

# mysql - mysql：尝试使用远程 IP 连接到 localhost 时连接被拒绝

> ID：13032270
> 
> 赞同：18
> 
> 时间：2012-10-23T14:03:58.193
> 
> 标签：mysql

当我尝试使用它的远程 IP 地址连接到本地 mysql 数据库时，我被拒绝访问。当我尝试从外部机器连接到同一个数据库时，它可以正常工作。当我使用 localhost 连接到本地数据库时，它也可以正常工作。例如，如果数据库服务器的 ip 为 1.2.3.4，那么我会得到以下结果：

```
# From the db server
mysql -u username -h localhost -p #works perfectly
mysql -u username -h 127.0.0.1 -p #works perfectly
mysql -u username -h 1.2.3.4 -p #Access denied

# From any other machine
mysql -u username -h 1.2.3.4 -p #works perfectly 
```

我可以做些什么来允许使用其远程 IP 地址对我的数据库进行本地访问？数据库服务器操作系统为Fedora 15，MySQL版本为5.5.23。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-06-29T18:01:12.190

尝试编辑/添加`bind-address = 0.0.0.0`到您的文件`[mysqld]`部分`/etc/mysql/mysql.conf.d/mysqld.cnf`并重新启动*MySQL Service*。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-23T15:00:51.090

我自己找到了解决问题的方法，但我仍然不太明白为什么它不起作用：

我在主机 % 和 localhost 上授予该用户权限：

```
# Before
+-----------------+------------+
| Host            | User       |
+-----------------+------------+
| %               | username   |
| localhost       | username   |
+-----------------+------------+ 
```

通过这些设置，我得到了上面显示的结果。当我在主机上向该用户授予权限时，它突然起作用了。

```
# After
+-----------------+------------+
| Host            | User       |
+-----------------+------------+
| %               | username   |
| localhost       | username   |
| <myIpAddress>   | username   |
+-----------------+------------+ 
```

显然 % 确实适用于远程连接，但不适用于本地连接。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-09-05T16:01:35.993

此特定问题可能是由主机名解析引起的。

`my.cnf`我已经通过从我的配置文件中删除这个变量来解决我的特殊情况：

**跳过名称解析**

当然，要么通过放置一个井号来标记变量，要么在确保备份它之后`#`从你的变量中删除它。`my.cnf`

# ruby-on-rails - Ruby on Rails：在某些情况下无法更新表条目

> ID：13032278
> 
> 赞同：0
> 
> 时间：2012-10-23T14:04:26.700
> 
> 标签：ruby-on-rails, ruby, controller

我有一个应用程序，允许用户在名为 Projects 的表中输入和编辑项目。其中一个领域允许他们检查该项目的技术。它们存储在名为 Technols 的单独表中，表之间的关系称为 Projecttechnols。

例如，我有一个 Project X，它有很多技术，tech1、tech2 和 tech3。如果我进入编辑项目，我可以将技术删除或添加到项目中，并随意更新项目。但是，当我尝试将所有项目从项目中删除时，我的问题就开始了。如果我尝试这个，什么都不会改变，技术保持不变。

我创建一个没有技术的新项目没有问题，我可以返回该项目并通过插入技术进行编辑，但如果我返回并添加技术再次编辑它，并尝试将它们全部删除。没发生什么事。

**这是我在项目控制器中的新、编辑、创建和更新操作：**

```
def new
  @project = Project.new
  @technol = Technol.new(params[:tech])

  @all_technols = Technol.all

  @project_technol = @project.projecttechnols.build

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @project }
  end
end

# GET /projects/1/edit
def edit
  @project = Project.find(params[:id])
  @project_technol = @project.projecttechnols.build

  puts @project.inspect
  puts @project.technols.inspect
end

# POST /projects
# POST /projects.json
def create  
  @project = Project.new(params[:project])
  @project.client = params[:new_client] unless params[:new_client].blank?
  @project.role = params[:new_role] unless params[:new_role].blank?
  @project.industry = params[:new_industry] unless params[:new_industry].blank?
  @project.business_div = params[:new_business_div] unless params[:new_business_div].blank?

  if !params[:technols].nil?
    params[:technols][:id].each do |tech|
      if !tech.empty?
        @project_technol = @project.projecttechnols.build(:technol_id => tech) 
      end
    end
  end

  respond_to do |format|
    if @project.save
      format.html { redirect_to @project, notice: 'Project was successfully created.' }
      format.json { render json: @project, status: :created, location: @project }
    else
      format.html { render action: "new" }
      format.json { render json: @project.errors, status: :unprocessable_entity }
    end
  end
end

# PUT /projects/1
# PUT /projects/1.json
# PUT /projects/1
# PUT /projects/1.json
def update
  @project = Project.find(params[:id])

  puts @project.inspect
  puts @project.technols.inspect

  params['project'][:client] = params[:new_client] unless params[:new_client].blank?
  params['project'][:role] = params[:new_role] unless params[:new_role].blank?
  params['project'][:industry] = params[:new_industry] unless params[:new_industry].blank?
  params['project'][:business_div] = params[:new_business_div] unless params[:new_business_div].blank?              

  respond_to do |format|
    if @project.update_attributes(params[:project])
      format.html { redirect_to @project, notice: 'Project was successfully updated.' }
      format.json { head :no_content }
    else
      format.html { render action: "edit" }
      format.json { render json: @project.errors, status: :unprocessable_entity }
    end
  end
end 
```

**这是我对技术位的编辑视图：**

```
<div class="tech" STYLE="text-align: left;">
  <b>Technologies:</b>
  <style>
    .split { text-align:left; }
  </style>   

  <p>
    <ul>
      <% for technol in Technol.all %> 
        <li class="split"> 
          <%= check_box_tag "project[technol_ids][]", technol.id,  @project.technols.include?(technol) %> 
          <%= technol.tech %> 
        </li>
      <% end %> 
    </ul>
  </p> 
```

我是 Rails 的新手，所以它可能非常简单。所有帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:16:53.253

您的更新操作中似乎没有任何代码来添加/删除关联。如果 params[:technol_ids] 与该项目的数据库中的不同，您需要相应地添加/删除这些记录。

我会看一下本指南 - [http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)，尤其是前几个他们删除和创建关联的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:20:49.397

如果用户取消选中所有`project[technol_ids][]`复选框，则该字段根本不会出现`params`。必须至少选中一个复选框才能显示该字段。所以希望你能理解为什么模型不会改变任何`projecttechnol`记录。

要解决此问题，请确保在您的操作顶部为参数存储了*一些*`update`内容：

```
params[:project][:technol_ids] ||= [] 
```

如果没有选中任何复选框，这可以确保您有一个空数组。将一个空数组传递给模型应该清除所有存在的记录。

# facebook - 如果用户是页面广告，则 Facebook API 以用户身份发布失败

> ID：13032279
> 
> 赞同：1
> 
> 时间：2012-10-23T14:04:27.653
> 
> 标签：facebook, api

在这一点上，我几乎尝试了所有方法，但如果我以页面管理员身份登录，我无法以我的用户身份显示喜欢或评论。我的应用程序允许人们管理他们的页面，但即使我将用户的访问令牌而不是页面的访问令牌传回，它仍然会像页面一样执行操作。Graph API Explorer 也是如此。我已经登录 Facebook，切换到以用户身份发布，然后在相关帖子上运行图形 API，从那里生成一个新的访问令牌，帖子仍然显示为页面！这是坏了吗？我应该将此错误提交给 FB 吗？

是的，我拥有所有必需的权限，是的，我正在验证我使用的是用户访问令牌而不是页面访问令牌......但是，Facebook API 每次都返回 true，即使是通过 Graph API 资源管理器而不是通过我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:18:40.563

[http://developers.facebook.com/bugs/408406055876958](http://developers.facebook.com/bugs/408406055876958)

这是一个已知的 facebook 错误，于 7 月开放，没有修复它的时间表。

# shell - 使用 homebrew、shell 安装 imagemagik

> ID：13032284
> 
> 赞同：1
> 
> 时间：2012-10-23T14:04:56.250
> 
> 标签：shell, terminal, imagemagick, homebrew

当我运行时，我一直在尝试使用自制软件和终端将 imagemagik 放到我的 Mac 上

```
$ brew install imagemagick 
```

我明白了

```
==> Installing imagemagick dependency: pkg-config
==> Downloading https://downloads.sf.net/project/machomebrew/Bottles/pkg-config-0.27.1.lion.bottle.tar.gz

curl: (52) Empty reply from server
Error: Download failed: https://downloads.sf.net/project/machomebrew/Bottles/pkg-config-0.27.1.lion.bottle.tar.gz 
```

这只是与部分 sourge force 没有响应有关，还是我的错误，我之前没有看到“来自服务器的 52 空回复”，这是否类似于 500 错误？

作为记录，我正在运行最新的 xcode 和 lion。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:53:34.893

SourceForge (sf.net)[目前已关闭](https://twitter.com/sourceforge/status/260742653828812800)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:52:57.097

您是否设置了代理以访问网络？

我安装了 ImageMagick。首先，我收到错误消息：

```
==> Downloading https://downloads.sf.net/project/machomebrew/Bottles/imagemagick-6.8.0-

curl: (56) Recv failure: Connection reset by peer 
```

这个原因可能是由中国的GFW引起的。然后我使用了一个 sock 服务器并设置了 http_proxy，我收到了像你这样的错误消息：

```
curl: (52) Empty reply from server 
```

最后修改#HOME/.curlrc，添加“--socks5 127.0.0.1:1080”，重新安装ImageMagick成功。

# javascript - 有没有办法从 Javascript 中的引用中覆盖构造函数？

> ID：13032286
> 
> 赞同：1
> 
> 时间：2012-10-23T14:04:59.067
> 
> 标签：javascript, closures

假设我有以下代码，我无法**修改**

```
var namespace = {};

function() {
    var MyConstructorFunction = function() {
        alert("default behavior");
    };

    namespace.MyConstructorFunction = MyConstructorFunction;

    setTimeout(function() {
        var instance = new MyConstructorFunction();
    }, 1000)
}(); 
```

我想在全局范围内从外部添加一些代码，我只能从这些代码中访问，`namespace`以便`instance`使用`alert("custom behavior")`;

只是为了澄清我的意图，假设我可以想到这两种方法：

```
namespace.MyConstructorFunction = function() {
    alert("custom behavior");
}; 
```

或者

```
namespace.MyConstructorFunction.prototype.constructor = function() {
    alert("custom behavior");
}; 
```

但显然它们不起作用。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:12:01.927

您可以使用原型链来覆盖命名空间中的方法。

```
// create an object that inherits from namespace
var o = Object.create(namespace);

// Override the MyConstructorFunction property
o.MyConstructorFunction = function ()  {
    alert("custom behavior");
} 
```

您可以重用命名空间令牌

```
namespace = o; 
```

或者，如果您愿意，可以使用不同的命名空间。

Object.create 是一个 ES5 特性，无法在 ES3 中完全模拟，但在这个用例中，它应该与基本的[polyfill](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)一起使用。

* * *

**但**我知道你想从 setTimeout 调用不同的构造函数，**在这个例子中这是不可能的**。该函数引用了一个无法更改的局部变量。虽然您可以像本例中那样更改对象的全局行为，但您不能更改闭包内的变量，除非通过可以看到这些变量的函数。如果该函数要引用全局范围的变量而不是局部范围的变量，那么您会很幸运。

IE：

```
var namespace = {};

function() {
    var MyConstructorFunction = function() {
        alert("default behavior");
    };

    namespace.MyConstructorFunction = MyConstructorFunction;

    setTimeout(function() {
        var instance = new namespace.MyConstructorFunction(); // reference global
    }, 1000)
}(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:18:25.847

如果是实例，则不能覆盖构造函数。在实际应用程序中，出于安全原因，您不希望这样做。

但是您可以覆盖或添加特定方法：

```
var F = function() {
  this.foo = 'bar';
}

var f = new F();
typeof f.foo; // "string"

f.foo = function() { return 'Bar' };
typeof f.foo; // "function" 
```

# java - 收集框架和数据结构

> ID：13032288
> 
> 赞同：0
> 
> 时间：2012-10-23T14:05:01.720
> 
> 标签：java, data-structures, collections, logic

我最近遇到了一些技术面试，问题是：

> Q.1 给定两个字符串“Hello”和“World”。打印出现在第一个而不是第二个字符串中的唯一字符
> 
> 输出：`He`。

**我的答案：**将一个字符串的每个字符与第二个字符的每个其他字符进行比较，根本不是最佳的（显然是**错误**的）。

> Q.2 `ABCABBABCAB, OUTPUT:`4A5B2C`，（基本上计算每个字符的出现次数）一次
> 执行此操作，而不是字符串中的多次遍历，其他地方再次以最佳方式执行此操作。

同样，那里也很少有其他问题..

我的核心问题是：

*   收集框架中的哪种数据结构将帮助我以最佳方式处理此类场景；和

*   何时以及为什么要使用 Java 集合框架中的哪个特定数据结构？

另外，如果有此类主题的书籍，请告诉

***任何帮助书籍、参考资料和链接都将对学习和理解有很大帮助。***

**重要提示：我需要实现数据结构的实时场景**

我研究过，Collection API，不是彻底的，而是对层次结构和主要数据结构类的总结。我知道如何使用它们，但是我在哪里以及为什么使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:19:31.293

```
public class G {
public static void main(String[] args) {
    new G().printCharacterCount("ABCABBABCAB");
    System.out.println();
    new G().printUniqueCharacters("Hello", "world");
}

void printUniqueCharacters(String a, String b) {
    Set<Character> set = new HashSet<Character>();
    for (int i = 0; i < a.length(); i++)
        set.add(a.charAt(i));

    for (int i = 0; i < b.length(); i++)
        set.remove(b.charAt(i));

    for (Character c : set)
        System.out.print(c);
}

void printCharacterCount(String a) {
    Map<Character, Integer> map = new TreeMap<Character, Integer>();

    for(int i = 0; i < a.length(); i++) {
        char c = a.charAt(i);
        if(!map.containsKey(c))
            map.put(c, 0);

        map.put(c, map.get(c) +1);
    }

    for(char c : map.keySet()) {
        System.out.print(map.get(c) + "" + c);
    }
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:20:36.127

您可以使用的算法示例。

Q1。

*   将 String1 的所有字母放在一个集合中（仅保留唯一条目）
*   从集合中删除 String2 的所有字母
*   您的集合现在包含 String1 中不在 String2 中的唯一字母

Q2。

*   将字母出现的次数存储在 a`Map<Character, Integer>`
*   如果字母不在地图中，则计数为 1
*   如果地图中已经有一个字母，则需要增加计数

> 我知道如何使用它们，但我不知道在哪里以及为什么使用它们？

通过尝试自己解决这种难题；-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T14:24:26.033

```
Set<Character> set1=new HashSet<Character>(Arrays.asList(ArrayUtils.toObject("Hello".toCharArray())));
Set<Character> set2=new HashSet<Character>(Arrays.asList(ArrayUtils.toObject("World".toCharArray())));
set1.removeAll(set2);
System.out.println(set1); 
```

使用 apache [ArrayUtils.toObject(char[] array)](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/ArrayUtils.html#toObject%28char%5B%5D%29)。您可以改为编写 util 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T13:11:57.953

**对于 #1 ：**

```
 String one = "Hello";
    String two = "World";
    Set<Character> set = new HashSet<Character>();

    for (int i = 0; i < one.length(); i++) {
        set.add(one.charAt(i));
    }

    for (int i = 0; i < two.length(); i++) {
        set.remove(two.charAt(i));
    }

    for (char ch : set) {
        System.out.println(ch);
    } 
```

**对于#2：**

```
 String str = YourInput;
    int[] array = new int[26];
    for (int i = 0; i < str.length(); i++) {
        char ch = str.charAt(i);
        array[ch - 'A']++;
    }
    for (int i = 0; i < array.length; i++) {
        if (array[i] != 0) {
            System.out.println(array[i] + (char) (i + 'A'));
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-05T11:03:59.780

```
public static void main(String[] args) {
    String s1 = "Hello";
    String s2 = "World";

    List<Character> list1 = new ArrayList<Character>();
    List<Character> list2 = new ArrayList<Character>();
    for(char c : s1.toCharArray()){
        if(!list1.contains(c)){
            list1.add(c);
        }
    }
    for(char c : s2.toCharArray()){
        if(!list2.contains(c)){
            list2.add(c);
        }
    }
    List<Character> uniqueList = new ArrayList<Character>();
    for (Character character1 : list1) {
        boolean unique = true;
        for (Character character2 : list2) {
            if(character1.equals(character2)){
                unique = false;
            }
        }
        if(unique){
            uniqueList.add(character1);
        }
    }
    for (Character character : uniqueList) {
        System.out.print(character);
    }
} 
```

# php - 需要创建一个 PHP LOOP（多次失败后不确定如何进行）

> ID：13032302
> 
> 赞同：0
> 
> 时间：2012-10-23T14:05:54.637
> 
> 标签：php, mysql, sql, loops

所以很简单，我需要将数字 1 替换为 2 然后 3 等等 32 次。我知道如何创建简单的 PHP 循环和所有内容，但想保留这个“干净”，以便你们更容易帮助我。

感谢您为我提供的任何帮助。

```
<?php
  $con = mysql_connect("localhost","user","pass");
  if (!$con)
    {
    die('Could not connect: ' . mysql_error());
    }

  mysql_select_db("mbbcom1_rfhl", $con);

  $sql="UPDATE `mbbcom1_rfhl`.`_statbu`
  SET gp= gp + '$_POST[gp1]', g= g + '$_POST[g1]', a= a + '$_POST[a1]', shot= shot + '$_POST[s1]', pm= pm + '$_POST[pm1]', ppg= ppg + '$_POST[ppg1]', shg= shg + '$_POST[shg1]', bs= bs + '$_POST[blk1]', gwg= gwg + '$_POST[gwg1]', sog= sog + '$_POST[sog1]', soa= soa + '$_POST[soa1]', pim= pim + '$_POST[pim1]' WHERE `season` =9 AND `_statbu`.`player_id` = 1";
  if (!mysql_query($sql,$con))
    {
    die('Error: ' . mysql_error());
    }
  mysql_close($con)
  ?> 
```

所以为了清楚起见，我需要下一个循环来做同样的事情，但使用 '$_POST[gp2]', g= g + '$_POST[g2]' ....ect

再次感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:16:47.903

哇，您需要查找 SQL INJECTION。此代码不，不，不安全。您需要对所有发布的数据至少使用 mysql_real_escape_string() （下面的示例）。

至于怎么循环。如果这都是更新同一张表，而您：

```
//do your connection and db select here
for( $i=1; $i <= 32; $i++ ) {
    $sql = "gp='".mysql_real_escape_string($_POST["gp{$i}"])."'...
    //mysql_query() here
}
//mysql_close() here 
```

如果您希望一个查询未能破坏其他 31 个查询，或者剩下很多查询，您只需要在 mysql_query 上执行 die()。否则，您可以更优雅地失败并忽略它，但给自己留个信息。

如果您有可用的 PDO，您可能还想研究它，因为它使用起来更简单一些。

# list - 构建混合列表

> ID：13032305
> 
> 赞同：2
> 
> 时间：2012-10-23T14:06:00.520
> 
> 标签：list, lisp

大家好，我正在尝试构建一个包含字母和数字的混合列表。例如，当您调用函数时 (inc-list1 '(cat 4 dog 3 x 5)) => (cat 5 dog 4 x 6)。我很确定逻辑是正确的，所以我认为我在语法中遗漏了一些东西。这是我的代码

```
(defun inc-list1 (list)
      (cond  ((null list)
              nil
              )
            (numberp (first list) 
                     (cons ( + 1   (first list)) (inc-list1 (rest list)))
             )
            (T 
             cons (first list) (inc-list1 (rest list))
             )
       )
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:48:51.400

您可以如何解决该问题的示例：

```
(defun mapcar-if (list test if-true &optional (otherwise #'identity))
  (mapcar
   #'(lambda (x)
       (funcall
        (if (funcall test x)
            if-true
          otherwise) x)) list))

(mapcar-if '(cat 4 dog 3 x 5) #'numberp #'1+) 
```

这也会使该功能在其他情况下更有用。

你的代码：

1.  `(T cons ...)`不做你认为它做的事。您可能想*打电话* `cons`而不是简单地提及它。以您所做的方式提及它没有效果也没有副作用（如果符号 cons 未绑定，则会产生副作用 - 即您会收到错误消息）。接下来发生的一切都是前一个错误的结果。呼叫`(first list)`也没有副作用（在您的情况下）。

2.  以您所做的方式“欺骗”列表并不是一个特别好的技术。因为这种技术已经在其他函数（如 等）中实现了`mapcar`。`reduce`编写它们的目的是减少编写程序时必须键入的文本量，并使其更易于阅读，一旦你编写了它。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:45:02.417

您的代码中有各种拼写错误。这里是固定版本

```
(defun inc-list1 (list)
  (cond  ((null list)
          nil
          )
         ((numberp (first list))
          (cons ( + 1   (first list)) (inc-list1 (rest list)))
          )
         (t
          (cons (first list) (inc-list1 (rest list)))
          )
         )
  ) 
```

`numberp`请注意在and`cons`函数调用和`t`小写字母周围添加的括号。

# javascript - 在网页上的地图上显示标记数量

> ID：13032306
> 
> 赞同：0
> 
> 时间：2012-10-23T14:06:01.053
> 
> 标签：javascript

我想在嵌入地图下方的网页中添加一行文字，说明地图上当前有多少个图钉……“此地图当前有 XX 个图钉。” 我想让XX自动填写当前号码。这就是标记信息的存储方式。

```
 var locations = [
    ['  place a ',  21.81821, 63.84583, 0.000000  ],
    ['  place b ',  34.56343, 67.89073, 0.000000  ]]; 
```

以及在此处创建和聚集的标记

```
var markers = [];

  var marker, i;

     for (i = 0; i < locations.length; i++) {  
     marker = new google.maps.Marker({
     position: new google.maps.LatLng(locations[i][1], locations[i][2]),
     map: map
     });

     google.maps.event.addListener(marker, 'click', (function(marker, i) {
     return function() {
     infowindow.setContent(locations[i][0]);
     infowindow.open(map, marker);
     }})(marker, i));
       markers.push(marker)}

  var markerCluster = new MarkerClusterer(map, markers,{gridSize:40});}
     google.maps.event.addDomListener(window, 'load', initialize); 
```

我在想也许 document.write 可以自动调用元素的长度（位置/标记/标记...），如下所示

```
.
.
var XX = locations.length

<div id="map"></div>
<script language="javascript" type="text/javascript">
document.write("the map currently has", [XX], "pins");
</script> 
```

但是我在实现它时遇到了麻烦，使用读出的示例位置会说“地图当前有**2 个**引脚”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:15:59.920

你有没有尝试过：

```
document.write("the map currently has " + XX + " pins"); 
```

我认为没有理由不工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:13:10.267

[MarkerClusterer](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/reference.html)有一个`getTotalMarkers()`函数可以返回集群中标记的总数 - 无需重新发明轮子......

如果我理解正确，这*应该可以*工作（未经测试，我会尽快检查）：

```
//assumes an element with an id of marker-counter that you want to output to
document.getElementById("marker-counter").innerHTML = "the map currently has" + markerCluster.getTotalMarkers() + "pins"; 
```

*更新：链接更新为指向 MarkerClusterer 文档而不是 MarkerManager*

# jquery - 带有错误检查的 JavaScript 延迟图像加载

> ID：13032307
> 
> 赞同：0
> 
> 时间：2012-10-23T14:06:03.530
> 
> 标签：jquery, image, loading

我正在设置一个脚本以在页面加载后使用以下内容加载图像（我们有很多）：

HTML：

```
<img class="dload" data-src="/path/to/image.jpg"> 
```

JS：

```
$('img.dload').each(function() {
    var img = $(this);
    var src = img.data('src');
    img.attr('src',src);
}); 
```

由于我们有很多图像，因此我们很可能损坏了图像，所以我想知道`onerror`针对动态加载的`src`. 我认为图像需要成功运行`.attr()`命令才能检查...

# java - 在Java中使用NULL作为整数参数

> ID：13032312
> 
> 赞同：1
> 
> 时间：2012-10-23T14:06:12.147
> 
> 标签：java, null, integer

我在使用 NULL 作为整数参数时遇到问题。

我有 3 个相互扩展的类：

```
//1st
public class StandardTableIntId {
    ...

    protected MethodAnswer changeField(String field, Integer value) {
    DBConnection dbc = new DBConnection();
    Connection con = dbc.getConnection();
    try {
        PreparedStatement st = con.prepareStatement("UPDATE " + this.tableName + " SET " + field + " = ? WHERE id = ?");
        st.setInt(1, value);
        st.setInt(2, this.id);
        st.executeUpdate();
        return MethodAnswer.OK;
    } catch (SQLException ex) {
        log.info("SQLException. Class: StandardTableIntId. Method: changeField(String field, String value). Parameters: table='" + tableName + "' id='" + id + "' field='" + field + "' value='" + value + "'");
        return MethodAnswer.DB_EXCEPTION;
    }
    finally
    {
        dbc.closeConnection();
    }   
    }
    protected MethodAnswer changeField(String field, String value) {
    ...
    st.setString(1, value);
    ...}
    protected MethodAnswer changeField(String field, Long value) {
    ...
    st.setLong(1, value);
    ...}
    protected MethodAnswer changeField(String field, boolean value) {
    ...
    st.setBoolean(1, value);
    ...}
    ...
}   

//2nd
public class StandardTableIntIdTimed extends StandardTableIntId{...}

//3rd   
public class Company extends StandardTableIntIdTimed {
    ...
    public MethodAnswer setMainIncomeBankAccountId(Integer value) {
        MethodAnswer ans;
// !!! Code crashes in next command (if value==null). Eclipse just said: "Source not found." in debugging mode.
            ans = changeField("mainIncomeBaId", value); 
        return ans;
    }
    ...
} 
```

代码在标记为“//!!!”的行中崩溃 评论。当“值”等于 null 时会发生这种情况。

在相同的方法中，但 String 或 Timestamp 参数一切正常：

```
public MethodAnswer setPostAddress(String postAddress) {
    MethodAnswer ans;
    ans = changeField("postAddress", value); 
    return ans;
}
public MethodAnswer setDateTimeBegin(Timestamp value) {
    MethodAnswer ans;
    ans = changeField("DateTimeBegin", value); 
    return ans;
} 
```

无法理解这里发生了什么以及如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:09:52.403

好吧，我在这里猜测了一下，但是......

```
protected MethodAnswer changeField(String field, Integer value) 
```

如果您在此方法中将`value`参数转换为`int`, and `value`is `NULL`，**那么您将获得 NullPointerException**。`value`解决方案：在将其转换为 int 之前检查是否为 NULL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:10:51.493

您可能正在使用`value`. 由于值为 null，因此应用程序会抛出 NullPointerException

例如：

```
public void test(Integer n){
  System.out.println(n + 4);
} 
```

使用上面的代码，下面的代码会抛出 NullPointerException

```
test(null) 
```

# css - 左侧浮动图像右侧的列表

> ID：13032319
> 
> 赞同：5
> 
> 时间：2012-10-23T14:06:38.410
> 
> 标签：css, image, list

我想使用外部列表属性将 ul 列表正确定位在左浮动 img 的右侧，但项目符号未在图像右侧对齐，因为没有任何图像，但左侧更多.

```
<img style="float: left; margin-right: 0.1em;" src="http://commons.cathopedia.org/w/images/commons/thumb/f/fe/Carnevale_di_Venezia.JPG/250px-Carnevale_di_Venezia.JPG" />
<ul>
    <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit</li>
    <li>Lorem ipsum dolor sit amet, cnsectetur cnsecteturcnsectetur um dolor sit amet, consectetur adipiscing elit</li>
</ul> 
```

请参阅[小提琴](http://jsfiddle.net/2z6Zn/31/)以获得更好的理解。

我不能修改html，只能修改css。

我不想将列表属性放在里面。

如果我为图像添加右边距，非 ul 文本也会移动，我不想要它。

如果我为 ul 或 li 添加左边距或填充，不在图像右侧的列表也会向内移动，我不想要它。

我该如何管理它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T19:10:07.977

您可以尝试添加隐藏在 ul 标记[http://jsfiddle.net/2z6Zn/61/](http://jsfiddle.net/2z6Zn/61/)中的溢出：

```
ul {
    padding-left: 1.2em;
    overflow: hidden;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:11:51.100

[演示](http://jsfiddle.net/Sriganesh/2z6Zn/32/)

是你要找的吗？我不确定....如果您需要添加更多内容，请检查并解释更多...

```
img {
    float: left;
    margin-right: 1.9em;
     position: relative;
}

li {
    list-style-position: outside;
}
ul {
    padding-left: 1.2em;
}​ 
```

# jscrollpane - 带有 jscrollpane 的 Internet Explorer 10（触摸）中的自定义滚动条？

> ID：13032322
> 
> 赞同：2
> 
> 时间：2012-10-23T14:06:45.523
> 
> 标签：jscrollpane, internet-explorer-10

我们在 IE10 上遇到了 jscrollpane 自定义滚动条/区域的问题（而它在桌面、Android 浏览器等上完美运行）。我听说这可能是由于微软在 IE 10 中实现的触摸事件与其他浏览器相比存在差异......有没有人有任何见解，也许有办法修复这个功能？

甚至 jscrollpane 演示页面似乎也无法在 IE 10 上通过触摸正确滚动。

# javascript - OpenLayer 地图标记不起作用

> ID：13032324
> 
> 赞同：1
> 
> 时间：2012-10-23T14:06:47.350
> 
> 标签：javascript, openlayers, markers

嗨，我正在使用 Openlayer 地图，这是我的脚本，地图没问题，但标记不起作用：

```
 var map = new OpenLayers.Map ('open_map', { 
      controls:[ 
      new OpenLayers.Control.Navigation()
      ],
      projection: new OpenLayers.Projection("EPSG:900913"),
      displayProjection: new OpenLayers.Projection("EPSG:4326")
    });
     var lonLat = new OpenLayers.LonLat(_json.lon, _json.lat).transform (
    new OpenLayers.Projection("EPSG:4326"), // transform from WGS 1984
    map.getProjectionObject() // to Spherical Mercator Projection
);

     var markers = new OpenLayers.Layer.Markers( "Markers" );
     map.addLayer(markers);

     var size = new OpenLayers.Size(16,27);
     var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);
     var icon = new OpenLayers.Icon('http://www.google.com/mapfiles/marker.png', size, offset);
     markers.addMarker(new OpenLayers.Marker(lonLat, icon.clone()));

     var mapnik = new OpenLayers.Layer.OSM("Test");
     map.addLayer(mapnik);

     map.setCenter (lonLat, 5 /* zoom lvl */);

   console.log(lonLat);
console.log(_json.lon);
console.log(_json.lat); 
```

这是控制台日志：

![在此处输入图像描述](../Images/44eed40b6ca56567b0872e93c029ae57.png) 当我不使用标记时，地图缩放正好在我通过的 lon 和 lat 中，而如果我使用标记，则标记实际上放在他们需要的位置之外。

有人有建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T18:28:22.527

目前你是：

1.  从原始坐标创建标记
2.  将坐标从 4326 转换为 900913 并使用它们来居中地图。

您在 _json 对象中的坐标在哪个系统中？如果它们是 EPSG:4325（从 -180 到 180 或 0 到 360），则从转换后的坐标创建标记：

```
var lonLat = new OpenLayers.LonLat(_json.lon, _json.lat).transform (
    new OpenLayers.Projection("EPSG:4326"), // transform from WGS 1984
    new OpenLayers.Projection("EPSG:900913") // to Spherical Mercator Projection
    // map.getProjectionObject() doesn't work for unknown reason
);

markers.addMarker(new OpenLayers.Marker(lonLat, icon));
markers.addMarker(new OpenLayers.Marker(lonLat, icon.clone()));

map.setCenter (lonLat, 5 /* zoom lvl */); 
```

PS，是否有任何特殊原因要在同一个地方创建两个标记：

```
markers.addMarker(new OpenLayers.Marker(lonLat, icon.clone())); 
```

# javascript - Javascript - 按值选择复选框

> ID：13032328
> 
> 赞同：0
> 
> 时间：2012-10-23T14:07:00.267
> 
> 标签：javascript, html, checkbox, selected

当我单击图像时，我制作了此代码以选中一个复选框，但这不起作用。

```
$linkToInterview = 'checkById(document.myform.checkbox,$interview_id)';
?>
<a href="javascript:void(0);" onclick='<?=$linkToInterview?>'><img src="<?=siteConfig::img_dir?>new_photos/video.gif" style="border:0px"/></a> 
```

和Javascript函数：

```
<script type="text/javascript">
function checkByID(chk,id) {
chk[id].checked = true ;
}
</script> 
```

和复选框代码：

```
<td><input type="checkbox" name="checkbox" value="<?php echo $fet['id']; ?>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:53:54.270

```
$linkToInterview = 'checkById(document.myform.checkbox,$interview_id)'; 
```

将包含*literal* `$interview_id`，这意味着您正在输出

```
<a href="..." onclick='checkById(document.myform.checkbox,$interview_id)'> 
```

要包含 的*内容*，`$interview_id`您应该使用双引号，在其周围添加单引号，并在 HTML 输出中使用双引号：

```
<?php
$linkToInterview = "checkById(document.myform.checkbox,'$interview_id')";
?>
<a href="..." onclick="<?=$linkToInterview?>;"> 
```

这将输出（假设你的`$interview_id="test"`）：

```
<a href="..." onclick="checkById(document.myform.checkbox,'test');"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:14:52.587

好的，让我们假设问题出在您的 javascript 上。你使用 JQuery 的方式应该类似于你使用 Javascript 的方式。这样做的想法是，每当您单击图像时，通过传递图像的 ID --> 您将获得等效复选框的 ID（这取决于您要如何操作） --> 触发 checkByID 函数进行检查/取消选中你的工作。

```
 <script type="text/javascript">
    function checkByID(ID_Of_My_Checkbox) {
    $('ID_Of_My_Checkbox').attr('checked','checked');
     }
    </script> 
```

# c - printf() 没有被执行

> ID：13032329
> 
> 赞同：0
> 
> 时间：2012-10-23T14:07:02.890
> 
> 标签：c, printf

我想编写一个程序来计算字符串中每个字母的出现次数，然后打印每个字母中的一个，然后打印该字母的计数。

例如：

`aabbcccd`- 有 2 `a`、 2 `b`、 3`c`和 1`d`

所以我想将其转换并打印为：

`a2b2c3d1`

我编写了代码（见下文）来执行此计数/转换，但由于某种原因我没有看到任何输出。

```
#include<stdio.h>
main()
{
    char array[]="aabbcccd";
    char type,*count,*cp=array;
    while(cp!='\0'){
      type=*cp;
      cp++;
      count=cp;
      int c;
      for(c=1;*cp==type;c++,cp++);
      *count='0'+c;
    }
    count++;   
    *count='\0';
    printf("%s",array);
} 
```

谁能帮我理解为什么我没有看到任何输出`printf()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:10:34.520

```
char array[]="aabbcccd";
char type,*count,*cp=array;
while(cp!='\0'){ 
```

`*cp`是一个指针，它指向数组的起始地址，它永远不会`==`指向一个字符`'\0'`，所以它不能离开循环。

您需要尊重指针以获取它所指向的内容：

```
while(*cp != '\0') {
... 
```

此外，你有一个`;`for 循环之后，跳过它的内容：

```
for(c=1;*cp==type;c++,cp++); <-- this ; makes it not execute the code beneath it 
```

在解决了这两个问题后，代码会产生一个输出：

```
mike@linux-4puc:~> ./a.out 
a1b1c2cd 
```

还不是您想要的，但可以解决“printf not functional”的问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T14:22:01.733

顺便说一句，这段代码还有一些其他的主要问题：

1.  如果最后一个字符出现一次，则尝试在字符串末尾写入（您`'1'`在尾随的位置写入一个，然后在`'\0'`其后写入`'\0'`一个字符。
2.  `'0' + 10`如果一个字符出现超过 9 次 ( is `':'`)，您的代码将不起作用。
3.  如果一个字符出现超过 2 次（`"dddd"`不会变成`"d4"`；它会变成`"d4dd"`），您的代码将不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T14:08:25.160

可能是行缓冲。将 a 添加`\n`到您的`printf()`格式字符串。另外你的代码很吓人，如果连续有超过 9 个相同的字符会发生什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T14:14:48.697

1) 纠错

```
while(*cp!='\0'){ 
```

并不是

```
while(cp!='\0'){ 
```

2) 建议

不要使用 array[] 将您的结果用户放入另一个数组放入您的 rusel 它更合适和容易

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T15:33:49.487

我试图快速解决您的问题，这是我的代码：

```
#include <stdio.h>

#define SIZE 255

int main()
{
  char input[SIZE] = "aabbcccd";/*input string*/
  char output[SIZE]={'\0'};/*where output string is stored*/
  char seen[SIZE]={'\0'};/*store all chars already counted*/
  char *ip = input;/*input pointer=ip*/
  char *op = output;/*output pointer = op*/
  char *sp = seen;/*seen pointer=sp*/
  char c,count;
  int i,j,done;

  i=0;
  while(i<SIZE && input[i]!='\0')
  {
    c=input[i];
    //don't count if already searched:
    done=0;
    j=0;
    while(j<SIZE)
    {
      if(c==seen[j])
      {
         done=1;
         break;
      }
      j++;
    }
    if(done==0)
    {//if i never searched char 'c':
      *sp=c;
      sp++;
      *sp='\0';
      //count how many "c" there are into input array:
      count = '0';
      j=0;
      while(j<SIZE)
      {
         if(ip[j]==c)
         {
        count++;
         }
     j++;
      }
      *op=c;
      op++;
      *op=count;
      op++;
    }
    i++;
  }

  *op='\0';
  printf("input: %s\n",input);
  printf("output: %s\n",output);

  return 0;
} 
```

这**不是**一个好的代码有几个原因（我不检查数组大小写入新元素，我可以在第一个空项目时停止搜索，等等......）但你可以将它视为一个“起点”并改进它。您可以查看标准库以复制子字符串元素等（即 strncpy）。

# c# - 确定两个点是否接近

> ID：13032331
> 
> 赞同：5
> 
> 时间：2012-10-23T14:07:11.017
> 
> 标签：c#, .net, vb.net, math

我有以下内容：

```
bool AreNear(Point Old, Point Current)
{
    int x1 = Convert.ToInt32(Old.X);
    int x2 = Convert.ToInt32(Current.X);
    int y1 = Convert.ToInt32(Old.Y);
    int y2 = Convert.ToInt32(Current.Y);
    if (x1 == x2) {
        if (y1 == y2) {
            return true;
        }
    }
    return false;
} 
```

如果当前点在旧点的 25 像素半径内，我想在函数中返回 true。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T14:10:36.837

您可以使用[毕达哥拉斯公式](http://en.wikipedia.org/wiki/Euclidean_distance)计算两点之间的距离。在 C# 中：

```
var d = Math.Sqrt(Math.Pow(x1 - x2, 2) + Math.Pow(y1 - y2, 2)) 
```

为什么这行得通？看一下下图，记住它`a^2 + b^2 = c^2`适用于直角三角形：

![毕达哥拉斯](../Images/c1b89f386c1f0d8c6f2bb9cdcc0a417d.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T14:10:34.057

只需使用毕达哥拉斯定理计算距离的平方，然后与半径的平方进行比较：

```
bool ComparePoints(Point Old, Point Current)
{
    int x1 = Convert.ToInt32(Old.X);
    int x2 = Convert.ToInt32(Current.X);
    int y1 = Convert.ToInt32(Old.Y);
    int y2 = Convert.ToInt32(Current.Y);
    int dx = x1 - x2;
    int dy = y1 - y2;
    return (dx*dx + dy*dy) < 25*25;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T14:12:01.257

您可以使用[`Math.Abs`](http://msdn.microsoft.com/en-us/library/dk4666yx%28v=vs.110%29.aspx)获取距离：

```
public static bool InDistance(Point Old, Point Current, int distance)
{
    int diffX = Math.Abs(Old.X - Current.X);
    int diffY = Math.Abs(Old.Y - Current.Y);
    return diffX <= distance && diffY <= distance;
} 
```

用它：

```
bool arePointsInDistance = InDistance(new Point(100, 120), new Point(120, 99), 25); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T14:14:12.357

尝试使用距离公式[http://www.purplemath.com/modules/distform.htm](http://www.purplemath.com/modules/distform.htm)并比较距离 <=25

# javascript - jQuery add() 替代性能

> ID：13032332
> 
> 赞同：1
> 
> 时间：2012-10-23T14:07:17.287
> 
> 标签：javascript, jquery

我知道如何[使用 add()将两个 jQueries 添加在一起](https://stackoverflow.com/questions/323955/how-to-combine-two-jquery-results)

但是，对于我正在从事的项目，它已成为性能瓶颈。我摆弄了一下，想出了一个替代方案，这给了我相同的结果，但性能得到了很大的提升（~60ms，而这个小提琴中的 1000ms）：

[http://jsfiddle.net/jedierikb/rkAP4/1/](http://jsfiddle.net/jedierikb/rkAP4/1/)

```
var t = $("#test");
var tKids = t.children( );
var j = $("#jest");
var jKids = j.children( );

var z,
    zMax = 30000;

var time1 = new Date();
for (z=0; z<zMax; z++)
{
    var opt1 = tKids.add( jKids );
}
var time2 = new Date();

for (z=0; z<zMax; z++)
{
    var i,
        iMax,
        allKids = [];
    for(i = 0, iMax = tKids.length; i < iMax; i++)
    {
        allKids.push( tKids[i] );
    }
    for(i = 0, iMax = jKids.length; i < iMax; i++)
    {
        allKids.push( jKids[i] );
    }
    var opt2 = $( allKids );
}
var time3 = new Date();

console.log( (time2-time1) + " v " + (time3-time2) );​ 
```

*注意：我不需要 add 的好处，例如保证 dom 元素排序和删除重复项。*

我想知道是否有一种方法可以使这种方法比我正在做的所有迭代更干净或更紧凑。或者也许有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:18:07.877

我知道您可能出于性能原因试图远离 jQuery API 方法，但这值得一试：

```
var t = $('#test').children();
var j = $('#jest').children();
var added = t.get().concat(j.get()); 
```

我不确定有多快`.get()`，但我很难想象它比迭代每组孩子要慢。可以做一个jsperf测试...

**编辑**

为了后代：[http ://api.jquery.com/get/](http://api.jquery.com/get/)

> 该`.get()`方法允许我们访问每个 jQuery 对象下的 DOM 节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:28:22.940

如果允许混合“孩子”的顺序，您可以减少一些循环

```
for (z=0; z<zMax; z++)
    {
        var tLen = tKids.length;
        var jLen = jKids.length;
        var maxLen = Math.max(tLen, jLen);
        var allKids = [];
        for(var i = 0; i < maxLen; i++)
        {
            if (i<tLen) allKids.push(tKids[i]);
            if (i<jLen) allKids.push(jKids[i]);
        }
        var opt2 = $( allKids );
    }​ 
```

# android - Droid：如何从 XML 中描述的 onClick 方法获取按钮 ID？

> ID：13032333
> 
> 赞同：20
> 
> 时间：2012-10-23T14:07:16.103
> 
> 标签：android, onclick

按照开发指南，我可以在 XML 中使用向按钮添加方法。这在我的活动中调用了“buttonPress”方法。如果我对多个按钮应用相同的方法，如何确定被点击的按钮的身份？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-10-23T14:09:48.317

使用`getId()`方法。它返回`int`您可以与资源中的 id 进行比较的 id。

像这样使用 switch 语句非常方便：

```
public void buttonPress(View v) {
    switch (v.getId()) {
        case R.id.button_one:
            // do something
            break;
        case R.id.button_two:
            // do something else
            break;
        case R.id.button_three:
            // i'm lazy, do nothing
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-31T06:36:18.697

您可以使用该`getId()`方法获取当前选定视图的 id。`getId()`返回`android:id`值，在开关控件中使用该整数值来确定当前使用的控制器名称。

```
public void buttonPress(View v) {
    switch (v.getId()) {
        case R.id.button_one:
            // do something
            break;
        case R.id.button_two:
            // do something else
            break;
       default: 
            //default case
            break;
    }
} 
```

# jquery - Jquery carouFredsel - 在 3 张幻灯片末尾更改背景

> ID：13032336
> 
> 赞同：1
> 
> 时间：2012-10-23T14:07:33.950
> 
> 标签：jquery, background

基本上我想在第三张幻灯片结束后更改我用 CSS 设置的背景，然后是新幻灯片。所以它是这样的：3 张带背景的幻灯片，上面有文字，然后是只包含图片的新幻灯片。很抱歉与最终结果相差太远，但我已经搜索过，但找不到这样的示例。

JS：

```
<script type="text/javascript" language="javascript">
        $(function() {
            $('#carousel').carouFredSel({
                items: 1,
                    scroll: {
                        duration: 500,
                        timeoutDuration: 500,
                        easing: 'elastic'
                    }
                });

        });
    </script> 
```

HTML：

```
<div id="wrapper">
<div style="background-image: url(artist_carole.jpg);">
    <div id="carousel">
        <div>
            <h3>Cupcake ipsum</h3>
        </div>
        <div>
            <h3>Sesame snaps</h3>
        </div>
        <div>
            <h3>Apple pie jelly</h3>
        </div>
    </div>

    <div id="foo3">

        <div><img src="files/artists/thumb_lettering_rania.jpg" /></div>
        <div>1</div>
        <div>2</div>
        <div>3</div>

    </div>

</div> 
```

CSS 包括：

```
 #wrapper {
    background-color: #F4F0EE;
    border: 1px solid #ccd;
    width: 950px;
    height: 325px;
    padding-top: 25px;
    margin:10px 0 0 10px;
    overflow: hidden;
    border-radius: 10px;
}

#carousel > div {
    width: 400px;
    padding: 0 100px;
    height: 225px;
    float: left;
    overflow: hidden;
}

#carousel h3 {
    font-size: 30px;
    line-height: 30px;
    margin: 20px 0 20px 0;
} 
```

# java - 装饰器模式允许模型的不同行为

> ID：13032341
> 
> 赞同：1
> 
> 时间：2012-10-23T14:07:44.687
> 
> 标签：java, model-view-controller, decorator

我想知道如果我希望我的模型（MVC 的“M 部分”）根据它们的来源引发异常，使用装饰器模式是否很好。我自己解释。

我有一个名为 Game 的类，它是模型的一部分。我有两个视图：一个 GUI 和一个命令行。我希望我的模型在用户输入字符而不是数字时引发命令行视图异常（例如）。当然，我不希望模型处理此异常，因为它“属于”命令行而不是模型本身。

为了封装这两种不同的行为，我打算用两个类来装饰 Game 类：CommandLineGame 和 GUIGame，它们只有一个属性：Game 并处理它们自己的异常类型。这是个好主意吗 ？有更好的吗？这种解决方案的问题是，每个模型类都必须根据其来源引发异常...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:30:26.757

您在示例中描述的是“输入验证”。严格来说*，这属于 MVC 的 Controller（“C 部分”）。

MVC 的关注点分离分解如下：

*   **视图**用于 1) 为用户提供一个 UI 以评估程序的状态（以及您的程序在视觉上的样子）和 2) 接收用户的意图表达（接收关于他们可能想要做什么的原始指令)
*   **控制器**是用户对这些“动作”或“意图”的实际解释器。它决定了用户单击特定按钮的含义以及在模型中调用什么。它决定一个特定的输入是否真的有意义给定来自 UI 的上下文（在某些情况下来自模型）。
*   **模型**应该与视图/控制器无关（意味着模型应该不知道视图/控制器）。它应该只与您尝试“建模”的内容的内部表示有关。这样做的好处是：您可以拥有许多不同的 UI，或者在不影响模型的情况下更改现有的 UI。

总的来说，这个想法是降低耦合并增加内聚。

我希望这是有道理的=）

根据语言/框架的不同，MVC 组件之间的界限会变得有些模糊。有些习语会将大部分 Controller 集中到 View 中，但逻辑的封装应该保持相对相似。

*在实践中，对于防御性编程，输入验证进行了两次相互怀疑：它们分为**客户端中介**和**服务器端中介**：

*   在这种情况下，模型部分应该处理“服务器端”中介：它应该在继续之前检查传递给它的函数的参数是否真的有意义。
*   类似地，控制器/视图部分应该检查输入作为“客户端”中介的一部分，以便它可以立即警告用户，而不会将其传递回模型，然后最终返回视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:20:34.647

它将使您的代码非常干净，从学术角度来看，这是我非常喜欢的。另一方面，对于这样一个简单的问题，您是否需要引入这种设计复杂性？

所以，如果你需要干净的代码......去吧。

# php - 如何在 HTML 表单提交时调用 PHP 函数？

> ID：13032342
> 
> 赞同：-1
> 
> 时间：2012-10-23T14:07:45.147
> 
> 标签：php

我在将数据从表单发送到函数时遇到了一些问题

这是我的表格：

```
echo "<form id='AddCompany' action='' method=post>";
echo "<table>";
echo "<tr>";
            echo "<th colspan='2'>Opret nyt firma</th>";
            echo "</tr>";
            echo "<td>Firma Navn:<td><input type='text' name='Name' /></td>";
            echo "</td></tr>";
            echo "<td>Adresse:<td><input type='text' name='Address' /></td>";
            echo "</td></tr>";
            echo "<td>Postnr.:<td><input type='text' name='Zipcode' /></td>";
            echo "</td></tr>";
            echo "<td>By:<td><input type='text' name='City' /></td>";
            echo "</td></tr>";
            echo "<td>Land:<td><input type='text' name='Country' /></td>";
            echo "</td></tr>";
            echo "<td>Tlf:<td><input type='text' name='Phone' /></td>";
            echo "</td></tr>";
            echo "<td>Slogan:<td><input type='text' name='Slogan' /></td>";
            echo "</td></tr>";
            echo "<td>Catch All Email:<td><input type='text' name='Email' /></td>";
            echo "</td></tr>";
            echo "<td>Logo 1:<td><input type='FILE' name='Logo1' /></td>";
            echo "</td></tr>";
            echo "<td>Lille  Logo:<td><input type='FILE' name='SmallLogo' /></td>";
            echo "</td></tr>";
            echo "<td>Logo 2:<td><input type='FILE' name='Logo2' /></td>";
            echo "</td></tr>";
            echo "<td colspan='2'><input type='submit' value='Opret Firma' />";
            echo "</form>";
            echo "</td></tr>";
            echo "</tr>";
            echo "</table>"; 
```

我想将数据发送到这个函数

```
function insertRecord ($fieldarray)
    {
        $this->errors = array();

        global $dbconnect, $query;
        $dbconnect = db_connect($this->dbname) or trigger_error("SQL", E_USER_ERROR);

        $fieldlist = $this->fieldlist;
        foreach ($fieldarray as $field => $fieldvalue) {
            if (!in_array($field, $fieldlist)) {
                unset ($fieldarray[$field]);
            } // if
        } // foreach

        $query = "INSERT INTO $this->tablename SET ";
        foreach ($fieldarray as $item => $value) {
            $query .= "$item='$value', ";
        } // foreach
        $query = rtrim($query, ', ');
        return;
    } // insertRecord 
```

我刚刚意识到您可能还需要这段代码：

```
class Company extends Default_Table
{
    // additional class variables go here
    function __construct ()
    {
        $this->tablename       = 'Company';
        $this->dbname          = 'oop';
        $this->rows_per_page   = 15;
        $this->fieldlist       = array('ID', 'Name', 'Address','Zipcode','City','Country','Phone','Slogan','CatchAllEmail','Logo1','LogoSmall','Logo2');
        $this->fieldlist['ID'] = array('pkey' => 'y');
    } // __construct
} // Company 
```

我在哪里调用该函数以及我应该发送哪些变量？

我试过`onclick=insertRecord()`似乎不起作用，我想这是因为我需要插入一个变量，我认为它需要是表单数据的数组，因为函数是用数组声明的。

正如你所看到的，我对此非常敏感。

我发现了以下内容：

如果我在 insertRecord 函数中的 foreach 循环之后回显我的 $query，我会看到如下查询： INSERT INTO Company SET Name='1', Address='2', Zipcode='3', City='4', Country ='5'，电话='6'，口号='7'，CatchAllEmail='8'，Logo1=''，LogoSmall=''，Logo2=''

但是仍然没有插入任何内容，我已经在 2 台服务器上尝试过此操作，并且我知道用户具有插入权限，但是没有插入任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:22:05.430

请以最友好的方式接受这一点，我建议您拿起一本书或阅读有关 PHP/MySQL/HTML/JavaScript 的教程。
在不超出本问答网站范围的情况下，我会尽力解释这一点。

您在代码的第一部分中拥有一个`echo`由 PHP 脚本编辑的 HTML 表单，因此 HTML 表单现在位于客户端的浏览器中。

您要做的`onclick=insertRecord()`是将用 PHP（服务器端）编写的事件处理程序绑定到在浏览器（客户端）中触发的事件。

**如何解决您的问题？**

您需要`POST`将此表单添加到包含该`insertRecord()`函数的 PHP 脚本中。首先，您需要修改`action`您的属性`<form>`并将其指向`.php`具有此功能的脚本，然后您只需执行以下操作：

```
$cmpny = new Company();
$cmpny->insertRecord($_POST); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:15:39.450

无需使用功能，但您可以这样做，`action =""` 从`<form>`.

然后检查，

```
 if($_POST){
     //your function logic
    // get variable data like 
      echo $_POST["Name"];
    } 
```

享受！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:16:49.040

您需要有某种方法将您的 POST 数据放入 $fieldarray。可能很简单：

```
function insertRecord ($fieldarray) {
   //the function you have above
}

insertRecord($_POST); 
```

当然，这取决于 insertRecord 函数的设置方式以及它是否会以您设置的方式识别所有 POST 数据。

# c++ - 成员指针和模板参数语法

> ID：13032347
> 
> 赞同：-1
> 
> 时间：2012-10-23T14:07:59.227
> 
> 标签：c++, templates

假设我们有一个带有一个类的结构模板和一个指向该类成员的指针：

```
struct A<A,&A::a> 
```

我不能这样声明模板

```
template<class T,class U>
struct{}; 
```

我必须写

```
template<class T,typename T::type var>
struct{}; 
```

为什么`&A::a`不能绑定成简单的`typename T`语法？在成为成员的指针之前，`&A::a`是一个类型，所以我们可以预期一个简单的类型名 T 可以工作，但事实并非如此

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:13:33.243

`&A::a`是一个*值*，而不是一个*类型*。所以模板声明没有意义。

以下是它的工作方式：

```
template <typename A, int A::* Ptr> struct Foo { };

struct Bar { int n; };

int main()
{
    Foo<Bar, &Bar::n> f;
} 
```

或者，更一般地说，

```
template <typename T, typename U, U T::* Ptr> struct Foo { };

Foo<Bar, int, &Bar::n> f; 
```

# vba - 需要 powerpoint 10 的宏代码来关闭演示文稿，然后打开演示文稿

> ID：13032351
> 
> 赞同：2
> 
> 时间：2012-10-23T14:08:24.230
> 
> 标签：vba, powerpoint

这应该很简单，但我对此并不陌生。需要有一个宏代码来关闭循环演示，然后打开一个新的（非循环）演示。两者都保存在 ppsx 中。我知道可以使用超链接，但这对于这种查看情况并不理想。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:21:44.143

我想到了。这是代码。

```
ActivePresentation.Close

Dim FileName

FileName = " C:\Users\Tom\Documents\1st Lutheran\Drive in Worship.ppsx”

Presentations.Open(FileName) 
```

现在，我想知道如何为宏创建键盘快捷键。还无法弄清楚这一点。

# objective-c - UIText 字段在切换视图后不响应触摸

> ID：13032353
> 
> 赞同：0
> 
> 时间：2012-10-23T14:08:36.567
> 
> 标签：objective-c, ios, xcode, uitextfield

在我的应用程序中，我有一个可以正常工作的文本字段，但是在返回主菜单然后返回带有文本字段的页面后，文本字段变得不可触摸，无论多少次键盘都不会显示你点击它。

这是界面的屏幕截图[http://tinypic.com/view.php?pic=y11sm&s=6](http://tinypic.com/view.php?pic=y11sm&s=6)

我想我可能必须添加代码或将操作与文本字段相关联，但是如何？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:43:11.623

您可以删除不再使用的子视图，就像@Kim 已经告诉您的那样，或者如果您需要这些子视图但它们阻止了操作，您可以使用将您的文本字段放在前面，

```
[your_view bringSubviewToFront: your_textfield]; 
```

# linux-kernel - PF_PACKET 套接字和“端口不可达”ICMP 消息

> ID：13032355
> 
> 赞同：2
> 
> 时间：2012-10-23T14:08:43.393
> 
> 标签：linux-kernel, raw-sockets

我的应用程序需要从多个目标端口接收 UDP 数据包（这是一个真正的应用程序，而不是嗅探器）。因此，我选择使用 PF_PACKET 套接字并在应用程序级别进行端口过滤。

这是我创建套接字的方法：

int g_rawSocket = socket(PF_PACKET, SOCK_RAW, htons(ETH_P_ALL));

我正确接收UDP数据包。但是，运行应用程序的内核正在向正在向我的应用程序发送数据包的远程设备发送类型为“无法访问目标”和代码“无法访问端口”的 ICMP 数据包。我猜这是因为我没有将端口号绑定到套接字。但是，我想知道将绑定与 PF_PACKET 套接字一起使用是否合适，特别是因为我需要将多个端口绑定到它，我想这是不可能的。

请问有什么意见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:22:58.020

我在我的应用程序中也做了同样的事情。

在我的情况下，我已经创建了我需要的套接字并将它们与特定端口绑定。但我没有听任何套接字。所以我创建了一个原始套接字

```
int sock_raw = socket(AF_INET , SOCK_RAW , IPPROTO_UDP); 
```

& 然后收到所有没有任何 ICMP 的流量。

因此，我认为您必须绑定所有端口以避免 ICMP，否则您必须进行**一些内核黑客攻击，以停止或删除 linux-kernel 代码中的 ICMP 代码并重新构建**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:18:57.887

不，它不能绑定到特定端口，因为它的工作级别低于传输 (UDP/TCP) 层。但是，您可以使用常规 UDP（AF_INET/SOCK_DGRAM）套接字打开并监听所有套接字并[选择](http://linux.die.net/man/2/select)例如，据我所知，您可以绑定和监听任意数量的套接字，只要您不这样做超过您的进程的打开文件描述符的限制。

# html - 我需要创建一个函数来使用两个用户选择的日期参数刷新网页

> ID：13032356
> 
> 赞同：0
> 
> 时间：2012-10-23T14:08:43.230
> 
> 标签：html, url, url-routing

看起来我可以使用此处的说明创建日期范围选择工具：http://answers.oreilly.com/topic/136-how-to-create-a-calendar-date-picker-with-javascript/

但是我想然后将这两个日期插入 URL 并在用户选择两个日期后选择“提交”时重新加载页面......然后将显示的数据限制在该日期范围内。该功能已经可用，但现在我必须手动输入开始日期和结束日期。我想将它编码到页面中，以便我提交两个日历选择器，然后用这些更新 url 并在页面上重新加载数据。

有人可以指出我如何做到这一点的正确方向吗？

非常感谢编码菜鸟！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:16:37.140

你能做这样的事情吗？

```
<?php
if( isset($_GET['method']) && $_GET['method'] == 'set-date-range' ) {
    // Do stuff with the dates
    // $_GET['date-one']
    // $_GET['date-two']
}
?>

<form action="mygraph.php" method="get">
    <input type="hidden" name="method" value="set-date-range">
    <input type="text" name="date-one" />
    <input type="text" name="date-two" />
    <input type="submit" value="Submit" />
</form> 
```

*编辑：*

当您提交表单时，它将“刷新”页面（因为它指向自身）并且您可以轻松访问 URL 中的这些日期。因此，在该页面的任何位置，您都可以将`$_GET['whatever-date-you-want']`其`echo`取出或随心所欲。

注意：您的页面扩展名需要是 .php 而不是 .html，以便您可以选择编写一些 PHP 代码。

*编辑2：*

因此，当您提交表单时，URL 将如下所示：

`...mygraph.php?method=set-date-range&date-one=1-1-2012&date-two=10-2-2012`

然后，您可以像这样访问这些日期：

`$_GET['date-one']`或者`$_GET['date-two']`

# jquery - 使用 JQuery 和 jsonp 从一个非常简单的 json 文件中检索字符串

> ID：13032359
> 
> 赞同：0
> 
> 时间：2012-10-23T14:08:55.520
> 
> 标签：jquery, json, jsonp

我需要使用 JQuery 从非本地站点上的 Json 文件中获取简单字符串的帮助。这里有一些有用的信息。

Json 文件的 URL： [https ://targetjsonsite.com/fileofinterest.json?api_key=12341234123412341234](https://targetjsonsite.com/fileofinterest.json?api_key=12341234123412341234)

Json 文件的内容：{"state":"finished"}

这是我的尝试-

```
<script>
$.getJSON("https://targetjsonsite.com/fileofinterest.json?api_key=12341234123412341234",
{
format: "json"
},
function(data) {
$.each(data.items, function(item){
//right here is where I would want to get the value "state" is set to.
});
});
</script> 
```

我很难在网上找到一个真正帮助我理解发生了什么的例子。似乎大多数人都在一个非常笼统的层面上解释了 jsonp 如何工作，然后给你一个可能不相关的非常具体的例子。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:12:41.070

你应该试试这个

```
$.getJSON("https://targetjsonsite.com/fileofinterest.json?api_key=12341234123412341234",
{
format: "json"
},
function(data) { 
    //your json is returing {"state":"finished"} so data will store {"state":"finished"};
    alert(data.state);//and you want to get the state value so it will be data.state.
}); 
```

# php - PDO 代码不起作用

> ID：13032363
> 
> 赞同：0
> 
> 时间：2012-10-23T14:09:06.153
> 
> 标签：php, mysql, pdo

我是 PDO 的新手。我尝试了一些在线教程并找到了一些分步指南。我正在使用 WAMP，我创建了一个名为“try”的数据库，其中的表名为“books”。现在在我的 index.php 中我写道：

```
<?php
$host   = "localhost:3306";
$db = "try";
$user   = "clyde";
$pass   = "moonfang";
$conn = new PDO("mysql:host=$host;dbname=$db",$user,$pass);

$sql = "SELECT * FROM books";
$q   = $conn->query($sql) or die("failed!");    

while($r = $q->fetch(PDO::FETCH_ASSOC)){    
    echo $r['title'];
} 
?> 
```

现在，每当我在浏览器上加载 localhost 时，我都会看到这些错误； ![在此处输入图像描述](../Images/c7b574c8526ce7b2b7b41bf648b1a36c.png) 我不明白这个问题.. :-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:14:13.013

根据[几个示例](http://www.php.net/manual/en/class.pdo.php#89019)，PDO 似乎更喜欢dsn 中的the`host`和 the ：`port`

```
$host = "localhost";
$port = 3307;
$conn = new PDO("mysql:host=$host;port=$port;dbname=$db",$user,$pass); 
```

[这是 PDO MySQL DSN 的 PHP 手册](http://php.net/manual/en/ref.pdo-mysql.connection.php)。注意“端口”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:14:45.463

问题是*目标机器主动拒绝 [the connection]*。

因此，您必须检查数据库服务器的用户名/密码/访问权限是否都正常；包括 IP/主机和端口/防火墙设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:15:02.853

发生错误的第 8 行是 `$q = $conn->query($sql) or die("failed!");`此行混合了 mysql_ 和 PDO，不是必需的。

代码应该看起来像

```
$sql = "SELECT * FROM books";
while($r = $sql->fetch(PDO::FETCH_ASSOC)){    
   echo $r['title'];
} 
```

您还应该合并 PDO 错误处理

`

# jquery-mobile - 应用启动时未应用样式

> ID：13032364
> 
> 赞同：1
> 
> 时间：2012-10-23T14:09:08.143
> 
> 标签：jquery-mobile, cordova

我使用 phonegap 和 jquery mobile 开发的应用程序有一个奇怪的问题：当应用程序启动时，没有应用样式，但是如果我在应用程序中浏览然后返回索引，我可以看到样式应用得很好。我应该改变什么？这是我的 index.html 代码：

```
<!DOCTYPE html>
<html>
<head>
<title>Home</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=10.0">
<script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
<script type="text/javascript" charset="utf-8">

var pictureSource;   // picture source
var destinationType; // sets the format of returned value 
var intervalloRefresh;
var intervalloRisultati;
var iter=0;

// Wait for Cordova to connect with the device
//
document.addEventListener("deviceready",onDeviceReady,false);

// Cordova is ready to be used!
//
function onDeviceReady() {
    pictureSource=navigator.camera.PictureSourceType;
    destinationType=navigator.camera.DestinationType;
}

</script>
<script type="text/javascript" src="jquery/jquery-1.5.2.min.js"></script>
<!-- <script type="text/javascript" src="main.js"></script> --> 
<script type="text/javascript" src="jquery/jquery.mobile-1.1.1.js"></script>
<link rel="stylesheet" type="text/css" href="jquery.css" />
<link rel="stylesheet" type="text/css" href="style.css" />
<style>
    #pulsantiera{width:25%;height:100%;float:left;}
</style>
</head>
<body>
<div data-role="page"> 
      <div data-role="content"> 
        <div id="pulsantiera" data-role="controlgroup" data-type="vertical">
            <!-- <a href="javascript:void(0)" data-role="button" onclick="capturePhoto();">Allineamento</a> -->
            <a href="javascript:void(0)" data-role="button" onclick="allinea();">Allinea</a>
            <a href="percorsi.html" data-role="button">Percorsi</a>
            <a href="programma.html" data-role="button">Programma</a>
            <a href="video.html" data-role="button">Info</a>
            <a href="javascript:void(0)" data-role="button" onclick="capturePhoto();">Foto</a>
            <a href="chat.html" data-role="button">Chat</a>
            <a href="javascript:void(0)" data-role="button" onclick="vote('y');">Y</a>
            <a href="javascript:void(0)" data-role="button" onclick="vote('a');">A</a>
            <a href="javascript:void(0)" data-role="button" onclick="vote('n');">N</a>
        </div>
        <div style="width:74%;height:100%;margin-left:26%"  >   
            <h1 id="title">PATH</h1>
            <div id="content">
                <img src="images/IT_MAPPA.jpg">
            </div>
            <div id="vote" stle="display:none"></div>
        </div>
      </div>
 </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:11:12.053

您是否尝试过切换 CSS 和 JS 文件的位置？

如果从上到下解析：

```
1) jquery is initialized
2) jquery mobile is initialized
3) then the CSS is loaded 
```

因此，当 JQM 启动时，JQM 小部件所需的 CSS 并不存在。

尝试切换到：

```
1) all CSS 
2) jquery 
3) jquery mobile 
```

还要检查[JQM 页面模板](http://jquerymobile.com/test/docs/pages/page-template.html)。CSS 总是排在第一位。

# mysql - 无法在 Windows 7 上的 Zend 服务器上通过命令行访问 mysql

> ID：13032371
> 
> 赞同：0
> 
> 时间：2012-10-23T14:09:31.833
> 
> 标签：mysql, command-line, zend-server

我最近在 Windows 7 上安装了最新的 Zend Server CE 5.6.0 SP4，并带有 php 和 mysql。起初 Zend 服务器无法工作，因为我认为与我的 Zonealarm 防火墙的端口存在一些冲突。我停用了防火墙，重新启动再次尝试，它工作，然后重新激活防火墙。不确定防火墙现在是否找到了备用端口。我对这些事情真的了解不多。我认为它所在的端口是 80 和 10061，但不太确定。

无论如何，我正在阅读一本 PHP/Mysql 书籍，其中展示了如何使用命令行连接到 mysql 数据库而无需密码。第一个建议是：

"C:\Program Files (x86)\Zend\MySQL51\bin" -u root

那没有用，所以我手动导航到 MySQL51\bin 文件夹，然后键入 mysql.exe -u root。然后它给出了一个错误 Error 2003 (HY000): Can't connect to MySQL on 'localhost' 10061

我尝试关闭防火墙并再次尝试，但仍然没有运气。

任何想法或建议将不胜感激。

谢谢你的帮助

加里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-09T20:31:44.657

虽然这是一篇旧文章，但它是搜索此问题的热门文章之一。我找到了一个适用于 ZEND 下当前 MySql55 安装的解决方案。在 Zend 安装文件夹中（在 Windows 上，希望在其他文件夹中相同），Zend\MySql55\bin 有一个文件“MySQLInstanceConfig.exe”。如果你运行它，它会让你强制更改密码，然后（对我来说）命令行工作。

# c - c语言中的printf函数

> ID：13032374
> 
> 赞同：0
> 
> 时间：2012-10-23T14:09:50.393
> 
> 标签：c, printf

这是我的代码的一部分。

 `````
float a = 12.5;
printf("%d\n", a);
printf("%d\n", (int)a);
printf("%d\n", *(int *)&a); 
````  `当我在 Windows 中编译时，我得到： `0 12 1094713344`

然后，我在linux中编译，我得到了： `-1437851864 12 1094713344`

`-1437851864`每次我执行它都会改变。我的问题是：“printf”函数在 linux 中是如何工作的

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T14:11:36.647

它工作得很好，但你为什么要向它传递错误类型的数据呢？说明`%d`符期望 and `int`，但您传递的是其他内容。馊主意。

如果`float`和`int`在可变参数屏障上的大小不同，则这是未定义的行为。并且由于 `float`通常使用可变参数调用[来提升](http://c-faq.com/varargs/float.html) ，如果你的小于你的，这将中断。`double``int``double`

简而言之，这是非常糟糕和损坏的代码。不要这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T14:12:10.127

要在 C 中打印浮点数，您应该执行以下操作：

```
float a = 12.5;
printf("%f\n", a); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:52:06.267

如前所述，传递类型与格式字符串不匹配的参数会调用未定义的行为，因此语言标准没有对什么设置任何限制

```
float a = 12.5;
printf("%d\n", a); 
```

实际上确实如此。

要了解它的作用，您需要分析您的实现，或者至少分析编译器为该代码生成的程序集。

翻译该代码的一种常用方法是将提升的 (to `double`)`float`参数传递到浮点寄存器中，并告诉浮点寄存器`printf`中传递了多少参数。但是由于格式告诉`printf`查找`int`，它不会在浮点寄存器中查找它，而是在另一个寄存器中查找。因此，打印的值将`printf`是调用时该寄存器中发生的任何内容。``

# ios - 当 glTexImage2D 完成上传时如何得到通知？

> ID：13032381
> 
> 赞同：3
> 
> 时间：2012-10-23T14:10:09.677
> 
> 标签：ios, multithreading, opengl-es, textures

我想在纹理上传到 OpenGL 后进行渲染，但我无法收到有关完成的通知。

我确实想避免使用动画或任何类型的重复渲染。

glTexImage2D 是异步的吗？据我所知，几乎每个 OpenGL 调用都是异步的。

* * *

无论如何，如果我也能被告知 glDrawArrays 的完成情况，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T11:30:44.443

答案是，在调用`glTexImage2D`返回后继续。从您的角度来看，这是一个同步调用，因为它返回后一切都已正确设置。您可以通过使用 PBO 作为中间存储来异步上传纹理，但即便如此，一切都由驱动程序为您管理，您需要知道的是，当`glTexImage2D`返回时，您可以假设纹理数据已正确上传并开始渲染。如果纹理数据还没有在内部上传，你的东西无论如何都不会被渲染，而是等待纹理被设置。

您是正确的，大多数 OpenGL 调用可以被视为异步的，因为它们只安排将命令发送到显卡，驱动程序决定何时最终将它们发送到硬件，而硬件可以自由决定何时处理它们，更不用说没有人知道他们何时真正完成的事实。但你知道吗，你通常不在乎。如果有任何事情需要阻塞以等待某个先前的操作完成（例如异步纹理上传），那么它将自动为您管理，一旦 OpenGL 函数返回，您就可以确定它已经从您的角度完成了它的工作看法。

免责声明：在某些情况下，您确实需要知道实际操作何时最终完成了设备上的工作。尽管您的情况不是其中之一。您可能真正想要同步操作的少数情况之一是，当您出于调试或分析原因而计时某些事情时。而且由于 OpenGL ES 可能缺少[ARB_timer_query](http://www.opengl.org/registry/specs/ARB/timer_query.txt)，因此在这种情况下，发出 a `glFinish`（如*BlueVoodoo*的回答中所建议的）可能是一种选择。

**编辑：**以同样的方式，当您绘制的东西最终呈现到屏幕上时，您不会收到通知`glDrawArrays`，但您只是不关心它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:37:43.413

我猜你的意思是这是一个异步调用？否则，你为什么需要得到通知？如果您需要同步，请查看[glFinish()](http://www.opengl.org/sdk/docs/man/xhtml/glFinish.xml)。我不知道任何有关 openGL 方法的通知。

# android - Android的权限分类

> ID：13032387
> 
> 赞同：-1
> 
> 时间：2012-10-23T14:10:30.017
> 
> 标签：android, android-manifest, android-permissions

我想将android的所有权限分为以下几类：

1.  追踪位置
2.  访问消息和联系人
3.  访问帐户
4.  花钱的服务
5.  开发工具
6.  硬件控制
7.  接入网
8.  访问个人信息
9.  电话
10.  贮存
11.  系统工具

**我如何对所有权限进行分类？任何线索或链接可用？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:30:13.173

根据您的问题的意思：

1）如果您想自己分类所有可能的权限，请这样做：[参考链接](http://developer.android.com/reference/android/Manifest.permission.html)

2）如果您想了解可以呈现给最终用户的所有类别，请[参阅此答案](https://stackoverflow.com/a/7531622/1110688)和[此 Android 开发人员链接](http://developer.android.com/guide/topics/security/permissions.html)。

# c# - 导出透明的 TChart PNG 会扭曲文本

> ID：13032388
> 
> 赞同：0
> 
> 时间：2012-10-23T14:10:30.287
> 
> 标签：c#, .net, teechart

我正在使用 Steema TeeChart v4.1.2010.11303。我想将图表导出为具有**透明背景**的 PNG 图像。

生成的图像在左轴和下轴以及标题中具有**“扭曲”或粗体文本。**它看起来像是用分辨率太低的光栅字体渲染的。另一方面，右边的图例看起来不错：

![带有扭曲文本的 TeeChart](../Images/857319a36b55e6a383073a2a5e24a36e.png)

以下示例代码可用于重现该问题：

```
TChart tChart = new TChart();
tChart.Aspect.View3D = false;
tChart.Panel.Brush.Gradient.Visible = false;

// Make the background of the chart transparent.
tChart.Panel.Transparent = true;

Steema.TeeChart.Styles.Bar series1 = new Steema.TeeChart.Styles.Bar( tChart.Chart );
series1.FillSampleValues();
tChart.Draw();
tChart.Graphics3D.BufferStyle = Steema.TeeChart.Drawing.BufferStyle.None;

using ( System.IO.Stream stream = new System.IO.MemoryStream() )
{
    tChart.Export.Image.PNG.Width = m_PictureBox.Width;
    tChart.Export.Image.PNG.Height = m_PictureBox.Height;
    tChart.Export.Image.PNG.Save( stream );
    // Show the bitmap in a Windows Forms PictureBox.
    // Alternatively, it can also be saved in a file, which makes no difference.
    PictureBox.Image = new Bitmap( stream );
} 
```

使用 关闭透明度时`tChart.Panel.Transparent = false;`，所有文本看起来都很好。但是，我需要一个透明的背景。

这是 TeeChart 中的错误还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:56:43.940

这对我们来说是一种已知的行为，目前我们还没有找到解决这个问题的好方法。如果我们找到了我们认为正确的解决方案，或者我们会得出关于 png 导出问题的有趣结论，我们会立即通知您。

谢谢。

最好的问候，桑德拉·帕索斯

# jquery - 将视图模型显示为下拉列表

> ID：13032394
> 
> 赞同：0
> 
> 时间：2012-10-23T14:10:36.763
> 
> 标签：jquery, jquery-mobile, knockout.js

我有一个看起来像这样的视图模型：

```
var teamViewModel = {
        teams: ko.observableArray([]),
        clearTeams: function(){
            this.teams.removeAll();
        },
        addTeam: function (id, name, isChecked) {
            t = new team(id, name, isChecked);
            this.teams.push(t);
        }
    }; 
```

我得到了所有这样的团队：

```
function GetAvailableTeams() {

        var jqxhr =
        $.getJSON('http://localhose/Service.svc/GetTeamsAll',
          function (data) {
                teamViewModel.clearTeams();
                $.each(data.GetTeamsAllResult, 
                    function (key, val) {
                        teamViewModel.addTeam(val.TeamId, val.TeamName, true);
                    });
                ko.applyBindings(teamViewModel, document.getElementById("teamNameLabel"));
          })
    } 
```

如何数据绑定选择以将 TeamName 作为名称，将 TeamId 作为值。

这是我的尝试，但它的说法 id 无法识别：

`<select id="teamNameLabel" onclick="nextfunction()" date-theme="f" data-bind="options: teams, optionsText: 'name', value: 'id'"></select>`

我也想要返回的 id onchange()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:16:36.090

如果您只想存储，则应该使用`optionsValue`绑定而不是：`value``id`

```
<select id="teamNameLabel" data-bind="options: teams, optionsText: 'name', optionsValue: 'id'"></select> 
```

当你使用`value`绑定时，你不应该用`quotes`. 在这种情况下，属性将存储整个`team`对象。

# vb.net - 找到不明确的匹配项

> ID：13032395
> 
> 赞同：1
> 
> 时间：2012-10-23T14:10:41.147
> 
> 标签：vb.net

我遇到了发现歧义匹配的问题我正在尝试做的事情描述在：[GetType.GetProperties](https://stackoverflow.com/questions/13030461/gettype-getproperties/13030859#13030859)

简而言之，我试图遍历控件的所有属性并查找用户是否对控件的属性进行了任何更改，然后我只获取更改的属性并存储这些属性的值

我遵循了这些建议，但是当控件是 TabControl（tabControl 有 2 个 tabPages）时，我得到了一个错误的属性填充。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:34:02.403

好的，在 Ravindra Bagale 的帮助下，我设法解决了它：问题不是新的修饰符，而是我的愚蠢：在[MSDN](https://msdn.microsoft.com/en-us/library/vstudio/kz0a8sxy%28v=vs.100%29.aspx)中说：

*发生 AmbiguousMatchException 的情况包括：
一个类型包含两个具有相同名称但参数数量不同的索引属性。若要解决歧义，请使用指定参数类型的 GetProperty 方法的重载。
派生类型通过使用 new 修饰符（Visual Basic 中的阴影）声明一个隐藏同名继承属性的属性。若要解决歧义，请使用 GetProperty(String, BindingFlags) 方法重载并包含 BindingFlags.DeclaredOnly 以将搜索限制为未继承的成员。*

所以我使用了 BindingFlags.DeclaredOnly 并解决了问题：

```
Private Sub WriteProperties(ByVal cntrl As Control)

Try
    Dim oType As Type = cntrl.GetType

    'Create a new control the same type as cntrl to use it as the default control                      
    Dim newCnt As New Control
    newCnt = Activator.CreateInstance(oType)

    For Each prop As PropertyInfo In newCnt.GetType().GetProperties(BindingFlags.DeclaredOnly)
        Dim val = cntrl.GetType().GetProperty(prop.Name).GetValue(cntrl, Nothing)
        Dim defVal = newCnt.GetType().GetProperty(prop.Name).GetValue(newCnt, Nothing)

        If val.Equals(defVal) = False Then
           'So if something is different....
        End If

    Next
Catch ex As Exception
    MsgBox("WriteProperties : " &  ex.Message)
End Try 
```

结束子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:10:51.413

我必须道歉。
我之前的回答是错误的。
使用 BindingFlags.DeclaredOnly 我没有得到我想要的属性。
所以我不得不用其他方式纠正这个问题。

出现此问题的原因是两个属性具有相同的名称。
因此，我搜索了相同命名属性的不同之处，发现它们具有：具有不同的**declaringType,MetadataToken**和**PropertyType**。
所以我改变了获得价值和解决问题的方式：

```
Dim val = cntrl.GetType().GetProperty(prop.Name, prop.PropertyType).GetValue(cntrl, Nothing)           
Dim defVal = newCnt.GetType().GetProperty(prop.Name,prop.PropertyType).GetValue(newCnt,Nothing) 
```

对不起，如果我误导了某人。

# c# - 使每个属性具有不同数量的设置的类通用？

> ID：13032396
> 
> 赞同：1
> 
> 时间：2012-10-23T14:10:45.947
> 
> 标签：c#, oop

我必须在运行时设置一些属性，但我遇到的问题是一些属性有 5 个设置，而另一个可能有 3 或 4 个。有没有一种方法可以创建一个通用类，它可以保存任意数量的设置无需编写多个类的属性？

一个示例是我有一个名为的属性`Color`，其唯一设置是，`Color`但在另一种情况下，我有一个`Mask`名为`MaskType``Mask`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:17:49.383

这是一个经典，解决方案实际上取决于您希望如何访问您的属性。
在 ASP.NET 中，缓存使用如下内容：

```
public class Cache
{
   private Dictionary<string, object> CachedValues;

   public object this [string arg]
   {
       get
       {
           return CachedValues[arg];
       }
   }
} 
```

或者你可以使用`Tuple<T1, T2, T3...>`

或者您可以使用`dynamic`匿名类型

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T14:13:56.317

您可能想看看[ExpandoObject](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)。它允许您动态添加属性及其值，尽管它确实需要 .NET 4 或更高版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T14:15:46.600

我认为编写代表您的各个对象的各个类总是更好。在我看来，您只会在尝试编写泛型类时产生更多问题。也许看看工厂或适配器模式来决定在不同场景中使用哪些类。

# unix - ssh远程变量赋值？

> ID：13032409
> 
> 赞同：11
> 
> 时间：2012-10-23T14:11:17.800
> 
> 标签：unix, variables, ssh

以下对我不起作用：

```
ssh user@remote.server "k=5; echo $k;" 
```

它只是返回一个空行。

如何在远程会话 (ssh) 上分配变量？

**注意：**我的问题*不是*关于如何将本地变量传递给我的 ssh 会话，而是如何创建和分配远程变量。（应该是一个非常简单的任务？）

* * *

**编辑：**

更详细地说，我正在尝试这样做：

```
bkp=/some/path/to/backups
ssh user@remote.server "bkps=( $(find $bkp/* -type d | sort) );
                        echo 'number of backups: '${#bkps[@]};
                        while [ ${#bkps[@]} -gt 5 ]; do
                            echo ${bkps[${#bkps[@]}-1]};
                            #rm -rf $bkps[${#bkps[@]}-1];
                            unset bkps[${#bkps[@]}-1];
                        done;" 
```

find 命令工作正常，但由于某种原因`$bkps`没有被填充。所以我的猜测是这将是一个变量分配问题，因为我认为我已经检查了其他所有内容......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-23T15:12:25.167

鉴于此调用：

```
ssh user@remote.server "k=5; echo $k;" 
```

本地外壳在执行之前正在扩展`$k`（很可能未设置）`ssh ...`。因此，一旦建立连接，实际传递给远程 shell 的命令是`k=5; echo ;`（或者`k=5; echo something_else_entirely;`如果`k`实际上是在本地设置的）。

为避免这种情况，请像这样转义美元符号：

```
ssh user@remote.server "k=5; echo \$k;" 
```

或者，使用单引号而不是双引号来防止局部扩展。但是，虽然这适用于这个简单的示例，但您实际上可能希望在发送到远程端的命令中对某些变量进行本地扩展，因此反斜杠转义可能是更好的路线。

为了将来参考，您还可以`set -x`在 shell 中键入以回显正在执行的实际命令，作为故障排除的帮助。

# mysql - 用mysql订购日期

> ID：13032412
> 
> 赞同：0
> 
> 时间：2012-10-23T14:11:32.620
> 
> 标签：mysql, date

如何在mysql上订购日期？我试过这个：

```
SELECT
DATE_FORMAT(date_time,'%d/%m/%Y') Date
FROM 
   date_time
ORDER BY Date; 
```

但不能正常工作

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:12:23.947

订购它，`date_time`因为`DATE`（*别名*）已经是`VARCHAR`

```
ORDER BY date_time; 
```

# java - compareTo 错误比较方法违反了它的一般约定

> ID：13032413
> 
> 赞同：2
> 
> 时间：2012-10-23T14:11:33.723
> 
> 标签：java, comparable

我收到以下错误：

> 比较方法违反了它的总合同！

这是我的 compareTo 方法

```
public int compareTo(ComparableItem another) {
     if (this.score == another.score)
        return this.getItemName().compareTo(another.getItemName());
     else if ((this.score) > another.score)
        return 1;
     else
        return -1;
} 
```

我想比较项目的分数。但是当分数相同时，我想按名称对它们进行排序。

我需要更改什么以及为什么会出现此错误？

编辑：

score 是 a `int`， itemname a `String`。

这是 ComparableItem 类：

```
public abstract class ComparableItem extends MenuListItem implements Comparable<ComparableItem> {

protected int score;

public ComparableItem(String itemID, String itemName) {
    super(itemID, itemName);
}

public int compareTo(ComparableItem another) {
     if (this.score == another.score)
        return this.getItemName().compareTo(another.getItemName());
     else if ((this.score) > another.score)
        return 1;
     else
        return -1;
}

public abstract boolean found(String criteria); 
```

这是 MenuListItem 类：

```
public class MenuListItem {

private String itemID,itemName;

public MenuListItem(String itemID, String itemName){
    setItemID(itemID);
    setItemName(itemName);
}

public String getItemID() {
    return itemID;
}

public void setItemID(String itemID) {
    this.itemID = itemID;
}

public String getItemName() {
    return itemName;
}

public void setItemName(String itemName) {
    this.itemName = itemName;
}

@Override
public String toString() {
    return this.itemName;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T14:29:05.517

引用来自 Java API 的`Comparable<T>`：

> 当且仅当 (e1.compareTo((Object)e2) == 0) 对于每个 e1 具有与 e1.equals((Object)e2) 相同的布尔值时，类 C 的自然排序被称为与 equals 一致和 C 类的 e2。

对于使用 compareTo，api 进一步说：

> 强烈建议（尽管不是必需的）自然排序与 equals 一致。之所以如此，是因为没有显式比较器的排序集（和排序映射）在与自然顺序与等于不一致的元素（或键）一起使用时表现“奇怪”。特别是，这样的排序集合（或排序映射）违反了集合（或映射）的一般合同，该合同是根据 equals 方法定义的。

因此，您可能应该覆盖 equals 以与您的 一致`compareTo()`，因为否则两个不同的对象 e1 和 e2 具有相等`score`且`getItemName()`将具有 `e1.compareTo((Object)e2) == 0)`但不具有`e1.equals((Object)e2)`。

# html - 等宽和全宽导航

> ID：13032414
> 
> 赞同：0
> 
> 时间：2012-10-23T14:11:35.583
> 
> 标签：html, css

我正在为我的 HCI 课程开发一个 Web 应用程序，但我的导航遇到了问题。我试图让我的导航是屏幕的整个宽度，每个文本块都是相等的。我总共有十个项目。我还想在文本上方添加一个图标，但这仍在进行中。我当前的代码将文本向左对齐，并且没有拉伸导航的整个宽度。任何帮助都会很棒。

HTML：

```
<nav>
    <div id = "location"><a href=””&gt;Location</a></div>
    <div id = "weather"><a href=””&gt;Weather</a></div>
    <div id = "waterlevels"><a href=””&gt;Water Levels</a></div>
    <div id = "wavereports"><a href=””&gt;Wave Reports</a></div>
    <div id = "runs"><a href=””&gt;Current Runs</a></div>
    <div id = "hatches"><a href=””&gt;Hatches</a></div>
    <div id = "photogallery"><a href=””&gt;Photo Gallery</a></div>
    <div id = "anglermaps"><a href=””&gt;Angler Maps</a></div>
    <div id = "recipes"><a href=””&gt;Recipes</a></div>
    <div id = "meetups"><a href=””&gt;Meet Ups</a></div>
</nav> 
```

CSS：

```
nav {
    display: -webkit-box;
    display: -moz-box;
    display: box;
    -webkit-box-orient:horizontal;
    -moz-box-orient:horizontal;
    box-orient:horizontal;
    border-bottom:2px solid #111;
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    background:white;
}

nav a { 
    display:block;
    margin-left: auto;
    margin-right: auto;
    width: 100%;
    color:#111;
    padding:10px;
    -webkit-box-flex:1;
    -moz-box-flex:1;
    box-flex:1;
    text-align:center;
    text-decoration:none;
    -webkit-transition:all .4s linear;
    -moz-transition:all .4s linear;
    -o-transition:all .4s linear;
    transition:all .4s linear;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:28:58.270

也许它是一个复制粘贴错误，但这不是正确的 HTML：

```
<div id = "location"><a href=””&gt;Location</a></div> 
```

`id`& `=`&之间有空格`"`，则链接中存在错误，因为缺少 URL 甚至是占位符`#`

也许这可以解决一些浏览器问题。

那么对于你的问题，试试这个：

```
nav {
  text-align: center;
}
nav a { 
   display:inline-block;
   margin: 0 auto;
   width: auto;
   color:#111;
   padding:10px;
   -webkit-box-flex:1;
   -moz-box-flex:1;
   box-flex:1;
   text-align:center;
   text-decoration:none;
   -webkit-transition:all .4s linear;
   -moz-transition:all .4s linear;
   -o-transition:all .4s linear;
   transition:all .4s linear;
} 
```

删除`<div>`您的链接周围

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:29:03.717

这是不是更接近你想要的？

您不需要 div 元素和锚点。使用显示块，锚点具有与 div 相似的特征。

像这样：

`<a id="meetups" href=””&gt;Meet Ups</a>`

[http://jsfiddle.net/dm6Sp/2/](http://jsfiddle.net/dm6Sp/2/)

编辑：我没有费心在小提琴中重新格式化你的代码，所以你可能想在使用它之前看一下它自己修复它。它有效，只是不是很漂亮。:)

# android - Android 4.0.3(ICS) WebView 图形问题

> ID：13032416
> 
> 赞同：1
> 
> 时间：2012-10-23T14:11:49.720
> 
> 标签：android, webview, android-4.0-ice-cream-sandwich

我有一个关于 Android WebView 的问题。

在安卓版姜饼上没问题。

但是ICS不行。

我刚刚尝试使用 $.post 更改元素。

之后，停止屏幕和图形被打破。

触摸屏幕后，屏幕变化OK。

我该如何解决这个问题？

请帮助我。

我只使用简单的 JQuery 代码。

```
$.get("pages/somepage.html", function(data) {
var text = '<div>'+data+'</div>';
$('.content').html(text); }); 
```

我认为这个问题来自 2.3.3 和 4.0.3 webview 之间的差异。

我不知道那是什么。我猜是 web 引擎或 webkit 的东西。

# fortran - 用于稀疏矩阵对角化的 DSYEV 和 DSYEVD

> ID：13032425
> 
> 赞同：3
> 
> 时间：2012-10-23T14:12:09.707
> 
> 标签：fortran, linear-algebra, sparse-matrix, matrix-multiplication, lapack

所以我已经到了 DSYEVD 变得不切实际的地步，因为它对内存的要求更高——它需要至少 240GB 内存来对角化我的矩阵，所以我正在考虑转向 DSYEV 例程，它需要更少的内存；

[DSYEVD](http://www.netlib.org/lapack/double/dsyevd.f)需要 (1 + 6N + 3N^2) 个字，而[DSYEV](http://www.netlib.org/lapack/double/dsyev.f)只需要 3N + N^2。

我拥有的*较小矩阵的尺寸约为 100,000，而较大的矩阵尺寸约为 230,000。*显然，第二个必须使用 DSYEV 完成，但第一个我可以使用任何一个。

我快速浏览了谷歌，但找不到任何相关的基准——唯一可用的基准有 N=10-1000，并且是密集矩阵。我的矩阵是 100K 维度和 90% 稀疏，以及 230K 维度和 95% 稀疏。

**有谁知道我可以期望这需要多长时间？**

我已经使用 DSYEVD 从每个特征向量中提取了前 3000 个特征向量和值，但现在我需要将它们全部提取出来。当仅采用 3K 向量时，使用迭代方案，100K 矩阵需要约 1.6 天，230K 矩阵需要约 3 天。这些作业在 Intel(R) Xeon(R) CPU E5-4640 0 @ 2.40GHz 和 256GB 内存上运行。

# javascript - 使用 Javascript 或解决方法读取本地文件（图像）

> ID：13032434
> 
> 赞同：1
> 
> 时间：2012-10-23T14:12:25.647
> 
> 标签：javascript, html

我读过如果不让用户确定这些文件，就不可能使用 Javascript 读取本地文件。有解决方法吗？

原因：我们有一个用 php/js 编写的工具，它在网络服务器上运行，让用户处理数据。该工具可以访问同一服务器上的很多大图像（几个 tera 字节）。用户以大约 40 个图像的块访问这些图像 - 如果他们处理一个块，则加载下一个块。问题是：这些图片发出的流量太大，用户在家无法高效使用该工具（加载这些图片耗时太长）。

想法/问题：我们想将图像复制到硬盘驱动器上，并让工具从硬盘驱动器而不是网络服务器加载图像。但不幸的是，这似乎是不可能的，因为如果不让用户选择要加载的内容，就可能无法加载本地图像（就文件数量而言，这不是选项）。

可能的解决方案（我想到的）：

*   在 JS 中加载本地图像的解决方法？
*   在客户端上运行 php-stuff（问题：没有“即插即用”解决方案 - 需要客户端配置）
*   包装浏览器的自定义（java？）工具，从服务器检索图像路径并显示图像（问题：我们需要一个相当快速的解决方案，我不确定这个工具能否正常工作）

所以 - 这个问题的任何想法或解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:14:35.227

除了提供标准 Web 界面外，还提供可供用户使用的可下载应用程序。不要用它包装浏览器，只需使用 HTTP 库来上传文件（如果您编写 Web 端的东西以便它呈现 RESTful API 以及浏览器应用程序，这将更容易）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:14:14.730

通过使用 Internet Explorer (9) 解决了该问题。IE 加载本地图像（这对某些人来说可能是一个安全问题，但对我来说这只是一个解决方案）。遗留问题：该工具未针对 IE 进行优化，因此在 IE 中存在大量 CSS 和 JS 问题（但未选择的页面在 IE 中没有问题？:D）

无论如何，感谢您提供替代方法:)

# java - 可靠地隐藏软键盘

> ID：13032436
> 
> 赞同：15
> 
> 时间：2012-10-23T14:12:32.263
> 
> 标签：java, android, android-softkeyboard

我有一个应用程序，需要在执行*大量操作*时关闭软键盘。例如，**单击按钮时，****绘制**新布局时，**屏幕方向更改**时，**控制器告诉**UI 时等等。我使用 optionsMenuButton 通过 ViewFlipper 翻转视图，显然我希望键盘隐藏在翻转视图中（那里没有输入字段）。

到目前为止，我已经尝试过这些，并说明为什么这些不可靠：

这个没用，因为我有很多编辑文本和其他视图。如果可能的话，我需要一个更通用的，一个不需要视图作为参数的。

```
InputMethodManager imm = (InputMethodManager)getSystemService(
  Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0); 
```

这个对我根本不起作用：

```
getWindow().setSoftInputMode(
  WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

这个可以工作，但是当视图翻转时会立即再次弹出键盘。

```
InputMethodManager imm = (InputMethodManager) getSystemService(Activity.INPUT_METHOD_SERVICE);
imm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, 0); 
```

这个有时有效，但 getCurrentFocus() 大多数时候返回 null 。

```
InputMethodManager inputManager = (InputMethodManager)            
Context.getSystemService(Context.INPUT_METHOD_SERVICE); 
inputManager.hideSoftInputFromWindow(this.getCurrentFocus().getWindowToken(),      
InputMethodManager.HIDE_NOT_ALWAYS); 
```

这个只有在显示键盘时才有效：

```
getInstrumentation().sendKeyDownUpSync(KeyEvent.KEYCODE_BACK); 
```

这不像第一段代码那样与 EditText 一起使用，但与根布局一起使用，它会随着方向变化和每次调用 oncreate 时发生变化。对于横向/纵向和普通/大，我有不同的布局 XML。所有根布局都有 ID `root`。这第一次工作得很好，但在那之后，它就不再工作了。

```
InputMethodManager inputManager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
inputManager.hideSoftInputFromWindow(findViewById(R.id.root).getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS); 
```

底线：我已经尝试了很多软键盘隐藏方法，但它们似乎都不能可靠地工作。**有*什么*方法可以可靠地隐藏软键盘吗？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T14:38:00.893

我认为如果你处理 getCurrentFocus() 的 null 情况，你就可以开始了。我使用下面的方法，它就像一个魅力！

```
 /* Hide Keyboard */
    public static void hideKeyboard(Activity activity){
        InputMethodManager inputMethodManager = (InputMethodManager)activity
                .getSystemService(Context.INPUT_METHOD_SERVICE);
        View focus = activity.getCurrentFocus();
        if(focus != null)
            inputMethodManager.hideSoftInputFromWindow(focus.getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-27T07:25:46.337

由于您需要调出`EditText`键盘，请找到特定的键盘并使用您显示的第一种方法来隐藏键盘：

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0); 
```

但是，您将需要它`EditText`。首先，获取所有视图：

```
public static ArrayList<View> getAllViewsFromRoots(View...roots) {
    ArrayList<View> result = new ArrayList<View>();
    for (View root : roots) {
        getAllViews(result, root);
    }
    return result;
}

private static void getAllViews(ArrayList<View> allviews, View parent) {
    allviews.add(parent);
    if (parent instanceof ViewGroup) {
        ViewGroup viewGroup = (ViewGroup)parent;
        for (int i = 0; i < viewGroup.getChildCount(); i++) {
            getAllViews(allviews, viewGroup.getChildAt(i));
        }
    }
} 
```

然后，得到一个`EditText`可见的。

```
public static EditText getEditText(View root) {
    ArrayList<View> views = getAllViewsFromRoots(root);
    for (View view : views) {
        if (view instanceof EditText && view.getVisibility() == View.VISIBLE) {
            return (EditText) view;
        }
    }
    return null;
} 
```

在某处打电话：

```
Toolkit.getEditText(((ViewParent) findViewById(android.R.id.content)).getChildAt(0)); 
```

这样，调用隐藏方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-23T14:29:50.633

这个总是对我有用：

```
InputMethodManager im = (InputMethodManager) getSystemService(MyActivity.INPUT_METHOD_SERVICE);
im.hideSoftInputFromWindow(getWindow().getDecorView().getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-31T06:04:41.193

科特林。把它放在常见的 BaseActivity 上。只需在活动中的任何地方调用 hideKeyboard() 方法，类似适用于 Fragment。

```
open class BaseActivity : AppCompatActivity() {

fun Fragment.hideKeyboard() {
    view?.let { activity?.hideKeyboard(it) }
}

fun Context.hideKeyboard(view: View) {
    val inputMethodManager = getSystemService(Activity.INPUT_METHOD_SERVICE) as InputMethodManager
    inputMethodManager.hideSoftInputFromWindow(view.windowToken, 0)
}

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-24T17:21:16.867

只有这个解决方案对我有用：

```
mActivity.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

我有一个带有输入字段的对话框，隐藏对话框并没有隐藏平板电脑上的键盘。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-22T06:41:43.340

这应该适用于大多数情况。

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(new View(this).getWindowToken(), 0); 
```

也无需担心空指针。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-20T02:38:50.173

试试这个：

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN); 
```

# ios - 什么是保存用户界面对象 iOS 的最佳方法

> ID：13032437
> 
> 赞同：0
> 
> 时间：2012-10-23T14:12:35.220
> 
> 标签：ios, user-interface, nscoding

我有一个包含其他视图的 UIScrollView 对象。用户可以在运行时创建 UIViewController，并将其视图放在 UIScrollView 上。反过来，它们也存储不同的视图。

所以我想我可以使用 NSCoding 在 NSUserDefaults 中存储用户界面。但也许另一种方式会更漂亮，例如，如果我将拥有这些视图的数据模型，并且如果我需要它们，我将使用数据模型而不是 NSCoding 重新创建它，它将我所有的对象存储在存储中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:20:05.413

我不会存储任何用户界面元素本身。我也不会存储整个模型对象。最好的方法是存储恢复（数据）模型对象所需的最小值。

您可能需要创建一个“存储数据树”，以便每个视图控制器都可以恢复它自己的子视图并将存储的数据传递给它们，以便它们可以执行相同的操作。

然后，当需要恢复时，您只需要使用存储的值重建数据模型并将它们连接到用户界面。

# java - 如何在 Ruby 程序中捕获 java.sql.sqlexception？

> ID：13032438
> 
> 赞同：1
> 
> 时间：2012-10-23T14:12:38.923
> 
> 标签：java, sql, ruby, jruby

我确定我在这里做了一些愚蠢的事情。我正在使用 Ruby 1.9.2-p312、jruby 1.6.8 并将 --1.9 选项设置为默认值。这是我第一次尝试挽救 SQLException。我故意通过拔下以太网连接使这段代码失败。

```
require 'java'
require 'lib/jt400-6.1'
require 'date'
require 'bigdecimal'

java_import 'com.ibm.as400.access.AS400JDBCDriver'def initialize(parms={})

class DB
  def initialize(parms = {})
    begin
      @connection ||= java.sql.DriverManager.get_connection "jdbc:as400://System/",parms[:user], parms[:pass]
    rescue java.sql.SQLException
      puts "Error connecting to iSeries. Error code: #{java.sql.SQLException.getErrorCode()}
                SQL State: #{java.sql.SQLException.getSQLState()}."
    end
  end
end 
```

这会产生以下错误：

```
NoMethodError - undefined method `getErrorCode' for Java::JavaSql::SQLException:Class:
/home/nick/Projects/OrderBridge/app/db.rb:17:in `initialize'
/home/nick/Projects/OrderBridge/app/order-processor.rb:208:in `prepare'
/home/nick/Projects/OrderBridge/app/orderbridge.rb:43:in `POST /advanced'
org/jruby/RubyMethod.java:117:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:1212:in `compile!'
org/jruby/RubyProc.java:258:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:785:in `route!'
/home/nick/.rvm/gems/jruby-1.6.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:801:in `route_eval'
/home/nick/.rvm/gems/jruby-1.6.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:785:in `route!'
/home/nick/.rvm/gems/jruby-1.6.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:822:in `process_route'
org/jruby/RubyKernel.java:1226:in `catch'
/home/nick/.rvm/gems/jruby-1.6.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:820:in `process_route'
/home/nick/.rvm/gems/jruby-1.6.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:784:in `route!'
org/jruby/RubyArray.java:1620:in `each'
/home/nick/.rvm/gems/jruby-1.6.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:783:in `route!'
/home/nick/.rvm/gems/jruby-1.6.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:886:in `dispatch!'
/home/nick/.rvm/gems/jruby-1.6.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:719:in `call!'
/home/nick/.rvm/gems/jruby-1.6.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:871:in `invoke'
org/jruby/RubyKernel.java:1226:in `catch'
/home/nick/.rvm/gems/jruby-1.6.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:871:in `invoke'
/home/nick/.rvm/gems/jruby-1.6.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:719:in `call!'
/home/nick/.rvm/gems/jruby-1.6.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:705:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb:22:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/rack-protection-1.2.0/lib/rack/protection/base.rb:47:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/rack-protection-1.2.0/lib/rack/protection/base.rb:47:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/rack-protection-1.2.0/lib/rack/protection/path_traversal.rb:16:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/rack-protection-1.2.0/lib/rack/protection/json_csrf.rb:17:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/rack-protection-1.2.0/lib/rack/protection/base.rb:47:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb:22:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/home/nick/.rvm/gems/jruby-1.6.8/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/rack-1.4.1/lib/rack/nulllogger.rb:9:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/rack-1.4.1/lib/rack/head.rb:9:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/sinatra-1.3.2/lib/sinatra/showexceptions.rb:21:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/rack-1.4.1/lib/rack/lint.rb:48:in `_call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/rack-1.4.1/lib/rack/lint.rb:36:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/rack-1.4.1/lib/rack/showexceptions.rb:24:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/rack-1.4.1/lib/rack/commonlogger.rb:20:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/rack-1.4.1/lib/rack/chunked.rb:43:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/rack-1.4.1/lib/rack/content_length.rb:14:in `call'
/home/nick/.rvm/gems/jruby-1.6.8/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
/home/nick/.rvm/rubies/jruby-1.6.8/lib/ruby/1.9/webrick/httpserver.rb:111:in `service'
/home/nick/.rvm/rubies/jruby-1.6.8/lib/ruby/1.9/webrick/httpserver.rb:70:in `run'
/home/nick/.rvm/rubies/jruby-1.6.8/lib/ruby/1.9/webrick/server.rb:183:in `start_thread' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:16:56.800

您想将异常捕获到变量中。

```
class DB
  def initialize(parms = {})
    begin
      @connection ||= java.sql.DriverManager.get_connection "jdbc:as400://System/",parms[:user], parms[:pass]
    rescue java.sql.SQLException => e
      puts "Error connecting to iSeries. Error code: #{e.getErrorCode()}
                SQL State: #{e.getSQLState()}."
    end
  end
end 
```

这样你就不会调用`.getErrorCode()`异常的类，而是调用异常的实例。

[处理 jRuby 中的异常](http://lorenzod8n.wordpress.com/2007/05/24/dealing-with-java-exceptions-in-jruby/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:17:05.637

您的问题在 puts 语句中。您指的是异常类而不是对象，请尝试

```
rescue java.sql.SQLException => e
  puts "Error connecting to iSeries. Error code: #{e.getErrorCode()}
            SQL State: #{e.getSQLState()}."
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-21T04:22:57.110

我遇到了这个类似的问题，并想分享我的解决方案，即使用“消息”和“wrapped_exception.error_code”，如果需要也可以使用。

```
class DB
  def initialize(parms = {})
    begin
      @connection ||= java.sql.DriverManager.get_connection "jdbc:as400://System/",parms[:user], parms[:pass]
    rescue java.sql.SQLException => e
      puts "Error message: #{e.message}
                Msg: #{e.wrapped_exception.error_code}."
    end
  end
end 
```

# php - 检索请求的 url 以传递给 case 语句的函数

> ID：13032445
> 
> 赞同：0
> 
> 时间：2012-10-23T14:13:09.860
> 
> 标签：php

有没有可以用来提取请求的 URL 的函数？

我想在案例声明中评估导入我的视图/包含/等的路径，所以如果有人能指出我的方向，我将非常感激。

我打算用这样的东西......

```
function curPageURL() {

    //create url prefix ie https://...etc
    $pageURL = 'http';

    if ($_SERVER["HTTPS"] == "on"){$pageURL .= "s";}

    $pageURL .= "://";

    //if not on port 80 find out which port were on
    if ($_SERVER["SERVER_PORT"] != "80") {        
        $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];        
    } else {
        $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
    }
//return full url string
return $pageURL;
}

variable = curPageURL(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:04:37.630

想出了这个。

如果有人有这个想法，只需设置一个变量值并将其发送到 URL，a la ...

```
<li><a href="index.php?content=location">Locations</a></li> 
```

然后在控制器中拦截它（通过主模板上的包含，我使用我自己的 MVC 和导航控制器），就像这样......

```
if(isset ($_GET["content"])){   
    switch ($_GET["content"]){
        case 'home':
            $masterURL = 'views/contenthome.php';
            $div_id = "content_home";
        break;
        case 'courses':

            $masterURL = 'views/courses.php';
            $div_id = "content_courses";
        break;

    }//end switch
}else{
    $masterURL = 'views/contenthome.php';
}//end if 
```

它简单而有效，但我希望它对某个地方的人有所帮助。

# .net - XML 运行时序列化库与 BCL 序列化属性兼容但没有序列化程序的编译？

> ID：13032446
> 
> 赞同：0
> 
> 时间：2012-10-23T14:13:11.363
> 
> 标签：.net, xml, serialization

我们有许多对象分布在主机代码库和加载项代码库中。我们的主机提供可以存储自定义对象的设置存储。当读取许多设置时，它会在应用程序启动期间导致很长时间编译序列化程序。我们实现了使用 Serializable、XmlIgnore、XmlAttribute 和 XmlElement 属性的小型库，这些属性序列化了某种对象（没有继承，没有数组 - 只有列表）。它在启动期间创建序列化程序。自定义序列化程序解析 XML 比 BCL 慢 4 倍，但创建速度快 50 倍（即 csc.exe 会降低 BCL 序列化程序的启动性能）。这对我们来说没问题。但是我们需要我们的库在可能性和异常方面与 BCL 提供的 XML 序列化完全兼容，而无需自定义内容（例如自定义属性）。有人知道这样的图书馆吗？

我知道关于 sgen.exe 的一切，它被考虑过，但会产生一些负面影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:41:15.913

Mono 和 .NET 4.5 的 System.Xml 可以做到这一点。

# jquery - Jquery在页面加载时加载模式框

> ID：13032447
> 
> 赞同：0
> 
> 时间：2012-10-23T14:13:13.410
> 
> 标签：jquery, xhtml

我希望在页面加载时加载此模式表单：

到目前为止，这是我的 JQuery：（我尝试过加载文档但没有用？）

```
$().ready(function() {
  $('#dialog').jqm();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:16:11.017

```
$(function() {
     $('#dialog').jqm();
}); 
```

# python - 从数组中删除所有特定值

> ID：13032448
> 
> 赞同：5
> 
> 时间：2012-10-23T14:13:13.133
> 
> 标签：python

我必须从数组中删除所有特定值（如果有的话），所以我写：

```
while value_to_remove in my_array:
    my_array.remove(value_to_remove) 
```

有没有更多的pythonic方法可以通过一个命令来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T14:14:36.960

你可以试试：

`filter (lambda a: a != value_to_remove, my_array)`

例子：

```
>>> my_array = ["abc", "def", "xyz", "abc", "pop", "abc"]
>>> filter (lambda a: a != "abc", my_array)
['def', 'xyz', 'pop'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T14:15:44.697

```
clean_array = [element for element in my_array if value_to_remove != element]

my_array = ('a','b','a','c')
value_to_remove = 'a'
>>> clean_array = [element for element in my_array if value_to_remove != element]
>>> clean_array
['b', 'c'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T14:16:01.263

使用[`itertools.ifilter`](http://docs.python.org/library/itertools.html?highlight=drop#itertools.ifilter)：

```
import itertools

my_array = list(itertools.ifilter(lambda x: x != value_to_remove, my_array)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T06:09:42.260

不要错过有一个非常有效的方法如下：

```
import numpy as Numpy

a = Numpy.array([1,7,3,4,4,6,3,8,7,0,8])
b = Numpy.array(['1','7','3','4','4','6','3','8','7','0','8'])
c = Numpy.array([0.1,9.8,-0.4,0.0,9.8,13.7])
d = Numpy.array(['one','three','five','four','three'])

print a
print a[a!=3]

print b
print b[b!='3']

print c
print c[c!=9.8]

print d
print d[d!='three'] 
```

你得到：

```
>>> 
[1 7 3 4 4 6 3 8 7 0 8]
[1 7 4 4 6 8 7 0 8]
['1' '7' '3' '4' '4' '6' '3' '8' '7' '0' '8']
['1' '7' '4' '4' '6' '8' '7' '0' '8']
[  0.1   9.8  -0.4   0\.    9.8  13.7]
[  0.1  -0.4   0\.   13.7]
['one' 'three' 'five' 'four' 'three']
['one' 'five' 'four'] 
```

# android - 数据库中第一个位置的sqlite查询

> ID：13032449
> 
> 赞同：1
> 
> 时间：2012-10-23T14:13:22.530
> 
> 标签：android, database, sqlite

我正在尝试在我构建的数据库上运行查询，但是当我运行查询（按名称）并提取结果时遇到了一个奇怪的问题。如果我提取 db 中的第一行，则可以使用其他参数运行另一个查询。如果我提取除第一行以外的行，我将无法再访问数据库中的第一行

```
 Cursor cur =datasource.query( 2,new String[] {"_id","Player","Num_of_wrong_ans","Num_of_drunkness_checks"} , PlayerDatabaseHelper.PLAYER + " =? " ,new String[] {array[1]} , null ); 
            if(cur.moveToFirst())
            {                   
                id = cur.getString(cur.getColumnIndex(PlayerDatabaseHelper.ID));

            }
            cur.close(); 
```

查询方法是这样的：

```
 public Cursor query( int indicator,String[] projection, String selection,
        String[] selectionArgs, String sortOrder) {
    SQLiteQueryBuilder qb = new SQLiteQueryBuilder();
    String a;
    switch (indicator) 
    { 
    case 1: 
        qb.setTables(PlayerDatabaseHelper.PLAYER_TABLE_NAME); 
        qb.setProjectionMap(projectionMap); 
        break; 
    case 2: 
        qb.setTables(PlayerDatabaseHelper.PLAYER_TABLE_NAME); 
        qb.setProjectionMap(projectionMap); 
        qb.appendWhere(PlayerDatabaseHelper.PLAYER);
        break; 
    default: 
        throw new IllegalArgumentException("Unknown  "); 
    } 

    // Get the database and run the query 
    SQLiteDatabase db = mHelper.getReadableDatabase(); 
    Cursor c = qb.query(db, projection, selection, selectionArgs, null, null, null); 
    return c; 

} 
```

我究竟做错了什么 ？？？

# facebook - 喜欢社交插件显示任何 Facebook 照片的点赞数为零

> ID：13032452
> 
> 赞同：5
> 
> 时间：2012-10-23T14:13:34.697
> 
> 标签：facebook, facebook-like

**问题**：当[Facebook Like 插件](https://developers.facebook.com/docs/reference/plugins/like/)（喜欢按钮）用于允许人们通过我的网站喜欢我的 Facebook 帖子时，它不会在我的提要中显示正确数量的照片喜欢。它仅适用于状态更新。

**附加信息**

一切顺利，从实际帖子中提供喜欢的 URL（例如[http://www.facebook.com/xxxxxxxxx/posts/yyyyyyyyy](http://www.facebook.com/xxxxxxxxx/posts/yyyyyyyyy)）。它会显示点赞按钮以及该帖子当前拥有的点赞数，并允许我点赞。如果我没有登录 facebook，系统会提示我按预期登录。

但是，一旦该帖子的类型为“照片”（如图 api 所示）并且因此包含照片，则上述方法不起作用。即使指向帖子页面的直接链接显示它有喜欢，点赞按钮仍然显示 0 个点赞，单击点赞按钮会将 0 增加到 1，但不会增加该帖子/照片的点赞数。就好像 facebook 在包含照片时不会将喜欢的帖子连接到帖子一样。

我的问题是......是否有可能找到正确的 URL 添加到 facebook 按钮，以便它从照片/帖子中获取正确的喜欢（就像只有一个帖子一样），如果是这样，我将如何找到那个 URL？

**繁殖方式**

这是清楚地说明问题的 JSFiddle 链接：http: [//jsfiddle.net/HALtb/](http://jsfiddle.net/HALtb/)

寻找解决方案。

谢谢你。

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:57:33.347

Facebook Like Button 社交插件用于通过 URL 为文章或 Open Graph 对象点赞它不适用于 facebook.com 上的内容，但 Facebook 页面除外。它不能用来点赞照片、评论、帖子等。可以通过 API 直接点赞，并获得应用用户的适当权限`

# jqgrid - 不支持带有动态列表（下拉）的 Struts2 网格过滤列

> ID：13032462
> 
> 赞同：0
> 
> 时间：2012-10-23T14:14:10.403
> 
> 标签：jqgrid, struts2, filter, grid

我无法使带有动态列表（下拉）的 Struts2 网格过滤器列工作。代码如下。我正在使用 struts 网格 2.2。在列上尝试了 edittype="select"。没运气 ：（

```
<sjg:grid id="unAssignedTable" 
                    ...

                    filter="true"
                    **filterOptions="{ stringResult :true,
                                     searchOnEnter : true,
                                    enableClear : true}"**

                ..
                    >

                    ...
                    <sjg:gridColumn name="countryDescription" index="countryDescription" title="Country" sortable="true" search="true" edittype="select"  />
                    ....
                </sjg:grid> 
```

基本上想要在 shipType 列上搜索过滤器，如下所示[http://www.trirand.com/blog/phpjqgrid/examples/searching/search_toolbar/default.php](http://www.trirand.com/blog/phpjqgrid/examples/searching/search_toolbar/default.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:20:01.790

如果您知道过滤器元素的 id 属性，则可以这样做。假设你这样做了，只需使用 JQuery 之类的东西将必要的 HTML 代码添加到元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:37:52.190

一旦我们知道参数（dataInit）和语法，就很容易了。

```
<sjg:gridColumn name="test" index="test" title="Test" sortable="true" width="90"
                                        searchoptions="{   dataInit:function(elem) {myfunction(elem) }  }" /> 
```

# symfony - Doctrine - 数据库关系 - 多对多添加状态

> ID：13032468
> 
> 赞同：2
> 
> 时间：2012-10-23T14:14:25.577
> 
> 标签：symfony, orm, doctrine, many-to-many, relational

如何在 ORM（Doctrine）中以最佳方式实现以下场景？

场景：一个用户可以属于一个或多个团队。一个团队可以由一个或多个用户组成。

所以，第一部分没有问题，但我希望用户对**他所属的每个团队**都有一个“activation_status” 。

因此，当我来自 SQL 和关系数据库时，我可以在我的多对多关系表“team2user”中添加一个“activation_status”字段

-> 数据库字段：team_id、user_id、activation_status

但是我怎样才能用 Doctrine 来实现呢？我坚持实体团队和用户。但是我如何正确地保持activation_status？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:20:42.607

我认为您可以修改您的实体并添加一个激活实体，这样您的实体将如下所示：

1.  用户有多个激活 (OneToMany)
2.  激活属于一个用户（ManyToOne），属于一个团队（ManyToOne）
3.  团队有几个激活 (OneToMany)

您还可以通过 Activation 实体定义 User 和 Team 之间的 ManyToMany 关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:21:31.057

实现这一点的唯一方法（至少到 Doctrine 2.1，我不能 100% 确定它在更高版本中的外观）是创建单独的实体`TeamUser`并将其与`User`使用`Team`关系的实体`ManyToOne`相关联。然后你可以把你想要的任何东西放在你的新实体中（对于你的例子，它将是附加`$activationStatus`属性）

# c# - 从属性获取器返回数组的替代方法

> ID：13032469
> 
> 赞同：1
> 
> 时间：2012-10-23T14:14:26.607
> 
> 标签：c#

我想知道为什么代码分析（在 VS 2012 中）会为以下代码发出“CA1819：属性不应返回数组”：

```
private byte[] BackingFieldData;

public byte[] Data
{
    get { return this.BackingFieldData; }
    set { this.BackingFieldData = value; }
} 
```

警告状态的描述*属性返回的数组不受写保护，即使该属性是只读的。为了保持数组防篡改，该属性必须返回数组的副本。*

我想要的是返回数组。用户应该能够修改数组，但不能调整它的大小。用户经常访问数组的大小。用户必须能够通过索引访问元素。因此，数组类型似乎非常适合。

我考虑过的替代方案是（使用等`IEnumerable<byte>`非常好地完成索引），（它专注于添加和删除元素 - 我不想要那个）和（当类公开总是抛出 s 的方法时，我讨厌它，远离良好的编码风格恕我直言）。我还考虑过在数组周围创建一个带有包装类的自定义接口——但这有什么意义（除了我可以在不抑制警告的情况下摆脱警告）。`Skip``Take``IList<byte>``ReadOnlyCollection<byte>``NotSupportedException`

那么，有没有人知道要返回的好类型而不是数组类型，或者在这种情况下为什么不返回数组的充分理由？到目前为止我没有提到任何影响吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T14:15:37.757

在这种情况下，您应该禁止显示该警告。
大多数数组指南不适用于`byte[]`s。

但是，您还应该删除（或`private`调整）setter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:15:21.460

.NET Framework 4.5 提供[IReadOnlyList<T> 接口](http://msdn.microsoft.com/en-us/library/hh192385.aspx)

数组可以分配给一个`IReadOnlyList<T>`没有转换等 - 恕我直言，最好的解决方案。

# symfony - 如何在 Symfony2 中制作 I18N ChoiceList？

> ID：13032473
> 
> 赞同：0
> 
> 时间：2012-10-23T14:14:35.483
> 
> 标签：symfony, internationalization, symfony-forms, symfony-2.1

我正在扩展[`SimpleChoiceList`](http://api.symfony.com/2.1/Symfony/Component/Form/Extension/Core/ChoiceList/SimpleChoiceList.html)以`Gender` `<select>`向我的用户提供一个。

我想知道如何使标签可翻译。

目前，我的代码如下所示：

```
class GenderChoiceList extends SimpleChoiceList
{
    public function __construct()
    {
        $choices = array(
            UserInterface::GENDER_MALE    => 'user.form.gender.label.male',
            UserInterface::GENDER_FEMALE  => 'user.form.gender.label.female',
        );

        parent::__construct($choices);
    }
} 
```

有什么方法可以流畅地完成这项工作还是我必须自己注射`Translator`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:25:09.977

默认情况下已经翻译了标签。您所要做的就是将翻译放入`messages.LANG.FORMAT`文件中。

# javascript - TinyMce 设置最大宽度

> ID：13032476
> 
> 赞同：1
> 
> 时间：2012-10-23T14:14:41.263
> 
> 标签：javascript, tinymce, wysiwyg

我遇到了 TinyMce 的问题。我有一个使用这个所见即所得的 CMS，当用户插入一个大于布局主体的表格时，它会使布局/模板不对齐。

因此，我正在寻找防止用户插入不超过 400 像素的表格的最佳解决方案。

我想做的一件事是在 tinyMCE.init 中创建一个自定义最大宽度参数，然后在 table.js 中通过表单对象变量检查这个参数和表格宽度。

我能够很好地完成这部分。如果有人在他们的属性框中创建了一个表格，他们将收到一个弹出窗口，提醒他们输入的值比最大声音宽度更宽。这解决了一半的问题，但我真正需要的是一种方法来触发一个函数，当有人试图拖动和重新调整表格大小时，该函数会检查宽度与最大宽度。

我想我可以在它自己的文本字段上使用 onmouseup 事件触发它，或者在另一个函数中嵌套一个函数来触发它来检查宽度。我只是不知道需要在哪里插入。有人能给我一些想法或指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:39:49.607

您可以侦听 dragend 事件，然后检查宽度。如果插入的表格更宽，您可以将其删除或提醒消息。

# jquery - 当 div 元素可见时检测按键

> ID：13032477
> 
> 赞同：3
> 
> 时间：2012-10-23T14:14:42.777
> 
> 标签：jquery, gallery, lightbox, keypress

我正在制作一个灯箱画廊小部件，现在我需要检测按键并调用一个函数，但只有当`#lightbox`元素可见时，如果不是，它应该忽略按键，使用 jquery，我尝试了以下操作：

```
 $("#lightbox").keyup(function(e) {
alert(e.keyCode);
  if (e.keyCode == 27) { alert("a") }   // esc
}); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T14:15:25.923

```
if ($('#lightbox:visible').length && e.keyCode==27) { 
```

或者

```
if ($('#lightbox').is(':visible') && e.keyCode==27) { 
```

[http://api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:24:48.487

你可以用`.is(selector)`这个。它将检查当前选择器是否成立，（如果 #lightbox == #lightbox:hidden

```
$("#lightbox").keyup(function (e) {
    if($("#lightbox").is(":visible")) {
        ... //your code hear
    }
}); 
```

[http://api.jquery.com/is/](http://api.jquery.com/is/)

# powershell - Powershell - 连接字符串

> ID：13032490
> 
> 赞同：1
> 
> 时间：2012-10-23T14:15:24.790
> 
> 标签：powershell, lines

我尝试解析一些文本文件，最后我需要从 2 行中创建 1 行：

```
19.10.2012 15:33:22<TAB here!>
textline<TAB here!>#1
19.10.2012 15:33:13<TAB here!>
textline<TAB here!>#2
19.10.2012 15:29:29<TAB here!>
textline<TAB here!>#3
19.10.2012 15:29:23<TAB here!>
textline<TAB here!>#4 
```

在输出我需要有这个：

```
19.10.2012 15:33:22<TAB here!>textline<TAB here!>#1
19.10.2012 15:33:13<TAB here!>textline<TAB here!>#2
19.10.2012 15:29:29<TAB here!>textline<TAB here!>#3
19.10.2012 15:29:23<TAB here!>textline<TAB here!>#4 
```

请帮帮我！:)

编辑：这就是我所拥有的：

```
Get-ChildItem $Path -Recurse -Include *.* | Foreach-Object {$_.FullName} |
Foreach-Object {
    Write-Host $_
    $Item = Get-Item $_
        (Get-Content $_ -ReadCount 2 -Encoding UTF8) | Foreach-Object {
        (-join $_)}} | Set-Content $Item -Encoding UTF8 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:38:04.403

```
Get-Content test.txt -ReadCount 2 | 
Foreach-Object { (-join $_) -replace '<TAB here!>',"`t" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:25:28.510

单程：

```
$g = @()
$a = gc .\yourTXTfile.txt

for ($i=0; $i -lt $a.count ; $i+=2)
{ $g += $a[$i]+$a[$i+1] }

$g | set-content .\yournewTXTfile.txt 
```

# windows-phone-7 - WP7 墓碑与 Protobuf-net

> ID：13032492
> 
> 赞同：1
> 
> 时间：2012-10-23T14:15:34.710
> 
> 标签：windows-phone-7, serialization, protobuf-net, tombstoning

我`protobuf-net`在 WP7 中使用来序列化我的数据。

我在启动应用程序时初始化了我的自定义类型，但我有一个大问题：

如果我在后台（墓碑）启动我的应用程序几分钟，当应用程序变为活动状态时，由于我尚未初始化类型，因此会引发异常。

有没有人可以解决这个问题？谢谢！

**解决方案：**

我解决了这样的问题：

```
 private void Application_Activated(object sender, ActivatedEventArgs e)
    {
        if (!e.IsApplicationInstancePreserved)
        {
          // add types

          // RuntimeTypeModel.Default.Add(......);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:50:32.690

我解决了这样的问题：

```
 private void Application_Activated(object sender, ActivatedEventArgs e)
    {
        if (!e.IsApplicationInstancePreserved)
        {
           // add types
           RuntimeTypeModel.Default.Add(...);
        }
    } 
```

# html - 使用 ul li 标签制作子菜单

> ID：13032494
> 
> 赞同：-1
> 
> 时间：2012-10-23T14:15:37.710
> 
> 标签：html, css

我正在尝试并获得这个，（类似于：子菜单和子子菜单）：

css

```
 ul li {
            width: 100px;
            border: 1px solid #090;
        }

        #here {
            float: left;
        }

        #sub_list {
            float: left
        } 
```

和 html

```
 <ul>
        <li>aaa</li>
        <li id="here">bbb</li>
        <ul id="sub_list">
            <li>bbb_1</li>
            <li>bbb_2</li>
            <li>bbb_3</li>
        </ul>
        <li>ccc</li>
     </ul> 
```

演示：http: [//jsfiddle.net/Muj3d/15/](http://jsfiddle.net/Muj3d/15/)

请告诉，如何获得该结果，在图像上看到什么

[http://www.imagehosting.cz/?v=sur.jpg](http://www.imagehosting.cz/?v=sur.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:24:05.143

`UL`who 之间的A`LI`是无效的 HTML。将您的子菜单移入`LI`，应用于`position:relative`LI 并使用`position:absolute`定位子菜单 (UL UL)。

# jquery - 响应式设计的jQuery切换问题

> ID：13032496
> 
> 赞同：1
> 
> 时间：2012-10-23T14:15:40.110
> 
> 标签：jquery, css, responsive-design

我有一个响应式设计，我将三列合并为一列（但在此列中仍然保持三个类别分开），并且我切换类别以显示和隐藏每个类别中的内容。

然而，我的问题是，一旦您重新调整浏览器窗口的大小以看到三列再次并排浮动，值 display:none; 还在那里。

```
/************************************************************************************
smaller than 990
*************************************************************************************/
@media screen and (max-width: 990px) {

    .sn{
    display: block;
    margin: 25px;
    }   

}

/************************************************************************************
smaller than 720
*************************************************************************************/
@media screen and (max-width: 720px) {
    .sn {
    display:none;
    }
} 
```

切换的 jQuery 代码：

```
// Start function when DOM has completely loaded
$(document).ready(function(){
    var $open = $();
    $('#wb .cat_responsive').on('click', function(e){
      e.preventDefault();
      $open.slideUp();
      $open = $(this).closest('.sn_cat').find('.sn');
      $open.not(':animated').slideToggle();
    });
    $('.cat_responsive').get().hideFocus = true;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:18:10.747

而不是显示：无，尝试使用：

```
visibility:hidden;
visibility:visible; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:16:36.757

问题是当使用 .toggle() 时，jQuery 将“display: block”直接添加到 HTML 标签，而不是 css 文件。

例子：

假设您的元素是：

```
<div id="mini-navLinks"> 
```

当您使用 jQuery .toggle() 时，它变为：

```
<div id="mini-navLinks" style="display: block"> 
```

或者

```
<div id="mini-navLinks" style="display: none"> 
```

我确定您已经看到了问题；这些属性被粘在你的元素上。因此，即使您的 CSS 中仍然设置了 'display: none' 属性，当浏览器调整大小时，它也会从元素标签中给出的样式中读取。

我自己也遇到了这个问题，我用几行 jQuery 写了一个快速的 hack 来解决这个问题：

```
 $(window).resize(function() {   
        if($(window).width() > 769)
        {
             $('#mini-navLinks').hide();
        }
    }); 
```

根据您要切换的元素，您必须将它们硬编码到 jQuery 中，并指定它们应该隐藏的屏幕宽度。一旦用户的浏览器宽度超过 769 像素，jQuery 将使用上面的代码 .hide() 我的 #mini-navLinks 元素。.hide() 方法即使已经隐藏也可以工作，因此不需要任何额外的检查。

我同意 Blazemonger 的观点，因为用户很少会调整浏览器的大小来摆弄设计，但我认为不留下任何松散的结局仍然很好。此外，这是一个快速解决方案，如果其他人有更好的解决方案，我很想听听更多。

# qt - 发布模式下的 QtQuick Project exe 问题

> ID：13032497
> 
> 赞同：1
> 
> 时间：2012-10-23T14:15:41.950
> 
> 标签：qt, release, qml, qt-quick

在过去的几天里，我一直在使用 VC++ 项目。每当项目在发布模式或调试模式下构建时，exe 都会自行运行而无需任何其他依赖项。我们只需要点击 exe，项目就会运行。

但这在 QML 项目中不起作用。我有项目的调试和发布桌面版本，但单击 exe 时它们没有运行。我们是否需要一些额外的组件来为 exe 制作某种包装器以使其运行。

我想提一下，我不是在询问 QtQuick 应用程序的部署。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:08:19.433

您应该添加一些 dll： QtCore4.dll QtCored4.dll QtGui4.dll QtGuid4.dll

# c - 为矩阵和用户输入动态分配内存

> ID：13032500
> 
> 赞同：2
> 
> 时间：2012-10-23T14:15:46.483
> 
> 标签：c, input, matrix

我正在尝试用 C 编写一个代码，它只是要求用户输入一个数字，该数字将用于创建一个矩阵 (D*D)；然后插入字符然后打印。

这就是我写的：

```
int d; //matrix size
int i,k; // used for the loops
char **mat; // pointer to a pointer to char

printf("\nenter matrix size\n"); // size of the X*X matrix
scanf("%d",&d);

mat=(char **)malloc(d*sizeof(char *));

for (i=0;i<d;i++)
    mat[i]=(char *)malloc(d*sizeof(char));

printf("enter %d strings with length %d\n",d,d);

for (i=0;i<d;i++)
    for (k=1;k<=d;k++)
    mat[i][k]=getchar();

for (i=0;i<d;i++)
        for (k=0;k<d;k++)
        printf("%c",mat[i][k]); 
```

--如果我输入 d=3 它会吓坏并进入一个无限循环 --如果我输入 5 例如它只给我 3 次输入 4 个字符而不是 4 个字符。

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:24:16.030

这超出了数组的末尾，并导致未定义的行为：

```
for (i=0;i<d;i++)
    for (k=1;k<=d;k++)       /* this terminating condition */
        mat[i][k]=getchar(); 
```

我不确定为什么`k`从 0 开始，因为它会跳过正在读取的数组中的第一个字符。改成：;

```
for (i=0;i<d;i++)
    for (k=0;k<d;k++)
        mat[i][k]=getchar(); 
```

请注意，强制转换的返回值`malloc()`是不必要的（请参阅[Do I cast the result of malloc?](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)）并且`sizeof(char)`保证为 1。始终检查输入操作的结果`scanf()`，以确保变量已实际分配：

```
if (1 == scanf("%d",&d))
{
    mat = malloc(d * sizeof(char*));
    if (mat)
    {
        /* ... */
    }
} 
```

`stdin`请注意，由于输入维度而输入的换行符将`stdin`在调用 后保留`scanf()`。这需要跳过，以防止干扰后续`getchar()`调用。跳到行尾：

```
int ch; /* Note that getchar() returns an int, not a char */
while ((ch = getchar()) != '\n' && ch != EOF); 
```

如果用户使用换行符终止正在输入的字符串，那么在读取字符串时您还需要跳过它：

```
for (i=0;i<d;i++)
{
    for (k=0;k<d;k++)
    {
        int ch = getchar();
        if (EOF == ch)
        {
            fprintf(stderr, "Failed to read stdin");
            break;
        }
        mat[i][k]= (char) ch;
    }
    while ((ch = getchar()) != '\n' && ch != EOF);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:37:52.380

我在 ubuntu 中使用 gcc 在我的环境中尝试过，当我使用 getchar 向用户询问矩阵字符值时，我面临的唯一问题是 End Line Characted，因为当用户输入字符时，它将按 Enter 键它的下一个值作为结果在标准输入中询问 \n 缓冲区，它将成为第二个输入字符。因此，当我输入 2 时，程序只要求矩阵输入 2 而不是 4。所以你可以这样做喜欢：

```
for (i = 0; i < d i++)
{
   for ( k = 0; k < d; k++)
   {
        getchar();
        mat[i][k] = getchar();
   } 
```

}

请参阅 k 的 for 循环。应该是这样的。在您的情况下，您正在使用不正确的 k <= d 访问不存在的内存

# android - 可以在 appcelerator 中为 ios 和 android 创建一个核心

> ID：13032501
> 
> 赞同：0
> 
> 时间：2012-10-23T14:15:47.860
> 
> 标签：android, ios, appcelerator, core

我需要创建一个大型企业应用程序，我想知道是否可以使用 Appcelerator 创建一个公共核心作为 iPhone 和 Android 的“框架”。这个想法是在本地启动项目，以最大化每个平台的视图，但应用程序的公共部分，并通过 Appcelerator 使其强大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:36:35.817

我认为这种策略行不通。据我所知，Appcelerator 它不会为每个平台生成代表您的 javascript 的代码。它会生成一个渲染引擎，然后即时解释您的 javascript。

所以我不认为你可以编写你的大部分应用程序是本机的，然后只是配合一些 Appcelerator 元素。您可以采用另一种方式.. 在 Appcelerator 中创建核心项目，而不是引入其他一些可能是您的本机视图的库.. 但 Appcelerator 将是您的核心，然后引入特定于每个平台的其他项目。

# android - Android：使用哈希图和字符串

> ID：13032502
> 
> 赞同：1
> 
> 时间：2012-10-23T14:15:52.517
> 
> 标签：android

刚开始涉足Android，并被告知不应将字符串硬编码为Java，而应将其放入字符串资源文件夹中。

我有现有代码，其中在哈希图中键和值都是字符串。我将如何将字符串放入 xml 并将它们完全从 java 部分中取出？

我应该像这样在字符串资源文件夹中创建一个字符串吗

```
<string name="hello">Hello.world</string> 
```

hello 是键，world 是值，然后使用 . 解析字符串。作为分隔符？

希望我已经正确解释了自己

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:30:00.210

您可以在 res 文件夹中定义许多其他资源类型。[您可以在此处](http://developer.android.com/guide/topics/resources/more-resources.html)和[此处](http://developer.android.com/guide/topics/resources/string-resource.html)查看可用的。出于您的目的，一种方法可能是在 res/values/arrays.xml 中定义一个数组：

```
<resources> 
    <string-array name="hashmap"> 
        <item>key1</item> 
        <item>value1</item> 
        <item>key2</item> 
        <item>value2</item> 
        <item>key3</item> 
        <item>value3</item> 
    </string-array> 
</resources> 
```

并在代码中：

```
Resources res = this.getResources();
String[] hashmapData = res.getStringArray(R.array.hashmap);
HashMap<String, String> map = new HashMap<String, String>(); 
for(int i=0; i<hashmapData.length; i=i+2) { 
    map.put(hashmapData[i], hashmapData[i+1]);         
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:21:14.677

这真的取决于你用它做什么。“仅在 XML 中包含字符串”的教条很棒，但它确实适用于您用于用户输出的字符串，因此如果您想翻译应用程序，可以轻松更改它们。如果您将键/值对用于内部工作，则无需这样做。

如果它确实涉及输出字符串，那么是的，这将是一个很好的方法。您还可以考虑将键和值拆分到两个 XML 节点上——这实际上取决于您对它们进行的操作。

但总的来说，是的，就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:22:44.340

正确的。您不应该将字符串硬编码到您的应用程序中。这样做的原因是您可以非常轻松地在您的应用程序中支持本地化（多种语言）。您的字符串应该全部输入`/res/values/strings.xml`，然后如果您想支持西班牙语，这些字符串（具有相同的`name=`值）将输入`/res/values-es/strings.xml`. 然后要在 xml 中访问这些字符串，您只需使用`@string/hello`和在 java 中使用`getString(R.string.hello)`. 您可以在以下链接中找到更多信息：

*   [字符串资源](http://developer.android.com/guide/topics/resources/string-resource.html)
*   [支持多种语言](http://developer.android.com/training/basics/supporting-devices/languages.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T14:30:55.867

你真的有三个选项，因为没有对键/值对的官方支持

1.  您已经使用了这种方法，但首先我建议使用字符串数组而不是字符串。这样，您可以将哈希图保存在一个地方。我建议使用随机 unicode 值而不是句号，因为这样可以降低拆分字符串时的风险。

2.  有 2 个字符串数组。第一个数组包含它们的键，第二个数组包含值。通常使用这种方法，但您必须担心耦合/确保任何编辑都反映在两个字符串数组上。

3.  这个建立在数字 2 上。你有一个键/值对的字符串数组，然后是一个包含数组的数组。[您使用gainTypedArray()](http://developer.android.com/reference/android/content/res/Resources.html#obtainTypedArray%28int%29)获取“hashmap” ，然后在 for 循环或其他内容中，使用 TypedArray.getTextArray() 返回单个 String 数组。这允许键和值的耦合。

    <string-array name="hello_world"> <item>Hello</item> <item>世界</item> </string-array>

    <array name="hashmap"> <item>@array/hello_world</item> </array

（请忽略可怕的格式，stackoverflow 似乎不太适合 xml）

# java - 在jsp的下拉列表中显示数组列表

> ID：13032507
> 
> 赞同：0
> 
> 时间：2012-10-23T14:16:14.960
> 
> 标签：java, jsp

我有填充了元素的数组，我想在下拉列表中显示该数组的元素。

这是相关的代码。

```
 Party[] Parties = party.getAllParties; 
```

在我的jsp页面中，我有

```
 <td nowrap>
    <select label="Party List" array="Parties" name="Party List">
        <option value=<%= (Parties) %>></option>
    </select>
</td> 
```

现在当我去查看jsp页面的查看源时，我有

```
<td nowrap>
  <select label="Party List" array="Parties" name="Party List">
     <option value=[Lcom.areil.pdo.party.Party;@1404de3></option>
  </select>
</td> 
```

我知道，设置选项值的方式不正确，并且不确定什么是正确的做法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:27:50.143

放置此代码：

```
<c:forEach var="party" items="${Parties}">
    <option value="${party}" />
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:45:23.293

您要做的是在您的中执行[JSTL forEach](http://www.crazysquirrel.com/computing/java/jsp/jstl-forEach.jspx)语句并使用[EL](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html)`JSP`输出您的值。尽量使用更少的 scriptlet 代码，EL 的设计目的是替代 scriplet。

包括这个：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %> 
```

进入你的 JSP 就可以使用`JSTL`. 所以你正确的 JSP 的代码应该是这样的：

```
<td>
    <select label="Party List" array="Parties" name="Party List">
        <c:forEach var="party" items="${Parties}">
            <option value="${party}">
                <c:out value="${party}"/>
            </option>
        </c:forEach>
    </select>
</td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:17:32.717

是的，这是因为您试图直接显示数组。

您拥有的声明等于`System.out.println(Parties);`

您需要遍历数组并按索引显示每个元素，例如`parties[i]`.

例子：

```
for(int i=0;i<Parties.length;i++) 
{ %> 
<tr><td><%=Parties[i]%></td></tr><% 
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-12-05T05:55:04.953

```
<select name="party"> 
    <option value="">SELECT</option> 
    <% for(int i=0;i<Parties.size();i++){ 
        String party= (String)Parties.get(i); %> 
        <option value="<%=party%>" > <%=party%> 
        </option>
    <%}%> 
</select> 
```

# time - 仅在一天中的特定时间进行 Cron 启动脚本

> ID：13032518
> 
> 赞同：10
> 
> 时间：2012-10-23T14:16:40.477
> 
> 标签：time, cron, boot, lirc

所以我有一组脚本，用于在启动、屏幕保护程序和远程控制等某些事件期间控制我的接收器和电视电源。其中之一是在登录期间执行的，但问题是我可能不希望它在机器计划启动时运行脚本。如果在启动应用程序执行期间空白 = 0，我有逻辑忽略事件，因此它不会在启动或关闭期间发送 ir。我怎样才能通过使用 cron 来做到这一点？我选择 cron 是因为这些事件发生在启动应用程序之前。Cron 很棒，但据我了解，我只能在启动时运行或按计划运行，不能同时运行。我需要编写时间变量的脚本，但我不确定如何。

syson.sh（在登录期间作为启动应用程序和屏幕状态更改调用）

```
#!/bin/sh
cd /home/gilson585/
blanked=`cat blanked`
if [ $blanked -eq 0 ] ; then
    blanked=1;echo $blanked > blanked
else
    irsend SEND_ONCE VR4085DF KEY_POWER;irsend SEND_ONCE Kenwood_RC-R0813 power;blanked=0;echo $blanked > blanked
    sleep 1
    irsend SEND_ONCE Kenwood_RC-R0813 cd/dvd
fi 
```

sysoff.sh（在关机期间作为 lirc init.d 脚本和屏幕状态更改的一部分调用）

```
#!/bin/sh
cd /home/gilson585/
blanked=`cat blanked`
if [ $blanked -eq 0 ] ; then
    irsend SEND_ONCE Kenwood_RC-R0813 power;irsend SEND_ONCE VR4085DF KEY_POWER;blanked=1;echo $blanked > blanked
fi 
```

xscreensaver.sh（屏幕保护看门狗，登录时调用）

```
#!/bin/bash
cd /home/gilson585/
xscreensaver-command -watch|
while read STATUS; do
  case "$STATUS" in
    BLANK*)
      /home/gilson585/sysoff.sh;blanked=1;echo $blanked > blanked
      ;;
    UNBLANK*)
      /home/gilson585/syson.sh;blanked=0;echo $blanked > blanked
      ;;
  esac
done 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-26T14:14:43.043

啊。至少，您现在可以使用两个脚本。时间设置是周/小时/分钟/秒/等的列表。您使用以下参数进行设置

```
42 * * * * /bin/execute/awesomescript.sh 
```

这将在每小时的第 42 分钟执行某些操作。这个页面有一个解释，我基本上会反刍： http: [//kvz.io/blog/2007/07/29/schedule-tasks-on-linux-using-crontab/](http://kvz.io/blog/2007/07/29/schedule-tasks-on-linux-using-crontab/)

还有像这样的脚本

```
42 9,12,15 * * * /bin/stuff/awesomestuff.sh 
```

哪个将在 9:42、12:42 和 15:42 执行 awesomestuff.sh

# python - 蟒蛇解析xml

> ID：13032519
> 
> 赞同：0
> 
> 时间：2012-10-23T14:16:43.207
> 
> 标签：python, xml, parsing, xml-parsing, elementtree

我有一个可以解析温度、露点、高度计等的基本脚本。但是，如何解析像天空条件这样的条件字符串？我想解析数据并打印：例如“天空条件：2000 英尺 AGL 很少”。

```
import xml.etree.ElementTree as ET
from urllib import urlopen

link = urlopen('http://weather.aero/dataserver_current/httpparam?dataSource=metars&       requestType=retrieve&format=xml&stationString=KSFO&hoursBeforeNow=1')

tree = ET.parse(link)
root = tree.getroot()

data = root.findall('data/METAR')
for metar in data:
    print metar.find('temp_c').text 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:28:24.860

您正在检索的页面具有如下结构：

```
<METAR>
  <!-- snip -->
  <sky_condition sky_cover="FEW" cloud_base_ft_agl="2000"/>
  <sky_condition sky_cover="BKN" cloud_base_ft_agl="18000"/>
</METAR> 
```

所以你要问的是如何提取 XML 属性。[xml.etree.ElementTree 文档](http://docs.python.org/library/xml.etree.elementtree.html#element-objects)指出这些存储在一个名为`attrib`. 所以你的代码看起来像这样：

```
data = root.findall('data/METAR')
for sky in data.findall('sky_condition'):
    print "Sky Condition: {0} at {1} ft AGL".format(
        sky.attrib['sky_cover'],
        sky.attrib['cloud_base_ft_agl']
      ) 
```

# php - 通过 ajax 将表单数据发布到 PHP 的最佳方式

> ID：13032520
> 
> 赞同：0
> 
> 时间：2012-10-23T14:16:43.793
> 
> 标签：php, jquery, ajax, json, forms

我只是想知道通过 ajax 将表单数据发布到 PHP 脚本的最佳方式是什么。我正在遵循这三种方法：

1.  将表单字段分别发布到 PHP（并且在 PHP 中像往常一样单独接收它们）

2.  将表单数据转换为 JSON 编码数据并在单个 POST 字段中将其发送到 PHP（并在 PHP 中将其作为具有 JSON 编码数据的单个 POST 变量接收）

3.  将表单数据转换为 JSON 编码数据，并以 PHP 在`$GLOBALS["HTTP_RAW_POST_DATA"]`.

我想问在安全性和性能方面最好的方法是什么。有没有其他更好的方法来完成这个过程？我再说一遍，我是通过 jQuery AJAX 发送的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T14:23:38.790

> 我只是想知道通过 ajax 将表单数据发布到 PHP 脚本的最佳方式是什么。

句号。jQuery 解决了这个特殊问题。使用[`serialize`](http://api.jquery.com/serialize/)or[`serializeArray`](http://api.jquery.com/serializeArray/)并继续处理更重要的事情。

* * *

> 我想问在安全性和性能方面最好的方法是什么。

你的方法都不是“最好的”方法。它们都比简单地使用 jQuery 已经给你的东西更糟糕，而且它们在安全性和性能方面都是*空的。*安全性和性能与您发布的代码*无关*，这些概念完全在您尝试做的事情之外，在完全独立的层上实现。

安全性在这里完全无关紧要。您要么使用 SSL 并且安全，要么您没有使用 SSL 并且*没有*安全性。没有中间立场，无论您使用什么方法发布数据，都与安全性完全无关。您的任何方法都不比其他任何方法或多或少“安全”。

就性能而言，涉及较少 HTTP 请求的版本更好。单独发布这些字段在性能方面会很*糟糕*，我想无论如何以这种方式处理数据是一场噩梦。以这种方式一次发回一个字段实际上没有任何优势。如果我误解了，而您说的是对每种方法都使用一个 HTTP POST，那么没有任何方法更好。

由于您已使用 jQuery 标记此内容，因此请使用 jQuery 方式：[`serialize`](http://api.jquery.com/serialize/)您的表单并回发序列化数据。您将在 中收到一个正常的发布数据数组`$_POST`。真的没有理由做任何其他事情，你只是增加了复杂性而没有任何收获。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T14:19:28.603

至于性能：最好尽量减少请求的数量。如果您可以在一个 POST 中发送所有数据，那么您应该这样做。但是，可能没有充分的理由将其全部作为单个字段值发送。为清楚起见，只需将它们作为单独的字段发送，然后在服务器端处理它们，就像您接收普通表单一样。

至于安全性：使用 POST 时，没有任何方法比其他方法更安全。尝试`https:`加强这里的东西。

# java - JParsec 在简单测试中摔倒

> ID：13032527
> 
> 赞同：0
> 
> 时间：2012-10-23T14:17:05.350
> 
> 标签：java, parsing, jparsec

我试图让最简单的解析器与 JParsec 2.0.1 一起工作，但我没有运气。我有以下 AST 课程：

```
public abstract class Node {
}

public final class ConstantNode extends Node {
    private final String value;

    public ConstantNode(String value) {
        this.value = value;
    }

    @Override
    public String toString() {
        return this.value;
    }
} 
```

以及以下测试代码：

```
import junit.framework.Assert;

import org.codehaus.jparsec.Parser;
import org.codehaus.jparsec.Parsers;
import org.codehaus.jparsec.Scanners;
import org.codehaus.jparsec.Terminals;
import org.codehaus.jparsec.Token;
import org.codehaus.jparsec.functors.Map;
import org.junit.Test;

import ast.ConstantNode;
import ast.Node;

public class ParserTest {
    private static final Parser<Token> CONSTANT_LEXER = Parsers
        .or(Terminals.StringLiteral.SINGLE_QUOTE_TOKENIZER,
            Terminals.StringLiteral.DOUBLE_QUOTE_TOKENIZER)
        .token();

    private static final Parser<Node> CONSTANT_PARSER = CONSTANT_LEXER.map(new Map<Token, Node>() {
        @Override
        public Node map(Token from) {
            return new ConstantNode(from.toString());
        }
    });

    private static final Parser<Void> IGNORED = Scanners.WHITESPACES;

    @Test
    public void testParser() {
        Object result = null;

        // this passes
        result = CONSTANT_LEXER.parse("'test'");
        Assert.assertEquals("test org.codehaus.jparsec.Token", result + " " + result.getClass().getName());

        // this fails with exception: org.codehaus.jparsec.error.ParserException: Cannot scan characters on tokens.
        result = CONSTANT_PARSER.from(CONSTANT_LEXER, IGNORED).parse("'test'");
        Assert.assertEquals("test ast.ConstantNode", result + " " + result.getClass().getName());
    }
} 
```

即使我的词法分析器成功地将字符串输入解析为令牌，由于 JParsec 异常，我的解析器也无法使用这些令牌。我一遍又一遍地研究了这段代码，只能假设这是一个 jparsec 错误，或者我误解了一些明显的东西。

谁能告诉我我在这里做错了什么？

**更新**：我相信最初的问题是由于递归引用。我`CONSTANT_PARSER`正在使用`CONSTANT_LEXER`，然后我打电话给`CONSTANT_PARSER.from(CONSTANT_LEXER...)`。通过将 my 更改`CONSTANT_PARSER`为以下内容，我的测试通过了：

```
private static final Parser<Node> CONSTANT_PARSER = Parsers.tokenType(Token.class, "constant").map(new Map<Token, Node>() {
    @Override
    public Node map(Token from) {
        return new ConstantNode(from.toString());
    }
}); 
```

但是，这对我来说还没有完全成功。我怀疑有更好的方法可以做到这一点，所以我仍然对任何想法都非常感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:04:42.807

您正在混合 2 种不同类型的“解析器”：又名字符串解析器。JParsec 中的扫描器和令牌解析器：

`CONSTANT_PARSER.from(CONSTANT_LEXER, IGNORED).parse("'test'");`

本质上说 CONSTANT_PARSER 应该将其输入作为来自 CONSTANT_LEXER 的*标记*流，并以 IGNORED 作为分隔符。问题是 CONSTANT_PARSER 是由“映射” CONSTANT_LEXER 定义的，这意味着它使用词法分析器解析其输入，而不是映射结果。这会引发以下错误：

`org.codehaus.jparsec.error.ParserException: Cannot scan characters on tokens.`

通过定义 CONSTANT_PARSER 正如`Parsers.tokenType(Token.class, "constant")`您所说的那样，解析器使用令牌流，将它们命名为`constant`。但是，我认为这并不像您期望的那样起作用，因为这将匹配任何类型的 Token，而不仅仅是常量。

这当然是 JParsec 中记录较少的部分之一，也没有很好的记录！

# php - 数据库抽象层检查表失败

> ID：13032533
> 
> 赞同：0
> 
> 时间：2012-10-23T14:17:34.343
> 
> 标签：php, mysql, heidisql

我在检查表查询方面遇到了相当大的问题，但只能通过 PDO。现在，我有一个内置损坏修复的 DBAL。它使用 MyISAM 表进行主存储，并在第一次在特定脚本上访问时自动检查表是否损坏。如果它已损坏，它会修复表，获取所有剩余的 ID，并将这些 ID 与备份表中的 ID 进行比较（用于本地部署的 SQLite，用于服务器端部署的 InnoDB）并将缺失的值推回。这使我们的开发人员能够永远不必担心数据损坏，因为 DBAL 会自动进行备份和修复/恢复。我遇到的障碍是部署。由于某些原因：

```
 CHECK TABLE pointofcare.zentry_visit_answer MEDIUM 
```

将“{msg_type=>status, msg_text=>ok}”作为数组返回，即使我在 heidisql 中运行完全相同的查询，它也会返回错误而不是正常。我正在努力解决这个问题。查询一起失败是有意义的，但是在 php 中返回一个值，在 heidisql 中返回另一个值是没有意义的。我要连接的数据库在我的本地机器上。任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:21:38.067

弄清楚了。有一个逻辑门确定 IP 地址（1ocal 或 WAN）。它指向 WAN 上不包含损坏的数据库。本地数据库是测试用例。哇哇

# android - 在操作栏上执行不同的操作

> ID：13032537
> 
> 赞同：0
> 
> 时间：2012-10-23T14:17:40.040
> 
> 标签：android, android-actionbar

我开发了一个 android 应用程序，我在操作栏中有两个菜单，我为每个菜单做了一个操作，但我只能访问其中一个，这是我的代码

```
@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    Toast.makeText(this, "Studentsite News", Toast.LENGTH_LONG).show();
    Intent i = new Intent(this, ssnews.class);
    startActivity(i);
    return true;
}
public boolean onOptionsItemSelected1(MenuItem item)
{
    Toast.makeText(this, "About", Toast.LENGTH_LONG).show();
    Intent i = new Intent(this, about.class);
    startActivity(i);
    return true;
} 
```

你有什么想法来解决它吗？我真的很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:30:28.837

通读此页面：http: [//developer.android.com/guide/topics/ui/menus.html#RespondingOptionsMenu](http://developer.android.com/guide/topics/ui/menus.html#RespondingOptionsMenu)。

本节演示了使用该`onOptionsItemSelected`方法的理想方式（实际上，与 任何事情有关`Menus`）。

该页面的摘录（与您的情况有关）：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
        case R.id.new_game:
            newGame();
            return true;
        case R.id.help:
            showHelp();
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:39:55.507

```
 @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {

      switch (item.getItemId()) {

        case 1:
    Toast.makeText(this, "Studentsite News", Toast.LENGTH_LONG).show();
    Intent i = new Intent(this, ssnews.class);
    startActivity(i);
    return true;               
        case 2:
      Toast.makeText(this, "About", Toast.LENGTH_LONG).show();
    Intent i = new Intent(this, about.class);
    startActivity(i);

     return true;
        default:
            return super.onOptionsItemSelected(item);

     }

  } 
```

# php - 如何仅显示类别第一篇文章的缩略图

> ID：13032538
> 
> 赞同：0
> 
> 时间：2012-10-23T14:17:47.480
> 
> 标签：php, wordpress, thumbnails, displaytag

我有这段代码来显示所有类别的帖子和它们的缩略图。

* * *

```
<?php $recent = new WP_Query(); ?>
<?php $recent->query('cat=1&showposts=5'); ?>
<?php while($recent->have_posts()) : $recent->the_post(); ?>
<ul>
    <li>
            <a href="<?php the_permalink(); ?>">
            <?php the_title(); ?>
            </a>
       </li>
</ul>
<?php endwhile; ?> 
```

* * *

但现在我只想显示类别第一篇文章的缩略图。显然，前类别有 4 个帖子，我显示 4 个帖子，但只有第一个帖子有缩略图，3 个帖子只有标题和永久链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:22:13.797

快速修复可能是添加一个计数变量..

```
<?php i = 1; ?>
<?php while($recent->have_posts()) : $recent->the_post(); ?>

<ul>
    <li>
<?php if(i==1){ 
  // code to display thumbnail
 } ?>

            <a href="<?php the_permalink(); ?>">
            <?php the_title(); ?>
            </a>
       </li>
</ul>
<?php i++; ?>
<?php endwhile; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:26:25.447

将 the_post_thumbnail 添加到您的输出中，并包含一个 $postNumber 以跟踪您所在的帖子编号。然后，使用 if 语句，您可以包含 the_post_thumbnail 调用。如果您想将它包含在前 2 个中，请将 if 更改为 $postNumber <= 2

```
<?php $recent = new WP_Query(); 
<?php $recent->query('cat=1&showposts=5'); ?>
<?php $postNumber = 1; ?>
<?php while($recent->have_posts()) : $recent->the_post(); ?>
<ul>
    <li>
            <a href="<?php the_permalink(); ?>">
            <?php 
                if($postNumber<=1){
                    the_post_thumbnail();
                }
                $postNumber++;
             ?> 
            <?php the_title(); ?>
            </a>
       </li>
</ul>
<?php endwhile; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:25:38.720

```
<?php $recent = new WP_Query(); ?>
<?php $recent->query( 'cat=1&showposts=5' ); ?>
<?php $is_first_post = true; ?>

<?php while( $recent->have_posts() ) : $recent->the_post(); ?>
    <ul>
        <li>
                <a href="<?php the_permalink(); ?>">
                <?php the_title(); ?>
                </a>

                <?php 
                if ( $is_first_post  && has_post_thumbnail() ) {
                    the_post_thumbnail(); 
                    $is_first_post = false; 
                }
                ?>

           </li>
    </ul>
<?php endwhile; ?> 
```

# android - 适用于 iOS 和 Android 的 Unity3D：多人游戏（蓝牙连接）

> ID：13032540
> 
> 赞同：12
> 
> 时间：2012-10-23T14:17:51.543
> 
> 标签：android, ios, bluetooth, unity3d, p2p

我正在寻找一种在 Unity iOS 和 Android Basic 中使用蓝牙连接两台设备以进行多人游戏的方法。我发现：

*   [高通公司的AllJoyn](https://www.alljoyn.org/app-developers/unity-extension) - 蓝牙显然仅适用于[Root](https://www.alljoyn.org/forums/developers/next-step-bluetooth-android) -Android 设备，目前不适用于 iOS。

*   prime31 的[iOS GameKit 本地多人游戏- 仅适用于 iOS。](http://u3d.as/content/prime31/i-os-game-kit-local-multiplayer/2CX)

*   Gregzo 的[Bonjour 插件- 不是蓝牙，而是其他仅适用于 iOS 的本地多人游戏解决方案。](http://u3d.as/content/gregzo/bonjour-plugin-for-unity-i-os-zero-conf-made-easy/3oP)

*   [TNet](http://www.tasharen.com/?page_id=4518)：不是蓝牙，仅适用于 Android 和 iOS Pro

有没有其他解决方案（尤其是安卓）？

如果有任何帮助，我将不胜感激。也适用于其他 p2p-Unity-Solutions。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-30T20:43:22.407

对于[Ships N' Battles](http://skahal.com/ships-n-battles)（Unity 创作的跨平台多人游戏），我们构建了几种执行多人游戏的方法：

**通过蓝牙（使用 Prime31 插件）**

*   iOS

*我从未见过使用蓝牙在 iOS 和 Android 之间进行多人游戏的游戏。*

**通过 LAN（使用[Unity RPC](http://docs.unity3d.com/Documentation/Components/net-RPCDetails.html)）**

*   iOS
*   安卓
*   苹果电脑
*   网络（Kongregate）

*玩家可以使用以上任何设备在局域网中开始战斗：iOS vs iOS，iOS vs Android，Android vs Mac，等等。*

**通过游戏中心（使用 Prime31 插件）**

*   iOS

*使用 Game Center 多人游戏来匹配战斗。*

**通过 Global Server（内部解决方案）**

*   iOS
*   安卓
*   苹果电脑
*   网络（Kongregate）

*玩家可以使用以上任何设备在世界各地开始战斗：iOS vs iOS、iOS vs Android、Android vs Mac 等等。*

对于这个解决方案，我们构建了一个在线服务器，但您可以使用像[Photon](http://www.exitgames.com/Photon/Unity)这样的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-03T15:37:38.537

对于Android，你可以使用我最近发布的插件：[Android Bluetooth Multiplayer](http://forum.unity3d.com/threads/188667-Android-Bluetooth-Multiplayer-Released)

对于 iOS，我也制作了一个插件：[Local Multiplayer for iOS/tvOS/macOS](http://forum.unity3d.com/threads/188667-Android-Bluetooth-Multiplayer-Released)

两者都设计为与 Unity 内置多人游戏兼容，因此您可以使用任何现有的关于 Unity 内置网络的教程或重复使用现有的网络代码，只需进行最少的更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-13T09:03:29.383

Unity 宣布[**UNET**](http://blogs.unity3d.com/2014/05/12/announcing-unet-new-unity-multiplayer-technology/)（基于 UDP 的多人游戏）

[http://forum.unity3d.com/threads/unet-sample-projects.331978/](http://forum.unity3d.com/threads/unet-sample-projects.331978/)

# c# - wcf项目中共享公共类

> ID：13032542
> 
> 赞同：0
> 
> 时间：2012-10-23T14:18:02.910
> 
> 标签：c#, wcf, service-reference, code-sharing

```
class MyCommonClass
{
//properties
} 
```

这个类应该可以在

1.  服务项目
2.  wcf-客户端项目
3.  他们作为参考的另一个。在这个公共项目中，我无法生成服务引用。

我想，我不能生成`MyCommonClass`但`ServiceReferences`如何将类标记为不可序列化？在属性中有`IgnoreDataMemberAttribute`. 我也尝试重用位于 common 项目中的 MyCommonClass 类型，但它仍然生成

**更新**

换句话说：如果在 ServiceOperation 中使用了某种类型，它会自动生成到 wsdl 文档中。如何禁用它？（我不希望它在 wcf 客户端）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:57:15.403

尚不清楚公共类是否需要成为 WCF 服务合同的一部分，以便可以通过 WSDL 文档提供给任何客户端，或者您是否正在尝试使 WCF 服务和 WCF 客户端都可以访问公共类作为标准.NET 类。

在服务和客户端之间共享标准 .NET 类的唯一原因是提供对共享逻辑的访问。`DataContract`否则，只需使用或标记该类，`Serializable`让服务通过 WSDL 将类公开给客户端。请记住，[SOA 的四个原则之一](https://en.wikipedia.org/wiki/Service-orientation)是共享类型 (WSDL) 而不是类（.NET 程序集）。

根据更新的问题，您可以通过强制 WCF 使用`XmlSerializer`而不是默认值来更好地控制 WCF 序列化为肥皂 XML 的内容`DataContractSerializer`。此外，您可能希望将域模型对象与 WCF 服务公开的对象分离，如[本 SO question and answers](https://stackoverflow.com/questions/5270895/problems-with-the-datacontractserialiser-and-serializable)中所述。这篇[优秀的博客文章](http://www.danrigsby.com/blog/index.php/2008/03/07/xmlserializer-vs-datacontractserializer-serialization-in-wcf/)解释了两个序列化程序之间的差异以及如何强制 WCF 使用`XmlSerializer`.

# java - 如何从java中相互依赖的字符串中删除部分字符串数据

> ID：13032547
> 
> 赞同：0
> 
> 时间：2012-10-23T14:18:09.280
> 
> 标签：java, javascript, string

我在javascript中有两个字符串数组，比如

```
var names = [name1, name2, name3, name4];
var values = [value1, value2, value3, value4]; 
```

我需要将这些值发送到后端。我发送如下

```
var nameString = "name1,name2,name3,name4";
var valuesString = "value1,value2,value3,value4"; 
```

然后我将在java中的地图上迭代它。我的问题是，如果我想从名称字符串中删除名称，那么 valueString 中的相应值也应该删除。如何以优化的方式在 java 端执行此操作。

```
Ex: If i want to remove name3, then new strings should be like following:
  In Java side:   
     String nameString = "name1,name2,name4";
     String valueString = "value1,value2,value4"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:26:20.653

在 JavaScript 中：

```
var data = {name1:value1, name2:value1, name3:value1, name4:value1}; 
```

（如果需要引用），将对象作为 JSON 发送，并在 java 中解析它。 [http://www.json.org/java/](http://www.json.org/java/)

我不是 Java 开发人员，因此无法用特定代码为您提供太多帮助，但该方法对所有语言都相同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:51:05.413

在java中你可以做类似的事情：

```
public static void main(String[] args) {
    String nameString = "name1,name2,name3,name4";
    String valueString = "value1,value2,value3,value4";

    nameString = removeSection(nameString, 2);
    valueString = removeSection(valueString, 2);

    System.out.println(nameString);
    System.out.println(valueString);

}

private static String removeSection(String val, int del){
    String[] a = val.split(",");
    String[] b = new String[a.length-1];

    System.arraycopy(a,0,b,0,del);
    System.arraycopy(a,del+1,b,del,a.length-1-del);

    val = arrayToString(b);

    return val;
}

private static String arrayToString(String[] a){
    String newStr = "";
    for (int i=0; i<a.length; i++) {
        if(i==0){
            newStr += a[i];
        }else{
            newStr += ","+a[i];
        }
    }
    return newStr;
} 
```

# android - android 应用显示在 Google Play for mobile 中，但不显示在平板电脑上

> ID：13032548
> 
> 赞同：3
> 
> 时间：2012-10-23T14:18:17.350
> 
> 标签：android, tablet, google-play

我在 Google Play 中有一个应用程序（使用 PhoneGap），它出现在手机搜索中，但没有出现在平板电脑搜索中。任何想法为什么？

据我所知，Android Manifest 文件并未将其限制在任何屏幕上。这是清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="angelforms.kvsites.ie"
    android:versionCode="9"
    android:versionName="9" >

    <uses-sdk android:minSdkVersion="10" />
<supports-screens 
    android:largeScreens="true" 
    android:normalScreens="true" 
    android:smallScreens="true" 
    android:resizeable="true" 
    android:anyDensity="true" />

<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".AngelFormsActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:37:54.763

问题在于多个权限，例如[RECEIVE_SMS](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions)。您可以添加`required="false"`到`uses-feature`标签以使其工作。

另外，请添加[`android:xlargeScreens="true"`](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)到`supports-screens`标签以支持平板电脑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T07:26:42.320

在为平板电脑和手机制作应用程序时要考虑很多事情，这里是应用程序的配置设置。

跳这会帮助你。谢谢。

[http://hasmukhbhadani.blogspot.in/2013/01/how-to-create-application-for-both.html](http://hasmukhbhadani.blogspot.in/2013/01/how-to-create-application-for-both.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T18:14:24.447

我也有这个问题。Google 使用一整套东西来确定您的应用是否支持平板电脑。

[http://developer.android.com/distribute/googleplay/quality/tablet.html](http://developer.android.com/distribute/googleplay/quality/tablet.html)

这些对于添加到清单很重要：

# sql - 即使一行具有不同的值，也忽略所有结果

> ID：13032551
> 
> 赞同：1
> 
> 时间：2012-10-23T14:18:26.623
> 
> 标签：sql, database, rdbms

我有一个示例数据库：

```
Var1    Var2    Status
=========================
A1      SG1     Completed
A2      SG2     Completed
A2      SG1     Progress 
```

状态可以是多达 10 种不同的状态。

我只想在所有行的状态为“已完成”时提取所有记录。这意味着在这种情况下不会拉出任何行。只有当 all rows = 'Completed' 时，它才会拉取整个数据库。

我怎样才能在最短的时间内实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T14:21:10.140

```
select Var1, Var2, Status
from MyTable
where not exists (select 1 from MyTable where Status != 'Completed') 
```

[有关演示，请参见 SQLFiddle](http://sqlfiddle.com/#!2/9f90b/1)

# java - 已删除软锁定缓存条目。失衡锁定/解锁序列？

> ID：13032552
> 
> 赞同：9
> 
> 时间：2012-10-23T14:18:31.657
> 
> 标签：java, spring, hibernate, ehcache

我正在使用 java 1.6、spring 2.5、hibernate 3.3.1 和 ehcache 2.6.0。程序连接到两个数据库。有两种 ehcache 配置，但在这种情况下只使用一种。在批处理结束时，程序返回此错误：

```
 2012-10-23 15:44:43,406 ERROR (AbstractReadWriteEhcacheAccessStrategy.java:159) - Cache dao.data.MyObject Key dao.data.MyObject#28 Lockable : null
A soft-locked cache entry was removed already. Out of balance lock/unlock sequences ? 
```

什么会产生这个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T14:41:48.427

我现在被这个打击了，所以我会分享我的发现。

首先，一些背景：

*   我们使用 Hibernate 3.5.2 & EhCache 2.7.0
*   只有一个数据库（另一个以只读方式访问，但没有使用缓存，因为它是在外部更新的）和单个缓存实例（无集群）
*   问题发生在更新与 InheritanceType.JOINED 和 CacheConcurrencyStrategy.READ_WRITE 映射的实体时（但不是当我们切换到 NONSTRICT_READ_WRITE 时）。另外，从代码检查来看，删除时也会发生这种情况。

我通过调试 Hibernate 和 EhCache 代码发现了什么：

1.  Hibernate 的 EntityUpdateAction（在 execute() 中）调用 EntityRegionAccessStrategy.lockItem()
2.  EhCache 的实现（在 AbstractReadWriteEhcacheAccessStrategy 中）将给定键的映射从缓存实体更改为锁
3.  Hibernate 检测到实体映射到超过 1 个表，因此需要缓存失效（参见 AbstractEntityPersister.isCacheInvalidationRequired()）
4.  它继续调用 persister.getCacheAccessStrategy().remove()，在 EhCache 的实现中，它删除给定缓存键的映射。然而，虽然 Hibernate 预计这实际上会删除缓存的实体，但使用 EhCache 它会删除锁（在步骤 2 中放置了锁）。
5.  事务完成后，在 EntityUpdateAction.doAfterTransactionCompletion() 中，Hibernate 检测到需要缓存失效，并继续调用 unlockItem()，如果没有给定缓存键的映射，则会失败，从而导致您描述的错误消息

在我看来，这是 lockItem() 和 unlockItem() 的 EhCache 实现中的一个问题（在 READ_WRITE 情况下）。它不应该用锁代替实际物品，而是单独存储锁。至少，可以说 Hibernate 和 EhCache 在这种情况下不是 100% 兼容的。

最后几点说明：

*   这个错误似乎是无害的，可以通过 log4j 配置安全地抑制。
*   我设法在不同的场景中重复了这一点（归结为相同的锁定/删除/解锁序列）。这一次，不是加入继承，而是原生 SQL 触发了删除。其他一切都差不多。
*   Hibernate 和 EhCache 代码的相关位：EntityRegionAccessStrategy、EntityAction、CollectionRegionAccessStrategy、CollectionAction 和相关的实现/扩展具体类。

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-31T04:15:01.320

我在使用 createSQLQuery(Native SQL Query) 时遇到了同样的问题。由于本[机 sql 查询对 hibernate 的二级缓存的影响](http://www.link-intersystems.com/blog/2011/10/08/impact-of-native-sql-queries-on-hibernates-second-level-cache/)，我解决了我的问题。

来自链接：主要原因是原生查询会使二级缓存失效。链接底部还有解决方案，防止hibernate在使用原生sql查询时使二级缓存失效。

# gpu - CPU->GPU 传输 vs GPU->CPU 传输

> ID：13032554
> 
> 赞同：2
> 
> 时间：2012-10-23T14:18:42.673
> 
> 标签：gpu, cpu, transfer

我一直在做一些关于测量从 CPU->GPU 和 GPU->CPU 的数据传输延迟的实验。我发现对于特定消息大小，CPU->GPU 数据传输率几乎是 GPU->CPU 传输率的两倍。谁能解释我为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T06:06:47.160

由于不知道您的实验的详细信息，例如使用了什么 CPU/GPU，如何测量传输速率，我只是猜测，从 CPU-> GPU 传输的数据通常是通过 DMA 传输的。每次它可以将一个块字节从系统内存传输到图形内存。但是数据从GPU->CPU传输，通常CPU是读取PCI总线映射的图形孔径内存。CPU只能以不可缓存的、严格的顺序逐字节读取孔径内存，因此速度较慢。

# ruby-on-rails - RSpec API 服务传递数组

> ID：13032555
> 
> 赞同：0
> 
> 时间：2012-10-23T14:18:56.573
> 
> 标签：ruby-on-rails, json, rspec

我做了几个测试来检查我的 API 服务。在一项测试中，我将两个参数传递给 api/v1/pages/1 并且工作正常；这是代码

> > put "api/v1/pages/#{@page.id}", { "title" => "new title", "description" => "new description"} last_response.status.should eql(200)

现在我在将对象数组传递给服务时遇到问题。我正在尝试一些东西，但没有成功。

```
 @index = build(:index) //factory girl
 @contact = build(:contact)
 put "api/v1/pages/1/menu" ,[ //need to pass @index and @contact, and/or @index.name, @contact.name] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:35:04.827

尝试

```
@index = build(:index) //factory girl
@contact = build(:contact)
put "api/v1/pages/1/menu", :index => @index, :contact => @contact 
```

Rails 应该在两侧编组您的对象。

# java - 如何使用 pom.xml 中定义的依赖项运行 buildr（buildr + eclipse + maven：集成）

> ID：13032560
> 
> 赞同：2
> 
> 时间：2012-10-23T14:19:21.513
> 
> 标签：java, eclipse, maven-2, buildr

我们使用 buildr 作为我们项目的构建工具。然而，现在是时候在我们拥有的几个项目中依赖很大并且构建新的 eclipse 环境成为一项艰巨的任务了。

我想做的第一件事是从构建文件生成一种 Eclipse 项目（.classpath 和 .project），但主要问题是它不支持动态 Web 项目之类的东西。相反，builder 只生成简单的项目结构。

因此，作为下一个选项，我想（因为我们不想更改实际的构建过程）是在 maven 的 pom.xml 文件中定义依赖项，这将定义要导入到 eclipse 的实际项目结构。虽然 BUILDR 将继续按原样工作，但它不会读取依赖项工件的格式，而是从 pom.xml 或其他一些 dependencies.xml 文件中读取它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:42:02.060

这是不受支持的，尽管您始终可以使用 Ruby 读取 pom 文件并从中内联提取依赖项。

我个人在 git 中提交了我们的 .project 和 .classpath 文件。我什至提交了我们的 .settings 文件来处理 eols，并为每个人都设置了一组格式化程序。

# objective-c - iOS 6 通讯录为空 kABPersonPhoneProperty

> ID：13032565
> 
> 赞同：6
> 
> 时间：2012-10-23T14:19:34.483
> 
> 标签：objective-c, ios, ios6, abaddressbook

在我的代码中，我使用 ABPeoplePickerNavigationController 来选择人员。用户从联系人列表中选择人员后，我查看指定人员记录是否有任何电话号码：

```
- (BOOL) peoplePickerNavigationController:(ABPeoplePickerNavigationController*)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {
      ABMutableMultiValueRef phones;
      phones = ABRecordCopyValue(person, kABPersonPhoneProperty);
      if (phones == nil || ABMultiValueGetCount(phones) == 0)
      {
          return NO;
      }
      // other code....
} 
```

我创建了联系人，向其中添加了电话号码并测试了我的代码。在 iOS 5 中，此代码运行良好。 *电话*变量包含一个电话号码。

但在 iOS 6 中，将联系人链接到 facebook 帐户后，*phones*变量不包含任何值。

取消与 facebook 帐户的联系后，一切正常。

我怎样才能用这种方法读取人的电话号码？

```
- (BOOL) peoplePickerNavigationController:(ABPeoplePickerNavigationController*)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person 
```

**UPD**

如果我在上面的函数中返回 YES，那么在函数中

```
 (BOOL) peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier 
```

我可以以正常方式读取所有人的电话号码。那么为什么我不能在第一个函数中读取它们呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T08:54:43.717

我找到了我的问题的答案。如果联系人已链接，则在方法中

```
- (BOOL) peoplePickerNavigationController:(ABPeoplePickerNavigationController*)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person 
```

您收到对人员的引用，该引用表示链接的联系人。要检索所有电话号码，您需要获取所有链接的联系人，然后在该联系人中查找电话号码。我使用以下代码执行此操作：

```
- (BOOL) peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person
{

ABMutableMultiValueRef phones;
phones = ABRecordCopyValue(person, kABPersonPhoneProperty);
if (phones == nil || ABMultiValueGetCount(phones) == 0)
{
    CFArrayRef linkedContacts = ABPersonCopyArrayOfAllLinkedPeople(person);
    phones = ABMultiValueCreateMutable(kABPersonPhoneProperty);
    ABMultiValueRef linkedPhones;
    for (int i = 0; i < CFArrayGetCount(linkedContacts); i++)
    {
        ABRecordRef linkedContact = CFArrayGetValueAtIndex(linkedContacts, i);
        linkedPhones = ABRecordCopyValue(linkedContact, kABPersonPhoneProperty);
        if (linkedPhones != nil && ABMultiValueGetCount(linkedPhones) > 0)
        {
            for (int j = 0; j < ABMultiValueGetCount(linkedPhones); j++)
            {
                ABMultiValueAddValueAndLabel(phones, ABMultiValueCopyValueAtIndex(linkedPhones, j), NULL, NULL);
            }
        }
        CFRelease(linkedPhones);
    }
    CFRelease(linkedContacts);

    if (ABMultiValueGetCount(phones) == 0)
    {
        CFRelease(phones);
        return NO;
    }   
}
// other code ...

} 
```

使用该代码，我收到了链接联系人的所有电话号码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:30:56.890

在 re:linked contacts 解决方案中，您需要将存储找到的电话号码的线路更改为

```
ABMultiValueAddValueAndLabel(phones, ABMultiValueCopyValueAtIndex(linkedPhones, j),
    ABMultiValueCopyLabelAtIndex(linkedPhones, j), NULL); 
```

这样您以后就可以使用“电话”按标签进行检查。给出的解决方案只存储数字，因此您将无法针对 kABPersonPhoneMainLabel 等常量进行测试

这种方法也用于电子邮件和地址。对于地址，您可以像这样拉出部分：-

```
CFDictionaryRef dict = ABMultiValueCopyValueAtIndex(address, 0);
street.text = CFBridgingRelease(CFDictionaryGetValue(dict, kABPersonAddressStreetKey)); 
```

# c# - 调用 Sharepoint 2010 search.asmx 时出现 500 内部服务器错误

> ID：13032566
> 
> 赞同：1
> 
> 时间：2012-10-23T14:19:35.817
> 
> 标签：c#, web-services, sharepoint-2010

我正在尝试从 .NET 4.5 中的客户端应用程序调用 Sharepoint 2010 搜索 Web 服务，我毫无问题地添加了服务引用，我修改了 web.config 以允许正确的身份验证（NTLM）但是当我调用 Query 方法时，我得到了500 服务器错误消息：

服务器无法处理请求。---> HRESULT 异常：0x80131904 --->; HRESULT 异常：0x80131904

我已经尝试了几件事，而我的发现真的让我很困惑：

使用 Fiddler 分析请求时，这里是失败的请求（只是正文部分）：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
     xmlns:xsd="http://www.w3.org/2001/XMLSchema">
         <Query xmlns="urn:Microsoft.Search">
               <queryXml>&lt;QueryPacket xmlns='urn:Microsoft.Search.Query'&gt;&lt;Query&gt;&lt;SupportedFormats&gt;&lt;Format&gt;urn:Microsoft.Search.Response.Document.Document&lt;/Format&gt;&lt;/SupportedFormats&gt;&lt;Context&gt;&lt;QueryText language='en-US' type='STRING'&gt;ACCORDION&lt;/QueryText&gt;&lt;/Context&gt;&lt;/Query&gt;&lt;/QueryPacket&gt;
                </queryXml>
          </Query>
     </s:Body>
</s:Envelope> 
```

在查看 Web 服务描述时（通过将浏览器指向 _vti_bin/search.asmx?op=Query），我意识到现在出现的命名空间`<s:Body`应该在`<s:Envelope`. 然后我在 Fiddler 中编辑了请求并重新发送，现在服务器正确响应。这是编辑后的请求：

```
<s:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
     xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
      <s:Body >
          <Query xmlns="urn:Microsoft.Search"><queryXml>&lt;QueryPacket xmlns='urn:Microsoft.Search.Query'&gt;&lt;Query&gt;&lt;SupportedFormats&gt;&lt;Format&gt;urn:Microsoft.Search.Response.Document.Document&lt;/Format&gt;&lt;/SupportedFormats&gt;&lt;Context&gt;&lt;QueryText language='en-US' type='STRING'&gt;ACCORDION&lt;/QueryText&gt;&lt;/Context&gt;&lt;/Query&gt;&lt;/QueryPacket&gt;
        </queryXml>
         </Query>
       </s:Body>
 </s:Envelope> 
```

这不是很奇怪吗？我错过了什么吗？有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-19T12:10:19.813

用 CDATA 包围 QueryPacket 中的文本，您应该有正确的行为，而不必先对其进行编码。

```
<![CDATA[your query]]> 
```

# objective-c - 带有 UINavigationController 和 UITabBarController 的应用程序

> ID：13032569
> 
> 赞同：1
> 
> 时间：2012-10-23T14:19:45.340
> 
> 标签：objective-c, uinavigationcontroller, uitabbarcontroller

我一直在努力解决这个问题。我让它工作了，但不是它应该的方式，我猜是因为我做错了。我的目标是具有以下布局。

我有一个带有四个按钮的主菜单。单击每个会显示不同的 TableView（我应该在 navController 的右上角有一个后退按钮，以便能够返回主菜单，但我没有）。这些 TableView 中的每一个都在 UITabBarController 内（看起来像这样[http://i.stack.imgur.com/GkFwo.jpg](http://i.stack.imgur.com/GkFwo.jpg)）

那么我该怎么做呢？

这是我当前的代码（在某些时候肯定是错误的）

```
- (IBAction)MyButton:(id)sender
{
self.tabBarController = [[UITabBarController alloc] init];
UIViewController *viewController1, *viewController2, *viewController3, *viewController4;
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    viewController1 = [[[LexikonControllerViewController alloc] initWithNibName:@"LexikonControllerViewController" bundle:nil] setArrays:PflanzenIDs List:ListOfPlants Index:IndexOfPlants dict:DictionaryOfPflantsAndIDs];
}

UINavigationController *navController1 = [[UINavigationController alloc] initWithRootViewController:viewController1];

NSArray* controllers = [NSArray arrayWithObjects:navController1, nil];

self.tabBarController.viewControllers = controllers;

CGRect frame = self.tabBarController.view.frame;
frame.size.height = frame.size.height - 20;
self.tabBarController.view.frame = frame;

[self.view addSubview:self.tabBarController.view];
} 
```

编辑：

现在我尝试了这个： - (void)applicationDidFinishLaunching:(UIApplication *)application {
window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

```
vc = [[MyViewController alloc] init];
[vc setTitle:@"Home"];
[vc setParent:self];

navController = [[UINavigationController alloc] initWithRootViewController:vc];

UITabBarController *tb = [[UITabBarController alloc] init];
NSArray *controllers = [[NSArray alloc] initWithArray:[NSArray arrayWithObjects:navController, nil]];
tb.viewControllers = controllers;

[window addSubview:[tb view]];
[window makeKeyAndVisible];
} 
```

问题：在主视图（使用主菜单）上，我可以看到标签栏（不应该在那里）并且使用 hidesBottomBarWhenPushed 在所有其他视图上完全隐藏标签栏:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:27:49.517

标签栏控制器应该是您的根视图控制器。您也可以将其连接到情节提要中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T09:52:53.330

做好了。我所做的是将我的主菜单设置为导航控制器的根视图，如果我单击其中一个按钮，我会加载一个新的 UIViewController，它负责设置 TabBarController 并在每个选项卡中加载我的四个不同的表格视图。所有这一切都没有故事板和 XIB。

# ruby-on-rails - 使 facebook 成为设计画布应用程序的唯一/默认登录名

> ID：13032571
> 
> 赞同：1
> 
> 时间：2012-10-23T14:19:50.727
> 
> 标签：ruby-on-rails, devise, omniauth, facebook-canvas

我正在制作一个托管在 heroku 上的 Facebook 画布应用程序。对于身份验证，我将 devise gem 与 omniauth-facebook gem 一起使用。

目前，当应用程序打开时，它会要求您使用您的电子邮件和密码“登录”，或单击“使用 Facebook 登录”按钮。

我希望跳过此页面，当用户加载应用程序时，它应该自动对它们进行身份验证。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:28:03.097

如果您的 facebook 应用程序正在请求用户权限，并且他们已经授权，那么传递给您的 rails 应用程序的 signed_request 参数应该包含您需要的详细信息。所以你可以做的是解码参数，并从哈希本身中获取 facebook 用户 ID。

尝试这样的事情：

```
class ApplicationController

  before_filter :inspect_signed_request

protected
  def base64_url_decode(input)
    input += ('=' * (4 - input.length % 4) % 4)
    Base64.decode64(input.tr('-_', '+/'))
  end    
  def inspect_signed_request
    encoded_sig, payload = params[:signed_request].split('.', 2)

    # decode the data
    sig = base64_url_decode(encoded_sig)
    data = JSON.parse(self.class.base64_url_decode(payload))
    raise data.inspect
  end
end 
```

这基本上会引发异常，向您显示签名请求的详细信息。本质上，您可以将其解析出来，然后检查签名的请求 FB ID 值。如果它不存在，您可以添加一些代码将它们重定向到登录表单。

# asp.net - 从原始 POST 数据测试 MVC 控制器操作

> ID：13032575
> 
> 赞同：1
> 
> 时间：2012-10-23T14:19:59.080
> 
> 标签：asp.net, .net, asp.net-mvc, unit-testing

我有一个想要与我的网站集成的第三方供应商。我有一个他们将发送给我的 POST 数据样本，我希望能够编写一个单元测试来验证我可以从我的控制器操作中处理它。

理想情况下，我可以有一个从文件加载原始 POST 数据的单元测试，我可以使用它作为输入来调用操作。

最好的方法是什么？或者也许是一个测试框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:24:14.780

您可以只使用测试框架，例如`NUnit`，然后执行以下操作：

```
 [Test]
    public void CanProcessThirdPartyData(string data)
    {
                var success = controller.ProcessData(data):
                if (success) {
                    Assert.Pass();
                }
    } 
```

# json - CURL GET 请求和 Spring Mvc 请求映射的问题

> ID：13032578
> 
> 赞同：0
> 
> 时间：2012-10-23T14:20:10.730
> 
> 标签：json, spring-mvc, curl, spring-roo

我正在尝试使用 CURL 获取以下方法：

```
@RooWebJson(jsonObject = Geolocation.class)
@Controller
@RequestMapping("/geolocations")
public class GeolocationController {

    @Autowired
    private GeolocationRepository geolocationRepository;

    @RequestMapping(params = "findByPostcodeFirstChars", method = RequestMethod.GET, headers = "Accept=application/json")
    @ResponseBody
    public ResponseEntity<String> jsonFindGeolocationsByPostcodeFirstChars(@RequestParam("postcodeFirstChars") String postcodeFirstChars) {
        System.out.println("jsonFindGeolocationsByPostcodeFirstChars");
        HttpHeaders headers = new HttpHeaders();
        headers.add("Content-Type", "application/json; charset=utf-8");
        List<Geolocation> geolocations = geolocationRepository.findByPostcodeStartingWith(postcodeFirstChars);
        return new ResponseEntity<String>(Geolocation.toJsonArray(geolocations), headers, HttpStatus.OK);
    }
} 
```

我使用 CURL 如下：

```
 curl -i -H Accept:application/json http://localhost:8080/kadjoukor/geolocations?findByPostcodeFirstChars%26postcodeFirstChars=7500 
```

但是，上面的 CURL 命令总是 GET 这个方法（来自 Roo ITD）而不是上面的：

```
@RequestMapping(headers = "Accept=application/json")
    @ResponseBody
    public ResponseEntity<String> GeolocationController.listJson() {
        HttpHeaders headers = new HttpHeaders();
        headers.add("Content-Type", "application/json; charset=utf-8");
        List<Geolocation> result = geolocationRepository.findAll();
        return new ResponseEntity<String>(Geolocation.toJsonArray(result), headers, HttpStatus.OK);
    } 
```

我不确定我做错了什么。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:14:38.213

我弄错了 CURL 语法。

我不应该尝试手动编码＆符号。这就是问题的原因。

以下是发送 GET 请求的适当方式：

```
curl -i -X GET -H Accept:application/json "http://localhost:8080/kadjoukor/geolocations?findByPostcodeFirstChars&postcodeFirstChars=7500" 
```

注意引号和 &

# ruby - 带有 Gitlab 的 Ruby Gems 没有要加载的文件——rb-inotify

> ID：13032580
> 
> 赞同：14
> 
> 时间：2012-10-23T14:20:18.630
> 
> 标签：ruby, gem, bundler, gitolite, gitlab

我正在使用 Gitlab，我正在尝试按照这些说明将我的 gitolite v2 升级到 v3：

“如果在 2.9.x 中出现此问题，您应该重新安装 gitolite。

1）备份所有存储库。只需将 /home/git/repositories/* 复制到其他地方。

2) 安装新的 gitolite。见[https://github.com/gitlabhq/gitlabhq/blob/master/doc/installation.md](https://github.com/gitlabhq/gitlabhq/blob/master/doc/installation.md)

3）将存储库复制回来。

4) sudo -u gitlab -H bundle exec rake gitlab:gitolite:update_keys && sudo -u gitlab -H bundle exec rake gitlab:gitolite:update_repos

就这样。

这些步骤也与想要将 gitolite v2 更新到 v3 的用户有关”

我的 Gemfile 和 Gemfile.lock 中有 rb-inotify ，如下所示：

```
gitlabhq@build:~/gitlabhq$ grep notify Gemfile
gem 'rb-inotify', :require => linux_only('rb-inotify')
gitlabhq@build:~/gitlabhq$ grep notify Gemfile.lock
rb-inotify (0.8.8)
rb-inotify 
```

我正在尝试使用以下命令更新我的密钥和存储库，但我总是收到错误“**没有要加载的此类文件 --rb-inotify** ”

```
gitlabhq@geminibuild:~/gitlabhq$ sudo -u gitlabhq -H bundle exec rake gitlab:gitolite:update_keys
rake aborted!
no such file to load -- rb-inotify
(See full trace by running task with --trace) 
```

我尝试进行捆绑安装，并且“使用”列表不包含 rb-notify gem。

我尝试像这样安装 rb-inotify gem：

```
sudo -u gitlabhq gem install rb-inotify 
```

我已经擦除了 Gemfile.lock 文件，然后运行：

```
sudo -u gitlabhq bundle install 
```

仍然没有运气。

如何让 Gitlab 识别和使用 rb-inotify。谢谢 -

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-07T06:11:39.533

认识到这有点旧，我想我会为后代留下一些东西。为了使这些调用起作用，您只需附加：

`RAILS_ENV=production`

听从你的命令。这在“Gitlab”部分下的[故障排除指南中列出。](https://github.com/gitlabhq/gitlab-public-wiki/wiki/Trouble-Shooting-Guide)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T15:22:39.497

我似乎已经通过运行修复它：

```
bundle install --without production
bundle install 
```

# php - 文件存储组件

> ID：13032588
> 
> 赞同：0
> 
> 时间：2012-10-23T14:20:42.933
> 
> 标签：php, storage

请告诉我，是否有一个 php 组件可以处理不同的文件存储：Amazon S3、Rackspace cloudFiles、FTP 和本地？为了有一个单一的接口来工作，而不是考虑文件存储的内部实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:27:44.490

PHP 提供了一个[抽象层](http://www.php.net/manual/en/stream.streamwrapper.example-1.php)，因此您可以实现自己的 I/O 流包装器，但如果您尝试使用平面文件作为 OLTP 数据的基础，您很快就会遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:24:02.950

其中每一个都为 PHP 提供了一个 SDK/API：

*   [适用于 PHP 的 AWS 开发工具包](http://aws.amazon.com/sdkforphp/)
*   [Rackspace PHP 云文件 API](https://github.com/rackspace/php-cloudfiles)
*   [PHP FTP 函数](http://php.net/manual/en/book.ftp.php)
*   [PHP 本地文件系统函数](http://www.php.net/manual/en/ref.filesystem.php)

# ios - 更改 UINavigation 控制器以使用 SlidePanel

> ID：13032595
> 
> 赞同：0
> 
> 时间：2012-10-23T14:21:21.057
> 
> 标签：ios, ios5, uiview, uiviewcontroller, uinavigationcontroller

我正在尝试更改我现有的设置以使用 SlidePanel。滑动面板来自这里的 JA：- [https://github.com/gotosleep/JASidePanels](https://github.com/gotosleep/JASidePanels)

我的现有代码如下： App Delegate 确实完成了启动：

```
welcomeViewController = [[MySpyWelcomeViewController alloc] initWithNibName:@"MyWelcomeViewController" bundle:nil];

navController = [[UINavigationController alloc] initWithRootViewController:welcomeViewController];
navController.navigationBarHidden = YES;

self.viewController = self.navController;
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible]; 
```

用户登录后，我将调用一个推送 Home 视图控制器的方法：

```
// Push the homeViewController onto the navController
NSLog(@"presentHomeViewController");
self.navController.navigationBarHidden = NO;
[self.navController setTitle:@"Home"];
[self.navController pushViewController:self.homeViewController animated:NO]; 
```

在 JA 幻灯片面板示例中，它显示以下内容：

```
self.viewController = [[JASidePanelController alloc] init];
self.viewController.leftPanel = [[JALeftViewController alloc] init];
self.viewController.centerPanel = [[UINavigationController alloc] initWithRootViewController:[[JACenterViewController alloc] init]];
self.viewController.rightPanel = [[JARightViewController alloc] init];

self.window.rootViewController = self.viewController; 
```

我不确定如何将其实现到我当前的布局中，因为滑动面板将其视为视图控制器而不是导航控制器。有谁知道我如何将 JASlidePanel 实现到我当前的实现中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:47:22.993

在您的 appdelegate.h 文件中执行以下操作：

```
 @class JASidePanelController; 
```

然后

```
 //just generally declare the JAsidepanelcontroller
    @property (nonatomic,retain) JASidePanelController *homeViewController;
   //This is your loginviewcontroller
    @property (nonatomic,retain) LoginMainController *loginmainController; 
```

然后在您的 appdelegate.m 文件中执行以下操作：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
     {

        if(loggedin)
       {
         if (!self.homeViewController) {

        MySpyWelcomeViewController *mySpyWelcomeViewControllerTemp = [[MySpyWelcomeViewController alloc] init];
        UINavigationController *navigationControllerTemp = [[UINavigationController alloc] initWithRootViewController:mySpyWelcomeViewControllerTemp];
        self.navigationController = navigationControllerTemp;

     //here use the left and right viewcontroller that you are going to show for the sidemenu
        SidebarOptionsLeftViewController *sidebarOptionsleftViewControllerTemp = [[SidebarOptionsLeftViewController alloc] init];
        SidebarOptionsRightViewController *sidebarOptionsrightViewControllerTemp = [[SidebarOptionsRightViewController alloc] init];
        sidebarOptionsrightViewControllerTemp.delegate = mySpyWelcomeViewControllerTemp;

        JASidePanelController *homeViewTemp = [[JASidePanelController alloc] init];
        homeViewTemp.shouldDelegateAutorotateToVisiblePanel = NO;

        homeViewTemp.leftPanel = sidebarOptionsleftViewControllerTemp;
        homeViewTemp.centerPanel = navigationControllerTemp;
        homeViewTemp.rightPanel = sidebarOptionsrightViewControllerTemp;
      }
        self.window.rootViewController = self.homeViewController;
      }

   else {
    if (!self.loginmainController) {
        LoginMainController *loginmainControllerTemp = [[LoginMainController alloc] initWithNibName:@"LoginMainController" bundle:nil];
        self.loginmainController = loginmainControllerTemp;
    }
    if (!self.navigationController) {
        UINavigationController *navigationControllerTemp = [[UINavigationController alloc] initWithRootViewController:self.loginmainController];
        self.navigationController = navigationControllerTemp;
        self.navigationController.navigationBarHidden = YES;
    }
    self.window.rootViewController = self.navigationController;
  } 
```

}

这对我很有效。希望这对你也有帮助。

# android - 打开应用程序并将数据存储到首选项时如何制作提示编辑文本对话框？

> ID：13032601
> 
> 赞同：1
> 
> 时间：2012-10-23T14:21:37.923
> 
> 标签：android, dialog, preference

我已经阅读了很多文章，但都将设置首选项屏幕并单击首选项说编辑文本然后它会提示编辑文本对话框。现在**我只想有一个对话框，它会在首次创建应用程序并将输入数据存储到首选项时进行提示**。在这种情况下我可以使用 DialogPreference 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:27:31.637

是的，当然你可以......首先，在你的活动创建的 onCreate -

```
boolean firstrun = getSharedPreferences("PREFERENCE", MODE_PRIVATE).getBoolean("firstrun", true); 
```

然后检查 -

```
if (firstrun) {
//Call HERE your showDialog, for example...
 showDialog(DIALOG_TEXT_ENTRY1);
} 
```

最后一个 - 只需通过...覆盖 onCreateDialog -

```
 @Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    //main title
    case DIALOG_TEXT_ENTRY1:
         LayoutInflater factorymain = LayoutInflater.from(this);
         final View textEntryViewMain = factorymain.inflate(R.layout.main_title_dialog, null);  
.................
............ 
```

通过如上所示的 Layoutinflater，您可以使用所需的任何 editText 对象显示任何布局......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:16:28.140

在获得“真实”值后，不要忘记在首选项中保存“首次运行”标记：

```
SharedPreferences prefs = getSharedPreferences("PREFERENCE", MODE_PRIVATE);
boolean firstrun = prefs.getBoolean("firstrun", true);

if (firstrun) {
  SharedPreferences.Editor editor = prefs.edit()
  editor.putBoolean("firstrun", false);
  editor.apply();

  //Call HERE your showDialog, for example...
  showDialog(DIALOG_TEXT_ENTRY1);
} 
```

所以你不会总是得到一个“真实”的价值。顺便说一句，将所有常量作为静态最终属性的最佳做法是，例如，您不会更改拼写错误的“firstrun”。

# objective-c - XCode 4.5.1 在启动时崩溃

> ID：13032603
> 
> 赞同：1
> 
> 时间：2012-10-23T14:21:40.677
> 
> 标签：objective-c, xcode

谁能帮我这个。它快把我逼疯了。XCode 将启动，但我无法打开项目或启动新项目。我已经通过拖动到垃圾箱卸载了 Xcode 4.5.1（从应用商店），但我觉得它没有删除导致崩溃的任何内容。我的 macbook 在打开相同的项目文件时完全没有问题。崩溃报告的第一部分如下。让我知道是否需要粘贴更多内容。非常感谢任何帮助谢谢，史蒂夫

```
Process:         Xcode [497]
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.dt.Xcode
Version:         4.5.1 (1842)
Build Info:      IDEApplication-1842000000000000~2
App Item ID:     497799835
App External ID: 11278374
Code Type:       X86-64 (Native)
Parent Process:  launchd [261]
User ID:         501

Date/Time:       2012-10-23 15:12:45.367 +0100
OS Version:      Mac OS X 10.8.2 (12C60)
Report Version:  10

Interval Since Last Report:          10165 sec
Crashes Since Last Report:           1
Per-App Interval Since Last Report:  34 sec
Per-App Crashes Since Last Report:   1
Anonymous UUID:                      E08F2BD9-C7A3-6B39-2DAF-D687D853FC1D

Crashed Thread:  23

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000057b00001a10

VM Regions Near 0x57b00001a10:
    MALLOC (reserved)      0000000610000000-0000000800000000 [  7.8G] rw-/rwx SM=NUL  reserved VM address space (unallocated)
--> 
    JS JIT generated code  00002085b4c00000-00002085b4c01000 [    4K] ---/rwx SM=NUL  

Application Specific Information:
ProductBuildVersion: 4G1004
objc[497]: garbage collection is ON 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:57:32.897

更新到下一个 Xcode 版本的 beta 版本修复了这个问题。要么是该版本的错误，要么更新覆盖了导致问题的任何内容

# excel - Excel中的内存不足错误

> ID：13032608
> 
> 赞同：2
> 
> 时间：2012-10-23T14:21:50.767
> 
> 标签：excel, vba

由于数据量很大（集合中有超过 2,000,000 个条目），Excel 以“内存不足错误”（代码 7）终止了我的 VBA 程序。我知道 VBA 不是处理这么多数据的正确语言，但是有没有办法增加 Excel 用来运行 VBA 程序的内存？我准确地说这不是堆栈溢出，堆栈调用的数量限制为 10。

在此先感谢，马克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T14:39:48.013

取决于您使用的 Excel 版本。Excel 2007 之前的版本往往具有相当有限的内存容量。
32 位 Excel 2007 及更高版本理论上总共可以使用 2GB，但实际上通常很难为 VBA 获得超过 512MB 的空间。
64 位 Excel 2010 及更高版本要好得多：我已成功使用多达 4 GB 的 VBA 内存。

使用 Dictionary 而不是 Collection 可能会更节省内存，但我还没有测试过。

# ruby-on-rails - Rails：逐步验证表单字段

> ID：13032609
> 
> 赞同：0
> 
> 时间：2012-10-23T14:21:54.893
> 
> 标签：ruby-on-rails

我正在尝试验证不同的输入值。例如“域”和“电子邮件”。两者都必须具有值并且必须是唯一的。所以我尝试用

```
validates :domain,
          :presence => true,
          :uniqueness => { :case_sensitive => true }
validates :email,
          :presence => true,
          :uniqueness => { :case_sensitive => true } 
```

但是当我显示 flash 消息时，我得到了四个错误：

```
["Domain can't be blank", "Domain has already been taken", "Email can't be blank", "Email has already been taken"] 
```

是否可以逐步检查它们？如果输入字段没有值，用户会得到

```
["Domain can't be blank"] 
```

但是如果输入字段有一个值并且不是唯一的，用户会得到

```
["Domain has already been taken"] 
```

我该如何实施？

**编辑**

下面是打印错误消息的代码：

```
<% [:error].each do |key| %>
  <% if flash[key] %>
    <div class="<%= key %>" id="flash">
      <%= flash[key] %>
    </div>
  <% end %>
<% end %> 
```

这里是产生错误的控制器：

```
def create

  respond_to do |format|
    # save form data
    @login = Login.new(params[:login])

    # if validation fails, throw error messages
    if !@login.save
      flash[:error] = @login.errors.to_a
    end

    # redirect to landingpage
   format.html { redirect_to :root }

  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:06:56.870

`flash[:error]`如果您不首先调用，则将显示所有错误，`@user.valid?`或者`@user.invalid?`随后将返回与该`@person`对象相关的错误。

有关如何使用[Flash](http://guides.rubyonrails.org/action_controller_overview.html#the-flash)的信息，请参阅 Rails 指南。还有[验证错误](http://guides.rubyonrails.org/active_record_validations_callbacks.html#working-with-validation-errors)部分。

试试这个：

```
if !@login.save       
  flash[:error] = @login.errors.to_a if @login.invalid?
end 
```

# bash - bash 时间的奇怪交互，set -e 和 false，bash 3 与 bash 4 的差异

> ID：13032610
> 
> 赞同：2
> 
> 时间：2012-10-23T14:21:57.470
> 
> 标签：bash, time, set, posix

`time` `false`以下配方`set -e`成功（在`time`可以看到输出的意义上成功）：

```
(
set +e
time { ( set -e; false; echo no0; ); }
echo yes0 $?
) 
```

但以下食谱失败：

```
(
set -e
time false
echo no1
) 
```

同样：

```
(
set -e
time { false; echo no2; }
echo no2
) 
```

同样（令人惊讶的是，它在 bash3 下输出 yes3 而在 bash4 下没有输出）：

```
(
set -e
time ( false; echo no3; )
echo yes3 $?
) 
```

同样（不是很令人惊讶）：

```
(
set +e
time { set -e; false; echo no4; }
echo no4
) 
```

同样（惊喜）：

```
(
set +e
time ( set -e; false; echo no5; )
echo yes5 $?
) 
```

以下在 bash3 下成功，在 bash4 下做了完全不同的事情：

```
(
set -e
time { ( false; echo no7; ); echo yes6 $?; }
echo yes6 $?
) 
```

请注意，“否”`echo`不打印，而“是”由 bash3 输出（但不是全部由 bash4 输出）。

如果将其与下面的子shell`(...)`处理进行比较，则在这种情况下，内置函数`set -e`似乎是在子shell 上下文中执行的。怎么回事？`time``time (...)`

经测试

```
GNU bash, version 3.2.25(1)-release (x86_64-redhat-linux-gnu)
Copyright (C) 2005 Free Software Foundation, Inc. 
```

输出

```
real    0m0.000s
user    0m0.001s
sys     0m0.000s
yes0 1
yes3 1
yes5 1
yes6 1

real    0m0.000s
user    0m0.000s
sys     0m0.001s
yes6 0 
```

和

```
GNU bash, version 4.1.5(1)-release (x86_64-pc-linux-gnu)
Copyright (C) 2009 Free Software Foundation, Inc. 
```

输出

```
real    0m0.001s
user    0m0.000s
sys     0m0.004s
yes0 1
yes5 1 
```

请注意，“yes3”和“yes6”案例显示 bash3 和 bash4 处理方式的巨大差异`set -e`。

但是“yes5”的情况令人困惑。看起来“时间”以某种方式由子外壳而不是在外壳中处理。

**这种行为是由 POSIX 强制执行的，是 bashs 错误之一还是只是一种`bash`特殊行为？**

谢谢 ;）

PS：如果你不明白为什么这不是学术性的：曾经有一个脚本在`set -e`（“yes3” without `time`）下运行。它被改变以记录一些时间信息，黑客看起来像“yes6”。但是现在 bash4 出现了，它需要再次修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:50:45.960

实际上 bash 4 中的行为是可以预测的，

*   `set -e`如果当前 shell 或当前 shell 的子 shell 中的任何简单命令返回非零退出状态，将导致您退出当前 shell（有关更详细/准确的描述，请阅读[Bash 手册的部分`set`](http://www.gnu.org/software/bash/manual/bashref.html#The-Set-Builtin)）

*   `set -e`优先于`time`，即在**no2**情况下说

    ```
    (
       set -e
       time false;  
    ) 
    ```

    您在可以完成执行之前退出子shell `time`，因此没有来自`time`.

* * *

考虑到这一点，在**yes5**情况下会发生什么（让我们将第一个`( )`称为“subshel​​l level 1”，将第二个`( )`称为“level 2”）

```
(
    set +e
    time ( set -e; false; echo no5; )
    echo yes5 $?
) 
```

is when you encounter `false` which returns exit status 1, the `set -e` causes it to exit subshell level 2, this returns exit status 1 to subshell level 1\. But since level 1 has `set +e`, everything runs.

* * *

For **yes6** case,

```
(
    set -e
    time { ( false; echo no7; ); echo yes6 $?; }
    echo yes6 $?
) 
```

the `false` in subshell level 2 returns triggers `set -e`, hence the absence of output.

* * *

The rest is left as an exercise for the reader.

# apache - Apache DirectoryScanner 可以处理带有父目录引用的路径吗？

> ID：13032611
> 
> 赞同：1
> 
> 时间：2012-10-23T14:22:00.657
> 
> 标签：apache, ant

每个人，

我正在使用 Apache 的 DirectoryScanner，如下所示：

```
DirectoryScanner scanner = new DirectoryScanner();
scanner.setIncludes(new String[]{"/home/John/../Alex/file"});
scanner.scan();
String[] filePaths = scanner.getIncludedFiles(); 
```

问题是当路径中有父目录引用时 DirectoryScanner 找不到目标文件 (John/../Alex)。

如果路径是“/home/Alex/file”，它会按预期工作。

有没有办法 Apache 的 DirectoryScanner 来处理这种路径，或者扫描仪不支持它们？

谢谢！

# c# - 具有最大长度的文本框控件以避免字符串修剪？

> ID：13032618
> 
> 赞同：1
> 
> 时间：2012-10-23T14:22:24.273
> 
> 标签：c#, winforms, textbox

使用 TextBox 控件，我想强制执行最大长度。但是，最大长度基于以像素为单位的字符串大小，而不是字符数。

如果这样做会导致字符被文本渲染器修剪，我想限制输入更多字符，通常会被省略号 (...) 截断。

问题是我不一定使用固定字体。我正在使用多行文本框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:31:32.830

如果您的字体不是固定大小，您必须在输入每个字符后重新计算宽度/高度。

像这样的东西：

```
public void ValueChanged()
{
    var stringSize = e.Graphics.MeasureString(textBox.Text, textBox.Font);
    if(stringSize.Height > MAXSTRINGHEIGHT)
    {
       textBox.Text = TrimTextAndAddEllipsis(textBox.Text);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:26:11.310

我想您需要根据以下等式设置宽度

```
[border slack] + ([character length] * ([number of characters] + [5 - number of characters Mod 5])). 
```

# c# - 如何使用 C# 中传递的字符串在函数中创建对象？

> ID：13032619
> 
> 赞同：1
> 
> 时间：2012-10-23T14:22:26.247
> 
> 标签：c#, string, object

我试图寻找答案，但找不到，最接近的是：[Create an instance of a class from a string](https://stackoverflow.com/questions/223952/c-sharp-create-an-instance-of-a-class-from-a-string)但它并没有真正回答我的问题：

如何从字符串创建类的实例，例如，我想创建一个 WinForms 对象并将其添加到 MDI。

我有一个函数，它接受一个字符串，formname（例如“Form1”），并检查一个实例的 MDI 子级，如果它存在则设置焦点，如果不存在则创建一个实例并将其添加到子级。

我目前创建表单的方式是使用案例声明，但每次向项目添加新表单时，我都必须更新它！有没有办法根据传入的字符串向 MDI 子项添加 Form 类的实例，例如伪代码：

调用函数：openForm("Form2");

```
public void openForm(String formname)
{
    if form exists in MDI children
    {
         focus form with name = formname;
    }
    else
    {
        MDIChildren.add(CreateInstanceOfClassNamed(formname));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:26:50.740

尝试这样的事情（伪代码，不知道 MDI 的东西）

```
public void openForm(String formTypeName)
{
    Form FocusForm = null;
    Type formType = Type.GetType(formTypeName);
    foreach (var form in MDIChildren) 
    {
        if (form.GetType() == formType)
        {
             focusForm = form;
             break;
        }
    }
    if (focusForm == null)
    {
        MDIChildren.add(Activator.CreateInstance(formType));
    }
    // set focus to focusForm
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:31:28.447

`Activator`可以从类名创建对象：

```
 object obj = Activator.CreateInstance(Type.GetType(assemblyname + "." +formname));

  ((Form)obj).ShowDialog(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:39:50.357

而不是传递一个字符串，你可以只使函数通用：

```
public TForm GetForm<TForm>()
  where TForm : Form, new()
{
  TForm existingChild = MDIChildren.OfType<TForm>().FirstOrDefult();
  if(existingChild != null)
  {
    //focus, or do whatever
    return existingChild;
  }
  else
  {
    TForm newChild = new TForm();
    //do stuff with new child
    return newChild; 
  }
} 
```

这将确保您不会传递不是表单或根本不是任何类型的类的字符串值。你可以这样称呼它：

```
Form2 newChild = GetForm<Form2>(); 
```

# javascript - 脚本在 Chrome 和 IE 上无法正常运行

> ID：13032620
> 
> 赞同：1
> 
> 时间：2012-10-23T14:22:32.243
> 
> 标签：javascript, jquery, css

链接:: [http://amatrans.com.previewyoursites.com/](http://amatrans.com.previewyoursites.com/)

下面的脚本是为滑块编写的，它在 Firefox 中可以正常工作，但不能在

Chrome（鼠标悬停和鼠标离开它会产生白色闪光）和

IE（为悬停占用过多的第一次加载）

任何人都可以帮助我吗

```
<script type="text/javascript">
        jQuery(".slides li").each(function(){
            var oldurl =  jQuery(this).css('background-image');
            var imageUrl =  jQuery(this).find('.bw_img').html();
            jQuery(this).css('background-image', 'url(' + imageUrl + ')');
            jQuery(this).find('.bw_img').html(oldurl);
        }).mouseenter(function(){
            var oldurl =  jQuery(this).css('background-image');
            var imageUrl =  jQuery(this).find('.bw_img').html();
            jQuery(this).css('background-image', imageUrl);
            jQuery(this).find('.bw_img').html(oldurl);
        }).mouseleave(function() {
            var oldurl =  jQuery(this).css('background-image');
            var imageUrl =  jQuery(this).find('.bw_img').html();
            jQuery(this).css('background-image', imageUrl);
            jQuery(this).find('.bw_img').html(oldurl);
        });
</script> 
```

（实际上我想要正常的黑色图像和鼠标悬停的彩色图像）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:29:32.887

您可以将图像预加载到隐藏的容器中，这样在更改背景时就不会出现闪烁。

```
$(document).ready(function () {
    var container = $('<div id="preloader" />').css('display', 'none').appendTo($(document.body));
    $('<img />').src(imageUrl).appendTo(container);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:29:40.803

当黑白图像被隐藏并显示彩色图像时，似乎会发生闪光。由于您使用的是大型 CSS 背景图像，因此这将是难以避免的。

我建议重新调整您的代码以使用绝对定位的内联图像。然后，您可以简单地在黑白图像上显示彩色图像，而完全不删除黑白图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T14:36:29.613

我同意康斯坦丁重新。预加载图像 - 这可能是一个瓶颈。第二件事是您通过迭代所有`<li>`元素并将事件附加到它们来创建大量闭包。你最好使用jQuery`on`方法，例如：

```
jQuery(".slides li").on("mouseenter", function() {
  // your mouseenter code
}).on("mouseleave", function() {
  // other code
}); 
```

这将更加节省内存。

**编辑：**对于这个特定的用例，您可以依赖 CSS：

```
.slides li:hover { filter: grayscale(100%);
  -webkit-filter: grayscale(100%);
  -moz-filter: grayscale(100%);
  -ms-filter: grayscale(100%);
  -o-filter: grayscale(100%);
} 
```

# angularjs - 需要一些自定义AngularJS标签中绑定属性的例子

> ID：13032621
> 
> 赞同：30
> 
> 时间：2012-10-23T14:22:36.460
> 
> 标签：angularjs

我正在尝试创建类似于以下内容的自定义标签：

```
<mytag type="Big" /> 
```

其中 type 是绑定到组件的属性。以这样的方式将文本设置在标签中，如下所示：

```
<label>{{type}}</label> 
```

...（其他组件）...

正如文档所说，我有一个设置默认类型的控制器：

```
$scope.type = "Small"; 
```

这样如果我使用没有属性类型的标签仍然会被设置。

我正在尝试使用指令进行绑定：

```
angular.module('TestPage',[])
      .directive('mytag',function() {
          return {
              restrict: 'E',
              templateUrl: 'component.html',
              scope: {
                  type: '='
              }
          }
      }); 
```

请注意，我的组件模板中确实有适当的 ng-app 设置 (ng-app="TestPage")。

我的问题是对类型的绑定似乎并没有真正绑定任何东西。

我已阅读有关如何使用指令将变量绑定到组件的文档。根据文档，您可以在范围内进行此类绑定。范围显然可以包含一个“对象哈希”（不管那是什么！），它创建了一个称为“隔离范围”（???）的东西。此类范围可以通过以下方式表示“本地属性”：

> @ 或 @attr - 将本地范围属性绑定到 DOM 属性。结果始终是字符串，因为 DOM 属性是字符串。如果未指定 attr 名称，则本地名称和属性名称相同。给定范围的小部件定义：{ localName:'@myAttr'}，然后小部件范围属性 localName 将反映 hello {{name}} 的插值。随着 name 属性的变化，小部件范围上的 localName 属性也会发生变化。该名称是从父范围（不是组件范围）读取的。

啊？？？这一切与正确的绑定语法有什么关系？

> = 或 = 表达式 - 在本地范围属性和父范围属性之间设置双向绑定。如果未指定 attr 名称，则本地名称和属性名称相同。给定范围的widget定义：{localModel:'=myAttr'}，那么widget范围属性localName将反映parentModel在父范围上的值。对 parentModel 的任何更改都将反映在 localModel 中，而对 localModel 的任何更改都将反映在 parentModel 中。

打扰一下？这里在说什么？？？

> & 或 &attr - 提供一种在父作用域的上下文中执行表达式的方法。如果未指定 attr 名称，则本地名称和属性名称相同。给定范围的小部件定义：{ localFn:'increment()' }，然后隔离范围属性 localFn 将指向 increment() 表达式的函数包装器。通常希望通过表达式将数据从隔离作用域传递到父作用域，这可以通过将局部变量名称和值的映射传递到表达式包装器 fn 来完成。例如，如果表达式是 increment(amount)，那么我们可以通过将 localFn 调用为 localFn({amount: 22}) 来指定数量值。

现在我完全糊涂了！你有小部件标签和某种相关的功能，我必须写我才能进行绑定？？？我想要的只是将值绑定到标签标签！

我已经从文档 ( [http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive) ) 中复制了上面的文本来说明一点：这个文档读起来像旧的 UNIX 文档：对那些已经了解系统的人非常有用，但是对于试图发展真正专业知识的初学者来说没有太大帮助。所有的教程都展示了如何在 AngularJS 中完成简单的任务（非常适合玩具应用程序，但对于我想要构建的客户端应用程序不是那么好），为什么没有更高级的东西？？？

好的，是时候让我更有建设性了。

有人可以提供一些很好的简单示例，说明如何进行本文档难以描述的各种绑定吗？？？示例显示这些范围语句的正确语法和描述（用简单的英语）它们究竟如何返回到添加到自定义标记的属性？？？

感谢您的耐心等待，并提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-10-23T14:53:04.487

当我第一次接触 Angular 时，我也对这个文档有点挣扎，但我会尝试为你澄清一些事情。首先，在使用此`scope`属性时，它会创建一个“隔离范围”。这意味着它不会从父作用域继承任何属性，因此您不必担心作用域内的任何冲突。

现在，'@' 表示法意味着属性中的评估值将自动绑定到指令的范围内。因此，`<my-directive foo="bar" />`最终会得到一个具有名为`foo`“bar”的属性的范围。您还可以执行类似的操作`<my-directive foo="{{bar}}"`，然后将评估的值`{{bar}}`绑定到范围。由于属性始终是字符串，因此在使用此表示法时，您将始终在范围内得到此属性的字符串。

'=' 符号基本上提供了一种将对象传递到指令中的机制。它总是从指令的父范围中提取它，所以这个属性永远不会有`{{}}`. 因此，如果您拥有它，它将在指令范围的属性`<my-directive foo="bar" />`中将任何内容绑定`$scope.bar`到您的指令中。`foo`您在自己的范围内所做的任何更改`foo`都将反映在`bar`父范围内，反之亦然。

我几乎没有像其他人那样使用'&'符号，所以我对它的了解不如这两个。据我了解，它允许您从父范围的上下文中评估表达式。所以如果你有类似的东西`<my-directive foo="doStuff()" />`，每当你在指令中调用 scope.foo() 时，它都会在指令的父作用域中调用 doStuff 函数。我相信你可以用这个做更多的事情，但我对这一切并不熟悉。也许其他人可以更详细地解释这一点。

如果只在作用域中设置符号，它将使用与属性相同的名称来绑定到指令作用域。例如：

```
scope: {
   foo1: '@',
   foo2: '=',
   foo3: '&'
} 
```

包含指令时，需要有属性 foo1、foo2 和 foo3。如果您希望范围内的属性与属性名称不同，则可以在符号之后指定。所以，上面的例子是

```
scope: {
   foo1: '@bar1',
   foo2: '=bar2',
   foo3: '&bar3'
} 
```

包含指令时，需要有属性 bar1、bar2 和 bar3，它们将分别绑定在属性 foo1、foo2 和 foo3 下的范围内。

我希望这有帮助。随意提出问题，我可以澄清我的答案。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-10-23T14:52:08.983

你很接近..

```
app.directive('mytag',function() {
    return {
        restrict: 'E',
        template: '<div>' +
            '<input ng-model="controltype"/>' + 
            '<button ng-click="controlfunc()">Parent Func</button>' + 
            '<p>{{controlval}}</p>' + 
         '</div>',
        scope: {
            /* make typeattribute="whatever" bind two-ways (=)
            $scope.whatever from the parent to $scope.controltype
            on this directive's scope */
            controltype: '=typeattribute',
            /* reference a function from the parent through
               funcattribute="somefunc()" and stick it our
               directive's scope in $scope.controlfunc */
            controlfunc: '&funcattribute',
            /* pass a string value into the directive */
            controlval: '@valattribute'
        },
        controller: function($scope) {                  
        }
    };
});

  <div ng-controller="ParentCtrl">
       <!-- your directive -->
       <mytag typeattribute="parenttype" funcattribute="parentFn()" valattribute="Wee, I'm a value"></mytag>
       <!-- write out your scope value -->
       {{parenttype}}
  </div>

  app.controller('ParentCtrl', function($scope){ 
       $scope.parenttype = 'FOO';
       $scope.parentFn = function() {
           $scope.parenttype += '!!!!';
       }
  }); 
```

神奇之处主要在于`scope:`指令定义中的声明。有任何`scope: {}`内容将“隔离”父级的范围，这意味着它拥有自己的范围......没有它，它将使用父级的范围。其余的魔力在于作用域的属性： `scope: { 'internalScopeProperty' : '=externalAttributeName' }`... 其中`=`代表双向绑定场景。如果您将其更改`=`为 a`@`您会看到它只允许您将字符串作为属性传递给指令。用于从父作用域的`&`上下文中执行函数。

我希望这会有所帮助。

* * *

**编辑：[这是一个有效的 PLNKR](http://plnkr.co/edit/SJCVe6)**

# c++ - 带有二维 wchar_t 字符串数组的简单示例

> ID：13032623
> 
> 赞同：0
> 
> 时间：2012-10-23T14:22:39.930
> 
> 标签：c++, c

有人可以解释为什么下一个代码输出 26 timez 'Z' 而不是从 'A' 到 'Z'，以及如何正确输出这个数组。看代码：

```
wchar_t *allDrvs[26];
    int count = 0;
     for (int n=0; n<26; n++)
     {
         wchar_t t[] = {L'A' + n, '\0'}; 
         allDrvs[n] = t;
         count++;
     }
     int j;
     for(j = 0; j < count; j++)
     {
        std::wcout << allDrvs[j] << std::endl;
     } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T14:24:41.437

问题（至少一个）是：

```
{
     wchar_t t[] = {L'A' + n, '\0'}; 
     allDrvs[n] = t;  //allDrvs points to t
     count++;         
 }   //t is deallocated here
     //allDrvs[n] is a dangling pointer 
```

所以，简短的回答 - 未定义的行为就行了`std::wcout << allDrvs[j]`。

要获得正确的输出 - 有一个~~蹩脚的~~丑陋的版本涉及动态分配和数组之间的复制。

然后是使用`std::vector<std::wstring> >`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:28:42.887

你`t[]`在堆栈上；它一次只存在于循环的一次迭代中，下一次迭代似乎正在重用该空间 - 这不是必需的行为，但这似乎是根据您的结果发生的情况。如果`allDrvs[]`在第一个循环完成后使用调试器进行检查，您可能会看到所有指针都指向同一个内存位置。

有多种方法可以解决这个问题。您可以为每次循环迭代在堆上分配一个新`t`的（然后删除它们）。您可以`wchar_t allDrvs[26][2];`代替, 并在每次迭代`wchar_t *allDrvs[26]`中复制 的内容。`t`您可以`t`在第一个循环中立即显示，而不是稍后再显示。您可以使用`std::vector`和`std::wstring`为您管理事物，而不是使用数组和指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:29:37.810

您的代码具有未定义的行为。你`t`有自动存储持续时间，所以一旦你退出上层循环，它就不复存在了。您`allDrvs`包含 26 个指向在您在第二个循环中使用它们时已销毁的对象的指针。

`t`碰巧的是，它看起来像（在您运行它的情况下，使用您正在使用的编译器等）正在发生的事情是它在循环的每次迭代中重新使用相同的存储空间，以及何时您`allDrvs`在第二个循环中使用，该存储尚未被覆盖，因此您有 26 个指向相同数据的指针。

既然您无论如何都在使用 C++，我建议您使用`std::wstring`并且可能`std::vector`代替 - 例如，按照这个一般顺序：

```
std::vector<std::wstring> allDrvs;

for (char i=L'A'; i<L'Z'; i++)
     allDrvs.push_back(std::wstring(i)); 
```

从技术上讲，这不是完全可移植的——它依赖于`'A' .. 'Z'`连续性，并非所有字符集都是如此，IBM 的 EBCDIC 是明显的例外。即使在这种情况下，它也会产生所有正确的输出，但它还会包含一些您并不真正想要的附加项目。

尽管如此，原始代码依赖于`'A'..'Z'`连续性，而且代码看起来可能是针对 Windows 的，所以这可能不是一个大问题。

# python - 如何从coldfusion10运行python脚本？

> ID：13032628
> 
> 赞同：2
> 
> 时间：2012-10-23T14:22:57.390
> 
> 标签：python, coldfusion

我在 python 和 Java 上发现了类似的问题，但我无法有效地解决我的问题。

我有一个带有知识产权保护的 python 脚本。所以我不能用Java重写它。现在我需要运行这个 python 脚本来联系 Postgresql 9.1 数据库并返回处理后的信息作为结果。这个 python 脚本每 3 个月更新一次。

现在我需要在不影响应用程序性能的情况下从 Coldfusion 10 应用程序运行它。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T14:35:35.413

python脚本驻留在哪里？如果它和 CF 在同一台机器上，你可以使用[CFEXECUTE](http://cfdocs.org/cfexecute)来执行 python 脚本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T16:20:30.753

CFgroovy 似乎能够运行 Python

[http://www.barneyb.com/barneyblog/projects/cfgroovy2/](http://www.barneyb.com/barneyblog/projects/cfgroovy2/)

# python - Django MPTT：按深度过滤？

> ID：13032629
> 
> 赞同：2
> 
> 时间：2012-10-23T14:22:59.887
> 
> 标签：python, django, django-models, django-mptt, mptt

我想知道关于 django-mptt 的事情，因为我正在考虑将它用于工程协调项目。

我将有一个模型类（例如“接口”），在树中具有模型的外键（例如“位置”）。

我能否通过它们所指的位置的深度来过滤接口？深度是父母的数量。

我还不知道如何组织我的数据，这就是我问的原因。我正在考虑使用 django-mptt（与部署时循环创建的模型相反，每个模型对应于一个树级别），但我害怕它会在某个时候阻止我并迫使我审查我的整个项目。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T14:26:16.390

终于找到了我的答案：[django-mptt 开发文档](http://django-mptt.readthedocs.org/en/latest/technical_details.html#level)

> 级别 节点在树中所处的级别（或“深度”）。
> 
> 根节点是 0 级，它们的直接子节点是 1 级，它们的直接子节点是 2 级，依此类推......
> 
> 为方便起见，该字段纯粹是非规范化。它避免了检查树结构以确定特定节点的级别的需要，并使需要考虑深度的查询更容易使用 Django 的 ORM 实现。例如，限制为整个树或任何子树检索的节点的级别数：

```
# Retrieve root nodes and their immediate children only
SomeModel.tree.filter(level__lte=1) 
```

# ios - MPMoviePlayerController UIGestureRecognizer 在全屏时不会触发

> ID：13032630
> 
> 赞同：2
> 
> 时间：2012-10-23T14:23:04.390
> 
> 标签：ios, ios6, mpmovieplayercontroller, uigesturerecognizer

我有 MPMoviePlayerController，它有一些 UIGestureRecognizers。它在正常视图中运行良好，但是当播放器进入全屏时，即使事件被绑定，它也不会触发事件。

这是我绑定事件的方式：

```
UISwipeGestureRecognizer * nextChannelRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(gotoNextChannel)];
    [nextChannelRecognizer setDirection:(UISwipeGestureRecognizerDirectionLeft)];
    [[player.view.subviews objectAtIndex:0] setUserInteractionEnabled:YES];
    [[player.view.subviews objectAtIndex:0] addGestureRecognizer:nextChannelRecognizer];

    UISwipeGestureRecognizer * previousChannelRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(gotoPreviousChannel)];
    [previousChannelRecognizer setDirection:(UISwipeGestureRecognizerDirectionRight)];
    [[player.view.subviews objectAtIndex:0] addGestureRecognizer:previousChannelRecognizer];

    for (UIGestureRecognizer *g in ((UIView *)[player.view.subviews objectAtIndex:0]).gestureRecognizers) {
        NSLog(@"g %@", g.class);
    } 
```

在普通视图和全屏中，循环中的代码输出这些

MPTapGestureRecognizer
MPSwipeGestureRecognizer
UIPinchGestureRecognizer
MPActivityGestureRecognizer
UITapGestureRecognizer
UITapGestureRecognizer
UIPinchGestureRecognizer
UISwipeGestureRecognizer
UISwipeGestureRecognizer

我尝试添加另一个带有玩家视图视图边界的临时视图，并将相同的事件绑定到它，但结果是相同的。

你能告诉我为什么它不起作用吗？怎么了？

# javascript - fnPageChange 不能立即工作？JS序列错误？

> ID：13032632
> 
> 赞同：1
> 
> 时间：2012-10-23T14:23:07.890
> 
> 标签：javascript, jquery, datatables, sequence, jquery-datatables

我遇到了一个奇怪的问题，它发生在我维护的几个使用数据表的网站上。

每当我使用 fnPageChange 时，它​​都不起作用，除非它周围有这样的 setTimeout；

```
setTimeout(function() { oTable.fnPageChange(whatPage); }, 100); 
```

或在它之前发出警报

```
alert('starting'); oTable.fnPageChange('last'); 
```

我知道这可能是某种顺序错误，但我只是不确定为什么在多个项目中会出现相同的问题。

这是我现在正在使用的删除功能：

```
function fnDelete(elem){
    if (selected.length>0) {
        var c;
        c = confirm('Are you sure you want to delete the selected ${displayTableName}?');
        if (c) {
            // Create delete url from editor url...
            var deleteURL = (urlstr.substring(0, urlstr.lastIndexOf('/') + 1)) + "delete.do";
            deleteRecord(deleteURL,selected[0]);

            if ( $('tableViewer tr').length === 0) {
                // Reload the Table
                oTable.fnPageChange('last');
                //Send them back to the last page
            }
        }
    }

} 
```

有谁知道这可能是什么问题？

这是删除记录：

```
function deleteRecord(deleteURL, iid){
    var didDelete = false;
    jQuery.ajax({
            type: "POST",
            url: deleteURL,
            dataType:"html",
            data:"recordID="+iid,
            success:function(response){
                didDelete = true;
                oTable.fnDraw(true);
                selected = [];
                selectedRecord = [];
                enableButtons(selected);
            },
            error:function (xhr, ajaxOptions, thrownError){
                if ((xhr.status >=400) && (xhr.status < 500))
                    alert(xhr.responseText);
                else
                    alert('error');
            }    
        });

    return didDelete;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-07-09T10:11:50.600

您可以尝试如下

```
oTable.page(CurrentPageNo).draw(false); 
```

这里，oTable 是 Datatable 的对象。

# jquery - Fancybox 和 CSS

> ID：13032633
> 
> 赞同：2
> 
> 时间：2012-10-23T14:23:15.553
> 
> 标签：jquery, css, fancybox

我有一个在页面加载时打开的 Fancybox。一切正常，除了我无法设置弹出框的样式。似乎它不会拿起我的CSS。顺便一提; 我不熟悉 js - 我只是从教程中复制！所以如果答案包括js，请非常特别。谢谢！

在头部：

```
 <link rel="stylesheet" type="text/css" href="/js/jquery.fancybox/jquery.fancybox.css" media="screen" />
    <link rel="stylesheet" href="/stylesheets/ups-screen.css" type="text/css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript" src="/js/jquery.fancybox/jquery.fancybox-1.2.1.pack.js"></script>

<body onload="$(a'#popup').trigger('click');"> 
```

在关闭 body-tag 之前：

```
 <script type="text/javascript">
$(document).ready(function() {
    $("#popup").fancybox().trigger('click');

}); 
```

要加载的内容：

```
<a id="popup" href="#melding"></a>
<div style="display: none;">
<div class="fancybox">
<div id="melding"><br />
<br />
<h3>Velkommen til min nye hjemmeside.</h3>
<br />
<p>Testing - Testing. </p>
</div>
</div>
</div> 
```

ups-screen样式表中的css：

```
.fancybox {
width: 600px;
padding-left: 30px;
padding-right: 30px;
padding-bottom: 20px;
padding-top: 30px;
 }

#melding{ 
text-decoration:none;
}
#popup{
background-color:#444;
} 
```

无论我尝试或做什么，它都会返回相同大小的正方形而没有任何填充。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:36:37.097

尝试这个：

```
$(document).ready(function() {
    $("#popup").fancybox({
        'padding' : 30,
        'width' : 600,
    }).trigger('click');
}); 
```

以下是更多示例： http: [//fancybox.net/blog](http://fancybox.net/blog)

**编辑：** 如果您在fancybox 中加载了iframe，则上述解决方案有效。在您的情况下，您需要为#melding 设置宽度和填充：

```
#melding{ 
   text-decoration:none;
   width: 600px;
   padding: 30px 30px 20px 30px;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:12:53.407

```
...except I'm not able to style the pop-up box. 
It seem like it will not pick up my css. 
```

好吧，你知道了 fancybox 如何处理内容（你想在 fancybox 中显示`inline`的隐藏内容）：`<div>`

首先，您`id="melding"`使用以下 html 来定位容器：

```
<a id="popup" href="#melding"></a> 
```

当您打开fancybox 时，它**会**`<div id="melding">...</div>`从文档中的原始位置移动到fancybox。而是留下一个临时*占位符*，以便内容可以返回到关闭fancybox时的位置。

 ***...所以这就是您的 ( `inline`) 内容在打开 fancybox**之前的样子：**

```
<div style="display: none;">
 <div class="fancybox">
  <div id="melding"><br />
   <br />
   <h3>Velkommen til min nye hjemmeside.</h3>
   <br />
   <p>Testing - Testing. </p>
  </div>
 </div>
</div> 
```

....这就是你打开fancybox（v2.1.2）**后的样子**

```
<div style="display: none;">
 <div class="fancybox">
  <div class="fancybox-placeholder" style="display: none; "></div>
 </div>
</div> 
```

....当然`<div id="melding">...</div>`是在fancybox里面。

给你一个问题：你能看到这个问题吗？答案：您正在将您的样式应用于选择器`.fancybox`

```
.fancybox {
  width: 600px;
  padding-left: 30px;
  padding-right: 30px;
  padding-bottom: 20px;
  padding-top: 30px;
} 
```

...但是那个选择器从来没有进入fancybox，所以这就是为什么你不能设置它的样式。

您的选择：

**一**：设置**@bbosternak**`#melding`正确指出的样式

 **...或者

**二**：改变你的html结构

```
<div id="melding" style="display: none;">
 <div class="fancybox">
  <h3>Velkommen til min nye hjemmeside.</h3><br />
  <p>Testing - Testing. </p>
 </div>
</div> 
```

请注意，我将`id="melding"`移至`<div>``<div class="fancybox">`*****

# vba - 如何将一个工作表范围内的单元格数据复制到另一个工作表中的特定单元格？

> ID：13032636
> 
> 赞同：0
> 
> 时间：2012-10-23T14:23:32.777
> 
> 标签：vba, excel

我目前遇到的问题是尝试编写一个子程序，该子程序将从一个工作表中复制单元格，例如 A1:A10；到另一张具有特定单元格的工作表，如 A1、A2、B1、B2、B3、B5、C1、C2、C4、C5。问题是我无法读取工作表名称和范围值的当前子项。这是代码

```
'User will be able to copy cell data from one to another.
Public Sub CopyCell(ByVal pv_worksheet_source As Worksheet, _
                    ByVal pv_range_source_cells As Range, _
                    ByVal pv_worksheet_destination As Worksheet, _
                    ByVal pv_range_destination_cells As Range, _
                    ByRef pr_str_error_message As String)

'first the cells are compared for the data that is in them.
If pv_range_source_cells.Cells.Count <> pv_range_destination_cells.Cells.Count Then
     pr_str_error_message = pr_str_error_message & "The cell count " & pv_range_source_cells.Cells.Count & " and " & _
        pv_range_destination_cells.Cells.Count & " do not match. The cells of Initial Optics Input and Output cannot be copied!"
    Exit Sub
End If

Dim source_cells As Range
Dim i As Integer
Dim ArrOut() As String
Dim str_source_worksheet_name As String
Dim str_destination_worksheet_name As String

ArrOut() = Split(pv_range_destination_cells.Address, ",")

i = 0

For Each source_cells In pv_worksheet_source
    pv_worksheet_destination.Range(ArrOut(i)).Value = source_cells.Value
    i = i + 1
Next
End Sub 
```

如您所见，代码假设读取源和目标工作表名称，以及它们的单元格范围以进行复制。存在类型不匹配，而且我无法弄清楚如何在 VBA 中复制数据。这个 sub 必须以模块格式保存，因为它将在整个工作簿中为其他工作表调用。这是在源工作表上调用它的示例....

```
Private Sub CopyButton_Click()
'User gets data copied over to specific cells
   Dim str_error_message As String
    Call CopyCell(Sheet1, _
                  "A1:A10", _
                  Sheet2, _
                  "B1,B2,B3,C1,C2,C3,C4,D1,D2,D3", _
                  pr_str_error_message:=str_error_message)

End Sub 
```

这是我单击按钮时错误开始的地方。请帮忙，因为我已经处理这个问题好几天了！我真的很喜欢它！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:43:31.957

ArrOut 应该是一个数组，而不是一个字符串。

改变

```
 Dim ArrOut as String 
```

至

```
 Dim Arrout as Variant 
```

然后像这样设置数组：

```
 ArrOut = Split(pv_range_destination_cells, ",") 
```

然后调用“粘贴”

```
 For Each source_cells In pv_worksheet_source
       for i = lbound(arrout) to ubound(arrout)
          pv_worksheet_destination.Range(ArrOut(i)).Value = source_cells.Value
       next i
   Next 
```

编辑：您还在复制按钮单击中将 pv_destination_cells 设置为调用中的字符串，但将其声明为子范围内的范围。如果您要在示例中将其称为字符串，则应将其设置为原始子中的字符串，然后从数组声明中省略“.address”，正如我在上面的代码中所反映的那样

# php - SQLite 数据库已锁定，但仅适用于在命令行运行的 PHP 脚本插入

> ID：13032637
> 
> 赞同：3
> 
> 时间：2012-10-23T14:23:34.157
> 
> 标签：php, sqlite, command-line, locking

我有一个 PHP 脚本，它按所示顺序执行以下操作：

*   连接到 MySQL 数据库
*   检索单行数据
*   关闭 MySQL 数据库连接
*   连接到本地文件系统上的 SQLite 数据库
*   将数据行插入 SQLite 数据库
*   关闭 SQLite 数据库连接

我使用 PDO 作为 MySQL 和 SQLite 的工具。这是插入的代码：

```
$sqlite = new PDO('sqlite:activity.sqlite');
$sqlite->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

$lite = <<<LITE
INSERT INTO Transactions (Date,Transactions,ActiveMembers,Amount) 
VALUES
('$day',
'$trans',
'$active',
'$amount');
LITE;

try
{
    $sqlite->exec($lite);
}
catch (PDOException $e)
{
    die($e->getMessage());
} 
```

*（请原谅在查询中使用变量，而不是适当的准备语句；我删除了绑定参数以查看是否是问题所在）*

使用其他工具（Firefox 的 SQLite 管理器，Windows 的 SQLite 数据库浏览器），我能够访问数据库并写入它。

这个脚本是唯一触及这个特定数据库的东西。数据库文件的权限是`777`. 当脚本运行时，没有其他任何东西会打开它或其包含的目录。

运行脚本时（使用`php -f`），尝试插入 SQLite 数据库的部分会创建日志文件，大约需要 10-15 秒，然后返回错误`SQLSTATE[HY000]: General error: 5 database is locked`。

那么，我的问题是：

**从命令行运行 PHP 脚本是否会阻止与 SQLite 数据库的交互？如果是这样，是什么？如果不是，这里可能是什么问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:37:32.933

请务必清除与 SQLite 的连接，即在您的代码之后，设置

```
$sqlite = null; 
```

见[http://php.net/manual/en/pdo.connections.php](http://php.net/manual/en/pdo.connections.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-24T14:13:40.530

我遇到了同样的问题。在使用**fuser**命令并找到哪个进程创建了粘滞锁后，我知道了流氓：

```
[root]# fuser cms.db
cms.db:               4511
[root]# ps aux | grep 4511
nobody    4511  0.0  3.2  74560 25160 ?   S    Oct13   2:00 php-fpm
[root]# /etc/init.d/php-fpm restart 
```

**PHP-fpm**是有罪的，所以重新启动服务就可以了。那一定是我正在运行的 PHP 版本（5.4）中的一个错误，并且可能仍然存在。

# spring - Freemarker 模板 (FTL) 在 struts2 中不起作用

> ID：13032639
> 
> 赞同：0
> 
> 时间：2012-10-23T14:23:43.290
> 
> 标签：spring, struts2, web.xml

我正在使用 Struts2 和 ftl。我想使用 ftl 而不是 jsp，但是当我将 web.xml 中的欢迎文件定义为 login.ftl 时，它不起作用。它只是显示为文本。整个代码显示在浏览器中，但如果它是 jsp 则一切正常。

我只是在下面粘贴我的 web.xml。

```
<filter>
<filter-name>struts2</filter-name>
<filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
</filter>

<filter-mapping>
<filter-name>struts2</filter-name>
<url-pattern>*.action</url-pattern>
</filter-mapping>

<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>classpath:applicationContext.xml</param-value>
</context-param>

<listener>
<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<welcome-file-list>
<welcome-file>login.ftl</welcome-file>
</welcome-file-list> 
```

如何在 Struts2 中配置 ftl？如果我使用相同的页面作为操作的输出页面，它正在工作。我该如何解决这个问题？我的 web.xml 配置有问题吗？请帮我。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:01:39.957

也许这可以帮助你（web.xml 的摘录）：

```
<servlet>
  <servlet-name>freemarker</servlet-name>
  <servlet-class>com.thoughtequity.video.web.servlet.SiteFreemarkerServlet</servlet-class>

  <!-- FreemarkerServlet settings: -->
  <init-param>
    <param-name>TemplatePath</param-name>
    <param-value>/</param-value>
  </init-param>
  <init-param>
    <param-name>NoCache</param-name>
    <param-value>true</param-value>
  </init-param>
  <init-param>
    <param-name>ContentType</param-name>
    <param-value>text/html</param-value>
  </init-param>

  <!-- FreeMarker settings: -->
  <init-param>
    <param-name>template_update_delay</param-name>
    <param-value>0</param-value> <!-- 0 is for development only! Use higher value otherwise. -->
  </init-param>
  <init-param>
    <param-name>default_encoding</param-name>
    <param-value>UTF-8</param-value>
  </init-param>
  <init-param>
    <param-name>number_format</param-name>
    <param-value>0.##########</param-value>
  </init-param>

  <load-on-startup>1</load-on-startup>
</servlet>

<!-- Action Servlet Mapping -->
<servlet-mapping>
    <servlet-name>action</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>action</servlet-name>
    <url-pattern>/te.js</url-pattern>
</servlet-mapping>    

<!-- Map *.ftl files to Freemarker-->
<servlet-mapping>
    <servlet-name>freemarker</servlet-name>
    <url-pattern>*.ftl</url-pattern>
</servlet-mapping>    

<!-- The Welcome File List -->
<welcome-file-list>
    <welcome-file>index.vm</welcome-file>
</welcome-file-list> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:45:13.023

需要处理 FreeMarker 模板文件以生成显示数据的文本页面。你不能只是把它们放进去`welcome-file-list`。例如，在 Struts2 中，您可以重定向到您的操作并在那里使用您的模板。

另请阅读此[http://wiki.metawerx.net/wiki/HowToUseAServletAsYourMainWebPage](http://wiki.metawerx.net/wiki/HowToUseAServletAsYourMainWebPage)。

# android - java.net.SocketException：recvfrom 失败：ECONNRESET（对等方重置连接）通过 WIFI

> ID：13032641
> 
> 赞同：9
> 
> 时间：2012-10-23T14:24:00.507
> 
> 标签：android, web-services, wifi, httpclient, socketexception

当我发送带有请求的转换为字符串和欢迎文本的图像时。服务器长时间没有响应，并以 **java.net.SocketException: recvfrom failed: ECONNRESET (Connection reset by peer) 的形式响应我**

这只发生在 wifi 上。请为此提供任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:40:35.253

我建议您进行这些卫生检查以解决此问题

1.  打开您正在使用的浏览器并尝试复制 url（用作请求行）并将其粘贴到您的**MOBILE DEVICE**的浏览器中，如果您仍然收到相同的错误或可能**连接被拒绝**，这意味着您的 MOBILE 和您的 PC服务器运行不在同一个网络上。

# javascript - 检查本地存储值是否存在

> ID：13032644
> 
> 赞同：1
> 
> 时间：2012-10-23T14:24:05.687
> 
> 标签：javascript, sencha-touch, extjs, local-storage

> **可能重复：**
> [HTML5 localStorage：检查项目是否已设置](https://stackoverflow.com/questions/3262605/html5-localstorage-check-if-item-isset)

我正在使用 localStorage 开发 Sencha Touch 2 应用程序。

我像这样从本地存储中获取值：

```
var localStore = Ext.getStore('localStore');
localStore.getAt(0).data.name1 //get the value for key 'name1' 
```

但是在第一次访问时，本地存储是空的。如何检查密钥是否存在？当我做：

```
if(localStore.data.name1 === null) 
```

我得到：

```
Uncaught TypeError: Cannot read property 'name1' of undefined 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:30:34.857

请参阅此[jsFiddle](http://jsfiddle.net/mb9hj/1/)示例。localStore.getItem(名称)。注意 getItem 是一个函数。

```
var obj = {foo: 'bar'};

// set
localStorage.setItem('testObject', JSON.stringify(obj));

// get
var get = localStorage.getItem('testObject');

console.log(JSON.parse(get)); 
```

​ ​</p>

# vba - 创建 Excel 宏以一次删除多行

> ID：13032645
> 
> 赞同：1
> 
> 时间：2012-10-23T14:24:08.540
> 
> 标签：vba, excel

我在网上找到了一个代码，并想对其进行编辑。代码在 VBA 中，我希望宏代码删除多行而不是一行。这是代码：

```
Sub findDelete()
    Dim c As String
    Dim Rng As Range

    c = InputBox("FIND WHAT?")

    Set Rng = Nothing

    Set Rng = Range("A:A").Find(what:=c, _
        After:=Range("A1"), _
        LookIn:=xlFormulas, _
        lookat:=xlPart, _
        SearchOrder:=xlByRows, _
        SearchDirection:=xlNext, _
        MatchCase:=False)

    Rng.EntireRow.Delete shift:=xlUp
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T14:40:32.360

而不是使用查找，使用`Autofilter`和删除`VisibleCells`

```
Sub findDelete()

Dim c As String, Rng As Range, wks as Worksheet

c = InputBox("FIND WHAT?")

Set wks = Sheets(1) '-> change to suit your needs
Set Rng = wks.Range("A:A").Find(c, After:=Range("A1"), LookIn:=xlFormulas, _
                            lookat:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                            MatchCase:=False)

If Not Rng Is Nothing Then

    With wks

        .Range(.Range("A1"), .Range("A" & .Rows.Count).End(xlUp)).AutoFilter 1, c
        Set Rng = Intersect(.UsedRange, .UsedRange.Offset(1), .Range("A:A")).SpecialCells(xlCellTypeVisible)
        Rng.Offset(1).EntireRow.Delete

    End With

End If

End Sub 
```

**编辑**

要将 InputBox 替换为多个值以查找/删除，请执行以下操作：

```
Option Explicit

Sub FindAndDeleteValues()

Dim strValues() as String

strValues() = Split("these,are,my,values",",")

Dim i as Integer

For i = LBound(strValues()) to UBound(strValues())

    Dim c As String, Rng As Range, wks as Worksheet
    c = strValues(i)

    '.... then continue with code as above ...

Next

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:36:19.470

只需将其包裹在一个`While`循环中即可。

```
Sub findDelete()
    Dim c As String
    Dim Rng As Range
    c = InputBox("FIND WHAT?")
    Set Rng = Nothing
    Do While Not Range("A:A").Find(what:=c) Is Nothing
        Set Rng = Range("A:A").Find(what:=c, _
        After:=Range("A1"), _
        LookIn:=xlFormulas, _
        lookat:=xlPart, _
        SearchOrder:=xlByRows, _
        SearchDirection:=xlNext, _
        MatchCase:=False)
        Rng.EntireRow.Delete shift:=xlUp
    Loop
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:41:14.917

您已经有了删除行的代码`Rng.EntireRow.Delete shift:=xlUp`，您需要的是将范围设置为要删除的行的代码。像往常一样在 VBA 中，这可以通过多种方式完成：

```
'***** By using the Rng object
Set Rng = Rows("3:5")

Rng.EntireRow.Delete shift:=xlUp

Set Rng = Nothing

'***** Directly
Rows("3:5").EntireRow.Delete shift:=xlUp 
```

您的`Find`语句只找到第一次出现的`c`，这就是为什么它没有删除更多的一行。

# javascript - 如何在不使用 eval 的情况下完成此操作

> ID：13032649
> 
> 赞同：2
> 
> 时间：2012-10-23T14:24:18.747
> 
> 标签：javascript, node.js

*对不起标题，但我不知道如何解释。*

该函数接受一个 URI，例如：/foo/bar/1293。如果该对象存在，它将被存储在一个看起来像 {foo: { bar: { 1293: 'content...' }}} 的对象中。该函数遍历 URI 中的目录并检查路径是否未定义，同时使用稍后使用 eval() 调用的代码构建一个字符串。包含代码的字符串看起来像*delete memory["foo"]["bar"]["1293"]*

有没有其他方法可以做到这一点？也许将保存的内容存储在普通对象以外的东西中？

```
remove : function(uri) {
        if(uri == '/') {
            this.flush();
            return true;
        }        
        else {
            var parts = trimSlashes(uri).split('/'),
                memRef = memory,
                found = true,
                evalCode = 'delete memory';

            parts.forEach(function(dir, i) {
                if( memRef[dir] !== undefined ) {
                    memRef = memRef[dir];
                    evalCode += '["'+dir+'"]';
                }
                else {
                    found = false;
                    return false;    
                }

                if(i == (parts.length - 1)) {
                    try {
                        eval( evalCode ); 
                    } catch(e) {
                        console.log(e);
                        found = false;
                    }
                }
            });

            return found;
        }        
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:45:10.890

这里不需要评估。只需像您一样向下钻取并在最后删除该属性：

```
parts.forEach(function(dir, i) {
    if( memRef[dir] !== undefined ) {
        if(i == (parts.length - 1)) {
            // delete it on the last iteration
            delete memRef[dir];
        } else {
            // drill down
            memRef = memRef[dir];
        }
    } else {
        found = false;
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:47:36.680

您只需要一个辅助函数，它接受一个`Array`和一个对象并执行以下操作：

```
function delete_helper(obj, path) {
  for(var i = 0, l=path.length-1; i<l; i++) {
    obj = obj[path[i]];
  }
  delete obj[path.length-1];
} 
```

而不是建立一个代码字符串，将名称附加到 a`Array`然后调用它而不是`eval`. 此代码假定已完成对路径是否存在的检查，因为它们将在该用法中进行。

# sql - 了解sql查询

> ID：13032651
> 
> 赞同：3
> 
> 时间：2012-10-23T14:24:21.373
> 
> 标签：sql

具体来说，我想知道第一行末尾的尾随电子邮件的作用。这与 SELECT columnname 'AS' email 本质上是一样的吗？但是，只是缺少'AS'？

```
select distinct initcap(email1) email
from fin_jobs 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T14:25:25.560

是的，它只是一个别名。我相信 AS 是可选的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:25:41.257

它是一个别名 - 它为返回的列提供了一个名称。`AS`是可选的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:26:09.077

是的，以下查询是相同的：

```
select distinct initcap(email1) email
from fin_jobs

select distinct initcap(email1) as email
from fin_jobs

select distinct initcap(email1) as "email"
from fin_jobs

select distinct initcap(email1) "email"
from fin_jobs 
```

关键字`as`对于别名是可选的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T14:26:29.867

是的。

您无需`as`为别名输入关键字

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T14:27:23.720

与 AS 相同，AS 是可选的。

选择列表的 SQL-92 语法：

```
<select list> ::=
                <asterisk>
              | <select sublist> [ { <comma> <select sublist> }... ]

         <select sublist> ::=
                <derived column>
              | <qualifier> <period> <asterisk>

         <derived column> ::= <value expression> [ <as clause> ]

         <as clause> ::= [ AS ] <column name> 
```

SQL-92 规范的第 7.9 节。

# z3 - z3：将公式转换为 dnf

> ID：13032652
> 
> 赞同：1
> 
> 时间：2012-10-23T14:24:24.167
> 
> 标签：z3

Z3 python中是否有内置方法将公式转换为DNF？我会想象应用一些策略或策略来做到这一点。

另外，我如何“创建”一个表达式，例如，如果我有变量

`op=Or, arg1=True, arg2=False`

我想使用 op,arg1,arg2 创建表达式 Or(True,False)。我可以做类似的事情

```
if op.name == 'or':   Or(arg1,arg2)   
elif op.name == 'and':  And(arg1,arg2)
... 
```

但有更好的方法吗？

另外，我记得在 Z3 中有一个文件列出了排序代码，例如 2L 是 Z3_INT_SORT，它的名称是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:13:04.953

请参阅此答案以了解如何转换为 DNF：[如何将公式转换为析取范式？](https://stackoverflow.com/questions/11599230/how-to-convert-a-formula-to-disjunctive-normal-form)

作为相关说明，请参阅有关如何转换为 CNF 的答案：[将公式转换为 CNF](https://stackoverflow.com/questions/10992531/convert-formula-to-cnf)

这些示例采用 SMT 格式，在 z3py 中：[http: //rise4fun.com/Z3Py/ik4](http://rise4fun.com/Z3Py/ik4)

# c - 线程取消问题

> ID：13032659
> 
> 赞同：1
> 
> 时间：2012-10-23T14:24:36.753
> 
> 标签：c, pthreads

我面临一个与 pthread_cancel 相关的问题。请看下面的代码：

```
void* func(void *arg)
{
    while(1)
    {
        sleep(2);
    }
}

#include<stdlib.h>
#include <stdio.h>
#include <pthread.h>

int main()
{
    void *status;
    pthread_t thr_Var;
    pthread_setcancelstate(PTHREAD_CANCEL_DISABLE,NULL);
    pthread_create(&thr_Var,NULL,func,NULL);
    pthread_cancel(thr_Var);
    pthread_join(thr_Var,&status);   
    return 0;
} 
```

我的疑问是，即使我禁用了取消状态，pthread_cancel 仍在工作并且线程正在终止。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T14:26:59.737

`pthread_setcancelstate`设置调用线程的可取消类型，即您的情况下的主线程。因此，如果您想让新创建的线程不可取消，您应该从该线程的上下文中调用该函数。

见 man 3 pthread_setcancelstate

**请注意**，虽然 Linux pthreads 实现允许 NULL`oldstate`指针，但是 POSIX 并没有指定，因此最好为`oldsate`.

# java - 如何判断提交的表单是否有多个同名元素

> ID：13032662
> 
> 赞同：0
> 
> 时间：2012-10-23T14:24:43.930
> 
> 标签：java, jsp, servlets, httprequest

我从中收到请求的 JSP 可能有多个具有相同名称的表单元素（具有相同名称的复选框组）。当我们调用`request.getParameterValues()`而不是 时`request.getParameter()`，我们将得到一个与同名表单元素对应的值数组。如何确定调用哪个方法。

如何从 Servlet 端确定提交的表单具有相同名称的元素以及哪个参数名称对应于该表单元素。

确定哪个元素是多个具有相同名称的元素对我来说很重要。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:27:22.380

总是打电话`request.getParameterValues()`。它返回值数组。如果数组仅包含一个元素，则该名称只有一个字段。

# algorithm - 如何使这个算法稳定

> ID：13032663
> 
> 赞同：0
> 
> 时间：2012-10-23T14:24:46.593
> 
> 标签：algorithm, matlab, numerical

我必须计算这个公式的迭代版本：

```
f(i)=integral ( x^i/(4x+1) ) from 0 to 1 
```

使用这些公式：

```
f(0)=ln(5)/4;
f(i)=1/(i+1) - 4*f(i+1); 
```

我尝试了以下方法：我计算从 0 到 1 的积分 ( x^100/(4x+1) )，并存储结果。然后我从这个结果开始计算 f(i)，使用迭代版本。
但我得到错误的结果，因为错误太大。
该错误仅适用于 i<=25。
我想知道，为什么这个算法不稳定，以及是否有解决方案来计算从 i=100 或更高开始的结果。

这是代码：

```
function y=Integral(i,max)

if i==0
    y=1/4*log(5);
elseif i==max
    y=0.0;
else
    y=1/(i+1)-4*Integral(i+1,max);
end

end 
```

使用这个函数，我永远不会得到一个精确的值，因为累积的误差太高。如果我使用 i=15 和 max=18，我会得到一个接近的值（但甚至高 3 或 4 倍，所以不可接受）。我需要稳定的这个公式的版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:31:04.597

这个递归函数应该可以完成这项工作，而无需在到达 100 的过程中存储部分结果：

```
function y = Integral(i)

if i==0
    y=log(5)/4;
else
    y = (-Integral(i-1) + 1/i)/4;
end
end 
```

要使递归起作用，您需要从 i=100 开始，然后使用 i-1 调用该函数，直到它达到 i=0。

Integral(100) 将给出最终答案，而无需存储部分结果。

# sql - 如果条件1 为真，则将一个表与一个表连接，如果条件1 为假，则与另一个表连接？

> ID：13032666
> 
> 赞同：4
> 
> 时间：2012-10-23T14:25:03.533
> 
> 标签：sql, postgresql, join, postgresql-8.4, postgresql-9.0

我有以下表格：

```
User_Group

id  group_id  group_type
------------------------
1   100       A
1   100       B
2   101       B
2   102       A

Group_A

id   name
---------
100  A
101  B
102  C

Group_B

id   name
---------
100  D
101  E
102  F 
```

我想要所有用户的组名（使用`array.agg()`）。如果用户的组类型 = A，我们必须从组 A 中获取组名，如果用户的组类型 = B，我们必须从组 B 中获取组名。结果应该是：

```
userid  groups
--------------
1       A,D
2       E,C 
```

我为此创建了一个[小提琴](http://sqlfiddle.com/#!11/a082f/1)，并给出了一个使用 2 个单独查询联合的解决方案。可以在没有联合的情况下完成吗，我可以在其中决定从哪个表中选择组名，只需加入`user_groups`,`group_A`和`group_B`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T14:30:02.700

```
select ug.id, array_agg(
    case ug.group_type 
        when 'A' then g_a.name 
        when 'B' then g_b.name 
        else 'N/A' 
    end)
from user_groups ug
left outer join group_A g_a on ug.group_id = g_a.id
left outer join group_B g_b on ug.group_id = g_b.id
group by ug.id 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!11/a082f/17)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T14:39:19.390

你可以在没有联合的情况下使用左连接来做到这一点（我建议无论如何都使用显式连接，因为隐式连接已经过时 20 年了[Aaron Bertrand 写了一篇很好的博客来解释为什么](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-old-style-joins)）。Group_Type 可以成为连接条件，这意味着只有在找到正确的组类型时才连接表：

```
SELECT  ug.ID, ARRAY_AGG(COALESCE(a.Name, b.Name))
FROM    User_Groups ug
        LEFT JOIN group_A a
            ON a.ID = ug.group_ID
            AND ug.Group_Type = 'A'
        LEFT JOIN group_B b
            ON b.ID = ug.group_ID
            AND ug.Group_Type = 'B'
WHERE   COALESCE(a.ID, b.ID) IS NOT NULL -- ENSURE AT LEAST ONE GROUP IS MATCHED
GROUP BY ug.ID; 
```

但是，我倾向于使用 UNION Still，但将其移动如下：

```
SELECT  ug.ID, ARRAY_AGG(Name)
FROM    User_Groups ug
        INNER JOIN
        (   SELECT  'A' AS GroupType, ID, Name
            FROM    Group_A
            UNION ALL
            SELECT  'B' AS GroupType, ID, Name
            FROM    Group_B
        ) G
            ON g.GroupType = ug.Group_Type
            AND g.ID = ug.Group_ID
GROUP BY ug.ID; 
```

[您添加了我的查询的小提琴](http://sqlfiddle.com/#!11/a082f/23)

# c# - 将不同类型的参数传递给 C# 接口上定义的函数

> ID：13032667
> 
> 赞同：4
> 
> 时间：2012-10-23T14:25:07.253
> 
> 标签：c#, design-patterns

我想将一组规则应用于业务对象的集合。这些是简单的规则，我不想使用任何现有的业务规则引擎。

我需要将不同的上下文传递给每个规则，因此理论上每个规则可能需要不同的参数。以下是我目前的做法。还有其他/更好的方法吗？

注意：我已经使用访问者模式进行了评估，但对于这种特定场景来说似乎付出了太多努力。实际规则并不比我在示例中的复杂得多。

```
interface IParamBase {}

interface IParam : IParamBase
{
    string MyProperty {get; set;}
}

class Param : IParam
{
    public string MyProperty {get; set;}
}

interface IRule
{
    void Setup(IParamBase param);
    void Apply(BusinessObject businessObject);
}

class Rule :IRule
{
    IParam _param;
    public void Apply(BusinessObject businessObject)
    {
        businessObject.AssignedFromRule = _param.MyProperty;
        Console.WriteLine(businessObject.AssignedFromRule);
    }

    public void Setup(IParamBase param)
    {
        _param = param as IParam;
    }
}

class BusinessObject
{
    public string AssignedFromRule {get; set;}
}

void Main()
{
    var rule = new Rule();
    var param = new Param();
    param.MyProperty = "my property";
    BusinessObject businessObject = new BusinessObject();
    rule.Setup(param);
    rule.Apply(businessObject);
} 
```

更新：我忘了在样本中添加我需要向下转换的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:41:10.733

您的代码实际上是访问者模式。如果业务对象有像 BusinessObject.Apply(BusinessRule rule) { rule.apply(this); 这样的方法会更清楚。};

它与完整实现的目的相同：您可以添加操作（业务规则），而无需扩展执行操作的对象（业务对象）。

您可能对使用 Composite 感兴趣，因此您可以将一组规则作为一个规则应用。您也可能有兴趣更明确地了解您在访问者实现中使用的类，但如果它适合您，那就去吧。

# c++ - 模板参数推导 - 推导 T 并使用 T&&

> ID：13032670
> 
> 赞同：2
> 
> 时间：2012-10-23T14:25:10.327
> 
> 标签：c++, templates, c++11

例如

```
template <typename T>
void function(T&& arg) 
```

有人可以详细解释一下函数签名是如何结束左值的 T& 和传入的右值的 T&& 的吗？我知道以某种方式（需要标准行） T -> T& 在左值的情况下和 T -> T 在重值的情况下，然后通过组合 & 和 && 它产生左值/右值引用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T14:29:21.457

该规则可在第 8.3.2p6 节中找到。

> 如果 typedef 、 type *template-parameter*或*decltype-specifier*表示的类型`TR` 是对 type 的引用`T`，则尝试创建类型“lvalue reference to *cv* `TR` ”会创建类型“lvalue reference to `T`”，而尝试创建类型“lvalue reference to cv”时创建类型“对*cv* `TR`的右值引用”创建类型`TR`。

或以表格形式：

```
TR   R

T&   &  -> T&  // lvalue reference to cv TR -> lvalue reference to T
T&   && -> T&  // rvalue reference to cv TR -> TR (lvalue reference to T)
T&&  &  -> T&  // lvalue reference to cv TR -> lvalue reference to T
T&&  && -> T&& // rvalue reference to cv TR -> TR (rvalue reference to T) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T14:36:31.797

这要归功于参考折叠规则。假设这`U`是一个非引用类型；然后：

```
 T = U             T & = U &       T && = U &&
If  T = U &  ,  then  T & = U &  and  T && = U &    .
    T = U &&          T & = U &       T && = U && 
```

因此，如果您的函数参数可以绑定到类型的左值引用`U`，则`T`必须推导出为`U &`才能`T &&`成为`U &`，这是唯一的选择，因为左值不能绑定到右值引用。另一方面，如果您的参数是 type 的右值`U`，则推导`T`出为`U`，并且您的参数可以绑定。`T &&``U &&`

关键是匹配的引用类型是`T &&`（而不是`T`！）。但是，由于`arg`它本身是一个命名变量，因此是一个左值，因此您必须使用它`std::forward<T>(arg)`来创建一个与调用您的函数的*表达式*相同的表达式。

# c# - 如何在后端获取 POST DATA

> ID：13032672
> 
> 赞同：0
> 
> 时间：2012-10-23T14:25:14.597
> 
> 标签：c#

我正在使用 AJAX 发布数据。在我的 Javascript 中，我生成了一些 JSON 数据并将其发布到我的后端。问题是如何在 c# web 表单中获取 POST JSON 数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:27:45.733

检查[Request.Form](http://msdn.microsoft.com/en-us/library/ms525985%28v=vs.90%29.aspx)集合。这使用 POST 方法检索发布到 HTTP 请求正文的表单元素的值。

如果它是一个 ASP.NET MVC 项目，MVC 可以与您的输入 JSON 数据进行模型绑定，以便您将发布的数据作为您的视图模型对象的属性。

# c# - 将每个 DataTable 列存储在字符串 var 中

> ID：13032675
> 
> 赞同：0
> 
> 时间：2012-10-23T14:25:22.443
> 
> 标签：c#

我想将每个数据表列存储在一个字符串变量中，以便我可以将所有这些参数传递给我的存储过程。这将针对 DataTable 中的每一行进行

```
DataTable dtOutput;
dtOutput= Generix.getFeedData(1,ref Connection);
foreach (DataRow drOutput in dtOutput.Rows)
{
    Console.Write("IST: ");
    foreach (DataColumn dcOutput in dtOutput.Columns)
    {
        Console.Write(Convert.ToString(drOutput[dcOutput]) + "\t");
    }
    Console.WriteLine();
} 
```

上面的代码应该打印每一列和一个`"\t"`作为分隔符和新行的新行。我的数据表包含 4 列

我的 DataTable 以以下方式打印：

```
ATM         Message

ABC001      Hello
ABC002      SAGAR 
```

现在我想通过以下方式：

```
string sAtm;// Should Print ABC001
string sMsg;//Should Print Hello 
```

对于下一行的值`sAtm`将是`ABC002`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:36:02.017

对于它的价值，您可以使用 Linq 将所有参数作为字符串。

挑选你需要的东西：

```
var allAsString = table.AsEnumerable()
    .Select((r, ri) => new
    {
        Row = r,
        RowNumber = ri,
        Fields = r.ItemArray.Select((f, i) => new 
        {
            Col = table.Columns[i],
            FieldText = string.Format("{0}", f)
        })
    }); 
```

因此，例如，如果您想要迭代所有行并获取特定字段：

```
foreach (var rowInfo in allAsString)
{
    string sAtm = rowInfo.Fields.First(f => f.Col.ColumnName == "ATM").FieldText;
    string sMsg = rowInfo.Fields.First(f => f.Col.ColumnName == "Message").FieldText; 
} 
```

记得添加`using system.Linq;`。

* * *

**编辑**：如果您想将整个 DataTable 保存在一个字符串中：

```
String strTable = String.Join(
        Environment.NewLine, 
        table.AsEnumerable().Select(r => String.Join("\t", r.ItemArray))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:41:47.317

使用`StringBuilder`：

```
StringBuilder sb = new StringBuilder();
DataTable dtOutput = Generix.getFeedData(1,ref Connection);

foreach (DataRow drOutput in dtOutput.Rows)
{
    sb.Append("IST: ");
    foreach (DataColumn dcOutput in dtOutput.Columns)
    {
        sb.Append(Convert.ToString(drOutput[dcOutput]) + "\t");
    }
    sb.AppendLine();
} 
```

然后您的数据将被存储，`sb`因此只需在传递给您的存储过程时转换为字符串`sb.ToString()`。

# vbscript - 使用 VBS 在 MSWord 表格上方添加文本

> ID：13032677
> 
> 赞同：0
> 
> 时间：2012-10-23T14:25:26.303
> 
> 标签：vbscript, ms-word, word-2010

我正在使用 VBS 在 Outlook 中创建签名以推送给我们的用户。签名中有表格，因此我可以将徽标/用户信息与徽标顶部的标准文本并排放置。（原始表格代码在这里找到：[http](http://www.vbforums.com/showthread.php?526706-resolved-question-with-tables-in-vbscript-for-AD-signature) ://www.vbforums.com/showthread.php?526706-resolved-question-with-tables-in-vbscript-for-AD-signature ）

下面是写入 doc 文件的代码片段。该代码成功地创建了两个列，并将我想要的任何信息放入其中。有没有办法在开始创建/编辑表格之前将文本添加到 doc 文件的顶部？

```
Set objWord = CreateObject("Word.Application")
objWord.Visible = True
Set objDoc = objWord.Documents.Add()
Set objSelection = objWord.Selection
objSelection.Style = "No Spacing"
Set objRange = objDoc.Range()
Set objEmailOptions = objWord.EmailOptions
Set objSignatureObject = objEmailOptions.EmailSignature
Set objSignatureEntries = objSignatureObject.EmailSignatureEntries

'I want to add text here above the two tables below.  Not sure how to do it.

'Create Tables
objDoc.Tables.Add objRange, 1, 2
Set objTable = objDoc.Tables(1)

'** Logo table **
objTable.Cell(1, 1).select
'Put Logo information here

'** User table **
objTable.Cell(1, 2).select
'Put User information here

objSelection.EndKey 6  'Command to end the above tables 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:33:47.893

我通过使用此处找到的脚本偶然发现了这个问题：http: [//blogs.technet.com/b/heyscriptingguy/archive/2006/06/09/how-can-i-add-multiple-tables-to-a -word-document.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2006/06/09/how-can-i-add-multiple-tables-to-a-word-document.aspx)

```
'Create Tables
Set objRange = objSelection.Range 'Adding this line fixed the problem
objDoc.Tables.Add objRange, 1, 2
Set objTable = objDoc.Tables(1) 
```

# python - Python循环控制器继续无法正常工作

> ID：13032683
> 
> 赞同：0
> 
> 时间：2012-10-23T14:25:36.080
> 
> 标签：python

据我所知，“继续”将跳回循环的顶部。但就我而言，它并没有跳回来，继续不喜欢我:(

```
for cases in files:
  if ('python' in cases.split()):
    execute_python_scripts(cases.split())
    elif run_test_case(cases.split()):
      continue
    else:
      logger("I am here")
      break 
```

在我的情况下`run_test_case()`给出 1、2、3、4 等......但它总是先执行（1）并跳转到 else 部分。所以我收到了“我在这里”的信息。它不应该像这样工作。当我使用“继续”时，它应该跳转到 for 循环。

以下是`run_test_case()`：

```
def run_test_case(job):
  for x in job:
    num_of_cases = num_of_cases - 1
    test_type = x.split('/')
    logger(log_file,"Currently "+ x +"hai!!")
    if test_type[0] == 'volume':
      backdoor = test_type[1].split("_")
      if backdoor[0] == 'backdoor':
        return get_all_nas_logs()
      else:
        if perform_volume_operations(x,num_of_cases) == False:
          return False
        else:
      logger(log_file,"wrong ha!!") 
```

为什么它总是转到 else 部分，而不跳回 for 循环？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:29:25.700

在这里`elif run_test_case(cases.split()):`，您正在调用该`run_test_case`方法，该方法将运行您的代码来评估`elif`条件的结果。

如果该方法的结果评估为，则它仅进入由`elif`（在您的情况下为）分隔的块，否则它将跳转到 else 子句。`continue``True`

问题可能出在您的`run_test_case`代码中，它永远不会返回 True，因此您永远不会得到您期望的行为。

如果不确切知道您想要完成什么，很难说，但我会说您`return True`在该代码的末尾缺少 a，这意味着，如果一切都正确执行到最后，您希望它返回 True.. .但我只是在这里猜测，您需要考虑该方法应该做什么。

在 python 中，`if`or`elif`子句不仅针对`True`and`False`常量进行评估，而且更普遍地针对 True-like 和 False-like 值进行评估。`None`，例如，是一个类似假的值，一个非空字符串是一个类似真的值，等等。

从文档中检查被认为是真或假的值：

[http://docs.python.org/library/stdtypes.html](http://docs.python.org/library/stdtypes.html)

# python - 在 python(pylab) 中解析这个 csv 文件并将其转换为字典

> ID：13032684
> 
> 赞同：2
> 
> 时间：2012-10-23T14:25:36.803
> 
> 标签：python, parsing, csv, numpy, matplotlib

我有这个代码：

```
 data = np.genfromtxt('csv_data.csv', dtype=None, names=True)

 print data 
```

它导致以下输出

```
 [('westin,390,291,70,43,19,215,27,813',)
  ('ramada,136,67,53,30,24,149,49,310',)
  ('sutton,489,293,106,39,20,299,24,947',)
  ('loden,681,134,17,5,0,199,4,837',) ('hampton,241,166,26,5,1,159,21,439',)
  ('shangrila,332,45,20,8,2,325,8,407',) ('mariott,22,15,5,0,0,179,35,42',)
  ('pan_pacific,475,262,86,29,16,249,15,868',)
  ('sheraton,277,346,150,80,26,249,45,879',)
  ('westin_bayshore,390,291,70,43,19,199,27,813',)] 
```

它没有复制列标题：

```
 Hotel,excellent,verygood,average,poor,terrible,cheapest,rank,reviews 
```

从文件中。我想做的是将输出保存到python中的字典数据结构中。有没有办法将此输出转换为字典？

我可以编写一个函数来解析它，但我想知道 Python 中是否有内置函数。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:39:05.463

你没有给`delimiter`参数赋值。因此，`np.genfromtxt`使用默认值`None`并尝试使用空格分隔字段。

你需要使用

```
np.genfromtxt(your_file, dtype=None, delimiter=',', names=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:46:41.687

**简单版：**

```
d = {  item[0].split(',')[0] : item[0].split(',')[1:] for item in data  } 
```

返回 ：

```
{'sutton': ['489', '293', '106', '39', '20', '299', '24', '947'], 'hampton': ['241', '166', '26', '5', '1', '159', '21', '439'], 'westin_bayshore': ['390', '291', '70', '43', '19', '199', '27', '813'], 'sheraton': ['277', '346', '150', '80', '26', '249', '45', '879'], 'ramada': ['136', '67', '53', '30', '24', '149', '49', '310'], 'mariott': ['22', '15', '5', '0', '0', '179', '35', '42'], 'loden': ['681', '134', '17', '5', '0', '199', '4', "837'"], 'shangrila': ['332', '45', '20', '8', '2', '325', '8', '407'], 'pan_pacific': ['475', '262', '86', '29', '16', '249', '15', '868']} 
```

**更复杂（dict of dict）：**

```
d = {  item[0].split(',')[0] : { headers[i] : int( item[0].split(',')[i+1].strip("'") ) for i in range(len( item[0].split(',')[1:] ) )   }  for item in data  } 
```

返回 ：

```
{'sutton': {'poor': 39, 'cheapest': 299, 'average': 106, 'terrible': 20, 'rank': 24, 'reviews': 947, 'excellent': 489, 'verygood': 293}, 'hampton': {'poor': 5, 'cheapest': 159, 'average': 26, 'terrible': 1, 'rank': 21, 'reviews': 439, 'excellent': 241, 'verygood': 166}, 'westin_bayshore': {'poor': 43, 'cheapest': 199, 'average': 70, 'terrible': 19, 'rank': 27, 'reviews': 813, 'excellent': 390, 'verygood': 291}, 'sheraton': {'poor': 80, 'cheapest': 249, 'average': 150, 'terrible': 26, 'rank': 45, 'reviews': 879, 'excellent': 277, 'verygood': 346}, 'ramada': {'poor': 30, 'cheapest': 149, 'average': 53, 'terrible': 24, 'rank': 49, 'reviews': 310, 'excellent': 136, 'verygood': 67}, 'mariott': {'poor': 0, 'cheapest': 179, 'average': 5, 'terrible': 0, 'rank': 35, 'reviews': 42, 'excellent': 22, 'verygood': 15}, 'loden': {'poor': 5, 'cheapest': 199, 'average': 17, 'terrible': 0, 'rank': 4, 'reviews': 837, 'excellent': 681, 'verygood': 134}, 'shangrila': {'poor': 8, 'cheapest': 325, 'average': 20, 'terrible': 2, 'rank': 8, 'reviews': 407, 'excellent': 332, 'verygood': 45}, 'pan_pacific': {'poor': 29, 'cheapest': 249, 'average': 86, 'terrible': 16, 'rank': 15, 'reviews': 868, 'excellent': 475, 'verygood': 262}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:48:21.657

```
import csv 
f = open("csv_data",'r')
holder = csv.reader(f,delimiter = ',')
data_dict = {} 
headers = [] 
first_row = True   
for row in holder:
  if first_row:
    first_row = False
    for header in row:
      colname = str(header)
        headers.append(colname)
        data_dict[colname] = []
  else:
    colnum = 0
    for datapoint in row:
      data_dict[headers[colnum]].append(int(datapoint))
      colnum += 1 
```

因此，您可以拥有一个字典变量，其键是列标题（它们是 csv 文件的第一行）和与这些键关联的值作为列表（csv 文件中的剩余数据）。此外，标题是所有列标题的列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T17:00:56.590

`csv`使用模块自己处理文件。

下面获取该文件，并创建一个名为的字典`by_hotel`，其键是酒店名称，其值是字段名->原始行的值的字典（注意它还包括酒店名称，但无论如何......）

```
import csv

with open('csv_data.csv') as fin:
    csvin = csv.DictReader(fin)
    headers = csvin.fieldnames
    by_hotel = {row['Hotel']: row for row in csvin}

print by_hotel['sutton']['excellent']
# 489 
```

如果您想要以原始顺序返回列表，那么您可以执行以下操作：

```
print [hotel['sutton'][fname] for fname in headers] 
```

注意：您可能希望将值转换为整数以进行计算。

# c# - 泛型类可以产生相同的签名重载吗？

> ID：13032694
> 
> 赞同：4
> 
> 时间：2012-10-23T14:26:06.000
> 
> 标签：c#

> **可能重复：**
> [泛型方法和方法重载](https://stackoverflow.com/questions/3679562/generic-methods-and-method-overloading)

好的，我不小心撞到了这个……鉴于这种情况：

```
class Program {
    static void Main( string[ ] args ) {

        var obj = new gen<int>( );
        Console.Write( obj[ 1 ] );
        Console.ReadKey( );

    }
}

class gen<T> {

    public int this[ T i ] { get { return 2; } }

    public int this[ int i ] { get { return 1; } }

} 
```

它总是会打印 1。我本来希望编译器会抱怨，或者运行时会崩溃并烧毁 CPU，但是不，很高兴打印 '1'

当然，如果我对泛型参数使用任何其他类型，我可以选择返回。对于傻笑，我尝试使用 UInt 作为泛型类型参数，我可以区分调用，所以问题是：

1.  为什么 C# 不惊慌失措？Anders Hejlsberg 不应该感到原力受到干扰吗？

2.  如何限制某些类型的泛型参数？因为在这个 T 可以是除整数之外的任何东西（但 long 是可以的）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T14:31:11.297

我相信这是在 C# 4 规范（更好的函数成员）的第 7.5.3.2 节中指定的。

> *   否则，如果 M [P]具有比 M [Q 更具体的参数类型，则 M [P]比 MQ] [...]
>     *   类型参数不如非类型参数具体
>     *   [...]

所以在这里，带参数的成员没有带`T`参数的成员那么具体`int`。

尝试通过不像这样重载来设计出自己的出路。当然，索引器很难，但你总是可以提供方法来代替（或者也可能作为后备）。

编辑：请注意，如果您有*两个*都是类型参数的重载方法，编译器*会*抱怨：

```
public class Foo<T1, T2>
{
    public void Bar(T1 t1) {}
    public void Bar(T2 t2) {}
}

...

Foo<int, int> foo = new Foo<int, int>();
foo.Bar(10); // Error 
```

这两种方法都不是更具体的。

> 如何限制某些类型的泛型参数？因为在这个 T 可以是除整数之外的任何东西（但 long 是可以的）

这确实是一个完全独立的问题，但基本上你不能。您可以通过各种方式约束类型参数，但不能通过显式包含和排除类型。有关更多信息，请参阅[有关约束的 MSDN 页面](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-23T14:30:55.230

正如[Eric Lippert 所说](http://blogs.msdn.com/b/ericlippert/archive/2009/07/30/generics-are-not-templates.aspx)：

> The C# specification says that when you have a choice between calling ReallyDoIt(string) and ReallyDoIt(string) – that is, when the choice is between two methods that have identical signatures, but one gets that signature via generic substitution – then we pick the “自然”签名优于“替代”签名。

此过程也在 C# 规范 7.5.3.2（更好的函数成员）中描述：

如果参数类型序列 {P1, P2, ..., PN} 和 {Q1, Q2, ..., QN} 是等价的（即每个 Pi 具有到相应 Qi 的恒等式转换），则应用以下平局规则，为了确定更好的功能成员。

*   如果 MP 是非泛型方法而 MQ 是泛型方法，那么 MP 比 MQ 更好（正如 John 指出的那样，当你有泛型方法而不是泛型类型时这是真的）
*   ...
*   否则，如果 MP 比 MQ 具有更具体的参数类型，则 MP 优于 MQ。令 {R1, R2, ..., RN} 和 {S1, S2, ..., SN} 表示 MP 和 MQ 的未实例化和未扩展的参数类型。MP 的参数类型比 MQ 的更具体，如果对于每个参数，RX 不比 SX 更具体，并且，对于至少一个参数，RX 比 SX 更具体：

    *   **类型参数不如非类型参数特定**（这是您的情况 - 因此方法不是通用的，并且推断的参数类型等于非通用参数类型）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:33:25.460

如果调用可以同时适合这两个 =)，C# 编译器总是选择更具体而不是更通用的方法。这就是为什么它不会惊慌失措，他只是遵守他的规则。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-23T14:36:23.353

C# 编译器不会崩溃，因为这两种方法都是有效的，并且都可以调用。

这是一个返回“2”的示例：

```
Gen<Form> gen = new Gen<Form>();
textBox1.Text = gen[this].ToString(); 
```

其中“this”是一种形式。当然，使用索引访问器作为对象而不是数字......好吧，无论如何，它可以工作。

但是就像其他人所说的那样，编译器会更喜欢显式而不是隐式。

# linux - 如何删除具有特定名称的文件夹

> ID：13032701
> 
> 赞同：194
> 
> 时间：2012-10-23T14:26:23.213
> 
> 标签：linux, unix, rm

在 Linux 中，如何删除嵌套在文件夹层次结构深处的具有特定名称的文件夹？

以下路径位于文件夹下，我想删除所有名为`a`.

```
1/2/3/a
1/2/3/b
10/20/30/a
10/20/30/b
100/200/300/a
100/200/300/b 
```

我应该从父文件夹中使用什么 Linux 命令？

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2012-10-23T14:29:25.433

如果目标目录为空，使用find，只过滤目录，按名称过滤，执行rmdir：

```
find . -type d -name a -exec rmdir {} \; 
```

如果要递归删除其内容，请替换`-exec rmdir {} \;`为`-delete`或`-prune -exec rm -rf {} \;`。其他答案包括有关这些版本的详细信息，也应归功于它们。

* * *

## 回答 #2

> 赞同：207
> 
> 时间：2012-10-23T14:28:31.400

使用 find for name "a" 并执行 rm 删除那些根据您的意愿命名的，如下：

```
find . -name a -exec rm -rf {} \; 
```

首先使用 ls 进行测试以列出：

```
find . -name a -exec ls {} \; 
```

为确保这只删除目录而不是普通文件，请使用“-type d”参数（如评论中所建议）：

```
find . -name a -type d -exec rm -rf {} \; 
```

“{}”是对找到的每个文件“a”的替换 - 通过替换对每个文件执行 exec 命令。

* * *

## 回答 #3

> 赞同：79
> 
> 时间：2014-10-16T16:54:58.307

这也有效 - 它将删除所有名为“a”的文件夹及其内容：

```
rm -rf `find . -type d -name a` 
```

* * *

## 回答 #4

> 赞同：50
> 
> 时间：2018-10-03T16:08:19.383

我最终在这里希望删除我的`node_modules`文件夹，然后再使用`rsync`. 一个关键要求是`node_modules`文件夹可以嵌套，因此您需要该`-prune`选项。

首先，我运行它以直观地验证要删除的文件夹：

```
find . -type d -name node_modules -prune 
```

然后我运行它来删除它们：

```
find . -type d -name node_modules -prune -exec rm -rf {} \; 
```

感谢开心果

* * *

## 回答 #5

> 赞同：36
> 
> 时间：2016-12-03T08:01:43.143

要删除所有名为 的目录`foo`，请运行：

```
find -type d -name foo -a -prune -exec rm -rf {} \; 
```

其他答案缺少一个重要的东西：`-prune`选项。如果没有`-prune`，GNU find 将删除具有匹配名称的目录，然后尝试递归到它以查找更多匹配的目录。该`-prune`选项告诉它不要递归到符合条件的目录。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2019-10-30T17:32:56.320

这个命令对我有用。它递归地完成它的工作

```
find . -name "node_modules" -type d -prune -exec rm -rf '{}' + 
```

. - 当前文件夹

“node_modules” - 文件夹名称

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2012-10-23T14:35:13.157

```
find ./ -name "FOLDERNAME" | xargs rm -Rf 
```

应该做的伎俩。警告，如果您不小心将一个`.`或`/`注入到`xargs rm -Rf`您的整个计算机中，将被删除而无法取回它，需要重新安装操作系统。

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2019-08-20T15:40:55.553

结合多个答案，这是一个适用于 Linux 和 MacOS 的命令

```
rm -rf $(find . -type d -name __pycache__) 
```

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2016-06-09T13:30:20.550

我有 100 多个文件，例如

```
log-12
log-123
log-34
.... 
```

以上答案对我不起作用

但以下命令帮助了我。

```
find . -name "log-*" -exec rm  -rf {} \; 
```

我给了它`-type`，`.`所以它会删除以开头的文件和文件夹`log-`

并`rm -rf`递归删除文件夹，即使它有文件。

如果你只想要文件夹

```
find -type d -name "log-*" -exec rm  -rf {} \; 
```

单独的文件

```
find -type f -name "log-*" -exec rm  -rf {} \; 
```

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2017-05-12T12:03:56.510

另一个：

```
"-exec rm -rf {} \;" can be replaced by "-delete"

find -type d -name __pycache__ -delete      # GNU find
find . -type d -name __pycache__ -delete    # POSIX find (e.g. Mac OS X) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-03-01T03:41:31.070

早期的评论对我不起作用，因为我在结构中的某个文件夹中的文件夹名称中寻找一个表达式

以下适用于结构如下的文件夹：

b/d/ab/cd/file 或 c/d/e/f/a/f/file

使用 rm-rf 前检查

```
find . -name *a* -type d -exec realpath {} \; 
```

递归删除包含内容的文件夹

```
find . -name *a* -type d -exec rm  -rf {} \; 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2017-11-06T12:25:33.643

查找路径/到/该/文件夹 -maxdepth 1 -name "my_*" -type d -delete

# android - Android 应用程序框架的基本 Java 包有哪些？

> ID：13032705
> 
> 赞同：0
> 
> 时间：2012-10-23T14:26:35.837
> 
> 标签：android

这主要是关于 Android 和 Java 的理论问题。我想知道 Android Application Framework 使用了哪些 Java 包？我可以猜到他们中的大多数。但我特别想知道应用程序框架使用的那些基本包。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:34:34.993

如果您参考[Android Package Index](https://developer.android.com/reference/packages.html)，您可以看到构成 Android 平台的包。

`java`来自标准 Java 的包以或开头`javax`，例如：

*   `java.text`
*   `java.util`
*   `java.util.concurrent`
*   `javax.net`
*   `javax.net.ssl`
*   `javax.security.auth`

还有比这更多的包，所以我不会全部列出，但请参阅[文档](https://developer.android.com/reference/packages.html)以查看完整列表。

# javascript - 使用 strophe.pubsub 插件为多个发布者配置 pubsub 节点或创建白名单

> ID：13032706
> 
> 赞同：0
> 
> 时间：2012-10-23T14:26:38.987
> 
> 标签：javascript, xmpp, strophe

如何使用 strophe.pubsub 插件为多个发布者或白名单配置节点，例如“pubsub#leaf_node_association_whitelist”变量？

我试图传入一个数组，但这不起作用。

```
options = {
   "pubsub#leaf_node_association_whitelist": array
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:56:07.010

我最终使用 Strophe 节生成器 $iq 手动创建了一个 iq 节。

# android - android布局大图

> ID：13032713
> 
> 赞同：0
> 
> 时间：2012-10-23T14:26:53.073
> 
> 标签：android, android-layout, scaling

我有一个大图像 myImage.png （其暗度为 1536 x 784）：

![图。1](../Images/5a49a2a41f8440eec5d93414d2b7b5ae.png)

我希望将此图像放置在布局的底部，并均匀缩放并适合宽度：

![图 2](../Images/41f9bd3d1160c73d1f908b9a2a031809.png)

布局是

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/myImage"
        android:adjustViewBounds="true"
        android:layout_alignParentBottom="true"
        android:scaleType="fitCenter" >
    </ImageView>

</RelativeLayout> 
```

我已经尝试了几十种,和的组合`layout_width`，但没有任何帮助：它总是如下所示：`layout_height``adjustViewBounds``scaleType`

![图 3](../Images/fa4d1b58cd057d317e380fd7c29b8f8e.png)

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:44:18.503

正如有人所说，使用 src 而不是背景：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/myImage"
        android:adjustViewBounds="true"
        android:layout_alignParentBottom="true"
        android:scaleType="fitCenter" >
    </ImageView>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:39:20.173

您正在使用 ImageView。ImageViews 使用 src 属性来指示要使用的图像并将 scaleType 应用于。

背景，顾名思义，只是一个背景属性，用于显示在整个*背景*事物上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:40:09.413

尝试这个：

```
<ImageView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/myImage"
    android:adjustViewBounds="true"
    android:layout_alignParentBottom="true"
    android:scaleType="fitcenter" >
</ImageView> 
```

# php - 查找字符串的所有匹配项，并返回匹配的行号

> ID：13032716
> 
> 赞同：1
> 
> 时间：2012-10-23T14:27:00.130
> 
> 标签：php

我有一个包含一些文本的字符串变量（如下所示）。如图所示，文本中有换行符。我想在文本中搜索给定的字符串，并返回每个行号的匹配数。例如，搜索“关键字”将在第 3 行返回 1 个匹配项，在第 5 行返回 2 个匹配项。

我尝试过使用 strstr()。它很好地找到了第一个匹配项，并给了我剩余的文本，所以我可以一次又一次地做，直到没有匹配项。问题是我不知道如何确定匹配发生在哪个行号上。

```
Hello,
This is some text.
And a keyword.
Some more text.
Another keyword! And another keyword.
Goodby. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:32:53.930

为什么不在换行符和循环上拆分文本，使用索引 + 1 作为行号：

```
$txtParts = explode("\n",$txt);
for ($i=0, $length = count($txtParts);$i<$length;$i++)
{
    $tmp = strstr($txtParts[$i],'keyword');
    if ($tmp)
    {
        echo 'Line '.($i +1).': '.$tmp;
    }
} 
```

经测试，正常工作。只是一个快速提示，因为您正在寻找文本中的匹配项（句子，大写和小写等......）也许`stristr`（不区分大小写）会更好？
一个带有`foreach`and的例子`stristr`：

```
$txtParts = explode("\n",$txt);
foreach ($txtParts as $number => $line)
{
    $tmp = stristr($line,'keyword');
    if ($tmp)
    {
        echo 'Line '.($number + 1).': '.$tmp;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:49:10.090

使用此代码，您可以将所有数据放在一个数组中（行号和位置号）

```
<?php
$string = "Hello,
This is some text.
And a keyword.
Some more text.
Another keyword! And another keyword.
Goodby.";

$expl = explode("\n", $string);

$linenumber = 1; // first linenumber
$allpos = array();
foreach ($expl as $str) {

    $i = 0;
    $toFind = "keyword";
    $start = 0;
    while($pos = strpos($str, $toFind, $start)) {
        //echo $toFind. " " . $pos;
        $start = $pos+1;
        $allpos[$linenumber][$i] = $pos;
        $i++; 
    }
    $linenumber++; // linenumber goes one up
}

foreach ($allpos as $linenumber => $position) {
    echo "Linenumber: " . $linenumber . "<br/>";

    foreach ($position as $pos) {
        echo "On position: " .$pos . "<br/>";
    }
    echo "<br/>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:01:35.777

Angelo 的答案肯定提供了更多功能，可能是最好的答案，但以下内容很简单，而且似乎有效。我将继续尝试所有解决方案。

```
function findMatches($text,$phrase)
{
    $list=array();
    $lines=explode("\n", $text);
    foreach($lines AS $line_number=>$line)
    {
        str_replace($phrase,$phrase,$line,$count);
        if($count)
        {
            $list[]='Found '.$count.' match(s) on line '.($line_number+1);
        }
    }
    return $list;
} 
```

# c# - 如何初始化一些测试而不是其他测试？

> ID：13032717
> 
> 赞同：2
> 
> 时间：2012-10-23T14:27:00.573
> 
> 标签：c#, unit-testing, mstest

使用`TestInitialize()`，我可以初始化`TestClass`. 但是，如果我只想初始化一些测试而不是其他测试，我该如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:28:12.637

将测试数据的非共享初始化移动到每个`[TestMethod]`方法。

每次测试都会调用一次初始化方法，因此只需将您不想为所有测试运行的代码移动到特定方法中即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:29:13.593

您可以通过将它们分成两个类来实现这一点。或者，如果它们都使用相同的方法和变量，则将它们放入从具有共享方法和数据的公共基类继承的子类中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:09:55.130

最好的方法是把你`Test Methods`分成不同的`Test Classes`. 但是，如果您想将它们全部合二为一，`Test Class`您可以为每个测试创建不同的初始化方法：

```
[TestClass]
public class TestClass
{
    [TestInitialize]
    public void Initialize()
    {
        switch (TestContext.TestName)
        {
            case "TestMethod1":
                this.InitializeTestMethod1();
                break;

            case "TestMethod2":
                this.InitializeTestMethod2();
                break;

            default:
                break;
        }
    }

    [TestMethod]
    public void TestMethod1()
    {
    }

    [TestMethod]
    public void TestMethod2()
    {
    }

    private void InitializeTestMethod1()
    {
        // Initialize TestMethod1
    }

    private void InitializeTestMethod2()
    {
        // Initialize TestMethod2
    }

    public TestContext TestContext { get; set; }
} 
```

# smalltalk - lambda 函数的 Ast 表示

> ID：13032718
> 
> 赞同：6
> 
> 时间：2012-10-23T14:27:04.733
> 
> 标签：smalltalk, abstract-syntax-tree, lambda, metamodel

我正在为 smalltalk 开发抽象语法树元模型，现在我在建模块时遇到了麻烦。它们是一种文字，但另一方面它们是行为实体，如方法。块是一种 lambda 函数，所以也许有人可以更好地使用它们。

我会感谢任何建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T15:39:02.840

重构浏览器有一个非常好的 AST，看看它的实现。

关于您的问题：重构浏览器将块和方法的共享部分提取到一个名为`SequenceNode`. 序列节点对临时和语句序列进行建模。块节点然后包装序列节点，添加参数，并继承值节点的共享行为。方法节点包装了序列节点，并添加了方法名称、参数、pragma 等。

# asp.net-mvc - System.Web.Optimization 使某些函数的函数参数名称保持不变

> ID：13032721
> 
> 赞同：5
> 
> 时间：2012-10-23T14:27:15.093
> 
> 标签：asp.net-mvc, asp.net-optimization

使用 ScriptBundle 捆绑 ASP.NET

```
function StartController($scope, $location, $rootScope) {} 
```

被转化为

```
function StartController(n,t,i) {} 
```

但是，当我使用 AngularJs 时，为了使依赖注入仍然有效，缩小时不得更改参数名称。如何确保 $scope、$location 和 $rootScope 通过 ScriptBundle 保持这些名称的缩小，但允许在其他地方重命名参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T22:25:56.423

这不是您可以在内置包类型上更改的内容，因为我们目前没有公开任何您可以在底层转换类上调整的旋钮。实现这一点的最佳方法是编写自己的 IBundleTransform ，它会在适当的设置中进行缩小以不重命名变量。

即类似的东西：

```
public class CustomTransform : IBundleTransform {
    public void process(BundleContext context, BundleResponse response) {
         response.Content = MyMinifier.MinifyWithoutRename(response.Content);
    }
}

BundleTable.Bundles.Add(new Bundle("~/bundles/mybundle", new CustomTransform()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-12T22:17:09.087

这适用于`System.Web.Optimizations`nuget 包 1.1

[https://gist.github.com/zaus/7436601](https://gist.github.com/zaus/7436601)

（我在此过程中包含了一些其他概念）

`CodeSettings`本质上，您需要编写一个新的 BundleTransform/Minifier 来公开`NoAutoRenameCollection`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-13T14:23:27.733

Angular 提供了一种处理缩小的方法。如果您正在定义一个控制器，您可以将您的代码重写为：

```
YOUR_APP_MODULE.controller('CONTROLLER_NAME', ['$scope', '$location', '$rootScope', function($scope, $location, $rootScope){
    // DO STUFF
}]); 
```

在缩小时，这将变为：

```
YOUR_APP_MODULE.controller('CONTROLLER_NAME', ['$scope', '$location', '$rootScope', function(n, t, i){
}]); 
```

你也可以用其他角度组件做类似的事情。

# javascript - D3树垂直分离

> ID：13032722
> 
> 赞同：11
> 
> 时间：2012-10-23T14:27:15.703
> 
> 标签：javascript, tree, d3.js

我正在使用 D3 树布局，例如这个： http: [//mbostock.github.com/d3/talk/20111018/tree.html](http://mbostock.github.com/d3/talk/20111018/tree.html)

我已根据需要对其进行了修改，但遇到了问题。这个例子也有同样的问题，如果你打开了太多的节点，那么它们就会变得紧凑，使阅读和交互变得困难。我想在重新调整舞台大小以允许这样的间距时定义节点之间的最小垂直空间。

我尝试修改分离算法以使其工作：

```
.separation(function (a, b) {
    return (a.parent == b.parent ? 1 : 2) / a.depth;
}) 
```

那没有用。我还尝试计算哪个深度的孩子最多，然后告诉舞台的高度`children * spaceBetweenNodes`。这让我更接近，但仍然不准确。

```
depthCounts = [];
nodes.forEach(function(d, i) { 
    d.y = d.depth * 180;

    if(!depthCounts[d.depth])
        depthCounts[d.depth] = 0;

    if(d.children)
    {
        depthCounts[d.depth] += d.children.length;
    }
});

tree_resize(largest_depth(depthCounts) * spaceBetweenNodes); 
```

我也尝试`x`在下面计算`y`分离的方法中更改节点的值，但没有雪茄。我也会发布该更改，但我将其从我的代码中删除。

```
nodes.forEach(function(d, i) { 
    d.y = d.depth * 180;
}); 
```

如果您可以提出一种方法或知道一种方法，我可以在节点之间垂直实现最小间距，请发布。我将不胜感激。我可能错过了一些非常简单的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-01-28T10:53:07.667

截至 2016 年，我仅使用

```
tree.nodeSize([height, width]) 
```

[https://github.com/mbostock/d3/wiki/Tree-Layout#nodeSize](https://github.com/mbostock/d3/wiki/Tree-Layout#nodeSize)

API 参考有点差，但工作起来很简单。请务必在之后使用它，`tree.size([height, width])`否则您将再次覆盖您的值。

更多参考：[D3 Tree Layout Separation Between Nodes using NodeSize](https://stackoverflow.com/questions/17558649/d3-tree-layout-separation-between-nodes-using-nodesize)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T08:10:18.487

在 Google Groups 上的一位用户的帮助下，我能够解决这个问题。我找不到帖子。该解决方案要求您在一处修改 D3.js，不建议这样做，但这是我能找到的唯一解决此问题的方法。

从行`5724`或此方法开始：`d3_layout_treeVisitAfter`

**改变：**

```
d3_layout_treeVisitAfter(root, function(node) {
    node.x = (node.x - x0) / (x1 - x0) * size[0];
    node.y = node.depth / y1 * size[1];
    delete node._tree;
}); 
```

**至：**

```
d3_layout_treeVisitAfter(root, function(node) {
    // make sure size is null, we will make it null when we create the tree
    if(size === undefined || size == null) 
    { 
        node.x = (node.x - x0) * elementsize[0]; 
        node.y = node.depth * elementsize[1]; 
    } 
    else 
    { 
        node.x = (node.x - x0) / (x1 - x0) * size[0];
        node.y = node.depth / y1 * size[1]; 
    } 
    delete node._tree;
}); 
```

下面添加一个名为：的新变量`elementsize`，并将其默认`[ 1, 1 ]`为第 5731 行

```
var hierarchy = d3.layout.hierarchy().sort(null).value(null)
    , separation = d3_layout_treeSeparation
    , elementsize = [ 1, 1 ] // Right here
    , size = [ 1, 1 ]; 
```

下面有一个方法叫做`tree.size = function(x)`. 在该定义下方添加以下内容：

```
tree.elementsize = function(x) {
    if (!arguments.length) return elementsize;
    elementsize = x;
    return tree;
}; 
```

最后，当您创建树时，您可以更改`elementsize`类似的内容

```
var tree = d3.layout.tree()
             .size(null)
             .elementsize(50, 240); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-12T10:34:50.667

我知道我不应该回复其他答案，但我没有足够的声誉来添加评论。

无论如何，我只是想为使用最新 d3.v3.js 文件的人更新它。（我认为这是因为新版本，因为接受的答案中的行引用对我来说是错误的。）

您正在编辑的 d3.layout.tree 函数位于第 6236 行和第 6345 行之间。d3_layout_treeVisitAfter 从第 6318 行开始。hierarchy 变量在第 6237 行声明。关于 tree.elementsize 的部分仍然存在 - 我把它放在第 6343 行。

最后（我认为这是一个错误）：当您创建树时，将尺寸放在方括号内，就像您通常对“大小”所做的那样。所以：

```
var tree = d3.layout.tree()
         .size(null)
         .elementsize([50, 240]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-01T04:42:04.833

您建议的原始修复将起作用，您只需确保在将所有内容添加到画布后执行此操作。d3 会在您每次进入、退出、追加等时重新计算布局。完成所有这些后，您就可以使用 dy 来修复深度。

```
nodes.forEach(function(d) { d.y = d.depth * fixdepth}); 
```

# c# - UTF8Encoding 字符串到 byte[] 转换的意外行为

> ID：13032726
> 
> 赞同：1
> 
> 时间：2012-10-23T14:27:39.010
> 
> 标签：c#, string, utf-8, bytearray, type-conversion

我有这段代码：

```
byte[] bytes = ...

// Here my bytes.Lenght is 181 (for example)

var str = UTF8Encoding.UTF8.GetString(bytes);
bytes = UTF8Encoding.UTF8.GetBytes(str);

// Here my bytes.Lenght is 189 
```

为什么？
如何正确将字符串转换为 byte[]？

编辑：一个例子

```
public class Person 
{
    public string Name { get; set; }
    public uint Age { get; set; }
}

...

Person p = new Person { Name = "Mary", Age = 24 };

string str;
byte[] b1, b2;

using (var stream = new MemoryStream())
{
    new BinaryFormatter().Serialize(stream, p);
    b1 = stream.ToArray();
    str = UTF8Encoding.UTF8.GetString(b1);
}

b2 = UTF8Encoding.UTF8.GetBytes(str); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:32:25.777

```
// Here my bytes.Lenght is 181 (for example)    
// Here my bytes.Lenght is 189 
```

这可能会发生。

> 如何正确将字符串转换为`byte[]`？

大小不同并不意味着转换无效。不过，最初的顺序可能是。

如果要保留大小，请使用 ASCII 编码。

* * *

扩展编辑后：

```
new BinaryFormatter().Serialize(stream, p);
b1 = stream.ToArray();
str = UTF8Encoding.UTF8.GetString(b1);
b2 = UTF8Encoding.UTF8.GetBytes(str); 
```

您假设 BinaryFormatter 将对字符串应用 UTF8 编码。
它可能没有。它将向流中添加额外的数据（标记和大小字段）。

所以你的 2 转换 ( `Serialize`and `GetString`) 只是不兼容。

除了大小不同之外，当您显示结果时，它可能会包含一些“奇怪”的字符。

* * *

### 第二次编辑：

> 当我反序列化新的字节数组（b2）时，它会引发异常

正确的。你真正需要的是`Convert.ToBase64String()`，不是`UTF8.GetString()`

Base64 字符串可以作为字符串存储和传输，然后再转换回来`byte[]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:36:18.330

如果要序列化任意`byte[]`字符串，请不要使用 UTF8 编码，请使用[Base64](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T14:37:22.850

不要尝试使用（或任何编码）将*二进制*数据转换为字符串 。`UTF8.GetString`使用`Convert.ToBase64String`and `Convert.FromBase64String`代替

# asp.net-mvc - 关于列表和对象

> ID：13032727
> 
> 赞同：0
> 
> 时间：2012-10-23T14:27:40.703
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

这有效：

```
data.Add(New Object() {activityDate, types("Aerobics - low"), types("Aerobics - high")}) 
```

但是，我需要第二个和第三个变量是数据库驱动的（来自以下示例中的列表）：

```
Dim var1 = New List(Of Object)
var1.Add(types("Aerobics - low"))
var1.Add(types("Aerobics - high"))
data.Add(New Object() {activityDate, var1.ToList}) 
```

这似乎不起作用。如何将我的对象放入另一个对象中？

**编辑：**

我也尝试过`data.Add(New Object() {activityDate, var1.ToArray})`，但这也不起作用。我只想将列表中的动态元素放入上述格式的对象中。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:33:00.830

尽量避免创建`List(Of Object)`，因为这可能会导致许多令人头疼的问题。相反，退后一步，想想你需要什么。您希望查看和使用哪些数据元素？然后创建一个定义满足您的解决方案的属性的类。

```
Public Class MyStuff
    Public Property ActivityDate() As DateTime
    Public Property Activities As List(Of Object)
End Class 
```

那么你就可以：

data.Add(new MyStuff() { ActivityDate = activityDate, 活动 = var1 }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:31:09.907

您应该能够像这样使用标准语法来制作匿名对象：

```
data.Add(New With { .activityDate = activityDate, .List = var1.ToList() }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:42:00.047

我相信我想通了。我是这样做的：

```
Dim var1 = New List(Of Object)
var1.Add(activityDate)
var1.Add(types("Aerobics - low"))
var1.Add(types("Aerobics - high"))
data.Add(var1.ToArray) 
```

# ruby-on-rails - Ruby 从 1.9.3-p194 升级/降级到 1.9.3-p286

> ID：13032734
> 
> 赞同：1
> 
> 时间：2012-10-23T14:27:49.200
> 
> 标签：ruby-on-rails, ruby, ruby-upgrade

我刚刚从 ruby​​ 升级`1.9.3-p194`到`1.9.3-p286`通过 rvm upgrade 命令和 gemset。现在，当我在我的 rails 应用程序上运行 rake rails upgrade 时，它​​会给我以下跟踪：

```
nosh@nosh-VirtualBox:~/Projects/icon$ rake rails update --trace
rake aborted!
cannot load such file -- ruby_debug.so
/home/nosh/.rvm/gems/ruby-1.9.3-p286/gems/ruby-debug-base19-0.11.26/lib/ruby-debug-base.rb:1:in `require'
/home/nosh/.rvm/gems/ruby-1.9.3-p286/gems/ruby-debug-base19-0.11.26/lib/ruby-debug-base.rb:1:in `<top (required)>'
/home/nosh/.rvm/gems/ruby-1.9.3-p286/gems/ruby-debug19-0.11.6/cli/ruby-debug.rb:5:in `require'
/home/nosh/.rvm/gems/ruby-1.9.3-p286/gems/ruby-debug19-0.11.6/cli/ruby-debug.rb:5:in `<top (required)>'
/home/nosh/.rvm/gems/ruby-1.9.3-p286/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
/home/nosh/.rvm/gems/ruby-1.9.3-p286/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
/home/nosh/.rvm/gems/ruby-1.9.3-p286/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `each'
/home/nosh/.rvm/gems/ruby-1.9.3-p286/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `block in require'
/home/nosh/.rvm/gems/ruby-1.9.3-p286/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `each'
/home/nosh/.rvm/gems/ruby-1.9.3-p286/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `require'
/home/nosh/.rvm/gems/ruby-1.9.3-p286/gems/bundler-1.2.1/lib/bundler.rb:128:in `require'
/home/nosh/Projects/icon/config/application.rb:7:in `<top (required)>'
/home/nosh/Projects/icon/Rakefile:5:in `require'
/home/nosh/Projects/icon/Rakefile:5:in `<top (required)>'
/home/nosh/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load'
/home/nosh/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load_rakefile'
/home/nosh/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/application.rb:501:in `raw_load_rakefile'
/home/nosh/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/application.rb:82:in `block in load_rakefile'
/home/nosh/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/nosh/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/application.rb:81:in `load_rakefile'
/home/nosh/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/application.rb:65:in `block in run'
/home/nosh/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/nosh/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/nosh/.rvm/gems/ruby-1.9.3-p286@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/home/nosh/.rvm/gems/ruby-1.9.3-p286@global/bin/rake:19:in `load'
/home/nosh/.rvm/gems/ruby-1.9.3-p286@global/bin/rake:19:in `<main>'
/home/nosh/.rvm/gems/ruby-1.9.3-p286/bin/ruby_noexec_wrapper:14:in `eval'
/home/nosh/.rvm/gems/ruby-1.9.3-p286/bin/ruby_noexec_wrapper:14:in `<main>' 
```

任何建议表示赞赏。如果它的 ruby​​ 版本与 ruby​​ debug 19 gem 冲突。那我应该如何降级回`1.9.3-p194`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T22:14:32.887

我想我只需要尝试一下；但允许升级的相同 rvm 命令也允许降级。所以下面的命令允许我降级到以前的版本：

```
rvm upgrade 1.9.3-p286 1.9.3-p194 
```

它也迁移了宝石。顺便说一句，我在降级后还发现我使用的 rake rails update 命令语法不正确。所以这是不正确的：

```
rake rails update --trace (incorrect) 
```

这是对的：

```
rake rails:update --trace (correct) 
```

再次升级后我没有收到错误，这意味着我可能使用了错误的语法。

# android - android HTTP post 多部分

> ID：13032736
> 
> 赞同：0
> 
> 时间：2012-10-23T14:27:51.747
> 
> 标签：android, html, http-post, multipart

您好，我有一个网站部分，描述如下：

```
<div id="insertA">
    <form class="MultiFile-intercepted" enctype="multipart/form-data"
        method="post" onsubmit="return checkAnomalyFields();"
        action="dodajN.html">
        <table style="border-weight: 0px">
            <tbody>
                <tr>
                <tr>
                    <td id="wybory"><select id="typ" onchange="typeSelected()" size="1"
                        name="typuId">
                    </td>
                    <td>
                </tr>
                <tr>
                    <td>Szerokość: <input id="szer" type="text" onchange="setMarker()"
                        value="" name="szer">
                        <div id="szerErr" class="err">Proszę podać szerokość na terenie
                            Polski (49-55).</div>
                    </td>
                    <td>Długość: <input id="dlug" type="text" onchange="setMarker()"
                        value="" name="dlug">
                        <div id="dlugErr" class="err">Proszę podać długość na terenie
                            Polski (14-25).</div> <input id="id" type="hidden" value=""
                        name="id">
                    </td>
                </tr> 
```

我想发出一个 HTTP POST 请求以从我的客户端发送数据并将其放入表单中。我这样做如下：

```
try {
    HttpClient client = new MyHttpClient(Send.this);  
    String postURL = "url";
    HttpPost post = new HttpPost(postURL); 
    //FileBody bin = new FileBody(file);
    MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);  
    //reqEntity.addPart("myFile", bin);
    reqEntity.addPart("typuId", new StringBody("1"));
    reqEntity.addPart("statusuId", new StringBody("2"));
    reqEntity.addPart("szer", new StringBody("52.321911"));
    reqEntity.addPart("dlug", new StringBody("19.464111000000003"));
    reqEntity.addPart("opis",  new StringBody("jakis opis"));

    post.setEntity(reqEntity);  
    HttpResponse response = client.execute(post);  
    HttpEntity resEntity = response.getEntity();  
    AlertDialog.Builder alert=new AlertDialog.Builder(Send.this);
    alert.setTitle("Niepoprawne dane").setMessage(EntityUtils.toString(resEntity)).setNeutralButton("OK", null).show();

    if (resEntity != null) {    
        Log.i("RESPONSE",EntityUtils.toString(resEntity));
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

问题是当我阅读响应时，我得到了我请求的站点的 HTML 代码，但没有成功代码或任何类似的东西。看起来我正在请求网站内容，但没有提交表单。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:31:54.860

您正在提交`.html`文件。通常，服务器未配置为将这些文件视为脚本，这意味着您提交的数据会被简单地忽略和转储。要处理表单提交，您必须提交到专门设计用于处理该提交的脚本或其他程序，例如 php 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:38:35.160

好的，澄清一下 Marc B 所说的：`action="dodajN.html"`几乎可以肯定是错误的。我从未见过可以让您执行此操作的 Web 服务器（当然，一切皆有可能）。它可能应该是`action="cgi-bin/something"`或类似的东西。

然而，它实际上并不那么重要，因为您的应用程序并没有使用该`action`子句，而是写入“url”，这更加错误。如果您能准确地告诉我们您真正要写入的网址，它可能会有所帮助。

但最终，您调试的方式是查看服务器日志并查看最后发生的情况。

作为一般规则，当我开发这样的东西时，我首先编写服务器端 cgi 脚本和一个网页来使用它。一旦我的 API 通过网页工作，我才开始尝试从 Android 应用程序调用 cgi 脚本。

我的调试过程包括： 1）读取服务器日志。2) 让我的 cgi 脚本编写自己的调试日志。3) 让我的 android 应用程序将响应代码和标头转储到 logcat。

# php - Tutis 登录：Foreach 不起作用

> ID：13032739
> 
> 赞同：0
> 
> 时间：2012-10-23T14:28:10.303
> 
> 标签：php, login, foreach, pdo

我开始使用[Tutis 登录](http://www.firedartstudios.com/labs/tutis-login)脚本。我做了一些更改，但以下给了我错误：

我想列出所有注册用户，但 Foreach 循环不起作用。

我在 member.class.php 中创建了一个新函数：

```
// Registered Users
public function rusers() 
{
    global $database;

    $notice = new notice;
    $users = $database->query('SELECT id, username, date FROM users');

    $return_form = 1;

    $user = "<table>"
          . "<tr>"
          . "<td>ID</td>"
          . "<td>UserName</td>"
          . "<td>Date</td>"
          . "</tr>";

    // Function in the database.class.php
    $result = $database->foreachloop($users); 

    foreach ($result as $row)
    {
        $user.= "<tr><td>".$row['id']."</td>";
        $user.= "<td>".$row['username']."</td><td>".$row['date']."</td></tr>";
    }
    $user.= "</table>"; 

    /* Combine Data */
    $data = "";

    /* Do we need the login form? */
    if ($return_form == 1) 
    {
        $data .= $user;
    }

    /* Return data */
    return $notice->report() . $data;
} 
```

并在 database.class.php 中添加了 foreachloop() 函数

```
public function foreachloop($result)
{
    return $this->statement->fetch(PDO::FETCH_ASSOC);
} 
```

但我收到以下长错误：

```
*Warning: Illegal string offset 'id' in C:\wamp\www\loginoop3\assets\member.class.php on line 996
Warning: Illegal string offset 'username' in C:\wamp\www\loginoop3\assets\member.class.php on line 997
Warning: Illegal string offset 'date' in C:\wamp\www\loginoop3\assets\member.class.php on line 997
Warning: Illegal string offset 'id' in C:\wamp\www\loginoop3\assets\member.class.php on line 996
Warning: Illegal string offset 'username' in C:\wamp\www\loginoop3\assets\member.class.php on line 997
Warning: Illegal string offset 'date' in C:\wamp\www\loginoop3\assets\member.class.php on line 997* 
```

输出是：

```
*ID UserName Date
t   t        t
2   2        2* 
```

这里的 2 数字表示用户 ID，“t”字母是“test”用户名，但只显示第一个字母......并且只显示一个用户，但有更多用户。

我不知道怎么了。有人有什么建议吗？

此登录使用 OOP PDO。我尝试通过 rowCount() 进行更改，因为它在 database.class.php 中有一个新函数，内容如下：

```
public function affected($result)
{
    return $this->statement->rowCount();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:47:59.810

所以 result 不是一个数组数组，它​​只是一个级别的深度。这就是为什么这不起作用：

```
foreach ($result as $row)
{
    $user.= "<tr><td>".$row['id']."</td>";
    $user.= "<td>".$row['username']."</td><td>".$row['date']."</td></tr>";
} 
```

`$result['username']`会工作得很好。你不需要`foreach`. 那有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:52:49.160

到user961627（来自tutis登录创建者的原始功能）：

member.class.php 中的函数：

```
/**
 * list_users
 *
 * Returns a list of users that are registerd
 */
public function list_users() {
    global $database;

    $users = $database->query('SELECT id, username, date FROM users', null, "fetchAll");

    $data = "<table>
<tr>
    <td>ID</td>
    <td>Username</td>
    <td>Registered</td>
</tr>";

    foreach ($users as $row) {
        $data.= "<tr><td>".$row['id']."</td>";
        $data.= "<td>".$row['username']."</td><td>".$row['date']."</td></tr>";
    }

    $data.= "</table>"; 

    /* Return data */
    return $data;
} 
```

使用以下命令调用它：

```
echo $member->list_users(); 
```

# python - 如何在 django 示例中获取 index.html？

> ID：13032741
> 
> 赞同：-1
> 
> 时间：2012-10-23T14:28:11.177
> 
> 标签：python, django

我有一个简单的 urls.py 文件：

```
 (r'^(.*.html)$','django.views.static.serve', {'document_root': ROOT + '/media/html/'}) 
```

如何获取 url: http:/myserver.com/ 的 index.html 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:30:20.030

试试这个`urls.py`

```
from django.views.generic.simple import direct_to_template

urlpatterns = patterns('',
    (r'^$', direct_to_template, {'template': 'index.html'}),     
) 
```

我假设你想要一个静态重定向到`index.html`. 所以这样做了。

如果要向其中添加动态内容，则必须在`views.py`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:52:39.277

在 Django 1.3+ 中，您还可以使用基于类的通用视图：

```
from django.views.generic.base import TemplateView

urlpatterns = patterns('',
    (r'^$', TemplateView.as_view(template_name='index.html')),
) 
```

# sql - 如何使用 SQL 检索存储在 ORACLE 11g 中的 BLOB 列中的文本？

> ID：13032742
> 
> 赞同：0
> 
> 时间：2012-10-23T14:28:16.480
> 
> 标签：sql, oracle11g, blob

我已压缩 json 文本存储在 Oracle 11g 的 BLOB 列中。

是否可以仅使用 SQL 检索它？

编辑：

AFAIK 使用 ZLIB 在 Linux OS 上压缩数据并使用`dbms_lob.loadfromfile`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:17:28.960

Oracle 不提供任何可以解压缩 ZLIB 压缩流的内置函数（尽管`utl_compress`使用非常非常相似的算法）。

您实际上需要加载将 ZLIB 压缩流解压缩到数据库中的[各种 Java 库](http://en.wikipedia.org/wiki/DEFLATE#Encoder_implementations)之一，编写一些代码来包装该库，然后从 SQL 调用该库。这不会是一个纯 SQL 实现。

如果您真的有野心，应该可以在纯 SQL 中实现 DEFLATE 算法，尽管编写（或调试或维护）SQL 可能会非常痛苦。

# llvm - 转换为 LLVM IR：如何创建虚拟寄存器而不是分配堆栈变量？

> ID：13032746
> 
> 赞同：1
> 
> 时间：2012-10-23T14:28:25.013
> 
> 标签：llvm

我正在将另一个 IR 转换为 llvm IR。

我的 IR 是这样的：

```
a = 1;
b = a;
a = a + 1; 
```

现在，我正在使用 alloca 在我的 IR 中创建变量（这里是“a”和“b”）。

但是，alloca 可能太重了，它会引入大量的加载存储指令。如果功能很大，这将是一个问题。实际上，就我而言，大多数变量都是寄存器宽度。所以我只想让它们成为一个有名字的虚拟寄存器。

有人知道如何创建虚拟寄存器（变量）而不是内存变量吗？

我的意思是如何避免使用“alloca”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T17:15:29.983

你不应该这样做。生成 SSA 代码是一个相当困难的问题，因此它在 LLVM 通道中的所有前端都解决了一次。您*应该*使用`alloca`和加载/存储，然后运行`mem2reg`传递将它们转换为 SSA 变量。Clang 也这样做（将您的示例代码粘贴在 C 函数中，并在不进行优化的[情况下对其进行编译）。](http://llvm.org/demo)

# web-services - IIS 7.5 在 Web 服务 (ASMX) 请求 60 秒后抛出 sc-win32-status: 995

> ID：13032748
> 
> 赞同：2
> 
> 时间：2012-10-23T14:28:35.357
> 
> 标签：web-services, .net-4.0, web-config, iis-7.5, ajaxcontroltoolkit

我有一个 .NET 4.0 集成模式的 Web 应用程序，通过 localhost 在同一台服务器上以 .NET 2.0 集成模式调用 Web 服务 (ASMX)。

10 次中有 9 次都可以正常工作，但有时 Web 应用程序会在调用期间出现“请求超时”和“线程被中止”错误。它在此代码示例的最后一行给出了错误：

```
 Dim Service As New localhost.Service
 Dim Input As New localhost.InputProduct
 Dim Ret As New localhost.OutputProduct 
 Try
     Ret = Service.RequestProduct(Input) 
 Catch 
 Finally
   Service.Dispose()    
   If Ret.succesfull = True Then
      If Response.IsClientConnected = True Then
         Response.Redirect("success.aspx", False)
      End If    
   End If 
End Try 
```

在 Web 服务的日志文件中，我得到一个 sc-win32-status: 995 和一个 sc-status: 200，通常花费的时间总是多于 60 秒（花费时间：62743）。通常这需要 14 秒才能完成而不会出现错误。

调用是在单击按钮后在 ASPX 页面后面的代码中进行的。页面上有一个更新面板，按钮用作 PostBackTrigger。

问题：为什么在 Web 服务调用后会出现这些“请求超时”错误？

服务器：

*   视窗服务器 2008 R2 SP1
*   IIS 7.5
*   微软网址扫描 3.1
*   Windows 防火墙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:41:55.700

我终于找到了这个问题的答案。原来是web.config中的这段代码：

```
<pages smartNavigation="true"> 
```

关闭此功能后，我不再收到任何超时错误。超时的原因可能是 IE 浏览器中 smartNavigation 设置生成的 IFRAME（不是在 Firefox/Chrome 中）

我在 .NET 2.0 中使用此设置来[消除导航引起的闪烁](http://msdn.microsoft.com/en-us/library/system.web.ui.page.smartnavigation%28v=vs.80%29.aspx)，升级到 .NET 4.0 后，Visual Studio 没有提供任何线索表明此设置已被弃用。

我找到了答案，因为我还有一个问题要处理。在使用 .NET 4.0 的最新[ajaxToolkit](https://ajaxcontroltoolkit.codeplex.com/)后，我​​在使用 AutoCompleteExtender 时在 IE7/8 中遇到了这个 javascript 警报错误：

> 行堆栈溢出：0

原来这与 smartNavigation 设置有关。因此，删除此设置同时解决了两个问题。希望我能帮助某人，因为对我来说，这是我在互联网短暂的历史中发现的最烦人的错误之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:03:06.023

考虑更改 web 服务器的 machine.config 中的 httpRuntime executionTimeout = "xxx" 标签。根据您的情况，默认值可能是两个短。以秒表示的值考虑将其加倍。

# objective-c - 使用 UIWebView 调用 Upload 方法

> ID：13032750
> 
> 赞同：2
> 
> 时间：2012-10-23T14:28:41.077
> 
> 标签：objective-c, ios, uiwebview, amazon-s3

我想将一些数据上传到 Amazon S3。我必须使用来自 Amazon SDK (multipartUpload:) 的 UIWebView 调用来实现这一点。

主要问题是我`ViewController`冻结执行，直到上传完成。

有没有办法解决这个问题？我尝试从 WebView 为上传上传方法启动一个新线程，但应用程序崩溃了。

第二个问题：有谁知道允许在 Amazon S3 中暂停/恢复上传的任何功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:38:39.327

您可以在后台线程上设置上传。

```
 // perform edit asynchronously to avoid blocking ui
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
             //UPLOAD CODE GOES HERE AND RUNS OUTSIDE OF THE MAINTHREAD SO NO UI IS BLOCKED
    }); 
```

这是一个使用大型中央调度执行异步进程的链接。

[http://blog.slaunchaman.com/2011/02/28/cocoa-touch-tutorial-using-grand-central-dispatch-for-asynchronous-table-view-cells/](http://blog.slaunchaman.com/2011/02/28/cocoa-touch-tutorial-using-grand-central-dispatch-for-asynchronous-table-view-cells/)

# http - JMeter：如何发送带有内容类型标头的请求？

> ID：13032753
> 
> 赞同：98
> 
> 时间：2012-10-23T14:28:44.593
> 
> 标签：http, jmeter

我们如何更改 RESTful Web 服务的 http 请求的请求标头中的内容类型？我们究竟从哪里改变它？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-10-23T14:32:20.413

添加[HTTP 标头管理器](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Header_Manager)并在此处添加所需的标头：

[![带有 Content-Type 标头的标头管理器](../Images/9a76dd9123ecda16b4acb7237e5c24e7.png)](https://i.stack.imgur.com/qevhZ.png)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2019-10-15T05:07:30.837

**TL;DR**要添加内容类型标头，您必须将[HTTP 标头管理器](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Header_Manager)关联到[HTTP 请求](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request)

* * *

您必须将其添加为：

> GET、DELETE、PUT 和 PATCH 需要 Content-Type。

在不覆盖您的请求的情况下，您的请求将默认发送为：

```
Connection: keep-alive
Content-Length: [length of body]
Content-Type: text/plain
Host: [your host]
User-Agent: Apache-HttpClient/4.5.7 (Java/1.8.0_191) 
```

与使用邮递员（优于 JMeter）不同，您可以在同一组件中选择内容类型，在 JMeter 中，您必须具有[HTTP Header Manager](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Header_Manager)，可以将其添加为

1.  HTTP 请求的子组件 - 只影响一个请求
2.  相同或高于 HTTP 请求的层次结构 - 可能/将影响[范围内的其他 HTTP 请求](https://jmeter.apache.org/usermanual/test_plan.html#executionorder)

请注意，您可以有多个标题管理器：

> JMeter 现在支持多个 Header Manager。合并标题条目以形成采样器的列表。如果要合并的条目与现有标题名称匹配，则它将替换先前的条目。这允许您设置一组默认标题，并将调整应用于特定的采样器。请注意，标头的空值不会删除现有标头，它只是替换其值。

请注意，您不能在以下位置使用它`multipart/form-data`：

> 当使用 multipart/form-data 时，这会抑制 Content-Type 和 Content-Transfer-Encoding 标头；仅发送 Content-Disposition 标头。

它不会在重定向的 url 中发送：

> 标头是针对初始请求发送的，不会针对重定向发送。这通常只是手动创建的测试计划的问题，因为使用记录器创建的测试计划将从重定向的 URL 继续。

# ssis - 如何解决 ssis 2008 版本中的数据库连接失败？

> ID：13032754
> 
> 赞同：0
> 
> 时间：2012-10-23T14:28:45.267
> 
> 标签：ssis

在 ssis 2005 中，我创建了一个包配置并关闭了包。当我重新打开包时，我收到 db connection failed 错误。为此，我在连接管理器中提供了 Db 凭据，错误自动清除。当我尝试使用 ssis 2008 软件包时，没有发生这种情况。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:27:59.563

如果要保存连接字符串的密码，则必须将 package 选项设置 `ProtectionLevel`为`DontSaveSensitive`. 这样，当您重新打开包时，它会被记住。

# php - 乔治与乔治的 SQL 搜索

> ID：13032764
> 
> 赞同：1
> 
> 时间：2012-10-23T14:29:13.753
> 
> 标签：php, mysql, sql-like

我正在尝试使用 SQL 进行搜索查询；我的页面包含一个输入字段，该字段的值被获取并简单地连接到我的 SQL 语句。

所以，`Select * FROM users`经过搜索然后变成`SELECT * FROM users WHERE company LIKE '%georges brown%'`.

然后它根据用户输入的内容返回结果；在这种情况下乔治布朗。但是，它只查找准确输入为 Georges Brown（带有“s”）的公司的条目。

我要做的是返回一个结果集，其中不仅包含 Georges 的条目，而且还包含 George（没有's'）。

有什么方法可以让这个搜索更加灵活，以便找到 Georges 和 George 的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:30:55.400

尝试在`george`.

```
SELECT * FROM users WHERE company LIKE '%george% %brown%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:31:04.530

试试这个查询：

```
SELECT * 
FROM users 
WHERE company LIKE '%george% brown%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:32:43.760

利用`SOUNDEX`

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_soundex](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_soundex)

您还可以删除最后 2 个字符并获取 SOUNDEX 代码并进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T14:33:44.587

在特定情况下，您可以使用通配符：

```
WHERE company LIKE '%george% brown%' -- will match `georges` but not `georgeani` 
```

`_`是单字符通配符，而`%`是多字符通配符。

但也许最好使用其他软件进行索引，例如[Sphinx](http://sphinxsearch.com/about/sphinx/)。

它具有： *“灵活的文本处理。Sphinx 索引功能包括对 SBCS 和 UTF-8 编码的完全支持（这意味着实际上支持世界上所有的语言）；停用词删除和可选的命中位置删除（无命中索引）；通过单词处理形态和同义词形成字典和词干分析器；例外和混合字符；等等。”*

例如，它允许您使用部分匹配进行更智能的搜索，同时提供比 soundex 更高的准确性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T14:35:39.227

您必须查看数据库系统的文档。例如 MySQL 提供了该`SOUNDEX`功能。

否则，应该始终有效并为您提供更好匹配的是仅适用于大写或小写字符串。SQL-92 定义了`TRIM`、`UPPER`和`LOWER`函数。所以你会做类似的事情`WHERE UPPER(company) LIKE UPPER('%georges brown%')`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T15:19:25.337

可能最好将您的搜索字符串分解为单个单词，然后找到每个单词的复数/单数。然后对每个单词的两种可能性都点赞。

然而，为了在处理大量数据时有效，您可能希望针对与每个公司链接的单词表运行。

单独的 Soundex 可能没有太多用处，因为太多的词是相似的（它给你一个 4 个字符的代码，第一个字符是单词的第一个字符，而接下来的 3 个是数字代码）。Levenshtein 更准确，但 MySQL 没有内置的方法，尽管 php 确实有一个快速的函数（我发现计算它的 MySQL 函数太慢，无法在大型搜索中使用）。

我为类似的搜索功能所做的是获取输入字符串并将其分解为单词，然后将这些单词转换为它们的单数形式（我使用的单词表只包含单词的单数版本）。对于每个单词，我找到所有以相同字母开头的单词，然后使用 levenshtein 来获得最佳匹配。并从中列出可能的匹配项。可以处理拼写错误（因此如果有人输入 Goerge，它可能会找到 George），也可以找到最佳匹配项（即，如果有人搜索了 5 个单词但只找到了 4 个）。如果拼写距离很远，也可以提出一些替代方案。

您可能还想查找 Metaphone 和 Double Metaphone。

# java - 参考更新线程安全吗？

> ID：13032766
> 
> 赞同：1
> 
> 时间：2012-10-23T14:29:23.093
> 
> 标签：java, multithreading, thread-safety

```
public class Test{
   private MyObj myobj = new MyObj(); //it is not volatile

   public class Updater extends Thred{
      myobje = getNewObjFromDb() ; //not am setting new object
   }

   public MyObj getData(){
    //getting stale date is fine for 
    return myobj;
   }

} 
```

定期更新更新 myobj
其他类使用 getData 获取数据
此代码是否线程安全而不使用 volatile 关键字？
我想是的。有人可以确认吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T14:32:06.777

**不**，这不是线程安全的。（是什么让你认为它是？）

如果您在一个线程中更新一个变量并从另一个线程读取它，您必须在写入和后续读取之间建立[*发生前的*关系。](http://docs.oracle.com/javase/tutorial/essential/concurrency/memconsist.html)

简而言之，这基本上意味着同时进行读取和写入`synchronized`（在同一监视器上），或进行引用`volatile`。

没有它，就不能保证读取线程会看到更新 - 它甚至不会像“嗯，它会看到旧值或新值”那么简单。您的阅读器线程可能会看到一些非常奇怪的行为以及随之而来的数据损坏。例如，看看[缺乏同步如何导致无限循环](http://lightbody.net/blog/?p=307)（该文章的评论，尤其是 Brian Goetz 的评论非常值得一读）：

> 故事的寓意：每当跨线程共享可变数据时，如果您没有正确使用同步（这意味着使用公共锁来保护对共享变量的每次访问，无论是读取还是写入），您的程序都会被破坏和破坏以你可能无法列举的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:48:49.970

你**可能会**得到一个过时的参考。您**可能不会**得到无效的参考。你得到的引用是对变量指向或指向或将指向的对象的引用的值。

请注意，*无法*保证引用可能有*多少陈旧，但它仍然是对**某个*对象的引用，并且该对象*仍然存在*。换句话说，写入引用是*原子*的（在写入期间不会发生任何事情）但不是*同步*的（它受指令重新排序、线程本地缓存等的影响）。

如果将引用声明为`volatile`，则会在变量周围创建一个同步点。简单地说，这意味着*访问*线程的所有缓存都被刷新（写入被写入，读取被遗忘）。

唯一没有原子读/写的类型是`long`并且`double`因为它们在 32 位机器上大于 32 位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T14:30:56.567

不，不是。

如果没有，从不同的线程`volatile`调用可能会返回一个过时的缓存值。强制来自一个线程的分配立即在所有其他线程上可见。`getData()`
`volatile`

请注意，如果对象本身不是不可变的，您可能会遇到其他问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T05:41:27.297

如果`MyObj`是不可变的（所有字段都是最终的），则不需要 volatile。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T17:20:46.583

Volatile would work for boolean variables but not for references. Myobj seems to perform like a cached object it could work with an AtomicReference. Since your code extracts the value from the DB I'll let the code stay as is and add the AtomicReference to it.

```
import java.util.concurrent.atomic.AtomicReference;

    public class AtomicReferenceTest {
        private AtomicReference<MyObj> myobj = new AtomicReference<MyObj>();

        public class Updater extends Thread {

            public void run() {
                MyObj newMyobj = getNewObjFromDb();
                updateMyObj(newMyobj);
            }

            public void updateMyObj(MyObj newMyobj) {
                myobj.compareAndSet(myobj.get(), newMyobj);
            }

             }
        public MyObj getData() {
             return myobj.get();
        }
    }

    class MyObj {
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T15:05:32.837

这种代码的大问题是延迟初始化。如果没有`volatile`or`synchronized`关键字，您可以为`myobj`尚未完全初始化的新值分配一个新值。Java 内存模型允许在对象构造函数返回*后*执行部分对象构造。这种内存操作的重新排序是内存屏障在多线程情况下如此重要的原因。

没有内存屏障限制，就没有发生之前的保证，因此您不知道是否`MyObj`已完全构建。这意味着另一个线程可能正在使用部分初始化的对象并产生意外结果。

以下是有关构造函数同步的更多详细信息：

> [Java中的构造函数同步](https://stackoverflow.com/questions/12611366/constructor-synchronization-in-java/12611390#12611390)

# xpages - 试图限制 xe:djComboBox 控件的选择

> ID：13032767
> 
> 赞同：0
> 
> 时间：2012-10-23T14:29:24.577
> 
> 标签：xpages, xpages-extlib

我有一个 xe:djComboBox 的预先输入功能的用例，但我想将输入的值限制为控件的 selectItems。在以下代码示例中，selectItems 从名为 viewStates 的 Domino View 数据源返回 50 个状态。我尝试使用代码中的验证器验证所选/值，但仍然接受任何输入的值。有任何想法吗？

```
<xe:djComboBox id="djComboBox2"
                value="#{document1.Text_3}" ignoreCase="true"
                promptMessage="Type or select a State"
                invalidMessage="Not a valid State selection"
                validator="#{javascript:(@IsMember(this.getValue(),viewStates.getColumnValues(0)))? true : false;}">

                <xp:selectItem itemLabel=""></xp:selectItem>
                <xp:selectItems>
                    <xp:this.value><![CDATA[#{javascript:viewStates.getColumnValues(0)}]]></xp:this.value>
                </xp:selectItems>

            </xe:djComboBox> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:44:43.183

请改用 xe:djFilteringSelect 控件。它将可能的条目限制为 selectItem 和 selectItems 中的条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:42:25.220

Paul，看看 Validators 下的 PickerValidator。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T15:51:42.217

根据霍华德的建议，这行得通......

```
<xe:djComboBox
        id="djComboBox2"
        ignoreCase="true"
        promptMessage="Type or select a State"
        invalidMessage="Not a valid State selection">

        <xe:this.validators>
            <xe:pickerValidator message="Enter the right state">
                <xe:this.dataProvider>
                    <xe:dominoViewNamePicker
                        viewName="USStates"
                        labelColumn="abbreviation">
                    </xe:dominoViewNamePicker>
                </xe:this.dataProvider>
            </xe:pickerValidator>
        </xe:this.validators>
        <xp:selectItem itemLabel=""></xp:selectItem>
        <xp:selectItems>
            <xp:this.value><![CDATA[#{javascript:viewStates.getColumnValues(0)}]]></xp:this.value>
        </xp:selectItems>

    </xe:djComboBox> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T14:56:03.290

您正在使用“验证器”属性，您需要使用“验证器”属性之一，例如 customValidator。

# python - Pyqt 英语到芬兰语翻译

> ID：13032774
> 
> 赞同：3
> 
> 时间：2012-10-23T14:29:39.533
> 
> 标签：python, qt, pyqt

我想将 pyqt 应用程序的语言从英语转换为芬兰语。我看到 pyqt 有一些方法，我尝试使用它，但它没有帮助我

```
app = QtGui.QApplication(sys.argv)
translator = QtCore.QTranslator()
translator.load("qt_fr.qm")
app.installTranslator(translator) 
```

.qm 文件位于正确的路径（我猜现在它采用法语）并且在按钮上我使用此文本

```
 name = "File"
 button.setText(self.tr(QtCore.QString(name))) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T15:41:57.327

看来您混合了两件事：Qt 本身的翻译（通过 qt_xx.qm 文件提供并与 Qt 一起分发）和您自己的翻译。

这里有一个使用 Qt 本身的俄语翻译文件的示例：

```
from PyQt4.QtGui import *
from PyQt4.QtCore import *

class MyWindow(QWidget):
    def __init__(self, parent=None):
        super(QWidget, self).__init__(parent)

        self.hbox = QHBoxLayout(self)
        self.myButtons = QDialogButtonBox(self)
        self.hbox.addWidget(self.myButtons)
        button = self.myButtons.addButton(QDialogButtonBox.Open)

if __name__ == "__main__":
    import sys
    app = QApplication(sys.argv)
    translator = QTranslator()
    print translator.load("qt_ru", QLibraryInfo.location(QLibraryInfo.TranslationsPath))
    app.installTranslator(translator)
    ui = MyWindow()
    ui.show()
    sys.exit(app.exec_()) 
```

如果您需要自己的翻译，那么[i18n with Qt的](http://qt-project.org/doc/qt-4.8/internationalization.html#produce-translations)*Produce translations*部分可以为您提供帮助。您需要提供项目文件、翻译文件 (.ts) 并使用 Qt Linguist 工具。

您可以通过安装多个翻译器来混合 Qt 本身的翻译和您自己的应用程序翻译。

请注意，在加载翻译器时，您不必在文件名中添加 .qm 扩展名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:56:51.690

请阅读《Qt 翻译手册》或在此处查看一个非常基本但说明性的示例：http: [//doc.qt.digia.com/qt/linguist-hellotr.html](http://doc.qt.digia.com/qt/linguist-hellotr.html)。请注意：您可能需要使用 fi [Qt Linguist](http://doc.qt.digia.com/qt/linguist-translators.html)自己提供翻译文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-04T04:17:11.540

如果您在窗口中执行此操作`__init__()`，则**必须**保存（保留对）您的翻译器的引用：

```
self.translator = translator 
```

否则，即使在安装之后，您的翻译器也会被垃圾收集。在这种情况下，`self.tr()`将停止工作（静默失败）。

# r - 带有误差线的散点图

> ID：13032777
> 
> 赞同：56
> 
> 时间：2012-10-23T14:29:49.490
> 
> 标签：r, plot

如何在 R 中生成以下图？图中显示的点是平均值，它们的范围对应于最小值和最大值。我在两个文件中有数据（下面是一个例子）。

```
x   y
1   0.8773
1   0.8722
1   0.8816
1   0.8834
1   0.8759
1   0.8890
1   0.8727
2   0.9047
2   0.9062
2   0.8998
2   0.9044
2   0.8960
..  ... 
```

![在此处输入图像描述](../Images/a86153cbaecd5292bb50a0a40e664c93.png)

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2014-02-26T09:30:10.780

首先：非常不幸和令人惊讶的是，**R 不能“开箱即用”地绘制误差**线。

这是我最喜欢的解决方法，优点是您*不需要任何额外的包*。诀窍是绘制箭头（！），但用小水平条代替箭头（！！！）。这个不那么直截了当的想法来自[R Wiki Tips](http://rwiki.sciviews.org/doku.php?id=tips:graphics-base:errbars)，并在此处作为一个已解决的示例进行复制。

假设您有一个“平均值”`avg`向量和另一个“标准偏差”向量`sdev`，它们的长度相同`n`。让我们将横坐标设为这些“测量”的数量，所以`x <- 1:n`。使用这些，这里有绘图命令：

```
plot(x, avg,
    ylim=range(c(avg-sdev, avg+sdev)),
    pch=19, xlab="Measurements", ylab="Mean +/- SD",
    main="Scatter plot with std.dev error bars"
)
# hack: we draw arrows but with very special "arrowheads"
arrows(x, avg-sdev, x, avg+sdev, length=0.05, angle=90, code=3) 
```

结果如下所示：

![带有 std.dev 误差线的示例散点图](../Images/3bf7a81b0267ced247fb2172cc011be2.png)

`arrows(...)`函数`length=0.05`中是以英寸为单位的“箭头”的大小，指定`angle=90`“箭头”与箭头的轴垂直，特别直观的`code=3`参数指定我们要在箭头的两端画一个箭头。

对于水平误差条，假设`sdev`向量现在包含值中的误差`x`并且`y`值是纵坐标，则需要进行以下更改：

```
plot(x, y,
    xlim=range(c(x-sdev, x+sdev)),
    pch=19,...)
# horizontal error bars
arrows(x-sdev, y, x+sdev, y, length=0.05, angle=90, code=3) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-04-23T16:16:38.727

使用`ggplot`and a little`dplyr`进行数据操作：

```
set.seed(42)
df <- data.frame(x = rep(1:10,each=5), y = rnorm(50))

library(ggplot2)
library(dplyr)

df.summary <- df %>% group_by(x) %>%
    summarize(ymin = min(y),
              ymax = max(y),
              ymean = mean(y))

ggplot(df.summary, aes(x = x, y = ymean)) +
    geom_point(size = 2) +
    geom_errorbar(aes(ymin = ymin, ymax = ymax)) 
```

如果有一个额外的分组列（OP的示例图每个x值有两个误差线，表示数据来自两个文件），那么您应该在一开始就将所有数据放在一个数据框中，将分组变量添加到`dplyr::group_by`调用中（例如，`group_by(x, file)`如果`file`是列的名称）并将其作为“组”美学添加到 ggplot 中，例如`aes(x = x, y = ymean, group = file)`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-23T16:09:15.217

```
#some example data
set.seed(42)
df <- data.frame(x = rep(1:10,each=5), y = rnorm(50))

#calculate mean, min and max for each x-value
library(plyr)
df2 <- ddply(df,.(x),function(df) c(mean=mean(df$y),min=min(df$y),max=max(df$y)))

#plot error bars
library(Hmisc)
with(df2,errbar(x,mean,max,min))
grid(nx=NA,ny=NULL) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-04T13:03:32.207

总结 Laryx Decidua 的回答：

定义和使用如下函数

```
plot.with.errorbars <- function(x, y, err, ylim=NULL, ...) {
  if (is.null(ylim))
    ylim <- c(min(y-err), max(y+err))
  plot(x, y, ylim=ylim, pch=19, ...)
  arrows(x, y-err, x, y+err, length=0.05, angle=90, code=3)
} 
```

其中可以覆盖自动*ylim*，还可以传递额外的参数，例如*main*、*xlab*、*ylab*。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-05T15:21:11.913

### 另一种（更容易 - 至少对我来说）方法如下。

```
install.packages("ggplot2movies")

data(movies, package="ggplot2movies") 
```

绘制平均长度与评分

```
rating_by_len = tapply(movies$length,
                       movies$rating,
                       mean)

plot(names(rating_by_len), rating_by_len, ylim=c(0, 200)
     ,xlab = "Rating", ylab = "Length", main="Average Rating by Movie Length", pch=21) 
```

在图中添加误差线：mean - sd, mean + sd

```
sds = tapply(movies$length, movies$rating, sd)
upper = rating_by_len + sds
lower = rating_by_len - sds
segments(x0=as.numeric(names(rating_by_len)), 
         y0=lower, 
         y1=upper) 
```

希望有帮助。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-04-23T15:38:58.237

我把一个假设实验的代码从头到尾放在一起，重复了 10 次测量，重复了 3 次。在其他 stackoverflowers 的帮助下只是为了好玩。谢谢...显然循环是`apply`可以使用的选项，但我想看看会发生什么。

```
#Create fake data
x <-rep(1:10, each =3)
y <- rnorm(30, mean=4,sd=1)

#Loop to get standard deviation from data
sd.y = NULL
for(i in 1:10){
  sd.y[i] <- sd(y[(1+(i-1)*3):(3+(i-1)*3)])
}
sd.y<-rep(sd.y,each = 3)

#Loop to get mean from data
mean.y = NULL
for(i in 1:10){
  mean.y[i] <- mean(y[(1+(i-1)*3):(3+(i-1)*3)])
}
mean.y<-rep(mean.y,each = 3)

#Put together the data to view it so far
data <- cbind(x, y, mean.y, sd.y)

#Make an empty matrix to fill with shrunk data
data.1 = matrix(data = NA, nrow=10, ncol = 4)
colnames(data.1) <- c("X","Y","MEAN","SD")

#Loop to put data into shrunk format
for(i in 1:10){
  data.1[i,] <- data[(1+(i-1)*3),]
}

#Create atomic vectors for arrows
x <- data.1[,1]
mean.exp <- data.1[,3]
sd.exp <- data.1[,4]

#Plot the data
plot(x, mean.exp, ylim = range(c(mean.exp-sd.exp,mean.exp+sd.exp)))
abline(h = 4)
arrows(x, mean.exp-sd.exp, x, mean.exp+sd.exp, length=0.05, angle=90, code=3) 
```

# vb.net - vb.net winforms datagridview 如何判断用户在单元格中单击的位置

> ID：13032786
> 
> 赞同：0
> 
> 时间：2012-10-23T14:30:09.520
> 
> 标签：vb.net, winforms, datagridview, mouse, cell

我正在向自定义 datagridview 添加自定义列。这个新的 datagridcolumn 具有的选项之一是能够显示一个值，然后是一个按钮，以允许用户单击该按钮，然后会发生一些事情。按钮只占据单元格的右侧部分，其余部分是一个值。此按钮和值始终是可显示的，并且该按钮应该始终能够被点击。在 datagridview 的显示模式中，值和按钮被绘制。我需要帮助的是如何判断用户是否点击了单元格的按钮部分。有人可以提供有关如何执行此操作的示例代码吗？

谢谢，格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:04:45.867

没关系，我想通了。我只是在 datagridview 的 cellclick 事件中添加了一些逻辑来获取 GetCellDisplayRectangle 并将其转换为屏幕点并获得鼠标在屏幕上的位置并使用 rectangle contains 方法进行边界测试。

# jsf - 如何在 Tomahawk inputTextarea 上自定义垂直滚动条默认方向？

> ID：13032789
> 
> 赞同：1
> 
> 时间：2012-10-23T14:30:17.450
> 
> 标签：jsf, scroll, textarea, tomahawk

我得到了以下 jsf 代码：

```
<t:inputTextarea id="exportStatusMessage" cols="85" rows="10" readonly="true" value="#{ExportController.statusMessages}"/> 
```

渲染页面后是否可以告诉 inputTextarea 滚动到底部？也许你知道 Eclipse-Console，我想实现这种行为。也许有一个 JavaScript 片段或 JSF 属性可以处理这个问题 - 在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:51:17.180

您确实可以为此使用 JavaScript。

```
<h:form id="form">
    <t:inputTextarea id="exportStatusMessage" ... />
</h:form>

<script>
    var textarea = document.getElementById("form:exportStatusMessage");
    textarea.scrollTop = textarea.scrollHeight;
</script> 
```

请注意，必须在将 HTML`<textarea>`表示添加到 HTML DOM 树之后执行该脚本。因此，如果您打算将脚本放在自己的`.js`文件中，请确保它在页面加载期间执行，或者在`<body>`.

# unicode - UTF-8 特殊字符不显示

> ID：13032795
> 
> 赞同：8
> 
> 时间：2012-10-23T14:30:45.577
> 
> 标签：unicode, character-encoding

我试图弄清楚为什么这样的字符：

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T14:54:53.467

您拥有的字符是[Unicode Character 'WHITE RIGHT POINTING BACKHAND INDEX' (U+1F449)](http://www.fileformat.info/info/unicode/char/1f449/index.htm)。在该页面上，您可以找到[支持 U+1F449 链接字体](http://www.fileformat.info/info/unicode/char/1f449/fontsupport.htm)后面字符的已知字体列表。

> **字体**
> [LastResort](http://www.fileformat.info/info/unicode/font/lastresort/index.htm)
> [Segoe UI Emoji](http://www.fileformat.info/info/unicode/font/segoe_ui_emoji/index.htm)
> [Segoe UI Symbol](http://www.fileformat.info/info/unicode/font/segoe_ui_symbol/index.htm)
> [Symbola](http://www.fileformat.info/info/unicode/font/symbola/index.htm)

stackoverflow.com 上没有使用这两种字体，因此您还会看到一个空框。

如果这发生在您自己的网站上，并且您想修复它，那么您需要通过 CSS 提供支持字体以及 webapp `@font-face`，或者在这种特殊情况下可能更好，寻找基于 CSS 的图标库，例如作为[字体真棒](http://fortawesome.github.io/Font-Awesome/)。与这个[`<i class="fa fa-hand-o-right">`](http://fortawesome.github.io/Font-Awesome/icon/hand-o-right/)角色非常接近。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T17:12:09.473

字符 U+1F449 在 2010 年的第 6 版中被添加到 Unicode 中，从一个字符被采用到 Unicode 中通常需要十年左右的时间才能在字体中得到广泛支持。

现在包含它的少数字体包括 Symbola 和 Segoe UI Symbol。如果您安装了其中任何一个，您可能会看到它；否则不是。[Segoe UI Symbol](http://www.microsoft.com/typography/fonts/font.aspx?FMID=1798)随 Windows 8 一起提供，并且显然随 Windows 7（至少某些变体）一起提供，尽管 Windows 7 版本可能受到限制——Microsoft 提供了[更新](http://support.microsoft.com/kb/2729094)。[Symbola](http://users.teilar.gr/~g1951d/)是一种免费字体，因此您原则上可以将其用作可下载字体（通过`@font-face`），但它的文件大小相当大。

如果为元素指定的字体不包含内容中某些字符的字形，则 Web 浏览器应该使用备用字体。火狐一般会实现这个，IE不会，尤其是老版本，所以如果你在网页上使用这个字符，最好自己包裹一个元素（通常`span`是为了这个目的）并设置如下它在 CSS 中：

```
font-family: Segoe UI Symbol, Symbola; 
```

但这将（没有`@font-face`）仅适用于使用包含其中一种字体的计算机的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T14:48:00.770

缺少的字体字符通常会被其他字体替换，而 UTF-8 应该能够显示所有 unicode 字符。我怀疑文件的编码（编辑器如何保存它）与 HTML 页面的元标记中的声明不匹配。

您可以使用此[W3-checker](http://validator.w3.org/i18n-checker/)检查您的页面，它可能会为您提供有关页面问题的提示。

编辑：

你是对的，这不是编码问题，字符的数量如此之大，以至于“普通”字体不支持它。也许你可以使用其中一个 ☛ ☞，否则你将不得不使用网络字体，并且完全支持 unicode 的字体可能会非常大。

# selenium - selenium 和 JBehave 的另一种选择？

> ID：13032802
> 
> 赞同：0
> 
> 时间：2012-10-23T14:30:58.440
> 
> 标签：selenium, automated-tests, selenium-chromedriver, jbehave

我在 ATC 上工作了 2 个月，但我仍然遇到 Chrome、Selenium 和 JBehave 的问题。selenium 的 Chrome 驱动程序有一些错误。例如：有时它说找不到或无法点击组件。对于这种情况，我使用了一种解决方法，但它有点令人讨厌。

当我运行 ATC 时，有时其中一个会由于 chrome selenium 驱动程序错误而失败！另外，我不喜欢 JBehave 的报告。

有人可以建议我创建 ATC 的另一种选择吗？

谢谢！！！

萨朗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-04T21:11:27.270

Consider [Selenide](http://selenide.org) - it's specifically create to resolve all these timing/ajax/"element not found" poblems. Selenide is extremely simple to start with (much simpler than Thucydides) and can be used with any framework: Junit, TestNG, JBehave - you name it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T19:24:47.680

我喜欢修昔底德写 ATC： [http ://thucydides-webtests.com/2011/09/23/hello-world/](http://thucydides-webtests.com/2011/09/23/hello-world/)

它有一个不错的报告，带有屏幕截图……您可以使用 easyb、junit 或 jbehave 编写测试。但它也使用硒引擎。

# algorithm - 为什么 Big-O 表示法使用 O(1) 而不是 O(k)？

> ID：13032803
> 
> 赞同：12
> 
> 时间：2012-10-23T14:31:01.563
> 
> 标签：algorithm, complexity-theory, big-o, notation

如果我正确理解 Big-O 表示法，`k`那么算法效率应该是一个常数时间。考虑到它需要可变时间，为什么要考虑恒定时间`O(1)`而不是？`O(k)`线性增长`( O(n + k) )`使用此变量将时间向右移动特定的时间量，那么对于恒定复杂性为什么不一样呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T14:38:20.780

不存在这样的线性增长渐近`O(n + k)`，其中`k`是一个常数。如果`k`是一个常数并且你回到算法增长率的极限表示，你会看到`O(n + k) = O(n)`因为常数在极限中下降。

您的答案可能是`O(n + k)`由于一个从根本上独立于其他输入集的*变量* 。您通常会在排序算法分析中的比较与移动中看到这一点。`k``n`

为了回答你关于为什么我们放弃`k`Big-O 表示法的问题（我认为它的教学很差，导致所有这些混乱），O() 的一个定义（我记得）如下：

![公式](../Images/1aac0b312c7299d4d2368bc703500937.png)

```
Read: f(n) is in O( g(n) ) iff there exists d and n_0 where for all n > n_0,
                                         f(n) <= d * g(n) 
```

让我们尝试将其应用于我们的问题，*其中 k 是一个常数*，因此 f(x) = k 和 g(x) = 1。

*   是否存在满足这些要求的`d`和？`n_0`

琐碎，答案当然是肯定的。选择 d >`k`并且对于 n > 0，定义成立。

# javascript - 获取一个li元素的css显示值

> ID：13032807
> 
> 赞同：1
> 
> 时间：2012-10-23T14:31:04.907
> 
> 标签：javascript, css, html-lists

我试图在遍历无序列表（）时找到css显示值，但由于某种原因FF不显示这个值。这是我到目前为止所拥有的：

```
var LIs = document.getElementById('ulABC').getElementsByTagName('li');
for (var i=0; i<LIs.length; i++) {
   alert('the li display value is :'+LIs[i].style.display+':');
} 
```

我得到的只是一个空白的回复。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:35:21.950

该值与属性`LIs[i].style.display`中设置的值完全相同`style`。它不反映浏览器从样式表中得到的任何东西。要获取这些计算值，请使用[`window.getComputedStyle()`](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle).

[这个链接](https://github.com/jquery/jquery/blob/bede0123d99ed41ef2214edde795927e2a777f8a/src/css.js#L279)`.css()`显示了他们的属性的 jQuery 实现，它就是这样做的。请注意，在 IE 9 以下的 IE 上，您需要使用名为 的方法`document.documentElement.currentStyle()`，因此需要使用该`if..else`子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:37:15.927

如果显示没有被显式设置为内联或使用 javascript，则需要使用 getComputedStyle()。它不会从样式表中获取任何内容。

# c - C中字符串压缩的ascii输出

> ID：13032810
> 
> 赞同：1
> 
> 时间：2012-10-23T14:31:13.877
> 
> 标签：c, encryption, compression

我需要在项目中同时使用压缩和加密。项目中有两个程序。

在第一个程序中，一个 ascii 文本文件首先被压缩然后加密。对该文件的这个加密版本进行进一步的操作。然而，项目中的第二个程序遵循相反的过程，即首先解密然后解压缩以获得原始的 ascii 文本文件。

我已经实现了加密模块（aes via openssl）并且工作正常。但是当我在 linux 中寻找压缩选项时，我发现 gzip、zlib 等会抛出他们自己的文件版本，即 filename.gz 或其他扩展名，其内容不是纯粹的 ascii。（例如，当我在终端中查看输出时，我看到菱形符号）正因为如此，我无法在我的 C 程序中完全读取压缩文件。

简而言之，我需要一个仅包含 ascii 字符的压缩文件。这有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:21:06.457

终于解决了这个问题。该程序正在正确处理所有内容。

在发送方：

```
compression: gzip -c secret.txt -9 > compressed.txt.gz
encryption: openssl enc -aes-256-cbc -a -salt -in compressed.txt.gz -out encrypted.txt 
```

压缩输出 (gz) 作为输出文本文件的加密输入。结果输出纯粹是ASCII。

在接收方：

```
decryption: openssl enc -d -aes-256-cbc -a -in decryptme.txt -out decrypted.txt.gz
decompression: gunzip -c decrypted.txt.gz > message.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:40:01.543

您可以在压缩和加密之间添加 uuencode / uudecode 过滤器 - 或者您可能希望放松压缩数据的限制为 ascii 形式：选项：

*   从您的 c 程序中读取二进制数据。（例如 `char buffer[256]; c=fread(buffer,1,256,stdin);`）
*   将数据转换为十六进制格式
    `static char encrypted_file[]={ 0x01,0x6e, ... };`

# ios - 核心数据 NSValidation 错误 1620

> ID：13032811
> 
> 赞同：1
> 
> 时间：2012-10-23T14:31:18.040
> 
> 标签：ios, core-data, save

我收到“无法保存”错误，不。1620，当我尝试以下操作时：

```
NSManagedObjectContext *context = [self managedObjectContext];

CustomObject *objToInsert = [NSEntityDescription insertNewObjectForEntityForName:@"CustomObject" inManagedObjectContext:context];

objToInsert.variable1 = [NSNumber numberWithFloat:10.0];
objToInsert.variable2 = [NSDate date];
objToInsert.variable3 = [NSNumber numberWithInt:1];

NSError *error;
if (![context save:&error]) {
    NSLog(@"failed to save with error = %@", [error localizedDescription]);
} 
```

在将其他 NSManagedObject 子类对象保存到 managedObjectContext 时，同样的逻辑可以正常工作。1620 错​​误被列为“数字太小”验证错误，但我输入的数字显然没有任何问题。这三个变量在我的数据模型中定义为 Float、Date 和 Integer 16，但我不确定这是否相关。

核心数据堆栈全部存在且正确，正如我所说，与其他插入逻辑一起工作得很好。我在这里错过了什么吗？

编辑：从错误输出中可以看出，Core Data 正在尝试保存一个完全不同的 NSManagedObject 子类，我在执行早期使用它，但在此方法调用中没有。为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:06:28.953

最后，解决方案部分按照 Martin R 的建议（见评论），但针对一个完全不同的实体。看来，如果为数据模型中的任何其他实体设置了所需的最小值，并且该实体在之前的某个时间点被修改和保存，那么任何后续保存到其他实体都会导致错误。这似乎不明智 - 也许我在其他地方做错了什么？- 但删除最小值要求确实解决了这个特殊问题。

# google-maps - 类似谷歌的绘图符号？

> ID：13032812
> 
> 赞同：1
> 
> 时间：2012-10-23T14:31:19.750
> 
> 标签：google-maps, icons, symbols

我正在寻找一些额外的情节符号。这是我的代码：

```
library(maps)
map('state', 'north carolina')
x <- c(-81.18668,-78.38062)
y <- c(35.7767,35.7767)
points(x=x, y=y) 
```

我正在寻找的是类似于谷歌地图上使用的绘图符号，最好是方向图中使用的那些（即点 A 和点 B）。

有没有内置这些​​符号的软件包，或者有没有人有快速破解的想法？谢谢！

编辑：寻找像这里显示两点的绘图符号：

[http://goo.gl/maps/xjxqn](http://goo.gl/maps/xjxqn)

基本上，带有标签（A 和 B）的泪滴形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:33:54.357

你的问题有点含糊，但这里有一些图标： [http ://www.bestpsdfreebies.com/freebie/map-marker-icons/](http://www.bestpsdfreebies.com/freebie/map-marker-icons/)

另一个图书馆：[http ://abeliantechnologies.com/google_map_marker.php](http://abeliantechnologies.com/google_map_marker.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:25:07.097

这是使用`my.symbols`TeachingDemos 包中的函数的一种方法：

```
library(TeachingDemos)
ms.mappoint <- function(letter='', col='blue', txtcol='white', cex=1, ...) {
    tmp <- seq( -3*pi/8, 11*pi/8, length.out=200 )
    tmp.x <- cos(tmp)/3
    tmp.y <- sin(tmp)/3 + 2/3

    tmp.x <- c(tmp.x, 0, tmp.x[1])
    tmp.y <- c(tmp.y, 0, tmp.y[1])

    polygon(tmp.x, tmp.y, col=col)
    text( 0, 2/3, letter, col=txtcol, cex=1, font=2 )
}

myx <- runif(10)
myy <- rnorm(10)
plot(myx,myy, ylim=c( min(myy)-.1, max(myy)+1) )
my.symbols(myx,myy, ms.mappoint, inches=1,
    col=rainbow(10), letter=LETTERS[1:10], symb.plots=TRUE ) 
```

整体形状可能需要一些改进，但这只是创建一个 x 和 y 值矩阵来表示形状的问题。

# iphone - UITableViewCell 内的 VoiceOver 用户交互

> ID：13032813
> 
> 赞同：0
> 
> 时间：2012-10-23T14:31:22.427
> 
> 标签：iphone, ios, uitableview, accessibility, voiceover

我有一个带有自定义 UITableViewCell 的 UITableView CustomCell
CustomCell 有一些 UILabel 启用了用户交互
CustomCell 实现了 touchesBegan：

```
- (void) touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {
UITouch* touch = touches.anyObject;
    self.itemSelected=[touch view].tag;
    self.viewSelected=[touch view];
[super touchesBegan:touches withEvent:event];
} 
```

如果我没有启用 VoiceOver，touchesBegan 被调用，并且正确的视图被“选择”

，这很好用 VoiceOver，如果我执行“双击然后按住”，touchesBegan 也会被调用，但是与触摸事件的类型为 UITableViewCellContentView。

知道我将如何保持这些用户与 tableview 单元格内的项目的交互吗？
我尝试过的失败：
-确保在单元格对象上禁用了可访问性
-确保在标签对象上启用了可访问性
-尝试了标签的各种特征组合
-确保启用的用户交互在标签

创意上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:04:59.137

找到了答案

我需要实现以下方法

```
- (NSInteger)accessibilityElementCount;
- (id)accessibilityElementAtIndex:(NSInteger)index;
- (NSInteger)indexOfAccessibilityElement:(id)element; 
```

# sql-server-2008 - SQL Server：查看表的权限

> ID：13032818
> 
> 赞同：0
> 
> 时间：2012-10-23T14:31:45.163
> 
> 标签：sql-server-2008, permissions, schema, multi-tenant

是否可以授予用户对视图的访问权限但限制用户访问视图从中选择的表？

```
CREATE TABLE [dbo].[tUsers](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Username] [nvarchar](50) NULL,
    [Password] [nvarchar](50) NULL,
    [TenantID] int
) ON [PRIMARY]

CREATE VIEW [scmTenant1].[vUsers]
AS
SELECT     ID, Username, Password
FROM         dbo.tUsers
WHERE        TenantID = 1 
```

SQL Server 用户帐户 ( `usrTenant1`) 有权访问架构`scmTenant1`，但无权访问`dbo`架构。我以身份登录 SQL Server Management Studio`usrTenant1`并尝试执行此查询：

```
SELECT * FROM scmTenant1.vUsers 
```

给我错误：

> *对象“tUsers”、数据库“Sandbox”、模式“dbo”的 SELECT 权限被拒绝。*

如果我授予此帐户对`dbo`架构的访问权限，则查询将正常执行。

我想我真的很想授予表的查看权限。但我的问题是您能否授予用户访问视图的权限并限制该用户访问视图从中选择的基础表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:38:49.147

如果您将视图的所有者设为 dbo 而不是 scmTenant - 或创建执行相同操作的中间视图 - 那么您可以授予视图权限而不授予基础表权限。

IE

```
CREATE VIEW dbo.vUsers_T1
AS 
SELECT     ID, Username, Password 
FROM         dbo.tUsers 
WHERE        TenantID = 1

CREATE VIEW [scmTenant1].[vUsers] as
SELECT * FROM dbo.vUsers_T1 
```

或者，您可以创建一个返回当前租户 ID 的函数，并在 dbo 中创建一个引用该 ID 的视图。

```
CREATE VIEW dbo.vUsers
AS 
SELECT     ID, Username, Password 
FROM         dbo.tUsers 
WHERE        TenantID = dbo.GetCurrentTenant() 
```

# python - Python - 插值/pcolor 不均匀间隔的 numpy 矩阵

> ID：13032819
> 
> 赞同：1
> 
> 时间：2012-10-23T14:31:45.247
> 
> 标签：python, numpy, matplotlib, scipy, mayavi

我目前有一个大约 100x120 2d numpy 矩阵。索引指的是“坐标”，矩阵中的值是“高度”，我正在尝试使用类似于此处显示的“二维样条表示”的 pcolor 绘制此数据：

[http://docs.scipy.org/doc/scipy-0.7.x/reference/tutorial/interpolate.html](http://docs.scipy.org/doc/scipy-0.7.x/reference/tutorial/interpolate.html)

我的问题是，虽然我所有的“坐标”和“高度”都是整数，但坐标不是均匀的空间。例如，只有特定的行包含数据（不等间距），并且包含数据的每一行对于其他每个条目都只有一个“高度”值（每行包含数据的间距相同）。我的意思的一个简单例子如下：

```
[[nan,   3, nan,   1, nan,   2], 
 [nan, nan, nan, nan, nan, nan],
 [nan,   5, nan,   2, nan,   3],
 [nan, nan, nan, nan, nan, nan],
 [nan, nan, nan, nan, nan, nan],
 [nan, nan, nan, nan, nan, nan],
 [nan,   4, nan,   1, nan,   2]] 
```

我一直在尝试遵循我链接到的插值/pcolor 示例，但没有成功。我的目标是在我的所有数据上绘制一个漂亮的连续 pcolor 类型图，在带有数据的点之间进行插值以填充这些 nan。

如果您能提供任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:21:21.260

What's the problem? You just need to extract the indexes of the cells with values and pass those to the interpolate function with the 'height' values. There's some code that does this below.

```
import numpy as np
from numpy import nan
from scipy import interpolate
import matplotlib.pyplot as plt

a = np.array([[nan,   3, nan,   1, nan,   2], 
 [nan, nan, nan, nan, nan, nan],
 [nan,   5, nan,   2, nan,   3],
 [nan, nan, nan, nan, nan, nan],
 [nan, nan, nan, nan, nan, nan],
 [nan, nan, nan, nan, nan, nan],
 [nan,   4, nan,   1, nan,   2]])

x, y = np.where(np.isfinite(a))
z = a[x,y]

xnew,ynew = np.mgrid[0:6:70j,0:6:70j]
tck = interpolate.bisplrep(x,y,z,s=0, kx=1, ky=1)
znew = interpolate.bisplev(xnew[:,0],ynew[0,:],tck)

plt.figure()
plt.pcolor(xnew,ynew,znew)
plt.colorbar()
plt.title("Interpolated function.")
plt.show() 
```

The result will look something this:

![enter image description here](../Images/6a7a9b26eff64461cbe0af218ed73640.png)

Note that this doesn't match the exact orientation of your matrix. To do so you would have to change the origin of the plot to be in the top left corner and possibly transpose the data. I'll leave that as an exercise to you.

Also, the method of getting the indexes of the non-na values is a little crude, so perhaps someone else could comment on that (thanks to seberg for the tip).

# jquery - 使用jQuery单击后无法检索正确的复选框值

> ID：13032833
> 
> 赞同：0
> 
> 时间：2012-10-23T14:32:26.553
> 
> 标签：jquery, checkbox, jquery-events

我有一个复选框。我已经为复选框分配了一个点击事件。在调用的方法中，我想查看复选框是否被选中。预期的结果是，如果未选中复选框并单击它，则在该方法中选中的值应为“true”，反之亦然。我的代码无法得到这个结果。检查时我总是得到“假”。我该如何解决这个问题？

我使用了错误的事件吗？我使用 jQuery 1.8.2

我的代码：

```
$(document).ready(function () {
  $(".UpdateCheckboxInstant").change(UpdateInstant);
});

function UpdateInstant() {
  //var checked = $(".UpdateCheckboxInstant").is(":checked");
  var checked = $(this).is(":checked");
  alert(checked); // this always says "false" :(
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:37:57.540

在 jsFiddle 上看看[这个。](http://jsfiddle.net/LaFmQ/)我认为它实际上对我有用。

```
<input type="checkbox" class="UpdateCheckboxInstant" />​

$(document).ready(function () {
  $(".UpdateCheckboxInstant").change(UpdateInstant);
});
function UpdateInstant() {
  //var checked = $(".UpdateCheckboxInstant").is(":checked");
  var checked = $(this).is(":checked");
  alert(checked);
}
​ 
```

# python - 基于两列中的值合并其他列中的值

> ID：13032834
> 
> 赞同：1
> 
> 时间：2012-10-23T14:32:34.400
> 
> 标签：python, merge, pandas

我有一个包含四列的制表符分隔文件。我需要为“col1”和“col2”中的每个唯一值对组合“col3”和“col4”。示例和输出如下所示。

我正在考虑的一种方法是使用嵌套循环：外循环按顺序读取行，内循环从头开始读取所有行并查找 map。然而，这个过程似乎是计算密集型的。

有没有其他方法可以做到这一点。

```
col1    col2    col3    col4
a   c   1,2 physical
a   c   2,3 genetic
b   c   22  physical 
b   d   33,44   genetic
c   e   1,2 genetic
c   e   2   physical
c   f   33,44   physical
c   f   3   genetic
a   a   4   genetic
e   c   1,2 xxxxx

col1    col2    col3    col4
a   c   1,2,3   genetic,physical
a   a   4   genetic
b   c   22  physical 
b   d   33,44   genetic
c   e   1,2 genetic,physical,xxxxx
c   f   3,33,44 genetic,physical 
```

如果 'col1' 和 'col2' 像上面最后一行那样切换，它的值会合并为 'xxxxx'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:39:21.750

我将创建一个键字典，这些键是包含 column1 和 column2 数据的元组。这些值将是一个包含 column3 和 column4 数据的列表...

```
from collections import defaultdict
with open('test.dat') as f:
    data = defaultdict( lambda:([],[]))
    header = f.readline()
    for line in f:
        col1,col2,col3,col4 = line.split()
        col3_data,col4_data = data[(col1,col2)]  #data[frozenset((col1,col2))] if order doesn't matter
        col3_data.append(col3)
        col4_data.append(col4) 
```

现在对输出进行排序并写入（使用 a 连接 column3 和 column4 列表，`','`使用`set`和`sorted`正确排序）

```
with open('outfile.dat','w') as f:
   f.write(header)
   #If you used a frozenset in the first part, you might want to do something like:
   #for k in sorted(map(sorted,data.keys())):
   for k in sorted(data.keys()):
       col1,col2 = k
       col3_data,col4_data = data[k]
       col3_data = ','.join(col3_data) #join the list
       col3_data = set(int(x) for x in col3_data.split(',')) #make unique integers
       col3_str = ','.join(map(str,sorted(col3_data)))       #sort, convert to strings and join with ','
       col4_data = ','.join(col4_data)  #join the list
       col4_data = sorted(set(col4_data.split(',')))  #make unique and sort
       f.write('{0}\t{1}\t{2}\t{3}\n'.format(col1,col2,col3_str,','.join(col4_data))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T16:09:21.453

@mgilson 提供了一个很好的不需要额外零件的解决方案（+1）。我看到它`pandas`也被标记了，所以为了完整起见，我将给出一个`pandas`等价的：

```
import pandas as pd

df = pd.read_csv("merge.csv",delimiter=r"\s*")

key_cols = ["col1", "col2"]
df[key_cols] = df[key_cols].apply(sorted, axis=1)

def join_strings(seq, key):
    vals = [term for entry in seq for term in entry.split(',')]
    return ','.join(sorted(set(vals), key=key))

new_df = df.groupby(key_cols).agg({"col3": lambda x: join_strings(x, int),
                                   "col4": lambda x: join_strings(x, str)})
new_df.to_csv("postmerged.csv") 
```

产生

```
In [173]: !cat postmerged.csv
col1,col2,col3,col4
a,a,4,genetic
a,c,"1,2,3","genetic,physical"
b,c,22,physical
b,d,"33,44",genetic
c,e,"1,2","genetic,physical,xxxxx"
c,f,"3,33,44","genetic,physical" 
```

所有这一切都是（1）对前两列进行排序，使其`e c`变为`c e`，（2）通过`col`和对术语进行分组`col 2`，然后聚合（`agg`）`col3`并`col4`通过逗号连接扁平术语的排序集。

`groupby`对于这样的事情真的很方便。潜伏在某处的功能也可能有一个内置的替代品`join_strings`，但我不确定。

# mysql - MySQL错误子查询返回超过1行

> ID：13032835
> 
> 赞同：2
> 
> 时间：2012-10-23T14:32:35.233
> 
> 标签：mysql

我有以下查询：

```
SELECT 
    users.*,
    classes.*, 
    evaluation.student_id, 
    evaluation.class_id, 
    evaluation.chapter_title,
    (SELECT
        `score`
     FROM 
        `evaluation`
     WHERE 
        `class_id` = 1 
     AND 
        `id` 
     IN
        (SELECT 
            MAX(`id`)
         FROM
            `evaluation`
         WHERE
            `class_id` = 1
         GROUP BY
            `chapter_title`)
     GROUP BY
        `chapter_title`) 
     AS
        `score`,
     (SELECT
        `total_score`
      FROM
        `evaluation`
      WHERE
        `class_id` = 1
      AND
        `id`
      IN
        (SELECT 
            MAX(`id`)
         FROM
            `evaluation`
         WHERE
            `class_id` = 1
         GROUP BY
            `chapter_title`)
      GROUP BY
         `chapter_title`)
      AS
         `total_score`
      FROM
        (`evaluation`
      INNER JOIN
        `users`
      ON 
        evaluation.student_id=users.id)
      INNER JOIN
        `classes`
      ON
        evaluation.class_id=classes.id
      WHERE
        users.role='student'
      AND
        evaluation.class_id = 1
      AND
        evaluation.student_id = 8 
```

但是当我在 phpmyadmin 中执行此查询时，它会显示一条错误消息：

```
#1242 - Subquery returns more than 1 row 
```

查询中有什么问题。请帮忙。提前致谢。

我有这个表：

用户 ![在此处输入图像描述](../Images/1f03ef6ad23b809a22f314677d4bc24b.png)

班级 ![在此处输入图像描述](../Images/d8d6cc19c4e205395d8899d87661026e.png)

评估 ![在此处输入图像描述](../Images/388e71f776b36952a9c307ccf6328e72.png)

在评估表中（最后一张图片）..我只想返回一个不同的 chapter_title 或一个分组的 chapter_title，它具有最高的 id 并且学生 ID 为 8。

我需要使用这个查询......但返回一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:19:02.703

问题是您的两个查询都返回多条记录：

```
SELECT `score`
     FROM `evaluation`
     WHERE `class_id` = 1 
       AND `id` IN (SELECT  MAX(`id`)
                     FROM `evaluation`
                     WHERE `class_id` = 1
                     GROUP BY `chapter_title`)
     GROUP BY `chapter_title`;

SELECT `total_score`
      FROM `evaluation`
      WHERE `class_id` = 1
        AND `id` IN (SELECT  MAX(`id`)
                     FROM `evaluation`
                     WHERE `class_id` = 1
                     GROUP BY `chapter_title`)
      GROUP BY`chapter_title`; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/eee0e/1)

我将您的查询稍微更改为以下内容：

```
SELECT u.*,
    c.*, 
    e.student_id, 
    e.class_id, 
    e.chapter_title,
    (SELECT `score`
     FROM `evaluation` e1
     WHERE `class_id` = 1 
       AND e.id = e1.id
       AND `id` IN (SELECT  MAX(`id`)
                     FROM `evaluation`
                     WHERE `class_id` = 1
                     GROUP BY `chapter_title`)
     GROUP BY `chapter_title`)  AS`score`,
     (SELECT `total_score`
      FROM `evaluation` e1
      WHERE `class_id` = 1
        AND e.id = e1.id
        AND `id` IN (SELECT  MAX(`id`)
                     FROM `evaluation`
                     WHERE `class_id` = 1
                     GROUP BY `chapter_title`)
      GROUP BY`chapter_title`) AS `total_score`
FROM `evaluation` e
INNER JOIN `users` u
  ON e.student_id=u.id
INNER JOIN `classes` c
  ON e.class_id=c.id
WHERE u.role='student'
  AND e.class_id = 1
  AND e.student_id = 8 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/92414/17)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:16:22.257

这是[更正的小提琴](http://sqlfiddle.com/#!2/92414/32)：

```
SELECT
    users.*,
    classes.*,
    evaluation.student_id,
    evaluation.class_id,
    evaluation.chapter_title,
    evaluation.score,
    evaluation.total_score
 FROM
    evaluation
 INNER JOIN users
 ON
    evaluation.student_id=users.id
  INNER JOIN
    classes
  ON
    evaluation.class_id=classes.id
  WHERE
    users.role='student'
  AND
    evaluation.class_id = 1
  AND
    evaluation.student_id = 8
 AND
 EXISTS
    (SELECT
        *
     FROM
        evaluation
     WHERE
        class_id = 1
    HAVING MAX(id) = evaluation.id)
 GROUP BY
    chapter_title 
```

主要变化：

1.  而不是`IN`，使用`EXISTS`（应该更快，因为它不需要返回所有子行）；

2.  不需要一些子查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T14:33:58.940

您需要`LIMIT 1`在所有子查询上使用，以确保只返回一个值。

**例如**

```
select users.*, classes.*, evaluation.student_id, evaluation.class_id, evaluation.chapter_title, (
        select `score`
        from `evaluation`
        where `class_id` = 1
            and `id` in (
                select MAX(`id`)
                from `evaluation`
                where `class_id` = 1
                group by `chapter_title`
                )
        group by `chapter_title`
        limit 1
        ) as `score`, (
        select `total_score`
        from `evaluation`
        where `class_id` = 1
            and `id` in (
                select MAX(`id`)
                from `evaluation`
                where `class_id` = 1
                group by `chapter_title`
                )
        group by `chapter_title`
        limit 1
        ) as `total_score`
from (
    `evaluation` inner join `users` on evaluation.student_id = users.id
    )
inner join `classes` on evaluation.class_id = classes.id
where users.role = 'student'
    and evaluation.class_id = 1
    and evaluation.student_id = 8 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T14:34:59.880

您的`SELECT scores`子查询（第一个）很可能返回不止一行。它是唯一没有在`IN()`子句中使用的，其结果作为父查询中的字段返回。由于它“返回”到一个字段，它必须产生一个单值+单行结果集。

# xcode - Xcode 调试器为 0x01 的 BOOL 值显示 NO

> ID：13032837
> 
> 赞同：3
> 
> 时间：2012-10-23T14:32:42.223
> 
> 标签：xcode, gdb

啊，我遇到了一个非常奇怪的问题。

我有一个断点集，我正在尝试检查一个 BOOL 值。locals 部分的摘要清楚地表明它是 NO。但是，我很确定传入的参数应该评估为 YES。

因此，我将鼠标悬停在有问题的变量上，然后出现以下屏幕，其中值为 0x01，摘要显示为 NO。（附上屏幕供您娱乐）。

这里发生了什么？ ![在此处输入图像描述](../Images/791208d8539472cfb9166c487fd7deb6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T07:52:25.747

我已经向 Apple 报告了这个错误，这是我可以使用的解决方法（解决方案）：

> 右键单击变量视图中的变量并选择**“编辑摘要格式...”**。你看到那里的字符串“NO”了吗？如果是这样，请将其删除。

# magento - Magento - 目录价格规则

> ID：13032843
> 
> 赞同：1
> 
> 时间：2012-10-23T14:32:55.383
> 
> 标签：magento

当我选择一个类别（在规则条件中）时，一切正常，但是如果我在数据库中选择更多类别（在规则条件中）不会记录任何内容，但在我的管理面板中似乎一切正常。

Magento 版本。1.4.0.1

# math - 拟合金字塔的质量分析

> ID：13032848
> 
> 赞同：0
> 
> 时间：2012-10-23T14:33:05.820
> 
> 标签：math, 3d, geometry, computational-geometry

很抱歉在编程网站上发布此内容，但可能有很多专业的几何、3d 几何编程人员......所以允许这个。

我得到了带有原始点数据的最佳拟合平面。我想为这个数据建模一个金字塔，因为数据代表一个金字塔。我的这种建模方法是

> 1.  查找每对相邻平面的交线（例如 AB、CD 等）
> 2.  然后，通过与先前找到的线相交来找到金字塔顶部 (T)，因为这些线不通过单个点
> 3.  将可用的侧面与所需的水平面相交以获得地下室
> 
> 在图中 - 黑色三角形是原始最佳拟合三角形；红色和蓝色三角形是模型三角形
> 
> 我想证明这些点更适合金字塔模型，而不是适合给定的最佳拟合平面。（假设原始平面如图所示更新）

实际上，第 2 步是使用加权最小二乘法完成的。每条相交线都分配有权重。权重与相应平面的法向量之间的角度成正比。在这一步中，我试图找到最接近所有相交线的点，即点T。根据权重，线的位置可能会随着高权重线的影响而改变。这意味着，原来的飞机可能会改变一点。`So I want to show that these new positions of planes are well fitted for the original point data than original planes.`

有什么想法可以展示这个吗？我正在考虑使用 RMSE 并在 RMSE 之前和之后显示。但是我再次认为我应该使用加权 RMSE，因为所有指向 T 点的飞机都会受到影响，因此我应该将其作为一个全局案例来处理，而不是查看单个飞机......但我无法找到一种方法来展示这一点. 或者也许我应该使用其他措施......所以，我很困惑，不知道要展示这个......请帮助我......</p>

![在此处输入图像描述](../Images/d40f1fd41fd06cc1f5c3f796798c3e4d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:12:07.150

如果给定了最合适的平面，为什么不将它们三个相交以获得一个明确的`T`，*然后*确定线`AT`、`BT`和`CT`？

顺便说一句，这不是一个修辞问题。您的实际问题似乎是为了确保您的程序产生“合身”的结果，但您没有解释或描述您正在寻找什么样的合身！

不幸的是，如果没有这些信息，您的问题将无法按要求回答。如果您描述了您的目标，我们或许能够帮助您实现它们——或者，如果您还没有为自己阐明这些目标，那么该练习可能足以让您回答自己的问题……

* * *

也就是说，我会提到您开始使用的飞机和您的程序最终使用的飞机之间的唯一区别应该是由于浮点错误。这是因为从几何上讲，所有三条线都应该与生成它们的平面相交。

# ios - 应用程序处于活动状态时如何处理传入的短信

> ID：13032849
> 
> 赞同：0
> 
> 时间：2012-10-23T14:33:09.210
> 
> 标签：ios, xcode, sms, ios5.1

我正在开发一个发送短信的 iOS 应用程序。当应用程序处于活动状态时，处理传入消息的最佳方式是什么。这是自动完成的还是我必须在我的应用程序中通过

```
applicationWillResignActive:(UIApplication *)application 
```

方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:56:55.060

您不需要/不应该需要处理传入的短信。

当设备收到短信（或这些天的 iMessage）时，用户将收到他们选择的方法的通知。他们可能会通过该通知离开您的应用程序，但您无法确定是 SMS 引起的。

CoreTelephony 为人们提供了一些处理呼叫的能力，但与短信无关。对不起。因此，您的应用无法确定 SMS 消息的状态。您可以发送 SMS 消息，因为操作系统为您提供了一个视图控制器来执行此操作，但您不能对它们做任何其他事情。

# c - 在 C 中的 Struct 处初始化 const 数组

> ID：13032851
> 
> 赞同：4
> 
> 时间：2012-10-23T14:33:19.867
> 
> 标签：c, embedded

代码片段：

```
static struct
{
     static const unsigned char myConstArray[] =
     {
           50, 51, 52, 52, 53, 54, 55, 55, 56, 57, 58, 58, 59, 60,
     };

     //more....
 }_SomeValues; 
```

这怎么能行？（抱怨 after = a ; 不见了）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T14:36:44.233

改成：

```
static struct
{
     const unsigned char myConstArray[14];

} _SomeValues =
    {
        {
           50, 51, 52, 52, 53, 54, 55, 55, 56, 57, 58, 58, 59, 60,
        }
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:34:53.610

你不能在结构中有静态变量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T14:48:02.480

可能下面的链接也可能对您有所帮助

[C++ 类中的静态常量初始化结构数组](https://stackoverflow.com/questions/4605058/static-const-initialised-structure-array-in-c-class)

[c ++以数组作为成员初始化结构](https://stackoverflow.com/questions/2650374/c-initializing-a-struct-with-an-array-as-a-member)

# c# - 如果条件显示单选按钮 ID 错误

> ID：13032856
> 
> 赞同：0
> 
> 时间：2012-10-23T14:33:33.947
> 
> 标签：c#, asp.net

我在 asp.net 的表中有以下输入标签

```
<td class="style18">
    <asp:CheckBox ID="chkContentTone" onclick="enableGroupBoxTone()" 
                    runat="server" Text="Content Tone" CssClass="ChkBoxStyle"/>&nbsp;
</td>
<td class="styleCntTon">
    <input type="radio" id="rdBtnPositive" name="q2" title="Posotivetitle" value="positive"/>
    <label for="rdbtnPositive" class="RadioGroup">Positive</label>
    <input type="radio" id="rdBtnNegative" name="q2" title="Negativetitle" value="negative"/>
    <label for="rdBtnNegative" class="RadioGroup">Negative</label>
    <input type="radio" id="rdBtnNeutral" name="q2" title="Neutraltitle" value="neutral"/> 
    <label for="rdBtnNeutral" class="RadioGroup">Neutral</label>
</td> 
```

但是当我输入`if`条件时，单选按钮会显示错误。

![包含条件时出错](../Images/92d1d2b46e5053cc4f9bb31a03691344.png)

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:39:28.937

尝试使用 Asp.net 控件：

```
<asp:RadioButton runat="server" ... /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T14:39:54.950

您发布的标记不包括服务器端控件，因此无法通过服务器端代码访问这些控件。

看着你想要的似乎你需要一个`asp:RadioButton`

添加后，`asp:radiobutton`您可以在服务器端代码中访问这些控件。

改变这个：

`<input type="radio" id="rdBtnPositive" name="q2" title="Posotivetitle" value="positive"/><label for="rdbtnPositive" class="RadioGroup">Positive</label>`

对此：

`<asp:RadioButton id="rdBtnPositive" Label="Positive" runat="server" />`

然后你可以这样做：

```
if(rdBtnPositive.Checked)
 {
  //code it...
 } 
```

您需要对所有三个单选按钮执行此操作，每个单选按钮都应该有一个唯一的 id 并且是服务器端控件，即`asp:RadioButton`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T14:37:45.590

您应该使用 asp:RadioButton 才能在后面的代码中访问。

所以基本上用“asp：RadioButton”替换所有“输入”标签并删除像Type这样的不明智的属性。

asp:RadioButton 使用示例

# actionscript-3 - 从 AIR 应用程序将视频上 传到 Facebook

> ID：13032857
> 
> 赞同：0
> 
> 时间：2012-10-23T14:33:34.587
> 
> 标签：actionscript-3, facebook-graph-api, air, adobe

开发捕获视频的基于 AIR 的应用程序。如果他们愿意，用户将能够上传到 Facebook。

现在我对将视频上传到 Facebook 的要求感到困惑。

即使这在技术上不是一个 Facebook 应用程序，我是否需要创建一个 Facebook 应用程序 ID？

我是否还需要使用 facebook-actionscript SDK？

我在其他地方读到 API 需要在 Web 视图中启动 Facebook 登录。

或者在我的情况下有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:39:54.497

> 即使这在技术上不是一个 Facebook 应用程序，我是否需要创建一个 Facebook 应用程序 ID？

是的。

> 我是否还需要使用 facebook-actionscript SDK？或者在我的情况下有其他选择吗？

与 API 对话是通过 HTTP 进行的——因此您可以使用任何允许您发出 HTTP 请求的技术。

但是，使用已经具有用于通常 FB API 内容的方法的框架/SDK 会比自己处理所有 HTTP 内容要简单得多。

# javascript - 来自 DOM 的 JavaScript 算术和 NaN 值的问题

> ID：13032862
> 
> 赞同：1
> 
> 时间：2012-10-23T14:33:57.660
> 
> 标签：javascript, html

我遇到的问题是我的功能`calculate()`。该程序的目的是使用 JavaScript 和 html 创建动态电子表格，并使用 CSS 进行装饰。

到目前为止，我已经将值插入到电子表格中，但是当尝试对其进行简单的加法计算时，我从单元格中获取的值没有被正确地获取。

这是给我带来问题的具体功能。我为草率的代码道歉。任何帮助将不胜感激，我确信这是我所缺少的一些简单的东西。

编辑:: 更正了问题，对于那些想知道的人，我不得不调用 not innerHTML.text 或 value。它必须只是相关单元格上的 .innerHTML 。

```
function calculate() {
    //create two variables to get the values in the row and columns
    var row1, row2, col1, col2, total, totalInsert;

    var row = document.getElementById("row");
    var col = document.getElementById("col");
    var value = document.getElementById(row + "_" + col);
    var formula = document.getElementById("inputText");

    formula = formula.value; //=SUM(1,2,2,1)
    formula1 = formula;

    //get the raw values to ints
    row = row.value;
    col = col.value;

    //get JUST the formula in questions part    
    formula = formula.substr(0,4);

    //Parsing the the selected cells from =sum(1,1,2,1) into  Cell ID's
    col1 = parseInt(formula1.substr(5, 1));//row 1
    row1 = parseInt(formula1.substr(7, 1));
    col2 = parseInt(formula1.substr(9, 1));
    row2 = parseInt(formula1.substr(11, 1)); // column2

    //this gives us the proper cell's address. id=1_1 
    var td1 = col1 + "_" + row1;
    var td2 = col2 + "_" + row2;

    //problem starts around here
    var sum = document.getElementById(td1);
    var sum2 = document.getElementById(td2);

    //this returns a undefined value
    sum = sum.value;
    sum2 = sum2.value;

    //this restults in a NaN
    sum = parseInt(sum);
    sum2 = parseInt(sum2);

    //creating the total value
    total = sum + sum2;

    //returning values
    totalInsert = document.getElementById(td1).innerHTML = total;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:06:22.077

这部分对我来说似乎很奇怪，您正在选择两个元素，然后将它们组合为一个字符串以查找另一个元素？

```
var row = document.getElementById("row");
var col = document.getElementById("col");
var value = document.getElementById(row + "_" + col); 
```

我不确定这会满足你的期望......根据我的经验，你会得到这样的东西：

```
document.getElementById('[object Object]_[object Object]'); 
```

或者：

```
document.getElementById('[object HTMLDivElement]_[object HTMLDivElement]'); 
```

...取决于浏览器。现在显然你*可以*有一个具有那种 id 的元素，但这有点疯狂；）

在我看来，`row`and`col`元素是`inputs`，所以也许你的意思是：

```
var row = document.getElementById("row");
var col = document.getElementById("col");
var value = document.getElementById(row.value + "_" + col.value); 
```

# jquery - jquery 水平 ul/navbar 滑块

> ID：13032863
> 
> 赞同：0
> 
> 时间：2012-10-23T14:33:57.680
> 
> 标签：jquery, slider, uinavigationbar, navbar

我正在开发一个带有水平导航栏（twitter bootstrap 风格）的常规主页。

问题：根据您进入网站时的输入，页面将在导航栏中显示混合按钮。它可能会显示 4 个按钮或 20 个按钮，具体取决于该输入。

当按钮太多时（一个简单的 if 按钮 > x），我想应用一个水平滑块，当用户单击上一个/下一个按钮时，该滑块将动画/滑动一个按钮。

到目前为止，我已经尝试过 bxSlider (www.bxslider.com) 和 hoverscroll。悬停滚动是好的，但我需要一些基于点击而不是鼠标悬停的东西。BxSlider 仅在每次单击时滑动固定大小，我想要滑动到元素而不是像素的东西。

谢谢。

```
<div id="divone">
  <div id="divtwo">
    <ul id="my-list">
      <li>Link<li>
      <li>Link<li>
      <li>Link<li>
      <li>Link<li>
      <li>Link<li>
       etc.
    <ul>
  </div>
</div>

            #divone
            {
                width: 678px;
                height: 51px;
                position: relative;
            }

            #divtwo
            {
                width: 678px;
                height: 51px;
                overflow: hidden;
            }

            #my-list
            {
                width: 6000px;
            } 
```

这就是结构，可能还有另一个“溢出：隐藏”div 父级，所以我可以创建一个可滚动/滑动区域。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:51:00.967

在您的规格中，您声明如果您有一定数量的按钮，比如“超过 x 个按钮”，您希望滑块出现。因此，您希望创建一个无论是否有滑块都看起来正常的导航栏。不幸的是，除非我能看到你的 CSS，否则我无法帮助你解决这方面的问题；我只能帮助你使用 jQuery。

首先，你必须写出你的条件：

```
if ($("button").length > x) { ...show slider...} 
```

现在在我们继续之前，我想指出一个明显的事实，即制作滑块有很多不同的方法。无法查看您的代码（我知道此时我可能听起来像是破纪录，但您对 Stack Overflow 还是新手，所以这是我教您的），我能想到的最兼容的解决方案是创建导航栏并在左右两侧为滑块按钮留出足够的空间（我们将操纵`visibility`属性来显示/隐藏它们，而不是`display`属性 - 这也将防止导航栏在较慢的浏览器中跳跃加载） .

为了实现这一点，我们需要从按钮的两个元素（仅显示选择器）开始：

```
var buttonLeft = $("#buttonLeft");
var buttonRight = $("#buttonRight"); 
```

接下来，如果我们的条件为真，我们将要添加以下要运行的行：

```
buttonLeft.css("visibility", "visible")
          .on("click.sliderLeft", function() {...show more on the left...};
buttonRight.css("visibility", "visible")
           .on("click.sliderRight", function() {...show more on the right...}; 
```

现在在我们开始编写滑动函数之前，重要的是您要记住，当您希望滑块*从左侧显示更多元素时*，您实际上希望正在滑动的元素*向右移动*。

这也是脚本的另一部分，可以通过几十种方式实现。您选择的实现将主要基于您的 HTML 和 CSS。对于这个操作方法，我将简单地假设您将使用带有`position: relative`和带有一些包装 div的滑动元素`overflow: hidden`。

```
var navBar = $("#navBar"); // sliding element 
```

下一步是确定要用于幻灯片效果的内容。为了方便起见（并且因为您使用的是引导程序-因此，无论如何，您更有可能使所有按钮的大小相同）我将假设您所有的导航按钮都具有相同的大小：

```
var navButtonWidth = $(".navButtons").width(); 
```

为了方便起见，我还将假设您将按钮的左右边距都设置为`5px`. 我将进一步假设每个动画将花费 1000 毫秒。因此，您需要将以下行添加到单击处理程序中以用作幻灯片效果：

```
var slideAmount = navButtonWidth + 10; //button width plus margin left plus margin right

//left button
...
var slideLeftStr = "+=" + slideAmount + "px";
navBar.animate({ left: slideStr }, 1000);
...

//right button
...
var slideRightStr = "-=" + slideAmount + "px";
navBar.animate({ left: slideStr }, 1000);
... 
```

差不多就是这样。您将不得不对其进行定制、自定义、添加一些条件以在栏位于末尾时禁用滑动效果、添加一些解决方法以防止双击等问题，但这应该会给您一个基本的开始点制作自己的动态幻灯片效果。

如果您有任何问题，请告诉我。祝你好运！:)

**更新：**

要回答有关使用按钮滑动到特定按钮的问题，答案是“是的，您可以这样做”，但您真正想要做的是滑动到下一个或上一个按钮的开始位置（分别）。我可以告诉你，这可能看起来很糟糕，但无论如何这里是代码：

```
...
//put this function outside of the click handlers
var slideTo = function (destButton) {
    //destButton is the button you are sliding to
    return destButton.offset().left + "px";   
}     

//put this in both click handlers
...
var destinationButton = ....get the previous or next button based on which handler you're in
navBar.animate({ left: slideTo(destinationButton) }, 1000);
... 
```

但是，我建议的选项是编写一个单击处理程序，只要用户仍将鼠标悬停在按钮上，导航栏就会缓慢滑动。

# php - 从 php 中的 $_get 中获取值

> ID：13032865
> 
> 赞同：0
> 
> 时间：2012-10-23T14:33:59.143
> 
> 标签：php, mysql, phpmyadmin

为什么值不是 0 并插入到我的表中？这是我的代码：

```
<?php
    if ($_GET["subscribe"] == 0) 
        $Competition = $_GET["subscribe"];
        { 
            if (isset($_GET["subscribecontestant"]))
            {
                $sql1 = "INSERT INTO wedstrijdresultaten (WedstrijdID,DuifID,Username) VALUES (".$Competition.",".$_GET["subscribecontestant"].", '".$_SESSION['user']."')";
                $result1 = mysql_query($sql1);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:37:07.710

的错误放置`{`。First`{`必须在第一个`if`语句旁边

```
if ($_GET["subscribe"] == 0) {
 $Competition = $_GET["subscribe"];
if (isset($_GET["subscribecontestant"]))
{
 $sql1 = "INSERT INTO wedstrijdresultaten (WedstrijdID,DuifID,Username) VALUES (".$Competition.",".$_GET["subscribecontestant"].", '".$_SESSION['user']."')";
$result1 = mysql_query($sql1);
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:37:48.620

您的代码中有一个带有`if`语句括号的小错误。尝试这个

```
if ($_GET["subscribe"] == 0) 
{
    $Competition = $_GET["subscribe"];

    if (isset($_GET["subscribecontestant"]))
    {
         $sql1 = "INSERT INTO wedstrijdresultaten (WedstrijdID,DuifID,Username) "
               . "VALUES (".$Competition."," 
               . $_GET["subscribecontestant"] . ", '" 
               . $_SESSION['user']."')";
         $result1 = mysql_query($sql1);
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T14:38:08.180

可能有很多原因导致这不起作用，如其他答案所示缺少大括号，而且我们不知道您作为 GET 参数传入的内容。

但是您可能应该忽略它们并在您做更多之前咨询[http://www.phptherightway.com/#databases ，您的示例对安全漏洞很开放。](http://www.phptherightway.com/#databases)

# javascript - 如何根据另一个 div 的位置显示或隐藏 div

> ID：13032866
> 
> 赞同：2
> 
> 时间：2012-10-23T14:34:06.443
> 
> 标签：javascript, jquery

我有以下水平滑动 div 的 jquery：

```
$('.nextcol').click(function() {
    $('.innerslide').animate({'left': '-=711px'}, 1000);
});

$('.prevcol').click(function() {
    $('.innerslide').animate({'left': '+=711px'}, 1000);
}); 
```

我想要发生的是......如果*div.innerslide*有一个**左侧的位置：0px**那么我想隐藏*div.backarrow*。如果该位置未**离开： 0px**，则显示它。

任何帮助将不胜感激。

**编辑（添加 HTML 标记）**

```
<div class="backarrow prevcol">

<div id="mainleft" class="overflowhidden">
        <div class="innerslide">
            <div class="col">my content including <a href="#" class="nextcol">next</a></div>
            <div class="col">my content including <a href="#" class="nextcol">next</a></div>
            <div class="col">my content including <a href="#" class="nextcol">next</a></div>
        </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:43:09.977

试试这个：

```
if ($('.innerslide').css("left") == 0) {
   $('div.backarrow').hide(); 
} else {
   $('div.backarrow').show();
} 
```

**双击问题的修复：** 根据您在评论中描述的访问者双击时的问题，听起来双击导致两个动画事件触发。为了防止这种情况发生，您可以在动画运行时禁用点击处理程序，并在动画完成后重新启用它，或者您可以尝试编写一个新线程来不断检查元素的位置。这些解决方案中的一个不是一个好主意 - 我会让你弄清楚哪个:) - 但另一个实际上有一个非常简单的解决方案，只需要对你现有的代码进行很少的更改（并且实际上可能会减少你的开销。数量）：

```
$('.nextcol').on("click.next", function() {
    $('.innerslide').animate({'left': '-=711px'}, 1000, showHideBack());
    $(this).off("click.next");
});

$('.prevcol').on("click.prev", function() {
    $('.innerslide').animate({'left': '+=711px'}, 1000, showHideForward());
    $(this).off("click.prev");
}); 
```

然后将此行添加到（如果您正在使用该行，则为`showHideBack()`补充）：`showHideForward()`

```
$('.nextcol').on("click.next"..... 
```

我建议您编写一个函数来设置每个单击处理程序，并编写一个函数来删除每个单击处理程序。这将使您的生活变得非常轻松，并且整个解决方案应该通过在动画运行时删除不必要的点击处理程序来减少开销。

注意：该`animation`方法经常在动画结束之前调用它的回调。因此，您可能希望`delay`在调用`showHide...`方法之前使用 a。

如果您有任何问题，请告诉我。祝你好运！:)

**更新：**

这是您给我的小提琴的[更新版本，所有错误都已解决。](http://jsfiddle.net/fSVuu/17/)看起来我在最初的解决方案中误解了你的部分目标，但我在这里把它理顺了。我还在这里包含了更新的 jQuery：

```
var speed = 1000;
var back = $("div.backarrow");
var next = $(".nextcol");
var prev = $(".prevcol");
var inner = $(".innerslide");

function clickNext(index) {
    next.off("click.next");
    inner.animate({
        'left': '-=711px'
    }, speed, function() {
        back.show(); //this line will only be hit if there is a previous column to show
            next.delay(speed).on("click.next", function() {
                clickNext();
            });
    });
}

function clickPrev() {
    prev.off("click.prev");
    inner.animate({
        'left': '+=711px'
    }, speed, function() {
        if (inner.css("left") == "0px") {
            back.delay(speed).hide();
            prev.delay(speed).on("click.prev", function() {
                clickPrev();
            });
        } else {
            back.delay(speed).show();
            prev.delay(speed).on("click.prev", function() {
                clickPrev();
            });
        }
    });
}

next.on("click.next", function() {
    clickNext();
});

prev.on("click.prev", function() {
    clickPrev();
});​ 
```

我还打算包含一个条件来检查您是否正在查看最后一列，但是，由于我不知道您的最终实现是什么，我不知道它是否适用。与往常一样，如果您需要任何帮助或澄清，请告诉我。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:54:36.973

您可以尝试该[`step`](http://api.jquery.com/animate/)选项 - 在动画的每个步骤中触发的回调函数：

```
$('.prevcol').click(function() {
    $('.innerslide').animate({ left: '+=711px' },
           {
               duration: 1000,
               step: function(now, fx) {
                      if (now === 0 ) {
                           $('div.backarrow').hide(); 
                      } else {
                           $('div.backarrow').show();
                      }
              }
    });
}); 
```

本文更多使用示例[jQuery animate() 步骤回调函数](http://cdmckay.org/blog/2010/03/01/the-jquery-animate-step-callback-function/)

# javascript - JavaScript 模板：将每个单词包装在 HTML 元素中的字符串中

> ID：13032869
> 
> 赞同：1
> 
> 时间：2012-10-23T14:34:16.940
> 
> 标签：javascript, html

我正在尝试修改 JavaScript 模板，以便特定字符串中的每个单词都包含在`<span>`元素中。我有：

```
<% var tagString = "Happy Sad Up Down", tags = tagString.split(" "), wrappedTags = ""; %>
<% for (var i = 0; i < tags.length; i++) { %>
    <% wrappedTags += "<span>" + tags[i] + "</span>"; %>
<% } %>
<p><%=wrappedTags%></p> 
```

问题是这会将`"<span>"`and输出`"</span>"`为文本，而不是 HTML，所以我最终会在页面上显示以下文本：

<span>快乐</span><span>悲伤</span><span>向上</span><span>向下</span>

此语法中是否有任何方法可以将包装`<span>`标签输出为 HTML？

* * *

更新：使用常规（非模板）语法，如果我简单地写入`wrappedTags`页面，它就可以工作：http: [//jsfiddle.net/4QtUd/](http://jsfiddle.net/4QtUd/)。但是，我无法找出在模板语法中执行此操作的等效方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:11:16.273

你可以做这样的事情，直接在循环中输出。

```
<% var tagString = "Happy Sad Up Down", tags = tagString.split(" "); %>
<p>
<% for (var i = 0; i < tags.length; i++) { %>
    <span><%= tags[i] %></span>
<% } %>
</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:38:16.000

尝试将您的`<`and替换`>`为 HTML 实体。 [http://www.w3schools.com/html/html_entities.asp](http://www.w3schools.com/html/html_entities.asp)

所以基本上：`< -> &lt;`和`> -> &gt;`

# winforms - 为什么 Dialogresult 为零？

> ID：13032870
> 
> 赞同：2
> 
> 时间：2012-10-23T14:34:22.643
> 
> 标签：winforms, null, delphi-prism, oxygene, dialogresult

这以前从未发生在我身上。

我在 uses 子句下确实有 System.Windows.Forms 命名空间，并且我能够使用 DialogResult 的属性。看看下面的代码。这就是我的程序中的问题所在。

```
if (thewinform.ShowDialog=DialogResult.OK) then 
```

我确实对其进行了调试，并打开了对话框 winform。一旦我单击 OK 按钮并返回检查 DialogResult，它就会跳过 if 代码块。此时，我注意到 DialogResult 实际上是**NIL**

我以前从未遇到过这样的事情。

有任何想法吗？谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:39:14.437

我找到了我的问题的答案。

当您想将 winform 纯粹用作对话框时，您不能有 FormClosing 事件。

对于我的 thewinform，我不小心创建了它的 FormClosing 事件并忘记了它。

```
method thewinform.thewinform_FormClosing(sender: System.Object; e: System.Windows.Forms.FormClosingEventArgs);
begin
    e.Cancel := true;
    hide;  
end; 
```

一旦我删除了这个 winform 事件，ShowDialog 和 DialogResult 就会按预期运行。

这与另一个 stackoverflow 问题非常相似，[为什么 ShowDialog 总是返回 DialogResult.Cancel？](https://stackoverflow.com/questions/7971649/why-does-showdialog-always-return-dialogresult-cancel?rq=1)

# svg - 引用 SVG 中的点数据

> ID：13032872
> 
> 赞同：1
> 
> 时间：2012-10-23T14:34:26.590
> 
> 标签：svg

我有绘制折线的SVG，例如：

```
<polyline points="500 10 500 20 500 30 500 40 500
    50 500 60 500 70 500 80 500 90 500
    101 500 111 500 121 500 131 500 141 500
    151 500 161 500 171 500 181 500 191 500
    202 500 212 500 222 500 232 500 242 500
    252 500 262 500 272 500 282 500 292 500
    303 500 313 500 323 500 33 ... "/> 
```

由于以下原因，我想避免在属性中指定点：

1.  点的数量可能会变得非常大（1,000 个数字），并且将它们放在属性中会使 SVG 难以阅读和处理。

2.  这组点在同一个 SVG 中多次使用，我想避免为每条绘制的线重复它。

我知道对于文本，您可以使用它`<tref>`来引用其他地方定义的文本。这也可以为积分做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:38:25.273

您可以使用[`<use/>`](https://developer.mozilla.org/en-US/docs/SVG/Element/use)( [specification](http://www.w3.org/TR/SVG/struct.html#UseElement) ) 元素：

```
<defs>
  <polyline points="..." id="foo" />
</defs>
<use xlink:href="#foo" x="100" y="100" stroke="#ff0000" /> 
```

但是，纯 SVG 无法从属性中移动点数据。您必须使用其他一些技术、JavaScript、XSLT 或其他预处理或后处理来执行此操作。

*编辑：*孩子们，不要在家里尝试这个，但你可以使用 XML 实体将点存储在另一个地方：

```
<!DOCTYPE svg [
 <!ENTITY points "[your points go here]">
]>
<svg>
  <polyline points="&points;" />
</svg> 
```

但是，我强烈反对这种解决方案，因为可以预见，处理软件会因此而窒息。我想浏览器可以很好地使用它（只要它没有 HTML5 上下文），但其他像 Inkscape、Adobe Illustrator、Batik 等可能不会很好地发挥作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:56:14.997

也许在您的情况下， <path> 会更具可读性和紧凑性？看到你的例子，我想到了`h`and`v`命令（以及它们的绝对对应物`H`and ）。`V`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:40:44.687

我还没有听说过在 SVG 中执行此操作的方法。

我会考虑编写一个脚本来生成您的 SVG 代码，而不是手动执行此类操作。这样你就可以在你的 SVG 中加入更多的结构。SVG 真的是用来生成的，而不是手工编码的。

似乎您可以在示例中只使用两个循环。

# android - ADB touchevent 不依赖于计算机

> ID：13032873
> 
> 赞同：1
> 
> 时间：2012-10-23T14:34:27.397
> 
> 标签：android, automation, adb

我有几个关于亚行的问题。

我尝试运行以下批处理文件：

```
adb wait-for-devices
adb shell sendevent /dev/input/event9 3 53 67 
adb shell sendevent /dev/input/event9 3 54 768
adb shell sendevent /dev/input/event9 3 48 40
adb shell sendevent /dev/input/event9 3 50 4
adb shell sendevent /dev/input/event9 3 57 0
adb shell sendevent /dev/input/event9 0 2 0
adb shell sendevent /dev/input/event9 0 0 0
adb shell sendevent /dev/input/event9 3 53 67
adb shell sendevent /dev/input/event9 3 54 768
adb shell sendevent /dev/input/event9 3 48 0
adb shell sendevent /dev/input/event9 3 50 4
adb shell sendevent /dev/input/event9 3 57 0
adb shell sendevent /dev/input/event9 0 2 0
adb shell sendevent /dev/input/event9 0 0 0

adb shell input keyevent 8
adb shell input keyevent 9
adb shell input keyevent 10
adb shell input keyevent 11
adb shell input keyevent 12

adb shell input keyevent 5 
```

*   第一部分处理通过 touchevents 到达拨号器（我没有找到关键事件）
*   第二部分类型 1,2,3,4,5 通过 keyevents
*   第三部分通过keyevent按下通话按钮

如果我在这里用连接的手机在我的计算机上运行此脚本，则触摸事件将正确重放并调用 12345。如果我将它连接到另一台 PC，由于某种原因，第一部分不会将我带到拨号屏幕？

我的代码在一台计算机上运行而不是在另一台计算机上运行的原因可能是什么？

除了触摸事件之外，还有其他方法可以模拟手指扫描吗？

**编辑**：

看来，PC上的连接有点慢，它的工作效果不太好。ADB 版本是相同的，实际上我能够通过更改脚本来运行该行为。

现在我明白了，当我创建触摸事件时，例如用于全面动作。这是许多事件。然后，当我使用上面的命令 adb shell sendevent 将它们一一输入时。我在手机上可以观察到，扫地真的很慢。有没有办法以某种方式将命令直接传送到 adb 中，以使反应与普通手指扫描一样快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T23:19:02.387

只需拨打一个您可以随时使用的号码`service call phone 2 s16 "12345"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T00:40:15.953

同样在最近的 Android 版本中，您可以使用`input tap`和`input swipe`命令

```
usage: input ...
       input text <string>
       input keyevent <key code number or name>
       input tap <x> <y>
       input swipe <x1> <y1> <x2> <y2> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-24T14:31:19.563

继续执行[shell/批处理脚本以将命令定向到 adb shell](https://stackoverflow.com/questions/3474318/shell-batch-scripting-to-direct-commands-to-adb-shell/13050815#13050815) 解决了该问题。

实际的问题是，为每个命令调用 adb shell 需要很多时间。

由于此时间问题，这会导致执行滞后并发生冲突。

# c++ - 为什么这个 OpenCV 矩阵的大小和值不正确？

> ID：13032876
> 
> 赞同：0
> 
> 时间：2012-10-23T14:34:30.420
> 
> 标签：c++, opencv, matrix

我使用以下函数返回一个介于 0 和 1 之间的值的权重矩阵，具体取决于特定矩阵位置与中心的接近程度。同样在阈值之后，值都为1（它就像高原，靠近中心的点具有值1，并且在距离阈值之后远离中心的点在边缘从1线性下降到0）？

```
cv::Mat2f getWeightsMatrix(int N, int M, float r){
    cv::Mat2f weights = cv::Mat2f(N,M);
    int i,j;
    for(i=0;i<N;i++){
        for(j=0;j<M;j++){
            if(i<=floor(N*(1-r)/2)){
                if(j<=floor(M*(1-r)/2)){
                    weights[i][j]=((float)(i/N-j/M)/(1-r));
                }
                else{
                    weights[i][j]=(2*(float)(i/N)/(1-r));
                }
            }
            else if (i>=floor(N*(1+r)/2)){
                if(j>=floor(M*(1+r)/2)){
                    weights[i][j]=(((float)((N-i)/N))-((float)((M-j)/M)))/(1-r);
                }
                else{
                    weights[i][j]=(2*(float)((N-i)/N)/(1-r));
                }
            }
            else{
                if(j<=floor(M*(1-r)/2)){
                    weights[i][j]=(2*(float)(j/M)/(1-r));
                }
                else if(j>=floor(M*(1+r)/2)){
                    weights[i][j]=(2*(float)((M-j)/M)/(1-r));
                }
                else{
                    weights[i][j]=1;
                }
            }
        }
    }
    cout << weights << endl;
    return weights;
} 
```

现在我的问题是我遇到了一些转换问题，并且只返回值 0 和 1（没有浮点数）。当我使用 N=10、M=10 和 r=0.5 调用函数时，cout 显示的矩阵大小也是 20x10。

请帮忙！

**编辑：**这是输出

```
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0;
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0;
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0;
0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0;
0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0;
0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0;
0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0;
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0;
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0;
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:07:15.380

您的矩阵仅包含整数，因为当您对整数进行基本操作时，结果会自动四舍五入。

例如：当你写

```
weights[i][j]=((float)(i/N-j/M)/(1-r)); 
```

的结果`i/N`四舍五入为整数，`j/M`也四舍五入为整数，最后除以`(1-r)`也四舍五入。你的`(float)`演员阵容是个好主意，但应用**得太晚了**。

你可以做几件事：

*   例如，在基本操作中强制转换，`float(i)/N`而不是`i/N`
*   使用浮点数而不是整数：写`1.0`而不是`1`
*   在循环和语句中使用浮点数

例如：

```
for(float i = 0; i < N-0.5; i++) {
    for(float j = 0; j < M-0.5; j++) {
        if(i <= floor(N*(1.0-r)/2.0)) {
            // ... 
```

重要的是您要了解，由于**浮点精度**，诸如`i < N`可能通过或可能不通过 when之类的测试`float i = N`。这就是为什么我通过`0.5`从你的循环边界`N`和`M`.

# css - 修复 Chrome 上的 css/jquery 动画问题

> ID：13032877
> 
> 赞同：0
> 
> 时间：2012-10-23T14:34:32.017
> 
> 标签：css, google-chrome, jquery-animate, css-position

这是网站：plantcatch.com

在搜索文本框中设置“蒙特利尔”，然后按 Enter。地图应该去那里并显示结果（我认为在你放大一个档次之后）。面板将从左侧滑动以显示结果列表。此面板附有一个白色箭头，以便可以折叠/展开它。这是发生的事情：

*   在**IE/Firefox**上：面板滑动良好。
*   在**Chrome**上：面板第一次扩展时，效果很好。然后任何新的操作都会显示问题。只有在 jquery.animate("left") 完成后，面板和选项卡的内容才会改变位置。

我让你看一下firebug或其他开发栏下的css结构，但基本上chrome似乎不喜欢面板内的各种“位置：相对”css规则。问题是我无法控制他们。它们由[mCustomScrollbar](http://manos.malihu.gr/jquery-custom-content-scroller) jquery 插件设置。要检查这是否是实际原因，只需稍微缩小一点，直到出现一个小窗口，通知您应该再次放大。这将清空窗格的内容并将其折叠。看看这次它是如何很好地关闭的，因为窗格中不再有任何内容。

**问题是**：我应该如何修改 css（我控制的部分）以使其在 Chrome 中运行良好并在其他浏览器中继续运行良好？

如果有不清楚的地方，请告诉我，我会更新这个问题。
谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:54:54.100

这里没有答案，所以我决定自己修复它，只在 chrome 上采用 css3 过渡。这现在好多了，但是您会注意到面板滑动时选项卡有点滞后。这在非 webkit 浏览器中不会发生。

# php - 亚马逊豆茎上的 Yii

> ID：13032882
> 
> 赞同：2
> 
> 时间：2012-10-23T14:34:45.917
> 
> 标签：php, amazon-ec2, amazon-web-services, yii

我知道这是一个长镜头，但无论如何我都会尝试，我正在尝试在亚马逊弹性豆茎上设置一个 Yii 应用程序（php）。

我所做的只是用我的应用程序上传 zip 文件并想看看它是否有效，但服务器的响应是：“状态代码：503 服务不可用：后端服务器已满负荷”

我四处阅读，似乎与负载平衡器有关，有什么想法吗？

# c++ - Boost bootstrap.bat 在我的 DOS cmd 行中崩溃

> ID：13032885
> 
> 赞同：0
> 
> 时间：2012-10-23T14:34:50.317
> 
> 标签：c++, windows, boost, boost-signals2

我复制了一位同事的 boost 目录。它开箱即用，运行良好。

但是现在我遇到了一个问题，我有一些使用 boost.signals 的新代码可以很好地编译但**没有链接**，因为我的 bin 目录中没有该`libboost_signals-vc100-mt-gd-1_48.lib`文件。（我已经有线程、正则表达式和其他一些库二进制文件，但没有信号）。

所以我已经开始研究[Boost Install 程序](http://www.boost.org/doc/libs/1_51_0/more/getting_started/windows.html#or-simplified-build-from-source)以构建 Boost.Signals2

并且无论我想安装 Boost.Build 还是构建 Boost.Signals2，批处理脚本**bootstraps.bat**都会使我的 MS-DOS 命令窗口崩溃而没有错误消息。写完“Bootstraping the build engine”或“Bootstraping Boost.Build engine”后，大约需要10秒。

```
rem install Boost.Build
cd "Program Files\boost_1_48_0\boost_1_48_0"
cd tools\build\v2\.
bootstrap.bat
b2 install --prefix="C:\Boost.Build" 
```

或者

```
rem build signals2
cd "Program Files\boost_1_48_0\boost_1_48_0"
bootstrap
./b2 signals2 variant=debug link=static threading=multi address-model=64 
```

我不知道从哪里开始调查？任何想法 ？我忘记了一些明显的事情吗？

# javascript - 通过ajax发送json对象

> ID：13032888
> 
> 赞同：0
> 
> 时间：2012-10-23T14:34:56.993
> 
> 标签：javascript, ajax, json

我正在创建一个简单的表单输入演示。值从表单存储在变量中，然后将它们放入 json 对象并通过 ajax 发送。

我的 Json 对象验证但如何在 $.ajax 的数据字段中引用它？我的代码：

```
$(document).ready(function() {
  $('.submitForm').on('click',function(event){
event.preventDefault();

    var firstName = $('#firstName').val();
    var lastName  = $('#lastName').val();
    var phone     = $('#phoneNumber').val();
    var address   = $('#address').val();
    var $out      = $("#formResults");

    $out.append("<p>" + firstName  +' '+ lastName + "</p>" +                                       
                "<p>" + $('#phoneNumber').val() + "</p>" + 

                    //json object
                     {
                       "firstName" : "firstName", 
                        "lastName" : "lastName",
                        "phoneNumber" : "phoneNumber",
                        "address" : "address"
                       }

                         $.ajax({
                         url: 'http://localhost/xyz/markup/',
                         method:  'GET',
                         data: jsonObject
                         error: alert("error")
                         complete: alert ("complete")
                                                 });
                                     });            
                                     }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T14:37:59.207

```
"firstName" : "firstName", 
```

应该

```
"firstName" : firstName,
              ^---     ^---note lack of quotes 
```

对于其他 3 个字段也是如此。

你正在尝试做`string:string`，而不是`string:variable`.

同样，您的代码中没有任何地方`jsonObject`实际定义。

主要注意事项：不要自己构建 JSON 文本。这是非常危险的。一个单一的语法错误（通常是错误的引号）并且整个 json 对象变得无效。您最好构建一个普通的 JS 数据结构，然后使用提供的 json 编码工具来生成 json 字符串。

# c# - 如何使用 jQuery 对对象的数据集合进行排序

> ID：13032891
> 
> 赞同：-1
> 
> 时间：2012-10-23T14:35:01.670
> 
> 标签：c#, javascript, jquery, client-side, jquery-templates

我有一个动态的对象集合，我在我的页面上绑定到 jQuery 模板。我在客户端拥有的这个对象集合是`List<T>`从我的服务器返回的，其中`T`可以是任何类的任何对象。例如：

```
Class Employee
{
 string Name;
 int Id;
 int age;
}

Class Companies
{
  int CompId;
  string CompanyName;
  string CompanyLocation;
} 
```

现在根据用户请求，我将发送`List<Employee>`或发送`List<Companies>`到客户端。现在我只是想知道我们是否可以在客户端使用 jquery 对这个列表进行排序。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:32:24.030

这可能不是你想要的，但它应该给你一个足够好的想法来继续：

```
var list = [{
    prop1: 'a',
    prop2: 5
}, {
    prop1: 'b',
    prop2: 4
}, {
    prop1: 'c',
    prop2: 3
}, {
    prop1: 'd',
    prop2: 2
}, {
    prop1: 'e',
    prop2: 1
}];

function sort(propName, direction) {
    var dirOffset = direction === 'desc' ? -1 : 1;

    list.sort(function(a, b){
        a = a[propName];
        b = b[propName];

        if (a === b) {
            return 0;
        }

        var out = a < b ? -1 : 1;
        return out * dirOffset;
    });
}

function log(propName) {
    list.forEach(function(item){
        console.log(item[propName]);
    });
}

function sortAndLog(propName, direction) {
    console.log('Sorted by', propName, direction);
    sort(propName, direction);
    log(propName);
    console.log('------------------------------------');
}

sortAndLog('prop1', 'desc');
sortAndLog('prop1', 'asc');
sortAndLog('prop2', 'asc');
sortAndLog('prop2', 'desc'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:49:18.023

**jQuery**是一个操作 DOM 的库，在字符串方面不是最好的。我会说你检查[underscore.js](http://underscorejs.org/)。

下划线文档非常简单。你会发现如何轻松实现你想要的。

# r - 自举 nls 期间的奇异梯度误差适合不良数据

> ID：13032900
> 
> 赞同：8
> 
> 时间：2012-10-23T14:35:35.913
> 
> 标签：r, nonlinear-functions, statistics-bootstrap

我有一个包含一个自变量和一组因变量的数据集。我想使用自举非线性最小二乘法为每组自变量拟合一个函数。在某些情况下，自变量是“质量好的”，即相当好地拟合函数。在其他情况下，它们很吵。

在所有情况下，我都可以`nls()`用来估计参数。但是，当数据嘈杂时，引导程序会抛出错误`Error in nls(...) : singular gradient`。我可以理解为什么`nls`拟合嘈杂的数据会失败，例如在太多迭代后无法收敛，但我不明白为什么它是一个奇异的梯度错误，以及为什么我只得到质量差的重新采样数据集。

代码：

```
require(ggplot2)
require(plyr)
require(boot)

# Data are in long form: columns are 'enzyme', 'x', and 'y'
enz <- read.table("http://dl.dropbox.com/s/ts3ruh91kpr47sj/SE.txt", header=TRUE)

# Nonlinear formula to fit to data
mmFormula <- formula(y ~ (x*Vmax) / (x + Km)) 
```

`nls`完全能够拟合数据（即使在某些情况下，例如`a`，我怀疑模型是否适合数据。

```
# Use nls to fit mmFormula to the data - this works well enough
fitDf <- ddply(enz, .(enzyme), function(x) coefficients(nls(mmFormula, x, start=list(Km=100, Vmax=0.5))))

# Create points to plot for the simulated fits
xGrid <- 0:200
simFits <- dlply(fitDf, .(enzyme), function(x) data.frame(x=xGrid, y=(xGrid * x$Vmax)/(xGrid + x$Km)))
simFits <- ldply(simFits, identity) 

ggplot() + geom_point(data=enz, aes(x=x, y=y)) + geom_line(data=simFits, aes(x=x, y=y)) + 
  facet_wrap(~enzyme, scales="free_y") + aes(ymin=0) 
```

![mmFormula 与数据的 NLS 拟合](../Images/ad3e3230b549120f8239d3ab78cce9fc.png)

自举适用于高质量数据：

```
# Function to pass to bootstrap; returns coefficients of nls fit to formula
nlsCoef <- function(df, i) {
  KmGuess <- median(df$x)
  VmaxGuess <- max(df$y)
  dfSamp <- df[i,]
  nlsCoef <- coefficients(nls(mmFormula, dfSamp, start=list(Km=100, Vmax=0.5)))
}

eBoot <- boot(subset(enz, enzyme=="e"), nlsCoef, R=1000) #No error 
```

但不适用于质量差的数据

```
dBoot <- boot(subset(enz, enzyme=="d"), nlsCoef, R=10)
> Error in nls(mmFormula, dfSamp, start = list(Km = KmGuess, Vmax = VmaxGuess)) : 
   singular gradient 
```

是什么导致了这个错误？鉴于我想`plyr`同时执行大量引导模拟，我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T09:57:08.043

这使您可以检查发生了什么：

```
#modified function
#returns NAs if fit is not sucessfull
#does global assignment to store bootstrap permutations
nlsCoef <- function(df, i) {
  KmGuess <- median(df$x)
  VmaxGuess <- max(df$y)
  dfSamp <- df[i,]
  fit <- NULL
  try(fit <- nls(mmFormula, dfSamp, start=list(Km=100, Vmax=0.5)))
  if(!is.null(fit)){
    res <- coef(fit)
  } else{
    res <- c(Km=NA,Vmax=NA)
  }

  istore[k,] <<- i
  k <<- k+1
  res
}

n <- 100
istore <- matrix(nrow=n+1,ncol=9)
k <- 1

dat <- subset(enz, enzyme=="d")
dBoot <- boot(dat, nlsCoef, R=n) 

#permutations that create samples that cannot be fitted
nais <- istore[-1,][is.na(dBoot$t[,1]),]

#look at first bootstrap sample 
#that could not be fitted
samp <- dat[nais[1,],]
plot(y~x,data=samp)
fit <- nls(mmFormula, samp, start=list(Km=100, Vmax=0.5))
#error 
```

您还可以使用自启动模型：

```
try(fit <- nls(y ~ SSmicmen(x, Vmax, Km), data = dfSamp)) 
```

有了这个错误消息就会变得更有信息量。例如，一个错误是

```
too few distinct input values to fit a Michaelis-Menten model 
```

这意味着，一些引导样本包含少于三个不同的浓度。但也有一些其他的错误：

```
step factor 0.000488281 reduced below 'minFactor' of 0.000976562 
```

你可以通过减少来避免`minFactor`。

以下是恶心的。您可以尝试不同的拟合算法或起始值：

```
singular gradient matrix at initial parameter estimates

singular gradient 
```

# jquery - 不存在选定元素时jQuery自定义函数抛出错误

> ID：13032906
> 
> 赞同：0
> 
> 时间：2012-10-23T14:35:50.963
> 
> 标签：jquery

我有一个自定义功能，可以禁用所选元素的文本选择。自定义函数的结构如下：

```
$.fn.DisableTextSelect = function() {
  return this.each(function() {
    // do things to 'this' element
    // ...
  });
}; 
```

我这样称呼它，例如：

```
$("label").DisableTextSelect(); 
```

问题是，当没有元素可以操作时，而不是什么都不做，会抛出一个错误，Firebug 将其显示为`$("label") is null`指向上面的行。

![在此处输入图像描述](../Images/6fb395620cda99f2efb67c5bf449eeb5.png)

我写错了函数吗？如果没有找到元素，我认为它会简单地返回；IE。不执行 each() 循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:01:11.197

结果发现其中一位开发人员已经隔离了代码，但没有传递 jQuery 对象。

这

```
(function() {
  lots of code...
})(); 
```

应该是这样的：

```
(function($) {
  lots of code...
})(jQuery); 
```

谢谢你们的回应！

# java - 如何在最新的 OS X 10.8.2 上将 Java 7 配置为默认 Java？

> ID：13032907
> 
> 赞同：4
> 
> 时间：2012-10-23T14:35:51.357
> 
> 标签：java, macos, osx-mountain-lion

导入：Apple 于 2012 年 10 月进行的最后一次更新对 Mountain Lion (OS X 10.8.2) 上的 Java 进行了重大更改，其中一项更改是删除了 Java 首选项。

这个问题询问如何将 Oracle Java 7 配置为这些系统上的默认 java，这些系统以前有 Apple Java-6 版本。

要求之一是将命令行的默认 java 也更改为 7。

假设用户已经从 Oracle 安装了 Java 7 SDK，但 java -version 仍然返回 java 6。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:47:15.600

将此添加到我的`.bash_profile`似乎可以解决问题，或者至少可以解决部分问题：

```
export JAVA_HOME=`/usr/libexec/java_home` 
```

# wordpress - Wordpress URL 重定向（错误 404）

> ID：13032908
> 
> 赞同：0
> 
> 时间：2012-10-23T14:35:55.623
> 
> 标签：wordpress, http-status-code-404

我的 Wordpress 有一个专用服务器：`www.example.com`

我需要包含一个 PHP 进程并将新进程托管在`www.example.com/myApp`

我遇到的问题是，虽然我在服务器的根目录中创建了文件夹`myApp`，但当我尝试访问 WordPress 时检测到 URL 并默认显示“错误 404”......有没有办法告诉 WordPress 忽略该请求当 URL 是：`www.example.com/myApp`？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:36:40.823

尝试在您网站的 .htaccess 的重写引擎中添加排除项。

尝试添加如下内容：

RewriteCond %{REQUEST_FILENAME} !-d 或 RewriteCond %{HTTP_HOST} !yourApp

Wordpress 会忽略现有文件夹/文件的 url，所以基本上你不应该遇到这样的问题，但你可以尝试编辑你的 .htaccess。

# c# - 字符串到 args（字符串 []）

> ID：13032913
> 
> 赞同：0
> 
> 时间：2012-10-23T14:36:08.550
> 
> 标签：c#

我正在创建一个控制台应用程序，它将接收诸如`get "www.site.com" -i -a`. 但是这个 args 不会是 Main 构造函数的 args 参数，我会从`Console.ReadLine()`. 那么如何将我将从控制台收到的字符串解析为 string[] args 正确？我需要假设客户端可以写类似的东西`get "www.google.com www.yahoo.com" -i -a`，所以我的参数应该是：

1.  得到
2.  “www.google.com www.yahoo.com”
3.  -一世
4.  -一个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:51:52.923

您可以使用正则表达式进行简单的词法分析，如下所示：

```
var s = @"get ""www.google.com www.yahoo.com"" -i -a";
var ms = Regex.Matches(s, "(-?\\w+)|\"([^\"]*)\"");
foreach (Match m in ms) {
    if (m.Groups[1].ToString() != "") {
         Console.WriteLine("Flag/Command: {0}", m.Groups[1]);
    } else {
        Console.WriteLine("Quoted string: '{0}'", m.Groups[2]);
    }
} 
```

该解决方案的核心是以下正则表达式（为了便于阅读，引号未转义）：

```
(-?\\w+)|"([^"]*)" 
```

它有两个*捕获组*——第一个用于标志或命令，第二个（在管道符号“|”之后）用于引用字符串。一旦表达式“看到”一个引号，它就会捕获所有内容，直到找到结束引号。捕获组通过将它们保留在括号之外来去除两个引号。

[链接到ideone。](http://ideone.com/104UZg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:54:50.800

您可以使用正则表达式，例如

```
([^" ][^ ]*)|("[^"]*") 
```

匹配单个字符串。所以像

```
var r = new Regex("([^\" ][^ ]*)|(\"[^\"]*\")");
var s = Console.ReadLine();
var result = r.Matches(s).OfType<Match>().Select(m=>m.Value).ToArray(); 
```

应该为您提供所需的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:49:48.780

您可以使用`TextFieldParser`Microsoft.VisualBasic.dll 中的类。

```
string arguments = Console.ReadLine();
TextFieldParser parser = new TextFieldParser(new StringReader(arguments));
parser.Delimiters = new[] { " " };
parser.HasFieldsEnclosedInQuotes = true;
string[] parsedArguments = parser.ReadFields(); 
```

# c#-4.0 - .NET CLR Networking 4.0.0.0 -> 创建性能计数器

> ID：13032914
> 
> 赞同：0
> 
> 时间：2012-10-23T14:36:08.727
> 
> 标签：c#-4.0, performancecounter

我尝试在 c# 中创建一个 performanceCounter 来监视我的浏览器的网络连接；

当我显示查找我的浏览器 instanceName 的列表时，CounterPerformance“.NET CLR Networking 4.0.0.0”没有监控这...

我创建了我的计数器：

```
bytesSent = new PerformanceCounter();
bytesSent.CategoryName = ".NET CLR Networking 4.0.0.0";
bytesSent.CounterName = "Bytes Sent";
bytesSent.InstanceName = instanceName; // instanceName of my browser.
bytesSent.ReadOnly = true; 
```

我显示了监控的实例列表：

```
PerformanceCounterCategory category = new PerformanceCounterCategory(".NET CLR Networking 4.0.0.0");

string[] listMonitoredApplication = category.GetInstanceNames();
foreach (string monitoredInstanceName in listMonitoredApplication)
{
    Console.WriteLine(" - " + monitoredInstanceName);
} 
```

我每 1 秒显示一次 performanceCounter 列表，在列表中，只有：

```
- myApplicationInstanceName
- _global_ 
```

你知道为什么我的浏览器 PerformanceCounter 没有创建吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:52:21.077

It is because the browser doesn't use .NET framework classes to transfer data. Browsers use native code.

You'll need to use a different performance counter, like those in the "Network Interface" category. With the added wrinkle that the tcp/ip driver stack doesn't keep statistics for individual processes, only for a particular network interface. No workaround for that.

# java - Java Classloader 可以重写系统类（仅它们的副本）的字节码吗？

> ID：13032918
> 
> 赞同：14
> 
> 时间：2012-10-23T14:36:19.157
> 
> 标签：java, class, metaprogramming, classloader, bytecode

所以我有一个类加载器（MyClassLoader），它在内存中维护一组“特殊”类。这些特殊类被动态编译并存储在 MyClassLoader 中的字节数组中。当 MyClassLoader 被要求提供一个类时，它首先检查它的`specialClasses`字典是否包含它，然后再委托给 System 类加载器。它看起来像这样：

```
class MyClassLoader extends ClassLoader {
    Map<String, byte[]> specialClasses;

    public MyClassLoader(Map<String, byte[]> sb) {
        this.specialClasses = sb;
    }

    @Override
    public Class<?> loadClass(String name) throws ClassNotFoundException {
        if (specialClasses.containsKey(name)) return findClass(name);
        else return super.loadClass(name);
    }

    @Override
    public Class findClass(String name) {
        byte[] b = specialClasses.get(name);
        return defineClass(name, b, 0, b.length);
    }    
} 
```

如果我想对 执行转换（例如检测）`specialClasses`，只需`byte[]`在调用`defineClass()`它之前修改 即可。

我还想转换 System 类加载器提供的类，但是 System 类加载器似乎没有提供任何访问`byte[]`它提供的原始类的方法，而是直接给我`Class`对象。

我可以使用`-javaagent`加载到 JVM 中的所有类的仪器，但这会增加我不想仪器的类的开销；我只希望对 MyClassLoader 加载的类进行检测。

*   有没有办法检索`byte[]`父类加载器提供的原始类，所以我可以在定义自己的副本之前对它们进行检测？
*   或者，是否有任何方法可以模拟 System 类加载器的功能，就它从哪里抓取它而言`byte[]`，以便 MyClassLoader 可以检测和定义它自己的所有 System 类（对象、字符串等）的副本？

编辑：

所以我尝试了另一种方法：

*   使用 a `-javaagent`，捕获`byte[]`每个加载的类并将其存储在哈希表中，以类的名称为键。
*   MyClassLoader 不是将系统类委托给它的父类加载器，而是使用类名从这个哈希表加载它们的字节码并定义它

从理论上讲，这将让 MyClassLoader 使用仪器定义自己的系统类版本。但是，它失败了

```
java.lang.SecurityException: Prohibited package name: java.lang 
```

很明显，JVM 不喜欢我`java.lang`自己定义类，即使它（理论上）应该来自与`byte[]`引导加载的类应该来自同一个来源。继续寻找解决方案。

编辑2：

我为这个问题找到了一个（非常粗略的）解决方案，但如果有人比我更了解 Java 类加载/仪器的复杂性，可以想出一些不那么粗略的东西，那就太棒了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T01:38:10.667

所以我找到了解决方案。这不是一个非常优雅的解决方案，并且会在代码审查时引起很多愤怒的电子邮件，但它似乎有效。基本要点是：

# Java代理

使用 a`java.lang.instrumentation`和 a`-javaagent`存储`Instrumentation`对象以供以后使用

```
class JavaAgent {
    private JavaAgent() {}

    public static void premain(String agentArgs, Instrumentation inst) {
        System.out.println("Agent Premain Start");
        Transformer.instrumentation = inst;
        inst.addTransformer(new Transformer(), inst.isRetransformClassesSupported());
    }    
} 
```

# 类文件转换器

添加一个仅适用于标记类的`Transformer`。`Instrumentation`就像是

```
public class Transformer implements ClassFileTransformer {
    public static Set<Class<?>> transformMe = new Set<>()
    public static Instrumentation instrumentation = null; // set during premain()
    @Override
    public byte[] transform(ClassLoader loader,
                            String className,
                            Class<?> classBeingRedefined,
                            ProtectionDomain protectionDomain,
                            byte[] origBytes) {

        if (transformMe.contains(classBeingRedefined)) {
            return instrument(origBytes, loader);
        } else {
            return null;
        }
    }
    public byte[] instrument(byte[] origBytes) {
        // magic happens here
    }
} 
```

# 类加载器

`transformMe`在类加载器中，通过在要求`Instrumentation`转换它之前将每个加载的类（甚至是其加载委托给父类的类）显式标记

```
public class MyClassLoader extends ClassLoader{
    public Class<?> instrument(Class<?> in){
        try{
            Transformer.transformMe.add(in);
            Transformer.instrumentation.retransformClasses(in);
            Transformer.transformMe.remove(in);
            return in;
        }catch(Exception e){ return null; }
    }
    @Override
    public Class<?> loadClass(String name) throws ClassNotFoundException {
        return instrument(super.loadClass(name));
    }
} 
```

……瞧！由该方法加载的每个类`MyClassLoader`都会被该`instrument()`方法转换，包括所有系统类like`java.lang.Object`和friends，而默认ClassLoader加载的所有类都保持不变。

我已经使用内存分析`instrument()`方法进行了尝试，该方法插入回调钩子以跟踪检测字节码中的内存分配，并且可以确认`MyClassLoad`类在其方法运行（甚至系统类）时触发回调，而“正常”类是不是。

胜利！

当然，这是糟糕的代码。随处共享的可变状态、非本地副作用、全局变量，以及您可以想象的一切。可能也不是线程安全的。但它表明这样的事情是可能的，您确实*可以*选择性地检测类的字节码，甚至系统类，作为自定义 ClassLoader 操作的一部分，同时保持程序的“其余部分”不变。

# 未解决的问题

如果其他人有任何想法如何使这段代码不那么糟糕，我会很高兴听到它。我想不出办法：

*   通过而*不是*通过其他方式加载的仪器类按需制作`Instrumentation` *唯一的仪器类*`retransformClasses()`
**   在每个`Class<?>`对象中存储一些元数据，这将允许`Transformer`判断它是否应该被转换，而无需全局可变哈希表查找。*   在不使用该`Instrumentation.retransformClass()`方法的情况下转换系统类。如前所述，由于 ClassLoader.java 中的硬编码检查，任何动态进入类`defineClass`的尝试都会失败。`byte[]``java.lang.*`*

 *如果有人能找到解决任何这些问题的方法，那么这将变得不那么粗略。无论如何，我猜能够检测（例如用于分析）某些子系统（即您感兴趣的那个）同时保持 JVM 的其余部分保持不变（没有检测开销）将对其他人有用除了我，所以在这里。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-27T17:10:35.620

首先是没有 ClassFileTransformer 的解释：

Oracle JRE/JDK 的许可证包括您不能更改 java.* 包，并且根据您在尝试更改 java.lang 中的某些内容的测试中显示的内容，它们包含了一个测试并在以下情况下引发安全异常你试试。

话虽如此，您可以通过编译替代方案并使用 JRE -Xbootclasspath/p CLI 选项引用它来更改系统类的行为。

在查看了通过该方法可以实现的目标之后，我预计您将不得不做更多工作并编译 OpenJDK 的自定义版本。我希望这是因为 Bootstrap 类加载器（根据我的阅读）是本机实现。

有关我最喜欢的类加载器概述，请参阅[http://onjava.com/pub/a/onjava/2005/01/26/classloading.html](http://onjava.com/pub/a/onjava/2005/01/26/classloading.html)。

现在使用 ClassFileTransformer：

正如您所展示的，您可以更新方法程序（以及预加载类的某些特定其他方面）。针对您提出的问题：

按需检测：这里重要的是每个加载的类都有一个与之关联的唯一类实例；所以如果你想定位一个特定的加载类，你必须注意它是什么实例，这可以通过各种方式找到，包括与每个类名相关联的成员“类”，如 Object.class。

是否线程安全：不，两个线程可能同时更改集合，您可以通过多种方式解决此问题；我建议使用 Set 的并发版本。

Globals 等：我认为 globals 是特别必要的（我认为你的实现可以做得更好一点），但很可能不会有问题，你稍后会学习如何更好地为 Java 编码（我已经为大约 12 年了，你不会相信使用这种语言的一些微妙的事情）。

Class 实例中的元数据：在我使用 Java 的所有时间里，附加元数据并不自然，而且可能是有充分理由的；为特定目的保留一个映射很好，记住它只是指向实例的指针和元数据之间的映射，所以它并不是真正的内存占用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T13:57:27.433

类加载器不提供公共 API 来访问已加载类的字节码。字节码很可能被 VM 缓存在某处（在 Oracle VM 中，这是在本机代码中完成的），但您不能再将它作为字节数组取出。

但是，您*可以*做的是将类文件作为资源重新读取。除非我忘记了一些明显的事情，否则 ClassLoader#getResource() 或 Class#getResource() 应该使用相同的搜索路径来加载类文件，因为它用于加载资源：

```
public byte[] getClassFile(Class<?> clazz) throws IOException {     
    InputStream is =
        clazz.getResourceAsStream(
            "/" + clazz.getName().replace('.', '/') + ".class");
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    int r = 0;
    byte[] buffer = new byte[8192];
    while((r=is.read(buffer))>=0) {
        baos.write(buffer, 0, r);
    }   
    return baos.toByteArray();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T15:14:03.373

你想重新定义 Object.class，但是这个类在任何程序运行之前就已经被加载了，包括你的类加载器。即使您创建自己的 Object.class，它也会与已经加载的系统类发生冲突，这会造成混乱。

我看到的唯一方法是离线检测系统类，即获取 rt.jar，检测其中的所有类并写回。*

# git - 如何为多个 git 存储库设置不同的属性

> ID：13032922
> 
> 赞同：1
> 
> 时间：2012-10-23T14:36:22.963
> 
> 标签：git

我指向 2 个不同的 git 存储库

```
git@github.com:blah/foo.git
git@mycompany.com:random/bar.git 
```

我将两个不同的 SSH 公钥推送到 github.com 和 mycompany.com 当我将代码推送到各自的 git 存储库时，我需要为 git 设置 user.name 和 user.email 属性。如何为不同的存储库设置不同的名称/电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:31:56.017

```
$> git config user.mail "mail@a.c"
$> git config user.name o
$> cat .git/config
[user]
    mail = mail@a.c
    name = o 
```

[https://help.github.com/articles/setting-your-email-in-git](https://help.github.com/articles/setting-your-email-in-git)

# mysql - 移动 Wordpress 目录

> ID：13032926
> 
> 赞同：0
> 
> 时间：2012-10-23T14:36:32.900
> 
> 标签：mysql, directory, wordpress, wordpress-theming

我是一名 Web 开发人员，主要使用自定义解决方案 - 我绝不是 Wordpress 开发人员。

我的一个客户想要一个 Wordpress 网站，所以我使用购买的主题为他们构建了它。我使用子目录构建了网站，现在我需要将它带入根目录。

我首先需要根据主题安装更新数据库文件（将 www.domain.com/wpsite/ 的所有实例更改为 www.domain.com/）。然后我将所有文件移动到根目录并更改 Wordpress 管理面板中的永久链接设置。

当我这样做时，只有一半的页面加载。背景（恰好是动画）不加载，某些字体也不加载。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:44:46.037

我将首先检查 www.domain.com/wpsite/ 的所有实例的 SQL 文件，并确保数据库 100% 正确。最简单的方法是将数据库输出为 SQL 并在文本编辑器中打开它。进行搜索和替换。

如果数据库不是问题，那么您的 CSS 文件中的某些引用可能会关闭等。如果可以，请发布一个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:51:09.187

可能是当您将文件移动到根目录时结构不同，只要确保所有指向 css 和其他功能的链接都是正确的`../filename//file.css`等等

# visual-studio-2010 - Visual Studio IDE - 从代码导入设置

> ID：13032927
> 
> 赞同：1
> 
> 时间：2012-10-23T14:36:32.547
> 
> 标签：visual-studio-2010, sdk, ide

我有一些加载项，我想加载一些编辑设置。有没有办法从代码中导入一些 Visual Studio 设置？

这里有一些关于我的任务的更多信息：我创建了一个加载项，它打开了一些 toolWindows。我需要将 windows 停靠到 VS。找到我的唯一方法（经过一周的寻找）是创建我的一个 Winodws 配置，打开窗口，按照我的意愿排列它们。而不是从 VS 导出 WindowLayot，以便我下次可以使用它（将它们导入 VS）。

有谁知道将窗口安排到 VS DOCK 的更好方法？谢谢你。莱昂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:58:27.257

您可以使用带有自定义设置的[构建工具](http://msdn.microsoft.com/en-us/library/dd9y37ha%28VS.80%29.aspx)来“按一下按钮”根据需要设置整个 Visual Studio 环境。

我相信最终您将基本上使用一个工具，其中包括导入您之前保存的 Visual Studio 配置文件。

如果您不打算利用任何其他构建功能，那么这将是完成 Visual Studio 环境内置功能的一个很长的路要走，但是既然您问的是您可能需要的问题（例如就像在许多计算机上设置这个环境一样）来做这样的事情。

由于 Visual Studio 内置的功能以及大多数编码环境的工作方式，似乎忽略了完全按照您的要求执行的功能。您可以考虑编写自己的构建工具 - 但是对于 Visual Studio 的工作方式（我可能错了），您似乎会使用一个不必要的大锤子来完成一个小锤子（导入保存的配置文件）将完全有能力做。

* * *

如果我误解了您的确切需求，这些都不重要。您的帖子有点稀疏 - 如有必要，是否有更多关于您希望完成的工作的详细信息，以帮助我们为您找到解决方案（与您最初想到的解决方案不同的解决方案）？

# php - 如何获取当前 PHP 页面名称

> ID：13032930
> 
> 赞同：125
> 
> 时间：2012-10-23T14:36:40.270
> 
> 标签：php

我有一个名为的文件`demo.php`，其中我在 URL 中没有任何 GET 变量，所以如果我想在此页面上隐藏一个按钮，我不能使用这样的东西：

```
if($_GET['name'] == 'value') {
  //Hide
} else {
  //show
} 
```

所以我想要类似的东西

```
$filename = //get file name
if($filename == 'file_name.php') {
  //Hide
} else {
  //show
} 
```

我不想仅仅为了这样做而声明不必要的 GET 变量......

* * *

## 回答 #1

> 赞同：336
> 
> 时间：2012-10-23T14:37:25.497

您可以使用`basename()`and`$_SERVER['PHP_SELF']`获取当前页面文件名

```
echo basename($_SERVER['PHP_SELF']); /* Returns The Current PHP File Name */ 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-10-23T14:42:17.790

`$_SERVER["PHP_SELF"];`将为您提供当前文件名及其路径，但`basename(__FILE__)`应为您提供调用它的文件名。

所以

```
if(basename(__FILE__) == 'file_name.php') {
  //Hide
} else {
  //show
} 
```

应该这样做。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-23T14:37:53.300

在您的情况下，您可以使用`__FILE__`变量！
它应该有帮助。
它是预定义的之一。
阅读有关 PHP [http://php.net/manual/en/language.constants.predefined.php中预定义常量的更多信息](http://php.net/manual/en/language.constants.predefined.php)

# magento - Magento 如何为销售/订单模型添加新属性？

> ID：13032932
> 
> 赞同：1
> 
> 时间：2012-10-23T14:36:46.130
> 
> 标签：magento, extend

我想向销售/订单添加一个属性，即 Mage_Sales_Model_Order，以存储一些额外的数据。

我发现销售/订单资源使用普通表。当我保存订单时，它只保存与表中的列匹配的字段。

添加此属性的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:31:12.180

我会推荐以下几个答案的混合体。您肯定希望通过 config xml 将此代码放入安装脚本中，但如果您想利用 addAttribute 函数，您将希望使用 Mage_Eav_Model_Entity_Setup 作为安装类。所以你的配置 xml 看起来像这样......

```
<config>
...
    <resources>
        <modulename_setup>
            <setup>
                <module>Your_Module</module>
                <class>Mage_Eav_Model_Entity_Setup</class>
            </setup>               
        </modulename_setup>           
    </resources>
...
</config> 
```

你的安装脚本应该是这样的

```
$installer = $this;
/* @var $installer Mage_Catalog_Model_Resource_Eav_Mysql4_Setup */

$installer->startSetup();

$installer->addAttribute('sales_order', 'attributename', array(
            'group'             => 'General',
            'label'             => 'Label frontend',
            'note'              => '',
            'type'              => 'string',    //backend_type
            'input'             => 'text', //frontend_input
            'frontend_class'    => '',
            'source'            => '',
            'backend'           => '',
            'frontend'          => '',
            'global'            => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_WEBSITE,
            'required'          => false,
            'visible_on_front'  => false,
            'apply_to'          => 'simple',
            'is_configurable'   => false,
            'used_in_product_listing'   => false,
            'sort_order'        => 5,
        ));

$installer->endSetup(); 
```

请记住，这是未经测试的代码，您可能需要调整一些属性选项以使其按您需要的方式运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:09:24.070

要在订单上添加新属性，您可以使用此代码，但只需一次。获取任何文件并将代码放在那里，执行一次并可以删除代码。

```
$setup = new Mage_Eav_Model_Entity_Setup('core_setup');

        $setup->addAttribute('sales_order', 'attributename', array(
            'group'             => 'General',
            'label'             => 'Label frontend',
            'note'              => '',
            'type'              => 'string',    //backend_type
            'input'             => 'text', //frontend_input
            'frontend_class'    => '',
            'source'            => '',
            'backend'           => '',
            'frontend'          => '',
            'global'            => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_WEBSITE,
            'required'          => false,
            'visible_on_front'  => false,
            'apply_to'          => 'simple',
            'is_configurable'   => false,
            'used_in_product_listing'   => false,
            'sort_order'        => 5,
        )); 
```

# ruby-on-rails - Gem Devise - 只有当用户使用令牌登录时，如何将用户重定向到特定的 URL？

> ID：13032935
> 
> 赞同：0
> 
> 时间：2012-10-23T14:36:56.957
> 
> 标签：ruby-on-rails, devise

在我的项目中使用 Devise Gem，只有当用户使用令牌登录时，是否有人知道如何将用户重定向到特定的 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:04:44.813

您可以通过创建自己的 SessionsController 来做到这一点，您可以在 [git上找到它](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/sessions_controller.rb)

像这样：

```
# POST /resource/sign_in
class SessionsController < Devise::SessionsController
  def create
    self.resource = warden.authenticate!(auth_options)
    set_flash_message(:notice, :signed_in) if is_navigational_format?
    sign_in(resource_name, resource)
    #here you can enter your specific token code
    # I guess you would do it with something like:
    # if session[:token] = XYZ
    #   respond with ...
    # else 
    #   respond_with resource, :location => after_sign_in_path_for(resource)
    # end
  end
end 
```

要使用此控制器，您还必须更改您的`config/routes.rb`

```
devise_for :users, :controllers => {:sessions => "sessions"} 
```

希望它可以帮助你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:54:08.050

如果我的问题是正确的，那么您问的是如何在他/她登录后重定向用户。

所以我在我的项目中尝试过这个

这是代码

```
def after_sign_in_path_for(resource)
# Use the route you want here (i have given the url like this: '/show')
end 
```

希望我能理解问题的正确含义。！！:)

# php - 避免通过贝宝从同一用户同时购物

> ID：13032940
> 
> 赞同：0
> 
> 时间：2012-10-23T14:37:22.373
> 
> 标签：php, paypal

我正在考虑一项任务的完美逻辑。总共有3页用php编写。product_select、cart_summary、thank_you

**控制流：**

1.  用户从第一页选择产品并点击继续按钮
2.  在“cart_summary”页面中显示总成本和所选产品列表。用户然后单击“使用贝宝付款”按钮
3.  用户被带到贝宝页面。进行交易。然后从贝宝用户被重定向到thank_you页面
4.  在thank_you 页面中，会向用户和管理员发送与产品详细信息相关的邮件

我做了编码。现在，当用户在步骤 1 中单击继续按钮时，所有选择的产品都存储在一个会话中。当用户到达thank_you 页面时，会话中的值将作为邮件发送。

**这种方法的问题：** 1\. 用户选择了价值100美元的产品。访问paypal页面进行交易。现在用户在贝宝页面。2.当时用户选择另一个选项卡并进入product_select页面。然后选择价值 300 美元的产品并点击继续按钮。现在会话中的价值是 300 美元 3\. 在第一个选项卡中，当用户在支付 100 美元后从贝宝返回时，会发送一封邮件，其中包含第二个订单的购买详细信息，因为会话包含第二个订单详细信息。

希望我能把我的观点说清楚。请帮助我用正确的逻辑来解决这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:51:28.423

最好的方法是使用 PayPal 的 IPN，它可以准确地确认购买了什么以及购买了多少： [https](https://www.paypal.com/ipn) ://www.paypal.com/ipn IPN 会通知您的网站/听众已经发生的交易细节，因此它不会不管他们通过 PayPal 后对购物车做了什么。

或者，在重定向到 PayPal 时，您可以将购物车的内容存储在数据库中，然后在用户返回您的网站时恢复它们，然后再继续发送电子邮件。恢复的内容将覆盖同时发生的任何更改。

# linux - WordPress unzip_file() 导致 mkdir_failed （权限）

> ID：13032943
> 
> 赞同：1
> 
> 时间：2012-10-23T14:37:28.050
> 
> 标签：linux, wordpress, permissions, bitnami

我正在创建一个具有自动更新功能的 WordPress 框架。当系统更新框架时，它会下载一个 .zip 文件（工作正常，存储在临时文件夹中），然后尝试将该 zip 文件解压缩到主题中的某个位置。解压缩时，它会抛出一个错误，抱怨无法创建目录（“mkdir_failed”）。

目标文件夹的父级对用户“bitnami”和组“bitnami”具有“775”权限；

> root@linux:/home/bitnami# ls -al /opt/bitnami/apps/wordpress/htdocs/wp-content/themes/nexus ... drwxrwxr-x 6 bitnami bitnami 4096 Oct 23 14:02 nexusframework ...

我试图将“守护进程”用户放在“bitnami”组中；

> usermod -a -G bitnami 守护进程

正如我所看到的，我会说，这确实是正确分配的：

> root@linux:/home/bitnami# id daemon uid=1(daemon) gid=1(daemon) groups=1(daemon),1000(bitnami)

* * *

所以; 如果“daemon”用户在“bitnami”组中并且该文件夹具有 775 访问权限，那么为什么它会因“mkdir_failed”而失败？

（注意；将“777”分配给父文件夹可以解决问题，但由于安全原因，这不是一个选项）。

谢谢！- 格特扬

* * *

更新;

在对 Linux 进行了更多调查之后，我读到 Linux 会自动为每个用户创建一个“私人”组（因此 bitnami 用户的 bitnami 组等）。我不知道问题是否是由于我正在尝试（并且显然成功？）将其他用户添加到同一组的事实引起的。

* * *

更新;

请参阅下面关于我如何解决我的问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:45:04.890

好的，谢谢大家的意见。我最终决定不继续我的调查，而是转向另一个方向，因为必须依赖容器的文件夹来获得“775”权限对于框架来说是不明智的（许多客户将拥有 755，所以让它工作group 很好，但最终不会解决我的问题）。

相反，我进一步调查了 WordPress 自己如何下载和解压缩主题，并决定遵循这条路线。

我试图解决的关键问题是，解压后的文件不属于“守护进程”用户，而是属于“bitnami”用户。它“模拟”给守护进程用户的原因是因为我手动告诉代码使用“直接”fs_method（看起来，WP 提供了多种与文件系统交互的方式，其中最简单的方式是“直接”，看[这里](http://wordpress.org/support/topic/how-to-initialize-wp_filesystem-object)）。但是，使用“直接”FS_METHOD 是我遇到此问题的核心原因，因为它将使用网络服务器的凭据（在我的情况下为“守护程序”用户）。因此，通过使用不同的 FS_METHOD，我知道能够使用正确的“bitnami”用户解压缩文件夹中的文件（因为容器是所有者并且具有权限（775 或 755 无关紧要）现在我的问题已解决. 请注意，现在 PHP 将使用 FTP，而不是直接写入文件系统（参见[此处](http://ottopress.com/2011/tutorial-using-the-wp_filesystem/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:43:01.613

如果您将文件夹的组更改为守护程序，它是否有效？

chgrp -R 守护进程 /opt/bitnami/apps/wordpress/htdocs/wp-content/themes/nexus

# vb6 - VB6的原生UI设计模式是什么？

> ID：13032944
> 
> 赞同：0
> 
> 时间：2012-10-23T14:37:31.040
> 
> 标签：vb6, vb6-migration

我们正在用 .Net 和 WPF 重写一个旧的 VB6 应用程序。我将帮助一些支持旧应用程序的同事加快 WPF 和 MVVM 的速度。我的背景是 .Net 和 C#，所以我不了解 VB6，但我想了解它们的来源。什么是 VB6 的原生设计模式（假设它有一个）？查看代码，它看起来可能是 MVC，但对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T14:55:57.037

原始程序是桌面程序还是 Web 程序（经典 ASP）？

构架：

*   桌面 VB6 程序类似于 .Net WinForms。WPF 看起来很奇怪。MVVM 很可能是陌生的。
*   经典的 ASP。与 PHP 非常相似，但有一种调用 DLL 的方法。因此，像 PHP 一样，有些人开发了自己的[有组织的框架，而其他人则编写了意大利面条。](http://www.joelonsoftware.com/items/2006/09/01b.html)[有人可以改进我的这部分答案吗？]

你的同事喜欢阅读吗？你可以推荐

*   Dan Appleman 为前 VB6 程序员[迁移到 VB .NET](https://rads.stackoverflow.com/amzn/click/com/159059102X)的优秀书籍。现在十岁了，但还是很有见地。它不包括 MVVM 或 WPF。它针对的是 VB.Net 而不是 C#，但其中大部分仍然是相关的。
*   [Microsoft Visual Basic 6.0 迁移资源中心](http://msdn.microsoft.com/en-us/vbrun/ms788233.aspx)（极好的资源）

其他要记住的事情：VB6 是一种*基于对象的*语言（它具有对象、多态性和通过 的接口继承[`Implements`](http://msdn.microsoft.com/en-us/library/aa242069(v=vs.60).aspx)，但没有实现继承）。它是基于事件的，如 .Net。对象生命周期是确定性的，因为它使用引用计数。没有泛型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T14:40:15.823

它不使用设计模式。作为一种语言，VB6 是一种通用语言。IDE 和框架使用 RAD 方法，采用过程事件驱动风格。同样的事情也适用于 C#，除了它使用面向对象的事件驱动来代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:13:47.467

我在[这里](http://ldloc.blogspot.com/2013/03/understanding-mvvm-at-basic-level.html "使用 VB6 理解 MVVM")尝试使用 VB6 来解释 MVVM 。

我想补充的一个提示是，对于 VB6 迁移项目，最好事先重构/修改代码。Visual Studio中的VB6到VB.net的转换向导虽然做得不错，但是痛点太多。通过修改 VB6 来避免它们比修复 VB.net 中的问题要容易得多。

# ruby-on-rails - rails ruby 遍历目录中的部分

> ID：13032946
> 
> 赞同：4
> 
> 时间：2012-10-23T14:37:34.977
> 
> 标签：ruby-on-rails, ruby, loops, partial

对于那些帮助..谢谢。仍然没有解决方案，但越来越近了。我认为的错误是因为我的“文件”评估为“app/views/main/show/_partial.html.erb”。并渲染添加它自己的相对路径。所以我想我需要列出文件名。也许是 dir.foreach 或 dir.glob 类型的命令。我会继续挖掘。谢谢！

我有一个目录，里面装满了我想在页面中调用的部分内容。所以我写了一个循环，但它会产生错误。

```
<% Dir["app/views/main/show/*"].each do |file| %>
  <%= render #{file} %>
<% end %> 
```

当我用一个简单的替换渲染线时

文件

它列出了文件名，所以我知道循环和目录位置的工作。我认为的问题是渲染正在寻找一个字符串。所以我已经尝试了各种搜索谷歌和这里的东西，比如#{file}，首先创建一个变量，原始的，......等等。

我也认为渲染可能在相对于 Dir 的不同目录中查找。我会在那里尝试一些东西。

我应该如何处理这个？我准备从 Dir 切换到 Dir.foreach 或任何其他有意义的策略。

谢谢。

**编辑**：这是我实施的解决方案（目录路径从上面更改）：

```
<% Dir["app/views/partials/show/*.html.erb"].each do |file| %>
<p> <%= render 'partials/show/' + File.basename(file,'.html.erb').slice!(1..-1) %></p>
<% end %> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T14:40:25.030

`file`已经是一个字符串，所以不需要转义。此外，您必须提供完整路径。这应该有效：

```
<% Dir["app/views/main/show/*"].each do |file| %>
  <%= render :file => Rails.root.join(file).to_s %>
<% end %> 
```

`#{}`仅在双引号内有效。例如`"#{file}"`，但在这种情况下，这不是必需的。你可以只使用`file`.

# java - 如何在 JPA 中创建和处理复合主键

> ID：13032948
> 
> 赞同：118
> 
> 时间：2012-10-23T14:37:38.540
> 
> 标签：java, jakarta-ee, jpa, composite-primary-key

我想拥有来自同一数据条目的版本。换句话说，我想用另一个版本号复制条目。

`id - Version`将是主键。

实体应该是什么样子？如何将其复制到另一个版本？

```
id Version ColumnA

1   0      Some data
1   1      Some Other data
2   0      Data 2\. Entry
2   1      Data 
```

* * *

## 回答 #1

> 赞同：255
> 
> 时间：2012-10-23T14:42:10.127

您可以创建一个`Embedded class`包含您的两个键的 ，然后像`EmbeddedId`在您的`Entity`.

您将需要[`@EmbeddedId`](https://docs.oracle.com/javaee/6/api/javax/persistence/EmbeddedId.html)and[`@Embeddable`](https://docs.oracle.com/javaee/6/api/javax/persistence/Embeddable.html)注释。

```
@Entity
public class YourEntity {
    @EmbeddedId
    private MyKey myKey;

    @Column(name = "ColumnA")
    private String columnA;

    /** Your getters and setters **/
} 
```

```
@Embeddable
public class MyKey implements Serializable {

    @Column(name = "Id", nullable = false)
    private int id;

    @Column(name = "Version", nullable = false)
    private int version;

    /** getters and setters **/
} 
```

* * *

完成此任务的另一种方法是使用`@IdClass`注释，并将两者都`id`放在`IdClass`. 现在您可以`@Id`在两个属性上使用普通注释

```
@Entity
@IdClass(MyKey.class)
public class YourEntity {
   @Id
   private int id;
   @Id
   private int version;

} 
```

```
public class MyKey implements Serializable {
   private int id;
   private int version;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-09-24T06:45:50.407

`Serializable`如果您正在使用MyKey 类必须实现`@IdClass`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-23T14:52:14.833

关键类：

```
@Embeddable
@Access (AccessType.FIELD)
public class EntryKey implements Serializable {

    public EntryKey() {
    }

    public EntryKey(final Long id, final Long version) {
        this.id = id;
        this.version = version;
    }

    public Long getId() {
        return this.id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public Long getVersion() {
        return this.version;
    }

    public void setVersion(Long version) {
        this.version = version;
    }

    public boolean equals(Object other) {
        if (this == other)
            return true;
        if (!(other instanceof EntryKey))
            return false;
        EntryKey castOther = (EntryKey) other;
        return id.equals(castOther.id) && version.equals(castOther.version);
    }

    public int hashCode() {
        final int prime = 31;
        int hash = 17;
        hash = hash * prime + this.id.hashCode();
        hash = hash * prime + this.version.hashCode();
        return hash;
    }

    @Column (name = "ID")
    private Long id;
    @Column (name = "VERSION")
    private Long operatorId;
} 
```

实体类：

```
@Entity
@Table (name = "YOUR_TABLE_NAME")
public class Entry implements Serializable {

    @EmbeddedId
    public EntryKey getKey() {
        return this.key;
    }

    public void setKey(EntryKey id) {
        this.id = id;
    }

    ...

    private EntryKey key;
    ...
} 
```

如何将其复制到另一个版本？

您可以分离从提供者检索到的实体，更改 Entry 的键，然后将其作为新实体保存。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-11T01:15:22.457

MyKey 类（@Embeddable）不应该有任何像 @ManyToOne 这样的关系

# cakephp - CakePHP 2.x RSS 提要路由

> ID：13032949
> 
> 赞同：1
> 
> 时间：2012-10-23T14:37:42.853
> 
> 标签：cakephp, rss, feed, routes

对于我的 CakePHP 博客，我创建了一个 RSS 提要，如[Docs](http://book.cakephp.org/2.0/en/core-libraries/helpers/rss.html)中所述 。

现在我无法找到或访问提要，我认为这可能与我的自定义路线有关。我使用这条路线访问我的帖子索引：

```
Router::connect('/:city/blog', array(
    'controller' => 'posts', 
    'action' => 'index'
    ), 
    array(
      'city' => '[a-z]+'
      )
); 
```

我将如何为此 Feed Url 编写路由？：*domain.com/washington/blog/index.rss*

（顺便说一句：我详细遵循了文档，所以我确实添加了：`Router::parseExtensions('rss');`到 routes.php）

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:54:52.730

在 routes.php 你把 Router::parseExtensions('rss'); 代码 ？？我一开始就这样做并为我工作。

![在此处输入图像描述](../Images/6ae7b4c723adbb0d6b65331dd5852cda.png)

让我了解更多

# mysql - 合并来自不同表的 2 列

> ID：13032954
> 
> 赞同：0
> 
> 时间：2012-10-23T14:37:55.117
> 
> 标签：mysql

我有 2 张桌子。

```
1.Message - Sender_Number,SMS,DateTime.
2.Replies - Receiver_Number,SMS,DateTime. 
```

我想合并所有列并将 2 个 DateTime 列合并为一列并按时间排序。

例如：

```
Messages Table:
123 | Hello there. | 2012-10-22 3:50
121 | HI I like U..| 2012-10-22 9:10

Replies Table:
123 | how are u... | 2012-10-22 5:50
121 | HI I like U2 | 2012-10-22 9:30

DESIRED OUTPUT (In 1 table):
123 | Hello there. | 2012-10-22 3:50 
123 | how are u... | 2012-10-22 5:50 
121 | HI I like U..| 2012-10-22 9:10 
121 | HI I like U2 | 2012-10-22 9:30 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:39:44.647

```
SELECT *
FROM
(
    SELECT col1, col2, col3 FROM messages
    UNION ALL
    SELECT col1, col2, col3 FROM replies
) x
ORDER BY col3 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/0d190/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:41:58.333

你需要一个[UNION](http://dev.mysql.com/doc/refman/5.0/en/union.html)

会是这样的

```
SELECT * FROM (
SELECT Sender_Number,SMS,DateTime FROM Messages
UNION 
SELECT Receiver_Number,SMS,DateTime FROM Replies
)
ORDER BY DateTime 
```

另外，我不会调用列`DateTime`，因为它是`MySQL`. 它可能会导致问题

# javascript - 浏览器 javascript 需要 webworker

> ID：13032965
> 
> 赞同：2
> 
> 时间：2012-10-23T14:38:20.767
> 
> 标签：javascript, external, src, web-worker

我有一个正在运行的网络工作者，我希望它能够加载外部源。我该怎么做，因为它是在独立于 DOM 的另一个线程中运行的。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:32:48.167

importScripts 方法允许您加载可在 Web Worker 中使用的外部脚本。注意：需要窗口对象的脚本在这里不起作用，因为窗口对象只能在 UI 线程上访问。更多信息可以在[这里找到](http://www.w3.org/TR/workers/#dom-workerglobalscope-importscripts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:55:13.413

设置外部源，使其支持[CORS](http://dev.opera.com/articles/view/dom-access-control-using-cross-origin-resource-sharing/)。

# python - 查找多次出现的字典？

> ID：13032966
> 
> 赞同：0
> 
> 时间：2012-10-23T14:38:22.190
> 
> 标签：python

我正在尝试使用最简单的方法来计算所有出现的 x 字典但没有结果。我不能导入任何库，也不能使用其他语句：for var in, if x, if not, if is。

脚本的结果应如下所示： 示例：

```
list = [1,2,1,'a',4,2,3,3,5,'a',2]

code

print occurrences(list)

result

1 = [0, 2]
2 = [1, 5, 10]
a = [3, 9]
and so on 
```

@edited 更正的文本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T14:42:16.460

```
>>> l = [1,2,1,'a',4,2,3,3,5,'a',2]
>>> pos = {}
>>> for i, n in enumerate(l):
...     pos.setdefault(n, []).append(i)
... 
>>> pos
{'a': [3, 9], 1: [0, 2], 2: [1, 5, 10], 3: [6, 7], 4: [4], 5: [8]}
>>> for k, v in pos.items():
...     print "%s = %s" % (k, v)
... 
a = [3, 9]
1 = [0, 2]
2 = [1, 5, 10]
3 = [6, 7]
4 = [4]
5 = [8] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:51:36.383

好的，不使用任何库或函数：

```
lis = [1,2,1,'a',4,2,3,3,5,'a',2]
dic={}
index=0
for item in lis:
    if item in dic:
        dic[item]+=[index]
        index+=1
    else:
        dic[item]=[index] 
        index+=1
print dic 
```

**输出：**

```
{'a': [3, 9], 1: [0, 2], 2: [1, 5, 10], 3: [6, 7], 4: [4], 5: [8]} 
```

# sql - 使用 VBA 根据其他表中的条件获取值的总和？

> ID：13032971
> 
> 赞同：1
> 
> 时间：2012-10-23T14:38:39.327
> 
> 标签：sql, database, vba, ms-access

我需要找到许多产品的价格总和，但是价格存储在与需要定价的产品不同的表中。

但是，有一个问题，它也需要根据第三个表中的标准来选择这些项目。

所以，我需要表 1 中所有产品的价格总和，其中表 2 中的 CutID = 001。

表 1 和表 2 在 SCID 上链接，分别为一对多。

如果这没有意义，请告诉我，我会尽力澄清？

谢谢，鲍勃·P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:04:38.420

根据您的问题，我认为不需要 VBA。Excel 公式应该足够了。

1.  在主表中添加几列。在这些列中，使用 vlookup() 将所有信息集中到一个位置，包括条件。
2.  如果您只需要根据一个标准求和，请使用 sumif()。如果有多个条件，请使用 sumproduct()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:04:47.167

通常，对于 Access，我最初尝试使用尽可能接近标准 SQL 查询的内容，以便于维护和可移植性。这在 Access 2010 中为我运行：

```
SELECT Products.ProductID, Sum(Prices.Price) AS PriceSum
FROM Prices INNER JOIN (Critera INNER JOIN Products ON Critera.SCID = Products.SCID) ON Prices.ProductID = Products.ProductID
WHERE Critera.CutID="001"
GROUP BY Products.ProductID; 
```

请让我们知道这是否适用于您的数据（我也不确定您的列名）。

# mongodb - mongodb 重新配置分片端口

> ID：13032972
> 
> 赞同：6
> 
> 时间：2012-10-23T14:38:42.297
> 
> 标签：mongodb, sharding

通过更改它们的 .conf 文件，我在非标准端口上重新启动了 2 个分片。现在，当我通过 mongo 连接并发出列表碎片时，我得到：

```
mongos> db.runCommand( { listshards : 1 } );
Tue Oct 23 17:36:21 uncaught exception: error {
    "$err" : "error creating initial database config information :: caused by :: socket exception [CONNECT_ERROR] for vserver-dev-2:37017",
    "code" : 11002
} 
```

（37017 是旧端口）。如何更新路由器（mongos）上的分片端口？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-23T15:01:32.833

手动更新 mongo 配置服务器上的端口：

```
 mongo
    use config

    configsvr> db.shards.update({_id: "shard0000"} , {$set: {"host" : "vserver-dev-2:37018"}})
    configsvr> db.shards.find()
    { "_id" : "shard0000", "host" : "vserver-dev-2:37018" } 
```

# html - Div 使用不同的浏览器

> ID：13032973
> 
> 赞同：0
> 
> 时间：2012-10-23T14:38:43.763
> 
> 标签：html, css

大家好，我的 div 区域高度在以下浏览器中显示不同：Firefox 和 Internet Explorer。在 Chrome 和 Safari 中，我的 div 区域看起来不错，您能帮帮我吗？

这是我的 div 区域

```
.openmeclis 
{
    position:relative; 
    margin-left:4px;
    background:#66B3E3; 
    width:90px; 
    height:370px; 
    display:inline-block;
    overflow:hidden;    
} 
```

这是一个大写我的意思这是来自 Firefox

![在此处输入图像描述](../Images/9e6eca845ae9a17f25d4a5ef17e5a5d0.png)

这是来自 Chrome

![在此处输入图像描述](../Images/e22c2c9b6d1b251a2967b07918a4b8a7.png)

```
<div id="subMenu">
    <div class="openbaskan" style="float:left">
        <a href="/Home/Baskan/45">Başkandan</a> <br />
        <a href="/Home/Baskan/46">&#214;zge&#231;mişi</a> <br />
        <a href="/Home/Baskan/47">Haberler</a> <br />
        <a href="/Home/Baskan/58">Videolar</a> <br />
        <a href="/Home/Baskan_foto">Fotoğraf Galerisi</a>
    </div>

    <div class="openmeclis" style="float:left">
    <a href="/Home/Sehir_Rehberi/93">Meclis &#220;yeleri</a> <br />
    <a href="/Home/Sehir_Rehberi/99">Meclis G&#252;ndemi</a> <br />
    <a href="/Home/Sehir_Rehberi/100">Meclis Kararları</a> <br />
    </div> 
</div> 
```

CSS：

```
#subMenu
{        
    width:964px;
    margin-left:auto;
    margin-right:auto;
    display:none;
    font-size:14px;
    font-style:normal;
    height:336px;  
    font-family: 'Museo300Regular';         
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:50:25.870

检查这个编辑过的答案

[编辑演示](http://jsfiddle.net/Sriganesh/CqBKz/2/)

```
Note the edited CSS below:

.openmeclis 
{
    position:relative; 
    margin-left:4px;
    background:#66B3E3;
    width:90px; 
    height:370px; 
    overflow:hidden;
    float: left;
    list-style: none;
}

#subMenu {
    width:964px;
    margin-left:auto;
    margin-right:auto;
    font-size:14px;
    font-style:normal;
    height:336px;
}

HTML:
----------
<div id="subMenu">
    <div class="openmeclis">
        <ul>
            <li><a href="/Home/Baskan/45">Başkandan</a></li>
            <li><a href="/Home/Baskan/45">&#214;zge&#231;mişi</a></li>
            <li><a href="/Home/Baskan/45">Haberler</a></li>
            <li><a href="/Home/Baskan/45">Videolar</a></li>
            <li><a href="/Home/Baskan/45">Fotoğraf Galerisi</a></li>
        </ul>
    </div>

    <div class="openmeclis">
        <ul>
            <li><a href="/Home/Sehir_Rehberi/93">Meclis &#220;yeleri</a></li>
            <li><a href="/Home/Sehir_Rehberi/99">Meclis G&#252;ndemi</a></li>
            <li><a href="/Home/Sehir_Rehberi/100">Gündemi</a></li>
            <li><a href="/Home/Baskan/45">Meclis Kararları</a></li>
        </ul>
    </div> 
</div>​ 
```

不要添加不必要`<br/>`的标签。取而代之的是，您可以使用这些`<ul>`方法。当你有 CSS 时，你不需要在你的 html 中添加样式标签。我不知道您在...中添加了什么`#sub menu`...我刚刚编辑了 HTML 和 CSS`openmeclis`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:55:54.913

只需在您的 CSS 中使用 line-height 即可。因为每个浏览器呈现不同的行高，这就是为什么你的 div 在不同的浏览器上显示问题的原因。这是您提出的相同问题的链接

[FireFox 3 行高](https://stackoverflow.com/questions/466291/firefox-3-line-height)

[跨浏览器的 CSS 行高问题](https://stackoverflow.com/questions/6283735/css-line-height-issue-across-browsers)

# java - HashMap get(Object) 总是返回 String 而不是其他 Object

> ID：13032977
> 
> 赞同：1
> 
> 时间：2012-10-23T14:38:53.920
> 
> 标签：java, jsf

有一个问题让我很难过。我有一个 HashMap 声明使用字符串作为键和我自己的 KWIKattribute 作为值。

```
private HashMap<String, KWIKattribute> attributes = new HashMap<String, KWIKattribute>(); 
```

我将对象放入其中，其中 sgml_xml_tag 是一个字符串，而 kattr 是 KWIKattribute 的一个实例。

```
attributes.put(sgml_xml_tag, kattr); 
```

当我尝试将值作为 KWIKattribute 取回时

```
for (Map.Entry<String, KWIKattribute> e : attributes.entrySet()) {
        String key = e.getKey();
        KWIKattribute kattr = (KWIKattribute) attributes.get(e.getKey());
} 
```

抛出异常

```
javax.faces.el.EvaluationException: java.lang.ClassCastException: java.lang.String cannot be cast to com.northgrum.adt.kwik.model.KWIKattribute 
```

我知道这可能是我在某个地方的一个简单的愚蠢错误，但我没有看到它是什么。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:41:36.410

代替

```
KWIKattribute kattr = (KWIKattribute) attributes.get(e.getKey()); 
```

利用

```
KWIKattribute kattr = e.getValue(); 
```

您正在遍历地图的条目集。每个条目都包含一个键和与映射中该键关联的值。您可以直接从条目中获取值；没有必要像您那样在地图中查找它。

也就是说，您收到此错误很奇怪。首先，演员阵容`KWIKattribute`根本不需要。其次，如果`attributes`真的是 a `HashMap<String, KWIKattribute>`，则不可能有`String`对象作为值存储在其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:41:43.030

`Map.Entry`用于迭代 Map 的入口集的 -class 有一个-method [`getValue()`，](http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html#getValue%28%29)它将值返回给当前键。

否则，如果您只对 Map 中的值感兴趣，您还可以遍历[values-collection](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#values%28%29)：

```
for (KWIKattribute attr : attributes.values()){
  // Do your work with attr
} 
```

# r - Windows 上的 R 并行 CPU 亲和性

> ID：13032978
> 
> 赞同：3
> 
> 时间：2012-10-23T14:38:55.630
> 
> 标签：r

**R** 2.14.0 或更高版本包括[R 包**parallel**](http://stat.ethz.ch/R-manual/R-devel/library/parallel/doc/parallel.pdf)，它为并行计算提供支持。

在**Unix-likes**下，这个包提供了[设置子进程的 CPU 亲和性的工具](http://stat.ethz.ch/R-manual/R-devel/library/parallel/html/mcaffinity.html)。

在**Windows上****并行使用****R**包时，是否可以设置子进程的 CPU 亲和性？

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:27:51.427

这是一种在 Windows 上设置 R 会话的 CPU 亲和性的方法。此方法需要 PowerShell。它设置执行命令的 R 会话的 CPU 亲和性。设置`use.core`为长度等于逻辑 CPU 内核数的向量，其中每个位置指示 R 进程是否 ( `T`) 或不 ( `F`) R 进程应该在该内核上具有亲和力。

```
use.core <- c(T, T, T, T)
affinity.mask <- sum(use.core*2^((1:length(use.core))-1))
shell(paste("PowerShell -Command \"& {(Get-Process -id ",Sys.getpid(),").ProcessorAffinity = ",affinity.mask,"}\"",sep="")) 
```****

# magento - OnepageController 没有用我的自定义控制器重载/重写

> ID：13032980
> 
> 赞同：4
> 
> 时间：2012-10-23T14:39:02.330
> 
> 标签：magento, magento-1.5

我正在尝试使用本地池中的自定义控制器重载/重写核心 Onepagecontroller，但它不起作用。我正在使用 Magento 1.5.1

这是我的文件结构和代码：

控制器文件：\app\code\local\Odc\Mycheckout\controllers\OnepageController.php

```
 require_once 'Mage/Checkout/controllers/OnepageController.php';

    class Odc_Mycheckout_OnepageController extends Mage_Checkout_OnepageController
    {   
        public function indexAction()
        {
            echo "This controller has been overridden.";
        }
    } 
```

config.xml 文件：\app\code\local\Odc\Mycheckout\etc\config.xml

```
 <?xml version="1.0"?>
    <config>
        <modules>
            <Odc_Mycheckout>
                <version>0.0.1</version>
            </Odc_Mycheckout>
        </modules>
        <global>
            <controllers>
                <Mage_Checkout>
                    <rewrite>
                        <onepage>Odc_Mycheckout_Onepage</onepage>
                    </rewrite>
                </Mage_Checkout>
            </controllers>
        </global>
        <frontend>
            <routers>
                <mycheckout>
                   <args>
                        <modules>
                            <Odc_Mycheckout before="Mage_Checkout">Odc_Mycheckout</Odc_Mycheckout>
                        </modules>
                   </args>
                </mycheckout>
            </routers>
        </frontend>
    </config> 
```

Odc_Mycheckout.xml 文件：\app\etc\module\Odc_Mycheckout.xml

```
 <?xml version="1.0"?>
    <config>
      <modules>
        <Odc_Mycheckout>
          <active>true</active>
          <codepool>local</codepool>
        </Odc_Mycheckout>
      </modules>
    </config> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T15:28:35.613

CamelCase 再次来袭。

Odc_Mycheckout.xml 文件：\app\etc\module\Odc_Mycheckout.xml

```
 <?xml version="1.0"?>
    <config>
      <modules>
        <Odc_Mycheckout>
          <active>true</active>
          <codePool>local</codePool> <!-- Capital P in pool --> 
```

此外，在您的模块配置文件中：

```
 <frontend>
        <routers>
            <checkout> <!-- must match the router config you are trying to override -->
               <args>
                    <modules>
                        <Odc_Mycheckout before="Mage_Checkout">Odc_Mycheckout</Odc_Mycheckout>
                    </modules>
               </args>
            </checkout>
        </routers>
    </frontend> 
```

**编辑：**

要在重写的控制器不工作时进行故障排除，它可以帮助回到基础。一种方法是使用与[`Mage_Core_Controller_Varien_Router_Standard`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php). 在脚本*test.php*中：

```
<?php

ini_set('display_errors',1);
include 'app/Mage.php';
Mage::setIsDeveloperMode(true);
Mage::app();

$module     = 'Odc_Mycheckout';
$controller = 'Onepage';

$router     = new Mage_Core_Controller_Varien_Router_Standard;
$filename   = $router->getControllerFileName($module,$controller);
$classname  = $router->getControllerClassName($module,$controller);

include $filename;

$controller = Mage::getControllerInstance(
    $classname,
    Mage::app()->getRequest(),
    Mage::app()->getResponse()
);

var_dump($controller); //should be a  class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:01:38.837

不需要以下标签。

```
 <global>
        <controllers>
            <Mage_Checkout>
                <rewrite>
                    <onepage>Odc_Mycheckout_Onepage</onepage>
                </rewrite>
            </Mage_Checkout>
        </controllers>
    </global> 
```

# javascript - 如何取消选中 Ext.selection.CheckboxModel 中的全选复选框

> ID：13032984
> 
> 赞同：1
> 
> 时间：2012-10-23T14:39:10.687
> 
> 标签：javascript, extjs, extjs4

在使用 Ext.selection.CheckboxModel 的网格上运行 a`getSelectionModel().clearSelections()`并且使用选择列顶部的“全选”复选框选择了所有行时，“全选”复选框保持选中状态。

我做了一个肮脏的黑客来解决这个问题，但我想知道是否有更清洁的方法或者这是否是一个错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T00:00:55.400

我会尝试在网格组件上放置一个监听器来跟踪选择更改（不确定它是否有帮助）：

```
listeners: {
   selectionchange: function(grid, selected) {
        if(!selected.length) {
            grid.getSelectionModel().deselectAll();
        }
   }
} 
```

顺便说一句，你试过`getSelectionModel().deselectAll()`吗？clearSelections 在 ExtJS 4.1 中已被弃用，它在视图而不是选择模型上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:39:10.687

**编辑：** 在阅读了 Vyacheslav Voronchuk 的回答后，我回过头来验证文档确实说 clearSelection 是一个不发送事件的私有函数，因此没有通知应该清除复选框。

```
.getSelectionModel().deselectAll() 
```

确实是要走的路。

由于历史原因，我包括了我为解决问题所做的原始肮脏黑客：

```
var el = Ext.get("gridcolumn-1031");
el.removeCls('x-grid-hd-checker-on'); 
```

gridcolumn-1031 是在我的应用程序中包装复选框的 div 的 id。它是随机生成的，因此您需要自己检查以执行相同的脏黑客操作。

**免责声明！**使用后果自负。

我不容忍这样的肮脏黑客行为，因为它不太可能在我的网格的自动生成的 id 更改中幸存下来，但它会在我们等待更永久的解决方案时让我的客户批准该应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T23:11:54.690

删除网格标题选择：

`.getSelectionModel().deselectAll()`

对我不起作用，因为我的网格已经是空的。

这虽然有效（来自上面的hack）：

```
var selectionHeadID = Ext.getCmp('ingameGrid').headerCt.getHeaderAtIndex(0).getId();
var el = Ext.get(selectionHeadID);
el.removeCls('x-grid-hd-checker-on'); 
```

希望这可以帮助！

# jquery - HTMLEditor（来自 AJAXToolkit）检查内容是否为空

> ID：13032985
> 
> 赞同：0
> 
> 时间：2012-10-23T14:39:12.613
> 
> 标签：jquery, asp.net

我的 aspx 文件中有一个 HTMLEditor，id = "txtText"

我正在尝试编写一个 JQuery 函数来检查编辑器的内容是否为空。

我原来有：

```
function check()
{
    if($('#txtText').val() == '')
    {
         return false;
    }
    return true
} 
```

但是，当我添加一个警告框以找出为什么这不起作用时。我意识到 HTMLEditor 的 .val() 属性始终未定义（无论编辑器有文本还是没有文本）。

我尝试使用 $('#txtText').content()，这是我在代码隐藏（C#）中访问数据的方式，但这似乎在 JQUERY 中不起作用。

在做了一些研究后，我发现了这个网站：[http ://forums.asp.net/t/1549543.aspx/1](http://forums.asp.net/t/1549543.aspx/1)

我有非常相似的代码，因此我还制作了自己的自定义编辑器，它继承自 AJAXToolkitEditor 中的编辑器。

```
<cc1:CustomEditor ID="txtEditor" Height="600px" runat="server" />
<asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
<asp:Button ID="Button1" OnClientClick="getImageContent()"
    runat="server" Text="Button" OnClick="saveContent" />
<asp:HiddenField ID="HiddenField1" runat="server" /> 
```

发布的代码对我不起作用：

```
function getImageContent() {
var editor = $find("txtEditor");
var editPanel = editor.get_editPanel();
var designPanel = editPanel.get_modePanels()[0];
var s = designPanel.get_content();

document.getElementById("HiddenField1").value = s; 
```

}

var editor = $find("txtEditor") 行是一个空值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:14:41.267

您可能需要使用一些服务器脚本 ( )来获取生成的[ClientID](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx) (类似)`ctl00_txtEditor``<%=txtEditor.ClientID%>`

**HTML编辑器：**

排序hack-ish，但这应该确定[`HTMLEditor`](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HTMLEditor/HTMLEditor.aspx)控制客户端中是否有内容（服务器端很容易通过检查`txtEditor.Content`）

jQuery：

```
$('#<%=txtEditor.ClientID%>').find('iframe').eq(2).contents().find('body').html() 
```

**HTMLEditorExtender：**

这适用于[推荐](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HTMLEditor/HTMLEditor.aspx)使用控件的[`HTMLEditorExtender`](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HtmlEditorExtender/HTMLEditorExtender.aspx)哪个`HTMLEditor`

> 注意：我们建议您使用新的 HtmlEditorExtender 而不是本页描述的 HtmlEditor 控件。HtmlEditorExtender 利用 HTML5 并适用于 IE6 及更高版本。

jQuery：

```
$('#<%=txtEditor.ClientID%>').val() 
```

或 JavaScript

```
document.getElementById('<%=txtEditor.ClientID%>').value 
```

# android - GreenDAO 支持表之间的多重关系

> ID：13032987
> 
> 赞同：12
> 
> 时间：2012-10-23T14:39:14.153
> 
> 标签：android, android-sqlite, greendao

我一直在尝试使用 GreenDAO 创建数据库模型。当我尝试在不同的表之间创建多个关系时，问题就开始了。

基本上，我有一张`Message`桌子，一张`Conversation`桌子和一张`User`桌子。

用户有一个消息列表，并且该消息有一个父对话。

我尝试编写此代码来创建数据库：

```
 private static void addUser(Schema schema) {
            user = schema.addEntity("User");
            userId = user.addIdProperty().getProperty();
            user.addStringProperty("facebookId").unique().index();

            user.addStringProperty("firstName");
            user.addStringProperty("lastName");
            user.addStringProperty("fullName");
            user.addStringProperty("photoUrl");
    }

    private static void addMessage(Schema schema) {
            message = schema.addEntity("Message");
            messageId = message.addIdProperty().getProperty();
            message.addStringProperty("messageId").primaryKey();

            message.addDateProperty("date");
            message.addStringProperty("content");
            message.addStringProperty("typeString");
    }

    private static void addConversation(Schema schema) {
          conversation = schema.addEntity("Conversation");
          conversation.addIdProperty();

          conversation.addStringProperty("conversationId");
          // REST OF THE CODE
    }

    private static void fakeRelationship(Schema schema) {
            Property author = message.addLongProperty("author").getProperty();
            Property parent = message.addLongProperty("parent").getProperty();

            message.addToOne(user, author);
            message.addToOne(conversation, parent);

            user.addToMany(message, author);
            conversation.addToMany(message, parent);
    } 
```

运行此代码后，我收到此错误：

```
Exception in thread "main" java.lang.RuntimeException: Currently only single FK columns are supported: ToOne 'parent' from Message to Conversation
at de.greenrobot.daogenerator.ToOne.init3ndPass(ToOne.java:91)
at de.greenrobot.daogenerator.Entity.init3rdPassRelations(Entity.java:557)
at de.greenrobot.daogenerator.Entity.init3ndPass(Entity.java:550)
at de.greenrobot.daogenerator.Schema.init3ndPass(Schema.java:185)
at de.greenrobot.daogenerator.DaoGenerator.generateAll(DaoGenerator.java:94)
at de.greenrobot.daogenerator.DaoGenerator.generateAll(DaoGenerator.java:79)
at com.glidetalk.dao.generator.GlideDaoGenerator.main(GlideDaoGenerator.java:27) 
```

这实际上是否意味着我不能为我的数据库中的每个表创建多个关系？！

我必须手动编写所有内容吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:44:40.060

greenDAO 支持您尝试做的事情，并且您的代码看起来也不错。我将它复制到我的工作区，它执行得非常好。所以我猜你遗漏的代码有问题。

# c# - 创建 UTF8 文本文件而不是 ANSI

> ID：13032988
> 
> 赞同：3
> 
> 时间：2012-10-23T14:39:16.327
> 
> 标签：c#, visual-studio-2012, .net-4.5

我有这段代码可以异步编写文件：

```
 private static async Task WriteTextAsync(string filePath, string text)
    { //Writes to our output files
        byte[] encodedText = Encoding.UTF8.GetBytes(text);
        using (FileStream sourceStream = new FileStream(filePath,
            FileMode.Create, FileAccess.Write, FileShare.None,
            bufferSize: 4096, useAsync: true))
        {
            await sourceStream.WriteAsync(encodedText, 0, encodedText.Length);
        };
    } 
```

尽管设置了`Encoding.UTF8`. 该类有 15 个重载构造函数，`FileStream`如果不在编码文本上，我应该在哪里设置它对我来说根本不明显。

我可以知道该文件是 ANSI，因为当我在 TextPad 中打开它并查看文件统计信息时，它会将 ANSI 列为代码集：

![在此处输入图像描述](../Images/be370e578e37c32c21b2b2f0ab1df863.png)

有问题，因为 MySQL`LOAD INFILE`没有正确读取文件，在阅读了答案后，我相信它与 BOM 有关系，但不确定。

我试过这个（对于BOM）：

```
 byte[] encodedText = new byte[] { 0xEF, 0xBB, 0xBF }.Concat(Encoding.UTF8.GetBytes(text)).ToArray();
        using (FileStream sourceStream = new FileStream(filePath,
            FileMode.Create, FileAccess.Write, FileShare.None,
            bufferSize: 4096, useAsync: true))
        {
            await sourceStream.WriteAsync(encodedText, 0, encodedText.Length);
        }; 
```

Textpad 然后将其视为 UTF8，MySQL`LOAD INFILE`仍然失败。在 Textpad 中重新保存，MySQL 正确地看到了它。

将代码更改为：

```
 using (TextWriter writer = File.CreateText(filePath))
        {
            await writer.WriteAsync(text);
        } 
```

这似乎对两者都有效。我不确定 MySQL 有什么问题`LOAD INFILE`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T14:43:45.857

不，绝对是 UTF-8：

```
byte[] encodedText = Encoding.UTF8.GetBytes(text); 
```

那只**能给**你UTF-8；然后你写入`encodedText`流。

然而！对于 0-127 范围内的任何字符，UTF-8 看起来与 ASCII/ANSI 相同。它只是在上面看起来不同。假阳性？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T14:43:52.340

我相信您忘记将[BOM 标头](http://en.wikipedia.org/wiki/Byte_order_mark)写入文件的开头。当您使用 FileStream（而不是某种 TextWriter）时，您必须手动编写它。如果是 UTF-8，它应该是“EF BB BF”

# python - 为什么 FigureCanvasTkAgg 在滚动的 matplotlib GUI 中禁用鼠标滚动事件？

> ID：13032993
> 
> 赞同：2
> 
> 时间：2012-10-23T14:39:23.383
> 
> 标签：python, matplotlib, tkinter

嘿，我已经制作了这个 GUI，它在带有滚动画布的 tkinter 界面中显示 matplotlib 绘图。但是当绘图被添加到画布时，鼠标的滚动事件不再起作用。我对 tkinter 完全陌生，所以当你检查代码时考虑一下，如果还有改进的话。所以这里是：

```
from Tkinter import *

import matplotlib
#matplotlib.use('TkAgg')

from numpy import arange, sin, pi
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg, NavigationToolbar2TkAgg
from matplotlib.figure import Figure
import matplotlib.pyplot as plt
import numpy as np
import os
import matplotlib.mlab as mlab

class App:

def __init__(self, master, figureList=[]):
    frame = Frame(master, bg='#00BFFF', borderwidth=1, relief=RAISED)
    frame.pack(expand=YES, fill=BOTH)

    master.title("Listed Plots")
    #Fullscreen for windows
    if os.name == 'nt':
        master.wm_state('zoomed')

    #Create a Canvas
    canvas=Canvas(frame,bg='#00BFFF', relief=SUNKEN)       
    canvas.config(highlightthickness=0) 

    #Create a Scrollbar Horisontal
    hbar=Scrollbar(frame,orient=HORIZONTAL)
    hbar.pack(side=BOTTOM,fill=X)
    hbar.config(command=canvas.xview)

    #Create a Scrollbar Vertical
    vbar=Scrollbar(frame,orient=VERTICAL)
    vbar.pack(side=RIGHT,fill=Y)
    vbar.config(command=canvas.yview)

    canvas.config(xscrollcommand=hbar.set, yscrollcommand=vbar.set)
    canvas.pack(side=TOP,expand=True,fill=BOTH)

    #Create a Frame in the canvas
    canvFrame = Frame(canvas, bg='#00BFFF')
    canvFrame.pack()

    Label(canvFrame, text="Matplots of data", bg='#B4EEB4').pack(side=TOP,fill=X)

    plotNbr = 1
    windowHeight = 10

    for fig in figureList:
        Label(canvFrame, text="#Plotnumber: " + str(plotNbr), bg='#FF7F24').pack(side=TOP,fill=X)

        frm = Frame(canvFrame, bg='#9FB6CD')
        frm.pack(side=TOP, fill=X)

        self.canvasMPL2, self.canvasMPLToolBar2 = getCanvas(frm, fig)
        self.canvasMPL2.pack(side=TOP)
        self.canvasMPLToolBar2.pack(side=TOP)

        #Create space for the plot and tool bar.
        windowHeight = windowHeight + 680
        plotNbr = plotNbr + 1

    canvas.config(width=1200,height= windowHeight)
    canvas.config(scrollregion=(0,0,1200, windowHeight))

    canvas.create_window(0,0, anchor = NW, window = canvFrame, width = 1200, height = windowHeight)

    canvas.focus_set() #Doesnt work with FigureCanvasTkAgg, this steals the focus 
    #canvas.focus_force()
    #canvas.grab_set_global()

    #scrollwheel settings
    canvas.configure(yscrollincrement='25')

    def rollWheel(event):
        #print "Mousescroll"
        direction = 0
        if event.num == 5 or event.delta == -120:
            direction = 1
        if event.num == 4 or event.delta == 120:
            direction = -1
        event.widget.yview_scroll(direction, UNITS)

    canvas.bind('<MouseWheel>', lambda event: rollWheel(event))
    canvas.bind('<Button-4>', lambda event: rollWheel(event))
    canvas.bind('<Button-5>', lambda event: rollWheel(event))

plottedFigures = [] #To store matplotlib figures

def addPlottedFig(figure):
    '''
    Matplotlib figures to be shown in the GUI
    '''
    plottedFigures.append(figure)

def getCanvas(masterWidget, figure=None):
    '''
    Returns canvas of plot and canvas of tool bar
    '''
    if(figure==None):
        f = getHistoGramPlot() #For testing
        canvas = FigureCanvasTkAgg(f, master=masterWidget)
    else:
        canvas = FigureCanvasTkAgg(figure, master=masterWidget)

    canvas.show()
    toolbar = NavigationToolbar2TkAgg( canvas, masterWidget )
    toolbar.update()

    #return the plot and the toolbar
    return canvas.get_tk_widget(), canvas._tkcanvas

def initiate(FigureList=None):
    '''
    Start the GUI Application
    '''
    root = Tk()
    app = App(root, FigureList)
    root.mainloop()

def main():
    '''
    Shows 2 histograms plots in a tkinter GUI
    '''
    fig1 = getHistoGramPlot()
    fig2 = getHistoGramPlot()

    figList = [fig1, fig2]

    initiate(figList)

def getHistoGramPlot():
    '''
    Return a figure of a histogram
    '''
    mu, sigma = 100, 15
    x = mu + sigma * np.random.randn(10000)
    fig = plt.figure(figsize=(12, 6), dpi=100)
    ax = fig.add_subplot(111)
    n, bins, patches = ax.hist(x, 50, normed=1, facecolor='green', alpha=0.6)
    bincenters = 0.5*(bins[1:]+bins[:-1])
    mu = np.median(x)
    sigma = np.std(x)
    y = mlab.normpdf( bincenters, mu, sigma)
    l = ax.plot(bincenters, y, 'r--', linewidth=1)
    ax.set_xlabel('Values')
    ax.set_ylabel('Probability')
    xlimTop = max(x)
    xlimBottom = min(x)
    ax.set_xlim(xlimBottom, xlimTop)
    ax.grid(True)

    return fig

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T22:41:44.857

对于一个快速而肮脏的解决方案：

*   使主画布成为您的 App 类的属性
*   使 rollWheel 成为您的 App 类的方法
*   在窗口而不是画布上创建鼠标滚轮绑定。这将捕获窗口内所有小部件的鼠标滚轮事件。
*   在鼠标滚轮事件上滚动画布

* * *

```
from Tkinter import *

import matplotlib
#matplotlib.use('TkAgg')

from numpy import arange, sin, pi
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg, NavigationToolbar2TkAgg
from matplotlib.figure import Figure
import matplotlib.pyplot as plt
import numpy as np
import os
import matplotlib.mlab as mlab

class App:

    def __init__(self, master, figureList=[]):
        frame = Frame(master, bg='#00BFFF', borderwidth=1, relief=RAISED)
        frame.pack(expand=YES, fill=BOTH)

        master.title("Listed Plots")
        #Fullscreen for windows
        if os.name == 'nt':
            master.wm_state('zoomed')

        #Create a Canvas
        self.canvas = canvas = Canvas(frame,bg='#00BFFF', relief=SUNKEN)       
        canvas.config(highlightthickness=0) 

        #Create a Scrollbar Horisontal
        hbar=Scrollbar(frame,orient=HORIZONTAL)
        hbar.pack(side=BOTTOM,fill=X)
        hbar.config(command=canvas.xview)

        #Create a Scrollbar Vertical
        vbar=Scrollbar(frame,orient=VERTICAL)
        vbar.pack(side=RIGHT,fill=Y)
        vbar.config(command=canvas.yview)

        canvas.config(xscrollcommand=hbar.set, yscrollcommand=vbar.set)
        canvas.pack(side=TOP,expand=True,fill=BOTH)

        #Create a Frame in the canvas
        canvFrame = Frame(canvas, bg='#00BFFF')
        canvFrame.pack()

        Label(canvFrame, text="Matplots of data", bg='#B4EEB4').pack(side=TOP,fill=X)

        plotNbr = 1
        windowHeight = 10

        for fig in figureList:
            Label(canvFrame, text="#Plotnumber: " + str(plotNbr), bg='#FF7F24').pack(side=TOP,fill=X)

            frm = Frame(canvFrame, bg='#9FB6CD')
            frm.pack(side=TOP, fill=X)

            self.canvasMPL2, self.canvasMPLToolBar2 = getCanvas(frm, fig)
            self.canvasMPL2.pack(side=TOP)
            self.canvasMPLToolBar2.pack(side=TOP)

            #Create space for the plot and tool bar.
            windowHeight = windowHeight + 680
            plotNbr = plotNbr + 1

        canvas.config(width=1200,height= windowHeight)
        canvas.config(scrollregion=(0,0,1200, windowHeight))

        canvas.create_window(0,0, anchor = NW, window = canvFrame, width = 1200, height = windowHeight)

        canvas.focus_set() #Doesnt work with FigureCanvasTkAgg, this steals the focus 
        #canvas.focus_force()
        #canvas.grab_set_global()

        #scrollwheel settings
        canvas.configure(yscrollincrement='25')

##        def rollWheel(event):
##            #print "Mousescroll"
##            direction = 0
##            if event.num == 5 or event.delta == -120:
##                direction = 1
##            if event.num == 4 or event.delta == 120:
##                direction = -1
##            event.widget.yview_scroll(direction, UNITS)

        master.bind('<MouseWheel>', lambda event,s=self: self.rollWheel(event))
        canvas.bind('<Button-4>', lambda event: rollWheel(event))
        canvas.bind('<Button-5>', lambda event: rollWheel(event))

    def rollWheel(self, event):
        #print "Mousescroll"
        direction = 0
        if event.num == 5 or event.delta == -120:
            direction = 1
        if event.num == 4 or event.delta == 120:
            direction = -1
##        event.widget.yview_scroll(direction, UNITS)
        self.canvas.yview_scroll(direction, UNITS)    

plottedFigures = [] #To store matplotlib figures

def addPlottedFig(figure):
    '''
    Matplotlib figures to be shown in the GUI
    '''
    plottedFigures.append(figure)

def getCanvas(masterWidget, figure=None):
    '''
    Returns canvas of plot and canvas of tool bar
    '''
    if(figure==None):
        f = getHistoGramPlot() #For testing
        canvas = FigureCanvasTkAgg(f, master=masterWidget)
    else:
        canvas = FigureCanvasTkAgg(figure, master=masterWidget)

    canvas.show()
    toolbar = NavigationToolbar2TkAgg( canvas, masterWidget )
    toolbar.update()

    #return the plot and the toolbar
    return canvas.get_tk_widget(), canvas._tkcanvas

def initiate(FigureList=None):
    '''
    Start the GUI Application
    '''
    root = Tk()
    app = App(root, FigureList)
    root.mainloop()

def main():
    '''
    Shows 2 histograms plots in a tkinter GUI
    '''
    fig1 = getHistoGramPlot()
    fig2 = getHistoGramPlot()

    figList = [fig1, fig2]

    initiate(figList)

def getHistoGramPlot():
    '''
    Return a figure of a histogram
    '''
    mu, sigma = 100, 15
    x = mu + sigma * np.random.randn(10000)
    fig = plt.figure(figsize=(12, 6), dpi=100)
    ax = fig.add_subplot(111)
    n, bins, patches = ax.hist(x, 50, normed=1, facecolor='green', alpha=0.6)
    bincenters = 0.5*(bins[1:]+bins[:-1])
    mu = np.median(x)
    sigma = np.std(x)
    y = mlab.normpdf( bincenters, mu, sigma)
    l = ax.plot(bincenters, y, 'r--', linewidth=1)
    ax.set_xlabel('Values')
    ax.set_ylabel('Probability')
    xlimTop = max(x)
    xlimBottom = min(x)
    ax.set_xlim(xlimBottom, xlimTop)
    ax.grid(True)

    return fig

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T03:54:50.470

代码的缩进`class App:`不正确。我假设这`rollWheel`是一个在`__init__`.

进行此更改：

```
 def rollWheel(event):
        #print "Mousescroll"
        direction = 0
        if event.num == 5 or event.delta == -120:
            direction = 1
        if event.num == 4 or event.delta == 120:
            direction = -1
        # Tell the canvas to scroll directly
        canvas.yview_scroll(direction, UNITS)  

    canvas.bind_all('<MouseWheel>', lambda event: rollWheel(event))
    canvas.bind_all('<Button-4>', lambda event: rollWheel(event))
    canvas.bind_all('<Button-5>', lambda event: rollWheel(event)) 
```

有关tkinter`.bind_all`绑定的更多信息，请查看[effbot 的教程](http://effbot.org/tkinterbook/tkinter-events-and-bindings.htm)。

# mysql - mysql：将分数字符串转换为数字

> ID：13032997
> 
> 赞同：1
> 
> 时间：2012-10-23T14:39:33.310
> 
> 标签：mysql

我有像......“3/4”和“5/9”这样的字符串，还有一些像......“1/2 km”和“3/4 degree”存储在mysql列中。

我想将它们转换为数字。在第一种情况下，3/4 ==> .75。
在更复杂的第二种情况下，去掉像“km”和“degree”这样的单位，所以“1/2 km”==> 0.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:48:37.373

我认为这不是您应该在查询中执行的操作，而是在存储时计算它并将计算值保存在其文本值旁边的表中。

但是如果你愿意，你可以使用一些字符串函数来分割值并自己做数学：

```
select
  x.Multiplier / x.Divider as Result
from
    (select
      cast( substr( t.String, 
                    1, 
                    locate('/', t.String) - 1) 
            as decimal) 
        as Multiplier,
      cast( substr( t.String, 
                    locate('/', t.String) + 1, 
                    locate( ' ', 
                            concat(t.String, ' '))) 
            as decimal) 
        as Divider
    from
      YourTable t) x 
```

但是请注意，如果数据“无效”，这可能会导致麻烦。如果它说“0/0 km”，它可能会失败，如果它包含“这里没有数据”，它也可能会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T21:26:04.320

以上对我来说不太有效，所以想出了这个。该查询适用于“10”、“3/4”和“10 3/4”。显然，您应该用您的字符串或从表中选择的值替换底部的构造行：

```
SELECT 
    IF (
        LOCATE(' ',fraction) > 0 OR LOCATE('/',fraction) = 0,
        SUBSTRING_INDEX(SUBSTRING_INDEX(fraction,'/','1'),' ','1')
        ,0
    ) AS `integer`,
    IF (
        LOCATE('/',fraction) > 0,
        SUBSTRING_INDEX(SUBSTRING_INDEX(fraction,'/','1'),' ','-1'),
        0
    ) AS numerator,
    SUBSTRING_INDEX(fraction,'/','-1') AS denominator,
    (SELECT `integer`) + ((SELECT numerator) / (SELECT denominator)) AS `decimal`
FROM (
    SELECT '10 3/4' AS fraction
    UNION SELECT '10'
    UNION SELECT '3/4'
) t; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T14:47:52.103

使用 PHP，您可以：

```
// assuming $vals has the values from the database
$converted = array();
foreach ($vals as $key => $val) {
  preg_match("/^(\\d+)\\/(\\d+)/", $val, $matches)
  if (count($matches) > 2) {
    $numerator = (int) $matches[1];
    $denominator = (int) $matches[2];
    $converted[$key] = (float) $numerator / $denominator;
  }
} 
```

# php - CodeIgniter 中非常长的运行脚本在 90 分钟后显着减慢

> ID：13032998
> 
> 赞同：1
> 
> 时间：2012-10-23T14:39:38.503
> 
> 标签：php, apache, codeigniter

我有一个运行时间很长的脚本，它正在对大约 3000 万条数据库记录进行大量工作。每次我用 CLI 启动它并让它运行时，考虑到它正在做的工作量（大约 5k 条记录/分钟），它运行得相当快。然而，大约 90 分钟后，它的速度急剧下降，需要 2 小时才能完成 5k 条记录。如果我重新启动它，它会再次正常运行大约 90 分钟。

Apache 日志在速度变慢时没有显示任何内容，我只是不知道还能去哪里看。

在命令行上运行，PHP 的最大执行时间应该无关紧要，我已经注释掉了 CodeIngiter 中将其设置为 300 的位置；我什`set_time_limit(0)`至在脚本顶部添加了一个。

我的数据库是 PostgreSQL。

关于在哪里看的任何建议？

编辑：好的，肯定是内存问题。但是我正在使用几个数组来缓存结果以进行批量插入和更新，但是我在之后清除它们并且在我达到 90 分钟标记之前它们被使用了很多次。

有没有办法查看当前内存中的内容？

编辑：我不知道这是否是我再过 90 分钟的解决方案，但如果您是存在内存问题的 CI 用户，请查看此[http://codeigniter.com/forums/viewthread/140012/#689396](http://codeigniter.com/forums/viewthread/140012/#689396)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:47:57.317

您可以使用此功能查看您的内存使用情况[`memory_get_usage()`](http://php.net/manual/en/function.memory-get-usage.php)。

您可以在内存中看到的唯一内容是您已删除的数组或变量。任何已被`unset(`)、重用或无效的内容都会被垃圾收集器添加以供删除。

* * *

我以前做过 PHP 导入脚本，你可能遇到的是内存问题。完成后请务必清空数组。

根据您想在任务中获得多少乐趣，这可能会激发您的兴趣： http: [//gearman.org/](http://gearman.org/)

> Gearman 提供了一个通用的应用程序框架，将工作外包给其他更适合完成工作的机器或进程。