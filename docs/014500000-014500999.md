# StackOverflow 问答 14500000-14500999

# c++ - 使用 dup2 撤消 stdout 的重定向

> ID：14500000
> 
> 赞同：4
> 
> 时间：2013-01-24T11:15:01.967
> 
> 标签：c++

以下代码将“A”和“B”都写入文件“out.txt”，第一次调用 open 返回 3，第二次调用返回 4。

我期望将“A”写入文件，将“B”写入屏幕。我还希望 open 在每种情况下都返回 3。

我应该怎么做才能修复以下代码：

```
int main(int argc, char** argv)
{
    int file = open("out.txt", O_APPEND | O_WRONLY);
    if(file != 3)    return 1;

    if(dup2(file,1) < 0)    return 1;
    std::cout << "A" << std::endl;

    if(dup2(1,file) < 0)    return 1;
    std::cout << "B" << std::endl;

    file = open("out.txt", O_APPEND | O_WRONLY);
    if(file != 3)    return 1;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T11:36:06.157

[从此链接](http://linux.die.net/man/2/dup2)发表评论；

```
if(dup2(file,1) < 0)    return 1; 
```

> 使 newfd 成为 oldfd 的副本，必要时先关闭 newfd `

也就是说，它关闭 stdout 并使文件描述符 1 成为文件描述符 3 的克隆。

```
if(dup2(1,file) < 0)    return 1; 
```

> 如果 oldfd 是一个有效的文件描述符，并且 newfd 与 oldfd 具有相同的值，则 dup2() 什么都不做，并返回 newfd。

所以它什么也不做，因为文件描述符 1 与文件描述符 3 具有相同的值。

```
file = open("out.txt", O_APPEND | O_WRONLY); 
```

将使用下一个可用的文件描述符打开一个文件。由于文件描述符 3 很忙，它将（在这种情况下）使用 4。

你想做的是更多类似的事情；

```
int stdoutCopy = dup(1);                // Clone stdout to a new descriptor
if(dup2(file, 1) < 0) return 1;         // Change stdout to file
close(file);                            // stdout is still valid
std::cout << "A" << std::endl;
if(dup2(stdoutCopy,1) < 0) return 1;    // Change stdout back from the clone
close(stdoutCopy);                      // Close the clone
std::cout << "B" << std::endl; 
```

# php - Highchart - 如何在工具提示中显示 2 个具有 2 个不同值的图形

> ID：14500001
> 
> 赞同：0
> 
> 时间：2013-01-24T11:15:02.987
> 
> 标签：php, jsfiddle

我在 jFiddle [http://jsfiddle.net/jJyXe/1/上为你准备了一些东西](http://jsfiddle.net/jJyXe/1/)

我必须要不同的系列。我想用两个不同的单位显示它们。所以温度是°C，亮度是lx。我不清楚如何在工具提示中添加它...

```
pointFormat: '<b>{point.y}</b>', 
```

我认为这就是我可以定义的重点？就像是

```
pointFormat: '<b>{point.y}</b> °C' + <b>{point.y}</b> lx', 
```

但是 point.y 都是数据点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:32:49.773

它运作良好.. 试试看。只需在您的工具提示中添加格式化程序功能。它会给你准确的结果。下面的函数，

```
$(function () {
    var chart = new Highcharts.Chart({   
        chart: {renderTo: 'container'},
        tooltip: {
           formatter: function() {
               if(this.series.name == 'brightness')
                   var suffix = "lx";
               else
                   var suffix = "°C";
               return '<b>'+ this.series.name +'</b><br/>'+
               this.y +suffix;
           }
        },
     series: [{ name: 'brightness', data: [29.9, 71.5, 106.4]}, 
              { name: 'temperature',data: [16.4, 194.1, 95.6]}]    
    });
}); 
```

# html - 仅限 IE9：子项 div 背景仅在父元素内可见

> ID：14500002
> 
> 赞同：0
> 
> 时间：2013-01-24T11:15:07.050
> 
> 标签：html, css

我正在构建一个下拉菜单。问题是，在 IE9 中，子绝对定位元素的背景仅在父元素内部可见。可以看到菜单的页面：http: [//darkstar.weblunatix.net/stan/ddmenu](http://darkstar.weblunatix.net/stan/ddmenu) - 将鼠标悬停在左侧红色部分上，上面写着“електронен магазин” 这是我的代码：

```
<div class="maindrop">
        <span id="maindrop">&nbsp;</span>
        <div id="dropdown">
                <div class="dropel">
                    <a href="#"><span>Периферия</span></a>
                </div>
                <div class="dropel">
                    <a href="#"><span>Мултимедия</span></a>
                </div>
                <div class="dropel">
                    <a href="#"><span>Принтери и плотери</span></a>
                    <div class="submenu">
                        <a href="#"><span>test 1, test 2</span></a>
                        <a href="#"><span>Тест 1, Тест 2</span></a>
                        <a href="#"><span>Тест 1, Тест 2</span></a>
                        <a href="#"><span>Тест 1, Тест 2</span></a>
                        <a href="#"><span>Тест 1, Тест 2</span></a>
                        <a href="#"><span>Тест 1, Тест 2</span></a>
                    </div>
                </div>
                <div class="dropel">
                    <a href="#"><span>Мултифункционални устройства</span></a>
                </div>
        </div>
</div> 
```

从这个示例中，“子菜单”div 仅在“下拉菜单”内有背景。我的 CSS：

```
.maindrop {
    cursor: pointer;
    display: block;
    height: 63px;
    left: 178px;
    position: relative;
    top: 88px;
    width: 300px;
}
.maindrop #maindrop {
    cursor:pointer;
}
.maindrop:hover #dropdown {
    display:block;
}
#dropdown {
    display:none;
    font-family:Tahoma, Geneva, sans-serif;
    position:absolute;
    left:0;
    top:100%;
    min-width:300px;
    border-radius:5px 0 0 5px;
    border-radius:\0/;
    border:1px solid silver;
    opacity:0.9;
    filter: alpha(opacity=90);
    box-shadow:0 0px 10px grey;
    background: #d22125;
background: -moz-linear-gradient(top,  #d22125 0%, #d22125 23%, #000000 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#d22125), color-stop(23%,#d22125), color-stop(100%,#000000));
background: -webkit-linear-gradient(top,  #d22125 0%,#d22125 23%,#000000 100%);
background: -o-linear-gradient(top,  #d22125 0%,#d22125 23%,#000000 100%);
background: -ms-linear-gradient(top,  #d22125 0%,#d22125 23%,#000000 100%);
background: linear-gradient(to bottom,  #d22125 0%,#d22125 23%,#000000 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#d22125', endColorstr='#000000',GradientType=0 );
}
.dropel a {
    text-decoration: none;
}
.dropel > a span {

    color: white;
    display: block;
    height: 14px;
    opacity: 1;
    padding: 9px 5px 10px 30px;
    text-align: left;
    text-shadow: 1px 1px black;
    font-weight:bold;
    font-size:10pt;
    border-radius:5px 0 0 5px;
    border-radius:\0/;
}
.dropel > a span:hover {
    background-color:#f8f8f8;
    color:black;
    text-shadow:none;
}
.dropel {
    position:relative;
}
.submenu {
    position:absolute;
    left:200px;
    top:0;
    width:200px;
    background-color:red;
    height:100px;
} 
```

如何使子菜单可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:45:00.753

固定的。问题是这行代码：

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#d22125', endColorstr='#000000',GradientType=0 ); 
```

IE9 中的过滤器似乎有一个错误。删除这条线解决了问题（当然也删除了渐变......但这是我可以忍受的）。

# xaml - 如何使用 XAML 从同一模块中的自定义控件继承？

> ID：14500004
> 
> 赞同：0
> 
> 时间：2013-01-24T11:15:07.583
> 
> 标签：xaml, windows-8, windows-runtime, windows-store-apps, c++-cx

我正在尝试从我在项目中编写的控件（使用 XAML）继承。我试过空白页，但我什至无法让它工作：

```
<local:BlankPage
    x:Class="MyNamespace.MyPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MyNamespace"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid>
    </Grid>
</local:BlankPage> 
```

`BlankPage`只是我通过向导创建的一个新的空白页派生类。`MyPage`是一样的。我得到的错误是：

> 找不到类型“local:BlankPage”。确认您没有丢失程序集引用并且所有引用的程序集都已构建。

如何在 XAML 中为 WinRT / Windows 应用商店应用程序进行继承？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:19:37.600

看看你的 XAML：

```
<local:BlankPage 
```

您声明您希望它实例化 BlankPage，但您真正想要的是实例化您的自定义 MyPage。所以它*应该*是：

```
<local:MyPage 
```

假设 MyPage 在`local`命名空间中。

而且，就是这样！

# mule - 文件连接器的奇怪行为

> ID：14500009
> 
> 赞同：1
> 
> 时间：2013-01-24T11:15:20.000
> 
> 标签：mule, mule-studio

我有以下流程

```
<file:endpoint 
    name="StartPoint" 
    path="C:\input" 
    pollingFrequency="5000" 
    doc:name="File"/>

    <flow name="fileUploader" doc:name="fileUploader">

        <quartz:inbound-endpoint 
        jobName="myServiceJob" 
        repeatInterval="5000" 
        doc:name="Quartz" 
        responseTimeout="10000">

            <quartz:endpoint-polling-job>
        <quartz:job-endpoint ref="StartPoint"/>
        </quartz:endpoint-polling-job>
       </quartz:inbound-endpoint>       

    <!--<object-to-byte-array-transformer doc:name="Object to Byte Array"/> -->

     <file:outbound-endpoint 
        path="C:\outputfile" 
        responseTimeout="10000" 
        doc:name="File"/>

    </flow> 
```

现在假设，我在“C:\input”中有一些文件（1.txt、2.txt、myimg.jpg 等）。

![在此处输入图像描述](../Images/e8bc935226d3998b0487f50a2430ce5d.png)

在我运行流程时，虽然文件传输发生在目标文件夹“C:\outputfile”，但文件正在转换为 dat 文件。

![在此处输入图像描述](../Images/902c5cd975a627864802da39223e6ed6.png)

那么问题是什么以及如何解决呢？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:55:40.757

问题是 Mule 在消息的`id`属性之后命名文件。为了解决这个使用

```
<file:outbound-endpoint 
  path="C:\outputfile" 
  outputPattern="#[message.inboundProperties['originalFilename']]"
  responseTimeout="10000"/> 
```

# ruby-on-rails - 使用 has_many 计算，:通过 ActiveRecord 关系？

> ID：14500010
> 
> 赞同：0
> 
> 时间：2013-01-24T11:15:21.487
> 
> 标签：ruby-on-rails, rails-activerecord

我正在努力弄清楚如何最好地做到这一点……我有比赛，每天都会举行，参赛者参加，他们在每场比赛中都得到一个分数。我希望能够检索在一段时间内发生的比赛中每个参赛者的总分，并获得Rails 仍然可以使用的“虚拟”比赛模型（即*单行）。*

* * *

我的代码/数据结构如下：

**比赛：**
`has_many :contestant_scores`
`has_many :contestants, through: :contestant_scores`
专栏：`id, date`

**参赛者：**
`has_many :contestant_scores`
专栏：`id, name`

**ContestantScore：**
`belongs_to :competition`
`belongs_to :contestant`
列：`competition_id, contestant_id, score`

* * *

给定以下数据：

```
(competitions)
id | date
---------------
0  | 2013-01-01
1  | 2013-01-02
2  | 2013-01-03

(contestants)
id | name
--------------
0  | Jake
1  | Finn
2  | Bubblegum

(contestant_scores)
competition_id | contestant_id | score
--------------------------------------
0              | 0             | 1
0              | 1             | 2
0              | 2             | 3
1              | 0             | 1
1              | 1             | 2
1              | 2             | 3
2              | 0             | 1
2              | 1             | 2
2              | 2             | 3 
```

我将如何检索 2013-01-01 和 2013-01-03 之间的所有比赛，并获得每个参赛者的总分（按最高分排序）？基本上，我想要：

*   带有`nil`id 和日期的单个竞赛结果（因为它是“虚拟的”）
*   能够做到`virtual_competition.scores.first.score`并得到`9`
*   能够做到`virtual_competition.scores.first.contestant.name`并得到`"Bubblegum"`

* * *

我希望这是有道理的，希望你能指出我正确的方向。如果需要，我不反对使用更“纯”的 SQL，重要的是我将能够利用 ActiveRecord 的对象映射与结果。

如果这有什么不同，我将使用 Postgres 作为数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:25:20.973

```
start_date = Date.new("2013-01-01")
end_date = Date.new("2013-01-03")
Competition.include(:contestant_scores => :contestant).where(:date => start_date..end_date).group("contestants.id").order("contestant_scores.score") 
```

我想你需要这样的东西

# asp.net - 使用 web.config 启用 ASP.NET 的 URL 重写

> ID：14500013
> 
> 赞同：5
> 
> 时间：2013-01-24T11:15:27.787
> 
> 标签：asp.net, iis, web, web-config, plesk

我是新手`ASP.NET`，实际上我对此一无所知，但不要绝望，我**不是**在寻找教程……我的一位同事想`ASP.NET`在我们的 Web 服务器上运行一个应用程序。我们的网络服务器运行 Windows 2008 R2，带有 Plesk 11 和 IIS 7.5。

到目前为止，我在尝试启用时遇到了各种各样的问题`ASP.NET`，但经过大量的摆弄，我设法让应用程序正常工作（在一定程度上）。

但是，为了使应用程序正常工作，我必须从`web.config`文件中删除以下行：

```
<configSections>
    <sectionGroup name="system.webServer">
        <sectionGroup name="rewrite">
            <section name="rewriteMaps" overrideModeDefault="Allow" />
            <section name="rules" overrideModeDefault="Allow" />
        </sectionGroup>
    </sectionGroup>
</configSections> 
```

这是因为我收到了错误：

> 解析器错误消息：已定义部分或组名称“system.webServer”。对此的更新可能只发生在定义它的配置级别。

我的文件夹结构是这样的：

```
website/
    TestApplication/
        web.config
    index.php
    web.config 
```

我已经为文件夹“TestApplication”创建了一个应用程序（并不是我真的知道这意味着什么），但这并没有任何区别。

**我的印象是如果你创建一个应用程序，`web.config`里面的目录*不会*继承任何父配置！**这似乎不是这里的情况，因为我仍然收到错误。

我的问题是，对于上述情况，我该怎么办？如何阻止应用程序继承父目录配置，或者修复当前`web.config`文件以使用`ASP.NET`？

*需要注意的一点是，我在 IIS 管理器和 Plesk 中都进行了更改，因为我无法在 Plesk 控制面板中找到特定的东西，例如：为网站内的目录创建应用程序。我不认为这是这里问题的原因，但仍然值得一提。*

## 更新

这是我的完整 web.config 文件（删除了我的所有规则之一，因为它们对文件没有影响）：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>

<configSections>
    <sectionGroup name="system.webServer">
        <sectionGroup name="rewrite">
            <section name="rewriteMaps" overrideModeDefault="Allow" />
            <section name="rules" overrideModeDefault="Allow" />
        </sectionGroup>
    </sectionGroup>
</configSections>

    <system.webServer>
        <httpErrors errorMode="Detailed" />
        <asp scriptErrorSentToBrowser="true"/>
        <rewrite>
            <rules>
                <clear />
                <rule name="Browser Error Rewrite" stopProcessing="true">
                    <match url="^errors/browser$" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
                    <action type="Rewrite" url="_errors/browser.php?error=browser" />
                </rule>
            </rules>
        </rewrite>
        <defaultDocument>
            <files>
                <clear />
                <add value="index.php" />
            </files>
        </defaultDocument>
        <httpErrors>
            <clear />
            <error statusCode="400" prefixLanguageFilePath="" path="/_errors/error.php?id=400" responseMode="ExecuteURL" />
            <error statusCode="502" prefixLanguageFilePath="" path="/_errors/error.php?id=502" responseMode="ExecuteURL" />
            <error statusCode="407" prefixLanguageFilePath="" path="/_errors/error.php?id=407" responseMode="ExecuteURL" />
            <error statusCode="414" prefixLanguageFilePath="" path="/_errors/error.php?id=414" responseMode="ExecuteURL" />
            <error statusCode="415" prefixLanguageFilePath="" path="/_errors/error.php?id=415" responseMode="ExecuteURL" />
            <error statusCode="501" prefixLanguageFilePath="" path="/_errors/error.php?id=501" responseMode="ExecuteURL" />
            <error statusCode="500" prefixLanguageFilePath="" path="/_errors/error.php?id=500" responseMode="ExecuteURL" />
            <error statusCode="401" prefixLanguageFilePath="" path="/_errors/error.php?id=401" responseMode="ExecuteURL" />
            <error statusCode="403" prefixLanguageFilePath="" path="/_errors/error.php?id=403" responseMode="ExecuteURL" />
            <error statusCode="404" prefixLanguageFilePath="" path="/_errors/error.php?id=404" responseMode="ExecuteURL" />
            <error statusCode="405" prefixLanguageFilePath="" path="/_errors/error.php?id=405" responseMode="ExecuteURL" />
            <error statusCode="412" prefixLanguageFilePath="" path="/_errors/error.php?id=412" responseMode="ExecuteURL" />
            <error statusCode="406" prefixLanguageFilePath="" path="/_errors/error.php?id=406" responseMode="ExecuteURL" />
        </httpErrors>
        <handlers>
            <clear />
            <add name="PageHandlerFactory-Integrated" path="*.aspx" verb="GET,HEAD,POST,DEBUG" type="System.Web.UI.PageHandlerFactory" preCondition="integratedMode" />
            <add name="php-5.3.10" path="*.php" verb="GET,HEAD,POST" modules="FastCgiModule" scriptProcessor="C:\Program Files (x86)\Parallels\Plesk\Additional\PleskPHP53\php-cgi.exe" resourceType="Either" requireAccess="Script" />
            <add name="StaticFile" path="*" verb="*" modules="StaticFileModule,DefaultDocumentModule,DirectoryListingModule" resourceType="Either" />
        </handlers>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:29:37.870

您的 web.config 中似乎有两次（这就是“解析器错误消息：已定义部分或组名 'system.webServer'”错误所暗示的内容）。

在应用程序的 web.config 中搜索并剪切其中的代码并将其粘贴到另一个（确保代码不会重复）删除您已从中剪切代码的那个

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-24T06:57:07.843

如果您使用的是较新版本的 IIS 或使用 Windows Azure，则不需要`<ConfigSection>`. 它内置在新的 IIS 中。只需继续并在 web.config 中`<rewrite>`直接使用标签。`<system.webServer>`

# iphone - 在 ios 中如何创建基于地理位置的警报？

> ID：14500019
> 
> 赞同：2
> 
> 时间：2013-01-24T11:15:44.220
> 
> 标签：iphone

我想创建一个警报，它会根据任何特定的地方提醒我。每当我到达那个地方时，警报器就会开始发出哔哔声。

请帮助我试图通过互联网搜索但仍然没有得到的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:28:03.927

您必须使用 CoreLocation 框架来实现您想要实现的目标。

这是 CoreLocation 的 Apple 示例

[http://developer.apple.com/iphone/library/samplecode/LocateMe/index.html](http://developer.apple.com/iphone/library/samplecode/LocateMe/index.html)

这是您可以尝试的方法：

设置提醒 - 在设置余数时获取当前位置并保存该位置的纬度 + 经度。

当用户从一个位置移动到另一个位置时，CoreLocation 将返回重要的位置更改通知。

检查纬度 + 经度并查看它是否与您保存的提醒匹配。

如果是，则警告用户，否则保持原样。

希望能帮助到你 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-01T16:34:03.910

已经有一些应用程序可以做到这一点，例如，这个：

[https://itunes.apple.com/us/app/alarm-on-place/id1234840835?mt=8](https://itunes.apple.com/us/app/alarm-on-place/id1234840835?mt=8)

但是如果由于某种原因您想自己创建它，您应该使用核心位置框架在您希望触发警报的位置设置区域，并且在区域输入的句柄中您可以发送本地通知或开始播放一个声音。

# java - 休眠查询类似问题

> ID：14500024
> 
> 赞同：0
> 
> 时间：2013-01-24T11:16:14.173
> 
> 标签：java, sql, hibernate, hql, sql-like

我目前正在创建一个用户定义的搜索，我的问题是，当涉及到普通 sql（我在我的数据库中运行它）时，它会返回一个结果，但是当涉及到 HQL 时，它不会返回任何结果。

例子。我在 SQL 中做了这个查询。

```
SELECT * FROM USER_PROFILES WHERE FIRST_NAME LIKE '%somevalue existinDb%'; 
```

这将返回一个值，但是使用 HQL 查询对象

```
 String someValue = "somevalue existinDb"
    String temp_name = "%" +someValue + "%";
            System.out.println(temp_name);
            Query query =  sess().createQuery(
                    "from UserProfile where firstName  LIKE :temp_name").setParameter("temp_name",temp_name); 
```

但是，HQL 查询对象不会呈现与 SQL 查询相同的结果。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:22:57.157

```
String temp_name = "%'" +someValue + "'%"; 
```

会为你工作。我以前也有同样的问题。如果它不工作，你应该玩弄`%`s。我认为将 a`%`放在参数的前面是行不通的。

该`%`符号可用于在模式之前和之后定义通配符（模式中缺少的字母）。因此，如果您将`%`字符串放在前面，则您正在寻找之前缺少的字符串`someValue`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:48:23.863

试试这个 ：

sess().createQuery("from UserProfile where firstName LIKE :temp_name").setParameter("temp_name",'%' + someValue + '%');

还有一个更简单的方法： String someValue = "somevalue existsDb" String temp_name = "%" +someValue + "%"; 查询 query = session.createQuery(“来自 UserProfile where firstName LIKE ?”); query.setString(0, temp_name);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T22:25:49.443

对于这样的查询，您应该使用[Hibernate Search](http://www.hibernate.org/subprojects/search.html)：效率更高，并且会更好地匹配结果，从而使应用程序更加用户友好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T03:13:02.047

您必须使用`"/%"`而不是`"%"`

# android - 如何从arraylist中检索答案

> ID：14500025
> 
> 赞同：0
> 
> 时间：2013-01-24T11:16:18.917
> 
> 标签：android, arraylist, radio-button, hashmap

我是安卓新手。

我面临数组列表的问题。问题是..

我的数组是字符串数组列表。我需要的是什么？我有两个数组列表。QtnsArraylist1 包含 4.. 元素（4.. 问题）， AnsArraylist2 包含 16.. 元素（16.. 答案，每个问题 4 个选项总共 16.. 元素）。对于 QtnsArraylist1 中的第一个问题，我必须获得前 4 个元素来自 AnsArraylist2。类似地，如果我给下一个按钮，它会显示问题 2、3、4...。我怎么能得到这个？.

请帮我一个..

提前致谢。

[我的代码粘贴箱](http://pastebin.com/kLNrAnXX%5D%5B1%5D)：

```
protected void onPostExecute(String file_url) {
pDialog.dismiss();       
ques1=new ArrayList<String>(new HashSet<String>(ques1));
System.out.println(" Question array:"+ques1);
String[] quesArr = new String [ques1.size()];
quesArr = ques1.toArray(quesArr);
for(String s: quesArr){
System.out.println("All Array Questions:"+s);
final TextView txtque = (TextView) findViewById(R.id.que_txt);
final String text=ques1.get(j).toString();
System.out.println("Array:"+text);
txtque.setText(text);
  }            

answ1=new ArrayList<String>(new ArrayList<String>(answ1));
System.out.println(" Answer array:"+answ1);
String[] answArr = new String [answ1.size()];
answArr = answ1.toArray(answArr);
for(String A: answArr){
// final Object getName0 = answArr[0].toString();
// final Object getName1 = answArr[1].toString();
// final Object getName2 = answArr[2].toString();
// final Object getName3 = answArr[3].toString();
Collections.sort(answ1, new Comparator<String>() {
@Override
public int compare(String s1, String s2) {
return s1.compareToIgnoreCase(s2);
  }
});
System.out.println("All Array Answers:"+A);    
}

btn_practicerg =(RadioGroup) findViewById(R.id.rdgroup);
btn_practice1 = (RadioButton) findViewById(R.id.RB1);
btn_practice1.setText(String.valueOf(answArr[0]));
btn_practice2 = (RadioButton) findViewById(R.id.RB2);
btn_practice2.setText(String.valueOf(answArr[1]));
btn_practice3 = (RadioButton) findViewById(R.id.RB3);
btn_practice3.setText(String.valueOf(answArr[2]));
btn_practice4 = (RadioButton) findViewById(R.id.RB4);
btn_practice4.setText(String.valueOf(answArr[3]));

Button nextBtn = (Button) findViewById(R.id.nxt_btn);
nextBtn.setOnClickListener(new Button.OnClickListener(){
public void onClick(View v){
j++;
TextView txtque = (TextView) findViewById(R.id.que_txt);
txtque.setText(ques1.get(j).toString());                               
k++;
btn_practice1.setText(answ1.get(k).toString());
k++;
btn_practice2.setText(answ1.get(k).toString());
k++;
btn_practice3.setText(answ1.get(k).toString());
k++;
btn_practice4.setText(answ1.get(k).toString()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:34:19.083

那么你为什么不尝试类似的东西：

```
public static List<String> getAnswers(int questionNumber)
{
    int i = questionNumber;
    List answers = new ArrayList<String>();
    String question = ques1[i];

    for (i; i< i+ 4; i++)
    {
        answers.add(AnsArraylist2[i];
    }
    return answers;
} 
```

此函数应返回您想要的内容，假设您的列表已根据问题添加了 4 个块中的答案

**编辑**
这是一个 onClickListener 应该大致做你想要的：

```
class sortClickListener implements onClickListener
{
    @Override
    public void onClick(View v) 
    {
        List<String> answers = getAnswers(v.getTag());

        //I'm assuming you're going to display these answers in textViews
        //Also assuming you've put these text views into a list
        for (int i = 0; i < 4; i ++)
        {
            textViewList[i].setText(answers.get[i]);
        }
    }
} 
```

现在使用此侦听器，您需要执行以下操作才能使您的代码正常工作：

```
btn_practice1.setTag(the_number_in_the_array_you_need);
btn_practice1.setOnClickListener(new sortOnClickListner()); 
```

对所有按钮执行此操作，应该没问题。我没有使用单选按钮，因为我想不出他们在我脑海中使用的听众的语法

# python - Python：如何从另一个程序窗口获取文本标签？

> ID：14500026
> 
> 赞同：4
> 
> 时间：2013-01-24T11:16:19.100
> 
> 标签：python, window, textfield, win32gui

我想用 Python 从另一个程序中读取文本标签。我想我必须使用 WM_GETTEXT，但我不知道怎么做，而且我在互联网上找不到任何东西。我的程序获取活动窗口，但不读取文本标签。所以我希望有人可以帮助我。

编辑：我添加了缓冲区和 SendMessage 部分。例如，我可以从编辑器中获取文本，但不能从我试图从中获取文本标签的程序中获取。

我有以下代码，我在 stackoverflow 上找到了这些代码（[从弹出窗口获取文本](https://stackoverflow.com/questions/5862454/get-text-from-popup-window)）：

```
import win32gui
import time

while True:
    window = win32gui.GetForegroundWindow()
    title = win32gui.GetWindowText(window)
    if 'GLS Exportdatei' in title:
        control = win32gui.FindWindowEx(window, 0, 'static', None)
        buffer = win32gui.PyMakeBuffer(20)
        length = win32gui.SendMessage(control, win32con.WM_GETTEXT, 20, buffer)

        result = buffer[:length]
        print result
        time.sleep(1) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T14:41:19.633

如果您窗口的文本超过 20 个字符，则您创建的缓冲区太小。尝试将其扩展到超出您可能需要的范围：

```
buffer = win32gui.PyMakeBuffer(255)
length = win32gui.SendMessage(control, win32con.WM_GETTEXT, 255, buffer) 
```

如果要访问主窗口中的控件，请使用[EnumChildWindows](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633494%28v=vs.85%29.aspx)，传递父窗口的句柄。您可能需要递归地执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-13T18:58:03.463

`win32gui.PyMakeBuffer`已被弃用。另外，`buffer`是一个内置函数，所以不要将它用作变量名。

相反，只需这样做：

```
buf = " " * 255
length = win32gui.SendMessage(control, win32con.WM_GETTEXT, 255, buf)
result = buf[:length] 
```

# python - 使用python从语料库中提取最常用的单词

> ID：14500028
> 
> 赞同：5
> 
> 时间：2013-01-24T11:16:22.913
> 
> 标签：python, dictionary, frequency, word-count

也许这是一个愚蠢的问题，但我在用 Python 从语料库中提取十个最常用的词时遇到了问题。这就是我到目前为止所得到的。（顺便说一句，我与 NLTK 合作阅读一个语料库，其中包含两个子类别，每个 10 个 .txt 文件）

```
import re
import string
from nltk.corpus import stopwords
stoplist = stopwords.words('dutch')

from collections import defaultdict
from operator import itemgetter

def toptenwords(mycorpus):
    words = mycorpus.words()
    no_capitals = set([word.lower() for word in words]) 
    filtered = [word for word in no_capitals if word not in stoplist]
    no_punct = [s.translate(None, string.punctuation) for s in filtered] 
    wordcounter = {}
    for word in no_punct:
        if word in wordcounter:
            wordcounter[word] += 1
        else:
            wordcounter[word] = 1
    sorting = sorted(wordcounter.iteritems(), key = itemgetter, reverse = True)
    return sorting 
```

如果我用我的语料库打印这个函数，它会给我一个后面带“1”的所有单词的列表。它给了我一本字典，但我所有的价值观都是一个。而且我知道，例如，“婴儿”这个词在我的语料库中出现了五六次……但它仍然给出了“婴儿：1”……所以它不能按照我想要的方式运作……
有人可以帮忙吗我？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-29T10:36:20.980

如果您仍然使用 NLTK，请尝试使用 FreqDist(samples) 函数首先从给定样本生成频率分布。然后调用 most_common(n) 属性查找样本中最常见的 n 个词，按频率降序排列。就像是：

```
from nltk.probability import FreqDist
fdist = FreqDist(stoplist)
top_ten = fdist.most_common(10) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-07-07T04:23:09.940

蟒蛇方式：

```
In [1]: from collections import Counter

In [2]: words = ['hello', 'hell', 'owl', 'hello', 'world', 'war', 'hello', 'war']

In [3]: counter_obj = Counter(words)

In [4]: counter_obj.most_common() #counter_obj.most_common(n=10)
Out[4]: [('hello', 3), ('war', 2), ('hell', 1), ('world', 1), ('owl', 1)] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T11:26:40.610

问题在于您对`set`.

集合不包含重复项，因此当您创建一组小写单词时，从那里开始每个单词只有一次出现。

假设你`words`是：

```
 ['banana', 'Banana', 'tomato', 'tomato','kiwi'] 
```

在你的 lambda 降低所有情况后，你有：

```
 ['banana', 'banana', 'tomato', 'tomato','kiwi'] 
```

但是你这样做：

```
 set(['banana', 'Banana', 'tomato', 'tomato','kiwi']) 
```

返回：

```
 ['banana','tomato','kiwi'] 
```

由于从那一刻起，您将计算基于`no_capitals`集合，因此每个单词只会出现一次。不要创建`set`，您的程序可能会正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-09T13:20:10.397

这是一种解决方案。使用前面的响应中讨论的集合。

```

`def token_words(tokn=10, s1_orig='hello i must be going'):
    # tokn is the number of most common words.
    # s1_orig is the text blob that needs to be checked.

    # logic
    # - clean the text - remove punctuations.
    # - make everything lower case
    # - replace common machine read errors.
    # - create a dictionary with orig words and changed words.
    # - create a list of unique clean words
    # - read the "clean" text and count the number of clean words
    # - sort and print the results

    #print 'Number of tokens:', tokn

    # create a dictionary to make puncuations
    # spaces.
    punct_dict = {  ',':' ', 
                    '-':' ',
                    '.':' ',
                    '\n':' ',
                    '\r':' '
                    }

    # dictionary for machine reading errors
    mach_dict = {'1':'I', '0':'O',
                '6':'b','8':'B' }

    # get rid of punctuations
    s1 = s1_orig
    for k,v in punct_dict.items():
        s1 = s1.replace(k,v)

    # create the original list of words.
    orig_list = set(s1.split())

    # for each word in the original list,
    # see if it has machine errors.
    # add error words to a dict.
    error_words = dict()
    for a_word in orig_list:
        a_w2 = a_word
        for k,v in mach_dict.items():
            a_w2 = a_w2.replace(k,v)

        # lower case the result.
        a_w2 = a_w2.lower()

        # add to error word dict.
        try:
            error_words[a_w2].append(a_word)
        except:
            error_words[a_w2] = [a_word]

    # get rid of machine errors in the full text.
    for k,v in mach_dict.items():
        s1 = s1.replace(k,v)

    # make everything lower case
    s1 = s1.lower()

    # split sentence into list.
    s1_list = s1.split()

    # consider only unqiue words
    s1_set = set(s1_list)

    # count the number of times 
    # the each word occurs in s1 
    res_dict = dict()   
    for a_word in s1_set:
        res_dict[a_word] = s1_list.count(a_word)

    # sort the result dictionary by values
    print '--------------'
    temp = 0
    for key, value in sorted(res_dict.iteritems(), reverse=True, key=lambda (k,v): (v,k)):
        if temp < tokn: 
            # print results for token items
            # get all the words that made up the key
            final_key = ''
            for er in error_words[key]:
                final_key = final_key + er + '|'
            final_key = final_key[0:-1]
            print "%s@%s" % (final_key, value)
        else:
            pass
        temp = temp + 1

    # close the function and return
    return True

#-------------------------------------------------------------    
# main

# read the inputs from command line
num_tokens = raw_input('Number of tokens desired: ')    
raw_file = raw_input('File name: ') 

# read the file
try:
    if num_tokens == '': num_tokens = 10
    n_t = int(num_tokens)
    raw_data = open(raw_file,'r').read()
    token_words(n_t, raw_data)
except:
    print 'Token or file error.  Please try again.'` 

```

# asp.net - 在 LINQ 中选择 A，其中 A < B

> ID：14500035
> 
> 赞同：0
> 
> 时间：2013-01-24T11:16:37.253
> 
> 标签：asp.net, linq

因此使用 LINQ 尝试比较数据库中的 2 个值并选择日期小于今天正好一年的位置……因此将选择 24/1/12 和 24/1/13 之间的任何内容。

所以我有...

```
 var selectedObject =
            (from workstation in db.Work_Station
             join invoice in db.Invoices on workstation.id equals invoice.Site_Id
             where InvoiceDate < DateTime.Now.AddYears(-1)
             select workstation).Distinct().ToList(); 
```

这正在生成一个列表，但它不正确。我一直在玩附加年，但似乎无法得到它..有人有什么想法吗？谢谢你

* * *

编辑：嘿，谢谢大家的快速回复......我实际上犯了一个小错误，我想返回发票日期大于今天正好一年的价值......所以任何日期 <= 24/ 1/12 将被退回。我已经使用了你的建议来使用...

DateTime OneYearAgo = DateTime.Now.AddYears(-1);

```
 var selectedObject  =
        (from workstation in db.Work_Station
         join invoice in db.Invoices on workstation.id equals invoice.Site_Id
          where InvoiceDate <= OneYearAgo
         select workstation).Distinct().ToList(); 
```

这将返回许多发票......其中一些在 23/1/12 之前，而一些在之后。

Iv 尝试更改为 CurrentInvoiceDate >= OneYearAgo 的位置，它应该返回从现在到一年前的任何日期，但没有返回任何内容......我做错了什么？请指教...谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:19:17.117

提供您希望发票所属的日期范围：

```
 var beginDate = DateTime.Now.AddYears(-1);
  var endDate = DateTime.Now;
  var selectedObject =
            (from workstation in db.Work_Station
             join invoice in db.Invoices on workstation.id equals invoice.Site_Id
             where invoice.InvoiceDate >= beginDate &&
                   invoice.InvoiceDate <= endDate
             select workstation).Distinct().ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T11:18:57.073

您的查询符合您的文字说明。但两者都不匹配您的样本数据。

您想要的是日期*大于或等于*（不小于）一年前的所有数据：

```
var selectedObject =
            (from workstation in db.Work_Station
             join invoice in db.Invoices on workstation.id equals invoice.Site_Id
             where InvoiceDate >= DateTime.Today.AddYears(-1)
             select workstation).Distinct().ToList(); 
```

如果您的发票的日期可能在未来，您还需要指定发票的日期应*小于或等于*今天：

```
var selectedObject =
            (from workstation in db.Work_Station
             join invoice in db.Invoices on workstation.id equals invoice.Site_Id
             where InvoiceDate >= DateTime.Today.AddYears(-1)
                && InvoiceDate <= DateTime.Today
             select workstation).Distinct().ToList(); 
```

顺便说一句：您想使用`DateTime.Today`而不是`DateTime.Now`.
使用 DateTime.Now 不会返回 24/1/12 没有时间或时间早于现在的发票。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T11:19:51.737

代码将如下所示...

```
var selectedObject =
            (from workstation in db.Work_Station
             join invoice in db.Invoices on workstation.id equals invoice.Site_Id
             where InvoiceDate >= DateTime.Now.AddYears(-1) &&
                   InvoiceDate <= DateTime.Now
             select workstation).Distinct().ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T11:21:22.813

我会使用一些外部时间变量，以避免查询内部的 DateTime 操作（有时 C# DateTime 和 SQL DateTime2 不相处）。

```
DateTime timeNow = DateTime.Now;
DateTime timeToCompare = DateTime.Now.Subtract(new TimeSpan(365, 0, 0, 0)); ;
var selectedObject = (from workstation in db.Work_Station
                      join invoice in db.Invoices on workstation.id equals invoice.Site_Id
                      where InvoiceDate > timeToCompare
                      select workstation).Distinct().ToList(); 
```

看看它是否有帮助（我有很多这样的查询：）

编辑：如下所述，没有注意到比较实际上必须比一年前更大。

# javascript - 带回调的 GWT JSNI 小程序

> ID：14500037
> 
> 赞同：2
> 
> 时间：2013-01-24T11:16:44.673
> 
> 标签：javascript, gwt, applet, jsni

我花了很长时间编码和搜索这个网站和其他网站，但没有成功。我有一个调用 JSNI 的 GWT 应用程序，然后调用一个 Applet 来执行一些文件加载​​。所以我需要在文件加载完成后被回调。尽我所能，我无法调用我的 JavaScript（或 Java）回调。通常你引用 $wnd 变量是这样的：

```
$wnd.myFunc() 
```

如果我尝试这个（或我认为可能有用的大量其他变体），它会默默地失败。我什至不能称之为简单的东西：

```
$wnd.alert("Made it") 
```

我试过使用`window.eval("$wnd.myFunc()");`

我也尝试`window.call`过同样的结果。

我猜我在错误的上下文中（GWT 将所有内容都放在 IFrame 中），但我找不到任何选项来访问 GWT 应该放置`"$wnd"`变量的全局上下文。

出于安全原因，IFrame 应该受到一些限制，我想知道我是否遇到了故意禁用的东西。

无论如何，我有很多猜测，但我对 JavaScript 的了解有限，所以也许我忽略了一些简单的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:27:12.973

你的 GWT 代码

```
String value = JsniMethods.decryptData(data, publickey); 
```

在 JsniMethods 类中

```
public static native String decryptData(String text, String publickey) /*-{
        var encrypted = $doc.appletname.methodname(text, publickey);
        return encrypted;
    }-*/; 
```

你在 html 中的小程序初始化

```
<applet name="appletname" code="appletname.class"
        archive="appletname.jar" width="0" height="0" MAYSCRIPT="true"
        scriptable="true" > </applet> 
```

最后

把你`appletname.jar`的战争文件夹..

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T04:07:48.087

我终于解决了我自己的问题。以下是有效方法的简要概述：

这是小程序插入代码：

```
 String  appletDivHTML = "<div> <applet id=\"uploadApplet\" " +
            "code=\"<mypath>.ClientFileUpload\" " +
            "archive=\"applet.jar\" width=\"100\" height=\"100\" MAYSCRIPT> </applet>" +
            "<param name=\"MAYSCRIPT\" value=\"true\"/> </div>";
    com.google.gwt.user.client.Element  div = DOM.createDiv();
    div.setInnerHTML(appletDivHTML);
    BodyElement  body = Document.get().getBody();
    body.appendChild(div); 
```

这是 Java 回调和 JSNI：

```
public static void fileCallback(String result) {
    Util.showMessage("Callback reached", "Result: " + result);
}

public static native void uploadFile(String serverURL, String filePath) /*-{
    $wnd.fileCallback = $entry(@<mypath>.Applet::fileCallback(Ljava/lang/String;));
    var  fileArray = [];
    fileArray.push(filePath);
    $wnd.uploadApplet.uploadFiles(serverURL, fileArray, "fileCallback");
}-*/; 
```

调用 Java 回调的小程序代码：

```
 JSObject window = JSObject.getWindow(this);
        String[] args = new String[] {responseString};
        window.call(callbackJsMethod, args); 
```

# perl - 改变属性肥皂：身体

> ID：14500042
> 
> 赞同：0
> 
> 时间：2013-01-24T11:16:50.223
> 
> 标签：perl, soaplite

我正在使用 perl、SOAP::Lite。有谁知道如何更改soap:body 的标签属性？我真正需要的是向SOAP::Lite perl 中的soap:Body 标记添加ID 属性的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:47:11.030

也许您想按照[此处所述覆盖序列化程序](http://cookbook.soaplite.com/#creating%20custom%20serializer)

# php - 将 php 变量传递给 jQuery flot 饼图

> ID：14500049
> 
> 赞同：0
> 
> 时间：2013-01-24T11:17:01.397
> 
> 标签：php, javascript, jquery, flot

我在 php 中定义了 3 个变量

```
$record = "283-161-151";
$rec = explode("-", $record);
$win = $rec[0];
$draw = $rec[1];
$loss = $rec[2]; 
```

$win、$draw 和 $loss 回声很好，所以我知道它们在工作

在页面底部运行的单独 js 文件中设置 var 数据时，我想将 3 个变量传递给 3 个设置文本标签。

```
var data = [
{ label: 'Wins',  data: '<?php echo $win ?>', color:'green'},
{ label: 'Draws',  data: '<?php echo $draw ?>', color:'orange'},
{ label: 'Losses',  data: '<?php echo $loss ?>', color:'red'}
]; 
```

如果我将每个 js php 调用从`<?php echo $win ?>`更改为实际数字以测试图表显示。

我想知道内联php语法是否正确？我尝试了几种不同的格式，希望用一双新鲜的眼睛轻松解决。

## 更新

php代码

```
<?php
$record = "283-161-151";
$rec = explode("-", $record);
?>
<script>
 var win = <?php echo $rec[0]; ?>;
 var draw = <?php echo $rec[1]; ?>;
 var loss = <?php echo $rec[2]; ?>;
</script> 
```

js文件代码

```
var data = [
{ label: 'Wins',  data: var win, color:'green'},
{ label: 'Draws',  data: var draw, color:'orange'},
{ label: 'Losses',  data: var loss, color:'red'}
]; 
```

当我查看页面源时，我看到了这个

```
<script>
 var win = 283;
 var draw = 161;
 var loss = 151;
</script> 
```

但仍然没有输出..如果我用数字替换最终 js 文件中的 var win、var draw 等，它确实有效..

有人知道我是否接近了吗？干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:27:29.240

I think the problem is that you are quoting the numbers. Change it so that the numbers are unquoted:

```
var data = [
{ label: 'Wins',  data: <?php echo $win ?>, color:'green'},
{ label: 'Draws',  data: <?php echo $draw ?>, color:'orange'},
{ label: 'Losses',  data: <?php echo $loss ?>, color:'red'}
]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:25:21.853

显然您的 PHP 变量超出了范围，那是因为 echo 返回 ''。

有一个很好的主题描述“[如何使用 PHP 回显函数在 JavaScript 中定义变量？](https://stackoverflow.com/questions/13734338/how-to-define-a-variable-in-javascript-with-php-echo-function/13734383#13734383) ”

PS：出于测试目的，如果可能的话，您可以尝试将 javascript 片段嵌入到声明变量的 PHP 脚本中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:35:08.847

您正在尝试在 javascript 文件中运行 php。浏览器无法处理服务器代码。php 仅在服务器上运行。

您可以做的是将 php 变量传递给 javascript 变量，如下所示： 在页面内（在外部脚本的脚本标记之前）：

```
$record = "283-161-151";
$rec = explode("-", $record);
echo '<script>var plotData='.json_encode($rec).';</script>';
/* displays var plotData=[283,161,151]; */ 
```

现在使用已经存在 JS 的 javascript 变量将是：

```
var data = [
{ label: 'Wins',  data: plotData[0], color:'green'},
{ label: 'Draws',  data: plotData[1], color:'orange'},
{ label: 'Losses',  data: plotData[2], color:'red'}
]; 
```

# javascript - Asp.net 下拉列表 Onselectedindexchanged 事件

> ID：14500051
> 
> 赞同：2
> 
> 时间：2013-01-24T11:17:11.693
> 
> 标签：javascript, asp.net, events, drop-down-menu

我的asp.net 页面中有一些动态控件。

喜欢，

```
TextBox ratingtxtbox = new TextBox();
ratingtxtbox.ID = "Rating_1"; 
```

和

```
DropDownList Exsecondpositiontxtbox = new DropDownList();
Exsecondpositiontxtbox.ID = "Exacta2nd_" + i.ToString(); 
```

对于我的文本框，我将 keyup 事件添加为

```
ratingtxtbox.Attributes.Add("onkeyup", "ChangebyWin(" + i.ToString()+")"); 
```

它完美地工作..

现在我将下拉列表的 indexchanged 事件添加为

```
Exsecondpositiontxtbox.Attributes.Add("onselectedindexchanged", "ChangebyExacta(" + i.ToString() + ")"); 
```

但它不起作用..是键名中的错误..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:35:55.657

你应该`onchange`改用。`OnSelectedIndexChanged`是服务器端事件

```
Exsecondpositiontxtbox.Attributes.Add("onchange", "ChangebyExacta(" + i.ToString() + ")"); 
```

这是您将如何使用`OnSelectedIndexChanged`

```
Exsecondpositiontxtbox.SelectedIndexChanged += SomeEventHandler; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:35:10.840

尝试这个

```
Exsecondpositiontxtbox.Attributes.Add("onchange", "ChangebyExacta(" + i.ToString() + ")"); 
```

# javascript - 在 IE-7 中调试 JS

> ID：14500059
> 
> 赞同：0
> 
> 时间：2013-01-24T11:17:35.867
> 
> 标签：javascript, internet-explorer, javascript-debugger

我经常使用 Firebug 在 Mozilla 中调试 JS 和 HTML，但时不时会遇到一个仅限 IE 的 JavaScript 错误，这真的很难找到（例如：当源 HTML 只有 300 时，第 802 行字符 1 上的错误行）。

我非常需要一个用于 IE 的轻量级 JS 工具（如 firebug），如果我遇到错误然后卸载，我可以在几秒钟内将其安装在客户端的 PC 上。一些 Microsoft 工具需要一些严重的下载和配置时间。

请问有什么建议吗？我正在使用 IE-7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:24:44.750

[DebugBar](http://www.debugbar.com/)不错，而且是免费供个人使用的。如果在商业上使用，您必须为此付费。

您可以使用IE-8或更高版本，在开发过程中仍然使用浏览器模式来检查IE7的兼容性，它带有一个非常好的[开发工具栏](http://msdn.microsoft.com/en-us/library/ie/gg589507%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:21:39.390

哥们你去哪儿了？？:) 从 IE-8 开始，有一个名为 IE Developer Toolbar 的内置工具与 IE 一起打包。但是您仍然可以随时下载并安装 IE-6 和 7。它只有 600kb 或其他东西。

此外，还有 Firebug Lite ，适用于 firefox 以外的任何浏览器。如果你太习惯 Firebug，这对你有好处。

希望这可以帮助 ！！

# php - 挂钩到在 Magento 中发货的订单

> ID：14500060
> 
> 赞同：0
> 
> 时间：2013-01-24T11:17:36.740
> 
> 标签：php, magento

一旦销售订单发货，我需要触发观察者事件，最好是通过钩子。

到目前为止，我只发现 sales_order_* 挂钩是在用户进行结帐和付款时，但之后什么也没有。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:28:56.733

尝试捕捉事件`sales_order_shipment_create_after`

# php - 重定向时丢失发布的数据 - php

> ID：14500063
> 
> 赞同：0
> 
> 时间：2013-01-24T11:17:55.280
> 
> 标签：php, redirect, post, curl

我不知道我哪里错了。我通过 ajax 请求从主页数据发送到 somepage.php。在某些情况下，somepage.php 会将用户重定向到显示用户页面的 someotherpage.php。重定向由标头（'location :'. $url）进行，（因此 $url 处理 someotherpage.php） 问题是重定向丢失了从初始 ajax 请求发布的数据。所以我选择通过以下方式重定向用户：

```
$data = $_POST['data'];
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
$response = curl_exec($ch);
curl_close($ch);
exit; 
```

问题是我在点击 someotherpage.php 时没有发布数据了。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:21:02.877

POST 仅持续一个请求，因此您肯定会在重定向时丢失它。

将其分配给重定向时的 SESSION 变量：

```
session_start();
$_SESSION['post_data'] = $_POST;
// Redirect the user 
```

然后，在重定向到页面上：

```
$data = $_SESSION['post_data'];
unset($_SESSION['post_data']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:21:11.453

你的问题已经有了自己的答案。

一旦页面被重定向，发布的数据也将消失。

要获取全局发布的数据，您必须使用`$_SESSION`来存储发布的数据。因为如您所知`$_SESSION`，它本身就是超级全球性的。

# android - 无需在android中手动输入用户名和密码即可读取gmail帐户

> ID：14500064
> 
> 赞同：0
> 
> 时间：2013-01-24T11:17:55.937
> 
> 标签：android

我正在使用此代码： [是否有任何简单的阅读新 gmail 消息的好短代码示例？](https://stackoverflow.com/questions/3303805/are-there-any-good-short-code-examples-that-simply-read-a-new-gmail-message)

但我需要设置用户名和密码。如果您与 gmail 同步，则在 gmail android 应用程序中不需要用户名和密码。我该怎么做？

我正在搜索，但找不到任何可行的解决方案。我只发现了这个：[android get gmail username and password from account manager](https://stackoverflow.com/questions/7639752/android-get-gmail-username-and-password-from-account-manager)

# cakephp-1.3 - cakephp 验证和正则表达式

> ID：14500069
> 
> 赞同：4
> 
> 时间：2013-01-24T11:18:14.197
> 
> 标签：cakephp-1.3

我在 cakephp1.3 工作。我必须在模型中使用 cakephp 验证来验证我的表单。我添加了一个正则表达式来限制特殊字符的输入。

我的代码写在下面：

```
var $validate = array(
        'name' => array(
            'unique'=>array(
                 'rule'      => 'isUnique',
                    'message'   => 'Already taken',
            ),
            'pattern'=>array(
                 'rule'      => '/^[a-z]$/i',
                    'message'   => 'Only letters allowed',
            ),
            'empty'=>array(
                'rule' => 'notEmpty',
                'message' => 'This field cannot be left blank',
            ))
    ); 
```

规则“唯一”不起作用。在我在脚本中添加“模式”规则之前它工作正常。有什么问题？我尝试按上面提到的规则顺序排列，我认为可能存在一些定位问题，但没有发生任何事情。

请帮助我..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T16:05:37.573

将 $ 替换为 +：

```
var $validate = array(
    'name' => array(
        'notempty' => array(
            'rule' => array('notempty'),
            'message' => 'This field cannot be left blank',
        ),
        'unique'=>array(
            'rule' => 'isUnique',
            'message' => 'Already taken'
        ),
        'pattern'=>array(
             'rule'      => '[a-zA-Z]+',
             'message'   => 'Only letters allowed',
        ),
    ),
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-26T10:09:56.977

你需要精确你的 char 可以有多长。在 «]» 之后添加此数据：

*   * 为 0 或更多
*   + 1 个或更多
*   ? 为 0 或 1
*   {2,9} 表示限制之间的计数
*   {2,} 仅用于最低限度
*   {0,1024} 仅用于最大值

[http://www.php.net/manual/en/regexp.reference.meta.php](http://www.php.net/manual/en/regexp.reference.meta.php)

例子：

```
 'rule'      => '/^[a-z]+$/i',
   'rule'      => '/^[a-z]{3-255}$/i', 
```

# delphi - 如何在 Delphi 中获取动态数组的长度？

> ID：14500077
> 
> 赞同：5
> 
> 时间：2013-01-24T11:18:39.337
> 
> 标签：delphi

Delphi 中是否有确定动态数组长度的函数？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-24T11:20:00.933

使用[`Length`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Length)函数获取数组的长度：

```
var
  ArrayLength: Integer;
begin
  ArrayLength := Length(ArrayOfSomething);
  ...
end; 
```

从这个功能的参考（我强调）：

> 在 Delphi 代码中，**Length 返回**字符串中实际使用的字符数或**数组中的元素数**。

# ruby-on-rails - Rails 图像在直接访问 URL 时加载，但在重定向到时不加载

> ID：14500078
> 
> 赞同：0
> 
> 时间：2013-01-24T11:18:41.237
> 
> 标签：ruby-on-rails

直接访问其视图如下的页面时：

```
<img src='assets/logo.jpg',height="400", width="1600"></img>

<%= render 'form' %>

<div style="text-align:center;">

<%= link_to 'Register', new_user_path %>

</div> 
```

指向的资产加载，但是当这个视图被重定向到资产时不会加载。

我不知道rails在做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:25:00.897

你必须使用`image_tag`助手：

[http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-image_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-image_tag)

你的例子：

```
<img src='assets/logo.jpg',height="400", width="1600"></img> 
```

你必须使用：

```
<%= image_tag("logo.jpg"), :size => "1600x400" %> 
```

问候！

# ipad - UIScrollView 在屏幕宽度变宽后启用分页

> ID：14500087
> 
> 赞同：1
> 
> 时间：2013-01-24T11:19:13.987
> 
> 标签：ipad, uiscrollview, paging

这是以下`ipad`应用程序的屏幕截图： ![在此处输入图像描述](../Images/0054d0fb61acbde2b9fd7e32c4172f84.png)

此应用程序包含一个`UIScrollView`有几个页面。启动 3 个屏幕，`paging`已启用。然后出现了一个更宽的屏幕（应用程序中前后`Screen 4`有几个页面，宽度不同。）并且在那里被禁用。现在我想再次从. 如果也是，一切都很好，但如果它更宽，则启用显示和部分。`screen4``screen5``paging``paging``Screen 5``Screen 4``width 1024``paging``screen 4``screen 5`

是否可以从特定位置`x coordinate`开始分页？我已经有了所有坐标信息，对于`screen 4`'s`x coordinate`有没有办法从那里开始分页？

或者有没有办法不禁用分页但增加页面大小`Screen 4`？

# iphone - 触摸方法未在 appdelegate 中调用

> ID：14500088
> 
> 赞同：1
> 
> 时间：2013-01-24T11:19:15.650
> 
> 标签：iphone, ios, objective-c, xcode, appdelegate

我在导航栏上的 appdelegate 文件中显示 UILabel（不完全在导航栏上）。它显示完美。但是没有触摸事件正在调用它。触摸仅适用于状态栏。请帮忙。提前致谢。

这是我的代码。

```
CGRect frame=[[UIApplication sharedApplication] statusBarFrame];
backgroundImageView=[[UILabel alloc] initWithFrame:CGRectMake(0, frame.size.height, 320, 44)];        
backgroundImageView.tag=50;
[backgroundImageView setTextAlignment:UITextAlignmentCenter];
[backgroundImageView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"music.png"]]];
[self.window addSubview:backgroundImageView];

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{   
    NSLog(@"in touched");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:26:03.770

正如泰勒在[他的回答](https://stackoverflow.com/questions/1532778/how-to-respond-to-touch-events-in-uiwindow/3049792#3049792)中所说：

> UIWindow 中有一个方便的包罗万象的方法，称为 sendEvent:，它可以查看事件处理管道开始附近的每个事件。如果您想做任何非标准的附加事件处理，这是放置它的好地方。

要拦截所有触摸，您应该为控制器视图使用 UIView 子类并覆盖其中的 hitTest:withEvent: 方法：

```
 - (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
        touchedView = [super hitTest:point withEvent:event];
        NSSet* touches = [event allTouches];
        // handle touches if you need
        return touchedView;
        } 
```

**或者**

2）您可以使用：

```
UITapGestureRecognizer *tgr = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(anyMethod)];  
[imageView addGestureRecognizer:tgr];  
[tgr release];  

Before doing this, enable user interaction of UIimageView. 
```

# javascript - 未捕获的 ReferenceError：未定义 importScripts

> ID：14500091
> 
> 赞同：43
> 
> 时间：2013-01-24T11:19:22.480
> 
> 标签：javascript, google-chrome, web-worker

为什么我不断收到此错误？

我应该可以使用这个全局函数吧？

[http://www.html5rocks.com/en/tutorials/workers/basics/](http://www.html5rocks.com/en/tutorials/workers/basics/)

我正在使用铬。

我正在使用[https://code.google.com/p/bitjs/](https://code.google.com/p/bitjs/)它以

```
importScripts('io.js');
importScripts('archive.js'); 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2015-02-20T02:21:01.010

当您创建一个工作人员时，它实际上会执行两次。第一遍是在全局“窗口”对象的上下文中（意味着您可以访问所有窗口对象函数）。第二次调用是在具有不同全局对象的工作人员的上下文中，其中存在“importScripts”。

```
// proper initialization
if( 'function' === typeof importScripts) {
   importScripts('script2.js');
   addEventListener('message', onMessage);

   function onMessage(e) { 
     // do some work here 
   }    
} 
```

请注意 addEventListener 在 if 语句中。如果你把它放在外面，你的回调将被注册两次。一次在“窗口”全局上，一次在工作人员的全局上。

快乐编码！

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-24T15:25:58.083

此代码需要在工作脚本中。worker 本身是通过一个新`Worker`对象创建的 - 请参阅[教程中的](http://www.html5rocks.com/en/tutorials/workers/basics/#toc-gettingstarted)[*入门*](http://www.html5rocks.com/en/tutorials/workers/basics/#toc-gettingstarted)。

您链接的代码在[此处](http://code.google.com/p/bitjs/source/browse/archive.js#278)创建的工作人员中。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-01-24T14:51:12.650

我也遇到了这个错误。就我而言，这是因为我正在使用 Karma/Jasmine 测试代码。由于测试框架，worker.js 文件也由主线程加载。

我通过将 worker.js 文件包装为以下内容来避免此错误：

```
 if( 'undefined' === typeof window){
       importScripts('workerscript2.js');
    ...
    } 
```

请参阅下面 Rob 的评论，它提供了一种替代解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-09-14T08:01:50.777

感谢您提供避免错误的解决方案。我是新手，所以无法投票但写下来，我只是将我的线路替换`importScripts('Myworkerscript.js');`为

```
 if( 'undefined' === typeof window){
   importScripts('Myworkerscript.js');
} 
```

魔法发生了，错误消失了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-01T16:03:20.587

如果是您面临的 linting 问题，您可以在包含 importScripts 的文件中添加以下注释

```
/* eslint-disable no-undef */ 
```

# java - 为什么 (.*)* 进行两个匹配并且在 $1 组中没有选择任何内容？

> ID：14500095
> 
> 赞同：21
> 
> 时间：2013-01-24T11:19:35.433
> 
> 标签：java, .net, regex, perl, language-agnostic

这源于关于形式化正则表达式语法的讨论。我已经使用几个正则表达式解析器看到了这种行为，因此我将其标记为与语言无关。

采用以下表达式（根据您喜欢的语言进行调整）：

```
replace("input", "(.*)*", "$1") 
```

它将返回一个空字符串。为什么？

更奇怪的是，表达式`replace("input", "(.*)*", "A$1B")`将返回字符串`ABAB`。为什么是双空匹配？

**免责声明：**我知道回溯和贪婪匹配，但[Jeffrey Friedl](https://rads.stackoverflow.com/amzn/click/com/0596528124)制定的规则似乎要求`.*`匹配所有内容，并且不再进行回溯或匹配。那为什么是`$1`空的？

**注意：**与 比较`(.+)*`，它返回输入字符串。但是，[http://regexhero.com](http://regexhero.com)显示仍然有两个匹配项，出于与上述相同的原因，这似乎很奇怪。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-24T11:27:23.460

让我们看看发生了什么：

1.  `(.*)`匹配`"input"`。
2.  `"input"`被抓进群里`1`。
3.  正则表达式引擎现在位于字符串的末尾。但是由于`(.*)`是重复的，所以会进行另一次匹配尝试：
4.  `(.*)`匹配之后的空字符串`"input"`。
5.  空字符串被捕获到组`1`中，覆盖`"input"`。
6.  `$1`现在包含空字符串。

评论中的一个好问题：

> 那为什么`replace("input", "(input)*", "A$1B")`返回`"AinputBAB"`呢？

1.  `(input)*`匹配`"input"`。它被替换为`"AinputB"`。
2.  `(input)*`匹配空字符串。它被替换为`"AB"`（`$1`是空的，因为它没有参加比赛）。
3.  结果：`"AinputBAB"`

# postgresql - PostgreSQL 简单更新错误

> ID：14500100
> 
> 赞同：0
> 
> 时间：2013-01-24T11:19:54.697
> 
> 标签：postgresql

我有一个简单的 postgresql 表，定义如下：

```
CREATE TABLE t_s (
    a integer,
    b integer
); 
```

如果我做一个简单的更新语句`UPDATE t_s SET a=1 WHERE b=1`，我会得到一个错误：

```
Chyba SQL:

ERROR:  syntax error at or near "SET"
LINE 1: SELECT COUNT(*) AS total FROM (UPDATE t_s SET a=1 WHERE b=1)...
                                                  ^

Ve výrazu:
SELECT COUNT(*) AS total FROM (UPDATE t_s SET a=1 WHERE b=1) AS sub 
```

这个陈述有什么问题吗？我看不出这个错误的任何原因。我使用 PostgreSQL 9.1.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:32:56.980

为此，您需要一个[公用表表达式](http://www.postgresql.org/docs/9.1/interactive/queries-with.html#QUERIES-WITH-MODIFYING)：

```
WITH cte AS (
    UPDATE t_s SET a=1 WHERE b=1 RETURNING a
)
SELECT COUNT(*) AS total FROM cte; 
```

从 9.1 版开始提供数据修改语句

# c# - 哪种方法更好：Process.Start 或直接调用 DLL？

> ID：14500106
> 
> 赞同：7
> 
> 时间：2013-01-24T11:20:04.850
> 
> 标签：c#, dll, native, exe, process.start

在我们的团队中，我们面临着选择：我们需要调用外部第三方代码并从我们的 C# 代码处理其输出。

第三方代码有两种形式：`dll`s 集和单个`exe`文件（可能`dll`自己调用​​这些 s）。可能的方法可能是：使用`Process.Start`语句运行可执行文件并捕获其输出。还有一种是`dll`直接调用。

我试图了解我们应该使用哪种方法。

一方面调用可执行文件很简单，但另一方面——它感觉并不健壮。

一方面调用看起来更正确的方式来完成这项工作，但另一方面 -为我们在本机代码中拥有的所有函数`dll`提供绑定可能是非常复杂的任务。`C#``C`

但我需要对这个话题进行更深入的分析才能做出最终决定。以前有没有人遇到过同样的问题，也许你可以分享你的发现。

这将非常有用！

**编辑**：在这种特殊情况下，我正在谈论视频转换。我需要从用户那里获取视频流并将其转换为一种视频格式。可以打电话`ffmpeg`来做这项工作，一切都很好，直到出现问题，我需要重新启动编码或采取任何措施。我无法估计需要多长时间，如果我需要并行转换多个视频，`ffmpeg`不会像我计划的那样灵活......

至少在我现在看来。当我深入研究时，也许会出现更多问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T11:37:21.153

有几个考虑：

1.  你有dll的来源吗？
2.  你打算调用这些 dll 多少？
3.  dll的API有多复杂，你的用法是什么？

取决于答案。

在以下情况下创建绑定：

*   你会经常调用 dll。直接调用要快得多。
*   你有来源并检查它们有多好。否则，您可能会遇到内存泄漏、调用约定等方面的巨大问题。
*   dll 的 API 并不太复杂，因此您不需要向它们发送 C++ 对象等。或者实现很多已经在 exe 中完成的工作。

使用可执行文件：

*   如果您只需要偶尔运行它们。创建另一个流程的开销对您来说并不重要。
*   如果您不确定代码的质量。对于您的代码来说，它会更加安全和健壮，而不是加载一些实施不良的 dll。如果出现问题，您始终可以尝试多次运行 .exe。但它是一个 dll 使您的应用程序崩溃，您无能为力。
*   如果 API 很复杂，而且 exe 有很多功能，那你就必须重新实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:28:15.913

我想说这将取决于您的代码在库的 api 支持方面期望的粒度。

如果可执行文件对您来说足够好地封装了工作流，那么您可以从调用可执行文件的简单性中受益。

此外，由于您提到这是本机 C 代码，添加 DLL 引用将意味着必须处理非托管代码，除非我没有选择，否则我个人不会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:29:32.360

如果 dll 编写得很好并且没有内存泄漏，那么最好使用 dll，因为它不需要新的进程创建开销。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T11:30:43.863

我想说这完全取决于您的要求、时间范围、`exe`文件输出的稳定性以及解析的难易程度。两种方式都是可行的。

例如，Mercurial 将其控制台输出视为与其交互的主要方式——即使人们可以直接使用其 Python 代码。

另一方面，从 C# 调用 C 函数相当容易，因此这也可能是一种选择。但是，如果您需要映射数百个 C 函数，则必须问问自己是否有时间这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T11:31:17.120

EXE 只调用一个主入口，所以不能直接调用函数。当您调用 exe 时，将创建一个新进程，在该进程的主线程的上下文中调用入口线程。

DLL 通过直接调用函数为您提供更大的灵活性 每个函数系统都有一个入口点 将 DLL 加载到现有线程的上下文中

因此调用 DLL 对计算资源来说要好得多，并提供更多的灵活性。考虑到您可以从托管和非托管代码调用 DLL，并且可以从 C# 调用托管和非托管 dll

如果 DLL 有来接口，你可以直接添加引用，如果没有，你仍然可以像下面这样调用它

```
 [DllImport(@"TestLib.dll")]
    public static extern void InitParam([MarshalAs(UnmanagedType.LPWStr)] string inputFile,
        [MarshalAs(UnmanagedType.LPWStr)] string outputFile,
        [MarshalAs(UnmanagedType.LPWStr)] string templateFile,
        [MarshalAs(UnmanagedType.LPWStr)] string userName,
        [MarshalAs(UnmanagedType.LPWStr)] string manifestFilePath,
        [MarshalAs(UnmanagedType.LPWStr)] string usersRightList); 
```

简单来说，您导入 DLL 并使用编组将参数映射到 .net 类型

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T11:33:22.363

答案取决于外部应用程序使用它的 dll 的方式。：

*   调用 exe，如果它多次调用多个 dll 函数并且它的业务流程又大又复杂 - 你不想在 C# 代码中重新实现所有 exe 逻辑。
*   直接调用dll，如果exe只调用dll中的一二函数，调用顺序和参数是众所周知的，或者根本不存在。

一般来说，我更喜欢直接调用 dll，因为这消除了很多开销以及产生新进程和处理其输出的可能问题。并且不要害怕本地代码，如果您的 dll 函数很简单，那么使用 PInvoke 您将能够轻松调用这些函数。

# php - CodeIgniter ActiveRecord 一次一行

> ID：14500110
> 
> 赞同：0
> 
> 时间：2013-01-24T11:20:15.543
> 
> 标签：php, mysql, codeigniter, activerecord

我正在运行一个选择多行的查询。当我遍历结果时，我想一次获取一行（因为一次获取​​它们的内存太多）。

问题是，CodeIgniter 的所有变体的活动记录 $query->row 会将数据库中的所有记录提取到内存中（并返回单行）。我查看了 DB_result.php 的来源，发现：

```
public function row_object($n = 0)
{
    $result = $this->result_object();
    if (count($result) == 0)
    {
        return $result;
    }

    if ($n != $this->current_row AND isset($result[$n]))
    {
        $this->current_row = $n;
    }

    return $result[$this->current_row];
} 
```

在 result_object() 内部：

```
...
while ($row = $this->_fetch_assoc())
{
    $this->result_array[] = $row;
} 
```

这会将数据库中的所有记录提取到内存中。

是否有一种解决方法可以让我在不将整个结果集加载到内存的情况下获取单行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:36:59.577

**解决方案**

```
$query = $this->db->get();
while($r = $query->_fetch_object()){
    ...
} 
```

可能是他们将其公开的原因...

# microcontroller - 关于 PICAXE 28X1 中的输入

> ID：14500114
> 
> 赞同：1
> 
> 时间：2013-01-24T11:20:33.513
> 
> 标签：microcontroller, picaxe

我必须使用 PICAXE 28X1 在 BASIC 中检查这些输入：

![在此处输入图像描述](../Images/963b0d5a5191283849cbb0d87fcf138f.png)

但我不知道我应该怎么做。

A.0 或 pinA.0 不起作用，input0 指的是 pin 11。

那么如何检查引脚 2 - 5 ..？

任何帮助表示赞赏~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:42:29.693

语法是：

```
porta pin0
porta pin1
porta pin2
   ··· 
```

希望这可以帮助某人:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T19:23:10.153

如果您还没有弄清楚，答案很简单。这是一个示例代码，它将检测您指定的输入引脚是否为高电平，然后执行某些操作。如果这仍然不起作用，请告诉我。希望能帮助到你！

```
main:
    low A.0
    low A.1
    low A.2
    low A.3
    if A.0 = high then do
    if A.1 = high then do
    if A.2 = high then do
    if A.3 = high then do
    goto main
do:
    high B.6
    wait 5
    low B.5
    goto main 
```

# android - 显示警报对话框是文本字段为空

> ID：14500119
> 
> 赞同：0
> 
> 时间：2013-01-24T11:20:52.293
> 
> 标签：android

如果用户在三个不同的文本字段中输入姓名、身高和体重，我正在尝试制作一个简单的 android 应用程序。一旦按下按钮，输入应显示在底部的文本视图中，高度从米英寸转换，重量从公斤转换为磅。问题是如果按下按钮并且应用程序粉碎的字段中没有文本！！！我如何通过显示一个警告对话框告诉用户在按下按钮之前输入文本来解决这个问题。我是 android 新手，因此我们将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:25:53.463

可以使用这个方法来查找用户是否在Edittext上输入了文字

在按钮的Onclick中，放入如下代码

```
if(name.getText().toString().equals("")) //name is the name of the Edittext in code
            {
                Toast.makeText(getBaseContext(), "You didn't enter the Name",    Toast.LENGTH_SHORT).show();

            }
else if(height.getText().toString().equals("")) //height is the name of the Edittext in code
            {
                Toast.makeText(getBaseContext(), "You didn't enter the Height",    Toast.LENGTH_SHORT).show();

            }
else if(weight.getText().toString().equals("")) //weight is the name of the Edittext in code
            {
                Toast.makeText(getBaseContext(), "You didn't enter the Weight",    Toast.LENGTH_SHORT).show();

            }
else
{
   // put your your code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:31:53.587

```
 String UserName = username_edittext.getText().toString().trim();
    String UserPassword = password_edittext.getText().toString().trim();

    if (!(UserName.equals("") && UserPassword.equals(""))) {        
        Log.i(TAG, "enter uname and pass are empty");
    AlertDialog alertDialog = new AlertDialog.Builder(context).create();

            // Setting Dialog Title
            alertDialog.setTitle("Alert");

            // Setting Dialog Message
            alertDialog.setMessage("Enter Value");

            if(status != null)
                // Setting alert dialog icon
                alertDialog.setIcon((status) ? R.drawable.success : R.drawable.fail);

            // Setting OK Button
            alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                           alertDialog.dissmiss();
                }
            });

            // Showing Alert Message
            alertDialog.show();

    } else {
        Log.i(TAG, "Continue");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:24:20.270

```
String UserName = username_edittext.getText().toString().trim();
String UserPassword = password_edittext.getText().toString().trim();

if (!(UserName.equals("") && UserPassword.equals(""))) {        
    Log.i(TAG, "enter uname and pass are empty");
    CreateAlertDialog();     
} else {
    Log.i(TAG, "Continue");
} 
```

# java - 如何强制端口不可用以进行测试？

> ID：14500125
> 
> 赞同：0
> 
> 时间：2013-01-24T11:21:09.210
> 
> 标签：java, junit4

我有一个测试给定端口是否可用的函数：

```
public static boolean isPortAvailable(int port) throws IOException {
        boolean isAvailable = false;
        ServerSocket serverSocket = null;
        if (isValidPort(port)) {

            try {
                serverSocket = new ServerSocket(port);
                isAvailable = true;
            } catch (IOException ignore) {
                isAvailable = false;
            } finally {
                if (serverSocket != null) {
                    serverSocket.close();

                }
                serverSocket = null;
            }

        }
        return isAvailable;
    } 
```

我需要使用 junit 测试此方法的错误条件：

```
@Test
    public void testPortUnAvailable() throws IOException{
        int port = 49613 ;
        Assert.assertFalse(PortUtil.isPortAvailable(port));
    } 
```

我应该如何强制端口号 49613 或任何其他端口不可用于测试？任何其他关于更好方法的建议都是最受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:28:03.323

创建一个绑定到任意空闲端口的 ServerSocket。如果端口当前被另一个应用程序使用，那么使用像 49613 这样的硬编码端口会使您的测试失败，而您通常对此没有太多控制权。使用动态分配的端口测试您的方法，然后关闭套接字：

```
ServerSocket ss = new ServerSocket(0);
try {
    Assert.assertFalse(PortUtil.isPortAvailable(ss.getLocalPort()));
}
finally {
    ss.close();
} 
```

如果您的 isPortAvailable 方法检查 java.net.BindException 而不是任何 IOException 也可能会更好，因为其他 IOExceptions 可能意味着其他错误并且不一定端口已在使用中。

# android - 选项卡和片段不支持意图

> ID：14500130
> 
> 赞同：0
> 
> 时间：2013-01-24T11:21:11.497
> 
> 标签：android, tabs, android-actionbar, fragment

嗨，我对 tab+fragment 有疑问，这里首先我有将创建选项卡的类：

```
public class TestSwipeABActivity extends FragmentActivity {

FragmentTransaction transaction;
static ViewPager mViewPager;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Fragment tabOneFragment = new TabOne();
    Fragment tabTwoFragment = new TabTwo();

    PagerAdapter mPagerAdapter = new PagerAdapter(getSupportFragmentManager());
    mPagerAdapter.addFragment(tabOneFragment);
    mPagerAdapter.addFragment(tabTwoFragment);

    //transaction = getSupportFragmentManager().beginTransaction();

    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mPagerAdapter);
    mViewPager.setOffscreenPageLimit(2);
    mViewPager.setCurrentItem(0);

    mViewPager.setOnPageChangeListener(
            new ViewPager.SimpleOnPageChangeListener() {
                @Override
                public void onPageSelected(int position) {
                    // When swiping between pages, select the
                    // corresponding tab.
                    getActionBar().setSelectedNavigationItem(position);
                }
            });

    ActionBar ab = getActionBar();
    ab.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    Tab tab1 = ab.newTab().setText("Tab One").setTabListener(new TabListener<TabOne>(
                    this, "tabone", TabOne.class));

    Tab tab2 = ab.newTab().setText("Tab Two").setTabListener(new TabListener<TabTwo>(
                    this, "tabtwo", TabTwo.class));

    ab.addTab(tab1);
    ab.addTab(tab2);
}

public static class TabListener<T extends Fragment> implements ActionBar.TabListener {
    private Fragment mFragment;
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    /** Constructor used each time a new tab is created.
      * @param activity  The host Activity, used to instantiate the fragment
      * @param tag  The identifier tag for the fragment
      * @param clz  The fragment's Class, used to instantiate the fragment
      */
    public TabListener(Activity activity, String tag, Class<T> clz) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
    }

    /* The following are each of the ActionBar.TabListener callbacks */

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // Check if the fragment is already initialized
        if (mFragment == null) {
            // If not, instantiate and add it to the activity
            mFragment = Fragment.instantiate(mActivity, mClass.getName());
            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            // If it exists, simply attach it in order to show it
            ft.attach(mFragment);
        }
    }
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            // Detach the fragment, because another one is being attached
            ft.detach(mFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // User selected the already selected tab. Usually do nothing.
    }

    public void onTabReselected(Tab arg0,
            android.app.FragmentTransaction arg1)
    {
        // TODO Auto-generated method stub

    }

    public void onTabSelected(Tab arg0, android.app.FragmentTransaction arg1)
    {
        // TODO Auto-generated method stub
        mViewPager.setCurrentItem(arg0.getPosition());
    }

    public void onTabUnselected(Tab arg0,
            android.app.FragmentTransaction arg1)
    {
        // TODO Auto-generated method stub

    }
}

public class PagerAdapter extends FragmentPagerAdapter {

    private final ArrayList<Fragment> mFragments = new ArrayList<Fragment>();

    public PagerAdapter(FragmentManager manager) {
        super(manager);
    }

    public void addFragment(Fragment fragment) {
        mFragments.add(fragment);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mFragments.size();
    }

    @Override
    public Fragment getItem(int position) {
        return mFragments.get(position);
    }
}

} 
```

然后这里是每个选项卡的片段，例如两个：

```
public class TabTwo extends Fragment
{

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState)
    {
        View view = inflater.inflate(R.layout.tabtwo, container, false);

        Button  Activity1= (Button) view.findViewById(R.id.button1);

        Activity1.setOnClickListener(new View.OnClickListener() {
              public void onClick(View view) {

                    Intent intent = new Intent().setClass(this,ABActivity.class);
                    startActivity(intent);
              }
        }); 

        return view;
    }
} 
```

错误是：`The method setClass(Context, Class<?>) in the type Intent is not applicable for the arguments (new View.OnClickListener(){}, Class<ABActivity>)`

我尝试将上下文更改为 TabTwo.this，tabtwo.getcontext.this，但没有，eclipse 说要更改 .setclassName 但不起作用。

如果你能帮忙...谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:54:39.330

嗨，我只有一个解决方案：

```
 public void onClick(View view) {
              Activity activity = getActivity();

                Intent intent = new Intent().setClass(activity, ABActivity.class);
                startActivity(intent);
          } 
```

解释：“另一个区别是 Fragment 不是 Context 的子类。这意味着 Fragment 不能作为组件在您的应用程序中启动，因此必须始终存在于 Activity 中。这也意味着每当您需要Fragment 内部的上下文，您需要访问父 Activity。您可以使用 getActivity() 方法，就像我们在 Fragment 按钮的 OnClickListener 回调中所做的那样。您需要注意，因为 getActivity() 可以返回 null取决于 Fragment 在 Activity 生命周期中的位置。因此，您还应该在使用之前检查 Activity 是否为空。

来自：http : [//neilgoodman.net/2012/01/29/working-with-fragments-on-android-part-1/](http://neilgoodman.net/2012/01/29/working-with-fragments-on-android-part-1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:58:00.517

试试这个

`Intent intent = new Intent(getActivity(),ABActivity.class);`

`startActivity(intent );`

# sql - Sql 2005 替代 Access 查询

> ID：14500134
> 
> 赞同：3
> 
> 时间：2013-01-24T11:21:21.887
> 
> 标签：sql, sql-server, ms-access

嗨，我陷入了我为 Access 编写的以下查询并正常工作。但是当我通过 SQL 2005 运行它时，它给了我错误（**关键字 'IS' 附近的语法不正确**）。

我遇到过类似的问题，但我的问题没有解决方案。

这是访问查询。

```
select iif(ISBN IS Null,"1","0") as OK from products 
```

请需要 SQL 2005 版本。

这可能是一个基本查询，但我是 sql 新手。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T11:22:58.643

改为使用`CASE`。

```
SELECT CASE 
            WHEN ISBN IS Null
            THEN 1
            ELSE 0
       END AS OK 
FROM   products 
```

但[`IIF`如果您使用的是 SQL Server 2012 应该可以工作](http://msdn.microsoft.com/en-us/library/hh213574.aspx)。

**更新**

```
SELECT CASE 
            WHEN expression1
            THEN 0
            ELSE 
                CASE 
                    WHEN expression2
                    THEN 2
                    ELSE 3
                END
       END AS OK 
FROM   products 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:23:40.097

您将需要一个[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)表达式来替换`IIf()`. SQL Server 2005 没有以下`IIF()`功能：

```
select case when ISBN is null then 1 else 0 end as OK
from products 
```

如果您有其他`IIF()`语句，则可以嵌套它们：

```
select 
  case 
     when ISBN is null 
     then 1 
     else 
       case when yourCol = "Value"
            then 2
            else 3
       end 
  end as OK
from products 
```

# javascript - ASP.NET 从 JS AJAX 调用非静态 Web 方法

> ID：14500136
> 
> 赞同：8
> 
> 时间：2013-01-24T11:21:25.147
> 
> 标签：javascript, asp.net

> **可能重复：**
> [从客户端调用服务器端（aspx.cs）中的非静态方法使用javascript（aspx）](https://stackoverflow.com/questions/1360253/call-non-static-method-in-server-sideaspx-cs-from-client-side-use-javascript)

我有以下代码可以正常工作

```
function getFooObj() {
    $.ajax({
        type: "POST",
        url: "Dummy.aspx/GetFooObj",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (result) {
           alert('good');
        }
    });
}

[WebMethod]
public static FooObj GetFooObj ()
{
    // some code that returns FooObj 
} 
```

我的问题是，如果我希望我的 WebMethod 不是静态的，我该如何从 JS 调用它？

```
[WebMethod]
public FooObj GetFooObj ()
{
    // some code that returns FooObj 
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T12:19:02.213

不可能 - PageMethods 必须是静态的。

原因很简单——实例（非静态）方法意味着它可以访问页面状态，包括控件。但是，ASP.NET 页面/控件模型需要状态信息（视图状态、事件验证等）来确保控件的一致状态。但是在页面方法的情况下，这是不可能的，因为没有回发完整的表单（这本质上是 PageMethods/ScriptServices 背后的想法 - 您仅在客户端/服务器之间发送/接收最少的信息）。

对于使用实例方法（假设您需要控制访问），您应该使用 UpdatePanel 方式进行 AJAX。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T12:39:39.777

它只支持静态方法的原因是页面实例化没有完成，如果你想使用非静态 web 方法然后去 web service(.asmx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T12:31:38.097

为什么不实现一个简单的 Web 服务？[你可以从这里](http://www.codeproject.com/Articles/863/Your-first-C-Web-Service)找到一个很好的例子

# list - Magento - 在多个块上使用相同的模板导致错误

> ID：14500137
> 
> 赞同：0
> 
> 时间：2013-01-24T11:21:26.037
> 
> 标签：list, magento, tabs, categories, product

我有 3 个 jQuery 选项卡，并希望用不同类别的产品填充每个选项卡。选项卡显示在类别页面上。在类别页面“自定义布局更新”我有这个：

```
<block type="catalog/product_list" category_id="38" limit="6" name="tabs_new" template="catalog/product/tab_list.phtml" />
<block type="catalog/product_list" category_id="39" limit="6" name="tabs_topsellers" template="catalog/product/tab_list.phtml" />
<block type="catalog/product_list" category_id="40" limit="6" name="tabs_sale" template="catalog/product/tab_list.phtml" /> 
```

tab_list.phtml 只是 list.phtml 的一个副本，其中的工具栏被剥离并且一些标记发生了变化。

在我的类别 view.phtml 文件中，我有以下内容：

```
<div id="tabs-1">
    <?php echo $this->getChildHtml('tabs_topsellers') ?>
</div>
<div id="tabs-2">
    <?php echo $this->getChildHtml('tabs_new') ?>
</div>
<div id="tabs-3">
    <?php echo $this->getChildHtml('tabs_sale') ?>
</div> 
```

但是当我转到页面时，我收到了这个错误：

```
Mage registry key "isList" already exists 
```

任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:25:29.133

为了快速修复，您可以`Mage::unregister('isList');`在回显每个块之前使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:48:05.813

2个解决方案：

*   在注册一个值之前，检查它是否已经存在：

    if (!Mage::registry('isList')) { Mage::register('isList'); }

*   使用函数的第三个参数“ `$graceful`”`Mage::register()`来忽略现有变量的注册（它不会抛出异常并且什么都不做）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-19T21:45:19.177

太棒了，我对 Ultimo 主题也有类似的问题。

```
exception 'Mage_Core_Exception' with message 'Mage registry key "isList" already exists' in /home/devlovethe/public_html/app/Mage.php:595 
```

我试图将 product_list_featured 用于多个类别。

```
{{block type="ultimo/product_list_featured" template="catalog/product/list_featured_slider.phtml" category_id="97" product_count="12" breakpoints="[0, 1], [320, 2], [480, 3], [768, 4], [960, 5], [1280, 6]" pagination="1" centered="1" hide_button="1" block_name="Our Featured Products"}} 
```

在 list_featured_slider.phtml 的末尾我添加了

```
<?php Mage::unregister('isList'); ?> 
```

# templates - 更改 Joomla 模板参数

> ID：14500139
> 
> 赞同：0
> 
> 时间：2013-01-24T11:21:33.703
> 
> 标签：templates, joomla, parameters

我使用 Joomla 2.5 使用嵌入了幻灯片（不是模块）的模板开发电子商务。

我想创建一篇文章，客户自己可以轻松地为幻灯片上传图片及其描述和网址。

我设法在一篇文章中加载了一个文件上传器模块并且它可以工作。但我不知道如何更改描述和网址。

descriptions 和 urls 是模板参数，我不知道如何从文章中设置它们。

模板文件夹中的`params.ini`文件是空白的。.xml 为他们显示 's 但不显示他们的当前值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:16:59.473

您正在使用两个功能，但是您缺少将图像链接到页面并为其分配名称的整个逻辑，可能会管理一些安全性。

为什么要从头开始构建它？使用现成的、免费的、经过测试且受支持的 CCK（例如 contentbuilder、k2、sobi、zoo 等等）会让您的生活变得更好。

# c# - 删除 C# TextBlock 内联元素填充

> ID：14500146
> 
> 赞同：1
> 
> 时间：2013-01-24T11:21:54.600
> 
> 标签：c#, wpf, padding, textblock

关于`TextBlock`C# 中的 UIElement，我们可以在其中添加几个`Run`对象，这些对象将附加到`inlines`属性中。这是我们在一个中显示几段具有不同格式（字体、大小等）的文本的一种方式`TextBlock`。

我的问题是：当我将两个`Run`对象合二为一时，每个对象`TextBlock`之间都存在一个填充。`Run`例如，我添加了“12”和“34”`Run`对象，最后它们会在视图中显示为“12 34”。但我需要的是它们应该作为一个单词连接在一起 - “1234” - 没有那个填充

我们可以使用任何设置来防止这种填充吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T11:28:29.350

代替

```
<TextBlock>
    <Run Text="12"/>
    <Run Text="34"/>
</TextBlock> 
```

像这样将运行写在一行中

```
<TextBlock>
    <Run Text="12"/><Run Text="34"/>
</TextBlock> 
```

空间将消失。

# c# - 使用 File.Copy() 将文件复制到网络共享文件夹时出现不确定性错误

> ID：14500149
> 
> 赞同：1
> 
> 时间：2013-01-24T11:22:03.437
> 
> 标签：c#, copy

我正在使用*C#* **File.Copy()**函数将多个备份文件从本地文件夹复制到网络共享文件夹，其中包括大于 1 TB 的小到大文件。以前这工作得很好。但是最近我在不同的时间面临不同类型的异常。我还尝试使用**NET USE**命令创建共享路径连接，即使凭据相同来解决此问题。

```
File.Copy(sourceFilePath, destinationFilePath, overwrite); 
```

我得到的例外是：
-**错误：**找不到文件。
-**错误：**句柄无效。
-**错误：**当前没有可用于处理登录请求的登录服务器。
-**错误：**指定的网络名称不再可用。

注意：这些例外不适用于无效的文件路径。因为在复制文件的某些部分后会发生异常，并且之前为相同的文件工作过相同的代码。

有人有解决这种情况的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:05:52.950

复制非常大的文件时，Windows 存在已知问题。例如，请参阅[重新访问 Windows 文件复制错误](http://blog.mischel.com/2011/06/07/windows-file-copy-bug-revisited/)。问题似乎是 Windows 想要缓存文件，并且为此付出了巨大的努力。它最终将几乎所有内存分配给缓存，最终导致致命的颠簸。这将在另一个系统（试图复制文件）上导致一个不确定的错误。

解决这个问题的方法是通过调用复制文件而不缓冲`CopyFileEx`。不幸的是，.NET Framework 没有直接的方法可以做到这一点。所以我编写并发布了一些代码。请参阅[更好的 File.Copy 替换](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=854)。

# css - Chrome 和 Firefox 以不同的方式呈现具有负边距的定位布局 - 如何防止？

> ID：14500150
> 
> 赞同：1
> 
> 时间：2013-01-24T11:22:17.243
> 
> 标签：css, layout, css-float, clearfix

我有一个非常具体的布局可以用 HTML/CSS 来实现。基本上我有一个文本容器，里面有几个左浮动框。然后我有一个页脚，需要在底部与这个文本容器重叠几个像素。我通过在页脚上使用负上边距并`position:relative`在文本容器和页脚上设置和 z-index 以使页脚层堆叠在文本容器上方来实现这一点。

它可以在小提琴中得到最好的证明：http: [//jsfiddle.net/sW9cu/2/](http://jsfiddle.net/sW9cu/2/)。

问题在于，在 IE9 和 Firefox 18 中，页脚的内容会清除文本框的内容，而在 Chrome 中，页脚的内容会覆盖文本框的内容而没有任何清除。

我基本上需要这在 IE7+、Firefox 和 Chrome 中保持一致，无论哪种方式。不关心哪种方式 - 它可以清除或重叠，但无论浏览器如何，它都需要表现相同。

谁能看到它为什么这样做以及如何纠正它？这可能与我在文本容器上使用的微清除修复有关，但我真的不确定。

感谢任何人的指点 - 这个让我难过！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:14:21.933

排序。我无法克服当前标记的问题，但通过删除负顶部位置并在页脚内添加一个绝对定位的 div 具有负顶部值 ( `top: -20px;`) 已实现我正在寻找的内容。见：http: [//jsfiddle.net/sW9cu/4/](http://jsfiddle.net/sW9cu/4/)。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-01-24T11:33:31.790

据我所知，答案是 CSS 中的 WebKit

Internet Explorer、Firefox 和 WebKit 是三个不同的东西。Safari 和 Chrome 使用 Webkit。moz 用于 Mozilla o 用于 Opera “正常”用于 Internet Explorer。

[你可以在这里](http://webdesign.about.com/od/css/a/css-vendor-prefixes.htm)阅读更多

# c - 使用 C 语言解析字符串时出现意外结果

> ID：14500154
> 
> 赞同：0
> 
> 时间：2013-01-24T11:22:31.777
> 
> 标签：c, linux, parsing, unix

我有以下（简化的）简单应用程序，它是用 line 构建的：

```
gcc -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -D_GNU_SOURCE      -D_XOPEN_SOURCE -std=c99 -ggdb -O0 main-test.c -L/usr/lib -lm -lglib-2.0 -o main-test 
```

应用程序本身：

```
#include <stdio.h>
#include <ctype.h>
#include <alloca.h>
#include <glib.h>
#include <glib/gprintf.h>
#include "main.h"

const char *filter(char *original, pt_search_key key) {
    const char *mname = "ModelName";
    const char *pname = "Product";
    const char *delim = " \t";
    const char *delim_str = "\"";
    const char *end = "\n";
    char *value = NULL;
    char *token;
    char *copied = malloc(sizeof(original)+1);
    strcpy(copied, original);

    // Just delete initial tabs and whitespaces
    while(isblank(*copied)) {
        copied++;
        continue;
    }

    token = strsep(&copied, delim);
    if (!strcmp(token, mname))
    {
        token = strsep(&copied, delim_str);
        if(!strcmp(token, "")) {
            token = strsep(&copied, delim_str);

            printf("[before] Token: %s\n", token);
            printf("[before] Value: %s\n", value);
            //*********** Strange behaviour is here!!! *****//
            value = malloc(strlen(token)+1);
            printf("[after] Token: %s\n", token);
            printf("[after] Value: %s\n", value);

            strcpy(value, token);
            token = strsep(&copied, end);
            while(*token != '\0') {
                if(isblank(*token)) {
                    token++;
                    continue;
                } else {
                    printf("String contains unexpected symbols:\n");
                    printf("%s\n", original);
                    exit(EXIT_FAILURE);
                }
           }
        } else {
              printf("String which contains %s is not correct", original);
              exit(EXIT_FAILURE);
        }
    }
return value;
}

int main(int argc, char **argv)
{
    filter("  ModelName \"Business Inkjet 1000\"\n", PT_MODELNAME);
    return EXIT_SUCCESS;
} 
```

此应用程序给出以下结果：

```
./main-test 
[before] Token: Business Inkjet 1000
[before] Value: (null)
[after] Token: Business In!
[after] Value: 0 
```

我完全误解了为什么`token`已经改变了。对我来说，输出`token`应该是：`"Business Inkjet 1000"`. **错误在哪里？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:27:29.223

我认为这只是一个错字，但`sizeof(original)`在这种情况下只是指针的大小。

```
 char *copied = malloc(sizeof(original)+1);   ?? 
```

你需要：

```
 char *copied = malloc(strlen(original)+1); 
```

# android - 在android中检测位置欺骗？

> ID：14500155
> 
> 赞同：16
> 
> 时间：2013-01-24T11:22:34.857
> 
> 标签：android, gps

是否有可靠的方法来检测 GPS 给出的位置是否被欺骗（如果某些模拟位置已在后台设置为设备？

市场上有一些应用程序可以向 GPS 提供虚假位置。

[https://play.google.com/store/apps/details?id=com.lexa.fakegps&hl=en](https://play.google.com/store/apps/details?id=com.lexa.fakegps&hl=en)

有根用户可以在不设置“允许模拟位置”选项的情况下运行假 GPS。

有没有办法检测欺骗位置？

我在这里发布了解决方案，因为它被少数不知道这个的人关闭。 [禁用/检查模拟位置（防止 gps 欺骗）](https://stackoverflow.com/questions/6880232/disable-check-for-mock-location-prevent-gps-spoofing/16776891#16776891)

# android - Phonegap 中的聊天信使应用程序。服务和 9 补丁图像

> ID：14500158
> 
> 赞同：-1
> 
> 时间：2013-01-24T11:22:47.890
> 
> 标签：android

我想使用 phonegap 开发一个 android 应用程序（聊天信使），谁能告诉我如何在 html 代码中使用 9-patch 图像以及我可以使用哪些 php 网络服务。

提前谢谢..:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:21:46.453

功能getproducts（）{

```
 var bookIdlist = window.localStorage.getItem("BoolId");
    function ajaxRequest() {

        var activexmodes = [ "Msxml2.XMLHTTP", "Microsoft.XMLHTTP" ] //activeX versions to check for in IE
        if (window.ActiveXObject) { //Test for support for ActiveXObject in IE first (as XMLHttpRequest in IE7 is broken)
            for ( var i = 0; i < activexmodes.length; i++) {
                try {
                    return new ActiveXObject(activexmodes[i])
                } catch (e) {
                    //suppress error
                }
            }
        } else if (window.XMLHttpRequest) // if Mozilla, Safari etc
            return new XMLHttpRequest()
        else
            return false
    }

    var mypostrequest = new ajaxRequest();
    mypostrequest.onreadystatechange = function() {
        if (mypostrequest.readyState == 4) {
            if (mypostrequest.status == 200
                    || window.location.href.indexOf("http") == -1) {
                console.log("Responce::" + mypostrequest.responseText);
                var result = mypostrequest.responseText;
                var obj = $.parseJSON(result);
                document.getElementById("packlistdata").style.display = "block";
                var str = ""
                for (i = 0; i < obj.products.length; i++) {
                    str += "<div data-role='fieldcontain'></div><h3 style='color: #085bab'><span id='pack"+i+"'>"
                            + obj.products[i].name
                            + "</span> = <span id='costs"+i+"'>"
                            + obj.products[i].cost
                            + "</span></h3><h4  style='font-family: Arial, Helvetica, sans-serif; font-size: 13px; color: #535455; text-align: left; padding: 0'>"
                            + obj.products[i].description
                            + "</h4><h4 style='font-family: Arial, Helvetica, sans-serif; font-size: 13px; color: #535455; text-align: left; padding: 0'>"
                            + obj.products[i].ISBN
                            + "</h4><img style='width:55%;height:40%' src='"
                            + obj.products[i].image
                            + "' alt='image' /><div class='clear'></div><input id='"
                            + i
                            + "' onclick='sendId(this.id)' type='submit' data-inline='true' data-theme='b' data-icon='plus' data-iconpos='right' value='Add To Cart' /><br/><div style='margin:5%'><hr/></div>";

                }
                document.getElementById("packlistdata").innerHTML = str;
            } else {
                console.log("An error has occured making the request");
            }
        }
    }

    var parameters = "sub=showproducts&ptype=books" + "&pid=" + bookIdlist;
    mypostrequest
            .open(
                    "POST",
                    "http://,
                    false)

    mypostrequest.setRequestHeader("Content-type",
            "application/x-www-form-urlencoded")
    mypostrequest.send(parameters);

} 
```

# html - 如何在文本上应用 CSS 渐变，从透明到不透明颜色

> ID：14500159
> 
> 赞同：41
> 
> 时间：2013-01-24T11:22:50.503
> 
> 标签：html, css

干杯!

我是 CSS/HTML 的新手，但我想在文本上应用渐变，如下图所示。如何用 css 实现它？

* * *

  ![在此处输入图像描述](../Images/08068fde82751e48f53af1e9ac38c7b0.png)

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-01-24T11:37:40.020

相关的 CSS 在我使用`:after`的`<article>`包装器的伪元素上

```
article {
  position: relative;
}

article:after {
  position: absolute;
  bottom: 0;  
  height: 100%;
  width: 100%;
  content: "";
  background: linear-gradient(to top,
     rgba(255,255,255, 1) 20%, 
     rgba(255,255,255, 0) 80%
  );
  pointer-events: none; /* so the text is still selectable */
}
```

```
 <article>
      <p>
         Had you stepped on board the Pequod at a certain juncture 
         of this post-mortemizing of the whale; and had you strolled
         forward nigh the windlass, pretty sure am I that you would
         have scanned with no small curiosity a very strange, enigmatical 
         object, which you would have seen there, lying along lengthwise 
         in the lee scuppers. Had you stepped on board the Pequod at a certain 
         juncture of this post-mortemizing of the whale; and had you strolled
         forward nigh the windlass, pretty sure am I that you would
         have scanned with no small curiosity a very strange, enigmatical 
         object, which you would have seen there, lying along lengthwise 
         in the lee scuppers.
      </p>
  </article> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-24T12:09:04.053

只有基于 Webkit 的浏览器（如 Chrome 和 Safari）才支持 CSS3 文本渐变。我使用了 3 种不同的方法。首先检查这个小提琴[http://jsfiddle.net/sarfarazdesigner/pvU7r/](http://jsfiddle.net/sarfarazdesigner/pvU7r/) 试试这个

```
.article{
  background: -webkit-linear-gradient(#eee, #333);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
} 
```

这在 chrome 中运行良好不知道其他浏览器如何反应。参考来自[http://css-tricks.com/snippets/css/gradient-text/](http://css-tricks.com/snippets/css/gradient-text/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-20T05:24:49.033

您也可以使用[mask-image](https://developer.mozilla.org/en-US/docs/Web/CSS/mask-image)属性执行此操作，但您[可能需要](https://caniuse.com/?search=mask-image#:%7E:text=From%20version%208%2C%20Chrome%20added)添加`-webkit-`前缀。

```
article {
  -webkit-mask-image: linear-gradient(0deg, transparent 16px, red 66px);
  /* 0deg = down, 90deg = left, 180deg = top, 270deg = right */
}
```

```
 <article>
      <p>
         Had you stepped on board the Pequod at a certain juncture 
         of this post-mortemizing of the whale; and had you strolled
         forward nigh the windlass, pretty sure am I that you would
         have scanned with no small curiosity a very strange, enigmatical 
         object, which you would have seen there, lying along lengthwise 
         in the lee scuppers. Had you stepped on board the Pequod at a certain 
         juncture of this post-mortemizing of the whale; and had you strolled
         forward nigh the windlass, pretty sure am I that you would
         have scanned with no small curiosity a very strange, enigmatical 
         object, which you would have seen there, lying along lengthwise 
         in the lee scuppers.
      </p>
  </article> 
```

# css - 标题中的可点击徽标链接

> ID：14500160
> 
> 赞同：0
> 
> 时间：2013-01-24T11:22:53.210
> 
> 标签：css

我想将我的可点击公司徽标添加到标题中，这会将它们重定向到主页。我试过这个，但它使整个标题可点击。

```
<div id="header">
    <a style="display:block" href="profile.php" >
        <label>
            <img src="images/logo.png" height="50x" width="180px" />
        </label>
    </a>
</div> 
```

我添加了与之关联的 CSS：

```
div#header a
{
 position:fixed;
 height:40px;margin:0;width:100%;
 padding-left:30px;background: #00BFFF
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:27:36.660

使用`CSS`.

不要使用`INLINE CSS STYLE`. 而是创建 css 文件并粘贴代码并将其包含在页面中。

```
<style type="text/css">

    div.header
    {
        display: block;
        height: 40px;
        position: absolute;
        width: 100%;
    }
    div#header a img
    {
        cursor:pointer;
    }
    .header .logo
    {
        display: block;
        float: left;
        padding: 4px 3px;
    }
    img
    {
        border: 0 none;
        height: auto;
        max-width: 100%;
        vertical-align: middle;
    }
</style>

<div class="header">
    <a href="action.php" class="logo">
        <img title="Title" alt="Alter" src="img/4.png">
    </a>
</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:27:10.513

请删除显示：从锚点**阻止：-**

```
<div id="header">
    <a href="profile.php" ><label><img src="images/logo.png" height="50x" width="180px" /></label></a>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T12:54:21.153

尝试这个

```
 </style> 
 div#header 
         {
         position:fixed;
        height:40px;margin:0;width:100%;
        padding-left:30px;background: #00BFFF
       }
</style> 

<div id="header">
      <a s href="profile.php" >  <img src="slider-button-left.png" height="50x" width="180px" /></a>
</div> 
```

# spring - DefaultMessageListenerContainer 与关闭过程有关的问题

> ID：14500161
> 
> 赞同：4
> 
> 时间：2013-01-24T11:22:54.277
> 
> 标签：spring, jms

我是 Spring Framework 的新手，我的问题如下：

我想以`DefaultMessageListenerContainer`编程方式实例化，我使用的代码是：

```
DefaultMessageListenerContainer container = new DefaultMessageListenerContainer();
container.setConnectionFactory(cf);
container.setDestination(Queue);
container.setMessageListener(Consumer);
container.setReceiveTimeout(-1);
container.setMaxConcurrentConsumers(15);
container.setConcurrentConsumers(10);
container.start(); 
```

为什么在`DefaultMessageListenerContainer`取消部署项目时必须手动关闭？如果我不手动关闭容器，消费者在我的队列中保持打开状态。

当我尝试手动关闭容器（通过调用`container.shutdown()`）时，程序卡住并且项目无法继续。`DefaultMessageListenerContainer`如果我在没有给出`receiveTimeout`关机程序的情况下初始化，则正确执行。有什么问题`setReceiveTimeout(-1)`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T12:23:59.773

`receiveTimeout`是问题所在。要关闭，容器必须有机会停止侦听队列。如果您的消费者线程有无限超时，它将继续侦听并且永远不会检查容器是否需要关闭。您的容器将占用`receiveTimeout`关闭时间。如果它是-1，它永远不会关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:15:18.747

您只需手动关闭侦听器，因为您已经以编程方式启动了它！如果您使用 ApplicationContext 从 xml 加载 Spring bean，那么关闭 App Context 将为您关闭所有 bean。

我发现控制 Spring 加载的 bean 的最简单方法是创建一个 servlet，它从 HttpServlet 实现 init() 和 destroy() 方法。Init() 从我的 xml 文件（即名为 spring.xml 的主文件）加载我的 Spring 配置，并缓存 ApplicationContext 对象。然后 destory() 将在 ApplicationContext 上调用 close()。这将关闭/关闭所有 Spring bean（即您的 JMS 侦听器将停止）。

您以编程方式创建侦听器的任何特殊原因？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:09:32.303

您在这里需要的是能够停止容器（而不是关闭它或取消注册它）并能够在您想要的时候重新启动它，所有这些都在运行时。只需使用 .start() 和 .stop()，它们是`AbstractJmsListeningContainer`我认为继承自的方法。并且不要将它们与 .doStart()、.shutDown() 混合使用...请参阅 spring 文档。

通过 Spring 连接您的侦听器，您可以随时从上下文中获取它并在其上运行 .stop 或 .start 。在 Spring 自动装配期间，您可以将该属性设置`autoStartup`为 false，并且 listenerContainer 将被初始化但不会在启动时进行任何侦听。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-18T12:06:44.383

这就是我动态创建新的`Listener`并让**Spring**处理**关闭**过程 的方法

```
<beans>
//other beans
<bean id="importReadQueueDestination" class="org.springframework.jndi.JndiObjectFactoryBean"> 
        <property name="jndiName"><value>queue/dummyQueue</value></property> 
        <property name="resourceRef"><value>true</value></property>
    </bean>

    <bean id="importQueueConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean"> 
        <property name="jndiName"><value>ConnectionFactory</value></property> 
        <property name="resourceRef"><value>true</value></property> 
    </bean>

     <bean id="importReadQueueSenderService" class="com.localhost.ImportReadQueueSenderService" scope="prototype"/>

    <!-- this is the Message Driven POJO (MDP) -->
    <bean id="importReadMessageListener" class="com.localhost.listener.ImportReadMessageListener" scope="prototype"/>

    <!-- and this is the message listener container -->
    <bean id="importReadJmsContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer" scope="prototype">
        <property name="connectionFactory" ref="importQueueConnectionFactory" />
        <property name="destination" ref="importReadQueueDestination" />
        <property name="messageListener" ref="importReadMessageListener" />
        <property name="concurrentConsumers" value="1"/>
</bean>

</beans> 
```

在这里，我创建了一个虚拟队列`queue/dummyQueue`，因为 DMLC 需要设置`destination`or`destinationName`属性。
`ImportReadMessageListener`扩展 MessageListener。用于创建和缓存动态侦听器的 Java 代码

```
//Actual queue name where I need to send message. `tenantStore` is obtained from ThreadLocalObject
String queue = tenantStore.getProperty("importReadQueue");
//Obtaining existing senderService for that queue
Object queueSenderService = AppConfigurationManager.getQueueSenderService(queue);
if (queueSenderService != null) {
    ((IImportReadQueueSenderService) queueSenderService).sendObjectMessage(importReadQueueDO);
} else {
    // In-case of call received from new tenant, then dynamically create and cache a separate listener and DMLC for it
        InitialContext ic = new InitialContext();
        Queue destination = (Queue) ic.lookup(queue);
        ConnectionFactory importQueueConnectionFactory =(ConnectionFactory) ServiceContext.getBean("importQueueConnectionFactory");

        JmsTemplate importJmsTemplate=new JmsTemplate(importQueueConnectionFactory);
        importJmsTemplate.setDefaultDestination(destination);

        Object importReadMessageListener = ServiceContext.getBean("importReadMessageListener");

        DefaultMessageListenerContainer dmlc = (DefaultMessageListenerContainer)ServiceContext.getBean("importReadJmsContainer");
        dmlc.setDestination(destination);
    /*  below two steps are extremely important else you won't receive any message.  
        I already wasted a day behind this.*/
    //  https://stackoverflow.com/a/21364885/4800126
        dmlc.afterPropertiesSet();
        dmlc.start();

        IImportReadQueueSenderService importQueueSenderService = (IImportReadQueueSenderService) ServiceContext
                .getBean("importReadQueueSenderService");

        AppConfigurationManager.cacheQueueDetails(queue, dmlc, importQueueSenderService,
                importReadMessageListener);
        importQueueSenderService.setJmsTemplate(importJmsTemplate);
        importQueueSenderService.sendObjectMessage(importReadQueueDO);
    } 
```

所以现在当你关闭应用程序时，Spring 会自动关闭所有的监听器。

# php - cookie在php登录中不起作用

> ID：14500162
> 
> 赞同：0
> 
> 时间：2013-01-24T11:22:54.200
> 
> 标签：php, cookies

我编写了一个使用会话和 cookie 的 php 登录脚本。我知道关闭浏览器后会话会过期，但 cookie 会一直存在，直到达到过期时间。在我的脚本中，我创建了一个 COOKIE 来存储登录用户的“用户名”。登录后，如果我关闭浏览器并重新打开它..由于cookie，我必须仍然保持登录状态。当我点击注销时，我必须注销。但是我的脚本无法正常工作，因为在单击“注销”按钮链接后，我的脚本没有将我注销。

这是我写的php代码：

```
 <?php
session_start();
require_once('login/connectvars.php');
    if(!isset($_SESSION['username']) && isset($_COOKIE['username']))
{
    $_SESSION['username'] = $_COOKIE['username'];
}

if(isset($_POST['submit']))
        {
          if(!empty($_POST['username']) && !empty($_POST['password']))
          {
            $dbc = mysqli_connect(DB_HOST,DB_USER,DB_PASSWORD,DB_NAME);
            $username = mysqli_real_escape_string($dbc,trim($_POST['username']));
            $password = mysqli_real_escape_string($dbc,trim($_POST['password']));

            $query = "SELECT user_id,username FROM users_dns WHERE username = '$username' AND password = SHA('$password')";
            $data = mysqli_query($dbc,$query) or die(mysqli_error($dbc));
            if(mysqli_num_rows($data) == 1)
            {
                $row = mysqli_fetch_array($data);
                $_SESSION['user_id'] = $row['user_id'];
                $_SESSION['username'] = $row['username'];
                setcookie('username',$row['username'],time() + (60 * 60));
                echo 'success';
                mysqli_close($dbc);
            }    
            else
            {
                echo 'enter correct username and password';
            }
         }
        else
        {
            echo 'no empty fields please..';
        }
      }

?> 
```

这是我在 html 代码中使用的内容：

```
<?php
       if(isset($_SESSION['username']))
       {
         echo 'logged in as'.$_SESSION['username'];
         echo '<a href="login/logout.php">log out ('.$_SESSION['username'].')</a><br />';
         echo $_SESSION['username'];
       }
       else
       {
       ?>
       <div id="login_form">

        <!--<span class="error"><?php echo $error_msg; ?></span>-->
         <form id="login"  method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
            <table>
                  <tr>
                     <th>Username:</th>
                     <th>Password:</th>
                  </tr>
                  <tr>
                     <td><input type="text" name="username" /></td>
                     <td><input type="password" name="password" /></td>
                   </tr>
                   <tr>
                      <td><input type="submit" name="submit" value="Log In" class="submit" /></td>
                      <td><a href="login/signup.php"><input type="button" class="submit" value="Sign Up" /></a></td>
                   </tr>
            </table>
         </form>
       </div>
       <?php
       }
       ?> 
```

这是我的注销脚本

```
 <?php
session_start();

if(isset($_SESSION['username']))
{
    $_SESSION = array();

if(isset($_COOKIE['session_name()']))
{
    setcookie('username','',time() - 3600);
}
session_destroy();
}
setcookie('user_id','',time() - 3600);
setcookie('username','',time() - 3600);

echo 'redirecting you...please wait..';
header("Refresh: 3;url=http://localhost/");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:50:45.260

```
if(isset($_COOKIE['session_name()'])) 
```

这应该是

```
if(isset($_COOKIE['username'])) 
```

因为您已经创建了`username`cookie 并且正在检查`session_name()`cookie。

# tsql - 当只有值保持不变时，如何在 Sql Else 子句中返回常量值

> ID：14500167
> 
> 赞同：0
> 
> 时间：2013-01-24T11:23:11.247
> 
> 标签：tsql, triggers

```
UPDATE  ConcordWholesales_new.dbo.Product 
SET CCCQTYINSTOCK=isnull(@newQTYINSTOCK,'')    
where SKU=@newSTOCKCODE   

UPDATE  Product 
SET Published = CASE WHEN CCCQTYINSTOCK=isnull(@newQTYINSTOCK,'') 
    THEN '1' ELSE 0 END 
```

我有一个更新触发器，当更新的库存数量低于 0 时，产品变为未发布。如果 StockQuantity 高于 0，则上述案例更新已发布字段以重新发布产品。

当我更新 ELSE 子句时，在其他列上返回 0 值，但如果我删除 ELSE 子句，它就不能插入空值。

如何返回上述代码，使其仅更新一行数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:53:13.507

你在第二个语句中缺少`WHERE`子句

```
UPDATE  Product 
SET Published = CASE WHEN CCCQTYINSTOCK > 0
    THEN 1 ELSE 0 END
where SKU=@newSTOCKCODE 
```

还有一件事，Published column 是什么数据类型？您正在使用 '1' - 它的 nchar 和 0 - int

# android - 禁用弹出浏览器 webview

> ID：14500173
> 
> 赞同：0
> 
> 时间：2013-01-24T11:23:18.290
> 
> 标签：android, webview

我正在为我的网站开发一个应用程序。我的问题是网络视图。我正在正确导航我的 web 视图，但它在我的 Note 2 设备中为它打开了一个弹出式浏览器。我不会那样做的，请帮助我。

感谢帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T11:54:26.157

尝试这些方法可能会有所帮助

```
WebSettings settings = webview.getSettings();  
settings.setSupportMultipleWindows(false); 
```

并创建一个 WebChromeClient 如下所示

```
final Context mContext = this; 
final class CustomWebChromeClient extends WebChromeClient {
@Override
public boolean onJsConfirm(WebView view, String url, String message, final JsResult result) {
    new AlertDialog.Builder(mContext )
    .setTitle("App Titler")
    .setMessage(message)
    .setPositiveButton(android.R.string.ok,
            new DialogInterface.OnClickListener()
    {
        public void onClick(DialogInterface dialog, int which)
        {
            result.confirm();
        }
    })
    .setNegativeButton(android.R.string.cancel,
            new DialogInterface.OnClickListener()
    {
        public void onClick(DialogInterface dialog, int which)
        {
            result.cancel();
        }
    })
    .create()
    .show();

    return true;
}
} 
```

并将其设置为您的 Webview

```
webview.setWebChromeClient(new MyWebChromeClient()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:29:45.100

无论您的网站是从设备还是计算机打开，您都可以在加载时签入。如果设备则不要打开该弹出窗口，否则什么也不做。

# jquery - 在jquery中使用溢出=隐藏获取窗口高度

> ID：14500174
> 
> 赞同：0
> 
> 时间：2013-01-24T11:23:20.537
> 
> 标签：jquery, html, css

我有一个不应该滚动的全屏 Web 应用程序，所以我设置：

```
$("body").css("overflow", "hidden"); 
```

但是，当我添加一个调整大小的侦听器时：

```
$(window).resize(function(){
    console.log("Inner height: " + $(window).innerHeight());
    console.log("Height: " + $(window).height());
    console.log("Document: " + $(document).height());
    console.log("Body: " + $("body").height());
}); 
```

当我把窗口变*高*时，高度会正确报告，但当我把它变小时，它是不正确的。事实上，窗口高度（通过这些变量中的任何一个）*只会*增加（如果我把它变大就正确，如果我把它变小一点点）。

内容，如果它是相关的，是一个 html`<video>`元素，它准备好整个窗口空间。

我已经读过 height() 不会在溢出中工作：隐藏，但我不知道为什么不这样做。另外，我到底如何获得正确的高度？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:26:04.940

你可以尝试设置

```
html,body {
    height: 100%;
    width: 100%;
} 
```

# php - 什么时候错误检查太多了？

> ID：14500176
> 
> 赞同：5
> 
> 时间：2013-01-24T11:23:22.583
> 
> 标签：php, error-handling

在我的 PHP 学习过程中，我一直在尝试阅读错误报告和处理的最佳实践，但陈述因人而异，我一直在努力想出一种清晰简洁的方法来处理我的应用程序中的错误。我对可能出错的事情使用异常，但在大多数情况下，我很难理解异常是应该终止应用程序并显示错误页面还是只是被捕获并静默处理。

似乎让我难以理解的是，是否有太多的报道？每次调用函数时，都可能出现严重错误，这意味着如果要确认每个函数调用，则必须用 if 语句填充页面并计算出一次失败可能对其余部分产生什么影响。是否有一个简明的错误报告文档或想法可以为我解决这个问题？有最佳实践吗？良好错误处理的最佳示例是什么？

目前我执行以下操作：

*   如果发生致命错误，将重要事件结果添加到要记录的数组并通过电子邮件发送给我
*   显示致命错误的抽象/通用错误。
*   对可能失败的情况使用例外
*   在开发环境中打开错误报告并在实时环境中关闭
*   验证所有用户输入数据
*   清理无效的用户输入
*   在不提供利用平台的情况下向用户显示简洁、信息丰富的错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:36:40.003

异常是您唯一不了解的事情恕我直言：异常意味着不受您的控制，意味着要在它们被抛出的范围之外进行处理。try 块有一个特定的限制：它应该包含相关操作。例如拿一个数据库 try catch 块：

```
$array = array();
try {
    // connect throws exception on fail
    // query throws exception on fail
    // fetch results into $array
} catch (...) {
    $array[0]['default'] = 'me';
    $array[0]['default2'] = ...;
    ...
} 
```

如您所见，我将每个与数据库相关的函数都放在了 try 块中。如果连接失败，则查询并且不执行获取，因为如果没有连接，它们将毫无意义。如果查询失败，则跳过获取，因为不获取任何结果是没有意义的。如果出现任何问题，我有一个空的 $array 需要处理：例如，我可以用默认数据填充它。

使用以下异常：

```
$array = array();
try {
    if (!file_exists('file.php')) throw new Exception('file does not exists');
    include('file.php');
} catch (Exception $e) {
    trigger_error($e->getMessage());
} 
```

没有意义。它只是一个较长的版本：

```
if (!file_exists('file.php')) trigger_error('file does not exists');
    include('file.php'); 
```

# python - 在 Python 中，我可以调用导入模块的 main() 吗？

> ID：14500183
> 
> 赞同：113
> 
> 时间：2013-01-24T11:23:52.247
> 
> 标签：python, module, arguments, main

在 Python 中，我有一个**模块**myModule.py ，我在其中定义了一些函数和一个**main()**，它接受一些命令行参数。

我通常从 bash 脚本中调用这个 main()。现在，我想把所有东西都放在一个小**包里**，所以我想也许我可以把我简单的 bash 脚本变成 Python 脚本，然后放在包里。

那么，我如何真正从MyFormerBashScript.py的 main() 函数**调用myModule.py****的 main() 函数**？我什至可以这样做吗？我如何将任何**参数**传递给它？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2013-01-24T11:26:23.580

这只是一个功能。导入并调用它：

```
import myModule

myModule.main() 
```

如果您需要解析参数，您有两种选择：

*   解析它们`main()`，但`sys.argv`作为参数传入（下面的所有代码都在同一个模块中`myModule`）：

    ```
    def main(args):
        # parse arguments using optparse or argparse or what have you

    if __name__ == '__main__':
        import sys
        main(sys.argv[1:]) 
    ```

    `myModule.main(['arg1', 'arg2', 'arg3'])`现在您可以从其他模块导入和调用。

*   接受已经`main()`解析的参数（同样是`myModule`模块中的所有代码）：

    ```
    def main(foo, bar, baz='spam'):
        # run with already parsed arguments

    if __name__ == '__main__':
        import sys
        # parse sys.argv[1:] using optparse or argparse or what have you
        main(foovalue, barvalue, **dictofoptions) 
    ```

    并在其他地方导入和调用`myModule.main(foovalue, barvalue, baz='ham')`，并根据需要传入 python 参数。

这里的技巧是检测你的模块何时被用作脚本；当您将 python 文件作为主脚本 ( `python filename.py`)运行时，没有`import`使用任何语句，因此 python 调用该模块`"__main__"`。但是，如果相同`filename.py`的代码被视为模块 ( `import filename`)，那么 python 会使用它作为模块名称。在这两种情况下，变量都已`__name__`设置，并且针对该变量进行测试会告诉您代码是如何运行的。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2016-05-10T17:14:31.873

Martijen 的回答是有道理的，但它遗漏了一些对其他人来说似乎很明显但我很难弄清楚的关键内容。

在您使用 argparse 的版本中，您需要在主体中包含这一行。

```
args = parser.parse_args(args) 
```

通常，当您仅在脚本中使用 argparse 时，您只需编写

```
args = parser.parse_args() 
```

和 parse_args 从命令行查找参数。但在这种情况下，主函数无法访问命令行参数，因此您必须告诉 argparse 参数是什么。

这是一个例子

```
import argparse
import sys

def x(x_center, y_center):
    print "X center:", x_center
    print "Y center:", y_center

def main(args):
    parser = argparse.ArgumentParser(description="Do something.")
    parser.add_argument("-x", "--xcenter", type=float, default= 2, required=False)
    parser.add_argument("-y", "--ycenter", type=float, default= 4, required=False)
    args = parser.parse_args(args)
    x(args.xcenter, args.ycenter)

if __name__ == '__main__':
    main(sys.argv[1:]) 
```

假设您将此命名为 mytest.py 要运行它，您可以从命令行执行任何这些操作

```
python ./mytest.py -x 8
python ./mytest.py -x 8 -y 2
python ./mytest.py 
```

分别返回

```
X center: 8.0
Y center: 4 
```

或者

```
X center: 8.0
Y center: 2.0 
```

或者

```
X center: 2
Y center: 4 
```

或者，如果您想从另一个 python 脚本运行，您可以执行

```
import mytest
mytest.main(["-x","7","-y","6"]) 
```

返回

```
X center: 7.0
Y center: 6.0 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2013-01-24T11:30:55.573

这取决于。如果主代码受如下保护`if`：

```
if __name__ == '__main__':
    ...main code... 
```

那么不，你不能让 Python 执行它，因为你不能影响自动变量`__name__`。

但是当所有代码都在一个函数中时，也许可以。尝试

```
import myModule

myModule.main() 
```

即使模块使用`__all__`.

`from myModule import *`可能`main`对您不可见，因此您确实需要导入模块本身。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-03T11:53:15.190

我也有同样的需要`argparse`。对象实例的函数默认`parse_args`从. 遵循 Martijn 线的解决方法包括明确说明，因此您可以根据需要更改传递给的参数。`argparse.ArgumentParser``sys.args``parse_args`

```
def main(args):
    # some stuff
    parser = argparse.ArgumentParser()
    # some other stuff
    parsed_args = parser.parse_args(args)
    # more stuff with the args

if __name__ == '__main__':
    import sys
    main(sys.argv[1:]) 
```

关键是将参数传递给`parse_args`函数。稍后，要使用 main，您只需按照 Martijn 的说明进行操作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-12-01T03:17:42.800

我正在寻找的答案在这里得到了回答：[How to use python argparse with args than sys.argv?](https://stackoverflow.com/questions/38853812/how-to-use-python-argparse-with-args-other-than-sys-argv)

如果`main.py`和`parse_args()`是这样写的，那么解析就可以很好地完成了

```
# main.py
import argparse
def parse_args():
    parser = argparse.ArgumentParser(description="")
    parser.add_argument('--input', default='my_input.txt')
    return parser

def main(args):
    print(args.input)

if __name__ == "__main__":
    parser = parse_args()
    args = parser.parse_args()
    main(args) 
```

然后你可以在另一个 python 脚本中调用`main()`和解析参数：`parser.parse_args(['--input', 'foobar.txt'])`

```
# temp.py
from main import main, parse_args
parser = parse_args()
args = parser.parse_args([]) # note the square bracket
# to overwrite default, use parser.parse_args(['--input', 'foobar.txt'])
print(args) # Namespace(input='my_input.txt')
main(args) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T11:31:09.550

假设您也尝试传递命令行参数。

```
import sys
import myModule

def main():
    # this will just pass all of the system arguments as is
    myModule.main(*sys.argv)

    # all the argv but the script name
    myModule.main(*sys.argv[1:]) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-31T04:32:42.937

我遇到了这个问题，我无法调用文件`Main()`方法，因为它被这些点击选项装饰，例如：

```
# @click.command()
# @click.option('--username', '-u', help="Username to use for authentication.") 
```

当我删除这些装饰/属性时，我可以从另一个文件中成功调用 Main() 方法。

```
from PyFileNameInSameDirectory import main as task
task() 
```

# php - 为 Thunderbird / Outlook / 准备电子邮件

> ID：14500184
> 
> 赞同：4
> 
> 时间：2013-01-24T11:23:56.270
> 
> 标签：php, email

是否可以在 PHP 中准备一封电子邮件（发件人、收件人、主题、正文、附件），而不是直接使用 PHP 发送，而是使用客户的电子邮件程序（Thunderbird / Outlook / ...）打开它？

我的上下文是：

*   在表单中，用户选择“收件人”联系人和要发送的文件（正文是预定义的文本）
*   在提交时，我希望准备好的电子邮件显示在他最喜欢的邮件客户端中，以便他可以修改它（添加抄送，修改正文，...）

如果可能，该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T12:46:00.857

我会做这样的事情：

*   从表格中收集信息
*   提交表单时处理数据
*   向用户提供一个链接，并使用该`mailto:`方案添加变量。

例如，在 PHP 中是这样的：

```
if(isset($_POST['send_mail']))
{
    $to = $_POST['email_to'];
    $subject = $_POST['email_subject'];
    $body = 'This would be your defined body...';

    // Now prepare the URL and present it to the user:
    $url = 'mailto:'.$to.'?subject='.rawurlencode($subject).'&body='.rawurlencode($body);
    echo '<a href="'.$url.'" title="Send Email Now">Send Email</a>';

    // A boolean value to hide the form
    // Necessary logic would need to be implemented on the page for this
    $show_form = false;
} 
```

您的表单可能如下所示：

```
<form method="post">
    <label for="select_email_to">Recipient:</label>
    <select name="email_to" id="select_email_to">
        <option value="someone@example.com">John Doe</option>
        <option value="someone.else@example.com">Jane Doe</option>
        <otion value="a.n.other@example.com">Foo Bar</otion>
    </select>
    <label for="input_subject">Subject</label>
    <input type="text" name="subject" id="input_subject" />

    <input type="submit" name="send_mail" value="Prepare Email" />
</form> 
```

如果您需要包含文件，我会在提交表单时将其上传到服务器，然后在电子邮件正文中包含指向上传文件的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:03:24.157

mailto: URL 方案显示了如何创建指向新电子邮件的链接。浏览器/操作系统将在电子邮件客户端中打开此电子邮件。

[https://www.rfc-editor.org/rfc/rfc2368](https://www.rfc-editor.org/rfc/rfc2368)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T17:24:17.803

谢谢大家的回答。

不幸的是（实际上并不令人惊讶），不可能将附件数据放入 mailto 链接（duh）！

然后有2个解决方案：

1.  如果您确实需要打开客户端的电子邮件软件，请准备一个 mailto，其中包含指向邮件正文中文件的直接链接。为此，您需要将文件存储在收件人可以通过该直接链接访问的位置。
2.  如果您无法将文件存储在收件人可访问的位置（例如，您的应用程序是防火墙后的内部网应用程序），那么唯一的解决方案是直接通过 PHP 发送电子邮件，而不使用客户端软件。
3.  或者你可以先通过PHP把邮件发给发件人，他自己再转发给收件人，这样他就可以随意修改邮件了。但这对于未经培训的用户来说有点令人困惑......

干杯!

# python - 为 Mac 制作 Python 应用程序包/安装

> ID：14500185
> 
> 赞同：1
> 
> 时间：2013-01-24T11:24:02.217
> 
> 标签：python, macos, installation, py2app, dmg

我为朋友开发了一个应用程序。应用程序并不复杂，只涉及两个 .py 文件，main.py 和 main_web.py，main 是应用程序代码，_web 是它的 Web 界面。由于网络是后来完成的，它保持这种格式，我知道它可以用一个应用程序完成，但不要让它太复杂，我保持这种格式。两个两个与一些文件通信，Web 部件使用 Flask，所以也有“模板”目录。

现在，我想在 OSX 系统上制作一个包或以某种方式使其更易于分发。我看到有一个不错的 py2app 东西，但我正在运行 Windows，我不能真正使用它，因为它不能在 Win 上运行。我也不知道 py2app 是否会出现问题，因为某些配置位于目录中的文本文件中，并且它们在运行时会发生变化。

所以，我想知道，有没有其他方法可以制作这个包，某种设置，比如程序，或者一些脚本之类的？一些简单的“方法”是复制“文档”目录中的文件，并在桌面上添加一些快捷方式来运行这两个应用程序，就是这样，不需要其他任何东西。DMG 会很好，但不是强制性的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:50:58.943

我相信您正在寻找的是添加：`#!/usr/bin/python`在您的代码的第一行中，您的朋友只需双击该文件，它就会打开。正如警告一样，osx 并没有告诉我们什么版本，什么版本的 python 以及什么标准库将会出现。

另外，只要确保如果他们已经使用了很多设置并且他们双击 python 它不起作用，他们将不得不选择在 Utilities Applications 文件夹（/Applications/实用程序/终端.app)

另一个想法是借一个mac并用你已经提到的py2app程序编译它。否则，没有通用二进制文件可以在 windows 中编译并在 mac 上运行。

# git - ZF2 应用程序、Git 和自定义模块

> ID：14500186
> 
> 赞同：1
> 
> 时间：2013-01-24T11:24:05.307
> 
> 标签：git, zend-framework2

我认为我在这里遇到的麻烦可能是由于缺少一些 git 知识。

我想构建一个可以在本地开发服务器、暂存服务器和生产服务器上运行的 ZF2 应用程序。

我从 ZF2 Skeleton 应用程序开始，并在 ./Modules/ 中构建了一些自定义模块。

我在 ./config/autoload/global.php 和 ./config/autoload/local.php 中也有一些配置。

我现在想将整个应用程序放入一个 git 存储库并推送到远程服务器。然后，在其他登台和生产服务器上，我希望能够拉出项目以进行初始部署和更新。

因此，如果最初的框架应用程序不是来自 ZF2 github 存储库，这不会有问题，我可以简单地从应用程序根目录执行“git init”、“git add”等操作，然后我就走了。但是，随着时间的推移，这将不允许我从 ZF2 github 等中提取主库的 ZF2 版本。

所以基本上我要问的是我如何拥有一个应用程序树，它既存储在我的本地 git 存储库和服务器中，又从主 ZF2 存储库中提取新的框架版本等。

任何指针都收到了。

:wq

# javascript - 我想使用 JavaScript 在我的画布上添加鼠标悬停效果

> ID：14500192
> 
> 赞同：0
> 
> 时间：2013-01-24T11:24:22.277
> 
> 标签：javascript, html, canvas

鼠标悬停效果应仅在特定画布位置创建。此外，我还创建了 MousePosition 函数（见下文）。鼠标悬停效果的命令应该在 MouseOverButton 函数上。

但它似乎仍然无法正常工作。

我的代码：

```
function init() {
    var can=document.getElementById("SnakeCanvas");
    var ctx=can.getContext("2d");
    can.addEventListener('mouseover',MouseOverButton, false);
}

function getPosition(event) {
    var x = new Number();
    var y = new Number();
    var can = document.getElementById("SnakeCanvas");

    if (event.x != undefined && event.y != undefined) {
        x = event.x;
        y = event.y;
    } else {//Firefox Compatability//
        x = event.clientX + document.body.scrollLeft +
        document.documentElement.scrollLeft;
        y = event.clientY + document.body.scrollTop +
        document.documentElement.scrollTop;
    }
    x -= can.offsetLeft;
    y -= can.offsetTop;
    return {mx:x, my:y};
}

function MouseOverButton(e) {
    var can=document.getElementById("SnakeCanvas");
    var ctx=can.getContext("2d");
    var cell=getPosition(event);

    if ((cell.mx > 854 && cell.mx < 985) && (cell.my > 256 && cell.my < 315)) {
        ReplaceImage(ctx,'Images/New_Game_Hover.png',570,100,140,70);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:26:55.553

您的事件参数 in`function MouseOverButton(e)`被调用`e`，但您`event`在将其传递给时使用`getPosition`：

`var cell=getPosition(event);`应该`var cell=getPosition(e);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:32:31.257

尝试这个：

```
function MouseOverButton(e) {
    e = e || window.event; // Compatibility
    var can = document.getElementById("SnakeCanvas");
    var ctx = can.getContext("2d");
    var cell = getPosition(e);
//                         ^ That was `event`, breaking your code.
    if ((cell.mx > 854 && cell.mx < 985) && (cell.my > 256 && cell.my < 315)) {
        ReplaceImage(ctx,'Images/New_Game_Hover.png',570,100,140,70);
    }
} 
```

# ios - 如何从 iPhone 中的指定部分修剪音频文件

> ID：14500193
> 
> 赞同：0
> 
> 时间：2013-01-24T11:24:27.223
> 
> 标签：ios

```
float vocalStartMarker = 1.0;
    float vocalEndMarker = 3.0;
    NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSURL *audioFileInput =[NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/idea_honey_bunny.mp3", [[NSBundle mainBundle] resourcePath]]];

       NSURL *audioFileOutput =[NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/idea_honey_bunny.mp3", [[NSBundle mainBundle] resourcePath]]];

    NSError *error;

    if (!audioFileInput || !audioFileOutput)
    {
        return NO;
    }

    [[NSFileManager defaultManager] removeItemAtURL:audioFileOutput error:NULL];
    AVAsset *asset = [AVAsset assetWithURL:audioFileInput];

    AVAssetExportSession *exportSession = [AVAssetExportSession exportSessionWithAsset:asset
                                                                            presetName:AVAssetExportPresetAppleM4A];

    if (exportSession == nil)
    {
        return NO;
    }

    CMTime startTime = CMTimeMake((int)(floor(vocalStartMarker * 1)), 1);
    CMTime stopTime = CMTimeMake((int)(ceil(vocalEndMarker * 1)), 1);
    CMTimeRange exportTimeRange = CMTimeRangeFromTimeToTime(startTime, stopTime);

    exportSession.outputURL = audioFileOutput;
    exportSession.outputFileType = AVFileTypeAppleM4A;
    exportSession.timeRange = exportTimeRange;

    [exportSession exportAsynchronouslyWithCompletionHandler:^
     {
         if (AVAssetExportSessionStatusCompleted == exportSession.status)
         {
             NSLog(@"It worked!");
         }
         else if (AVAssetExportSessionStatusFailed == exportSession.status)
         {
             // It failed...
         }
     }];
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:audioFileOutput error:&error];
    //  audioPlayer.numberOfLoops = -1;

    if (audioPlayer == nil)
        NSLog(@"%@",error);
    else
        [audioPlayer play];
    return YES;
} 
```

我想尝试修剪音频文件，但如果（AVAssetExportSessionStatusCompleted == exportSession.status）{ NSLog（@“它工作！”）；} else if (AVAssetExportSessionStatusFailed == exportSession.status) { // 它失败了... } }]; 块和文件不修剪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:38:12.540

**exportAsynchronouslyWithCompletionHandler**方法需要一些时间来导出新资产。因此，您使用尚未准备好的资产创建音频播放器。

尝试像这样更改您的代码

```
[exportSession exportAsynchronouslyWithCompletionHandler:^
 {
     if (AVAssetExportSessionStatusCompleted == exportSession.status)
     {
        NSLog(@"It worked!");
        audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:audioFileOutput error:&error];
        if (audioPlayer == nil) {
            NSLog(@"%@",error);
        }
        else {
            [audioPlayer play];
        }
     }
     else if (AVAssetExportSessionStatusFailed == exportSession.status)
     {
         // It failed...
     }
 }]; 
```

此外，正如 Murali 上面所说，更改输出文件的路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:34:59.353

您为 audioFileOutput 和 audioFileInput 提供了相同的路径...所以它会进入失败案例。并且还要确保该文件存在于输入路径中...请更改 OutputFile 路径并检查..

# html - 子 div 出现在父 div 之外

> ID：14500197
> 
> 赞同：2
> 
> 时间：2013-01-24T11:24:35.163
> 
> 标签：html, css

我正在尝试将包含图片的 div 放入另一个 div。这个父 div 还有 2 个其他 div，它们可以完美地工作。我的父子 div 的 html 代码是：

```
 <div id="contentsWrapper">
     <div><ul id="sideNav">
         <li><a href="linkone.html" id="linkone">One</a></li>
         <li><a href="linktwo.html" id="linktwo">Two</a></li>
     </ul></div>

     <div id="text">
         Lorem ipsum dolor sit amet, consectetuer adipiscing elit, <br />
         sed diam nonummy  nibh euismod tincidunt ut laoreet dolore magna.
     </div>

     <div id="picture">
          <img src="picture.jpg" alt="picture" height="200" width="200" />
     </div>
</div> 
```

CSS代码是

```
#contentsWrapper {
    width: 800px;
    margin-left: 10px;
}

#sideNav {
    padding: 0;
    list-style: none;
    width: 160px;
    margin-top: 0px;
    border-bottom: 1px dashed #999;
    position: absolute;
 }
 #text {
    width: 375px;
    margin-left: 180px;
    font-weight: bold;
 }
 #picture {
    position: absolute;
    width: 225px;
    margin-left: 575px;
    background-color: #FFFF00;
 } 
```

但这总是将图片放在屏幕左侧的正确位置，但在 contentsWrapper div 下方。我尝试只使用文本并更改图片 div 的宽度和边距值，但结果仍然相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:35:14.077

绝对定位将其从容器中移除。尝试这样的事情：

```
#picture {
width: 225px;
float:right;
background-color: #FFFF00; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:36:27.970

添加`float:left; in the #text`样式开始工作....

```
#text {
    width: 375px;
    margin-left: 180px;
    font-weight: bold;
    float:left;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:31:01.817

它正在做你告诉他做的事情。但也许我只是不明白你打算做什么（也许添加一张图片？）

第一个问题：你为什么`position:absolute`在图像上使用？这会将其从流程中移除。

第二个问题：你为什么用`position:absolute`with`margin-left`和 not一起使用`left`？

如果你使用left then，如果你给父母，它会从它的父母计算它`position:relative`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T11:33:20.503

您应该删除 position:absolute 或给出 position:relative to parent div。

为什么会有巨大的利润空间？

```
#contentsWrapper {
    width: 800px;
    margin-left: 10px; background:red; position:relative; overflow: hidden; height:auto
}

#sideNav {
    padding: 0;
    list-style: none;
    width: 160px;
    margin-top: 0px;
    border-bottom: 1px dashed #999;
    float:left
 }
 #text {
    width: 375px;
    font-weight: bold; float:left
 }
 #picture {
    width: 225px;
    background-color: #FFFF00; float:left
 } 
```

**[演示](http://jsfiddle.net/ZyptN/)**

# symfony - 从 FormHandler 发送电子邮件

> ID：14500198
> 
> 赞同：0
> 
> 时间：2013-01-24T11:24:34.937
> 
> 标签：symfony

我已经阅读了很多关于如何注入服务等的文档，但仍然没有找到一个简单的解决方案来解决我的问题。

问题是：从 FormHandler 访问邮件服务。当表单有效时，它会发送一封电子邮件，就这么简单。

问题是我每次调用 FormHandler 时都必须将邮件作为参数传递，我认为这不是很干净。

**那么，我如何在没有所有这些参数的情况下从 FormHandler 访问邮件服务？**

这是我的位置：

```
 $formHandler = new InscriptionHandler($form,
                                          $this->get('request'),
                                          $this->getDoctrine()->getEntityManager(),
                                          $this->get('mailer'),
                                          $this,
                                          $this->getRequest()->getLocale()); 
```

然后，构造函数：

```
 public function __construct(Form $form, Request $request, EntityManager $em, $sm, $ctrl, $locale) {
        $this->form    = $form;
        $this->request = $request;
        $this->em      = $em;
        $this->sm      = $sm;
        $this->ctrl    = $ctrl;
        $this->locale  = $locale;
    } 
```

我想我可以将 $this 作为参数传递，但为了更好地理解问题，这就是我编写的代码。

在此先感谢，詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:14:27.677

我认为您需要像这样首先定义服务

```
# app/config/config.yml
services:
    my_mailer:
        class:        Acme\HelloBundle\Mailer
        arguments:    [sendmail] 
```

你可以这样使用

```
$mailer = $this->get('my_mailer');
$mailer->send('ryan@foobar.net', ...); 
```

在这里查看更多信息

[http://symfony.com/doc/current/book/service_container.html](http://symfony.com/doc/current/book/service_container.html)

# php - PHP：通过数组存储字符串

> ID：14500201
> 
> 赞同：1
> 
> 时间：2013-01-24T11:24:44.967
> 
> 标签：php

我对这种情况有疑问，如何通过数组存储字符串？这是我的代码

```
<?php
$octets = array($_POST["oct1"],$_POST["oct2"],$_POST["oct3"],$_POST["oct4"]);
$octlenfnl = count($octets) - 1;
$binoctstr = 0 ;
if($_POST["oct1"] <= 255 && $_POST["oct1"] <= 255 && $_POST["oct1"] <= 255 && $_POST["oct1"] <= 255)
{
    for($i=0;$i<=$octlenfnl;$i++){
        echo str_pad(decbin($octets[$i]), 8, '0', STR_PAD_LEFT) , "&nbsp";
    }
}
else
{
    echo "Invalid IP!";
}

?> 
```

它像这样将输入的 IP 输出到二进制八位字节`11111111 0001000 10010101 10010101`，它们在八位字节之间有空格，我该如何拆分它们并将其存储到全局可访问的数组中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:27:46.937

您可以使用`$arr=explode(' ', "11111111 0001000 10010101 10010101");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:31:26.077

不是回显您的结果，而是将它们存储到类似这样的数组中

```
<?php
$octets = array($_POST["oct1"],$_POST["oct2"],$_POST["oct3"],$_POST["oct4"]);
$octlenfnl = count($octets) - 1;
$binoctstr = 0 ;
$binaryarray = array();
if($_POST["oct1"] <= 255 && $_POST["oct1"] <= 255 && $_POST["oct1"] <= 255 && $_POST["oct1"] <= 255)
{
  for($i=0;$i<=$octlenfnl;$i++){
      $binaryarray[] = str_pad(decbin($octets[$i]), 8, '0', STR_PAD_LEFT);
  }
}
    else
    {
        echo "Invalid IP!";
    }

//to echo out your results you can do this as a comma separated string
echo implode(",",$binaryarray);
//or if you wish to access a specific segment you can do this where $key is the array element you want
echo $binaryarray[$key];  

?> 
```

简化代码的更新编辑

您可以稍微简化代码，我认为这样可以节省您创建第二个数组并仅操作现有数组的时间。除非您需要该初始数组来做任何事情，否则这应该可以正常工作

```
<?php
$octets = array($_POST["oct1"],$_POST["oct2"],$_POST["oct3"],$_POST["oct4"]);
$binoctstr = 0 ;
if($_POST["oct1"] <= 255 && $_POST["oct1"] <= 255 && $_POST["oct1"] <= 255 && $_POST["oct1"] <= 255)
{
  for($i=0;$i<=count($octets);$i++){
      $octets [$i] = str_pad(decbin($octets[$i]), 8, '0', STR_PAD_LEFT);
  }
}
    else
    {
        echo "Invalid IP!";
    }

//to echo out your results you can do this as a comma separated string
echo implode(",",$octets );
//or if you wish to access a specific segment you can do this where $key is the array element you want
echo $octets[$key];  

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:29:02.880

用这个

```
$resultAsArray = explode(" ", $binaryOctets); 
```

# wcf - 如何获取 WCF 服务队列中的请求

> ID：14500202
> 
> 赞同：2
> 
> 时间：2013-01-24T11:24:53.180
> 
> 标签：wcf

我有一个作为 Windows 服务托管的 WCF 服务。没有什么花哨的 InstanceContextMode 和 ConcurrencyMode 设置为 Single。

我知道 WCF 使用默认的排队机制，因为我可以看到发送到服务的所有请求都得到处理。

我的问题是，有没有办法在任何特定情况下知道队列中的请求？

基本上我正在寻找队列中的请求，并可能将它们记录到给定实例的文件中。

问候。

# java - 用于在文本文件中打印已知单词的前后的 Java 程序

> ID：14500206
> 
> 赞同：0
> 
> 时间：2013-01-24T11:25:06.347
> 
> 标签：java, string, text

我正在尝试编写一个 Java 程序来打印文本文件中已知单词的前后。

例如假设我知道一个词`"like"`

一个文本文件包含如下文本 `Sam like chocolate and other stuff`

我需要打印哪些在已知单词之前和`Sam`之后。任何人都可以为上述任务提供Java程序。`chocolate``like`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:28:31.787

这不是一项家庭作业服务，而是一个提示：
您正在阅读单词，将前一个单词保存在内存中，以便您可以在需要时打印它。

使用它，如果您知道如何读取文本文件并从其内容中提取单个单词，则该解决方案应该是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:31:20.587

我不会给你完整的代码，因为这看起来像家庭作业，所以你真的应该从中学习。我会给你一些帮助。

首先，研究将文件读入字符串 -[如何从文件内容创建 Java 字符串？](https://stackoverflow.com/questions/326390/how-to-create-a-java-string-from-the-contents-of-a-file). 这应该让你得到一个字符串中的文件文本。

接下来看看 String 上的 .split 方法。它可以在任何字符上拆分字符串，比如空格“”字符？[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split(java.lang.String)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split(java.lang.String))

现在你有一个字符串中的单词数组。所以只需遍历数组寻找“like”，简单的字符串比较，然后打印出一个前后。

简单的。希望有帮助。

# java - 使用 Shell 脚本检查进程

> ID：14500211
> 
> 赞同：1
> 
> 时间：2013-01-24T11:25:20.490
> 
> 标签：java, linux, sh

我正在开发一个 Java 程序，它检查正在运行的进程，如果没有启动该进程。在我的上下文中，我正在执行这样的 .sh 文件。

```
#!/bin/sh
echo "Hello World..."
cnt=`ps -eaflc --sort stime | grep clientApplication.jar | grep -v grep | wc -l`
if [ $cnt = 3 ] 
then
        echo "Services for Pigeon are already running..."
else
        echo "Starting Services for Pigeon..."
        echo `java -jar clientApplication.jar`
fi 
```

但它不起作用。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:23:57.343

我不确定。试试这个

```
cnt=$(`ps -eaflc --sort stime | grep clientApplication.jar | grep -v grep | wc -l`)
if[$cnt -eq 3]; then 
```

试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:54:41.343

使用测试表达式有效。希望这可以帮助 ！！

```
echo "Hello World"
cnt=`ps -eaflc --sort stime | grep clientApplication.jar |grep -v grep | wc -l`
if(test $cnt -eq 3) ;
then
    echo "Services for Pigeon are already running..."
else
    echo "Starting Services for Pigeon..."
    echo `java -jar clientApplication.jar`
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:23:31.873

echo 不会执行任何操作，只会打印双引号中的内容。因此，如果我了解您的要求，您应该这样做而不是

echo "Hello World" cnt= `ps -eaflc --sort stime | grep clientApplication.jar |grep -v grep | wc -l` if(test $cnt -eq 3) ; 然后回显“Pigeon 的服务已经在运行...” else echo “正在为 Pigeon 启动服务...” `/bin/java -jar clientApplication.jar` fi

希望这会奏效，我现在还没有测试过

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T14:49:56.527

1.  等式检查应该是==，=是赋值
2.  我会使用 $(expr) 而不是 `expr`
3.  if(expr) 不是 if[expr]
4.  不确定您是否打算回显 java 行，它不会通过告诉它打印来启动 jar。我摆脱了回声，因为你说你想开始它。

所以如果你试试这个，它会起作用：

```
    #!/bin/sh
    回声“你好世界...”
    cnt=$(ps -eaflc --sort stime | grep clientApplication.jar | grep -v grep | wc -l)
    如果（$cnt==3）
    然后
        echo "Pigeon 服务已经在运行..."
    别的
        echo "开始为鸽子服务..."
        java -jar clientApplication.jar
    菲

```

# iphone - 为什么 __NSCFDictionary 不是一种类 NSDictionary

> ID：14500229
> 
> 赞同：2
> 
> 时间：2013-01-24T11:26:23.797
> 
> 标签：iphone, objective-c, json, nsdictionary

在`JSON`解析期间（使用 AFNetwork json getter 完成），我有这段代码：

```
if (![[data class] isKindOfClass:[NSDictionary class]]) {
    DLog(@"%@ was not kind of class NSDictionary",[data class]);
    return;
} 
```

但是由于某些原因，这`If`句话变成了真的，函数返回：

```
> __NSCFDictionary was not kind of class NSDictionary 
```

但不应该`__NSCFDictionary`是专门的一类`NSDictionary`吗？或者如果这是错误的验证方式，那我该怎么做？

# 更新 ：

我试着把它转过来，像这样：

```
 if (![[NSDictionary class] isKindOfClass:[data class]]) {
            DLog(@"%@ was not kind of class NSDictionary",[data class]);
            return;
        } 
```

仍然不起作用：

> __NSCFDictionary 不是类 NSDictionary

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T11:38:20.767

根据[文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/isKindOfClass:)

```
isKindOfClass:
Returns a Boolean value that indicates whether the receiver is an instance of given class or an instance of any class that inherits from that class. (required) 
```

您正在使用

```
[data class] 
```

这将返回一个字符串..您必须仅使用对象/实例，即

```
if (![data isKindOfClass:[NSDictionary class]]) 
```

# c++ - 重复句柄错误：error_invalid_handle

> ID：14500232
> 
> 赞同：2
> 
> 时间：2013-01-24T11:26:31.570
> 
> 标签：c++, windows, handle

我正在尝试使用 DuplicateHandle 函数将句柄从 process1 传递到 process2。我使用 CreateFile 函数获取句柄：

```
HANDLE COMportHandle;
COMportHandle = CreateFile(TEXT("COM5"),
                           GENERIC_ALL | PROCESS_DUP_HANDLE,
                           0,
                           0,
                           OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,
                           0); 
```

在第二个进程中，我先通过共享内存从process1获取进程ID，然后尝试复制句柄：

```
HANDLE pr1handle, CPH, COMportHandle;
pr1handle = OpenProcess(PROCESS_DUP_HANDLE,FALSE,process_id);
if(!DuplicateHandle(pr1handle,COMportHandle,GetCurrentProcess(),&CPH,PROCESS_DUP_HANDLE,FALSE,0))
    printf("Error: %d\n",GetLastError()); 
```

然后我得到 ERROR_INVALID_HANDLE。进程不相关，我运行第一个打开 COM 端口，然后希望能够使用第二个进程从中读取。有人能告诉我钓点在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:32:53.757

在此代码中：

```
HANDLE pr1handle, CPH, COMportHandle;
pr1handle = OpenProcess(PROCESS_DUP_HANDLE,FALSE,process_id);
if(!DuplicateHandle(pr1handle,COMportHandle,GetCurrentProcess(),&CPH,PROCESS_DUP_HANDLE,FALSE,0))
    printf("Error: %d\n",GetLastError()); 
```

您引入了一个新的、未初始化的 COMportHandle。因此，假设这是实际代码，我一点也不惊讶 COMportHandle 无效”。您将需要从第一个进程中获取 COMportHandle 的实际值。

# iphone - 地图的 didSelectAnnotationView 在 iphone sdk 中只调用一次

> ID：14500238
> 
> 赞同：1
> 
> 时间：2013-01-24T11:26:45.800
> 
> 标签：iphone, ios, objective-c, xcode, mkmapview

我在我的应用程序中实现了一个地图视图。

我实现了一个 didselect 注释方法。

在这种方法中，我打开一个弹出窗口。它工作正常。但是当弹出框被关闭并尝试再次单击注释时，则不再调用方法。

如果我单击了除先前选择注释之外的其他注释，则将调用该方法。

我的代码如下：

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)aView {

    ReadingDatabaseAppDelegate *appDelegate = (ReadingDatabaseAppDelegate *)[[UIApplication sharedApplication] delegate];

    if([self isPad])
    {
        detailsView *popUp=[[detailsView alloc] initWithNibName:@"detailsView_ipad" bundle:nil];

        popView = [[UIPopoverController alloc]initWithContentViewController:popUp];

        popView.delegate =self;

        [popView setPopoverContentSize:CGSizeMake(400, 400)];

        AnnotationImageView *myLocationImage = (AnnotationImageView *)aView;
        popUp.locationID = myLocationImage.locationID;

        NSLog(@"%d",popUp.locationID);

        popUp.list=listdata;
        detView.fromMapView = TRUE;

        if (appDelegate.preferenceRow == 1) {
            detView.title = @"ATM Details";
            popUp.isBranch = 0;
        }
        else {
            detView.title = @"Branch Details";
            popUp.isBranch = 1;
        }

        CGPoint annotationPoint = [mapView convertCoordinate:aView.annotation.coordinate toPointToView:mapView];
        float boxDY=annotationPoint.y;
        float boxDX=annotationPoint.x;
        CGRect box = CGRectMake(boxDX,boxDY,5,5);
        UILabel *displayLabel = [[UILabel alloc] initWithFrame:box];

        [popView presentPopoverFromRect:displayLabel.frame inView:mapView permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
        [displayLabel release];

    }

} 
```

** 我该如何解决这个问题？？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T11:37:13.477

当您关闭弹出框时，使用 取消选择注释`-deselectAnnotation:animated:`。

# tcl - TCL 程序登录远程服务器并执行命令

> ID：14500239
> 
> 赞同：1
> 
> 时间：2013-01-24T11:26:46.727
> 
> 标签：tcl, expect, tclsh

我需要编写一个TCL程序，通过它我可以登录到远程服务器，然后在远程服务器上执行命令；我还需要从远程服务器获取输出。

**编辑：**

感谢 Kostix 的回复。我的要求是 TCL 脚本应该能够登录到远程服务器。我计划通过`expect`机制发送密码，然后我计划发送命令。我的示例代码如下所示：

```
set prompt "(%|>|\#|\\\$) #"

spawn /usr/bin/ssh $username@$server
expect {
    -re "Are you sure you want to continue connecting (yes/no)?" {
        exp_send "yes\r"
        exp_continue
      #continue to match statements within this expect {}
    }
    -nocase "password: " {
       exp_send "$password\r"
       interact
   }

} 
```

我可以用这个登录，但不知道如何扩展这个代码来发送命令。我尝试了几种方法，但没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:22:26.367

由于您即将使用 SSH，因此您可能根本不需要 Tcl 或 Expect 来执行此任务：由于 SSH 代表“Secure SHell”，远程执行命令所需要做的就是告诉 SSH 要执行什么程序登录后在远程端生成（如果你不这样做，SSH 会生成登录用户的所谓“登录 shell”），然后 SSH 将你在其标准输入和通道上传递给 SSH 客户端的程序提供给该程序返回远程程序写入其标准输出流的内容。

要通过 SSH 自动记录日志，有几种方法：

*   使用公钥进行身份验证：如果私有（客户端）密钥不受密码保护，则此方法根本不需要编写脚本——您只需告诉 SSH 客户端使用什么密钥。
*   “键盘交互”身份验证（基于密码）。这就是大多数人认为 SSH 的全部意义所在（这是错误的）。编写脚本有点困难，因为 SSH 坚持从“真实终端”获取密码。可以通过使用 Expect 或简单地通过使用该[`sshpass`](http://sourceforge.net/projects/sshpass/)程序包装对 SSH 客户端的调用来欺骗它。
*   SSH 客户端和服务器也可能支持基于 Kerberos 或基于 GSSAPI 的身份验证。使用它可能不需要任何脚本，因为它从系统（本地用户的会话）派生身份验证凭据。

因此，接下来要执行的步骤是缩小您的要求：

1.  必须支持哪种身份验证？
2.  哪个程序应该执行您打算从客户端发送的命令？那会是一个 Unix shell 吗？一个 Tcl 外壳？还有什么？
3.  该远程命令是否应该使用某种程度的交互性编写脚本（我们向它发送一些内容，然后等待回复并根据它决定接下来要发送什么）还是批处理样式的脚本可以？

在回答这些问题之前，最初的问题没有什么意义，因为它太宽泛，因此不符合 stackoverflow 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-02T09:42:16.973

服务器上的命令可以使用这样的 exec 命令执行，

```
set a [exec ls -lrta]
puts $a 
```

[OR] 可以像上面那样继续期望和执行循环；我正在制作一个可以轻松运行 linux 命令的 proc；

```
package require Expect

proc ExecCommand {username server password cmd  } {
    spawn /usr/bin/ssh $username@$server
        expect {
            ".*(yes/no)? "               {exp_send "yes\r" ; exp_continue}
            ".*password: "               {exp_send "$password\r";exp_continue}
            ".*$ "                       {exp_send -i $spawn_id "$cmd \r";
                expect {
                    ".*$ " { return 1; close }
                }
            }
        }
}

set result [ExecCommand "admin" "0" "qwerty" "ls"]
if {$result > 0 } {
    puts "Command succesfully executed\n"
} else {
    puts "Failed to execute\n"
} 
```

# git - 如何在 github 中的两个分支之间为单个文件生成差异

> ID：14500240
> 
> 赞同：133
> 
> 时间：2013-01-24T11:26:53.963
> 
> 标签：git, github

我需要为单个文件生成一个差异，以显示两个版本之间的差异，这实际上是 github 中的标签。然后我想通过电子邮件将此差异发送给某人，因此差异的 github URL 将是理想的。github 比较视图将允许我对所有更改的文件执行此操作，但这并不好，因为我的存储库中有数千个文件。

我可以在命令行中按如下方式执行此操作，但这无济于事，因为我需要通过电子邮件将差异发送给某人：

```
git diff tag1 tag2 -- path/to/file 
```

我找到了这里讨论的命令行版本： [如何查看指定文件中本地分支和远程分支之间的差异？](https://stackoverflow.com/questions/10611112/how-can-i-see-the-differences-in-a-designated-file-between-a-local-branch-and-a)

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-01-24T14:18:46.497

GitHub 只公开了显示两次提交之间差异的方式。

如果这些标签实际上指向提交，则 Url 格式将类似于

**`https://github.com/{user}/{repository}/compare/{from-tag}...{until-tag}`**

例如，**[https://github.com/libgit2/libgit2sharp/compare/v0.9.0...v0.9.5](https://github.com/libgit2/libgit2sharp/compare/v0.9.0...v0.9.5)**显示了 LibGit2Sharp 项目的两个版本之间的差异。此差异包括所有修改后的文件。

如果要检索以特定文件为目标的 URL：

*   切换到“**文件已更改”**选项卡

![更改标签](../Images/05eca17ab9778c321c7277c9da88307d.png)

*   点击**Show Diff Stats**按钮（这将显示修改文件列表作为链接）

![显示差异](../Images/1d352f6cfbd508164e3f1c7ea1e0c85e.png)

*   将您所追求的特定文件的链接复制到剪贴板......和Tada！你完成了。

例如，鉴于上面的差异，链接**[https://github.com/libgit2/libgit2sharp/compare/v0.9.0...v0.9.5#diff-11](https://github.com/libgit2/libgit2sharp/compare/v0.9.0...v0.9.5#diff-11)**将指向`LazyFixtures.cs`版本 v0.9.0 和v0.9.5。

## 更新

根据您的评论指出您的差异太大而无法通过 Web 界面呈现，那么恢复到良好的旧命令行工具怎么样？您可以将 diff 的输出重定向到一个文件，然后将该文件作为电子邮件附件发送。

```
$ git diff v0.9.0 v0.9.5 -- LibGit2Sharp.Tests/LazyFixture.cs > /tmp/lazyfixture.diff 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-02-25T16:05:23.033

当以下问题适用时，这是我的解决方法。

> 这个对比很大！我们只显示最近的 250 次提交

将要比较的文件的原始视图复制到[https://gist.github.com/](https://gist.github.com/)。使用您要比较的两个特定提交点。从较旧的提交开始。

[当您单击“修订”时， https://gist.github.com/](https://gist.github.com/)有一个很好的并排差异视图。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-03T08:57:15.747

答案适用于只想查看（不下载）GITHUB 网页中文件的代码更改历史/修订以进行先前签入的人。

转到 github 中的那个文件，然后选择**HISTORY**。这将打开带有签入评论链接列表的页面，如下所示。

[![在此处输入图像描述](../Images/6c907013b9ebd77a069aaa85453072f6.png)](https://i.stack.imgur.com/IBmDu.png) 单击它将显示代码更改。点击历史后；您可以单击包以查看包级别的所有文件签入。

在 Eclipse 中，您可以使用**EGit**插件和文件上的“右键单击 -> 比较”来比较历史记录。 [如何在 Eclipse 中比较 git 中的两个修订版？](https://stackoverflow.com/questions/1396649/how-can-i-compare-two-revisions-in-git-in-eclipse)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-05T04:14:11.893

我使用[nulltoken 的答案](https://stackoverflow.com/a/14503451/1601953)整理了一个简单的便利脚本，用于从命令行提取 GitHub 上的两个提交之间的差异。

您可以[在 gist 上找到完整的脚本](https://gist.github.com/fritz-c/d5b755aeacbd6cf68b7a6463f8dbe1c5)，但这里有一些好的部分：

```
# Parse the following patterns for repo urls to get the github repo url
# https://github.com/owner/repo-name.git
# git@github.com:owner/repo-name.git
BASE_URL="https://github.com/""$(git config --get remote.origin.url | sed 's/.*github\.com[/:]\(.*\).git/\1/')""/compare"

if [[ "$#" -eq 1 ]]; then
  if [[ "$1" =~ .*\.\..* ]]; then
    # Handle "git hubdiff fromcommit..tocommit"
    open "${BASE_URL}/$(git rev-parse "${1/\.\.*/}")...$(git rev-parse ${1/*\.\./})"
  else
    # Handle "git hubdiff fromcommit"
    open "${BASE_URL}/$(git rev-parse "$1")...$(git rev-parse HEAD)"
  fi
elif [[ "$#" -eq 2 ]]; then
  # Handle "git hubdiff fromcommit tocommit"
  open "${BASE_URL}/$(git rev-parse "$1")...$(git rev-parse "$2")"
fi 
```

它接受分支、提交和任何其他可以通过`git rev-parse`. 我使用`open`了 ，它只适用于 macOS 打开网页，所以如果你在不同的环境中，你会想要调整它。

与 nulltoken 的回答一样，为了指向 diff 中的单个文件，您必须单击文件的标题以使锚字符串出现在 url 栏中，然后您可以复制它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-13T01:55:02.893

由于这仍然是不可能的，这里有一个基于浏览器的 diff-tool 方法。它不利用自动化，只需要安装 Chrome 扩展程序的能力：

1.  为 Chrome 浏览器安装 Diff 工具：[https ://chrome.google.com/webstore/detail/diff-tools-text-pdf-doc-o/lkcdojpmjehlniamnglpjlldkoonlomb](https://chrome.google.com/webstore/detail/diff-tools-text-pdf-doc-o/lkcdojpmjehlniamnglpjlldkoonlomb)
2.  打开差异工具 ( [http://iblogbox.com/devtools/diff/](http://iblogbox.com/devtools/diff/) )
3.  从 GitHub 转到 BEFORE commit、tag 或 branch，打开文件，然后单击`Raw`按钮以获取原始文件视图，全选并复制，然后放入 Diff Tools 中的左侧文本框
4.  重复步骤 3，但对于 AFTER 文件并粘贴到 Diff Tools 的右侧框中
5.  单击`Compare Now`并执行您的 diff ad-hoc

# android - 在三星手机中使用自定义摄像头进行屏幕定位

> ID：14500244
> 
> 赞同：3
> 
> 时间：2013-01-24T11:26:58.483
> 
> 标签：android

在我的应用程序对自定义相机的要求中，因此开发了一款，到目前为止一切正常，也可以拍摄照片，但是当我在横向模式下使用三星 Galaxy ace android 手机（2.3）拍照时，它还可以，但是在进入纵向模式时，视图图片以 90 度角移动到左侧。正如您在我的代码中看到的那样，我也尝试更改表面位置，但没有任何反应。这是 Myactivity 类的代码

```
package com.goutam.test_camera;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.content.res.Configuration;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.hardware.Camera;
import android.hardware.Camera.PictureCallback;
import android.util.Log;
import android.view.Display;
import android.view.Menu;
import android.view.View;
import android.view.WindowManager;
import android.view.View.OnClickListener;
import android.widget.FrameLayout;
import android.widget.HorizontalScrollView;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.Toast;

public class CameraclassActivity extends Activity implements OnClickListener,
        PictureCallback {
    ImageButton take_picture, retake_button, save_picture, setting_button;
    FrameLayout camerapreviewsurface;
    Previewclass cameradisplayclass;
    ImageView capture_image;
    HorizontalScrollView myscrollview;
    private Camera myowncamera;

    byte[] finalimage;
    Bitmap pic_cap_bitmap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_portrait);
        take_picture = (ImageButton) findViewById(R.id.imageButton1);
        //
        retake_button = (ImageButton) findViewById(R.id.imageButton3);
        //
        save_picture = (ImageButton) findViewById(R.id.imageButton4);
        //
        setting_button = (ImageButton) findViewById(R.id.imageButton2);
        //
        capture_image = (ImageView) findViewById(R.id.imageView1);
        //
        myscrollview = (HorizontalScrollView) findViewById(R.id.horizontalScrollView1);
        //
        take_picture.setOnClickListener(this);
        retake_button.setOnClickListener(this);
        save_picture.setOnClickListener(this);
        //
        retake_button.setVisibility(View.INVISIBLE);
        save_picture.setVisibility(View.INVISIBLE);
        setting_button.setVisibility(View.INVISIBLE);
        capture_image.setVisibility(View.INVISIBLE);
        myscrollview.setVisibility(View.INVISIBLE);
        //
        myowncamera = Camera.open();
        camerapreviewsurface = (FrameLayout) findViewById(R.id.framelayout1);
        cameradisplayclass = new Previewclass(this, myowncamera);
        camerapreviewsurface.addView(cameradisplayclass);
        Log.i("ACTIVITY", "ON CREATE");
    }

    @Override
    public void onClick(View view) {
        switch (view.getId()) {
        case R.id.imageButton1:
            takePicture();
            break;
        }

    }

    private void takePicture() {
        // TODO Auto-generated method stub
        take_picture.setVisibility(View.INVISIBLE);
        cameradisplayclass.takepicture(this);

    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        // TODO Auto-generated method stub
        // setContentView(R.layout.layout_portrait);
        super.onConfigurationChanged(newConfig);
    }

    @Override
    public void onPictureTaken(byte[] data, Camera camera) {
        // TODO Auto-generated method stub
        finalimage = data;
        // camera.stopPreview();
        this.myowncamera = camera;
        retake_button.setVisibility(View.INVISIBLE);
        camerapreviewsurface.setVisibility(View.INVISIBLE);
        setting_button.setVisibility(View.VISIBLE);
        capture_image.setVisibility(View.VISIBLE);
        Toast.makeText(getApplicationContext(), "PICTURE TAKEN", 0).show();
        new DisplayImageTask().execute(finalimage);
    }

    private class DisplayImageTask extends AsyncTask<byte[], Void, Bitmap> {
        @Override
        protected Bitmap doInBackground(byte[]... parameter) {
            pic_cap_bitmap = BitmapFactory.decodeByteArray(finalimage, 0,
                    finalimage.length);
            return pic_cap_bitmap;
        }

        @Override
        protected void onPostExecute(Bitmap result) {
            capture_image.setImageBitmap(pic_cap_bitmap);
            super.onPostExecute(result);
        }

        @Override
        protected void onProgressUpdate(Void... values) {
            Toast.makeText(getApplicationContext(), "DISPLAYING IMAGE", 0)
                    .show();
            super.onProgressUpdate(values);
        }

    }

    // @Override
    // public boolean onCreateOptionsMenu(Menu menu) {
    // // Inflate the menu; this adds items to the action bar if it is present.
    // getMenuInflater().inflate(R.menu.layout_portrait, menu);
    // return true;
    @Override
    protected void onPause() {
        Log.i("ACTIVITY", "ON PAUSE");
        System.gc();
        this.finish();
        super.onPause();
    }

    @Override
    protected void onResume() {

        super.onResume();
    }

    @Override
    public void onBackPressed() {
        System.gc();
        this.finish();
        myowncamera.release();
        super.onBackPressed();
    }

    @Override
    protected void onDestroy() {
        this.finish();
        System.gc();
        super.onDestroy();
    }
} 
```

* * *

这是我的surfaceholder的预览类的代码来保存表面视图

```
package com.goutam.test_camera;

import java.io.IOException;

import android.app.Activity;
import android.content.Context;
import android.hardware.Camera;
import android.hardware.Camera.Parameters;
import android.hardware.Camera.PictureCallback;
import android.util.Log;
import android.view.Display;
import android.view.SurfaceHolder;
import android.view.SurfaceHolder.Callback;
import android.view.Surface;
import android.view.SurfaceView;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Toast;

public class Previewclass extends SurfaceView implements Callback {
    private Camera mcamera;
    boolean ispreviewing = false;
    // WindowManager manager;
    SurfaceHolder holder;

    public Previewclass(Context context, Camera mycamera) {

        super(context);
        this.mcamera = mycamera;
        // manager=(WindowManager)
        // context.getSystemService(Context.WINDOW_SERVICE);
        holder = this.getHolder();
        holder.addCallback(this);
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        // mcamera=null;
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        Log.i("CAMERA", "ON SURFACE CHANGE");

        try {
            mcamera.setPreviewDisplay(this.holder);
            mcamera.startPreview();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        // if(ispreviewing==true)
        // {
        // mcamera.stopPreview();
        // }
        // Parameters mparameters=mcamera.getParameters();
        // Display display=manager.getDefaultDisplay();
        // if(display.getRotation()==Surface.ROTATION_0)
        // {
        // mparameters.setPreviewSize(height, width);
        // mcamera.setDisplayOrientation(90);
        // }
        // if(display.getRotation()==Surface.ROTATION_90)
        // {
        // mparameters.setPreviewSize(width, height);
        // }
        // if(display.getRotation() == Surface.ROTATION_180)
        // {
        // mparameters.setPreviewSize(height, width);
        // }
        // if(display.getRotation() == Surface.ROTATION_270)
        // {
        // mparameters.setPreviewSize(width, height);
        // mcamera.setDisplayOrientation(180);
        // }
        // mcamera.setParameters(mparameters);
        // previewCamera();
    }

    // private void previewCamera()
    // {
    // try {
    // mcamera.setPreviewDisplay(this.holder);
    // mcamera.startPreview();
    // ispreviewing = true;
    // } catch (IOException e) {
    // Log.e("CAMERA DISPLAY", "ERROR");
    // e.printStackTrace();
    // }
    //
    // }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        Log.i("CAMERA", "ON SURFACE CREATED");
        try {

            mcamera.setPreviewDisplay(holder);
            ispreviewing = true;
            mcamera.startPreview();
        } catch (IOException e) {
            Log.e("CAMERA OPENING", "ERROR");
            e.printStackTrace();
        }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        Log.i("CAMERA", "ON SURFACE DESTROY");
        this.mcamera = null;
        // this.manager=null;
        this.holder = null;
        // mcamera.stopPreview();
        // this.mcamera.release();

    }

    public void takepicture(PictureCallback imageCallback) {
        mcamera.takePicture(null, null, imageCallback);

    }

} 
```

* * *

这是我的 androidmanifest.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.goutam.test_camera"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.CAMERA" />

    <uses-feature android:name="android.hardware.camera" />
    <uses-feature
        android:name="android.hardware.camera.autofocus"
        android:required="false" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.goutam.test_camera.CameraclassActivity"
            android:configChanges="orientation|keyboardHidden"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

> 我被这件事困扰了很长时间，但没有找到任何解决方案，因为我是 android 新手，无法识别 android 设备上的行为。但有一件事是相同的代码在 htc 制造的 android 手机上工作得很好。所以，我可以假设这是制造商提供的硬件默认设置。如果有人想要 .apk 文件进行测试，我可以发送到他们。电子邮件 id:gkundu07@gmail.com 对不起我的语言，感谢您收听我。任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:37:52.927

实际上这是因为三星 Galaxy Ace 的默认相机是横向的。因此，如果您将其更改为纵向，它会自动旋转拍摄的图像，就像在横向模式下拍摄的图像一样。

找到屏幕的方向（使用下面的代码）

```
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) 
{
    super.onRestoreInstanceState(savedInstanceState);
    if (savedInstanceState != null) 
    {
        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT)
        {
            // your code 
        }
        else if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE)
        {
            // your code
        }

        savedInstanceState.getInt("param");
        Log.e("on restore saved state",""+savedInstanceState.getInt("param"));
    }
} 
```

如果是肖像

旋转图像并保存在 SDCard 中，或者如果您只是在 imageView 中显示它，请旋转并设置为其 BackgroundResource

以下是将其旋转到 90 度的代码，

```
public static Bitmap rotate(Bitmap b, int degrees) 
{
    if (degrees != 0 && b != null) 
    {
        Matrix m = new Matrix();

        m.setRotate(degrees, (float) b.getWidth() / 2, (float) b.getHeight() / 2);
        try {
            Bitmap b2 = Bitmap.createBitmap(b, 0, 0, b.getWidth(), b.getHeight(), m, true);
            if (b != b2) 
            {
                b.recycle();
                b = b2;
            }
        } catch (OutOfMemoryError ex) 
        {
           throw ex;
        }
    }
    return b;
} 
```

# php - 在下载之前将字节添加到文件中

> ID：14500251
> 
> 赞同：1
> 
> 时间：2013-01-24T11:27:23.503
> 
> 标签：php, file-io

是否可以在请求下载文件时在文件中添加一些字节，而无需使用 PHP 在服务器上的临时位置写入文件。

例如，考虑一个内容为“originaltext”的文件 somefile.txt。如果请求下载文件，则下载的文件的内容为“prependedtext_originaltext”

我希望无需在服务器上创建文件的临时副本即可实现此目的，因为该文件可能非常大，并且如果大量用户请求该文件，服务器空间将迅速填满。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:31:55.063

当然，这是可能的。

现在这取决于您提供文件的方式。如果您直接链接到文件，则必须在您的 Web 服务器中创建一个重写规则，这会将请求的文件传递给您的 PHP 脚本[1]。然后，该脚本将输出您的“prependtext”以及文件的内容。不要忘记添加适当的 HTTP 标头[2]！

如果您已经通过 PHP 脚本提供文件，那么您只需要在输出文件内容之前输出您的“前置文本”。

**评论：**

[1] 要对大文件提高内存效率，请使用[`readfile()`](http://php.net/readfile)

[2] 对于文本文件，最重要的标题是`Content-type: text/plain`（另见[`header()`](http://php.net/header)和的文档[`readfile()`](http://php.net/readfile)）

# iphone - 如何从 SudzC 下载源代码

> ID：14500255
> 
> 赞同：0
> 
> 时间：2013-01-24T11:27:31.987
> 
> 标签：iphone, ios, ipad, sudzc

我从 sudzC 生成了一个源代码，但我没有找到下载选项，请告诉我如何下载它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T12:30:25.360

您可以参考[wsdl2objc](http://code.google.com/p/wsdl2objc/)。以下是[它如何工作](http://code.google.com/p/wsdl2objc/wiki/UsageInstructions)的说明。

希望有帮助。

# jquery - jQuery ajax 通过 POST 发送数据：正在发送错误的数据

> ID：14500257
> 
> 赞同：0
> 
> 时间：2013-01-24T11:27:37.083
> 
> 标签：jquery, ajax, post

单击按钮时发送数据的位：

```
$.ajax({
    type: "POST",
    url: "<?php echo base_url(); ?>coformation/appoint/",
    data: {
            "director":director.attr('checked'),
            "shareholder":shareholder.attr('checked'),
            "secretary":secretary.attr('checked'),
            "firstname":firstname.attr('value'),
            "lastname":lastname.attr('value'),
            "birthday":birthday.attr('value'),
            "birthmonth":birthmonth.attr('value'),
            "birthyear":birthyear.attr('value'),
            "occupation":occupation.attr('value'),
            "nationality":nationality.attr('value'),
            "security1":security1.attr('value'),
            "securityletters1":securityletters1.attr('value'),
            "security2":security2.attr('value'),
            "securityletters2":securityletters2.attr('value'),
            "security3":security3.attr('value'),
            "securityletters3":securityletters3.attr('value'),
            "residentialaddress":residentialaddr.text(),
            "serviceaddress":serviceaddr.text()
          },
    success: function(response) { 
            alert(response.message);
    },
    dataType: "json"
}); 
```

但是当我在目标 URL 中使用 var_dump($_POST) 时，这个过程似乎只发送了 2 个字段：

```
array (size=2)  'residentialaddress' => string 'XXX' (length=34)  'serviceaddress' => string '' (length=0) 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:31:31.483

您正在那里发布属性[attr()](http://api.jquery.com/attr/) ..请通过链接查看 attr 的实际作用..

你甚至可以尝试做

```
console.log(director.attr('checked'));  //which you 'll notice that this is not you want

 "director":director.attr('checked'),.... 
```

这发送真或假..

那应该是

```
 "director":director.val(),"shareholder":shareholder.val(),.... 
```

[val()](http://api.jquery.com/val/)为您提供选中元素的值，如果复选框或单选 .. 文本如果是文本框 .... 我认为这就是你想要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:41:02.147

当然只会发送其中两个：

```
data: {
        "director":director.attr('checked').val(),
        "shareholder":shareholder.attr('checked').val(),
        "secretary":secretary.attr('checked').val(),
        "firstname":firstname.val(),
        "lastname":lastname.val(),
        "birthday":birthday.val(),
        "birthmonth":birthmonth.val(),
        "birthyear":birthyear.val(),
        "occupation":occupation.val(),
        "nationality":nationality.val(),
        "security1":security1.val(),
        "securityletters1":securityletters1.val(),
        "security2":security2.val(),
        "securityletters2":securityletters2.val(),
        "security3":security3.val(),
        "securityletters3":securityletters3.val(),
        "residentialaddress":residentialaddr.text(), //<------it gets the text
        "serviceaddress":serviceaddr.text()          //<------it gets the text
      }, 
```

您的所有其他项目只是创建不发送值的对象`.val()`，因此您应该在所有其他项目之后追加`.val()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:32:07.963

如果数据对象中键的值未定义，则不会发送示例：

```
data: {
  'first': 'text',
  'second': undefined
} 
```

第二个不会发送

# android - 壁纸更改时如何停止 LiveWallpaper 应用程序

> ID：14500259
> 
> 赞同：1
> 
> 时间：2013-01-24T11:27:42.590
> 
> 标签：android, live-wallpaper

[我使用 opengl http://www.rbgrn.net/content/354-glsurfaceview-adapted-3d-live-wallpapers](http://www.rbgrn.net/content/354-glsurfaceview-adapted-3d-live-wallpapers)制作了动态壁纸。但是，当我从列表中选择其他壁纸时，壁纸已更改，但我的应用程序仍在后台运行。任何人都可以建议在其他壁纸运行时如何停止它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:18:53.180

它应该自动停止。如果您已覆盖`onDestroy()`，请确保您调用`super.onDestroy()`.

如果这没有帮助，您可以在调用后使用断点调试动态壁纸，`Debug.waitForDebugger()`以查看应用程序的哪个部分仍在运行。

# sql - 将数字模式值替换为所需的单词模式

> ID：14500262
> 
> 赞同：0
> 
> 时间：2013-01-24T11:27:50.257
> 
> 标签：sql, oracle, substitution

我在表格中有一个列，通常填充 10 或 11 个值。我需要做一份报告，需要将这 10 个值转换为“Class1”，将 11 转换为“Class2”文本，在任何其他情况下为 null。

我过去做过，但忘记将其保存为片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:52:08.457

使用[`case`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/expressions004.htm)可能是最干净的解决方案：

```
select case my_column
    when 10 then 'Class1'
    when 11 then 'Class2'
    else null
    end
from my_table; 
```

尽管已经说过，将文本等价物存储在表中通常可能更可靠，因此您可以加入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:32:53.453

您可以使用`REPLACE`, 或`DECODE` and`NVL`作为空值，或`CASE`.

# sql-server - 具有批量更新避免游标的 SQL Server

> ID：14500264
> 
> 赞同：0
> 
> 时间：2013-01-24T11:27:55.000
> 
> 标签：sql-server, performance, cursor, updating

我想避免光标的性能问题。我要解决的问题是：使用由 UDF 计算的结果更新主表中每条记录（大约 6000000）（通过使用一个更新语句）上的列（VARCHAR），该 UDF 本身应该更新另一个计数器柜台表。
- 问题是 UDF 无法更新 Countertable，因为它是副作用。- 由于 READONLY 标志，它也不能更新临时表或变量表。- 我在主表上使用了一个更新触发器，但该触发器由一个更新语句触发一次，该语句存储在一个名为 insert 的表中。

我选择的解决方案是使用光标，如下所示。

1.  从主表创建一个游标。
2.  获取第一行
3.  从 Counter 表中获取计数器
4.  计数器++
5.  调用 PROC 来计算结果、计数器等
6.  使用 PROC 的结果更新主表
7.  更新计数器表
8.  获取另一行

但请相信我，大约 125 小时（没办法）太慢了。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:58:34.823

我假设您的主表中有另一列标识该行，否则计数器将没有多大意义。

你可以试试这个吗？如果我正确理解了您的问题，则不需要函数或光标。只是一个临时表，因为您不能同时读取和更新表。

```
INSERT INTO tmpTable
SELECT
yourPrimaryKey, sex, YEAR(dob) AS dobyear, ROW_NUMBER() OVER (PARTITION BY YEAR(dob) ORDER BY dob) AS counter
FROM
mainTable;

UPDATE mainTable
SET code = CONCAT(tmpTable.sex, tmpTable.dobyear, counter)
FROM
mainTable
INNER JOIN tmpTable
ON mainTable.yourPrimaryKey = tmpTable.yourPrimaryKey; 
```

它没有经过测试，请原谅任何语法错误或其他任何东西。

# java - 关于方法重载的说明

> ID：14500266
> 
> 赞同：0
> 
> 时间：2013-01-24T11:28:03.110
> 
> 标签：java, string, overloading

我有以下代码，我需要对*重载*概念进行一些说明。

```
class Overload{
    static void print(Object o){
        System.out.println("object");
    }
    static void print(String s){
        System.out.println("string");
    }
    public static void main(String...args){
        print("Hello");
    }
} 
```

当我执行这个时，输出是字符串。即使`object`是超类，为什么它显示`string`而不是`object`？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T11:31:34.173

这种情况下的规则是：

> 更具体的签名将适用

`String`比 更具体`Object`，这`print(String)`就是使用的原因。例如，在你的 中尝试使用`print(null)`，`main`你会发现这样的代码甚至无法编译，因为编译器无法区分`null`是 a`String`还是 an`Object`

查看[Oracle 重载教程](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:30:16.503

因为当有完全匹配时，在函数重载时，JVM不会考虑泛化。即它将寻找最适合匹配参数类型的方法。在这种情况下，“Hello”与 String 类型完全匹配。因为in比 in`String`更适合。因此不会考虑`String``Object`

```
static void print(Object o) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T11:30:21.977

之所以称为`string`打印，是因为您传递`"Hello"`的是`String`对象。

`String`还扩展了常规`Object`但重载的调用也是最高级的类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T11:30:33.227

目前，这个版本的重载方法执行：

```
static void print(String s){
    System.out.println("string");
} 
```

既然你这样打电话： `print("Hello");`

只有当且仅当没有找到正确的匹配版本时，才会发生数据转换。并为编译器找到完全匹配。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T11:35:17.580

首先`JVM`查看，如果未找到，则使用 String 超类的参数进行`print(String)`搜索。`print()`如果还没有找到，那么超类的超类`String`。并且这个算法一直持续到有`print(Object)`。或者报错

# javascript - 从输入字段中删除类型文本

> ID：14500270
> 
> 赞同：2
> 
> 时间：2013-01-24T11:28:08.523
> 
> 标签：javascript, html, css, responsive-design

注意：我是 Javascript 新手。

这是代码：

它来自html页面本身

```
<form action="#" id="ToolKeywordSearch">
  <input type="text" class="ProductFinderText"
          id="ToolSearchField"onblur="if(this.value=='')    
             {this.value='Enter Search Term ';}" 
                onclick="if (this.value == 'Enter Search Term ')
                  { this.value = ''; }" value="Enter Search Term " />
</form>

 ___________________________________
|  _____________________     ______ |      (restriction does not let me insert image)
| |                  |O |   |      ||
| |enter search term | \|   |Search||                      
|  ---------------------     ------ |
|___________________________________| 
```

它的作用是：按下搜索按钮时，它会打开搜索字段

搜索图像是背景：

```
#ToolSearchField {

 background:url(../../Content/images/search_but.png) no-repeat scroll 
    right center   transparent; 
```

光标：指针；}

如何删除搜索字段中的文本？使用 Javascript 或 CSS，都尝试了，但都没有成功。

```
<script type="text/javascript">
    var jo = document.getElementById("ToolSearchField").value;
    alert(jo);
</script>

I receive Enter Search Term as an output. 

Then if I insert remove(); instead, it doesn't do anything.

var jo = document.getElementById("ToolSearchField").value;
    jo.remove(); 
```

最终结果应该具有启动搜索操作的搜索按钮。

请告诉我，我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T11:33:49.630

您正在实例化的 var`jo`在您的第一行 javascript 之后具有字符串值“输入搜索词”。在下一行中，您将告诉这个字符串到`remove()`，这在原始元素中没有实现任何东西。

试试`document.getElementById("ToolSearchField").value = "";`吧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T12:44:34.157

看起来你真的想要一个占位符：

```
<input type="text" class="ProductFinderText"
    id="ToolSearchField"
    placeholder="Enter Search Term " /> 
```

然后[为旧版浏览器添加一个占位符 polyfill。](https://www.google.co.uk/search?q=placeholder%20polyfill&ie=utf-8&oe=utf-8&channel=suggest)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:33:24.537

在此处查看本教程：[http ://www.ozzu.com/javascript-tutorials/tutorial-watermark-text-boxes-html-javascript-jquery-t106384.html](http://www.ozzu.com/javascript-tutorials/tutorial-watermark-text-boxes-html-javascript-jquery-t106384.html)

本教程展示了如何使用 jQuery 实现您的效果。如果您是 Javascript 新手，那么我强烈建议您研究 jQuery，它使很多事情变得容易得多。

# java - 同样的老故事：Tomcat DBCP + MySQL，MySQLNonTransientConnectionException：连接关闭后不允许操作

> ID：14500272
> 
> 赞同：0
> 
> 时间：2013-01-24T11:28:25.937
> 
> 标签：java, mysql, tomcat, connection-pooling, apache-commons-dbcp

我在这里检查了有关此主题的相关问题，并在 Google 上搜索了一段时间。似乎我仍然不理解 Tomcat 的 DBCP 配置或机制中的某些东西。

我在以下位置配置了 Tomcat 6、DBCP 资源`server.xml`：

```
<Resource name="jdbc/myDB" auth="Container" description="Database connection"
  type="javax.sql.DataSource"
  driverClassName="com.mysql.jdbc.Driver"
  url="jdbc:mysql://myhost:3306/mydb?autoReconnectForPools=true&useUnicode=true"
  username="user"
  password="password"
  validationQuery="SELECT 1"
  testOnBorrow="true"
  testWhileIdle="true"
  timeBetweenEvictionRunsMillis="10000" minEvictableIdleTimeMillis="60000"
  maxActive="20" maxWait="20000" maxIdle="10"
  removeAbandoned="true" removeAbandonedTimeout="60" logAbandoned="true" /> 
```

我也找了mysql `wait_timeout`，它是默认的`28800`。

总之，我尝试了几个选项，但似乎问题是 mysql 连接达到了 28800 秒的空闲时间并且服务器关闭了它们。我认为该池应该以某种方式使用 and 来处理这种情况`validationQuery`，`testOnBorrow`但似乎我错了。

如果我`autoReconnect`在`url`空闲期后使用我的第一次查询尝试导致“ `...CommunicationsException: The last packet successfully received from the server was 157,493,261 milliseconds ago.`”但在此之后它工作正常。

如果我使用或不使用它 - 在空闲期（8 小时）之后，我每次都得到“ `autoReconnectForPools`” 。`url``.MySQLNonTransientConnectionException: No operations allowed after connection closed`

在这两种情况下，当应用程序加载时，事情都会顺利进行。因此，我得出结论，连接是从 mysql 一侧关闭的。

帮助，我错过了什么？我想在不更改 Mysql 中的 wait_timeout 的情况下解决这个问题。目标 - 稳定的应用程序，如果发生空闲时间，它可能会存活 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:02:02.737

不确定它是否会有所帮助，但在 Tomcat 7.x 中有一个更新（据说更好）的连接池实现 - 要使用它，请将其添加到您的配置中：

```
factory="org.apache.tomcat.jdbc.pool.DataSourceFactory" 
```

我很确定所有其他选项都是相同的。见[http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html](http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:22:02.183

我想了想，决定留下这个问题，尽管问题根本不在 Tomcat DBCP 中。我之所以做出决定，是因为我发现了很多类似的问题，其中许多问题没有答案，也从未找到可能发生的事情的线索。所以，我在这里留言，作为对突然走上同一条道路的任何人的**警告：**

问题是我有一个使用数据库的资源，它只初始化了一次，比如：

```
class MyClass {
   private MyResource res = null;

   private MyResource getMyResource() {
      if (res == null) res = new MyResource(getConnection());
      return res;
   }

   private Connection getConnection() {
      ....
      con = dataSource.getConnection();
      ....
      return con;
   }
} 
```

当我的应用程序在 Servlet 中时，它导致 MyResource 实例是唯一的实例，并且连接打开。因此，当 MySQL 服务器终止过期连接时，我的应用程序将在第一次查询时收到超时异常，但由于后续查询的自动重新连接，连接将再次处于活动状态。池只是没有触及连接，因为它从未被释放。

最后我意识到了这一点，并通过更改`getMyResource`为：

```
private MyResource getMyResource() {
  return new MyResource(getConnection());
} 
```

就我而言，这是合理的。在此更改之后，所有事情都开始按预期工作。

# python - 在 re.sub 中使用 Python 字典进行文本替换

> ID：14500281
> 
> 赞同：1
> 
> 时间：2013-01-24T11:28:56.887
> 
> 标签：python, regex

我有以下格式的输入文件：

```
<ftnt>
<p><su>1</su> aaaaaaaaaaa </p>
</ftnt>
...........
...........
...........
... the <su>1</su> is availabe in the ......... 
```

`ftnt`我需要通过替换值并删除标签中的整个数据来将其转换为以下格式：

```
"""...
...
... the aaaaaaaaaaa is available in the ...........""" 
```

请找到我写的代码。最初，我将键和值保存在字典中，并尝试使用分组根据键替换值。

```
import re
dict = {}
in_file = open("in.txt", "r")
outfile = open("out.txt", "w")
File1 = in_file.read()

infile1 = File1.replace("\n", " ")
for mo in re.finditer(r'<p><su>(\d+)</su>(.*?)</p>',infile1):

     dict[mo.group(1)] = mo.group(2)

subval = re.sub(r'<p><su>(\d+)</su>(.*?)</p>','',infile1)
subval = re.sub('<su>(\d+)</su>',dict[\\1], subval)

outfile.write(subval) 
```

我尝试使用字典，`re.sub`但我得到一个`KeyError`. 我不知道为什么会发生这种情况，请您告诉我如何使用。我很感激这里的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:58:02.070

首先，不要命名字典，`dict`否则会破坏`dict`函数。其次，`\\1`不能在字符串之外工作，因此会出现语法错误。我认为最好的选择是利用[str.format](http://docs.python.org/2/library/stdtypes.html#str.format)

```
import re

# store the substitutions
subs = {}

# read the data
in_file = open("in.txt", "r")
contents = in_file.read().replace("\n", " ")
in_file.close()

# save some regexes for later
ftnt_tag = re.compile(r'<ftnt>.*</ftnt>')
var_tag = re.compile(r'<p><su>(\d+)</su>(.*?)</p>')

# pull the ftnt tag out
ftnt = ftnt_tag.findall(contents)[0]
contents = ftnt_tag.sub('', contents)

# pull the su
for match in var_tag.finditer(ftnt):
    # added s so they aren't numbers, useful for format
    subs["s" + match.group(1)] = match.group(2)

# replace <su>1</su> with {s1}
contents = re.sub(r"<su>(\d+)</su>", r"{s\1}", contents)

# now that the <su> are the keys, we can just use str.format
out_file = open("out.txt", "w")
out_file.write( contents.format(**subs) )
out_file.close() 
```

# c# - 将客户端应用程序服务连接到自定义 DB（不是默认 CE DB）

> ID：14500282
> 
> 赞同：0
> 
> 时间：2013-01-24T11:28:59.843
> 
> 标签：c#, asp.net, sql-server

我有一个现有的 C# ASP.NET Web 应用程序，它使用成员资格和角色提供程序。这些表托管在同一个数据库中，该数据库包含所有应用程序表（托管在 Azure 中用于生产，本地 SQLExpress 用于开发）。

我想编写一个使用相同用户和角色信息的控制台应用程序。为此，我启用了客户端应用程序服务（在控制台应用程序上）并添加了一个新的 Web 服务，它将这些服务公开给控制台应用程序。

我可以在测试设置（作为控制台和winforms）中使用它，即使用Web 服务创建自己的空白用户/角色集，这些用户/角色从我读到的内容存储在本地文件中作为SQL CE 数据库。

如何让 Web 服务从我的应用程序的数据库中读取？

原始 Web 应用程序的相关 web.config：

```
<profile defaultProvider="DefaultProfileProvider">
  <providers>
    <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="SecondBiteDBContext" applicationName="/" />
  </providers>
</profile>
<membership defaultProvider="DefaultMembershipProvider">
  <providers>
    <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="SecondBiteDBContext" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="10" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
  </providers>
</membership>
<roleManager defaultProvider="DefaultRoleProvider" enabled="true">
  <providers>
    <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="SecondBiteDBContext" applicationName="/" />
  </providers>
</roleManager> 
```

Web 服务的 Web.config：

```
 <system.web.extensions>
    <scripting>
      <webServices>
        <authenticationService enabled="true" requireSSL="false"  />
        <profileService enabled="true"        readAccessProperties="WebSettingsTestText"        writeAccessProperties="WebSettingsTestText" />
        <roleService enabled="true"/>
      </webServices>
    </scripting>
  </system.web.extensions>
....
<system.web>
  <profile enabled="true" >
    <properties>
      <add name="WebSettingsTestText" type="string"
        readOnly="false" defaultValue="DefaultText"
        serializeAs="String" allowAnonymous="false" />
    </properties>
  </profile>
</system.web> 
```

控制台应用程序的 App.config：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>
  <appSettings>
    <add key="ClientSettingsProvider.ServiceUri" value="http://localhost:31337/SecondBiteAppServices/Profile_JSON_AppService.axd" />
    <add key="ClientSettingsProvider.ConnectionStringName" value="DefaultConnection" />
  </appSettings>
  <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=.\SQLExpress;Initial Catalog=SBAuto;MultipleActiveResultSets=True;Integrated Security=SSPI" />
  </connectionStrings>
  <system.web>
    <membership defaultProvider="ClientAuthenticationMembershipProvider">
      <providers>
        <add name="ClientAuthenticationMembershipProvider" type="System.Web.ClientServices.Providers.ClientFormsAuthenticationMembershipProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" serviceUri="http://localhost:31337/SecondBiteAppServices/Authentication_JSON_AppService.axd" connectionStringName="DefaultConnection" savePasswordHashLocally="False" />
      </providers>
    </membership>
    <roleManager defaultProvider="ClientRoleProvider" enabled="true">
      <providers>
        <add name="ClientRoleProvider" type="System.Web.ClientServices.Providers.ClientRoleProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" serviceUri="http://localhost:31337/SecondBiteAppServices/Role_JSON_AppService.axd" cacheTimeout="86400" connectionStringName="DefaultConnection" />
      </providers>
    </roleManager>
  </system.web>
</configuration> 
```

我没有指定可选的凭据提供程序，因为我没有使用表单 - 现在我无法对 validateuser() 进行硬编码调用来成功。

使用项目属性 -> 服务选项卡 -> 高级按钮，我指定了一个指向所需数据库的自定义连接字符串。我知道它正在连接到我的数据库，因为有一段时间我收到有关“无效对象 ApplicationProperties”的异常。在我的数据库中创建一个包含 PropertyName 和 PropertyValue 列的表修复了这个问题。请注意，我已经在我的数据库上运行了 aspnet_regsql，我希望它应该已经创建了所需的表。

但是，它没有通过对驻留在该数据库中的用户的验证检查 - 它运行干净（没有例外）但登录失败。根据上面app.config的结构，我推测自定义连接字符串只适用于profile服务，而不是membership或role services？（只有配置文件服务 [客户端设置提供程序] 将连接字符串作为参数。）编辑：回顾一些文档， http: [//msdn.microsoft.com/en-us/library/bb384312](http://msdn.microsoft.com/en-us/library/bb384312)似乎表明了这个自定义连接字符串仅用于存储离线本地缓存内容。

使用项目 -> asp.net 配置（选择了 Web 服务项目），网站管理工具不允许我做任何有意义的事情来配置提供程序或添加新的提供程序。

我无法找到任何能让我真正使用该数据库中的用户和角色的东西。有任何想法吗？（我对 .net 还很陌生，所以很可能我遗漏了一些东西，但是我在文档方面遇到了很多麻烦，并且从谷歌获得了任何不错的结果。）

一旦这工作起来，我想在各个项目之间共享业务逻辑。目前，逻辑位于主要的 Web 应用程序控制器方法中 - 显然我需要将其重构为共享层。考虑到所涉及的对象是基于实体框架的，这是否可能？

在开始使用所有这些客户服务内容之前，我进行了一次尝试性重构。我能够得到所有引用和编译的东西，但是代码在执行的早期就默默地失败了，我最好的猜测是所有各种与框架相关的东西都没有正确初始化——因此进入了客户端应用程序服务。但是我担心即使我让 CAS 运行，实体框架仍然会引起问题。

最后一个：如何在不同项目的配置文件之间共享配置元素（主要是连接字符串）？希望能够在开发和生产之间进行交换，而无需编辑多个文件。

编辑：有多少黑客在做这样的事情？[http://devpinoy.org/blogs/comgen/archive/2007/08/15/use-membership-api-in-winforms.aspx](http://devpinoy.org/blogs/comgen/archive/2007/08/15/use-membership-api-in-winforms.aspx) 这是我能找到的唯一真正有用的东西，即使没有直接关系到 CAS。似乎我可以从我的主要网络应用程序 web.config 中复制适当的行（其中包括指向我的数据库连接字符串的链接）。

谢谢！

**25/1/13 更新：**尝试了上面编辑链接中建议的替代方案，替换上面列出的 web.config 元素（尽管我还必须手动将 system.web.providers.dll 复制到 bin/debug 目录）。我可以干净地调用 validateuser()，但它仍然不允许登录。我知道我正在访问我的数据库，因为 SQL 探查器中正在发生活动，并且正在更新用户表上的最后一个活动时间戳。以 CAS 方式执行此操作时不会发生这种情况。

**更新 25/1/13 #2** - 刚刚花了 4 个小时试图调试它失败的原因，它让我快*疯了。*通过阅读代码（不是调试），我只能说它无法将提供的密码哈希与存储的密码进行比较。我 100% 确定我提供了正确的用户名和密码。Microsoft 尚未发布 system.web.providers.dll 的代码，因此在调试方面，我无法跨入membership.validateuser 调用之外的任何内容，因为它调用了 DefaultMembershipProvider.ValidateUser。

Resharper 将向我展示 DefaultMembershipProvider 的源代码（通过反编译），但我无法对其进行调试。我在其他地方读到过，您可以将整个 dll 反编译为项目，删除对 dll 的引用，然后添加项目。

尝试这样做时，我遇到了以下问题：

Dis# 允许我将很多内容保存为项目，但它会产生看似受管理的源代码，其中充满了*很多*错误。它们似乎主要是在变量名不正确的地方出现语法错误。导入项目时 VS 警告更改目标 .net 版本，但这似乎没有做任何事情

Telerik JustDecompile 让我可以保存项目，但它不包含与 system.web.providers.resources.providerresources.resx 互补的 .cs 文件。我从 Dis# 导入了 .cs，它可以工作。然而，它仍然充满了错误，但是不同的错误（尽管仍然有一些语法相关）并且没有那么多。其中相当一部分与其他 system.x 命名空间中的类有关。毯子添加很多作为参考没有任何帮助。

ILSpy - 打开 dll 时，它会列出 JustDecompile 项目似乎正在引用的其他命名空间的部分。但它只能让我一个一个地保存文件，我对尝试手动重建几十个dll文件的结构并不感兴趣......

这是我第一次尝试反编译任何东西，但我能找到的一切似乎都表明我正在做的事情应该有效（但他们当然没有提到我遇到的任何问题）。对下一步做什么有任何想法吗？

与我在 OP 中尝试的 Web 服务有关的旁注：我注意到 aspnet_regsql.exe 创建了一组以“aspnet_”为前缀的重复的成员资格和角色表。例如 aspnet_membership 而我现有的应用程序/代码只使用普通会员资格。这就解释了为什么 Web 服务不会读取我的数据，因为它正在检查不同的表。

我发现了一个博客（现在无法再次找到链接）关于某人编写了一些代码以在两个模式之间迁移他们的数据，这表明不同的表集与不同版本的成员资格（等）提供程序相关。因此，我假设在“通用提供程序 (system.web.providers) 中看到的提供程序与客户端应用程序服务中使用的提供程序不同（并且不兼容）并且由我创建的 Web 服务公开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:56:17.970

提供一个答案，希望能减轻其他人的痛苦。我没有上面提出的所有问题的答案，但这里有一些有用的信息。

*   要使通用提供程序 (system.web.providers.dll) 连接到任何数据库，只需使用上面我的第一个 web.config 片段中的相关配置行。这适用于任何类型的 .NET 项目（就我尝试过的项目而言）的 app.config （等）。确保添加对 dll 的引用，并且连接字符串包含在配置中。我将连接字符串重构为链接到每个项目的单独配置，以避免重复细节。
*   旧样式提供程序与新的通用提供程序不兼容，因为它们的 SQL 模式不同。通过编写一些脚本在模式之间进行转换，可以将旧模式转换为新模式。
*   *但是*当像这样在它们之间切换时，用于验证登录的哈希算法存在问题。`<membership defaultProvider="DefaultMembershipProvider" hashAlgorithmType="SHA1">`例如，当您尝试在 Web 应用程序之外使用这些提供程序时，您需要强制启用 SHA1 。
*   这就是我询问的 ValidateUser() 调用失败的原因。Connect 上的这个错误是相关的：[http](http://connect.microsoft.com/VisualStudio/feedback/details/734341/system-web-providers-defaultmembershipprovider-behavior-differs-from-sqlmembershipprovider-when-dealing-with-password-compatibility) ://connect.microsoft.com/VisualStudio/feedback/details/734341/system-web-providers-defaultmembershipprovider-behavior-differs-from-sqlmembershipprovider-when-dealing-with-password-compatibility . 由于这个错误，我的网络应用程序（使用通用提供程序）从一开始就一直在 SHA1 模式下运行 - 它应该是 HMACSHA256。使用控制台应用程序时默认 HMACSHA256 正确应用，因此不匹配！
*   其他对哈希算法配置有疑问的人：http: [//chriskinsmanblog.azurewebsites.net/2012/03/30/SystemWebProvidersDefaultMembershipProviderBehaviorChange.aspx](http://chriskinsmanblog.azurewebsites.net/2012/03/30/SystemWebProvidersDefaultMembershipProviderBehaviorChange.aspx)
*   但是，经过上述所有操作后，我发现您不一定需要使用这些提供程序。无需登录或对提供者有任何引用，就可以使实体框架正确执行。（我希望我知道为什么在开始所有这些混乱之前我无法让它工作。我知道我引用了相关的 dll。）
*   我仍然不知道为什么我不能令人满意地重新编译 web.providers.dll。

# java - 如何使用 XStream 处理枚举常量重命名？

> ID：14500283
> 
> 赞同：0
> 
> 时间：2013-01-24T11:29:01.893
> 
> 标签：java, enums, xstream

我在源代码中重命名了一个枚举常量。

从

```
public enum MyEnum { FOO, BAR } 
```

至

```
public enum MyEnum { FOO, BAZ } 
```

现在，如果我尝试读回以前用 xstream 序列化的旧数据，我会得到一个`ConversionException: "No enum constant MyEnum BAR"`.

我尝试了别名：

```
xstream.aliasField("BAR", MyEnum.class, "BAZ"); 
```

但这并没有帮助。

知道如何用新代码读取这个旧的 xstream 序列化文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:16:49.643

不能给枚举常量起别名。

转换器可以在几行内完成工作

公共类 MyEnumConverter 实现 Converter {

```
...

public void marshal(Object source, HierarchicalStreamWriter writer, MarshallingContext context) {
    context.convertAnother(source, reflectionConverter);
}

public Object unmarshal(HierarchicalStreamReader reader, UnmarshallingContext context) {
    String s = reader.getValue();
    if (s.equals("BAR")) {
        return MyEnum.BAZ;
    } else {
        return MyEnum.valueOf(s);
    }
}

public boolean canConvert(Class type) {
    return type == MyEnum.class;
} 
```

}

# php - PHP：大订单。如何正确设置 html 中的数组并在帖子中检索它

> ID：14500289
> 
> 赞同：1
> 
> 时间：2013-01-24T11:29:23.063
> 
> 标签：php, arrays, for-loop

我有一个非常大的订单，客户可以在其中订购不同的食物。

这是我的 html 示例（不完全确定这是否正确）：

```
<legend>Dinner</legend>
<label for="beef">Beef</label>
<input type="text" id="beef" name="order[]dinner[][beef]" placeholder="How many beef plates do you want?">

<label for="chicken">Chicken</label>
<input type="text" id="chicken" name="order[]dinner[][chicken]" placeholder="How many chicken plates do you want?">

<legend>Desserts</legend>
<label for="cake">Cake</label>
<input type="text" id="cake" name="order[]desserts[][cake]" placeholder="How many cake slices do you want?">

<label for="pudding">Pudding</label>
<input type="text" id="pudding" name="order[]pudding[][cake]" placeholder="How many puddings do you want?"> 
```

我怎么能做一个forloop来收集所有的订单（值超过0）

我试过这段代码：

```
$order_array = $_POST['order'];

foreach ($order_array AS $key => $value){
    $order .= "<p><strong>$key:</strong> $value</p>\n";
} 
```

但输出是这样的：

0：30
1：2

我希望它是：

牛肉：30
鸡肉：1

此外，如果可能的话，可以显示“类别”，如：

**晚餐：**
牛肉：30
鸡肉：1

**甜点：**
蛋糕：29
布丁：2

# 编辑：

这是我的帖子数组：

```
大批 （
  '订单' =>
    '晚餐' =>
    大批 （
      '牛肉' => '',
      '鸡' => '40',
    ),
    '甜点' =>
    大批 （
      '蛋糕' => '',
      '布丁' => '',
    ),
  ),

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:37:33.267

```
<form>
<legend>Dinner</legend>
<label for="beef">Beef</label>
<input type="text" id="beef" name="order[beef]" placeholder="How many beef plates do you want?">

<label for="chicken">Chicken</label>
<input type="text" id="chicken" name="order[chicken]" placeholder="How many chicken plates do you want?">

<legend>Desserts</legend>
<label for="cake">Cake</label>
<input type="text" id="cake" name="order[cake]" placeholder="How many cake slices do you want?">

<label for="pudding">Pudding</label>
<input type="text" id="pudding" name="order[pudding]" placeholder="How many puddings do you want?">
<input type="submit" />
</form>
<?php
 $order_array = $_GET['order'];

print_r($order_array);
foreach ($order_array AS $key => $value){
    echo $key;
    echo $value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:50:31.330

首先，更改您的输入，使其名称采用以下格式：

`<input name="order[category][food]" />`

然后，一旦发布了数据，您就可以执行以下操作来获得所需的输出：

```
if (!empty($_POST['order'])) {

  foreach ($_POST['order'] as $type => $items) {
    echo '<strong>' . ucfirst($type) . '</strong><br />';

    foreach ($items as $name => $qty) {
      echo ucfirst($type) . ': ' . $qty . '<br />';
    }
    echo '<br />';
  }
} 
```

这将输出如下内容： -

**晚餐**
牛肉：12
鸡肉：2

**甜点**
蛋糕：4
布丁：1

* * *

**编辑：**如果您需要阻止显示类别 ( `$type`) 如果其中没有则显示`$items`，您可以执行以下操作：

```
if (count(array_filter($items))) {
  echo '<strong>' . ucfirst($type) . '</strong><br />';
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-24T11:46:44.453

下面的代码适用于：

牛肉：30

鸡：1

```
<form>
<legend>Dinner</legend>
<label for="beef">Beef</label>
<input type="text" id="beef" name="order[beef]" placeholder="How many beef plates do you want?">

<label for="chicken">Chicken</label>
<input type="text" id="chicken" name="order[chicken]" placeholder="How many chicken plates do you want?">

<legend>Desserts</legend>
<label for="cake">Cake</label>
<input type="text" id="cake" name="order[cake]" placeholder="How many cake slices do you want?">

<label for="pudding">Pudding</label>
<input type="text" id="pudding" name="order[pudding]" placeholder="How many puddings do you want?">

<input type="submit" name="submit" value="submit"/>
</form> 
```

PHP代码：

```
<?php
if(isset($_REQUEST['submit']))
{
    $order_array = $_POST['order'];

    $order = "";
    foreach ($order_array AS $key => $value){
        $order .= "<p><strong>$key:</strong> $value</p>\n";
    }

   echo "<pre>";
   print_r($order);
}
?> 
```

# java - Log4J：带有 sysdate 的备份文件名

> ID：14500301
> 
> 赞同：2
> 
> 时间：2013-01-24T11:29:46.753
> 
> 标签：java, logging, log4j

我想从 log4j 命名备份文件，将 sysdate 附加到名称中，而不是 filename.1, filename.2 ....

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T12:13:24.043

为此，您需要使用 Log4J“附加”JAR（由 Apache 提供），并使用`RollingFileAppender`那里找到的（参见`FileNamePattern`参数）： http: [//logging.apache.org/log4j/companions/extras/apidocs/index .html](http://logging.apache.org/log4j/companions/extras/apidocs/index.html)

例如（取自那里的 Javadoc）：

```
<appender name="ROLL" class="org.apache.log4j.rolling.RollingFileAppender">
    <rollingPolicy class="org.apache.log4j.rolling.TimeBasedRollingPolicy">
        <param name="FileNamePattern" value="/wombat/foo.%d{yyyy-MM}.gz"/>
    </rollingPolicy>
</appender> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T12:09:48.277

如果您需要以特定频率（例如每分钟或每小时）备份文件，那么`DailyRollingFileAppender`课程将适合您的目的。

但是，如果您需要在文件达到一定大小后归档文件，那么扩展`RollingFileAppender`类可能是一种好方法。您需要以`rollover()`类似于以下的方式覆盖其方法：

```
public void rollOver() {
...

file = new File(fileName + '.' + System.currentTimeMillis());

...

} 
```

# c# - 从类访问主窗口控件

> ID：14500302
> 
> 赞同：0
> 
> 时间：2013-01-24T11:29:48.603
> 
> 标签：c#, .net, wpf

我知道这很简单。

我有`Mainwindow`一个文本框。在文本框内容更改发生事件即`textboxtext_changed`之后，我希望文本框再次变为空。

我在其他类中有一个函数，它在`textboxtext_changed`. 我正在考虑仅在其他类中清除函数中的文本框，但我无法访问主窗口控件，我不想在那里创建主窗口实例。

有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:33:24.547

```
public void function(ref TextBox textBox)
{
  textbox.Text = string.empty;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:34:03.927

从您的 TextChanged 函数中，您可以从发件人访问 TextBox

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    ((TextBox)sender).Text = "";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T12:04:03.767

使用[MVVM](https://www.google.com/webhp?sourceid=chrome-instant&ion=1&ie=UTF-8#hl=es&tbo=d&sclient=psy-ab&q=wpf%20mvvm%20code%20project)可以非常简单：

1.  在 ViewModel 中声明一个字符串属性。
2.  将该属性绑定`TextBox.Text`到此字符串属性并将 UpdateSourceTrigger 设置为 PropertyChanged 并将 Mode 设置为 TwoWay。
3.  每当 ViewModel 上的属性发生变化时执行您的逻辑。

**视图模型**

```
 public class MyViewModel : INotifyPropertyChanged
    {
        private string someText;

        public string SomeText
        {
            get
            {
                return this.someText;
            }
            set
            {
                this.someText = value;

                if (SomeCondition(this.someText))
                {
                    this.someText = string.Empty;
                }

                var epc = this.PropertyChanged;
                if (epc != null)
                {
                    epc(this, new PropertyChangedEventArgs("SomeText"));
                }
            }
        }
    } 
```

**XAML**

```
 <TextBox Text="{Binding SomeText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

# java - 什么是确定数组列表中全局最大值的好方法

> ID：14500303
> 
> 赞同：2
> 
> 时间：2013-01-24T11:29:51.060
> 
> 标签：java, algorithm

在我的程序中，我有一个循环，它计算整数值并将其一个接一个地放入一个数组列表中。计算的整数值越高越好。现在我想继续计算，直到似乎不会有更好的整数值。也就是说，当计算的整数在一个范围内减小时，或者它不再改变。我正在考虑，将当前计算值与最后一个 x 进行比较（我需要关注多少值？）如果它总是小于或等于我停止计算的最后一个 x 元素中的任何一个。但是使用这种策略，我不能保证这是全局最大值，而只是局部的....

这样做的好策略是什么？

**编辑：** 我知道不能保证找到全局最大值。但我对函数的行为了解一点：我已经计算的值越多，出现全局最大值的可能性就越小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:38:56.987

好吧，您似乎需要假设一些启发式方法来评估何时停止。由于您不能说“我现在停止，因为我找到了我的最大值”，您可以按照以下方式之一继续：

*   保持当前最大值并将下一个值与当前值进行比较，如果较小，则增加计数器。如果计数器达到 X （您的参数），您将停止
*   使用概率分布函数，在 0 处概率为 1，在 +inf 处概率为 0。这可以根据您的喜好定制。然后，您只需增加所见值的数量或较小值的计数器，并使用该计数器估计使用该函数的概率。如果 prob < X （你的参数再次）你停止。

希望这能给你一些想法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:56:21.260

[水库取样](http://en.wikipedia.org/wiki/Reservoir_sampling)。将值存储在一个较小的数组*A*中，该数组表示来自计算的整数值的随机 x 个样本。现在对于一系列计算值，您可以将每个值与数组*A*中的值进行比较，如果发现下降趋势，您可以停止。这将保证您处理的是全局最大值而不是本地最大值。

# asp.net-mvc - IDependencyResolver.GetService() 的加载时间太长

> ID：14500306
> 
> 赞同：1
> 
> 时间：2013-01-24T11:29:57.160
> 
> 标签：asp.net-mvc

我的网站（asp.net mvc 4）在服务器上运行时加载时间太长，在我的本地机器上加载速度非常快！

我为 MVC 安装了 Glimpse 以查看发生了什么。Glimpse 跟踪选项卡显示加载“IDependencyResolver.GetService”需要**12879 毫秒**。

完整的信息是：

> IDependencyResolver.GetService() = ASP._Page_Views_Cagegories_GetByCity_cshtml

服务器是专用服务器，应该足够强大。有谁可以建议我该怎么做才能解决这个问题？

页面网址：http: [//2send.co.il/City/%D7%A2%D7%A4%D7%95%D7%9C%D7%94](http://2send.co.il/City/%D7%A2%D7%A4%D7%95%D7%9C%D7%94)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:38:56.637

我不知道我的服务器到底发生了什么变化，但在我运行 Windows 更新后问题就解决了。在其他更新中，我看到了框架 4 更新，所以我想就是这样！

# uml - 为网络论坛制作 UML 类图

> ID：14500308
> 
> 赞同：2
> 
> 时间：2013-01-24T11:30:00.487
> 
> 标签：uml, class-diagram

我正在尝试创建一个论坛，其中包含创建各种类别主题的用户。其他用户可以发布回复这些是我下面的表格

```
categories
  id 
  category_title
  category_description
  last_post_date
  last_user_posted

posts
  id
  category_id
  topic_id
  post_creator
  post_content
  post_date 

topics
  id
  category_id
  topic_title
  topic_creator
  topic_last_user
  topic_date
  topic_reply_date
  topic_views

users
  id
  username
  password
  email
  forum_notification 
```

我在为我的论坛创建 uml 类图时遇到问题，但我有点困惑，我可以为用户提供下面的一个图，但我不知道如何创建其余的

```
 ┌─────────────────────────┬
  │  Users                  │
  ├─────────────────────────┬
  |username: String         |
  |password: String         |
  ├─────────────────────────┼
  |+logIn()                 |
  |+logOut()                | 
  ├─────────────────────────┼ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T12:24:51.993

首先你应该知道你需要做更多的“行为图”来显示系统应该发生什么，以便更深入地了解如何设计更技术性地描述系统的“结构图”，如果我应该说的话. 行为图的示例是用例图和序列图。

> **结构图**显示了正在建模的系统中的事物。在更专业的术语中，它们显示系统中的不同对象。 **行为图**显示了系统中应该发生的事情。它们描述了对象如何相互作用以创建一个功能系统。

然后我们必须简要介绍一下您的问题“类图”

> **类图**显示了系统中的类、每个类的属性和操作以及每个类之间的关系。在大多数建模工具中，一个类由三个部分组成，顶部是名称，中间是属性，底部是操作或方法。图表之间的不同关系由不同类型的箭头表示。

举个例子

```
 ┌─────────────────────────┬
  │  Users                  │
  ├─────────────────────────┬
  │id: int                  |
  |username: String         |
  |password: String         |
  |email: String            |  
  |forum_notification: bool |
  ├─────────────────────────┼
  |+logIn()                 |
  |+logOut()                | 
  |+Reqigster()             |
  |+CreateTopic()           |
  |+EditTopic()             |
  |+AddNewPost()            |
  |+EditPost()              |
  |+DeletePost()            |
  |+SendMessage()           |
  |+ReportIssue()           |
  ├─────────────────────────┼
            | ..1
            |
            |
            |
            |
            | 0..*
  ┌─────────────────────────┬
  │  Posts                  │
  ├─────────────────────────┬
  │id: int                  |
  |category_id: int         |
  |topic_id: int            |
  |post_creator: int        |  
  |post_content: String     |
  |post_date: DateTime      |
  ├─────────────────────────┼
  |+PostDelete()            |
  |+PostUpdate()            | 
  |+UpdateContent()         |
  |+GetViewers()            |
  |+ChangeCategory()        |
  ├─────────────────────────┼ 
```

在帖子类上，您将通过将该类与类别和主题类等链接来继续工作。beer 始终牢记，您应该考虑所有实体之间的关系。

祝你好运。

# python - 如何为 listdir 指定文件掩码并获取 SFTPClient 的方法

> ID：14500309
> 
> 赞同：0
> 
> 时间：2013-01-24T11:30:00.077
> 
> 标签：python, paramiko

我想做类似的事情：

```
sftp.listdir("path_to_files/*.csv") 
```

同样地

```
sftp.get("path_to_files/*.csv") 
```

可以使用`paramiko`吗？

谢谢

索纳尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:34:22.620

使用列表推导应该很容易

```
[ f for f in sftp.listdir("path_to_files") if f.endswith(".csv") ] 
```

# vba - VBA用户表单按钮保存工作表

> ID：14500321
> 
> 赞同：0
> 
> 时间：2013-01-24T11:30:30.543
> 
> 标签：vba, excel

我目前有一个由不同用户表单管理的 excel 文档。我想在编辑文档后向我的一个用户表单添加一个保存选项（按钮）。

因此我想知道是否有代码可以打开“**保存**”或“**另存为...”**窗口？

我想要实现的是将文件保存为普通的 .xsl 文件，而不是 .xslm 文件保存在用户可以选择的位置（从用户表单中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:45:40.387

像这样的东西……？

```
Sub test()

Dim vSave_File As Variant

vSave_File = Application.GetSaveAsFilename("Test.xls", "Excel files (*.xls),*.xls", 1, "Dialog Title")

End Sub 
```

# php - 关系多对一 - 我的实体无法识别的字段

> ID：14500329
> 
> 赞同：0
> 
> 时间：2013-01-24T11:30:52.193
> 
> 标签：php, symfony

我在 SYmfony2 上做一个简单的博客引擎。

我有 2 个实体评论和文章，它们与评论端的 ManyToOne 相关。

```
// Comment.php
/**
* @ORM\ManyToOne(targetEntity="Am\BlogBundle\Entity\Article")
* @ORM\JoinColumn(nullable=false)
*/
private $article; 
```

当我尝试删除一篇文章时，我想删除与这篇文章相关的所有评论。

```
//Am/BlogBundle/Controller/BlogController.php

public function delArticleAction(Article $article)
{

    $em = $this->getDoctrine()
               ->getEntityManager();

    $list_tags = $em->getRepository('AmBlogBundle:Tag')
                       ->findAll();

    $list_comments = $em->getRepository('AmBlogBundle:Comment')
                       ->findBy(array('article_id'=>$article->getId()));                   

    //In order to delete an article, we have to remove each object linked to an Article
    foreach($list_tags as $value){
        $article->removeTags($value);
    }

    foreach($list_comments as $value){
        //We delete all the comments of an article
        $em = $this->getDoctrine()->getManager();
        $em->remove($value); 
        $em->flush();
    }

    // We remove the Article
    $em = $this->getDoctrine()->getManager();
    $em->remove($article); 
    $em->flush();

    return $this->render('AmBlogBundle:Blog:delArticle.html.twig');
} 
```

事实上，我只想获得与我的文章相关的评论，并且与标签相同：/

我不知道我做错了什么？一些帮助会很好:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:42:33.367

您想在实体定义中添加 onDelete="CASCADE" 并将其添加到数据库中的外键中，因此当您删除文章时，它会自动级联删除相关评论。

```
/**
 * @ORM\ManyToOne(targetEntity="Am\BlogBundle\Entity\Article")
 * @ORM\JoinColumn(nullable=false, onDelete="CASCADE")
 */
private $article; 
```

# php - 通过 PHP 发送预定消息

> ID：14500336
> 
> 赞同：1
> 
> 时间：2013-01-24T11:31:12.873
> 
> 标签：php, windows, cron, scheduled-tasks

我有一个预定消息的数据库。我想创建一个在 Web 服务器上连续运行的服务（请参阅 Windows 服务器），并通过检查预定时间来选择需要执行的行。我希望在没有任何人为干预的情况下发生这种情况。你能帮我解决这个问题吗？

我做了一些研究，结果发现是使用`cron`工作。但是我的主机不在 Linux 上，我需要在 PHP 中实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T12:46:25.807

1) 使用 Windows 调度程序。

2）您可以使用以下命令运行 php 文件：

```
C:\Path\to\php.exe -f "C:\Path\to\file.php" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T12:44:54.533

我会从一个问题开始：您绝对必须在 Web 服务器上运行这样的工作吗？我的意思是，最好将网络服务器与类似 cron 的作业隔离开来。您所需要的只是一种从可以运行计划任务的地方访问计划消息数据库的方法。

如果您必须在 Windows 服务器中执行此操作，我相信您将不得不使用计划任务（尽管您必须与您的托管服务提供商核实，大多数都不允许此类服务）。

# php - 在 magento 中过滤产品数据

> ID：14500338
> 
> 赞同：0
> 
> 时间：2013-01-24T11:31:14.683
> 
> 标签：php, magento, migration

我只需要**迁移** 我正在使用以下**代码的****活动产品**来获取所有产品集合

 **```
Mage::getModel('catalog/product')->getCollection(); 
```

任何人都可以告诉我如何只过滤**状态 = 启用的**表单上面的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:35:03.600

尝试

```
Mage::getModel('catalog/product')->getCollection()->addAttributeToFilter('status', 1) 
```**

# java - 获取DNS记录信息java

> ID：14500339
> 
> 赞同：2
> 
> 时间：2013-01-24T11:31:16.377
> 
> 标签：java, dns, ip, mx-record

*java*中是否有一个库可以从底层服务器获取准确的**DNS信息？**

我不仅对**IP**到**DNS**的映射感兴趣，还对其他记录感兴趣：*A、AAAA、MX、NS、SOA、RRSIG 等*。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T11:42:05.357

如果您的代码在 Oracle VM 上运行，您可以使用 JNDI 的 DNS 提供程序，例如：

```
Hashtable<String, Object> env = new Hashtable<String, Object>();
env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.dns.DnsContextFactory");
env.put(Context.PROVIDER_URL, "dns:");

DirContext ctx = new InitialDirContext(env);
Attributes atts = ctx.getAttributes("stackexchange.com", new String[] {"MX"});
NamingEnumeration<? extends Attribute> e = atts.getAll();
while(e.hasMore()) {
    System.out.println(e.next().get());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-25T15:01:04.080

最好使用 dnsjava 库：

```
<dependency>
    <groupId>dnsjava</groupId>
    <artifactId>dnsjava</artifactId>
</dependency> 
```

一个例子是这样的：

```
Record[] rs = new Lookup("maildomain.com", Type.MX).run(); 
```

# vb.net - 使用 Visual Basic 从主机服务器读取文本文件

> ID：14500341
> 
> 赞同：-1
> 
> 时间：2013-01-24T11:31:16.923
> 
> 标签：vb.net, file

我如何使用 Visual Basic 从主机服务器读取文本文件？

我们的链接：yourname.com/file.txt

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T11:37:52.683

使用[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest%28v=vs.110%29.aspx)类：

```
Dim request = DirectCast(WebRequest.Create("http://wordpress.org/extend/plugins/about/readme.txt"), HttpWebRequest)
Dim response = DirectCast(request.GetResponse(), HttpWebResponse)
Using sr As New StreamReader(response.GetResponseStream())
    Do While sr.Peek() >= 0
        Console.WriteLine(sr.ReadLine())
    Loop
End Using 
```

# ipad - iOS (iPad)：在 UISplitView 顶部显示加载屏幕

> ID：14500344
> 
> 赞同：0
> 
> 时间：2013-01-24T11:31:22.490
> 
> 标签：ipad, loading, uisplitviewcontroller

在我的应用程序中，我正在从服务器接收数据。使用这些数据，我填充了一个表视图 (MasterViewController)，当我选择该表中的一项时，它会在 DetailViewController 中显示详细信息。这些信息在应用程序每次启动或用户按下刷新按钮时加载。

在从服务器接收数据时，我想显示一个包含 UIActivityIndi​​catorView 和显示“正在加载...”的标签的视图。当我的应用程序以纵向模式启动或刷新时，这工作得很好。但是当我在横向模式下尝试相同时，我的视图大小不正确。

这是我用来加载视图的代码：

```
+ (SpinnerView *)loadSpinnerViewIntoView:(UIView *)superView {

    SpinnerView *spinnerView = [[SpinnerView alloc] initWithFrame:superView.bounds];

    if (!spinnerView)
        return nil;

    UIImageView *background = [[UIImageView alloc] initWithImage:[spinnerView addBackground]];
    background.alpha = 0.7;
    [spinnerView addSubview:background];

    UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    indicator.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleLeftMargin;
    indicator.center = superView.center;
    [spinnerView addSubview:indicator];
    [indicator startAnimating];   

    CGSize maximumLabelSize = CGSizeMake(296, 9999);
    CGSize expectedLabelSize = [[NSString stringWithString:@"Loading..."] sizeWithFont:[UIFont boldSystemFontOfSize:25.0f] constrainedToSize:maximumLabelSize];

    UILabel *loadingLbl = [[UILabel alloc] initWithFrame:CGRectMake(0.0, 0.0, expectedLabelSize.width, expectedLabelSize.height)];
    loadingLbl.text = @"Loading...";
    loadingLbl.font = [UIFont boldSystemFontOfSize:25.0f];
    loadingLbl.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    loadingLbl.backgroundColor = [UIColor clearColor];
    loadingLbl.textColor = [UIColor whiteColor];
    loadingLbl.center = CGPointMake(superView.center.x, superView.center.y - indicator.frame.size.height - 25);
    [spinnerView addSubview:loadingLbl];   

    [superView addSubview:spinnerView];

    CATransition *animation = [CATransition animation];
    [animation setType:kCATransitionFade];
    [[superView layer] addAnimation:animation forKey:@"layerAnimation"];

    return spinnerView;
} 
```

当我开始更新我的数据时，这是从我的 MasterViewController 调用的：

```
spinner = [SpinnerView loadSpinnerViewIntoView:self.splitViewController.view]; 
```

SpinnerView 在加载时获得与视图相同的边界。我真的不明白为什么它不能在横向模式下正确显示。我希望我的问题是可以理解的，任何人都可以帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:24:07.163

我终于通过将 SinnerView 调用更改为：

```
+ (SpinnerView *)loadSpinnerViewIntoView:(UIView *)superView withFrame:(CGRect)frame {

    SpinnerView *spinnerView = [[SpinnerView alloc] initWithFrame:frame];

    if (!spinnerView)
        return nil;

    .
    .
    .        

    return spinnerView;
} 
```

并从我的 viewDidLoad 方法中调用一个函数，如下所示：

```
[self performSelectorOnMainThread:@selector(checkLaunchOrientation:) withObject:nil waitUntilDone:NO]; 
```

这是功能：

```
- (void)checkLaunchOrientation:(id)sender {

    UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;

    if (UIInterfaceOrientationIsLandscape(orientation))
        spinner = [SpinnerView loadSpinnerViewIntoView:self.splitViewController.view withFrame:CGRectMake(0.0, 0.0, [UIScreen mainScreen].bounds.size.height, [UIScreen mainScreen].bounds.size.width)];
    else
        spinner = [SpinnerView loadSpinnerViewIntoView:self.splitViewController.view withFrame:self.splitViewController.view.bounds];
} 
```

这是一种解决方法，但它对我有用......

# iphone - 在 iOS 上创建自定义循环 UIScrollView

> ID：14500346
> 
> 赞同：0
> 
> 时间：2013-01-24T11:31:29.090
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uiscrollview

我必须创建一个`UIScrollView`只包含 5 个标签的自定义，这些标签会无休止地滚动以模仿自定义控件。中心的标签应该改变它以及改变视图中的另一个标签。这一切看起来像这样：

![在此处输入图像描述](../Images/15fb62887c37fba71903d811a1cbdea3.png)

对此类事物的任何框架或实现有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:37:33.067

**首先这里最好的** [源代码](https://github.com/nicklockwood/iCarousel)

`contentOffset`可能是无论在那里设置这些数字，你都不会因为你把它放在它的手上而留下深刻的印象。所以它只是继续设置它认为应该是下一瞬间的 contentOffset - 而不验证 contentOffset 在此期间是否发生了变化。

我将子类`UIScrollView`化并将魔法放入`setContentOffset`方法中。根据我的经验，所有内容偏移更改都通过该方法，即使是内部滚动引起的内容偏移更改。只需在某个时候执行 [super `setContentOffset`:..] 即可将消息传递给真正的`UIScrollView`.

也许如果你把你的换档动作放在那里，它会更好地工作。您至少可以检测 3000-off 设置`contentOffset`，并在传递消息之前对其进行修复。如果您还要覆盖 contentOffset 方法，您可以尝试查看是否可以制作虚拟无限内容大小，并将其减少到“引擎盖下”的真实比例。

[这对你也有帮助..!!!](https://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:36:33.063

我实现了类似的东西，诀窍是只加载你需要的东西。[这个问题](https://stackoverflow.com/q/2079225/673492)对我帮助很大，尤其是[akosma 的回答](https://stackoverflow.com/a/2080989/673492)。

# sql - 查询未收集到正确行的日期之间

> ID：14500352
> 
> 赞同：1
> 
> 时间：2013-01-24T11:31:38.827
> 
> 标签：sql, oracle, join, oracle11g

在下面的查询中，我的原始 ERD 中有 5 个表。该查询旨在从 Homes 表中选择房屋，并从相应的表中选择其特征和类型。我遇到的问题是在输入查询的特定日期范围之间选择预订表中不存在的房屋。

```
 Bookings  >--  Home  >--  Home_Type
                  |
                  ^
            Home_Feature
                  V
                  |
               Feature

SELECT homes.home_id, 
    homes.title, 
    homes.description, 
    homes.living_room_count, 
    homes.bedroom_count, 
    homes.bathroom_count, 
    homes.price, homes.sqft,
    listagg(features.feature_name, '\n') WITHIN GROUP(ORDER BY features.feature_name) features, 
    home_type.type_name
FROM homes
INNER JOIN home_feature 
  ON homes.home_id = home_feature.home_id
INNER JOIN home_type 
  ON home_type.type_code = homes.type_code
INNER JOIN features 
  ON home_feature.feature_id = features.feature_id
WHERE NOT EXISTS (SELECT home_id
                  FROM bookings b
                  WHERE b.home_id = homes.home_id 
                  AND (b.booking_end <= to_date('25-Jan-13') OR b.booking_end >= to_date('21-Jan-13'))
                  AND (b.booking_start <= to_date('25-Jan-13') OR b.booking_start >= to_date('21-Jan-13')))
GROUP BY homes.home_id, homes.title, 
    homes.description, homes.living_room_count, 
    homes.bedroom_count, homes.bathroom_count, 
    homes.price, homes.sqft, home_type.type_name 
```

现在，我的查询似乎没有正确获得正确的行。下面是一个示例输出以及当前在 bookings 表中的内容，您可以看到返回的行不正确。

输出：

```
Home_ID    Title    Description    LivingRooms    Bedrooms    Bathrooms    Price    SQFT    Type    Features
3          Home A   A House        2              2           2            200      500     Flat    TV...
4          Home B   B House        3              1           1            250      600     House   Pool... 
```

预订表：

```
Home_ID    Booking_ID    Customer_ID    Booking_Start    Booking_End
1          1             1              22-Jan-13        23-Jan-13
2          2             3              27-Jan-13        29-Jan-13 
```

家园表：

```
Home_ID    ....
1          ....
2
3           
4 
```

显然，此时查询的输出也应该包括 Home_ID 2 但不是，但我的印象是查询应该可以工作？

目前的查询应该是这样的：

```
Home_ID    Title    Description    LivingRooms    Bedrooms    Bathrooms    Price    SQFT    Type    Features
2          Home 2   2 House        3              1           1            100      300     Flat    Balcony...
3          Home 3   3 House        2              2           2            200      500     Flat    TV...
4          Home 4   4 House        3              1           1            250      600     House   Pool... 
```

谁能帮我修改查询以便工作并包含正确的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:45:05.807

我认为您想要 a`left outer join`而不是`where not exists`.

尝试这个：

```
...
INNER JOIN features 
  ON home_feature.feature_id = features.feature_id
left outer join bookings b
  on homes.home_id = b.home_id
where (
        (b.booking_end <= to_date('25-Jan-13')
         OR b.booking_end >= to_date('21-Jan-13')
        )
        AND
        (b.booking_start <= to_date('25-Jan-13')
         OR b.booking_start >= to_date('21-Jan-13')
        )
      )
      or b.home_id is null
... 
```

这将返回未预订的`or b.home_id is null`房屋 ( ) 和预订符合您条件的房屋。

现在应该返回所有四个房屋。

# php - 服务器上的wordpress插件错误

> ID：14500353
> 
> 赞同：1
> 
> 时间：2013-01-24T11:31:39.957
> 
> 标签：php, wordpress

我写了一个插件，它在我的本地主机上成功运行。但是当我安装它时，我的服务器并想要激活它失败了。

*插件无法激活，因为它触发了致命错误。*

解析错误：语法错误，第 22 行 /home/ozcanco/public_html/said/wp-content/plugins/Archive/my-plugin.php 中的意外 T_FUNCTION

但是当我在本地运行这个插件时，它成功运行。顺便说一下，我的 wordpress 版本是相同的，在本地和服务器上。这是怎么发生的？

第22行是这样的：

```
 add_action('loop_start', function($query) use ($allContent){ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:38:54.560

您拥有的内联函数称为匿名函数或闭包。闭包仅在 5.3 版本中成为 PHP 的一部分，因此如果您的服务器运行 5.2 或更低版本，它将不支持它们。

[http://php.net/manual/en/functions.anonymous.php](http://php.net/manual/en/functions.anonymous.php)

如果升级服务器不是一个选项，那么正如评论中 krike 建议的那样，您可以使用回调函数：

```
add_action('loop_start', 'loopStartCallback');

function loopStartCallback($query) {
    global $allContent;
    // body of the closure goes here
} 
```

# android - 如何在android中将字符串数组传递给我的适配器

> ID：14500358
> 
> 赞同：-1
> 
> 时间：2013-01-24T11:32:02.673
> 
> 标签：android, adapter, dynamically-generated, arrays

我正在尝试将字符串数组传递给我的适配器。我的问题是我全局初始化并尝试在下面的异步任务中创建字符串数组。但我越来越空了。下面是我的代码。实际上，在这个例子中，他们从资源文件夹中获取它，但我想从我的 json 响应中获取它。任何帮助表示赞赏。

```
 String[] mString;
        public ActionsAdapter(Context context) {
             mInflater = LayoutInflater.from(context);
             session = new SessionManager(context);
             final Resources res = context.getResources();
             new ConnectAppMenu(context).execute();
             //  mTitles = res.getStringArray(R.array.actions_names);
            //  mUrls = res.getStringArray(R.array.actions_links);
            //  mIcons = res.obtainTypedArray(R.array.actions_icons);
             System.out.println("Menus"+ mString);

         }
         public class ConnectAppMenu extends AsyncTask<String, Void, String> {
    private ProgressDialog dialog;
    private final Context context;
    public ConnectAppMenu(Context context) {
        this.context = context;
    }
     @Override
        protected void onPreExecute() {
        // UI work allowed here
        dialog = new ProgressDialog(context);
        // setup your dialog here
        dialog.setMessage("Connecting....");
        dialog.setCancelable(false);
        dialog.show();
        }
    @Override
    protected String doInBackground(String... params) {
        String returnConnect = doConnectAppMenu();
        return returnConnect;
    }      
    public String doConnectAppMenu() {
        HashMap<String, String> user = session.getUserDetails();
        String client_url = user.get(SessionManager.KEY_CLIENT);
    //  if(connection) {
            HttpParams connectionParameters =  new BasicHttpParams(); 
            int timeoutConnection = 8000;
            HttpConnectionParams.setConnectionTimeout(connectionParameters, timeoutConnection);                 
            int timeoutSocket = 10000;
            HttpConnectionParams.setSoTimeout(connectionParameters, timeoutSocket);
            HttpClient httpClient   =   new DefaultHttpClient(connectionParameters);
            HttpPost httpPost       =   new HttpPost(client_url+"/api/common/app_menu");
            JSONObject json = new JSONObject();    
          try{
            json.put("data", 1);
             json.put("versionid", 1);                          
             StringEntity se = new StringEntity(json.toString());
             se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
             httpPost.setEntity(se);                       
             //Execute HTTP post request
             appmenu_res    =   httpClient.execute(httpPost); 
             appmenu_obj = new org.json.JSONObject(org.apache.http.util.EntityUtils.toString(appmenu_res.getEntity()));
             appmenu_result = appmenu_obj.toString();

           }
            catch(JSONException ex) {
                // TODO Auto-generated catch block
                ex.printStackTrace();
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
//  }           
        return appmenu_result;
    }
    @Override
    public void onPostExecute(String result) {

        int status_code = appmenu_res.getStatusLine().getStatusCode();                          
            if (status_code == 200) {
                dialog.dismiss();

                try {
                    menuObject = new JSONObject(result);
                    JSONArray names= menuObject.names();
                    JSONArray values = menuObject.toJSONArray(names);
                        for (int i = 0; i< values.length(); i++) {

                            JSONObject json2 = (JSONObject) values.get(i);
                            int menu_id = json2.getInt("menu_id");

                              if (menu_id > 0) {

                                  if (json2.has("menu_name")) {
                                     menu_list = json2.get("menu_name").toString();
                                     mString = new String[] { menu_list };

                                     //mUrls = menu_list.length();
                                  }

                              } 
                }
                        System.out.println("Json Menu" + Arrays.toString(mString));

                    /*Iterator<String> iter = menuObject.keys();
                    while (iter.hasNext()) {
                        String key = iter.next();
                        try {
                            Object value = menuObject.get(key);
                            //System.out.println("Hai" +value);
                            System.out.println("Post Execute" +  value);

                        } catch (JSONException e) {
                            // Something went wrong!
                        }
                    }*/
                } catch (JSONException e) { 
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                //dialog.dismiss();

            }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:51:14.850

首先，如果您正在寻找作为字符串的 JSON 对象，请不要执行您在此处所做的操作：

```
appmenu_obj = new org.json.JSONObject(org.apache.http.util.EntityUtils.toString(appmenu_res.getEntity())); 
```

我建议执行以下操作：

```
String Json = EntityUtils.toString(appmenu_res.getEntity());
return Json; 
```

现在，如果您想在 UI 线程上处理 JSON（因为您似乎希望基于返回类型是字符串），这应该可以工作。但是不推荐使用这种方法，因为 Json 需要被处理成对象，这需要时间并阻塞 UI 线程。

更好的解决方案是在后台线程上序列化您的 Json，然后将序列化的对象传递回主线程以更新 UI。

如果你有很多类型，我建议使用泛型。我已经建立了一个加载器，如果你想[在这里做你想做的事。](https://github.com/ChristopherTulip/MapHomeTest/blob/master/src/com/tulip/maphometest/API/BasicLoader.java)您将需要使用 GSON 库并构建适当的序列化程序。使用加载器类也与使用 AsyncTaskClass 不同，因此请阅读[此处的文档](http://developer.android.com/reference/android/content/Loader.html)

**编辑**

好的，如果您想让 Activity 从 AsyncTask 中获得回调，那么您想要做的就是按照以下方式做一些事情：

```
public class MyActivity extends Activity implements AsyncTaskCallback 
```

其中 AsyncTaskCallback 看起来像：

```
public interface AsyncTaskCallback
{
    public processData(Object responseObject);
} 
```

现在在您的 onPostExecute 代码中，您需要执行以下操作：

```
@Override
protected void onPostExecute(Object r){
    if (r != null) {
       l.processData(data);
    }
} 
```

并将以下功能添加到您的异步任务中

```
public void addAsyncTaskListener (final AsyncTaskListener l){
    mCallback = l;
} 
```

然后最后在接口强制你的Activity实现的函数processData函数中添加listner并按照Activity中的需要处理数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:36:07.940

您可以使用 ArrayList 代替使用 String[] 在适配器中设置列表。

# c# - Linq to SQL 返回父行

> ID：14500361
> 
> 赞同：-1
> 
> 时间：2013-01-24T11:32:10.350
> 
> 标签：c#, .net, linq-to-sql

我有一个表格格式

```
Id (int)
ParentId (int) 
```

我需要查询出所有彼此相关的行，所以 ParentId = Id 但嵌套了多次

我有点坚持如何解决这个问题，我可能会恢复到存储过程，但我真的很想在纯 linq to sql 中尝试这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T12:06:12.633

我认为你有两个选择：

*   您必须显式获取父母，这会导致对 db 的许多单独调用。我认为 L2S 或 L2E 不支持这种架构（从 db 调用递归地获取自引用数据）。

*   在这些情况下，我倾向于使用我的数据库的本机功能（在这种情况下：[CTE](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)）。您可以使用自定义 sql 查询，也可以使用`db.ExecuteQuery<ReturnType>`. 如果您使用的是 sql server 2005+，则可以使用以下语法：

    `var allGroups =
    db.ExecuteQuery(
    @"WITH n(Id, ParentId) AS
    (SELECT Id, ParentId
    FROM MyTable
    WHERE Id = {0}
    UNION ALL
    SELECT nplus1.Id, nplus1.ParentId
    FROM MyTable as nplus1, n
    WHERE n.ParentId = nplus1.Id)
    SELECT Id, ParentId FROM n",
    firstChildId).ToList();`

这样，您就可以在一次调用中获取所有实体。查看[如何在 SQL Server 中进行上层递归自联接？](https://stackoverflow.com/questions/7780886/how-to-do-an-upper-recursive-self-join-in-sql-server)[在 SQL Server 中进行递归自联接的最简单方法是什么](https://stackoverflow.com/questions/1757260/simplest-way-to-do-a-recursive-self-join-in-sql-server)？.

# javascript - 有没有办法找出另一个元素中最宽的元素是什么？

> ID：14500368
> 
> 赞同：0
> 
> 时间：2013-01-24T11:32:40.363
> 
> 标签：javascript, css, html-table

我有以下问题：我正在一个使用表格布局的旧网站上工作。这是一张巨大而凌乱的桌子，里面有多达一百个元素。我不是故意发布代码 - 它是巨大的，我怀疑任何人都会有耐心或愿意通过它。

我面临的问题如下：有些东西正在拉伸桌子，使其比预期的要宽。我试图通过整个代码来弄清楚发生了什么，但没有运气。我尝试将表格的宽度设置为固定值，但没有结果。

所以，我的问题是，有没有办法弄清楚（可能使用 Javascript/jQuery）表中最宽的元素是什么？这可能会帮助我弄清楚是什么在拉伸它，因为逐行浏览这些东西需要几个小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:44:15.333

我会做这样的事情：

```
$('table').each(function() {
    $(this).find('*').each(function() {
       var oldWidth = $('body').data('width');
       if(oldWidth != 'undefined' && $(this).width() > oldWidth)
          $('body').data('width', $(this).width()); 
    });
}); 
```

没有测试过。希望它会有所帮助！

# c# - 如何验证字符串提供的文件路径是否采用有效的目录格式？

> ID：14500371
> 
> 赞同：0
> 
> 时间：2013-01-24T11:32:42.647
> 
> 标签：c#, .net, file-io

我在这里有一个相当直截了当的问题，但每次我必须处理文件路径和名称的验证时，我似乎都会重新审视自己。所以我想知道`System.IO`框架中是否有可用的方法或其他库可以让我的生活更轻松！？

让我们举一个人为的例子，该方法采用文件路径和文件名，并从这些输入中格式化并返回唯一的完整文件位置。

```
public string MakeFileNameUnique(string filePath, string fileName)
{
    return filePath + Guid.NewGuid() + fileName;
} 
```

我知道我必须执行以下操作才能以正确的格式获取路径，以便我可以附加 guid 和文件名：

*   如果 filePath 为 null 或为空，则抛出异常
*   如果 filePath 不存在则抛出异常
*   如果没有有效的后缀'/'，则添加一个
*   如果它包含后缀“\”，则删除并替换为“/”

有人可以告诉我是否有一种**框架**方法可以做到这一点（特别是前*斜杠/反斜杠*逻辑）来实现这种重复逻辑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:34:29.957

您是否正在寻找[`Path.Combine`](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)方法：

```
public string MakeFileNameUnique(string filePath, string fileName)
{
    return Path.Combine(filePath, Guid.NewGuid().ToString(), fileName);
} 
```

但是看看你的方法的名称（`MakeFileNameUnique`），你有没有考虑过使用这个[`Path.GenerateRandomFileName`](http://msdn.microsoft.com/en-us/library/system.io.path.getrandomfilename.aspx)方法？还是[`Path.GetTempFileName`](http://msdn.microsoft.com/en-us/library/system.io.path.gettempfilename.aspx)方法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:39:25.500

按照您的要求，这会做

```
public string MakeFileNameUnique(string filePath, string fileName)
{
    // This checks for nulls, empty or not-existing folders
    if(!Directory.Exists(filePath))
        throw new DirectoryNotFoundException();

    // This joins together the filePath (with or without backslash) 
    // with the Guid and the file name passed (in the same folder)
    // and replace the every backslash with forward slashes
    return Path.Combine(filePath, Guid.NewGuid() + "_" + fileName).Replace("\\", "/");
} 
```

与

```
string result = MakeFileNameUnique(@"d:\temp", "myFile.txt");
Console.WriteLine(result); 
```

将导致

```
d:/temp/9cdb8819-bdbc-4bf7-8116-aa901f45c563_myFile.txt 
```

但是我想知道用正斜杠替换反斜杠的原因

# python - 如何知道ipython下运行的是哪个python？

> ID：14500373
> 
> 赞同：2
> 
> 时间：2013-01-24T11:32:49.507
> 
> 标签：python, ipython

我的电脑上安装了几个版本的 python：

```
$ which ipython
/usr/local/share/python/ipython
$ ipython
Python 2.7.3 (default, Nov 28 2012, 13:43:07) 

$ which python
/usr/bin/python
$ python
Python 2.6.1 (r261:67515, Jun 24 2010, 21:47:49) 
```

我想找到在我的 ipython 下运行的 python bin。感谢您的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T11:48:33.960

```
In [1]: import sys

In [2]: sys.version
Out[2]: '2.7.2 |EPD_free 7.2-2 (32-bit)| (default, Sep 14 2011, 11:02:05) [MSC v.1500 32 bit (Intel)]'

In [3]: sys.executable
Out[3]: 'C:\\Python27\\python2.7.exe' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T11:39:41.710

尝试这个：

```
head -n 1 $(which ipython) 
```

# c# - c# XML Treeview (管道)

> ID：14500376
> 
> 赞同：3
> 
> 时间：2013-01-24T11:32:52.083
> 
> 标签：c#, xml, xaml, treeview, tree-nodes

我正在创建一个 XML 查看器，它应该能够读取每个 XML 文件并将其放入树视图中。我的目标是创建一个 XMLViewer 控件，用户应该能够在他自己的实现中更改某些例程。我提供了提供基本功能的默认实现，以便 XML 查看器至少显示默认行为。我正在尝试通过管道和代表来做到这一点。

**到目前为止我所拥有的：**

主窗口.xaml

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="30*" />
        <RowDefinition Height="25*" />
        <RowDefinition Height="175*" />
    </Grid.RowDefinitions>
    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,5,0,5">
        <TextBlock Text="XML File" VerticalAlignment="Center" />
        <TextBox Name="txtPath" Width="400" IsReadOnly="True" Margin="5,0,5,0"/>
        <Button Content="Open" Name="btnOpen"  />
    </StackPanel>

    <Button Name="btnPlumb" Content="Plumb the code!" Grid.Row="1"/>
    <uc:XMLTreeView x:Name="XMLOutput" Grid.Row="2" />
</Grid> 
```

主窗口.xaml.cs

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        //Events
        btnOpen.Click += new RoutedEventHandler(ClickedOnOpen);
        btnPlumb.Click += new RoutedEventHandler(ClickedOnPlumb);
    }

    private void ClickedOnPlumb(object sender, RoutedEventArgs e)
    {
        plumbCode();
    }

    private void ClickedOnOpen(object sender, RoutedEventArgs e)
    {
        selectXMLFile();
    }

    private void selectXMLFile()
    {
        OpenFileDialog ofd = new OpenFileDialog();
        ofd.Filter = "XML-Files |*.xml";
        ofd.InitialDirectory = "C:\\";

        if (ofd.ShowDialog() == true)
        {
            string path = ofd.FileName;
            txtPath.Text = path;
            XMLOutput.processXML(path);
        }
    }

    private void plumbCode()
    {
        XMLOutput.PlumbTheCode();
    }
} 
```

类 XMLTreeView

```
namespace XMLViewer
{
class XMLTreeView : TreeView
{
    public XmlDocument doc;

    public void processXML(string path)
    {
        XmlDocument document = new XmlDocument();
        this.doc = document;
        doc.Load(path);

        foreach (XmlNode node in doc.ChildNodes)
        {
            XMLTreeViewItem newItem = new XMLTreeViewItem(node);
            this.AddChild(newItem);
        }
    }

    public void PlumbTheCode()
    {
        this.Items.Clear();

        foreach (XmlNode node in doc.ChildNodes)
        {
            XMLTreeViewItem newItem;
            newItem = new XMLTreeViewItem(node);

            newItem._LoadColor = new LoadColorDelegate(newItem.LoadColorPlumbed);
            newItem._LoadColor.Invoke(node);

            this.AddChild(newItem);
        }

    }
}
} 
```

类 XMLTreeViewItem

```
namespace XMLViewer
{

public delegate void LoadHeaderDelegate(XmlNode node);
public delegate void LoadColorDelegate(XmlNode node);
public delegate void CheckForChildrenDelegate(XmlNode node);

public class XMLTreeViewItem:TreeViewItem
{

   public LoadHeaderDelegate _LoadHeader { get; set; }
   public LoadColorDelegate _LoadColor { get; set; }
   public CheckForChildrenDelegate _CheckForChildren { get; set; }

    public XMLTreeViewItem(XmlNode node)
    {
        _LoadHeader = new LoadHeaderDelegate(LoadHeader);
        _LoadColor = new LoadColorDelegate(LoadColor);
        _CheckForChildren = new CheckForChildrenDelegate(CheckForChildren);

        _LoadHeader.Invoke(node);
        _LoadColor.Invoke(node);
        _CheckForChildren.Invoke(node);
    }

    #region HEADER
    private void LoadHeader(XmlNode RootNode)
    {
        if (RootNode.HasChildNodes == false)
        {
            this.Header = RootNode.InnerText.ToUpper();
        }
        else
        {
            this.Header = RootNode.Name.ToUpper();
        }

        if (RootNode.Attributes != null)
        {
            foreach (XmlAttribute attr in RootNode.Attributes)
            {
                this.Header += " " + attr.Name + " = " + attr.InnerText;
            }
        }
    } 
    #endregion

    #region COLOR
    private void LoadColor(XmlNode node)
    {
        this.Foreground = Brushes.Black;
    }
    public void LoadColorPlumbed(XmlNode node)
    {
        this.Foreground = Brushes.Green;
    } 
    #endregion

    #region CHILDREN
    private void CheckForChildren(XmlNode node)
    {
        if (node.HasChildNodes)
        {
            LoadChildren(node);
        }
    }

    private void LoadChildren(XmlNode RootNode)
    {
        foreach (XmlNode node in RootNode.ChildNodes)
        {
            XMLTreeViewItem newItem = new XMLTreeViewItem(node);
            this.AddChild(newItem);
        }
    } 
    #endregion
}
} 
```

[http://oi47.tinypic.com/34o94cw.jpg](http://oi47.tinypic.com/34o94cw.jpg)

**我的目标：**

[http://i46.tinypic.com/29uua83.png](http://i46.tinypic.com/29uua83.png)

如您所见，我无法正确显示我的 Treenodes。有没有人有解决这个问题的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:43:12.943

好的，所以您正在尝试实现具有扩展点的树视图，以便为 xml 节点提供自定义颜色/标题。

为此，您为每个 XMLTreeViewItem 添加了几个公共委托，调用者可以覆盖这些委托以提供自己的颜色/标题/等。

当前解决方案的问题是只有根节点才能获得自定义委托进行着色。构造根 xml 节点时，通过构造新的 XMLTreeViewItem 来加载所有子节点，它们具有 LoadColor 委托的默认实现。

您需要将委托覆盖复制到每个新创建的节点中，或者保留对具有覆盖委托的根节点的引用。

另一个问题是整个 XMLTreeViewItem 树是在构造函数中生成的，并且仅在之后才提供委托覆盖：

```
newItem = new XMLTreeViewItem(node);

newItem._LoadColor = new LoadColorDelegate(newItem.LoadColorPlumbed);
newItem._LoadColor.Invoke(node); 
```

这意味着在您执行 _LoadColor.Invoke 时，整个树已经构建完毕并且其颜色已初始化。_LoadColor = new LoadColorDelegate 将覆盖您已传递给所有子节点的委托，而 _LoadColor.Invoke 只会为根节点着色。

我建议如何解决这个问题：

将 LoadHeader / CheckForChildren / LoadColor 方法（您希望允许覆盖）移动到 XMLTreeView 类，并在那里公开为公共属性：

```
private void LoadColor(XMLTreeViewItem item, XmlNode node)
{
    item.Foreground = Brushes.Black;
} 
```

修改 XMLTreeViewItem 的构造函数以接受 XMLTreeView 的实例，并在每个节点中存储父引用：

```
public XMLTreeViewItem(XmlNode node, XMLTreeView parentTreeView)
{...} 
```

现在，像这样构造树：

```
public void PlumbTheCode()
{
    this.Items.Clear();

    this._LoadColor = new LoadColorDelegate(newItem.LoadColorPlumbed);
    foreach (XmlNode node in doc.ChildNodes)
    {
        this.AddChild(new XMLTreeViewItem(node, this));
    }
} 
```

另一种解决方案是将新的着色/标题委托直接传递给 XMLTreeViewItem 构造函数，并递归传递给所有较低的节点。这将使 XMLTreeView 保持对着色委托的清洁，但可能会使此类用户的定制复杂化，因为他们需要覆盖每个节点中的委托。

# javascript - 带 d3 的面积图不在 jsp 页面上呈现，但在 html 上工作正常

> ID：14500380
> 
> 赞同：3
> 
> 时间：2013-01-24T11:33:04.473
> 
> 标签：javascript, jsp, d3.js

我在 html 页面中成功渲染了 d3js 区域图这是在 chrome 或 mozilla 中成功渲染的代码。文件的名称是 temp.html。这是代码

```
<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
<title>js graphs and charts libraries</title>
<script 
src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="http://d3js.org/d3.v3.js"></script>

<body>
    <div id="dbar">

    </div>

<script type="text/javascript"> 
    var margin = {top:10, right: 20, bottom: 30,left: 40},
        width = 960 - margin.left - margin.right,
        height = 400 - margin.top - margin.bottom;
        var svg = d3.select ("#dbar").append("svg").attr("width",
width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom)
.append("g").
attr("transform","translate("+margin.left+","+margin.top+")");
 var parseDate = d3.time.format("%m-%Y").parse;

    var x = d3.time.scale().range([0, width]);
    var y = d3.scale.linear().range([height, 0]);

    var xAxis = d3.svg.axis().scale(x).orient("bottom");

    var yAxis = d3.svg.axis().scale(y).orient("left");

    var area = d3.svg.area().x(function(d) { return x(d.date); })
                .y0(height)
                .y1(function(d) { return y(d.count); });
d3.json("data/json.json", function(error, data) {
      data.StoreVisitGraphCount.list.forEach(function(d) {

        d.date = parseDate(d.date);

        d.count = +d.count;
      });
      //console.log(data.StoreVisitGraphCount.list);
    x.domain(d3.extent(data.StoreVisitGraphCount.list, function(d) {
return d.date; }));
    y.domain([0, d3.max(data.StoreVisitGraphCount.list, function(d) { 
return d.count; })]);
console.log(data.StoreVisitGraphCount.list);
  svg.append("path")
      .datum(data.StoreVisitGraphCount.list)
      .attr("class", "area")
      .attr("d", area);

  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Price ($)");
    });
</script>

</body>
</html> 
```

但是当我复制粘贴这段代码说“temp.jsp”页面时，它没有呈现并且图表没有出现。我在tomcat服务器上运行这个页面。

需要建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:31:50.517

这不是因为您将其保存为 jsp 或 html 页面。您需要将 charset="UTF-8" 添加到脚本声明中，因为 d3.js 使用 UTF 字符。

例如。

```
<script src="http://d3js.org/d3.v3.js" charset="UTF-8"></script> 
```

# salesforce - 如何在 developer.salesforce.com 中查询帐户

> ID：14500386
> 
> 赞同：0
> 
> 时间：2013-01-24T11:33:25.630
> 
> 标签：salesforce, crm, visualforce, force.com

我是一名销售人员新手，所以我的问题可能是一个微不足道的问题。刚刚试了这里的代码`http://www.tgerm.com/2011/03/javascript-remoting-jquery-templates.html` 从一个视觉力页面查询账户。我就是想知道，有没有办法直接在`developer.force.com`界面中查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:46:57.620

如果您不想在您的机器上安装任何软件，您可以随时使用[Workbench](https://workbench.developerforce.com/)（查询 -> SOQL 查询）。它在[http://wiki.developerforce.com/page/Workbench上有描述](http://wiki.developerforce.com/page/Workbench)

或者，当您登录到您的组织时，请查看右上角的链接并转到“开发人员控制台”。但它主要是针对 Apex 的广告执行，所以如果你想要查询它不会是最佳匹配，充满分配给列表或调用`System.debug()`......

# angularjs - 由于 angularjs 中的 ng-repeat 导致的错误

> ID：14500388
> 
> 赞同：3
> 
> 时间：2013-01-24T11:33:30.357
> 
> 标签：angularjs

我使用嵌套的 ng-repeat 在 html 页面中显示我的数据。

它抛出一个错误

```
Error: Error: 10 $digest() iterations reached. Aborting!
Watchers fired in the last 5 iterations 
```

但是这个错误不会影响我的功能。我正在寻找这个问题的答案，但我没有得到正确的答案，所以我在这里发布了这个问题。

我不知道我的 json 数据结构是否会导致此错误，但我无法更改其结构。

这是我的示例 json 数据

```
 //In controller
for (var i = 1; i <= 31; i++) {
$scope.daysofmonth.push({day:i});    // daysofmonth.day->1,2,3...
}
for(var j=0; j<$scope.daysofmonth.length; j++) {
$scope.daysofmonth[j].events = [     // creating 31 arrays for events
    {"name":"T", "count":0,"data":[{
         "startDate":"01/25/2013",
         "startTime":"00:00",
         "endDate":"01/26/2013",
         "endTime":"00:00",
         "type":"m",
         "status":"Not Started",
         "title":"Demo to Client",
         "description":"Application demo"
             }]},
    {"name":"I", "count":0,"data":[...]} // same as previous
    ];
 //left some of the business logic
}

    //In html file
    <div class="{{box | today:year+'-'+month+'-'+dayofmonth.day:dayofmonth.day}}"  ng-repeat="dayofmonth in daysofmonth" >
    <span class="days">{{ dayofmonth.day }}</span>
    <span class="events-list">
            <div ng-repeat="eve in dayofmonth.events" >   
                {{ eve.count + eve.name }} 
        </div>
    </span>
    </div> 
```

谁能告诉我是什么导致了这个错误以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:26:56.633

该 JSON 无效。此外，您的模板不会输出任何可见的内容，除非您在转发器中放置一些绑定标签，`{{ Company.Company.id }}`例如。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:44:05.993

这可能是因为您正在 ng-repeat 内的视图中初始化对象。因此，我遇到了类似的问题。请看这个链接

[错误：达到 10 次 $digest() 迭代。中止！使用动态 sortby 谓词](https://stackoverflow.com/questions/14376879/error-10-digest-iterations-reached-aborting-with-dynamic-sortby-predicate)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T18:19:32.353

正如其他人已经说过的，数据是无效的。虽然它可能是有效的 JSON，但它不是有效的 javascript。我根据数据结构创建了一个 plunker 示例，将其清理为有效的 javascript，并且嵌套的 ng 重复没有任何错误。

当然，只有两个，因为这就是您在上面的代码片段中显示的全部内容。但它适用于这两个，并且应该同样适用于额外的嵌套重复。

[http://plnkr.co/edit/z36YclsngdX9HozgdUkQ?p=preview](http://plnkr.co/edit/z36YclsngdX9HozgdUkQ?p=preview)

# php - javascript 框不显示 - 值

> ID：14500389
> 
> 赞同：0
> 
> 时间：2013-01-24T11:33:31.307
> 
> 标签：php, javascript, html

我希望在用户单击 - 按钮时不显示我的负面角色。计数应以 0 结束。现在也显示 -1、-2、-3 字符。我只想显示 0 或多于 0

```
<script type="text/javascript" >                                
            function plus(){
                var addplus = 1;
                var plus = document.getElementById('qty').value;
                addplus = parseInt(addplus) + parseInt(plus); 
                document.getElementById('qty').value = addplus;
            }
            function negtive(){
                var neg;
                var negtive = 1;
                var negtives = document.getElementById('qty').value;
                negtive = parseInt(negtives) - parseInt(negtive);               
                document.getElementById('qty').value = negtive;             
            }
        </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:38:03.063

把这条线

```
if(negtive<0)
    negtive = 0; 
```

后

```
negtive = parseInt(negtives) - parseInt(negtive); 
```

或者

```
document.getElementById('qty').value = ((negtive <0)?0:negtive ); 
```

# javascript - Javascript函数不存在

> ID：14500391
> 
> 赞同：0
> 
> 时间：2013-01-24T11:33:35.880
> 
> 标签：javascript, jquery, scope

我有以下 Javascript 代码，它创建了一个具有点击事件的按钮元素。

```
function Button(id, url, blockMsg){

var id = id;
var url = url;
var blockMsg = blockMsg;
var message;

this.getId = function(){
    return id;
};

this.getMessage = function(){
    return message;
};

block = function(msg){
    $.blockUI({
        message: msg
    });
};

unblock = function(){
    $.unblockUI();
};

showErrors = function(){
    console.log('errors');
}

$(id).bind('click', function(){
    $.ajax({
        url: url,
        type: 'POST',
        beforeSend: function(){
            block(blockMsg);
        },
        error: function(response){
            message = $.parseJSON(response);
            message.action();
            unblock();
            console.log(action);
        },
        success: function(response){
            message = $.parseJSON(response);
            [message.action]();
            unblock();
            console.log(action);
        }
    });
});
};

$(document).ready(function(){
var buttonRegister = new Button('#btnCompanyRegister', '/company/register/', 'register ...');
}); 
```

当我单击按钮时，一切正常，我的 PHP 脚本返回

```
json_encode(array('action' => 'showErrors')); 
```

在 FireBug 中我可以看到错误：["showErrors"] is not a function

我究竟做错了什么？为什么没有指定功能？我有范围问题吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T11:36:13.717

而不是`[message.action]();`使用`window[message.action]();`.

`message.action`是字符串“showErrors”——它不是一个函数。`showErrors`您可以从窗口对象中获取全局函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:35:18.450

`;`函数声明后丢失。

```
showErrors = function(){
    console.log('errors');
}; 
```

# kendo-ui - 设置 DateTimePicker 以显示特定的时间范围，例如仅工作时间

> ID：14500397
> 
> 赞同：6
> 
> 时间：2013-01-24T11:34:06.723
> 
> 标签：kendo-ui

我正在尝试将我的 kendoDateTimePicker 配置为仅显示上午 9 点到下午 6 点。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-08T09:41:10.287

```
 var startDateReference = $('.startDate').kendoDateTimePicker({
        format: "dd-MM-yy HH:mm:ss",
        value : new Date(),
     }).data("kendoDateTimePicker");

     startDateReference.timeView.options.min = new Date(2000, 0, 1, 7, 30, 0);
     startDateReference.timeView.options.max = new Date(2000, 0, 1, 18, 00, 0); 
```

这对我有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T12:16:46.283

使用 Kendo [`DateTimePicker`](http://docs.kendoui.com/api/web/datetimepicker)，您可以选择日期`min`和`max`日期，但不能选择每天的时间范围，**但**您可以使用[`TimePicker`](http://docs.kendoui.com/api/web/timepicker).

也许你可以分解你的用户界面，[`DatePicker`](http://docs.kendoui.com/api/web/datepicker)然后`TimePicker`选择[`max`](http://docs.kendoui.com/api/web/timepicker#max-datedefault)和[`min`](http://docs.kendoui.com/api/web/timepicker#min-datedefault)符合你的时间范围。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-01T13:44:41.063

我知道这个问题被问到已经有一段时间了。但我会添加我的回复以供将来参考。

kendo DateTimePicker 不支持向 TimePicker 添加范围。但是您可以添加自己的小部件来执行此操作。

```
(function($) {
        var dateTimePicker = kendo.ui.DateTimePicker;

        var MyWidget = dateTimePicker.extend({

            init: function(element, options) {
                dateTimePicker.fn.init.call(this, element, options);
            },
            startTime: function(startTime) {
                var timeViewOptions = this.timeView.options;
                timeViewOptions.min = startTime;
                this.timeView.setOptions(timeViewOptions);
            },
            endTime: function(endTime) {
                var timeViewOptions = this.timeView.options;
                timeViewOptions.max = endTime;
                this.timeView.setOptions(timeViewOptions);
            },
            options: {
                name: "CustomDateTimePicker"
            }
        });

        kendo.ui.plugin(MyWidget);

    })(jQuery); 
```

然后你可以`CustomDateTimePicker`这样称呼你：

```
var datePicker = $("#date-picker").kendoCustomDateTimePicker().data("kendoCustomDateTimePicker");
    datePicker.startTime("07:00");
    datePicker.endTime("11:00"); 
```

[jsfiddle 演示。](https://jsfiddle.net/waelkat/x0ttxnn2/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-20T14:54:28.703

我只是把这个技巧放在一起，因为我觉得日期时间选择器应该用于选择日期和时间，而不是有一个用于组成单个值的日期选择器和时间选择器的怪异 ui：

```
 $('#NewScheduledDateTime_timeview > li').each(function () {   

        bool removeTimeCondition = /* code to determine if time should be removed */

        if (removeTimeCondition)
            $(this).remove();
    }) 
```

列表的 id 会有所不同。要找到它，请使用您最喜欢的浏览器的开发工具展开时间列表和某个时间的“检查元素”。

我应该提一下，如果 Kendo UI 更新到较新版本，这很可能会中断。就像我说的，这是一个黑客。但是话又说回来，当我们尝试更新 Kendo UI 的版本时，即使是非 hacky 的东西也会中断。经验教训：不要使用 Kendo UI。

# windows - 随机选择15个文件复制到输出文件夹

> ID：14500399
> 
> 赞同：0
> 
> 时间：2013-01-24T11:34:11.230
> 
> 标签：windows, batch-file, cmd

必须在 XP/Vista/7 上工作。可以使用批处理、VBS 或任何其他任何具有上述 O/Ses 的人都可以运行（PE 除外）。

需要随机选择15个文件，还有同名的文件夹（在不同的位置），同时复制到自己的文件夹中。

我搜索了 google 和 robvanderwoude.com 之类的网站，并找到了一些相近的例子，但我太缺乏经验，无法将这些例子改编成我需要的东西，而不会交叉眼。如果有人能指出我正确的方向（最有效/最容易使用的方法），或者一些可能带有简短解释的示例，我将不胜感激，我也可以从中学习。

布局说明：

```
30 files:
%~dp0\mod\store\XMLs -> %~dp0\mod\0.1.2\map\data  
map01_aaa.xml  
map02_bbb.xml  
map03_ccc.xml  
...  
map60_zzz.xml

30 folders:
%~dp0\mod\store\models -> %~dp0\mod\0.1.2\sky\stuff  
01_aaa_map  
02_bbb_map  
03_ccc_map  
...  
60_zzz_map 
```

下面的代码是我试图采用的，但它只按顺序选择 15 个文件/文件夹。尝试在 SrcMax 的方程式中使用 %random% 环境变量，但这只是选择随机数量的文件，并且总是从第一个文件开始。
（旧代码）

```
rem @ECHO OFF
setlocal ENABLEDELAYEDEXPANSION ENABLEEXTENSIONS
SET SrcCount=0
SET SrcMax=15

  FOR %%F IN (%~dp0\mod\store\XMLs\*.*) DO IF !SrcCount! LSS %SrcMax% (
  SET /A SrcCount += 1
  ECHO !SrcCount! COPY %%F %~dp0\mod\0.1.2\map\data\
  COPY %%F %~dp0\mod\0.1.2\map\data\
  SET FNAME=%%~nF
  ECHO XCOPY /s "%~dp0\mod\store\Models\!FNAME:~3!_map"  "%~dp0\mod\0.1.2\sky\stuff\!FNAME:~3!_map\"
  XCOPY /s "%~dp0\mod\store\Models\!FNAME:~3!_map"  "%~dp0\mod\0.1.2\sky\stuff\!FNAME:~3!_map\"
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:22:19.153

我相信这应该有效。

```
@echo off
setlocal enabledelayedexpansion
set XMLs_src=.\mod\store\XMLs
set XMLs_dest=.\mod\0.1.2\map\data
set maps_src=.\mod\store\models
set maps_dest=.\mod\0.1.2\sky\stuff

rmdir /q /s "%XMLs_dest%" 2>NUL
rmdir /q /s "%maps_dest%" 2>NUL
mkdir "%XMLs_dest%"
mkdir "%maps_dest%"

for /L %%X in (1,1,15) do (
    call :rnd rn
    call :xml !rn!
    call :map !rn!
)
copy "%XMLs_dest%\*.*" "%XMLs_src%" >NUL
echo d | xcopy /q /f /e /y "%maps_dest%\*" "%maps_src%" >NUL
echo Done.
goto :EOF

:rnd
set c=0
for /d %%I in (%maps_src%\*) do set /a c+=1 >NUL
set /a %1=%RANDOM% * %c% / 32768 + 1 >NUL
goto :EOF

:xml
set c=0
for /f %%I in ('dir /b /o:n "%XMLs_src%"') do (
    set /a c+=1 >NUL
    if !c!==%1 (
        echo %XMLs_src%\%%I -^> %XMLs_dest%\%%I
        move "%XMLs_src%\%%I" "%XMLs_dest%" >NUL
        goto :EOF
    )
)
goto :EOF

:map
set c=0
for /f %%I in ('dir /b /o:n "%maps_src%"') do (
    set /a c+=1 >NUL
    if !c!==%1 (
        echo %maps_src%\%%I -^> %maps_dest%\%%I
        echo d | xcopy /q /f /e /y "%maps_src%\%%I" "%maps_dest%\%%I" >NUL
        rmdir /q /s "%maps_src%\%%I"
        goto :EOF
    )
)
goto :EOF 
```

它基本上是为了防止重复，然后从目标复制回源以恢复被移走的内容。

# assembly - 升序代码问题

> ID：14500402
> 
> 赞同：0
> 
> 时间：2013-01-24T11:34:19.473
> 
> 标签：assembly, x86

我的代码中有什么问题？如果您查看下面的代码，我正在尝试以简单的方式进行升序排序，但它无法运行。

我们在代码中使用了一个数组。它是一个预定义的数组，包括数组的每个单元格上的几个成员。所以我们正在尝试排序`arr1`。

```
datasg segment para 'data'
  arr1 db 8,2,7,4,3
datasg ends

codesg segment para 'code'   

main proc far
  Assume cs:codesg, ds:datasg
    mov ax, datasg
    mov ds, ax
    mov es, ax
    mov bx, OFFSET arr1
    mov cx, 5
    mov dx, cx
    L1:      
       mov si, 0
       mov ax, si
       inc ax
       mov di, ax
       mov dx, cx
    L2:
       mov al, [bx][si]
       cmp al, [bx][di]
       jg L4
    L3:
       inc si
       inc di
       dec dx
       cmp dx, 00
       je L1
       jg L2
    L4:
       mov al, [bx][si]
       mov ah, [bx][di]
       mov [bx][si], ah
       mov [bx][di], al
       inc si
       inc di       
       dec dx
       cmp dx, 00
       je L1
       jg L2
    Exit:
       mov ax, 4c00h
       int 21h
main endp
codesg ends
End main 
```

我使用的环境是emu8086。

**编辑1：**

似乎只是在`L1`, `L2`, , 之间频繁跳转`L3`，有点无限循环。事实上，运行时没有错误。如果代码没有问题，我如何将排序数组（最终）打印给用户作为导出？

# php - 使用 exec() 在浏览器中调用 python 脚本时出错

> ID：14500416
> 
> 赞同：0
> 
> 时间：2013-01-24T11:34:56.983
> 
> 标签：php, python, exec

我正在尝试通过 php 调用 python 脚本：

```
<?php
    $a = exec("python ~/www/encrypt.py");
    echo $a;
?> 
```

我使用终端和`php index.php`命令查看结果，它运行良好，但在网络浏览器中它不显示任何内容。

**通过完整路径**解决的问题>>**`exec("python /var/www/encrypt.py");`**

# java - 来自 Firebird 数据库的 Netbeans Hibernate 映射文件和 POJO 向导中的 NullPointerException

> ID：14500429
> 
> 赞同：5
> 
> 时间：2013-01-24T11:35:20.983
> 
> 标签：java, hibernate, netbeans, firebird

我正在使用 netbeans、hibernate 和 firebird 开发一个桌面应用程序。

该向导不会给我创建文件 hibernate.cfg.xml 或 HibernateUtil.java 带来麻烦

但是通过尝试：New -> Other -> Hibernate -> Hibernate Mapping Files and POJOs from Database，使用我的 hibernate.cfg.xml 和 hibernate.reveng.xml，向导会抛出异常：

**Hibernate 配置失败并显示消息：java.lang.NullPointerException message.log 有关详细信息，请参阅异常。**

**我正在使用**

产品版本：NetBeans IDE 7.2.1（内部版本 201210100934）
Java：1.7.0_11；Java HotSpot(TM) Client VM 23.6-b04
系统：在 x86 上运行的 Windows XP 5.1 版；CP1252; es_ES (nb)
火鸟版本：2.1.1

**休眠.cfg.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.FirebirdDialect</property>
    <property name="hibernate.connection.driver_class">org.firebirdsql.jdbc.FBDriver</property>
    <property name="hibernate.connection.url">jdbc:firebirdsql://ip_from_my_server:3050/path_to_my_database.gdb</property>
    <property name="hibernate.connection.username">sysdba</property>
    <property name="hibernate.connection.password">masterkey</property>
  </session-factory>
</hibernate-configuration> 
```

**HibernateUtil.java**

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package mypackage.util;

import org.hibernate.cfg.AnnotationConfiguration;
import org.hibernate.SessionFactory;

/**
 * Hibernate Utility class with a convenient method to get Session Factory
 * object.
 *
 */
public class HibernateUtil {

    private static final SessionFactory sessionFactory;

    static {
        try {
            // Create the SessionFactory from standard (hibernate.cfg.xml) 
            // config file.
            sessionFactory = new AnnotationConfiguration().configure().buildSessionFactory();
        } catch (Throwable ex) {
            // Log the exception. 
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }
} 
```

**休眠.reveng.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-reverse-engineering PUBLIC "-//Hibernate/Hibernate Reverse Engineering DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-reverse-engineering-3.0.dtd">
<hibernate-reverse-engineering>
  <schema-selection/>
  <table-filter match-name="atable"/>
</hibernate-reverse-engineering> 
```

**这是文件视图，log ide**

```
>Log Session: Thursday, January 24, 2013 12:09:08 PM CET
>System Info: 
  Product Version         = NetBeans IDE 7.2.1 (Build 201210100934) (#a183c5e41a19)
  Operating System        = Windows XP version 5.1 running on x86
  Java; VM; Vendor        = 1.7.0_11; Java HotSpot(TM) Client VM 23.6-b04; Oracle Corporation
  Runtime                 = Java(TM) SE Runtime Environment 1.7.0_11-b21
  Java Home               = C:\Archivos de programa\Java\jdk1.7.0_11\jre
  System Locale; Encoding = es_ES (nb); Cp1252
  Home Directory          = C:\Documents and Settings\miusuario
  Current Directory       = C:\Archivos de programa\NetBeans 7.2.1
  User Directory          = C:\Documents and Settings\miusuario\Datos de programa\NetBeans\7.2.1
  Cache Directory         = C:\Documents and Settings\miusuario\Configuraci?n local\Datos de programa\NetBeans\Cache\7.2.1
  Installation            = C:\Archivos de programa\NetBeans 7.2.1\nb
                            C:\Archivos de programa\NetBeans 7.2.1\ide
                            C:\Archivos de programa\NetBeans 7.2.1\java
                            C:\Archivos de programa\NetBeans 7.2.1\apisupport
                            C:\Archivos de programa\NetBeans 7.2.1\webcommon
                            C:\Archivos de programa\NetBeans 7.2.1\websvccommon
                            C:\Archivos de programa\NetBeans 7.2.1\enterprise
                            C:\Archivos de programa\NetBeans 7.2.1\profiler
                            C:\Archivos de programa\NetBeans 7.2.1\harness
                            C:\Archivos de programa\NetBeans 7.2.1\javafx
                            C:\Archivos de programa\NetBeans 7.2.1\platform
  Boot & Ext. Classpath   = C:\Archivos de programa\Java\jdk1.7.0_11\jre\lib\resources.jar;C:\Archivos de programa\Java\jdk1.7.0_11\jre\lib\rt.jar;C:\Archivos de programa\Java\jdk1.7.0_11\jre\lib\sunrsasign.jar;C:\Archivos de programa\Java\jdk1.7.0_11\jre\lib\jsse.jar;C:\Archivos de programa\Java\jdk1.7.0_11\jre\lib\jce.jar;C:\Archivos de programa\Java\jdk1.7.0_11\jre\lib\charsets.jar;C:\Archivos de programa\Java\jdk1.7.0_11\jre\lib\jfr.jar;C:\Archivos de programa\Java\jdk1.7.0_11\jre\classes;C:\Archivos de programa\Java\jdk1.7.0_11\jre\lib\ext\access-bridge.jar;C:\Archivos de programa\Java\jdk1.7.0_11\jre\lib\ext\dnsns.jar;C:\Archivos de programa\Java\jdk1.7.0_11\jre\lib\ext\jaccess.jar;C:\Archivos de programa\Java\jdk1.7.0_11\jre\lib\ext\localedata.jar;C:\Archivos de programa\Java\jdk1.7.0_11\jre\lib\ext\sunec.jar;C:\Archivos de programa\Java\jdk1.7.0_11\jre\lib\ext\sunjce_provider.jar;C:\Archivos de programa\Java\jdk1.7.0_11\jre\lib\ext\sunmscapi.jar;C:\Archivos de programa\Java\jdk1.7.0_11\jre\lib\ext\sunpkcs11.jar;C:\Archivos de programa\Java\jdk1.7.0_11\jre\lib\ext\zipfs.jar
  Application Classpath   = C:\Archivos de programa\NetBeans 7.2.1\platform\lib\boot.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\lib\org-openide-modules.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\lib\org-openide-util-lookup.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\lib\org-openide-util.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\lib\locale\boot_ja.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\lib\locale\boot_pt_BR.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\lib\locale\boot_ru.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\lib\locale\boot_zh_CN.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\lib\locale\org-openide-modules_ja.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\lib\locale\org-openide-modules_pt_BR.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\lib\locale\org-openide-modules_ru.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\lib\locale\org-openide-modules_zh_CN.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\lib\locale\org-openide-util-lookup_ja.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\lib\locale\org-openide-util-lookup_pt_BR.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\lib\locale\org-openide-util-lookup_ru.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\lib\locale\org-openide-util-lookup_zh_CN.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\lib\locale\org-openide-util_ja.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\lib\locale\org-openide-util_pt_BR.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\lib\locale\org-openide-util_ru.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\lib\locale\org-openide-util_zh_CN.jar;C:\Archivos de programa\Java\jdk1.7.0_11\lib\dt.jar;C:\Archivos de programa\Java\jdk1.7.0_11\lib\tools.jar
  Startup Classpath       = C:\Archivos de programa\NetBeans 7.2.1\platform\core\core.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\core\org-openide-filesystems.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\core\locale\core_ja.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\core\locale\core_pt_BR.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\core\locale\core_ru.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\core\locale\core_zh_CN.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\core\locale\org-openide-filesystems_ja.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\core\locale\org-openide-filesystems_pt_BR.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\core\locale\org-openide-filesystems_ru.jar;C:\Archivos de programa\NetBeans 7.2.1\platform\core\locale\org-openide-filesystems_zh_CN.jar;C:\Archivos de programa\NetBeans 7.2.1\nb\core\org-netbeans-upgrader.jar;C:\Archivos de programa\NetBeans 7.2.1\nb\core\locale\core_nb.jar;C:\Archivos de programa\NetBeans 7.2.1\nb\core\locale\core_nb_ja.jar;C:\Archivos de programa\NetBeans 7.2.1\nb\core\locale\core_nb_pt_BR.jar;C:\Archivos de programa\NetBeans 7.2.1\nb\core\locale\core_nb_ru.jar;C:\Archivos de programa\NetBeans 7.2.1\nb\core\locale\core_nb_zh_CN.jar;C:\Archivos de programa\NetBeans 7.2.1\nb\core\locale\org-netbeans-upgrader_ja.jar;C:\Archivos de programa\NetBeans 7.2.1\nb\core\locale\org-netbeans-upgrader_pt_BR.jar;C:\Archivos de programa\NetBeans 7.2.1\nb\core\locale\org-netbeans-upgrader_ru.jar;C:\Archivos de programa\NetBeans 7.2.1\nb\core\locale\org-netbeans-upgrader_zh_CN.jar
-------------------------------------------------------------------------------
INFO [org.netbeans.modules.hibernate.util.CustomClassLoader]: file:/C:/proyectos/NetBeans.7.1.2/HibernateFirebird/build/classes/
INFO [org.hibernate.cfg.Configuration]: configuring from file: hibernate.cfg.xml
INFO [org.hibernate.cfg.Configuration]: Configured SessionFactory: null
INFO [org.hibernate.cfg.reveng.OverrideRepository]: Override file: C:\proyectos\NetBeans.7.1.2\HibernateFirebird\src\hibernate.reveng.xml
INFO [org.netbeans.modules.hibernate.util.HibernateUtil]: Found pre-existing database connection.
INFO [org.netbeans.modules.hibernate.util.HibernateUtil]: Database Connection is pre-established. Returning the conneciton.
INFO [org.hibernate.connection.ConnectionProviderFactory]: Initializing connection provider: org.netbeans.modules.hibernate.util.CustomJDBCConnectionProvider
INFO [org.netbeans.modules.hibernate.util.CustomJDBCConnectionProvider]: Loaded JDBC driver 
INFO [org.netbeans.modules.hibernate.util.CustomJDBCConnectionProvider]: Got connection.. returning
INFO [org.netbeans.modules.hibernate.wizards.HibernateCodeGenWizardDescriptor]: access to hibernate fails.
java.lang.NullPointerException
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:86)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2005)
    at org.hibernate.cfg.JDBCMetaDataConfiguration.readFromJDBC(JDBCMetaDataConfiguration.java:40)
    at org.netbeans.modules.hibernate.wizards.HibernateCodeGenWizardDescriptor.checkConfig(HibernateCodeGenWizardDescriptor.java:282)
[catch] at org.netbeans.modules.hibernate.wizards.HibernateCodeGenWizardDescriptor.isValid(HibernateCodeGenWizardDescriptor.java:177)
    at org.openide.WizardDescriptor.updateStateOpen(WizardDescriptor.java:900)
    at org.openide.WizardDescriptor.updateState(WizardDescriptor.java:844)
    at org.openide.loaders.TemplateWizard.updateState(TemplateWizard.java:732)
    at org.netbeans.modules.project.ui.NewFileWizard.updateState(NewFileWizard.java:122)
    at org.openide.WizardDescriptor$Listener.stateChanged(WizardDescriptor.java:2094)
    at org.openide.util.WeakListenerImpl$Change.stateChanged(WeakListenerImpl.java:329)
    at org.openide.util.ChangeSupport.fireChange(ChangeSupport.java:133)
    at org.openide.util.ChangeSupport.fireChange(ChangeSupport.java:119)
    at org.netbeans.modules.project.ui.TemplateChooserPanel.stateChanged(TemplateChooserPanel.java:182)
    at org.openide.util.ChangeSupport.fireChange(ChangeSupport.java:133)
    at org.openide.util.ChangeSupport.fireChange(ChangeSupport.java:119)
    at org.netbeans.modules.project.ui.TemplateChooserPanelGUI.fireChange(TemplateChooserPanelGUI.java:164)
    at org.netbeans.modules.project.ui.TemplateChooserPanelGUI.access$500(TemplateChooserPanelGUI.java:78)
    at org.netbeans.modules.project.ui.TemplateChooserPanelGUI$FileChooserBuilder.fireChange(TemplateChooserPanelGUI.java:380)
    at org.netbeans.modules.project.ui.TemplatesPanelGUI.propertyChange(TemplatesPanelGUI.java:329)
    at java.beans.PropertyChangeSupport.fire(PropertyChangeSupport.java:335)
    at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:327)
    at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:263)
    at java.awt.Component.firePropertyChange(Component.java:8382)
    at org.netbeans.modules.project.ui.TemplatesPanelGUI$ExplorerProviderPanel.access$900(TemplatesPanelGUI.java:460)
    at org.netbeans.modules.project.ui.TemplatesPanelGUI$ExplorerProviderPanel$2.run(TemplatesPanelGUI.java:542)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at org.netbeans.core.TimableEventQueue.dispatchEvent(TimableEventQueue.java:158)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:154)
    at java.awt.WaitDispatchSupport$2.run(WaitDispatchSupport.java:182)
    at java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:221)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.awt.WaitDispatchSupport.enter(WaitDispatchSupport.java:219)
    at java.awt.Dialog.show(Dialog.java:1077)
    at org.netbeans.core.windows.services.NbPresenter.superShow(NbPresenter.java:1074)
    at org.netbeans.core.windows.services.NbPresenter.doShow(NbPresenter.java:1109)
    at org.netbeans.core.windows.services.NbPresenter.run(NbPresenter.java:1096)
    at org.netbeans.core.windows.services.NbPresenter.run(NbPresenter.java:126)
    at org.openide.util.Mutex.doEventAccess(Mutex.java:1363)
    at org.openide.util.Mutex.readAccess(Mutex.java:273)
    at org.netbeans.core.windows.services.NbPresenter.show(NbPresenter.java:1081)
    at java.awt.Component.show(Component.java:1651)
    at java.awt.Component.setVisible(Component.java:1603)
    at java.awt.Window.setVisible(Window.java:1014)
    at java.awt.Dialog.setVisible(Dialog.java:1003)
    at org.netbeans.core.windows.services.DialogDisplayerImpl$1AWTQuery.showDialog(DialogDisplayerImpl.java:260)
    at org.netbeans.core.windows.services.DialogDisplayerImpl$1AWTQuery.run(DialogDisplayerImpl.java:186)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at org.netbeans.core.TimableEventQueue.dispatchEvent(TimableEventQueue.java:158)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91)
INFO [org.netbeans.modules.hibernate.util.CustomClassLoader]: Initializing Custom Classloader with classpath : 
INFO [org.netbeans.modules.hibernate.util.CustomClassLoader]: jar:file:/C:/componentes/Jaybird-2.2.1JDK_1.7/jaybird-2.2.1.jar!/
INFO [org.netbeans.modules.hibernate.util.CustomClassLoader]: jar:file:/C:/componentes/Jaybird-2.2.1JDK_1.7/jaybird-2.2.1-javadoc.jar!/
INFO [org.netbeans.modules.hibernate.util.CustomClassLoader]: jar:file:/C:/componentes/Jaybird-2.2.1JDK_1.7/jaybird-2.2.1-sources.jar!/
INFO [org.netbeans.modules.hibernate.util.CustomClassLoader]: jar:file:/C:/componentes/Jaybird-2.2.1JDK_1.7/jaybird-full-2.2.1.jar!/
INFO [org.netbeans.modules.hibernate.util.CustomClassLoader]: file:/C:/proyectos/NetBeans.7.1.2/HibernateFirebird/build/classes/
INFO [org.hibernate.cfg.Configuration]: configuring from file: hibernate.cfg.xml
INFO [org.hibernate.cfg.Configuration]: Configured SessionFactory: null
INFO [org.hibernate.cfg.reveng.OverrideRepository]: Override file: C:\proyectos\NetBeans.7.1.2\HibernateFirebird\src\hibernate.reveng.xml
INFO [org.netbeans.modules.hibernate.util.HibernateUtil]: Found pre-existing database connection.
INFO [org.netbeans.modules.hibernate.util.HibernateUtil]: Database Connection is pre-established. Returning the conneciton.
INFO [org.hibernate.connection.ConnectionProviderFactory]: Initializing connection provider: org.netbeans.modules.hibernate.util.CustomJDBCConnectionProvider
INFO [org.netbeans.modules.hibernate.util.CustomJDBCConnectionProvider]: Loaded JDBC driver 
INFO [org.netbeans.modules.hibernate.util.CustomJDBCConnectionProvider]: Got connection.. returning
INFO [org.netbeans.modules.hibernate.wizards.HibernateCodeGenWizardDescriptor]: access to hibernate fails.
java.lang.NullPointerException
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:86)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2005)
    at org.hibernate.cfg.JDBCMetaDataConfiguration.readFromJDBC(JDBCMetaDataConfiguration.java:40)
    at org.netbeans.modules.hibernate.wizards.HibernateCodeGenWizardDescriptor.checkConfig(HibernateCodeGenWizardDescriptor.java:282)
[catch] at org.netbeans.modules.hibernate.wizards.HibernateCodeGenWizardDescriptor.isValid(HibernateCodeGenWizardDescriptor.java:177)
    at org.openide.WizardDescriptor.updateStateOpen(WizardDescriptor.java:900)
    at org.openide.WizardDescriptor.updateState(WizardDescriptor.java:844)
    at org.openide.loaders.TemplateWizard.updateState(TemplateWizard.java:732)
    at org.netbeans.modules.project.ui.NewFileWizard.updateState(NewFileWizard.java:122)
    at org.openide.WizardDescriptor$Listener.stateChanged(WizardDescriptor.java:2094)
    at org.openide.util.WeakListenerImpl$Change.stateChanged(WeakListenerImpl.java:329)
    at org.openide.util.ChangeSupport.fireChange(ChangeSupport.java:133)
    at org.openide.util.ChangeSupport.fireChange(ChangeSupport.java:119)
    at org.netbeans.modules.project.ui.TemplateChooserPanel.stateChanged(TemplateChooserPanel.java:182)
    at org.openide.util.ChangeSupport.fireChange(ChangeSupport.java:133)
    at org.openide.util.ChangeSupport.fireChange(ChangeSupport.java:119)
    at org.netbeans.modules.project.ui.TemplateChooserPanelGUI.fireChange(TemplateChooserPanelGUI.java:164)
    at org.netbeans.modules.project.ui.TemplateChooserPanelGUI.access$500(TemplateChooserPanelGUI.java:78)
    at org.netbeans.modules.project.ui.TemplateChooserPanelGUI$FileChooserBuilder.fireChange(TemplateChooserPanelGUI.java:380)
    at org.netbeans.modules.project.ui.TemplatesPanelGUI.propertyChange(TemplatesPanelGUI.java:329)
    at java.beans.PropertyChangeSupport.fire(PropertyChangeSupport.java:335)
    at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:327)
    at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:263)
    at java.awt.Component.firePropertyChange(Component.java:8382)
    at org.netbeans.modules.project.ui.TemplatesPanelGUI$ExplorerProviderPanel.access$900(TemplatesPanelGUI.java:460)
    at org.netbeans.modules.project.ui.TemplatesPanelGUI$ExplorerProviderPanel$2.run(TemplatesPanelGUI.java:542)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at org.netbeans.core.TimableEventQueue.dispatchEvent(TimableEventQueue.java:158)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:154)
    at java.awt.WaitDispatchSupport$2.run(WaitDispatchSupport.java:182)
    at java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:221)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.awt.WaitDispatchSupport.enter(WaitDispatchSupport.java:219)
    at java.awt.Dialog.show(Dialog.java:1077)
    at org.netbeans.core.windows.services.NbPresenter.superShow(NbPresenter.java:1074)
    at org.netbeans.core.windows.services.NbPresenter.doShow(NbPresenter.java:1109)
    at org.netbeans.core.windows.services.NbPresenter.run(NbPresenter.java:1096)
    at org.netbeans.core.windows.services.NbPresenter.run(NbPresenter.java:126)
    at org.openide.util.Mutex.doEventAccess(Mutex.java:1363)
    at org.openide.util.Mutex.readAccess(Mutex.java:273)
    at org.netbeans.core.windows.services.NbPresenter.show(NbPresenter.java:1081)
    at java.awt.Component.show(Component.java:1651)
    at java.awt.Component.setVisible(Component.java:1603)
    at java.awt.Window.setVisible(Window.java:1014)
    at java.awt.Dialog.setVisible(Dialog.java:1003)
    at org.netbeans.core.windows.services.DialogDisplayerImpl$1AWTQuery.showDialog(DialogDisplayerImpl.java:260)
    at org.netbeans.core.windows.services.DialogDisplayerImpl$1AWTQuery.run(DialogDisplayerImpl.java:186)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at org.netbeans.core.TimableEventQueue.dispatchEvent(TimableEventQueue.java:158)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T15:25:38.683

关于这个的一个新问题促使我再次调查它，问题是 Jaybird 如何加载自身和 Netbeans 中的自定义类加载器的组合。见[https://stackoverflow.com/a/18920383/466862](https://stackoverflow.com/a/18920383/466862)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T08:06:22.167

删除 hibernate.cfg.xml 和 hibernate.reveng.xml ；并使用 Netbeans 再次生成它们。之后尝试创建实体类。我遇到了这个问题，这样做对我有用

# scala - 提升 - 未找到代码段失败方法

> ID：14500430
> 
> 赞同：2
> 
> 时间：2013-01-24T11:35:25.970
> 
> 标签：scala, lift

我已将此添加到我的 Boot.scala

```
LiftRules.viewDispatch.append({
  case List("admin", "categories") => Right(Admin)
}) 
```

这是我的 Admin.scala (admin/view package)

```
object Admin extends LiftView{

  def dispatch = {
    case "add" => editCategory
  }

  def editCategory(): NodeSeq = {
    <lift:embed what="/admin/add_category"></lift:embed>
  }
} 
```

这是我的 add_category 模板 -

```
<lift:surround with="admin" at="content">
  <div class="container-fluid" id="main_container">
    <lift:Admin:addCategory form="POST" class="form-horizontal">
      <fieldset>
        <legend>Add Category</legend>
        <div class="control-group">
          <label class="control-label" for="cat_name">Name</label>
          <div class="controls">
            <cat:name></cat:name>
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="cat_desc">Description</label>
          <div class="controls">
            <cat:desc></cat:desc>
            <cat:submit></cat:submit>
          </div>
        </div>
      </fieldset>
    </lift:Admin:addCategory>
  </div>
</lift:surround> 
```

我正在尝试使用方法将其与（admin/snippet 包）中的片段-Admin.scala 绑定`addCategory`。

```
 object name extends RequestVar("")
  object desc extends RequestVar("")

  def addCategory(in: NodeSeq): NodeSeq = {
    def doAdd() {
      //todo: Save Category
    }

    bind("cat", in,
      "name" -> SHtml.text(name.is, (n: String) => name(n), ("id", "cat_name"), ("class", "input-large")),
      "desc" -> SHtml.textarea(desc.is, (d: String) => desc(d), ("id", "cat_desc"), ("class", "input-large")),
      "submit" -> SHtml.submit("Save", doAdd, ("class", "btn btn-info"))
    )
  } 
```

我收到这个错误 -

```
Error processing snippet: admin:addcategory 
Reason: Method Not Found 
XML causing this error: 
 <lift:admin:addcategory class="form-horizontal" form="POST">
      <fieldset>
        <legend>Add Category</legend>
        <div class="control-group">
          <label for="cat_name" class="control-label">Name</label>
          <div class="controls">
            <cat:name></cat:name>
          </div>
        </div>
        <div class="control-group">
          <label for="cat_desc" class="control-label">Description</label>
          <div class="controls">
            <cat:desc></cat:desc>
            <cat:submit></cat:submit>
          </div>
        </div>
      </fieldset>
    </lift:admin:addcategory> 
```

在日志中 -

```
[net.liftweb.http.LiftRules] - Snippet Failure: SnippetFailure(/admin/categories/add -> ParsePath(List(admin, categories, add),,true,false),Full(admin:addcategory),Method Not Found) 
```

需要帮助。我无法弄清楚为什么电梯无法找到该方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:23:43.153

您是否已将您的`admin`包裹添加到 LiftRules？这样的事情应该允许 Lift 搜索`admin.snippets`解决方案：

```
LiftRules.addToPackages("admin") 
```

另外，我相信您需要将代码段称为`Admin.addCategory`而不是使用`:`.

**编辑：**

我相信 Lift HTML5 解析器是区分大小写的，并且在驼峰式方法名称方面存在问题。您可能想尝试将您的方法重命名为全部小写，或者尝试将您的代码段称为（而不是使用`<lift:`样式）：

```
<div class="lift:admin.addCategory"> ... </div>

   or

<div data-lift="admin.addCategory"> ... </div> 
```

# grails - 是否可以使用 dropwizard 为 404 设置全局品牌错误页面

> ID：14500437
> 
> 赞同：0
> 
> 时间：2013-01-24T11:35:48.053
> 
> 标签：grails, embedded-jetty, dropwizard

我发现自己正在工作一个 grails 应用程序，该应用程序被部署为一个胖 jar，由一个自定义插件构建，该插件使用 dropwizard 配置码头。

似乎 dropwizard 不允许使用普通的旧 web.xml 或 jetty.xml，而是在启动时由 java config 设置所有内容（即使用 com.yammer.dropwizard.config.Environment）。

我在这里错过了什么吗？有什么方法可以将 404 映射回 URL 或我可以覆盖的任何类型的网页，这样 Jetty 404 就不是默认设置。

（是的，我知道我可以使用负载均衡器来重定向 404）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-02T13:02:28.003

我不知道它在 grails 中的情况，但这有助于使用 dropwizard 0.7.1 run() 方法的 java：

```
ResourceConfig jrConfig = environment.jersey().getResourceConfig();
environment.jersey().register(new RestErrorsHandler(jrConfig )); 
```

为异常映射创建此类 -> 回馈个人响应！

```
@Provider
public class RestErrorsHandler implements ExceptionMapper<Exception> {

/**
 * Deletes all ExpetionMappers.
 * 
 * @param jrConfig
 */
public RestErrorsHandler(
    ResourceConfig jrConfig)
{
    // Remove all of Dropwizard's custom ExceptionMappers
    Set<?> dwSingletons = jrConfig.getSingletons();
    List<Object> singletonsToRemove = new ArrayList<Object>();
    for (Object s : dwSingletons) {
            // Remove all Exception mappers
            if (s instanceof ExceptionMapper) {
                singletonsToRemove.add(s);
            }
    }
    for (Object s : singletonsToRemove) {
        jrConfig.getSingletons().remove(s);
    }
}

public Response toResponse(
    Exception exception)
{   
    //Handle different exceptions in another way
    if (exception.getClass().equals(JsonParseException.class)){
        Response response = RestErrorsHandler.generalResponse(exception);
        return response ;
    } else if(exception.getClass().equals(JsonParseException.class)){
        Response response = RestErrorsHandler.generalResponse(exception);
        return response ;
    } else if(exception.getClass().equals(Class.class)){
        Response response = RestErrorsHandler.generalResponse(exception);
        return response ;
    }

    //genral problem -> output default
    Response response = RestErrorsHandler.generalResponse(exception);
    return response ;

}

public static Response generalResponse(Exception exception)
{
    return Response.status(Status.BAD_REQUEST).type(MediaType.TEXT_PLAIN)
        .entity("if you just want to give back a string, but could also be default html page or whatever").build();
}

} 
```

# ruby-on-rails-3 - ruby on rails 服务器没有运行

> ID：14500441
> 
> 赞同：0
> 
> 时间：2013-01-24T11:35:59.233
> 
> 标签：ruby-on-rails-3

我是 ruby​​ on rails 的新手，任何人都可以帮助我。我无法在下面启动我的 Rails 服务器是我得到的错误

我也尝试通过安装捆绑但得到同样的错误

ahaad@Labbaik:~/Desktop/Ruby_Pro/App_demo$ rails server

在此机器上可用的 gem 中找不到 gem 'jquery-rails (>= 0) ruby​​'。运行`bundle install`以安装缺少的 gem。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:44:32.203

单独安装这个 gem：

```
gem install jquery-rails 
```

并运行捆绑：

```
bundle install 
```

（或者）

查找您的 Gemfile，`gem 'jquery-rails'`如果 Gemfile 不包含它，则添加，然后在您的终端运行

```
bundle install 
```

# ios - 查找 ViewController 是否已经在视图堆栈中

> ID：14500442
> 
> 赞同：0
> 
> 时间：2013-01-24T11:36:00.083
> 
> 标签：ios, objective-c

我想检查我的视图是否已经添加到视图中，这样用户就不能重复地将新的 UIViewController 添加到视图中。

```
 if (!self.fmovc)
    {
        self.fmovc = [[FMOVC alloc] initWithNibName: @"FMOVC" bundle:nil];
    }

    BOOL viewAlreadyDisplayed = NO;
    for (UIView * b in self.view.subviews)
    {
        if ([b isKindOfClass:[FMOVC class]])
        {
            viewAlreadyDisplayed = YES;
        }
    }

    if (!viewAlreadyDisplayed)
    {
        [self.view addSubview:self.fmovc.view];
    } 
```

这不起作用，因为它永远不会触发

```
viewAlreadyDisplayed = YES; 
```

查找视图是否已显示的正确方法是什么？

谢谢，-代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:41:03.240

在添加之前，只需 removeItFromSuperView...它可能会解决您的问题

```
 [self.fmovc.view removeFromSuperview];
    [self.view addSubview:self.fmovc.view]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:43:44.327

让 UIView 成员变量说 thatView；

if(!thatView) { thatView = [[UIView alloc] init]; [self.view addSubView:thatView]; }

释放超级视图后，释放 thatView 并使 thatView 为零。

或者

在分配 thatView 之前，请始终检查并删除 thatView 是否存在于 superview 中。

希望这可以帮助 ！！！

# javascript - 使用 node.js 和 jquery 进行抓取

> ID：14500448
> 
> 赞同：0
> 
> 时间：2013-01-24T11:36:12.973
> 
> 标签：javascript, node.js, jsdom

我正在尝试按照本教程使用节点和 jquery 进行抓取-

[http://net.tutsplus.com/tutorials/javascript-ajax/how-to-scrape-web-pages-with-node-js-and-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-scrape-web-pages-with-node-js-and-jquery/)

在其中，他们有一些代码如下所示 -

```
request({uri:"http://events.sfgate.com/search?swhat=&swhen=&swhere=San+Francisco&commit=Search&st_select=any&search=true&svt=text&srss="},function(err,response,body){

jsdom.env({
html: "http://events.sfgate.com/search?swhat=&swhen=&swhere=San+Francisco&commit=Search&st_select=any&search=true&svt=text&srss=",
src:['http://code.jquery.com/jquery-1.6.min.js'],
done: function(errors,window){
    console.log("WINDOW");
    console.log(window.jQuery);
    var $ = window.$;
    //other stuff 
```

当我控制台记录window.Jquery 或window.$ 时，两者都未定义——但它们不应该是因为jsdom 应该将jquery 嵌入到页面中吗？为什么这没有发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:54:45.920

问题是您使用“src”参数对其进行了初始化，该参数应包含 javascript 文件（在本例中为 jquery）的实际源代码数组 - 而不是文件的 url。

如果你想要 url，你需要像这样初始化它：

```
jsdom.env(
  "http://nodejs.org/dist/",
  ["http://code.jquery.com/jquery.js"],
  function (errors, window) { 
```

或像这样：

```
jsdom.env({
  html: "http://news.ycombinator.com/",
  scripts: ["http://code.jquery.com/jquery.js"],
  done: function (errors, window) { 
```

* * *

编辑：您的代码中还有另一个错误（如果我没记错的话......） - 您首先下载带有*请求*模块的页面，然后不是将html源代码传递给jsdom（通过传递`body`您从*请求*中获得的) 你告诉 jsdom 再次下载页面。如果你给 jsdom 页面的 url 作为 html 那么你不需要调用*请求*模块。

# ruby - 字符串“<<”运算符在 Ruby1.9.3 中产生警告和意外结果

> ID：14500454
> 
> 赞同：-1
> 
> 时间：2013-01-24T11:36:34.087
> 
> 标签：ruby, ruby-1.9.3

请找到我从`IRB`终端运行的代码：

```
Microsoft Windows XP [Version 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

C:\Documents and Settings\rakshiar>irb
irb(main):001:0> src = 'E:\WIPData\Ruby\Scripts\TaxDocumentDownload'
=> "E:\\WIPData\\Ruby\\Scripts\\TaxDocumentDownload"
irb(main):002:0> dest = 'E:\WIPData\Ruby\Scripts'
=> "E:\\WIPData\\Ruby\\Scripts"
irb(main):003:0> dest<<'H00371101'
=> "E:\\WIPData\\Ruby\\ScriptsH00371101"
irb(main):004:0> 
```

为什么`\\`会出现这种情况？如何解决？

当我从脚本运行相同的部分时，会收到以下警告：

***代码***

```
src = 'E:\WIPData\Ruby\Scripts\TaxDocumentDownload'
dest = 'E:\WIPData\Ruby\Scripts'
dest<<'H00371101'
FileUtils.copy_entry(src, dest, preserve = false, dereference_root = false, remove_destination = false) 
```

***警告：***

```
Microsoft Windows XP [Version 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

C:\Documents and Settings\rakshiar>cd..

C:\Documents and Settings>cd..

C:\>e:

E:\>cd E:\WIPData\Ruby\Scripts

E:\WIPData\Ruby\Scripts>downloadv1.rb
C:/Ruby193/lib/ruby/1.9.1/FileUtils.rb:93: warning: already initialized constant
 OPT_TABLE
C:/Ruby193/lib/ruby/1.9.1/FileUtils.rb:1268: warning: already initialized consta
nt S_IF_DOOR
C:/Ruby193/lib/ruby/1.9.1/FileUtils.rb:1496: warning: already initialized consta
nt DIRECTORY_TERM
C:/Ruby193/lib/ruby/1.9.1/FileUtils.rb:1500: warning: already initialized consta
nt SYSCASE
C:/Ruby193/lib/ruby/1.9.1/FileUtils.rb:1619: warning: already initialized consta
nt LOW_METHODS
C:/Ruby193/lib/ruby/1.9.1/FileUtils.rb:1625: warning: already initialized consta
nt METHODS 
```

你能说一下为什么会出现这样的警告吗？

`IRB`当从另一个不同的输出中尝试以下操作时：

```
C:\Documents and Settings\rakshiar>irb
irb(main):001:0> src = "E:\WIPData\Ruby\Scripts\TaxDocumentDownload"
=> "E:WIPDataRubyScriptsTaxDocumentDownload"
irb(main):002:0> est = "E:\WIPData\Ruby\Scripts"
=> "E:WIPDataRubyScripts"
irb(main):003:0> est<<"H00371101"
=> "E:WIPDataRubyScriptsH00371101"
irb(main):004:0> est<<"H00371101" 
```

***编辑：***

*错误*

```
E:\WIPData\Ruby\Scripts>downloadv1.rb
E:/WIPData/Ruby/Scripts/downloadv1.rb:87: syntax error, unexpected tCONSTANT, ex
pecting $end
dest<<"H00371101"
                ^ 
```

*从脚本代码部分：*

```
src = "E:\WIPData\Ruby\Scripts\TaxDocumentDownload"
dest = "E:\WIPData\Ruby\Scripts\"
dest<<"H00371101"
FileUtils.copy_entry(src, dest, preserve = false, dereference_root = false, remove_destination = false) 
```

我希望该`src and dest`目录作为真正的目录路径。如何得到它？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:45:35.490

从广义上讲，Ruby 有两种类型的字符串。在双引号字符串中，反斜杠“转义”字符 - 反斜杠后跟另一个字母会产生特殊字符。例如，`"\n"`给你一个换行符。在单引号字符串中，反斜杠不会转义字符 -`'\n'`只是一个反斜杠后跟字母`n`。（实际上这不是 100% 正确的，唯一的例外是`'\''`单引号 - 否则将无法在单引号字符串中嵌入单引号。

这就是为什么你的单引号`src = 'E:\WIPData\Ruby\Scripts\TaxDocumentDownload'`会起作用，而双引号`src = "E:\WIPData\Ruby\Scripts\TaxDocumentDownload"`不会。

双反斜杠在那里打印，因为在结果输出中`irb`使用`inspect`，它以双引号形式返回字符串（特殊字符转义）：

```
'"Hello," said Andy'.inspect # => "\"Hello,\" said Andy" 
```

它们并不真正在字符串中，如您所见`puts`：

```
puts '"Hello," said Andy' # => "Hello," said Andy 
```

您遇到的错误是因为使用了双引号字符串，反斜杠被视为转义字符，因此您的字符串未终止：

```
src = "E:\WIPData\Ruby\Scripts\"
dest<<"H00371101" 
```

被解析为

```
src = 'E:WIPDataRubyScripts"dest<<'H00371101 
```

这是一个语法错误。

你应该去阅读单引号和双引号字符串之间的区别。[这是一个资源](http://en.wikibooks.org/wiki/Ruby_Programming/Strings)。

* * *

一个快速的谷歌建议你可能不这样`require 'FileUtils'`做`require 'fileutils'`？[这篇文章](http://www.ruby-forum.com/topic/123026#547830)说，一旦更改为后者，相同的警告就会消失。这是因为 Windows 的文件系统不区分大小写——对于 Ruby，FileUtils.rb 和 fileutils.rb 是两个不同的文件，但对于 Windows，它们是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T12:21:52.497

FileUtils 警告是因为您必须更改所需的 gem，如下所示：

```
require 'FileUtils' WRONG
require 'fileutils' OKAY 
```

这将解决您的警告:)

# facebook-opengraph - 例外：重复的 OG 操作——这些确切的参数已用于发布具有 ID 的先前操作

> ID：14500460
> 
> 赞同：2
> 
> 时间：2013-01-24T11:37:01.727
> 
> 标签：facebook-opengraph, restfb

我们面临以下异常，同时为“移动应用安装”创建多个广告 **标记为重试：收到类型异常的 Facebook 错误响应：重复的 OG 操作——这些确切的参数已用于发布带有 ID 的先前操作**

# android - 如何在 Android 中获取区域格式？

> ID：14500475
> 
> 赞同：0
> 
> 时间：2013-01-24T11:37:41.487
> 
> 标签：android

我需要在我的应用程序中访问区域格式并据此显示日期。

在 iPhone 中，我们可以在

设置 -> 常规 -> 国际 -> 区域格式。

在Android中是否有任何选项可以得到相同的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:45:22.263

尝试这个

```
GregorianCalendar gc= new GregorianCalendar();
SimpleDateFormat sdf = new SimpleDateFormat("EEE yyyy-MM-dd");

String formatted = sdf.parse(gc.getTime()); 
```

初始化 SimpleDateFormat 时，您可以添加自定义区域设置格式，否则它将选择默认操作系统，例如

```
SimpleDateFormat sdf = new SimpleDateFormat("EEE yyyy-MM-dd",Locale.ITALY); 
```

# excel - Excel VBA CopyFromRecordset 水平？

> ID：14500476
> 
> 赞同：0
> 
> 时间：2013-01-24T11:37:42.150
> 
> 标签：excel, vba

我找不到使用方法

```
Range("A100").CopyFromRecordset myRecordSet 
```

命令以某种方式将数据水平插入工作表中。该命令将垂直插入数据... :-\

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:58:33.437

我认为你需要做一个 CopyFromRecordSet 然后复制和粘贴转置。看这个问题：

[转置 CopyFromRecordset Excel VBA](https://stackoverflow.com/questions/13141639/transposing-copyfromrecordset-excel-vba)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:13:24.470

尝试以下操作：

```
Dim oRst as ADODB.Recordset
Dim vArray As Variant
Dim oRange As Range

oRst = Rst_From_Access(sSQL_Select) 'Some function that gets whatever recordset
ReDim vArray(1 To oRst.RecordCount, 1 To oRst.RecordCount)
vArray = oRst.GetRows 'Load recordset into an array
vArray = Array2DTranspose(vArray) 'Transpose the array
Set oRange = oBook.Sheets(1).Range(Cells(1, 1), Cells(UBound(vArray, 1), UBound(vArray, 2))) 'Wherever you want to paste the array. 
oRange = vArray 'Paste the array 
```

该函数`Array2DTranspose`是从以下 URL 检索到的：http:
[//www.visualbasic.happycodings.com/Applications-VBA/code30.html](http://www.visualbasic.happycodings.com/Applications-VBA/code30.html)

```
Function Array2DTranspose(avValues As Variant) As Variant
Dim lThisCol As Long, lThisRow As Long
Dim lUb2 As Long, lLb2 As Long
Dim lUb1 As Long, lLb1 As Long
Dim avTransposed As Variant

If IsArray(avValues) Then
    On Error GoTo ErrFailed
    lUb2 = UBound(avValues, 2)
    lLb2 = LBound(avValues, 2)
    lUb1 = UBound(avValues, 1)
    lLb1 = LBound(avValues, 1)

    ReDim avTransposed(lLb2 To lUb2, lLb1 To lUb1)
    For lThisCol = lLb1 To lUb1
        For lThisRow = lLb2 To lUb2
            avTransposed(lThisRow, lThisCol) = avValues(lThisCol, lThisRow)
        Next
    Next
End If

Array2DTranspose = avTransposed
Exit Function

ErrFailed:
Debug.Print Err.Description
Debug.Assert False
Array2DTranspose = Empty
Exit Function
Resume
End Function 
```

# jqgrid - 搜索框 jqgrid 中的自定义错误消息

> ID：14500478
> 
> 赞同：0
> 
> 时间：2013-01-24T11:37:45.687
> 
> 标签：jqgrid

如果搜索字段为空，我想显示自定义错误消息。请告诉我我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:18:54.713

如果我理解正确，您[可以](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3asearch_config#searchrules)在`colModel`. 例如

```
searchrules: {required: true} 
```

# eclipse - Eclipse PDT + XDEBUG - 源查找不完全工作

> ID：14500484
> 
> 赞同：3
> 
> 时间：2013-01-24T11:38:09.857
> 
> 标签：eclipse, yii, wamp, xdebug, eclipse-pdt

我在使用 Yii 框架的 PHP 项目时遇到问题。我的设置如下：Win7 + Eclipse4.2 + PDT 3.1 + Yiiclipse PDT 扩展 + 启用 XDEBUG 的 WAMP 服务器。

几乎一切正常。调试会话开始，它通过项目的 index.php 源，但是当它必须跳转到框架的文件时，它不会打开它们。我编辑了源查找并添加了框架的本地路径，但它根本找不到它们。

这是一个截图：http: [//img607.imageshack.us/img607/3687/eclipsepdt.png](http://img607.imageshack.us/img607/3687/eclipsepdt.png)

![http://img607.imageshack.us/img607/3687/eclipsepdt.png](../Images/9399c6a44d90882efa1efc3929c463ad.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:27:37.613

这不一定是答案 - 但你的问题也不一定是问题，所以我觉得这是公平的游戏：D

过去，我在使用 Eclipse PDT + xdebug 的调试、代码完成等方面遇到了很多问题，以至于我不久前放弃了它并转而使用 Netbeans 进行 PHP 调试。它现在是我的开发团队调试 PHP 的事实上的标准；即使我们仍然有自己喜欢的编辑器，当我们需要调试时，我们仍然会使用 Netbeans。

无论我在什么平台（Windows、OS X、Linux）上开发，代码完成、完成时的 phpdoc“工具提示”和调试都对我来说完美无缺，我不能对 Eclipse PDT 说同样的话（代码完成经常会错过，根据我的个人经验，我会遇到问题或崩溃调试等）。

所以，如果这不是对非问题的非回答，我提前道歉 - 但也许试试[Netbeans](https://netbeans.org/downloads/)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T12:34:19.973

您确定可以使用 Xdebug 来调试 Yii（或任何其他基于框架的）应用程序吗？由于 Yii 引入了基于 MVC 模式的 URL 重写，我认为你不能。

我对 Xdebug 没有太多经验，但从我发现我清楚地看到，它（连同 Eclipse PDT）在调试时强烈依赖于 Eclipse 内部浏览器中显示的 URL。

因此，以屏幕截图中的 URL 为例：

```
http://localhost/testdrive/index.php?r=dispozitive 
```

正如您所提到的，Eclipse 已正确打开`index.php`，这是正常的，因为它在 URL 中直接引用，并且您可能在调试配置窗口中将其指出为启动文件。

但更进一步。您希望 Eclipse 如何理解该路由`dispozitive`（其中*路由*本身是一个完全 Yii 概念（或类似框架）并且 Eclipse / Xdebug / PHP 对此一无所知）或`?r=dispozitive`URL 部分对应于`protected/SiteController.php`文件系统中的执行文件并调用默认值`actionIndex()`从中？所以它可以*知道*它应该在 IDE 中打开它，并可能在定义的断点处停止执行。

这个过程和概念（路由）是 100% 由 Yii 编写并由 Yii 内部完成的，那么您希望 Eclipse 或 Xdebug 如何了解它？

正如我所写的，我在调试 Yii 应用程序方面没有太多经验，但从我发现直到知道，我清楚地看到，如果 PHP 应用程序使用任何类型的 URL 重写，你不能用 Xdebug 调试它们方法。恕我直言，这种技术（使用 Xdebug 调试）仅适用于应用程序，其中 URL 更改直接反映应用程序内容中文件系统中的文件。

**编辑**：另外，检查你有哪个版本的 Eclipse（包）？事实[证明](https://stackoverflow.com/q/5035964/1469208)，Helios 包有一些错误并且不会在断点处停止。这使得它对调试过程毫无用处。您应该考虑改为使用[Galileo Package Eclipse for PHP Developers](http://www.eclipse.org/downloads/packages/eclipse-php-developers/galileosr2)。

# php - 500 内部服务器 - Apache

> ID：14500487
> 
> 赞同：0
> 
> 时间：2013-01-24T11:38:13.327
> 
> 标签：php, linux, apache, web, apache2

我的网站经常显示 500 Internal Server Error。重新启动 apache，使站点恢复正常状态。在同一台服务器上运行的其他站点没有此问题。Apache 错误日志没有与此相关的信息。该站点的 apache 日志级别设置为“警告”。

这可能是什么原因？

我的网站是用 PHP 编写的，并部署在 linux 服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:44:17.537

请检查文件夹必要的权限。然后在 index.php 文件中添加

```
ini_set('display_errors', 1); 
```

显示错误报告。以便您可以找到错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:40:50.683

如果您安装了 suphp，则可能是 e 权限问题 - 如果安装了所有文件，则需要将 chmod 设置为 644 并且所有文件夹 - 755

# c++ - 线程本地和上下文切换

> ID：14500495
> 
> 赞同：3
> 
> 时间：2013-01-24T11:38:46.460
> 
> 标签：c++, context-switch, thread-local-storage

我有一些使用线程本地存储的 C++ 代码，每个线程都有一个可以将数据推入的向量。

我使用 TLS 存储每个线程的索引 ID，这可用于查找将数据推送到哪个向量。然后它执行大量代码，将数据推送到向量中。

我想知道的是，操作系统是否有可能在获取指向线程本地对象的指针后重新安排我的代码在不同的线程上执行。（到目前为止，代码执行得很好，我还没有看到这种情况发生）。但是如果可能的话，这似乎肯定会破坏我的程序，因为现在两个线程可以拥有相同的对象。

假设这是真的，即使对于使用任何复杂性 TLS 的任何代码，这似乎也是一个问题，TLS 是否仅适用于您不获取地址的简单对象？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:48:38.163

线程本地存储就是这样 - 每个线程的存储。每个线程都有自己的私有数据结构。该线程，无论它在哪个处理器上运行，都是同一个线程。操作系统不会在线程内安排工作，它会安排哪些线程运行。

线程本地存储是通过具有某种间接性来完成的，这种间接性会随着线程本身而改变。有几种方法可以做到这一点，例如，操作系统可能在进程中从虚拟内存开始的特定偏移量处具有特定页面，并且当调度线程时，更新页表以匹配线程。

在 x86 处理器中，FS 或 GS​​ 通常用于“每线程”数据，因此操作系统将切换 FS 寄存器 [或在 64 位处理器的情况下寄存器的基地址内容]。读取 TLS 时，编译器将使用 FS 或 GS​​ 段寄存器作为内存读/写操作的前缀，因此您始终获得“您的私有数据”，而不是其他一些线程。

当然，操作系统可能有错误，但这是相当多的东西会依赖的东西，所以如果它坏了，它很快就会出现（除非它非常微妙，而且你必须站在正确的地方，用月亮在正确的相位，穿着正确的颜色衣服，风在正确的方向，日期可以被 3 和 7 整除，等等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T11:47:24.553

TLS 表示 thread **local**，根据您的描述，每个线程通过 TLS 访问一个共享的向量向量（我不确定），您应该使用某种锁。任何示例代码？

# android - Android：后退按钮问题或程序逻辑流程

> ID：14500496
> 
> 赞同：2
> 
> 时间：2013-01-24T11:38:48.560
> 
> 标签：android, back-button

我正在尝试创建一个 android 应用程序。在其中我创建了两个活动。在第一个活动中，用户通过单击按钮登录，如果他选中让我登录的复选框，那么下次当他在注销后来到其主页时，应用程序会记住他的用户名并通过，如果他没有注销（在第二个活动中按注销按钮）然后他们无法访问主页（第一个活动）。如果他没有注销，那么我想通过使用后退按钮或重新启动应用程序来阻止用户进入主页登录页面。

运行程序->输入登录信息->下一页->注销（运行正常）运行程序->输入登录信息->下一页->按回按按钮->然后按注销按钮->出现错误（强制停止）

我的问题是，当我按下后按按钮，然后在第二个活动中单击注销按钮时，Emmulator 会向我显示应用程序意外关闭和强制停止的按摩。logcat 窗口中的错误-

```
ERROR/AndroidRuntime(348): FATAL EXCEPTION: main  
java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=0, data=null} to activity {com.example/com.example.MyActivity}: java.lang.NullPointerException 
```

我的主页（第一个活动代码是）=

```
package com.example;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.text.Editable;
import android.view.View;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.EditText;

public class MyActivity extends Activity
{
EditText editText,editText1;
CheckBox checkBox;
int Requestcd=1;
String str,str1,str2,struser;
SharedPreferences sharedPreferences;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    sharedPreferences = getSharedPreferences("computer" , MODE_PRIVATE);
    str = sharedPreferences.getString("key", "hold");
    if (str.equalsIgnoreCase("True") || str.equalsIgnoreCase("hold"))
    {
    editText=(EditText)findViewById(R.id.edit1);
    editText1 =(EditText)findViewById(R.id.edit2);
    checkBox = (CheckBox)findViewById(R.id.check1);
    Button button = (Button)findViewById(R.id.button1);
    button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            //To change body of implemented methods use File | Settings | File Templates.
            if(checkBox.isChecked())
            {
                str1 = editText.getText().toString();
                str2 = editText1.getText().toString();
                SharedPreferences.Editor editor1 = sharedPreferences.edit();
                editor1.putString("key1" , str1);
                editor1.putString("key2" , str2);
                editor1.commit();
            }
            struser = editText.getText().toString();
            SharedPreferences.Editor editor = sharedPreferences.edit();
            editor.putString("key" , "false");
            editor.putString("key5" , struser);
            Intent intent = new Intent(MyActivity.this , Second.class );
            startActivityForResult(intent , Requestcd);
            editor.commit();
        }
    });

    }
    else
    {
        Intent intent = new Intent(MyActivity.this , Second.class );
        startActivity(intent);
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);    //To change body of overridden methods use File | Settings | File Templates.
    String str13 = data.getExtras().getString("txt");
    String str14 = data.getExtras().getString("txt1");
    editText.setText(str13);
    editText1.setText(str14);
}
 } 
```

我的第二个活动（欢迎用户和注销按钮）代码是=

```
package com.example;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

/**
* Created by IntelliJ IDEA.
* User: devendra
* Date: 18/1/13
* Time: 9:57 AM
* To change this template use File | Settings | File Templates.
*/
public class Second extends Activity{
SharedPreferences sharedPreferences;
String str, str1,str2,str3;
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main2);
    sharedPreferences = getSharedPreferences("computer" , MODE_PRIVATE);
    str3 = sharedPreferences.getString("key5" , "none");
    str = sharedPreferences.getString("key" , "null");
    Button button=(Button)findViewById(R.id.button2) ;
    TextView textView =(TextView)findViewById(R.id.text1);
    textView.setText("Welcome"+" " +str3);
    button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            //To change body of implemented methods use File | Settings | File Templates.
            SharedPreferences.Editor editor1 = sharedPreferences.edit();
            editor1.putString("key", "True");
            str1 = sharedPreferences.getString("key1" , "Enter your username");
            str2 = sharedPreferences.getString("key2","Enter your password");
            editor1.remove("key1");
            editor1.remove("key2");

            Intent intent = new  Intent();
            intent.putExtra("txt",str1);
            intent.putExtra("txt1",str2);
            setResult(RESULT_OK, intent);
            editor1.commit();
            finish();
        }
    });
}

@Override
public void onBackPressed() {
    super.onBackPressed();    //To change body of overridden methods use File | Settings | File Templates.
   SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putString("key" , "false");
    editor.commit();
    System.out.println("you in back press");
    if (str.equalsIgnoreCase("false"));
    {
        Intent intent2 = new Intent(Second.this , Second.class);
        startActivity(intent2);
    }
    finish();
}
 } 
```

* * *

这是来自 logcat 窗口的完整错误描述

```
{01-24 16:24:02.810: DEBUG/dalvikvm(382): Debugger has detached; object registry had 1   entries
01-24 16:24:04.702: INFO/dalvikvm(68): Jit: resizing JitTable from 1024 to 2048
01-24 16:24:04.750: INFO/ActivityManager(68): Displayed com.example/.MyActivity: +2s89ms
01-24 16:24:09.940: DEBUG/dalvikvm(147): GC_EXPLICIT freed 125K, 50% free 2990K/5895K,     external 5874K/7299K, paused 133ms
01-24 16:24:14.930: DEBUG/dalvikvm(242): GC_EXPLICIT freed 7K, 54% free 2544K/5511K, external 1625K/2137K, paused 92ms
01-24 16:24:20.030: DEBUG/dalvikvm(287): GC_EXPLICIT freed 503K, 55% free 2598K/5703K, external 1625K/2137K, paused 121ms
01-24 16:24:20.230: INFO/ActivityManager(68): Starting: Intent { cmp=com.example/.Second } from pid 390
01-24 16:24:20.850: INFO/ActivityManager(68): Displayed com.example/.Second: +563ms
01-24 16:24:22.800: WARN/KeyCharacterMap(390): No keyboard for id 0
01-24 16:24:22.810: WARN/KeyCharacterMap(390): Using default keymap: /system  /usr/keychars/qwerty.kcm.bin
01-24 16:24:22.820: INFO/System.out(390): you in back press
01-24 16:24:22.830: INFO/ActivityManager(68): Starting: Intent { cmp=com.example/.Second } from pid 390
01-24 16:24:22.830: WARN/ActivityManager(68): Duplicate finish request for HistoryRecord{406b1eb0 com.example/.Second}
01-24 16:24:23.520: INFO/ActivityManager(68): Displayed com.example/.Second: +673ms
01-24 16:24:26.340: DEBUG/AndroidRuntime(390): Shutting down VM
01-24 16:24:26.340: WARN/dalvikvm(390): threadid=1: thread exiting with uncaught exception (group=0x40015560)
01-24 16:24:26.370: ERROR/AndroidRuntime(390): FATAL EXCEPTION: main
    java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=0, data=null} to activity {com.example/com.example.MyActivity}: java.lang.NullPointerException
    at android.app.ActivityThread.deliverResults(ActivityThread.java:2532)
    at android.app.ActivityThread.handleSendResult(ActivityThread.java:2574)
    at android.app.ActivityThread.access$2000(ActivityThread.java:117)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:961)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:3683)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.NullPointerException
    at com.example.MyActivity.onActivityResult(MyActivity.java:69)
    at android.app.Activity.dispatchActivityResult(Activity.java:3908)
    at android.app.ActivityThread.deliverResults(ActivityThread.java:2528)
    ... 11 more
    01-24 16:24:26.380: WARN/ActivityManager(68): Force finishing activity com.example/.MyActivity
    01-24 16:24:26.920: WARN/ActivityManager(68): Activity pause timeout for HistoryRecord{4061a9d0 com.example/.MyActivity}
    01-24 16:24:33.801: DEBUG/dalvikvm(320): GC_EXPLICIT freed 323K, 54% free 2539K/5511K, external 1625K/2137K, paused 104ms
    01-24 16:24:38.356: WARN/ActivityManager(68): Activity destroy timeout for HistoryRecord{4061a9d0 com.example/.MyActivity}
    01-24 16:24:38.702: WARN/ActivityManager(68): Activity destroy timeout for HistoryRecord{406ef998 com.example/.Second}
    01-24 16:24:50.600: INFO/Process(390): Sending signal. PID: 390 SIG: 9
    01-24 16:24:51.310: INFO/ActivityManager(68): Process com.example (pid 390) has died.
    01-24 16:24:51.320: INFO/WindowManager(68): WIN DEATH: Window{4069f500 com.example/com.example.MyActivity paused=false}
01-24 16:24:51.340: ERROR/InputDispatcher(68): channel '4055da70 com.example/com.example.Second (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
01-24 16:24:51.340: ERROR/InputDispatcher(68): channel '4055da70 com.example/com.example.Second (server)' ~ Channel is unrecoverably broken and will be disposed!
01-24 16:24:51.450: INFO/WindowManager(68): WIN DEATH: Window{4055da70 com.example/com.example.Second paused=false}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:51:47.787

您有两个不同的值来标识调用的`startActivityForResult()`处理方式。On`requestCode`用于标识一个`startActivityForResult()`呼叫，因为您可能有多个呼叫。您用作`Requestcd`标识符。

第二个是`resultCode`让您了解结果状态的方法。如果它的值为`RESULT_OK`，则结果已成功设置在已启动的活动中。如果按下后退按钮，则值为`RESULT_CANCELED`。

在您的情况下，您需要检查这两个值并仅在`requestCode`您`resultCode`期望的时候执行。如果值不同，您应该考虑做一些事情来对此做出反应。一种可能性是通知用户他应该执行的任务（例如：选择图片）已被取消。

仅在设置了结果的情况下尝试以下代码来读取意图的数据。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);                
    if (requestCode == Requestcd) {
        if (resultCode == RESULT_OK) {
            String str13 = data.getExtras().getString("txt");
            String str14 = data.getExtras().getString("txt1");
            editText.setText(str13);
            editText1.setText(str14);
        }
    }
} 
```

# codeigniter - 如何在 Codeigniter 中正确使用别名

> ID：14500500
> 
> 赞同：7
> 
> 时间：2013-01-24T11:39:03.893
> 
> 标签：codeigniter

这是我的代码：

```
$this->db->select('course_name AS Course Name,course_desc AS Course Description,display_public AS Display Status',FALSE);
$this->db->from('courses');
$this->db->where('tennant_id',$tennant_id);
$this->db->order_by('course_name','ASC');
$query = $this->db->get(); 
```

我得到了一个错误：

```
A Database Error Occurred

Error Number: 1064

You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Name, course_desc AS Course Description, display_public AS Display Status FROM (' at line 1 
```

我得到了一个错误：

```
A Database Error Occurred

Error Number: 1064

You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Name, course_desc AS Course Description, display_public AS Display Status FROM (' at line 1

SELECT course_name AS Course Name, 
       course_desc AS Course Description, 
       display_public AS Display Status 
FROM (`courses`) WHERE `tennant_id` = 'elicuarto@apploma.com' 
ORDER    BY `course_name` ASC

Filename: C:\wamp\www\coursebooking\system\database\DB_driver.php

Line Number: 330 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-24T11:50:33.687

尝试

```
$this->db->select('course_name AS `Course Name`, course_desc AS `Course Description`, display_public AS `Display Status`', FALSE); 
```

是您的别名中的空间惹恼了您。

**更新**

我不知道你为什么要这样做，但我认为没有什么能阻止你写作

```
$this->db->select("course_name AS `{$variable}`", FALSE); 
```

（为简单起见仅显示一个字段）

**更新 2**

应该是标准的字符串转换，所以我不知道为什么它对你不起作用..总是有拆分字符串...

```
$this->db->select('course_name AS `' . $variable . '`', FALSE); 
```

# c# - 从另一个项目将应用程序添加到 Windows 注册表

> ID：14500502
> 
> 赞同：1
> 
> 时间：2013-01-24T11:39:12.177
> 
> 标签：c#, windows, registry

我正在构建一个我想安装在计算机上的程序，每次用户启动计算机时，应用程序都会自动运行

为此，我使用了 Windows 注册表并输入了我的应用程序：

`RegistryKey rkApp = Registry.CurrentUser.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true);`

`rkApp.SetValue("workForm", Application.ExecutablePath.ToString());`

这在没有安装的情况下工作正常，但是当我添加安装程序项目并将行放在那里时，安装程​​序项目被添加到注册表而不是我的应用程序剂量有人知道如何使它工作吗？

# javascript - 用 JavaScript 写 GET 参数？

> ID：14500509
> 
> 赞同：0
> 
> 时间：2013-01-24T11:39:26.960
> 
> 标签：javascript, http, url, url-rewriting

简单的问题：我可以使用 JavaScript 将 GET 参数写入当前文档 URL 吗？

说我的网址是：

```
/search 
```

我可以将其更改为：

```
/search?price_from=100 
```

不发回页面？

我正在创建一个单页 JavaScript 应用程序和[History API](http://diveintohtml5.info/history.html)。我想让人们在不重新加载页面的情况下进行搜索。我还想让他们链接到使用标准 GET 参数的结果页面 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:42:11.267

不，您可以将其放在哈希之后，例如：

/搜索#price_from=100

并且不会重新加载页面/回发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:43:49.783

只需使用[`history.pushState`](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history#The_pushState%28%29.C2.A0method)：

```
var getParameters = "?price_from=100"
history.pushState(null, null, document.location.origin + document.location.pathname + getParameters); 
```

不过，旧版浏览器不支持 History API，如果您需要支持它们，可以使用 Mark 的建议。

# javascript - 如何将 XML 对象转换为 Javascript 对象？

> ID：14500510
> 
> 赞同：0
> 
> 时间：2013-01-24T11:39:33.373
> 
> 标签：javascript, xml, ajax

我有一个需要使用 xml 和 javascript 的项目，但是我在这两个方面都没有经验。

基本上它适用于使用 xml 在 rss 提要中发布工作的公司，他们需要的是有一个页面，允许用户输入搜索查询，单击搜索按钮并将可用工作列表返回给他们只有标题和链接，点击链接后，他们将被定向到完整的 rss xml 项目。然后他们可以阅读。

现在就我的逻辑而言，我不知道如何使用 jquery，老实说，我认为它没有必要，我认为这个项目所需要的只是一点 ajax 但是首先需要创建一个 xml 对象，将其转换为 javascript 对象，然后才对其进行操作。ETC...

如果有人有任何见解，我将不胜感激。

# php - php：如何在没有黑色或彩色背景的情况下调整 png 的大小

> ID：14500511
> 
> 赞同：0
> 
> 时间：2013-01-24T11:39:38.887
> 
> 标签：php, file-upload, background, resize, png

代码更新

这是我用来上传的代码。使用一个类，然后在上传时引用它。问题是我们知道（但还没有找到解决方案）是黑色背景。有什么方法可以在不改变背景颜色的情况下保持不透明度？

```
class thumb{   
function load($img){   
$img_info = getimagesize($img);   
$img_type = $img_info[2];   
if($img_type == 1){   
$this->image = imagecreatefromgif($img);     
}  
elseif($img_type == 2){  
$this->image = imagecreatefromjpeg($img);    
}  
elseif($img_type == 3){  
$this->image = imagecreatefrompng($img);     
}  
}  
function get_height(){   
return imagesy($this->image);   
}  

function get_width(){  
return imagesx($this->image);   
}  
function resize($width,$height){   
$img_new = imagecreatetruecolor($width,$height); 
imagealphablending($img_new, false); 
imagesavealpha($img_new,true);
$transparent = imagecolorallocatealpha($img_new, 255, 255, 255, 127);
imagefilledrectangle($img_new, 0, 0, $width, $height, $transparent);      
imagecopyresampled($img_new,$this->image,0,0,0,0,$width,$height,$this->get_width(),$this->get_height());  
}  
function save($img,$img_type = 'imagetype_jpeg'){  
$this->image_type = $img_info[2];   
if($img_type == 'imagetype_gif'){   
imagegif($this->image,$img);     
}  
elseif($img_type == 'imagetype_jpeg'){   
imagejpeg($this->image,$img);     
}  
elseif($img_type == 'imagetype_png'){   
imagepng($this->image,$img);     
}  
} 
```

以及上传后要调整大小的代码

```
$mini_img = new thumb;   
$mini_img->load($path.$image);  
$mini_img->resize(200,80);   
$mini_img->save('../logo_thumb/'.$image); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:44:37.493

1 你需要将混合模式设置为 false 像

```
 <?php
  // Create image
   $im = yourimage;

   // Set alphablending to on
  imagealphablending($im, false); 
```

然后

```
 imagesavealpha($im,true); 
```

# android - 十六个蓝牙振动器连接到 Android 手机

> ID：14500512
> 
> 赞同：11
> 
> 时间：2013-01-24T11:39:40.860
> 
> 标签：android, bluetooth

我们想使用蓝牙将 16 个振动器连接到 Android 手机，并单独控制振动器。

据我所知，一个微微网中只能有八个设备，因此限制了七个振动器（电话本身就是第八个设备）。首先：这是正确的吗？

最多七台连接的设备在 Android 中运行良好且可靠吗？或者 Android 的蓝牙实现或 API 是否存在一些额外的限制或问题？

对于我们的 16 个振动器，我们是否必须构建一个带有附加设备的分散网，以桥接电话的微微网和带有一些振动器的附加微微网？有没有人有这方面的经验，它运作良好吗？

（不，它不是性玩具！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:25:15.970

> 据我所知，一个微微网中只能有八个设备，因此限制了七个振动器（电话本身就是第八个设备）。首先：这是正确的吗？

好的，从技术上讲，Bluetooth Classic 一次最多可以连接 7 台设备并处于活动连接状态。但是随后可以将活动设备置于停放模式，并且它可以有大量设备处于停放模式，因此可以将设备从连接 - 活动状态移动到停放，反之亦然。但是在任何时候你都只能有 7 个活动设备所以主设备应该通过保持（最多 7 个）活动和静止停放并不断在活动和停放模式之间切换它们来管理大量设备。

> 最多七台连接的设备在 Android 中运行良好且可靠吗？或者 Android 的蓝牙实现或 API 是否存在一些额外的限制或问题？

那么在 Android 中，问题是 - 没有一种实现方式，并且许多不同的蓝牙无线电硬件被不同的制造商使用。所以答案是视情况而定。有些非常可靠有些非常糟糕。但是没有公共 API 可以控制/使用我上面描述的停车模式 - 但是如果您可以在内部操作或从您的应用程序访问它，您可以按照您的要求进行操作，

> 在分散网上：

同样，Android 没有任何 API 供您控制它，这会很复杂 - 但您可以强制它进入 scatternet 配置，但同样有限制 - 我在商业设备中看到的最好的设备是 2或同时连接 3 个微微网，这意味着您一次可以连接到 (7+2) 9 个设备（它不满足您的 16 个要求）。

桥接/网状配置可能是可行的 - 您的 2 个设备形成自己的 piconet，即每个组中有 8 个设备，然后组的领导者（主）连接到 Android 设备 - 您在应用程序中管理数据中继。

现在说了这么多 - 你看过低功耗蓝牙吗 - 连接一堆传感器设备的完美候选 - 一次可以连接的设备数量没有理论上的限制 - 但实际上 16 甚至更多是非常可行。Android 目前没有针对它的公共 API。（截至今天）但大多数（几乎所有）最新的 android 设备都带有 4.0 版的蓝牙硬件，这意味着它能够支持低功耗蓝牙。和 iOS 设备 - Mac、iPhone、iPad 有很好的支持和开发人员访问/apis。所以这将是要走的路，我很确定 Android 很快就会为 BLE 提供开发人员 API（至少我希望如此）

# android - Android NDK、CRTP 和工厂设计模式

> ID：14500517
> 
> 赞同：1
> 
> 时间：2013-01-24T11:40:02.857
> 
> 标签：android, c++, templates, android-ndk, crtp

我正在尝试采用[Curiously Recursive Pattern Template](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern) (CRTP) 在我的应用程序中实现一种工厂。

[在这篇不错的帖子](https://stackoverflow.com/questions/2850213/dynamically-register-constructor-methods-in-an-abstractfactory-at-compile-time-u)之后，我开始开发我的 CRTP 版本。通过 CRTP，您只需将工厂产品的新实现声明为好奇模板的子类即可。下面我粘贴了我正在使用的代码的简短示例，它与问题中的示例非常相似。

```
class abstractProduct {
    ...
};

template <uint8_t TYPE, typename DERIVED>
class crtp : public abstractProduct{
    uint8_t mType;
protected:
    crtp() : mType(CRTP_ID){}
public:
    enum { _CRTP_ID = TYPE };
    static const abstractProduct* get(){
        static DERIVED* sInstance = new DERIVED();
        return sInstance;
    }
    static const uint8_t CRTP_ID;
};

template <uint8_t TYPE, typename DERIVED>
const uint8_t crtp<TYPE, DERIVED>::CRTP_ID = Factory::reg(crtp<TYPE, DERIVED>::_CRTP_ID, &crtp<TYPE, DERIVED>::get);

typedef const abstractProduct* (*f_dispenser)(void);
class Factory {
    static std::map<uint8_t, f_dispenser>* sDict;

public:
    static uint8_t reg(uint8_t shID, f_dispenser dispenser);
    static bool has(uint8_t shID);
    static const abstractProduct* dispense(uint8_t shID);
};

class sub : public crtp<1, sub>{
    friend class crtp<1, sub>;
protected:
    sub();
public:
    virtual ~sub();
}; 
```

如您所见，一旦您声明了类`sub`，就应该使用参数创建一个新的 crtp 模板`<1, sub>`。模板类`crtp`声明了一个`const uint8_t CRTP_ID`在 crtp 构造函数中也引用的 static。静态常量变量用 实例化：

```
template <uint8_t TYPE, typename DERIVED>
const uint8_t crtp<TYPE, DERIVED>::CRTP_ID = Factory::reg(crtp<TYPE, DERIVED>::_CRTP_ID, &crtp<TYPE, DERIVED>::get); 
```

`CRTP_ID`应该保证在执行第一条主指令之前被初始化。在类的初始化期间在`CRTP_ID`工厂中注册

我目前正在使用 ndk r8d 和 sdk 21.0.1。

现在的问题。如果我使用默认的 gcc 编译器编译我的项目，一切正常，并且 crtp 的子类会自动注册，如果我使用 android 工具链编译我的项目，则永远不会注册子类。

我做错了什么？

**编辑**

[我的 android 应用程序使用NativeActivity](http://developer.android.com/reference/android/app/NativeActivity.html)完全在 c++ 中实现。我已经定义了一个创建和处理 OpenGLEs 上下文的状态对象。当 Android 通知状态窗口已准备好显示时，它会创建 GL 上下文并加载要渲染的网格。

```
state.cpp
case APP_CMD_INIT_WINDOW:
  LOGI("[state]The window is being shown, get it ready.");
  sSurfManager->init(app->window, app->activity->assetManager);

surfacemanager.cpp
int SurfaceManager::init(ANativeWindow* win, AAssetManager* man){
  ....
  this->mModel = GeometryManager::loadModel("cube.ply", man);
} 
```

从文件中`GeometryManager::loadModel`加载几何体和材料。对于网格中找到的每种材质，它使用此函数创建一个新的 MaterialData 对象：

```
static MaterialData* create(aiMaterial* material); 
```

在 MaterialData::create 函数中，工厂被查询以获取适当的着色器来渲染材质。

```
MaterialData* MaterialData::create(aiMaterial* material){
  ...
  result->setShader(ShaderFactory::dispense(1));
} 
```

我知道这`ShaderFactory::dispense(1)`不是获取着色器的正确方法，但我正在使用它来验证着色器是否是在工厂中创建的。

谢谢！

# notepad++ - 是否可以使用通配符进行 Notepad++ 搜索和替换

> ID：14500527
> 
> 赞同：2
> 
> 时间：2013-01-24T11:41:04.100
> 
> 标签：notepad++, wildcard, replace

我非常希望你能做到这一点，我有超过 1000 次出现的实例在整个文档中略有变化，需要稍微更改，我想知道我是否可以在记事本 ++ 中做到这一点

我需要改变的是：

```
[[image:CWI155 ICS Work station setup_html_2b817479.gif||height="4" width="602"]] 
```

到

```
{{lightbox image="CWI155 ICS Work station setup_html_2b817479.gif" height="4" width="602" group="a"/}} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:48:57.463

尝试将搜索模式设置为“正则表达式”并使用以下搜索/替换值。

找什么：

```
\[\[image:([^\|]+)\|\|height="(\d+)" width="(\d+)"\]\] 
```

用。。。来代替：

```
{{lightbox image="\1" height="\2" width="\3" group="a"/}} 
```

如果图像、高度和宽度值是变化的部分，这应该可以解决问题。

# symbian - CRTMP 服务器 RTSP 播放到 Symbian RealPlayer

> ID：14500531
> 
> 赞同：0
> 
> 时间：2013-01-24T11:41:16.807
> 
> 标签：symbian, rtsp, realplayer, rtmpd

CRTMP 服务器是很棒的工具...当客户端在路由器后面时，Nat Traversal 工作得很好。... 已测试 Android 2.2、2.3、4.1，RTSP 流媒体正常（rtmp flash 也正常）。

但 RealPlayer 上的 RTSP（Helix DNA 10.0 onS60）总是显示“无法播放媒体；或“无法连接”（肯定建立了连接 - 用wireshark检查）。...（这是与编程相关的问题，因为我愿意探索 CRTMP 代码来完成解决方案）

BBC RTSP 频道（wowza 落后）在 symbian realPlayer 中显示良好，但流媒体来源：

ffmpeg -i rtsp://[bbc_channel_address] -c 复制 -f rtsp rtsp://[crtmp_server_addr]:8554/ch

... 可以用于 android，但不适用于 realPlayerS60。

有人知道原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:38:08.890

让 RTSP 工作是不够的。不同的手机对 A/V 编解码器质量有不同的要求。对于该设备，您要提供的内容可能质量太高。这个假设很符合你所说的（在android上工作，但不是在realPlayer上）

您可以通过 crtmpserver 的邮件列表提出这些问题。有关邮件列表的详细信息，请参阅[http://rtmpd.com/resources/](http://rtmpd.com/resources/)

编辑：或者您尝试从 crtmpserver 向手机推送的编解码器甚至不受支持，更不用说达到质量最大限制了

# android - 使另一个布局中的按钮可点击

> ID：14500533
> 
> 赞同：0
> 
> 时间：2013-01-24T11:41:24.750
> 
> 标签：android, button, layout, android-relativelayout

我对 android 比较陌生，这就是我遇到的问题，我有一个主布局，我将其称为布局 A 和另一个我将为此问题称为 B 的布局，我在布局 A 中包含布局 B，并带有包含标签, 布局 B 在布局 A 中用作标题，但布局 B 带有一个按钮，此按钮在布局 A 中不可点击，请问我如何使布局 B 中的此按钮可点击。单击按钮时它应该是开始另一个活动。谢谢您的答复。我会在这里等一会儿，你可能有任何其他问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:54:18.020

这是您从当前活动跳转到第二个活动所需执行的操作。

```
public void onCreate(Bundle savedInstanceState)
      {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);    

        Button button = (Button) findViewById(R.id.button1);// id of your button in layout.xml

        button.setOnClickListener(new OnClickListener()
        {
          public void onClick(View v)
          {
             Intent myIntent = new Intent(CurrentActivity.this, SecondActivity.class);
             CurrentActivity.this.startActivity(myIntent);
          }
        });

      } 
```

# html - 强制facebook分享标题

> ID：14500535
> 
> 赞同：0
> 
> 时间：2013-01-24T11:41:30.507
> 
> 标签：html, facebook, wordpress

我有一个 wordpress 网站，其中有几个简单的页面和标题中的 facebook 共享按钮。就像现在一样，facebook 使用 wordpress 页面名称作为共享的标题，但我希望它改用 html 标题（或者只是指定我自己的）。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:44:39.293

检查这个插件。它允许您在页面或帖子基础上添加打开的图形标签或为您的网站添加默认设置。 [http://wordpress.org/extend/plugins/open-graph-protocol-in-posts-and-pages/](http://wordpress.org/extend/plugins/open-graph-protocol-in-posts-and-pages/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-23T17:24:22.873

只需`<meta property>`在 HTML 中设置标签。注意缩进的行：

```
<html prefix="og: http://ogp.me/ns#">
<head>
<title>Your Title</title>
    <meta property="og:title" content="Your Title" />
    <meta property="og:image" content="http://www.example.com/myimage.jpg" />
...
</head>
...
</html> 
```

您有多种属性可供选择：[Open Graph Protocol Official Documentation](https://ogp.me/)。归根结底，这只是使用正确 HTML 的问题。

# android - Android - 需要不断变化的文本实施建议

> ID：14500536
> 
> 赞同：1
> 
> 时间：2013-01-24T11:41:31.610
> 
> 标签：android, android-asynctask, textview, android-ui, android-handler

我有一个`TextView`显示用户拥有的点数。用户积分被填满时间到他们的最大值。我想要我的`TextView`每 20 秒。显示该点完全填充的剩余时间。（例如，如果`TextView`显示“你有 500 分”，我希望它在 20 秒后更改为“将在 4:17 分钟内完全填写”，此文本将显示 10 秒，然后变回）。
我想到了两种方法来做到这一点：
1）使用`Handler`and `Runnable`，每次文本更改以添加另一个可运行任务。
2) 用 做点填充`AsyncTask`，文字会随着`onProgressUpdate`方法改变。
3）您建议的任何其他方式（并且认为更好）。

提前感谢您的帮助，
丹

# logging - Liferay 6.0.12 日志记录

> ID：14500542
> 
> 赞同：4
> 
> 时间：2013-01-24T11:41:47.930
> 
> 标签：logging, liferay, jboss5.x, liferay-6

我在 JBoss 5.1 上记录 Liferay 6.0.12 类时遇到了一些问题。

我需要更改 Liferay rss portlet 类的日志级别，例如创建另一个附加程序或使用默认的附加程序（server.log），并在那里有所需的调试级别（`DEBUG`或`WARN`）的日志。

据我了解`jboss-log4j.xml`可能会覆盖 Liferay 的配置，所以我尝试修改它。我也尝试过从`log4j.properties`in执行此操作`ROOT.war/WEB-INF/classes`，尝试创建，`portal-log4j-ext.xml`但没有一个对我有用。我唯一能做的——创建另一个附加程序，但它要么是空的，要么是复制 server.log。

有人知道它到底是如何工作的吗？

PS 通过管理 portlet 管理日志级别是不可接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:34:41.607

幸运的是我解决了这个问题。

1.  首先，将 log4j.jar 添加到`ROOT.war/WEB-INF/lib`，不知何故它不存在。
2.  第二次检查类路径中是否有任何内容`log4j.xml`（只需搜索任何内容`ROOT.war`）
3.  如果有任何您可以`log4.xml` `in ROOT.war/WEB-INF/classes`使用所需的附加程序和日志级别创建。
4.  如果没有，您可以使用 log4j.xml 或`log4j.properties`（对于所需的附加程序）和`portal-log4j-ext.xml`（覆盖默认日志级别），因为 Liferay 文档。

# wpf - WPF 渲染性能缓慢

> ID：14500543
> 
> 赞同：13
> 
> 时间：2013-01-24T11:41:48.917
> 
> 标签：wpf, performance

我正在尝试提高我的树视图在 WPF 中的性能，当您打开一个包含 6000 个子节点的节点时，当前显示它大约需要 13 秒。我为子集合使用 observablecollection，数据模板绑定到 TransactionViewModel 类型，该类型有大约 7 列，每列从视图模型中提取一条数据。

创建并实例化了 6000 个子节点的事务视图模型，但由于您还没有直观地显示它们中的任何一个，所以第一次展开节点时，需要 13 秒才能显示。如果您随后收缩并展开节点，它会立即显示，显示/加载时间为零。我能看到的唯一区别是 TransactionviewModel 的每个绑定依赖项属性第一次都有它由 XAML 绑定调用的 getter，而当您第二次重新展开时，这一切都没有发生，因为没有任何改变，所以 WPF 没有再次调用 getter，大概只是将绑定信息保存在内存中，以备第二次扩展时使用。

所以控件的可视化绘制是即时的，但是当你第一次打开它时（即使 6000 个 transactionviewmodel 对象已经完全加载到子集合中），纯粹是行的渲染是需要时间的。

有趣的是，如果我将数据模板更改为不绑定到视图模型对象上的任何依赖项属性并仅输出一个空白网格，则加载仍需要 8 秒。因此，即使没有任何数据绑定调用，树查看器也需要 8 秒来呈现 6000 行。多出 5 秒，然后每行提供大约 5 个绑定数据列，因此与基本渲染相比，这是一个很小的成本。

8s 渲染 6000 个空白行对我来说似乎很高。在将 XAML 从数据模板呈现为树视图时，是否有任何主要原因可能会发生这种情况或需要注意的事项？我试过只使用一个空的数据模板 - 即其中甚至没有一个空白网格，它仍然需要 7 秒。

鉴于它会立即折叠和展开，为什么第一次它甚至没有呈现任何 XAML 或调用任何数据绑定需要这么长时间？

异步调用也不是解决方案，因为我的问题不是 GUI 响应，而是加载数据所花费的时间。用户需要比现在更快地获得数据。

非常感谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T13:40:24.257

在我看来，您需要在 TreeView 中启用虚拟化。

从[优化性能：控制](http://msdn.microsoft.com/en-us/library/vstudio/cc716879(v=vs.90).aspx)：

> 默认情况下，当 ListView 和 ListBox 控件的列表项绑定到数据时，它们会启用 UI 虚拟化。可以通过将 VirtualizingStackPanel::IsVirtualizing 附加属性设置为 true 来启用 TreeView 虚拟化

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-09T04:27:18.690

> 如果 TreeView 包含许多项，则加载所需的时间可能会导致用户界面出现明显延迟。您可以通过将 VirtualizingStackPanel.IsVirtualizing 附加属性设置为 true 来缩短加载时间。当用户使用鼠标滚轮或拖动滚动条的拇指滚动 TreeView 时，UI 的反应也可能很慢。您可以通过将 VirtualizingStackPanel.VirtualizationMode 附加属性设置为 Recycling 来提高用户滚动时 TreeView 的性能。

[如何：提高 TreeView 的性能](https://msdn.microsoft.com/en-us/library/cc716882(v=vs.90).aspx)

XAML：

```
<TreeView Height="200" ItemsSource="{Binding Source={StaticResource dataItems}}" x:Name="myTreeView" 
        VirtualizingStackPanel.IsVirtualizing="True"
        VirtualizingStackPanel.VirtualizationMode="Recycling"/> 
```

以编程方式：

```
myTreeView.SetValue(VirtualizingStackPanel.IsVirtualizingProperty, true);
myTreeView.SetValue(VirtualizingStackPanel.VirtualizationModeProperty, VirtualizationMode.Recycling) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T11:46:32.683

您的问题可能不是渲染而是布局 - 它必须实例化许多 UI 元素以找到它们的大小，以便它可以正确调整许多 UI 元素（滑块）的大小，这需要时间。渲染可能根本不参与其中。

# scheduled-tasks - 从多个队列消费的 Celery 工作人员如何决定从哪个队列开始消费？

> ID：14500544
> 
> 赞同：30
> 
> 时间：2013-01-24T11:41:49.603
> 
> 标签：scheduled-tasks, celery, celeryd

我正在使用 Celery 执行异步后台任务，使用 Redis 作为后端。我对芹菜工人在以下情况下的行为感兴趣：

我正在使用`celeryd`. 该工作人员已通过`-Q`选项分配了两个队列以供使用：

```
celeryd -E -Q queue1,queue2 
```

**工人如何决定从哪里获取下一个要消费的任务？**它会随机消耗来自`queue1`或的任务`queue2`吗？它是否会优先获取 from ，`queue1`因为它在传递给的参数列表中是第一个`-Q`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-10-08T01:14:22.527

根据我的测试，它处理多个队列**round-robin 样式**。

如果我使用这个测试代码：

```
from celery import task
import time

@task
def my_task(item_id):
    time.sleep(0.5)
    print('Processing item "%s"...' % item_id)

def add_items_to_queue(queue_name, items_count):
    for i in xrange(0, items_count):
        my_task.apply_async(('%s-%d' % (queue_name, i),), queue=queue_name)

add_items_to_queue('queue1', 10)
add_items_to_queue('queue2', 10)
add_items_to_queue('queue3', 5) 
```

并以（使用 django-celery）开始队列：

```
`manage.py celery worker -Q queue1,queue2,queue3` 
```

它输出：

```
Processing item "queue1-0"...
Processing item "queue3-0"...
Processing item "queue2-0"...
Processing item "queue1-1"...
Processing item "queue3-1"...
Processing item "queue2-1"...
Processing item "queue1-2"...
Processing item "queue3-2"...
Processing item "queue2-2"...
Processing item "queue1-3"...
Processing item "queue3-3"...
Processing item "queue2-3"...
Processing item "queue1-4"...
Processing item "queue3-4"...
Processing item "queue2-4"...
Processing item "queue1-5"...
Processing item "queue2-5"...
Processing item "queue1-6"...
Processing item "queue2-6"...
Processing item "queue1-7"...
Processing item "queue2-7"...
Processing item "queue1-8"...
Processing item "queue2-8"...
Processing item "queue1-9"...
Processing item "queue2-9"... 
```

因此，即使所有 queue1 任务都在 queue2和 3 任务之前 *发布，它也会在继续下一个 queue1 项目之前从每个队列中提取一个项目。*

**注意：**正如@WarLord 指出的那样，这个确切的行为只有在`CELERYD_PREFETCH_MULTIPLIER`设置为 1 时才有效。如果它大于 1，那么这意味着项目将从队列中*批量*获取。因此，如果您有 4 个进程的 PREFETCH_MULTIPLIER 设置为 4，这意味着将立即从队列中拉出 16 个项目，因此您不会得到上面的确切输出，但它仍将*大致*遵循循环.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-08T08:58:24.637

**注意：**此答案已弃用：最新版本的 Celery 与 2013 年的工作方式大不相同......

消耗多个队列的工作人员消耗任务，FIFO 顺序也跨多个队列维护。

例子：

队列1：（t1，t2，t5，t7）
队列2：（t0，t3，t4，t6）

假设0-7代表发布任务的顺序

消费顺序为 t0, t1, t2, t3, t4, t5, t6, t7

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-05T12:06:44.403

使用指向 rabbitmq 服务器的 pyamqp 代理库，任务以循环方式处理。见下文证明。

似乎处理的订单任务是由代理*库*决定的，而不是实际的后端（rabbitmq vs redis 不是问题）。

软件版本：

```
$ pip freeze | egrep "celery|kombu|amqp"
amqp==2.5.2
celery==4.4.2
kombu==4.6.8 
```

```
from time import sleep

@app.task
def sleepy(name):
    print(f"Processing: {name}")
    sleep(0.5) 
```

然后在另一个 shell 中，将任务排队：

```
from time import sleep

def queue_them():
    for x in range(50):
        sleepy.apply_async(args=(f"Q1-T{x}",), queue="Q1")
    sleep(0.1)
    for x in range(20):
        sleepy.apply_async(args=(f"Q2-T{x}",), queue="Q2")
    sleep(0.1)
    sleepy.apply_async(args=("Q3-T0",), queue="Q3")
    for x in range(30):
        sleepy.apply_async(args=(f"Q2MOAR-T{x}",), queue="Q2")

# setup - get celery to setup the queues and exchanges
sleepy.apply_async(args=("nothing",), queue="Q1")
sleepy.apply_async(args=("nothing",), queue="Q2")
sleepy.apply_async(args=("nothing",), queue="Q3")

# run the test
queue_them() 
```

在另一个 shell 中，运行 celery：

```
$ celery worker -A myapp.celery --pool=prefork --concurrency=2 -Ofair --queues=Q1,Q3,Q2

[2020-05-05 21:59:11,547] WARNING [celery.redirected:235] Processing: Q1-T1
[2020-05-05 21:59:11,547] WARNING [celery.redirected:235] Processing: Q1-T0
[2020-05-05 21:59:12,052] WARNING [celery.redirected:235] Processing: Q1-T2
[2020-05-05 21:59:12,053] WARNING [celery.redirected:235] Processing: Q1-T3
[2020-05-05 21:59:12,556] WARNING [celery.redirected:235] Processing: Q1-T5
[2020-05-05 21:59:12,556] WARNING [celery.redirected:235] Processing: Q1-T4
[2020-05-05 21:59:13,062] WARNING [celery.redirected:235] Processing: Q1-T6
[2020-05-05 21:59:13,063] WARNING [celery.redirected:235] Processing: Q1-T7
[2020-05-05 21:59:13,565] WARNING [celery.redirected:235] Processing: Q1-T9
[2020-05-05 21:59:13,565] WARNING [celery.redirected:235] Processing: Q1-T8
[2020-05-05 21:59:14,069] WARNING [celery.redirected:235] Processing: Q1-T10
[2020-05-05 21:59:14,069] WARNING [celery.redirected:235] Processing: Q3-T0
[2020-05-05 21:59:14,571] WARNING [celery.redirected:235] Processing: Q2-T0
[2020-05-05 21:59:14,572] WARNING [celery.redirected:235] Processing: Q2-T1
[2020-05-05 21:59:15,078] WARNING [celery.redirected:235] Processing: Q1-T11
[2020-05-05 21:59:15,078] WARNING [celery.redirected:235] Processing: Q2-T2
[2020-05-05 21:59:15,581] WARNING [celery.redirected:235] Processing: Q2-T3
[2020-05-05 21:59:15,581] WARNING [celery.redirected:235] Processing: Q1-T12
[2020-05-05 21:59:16,084] WARNING [celery.redirected:235] Processing: Q1-T13
[2020-05-05 21:59:16,084] WARNING [celery.redirected:235] Processing: Q2-T4
[2020-05-05 21:59:16,586] WARNING [celery.redirected:235] Processing: Q1-T14
[2020-05-05 21:59:16,586] WARNING [celery.redirected:235] Processing: Q2-T5
[2020-05-05 21:59:17,089] WARNING [celery.redirected:235] Processing: Q1-T15
[2020-05-05 21:59:17,089] WARNING [celery.redirected:235] Processing: Q2-T6
[2020-05-05 21:59:17,591] WARNING [celery.redirected:235] Processing: Q1-T16
[2020-05-05 21:59:17,592] WARNING [celery.redirected:235] Processing: Q2-T7
[2020-05-05 21:59:18,094] WARNING [celery.redirected:235] Processing: Q1-T17
[2020-05-05 21:59:18,094] WARNING [celery.redirected:235] Processing: Q2-T8
[2020-05-05 21:59:18,597] WARNING [celery.redirected:235] Processing: Q1-T18
[2020-05-05 21:59:18,597] WARNING [celery.redirected:235] Processing: Q2-T9
[2020-05-05 21:59:19,102] WARNING [celery.redirected:235] Processing: Q1-T19
[2020-05-05 21:59:19,102] WARNING [celery.redirected:235] Processing: Q1-T20
[2020-05-05 21:59:19,607] WARNING [celery.redirected:235] Processing: Q1-T21
[2020-05-05 21:59:19,607] WARNING [celery.redirected:235] Processing: Q1-T22
[2020-05-05 21:59:20,110] WARNING [celery.redirected:235] Processing: Q1-T23
[2020-05-05 21:59:20,110] WARNING [celery.redirected:235] Processing: Q2-T10
[2020-05-05 21:59:20,614] WARNING [celery.redirected:235] Processing: Q1-T24
[2020-05-05 21:59:20,614] WARNING [celery.redirected:235] Processing: Q2-T11
[2020-05-05 21:59:21,118] WARNING [celery.redirected:235] Processing: Q1-T25
[2020-05-05 21:59:21,118] WARNING [celery.redirected:235] Processing: Q1-T26
[2020-05-05 21:59:21,622] WARNING [celery.redirected:235] Processing: Q2-T12
[2020-05-05 21:59:21,622] WARNING [celery.redirected:235] Processing: Q1-T27
[2020-05-05 21:59:22,124] WARNING [celery.redirected:235] Processing: Q1-T28
[2020-05-05 21:59:22,124] WARNING [celery.redirected:235] Processing: Q2-T13
[2020-05-05 21:59:22,627] WARNING [celery.redirected:235] Processing: Q2-T14
[2020-05-05 21:59:22,627] WARNING [celery.redirected:235] Processing: Q1-T29
[2020-05-05 21:59:23,129] WARNING [celery.redirected:235] Processing: Q1-T31
[2020-05-05 21:59:23,129] WARNING [celery.redirected:235] Processing: Q1-T30
[2020-05-05 21:59:23,631] WARNING [celery.redirected:235] Processing: Q2-T15
[2020-05-05 21:59:23,632] WARNING [celery.redirected:235] Processing: Q1-T32
[2020-05-05 21:59:24,134] WARNING [celery.redirected:235] Processing: Q1-T33
[2020-05-05 21:59:24,134] WARNING [celery.redirected:235] Processing: Q2-T16
[2020-05-05 21:59:24,636] WARNING [celery.redirected:235] Processing: Q2-T17
[2020-05-05 21:59:24,636] WARNING [celery.redirected:235] Processing: Q2-T18
[2020-05-05 21:59:25,138] WARNING [celery.redirected:235] Processing: Q2-T19
[2020-05-05 21:59:25,139] WARNING [celery.redirected:235] Processing: Q1-T34
[2020-05-05 21:59:25,641] WARNING [celery.redirected:235] Processing: Q1-T35
[2020-05-05 21:59:25,642] WARNING [celery.redirected:235] Processing: Q2MOAR-T0
[2020-05-05 21:59:26,144] WARNING [celery.redirected:235] Processing: Q1-T36
[2020-05-05 21:59:26,144] WARNING [celery.redirected:235] Processing: Q1-T37
[2020-05-05 21:59:26,649] WARNING [celery.redirected:235] Processing: Q2MOAR-T1
[2020-05-05 21:59:26,649] WARNING [celery.redirected:235] Processing: Q1-T38
[2020-05-05 21:59:27,153] WARNING [celery.redirected:235] Processing: Q2MOAR-T2
[2020-05-05 21:59:27,154] WARNING [celery.redirected:235] Processing: Q1-T39
[2020-05-05 21:59:27,656] WARNING [celery.redirected:235] Processing: Q2MOAR-T3
[2020-05-05 21:59:27,656] WARNING [celery.redirected:235] Processing: Q2MOAR-T4
[2020-05-05 21:59:28,159] WARNING [celery.redirected:235] Processing: Q2MOAR-T5
[2020-05-05 21:59:28,160] WARNING [celery.redirected:235] Processing: Q1-T40
[2020-05-05 21:59:28,664] WARNING [celery.redirected:235] Processing: Q2MOAR-T6
[2020-05-05 21:59:28,664] WARNING [celery.redirected:235] Processing: Q1-T41
[2020-05-05 21:59:29,167] WARNING [celery.redirected:235] Processing: Q2MOAR-T7
[2020-05-05 21:59:29,167] WARNING [celery.redirected:235] Processing: Q1-T42 
```

当 celery 以 1 的并发运行时，结果类似：

```
[2020-05-05 22:01:33,879] WARNING [celery.redirected:235] Processing: Q1-T0
[2020-05-05 22:01:34,385] WARNING [celery.redirected:235] Processing: Q1-T1
[2020-05-05 22:01:34,888] WARNING [celery.redirected:235] Processing: Q1-T2
[2020-05-05 22:01:35,391] WARNING [celery.redirected:235] Processing: Q1-T3
[2020-05-05 22:01:35,894] WARNING [celery.redirected:235] Processing: Q1-T4
[2020-05-05 22:01:36,397] WARNING [celery.redirected:235] Processing: Q1-T5
[2020-05-05 22:01:36,899] WARNING [celery.redirected:235] Processing: Q3-T0
[2020-05-05 22:01:37,404] WARNING [celery.redirected:235] Processing: Q2-T0
[2020-05-05 22:01:37,907] WARNING [celery.redirected:235] Processing: Q2-T1
[2020-05-05 22:01:38,411] WARNING [celery.redirected:235] Processing: Q1-T6
[2020-05-05 22:01:38,913] WARNING [celery.redirected:235] Processing: Q2-T2
[2020-05-05 22:01:39,417] WARNING [celery.redirected:235] Processing: Q2-T3
[2020-05-05 22:01:39,919] WARNING [celery.redirected:235] Processing: Q2-T4
[2020-05-05 22:01:40,422] WARNING [celery.redirected:235] Processing: Q1-T7
[2020-05-05 22:01:40,925] WARNING [celery.redirected:235] Processing: Q2-T5
[2020-05-05 22:01:41,429] WARNING [celery.redirected:235] Processing: Q1-T8 
```

# python - 如果某个索引缺少元素，如何回退

> ID：14500547
> 
> 赞同：0
> 
> 时间：2013-01-24T11:42:11.660
> 
> 标签：python

如果数组的某个索引中没有元素，有没有办法回退到空值

```
foo_val = int(data_arr[3]) 
```

IndexError：列表索引超出范围

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:45:30.437

使用`try`和`except`。

```
try: # Try doing this piece of code
    foo_val = int(data_arr[3])
except IndexError: # If there is an IndexError, do this piece of code.
    foo_val = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:46:06.017

替代尝试，除了：

它是一行而不是 4 行，并且仍然可读：

```
foo_val = int(data_arr[3]) if len(data_arr) >= 4 else 0 
```

请注意，`len`它不是零索引，因此 >=4 而不是 >=3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T12:19:44.703

您可以使用模块`defaultdict`中的a `collections`：

```
dd = collections.defaultdict(int) # default to zero, change as needed
for n, x in enumerate(data_arr):
    dd[n] = x
dd[len(data_arr) + 10] # IndexError for data_arr, returns 0 with defaultdict 
```

您也可以只使用 a 来执行此操作，方法`dict`是使用`get`提供默认值的方法，但 a`defaultdict`更方便一些。

# android - Android onDestroy 回调

> ID：14500548
> 
> 赞同：1
> 
> 时间：2013-01-24T11:42:13.640
> 
> 标签：android

我有一个调用活动 2 的活动当用户关闭活动 2 并返回活动 1 时，我只想在活动 2 onDestroy 完成时执行一些过程

我想通过一些接口从 onDestroy 结束时进行回调

不知道什么是最好的方法

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:15:16.527

您可以将自定义意图与广播接收器一起使用：[Good Example](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html#ownreceiver_create)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:25:58.333

该框架不允许在您的应用程序中同时运行 2 个活动，因此我认为您的界面想法不可行。

可能符合您要求的更简单的替代方法是在活动 1 中使用[StartActivityForResult来启动 A2。](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)A1 将在 A2 完成时获得 onActivityResult 回调（无论出于何种原因）

详情请查看[API](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)。

# google-apps-script - Google UI 应用：发布相同代码的两个版本？

> ID：14500549
> 
> 赞同：2
> 
> 时间：2013-01-24T11:42:15.417
> 
> 标签：google-apps-script

这可能吗？我想我可能在这里错过了一些明显的东西。我有一个实时 UI 脚本应用程序，我需要修复一个错误。潜在的错误修复必须在多个浏览器上进行测试，所以它实际上必须发布，而不是仅仅尝试“当前版本”。这意味着它必须发布到一个新的 URL。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:27:18.380

*它实际上必须发布，而不是仅仅尝试“当前版本”*？

没有理由使用不同的浏览器会阻止使用 de 'dev' 版本的应用程序......您可以同时登录多个浏览器并在每个浏览器上使用 dev 版本（我经常使用同时使用几个 android 和 osX 浏览器）。您是否尝试过并且遇到过这样做的问题？

# java - Java中的返回对象是什么意思

> ID：14500550
> 
> 赞同：1
> 
> 时间：2013-01-24T11:42:16.603
> 
> 标签：java, object, return

我知道java是按值而不是按引用返回的，所以它会复制对象并传递新的副本。return 语句也是这种情况吗？是否

```
return obj; 
```

创建一个新的对象副本或简单地返回当前对象本身。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T11:45:52.490

不，这是一个错误的假设。Java确实**通过 value 传递所有内容**，但这意味着以下内容：

*   标量变量包含值，因此您可以很容易地看到它们是按值传递的。

*   另一方面，对象变量*不包含对象*。您可以将它们视为包含对象的伪地址。该伪地址被复制（按值），*但它仍然指向同一个对象*。（对象实际上只使用`new`表达式创建。）

以上对于赋值、参数和返回值都是正确的（对于两种类型的变量）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T11:43:51.203

`so it makes a copy of the object and passes the new copy`

不！它不是！

按值返回是指`obj`返回引用中的值，如果`obj`指向某个对象，则从该返回方法中收集返回值的其他引用也将指向与`obj`所指向的对象相同的对象。

不，它不会创建另一个要返回的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T11:43:52.923

Java 不会复制对象，它会将对象引用传递给方法，并在您使用时返回`return`

它复制值的唯一时间是当您使用主要类型时，例如`int`，`char`或`double`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T11:44:41.333

它只是返回当前对象本身。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T11:44:52.387

你说的更像是`C++`在做这样的事情。当您返回一个对象（非基本类型）时，您将返回一个引用，并且您不会创建新对象或执行复制。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-24T11:44:53.867

在 java 中，原子类型（char、int、long 等）按值返回。对象总是通过引用返回（没有克隆）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-24T11:45:31.673

> 是`return obj;`创建一个新对象复制还是返回当前对象本身？

-->`obj`是指向堆上实际对象的对象引用。将在您分配返回的方法中创建新的对象引用（由您）`obj`。

```
Object method() {
  //....
  return obj;
}

void methodA() {
  Object objA = method(); // obj and objA are different because of their scopes but values are same(assigned to objA). That's why both points to the same Object on heap
} 
```

# php - JQuery 没有得到选择对象的值

> ID：14500551
> 
> 赞同：0
> 
> 时间：2013-01-24T11:42:20.027
> 
> 标签：php, jquery

我在弹出窗口中使用两个动态对象（一个是选择，另一个是单选按钮）。然后调用它们的值来传递 Ajax 函数。但是由于一些未知的原因，它不起作用。当我删除单选按钮时，它工作正常。

生成对象的 PHP 代码：

```
$submit_newform=
'<form method="POST">
<div id="waiting" style="display:none; font-weight:bold">Please wait ...</div><br />
<table width="100%" border="0" cellspacing="3" cellpadding="3">
  <tr><td colspan="4"><h1>Add Component Itinerary</h1></td></tr>
  <tr>`
    <td width="25">Service:</td>

    <td width="25">
    <select name="cmb_service" id="cmb_service" class="dropdown2">
    <option value="">-Select-</option>';
    foreach($services as $k=>$v)
    $submit_newform.= "<option value=".$k.">".$v."</option>";

    $submit_newform.= '</select></td>

    </tr>;

 $submit_newform.='<tr><td><input type="radio" name="package" id="package" value="package"` `class="packagetype" onClick="callservice_provider();">Package</input></td><td><input` `type="radio" name="package" id="package" value="nopackage" class="packagetype"` `onClick="callpackages();">Without Package</input></td></tr></table></form>'; 
```

jquery部分如下：

```
$(document).ready(function() {

        $('input.packagetype').click( function( event ){
            var value = $(this).val();
            if(value =="package")
                {
                    alert("show package");
                }
            else
            {
                var destination = $("#destination").val();
                var service_val = $(cmb_service).val();
                   alert(destination+"+"+service_val);
                $.ajax({
                        type : 'POST',
                        url : '../enquiries/getpricebyajax',
                        dataType : 'json',
                        data: {
                                service : service_val,
                                destno : destination
                        },
                        success : function(data) {
                               alert("success");
                               $('#divserviceprovider').text('');
                               $('#divserviceprovider').append(data.msg);
                               $('#divserviceprovider').show(500);
                               if (data.error === true)
                                    $('#divserviceprovider').show(500);
                        },
                        error : function(XMLHttpRequest, textStatus, errorThrown) {
                            alert("success");
                                $('#waiting').hide(500);
                                $('#divserviceprovider').removeClass().addClass('error')
                                    .text('There was an error.').show(500);
                                $('#divserviceprovider').show(500);
                        }
                });
                return false;
            }
        });
}); 
```

两个对象`select`并`radio button`不能一起工作。请给我建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:50:12.463

我假设您想要该下拉列表的选定值？

```
$("#cmb_service option:selected").val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:47:28.500

你的输入

```
<input type="radio" name="package" id="package" value="package"` `class="packagetype" onClick="callservice_provider();">Package</input> 
```

我不认为输入有结束标签（据我所知）

```
<input type="radio" name="package" id="package" value="package" class="packagetype" onClick="callservice_provider();" />Package 
```

而且你在jquery中有`onclick`内联函数和`click`事件......我想知道......为什么会这样？？......为什么你不能同时做这两件事......无论是在你的 `callservice_provider()`函数中还是在jquery`click`事件中......

我想你在这里错过了哈希

```
$('#cmb_service').val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:49:03.953

你的代码有一些缺陷

1）您不能为两个控件提供相同的 id。您已经`id="package"`为两个单选按钮提供了支持。

2）在阿贾克斯，

```
var service_val = $(cmb_service).val(); 
```

这条线应该抛出一个错误。你不能像这样访问id。你必须访问喜欢

```
var service_val = $("#cmb_service").val(); 
```

只需再次检查您的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T12:08:28.000

我已经修改了您的代码，希望对您有所帮助

```
<html>
    <head>
    <title></title>
    <script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script>
    $(document).ready(function() {

        $('input.packagetype').click( function( event ){
            var value = $(this).val();
            if(value =="package")
                {
                    alert("show package");
                }
            else
            {
                var destination = $("#destination").val();
                var service_val = $("#cmb_service").val();
                   alert(destination+"+"+service_val);
                $.ajax({
                        type : 'POST',
                        url : '../enquiries/getpricebyajax',
                        dataType : 'json',
                        data: {
                                service : service_val,
                                destno : destination
                        },
                        success : function(data) {
                               alert("success");
                               $('#divserviceprovider').text('');
                               $('#divserviceprovider').append(data.msg);
                               $('#divserviceprovider').show(500);
                               if (data.error === true)
                                    $('#divserviceprovider').show(500);
                        },
                        error : function(XMLHttpRequest, textStatus, errorThrown) {
                            alert("success");
                                $('#waiting').hide(500);
                                $('#divserviceprovider').removeClass().addClass('error')
                                    .text('There was an error.').show(500);
                                $('#divserviceprovider').show(500);
                        }
                });
                return false;
            }
        });
});
    </script>

    </head>
    <body>
        <?php

        $services =array('apple','orange','grapes');
$submit_newform=
'<form method="POST">
<div id="waiting" style="display:none; font-weight:bold">Please wait ...</div><br />
<table width="100%" border="0" cellspacing="3" cellpadding="3">
  <tr><td colspan="4"><h1>Add Component Itinerary</h1></td></tr>
  <tr>`
    <td width="25">Service:</td>

    <td width="25">
    <select name="cmb_service" id="cmb_service" class="dropdown2">
    <option value="">-Select-</option>';
    foreach($services as $k=>$v)
    $submit_newform.= "<option value=".$k.">".$v."</option>";

    $submit_newform.= '</select></td>

    </tr>;';

 $submit_newform.='<tr><td><input type="radio" name="package" id="package" value="package" class="packagetype" onClick="callservice_provider();">Package</input></td><td><input type="radio" name="package" id="nopackage" value="nopackage" class="packagetype" onClick="callpackages();">Without Package</input></td></tr></table></form>';
 echo $submit_newform;
        ?>
    </body>
</html> 
```

有一些事情我想提一下。

1.  不要`id`对单选按钮使用相同的。
2.  我刚刚看到了警报，它现在可以工作了。

如果你还需要什么让我知道

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T12:09:25.467

# 看

```
$submit_newform.='<tr><td><input type="radio" name="package" id="package"// same id
                  value="package"` `class="packagetype" 
                  onClick="callservice_provider();">Package</input></td> //</input>
              //--^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^---------^^^^^^^----bad closing
                 <td><input` `type="radio" name="package" id="package" // same id
                 value="nopackage" class="packagetype"
                 onClick="callpackages();">Without Package</input></td>
                </tr></table></form>'; 
```

如果您在此处单击特定收音机，则不需要内联`onclick`处理程序：

```
$('input.packagetype').click( function( event ){ 
```

# 在你的其他部分：

```
var service_val = $(cmb_service).val(); 
```

# 应该是：

```
var service_val = $("#cmb_service").val(); 
```

* * *

# 所以你的最终代码必须是这样的：

```
$submit_newform.='<tr><td><input type="radio" name="package" id="package1"
                  value="package"` `class="packagetype"/>Package
                  </td> 
                 <td><input type="radio" name="package" id="package2" 
                 value="nopackage" class="packagetype"/>Without Package
                 </td>
                </tr></table></form>'; 
```

# jQuery：

```
$(document).ready(function () {

$(document).on('click', 'input.packagetype', function (event) {
    var value = $(this).val();
    if (value == "package") {
        alert("show package");
    } else {
        var destination = $("#destination").val();
        var service_val = $("#cmb_service").val();
        alert(destination + "+" + service_val);
        $.ajax({
            type: 'POST',
            url: '../enquiries/getpricebyajax',
            dataType: 'json',
            data: {
                service: service_val,
                destno: destination
            },
            success: function (data) {
                alert("success");
                $('#divserviceprovider').text('');
                $('#divserviceprovider').append(data.msg);
                $('#divserviceprovider').show(500);
                if (data.error === true) $('#divserviceprovider').show(500);
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert("success");
                $('#waiting').hide(500);
                $('#divserviceprovider').removeClass().addClass('error')
                    .text('There was an error.').show(500);
                $('#divserviceprovider').show(500);
            }
        });
        return false;
    }
});
}); 
```

# ios - iOS 中的游戏菜单

> ID：14500555
> 
> 赞同：0
> 
> 时间：2013-01-24T11:42:57.707
> 
> 标签：ios, opengl-es

如果我的游戏视图是 GLKViewController，那么创建游戏菜单的最佳方式是什么？

如果我使用 XCode (iOS >= 5) 中可用的 OpenGL 游戏模板创建一个测试应用程序，我可以添加一个导航控制器，创建一个 UIViewController 作为游戏菜单并添加一个按钮 New Game 例如，它对我的GLKViewController，如果你按照这些步骤，运行应用程序，点击New Game按钮，看到两个正在旋转的立方体然后点击Back，你会看到同样的屏幕，需要再次点击返回才能回到Game Menu。在此过程中记录以下错误：

```
2013-01-24 22:35:18.781 test1[640:907] nested push animation can result in corrupted navigation bar
2013-01-24 22:35:19.221 test1[640:907] Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted.
2013-01-24 22:35:19.226 test1[640:907] Unbalanced calls to begin/end appearance transitions for <TestViewController: 0x1d836880>.
2013-01-24 22:35:33.689 test1[640:907] nested push animation can result in corrupted navigation bar
2013-01-24 22:35:34.079 test1[640:907] Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted.
2013-01-24 22:35:34.083 test1[640:907] Unbalanced calls to begin/end appearance transitions for <TestViewController: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:55:49.370

在 ios 中创建游戏菜单的一些参考。

[1.开源弹出式Pie风格菜单iOS控件，动画效果](http://maniacdev.com/2012/02/tutorial-how-to-add-a-rotating-pie-menu-to-your-ios-apps/) [不错2.iOS上的Pie菜单](http://mattgemmell.com/2011/09/08/pie-menus-on-ios/)

这是一个很棒的菜单列表，请查看此站点：

[iOS 开源 Facebook/Path 喜欢的侧边栏菜单实现](http://bitly.com/bundles/o_27ukkruo5l/1)

# spring - Spring portlet mvc 初始化方法

> ID：14500558
> 
> 赞同：0
> 
> 时间：2013-01-24T11:43:08.167
> 
> 标签：spring, jakarta-ee, spring-mvc, liferay

我正在使用 spring portlet mvc 和 liferay。我需要知道是否有一种方法可以在所有 @ModelAttribute 注释之前调用方法（类似于 init 方法）。我需要这个，因为我在所有 @ModelAttribute 方法中使用从 db 检索的对象来从对象中提取属性子集。我正在使用请求参数发送数据库中行的 pk-id。我不想在上面注释的所有方法中重新检索对象（这会减慢渲染速度，因为我正在与 db 进行多个连接以检索相同的对象，我可以在一个类似 init 的方法，应该在任何渲染/操作请求之前调用）。我试过@PostConstruct，但它给我一个异常，显然这不是解决方案。我不

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:44:05.043

**编辑：**

好的，所以如果您需要在 @(Action/Request) 映射之前调用方法，您可以使用Spring MVC 框架中的[拦截器。](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-handlermapping-interceptor)

这个[链接](http://forum.springsource.org/showthread.php?126174-How-to-configure-an-interceptor-in-Spring-MVC-Portlet)可能有用。

* * *

不直接回答您的问题，但我建议创建一个服务以从数据库中检索对象，然后将该服务注入到 portlet 中：

```
@Autowired ServiceDao serviceDao 
```

这样您就可以将数据库访问层与视图层分开（控制器不应直接查询数据库）。

然后为了解决您的问题，您可以发布一些代码吗？如果您每个人都`@ModelAttribute`需要来自 BD 的一些对象，例如，您可以检索它一次，然后将其缓存在您的服务中。

[Spring Portlet MVC 注释](http://books.dzone.com/articles/spring-30-portlet-mvc-part-2)上的一些资源可能有用。

# c# - 创建自定义 wpf 事件

> ID：14500559
> 
> 赞同：20
> 
> 时间：2013-01-24T11:43:08.277
> 
> 标签：c#, wpf, xaml, events, custom-event

我为数据库连接创建了一个用户控件，用户输入用户名和密码进行连接。此 UserControl 位于 MainWindow.xaml

现在，在我的 UserControl 后面的代码中，我创建了一个 MSSQL 连接。如果登录成功，我想引发一个自定义事件以在 MainWindow 中公开。

**例如在 MyUserControl.xaml.cs**

```
try
{

    using (SqlConnection sqlConn = new SqlConnection(connection))
    {
        sqlConn.Open();
        MessageBox.Show("Connessione Riuscita!", "Connessione a " + TextIP.Text, MessageBoxButton.OK, MessageBoxImage.Information);
        RaiseMyEvent();
        sqlConn.Close();                 
    }
}
catch (SqlException ex)
{
    MessageBox.Show("Connessione Fallita: " + ex.Message, "Connessione a " + TextIP.Text, MessageBoxButton.OK, MessageBoxImage.Error);
} 
```

**在 MainWindow.xaml 我想使用 mypersonalized 事件：**

```
<Window x:Class="XLogin.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        xmlns:local="clr-namespace:XLogin" WindowStartupLocation="CenterScreen">
    <Grid>
        <local:DBLogin x:Name="DBLoginFrame" MyPersonalizedUCEvent="DBLoginFrame_MyPersonalizedUCEvent"/>
    </Grid>
</Window> 
```

我需要这个用于多种类型的连接（MSSQL、Oracle、MySql 等）。

如何得到这个？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-24T12:00:16.520

首先，您应该定义一个委托，然后使用该委托来定义该事件。

在您的 MyUserControl.xaml.cs 文件中添加以下内容

选项1

```
 public delegate void MyPersonalizedUCEventHandler(string sampleParam);

    public event MyPersonalizedUCEventHandler MyPersonalizedUCEvent;

    public void RaiseMyEvent()
    {
        // Your logic
        if (MyPersonalizedUCEvent != null)
        {
            MyPersonalizedUCEvent("sample parameter");
        }
    } 
```

就是这样。你已经定义了你的事件。

选项 2

```
 public event Action<String> MyPersonalizedUCEvent;

    public void RaiseMyEvent()
    {
        // Your logic
        if (MyPersonalizedUCEvent != null)
        {
            MyPersonalizedUCEvent("sample parameter");
        }
    } 
```

`Action`可以在此[链接](http://msdn.microsoft.com/en-us/library/018hxwa8(v=vs.110).aspx)中找到有关委托的更多信息。

**笔记：**

在许多情况下，如果未正确使用事件，它们可能会导致内存泄漏。只需确保您已编写代码来删除已注册的事件处理程序，如下所示。

```
 MyPersonalizedUCEvent -= MyPersonalizedUCEventHandler; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-05-24T08:30:28.390

首先在您的班级中创建一个公共事件：

```
public event EventHandler<MyEventArgs> SomethingChanged; 
```

**NB** `MyEventArgs`是将与事件一起传递给订阅者的对象类型。对于这个例子，它可能是这样的：

```
public class MyEventArgs{
    public String Prop1 {get; set;}
} 
```

下一次在你的课堂上按原样开火：

```
SomethingChanged?.Invoke(this, new MyEventArgs() { Prop1="test" }); 
```

最后像这样处理它：

```
private void OnSomethingChanged(object sender, MyEventArgs e)
{
    //TODO
} 
```

**注意**您需要订阅事件才能进入该`OnSometingChanged`方法。像这样订阅：

```
myClass.SomethingChanged+=OnSomethingChanged; 
```

`myClass`您定义的类的实例在哪里`SomethingChanged`

# android - 用于抽象 API 请求和缓存的内容提供程序？

> ID：14500560
> 
> 赞同：1
> 
> 时间：2013-01-24T11:43:09.300
> 
> 标签：android

我正在学习android app dev，需要将UI和进行网络API调用的部分分开，将来可能会有缓存。

我应该使用*Content Provider*类来包装数据获取和缓存吗？我将如何从中受益？

或者，我应该只创建一个自定义类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:55:02.840

首先，您可以查看有关 REST 最佳实践的[Google I/O 视频- 非常棒）））](http://www.youtube.com/watch?v=xHXn3Kg2IQE)

`ContentProvider`将使您有可能用于`ContentObserver`监视更改`ContentProvider`并自动将数据重新获取到 UI。但是你需要实现很多不同的东西并编写大量代码。

第二种方法是使用`SQLiteOpenHelper`+ 手动通知您有关 DB（您的缓存）更改的 UI `LocalBroadcast`，例如。

我认为这两种方式都是可用的，所以这取决于你，只取决于你的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:16:58.153

我使用了两个库并将其组合成一个自定义类。

[`AsyncHttpClient`](http://loopj.com/android-async-http/)用于进行网络调用和（一个简单的[`DataManagement`](http://epsilonlabsllc.github.com/DataManagement/)数据库）用于缓存。

自定义类将检查数据库中的缓存是否可用。如果可用，它将从缓存中返回数据。如果不是，则进行网络调用并将响应缓存在数据库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T12:01:17.607

另一个想法是使用 Google 的 Loader 类，因为它通过旋转持续存在，您可以实现一个加载器来运行基本的 Http 连接，如此处所示[。](https://github.com/ChristopherTulip/MapHomeTest/blob/master/src/com/tulip/maphometest/API/BasicLoader.java)请记住，Evos 所说的一切都是真的，这只是另一个想法/替代方案。

还要查看[AsyncTasks](http://developer.android.com/reference/android/os/AsyncTask.html)

# php - 在 MySQL 表列上存储多个值并在查询中使用它们？

> ID：14500565
> 
> 赞同：1
> 
> 时间：2013-01-24T11:43:36.527
> 
> 标签：php, mysql, arrays, pdo

抱歉标题难以理解，但这里什么也没有：

我的用户表上有两种用户，`trainee`& `coach`。

`Trainee`可以添加一个`coach`，并且`coach`会看到`trainee`将在数据库上创建的东西。

这很简单，如果`coach`只能有 1 `trainee`，只需将`trainee`'s userID 存储在名为`iscoachof`. 但是，多个用户必须能够添加教练，因此`iscoachof`可能包含比一个更多的用户 ID。喜欢`34,72,345,87,97`。

`iscoachof`因此，这是我当前的代码，它将使用新值更新列。

```
 $fd = $_POST['coach'];
 $user = $_SESSION['login']['id'];
 $query = "UPDATE users SET iscoachof='$user' WHERE id='$fd'";
 $add = $db->prepare($query);
 if($add->execute()){
   echo "Lisätty";
 }
 else{
 echo "Ei lisätty";
 } 
```

它只是覆盖当前值，这不是一个选项。

所以，我需要做类似的事情

```
$currentval =  "SELECT iscoachof FROM users WHERE id='$fd';
$do = $db->prepare($currentval);
$do->execute();
while($row = $do->fetchObject()){
$currentval = $row->iscoachof;
} 
```

在更新之前获取当前值，但是我应该如何存储它，以便稍后在这样的查询中使用它`$data`

```
$q = "SELECT * FROM diaries WHERE UserID='$data' AND date='$today'";
$do = $db->prepare($q);
$do->execute(); 
```

所以基本上，**是否可以将它存储在一个数组中，然后将其保存到数据库中以提取值？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:48:08.593

我建议您再次查看您的数据库设计。最好有一个不同的表来存储教练和学员之间的关系。这样您就可以在需要时从表中添加/删除。

```
$fd = $_POST['coach'];
$user = $_SESSION['login']['id'];
$query = "INSERT into coaches SET coach='$fd', user=$user";
$add = $db->prepare($query);
if($add->execute()){
 echo "Lisätty";
}
else{
echo "Ei lisätty";
} 
```

但要小心进入的 POST 变量，否则您将面临 SQL 注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:54:27.823

干得好：

创建另一个表，例如`coach_to_trainee`

```
coach_id INTEGER
trainee_id INTEGER 
```

两者都是主键。

然后你可以简单地添加一对新的 couch_id <- trainee_id。在这种情况下，这将是一个多对多的关系，假设一个学员可以有多个教练，而一个教练可以分配给多个学员......

并以粗体字回答您的问题：是的，这是可能的。

**编辑：**创建表的 SQL：

```
CREATE TABLE `coach_to_trainee` (
  `coach_id` INTEGER NOT NULL,
  `trainee_id` INTEGER NOT NULL,
  PRIMARY KEY (`coach_id`, `trainee_id`)
) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-24T11:50:10.003

我不知道您的数据库和体系结构，但不是更容易存储每个教练的学员列表，反过来并为每个学员分配一个教练？

如果不是，您可以存储逗号分隔值并稍后使用 PHP 解析它

编辑：但正如其他人所说，没有必要做后一件事，因为你可以有一个方便的一对多关系，所以每个教练都有一个表，每个用户都有一个表，然后例如为每个用户分配一个教练

# sql-server-2008 - 存储过程中的错误

> ID：14500566
> 
> 赞同：1
> 
> 时间：2013-01-24T11:43:37.120
> 
> 标签：sql-server-2008, stored-procedures

我有一个存储过程

```
Create proc [dbo].[DNNCentric_TechAnyClass_Course_FilterByCategory]
@CategoryName nvarchar(350)='Business'
AS
BEGIN
Declare @Category nvarchar(350)
Set @Category=""
if(@CategoryName='Business')
begin
  Set @Category=@CategoryName
end
select Course.CourseId,Course.CourseTitle,Course.CourseDescription,Category.CategoryName,FormatMaster.FormatType,Teacher.TeacherName
From dbo.DNNCentric_TechAnyClass_CategoryMaster As Category 
     Inner Join dbo.DNNCentric_TechAnyClass_Course As Course ON Category.CategoryID = Course.CategoryId
     Inner Join dbo.DNNCentric_TechAnyClass_FormatMaster As FormatMaster ON FormatMaster.FormatID = Course.FormatID
     Inner Join dbo.DNNCentric_TechAnyClass_Teacher As Teacher ON Teacher.TeacherId=Course.TeacherId
Where    Category.CategoryName=@Category 
END 
```

它显示和错误为

```
Msg 1038, Level 15, State 4, Procedure DNNCentric_TechAnyClass_Course_FilterByCategory, Line 6
An object or column name is missing or empty. For SELECT INTO statements, verify each column has a name. For other statements, look for empty alias names. Aliases defined as "" or [] are not allowed. Change the alias to a valid name. 
```

什么是错误，我正在承诺。感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T11:45:11.690

```
Set @Category="" 
```

应该

```
SET @Category='' 
```

双引号 (") 应该是撇号 (')

# c# - 通过枚举类初始化对象

> ID：14500567
> 
> 赞同：0
> 
> 时间：2013-01-24T11:43:38.830
> 
> 标签：c#, oop

我正在构建一个像数码相机一样的小应用程序，我试图了解这是否是一个好的 oop 方式，在我构建一个相机对象之后，我正在“给”它一个存储卡类，内存类获取类型来自枚举类的卡片和大小形成一个枚举类，

现在我需要将这两个合并到一个数组中，即存储卡。

```
 public enum MemoryCardType
{
    Sd,
    xd,
    MicroSd,

}
    public enum MemoryCardSize
{
    TwoGB = 2024,
    FourGB = 4048,
    EightGB = 8096

}
    public class MemoryCard
{

    public MemoryCard(MemoryCardType memoryCardType, MemoryCardSize memoryCardSize)
    {
        this.MemoryCardType = memoryCardType;
        this.MemoryCardSize = memoryCardSize;
    }

    public MemoryCardType MemoryCardType { get; set; }
    public MemoryCardSize MemoryCardSize { get; set; }
} 
```

这是最好/正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T12:04:19.560

您的方法没有任何问题，但这实际上取决于您计划如何使用该课程。

但是，您应该警惕的是检查您的类的对象（在本例中为存储卡的类型/大小）以找出如何使用该对象的代码。尽可能由对象决定如何处理其状态，而不是外部/客户端代码。

这可能看起来很模糊，但如果没有更多细节，很难给出任何具体的建议。

* * *

但是，您选择使用以兆字节为单位的大小作为枚举值是否有原因？对于使用您的代码的人来说，情况并不明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T12:02:38.887

就个人而言，如果值真的意味着非常重要的东西，我不会使用枚举。您无法真正确保这些值是您所期望的。特别是，如果有其他开发人员在同一个项目上工作。

这是我要做的：

```
abstract class MemoryCardSize
{
    public int MegaBytes { get; protected set; }
}

class TwoGB : MemoryCardSize { public TwoGB() { MegaBytes = 2024; } }
class FourGB : MemoryCardSize { public FourGB() { MegaBytes = 4048; } }
class EightGB : MemoryCardSize { public EightGB() { MegaBytes = 8096; } } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T12:05:14.177

我建议使用工厂设计模式： http: [//www.codeguru.com/csharp/article.php/c19335/Guide-to-Implement-the-Factory-Pattern-in-C.htm](http://www.codeguru.com/csharp/article.php/c19335/Guide-to-Implement-the-Factory-Pattern-in-C.htm)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-24T12:21:15.153

以工厂为例：

```
public static class MemoryCardFactory
    {
        public static MemoryCard Sd2GB { get { return MemoryCard(MemoryCardType.xd, MemoryCardSize.TwoGB); } }
        public static MemoryCard Sd4GB { get { return MemoryCard(MemoryCardType.xd, MemoryCardSize.FourGB); } }
        public static MemoryCard Sd8B { get { return MemoryCard(MemoryCardType.xd, MemoryCardSize.EightGB); } }

        public static MemoryCard Xd2GB { get { return MemoryCard(MemoryCardType.xd, MemoryCardSize.TwoGB); } }
        public static MemoryCard Xd4GB { get { return MemoryCard(MemoryCardType.xd, MemoryCardSize.FourGB); } }
        public static MemoryCard Xd8GB { get { return MemoryCard(MemoryCardType.xd, MemoryCardSize.EightGB); } }

        public static MemoryCard MicroSd2GB { get { return MemoryCard(MemoryCardType.MicroSd, MemoryCardSize.TwoGB); } }
        public static MemoryCard MicroSd4GB { get { return MemoryCard(MemoryCardType.MicroSd, MemoryCardSize.FourGB); } }
        public static MemoryCard MicroSd8GB { get { return MemoryCard(MemoryCardType.MicroSd, MemoryCardSize.EightGB); } }
    } 
```

你可以像这样使用它：

```
MemoryCard mc= MemoryCardFactory.MicroSd2GB; 
```

# c# - 在 XNA 中创建无纹理彩色立方体的正确方法？

> ID：14500570
> 
> 赞同：1
> 
> 时间：2013-01-24T11:43:44.183
> 
> 标签：c#, xna, vertex-buffer, voxel

我目前正在尝试[将此代码](https://sites.google.com/site/letsmakeavoxelengine/home/display-lists-or-vertex-buffers)转换为 C# XNA，但是我在转换 CreateCube 方法时遇到问题 - 在 XNA 中创建顶点列表的资源似乎已过时、已死或根本不起作用。

谁能给我一些帮助？我只想通过手动设置每个面的顶点来创建一个彩色的、无纹理的立方体，然后将（那些）立方体或立方体的一部分添加到 VertexList 进行渲染。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:59:37.843

查看这篇关于如何[构造、绘制和纹理立方体的](http://blogs.msdn.com/b/dawate/archive/2011/01/20/constructing-drawing-and-texturing-a-cube-with-vertices-in-xna-on-windows-phone-7.aspx)文章。您可以省略纹理部分，因为您不需要，但这篇文章是一个好的开始，并且遵循与您的文章类似的方法。

# html - aspx 页面中的 div 问题（html 和 css）

> ID：14500573
> 
> 赞同：1
> 
> 时间：2013-01-24T11:43:51.997
> 
> 标签：html, css

我正在尝试使用 CSS 设置页面样式。我用 div 构建我的页面，并通过外部 css 文档设置它们的样式。这是我到目前为止所拥有的： ![在此处输入图像描述](../Images/7f273ffe2a85c4ae725d0a064c86ba78.png)

显然这不是我想要的！出于某种原因，菜单（通过 ul 构建）不会留在菜单 div 中。另外，我的页脚也遇到了同样的问题。我究竟做错了什么？

这是我的aspx页面+ css文档：ASPX：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="home.aspx.cs" Inherits="AppointmentsDrivingLicense_C_and_D.home" %>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>A.C.T. | Appointments 1.0.0</title>
    <link rel="stylesheet" type="text/css" href="styles/main.css" />
</head>
<body>
<div id="content">
    <!-- BEGIN HEADER -->
    <div>
        <div id="logo">
            <div id="programName">
                <p><b>ACT</b>Appointments 1.0.0</p>
            </div>
            <div id="logged">
                <p>User | <a href="#">Afmelden</a></p>
            </div>
        </div>
        <div id="menu">
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">About</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
        </div>
    </div>
    <!-- END HEADER -->

    <!-- BEGIN BODY -->
    <div id="body">
        <b>Home</b>
        <hr />
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer tincidunt, elit eu sollicitudin consectetur, nulla velit congue massa, 
            sit amet hendrerit elit massa vel nisl. Sed consequat aliquam risus ac imperdiet. Etiam placerat metus vitae augue accumsan a pretium lacus varius. 
            In facilisis risus vitae enim varius at lobortis eros fermentum. Nunc sit amet enim id ligula scelerisque tincidunt vitae sit amet nisl. 
            Fusce tellus augue, interdum non semper vitae, semper sed lectus. Nam ultricies massa non erat suscipit a vulputate est bibendum. 
            Nullam cursus ante et ipsum accumsan lacinia. Mauris eget diam sed enim dapibus rutrum ut vel mauris. In faucibus convallis ultrices. 
            Donec pharetra tellus at sem euismod eget consectetur arcu luctus.
        </p>
        <p>
            Morbi scelerisque cursus mi ac suscipit. Curabitur quis nisi ante. In arcu diam, mattis a tristique sit amet, adipiscing sed nulla. 
            Nunc felis massa, ullamcorper eget tristique quis, vestibulum eu tellus. In hac habitasse platea dictumst. Pellentesque nec lacus nibh, 
            a egestas neque. Sed sed mi viverra orci luctus fringilla. Praesent dictum elementum felis, vitae gravida dolor vehicula at. 
            Vestibulum nec molestie tortor. Quisque vel arcu dolor. Nulla facilisi.
        </p>
    </div>
    <!-- END BODY -->

    <!-- BEGIN FOOTER -->
    <div id="footer">
        <div id="footer-left">
            <p>Welkom user</p>
        </div>
        <div id="footer-right">
            <p>ACT-KM © 2013</p>
        </div>
    </div>
    <!-- END FOOTER -->
</div>
</body>
</html> 
```

CSS 文档：

```
 *{
    margin: 0px;
    padding: 0px;
}
body {
    background-color: lightgray;
}
#content{
    margin-left: 45px;
    margin-right: 45px;
    border-left: solid 1px black;
    border-right: solid 1px black;
}
#footer{
    background-color: #E8E8D9;
    font-size: 12px;
    padding-bottom: 5px;
    padding-top: 5px;
    border: solid 1px black;
    /*border-top: solid 1px black;*/
}
#footer-left{
    float: left;
    padding-left: 10px;
}
#footer-right{
    float: right;
    padding-right: 10px;
}
#body{
    padding-left: 20px;
    padding-right: 20px;
    padding-bottom: 10px;
    padding-top: 10px;
    background-color: white;
}
#logo{
    /*background-color: #E8E8D9;*/
    background-color: red;
}
#programName p{
    float: left;
    padding-left: 20px;
    padding-bottom: 10px;
    padding-top: 10px;
    font-size: 20px;
}
#logged{
    float: right;
    font-size: 12px;
    padding-right: 10px;
    padding-bottom: 10px;
    padding-top: 10px;
}
#menu{
    clear:both;
    border-top: solid 1px black;
    border-bottom: solid 1px black;
    padding-left: 10px;
    padding-top: 3px;
    padding-bottom: 3px;
}
#menu ul{
    list-style-type: none;
}
#menu li{
    float: left;
}
#menu li a{
    display: block;
    padding-left: 15px;
    padding-right: 15px;
    text-decoration: none;
    font-family: Georgia, 'Times New Roman', serif;
    font-size: 16px;
} 
```

提前致谢！凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:46:01.243

由于您浮动所有`li`元素，因此您必须清除浮动以防止父级崩溃。`ul`我相信你会通过清除元素上的浮动来解决问题。

```
#menu ul{
    clear: both;
    list-style-type: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:27:14.380

```
try this
<style>
*{
  margin: 0px;
  padding: 0px;
 }

ul li {list-style-type:none;}

body {
     background-color: lightgray;
     }

#content{
        margin-left: 45px;
        margin-right: 45px;
        border-left: solid 1px black;
        border-right: solid 1px black;
        }

#footer{
       background-color: #E8E8D9;
      font-size: 12px;
      padding-bottom: 5px;
      padding-top: 5px;
     border: solid 1px black;
   /*border-top: solid 1px black;*/
overflow:hidden;
    }

#footer-left{
         float: left;
         padding-left: 10px;
         }

 #footer-right{
         float: right;
        padding-right: 10px;
             }
#body{
     padding-left: 20px;
     padding-right: 20px;
     padding-bottom: 10px;
     padding-top: 10px;
     background-color: white;
     }

#logo{
    /*background-color: #E8E8D9;*/
    background-color: red;
overflow:hidden;
    }

#programName p{
         float: left;
        padding-left: 20px;
       padding-bottom: 10px;
       padding-top: 10px;
      font-size: 20px;
       }

#logged{
     float: right;
    font-size: 12px;
    padding-right: 10px;
    padding-bottom: 10px;
    padding-top: 10px;
    }

#menu{
   clear:both;
   border-top: solid 1px black;
   border-bottom: solid 1px black;
  padding-left: 10px;
  padding-top: 3px;
  padding-bottom: 3px;
overflow:hidden;
   }

#menu ul{
      list-style-type: none;
       }

#menu li{
   float: left;
        }

#menu li a{
      display: block;
     padding-left: 15px;
    padding-right: 15px;
   text-decoration: none;
  font-family: Georgia, 'Times New Roman', serif;
   font-size: 16px;
  }
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T12:06:46.023

`float:left`从`#footer-left`和删除`#menu li`

添加`disply:inline-block`以`#menu li`使其水平对齐。

```
#menu li{
   display:inline-block
} 
```

[**演示**](http://jsfiddle.net/8bj6G/)

# ant - 蚂蚁 if else 条件？

> ID：14500576
> 
> 赞同：46
> 
> 时间：2013-01-24T11:43:58.867
> 
> 标签：ant

是否有可用于 Ant 任务的 if/else 条件？

这是我到目前为止所写的：

```
<target name="prepare-copy" description="copy file based on condition">
        <echo>Get file based on condition</echo>
    <copy file="${some.dir}/true" todir="."  if="true"/>
</target> 
```

如果条件为真，上面的脚本将复制文件。如果条件为假并且我想复制另一个文件怎么办？在蚂蚁中可以吗？

我可以将参数传递给上述任务并确保传递的参数是

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-24T12:18:40.527

的`if`属性不存在`<copy>`。它应该应用于`<target>`.

下面是一个示例，说明如何使用`depends`目标的属性以及[`if`和`unless`属性](https://ant.apache.org/manual/properties.html#if+unless)来控制相关目标的执行。两者中只有一个应该执行。

```
<target name="prepare-copy" description="copy file based on condition"
    depends="prepare-copy-true, prepare-copy-false">
</target>

<target name="prepare-copy-true" description="copy file based on condition"
    if="copy-condition">
    <echo>Get file based on condition being true</echo>
    <copy file="${some.dir}/true" todir="." />
</target>

<target name="prepare-copy-false" description="copy file based on false condition" 
    unless="copy-condition">
    <echo>Get file based on condition being false</echo>
    <copy file="${some.dir}/false" todir="." />
</target> 
```

如果您使用的是 ANT 1.8+，那么您可以使用属性扩展，它将评估属性的值以确定布尔值。因此，您可以使用`if="${copy-condition}"`而不是`if="copy-condition"`.

在 ANT 1.7.1 和更早版本中，您指定属性的名称。如果该属性已定义并且具有任何值（甚至是空字符串），那么它将评估为 true。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-24T19:21:16.333

您也可以使用[ant contrib 的 if task](http://ant-contrib.sourceforge.net/tasks/tasks/index.html)来执行此操作。

```
<if>
    <equals arg1="${condition}" arg2="true"/>
    <then>
        <copy file="${some.dir}/file" todir="${another.dir}"/>
    </then>
    <elseif>
        <equals arg1="${condition}" arg2="false"/>
        <then>
            <copy file="${some.dir}/differentFile" todir="${another.dir}"/>
        </then>
    </elseif>
    <else>
        <echo message="Condition was neither true nor false"/>
    </else>
</if> 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-01-24T20:13:22.387

在目标上使用条件的古怪语法（由 Mads 描述）是在核心 ANT 中执行条件执行的唯一受支持的方式。

ANT 不是一种编程语言，当事情变得复杂时，我选择在我的构建中嵌入一个脚本，如下所示：

```
<target name="prepare-copy" description="copy file based on condition">
    <groovy>
        if (properties["some.condition"] == "true") {
            ant.copy(file:"${properties["some.dir"]}/true", todir:".")
        }
    </groovy>
</target> 
```

ANT 支持多种语言（参见[脚本](http://ant.apache.org/manual/Tasks/script.html)任务），我更喜欢[Groovy](http://groovy.codehaus.org/The+groovy+Ant+Task)，因为它的语法简洁，而且它在构建中表现得非常好。

抱歉，大卫我不是[ant-contrib](http://ant-contrib.sourceforge.net/)的粉丝。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-01-13T10:42:00.683

从 ant 1.9.1 开始，您可以使用 if:set 条件：[https ://ant.apache.org/manual/ifunless.html](https://ant.apache.org/manual/ifunless.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-13T06:47:33.370

```
<project name="Build" basedir="." default="clean">
    <property name="default.build.type" value ="Release"/>

    <target name="clean">
    <echo>Value Buld is now  ${PARAM_BUILD_TYPE} is set</echo>
        <condition property="build.type" value="${PARAM_BUILD_TYPE}" else="${default.build.type}">
            <isset property="PARAM_BUILD_TYPE"/>
        </condition>

       <echo>Value Buld is now  ${PARAM_BUILD_TYPE} is set</echo>
       <echo>Value Buld is now  ${build.type} is set</echo>
    </target>
</project> 
```

在我的情况`DPARAM_BUILD_TYPE=Debug`下，如果提供了它，我需要为 Debug 构建，否则我需要构建 Release 构建。我像上面写的那样工作，我已经测试过它对我来说工作正常。

并且属性`${build.type}`我们可以将它传递给其他目标或宏定义以进行我在我的其他蚂蚁宏定义中所做的处理。

```
D:\>ant -DPARAM_BUILD_TYPE=Debug
Buildfile: D:\build.xml
clean:
     [echo] Value Buld is now  Debug is set
     [echo] Value Buld is now  Debug is set
     [echo] Value Buld is now  Debug is set
main:
BUILD SUCCESSFUL
Total time: 0 seconds
D:\>ant
Buildfile: D:\build.xml
clean:
     [echo] Value Buld is now  ${PARAM_BUILD_TYPE} is set
     [echo] Value Buld is now  ${PARAM_BUILD_TYPE} is set
     [echo] Value Buld is now  Release is set
main:
BUILD SUCCESSFUL
Total time: 0 seconds 
```

它对我来说可以实现条件，所以发布希望它会有所帮助。

# vb.net - 类型“_Control”未定义

> ID：14500577
> 
> 赞同：0
> 
> 时间：2013-01-24T11:43:58.910
> 
> 标签：vb.net

我创建了一个函数来检查我的表单中是否有控件类型，但是它没有用，我不知道问题出在哪里。

这是我写的代码：

```
Private Function testIfControlExists(ByVal _Control As Control)
    For Each c As Control In Me.Controls
        If TypeOf c Is _Control Then
            Return True
        End If
    Next
    Return False
End Function 
```

这是我收到的错误消息：

> 错误 1 ​​类型“_Control”未定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:51:57.923

如果要检查表单是否具有控件类型，则可以执行以下操作：

```
Public Function testIfControlExists(ByVal _Control As Control) As Boolean
    For Each c As Control In Me.Controls
        If c.GetType Is _Control.GetType Then
            Return True
        End If
    Next
    Return False
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:46:35.913

改变

```
If TypeOf c Is _Control Then 
```

至

```
If TypeOf c Is Control Then 
```

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:49:07.493

[请参阅此处](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28VB.TYPEOF%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-VB%29&rd=true)的文档

您不能以您尝试的方式使用它。您可以将它用于数据类型名称，例如`Integer`等`String`。

# iphone - 在 iPhone 中推送 UIViewController 时如何更改标签栏项目的选定索引

> ID：14500578
> 
> 赞同：1
> 
> 时间：2013-01-24T11:44:10.390
> 
> 标签：iphone, objective-c, uitabbarcontroller, uitabbaritem

我正在将一个视图控制器推送到另一个视图控制器，但是当我推送标签栏项目索引时没有改变。如何在将视图从一个视图推送到另一个视图时更改选定的索引。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T04:39:28.383

这条线可能会帮助某人

**`[self.parentViewController.tabBarController setSelectedIndex:0];`**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-24T12:03:50.903

尝试 ，

```
[tabBar setSelectedItem:[[tabBar items] objectAtIndex:index]]; 
```

或者

```
[tabBarController setSelectedIndex:index]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T11:48:32.050

```
 [self.tabBarController setSelectedIndex:0]; 
```

这里的索引 0 是指你的 tabbarcontroller 的第一个选项卡。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T12:01:57.410

为您提供的简单示例`UITabBarController`..仅创建三个.此`UIViewController`代码可以正常工作:)

**appDelegate.h**

```
#import <UIKit/UIKit.h>
#import "FirstViewController.h"
#import "ViewController.h"
#import "SecoundViewController.h"

@interface AppDelegate : UIResponder <UIApplicationDelegate,UITabBarControllerDelegate,UINavigationControllerDelegate>
{
    FirstViewController *fView;
    SecoundViewController *sView;
    ViewController *viewCon;

    UITabBarItem *tbItem1;
    UITabBarItem *tbItem2;
    UITabBarItem *tbItem3;

     UINavigationController *FnavCon;
     UINavigationController *SnavCon;
     UINavigationController *navCon;

     UITabBarController *tbCon;
}

@property (strong, nonatomic) UIWindow *window;
@property(nonatomic,retain)FirstViewController *fView;
@property(nonatomic,retain)SecoundViewController *sView;
@property(nonatomic,retain)UINavigationController *navCon;
@property(nonatomic,retain)UITabBarController *tbCon;
@property(nonatomic,retain)ViewController *viewCon;
@property(nonatomic,retain)UINavigationController *FnavCon;
@property(nonatomic,retain)UINavigationController *SnavCon;
@property(nonatomic,retain)UITabBarItem *tbItem1;
@property(nonatomic,retain)UITabBarItem *tbItem2;
@property(nonatomic,retain)UITabBarItem *tbItem3;

@end 
```

**appDelegate.m**

```
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize fView,sView,navCon,tbCon,viewCon,FnavCon,SnavCon,tbItem1,tbItem2,tbItem3;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window=[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds ]];

    self.viewCon=[[ViewController alloc] init];
    self.navCon=[[UINavigationController alloc] initWithRootViewController:self.viewCon];
    self.navCon.navigationBar.tintColor=[UIColor blackColor];
    self.viewCon.title=@"First View";

    self.fView=[[FirstViewController alloc] init];
    self.FnavCon=[[UINavigationController alloc] initWithRootViewController:self.fView];
    self.FnavCon.navigationBar.tintColor=[UIColor blackColor];

    self.fView.title=@"Secound View";

    self.sView=[[SecoundViewController alloc] init];
    self.SnavCon=[[UINavigationController alloc] initWithRootViewController:self.sView];
    self.SnavCon.navigationBar.tintColor=[UIColor blackColor];
    self.sView.title=@"Third View";

    UIImage *img1=[UIImage imageNamed:@"Australia.gif"];
    self.tbItem1=[[UITabBarItem alloc] initWithTitle:@"First Page" image:img1 tag:1];
    self.viewCon.tabBarItem=self.tbItem1;

    UIImage *img2=[UIImage imageNamed:@"Cameroon.gif"];
    self.tbItem2=[[UITabBarItem alloc] initWithTitle:@"Secound Page" image:img2 tag:2];
    self.fView.tabBarItem=self.tbItem2;

    UIImage *img3=[UIImage imageNamed:@"Canada.png"];
    self.tbItem3=[[UITabBarItem alloc] initWithTitle:@"Third Page" image:img3 tag:3];
    self.sView.tabBarItem=self.tbItem3;

    NSMutableArray *viewArr=[[NSMutableArray alloc] init];
    [viewArr addObject:self.navCon];
    [viewArr addObject:self.FnavCon];
    [viewArr addObject:self.SnavCon];

    self.tbCon=[[UITabBarController alloc] init];
    self.tbCon.viewControllers=viewArr;

    [self.window addSubview:tbCon.view];

    [self.window makeKeyAndVisible];

    return YES;
} 
```

# c - 基于复杂的 Haskell 类型生成 C 结构体

> ID：14500582
> 
> 赞同：11
> 
> 时间：2013-01-24T11:44:22.777
> 
> 标签：c, haskell, ffi

我正在尝试在我的 C 代码中使用 Haskell 库。我尝试使用的 Haskell 函数的类型`String -> IO [Reference]`是`Reference`一个相当复杂的结构（[有关详细信息，请参见此处](http://hackage.haskell.org/packages/archive/citeproc-hs/0.3.6/doc/html/Text-CSL-Reference.html#t:Reference)）。

根据阅读各种文档，我似乎必须将这种类型作为一个实例，`Storable`并且在我的 c 代码中定义一个类似的结构才能访问它。对于如此复杂的类型，这似乎是很多非常重复的工作。有没有办法自动化这个？怎么会去做这样的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T16:30:22.133

It depends on you actual use case, but... It could be easier to export `Reference` as opaque type (via [Foreign.StablePtr](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/Foreign-StablePtr.html)), and export getter functions to access individual fields.

Please let me know if you need more details, and I'll expand the answer.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T08:27:12.080

我写了一个小工具（使用 Template Haskell），它自动将任何由原始类型（Int、Float、Double、Char、Bool）、可编组类型的列表和由可编组类型组成的结构组成的数据类型编组为相应的C型。

*   原始类型成为它们的 C 对应物：Int -> int，Float -> float。布尔变成整数。
*   “结构”（数据 S = S ...）成为指向具有 Haskell“结构”的编组成员的结构的指针。
*   数组 ([S]) 成为指向结构的指针，该结构由指向该类型的指针数组的指针和一个 int 组成，告诉其中有多少元素。

所以这：

```
data Test = Test [MyStruct] Int
data MyStruct = MyStruct Int 
```

在 C 中看起来像这样：

```
struct MyStruct {
  int x;
}

struct ArrayStruct {
  MyStruct** array;
  int count;
}

struct Test {
  ArrayStruct* arr_str;
  int y;
} 
```

这是工具： [https ://github.com/food2games/fieldmarshal](https://github.com/food2games/fieldmarshal)

（它也有一个 C# 部分，但您将需要 HsFieldMarshal。）它由两个文件组成，您只需将它们复制到您的代码中。用法：

```
$(makeStorable ''YourType) 
```

请注意，它不会自动为子类型执行可存储代码，所以如果你有这个：

```
data Type1 = Type1 Int Float
data Type2 = Type2 Int Type1 
```

比您必须为每种数据类型生成可存储实例：

```
$(makeStorable ''Type1)
$(makeStorable ''Type2) 
```

另请注意，您必须在 Storable 实例生成之前声明数据类型（这是因为 TH）。所以这行不通：

```
$(makeStorable ''Wrong)
data Wrong = Wrong Int 
```

这绝对不是万无一失的，对于简单的应用程序来说已经足够了，但是如果您正在使用更复杂的代码，事情很容易变得一团糟。

# c# - 检查的 C# 的 C++ 等价物是什么

> ID：14500593
> 
> 赞同：4
> 
> 时间：2013-01-24T11:44:44.297
> 
> 标签：c#, c++-cli, overflow

我希望避免托管 C++ (CLI) 中的溢出。在 C# 中有一个未经检查的关键字，在 C++ 中溢出不会以异常结束。

[作为参考，此处](http://msdn.microsoft.com/en-us/library/a569z7k8%28v=vs.110%29.aspx)记录了 unchecked 。基本上，如果你这样做：

```
unchecked
{
      int1 = 2147483647 + 10; //this overflows in CLI but is ok in C# and C++
} 
```

在 C# 中，它不会溢出，而是通过获取最低有效位转换为 int。例如，当您计算哈希码时，这是合适的。

注意：我意识到没有等效的 C++ 关键字，但是一些位移应该可以解决问题；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T12:14:52.120

您可以只使用`#pragma unmanaged`一种方法来获得本机 C++ 中正常的未经检查的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T05:02:42.417

使用无符号数据类型进行位运算和校验和。无符号行为的环绕行为在 C++ 中定义良好。

# osb - 定期调用 OSB 代理

> ID：14500594
> 
> 赞同：0
> 
> 时间：2013-01-24T11:44:46.070
> 
> 标签：osb

我是 OSB 的新手。我创建了一个代理服务，它调用单独的业务服务。我想将其配置为每 5 分钟自动调用一次代理服务。这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-05T16:25:21.553

（代理调用的结果是否被驳回？）

除了正确的方法（实现进程内或进程外调度程序）之外，还有一个 hack（嗯，不是完全 hack；只是“非预期用途”）：

您可能有一个 JMS 队列，其中包含一条消息。队列应配置为具有给定间隔（300 秒）的非常大的重试次数。另一个代理，JMS 代理，事务=ON 应该读取队列并调用您的原始代理，然后引发故障以回滚事务。

请注意，回滚消息会在 OSB 日志中产生较长的堆栈跟踪，因此您可以考虑在 Weblogic 中过滤一些日志 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:24:30.330

据我所知，为此您需要从 BPEL 调用 OSB。OSB 不提供开箱即用的此功能。或者您可能想要创建一个调度程序，如下所述：[https ://blogs.oracle.com/jamesbayer/entry/weblogic_scheduling_a_polling](https://blogs.oracle.com/jamesbayer/entry/weblogic_scheduling_a_polling)

# c# - 找到两个数字列表的良好匹配

> ID：14500595
> 
> 赞同：5
> 
> 时间：2013-01-24T11:44:51.620
> 
> 标签：c#, algorithm

我有两组数字，其中**SET2**通常包含更多项目。保证**SET2**的计数 等于或大于**SET1**的计数。实际上，由于顺序很重要，因此输入是列表而不是集合。

我的目标是组合（总结）/重新排序**SET2**中的数字，使其尽可能与**SET1**相似。我将相似度定义为每个位置的偏差之和。请参阅[这篇文章](https://stackoverflow.com/questions/14480336/more-efficient-way-to-build-sum-than-for-loop/14480404#14480404)了解我计算相似度的方式。总和越小越好。

我的第一种方法是尝试所有组合并选择最好的组合。这仅适用于相当小的集合（尤其是第二个）。请参阅[这篇文章](https://stackoverflow.com/questions/14438404/pool-numbers-in-a-set-of-numbers-to-match-the-size-of-another-set/14440778#14440778)和 Rawling 的答案。有没有更聪明的方法来获得良好的组合？我绝对不需要最好的。一个好的结果会很好。显然，具有空子集的集合是无稽之谈。极端不平衡的集合对我来说似乎不是很有希望。SET1 往往有大约 8 个，但最多可以有 18 个条目。SET2 的计数通常超过 10（最多 35）。两组数字之和相等（舍入误差除外）。

这是一个有好有坏结果的示例（并非所有可能的结果）：

```
SET1 = { 272370, 194560, 233430 }; SET2 = { 53407.13, 100000, 365634.03, 181319.07 }

      272370            |      194560          |        233430 
---------------------------------------------------------------------
     365634.03         |  100000 + 53407.13   |      181319.07       (best match)
     365634.03         |     181319.07        |  100000 + 53407.13   (good)
     365634.03         |      100000          |181319.07 + 53407.13  (ok)
      53407.13          |365634.03 + 100000    |      181319.07       (bad)
      53407.13          |365634.03 + 181319.07 |        100000        (bad)
.                 |365634.03 + 181319.07 | 53407.13 + 100000    (invalid)
53407.13 + 100000 |365634.03 + 181319.07 |                      (invalid) 
```

如果我忘记描述前提或者我的描述不清楚甚至是错误的，请告诉我。我也很乐意提供另一个例子。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:04:40.433

启发式，应该很好用：

```
1\. list<int> set1, set2;
2\. sort(set2) // decreasing, set2[0] would be the greatest value in set2
3\. struct set1item = {set1index, value, list<int> chosen}
4\. prepare list<set1item> set1items from set1 //(index = index in set1 list, value = set1[index] and chosen = null)
5\. put set1items to some priorityqueue pq // ordered by value
6\. for each set2item in set2{
7\.     item = pq.first()
8\.     item.chosen.add(set2item);
9\.     item.value -= set2item;
10\.    pq.updateFirst(item)
11.} 
```

它的工作原理如下：从最高到最低迭代 set2，从 set1 获取实际最高元素，通过从 set2 获得的元素减少它，并将 set2 中的这个元素添加到 set1 结果中的元素。

您必须记住检查 set1 中的所有元素是否没有空结果。

`Set1 = {20, 9, 7, 3}, Set2 = {7, 6, 6, 4, 2, 2, 2, 2, 2, 2, 2, 2}`例1：.

迭代器 1: `fromSet2 = 7`, `Set1 = {20:{}, 9:{}, 7:{}, 3:{}}`, `fromSet1=20`. 将 20 减 7 并将结果加 7。更新：`Set1 = {13:{7}, 9:{}, 7:{}, 3:{}}`。

迭代器2：`fromSet2 = 6`，，，`Set1 = {13:{7}, 9:{}, 7:{}, 3:{}}`。`fromSet1=13`将 13 减 6 并将结果加 6。更新：`Set1 = {7:{7, 6}, 9:{}, 7:{}, 3:{}}`。

迭代 3: `fromSet2 = 6`, `Set1 = {7:{7, 6}, 9:{}, 7:{}, 3:{}}`, `fromSet1=9`. 将 9 减 6 并将结果加 6。更新：`Set1 = {7:{7, 6}, 3:{6}, 7:{}, 3:{}}`。

迭代器 4: `fromSet2 = 4`, `Set1 = {7:{7, 6}, 3:{6}, 7:{}, 3:{}}`, `fromSet1=7`. 将 7 减 4 并将结果加 4。更新：`Set1 = {3:{7, 6, 4}, 3:{6}, 7:{}, 3:{}}`。

迭代 5: `fromSet2 = 2`, `Set1 = {3:{7, 6, 4}, 3:{6}, 7:{}, 3:{}}`, `fromSet1=7`. 将 7 减 2 并将结果加 2。更新：`Set1 = {3:{7, 6, 4}, 3:{6}, 5:{2}, 3:{}}`。

...

# java - Java 代码的 SPARQL 解析器

> ID：14500599
> 
> 赞同：11
> 
> 时间：2013-01-24T11:44:57.827
> 
> 标签：java, sparql

有什么简单的方法可以解析java变量中的sparql查询，比如python中的Fyzz？如何使用 Jena 或 sesame API？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T12:01:33.633

[您可以使用 Apache Jena 的ARQ](http://jena.apache.org/documentation/query/index.html)在语法或代数级别非常简单地在 java 中解析和操作 SPARQL 。`QueryFactory.create(queryString)`将提供查询的 java 表示。然后翻来覆去：

```
Query query = QueryFactory.create(queryString);
query.isSelectType() && query.isQueryResultStar(); // of the form SELECT *?
query.getDatasetDescription(); // FROM / FROM NAMED bits
query.getQueryPattern(); // The meat of the query, the WHERE bit
...etc etc..
Op op = Algebra.compile(query); // Get the algebra for the query 
```

（请参阅[查询 java 文档](http://jena.apache.org/documentation/javadoc/arq/com/hp/hpl/jena/query/Query.html)）

尝试从教程[“使用 ARQ 操作 SPARQL”](http://jena.apache.org/documentation/query/manipulating_sparql_using_arq.html)开始。这将使您了解查询是如何表示的，以及如何从中提取内容（`visitors`特别有用）。尽管最初语法级别是最熟悉的，但对于许多任务，[代数](http://jena.apache.org/documentation/query/algebra.html)工作得更好，因为它对应于查询实际执行的操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T22:33:42.663

以下是使用 Sesame 解析和操作 SPARQL 查询的方法：

解析：

```
ParsedQuery pq = QueryParserUtil.parseQuery(QueryLanguage.SPARQL, queryString); 
```

它的输出是 a `ParsedQuery`，它是查询的代数对象表示。如果您希望专门获取解析树本身，这也是可能的：

```
ASTQueryContainer parseTree = SyntaxTreeBuilder.parseQuery(queryString); 
```

然后，您可以通过实现自定义[SyntaxTreeBuilderVisitor](http://rdf4j.org/sesame/2.8/apidocs/index.html?org/openrdf/query/parser/sparql/ast/SyntaxTreeBuilderVisitor.html)直接操作此抽象语法树（提示：扩展`ASTVisitorBase`，因此您只需覆盖您实际想要做某事的方法）。

如果我们回到代数模型，您可以`ParsedQuery`在 Sesame Sail Repository 上执行：

```
if (pq instanceof ParsedTupleQuery) {
        SailTupleQuery query = new SailTupleQuery(pq, repositoryConnection);
        TupleQueryResult result = query.evaluate();
} else if (pq instanceof ParsedGraphQuery) {
        // etc for other query types
} 
```

要`ParsedQuery`在执行之前操纵它，请使用[QueryModelVisitor](http://rdf4j.org/sesame/2.8/apidocs/index.html?org/openrdf/query/algebra/QueryModelVisitor.html)实现，例如您自己的自定义查询操纵器：

```
QueryModelVisitor myVisitor = new MyCustomQueryModelVisitor();
pq.getTupleExpr().visit(myVisitor); 
```

使用这样的自定义查询模型访问者，您可以完全控制查询、优化查询或重写为不同的语法。

是在抽象语法树 (AST) 级别还是在查询模型级别执行此操作取决于个人喜好：查询模型在查询计划/优化和部分重写方面为您提供了更大的灵活性（供以后使用在 Sesame 存储上执行），而如果您的目标是完全重写查询以用于其他目的（例如在非 Sesame 存储上执行），则直接操作语法树可能更容易。

顺便说一句，上述解析和执行查询的方式是一种迂回的做事方式。如果您不需要在执行解析后的查询之前对其进行操作，您可以简单地准备并在存储库上执行查询，如下所示：

```
String queryString = "SELECT ...";
RepositoryConnection conn = repo.getConnection();
try {
   TupleQuery tq = conn.prepareTupleQuery(QueryLanguage.SPARQL, queryString);
   TupleQueryResult result = tq.evaluate();
}
finally {
   conn.close();
} 
```

# joomla2.5 - 以编程方式设置模板 joomla 视图

> ID：14500601
> 
> 赞同：3
> 
> 时间：2013-01-24T11:45:03.190
> 
> 标签：joomla2.5

有没有办法在 joomla 视图中以编程方式设置模板？

我正在使用 MVC 架构来开发我的组件。我有两个前端模板。1 用于登录用户（模板 B） 其他用于普通访问者（模板 A）。

我遇到的问题是，我有一个供登录用户使用的书店。模板是模板B。书店里面有搜索书的功能。搜索和书店都从我的组件加载。分配给菜单项的书店并使用模板 B 加载。但是当我单击搜索按钮时，它会使用模板 A 显示结果。这意味着模板从模板 B 更改为模板 A。

我网站的默认模板是模板 B。我通过菜单项分配了模板 A。

我正在使用 Joomla 2.5

发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-10T11:06:53.437

我遇到了类似的问题，我分别为*注册*用户和*来宾*使用了两个模板。我希望仅在特定模板内加载视图，因此我必须以编程方式设置/更改视图内的模板，我尝试使用`Itemid`但它不可靠，最后经过一番研究，我得到了如下工作......

```
 $app = JFactory::getApplication();
  $app->setTemplate('Protostar'); //or whatever your template is named. 
```

有了这个，我可以确定这个视图/布局只加载在一个特定的模板中。我已经在[joomla3.4](/questions/tagged/joomla3.4 "显示标记为“joomla3.4”的问题")上成功使用了它，尽管它可能适用于您的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T08:38:16.450

我认为，这可以通过使用**JSite::setTemplate($template,$templateParams)** 方法来完成，但我不确定这是否适用于缓存，需要测试。

# javascript - 角JS。html中的自动刷新$范围变量

> ID：14500602
> 
> 赞同：6
> 
> 时间：2013-01-24T11:45:03.537
> 
> 标签：javascript, html, templates, angularjs

如何在 $scope 对象处自动触发我的变量？

```
//controller
setInterval(function(){$scope.rand=Math.random(10)},1000);

//template
{{rand}} 
```

兰德没有在我的页面上更新。如何更新我的变量？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T12:03:45.083

```
function MyCtrl($scope, $timeout) {
  $scope.rand = 0;

  (function update() {
    $timeout(update, 1000);
    $scope.rand = Math.random() * 10;
  }());
} 
```

演示：http: [//jsbin.com/udagop/1/](http://jsbin.com/udagop/1/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-03T23:00:04.337

实际上，最Angularish的方法是：

```
function MyCtrl($scope, $interval) {
  $scope.rand = 0;

  function update() {
    $scope.rand = Math.random() * 10;
  }

  $interval(update, 1000);
} 
```

这就是 setInterval() 的 Angular 等价物

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T11:58:29.527

你可以这样做：

```
//controller    
function UpdateCtrl($scope) {
    $scope.rand = 0;
    setInterval(function() {
       $scope.$apply(function() {
          $scope.rand = Math.random(10);
       });
    }, 1000);            
} 
```

和

```
//template
<div ng-controller="UpdateCtrl">
{{rand}}    
</div> 
```

# c# - 创建表达式树以访问泛型类型的属性

> ID：14500604
> 
> 赞同：12
> 
> 时间：2013-01-24T11:45:06.160
> 
> 标签：c#, linq, generics, expression-trees

我需要编写一个泛型方法，它采用泛型类型的实例和字符串格式的属性名称并返回一个表达式树

我需要转换一个简单的 lambda 表达式

```
a => a.SomePropertyName 
```

`a`泛型类型在哪里，**它将具有**名称的属性`SomePropertyName`

我知道我们可以使用下面的反射代码来获取属性信息

```
System.Reflection.PropertyInfo propInfo = a.GetType().GetProperty("SomePropertyName"); 
```

这可能很简单，但我不太熟悉表达式树，如果有类似的问题，请链接并关闭它

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T11:51:31.043

假设事先不知道参数类型和返回类型，您可能必须使用 some `object`，但基本上这只是：

```
var p = Expression.Parameter(typeof(object));
var expr = Expression.Lambda<Func<object, object>>(
    Expression.Convert(
        Expression.PropertyOrField(
             Expression.Convert(p, a.GetType()), propName), typeof(object)), p); 
```

如果输入和输出类型已知，您可以调整`Func<,>`参数，并可能删除`Expression.Convert`. 在极端情况下，您可以通过以下方式在*不知道lambda**签名**的*情况下获得 lambda ：

```
var p = Expression.Parameter(a.GetType());
var expr = Expression.Lambda(Expression.PropertyOrField(p, propName), p); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T11:51:39.097

你可以使用这个：

```
var p = Expression.Parameter(a.GetType(), "x");
var body = Expression.Property(p, "SomePropertyName");

Expression.Lambda(body, p); 
```

# android - 使用 java 反射时出现 java.lang.securityexception

> ID：14500606
> 
> 赞同：0
> 
> 时间：2013-01-24T11:45:17.790
> 
> 标签：android, reflection

我正在开发一个企业应用程序，我需要从代码中自动启用设备管理。

使用java反射，我尝试调用“setActiveAdmin”，这是“android.app.admin.DevicePolicyManager”中的一个隐藏函数。我有一个 java.lang.securityexception。

日志猫：

```
01-24 17:07:58.390: W/System.err(1004): java.lang.SecurityException: Neither user 10080 nor current process has android.permission.BIND_DEVICE_ADMIN.
01-24 17:07:58.390: W/System.err(1004):     at android.os.Parcel.readException(Parcel.java:1321)
01-24 17:07:58.390: W/System.err(1004):     at android.os.Parcel.readException(Parcel.java:1275)
01-24 17:07:58.390: W/System.err(1004):     at android.app.admin.IDevicePolicyManager$Stub$Proxy.setActiveAdmin(IDevicePolicyManager.java:1507)
01-24 17:07:58.390: W/System.err(1004):     at com.marakana.android.devicepolicydemo.DemoDeviceAdminReceiver.onDisabled(DemoDeviceAdminReceiver.java:55)
01-24 17:07:58.390: W/System.err(1004):     at android.app.admin.DeviceAdminReceiver.onReceive(DeviceAdminReceiver.java:311)
01-24 17:07:58.390: W/System.err(1004):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:1901)
01-24 17:07:58.390: W/System.err(1004):     at android.app.ActivityThread.access$2400(ActivityThread.java:122)
01-24 17:07:58.390: W/System.err(1004):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1052)
01-24 17:07:58.390: W/System.err(1004):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-24 17:07:58.390: W/System.err(1004):     at android.os.Looper.loop(Looper.java:132)
01-24 17:07:58.390: W/System.err(1004):     at android.app.ActivityThread.main(ActivityThread.java:4025)
01-24 17:07:58.390: W/System.err(1004):     at java.lang.reflect.Method.invokeNative(Native Method)
01-24 17:07:58.390: W/System.err(1004):     at java.lang.reflect.Method.invoke(Method.java:491)
01-24 17:07:58.390: W/System.err(1004):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
01-24 17:07:58.390: W/System.err(1004):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
01-24 17:07:58.390: W/System.err(1004):     at dalvik.system.NativeStart.main(Native Method) 
```

在我的清单文件中，我已授予“android.permission.BIND_DEVICE_ADMIN”权限。我仍然收到此错误。如何解决这个问题？

编辑：清单文件

```
<uses-permission android:name="android.permission.BIND_DEVICE_ADMIN" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".DevicePolicyDemoActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Sample"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <receiver
        android:name=".DemoDeviceAdminReceiver"
        android:permission="android.permission.BIND_DEVICE_ADMIN" >
        <intent-filter>

            <!-- This action is required -->
            <action android:name="android.app.action.DEVICE_ADMIN_ENABLED" />
        </intent-filter>

        <meta-data
            android:name="android.app.device_admin"
            android:resource="@xml/device_admin_sample" />
    </receiver>
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T07:11:52.393

android.permission.BIND_DEVICE_ADMIN android:protectionLevel="signature" ，所以你的应用应该用系统签名进行签名，否则你的应用无法获取android.permission.BIND_DEVICE_ADMIN

# c++ - 使用 DefWindowProc 或不使用 DefWindowProc

> ID：14500614
> 
> 赞同：11
> 
> 时间：2013-01-24T11:45:44.263
> 
> 标签：c++, winapi

我目前正在编写自己的迷你可视化框架来将纯 WinAPI 包装在类中。

目前分析消息的过程如下：

*   static`Application::Run`有一个消息循环；它获取新消息并将其分派给适当的 WndProc。

*   我创建的所有窗口都是从同一个类创建的（就 WinAPI 而言），所以同样`WndProc`被调用。实际上，它是一种静态`FormAPI::WndProc`方法。这一项检查消息所指的窗口并调用它的`WndProc`.

*   `Form::WndProc`方法被调用，它分析消息。假设它是一个`WM_MOUSEMOVE`. 它调用`ProcessMouseMove`然后`DefWindowProc`。将此点记为 [1]。

*   private`Form::ProcessMouseMove`从消息中获取实际数据（例如 x, y, shift state），将其转换为可用数据并调用 protected `Form::OnMouseMove`。

*   最后，protected`OnMouseMove`检查是否设置了事件处理程序（即`std::function<void(Form *, int, int, ShiftState)>`），如果是，它调用处理程序。否则它什么也不做。

我关心的是打电话`DefWindowProc`。看起来，它只是“为我做默认行为”，但有时它实际上做了一些关键的事情。例如，`WM_LBTNDOWN`通过不调用禁用`DefWindowProc`将导致无法通过单击 [X] 按钮关闭窗口。

另一方面，有时我不想打电话`DefWindowProc`。例如，如果`WM_CLOSE`来了，我可能决定不关闭应用程序。`DefWindowProc`在这种情况下调用`DestroyWindow`.

我的问题是：我应该打电话`DefWindowProc`还是不打电话？如果是这样，总是还是有时？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-24T14:25:11.617

在决定如何处理消息时，您有*三个选择：*

*   不调用 DefWindowProc()。当您想要完全自定义处理消息的方式并且不想要默认实现时适用。WM_COMMAND 和 WM_PAINT 是典型的例子。

*   做一些自定义的事情，然后调用 DefWindowProc()。当您喜欢或需要默认实现时适用。WM_CLOSE 就是一个典型的例子。

*   首先调用 DefWindowProc()，然后根据需要更改结果。一个典型的例子是 WM_NCHITTEST

选择合适的选项没有黄金法则，它在很大程度上取决于特定的消息和窗口的特定默认处理。请注意，如果您对窗口进行子类化，这可能不是记录在案的默认处理。然而，弄错它通常很容易诊断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T11:45:44.263

看来，我只是通过提问来回答我的问题。我介绍了两个案例：

*   `WM_LBTNDOWN`何时`DefWindowProc` *必须*调用 - 否则窗口将无法正常工作；
*   `WM_CLOSE`, when - 取决于事件处理程序 -`DefWindowProc` *不能*被调用 - 否则它将破坏框架的逻辑。

答案是：这取决于消息的种类。我必须仔细阅读 DefWindowProc 在每种情况下如何工作并采取适当的行动。

# windows - Windows 命令提示符记录到文件

> ID：14500616
> 
> 赞同：26
> 
> 时间：2013-01-24T11:45:48.103
> 
> 标签：windows, cmd

我想轻松地将 Windows 命令提示符的日志保存到文件中。是否有任何替代方法可以选择所有内容并右键单击副本？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-24T11:49:09.490

`>`您可以使用或`>>`附加到文件将cmd 提示符的输出重定向到文件。

IE

```
echo Hello World >C:\output.txt
echo Hello again! >>C:\output.txt 
```

或者

```
mybatchfile.bat >C:\output.txt 
```

请注意，`>`如果文件已存在， using 将自动覆盖该文件。

您还可以选择重定向标准输入、标准输出和标准错误。

有关选项的完整列表，请参见[此处](http://www.robvanderwoude.com/redirection.php)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-25T08:22:48.707

**第一种方法**

对于 Windows 7 及更高版本的用户，Windows PowerShell 为您提供此选项。windows版本低于7的用户可以在线下载PowerShell并安装。

脚步：

1.  在搜索区域中键入 PowerShell 并单击“Windows PowerShell”

2.  如果您有一个 .bat（批处理）文件，请转到第 3 步或将您的命令复制到一个文件并使用 .bat 扩展名（例如 file.bat）保存

3.  使用以下命令运行 .bat 文件

    `PS (location)> <path to bat file>/file.bat | Tee-Object -file log.txt`

这将生成一个 log.txt 文件，其中包含所有命令提示符输出。优点是您还可以在命令提示符下输出。

**第二种方法**

[您可以按照上面Bali C](https://stackoverflow.com/users/799586/bali-c)的建议使用文件重定向（>，>>）。

如果您要运行大量命令或要运行脚本，我将推荐第一种方法。如果要运行的命令很少，我会推荐最后一种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-29T20:35:02.263

在 cmd 中，当您使用 > 或 >> 时，输出将仅写入文件。是否可以在 cmd 窗口中查看输出并将其保存在文件中。如果您使用 teraterm，则类似的东西，当您可以开始将所有日志保存在一个文件中时，您可以使用控制台并查看它（仅适用于 ssh、telnet 和串行）。

# jquery - HTML5/JQueryMobile：如果我点击后退按钮，音频仍在播放

> ID：14500617
> 
> 赞同：0
> 
> 时间：2013-01-24T11:45:48.563
> 
> 标签：jquery, html, mobile, html5-audio

我写了一个简单的画廊，可以播放音频文件（如果有的话）。通过单击当前图片，它将简单地跳回索引并停止播放音频。但是，如果我单击浏览器上的后退按钮，音频仍在播放，即使我跳转到带有指向另一个页面的简单标记的另一个页面。

我认为问题在于 jquery mobile 正在预加载页面，然后在加载后立即显示它。我喜欢 jquery mobuile 预加载页面的方式，但是如果我单击浏览器的后退按钮，我想停止音频。

我尝试使用 $(window).unload() 事件来捕捉后退按钮，但它不起作用。我怎样才能完全卸载我想离开的页面（包括音频）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:52:00.010

unload 事件在各种浏览器中的处理方式不同，即使在版本之间也是如此。您可能还想按照 jquery 站点上的[建议尝试 onbeforeunload 事件：](http://api.jquery.com/unload/)

> 卸载事件的确切处理因浏览器版本而异。例如，某些版本的 Firefox 会在点击链接时触发该事件，但不会在窗口关闭时触发。在实际使用中，应该在所有支持的浏览器上测试行为，并与专有的 beforeunload 事件进行对比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:30:07.267

听`window`'`hashchange`事件。（请参阅[规范](http://www.whatwg.org/specs/web-apps/current-work/#event-hashchange)和[浏览器支持](http://www.yearofmoo.com/2011/10/current-state-of-onhashchange-and-html5-history.html)。）

# cocoa - 有序 NSDictionary

> ID：14500628
> 
> 赞同：5
> 
> 时间：2013-01-24T11:46:19.180
> 
> 标签：cocoa, nsdictionary, hashtable

如何保留添加对象的方式`NSDictionary`？

我意识到 中的值没有特定的顺序`NSDictionary`，但在我的情况下，我需要保留使用添加的顺序`setValue:forKey:`，例如数组。

我怎么能这样做？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:48:28.110

字典是哈希映射的，以便更快地检索。你不能修改它的顺序。

如果要按顺序存储，则应使用数组。

或者您必须使用一些复杂的方法，继续使用`int orderNumber`密钥附加一个（您需要在每个 setObject/setValue 之后递增它）。存储和检索为：

```
NSDictionary *dict=[NSDictionary new];
NSString *key=....;
[dict setValue:@"some  value" forKey:[NSString stringWithFormat:@"%d-%@",orderNumber, key]]; 
```

* * *

或者，您可以使用每个索引具有一个字典的数组。

* * *

另一种方法是使用自定义类作为

```
@interface ....
    @property(...) NSInteger index;
    @property(...) NSString *key;
    @property(...) id object;
    // and methods to retrieve based on key, based on index etc
@end 
```

编辑2：

发现与我一年前发布的内容非常相似，请参阅此[OrderedDictionary](http://www.cocoawithlove.com/2008/12/ordereddictionary-subclassing-cocoa.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:51:18.080

像这样的东西：

```
static int index;
[myDictionary setValue:someValue forKey:[NSString stringWithFormat:@"key%d", index++]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:55:11.290

您要么需要：

*   按照您添加它们的顺序，通过维护一个键数组来单独跟踪顺序。
*   将订单添加为要存储在字典中的对象的属性。

我更喜欢第二种方法，因为它将所有信息保存在一个地方。如果您存储的对象不是您定义的，那么您可能需要创建该对象的子类，或将其封装在您自己的对象之一中，并使用附加的*order*成员。

# database - 如何将数据库上传到 Heroku

> ID：14500631
> 
> 赞同：7
> 
> 时间：2013-01-24T11:46:36.953
> 
> 标签：database, git, heroku, migrate

我有一个共享的heroku应用程序，现在我不想在heroku中使用相同的代码创建一个测试应用程序，所以我创建了一个新应用程序，好的，问题是应用程序要运行它需要一个数据库，所以我正在尝试上传我的本地数据库，但不知道如何上传。

谁能告诉我我必须在命令行中输入什么才能上传本地数据库？

谢谢

ps：app使用django

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T11:53:09.680

您应该从 url 恢复数据库，请参阅[heroku import doc](https://devcenter.heroku.com/articles/heroku-postgres-import-export#import)：

```
heroku pgbackups:restore DATABASE 'http://f.cl.l...3z18/mydb.dump' 
```

**编辑：**

该`pgbackups`插件已被[弃用](https://devcenter.heroku.com/articles/pgbackups)。该过程现在已内置到 CLI 工具中。更多细节[在这里](https://devcenter.heroku.com/articles/heroku-postgres-backups)。新方法如下所示：

```
heroku pg:backups restore 'http://f.cl.l...3z18/mydb.dump' DATABASE 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-25T08:38:26.497

@danihp 的回答很好——这正是[文档所建议的](https://devcenter.heroku.com/articles/heroku-postgres-import-export#export)。

但它需要将文件发布在 S3 等尴尬的地方。

但是，正如 OP 所问的那样——我们如何才能做到这一点，而不必将数据库转储推到像 S3 这样尴尬的地方？

我能找到的最方便的答案（在@danihp 的评论中提到）是使用保管箱。

详细（未在 danihp 的评论中描述）：

简单地

*   将转储文件放入您的“公共”保管箱文件夹
*   右键单击并选择“复制公共链接”
*   将刚刚复制的 url 粘贴到命令中：

    ```
    heroku pgbackups:restore DATABASE_URL "<paste link here>" 
    ```

如果您不想将转储文件放在“公共”文件夹中，则需要再执行一步。

你需要

*   放在其他一些保管箱文件夹中
*   右键单击，然后选择“共享 Dropbox 链接”
*   将链接粘贴到浏览器中，浏览器将显示转储文件页面
*   右键单击“下载”按钮并复制 URL。
*   *将该*URL粘贴到命令中。

HTH。

# delphi - 如何在运行时设计器中隐藏继承的已发布属性？

> ID：14500638
> 
> 赞同：6
> 
> 时间：2013-01-24T11:46:55.540
> 
> 标签：delphi, properties, rtti, delphi-xe3

我正在使用一个属性检查器（[例如 JVCL 库中不错的 JvInspector](http://jvcl.delphi-jedi.org/)），它可以很好地让我查看和编辑我的类“TMyClass”的已发布属性。`TMyClass`来自`TFrame`并具有一些已发布的属性，这是我唯一需要查看和编辑的属性。当然`TFrame`有很多 VCL 属性，都已发布，我也看到了。

如何抑制祖先属性 RTTI 并保留我自己的已发布属性？我正在使用 XE3，所以世界就是我的牡蛎……也许吧。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T14:20:17.187

从 派生您的类[`TCustomFrame`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Forms.TCustomFrame)，并从您的类中仅发布您需要的那些属性。尽管您基本上不能隐藏已发布的属性，但其中有很多是受保护的，并且通过使用[`TCustomFrame`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Forms.TCustomFrame)类作为您自己类的祖先来保持隐藏。

这就是 VCL 中几乎每个控件在类层次结构中的组成方式。例如，[`TLabel`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.StdCtrls.TLabel)是一个[`TCustomLabel`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.StdCtrls.TCustomLabel)后代，它在类链中的唯一作用是发布您可以在 Object Inspector 中看到的属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T16:38:39.557

FWIW，我找到了一个 RTTI 解决方案 - 即只允许不属于一个或多个祖先类的属性，换句话说，您自己在当前类中添加、发布的属性。JvInspector 有一个`BeforeItemCreate`包含将出现在检查器中的属性名称的事件。此解决方案测试属性名称是否是祖先类的成员，只有不是，它才会在检查器中显示它。好处是任何检查器代码都没有更改。

```
uses
  TypInfo;

procedure TForm1.JvInspectorBeforeItemCreate(Sender: TObject; 
  Data: TJvCustomInspectorData; var ItemClass: TJvInspectorItemClass);
begin
  if IsPublishedProp(TFrame, Data.Name) then
    ItemClass := nil;
end; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-27T09:22:07.893

在运行时创建您的`TMyClass`组件/框架。

* * *

但是为了保持在设计时编辑属性的能力，不要`TMyClass`从`TFrame`. 相反，来自：

*   `TCustomPanel`如果你想要一个边框，
*   `TCustomControl`如果你能自己画边界，
*   `TWinControl`如果你能做到无国界。

当然，您的`TMyClass`组件将不再出现在“*插入框架”对话框*中，而只是像其他任何组件一样。

# c# - 将记录附加到 GridView

> ID：14500640
> 
> 赞同：1
> 
> 时间：2013-01-24T11:47:06.817
> 
> 标签：c#, asp.net, jquery

如果我在网格视图的页脚中有“查看更多”按钮。当我单击它时，我需要从数据库中附加更多记录，例如“Face Book”。我需要做到这一点，而无需在网格上发表完整的帖子。有没有办法使用 J Query、Jason 或其他任何东西来做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:52:12.370

正如@Aristos 所说，您将无法使用 a 附加行`GridView`，因为它绑定在服务器端。但是，您可以创建一个返回数据页面的 Web 服务。这些可以附加到`<ul>`您使用[中继器创建的 a](http://www.netrostar.com/Tutorials-91-ASP.NET%20Tutorial.%20How%20to%20use%20Repeater)中：

```
[WebMethod]
[ScriptMethod(ResponseFormat=ResponseFormat.Json)]
public string Format(int offset, int limit) {
    //  return data from your database here 
```

然后从jQuery，

```
var currentPage = 0;
var numPerPage = 30;
$.ajax({
    url: '/YourService.asmx/GetData',
    data: JSON.stringify({ 'offset': (numPerPage * ++currentPage), 'limit': numPerPage}),
    type: 'POST',
    dataType: 'json',
    contentType: 'application/json; charset=utf-8', 
    success: function(response){
        // response.d contains your formatted results. If you have a <ul>, you could append them simply by doing:
        $.each(response.d, function() {
            $('<li/>').html(this).appendTo('#yourList');
        });
    });
}); 
```

# php - Uploadify onComplete 队列更改

> ID：14500642
> 
> 赞同：0
> 
> 时间：2013-01-24T11:47:11.560
> 
> 标签：php, jquery, events, queue, uploadify

我正在尝试自定义 Uploadify。上传完成后，我想更改与该上传相关的队列项目以反映上传脚本的响应。

例如上传错误：背景变为红色并添加响应。

有谁知道 Uploadify 知道如何获取上传的关联队列项目，以便我可以修改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:40:48.947

您需要在uploadify 选项中添加选项“overrideEvents : [在此处列出您将更改的所有功能]”。例如，函数“onUploadError”报告一次上传错误，“onUploadSuccess” - 报告上传成功。您将在未压缩的“jquery.uploadify-3.1.js”中找到此功能的完整列表

# java - 返回字符解析 KML 文件

> ID：14500643
> 
> 赞同：2
> 
> 时间：2013-01-24T11:47:12.700
> 
> 标签：java, android, dom, kml

我在解析 KML 文件时遇到两个问题。我正在使用 DocumentBuilder 来做到这一点。这是我要解析的示例部分：

```
<Placemark>
 <description>&lt;div align=center&gt;&lt;img src=some_image.jpg  width=300 height=220/&gt;&lt;br/&gt;SOME IMAGE&lt;/div&gt;</description>
 <styleUrl>#m_ylw-pushpin</styleUrl>
 <ExtendedData>
   <Data name="Numero">
     <Value>00032</Value>
   </Data>
   <Data name="Nombre">
     <Value>GTA ALONSO MARTINEZ</Value>
   </Data>
 </ExtendedData>
 <Point>
   <altitudeMode>relativeToGround</altitudeMode>
   <coordinates>-3.69556116887887,40.4276170711932,10 </coordinates>
 </Point>
</Placemark> 
```

第一件事是，当我想获得“地标”的孩子时，我会在标签之间得到一些返回字符“\n”。例如

```
NodeList nodeList = doc.getElementsByTagName("Placemark");
String node = nodeList.item(0).getTextContent(); // node = "\n"
String node2 = nodeList.item(1).getTextContent(); // node = [content of <description>] 
```

另一个问题是 DocumentBuilder 是否可以将 html 字符（< 和 >）转换为（< 和 >）以进入此标签并正确解析它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:52:52.923

您是否尝试过像[http://code.google.com/p/javaapiforkml/这样的 KML 库](http://code.google.com/p/javaapiforkml/)

具体来说，这几乎总是生成或解析 KML 的答案，特别是如果您不熟悉 XML 解析、字符集等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:18:28.337

中可以配置一些选项`DocumentBuilderFactory`，例如合并（即将 CDATA 元素扩展为文本节点）、忽略注释等。

在您的情况下，如果您只想在没有那些元素间“\n”的纯文本中转储没有空格内容（制表符、\n、空格等）的 XML 内容，您应该传递`true`给`setIgnoringElementContentWhitespace()`.`DocumentBuilderFactory`

# ios - iOS 通用应用程序行为怪异

> ID：14500645
> 
> 赞同：0
> 
> 时间：2013-01-24T11:47:14.217
> 
> 标签：ios, xcode, ios-universal-app

我昨天刚刚将我的 iPhone 应用程序转换为通用应用程序。我进行了适当的更改，但每次添加新的 png 文件或图标时，都会出现以下错误：

```
No such file or directory (/Users/username/Library/Developer/Xcode/DerivedData/APP-exqfnpxyqlazbechywnebtxqcykj/Build/Products/Release-iphoneos/APP.app/APP) 
```

我不确定是什么原因造成的。我一直遵循[此博客](http://dhilipsiva.blogspot.se/2012/07/xcode-could-not-launch-app-no-such-file.html)中描述的步骤。但它不起作用。我什至尝试过多次重启我的电脑。有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:51:05.030

正如链接所述，您可以从 Orginizer 窗口中删除派生数据。您还可以通过按住 alt 键单击“产品”菜单下的“清理构建文件夹”。然后像往常一样清理项目。

# jenkins - 如何让詹金斯创建一个临时目录？

> ID：14500647
> 
> 赞同：4
> 
> 时间：2013-01-24T11:47:19.977
> 
> 标签：jenkins

有没有办法/配置让詹金斯创建一个临时目录来存储应用程序创建的文件？最后这个临时目录应该被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:43:55.620

您可以使用*Add Build Step* > *Execute Shell*来执行此操作。在那里，您只需创建文件夹并在最后将其删除。

如果文件夹可以位于 Job 的工作区中，则[工作区清理插件](https://wiki.jenkins-ci.org/display/JENKINS/Workspace+Cleanup+Plugin)可能会有所帮助，因为它允许您在构建完成后删除工作区。

# android - Toast.makeText 活动上下文错误？

> ID：14500653
> 
> 赞同：1
> 
> 时间：2013-01-24T11:47:29.057
> 
> 标签：android, android-activity

我是 Android、Eclipse 和部分 Java 的新手（十年前我读过一本 Java 书但从未使用过。）我正在关注本教程： http: [//ofps.oreilly.com/titles/9781449390501/Android_User_Interface.html](http://ofps.oreilly.com/titles/9781449390501/Android_User_Interface.html)

我有这个代码：

```
public class Status extends Activity implements OnClickListener, TextWatcher {
  // ...
  class PostToTwitter extends AsyncTask<String, Integer, String> {
    // ...
    protected void onPostExecute(String result) { 
      Toast.makeText(Status.this, result, Toast.LENGTH_LONG).show();
    }
  }
} 
```

**我在Toast.makeText**行旁边收到这些错误：

> *   Toast 类型中的方法 makeText(Context, CharSequence, int) 不适用于参数 (AsyncTask.Status, String, int)
> *   范围内无法访问 AsyncTask.Status 类型的封闭实例

1.  我不确定为什么会出现错误？
2.  为什么在我传递 Status 活动上下文时提到 AsyncTask？

我想我会打自己一巴掌说“Doh”！后来，但我现在对它视而不见:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:50:45.557

您的问题是这是[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html#nestedclasses)[`Status`](http://developer.android.com/reference/android/os/AsyncTask.Status.html)的公共枚举。因此，java 不会将您的活动作为上下文。尝试在您的.`AsyncTask`

在这里试试这个代码：

```
public class Status extends Activity implements OnClickListener, TextWatcher {
  private Context context;
  public void onCreate(...) {
    context=this;
    //...
  }

  // ...
  class PostToTwitter extends AsyncTask<String, Integer, String> {
    // ...
    protected void onPostExecute(String result) { 
        Toast.makeText(context, result, Toast.LENGTH_LONG).show();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T12:48:54.780

```
Toast.makeText(com.package.name.Status.this, "Toast message", Toast.LENGTH_LONG).show(); 
```

替换`com.package.name`为您的应用程序的包名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T12:14:06.467

尝试将上下文传递给 AsyncTask，包括在“PostToTwitter”构造函数中。例如，当您实例化类时，传递 getApplicationContext() （或“this”，如果从 Activity 调用）。然后，在 Toast 中使用该上下文，而不是 Status.this：

```
 Toast.makeText(context, result, Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T11:52:04.180

Toast 在 onPostExecute() 方法使用 ProgressDialoge 或调试时出现错误

> Log.d("结果",结果+"");

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T12:07:20.983

您的 asyntask 是否是 Status Activity 中的内部类，如果然后将 public 关键字与 as

```
public class PostToTwitter extends AsyncTask<String, Integer, String> {
// ...
    public void onPostExecute(String result) { 
    Toast.makeText(Status.this, result, Toast.LENGTH_LONG).show();
  }
 } 
```

Status.this 没问题，如果您的 Asyntask 不是内部类，那么您需要将它作为 Constructor 传递

# java - XSS 安全的 Java 标记语言

> ID：14500654
> 
> 赞同：2
> 
> 时间：2013-01-24T11:47:30.230
> 
> 标签：java, markdown, wiki, xss

我正在编写一个 java webapp，我想让我的用户输入包含[XSS / Cross-Site-Scripting](http://en.wikipedia.org/wiki/Cross-site_scripting)安全标记的文本。我想将用户生成的标记保存到数据库并将其显示为 HTML。

我知道[降价](http://daringfireball.net/projects/markdown/)，但这允许输入不是 XSS 安全的原始 HTML。

java中是否有任何类似wiki/markdown的解释器是XSS安全的？我还想听听任何可能对这里有所帮助的 javascript / wysiwig 编辑器。

或者，Java 中是否有任何 XSS 过滤器可以清理 HTML，使其成为 XSS 安全的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:44:06.897

我将 Markdown（实际上是 Pegdown）与[Jsoup](http://jsoup.org/)一起使用，效果很好。

汤...

> *   根据安全白名单清理用户提交的内容，以防止 XSS 攻击。
> *   输出整洁的 HTML

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T15:46:24.860

看看 JSoup，它允许您指定白名单：http: [//jsoup.org/cookbook/cleaning-html/whitelist-sanitizer](http://jsoup.org/cookbook/cleaning-html/whitelist-sanitizer)

# java - “必须实现继承的抽象方法”

> ID：14500655
> 
> 赞同：0
> 
> 时间：2013-01-24T11:47:31.467
> 
> 标签：java, spring, jpa

我在课堂上有 AbstractJpaDao 方法

```
@Override
public EntityManager getEntityManager() {
    return em;
} 
```

现在它没有被使用，我想删除它，但我收到错误：

该类型必须实现类`JpaAclIdentityDao`中继承的抽象方法。`IJpaDao.getEntityManager()``JpaAclIdentityDao`

那个吸气剂是必要的吗？如果不是如何删除它

我的代码：

```
public abstract class AbstractJpaDao implements IJpaDao {

protected final IApplicationConfig config;

protected final EntityManager em;

private final SingletonEventBus eventBus;

public AbstractJpaDao(EntityManager entityManager, IApplicationConfig config, SingletonEventBus eventBus) {
    checkArgument(entityManager != null);
    checkArgument(config != null);
    checkArgument(eventBus != null);
    this.em = entityManager;
    this.config = config;
    this.eventBus = eventBus;
}

protected void saveEntity(IEntity entity) {
    boolean isNew = entity.getId() == 0;
    em.getTransaction().begin();
    try {
        em.persist(entity);
        em.getTransaction().commit();
        if (isNew) {
            eventBus.post(new EntityCreatedEvent(entity));
        }
    } finally {
        if (em.getTransaction().isActive()) {
            em.getTransaction().rollback();
        }
    }
}

@Repository
public class JpaAclIdentityDao extends AbstractJpaDao implements IAclIdentityDao {

   public static final String GROUP_NAME_PATTERN = "GROUP_%d"; 

    private static final String GROUP_TEMP_NAME = "TEMP_GROUP_NAME"; 

@Inject
public JpaAclIdentityDao(EntityManager entityManager, IApplicationConfig config, SingletonEventBus eventBus) {
    super(entityManager, config, eventBus);
}

@Override
public AclIdentity findById(Object id) throws EntityNotFoundException {
    return em.find(AclIdentity.class, id);
}

@Override
public List<AclIdentity> findAll() {
    return findAllByType(AclIdentity.class);
}

@Override
public void delete(AclIdentity entity) {
    // TODO Auto-generated method stub
}

@Override
public void save(AclIdentity entity) {
    saveEntity(entity);
}

@Override
public AclIdentity createNew(String sid, boolean principal) {
    AclIdentity identity = new AclIdentity(sid, principal);
    save(identity);
    return identity;
}

@Override
public AclIdentity createNew(User entity) {
    return createNew(entity.getEmail(), true);
}

@Override
public AclIdentity createNew(Group entity) {
    AclIdentity identity = createNew(GROUP_TEMP_NAME, false);
    identity.setSid(String.format(GROUP_NAME_PATTERN, identity.getId()));
    save(identity);
    return identity;
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T11:52:23.697

是的，您必须实现在已实现接口中定义的所有方法。我能想到的唯一可能的解决方案是实现该方法并将其留空，或者不实现接口。或者，正如 ben75 所说，如果您不需要它（任何地方），只需删除接口“IJpaDao”声明中的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-26T21:50:03.497

如果您不想使用它，则抛出 UnsupportedOperationException：

```
public class JpaAclIdentityDao extends AbstractJpaDao ... { // Or AbstractJpaDao...

    // Some Code...

    public EntityManager getEntityManager() {
        throw new UnsupportedOperationException();
        // return null; (This is not needed, due to the exception thrown above. Thanks dedek!)
    }

    // More Code...
} 
```

由于 OO 编程，如果具体类继承了具有抽象方法的类/接口，则*必须*定义该方法，或者使您的类抽象并将其传递下去，就像您对 AbstractJpaDao 所做的那样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T11:53:44.230

该方法`getEntityManager`在`IJpaDao`（或一个超级接口）中定义，这就是为什么您需要在您的类中提供它的实现。

如果它根本不使用（即，即使是通过您正在使用的某些框架内的某种反射机制），那么您可以将其从中删除，`IJpaDao`并且您不会被迫实施它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T11:51:27.363

我猜接口 IJpaDao 包含一个 getEntityManager 抽象方法。

# python - 从不同来源的跨平台音频导入

> ID：14500656
> 
> 赞同：1
> 
> 时间：2013-01-24T11:47:39.703
> 
> 标签：python, audio, audio-streaming

我正在使用 Python，我想分析来自互联网流媒体（例如 Youtube、Soundcloud 等）的音频文件。有没有通用的方法可以做到这一点？每个音乐或视频都有一个预加载，必须有一种访问它的方法吗？如何？我想在外部服务器上运行这个脚本，这可能与答案有关。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-24T14:24:31.380

你在你的电脑上“听到”的所有声音都必须通过你的声卡，也许以某种方式编写一个脚本来“记录”通过设备运行的声音。也许你可以使用 Pymedia 模块？

# wordpress - 更新后 Wordpress 菜单不起作用

> ID：14500657
> 
> 赞同：1
> 
> 时间：2013-01-24T11:47:44.507
> 
> 标签：wordpress, menu, angularjs

几个月前，我为一个投资组合网站购买了 wordpress 的 Angular 主题，以展示我的前端 Web 开发工作（我懒得创建自己的）。

昨晚我去更新网站，发现菜单已经停止运行。如果我单击菜单项，URL 将更改为链接的 URL，但页面将保留在当前页面上，并且不显示新 URL 的内容。

我的网站是[http://www.decodedcreative.com](http://www.decodedcreative.com)。有没有人有任何想法或事情可以尝试解决问题？我已将主题切换到二十二个主题，然后菜单按预期工作，并且还尝试重新下载整个 Angular 主题，以防我损坏了文件。

有任何想法吗？

谢谢

PS - 我也尝试在我的服务器上重新启动 Apache，但无济于事。这个问题也在主题的支持论坛上被问到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T00:30:01.677

当您在 Wordpress 中查看页面列表时，请尝试使用“快速编辑”来编辑页面 Slug。即使我在您使用“编辑”链接时更新了永久链接，它实际上并没有更新 slug。更新 slug 将修复它。

# asp.net - AjaxFileUpload 不会触发 OnUploadComplete 事件

> ID：14500659
> 
> 赞同：6
> 
> 时间：2013-01-24T11:47:50.920
> 
> 标签：asp.net, file-upload, ajaxcontroltoolkit

我正试图让`AjaxFileUpload`-Control（在 ContentPage 中使用）工作。但它不会`OnUploadComplete`在服务器端触发事件

我正在使用`4.1.60919.0`ControlToolkit 的版本。我已经尝试了我在互联网上找到的所有东西。

这里只需几个步骤：

*   在我的 MasterPage 中的表单元素中添加了 enctype="multipart/form-data" method="post"
*   使用 UpdateMode=Always 将 AjaxFileUpload 嵌套到 UpdatePanel
*   尝试了事件UploadedComplete和OnUploadComplete，但停留在第二个
*   在 EventHandler 中添加了一个 try-catch-block 以捕获未知异常并将 ExceptionMessage 打印到站点上的标签 --> 没有发生任何事情
*   用（出）一个 ThrobberImage 尝试过......
*   许多其他无效的提示...

所以，我希望我们能在这个社区中共同找到解决方案。这是我的标记：

```
<%@ Page Title="New Download" Language="C#" MasterPageFile="~/MasterPage.master"     AutoEventWireup="true" CodeFile="NewDownload.aspx.cs" Inherits="Internals_NewDownload" %> 
```

```
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="Server">

<ajax:ToolkitScriptManager ID="ToolkitscriptManager" runat="server">    </ajax:ToolkitScriptManager>
<h1>Create a new Download</h1>

        <ajax:AjaxFileUpload ID="FileUpload" runat="server" ThrobberID="ThrobberLabel" OnUploadComplete="FileUpload_UploadComplete" />
        <asp:Label ID="ThrobberLabel" runat="server" Style="display: none;"><img alt="UploadingPicture" title="Please wait while uploading..." src='<%= Constants.DomainString + "/Data/Images/loading-small.gif" %>' /></asp:Label>
        <asp:Label ID="DownloadLabel" runat="server"></asp:Label>

</asp:Content> 
```

这是我的代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class Internals_NewDownload : System.Web.UI.Page
{
private string m_LanguageCode;

protected void Page_Load(object sender, EventArgs e)
{
    if (RouteData.Values.ContainsKey("LanguageCode"))
        m_LanguageCode = RouteData.Values["LanguageCode"].ToString();

    //if (IsPostBack)
    //    return;
    if (!User.IsInRole("Administrator") && !User.IsInRole("Kunde") && !User.IsInRole("Mitarbeiter"))
        Response.Redirect(Constants.DomainString + "/PermissionDenied.aspx");
    Session[Constants.NonGlobalizedString] = true;
    Session[Constants.MenuInfoSession] = new ClsMenuInfo("NewDownload");
}

protected void FileUpload_UploadComplete(object sender,     AjaxControlToolkit.AjaxFileUploadEventArgs e)
{
    try
    {
        string filePath = "~/upload/" + e.FileName;
        DownloadLabel.Text = filePath;
    }
    catch (Exception ex)
    {
        DownloadLabel.Text = ex.Message;
    }
}
} 
```

请，如果您有任何想法，请随时告诉我。我很困惑，因为我认为我只是在互联网上找到的那个howtos中做了......

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:33:19.010

考虑到该`AjaxFileUpload`控件使用`contextkey`QueryString 参数来检测自己的回发。我相信你问题的原因是这个参数在重写 url 的结果中丢失了。我不是应用路由的专家，但我认为您需要在路由表中注册 contextkey 参数并调整 AjaxControlToolkit 源以使用 RouteData 而不是 Request.QueryString 来检索它的值。检查此链接以获取更多信息：[AjaxControlToolkit 源代码](http://ajaxcontroltoolkit.codeplex.com/SourceControl/changeset/view/d864443e4a38#Server/AjaxControlToolkit/AjaxFileUpload/AjaxFileUpload.cs)

# android - android.R.simple_spinner_adapter 无法解决

> ID：14500660
> 
> 赞同：5
> 
> 时间：2013-01-24T11:47:54.437
> 
> 标签：android, android-spinner

安卓 2.3.3

我的 xml 文件中有一个 Spinner，我希望将 ArrayList 设置为源。我正在尝试使用 ArrayList 实例化 ArrayAdapter，但我没有选择 R.simple_spinner_adapter。

这是代码:::

```
public class UnitConverter extends Activity{

    Spinner spnUnit;
    ArrayAdapter<String> ad;

    ArrayList<String> alAngle = new ArrayList<String>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);     
        setContentView(R.layout.unitconverter);

        spnUnit = (Spinner) findViewById(R.id.spinnerUnit);
        ad = new ArrayAdapter<String>(this, android.R.simple_spinner_adapter, alAngle);
    // Error at above line near android.R.simple_spinner_adapter    
        setDataToArrayLists();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:57:16.823

你的问题的答案是你没有正确使用适配器：-

android.R.simple_spinner_adapter 应该是 android.R.layout.simple_spinner_item

示例可以是：-

```
Spinner  spinner = (Spinner) findViewById(R.id.font_spinner);
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
            this, R.array.font_array,android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter); 
```

使用如上检查这是我的代码中使用的示例...！！！！

# windows - 在静态地图中过滤 kml

> ID：14500661
> 
> 赞同：1
> 
> 时间：2013-01-24T11:47:59.197
> 
> 标签：windows, kml

我正在开发一个**桌面**应用程序，**而不是 web**。软件环境为Windows和VB10。在我的用户界面中，我有一个浏览器，我想在其中显示地图，发出一个类似[http://maps.google.com/maps?q=](http://maps.google.com/maps?q=)的地址，然后我指出一个 URL，我在其中放置了一个包含我的数据的 KML 文件. 问题是：是否可以过滤 KML 文件中的数据以仅显示其中的一个子集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:50:44.333

基本上你有两个选择：

1.  将参数传递给即时生成过滤后的 KML 的服务。
2.  在浏览器界面中使用 JavaScript 执行此操作。

根据您的问题，我将假设选项一已退出。对于选项二，网络上有大量示例，但基本上您需要自己解析 KML 并编写 JavaScript 代码来处理它，但是需要完成它才能实现过滤，您不能将 KML URL 直接传递给谷歌地图和实现任何这种行为。

可能有用的例子：[http ://www.gpsvisualizer.com/examples/google_folders.html](http://www.gpsvisualizer.com/examples/google_folders.html)

**更新**

根据评论中的对话：

我能想到的唯一另一件事是使用 JavaScript 创建您自己的地图页面以执行您想要的操作（如上面链接的[http://gpsvisualizer.com/examples/google_folders.html](http://gpsvisualizer.com/examples/google_folders.html)），然后将其嵌入到您的应用程序中而不是谷歌地图。本质上封装了您想要的功能。因此，您的应用程序中没有**maps.google.com/maps?q= ，而是****myMapURL.com/MyMap?querystring**，它是您的谷歌地图包装器，具有所需的过滤功能。否则，根据您当前的设置，我认为您不走运。

# android - 尽管应用程序已发送到后台，但恢复以前的线程

> ID：14500665
> 
> 赞同：0
> 
> 时间：2013-01-24T11:48:14.780
> 
> 标签：android, multithreading, android-activity, background

我正在尝试编写一个包含倒数计时器的活动。我通过一个新线程创建它，当应用程序被发送到后台时，这个倒数计时器继续在他的线程中运行；问题是当我再次开始活动时；这会创建另一个执行相同操作的线程。

那么，有什么方法可以“恢复”在应用程序发送到后台之前创建的先前线程，而无需创建新副本？

这是代码：

```
public class MainActivity extends FragmentActivity{

private static final String TAG = Values.Tags.MAIN_ACTIVITY;
private TextView timeTextView;
final Handler mHandler = new Handler();

@Override
protected void onCreate(Bundle savedInstanceState) {
    // GENERAL ACTIVITY TASKS (all activities should do these).
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // MAIN_ACTIVITY TASKS.
    timeTextView = (TextView) findViewById(R.id.activityMain_timer);

    createThread();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void buttonPressed(View view){
    DialogFragment newFragment = new TimePickerFragment();
    newFragment.show(getSupportFragmentManager(), "timePicker");
}

public static class TimePickerFragment extends DialogFragment implements TimePickerDialog.OnTimeSetListener {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Create a new instance of TimePickerDialog and return it
        return new TimePickerDialog(getActivity(), this, 0, 0, true);
    }

    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        Log.d(TAG, "set time");
        getPickedTime(hourOfDay, minute);
    }

}

public static void getPickedTime(int hourOfDay, int minute) {
    Log.d(TAG, "Hora: "+hourOfDay+", minute: "+minute);
}

private void createThread() {
    Thread thread = new Thread(){
        public void run(){
            try {
                Thread.sleep(10000);
            } catch (InterruptedException e){
                Log.d(TAG, e.getMessage());
            }
            Log.d(TAG, this.getName()+ " is about to complete...");
            mHandler.post(doAction);
        }
    };
    thread.setName("thread00");
    thread.start();
}

final Runnable doAction = new Runnable(){
    public void run(){
        Log.d(TAG, "Completed.");
    }
}; 
```

}

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:12:17.517

在您的线程中创建一个变量

```
Boolean isRunning = false; 
```

当您的线程开始时，将其放入应用程序共享首选项中，如下所示..

```
isRunning = true;
SharedPreferences settings = getSharedPreferences("isThreadRunning", 0);
SharedPreferences.Editor editor = settings.edit();
editor.putBoolean("isRunning", isRunning);
editor.commit(); 
```

现在，当线程完成时，只需将其更改回 false。

```
isRunning = false; 
```

在 OnCreate() 中，读取相同的首选项

```
SharedPreferences settings = getSharedPreferences("isThreadRunning", 0);
boolean running = settings.getBoolean("silentMode", false); 

if(running){
   //Thread already running
}else{
   //the thread isnt running so lets start it.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:19:27.733

我假设我想要做的事情是不可能仅使用线程的。我想我应该使用服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T05:00:24.197

如果您可以发布您的代码，我会更好。现在只是通过猜测我给出了一些建议，在 oncreate 方法中而不是在 onresume 中启动你的线程。在 ondestroy 中销毁活动时停止线程。

# jquery-ui - FF 和 Opera 中的 jquery draggable() 无法正常工作

> ID：14500667
> 
> 赞同：2
> 
> 时间：2013-01-24T11:48:18.040
> 
> 标签：jquery-ui, iframe, draggable

我在 iframe 表 trs 中有可拖动和可放置（jquery）。它在 chrome 和 ie 中正常工作，但是当我想在 FF 中拖放时，我必须单击 2 次才能更改 trs。

```
 $(this).draggable({ helper: 'clone', iframeFix: true, cursor: "move", cursorAt: { top: 600, left: 155 } });

                  $(childrensDraggableZone).droppable({
                      accept: '.dragdrop',
                      activeClass: "ui-state-hover",
                      hoverClass: "ui-state-active",
                      drop: function(event, ui) {

                          var draggable = ui.draggable, droppable = $(this),
                              dragPos = draggable.position(), dropPos = droppable.position();
                          draggable.css({
                                  left: dropPos.left + 'px',
                                  top: dropPos.top + 'px'
                              });

                          droppable.css({
                                  left: dragPos.left + 'px',
                                  top: dragPos.top + 'px'
                              });
                          draggable.swap(droppable);
                      }
                  }); 
```

# android - 如何在相对度量中指定 Android GridLayout 单元格的宽度和高度？

> ID：14500677
> 
> 赞同：42
> 
> 时间：2013-01-24T11:48:46.150
> 
> 标签：android, android-layout

我试图弄清楚[GridLayout](http://android-developers.blogspot.no/2011/11/new-layout-widgets-space-and-gridlayout.html)是如何工作的，但我无法从文档中弄清楚的一件事是如何或是否可以控制网格单元的大小。

假设我想要一个两乘二的网格，其中每个单元格恰好占据屏幕空间的 25%（半高，半宽）——我可以这样做吗？

使用LinearLayout，我可以通过将两个水平LinearLayout 嵌套在一个垂直中，然后为所有元素分配**权重1 来实现这一点。**GridLayout 虽然不支持 weight 属性。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-06-27T13:13:30.530

有两个属性 android:layout_columnWeight 和 layout_rowWeight 与 LinearLayout 中的 layout_weight 类似。这在 API 21 中得到支持。对于较旧的 android 设备，请使用 v7 支持库中的 GridLayout。

这些属性将允许您根据分配给每列的值调整列的宽度/高度。公式是这样的 (column_weight/ sum_of_column_weight) * gridLayout_width = column_width。

这是一个示例，它是一个 2 行 2 列均匀分布的网格视图，每一个占网格重量和高度的 50%。

```
<GridLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:columnCount="2"
>

    <TextView
        android:text="SEARCH FEE"
        android:layout_columnWeight="1"
        android:layout_rowWeight="1"
     />

    <TextView
        android:layout_columnWeight="1"
        android:text="SEARCH FEE"
        android:layout_rowWeight="1"
     />

    <TextView
        android:text="SEARCH FEE"
        android:layout_columnWeight="1"
        android:layout_rowWeight="1"
        />

    <TextView
        android:layout_columnWeight="1"
        android:text="SEARCH FEE"
        android:layout_rowWeight="1"
        />
</GridLayout> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-24T14:19:00.153

根据文档，它看起来像你想要的那样设置应该相当简单：

```
android:rowCount='2'
android:columnCount='2' 
```

在儿童集中

```
android:layout_columnSpan="1"
android:layout_rowSpan="1" 
```

[该](http://developer.android.com/reference/android/widget/GridLayout.html)参考文献还提到了拉伸：

> 为防止柱子拉伸，请确保柱子中的一个组件未定义重力。

这似乎是一种将行和列保持在 50:50 比例而不根据内容调整大小的解决方案

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-03-20T02:40:16.517

它会是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.v7.widget.GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    app:columnCount="2"
    app:rowCount="2">

    <TextView
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:gravity="center"
        android:text="1"
        app:layout_columnWeight="1"
        app:layout_rowWeight="1" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:gravity="center"
        android:text="2"
        app:layout_columnWeight="1"
        app:layout_rowWeight="1" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:gravity="center"
        android:text="3"
        app:layout_columnWeight="1"
        app:layout_rowWeight="1" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:gravity="center"
        android:text="4"
        app:layout_columnWeight="1"
        app:layout_rowWeight="1" />

</android.support.v7.widget.GridLayout> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-15T14:23:57.770

GridLayout里面有一个辅助方法：

```
GridLayout.LayoutParams params = new GridLayout.LayoutParams();
            params.columnSpec = GridLayout.spec(GridLayout.UNDEFINED, 1, getAlignment(Gravity.NO_GRAVITY, true), 1);
item.setLayoutParams(params);

private GridLayout.Alignment getAlignment(int gravity, boolean horizontal) {
        int mask = horizontal ? HORIZONTAL_GRAVITY_MASK : VERTICAL_GRAVITY_MASK;
        int shift = horizontal ? AXIS_X_SHIFT : AXIS_Y_SHIFT;
        int flags = (gravity & mask) >> shift;
        switch (flags) {
            case (AXIS_SPECIFIED | AXIS_PULL_BEFORE):
                return horizontal ? LEFT : TOP;
            case (AXIS_SPECIFIED | AXIS_PULL_AFTER):
                return horizontal ? RIGHT : BOTTOM;
            case (AXIS_SPECIFIED | AXIS_PULL_BEFORE | AXIS_PULL_AFTER):
                return FILL;
            case AXIS_SPECIFIED:
                return CENTER;
            case (AXIS_SPECIFIED | AXIS_PULL_BEFORE | GravityCompat.RELATIVE_LAYOUT_DIRECTION):
                return START;
            case (AXIS_SPECIFIED | AXIS_PULL_AFTER | GravityCompat.RELATIVE_LAYOUT_DIRECTION):
                return END;
            default:
                return GridLayout.FILL;
        }
    } 
```

通常，这只是可访问的思想反思。

还有更小的版本：

```
params.columnSpec = GridLayout.spec(GridLayout.UNDEFINED, 1, GridLayout.FILL, 1); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-04-08T06:45:26.970

我使用以下尺寸制作了自己的 3 * 3 井字游戏板。此代码用于第一行。我对其他行也做了同样的事情。

```
 <android.support.v7.widget.GridLayout
    android:id="@+id/gridLayout"
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:background="@drawable/board"
    app:columnCount="3"
    app:layout_constraintBottom_toBottomOf="@+id/blackboard"
    app:layout_constraintEnd_toEndOf="@+id/blackboard"
    app:layout_constraintStart_toStartOf="@+id/blackboard"
    app:layout_constraintTop_toTopOf="@+id/blackboard"
    app:rowCount="3">

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="80dp"
        android:layout_height="80dp"
        app:layout_column="0"
        app:layout_row="0"
        app:layout_rowWeight="1"
        app:layout_columnWeight="1"
        app:layout_gravity="center"/>

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="80dp"
        android:layout_height="80dp"
        app:layout_column="1"
        app:layout_row="0"
        app:layout_rowWeight="1"
        app:layout_columnWeight="1"
        app:layout_gravity="center"/>

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="80dp"
        android:layout_height="80dp"
        app:layout_column="2"
        app:layout_row="0"
        app:layout_rowWeight="1"
        app:layout_columnWeight="1"
        app:layout_gravity="center"/> 
```

# java - 2个同名但不同包的bean，如何自动装配？

> ID：14500678
> 
> 赞同：5
> 
> 时间：2013-01-24T11:48:46.073
> 
> 标签：java, spring, hibernate, jpa

在我的 java 项目中，我有 2 个名称相同但包不同的实体，我也有这些实体对应的 dao。

现在由于 2 个实体具有相同的名称，它给出了重复扫描错误，所以我用它们的完全限定名称为这些实体添加了名称属性。

例如：实体(name="pckEntity) & 实体(name="pabEntity)

但现在我他们相应的 daos 无法自动装配，我收到以下错误：

```
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type... 
```

我是否还必须更改 Dao 中的任何内容以支持实体中的“名称”属性更改。

我正在使用 Hibernate、JPA 和 Spring。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:02:21.120

默认情况下，自动装配是按类型完成的。所以你可以直接使用`@Autowired`注解，因为两个实体都是不同的类，确保它们是 spring bean（这里我的意思是那些由 Spring 管理）。

```
@Autowired // nothing to specify, Spring automatically autowire the bean by checking type
private p.c.k.Entity entity;
@Autowired // nothing to specify, Spring automatically autowire the bean by checking type
private p.a.b.Entity entity1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:55:49.097

我认为您可以使用`@Qualifier`注释

```
@Autowired
@Qualifier("p.c.k.Entity")
private Entity entity; 
```

从[这里得到](https://stackoverflow.com/questions/4447877/does-spring-autowire-by-name-if-more-than-one-matching-bean-found)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-16T18:11:47.057

我也遇到了这个问题，除了重命名其中一个类之外，找不到任何解决方法。在不同的包装中应该就足够了，但事实并非如此。

# java - 在 listviewitem 中设置颜色

> ID：14500679
> 
> 赞同：1
> 
> 时间：2013-01-24T11:48:56.837
> 
> 标签：java, android

我想使用以下代码为 ListView 中的项目着色：

`holder.txtPosition = (TextView)row.findViewById(R.id.txtPosition);` `holder.txtPosition.setTextColor(0xFF00CC00);`.

它工作得很好但是：它也每十个项目着色。例如：我为第一个项目设置颜色，所以每第十个项目也会获得颜色。

如果我向下滚动并再次向上滚动，就会有更多的颜色。

在这张图片中，我只为第一个“用户投票”文本着色，然后非常快速地向下滚动并滚动回顶部。

![绿色文字](../Images/8ffc3b96c72980255926b2fe3d7e5b6c.png)

这是什么魔法？

```
import android.app.Activity;
import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class List extends ArrayAdapter<ListItem>{

    Context context; 
    int layoutResourceId;    
    ListItem data[] = null;

    public List(Context context, int layoutResourceId, ListItem[] data) {
        super(context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data; 
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        WeatherHolder holder = null;
        ListItem entry = data[position];

        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new WeatherHolder();
            holder.txtVideos = (TextView)row.findViewById(R.id.txtVideos);
            holder.txtPosition = (TextView)row.findViewById(R.id.txtPosition);
            holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);
            holder.txtcomments = (TextView)row.findViewById(R.id.txtcomment);

            row.setTag(holder);

            if (entry.fav){
                //row.setBackgroundColor(0xFFfcf6bb);
            }
        }
        else
        {
            holder = (WeatherHolder)row.getTag();
        }
        holder.txtTitle.setText(entry.teilnehmer);
        holder.txtPosition.setText(entry.position);

        int num = Integer.parseInt(entry.videos);
        if (num == 0 || num > 1){
            holder.txtVideos.setText(entry.videos + " Videos");
        } else {
            holder.txtVideos.setText(entry.videos + " Video");
        }

        if (holder.txtPosition.getText().equals("Ausgeschieden")){
            holder.txtPosition.setTextColor(0xFFFF0000);
        } else if(holder.txtPosition.getText().equals("User-Voting")){
            holder.txtPosition.setTextColor(0xFF00CC00);
        }

        num = Integer.parseInt(entry.comment);
        if (num == 0 || num > 1){
            holder.txtcomments.setText(entry.comment + " Kommentare");
        } else {
            holder.txtcomments.setText(entry.comment + " Kommentar");
        }
        return row;
    }

    static class WeatherHolder
    {
        TextView txtTitle;
        TextView txtVideos;
        TextView txtPosition;
        TextView txtcomments;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T12:02:32.347

您正在回收您的 ListView 元素（这是一件好事）。但是当这样一个 View 被传递给你的`getView`方法时，它仍然处于它持有的最后一个元素的状态；因此，如果您指定`setColor`此值，也将应用于将注入容器的下一个文本。因此，您还应该在重新填充回收视图时重置颜色定义：

```
if (holder.txtPosition.getText().equals("Ausgeschieden")) {
    holder.txtPosition.setTextColor(0xFFFF0000);
} else if (holder.txtPosition.getText().equals("User-Voting")) {
    holder.txtPosition.setTextColor(0xFF00CC00);
} else {
    holder.txtPosition.setTextColor(R.color.your_default);
} 
```

# windows-phone-7 - 最佳实践：Window Phone，如何与服务器同步文件

> ID：14500680
> 
> 赞同：0
> 
> 时间：2013-01-24T11:48:57.400
> 
> 标签：windows-phone-7, windows-phone, sync

我打算用 C# 在 WP 7.5 上编写一些应用程序，这些应用程序应该将一些用户输入存储在文件中，稍后这些文件应该与服务器同步。

但是，互联网连接可能并不总是可用。因此，应用程序应该先在内部存储数据，然后再在后台与服务器同步。

现在，是否可以进行后台同步？如果是，是否有任何预建功能可以做到这一点？否则，执行此类同步任务的“最佳实践”是什么？

我们的文件服务器的协议可以根据这个任务来选择。我们甚至可以使用 SQL 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:57:02.633

您需要阅读“Windows Phone 的后台文件传输”：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202955(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202955(v=vs.105).aspx)

特别是阅读和理解有关数据大小、持续时间等的政策和限制。

请注意，此主题是更广泛主题“Windows Phone 多任务处理”的一部分，其中包括后台文件传输、任务等：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/hh202866 (v =vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202866(v=vs.105).aspx)

# c - c - 为什么我会得到这个 SIGSEGV？我怎么知道一个结构可以获得多少内存？

> ID：14500682
> 
> 赞同：0
> 
> 时间：2013-01-24T11:48:58.840
> 
> 标签：c

我在这里粘贴了我的代码：http: [//pastebin.com/tPvRHrkW](http://pastebin.com/tPvRHrkW) 编译为`gcc`. 似乎发生错误是因为我为编译器定义了一个太大的结构。我将结构取出到另一个单独的源文件中并对其进行了测试，这次没有发生错误。那么为什么我得到 SIGSEGV 并且对结构的大小有任何限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:53:03.447

结构的大小没有限制，问题在于你如何使用它。`MGraph`是巨大的结构类型，在两个地方你以将它放在堆栈上的方式使用它；一次作为函数的参数，再次作为局部变量。堆栈空间通常不允许增长到巨大的比例。

我建议进行两项更改。首先，对这种类型的实例使用动态分配。其次，将指针作为参数传递给它，而不是实际数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:52:20.250

通常，您仅受可用内存和系统寻址能力的限制。但是，在您的情况下，您要声明一个局部变量，该变量将在堆栈上分配。堆栈的容量可能要有限得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T11:53:42.607

`#define MAXV 20000`..`int edges[MAXV][MAXV];`

堆栈上的内存为 20000 * 20000 * 4 ~ 1.5 Gigs。

您可能应该改用[malloc](http://www.cplusplus.com/reference/cstdlib/malloc/)和动态分配。

# gnuplot - 在 Gnuplot 中重新缩放矢量的简单方法？

> ID：14500687
> 
> 赞同：1
> 
> 时间：2013-01-24T11:49:20.590
> 
> 标签：gnuplot

我很高兴使用`with vectors`Gnuplot 中的选项。但是，在大多数情况下，需要重新调整矢量以形成漂亮的图形。

目前，我正在这样做

```
plot "data" using 1:2:($3*scale):($4*scale) with vectors 
```

理想情况下，我只想`using`手动跳过并编写一次矢量长度的比例，这样我就可以使用

```
plot "data" with vectors scale 0.1 
```

也许有一个我不知道的自动缩放选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:56:19.763

据我所知，没有捷径可走。您可能会做的最好的事情是使用宏：

```
set macros
with_vectors = "using 1:2:($3*scale):($4*scale) w vectors"
scale = 0.1
plot "data" @with_vectors
scale = 0.2
plot "data" @with_vectors 
```

# java - Camel SimpleRegistry 和 DI

> ID：14500689
> 
> 赞同：1
> 
> 时间：2013-01-24T11:49:30.720
> 
> 标签：java, apache-camel, middleware

如果我有一个`OrderHandler`界面：

```
public interface OrderHandler {
    public void handle(Order order);
} 
```

并且有几个实现（`DefaultOrderHandler`, `ComplexOrderHandler`,`SpecialOrderHandler`等），我如何指定在 Camel 中使用哪一个`SimpleRegistry`？例如，如果我有以下路线：

```
from("direct:pointA")
    .bean(OrderHandler.class)
    .to("direct:pointB"); 
```

如何指定 a `SimpleRegistry`，以及如何`DefaultOrderHandler`在指定类型处理器时将该注册表配置为“注入” a `bean(OrderHandler.class)`？

我问是因为能够`DummyOrderHandler`在测试期间注入 a 并在生产期间注入真正的 impl 会很好（对于单元测试）。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:58:18.517

使用时

```
bean(MyClass.class) 
```

然后通常类类型（例如 MyClass.class）必须是一个类（不是抽象的，不是接口），因为 Camel 将使用它来实例化一个实例。

但是，如果被调用的方法是静态方法，那么 Camel 不需要实例化对象，因此该类可以是抽象的等。您可以提供方法名称作为第二个参数来确定要调用的方法。

在您的情况下，有 3 种不同的接口实现。您需要指定要使用的类型

```
bean(MyImpl.class) 
```

或者通过一个名字来引用一个bean来在注册表中查找，或者提供一个对象实例例如：

```
OrderHandler handler  = new DummyOrderHandler;
...
bean(handler) 
```

由于它只是 Java 代码，如果您使用的是 RouteBuilder，那么您可以为 OrderHandler 设置 getter/setter，然后在 RouteBuilder 上设置所需的实现

```
RouteBuilder myBuilder = new MyRouteBuilder();
myBuilder.setOrderHandler(new DummyOrderHandler());
... 
```

然后在 MyRouteBuilder 的配置方法中，您可以使用

```
bean(handler) 
```

# javascript - 在 JavaScript 中计算数组的差异补丁

> ID：14500690
> 
> 赞同：5
> 
> 时间：2013-01-24T11:49:37.810
> 
> 标签：javascript, arrays, diff, patch

我想生成一个对象，该对象将能够有效地作为补丁应用到数组 A 以生成数组 B。

给定一个比较两个值的函数`isSame`，如果它们相同则返回 true，否则返回 false（其目的是比较两个数组元素），是否有一种已知的算法来计算两个数组之间的差异并返回一个列表具体的区别？差异将由以下集合组成：*在索引 Y 处删除的 X 元素和在索引 Y*处*插入的以下元素*。

我已经写了一些类似的东西，但目前它有问题，我在推进它时遇到了麻烦，而且我担心我正在重新发明轮子，而其他人可能已经这样做了。[http://jsfiddle.net/G6tYt/1/](http://jsfiddle.net/G6tYt/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:04:35.653

如果您希望比较既深入又能容忍对象和数组，那么我不久前写的这个工具可能有用：

[https://github.com/danski/spahql/blob/master/src/SpahQL.DataHelper.js#L18](https://github.com/danski/spahql/blob/master/src/SpahQL.DataHelper.js#L18)

```
SpahQL.DataHelper.compare(
  {"a": "aval", "b": "bval", "c": "cval", "arr": [0,1,2]},
  {"a": "modified", "c": "cval", "d": "added", "arr": [0,1,2,3]}
);
// -> {"/": "~", "/a": "~", "/b": "-", "/d": "+", "/arr": "~", "/arr/3": "+"} 
```

# joomla - 我如何在不同的模块中分离 joomla 子菜单

> ID：14500691
> 
> 赞同：0
> 
> 时间：2013-01-24T11:49:38.797
> 
> 标签：joomla, joomla2.5

我有 3 个级别的菜单，我需要在不同的模块中显示每个子菜单。IE，

这是一个 3 级菜单，我需要在 MODULE_ONE 中显示主菜单，在 MODULE_TWO 中显示第二级，在 MODULE_THREE 位置显示第三级，没有树结构。模块 三个模块处于不同的位置。我如何在 joomla 2.5 中实现这一点。我已经检查并能够在第二级显示，但无法显示第三级。如果有请回复

谢谢你。![在此处输入图像描述](../Images/d7fc6a902004b3f3c7deab22d2713421.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:13:43.717

您可以在同一个菜单的3个模块中显示3个级别，当然第二级的内容将由第一级的选择决定；这也适用于第三级。

但是，请注意 mod_menu 过去没有足够的缓存支持，所以一定要禁用模块上的缓存，否则它们将无法工作或会很有趣（不显示当前页面突出显示...更改第二个菜单“ 20" 当您单击第一个菜单 "3" ...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:22:26.887

[试试 RocketTheme 的RokNavMenu](http://www.rockettheme.com/extensions-downloads/free/1048-roknavmenu)的 Splitmenu 配置

[这是](http://www.rockettheme.com/forum/index.php?f=208&t=152890&p=754210&hilit=3%20level%20splitmenu&rb_v=viewtopic#p754210)关于如何实现这一点的讨论。

# jsf-2 - 为什么 JBoss 的 jsf 实现没有 javax.faces.model.DataModel？

> ID：14500693
> 
> 赞同：0
> 
> 时间：2013-01-24T11:49:41.767
> 
> 标签：jsf-2, jboss7.x

我正在尝试将应用程序迁移到 JBoss 7.1.1 Final。我使用的是 mojarra 2.0.2 版本，可以在 pom.xml 中看到：

```
<dependency>
<groupId>com.sun.faces</groupId>
<artifactId>jsf-api</artifactId>
<version>2.0.2</version>
<scope>provided</scope>
</dependency>
<dependency>
<groupId>com.sun.faces</groupId>
<artifactId>jsf-impl</artifactId>
<version>2.0.2</version>
<scope>provided</scope>
</dependency> 
```

使用 JBoss 7.1.1 Final jsf 嵌入式版本 (jsf-impl-2.1.7-jbossorg-2)，AS 显示此异常：

```
 09:21:16,456 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC00001: Failed to start service jboss.deployment.subunit."Projeto316Aplicacao.ear"."Projeto316Apresentacao-1.0.0-SNAPSHOT.war".POST_MODULE: org.jboss.msc.service.StartException in service jboss.deployment.subunit."Projeto316Aplicacao.ear"."Projeto316Apresentacao-1.0.0-SNAPSHOT.war".POST_MODULE: Failed to process phase POST_MODULE of subdeployment "Projeto316Apresentacao-1.0.0-SNAPSHOT.war" of deployment "Projeto316Aplicacao.ear"
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885) [rt.jar:1.6.0_07]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907) [rt.jar:1.6.0_07]
at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_07]
Caused by: java.lang.NoClassDefFoundError: javax/faces/model/DataModel
at java.lang.Class.getDeclaredConstructors0(Native Method) [rt.jar:1.6.0_07]
at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389) [rt.jar:1.6.0_07]
at java.lang.Class.getConstructor0(Class.java:2699) [rt.jar:1.6.0_07]
at java.lang.Class.getConstructor(Class.java:1657) [rt.jar:1.6.0_07]
at org.jboss.as.web.deployment.jsf.JsfManagedBeanProcessor.deploy(JsfManagedBeanProcessor.java:108)
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
... 5 more
 Caused by: java.lang.ClassNotFoundException: javax.faces.model.DataModel from [Module "deployment.Projeto316Aplicacao.ear:main" from Service Module Loader]
at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398) [jboss-modules.jar:1.1.1.GA]
at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120) [jboss-modules.jar:1.1.1.GA]
at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) [rt.jar:1.6.0_07]
... 11 more 
```

请有人知道为什么会发生这种情况以及如何解决它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:59:16.023

JBoss AS 7.1.1.Final 中 java.lang.NoClassDefFoundError: javax/faces/model/DataModel 异常的解决方案正是@BalusC 之前所说的：

> 看起来像 JBoss 类加载中的一个错误：community.jboss.org/thread/177061 如果您在 EAR/lib 中提供 JSF API/impl（实际上是错误的地方），那么它就解决了。– BalusC 1 月 24 日 12:09

如果您使用的是maven，只需放

```
<dependency>
    <groupId>javax.faces</groupId>
    <artifactId>jsf-impl</artifactId>
    <scope>compile</scope>
</dependency>
....
<defaultLibBundleDir>lib</defaultLibBundleDir> 
```

另一种解决方案（这不是一个好的做法）是将 jboss-as-7.1.1.Final\modules\com\sun\jsf-impl\main 中的 jar 替换为 jsf 规范的另一个实现。

# c# - 尝试访问派生类中基类属性的受保护访问器时出错

> ID：14500694
> 
> 赞同：4
> 
> 时间：2013-01-24T11:49:45.057
> 
> 标签：c#, properties

```
 namespace PalleTech
 {          
     public class Parent
        {
            private int test = 123;
            public virtual int TestProperty
            {
                // Notice the accessor accessibility level.
                 set {
                    test = value;
                }

                // No access modifier is used here.
               protected get { return test; }
            }
        }
        public class Kid : Parent
        {
            private int test1 = 123;
            public override int TestProperty
            {
                // Use the same accessibility level as in the overridden accessor.
                 set { test1 = value / 123; }

                // Cannot use access modifier here.
               protected get { return 0; }
            }
        }
        public class Demo:Kid
        {
            public static void Main()
            {
                Kid k = new Kid();
                Console.Write(k.TestProperty);

            }
        }
    } 
```

> 错误 1 ​​无法通过“PalleTech.Kid”类型的限定符访问受保护的成员“PalleTech.Parent.TestProperty”；限定符必须是“PalleTech.Demo”类型（或派生自它）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:58:36.150

[来自 MSDN 文章](http://msdn.microsoft.com/en-us/library/bcd5672a.aspx) “只有通过派生类类型进行访问时，才能在派生类中访问基类的受保护成员。”

在这里，您正在访问 Kid 的受保护设置器及其实例。您必须创建 Demo 类的实例并通过它访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:57:14.667

`TestProperty`类中的getter`Kid`是受保护的，这意味着如果您编写一个派生自`Kid`类的类，您可以访问`TestProperty`；如果您创建`Kid`类的实例，则无法访问它。

`protected`您可以通过从两个类的设置器中删除来更改行为；

```
public class Parent
{
    private int test = 123;
    public virtual int TestProperty
    {
        // Notice the accessor accessibility level.
        set
        {
            test = value;
        }

        // No access modifier is used here.
        get { return test; }
    }
}
public class Kid : Parent
{
    private int test1 = 123;
    public override int TestProperty
    {
        // Use the same accessibility level as in the overridden accessor.
        set { test1 = value / 123; }

        // Cannot use access modifier here.
        get { return 0; }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:56:39.053

您也必须将评估器设置为受保护。getter/setter 不能具有比属性本身更少限制的访问修饰符。

# activerecord - 如何在php中使用adodb活动记录连接两个表

> ID：14500696
> 
> 赞同：2
> 
> 时间：2013-01-24T11:49:49.453
> 
> 标签：activerecord, adodb

请告诉我如何在 adodb 活动记录中使用以下查询..

```
SELECT *
FROM students
JOIN class
ON student_class_id = class_id; 
```

谢谢..

# php - 在 Twig 中解码 JSON

> ID：14500698
> 
> 赞同：32
> 
> 时间：2013-01-24T11:50:03.800
> 
> 标签：php, symfony, twig

是否可以在树枝中解码 JSON？谷歌搜索似乎对此没有任何帮助。在 Twig 中解码 JSON 没有意义吗？

* * *

我正在尝试访问 Symfony2 的实体字段类型（[实体字段类型](http://symfony.com/doc/2.0/reference/forms/types/entity.html)）上的 2 个实体属性。

在遇到 2 个之前的 SO 问题（[Symfony2 entity field type alternatives to "property" or "__toString()"?](https://stackoverflow.com/q/9915968/1349295)和[Symfony 2 Create a entity form field with 2 properties](https://stackoverflow.com/q/13070595/1349295)）后，建议向实体添加一个额外的方法来检索自定义字符串而不是实体属性，我想到（并且确实）返回一个表示对象实例的 JSON 字符串。

在实体类的某处：

```
/**
 * Return a JSON string representing this class.
 */
public function getJson()
{
   return json_encode(get_object_vars($this));
} 
```

并以形式（类似）：

```
$builder->add('categories', 'entity', array (
...
'property' => 'json',
...
)); 
```

之后，我希望`json_decode`它在 Twig 中......

```
{% for category in form.categories %}
    {# json_decode() part is imaginary #}
    {% set obj = category.vars.label|json_decode() %}
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-24T15:33:37.967

如果您[扩展 twig](https://web.archive.org/web/20160219234657/http://ahoj.io/how-to-make-twig-extension-for-symfony2) ，这很容易。

首先，创建一个包含扩展的类：

```
<?php

namespace Acme\DemoBundle\Twig\Extension;

use Symfony\Component\DependencyInjection\ContainerInterface;  
use \Twig_Extension;

class VarsExtension extends Twig_Extension
{
    protected $container;

    public function __construct(ContainerInterface $container) 
    {
        $this->container = $container;
    }

    public function getName() 
    {
        return 'some.extension';
    }

    public function getFilters() {
        return array(
            'json_decode'   => new \Twig_Filter_Method($this, 'jsonDecode'),
        );
    }

    public function jsonDecode($str) {
        return json_decode($str);
    }
} 
```

`Services.xml`然后，在您的文件中注册该类：

```
<service id="some_id" class="Acme\DemoBundle\Twig\Extension\VarsExtension">
        <tag name="twig.extension" />
        <argument type="service" id="service_container" />
</service> 
```

然后，在你的树枝模板上使用它：

```
{% set obj = form_label(category) | json_decode %} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-16T11:35:15.930

以上所有内容的**替代方案**。
而且我不知道这是否是最佳解决方案，但它确实**有效**。

1）创建一个**辅助函数**并**注册**该函数。

```
<?php
function twig_json_decode($json)
{
    return json_decode($json, true);
} 
```

**2）在你的树枝文件**中使用这个功能。

```
{% set res = twig_json_decode(json) %}
# above will return an array which can be iterated

{% for r is res %}
    {{ r }}
{% endfor %} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-07T14:25:14.570

我想出了一种获取我的 JSON 的方法，我想我会在这里分享它，以防它对其他人有用。

所以在我的情况下，我可能从 mysql 数据库返回了 10 条记录（布局），并且每一行都有一个名为 properties 的字段，它是一个 json 字符串。因此，我可以轻松地提取记录并将它们发送到模板，如下所示：

```
echo $twig->render('template.html.twig', array(
      "layouts" => $layouts,
)); 
```

到目前为止一切顺利，但是当我在 twig 中执行 {% for layout in layouts %} 时，无法访问属性字段项，因为它们仍然是 json 字符串。

因此，就在我将 $layouts 传递给 twig 模板之前，我执行了以下操作：

```
foreach($layouts as $i => $v)
{
      $layouts[$i]->decoded = json_decode($v->getProperties());
} 
```

通过这样做，我在我的对象中动态创建了一个名为“decoded”的变量，其中包含 json 解码对象。

所以现在在我的模板中，我可以通过 {{ layout.decoded.whatever }} 访问我的 json 项目

这可能有点 hacky，而且不是每个人都想得到一个好的解决方案。我对我来说工作得很好，开销很小，这意味着我不必在延伸树枝时弄乱它，因为我在它到达模板之前正在做这项工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-07T18:27:10.687

Symfony2.8 或 Symfony3 的更新代码：

```
<?php

namespace Acme\DemoBundle\Twig\Extension;

use Symfony\Component\DependencyInjection\ContainerInterface;  
use \Twig_Extension;

class VarsExtension extends Twig_Extension
{
    protected $container;

    public function __construct(ContainerInterface $container) 
    {
        $this->container = $container;
    }

    public function getName() 
    {
        return 'some.extension';
    }

    // Note: If you want to use it as {{ json_decode(var) }} instead of 
    // {{ var|json_decode }} please use getFunctions() and 
    // new \Twig_SimpleFunction('json_decode', 'json_decode') 
    public function getFilters() {
        return [
            // Note that we map php json_decode function to 
            // extension filter of the same name
            new \Twig_SimpleFilter('json_decode', 'json_decode'),
        ];
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-29T19:12:31.530

这是一个老问题，但我正在添加我的解决方案以供记录......只需使用 SimpleFunction 扩展 Twig：

```
// Return a string of separated values from a JSON string
// Can optionally specify a separator.  If none provided, ", " is used.
$function = new Twig_SimpleFunction('json_to_list', function($json, $separator = ", ")
{
    $result = "";
    $array = json_decode($json, true);
    foreach ($array as $item)
    {
        if ($result != "") { $result .= $separator; }           
        $result .= $item;
    }
    return $result;
});
$twig->addFunction($function); 
```

用法：

在调用 Twig 渲染之前将 a_json_variable 设置为字符串 '["1","2","3","4","5"]'。

树枝模板：

```
The values are: {{ json_to_list(a_json_variable) }} 
```

会产生

```
The values are: 1, 2, 3, 4, 5 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-04T07:42:21.920

在我的情况下，我的实体中有一个 JsonArray，然后我在我的实体中添加了一个方法

```
<?php
namespace ACME\DefaultBundle\Entity;
/*...*/    
public function getDecodedPath()
{
    return json_decode($this->path);
} 
```

# php - 阻止其他用户浏览我网站的某些页面

> ID：14500702
> 
> 赞同：1
> 
> 时间：2013-01-24T11:50:08.850
> 
> 标签：php

在我的网站中，我在很多地方都使用了 ajax……但问题是文件，比如说 some_ajax_file.php，在源代码中是可见的……我希望其他用户不要只是在 url 中输入这个然后去到这个页面......如果他们这样做，他们将被重定向到另一个页面......

我在该 ajax 页面上尝试了以下代码：

```
function curPageName() {
     return substr($_SERVER["SCRIPT_NAME"],strrpos($_SERVER["SCRIPT_NAME"],"/")+1);
}

$cur_page=curPageName(); 
```

并检查了它

```
if($cur_page=="some_ajax_file.php")
//then redirect... 
```

如果在 url 中键入 some_ajax_file.php，它就可以工作......但问题是我使用这个 some_ajax_file.php 的 ajax 函数不起作用......请帮助我......我卡住了...... .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:59:11.040

**登录时创建会话**

```
<?php
session_start();
// store session data
$_SESSION['Username']= Userid;
?> 
```

并检查该页面上可用的会话...

```
session_start();
if(empty($_SESSION['Username'])) {
    //Redirect them to common page....
} 
```

如果会话可用，则显示页面

否则将它们重定向到登录页面....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:10:08.090

您必须搜索`$_SERVER['HTTP_X_REQUESTED_WITH']`

```
if (isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) === 'xmlhttprequest')
{
   // I'm AJAX!
}
else
{
     header();
     die();
}
```

# r - 沿数组中的 n 个维度之一选择

> ID：14500707
> 
> 赞同：14
> 
> 时间：2013-01-24T11:50:23.323
> 
> 标签：r, multidimensional-array

我在 R 中有一个数组，由这样的函数创建：

```
A <- array(data=NA, dim=c(2,4,4), dimnames=list(c("x","y"),NULL,NULL)) 
```

我想选择一维，所以对于上面的例子，我会有：

```
A["x",,]
dim(A["x",,])    #[1] 4 4 
```

如果我事先不知道我的数组可能有多少维（除了我要选择的命名维），有没有一种方法可以概括？我想编写一个函数，该函数接受可能格式化为上述 A 的输入，或者：

```
B <- c(1,2)
names(B) <- c("x", "y")

C <- matrix(1, 2, 2, dimnames=list(c("x","y"),NULL)) 
```

## 背景

一般背景是我正在研究 ODE 模型，因此对于 deSolve 的 ODE 函数，它必须采用我当前状态的单个命名向量。对于其他一些函数，比如计算相平面/方向场，有一个更高维的数组来应用微分方程会更实用，而且我想避免拥有相同函数的多个副本，只是使用不同的我要选择的维度后的逗号数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T13:19:29.120

我花了很多时间为 plyr 找出最快的方法，而我能想到的最好的方法是手动构建对以下的调用`[`：

```
index_array <- function(x, dim, value, drop = FALSE) { 
  # Create list representing arguments supplied to [
  # bquote() creates an object corresponding to a missing argument
  indices <- rep(list(bquote()), length(dim(x)))
  indices[[dim]] <- value

  # Generate the call to [
  call <- as.call(c(
    list(as.name("["), quote(x)),
    indices,
    list(drop = drop)))
  # Print it, just to make it easier to see what's going on
  print(call)

  # Finally, evaluate it
  eval(call)
} 
```

[（您可以在https://github.com/hadley/devtools/wiki/Computing-on-the-language](https://github.com/hadley/devtools/wiki/Computing-on-the-language)找到有关此技术的更多信息）

然后，您可以按如下方式使用它：

```
A <- array(data=NA, dim=c(2,4,4), dimnames=list(c("x","y"),NULL,NULL))
index_array(A, 2, 2)
index_array(A, 2, 2, drop = TRUE)
index_array(A, 3, 2, drop = TRUE) 
```

如果您想基于多个维度进行提取，它也会以一种直接的方式进行概括，但您需要重新考虑函数的参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T12:32:20.287

我写了这个通用函数。不一定超快，但`arrayInd`矩阵索引的一个很好的应用程序：

```
extract <- function(A, .dim, .value) {

    val.idx  <- match(.value, dimnames(A)[[.dim]])
    all.idx  <- arrayInd(seq_along(A), dim(A))
    keep.idx <- all.idx[all.idx[, .dim] == val.idx, , drop = FALSE]
    array(A[keep.idx], dim = dim(A)[-.dim], dimnames = dimnames(A)[-.dim])

} 
```

例子：

```
A <- array(data=1:32, dim=c(2,4,4),
           dimnames=list(c("x","y"), LETTERS[1:4], letters[1:4]))

extract(A, 1, "x")
extract(A, 2, "D")
extract(A, 3, "b") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T12:20:25.487

也许有一种更简单的方法，但这有效：

```
do.call("[",c(list(A,"x"),lapply(dim(A)[-1],seq)))
     [,1] [,2] [,3] [,4]
[1,]   NA   NA   NA   NA
[2,]   NA   NA   NA   NA
[3,]   NA   NA   NA   NA
[4,]   NA   NA   NA   NA 
```

让我们将其概括为一个可以从任何维度提取的函数，不一定是第一个：

```
extract <- function(A, .dim, .value) {
    idx.list <- lapply(dim(A), seq_len)
    idx.list[[.dim]] <- .value
    do.call(`[`, c(list(A), idx.list))
} 
```

例子：

```
A <- array(data=1:32, dim=c(2,4,4),
           dimnames=list(c("x","y"), LETTERS[1:4], letters[1:4]))

extract(A, 1, "x")
extract(A, 2, "D")
extract(A, 3, "b") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-19T23:56:02.647

除了其他非常有用的数组操作函数之外， abind 包还有一个函数 , 来执行此[操作](https://cran.r-project.org/package=abind)：`asub`

```
library(abind)
A <- array(data=1:32, dim=c(2,4,4),
           dimnames=list(c("x","y"), LETTERS[1:4], letters[1:4]))

asub(A, 'x', 1)
asub(A, 'D', 2)
asub(A, 'b', 3) 
```

它允许在多个维度上建立索引：

```
asub(A, list('x', c('C', 'D')), c(1,2)) 
```

# javascript - 在 jquery 中显示垂直选项卡

> ID：14500718
> 
> 赞同：0
> 
> 时间：2013-01-24T11:50:53.170
> 
> 标签：javascript, jquery-ui

我想使用垂直标签，我已经实现了文档中显示的垂直标签。它工作正常。我想像 dhtmlx 垂直标签一样在垂直方向显示标签。 [像这样](http://mehdi.biz/blog/2010/02/05/vertical-tabs-for-jquery-lovers/) 我想在右侧显示标签并在左侧显示内容。你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:00:45.490

在这里，我将菜单的位置更改为右侧`float: right`

以下提供的更新更改`CSS`将正常工作

```
#vtab > ul {
    float: right;
}

#vtab > div {
    margin-right: 110px;
} 
```

这是[小提琴](http://jsfiddle.net/qsTAU/)

我建议您查看以下链接，这些链接对布局很有用

[十步学习 CSS 定位](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

[如何使用 CSS 定位创建没有表格的布局](http://webdesign.about.com/od/css/a/aa102102a.htm)

# c# - 如何进行正确的 Parallel.ForEach、锁定和进度报告

> ID：14500721
> 
> 赞同：14
> 
> 时间：2013-01-24T11:51:05.990
> 
> 标签：c#, locking, task-parallel-library

我正在尝试实现`Parallel.ForEach`模式并跟踪进度，但我缺少一些关于锁定的东西。以下示例在 时计数为 1000 `threadCount = 1`，但在`threadCount`> 1 时不计数。正确的方法是什么？

```
class Program
{
   static void Main()
   {
      var progress = new Progress();
      var ids = Enumerable.Range(1, 10000);
      var threadCount = 2;

      Parallel.ForEach(ids, new ParallelOptions { MaxDegreeOfParallelism = threadCount }, id => { progress.CurrentCount++; });

      Console.WriteLine("Threads: {0}, Count: {1}", threadCount, progress.CurrentCount);
      Console.ReadKey();
   }
}

internal class Progress
{
   private Object _lock = new Object();
   private int _currentCount;
   public int CurrentCount
   {
      get
      {
         lock (_lock)
         {
            return _currentCount;
         }
      }
      set
      {
         lock (_lock)
         {
            _currentCount = value;
         }
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-24T12:48:33.033

`count++`从多个线程（共享变量）调用类似的东西的常见问题`count`是可能发生以下事件序列：

1.  线程 A 读取 的值`count`。
2.  线程 B 读取 的值`count`。
3.  线程 A 递增其本地副本。
4.  线程 B 递增其本地副本。
5.  线程 A 将增加的值写回`count`.
6.  线程 B 将增加的值写回`count`.

这样，线程 A 写入的值被线程 B 覆盖，所以该值实际上只增加了一次。

您的代码在操作 1、2 ( `get`) 和 5、6 ( ) 周围添加了锁`set`，但这并不能阻止有问题的事件序列。

您需要做的是锁定整个操作，以便在线程 A 递增值时，线程 B 根本无法访问它：

```
lock (progressLock)
{
    progress.CurrentCount++;
} 
```

如果你知道你只需要递增，你可以创建一个`Progress`封装这个的方法。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-05-28T16:58:27.177

老问题，但我认为有更好的答案。

您可以使用这种方式报告进度`Interlocked.Increment(ref progress)`，而不必担心将写操作锁定为进度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-25T08:53:50.320

最简单的解决方案实际上是用字段替换属性，并且

```
lock { ++progress.CurrentCount; } 
```

（我个人更喜欢前增量的外观而不是后增量，因为“++。”这件事在我的脑海中发生了冲突！但后增量当然会起作用。）

这将具有减少开销和争用的额外好处，因为更新字段比调用更新字段的方法更快。

当然，将其封装为属性也有优势。IMO，由于字段和属性语法相同，因此当属性自动实现或等效时，在字段上使用属性的唯一优势是，当您可能希望部署一个程序集而无需构建和部署依赖项时重新组装。否则，您不妨使用更快的字段！如果需要检查值或添加副作用，您只需将字段转换为属性并再次构建。因此，在许多实际情况下，使用字段不会受到任何惩罚。

然而，我们生活在这样一个时代，许多开发团队都在教条主义地运作，并使用 StyleCop 之类的工具来强制执行他们的教条主义。这样的工具，不像程序员，不够聪明，无法判断什么时候使用字段是可以接受的，所以“简单到连 StyleCop 都可以检查的规则”总是变成“将字段封装为属性”，“不要使用公共字段”等等...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T12:27:13.960

从属性中删除锁定语句并修改主体：

```
 object sync = new object();
        Parallel.ForEach(ids, new ParallelOptions {MaxDegreeOfParallelism = threadCount},
                         id =>
                             {
                                 lock(sync)
                                 progress.CurrentCount++;
                             }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T12:48:03.270

这里的问题`++`不是原子的——一个线程可以在另一个线程读取值和存储（现在不正确的）递增值之间读取和递增值。这可能是因为有一个属性包裹着你的`int`.

例如

```
Thread 1        Thread 2
reads 5         .
.               reads 5
.               writes 6
writes 6!       . 
```

setter 和 getter 周围的锁对此无济于事，因为没有什么可以阻止它们的`lock`块被乱序调用。

通常，我建议使用`Interlocked.Increment`，但您不能将其与属性一起使用。

相反，您可以公开`_lock`并让`lock`块在`progress.CurrentCount++;`调用周围。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-23T10:32:43.393

最好将任何数据库或文件系统操作存储在本地缓冲区变量中，而不是锁定它。锁定会降低性能。

# c# - 检索 excel.ActivePrinter 的端口名称

> ID：14500722
> 
> 赞同：1
> 
> 时间：2013-01-24T11:51:12.670
> 
> 标签：c#, excel, printing, wmi, wmi-query

嗨，对于在 excel 上工作的打印方法，我需要像这样的打印机名称和端口名称：“打印机 On NE3”只是作为示例。问题是，我使用虚拟打印机并且端口不同，几乎每次我需要使用它时。

该程序需要在后台运行，因此打开对话框进行选择不是一个选项。我还尝试使用以下方法从 WMI 检索端口名称：

```
 protected string FindPrinterWithPort(string printerName)
    {
        StringBuilder query = new StringBuilder();
        query.Append("SELECT * FROM Win32_Printer ");
        query.Append("WHERE DeviceID = \""+printerName+"\"");
        ObjectQuery objectQuery = new ObjectQuery(query.ToString());
        var searcher = new ManagementObjectSearcher(objectQuery);
        foreach (ManagementObject mo in searcher.Get())
        {
            return printerName +" On "+ mo["PortName"];
        }
        return string.Empty;
    } 
```

我收到的端口名称为我提供了虚拟打印机程序的完整路径。我以前用下面的方法为excel更改打印机，我一直知道它们最终应该被更改，代码既不快也不好，但它工作了一段时间，直到我把它变成多线程并且它只是一个很大的封锁. 因为我需要锁定这些方法而不是更改 Windows 中的默认打印机。

```
 private bool SetPrinterForExcel(string printerName){
        string[] ports = new string[]{"Ne00:", "Ne01:", "Ne02:", "Ne03:", "Ne04:",
            "Ne05:", "Ne06:", "Ne07:", "Ne08:", 
               "Ne09:", "Ne10:", "Ne11:", "Ne12:", 
               "Ne13:", "Ne14:", "Ne15:", "Ne16:", 
               "LPT1:", "LPT2:", "File:", "SMC100:"};
        foreach (string port in ports)
        {
            string printerWithPort = printerName + " On " + port;
            bool success = SetAndTestPrinter(printerWithPort);
            if(success)
                return true;

        }
        return false;
    }
    private bool SetAndTestPrinter(string printerWithPort)
    {
        try
        {
            excel.ActivePrinter = printerWithPort;
            return true;
        }
        catch
        {
            return false;
        }
    } 
```

任何想法如何检索端口，或者是否有办法从 WMI 查询中获取正确的端口。

提前致谢

编辑：

我没有得到它的工作，我现在所做的打印是更改 Windows 上的默认打印机，然后在我的 excel 对象上执行打印方法。我使用以下方法更改了它：

```
 [DllImport("winspool.drv", CharSet = CharSet.Auto, SetLastError = true)]
    public static extern bool SetDefaultPrinter(string Name); 
```

我锁定它的方法并打印。我曾考虑过尝试锁定并保存 ActivePrinter，即使我相信性能也会一样糟糕。因为锁定会一直保留到更改默认打印机（有时需要长达 1 秒），所以在多线程环境中这是一个非常长的锁定。

```
 string printernamewithPort = string.Empty;
 lock (ActivePrinterLock)
 {
    SetDefaultPrinter(printername);
    printernamewithPort = excel.ActivePrinter;
 }
 foreach (Worksheet worksheet in workbook.Worksheets)
 {
    worksheet.PageSetup.PaperSize = XlPaperSize.xlPaperA4;
    worksheet.PageSetup.Orientation = XlPageOrientation.xlPortrait;
    worksheet.PageSetup.FitToPagesWide = 1;

    worksheet.PageSetup.FitToPagesTall = false;
    worksheet.PrintOutEx(ActivePrinter: printernamewithPort,Collate: true, Preview: false, PrintToFile: false);
 } 
```

我不知道的是，如果默认打印机立即从另一个线程更改，如果它丢失了给虚拟打印机的端口。我没有对此进行适当的测试。在正常情况下，我的方法 FindPrinterWithPort 似乎可以工作。

# ruby-on-rails-3.2 - simple_form 将 check_boxes 集合映射到整数掩码

> ID：14500723
> 
> 赞同：0
> 
> 时间：2013-01-24T11:51:13.233
> 
> 标签：ruby-on-rails-3.2, simple-form

我想在一个 Rails 应用程序中扩展注册表单，以便用户能够提交他们的角色。

它基本上在表单中添加了几个复选框。我正在使用 simple_form gem，它看起来像这样：

```
 = f.input :role_mask, as: :check_boxes, label: false,
        collection: ['Investor', 'Mentor', 'Developer', 'Other'] 
```

为了将这些信息保存在数据库中，我`role_mask:integer`在 User 模型中添加了字段。

因此，如果用户检查了`Mentor`和`Developer`，它应该存储`6`在`role_mask`字段中（它的掩码 = 0110）。

我知道，这个映射可以在控制器内部完成，但由于我正在为这个应用程序做出贡献，我不想触摸控制器。所以我想知道 simple_form 是否提供了一些工具来解决这个问题，或者我应该使用 JavaScript 来进行映射？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:42:54.957

你说的对。如果您不想在控制器中执行此操作，则必须在客户端执行此操作。没有办法 simple_form 生成 javascript，所以你必须自己做。

# wcf - WCF 可扩展性 – 单声道中的 IInstanceProvider

> ID：14500730
> 
> 赞同：1
> 
> 时间：2013-01-24T11:51:30.220
> 
> 标签：wcf, mono

我遵循：[这篇文章](http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/31/wcf-extensibility-iinstanceprovider.aspx)并在 WCF 服务中实现了它。它允许我们创建一个没有无参数构造函数的 Service 实例，方法是实现一个 custom `IServiceBehavior`，然后用该 Service Behavior 装饰该服务，而不是例如：

```
[ServiceBehavior]
public class MyService : IMyService 
```

我会

```
[InstanceProviderBehavior]
public class MyService : IMyService 
```

然后我像这样实现 ApplyDispatchBehavior：

```
foreach (ChannelDispatcher cd in serviceHostBase.ChannelDispatchers) {
            foreach (EndpointDispatcher ed in cd.Endpoints) {
                if (!ed.IsSystemEndpoint) {
                    Console.WriteLine("Using InstanceProviderBehaviorAttribute");
                    ed.DispatchRuntime.InstanceProvider = new ServiceInstanceProvider(Configuration.Instance.Container);
                }
            }
        } 
```

并提供我刚刚做的服务实例：

```
public object GetInstance(InstanceContext instanceContext, Message message)
    {
        AlertQueryService result = Container.Resolve<AlertQueryService>();

        return result;
    } 
```

我在 Windows 中运行它，它按预期工作。但是在带有单声道的linux中，它会抛出异常

> 未找到类型 MyService 的异常默认构造函数

这表明单声道可能忽略了 InstanceProviderBehaviorAttribute。

我注意到的另一件事是这条线：

```
Console.WriteLine("Using InstanceProviderBehaviorAttribute"); 
```

服务主机打开时在windows中执行。在 linux 中，当服务主机打开时，它不会在控制台中写入。同样，当我们打开服务主机时不会抛出linux中的异常，而是在`IsInitiating`调用操作时`MyService`：

```
[OperationContract(IsInitiating = true)]
void Initialize(); 
```

这表明使用单声道服务实例仅在我们调用 IsInitiating 操作时才被解析。

知道为什么这适用于 Windows 而不是单声道的 linux 吗？为什么初始化行为不同？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-30T19:01:27.457

尝试在 EndpointBehavior 中添加 InstanceContextProvider 以及 InstanceProvider。如果没有无参数构造函数，ChannelDispatcher.ListenerLoopManager.Setup的[Mono 实现似乎不喜欢没有 InstanceContextProvider 的想法。](https://github.com/mono/mono/blob/master/mcs/class/System.ServiceModel/System.ServiceModel.Dispatcher/ChannelDispatcher.cs#L360)

InstanceContextProvider 本质上可以是一个无操作实现。只要有一个实例，它就会通过 ListenerLoopManagerSetup 中的检查并愉快地继续使用您的 InstanceProvider。

回复：为什么不同的实现...... Mono 是重新实现而不是交叉编译甚至移植。考虑[他们的贡献指南的重要规则部分](http://www.mono-project.com/community/contributing/#important-rules)。直到最近，如果开发人员只要查看 MS 源代码，他们就可以为该项目做出贡献。

# c# - ITextSharp 分页符会创建不需要的空白页面

> ID：14500736
> 
> 赞同：2
> 
> 时间：2013-01-24T11:51:43.933
> 
> 标签：c#, itextsharp

**背景**

我有一个文件，我通过各种步骤建立起来。

在其中一个步骤中，我将内容从我构建的包含内容的章节结构中添加到文档中。

这部分特别简单。它只是将内容添加到文档中。

有时我的结构指定应该有一个分页符，因此 document.NewPage(); 被执行。这通常有效。

我们使用的是 ITextSharp 版本 5.3.2.0。（几个月左右）

**问题**

当 document.NewPage() 被执行并且非常接近文档末尾或者我猜可能只是进入了一个新页面时，我得到一个空白页面，其余内容将添加到下一页。

此时只有文档可以使用，我似乎无法找到一种方法来确定是否应该跳过 document.NewPage() 来解决此错误或问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:14:00.277

这可能是由三件事引起的：

1.  您使用的是非常旧版本的 iTextSharp。如果是这样，请升级到更新版本的 iTextSharp。我们不修复过时的版本。
2.  您正在使用页面事件，与文档中的建议相反，您正在`onStartPage()`方法中添加内容。
3.  您正在使用`writer.setPageEmpty(false);`which 要求 iText 将空页面视为非空页面。

在所有其他情况下，如果您当前位于没有任何内容的页面上，则忽略 newPage() 方法。

# database - 数据类型字符变化没有访问方法“gist”的默认运算符类

> ID：14500739
> 
> 赞同：4
> 
> 时间：2013-01-24T11:51:59.723
> 
> 标签：database, postgresql, exception

我尝试执行以下命令（Postgresql）：

```
ALTER TABLE authentication ADD CONSTRAINT overlapping_times EXCLUDE USING GIST
(method with =,
 authenticator with =,
 box(point(extract(epoch FROM validfrom at time zone 'UTC'),extract(epoch FROM validfrom at time zone 'UTC') ),
     point(extract(epoch FROM validuntil at time zone 'UTC'), extract(epoch FROM validuntil at time zone 'UTC'))) WITH &&
) 
```

我收到以下错误消息：

```
ERROR:  data type character varying has no default operator class for access method "gist"
HINT:  You must specify an operator class for the index or define a default operator class for the data type. 
```

我做了相当广泛的谷歌搜索，但仍然无法将其翻译成简单的英语。我应该怎么做才能执行上面的命令？“method”的类型是字符变化，“authenticator”是文本，“validfrom”，“validuntil”是日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:49:07.400

For `authenticator` and `method`, use a plain unique constraint. text and varchar() are identical for indexing purposes.

This means three alter table statements instead of one, but it should save you these problems. Box should support GiST properly so you should be good there.

In plain English the error is telling you that the data type does not support the index operations expected of the index type. So text strings can't be searched via an index as to whether they overlap, for example. In other words the three cannot be put in the same constraint.

Additionally, keep in mind that UNIQUE constraints are faster than exclude constraints, so are preferred where they work.

# ruby-on-rails - 无法在 linux mint 14.1 中安装 rails 版本 3.2.x

> ID：14500741
> 
> 赞同：0
> 
> 时间：2013-01-24T11:52:04.037
> 
> 标签：ruby-on-rails

我正在使用 Rails 2.3.14 问题是我想将 rails 版本更新到 3.2.x

**1\. sudo gem 更新 rails**

- 更新已安装的宝石 - 无需更新

**2.当我使用 sudo apt-get update rails**

-更新命令不带参数

**3.当我尝试安装 Rails sudo gem install rails --version=3.2.3**

-获取：activesupport-3.2.3.gem (100%) 获取：builder-3.0.4.gem (100%) 获取：activemodel-3.2.3.gem (100%) 获取：rack-1.4.4.gem ( 100%) 获取：sprockets-2.1.3.gem (100%) 获取：actionpack-3.2.3.gem (100%) 获取：activerecord-3.2.3.gem (100%) 获取：activeresource-3.2.3。 gem (100%) 获取：mail-2.4.4.gem (100%) 获取：actionmailer-3.2.3.gem (100%) 获取：thor-0.14.6.gem (100%) 构建原生扩展。这可能需要一段时间... 错误：安装 rails 时出错：错误：无法构建 gem 原生扩展。

```
 /usr/bin/ruby1.9.1 extconf.rb 
```

/usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError) from /usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in`require' from extconf.rb:1:in `'

Gem 文件将继续安装在 /usr/lib/ruby/gems/1.9.1/gems/json-1.7.6 中以供检查。结果记录到 /usr/lib/ruby/gems/1.9.1/gems/json-1.7.6/ext/json/ext/generator/gem_make.out

任何人都可以建议我如何克服这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:58:43.510

首次安装

```
sudo aptitude install ruby1.9.1-dev 
```

会解决你的问题

# python - 你如何在python中添加变量的值？

> ID：14500742
> 
> 赞同：-4
> 
> 时间：2013-01-24T11:52:04.443
> 
> 标签：python

我正在尝试在 python 上添加变量的值，但它似乎不起作用。

我想尝试将变量的值加在一起，即使值是 True 或 False：请 - 任何人都可以帮忙吗？

```
final=0
print ("welcome to my binary converter")
print("first number is the smallest value")
print ("please enter a 0 or a 1 five times")

in1 = input("number 1 please")

if in1 == 1:
    final=final+1
elif in1 == 0:
    final=final+0
elif ValueError
    print("please enter a 1 or a 0")

in2 = input("number 2 please")

if in2 == 1:
    final=final+2
elif in2 == 0:
    final=final+0
elif ValueError
    print("please enter a 1 or a 0")

in3 = input("number 3 please")

if in3 == 1:
    final=final+4
elif in3 == 0:
    final=final+0
elif ValueError
    print("please enter a 1 or a 0")

in4 = input("number 4 please")

if in4 == 1:
    final=final+8
elif in4 == 0:
    final=final+0
elif ValueError
    print("please enter a 1 or a 0")

in5 = input("number 5 please")

if in5 == 1:
    final=final+16
elif in5 == 0:
    final=final+0
elif ValueError
    print("please enter a 1 or a 0")
print(final) 
```

我试过在这个网站上找，python书籍，在线帮助，python老师等。

另外，如果有帮助，我有 3.3.0 版。

雅各布

> > > 欢迎来到我的二进制转换器

第一个数字是最小值

请输入 0 或 1 五次

请1号1

请输入 1 或 0

请2号0

请输入 1 或 0

请3号0

请输入 1 或 0

请4号1

请输入 1 或 0

请给5号1

请输入 1 或 0

0

它似乎没有改变 final 的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:57:10.603

如果两个变量都是整数或字符串，而不是布尔值，则只能将变量添加在一起（好吧，您可以，但它无效）。例如：

```
>>> var = 1
>>> var2 = 4
>>> var + var2
5

>>> stringvar = 'Hello '
>>> stringvar2 = 'world.'
>>> stringvar + stringvar2
'Hello world.'

>>> boolean1 = True
>>> boolean2 = False
>>> boolean1 + boolean2
1 
```

有效的原因是：

```
>>> True == 1
True
>>> False == 0
True 
```

* * *

编辑：

看来你已经添加了更多代码，所以我会告诉你你做错了什么。

您收到语法错误的原因是因为您有`elif ValueError`. 这行不通。首先，甚至没有ValueError，因为你有一个input()。如果要检查一个数字是不是 0 或 1，请执行以下操作：

```
in1 = input("number 1 please")

if in1 == 1:
    final += 1 # I've also changed this. final += 1 is the same as final = final + 1
elif in1 == 0:
    final += 0
elif in1 != 1 or in1 != 0:
    print("please enter a 1 or a 0") 
```

我强烈建议阅读一些 python 教程。这是一些基本语法。

# java - Java，启动线程后获取空值

> ID：14500743
> 
> 赞同：0
> 
> 时间：2013-01-24T11:52:06.193
> 
> 标签：java, android, multithreading

我正在尝试在我的 android 应用程序中的非 GUI 相关类中运行此代码。

```
Thread connection = new Thread(new Runnable() {
                public void run() {
                    try {
                        streamSource = new StreamSource(conn.getInputStream());
                        writer = new CharArrayWriter();
                        StreamResult streamResult = new StreamResult(writer);
                        TransformerFactory factory = TransformerFactory.newInstance();
                        Transformer transformer = factory.newTransformer();
                        transformer.transform(streamSource, streamResult);
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }
              });
        connection.start(); 
```

问题是当我调用*writer*时，我得到一个空值。Writer 被定义为静态全局变量以及 streamSource。我不擅长线程，这似乎我的主线程没有看到我的作家被创建。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:57:25.290

您的变量*Writer*在另一个类（线程）中，因此您无权访问它。它是静态的，这就是理论上能够访问它的原因，但它没有初始化到另一个线程。

请在您需要的地方创建变量 - 或“外包”在那里发生的完整操作。

**编辑**： http: [//developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html) 以下是有关 Android 中的线程和进程的一些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:01:11.653

初始化 writer 对象后启动线程。如果您需要两个线程同时运行，那么简单的方法是运行一个 while 循环检查是否`writer != null`在`Thread.sleep`每次迭代中都使用

# javascript - 无论如何，如何可靠地检测复选框何时被选中？

> ID：14500747
> 
> 赞同：7
> 
> 时间：2013-01-24T11:52:09.140
> 
> 标签：javascript, jquery, event-handling, dom-events

我正在寻找一种方法来检测复选框选中值何时已更改。`addEventListener()`或 jQuery`on()`主要工作，但都不会检测到以这种方式进行的更改：

```
<input type="checkbox" id="testCheckbox">

<!--- some other script further down the page, not under my control -->
<script type="text/javascript">
   document.getElementById("testCheckbox").checked = true;
</script> 
```

有没有办法可以检测到这种变化？即使是只适用于最新浏览器的东西也会很棒。

编辑：要清楚，我想检测页面上任何脚本所做的更改。我不一定能控制它们，所以我不能自己触发事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T11:56:32.257

我不认为有一个优雅的方式。有一个[`Object.observe`](http://weblog.bocoup.com/javascript-object-observe/)关于 Javascript 未来版本的提案。

现在，您应该按照未定义的建议触发更改事件。您还可以定义一个 setter 函数来`change`为您设置值和触发器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T12:16:20.330

对于它的价值（我想说不多），您可以在 IE 中仅使用其专有`propertychange`事件来执行此操作。在其他浏览器中，我很确定您现在唯一的选择是轮询。

演示：http: [//jsfiddle.net/X4a2N/1/](http://jsfiddle.net/X4a2N/1/)

代码：

```
document.getElementById("testCheckbox").onpropertychange = function(evt) {
    evt = evt || window.event;
    if (evt.propertyName == "checked") {
        alert("Checkedness changed!");
    }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T11:58:13.817

这是不可能的。您必须手动触发 Change 事件。

```
    调用 CheckboxStateChange 事件的操作：
          1\. 通过鼠标点击改变复选框的状态。
          2\. 使用访问键更改复选框的状态。
          3\. 使用 SPACE 键更改复选框的状态。

    不调用 CheckboxStateChange 事件的操作：
          1\. 从脚本更改选中属性的值。

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-29T15:11:35.657

目前，如果不使用轮询或使用像 React 这样监控状态的影子 DOM 框架，仍然无法做到这一点。这是因为复选框/收音机`.checked = true`属性更改是状态更改，而不是 DOM 突变。这是一个演示：

[http://jsfiddle.net/6DHXs/1/](http://jsfiddle.net/6DHXs/1/)

# php - MYSQL PHP API - 从另一个表的行中显示和获取多行

> ID：14500748
> 
> 赞同：1
> 
> 时间：2013-01-24T11:52:13.793
> 
> 标签：php, mysql, api

我正在为我的移动应用程序创建一个 API。我正在使用 PHP MYSQL 和 Slim 框架（这在很大程度上与这个问题无关）来开发它。

我正在尝试从我的 mysql 数据库中提取多个“场地”，并为每个“场地”检索多个“场地图像”。数据库：

```
venues        venue_images
------        ------------
id PK         image_venue_id FK (to venues)
venue_name    image_path
active 
```

**然后我需要以这种格式输出数据：**

```
{
  "completed_in":0.01068,
  "returned":10,
  "results":[
    {
      "venue_id":"1",
      "venue_name":"NameHere",
      "images": [
         {
           "image_path":"http://www.pathhere.com"
         },
         {
           "image_path":"http://www.pathhere2.com"
         }
      ]
    }
  ]
} 
```

所以基本上，每个场地的图像都会重复多次。

**我目前的代码是：**

```
$sql = "
    SELECT
         venues.id, venues.venue_name, venues.active,
         venue_images.image_venue_id, venue_images.image_path
    FROM
         venues
    LEFT JOIN 
         venue_images ON venue_images.image_venue_id = venues.id
    WHERE
         venues.active = 1
    LIMIT 0, 10
    ";

    $data = ORM::for_table('venues')->raw_query($sql, array())->find_many();
         if($data) {
        foreach ($data as $post) {
            $results[] = array (
                 'venue_id' => $post->id,
                 'venue_name' => $post->venue_name,
                 'images' => $post->image_path
            );
        }

        //Build full json
        $time = round((microTimer() - START_TIME), 5);
        $result = array(
             'completed_in' => $time,
             'returned' => count($results),
             'results' => $results
        );
        //Print JSON
        echo indent(stripslashes(json_encode($result)));
    } else {
         echo "Nothing found";
    } 
```

**我当前的代码有效，但是它产生了这个：**

```
{
  "completed_in":0.01068,
  "returned":10,
  "results":[
    {
      "venue_id":"1",
      "venue_name":"The Bunker",
      "images":"https://s3.amazonaws.com/barholla/venues/1352383950-qPXNShGR6ikoafj_n.jpg"
    },
    {
      "venue_id":"1",
      "venue_name":"The Bunker",
      "images":"https://s3.amazonaws.com/barholla/venues/1352384236-RUfkGAWsCfAVdPm_n.jpg"
    }
]
} 
```

“The Bunker”有两张图片。它没有将图像存储在场地阵列中，而是使用第二个图像创建了“The Bunker”的重复行。就像我之前说的，我需要在每个场地内迭代多个图像。任何帮助将非常感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:17:31.600

你想使用 GROUP_CONCAT

像这样的东西（可能不是 100% 准确:)）

```
$sql = "
    SELECT
         v.id, v.venue_name, v.active,
         GROUP_CONCAT(i.image_path) as venue_image_string
    FROM
         venues v
    LEFT JOIN 
         venue_images i ON i.image_venue_id = v.id
    WHERE
         v.active = 1
    GROUP BY i.image_venue_id
    LIMIT 0, 10
"; 
```

您可能需要稍微摆弄一下，但应该让您走上正确的轨道（注意：提供venue_image_string 作为CSV）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:31:49.610

为什么不能使用多个查询而不是..？它更快更简单..！

```
$sql = "SELECT venues.id, venues.venue_name, venues.active FROM venues WHERE venues.active = 1 LIMIT 0, 10";

    $data = ORM::for_table('venues')->raw_query($sql, array())->find_many();
         if($data) {
        foreach ($data as $post) {
            $results[] = array ();

$sql = "SELECT image_path FROM venue_images WHERE image_venue_id = $post->id"; 
$images = ORM::for_table('venue_images')->raw_query($sql, array())->find_many();

 $results[] = array (
                 'venue_id' => $post->id,
                 'venue_name' => $post->venue_name, 
                 'images' => $images);
        }

        //Build full json
        $time = round((microTimer() - START_TIME), 5);
        $result = array(
             'completed_in' => $time,
             'returned' => count($results),
             'results' => $results
        );
        //Print JSON
        echo indent(stripslashes(json_encode($result)));
    } else {
         echo "Nothing found";
    } 
```

# ios - 通过登录提交 iOS 应用程序

> ID：14500751
> 
> 赞同：2
> 
> 时间：2013-01-24T11:52:22.883
> 
> 标签：ios, app-store

我想问一个关于iOS应用程序提交过程的问题。我要提交的应用程序有一个可通过凭据访问的私人区域。我必须将凭据发送给 Apple 进行测试吗？

谢谢，S。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:55:06.653

是的，您应该向 Apple 提供凭据。iTunes Connect 中有一个框，您可以在其中向 Apple 提供测试应用程序所需的额外信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:56:29.243

当您提交应用程序时，屏幕底部附近有一个字段，显示**Review Notes**。您可以在此处添加测试凭据，Apple 的审核人员会注意到这一点。

# android - 搜索单词中的字母

> ID：14500754
> 
> 赞同：0
> 
> 时间：2013-01-24T11:52:33.670
> 
> 标签：android, android-searchmanager

我在我的应用程序中使用 SearchManager 来搜索 SQLite 数据库中的单词。它工作正常，但我想在一个单词中搜索字母。例如，如果您搜索`cpur`它会显示包含这些字母 ( `computer`) 的单词。有没有办法自定义搜索管理器以这样的方式工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:58:16.633

如果您提供更多信息会更容易回答这个问题，但假设您选择这样的单词：

```
select words from text where word='target' 
```

您也可以通过以下方式获得看起来像的单词：

```
select word from text where word like '%target%'; 
```

这意味着在目标的任一侧，字符串中可以有任意数量的字符。希望这会有所帮助，并且是您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:05:00.107

或者，如果您不想使用 sqlite 命令，这也应该在您从表中获取字符串后起作用：

```
 boolean contains = false;

      if(YourWord.contains(YourNeededString)){
               contains =   true;
     else{
               contains =   false;
          } 
```

# jquery - jCrop 强制裁剪

> ID：14500755
> 
> 赞同：1
> 
> 时间：2013-01-24T11:52:37.237
> 
> 标签：jquery, image, crop, jcrop, image-size

知道如何强制裁剪，只有在图像尺寸不正确的情况下？

我正在使用 jQuery jCrop 插件。我需要强制裁剪任何图像，但是如果您在裁剪区域之外单击，则会释放裁剪。我试着做：

```
$('#cropthumb').Jcrop({
  onRelease: setSelect,
} 
```

这在任何版本上调用函数 setSelect()。然后在一个函数中我再次设置选择。

```
function setSelect(){
  jcrop_api.setSelect([10,10,180,160]);
} 
```

这可以按我的意愿工作。但是在我正在检查的初始加载中，缩略图是否已经以正确的大小显示。如果条件匹配，我会这样做：

```
jcrop_api.release();
jcrop_api.disable(); 
```

这不起作用，因为我的初始加载将始终调用 setSelect() 函数，并且可以再次裁剪已经裁剪的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:20:08.440

创建一个外部变量，该变量将由您的禁用代码设置并由您的 setSelect 函数检查。

```
var isDisabled = false;

function setSelect(){
    if(!isDisabled)
        jcrop_api.setSelect([10,10,180,160]);
} 
```

在您禁用 jCrop 的代码中：

```
isDisabled = true;
jcrop_api.release();
jcrop_api.disable(); 
```

# java - 处理异常的构造函数

> ID：14500757
> 
> 赞同：0
> 
> 时间：2013-01-24T11:52:54.740
> 
> 标签：java, android

我如何制作可以处理 IOException 的构造函数

这是带有构造函数的类

```
public class RootProcess {
Process process;

public RootProcess() throws IOException {

}

public RootProcess(Process process){
    this.process = process;
}

public Process getProcess() {
    return process;
}

public void setProcess(Process process) {
    this.process = process;
}

} 
```

这就是我声明它的方式

```
RootProcess process = new RootProcess(Runtime.getRuntime().exec("su")); 
```

但我在eclipse中得到这个错误

```
Default constructor cannot handle exception type IOException thrown by implicit super constructor. Must define an explicit constructor 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:57:26.323

如果你从一个方法运行它，要么在方法签名中声明异常，要么使用 try/catch 块处理它。

**声明异常：**

```
public void someMethod() throws IOException {
     RootProcess process = new RootProcess(Runtime.getRuntime().exec("su"));
} 
```

**处理异常：**

```
public void someMethod() {
try {
RootProcess process = new RootProcess(Runtime.getRuntime().exec("su"));
}
catch(IOException ex){
//handle it here
}
} 
```

# javascript - 多组间隔时间

> ID：14500758
> 
> 赞同：1
> 
> 时间：2013-01-24T11:52:54.900
> 
> 标签：javascript, html, html5-canvas, dom-events

在这个动画中，我为两个球制作了两个函数，但是我在这个画布中没有第二个球。我的两个球的代码-

```
function draw() {
    ctx.clearRect(0, 0, 300, 300);
    //ctx.beginPath();
    //ctx.arc(x, y, 10, 0, 2 * Math.PI, true);
    //ctx.closePath();
    ctx.drawImage(img, x, y, 20, 20);
    ctx.fill();
    x += dx;
    y += dy;

    bounce();
}
function draw2()

{
    ctx.clearRect(0,0,300,300);
    ctx.beginPath();
    ctx.arc(x, y, 10, 0, 2 * Math.PI, true);
    ctx.closePath();
    ctx.fill();
    x += dx;
    y += dy;
    bounce();
} 
```

函数调用——

```
 function init() {
        var ctx = document.getElementById("canvas").getContext("2d");

        return setInterval(draw, 10);
return setInterval(draw2,20);
                   //This is how i am calling both function 

} 
```

我们可以在 Javascript 中做到这一点吗？

**期待结果——**

两个球都来自同一个位置，我希望当第一个球在画布框架中反弹时，10 毫秒后另一个球`draw2 ()`应该进入框架并表现相同。

小提琴- [http://jsfiddle.net/stackmanoz/B6XZC/4/](http://jsfiddle.net/stackmanoz/B6XZC/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:18:23.867

为了让它工作，你需要将你的绘图函数从你的画布清除代码中分离出来，并有一个与你希望你的球出现的时间分开的滴答/轮询循环。

您不妨使用 JavaScript 构造函数的强大功能来帮助您解决问题。

```
function ball( ctx, x, y, dx, dy ){
  this.img = ? /// you'll have to set your image, whatever it is.
  this.x = x||0;
  this.y = y||0;
  this.dx = dx||0;
  this.dy = dy||0;
  this.draw = function(){
    ctx.drawImage(this.img, this.x, this.y, 20, 20);
  }
  this.tick = function(){
    this.x += this.dx;
    this.y += this.dy;
    this.draw();
  }
} 
```

然后使用以下来处理绘图。

```
function clear( ctx, cnv ){
  ctx.clearRect(0, 0, 300, 300);
  /// a faster way to clear can be: 
  /// cnv.width += 0; 
  /// or:
  /// cnv.width = cnv.width;
}

/// you should always have a core loop that delegates to other functions/objs
function loop( cnv, ctx, balls ){
  clear(ctx, cnv);
  for( var i=0; i<balls.length; i++ ){
    balls[i].tick()
  }
}

function init() {
  var cnv = document.getElementById("canvas");
  var ctx = cnv.getContext("2d");
  /// create the first ball and add it to your ball list
  var balls = [new ball(ctx,50,0,1,1)];
  /// 10ms wait before the extra ball is added
  setTimeout(function(){balls.push( new ball(ctx,100,0,1,1) );},10); 
  /// this will be your animation loop
  return setInterval(function(){loop(cnv, ctx, balls)}, 10);
} 
```

以上内容是手工输入的，未经测试，可以大大改进..但它应该可以工作并给你一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:19:34.483

两者都`draw()`清除`draw2()`画布，因此您只会看到最后一次更新。此外，您还有一个全局`x`、`y`、`dx`和`dy`，这意味着您的两个球将永远被绘制在完全相同的位置。

# mysql - 打开 MySQL 数据库时应用程序崩溃

> ID：14500759
> 
> 赞同：5
> 
> 时间：2013-01-24T11:52:55.237
> 
> 标签：mysql, qt, qt5

我在 Windows 7 ×64 上使用 Qt 5.0.0（个人编译 – MinGW x64）。我在配置中添加了 MySQL 支持，并且 MySQL 也安装在系统上。MySQL 库、标头和在应用程序中可见。

打开数据库时程序崩溃。我这样打开数据库：

```
QSqlDatabase db = QSqlDatabase::addDatabase("QMYSQL");
db.setDatabaseName("My DB name");
db.setUserName("root");
db.setPassword("My password");
db.setHostName("localhost");
db.setPort(3306);
try{
db.open(); // <=== Crashes without throwing an exception
}
catch(std::exception e)
{
    std::cout << e.what() << std::endl;
} 
```

**笔记：**

```
qDebug() << QSqlDatabase::drivers(); 
```

印刷

```
("QMYSQL3", "QMYSQL", "QODBC3", "QODBC", "QSQLITE") 
```

操作系统生成的问题签名如下所示：

```
Problem Event Name: APPCRASH
Application Name: CMS.exe
Application Version: 0.0.0.0
Application Timestamp: 51010cdd
Fault Module Name: Qt5Sql.dll
Fault Module Version: 5.0.0.0
Fault Module Timestamp: 50f6b734
Exception Code: c0000005
Exception Offset: 00000000000df950
OS Version: 6.1.7600.2.0.0.256.1
Locale ID: 1033
Additional Information 1: db69
Additional Information 2: db697f824a06df6631cf05ed1f197e16
Additional Information 3: 1d76
Additional Information 4: 1d7605bf295c1c2cfcbfc6bfcec7c569 
```

我以这种方式使用 gendef 和 dlltool 生成 .a 文件：

```
gendef libmysql.dll
dlltool --input-def libmysql.def --dllname libmysql.dll --output-lib libmysql.a 
```

Qt 配置为`-qt-sql-mysql`而不是`-plugin-sql-mysql`. （有什么区别？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T15:50:17.790

由于您的程序在没有捕获异常的情况下崩溃（并且我注意到您已经编写为一个包罗万象的内容），我倾向于假设崩溃发生在 try 块之前。

尝试将 'db' 的声明及其属性设置包装在 try-catch 中（即使只是暂时的）。

# java - jboss-as-maven-plugin 无法部署到远程 Jboss？

> ID：14500760
> 
> 赞同：0
> 
> 时间：2013-01-24T11:53:00.573
> 
> 标签：java, maven, deployment, jboss

我已经尝试了几天使用 jboss-as-maven-plugin 将 web 项目部署到远程 Jboss as 7，但它没有工作。以下是我的 pom.xml

```
 <build>
            <pluginManagement>
                <plugins>
                    <plugin>
                        <groupId>org.jboss.as.plugins</groupId>
                        <artifactId>jboss-as-maven-plugin</artifactId>
                        <version>7.3.Final</version>
                        <configuration>
                            <skip>true</skip>
                            <hostname>127.0.0.1</hostname>
                            <port>9999</port>
                        </configuration>
<executions>
                                <execution>
                                    <id>deploy</id>
                                    <phase>install</phase>
                                    <goals>
                                        <goal>deploy</goal>
                                    </goals>
                                </execution>
                            </executions>
                    </plugin>
                </plugins>
            </pluginManagement>
        </build> 
```

我有错误：

```
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.jboss.as.plugins:jboss-as-maven-plugin:7.3.
CR1b:deploy (default) on project MessagePushX-RELEASE: Could not execute goal de
ploy on test.war. Reason: java.net.ConnectException: JBAS012144: Could no
t connect to remote://192.168.1.104:9999\. The connection timed out -> [Help 1]
[ERROR] 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T21:15:44.200

错误消息清楚地表明它无法连接到“remote://192.168.1.104:9999”。验证它的配置是否正确，并验证您与该目标的连接。

你可以试试

```
telnet 192.168.1.104 9999 
```

从你的机器上看看你是否有连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:08:07.437

这可能不是您想要的解决方案，但它是我们使用的解决方案。

您可以将网络驱动器映射到您希望文件放入的部署文件夹，然后让 Maven 构建它的输出到该文件夹​​。

例如，在我们的本地机器上，maven 直接在 JBoss 的 deploy 文件夹中构建 jar。

另一个选项是将 JBoss 配置为使用默认部署文件夹之外的备用部署文件夹。然后将 maven 构建到这个备用文件夹，JBoss 将从该文件夹中提取您的文件。

如果另一个选项仍然不适合您，只需考虑几个不同的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-04T17:39:34.207

## 对standalone.xml 的更改

位置：（/usr/local/share/jboss/standalone/configuration/standalone.xml）

*   将独立修改为具有 auto-deploy zipped true（因此无需创建 war.dodeploy 文件）和 auto-deploy-exploded false

    ```
    <subsystem xmlns="urn:jboss:domain:deployment-scanner:1.1">
        <deployment-scanner path="deployments" relative-to="jboss.server.base.dir" scan-interval="5000" auto-deploy-zipped="true" auto-deploy-exploded="false"/> 
    ```

*   添加了jsp配置

    ```
    <subsystem xmlns="urn:jboss:domain:web:1.1" default-virtual-server="default-host" native="false">
            <configuration>
                <jsp-configuration development="true"/>
            </configuration> 
    ```

*   在 maven pom.xml 中添加了 jboss-as-configuration

    ```
     <plugin>
                    <groupId>org.jboss.as.plugins</groupId>
                    <artifactId>jboss-as-maven-plugin</artifactId>
                    <version>7.3.Final</version>
                    <configuration>
                        <hostname>192.168.0.105</hostname>
                        <port>9999</port>
                    </configuration>
                    <executions>
                        <execution>
                            <phase>install</phase>
                            <goals>
                                <goal>deploy</goal>
                            </goals>
                        </execution>
                    </executions>

                </plugin> 
    ```

*   您应该让您的 jboss 实例从 eclipse 或外部启动并绑定到相同的 IP 而不是 localhost 或 127.0.0.1。您可以从命令行或 Eclipse 中通过将主机更改为您的 IP 地址来执行此操作：192.168.0.105

*   在此之后，您可以使用以下 maven 目标在每次更改后重新部署更改。另请注意，您最初可能必须使用部署，然后重新部署。

    ```
    -e -X jboss-as:redeploy 
    ```

# rss - Rss 提要中的 Orchard CMS EntryPointNotFound 异常

> ID：14500766
> 
> 赞同：4
> 
> 时间：2013-01-24T11:53:18.047
> 
> 标签：rss, orchardcms

如果我直接导​​航到 Orchard 博客文章提要 (Orchard 1.5.1)

[http://riders-test.apphb.com/rss?containerid=86](http://riders-test.apphb.com/rss?containerid=86) （可以在[/news-blog/blog](http://riders-test.apphb.com/news-blog/blog)找到博客）

我收到“Opps。出了点问题......抱歉”页面

查看日志我看到了这个异常。

```
2013-01-24 11:19:52,805 [27] Orchard.Exceptions.DefaultExceptionPolicy - An unexpected exception was caught
System.EntryPointNotFoundException: Entry point was not found.
   at System.Web.Mvc.IValueProvider.GetValue(String key)
   at Contrib.Taxonomies.StandardQueries.TermFeedQuery.Match(FeedContext context) in C:\Dev\Orchard\Riders\src\Orchard.AppHarbor\Orchard.AppHarbor.Web\Modules\Contrib.Taxonomies\StandardQueries\TermFeedQuery.cs:line 29
   at Orchard.Core.Feeds.Controllers.FeedController.<>c__DisplayClassb.<Index>b__3(IFeedQueryProvider provider) in C:\Dev\Orchard\Riders\src\Orchard.Web\Core\Feeds\Controllers\FeedController.cs:line 40
   at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()
   at System.Linq.Enumerable.WhereEnumerableIterator`1.MoveNext()
   at System.Linq.Buffer`1..ctor(IEnumerable`1 source)
   at System.Linq.OrderedEnumerable`1.<GetEnumerator>d__0.MoveNext()
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at Orchard.Core.Feeds.Controllers.FeedController.Index(String format) in C:\Dev\Orchard\Riders\src\Orchard.Web\Core\Feeds\Controllers\FeedController.cs:line 39
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
2013-01-24 11:19:54,092 [27] Orchard.ContentManagement.Drivers.Coordinators.ContentPartDriverCoordinator - ArgumentNullException thrown from IContentPartDriver by Orchard.Core.Navigation.Drivers.MenuWidgetPartDriver
System.ArgumentNullException: Value cannot be null.
Parameter name: source
   at System.Linq.Enumerable.Where[TSource](IEnumerable`1 source, Func`2 predicate)
   at Orchard.Core.Navigation.Drivers.MenuWidgetPartDriver.<>c__DisplayClass9.<Display>b__7() in C:\Dev\Orchard\Riders\src\Orchard.Web\Core\Navigation\Drivers\MenuWidgetPartDriver.cs:line 122
   at Orchard.ContentManagement.Drivers.ContentPartDriver`1.<>c__DisplayClassf.<ContentShape>b__e(BuildShapeContext ctx) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\ContentPartDriver.cs:line 129
   at Orchard.ContentManagement.Drivers.ContentPartDriver`1.<>c__DisplayClass15.<ContentShapeImplementation>b__14(BuildShapeContext ctx) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\ContentPartDriver.cs:line 138
   at Orchard.ContentManagement.Drivers.ContentShapeResult.ApplyImplementation(BuildShapeContext context, String displayType) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\ContentShapeResult.cs:line 39
   at Orchard.ContentManagement.Drivers.ContentShapeResult.Apply(BuildDisplayContext context) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\ContentShapeResult.cs:line 21
   at Orchard.ContentManagement.Drivers.Coordinators.ContentPartDriverCoordinator.<>c__DisplayClassa.<BuildDisplay>b__9(IContentPartDriver driver) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\Coordinators\ContentPartDriverCoordinator.cs:line 49
   at Orchard.InvokeExtensions.Invoke[TEvents](IEnumerable`1 events, Action`1 dispatch, ILogger logger) in C:\Dev\Orchard\Riders\src\Orchard\InvokeExtensions.cs:line 17
2013-01-24 11:19:54,189 [27] Orchard.ContentManagement.Drivers.Coordinators.ContentPartDriverCoordinator - NullReferenceException thrown from IContentPartDriver by Orchard.Core.Navigation.Drivers.MenuWidgetPartDriver
System.NullReferenceException: Object reference not set to an instance of an object.
   at Orchard.Core.Navigation.Drivers.MenuWidgetPartDriver.<>c__DisplayClass9.<Display>b__7() in C:\Dev\Orchard\Riders\src\Orchard.Web\Core\Navigation\Drivers\MenuWidgetPartDriver.cs:line 84
   at Orchard.ContentManagement.Drivers.ContentPartDriver`1.<>c__DisplayClassf.<ContentShape>b__e(BuildShapeContext ctx) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\ContentPartDriver.cs:line 129
   at Orchard.ContentManagement.Drivers.ContentPartDriver`1.<>c__DisplayClass15.<ContentShapeImplementation>b__14(BuildShapeContext ctx) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\ContentPartDriver.cs:line 138
   at Orchard.ContentManagement.Drivers.ContentShapeResult.ApplyImplementation(BuildShapeContext context, String displayType) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\ContentShapeResult.cs:line 39
   at Orchard.ContentManagement.Drivers.ContentShapeResult.Apply(BuildDisplayContext context) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\ContentShapeResult.cs:line 21
   at Orchard.ContentManagement.Drivers.Coordinators.ContentPartDriverCoordinator.<>c__DisplayClassa.<BuildDisplay>b__9(IContentPartDriver driver) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\Coordinators\ContentPartDriverCoordinator.cs:line 49
   at Orchard.InvokeExtensions.Invoke[TEvents](IEnumerable`1 events, Action`1 dispatch, ILogger logger) in C:\Dev\Orchard\Riders\src\Orchard\InvokeExtensions.cs:line 17
2013-01-24 11:20:00,911 [29] Orchard.Exceptions.DefaultExceptionPolicy - An unexpected exception was caught
System.EntryPointNotFoundException: Entry point was not found.
   at System.Web.Mvc.IValueProvider.GetValue(String key)
   at Contrib.Taxonomies.StandardQueries.TermFeedQuery.Match(FeedContext context) in C:\Dev\Orchard\Riders\src\Orchard.AppHarbor\Orchard.AppHarbor.Web\Modules\Contrib.Taxonomies\StandardQueries\TermFeedQuery.cs:line 29
   at Orchard.Core.Feeds.Controllers.FeedController.<>c__DisplayClassb.<Index>b__3(IFeedQueryProvider provider) in C:\Dev\Orchard\Riders\src\Orchard.Web\Core\Feeds\Controllers\FeedController.cs:line 40
   at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()
   at System.Linq.Enumerable.WhereEnumerableIterator`1.MoveNext()
   at System.Linq.Buffer`1..ctor(IEnumerable`1 source)
   at System.Linq.OrderedEnumerable`1.<GetEnumerator>d__0.MoveNext()
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at Orchard.Core.Feeds.Controllers.FeedController.Index(String format) in C:\Dev\Orchard\Riders\src\Orchard.Web\Core\Feeds\Controllers\FeedController.cs:line 39
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
2013-01-24 11:20:01,712 [29] Orchard.ContentManagement.Drivers.Coordinators.ContentPartDriverCoordinator - ArgumentNullException thrown from IContentPartDriver by Orchard.Core.Navigation.Drivers.MenuWidgetPartDriver
System.ArgumentNullException: Value cannot be null.
Parameter name: source
   at System.Linq.Enumerable.Where[TSource](IEnumerable`1 source, Func`2 predicate)
   at Orchard.Core.Navigation.Drivers.MenuWidgetPartDriver.<>c__DisplayClass9.<Display>b__7() in C:\Dev\Orchard\Riders\src\Orchard.Web\Core\Navigation\Drivers\MenuWidgetPartDriver.cs:line 122
   at Orchard.ContentManagement.Drivers.ContentPartDriver`1.<>c__DisplayClassf.<ContentShape>b__e(BuildShapeContext ctx) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\ContentPartDriver.cs:line 129
   at Orchard.ContentManagement.Drivers.ContentPartDriver`1.<>c__DisplayClass15.<ContentShapeImplementation>b__14(BuildShapeContext ctx) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\ContentPartDriver.cs:line 138
   at Orchard.ContentManagement.Drivers.ContentShapeResult.ApplyImplementation(BuildShapeContext context, String displayType) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\ContentShapeResult.cs:line 39
   at Orchard.ContentManagement.Drivers.ContentShapeResult.Apply(BuildDisplayContext context) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\ContentShapeResult.cs:line 21
   at Orchard.ContentManagement.Drivers.Coordinators.ContentPartDriverCoordinator.<>c__DisplayClassa.<BuildDisplay>b__9(IContentPartDriver driver) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\Coordinators\ContentPartDriverCoordinator.cs:line 49
   at Orchard.InvokeExtensions.Invoke[TEvents](IEnumerable`1 events, Action`1 dispatch, ILogger logger) in C:\Dev\Orchard\Riders\src\Orchard\InvokeExtensions.cs:line 17
2013-01-24 11:20:01,815 [29] Orchard.ContentManagement.Drivers.Coordinators.ContentPartDriverCoordinator - NullReferenceException thrown from IContentPartDriver by Orchard.Core.Navigation.Drivers.MenuWidgetPartDriver
System.NullReferenceException: Object reference not set to an instance of an object.
   at Orchard.Core.Navigation.Drivers.MenuWidgetPartDriver.<>c__DisplayClass9.<Display>b__7() in C:\Dev\Orchard\Riders\src\Orchard.Web\Core\Navigation\Drivers\MenuWidgetPartDriver.cs:line 84
   at Orchard.ContentManagement.Drivers.ContentPartDriver`1.<>c__DisplayClassf.<ContentShape>b__e(BuildShapeContext ctx) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\ContentPartDriver.cs:line 129
   at Orchard.ContentManagement.Drivers.ContentPartDriver`1.<>c__DisplayClass15.<ContentShapeImplementation>b__14(BuildShapeContext ctx) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\ContentPartDriver.cs:line 138
   at Orchard.ContentManagement.Drivers.ContentShapeResult.ApplyImplementation(BuildShapeContext context, String displayType) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\ContentShapeResult.cs:line 39
   at Orchard.ContentManagement.Drivers.ContentShapeResult.Apply(BuildDisplayContext context) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\ContentShapeResult.cs:line 21
   at Orchard.ContentManagement.Drivers.Coordinators.ContentPartDriverCoordinator.<>c__DisplayClassa.<BuildDisplay>b__9(IContentPartDriver driver) in C:\Dev\Orchard\Riders\src\Orchard\ContentManagement\Drivers\Coordinators\ContentPartDriverCoordinator.cs:line 49
   at Orchard.InvokeExtensions.Invoke[TEvents](IEnumerable`1 events, Action`1 dispatch, ILogger logger) in C:\Dev\Orchard\Riders\src\Orchard\InvokeExtensions.cs:line 17 
```

没有从默认果园安装重新开始（时间明智不是一个选项）我真的不知道如何解决这个问题。

请帮忙。

# content-management-system - 用于简单站点的 N2 或复合材料

> ID：14500767
> 
> 赞同：0
> 
> 时间：2013-01-24T11:53:19.280
> 
> 标签：content-management-system, c1-cms, n2

N2 或 Composite 是否更适合用于管理小型企业网站？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:29:00.377

N2 CMS 更像是一个构建 CMS 的平台，而不是一个功能齐全的 CMS。但是，有一个示例实现可以帮助您入门。如果您从头开始，我认为[Composite C1](http://www.composite.net/)或[Orchard可能会让您更快地开始构建小型企业网站。](http://www.orchardproject.net/)但是，如果您需要将 CMS 功能构建到现有站点中，我认为 N2 会很有用（但对于我提到的其他两个站点来说，这将非常困难）。

编辑：C1 和 Orchard 似乎也比 N2 更积极地开发，自 2011 年初以来似乎没有任何新版本。

[您可以从 Microsoft 的Web Platform Installer](http://www.microsoft.com/web/downloads/platform.aspx)轻松安装 C1 和 Orchard 。使用 C1，选择[Omnicorp 演示站点](http://docs.composite.net/Getting-started/Starter-sites/OmniCorpWebsite)以查看已经创建了几个页面的示例部署，因为这将是评估它的最快方法。从[WPI](http://www.microsoft.com/web/downloads/platform.aspx)安装可能比出于评估目的从源安装它更快的方法。

# mysql - 每天使用 grails 的记录数

> ID：14500768
> 
> 赞同：0
> 
> 时间：2013-01-24T11:53:27.817
> 
> 标签：mysql, hibernate, grails, grails-orm

我有一个以 mysql 数据库作为数据源的**grails应用程序。**mysql 数据库由第三方创建和维护。其中一张表包含由和`'visitinfo'`组成的 2 列。`'userid'``'logindatetime'`

`userid`是 TEXT 类型，而 logindatetime 是 'datetime' 类型。

为了访问上表`'visitinfo'`，我创建了一个域类“VisitInfo”并将其映射到 mysql 数据库表，我的 grails 应用程序可以通过该表轻松地存储以及从数据库中检索数据。

在其中一个页面上，我需要显示过去 30 天的访客信息。所以基本上我正在寻找一个解决方案来获得过去 30 天每天的访问者数量。像这样的东西：

```
21-Jan-2012 ------ 36
22-Jan-2012 ------ 85
23-Jan-2012 ------ 115
24-Jan-2012 ------ 236
etc. 
```

另请注意，如果用户 ID`'williamp'`在特定日期有 2 个条目，则应计为 2。因此，我不注意用户的唯一性。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:45:20.487

我建议按照 hql 查询来满足您的要求

```
VisitInfo.executeQuery("select logindatetime, count(*) from VisitInfo group by logindatetime") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:45:59.333

我对grails一无所知。获取所需结果的 MySQL 查询如下：

```
SELECT DATE_FORMAT(logindatetime,'%d-%m-%Y') dt
     , COUNT(*) total
  FROM visitinfo
 GROUP 
    BY dt; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:56:49.870

您想使用 countBy gorm 方法。

```
numLogins=VisitInfo.countByReleaseDateBetween(startOfDay,endOfDay) 
```

这需要在一个循环中为过去 30 天的每一天计算两个日期对象。startOfDay 需要 00:00:00:00 的时间值，endOfDay 需要 23:59:00:00 的时间值

# jsp - 使用 tinyMCE 编辑器时无法访问 JSP 请求和会话对象

> ID：14500772
> 
> 赞同：1
> 
> 时间：2013-01-24T11:53:41.710
> 
> 标签：jsp, tinymce, request

我正在使用 textarea 进行用户文本输入，但为了保留文本格式，我决定尝试 tinyMCE。

我需要做什么：

1.  通过将内容发布到 servlet，将输入到 tinyMCE 编辑器中的输入保存到数据库中。
2.  从服务器检索保存的文本并将其显示在 tinyMCE 中以进行任何编辑。

问题描述：这是我从服务器检索到的文本发送到前端 JSP 的方式：

```
request.setAttribute('inputText',txt);
RequestDispatcher view = request.getRequestDispatcher("/TextareaTest.jsp");
view.forward(request, response); 
```

在 JSP 页面中，我只使用 JSTL/EL。因此，要访问请求对象中的值，我使用 ${requestScope['inputText']} 或 ${inputText}

例子：

```
<script type="text/javascript">
var txt = "${requestScope['inputText']}";
tinyMCE.get('textarea1').setContent(txt);
</script> 
```

但这不适用于 tinyMCE。不知何故，我无法像在集成 tinyMCE 之前那样访问请求对象。如果我删除 tinyMCE，它工作正常。但现在它就像一个普通的文本区域。

需要弄清楚如何通过 javascript 函数内部的 servlet 访问请求对象上设置的值。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:46:09.583

I got it to work. I was trying to call the save() on the editor instance which seemed to be causing the problem. I removed that and am able to access the sessionScope

# java - 使用 Java 将元素添加到现有 XML 文件

> ID：14500776
> 
> 赞同：0
> 
> 时间：2013-01-24T11:53:44.987
> 
> 标签：java, xml, xml-parsing

我有一个现有的空白 XML 文件，如下所示：

```
<root>
<!--Some Comment goes here>
</root> 
```

现在我想要一个 GUI，它有 1 个文本字段和 1 个文本区域，它需要一些字符串（标题和内容），然后单击“保存”按钮，它将它们添加到元素下的 XML 文件中。我在单独的 GUI 中创建了根目录并保存到“sample.xml”中，单击按钮后，会出现内容添加窗口，我在其中打开相同的 XML 文件并希望将项目添加到其中。但每次我这样做时，我都会收到“空指针异常”错误。以下是我的代码。请告诉我哪里出错了：

主 GUI 中的代码：

```
JButton btnNewButton = new JButton("Add New");
        btnNewButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                //File f = new File("sample.xml");
                DocumentBuilderFactory dbfac = DocumentBuilderFactory.newInstance();
                DocumentBuilder docBuilder;
                try {
                    Writer output = new BufferedWriter(new FileWriter("sample.xml"));
                    docBuilder = dbfac.newDocumentBuilder();
                    Document doc = docBuilder.newDocument();

                    Element root = doc.createElement("root");
                    doc.appendChild(root);

                    Comment comment = doc.createComment("Just a thought");
                    root.appendChild(comment);

                    TransformerFactory transfac = TransformerFactory.newInstance();
                    Transformer trans = transfac.newTransformer();
                    trans.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
                    trans.setOutputProperty(OutputKeys.INDENT, "yes");

                    StringWriter sw = new StringWriter();
                    StreamResult result = new StreamResult(sw);
                    DOMSource source = new DOMSource(doc);
                    trans.transform(source, result);
                    String xmlString = sw.toString();

                    PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("sample.xml", true)));
                    out.println(xmlString);
                    out.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (ParserConfigurationException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (TransformerException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

在辅助 GUI 中添加元素的代码：

```
JButton btnSave = new JButton("Save");
        btnSave.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {

                DocumentBuilderFactory dbfac = DocumentBuilderFactory.newInstance();
                dbfac.setIgnoringComments(true);
                DocumentBuilder docBuilder;
                try {
                    docBuilder = dbfac.newDocumentBuilder();
                    Document doc = docBuilder.parse("sample.xml");

                    NodeList rt = doc.getElementsByTagName("root");

                    Element child = doc.createElement("content");
                    child.setAttribute("title", textField.getText().toString());
                    rt.item(0).appendChild(child);

                    Text text = doc.createTextNode(textArea.getText().toString());
                    child.appendChild(text);

                    TransformerFactory transfac = TransformerFactory.newInstance();
                    Transformer trans = transfac.newTransformer();
                    trans.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
                    trans.setOutputProperty(OutputKeys.INDENT, "yes");

                    StringWriter sw = new StringWriter();
                    StreamResult result = new StreamResult(sw);
                    DOMSource source = new DOMSource(doc);
                    trans.transform(source, result);
                    String xmlString = sw.toString();

                    PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("sample.xml", true)));
                    out.println(xmlString);
                    out.close();

                    System.out.println(xmlString);
                } catch (ParserConfigurationException e) {
                    e.printStackTrace();
                } catch (TransformerConfigurationException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (TransformerException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (SAXException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        }); 
```

# iphone - 如何暂时禁用我的 iPhone 应用程序安排的所有本地通知？

> ID：14500777
> 
> 赞同：0
> 
> 时间：2013-01-24T11:53:54.760
> 
> 标签：iphone, ios, uilocalnotification

有什么方法可以暂时禁用 iPhone 应用程序创建的所有本地通知？我需要根据条件重新启用它们。我的要求是，如果用户关闭了我的应用程序上的通知按钮，则不再显示通知。如果他打开了它，则应显示所有通知。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:58:09.597

例如，您可以获取所有预定通知并将它们保存在共享首选项中。

```
[[UIApplication sharedApplication]     scheduledLocalNotifications]; 
```

然后取消所有通知：

```
- (void)cancelLocalNotification:(UILocalNotification *)notification 
```

如果用户再次激活通知，您可以重新安排它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:09:48.740

您可以使用“cancelAllLocalNotifications”方法，当用户打开它时，您可以再次为其设置所有通知。

# c# - gzipping powerpoint文件不起作用

> ID：14500778
> 
> 赞同：0
> 
> 时间：2013-01-24T11:53:59.190
> 
> 标签：c#, gzip

我想知道是否可以 gzip 一个 powerpoint 文件。我问这个问题的原因是因为我发现的所有文章都在压缩 .txt 并且想知道是否可以通过使用 c# 压缩 .pptx .. 下面的代码是我的我正在使用

```
static void Main()
    {
    try
    {
        string anyString = File.ReadAllText("presentation.pptx");

        CompressStringToFile("new.gz", anyString);
    }
    catch
    {
        // Couldn't compress.
    }
    }

    public static void CompressStringToFile(string fileName, string value)
    {
    // A.
    // Write string to temporary file.
    string temp = Path.GetTempFileName();
    File.WriteAllText(temp, value);

    // B.
    // Read file into byte array buffer.
    byte[] b;
    using (FileStream f = new FileStream(temp, FileMode.Open))
    {
        b = new byte[f.Length];
        f.Read(b, 0, (int)f.Length);
    }

    using (FileStream f2 = new FileStream(fileName, FileMode.Create))
    using (GZipStream gz = new GZipStream(f2, CompressionMode.Compress, false))
    {
        gz.Write(b, 0, b.Length);
    }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:55:55.070

.pptx 文件（也是 .docx 和 .xlsx）已压缩。如果您将文件扩展名更改为 .zip 并打开文件，您将看到内容。

因此，虽然您应该能够 gzip 其中一个文件，但您不太可能看到大量的进一步压缩。

# python - 导出 xlwt 以打开 Excel 工作表

> ID：14500779
> 
> 赞同：0
> 
> 时间：2013-01-24T11:54:08.793
> 
> 标签：python, excel, xlwt

我正在使用“import xlwt”创建新的 excel 工作表，但它抛出以下错误？

**Traceback（最近一次调用最后一次）：文件“xl.txt”，第 1 行，在 import xlwt ImportError：没有名为 xlwt 的模块**

如何解决这个问题呢 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T12:13:59.057

您需要安装软件包 xlwt。你会在[这里得到包裹](http://pypi.python.org/pypi/xlwt)

# jquery - jQuery手动验证不显示错误

> ID：14500780
> 
> 赞同：3
> 
> 时间：2013-01-24T11:54:13.363
> 
> 标签：jquery, asp.net-mvc, jquery-validate, unobtrusive-validation

我在 ASP.NET MVC 3 中使用 jQuery 验证。是否可以在不显示实际输入旁边的错误消息的情况下检查输入是否有效？

我努力了：

```
$("#myForm").validate().element("#myInput1"); // this shows the error message only for the myInput1 element

$('#myForm').valid(); // this shows the error messages for all fields. 
```

我并不是想永远抑制错误显示，我只是想通过使用在服务器上创建的验证来检查字段是否有效。那一个可能会发生变化，所以我不想有两个验证定义（一个在客户端，一个在服务器上）。谢谢！

后期编辑：

```
var a = $('#myForm').validate({
    errorPlacement: function(error,element) {
                       return true;
                    }
}).element("#myInput1");
alert(a); 
```

这也显示了错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T13:45:15.523

仅返回 true 覆盖 errorPlacement 将意味着不显示所有错误。您可以使用验证器对象上的[check](https://github.com/jzaefferer/jquery-validation/blob/master/jquery.validate.js#L528)方法来悄悄地检查一个字段。它需要一个 DOM 元素作为唯一的参数，因此使用您的代码示例，您将拥有

```
$('#myForm').validate().check($('#myInput1')[0]) 
```

# web-services - 如何从 iTunes API 获取特定剧集？

> ID：14500782
> 
> 赞同：2
> 
> 时间：2013-01-24T11:54:21.540
> 
> 标签：web-services, itunes

如何在 iTunes 商店中获取特定电视剧集的链接？我有节目的名称*、季节和剧集编号。从[文档](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)中，我发现我可以获取剧集列表，然后解析 JSON 以找到剧集及其 iTunes 链接。

但是，文档还说应该避免发出太多或太大的请求（例如，通过使用限制参数），所以我想知道是否有更好的方法来直接获取所需的剧集链接，而无需获取和解析潜在的巨大剧集列表。

* * *

*) 如果季节名称不明确，我有 TVDB 数据，如果需要，还可以指定一个“规范”名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:06:30.803

Search API 有一些参数可以帮助限定您想要返回的内容。

听起来您应该将节目标题用作“术语”。

[https://itunes.apple.com/search?term=Jersey+Shore&attribute=tvSeasonTerm&entity=tvEpisode](https://itunes.apple.com/search?term=Jersey+Shore&attribute=tvSeasonTerm&entity=tvEpisode)

添加“attribute=tvSeason”将确保该术语仅与电视节目标题匹配，而不与 iTunes 商店中的任何其他元数据（包括音乐、电影、应用程序等）匹配。

此外，附加“entity=tvEpisode”将向 API 表明您只希望返回剧集，而不仅仅是季信息（默认情况下）。

# linux - 比较linux终端中的两个文件

> ID：14500787
> 
> 赞同：195
> 
> 时间：2013-01-24T11:54:31.773
> 
> 标签：linux, terminal, diff, file-comparison

有两个名为**“a.txt”**和**“b.txt”**的文件都有一个单词列表。现在我想检查哪些单词在**"a.txt"**中是多余的，而不是在**"b.txt"**中。

我需要一个有效的算法，因为我需要比较两个字典。

* * *

## 回答 #1

> 赞同：392
> 
> 时间：2014-02-13T09:10:26.293

如果你安装了 vim，试试这个：

```
vimdiff file1 file2 
```

或者

```
vim -d file1 file2 
```

你会发现它很棒。![在此处输入图像描述](../Images/e656a295fabe04d1f0e6464237555c01.png)

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2013-01-24T11:56:23.693

对它们进行排序并使用`comm`：

```
comm -23 <(sort a.txt) <(sort b.txt) 
```

`comm`比较（排序的）输入文件，默认输出三列：a 唯一的行，b 唯一的行，以及两者中都存在的行。通过指定`-1`,`-2`和/或`-3`您可以抑制相应的输出。因此`comm -23 a b`仅列出 a 唯一的条目。我使用`<(...)`语法对文件进行动态排序，如果它们已经排序，则不需要它。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2017-10-15T14:16:47.917

如果您更喜欢 diff 输出样式`git diff`，可以将其与`--no-index`标志一起使用来比较不在 git 存储库中的文件：

```
git diff --no-index a.txt b.txt 
```

使用几个文件，每个文件大约有 200k 文件名字符串，我对（使用内置`time`命令）这种方法与这里的其他一些答案进行了基准测试：

```
git diff --no-index a.txt b.txt
# ~1.2s

comm -23 <(sort a.txt) <(sort b.txt)
# ~0.2s

diff a.txt b.txt
# ~2.6s

sdiff a.txt b.txt
# ~2.7s

vimdiff a.txt b.txt
# ~3.2s 
```

`comm`似乎是迄今为止最快的，而`git diff --no-index`似乎是 diff 样式输出的最快方法。

* * *

**更新 2018-03-25**您实际上可以省略该`--no-index`标志，除非您在 git 存储库中并且想要比较该存储库中未跟踪的文件。从[手册页](https://mirrors.edge.kernel.org/pub/software/scm/git/docs/git-diff.html)：

> 这种形式是比较文件系统上给定的两个路径。当在 Git 控制的工作树中运行命令并且至少有一个路径指向工作树之外，或者在 Git 控制的工作树之外运行命令时，您可以省略 --no-index 选项。

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2014-12-27T12:22:17.140

试试`sdiff`( `man sdiff`)

```
sdiff -s file1 file2 
```

* * *

## 回答 #5

> 赞同：34
> 
> 时间：2013-01-24T11:57:16.760

您可以使用`diff`linux 中的工具来比较两个文件。您可以使用**--changed-group-format**和**--unchanged-group-format**选项来过滤所需的数据。

以下三个选项可用于为每个选项选择相关组：

*   '%<' 从 FILE1 获取行

*   '%>' 从 FILE2 获取行

*   ''（空字符串）用于从两个文件中删除行。

> 例如：**diff --changed-group-format="%<" --unchanged-group-format="" file1.txt file2.txt**

```
[root@vmoracle11 tmp]# cat file1.txt 
test one
test two
test three
test four
test eight
[root@vmoracle11 tmp]# cat file2.txt 
test one
test three
test nine
[root@vmoracle11 tmp]# diff --changed-group-format='%<' --unchanged-group-format='' file1.txt file2.txt 
test two
test four
test eight 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-05-16T08:18:07.003

您还可以使用：**colordiff**：用颜色显示 diff 的输出。

关于**vimdiff**：它允许您通过 SSH 比较文件，例如：

```
vimdiff /var/log/secure scp://192.168.1.25/var/log/secure 
```

摘自：[http ://www.sysadmit.com/2016/05/linux-diferencias-entre-dos-archivos.html](http://www.sysadmit.com/2016/05/linux-diferencias-entre-dos-archivos.html)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-06-06T12:34:15.340

另外，不要忘记[mcdiff -](https://www.systutorials.com/docs/linux/man/1-mcdiff/) [GNU Midnight Commander](https://midnight-commander.org/)的内部差异查看器。

例如：

```
mcdiff file1 file2 
```

享受！

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-01-24T11:58:05.517

使用`comm -13` *（需要排序的文件）*：

```
$ cat file1
one
two
three

$ cat file2
one
two
three
four

$ comm -13 <(sort file1) <(sort file2)
four 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-24T13:28:24.617

这是我的解决方案：

```
mkdir temp
mkdir results
cp /usr/share/dict/american-english ~/temp/american-english-dictionary
cp /usr/share/dict/british-english ~/temp/british-english-dictionary
cat ~/temp/american-english-dictionary | wc -l > ~/results/count-american-english-dictionary
cat ~/temp/british-english-dictionary | wc -l > ~/results/count-british-english-dictionary
grep -Fxf ~/temp/american-english-dictionary ~/temp/british-english-dictionary > ~/results/common-english
grep -Fxvf ~/results/common-english ~/temp/american-english-dictionary > ~/results/unique-american-english
grep -Fxvf ~/results/common-english ~/temp/british-english-dictionary > ~/results/unique-british-english 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-02-11T18:08:14.587

您还可以使用：

```
sdiff file1 file2 
```

在终端中并排显示差异！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-08T08:11:25.643

问题的最佳答案是，我使用它（包含在 linux 中） diff a.txt b.txt | grep '<'

扩音器 < extra from a.txt to b.txt :) 意味着 b.txt 没有它们

diff a.txt b.txt | grep '>' 这将给出 a.txt 没有的东西，但这不是问题:)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-10T00:04:17.763

```
diff a.txt b.txt | grep '<' 
```

然后可以管道切割以获得干净的输出

```
diff a.txt b.txt | grep '<' | cut -c 3 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2019-10-03T08:04:10.583

使用 awk 。测试文件：

```
$ cat a.txt
one
two
three
four
four
$ cat b.txt
three
two
one 
```

awk：

```
$ awk '
NR==FNR {                    # process b.txt  or the first file
    seen[$0]                 # hash words to hash seen
    next                     # next word in b.txt
}                            # process a.txt  or all files after the first
!($0 in seen)' b.txt a.txt   # if word is not hashed to seen, output it 
```

输出重复：

```
four
four 
```

为避免重复，请将 a.txt 中每个新遇到的单词添加到`seen`哈希中：

```
$ awk '
NR==FNR {
    seen[$0]
    next
}
!($0 in seen) {              # if word is not hashed to seen
    seen[$0]                 # hash unseen a.txt words to seen to avoid duplicates 
    print                    # and output it
}' b.txt a.txt 
```

输出：

```
four 
```

如果单词列表以逗号分隔，例如：

```
$ cat a.txt
four,four,three,three,two,one
five,six
$ cat b.txt
one,two,three 
```

你必须多跑几圈（`for`循环）：

```
awk -F, '                    # comma-separated input
NR==FNR {
    for(i=1;i<=NF;i++)       # loop all comma-separated fields
        seen[$i]
    next
}
{
    for(i=1;i<=NF;i++)
        if(!($i in seen)) {
             seen[$i]        # this time we buffer output (below):
             buffer=buffer (buffer==""?"":",") $i
        }
    if(buffer!="") {         # output unempty buffers after each record in a.txt
        print buffer
        buffer=""
    }
}' b.txt a.txt 
```

这次输出：

```
four
five,six 
```

# scala - 为什么使用 Tuple0-22 和 Function0-22 而不是 HList

> ID：14500791
> 
> 赞同：6
> 
> 时间：2013-01-24T11:54:41.093
> 
> 标签：scala, scala-collections

是否有原因（性能、内存、类型系统）为什么 Tuple 不是 HList 并且 Function 不是从 HList 到某个值的映射？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T12:05:12.550

性能和内存兼而有之。元组可以`O(1)`访问它们的元素；正如通常构造的那样，`HList`是一个列表，因此具有`O(n)`. 此外，元组需要内存来存储一个`n`引用其他对象的额外对象，而`HList`（作为列表）每个需要一个对象（加上一个`next`指针）。由于一个对象的开销大约是两个引用，这会将`n+2`内存使用量转化为`4n+2`. 对于核心语言结构来说并不是那么棒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T12:25:01.257

扩展[AnyVal](http://jnordenberg.blogspot.de/2009/09/type-lists-and-heterogeneously-typed.html)的HArray 可能具有与 TupleX 类相当的性能和内存要求。唯一的开销是数组长度和数组索引边界检查。

# vba - 向 Word 文档添加书签和交叉引用

> ID：14500792
> 
> 赞同：0
> 
> 时间：2013-01-24T11:54:43.917
> 
> 标签：vba, ms-word, ms-office

在 Word 2010 中，我想将文本添加到文档中，为该文本添加书签，然后在文档的页眉和页脚中交叉引用该文本。

可以记录下来还是我必须对其进行编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:12:03.130

对的，这是可能的。

是的，您可以在 Word 中录制 - 尽管有一些限制，因为在录制模式下您无法通过鼠标浏览文本；生成的代码会很丑陋并且充满“硬编码”，但会给您留下哪些对象、方法和属性可能相关的印象。

如果您想要一个比一次性解决方案更具可持续性的解决方案，那么正确的编码肯定是要走的路。您应该与以下朋友交朋友以解决您的任务：

*   [Selection](http://msdn.microsoft.com/en-us/library/office/ff821411.aspx)对象及其方法，尤其是`GoTo`及其变`Move`体
*   [扩展光标](http://msdn.microsoft.com/en-us/library/office/ff840899.aspx)以标记文本的方法
*   使用各种 Insert... 方法插入文本（例如`Selection.InsertCrossReference ReferenceType:="Bookmark" ...`）
*   将书签添加到[书签](http://msdn.microsoft.com/en-us/library/office/ff821971.aspx)集合
*   了解如何[操作页眉和页脚](http://books.google.at/books?id=n-2NtSJNHBYC&pg=PA469&lpg=PA469&dq=manipulate%20header%20word%20vba&source=bl&ots=GHKomHHf_u&sig=cVogJ9t2N45FQH_BDrRj3sCVo-Y&hl=en&sa=X&ei=rUcCUYbYF8aR0QXF-4Ag&ved=0CFQQ6AEwBg#v=onepage&q&f=false)

如果遇到困难，请尝试一些编码并返回更具体的问题。

# png - 在 windows phone 8 中存储图像

> ID：14500793
> 
> 赞同：0
> 
> 时间：2013-01-24T11:54:48.027
> 
> 标签：png, directory, windows-phone-8, writablebitmap

我一直在尝试将 png 文件写入和读取到 Windows Phone 8 中的文件夹中。从几个博客站点和 codeplex 中，我发现 WritableBitmap 类有一个扩展，它提供了一些额外的功能。[ImageTools](http://imagetools.codeplex.com/)具有 PNG 编码器和解码器。但我真的找不到使用它们的例子。

我在这里试图实现的是创建一个名为 page 的文件夹，然后在其中创建一个名为 Ink File 的文件。我想将位图转换为 PNG 并将其存储在那里。位图是从画布上绘制的笔画创建的。ImageTools 类提供了一个名为 ToImage 的函数，用于将画布中的笔画转换为图像。

用于存放

```
 ExtendedImage myImage = InkCanvas.ToImage();

        var encoder = new PngEncoder();

        var dataFolder = await local.CreateFolderAsync("Page", CreationCollisionOption.OpenIfExists);

        StorageFile Ink_File = await dataFolder.CreateFileAsync("InkFile", CreationCollisionOption.ReplaceExisting);

        using (var stream = await Ink_File.OpenAsync(Windows.Storage.FileAccessMode.ReadWrite))
        {
            using (var s = await Ink_File.OpenStreamForWriteAsync())
            {
                encoder.Encode(myImage, s);
                await s.FlushAsync();
                s.Close();
            }         

        } 
```

这是一个正确的方法吗？我收到一些空异常。我如何找到图像是否保存为png。这个图片是怎么保存的？它是编码并保存在文件中还是保存为 png itef. 我们如何读回来？

我已经检查过[这个](https://stackoverflow.com/questions/14434951/saving-writeablebitmap-to-png)、[这个](http://imagetools.codeplex.com/wikipage?title=Write%20the%20content%20of%20a%20canvas%20to%20a%20file)、[这个](https://stackoverflow.com/questions/7378946/saving-bitmap-as-png-on-wp7)以及更多类似的。我正在为 WP8 开发应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:43:28.810

# ios - 商店中的 iPad 应用程序崩溃，无法处理 TestFlight 日志

> ID：14500794
> 
> 赞同：0
> 
> 时间：2013-01-24T11:54:48.467
> 
> 标签：ios, crash-reports, crash-dumps, testflight, symbolicatecrash

因此，我的应用程序在实时应用程序上的 TestFlight 中出现了许多崩溃日志（仅限 iPad 5.0+）

**2 libsystem_c.dylib 0x332a9e92 _sigtramp + 42**

**3 UIKit 0x34b97372 + 226 ...**

**异常原因：SIGSEGV**

这是 TestFlight 日志中的所有线程...

```
 0 MyApp 0x00214aaa testflight_backtrace + 158
1 MyApp 0x002156d4 TFSignalHandler + 244
2 libsystem_c.dylib 0x332a9e92 _sigtramp + 42
3 UIKit 0x34b97372 <redacted> + 226
4 UIKit 0x34bbe4e4 <redacted> + 88
5 CoreFoundation 0x355b2036 _CFXNotificationPost + 1426
6 Foundation 0x386a5d90 -[NSNotificationCenter postNotificationName:object:userInfo:] + 72
7 Foundation 0x386a9852 -[NSNotificationCenter postNotificationName:object:] + 30
8 UIKit 0x34bbb656 <redacted> + 2182
9 UIKit 0x34b311e6 <redacted> + 2458
10 UIKit 0x34b306cc <redacted> + 72
11 UIKit 0x34b3011a <redacted> + 6154
12 GraphicsServices 0x32efb5a2 _PurpleEventCallback + 590
13 GraphicsServices 0x32efb1d2 PurpleEventCallback + 34
14 CoreFoundation 0x35636172 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 34
15 CoreFoundation 0x35636116 __CFRunLoopDoSource1 + 138
16 CoreFoundation 0x35634f98 __CFRunLoopRun + 1384
17 CoreFoundation 0x355a7ebc CFRunLoopRunSpecific + 356
18 CoreFoundation 0x355a7d48 CFRunLoopRunInMode + 104
19 GraphicsServices 0x32efa2ea GSEventRunModal + 74
20 UIKit 0x34b842f8 UIApplicationMain + 1120
21 MyApp 0x001cf4dc _ZN17ofAppiPhoneWindow20startAppWithDelegateESs + 168
22 MyApp 0x001cf364 _ZN17ofAppiPhoneWindow21runAppViaInfiniteLoopEP9ofBaseApp + 200
23 MyApp 0x001dd7ce _Z8ofRunAppP9ofBaseApp + 422
24 MyApp 0x000027aa main (main.mm:13)
25 MyApp 0x0000271b start + 39

com.apple.NSURLConnectionLoader
0 CoreFoundation 0x35634da2 __CFRunLoopRun + 882
1 CoreFoundation 0x355a7ebc CFRunLoopRunSpecific + 356
2 CoreFoundation 0x355a7d48 CFRunLoopRunInMode + 104
3 Foundation 0x386d1bcc +[NSURLConnection(Loader) _resourceLoadLoop:] + 308
4 Foundation 0x3875567c __NSThread__main__ + 972
5 libsystem_c.dylib 0x33282310 _pthread_start + 308
6 libsystem_c.dylib 0x332821d7 thread_start + 7

com.apple.coremedia.player.async
0 CoreMedia 0x3235b9a8 FigSemaphoreWaitRelative + 260
1 MediaToolbox 0x33fbd35a <redacted> + 26
2 CoreMedia 0x3237998a <redacted> + 194
3 libsystem_c.dylib 0x33282310 _pthread_start + 308
4 libsystem_c.dylib 0x332821d7 thread_start + 7

AURemoteIO::IOThread
0 AudioToolbox 0x32812990 _ZN10AURemoteIO8IOThread5EntryEPv + 8
1 AudioToolbox 0x327508a4 _ZN9CAPThread5EntryEPS_ + 296
2 libsystem_c.dylib 0x33282310 _pthread_start + 308
3 libsystem_c.dylib 0x332821d7 thread_start + 7

Thread 11
0 libsystem_c.dylib 0x332778a3 start_wqthread + 7

Thread 14
0 libsystem_c.dylib 0x332778a3 start_wqthread + 7

WebThread
0 CoreFoundation 0x35634da2 __CFRunLoopRun + 882
1 CoreFoundation 0x355a7ebc CFRunLoopRunSpecific + 356
2 CoreFoundation 0x355a7d48 CFRunLoopRunInMode + 104
3 WebCore 0x35ca2a44 <redacted> + 444
4 libsystem_c.dylib 0x33282310 _pthread_start + 308
5 libsystem_c.dylib 0x332821d7 thread_start + 7

Thread 8
0 libsystem_c.dylib 0x332778a3 start_wqthread + 7

com.apple.CFSocket.private
0 libsystem_c.dylib 0x332821d7 thread_start + 7

com.apple.coremedia.player.remote
0 CoreMedia 0x3237998a <redacted> + 194
1 libsystem_c.dylib 0x33282310 _pthread_start + 308
2 libsystem_c.dylib 0x332821d7 thread_start + 7

Thread 1
0 libsystem_c.dylib 0x332778a3 start_wqthread + 7

Thread 2
0 0xffffffff 0xffffffff

Thread 3
0 libsystem_c.dylib 0x332778a3 start_wqthread + 7

Thread 6
0 libsystem_c.dylib 0x332778a3 start_wqthread + 7

Thread 7
0 CoreFoundation 0x35634da2 __CFRunLoopRun + 882
1 CoreFoundation 0x355a7ebc CFRunLoopRunSpecific + 356
2 CoreFoundation 0x355a7d48 CFRunLoopRunInMode + 104
3 Foundation 0x386a878e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 254
4 Foundation 0x3874c05c -[NSRunLoop(NSRunLoop) run] + 80
5 MyApp 0x0022a578 -[TFNetworkManager networkRunLoopThreadEntry] + 124
6 Foundation 0x3875567c __NSThread__main__ + 972
7 libsystem_c.dylib 0x33282310 _pthread_start + 308
8 libsystem_c.dylib 0x332821d7 thread_start + 7

Load Address
0x00001000

Register Values

cpsr: 48
exception: 0
far: 3758096392
fsr: 5
lr: 884568947
pc: 975418800
r0: 25362176
r1: 888934373
r10: 0
r11: 8398466
r12: 994475364
r2: 25175555
r3: 3
r4: 3758096384
r5: 3
r6: 148
r7: 803202360
r8: 2
r9: 222233593
sp: 803202292 
```

我无法弄清楚为什么它可能会崩溃。NSNotificationCenter postNotificationName 要做些什么？

如果您有任何想法，他们将不胜感激，

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:01:17.080

每次解除分配视图时，您都需要取消订阅通知。

# django - 如何更改要传递给 inlineformset_factory 的表单中某个字段的查询集

> ID：14500795
> 
> 赞同：1
> 
> 时间：2013-01-24T11:54:49.477
> 
> 标签：django, django-views, inline-formset

我正在使用 django 额外视图：

```
# views.py
from django.forms.models import inlineformset_factory
from extra_views import (CreateWithInlinesView, UpdateWithInlinesView,
                        InlineFormSet, )

class LinkInline(InlineFormSet):
    model = Link
    form = LinkForm
    extra = 1

    def get_form(self):
        return LinkForm({})

    def get_formset(self):
        return inlineformset_factory(self.model, self.get_inline_model(), form=LinkForm, **self.get_factory_kwargs())

class TargetCreateView(BaseSingleClient, CreateWithInlinesView):
    model = Target
    form_class = TargetForm
    inlines = [LinkInline, ]
    template_name = 'clients/target_form.html' 
```

我希望这个“关键字”字段根据我通过 url 传递给视图的 pk 进行更改。

```
# forms.py
class LinkForm(forms.ModelForm):
    keywords = forms.ModelMultipleChoiceField(queryset=ClientKeyword.objects.filter(client__pk=1))

    class Meta:
        model = Link 
```

我可以设法覆盖表单的**init**，但是：

1.  我无法访问 LinkInline 中的 self.kwargs

2.  即使我这样做了，我也不确定是否可以将实例化表单传递给 inlineformset_factory()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:36:08.160

好的，如果有任何可怜的灵魂需要回答如何实现这一点......我设法通过覆盖construct_inlines（）（它是extra_views.advanced.ModelFormWithInlinesMixin的一部分）并在那里修改该字段的查询集来做到这一点。

```
class TargetCreateView(BaseSingleClient, CreateWithInlinesView):
    model = Target
    form_class = TargetForm
    inlines = [LinkInline, ]
    template_name = 'clients/target_form.html'

    def construct_inlines(self):
        '''I need to overwrite this method in order to change
        the queryset for the "keywords" field'''
        inline_formsets = super(TargetCreateView, self).construct_inlines()
        inline_formsets[0].forms[0].fields[
                'keywords'].queryset = ClientKeyword.objects.filter(
                        client__pk=self.kwargs['pk'])
        return inline_formsets

    def forms_valid(self, form, inlines):
        context_data = self.get_context_data()
        # We need the client instance
        client = context_data['client_obj']
        # And the cleaned_data from the form
        data = form.cleaned_data
        self.object = self.model(
                client=client,
                budget=data['budget'],
                month=data['month']
        )
        self.object.save()
        for formset in inlines:
            f_cd = formset.cleaned_data[0]
            print self.object.pk
            link = Link(client=client,
                    target=self.object,
                    link_type=f_cd['link_type'],
                    month=self.object.month,
                    status='PEN',
            )
            # save the object so we can add the M2M fields
            link.save()
            for kw in f_cd['keywords'].all():
                link.keywords.add(kw)
        return HttpResponseRedirect(self.get_success_url()) 
```

# asp.net - 使用 customErrors 重定向时如何返回合理的错误代码？

> ID：14500797
> 
> 赞同：2
> 
> 时间：2013-01-24T11:55:03.043
> 
> 标签：asp.net, iis, web-config, custom-errors, http-error

在我的 ASP.NET 网站的 web.config 中，我已`customErrors`打开并设置为在 HTTP 404 的情况下重定向到特定操作：

现在我启动 Fiddler 并在我的浏览器中查询一些产生 HTTP 404 的 URL。Fiddler 清楚地表明，首先浏览器查询该 URL 并获取带有路径的 HTTP 302`<...>/Error/FileNotFound`并查询该路径，最后接收 HTTP 200。

因此，原来的 HTTP 404 有效地消失了，我得到了 HTTP 302，然后是 HTTP 200。

同时，如果我从 StackOverflow 查询一些无效地址（例如[https://stackoverflow.com/ques/ask](https://stackoverflow.com/ques/ask)），我会在单个请求中获得 HTTP 404。我提到这一点是因为 StackOverflow 也使用 ASP.NET。

如何`customErrors`在 IIS 中使用 HTTP 404 而不是 HTTP 302 后跟 HTTP 200？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:59:36.507

在`customErrors`节点中，您可以设置以下属性：

```
redirectMode="ResponseRewrite" 
```

这将阻止页面重定向，而是*写入*错误页面而不是请求的页面。

注意：您还必须确保用作 404 错误页面的页面实际上本身在代码隐藏中返回 404 状态代码；MS 重写支持不会自动传递状态代码，请参见链接：

[https://connect.microsoft.com/VisualStudio/feedback/details/507171/asp-net-returns-incorrect-status-code-even-with-redirectmode-responserewrite](https://connect.microsoft.com/VisualStudio/feedback/details/507171/asp-net-returns-incorrect-status-code-even-with-redirectmode-responserewrite)

# xml - 如何在 XML 文档中包含 & 字符？

> ID：14500800
> 
> 赞同：34
> 
> 时间：2013-01-24T11:55:09.103
> 
> 标签：xml, validation

如何`&`在保持 XML 有效的同时将符号放入 XML 标记的属性中？

```
<?xml version="1.0" ?> 
<a text="b&c"/> 
```

当我使用[W3School 的验证器](http://www.w3schools.com/xml/xml_validator.asp)时，出现错误：

> EntityRef：期待“ `;`”

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-01-24T11:57:23.690

使用字符引用来表示它：`&amp;`

见[规格](http://www.w3.org/TR/xml/)：

> & 符号 (&) 和左尖括号 (<) 不得以其文字形式出现，除非用作标记分隔符，或者在注释、处理指令或 CDATA 部分中。如果在其他地方需要它们，它们必须分别使用数字字符引用或字符串“ `&amp;` ”和“ `&lt;` ”进行转义。右尖括号 (>) 可以使用字符串“ `&gt;` ”来表示，并且为了兼容性，必须使用“ `&gt;` ”或出现在字符串中时的字符引用来转义“ `]]>` " 在内容中，当该字符串未标记 CDATA 部分的结尾时。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-04-19T11:55:15.903

您可以使用这些转义序列：

```
< (less-than)                   -   &#60; or &lt;

> (greater-than)                -   &#62; or  &gt;

& (ampersand)                   -   &#38;

' (apostrophe or single quote)  -   &#39;

" (double-quote)                -   &#34; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-10-21T12:12:16.893

```
Re: XML and ampersand in links - not parsing
You should escape & with 

> Blockquote &amp; in an XML or HTML document.ocument. 
```

# python - django url 中的文件服务排除错误

> ID：14500801
> 
> 赞同：0
> 
> 时间：2013-01-24T11:55:11.233
> 
> 标签：python, regex, django, django-urls

我在 Django 中的 urls.py 文件有问题，它允许我在任何地方访问我的管理界面，在任何地方加载图像。如果有人可以看看它，提前谢谢！

```
from django.conf.urls import patterns, include, url
from django.contrib import admin
from django.conf import settings

urlpatterns = patterns('',
    (r'^admin/doc/', include('django.contrib.admindocs.urls')),
    (r'^admin/', include(admin.site.urls)),

    url(r'^admin/files/(?P<filepath>.*)$', 'my.app.admin.serv_backup_files', name='admin-file-serv'),

    (r'^(?P<restaurant_slug>[^(admin)][a-zA-B-_0-9]+)$', TemplateView.as_view(template_name=os.path.join(settings.G_DOC_ROOT, 'index.html'))),
    (r'^(?P<path>[^(admin)].*)$', 'django.views.static.serve', {'document_root': settings.G_DOC_ROOT}),
) 
```

问题是，通过这种配置，我在运行服务器的控制台上看到了类似的东西

> “获取 /img/field_bg.gif HTTP/1.1”404

对于所有应该静态提供的图像。

我可以`[^(admin)]`从最后一个模式中删除 并且该站点将得到很好的服务，除了它会尝试将管理界面重新路由到静态文件。

在此先感谢您帮助我结合静态文件、无子域 TemplateViewing 和管理员正常访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:33:52.080

我不太了解python正则表达式，但是在我曾经使用过的任何其他风格中，**都会**匹配`[^(admin)]`一个**字符**，除了' **（****'** OR'a'OR'd'OR'm'OR'i'OR'之外的**任何****东西****n** '或' **)** '。字符类 ( ) 匹配单个字符，而不是短语。**********`[...]`**********

 ******如果您尝试不匹配“（管理员）”，那么您可以使用负前瞻，如下所示：

```
^(?P<restaurant_slug>(?!\(admin\))[a-zA-B-_0-9]+)$ 
```

或者，更有可能的是，您试图不匹配“管理员”：

```
^(?P<restaurant_slug>(?!admin)[a-zA-B-_0-9]+)$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:36:29.040

看起来您需要添加[`ADMIN_STATIC_PREFIX`](https://docs.djangoproject.com/en/1.3/ref/settings/#admin-media-prefix)到您的设置和网址。******

# jquery - iPad 设备上的溢出 x 和 y 未显示

> ID：14500803
> 
> 赞同：0
> 
> 时间：2013-01-24T11:55:14.313
> 
> 标签：jquery, html, ios, css, overflow

我在让滚动条显示在 iPad 设备上的 div 上时遇到问题。

我在用：

```
-webkit-overflow-scrolling: touch; 
```

这是可行的，但是我希望在用户实际触摸`div`以启用滚动条之前滚动条可见！

我只希望`overflow-y`当您进入页面时在 iPad 上可见，然后一旦用户触摸 div 仅显示`overflow-y`!

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:40:00.790

听起来您需要 JavaScript 来更改样式或添加/删除类。

CSS

```
.match{
    overflow-y:scroll;
}
.match.post-scroll{
    -webkit-overflow-scrolling:touch;
} 
```

JS（使用 jQuery）

```
$(".match").one("click", function(){
    $(this).addClass("post-scroll");
}); 
```

# java - Jetty uberjar jndi 数据源配置

> ID：14500809
> 
> 赞同：0
> 
> 时间：2013-01-24T11:55:41.597
> 
> 标签：java, jetty, datasource, jndi, uberjar

更具体地说，我得到了包含所有依赖项的可执行战争。应用程序在没有 jndi 数据源的情况下启动，就像使用 jndi 数据源运行它的魅力一样，但失败了。我相信在这样的配置中没有jetty.xml的位置，所以jetty-env.xml也不行，因为jetty默认不会读取它。我尝试使用 jetty-web.xml 进行 jndi 数据源配置，但 jetty 无法部署应用程序并返回 503 错误代码。我正在使用 Jetty9-M4。尝试了 tomcat pooling 和 BoneCP 都具有相同的结果。

入门班：

```
import java.net.URL;
import java.security.ProtectionDomain;
import org.eclipse.jetty.server.*;
import org.eclipse.jetty.webapp.WebAppContext;

public final class Loader {

    public static void main(String[] args) throws Exception
    {
         String jetty_home = "..";
         int appli_port = 8080;
         Server server = new Server(appli_port);
         ProtectionDomain protectionDomain = Loader.class.getProtectionDomain();
         URL location = protectionDomain.getCodeSource().getLocation();
         WebAppContext webapp = new WebAppContext();
         webapp.setContextPath("/");
         webapp.setWar(location.toExternalForm());    
         server.setHandler(webapp);

         server.start();
         server.join();
    }
} 
```

码头-web.xml：

```
<Configure class="org.eclipse.jetty.webapp.WebAppContext">
    <New id="testDS" class="org.eclipse.jetty.plus.jndi.Resource">
        <Arg></Arg>
        <Arg>jdbc/testDS</Arg>
        <Arg>
            <New class="com.jolbox.bonecp.BoneCPDataSource">
                <Set name="driverClass">org.postgresql.Driver</Set>
                <Set name="jdbcUrl">jdbc:postgresql://localhost:5432/testDS</Set>
                <Set name="username">name</Set>
                <Set name="password">password</Set>
                <Set name="minConnectionsPerPartition">5</Set>
                <Set name="maxConnectionsPerPartition">50</Set>
                <Set name="acquireIncrement">5</Set>
                <Set name="idleConnectionTestPeriod">30</Set>
            </New>
        </Arg>
    </New>
</Configure> 
```

我怀疑 jndi 在 jetty-web 阶段或配置为时已晚，这是错误的。

抱歉英语不好。

* * *

忘了提我正在使用 Hibernate 作为 ORM。

web.xml 包含：

```
<resource-ref>
    <description>Postgres datasource</description>
    <res-ref-name>jdbc/testDS</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

Hibernate.cfg.xml 包含

```
<property name="hibernate.connection.datasource">java:comp/env/jdbc/testDS</property> 
```

尝试过

```
<property name="hibernate.connection.datasource">jdbc/testDS</property> 
```

也不工作。

* * *

`jetty-web.xml`作为你的战争中的一个小注解`WEB-INF`，它适用于 JNDI 资源配置，默认情况下使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:27:22.743

`jetty-env.xml`文件应自动从 WEB-INF/jetty-env.xml 中获取，请参见此处： http: [//www.eclipse.org/jetty/documentation/current/jetty-env-xml.html](http://www.eclipse.org/jetty/documentation/current/jetty-env-xml.html)。我建议与`jetty-env.xml`而不是`jetty-web.xml`.

您是否还可以展示您是如何在应用程序中执行 JNDI 查找的？也许 JNDI 数据源已正确初始化，但 JNDI 名称不正确？

这里有一些码头 JNDI 示例：http: [//www.eclipse.org/jetty/documentation/current/jndi-datasource-examples.html](http://www.eclipse.org/jetty/documentation/current/jndi-datasource-examples.html)

**更新**：似乎 Jetty 在嵌入式运行时不会自动拾取它。试试这个：

```
public static void main(String[] args) throws Exception
{
    String jetty_home = "..";
    int appli_port = 8080;
    Server server = new Server(appli_port);
    ProtectionDomain protectionDomain = Loader.class.getProtectionDomain();
    URL location = protectionDomain.getCodeSource().getLocation();
    WebAppContext webapp = new WebAppContext();
    webapp.setContextPath("/");
    webapp.setWar(location.toExternalForm());

    // setup JNDI
    EnvConfiguration envConfiguration = new EnvConfiguration();
    URL url = new File("path to jetty-env.xml").toURI().toURL();
    envConfiguration.setJettyEnvXml(url);
    webapp.setConfigurations(new Configuration[] {new WebInfConfiguration(), envConfiguration, new WebXmlConfiguration()});

    server.setHandler(webapp); 
    server.start();
    server.join();
} 
```

（见[http://blog.armhold.com/2011/12/27/how-to-get-jndi-working-with-wicket-1-5-and-jetty-7-5/](http://blog.armhold.com/2011/12/27/how-to-get-jndi-working-with-wicket-1-5-and-jetty-7-5/)）

# c# - 观察到的任务异常调用 TaskScheduler.UnobservedTaskException

> ID：14500810
> 
> 赞同：1
> 
> 时间：2013-01-24T11:55:44.220
> 
> 标签：c#, asynchronous, task-parallel-library, task

我的应用程序是 .NET 4.5，我有一个事件处理程序，可以记录未观察到的任务异常的所有错误。

```
TaskScheduler.UnobservedTaskException += (sender, e) => e.Exception.Handle(ex =>
{
    logger.Error(e.Exception);
    return false;
}); 
```

我返回 false，关闭应用程序。模拟 .NET 4.0 行为。

我的问题是，如果我观察结果，为什么这段代码会调用事件并因此导致我的应用程序崩溃？

```
try
{
    var resultado = httpClient.GetAsync('http://.....').Result;
}
catch (Exception ex)
{
    logger.Error(ex);
} 
```

**更新：**经过一些调试，我发现当我没有调用 .Result 并导致问题时我有另一个任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:35:32.370

你应该设置`UnobservedTaskExceptionEventArgs.Observed`为true。在这一点上观察结果没有任何效果，尽管人们可能有理由相信它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:11:41.323

经过一些调试，我发现当我没有调用 .Result 并导致问题时我有另一个任务。

# alfresco - Alfresco 4.2c 自定义内容类型未显示在共享中

> ID：14500814
> 
> 赞同：1
> 
> 时间：2013-01-24T11:55:54.993
> 
> 标签：alfresco, alfresco-share

我已经从安装在 Ubuntu Server 12.04LTS 中的 .bin 安装了 Alfresco 4.2c

我按照[ecmarchitect.com“使用自定义内容类型”](http://ecmarchitect.com/images/articles/alfresco-content/content-article-2ed.pdf)第二版创建了一个新的内容类型。

所以我创建了以下文件：

全部在 /opt/alfresco-4.2.c/tomcat/webapps：

*   /share/WEB-INF/classes/alfresco/web-extension/share-config-custom.xml
*   /alfresco/WEB-INF/classes/alfresco/extension/mypro-model-context.xml
*   /alfresco/WEB-INF/classes/alfresco/extension/model/apModel.xml

所有这些都是用指南中的一个非常基本的示例创建的。然后我做了“sudo service alfresco restart”，当我以管理员身份登录共享时，我在规则中看不到我的自定义内容类型和方面。

此外，我无法在文档库中创建任何自定义内容。

还有什么我需要做的吗？我该如何开始调试原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T12:41:40.837

第 24 页：将等效表单配置放入 share-config-custom.xml

```
<config evaluator="aspect" condition="sc:webable">
<forms>
<form>
<field-visibility>
<show id="sc:published" />
<show id="sc:isActive" />
</field-visibility>
<appearance>
<field id="sc:published" label-id="prop.sc_published" />
<field id="sc:isActive" label-id="prop.sc_isActive" />
</appearance>
</form>
</forms>
</config> 
```

对于类型使用评估器“节点类型”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:39:44.553

你应该配置你的 share-config-custom.xml 文件：

```
 <aspects>
     <!-- Aspects that a user can see -->
     <visible>
        <aspect name="cm:generalclassifiable" />
        <aspect name="cm:complianceable" />
        <aspect name="cm:dublincore" />
        <aspect name="cm:effectivity" />
        <aspect name="cm:summarizable" />
        <aspect name="cm:versionable" />
        <aspect name="cm:templatable" />
        <aspect name="cm:emailed" />
        <aspect name="emailserver:aliasable" />
        <aspect name="cm:taggable" />
        <aspect name="app:inlineeditable" />
        <aspect name="custom:customAspect" />
     </visible>

     <!-- Aspects that a user can add. Same as "visible" if left empty -->
     <addable>
     </addable>

     <!-- Aspects that a user can remove. Same as "visible" if left empty -->
     <removeable>
     </removeable>
  </aspects> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-01T16:27:59.413

您的问题很可能与您的自定义文件的位置有关。你不应该弄乱/WEB-INF 下的文件。查看此博客文章了解更多信息：[http ://www.fossoffice.com/en/2013/05/01/custom-types-and-aspects-in-alfresco-4-2-c/](http://www.fossoffice.com/en/2013/05/01/custom-types-and-aspects-in-alfresco-4-2-c/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-06T13:57:08.410

> 我该如何开始调试原因？

尝试创建一个文本内容类型。然后尝试将此项目的类型更改为您的自定义类型。我发现我能够做到这一点，然后才能直接从下拉列表中创建自定义类型。

这至少会告诉您 Alfresco 是否知道您的自定义类型。

# c# - 为什么 Webrequest 将 \n 和 \" 添加到结果中？

> ID：14500815
> 
> 赞同：0
> 
> 时间：2013-01-24T11:56:02.043
> 
> 标签：c#, json, serialization, webrequest

我想使用一个 json 网络服务。当我触发 webrequest 时，.NET 将 \n 和 \" 添加到结果中。

我尝试了 WebRequest 和 RestSharp。但由于这些字符，我无法反序列化。

结果在 Internet Explorer 中：

```
{
 "resultCount":1,
 "results": [
{"wrapperType":"track", "kind":"feature-movie", "trackId":279990601, "artistName":".... 
```

导致.NET：（另一个请求）

```
"\n\n\n{\n \"resultCount\":50,\n \"results\": [\n{\"kind\":\"software\", \"features\":[\"iosUniversal\"] 
```

谢谢您的帮助

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:57:50.440

这只是视觉工作室在变量检查器中添加转义字符。它们没有在后台添加，您的实际变量不包含这些额外的字符。\n 表示换行，\" 转义 " 字符。

# c# - Windows 8 C# 从多个地方访问文件得到拒绝访问错误

> ID：14500820
> 
> 赞同：2
> 
> 时间：2013-01-24T11:56:23.510
> 
> 标签：c#, .net, file, windows-8, locking

我正在尝试将一些数据保存在一个文件中，但是这个文件被不同的方法多次访问，因此给了我访问被拒绝的错误。如何对以下方法应用锁定以访问文件？

代码：

```
public static async Task SaveDataToFileAsync<T>(string key, T value, bool roaming = false, Type[] extraTypes = null)
{
    var file = roaming ? await KnownFolders.DocumentsLibrary.CreateFileAsync(key + ".xml", CreationCollisionOption.ReplaceExisting) :
    await KnownFolders.DocumentsLibrary.CreateFileAsync(key + ".xml", CreationCollisionOption.ReplaceExisting);

    var xml = Xml.Serialize<T>(value, extraTypes);
    await FileIO.WriteTextAsync(file, xml, UnicodeEncoding.Utf8);
}

public static async Task<T> GetdataFromFileAsync<T>(string key, T defaultValue, bool roaming = false, Type[] extraTypes = null)
{
    var file = roaming ? await KnownFolders.DocumentsLibrary.CreateFileAsync(key + ".xml", CreationCollisionOption.OpenIfExists) :
    await KnownFolders.DocumentsLibrary.CreateFileAsync(key + ".xml", CreationCollisionOption.OpenIfExists);

    var xml = await FileIO.ReadTextAsync(file, UnicodeEncoding.Utf8);
    return !String.IsNullOrEmpty(xml) ? Xml.Deserialize<T>(xml, extraTypes) : defaultValue;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:09:16.740

您可以使用[`SemaphoreSlim`](http://msdn.microsoft.com/en-us/library/vstudio/system.threading.semaphoreslim%28v=vs.110%29.aspx)或[Stephen Toub 的`AsyncLock`](http://blogs.msdn.com/b/pfxteam/archive/2012/02/12/10266988.aspx). `AsyncLock`也可作为我的 AsyncEx 库的[一部分使用。](http://nitoasyncex.codeplex.com/wikipage?title=AsyncLock)

这是 的示例`AsyncLock`，它的语法比 更自然`SemaphoreSlim`：

```
private static AsyncLock mutex = new AsyncLock();
public static async Task SaveDataToFileAsync<T>(string key, T value, bool roaming = false, Type[] extraTypes = null)
{
  using (await mutex.LockAsync())
  {
    var file = roaming ? await KnownFolders.DocumentsLibrary.CreateFileAsync(key + ".xml", CreationCollisionOption.ReplaceExisting) :
    await KnownFolders.DocumentsLibrary.CreateFileAsync(key + ".xml", CreationCollisionOption.ReplaceExisting);

    var xml = Xml.Serialize<T>(value, extraTypes);
    await FileIO.WriteTextAsync(file, xml, UnicodeEncoding.Utf8);
  }
} 
```

# c - 私有函数声明 gcc vs msvc

> ID：14500825
> 
> 赞同：0
> 
> 时间：2013-01-24T11:56:35.467
> 
> 标签：c, visual-studio-2010

我不是 C 程序员，我正在尝试将补丁应用于可以使用 MSVC 正常编译的项目，但是为 *nix 提供了补丁。当我尝试编译修补项目时，`nmake`出现此错误：

`error C2054: expected '(' to follow '__private'`

引发此错误的代码是这样的：

```
private drawlist *
drawlist_append(p2mem *mem, drawlist_head *head)
{
    drawlist *d = p2mem_alloc(mem, sizeof(drawlist));
    if (!d) return 0;
    memset(d, 0, sizeof(drawlist));
    d->color = gx_no_color_index;
    d->next = 0;
    d->prev = head->last;
    head->last = d;
    (d->prev) ? (d->prev->next = d) : (head->first = d);
    return d;
} 
```

通过谷歌搜索，我怀疑 MSVC 不接受这种声明，但我不知道如何更改代码，因为如前所述，我不是 C/C++ 程序员。谁能协助如何更改此`private`函数调用以使其对 MSVC 有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:58:47.613

*C++ 会在声明*中要求这个

 *```
private:
 drawlist * drawlist_append(p2mem *mem, drawlist_head *head) { ..... } 
```

接下来的一切都是`private`私人的。

C没有诸如`private`等的概念`public`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T12:01:22.217

如果`drawlist_append`是内部声明的成员函数`class`，您可以尝试：

```
private:
drawlist* drawlist_append(p2mem *mem, drawlist_head *head) 
```

如果 drawlist_append 是一个独立的函数，你只需 remove `private`，你可以试试这个：

```
drawlist* drawlist_append(p2mem *mem, drawlist_head *head) 
```

另一种可能性是补丁提供者的意思是`static`而不是`private`. 您可以尝试为 *nix C 添加以下宏：

```
#define private static 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T12:06:28.477

此代码依赖于以下内容：

```
#ifndef private
# define private static
#endif 
```

不幸的是，微软的编译器已经有了一个扩展。

我建议你添加

```
#ifdef private
#undef private
#endif
#define private static 
```

到文件的顶部，或者只是将“私有”替换为“静态”。*

# windows - 用于文件复制子目录的 Windows 命令

> ID：14500828
> 
> 赞同：0
> 
> 时间：2013-01-24T11:56:46.443
> 
> 标签：windows, copy, command, xcopy

使用 forfiles Windows 命令，我想复制一个目录和每个子目录。为此，我试过这个：

```
forfiles /S /P  %myDirectoryPath% /C "CMD /C xcopy @path %NewPath% /Y /V /E" 
```

但是子目录中包含的所有文件都复制到与主目录的文件相同的文件夹中。

我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:05:05.160

你应该可以`xcopy`用来复制目录树

```
xcopy %myDirectoryPath% %NewPath% /t /e 
```

或者使用`robocopy`

```
robocopy %myDirectoryPath% %NewPath% /e /create 
```

# gcc - 使用 UMFPACK 编译示例文件时出错

> ID：14500830
> 
> 赞同：0
> 
> 时间：2013-01-24T11:57:00.103
> 
> 标签：gcc, blas, umfpack

我想从 UMFPACK 的 Demos 编译一个非常 umfpack_simple.c 但我收到以下错误：

```
[root@localhost Test]# gcc -I../UMFPACK/Include -I../AMD/Include -

I../SuiteSparse_config -I../GotoBLAS2 umfpack_simple.c libumfpack.a libamd.a libgoto2.a libsuitesparseconfig.a libgoto2_nehalem-ra.13.a -lrt
gcc: error: libgoto2_nehalem-ra.13.a: No such file or directory
[root@localhost Test]# ls
libamd.a    libgoto2_nehalem-r1.13.a  libumfpack.a
libgoto2.a  libsuitesparseconfig.a    umfpack_simple.c
[root@localhost Test]# gcc -I../UMFPACK/Include -I../AMD/Include -I../SuiteSparse_config -I../GotoBLAS2 umfpack_simple.c libumfpack.a libamd.a libgoto2.a libsuitesparseconfig.a libgoto2_nehalem-r1.13.a -lrt
libumfpack.a(umf_di_mem_alloc_element.o): In function `umfdi_mem_alloc_element':
umf_mem_alloc_element.c:(.text+0x88): undefined reference to `ceil'
umf_mem_alloc_element.c:(.text+0xb6): undefined reference to `ceil'
libumfpack.a(umf_di_set_stats.o): In function `umf_i_set_stats':
umf_set_stats.c:(.text+0x151): undefined reference to `ceil'
umf_set_stats.c:(.text+0x185): undefined reference to `ceil'
umf_set_stats.c:(.text+0x1ae): undefined reference to `ceil'
libumfpack.a(umf_di_set_stats.o):umf_set_stats.c:(.text+0x207): more undefined references to `ceil' follow
libumfpack.a(umf_di_start_front.o): In function `umfdi_start_front':
umf_start_front.c:(.text+0x397): undefined reference to `sqrt'
umf_start_front.c:(.text+0x3b5): undefined reference to `sqrt'
libumfpack.a(umfpack_di_qsymbolic.o): In function `symbolic_analysis':
umfpack_qsymbolic.c:(.text+0x715): undefined reference to `ceil'
umfpack_qsymbolic.c:(.text+0x745): undefined reference to `ceil'
umfpack_qsymbolic.c:(.text+0x76d): undefined reference to `ceil'
umfpack_qsymbolic.c:(.text+0x79e): undefined reference to `ceil'
umfpack_qsymbolic.c:(.text+0x7d8): undefined reference to `ceil'
libumfpack.a(umfpack_di_qsymbolic.o):umfpack_qsymbolic.c:(.text+0x803): more undefined references to `ceil' follow
libumfpack.a(umfpack_di_qsymbolic.o): In function `symbolic_analysis':
umfpack_qsymbolic.c:(.text+0x4e23): undefined reference to `sqrt'
umfpack_qsymbolic.c:(.text+0x4fb4): undefined reference to `sqrt'
libumfpack.a(umf_i_colamd.o): In function `umf_i_colamd':
umf_colamd.c:(.text+0x1a82): undefined reference to `sqrt'
umf_colamd.c:(.text+0x1ab8): undefined reference to `sqrt'
umf_colamd.c:(.text+0x1aec): undefined reference to `sqrt'
libumfpack.a(umf_i_colamd.o):umf_colamd.c:(.text+0x1b15): more undefined references to `sqrt' follow
collect2: error: ld returned 1 exit status 
```

可以看出，我错过了一些定义 ceil 和 sqrt 的库。我正在使用 GotoBLAS2 和 UMFPACK。请让我知道问题出在哪里。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:21:26.180

`ceil`和`sqrt`libmath类似的函数

您只需要编译字符串中的 -lm 即可。所以试试：

`gcc -I../UMFPACK/Include -I../AMD/Include -I../SuiteSparse_config -I../GotoBLAS2 umfpack_simple.c libumfpack.a libamd.a libgoto2.a libsuitesparseconfig.a libgoto2_nehalem-r1.13.a -lm -lrt`

我还要注意，您可以使用`-L`选项来指定库搜索路径。

UPD：在评论中回答您的问题，不，您不能指定“默认”libmath（除非您不编辑编译器后端，您可以在 LINK_SPECS 中执行此操作）

但即使你正在编辑后端，默认的 libmath 也是个坏主意，因为命令行中库的顺序很重要。如果您的 .c 文件使用库，则必须在此文件之后的命令行中指定它，类似地适用于库间依赖关系。因此，无论您是否指定了 libmath，它不仅会起作用，而且它在命令行中出现的位置也很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:20:19.590

实际上，我发现我必须将 -lm 添加到 gcc。这很奇怪，因为要知道我们需要什么库并每次都添加它们需要付出很多努力。有没有办法永久添加（例如数学）库？谢谢

# python - python中的上下文最常用词语料库

> ID：14500831
> 
> 赞同：0
> 
> 时间：2013-01-24T11:57:02.747
> 
> 标签：python, nltk

在使用以下 def 查找语料库中最常用的 10 个单词（使用 Python）后，我必须比较这 10 个单词在所述语料库的不同子类别中的上下文。

```
def meest_freq(mycorpus):
    import string
    woorden = mycorpus.words()
    zonderhoofdletters = [word.lower() for word in woorden]
    filtered = [word for word in zonderhoofdletters if word not in stopList]
    no_punct = [s.translate(None, string.punctuation) for s in filtered]
    word_counter = {}
    D = defaultdict(int)
    for word in no_punct:
        D[word] +=1
    popular_words = sorted(D, key = D.get, reverse = True)
    woord1 = popular_words[1]
    woord2 = popular_words[2]
    woord3 = popular_words[3]
    woord4 = popular_words[4]
    woord5 = popular_words[5]
    woord6 = popular_words[6]
    woord7 = popular_words[7]
    woord8 = popular_words[8]
    woord9 = popular_words[9]
    woord10 = popular_words[10]
    print "De 10 meest frequente woorden zijn: ", woord1, ",", woord2, ',', woord3, ',', woord4, ',', woord5, ',', woord6, ',', woord7, ',', woord8, ',', woord9, "en", woord10
    return popular_words 
```

我想使用以下代码来做到这一点：

```
def context(cat):
    words = popular_words[:10]
    context = words.concordance()
    print context 
```

不幸的是，我不断收到“AttributeError：'str'对象没有属性'concordance'有谁知道为什么我不能在第二个def中使用我的第一个代码块的结果？我认为应该使用return-statement能工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:39:22.240

> 有谁知道为什么我不能在第二个 def 中使用我的第一个代码块的结果？我认为通过使用返回语句它应该能够工作。

因为函数*不返回变量，所以它们返回值*。

`popular_words`您使用的`context` *不是*来自`meest_freq`；它来自某个地方的某个全局变量。里面`meest_freq`，`popular_words`是本地人。这是因为规则：如果您在函数内分配名称，则它是本地名称，除非您在语句中另有`global`说明。在`context`中，没有对 的赋值`popular_words`，因此 Python 会寻找具有该名称的全局变量。这个全局包含一些你不希望它包含的东西，可能是因为你正在测试解释器中的函数（也许你在测试和修复以前版本的函数时留下了它......）。

*请不要尝试为此使用全局变量*。您已经正确地吸取了教训，从函数中获取信息的方法是通过返回值。与之对应的；将信息获取*到*函数中的方法是将其作为参数传入。`meest_freq`与了解语料库的方式相同（因为您将其传递为`mycorpus`），因此`context`应该注意流行词。

您必须在某个地方拥有调用这两个函数的代码。该代码应该获取从 中返回的*值*`meest_freq`，并将其传递给`context`，就像将语料库传递给 一样`meest_freq`。

或者，如果您将语料库传递给`context`，那么您可以在那里进行调用。因为你的名字，很难知道什么是组织事物的正确方式；我不知道`cat`应该是什么意思，或者`context`与任何事情有什么关系，或者`concordance`在这种情况下意味着什么。

# java - PlayFramework v 1.x 生产安全吗？

> ID：14500832
> 
> 赞同：1
> 
> 时间：2013-01-24T11:57:05.740
> 
> 标签：java, playframework

我打算开始一个新系统的工作，这次我愿意使用 PlayFramework，而不是我心爱的 Spring。我开始使用 1.x 版本，获得了一些书籍和文档，但后来意识到 v 2.x 是完全重写的，它向后不兼容。

所以我面临一个两难的境地。继续使用 1.x（我非常喜欢它，因为它具有我需要的基本要素），迁移到 2.x（尽管它看起来更像 Spring 而不是 PF 1.x），或者回到 Spring。

1.x 版的生产稳定性如何？我已经看到有许多插件/模块只适用于 2.x，但这应该不是什么大问题，只要 v 1.x 继续得到支持，并且错误得到修复。还是它本质上已经死了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T12:40:16.947

[这个简短的常见问题解答已有](https://play.lighthouseapp.com/projects/57987/tickets/1494-add-faqs-about-future-play-1x-plans)9 个月的历史，但无论如何它显示了 Play 开发人员在该问题上的立场。可能与 2012 年 4 月相比没有太大变化。简而言之，他们说他们将为 1.2.x 分支提供错误修复，并谈到他们的 1.x 代码库

> 一个稳定的代码库，非常适合未来需要稳定性和向后兼容性的项目。

因此，如果您继续关注此分支的安全更新，则留在 1.2.x 上不会有危险。

# python - 词频统计奇怪的结果

> ID：14500833
> 
> 赞同：0
> 
> 时间：2013-01-24T11:57:06.907
> 
> 标签：python, word-frequency

在我的语料库上进行词频计数时，结果似乎不准确（我感觉不是最常见的词，频率计数只有一两个）并且一些结果显示'as over\xe2'和'\xad' . 任何人都可以帮忙吗？

```
def toptenwords(mycorpus):
  mywords = mycorpus.words()
  nocapitals = [word.lower() for word in mywords] 
  filtered = [word for word in nocapitals if word not in stoplist]
  nopunctuation= [s.translate(None, string.punctuation) for s in filtered] 
  woordcounter = {}
     for word in nopunctuation:
        if word in wordcounter:
          woordcounter[word] += 1
        else:
          woordcounter[word] = 1
    frequentwords = sorted(wordcounter.iteritems(), key = itemgetter(1), reverse = True)
    top10 = frequentwords[:10]
    woord1 = frequentwords[1]
    woord2 = frequentwords[2]
    woord3 = frequentwords[3]
    woord4 = frequentwords[4]
    woord5 = frequentwords[5]
    woord6 = frequentwords[6]
    woord7 = frequentwords[7]
    woord8 = frequentwords[8]
    woord9 = frequentwords[9]
    woord10 = frequentwords[10]
    print "De 10 meest frequente woorden zijn: ", woord1, ",", woord2, ",", woord3, ",",    woord4, ",", woord5, ",", woord6, ",", woord7, ",", woord8, ",", woord9, "en", woord10 
```

代码最初是荷兰语，这是未翻译的代码：

```
def toptienwoorden(mycorpus):
   woorden = mycorpus.words()
   zonderhoofdletters = [word.lower() for word in woorden] 
   gefiltered = [word for word in zonderhoofdletters if word not in stoplijst] 
   geenleestekens = [s.translate(None, string.punctuation) for s in gefiltered] 
   woordteller = {}
   for word in geenleestekens:
      if word in woordteller:
         woordteller[word] += 1
      else:
         woordteller[word] = 1
  frequentewoorden = sorted(woordteller.iteritems(), key = itemgetter(1), reverse = True)
  top10 = frequentewoorden[:10]
  woord1 = frequentewoorden[1]
  woord2 = frequentewoorden[2]
  woord3 = frequentewoorden[3]
  woord4 = frequentewoorden[4]
  woord5 = frequentewoorden[5]
  woord6 = frequentewoorden[6]
  woord7 = frequentewoorden[7]
  woord8 = frequentewoorden[8]
  woord9 = frequentewoorden[9]
  woord10 = frequentewoorden[10]
  print "De 10 meest frequente woorden zijn: ", woord1, ",", woord2, ",", woord3, ",",    woord4, ",", woord5, ",", woord6, ",", woord7, ",", woord8, ",", woord9, "en", woord10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:38:24.763

使用[collections.Counter](http://docs.python.org/2/library/collections.html#collections.Counter)。它非常适合计算（可散列的）项目的频率，它有一个`most_common`方法可以返回前十个最常见的项目，而无需您自己编写逻辑代码：

```
import string
import collections

def topNwords(mywords, N = 10, stoplist = set(), filtered = set()):
    # mywords = mycorpus.words()
    nocapitals = [word.lower() for word in mywords]
    filtered = [word for word in nocapitals if word not in stoplist]
    nopunctuation = [s.translate(None, string.punctuation) for s in filtered]
    woordcounter = collections.Counter(nopunctuation)
    top_ten = [word for word, freq in woordcounter.most_common(N)]
    return top_ten

top_ten = topNwords('This is a test. It is only a test. In case of a real emergency'.split(), N = 10)
print("De 10 meest frequente woorden zijn: {w}".format(w = ', '.join(top_ten))) 
```

# jquery - jQuery背景图片旋转脚本 - 寻找修改

> ID：14500836
> 
> 赞同：0
> 
> 时间：2013-01-24T11:57:13.547
> 
> 标签：jquery, css

我正在使用这个漂亮的小 jQuery 脚本来旋转背景图像：

[http://www.diplo.co.uk/blog/2011/2/23/simple-jquery-background-image-rotator.aspx](http://www.diplo.co.uk/blog/2011/2/23/simple-jquery-background-image-rotator.aspx)

有问题的jQuery在这里：

```
(function($)
{
    $.fn.extend({
        bgrotate: function(options)
        {
            var defaults = {
                delay: 1000,
                images: [],
                imagedir: "/images/"
            }

            var o = $.extend(defaults, options);
            var $obj = $(this);
            var cache = [];
            var i = 0;
            var preCache = true;

            return this.each(function()
            {
                setInterval(function() { setBack($obj, o.images, o.imagedir) }, o.delay);
            });

            function setBack(elem, backgrounds, imagedir)
            {
                elem.css("background-image", "url(" + imagedir + backgrounds[i] + ")");
                i++;
                if (i == backgrounds.length)
                {
                    i = 0;
                    preCache = false;
                }
                if (preCache)
                {
                    var cacheImage = document.createElement('img');
                    cacheImage.src = imagedir + backgrounds[i];
                    cache.push(cacheImage);
                }
            }
        }
    });
})(jQuery); 
```

这很好用，但我试图在图像旋转之间添加淡入淡出。

关于如何/在何处将褪色元素添加到此脚本的任何指针或线索？

非常感谢戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:46:22.067

由于您无法为背景图像设置动画，因此您必须创建一个新元素并将其放在原始元素的后面，然后淡出旧元素。

**[演示 jsfiddle](http://jsfiddle.net/Nu5TT/)**

由于您必须复制元素，因此它不适用于`body`

```
/* Simple jQuery background image rotator plug-in by Dan 'Diplo' Booth */
(function($)
{
    $.fn.extend({
        bgrotate: function(options)
        {
            var defaults = {
                delay: 1000,
                images: [],
                imagedir: "/images/"
            }

            var o = $.extend(defaults, options);
            var $obj = $(this);
            var cache = [];
            var i = 0;
            var preCache = true;

            return this.each(function()
            {
                setTimeout(function() { setBack($obj, o.images, o.imagedir) }, o.delay);
            });

            function setBack(elem, backgrounds, imagedir)
            {
                //elem.css("background-image", "url(" + imagedir + backgrounds[i] + ")");
                var newElement = elem.clone();
                $(newElement).css({'background-image': "url(" + imagedir + backgrounds[i] + ")"})
                $(newElement).css("position","absolute");
                $(newElement).css("top",$(elem).position().top + "px");
                $(newElement).css("left",$(elem).position().left + "px");
                $(newElement).hide();
                $(elem).prop("id", $(elem).prop("id") + "temp" + i);
                $(elem).after(newElement);
                $(newElement).fadeIn('slow', function() {
                    $(newElement).css("position",$(elem).css("position"));
                    $(newElement).css("top",$(elem).css("top"));
                    $(newElement).css("left",$(elem).css("left"));
                    $(elem).remove();
                    setTimeout(function() { setBack($(newElement), o.images, o.imagedir) }, o.delay);
                });
                i++;
                if (i == backgrounds.length)
                {
                    i = 0;
                    preCache = false;
                }
                if (preCache)
                {
                    var cacheImage = document.createElement('img');
                    cacheImage.src = imagedir + backgrounds[i];
                    cache.push(cacheImage);
                }
            }
        }
    });
})(jQuery); 
```

# php - 如何按开始日期订购谷歌日历提要

> ID：14500844
> 
> 赞同：0
> 
> 时间：2013-01-24T11:57:29.470
> 
> 标签：php, zend-framework, google-calendar-api

如何按开始日期订购谷歌日历提要，哪个更早？我尝试了很多不同的方法，但都没有发生。我认为API中有一些功能，但我无法让它们工作。对不起，我的英语不好！

这是我的代码

`

```
 function outputCalendar($client)

    {

    $gdataCal = new Zend_Gdata_Calendar($client);

    $eventFeed = $gdataCal->getCalendarEventFeed();

    $d = 0;

    foreach ($eventFeed as $event):

    $event->id->text = str_replace ("http://www.google.com/calendar/feeds/default/private/full/", "", $event->id->text);

      $descrEvent = $event->getContent();

    if(mb_strlen($descrEvent, "UTF-8") > 200)
        $descrEvent = mb_substr($descrEvent, 0, 200, "UTF-8")."...";          

    ?>

    <div class="slider-container">

    <span style="font-weight: bold;"><?= stripslashes($event->title->text); ?></span><br />

    <span class="st">Start date: <?= date('Y-m-d', strtotime($event->when['0']->startTime)); ?></span> 

    <span class="et">End date: <?= date('Y-m-d', strtotime($event->when['0']->endTime)); ?></span>

    <span class="st"><?= stripslashes($event->where['0']->valueString); ?></span><br />

    <span class="str"><?= stripslashes($descrEvent); ?></span>

    </div>

    <? 

    $d++;

    endforeach; 

    }

    require_once 'Zend/Loader.php';

    Zend_Loader::loadClass('Zend_Gdata');

    Zend_Loader::loadClass('Zend_Gdata_AuthSub');

    Zend_Loader::loadClass('Zend_Gdata_ClientLogin');

    Zend_Loader::loadClass('Zend_Gdata_Calendar');

    $user = 'killerskunk@gmail.com';

    $pass = 'mr_bean';

    $service = Zend_Gdata_Calendar::AUTH_SERVICE_NAME; // predefined service name for calendar

    $client = Zend_Gdata_ClientLogin::getHttpClient($user,$pass,$service);

    outputCalendar($client);

    ?>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:37:24.897

我已经通过插入

```
$query = $gdataCal->newEventQuery();
$query->setVisibility('private');
$query->setOrderby('starttime');
$query->setSortOrder('ascending');
$eventFeed = $gdataCal->getCalendarEventFeed($query); 
```

后

```
$gdataCal = new Zend_Gdata_Calendar($client); 
```

# vim - 区域的 VIM 语法导入

> ID：14500845
> 
> 赞同：0
> 
> 时间：2013-01-24T11:57:40.753
> 
> 标签：vim

我有使用 java 代码块的文件，是否可以在语法文件中告诉 vim 导入`java.vim`整个区域的语法文件？

例子：

```
syn region javaCode start="<Java>" end="</Java>" 
hi link javaCode source ???? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T12:38:36.830

最简单的就是

```
:set syntax=java 
```

并专注于Java部分。但是，如果您想在自己的语法文件中覆盖 Java 语法，这`:syntax region`是可行的方法。`:help :syn-include`有详细信息：

```
:syntax include @Java syntax/java.vim
:syntax region myJava start="<java>" end="</java>" contains=@Java 
```

* * *

PS：由于命令很复杂（但在包含另一种语法的语法脚本中没关系）并且难以记住，我编写了[SyntaxRange 插件](http://www.vim.org/scripts/script.php?script_id=4168)以使设置此类区域更容易。对于您的示例，它将是这样的调用：

```
:call SyntaxRange#Include('<java>', '</java>', 'java', 'NonText') 
```

该插件适用于偶尔的临时使用。如果您编写自己的语法脚本，我会避免这种依赖并直接使用上面的语法命令。

# php - 强制包含来自同一目录的文件而不是 include_path

> ID：14500848
> 
> 赞同：6
> 
> 时间：2013-01-24T11:58:00.330
> 
> 标签：php, include

我正在尝试使用[FPDF_Code39 类](http://www.fpdf.de/downloads/addons/68/)打印扩展 FPDF 类的条形码。我收到此错误：

```
Warning (2): include(helveticab.php) [function.include]: failed to open stream: No such file or directory [D:\xampp\php\PEAR\fpdf.php, line 541] 
```

问题在`D:\xampp\php\PEAR\fpdf.php`. 它包含`fpdf.php`来自，`PEAR`而我希望它包含与 FPDF_Code39 类相同的目录中的 fpdf，因为我在那里有最新的 FPDF。

我通过临时重命名确认了这个问题`PEAR/fpdf.php`，一切都像一个魅力。

如何强制它从同一目录而不是 include_path 中获取 FPDF？这是我的要求...

```
require('./fpdf.php'); \\I read at many places that this will do it.
require(dirname(__FILE__).'/fpdf.php');
require('fpdf.php') 
```

非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T12:01:42.383

第二个是最稳定的，因为它不依赖于包含路径（如第三个），也不依赖于当前工作目录（如第一个）。

从 PHP 5.3 开始，您还可以编写

```
require __DIR__ . '/fpdf.php'; 
```

反而

```
require dirname(__FILE__).'/fpdf.php'; 
```

# android - android 2.x 设备上的 Android 应用小部件问题 但在 android 4.x 设备上运行顺畅？

> ID：14500854
> 
> 赞同：0
> 
> 时间：2013-01-24T11:58:06.320
> 
> 标签：android, android-appwidget, appwidgetprovider

我正在尝试显示应用小部件（带有配置活动。用户可以在其中选择要在应用小部件上显示的类别）。我可以在 android 4.x 设备中使用应用小部件顺利运行应用程序。一切正常，但对于 android 2.x 设备，屏幕上显示“加载小工具问题”消息，而不是加载正确的应用小部件。而且我无法弄清楚问题是什么有人遇到过这种问题吗？请帮忙 ：（

注意：应用小部件的布局仅使用

1）相对布局

2)线性布局

3）Imageview（设置图像位图）

4）文本视图

我拥有的库包括 SherlockActionBar 4.2、Viewpager Indicator

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T05:29:57.080

运行应用小部件时出现“加载小工具时出现问题”的原因是 1）您正在为应用小部件使用不支持的小部件。你只能使用这些小部件

```
 1)FrameLayout,LinearLayout,RelativeLayout,Gridlayout
 2)AnalogClock,Button,Chronometer,ImageButton,ImageView,ProgressBar,TextView,ViewFlipper,ListView,GridView,StackView,AdapterViewFlipper,Viewstub. 
```

注意：不支持这些类的后代。

2）另一个原因可能是您要在 RemoteView 上设置的值可能在不知不觉中为空。所以你应该注意这一点。

3）另一个原因可能是您忘记为不同版本定义值，例如我的场景（prativa 很好地解释了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T06:20:56.653

根据您的问题，应用程序小部件在 android 4.X 设备中顺利运行，但在 android 2.X 设备中弹出“问题加载小工具”。问题不在于您的编码部分。如果编码部分出现问题，那么它也不会在 4.X 设备中运行。appwidget 在 2.X 设备中显示“加载小工具问题”。所以，问题可能出在您可能错过的设计部分在布局文件中分配一些值。正确检查您的 appwidget 布局 xml 文件。您的布局中可能缺少一些 2.X 设备的值。此类错误不会显示在 logcats 中，但这些错误非常有害。

# java - Java 正则表达式中 `(.*)*`、`(.*)+`、`(.+)*` 的奇怪问题

> ID：14500860
> 
> 赞同：8
> 
> 时间：2013-01-24T11:58:20.533
> 
> 标签：java, regex

为了重现最近一个问题中所述的问题 -[为什么 (.*)* 进行两次匹配并且在组 $1 中不选择任何内容？](https://stackoverflow.com/questions/14500095/why-does-makes-two-matches-and-selects-nothing-in-group-1)我尝试了括号内外的 and 的各种组合，结果出乎我的`*`意料。`+`

我本来期望输出与该问题中已接受的答案中解释的输出相同，并且在另一个重复的问题中，标记为`Perl`-[为什么 .* 不消耗此 Perl 正则表达式中的整个字符串？](https://stackoverflow.com/questions/1323613/why-doesnt-the-consume-the-entire-string-in-this-perl-regex). 但它的行为方式并不相同。

为简单起见，这是我尝试过的代码：-

```
String str = "input";
String[] patterns = { "(.*)*", "(.*)+", "(.+)*", "(.+)+" };

for (String pattern: patterns) {
    Matcher matcher = Pattern.compile(pattern).matcher(str);

    while (matcher.find()) {
        System.out.print("'" + matcher.group(1) + "' : '" + matcher.start() + "'" + "\t");
    }

    System.out.println();
} 
```

这是我得到的所有 4 个组合的输出：-

```
'' : '0'    '' : '5'            // For `(.*)*`
'' : '0'    '' : '5'            // For `(.*)+`  
'input' : '0'   'null' : '5'    // For `(.+)*`
'input' : '0'                   // For `(.+)+` 
```

现在，我无法理解，为什么输入`1st`和输出，`2nd`我没有得到整个字符串`first result`。`matcher.find()`我的意思是，理想情况下，在第一种情况下，`.*`应该首先捕获整个字符串，然后`empty string`在最后捕获。现在，虽然它在第二场比赛中给出了预期的结果，但它的表现并不好`1st match`。

而且，在第二种情况下，我什至不应该得到第二场比赛，因为我`+`在括号外有一个量词。

我的预期输出是： -

```
'input' : '0'   '' : '5'  // For 1st
'input' : '0'    // For 2nd 
```

另外，在`3rd`输出中，为什么我得到了`null`第二场比赛而不是`empty string`？前三个组合的第二场比赛不应该相同吗？

第四个输出符合预期。所以，毫无疑问。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T12:04:24.427

您正在看到您在链接到的问题中看到的相同现象的影响：

对于`(.*)*`：

*   第一个`matcher.start()`是`0`因为那是匹配 ( `"input"`) 开始的地方。
*   第一个`matcher.group(1)` 是`""`因为 repeat已经用空字符串`(.*)`覆盖了捕获的内容（但确实包含）。`"input"``matcher.group(0)``input"`
*   第二个`matcher.start()`是`5`因为这是第一次成功匹配后正则表达式引擎所在的位置。
*   第二个`matcher.group(1)`（以及`matcher.group(0)`）是`""`因为这就是字符串末尾要匹配的全部内容。

因为`(.*)+`它是一样的。毕竟，空字符串可以重复多次，并且仍然是空字符串。

因为`(.+)*`当`null`第二个匹配成功时（长度为 1 的字符串的零次重复匹配空字符串），捕获括号无法捕获任何内容，所以它的内容是`null`（如未定义，而不是空字符串）。

# ios - Core Data“不备份”标志

> ID：14500861
> 
> 赞同：5
> 
> 时间：2013-01-24T11:58:21.047
> 
> 标签：ios, core-data

我的应用程序有一个核心数据数据库，在首次启动时填充以供离线使用。然后，该数据库在每次启动时与在线数据库同步。只有第一次启动包含大量数据。该应用程序还从网络上获取一些图像，然后将其转换为二进制数据并保存到核心数据以供离线使用。这仅在用户导航到包含一些图像的部分时发生，并且仅获取那些图像（应用程序不会一次获取所有图像，仅在需要时获取）。

我正在使用魔法唱片。

我不会在运行时将任何类型的数据保存到文件中。但是，我的应用被此消息拒绝：

我们发现您的应用未遵循 App Store 审核指南所要求的 iOS 数据存储指南。

它建议我检查“设置 > iCloud > 存储和备份 > 管理存储”，但我的应用程序甚至没有显示。

我知道我应该将核心数据标记为不备份到 iCloud，但我不明白该怎么做。假设我应该实现这样的东西，但不知道如何将它应用到我的核心数据文件中。

```
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL {
assert([[NSFileManager defaultManager] fileExistsAtPath: [URL path]]);

NSError *error = nil;
BOOL success = [URL setResourceValue: [NSNumber numberWithBool: YES]
                              forKey: NSURLIsExcludedFromBackupKey error: &error];
if(!success){
    NSLog(@"Error excluding %@ from backup %@", [URL lastPathComponent], error);
}
return success; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-10T01:12:01.753

下面可能比更改 MacigalRecord 的源文件更好。迅速

```
MagicalRecord.setupCoreDataStackWithAutoMigratingSqliteStoreNamed("somedb.sqlite")
let dbPath = NSPersistentStore.MR_urlForStoreName("somedb.sqlite")
do {
  try dbPath.setResourceValue(NSNumber(bool: true), forKey: NSURLIsExcludedFromBackupKey)
} catch let error {
    print(error)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T01:44:01.290

寻找：`NSPersistentStoreCoordinator+MagicalRecord.m`

然后，找到：

```
- (NSPersistentStore *)MR_addSqliteStoreNamed:(id)storeFileName withOptions:(__autoreleasing NSDictionary *)options 
```

在方法的底部，您将看到：

```
if (!store) 
{
    [MagicalRecord handleErrors:error];
} 
```

将其更改为：

```
if (!store) 
{
    [MagicalRecord handleErrors:error];
}
else
{
    [self addSkipBackupAttributeToItemAtURL:url];
} 
```

如果该方法对您来说看起来不同，请告诉我，但这是我用于自己实现的方法。只要确保您放入您在问题中提到的功能即可。

# java - 如何判断editText是否处于焦点？

> ID：14500869
> 
> 赞同：3
> 
> 时间：2013-01-24T11:59:03.660
> 
> 标签：java, android, focus

我正在使用 android 中的库连接到终端仿真器，它连接到串行设备（开关）并显示发送/接收的数据。我通过终端下方的文本框或在终端本身输入并在两种情况下都按键盘上的 Enter 键通过连接发送数据。它只会是使用的软键盘。如果我发送了一个不正确的字符串，我就处于不可恢复的状态，所以我必须提供一个删除键实现。

这工作正常，如果我选择终端，我可以删除数据。但是，如果我选择 editText 就会出现问题。如果我按删除，则删除一个字符，但终端上似乎有两个字符。因此，如果我写“启用”并点击删除，它将在终端屏幕上更改为“启用”，但实际发送的是“启用”。所以我需要做的是弄清楚editText何时成为焦点，如果不是运行这些行

```
 mSession.appendToEmulator(cmdLeft, 0, cmdLeft.length);
  mSession.appendToEmulator(cmdErase, 0, cmdErase.length); 
```

我已经合并了这个：http: [//developer.android.com/reference/android/view/View.OnFocusChangeListener.html](http://developer.android.com/reference/android/view/View.OnFocusChangeListener.html)

唯一的问题是，如果我将焦点从 editText 更改为终端，它有时会删除一个字符，我需要它实际等待按下删除键。它不会一直发生，但它似乎陷入某种状态，它总是认为键码已被删除，并且每次我在焦点之间切换时都会发生删除。我应该在运行后重置键码还是什么？为什么认为键码被删除会卡住？即使在我按下回车等之后。当我在editText中按删除并且它是空的时会发生它。如果 editText 为空，并且终端中有数据，它会正确删除该数据但会触发此错误。此外，如果 editText 中没有任何内容且终端中没有任何内容，则不会删除任何内容，但会触发错误。

```
public boolean dispatchKeyEvent(KeyEvent event) {
    if (event != null && event.getAction() == KeyEvent.ACTION_UP) {

        return false;
    }
if(event.getKeyCode() == KeyEvent.KEYCODE_DEL){

    mEntry.setOnFocusChangeListener(new OnFocusChangeListener(){
        @Override
        public void onFocusChange(View v,boolean hasFocus){

              if (!hasFocus) {
                    mSession.appendToEmulator(cmdLeft, 0, cmdLeft.length);
                    mSession.appendToEmulator(cmdErase, 0, cmdErase.length);
                    Log.d(TAG, "in inner delete");
              }
        }          
    });

    Log.d(TAG, "in delete in delete in delete in delete");
    try {
        sendOverSerial("\b".getBytes("UTF-8"));
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
    return super.dispatchKeyEvent(event);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:50:54.170

这个小技巧似乎有效，但我真的很想知道它为什么会发生/更好的解决方案。

```
 public boolean dispatchKeyEvent(KeyEvent event) {
    if (event == null || event.getAction() == KeyEvent.ACTION_UP) {

        return false;
    }
   if(event.getKeyCode() == KeyEvent.KEYCODE_DEL){

    mEntry.setOnFocusChangeListener(new OnFocusChangeListener(){

        public void onFocusChange(View v,boolean hasFocus){

              if (!hasFocus && !mEntry.getText().toString().trim().equals("")) {

                    mSession.appendToEmulator(cmdLeft, 0, cmdLeft.length);
                    mSession.appendToEmulator(cmdErase, 0, cmdErase.length);

              }
              else 
              {
                    mEntry.setText(" ");
              }
        }          
    });

    try {
        sendOverSerial("\b".getBytes("UTF-8"));
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    }
}

    return super.dispatchKeyEvent(event);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-02T03:37:12.877

```
txtEdit.setOnTouchListener(new View.OnTouchListener(){
    public boolean onTouch(View view, MotionEvent motionEvent) {                                                       
         // your code    hope it helps you :)     
         return false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T12:54:26.393

首先，删除 2 个字符，因为`dispatchKeyEvent`会触发两次，一次 with `KeyEvent.ACTION_DOWN`（第一次按下时），然后再次 with `KeyEvent.ACTION_UP`（释放按钮时）。

因此，您还需要执行以下检查`ACTION_UP`：

```
if( event.getKeyCode() == KeyEvent.KEYCODE_DEL 
    && KeyEvent.getAction()==KeyEvent.ACTION_UP ) 
```

所以这就是导致你的问题的原因。要在标题中回答您的问题，您可以检查 an`EditText`是否有这样的焦点：`myEditText.hasFocus()`。

# sql - 我可以使用 Oracle 转义列标题中的双引号吗？

> ID：14500872
> 
> 赞同：2
> 
> 时间：2013-01-24T11:59:13.130
> 
> 标签：sql, database, oracle, header, escaping

创建一个带有双引号的表来转义真正的双引号在 Oracle 的 SQL 语法中似乎不起作用：

```
CREATE TABLE "MyTable" (
"Col""umn 1" varchar(168)
); 
```

以上失败。有什么办法可以逃避双引号来制作 'Col"umn 1' 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T12:05:37.740

你不能。根据[文档](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements008.htm)：

> 不带引号的标识符只能包含数据库字符集中的字母数字字符以及下划线 (_)、美元符号 ($) 和井号 (#)。数据库链接还可以包含句点 (.) 和“at”符号 (@)。Oracle 强烈建议您不要在未加引号的标识符中使用 $ 和 #。
> 
> 带引号的标识符可以包含任何字符和标点符号以及空格。但是，带引号和不带引号的标识符都不能包含双引号或空字符 (\0)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-23T19:49:26.493

当然，您可以使用 unicode！

```
SELECT
    1 "“Unicode Rocks”",
    2 "ʺSooo cooolʺ",
    3 "＂My co-workers love me＂"
FROM DUAL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:38:48.543

也许这会有所帮助......但请不要创建包含此类列的表：

```
CREATE TABLE DropMe AS
SELECT rpad('X', 168, ' ') "Col''umn1" FROM dual
/

SELECT * FROM DropMe
/

SQL>

Col"umn1
-------------------------------------.....
X 
```

# ruby-on-rails - 捆绑器在 cap deploy 之前没有运行

> ID：14500875
> 
> 赞同：1
> 
> 时间：2013-01-24T11:59:21.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, capistrano, whenever, whenever-capistrano

我正在尝试运行 cap depoly 并且收到以下错误消息

```
 command finished in 881ms
  * 2013-01-24 12:50:53 executing `whenever:update_crontab'
  * executing "cd /home/deployer/apps/cf/releases/20130124115051 && bundle exec whenever --update-crontab cf --set environment=production --roles db"
    servers: ["208.68.37.172"]
    [208.68.37.172] executing command
 ** [out :: 208.68.37.172] Could not find acts-as-taggable-on-2.3.3 in any of the sources
 ** [out :: 208.68.37.172] 
 ** [out :: 208.68.37.172] Run `bundle install` to install missing gems.
 ** [out :: 208.68.37.172] 
    command finished in 1957ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/deployer/apps/cf/releases/20130124115051; true"
    servers: ["208.68.37.172"]
    [208.68.37.172] executing command
    command finished in 935ms
failed: "sh -c 'cd /home/deployer/apps/cf/releases/20130124115051 && bundle exec whenever --update-crontab cf --set environment=production --roles db'" on 208.68.37.172 
```

后来我意识到，在任何命令之前捆绑程序都没有运行，这发生在将我的 rails 应用程序升级到最新版本的 rails 之后。3.2.11。任何帮助谢谢。

```
set :whenever_command, "bundle exec whenever"
require "bundler/capistrano"
require "whenever/capistrano"

server "208.68.37.172", :web, :app, :db, primary: true

set :application, "xx"
set :user, "deployer"
set :deploy_to, "/home/#{user}/apps/#{application}"
set :deploy_via, :remote_cache
set :use_sudo, false

set :scm, "git"
set :repository, "git@github.com:ramza1/#{application}.git"
set :branch, "master"

default_run_options[:pty] = true
ssh_options[:forward_agent] = true

after "deploy", "deploy:cleanup" # keep only the last 5 releases

namespace :deploy do
  %w[start stop restart].each do |command|
    desc "#{command} unicorn server"
    task command, roles: :app, except: {no_release: true} do
      run "/etc/init.d/unicorn_#{application} #{command}"
    end
  end

  task :setup_config, roles: :app do
    sudo "ln -nfs #{current_path}/config/nginx.conf /etc/nginx/sites-enabled/#{application}"
    sudo "ln -nfs #{current_path}/config/unicorn_init.sh /etc/init.d/unicorn_#{application}"
    run "mkdir -p #{shared_path}/config"
    put File.read("config/database.example.yml"), "#{shared_path}/config/database.yml"
    puts "Now edit the config files in #{shared_path}."
  end
  after "deploy:setup", "deploy:setup_config"

  task :symlink_config, roles: :app do
    run "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml"
  end
  after "deploy:finalize_update", "deploy:symlink_config"

  after "deploy:update_code" do
    run "mkdir -p #{release_path}/ckeditor_assets"
    run "ln -nfs #{shared_path}/ckeditor_assets #{release_path}/public/ckeditor_assets"
  end

  desc "Make sure local git is in sync with remote."
  task :check_revision, roles: :web do
    unless `git rev-parse HEAD` == `git rev-parse origin/master`
      puts "WARNING: HEAD is not the same as origin/master"
      puts "Run `git push` to sync changes."
      exit
    end
  end
  before "deploy", "deploy:check_revision"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:12:00.863

我认为你的问题是：

首先，在你的`deploy.rb`食谱上，在这个文件的**顶部添加下一个：**

```
require "bundler/capistrano"
require "whenever/capistrano" 
```

第二个我认为你必须从你的 gem 文件安装：

```
gem 'acts-as-taggable-on' 
```

第三个问题是无论何时版本，版本`whenever 0.8.2`都因部署而失败。卸载版本 0.8.2 并安装例如`whenever (0.7.3)`

卸载`acts-as-taggable-on-2.3.3`并检查如果没有该 gem，部署是否正常工作。

我也使用`rbenv`并且在任何其他 $PATH 声明之前在我的 bash_profile 中使用它，以确保它首先获取这些可执行文件：

```
export PATH="$HOME/.rbenv/bin:$PATH" 
```

从顶部删除`set :whenever_command, "bundle exec whenever"`并在之后添加此代码`set :branch, "master"`

**尝试这些步骤，看看它是否有效**

问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:02:59.710

从日志看来，acts-as-taggable-on 丢失了

安装acts-as-taggable-on

`gem 'acts-as-taggable-on'`在你的**Gemfile**

或去那里找到这个宝石的特定版本 [https://rubygems.org/gems/acts-as-taggable-on](https://rubygems.org/gems/acts-as-taggable-on)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T12:16:10.973

尝试：

从终端输入以下内容

```
 crontab -e 
```

这将打开 crontab 进行编辑。

现在您将看到如下两行：

```
PATH=/<path to bundle>/bundle/ruby/1.9.1/bin:/usr/local/rvm/gems 
```

和

```
PATH=/<path to bundle>/shared/bundle/ruby/1.9.1/bin:/usr/local/rvm/gems 
```

注释掉以 PATH 开头的两行。

`bundle exec whenever`每当您运行命令时，请执行上述步骤。它有效。

# c++ - 如何测试使用 MPI 调用的 C\C++ 代码：是否有任何一组我可以使用的模拟函数？

> ID：14500876
> 
> 赞同：5
> 
> 时间：2013-01-24T11:59:33.930
> 
> 标签：c++, c, testing, mocking, mpi

```
#include <mpi.h>
double f() {
    double timer = MPI_Wtime();
    return timer;
} 
```

我正在寻找的是一组模拟 MPI 函数，所以我可以`#include <mpi_mocks.h>`代替 mpi.h 并在不链接到 MPI 库的情况下对其进行编译。它也可能`#define MOCK`会触发 mpi.h 中的这种行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:35:51.410

据我所见，没有任何模拟可以仅 #include 并完成。但是，自己编写所需的函数并为您选择使用的任何模拟框架编写应该没什么大不了的。只需从一个空标题开始，然后查看编译器抱怨的函数。

# livecycle - 实时循环的 PDF 生成器配置

> ID：14500879
> 
> 赞同：0
> 
> 时间：2013-01-24T11:59:40.680
> 
> 标签：livecycle, lcds, livecycle-designer

我使用交钥匙安装了livecycle服务器，它正在运行我能够登录工作台并创建了我的第一个应用程序。但是在安装过程中我取消选中pdf生成器。之后我再次卸载并安装它，这次有一个pdf生成器配置框，标题为“管理员本地 PDF 转换的用户凭据”如果您是在 Windowsserver2008 上使用 LiveCycle PDF 生成器进行 config.native pdf 转换，您必须在用户名、密码和添加用户按钮中提供至少一个本地的帐户。我填写表单时收到“添加用户时出错” 。我的服务器默认情况下是管理员，密码是密码，所以我填写它并得到“添加用户时出错”的错误。请告诉在 pdf 生成器配置窗口中创建用户的用户名和密码应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:53:36.997

您的解决方案需要 PDF 生成器吗？如果你不这样做，那么你根本不应该配置它。如果确实需要，您需要指定用户帐户以允许 LiveCycle 服务器进行文件转换。您最多可以配置 3 个窗口（域或本地）帐户，以促进大量 PDF 转换。本质上，对于每个线程，LiveCycle 服务器将通过 Corba 调用打开 Acrobat，并将所需文件转换为 PDF。为此，您需要正确配置服务器和帐户。可以在[此处找到有关如何配置用户帐户的详细信息](http://help.adobe.com/en_US/livecycle/9.0/adminHelp/admin.htm?content=000159.html)

[此外，您可以在此处](http://help.adobe.com/en_US/livecycle/9.0/adminHelp/admin.htm?content=000159.html)找到 PDF 生成器配置设置

如果您有任何其他问题，请告诉我。

谢谢，

阿玛甘

# c - malloc 和 scanf 字符串

> ID：14500880
> 
> 赞同：0
> 
> 时间：2013-01-24T11:59:46.483
> 
> 标签：c, string, malloc, scanf

下面的一个简单程序使用 malloc 和 scanf 和 %s 来获取如下字符串，给了我一个我无法理解的输出。虽然我只“分配”了 5 个字节，但我的输入字符串已超过上述大小但没有分段错误。scanf 是否覆盖 malloc 分配？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main() {
  char * name;
  int SZSTRING;

    printf("Enter size of name :");  
    scanf("%d", &SZSTRING);
    name = (char*) malloc ((SZSTRING + 1) * sizeof(char));

    printf("Enter name :");
    scanf("%s", name);
    printf("len of 'name' : %d\n",strlen(name));

  printf("name final: \"%s\"\n",name);
  free(name);

return 0;
}

Output:

OptiPlex-380:~/gsa/compile$ gcc -o try try.c 
OptiPlex-380:~/gsa/compile$ ./try 
Enter size of name :4
Enter name :qwertyui
len of 'name' : 8
name final: "qwertyui" 
```

我在这里注意到另一件事：与

```
 //scanf("%s", name); 
```

输出显示

```
len of 'name'= 0 
```

并且“分配”的位置实际上被 memset 为 NULL。但是它的 calloc 而不是 malloc 根据手册页将分配的字节初始化为 0？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T12:14:02.393

不，它没有。但是超过分配缓冲区的大小并不总是立即导致分段错误。有时区域会损坏，效果会稍后显示，甚至永远不会显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T12:22:12.140

它可能看起来“有效”，但这只是因为你很幸运。当我在一个编译器上运行您的代码时，它在另一个编译器上“工作”，它由于堆损坏而崩溃。如果要使用，最好的选择`scanf()`是允许 scanf() 为您分配内存：

```
scanf("%ms", &name); // compiled with -std=c99 this will allocate the correct amount
                    // of memory for you. You can use "%as" if you're using -std=c89 
```

还要记住，它[`scanf()`](http://linux.die.net/man/3/scanf)有一个返回值（它告诉您成功匹配和分配的输入项的数量），检查它是否有效很重要。

虽然我们采用了良好的做法，但您[不应该对返回值进行类型转换`malloc()`](https://stackoverflow.com/questions/1835193/is-it-a-better-practice-to-typecast-the-pointer-returned-by-malloc)

另一种不使用的替代方法`scanf()`是使用[`fgets()`](http://linux.die.net/man/3/fgets)：

```
fgets( name, SZSTRING, stdin); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T12:26:34.477

这种情况可能会在没有段错误的情况下运行。在这种情况下，只是您使用了一个您尚未声明的空间，破坏了一些可能由“其他人”拥有的内存位置。

# actionscript-3 - perspectiveLH 和 perspectiveFieldOfViewLH 之间有什么区别，它们都透视到 CVV 还是 NDC？

> ID：14500881
> 
> 赞同：0
> 
> 时间：2013-01-24T11:59:57.580
> 
> 标签：actionscript-3, flash, graphics, 3d, stage3d

我对这两个函数有一点困惑，**perspectiveLH**和 **perspectiveFieldOfViewLH**

首先我可以推导透视LH中使用的矩阵，即

```
this.copyRawDataFrom(Vector.<Number>([
2.0 * zNear / width, 0.0, 0.0, 0.0,
0.0, 2.0 * zNear / height, 0.0, 0.0,
0.0, 0.0, zFar / (zFar - zNear), 1.0,
0.0, 0.0, zNear * zFar / (zNear - zFar), 0.0
 ])); 
```

如果我理解正确，使用此矩阵可以将世界点（WPx，WPy，Wpz）透视到**CVV**（规范视图体积）或称为**NDC**（标准化设备坐标）点（CPx'，CPy'，CPz'）

但是在 perspectiveFieldOfViewLH 中使用的矩阵是

```
var yScale:Number = 1.0 / Math.tan(fieldOfViewY / 2.0);
var xScale:Number = yScale / aspectRatio;
this.copyRawDataFrom(Vector.<Number>([
xScale, 0.0, 0.0, 0.0,
0.0, yScale, 0.0, 0.0,
0.0, 0.0, zFar / (zFar - zNear), 1.0,
0.0, 0.0, (zNear * zFar) / (zNear - zFar), 0.0
 ])); 
```

我不明白 xScale 和 yScale 是什么意思。

我知道我们可以通过 FOV（视野）设置矩阵，但似乎我的计算不同于 1.0 / Math.tan（fieldOfViewY / 2.0）

![在此处输入图像描述](../Images/83132174302d365a930000bda6d6994f.png)

![在此处输入图像描述](../Images/6ba8994cdda77cfa79c9bbdc72342afe.png)

如果您需要有关我的计算的更多信息，请查看此链接：

[http://blog.csdn.net/popy007/article/details/4091967](http://blog.csdn.net/popy007/article/details/4091967)

抱歉不是用英文写的（也不是我写的）

另外，在这篇文章中的演示代码

[http://www.adobe.com/devnet/flashplayer/articles/perspective-projection.html](http://www.adobe.com/devnet/flashplayer/articles/perspective-projection.html)

```
projectionTransform = new PerspectiveMatrix3D();
var aspect:Number = 4 / 3;
var zNear:Number = 0.1;
var zFar:Number = 1000;
var fov:Number = 45 * Math.PI / 180;
projectionTransform.perspectiveFieldOfViewLH(fov, aspect, zNear, zFar);
//projectionTransform.perspectiveLH(800, 600, 0.1, 1000); 
```

perspectiveFieldOfViewLH 矩阵工作正常，但如果我将矩阵更改为

`projectionTransform.perspectiveLH(800, 600, 0.1, 1000)`

然后无法得到任何图表

但是使用普通透视矩阵或 FOV 矩阵应该得到相同的结果吧？

我对 Stage3D 渲染管道也有点困惑，如果使用这些透视图，则会将世界点转换为 CVV 点，这会变形。

Stage3D 是否会在光栅化过程中将变形图恢复正常，或者我需要手动进行。或者我对渲染管道完全错误。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:35:01.260

这里真的没有任何魔法发生。这两个函数创建的矩阵完全相同，它们只是根据对您的环境最方便的参数接受不同的参数。

例如，“perspectiveLH”矩阵第二列的第二项是：

```
2.0 * zNear / height 
```

这等于“perspectiveFieldOfViewLH”矩阵的相应项：

```
1.0 / Math.tan(fieldOfViewY / 2.0) 
```

如果你将这两者等同起来，并用所有其他已知值求解高度，你会得到：

```
height = 2.0 * zNear * tan(fovY / 2) = 2.0 * 0.1 * tan(22.5) = 0.0828 
```

请注意，这不是您尝试使用的**600 。**您犯的错误是perspectiveLH函数的宽度和高度不是最终视图的像素，而是描述了局部视图平面的尺寸（zNear = 0.1）。一旦你意识到这一点，这个等式`height = 2.0 * zNear * tan(fovY / 2)`就突然变得有意义了！

这两个函数实际上只是相同信息的表达。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T13:23:51.283

是的。Adobe 的矩阵有些令人困惑。我不使用它们。你可以在这里阅读它是如何可能的[http://volgogradetzzz.blogspot.ru/2012/07/i-dont-need-flashgeommatrix3d-class.html](http://volgogradetzzz.blogspot.ru/2012/07/i-dont-need-flashgeommatrix3d-class.html)。此外，这里用正确的矩阵很好地解释了[http://msdn.microsoft.com/en-us/library/windows/desktop/bb281727(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb281727(v=vs.85).aspx)。变形下是什么意思？您按某种顺序应用矩阵。透视矩阵排在最后。它被称为模型视图投影。

# c - 如何将此“普通”数组转换为指针数组？

> ID：14500882
> 
> 赞同：0
> 
> 时间：2013-01-24T12:00:00.263
> 
> 标签：c, arrays, pointers

我的C知识还很年轻，所以请原谅我:)真的有两个问题，

1.  如何将以下代码转换为正确使用的东西，`pthread_t *threadsArray`而不是`threadsArray[MAXCON]`？

2.  有充分的理由吗？我听说我应该避免使用显式数组，并尽可能使用指针定义的数组。

`pthread_t threadsArray[MAXCON];`

```
int k;
for (k = 0; k < MAXCON; k++) {
    fprintf(stderr, "Make %d\n", k);

    int *connfd = malloc(sizeof(int));
    *connfd = accept(fd, (struct sockaddr *) &cliaddr, &cliaddrlen);
    if (*connfd == -1) {
        perror("Unable to accept connection");
        return 1;
    }

    fprintf(stderr, "Waited\n");

    pthread_t thread;
    pthread_create(&thread, NULL, readWriteToClient, connfd);
    threadsArray[k] = thread;
}

for(k = 0; k < MAXCON; k++){
    fprintf(stderr,"Join %d\n",k);
    pthread_t thread = threadsArray[k];
    pthread_join(thread, NULL);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:07:00.863

我想你想为你的数组使用动态分配的内存（即堆中的内存）而不是堆栈中的内存。当您希望数组生存期大于包含函数或不知道它在编译时的大小时，这通常很有用。

为此，您只需将第一行替换为：

```
pthread_t *threadsArray;
threadsArray = (pthread_t*)malloc(MAXCON * sizeof(pthread_t));
// malloc may fails and return NULL, you must check this error condition
// and handle it properly (aborting the program, using a smaller array, ...) 
```

使用完数组后，您必须使用以下命令释放内存：

```
free(threadArray);
threadArray = NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:07:45.283

首先回答您的第二个问题：听起来您在谈论堆栈和堆分配之间的区别。

像您所做的那样在函数体中声明数组将占用堆栈上的空间，这可能非常有限（几千字节到几兆字节）。

另一种方法是在“堆”上分配数组，它仅受计算机中可用内存的限制。要在堆上分配内存，请使用`malloc()`.

因此将第一行更改为：

```
pthread_t *threadsArray = malloc(MAXCON * sizeof(pthread_t)); 
```

（如果您的系统的 malloc 可能失败，可能会检查 NULL）

就是在堆上分配数组所需要做的一切。

您还需要`free(threadsArray)`事后释放内存。

但是，如果 MAXCON 很小，那么按照您所做的那样在堆栈上分配数组应该没问题。

# python - 特征分解容错

> ID：14500883
> 
> 赞同：4
> 
> 时间：2013-01-24T12:00:00.653
> 
> 标签：python, scipy, eigenvector

我有一个非常简单的问题。它与计算容差误差有关。

让我做（见最后）矩阵 A 在特征向量 V 和对角特征值 D 中的特征分解，并通过乘法 V^-1*D*V 再次构建它。

得到的值远不是A，误差很大。

我想知道我是否使用不正确的函数来执行此任务，或者至少，我怎样才能减少此错误。先感谢您

```
in[1]:import numpy
      from scipy import linalg
      A=matrix([[16,-9,0],[-9,20,-11],[0,-11,11]])
      D,V=linalg.eig(A)
      D=diagflat(D)
      matrix(linalg.inv(V))*matrix(D)*matrix(V)

out[1]:matrix([[ 15.52275377,   9.37603361,   0.79257097],  
       [9.37603361,  21.12538282, -10.23535271],  
       [0.79257097, -10.23535271,  10.35186341]]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T13:32:46.153

这不是倒退吗？ `A*V = V*D`从定义来看，所以`A = V*D*V^(-1)`.

```
>>> import numpy as np
>>> from scipy import linalg
>>> A = np.matrix([[16,-9,0],[-9,20,-11],[0,-11,11]])
>>> D, V = linalg.eig(A)
>>> D = np.diagflat(D)
>>> 
>>> b = np.matrix(linalg.inv(V))*np.matrix(D)*np.matrix(V)
>>> b
matrix([[ 15.52275377+0.j,   9.37603361+0.j,   0.79257097+0.j],
        [  9.37603361+0.j,  21.12538282+0.j, -10.23535271+0.j],
        [  0.79257097+0.j, -10.23535271+0.j,  10.35186341+0.j]])
>>> np.allclose(A, b)
False 
```

但

```
>>> f = np.matrix(V)*np.matrix(D)*np.matrix(linalg.inv(V))
>>> f
matrix([[  1.60000000e+01+0.j,  -9.00000000e+00+0.j,  -9.54791801e-15+0.j],
        [ -9.00000000e+00+0.j,   2.00000000e+01+0.j,  -1.10000000e+01+0.j],
        [ -1.55431223e-15+0.j,  -1.10000000e+01+0.j,   1.10000000e+01+0.j]])
>>> np.allclose(A, f)
True 
```

另外：有一些[方法](http://www.scipy.org/Cookbook/MultiDot)可以`np.dot`用来避免所有这些转换为矩阵，比如

```
>>> dotm = lambda *args: reduce(np.dot, args)
>>> dotm(V, D, inv(V))
array([[  1.60000000e+01+0.j,  -9.00000000e+00+0.j,  -9.54791801e-15+0.j],
       [ -9.00000000e+00+0.j,   2.00000000e+01+0.j,  -1.10000000e+01+0.j],
       [ -1.55431223e-15+0.j,  -1.10000000e+01+0.j,   1.10000000e+01+0.j]]) 
```

我经常发现它更干净，但是 YMMV。

# multithreading - BlackBerry OS5-7 中的线程/计时器计数限制

> ID：14500886
> 
> 赞同：1
> 
> 时间：2013-01-24T12:00:19.750
> 
> 标签：multithreading, blackberry, java-me

BlackBerry 应用程序在任何给定时间可以拥有多少个线程/定时器？

我在这里假设 Timer 对象没有由操作系统进行特殊处理——它们只是使用 Thread.sleep 或类似的东西来让它们自己“预定”。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T12:08:47.393

每个应用程序 16 个线程，并且设备中的全局限制为 128 个线程。如果超出这些限制中的任何一个，将引发 TooManyThreadsError。

关于`Timers`，每一个都有一个后台线程。从[Timer 类 javadoc](http://www.blackberry.com/developers/docs/5.0.0api/java/util/Timer.html)：

> *对应于每个 Timer 对象的是单个后台线程，用于按顺序执行所有计时器的任务。*

# c# - 使用静态类而不是 Properties.Settings 来保存常量是否有优势？

> ID：14500887
> 
> 赞同：2
> 
> 时间：2013-01-24T12:00:24.477
> 
> 标签：c#, visual-studio-2010

如果我想在我的 C# 程序中定义一组全局字符串，我一直在使用设置，以便我使用

```
 ... Properties.Settings.Default.StringA ...
    ... Properties.Settings.Default.StringB ... 
```

等等

我正在阅读一些 SO 问题，这些问题让我想到我应该创建一个静态类

```
 public static class Marker
    {
         public static readonly string StringA = "my text A";
         public static readonly string StringB = "my_other_text";
    } 
```

当然，访问这些将很简单

```
 Marker.StringA 
```

当我正在开发我的习惯时，我应该使用哪种方法来处理哪些常量，或者这是个人风格选择？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:04:03.733

由于默认情况下会缓存所有配置文件，这只是个人喜好问题。

[**阅读 app.config 是否昂贵？**](https://stackoverflow.com/a/9569262/284240)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:06:28.020

1.  使用资源管理器在运行时访问特定于文化的资源。等文本显示在 UI 上。

2.  将 App.Config 或 Web.Config 用于基于环境的常量。这是 Skeet 的一个很好的例子[https://stackoverflow.com/a/1431754/208565](https://stackoverflow.com/a/1431754/208565)

3.  使用常量和只读字段进行代码级使用。

# logging - Enterprise Library 5 数据库日志记录到平面文件有效，数据库无效

> ID：14500888
> 
> 赞同：1
> 
> 时间：2013-01-24T12:00:37.957
> 
> 标签：logging, enterprise-library-5

我正在尝试将现有的 Enterprise Library 5 日志系统更改为使用数据库而不是平面文件提供程序。我已经使用配置工具生成了相关的配置部分并将它们添加到我的配置文件中，但它似乎没有使用数据库，尽管平面文件仍在更新中。我的配置如下所示：

```
<configSections>
    <section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />

    <section name="dataConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSettings, Microsoft.Practices.EnterpriseLibrary.Data, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
  </configSections>

 <appSettings>
    <add key="loggingenabled" value="true" />
   <connectionStrings>
    <add name="Localhost" connectionString="Database=Logging;Server=localhost;Integrated Security=SSPI"
        providerName="System.Data.SqlClient" />
  </connectionStrings>

 <loggingConfiguration name="" tracingEnabled="true" defaultCategory="General">
    <listeners>
      <add name="Flat File Trace Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.RollingFlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.RollingFlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        fileName="c:\logs\Service.log" header="" footer="" formatter="Text Formatter" rollSizeKB="102400" timeStampPattern="yyyy-MM-dd" rollFileExistsBehavior="Increment" rollInterval="None" />
      <add name="Database Trace Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.Database.FormattedDatabaseTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging.Database, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
          listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Database.Configuration.FormattedDatabaseTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging.Database, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
          databaseInstanceName="Localhost" writeLogStoredProcName="WriteLog"
          addCategoryStoredProcName="AddCategory" formatter="Text Formatter"
          traceOutputOptions="DateTime, ProcessId, ThreadId" />

    </listeners>
    <formatters>
      <add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
           template="{timestamp(dd/MM/yyyy HH:mm:ss.fff)} {win32ThreadId} {category} {severity} {message}"
           name="Text Formatter" />
    </formatters>
    <categorySources>
      <add switchValue="All" name="General">
        <listeners>

          <add name="Database Trace Listener" />
          <add name="Flat File Trace Listener" />
        </listeners>
      </add>
    </categorySources>
    <specialSources>
      <allEvents switchValue="All" name="All Events" />
      <notProcessed switchValue="All" name="Unprocessed Category" />
      <errors switchValue="All" name="Logging Errors &amp; Warnings">
        <listeners>

          <add name="Database Trace Listener" />
          <add name="Flat File Trace Listener" />
        </listeners>
      </errors>
    </specialSources>
  </loggingConfiguration> 
```

在应用程序或数据库中没有显示错误消息，但数据库是空的，并且没有任何尝试连接的迹象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:33:02.420

老实说，我不确定我做了什么来解决这个问题，但我设法从企业库中挤出了一条错误消息。事实证明，虽然我已经编译了对日志库的引用，但`Microsoft.Practices.EnterpriseLibrary.Logging.Database`我还必须向调用该库的 WCF 服务添加相同的引用——仅从日志系统引用它是不够的。

# android - Android 在后台更新应用

> ID：14500890
> 
> 赞同：0
> 
> 时间：2013-01-24T12:00:42.243
> 
> 标签：android

这个应用程序不在 google play 上。我可以从服务器手动更新，但我想自动更新它，就像在 google play 中一样，它在 bg 中自动更新，并在通知栏中显示。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:05:43.553

**是的，**要在后台更新您的数据/APK，您可以使用 GCM（谷歌云消息）推送通知。

为此，您可以在应用程序启动时询问用户何时从服务器更新您的数据/APK。现在，当服务器的数据更改时，您可以简单地向设备发送推送通知并在后台更新您的数据。如果 APK 然后下载它并将其安装在设备中。

您将获得更多详情[Google Cloud Messaging for Android | 安卓开发者](http://developer.android.com/google/gcm/index.html)

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:07:10.433

您可以设置一个定期运行的服务，并检查服务器是否有可用的更新（检查 APK 的时间戳是检查这一点的一种方法）。

然后下载APK。安装它，并发送通知。

这是一件复杂的事情，如果你能帮助它，你可能不想自己做。（为什么不在 Play Market 中？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T12:11:36.843

看看[这个解决方案](https://stackoverflow.com/questions/10715737/android-install-an-apk-from-url?rq=1)如何通过 url 安装 apk 或者你想安装一个[已经下载到设备的本地 apk 文件](https://stackoverflow.com/questions/4967669/android-install-apk-programmatically)

如何确定有更新？定期轮询您的服务器，或者使用 Google Cloud Messaging 或类似工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-04T07:44:23.563

按照此[链接](https://developer.android.com/guide/app-bundle/in-app-updates)，应用内更新仅适用于运行 Android 5.0（API 级别 21）或更高版本的设备，并且需要您使用 Play Core 库 1.5.0 或更高版本。类型：

*   灵活的
*   即时

注意：当您将应用发布为 Android App Bundle 时，使用应用内更新的应用的最大允许压缩下载大小为 150MB。应用内更新与使用 APK 扩展文件（.obb 文件）的应用不兼容。

***检查更新可用性***

```
// Creates instance of the manager.
AppUpdateManager appUpdateManager = AppUpdateManagerFactory.create(context);

// Returns an intent object that you use to check for an update.
Task<AppUpdateInfo> appUpdateInfoTask = appUpdateManager.getAppUpdateInfo();

// Checks that the platform will allow the specified type of update.
appUpdateInfoTask.addOnSuccessListener(appUpdateInfo -> {
    if (appUpdateInfo.updateAvailability() == UpdateAvailability.UPDATE_AVAILABLE
          // For a flexible update, use AppUpdateType.FLEXIBLE
          && appUpdateInfo.isUpdateTypeAllowed(AppUpdateType.IMMEDIATE)) {
              // Request the update.
    }
}); 
```

***开始更新***

```
appUpdateManager.startUpdateFlowForResult(
    // Pass the intent that is returned by 'getAppUpdateInfo()'.
    appUpdateInfo,
    // Or 'AppUpdateType.FLEXIBLE' for flexible updates.
    AppUpdateType.IMMEDIATE,
    // The current activity making the update request.
    this,
    // Include a request code to later monitor this update request.
    MY_REQUEST_CODE); 
```

您请求的更新类型决定了您需要采取的后续步骤。要了解更多信息，请阅读有关如何[处理即时更新](https://developer.android.com/guide/app-bundle/in-app-updates#immediate_flow)或[处理灵活更新的部分。](https://developer.android.com/guide/app-bundle/in-app-updates#flexible%20flow)

***获取更新状态的回调***

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
  if (myRequestCode == MY_REQUEST_CODE) {
    if (myRequestCode != RESULT_OK) {
      log("Update flow failed! Result code: " + resultCode);
      // If the update is cancelled or fails,
      // you can request to start the update again.
    }
  }
} 
```

有关执行代码签出链接的更多信息共享

# windows - Windows 和 Unix 上文件名的 255 个字符限制是整个路径还是路径的一部分？

> ID：14500893
> 
> 赞同：4
> 
> 时间：2013-01-24T12:00:55.613
> 
> 标签：windows, unix, filesystems

Windows NTFS 和 Unix 上文件名的 255 个字符限制是整个路径还是路径的一部分？

即给定 c:\part1\part2 只有 part1 和 part2 必须小于 255 或者是 C:\ + part1 + part2

Unix 的规则是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T12:11:04.330

在 Windows 上，第 1 部分和第 2 部分应为 255 或更少，整个 c:\part1\part2 应为 260 或更少。有一种方法可以在 WinNT 内核（Windows 2000、XP 和更高版本）上拥有更长的文件名和路径，但这要求访问此类文件的应用程序明确支持此类文件名，因此在绝大多数情况下，您可以将 255/260 限制视为硬限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T19:13:19.570

除了上面的答案之外，您还必须考虑正在使用的文件系统（ext2 等）。Unix 没有标准答案。Linux 通常为每个组件 255 个，完整路径为 4096，或者路径不受限制。其他 Unix 变体使用不同的限制。带有 HFS+ 的 OSX 是 255 文件名和 1024 或无限路径（我找不到明确的答案）。除非您确定您只需要担心 Linux，否则您可能希望保持整体路径较低以确保安全。如果可能，将整个路径限制为 255 并不是一个坏主意。您可能还需要考虑文件系统可以挂载到网络上，而 NFS、SMB 等也有其自身的限制。

Unix 的简短答案是没有简短的答案，也没有标准，操作系统和底层文件系统都施加了限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T17:54:40.233

在 Linux 系统上，part1 和 part2 都应为 255 (ie `FILE_MAX`) 或更小，整个路径应为 4096 (ie `PATH_MAX`) 或更小。PATH_MAX 的使用有缺陷，如此[处](https://stackoverflow.com/a/9449307/319063)所述。

# mysql - 如何在 SQL 中裁剪字段长度，使其不占用 DBGrid 的所有空间？

> ID：14500904
> 
> 赞同：2
> 
> 时间：2013-01-24T12:01:26.457
> 
> 标签：mysql, delphi, firebird, delphi-2006

假设我有这张桌子：

```
name        varchar(255),
quantity    integer,
value       float 
```

当我使用此代码时：

```
select left(name, 99), quantity, value from table; 
```

但是`dbgrid`除非我使用滚动条而且我的目标是制作滚动条没有必要。

**我如何正确地实现这个目标？我使用火鸟和 MySQL。**

*我不能通过 pascal 代码执行此操作，也不能在表组件的 Fields 对象上定义它，因为此代码来自许多表，因为这是一个报告生成器，第一个字段并不总是相同，对于每个报告我必须使用不同的 SQL 代码。*

![在此处输入图像描述](../Images/042c5c94e9dc2d3b5f94f23c6d98d7bb.png)

**请大家在回答之前阅读所有问题。前 3 个答案哪里错了，因为他们没有考虑最后一段中写的内容！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T12:16:33.923

由于您已经说过您不能在`TField`级别或 Delphi 代码中执行此操作，因此您可以使用`Trim()`or `Left()`，具体取决于您使用的数据库，在列上删除您不想显示的空格：

例如，在许多 SQL 方言中，您可以使用如下内容：

```
SELECT Col1, Col2, Trim(Col3) as Col3 FROM yourtable 
WHERE somecondition 
```

有些人允许这样做：

```
SELECT Col1, Col2, Left(Col3, MaxCharWidthAllowed) as Col3 FROM yourtable 
WHERE somecondition 
```

或者

```
SELECT Col1, Col2, Substring(Col3, 1, MaxCharWidth) as Col3 FROM yourtable 
```

作为快速测试（我没有FB，但是有SQL Server 2008，所以我用了），我在SQL Server Management Studio中创建了如下测试数据：

![SSMS 中的测试数据](../Images/725e16be2284ffd9fabcea11f8e53518.png)

然后我创建了一个新的 D2007 VCL Forms 应用程序，并执行了以下步骤：

*   `TADOConnection`在表单 ( ) 上删除了一个`ADOConnection1`，并将连接字符串设置为上面的测试数据
*   将两个`TADOQuery`组件放在表单 (`ADOQuery1`和`ADOQuery2`) 上，并将它们的`Connection`属性设置为`ADOConnection1`
*   `TDataSource`在表单 (`DataSource1`和`DataSource2`)上删除了两个组件并将它们的`DataSet`属性连接到匹配的`ADOQuery1`和`ADOQuery2`
*   删除了两个`TDBGrid`组件 ( `DBGrid1`and `DBGrid2`) 并将它们的`DataSource`属性设置为匹配的`DataSource1`and `DataSource2`。
*   添加`SELECT * FROM test`到 SQL 中`ADOQuery1`
*   添加`SELECT Substring(itemname, 1, 30) as itemname, quantity, value FROM test`为`SQL`的`ADOQuery2`。的长度`30`被任意选择为足够小的值，以证明列宽相当小。
*   设置`ADOConnection1.Connected`为`True`，并将两个`TADOQuery.Active`属性都设置为`True`。

上面产生了这个输出（在设计时，没有编译或运行应用程序），顶部网格是`DBGrid1`：

![上述步骤的设计时输出](../Images/18b735d58b9c592dc2573d1d1931690e.png)

如您所见，in与SQL 中的`DBGrid2`相连，第一列的大小正确设置为 30 个字符宽度。`ADOQuery2``Substring`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T13:44:24.180

如果列类型是真的`varchar(255)`而不是`char(255)`，那么值的末尾不应该有任何空格，除非你自己保存了空格。IOW 这些`varchar(255)`值将完全按照您将它们保存到表中的方式返回给您，无论`char(255)`值是否正确填充空格，以便您始终获得 255 个字符的字符串。

因此，我会说，如果您使用`varchar`type 并且在将值保存到 DB 时没有用空格填充值，那么问题实际上出在网格中，您无法`trim()`在 SQL 中使用 simg 或等效项来解决它。网格很可能会读取字段的定义，看到该值的最大长度为 255 个字符，并相应地设置列宽。所以解决方案实际上是手动设置列宽或使用列的`ApplyBestFit`方法（如果有的话）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T07:00:30.357

有两种方法可以限制在 DBGrid 中显示的字段的长度，它们不会改变数据库中的数据。一种是设置字段的 DisplayWidth，另一种是设置网格列的 Width。

您可以在查询的 After open 事件中设置 DisplayWidth。该示例适用于 ZeosLib，并假定第一个字段是要限制的字段。这需要添加到每个查询中。

```
procedure TForm1.ZQuery1AfterOpen(DataSet: TDataSet);
begin
  DataSet.Fields[0].DisplayWidth := 99;
end; 
```

或在打开查询后使用过程设置 DBGrid 列宽。此示例允许您指定列和宽度。

```
procedure TForm1.SetColWidth(c,w: integer);
begin
  if DBGrid1.Columns.Count > c then
    DBGrid1.Columns[c].Width := w;
end; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T05:16:08.243

**更新：**

Delphi 将varchar 字段的长度作为 Displaylength 的默认**值****。**varchar(255) = 显示长度 = 255。

 **我可以用“SQL”改变这种行为吗？**NO** 如果结果只有 99 个字符长，则长度 varchar (255) = 255 和 Displaylength = 255 。

比较一下！
允许：

```
select left(name,99), quantity, value from table; 
```

*   Sql 应该快速交付数据集（而不是报表的设计）。
*   对于每个 varchar 字段的每个表，您必须设置一个额外的 SQL 语句`(xname,99)`
*   我可以看到截断的（也许很重要的）信息吗？绝不。

不允许：

```
Columns[index].Width = 99; 
```

*   更容易设计报告。
*   更简单的选择 SQL 语句：`select name, quantity, value from table`
*   用鼠标简单展开列以查看隐藏信息。
*   良好的设计：DBGrid 的列大小应该是您一次可以看到至少 2 列。

**程序应该接管设计。**

*我不能通过 pascal 代码执行此操作，也不能在表组件的 Fields 对象上定义它，因为此代码来自许多表，因为这是一个报告生成器。*

*对于每个报告，我必须使用不同的 SQL 代码。*

谁生成了这个“不同的 SQL 代码”？
我认为类似的行用于生成代码（Pascal 代码）。

允许：帕斯卡码

```
 Query1.Close;
   Query1.SQL.Clear;
   Query1.SQL.Add ('select name, quantity, value from table');
   Query1.Active: = true; 
```

为什么不允许：帕斯卡代码

```
 Columns[index].Width := 99; 
```

您可以通过自动调整列来做到这一点。所有宽一定尺寸的列都将适应它们的实际宽度。这仍然比固定大小 = 99 好。

以下程序已使用 Rad Studio 2007 和 Zeos Components 进行了测试。
Firebird 2.5，在 Windows 2000 计算机上。

*   A) Zeos 组件。
*   B) DBGrid1 没有活动的数据连接。
*   C) Firebird 自动为 varchar (255) 分配大小。
*   D) 正在运行的程序。“使用我”用于自动调整列的大小。

由于时间不够，我只创建了 2 个数据字段。

![在此处输入图像描述](../Images/70a06882e0ed4c9e2c0fd20c202cc27c.png)

如果需要下载整个源代码，请告诉我。

```
unit FBAuto;
{
~Zarko Gajic
About Delphi Programing
http://delphi.about.com
customized 2013
moskito-x software
}

interface

uses
  Math,
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, DB, DBTables, Grids, DBGrids, ExtCtrls, StdCtrls, ZAbstractRODataset,
  ZAbstractDataset, ZDataset, ZConnection;

type
  TAutoColumnWidth = record
    Index : integer;
    Width : integer;
  end;

  TForm1 = class(TForm)
    DBGrid1: TDBGrid;
    ZConnection1: TZConnection;
    ZQuery1: TZQuery;
    DataSource1: TDataSource;
    CBuseMe: TCheckBox;
    DBGrid2: TDBGrid;
    ZQuery2: TZQuery;
    DataSource2: TDataSource;
    IntegerField1: TIntegerField;
    StringField1: TStringField;
    procedure DBGrid1DrawColumnCell(Sender: TObject; const Rect: TRect;
      DataCol: Integer; Column: TColumn; State: TGridDrawState);
    procedure FormCreate(Sender: TObject);
    procedure FormActivate(Sender: TObject);
    procedure CBuseMeClick(Sender: TObject);
  private
    { Private declarations }
    procedure SetFit;
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

var
  AutoColumnWidth : TAutoColumnWidth;
  useMe :Boolean;

procedure TForm1.SetFit;
var
  i:integer;
begin
  if NOT CBuseMe.Checked then begin
  for i := 0 to DBGrid1.Columns.Count - 1 do begin
     if DBGrid1.Columns[i].Field.Size > 300 then
        DBGrid1.Columns[i].Width := DBGrid1.Columns[i].Field.Size;
  end;
  end else begin
  useMe:=true;
  for i := 0 to DBGrid1.Columns.Count - 1 do begin
  AutoColumnWidth.Index:=-1;
  if DBGrid1.Columns[i].Field.DisplayWidth > 200 then  AutoColumnWidth.Index:=i;
     if AutoColumnWidth.Index > -1 then begin
        AutoColumnWidth.Width := -1;
        DBGrid1.Repaint;
        DBGrid1.Columns[AutoColumnWidth.Index].Width := AutoColumnWidth.Width+ 5;
     end;
  end;
  useMe:=false;
  end;
end;

procedure TForm1.FormActivate(Sender: TObject);
begin
ZQuery1.Active:=true;
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  AutoColumnWidth.Index := -1;
  AutoColumnWidth.Width := -1;
  useMe:=false;
end;

procedure TForm1.CBuseMeClick(Sender: TObject);
begin
  setFit;
end;

procedure TForm1.DBGrid1DrawColumnCell(
  Sender: TObject;
  const Rect: TRect;
  DataCol: Integer;
  Column: TColumn;
  State: TGridDrawState);
begin
  if useMe then begin
   if DataCol = AutoColumnWidth.Index then
   begin
    if Assigned(Column.Field) then
    begin
      AutoColumnWidth.Width := Max(AutoColumnWidth.Width, DBGrid1.Canvas.TextWidth(Column.Field.DisplayText));
    end;
   end;
  end;
end;

end. 
```

**> 200**可以设置以适应您的需要。

```
if DBGrid1.Columns[i].Field.DisplayWidth > 200 then  AutoColumnWidth.Index:=i; 
```

我希望这会有所帮助，或者可能会导致正确的方向。**

# java - 实现骆驼变换

> ID：14500906
> 
> 赞同：0
> 
> 时间：2013-01-24T12:01:32.433
> 
> 标签：java, apache-camel, esb, middleware

我有以下骆驼路线：

```
RequestToOrderTransform requestToOrderTransform =
    new RequestToOrderTransform();

from("ghttp:///processOrder")
    .transform(requestToOrderTransform)
    .bean(OrderProcessor.class)
    .to("direct:endOfRoute"); 
```

它使用 Camel-GAE 接收`HttpServletRequest`来自 GAE servlet ( `processOrder`) 的请求，然后将请求转换为`Order`POJO，最后处理该订单 ( `OrderProcessor`)。

我想写我自己的`org.apache.camel.Expression`（`requestToOrderTransform`），到目前为止我有骨架/框架：

```
public class RequestToOrderTransform implements Expression {
    @Override
    public <T> T evaluate(Exchange arg0, Class<T> arg1) {
        // ???

        return null;
    }
} 
```

在这里，不知何故，我必须将一个`HttpServletRequest`（我*相信*这是我从 GAE servlet 消费者那里得到的）转换为我自己的`Order`POJO。但我不确定如何首先获得`HttpServletRequest`。收到请求后，我可以提取必要的参数，然后实例化我的新订单实例。但是后来我不确定如何处理，`Order`以便骆驼知道路由它而不是原来的`HttpServletRequest`.

所以我问：

1.  如何获取我的实例`HttpServletRequest`（或我从 GAE servlet 端点获得的任何对象）？
2.  如何设置我新实例化`Order`的实例，以便 Camel 使用它作为路由单元（到`OrderProcessor`bean）？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T09:42:12.353

当您真正实现的只是消息翻译器时，编写表达式似乎是一种糟糕的方式。但无论如何，只要抓住身体作为绳子，然后用它做任何事情。

```
arg0.getIn().getBody(String.class) 
```

我不确定在这种情况下您从 GAE 获得什么数据，但如果它是结构化的（json、xml、平面文件、csv），您可能需要查看为您执行字符串到 java 对象转换的[各种数据格式。](http://camel.apache.org/data-format.html)

# mysql - 在表中添加新列，其值取决于同一表中另一列的值

> ID：14500911
> 
> 赞同：14
> 
> 时间：2013-01-24T12:01:42.353
> 
> 标签：mysql, sql

我是 Mysql 的新手。我想在表中添加一个列，其值取决于同一个表中的另一个列值。例如，我有 company_table 如下：

```
fldId | companyName | date
--------------------------------
  1   | adeco       | 2012-01-12    
  2   | mic         | 2001-03-09
  3   | manpower    | Null
  4   | linar       | Null
  5   | dlank       | 1999-02-28 
```

我想根据“日期”列的值在此表中添加“fldState”列。例如，如果“日期”列的值不是 Null，则“fldState”的值应为 1，如果为 Null，则“fldState”的值应为 2。如下所示

```
 fldId | companyName | date        | fldState
  --------------------------------------------
  1     | adeco       | 2012-01-12  | 1
  2     | mic         | 2001-03-09  | 1 
  3     | manpower    | Null        | 2
  4     | linar       | Null        | 2
  5     | dlank       | 1999-02-28  | 1 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-24T12:04:23.830

从现有表中，您需要创建一个`ALTER`语句，以便您可以添加新列。

```
ALTER TABLE mytableName ADD fldState INT; 
```

*   [从表中添加新列](http://www.tutorialspoint.com/mysql/mysql-alter-command.htm)

语句成功执行后，您现在可以更新所有记录，

```
UPDATE  myTableName
SET     fldState = IF(date IS NULL, 2, 1) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-24T12:21:23.773

要添加新的新列，您可以使用以下命令

```
ALTER TABLE company_table ADD fldState; 
```

如果您想在您希望的地方添加这些列。就像你想在 companyName 之后添加 fldState 一样，然后像下面这样使用

```
ALTER TABLE company_table ADD fldState AFTER companyName; 
```

如果你想添加列作为第一列，然后使用如下

```
ALTER TABLE company_table ADD fldState FIRST; 
```

如果你不再使用任何东西，那么默认情况下它会放在最后。

现在像下面的命令一样使用复制列数据。

```
 UPDATE company_table SET fldState = IF(date IS NULL, 2, 1); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T12:26:39.393

您确定这是您想要做的 - 添加一个新列吗？您通过引入仅取决于日期的列违反了第 3 范式 3NF。

[您可以在wikipedia](http://en.wikipedia.org/wiki/Third_normal_form)上阅读有关它的更多信息。基本上，您的所有列都应取决于表的行列式（PK）。

因此，您可以考虑做的是仅在您进行选择时创建该列：

```
SELECT .. fldState = (process date)
FROM ... 
```

这会更好，除非您打算经常加入该专栏，在这种情况下速度超过 3NF :)

# php - 通过 AJAX 传递 PHP 对象？

> ID：14500913
> 
> 赞同：0
> 
> 时间：2013-01-24T12:01:44.833
> 
> 标签：php, ajax

我正在发出 AJAX 请求，我需要发送一个完整的 PHP 对象。这是我的 JS 代码：

```
new Ajax.Request("some url", 
    {
        method: 'post',
        parameters: {
                      string1:"whatever",
                      myobject: this is where I want to send a PHP object named $product
                    }

     ...
    }); 
```

最好的方法是什么？也许使用序列化？

谢谢你的帮助 ：）！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T12:03:45.860

您可以尝试使用 json_encode()，通过请求和 json_decode 在另一端发送

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T12:08:22.090

发送一个普通的 php 对象不是一个好主意。即使您执行 json 编码之类的操作。问题是接收方可能不知道对象类定义。

相反，我建议您在类定义中添加一些导出/导入方法。您发送导出方法的（序列化）结果并在接收端导入（非序列化）结果。这样一来，a）很明显，您在接收方有一个有效的类，并且 b）您有一个处理不匹配的地方。您更灵活、更安全。

# c# - Oracle 在 C# 中的 DBMS_CRYPTO.DES_CBC_PKCS 等效项

> ID：14500914
> 
> 赞同：2
> 
> 时间：2013-01-24T12:01:49.267
> 
> 标签：c#, oracle, cryptography

我需要将一个包重写为 C# 并且我坚持使用这个加密函数

```
 l_DEcrypted :=    dbms_crypto.DEcrypt
                   ( src => l_ssn,
                     typ => DBMS_CRYPTO.DES_CBC_PKCS5,
                     key => G_KEY ); 
```

任何想法，如何在 C# 中编写具有相同输出的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T12:41:37.663

*   DES：[DESCryptoServiceProvider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.descryptoserviceprovider.aspx)
*   CBC：[模式](http://msdn.microsoft.com/en-us/library/system.security.cryptography.symmetricalgorithm.mode.aspx)= [CipherMode.CBC](http://msdn.microsoft.com/en-us/library/system.security.cryptography.ciphermode.aspx)
*   PKCS5：[填充](http://msdn.microsoft.com/en-us/library/system.security.cryptography.symmetricalgorithm.padding.aspx)= [PaddingMode.PKCS7](http://msdn.microsoft.com/en-us/library/system.security.cryptography.paddingmode.aspx)

# xcode - 视网膜分辨率闪屏图像不显示视网膜分辨率

> ID：14500915
> 
> 赞同：0
> 
> 时间：2013-01-24T12:01:51.507
> 
> 标签：xcode, retina-display, splash-screen

我已经在 XCode 4.5.2“摘要”选项卡的 Launch Image 中设置了视网膜分辨率初始屏幕图像...但是由于某种原因，当我运行我的应用程序时，拉伸的非视网膜分辨率初始图像仍然显示...

如何正确设置视网膜分辨率启动画面？

# sql - 我想得到星期天 WeekNo？

> ID：14500918
> 
> 赞同：0
> 
> 时间：2013-01-24T12:02:00.807
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005, sql-server-2008-r2

我正在使用 SQL Server 2008 R2。我需要获得周日 weekno 并且我已经有查询，但它显示了错误的数据。我能做些什么 ？

它显示 2 而不是 1。例如，06-Jan-2013(WeekNo - 1)

我的查询是

```
SELECT DATEPART (week, '01-13-2013 23:59:59.000' ) As WeekNo1 ,  
  DATEPART (week, '01-06-2013 23:59:59.000' ) As WeekNo2 ,  
  DATEPART (week, '12-30-2012 23:59:59.000' ) As WeekNo3 ,  
  DATEPART (week, '12-23-2012 23:59:59.000' ) As WeekNo4 ,  
  DATEPART (week, '12-16-2012 23:59:59.000' ) As WeekNo5 ,  
  DATEPART (week, '12-09-2012 23:59:59.000' ) As WeekNo6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T12:05:37.573

您需要将该[`DATEFIRST`](http://msdn.microsoft.com/en-us/library/ms181598.aspx)属性设置为一周的开始日期。这指定了一周的第一天。

要确定服务器一周的第一天是什么，您将使用：

```
SELECT @@DATEFIRST 
```

然后，如果您需要更改该值，您将使用：

```
SET DATEFIRST 1;

SELECT DATEPART (week, '01-13-2013 23:59:59.000' ) As WeekNo1 ,  
  DATEPART (week, '01-06-2013 23:59:59.000' ) As WeekNo2 ,  
  DATEPART (week, '12-30-2012 23:59:59.000' ) As WeekNo3 ,  
  DATEPART (week, '12-23-2012 23:59:59.000' ) As WeekNo4 ,  
  DATEPART (week, '12-16-2012 23:59:59.000' ) As WeekNo5 ,  
  DATEPART (week, '12-09-2012 23:59:59.000' ) As WeekNo6 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/d41d8/7914)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T12:04:49.447

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!3/d41d8/7915)**

```
SET DATEFIRST 1
SELECT DATEPART (week, '01-13-2013 23:59:59.000' ) As WeekNo1 ,  
       DATEPART (week, '01-06-2013 23:59:59.000' ) As WeekNo2 , 
       DATEPART (week, '12-30-2012 23:59:59.000' ) As WeekNo3 ,  
       DATEPART (week, '12-23-2012 23:59:59.000' ) As WeekNo4 ,  
       DATEPART (week, '12-16-2012 23:59:59.000' ) As WeekNo5 ,  
       DATEPART (week, '12-09-2012 23:59:59.000' ) As WeekNo6 
```

结果：

```
| WEEKNO1 | WEEKNO2 | WEEKNO3 | WEEKNO4 | WEEKNO5 | WEEKNO6 |
-------------------------------------------------------------
|       2 |       1 |      53 |      52 |      51 |      50 | 
```

# php - 删除“index.php？” 来自 http://domain.com/index.php?controller/action

> ID：14500919
> 
> 赞同：0
> 
> 时间：2013-01-24T12:02:00.467
> 
> 标签：php, .htaccess

我在 PHP MVC 中创建了一个应用程序，http 请求类似于 **domain.com/index.php?controller/action**，我想删除**index.php？**最终的 url 看起来像[http://domain.com/controller/action](http://domain.com/controller/action)。任何帮助将不胜感激

目前我的 .htaccess 文件如下所示

```
RewriteEngine On
RewriteBase /
<IfModule mod_rewrite.c>
# Removes index.php from ExpressionEngine URLs
RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L]
</IfModule> 
```

它只会删除 index.php 并且 url 变成[http://domain.com/?controller/action](http://domain.com/?controller/action)，我想要那个“？” 离开网址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:05:14.350

使用`mod_rewire`模块来完成工作。您要问的是 SEO 友好的 URL。如果你搜索一下，你会发现很多例子。

把它放在你的根 .htaccess 文件中。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

# java - 用于从巨大列表中检索值的 Java 集合

> ID：14500922
> 
> 赞同：0
> 
> 时间：2013-01-24T12:02:04.987
> 
> 标签：java, data-structures

我有一个 Excel 文件，我们必须从中检索数据。将有多个部分，因此每个部分都将存储在一个`ArrayList`将添加到主文件中`ArrayList`并被使用的文件中。

现在我们有一个要求，我将获得一些值，我必须使用这些值来检索该部分的其他值。

如果我使用`ArrayList`, 对于每个值，我必须遍历完整列表，一旦找到匹配项，我必须检索其对应的值。

如果我使用`HashMap`，只是为了从列表中检索几个值（5 条记录），我必须将 2000 条记录存储到地图中。

谁能建议我存储和检索这些数据的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:15:24.163

给你一些建议： 1.也许你应该在excel中找到一些免费的sql工具。2.也许你应该先通过你的代码在excel或内存中创建索引以提高性能，然后进行查询

# android - 如何重新调整片段大小并设置为 Google Map V2？

> ID：14500927
> 
> 赞同：0
> 
> 时间：2013-01-24T12:02:35.020
> 
> 标签：android, android-maps-v2

我正在尝试从以下[**答案**](https://stackoverflow.com/a/14117674/1278196)`Facebook`中创建类似的内容，我想在运行时更改地图宽度。`slider`[](https://stackoverflow.com/a/14117674/1278196)

 **我在 bindComponent 方法中尝试过，但它对我不起作用..

## **地图.xml**

```
<?xml version="1.0" encoding="utf-8"?>

 <fragment xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        class="com.google.android.gms.maps.SupportMapFragment" /> 
```

## 活动

```
public class MapActivity extends FragmentActivity implements
     OnClickListener {

private ImageView mSlider;
LinearLayout.LayoutParams mapViewParameters;
GoogleMap gMap;
SupportMapFragment supportMap;
private DisplayMetrics metrics;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.slider);

    bindComponents();

}

private void bindComponents() {
    // TODO Auto-generated method stub

    supportMap = (SupportMapFragment) getSupportFragmentManager()
            .findFragmentById(R.id.mapView);

    metrics = new DisplayMetrics();

    mapViewParameters = (LinearLayout.LayoutParams) findViewById(
            R.id.mapView).getLayoutParams();
    mapViewParameters.width = metrics.widthPixels;
    findViewById(R.id.mapView).setLayoutParams(mapViewParameters);

    // Map
    gMap = supportMap.getMap();
    gMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);

    mSlider = (ImageView) findViewById(R.id.msliderImage);

}
  } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:06:54.287

我建议你检查[这个](https://github.com/jfeinstein10/SlidingMenu)库。我认为这是我在网络上见过的最好的实现 Facebook 之类的滑动菜单**

# android - 我需要在这个程序中添加进度条，它会在按钮单击后运行并运行，直到从 xml 检索数据

> ID：14500929
> 
> 赞同：-1
> 
> 时间：2013-01-24T12:02:41.463
> 
> 标签：android, xml-parsing, progress-bar, progressdialog

**这是我的程序，告诉我如何添加进度条或进度对话框**

**主要活动**

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
 try {
        LinearLayout layout = new LinearLayout(act.this);
        layout.setOrientation(1); 
```

*用于从 xml 标签ui textview 和 url 声明*中检索数字、名称和成本\**

 *```
 TextView no[];
        TextView na[];
        TextView c[];
           setContentView(layout); 
```

**url 在这里声明**

```
 URL url = new URL("http://api.androidhive.info/pizza/?format=xml"); 
```

*我检索数据的 xml 标记*

```
 DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();          
      DocumentBuilder db = dbf.newDocumentBuilder();
      Document doc = db.parse(new InputSource(url.openStream()));
      doc.getDocumentElement().normalize();
      NodeList nodeList = doc.getElementsByTagName("item");
      no = new TextView[nodeList.getLength()];
      na = new TextView[nodeList.getLength()];
      c = new TextView[nodeList.getLength()];

      for (int i = 0; i < nodeList.getLength(); i++) {
          Node node = nodeList.item(i);
          no[i] = new TextView(act.this);
          na[i] = new TextView(act.this);
          c[i] = new TextView(act.this);
          Element fstElmnt = (Element) node;

          NodeList idlist = fstElmnt.getElementsByTagName("id");
          Element numelement = (Element) idlist.item(0);
          idlist = numelement.getChildNodes();
          no[i].setText("ID="+ ((Node) idlist.item(0)).getNodeValue());

          NodeList namelist = fstElmnt.getElementsByTagName("name");
          Element namelement = (Element) namelist.item(0);
          namelist = namelement.getChildNodes();
          na[i].setText("pizza name="+ ((Node) namelist.item(0)).getNodeValue());

          NodeList costlist = fstElmnt.getElementsByTagName("cost");
          Element costlement = (Element) costlist.item(0);
          costlist = costlement.getChildNodes();
          c[i].setText("cost="+ ((Node) costlist.item(0)).getNodeValue());

          layout.addView(no[i]);
          layout.addView(na[i]);
          layout.addView(c[i]);

          }} 
 catch (Exception e) {
         }

 }} 
```

**程序结束**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:24:16.487

```
public class MainActivity extends Activity{

TextView no[];
TextView na[];
TextView c[];
LinearLayout layout;

@Override
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    layout = new LinearLayout(MainActivity.this);
    setContentView(layout);
    MyTask myTask = new MyTask();
    myTask.execute();
}

public class MyTask extends AsyncTask<Void , Void , Void>{
    NodeList costlist;
    Element costlement;
    NodeList idlist;
    NodeList namelist ;
    int i=0;
    @Override
    protected Void doInBackground(Void... params){
        try{
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            URL url = new URL("http://api.androidhive.info/pizza/?format=xml");
            Document doc = db.parse(new InputSource(url.openStream()));
            doc.getDocumentElement().normalize();
            NodeList nodeList = doc.getElementsByTagName("item");
            for (i = 0; i < nodeList.getLength(); i ++ ){
                Node node = nodeList.item(i);

                Element fstElmnt = (Element)node;
                idlist = fstElmnt.getElementsByTagName("id");
                Element numelement = (Element)idlist.item(0);
                idlist = numelement.getChildNodes();
                ;

                namelist = fstElmnt.getElementsByTagName("name");
                Element namelement = (Element)namelist.item(0);
                namelist = namelement.getChildNodes();

                costlist = fstElmnt.getElementsByTagName("cost");
                costlement = (Element)costlist.item(0);
                Void a = null;// just let it be ;
                publishProgress(a);

            }
        }catch (DOMException e){
            // TODO Auto-generated catch block
            e.printStackTrace();
        }catch (ParserConfigurationException e){
            // TODO Auto-generated catch block
            e.printStackTrace();
        }catch (SAXException e){
            // TODO Auto-generated catch block
            e.printStackTrace();
        }catch (IOException e){
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onProgressUpdate(Void... values){
        super.onProgressUpdate(values);
        no[i] = new TextView(MainActivity.this);
        na[i] = new TextView(MainActivity.this);
        c[i] = new TextView(MainActivity.this);
        no[i].setText("ID=" + ((Node)idlist.item(0)).getNodeValue());
        na[i].setText("pizza name=" + ((Node)namelist.item(0)).getNodeValue());
        costlist = costlement.getChildNodes();
        c[i].setText("cost=" + ((Node)costlist.item(0)).getNodeValue());
        layout.addView(no[i]);
        layout.addView(na[i]);
        layout.addView(c[i]);
    }
    @Override
    protected void onPreExecute(){
        // TODO Auto-generated method stub
        super.onPreExecute();
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:08:39.183

是的，您可以使用android中的**AsyncTask执行此操作**

AsyncTask中有4个方法

1.  **onPreExecute()** `It invoked on the UI thread before the task is executed. This step is normally used to setup the task, for instance by showing a progress bar in the user interface.`

2.doInBackground **(参数...)** `invoked on the background thread immediately after onPreExecute() finishes executing. This step is used to perform background computation that can take a long time. The parameters of the asynchronous task are passed to this step. The result of the computation must be returned by this step and will be passed back to the last step. This step can also use`

3.**发布进度（进度...）** `to publish one or more units of progress. These values are published on the UI thread, in the onProgressUpdate(Progress...) step.`

4\. **onProgressUpdate(进度...),**

```
 invoked on the UI thread after a call to 
publishProgress(Progress...). The timing of the execution is undefined.
 This method is used to display any form of progress in the user interface while
 the background computation is still executing. For instance, it can be used to animate a progress bar or show logs in a text field. 
```

5\. **onPostExecute(结果)** ,`invoked on the UI thread after the background computation finishes. The result of the background computation is passed to this step as a parameter.`

这是如何在android中使用AsyncTask的教程。

[http://labs.makemachine.net/2010/05/android-asynctask-example/](http://labs.makemachine.net/2010/05/android-asynctask-example/)

[AsyncTask Android 示例](https://stackoverflow.com/questions/9671546/asynctask-android-example)

以及来自 android 开发者网站的 AsyncTask 的以下链接。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

**有关详细信息。必须访问上面提到的开发者网站**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T12:15:06.147

你好用这个`AsyncTask`方法

```
public class GetTask extends AsyncTask<Void, Void, Integer> {
    private ProgressDialog mProgress;

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        mProgress = ProgressDialog.show(MainActivity.this, "", "Loading");
    }

    @Override
    protected Integer doInBackground(Void... params) {
        // TODO Auto-generated method stub
        // Do your stuff 
    }

    @Override
    protected void onPostExecute(Integer result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        if (mProgress.isShowing())
            mProgress.cancel();

    }

} 
```*

# c# - 有没有办法获取 PostgreSQL 服务名称？

> ID：14500931
> 
> 赞同：4
> 
> 时间：2013-01-24T12:02:50.503
> 
> 标签：c#, windows, npgsql

有没有办法获取 PostgreSQL 服务名称？

我的意思是类似于`SELECT @@SERVICENAME`MS SQL Server 中的内容。或者它可能在配置文件之一中声明？

它称为服务 ID： ![在此处输入图像描述](../Images/997ab7c5dfa5151aa8c438651f525ad5.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2021-08-23T18:59:12.100

我相信我在我的 Windows 服务上发现了一些与 postgresql Windows 服务相关的东西，服务名称似乎是“pg_ctl.exe”

我在下面得到了一些打印

PostgreSQL 服务名称： ![](../Images/ddcf176ebba10488de9c6c83e256c353.png)

![在此处输入图像描述](../Images/48fa319f46061d2cce907b25a5ffe4eb.png)

# css - HTML5 视频导致固定 div 粘住

> ID：14500932
> 
> 赞同：0
> 
> 时间：2013-01-24T12:02:52.100
> 
> 标签：css, html, position, html5-video, fixed

我在页面顶部的 div 中放置了一个 html5 视频。我还在它上面放了一个固定位置的标题，唯一的问题是当页面滚动时标题开始粘在地方。它会弹回正确的位置。我试过没有视频的页面，它没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:27:46.727

我设法通过删除包含视频的 div 上的负 z-index 来解决这个问题。将正 z-index 放在内容和导航上使它们滑过顶部而不是粘住。不知道这是如何解决的，但它可以工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T12:10:04.313

听起来有些东西更新得不够快。这就是为什么我不信任网络代码:)。

# colors - Opencart 货币符号颜色更改

> ID：14500940
> 
> 赞同：0
> 
> 时间：2013-01-24T12:03:24.423
> 
> 标签：colors, opencart, currency

如上所述，我试图在 opencart 中更改货币符号的颜色和大小，我注意到符号和金额的价格标题添加了相同的 css，但我只想修改货币符号..而不是金额。任何想法如何做到这一点？我找不到那个符号“拉客栈”是从哪里来的

它是默认的 1.5.4 主题

感谢转发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:44:57.950

该符号是从您的配置中拉入的`/system/library/currency.php`。您可以在管理区域中编辑您的符号，`SYSTEM > LOCALISATION > CURRENCY`并可以在符号周围添加一个带有类的跨度，然后将规则添加到您的 css 文件

# windows-phone-7 - 在画布 Windows 手机上加载图像

> ID：14500941
> 
> 赞同：1
> 
> 时间：2013-01-24T12:03:32.113
> 
> 标签：windows-phone-7, canvas, windows-phone-7.1

我正在使用**PhotoChooserTask**选择图像。我正在尝试在画布上加载选定的图像但无法加载。

这是我的代码

```
 void photoChooserTask_Completed(object sender, PhotoResult e)
    {
        if (e.TaskResult == TaskResult.OK)
        {
            Image image = new Image();
            string path = e.OriginalFileName;
            Uri uri = new Uri(path, UriKind.Relative);

            ImageSource img = new System.Windows.Media.Imaging.BitmapImage(uri);

            image.Height = paint.Height;
            image.Width = paint.Width;

            image.SetValue(Image.SourceProperty, img);

            Canvas.SetLeft(image, 50);
            Canvas.SetTop(image, 50);

            paint.Children.Add(image);
        }
    } 
```

**主页.xaml**

```
 <Canvas x:Name="paint" Background="Transparent" Margin="0,95,0,139" >

 </Canvas> 
```

我明白为什么这不起作用。我的代码有什么变化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:18:47.910

添加了我的评论作为答案，因为我很确定这是问题所在。

您是否应该通过`Canvas.Left`and`Canvas.Top`属性设置图像在画布中的位置？例如。

```
Canvas.SetLeft(image, 10); 
Canvas.SetTop(image, 10); 
paint.Children.Add(image); 
```

# jquery - 双击网格上的struts2 jQuery网格对话框弹出，其中包含从动作填充的值

> ID：14500944
> 
> 赞同：1
> 
> 时间：2013-01-24T12:03:42.150
> 
> 标签：jquery, struts2-jquery

我有一个`struts2-Jquery`网格。要求在双击网格行时，网格行键应该是 caputerd 并调用 struts2 操作（返回 json），该操作从数据库中获取与键对应的详细信息并在 jquery 对话框中显示结果。我以以下方式实现，但由于映射不正确，对话框没有填充。

然后我使用 session 在 jsp 存储和读取，但每次都显示相同的值

我需要帮助来了解如何知道

```
$("#detailDialog").load("<s:url value="my-dialogAction"/>"+"?gridKey="+key);     
should returns success and only then to publish   
$.publish('loadSuccessConfirm'); 
```

代码片段

---------Jquery 网格代码 ---------

```
< sjg:grid id="mytable" ..   
.. ..  
onDblClickRowTopics="popup"  
>  

< sjg:gridColumn .. />   
< sjg:gridColumn .. /> .. 
```

-------------java脚本---

```
< script type="text/javascript" >  
$.subscribe('popup', function(event, data) {  
    var key = $("#mytable").jqGrid('getGridParam','selrow');  
    $("#detailDialog").load("<s:url value="my-dialogAction"/>"+"?gridKey="+key);  
    $.publish('loadSuccessConfirm');  

});  

< /script> 
```

- - - - - - - - 对话 - - - - - -

```
< sj:div id="detailDialog" name="detailDialog" >  
< sj:dialog position="center" height="200" width="500" openTopics="loadSuccessConfirm"   name="dialog1"  id="dialog1" autoOpen="false"  >  

    < s:iterator value="#session.comparePorts" status="stat" var="stack">  
        < tr>  
        < td><s:property value="#stack.airPortFrom"/> </td>  
        < td><s:property value="#stack.transportMode"/></td>  
        < td><s:property value="#stack.svc"/></td>    
        < td><s:property value="#stack.calcCostLoad"/></td>  

        < /tr>  
        <  /s:iterator>  

< /sj:dialog>   

< /sj:div> 
```

* * *

更新

我编辑了如下脚本代码，它在成功后发布，但对话框仍然显示陈旧值并且没有刷新

```
$.subscribe('popup', function(event, data) {
    var key = $("#mepctable").jqGrid('getGridParam','selrow');
    $("#detailDialog").load("<s:url value="my-dialogAction"/>"+"?gridKey="+key,
        function() { alert("success");$.publish('loadSuccessConfirm');});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:32:13.750

标记在页面呈现时进行评估，`<s:property />`并且不会更改。

可能您应该将对话框内容作为另一个 jsp/action 并使用 ajax`href`使用`<sj:dialog />`. 并用于`listenTopics`在双击该行时重新加载对话框。

[https://code.google.com/p/struts2-jquery/wiki/DialogTag](https://code.google.com/p/struts2-jquery/wiki/DialogTag)

# java - 尝试连接 websphere 服务器时出现异常

> ID：14500950
> 
> 赞同：0
> 
> 时间：2013-01-24T12:03:56.767
> 
> 标签：java, eclipse, exception, rmi, corba

我有一个通过 RMI 连接到 WAS 的 eclipse 插件...

当我在 Eclipse 中运行插件时，工作正常......但是当我尝试在 RDz 上运行时（[http://www-01.ibm.com/software/rational/products/developer/systemz/](http://www-01.ibm.com/software/rational/products/developer/systemz/)是一个 Eclipse 平台构建IBM）我得到了以下异常。

```
java.lang.VerifyError: JVMVRFY027 o receptor é incompatível com classe de declaração; class=com/ibm/rmi/corba/TypeCodeImpl, method=read_value_body(Lorg/omg/CORBA_2_3/portable/InputStream;)V, pc=233
    at java.lang.J9VMInternals.verifyImpl(Native Method)
    at java.lang.J9VMInternals.verify(Unknown Source)
    at java.lang.J9VMInternals.initialize(Unknown Source)
    at com.ibm.rmi.iiop.CDROutputStream.<clinit>(CDROutputStream.java:1105)
    at java.lang.J9VMInternals.initializeImpl(Native Method)
    at java.lang.J9VMInternals.initialize(Unknown Source)
    at com.ibm.rmi.corba.ORB.<init>(ORB.java:277)
    at com.ibm.rmi.iiop.ORB.<init>(ORB.java:187)
    at com.ibm.CORBA.iiop.ORB.<init>(ORB.java:569)
    at java.lang.J9VMInternals.newInstanceImpl(Native Method)
    at java.lang.Class.newInstance(Unknown Source)
    at org.omg.CORBA.ORB.create_impl(ORB.java:322)
    at org.omg.CORBA.ORB.init(ORB.java:363)
    at com.sun.jndi.toolkit.corba.CorbaUtils.getOrb(CorbaUtils.java:215)
    at com.sun.jndi.cosnaming.CNCtx.initUsingIiopUrl(CNCtx.java:332)
    at com.sun.jndi.cosnaming.CNCtx.initUsingUrl(CNCtx.java:289)
    at com.sun.jndi.cosnaming.CNCtx.initOrbAndRootContext(CNCtx.java:251)
    at com.sun.jndi.cosnaming.CNCtx.<init>(CNCtx.java:103)
    at com.sun.jndi.cosnaming.CNCtxFactory.getInitialContext(CNCtxFactory.java:61)
    at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:695)
    at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:318)
    at javax.naming.InitialContext.init(InitialContext.java:253)
    at javax.naming.InitialContext.<init>(InitialContext.java:227)
    at my.package.product.core.server.LPDAProxy.lookup(LPDAProxy.java:68)
    at my.package.product.core.server.session.LPDASessionProxy.open(LPDASessionProxy.java:145)
    at my.package.product.core.server.session.LPDASession.open(LPDASession.java:99)
    at my.package.product.core.server.task.OpenConnectionTask.runServerTask(OpenConnectionTask.java:94)
    at my.package.product.core.server.task.LPDAServerTask.runTask(LPDAServerTask.java:88)
    at my.package.product.core.server.LPDATask.run(LPDATask.java:60)
    at org.eclipse.jface.operation.ModalContext.runInCurrentThread(Unknown Source)
    at org.eclipse.jface.operation.ModalContext.run(Unknown Source)
    at org.eclipse.jface.dialogs.ProgressMonitorDialog.run(Unknown Source)
    at org.eclipse.ui.internal.progress.ProgressMonitorJobsDialog.run(Unknown Source)
    at org.eclipse.ui.internal.progress.ProgressManager.run(Unknown Source)
    at my.package.product.core.server.LPDAServer.executeTask(LPDAServer.java:385)
    at my.package.product.core.server.LPDAServer.open(LPDAServer.java:175)
    at my.package.product.core.server.LPDAServer.checkConnection(LPDAServer.java:333)
    at my.package.product.core.server.LPDAServer.getLPDARepository(LPDAServer.java:314)
    at my.package.product.core.ui.common.selector.repository.RepositorySelector.load(RepositorySelector.java:152)
    at my.package.product.core.ui.common.selector.repository.RepositorySelector.refresh(RepositorySelector.java:131)
    at my.package.product.core.ui.common.selector.repository.RepositorySelector.access$0(RepositorySelector.java:128)
    at my.package.product.core.ui.common.selector.repository.RepositorySelector$1.widgetSelected(RepositorySelector.java:67)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(Unknown Source)
    at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source)
    at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Unknown Source)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Unknown Source)
    at org.eclipse.ui.internal.Workbench.runUI(Unknown Source)
    at org.eclipse.ui.internal.Workbench.access$4(Unknown Source)
    at org.eclipse.ui.internal.Workbench$7.run(Unknown Source)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Unknown Source)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Unknown Source)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(Unknown Source)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(Unknown Source)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(Unknown Source)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(Unknown Source)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(Unknown Source)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:620)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:575)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1408)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1384) 
```

此异常发生在 InitialContext 的查找方法中......当我使用单个类中的当前参数仅执行查找方法时，工作正常。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:37:33.283

我遇到了问题，因为服务器正在运行 java 5 而我使用的是 java 7。当我尝试查找 EJB 时，此版本之间存在一些不兼容。

# php - simplehtmldom 标记名称小写和大写问题

> ID：14500953
> 
> 赞同：0
> 
> 时间：2013-01-24T12:04:03.937
> 
> 标签：php, simple-html-dom

我正在用 simplehtmldom 解析一些 html 代码，我发现了一些问题，这里有一些简短的测试代码：

```
$html =<<<ECHO
<div class="content">content 1</div>
<div class="Content">content 2</div>
ECHO;
$str= str_get_html($html);
foreach($str->find('.content') as $content){
    echo $content.'<br />';  // lost .Content
} 
```

那么simplehtmldom中如何解决小写和大写呢？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:17:39.690

参考[http://simplehtmldom.sourceforge.net/#fragment-12](http://simplehtmldom.sourceforge.net/#fragment-12)我们可以首先`strtolower`将所有元素类。

```
$html =<<<ECHO
<div class="content">content 1</div>
<div class="Content">content 2</div>
ECHO;
$str= str_get_html($html);
foreach($str->find('div') as $divwithclass){
    $divwithclass->class = strtolower($divwithclass->class);
}
foreach($str->find('.content') as $content){
    echo $content.'<br />';
} 
```

# php - 关联的教义 postLoad 事件

> ID：14500954
> 
> 赞同：6
> 
> 时间：2013-01-24T12:04:05.427
> 
> 标签：php, orm, doctrine-orm

我目前有一个实体，我想在加载时稍微修改它。此修改将是一次性更改，然后将与实体一起保存在新字段中。

澄清我目前的目标：实体是一个“位置”，是嵌套集的一部分。它有一个名称、lft/rgt 值和一个 ID。我使用该实体执行的一项计算量很大的任务是获取完整的位置路径并将其显示为文本。例如，对于位置实体“滑铁卢”，我想显示为“滑铁卢|伦敦|英国”。这涉及遍历整个集合（到根节点）。

为了降低成本，我在 Location 实体上创建了一个新字段，可以用这个值标记（并在修改位置（或树中的任何位置）名称时更新）。考虑到我的应用程序处于活动状态，我需要避免将其作为一次性进程运行，因为它会在数据库上产生相当密集的一次性命中，相反我想在每个位置应用此更新（没有该值）被加载。我认为 Doctrine 的 postLoad 事件机制非常适合实现这一点，但是..

Location 实体不是由我的应用程序直接加载的，它们始终是关系的反面。考虑到这一点，以及学说的 postLoad 事件的事实：

*   不加载（允许访问）任何相关数据
*   仅因拥有实体而被解雇

我无法轻轻地进行这些修改。

有人对此有任何建议或经验吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T15:08:11.407

通过使用实体管理器上的 initializeObject() 方法，我能够在 postLoad 事件中加载关联的 Location 对象。

```
/**
 * Upon loading the object, if the location text isn't set, set it
 * @param \Doctrine\ORM\Event\LifecycleEventArgs $args
 */
public function postLoad(\Doctrine\ORM\Event\LifecycleEventArgs $args)
{
    $this->em = $args->getEntityManager();
    $entity = $args->getEntity();

    if ($entity instanceof \Entities\Location)
    {
        if (is_null($entity->getPathText()))
        {
            $entity->setPathText("new value");
            $this->em->flush($entity);
        }
    } elseif ($entity instanceof {parent Entity})
    {
        $location = $entity->getLocation();
        // This triggers the postLoad event again, but this time with Location as the parent Entity
        $this->em->initializeObject($location);
    }
} 
```

# c++ - 加载 BMP __imp___CrtDbgReportW 错误

> ID：14500955
> 
> 赞同：0
> 
> 时间：2013-01-24T12:04:06.363
> 
> 标签：c++, visual-studio-2012, compiler-errors

我试图加载图像并收到此错误：

```
Error   1   error LNK2019: unresolved external symbol __imp___CrtDbgReportW
referenced in function "public: char const & __thiscall
std::_String_const_iterator<class 
std::_String_val<struct std::_Simple_types<char> > >::operator*(void)const " 
(??D?$_String_const_iterator@V?$_String_val@U?$_Simple_types@D@std@@@std@@@std@@QBEABDXZ)   
C:\Users\Name\Documents\Visual Studio 2012\Projects\ConsoleApplication4\
ConsoleApplication4\Terrain.obj 
```

我检查了 MSDN 论坛并尝试通过`_DEBUG`从预处理器中删除/添加`/MTd`到命令行来解决问题，但建议的解决方案都没有奏效。

我已经将问题缩小到 ImageLoader 类，但不知道如何解决这个问题......我一直在关注[这个](http://www.videotutorialsrock.com/opengl_tutorial/terrain/home.php)教程，它提供了 Image 加载类。

有关如何解决此错误的任何建议？

# asp.net - Crystal Report 在 IIS 7 中不起作用

> ID：14500961
> 
> 赞同：1
> 
> 时间：2013-01-24T12:04:44.220
> 
> 标签：asp.net, iis-7, crystal-reports-2008

我有一个在和上开发`ASP.NET 4.0`的Web 应用程序。在它上面运行时工作正常，但是当我在报告上部署它时不起作用。`SQL SERVER 2008``Crystal Report 2008``VS2010``IIS 7`

*   应用程序登录成功。
*   数据库是正确的。
*   报告上的连接是正确的。
*   我授予 IIS 和 Windows\Temp 文件夹的完全权限

我用谷歌搜索并找到了许多解决方案，但没有一个有效。
请告诉我解决方案。此外，这些报告正在使用 IIS6。
错误在下图中 ![在此处输入图像描述](../Images/d23bfc74d4421ca5221033f00c5d6bfe.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:54:38.857

我正在使用 Crystal 运行 IIS7，没有任何问题。出乎意料的是，某些报告开始失败并在 中创建锁定文件`c:\windows\temp.` 到目前为止，对我来说，唯一的修复是打开每个报告并执行以下操作：

> 文件 > 页面设置 > 勾选以下选项“无打印机（针对屏幕显示进行优化）”

之后我停止了应用程序池，清理了`c:\windows\temp`目录并再次启动了应用程序池。此后所有问题都已得到解决。

**这假设您有一个工作的 IIS7 环境开始**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T12:26:29.310

最后，我得到了解决方案*。我正在使用`ODBC`，这是问题所在。我从用户 DNS 中删除了连接并在系统 DSN 中创建。

*我在一年前得到了它，但它是为正在搜索的人准备的。它可能会有所帮助。

# c++ - 类树的一个分支如何使其所有零初始化成员都是垃圾？

> ID：14500962
> 
> 赞同：0
> 
> 时间：2013-01-24T12:04:48.087
> 
> 标签：c++, visual-studio-2010, inheritance

（仅当零初始化为静态范围成员时才不是垃圾。）它[在 GCC 上按预期工作！（（（](http://liveworkspace.org/code/KKkbu%2422)

所以对于像这样的代码：

```
#include <iostream>
#include <boost/shared_ptr.hpp>

namespace SP
{
    // enums
    enum EnumMessage {
        EnumMessage_EventBase = 0,
        EnumMessage_EventServiceBase = 1,
        EnumMessage_OperationBase = 2
    };

    class Message;

    // define proxy class
    class Message  {
    public:
        EnumMessage _MessageCode;
    };

    class Parent : public Message {
    public:
        int _ServiceId;
        int _CallbackId;
    };

    class Child : public Parent {
    public:
        std::string _Debug;
    };

    class AnotherChild : public Parent {
    public:
        int _UserId;
    };
}

using namespace SP;

int main() {
    //OK
    static Child staticScopeChild = Child();
    boost::shared_ptr<Parent> ptrParent(new Parent());
    boost::shared_ptr<AnotherChild> ptrChild2(new AnotherChild());

    //Bad
    Child scopeChild = Child();
    boost::shared_ptr<Child> ptrChild(new Child());

    std::cout << "static " << staticScopeChild._MessageCode 
        << std::endl << "vs scope " << scopeChild._MessageCode 
        << std::endl << "vs pointer " << ptrChild->_MessageCode 
        << std::endl << "vs parent class pointer: " << ptrParent->_MessageCode 
        << std::endl << "vs another parent child: " << ptrChild2->_MessageCode <<std::endl;
    std::cin.get();
    return 0;
} 
```

所有类通常都是 POD ( `ints`, `enums`) 我得到下一个输出：

```
static 0
vs scope -858993460
vs pointer -842150451
vs parent class pointer: 0
vs another parent child: 0 
```

虽然我希望一切都会`0`！

为什么会发生这样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T13:11:58.037

这似乎是一个编译器错误：根据[此报告](https://connect.microsoft.com/VisualStudio/feedback/details/746973/incorrect-c-11-value-initialization-for-type-with-implicitly-declared-but-non-trivial-default-constructor)，基类的成员在派生类的值初始化期间未进行零初始化。

据我所知，您的代码没有任何问题，并且所有类成员都应在符合 C++03 或 C++11 的编译器上进行零初始化。

我想你的选择是：

*   通过避免继承使类更像 POD；或者
*   将默认构造函数添加到任何基类以显式零初始化所有成员；或者
*   使用损坏较少的编译器。

# android - Android中ActionBar下方的下拉选项卡或下拉菜单

> ID：14500974
> 
> 赞同：0
> 
> 时间：2013-01-24T12:05:25.713
> 
> 标签：android, android-layout, drop-down-menu

我需要添加一个下拉菜单，如附件图片链接中所示。

[http://i.imgur.com/cWtykfN.jpg](http://i.imgur.com/cWtykfN.jpg)

我不知道要使用什么，无论是选项卡还是菜单。我的需要是当我按下最后一个选项卡/菜单时，应该显示子菜单并且我可以处理相应的操作。即使当我处理这些菜单时，我也应该能够不间断地显示顶部选项卡/菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:09:25.933

将 ActionBar 与 tab-navigation-mode 一起使用，如果单击最后一个选项卡，您可以简单地触发[PopupMenu](http://developer.android.com/guide/topics/ui/menus.html#PopupMenu)（尽管这看起来有点奇怪，并且不是我单击选项卡时所期望的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:13:44.993

它被称为溢出菜单。看看这个例子，你就会明白了。

[http://wptrafficanalyzer.in/blog/adding-action-items-and-overflow-menu-items-to-action-bar-in-android/](http://wptrafficanalyzer.in/blog/adding-action-items-and-overflow-menu-items-to-action-bar-in-android/)

这里给出了很好的解释。[http://blog.stylingandroid.com/archives/1249](http://blog.stylingandroid.com/archives/1249)和源代码。参考这里：[https ://github.com/StylingAndroid/StylingActionBar/Tree/StylingPart2](https://github.com/StylingAndroid/StylingActionBar/Tree/StylingPart2)

# asp.net-mvc-4 - 在索引页内查询

> ID：14500975
> 
> 赞同：0
> 
> 时间：2013-01-24T12:05:27.120
> 
> 标签：asp.net-mvc-4

我可以在作为项目列表的索引视图页面中进行查询吗？因为我想使用“where 子句”查询另一个表的记录，只是获取 url 中所选项目的 Id，它也会显示在索引视图页面内。如果可以查询，我需要一个例子。我正在使用 asp.net mvc4。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:49:31.053

在视图页面中创建一个代码块，将查询返回的数据保存在一个视图包中，您可以在其他任何地方使用该视图包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:11:23.917

测试控制器

```
Function Index() As ActionResult
    Return View()
End Function

Function page(id As String) As ActionResult
    Return View()
End Function 
```

..... 查看页面 .. ..... 索引 .... `

```
<h2>Index</h2>

<a href="@Url.Content("~/Test/page/1")">1</a>
<a href="@Url.Content("~/Test/page/2")">2</a>
<a href="@Url.Content("~/Test/page/3")">3</a> 
```

.....页面页面....

```
 @Code
    ViewData("Title") = "page"
    Dim str = Request.Url.ToString()
    Dim laststr = Microsoft.VisualBasic.Right(str, 1)
    Dim vs As New Ve.VeDataSource
    ViewData("abc") = ((From r In vs.aspnet_Roles Order By r.RoleId Select    r.RoleName).Skip(laststr)).FirstOrDefault
End Code
<h2>page</h2>
<br />
@ViewData("abc") 
```

# php - 文章视图覆盖让内容插件无法在 joomla 中加载

> ID：14500982
> 
> 赞同：0
> 
> 时间：2013-01-24T12:05:49.020
> 
> 标签：php, joomla, joomla2.5

只是一个简单的问题，我已经在前端覆盖了我的文章视图以满足我的要求。现在我安装了一个内容插件来在文章视图中显示 facebook 喜欢和分享图标，但是这个插件在文章视图中不可见。我已经从后端启用了插件。我认为问题的出现是因为覆盖了 joomla 中的默认文章视图。

知道如何将这个内容插件加载到这个被覆盖的文章视图中（因为它应该正常发生）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:22:32.550

您是否以 jooomla 核心的方式包含事件？

```
<?php if (!$params->get('show_intro')) : echo $this->item->event->afterDisplayTitle; endif; ?>
    <?php echo $this->item->event->beforeDisplayContent; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:59:38.847

艾琳说的对，请参考您的覆盖天气您已经呼应了该插件行

```
<?php echo $this->item->event->beforeDisplayContent; ?> 
```

在您完成相同操作的其他项目中，该模板可能具有该行，而在您当前的项目中，该行必须丢失。而已。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T17:02:56.353

如果您不覆盖视图，我不清楚安装的插件是否可以正常工作。那么插件肯定有问题。我为我的一个项目做了同样的事情，这对 Joomla 2.5 来说效果很好。检查插件论坛以获取更多信息。

# javascript - 如何用表格显示 HighCharts

> ID：14500984
> 
> 赞同：3
> 
> 时间：2013-01-24T12:05:58.077
> 
> 标签：javascript, jquery, html, highcharts

我正在尝试与表格`highcharts`一起显示表格数据。但不知何故，图表和表格没有显示在 html 页面中。我的代码如下。`<div>`我需要在标签之间写下吗？如果我打印普通文本，它会显示。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>
        charts
    </title>
    <script src="js/jquery-migrate-1.0.0.js" type="text/javascript"></script>
    <script src="js/jquery.js" type="text/javascript"></script>
    <script type="text/javascript">
        /**
        * Create the data table
        */
        Highcharts.drawTable = function () {
            // user options
            var tableTop = 310,
                colWidth = 100,
                tableLeft = 20,
                rowHeight = 20,
                cellPadding = 2.5,
                valueDecimals = 1,
                valueSuffix = ' °C';
            // internal variables
            var chart = this,
                series = chart.series,
                renderer = chart.renderer,
                cellLeft = tableLeft;
            // draw category labels
            $.each( chart.xAxis[0].categories, function ( i, name ) {
                renderer.text(
                    name,
                    cellLeft + cellPadding,
                    tableTop + ( i + 2 ) * rowHeight - cellPadding
                ).css( {
                    fontWeight: 'bold'
                } ).add();
            } );
            $.each( series, function ( i, serie ) {
                cellLeft += colWidth;
                // Apply the cell text
                renderer.text(
                    serie.name,
                    cellLeft - cellPadding + colWidth,
                    tableTop + rowHeight - cellPadding
                ).attr( {
                    align: 'right'
                } ).css( {
                    fontWeight: 'bold'
                } ).add();

                $.each( serie.data, function ( row, point ) {

                    // Apply the cell text
                    renderer.text(
                        Highcharts.numberFormat( point.y, valueDecimals ) + valueSuffix,
                        cellLeft + colWidth - cellPadding,
                        tableTop + ( row + 2 ) * rowHeight - cellPadding
                    )
                        .attr( {
                            align: 'right'
                        } )
                        .add();

                    // horizontal lines
                    if ( row == 0 ) {
                        Highcharts.tableLine( // top
                            renderer,
                            tableLeft,
                            tableTop + cellPadding,
                            cellLeft + colWidth,
                            tableTop + cellPadding
                        );
                        Highcharts.tableLine( // bottom
                            renderer,
                            tableLeft,
                            tableTop + ( serie.data.length + 1 ) * rowHeight + cellPadding,
                            cellLeft + colWidth,
                            tableTop + ( serie.data.length + 1 ) * rowHeight + cellPadding
                        );
                    }
                    // horizontal line
                    Highcharts.tableLine(
                        renderer,
                        tableLeft,
                        tableTop + row * rowHeight + rowHeight + cellPadding,
                        cellLeft + colWidth,
                        tableTop + row * rowHeight + rowHeight + cellPadding
                    );

                } );

                // vertical lines
                if ( i == 0 ) { // left table border
                    Highcharts.tableLine(
                        renderer,
                        tableLeft,
                        tableTop + cellPadding,
                        tableLeft,
                        tableTop + ( serie.data.length + 1 ) * rowHeight + cellPadding
                    );
                }

                Highcharts.tableLine(
                    renderer,
                    cellLeft,
                    tableTop + cellPadding,
                    cellLeft,
                    tableTop + ( serie.data.length + 1 ) * rowHeight + cellPadding
                );
                if ( i == series.length - 1 ) { // right table border
                    Highcharts.tableLine(
                        renderer,
                        cellLeft + colWidth,
                        tableTop + cellPadding,
                        cellLeft + colWidth,
                        tableTop + ( serie.data.length + 1 ) * rowHeight + cellPadding
                    );
                }

            } );
        };
        /**
        * Draw a single line in the table
        */
        Highcharts.tableLine = function ( renderer, x1, y1, x2, y2 ) {
            renderer.path( ['M', x1, y1, 'L', x2, y2] )
                .attr( {
                    'stroke': 'silver',
                    'stroke-width': 1
                } )
                .add();
        }
        /**
        * Create the chart
        */
        window.chart = new Highcharts.Chart( {
            chart: {
                renderTo: 'container',
                events: {
                    load: Highcharts.drawTable
                },
                borderWidth: 2
            },
            title: {
                text: 'Average monthly temperatures'
            },
            xAxis: {
                categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
            },
            yAxis: {
                title: {
                    text: 'Temperature (°C)'
                }
            },
            legend: {
                y: -300
            },
            series: [{
                name: 'Tokyo',
                data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
            }, {
                name: 'New York',
                data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]
            }, {
                name: 'Berlin',
                data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
            }, {
                name: 'London',
                data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
            }]
        } );
    </script>
</head>
<body>
    <script type="text/javascript" src="http://www.highcharts.com/js/testing-exporting.js"></script>
    <div id="container" style="height: 600px;margin-top:20px;width: 600px"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-03-20T17:19:34.047

查看这个[jsfiddle](http://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/export-data/showtable/)。参考 showTable 下的 highcharts [API](https://api.highcharts.com/highcharts/exporting.showTable)。

上面的例子只是简单地将这行代码添加到图表对象中。完整代码见链接：

`exporting: { showTable: true }`

[这里](http://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/studies/exporting-table/)有另一个示例 引用自 highcharts [FAQ - 将数据表添加到导出的图表](https://www.highcharts.com/docs/getting-started/frequently-asked-questions#add-data-table)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:30:32.313

如果我正确阅读了您的问题，您希望 HighCharts 还“绘制”一个包含数据的表格以及该表格中的数据图表。如果是这样，请查看我对[这个](https://stackoverflow.com/questions/12887074/highcharts-generated-table/12915639#12915639)问题的回答。它是关于数值格式的，但我的 jsFiddle 将向您展示如何绘制表格。请注意，表格/图表的格式和对齐方式很棘手，具体取决于您尝试显示的数据量。

# c# - 如何在 sap business one 中控制屏幕画家的关闭事件？

> ID：14500986
> 
> 赞同：1
> 
> 时间：2013-01-24T12:06:08.040
> 
> 标签：c#, vb.net, sapb1

我是 SAP 业务的新手。我对 sap business 一种屏幕画家表格有疑问。我想验证表单以避免空值。我写了这段代码：

```
If pVal.FormUID = "TRADING" And pVal.ItemUID = "1" And pVal.Before_Action = True And pVal.InnerEvent = False And pVal.EventType = SAPbouiCOM.BoEventTypes.et_ITEM_PRESSED And (pVal.FormMode = SAPbouiCOM.BoFormMode.fm_ADD_MODE Or pVal.FormMode = SAPbouiCOM.BoFormMode.fm_UPDATE_MODE) Then
    oEdit = oForm.Items.Item("10").Specific
    If oEdit.String = "" Then
        SBO_Application.StatusBar.SetText("Select Buyer Code", SAPbouiCOM.BoMessageTime.bmt_Short, SAPbouiCOM.BoStatusBarMessageType.smt_Error)
        BubbleEvent = False
        Exit Sub
    End If
End If 
```

当我按下添加按钮时它工作正常，但如果我按下表单右上角的关闭按钮，它会显示保存数据的确认。如果我按“是”，它仍然允许插入空值。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:40:12.603

尝试使用 SP_TransactionNotification 存储过程？

在这里你会找到一些例子：[http ://scn.sap.com/people/lisa.mulchinock/blog/2009/05/22/the-sptransactionnotification-stored-procedure](http://scn.sap.com/people/lisa.mulchinock/blog/2009/05/22/the-sptransactionnotification-stored-procedure)

# facebook - 如何使用社交框架邀请 Facebook 中的朋友

> ID：14500989
> 
> 赞同：9
> 
> 时间：2013-01-24T12:06:20.503
> 
> 标签：facebook, ios6, social-framework, facebook-invite

我正在使用 Facebook 开发社交媒体应用程序。我的应用程序同时支持 iOS 5 和 iOS 6，我想使用原生 facebook 来邀请朋友。

在 iOS 5 中，它使用图形 api 可以正常工作。在 iOS 6 中苹果添加的新功能我们可以将 Facebook 本地用作 twitter。所以我们不需要从我们的应用程序登录，它将从 iOS 6 中的 iphone 设置屏幕获取凭据。

所以为此我必须使用我们在 twitter 中使用的社交框架。我成功地使用本机对话框进行 Facebook 图像共享和发布，就像在 twitter 中一样。

现在我想使用原生对话框（社交框架）邀请 Facebook 中的朋友。

而且我不知道如何使用社交框架在 iOS6 中邀请朋友。

我搜索了很多但无法找到任何解决方案，即使我不知道这是否可能？

如果有人对此有示例项目或好主意，请通知我。

我希望你能理解我的问题...

如果不是请告诉我..

# java - JCR框架基本信息

> ID：14500991
> 
> 赞同：0
> 
> 时间：2013-01-24T12:06:25.457
> 
> 标签：java, jcr

我们正在将当前的内容管理系统替换为使用 JCR 框架的新系统。我是 java JCR API 的新手，急需尽快学习它！

这里的一些被点燃的头脑会介意为新手提供最好的在线教程提供一点帮助吗？

任何帮助将不胜感激。最需要的是有关如何在简单的 java/Java EE 项目中开始使用它的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:27:10.110

通过以下链接获得基本、简洁和快速的信息。希望它也对其他人有所帮助

[http://java.dzone.com/articles/java-content-repository-best](http://java.dzone.com/articles/java-content-repository-best)

[http://onjava.com/pub/a/onjava/2006/10/04/what-is-java-content-repository.html](http://onjava.com/pub/a/onjava/2006/10/04/what-is-java-content-repository.html)

[http://www.day.com/specs/jcr/1.0/6.2.10_Example.html](http://www.day.com/specs/jcr/1.0/6.2.10_Example.html)