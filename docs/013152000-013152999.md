# StackOverflow 问答 13152000-13152999

# rename - 重命名FB页面

> ID：13152000
> 
> 赞同：1
> 
> 时间：2012-10-31T05:54:36.137
> 
> 标签：rename, facebook-page

我知道超过 200 位粉丝是不允许的，但我真的需要 facebook 破例……因为我很特别？哈！我已经重命名了我的企业/品牌，并且讨厌以 0 个粉丝开始一个全新的页面。我现在有6000多。内容完全一样，只是简单的改名。我的黄色沙盒让我很漂亮。

我尝试重命名 URL。显然那没有用。如果我确实开始一个全新的页面，我将不得不将其更改为其他内容。反正。我有一个朋友说她获得了重命名页面的特别许可。我不确定这是否是很久以前的事，或者这些是否是新政策。我真的很喜欢我的博客名称与我的 Facebook 页面相匹配。如果不这样做，对企业不利。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:25:50.423

我处于类似的情况，我搜索了又搜索，但找不到这样做的方法。

此外，不幸的是，Facebook 似乎尽可能地难以与他们取得联系。

# c# - 为什么在处理后会再次分派 MSMQ 消息？

> ID：13152002
> 
> 赞同：2
> 
> 时间：2012-10-31T05:54:46.043
> 
> 标签：c#, wcf, msmq

在 C# 中使用事务性 MSMQ 和 WCF

有时由于某种原因，消息会从 MSMQ 重新分派，即使上一次消息已成功处理（即没有未处理的异常或任何事情）。只有 1 个我放入队列的消息。

任何想法为什么？

当然，当 msg 被调度时，我也在调试，但我在某些区域只有很少的断点，并且在 msg 流入的上下文中，我花费不超过 3 秒的时间查看我需要查看的内容系统。

任何想法为什么重复调度？

更新：代码：

```
[ServiceContract]
[ServiceKnownType(typeof(CustomMessage))]
[ServiceKnownType(typeof(MessageA))]
[ServiceKnownType(typeof(MessageB))]
public interface IMessageHandlerService
    {
        [OperationContract(IsOneWay = true, Action = "*")]
        void ProcessMessage(MsmqMessage<CustomMessage> message);
    }

[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Single, InstanceContextMode = InstanceContextMode.Single, ReleaseServiceInstanceOnTransactionComplete = false)]
    public sealed class MessageHandlerService : IMessageHandlerService
    {
        [OperationBehavior(TransactionScopeRequired = true, TransactionAutoComplete = true)]
        public void ProcessMessage(MsmqMessage<CustomMessage> message)
        {
            ...
        }
    } 
```

我的ABC：

```
<system.serviceModel>
    <behaviors>
      <endpointBehaviors>
        <behavior name="IncludeExceptionDetails">
          <callbackDebug includeExceptionDetailInFaults="true" />          
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <services>
      <service name="Services.Implementation.MessageHandler.MessageHandlerService">
        <endpoint address="msmq.formatname:DIRECT=OS:.\private$\msgs" binding="msmqIntegrationBinding" bindingConfiguration="MessageHandlerBinding" contract="Services.Contracts.Messages.IMessageHandlerService">
        </endpoint>
      </service>
    </services>
    <bindings>
      <msmqIntegrationBinding>
        <binding name="MessageHandlerBinding" 
                 closeTimeout="00:30:00" 
                 receiveTimeout="01:00:00" 
                 retryCycleDelay="00:00:10" 
                 receiveRetryCount="0" 
                 exactlyOnce="true" 
                 maxRetryCycles="1" 
                 receiveErrorHandling="Move">
          <security mode="None"/>
        </binding>
      </msmqIntegrationBinding>
    </bindings>
  </system.serviceModel> 
```

我真的不明白这个问题是如何含糊不清的:-) 它很简单。当 wcf 绑定到 msmq 时，有时即使第一条消息已成功处理，同一条消息也会被分派两次。

你还需要什么其他细节？请告诉！

# php - 在开始比较之前如何在同一页面上获取刷新的数据库？

> ID：13152005
> 
> 赞同：1
> 
> 时间：2012-10-31T05:54:51.877
> 
> 标签：php, javascript

我正在通过页面保存/更新数据，并且在同一次提交中，我需要将更新的数据与其他一些数据进行比较。但它仅在页面刷新一次后才比较新数据。如果不是，它将与旧数据进行比较。在开始比较之前如何在同一页面上获取刷新的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:34:47.693

提交表单后，您可以参考`field1`with `$_REQUEST['field1']`，`field2`with`$_REQUEST['field2']`等。

# jquery - $('input[value=""]').size() 不工作

> ID：13152006
> 
> 赞同：2
> 
> 时间：2012-10-31T05:54:54.420
> 
> 标签：jquery, textbox

我有这个 html

```
<input type="text" value="" id="AA"> 
```

在 Firefox 8.0.1 中，如果我在输入框中输入 CCC，检查仍然显示 Firebug

```
<input type="text" value="" id="AA"> 
```

代替

```
<input type="text" value="CCC" id="AA"> 
```

所以当我

```
alert($('input[value=""]').size()) 
```

它产生 1 应该是 0。但是当我

```
alert($('input[value=""]').val()) 
```

它产生CCC。那么如何更新属性“值”以反映实际值呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:00:35.260

`value`存储为属性而不是属性，您可以使用`filter`方法：

```
var len = $('input[type=text]').filter(function(){
      return $.trim(this.value) === ""
}).length; 
```

[http://jsfiddle.net/f5GwX/](http://jsfiddle.net/f5GwX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:07:24.403

另一种方法是：

```
var emp = $('input:text[value=""]'); // get all empty textboxes

// iterate over each of them and apply the css
$.each(emp, function(){
      $(this).css('border', '1px solid red');
}); 
```

[http://jsfiddle.net/cU7E4/1/](http://jsfiddle.net/cU7E4/1/)

**更新：**

正如 Shaheer 所指出的，只需一行代码即可完成。

```
 $('input:text[value=""]').css('border', '1px solid red'); 
```

# javascript - 使用 jQuery 发布 JavaScript 对象

> ID：13152007
> 
> 赞同：0
> 
> 时间：2012-10-31T05:55:17.280
> 
> 标签：javascript, jquery, cakephp, post

我的 JS 正在创建如下所示的对象：

![在此处输入图像描述](../Images/bc93ad934b32dd6a129da5238aca16f8.png)

现在我想将它发布到 PHP 页面。

我尝试的是这样的：

```
var json = JSON.stringify(item_contents);
console.log(json);

jQ.post(
    "http://somedomain.com/headlines/save_items/", 
    json,
    function(data){
        console.log("Data: ");
        console.log(data);
        alert("first success");
    },
    "json"
)
.success(function() { 
    alert("second success"); 
})
.error(function(data) { 
    alert("error: "); 
    console.log(data);
})  
.complete(function() { 
    alert("complete"); 
}); 
```

...并且输出始终是错误的。我正在使用 cakePHP .. 有什么帮助吗？蒂亚！！！

编辑：

目前，我的 php 页面上的内容是：

```
echo print_r($_POST); 
```

我得到一个空白或未定义的输出..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:07:16.917

在您的 post 函数中使用 json 文字对象发布您的 json 字符串

像 { content: json }, -- 并在 $_POST 中获取这个“内容”

```
jQ.post(
    "http://somedomain.com/save_items.php", 
    { content: json }, 
    function(data){ 
```

并在 PHP 中尝试

```
echo print_r($_POST["content"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T05:58:19.557

如果您真的想发布 json，请设置变量名称。

```
jQ.post(
    "http://somedomain.com/save_items.php", 
    {json: json}, //<--HERE
    function(data){
        console.log("Data: ");
        console.log(data);
        alert("first success");
    },
    "json"
)
.success(function() { 
    alert("second success"); 
})
.error(function(data) { 
    alert("error: "); 
    console.log(data);
})  
.complete(function() { 
    alert("complete"); 
}); 
```

在php中使用`echo $_POST['json'];`

您也可能只想发布对象本身：

```
jQ.post(url,object,function(data)
           {
                 console.log('success',data);
            }
           ,"json")
            .error(function(data) { 
                console.log('error',data);
             }); 
```

在 php 中使用`echo json_encode($_POST);` 确保*somedomain.com*与 js 相同。

# android - 使用图库图像和声音文件制作幻灯片电影

> ID：13152011
> 
> 赞同：-1
> 
> 时间：2012-10-31T05:55:31.500
> 
> 标签：android, android-intent

我想制作一个简单的 android 应用程序，在该应用程序中，我要为我的大学项目工作执行一项任务。我必须制作一个扩展名为 .mp4/.avi 的幻灯片电影。我有一些 jpg 图像和 mp3 声音文件。通过合并图像和声音文件，我必须制作结果电影幻灯片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:10:05.483

您所说的应用程序不是一个简单的应用程序。如果您确实需要它，可以尝试使用为Android编译的FFMPEG util将照片和音频合并到一个avi文件中，但是如果您不精通编程，那将是一项艰巨的任务为你。

# php - 带有 EAV 返回值的 Symfony2.1

> ID：13152015
> 
> 赞同：1
> 
> 时间：2012-10-31T05:56:02.233
> 
> 标签：php, symfony, symfony-forms

我有三个实体：

1.特点

2.价值

3.产品

我在没有提及它的功能的情况下获得了产品价值。我正在尝试根据功能获取价值但我无法做到。我不知道如何做到？

# 特征：

```
/**
 * @ORM\Table(name="feature")
 * @ORM\Entity
 */
class Feature
{

/**
 * @ORM\Id
 * @ORM\Column(name="id", type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @ORM\Column(name="name", type="string", length=50)
 */
protected $name;

/**
 * @ORM\OneToMany(targetEntity="Feature", mappedBy="Feature")
 **/
protected $value;

 /**
 * Constructor
 */
public function __construct()
{
    $this->value = new \Doctrine\Common\Collections\ArrayCollection();
}

public function __toString()
{
    return $this->getName();
}
} 
```

# 价值：

```
/**
 * @ORM\Table(name="value")
 * @ORM\Entity
 */
class Value
{
/**
 * @ORM\Id
 * @ORM\Column(name="id", type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @ORM\Column(name="name", type="string", length=50)
 */
protected $value;

/**
 * @ORM\ManyToOne(targetEntity="Feature", inversedBy="value")
 **/
protected $feature;

 /**
 * @ORM\ManyToMany(targetEntity="Product", mappedBy="value")
 **/
private $product;

public function __construct()
{
    $this->feature = new \Doctrine\Common\Collections\ArrayCollection();
}

 public function __toString()
{
    return $this->getValue();
}
} 
```

# 产品：

```
/**
 * @ORM\Entity
 * @ORM\Table()
 * @ORM\HasLifecycleCallbacks
 */
class Product 
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @Gedmo\Translatable
 * @ORM\Column(length=64)
 */
private $title;

/**
 * @Gedmo\Slug(fields={"title"})
 * @ORM\Column(length=64, unique=true)
 */
private $slug;

/**
 * @ORM\Column(type="integer")
 */
protected $quantity;

/**
 * @ORM\Column(type="boolean")
 */
protected $active;

/**
 * @ORM\Column(type="datetime")
 */
protected $updated;

/**
 * @ORM\Column(type="datetime")
 */
protected $created;

/**
 * @ORM\ManyToMany(targetEntity="Value", inversedBy="product")
 * @ORM\JoinTable(name="product_value")
 **/
protected $value;

public function __construct()
{
    $this->active = true;
    $this->updated = new \DateTime();
    $this->created = new \DateTime();
    $this->value = new ArrayCollection();

}

public function __toString()
{
    return $this->getTitle();
}
} 
```

由于英语较弱，我不再解释。

示例我想要什么：

“我想根据产品选择产品的特征，例如尺寸和颜色，例如红色、绿色和小、中等值。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:22:57.693

总之，您需要构建自己的查询：

为 Product 创建一个存储库，并具有以下内容：

```
$qb = $this->getEntitymanager()->createQueryBuilder();
$qb
    ->select('p, f, v')
    ->from('YourBundleName:Product', 'p')
    ->leftJoin('p.value', 'v')
    ->innerJoin('v.feature', 'f');

return $qb->getQuery()->getResult(); 
```

然后对于每个产品，执行以下操作：

```
foreach ($products as $product) {
    echo "Title: " . $product->getTitle() . "<br />";
    echo "Features: <br />";
    foreach ($product->getValue() as $value) {
        echo $value->getFeature()->getName() . ": " . $value->getValue() . "<br />"
    }
} 
```

# c - 在 C 中打印未知字符，而不是破折号和空格

> ID：13152021
> 
> 赞同：2
> 
> 时间：2012-10-31T05:56:14.687
> 
> 标签：c, pointers, char

以下是我的代码的相关位：

```
//helper function that prints "------" lines or "      " lines
void li(char*  a, int len)
{
   int i;
      for (i=0; i<len; i++)
        {
          printf("%c",a);
        }
}

//helper function that prints out bar 
void bar(int length, int height)
{
     int i;
//prints out top line
     li("-", length);

//prints middle lines of spaces and "|"
     for (i=0;i<height-2;i++) {
     printf("\n");
     li(" ", 6);
     printf("|");
     li(" ", length-2);
     printf("|");
}
//prints bottom line
     if (height>=2){
     printf("\n");
     li(" ", 6);
     li("-", length);}
  return ;
} 
```

预期输出：

```
The: ------------
     |          |
     ------------ 
```

实际输出

```
The: ��������������
     ������|�������������|
     ��������������������� 
```

^^那些应该是未知字符。

无论如何，我试图解决这个问题，但到目前为止一直没有成功。是什么导致了这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:09:09.537

问题在于您理解字符和字符串的方式。要解决此问题，您可以更改 li() 的签名。定义应该看起来像

```
void li(char  a, int len)
{
   int i;
      for (i=0; i<len; i++)
        {
          printf("%c",a);
        }
} 
```

并且在调用函数 li() 时使用**单引号**而不是双引号。 `li("-", length);`应该是`li('-', length);`等等。我进行了更改并运行了您的代码。尽管它没有按您的预期打印字符，但至少没有打印不可打印的字符。这是代码和输出。

```
//helper function that prints "------" lines or "      " lines
void li(char  a, int len)
{
   int i;
      for (i=0; i<len; i++)
        {
          printf("%c",a);
        }
}

//helper function that prints out bar 
void bar(int length, int height)
{
     int i;
//prints out top line
     li('-', length);

//prints middle lines of spaces and "|"
     for (i=0;i<height-2;i++) {
     printf("\n");
     li(' ', 6);
     printf("|");
     li(' ', length-2);
     printf("|");
}
//prints bottom line
     if (height>=2){
     printf("\n");
     li(' ', 6);
     li('-', length);}
  return ;
}
main()
{
bar(5,5);
li('G',5);

} 
```

输出 ：

```
-----
      |   |
      |   |
      |   |
      -----GGGGG 
```

您可以更改您的代码，使其以您想要的方式打印。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T05:59:00.550

您想打印字符本身。将字符传递给它，而不是`char*`.

```
 printf("%c", *a); 
```

# c# - 不同用户的不同会话超时

> ID：13152026
> 
> 赞同：6
> 
> 时间：2012-10-31T05:56:43.620
> 
> 标签：c#, asp.net, session-timeout

是否可以为不同的用户设置不同的会话超时？我需要有 180 分钟的管理员会话和 20 分钟的非管理员用户会话。目前，所有用户都是单会话超时。我们正在使用 web.config 键

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T06:33:14.277

通过代码设置`Session.Timeout`属性将基于每个用户设置超时。

您可以在登录时手动设置`Session.Timeout = 20;`或`Session.Timeout = 180;`根据用户类型进行设置。

此代码应该适合您：

```
protected void SetSessionTime(string userType)
{
    if (UserType == "admin")
    {
        Session.Timeout = 180;
    }
    else
    {
        Session.Timeout = 20;
    }
} 
```

用户登录成功后即可调用`SetSessionTime()`。

# asp.net-mvc - MVCS中AI相关模块的放置位置

> ID：13152028
> 
> 赞同：0
> 
> 时间：2012-10-31T05:56:53.810
> 
> 标签：asp.net-mvc, artificial-intelligence, service-layer

我有点困惑，在 MVCS 模式中放置与 AI 相关的模块的正确位置是什么？除了模型视图控制器和服务文件夹吗？

五。

# iphone - 想在服务器上上传视频

> ID：13152029
> 
> 赞同：1
> 
> 时间：2012-10-31T05:56:53.947
> 
> 标签：iphone, ios

我想在实时服务器上上传视频，所以请建议我怎么做，代码和教程会更好，而且我是否必须在服务器上制作任何表格来存储数据？

我对存储数据一无所知。

此代码用于上传数据：

```
- (void) imagePickerController: (UIImagePickerController *) picker
 didFinishPickingMediaWithInfo: (NSDictionary *) info {

        //assign the mediatype to a string 
    NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];

    //check the media type string so we can determine if its a video
    if ([mediaType isEqualToString:@"public.movie"]){
        NSLog(@"got a movie");
        NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];
        webData = [NSData dataWithContentsOfURL:videoURL];
        NSLog(@"webdata is: %@ ",webData);
    }

    [self dismissModalViewControllerAnimated:NO];

    // Handle a movie capture
    if (CFStringCompare ((__bridge_retained CFStringRef) mediaType, kUTTypeMovie, 0)
        == kCFCompareEqualTo) {

        NSString *moviePath = [[info objectForKey:
                                UIImagePickerControllerMediaURL] path];
        if (UIVideoAtPathIsCompatibleWithSavedPhotosAlbum (moviePath)) {
            UISaveVideoAtPathToSavedPhotosAlbum (moviePath,self, @selector(video:didFinishSavingWithError:contextInfo:), nil);
        } 
    }
}

- (void)video:(NSString*)videoPath didFinishSavingWithError:(NSError*)error contextInfo:(void*)contextInfo
{

    if (error) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Video Saving Failed"  delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles: nil, nil];
        [alert show];
    }else{
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Video Saved" message:@"Saved To Photo Album"  delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];
        [alert show];
    }
}

- (IBAction)uploadVideo:(UIButton*)sender {
    [self post:webData];
    NSLog(@"posted data %@",webData);
}

- (void)post:(NSData *)fileData
{

    NSLog(@"POSTING");

    // Generate the postdata:
    NSData *postData = [self generatePostDataForData: fileData];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    // Setup the request:
    NSMutableURLRequest *uploadRequest = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:SERVER_PATH] cachePolicy: NSURLRequestReloadIgnoringLocalCacheData timeoutInterval: 30 ];
    [uploadRequest setHTTPMethod:@"POST"];
    [uploadRequest setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [uploadRequest setValue:@"multipart/form-data; boundary=AaB03x" forHTTPHeaderField:@"Content-Type"];
    [uploadRequest setHTTPBody:postData];

    // Execute the reqest:
    NSURLConnection *conn=[[NSURLConnection alloc] initWithRequest:uploadRequest delegate:self];
    if (conn)
    {
        // Connection succeeded (even if a 404 or other non-200 range was returned).
        NSLog(@"sucess");
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Got Server Response" message:@"Success" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
    }
    else
    {
        // Connection failed (cannot reach server).
        NSLog(@"fail");
    }

}

- (NSData *)generatePostDataForData:(NSData *)uploadData
{
    // Generate the post header:
    NSString *post = [NSString stringWithCString:"--AaB03x\r\nContent-Disposition: form-data; name=\"file\"; filename=\"ios-video.mov\"\r\nContent-Type: video/mov\r\nContent-Transfer-Encoding: binary\r\n\r\n" encoding:NSASCIIStringEncoding];

    // Get the post header int ASCII format:
    NSData *postHeaderData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

    // Generate the mutable data variable:
    NSMutableData *postData = [[NSMutableData alloc] initWithLength:[postHeaderData length] ];
    [postData setData:postHeaderData];

    // Add the file:
    [postData appendData: uploadData];

    // Add the closing boundry:
    [postData appendData: [@"\r\n--AaB03x--" dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES]];

    // Return the post data:
    return postData;
} 
```

我已经像这样定义了我的服务器路径可以吗？

```
#define SERVER_PATH @"http://manektech.net/diliptest/" 
```

当我记录它时，我的 webdata 输出是这样的：

```
webdata is: <00000014 66747970 71742020 00000000 71742020 00000008 77696465 0003837f 6d646174 00cc4007 00ec99ee d49b2f4d b44830a9 915555df adeb095c  ...............> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:15:15.883

`NSData`当您从相机拍摄视频并在那时停止`imagePickerController`委托方法调用后，此处在 .h 文件中创建具有 videoData 名称的对象，在这里获取此 URL 或视频，`NSData`如下所示...

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
    { 
        NSLog(@"%@",info);
        [self  dismissModalViewControllerAnimated:YES];

        NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@",[info objectForKey:UIImagePickerControllerMediaURL]]];

        videoData = [[NSData alloc] initWithContentsOfURL:url];
    } 
```

之后，您可以像下面的方法一样发送数据..只需按照我在代码中使用的流程...

```
-(void)AddVideo{
    NSString *strUSerID = [NSString stringWithFormat:@"%d",userID ];// if required

    NSString *filename = @"massage.mp4";
    NSString *boundary = @"----BOUNDARY_IS_I";
    NSURL *url;
    //&user_id=1&cat_id=1&dap_title=test113434&origin=hi&todap=test343&nottodap=testtt
    NSString *str = SERVER_PATH; // here put your server URL with insert api
    url = [NSURL URLWithString:str];
    [str release];

    NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];

    [req setHTTPMethod:@"POST"];

    NSString *contentType = [[NSString alloc]initWithFormat:@"multipart/form-data;boundary=%@", boundary];

    [req setValue:contentType forHTTPHeaderField:@"Content-type"];

    [contentType release];

    NSMutableData *postBody = [NSMutableData data];

    [postBody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"video\"; filename=\"%@\"\r\n", filename] dataUsingEncoding:NSUTF8StringEncoding]];
    [postBody appendData:[@"Content-Type: video/mp4\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [postBody appendData:videoData];// use here webData which you use for store vedio data
    [req setHTTPBody:postBody];

    NSURLResponse* response;
    NSError* error;
    NSData* result = [NSURLConnection sendSynchronousRequest:req returningResponse:&response error:&error];
    NSString * rsltStr = [[NSString alloc] initWithData:result encoding:NSUTF8StringEncoding];
    NSMutableDictionary *dict;
    if(rsltStr == nil){

    }
    else{
        SBJSON *json = [[SBJSON alloc] init];
        NSError *error = nil;
        dict = [json objectWithString:rsltStr error:&error];
        NSLog(@"%@",dict);
        [json release];
    }
    [rsltStr release];  

    [videoData release];
} 
```

我希望这个答案对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:01:27.633

如果您想通过 TCP 套接字/流来实现，那么请使用**NSStream** API。- 使用此方法创建一个 NSOutputStream，然后写入缓冲区。

如果你想通过 HTTP 来做，那就去**NSURLConnection**。在 HTTPBodyStream 中将数据作为 POST 发送。

# tfs - 如何设置 TFS 来满足多个客户的多个项目

> ID：13152030
> 
> 赞同：0
> 
> 时间：2012-10-31T05:56:53.793
> 
> 标签：tfs, branching-and-merging, tfs-2012

我们正计划迁移到 TFS 2012，需要有经验的人提供一些意见。

我们在工作中拥有大约 30-40 个不同的 Web 应用程序。

假设我们有一个应用程序

```
A 
```

和客户

```
C1
C2
C3 
```

每个客户都有自己的数据库。

Web 应用程序“A v1”部署到 C1、C2 Web 应用程序“A v2”部署到 C3

v1 & v2 是为客户定制的版本。

Next Day C2 需要更多的定制，我们将为他们创建 v3。

因此，现在我们将产品的 3 个版本部署到三个不同的客户端。

我目前的计划是将它们放在一个项目集合中

文件夹结构为

```
Main

    A
       V1
       V2
       V3
    B 
       V1
    C  
       V1 
```

有没有其他方法可以解决这个问题？

此外，每个应用程序都会有工作项和它们自己的构建。

# c# - 如何禁用gridview中的一行？

> ID：13152034
> 
> 赞同：0
> 
> 时间：2012-10-31T05:57:10.790
> 
> 标签：c#, asp.net

必须禁用选中 chechbox 的行。我已使用以下代码在 RowDataBound 事件中尝试过它，但它显示错误`Object reference not set to an instance of an object`。

```
 CheckBox cbAttachClrReq = (CheckBox)gvEntity.FindControl("chkAdd");

  if (cbAttachClrReq.Checked)
  {
      this.gvEntity.Rows[e.Row.RowIndex].Enabled = false;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:17:40.563

您的`CheckBox`对象可能是`null`. 所以我还在`null`代码中添加了一个检查。

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
    CheckBox cbAttachClrReq = e.Row.FindControl("chkAdd") as CheckBox;

    if (cbAttachClrReq != null && cbAttachClrReq.Checked)
        e.Row.Enabled = false;
} 
```

**根据**评论的宝贵建议添加，如果对象是，您甚至可以切换`CheckBox`状态`null`：

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
    CheckBox cbAttachClrReq = e.Row.FindControl("chkAdd") as CheckBox;
    e.Row.Enabled = cbAttachClrReq == null || !cbAttachClrReq.Checked;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:19:29.643

尝试以下操作...我假设复选框位于 gridview 行中...。

```
protected void gvEntity_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
       CheckBox cbAttachClrReq = (CheckBox) e.Row.FindControl("chkAdd");

      if (cbAttachClrReq.Checked)
      {
          e.Row.Enabled = false;
      }       
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T06:35:59.080

尝试以下操作...我假设复选框位于 gridview 行的单元格中...。

```
protected void gvEntity_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
       CheckBox cbAttachClrReq = (CheckBox) e.Row.Cells[yourCellIndexOFChBox].FindControl("chkAdd");

      if (cbAttachClrReq.Checked)
      {
          e.Row.Enabled = false;
      }       
    }

} 
```

# ruby-on-rails - 在 Rails 中加载新格式的文件时避免在 Internet Explorer 中弹出下载

> ID：13152035
> 
> 赞同：1
> 
> 时间：2012-10-31T05:57:17.533
> 
> 标签：ruby-on-rails, internet-explorer

在我的 Rails 应用程序中，我定义了一种名为“扩展”的新格式。我的扩展格式负责为我开发的外部 Web 浏览器扩展呈现视图。所以我可以打电话

/messages/new.extension

并呈现特定于我的网络浏览器扩展的代码。

在 IE 发挥作用之前，这种策略非常有效。在 9 之前的任何 IE 版本上，浏览器都不知道如何处理 .extension 文件，因此 IE 默认为下载弹出窗口，如下所示：

![在此处输入图像描述](../Images/3d5386078df55fb5aa56eb5b1d9cf5ee.png)

关于如何避免此下载弹出窗口的任何想法？有没有我可以使用的另一种格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-02T16:01:40.817

您可以使用以下方法解决此问题：

> 渲染：file =>“#{path_to...}/messages/new.extension”：content_type =>“text/html”，状态：：ok

或者

> 渲染 :text => @my_var :content_type => "text/html", status: :ok

# c - 如果我们增加函数指针会发生什么

> ID：13152037
> 
> 赞同：9
> 
> 时间：2012-10-31T05:57:23.440
> 
> 标签：c, function-pointers

递增整数指针将按整数大小增加地址。如果我们增加一个函数指针会发生什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T06:10:27.293

就像`void *`指针和指向不完整类型的指针一样，在指向函数的指针上不允许进行算术运算。

例如，关于加法运算符的 C99 §6.5.6 说：

> 另外，两个操作数都应具有算术类型，或者一个操作数应是指向对象类型的指针，而另一个应具有整数类型。（递增相当于加 1。）

函数类型不是对象类型，因此提供指向函数的指针作为运算符的操作数`+`违反了此约束。

* * *

作为 C 语言的扩展，GCC 编译器允许对指向函数的指针（和指向 的指针`void`）进行算术运算。它实现这一点，就好像指向对象的大小为 1。请注意，在符合标准的模式下，它会针对此类代码发出警告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T06:20:52.807

在 void 和函数指针上不允许指针算术。
然而，许多编译器通过编译器扩展支持指针算术运算。这是通过将 void 或函数的大小视为 1 来完成的。

如果您使用 gcc，则使用以下标志强制编译器提供诊断：

```
-Wpointer-arith 
```

# php - 将 url 中的任何图像类型保存为 jpg

> ID：13152038
> 
> 赞同：0
> 
> 时间：2012-10-31T05:57:30.940
> 
> 标签：php, image, save-as

是否可以将带有任何类型图像（可以是 jpg、png、gif 等）的 url 作为 jpg 保存到 php 中的文件夹中而无需多个步骤（检查扩展名、保存为相同类型并转换为 jpg）？

示例网址

1.  [http://jdownloader.org/_media/knowledge/wiki/jdownloader.png?cache=&w=512&h=512](http://jdownloader.org/_media/knowledge/wiki/jdownloader.png?cache=&w=512&h=512) (.PNG)
2.  [http://images.websnapr.com/?size=size&key=Y64Q44QLt12u&url=http://google.com](http://images.websnapr.com/?size=size&key=Y64Q44QLt12u&url=http://google.com) (.jpg)

许多 url 并不总是包含 imagename.ext 类型的结构。

对于这样的代码（从这里[PHP 保存图像文件](https://stackoverflow.com/questions/3693058/php-save-image-file)）

```
$input = 'http://images.websnapr.com/?size=size&key=Y64Q44QLt12u&url=http://google.com';
$output = 'google.com.jpg';
file_put_contents($output, file_get_contents($url)); 
```

是否可以在不检查扩展名的情况下保存任何图像文件类型？我试过

```
$input = 'URL_string';
$output = 'path/to/folder/name'; // no extensions
file_put_contents($output, file_get_contents($url)); 
imagejpeg($output,"temp.jpg"); 
```

干活。我阅读了[Create Image From Url Any File Type](https://stackoverflow.com/questions/10233577/create-image-from-url-any-file-type)、[Saving image from PHP URL](https://stackoverflow.com/questions/724391/saving-image-from-php-url-using-php)等，但不知道如何获得简单的解决方案。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:34:26.217

作为您的问题的解决方案，请参考下面提到的代码片段

```
<?php
  $im=imagecreatefromjpeg('http://images.websnapr.com/?size=size&key=Y64Q44QLt12u&url=http://google.com');
    header('Content-type:image/jpeg');
    imagejpeg($im);
 ?> 
```

imagecreatefromjpeg 函数用于从文件或 URL 创建图像

php.ini 文件中的 allow_url_fopen 设置也必须设置为 On 才能从 URL 创建图像

有关更多详细信息，请参阅以下 url 中提到的文档

[http://php.net/manual/en/filesystem.configuration.php](http://php.net/manual/en/filesystem.configuration.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:30:46.387

作为您的问题的解决方案，请参考下面提到的代码片段

```
 $h=get_headers('http://images.websnapr.com/?size=size&key=Y64Q44QLt12u&url=http://google.com',1);
       $img_content=file_get_contents('http://images.websnapr.com/?size=size&key=Y64Q44QLt12u&url=http://google.com');
       $extension='jpg';
      if(!empty($img_content))
      {
    switch($h['Content-type'])
    {
    case 'image/jpeg':
        $extension='jpg';
        break;
    case 'image/gif':
        $extension='gif';
        break;
    case 'image/png':
        $extension='png';
        break;      
    }

file_put_contents('abc.'.$extension,$img_content);

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T07:36:53.397

我想这是不可能的（考虑到所有现有的图像文件类型），但对于最基本的图像文件类型，应该有用于转换的库。

同样对于您尝试过的事情-仅将文件扩展名重命名为`.jpg`实际上并不能使其成为jpg（例如，IrfanView 在打开此类文件时会警告您并询问您是否要将扩展名更改回正确的扩展名）

# objective-c - GHUnit，OCMock：如何测试两个指定块之一是否被调用？

> ID：13152039
> 
> 赞同：0
> 
> 时间：2012-10-31T05:57:42.823
> 
> 标签：objective-c, ios, unit-testing, ocmock

我有一个采用响应块和错误块的方法，我通过为其提供有效数据和无效数据来编写单元测试，因此它将分别调用响应块和错误块，但是使用 GHUnit 和 OCMock，我如何测试是否正确块叫什么？

我刚在想：

对于有效数据：响应 { GHAssertTrue(YES, @""); } error { GHAssertTrue(NO, @"有效数据不应调用错误块"); }

无效数据反之亦然。

我做的对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:40:07.047

这就是我要做的：

*   向测试类添加一个属性以指示调用了哪个块
*   让每个块将该属性设置为不同的值
*   调用
*   检查财产的价值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:57:23.760

将断言放入块中的问题在于，您不知道是否没有调用任何块。这就是我们所做的：

```
__block BOOL done = NO;
[classUnderTest doSomethingWithResultBlock:^(BOOL success) {
    done = YES;
} errorBlock:^(BOOL success) {
    // should not be called
    expect(NO).to.beTruthy();
}];
while (!done) [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:0.01]]; 
```

缺点是如果从不调用成功块，测试将挂在 while 循环中。您可以通过添加超时来避免这种情况：

```
NSDate *startTime = [NSDate date];
__block BOOL done = NO;
[classUnderTest doSomethingWithResultBlock:^(BOOL success) {
    done = YES;
} errorBlock:^(BOOL success) {
    // should not be called
    expect(NO).to.beTruthy();
}];
while (!done && [startTime timeIntervalSinceNow] > -30) [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:0.01]];
// make sure it didn't time out
expect(done).to.beTruthy(); 
```

# android - 如何修改错误消息？

> ID：13152041
> 
> 赞同：0
> 
> 时间：2012-10-31T05:57:48.620
> 
> 标签：android, message, alert, playback

我开发了直播应用程序，但有时直播不可用，并显示“无法播放此视频”警报消息。现在我想将此消息修改为另一个表明直播存在问题的消息。我该如何修改它？

# php - 通过 api 在 gmail 中检索签名设置

> ID：13152047
> 
> 赞同：0
> 
> 时间：2012-10-31T05:58:23.110
> 
> 标签：php, api, gmail, signature

是否可以使用谷歌 API 更改 gmail 签名设置，我已经搜索但无法获得明确的解决方案。如果可能，请建议我如何用 php 实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T02:45:13.003

您可以使用电子邮件设置 API 为 Google Apps 域用户设置和检索邮件签名：

[https://developers.google.com/google-apps/email-settings/#manage_signature_settings](https://developers.google.com/google-apps/email-settings/#manage_signature_settings)

# vba - 在文档中应用样式时可以插入域吗？

> ID：13152055
> 
> 赞同：0
> 
> 时间：2012-10-31T05:59:19.737
> 
> 标签：vba, ms-word

当我将“标题 1”样式应用于某些文本时，我想插入像 {SEQ seq \h} 这样的域代码。我认为它与vba有关，可以分为两部分。1.找到更改段落样式后会触发的事件。2.在段落开头插入域代码。

问题2可以通过

```
 .Fields.Add Range:=Selection.Range, Type:=wdFieldEmpty, Text:="SEQ SEQ_ID\* Arabic \* MERGEFORMAT", PreserveFormatting:=True 
```

问题1很难找到。以前有人做过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:50:17.683

您可能能够捕获`WindowSelectionChange`事件。但是，您必须为它编写自己的处理程序。请参阅此网站以帮助您入门： [编写应用程序事件过程](http://word.mvps.org/FAQs/MacrosVBA/AppClassEvents.htm "编写应用程序事件过程 - Dave Rado")

# javascript - JavaScript 如何判断数组索引是否为整数？

> ID：13152056
> 
> 赞同：4
> 
> 时间：2012-10-31T05:59:22.877
> 
> 标签：javascript

看起来 JavaScript 的数组索引实际上都是字符串，所以和while is not but`a[0]`是一样的。但同时，数组有一个长度属性；当您修改整数键的值时，它将自动更新。那么 JavaScript 如何知道键是整数并且需要更改长度呢？如果我做：`a['0']``a[1.0]``a[1]``a['1.0']`

```
var a = 4/2;
var b=8/4; 
var c = 2; 
var d= 1*2; 
```

是`arr[2], arr[0+2], arr[1*2], arr[a], arr[b], arr[c], arr[d]`一样的吗？

我们经常在这样的循环中访问数组：

```
for (i=0; i<100; i++) {
  arr[i]=1;  // this is a[0],a[1] right?
  arr[i+0.0]=1;  // is this a[0] or a['0.0'] ?
} 
```

如果我写这个：

```
for (i=0.1; i<100; i+=0.1) {
  arr[i*10]=1;  // what does it do?  a[1] = 1, a[1.0]=1 or a[1.00000] = 1 ?
} 
```

循环中的赋值是做什么的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T06:25:08.643

对于初学者来说，在 JavaScript (ES5) 中，没有“整数”之类的东西。JavaScript (ES5) 只有数字。

其次，在 JavaScript 中有很多隐式类型转换。这是一个例子：

```
if(1=='1') console.log('very truthy'); 
```

如果您使用双等号，它会将“1”转换为数字，然后将新值 (1) 与 1 进行比较（这将是真的，1 == 1），然后将记录字符串'非常真实'。

如果您使用三等号，则不会发生隐式类型转换。

```
if(1==='1') console.log("this won't get logged"); 
```

使用三等号可以防止发生类型转换。

接下来，当您将值添加到数组的整数索引时，该索引将使用您告诉它的值进行更新，并且长度将被更新。

```
var a = [];
a[0] = 0
a[1] = 1; 
a[2.0] = 2;
//[undefined, 1, 2] 
```

当您尝试更新不是整数 (1.1) 的索引时，它会将所有内容转换为字符串（1.1 变为 '1.1'），然后将新的自定义属性添加到数组并设置值 on它。数组的自定义属性不会影响它的长度。

```
var a = [];
a[1.1] = 1.1;
a.prop = "property";
//[], empty array
console.log(a.prop, a['1.1']); //"property",1.1 
```

当您将自定义属性添加到 JS 数组时，它会改变对象，然后像对象字面量一样工作。

因此，在您的情况下，您最终会得到一个 array-ish/object-literal-ish mashup 对象。注意：如果您将自定义属性添加到 JS 数字或字符串，它们不会转换为对象文字。您正在探索的这种行为是 JS 数组所独有的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T06:08:53.280

JavaScript 数组并不是真正的数组，它们是 JavaScript 对象，具有使它们像数组一样工作的原型方法。 `arr['one'] = 1`是有效的 JavaScript。

arr.length 的工作方式是简单地查看数组的键，找到最大的数字（JavaScript 并不真正做整数，只是浮点数）并返回该数字 + 1。

尝试：

```
var arr = [];

arr.one = 1;
arr[8] = 1;
console.log(arr.length); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T06:16:02.077

从使用 Chrome 的开发工具开始，我认为您的断言*不太*正确。我找到：

```
arr[0] == arr[0.0] == ar[0.0000] == arr["0"] 
```

但

```
arr[0] != arr["0.0"]
arr[0.0] != arr["0.0"] 
```

因此，数组在内部所做的似乎是调用`.toString()`您给它的索引，并将其用作实际索引。注意：

```
(0).toString() == "0"
(0.0000).toString() == "0" 
```

# c - 除了打印换行符，'\n' 还能做什么？

> ID：13152062
> 
> 赞同：1
> 
> 时间：2012-10-31T05:59:54.500
> 
> 标签：c, fork, printf

在评论第 2 行后，“Hello”被打印了 9 次，但评论第 1 行输出“Hello”超过 9 次。我的问题是 '\n' 在其中的作用是什么？

```
#include<stdio.h>
#include<stdlib.h>

int main()
{
    int tmp[10], i, n=0;

    for(i=0;i<9;i++)
    {
        tmp[i]=fork();
        if(tmp[i]>0)
            break;
        else
        {
            printf("Hello\n");  //      ---- Line 1
            printf("Hello ");   //      ---- Line 2
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:14:47.133

\n 还刷新标准输出缓冲区。如果它不存在，则可能是您之前在其中输入了数据。刷新也意味着它会在处理 \n 后强制 printf 在屏幕上打印。否则它是缓冲输出，您永远无法预测操作系统会缓冲您的输出多长时间以及它何时选择实际打印。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T06:19:29.987

您可能是缓冲区刷新未发生的受害者。字符串末尾的 '\n' 使输出缓冲区刷新。如果输出缓冲区没有被刷新，那么您可能还会从先前的 printf 调用中获得一些输出。因此，最好在打印字符串的末尾使用 '\n' 以确保我们刷新缓冲区。你可以看看这个[问题](https://stackoverflow.com/questions/1716296/why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-strin)。

# shell - 使用 grep、awk、sed 仅从文件中搜索特定单词

> ID：13152064
> 
> 赞同：1
> 
> 时间：2012-10-31T05:59:59.790
> 
> 标签：shell, sed, awk, grep

文本文件：

```
auto lo eth0 eth0.2 eth0.3
iface lo inet loopback
iface eth0 inet dhcp
iface eth0.2 inet static
      address 192.168.67.1
      network 192.168.67.0
      netmask 255.255.255.0
      broadcast 192.168.67.255
iface eth0.3 inet static
      address 192.168.68.1
      network 192.168.68.0
      netmask 255.255.255.0
      broadcast 192.168.68.255 
```

Extarct only eth0 word only not eth0.2 or eth0.3 Desired:eth0 word, its line number

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:13:49.387

如果您的`grep`版本支持该`-P`标志：

```
grep -noP "(?<=^| )eth0(?=$| )" file.txt 
```

结果：

```
1:eth0
3:eth0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:15:21.657

```
$> ... | grep -P "eth0[^\.]" 
auto lo eth0 eth0.2 eth0.3
iface eth0 inet dhcp 
```

顺便说一句，“仅提取 eth0 单词”是什么意思？有 -`o`标志，例如：

```
$> ... | grep -o -P "eth0[^\.]"
eth0 
eth0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T14:17:02.150

```
$ awk -v iface="eth0" '$0 ~ "(^| )"iface"( |$)" { print NR, iface }' file
1 eth0
3 eth0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T06:10:00.330

如果我正确理解您的要求：

```
awk 'NR>1 && / eth0 /{print "eth0", NR}' file 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T06:44:13.387

我猜 op 想要匹配非别名、非回溯界面，例如：

```
awk '$1 == "iface" && $2 ~ /eth[0-9]+$/ { print $2}' 
```

甚至：

```
awk -vFS='[ .]' '$1 == "iface" && $2 ~ /^eth/ { print $2; exit}' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-31T08:49:37.980

> Extarct only eth0 word only not eth0.2 or eth0.3 Desired:eth0 word, its line number

用 grep 来做：

```
grep -on 'iface eth0 ' file 
```

输出：

```
3:iface eth0 
```

追加`| sed 's/iface //'`删除`iface`。

# javascript - 页面刷新或返回时将数据保存在表单中

> ID：13152065
> 
> 赞同：0
> 
> 时间：2012-10-31T06:00:02.593
> 
> 标签：javascript, jquery, ajax, jsp, autosave

我有一个 jsp 表单，它有文本框、单选按钮、选择和文本区域。即使刷新页面或从下一个页面返回此页面，如何在表单中保留/保存数据。我需要一个自动保存功能（不需要保存到数据库中只保存数据）。有人可以建议一些信息/链接吗？我可以用 jQuery 或 javascript 来做吗？我不知道如何实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T06:14:03.390

`Can I do it with jQuery or javascript?`

绝对地。您可以使用 cookie 来存储数据，也可以在页面刷新时使用 cookie 来填写详细信息。但我建议使用插件，只是为了让生活更轻松。

一些执行此操作的 jquery 插件 - [jQuery Save As You Type](https://github.com/BenGriffiths/jquery-save-as-you-type)，[jQuerydumbFormState](https://github.com/sebringj/jquery.dumbformstate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:13:55.930

可以使用 Html5 本地存储： http: [//paperkilledrock.com/2010/05/html5-localstorage-part-one/](http://paperkilledrock.com/2010/05/html5-localstorage-part-one/) [http://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp)

# r - 用图像注释 ggplot2 方面

> ID：13152067
> 
> 赞同：2
> 
> 时间：2012-10-31T06:00:26.810
> 
> 标签：r, ggplot2

假设我正在为 4 个人绘制数据：Alice、Bob、Chuck 和 Dana。我正在使用 ggplot2 制作一个多面图，每人一个面。我在磁盘上还有 4 个图像：Alice.png、Bob.png、Chuck.png 和 Dana.png。（显然这是一个综合示例，需要扩展到超过 4 个方面 :)

有没有办法可以用相应的图像来注释每个方面，理想情况下，而不是分面标签（尽管我会对标签正下方的图像感到满意）？也许类似于这里使用的技术：[Use image instead of labels in ggplot2 legend](https://stackoverflow.com/questions/13148404) ? 我已经尝试阅读各种注释方法的文档，但我的 R-fu 不足以应对挑战！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T06:31:43.857

不是很优雅，但您可以在条形标签上添加 grobs，

```
library(ggplot2)

d <- expand.grid(x=1:2,y=1:2, f=letters[1:2])
p <- qplot(x,y,data=d) + facet_wrap(~f)

g <- ggplot_gtable(ggplot_build(p))

library(gtable)
library(RCurl)
library(png)
shark <- readPNG(getURLContent("http://i.imgur.com/EOc2V.png"))
tiger <- readPNG(getURLContent("http://i.imgur.com/zjIh5.png"))

strips <- grep("strip", g$layout$name)
new_grobs <- list(rasterGrob(shark, width=1, height=1),
                  rasterGrob(tiger, width=1, height=1))
g <- with(g$layout[strips,],
          gtable_add_grob(g, new_grobs,
                          t=t, l=l, b=b, r=r, name="strip_predator") )        
grid.draw(g) 
```

**编辑**：您也可以直接替换 grobs，

```
strips <- grep("strip", names(g$grobs))
new_grobs <- list(rectGrob(gp=gpar(fill="red", alpha=0.2)),
                  rectGrob(gp=gpar(fill="blue", alpha=0.2)))
g$grobs[strips] <- new_grobs
grid.draw(g) 
```

# yacc - yacc 在错误的位置显示语法错误

> ID：13152068
> 
> 赞同：1
> 
> 时间：2012-10-31T06:00:32.550
> 
> 标签：yacc, lex

这只是一个例子

YACC 语法：

```
abc:ABC STRING NEWLINE

end:END

.

. 
```

.lex 文件：

```
int lineno=1;

.

.

string [a-zA-Z]+

%%

ABC   {return ABC;}

END   {return END;}

[\n]  {lineno++;return NEWLINE;}

{string} {return STRING;}

%% 
```

如果输入文件是，则每次出现 NEWLINE lineno 时都会增加：

```
ABC xyz

END 
```

yacc 解析成功

如果输入文件是：

```
ABC 123

END 
```

它显示第 1 行：语法错误

正如预期的那样

但如果输入文件是：

```
ABC

END 
```

然后它显示**line2** :syntax error

但是错误出现在第 1 行而不是第 2 行。

怎么做才能显示正确的行号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T07:16:54.113

因为解析器直到从词法分析器接收到令牌才发现错误`NEWLINE`，到那时你已经增加了行号。

这实际上不是一个罕见的问题，在错误的行上显示错误。一个很好的例子是您忘记`;`在 C 源文件中的语句末尾添加分号 ( )。错误很可能在下一行。

**编辑：** Yacc 中的错误恢复处理。

Yacc 有一个特殊的终端符号`error`，可用于错误恢复。在您的情况下，它可以这样使用：

```
abc:ABC STRING NEWLINE
   |error NEWLINE
   ; 
```

`error`您可以在和符号之间添加一段代码来打印错误消息，但它可能无论如何都不起作用，因为解析器在看到该符号`NEWLINE`之前并不知道有错误。`NEWLINE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:53:56.090

你可以保守地用你的语法错误信息来表达，比如“行号 %d 附近的语法错误”。

# java - 需要弄清楚如何处理 sparsematrix

> ID：13152073
> 
> 赞同：1
> 
> 时间：2012-10-31T06:00:54.243
> 
> 标签：java, sparse-matrix, circular-list

所以我必须在循环链表的基础上创建一个稀疏矩阵......但不知道如何开始......到目前为止，我知道我必须有一个 Node 类，我将拥有类似 Node 类的东西，包括这些字段：

```
{
int value;
Node next, down;
int row,column;
} 
```

[这是我的作业的稀疏矩阵的图像](http://sphotos-b.xx.fbcdn.net/hphotos-ash3/545517_3321439974804_2136675241_n.jpg)

我想我必须创建第一个节点，也就是进入，但不确定下一步是什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:05:27.727

每个节点在“前向”笛卡尔方向上都有对其最近邻居的引用，因此：

```
public class Node {
    Node right, down;
} 
```

将是一个合理的开始。

如果您使用这种设计，矩阵是稀疏的还是圆形的这一事实是无关紧要的。

通常，主程序将持有对“第一个”节点的引用，这是任意的，但合理的选择是左上角的节点。

# c# - C# 中的多线程 - 更新标签

> ID：13152075
> 
> 赞同：1
> 
> 时间：2012-10-31T06:01:08.463
> 
> 标签：c#, winforms, multithreading

所以我有 3 个标签，并且必须使用随机数同时更新所有三个标签，直到用户单击停止它的按钮。

这就是我的开始按钮

```
private void start_Click(object sender, EventArgs e)
{
        t1 = new Thread(new ThreadStart(FirstNumber));
        t2 = new Thread(new ThreadStart(SecondNumber));
        t3 = new Thread(new ThreadStart(ThirdNumber));

        t1.Start();
        t2.Start();
        t3.Start();
} 
```

这就是生成随机数的方法的样子

```
public void FirstNumber()
{
        int j = r.Next(0, 50);
        int k = r.Next(50, 100);
        for (int i = j; i <= k; i++)
        {
            number1.Text = i.ToString();
            Thread.Sleep(200);
        }
} 
```

当我调试时，我收到以下错误：

> 跨线程操作无效：控件“number2”从创建它的线程以外的线程访问。

我不明白我是如何为每个线程创建控件的，因此不胜感激。

还有一件事，用户能否在标签更新时单击停止按钮？还是我需要添加另一个等待用户输入的线程？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T06:03:14.547

您只需要在 UI Thread 上设置 TextBox 值，而不是在其他线程上，因此您可以在 UI Thread 上使用[`Control.Invoke`](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)或[`Control.BeginInvoke`](http://msdn.microsoft.com/en-us/library/0b1bf3y3.aspx)执行委托：

```
 number1.BeginInvoke(new Action(() => { number1.Text = i.ToString(); })); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:03:02.823

您只能在 UI 线程上访问 UI。您可以通过 Dispatcher.BeginInvoke() 方法将内容发布到 UI 线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:59:50.877

.NET 中线程之间的同步通信是 SynchronizationContext

```
// gui thread
var syncContext = System.Threading.SynchronizationContext.Current;

public void FirstNumber()
{
        int j = r.Next(0, 50);
        int k = r.Next(50, 100);
        for (int i = j; i <= k; i++)
        {
            // Post or Send mth
            syncContext.Post((o) => 
            {
             number1.Text = i.ToString();
            });

            Thread.Sleep(200);
        }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T06:10:05.057

你想要的是并行活动。MS 提供并行库，请通过以下链接

[http://www.codeproject.com/Articles/152765/Task-Parallel-Library-1-of-n](http://www.codeproject.com/Articles/152765/Task-Parallel-Library-1-of-n)

[http://www.codeproject.com/Articles/362996/Multi-core-programming-using-Task-Parallel-Library](http://www.codeproject.com/Articles/362996/Multi-core-programming-using-Task-Parallel-Library)

# javascript - javascript返回数组不起作用

> ID：13152080
> 
> 赞同：2
> 
> 时间：2012-10-31T06:01:42.690
> 
> 标签：javascript, jquery, arrays, return, typeof

这是创建数组的函数：

```
//retrieve calendar id's
function getCalendarId(){
    gapi.client.load('calendar', 'v3', function() {
        var request = gapi.client.calendar.calendarList.list();
        request.execute(function(resp) {
            var calendarID = [];
            for (var i = 0; i < resp.items.length; i++) {
                var ID = resp.items[i].id;
                var calendarSummary = resp.items[i].summary;
                var calendarLocation = resp.items[i].location;
                var calendarDescription = resp.items[i].description;
                if (calendarDescription && calendarDescription.indexOf("Resource Tracker") != -1) {
                        var index = calendarID.length;
                        calendarID[index] = ID;
                }//endif
            }//end for
            console.log(typeof calendarID);
            return calendarID;
        });//end request.execute function(resp)
    });//end client.load function
}//end getCalendarId 
```

这是分配它的函数：

```
function submitEvents(numHorses){
   var startdate = $("#from").val();
   var enddate = $("#to").val();
   var horsetypes = [];
   var calid = [];
   console.log(typeof(calid));
   calid = getCalendarId();
   console.log(typeof(calid));
   for (i=0; i<numHorses;i++){
      horsetypes[i] = $( "#type"+i).val();
      addEvent(calid[i%calid.length], startdate, enddate, horsetypes[i]);
   }//end for           
  };//end submitEvents 
```

当我检查类型时， calendarID 在返回之前是一个对象，当我声明它时 calid 是一个对象，但是当我进行赋值时 calid=getCalendarID(); calid 的类型变得未定义。

我的头撞墙已经有一段时间了；任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:04:20.970

最外层的函数没有返回任何内容；它没有返回值，因此设置为函数返回值的变量设置为未定义。内部匿名函数包含`return`，它可能对 API 有意义，也可能没有意义（可能没有）。

真正的问题是对日历 API 的调用可能需要任意时间（它是异步的），因此您不能在单个（同步）函数中设置值并期望它能够工作。当您的请求进出远程服务器时，Javascript 不会停止执行，而您真的不希望它停止执行。

> **类似的问题/答案：** [javascript函数返回不起作用](https://stackoverflow.com/questions/1732473/javascript-function-return-not-working?rq=1)

由于您可能正在使用`getCalendarId`其他地方，因此您可以考虑让它具有自己的功能，并在 Google 日历函数返回时调用它：

```
function getCalendarId(callback){                            // !!!
  gapi.client.load('calendar', 'v3', function() {
    var request = gapi.client.calendar.calendarList.list();
    request.execute(function(resp) {
      var calendarID = [];
      for (var i = 0; i < resp.items.length; i++) {
        // omitted for brevity
      }//end for
      console.log(typeof calendarID);
      callback(calendarID);                                  // !!!
    });//end request.execute function(resp)
  });//end client.load function
}//end getCalendarId

function submitEvents(numHorses){
  // omitted for brevity
  getCalendarId(function(calid) {                            // !!!
    console.log(typeof(calid));
    for (i=0; i<numHorses;i++){
      // omitted for brevity
    }//end for
  });
};//end submitEvents 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T06:06:03.703

```
//retrieve calendar id's
function getCalendarId(){
var calendarID = [];
    gapi.client.load('calendar', 'v3', function() {
        var request = gapi.client.calendar.calendarList.list();
        request.execute(function(resp) {

            for (var i = 0; i < resp.items.length; i++) {
                var ID = resp.items[i].id;
                var calendarSummary = resp.items[i].summary;
                var calendarLocation = resp.items[i].location;
                var calendarDescription = resp.items[i].description;
                if (calendarDescription && calendarDescription.indexOf("Resource Tracker") != -1) {
                        var index = calendarID.length;
                        calendarID[index] = ID;
                }//endif
            }//end for
            console.log(typeof calendarID);

        });//end request.execute function(resp)
    });//end client.load function
return calendarID;
}//end getCalendarId 
```

这应该有效。`CalenderID`应该为被调用的外部函数声明。在您的代码中，您正在返回`calenderID`另一个函数，该函数是`load`

# c# - 在 WPF 中以编程方式添加图表控件时出错

> ID：13152082
> 
> 赞同：0
> 
> 时间：2012-10-31T06:02:00.267
> 
> 标签：c#, wpf, wpftoolkit

我正在尝试以编程方式在 WPF 中添加一个图表，然后向其中添加一个条形图，但是我收到一个错误，指出缺少 chart.cs 或 DataPointSeries.cs。我添加了 Toolkit dll。此外，如果我删除 Bar1.Itemsource 代码，图表可以工作，但没有图表但有图例。有任何想法吗？

```
Chart Ch1 = new Chart();

BarSeries Bar1 = new BarSeries();
List<KeyValuePair<string, int>> valueList = new List<KeyValuePair<string, int>>();
valueList.Add(new KeyValuePair<string, int>("Tom", 2220));
valueList.Add(new KeyValuePair<string, int>("Jim", 23330));

Bar1.ItemsSource = valueList;

Bar1.IndependentValuePath = "Key";
Bar1.IndependentValuePath = "Value";   

Ch1.Name = "BarChart";
Ch1.Series.Add(Bar1);

Grid Backgrid = new Grid();
Backgrid.Children.Add(Ch1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-19T09:52:38.080

Bar1.DependentValuePath = "值"; 而不是： Bar1.IndependentValuePath = "Value";

# android - 自定义菜单选项按钮android

> ID：13152084
> 
> 赞同：1
> 
> 时间：2012-10-31T06:02:15.010
> 
> 标签：android

我正在搜索自定义菜单选项按钮，我想在其中设置我的自定义按钮添加选择器在菜单按钮上单击后更改图像的方式。请看示例图片，这是菜单点击时出现的正常选项菜单![在此处输入图像描述]！[在此处输入图像描述](../Images/fb9f9a7f7df8c7155c05aea4be1ac939.png)

当用户单击![输入图片描述！[在此处输入图片描述](../Images/06e603dfde98b5d172aaca618670c8e5.png)此处的菜单按钮时，这是]

我没有得到适当的解决方案。任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:01:46.057

看看下面的文章。

[自定义菜单](http://staticallytyped.wordpress.com/2011/05/05/android-how-can-you-implement-a-custom-menu-class/)

我认为您肯定会在这里找到满足您要求的方法:)

# python - 匹配大括号中的字符串

> ID：13152085
> 
> 赞同：1
> 
> 时间：2012-10-31T06:02:15.417
> 
> 标签：python, regex

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:08:08.630

使用字符类可能会起作用，或者可能会为您破坏一切：

```
matchquotes = re.findall(r'[“”"](?:\\[“”"]|.)*?[“”"]', text) 
```

如果您不太关心总是排成一行的配对，那么这可能会满足您的需求。除非您构建一些模式并找到它们的交集，否则他们在其他两种中使用第三种类型的情况总是会让您感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:04:36.290

根据您正在进行的其他处理以及文本的来源，最好将所有引号转换为 " 而不是处理每种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T06:35:10.600

我不是专家，但对于那些类型的“花哨”报价，我会首先从表格中获取它们的代码，例如**\xe2\x80\x9c**或**\u2019**。然后我会尝试匹配他们编写他们的正则表达式代码。为此目的，这可能会有所帮助：[http ://www.regular-expressions.info/refunicode.html](http://www.regular-expressions.info/refunicode.html)

我希望它有帮助！

# .net - 我正面临 FileNotFound 异常..请帮帮我

> ID：13152086
> 
> 赞同：0
> 
> 时间：2012-10-31T06:02:15.463
> 
> 标签：.net

无法加载引用的程序集“D:\Dev\Prime\Proj\PRIME.Framework.root\PRIME.AppInterfaces\bin\Debug\PRIME.AppInterfaces.dll”。捕获 FileNotFoundException 说“无法加载文件或程序集 'D:\Dev\Prime\Proj\PRIME.Framework.root\PRIME.AppInterfaces\bin\Debug\PRIME.AppInterfaces.dll' 或其依赖项之一。系统不能找到指定的文件。”。D:\Dev\Prime\Proj\PRIME.BusinessLogicLayer\ResGen

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:05:10.800

你去路径`D:\Dev\Prime\Proj\PRIME.Framework.root\PRIME.AppInterfaces\bin\Debug`并检查dll是否存在？
如果存在，请检查它们中的框架版本。如果其中一个不同，请尝试将其带到相同的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:12:51.790

使用融合日志查看器来调试程序集加载问题。它带有 .net sdk，运行它，设置它记录错误，然后运行您的应用程序并刷新。它应该列出错误。打开错误并查看它可以找到哪个dll。

[http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.71%29.aspx)

# c# - 如何将 XML 请求发送到另一台服务器？

> ID：13152088
> 
> 赞同：0
> 
> 时间：2012-10-31T06:02:29.520
> 
> 标签：c#, asp.net, web-services

我想将 xml 请求发送到另一台服务器，并想在 asp.net C# 中读取 xml 响应。

但是不知道怎么弄？？

这是我的要求.. 我怎样才能生成它？

```
<request-Body>
<request>
<id>001</client-id>
<code>33333</authentication-code>
</request>
</request-Body> 
```

这是来自另一台服务器的响应。

怎么读？？

```
 <SOAP-ENV:Envelope xmlns:xsi="http://www.w3.org/1999/XMLSchema/instance" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope" xsi:schemaLocation="http://www.aaa.com/schemas/ver1.4/Schema.xsd">
    <SOAP-ENV:Body xsi:type = "response-Body">
    <response-Body>
    <response>
    <id>001</client-id>
    <status>ok</status>
    <authentication-status>yes</authentication-status>
    <session-id>0</session-id>
    </response>
    </response-Body>
    </SOAP-ENV:Body>
    </SOAP-ENV:Envelope> 
```

怎么做？？怎么连接其他服务器？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:10:06.400

这看起来像一个网络服务。获取 Web 服务的 wsdl。您可以在 .net 中使用两种不同的 API 与 Web 服务对话，基于 ASMX 和基于 WCF。每个 API 都有自己的命令行工具，用于为 Web 服务生成代理。

```
wsdl.exe http://myservice/myservice?wsdl
svcutil.exe http://myservice/myservice?wsdl 
```

生成代理后，将代码文件添加到项目中。

同样在 VS 中，您可以使用添加 Web 参考功能。 [http://msdn.microsoft.com/en-us/library/bb628649.aspx](http://msdn.microsoft.com/en-us/library/bb628649.aspx)

# php - strpos() 返回看似随机的值

> ID：13152092
> 
> 赞同：1
> 
> 时间：2012-10-31T06:02:44.277
> 
> 标签：php, substr, strpos

我正在尝试提取字符串的位。

字符串如下所示：

```
$rowstr = "8:12-bk-16430|8:2012-bk-16430|1080751|7|||||10/30/2012|1/30/2012|||bk|||PINELLAS-FL|Tampa|Paid... 
```

我使用这个得到第一个字段就好了：

```
$pos1 = strpos($rowstr, "|") +1; //begining of field case number
$pos2 = strpos($rowstr, "|", $pos1 + 1); //end of field case number
$len1 = $pos2 - $pos1;  //string length
$field['case_num'][$i] = substr($rowstr,$pos1,$len1); // casenumber extracted 
```

但是当我尝试提取第二个字段时（应该是`1080751`）

```
$pos3 = strpos($rowstr, "|", $pos2); //end of field 
$pos4 = strpos($rowstr, "|", $pos3 + 1); //end of field
$len2 = $pos3 - $pos4;  //string length
$field['field2'][$i] = substr($rowstr,$pos3,$len2); // field 2 extracted 
```

结果是一个以 开头的很长的字符串`|1080751|7|||||10/30/2012|10..`。

如果`$pos3`返回`16`并`$pos4`返回，`24`那么为什么我得到的结果比 8 个字符长得多？PHP 是否出于某种原因不计算特殊包机？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:08:34.947

尝试

```
// Added + 1 here
$pos3 = strpos($rowstr, "|", $pos2) + 1; //end of field
$pos4 = strpos($rowstr, "|", $pos3 + 1); //end of field
// swapped $pos3 and $pos4 here
$len2 = $pos4 - $pos3;  //string length
$field['field2'][$i] = substr($rowstr,$pos3,$len2); // field 2 extracted 
```

# plot - Matlab / Octave：无法绘制方程

> ID：13152094
> 
> 赞同：2
> 
> 时间：2012-10-31T06:02:49.410
> 
> 标签：plot, octave

我正在使用 Octave 绘制一个简单的方程，但它返回一个像[这样](http://i.imgur.com/8ZOL2.png)的空图 ，代码如下：

```
# Computing of Zin
# Constants
RL=50;
L=1;
mu=4e-7*pi;
eps=1;
nu=3e8/sqrt(eps);
s=50;
r=7.5;
l=(mu/pi)*log((s-r)^2/r^2);
c=1/(l*nu^2);
R0=sqrt(l/c);
beta=2*pi*sqrt(l*c);

# Equation
Zin=R0*(RL+R0*tan(beta*f)*1i)/(R0+RL*tan(beta*f)*1i);
printf("l=%e ; c=%e ; R0=%f ; beta=%e\n",l,c,R0,beta);
printf("Zin(f) = %f for f = %d Hz.\n",Zin,f);

# Plot Zin(f)
f=logspace(7,11);
figure(1);
semilogx(f,Zin);
title('Zin(f)'); 
```

八度返回这个：

```
l=1.387681e-006 ; c=8.006964e-012 ; R0=416.304253 ; beta=2.094395e-008
Zin(f) = 444.026370 for f = 10000000 Hz.
Zin(f) = 12067926.406393 for f = 14563484 Hz.
Zin(f) = 17575106.248548 for f = 21209508 Hz.
Zin(f) = 25595479.226995 for f = 30888435 Hz.
Zin(f) = 37275937.203149 for f = 44984326 Hz.
Zin(f) = 54286754.393239 for f = 65512855 Hz.
Zin(f) = 79060432.109077 for f = 95409547 Hz.
Zin(f) = 115139539.932645 for f = 138949549 Hz.
Zin(f) = 167683293.681101 for f = 202358964 Hz.
Zin(f) = 244205309.454865 for f = 294705170 Hz.
Zin(f) = 355648030.622312 for f = 429193426 Hz.
Zin(f) = 517947467.923120 for f = 625055192 Hz.
Zin(f) = 754312006.335461 for f = 910298177 Hz.
Zin(f) = 1098541141.987557 for f = 1325711365 Hz.
Zin(f) = 1599858719.606057 for f = 1930697728 Hz.
Zin(f) = 2329951810.515372 for f = 2811768698 Hz.
Zin(f) = 3393221771.895329 for f = 4094915062 Hz.
Zin(f) = 4941713361.323838 for f = 5963623317 Hz.
Zin(f) = 7196856730.011529 for f = 8685113738 Hz.
Zin(f) = 10481131341.546831 for f = 12648552169 Hz.
Zin(f) = 15264179671.752302 for f = 18420699693 Hz.
Zin(f) = 22229964825.261909 for f = 26826957953 Hz.
Zin(f) = 32374575428.176399 for f = 39069399371 Hz.
Zin(f) = 47148663634.573898 for f = 56898660290 Hz.
Zin(f) = 68664884500.429985 for f = 82864277285 Hz.
Zin(f) = 100000000000.000000 for f = 
```

我不明白这个问题。我也试图让它成为一个用 fplot 绘制它的函数，但没有成功。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:33:31.380

请更改代码

> semilogx(f,Zin);

至

> semilogx(f,Zin, '*');

然后检查输出，其中点显示为“*”。

更新：

这是代码：

```
function zin
    RL=50;
    L=1;
    mu=4e-7*pi;
    eps=1;
    nu=3e8/sqrt(eps);
    s=50;
    r=7.5;
    l=(mu/pi)*log((s-r)^2/r^2);
    c=1/(l*nu^2);
    R0=sqrt(l/c);
    beta=2*pi*sqrt(l*c);
    f=logspace(7,11);

    # Equation
    printf("l=%e ; c=%e ; R0=%f ; beta=%e\n",l,c,R0,beta);

    Zin = R0*(RL+R0*tan(beta*f)*1i)./(R0+RL*tan(beta*f)*1i);

    # Plot Zin(f)

    size(Zin)

    semilogx(f,Zin,'r-x');

    title('Zin(f)');

end 
```

图像显示在[此](http://i.imgur.com/zjhqq.png)。

# mysql - mysql想要获取特定月份和日期的数据

> ID：13152095
> 
> 赞同：4
> 
> 时间：2012-10-31T06:02:52.843
> 
> 标签：mysql

```
a_id employee_id    date       checkin          checkout
1       1        31-10-2012   09:13:54 AM      05:30:55 PM
2       1        01-11-2012   09:34:39 AM      05:30:55 PM 
```

我有以下考勤表....我想获取特定月份的所有签到和签出时间，例如 01-10-2012 到 31-10-2012 ....我使用过类似的东西

```
select `employee_id`,`date`,`checkin`,`checkout`
from `attendence` 
where `date` >= '01-10-2012'
    and `date` < '31-10-2012' 
```

现在这个查询的问题是返回结果但下个月的第一个日期

**这是它给我的结果**

```
 employee_id    date       checkin          checkout
     1        31-10-2012   09:13:54 AM      05:30:55 PM
     1        01-11-2012   09:34:39 AM      05:30:55 PM 
```

**我只想要一个特定月份的结果，就像上面的查询一样**

```
employee_id         date       checkin          checkout
         1        31-10-2012   09:13:54 AM      05:30:55 PM

a_id    int(11) No       
employee_id int(11) No       
date    varchar(15) No       
checkin varchar(32) No       
checkout    varchar(32) No 
```

plzzzz 帮助我被困在这里的人:(

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T06:07:02.563

您可以使用[`DATE_FORMAT`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

```
select `employee_id`,`date`,`checkin`,`checkout`
from `attendence` 
where DATE_FORMAT(date, "%m-%Y") = "10-2012" 
```

查看[`FiddleDemo`](http://sqlfiddle.com/#!2/54eb1/1/0)它对我有用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T06:07:17.070

尝试这个

```
select `employee_id`,`date`,`checkin`,`checkout`
from `attendence` 
where `date` BETWEEN  MONTH('01-10-2012')
AND  MONTH( '31-10-2012') 
```

如果想要年份和月份

```
select `employee_id`,`date`,`checkin`,`checkout`
from `attendence` 
where `date` BETWEEN  MONTH('01-10-2012')
AND  MONTH( '31-10-2012')
AND `date` BETWEEN  YEAR('01-10-2012')
AND  YEAR( '31-10-2012') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T06:21:45.223

您应该使用列`datetime`类型`date`与本机日期比较。

或者

尝试这个：

```
select `employee_id`,`date`,`checkin`,`checkout`
from `attendence` 
where DATE(`date`) >= DATE('01-10-2012')
    and DATE(`date`) < DATE('31-10-2012') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-01T01:14:57.330

注意 DATE 中字符串的格式。它应该是 yyyy-MM-dd。

```
select 
    `employee_id`,`date`,`checkin`,`checkout` 
from 
    `attendence` 
where 
DATE(`date`) >= DATE('2012-10-01') 
    and DATE(`date`) < DATE('2012-10-31'); 
```

# asp.net-mvc-3 - ASP.NET MVC - 在帮助器中获取当前控制器和操作名称

> ID：13152101
> 
> 赞同：9
> 
> 时间：2012-10-31T06:03:32.360
> 
> 标签：asp.net-mvc-3, html-helper

我正在尝试创建自定义 html 帮助程序，它将从 XML 文件中检索一些文本并将其呈现在视图上。XML 按层次结构组织，其中顶部节点表示控制器名称，然后是操作名称，然后是各个键。

目标是完成语法，例如：

```
@Html.Show("Title") 
```

助手将从调用它的视图中推断出控制器名称和操作名称。

有没有办法在 html 辅助扩展方法中获取该信息？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-07-05T22:19:35.113

更简单：

```
htmlHelper.ViewContext.RouteData.Values["controller"] 
```

和

```
htmlHelper.ViewContext.RouteData.Values["action"] 
```

分别为您提供控制器和操作名称。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-31T06:30:38.960

您可以从中检索当前控制器和操作`htmlHelper.ViewContext.RouteData`。使用下面的扩展方法从 xml 中检索相应的值：

```
//make sure you include System.Xml.XPath, otherwise extension methods for XPath 
//won't be available
using System.Xml.XPath;

public static MvcHtmlString Show(this HtmlHelper htmlHelper,
                                                 string key)
{
    XElement element = XElement.Load("path/to/yourXmlfile.xml");
    RouteData routeData = htmlHelper.ViewContext.RouteData;
    var keyElement = element.XPathSelectElements(string.format("//{0}/{1}/{2}", 
                                                    routeData.GetRequiredString("controller"), 
                                                    routeData.GetRequiredString("action"), 
                                                    key)
                                                ).FirstOrDefault();

    if (keyElement == null)
        throw new ApplicationException(
            string.format("key: {0} is not defined in xml file", key));

    return new MvcHtmlString(keyElement.Value);
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-31T07:12:56.103

这是动作名称：

```
ViewContext.Controller.ValueProvider.GetValue("action").RawValue.ToString() 
```

# asp.net-mvc-3 - 将 List 模型发布回控制器

> ID：13152102
> 
> 赞同：3
> 
> 时间：2012-10-31T06:03:32.703
> 
> 标签：asp.net-mvc-3

我仍然是 ASP.net MVC3 的新手，我正在尝试创建一个可以添加到用户的可选项目列表。所以 Get 方法看起来像

```
 public ViewResult AddFavourite(int id)
    {
        ViewBag.UserId = id;
        var movies = (from m in db.Movies
                             select new SelectableMovie() { Movie = m });
        return View(movies.ToList());
    } 
```

并且视图看起来像

```
@using MovieManager.Models
@model List<SelectableMovie>
@using (Html.BeginForm("AddFavourite", "Users",
    new { userId = ViewBag.UserId, movies = Model }, FormMethod.Post))
{
<table>
    <tr>
        <th>
            Add
        </th>
        <th>
            Title
        </th>
        <th>
            Description
        </th>
        <th>
            ReleaseDate
        </th>
    </tr>
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.CheckBoxFor(modelItem => item.Selected)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Movie.Title)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Movie.Description)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Movie.ReleaseDate)
            </td>
        </tr>
    }
</table>
<p>
    <input type="submit" value="Add Favourites" />
</p>
} 
```

这会按预期显示列表，但是当我回发到控制器时，我得到了一个 userId，但 movies 参数是一个空列表。如何将视图中使用的模型返回给控制器以在 Post Action 中使用？Post 操作看起来像这样

```
 [HttpPost]
    public ActionResult AddFavourite(int userId, List<SelectableMovie> movies)
    {
        User user = db.Users.Single(u => u.ID == UserId);
        //add items here
        return View("Details", user);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T06:29:06.513

```
@for (int i = 0; i < Model.Count; i++)
{
    <tr>
        <td>
            @Html.CheckBox("movies[" + i + "].Selected", Model[i].Selected)
        </td>
        <td>
            @Html.Display("movies[" + i + "].Movie.Title", Model[i].Movie.Title)
        </td>
        <td>
            @Html.Display("movies[" + i + "].Movie.Description", Model[i].Movie.Description)
        </td>
        <td>
            @Html.Display("movies[" + i + "].Movie.ReleaseDate", Model[i].Movie.ReleaseDate)
        </td>
    </tr>
} 
```

编辑：这是一个很好的例子：[http ://code-inside.de/blog-in/2012/09/17/modelbinding-with-complex-objects-in-asp-net-mvc/](http://code-inside.de/blog-in/2012/09/17/modelbinding-with-complex-objects-in-asp-net-mvc/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T07:08:06.843

明白了，我试图在我创建的匿名对象中手动设置电影参数以包含用户 ID。通过包含电影属性，它覆盖了绑定。

在我看来 using 语句

```
@using (Html.BeginForm("AddFavourite", "Users",
    new { userId = ViewBag.UserId, movies = Model }, FormMethod.Post))
{ 
```

应该只是

```
 @using (Html.BeginForm("AddFavourite", "Users",
        new { userId = ViewBag.UserId }, FormMethod.Post))
    { 
```

MVC 模型绑定器在我的 Post 方法中处理电影参数

除此之外，正如@karaxuna 所说，您需要使用 for 循环而不是 foreach 循环，否则它不会绑定到模型。

# android - 如何在 MapView 中显示远程服务器数据

> ID：13152104
> 
> 赞同：0
> 
> 时间：2012-10-31T06:03:37.633
> 
> 标签：android, android-emulator, android-mapview, android-maps, android-parser

我正在制作一个应用程序，在该应用程序中，我使用 JSON 将位置获取到地图中，但我仍在获取地图，但没有 JSON 数据来显示多个位置，我的代码没问题，它工作正常，我只是想知道你们所有的专家在哪里我需要将此行显示 JSON 数据到 Mapview：

```
 new DownloadWebPageTask().execute(); 
```

以下是我的代码：-

```
public class MapView extends MapActivity {
public GeoPoint point;
TapControlledMapView mapView=null; // use the custom TapControlledMapView
List<Overlay> mapOverlays;
Drawable drawable;
SimpleItemizedOverlay itemizedOverlay;

@Override
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map_view);
//  new DownloadWebPageTask().execute();
    mapView = (TapControlledMapView) findViewById(R.id.viewmap);
    mapView.setBuiltInZoomControls(true);
    mapView.setSatellite(false);

    // dismiss balloon upon single tap of MapView (iOS behavior) 
    mapView.setOnSingleTapListener(new OnSingleTapListener() {      

        public boolean onSingleTap(MotionEvent e) {
            itemizedOverlay.hideAllBalloons();
            return true;

        }
    });

    mapOverlays = mapView.getOverlays();        
    drawable = getResources().getDrawable(R.drawable.ic_launcher);
    itemizedOverlay = new SimpleItemizedOverlay(drawable, mapView);         
    itemizedOverlay.setShowClose(false);
    itemizedOverlay.setShowDisclosure(true);
    itemizedOverlay.setSnapToCenter(false);

    class DownloadWebPageTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... urls) {

            HttpClient client = new DefaultHttpClient();
            // Perform a GET request for a JSON list
            HttpUriRequest request = new HttpGet("http://***.in/map.json");
            // Get the response that sends back
            HttpResponse response = null;
            try {
                response = client.execute(request);
            } catch (ClientProtocolException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            // Convert this response into a readable string
            String jsonString = null;
            try {
                jsonString = StreamUtils.convertToString(response.getEntity().getContent());
            } catch (IllegalStateException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            // Create a JSON object that we can use from the String
            JSONObject json = null;
            try {
                json = new JSONObject(jsonString);
            } catch (JSONException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            try{
                JSONArray jsonArray = json.getJSONArray("maps");
                Log.e("log_tag", "Opening JSON Array ");
                for(int i=0;i < jsonArray.length();i++){                      
                    JSONObject jsonObject = jsonArray.getJSONObject(i);
                    String latitude =  jsonObject.getString("latitude");
                    String longitude =  jsonObject.getString("longitude");
                    String title =  jsonObject.getString("title");
                    String country = jsonObject.getString("country");
                    double lat = Double.parseDouble(latitude);
                    double lng = Double.parseDouble(longitude);
                    Log.e("log_tag", "ADDING GEOPOINT"+title); 
                    point = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
                    OverlayItem overlayItem = new OverlayItem(point, title, country);
                    itemizedOverlay.addOverlay(overlayItem);
               }
           }catch(JSONException e)        {
               Log.e("log_tag", "Error parsing data "+e.toString());
           } 

           return jsonString;
       }

           @Override
        protected void onPostExecute(String result) {
                    itemizedOverlay.populateNow(); 

           mapOverlays.add(itemizedOverlay);
           if (savedInstanceState == null) {
               MapController controller = mapView.getController();
               controller.setCenter(point);
               controller.setZoom(7);
           } else {
               // example restoring focused state of overlays
               int focused;
               focused = savedInstanceState.getInt("focused_1", -1);
               if (focused >= 0) {
                   itemizedOverlay.setFocus(itemizedOverlay.getItem(focused));
               }
           }
              }

    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:07:03.547

很明显，您应该在初始化地图后调用 execute 方法。我认为你的代码应该是这样的：

```
public class Test extends MapActivity {
    public GeoPoint point;
    MapView mapView=null; // use the custom TapControlledMapView
    List<Overlay> mapOverlays;
    Drawable drawable;
    SimpleItemizedOverlay itemizedOverlay;

    @Override
    public void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map_view);
        //  new DownloadWebPageTask().execute();
        mapView = (TapControlledMapView) findViewById(R.id.viewmap);
        mapView.setBuiltInZoomControls(true);
        mapView.setSatellite(false);

        // dismiss balloon upon single tap of MapView (iOS behavior) 
        mapView.setOnSingleTapListener(new OnSingleTapListener() {      

            public boolean onSingleTap(MotionEvent e) {
                itemizedOverlay.hideAllBalloons();
                return true;

            }
        });

        mapOverlays = mapView.getOverlays();        
        drawable = getResources().getDrawable(R.drawable.ic_launcher);
        itemizedOverlay = new SimpleItemizedOverlay(drawable, mapView);         
        itemizedOverlay.setShowClose(false);
        itemizedOverlay.setShowDisclosure(true);
        itemizedOverlay.setSnapToCenter(false);

        new DownloadWebPageTask().execute();

    }

    class DownloadWebPageTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... urls) {

            HttpClient client = new DefaultHttpClient();
            // Perform a GET request for a JSON list
            HttpUriRequest request = new HttpGet("http://***.in/map.json");
            // Get the response that sends back
            HttpResponse response = null;
            try {
                response = client.execute(request);
            } catch (ClientProtocolException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            // Convert this response into a readable string
            String jsonString = null;
            try {
                jsonString = StreamUtils.convertToString(response.getEntity().getContent());
            } catch (IllegalStateException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            // Create a JSON object that we can use from the String
            JSONObject json = null;
            try {
                json = new JSONObject(jsonString);
            } catch (JSONException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            try{
                JSONArray jsonArray = json.getJSONArray("maps");
                Log.e("log_tag", "Opening JSON Array ");
                for(int i=0;i < jsonArray.length();i++){                      
                    JSONObject jsonObject = jsonArray.getJSONObject(i);
                    String latitude =  jsonObject.getString("latitude");
                    String longitude =  jsonObject.getString("longitude");
                    String title =  jsonObject.getString("title");
                    String country = jsonObject.getString("country");
                    double lat = Double.parseDouble(latitude);
                    double lng = Double.parseDouble(longitude);
                    Log.e("log_tag", "ADDING GEOPOINT"+title); 
                    point = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
                    OverlayItem overlayItem = new OverlayItem(point, title, country);
                    itemizedOverlay.addOverlay(overlayItem);
                }
            }catch(JSONException e)        {
                Log.e("log_tag", "Error parsing data "+e.toString());
            } 

            return jsonString;
        }

        @Override
        protected void onPostExecute(String result) {
            itemizedOverlay.populateNow(); 

            mapOverlays.add(itemizedOverlay);
            if (savedInstanceState == null) {
                MapController controller = mapView.getController();
                controller.setCenter(point);
                controller.setZoom(7);
            } else {
                // example restoring focused state of overlays
                int focused;
                focused = savedInstanceState.getInt("focused_1", -1);
                if (focused >= 0) {
                    itemizedOverlay.setFocus(itemizedOverlay.getItem(focused));
                }
            }
        }

    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

# python - 如何根据page1上的选择在page2上生成动态MultipleChoiceField选项？

> ID：13152105
> 
> 赞同：2
> 
> 时间：2012-10-31T06:03:40.070
> 
> 标签：python, django, forms, dynamic

我正在写 2 页。我想要做的是，根据在 page1 中选择的数据，生成一个带有 MultipleChoiceField 的表单，该表单具有由 page1 结果计算的选项。或者读取相应的文件也可以，只是为了在 page2 表单中获取 MultipleChoiceField 的选项。

我正在使用表单模板，在 forms.py 中，在 page2 的表单类中，

```
class FormPage2(forms.Form): 
    forms.MultipleChoiceField(label='sth to choose',choices=get_tochoose_choices()) 
```

get_tochoose_choices() 正在读取一些 txt 文件以获取选项。

但是当我加载第一页时，（我认为python实例化所有表单，不管它是否在这个页面上）这个文件不存在，这意味着FormPage2无法实例化。即使文件在那里，它也不是最新的。

那我该怎么办？我对网站设计很陌生，希望有人可以帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:56:23.957

我相信您要做的是根据第一个表单中选择的选项动态构建您的第二个表单。

我不得不为我的一个项目做类似的事情，发现这个链接非常有用：http: [//jacobian.org/writing/dynamic-form-generation/](http://jacobian.org/writing/dynamic-form-generation/)

您需要覆盖`__init__`第二种方法的方法，从而在该表单的初始化期间初始化选项。

您的第二种形式的代码应该是这样的..

```
def __init__(self, *args, **kw):
    #first remove my custom keyword from the list of keyword args
    try:
        customer = kw['customer']
        kw.pop('customer')
    except:
        customer=None

    super(forms.Form, self).__init__(*args, **kw)
    #now we dynamically add the customer choices - accepts partners as an input
    partners = get_partner_list(customerid=customer.id)
    self.fields['customer'].choices = [(p.id, p.customername) for p in partners] 
```

从第一个表单接收到输入后，您可以将其作为关键字参数传递给第二个表单。然后在`__init__`第二种形式中，您弹出该关键字参数并使用它通过编辑来初始化选择`self.fields['fieldneedsdynamicchoices'].choices`

# android - 创建 P2P Android 聊天，使用哪个框架进行联网？

> ID：13152113
> 
> 赞同：0
> 
> 时间：2012-10-31T06:04:49.177
> 
> 标签：android, chat, p2p

我想构建一个像这样在 p2p 上运行的（Android）应用程序

服务器（对等点列表（用户名和 ip））

&

电话（从服务器获取对等点列表并在它们之间创建套接字聊天（电话到电话），不涉及服务器）

到目前为止，我已经设置了服务器和一个手机客户端，它发送一条消息并被另一台服务器接收（最终将在其他客户端手机中）。但是，我遇到了通过 NAT 为手机分配 ip 的问题，我需要进行 NAT Traversal。

我想知道，有没有更简单的选择来进行 NAT 遍历？也许使用带有 libjingle 的 XMPP 端口？（阿斯马克）。还是我应该只使用 JSTUN 或其他一些 Android 框架？大家有什么推荐的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-17T09:21:47.060

退房：[Kryonet](https://github.com/EsotericSoftware/kryonet)。

您可以通过 Kryonet 只用一行代码发现 LAN 连接中的服务器，然后检索所有客户端的地址并尝试根据您的应用程序设计与它们连接。

它甚至有一个聊天应用程序作为示例，并且 Kryonet 可以在台式机和 Android 设备上运行。

如果你有一个静态的全局 IP，那么你可以很容易地使用 Kryonet 编写服务器代码，它包含在线用户及其 IP 的地图，如果他们不在同一个 LAN 中，它可以进行打孔以建立 P2P 连接.

# php - 在php中限制上传文件的大小

> ID：13152114
> 
> 赞同：0
> 
> 时间：2012-10-31T06:04:54.890
> 
> 标签：php, html, file-upload, upload

我正在使用 PHP 中的多个文件上传，我还使用上传表单 PHP 文件中的以下 HTML 命令修复了 10MB 的上传限制：

```
 <input type="hidden" name="MAX_FILE_SIZE" value="10000000"> 
   <input id="infile" type="file" name="infile[]" multiple="true" /> 
```

在负责上传功能的 PHP 文件中，我最初期望如果我尝试上传大小大于 10MB 的文件，那么函数调用语句

```
 move_uploaded_file($_FILES['infile']['tmp_name'][$i], $dir . $fPath); 
```

将失败，我可以显示“错误上传文件大小小于 10MB”的消息。但它没有发生。它正在尝试上传，但没有按预期显示任何错误消息。

所以我试图通过使用 if 语句在代码中专门限制文件大小：

```
 if ($_FILES["infile"]["size"][$i]<10000000) 
    {
       move_uploaded_file($_FILES['infile']['tmp_name'][$i], $dir . $fPath);
    }
  else
    echo "error"; 
```

但它仍然没有像预期的那样回显错误。谁能指出我在这里做的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:07:28.600

您可以将以下行添加到处理表单的目标脚本中：

```
ini_set('upload_max_filesize', '10M'); 
```

或者，如果您可以访问您的 php.ini，只需更改以下内容：

```
upload_max_filesize = 10M 
```

手册页： http: [//php.net/manual/en/ini.core.php](http://php.net/manual/en/ini.core.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:42:08.393

尝试这个

```
<?php
if(isset($_POST["file_uploaded"])){
    $f_id= $_GET["id"]; 
    $dir_name="dir_hal_".$f_id; 
    $u=0; 
    if(!is_dir($dir_name))
    {
        mkdir($dir_name); 
    }
    $dir=$dir_name."/"; 
    $file_realname = $_FILES['infile']['name'];
    $c=count($_FILES['infile']['name']);
    for($i = 0;$i<$c;$i++) 
    {
        $ext = substr(strrchr($_FILES['infile']['name'][$i], "."), 1); 
        $fname = substr($_FILES['infile']['name'][$i],0,strpos($_FILES['infile']['name'][$i], "."));
        $fPath = $fname."_(".substr(md5(rand() * time()),0,4).")".".$ext"; 
        if($_FILES["infile"]["size"][$i]>10000000)
        {
            echo 'File uploaded exceeds maximum upload size.';
        }
        else{
            if(move_uploaded_file($_FILES['infile']['tmp_name'][$i], $dir . $fPath)) 
            {
                $u=$u+1;
                echo "Upload is successful\n";
            }
            else 
            {
                echo "error\n"; 
            }
        }
    }
    if($u==$c)
    {
        echo "count is correct";
    }
}
?> 
```

# javascript - 如何在 Angular.js 服务中正确包装 GAE Channel API 并将更新推送到整个应用程序？

> ID：13152119
> 
> 赞同：3
> 
> 时间：2012-10-31T06:05:22.547
> 
> 标签：javascript, google-app-engine, angularjs, channel-api

所以我正在尝试使用带有[Angular.js的](http://angularjs.org/)[GAE Channel API](https://developers.google.com/appengine/docs/python/channel/overview)来进行实时数据绑定更新（这真的很酷，对吧！？）。有人告诉我这样做的正确方法是将 Channel API [Javascript Client](https://developers.google.com/appengine/docs/python/channel/javascript)包装在 Angular.js 服务中（[并确保使用 $apply()](https://stackoverflow.com/questions/10179488/the-view-is-not-updated-in-angularjs)）。但这究竟是什么意思？

据我了解，对于 Channel API，我几乎应该有一个 1:1 的客户端：通道连接，所以我的所有更新都必须流向我整个应用程序中所有模型的那个通道。然后我如何向可能的多个范围广播模型（通常是 ngResource）已更新？ *$手表？$发射？$广播？$摘要？*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T09:09:00.780

我有同样的要求，并通过 Angular 服务解决了它。我在这里描述了我的解决方案：

[http://david-codes.blogspot.com/2013/03/app-engine-channel-api-and-angular-js.html](http://david-codes.blogspot.com/2013/03/app-engine-channel-api-and-angular-js.html)

# c++ - 从共享库中公开 C++ 模板方法

> ID：13152128
> 
> 赞同：1
> 
> 时间：2012-10-31T06:06:17.747
> 
> 标签：c++, templates

我正在尝试创建一个共享库来公开一些 c++ 方法。

我只是创建了一个包装器，在其中我使用外部“C”链接将方法公开为 C 函数。

在相应的 C 函数中，我创建了一个类的对象并调用了适当的方法。

我遇到的问题是一些需要公开的方法使用模板作为参数。

例如：C++：

```
class myclass {
    template <typename T>
    void write(int addr, T data);
    void get_data()
} 
```

C包装：

```
void get_date() {
    myclass obj;
    obj.get_data();
} 
```

我应该如何公开其他方法？

1.  我可以在 C 包装函数中使用 typeid 运算符来确定参数的类型吗？
2.  对此还有其他更好的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T06:29:34.353

由于 C 不支持模板或 typeid，您有点卡住了。

我能想到的最好/最简单的方法是为您希望使用的每种参数类型创建一个 C 函数版本。

```
void write_int( int i )
{
  myclass obj;
  obj.write(i);
}

void write_string( char * s )
{
  myclass obj;
  obj.write(s);
} 
```

另一种选择可能是打开类型并传递一个 void* 指针。

```
void write( int type, void* ptr )
{
   myclass obj;
   switch(type)
   {
      case C_INT:
        obj.write( *static_cast<int*>(ptr) );
        break;
      case C_STR:
        obj.write( *static_cast<char**>(ptr) );
        break;
      default:
        //Some kind of error.
   }
} 
```

最后一个选择是使用 var args 函数做一些诡计：

```
void write( int type, ... )
{
   va_list argp;
   va_start( argp, type);
   myclass obj;
   switch(type)
   {
      case C_INT:
        obj.write( va_arg(argp, int) );
        break;
      case C_STR:
        obj.write( va_arg(argp, char* ) );
        break;
      default:
        //Some kind of error.
   }
} 
```

您可以通过定义隐藏函数的宏来检测其中的一些使用错误：

```
#define write(X,Y) write(X,Y) 
```

这意味着使用错误数量的参数应该会产生错误。

# c# - 如何在 asp.net 中使用销售表上的登录用户？

> ID：13152131
> 
> 赞同：1
> 
> 时间：2012-10-31T06:06:50.737
> 
> 标签：c#, sql, asp.net

我正在使用 C# 中的 ASP.NET 创建一个网站，并且我正在使用具有不同用户/登录名的 SQL 数据库。每个用户都应该将数据输入到网站上的数据库表中，用户应该只看到他们的输入而不是整个表。

我有两个表，一个用于登录/用户表和一个销售表，所以我在两个表中都有一个用户 ID，我需要的是用户 ID 自动填写在登录用户的销售表中，是的，我有建立了表之间的关系。我该如何进行这项工作？

我认为这是它应该如何工作的也许我在这里想错了，如果是这样，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:13:42.920

你的要求很混乱。

我的理解是：当您的用户访问您的网站时，他们会填写一张表格（假设用户已经登录）。现在，当用户填写表单时，您需要在“用户”和“销售”表中填写该数据。

用户应该只看到他/她输入的信息。

如果我的理解是正确的，那么您需要创建一个从表单中获取数据的存储过程（您的前端会将其传递给您的 SP）。然后，在您的 SP 中，在两个表中插入相关数据（用户 ID 相同）。之后，只需选择将当前会话用户 ID 保持在 WHERE 条件中。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:19:21.000

你可能不得不做一些模仿。你不应该这样做。在您的应用程序层中，您应该处理安全性，而不是在数据库中。

[http://msdn.microsoft.com/en-us/library/xh507fc5%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/xh507fc5%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T06:28:28.673

如果您还基于不同的表之间有正确的关系，`userID`那么您可以轻松地限制要在相应表中显示和插入数据的数据`userID`。

如果您使用的是[ASP.Net 成员资格](http://www.4guysfromrolla.com/articles/120705-1.aspx)，那么如果它是自定义成员资格，那么您可以将登录的用户 ID 存储在会话变量和基于此用户 ID 的 CRUD 查询中。

在我可以帮助您进行查询之前，拥有表结构以及一些虚拟数据会很棒。

希望这能让你开始

# c++ - c++ const 难题

> ID：13152133
> 
> 赞同：0
> 
> 时间：2012-10-31T06:07:00.707
> 
> 标签：c++, compiler-errors, constants, extern

我在 3 个文件中有以下代码：

*定义.h*

```
#ifndef Defines_h
extern const unsigned int SIZE;

#endif 
```

*定义.cpp*

```
#include "Defines.h"

const unsigned int SIZE = 10; 
```

*主文件*

```
#include "Defines.h"

int main()
{
    int x[SIZE] = {0};
} 
```

在编译时，我在数组定义行得到错误：

错误 C2057：预期的常量表达式和 C2466：无法分配常量大小为 0 的数组

为什么会发生这种情况，毕竟我的 SIZE 确实是一个常数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:12:39.270

移动`const unsigned int SIZE = 10;`到标题并删除外部行。使用简单的 const int 值，直接在标题中声明它是安全且无害的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:15:41.373

`const`是隐含`static`的，你需要一个`extern`偶数的`SIZE`定义。包含文件不会链接，因为它正在寻找`const unsigned int SIZE`带有外部链接的文件。

# java - Android BroadcastReceiver 不工作（包括错误）

> ID：13152145
> 
> 赞同：0
> 
> 时间：2012-10-31T06:07:31.423
> 
> 标签：java, android, service, broadcastreceiver

在我的主要活动中，我正在执行此操作：

```
 Calendar calendar = Calendar.getInstance();

        // 9:45 PM 
        calendar.set(Calendar.HOUR_OF_DAY, 21);
        calendar.set(Calendar.MINUTE, 45);
        calendar.set(Calendar.SECOND, 0);
        AlarmManager am = (AlarmManager) this.getApplicationContext().getSystemService(Context.ALARM_SERVICE);
        PendingIntent pi = PendingIntent.getService(this.getApplicationContext(), 0, new Intent(this.getApplicationContext(), MorningReceiver.class), PendingIntent.FLAG_UPDATE_CURRENT);
        am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pi);

        Toast msg = Toast.makeText(NotificationScanner.this,
                "Scheduled: " + calendar.getTime(), Toast.LENGTH_LONG);
        msg.show(); 
```

这是我的接收器

```
public class MorningReceiver extends BroadcastReceiver { 
@Override
public void onReceive(Context context, Intent intent) {
    MediaPlayer mMediaPlayer = new MediaPlayer();
    Uri alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM); 
    try {
        mMediaPlayer.setDataSource(context, alert);
        final AudioManager audioManager = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);
        if (audioManager.getStreamVolume(AudioManager.STREAM_ALARM) != 0) {
            mMediaPlayer.setAudioStreamType(AudioManager.STREAM_ALARM);
            mMediaPlayer.start();
            PackageManager packageManager = context.getPackageManager();
            Intent skype = packageManager.getLaunchIntentForPackage("com.skype.raider");
            context.startActivity(skype);
        }
    }catch(Exception e){
        Toast msg = Toast.makeText(context,
                "Exception thrown", Toast.LENGTH_LONG);
        msg.show();
    }
} 
```

}

这是我的 AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.wayward.skype.wizard"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".SkypeActivity"
        android:label="@string/title_activity_skype" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <service android:name="com.wayward.service.NotificationScanner" >
        <intent-filter>
            <action android:name="android.accessibilityservice.AccessibilityService" />
        </intent-filter>
    </service>
    <receiver android:name="com.wayward.service.MorningReceiver" >
    </receiver>
</application> 
```

尝试打开 MorningReceiver 时出现此错误：

```
Unable to start service Intent { flg=0x4 cmp=com.wayward.skype.wizard/com.wayward.service.MorningReceiver (has extras) }: not found 
```

有人知道我在这里声明什么错误吗？或者我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:25:21.337

您已声明`MorningReceiver`为 a`Receiver`并尝试将其作为`Service`.

系统试图找到一个`Service`命名`MorningReceiver`和失败，因此错误。

要么将其作为接收者访问，要么将其更改为服务。

如果您以接收者的身份访问它，请使用：

```
PendingIntent pi = PendingIntent.getBroadCast(this.getApplicationContext(), 0, new Intent(this.getApplicationContext(), MorningReceiver.class), PendingIntent.FLAG_UPDATE_CURRENT); 
```

而不是这个：

```
PendingIntent pi = PendingIntent.getService(this.getApplicationContext(), 0, new Intent(this.getApplicationContext(), MorningReceiver.class), PendingIntent.FLAG_UPDATE_CURRENT); 
```

请参阅本教程以全面了解广播接收器：

[http://vogella.com/articles/AndroidBroadcastReceiver/article.html](http://vogella.com/articles/AndroidBroadcastReceiver/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:11:19.423

采用

```
PendingIntent pi = PendingIntent.getBroadCast(this.getApplicationContext(), 0, new Intent(this.getApplicationContext(), MorningReceiver.class), PendingIntent.FLAG_UPDATE_CURRENT); 
```

而不是这个

```
PendingIntent pi = PendingIntent.getService(this.getApplicationContext(), 0, new Intent(this.getApplicationContext(), MorningReceiver.class), PendingIntent.FLAG_UPDATE_CURRENT); 
```

# security - 签名扫描

> ID：13152150
> 
> 赞同：3
> 
> 时间：2012-10-31T06:08:02.813
> 
> 标签：security, signature, malware-detection

许多防病毒程序使用基于签名的恶意软件检测。这是[为 ClamAV 创建签名](http://www.clamav.net/doc/webinars/Webinar-Alain-2009-03-04.pdf)。考虑到整个文件是恶意软件，我可以理解他们如何创建签名，但我不明白如何在文件正文中找到恶意软件 - 哈希将是另一个。有人知道吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T14:58:10.577

**我的回答并非针对 ClamAV；相反，我在一般意义上回答了。**也许这对你有帮助。

首先，病毒签名*不一定*是文件的哈希值。*签名*通常是在文件中找到的一串位，尽管哈希值也可以用作签名。

例如，假设病毒包含比特串`0x23956a58bd910345`。我们可以认为这个字符串是病毒的签名，我们可以在系统的文件中搜索这个签名。*然而，即使我们找到了签名，我们也不能确定我们已经找到了病毒，因为其他无辜的文件可能包含相同的位串。*

有趣的是，如果文件中的位是随机的，那么这种错误匹配的可能性在 1/2^64 时可以忽略不计。[参考](https://engineering.purdue.edu/kak/compsec/NewLectures/Lecture9.pdf)

有许多方法可以为恶意软件检测生成签名和/或特征。[在这里了解更多。](http://www.avgsecurity.co.za/technology-overview)

此外，还有其他检测病毒的方法：
1**异常检测**- 也称为**行为分析**- 跟踪可执行文件的活动，例如：

> *   修改或创建的文件
> *   注册表修改
> *   执行前加载了哪些 DLL
> *   访问的虚拟内存
> *   创建的流程
> *   网络连接打开并传输数据包
> *   恶意软件访问的存储区域、安装的服务和内核驱动程序以及其他信息。
>     [参考](http://0xbadcab1e.lu/papers/analyse.pdf)

2**更改检测**- 意外更改的文件可能表明存在感染。

我们如何检测变化？散列函数在这方面很有用。假设我们计算系统上所有文件的哈希值并安全地存储这些哈希值。然后，我们可以定期重新计算哈希值并将新值与之前存储的值进行比较。如果一个文件在一个或多个位位置发生了变化——就像病毒感染的情况一样——我们会发现新计算的哈希值与之前计算的哈希值不匹配。

变化检测有很多缺点。系统上的文件经常由于正常的系统功能而不是恶意行为而发生变化。因此，变更检测可能会产生许多误报，这给用户和管理员带来了沉重的负担。如果将病毒插入到经常更改的文件中，它很可能会通过更改检测方案。[参考：Mark-Stam 的书籍信息安全]

**而你认为正确的散列机制是检测的弱方法**。
在我的研究工作中，我使用 14 种防病毒工具对 2000 多种真实病毒进行了比较和分类，我发现 ClamAV 在检测病毒方面非常糟糕！这是描述[MOMENTUM](http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=6207739&url=http://ieeexplore.ieee.org/iel5/6203543/6207707/06207739.pdf?arnumber=6207739)的论文的链接。

![图表显示各种反病毒产品的检测率](../Images/9262ed98433f4d37a051841c95e1f0d2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-06T07:46:37.553

该项目是基于控制台用户界面 (CUI) 开发的。它有自己的扫描算法，用于在扫描期间在每个文件中查找恶意代码。核心思想是搜索/匹配所有扫描文件或目录中的病毒特征码。通常，90% 的病毒/蠕虫具有自己的签名（在所有受影响的二进制文件或存档文件中都有一些重复的文本），剩下 10% 的病毒是根据执行行为来识别的。

在这里，我为基于签名的扫描算法编写了代码，因此我将病毒签名存储在单独的数据库中，并以文件平面系统格式组织。主要特点是无需安装即可扫描系统，并允许扫描所有文件类型扩展名，包括隐藏文件和隐藏目录。

请从我的技术博客中找到源代码 - [http://www.algonuts.info/how-to-create-antivirus-using-c-programming.html](http://www.algonuts.info/how-to-create-antivirus-using-c-programming.html)

```
#include<iostream.h>
#include<conio.h>
#include<string.h>
#include<process.h>
#include<io.h>
#include<alloc.h>
#include<dir.h>
#include<ctype.h>

struct ffblk dblist,list;
FILE *temp_p,*dp,*vp;
char *sign =  (char *) malloc(9);

char ch;
unsigned int count,first=0,found=0;
unsigned long int start,udata1,udata2,udata3;

void set_virus_name(char *);
void update_signature(char *,char *,int,int);
void set_data(char *,char *,int);

void main()
{
    clrscr();
    char *vfile = (char *) malloc(40);
    char *dfile = (char *) malloc(40);
    cout<<"\nSystem: Enter the infected filename: ";
    cin>>vfile;

    if(access(vfile,0)!=0)
    {  
        cout<<"\nError : File not exist"; 
        free(sign);  
        free(vfile); 
        free(dfile); 
        getch(); 
        exit(0); 
    }
    strcpy(sign,"LITTLE17"); 

    udata1 = findfirst("*.db",&dblist,0);
    while (!udata1)
    {   
        first=1;
        temp_p= fopen(dblist.ff_name,"r");  
        fread(sign,8,1,temp_p); 
        if(!strcmp(sign,"LITTLE17"));
        update_signature(vfile,dblist.ff_name,1,0);  
        fclose(temp_p);
        udata1=findnext(&dblist);
    }

    if(first==0)
    {
        cout<<"\nSystem: Enter the database name :";
        cin>>dfile;
        udata1=strlen(dfile);
        if(dfile[udata1-3]=='\.'&& (dfile[udata1-2]=='D'||dfile[udata1-2]=='d') &&  (dfile[udata1-1]=='B'||dfile[udata1-1]=='b') )      
        update_signature(vfile,dfile,0,1); 
        else
        { 
            cout<<"\n\nError : Create .DB extension file type"; 
            free(sign); 
            free(vfile); 
            free(dfile); 
            getch(); 
            exit(0);  
        } 
    }
    else
    {
        if(found==0)  
        {   
            cout<<"\nSystem: Enter the database name :";
            cin>>dfile;
            udata1=strlen(dfile);
            if(dfile[udata1-3]=='\.'&& (dfile[udata1-2]=='D'||dfile[udata1-2]=='d') &&  (dfile[udata1-1]=='B'||dfile[udata1-1]=='b') )
            {
                if(!access(dfile,0))
                {   
                    dp = fopen(dfile,"r");  
                    fread(sign,8,1,dp); 
                    fclose(dp);
                    if(!strcmp(sign,"LITTLE17"))
                    update_signature(vfile,dfile,1,1); 
                    else
                    { 
                        cout<<"\n\nError : Database not supported with "<<vfile;  
                        free(sign); 
                        free(vfile); 
                        free(dfile); 
                        exit(0);  
                    }  

                }
                else
                update_signature(vfile,dfile,0,1); 
            }
            else
            {   
                cout<<"\n\nError: Create .DB extension file type"; 
                free(sign);  
                free(vfile); 
                free(dfile); 
                exit(0); 
            }  

        }
    } 
    free(sign);
    free(vfile); 
    free(dfile); 
    getch();
}

void update_signature(char *vfile,char *dfile,int check,int add)
{       
    if(check==1)
    {   
        char *temp = (char *) malloc(strlen(dfile)+1);
        strcpy(temp,dfile);
        char *turn = (char *) malloc(40+2+400+1);   

        dp = fopen(dfile,"r");
        fread(sign,8,1,dp); 
        fread(&start,sizeof(start),1,dp);
        while(1)
        {  
            udata1=0;     
            while(1)
            {
                ch=fgetc(dp);
                if(ch!=0 && ch!=32 && ch!='\n' && ch!='\t')
                {
                    if(ch==20)
                    udata2=udata1;
                    if(ch!=22)                  
                    {   
                        turn[udata1]=ch; 
                        udata1=udata1+1;
                        continue; 
                    }
                    else
                    break;
                }
            }  
            turn[udata1]='\0';
            udata2=udata2+1;
            udata3=udata2;

            count=0;
            udata1=0; 
            udata2=udata3;
            vp=fopen(vfile,"r");
            findfirst(vfile,&list,0);
            while(udata1<list.ff_fsize)
            {

                fseek(vp,udata1,SEEK_SET);
                ch=fgetc(vp);
                if(ch!=0 && ch!=32 && ch!='\n' && ch!='\t' && ch!= 20 && ch!= 22)
                {
                    if(ch!=turn[udata2])
                    {   
                        if(count>=2)
                        udata1=udata1-count;
                        count=0;
                        udata2=udata3;
                    }
                    else
                    {   
                        count=count+1;
                        udata2=udata2+1;
                        if(turn[udata2]==0)
                        {   

                            cout<<"\n\n\nError : Unsuccessfully ! ";
                            cout<<"\n\nError : Virus were Already added on "<<temp;  
                            cout<<"  [ ";
                            udata3--;
                            for(count=0;count<udata3;count++)
                            {
                                if(turn[count]!=32)
                                cout<<turn[count];
                                else
                                cout<<" ";                                  
                            }
                            cout<<" ]";
                            found=1; 
                            break; 
                        }           
                    }
                }                   
                fflush(vp);
                udata1=udata1+1;

            }
            fclose(vp);

            if(found==1)
            break;
            ch=fread(&start,sizeof(start),1,dp);
            if((ch+1)==1)
            break;
        }
        fclose(dp);
        free(temp);
        free(turn);

        if(found==0&&add==1)
        {
            set_data(vfile,dfile,check);   
        }                   
    }
    else
    {       
        set_data(vfile,dfile,check);    
    }                       
}

void set_data(char *vfile,char *dfile,int check)
{
    char *temp = (char *) malloc(40);
    cout<<"\n\nSystem: Set the name of virus :";
    gets(temp);
    cout<<"\nEnter first index :";
    cin>>udata1;
    start=udata1;
    cout<<"\nEnter last  index :";
    cin>>udata2;
    char *vdata = (char *) malloc((udata2-udata1)+2+2+2+1); 
    vdata[0]=20;
    udata3=1;

    vp=fopen(vfile,"r");
    while(udata1<=udata2)
    {   
        fseek(vp,udata1,SEEK_SET);
        ch=getc(vp);
        cout<<udata1<<" "<<ch<<"\n";
        if(ch!=0 && ch!=32 && ch!='\n' && ch!='\t' && ch!=20 && ch!=22)
        {
            vdata[udata3]=ch;
            udata3=udata3+1;    
            vdata[udata3]='\0';             
        }
        udata1=udata1+1;
    }
    fclose(vp);
    vdata[udata3+1]='\0';
    vdata[udata3]=22;

    dp=fopen(dfile,"a+"); 
    if(check==0)
    fwrite(sign,8,1,dp);
    fwrite(&start,sizeof(start),1,dp);
    fwrite(temp,strlen(temp),1,dp);
    free(temp);
    fwrite(vdata,strlen(vdata),1,dp);
    free(vdata);
    fclose(dp);
    cout<<"\n\nSystem: Successfully Added on "<<dfile;
} 
```

# yii - 在帖子yii中添加评论

> ID：13152152
> 
> 赞同：0
> 
> 时间：2012-10-31T06:08:03.080
> 
> 标签：yii

我正在尝试在我的博客网站中添加评论模块。我所做的是：

否 1`<div>`在博客文章 view.php 中添加一个以呈现 tblcomments/_form

```
<?php 

        $model_comments = new TblComments;

   $this->renderPartial('/TblComments/_form',array(
            'comments'=>$model_comments,
        ));

 ?> 
```

第 2 号：这是我的 TblComments/_form.php

<

```
div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'tbl-comments-form',
    'enableAjaxValidation'=>false,
)); ?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <?php echo $form->errorSummary($model_comments); ?>

    <div class="row">
        <?php // echo $form->labelEx($model,'user_id'); ?>
        <?php echo $form->hiddenField($model_comments,'user_id'); ?>
        <?php echo $form->error($model_comments,'user_id'); ?>
    </div>

    <div class="row">
        <?php // echo $form->labelEx($model,'post_id'); ?>
        <?php echo $form->hiddenField($model_comments,'post_id'); ?>
        <?php echo $form->error($model_comments,'post_id'); ?>
    </div>
    <div class="row">
        <?php echo $form->labelEx($model_comments,'comment_body'); ?>
        <?php echo $form->textArea($model_comments,'comment_body',array('rows'=>5,'cols'=>35)); ?>
        <?php echo $form->error($model_comments,'comment_body'); ?>
    </div>
    <div class="row buttons">
        <?php echo CHtml::submitButton($model_comments->isNewRecord ? 'Create' : 'Save'); ?>
    </div>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

问题是：

```
Undefined variable: model_comments 
```

PS：这个错误发生在 TblComments/_form 文件上：

```
<?php echo $form->errorSummary($model_comments); ?> 
```

谁能解释我为什么这个未定义，因为我已经定义了它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:39:34.697

我只是添加

```
 $model_comments =  new TblComments(); 
```

在 TblComments/_form.php

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:24:46.263

这是一个小错误，当你这样做时：

```
$this->renderPartial('/TblComments/_form',array(
    'comments'=>$model_comments,
));
// or even if you are using render() 
```

传递给模型实例的视图将其作为`$comments`而不是`$model_comments`，这意味着如果您这样做：

```
$this->render('someview', array('model_there'=>$model_here)); 
```

视图必须使用`$model_there`而不是`$model_here`。如[指南中所述](http://www.yiiframework.com/doc/guide/1.1/en/basics.view "http://www.yiiframework.com/doc/guide/1.1/en/basics.view")：

> render() 方法会将第二个数组参数提取到变量中。因此，在视图脚本中，我们可以访问局部变量 $var1 和 $var2。

* * *

也就是说，您应该将实例创建移动到控制器，然后将其传递给您的视图：

```
// controller action
public function actionActionname($id){
    $model_here = new TblComments;
    $postmodel = loadModel($id);
    // ...
    $this->render('view', array(
        'postmodel'=>$postmodel,
        'model_there'=>$model_here
    ));
}

// in view.php
$this->renderPartial('/TblComments/_form', array(
    'model_there'=>$model_there
);

// then in _form you use $model_there
<?php echo $form->errorSummary($model_there); ?> 
```

# android - 启动模拟器的异常

> ID：13152157
> 
> 赞同：0
> 
> 时间：2012-10-31T06:08:15.900
> 
> 标签：android, eclipse, android-emulator

昨天我安装了 ADT 20 并更新了 SDK，它运行良好但我不知道如何，今天当我创建一个新项目并启动模拟器时，它只是没有启动并抛出这个异常：--

```
[2012-10-31 12:01:24 - TicTacToe] ------------------------------
[2012-10-31 12:01:24 - TicTacToe] Android Launch!
[2012-10-31 12:01:24 - TicTacToe] adb is running normally.
[2012-10-31 12:01:24 - TicTacToe] Performing com.example.tictactoe.MainActivity activity launch
[2012-10-31 12:01:24 - TicTacToe] Automatic Target Mode: launching new emulator with compatible AVD 'Tester_2.1.1'
[2012-10-31 12:01:24 - TicTacToe] Launching a new emulator with Virtual Device 'Tester_2.1.1'
[2012-10-31 12:01:24 - Emulator] emulator: ERROR: partition-size (2048) must be between 10MB and 2047MB 
```

我不明白为什么它会抛出这个错误。我已经将我的分区大小设置为 1024 那么为什么会抛出这个异常？

如果我运行旧项目，它会启动模拟器，但新项目不会，为什么？你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:37:51.873

从你的例外

```
[2012-10-31 12:01:24 - Emulator] emulator: ERROR: partition-size (2048) must be between 10MB and 2047MB 
```

所以编辑你的模拟器图像并设置分区 1024 MB

尝试 256 或更少。并设置复选框清除用户数据

尝试设置为： ![在此处输入图像描述](../Images/2f9b297a0cdaa3a5df46b8190af5c7c0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:56:19.530

将硬件 > 缓存分区大小值设置在 10 MB 到 2047 MB​​ 之间，它将解决您的问题，有关更多信息，请参见下面的链接。

[使用 AVD Manager 管理 AVD](http://developer.android.com/tools/devices/managing-avds.html)

# ruby - 如何在 Ruby 中对类实例的相同性/相等性进行单元测试？

> ID：13152158
> 
> 赞同：4
> 
> 时间：2012-10-31T06:08:19.053
> 
> 标签：ruby, unit-testing, class, instance-variables

我正在尝试对 Ruby 中一个类的两个实例的相同性进行单元测试：

```
def test_example
    a = Object.new
    b = Object.new

    assert_equal a, b
end 
```

我知道这会失败，因为实例是不同的变量，每个变量都有自己的内存指针。如果实例在所有方面都相同但它们的引用指针相同，我所追求的是让这个测试通过。

这是一个更复杂的（如果是人为的）示例：

```
# Let's stir up something...
class FooBar
    attr_accessor :seed, :foo, :bar

    def foo_the_bar()
        @bar = @seed + @foo * 3
    end
end

f = FooBar.new
f.seed = "Mountains "
f.foo  = "are just mountains "
f.bar = "obliterate me!"
f.foo_the_bar
p f.bar # "Mountains are just mountains are just mountains are just mountains "

# So far so good, now let's test if one FooBar is same as another...

require 'test/unit'
class FooBarTest < Test::Unit::TestCase

    # Test fails: <#<FooBar:0x9a40d18>> expected but was <#<FooBar:0x9a40d04>>.
    # But what we really want is a way to make this pass
    # since the objects are exactly the same in every respect,
    # besides their pointers.
    def test_foobar_1_init
        f1 = FooBar.new
        f2 = FooBar.new

        assert_equal f1, f2
    end

    # Again, test fails, but we want it to pass,
    # since the instance variables are the same.
    def test_foobar_2_instance_var
        f1 = FooBar.new
        f2 = FooBar.new

        f1.seed = "Santa says "
        f1.foo = "ho "
        f1.bar = "something"
        f1.foo_the_bar

        f2.seed = f1.seed
        f2.foo = f1.foo
        f2.foo_the_bar

        assert_equal f1, f2
    end

    # This test fails for the wrong reason.
    # We want this to fail because the instance variables are different.
    # This test should also fail if we add a method to one of the instances,
    # or make the instances differ from each some other way.
    def test_foobar_3_diff
        f1 = FooBar.new
        f2 = FooBar.new

        f1.seed = "Kitty goes "
        f1.foo = "meow "
        f1.foo_the_bar

        f2.seed = "Doggies goes "
        f2.foo = "woof "
        f2.foo_the_bar

        assert_equal f1, f2
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:23:01.873

```
f1.attributes.keys.collect(&:to_sym).each do |field|
 assert_equal f1.send(field), f2.send(field)
end 
```

这将断言所有字段的相等性。但缺点是断言的数量。如果您不希望这种情况发生，请像这样为对象分配 ID

```
f1.id = 1
f2.id = 1 
assert_equal f1, f2 
```

但请务必不要保存可能导致不一致的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:51:49.630

只需定义`FooBar#==`方法：

```
class FooBar
  def ==(other)
    [bar, seed, foo] == [other.bar, other.seed, other.foo]
  end
end 
```

现在`test_foobar_1_init`并`test_foobar_2_instance_var`通过，`test_foobar_3_diff`由于正确的原因而失败。

缺点是当您更改对象结构时，`==`需要相应地修改方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T08:40:19.613

根据 apidock 的来源， [assert_equals](http://apidock.com/ruby/Test/Unit/Assertions/assert_equal)首先使用方法将对象转换为字符串`inspect`。您应该定义检查方法`class FooBar`

```
class FooBar
  def inspect
    # create a unique string of attributes here, maybe a json string.
  end
end 
```

# hsqldb - HSQLDB将文本表文件导入传统表

> ID：13152162
> 
> 赞同：0
> 
> 时间：2012-10-31T06:08:36.107
> 
> 标签：hsqldb, bulkinsert

我有两个相同的表结构

1.  缓存表（普通表）
2.  文本表 (textfiletable)

**我想将数据从表 [2] 复制到表 [1]**

我正在使用这种插入语法

```
INSERT INTO normaltable ("COL1", "COL2", "COL3")
SELECT COL1, COL2, COL3
FROM textfiletable; 
```

我得到这个错误

```
data exception:string data, right truncation/Error code: -3401/state: 22001 
```

使用另一种插入语法时

```
SELECT COL1, COL2, COL3
INTO normaltable
FROM textfiletable; 
```

我得到这个错误

```
unexpected token : INTO required: FROM:line:2/error code: -5581/state:42581 
```

谁能解释一下？

* * *

我更新了我的脚本的详细信息供您参考：

```
drop table pis_mdc;
drop table normaltable;
drop table textfiletable;

--- original table
CREATE TABLE PIS_MDC
(UD_MDC_CODE VARCHAR(25) ,
DRUG_GNR_NAME VARCHAR(200)DEFAULT 'NULL',
DRUG_PRODUCT_NAME VARCHAR(100),
UD_MDC_DESC VARCHAR(200)DEFAULT 'NULL',
ACTIVE_INGREDIENT_CODE VARCHAR(600),
DEF_CAUTIONARY_CODE VARCHAR(200),
DOSAGE_FORM_CODE VARCHAR(100)DEFAULT 'NULL',
DEF_DOSAGE VARCHAR(20),
DEF_ROUTE_CODE VARCHAR(100)DEFAULT 'NULL',
DEF_ADVISORY_CODE VARCHAR(200)DEFAULT 'NULL',
UD_ATC_CODE VARCHAR(15) ,
STATUS VARCHAR(20),
DRUG_STRENGTH VARCHAR(20),
PRIMARY KEY(UD_MDC_CODE,UD_ATC_CODE));

--create cached tbl
create cached table normaltable
(UD_MDC_CODE VARCHAR(25) ,
DRUG_GNR_NAME VARCHAR(100)DEFAULT 'NULL',
DRUG_PRODUCT_NAME VARCHAR(200),
UD_MDC_DESC VARCHAR(200)DEFAULT 'NULL',
ACTIVE_INGREDIENT_CODE  VARCHAR(600),
DEF_CAUTIONARY_CODE VARCHAR(200),
DOSAGE_FORM_CODE VARCHAR(100)DEFAULT 'NULL',
DEF_DOSAGE VARCHAR (20),
DEF_ROUTE_CODE VARCHAR(100)DEFAULT 'NULL',
DEF_ADVISORY_CODE VARCHAR(200)DEFAULT 'NULL',
UD_ATC_CODE VARCHAR(15) ,
STATUS VARCHAR(20),
DRUG_STRENGTH VARCHAR(20));

--create the table that table
create text table textfiletable 
(UD_MDC_CODE VARCHAR(25) ,
DRUG_GNR_NAME VARCHAR(100)DEFAULT 'NULL',
DRUG_PRODUCT_NAME VARCHAR(200),
UD_MDC_DESC VARCHAR(200)DEFAULT 'NULL',
ACTIVE_INGREDIENT_CODE VARCHAR(600),
DEF_CAUTIONARY_CODE VARCHAR(200),
DOSAGE_FORM_CODE VARCHAR(100)DEFAULT 'NULL',
DEF_DOSAGE VARCHAR (20),
DEF_ROUTE_CODE VARCHAR(100)DEFAULT 'NULL',
DEF_ADVISORY_CODE VARCHAR(200)DEFAULT 'NULL',
UD_ATC_CODE VARCHAR(15) ,
STATUS VARCHAR(20),
DRUG_STRENGTH VARCHAR(20));

--SET TABLE textfiletable SOURCE ON

SET TABLE textfiletable SOURCE "gabung.csv;ignore_first=true"

--OPTION 0 line 1 with quotes without MAX(CHAR_LENGTH())
INSERT INTO normaltable ("UD_MDC_CODE","DRUG_GNR_NAME","DRUG_PRODUCT_NAME","UD_MDC_DESC","ACTIVE_INGREDIENT_CODE","DEF_CAUTIONARY_CODE","DOSAGE_FORM_CODE","DEF_DOSAGE","DEF_ROUTE_CODE","DEF_ADVISORY_CODE","UD_ATC_CODE","STATUS","DRUG_STRENGTH") 
select UD_MDC_CODE,DRUG_GNR_NAME,DRUG_PRODUCT_NAME,UD_MDC_DESC,ACTIVE_INGREDIENT_CODE,DEF_CAUTIONARY_CODE,DOSAGE_FORM_CODE,DEF_DOSAGE,DEF_ROUTE_CODE,DEF_ADVISORY_CODE,UD_ATC_CODE,STATUS,DRUG_STRENGTH 
from textfiletable;

-- OPTION 1 line 1 without quotes
--SELECT MAX(CHAR_LENGTH(COL1)), MAX(CHAR_LENGTH(COL2)), ... FROM textfiletable 
--INSERT INTO normaltable ("UD_MDC_CODE","DRUG_GNR_NAME","DRUG_PRODUCT_NAME","UD_MDC_DESC","ACTIVE_INGREDIENT_CODE","DEF_CAUTIONARY_CODE","DOSAGE_FORM_CODE","DEF_DOSAGE","DEF_ROUTE_CODE","DEF_ADVISORY_CODE","UD_ATC_CODE","STATUS","DRUG_STRENGTH")
INSERT INTO normaltable (UD_MDC_CODE,DRUG_GNR_NAME,DRUG_PRODUCT_NAME,UD_MDC_DESC,ACTIVE_INGREDIENT_CODE,DEF_CAUTIONARY_CODE,DOSAGE_FORM_CODE,DEF_DOSAGE,DEF_ROUTE_CODE,DEF_ADVISORY_CODE,UD_ATC_CODE,STATUS,DRUG_STRENGTH)
SELECT MAX(CHAR_LENGTH(UD_MDC_CODE)),MAX(CHAR_LENGTH(DRUG_GNR_NAME)),MAX(CHAR_LENGTH(DRUG_PRODUCT_NAME)),MAX(CHAR_LENGTH(UD_MDC_DESC)),MAX(CHAR_LENGTH(ACTIVE_INGREDIENT_CODE)),MAX(CHAR_LENGTH(DEF_CAUTIONARY_CODE)),MAX(CHAR_LENGTH(DOSAGE_FORM_CODE)),MAX(CHAR_LENGTH(DEF_DOSAGE)),MAX(CHAR_LENGTH(DEF_ROUTE_CODE)),MAX(CHAR_LENGTH(DEF_ADVISORY_CODE)),MAX(CHAR_LENGTH(UD_ATC_CODE)),MAX(CHAR_LENGTH(STATUS)),MAX(CHAR_LENGTH(DRUG_STRENGTH))
FROM textfiletable
--ORDER BY UD_MDC_CODE DESC;

--we are done with the text file table
DROP TABLE  textfiletable;
COMMIT; 
```

文本文件表中要复制/插入到普通表中的数据示例列表 [https://docs.google.com/open?id=0B-7fkDVcLbxnclBZZDZRQWg4ZEE](https://docs.google.com/open?id=0B-7fkDVcLbxnclBZZDZRQWg4ZEE)

使用 max(char_length(col_name)) 的结果示例 [https://docs.google.com/open?id=0B-7fkDVcLbxnREpzNUp3d3NNSlE](https://docs.google.com/open?id=0B-7fkDVcLbxnREpzNUp3d3NNSlE)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:57:00.947

该`unexpected token`错误是语法错误。这意味着 2.x 版本不支持此语法。

该`data exception`错误意味着存储在 TEXT 表中的某些字符串太大而无法插入到 CACHED 表中的字段中。尝试查询，例如：

```
SELECT MAX(CHAR_LENGTH(UD_MDC_CODE)), MAX(CHAR_LENGTH(DRUG_GNR_NAME)), MAX(CHAR_LENGTH(DRUG_PRODUCT_NAME)) FROM textfiletable 
```

查看结果并将最大长度与`normaltable`. 例如，如果 UD_MDC_CODE 的 MAX 值为 29，那么您必须使该列更大。这可以使用以下语句来完成，该语句将列的大小更改为 30：

```
ALTER TABLE normaltable ALTER COLUMN UD_MDC_CODE SET DATA TYPE VARCHAR(30) 
```

仅对大小小于 MAX 值的列使用 ALTER TABLE 语句。对所有太小的列执行此操作后，使用 INSERT INTO 语句将数据从 TEXT 表复制到 CACHED 表。ALTER TABLE 语句记录在这里：

[http://hsqldb.org/doc/2.0/guide/databaseobjects-chapt.html#dbc_table_manupulation](http://hsqldb.org/doc/2.0/guide/databaseobjects-chapt.html#dbc_table_manupulation)

# knockout-2.0 - knockoutjs foreach 别名不起作用

> ID：13152166
> 
> 赞同：1
> 
> 时间：2012-10-31T06:08:55.900
> 
> 标签：knockout-2.0

knockoutjs foreach 别名不起作用，如页面下方的[knockoutjs 文档中所述：](http://knockoutjs.com/documentation/foreach-binding.html)

`Note 3: Using “as” to give an alias to “foreach” items`

这是一个显示错误的简单[jsFiddle 。](http://jsfiddle.net/Zvhzf/)控制台说虽然我遵循了 knockoutjs 示例，但没有定义别名...

HTML

```
<h3>This works</h3>
<ul data-bind="foreach: people">
    <li>
        <span data-bind="text: $data.name"></span> 
        <span data-bind="text: $data.age"></span>
    </li>
</ul>

<h3>This doesn't work</h3>
<ul data-bind="foreach: { data: people, as: 'person' }">
    <li>
        <span data-bind="text: person.name"></span> 
        <span data-bind="text: person.age"></span>
    </li>
</ul>​ 
```

JS

```
var data = [
    { name: 'Bob', age: 35 },
    { name: 'Sue', age: 24 },
    { name: 'Rick', age: 57 }
];

var model = function( data ){
    this.people = ko.observableArray( data );
}
ko.applyBindings( new model( data ) );​ 
```

我只是不理解这个例子并且做错了什么吗？众所周知，这会发生，大声笑...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T07:41:09.263

升级到淘汰赛 2.2.0 就可以了。[在这里](http://jsfiddle.net/JkyWy/)升级小提琴。

您的绑定很好 - 保持原样：

```
<h3>This works</h3>
<ul data-bind="foreach: people">
    <li>
        <span data-bind="text: $data.name"></span> 
        <span data-bind="text: $data.age"></span>
    </li>
</ul>

<h3>This doesn't work</h3>
<ul data-bind="foreach: { data: people, as: 'person' }">
    <li>
        <span data-bind="text: person.name"></span> 
        <span data-bind="text: person.age"></span>
    </li>
</ul>​ 
```

# javascript - 使用保存在 iOS 应用程序的沙箱（文档目录）中的 .html、.js 文件，这样我也可以在离线模式下打开 html 文件

> ID：13152170
> 
> 赞同：2
> 
> 时间：2012-10-31T06:09:23.247
> 
> 标签：javascript, html, ios, uiwebview

我必须显示一个需要 highcharts.js、jquery.min.js 的 .html 文件才能显示图表。我打算在 UIWebView 中显示 .html 文件。

我看到当文件（即 html、highcharts.js、jquery.min）在 Application Bundle 中时，我可以像这样使用它们——

`aPath = [[NSBundle mainBundle] pathForResource:@"htmlfile" ofType:@"html"]; [self.graphWebView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:aPath isDirectory:NO]]];`

在这里，“htmlFile”的来源是这样的 -

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>TITLE</title>

<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="highcharts.js"></script>
<script type="text/javascript" src="htmlfile.js"></script>
<script type="text/javascript" src="global.js"></script>
</head>
<body>
<div id="wrapper">

<div id="container"></div>    
</div>
</body>
</html> 
```

因此，为了在 UIWebView 中显示内容，我只需要在 Xcode 的 Build Phases 选项卡中将 .html 文件和 .js 文件制作为**Bundle Resources 。**

**问题：**

保存在 App 沙盒中的 .html 文件如何显示如上图所示的源文件？

**我试过了：**

**1.**我在App SandBox中创建了一个这样的文件夹--

> NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) ;
> 
> NSString *aFolderPath = [(NSString* )[paths objectAtIndex:0] stringByAppendingFormat:@"/%@",@"folder"];
> 
> ```
> if(![[NSFileManager defaultManager] isWritableFileAtPath:aFolderPath]){ 
> ```
> 
> [[NSFileManager defaultManager]createDirectoryAtPath:aFolderPath withIntermediateDirectories:NO attributes:nil error:nil]; }

**2.**然后我像这样从App Bundle中复制了App SandBox中的html，js文件--

> NSString *aJs = [[NSBundle mainBundle] pathForResource:@"JSFile" ofType:@"js"];
> 
> ```
> aJs = [NSString stringWithContentsOfFile:aGlobaljs encoding:NSUTF8StringEncoding error:nil];
> 
> NSString *aPath = [(NSString*)[paths objectAtIndex:0] stringByAppendingFormat:@"/folder/%@",@"JSFile.js"];
> 
> [aJs writeToFile:aPath atomically:YES encoding:NSUTF8StringEncoding error:nil]; 
> ```

现在所有需要的文件都在名为“文件夹”的沙盒文件夹中，所以，我尝试像这样在 UIWebView 中打开保存的 html 文件——

> [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:pathToHtmlFileinDocumentsDic relativeToURL:[NSURL URLWithString:aFolderPath]]]];

**这不起作用。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:55:06.113

您必须将文件保存在您的应用程序资源中，这里的技巧是保持 JavaScript 文件与 HTML 文件的相对链接。添加 html 包时，选择“为任何添加的文件夹创建文件夹引用”。并在代码中像这样调用您的 html 页面：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"index" ofType:@"html" inDirectory:@"Help"];

  NSURL *indexUrl = [NSURL fileURLWithPath:filePath]; 
```

您的所有 Html 页面（包括`css`、`images`、`js`）都在 Help（或您拥有的任何其他名称）文件夹中。即，它就像在文件夹内维护一个本地静态站点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-10T09:52:41.657

您可以在本地启动 http 服务器（例如通过`https://github.com/robbiehanson/CocoaHTTPServer`）并设置`/<appPath>/Documents/yourFolder`为服务器根。然后你可以`UIWebView` `NSURL`像这样打开：`http://localhost:8080/index.html`

# algorithm - 查找一个节点是否可以从另一个节点到达的算法

> ID：13152171
> 
> 赞同：1
> 
> 时间：2012-10-31T06:09:28.520
> 
> 标签：algorithm, data-structures, graph, social-networking

我有一个包含数百万个节点的大图。我想检查节点“A”是否可以从节点“B”以少于 4 个跃点到达。如果可能的话，我想要最短的路径。解决此问题的最佳方法（或算法）是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T14:12:15.073

请注意，如果图表未加权（如您的问题所示） - 一个简单有效的[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)将足以找到从源到目标的最短路径。

此外，由于您有一个源和一个*目标*- 您可以应用**[双向 BFS](http://en.wikipedia.org/wiki/Bidirectional_search)**，这比 BFS 更有效。

**算法思想：**从源和目标同时进行 BFS 搜索：[BFS 直到两者的深度 1，直到两者的深度 2，......]。
当你找到一个顶点 v 时，算法将结束，它位于 BFS 的前面。

**算法行为**：终止算法运行的顶点 v 将恰好位于源和目标之间的中间。
在大多数情况下，该算法将产生比源代码中的 BFS 更好的结果[解释为什么它比 BFS 更好]，并且如果存在，肯定会提供答案。

**为什么从源头上比 BFS 更好？**
假设源到目标的距离为`k`，分支因子为`B`[每个顶点都有 B 条边]。
BFS 将打开：`1 + B + B^2 + ... + B^k`顶点。
双向 BFS 将打开：`2 + 2B^2 + 2B^3 + .. + 2B^(k/2)`顶点。

对于大的 B 和 k，第二个显然比第一个好得多。

* * *

（*）双向搜索的解释取自[我发布的另一个答案](https://stackoverflow.com/a/7220294/572670)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T06:19:08.707

在您没有关于一个节点接近目标的可能性的额外信息的图中，找到两个节点之间最短路径的最佳算法是[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)。您可以轻松地修改此算法以在 3 跳后退出，以避免在您不感兴趣的结果上浪费计算。

如果您确实有一些关于给定节点接近目标的可能性的额外信息，您可以使用[A* search](http://en.wikipedia.org/wiki/A%2a_search_algorithm)，它使用节点到目标距离的启发式算法来提高其运行时性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T13:24:52.210

如果您需要少于 3 跳的路径，那么所有可能的路径是 A（A=B）、AB（节点相邻）、AXB（X 是与两端相邻的节点）。所以不需要任何复杂的算法。首先，测试 A=B，第二，测试 A 和 B 是否相邻，第三，尝试找到与 A 和 B 都相邻的 X（例如端点邻接集的交集）。

# iphone - dateFromString 在 iOS 6 中无法正常工作

> ID：13152172
> 
> 赞同：1
> 
> 时间：2012-10-31T06:09:34.780
> 
> 标签：iphone, nsstring, ios6, nsdate

此代码在 iOS 5 中有效，但在 iOS 6 中返回错误年份。知道为什么吗？

```
NSCalendar *gregorian=[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSLocale *locale=[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
    NSDateFormatter *dateFormatter=[[NSDateFormatter alloc] init];
    [dateFormatter setCalendar: gregorian];
    [dateFormatter setLocale: locale];
    [dateFormatter setDateFormat:@"yyyy"];

    NSDate* date=[dateFormatter dateFromString:[NSString stringWithFormat:@"9000"]];

    NSLog(@"Date: %@", [dateFormatter stringFromDate:date]);

    [gregorian release];
    [locale release];
    [dateFormatter release]; 
```

以上在 iOS 5 中生成日期 9000，在 iOS 6 中生成日期 2000！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:33:44.783

我通过用 NSISO8601Calendar 替换 NSGregorianCalendar 解决了这个问题：

```
NSCalendar *gregorian=[[NSCalendar alloc] initWithCalendarIdentifier: NSISO8601Calendar]; 
```

这行得通，但如果我知道原因，我会感觉更好。有人知道 NSGregorianCalendar 和 NSISO8601Calendar 之间的区别吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T06:37:26.433

它看起来像Apple在IOS 6中添加了“自己的Maya日历”我在文档中找不到关于它的东西，但我自己尝试了一下，它看起来像在3512年后自动设置情人年，如2013年（是3513年），2014年（如果是 3514) 等。

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
NSDateFormatter *dateFormatter = [NSDateFormatter new];
[dateFormatter setCalendar:gregorian];
[dateFormatter setLocale:locale];
[dateFormatter setDateFormat:@"yyyy"];

NSDate* date = [dateFormatter dateFromString:@"3512"];

NSLog(@"Date: %@", [dateFormatter stringFromDate:date]); 
```

# mysql - MySql 检查 NOW() 是否在工作日/时间范围内

> ID：13152175
> 
> 赞同：0
> 
> 时间：2012-10-31T06:09:46.757
> 
> 标签：mysql, time, range

我有一张如下表：

```
CREATE TABLE `zonetimes` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `zone_id` int(10) unsigned NOT NULL,
  `active_from_day` tinyint(1) unsigned NOT NULL DEFAULT '2',
  `active_to_day` tinyint(1) unsigned NOT NULL DEFAULT '2',
  `active_from` time NOT NULL,
  `active_to` time NOT NULL
  PRIMARY KEY (`id`)
) ENGINE=MyISAM ; 
```

因此，用户可以添加从特定日期和时间开始到特定日期和时间结束的时间条目，例如：在星期一 08:00 和星期五 18:00 之间或星期四 15:00 和星期二 15:00 之间（注周末的交叉）。

我需要查询这些数据并确定一个区域当前是否处于活动状态（NOW()、DAYOFWEEK() 等）......这变得非常棘手。

如果我没有重叠，例如：从“周三晚上 8 点到周二凌晨 4 点”或从“周四下午 4 点到周二下午 4 点”，使用 BETWEEN 会很容易。

此外，需要允许用户添加整个星期，例如：星期一早上 8 点 - 星期一早上 8 点（这应该很容易，例如： where (active_from_day=active_to_day AND active_from=active_to) OR ..

有任何想法吗？

*注意：我在这里发现了一个类似的问题[Timespan - Check for weekday and time in mysql](https://stackoverflow.com/questions/9166334/timespan-check-for-weekday-and-time-of-day-in-mysql)但没有得到答案。其中一个建议是将每一天存储为单独的行。不过，我宁愿将一个时间跨度存储多天。*

## 更新

Terje D 下面的查询完美地工作。一些测试场景：

```
+---------------------+-----------------+---------------+-------------+-----------+------------+
| NOW( )              | active_from_day | active_to_day | active_from | active_to | active_now |
+---------------------+-----------------+---------------+-------------+-----------+------------+
| 2012-10-31 23:41:55 |               1 |             4 | 08:00:00    | 23:40:00  |          0 |
| 2012-10-31 23:42:25 |               1 |             4 | 08:00:00    | 23:45:00  |          1 |
| 2012-10-31 23:42:57 |               4 |             1 | 08:00:00    | 09:45:00  |          1 |
| 2012-10-31 23:43:36 |               4 |             4 | 23:00:00    | 09:45:00  |          1 |
| 2012-10-31 23:44:10 |               5 |             4 | 00:00:00    | 23:44:00  |          0 |
| 2012-10-31 23:44:27 |               5 |             4 | 00:00:00    | 23:45:00  |          1 |
| 2012-10-31 23:45:14 |               2 |             2 | 00:00:00    | 00:00:00  |          0 | 
```

上面的结果是通过运行 Terje 的查询几次生成的：

```
SELECT NOW( ) , active_from_day, active_to_day, active_from, active_to, (
DAYOFWEEK( NOW( ) ) > active_from_day
OR DAYOFWEEK( NOW( ) ) = active_from_day
AND TIME( NOW( ) ) > active_from
)
AND (
DAYOFWEEK( NOW( ) ) < active_to_day
OR DAYOFWEEK( NOW( ) ) = active_to_day
AND TIME( NOW( ) ) < active_to
)
OR (
active_from_day > active_to_day
OR active_from_day = active_to_day
AND active_from > active_to
)
AND (
(
DAYOFWEEK( NOW( ) ) > active_from_day
OR DAYOFWEEK( NOW( ) ) = active_from_day
AND TIME( NOW( ) ) > active_from
)
OR (
DAYOFWEEK( NOW( ) ) < active_to_day
OR DAYOFWEEK( NOW( ) ) = active_to_day
AND TIME( NOW( ) ) < active_to
)
) AS active_now FROM zonetimes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:40:19.753

这个逻辑应该有效：

```
IF active_to >= active_from AND NOW() BETWEEN active_from AND active_to
OR active_to < active_from AND NOW NOT BETWEEN active_to AND active_from 
```

IE

```
IF (DAYOFWEEK(NOW()) > active_from_day 
   OR DAYOFWEEK(NOW()) = active_from_day AND TIME(NOW()) > active_from)
AND (DAYOFWEEK(NOW()) < active_to_day
   OR DAYOFWEEK(NOW()) = active_to_day AND TIME(NOW()) < active_to)
OR (active_from_day > active_to_day 
   OR active_from_day = active_to_day AND active_from > active_to)
AND ((DAYOFWEEK(NOW()) > active_from_day 
   OR DAYOFWEEK(NOW()) = active_from_day AND TIME(NOW()) > active_from)
OR (DAYOFWEEK(NOW()) < active_to_day
   OR DAYOFWEEK(NOW()) = active_to_day AND TIME(NOW()) < active_to)) 
```

（如果时间在 start 之后和 end 之前，或者如果 start > end 并且时间在 start 之后或 end 之前，则区域处于活动状态）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:59:39.270

**废弃这个，看看 Terje D 的答案。**

使用 Skpd 的想法的一种可能的方法（导致查询混乱）：

我创建了一个开始日期（周一到周日的小整数 0 到 6），然后是一个开始时间（从午夜开始的整数分钟）和一个范围（整数分钟）。因此，区域处于活动状态的时间段介于 (day_of_week+start) 和 (day_of_week+start + range) 之间。我很确定有一种更优雅的方法，但我认为它适用于所有组合。并将存储量降至最低

```
CREATE TABLE `azonetimes` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `zone_id` int(10) unsigned NOT NULL,
  `day_of_week` tinyint(1) unsigned NOT NULL DEFAULT '2',
  `start` int(11) unsigned NOT NULL DEFAULT '0',
  `range` int(11) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM ; 
```

查询：（周三上午 07:50）

```
 SELECT 
        azonetimes.*, (
            NOW() 
            #Check for last week
            BETWEEN     
                        (FROM_UNIXTIME(UNIX_TIMESTAMP(DATE(CURDATE() - INTERVAL WEEKDAY( CURDATE() ) - CAST(azonetimes.day_of_week AS SIGNED INT) +
                        IF( WEEKDAY( CURDATE() ) >  CAST(azonetimes.day_of_week AS SIGNED INT), 0, 7 ) - 7 DAY )) + `start`*60) )
                    AND (FROM_UNIXTIME(UNIX_TIMESTAMP(DATE(CURDATE() - INTERVAL WEEKDAY( CURDATE() ) - CAST(azonetimes.day_of_week AS SIGNED INT) +
                        IF( WEEKDAY( CURDATE() ) >  CAST(azonetimes.day_of_week AS SIGNED INT), 0, 7 ) - 7 DAY )) + ((`range` + `start`)*60)))
            )
        OR 
        (
            NOW() 
            #Check for this week
            BETWEEN     
                        (FROM_UNIXTIME(UNIX_TIMESTAMP(DATE(CURDATE() - INTERVAL WEEKDAY( CURDATE() ) - CAST(azonetimes.day_of_week AS SIGNED INT) +
                        IF( WEEKDAY( CURDATE() ) >  CAST(azonetimes.day_of_week AS SIGNED INT), 0, 7 )  DAY )) + `start`*60) )
                    AND (FROM_UNIXTIME(UNIX_TIMESTAMP(DATE(CURDATE() - INTERVAL WEEKDAY( CURDATE() ) - CAST(azonetimes.day_of_week AS SIGNED INT) +
                        IF( WEEKDAY( CURDATE() ) >  CAST(azonetimes.day_of_week AS SIGNED INT), 0, 7 )  DAY )) + ((`range` + `start`)*60)))
            )
        AS open
        FROM azonetimes

+----+---------+-------------+-------+-------+------+
| id | zone_id | day_of_week | start | range | open |
+----+---------+-------------+-------+-------+------+
|  1 |       1 |           2 |   300 |   900 |    1 |   << Wed 5am to 8pm
|  2 |       0 |           1 |     0 |  2400 |    1 |   << Tue 00:00 to Wed 4pm (40 hrs)
|  3 |       4 |           4 |   300 |   900 |    0 |   << Fri 5am to 8pm
|  4 |       0 |           5 |   900 |  7200 |    1 |   << Sat 3pm to Thu 3pm
+----+---------+-------------+-------+-------+------+ 
```

# sql - 从一个表复制到另一个包含额外列外键的表

> ID：13152176
> 
> 赞同：0
> 
> 时间：2012-10-31T06:09:47.337
> 
> 标签：sql

我想将值`table A`插入另一个表 B。问题是表 B 包含另外几列是外键。

*   `Table A`：`ID, Fatherid, MotherID, ParentOccupation`
*   `Table B`：`ID, Fatherid, MotherID, ParentOccupation, TrID`

in`Table B` `Trid`是外键。但我希望将所有其他列从表 A 复制到 B。

是否可以将表A的行复制到表B？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:19:57.880

```
insert into table_b
select
    col1,
    col2,
    col3, 
    ...
    (select some_key_value
     from some_primary_table
     where <some condition based on table_a's values>),
    (select some_key_value2
     from some_primary_table2
     where <some condition based on table_a's values>),
    ...
from table_a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:20:07.597

您可以只插入相应的列，而不是表B中的外键。如果tableB的所有fk列都不为null，则对应插入null值

```
insert into tableB(col1,colu2..) 
values (select col1,col2.. from tableA) 
```

# sql-server-2008 - 根据现有数据插入数据

> ID：13152183
> 
> 赞同：1
> 
> 时间：2012-10-31T06:10:19.437
> 
> 标签：sql-server-2008, ssis, unique-constraint

我有一个表，其中包含（CId，Source）之类的列。source 的值可以是 (0,1,2,3)。现在 Table 应该只有两个 CId 记录。

1.  CId = 'X' 和来源 = 0
2.  CId = 'X' 和 Source = 1（也可以是 2 或 3）

在此之后，如果有任何其他记录来 (X,2) (X,3) 不应插入。

牢记上述约束，我想将记录从源文件插入到表中。我正在使用 SSIS 包来加载文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:38:54.987

添加一个计算`bit`列，它是`0`或`1`取决于 in 的值，`Source`并在计算列和 上添加唯一约束`CId`。

```
create table YourTable
(
  CId char(1) not null,
  Source int not null,
  SourceBit as cast(Source as bit),
  unique (CId, SourceBit)
) 
```

# c# - PetaPoco 事务隔离级别

> ID：13152185
> 
> 赞同：0
> 
> 时间：2012-10-31T06:10:37.383
> 
> 标签：c#, sql-server, petapoco

[我有 ac# windows 服务，它使用PetaPoco](http://www.toptensoftware.com/petapoco/)更新我的数据库中的数据，所有这些都包含在一个事务中。但是，我需要在事务运行时数据库可用于查询（Web 应用程序，通过 ODBC 连接运行查询），但如果在提交事务时查询，我的数据库会出现“灾难性故障”错误。目前针对 MS SQL Server 进行测试，但也需要针对 Oracle 数据库进行测试。

有没有办法为 PetaPoco 事务设置事务隔离级别，这可能是这种情况下的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:25:01.767

事实证明，“灾难性故障”消息源于 PetaPoco 和我现有的 Web 应用程序的更新导致的数据库死锁。我通过锁定表格解决了这个问题

```
SELECT TOP 1 * FROM [TABLENAME] WITH (TABLOCKX) 
```

PetaPoco 交易开始时的查询。

# wpf - 如何在 xamlx 设计器中使用来自第三方 x64 dll 的类型？

> ID：13152186
> 
> 赞同：0
> 
> 时间：2012-10-31T06:10:50.127
> 
> 标签：wpf, visual-studio, xaml, workflow-foundation-4

问题是 VS2010sp1 是 32 位应用程序，不会加载 64 位程序集。

我已经制作了自定义活动，这些活动从 64 位第 3 方 dll 引用类型为 InArgument/OutArguments。（或者更一般地说，我的设计器组件涉及来自 64 位 dll 的类型，应该放置在 VS 托管的 WPF 设计器上）

这些组件不能在 VS xaml/xamlx 设计器中使用，因为 VS 是 32 位应用程序。如何在不要求供应商为 AnyCPU 重建的情况下克服此限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:14:34.660

我不认为你可以。如果某些东西被设计为托管在 64 位应用程序中，那就是它所需要的。如果您的应用程序是 32 位，则它无法托管该程序集。因此，您唯一的选择是使用两个应用程序并在它们之间进行通信。但是正如您建议的那样，您需要来自该程序集的 WPF 组件，AFAIK 无法这样做。

# php - 在运行时更改键盘语言

> ID：13152188
> 
> 赞同：3
> 
> 时间：2012-10-31T06:11:08.757
> 
> 标签：php, javascript, jquery, multilingual

我正在编写一个健康应用程序，它有多种语言，如英语、俄语和阿拉伯语等。显示不同的语言不是问题，但是当我开始在输入框中输入时，它会输入默认的英语，我想这样做如果我的会话设置为阿拉伯语，那么键盘应该自动编写阿拉伯语而不是英语，其他语言也一样。

该应用程序应该是在 php + mysql 中开发的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:16:05.930

据我所知，语言设置主要是操作系统问题，而不是在 Web 应用程序中处理，如果用户想输入其他语言比如荷兰语，他/她可以更改键盘语言并输入。

可以通过以下方式更改语言

> 运行 > intl.cpl > 键盘和语言 > 更改键盘

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:18:58.210

我不认为这个问题可以通过任何编程语言来处理。语言设置与您的操作系统有关。如果您的操作系统没有您的应用程序支持的语言包，那么呢？

# java - 读写服务器

> ID：13152190
> 
> 赞同：0
> 
> 时间：2012-10-31T06:11:19.237
> 
> 标签：java, sockets, client, printwriter

目标：将数据发送到服务器并让服务器返回一些内容并打印服务器发回的内容

问题：如果我关闭输出流，它会将数据发送到服务器，但我的输入流不起作用，我无法接收服务器试图给我的内容。如果我使用 flush() 将数据发送到服务器，则服务器永远不会收到数据。我已经坚持了3个小时。你如何同时阅读和写作。

客户端.java

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;

class Client {
    public static void main(String args[]) {
        String data = "head";
        try {
            Socket skt = new Socket("server", 5050);
            PrintWriter out = new PrintWriter(skt.getOutputStream(), true);
            BufferedReader in = new BufferedReader(new InputStreamReader(skt.getInputStream()));
            out.print(data);
            out.close();

            System.out.println("Sent data");
            while (!in.ready()) {
            }

            String input = in.readLine();
            System.out.println(input);

            out.close();
            in.close();
            skt.close();
        } catch (Exception e) {
            System.out.print("Whoops! It didn't work!\n" +e.toString());
        }
    }
} 
```

服务器.java

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.ServerSocket;
import java.net.Socket;
import java.io.PrintWriter;

class Server {
    public static void main(String args[]) {
        String data;
        String input;
        try {
            ServerSocket srvr = new ServerSocket(5050);
            Socket skt = srvr.accept();
            BufferedReader in = new BufferedReader(new InputStreamReader(
                    skt.getInputStream()));
            PrintWriter out = new PrintWriter(skt.getOutputStream(), true);

            // /////Waits for message from client/////////
            while (!in.ready()) {
            }
            // ///////////////////////////////////////////

            input = in.readLine(); // Read the message
            System.out.println("Received String input: " + input);
            // Send output to client
            System.out.println("After output");
            if (input.equals("head"))
                data = "haha";
            else
                data = "Wtf did you send me";
            Thread.sleep(2000);
            out.print(data);
            // ///////////////////

            System.out.println("Sent data: " + data);
            in.close();
            out.close();
            skt.close();
            srvr.close();
        } catch (Exception e) {
            System.out.print("Whoops! It didn't work!\n");
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:14:51.880

在您的客户中，您有：

```
out.print(data);
out.close(); 
```

在您的服务器中，您拥有：

```
input = in.readLine(); 
```

客户端发送*没有换行符*的消息- 这就是为什么`in.ready()`是*true*。更重要的是 - 它关闭*PrintWriter*而不是刷新（您也在程序结束时关闭流）。如果您将该行更改为：

```
out.println(data); // sends message with new line character
out.flush();       // unnecessary 
```

客户端发送消息。同样的事情是当服务器发送消息时-您使用`print`而不是`println`客户端读取`readLine`，直到换行符为止，或者更准确地说（[BufferedReader|readLine()](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine%28%29)）：

> *读取一行文本。一行被认为是由换行符 ('\n')、回车符 ('\r') 或紧跟换行符的回车符中的任何一个终止的。*

还有一件事 - 您正在使用`"server"`主机名连接到服务器。对于我的测试，我将其更改为`"localhost"`. 也许还有其他错误？

# objective-c - 如何检查sqlite中的现有列

> ID：13152196
> 
> 赞同：0
> 
> 时间：2012-10-31T06:11:52.703
> 
> 标签：objective-c

嗨朋友我最近学习了 sqlite。我在 sqlite 中使用下面的代码来表示名称是否存在，但我没有得到结果。请帮我。BOOL columnExists = NO;

```
 sqlite3_stmt *selectStmt;
        NSString *upperString = [[NSString alloc] initWithFormat:exptypeFld.text];
        NSString* changeString = [upperString uppercaseString];
        NSLog(@"changeString %@",changeString);
        [upperString release];
        const char *sqlStatement = [[NSString stringWithFormat:@"SELECT expensetype from expensetypes where upper(expensetype) = '%@'",changeString] UTF8String];
        NSLog(@"char is %s",sqlStatement);
        if(sqlite3_prepare_v2(db, sqlStatement, -1, &selectStmt, NULL) == SQLITE_OK)
        {
            NSLog(@"Same........");
            columnExists = YES;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T17:04:16.253

您可能更喜欢使用现有的类来访问 SQLite 数据库。你可以在这里找到我写的一个例子：[https ://github.com/AaronBratcher/ABSQLite](https://github.com/AaronBratcher/ABSQLite)

它具有用于以更传统的数据库方式访问 SQLite 的包装类，我觉得这让事情变得更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:46:01.597

您不需要调用`sqlite3_step`来实际执行查询。另外，此时数据库连接是否打开？完成后，您还应该完成声明。而且您不应该使用字符串格式将值绑定到查询。你应该使用`sqlite3_bind_xxx`.

```
NSString *upperString = exptypeFld.text; // no need for the string format
NSString* changeString = [upperString uppercaseString];
NSLog(@"changeString %@",changeString);

const char *sqlStatement = "SELECT expensetype from expensetypes where upper(expensetype) = ?";
NSLog(@"char is %s",sqlStatement);

sqlite3_stmt *selectStmt;
if(sqlite3_prepare_v2(db, sqlStatement, -1, &selectStmt, NULL) == SQLITE_OK) {
     sqlite3_bind_text(sqlStatement, 1, [changeString UTF8String], -1, SQLITE_TRANSIENT);
     sqlite3_step(sqlStatement); // you should check the result of this too
}
sqlite3_finalize(sqlStatement); 
```

此代码假定数据库已打开。

# java - Android - 除了普通 SSL 证书外，还验证自签名证书

> ID：13152198
> 
> 赞同：3
> 
> 时间：2012-10-31T06:11:59.113
> 
> 标签：java, android, web-services, ssl, ssl-certificate

我有一个通过 SSL 调用 Web 服务的 Android 应用程序。在生产中，我们将拥有由受信任的 CA 签名的普通 SSL 证书。但是，我们需要能够支持自签名证书（由我们自己的 CA 签名）。

我已经成功实施了建议的接受自签名证书的解决方案，但是由于中间人攻击的风险，这将不起作用。然后我创建了一个信任管理器来验证证书链实际上是由我们的 CA 签名的。

问题是我必须绕过正常的 SSL 验证——应用程序现在只会与安装了我们的自签名证书之一的服务器通信。

我有点迷路，我已经广泛搜索但找不到任何东西。我希望找到一种以编程方式将我们的 CA 添加到设备上的信任库的方法，因为这将是处理该问题的侵入性最小的方法。

我想要实现的目标： 1\. 对普通 SSL 证书的完全标准支持。2\. 对我们自己的 CA 签名的自签名证书的额外支持。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:36:24.923

你还没有发布任何代码，所以我不能确定你到底做了什么。但是，我假设您`SSLContext`只使用自定义`X509TrustManager`子类来设置。这很好，但是您可以做的是让您的自定义信任管理器实现*也*链接到内置的信任管理器。您可以在设置信任管理器时执行此操作；像这样的东西应该工作：

```
private List<X509TrustManager> trustManagers = new ArrayList<X509TrustManager>();

public MyCustomTrustManager() {
    TrustManagerFactory tmFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
    tmFactory.init((KeyStore)null);

    for (TrustManager tm : tmFactory.getTrustManagers()) {
        if (tm instanceof X509TrustManager)
            trustManagers.add((X509TrustManager)tm);
    }
} 
```

因此，现在您的自定义信任管理器拥有所有内置信任管理器的列表。在您对 的覆盖中`checkServerTrusted()`，您需要遍历内置的信任管理器，并通过`checkServerTrusted()`依次调用每个信任管理器来检查每个信任管理器。如果他们都不信任证书，您可以应用自己的证书检查。如果通过，您可以正常返回。如果没有，只需像其他方式一样抛出 a `CertificateException`。

编辑：添加以下有关执行主机名验证等操作的内容。

您还可以验证证书中的主机名是否符合您的预期。您需要在构造函数中为您的自定义信任管理器传递有效的主机名，并将其存储在类中。您的`checkServerTrusted()`方法将获得一个数组`X509Certificate`。许多“链”将仅包含一个证书，但其他“链”将包含多个，具体取决于 cA 如何签署您的证书。无论哪种方式，数组中的第一个证书应该是您想要比较的“您的”证书。

使用信任管理器检查基本证书有效性后，您需要执行以下操作：

```
Principal subjectDN = chain[0].getSubjectDN();
String subjectCN = parseDN(subjectDN.getName(), "CN");
if (this.allowedCN.equals(subjectCN)) {
    // certificate is good
} 
```

的实施由`parseDN()`您决定。 `subjectDN.getName()`将返回以逗号分隔的键值对列表（由 分隔`=`），例如`C=US,ST=California,L=Mountain View,O=Google Inc,CN=www.google.com`. 您需要用于主机名比较的 CN（“通用名称”）值。请注意，如果您有通配符证书，它将被列为类似 的`*.example.com`内容，因此在这种情况下，您需要做的不仅仅是简单的等号匹配。

# linqpad - 在 linqpad 中执行查询时出错

> ID：13152202
> 
> 赞同：0
> 
> 时间：2012-10-31T06:12:17.233
> 
> 标签：linqpad

我刚刚开始使用 LinqPad：

```
var con1 = from con in table
where con.tableKey == Guid.Parse("8EA5DC2C-2603-499A-A9D3-00019B53421F")
select con;

con.Dump(); 
```

向我抛出错误

```
") or end of expression expected (change the Query Language to 'C# Statements' for multi-statement queries)" 
```

谁能纠正我？

而且我还注意到 linqpad 上的 File-> New Query、New Query 相同的属性。它们之间有什么区别？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T06:29:30.727

确保您的查询类型是 C# 语句而不是 C# 表达式...但是如果您执行的语句不超过 1 条，则不需要 con.Dump(); （我认为）

# android - 如何在 Android 应用程序中实现聊天功能？

> ID：13152205
> 
> 赞同：4
> 
> 时间：2012-10-31T06:12:29.167
> 
> 标签：android, chat

我正在制作一个需要实现聊天功能的应用程序。我们有自己的服务器，我们从服务器获取好友列表。

我需要向该朋友发送消息并从该朋友那里获得回复消息。为此，我认为我必须将消息发送到我必须聊天的那个朋友的服务器。

但我无法理解如何从聊天消息的服务器获得回复。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:16:06.367

您可以使用不同的 API 来实现聊天功能。[这是使用Smack](http://www.igniterealtime.org/) api的示例开源聊天应用程序的链接。

[http://davanum.wordpress.com/2008/12/29/updated-xmpp-client-for-android/](http://davanum.wordpress.com/2008/12/29/updated-xmpp-client-for-android/)

请参阅基于 XMPP 协议的[示例应用程序。](http://people.apache.org/~dims/android/XMPPClient.zip)您可以配置您的谷歌帐户进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:03:58.543

您可以通过使用第三方 API（如（Smack，Asmack）或通过实现您的客户端服务器逻辑来实现聊天功能。我希望您使用上述 API 在您的应用程序中实现聊天功能。

# c# - MVC4中文本框的验证

> ID：13152206
> 
> 赞同：1
> 
> 时间：2012-10-31T06:12:34.810
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, validation

我有一个更新操作来根据我的文本框输入更新值。我使用 javascript 进行验证。脚本和验证仅适用于第一个文本框值。
我的查看代码

```
 @foreach (var item in Model)
      {     <tr>          
         <td align="right" class="Text_nocolor" valign="top">
      @using (Html.BeginForm("Update", "Cart", new { UserID = Request.QueryString["UserID"] }, FormMethod.Post, new { id = "myForm" }))
     {          
         @Html.Hidden("id", @Request.QueryString["UserID"] as string)
         @Html.Hidden("productid", item.ProductID as string)
         <input id="Quantity" type="text" class="Text_nocolor" name="Quantity" value="@item.Quantity"  onblur="return allownumbers() " maxlength="3"/>  
          @Html.Hidden("unitrate", item.Rate)               
          <input type="submit" value="Edit" class="Text_nocolor" onclick="return RegainFocus();" />
     }
       </td >
<tr>
    } 
```

我使用的脚本：

```
 <script type="text/javascript">
    function RegainFocus() {
            if ((document.getElementById("Quantity").value).length == 0) {
                document.getElementById("Quantity").focus();
                alert("Quantity cannot be empty");
                document.getElementById("Quantity").value = document.getElementById("Quantity").defaultValue;
                return false;
            }
            else if ((document.getElementById("Quantity").value) > 100) {
                alert("There is no enough inventory for this product to fulfill your order");
                document.getElementById("Quantity").value = document.getElementById("Quantity").defaultValue;
                return false;
            }           
        }
            function allownumbers() {
                var val = parseInt(document.getElementById("Quantity").value);
                if (!val || val < 1) {
                    alert('Please enter a valid value');
                    document.getElementById("Quantity").value = document.getElementById("Quantity").defaultValue;
                    return false;                 
                }
                document.getElementById("Quantity").value = val;
                return true;
            }
    </script> 
```

我还检查了是否为文本框获得了不同的 ID。但是所有文本框都具有相同的 ID，并且验证不适用于除第一个文本框之外的其他文本框。
有什么建议么。

编辑 ：：

```
 function allownumbers() {
            alert('fasfa');
            var elements = document.getElementsByName('Quantity');
            for (var i = 0; i < elements[i].length; i++) {  
                alert(elements);
                if (!elements || elements < 1) {
                    alert('Please enter a valid value');                    
                    return false;
                }
                else if (elements > 100) {
                    alert('Please enter a value less than 100');
                    return false;
                }
            }               
            return true;
        } 
```

该模型具有值，并且每个文本框都包含其中的值。但是元素只返回 NaN 作为值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:17:45.817

1.  您可以获取具有名称的元素并对其进行迭代；

    ```
    var elements = document.getElementsByName('Quantity');
    for(var i = 0; i < elements.length; i++){
        //validate elements[i].value
    } 
    ```

2.  您可以给每个文本框唯一的 id（第一个解决方案更好）

3.  使用 jQuery 验证插件

编辑：修复你的代码

```
function allownumbers() {
        var elements = document.getElementsByName('Quantity');
        for (var i = 0; i < elements.length; i++) {  
            if (elements[i].value == '' || elements[i].value < 1) {
                alert('Please enter a valid value');                    
                return false;
            }
            else if (elements[i].value > 100) {
                alert('Please enter a value less than 100');
                return false;
            }
        }               
        return true;
    }​ 
```

小提琴：http: [//jsfiddle.net/kDVDb/](http://jsfiddle.net/kDVDb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:19:40.037

不能有多个具有相同 ID 的 DOM 元素。在您的循环中，您需要为每个文本输入生成唯一的 ID，然后独立调用您的验证方法。

或者，您可以使用 jQuery 的[.each()](http://api.jquery.com/each/)方法，该方法将遍历多个元素。就像是：

```
$('input[name=Quantity]').each(function(index) {
    validation logic here
}); 
```

# c - 使用 fgets 读取文本文件时出现奇怪的符号

> ID：13152208
> 
> 赞同：3
> 
> 时间：2012-10-31T06:12:43.580
> 
> 标签：c, string, pointers, file-io, fgets

当尝试在 C 中使用 fgets 读取纯文本文件时，我在第一行得到一些看起来很奇怪的输出。因此，如果第一行的意思是“你好”，它会显示为“ELFh` �� 20120918 (prerelease)@xxhello”。这是代码：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
    FILE *fr;
    int i;
    extern int uniq(char *previous_word, char *current_word);
    char *line1 = malloc(500);
    char *line2 = malloc(500);
    char *temp;
    for(i = 0; i<argc; i++)
    {

        fr = fopen (argv[i], "r");
        while(fgets(line2, 499, fr) != NULL)
        {
            uniq(line1, line2);
            temp = line1;
            line1 = line2;
            line2 = temp;
        }
        fclose(fr);
    }
    return 0;
}
int uniq(char *previous_word, char *current_word) {
    if(!(current_word))
        return 1;
    if(strcmp(previous_word, current_word))
        printf("%s", current_word);
    return 0;
} 
```

我已经搜索了我可以在谷歌和堆栈溢出上给出的关于这个问题的所有描述，但我找不到任何可以修复它的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T06:15:32.747

您的循环必须从索引 1 开始。`argv[0]`是您的可执行文件。

`argv[0]`如果你有一个所谓的多二进制可执行文件，检查是有帮助的。在那里，您只需一个二进制文件即可处理不同的命令。这对于需要节省内存的嵌入式系统非常有用。

# compass-sass - 如何从我的 SVN 存储库中排除 .sass-cache 文件夹？

> ID：13152210
> 
> 赞同：3
> 
> 时间：2012-10-31T06:12:52.160
> 
> 标签：compass-sass

我是指南针 sass 初学者。
![在此处输入图像描述](../Images/fa467be03f819a1d3044f0525e851aa3.png)
我不想把这个文件夹上传到svn，它一点用处都没有。如何设置指南针将其移动到其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:09:56.600

该目录已经在最佳位置，即与您的 Compass 文件的其余部分一起，因此告诉 SVN 忽略它可能是一个更好的主意。我已经很久没有使用 SVN 了，但是这里有[一篇关于 svn:ignore property 的好文章](https://stackoverflow.com/a/414910/1777801)。

# c - 预期 char 时按值传递 char-array

> ID：13152211
> 
> 赞同：1
> 
> 时间：2012-10-31T06:13:09.753
> 
> 标签：c

```
void func(char a, int num)
{
    printf("%c",a);
}

int main()
{
     func("a", 6); //not func('a',6);
     printf("\n");
     func("b", 2); //not func('b',6);
} 
```

我知道我正在传递一个带有空字符的 a 和 b 的 char 数组`\0`。有人可以最终打印字符`$`吗`&`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T06:15:33.000

它最终可能会打印几乎任何东西，可能是`"a"`和`"b"`的 ascii 代码匹配的地址`$`的一部分`&`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T06:16:06.017

您正在传递指向文字字符串的指针，但`func`需要一个字符。更改它以接收数组：

```
void func(char *a, int num)
{
    printf("%c",a[0]); // also note that to print a char you need to
                       // 'select' a char from the array
} 
```

否则，您最终将打印到一个字符，该字符是地址`a`作为第一个字节的任何内容的 ascii 表示。

# android - 将原始类型传递给 Bundle

> ID：13152215
> 
> 赞同：0
> 
> 时间：2012-10-31T06:13:28.723
> 
> 标签：android

当我使用 Intent.putExtra 到一个 Bundle 来传递一个 int 值时，这个原语是否首先被撞到一个 Object 上。我虽然只有 Parceable 或 Serializable 对象可以传递给 Bundle。原始人怎么样。这是撞到一个 Integer 吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:16:27.570

是的。内部捆绑使用`HashMap<String, Object>();`

见这里 [http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2.1_r1/android/os/Bundle.java#Bundle.0mMap](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2.1_r1/android/os/Bundle.java#Bundle.0mMap)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T06:34:57.957

您可以使用意图或 Bundle 传递原始类型的变量，而无需使其可打包或可序列化。

当您必须传递您的自定义对象时，您需要使其可打包或可序列化。Parcelable 是 Android 的最佳选择。

# cakephp - 如何通过用于 cakephp 的 ssl 中的表单提交来加密发布数据

> ID：13152216
> 
> 赞同：0
> 
> 时间：2012-10-31T06:13:33.817
> 
> 标签：cakephp, cakephp-2.1

我正在使用 cakephp 2.X 版本。我尝试使用 ssl 加密实现登录。但是当我单击提交按钮时，发布数据不通过 ssl。

尝试遵循安全组件解决方案： http: [//book.cakephp.org/2.0/en/core-libraries/components/security-component.html](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html)

但是，当 post 请求不是通过 HTTPS 时，它将被重定向到 https get 请求。这样我就无法正确登录。

我手动将我的登录表单操作更改为

```
<form action="https://localhost/users/login"> 
```

我工作。但是有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:58:12.797

您的解决方案确实有效，您可以通过在您的用户控制器中添加安全组件来添加额外的安全层：

```
public function beforeFilter() {
    $this->Security->requireSecure('login');
} 
```

此外，您可以使用如下方法强制任何非 SSL 请求自动重定向到 SSL 请求`blackHoleCallback`：

```
public function beforeFilter() {
    $this->Security->blackHoleCallback = 'forceSSL';
    $this->Security->requireSecure();
}

public function forceSSL() {
    $this->redirect('https://' . env('SERVER_NAME') . $this->here);
} 
```

如果 SSL 对您的整个应用程序很重要（例如，如果您正在处理敏感数据），最好的解决方案是让您的 Web 服务器（Apache/nginx/无论您使用什么）对所有请求强制 SSL 并重定向任何非SSL 替代他们的 SSL。

# get - 我们可以在 GET 方法中删除或更新吗？

> ID：13152217
> 
> 赞同：0
> 
> 时间：2012-10-31T06:13:39.003
> 
> 标签：get

我们都知道 GET 方法是从服务器获取信息，而 POST 方法用于请求源服务器接受请求中包含的实体作为资源的新下级，例如更新表。但是，我们可以在 GET 方法中进行更新吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:17:35.097

根据实现语言（数据库库的可用性）和对数据库的访问权限，您可以在 GET 请求中执行任何您喜欢的操作。在 GET 中检索并使用 POST 请求进行更新只是一种协议，通常不会由网络服务器强制执行。

# java - 使用 java 和 itext 以 pdf 或 xls 格式保存文件

> ID：13152223
> 
> 赞同：1
> 
> 时间：2012-10-31T06:13:52.037
> 
> 标签：java, jsf-2, primefaces

我正在使用 itext 创建一个 pdf 文件，但我想打开一个对话框提示用户在保存之前输入文件的名称和位置。我尝试过 JFileChooser，但它在服务器客户端架构中不起作用。请建议一个组件可以使用。我会感谢任何帮助！

我正在使用 JSF 和 Primefaces（文件下载也不起作用。）

# c# - 带有 WCF 的 Winscard Dll

> ID：13152226
> 
> 赞同：0
> 
> 时间：2012-10-31T06:13:57.660
> 
> 标签：c#, winscard

我的项目结构

```
 myApp 
  -->WCFSerLibrary 
  -->ClassLib1
  -->ClassLib2  // This one uses winscard.dll 
```

我想与附加的智能卡阅读器进行通信。

我遵循的四个步骤是

1.  ScardEstablishContext
2.  通过 SCardListReaders 获取阅读器名称
3.  SCardConnect
4.  使用 SCardTransmit 读取

前三个步骤成功执行，但是当我尝试执行 SCardTransmit 时，它返回了**87**的响应代码。

第二方面，上述场景是当我从 WCF 服务调用它时。现在我在 Windows FOrm 应用程序中使用相同的 ClassLib2，它可以正常通信。

```
 retCode =  ModWinsCard.SCardTransmit(hCard, ref pioSendRequest, ref SendBuff[0], sendLen, ref pioSendRequest, ref RecvBuff[0], ref recvLen); 
```

在 ModWinsCard 类中

```
 [DllImport("winscard.dll"l)]
    public static extern Int64 SCardTransmit(UInt64 hCard, ref SCARD_IO_REQUEST pioSendRequest, ref byte SendBuff, int SendBuffLen, ref SCARD_IO_REQUEST pioRecvRequest, ref byte RecvBuff, ref int RecvBuffLen); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:35:30.750

87 是无效参数。该方法返回一个不长的 int。此外，您只传入输入和输出缓冲区中的第一项。应该使用 IntPtr 作为卡句柄。

```
LONG WINAPI SCardTransmit(
  _In_         SCARDHANDLE hCard,
  _In_         LPCSCARD_IO_REQUEST pioSendPci,
  _In_         LPCBYTE pbSendBuffer,
  _In_         DWORD cbSendLength,
  _Inout_opt_  LPSCARD_IO_REQUEST pioRecvPci,
  _Out_        LPBYTE pbRecvBuffer,
  _Inout_      LPDWORD pcbRecvLength
); 
```

也许试试下面的 pinvoke 签名？

```
[DllImport("winscard.dll"l)]
        public static extern int SCardTransmit(
            IntPtr hCard, 
            ref SCARD_IO_REQUEST pioSendRequest, 
            byte[] SendBuff, 
            int SendBuffLen, 
            ref SCARD_IO_REQUEST pioRecvRequest, 
            IntPtr RecvBuff,    // Copy with marshal.copy to a managed array after call.
            ref int RecvBuffLen); 
```

# regex - 用“/”分隔的 2 个变量重写规则

> ID：13152229
> 
> 赞同：1
> 
> 时间：2012-10-31T06:14:18.263
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我有一个位于文件夹**“/mixtapes/”**中的 .htaccess 文件，我正在尝试获取`mydomain.com/music/downloads/mixtapes/this-title/id`要执行的 URL`mydomain.com/music/downloads/mixtapes/item.php?title=variable1&id=variable2`

我目前有下面的方法有点工作，但它只使用id，我需要两个变量（../mixtapes/title/id），由**“/”**分隔，并且由于某种原因，下面的代码在**“/mixtapes/”中的索引页面“**不起作用。我难住了！我对此有些陌生，非常感谢任何帮助！

顺便说一句，在我的索引页面上，传递到`item.php`页面的 url 被重写为`<a href="title/id">`我似乎无法让它以`item.php?title=a&id=b`格式正确执行`mixtapes/title/id`

当前的 htaccess 文件位于**“/mixtapes/”**

```
# turn mod_rewrite engine on 
RewriteEngine On

# rewrite all physical existing file or folder
RewriteCond %{REQUEST_FILENAME} !-f [OR]
RewriteCond %{REQUEST_FILENAME} !-d

# allow things that are certainly necessary
RewriteCond %{REQUEST_URI} "/css/" [OR]
RewriteCond %{REQUEST_URI} "/images/" [OR]
RewriteCond %{REQUEST_URI} "/images/" [OR]
RewriteCond %{REQUEST_URI} "/javascript/"

# rewrite rules
RewriteRule ^mixtapes/item.php(.*) - [L]
RewriteRule ^(.*) item.php?id=$1 [QSA] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:08:08.460

您的 .htaccess 中的评论实际上是错误的

```
# turn mod_rewrite engine on 
RewriteEngine On

# if requested URL is NOT a existing file  
RewriteCond %{REQUEST_FILENAME} !-f [OR]
# or if requested URL is NOT a directory
RewriteCond %{REQUEST_FILENAME} !-d

# CSS, images, JavaScript are files and we will never pass this point when those are requested, next rules can be skipped

# rewrite rules
# rewrite /mixtapes/title/id to item.php?title=title&id=id
Rewrite ^mixtapes/([^/]+)/([0-9]+)  item.php?title=$1&id=$2   [L]

# catch all other requests and handle them ( optional, default would be 404 if not a physically existing file )
Rewrite (.*) index.php  [L,QSA] 
```

我假设您的 id 是一个数值。请注意在 php.ini 中使用标题。不要直接输出，但您可以使用它来验证您的 URL 并重定向错误的标题/ID 组合

# sql - SQL Server 2005 中的“WHEN OTHERS THEN NULL”

> ID：13152230
> 
> 赞同：0
> 
> 时间：2012-10-31T06:14:29.177
> 
> 标签：sql, sql-server-2005

`tracking_table`是一个日志表，声明如下：

```
create table tracking_table (my_command nvarchar(500), my_date datetime); 
```

请假设您有以下 SQL SERVER 2005 代码块，在 SQL Server 2005 作业中声明：

```
DECLARE @my_statement NVARCHAR(500)  
delete from tracking_table
   SET @my_statement = 'ALTER INDEX ALL ON my_user.dbo.my_fact_table REBUILD WITH (FILLFACTOR = 90)'
insert into tracking_table values (@my_statement,getdate()) 
EXEC (@my_statement)  
 SET @my_statement = 'ALTER INDEX ALL ON my_user.dbo.my_second_table REBUILD WITH (FILLFACTOR = 90)'
insert into tracking_table (@my_statement,getdate())    
EXEC (@my_statement) 
```

在运行时，如果第一条语句 ( `ALTER INDEX ALL ON my_user.dbo.my_fact_table REBUILD WITH (FILLFACTOR=90)`) 失败，则不会执行作用于 my_second 表的第二条语句。

我想知道如何修改 SQL Server 2005 代码，以跳过任何错误，继续前进（在 Oracle 中我会说，`WHEN OTHERS THEN NULL`）。

我怎么能做到这一点？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:27:04.700

我不能建议抑制错误，但如果你真的想这样做，我认为你可以尝试：

```
declare @my_statement nvarchar(500)  

begin try
    delete from tracking_table
end try
begin catch
    print null // or errormessage
end catch

begin try
    set @my_statement = 'ALTER INDEX ALL ON my_user.dbo.my_fact_table REBUILD WITH (FILLFACTOR = 90)'

    insert into tracking_table values (@my_statement,getdate()) 
    exec (@my_statement)  
end try
begin catch
    print null // or errormessage
end catch

begin try
    set @my_statement = 'ALTER INDEX ALL ON my_user.dbo.my_second_table REBUILD WITH (FILLFACTOR = 90)'

    insert into tracking_table (@my_statement,getdate())    
    exec (@my_statement)  
end try
begin catch
    print null // or errormessage
end catch 
```

您还可以创建程序

```
create procedure sp_executesql_Suppress_Errors
(
     @stmt nvarchar(max)
)
as
begin
    begin try
        exec sp_executesql
            @stmt = @stmt
    end try
    begin catch
        print null // or errormessage
    end catch
end 
```

然后用你的语句调用它。我还建议您使用`exec sp_executesql`而不是`exec`（请参阅[动态 SQL - EXEC(@SQL) 与 EXEC SP_EXECUTESQL(@SQL)](https://stackoverflow.com/questions/548090/dynamic-sql-execsql-versus-exec-sp-executesqlsql)）

# android - 检测系统正在使用哪个键盘

> ID：13152231
> 
> 赞同：1
> 
> 时间：2012-10-31T06:14:30.743
> 
> 标签：android

Android 设备使用哪种键盘（默认或自定义）？

它需要在前台还是可以在后台完成？

# xml - 如何轻松调试布局 Xml 警告/错误？

> ID：13152232
> 
> 赞同：5
> 
> 时间：2012-10-31T06:14:32.840
> 
> 标签：xml, debugging, magento, xdebug

我陷入了这个错误：

```
Warning: simplexml_load_string(): Entity: line 46: parser error : Comment not terminated  in */lib/Varien/Simplexml/Config.php on line 510 
```

和

```
Entity: line 46: parser error : Start tag expected, '&lt;' not found  in */lib/Varien/Simplexml/Config.php on line 510 
```

很明显，某些 Xml 文件中存在问题，但我真的不容易在大海捞针:)

有什么好的做法吗？如果可能的话，我想找到一个涉及使用 Xdebug 或一些日志的好习惯。

在 Magento 中经常会发生一些拼写错误。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-31T07:14:20.000

我想你可以看看这篇文章[处理 XML 错误](http://www.php.net/manual/en/simplexml.examples-errors.php)。

此警告与某些 config.xml 错误有关，因此找出确切文件的可能解决方法是修改。/lib/Varien/Simplexml/Config.php 类。

您应该修改`Varien_Simplexml_Config::loadString()`方法：

```
public function loadString($string)
{
    if (is_string($string)) {
        // Enable internal errors
        libxml_use_internal_errors(true);
        $xml = simplexml_load_string($string, $this->_elementClass);
        if (false === $xml) {
            // Put breakpoint here
            $errors = libxml_get_errors();
        }
        if ($xml instanceof Varien_Simplexml_Element) {
            $this->_xml = $xml;
            return true;
        }
    } else {
        Mage::logException(new Exception('"$string" parameter for simplexml_load_string is not a string'));
    }
    return false;
} 
```

如果错误与某些布局文件有关（Update.php 第 444 行警告）

您应该`Mage_Core_Model_Layout_Update::getFileLayoutUpdatesXml()`以类似的方式修改方法：

```
public function getFileLayoutUpdatesXml($area, $package, $theme, $storeId = null)
{
    if (null === $storeId) {
        $storeId = Mage::app()->getStore()->getId();
    }
    /* @var $design Mage_Core_Model_Design_Package */
    $design = Mage::getSingleton('core/design_package');
    $layoutXml = null;
    $elementClass = $this->getElementClass();
    $updatesRoot = Mage::app()->getConfig()->getNode($area.'/layout/updates');
    Mage::dispatchEvent('core_layout_update_updates_get_after', array('updates' => $updatesRoot));
    $updateFiles = array();
    foreach ($updatesRoot->children() as $updateNode) {
        if ($updateNode->file) {
            $module = $updateNode->getAttribute('module');
            if ($module && Mage::getStoreConfigFlag('advanced/modules_disable_output/' . $module, $storeId)) {
                continue;
            }
            $updateFiles[] = (string)$updateNode->file;
        }
    }
    // custom local layout updates file - load always last
    $updateFiles[] = 'local.xml';
    $layoutStr = '';
    foreach ($updateFiles as $file) {
        $filename = $design->getLayoutFilename($file, array(
            '_area'    => $area,
            '_package' => $package,
            '_theme'   => $theme
        ));
        if (!is_readable($filename)) {
            continue;
        }
        $fileStr = file_get_contents($filename);
        $fileStr = str_replace($this->_subst['from'], $this->_subst['to'], $fileStr);   

        libxml_use_internal_errors(true);
        $fileXml = simplexml_load_string($fileStr, $elementClass);

        if (false === $fileXml) {
            // Put breakpoint here
            $errors = libxml_get_errors();
            $err = array($filename, $errors);
            // error detail and file name will be printed
            Zend_Debug::dump($err);
            die();
        }

        if (!$fileXml instanceof SimpleXMLElement) {
            continue;
        }
        $layoutStr .= $fileXml->innerXml();
    }
    $layoutXml = simplexml_load_string('<layouts>'.$layoutStr.'</layouts>', $elementClass);
    return $layoutXml;
} 
```

现在只需重新加载页面并阅读错误信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-01T06:51:54.020

好吧，经过很好的搜索，如果`$string`是所有的 CML 合并，你几乎没有机会找到坏关闭的标签。

我找到了一种方法，在 /lib/Varien/Simplexml/Config.php 类中，您必须修改下一个方法：

```
public function loadFile($filePath)
{
    if (!is_readable($filePath)) {
        //throw new Exception('Can not read xml file '.$filePath);
        return false;
    }

    $fileData = file_get_contents($filePath);
    $fileData = $this->processFileData($fileData);
    //add this try catch
    try{
        $this->loadString($fileData, $this->_elementClass);
    } catch (Exception $e) {
        var_dump("The error: " . $e->getMessage());
        var_dump("The bad file" . $filePath);
    }

    return $this->loadString($fileData, $this->_elementClass);
} 
```

通过这种方式，我们现在可以看到哪个文件有一个错误的标签。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-20T13:57:42.290

如果您的测试环境是 Linux，您还可以`xmllint`在对布局 xml 文件进行更改后使用 XMLLint 检查布局 xml 文件是否存在不一致。在实施之前进行检查会发现许多错误并防止引发错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-11T21:35:34.153

编辑文件 app/code/core/Mage/Core/Model/Layout/Update.php 并搜索函数“getFileLayoutUpdatesXml”。

添加：

```
Mage::log(print_r($filename, true)); 
```

大约在第 442 行，之前：

```
$fileStr = file_get_contents($filename); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-28T04:19:20.383

要解决这种情况，请在同一文件 */lib/Varien/Simplexml/Config.php 的第 489 行

加载的 XML 文件的打印路径放在`Zend_Debug::dump($filePath);`后面`$fileData = $this->processFileData($fileData);`

并覆盖函数 loadString($string)

* * *

```
if (is_string($string)) {
    $xml = simplexml_load_string($string, $this->_elementClass);
    if ($xml instanceof Varien_Simplexml_Element) {
        $this->_xml = $xml;
        return true;
    }
} else {
    Mage::logException(new Exception('"$string" parameter for simplexml_load_string is not a string'));
}
return false; 
```

用。。。来代替

```
if (is_string($string)) {
    // Enable internal errors
    //Mage::log($string);
    libxml_use_internal_errors(true);
    $xml = simplexml_load_string($string, $this->_elementClass);

    if (false === $xml) {
        // Put breakpoint here
        $errors = libxml_get_errors();
        $err = array($errors);
        // error detail and file name will be printed
        Zend_Debug::dump($string);;
        Zend_Debug::dump($err);
        die();
    }
    if ($xml instanceof Varien_Simplexml_Element) {
        $this->_xml = $xml;
        return true;
    }
} else {
    Mage::logException(new Exception('"$string" parameter for simplexml_load_string is not a string'));
}
return false; 
```

这将打印产生问题的路径和错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T07:13:48.920

在

```
*/lib/Varien/Simplexml/Config.php on line 510 
```

去添加一个调试行并回显它尝试加载的xml，看看这个字符串有什么问题。

# jquery-ui - 带有图像的 jquery uitabs

> ID：13152233
> 
> 赞同：0
> 
> 时间：2012-10-31T06:14:45.247
> 
> 标签：jquery-ui, jquery-ui-tabs

如何在 jquery UI 选项卡中使用图像而不是文本？使用文本时，选定选项卡的样式与未选定选项卡的样式不同。我必须修改哪些 css 元素才能使其对包含图像的选项卡有用？

我在这里尝试了一些东西，但目前选择哪个选项卡不是很明显：

[http://jsfiddle.net/8Cmuf/16/](http://jsfiddle.net/8Cmuf/16/)

html:

```
<div id="dgTabs" style="width: 500px;">
            <ul>
                <li><a id="a1" href="tab-1"> 
                    <img src="http://images.smh.com.au/2012/10/30/3754903/umbrella_tn-90x60.jpg" /></a></li>
                <li><a id="a2" href="tab-2">
                    <img src="http://images.smh.com.au/2012/10/30/3754903/umbrella_tn-90x60.jpg" /> </a></li>
                      <li><a id="a3" href="tab-1"> 
                    <img src="http://images.smh.com.au/2012/10/30/3754903/umbrella_tn-90x60.jpg" /></a></li>
                <li><a id="a4" href="tab-2">
                    <img src="http://images.smh.com.au/2012/10/30/3754903/umbrella_tn-90x60.jpg" /> </a></li>
                    <li><a id="a5" href="tab-1"> 
                    <img src="http://images.smh.com.au/2012/10/30/3754903/umbrella_tn-90x60.jpg" /></a></li>
                <li><a id="a6" href="tab-2">
                    <img src="http://images.smh.com.au/2012/10/30/3754903/umbrella_tn-90x60.jpg" /> </a></li>
                      <li><a id="a7" href="tab-1"> 
                    <img src="http://images.smh.com.au/2012/10/30/3754903/umbrella_tn-90x60.jpg" /></a></li>
                <li><a id="a8" href="tab-2">
                    <img src="http://images.smh.com.au/2012/10/30/3754903/umbrella_tn-90x60.jpg" /> </a></li>
            </ul>
        </div>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:37:53.307

我建议不要使用带有 LI 标签的图像，而是尝试使用不同的 CSS 类。

尝试使用此处给出的默认 jQuery UI 代码[http://jqueryui.com/tabs/#default](http://jqueryui.com/tabs/#default)

然后在 CSS 中添加了一些可以帮助您的类，请参见下面的代码...

> <风格>
> 
>     .ui-tabs .ui-tabs-nav li{ 高度：35px; 宽度：42px；}
> 
>     .ui-tabs .ui-tabs-nav li.ico1{ background:url(http://jqueryui.com/web-base-template/themes/jquery/i/jq-nav-icons.png) 不重复；背景位置：-40px 1px；}
> 
>     .ui-tabs .ui-tabs-nav li.ico2{ background:url(http://jqueryui.com/web-base-template/themes/jquery/i/jq-nav-icons.png) 不重复；背景位置：8px 1px；}
> 
>     .ui-tabs .ui-tabs-nav li.ico3{ background:url(http://jqueryui.com/web-base-template/themes/jquery/i/jq-nav-icons.png) 不重复；背景位置：-91px 1px；}
> 
> </style>

# python - Django 中的用户权限/提交表单

> ID：13152236
> 
> 赞同：0
> 
> 时间：2012-10-31T06:14:56.553
> 
> 标签：python, html, django, user-controls, user-input

编写一个简单的问答网站，允许用户互相提问和回答问题。

我想对用户进行细分以授予他们权限，并且我假设最好的方法是创建组。（如果我错了，请告诉我。）想创建一个组并让每个注册的用户自动加入一个组。然后，该用户可以将数据提交到 CharField 并根据需要上传图像。

```
#models.py
class name(models.Model):
    title      = models.CharField(max_length = 500)
    image      = models.ImageField(upload_to = 'images')
    pub_date   = models.DateTimeField(auto_now_add = True)
    author     = models.ForeignKey(User) 
```

现在假设用户已经注册并且当前登录，

```
#urls.py
urlpatterns = pattners(
     url(r'^add/$', addQ)

#views.py
def addQ(request): #I know I'm probably missing something in the view)
    return render_to_response("add.html")

#add.html
<h1>Add</h1>
<form action = "" method = "post">{% csrf_token %}
    <label for = "AddQ"> Add: </label>
    <input type = "text" name = "add" value = "" id = "add">
    <label for = "image1"> Image: </label>
    <input type = "image" name = "image1" value = "" id = "image1">

    <input type = "submit" value = "Add" /> 
```

那么我需要做些什么来让用户向模型中添加问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:56:23.773

要获取用户输入，请使用表单。

有关更多信息，请参阅[表单上的 django 文档。](https://docs.djangoproject.com/en/dev/topics/forms/)

要更新数据库，请使用 django ORM。这是[适当的文档](https://docs.djangoproject.com/en/1.4/ref/models/instances/)。

# regex - 有没有办法只重写一个目录，以便该目录中的所有文章重定向 1 级？

> ID：13152237
> 
> 赞同：3
> 
> 时间：2012-10-31T06:15:12.483
> 
> 标签：regex, .htaccess, mod-rewrite, redirect

我有一个站点`http://www.mysite.com/blog/category/post/`，我需要将其重定向到`http://www.mysite.com/category/post`即，我想`blog`从我的 URL 中删除。有没有办法在 .htaccess 中使用永久重定向？

**非常感谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:49:13.507

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^blog(/.*|)$ $1 [L,R=301,NC] 
```

# jquery - Tumblr 照片集

> ID：13152253
> 
> 赞同：1
> 
> 时间：2012-10-31T06:16:18.490
> 
> 标签：jquery, tumblr

我正在尝试破解 tumblr 照片集，我想我找到了最大 700 显示尺寸的修复程序。

假设这是由 {Photoset-700} 生成的普通 iframe：

```
<iframe class="photoset" scrolling="no" frameborder="0" height="1048" width="700" style="border:0px; background-color:transparent; overflow:hidden;" src="http://www.georgefratila.ro/post/20314734048/photoset_iframe/esssk/tumblr_m1tp5634Si1qzc7t7/700/false"></iframe> 
```

有没有办法改变 iframe 的宽度，改变 src url 的最后一部分和放大时保持纵横比？

width="700"**把这个值改成860** src="http://www.georgefratila.ro/post/20314734048/photoset_iframe/esssk/tumblr_m1tp5634Si1qzc7t7/700/false"**把src的最后一部分/700/false改成/ 860/假**

我想我在一个网站上看到它是用 jquery 制作的，但我不记得名字了，我会查看我的历史也许我会找到它。

谢谢您的帮助。

Edit.1 我想我几乎对所有东西都进行了排序：

```
 $('iframe.photoset').each(function() {
      $(this).attr("width", function(index, old) {
            return old.replace("700", "860");
      });
      $(this).attr("src", function(index, old) {
            return old.replace("/700/false", "/860/false");
      });
}); 
```

我现在唯一的问题是高度，它不能缩放以适应 iframe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:19:38.250

这似乎出现了很多。我开发了一个 jQuery 插件，它可以让 Tumblr Photosets 完全响应，并且可以达到你设置容器的任何宽度。[https://github.com/PixelUnion/Extended-Tumblr-Photoset](https://github.com/PixelUnion/Extended-Tumblr-Photoset)

我更喜欢这个而不是摆弄 iFrame 大小，因为您可以获得更多信息（包括 EXIF 数据）并且真正让您完全控制内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:20:12.763

我找到了解决我的问题的方法，这里是：

```
//This will change the source address and display the correct size.

        $(".photoset").each(function() { 
    var newSrc = $(this).attr("src").replace('700','860');
    $(this).attr("src", newSrc);       
}); 
//This will get the new size of the iframe and resize the iframe holder accordingly.

$(function(){
var iFrames = $('.photoset');
function iResize() {
    for (var i = 0, j = iFrames.length; i < j; i++) {
        iFrames[i].style.height = iFrames[i].contentWindow.document.body.offsetHeight + 'px';}
    }

    if ($.browser.safari || $.browser.opera) { 
        iFrames.load(function(){
            setTimeout(iResize, 0); 
        });

        for (var i = 0, j = iFrames.length; i < j; i++) {
            var iSource = iFrames[i].src;
            iFrames[i].src = '';
            iFrames[i].src = iSource;
        }
    } else {
        iFrames.load(function() {
            this.style.height = this.contentWindow.document.body.offsetHeight + 'px';
        });
    }
}); 
```

如果您对如何最小化或改进脚本有任何想法，请在下面发布。享受

# opencv - CV_MAT_ELEM 中的编译错误

> ID：13152254
> 
> 赞同：0
> 
> 时间：2012-10-31T06:16:26.923
> 
> 标签：opencv, macros, compiler-errors

作为调用estimateRigidTransform() 的结果，我得到一个名为“trans”的cv::Mat 对象。为了检索其包含的矩阵，我尝试以这种方式访问​​其元素：

```
for (i=0; i<2; i++) for (j=0; j<3; j++)
{
   mtx[j][i]=CV_MAT_ELEM(trans,double,i,j);
} 
```

不幸的是，使用 VS2010 我得到一个编译器错误

```
error C2228: left of '.ptr' must have class/struct/union 
```

对于带有 CV_MAT_ELEM 的行。当我打开这个宏时，我发现类似

```
(mat).data.ptr + (size_t)(mat).step*(row) + (pix_size)*(col)) 
```

当我删除 (mat).data 后面的“.ptr”时，它会编译。但我无法想象这是解决方案（或者无法想象这是一个错误，我是唯一注意到它的人）。那么这里真的有什么问题呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:33:11.697

您不会像这样访问 mat 元素。对于遍历，请参阅我的其他答案以及示例代码： [颜色矩阵遍历](https://stackoverflow.com/questions/7860599/why-does-assertion-fail-here/13187395#13187395)

或查看灰度垫的opencv refman：

```
Mat M; // should be grayscale
int cols = M.cols, rows = M.rows;
for(int i = 0; i < rows; i++) 
{
  const double* Mi = M.ptr<double>(i); 
  for(int j = 0; j < cols; j++)
  {
    Mi[j]; // is the matrix element.
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T09:16:52.580

只是我这边的一个附录：同时我发现 CV_MAT_ELEM 需要一个结构 CvMat （OpenCV-C-interface）而不是 cv::Mat （C++-interface）。这就是为什么我得到这个有趣的错误。从 cv::Mat 到 CvMat 的转换可以简单地通过转换为 CvMat 来完成。与 OpenCV 中的 C 和 C++ 接口的有趣混淆......

# jquery - wysiwyg-text-editor 未显示在 yii 的 jquery 对话框中

> ID：13152256
> 
> 赞同：1
> 
> 时间：2012-10-31T06:16:29.097
> 
> 标签：jquery, jquery-ui-dialog, yii-components

我正在为表单中的文本区域使用所见即所得的文本编辑器。但它没有显示在具有该表单的 jquery 对话框中

谁能帮我做这件事

提前致谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:25:23.633

我已经尝试过这个 wisiwyg 编辑器并发现它可以工作......你可以看到代码在运行......看看下面的代码

```
$this->beginWidget('zii.widgets.jui.CJuiDialog', array(
            'id' => 'mydialog',
            // additional javascript options for the dialog plugin
            'options' => array(
                'title' => 'Dialog box 1',
                'autoOpen' => false,
            )
        )
    );

    $this->widget('application.components.widgets.XHeditor', array(
            'language' => 'en', //options are en, zh-cn, zh-tw
            'config' => array(
                'id' => 'xh1',
                'name' => 'xh',
                'tools' => 'mini', // mini, simple, fill or from XHeditor::$_tools
                'width' => '100%',
                //see XHeditor::$_configurableAttributes for more
            ),
            'contentValue' => 'Enter your text here', // default value displayed in textarea/wysiwyg editor field
            'htmlOptions' => array('rows' => 5, 'cols' => 10)
        )
    );

    $this->endWidget('zii.widgets.jui.CJuiDialog');

    echo CHtml::link('open dialog', '#', array('onclick' => '$("#mydialog").dialog("open"); return false;')); 
```

# android - 应用程序关闭时如何将 NFC 徽章数据传递给应用程序

> ID：13152258
> 
> 赞同：0
> 
> 时间：2012-10-31T06:16:55.177
> 
> 标签：android, nfc, rhomobile

我想出了通过在 NFC 徽章上点击手机来打开应用程序的方法[在 NFC Tap 上启动 Rhomobile 应用程序](https://stackoverflow.com/questions/12835870/start-rhomobile-app-on-nfc-tap/12949279#12949279)。

但问题是如何在应用程序关闭时将 NFC 徽章数据传递给应用程序？

# iphone - iPhone - 根据文字调整 UILabel 宽度

> ID：13152262
> 
> 赞同：19
> 
> 时间：2012-10-31T06:17:16.987
> 
> 标签：iphone, objective-c, ios, uilabel

如何根据文本调整标签宽度？如果文本长度小，我希望标签宽度小...如果文本长度小，我希望标签宽度根据该文本长度。可能吗？

其实我有两个 UIlabels。我需要把这两个放在附近。但是如果第一个标签的文字太小，就会有很大的差距。我想消除这个差距。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-31T06:38:24.477

```
//use this for custom font
CGFloat width =  [label.text sizeWithFont:[UIFont fontWithName:@"ChaparralPro-Bold" size:40 ]].width;

//use this for system font 
CGFloat width =  [label.text sizeWithFont:[UIFont systemFontOfSize:40 ]].width;

label.frame = CGRectMake(point.x, point.y, width,height);

//point.x, point.y -> origin for label;
//height -> your label height; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-04-16T21:09:39.650

函数 `sizeWithFont:`在 iOS 7.0 中已弃用，因此您必须在`sizeWithAttributes:`iOS 7.0+ 上使用。此外，为了支持旧版本，可以使用以下代码：

```
 CGFloat width;
    if ([[UIDevice currentDevice].systemVersion floatValue] < 7.0)
    {
        width = [text sizeWithFont:[UIFont fontWithName:@"Helvetica" size:16.0 ]].width;
    }
    else
    {
        width = ceil([text sizeWithAttributes:@{NSFontAttributeName: [UIFont fontWithName:@"Helvetica" size:16.0]}].width);
    } 
```

Apple 文档建议`ceil()`对结果使用函数：`sizeWithAttributes:`

“此方法返回小数大小；要使用返回的大小来调整视图大小，您必须使用 ceil 函数将其值提高到最接近的更高整数。”

[sizeWithAttributes](https://developer.apple.com/library/ios/documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/occ/instm/NSString/sizeWithAttributes:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-11T10:28:43.030

```
 // In swift 2.0
    let lblDescription = UILabel(frame: CGRectMake(0, 0, 200, 20))
    lblDescription.numberOfLines = 0
    lblDescription.text = "Sample text to show its whatever may be"
    lblDescription.sizeToFit()

    // Its automatically Adjust the height 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-31T06:19:25.433

试试这些选项，

```
UIFont *myFont = [UIFont boldSystemFontOfSize:15.0];
// Get the width of a string ...
CGSize size = [@"Some string here" sizeWithFont:myFont];

// Get the width of a string when wrapping within a particular width
NSString *mystring = @"some strings some string some strings...";
CGSize size = [mystring sizeWithFont:myFont
                              forWidth:150.0
                lineBreakMode:UILineBreakModeWordWrap]; 
```

您也可以尝试`[label sizeToFit];`使用此方法，您可以将两个标签的框架设置为，

```
[firstLabel sizeToFit];
[secondLabel sizeToFit];
secondLabel.frame = CGRectMake(CGRectGetMaxX(firstLabel.frame), secondLabel.origin.y, secondLabel.frame.size.width, secondLabel.frame.size.height); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-31T06:27:05.960

`sizeWithFont constrainedToSize:lineBreakMode:`是使用的原始方法。以下是如何使用它的示例：

```
//Calculate the expected size based on the font and linebreak mode of your label
CGSize maximumLabelSize = CGSizeMake(296,9999);

CGSize expectedLabelSize = [yourString sizeWithFont:yourLabel.font constrainedToSize:maximumLabelSize lineBreakMode:yourLabel.lineBreakMode];   

//adjust the label the the new height.
CGRect newFrame = yourLabel.frame;
newFrame.size.height = expectedLabelSize.height;
yourLabel.frame = newFrame; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-29T13:07:35.067

如果您在视图、xib 或单元格中使用约束，请使用 to

```
[LBl sizeToFit]; 
```

如果它不工作那么

```
dispatch_async(dispatch_get_main_queue(), ^{
[LBl sizeToFit];
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-31T07:27:13.173

尝试以下操作：

```
/* Consider these two labels as the labels that you use, 
and that these labels have been initialized */

UILabel* firstLabel;
UILabel* secondLabel;

CGSize labelSize = [firstLabel.text sizeWithFont:[UIFont systemFontOfSize:12]]; 
//change the font size, or font as per your requirements

CGRect firstLabelRect = firstLabel.frame;

firstLabelRect.size.width = labelSize.width; 
//You will get the width as per the text in label

firstLabel.frame = firstLabelRect;

/* Now, let's change the frame for the second label */
CGRect secondLabelRect;

CGFloat x = firstLabelRect.origin.x;
CGFloat y = firstLabelRect.origin.y;

x = x + labelSize.width + 20; //There are some changes here.

secondLabelRect = secondLabel.frame;
secondLabelRect.origin.x = x;
secondLabelRect.origin.y = y; 

secondLabel.frame = secondLabelRect; 
```

# ruby - 通过 Net::HTTP 在 Ruby 中发送 http post 请求

> ID：13152264
> 
> 赞同：23
> 
> 时间：2012-10-31T06:17:20.417
> 
> 标签：ruby, http, http-headers

我正在向 Web 服务发送带有自定义标头的请求。

```
require 'uri'
require 'net/http'

uri = URI("https://api.site.com/api.dll")
https = Net::HTTP.new(uri.host, uri.port)
https.use_ssl = true
headers = 
{
    'HEADER1' => "VALUE1",
    'HEADER2' => "HEADER2"
}

response = https.post(uri.path, headers) 
puts response 
```

它不起作用，我收到以下错误：

```
/usr/lib/ruby/1.9.1/net/http.rb:1932:in `send_request_with_body': undefined method `bytesize' for #<Hash:0x00000001b93a10> (NoMethodError) 
```

我该如何解决这个问题？

附言`Ruby 1.9.3`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-31T07:31:34.467

试试这个：

有关详细文档，请查看： [http ://www.rubyinside.com/nethttp-cheat-sheet-2940.html](http://www.rubyinside.com/nethttp-cheat-sheet-2940.html)

```
require 'uri'
require 'net/http'

uri = URI('https://api.site.com/api.dll')
https = Net::HTTP.new(uri.host, uri.port)
https.use_ssl = true

request = Net::HTTP::Post.new(uri.path)

request['HEADER1'] = 'VALUE1'
request['HEADER2'] = 'VALUE2'

response = https.request(request)
puts response 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-31T06:27:37.430

的第二个参数`Net::HTTP#post`需要是`String`包含要发布的数据（通常是表单数据），标题将在可选的第三个参数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-29T10:36:41.353

正如 qqx 提到的，第二个参数`Net::HTTP#post`需要是`String`

幸运的是，有一个简洁的函数可以将哈希转换为所需的字符串：

```
response = https.post(uri.path, URI.encode_www_form(headers)) 
```

# .net - 在 web.config 文件中指定 .net 自定义数据提供程序？

> ID：13152266
> 
> 赞同：1
> 
> 时间：2012-10-31T06:17:29.207
> 
> 标签：.net

我使用 System.Data.Common 类创建了一个自定义数据提供程序，并实现了 IDBConnection、IDBCommand 等接口，提供程序名称为“MysampleProvider”

现在我想在 web.config 的连接字符串中指定提供者？这样我就可以使用自己的提供者 (MysampleProvider) 而不是 .net 数据提供者。

有人可以指导我吗？举个例子？

期待您的回复？

嗨，我按照您的指示做了如下更改，但仍然没有成功。我的来源如下

```
 <DbProviderFactories>
    <remove invariant="CustomDataProvider"/>
      <add name="Custom Data Provider" invariant="CustomtDataProvider" description=".Net Framework Data Provider" type="CustomDataProvider, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
    </DbProviderFactories>
  </system.data>

<connectionStrings>
<add name="ConnectionString" connectionString="Driver={MySQL ODBC 5.1 Driver};server=192.168.1.6;uid=root;database=Sample;port=3306;pwd=root79" providerName="CustomDataProvider.DBManager" />
</connectionStrings> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:27:17.570

好的，它来自配置。我从机器配置中复制了以下内容。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="system.data" type="System.Data.Common.DbProviderFactoriesConfigurationHandler, System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
  </configSections>
  <system.data>
    <DbProviderFactories>
      <add name="Microsoft SQL Server Compact Data Provider" invariant="System.Data.SqlServerCe.3.5" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=3.5.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
      <add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
    </DbProviderFactories>
  </system.data>
</configuration> 
```

# asp.net - 无法从服务器上的 asp.net 运行批处理

> ID：13152267
> 
> 赞同：1
> 
> 时间：2012-10-31T06:17:29.263
> 
> 标签：asp.net, batch-file, process

我正在尝试从 asp.net 运行批处理文件。它在我的本地机器上正常工作。但是当我在服务器上部署 web 应用程序和批处理文件时，我收到类似“访问被拒绝”的错误。当我将 ApplicationPool 身份更改为 localsystem 时，我没有收到任何错误，但批处理文件没有触发。我尝试在 asp.net 中为进程对象提供用户名和密码，但没有运气。

```
string path = @"C:\Users\mrahm13\AppData\test.bat";
Process p = new Process();
p.StartInfo.FileName = path;
p.Start();
p.WaitForExit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T11:42:06.220

试试这个（没有用 ASP.NET 测试过）：让你的进程是 cmd.exe，然后通过

```
/c C:\Users\mrahm13\AppData\test.bat
```

作为论据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-12T23:11:20.880

我想通了。除了授予文件夹权限外，我还应该在 web.config 中禁用模拟。

# c# - Visual Studio 2012 中的依赖（过程）单元测试

> ID：13152268
> 
> 赞同：1
> 
> 时间：2012-10-31T06:17:31.187
> 
> 标签：c#, unit-testing, dependency-injection, asp.net-mvc-4, visual-studio-2012

在 MVC4 C# 网站中，我们使用单元测试来测试我们的代码。我们目前正在做的是创建一个模拟数据库，然后测试每一层：

1.  测试数据库 - 连接、初始化、加载等。
2.  测试访问数据库的代码
3.  测试视图层

我希望这三个类别按顺序运行，并且只有在前一个类别通过时。这是正确的方法吗？我们使用依赖注入框架的旧方法是一种奇怪的模拟测试方法。我们实际上为每个数据访问器创建了一个模拟类，这很糟糕，因为我们必须重新实现每个方法的逻辑，而且它并没有真正增加任何价值，因为如果我们第一次在逻辑上犯了错误，我们会稍等片刻。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T19:49:16.093

> 我希望这三个类别按顺序运行，并且只有在前一个类别通过时。这是正确的方法吗？

不，您应该单独测试所有内容，因此任何失败的数据访问代码都应该与视图完全无关。因此，视图单元测试应该由于完全不同的原因而失败，因此您应该始终运行所有测试。

一般来说，测试应该独立运行，并且不应该依赖于任何其他测试。在我看来，视图层仍然依赖于数据访问代码，但您只抽象了下面的层。在这种情况下，从视图的角度来看，您正在模拟一个间接依赖，这使得您的单元测试比严格需要的更复杂。

> 我们使用依赖注入框架的旧方法是一种奇怪的模拟测试方法

我不确定我是否明白这一点，但似乎您在单元测试中使用了 DI 容器。这是绝对不行的。不要使用任何 DI 框架使您的测试变得混乱。而且没有必要。只需围绕依赖注入原则设计您的类（将所有依赖项公开为构造函数参数），然后在您的测试中，您只需使用虚假依赖项手动新建被测类 - 或者 - 当这导致重复代码时，在您的测试中创建一个工厂方法创建被测类的新实例的类。

> 我们实际上为每个数据访问器创建了一个模拟类，这很糟糕

我不确定，但听起来好像你的设计有问题。你通常会有一个`IRepository<T>`接口，你会有多个实现，例如 a`UserRepository : IRepository<User>`和`OrderRepository : IRepository<Order>`。在您的测试套件中，您将拥有一个通用的`FakeRespository<T>`或`InMemoryRepository<T>`，然后您就完成了。无需在这里模拟许多课程。

以下是您绝对应该阅读的两本好书：

1.  [单元测试的艺术](http://www.manning.com/osherove/)
2.  [.NET 中的依赖注入](http://www.manning.com/seemann/)

这些书会改变你的生活。既然您无论如何都会阅读，请务必阅读[这本书](https://rads.stackoverflow.com/amzn/click/com/0132350882)（与您的问题无关，但代码也可以改变生活）。

# java - 代码在 Localhost 中工作，但它在 java 中使用休眠的在线网站中工作

> ID：13152271
> 
> 赞同：0
> 
> 时间：2012-10-31T06:17:43.760
> 
> 标签：java, hibernate, jsp, servlets, struts2

我使用框架 -struts 2.0、hibernate 3.0 和 tiles 2.0 用 Ja​​va 制作了一个 Web 应用程序。在我的本地系统中，当我注册用户时，我正在使用 JDK 1.6、apache-tomcat 6.0 和我的 SQL 5.5，它在我的本地主机上的本地系统中工作正常。但是当我在[http://www.shreerajinvestment.com/Home/registration.jsp](http://www.shreerajinvestment.com/Home/registration.jsp)上注册时，它无法正常工作。

我必须做什么...？

**在线重定向错误操作。但是在本地主机重定向成功操作记录成功添加并注册。**

**支柱代码**

```
<action name="registration" class="Registration" >

    <result name="input" >/registration.jsp</result>
    <result name="error" >/error.jsp</result>
    <result name="success" type="tiles" >home</result>
</action> 
```

这是**hibernateConfiguration.xml**文件

```
 <hibernate-configuration>
<session-factory>

    <property name="connection.useUnicode" >true</property>
    <property name="connection.characterEncoding" >UTF-8</property>
    <property name="connection.driver_class" >com.mysql.jdbc.Driver</property>
    <property name="connection.url" >jdbc:mysql://mysiteIP:3306/databasename</property> 
    <property name="connection.username" >root</property>
    <property name="connection.password" >admin</property>
    <property name="dialect" >org.hibernate.dialect.MySQLDialect</property>
    <property name="current_session_context_class" >thread</property>
    <property name="hibernate.transaction.factory_class" >org.hibernate.transaction.JDBCTransactionFactory</property>

    <mapping resource="pojo/registrationpojo.hbm.xml" />
    <mapping resource="pojo/lifepojo.hbm.xml" />
    <mapping resource="pojo/gipojo.hbm.xml" />
    <mapping resource="pojo/mfpojo.hbm.xml" />
    <mapping resource="pojo/cdpojo.hbm.xml" />
    <mapping resource="pojo/fdpojo.hbm.xml" />

</session-factory> 
```

这是**registration.java**文件

```
package SRI.User;

import java.util.Date;
import java.util.List;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;
import org.apache.struts2.interceptor.ServletRequestAware;
import org.hibernate.Session;
import org.hibernate.Transaction;
import pojo.RegistrationPojo;
import admin.Common;
import admin.HibernateUtils;
import com.opensymphony.xwork2.ActionSupport;

public class Registration extends ActionSupport implements ServletRequestAware
{
private static final long serialVersionUID = 1L;
private HttpServletRequest myrequest = null;
public List<Registration> regpojo = null;

public HttpServletRequest getMyrequest() {
    return myrequest;
}
public void setMyrequest(HttpServletRequest myrequest) {
    this.myrequest = myrequest;
}
public List<Registration> getRegpojo() {
    return regpojo;
}
public void setRegpojo(List<Registration> regpojo) {
    this.regpojo = regpojo;
}

public String getFirst_name() {
    return first_name;
}
public void setFirst_name(String firstName) {
    first_name = firstName;
}
public Date getDob() {
    return dob;
}
public void setDob(Date dob) {
    this.dob = dob;
}
    //other fields getter - seter

private String first_name = null;
private Date dob = null;
    //other fields

private int flag;
private String re = null;
private Common mCommon = new Common(); 

@SuppressWarnings("unchecked")
public String execute() throws Exception
{
    try
    {
        Session session = HibernateUtils.getSession();
        Transaction tx = session.beginTransaction();

        regpojo = session.createQuery("select m.uname from RegistrationPojo m").list();

        if(regpojo.size() == 0)
        {
            //code to add record in the table
            RegistrationPojo p1=new RegistrationPojo();
            p1.setFirst_name(getFirst_name());
            p1.setDob(mCommon.ChangeDateformat(getDob()));
            //set other fields 
            session.save(p1);
            tx.commit();

            System.out.println("Registration Successfully");
            re=SUCCESS;
        }
        else
        {
            for(int i=0; i<regpojo.size(); i++)
            {
                if(username.equals(regpojo.get(i)))
                {
                    flag = 1;
                    break;
                }
                else
                {
                    flag = 0;
                }
            }
            if(flag == 0)
            {

                    //code to add record in the table
                    RegistrationPojo p1=new RegistrationPojo();
                    p1.setFirst_name(getFirst_name());
                    p1.setDob(mCommon.ChangeDateformat(getDob()));
                    //set other fields 
                    session.save(p1);
                    tx.commit();                

                                    System.out.println("Registration Successfully");
                re=SUCCESS;
            }
            else
            {
                System.out.println("ERROR");
                addFieldError("un", "User Name is not Available");
                re=INPUT;   
            }
        }
        HttpSession s=myrequest.getSession(true);
        s.setAttribute("uname",username);
        s.setAttribute("pwd",password);

    }
    catch(Exception ex)
    {
        re = ERROR;
        System.out.println("Connection Failed: "+ex);
        ex.printStackTrace();
    }
    return re;
}

public void setServletRequest(HttpServletRequest request) 
{
    this.myrequest=request;
}
} 
```

这是**Web 服务器**文件上的错误日志

```
Connection Failed: org.hibernate.exception.GenericJDBCException: Cannot open connection
org.hibernate.exception.GenericJDBCException: Cannot open connection
at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:103)
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:91)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:29)
at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:420)
at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:144)
at org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:119)
at org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:57)
at org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1326)
at SRI.User.Registration.execute(Registration.java:155)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:399)
at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:262)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:213)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150)
at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:123)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
at com.opensymphony.xwork2.interceptor.ParametersInterceptor.intercept(ParametersInterceptor.java:161)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:105)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:83)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:207)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:74)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:127)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
at org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:107)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:206)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:115)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:143)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
at com.opensymphony.xwork2.interceptor.PrepareInterceptor.intercept(PrepareInterceptor.java:115)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:170)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:123)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:219)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:218)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:216)
at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:50)
at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:507)
at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:421)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:207)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:200)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.sql.SQLException: Access denied for user 'shreeraj_root'@'209.59.190.236' (using password: YES)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2975)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:798)
at com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:3700)
at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1203)
at com.mysql.jdbc.Connection.createNewIO(Connection.java:2572)
at com.mysql.jdbc.Connection.(Connection.java:1485)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:266)
at java.sql.DriverManager.getConnection(DriverManager.java:579)
at java.sql.DriverManager.getConnection(DriverManager.java:190)
at org.hibernate.connection.DriverManagerConnectionProvider.getConnection(DriverManagerConnectionProvider.java:110)
at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:417)
... 119 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:21:08.547

您是否在连接 url 中指定了正确的数据库地址？您发布的文件显示 localhost。检查一次。

# java - java中的内存泄漏

> ID：13152273
> 
> 赞同：2
> 
> 时间：2012-10-31T06:17:49.387
> 
> 标签：java, memory-leaks, jprofiler, finalize

我使用 jprofiler 检测客户端代码的内存泄漏。在启动时 java.util.hashmap$entry 使用的内存急剧增加到 1700KB。之后它也减少了。堆转储显示 java.lang.ref.finalizer 正在使用最大内存。它得出什么结论？当我尝试在我的源代码中找到 finalize() 时，它不存在。在 HTML 文件中 finalize() 是这样使用的。 [finalize](http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize() "java.lang 中的类或接口")，是什么意思？原因是 finalize() 还是引用 hashmap$entry 导致了泄漏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:51:46.373

如果要查找内存泄漏，则应查看 Full GC 后使用了多少内存，如果有很多可终结的引用，则应查看两次，否则您可能会看到很多无关紧要的临时对象。

我怀疑您看到的两种数据类型都不是问题，尤其是如果它们定期使用量下降。寻找只会上升的消费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:00:58.413

> 它得出什么结论？

首先，你所谓的“证据”是乱码，不清楚应该是什么无乱码的版本。但是，基于一些猜测......我根本看不到内存泄漏的明显迹象。

相反，如果你有一个大的，要么变得无法访问，要么因为 GC 注意到堆太满而被清除， *看起来*会发生什么。`WeakHashMap`

但是，我的猜测可能是错误的，这里可能有泄漏......

> 原因是 finalize() 还是引用 hashmap$entry 导致了泄漏？

也不一定。（事实上​​，*如果*真的存在存储泄漏，那么其中任何一个都*不太可能*是直接原因。）

# groovy - 在 Groovy DSL 中使用“所有者”属性

> ID：13152278
> 
> 赞同：2
> 
> 时间：2012-10-31T06:18:38.390
> 
> 标签：groovy, dsl

让我们考虑一个简单的 Groovy DSL

```
execute {
    sendNotification owner
    sendNotification payee
} 
```

执行的实现是

```
public static void execute(Closure dslCode) {
    Closure clonedCode = dslCode.clone()
    def dslDelegate = new MyDslDelegate(owner:  'IncCorp', payee: 'TheBoss')

    clonedCode.delegate = dslDelegate
    clonedCode.call()
} 
```

和自定义代表是

```
public static class MyDslDelegate {
    def owner
    def payee

    void sendNotification(to) {
        println "Notification sent to $to"
    }
} 
```

`execute`运行块的预期结果是

```
Notification sent to IncCorp
Notification sent to TheBoss 
```

实际的是

```
Notification sent to class package.OwnerClassName
Notification sent to TheBoss 
```

问题是`owner`Groovy 本身的保留属性，由于 Groovy实现`Closure`，没有`resolveStrategy`选项有助于`owner`用委托的自定义值替换值`getProperty``Closure`

```
public Object getProperty(final String property) {
    if ("delegate".equals(property)) {
        return getDelegate();
    } else if ("owner".equals(property)) {
        return getOwner();
    ...
    } else {
        switch(resolveStrategy) {
            case DELEGATE_FIRST:
        ...
    } 
```

我的问题是，有人如何能够产生这种限制并`owner`在自定义 DSL 中使用属性名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:53:47.253

这有点小技巧，但这应该可以得到你想要的，而不改变 Groovy 源代码：

```
public static void execute(Closure dslCode) {
    Closure clonedCode = dslCode.clone()

    def dslDelegate = new MyDslDelegate(owner:  'IncCorp', payee: 'TheBoss')
    clonedCode.@owner = dslDelegate.owner
    clonedCode.resolveStrategy = Closure.DELEGATE_ONLY

    clonedCode.delegate = dslDelegate
    clonedCode.call()
} 
```

参考： [是否可以更改闭包的所有者？](https://stackoverflow.com/questions/5844583/is-it-possible-to-change-the-owner-of-a-closure)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T01:29:07.570

简单的答案是否定的，你不能。'owner' 是 Groovy 中的保留关键字，因此根据定义不能用作任意符号。即使有办法解决这个问题，你最好只使用一个与语言实现不冲突的名称——这在 Groovy 中尤其如此，它一直承诺完全重新设计其 MOP，这意味着您实施的任何 hack 都可能在未来的版本中停止工作。

如果您解释了为什么您愿意提供赏金并寻找解决此问题的方法，而不是仅仅将名称更改为不同的名称并完全避免该问题，那么这个问题可能会更有意义。保留符号是一种语言的一个非常基本的限制，试图绕过它们似乎是非常不明智的。

# arrays - Zend 作为数组返回

> ID：13152279
> 
> 赞同：0
> 
> 时间：2012-10-31T06:18:39.607
> 
> 标签：arrays, zend-framework

我想从表中选择一个特定的列，并将结果作为一个简单的数组返回。我有以下代码

```
$select = $this->select();
$select = $select->from($this,array('DISTINCT(conversation_id)','conversation_id'))
                 ->where('user_id =?',$user_id);
return $this->fetchAll($select)->toArray(); 
```

问题是，返回的结果是二维的。所以如果我想得到结果，我必须去喜欢`$result[0]['conversation_id']`。我怎样才能得到它，以便我只需要输入`$result[i]`？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:55:27.720

您需要使用以下代码行

```
return $this->fetchRow($select)->toArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:27:03.907

```
$select = $this->select();
$select = $select->from($this,array('DISTINCT(conversation_id)'))
                 ->where('user_id =?',$user_id);

$fetchedData = $this->fetchAll($select);

$dataArray = array();
foreach($fetchedData as $data)
{
   $dataArray[] = $data->conversation_id;
}
return $dataArray; 
```

这是你想要的？

# java - 如何在 java swing 运行时更改语言

> ID：13152282
> 
> 赞同：16
> 
> 时间：2012-10-31T06:18:45.727
> 
> 标签：java, swing, localization, runtime, locale

我尝试在我的 Swing 应用程序中在运行时更改语言环境。
但我无法弄清楚它应该如何工作，或者没有总体规划？

我只能想到两个选择：
1\. 重启应用，不是最好的用户体验。
2.创建一个可以注册/注销组件的本地化管理器，在更改时它只是迭代所有组件并更改文本。

1和2都觉得尴尬。

其他信息：
目前方向不是目标。
应用程序被混淆了。

例子：

LocRes_en.properties：

```
    text1 = 英文文本

```

LocRes_ja.properties

```
    text1 = 日文文本

```

ChangeLocale.java：

```
    导入 java.awt.EventQueue；
    导入 java.awt.FlowLayout；
    导入 java.awt.event.ActionEvent；
    导入 java.awt.event.ActionListener；
    导入 java.util.Locale；
    导入 java.util.ResourceBundle；

    导入 javax.swing.JButton；
    导入 javax.swing.JFrame；
    导入 javax.swing.JLabel；

    公共类 ChangeLocale {

        私有 JFrame 框架；

        公共静态无效主要（字符串[]参数）{
            EventQueue.invokeLater(new Runnable() {
                公共无效运行（）{
                    尝试 {
                        ChangeLocale 窗口 = new ChangeLocale();
                        window.frame.setVisible(true);
                    } 捕捉（异常 e）{
                        e.printStackTrace();
                    }
                }
            });
        }

        公共更改区域设置（）{
            初始化（）;
        }

        私人无效初始化（）{
            框架 = 新的 JFrame();
            frame.setBounds(100, 100, 450, 300);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            FlowLayout flowLayout = new FlowLayout(FlowLayout.CENTER, 5, 5);
            frame.getContentPane().setLayout(flowLayout);

            JButton btnChangeLoc = new JButton("更改语言环境");
            frame.getContentPane().add(btnChangeLoc);

            final JLabel lblLabel1 = new JLabel("新标签");
            frame.getContentPane().add(lblLabel1);
            Locale.setDefault(new Locale("en"));
            ResourceBundle r = ResourceBundle.getBundle("LocRes");
            lblLabel1.setText(r.getString("text1"));

            btnChangeLoc.addActionListener(new ActionListener() {
                公共无效actionPerformed（ActionEvent e）{
                    Locale.setDefault(new Locale("ja"));
                    ResourceBundle r = ResourceBundle.getBundle("LocRes");
                    // 手动遍历所有组件 :(
                    lblLabel1.setText(r.getString("text1"));
                    //
                }
            });
        }
    }

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T06:43:57.717

我已经使用 ResourceBundles 和[EventBus](http://code.google.com/p/simpleeventbus/)实现了这一点。

更改区域设置时，EventBus 会触发一个`localeChangedEvent`. 所有`JFrame`具有本地化字符串的窗口都必须订阅此事件。他们还必须实现一个`changeLocale()`在收到事件时执行的方法。

在此方法中，所有字符串都将更新为当前语言环境。

```
public void changeLocale(ResourceBundle rb) {
    lblLabel1.setText(rb.getString("text1"));
    lblLabel2.setText(rb.getString("text2"));
    ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T06:43:21.767

您可以尝试**LocaleChangeListener**接口 -

[在 Swing 中运行时更改语言环境](https://stackoverflow.com/questions/615973/changing-locale-at-runtime-in-swing)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-28T23:46:05.800

`GUI`使用支持的语言定义一个和一个组合框。添加一个[`ItemListener`](https://docs.oracle.com/javase/7/docs/api/java/awt/event/ItemListener.html)这样当组合框更改时，文本会更新。

LanguageGUIClient.java:

```
import javax.swing.*;

public class LanguageGUIClient
{
    public static void main(String[] arguments) throws Exception
    {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());

        SwingUtilities.invokeLater(() ->
        {
            LanguageGUI languageGUI = new LanguageGUI();
            languageGUI.setVisible(true);
        });
    }
} 
```

语言GUI.java：

```
import javax.swing.*;
import java.util.Locale;
import java.util.ResourceBundle;

public class LanguageGUI extends JFrame
{
    public static ResourceBundle resourceBundle;

    private JPanel rootPanel;
    private JComboBox<Locale> languageComboBox;
    private JLabel languageLabel;

    public LanguageGUI()
    {
        configureFrameProperties();
    }

    private void configureFrameProperties()
    {
        add(rootPanel);
        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        languageComboBox.addItem(Locale.US);
        languageComboBox.addItem(Locale.GERMANY);
        languageComboBox.addItem(Locale.FRANCE);
        setTexts();
        languageComboBox.addItemListener(itemEvent -> setTexts());
        setSize(300, 100);
    }

    private void setTexts()
    {
        Locale locale = languageComboBox.getItemAt(languageComboBox.getSelectedIndex());
        resourceBundle = ResourceBundle.getBundle("Bundle", locale);
        setTitle(resourceBundle.getString("application.title"));
        languageLabel.setText(resourceBundle.getString("language") + ":");
        languageComboBox.setToolTipText(resourceBundle.getString("language.tooltip"));
    }
} 
```

请注意，我正在使用`IntelliJ's form designer`，所以`.form`文件内容也是必要的。

LanguageGUI.form:

```
<?xml version="1.0" encoding="UTF-8"?>
<form xmlns="http://www.intellij.com/uidesigner/form/" version="1" bind-to-class="LanguageGUI">
  <grid id="27dc6" binding="rootPanel" layout-manager="GridLayoutManager" row-count="2" column-count="2" same-size-horizontally="false" same-size-vertically="false" hgap="-1" vgap="-1">
    <margin top="0" left="0" bottom="0" right="0"/>
    <constraints>
      <xy x="20" y="20" width="500" height="400"/>
    </constraints>
    <properties/>
    <border type="none"/>
    <children>
      <component id="eb651" class="javax.swing.JComboBox" binding="languageComboBox">
        <constraints>
          <grid row="0" column="1" row-span="1" col-span="1" vsize-policy="0" hsize-policy="2" anchor="8" fill="1" indent="0" use-parent-layout="false"/>
        </constraints>
        <properties>
          <toolTipText value=""/>
        </properties>
      </component>
      <vspacer id="977c1">
        <constraints>
          <grid row="1" column="1" row-span="1" col-span="1" vsize-policy="6" hsize-policy="1" anchor="0" fill="2" indent="0" use-parent-layout="false"/>
        </constraints>
      </vspacer>
      <component id="e59f" class="javax.swing.JLabel" binding="languageLabel">
        <constraints>
          <grid row="0" column="0" row-span="1" col-span="1" vsize-policy="0" hsize-policy="0" anchor="8" fill="0" indent="0" use-parent-layout="false"/>
        </constraints>
        <properties>
          <text value=""/>
        </properties>
      </component>
    </children>
  </grid>
</form> 
```

此外，您需要在资源目录中创建相应的资源包文件：[![](../Images/31148504d498a0f11515a2f272f6f72e.png)](https://i.stack.imgur.com/pUCcw.png)[![](../Images/181e5865606e9f79c51dc4dbedad8e2f.png)](https://i.stack.imgur.com/2OLp0.png)

结果是`GUI`带有一个组合框，可让您立即更改语言： [![](../Images/6d77b9f74e12731b0e0ab70b65eb05f3.png)](https://i.stack.imgur.com/jSfC5.png) [![](../Images/9abe3555779faddd8b5d874e64257a22.png)](https://i.stack.imgur.com/sTktB.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-31T06:38:21.537

我曾经做过类似的事情。虽然我的任务更简单：这是一个系统托盘应用程序，所以我只需要更改菜单项文本。

但在你的情况下，我认为这是可行的。首先，避免在您的 GUI 层中使用硬编码字符串。创建更改语言环境的类，然后迭代所有可见框架，并深入到所有面板和组件并更改写在它们上的文本。我能想到的唯一问题是在画布上绘制的文本。

# php - php中的复选框绑定

> ID：13152283
> 
> 赞同：0
> 
> 时间：2012-10-31T06:18:57.210
> 
> 标签：php, knockout.js

我想在 php 中完成复选框绑定。我编写了以下代码来从数据库中获取数据：

```
$result = mysql_query("select * from users where kunnr='".$_SESSION["kunnr"]."'");
if(isset($page["id"]))
{
    $result = mysql_query("select * from users where kunnr='".$_SESSION["kunnr"]."' and id='".$page["id"]."'");
}
$model['check']=array();
while($row = mysql_fetch_array($result)){
    array_push($model['check'],
        array(
            "id"=>$row["id"],
            "active"=>$row["active"],
            "admin"=>$row["admin"],
            "web"=>$row["web"],
            "mstudio"=>$row["mstudio"],
            "projectcentral"=>$row["projectcentral"],
            "icenter"=>$row["icenter"],
            "sales"=>$row["sales"],
            "prospect_admin"=>$row["prospect_admin"],
            "default_contact"=>$row["default_contact"],
            "no_acts"=>$row["no_acts"],
            "no_daily"=>$row["no_daily"],
            "sync_exchange"=>$row["sync_exchange"]

        ));
} 
```

在不同文件的视图内部如下：

```
<tbody data-bind="foreach: items" style="height:113px;">
                    <tr>
                        <td><a href="#" class="projectslink" data-bind="attr: {value: id, title: question}, text:question"></a></td>
                        <td><input type="checkbox" disabled data-bind="value: id, checked: active=='true'"/></td>
                        <td><input type="checkbox" disabled data-bind="value: id, checked: required=='true'"/></td>
<td><input type="checkbox" disabled data-bind="value: id, checked: required=='true'"/></td>
<td><input type="checkbox" disabled data-bind="value: id, checked: required=='true'"/></td>
<td><input type="checkbox" disabled data-bind="value: id, checked: required=='true'"/></td>
<td><input type="checkbox" disabled data-bind="value: id, checked: required=='true'"/></td>
                    </tr> 
```

所以请建议我...

# php - 在javascript中遍历一个有点复杂的json数组

> ID：13152285
> 
> 赞同：0
> 
> 时间：2012-10-31T06:19:01.700
> 
> 标签：php, javascript, json

如何在从AJAX 响应返回的`JSON`in之后进行迭代。`JavaScript``PHP`

`[{ "Topic": { "id": "1", "topic_name": "Playground" } }, { "Topic": { "id": "2", "topic_name": "School Days" } }, { "Topic": { "id": "3", "topic_name": "Sweet home" } }]`

我正在尝试类似但不工作的东西

```
for (i in xmlhttp.responseText)
{   
  document.getElementById('wrap_main').innerHTML+=xmlhttp.responseText[i]['topic'].name + "<br />";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:22:14.740

如果是字符串，首先解析为 json：

```
var jsval = JSON.parse(xmlhttp.responseText);
for(var i = 0; i < jsval.length; i++){
    document.getElementById('wrap_main').innerHTML+=jsval[i]['Topic'].topic_name + "<br />";
} 
```

# jquery - 查找是否包含图像的 div li

> ID：13152288
> 
> 赞同：-2
> 
> 时间：2012-10-31T06:19:08.813
> 
> 标签：jquery, ajax

我怎么能找到 div li 是否包含图像，如果它已经对其进行了一些操作，我尝试了很多方法，但我失败了。我像这样通过ajax上传图像我有一个显示所选div的按钮但是我在这个图像附加到点击事件时采取了一些行动

```
 <div id="display_img4" style="float: left; margin-left: 15px;"><li></li>
  </div> 
 but this code is useless             

$(document).ready(function(){
$('<li></li>').appendTo('#display_img4').html('<img src="<?php echo base_url();?>apps/screen_shots/'+response+'" alt="No image Found" height="75" width="75"/>').addClass('success');
}
<script type="text/javascript">

var img5= $('div#display_img4 > li.success > img');
var li  = $('div#display_img4 > li');var li_img =$('div#display_img4 > li').('img');if(li_img > 0 ){
            img.css("float","right");

            }

            else{ 

                    alert("not image")
             }

</script>
</div> 
```

现在这是我的全部情况。

```
$(document).ready(function(){
 <?php foreach($edit as $rows){ ?>
    <?php foreach($screenshots as $inner_row){ ?>
var btn_screenshot3    = $('#upload-sc3');
    var status_screenshot3 = $('#status_screenshot3');
    var screenshot3        = $('#display_img6');
    var addbtn2         = $('#btn-add2');
    var rembtn2         = $('#rem2');
    var screentxt2      = $('#screen-txt2-admin');
    var container3      = $('#container3');

        var screenshot3=<?php echo (file_exists('apps/'.$rows->application_id.'/sc_3'.$inner_row->screenshot3) ? "true" : "false" ); ?>;
        if(screenshot3 == true){
            $('div#container3').css("display","block");
            $('#rem5').css("display","none");
            $('#rem4').css("display","none");
            $('#rem3').css("display","none");
            $('#rem2').css("display","none");
            $('#rem1').css("display","none");
            $('#upload-sc3').css("display","none");
             $('#screen-txt2-admin').css("display","none");
                $('<li></li>').appendTo('#display_img6').html('<img src="<?php echo base_url();?>apps/<?php echo $rows->application_id; ?>/sc_3<?php echo $inner_row->screenshot3; ?>" alt="No image Found" height="75" width="75"/>').addClass('success');

        $('#screenshot3').html('<input type="hidden" value="<?php echo     $inner_row->screenshot3; ?>" name="screenshot3" id="screenshot3" /><img src="<?php echo   base_url();?>images/remove.jpg" alt"Remove btn" onClick=deleteFileScreenshot3("sc_3<?php echo $inner_row->screenshot3; ?>","apps/<?php echo $rows->application_id; ?>/");>');

                btn_screenshot3.css("display","none");      

                screentxt2.css('display', 'none');
}else{

        $('#btn_add_more').css("display","block");
        $('#rem2').css("display","block");

        } 
```

这是我的ajax调用

```
$(function(){
    var btn_screenshot3    = $('#upload-sc3');
    var status_screenshot3 = $('#status_screenshot3');
    var screenshot3        = $('#display_img6');
    var comm_txt           = $('#screen-txt2');
    new AjaxUpload(btn_screenshot3, {
        action: '<?php echo base_url();?>index.php/apps/apps/add_screenshot3',
        name:   'screenshot3_image',
        onSubmit: function(file, ext){
             if (! (ext && /^(gif|jpg|png)$/.test(ext))){    
                screenshot3.html('');
                status_screenshot3.text('Only gif|jpg|png files are allowed');
                status_screenshot3.css("color","red");
                screenshot3.html('');
                return false;
            }               

        },
        onComplete: function(file, response){
            <!--status_screenshot3.text(file);-->
            screenshot3.html('');
            status_screenshot3.css("color","black");
            status_screenshot3.html('');
            if(response!= ""){

                $('<li></li>').appendTo('#display_img6').html('<img src="<?php echo base_url();?>apps/screen_shots/'+response+'" alt="No image Found" height="75" width="75"/>').addClass('success');

                $('#screenshot3').html('<input type="hidden" value="'+response+'" name="screenshot3" id="screenshot3" />&nbsp;&nbsp;<img src="<?php echo base_url();?>images/remove.jpg" style=" margin-top:10px;" title="Delete" onClick=deleteFileScreenshot3("'+response+'","apps/screen_shots/");>');
                btn_screenshot3.css("display","none");

                comm_txt.css("display","none");

                $('#sc3').hide();

    } else{
                status_screenshot3.css("color","red");
                status_screenshot3.css("margin-left","190px");
                status_screenshot3.text('Images are allowed with dimension maximum 400 X 800  and minimum 250 X 500');

            }
        }
    });     
}); 
```

这是我要附加图像的 HTMl 代码

```
<div id="display_img6" style="float: left; margin-left: 15px;">

                           <li></li>

                          </div> 
```

这段代码工作正常，现在我如何找到包含图像的 div li，如果包含，我会在上面做更多的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:29:16.810

1.  您要在 div 中添加您的 javascript 吗？
2.  您不能在 javascript 中添加 PHP 脚本并期望它动态运行。PHP/JSP 脚本仅在页面构建时运行一次。
3.  你的 AJAX 调用在哪里？

# java - Java：插入/替换到特定大小的排序数组中

> ID：13152299
> 
> 赞同：0
> 
> 时间：2012-10-31T06:20:02.883
> 
> 标签：java, insert, binary-search-tree

所以我正在遍历一个 BinaryTree 并且节点包含字符串以及字符串在读取文件时是否出现多次。我只是在寻找在阅读文件时出现最多的前 10 个单词，所以基本上我只是在比较一个 int 值。

我的问题是我试图找出一种有效的方法来比较和插入一个新节点，如果它们的计数值更大。所以说我有一棵树...

```
 5
  /  \
 3    10
/       \ 
```

1 15

假设数组大小只有 3。我从 1 开始，因为数组在 5 之前都是空的，它看起来像在达到 5 之后......

[1],[3],[5]

当我达到 10 时，它比一切都重要，但我想保持排序，所以我需要将 3 转换为 1、5 转换为 3 和 10 转换为 5。我想知道是否有更有效的方法来做到这一点在每个更高的数字之后移动。它读取超过 10k+ 字的文本文件，所以我希望它尽可能快。

如果不同的数据结构对此更好，请告诉我。我在考虑队列或链表，但我认为数组浪费的空间更少，因为它的大小只有 10。我是一名学生，所以也要温柔：-x。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:55:27.937

一种方法是使用几个数据结构。使用 Map 和 Min-Heap 的建议方法如下：

*   当您从文件中读取单词时，请保持其在哈希映射中的计数（单词，word_count）。
*   保持大小为 10 的最小堆。每当您更新地图中的单词时，增加其计数。现在将此计数与最小堆的顶部元素进行比较。如果 word_count > value_at_top，则替换顶部元素并堆化。
*   完成文件读取后，此堆将包含堆中最常见的 10 个元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:28:21.367

嗯，你总是可以把它扔到一个未排序的 ArrayList 中并运行一个排序：

```
List<Node> myArrayList = new ArrayList<Node>();
//Arbitrarily add subtract, replace, etc.
Collections.sort(myArrayList); 
```

这就是我的建议！

# ios - iOS 6 中的 viewDidLoad 调用一次？

> ID：13152304
> 
> 赞同：9
> 
> 时间：2012-10-31T06:20:18.553
> 
> 标签：ios, uikit, ios6, viewdidload

**注意：**这个问题与最近[弃用的`viewDidUnload`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIViewController/viewDidUnload). 我已经看到围绕这个主题[的“伟大”和合乎逻辑的答案](https://stackoverflow.com/a/12709694/456434)，但显然[它们被证明是错误](http://thejoeconwayblog.wordpress.com/2012/10/04/view-controller-lifecycle-in-ios-6/)的。谨慎行事，如您所见，这个主题非常令人困惑。

[来自 Apple 的文档：](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html#//apple_ref/doc/uid/TP40007457-CH10-SW15)

> 但是，当视图未附加到窗口时，系统会自动释放这些昂贵的资源。大多数视图使用的剩余内存足够小，以至于系统不值得自动清除和重新创建视图层次结构。

所以...我可以安全地假设在 iOS 6 中，只要我没有将 viewController 的视图显式设置为 nil（手动卸载它），`viewDidLoad`在应用程序的整个生命周期内，对于任何分配的 viewController 实例，只会调用一次?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T06:25:06.693

从 iOS 6 开始，您的`UIViewController`子类只会收到`viewDidLoad`一次，除非您编写代码将其设置`view`回`nil`.

但是，我不会在复杂的系统提供的视图控制器（如`UIImagePickerController`. 也许它将自己设置`view`为零。

# azure - 了解 azure 表

> ID：13152307
> 
> 赞同：0
> 
> 时间：2012-10-31T06:20:35.427
> 
> 标签：azure, azure-sql-database, azure-storage, azure-table-storage

我想了解分区键和行键。？

我理解 PartitionKey 的定义，以自动将表的实体分布在许多存储节点上。相同的 PartitionKey 存储在同一个节点上。T RowKey 是实体在其所属分区内的唯一 ID。

所以如果我有这样的记录：

```
StudentName:
StudentId:

Date:
Attendence:
Attendance signed by Teacher: 
```

在这种情况下，我如何定义这个表。我真的不明白实现中的partitionkey和Row key。从定义我理解他们。给定我要插入的记录，我该如何定义它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:36:21.730

这并不完全正确，但是您可以查看分区键的方式是它们定义了一个“组”，并且行键标识该组中的特定记录。

了解 Azure 存储的工作原理对于最有效地建模数据非常重要。您是正确的，分区存储在同一节点上，并且您拥有的唯一索引（用于快速查找）是分区键和行键。

在您的学生记录示例中，此记录的用途是什么，或者更确切地说，记录是如何“分组”在一起的？如果这是一个班级出勤列表，也许您的 PartitionKey 是课程 ID，而 RowKey 是单个学生 ID（PartitionKey = CourseId，RowKey = StudentId）。在这种情况下，您可以获取整个分区并获取完整的课程名册，或者您可以使用 PartitionKey + RowKey 查找单个学生。

另一种方法可能是给每个学生自己的分区（PartitionKey = StudentId），然后行键是特定日期（RowKey = Date）。使用此模型，您可以通过仅查询 PartitionKey 来快速获取学生的整个出勤历史记录，或者如果您想查看他们是否在特定日期出勤，请查询 PartitionKey + RowKey (StudentId + Date)。

有多种方法可以对数据进行建模。这仅取决于您如何使用这些特定记录来获得最佳效果。

# c++ - 视觉工作室 2012 你好世界 C++

> ID：13152314
> 
> 赞同：4
> 
> 时间：2012-10-31T06:21:00.327
> 
> 标签：c++, visual-studio

刚刚安装了 Visual Studio 2012 终极试用版（沉闷和灰色！）。

但是在启动一个“空”c++ 控制台项目并使用以下代码添加一个源文件后：

```
#include <iostream>

using namespace std;

int main() 
{
cout << "Hello World" << endl;

return 0;
} 
```

我收到以下错误：

> 'Project3.exe' (Win32): 加载'C:\Users\baobei\Documents\Visual Studio 2012\Projects\Project3\Debug\Project3.exe'。已加载符号。“Project3.exe”（Win32）：已加载“C:\Windows\SysWOW64\ntdll.dll”。无法找到或打开 PDB 文件。“Project3.exe”（Win32）：已加载“C:\Windows\SysWOW64\kernel32.dll”。无法找到或打开 PDB 文件。“Project3.exe”（Win32）：已加载“C:\Windows\SysWOW64\KernelBase.dll”。无法找到或打开 PDB 文件。“Project3.exe”（Win32）：已加载“C:\Windows\SysWOW64\msvcp110d.dll”。已加载符号。“Project3.exe”（Win32）：已加载“C:\Windows\SysWOW64\msvcr110d.dll”。已加载符号。程序“[6932] Project3.exe”已退出，代码为 0 (0x0)。

我究竟做错了什么？谢谢你的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T06:24:35.207

我不认为你做错了什么。`The program '[6932] Project3.exe' has exited with code 0 (0x0).`表示您的程序已在运行 - 尝试从 中返回 0 以外的值`main()`，然后您应该会看到不同的退出代码。

我认为您的问题是输出控制台立即关闭，因此您没有机会看到输出。请参阅[如何在 Visual C++ 中保持控制台窗口打开？](https://stackoverflow.com/questions/454681/how-to-keep-the-console-window-open-in-visual-c)一些解决方案。

# android - android.view.InflateException: Binary XML file line #83: Error inflating class

> ID：13152318
> 
> 赞同：-1
> 
> 时间：2012-10-31T06:21:14.527
> 
> 标签：android

问题是在将一些图像添加到资源文件夹之前，我的应用程序运行得非常好。添加后，它只是停止工作。我检查了每个图像的扩展名，但最后，我被卡住了，但出现了以下 logcat 消息。另一件事是在大型和普通设备上运行良好，但在小型设备上无法运行。提前致谢。

```
 10-31 11:18:25.431: E/AndroidRuntime(637): FATAL EXCEPTION: main
10-31 11:18:25.431: E/AndroidRuntime(637): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.newdesign/com.example.newdesign.Recipe}: android.view.InflateException: Binary XML file line #83: Error inflating class <unknown>
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.os.Looper.loop(Looper.java:137)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.app.ActivityThread.main(ActivityThread.java:4424)
10-31 11:18:25.431: E/AndroidRuntime(637):  at java.lang.reflect.Method.invokeNative(Native Method)
10-31 11:18:25.431: E/AndroidRuntime(637):  at java.lang.reflect.Method.invoke(Method.java:511)
10-31 11:18:25.431: E/AndroidRuntime(637):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-31 11:18:25.431: E/AndroidRuntime(637):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-31 11:18:25.431: E/AndroidRuntime(637):  at dalvik.system.NativeStart.main(Native Method)
10-31 11:18:25.431: E/AndroidRuntime(637): Caused by: android.view.InflateException: Binary XML file line #83: Error inflating class <unknown>
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.view.LayoutInflater.createView(LayoutInflater.java:606)
10-31 11:18:25.431: E/AndroidRuntime(637):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
10-31 11:18:25.431: E/AndroidRuntime(637):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.app.Activity.setContentView(Activity.java:1835)
10-31 11:18:25.431: E/AndroidRuntime(637):  at com.example.newdesign.Recipe.onCreate(Recipe.java:58)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.app.Activity.performCreate(Activity.java:4465)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
10-31 11:18:25.431: E/AndroidRuntime(637):  ... 11 more
10-31 11:18:25.431: E/AndroidRuntime(637): Caused by: java.lang.reflect.InvocationTargetException
10-31 11:18:25.431: E/AndroidRuntime(637):  at java.lang.reflect.Constructor.constructNative(Native Method)
10-31 11:18:25.431: E/AndroidRuntime(637):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.view.LayoutInflater.createView(LayoutInflater.java:586)
10-31 11:18:25.431: E/AndroidRuntime(637):  ... 24 more
10-31 11:18:25.431: E/AndroidRuntime(637): Caused by: java.lang.OutOfMemoryError
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:483)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.content.res.Resources.loadDrawable(Resources.java:1935)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.view.View.<init>(View.java:2785)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.view.View.<init>(View.java:2722)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.view.ViewGroup.<init>(ViewGroup.java:379)
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.widget.RelativeLayout.<init>(RelativeLayout.java:174)
10-31 11:18:25.431: E/AndroidRuntime(637):  ... 27 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T06:24:33.043

从这几行来看

```
Caused by: java.lang.OutOfMemoryError
10-31 11:18:25.431: E/AndroidRuntime(637):  at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method) 
```

看起来你在某处有一个太大的位图（可能在资源中）

# gwt - 如何使用我的本地机器名或域名而不是本地 IP(127.0.0.1)/localhost 来运行 GWT Web 应用程序？

> ID：13152319
> 
> 赞同：0
> 
> 时间：2012-10-31T06:21:17.797
> 
> 标签：gwt

我对 GWT 很陌生，我正在使用我的本地 IP 地址或 localhost 和 URL 中的 8888 端口通过我的 eclipse Europa（GWT 托管模式）运行我的 GWT Web 应用程序。如下所示：

```
http://127.0.0.1:8888/login.jsp?gwt.codesvr=127.0.0.1:9997 
```

或者

```
http://localhost:8888/login.jsp?gwt.codesvr=127.0.0.1:9997 
```

现在，当我尝试通过用我的本地计算机名称替换上面的 localhost/IP 地址来运行相同的应用程序时（例如：sandip.com。“sandip.com”是我的完整计算机名称），例如：`http://sandip.com:8888/login.jsp?gwt.codesvr=127.0.0.1:9997` 它显示以下消息，因此不工作。

* * *

主机未找到

DNS 错误（您要查找的页面的主机名不存在）或服务器不接受连接。

请检查主机名是否拼写正确。

* * *

但是我已经尝试为我的其他基于非 GWT 的 Web 应用程序执行此操作，并且它运行正常。我需要做任何改变吗？请建议。

而且我想将此默认端口（即8888）更改为其他一些例如：8773，并希望使用https而不是http。

如果我在本地 Tomcat 中单独部署，则上述要求是可能的，在这种情况下，如果我必须更改 eclipse 中的任何代码，我需要在 Tomcat 中重新部署以进行测试。有没有办法通过 Eclipse（即 GWT 托管模式）来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:16:07.697

首先，我很确定您将无法在 HTTPS 上以托管模式运行您的 GWT 应用程序！这将不得不等到您实际在您的 sandip.com 网络服务器上构建和部署它...

然后，

*   用于`-port 9876`在不同的端口上运行托管模式。
*   使用`-bindAddress 0.0.0.0`（或另一个非本地主机 IP）使您的应用程序在本地主机之外的其他机器上可用。

至于 DNS 错误，是否`sandip.com`在您的网络内部解决？

使用托管模式的全部目的是为了便于开发。您永远不应该向世界公开您的托管模式应用程序，您明白吗？

干杯，

# c# - 即使我正在修改不同的集合，也会出现“集合已修改”错误

> ID：13152320
> 
> 赞同：3
> 
> 时间：2012-10-31T06:21:23.047
> 
> 标签：c#, asp.net, collections

好的，我知道我不允许修改我当前正在遍历的集合，但请查看下面的代码，您会看到我什至没有触及执行枚举的集合：

```
 MenuItemCollection tempItems = new MenuItemCollection();
    foreach (MenuItem item in mainMenu.Items)
    {
        if (item.Value != "pen")
            tempItems.Add(item);
    } 
```

如您所见，我添加项目的集合与我正在迭代的集合不同。但我仍然得到错误：

> “集合已修改；枚举操作可能无法执行”。

但是，如果我对代码稍作更改并将 MenuItemCollection 替换为 List，它可以工作：

```
 List<MenuItem> tempItems = new List<MenuItem>();
    foreach (MenuItem item in mainMenu.Items)
    {
        if (item.Value != "pen")
            tempItems.Add(item);
    } 
```

有人可以解释一下为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T06:25:33.330

当您添加`MenuItem`到另一个`MenuItemCollection`时，它会从它的所有者（即`mainMenu`）中删除。因此原始集合被修改：

```
public void Add(MenuItem child)
{
    if ((child.Owner != null) && (child.Parent == null))
         child.Owner.Items.Remove(child);

    if (child.Parent != null)    
        child.Parent.ChildItems.Remove(child);

    if (this._owner != null)
    {
        child.SetParent(this._owner);
        child.SetOwner(this._owner.Owner);
    }
    // etc
} 
```

*顺便说一句*，这对于 ASP.NET 和 WinForms 都是如此。对于 WinForms 代码会略有不同。

# api - Flickr API 使用脚本检索统计信息，无需用户登录

> ID：13152321
> 
> 赞同：1
> 
> 时间：2012-10-31T06:21:26.180
> 
> 标签：api, authentication, cron, flickr

有什么方法可以获取 Flickr API 统计信息，而无需每次访问 API 时都使用 OAuth 登录的脚本？我设想运行一个 cron 作业，每周/每月将我需要的数据输出到一个文件中并显示该文件的内容，但是我不确定如何让 cron 作业脚本持久访问 Flickr API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T08:13:04.603

今天早上我在考虑同样的用例。使用脚本定期从 API 获取照片统计信息。我认为这不可能，因为 Flickr 似乎只支持“三足身份验证”（即他们需要用户登录凭据才能获取访问令牌）。

*如果*flickr支持更简单的 Oauth（或 Oauth2）形式，它只需要您请求一个请求令牌，用您的令牌凭证（apikey、secret）将其交换为访问令牌。

# sql-server - 查找具有执行权限的存储过程

> ID：13152329
> 
> 赞同：15
> 
> 时间：2012-10-31T06:22:07.393
> 
> 标签：sql-server, stored-procedures, sql-server-2008-r2

我正在使用 SQL Server 2008 R2。我需要列出数据库用户（MYUSER）具有执行权限的所有存储过程。

另外，我需要列出哪些是用户没有 EXECUTE 权限的存储过程 - 但可以读取存储过程的脚本

是否有任何用于这些目的的 SQL 语句或辅助函数？

参考：

1.  [授予对某个数据库中所有存储过程的执行权限](https://stackoverflow.com/questions/5109581/granting-execute-permission-on-all-stored-procedures-in-a-certain-database)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-31T07:54:14.010

使用[`HAS_PERMS_BY_NAME`](http://msdn.microsoft.com/en-us/library/ms189802.aspx)：

```
select name, 
    has_perms_by_name(name, 'OBJECT', 'EXECUTE') as has_execute,
    has_perms_by_name(name, 'OBJECT', 'VIEW DEFINITION') as has_view_definition
from sys.procedures 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-08-07T08:56:19.850

要检查其他用户的权限，请使用以下命令：

```
use my_db;
EXECUTE AS user = 'my_user'
SELECT SUSER_NAME(), USER_NAME();
select name, 
    has_perms_by_name(name, 'OBJECT', 'EXECUTE') as has_execute

from sys.procedures
where name = 'myprocname';
revert; 
```

适用于我的 SQL Server 2012。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-07-07T10:52:14.227

由于缺少权利，knb 的答案对我不起作用。（针对与当前用户不同的用户的解决方案）

> 无法作为数据库主体执行，因为主体“我的用户”不存在，无法模拟此类主体，或者您没有权限。

此[答案](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/ff9b77a8-7358-4c71-88b1-0e420d7c25ab/list-of-stored-procedures-with-permission-for-executing-for-user?forum=sqlsecurity)显示了如何获取特定数据库用户（“我的用户”）明确授予 EXECUTE 权限的存储过程列表：

```
SELECT [name]
FROM sys.objects obj
INNER JOIN sys.database_permissions dp ON dp.major_id = obj.object_id
WHERE obj.[type] = 'P' -- stored procedure
AND dp.permission_name = 'EXECUTE'
AND dp.state IN ('G', 'W') -- GRANT or GRANT WITH GRANT
AND dp.grantee_principal_id = 
    (SELECT principal_id
    FROM sys.database_principals 
    WHERE [name] = 'my user') 
```

我对其进行了如下修改以获得我需要的列表：

```
SELECT [name]
FROM sys.procedures
WHERE [name] NOT IN
    (SELECT [name]
    FROM sys.objects obj
    INNER JOIN sys.database_permissions dp ON dp.major_id = obj.object_id
    WHERE obj.[type] = 'P' -- stored procedure
    AND dp.permission_name = 'EXECUTE'
    AND dp.state IN ('G', 'W') -- GRANT or GRANT WITH GRANT
    AND dp.grantee_principal_id = 
        (SELECT principal_id
        FROM sys.database_principals 
        WHERE [name] = 'my user')) 
```

在 Microsoft SQL Server 2008 R2 上测试

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-01T22:44:55.590

`HAS_PERMS_BY_NAME`，如在第一个答案中提供的脚本的上下文中使用的那样，仅当您连接时才会提供所需的结果，`"MYUSER"`因为此功能

> "评估当前用户的有效权限"

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-11-06T19:14:59.510

扩展上面接受的答案，为了检查`dbo`模式之外的对象，请使用以下语句。

```
 SELECT 
    name,
    HAS_PERMS_BY_NAME(QUOTENAME(SCHEMA_NAME(schema_id)) + '.' + QUOTENAME(name), 'OBJECT', 'EXECUTE') AS has_execute,
    HAS_PERMS_BY_NAME(QUOTENAME(SCHEMA_NAME(schema_id)) + '.' + QUOTENAME(name), 'OBJECT', 'VIEW DEFINITION') AS has_view_definition
  FROM sys.procedures 
```

# amazon-web-services - AmazonClientManager 扫描有时（通常）返回 nil

> ID：13152331
> 
> 赞同：0
> 
> 时间：2012-10-31T06:22:17.333
> 
> 标签：amazon-web-services, amazon-dynamodb

我在 DynamoDB 中有一些记录。但是查询***[[AmazonClientManager ddb] scan:]***有时加载时间过长并返回 nil。这个问题的可能原因是什么？我能猜到的一件事是，这可能是网络问题。我不确定。但这种情况经常发生。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:38:53.113

I had a similar problem with request taking up to 5 sec to complete. This delays were visible in CloudWatch using the "max" aggregation function. This showed it is a problem on Amazon side.

The support told us that 5 sec is the "failover" delay on their side. This indicates that one of DynamoDB partitions had "troubles" (there are a least 2 of them)

As Scan is not capable of "Strong consistency", I guess it is also not capable of failing over. CloudWatch statistics might be a good starting point to validate this hypothesis.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T07:10:04.197

问题是超出了特定表的吞吐能力。所以在 7 次自动重试后得到了*nil 。*谢谢你们每一个人的帮助！

# mysql - 获取表字段值的总和

> ID：13152334
> 
> 赞同：-1
> 
> 时间：2012-10-31T06:22:39.733
> 
> 标签：mysql

我有学生表包含字段：值

```
firstname : John
lastname : Doe
english-grd : 87
math-grd : 80
science-grd : 85
total-grade : 0 
```

我的问题是我将如何仅使用“-grd”获取字段并总计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:29:55.497

询问：

```
Select english-grd,math-grd,science-grd,(english-grd+math-grd+science-grd) as tot from table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:36:49.777

```
update tableName set `total-grade` = (
`english-grd` + `math-grd` + `science-grd`
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:46:57.567

```
// this example just update one row
$student_id = 1; // example only
$res=mysql_query("SELECT * FROM Student where student_id='" . $student_id . "'");
$field_count = mysql_num_fields($res); //count field numbers
$total_grades = 0;
for ($i = 0; $i < $field_count; $i++)
{   
    $field_name=mysql_field_name($res, $i);
    if (substr($field_name,-4) == '-grd')
    {
        $total_grades = $total_grades + mysql_result($res,0,$i); // 0 refer to first row ...there is only one row from $res...$i is offset of the column
    }
}
mysql_query("update Student SET total-grade='" . $total_grades . "' where student_id='" . $student_id . "'"); 
```

# php - 创建 if 语句变量

> ID：13152337
> 
> 赞同：-3
> 
> 时间：2012-10-31T06:23:09.110
> 
> 标签：php, variables, if-statement, return

我正在尝试创建一个变量，使我能够从我的 HTML 的正确部分回显响应，但我不确定如何开始。

```
if($var == $var2)
{
  $var3
}else{
 echo 'images not found';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:35:18.183

为此，您可以简单地编写：

```
if($var == $var2)
{
    foreach ($var3 as $img)
        echo "<img src='".$img."' />";
}else{
echo 'images not found';
} 
```

你有什么问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:35:30.227

也许像这样的东西......

```
$result = '';    

if($var == $var2)
{
    foreach($var3 as $img) {
        $result .= '<img ...>';
    }
}else{
   $result = 'images not found';
} 
```

然后你可以回显`$result`变量

# sql - 具有大量分区的范围分区表创建

> ID：13152338
> 
> 赞同：0
> 
> 时间：2012-10-31T06:23:11.853
> 
> 标签：sql, oracle, database-partitioning

我必须创建一个包含两百个分区的范围分区表。例如：

```
CREATE TABLE emp (
     empno NUMBER(4), 
     ename VARCHAR2(30), 
     sal   NUMBER
) 
PARTITION BY RANGE(empno) (
partition e1 values less than (1000)     , 
partition e2 values less than (2000)     , 
...
partition e200 values less than (MAXVALUE) 
```

);

有没有一种方法可以指定范围间隔而不写两百行来指定范围？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T07:35:32.527

```
CREATE TABLE emp (
     empno NUMBER(4), 
     ename VARCHAR2(30), 
     sal   NUMBER
) 
PARTITION BY RANGE(empno) (
partition e1 values less than (1000));

begin
  for k in 2..200 
  loop
     execute immediate 
       'alter table emp add partition e'||k||' values less than  ('||k*1000||')';
  end loop
end; 
```

**更新：**在 11g 中存在指定范围分区间隔的功能，当您插入表时将创建分区。

但我不喜欢它，也不推荐它，原因有两个：

1 您应该始终保留第一个分区，因为是参考。如果你试图放弃它，你会得到`SQL Error: ORA-14758: Last partition in the range section cannot be dropped`；

2 您无法控制分区名称（AFAIK）~~和间隔（这很难看）。如果您在将来错误地插入了一个值，则某些分区将被跳过，您将得到胖分区：（~~ 研究了一点，没有胖分区。添加到示例中。）

```
 Create table Z_TB_PART_TEST(
    id number
  )
  partition by range(id)
  interval(1000)
 (
    PARTITION PART_01 VALUES LESS THAN (1000)
 );  

 INSERT INTO Z_TB_PART_TEST values (1500);
 INSERT INTO Z_TB_PART_TEST VALUES (10000);
 INSERT INTO Z_TB_PART_TEST VALUES (5000);

  SELECT partition_name , high_value
  FROM USER_TAB_PARTITIONS
  WHERE table_name = 'Z_TB_PART_TEST';

  PART_01   1000
  SYS_P141  2000
  SYS_P142  11000
  SYS_P143  6000 
```

**UPDATE2**：Nicholas Krasnov 在评论中指出了第一点的解决方法：

> ORA-14758 怎么样？很容易避免：我们暂时将区间分区表转换为范围分区表（`alter table tb_table_test set interval()`），删除分区，然后切换回区间分区表（`alter table tb_part_test set interval(1000)`）。

它有效，我已经测试过了。但是应该注意，所有分区都会冻结，它们将是范围分区。如果您有间隙，则将保留（间隙中不会添加分区）。因此，参考分区将是更改为`interval`. 这就是错误所说的：`Last partition in the range section cannot be dropped`。

因此，您将获得一段范围分区和一段区间分区及其所有优点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T08:37:29.960

您没有说您使用的是什么版本的 Oracle，但如果您的 Oracle 版本是 11g，那么有语句`INTERVAL`子句`CREATE TABLE`允许您为表建立间隔分区。这是一个例子：

```
SQL> Create table TB_PART_TEST(
  2    id number
  3  )
  4  partition by range(id)
  5  interval(1000)
  6  (
  7    partition Part_01 values less than (1000)
  8  );  

 table created

 SQL> select partition_name
   2       , high_value
   3    from user_tab_partitions
   4   where table_name = 'TB_PART_TEST';

PARTITION_NAME  HIGH_VALUE
 ------------------------------
  PART_01           1000 

  SQL> insert into TB_PART_TEST(id)
    2    values(1500); 

  1 row created

  SQL> commit;

  commit complete

  SQL> select partition_name
   2       , high_value
   3    from user_tab_partitions
   4   where table_name = 'TB_PART_TEST';

  PARTITION_NAME  HIGH_VALUE
 ------------------------------
  PART_01           1000 
  SYS_P63           2000 
```

# javascript - html2canvas.js | 将图像发送到服务器的变量

> ID：13152343
> 
> 赞同：0
> 
> 时间：2012-10-31T06:23:51.330
> 
> 标签：javascript, jquery, html2canvas

我正在使用 jquery 和 codeigniter 创建一个自定义毕业偷配置器。我现在已经得到了我想要的一切，我的计划是在他们单击添加到购物车按钮时使用 html2canvas 截取被盗 div 的屏幕截图。我需要将此图像传递给隐藏的输入值或其他东西，以便我可以将图像写入服务器。

被盗配置器可以在这里查看：[自定义被盗配置](http://faithpointdallas.com/ecom/page/customStole)器。当您单击“添加到购物车”按钮时，它当前会生成被盗的图像，并且看起来它工作得很好。

我只是坚持使用最佳方式或任何方式将该图像的 URL 放在隐藏的输入中，或者以某种方式将图像移动到文件夹并写入路径。

我这样做的目的是，在购物车中可以有一个指向“自定义偷窃预览”的链接，当他们点击它时，它会显示这个画布渲染。

任何关于我如何实现这一点的帮助都会有很大帮助。谢谢。

顺便说一下，这里是做屏幕截图的 JS：

```
$('#addToCart').click(function(event) {
event.preventDefault();
 $('div.customstole').html2canvas();
 var queue = html2canvas.Parse();
 var canvas = html2canvas.Renderer(queue,{elements:{length:1}});
 var img = canvas.toDataURL();
 $('body').append(img); 
```

});

编辑：

```
$('#addToCart').click(function(event) {
    event.preventDefault();
     $('div.customstole').html2canvas();
     var queue = html2canvas.Parse();
     var canvas = html2canvas.Renderer(queue,{elements:{length:1}});
     $('#dataUrl').val(canvas.toDataURL());
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:49:58.890

将数据 URL 写入隐藏输入，然后在服务器端，`base64_decode()`从结果字符串写入图像。

# jsf-2 - Glassfish 3.1.1 自定义 500/404/“在 ExternalContext 中找不到作为资源”页面中的过滤器

> ID：13152344
> 
> 赞同：0
> 
> 时间：2012-10-31T06:23:56.087
> 
> 标签：jsf-2, glassfish, glassfish-3

我需要自定义“在 ExternalContext 中找不到作为资源”页面。我已尝试更改 web.xml 以添加 404 和 500`error-code`部分：

```
<error-page>
  <error-code>500</error-code>
  <location>/500.xhtml</location>
</error-page>
<error-page>
  <error-code>404</error-code>
  <location>/404.xhtml</location>
</error-page> 
```

并遵循 SO/forums/blog 提供的信息，例如
[http://duckranger.com/2010/08/configure-a-custom-404-page-in-glassfish/](http://duckranger.com/2010/08/configure-a-custom-404-page-in-glassfish/)
[如何在 JSF 2.0 中创建自定义 404 消息？](https://stackoverflow.com/questions/7294171/how-to-create-custom-404-messages-in-jsf-2-0)

但没有成功：
我得到的只是一个空白页面（或“此 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示。”浏览器生成）和以下堆栈跟踪一个不存在的页面：

```
SEVERE: doFilter
/m/test.xhtml Not Found in ExternalContext as a Resource
  com.sun.faces.context.FacesFileNotFoundException: /m/test.xhtml Not Found in ExternalContext as a Resource
at com.sun.faces.facelets.impl.DefaultFaceletFactory.resolveURL(DefaultFaceletFactory.java:232)
at com.sun.faces.facelets.impl.DefaultFaceletFactory.resolveURL(DefaultFaceletFactory.java:273)
at com.sun.faces.facelets.impl.DefaultFaceletFactory.getMetadataFacelet(DefaultFaceletFactory.java:209)
at com.sun.faces.application.view.ViewMetadataImpl.createMetadataView(ViewMetadataImpl.java:114)
at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:233)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at com.example.v2.filter.AbstractFilter.doFilter(AbstractFilter.java:55)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at com.example.v2.filter.AbstractFilter.doFilter(AbstractFilter.java:55)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at com.example.v2.filter.AbstractFilter.doFilter(AbstractFilter.java:55)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at com.example.v2.filter.AbstractFilter.doFilter(AbstractFilter.java:55)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at com.example.v2.filter.MobileFilter.skip(MobileFilter.java:111)
at com.example.v2.filter.MobileFilter.doFilter(MobileFilter.java:67)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722) 
```

**EDIT and FIX**
In some blog/forum, the Filter chaining examples are as follows:

```
try {
  chain.doFilter(request, response);
  } catch (Throwable t) { // or Exception
    // do some logging
  } 
```

This is wrong and prevents JSF to continue the normal flow of error processing. I kept the logging but re-throw the Exception. After that the `error-code` 500 in `web.xml` takes care of the issue.

```
try {
  chain.doFilter(request, response);
  } catch (Throwable t) { // or Exception
    // do some logging
    throw t; // so JSF/Container can continue normal low of error handling
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:23:48.377

This is a Facelets-specific "feature". A missing resource results in a `FacesFileNotFoundException` (which is a subclass of `FileNotFoundException`) being **thrown** instead of that the response is been returned with a 404 status.

To cover that, add the following to `web.xml` as well:

```
<error-page>
    <exception-type>java.io.FileNotFoundException</exception-type>
    <location>/404.xhtml</location>
</error-page> 
```

Alternatively, you could use [OmniFaces](http://omnifaces.org)' [`FacesExceptionFilter`](http://showcase.omnifaces.org/filters/FacesExceptionFilter) which transparently delegates those exceptions to 404's.

As to the second problem:

> *All I get is a blank page (or a "This XML file does not appear to have any style information associated with it.*

The error page `<location>` has to match `FacesServlet`'s URL pattern as well. Better is to just map the `FacesServlet` on `*.xhtml` directly, this way you never need to worry about virtual URLs.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:16:07.583

In some blog/forum, the Filter chaining examples I had blindly copied are as follows:

```
try {
  chain.doFilter(request, response);
  } catch (Throwable t) { // or Exception
    // do some logging
  } 
```

This is wrong and prevents JSF to continue the normal flow of error processing. I kept the logging but re-throw the Exception. After that the `error-code` 500 in `web.xml` takes care of the issue.

```
try {
  chain.doFilter(request, response);
  } catch (Throwable t) { // or Exception
    // do some logging
    throw t; // so JSF/Container can continue normal low of error handling
  } 
```

# regex - sed 替代品不能按预期工作

> ID：13152345
> 
> 赞同：0
> 
> 时间：2012-10-31T06:24:01.983
> 
> 标签：regex, shell, sed

我正在执行一个 shell 脚本，我应该在其中替换文件中的字符串。所以我当然正在使用`sed`它。该字符串类似于：

```
<!--replace-->
<script src="1.js"></script>
<script src="2.js"></script>
<!--/replace--> 
```

这应该替换为：

```
<script src="3.js"></script> 
```

所以我试图这样做：

```
$ sed "s/<\!--replace-->.\*<\!--\/replace-->/<script src=\"3.js\"><\/script>/g" file.html 
```

但这并不能解决问题。我错过了什么？

UPD：`\n`在这种情况下，从文件中删除不是解决方案，仅仅是因为文件应该是可读的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:55:34.317

问题与换行有关，您可以更改正则表达式以匹配换行，或使用以下方法删除换行`tr`：

```
user@machine:/tmp$ cat s.txt 

<!--replace-->
<script src="1.js"></script>
<script src="2.js"></script>
<!--/replace-->

user@machine:/tmp$ tr "\n" " " < s.txt | sed "s#<\!--replace-->.*<\!--/replace-->#<script src="3.js"></script>#g" 

<script src=3.js></script> 
```

如果您不想删除换行符，您可以：

a) 尝试使用 SED 的解决方案，如此处所述： [如何告诉 sed “点匹配新行”](https://stackoverflow.com/questions/8624283/how-to-tell-sed-dot-match-new-line)

b) 使用 perl 或 python 替换多行正则表达式，使用`s`修饰符，换行符将保持不变：

```
user@mmmm:/tmp$ cat s.txt 

<!--replace-->
<script src="1.js"></script>
<script src="2.js"></script>
<!--/replace-->

Dummy content containing
newlines for test.

user@mmmm:/tmp$ perl -i -pe 'BEGIN{undef $/;} s#<\!--replace-->.*<\!--/replace-->#<script src="3.js"></script>#gsm' s.txt 

user@mmmm:/tmp$ cat s.txt 

<script src="3.js"></script>

Dummy content containing
newlines for test. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:29:51.447

这是一种方法：删除 ( `d`) 从包含的行开始到包含`<!--replace-->`的行的所有行`<!--\replace-->`。但是对于块的第一行，`i`在删除之前插入（）替换行。

```
sed '/<!--replace-->/,/<!--\/replace-->/ {
         /<!--replace-->/ i\<script src="3.js"></script>
         d      
     }' file 
```

* * *

另一种方法是将整个块附加到模式空间中，然后用替换行替换模式空间（即替换整个块）。

```
sed '/<!--replace-->/ {
         :loop
         N
         /<!--\/replace-->/ ! b loop
         c\<script src="3.js"></script>
     }' file 
```

**详情**：

1.  如果该行包含`<!--replace-->`，进入`{..}`
2.  `:loop`是一个标签（它是一个你可以去的标记）
3.  `N`转到下一行并将下一行附加到模式空间。
4.  如果该行不包含`<!--/replace-->`，则转到（`b`牧场）标签`loop`
5.  重复 3-4 直到行包含`<!--/replace-->`. 此时，用`c`替换线替换（hange）模式空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:10:18.717

这可能对您有用（GNU sed）：

```
sed '/<!--replace-->/!b;:a;$!{N;/<!--\/replace-->/!ba};c\<script src="3.js"></script>' file 
```

# iphone - - (UICollectionViewCell*)collectionView:(UICollectionView*)collectionView cellForItemAtIndexPath 未调用

> ID：13152351
> 
> 赞同：0
> 
> 时间：2012-10-31T06:24:44.473
> 
> 标签：iphone, ios, ipad, uicollectionview

我有这两个代表：

```
#pragma mark = UICollectionViewDataSource

- (NSInteger)collectionView:(UICollectionView*)collectionView numberOfItemsInSection:(NSInteger)section
{
    NSLog(@"COUNT IS %d", [[AHImageDataSource sharedDataSource] count]);
    return [[AHImageDataSource sharedDataSource] count];
}

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView*)collectionView
{
    return 1;
} 
```

numberOfItemsInSection 返回 12。但未调用 cellForItem。当我只是硬编码 numberOfItemsInSection 时，它实际上被调用了。知道为什么这个奇怪的问题正在发生吗？

这是一个演示该问题的[示例项目](https://dl.dropbox.com/u/19680269/Test.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T12:03:34.730

如果`[[AHImageDataSource sharedDataSource] count]`正在返回`nil`，`cellForItemAtIndexPath`则不会被调用。所以请确保它`[[AHImageDataSource sharedDataSource] count]`有一些价值。

我无法下载您的示例项目，所以帮不上什么忙。:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:09:37.843

你设置了代理吗？...

确保方法名称正确，否则您遗漏了一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T01:31:02.320

文件 PintCollectionViewLayout.m 未包含在目标构建阶段的编译源中。补充一下，为我解决了这个问题。

# c - C struct print，解码这段代码？

> ID：13152353
> 
> 赞同：1
> 
> 时间：2012-10-31T06:24:50.463
> 
> 标签：c, memory-address

我正在准备考试，我正在尝试解决一些练习问题。我已经为此工作了一段时间..但无法弄清楚。请看一下代码片段：

```
 union {
   int i;
   short x;
   unsigned short u;
   float f;
 } testout;
 testout.i=0xC0208000; 
```

在我问这个问题之前，有人可以向我解释一下上面的代码是如何工作的吗？我的猜测是，`testout.i=0xC0208000`要么放入 int、short、unsigned short 或 float，然后将结果放入该地址。（？）

问题是如果我们写会打印什么`printf("%d", testout.x)`？我知道我们应该期待数字......但我不知道他们从哪里得到数字......没有输出。

任何解释将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T06:31:57.600

定义联合时，会为联合中最大的类型分配内存。在您的情况下，它是`float`. 当您说`testout.i=0xC0208000;`0xC0208000 存储在分配的内存中时。当您尝试打印时，`testout.x`printf 将在联合内存中检索 4 个字节（假设 4 个字节 int）的数据并将其打印为整数。[你可以在这里](http://www.tutorialspoint.com/cprogramming/c_unions.htm)阅读工会

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:30:58.153

在 Little Endian 机器（x86、x64 等）上，答案是`-32768`.

这里是小端的答案的原因，从中你应该可以找出大端的原因。

A`union`将其所有成员存储在同一内存位置，其大小由其最大成员大小决定。假设`sizeof(int)`为 4 个字节，`sizeof(float)`为 4 个字节，这意味着`testout`成员存储在 4 个字节的位置。现在由于我们有 Little Endian 架构，内存中`testout.i = 0xC0208000`存储的语句`i`如下：

*   最低有效字节（LSB）`0x00`存储在最低字节地址，假设该地址为`0x123456`。
*   `0x80`存储在下一个更高的地址，即`0x123457`，并且`0x20`存储在地址`0x123458`。
*   最高有效字节 (MSB)`0xC0`存储在`0x123459`.

视觉上是这样的

```
Addresses       ->  0x123459    0x123458    0x123457    0x123456
Binary Values   ->  11000000    00100000    10000000    00000000
Hex Values      ->  0xC0        0x20        0x80        0x00 
```

这里的*关键点*是**所有成员`union`都存储在相同的字节地址开始。**因此，当您访问时`testout.x`，is 的 LSB`x`是`0x00`的值`0x123456`，MSB 是`0x80`下一个更高地址的值`0x123457`，这给了我们一个 2 字节的表示形式`0x8000`，等于十进制`-32768`。

# html - 如何在不使用 javascript 的情况下设置 DIV 标签的滚动条？

> ID：13152354
> 
> 赞同：0
> 
> 时间：2012-10-31T06:24:52.467
> 
> 标签：html, css

```
<div id = "nav"></div> 
```

我已经知道如何使用 Javascript(jQUery) 设置该 DIV 的滚动条位置。但我想知道的是如何使用 HTML 或 CSS 属性进行设置，例如

```
<div id = "nav" scrollTop = "100"></div> 
```

或者

```
<div id = "nav" style = "scrollTop:100px"></div> 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:40:53.683

如果不使用 javascript，您无法完成此操作以专门转到页面上的确切位置。
但是，您可以做的是：

使用与其关联的样式创建一个 div。你想去的位置。

```
<div id="top10px"></div> 
```

并将css应用为：

```
#top10px {position:absolute;top:10px;left:0} 
```

并让这些 div 成为您想要导航到的任何地方，

```
<div id="top0px"></div>    <div id="top100px"></div>      <div id="bottom0px"></div> 
```

并相应地应用样式。

这是一个小提琴：[小提琴](http://jsfiddle.net/3LvAZ/)

# javascript - 为什么 `Object.prototype.toString.call(null)` 在非严格模式下工作？

> ID：13152355
> 
> 赞同：2
> 
> 时间：2012-10-31T06:25:02.540
> 
> 标签：javascript, ecmascript-5

为什么在 ES5 非严格模式下会出现以下结果？

```
Object.prototype.toString.call(null);
=> [object Null] 
```

鉴于

```
Object.prototype.toString.call(window);
=> [object global] 
```

在非严格模式下这两行不应该是相同的，因为`someFunction.call(null)`应该等于`someFunction()`which 应该等于`someFunction.call(window)`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T06:29:42.700

根据 ES5，在非严格模式下[输入函数代码时：](http://ecma-international.org/ecma-262/5.1/#sec-10.4.3)

> 否则，如果 thisArg 为 null 或未定义，则将 ThisBinding 设置为全局对象。

所以是的，似乎`this`应该默认为全局对象。**但**在[§15.3.4.4 Function.prototype.call](http://ecma-international.org/ecma-262/5.1/#sec-15.3.4.4)中有：

> thisArg 值作为 this 值不加修改地传递。这是对第 3 版的更改，其中 undefined 或 null thisArg 被替换为全局对象，并且 ToObject 应用于所有其他值，并且该结果作为 this 值传递。

最后：

> [15.2.4.2 Object.prototype.toString()](http://ecma-international.org/ecma-262/5.1/#sec-15.2.4.2)
> 
> 当调用 toString 方法时，会执行以下步骤：
> 
> ```
> If the this value is undefined, return "[object Undefined]".
> If the this value is null, return "[object Null]". 
> ```

# delphi - freepascal/delphi 组件没有出现（我认为是 z 顺序问题）

> ID：13152360
> 
> 赞同：0
> 
> 时间：2012-10-31T06:25:18.863
> 
> 标签：delphi, freepascal, lazarus, z-order

我在表格上有一个面板。然后我动态地创建更多面板并将它们放置在表单上，​​使其看起来像一个菜单。

我错误地删除了主面板。然后将其作为新控件放回去。

现在动态按钮不显示。但是没有错误。所以我猜测动态组件在那里但不可见（在主面板后面）。

有没有办法解决这个问题？我似乎找不到组件的 z 顺序属性。

请帮忙。

这是代码段：

```
 For MenuItemCount:= 1 to MenuItemLimit Do
      Begin
      MenuButtons[MenuItemCount] := TPanel.Create(Self);
      With MenuButtons[MenuItemCount] do
          begin

            Width:=180 - (10*MenuItem[MenuItemCount].Level);
            Left:=4+10*MenuItem[MenuItemCount].Level;

            Height:=25;
            Top:= 5 + Height * (MenuItemCount-1);
            Color:= clMenu;
            Cursor:=crHandPoint;

            Parent := MenuGroup; //Parent container for the items.

            Caption := MenuItem[MenuItemCount].Title;

      end;//End for 
```

`MenuGroup`是在设计时放置的父面板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:35:52.950

有一种方法`SendToBack`，它可以让您将控件发送到后面（及其`BringToFront`对应物）。

但我认为它不会解决你的问题。默认情况下，组件的“Z 顺序”是它们的创建顺序。设计时面板是在动态面板之前创建的，即使您将其删除并在表单上放置了一个新面板也是如此。

我认为发生的事情（尽管没有看到您的代码很难猜测）是您尝试按名称查找面板，如下所示：

```
var
  ParentPanel: TPanel;
  DynamicPanel: TPanel;
begin
  ParentPanel := FindComponent('PanelX') as TPanel;

  DynamicPanel := TPanel.Create(Self);
  DynamicPanel.Parent := ParentPanel; 
```

这会起作用，但是如果您删除 PanelX，并放入一个名称稍有不同的新面板，FindComponent 将找不到该面板并返回 nil。DynamicPanels 将 nil 作为父级，导致它们不显示。

# python - python中的强数字

> ID：13152364
> 
> 赞同：0
> 
> 时间：2012-10-31T06:25:33.870
> 
> 标签：python, algorithm, python-3.x

如果单个数字的阶乘之和等于数字本身，则该数字是强数字。例如：145 = 1！+ 4！+5！

为此，我在 python 中编写了以下代码：

```
import math
def strong_num():
    return [x for x in range(1,1000) if x==int(reduce(lambda p,q:math.factorial(int(p))+math.factorial(int(q)),str(x)))]

print strong_num() 
```

但口译员永远不会回来？？这段代码有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T06:33:38.603

你的`reduce`输入是错误的，你不应该计算的阶乘`p`。事实上，它更容易使用`sum`：

```
return [x for x in range(1, 1000) 
          if x == sum(math.factorial(int(q)) for q in str(x))] 
```

* * *

该[`functools.reduce`](http://docs.python.org/3/library/functools.html#functools.reduce)函数可以被认为是：

```
reduce(f, [a, b, c, d, ...]) == f(f(f(a, b), c), d) ... 
```

因此，例如，如果 x == 145，那么您的`reduce`部分将计算

```
 int(reduce(lambda p, q: factorial(int(p)) + factorial(int(q)), str(x)))
== int(reduce(lambda p, q: factorial(int(p)) + factorial(int(q)), "145"))
== int(factorial(factorial(1) + factorial(4)) + factorial(5))
== int(factorial(1 + 24) + 120)
== int(15511210043330985984000000 + 120)
== 15511210043330985984000120 
```

解释器可能无法完成，因为需要计算极大数的阶乘（考虑 (2 × 9!)!...）

如果您仍然需要保留`reduce`，则应将其更改为：

```
 reduce(lambda p,q: p + math.factorial(int(q)),  str(x),  0)
#                   ^                                     ^
#                   No need to factorial                  Add initializer too 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-28T07:19:49.613

```
import math
x=(input("enter the number\n"))

y=[int(i) for i in x]
#print("digits of the entered number:\n",y)

z=list((math.factorial(i) for i in y))
#print("factorial of each digit of given number:\n",z)

z=sum(z)
#print("sum of factorials of each digit of the given number:\n",z)

if z==int(x): print(x,"is a Strong Number")
else: print(x,"is not a Strong Number ") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-26T10:44:08.360

**什么是强数？**

强数是那些数字的阶乘之和等于原始数字的数字。 **例如：** *145 是强数。*因为，1！+ 4！+ 5！= 145

```
num = int(input("Enter any number"))
user_given_no=num
i = 0
fact = 1
fact_list = []
diff_no = []
while num != 0:
    i = num % 10
    num = num//10
    diff_no.append(i)

for y in diff_no:

    x = y
    fact = 1
    while x != 0:
        fact *= x

        x -= 1
    fact_list.append(fact)

sum = 0
for x in fact_list:
    sum += x

if sum == user_given_no:
    print("Strong number")
else:
   print("Not a Strong number") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-17T02:46:10.247

***强数是那些数字的阶乘之和等于原始数字的数字。*** 因此，这里有一个简单的程序来查找 python 列表中的强数。

```
def factorial(number):
    if(number == 0 or number == 1):
        fact = 1
    else:
        fact = number * factorial(number - 1)
    return fact

def strong_number(list):
    new_list=[]
    for x in list:
        temp = x
        sum = 0
        while(temp):
            rem = temp % 10
            sum += factorial(rem)
            temp = temp // 10
        if(sum == x):
           new_list.append(x)
        else:
           pass  
    return new_list

# Example 1
val_list = [1,2,5,145,654,34]
strong_num_list = strong_number(val_list)
print(strong_num_list)
# Example 2 and this will return an empty list as there is no strong number found in 
the list that is passed
val_list2 = [5,10,14,34,45]
strong_num_list = strong_number(val_list2)
print(strong_num_list) 
```

现在，如果您不想传递列表，只需从函数 strong_number 中删除 for 循环即可。快乐学习！！！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-31T06:45:36.197

您没有正确地将数字分解为其组成数字。您需要 reduce 才能在整数列表上操作 lambda，而 str(x) 不会生成整数列表。

# asp.net - 根据标签控件值使 gridview 行加粗

> ID：13152365
> 
> 赞同：1
> 
> 时间：2012-10-31T06:25:49.197
> 
> 标签：asp.net

我有一个具有值的标签控件

123| 价值9| 值6|值9

在这个标签控件的正下方，我有一个 gridview，我想让 gridview 的那个项目加粗，其中有一个值为 123 的链接按钮

所以例如

```
value9     Value1             Value3                   Value4

345   Tested Value             Equipment1               Equipment3
456   Testing              Equipment9                   Equipment9
123   Value9               Valu6                         value9
789   Value8               Value10                         value20 
```

900 值5 值3 值34

value9 中的所有值都是一个链接按钮。当标签控件中有 123 并且如果标签控件中有 789 时，我希望整行为粗体 123 Value9 Valu6 value9 ，那么我希望 789 Value8 Value10 value20 为粗体。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-10T17:55:16.177

您可以在 RowDataBound 事件中将行字体设置为粗体；

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    { 
        //Check if it is not header or footer row
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            //Check your condition here
            if(e.Row.Cells[0].Text.Equals("123"))
            {
                e.Row.Font.Bold = true; // This will make row bold
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:34:08.117

查看[RowDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)事件。

使用[GridViewRowEventArgs](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewroweventargs.aspx)对象，获取对当前的引用`Row`并将其设置`Font.Bold`为 true

您还需要将您的 if 条件包含在 RowDataBound 事件中。你如何做到这一点取决于你的数据源：

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
// use QuickWatch to see how you can get your desired information from e.Row.DataItem
} 
```

我曾经写过一篇关于 RowDataBound 事件的文章：[http ://www.tomot.de/en-us/article/7/asp.net/gridview-overview-of-different-ways-to-bind-data-到列](http://www.tomot.de/en-us/article/7/asp.net/gridview-overview-of-different-ways-to-bind-data-to-columns)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-22T19:12:48.413

我现在正在尝试这个，它根本不起作用。我已经在 RowDataBound 和 DataBound 事件上进行了尝试。没有什么。在 vb.net 中，RowDataBound 代码：

```
 If e.Row.RowType = DataControlRowType.DataRow Then
        If e.Row.Cells(7).Text.Contains("Emdeon") Then
            e.Row.Font.Bold = True
        End If
    End If 
```

数据绑定代码：

```
 For Each gvRow As GridViewRow In gvFiles.Rows
        If gvRow.Cells(7).Text.Contains("Emdeon") Then
            gvRow.Font.Bold = True
        End If
    Next 
```

我在这些行上放了中断，所以我知道它们正在执行。它们没有效果。

更新：找到解决方案。这有效：

```
 If e.Row.RowType = DataControlRowType.DataRow Then
        If e.Row.Cells(7).Text.Contains("Emdeon") Then
            For Each cell In e.Row.Cells
                cell.font.bold = True
            Next
        End If
    End If 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-21T13:00:43.817

嗨，我知道这是一篇旧帖子，但它帮助我产生了在 rad gird 上加粗行的想法。因此，对于任何有兴趣将 rad 网格行加粗的人，您都可以使用下面的代码。

```
if (e.Item is GridDataItem)
            {
                GridDataItem item = (GridDataItem)e.Item;
                if (item["row_name"].Text.ToString() == "condition")
                {
                    item.Font.Bold = true;  //bold
                }

            } 
```

# jquery - 在jQuery中获取表的当前rowIndex

> ID：13152369
> 
> 赞同：35
> 
> 时间：2012-10-31T06:25:57.803
> 
> 标签：jquery, jquery-ui

单击时，我的表格单元格会突出显示。我需要找到突出显示的单元格的 rowIndex。我试着这样做

```
$(".ui-state-highlight").index(); // Results to 0 
```

我也试过这个...

```
$('td').click(function(){

    var row_index = $(this).parent().index('tr');

    var col_index = $(this).index('tr:eq('+row_index+') td');

    alert('Row # '+(row_index)+' Column # '+(col_index));

}); 
// Results : Row # -1 Column # -1 
```

我浏览了[这篇](https://stackoverflow.com/questions/9096682/jquery-syntax-for-finding-row-index-in-a-html-table)文章并尝试了第一个答案，但仍然无法得到结果。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-10-31T06:28:34.573

试试这个，

```
$('td').click(function(){
   var row_index = $(this).parent().index();
   var col_index = $(this).index();
}); 
```

如果您需要表的索引包含 td，那么您可以将其更改为

```
var row_index = $(this).parent('table').index(); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-06-21T15:00:29.440

由于“$(this).parent().index();” 和“$(this).parent('table').index();” 不适合我，我使用以下代码：

```
$('td').click(function(){
   var row_index = $(this).closest("tr").index();
   var col_index = $(this).index();
}); 
```

# powershell-2.0 - 使用 REST API 和 Powershell 在 JIRA 上创建问题

> ID：13152372
> 
> 赞同：2
> 
> 时间：2012-10-31T06:26:32.927
> 
> 标签：powershell-2.0, jira

我一直在尝试与 JIRA REST API（版本 = 5.2-m06-4）进​​行交互

我的代码如下所示：

```
function ConvertTo-Base64($string) {
   $bytes  = [System.Text.Encoding]::UTF8.GetBytes($string);
   $encoded = [System.Convert]::ToBase64String($bytes); 

   return $encoded;
}

$reqBody = [System.Text.Encoding]::UTF8.GetBytes($data)

        try{

                $authenticationDetails = ConvertTo-Base64 '$username:$password'
                Write-Host('Opening a connection to {0}' -f $url)

                $req = [System.Net.WebRequest]::Create($Url)
                $req.Headers.Add("AUTHORIZATION", $headerValue);
                $req.Method = "POST"
                $req.ContentType = "application/json"         
                $req.Timeout = $Timeout.TotalMilliseconds

                $req.Credentials = New-Object System.Net.NetworkCredential -ArgumentList $username, $password 
                $req.PreAuthenticate = $true

                $req.ContentLength = $reqBody.Length   
                $reqStream = $req.GetRequestStream()            
                $reqStream.Write($reqBody, 0, $reqBody.Length)
                $reqStream.Close()

                Write-Host($data)

                $resp = $req.GetResponse()
                Write-Verbose $resp
                Write-Output $resp.StatusCode
        }
        catch [System.Net.WebException]{
                if ($_.Exception -ne $null -and $_.Exception.Response -ne $null) {
                        $errorResult = $_.Exception.Response.GetResponseStream()
                        $errorText = (New-Object System.IO.StreamReader($errorResult)).ReadToEnd()
                        Write-Warning "The remote server response: $errorText"
                        Write-Output $_.Exception.Response.StatusCode
                        Write-Host $_
                } else {
                        throw $_
                }
        } 
```

代码通过 JSON 传递如下：

$jsonString = '{"fields": {"project":{ "key": "CCB"},"components": "' + $COMPONENT + '"},"customfield_11502" : "' + $DEPLOYMENT_DATE + '" ,"摘要": "' + $description + '","问题类型": {"name": "配置更改"}}}'

我遇到的问题是，当我尝试以这种方式发布数据时，我被告知摘要、customfield_11502 和组件不是屏幕的一部分。当我尝试删除 JSON 的这些属性时，我被告知我无权发布问题。

这里正确的错误信息是什么？是不是我没有被授权，如果是这样，屏幕上缺少的字段是否真的不是问题？

通过 REST API 传递用户名和密码时，我使用 Base64 对其进行编码，并将其传递到标头中。我有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:55:08.860

当使用 powershell 与任何 REST API 进行通信时，我强烈建议您迁移到 powershell v3，这样您不仅可以使用 Invoke-RestMethod 还可以使用 ConvertTo[From]-Json cmdlet。也就是说，我还没有尝试让基本身份验证工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T21:13:29.277

天哪，这看起来是一种过于复杂的方法。我有大量的 JIRA 自动化与 powershell 一起使用，我只是使用 cURL（因为我懒得将它们全部转换为 Invoke-RESTblahblah），在那里我将我的 URL 作为字符串传递并有一个可以完成所有操作的配置文件其他的东西。

作为替代方法，这对您有什么好处吗？

# java - 我们可以在 AchartEngine 中为数据集创建一个新方法吗？

> ID：13152376
> 
> 赞同：0
> 
> 时间：2012-10-31T06:26:38.427
> 
> 标签：java, android, date, dataset, achartengine

我有 3 个数组列表，一个用于值，一个用于日期，一个用于标题。我想在数据集中设置它但是当我设置它时

```
 mChartView = ChartFactory.getLineChartView(this, mDataset( legendArray,arrayforDateticks, values), renderer); 
```

我也将它用于 Xtitle 日期。

```
List<double[]> x = new ArrayList<double[]>(arrayforDateticks.size());
String[] date = new String[stockArr.length];
for(int i= 0; i<stockArr.length; i++)
 {
      date[i] = stockArr[i] ; 
 }
 for(int i=0 ; i < titles.length; i++)
 {
    x.add(new double[]{ 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35});
  }
 for(int i=0;i<date.length;i++)
 {
     renderer.addXTextLabel(i+1, date[i]);
 } 
```

渲染时抛出空指针异常。addXtextlabel 为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:55:03.147

正如hoveryspicy所说，渲染器似乎没有被初始化。

您需要输入以下内容：

XYMultipleSeriesRenderer 渲染器 = new XYMultipleSeriesRenderer();

在尝试添加任何文本标签之前...

# c++ - 如何使用一些 MPI 命令（或组合命令）在两个处理器之间交换存储在二维数组中的数据？

> ID：13152386
> 
> 赞同：3
> 
> 时间：2012-10-31T06:27:21.023
> 
> 标签：c++, parallel-processing, mpi

我正在尝试使用 C++ 在超立方体网络上实现 All-To-All（即 MPI_Allgather）操作。

例如，对于 n（即处理器数量）= 8，我将初始数据存储为

```
p0: [00, 01, 02, ..., 07]; 
p1: [10, 11, 12, ..., 17],
...
... 
p7: [70, 71, 72, ..., 77]. 
```

最终在运行 All-To-All 之后，数据应该变成

```
p0: [00, 10, 20, ..., 70], 
P1: [01, 11, 21, ..., 71],
..., 
p7: [07, 17, 27, ..., 77]. 
```

（换句话说，每个处理器都从其他人那里获取数据）。

我虽然使用一些掩码和循环的算法，其中涉及在两个处理器之间交换数据的步骤，例如，将 p0 的最后 4 个元素与 p3 的前 4 个元素交换（将 p0 的最后 4 个元素发送到 p3 并发送前 4 个元素p3 到 p0）。使用 MPI_Send 和 MPI_Recv 无法实现这一点，因为接收者的半数组在发送数据之前将被覆盖。谁能帮助我用什么技术来做到这一点？我考虑过使用中间缓冲区，但仍然不确定如何编写发送和接收 MPI 代码。

或者，如果有人可以告诉我实现 All-to-All 的任何其他方式。非常感谢。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:29:41.470

MPI 中的 All-to-all 由`MPI_ALLTOALL`或执行`MPI_ALLTOALLV`。常规调用需要两个不同的缓冲区来发送和接收数据。MPI 标准还为这两种操作定义了“就地”选项。在您的情况下，此代码应该这样做：

```
double p[8];

MPI_Alltoall(MPI_IN_PLACE, 1, MPI_DOBLE,  // send count and datatype are ignored
             p, 1, MPI_DOUBLE,
             MPI_COMM_WORLD); 
```

不幸的是，一些 MPI 实现不支持这种“就地”模式。一个值得注意的例子是 Open MPI。MPICH2 支持它。

这是实现它的一种方法：[MPICH2 alltoall.c](https://svn.mcs.anl.gov/repos/mpi/mpich2/branches/release/mpich2-1.5.x/src/mpi/coll/alltoall.c)

# c# - Silverlight 中的情节提要有哪些类型？

> ID：13152395
> 
> 赞同：0
> 
> 时间：2012-10-31T06:27:51.283
> 
> 标签：c#, silverlight, types, storyboard

我最近接受了一次采访。我在面试中被问到这个问题。我读了一篇文章[[http://bitslot.info/ch13lev1sec1.shtml][1]。](http://bitslot.info/ch13lev1sec1.shtml)这篇文章向我解释了故事板的类型。主动、被动和交互式故事板是 Silverlight 中的故事板类型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:43:36.020

*`Silverlight`/中*的动画类型（故事板）*`WPF`*

 *1.  **DoubleAnimation：**这会将 Double 值从一个值设置为另一个值。因此，如果您想随时间改变 TextBox 的宽度，您需要 DoubleAnimation。

2.  **ColorAnimation：**同上，如果Changing元素的类型是Color，则需要ColorAnimation。

3.  **变换：**这将为形状的渲染设置动画（例如 Ractangle）。可以进行多种变换，例如*拉伸*、*倾斜*、*旋转*等。

4.  **SingleAnimation、RectAnimation、PointAnimation、Int32Animation、ThicknessAnimation**等每个都具有相同的含义。

所以基本上动画类型的基础是基于你希望你的动画工作的属性的类型。

动画也可以*分为*两种基本方式：

1.  **没有关键帧的动画：**这些动画只需要两个值，From 和 To。它基于动画的 Timeline.DesiredFramerate 属性为您提供流畅的动画。

2.  **Animation With KeyFrames：**允许您指定一个 KeyFrame 集合，该集合允许您在指定时间定义 KeyFrame 值。这样您就可以根据特定的时间间隔调整自己的动画。

这些参考资料可能会为您提供有关`Animation (Storyboard)`类型及其用法的更多信息：

1.  [WPF 动画简介](http://dotnetslackers.com/articles/wpf/IntroductionToWPFAnimations.aspx)
2.  [WPF 教程 - 样式、触发器和动画](http://www.codeproject.com/Articles/140623/WPF-Tutorial-Styles-Triggers-Animation)
3.  [动画概述](http://msdn.microsoft.com/en-us/library/ms752312.aspx)
4.  [故事板概述](http://msdn.microsoft.com/en-us/library/ms742868.aspx)*

# jquery - 用jquery删除跨度右端的嵌套文本

> ID：13152398
> 
> 赞同：2
> 
> 时间：2012-10-31T06:28:23.900
> 
> 标签：jquery, html

我在一个 html 页面中有多个几乎相同的跨度

```
<span class="title">          
 <span class="icon icon-title" title="Title">Title:</span> 
 <a href="LINK_HERE">PAGE_TITLE_HERE</a> remove this
</span> 
```

在同一类的 div 和 li 的页面上有几个这样的，唯一不同的是`LINK_HERE`and `PAGE_TITLE_HERE`。

我需要做的是`"remove this"`从跨度中删除文本。我设法做的是一个笨拙的替换解决方案，如下所示：

```
('div.content').html($('div.content').html().replace(/remove this/g,' ')) 
```

我对此并不完全满意，因为它替换了页面上所有出现的单词并导致存在其他代码的某些问题。如果我将 div.content 限制为 .title，就会发生奇怪的事情——上述跨度的所有出现都成为第一次出现的副本。IE

```
1 remove this
2 remove this
3 remove this 
```

变成

```
1
1
1 
```

谁能提出一个更优雅的解决方案来删除替换或隐藏“删除此”文本，也许，使用 .slice 或 .trim 或 .remove 或它们的组合？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:33:50.680

如果要从元素中删除文本，可以使用`contents`and`filter`方法。

```
$('span.title').contents().filter(function(i){
    if (this.nodeType === 3) {
       $(this).remove()
    }
}) 
```

[http://jsfiddle.net/LCUea/](http://jsfiddle.net/LCUea/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:39:50.050

最简单的方法是删除 的最后一个孩子`span.title`，因为您知道那是您想要的文本所在的位置

[http://jsfiddle.net/LCUea/2/](http://jsfiddle.net/LCUea/2/)

```
$('span.title').each(function(){
  this.removeChild(this.lastChild);
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T06:47:10.937

如果您只关心脚本，那么您可以这样使用它：

```
$('span.title').each(function(){
    $(this).html($(this).html().replace(/remove this/g,' '));
});​​​​​ 
```

更新：这里的工作演示：http: [//jsfiddle.net/LCUea/4/](http://jsfiddle.net/LCUea/4/)

现在它将删除跨度“.title”中所有未包装元素的出现，而与特定文本无关。

JS

```
$('span.title').each(function(){
    //$(this).html($(this).html().replace(/remove this/g,' '));
    var html = '';
    $(this).children().each(function(){
        html += $(this).outerHTML();
    });
    $(this).html(html);
}); 
```

# spring - Spring MVC：在语言环境“en_US”的代码下找不到消息

> ID：13152407
> 
> 赞同：1
> 
> 时间：2012-10-31T06:29:11.320
> 
> 标签：spring, spring-mvc, resourcebundle

调度程序-servlet.xml；

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource"> <property name="basename" value="classpath:messages" /> <property name="defaultEncoding" value="UTF-8" /> </bean> 
```

我在 /resources/messages_en.properties 下有 messages_en.properties

```
label.meetingDescription=Meeting Description 
```

在我的 JSP 中，我使用的是

```
<form:label path="meetingDiscription">
        <spring:message code="label.meetingDescription" />
</form:label> 
```

我收到错误消息；

```
javax.servlet.ServletException: javax.servlet.jsp.JspTagException: NoNo message found under code 'label.meetingDescription' for locale 'en_US' 
```

javax.servlet.ServletException：javax.servlet.jsp.JspTagException：在语言环境“en_US”的代码“label.meetingDescription”下找不到消息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-28T11:53:29.550

您应该将“messages_en.properties”放在路径 /src/main/resources 中。然后编译的类将可以访问它。此外，您应该创建另一个名为“messages.properties”的文件，该文件在使用默认语言环境时使用（“dispatcher-servlet.xml”中定义的 SessionLocaleResolver 的属性 defaulLocale）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2020-01-29T19:39:56.653

只需将“messages_en 属性”直接移动到 webapp 文件夹

# php - 标签控件在 jquery mobile 中不起作用？

> ID：13152408
> 
> 赞同：0
> 
> 时间：2012-10-31T06:29:12.653
> 
> 标签：php, jquery-mobile

我创建了一个具有选项卡控件的 jquery 移动站点，当我们第一次看到该页面时它无法正常工作，但在重新加载页面后它正在工作。

我想让它在重新加载之前也应该工作......

这里是代码......

```
<?php
require_once"session.php";
require_once"getDetails.php";
$docId =$_GET['docId'];
$selDoc=$dbHandle->execQuery("SELECT * FROM master_doctor WHERE doctor_id='$docId'");
$fetDoc=$dbHandle->fetchObjectQuery($selDoc);

$qlfyVal='';
$qualId =explode(",",$fetDoc->qualification_id);
for($i=0;$i<sizeof($qualId);$i++)
{
    $qlfyVal .=comnName('doc_qualification','name','qualification_id',$qualId[$i]).',';
}
$qlfyVal =substr($qlfyVal,0,strlen($qlfyVal)-1);
?>
<!DOCTYPE html> 
<html> 
<head> 
    <title><?php echo $fetDoc->salutation.'.'.ucfirst($fetDoc->fname).ucfirst($fetDoc->lname).' '.$qlfyVal;?> Details</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <?php require_once"header.php";?>

    <script type="text/javascript">
        function ShowHide(id)
        {
            $('.datatab').each(function(){
                if($(this).attr('id') != id)
                {
                    $(this).hide();
                }
                else
                {
                    $(this).show();
                }
            });
        }
    </script>
</head> 
<body> 
<div data-role="page" id="docView" >
    <div data-role=header data-theme="e" >
        <a href="doctorgrid.php" data-icon="back" ><font size="2px">back</font></a>
        <h1 align="left"><font size="2px"><?php echo $fetDoc->salutation.'.'.ucfirst($fetDoc->fname).ucfirst($fetDoc->lname).' '.$qlfyVal;?> Details</font></h1>
    </div>
    <div data-role=content>
    <div data-role="navbar">
        <ul>
            <li class="tabLi"><a onclick="ShowHide('contact')" class="ui-btn-active ui-state-persist">Contact</a></li>
            <li class="tabLi"><a  onclick="ShowHide('primary')">Primary</a></li>
            <li class="tabLi"><a  onclick="ShowHide('working')">Working</a></li>
        </ul>
    </div>
    <div class="data-clear">
    </div>
    <div id="contact" class="datatab" >
    <ul data-role=listview data-inset=true data-theme=d>
      <li data-theme=e  ><font size="2px"> Contact Info </font></li>

      <li><font size="2px"> Phone No : 
      <?php 
      function ckVal($val,$ref)
      {
        $tmp="NA";
        if($val != '')
        {
            if($ref == 'tel')
            {
                $tmp =',<a href="tel:'.$val.'">'.$val.'</a>';
            }
            else if($ref == 'mail')
            {
                $tmp =',<a href="mail:'.$val.'">'.$val.'</a>';
            }
            else
            {
                $tmp =','.$val;
            }
        }
        return $tmp;
      }
     if($fetDoc->phone1!= '')
     {
        $ctNo ='<br/><a href="tel:'.$fetDoc->phone1.'">'.$fetDoc->phone1.'</a><br/>'.ckVal($fetDoc->phone2,'tel').'<br/>'.ckVal($fetDoc->mobile1,'tel').'<br/>'.ckVal($fetDoc->mobile2,'tel');
     }
     else
     {
        $ctNo ='<br/>'.ckVal($fetDoc->phone2,'tel').ckVal($fetDoc->mobile1,'tel').ckVal($fetDoc->mobile2,'tel');
     }
     echo $ctNo;
     ?></font></li>

      <li><font size="2px"> Mail : <?php 
      if($fetDoc->official_email != '')
      {
        $ctMail ='<br/><a href="mail:'.$fetDoc->official_email.'">'.$fetDoc->official_email.'</a><br/>'.ckVal($fetDoc->personal_email,'mail');
      }
      else
      {
        $ctMail ='<br/>'.ckVal($fetDoc->personal_email,'mail');
      }

      echo $ctMail;?> </font></li>

      <li><font size="2px"> Address : <?php 
      if($fetDoc->address1 != '')
      {
        $ctAddr ='<br/>'.$fetDoc->address1.'<br/>'.ckVal($fetDoc->address2,'');
      }
      else
      {
        $ctAddr ='<br/>'.ckVal($fetDoc->address2,'');
      }

      echo $ctAddr;?> </font></li>
    </ul>
    </div>
    <div id="primary" class="datatab" style="display:none">
    <ul data-role="listview" data-inset="true" data-theme="d" >

    <li data-theme=e  ><font size="2px"> Primary Info </font></li>

      <li><font size="2px"> Specialization : 
      <?php
        $splfyVal='';
        $splfyId =explode(",",$fetDoc->specialization_id);
        for($i=0;$i<sizeof($splfyId);$i++)
        {
            $splfyVal .=comnName('doc_specialization','name','specialization_id',$splfyId[$i]).',';
        }
        $splfyVal =substr($splfyVal,0,strlen($splfyVal)-1);
        echo $splfyVal;
      ?>
      </font></li>

      <li><font size="2px"> Patients / day : <?php echo $fetDoc->ave_patients;?> </font></li>

      <li><font size="2px"> Total RX Potental : 
        <?php
        $slRx =$dbHandle->execQuery("SELECT SUM(mdcp.tot_potential * mp.mrp) as tot,SUM(mdcp.nrx * mp.mrp + mdcp.rrx * mp.mrp )/30 as Comptot,SUM((mdcp.nrx_qty - mdcp.nrx) * mp.mrp + (mdcp.rrx_qty - mdcp.rrx) * mp.mrp ) as Cmptot FROM master_doctor_cmpny_prod mdcp,master_product mp WHERE mdcp.doctor_id='$docId' AND mp.product_id=mdcp.product_id");
        $fetRx =$dbHandle->fetchObjectQuery($slRx);
        echo getCurrency().' '.$fetRx->tot .'/ month';
        ?>
      </font></li>

      <li><font size="2px"> Support for CHTND : <?php echo getCurrency().' '.round($fetRx->Comptot,2);?> </font></li>

      <li><font size="2px"> Competitior Support : <?php echo getCurrency().' '.$fetRx->Cmptot;?> </font></li>

      <li><font size="2px"> Last Visited : <?php
      $toDy = date('Y-m-d H:i:s');
        $lvq = $dbHandle->execQuery("select DATEDIFF('$toDy',saved_on) as dt from  doctor_dcr where doctor_id='$docId'");
        $lvf = $dbHandle->fetchObjectQuery($lvq);
        if($lvf->dt != '')
        {
            if($lvf->dt > 0)
            {
                echo $lvf->dt.' Days ago';
            }
        }
        else
        {
            echo 'NA';
        }
        ?>
      </font></li>

      <li><font size="2px">Last 30 Days Ave Calls : <?php
        $tDate=date("Y-m-d");
        $toDate =strtotime ('-30 day',strtotime($tDate));
        $toDate=date ('Y-m-j',$toDate);
        $sCalls =$dbHandle->execQuery("SELECT * FROM doctor_dcr WHERE added_by='$usrId' AND flag='0' AND date(saved_on) BETWEEN '$toDate' AND '$tDate'");
        $nmRows =$dbHandle->getNumRows($sCalls);
        echo round($nmRows/30,2);
        ?>
      </font></li>
      <li><font size="2px"> Doctor Class : <?php echo $fetDoc->doc_class;?> </font></li>

    </ul>

  </div>
  <div id="working" class="datatab" style="display:none">
    <ul data-role=listview data-inset=true data-theme=d >

    <li data-theme=e><font size="2px"> Working Info </font></li>
        <?php 
        $tnt=0;
            function workLocation($ref)
            {
                GLOBAL $dbHandle;
                GLOBAL $docId;
                $wlData="";
                $h=0;
                if($ref == 'hospital')
                {
                    $slocDetails=$dbHandle->execQuery("SELECT hospital_id,hospital_name FROM doctor_hospital_link WHERE doctor_id='$docId'");
                    $getNR=$dbHandle->getNumRows($slocDetails);
                    if($getNR > 0)
                    {
                        while($fetDetails=$dbHandle->fetchObjectQuery($slocDetails))
                        {
                        $h++;
                            if($h < $getNR)
                            {
                                $wlData .='<a href="'.ROOT_PATH.'hospitalView.php?hospId='.$fetDetails->hospital_id.'">'.ucfirst($fetDetails->hospital_name).'</a>'.',';
                            }
                            else
                            {
                                $wlData .='<a href="'.ROOT_PATH.'hospitalView.php?hospId='.$fetDetails->hospital_id.'">'.ucfirst($fetDetails->hospital_name).'</a>';
                            }
                        }
                    }
                    else
                    {
                        $wlData="NA";
                    }
                }
                else if($ref == 'clinic')
                {
                    $slocDetails=$dbHandle->execQuery("SELECT clinic_id,clinic_name FROM doctor_clinic_link WHERE doctor_id='$docId'");
                    $getNR=$dbHandle->getNumRows($slocDetails);
                    if($getNR > 0)
                    {
                        while($fetDetails=$dbHandle->fetchObjectQuery($slocDetails))
                        {
                        $h++;
                            if($h < $getNR)
                            {
                                $wlData .='<a href="'.ROOT_PATH.'clinicView.php?clinicId='.$fetDetails->clinic_id.'">'.ucfirst($fetDetails->clinic_name).'</a>'.',';
                            }
                            else
                            {
                                $wlData .='<a href="'.ROOT_PATH.'clinicView.php?clinicId='.$fetDetails->clinic_id.'">'.ucfirst($fetDetails->clinic_name).'</a>';
                            }
                        }
                    }
                    else
                    {
                        $wlData="NA";
                    }
                }
                else
                {
                    $slocDetails=$dbHandle->execQuery("SELECT chemist_id,chemist_name FROM doctor_chemist_link WHERE doctor_id='$docId'");
                    $getNR=$dbHandle->getNumRows($slocDetails);
                    if($getNR > 0)
                    {
                        while($fetDetails=$dbHandle->fetchObjectQuery($slocDetails))
                        {
                        $h++;
                            if($h < $getNR)
                            {
                                $wlData .='<a href="'.ROOT_PATH.'chemistView.php?chemistId='.$fetDetails->chemist_id.'">'.ucfirst($fetDetails->chemist_name).'</a>'.',';
                            }
                            else
                            {
                                $wlData .='<a href="'.ROOT_PATH.'chemistView.php?chemistId='.$fetDetails->chemist_id.'">'.ucfirst($fetDetails->chemist_name).'</a>';
                            }
                        }
                    }
                    else
                    {
                        $wlData="NA";
                    }
                }
                return $wlData;
            }
        if(workLocation('hospital') != 'NA')
        {
        ?>
      <li><font size="2px"> Hospital Name : <?php echo workLocation('hospital');?></font></li>
      <?php
        }
        else
        {
            $tnt++;
        }
        if(workLocation('clinic'))
        {
        ?>
      <li><font size="2px"> Clinic Name :  <?php echo workLocation('clinic');?></font></li>
      <?php
        }
        else
        {
            $tnt++;
        }
        if(workLocation('chemist'))
        {
        ?>
        <li><font size="2px"> Chemist Name :  <?php echo workLocation('chemist');?></font></li>
      <?php
        }
        else
        {
            $tnt++;
        }
        if($tnt == 3)
        {
        ?>
        <li><font size="2px"> NO Data To Display</font></li>
        <?php
        }
        ?>      
    </ul>

  </div>
</div>
</body>
</html> 
```

在`"header.php"`所有的 js 和 css 中都有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:10:24.117

这是答案：

```
 Before You are calling to this page You have to specify in href like the following 
```

假设您要加载以下链接：

```
<a href="sample.php" rel="external">sample</a> 
```

在这里`href="external"`你必须指定否则它不会工作.....

# java - 如何在不打开打印对话框沼泽的情况下在 java 中打印 i-net Crystel Clear Report ex:(report.rpt)

> ID：13152409
> 
> 赞同：1
> 
> 时间：2012-10-31T06:29:15.210
> 
> 标签：java, swing, struts2, crystal-reports, inet

> 如何在 java 中打印 i-net Crystel Clear Report ex:(report.rpt) 而无需打开 Print Dialog Bog。

谁能给我一些使用 i-net 水晶报告的 java 示例。

例子

传递页面的副本数以将报告直接打印到打印机。

下面的代码在服务器机器上运行。在执行下面的代码时，它在服务器默认打印机而不是客户端默认打印机机器上打印报告。我想在客户端机器上设置的客户端默认打印机机器上打印报告。

```
PrinterJob printerJob = PrinterJob.getPrinterJob();
printerJob.setCopies(1);    
PrintRequestAttributeSet attributeSet = new HashPrintRequestAttributeSet(); 
RenderData data = new URLRenderData("url"); 
Progress progress = new PrinterJobProgress(null, printerJob, attributeSet, data);
progress.startProgress(); 
progress.waitUntilFinished(); 
```

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:25:27.690

您可以尝试我们在此处找到的“查看器编程指南” [http://www.inetsoftware.de/products/clear-reports/documentation/written-guides](http://www.inetsoftware.de/products/clear-reports/documentation/written-guides) - 这个问题在那里得到了完整的回答。简而言之，它是这样的：

```
 ￼￼￼￼ReportView reportView = viewer.createReportView(
             new URLRenderData("http://myreportserver:9000/?report=file:sample.rpt");
   reportView.print( 1, -1, false); 
```

# c# - 在 C# 中从父级运行子窗体进程

> ID：13152415
> 
> 赞同：2
> 
> 时间：2012-10-31T06:29:31.437
> 
> 标签：c#, winforms, mdi

我想从其父级运行一个 MDI 子级。例如，我在子表单中有 3 个文本框。我想在前两个文本框中添加两个值并将结果写入第三个文本框中。我想在父表单上有一个按钮（我们称之为运行按钮）来为我做这件事。此外，我还有其他子表单执行其他计算，因此我希望运行按钮根据焦点表单运行。有谁知道我应该怎么做？

我在每个子窗体中编写了一个方法来进行计算，我在父窗体的运行按钮中调用了这个方法，但这不能识别子窗体文本框的值（即 null）。如果有人可以帮助我，那就太棒了。

谢谢

代码很简单我在子窗体中有三个文本框，前两个中的用户输入值，我想单击父窗体上的运行按钮，子窗体中第三个文本框的值变成总和前两个文本框的值。我在子表单中有这个方法，我可以从父表单调用它，但它不起作用

```
public void AddValues()
        {
            double a = double.Parse(textBox1.Text);
            double b = double.Parse(textBox2.Text);
            textBox3.Text = (a + b).ToString();
        } 
```

在我的父表格中

```
private void button1_Click(object sender, EventArgs e)
        {
            ChildFrom child = new ChildFrom();
            child.AddValues();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:57:48.233

在您的孩子形式中：

```
public void AddValues() //add error handling
{
    double a = double.Parse(textBox1.Text);
    double b = double.Parse(textBox2.Text);
    textBox3.Text = (a + b).ToString();
} 
```

在您的父表单中，您必须调用`AddValues`您正在打开的子表单的同一实例。换句话说，以父形式：

```
public partial class ParentForm : Form
{
    ChildForm _cF; //member field

    public ParentForm()
    {
        InitializeComponent();
    }

    private void OpenChildForm() //this is how you should open the form
    {                            //call this function in whichever event 
         _cf = new ChildForm();  //you are opening the child form.
         _cf.Show();
    }   

    private void button1_Click(object sender, EventArgs e)
    {
        //please remove these lines, its wrong!
        //ChildFrom child = new ChildFrom();
        //child.AddValues();

        //do this instead:
        _cf.AddValues();
    }
} 
```

这里的关键是对子表单的同一个实例进行操作。如果您始终需要它，请将其作为父表单中的成员字段。

**编辑：** 如果您不想让子表单成为成员变量，那么您可以依赖 C# 中的闭包。

以父形式：

```
private void OpenChildForm()
{
     ChildForm cf = new ChildForm();
     cf.Show();

     btnRun.Clicked -= OnRunButtonClicked(cf); //important - to avoid multiple-
     btnRun.Clicked += OnRunButtonClicked(cf); //handlers getting attached.
}  

private EventHandler OnRunButtonClicked(ChildForm cf)
{
    return (sender, e) => cf.AddValues();
} 
```

注意`btnRun`从初始化部分删除现有的点击处理程序。

# php - 使用 codeigniter 在 json 中只返回最后一行

> ID：13152417
> 
> 赞同：1
> 
> 时间：2012-10-31T06:29:35.063
> 
> 标签：php, json, codeigniter

我正在尝试使用 codeigniter 返回 json 数据，稍后我将在 javascript 中使用该 json。现在的问题是它只返回数据库表的最后一行，并从那一行制作一个 json 格式。这是我在控制器中的代码

```
public function v1 () {
    $this->load->model('model_jokes');

    $jokes = $this->model_jokes->readJokes();
    foreach ($jokes as $joke) {
        $arr = array(
                array(
                    'title' => $joke->title,
                    'description' => $joke->joke
                )
            );
    }
    echo json_encode($arr);
} 
```

我怎样才能使我从数据库中检索的所有数据都以 json 格式返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:32:08.900

尝试

```
$arr = array();
foreach ($jokes as $joke) {
  $arr[] = array (
    'title' => $joke->title,
    'description' => $joke->joke
  );
} 
```

在您的代码段中，您将覆盖`$arr`循环中的每次迭代。

这篇文章中的上述代码段会将所有条目附加到数组`$arr`中，您以后可以将其编码为 json。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T06:32:25.367

您`$arr`每次迭代都分配给一个新数组，而不是向它添加值。

```
$arr = array();
foreach ($jokes as $joke) {
    $arr[] =  array(
                'title' => $joke->title,
                'description' => $joke->joke
            );
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T13:14:25.887

你的控制器不对...

```
//CONTROLLER
    public function v1() {

    $this->load->helper('file');

    $data = $this->load->model('model_jokes');

    $this->output
        ->set_content_type('application/json')
        ->set_output(json_encode($data));
} 
```

并确保您的模型创建了数组而不是控制器：

```
public function model_jokes()
{
    $jokes = $this->_load_data();
    $list = array();

        foreach ($jokes as $joke) {
            $list['joke'] = array(
                'yourdata1' => $joke->yourvariable,
                'yourdata2' => $joke->yourvariable
            );
        }
        return $list;
} 
```

我在模型中使用了一个私有函数来获取所有数据。

希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T08:44:22.450

我总是这样。。

```
 $arr = array();
 $key = 0;
 foreach ($jokes as $joke) 
 {
   $arr[$key]['title'] = $joke->title;
   $arr[$key]['description'] = $joke->joke;
   $key++;
 } 
```

# mysql - 不能在 INSERT MySQL 中使用 UNION？

> ID：13152425
> 
> 赞同：3
> 
> 时间：2012-10-31T06:30:11.687
> 
> 标签：mysql, insert, union

我有一个工作正常的选择查询。但是当我将它包装到一个 INSERT 语句中时，我得到了一个错误。

错误 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 '(SELECT DISTINCT NULL AS `id`,NULL AS `core_value_id`,NULL AS `translation_id`'附近使用正确的语法

我可以通过为每个源表使用 1 个插入来解决这个问题。但是有没有办法用一个查询来做到这一点？为什么这不起作用？

这是查询。

```
INSERT INTO `some_table`
(
(SELECT DISTINCT
NULL AS `id`,
NULL AS `core_value_id`,
NULL AS `translation_id`,
t1.`upc` AS `source_value`,
t1.`upc` AS `value`,
COUNT(*) AS `count`
FROM  `source_table_1` t1
GROUP BY `upc`)

UNION ALL
(SELECT DISTINCT
NULL,NULL,NULL,
t1.`upc`,
t1.`upc`,
COUNT(*) AS `count`
FROM  `source_table_2` t1
GROUP BY `upc`
)
ORDER BY `count` DESC
) 
```

这是表定义：

```
CREATE TABLE `some_table` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `core_value_id` int(11) DEFAULT NULL,
 `translation_id` int(11) DEFAULT NULL,
 `source_value` varchar(255) NOT NULL,
 `value` varchar(255) DEFAULT NULL,
 `count` int(11) NOT NULL,
 PRIMARY KEY (`id`),
 KEY `core_value_id` (`core_value_id`),
 KEY `translation_id` (`translation_id`),
 KEY `source_value` (`source_value`),
 KEY `value` (`value`),
 KEY `count` (`count`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

source_tables 看起来像这样：

```
CREATE TABLE `source_table_1` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `upc` bigint(20) DEFAULT NULL,
 PRIMARY KEY (`id`),
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

upc 列的数据如下：

```
123456789012
123456789013
123456789014
123456789015
123456789016
123456789017 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T06:39:24.327

我的猜测是您`SELECT`在单个选择之上缺少一个子句。此外，括号也不合适。试试这个：

```
INSERT INTO `some_table`
SELECT      * 
FROM 
            (
             SELECT   DISTINCT NULL AS `id`, NULL AS `core_value_id`,
                      NULL AS `translation_id`, t1.`upc` AS `source_value`,
                      t1.`upc` AS `value`, COUNT(*) AS `count`
             FROM     `source_table_1` t1
             GROUP BY `upc`

             UNION ALL

             SELECT   DISTINCT NULL, NULL, NULL, t1.`upc`, t1.`upc`, 
                      COUNT(*) AS `count`
             FROM     `source_table_2` t1
             GROUP BY `upc`
            ) AS dt
ORDER BY    `count` DESC 
```

# c - C 中的 sleep() 行为 ..？

> ID：13152427
> 
> 赞同：2
> 
> 时间：2012-10-31T06:30:32.053
> 
> 标签：c, linux, sleep

> **可能重复：**
> [为什么 printf 在调用后不刷新，除非换行符在格式字符串中？](https://stackoverflow.com/questions/1716296/why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-strin)

我试图在论坛上回答一些问题，我遇到了很有趣的事情。这是代码：

```
int main()
{
 int print_val = -1;

 while(1)
 {
  printf("%d \n", ++print_val);
  sleep(1);
 }
} 
```

这很完美。现在乐趣进入了..只需将第 7 行更改为 `printf("%d ", ++print_val);`（只需删除换行符！）

现在没有输出..！

那么谁能帮我理解 sleep() 函数的行为..？我认为有必要查看 sleep() 而不是 printf()，因为我尝试用 fprintf() 和 putc() 替换它，得到相同的输出。

我已经在 32 位 Ubuntu 以及虚拟机中的 32 位 Ubuntu 上尝试过此代码。

谢谢装饰

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T06:45:30.763

我觉得问题在于刷新输出缓冲区。如果您不将 '\n' 放在字符串的末尾，则不会刷新输出缓冲区并且 printf 不会打印任何内容。它只会在输出缓冲区已满时开始打印。请看[这个](https://stackoverflow.com/questions/13152062/what-else-n-do-except-printing-newline/13152295#13152295)问题和[这个](https://stackoverflow.com/questions/1716296/why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-strin)问题。

# php - sql：如何将查询结果计数直接存储到信息框

> ID：13152433
> 
> 赞同：2
> 
> 时间：2012-10-31T06:31:10.250
> 
> 标签：php, mysql

我有一个信息框来显示事件的数量：

我有一个功能：

```
function getStateCounts()
{
    $query = sprintf("select t1.count, t2.State_name
        from (select count(*) as count, state
            from INC_DIST_SUMMARY S
                join SHAPE_LAYERS L on L.geo_id = S.shape_geo_id
            group by state) as t1, SHAPE_LAYER_STATE_DESC as t2 
            where t1.state=t2.state");

    $count = mysql_query($query);

    if (!$count) {
        echo "<error> Invalid query " . $query . "</error>"
        die("Invalid query: " . mysql_error());
    }

    return $count;
} 
```

我必须将输出查询结果存储在“事件编号”中；

```
while ($item = mysql_fetch_array($result, MYSQL_ASSOC)) {
    echo "<item><title geoid='" . $item['GEO_ID'] . "'>" .
         $item['STATE_NAME']."(".($item['STATE_ABBR']).")" .
         "</title><description cong_dist='".$item['DIST_NAME']."'>";
    echo $item['STATE_ABBR'] . $item['DIST_NAME'] . " &lt;br/&gt";" **No of Incidents:";**
    echo $item['INC_COUNT'] . "</description>";
    echo "</item>" 
```

我必须将此事件值修复为“事件数量”：

```
while ($item = mysql_fetch_array($count, MYSQL_ASSOC)) {
    echo "<summary>";
    echo "<state>".$count['STATE']."</state>";
    echo "<count>".$count['COUNT']."</count>" 
    echo "</summary>";
} 
```

如何在“No of Incidents”变量中显示查询值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:11:50.013

对非 COUNT(*) 查询执行 rowCount()；

或者执行[mysql(i)_num_rows](http://php.net/manual/en/mysqli-result.num-rows.php)

标记您使用的任何技术的结果 $rowscounted 并替换

```
if (!$count) {
            echo "<error> Invalid query " . $query . "</error>";
            die("Invalid query: " . mysql_error());
        }

        return $count;
} 
```

和：

```
if ($rowscounted == 0) {
    echo "<error> Invalid query " . $query . "</error>";
        die("Invalid query: " . mysql_error());
    }
else {
echo '$rowscounted states were returned by your query.'
} 
```

我是 php 新手，所以也许不是最好的答案，但我最近自己做了一个这样的问题，并认为这对你有用。（作为一个新手，如果你愿意的话，请加一点盐，哦，还有一个哈希......）

# iphone - 单击特定单元格时如何更改按钮？

> ID：13152435
> 
> 赞同：1
> 
> 时间：2012-10-31T06:31:24.790
> 
> 标签：iphone, ios, ipad

我的应用程序中有一个分组表视图，有两个部分。第一个由一行组成，第二个由 5 个组成。我在单元格中添加了按钮，像这样，`

```
 UIButton *newBtn=[UIButton buttonWithType:UIButtonTypeCustom];
    [newBtn setFrame:CGRectMake(5,10,35,30)];
    [newBtn setImage:[UIImage imageNamed:@"icon.png"] forState:UIControlStateNormal];
    [newBtn addTarget:self action:@selector(selector:)        forControlEvents:UIControlEventTouchUpInside];
    newBtn.tag=4;
    [cell.contentView addSubview:newBtn]; 
```

`Now in that selector methode i need to change it with another image.I am trying to do that in this way`

```
 UITableViewCell *cell=(UITableViewCell *)[sender superview];

    NSIndexPath *path=[self.mtableview indexPathForCell:cell]; 
```

`但是在某些时候出现瓶颈。任何人都可以将我指向正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T06:36:09.020

如果您想单独更改按钮的图像，请将其添加到您的选择器中。

```
- (void)selector:(id)sender {
  //some code
  UIButton *button = (UIButton *)sender;
  [button setImage:[UIImage imageNamed:@"newicon.png"] forState:UIControlStateNormal];
  //some code
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T06:37:29.237

你应该像这样为按钮编写你的操作方法

```
-(void)cellBtnAction:(id)sender {

    UIButton *btn=(UIButton *)sender;
    //Write code for change image to button
    [btn setImage:imgObj forState:UIControlStateNormal];
} 
```

试试这个希望对你有帮助

# javascript - 用于评论的 Facebook 社交插件

> ID：13152436
> 
> 赞同：-3
> 
> 时间：2012-10-31T06:31:25.923
> 
> 标签：javascript, facebook, facebook-graph-api

我打算用 Facebook 的**社交评论插件**做以下事情吗？

1.  如果有人发表了不当评论，我可以删除它吗？我的意思是集成了Facebook插件的网站所有者
2.  我可以使用 soma API 获取所有评论/回复/喜欢/喜欢的数量等，以便我可以处理这些数据以供我使用吗？
3.  Facebook 的社交评论插件是免费的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:01:13.983

1.  您需要正确设置打开的图形标签，特别是 fb:admin 标签。请参阅：[https ://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)
2.  您无法检索与您控制的任何特定应用程序 ID 关联的所有评论（例如，您网站的所有 FB 评论）。但是，您可以检索任何特定 url 的所有评论。例如：[https](https://graph.facebook.com/comments/?ids=) ://graph.facebook.com/comments/?ids= {YOUR_URL}。阅读文档以获取更多信息。
3.  是的，它是免费的
4.  请澄清您问题的第 4 部分。

# asp.net - 有没有办法在 web.config asp.net c# 中创建动态文件夹授权设置

> ID：13152438
> 
> 赞同：0
> 
> 时间：2012-10-31T06:31:34.977
> 
> 标签：asp.net, c#-4.0

我必须在用户创建时创建一个文件夹，并且还必须限制其他用户访问该文件夹，以便只有该特定用户才能访问该文件夹。

所以最后我决定允许和拒绝使用 web.config 访问该文件夹。我不想为每个用户进行手动设置。那么如何在 web.config 中创建动态文件夹授权设置。

```
<location path="secure/files/support@userid.com">
<system.web>
  <authorization>
    <allow users="support@userid.com"/>
    <deny users="*"/>
  </authorization>
</system.web>
</location> 
```

还有另一种方法可以做到这一点吗？

# joomla - joomla2.5如何获取组件区plugin的params值？

> ID：13152440
> 
> 赞同：6
> 
> 时间：2012-10-31T06:31:46.397
> 
> 标签：joomla, joomla2.5, joomla-extensions

我试图让`plugin params`in the `component area`，但我没有得到结果。

反正有没有得到价值。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-31T06:37:05.107

愿这对您有所帮助-[阅读更多](https://groups.google.com/forum/?fromgroups=#!topic/joomla-dev-cms/B0poaDA9Jj4)

`JPluginHelper::getPlugin($type, $plugin)` //它将返回插件

**例如-**

```
$plugin = JPluginHelper::getPlugin('authentication', 'ldap');
//$params = new JParameter($plugin->params);//backward compatibility
$params = new JRegistry($plugin->params);//Joomla 1.6 Onward
echo $params->get('param_name','default_value'); 
```

`$params`将像普通`JParameter`对象一样运行并使您能够获取值。

注意：使用[JRegistry](https://api.joomla.org/cms-3/classes/Joomla.Registry.Registry.html)而不是 JParameter

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-11-20T10:47:12.270

`JParameter`在 Joomla v1.6.x、Joomla v2.5.x 和 Joomla v3.0.x 中已弃用。[参考](https://twitter.com/hans2103/status/256367013000273920)

如果要解码参数值，请使用`JRegistry`而不是`JParameter`

**例子**

```
$plugin = JPluginHelper::getPlugin('system', 'sslredirect');
$params = new JRegistry($plugin->params);
echo $params->get('param_name','default_value'); 
```

*中的弃用消息`parameter.php`*

```
// Deprecation warning.
JLog::add('JParameter::__construct is deprecated.', JLog::WARNING, 'deprecated'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-01T13:34:15.583

这是 PHP 中的 Joomla 代码片段，可让您在 Joomla 中的任何位置访问插件参数

```
// Get plugin 'my_plugin' of plugin type 'my_plugin_type'
$plugin = JPluginHelper::getPlugin('my_plugin_type', 'my_plugin');

// Check if plugin is enabled
if ($plugin)
{
    // Get plugin params
    $pluginParams = new JRegistry($plugin->params);

    $param1 = $pluginParams->get('param1');
    $param2 = $pluginParams->get('param2');
    $param3 = $pluginParams->get('param3');
} 
```

# c# - 计算三角多边形网格中的孔

> ID：13152441
> 
> 赞同：2
> 
> 时间：2012-10-31T06:31:55.327
> 
> 标签：c#, wpf, 3d, computational-geometry

我正在开发 WPF 中的可视化工具，它具有通过 3-D 形状显示切割平面的功能。例如，像这样的 3-d 几何：

![全几何](../Images/e581b869d61feb4eead3987d51777e10.png)

...被飞机切割。切割后，该算法识别沿切割平面的所有独特轮廓，并以 CW 或 CCW 缠绕顺序填充线段列表。任何简单的多边形都可以使用 Cuting Ears 算法轻松进行三角剖分和渲染，如下所示：

![切割平面图像](../Images/19d9fca2c45b419d1de0498e2a43a590.png) ![在此处输入图像描述](../Images/3368e6822e75faa3e6c765f93307ebee.png)

给定右侧三角剖分的输入，以及左侧平面上可见的内部折线，是否有一种算法可以重新配置三角剖分以构造由折线勾勒出的孔？

如果已经在 C# 或其他 CLR 语言中推出了算法，我很想了解它们。我正在使用 WPF 调用的 Point3D 列表来描述 MeshGeometry3D 三角形网格，但是如果需要，我显然可以填充任何数据结构，或者通过研究其他语言代码或伪代码来旋转我自己的类。

编辑：查看接受的答案；我正在使用[Poly2Tri](http://code.google.com/p/poly2tri/)的 C# 实现，这是一个受约束的 Delaunay 三角剖分。但是，（图像未按比例缩放）Poly2Tri 算法（中心）以 780 段折线失败，而 Cuting Ears（右）没有，直到我剥离了输入的精度，将单精度值向上转换为双精度值而不是双精度值. 它现在产生的三角剖分与 Cut Ears 不同，但尊重外部多段线的边界。

![复聚](../Images/750402de61f2d40077d9adce72e5b2cd.png) ![复杂CDT](../Images/526ade9d2181de72df0466d85005b389.png) ![复杂的耳朵](../Images/ca46788ed795028ad2e8771015c8bcbd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:46:19.737

以边界线段作为约束条件计算受约束的 Delaunay 三角剖分。确定一个内三角形。从那里扩大该区域，直到您到达边界。作为一个积极的副作用，这样的三角剖分将具有更好的三角形形状。

![区域的约束 Delaunay](../Images/c8faec46e68131e7c7502caea31c6632.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:20:03.197

在 SketchUp 和 3DSMax 之间制作导出/导入插件时必须解决完全相同的问题。Sketchup 使用概念或外部和内部循环，而 3DS Max 是纯几何。

可悲的是，我没有插件，所以我会尽量记住它：

```
foreach point in outerLoop
{
    // Loop over all other point to find the nearest valid one
    foreach otherPoint in both outerLoop and all innerLoops where otherPoint is not point
    {
        if otherPoint is adjacent to point
            reject otherPoint 

        if distance between point and otherPoint is bigger than previous distance
            reject otherPoint 

        // Test is vector is point outside the geometry in case of convexe shapes
        if cross product of vector from (point - adjacent point) and (point - nearest point) is pointing away from cross product of vectors of (point - both adjacents point)
            reject otherPoint 

        nearestPoint = otherPoint
    }

    for the two adjacentPoint of nearestPoint
    {
        if adjacentPoint is also adjacent to point
            make triangle(point, adjacentPoint, nearestPoint)
        if cross product of vector from (point - adjacent point) and (point - nearest point) is pointing in the same direction as cross product of vectors of (point - both adjacents point)
            make triangle(point, adjacentPoint, nearestPoint)
    }
}

repeat the above for innerLoops point while only checking against other innerLoops

make triangle function should check if the triangle already exist from previous iteration. 
```

它不是超级漂亮而且有点粗鲁，但它可以与无限数量的内部循环一起使用，并且总是尽可能地创建最好的三角形。

我很确定会有办法提高它的性能，但我从来没有给它足够的时间。

# mysql - Google-Apps-Script 非云数据库连接选项

> ID：13152443
> 
> 赞同：0
> 
> 时间：2012-10-31T06:31:58.317
> 
> 标签：mysql, database, jdbc, google-apps-script

有没有办法将 google-docs-spreadsheet 与不在云中的数据库链接？

客户有一个非常复杂的 google-doc，他们不想重新开发，但希望使其具有公共数据存储库的多用户。

理想的解决方案是将其链接到标准 SQL 数据库。如果有人可以提供一种方法来做到这一点，我将非常感激。

我知道 google-apps-script 中的 JDBC 只能连接到客户端可能遇到的云中的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:59:09.980

数据库不需要在云中。您可以拥有一个通过 Internet 接受 JDBC 连接的单实例数据库。[Google 甚至会告诉您使用哪些 IP 地址](https://developers.google.com/apps-script/jdbc#accessing)连接到数据库，以便您可以将此过滤器放在数据库的侦听端口上。

您可以使用 Google Apps Script 的[JDBCService](https://developers.google.com/apps-script/service_jdbc)来实现这一点

# spring - Spring嵌套事务 处理和嵌套传播

> ID：13152448
> 
> 赞同：2
> 
> 时间：2012-10-31T06:32:43.183
> 
> 标签：spring, spring-aop, spring-transactions, spring-annotations

我有一个下面的场景，我想了解 Spring 中的嵌套事务处理以及传播。我实际上已经阅读了足够多的内容，但仍然不清楚一些事实。

```
public class ServiceImpl {
@Autowired 
public AnotherService anotherService;

@Transactional // by default it is PROPOGATION_REQUIRED
public void insert (){
    anotherService.anotherInsert();
}
}

public class AnotherServiceImpl {

@Transactional(propagation = Propagation.NESTED)
public void anotherInsert() {
    insertSomeTestData();
}

private void insertSomeTestData() {
    // call insert some test data recursively
    // insert trasaction
    insertSomeTestData();
}
} 
```

在这种情况下，`anotherInsert`将提交嵌套数据并回滚某些数据，这是否会影响默认情况下的外部事务`PROPOGATION_REQUIRED`另外不清楚的一点是，如果事务嵌套，他们会在这种情况下开始一个新的事务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:01:14.127

这是嵌套的描述

“如果当前事务存在，则在嵌套事务中执行，否则它将表现得像 PROPAGATION_REQUIRED 一样”

在上述场景中，由于存在一个当前事务，它将继续在嵌套事务下执行，并且不会创建新事务。

如果我错了，请纠正我。谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-27T14:06:18.100

“AnotherService.anotherInsert”调用将在 ServiceImpl.insert 中已经存在的逻辑事务下创建一个嵌套逻辑事务。

嵌套事务的回滚不会回滚主要事务，就像 REQUIRES_NEW 行为一样。

规格：

> PROPAGATION_NESTED 使用具有多个可以回滚的保存点的单个物理事务。这种部分回滚允许内部事务范围触发其范围的回滚，尽管某些操作已回滚，但外部事务能够继续物理事务。此设置通常映射到 JDBC 保存点，因此仅适用于 JDBC 资源事务。请参阅 Spring 的 DataSourceTransactionManager。

但是，您应该知道 NESTED 事务**基于**使用单个物理事务的 JDBC 保存点。这意味着您必须使用 JDBC 数据源和以下事务管理器才能使其工作：

> org.springframework.jdbc.datasource.DataSourceTransactionManager

参照。[http://docs.spring.io/spring/docs/current/spring-framework-reference/html/transaction.html#tx-propagation-nested](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/transaction.html#tx-propagation-nested)

# iphone - 如何在 iphone 中创建联系我们表格

> ID：13152451
> 
> 赞同：0
> 
> 时间：2012-10-31T06:32:52.020
> 
> 标签：iphone, objective-c, http-post

我创建了一个联系我们表单，表单中有三个文本字段（姓名、电子邮件、电话号码），我的表单中有 1 个文本视图（消息）和 1 个操作按钮。我已经在表单上进行了所有验证，但我的问题是，当有人填写我的表单并按下操作按钮时，表单中的所有信息都应该通过我的个人邮件 ID 发送。请写代码让我提交邮件

```
#import "ViewController.h"

@implementation ViewController
@synthesize name, phone_no,email,message,mylabel;

-(IBAction)submit:(id)sender

{
    NSString *ename = [[NSString alloc] initWithString:name.text];
    NSString *ephone = [[NSString alloc] initWithString:phone_no.text];
    NSString *eemail = [[NSString alloc] initWithString:email.text];
    NSString *emessage = [[NSString alloc] initWithString:message.text];
    if([ename isEqualToString:@""] && [ephone isEqualToString:@""] && [eemail isEqualToString:@""] && [emessage isEqualToString:@""] ) 
    {
        mylabel.text = @"enter all the field";
        alert = [[UIAlertView alloc] initWithTitle:@"Missing Fields" message:@"Enter all fields" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
    }
    else if ([ename isEqualToString:@""])
    {
        alert = [[UIAlertView alloc] initWithTitle:@"Missing Fields" message:@"Must Enter your name" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
    }
    else if ([ephone isEqualToString:@""])
    {
        alert = [[UIAlertView alloc] initWithTitle:@"Missing Fields" message:@"Must Enter your Phone" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
    }
    else if ([eemail isEqualToString:@""] )
    {
        alert = [[UIAlertView alloc] initWithTitle:@"Missing Fields" message:@"Must Enter your email" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
    }
    else if ([emessage isEqualToString:@""] || emessage.length < 30)
    {
        alert = [[UIAlertView alloc] initWithTitle:@"Missing Fields" message:@"your message lenght not less then 100" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
    }
    else 
    {
        mylabel.text = @"login success";
    }

    [ename release];
    [ephone release];
    [eemail release];
    [emessage release];
    [alert release];
}
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range 
 replacementText:(NSString *)text
{
    // Any new character added is passed in as the "text" parameter
    if ([text isEqualToString:@"\n"]) {
        // Be sure to test for equality using the "isEqualToString" message
        [textView resignFirstResponder];

        // Return FALSE so that the final '\n' character doesn't get added
        return FALSE;
    }
    // For any other character return TRUE so that the text gets added to the view
    return TRUE;
}

- (IBAction)textFieldShouldReturn:(id) sender
{
    [name resignFirstResponder];
    [phone_no resignFirstResponder];
    [email resignFirstResponder];
}

- (IBAction)fields:(id) sender
{
    [sender resignFirstResponder];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}
@END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:13:05.947

```
 MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate = self;
    [picker setToRecipients:[In Array your email Id]]; // to add your default email id.

    NSString *emailBody = @"add your text in emailBody";  
    [picker setMessageBody:emailBody isHTML:YES];
    [self presentModalViewController:picker animated:YES];
    [picker release]; 
```

检查完所有条件后，您可以使用此代码打开 MFMailComposeViewController，并且不要忘记在头文件中委托 MFMailComposeViewController。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:43:21.547

您好，这里是用于创建自定义表单的框架，您可以根据您的要求进行自定义，下面是自定义表单创建的链接。

1)[快速对话](http://www.cocoacontrols.com/platforms/ios/controls/quickdialog)

2) [IBA表格](http://www.cocoacontrols.com/platforms/ios/controls/ibaforms)

愿这对发展有很大帮助。

# ruby-on-rails - Rspec 配置 - 禁用请求规范行为

> ID：13152452
> 
> 赞同：0
> 
> 时间：2012-10-31T06:33:01.203
> 
> 标签：ruby-on-rails, rspec

我有一个“规范/接受”文件夹，其中包含应该加载完整堆栈的规范。

我想将“spec/integration”文件夹用于测试模型之间交互的规范，但我不想在这些测试中加载完整的堆栈。

但是 rspec 会自动在这个文件夹中运行测试作为“请求”规范，加载完整的堆栈。如何为此特定文件夹禁用此功能？

# c# - 在 C# 中使用结构模拟数组？

> ID：13152455
> 
> 赞同：1
> 
> 时间：2012-10-31T06:33:06.683
> 
> 标签：c#, data-structures, recursion, struct

伙计们，

请任何人都可以想象在 C# 中定义一个结构的“好方法”，它的行为类似于一个数组（`int[,]`在我的情况下是一个），除了（像所有结构一样）结构*的副本*被传递给任何/所有调用的方法。

下面是我丑陋的第一次尝试（一个模拟简单的结构`int[]`，还不是矩阵），并带有一个小测试工具来使它做一些事情。我想我会有一个*struct Matrix of Row's*，它会遵循类似的模式。但这只是太冗长了。一定有更好的办法！

请问有什么想法吗？

*测试线束*

```
using System;

struct Row {
  public const int COLS = 16;

  public int _0;
  public int _1;
  public int _2;
  public int _3;
  public int _4;
  public int _5;
  public int _6;
  public int _7;
  public int _8;
  public int _9;
  public int _10;
  public int _11;
  public int _12;
  public int _13;
  public int _14;
  public int _15;

  public int this[int index] { 
    get { 
      switch ( index ) {
        case 0: return _0;
        case 1: return _1;
        case 2: return _2;
        case 3: return _3;
        case 4: return _4;
        case 5: return _5;
        case 6: return _6;
        case 7: return _7;
        case 8: return _8;
        case 9: return _9;
        case 10: return _10;
        case 11: return _11;
        case 12: return _12;
        case 13: return _13;
        case 14: return _14;
        case 15: return _15;
      }
      throw new IndexOutOfRangeException("Index="+index+" is not between 0 and 15");
    } 
    set { 
      switch ( index ) {
        case 0: _0 = value; break;
        case 1: _1 = value; break;
        case 2: _2 = value; break;
        case 3: _3 = value; break;
        case 4: _4 = value; break;
        case 5: _5 = value; break;
        case 6: _6 = value; break;
        case 7: _7 = value; break;
        case 8: _8 = value; break;
        case 9: _9 = value; break;
        case 10: _10 = value; break;
        case 11: _11 = value; break;
        case 12: _12 = value; break;
        case 13: _13 = value; break;
        case 14: _14 = value; break;
        case 15: _15 = value; break;
      }
    }
  }

  public override string ToString() {
    return String.Format("{0}{1}{2}{3}{4}{5}{6}{7}{8}{9}{10}{11}{12}{13}{14}{15}"
                         ,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15);
  }
}

class TestClass
{
  public static void ProcessRow(Row row, int index) {
    if (index == Row.COLS) return;
    row[index] = 1;
    Console.WriteLine("{0,2} {1}", index, row);
    ProcessRow(row, index+1);
    Console.WriteLine("{0,2} {1}", index, row);
  }

  public static void Main() {
    var row = new Row();
    ProcessRow(row, 0);
  }
} 
```

*输出：*

```
 0 1000000000000000
 1 1100000000000000
 2 1110000000000000
 3 1111000000000000
 4 1111100000000000
 5 1111110000000000
 6 1111111000000000
 7 1111111100000000
 8 1111111110000000
 9 1111111111000000
10 1111111111100000
11 1111111111110000
12 1111111111111000
13 1111111111111100
14 1111111111111110
15 1111111111111111
15 1111111111111111
14 1111111111111110
13 1111111111111100
12 1111111111111000
11 1111111111110000
10 1111111111100000
 9 1111111111000000
 8 1111111110000000
 7 1111111100000000
 6 1111111000000000
 5 1111110000000000
 4 1111100000000000
 3 1111000000000000
 2 1110000000000000
 1 1100000000000000
 0 1000000000000000 
```

*何苦？*

该测试验证：

*   将 Row 结构的 COPY 传递给 ProcessRow，保持本地 Row 不变。
*   结构为 16 个整数的 16 个调用不会弹出调用堆栈。

如果你有兴趣......我真正的问题是我目前正在将一个 int[16,16] “映射”传递给一个递归调用树，该树处理[编程挑战 62 - Bendorf Weed Invasion](http://cplus.about.com/od/programmingchallenges/a/programming-challenge-62-Kill-the-weeds.htm "编程挑战 62 - 本多夫杂草入侵")中的每个“日常移动” 。 . 目前我正在为评估的每一个动作做一个 Array.Copy （实际上是一对），并且有大约 1.3 个 quintillion 组合需要考虑 10 个有效动作，所以（有趣的是）它太慢了，在 abour 33.5**小时**. 我认为传递结构而不是数组引用可能会显着加快速度，但我仍然怀疑我需要一种完全不同的方法（即完全重新考虑我的算法）来接近“期望的”100 秒。我需要做的是“快速尝试”，所以我想我会先找到一些效率……我现在确切地知道这些人在穿孔磁带时代的感受。为你的输出等待一天半完全糟透了！

* * *

**编辑：**包括我的答案，这是基于 AbdElRaheim 接受的答案。

它使用“平面”固定整数数组来模拟双下标整数数组。

它所做的只是递归*ProcessDay* 10 次，传递*map*和*day index*。在每个“天”中，它只是将一个随机单元格设置为*day*，并打印出两次地图：第一次是在调用堆栈下的路上，然后在再次返回的路上......这样你就可以，如果你愿意，验证*ProcessDay*的每个调用都有自己的地图副本。

我正在以两种不同的方式执行此操作：使用*Matrix struct*和使用标准的*int[,]* ...惊喜（至少对我而言）是该结构更慢...叹息！

```
using System;
using System.Runtime.InteropServices;
using System.Text;
using System.IO;
using System.Diagnostics;

[StructLayout(LayoutKind.Sequential, Size=64)]
unsafe struct Matrix
{
  public const int ROWS = 16;
  public const int COLS = 16;

  private fixed int Cells[ROWS*COLS];

  public int this[int row, int col] {
    get { 
      fixed ( int* addressOfCells = Cells)
        return *(addressOfCells+row*16+col); 
    }
    set { 
      fixed ( int* addressOfCells = Cells)
        *(addressOfCells+row*16+col) = value; 
    }
  }

  public override string ToString() {
    var sb = new StringBuilder(COLS+2*ROWS);
    for ( int row=0; row<ROWS; ++row) {
      for ( int col=0; col<COLS; ++col) 
        sb.Append(ToChar(this[row,col])); 
      sb.Append(Environment.NewLine);
    }
    return sb.ToString();
  }

  private char ToChar(int cellValue) {
    return cellValue==0 ? '.' : (char)('0'+cellValue);
  }

}

class TestClass
{
  private static readonly Random RANDOM = new Random();

  private static StreamWriter _output;

  public static void Main() {
    using ( _output = new StreamWriter("TestClass.out") ) {
      // priming goes
      ProcessDay(new Matrix(), 0);
      ProcessDay(new int[16,16], 0);

      // timed runs
      Time("Using a struct", delegate() {
        for (int i=0; i<1000; ++i) 
          ProcessDay(new Matrix(), 0);
      });
      Time("Using an array", delegate() {
        for (int i=0; i<1000; ++i) 
          ProcessDay(new int[16,16], 0);
      });
    }
    Console.WriteLine("See: "+Environment.CurrentDirectory+@"\TestClass.out");
    Pause();
  }

  #region Using a plain int[,]

  private static void ProcessDay(int[,] theMap, int day) {
    if ( day == 10 ) return;
    var myMap = (int[,])theMap.Clone();
    myMap[RANDOM.Next(Matrix.ROWS),RANDOM.Next(Matrix.COLS)] = day;
    WriteMap(day, myMap);
    ProcessDay(myMap, day + 1);
    WriteMap(day, myMap);
  }

  private static void WriteMap(int day, int[,] map) {
    _output.Write("\r\n{0}:\r\n", day);
    for ( int row=0; row<16; ++row) {
      for ( int col=0; col<16; ++col) 
        _output.Write(map[row,col]==0 ? '.' : (char)('0'+map[row,col])); 
      _output.WriteLine();
    }
  }

  #endregion

  #region Using the Matrix struct

  public static void ProcessDay(Matrix map, int day) {
    if ( day == 10 ) return;
    map[RANDOM.Next(Matrix.ROWS),RANDOM.Next(Matrix.COLS)] = day;
    WriteMap(day, map);
    ProcessDay(map, day + 1);
    WriteMap(day, map);
  }

  private static void WriteMap(int day, Matrix map) {
    _output.Write("\r\n{0}:\r\n{1}", day, map);
  }

  #endregion

  private delegate void TimedTask();
  private static void Time(string desc, TimedTask task) {
    Console.WriteLine();
    Console.WriteLine(desc);
    var sw = new System.Diagnostics.Stopwatch();
    sw.Start();
    task();
    sw.Stop();
    Console.WriteLine(desc +" took "+ sw.ElapsedMilliseconds + " ms");
  }

  [Conditional("DEBUG")]
  private static void Pause() {
    Console.Write("Press any key to continue . . .");
    Console.ReadKey();
  }

} 
```

干杯。基思。

* * *

**编辑2：**这是我对“为什么结构不更快？”问题的调查结果。毕竟它“应该”是，不是吗？我的意思是在堆栈上创建大量的大型结构应该比在堆上创建所有那些等效的对象和垃圾收集它们更有效......那么故事是什么？

假设“结构创建和传递”更有效，我认为我们在那里取得的收益一定会被效率较低的单元格访问所抵消......所以我对我的结构索引器进行了下面的小小调整 -`(row<<4)`而不是`row*16`- 和现在 struct 比数组快 30% 左右......这是我最初敢于希望的收益，所以是的，很酷 ;-)

```
public int this[int row, int col] {
  get { 
    fixed ( int* p = Cells)
      return *(p+(row<<4)+col);
  }
  set { 
    fixed ( int* p = Cells)
      *(p+(row<<4)+col) = value; 
  }
} 
```

我还尝试将所有内容输出两次以测试我的矩阵访问仍然不如本机二维数组访问效率低的理论......确实如此。当您输出地图两次时，结构和类解决方案又恢复了并驾齐驱（一次是在调用堆栈的途中，另一次是在备份它的路上）......所以我很想知道索引器是如何在原生二维数组中实现。

新问题：任何关于如何加快我的索引器实现的建议，或对原生二维数组的 C# 编译器实现的引用都将受到欢迎。TIA ;-)

干杯。基思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:48:01.980

如果不安全，您可以在结构中使用固定大小的数组。不过只能在不安全模式下使用。

```
struct Row {
  public const int COLS = 16;

  public fixed int Cols[COLS];

... 
```

也可以用指针做有趣的事情，但也只能在不安全的情况下

```
 [StructLayout(LayoutKind.Sequential, Size = 64)]
    unsafe struct Row
    {
        public int this[int index]
        {
            get
            {
                // need validation of index or AV
                fixed (Row* p = &this)
                {
                    int* value = (int*)p;
                    return *(value + index);
                }
            }

            set
            {
                // need validation of index or AV
                fixed (Row* p = &this)
                {
                    int* item = (int*)p;
                    item += index;
                    *item = value;
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:50:33.507

至少有三种安全的方法；哪个最好取决于您的使用模式：

1.  让结构持有一个私有数组成员，并让索引属性设置器制作数组的副本，修改副本，然后按该顺序存储对修改后的数组的引用。如果您希望允许同时对多个数组成员进行线程安全更新，则应将上述内容包装在 `CompareExchange` 循环中（这样，如果一个线程在另一个线程读取它并写回它的时间之间更新数组引用，则后一个线程将在新数组上重复其更新操作）。这种方法更新起来会很慢，但是传递结构会很快，因为它不需要包含任何东西，只需要一个数组引用。
2.  让结构包含许多离散字段。如果您可能想要使用稍微大一点的数组（请记住，在这种情况下，您应该在实际情况下通过 `ref` 传递东西），使用泛型结构和嵌套数组可能会有所帮助；如果您这样做，您将需要使用下面描述的一些技巧来使更新正常工作（这些技巧在任何情况下都可能有助于提高效率）。包括几个非常有用的方法是：

    ```
      // 在结构之外的某个地方定义这些委托
      委托 void ActionByRef2<T>(ref 1 param);
      委托 void ActionByRef2<T1,T2>(ref T1 p1, ref T2 p2);

      // 在 StructArray<T> 中，定义方法
      static void UpdateItemAtIndex(ref StructArray1<T> arr, int index, ActionByRef<T> proc);
      static void UpdateItemAtIndex<TParam>(ref StructArray1<T> arr, int index,
         ActionByRef<T,TParam> proc, ref TParam param);

    ```

    这些方法将允许对数组元素执行操作，然后通过“ref”而不是值传递。使用两个“额外”的 `ref` 参数定义版本可能会有所帮助，甚至更多；太糟糕了，没有办法编写可变参数版本。使用这些方法，如果有一个 `SixteenITemArray>`，则可以让外部数组将“行”传递给内部数组的更新方法，从而使其“就地”更新。甚至可以设法对单个数组元素执行“CompareExchange”，这是在最近的“ConcurrentXXX”集合之外的.net 中内置的任何其他非数组集合无法实现的。请注意，这些方法是静态的，并将要操作的事物作为 `ref` 参数。
3.  设计一种数据结构，将一个或多个对不可变对象的引用和一些可选的附加信息结合起来，以实现有效的更新。作为一个简单的（远非最佳）示例：

    ```
    结构 StructArray2<T>
    {
      塔尔[];
      额外物品；
      int extraItemIndexPlusOne;
      T this[int 索引]
      {
        得到
        {
          if (extraItemIndexPlusOne == index+1)
            返回额外项目；
          否则 if (arr != null)
            返回 arr[索引]};
          别的
            返回默认值（T）；
        }
        放
        {
          if (extraItemIndexPlusOne != 0 && extraItemIndexPlusOne != index+1)
          {
            T[] tempArr;
            如果（arr == null）
              tempArr = 新 Arr[大小];
            别的
              tempArr = (T[])arr.Copy();
            tempArr[extraItemIndexPlusOne-1] = extraItem;
            tempArr [索引] = 值；
            arr = tempArr;
            extraItemPlusOne = 0;
          }
          别的
          {
            额外项目 = 价值；
            extraItemIndexPlusOne = 索引+1；
          }
        }
      }
    }

    ```

    假设它有效（未经测试），与第一种方法相比，此代码将至少减少一半的数组复制操作，因为一半的更新操作将简单地更新 `extraItem` 和 `extraItemIndexPlusOne` 而无需接触数组。

哪种方法最好取决于您的应用程序。

# c - 睡眠时间少于 1ms

> ID：13152463
> 
> 赞同：0
> 
> 时间：2012-10-31T06:33:53.690
> 
> 标签：c, linux, usleep

我正在尝试创建 cpu 负载生成器工具。我的输入将是一个介于 0-100 之间的数字。我正在使用时间函数来计算负载并检查负载。如果负载超过所需值，我会尝试使进程休眠。我面临的问题是我获得了所需的负载，但仅限于 500 毫秒或更长的时间段。不少于那。我正在检查一个名为“top”的工具上的负载。当我尝试减少顶部的时间段时。我观察负载波动。有什么方法可以让进程休眠 1ms 或更短。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T06:45:01.240

由于您标记了这个问题 linux-kernel，我将回答有关 Linux 调度程序的具体细节......

简短的回答：不，你不能睡不到 1 毫秒，因为这是调度程序的分辨率。换句话说，内核每毫秒唤醒一次以决定调度哪个进程，因此睡眠时间少于该时间是不可能的。

长答案：为 Linux 设计一个 cpu 负载生成器是一个足够复杂的主题，值得多次发表。您可以在 Google Scholar 上尝试使用术语*cpu burner*和*cpu load generator来查找更多信息。*现在最有效的方法之一是不这样做：任何最新内核的 cgroups 功能都存在 cpu 带宽限制，这意味着您不必执行代码来限制其他进程可用的 cpu 时间量。

不，nanosleep 不提供任何保证您的进程将停止，只是时钟*至少提前*了您请求的时间量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:38:31.357

有[nanosleep(2)](http://linux.die.net/man/2/nanosleep)但由于调度，*不能保证进程会在请求的确切时间睡眠。*您还可以将它与[renice(8)](http://linux.die.net/man/8/renice)结合使用 以将进程设置为更高的优先级。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T06:39:36.567

使用[`nanosleep`功能](http://linux.die.net/man/2/nanosleep)。它请求至少在给定的纳秒分辨率持续时间内暂停调用线程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T06:44:02.527

操作系统中的计时器总是不像你想要的那样可靠和准确。通常，操作系统计时器非常适合大多数用途。但是如果你想获得一些高分辨率的滴答声，你必须做到这些： 1、检查系统硬件，即是否有任何定时器发生器可以提供硬件定时器中断；2、检查OS系统，没有其他进程/线程或设备会屏蔽硬件定时器中断；如果可能，还可以注册定时器设备中断并将定时器值调整到您想要的时间；3、同时cputime也作为获取设计中断时的参考，检查时间浮动和准确性。最好使用一些技术来做到这一点。Nanosleep 不知何故未能如您所愿。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-12T12:07:11.253

我认为不可能在短至 500 毫秒的时间窗口上生成固定的 CPU 负载。考虑到 CPU 是一个动态系统，很难从数学角度建模。您可以做的事情是生成一个平均匹配您想要达到的目标的 CPU 负载。

例如，这个简单的脚本[https://github.com/GaetanoCarlucci/CPULoadGenerator](https://github.com/GaetanoCarlucci/CPULoadGenerator)通过 PID 调节器控制 CPU 内核的“睡眠时间”，以平均实现所需的 CPU 负载。

在这里您可以看到一个动态示例，其中在 CPU 核心 0 上生成了 50% 的负载：

[![在此处输入图像描述](../Images/3b5fa9facf5166fd73f5257060ab975b.png)](https://i.stack.imgur.com/zBFbc.jpg)

您可以注意到瞬态时间大于 500 毫秒。

# php - 如何在codeigniter中获取上传文件的完整路径？

> ID：13152467
> 
> 赞同：2
> 
> 时间：2012-10-31T06:34:26.663
> 
> 标签：php, codeigniter

我正在使用 codeIgniter 文件上传类示例[https://www.codeigniter.com/user_guide/libraries/file_uploading.html](https://www.codeigniter.com/user_guide/libraries/file_uploading.html) 来上传文件。在我上传文件后的示例中，它将在上传成功视图页面中显示如下详细信息。

```
 Array
(
[upload_data] => Array
    (
        [file_name] => VenkataKrishna10.pdf
        [file_type] => application/pdf
        [file_path] => C:/xampp/htdocs/upload/application/
        [full_path] => C:/xampp/htdocs/upload/application/VenkataKrishna10.pdf
        [raw_name] => VenkataKrishna10
        [orig_name] => VenkataKrishna.pdf
        [client_name] => VenkataKrishna.pdf
        [file_ext] => .pdf
        [file_size] => 83.27
        [is_image] => 
        [image_width] => 
        [image_height] => 
        [image_type] => 
        [image_size_str] => 
    )

 ) 
```

之后我尝试以数组格式查看整个上传的数据。我的问题是如何从上面的数组中获取完整的文件路径。我知道有一个变量`full_path`，但我无法得到它。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T06:51:38.267

试试这样：

```
 if ( ! $this->upload->do_upload())
        {
            $error = array('error' => $this->upload->display_errors());

        }
        else
        {
            $data = $this->upload->data();
                    // $data will contain full inforation
                    echo "Full path is:". $data['full_path'];

        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T07:08:45.880

从您的控制器使用

```
echo $data['upload_data']['full_path']; 
```

从你的角度来看使用

```
echo $upload_data['full_path']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T07:08:55.950

从您的帖子中，我假设您已经从 print_r 给出了某个变量的输出，例如`$file_detail`.

如果要从中获取 full_path `$file_detail`，则必须使用

```
$file_detail['upload_data']['full_path'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T06:37:38.483

上传成功返回数组，你只需要检索索引键：

控制器：

```
if ( ! $this->upload->do_upload())
{
     $data['error'] = $this->upload->display_errors();
}
else
{
   $data['upload_data'] = $this->upload_data();
}
$this->load->view('myview', $data); 
```

**我的视图.php**

```
<p>Full path: <?php echo $upload_data['full_path'];?></p> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-08T11:36:23.483

如果您想在插入数据库后从上传中删除文件，您可以使用 unlink($filename) 从上传中删除文件

# objective-c - 在 UIImagePickerController 中保存位置

> ID：13152470
> 
> 赞同：2
> 
> 时间：2012-10-31T06:34:38.270
> 
> 标签：objective-c, ios, uiimagepickercontroller

我正在开发一个应用程序，它允许您选择照片并将它们放置在不同的位置。工作流程基本上是：

1.  点击屏幕的某个区域
2.  `UIImagePickerController`显示
3.  选择一张照片
4.  照片显示在屏幕的点击区域

我希望这样，如果用户第二次执行此工作流程，则`UIImagePickerController`显示时将显示用户上次所在的同一专辑以及该专辑中的位置。

我尝试保存对 和 的引用`UIImagePickerController`，`UIPopoverController`以便它们只创建一次。但是，每次我展示包含 的弹出框时`UIImagePickerController`，它都会回到主照片菜单（例如，相机胶卷、照片库、我的照片流）。

关于如何实现我所追求的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:43:28.637

您可以使用[ALAssetsLibrary](https://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html)。但这会花费你更多的精力。第一次使用`– enumerateGroupsWithTypes:usingBlock:failureBlock:`列出所有专辑并记住用户的选择。而在第二次。只需使用该专辑：`ALAssetsGroup`列出`– enumerateAssetsUsingBlock:`所有图像和视频。Apple 有几个 demo 你可以看看[PhotosByLocation](https://developer.apple.com/library/ios/#samplecode/PhotosByLocation/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010136) [MyImagePicker](https://developer.apple.com/library/ios/#samplecode/MyImagePicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010135)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:49:25.707

在 .h 类中保留一个`UIImagePickerController`obj（例如`imagePicker`）

分配 obj 一次（例如在 中`viewDidLoad`）

```
imagePicker = [[UIImagePickerController alloc] init];
imagePicker.delegate = self; 
imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
[self.view addSubview:imagePicker.view];
imagePicker.view.hidden = YES;
imagePicker.view.frame  = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);
imagePicker.view.bounds  = CGRectMake(0,20,self.view.frame.size.width, self.view.frame.size.height); 
```

在`didFinishPickingMediaWithInfo`

```
if([[info valueForKey:UIImagePickerControllerMediaType] isEqualToString:@"public.image"]){
    imagePicker.view.hidden = YES;
} 
```

当你想展示`imagePickerView`正义时

```
imagePicker.view.hidden = NO; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T06:56:36.957

应该可以进入结果`UITableView`，然后找到它的内容偏移量。您可以通过在`UIImagePickerController`'`view`属性的子视图中搜索表视图来执行此操作。

```
for (UIView *view in controller.view) {
  if ([view isKindOfClass:[UITableView class]]) {
    contentOffset = [(UITableView *)view contentOffset];
  }
} 
```

当您表示视图控制器时，您将希望以类似的方式恢复内容偏移量。

请注意，我还没有实际测试过查看`UIImagePickerController`. 通过打印其子视图来验证其结构。也不能保证结构会保持不变，因为您正在深入研究私有实现（尽管重要的是要注意您实际上并没有使用任何私有 API，所以这没关系）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T01:42:02.157

使用 AlAssetsLibrary。它控制应用程序下的图像和视频捕获。有一个关于苹果的演示。

[https://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html)

寻找这个或

如果您想为图像和视频制作一个自定义相册，这里就是一个很好的例子。

[https://github.com/Kjuly/ALAssetsLibrary-CustomPhotoAlbum](https://github.com/Kjuly/ALAssetsLibrary-CustomPhotoAlbum)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T10:11:17.097

只是为了给你指出正确的方向。您可以使用资产库将图像显示为选择器。您可以使用苹果示例代码[MyImagePicker](https://developer.apple.com/library/ios/#samplecode/MyImagePicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010135)。该方法`[[assetsLibrary] enumerateGroupsWithTypes:ALAssetsGroupAlbum usingBlock:^(ALAssetsGroup *group, BOOL *stop)`可用于相册。使用资产库，您可以检查最后选择了哪个图像，然后使用该方法，

```
- (void)enumerateAssetsAtIndexes:(NSIndexSet *)indexSet options:(NSEnumerationOptions)options usingBlock:(ALAssetsGroupEnumerationResultsBlock)enumerationBlock; 
```

您下次可以使用此方法来枚举您想要枚举的图像。此方法可以接受一个 indexSet 作为`[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(index, count)]`它应该有助于指示最后选择的图像。

要了解有关[如何使用资产库的更多信息，请查看此](http://www.fiveminutes.eu/accessing-photo-library-using-assets-library-framework-on-iphone/)。

# android - 当用户按下回车键时隐藏键盘

> ID：13152474
> 
> 赞同：2
> 
> 时间：2012-10-31T06:34:56.843
> 
> 标签：android, actionlistener

当用户按下回车键时，我正在使用以下代码隐藏键盘：

```
 friendSearch.setOnEditorActionListener(new OnEditorActionListener() {

        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            if(event.getKeyCode() == KeyEvent.KEYCODE_ENTER) {
                EditText friendSearch=(EditText) findViewById(R.id.friendsearch);
                InputMethodManager imm = (InputMethodManager)getSystemService(
                          Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(friendSearch.getWindowToken(), 0);
                return true;
            }
            return false;
        }
    }); 
```

但是，当我按下键盘上的 enter/next 键（取决于设备）时，应用程序崩溃。我的错误日志猫如下：

```
10-31 12:27:00.092: E/ZygoteProcess(183): readInt++
10-31 12:27:00.109: E/Zygote(86): writeInt++17294
10-31 12:27:00.110: E/ZygoteProcess(183): readInt--: 17294
10-31 12:27:00.111: E/Zygote(86): writeInt--17294
10-31 12:27:07.700: E/AndroidRuntime(17280): FATAL EXCEPTION: main
10-31 12:27:07.700: E/AndroidRuntime(17280): java.lang.NullPointerException
10-31 12:27:07.700: E/AndroidRuntime(17280):    at com.olacabs.customer.activity.InviteFriendsFromContactsActivity$2.onEditorAction(InviteFriendsFromContactsActivity.java:134)
10-31 12:27:07.700: E/AndroidRuntime(17280):    at android.widget.TextView.onEditorAction(TextView.java:3641)
10-31 12:27:07.700: E/AndroidRuntime(17280):    at com.android.internal.widget.EditableInputConnection.performEditorAction(EditableInputConnection.java:114)
10-31 12:27:07.700: E/AndroidRuntime(17280):    at com.android.internal.view.IInputConnectionWrapper.executeMessage(IInputConnectionWrapper.java:322)
10-31 12:27:07.700: E/AndroidRuntime(17280):    at com.android.internal.view.IInputConnectionWrapper$MyHandler.handleMessage(IInputConnectionWrapper.java:106)
10-31 12:27:07.700: E/AndroidRuntime(17280):    at android.os.Handler.dispatchMessage(Handler.java:130)
10-31 12:27:07.700: E/AndroidRuntime(17280):    at android.os.Looper.loop(SourceFile:351)
10-31 12:27:07.700: E/AndroidRuntime(17280):    at android.app.ActivityThread.main(ActivityThread.java:3814)
10-31 12:27:07.700: E/AndroidRuntime(17280):    at java.lang.reflect.Method.invokeNative(Native Method)
10-31 12:27:07.700: E/AndroidRuntime(17280):    at java.lang.reflect.Method.invoke(Method.java:538)
10-31 12:27:07.700: E/AndroidRuntime(17280):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:901)
10-31 12:27:07.700: E/AndroidRuntime(17280):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:659)
10-31 12:27:07.700: E/AndroidRuntime(17280):    at dalvik.system.NativeStart.main(Native Method)
10-31 12:27:10.607: E/IPCThreadState(183): IPCThread::waitForResponse checking error 3 : -32
10-31 12:27:10.607: E/JavaBinder(183): BpBinder::transact() returns exception, err is -32
10-31 12:27:10.607: E/IPCThreadState(183): IPCThread::waitForResponse checking error 3 : -32
10-31 12:27:10.607: E/JavaBinder(183): BpBinder::transact() returns exception, err is -32
10-31 12:27:10.612: E/InputDispatcher(183): channel '405b46b8 com.olacabs.customer/com.olacabs.customer.activity.MyAccountActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
10-31 12:27:10.612: E/InputDispatcher(183): channel '405b46b8 com.olacabs.customer/com.olacabs.customer.activity.MyAccountActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
10-31 12:27:10.663: E/Zygote(86): writeInt++17303
10-31 12:27:10.665: E/ZygoteProcess(183): readInt++
10-31 12:27:10.666: E/Zygote(86): writeInt--17303
10-31 12:27:10.667: E/ZygoteProcess(183): readInt--: 17303
10-31 12:27:11.121: E/JavaBinder(183): BpBinder::transact() returns exception, err is -32
10-31 12:27:11.121: E/JavaBinder(183): BpBinder::transact() returns exception, err is -32
10-31 12:27:11.125: E/IPCThreadState(370): IPCThread::waitForResponse checking error 3 : -32
10-31 12:27:11.125: E/JavaBinder(370): BpBinder::transact() returns exception, err is -32
10-31 12:27:11.927: E/Crittercism(17303): Initialize the Crittercism library before using its methods. 
```

我做错了什么，我该如何改变？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T06:39:29.000

`friendSearch.setOnEditorActionListener(new OnEditorActionListener()`在设置监听器之前初始化editText 。

```
EditText friendSearch=(EditText) findViewById(R.id.friendsearch);
friendSearch.setOnEditorActionListener(new OnEditorActionListener() {

@Override
public boolean onEditorAction(TextView v, int keyCode,KeyEvent event) 
{
     if ((event.getAction() == KeyEvent.ACTION_DOWN  ) &&  (keyCode == KeyEvent.KEYCODE_ENTER)   )
     {               
       // hide virtual keyboard
       InputMethodManager imm = (InputMethodManager)getBaseContext().getSystemService(Context.INPUT_METHOD_SERVICE);
       imm.hideSoftInputFromWindow(friendSearch.getWindowToken(), 0);
       return true;
    }
    return false;
}}); 
```

# r - '[[' 在 R 中的函数 lapply(x, '[[', VarNames[[type]]) 中是什么意思？

> ID：13152476
> 
> 赞同：8
> 
> 时间：2012-10-31T06:35:03.433
> 
> 标签：r

谁能告诉我R`[[` 中的函数`lapply(x, '[[', VarNames[[type]])`是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T06:50:15.513

这是一个提取功能。正如@mnel 所指出的，帮助文件`?Extract`将为您提供大量信息。

这里有几个使用`[[`和`[`作为函数的例子，你会使用更正常的基本函数，比如`sum` `table`etc：

```
> test <- list(a=1:10,b=letters[1:10])
> test
$a
 [1]  1  2  3  4  5  6  7  8  9 10

$b
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"

> "[["(test,1)
 [1]  1  2  3  4  5  6  7  8  9 10

> "[["(test,2)
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"

> "["(test,1)
$a
 [1]  1  2  3  4  5  6  7  8  9 10

> "["(test,2)
$b
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T06:44:28.950

它是函数 [[ 提取单个元素。看 ？”[[”

这与您在工作中看到的功能相同

```
VarNames[[type]] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T06:54:13.463

该表达式将导致 'x' 的每个连续值`[[`作为其第一个参数给出，并被`VarNames[[type]]`评估并用作第二个参数。结果应该是一系列形式的函数调用：

```
`[[`( x[[1]], VarNames[[type]] ) 
```

请注意，我将其呈现为功能形式。看到这个为第一个单一案例编写的通常方式是：

```
x[[1]][[ VarNames[[type]]) ]] 
```

第二种形式被 R 解释器解析为第一种形式。

# css - 如果不使用填充，有没有办法得到它？

> ID：13152491
> 
> 赞同：0
> 
> 时间：2012-10-31T06:36:04.437
> 
> 标签：css

![在此处输入图像描述](../Images/b160b03ac538864142eabbef9be4913c.png)

如果关注输入文本框。光标在顶部，如果不使用 padding-top，我想将光标定位在中心部分。我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:38:38.827

你可以尝试这样的事情：

```
#input-field {
   height: 20px;
   line-height: 20px;
} 
```

这将使文本在您的输入字段上垂直居中，这也应该使光标居中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:38:42.077

用这个 -

```
img{ vertical-align: middle; } 
```

[**演示**](http://jsfiddle.net/KzySu/)

或者

使用 - 向下推输入文本元素

```
input[type="text"]{
  margin: 4px 0 0 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T06:02:51.727

你可以用这个

```
 input{
    height:      YOURIMAGE HEIGHT;
    line-height: YOURIMAGE HEIGHT; 
    display:block
 } 
```

# iphone - 在tableview中选择多行

> ID：13152499
> 
> 赞同：0
> 
> 时间：2012-10-31T06:36:59.110
> 
> 标签：iphone, uitableview

我在我的 iPhone 应用程序中实现了 UITableView。此外，我在 UITableView 中添加了多行选择。但问题是，当我选择特定行然后滚动表并返回未选中（未标记）中的相应行时。这是我的 didSelectRowAtIndexPath 方法。

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath     *)indexPath
{

        [tableView deselectRowAtIndexPath:indexPath animated:YES];
        if([tableView cellForRowAtIndexPath:indexPath].accessoryType==UITableViewCellAccessoryNone)
        {  
            [tableView cellForRowAtIndexPath:indexPath].accessoryType=UITableViewCellAccessoryCheckmark;        
            [selectedIndexes addObject:[NSNumber numberWithInt:indexPath.row]];
            NSLog(@"Select now %d",[selectedIndexes count]);
        }
        else if([tableView cellForRowAtIndexPath:indexPath].accessoryType==UITableViewCellAccessoryCheckmark)
        {
            [tableView cellForRowAtIndexPath:in dexPath].accessoryType=UITableViewCellAccessoryNone;
            [selectedIndexes removeObject:[NSNumber numberWithInt:indexPath.row]];
            NSLog(@"DeSelect now %d",[selectedIndexes count]);
        }   
} 
```

请给我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:47:52.230

当您每次滚动表格视图时，每次都会调用委托方法 cellForRowAtIndexPath 方法。因此，它每次都会加载数据。意思是，首先您必须存储在 didSelectRowAtIndexPath 方法中单击了哪些行，并根据这些cellForRowAtIndexPath 方法中的行索引，您必须显示哪些表视图行已被选中并带有复选标记，而其余行没有复选​​标记...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:45:02.140

检查这个。[多行选择和编辑](http://www.cocoawithlove.com/2009/01/multiple-row-selection-and-editing-in.html)

你会发现真的很容易和有用。

享受编程

# objective-c - 我的应用程序崩溃并关闭，关于原因的信息很少

> ID：13152502
> 
> 赞同：8
> 
> 时间：2012-10-31T06:37:10.750
> 
> 标签：objective-c, cocoa-touch, crash, ios6

我遇到了崩溃，非常感谢有关如何查找和解决问题的一些建议。游戏只是关闭。当应用程序附加并在调试器中运行时，没有调试输出可以说明为什么会出现“正常”崩溃。我知道它发生在 LoadView 之后，因为 LoadView 末尾的 NSLog 是最后一个输出，**相同**每次屏幕。下面是有限的崩溃报告表单 Organizer（我认为是“未知”进程，因为它在调试器中运行？）这仅在 ios6 上开始发生。尽管我不确定我是否完全相信它，但根据仪器显然没有内存泄漏。当您玩游戏一段时间并在屏幕上来回切换时，往往会发生崩溃，因此感觉就像泄漏。然而，返回同一屏幕时总是如此，这表明该视图控制器存在问题。我不知道 rpages 到底是什么，也不知道 90974 是否太大。

```
Incident Identifier: 7D34217C-9F8E-49B0-B399-1F5573355F31
CrashReporter Key:   29ce6ea76874d5a03d826014a1f50e1a2160db41
Hardware Model:      iPhone3,1
OS Version:          iPhone OS 6.0 (10A403)
Kernel Version:      Darwin Kernel Version 13.0.0: Sun Aug 19 00:27:34 PDT 2012; root:xnu-2107.2.33~4/RELEASE_ARM_S5L8930X
Date:                2012-10-30 22:48:15 -0700
Time since snapshot: 206 ms

Free pages:        958
Active pages:      2673
Inactive pages:    2118
Throttled pages:   101092
Purgeable pages:   0
Wired pages:       22186
Largest process:   MyCrashingApp

Processes
 Name                    <UUID>                       rpages       recent_max       [reason]          (state)

  MobileMail <bff817c61ce33c85a43ea9a6c98c29f5>         1165             1165         [vm]         (resume) (continuous)
  MobilePhone <3fca241f2a193d0fb8264218d296ea41>        898              898         [vm]         (resume) (continuous)
  tccd <eb5ddcf533663f8d987d67cae6a4c4ea>               119              119         [vm]         (daemon)
  MyCrashingApp <f6c54a2392523abe8745d853870bf985>      90974            90974         [vm]         (audio) (frontmost) (resume)
  ptpd <04a56fce67053c57a7979aeea8e5a7ea>               665              665                      (daemon)
  locationd <892cd1c9ffa43c99a82dba197be5f09e>          1237             1237                      (daemon)
  dataaccessd <2a3f6a518f3f3646bf35eddd36f25005>        614              614                      (daemon)
  mediaserverd <80657170daca32c9b8f3a6b1faac43a2>       1316             1316                      (daemon)
  syslogd <cbef142fa0a839f0885afb693fb169c3>            139              139                      (daemon)
  wifid <9472b090746237998cdbb9b34f090d0c>              284              284                      (daemon)
  iaptransportd <f784f30dc09d32078d87b450e8113ef6>      192              192                      (daemon)
  SpringBoard <27372aae101f3bbc87804edc10314af3>        3477             3477                     
  backboardd <5037235f295b33eda98eb5c72c098858>         9957             9957                      (daemon)
  aggregated <8c3c991dc4153bc38aee1e841864d088>         75               75                      (daemon)
  BTServer <c92fbd7488e63be99ec9dbd05824f5e5>           198              198                      (daemon)
  configd <4245d73a9e96360399452cf6b8671844>            897              897                      (daemon)
  fairplayd.N90 <3ac48d9cfb143757bccce4fe6c154533>      135              135                      (daemon)
  fseventsd <996cc4ca03793184aea8d781b55bce08>          315              315                      (daemon)
  imagent <1e68080947be352590ce96b7a1d07b2f>            528              528                      (daemon)
  mDNSResponder <3e557693f3073697a58da6d27a827d97>      237              237                      (daemon)
  lockdownd <ba1358c7a8003f1b91af7d5f58dd5bbe>          207              207                      (daemon)
  powerd <2d2ffed5e69638aeba1b92ef124ed861>             123              123                      (daemon)
  UserEventAgent <6edfd8d8dba23187b05772dcdfc94f90>     427              427                      (daemon)
  debugserver <185719f06f1631d4922c652bdd4c8529>        0                0                      (daemon)
  gputoolsd <889065a15ba8372ca533e023c10bd776>          0                0                      (daemon)
  springboardservi <ff6f64b3a21a39c9a1793321eefa5304>   0                0                      (daemon)
  syslog_relay <45e9844605d737a08368b5215bb54426>       0                0                      (daemon)
  syslog_relay <45e9844605d737a08368b5215bb54426>       0                0                      (daemon)
  DTMobileIS <23303ca402aa3705870b01a9047854ea>         0                0                      (daemon)
  afcd <b0aff2e7952e34a9882fec81a8dcdbb2>               120              120                      (daemon)
  notification_pro <845b7beebc8538ca9ceef731031983b7    118              118                      (daemon)
  filecoordination <fbab576f37a63b56a1039153fc1aa7d8>   115              115                      (daemon)
  distnoted <a89af76ec8633ac2bbe99bc2b7964bb0>          101              101                      (daemon)
  apsd <94d8051dd5f5362f82d775bc279ae608>               280              280                      (daemon)
   networkd <0032f46009f53a6c80973fe153d1a588>          147              147                      (daemon)
   CommCenterClassi <c82f228b14a830cdb88e3cc1068330b3>  616              616                      (daemon)
   notifyd <51c0e03da8a93ac8a595442fcaac531f>           167              167                      (daemon)
   ReportCrash <8c32f231b2ed360bb151b2563bcaa363>       135              135                      (daemon) 
```

**结尾**

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-31T14:16:10.967

你的应用程序崩溃是因为 Jetsam（又名 memorystatus），它是 iOS 的低内存条件处理程序，杀死了它（这类似于 Linux 的 OOM 和 Android 的 LowMemory Killer）。您看到的是内存快照。请允许我解释一下：

```
可用页面：958 - 多少可用物理内存（4K 的倍数）
活动页面：2673 - 最近使用了物理内存中的页面数
非活动页面：2118 - 物理内存中有多少页面最近未被使用
限制页面：101092 - 有多少页面受到限制（长篇大论，此处无关）
可清除页面：0 - 在内存不足的情况下可以踢出多少页  
有线页面：22186 - 有多少页面被驻留锁定，主要用于内核目的或共享库

```

您的应用程序拥有最常驻内存的不幸和可疑的荣誉（与其他应用程序相比，按数量级计算）。因此，当内存不足的情况发生时——一些应用程序想要`malloc()`一个大块，并且没有足够的空闲页面剩余——Jetsam 简单地选择顶部内存并且——繁荣。`Kill -9`. 因此，没有调试转储等。iOS 没有交换，因此无法在交换上转储进程以清理内存。唯一的办法就是出去。死亡。

你可以做些什么：

在 Jetsam 杀死你之前，通常会通过事件发出低内存通知，Obj-C 运行时将其转换为`-didReceiveMemoryWarning`. 所以处理它。根据您的描述，您可能还想释放`UIView`s. 那些消耗大量内存。

# java - 是否可以将未知格式文件合并到 jar 文件中

> ID：13152510
> 
> 赞同：1
> 
> 时间：2012-10-31T06:38:06.970
> 
> 标签：java, serialization, jar

我使用swings和mysql在java中开发了一个项目。现在为了为项目分配安全性，我想使用序列化将注册密钥存储在未知文件格式中，例如 .xyz。用户输入的密钥与存储在 .xyz 文件中的密钥进行比较。现在，是否可以使用 jar 文件添加我的 .xyz 文件？如果是的话怎么可能？请帮我完成这个项目。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T06:41:33.823

Jar 文件只是一个 zip 文件。您可以根据需要添加任意类型的文件。我不知道你的项目是如何组织的。如果您不使用 maven 或 gradle，您可能必须将文件添加到`src`文件夹。如果您确实使用 maven 将其添加到`resources`文件夹中。

# linux - Lynx 对 Google 搜索的请求不起作用

> ID：13152513
> 
> 赞同：2
> 
> 时间：2012-10-31T06:38:30.240
> 
> 标签：linux, centos, search-engine, lynx

我在 vps 上有 Centos 6.2 x64、Lynx 2.8.6rel.5。

我在控制台中尝试

```
[root@turbomoney ~]# lynx http://www.google.com/search?complete=0&num=100&hl=en&complete=0&site=webhp&source=hp&q=Hello%20World&start=0
[9] 14223
[10] 14224
[11] 14225
[12] 14226
[13] 14227
[14] 14228
[15] 14229
[10]   Done                    num=100
[11]   Done                    hl=en
[12]   Done                    complete=0
[13]   Done                    site=webhp
[14]   Done                    source=hp
[root@turbomoney ~]# 
```

此请求在我的浏览器中有效，但 Lynx 不理解它。怎么了？如何通过 Lynx 向谷歌请求每页 100 个结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T07:47:23.870

尝试用 " 引用您的链接：

```
lynx "http://www.google.com/search?complete=0&num=100&hl=en&complete=0&site=webhp&source=hp&q=Hello%20World&start=0" 
```

# linux - 在 Shell 中连接字符串

> ID：13152516
> 
> 赞同：0
> 
> 时间：2012-10-31T06:38:39.033
> 
> 标签：linux, shell, unix, scripting

连接字符串 Linux shell 脚本时我遇到了这个问题

```
apphome="`cd \`dirname $0\` && pwd && cd - >/dev/null`"
echo "***************** APP Home***************"
echo $apphome
libdir="${apphome}/lib"
echo "**********Lib  DIR ***********************"
echo ${libdir} 
```

`echo $apphome`并`echo $libdir`给出以下输出

```
***************** APP Home***************
/product/abc/project1/cba/STADATA
**********Lib  DIR ***********************
/libduct/abc/project1/cba/STADATA 
```

为什么不正确地将 /lib 附加到 libdir，有人可以解释一下这里出了什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:42:08.753

只需引用字符串

```
libdir="${apphome}/lib" 
```

完整的脚本

```
#!/bin/sh
apphome="`cd \`dirname $0\` && pwd && cd - >/dev/null`"
echo "***************** APP Home***************"
echo $apphome
libdir="${apphome}/lib"
echo "**********Lib  DIR ***********************"
echo ${libdir} 
```

给

```
***************** APP Home***************
/product/abc/project1/cba/STADATA
**********Lib  DIR ***********************
/product/abc/project1/cba/STADATA/lib 
```

# node.js - node_redis hgetall 回调函数上的 Coffeescript 变量范围

> ID：13152517
> 
> 赞同：1
> 
> 时间：2012-10-31T06:38:40.590
> 
> 标签：node.js, callback, coffeescript, scope, node-redis

我有以下代码：

```
genUserLeagueDiscussionTable = (userLeagueId, firstEntry, displayEntries) ->
  # Generate League Discussion
  leagueDiscussionTable = 
    striped:   yes
    bordered:  yes
    hover:     no
    condensed: yes
    columns:   [{head:"Name"}, {head:"Comments"}]

  console.log "get userLeague #{userLeagueId}"
  LeagueId = userLeagueId

  getLeagueDiscussionEntries =  (entry, callback) =>
    getDiscussionEntry = (err,cnreply) ->
      setDiscussionTableRows = (err,replyObj,request) ->
        leagueDiscussionTable.rows[entry.dataentrynum].data = [replyObj.nickname,cnReply.entryText]
      console.log "Reply received for entry ",entry.entrynum
      console.log cnreply.entryText
      loginclient.hgetall 'uid:'+cnReply.postingUid, setDiscussionTableRows
      callback()
    lookupentry = entry.lookupentry
    console.log "getting entry for ", entry, " database key ", lookupentry
    leagueclient.hgetall lookupentry, getDiscussionEntry
  getLeagueInfo = (err,lreplyObj) =>
    console.log "got league info", lreplyObj
    leagueDiscussionTable.caption = lreplyObj.leagueName+" League Info"
    console.log "caption", leagueDiscussionTable.caption
    leagueDiscussionEntries = lreplyObj.currentDiscussionEntry
    console.log "Caption ",leagueDiscussionTable.caption," entries ", leagueDiscussionEntries, " Display Entries ",displayEntries
    lastEntry = Math.min(leagueDiscussionEntries,firstEntry+displayEntries)
    console.log "start entry ", firstEntry, " last entry ", lastEntry
    entries=[]
    for num in [firstEntry..lastEntry]
      console.log num,".a"
      entries[num]={}
      entries[num].entrynum=num
      console.log num,".b"
      entries[num].lookupentry="userLeagueId:#{LeagueID}:discussionEntryId:#{entry}"
      console.log num,".c"
      entries[num].dataentrynum = num-firstEntry
      console.log num," ", entries[num]
    console.log "Lookup the entries ", entries
    async.forEach entries, getLeagueDiscussionEntries
    , (err,reply) ->
      console.log "callback 1"
  leagueclient.hgetall "userLeagueId:#{LeagueId}", getLeagueInfo
  return leagueDiscussionTable 
```

无论我做什么，我都无法在 getLeagueInfo 中访问 LeagueId 或 userLeagueId。它在外部包装器中工作正常，但我无法在回调函数中访问它。

我究竟做错了什么？

谢谢您的帮助。

[编辑] 有没有办法通过对回调的 hgetall 调用将它作为参数传递给函数？

弗雷德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:48:59.503

您的代码有很多依赖项，因此很难单独理解，但我建议更改`LeagueId`为实例变量：

```
`@leagueId = userLeagueId` 
```

然后`@leagueId`在`getLeagueInfo`.

# c#-4.0 - 如何找到任何像素的切线？

> ID：13152520
> 
> 赞同：0
> 
> 时间：2012-10-31T06:38:45.127
> 
> 标签：c#-4.0, graphics, vector-graphics

我想在图像中的每个像素处找到切线。注意：图像具有白色背景，形状边框颜色为块状。

我所做的是，阿尔戈

```
While(true)
     take pixel 
     if pixel color is black 
           make 3 X 3 matrix => fill the matrix by surrounding pixel color
            ...means assume white =0 and black=1 then keeping selected pixel 
           at center for 3 X 3 matrix and finding all other value;
           ----------------------------here i want to find tangent line to selected pixel;
     end if
     Move to next pixel.
End  while 
```

请帮助头上的考试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T06:13:56.600

What you're looking for is probably a [Sobel Operator](http://en.wikipedia.org/wiki/Sobel_operator). It's implemented as a convolution of the neighborhood around a pixel with the matrix:

```
-1 0 1
-2 0 2
-1 0 1 
```

and again with:

```
-1 -2 -1
 0  0  0
 1  2  1 
```

Call the results of the 2 convolutions x and y, respectively. Once you have them, you can get the magnitude of the gradient by taking the square root of the sum of the squares:

```
mag = sqrt(x * x + y * y); 
```

and the direction of the gradient (which should be tangent to the pixel you're examining) by taking the arctangent of y over x:

```
tangent = atan2(y / x) 
```

# android - ListView 中的自定义视图

> ID：13152521
> 
> 赞同：0
> 
> 时间：2012-10-31T06:38:52.777
> 
> 标签：android, android-layout, listview, android-arrayadapter

我正在使用自定义视图（图像 + frameLayout）创建列表视图，但问题是当我单击列表视图上的任何项目时，调用 getView 方法等于 ilst 视图中的项目数，

我在这里给我的 xmi 文件。

```
custon_layout.xml

<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
     android:padding="5dp">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:src="@drawable/ic_launcher"
       />

    <FrameLayout
        android:id="@+id/frame"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Landed" 
            android:layout_gravity="center"
           />

        <LinearLayout
            android:id="@+id/ll1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="#ffffff"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/from_user"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="hi"
                android:textColor="#000000" />

            <TextView
                android:id="@+id/from_user_id"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="hi"
                android:textColor="#000000" />
        </LinearLayout>
    </FrameLayout>

    </LinearLayout> 
```

请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:58:28.183

您好，我已更改您的 xml 列表文件，请检查此内容。

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
     android:padding="5dp">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:src="@drawable/icon"
       />

   <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#ffffff"
    android:orientation="vertical">

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Landed" 
            android:layout_gravity="center"
           />
            <TextView
                android:id="@+id/from_user"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="hi"
                android:textColor="#000000" />

            <TextView
                android:id="@+id/from_user_id"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="hi"
                android:textColor="#000000" />
    </LinearLayout>

    </LinearLayout> 
```

现在查看列表项，请单击[此处](https://stackoverflow.com/a/12813906/1168654)

您可以对所有列表项进行相同的单击，并且可以对不同的视图进行不同的单击（平均列表项）。

如果您有疑问，则非常简单，然后在下面发表评论。

# c++ - 如何保证 C++ 类型的位数

> ID：13152524
> 
> 赞同：2
> 
> 时间：2012-10-31T06:39:05.647
> 
> 标签：c++, types, cross-platform, typedef

我正在寻找`typedef`我自己的算术类型（例如 Byte8、Int16、Int32、Float754 等），以确保它们包含特定数量的位（对于浮点数，遵守 IEEE754 格式）。我怎样才能以完全跨平台的方式做到这一点？

我在这里和那里看到了 C/C++ 标准的片段，其中有很多：

“**类型***至少为* x**字节**”

而不是很多：

“**类型**正好*是* **x**个字节”。

鉴于这`typedef Int16 unsigned short int`不一定会产生 16 位 Int16，是否有跨平台方法来保证我的类型具有特定大小？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T06:42:02.407

您可以使用`int8_t, int16_t, int32_t, int64_t`在`<cstdint>`. 这样尺寸在所有平台上都是固定的

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T06:50:15.523

真正保证准确位数的唯一可用方法是使用位域：

```
struct X { 
    int abc : 14; // exactly 14 bits, regardless of platform
}; 
```

您可以通过这种方式指定的大小有一些上限—— 至少 16 位`int`和 32 位`long`（但现代平台可能很容易允许两者都达到 64 位）。但是请注意，虽然这保证了算术 on`X::abc`将使用（或至少模拟）恰好 14 位，但它并*不能*保证 a 的大小`struct X`是提供 14 位所需的最小字节数（例如，给定 8 位字节，它的大小很容易是 4 或 8，而不是绝对必要的 2）。

C 和 C++ 标准现在都包括固定大小类型的规范（例如 , `int8_t`）`int16_t`，但不保证它们会出现。如果平台提供正确的类型，则它们是必需的，否则将不存在。如果有记忆，这些也需要使用 2 的补码表示，因此具有 16 位 1 的补码整数类型的平台（例如）仍然不会定义`int16_t`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-31T06:46:59.283

[查看stdint.h](http://en.wikibooks.org/wiki/C_Programming/C_Reference/stdint.h)中声明的类型。这是[标准库](http://en.wikipedia.org/wiki/C_standard_library)的一部分，因此预计（虽然技术上不保证）在任何地方都可用。这里声明的类型包括`int8_t`, `uint8_t`, `int16_t`, `uint16_t`, `int32_t`, `uint32_t`, `int64_t`, 和`uint64_t`. 本地实现会将这些类型映射到给定编译器和架构的适当宽度类型。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-31T06:48:19.890

这是不可能的。

有些平台`char`是 16 位甚至 32 位的。

请注意，我并不是说**理论上**存在发生这种情况的平台……这是一种真实且非常具体的可能性（例如DSP）。

在那种硬件上，没有办法仅将 8 位用于操作，例如，如果您需要 8 位模运算，那么唯一的方法就是自己进行屏蔽操作。

C 语言不为您提供这种模拟...

使用 C++，您可以尝试构建一个在大多数情况下表现得像预期的~~原生~~`sizeof`基本类型的类（显然，排除 ）。然而，结果将有真正可怕的表现。

我认为没有任何用例以这种方式强制硬件违背其本质是一个好主意。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-31T06:50:49.120

可以在编译时使用 C++ 模板来动态检查和创建符合您要求的新类型，特别是`sizeof()`类型的大小是您想要的正确大小。

看看这段代码：[编译时间 "if"](http://en.wikibooks.org/wiki/C%2B%2B_Programming/Templates/Template_Meta-Programming#Example%3a_Compile-time_.22If.22)。

请注意，如果请求的类型不可用，那么您的程序完全有可能根本无法编译。这仅取决于它是否适合您！

# php - 我在 codeigniter 中以不同格式获取 json 数据。为什么？

> ID：13152525
> 
> 赞同：-1
> 
> 时间：2012-10-31T06:39:06.807
> 
> 标签：php, json, codeigniter

我正在尝试使用 codeigniter 制作和返回 json 数据。我想以这种格式接收该数据

```
[
  {
     'title': 'this is title',
     'desc':  'THis is desc'
  },
   {
     'title': 'this is title',
     'desc':  'THis is desc'
  }
] 
```

但我以这种方式接收它

```
[[{"title":"this is title","desc":"this is desc"}],[{"title":"this is title","description":"this is desc"}]] 
```

如何将此格式更改为上述格式？

这是我的代码

```
public function v1 () {
    $this->load->model('model_jokes');

    $jokes = $this->model_jokes->readJokes();
    $arr = array();
    foreach ($jokes as $joke) {
        $arr[] = array(
                array(
                    'title' => $joke->title,
                    'description' => $joke->joke
                )
            );
    }
    echo json_encode($arr);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:41:19.283

将内部赋值`foreach`为

```
$arr[] = array(
  'title' => $joke->title,
  'description' => $joke->joke
); 
```

否则，您将为每个`$joke`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:43:53.030

您每次都在循环中添加数组元素的数组。相反，只需添加单个数组。

```
public function v1 () {
    $this->load->model('model_jokes');

    $jokes = $this->model_jokes->readJokes();
    $arr = array();
    foreach ($jokes as $joke) {
        $arr[] = array(
                    'title' => $joke->title,
                    'description' => $joke->joke
            );
    }
    echo json_encode($arr);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T06:55:29.873

尝试 ：

```
echo '<pre>'.json_encode($arr).'</pre>'; 
```

# javascript - 如何在其中写入文本时获取内容可编辑的 div 宽度？

> ID：13152530
> 
> 赞同：0
> 
> 时间：2012-10-31T06:39:29.313
> 
> 标签：javascript, html

我正在开发一个 HTML 和 javascript 项目。我有以下代码： -

```
<html>
<head>
<style type="text/css">
    .mainDiv
    {
        border:1px solid black;
        width:500px;
        height:340px;
        left:400px;
        position: absolute;
    }

    .textOutsideDiv
    {
        border: 1px dashed black;
        position: absolute;
        display: none;
        width:20px;
        height: 20px; 
    }
    .textInsideDiv {
        position:absolute;
        display:none;
        background: none repeat scroll 0 0 transparent;
        border: medium none;
        font-family: Arial,Helvetica;
        line-height: 1em;
        margin: 0;
        min-height: 1em;
        min-width: 1px;
        outline: medium none;
        padding: 2px;
        position: relative;
        white-space: nowrap;
        z-index: 2;
    }
</style>
<script type="text/javascript">
    function makeTextCanvas(e)
    {
        var mouseX=e.pageX-401;
        var mouseY=e.pageY-9;
        var existOrNot=document.getElementById('textOutsideDiv').style.display;

        if(existOrNot=="" || existOrNot=="none")
        {   
            var outerContainer=document.getElementById('textOutsideDiv');
            var innerContainer=document.getElementById('textInsideDiv');

            outerContainer.style.display='block';
            outerContainer.style.left=mouseX+'px';
            outerContainer.style.top=mouseY+'px';

            innerContainer.style.display='block';
        }

    }
    function makeDiv()
    {
        //alert("Write Inside");
            var outerContainer=document.getElementById('textOutsideDiv');
            var innerContainer=document.getElementById('textInsideDiv');

            var h=innerContainer.offsetHeight;
            outerContainer.style.height=h+'px';

    }
</script>
</head>
<body>
<div id="mainDiv" class="mainDiv" onclick="makeTextCanvas(event);">
    <div id="textOutsideDiv" class="textOutsideDiv">
        <div id="textInsideDiv" class="textInsideDiv" contenteditable="true" onkeyup="makeDiv();" style="font-size: 1em; color: rgb(0, 170, 0);"></div>
    </div>
</div>
</body>
</html> 
```

在更改 div 内的内容时，我正在增加 outerContainer div 的高度，但我在获取 Content Editable div 的宽度时遇到了问题。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:09:33.083

首先你说你想得到内部的宽度`div`，但实际上你正在努力得到`innerContainer.offsetHeight`。其次，如果其父元素具有固定宽度，则将文本添加到宽度设置为 auto 的元素不会拉伸它。

如果我正确理解了您想要实现的目标，那么您希望在用户键入时扩展您的伪文本框。这是您可以扩展它的方法：http: [//jsfiddle.net/LwCWM/1/](http://jsfiddle.net/LwCWM/1/)，但是应该有更好的方法来获取文本的宽度，因为非等宽字体具有各种宽度的字母。

# vb.net - 使用文本框查看数据库中的数据

> ID：13152534
> 
> 赞同：0
> 
> 时间：2012-10-31T06:39:41.297
> 
> 标签：vb.net, ms-access

我在我的访问数据库中制作了一些格式，但是当我尝试在文本框中查看时，它不会使用我设置的格式查看值。我使用 vb.net 作为编程语言，使用 ms access 作为数据库

访问数据库：

字段名称：sampleID 数据类型：自动编号格式：“000000”

VB.net 代码：

```
sql = "SELECT * FROM Cleaning"
    cmd = New OleDbCommand(sql, cnnOLEDB)
    cnnOLEDB.Open()

    Dim dr As OleDbDataReader
    dr = cmd.ExecuteReader()
    While dr.Read()

        txtSampleID.Text = dr("sampleID").ToString()

    End While
    dr.Close() 
```

运行程序后在文本框中输出= 14

我要查看的实际输出是 000014

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:44:45.557

那是因为从 sql 返回的值是整数，而不是字符串。您可以更改代码以按照您想要的方式重新格式化：

```
 txtSampleID.Text = Cint(dr("sampleID")).ToString("00000#") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T00:37:42.417

```
sql = "SELECT * FROM Cleaning"
cmd = New OleDbCommand(sql, cnnOLEDB)
cnnOLEDB.Open()

Dim dr As OleDbDataReader
dr = cmd.ExecuteReader()
While dr.Read()

   txtSampleID.Text = Cint(dr("sampleID")).ToString("00000#")
End While
dr.Close() 
```

# csv - 在 d3.js 中嵌套 2 个 csv 文件

> ID：13152537
> 
> 赞同：1
> 
> 时间：2012-10-31T06:39:51.530
> 
> 标签：csv, d3.js

**新手问题：**我最近开始使用 D3 并且一直在玩示例等。在单个 csv 文件上使用 .nest 取得了一些成功，但希望能够做到这一点。SQL 连接的 - 即。使用国家级数据加载一个 csv 文件，然后将子数据嵌套在第二个文件中。

父级国家数据（csv 文件摘录） - 加上任何其他国家级数据...

```
Country,ID,Status,...[other Country fields]...
Afghanistan,AF,CAND
Albania,AL,CAND
Australia,AU,OTHER
Azerbaijan,AZ,COMP
Burkina Faso,BF,CAND
Cameroon,CM,CAND
Central African Republic,CF,COMP
Côte d'Ivoire,CI,CAND
Democratic Republic of Congo,CZ,CAND 
```

然后针对每个国家/地区构建“报告”作为子级数据（csv 文件摘录）

```
Country,CountryReport,YearsCovered,SectorsCovered,...[other Report fields]...
Afghanistan,http://eiti.org/report/afghanistan/2008,2008,"Mining"
Afghanistan,http://eiti.org/report/afghanistan/2009,2009,"Mining"
Albania,http://eiti.org/report/albania/2009,2009,"Oil, Mining"
Azerbaijan,http://eiti.org/report/azerbaijan/2007,2007,"Oil, Gas"
Azerbaijan,http://eiti.org/report/azerbaijan/2008,2008,"Oil, Gas"
Azerbaijan,http://eiti.org/report/azerbaijan/2009,2009,"Oil, Gas, Mining"
Azerbaijan,http://eiti.org/report/azerbaijan/2010,2010,"Oil, Gas, Mining"
Azerbaijan,http://eiti.org/report/azerbaijan/2011,2011,"Oil, Gas, Mining"
Burkina Faso,http://eiti.org/report/burkina-faso/2008,2008,"Mining"
Burkina Faso,http://eiti.org/report/burkina-faso/2009,2009,"Mining"
Burkina Faso,http://eiti.org/report/burkina-faso/2010,2010,"Mining"
Cameroon,http://eiti.org/report/cameroon/2004,2004,"Oil, Gas"
Cameroon,http://eiti.org/report/cameroon/2005,2005,"Oil, Gas"
Cameroon,http://eiti.org/report/cameroon/2006,2006,"Oil, Gas, Mining"
Cameroon,http://eiti.org/report/cameroon/2007,2007,"Oil, Gas, Mining"
Cameroon,http://eiti.org/report/cameroon/2008,2008,"Oil, Gas, Mining" 
```

任何想法如何最好地解决这个问题？我试过使用 .nest 但我认为这意味着父级数据需要包含在子文件的每一行中？

如果我可以将 csv 数据加载到全局变量中，我可以构建这个结构 - 但 d3js 似乎不允许这样做。对此的解释也将不胜感激

[https://github.com/mbostock/d3/wiki/Requests](https://github.com/mbostock/d3/wiki/Requests)上的示例代码

```
var data; // a global

d3.json("path/to/file.json", function(json) {
  data = json;
  visualizeit();
}); 
```

...似乎不适用于 csv 数据 - 或者我没有得到任何东西？

# hadoop - Datanode，tasktracker在执行hadoop fs -put命令时死亡

> ID：13152540
> 
> 赞同：0
> 
> 时间：2012-10-31T06:40:19.927
> 
> 标签：hadoop

我有一个 hadoop 集群，有 1 个 master（运行 namenode 和 jobtracker）和 2 个 slave（每个运行 datanode 和 tasktracker）。现在每当我执行

```
hadoop fs -put localfile /user/root/tmp/input 
```

对于 4-8 GB 的数据，该命令可以完美执行。

但是当我将数据增加到 30GB 时，其中一个奴隶死了。正如我得到一个 java.io.noRouteToHost 异常并且命令退出失败。我立即对那个从站进行了 ping 操作，发现甚至以太网连接都断开了。所以我必须手动做

```
ifup eth0 
```

在该从站上重新启动主机。我无法在这里找出问题所在。我还更改了以下属性

```
dfs.socket.timeout,  for read timeout
dfs.datanode.socket.write.timeout, for write timeout 
```

我将读取超时增加到 600000 并将写入超时更改为 0 以使其无穷大。请有任何建议。我已经坚持了几天

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:11:37.823

尝试使用“distCp”复制大数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:38:41.263

得到了解决方案。问题出在硬件上。虽然我的 NIC 卡是千兆的，但插入所有节点的交换机支持 100MBps。将交换机更改为千兆，并且工作正常。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-23T21:30:44.757

我遇到了一个类似的问题，我使用`-copyFromLocal`而不是 -put 并解决了这个问题。

H`adoop fs -copyFromLocal localfile /user/root/tmp/input`

# android - 安卓操作栏自定义

> ID：13152543
> 
> 赞同：6
> 
> 时间：2012-10-31T06:40:43.280
> 
> 标签：android, android-actionbar

我的应用正在使用 Sherlock 操作栏。我的设计师给了我一个新设计。

1.  应用标志需要在中间
2.  徽标左侧的 2 个操作项和右侧的 2 个操作项
3.  应用标志高度是操作栏大小的 1.5 倍（假设有点溢出）

是否可以为操作栏创建自定义布局来实现此设计？还是我应该删除我的操作栏并实现我自己的设计？

如果第 3 项是可选的，它会改变你的答案吗？

谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-31T09:57:15.660

对不起，但把你的设计师踢进...

他根本不懂安卓，也不应该为安卓设计。要么它是一个 ActionBar，然后你应该这样对待，你（或你的设计师）应该遵循 Android 上的通用模式，或者它不是。

如果不是ActionBar，请不要使用ActionBar（无论哪个库），并创建与ActionBar有足够偏差的自定义设计，以免混淆用户！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T13:54:56.840

请将您的设计师和您的经理转发到 Android 设计模式网站 [http://developer.android.com/design/patterns/actionbar.html](http://developer.android.com/design/patterns/actionbar.html)。还告诉他们，如果他们希望谷歌能够展示它们，他们几乎必须遵守这些。所有失败的使用全屏布局并在顶部创建自定义控件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T11:32:01.230

我同意其他答案：这不是 Android 指南定义的操作栏。

我只是补充一点，以防你不能违背所做的设计决策（是的，现实世界的项目有时很糟糕，作为程序员，你必须按照客户的要求去做）。

使用您自己的实现。我建议简单地创建一个带有适当监听器接口的片段（一个常见的 Android 模式，让活动实现接口，在 onAttach 中设置片段的监听器）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T12:04:14.397

如果你想实现这个（我非常同意其他海报，这是非标准的，可能不应该这样做）。

您将无法使用标准 API（或 ActionBarSherlock）创建这种样式的 ActionBar - 因为您的 UI 是非标准的

您可以创建一个RelativeLayout，将您的图标放在中心（centerInParent="true"）。然后在相同的布局中，您可以创建一个背景，宽度设置为“fill_parent”，高度设置为中心图标大小的 2/3（在 DP 中计算此值）。

然后，您可以为左侧和右侧的 2 个 ActionItem 创建 ImageButton，然后将它们放在相对于中心图标的布局中。

最重要的是，您可能应该重新考虑您的 UI，以使其更符合 Android 指定的设计模式。如果您仍然想按照设计师要求的方式进行操作，则需要进行自定义布局（使用我建议的 RelativeLayout 是完成您正在寻找的 UI 的一种方法）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-12-14T15:35:23.190

你可以创建一个RelativeLayout，你的图标在中心

```
centerInParent="true" 
```

然后在相同的布局中，您可以创建一个背景，宽度设置为`fill_parent`，高度设置为中心图标大小的 2/3（以 DP 计算此值）。

# salesforce - Salesforce 中的字段可访问性

> ID：13152545
> 
> 赞同：-1
> 
> 时间：2012-10-31T06:41:13.823
> 
> 标签：salesforce

如何使字段必须在 GUI 上只读但能够通过 Salesforce 中的 API 进行编辑？

你的建议请

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T07:51:55.127

只需在给定对象的所有页面布局上将其标记为只读即可。并确保它没有在字段本身上标记为必填（例如，您可以在文本字段上执行此操作）。

某些用户配置文件仍会绕过此页面布局设置。检查哪些用户勾选了“修改所有数据”复选框（默认情况下是所有系统管理员），以及您是否有一些高级用户会在对象本身上进行“修改所有”。这可以在简档或通过权限集进行设置。更多信息 -[在 SF 帮助](http://login.salesforce.com/help/doc/en/customize_fieldaccess.htm)中。

# c - 在 C printf 格式化输出中需要帮助

> ID：13152549
> 
> 赞同：1
> 
> 时间：2012-10-31T06:41:28.287
> 
> 标签：c, printf

我正在显示一个分区表，该表的显示有点像：

```
Number     Device name       Partition type      Size in MB
------------------------------------------------------------
1           /dev/sda1         NTFS                    300
2           /dev/sda2         *Win95 FAT32             99
3           /dev/sda3         Unknown                 128
4           /dev/sda4         NTFS                  19472
120         /dev/sda120       NTFS                   3000

*=Active partition 
```

现在为了显示上面的内容，我们使用格式化输出 printf 并且格式字符串是

```
"%-6d=partition number    %-25.25s=device name  %c=active partition    %-30.30s=part type          %7Ld=size" 
```

现在我想显示相同的分区表，但稍作修改，以便分区槽中的间隙将按范围显示，例如：

```
5-119     /dev/sda5.../dev/sda119    Empty          0 
```

我将格式化字符串用作：

```
%d-%-6d=partition range   %s%d...%s%d=(/dev/sda5.../dev/sda119)   %c  %-30.30s  %7Ld 
```

但这对我没有帮助。

正确的格式字符串应该是什么？我正在使用 gcc 编译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:59:58.407

我想你需要用`snprintf()`这两个复合字符串来准备，然后一个更简单`printf()`的来做实际的打印。由于您没有显示您的实际代码，我们必须猜测所有内容，这很麻烦......

```
int   min = 5;
int   max = 119;
char *dev = "/dev/sda";

char  num_range[32];
char  dev_range[60];

snprintf(num_range, sizeof(num_range), "%d-%d", min, max);
snprintf(dev_range, sizeof(dev_range), "%s%d...%s%d", dev, min, dev, max);

printf("%-10s   %-50.50s   %c%-30.30s  %7d", num_range, dev_range, ' ', "Empty", 0); 
```

您指定`%-25.25s`了单个设备，因此不清楚是否应该将该范围加倍，或者您应该使用其他值（甚至相同的值）；您需要调整格式字符串的那一部分以适合自己。这种技术也是我在名称末尾添加冒号的方法——将名称和冒号格式化为字符串，然后将该字符串格式化为最终的打印操作。

# python - 了解起始字符并在 python 中替换为其他字符

> ID：13152551
> 
> 赞同：0
> 
> 时间：2012-10-31T06:41:34.837
> 
> 标签：python, string

我有一些 python 代码，我在其中从数据库中检索数据。我感兴趣的列是一个 URL，格式如下：

```
../xxxx/ggg.com 
```

我需要确定第一个字符是否为`.`.
如果是，`.`我需要删除`..`字符串开头的两个点，然后将另一个字符串附加到它。
最后我必须生成一个 xml 文件。

```
 This is my code:
    xml.element("Count","%s" %(offercount))
    for colm in offer:
        xml.start("Offer")
        xml.element("qqq","%s" %(colm[0]))
        xml.element("aaaa","%s" %(colm[1]))
        xml.element("tttt","%s" %(colm[2]))
        xml.element("nnnnnn","%s" %(colm[3]))      

        xml.element("tttt","%s" %(colm[4]))----> This colm[4] is the string with ..
        xml.end() 
```

我是Python新手，请帮助我。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:50:47.733

你可以像这样保持简单

```
In [116]: colm = ['a', 'b', 'c', 'd', '..heythere']

In [117]: str = colm[4]

In [118]: if str.find('..') == 0:
   .....:     print "found .. at the start of string"
   .....:     x = str.replace('..', '!')
   .....:     print x
   .....:
found .. at the start of string
!heythere 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:51:19.033

我建议您使用内置的字符串处理函数`startswith()`和`replace()`：

```
if col.startswith('..'):
    col = col.replace('..', '') 
```

或者，如果您只是想删除字符串开头的两个句点，您可以执行以下操作：

```
if col.startswith('..'):
    col = col[2:] 
```

这当然是假设您在开头只有两个句点，并且您希望简单地从字符串中删除这两个句点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T06:48:19.733

使用正则表达式，例如`re.sub(r'^\.\.', '', old_string)`. 正则表达式是匹配字符串的一种强大方式，因此在上面的示例中，正则表达式`^\.\.`匹配字符串的开头 ( `^`) 后跟两个点，这需要使用转义，`\`因为`.`它本身实际上匹配任何内容。一个更完整的例子来做我认为你想要的：

```
import re
if re.match(r'^\.\.', old_string):
    new_string = old_string[2:] + append_string 
```

有关正则表达式的更多信息，请参阅[http://docs.python.org/2/library/re.html 。](http://docs.python.org/2/library/re.html)

# jquery - jquery 下拉菜单错误：/

> ID：13152553
> 
> 赞同：0
> 
> 时间：2012-10-31T06:41:49.797
> 
> 标签：jquery

我刚刚创建了我的下拉菜单和我的新闻自动收录器插件。（由 alexfish 编写的新代码插件。）

[请在此处](http://fatihtoprak.com/wp-content/works/)查看实时代码。

问题是，当您将鼠标悬停在第二个链接上时： Elbise Modelleri ，当您转到第二个菜单项时，子级菜单不显示。

我认为您可以在新闻代码区域上找到硬子菜单项。：/任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:51:46.287

用（分别）替换jquery`.hover()`方法`.mouseenter()``.mouseleave()`

看看这是否有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:47:49.610

这不是 jQuery 问题，而是 CSS 问题。添加`position: relative; z-index: 100`到您的菜单`ul`元素，看看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T06:47:04.087

尝试修改CSS

> ```
> .PozHeader .Menus ul li:hover > ul {
>     visibility:visible;
>     z-index:1
> } 
> ```

# iphone - 如何以编程方式将字符串和键添加到 iPhone 中的字典？

> ID：13152554
> 
> 赞同：-1
> 
> 时间：2012-10-31T06:41:49.673
> 
> 标签：iphone, xcode, plist

我使用以下代码将值写入字典，但是当将新值添加到字典中时，它不会更新，它只显示最近添加的值的 plist，它也崩溃了。

```
nameString=nameTxt.text;
NSFileManager *mngr=[NSFileManager defaultManager];
NSArray *docDir=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docPath=[docDir objectAtIndex:0];
NSString *filePath=[docPath stringByAppendingPathComponent:@"score.plist"];
NSString *bundlePath=[[NSBundle mainBundle] pathForResource:@"score" ofType:@"plist"];

if ([mngr fileExistsAtPath:filePath]) {
    NSLog(@"File exists");
}
else {      
    NSLog(@"NO file exists");
    [[NSFileManager defaultManager] copyItemAtPath:bundlePath toPath:filePath error:NULL];      
}   

dict=[[NSMutableDictionary alloc]init];
dict=[NSMutableDictionary dictionaryWithContentsOfFile:filePath];
NSLog(@"dict is %@",dict);
[dict setObject:nameString forKey:@"100"];
[dict writeToFile:filePath atomically:YES];

[dict release]; 
```

当我使用最后一行“[dict release]”时我崩溃了我的包中有一个 score.plist 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:19:55.413

This is a simple memory problem.Along with solving the problem you have to understand the problem.

The `dict` is a `NSMutableDictionary` that you declared globally. And so that you can alloc it for using this so that you won't lose the scope of the dictionary.

So in the beginning say 'ViewDidLoad:' , you can alloc and init this as

```
dict=[[NSMutableDictionary alloc]init]; 
```

or in the present condition you can use like

```
dict=[[NSMutableDictionary alloc]initWithContentsOfFile: filePath]; 
```

So that you can alloc the dictionary with the `score.plist` file and everything will work fine.

What happended in your case is you alloced the `dict`. But in the next line you replace the alloced object of `dict` with autoreleaed object by the statement

```
dict=[NSMutableDictionary dictionaryWithContentsOfFile:filePath]; 
```

As the class methods always returns autoreleased objects, when you try to release the object which is autoreleased, it crashes. :-)

Hope you got the idea.

Now the solution is you can change the line

```
dict=[[NSMutableDictionary alloc]init]; 
```

To

```
dict=[[NSMutableDictionary alloc]initWithContentsOfFile: filePath]; 
```

And remove the line

```
dict=[NSMutableDictionary dictionaryWithContentsOfFile:filePath]; 
```

Everything will work. Happy Coding. :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:47:01.747

崩溃是由于这条线，

```
dict=[[NSMutableDictionary alloc]init];
dict=[NSMutableDictionary dictionaryWithContentsOfFile:filePath]; 
```

第一行是分配内存，然后覆盖 dict 参数以链接到不属于您的静态字典。所以旧的被泄露了，当你释放它时，它会试图释放静态的。

而不是那种用途，

```
dict=[NSMutableDictionary dictionaryWithContentsOfFile:filePath]; 
```

并且不要使用发布声明。既然你不拥有它，你不必释放它。

[检查这个](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/MemoryMgmt/Articles/MemoryMgmt.html)

# sql - 与case语句相关的sql server查询

> ID：13152556
> 
> 赞同：1
> 
> 时间：2012-10-31T06:41:54.197
> 
> 标签：sql

我这样的查询

当 statement1 = statement2 then offer1 的情况

如果 offer1 是有价值的，那么我需要显示 offer1 值将是“是”

如何为此编写查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:31:09.210

您可以使用存储过程并根据您需要的条件返回一个值，在存储过程中您可以使用普通的 if 语句设计条件，从[这里](http://social.msdn.microsoft.com/Forums/eu/transactsql/thread/b0e04ea5-59fa-486e-8b76-7f7018b99263)看一下这个例子：

```
Create procedure dbo.Prc
@Value varchar(50),
@Result bit OUTPUT
AS
Begin
If exists (select 1 from YourTable where Field=@Value)
set @Result=1
Else
set @Result=0
End 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:43:50.343

您可以像这样嵌套多个`CASE`表达式：

```
CASE
  WHEN statement1 = statement2 
  THEN 
    CASE WHEN offer1 IS NOT NULL THEN 'Yes' ELSE ... END
END 
```

# visual-c++ - 从数组的每个元素中减去标量的函数

> ID：13152557
> 
> 赞同：0
> 
> 时间：2012-10-31T06:41:58.953
> 
> 标签：visual-c++, stl

我想从缓冲区 B 中的每个值中减去一个特定值。因此，例如，如果缓冲区 B 包含以下值；

1000 1500 2000 200

那么如果要减去的值为 5，则输出应为：

995 1495 1995 195

此外，如果差值为负，则应截断为 0。

我知道有一些简单的方法可以做到这一点，但我是一个懒惰的人，我正在为此目的寻找一些功能。

C/C++ 中的 any 函数可以执行此操作吗？

**更新** 基本上我希望该函数与我的琐碎循环方法相比会更加优化。我的缓冲区有 5000000 个值，这将在数千个这样的缓冲区上连续执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:14:10.673

一个这样的功能：

```
void SubtractArray(vector<int>& coll)
{
    transform(coll.begin(), coll.end(), coll.begin(), [](int elem){
        return elem - 5 < 0 ? 0 : elem - 5;
    });
} 
```

# mobile - 学习 Windows Phone 8 所需的软件技能？

> ID：13152564
> 
> 赞同：1
> 
> 时间：2012-10-31T06:42:42.353
> 
> 标签：mobile, windows-8, windows-phone

假设一个人熟悉 C#、ASP.NET、数据库技术和 Windows 8 基础知识以及 Windows Store 应用程序开发，那么学习 Windows Phone 8 所需的软件技能要求是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:48:24.960

我认为对你来说最重要的是了解 windows phone 8 SDK。

[WP8 SDK 下载](http://www.microsoft.com/en-us/download/details.aspx?id=35471)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:09:05.310

我对 C# 有点了解……我的第一个 WP 应用程序花了 2 到 3 天。然后我将其提交给 Marketplace。绝对没有什么特别需要处理的。我刚刚做完。

# tablet - Smartphone 或 Tab 是否遵循其 MAC 地址的任何特定模式？

> ID：13152568
> 
> 赞同：2
> 
> 时间：2012-10-31T06:42:58.627
> 
> 标签：tablet, smartphone, mac-address

我可以借助其 MAC 地址获取有关设备的任何信息，无论是智能手机还是平板电脑。假设，我得到一个 MAC 地址 (C8:20:F9:89:8E:2F)。我如何追踪它是**智能手机还是标签**？他们是否遵循任何特定的模式？

# internet-explorer - Twitter Bootstrap 内容在 ie6 和 ie7 中溢出

> ID：13152571
> 
> 赞同：2
> 
> 时间：2012-10-31T06:43:18.067
> 
> 标签：internet-explorer, twitter-bootstrap, internet-explorer-7, internet-explorer-6

我知道足够多的 CSS 是危险的，并且使用 Twitter Bootstrap 的流体网格在 IE6 和 IE7 上遇到了一些障碍。有人可以帮我理解我做错了什么吗？我已经在这里和其他地方尝试了一些建议，但一直都是空的。

因为我想在两列文本之间添加空格，所以我创建了两个带有填充的 .inner 类。除了 .span4 内容溢出容器的 IE6 和 IE7 之外，这在所有东西中都像魔术一样工作。

![内容在 IE7 中溢出其容器](../Images/81ca66a62eb3de0ec952139c414f891b.png)

有人可以帮助我了解这个填充问题的根源以及我需要做什么吗？非常感谢！

```
#main {padding: 0 5% 3% 5%;}
.inner-left {padding-right: 5%;}
.inner-right {padding-left: 2%;}

<div id="content" class="fluid-row">
<div id="main" class="span12" role="main">
<div class="row-fluid">
    <div class="span8">
       <div class="inner-left">
          <p>text</p>
       </div>
    </div>

    <div class="span4">
       <div class="inner-right">
         <p>text</p>
       </div>
    </div>
 </div>
 </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:17:20.667

你可以用这个替换你的代码：

```
<div class="inner-right" style="margin-right:70px">
<blockquote><p>What do you plan to do with your one wild and precious life?</p>
<p><small>Mary Oliver</small></p></blockquote>
</div> 
```

或者您可以编辑您的 app.css，如下所示：

```
.inner-right {
padding-left: 2%;
margin-right:70px;
} 
```

# javascript - 在原生 javascript 中创建一个可拖动的 div

> ID：13152578
> 
> 赞同：14
> 
> 时间：2012-10-31T06:43:44.880
> 
> 标签：javascript

我想在不使用 jquery 和库的情况下在本机 javascript 中创建一个可移动/可拖动的 div。有教程或任何东西吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-31T08:14:46.423

好的，这是我用于轻量级部署的个人代码（由于某种原因，不允许或过度使用库的项目）。首先，我总是使用这个方便的函数，这样我就可以传递一个 id 或实际的 dom 元素：

```
function get (el) {
  if (typeof el == 'string') return document.getElementById(el);
  return el;
} 
```

作为奖励，`get()`打字时间比`document.getElementById()`我的代码更短。

其次要意识到大多数库正在做的是跨浏览器兼容性。如果所有浏览器的行为都相同，则代码相当简单。因此，让我们编写一些跨浏览器函数来获取鼠标位置：

```
function mouseX (e) {
  if (e.pageX) {
    return e.pageX;
  }
  if (e.clientX) {
    return e.clientX + (document.documentElement.scrollLeft ?
      document.documentElement.scrollLeft :
      document.body.scrollLeft);
  }
  return null;
}

function mouseY (e) {
  if (e.pageY) {
    return e.pageY;
  }
  if (e.clientY) {
    return e.clientY + (document.documentElement.scrollTop ?
      document.documentElement.scrollTop :
      document.body.scrollTop);
  }
  return null;
} 
```

OK，上面两个函数是一样的。当然有更好的方法来编写它们，但我现在保持它（相对）简单。

现在我们可以编写拖放代码了。我喜欢这段代码的一点是，所有内容都在一个闭包中捕获，因此没有全局变量或辅助函数在浏览器中乱扔垃圾。此外，代码将拖动手柄与被拖动的对象分开。这对于创建对话框等很有用。但如果不需要，您始终可以为它们分配相同的对象。无论如何，这是代码：

```
function dragable (clickEl,dragEl) {
  var p = get(clickEl);
  var t = get(dragEl);
  var drag = false;
  offsetX = 0;
  offsetY = 0;
  var mousemoveTemp = null;

  if (t) {
    var move = function (x,y) {
      t.style.left = (parseInt(t.style.left)+x) + "px";
      t.style.top  = (parseInt(t.style.top) +y) + "px";
    }
    var mouseMoveHandler = function (e) {
      e = e || window.event;

      if(!drag){return true};

      var x = mouseX(e);
      var y = mouseY(e);
      if (x != offsetX || y != offsetY) {
        move(x-offsetX,y-offsetY);
        offsetX = x;
        offsetY = y;
      }
      return false;
    }
    var start_drag = function (e) {
      e = e || window.event;

      offsetX=mouseX(e);
      offsetY=mouseY(e);
      drag=true; // basically we're using this to detect dragging

      // save any previous mousemove event handler:
      if (document.body.onmousemove) {
        mousemoveTemp = document.body.onmousemove;
      }
      document.body.onmousemove = mouseMoveHandler;
      return false;
    }
    var stop_drag = function () {
      drag=false;      

      // restore previous mousemove event handler if necessary:
      if (mousemoveTemp) {
        document.body.onmousemove = mousemoveTemp;
        mousemoveTemp = null;
      }
      return false;
    }
    p.onmousedown = start_drag;
    p.onmouseup = stop_drag;
  }
} 
```

`offsetX/offsetY`稍微复杂的计算是有原因的。如果您注意到，它只是获取鼠标位置之间的差异并将它们添加回被拖动的 div 的位置。为什么不只使用鼠标位置？好吧，如果你这样做，当你点击它时，div 会跳转到鼠标指针。这是我不想要的行为。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-31T06:55:56.753

你可以试试这个

**HTML**

```
<div id="one" style="height:50px; width:50px; border:1px solid #ccc; background:red;">
</div> 
```

**用于可拖动 div 的 Js 脚本**

```
window.onload = function(){
    draggable('one');
};

var dragObj = null;
function draggable(id)
{
    var obj = document.getElementById(id);
    obj.style.position = "absolute";
    obj.onmousedown = function(){
            dragObj = obj;
    }
}

document.onmouseup = function(e){
    dragObj = null;
};

document.onmousemove = function(e){
    var x = e.pageX;
    var y = e.pageY;

    if(dragObj == null)
        return;

    dragObj.style.left = x +"px";
    dragObj.style.top= y +"px";
}; 
```

检查这个**[演示](http://jsfiddle.net/5t3Ju/)**

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-01-17T13:33:40.237

此代码更正鼠标的位置（因此当您开始拖动时，拖动的对象不会跳跃）并且也适用于触摸屏/手机

```
var dragObj = null; //object to be moved
var xOffset = 0; //used to prevent dragged object jumping to mouse location
var yOffset = 0;

window.onload = function()
{
	document.getElementById("menuBar").addEventListener("mousedown", startDrag, true);
	document.getElementById("menuBar").addEventListener("touchstart", startDrag, true);
	document.onmouseup = stopDrag;
	document.ontouchend = stopDrag;
}

function startDrag(e)
/*sets offset parameters and starts listening for mouse-move*/
{
	e.preventDefault();
	e.stopPropagation();
	dragObj = e.target;
	dragObj.style.position = "absolute";
	var rect = dragObj.getBoundingClientRect();

	if(e.type=="mousedown")
	{
		xOffset = e.clientX - rect.left; //clientX and getBoundingClientRect() both use viewable area adjusted when scrolling aka 'viewport'
		yOffset = e.clientY - rect.top;
		window.addEventListener('mousemove', dragObject, true);
	}
	else if(e.type=="touchstart")
	{
		xOffset = e.targetTouches[0].clientX - rect.left; //clientX and getBoundingClientRect() both use viewable area adjusted when scrolling aka 'viewport'
		yOffset = e.targetTouches[0].clientY - rect.top;
		window.addEventListener('touchmove', dragObject, true);
	}
}

function dragObject(e)
/*Drag object*/
{
	e.preventDefault();
	e.stopPropagation();

	if(dragObj == null) return; // if there is no object being dragged then do nothing
    else if(e.type=="mousemove")
	{
		dragObj.style.left = e.clientX-xOffset +"px"; // adjust location of dragged object so doesn't jump to mouse position
		dragObj.style.top = e.clientY-yOffset +"px";
	}
    else if(e.type=="touchmove")
	{
		dragObj.style.left = e.targetTouches[0].clientX-xOffset +"px"; // adjust location of dragged object so doesn't jump to mouse position
		dragObj.style.top = e.targetTouches[0].clientY-yOffset +"px";
	}
}

function stopDrag(e)
/*End dragging*/
{
	if(dragObj) 
	{
		dragObj = null;
		window.removeEventListener('mousemove', dragObject, true);
		window.removeEventListener('touchmove', dragObject, true);
	}
}
```

```
div{height:400px; width:400px; border:1px solid #ccc; background:blue; cursor: pointer;}
```

```
<div id="menuBar" >A</div>
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-31T07:07:56.690

```
<div draggable=true ondragstart="event.dataTransfer.setData('text/plain', '12345')">
drag me
</div>

<div ondragover="return false;" ondrop="this.innerHTML=event.dataTransfer.getData('text/plain')">
drop on me
</div> 
```

# jquery - jQuery 验证引擎 IE7 问题

> ID：13152580
> 
> 赞同：1
> 
> 时间：2012-10-31T06:43:48.997
> 
> 标签：jquery, internet-explorer-7, jquery-validation-engine

我正面临 jquery 验证引擎插件的问题。该错误仅适用于 IE7 浏览器。在 IE8、Mozilla Firefox 和 Chrome 上运行良好。

这是我在 IE7 上得到的 - 错误：未加载 jQuery.validationEngine 规则，请向页面添加本地化文件。

```
Code :
<script src="js/languages/jquery.validationEngine-en.js" type="text/javascript" charset="utf-8"></script>
<script src="js/jquery.validationEngine.js" type="text/javascript" charset="utf-8"></script>
<link rel="stylesheet" href="css/validationEngine.jquery.css" type="text/css"/>

<script type="text/javascript">
jQuery(document).ready(function() {
    // binds form submission and fields to the validation engine
    jQuery("#frm_contactus").validationEngine({promptPosition : "topLeft"});
});
</script> 
```

我用firebug做了一些调试。所有必需的 JS 文件都已正确加载。

# python - 从 dict 中删除空格：Python

> ID：13152585
> 
> 赞同：4
> 
> 时间：2012-10-31T06:44:07.830
> 
> 标签：python, dictionary

考虑我有听写。前任。

```
 dict1 = {"1434": {"2012-10-29": {"275174": {"declaration_details":
 {"UTCC": `"38483 "`, "CNRE": "8334", "CASH": "55096.0"},
 "sales_details": {"UTCC": "38483.0", "CNRE": "8334.0", "CASH":
 "55098.0"}}, "275126": {"declaration_details": {"CNIS": "63371"},
 "sales_details": {"CNIS": "63371.0"}}, "275176":
 {"declaration_details": {"UTCC": "129909", "CASH": `"93200.0 "`,
 "CNRE": "28999", "PBGV": "1700"}, "sales_details": {"UTCC":
 "131619.0", "PBGV": "1700.0", "CASH": "92880.0", "CNRE": "28999.0"}},
 "275169": {"declaration_details": {"AMCC": "118616", "CNRE": "19462",
 "CASH": "120678.0"}, "sales_details": {"UTCC": "118616.0", "CNRE":
 "19462.0", "CASH": "120677.0"}}, "266741": {"declaration_details":
 {"UTCC": "42678", "CNRE": "4119", "CASH": `"24944.0 "`},
 "sales_details": {"UTCC": "42678.0", "CNRE": "4119.0", "CASH":
 "24944.0"}}}}} 
```

我想删除该 dict1 中的所有空格。

哪种方法更好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T06:57:10.900

```
def removew(d):
  for k, v in d.iteritems():
    if isinstance(v, dict):
      removew(v)
    else:
      d[k]=v.strip()

removew(dict1)
print dict1 
```

输出：

```
{'1434': {'2012-10-29': {'275174': {'declaration_details': {'UTCC': '38483', 'CNRE': '8334', 'CASH': '55096.0'}, 'sales_details': {'UTCC': '38483.0', 'CNRE': '8334.0', 'CASH': '55098.0'}}, '275126': {'declaration_details': {'CNIS': '63371'}, 'sales_details': {'CNIS': '63371.0'}}, '275176': {'declaration_details': {'UTCC': '129909', 'CNRE': '28999', 'CASH': '93200.0', 'PBGV': '1700'}, 'sales_details': {'UTCC': '131619.0', 'CNRE': '28999.0', 'CASH': '92880.0', 'PBGV': '1700.0'}}, '275169': {'declaration_details': {'CNRE': '19462', 'AMCC': '118616', 'CASH': '120678.0'}, 'sales_details': {'UTCC': '118616.0', 'CNRE': '19462.0', 'CASH': '120677.0'}}, '266741': {'declaration_details': {'UTCC': '42678', 'CNRE': '4119', 'CASH': '24944.0'}, 'sales_details': {'UTCC': '42678.0', 'CNRE': '4119.0', 'CASH': '24944.0'}}}}} 
```

编辑：正如 Blckknght 所指出的，如果您`strip()`的键包含空格（旧键、值对保留在字典中），第一个解决方案将中断。如果您需要同时使用 dict 理解，则返回一个新的 dict（从 python 2.7 开始可用）。

```
def removew(d):
    return   {k.strip():removew(v)
             if isinstance(v, dict)
             else v.strip()
             for k, v in d.iteritems()}
removew(dict1) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T06:58:31.853

我认为递归函数可能是您最好的方法。这样您就不必担心您的空格所在的嵌套字典的深度。

```
def strip_dict(d):
    return { key : strip_dict(value)
             if isinstance(value, dict)
             else value.strip()
             for key, value in d.items() } 
```

如果除了值之外，还想从键中删除空格，只需在字典理解的第一行`key`替换为。`key.strip()`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-29T08:47:52.903

这是一个函数，它不仅可以从值中删除空格，还可以从键中删除空格。

它在找到字典时递归，就像其他答案一样：

```
def strip_dict(d):
    """
    Recursively remove whitespace from keys and values in dictionary 'd'
    """

    for key, value in d.iteritems():
        if ' ' in key:
            d[key.strip()] = value
            del d[key]
        if isinstance(value, dict):
            strip_dict(value)
        elif isinstance(value, list):
            d[key.strip()] = [x.strip() for x in value]
        elif isinstance(value, str):
            d[key.strip()] = value.strip() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-28T08:26:35.570

我需要一个函数来清除包含其他`dicts`或其他内容的嵌套字典中的所有空格`lists`。这应该会有所帮助，我使用了上述答案。

```
def strip_dict(d):
    def strip_list(l):
        return [strip_dict(x)
        if isinstance(x, dict)
        else strip_list(x)
        if isinstance(x, list)
        else clean(value) 
        for x in l]

    def clean(string):
        return ''.join(string.split())

    return { key.strip() : strip_dict(value)
             if isinstance(value, dict)
             else strip_list(value)
             if isinstance(value, list)
             else value
             if isinstance(value, bool)
             else clean(value)
             for key, value in d.items() } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-29T14:39:25.420

由于上面的答案是正确的，但是有一些错误并且没有考虑一些可能性，所以我发布了我的答案版本，它递归地去除了键和值。

```
def strip_dict_keys_values(d):
    def strip_list(l):
        return [strip_dict_keys_values(x)
                if isinstance(x, dict) else strip_list(x)
                if isinstance(x, list) else clean(x) for x in l]

    def clean(value):
        if isinstance(value, str):
            return value.strip()
        return value

    return {key.strip(): strip_dict_keys_values(value)
            if isinstance(value, dict) else strip_list(value)
            if isinstance(value, list) else clean(value)
            if value is None else clean(value)
            for key, value in d.items()} 
```

# php - 创建谷歌日历事件

> ID：13152587
> 
> 赞同：2
> 
> 时间：2012-10-31T06:44:19.550
> 
> 标签：php, google-calendar-api

我正在尝试使用下面给出的以下代码创建 google 日历事件，但我得到类 Event not found 。如何创建新事件。请帮忙

```
<?php
         require_once '../../src/Google_Client.php';
         require_once '../../src/contrib/Google_CalendarService.php';
         session_start();

         $client = new Google_Client();
         $client->setApplicationName("Google Calendar PHP Starter Application");

         $client->setClientId('');
         $client->setClientSecret('');
         $client->setRedirectUri('simple.php');
         $client->setDeveloperKey('insert_your_developer_key');
         $cal = new Google_CalendarService($client);
         if (isset($_GET['logout'])) {
           unset($_SESSION['token']);
         }

         if (isset($_GET['code'])) {
            $client->authenticate($_GET['code']);
            $_SESSION['token'] = $client->getAccessToken();
            header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);
        }

        if (isset($_SESSION['token'])) {
           $client->setAccessToken($_SESSION['token']);
        }

        $authUrl = $client->createAuthUrl();
if (!$client->getAccessToken()) { 
```

> 这里正在创建新活动

```
 $event = new Event();
          $event->setSummary("test title");
          $event->setLocation("test location");
          $start = new EventDateTime();
          $start->setDateTime('04-03-2012 09:25:00:000 -05:00');
          $event->setStart($start);
          $end = new EventDateTime();
          $end->setDateTime('04-03-2012 10:25:00:000 -05:00');

          $createdEvent = $cal->events->insert('primary', $event);

          echo $createdEvent->getId();
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T13:06:07.083

我有同样的问题。他们的文档非常不完整。他们的例子中的类名是错误的。这是我要工作的代码：

```
$event = new Google_Event();
$event->setSummary('Halloween');
$event->setLocation('The Neighbourhood');
$start = new Google_EventDateTime();
$start->setDateTime('2012-10-31T10:00:00.000-05:00');
$event->setStart($start);
$end = new Google_EventDateTime();
$end->setDateTime('2012-10-31T10:25:00.000-05:00');
$event->setEnd($end);
$createdEvent = $cal->events->insert('[calendar id]', $event); //Returns array not an object

echo $createdEvent->id; 
```

`$cal->events->insert`返回一个数组，而不是他们的示例代码中的对象。如果您希望它返回一个对象，您需要在`Google_Client`调用中定义它，如下所示：

```
$client = new Google_Client(array('use_objects' => true)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-18T08:00:50.180

我也遇到了这个问题，看来谷歌的 API 又发生了变化。

使用我尝试做的文档中的代码示例

```
$calendar = new Calendar(); 
```

这引发了找不到类日历的错误。原来一切都被重命名了，我不得不做以下事情：

```
$calendar = new Google_Service_Calendar_Calendar(); 
```

似乎可以避免冲突的命名约定，但更新文档会很好。因此，为了今天解决 OP 的问题，他现在将使用以下方法解决他的问题：

```
$event = new Google_Service_Calendar_Event(); 
```

您可以查看文件 Google/Service/Calendar.php，您应该会看到使用此命名约定命名的所有相关类。

# objective-c - iOS 中的快照功能

> ID：13152589
> 
> 赞同：0
> 
> 时间：2012-10-31T06:44:29.470
> 
> 标签：objective-c

我有一个包含 3 个子视图的父 UIView，这里我有一个 UIButton 来捕捉整个视图。我已经这样做了

```
UIGraphicsBeginImageContext(CGSizeMake(320,480));
CGContextRef context = UIGraphicsGetCurrentContext();

UIImage *screenShot = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 

[self.view.layer renderInContext:context]; 
```

在这里，我只需要捕获名称为 subview1 的第一个子视图。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:48:25.320

`Capture` `SubView`像这样：

```
UIGraphicsBeginImageContext(subview1.size);
[subview1.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *screenShot = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# ruby-on-rails - 有没有办法强制首先触发“before_destroy”回调？

> ID：13152592
> 
> 赞同：0
> 
> 时间：2012-10-31T06:44:57.177
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个模型，它指定了一个 before destroy 回调。就像是：

```
Class User < ActiveRecord::Base
  before_destroy :do_destroy
  acts_as_destroyable

  private
  def do_destroy
    puts "A"
  end
end

module ActsAsDestroyable
  def self.included(base)
    base.send(:extend, ActsMethods)
  end

  module ActsMethods
    def acts_as_destroyable(options = {})
      self.send(:include, InstanceMethods)
    end

    module InstanceMethods
      def do_something
        puts "A0"
      end

      def self.included(base)
        base.before_destroy :do_something
      end
    end
  end
end 
```

现在，由于 Destroyable 模块与用户的关联工作，它需要在“do_destroy”回调之前执行其“do_domething”方法。任何想法如何将它移到回调队列中？

# oracle - PLSQL 中使用 ORACLE DB 的过程

> ID：13152593
> 
> 赞同：0
> 
> 时间：2012-10-31T06:45:00.203
> 
> 标签：oracle, plsql

```
CREATE OR REPLACE PROCEDURE ABC ( REG_NO   IN  CO_ENROLMENT.S_REGNO%TYPE,
                                  TERM     IN  COURSEOFFERING.CO_TERMNUMBER%TYPE,
                                  YEAR     IN  COURSEOFFERING.CO_YEAR%TYPE,
                                  CO_TITLE IN  COURSE.C_TITLE%TYPE,
                                  EN_DATE  OUT CO_ENROLMENT.COE_ENROLDATE%TYPE,
                                  COM_ST   OUT CO_ENROLMENT.COE_COMPLETIONSTATUS%TYPE)

AS 
BEGIN
   SELECT M.COE_COMPLETIONSTATUS, M.COE_ENROLDATE 
     INTO COM_ST, EN_DATE
     FROM COURSEOFFERING O
    INNER JOIN COURSE C
            ON C.C_ID = O.C_ID
    INNER JOIN CO_ENROLMENT M
            ON M.CO_ID = O.CO_ID
    WHERE M.S_REGNO LIKE REG_NO AND
          O.CO_TERMNUMBER LIKE TERM AND
          O.CO_YEAR LIKE YEAR AND
          C.C_TITLE LIKE CO_TITLE;
END ABC; 
```

我已经写下了上面的程序。下面是调用上述程序的 PL/SQL 块，

```
DECLARE
  COMPL_STATUS   CO_ENROLMENT.COE_COMPLETIONSTATUS%TYPE;
  ENROL_DATE     CO_ENROLMENT.COE_ENROLDATE%TYPE;
BEGIN
  ABC (44444444, 2009, 2, 'PLSQL Programming', 
       EN_DATE => enrol_date, COM_ST =>compl_status);
  DBMS_OUTPUT.PUT_LINE ('STUDENT COMPLETION STATUS AND ENROLMENT DATE IS ' 
                         || ENROL_DATE
                         || '    ' 
                         || compl_status );
END; 
```

由于找不到数据，它返回错误，但是当我单独运行查询时，我得到了输出。我无法弄清楚出了什么问题。我是否正确编写了程序块并且在 PL/SQL 块中传递的参数是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:56:51.120

在过程中，您有一年排名第三，但您称它为第二名。以及如何声明类型 (COURSEOFFERING.CO_TERMNUMBER%TYPE, COURSEOFFERING.CO_TERMNUMBER%TYPE)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:59:39.280

当`select`您的过程中的语句`ABC`没有返回任何行时，`NO_DATA_FOUND`将引发异常并且您的存储过程的执行将被暂停。为避免此类行为，您需要`EXCEPTION`在存储过程中添加部分以捕获异常并做出适当反应。为此，存储过程的执行部分可能如下所示：

```
BEGIN
   SELECT M.COE_COMPLETIONSTATUS, M.COE_ENROLDATE 
     INTO COM_ST, EN_DATE
     FROM COURSEOFFERING O
    INNER JOIN COURSE C
            ON C.C_ID = O.C_ID
    INNER JOIN CO_ENROLMENT M
            ON M.CO_ID = O.CO_ID
    WHERE M.S_REGNO LIKE REG_NO AND
          O.CO_TERMNUMBER LIKE TERM AND
          O.CO_YEAR LIKE YEAR AND
          C.C_TITLE LIKE CO_TITLE;
EXCEPTION
  WHEN NO_DATA_FOUND
  THEN DBMS_OUTPUT.PUT_LINE('No data found') -- for example
END ABC 
```

或者，如果您想继续，即使`select`语句引发异常，您也可以`select`用嵌套`BEGIN .. END`块将您的语句括起来。

```
BEGIN
   -- some code before
   BEGIN    
     SELECT M.COE_COMPLETIONSTATUS, M.COE_ENROLDATE 
       INTO COM_ST, EN_DATE
       FROM COURSEOFFERING O
      INNER JOIN COURSE C
              ON C.C_ID = O.C_ID
      INNER JOIN CO_ENROLMENT M
              ON M.CO_ID = O.CO_ID
      WHERE M.S_REGNO LIKE REG_NO AND
            O.CO_TERMNUMBER LIKE TERM AND
            O.CO_YEAR LIKE YEAR AND
            C.C_TITLE LIKE CO_TITLE;
   EXCEPTION
     WHEN NO_DATA_FOUND
     THEN DBMS_OUTPUT.PUT_LINE('No data found') -- for example
  END;
  -- some code after
END ABC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T08:03:52.713

您的过程查询中可能缺少通配符。

```
16:02:06 SYSTEM@dwh-prod> select * from dual where 'abc' like 'ab'; 

no rows selected                                                    

16:02:18 SYSTEM@dwh-prod> select * from dual where 'abc' like 'ab%';

D                                                                   
-                                                                   
X 
```

没有它们，`C.C_TITLE LIKE CO_TITLE`等于`C.C_TITLE = CO_TITLE`，这不一定是您想要的。

试试`C.C_TITLE LIKE '%'||CO_TITLE||'%'`等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T08:09:11.470

您错误地调用了存储过程。您必须以正确的顺序指定参数，或使用命名参数表示法，即

```
ABC (44444444, 2, 2009, 'PLSQL Programming', enrol_date, compl_status); 
```

或者

```
ABC (REG_NO => 44444444, YEAR => 2009, TERM => 2,
   CO_TITLE => 'PLSQL Programming', 
   EN_DATE => enrol_date, COM_ST =>compl_status); 
```

您可以看到，如果您使用命名参数表示法，您可以以不同的顺序指定参数（如果参数具有 DEFAULT 值，则根本不指定）。

# objective-c - UIScrollViews 都同时滚动

> ID：13152602
> 
> 赞同：2
> 
> 时间：2012-10-31T06:45:38.117
> 
> 标签：objective-c, ios, uiscrollview, uiscrollviewdelegate

我有一个带有几个滚动视图的屏幕。如何实现这一点：当我点击一个并滑动时，它们都开始滚动。我当然知道`UIScrollViewDelegate`方法，到目前为止我试图做的是结合`-setContentOffset:animated:`它`scrollViewDidScroll`，但它只适用于一种情况——当我开始使用委托滚动视图滚动时。

如何动态更改委托？取决于用户选择哪个滚动视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T06:49:51.717

`UIScrollView`保留所有对象的数组。确保他们的所有委托都指向同一个对象（或者如果这不可能，则有某种处理程序会被调用`scrollViewDidScroll`）。然后使用`setContentOffset`调整偏移量。您有正确的想法，但您只想确保除了当前视图（由委托方法参数确定）之外的所有滚动视图都在滚动。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
  for (UIScrollView *view in self.scrollViews) {
    if (scrollView != view) {
      [view setContentOffset:scrollView.contentOffset];
    }
  }
} 
```

# php - 如何在wordpress中显示分类法？

> ID：13152609
> 
> 赞同：0
> 
> 时间：2012-10-31T06:46:03.157
> 
> 标签：php, wordpress, taxonomy

我为帖子创建了一些分类法。我使用下面的代码来显示。但它不显示任何内容。这段代码有什么问题？

```
$term_list = wp_get_post_terms($post->ID, 'link', array("fields" => "all"));

$link = $term_list[0]->name ; 
```

# php - 从 symfony 2.1 (Doctrine) 中的实体获取服务容器

> ID：13152610
> 
> 赞同：12
> 
> 时间：2012-10-31T06:46:04.570
> 
> 标签：php, symfony, service, doctrine

如何在学说中使用实体即服务（使用 Symfony 2.1）。

示例用法：

```
<?php

namespace MyNamespace;

class MyEntity
{
  protected $container = NULL;
  public function __construct($container)
  {
    $this->container = $container;
  }

  /** 
   * @ORM\PrePersist
   */
  public function() 
  {
    // Must call to container and get any parameters
    // for defaults sets entity parameters
    $this->container->get('service.name');
  }
} 
```

因此，我需要访问整个容器。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-14T15:15:27.633

编辑：**这不是首选**方式，这是在实体内部获取服务容器的唯一方法，这不是一个好习惯，应该避免，但这只是回答了问题。

如果您仍然需要容器和/或存储库，您可以像这样扩展基本的 abastractEntity：

```
<?php

namespace Acme\CoreBundle\Entity;

/**
 * Abstract Entity 
 */
abstract class AbstractEntity
{
    /**
     * Return the actual entity repository
     * 
     * @return entity repository or null
     */
    protected function getRepository()
    {
        global $kernel;

        if ('AppCache' == get_class($kernel)) {
            $kernel = $kernel->getKernel();
        }

        $annotationReader = $kernel->getContainer()->get('annotation_reader');

        $object = new \ReflectionObject($this);

        if ($configuration = $annotationReader->getClassAnnotation($object, 'Doctrine\ORM\Mapping\Entity')) {
            if (!is_null($configuration->repositoryClass)) {
                $repository = $kernel->getContainer()->get('doctrine.orm.entity_manager')->getRepository(get_class($this));

                return $repository;
            }
        }

        return null;

    }

} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-31T08:18:08.540

实体是一个数据模型，应该只保存数据（并且不依赖于服务）。如果您想在某个事件的情况下修改您的模型（在您的情况下为 PrePersist），您应该考虑为此创建一个[Doctrine 侦听](http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html)器。您可以在定义侦听器时注入容器：

```
services:
    my.listener:
        class: Acme\SearchBundle\Listener\YourListener
        arguments: [@your_service_dependency_or_the_container_here]
        tags:
            - { name: doctrine.event_listener, event: prePersist } 
```

# iphone - 如何检查下载的PNG图像是否损坏？

> ID：13152616
> 
> 赞同：2
> 
> 时间：2012-10-31T06:46:34.290
> 
> 标签：iphone, objective-c, xcode, png, corrupt

我正在从下面的代码下载多个图像并保存到数据库。但是对于某些图像，我遇到了错误。

错误：ImageIO：PNG 无效距离太远错误：ImageIO：PNG 数据检查不正确

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);                               
dispatch_async(queue, ^{
    NSString *imgStr = [dict  objectForKey:@"image"];                  
    imgStr = [imgStr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    NSData *imgData = [NSData dataWithContentsOfURL:[NSURL URLWithString:imgStr]];
    UIImage *image = [UIImage imageWithData:imgData];

    dispatch_sync(dispatch_get_main_queue(), ^{
       mYImageView.image = image;
    });
}); 
```

![在此处输入图像描述](../Images/8cbce30969b2139c6f1b40a510edcb5d.png)

如何检查存储的图像是否有效，以便我可以再次下载图像？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T07:15:50.713

对于 PNG 图像，检查它们的前两个字节和后两个字节。下面是方法，希望对你有帮助。

谢谢。:)

```
- (BOOL)isImageValid:(NSData *)data
{
    BOOL val = YES;

    if ([data length] < 4) 
        val = NO;

    const char * bytes = (const char *)[data bytes];

    if (bytes[0] != 0x89 || bytes[1] != 0x50) 
        val = NO;
    if (bytes[[data length] - 2] != 0x60 || 
        bytes[[data length] - 1] != 0x82) 
        val = NO;

    return val;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-17T13:48:54.680

[swati sharma 接受](https://stackoverflow.com/a/13153013/1129789)的答案效果很好。这是一个 Swift 扩展，适用于希望在 Swift 中做同样事情的任何人：

```
extension Data
{
    /// Returns whether or not the data is for a valid PNG file.
    var isValidPNG: Bool
    {
        guard self.count > 4 else { return false }

        return self[0] == 0x89 &&
            self[1] == 0x50 &&
            self[self.count - 2] == 0x60 &&
            self[self.count - 1] == 0x82
    }
} 
```

# java - 为什么 Hadoop FileSystem.get 方法需要知道完整的 URI 而不仅仅是方案

> ID：13152619
> 
> 赞同：3
> 
> 时间：2012-10-31T06:46:47.863
> 
> 标签：java, hadoop

是否可以使用从任何有效的 hdfs url 创建的 Hadoop FileSystem 实例再次用于读取和写入不同的 hdfs url。我尝试了以下

```
String url1 = "hdfs://localhost:54310/file1.txt";
String url2 = "hdfs://localhost:54310/file2.txt";
String url3 = "hdfs://localhost:54310/file3.txt";

//Creating filesystem using url1
FileSystem fileSystem = FileSystem.get(URI.create(url1), conf);

//Using same filesystem with url2 and url3  
InputStream in = fileSystem.open(new Path(url2));
OutputStream out = fileSystem.create(new Path(url3)); 
```

这可行。但这会导致任何其他问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T10:56:20.230

您当然可以`FileSystem`使用您的方案和地址创建一个单曲，然后通过`FileSystem`.

```
Configuration conf = new Configuration();
conf.set("fs.default.name","hdfs://localhost:54310");
FileSystem fs = FileSystem.get(conf);
InputStream is = fs.open(new Path("/file1.txt")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:36:17.497

对于不同的 dfs 路径，方法 create/open 将失败。查看 org.apache.hadoop.fs.FileSystem#checkPath 方法。

# asp.net - 在 IIS 6 中发布 Web 应用程序后出现数据库连接错误

> ID：13152623
> 
> 赞同：0
> 
> 时间：2012-10-31T06:47:09.407
> 
> 标签：asp.net, sql-server, iis

在 IIS 6 中发布 Web 应用程序后，出现以下错误

```
A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) 
```

它在具有相同数据库连接的开发服务器中运行良好

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:20:03.963

这可能有多个问题。但基本问题是网络服务器无法定位数据库服务器。

尝试以下步骤以找出确切的问题

1.  可以从您的 Web 服务器 ping 数据库服务器吗？

2.  您在连接到 SQL Server 时是否提供了正确的用户。

3.  您是否能够使用您在配置文件中提供的用户名从 Web 服务器连接到数据库服务器？

尝试以上所有，让我知道你的结果。

# svn - 用于 TortoiseSVN 1.6.x 的 Subversion SVN 版本

> ID：13152625
> 
> 赞同：1
> 
> 时间：2012-10-31T06:47:11.030
> 
> 标签：svn, version-control, tortoisesvn

我被旧版本的 Tortoise SVN 1.6.16 卡住了。在这个版本中，上下文菜单处理程序非常慢，并且希望尽可能多地使用命令行。不幸的是，安装文件夹不包含任何 svn.exe。哪个版本的 Subversion 将与我使用的 TortoiseSVN 版本兼容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T06:53:37.177

它是[TortoiseSVN 的常见问题解答的](http://tortoisesvn.net/faq.html#multiclients)一部分：

> TortoiseSVN 使用的 Subversion 库的版本在安装程序的文件名中指示，其他客户端也有类似指示。您必须确保这些版本在前两位数字中相互匹配。例如，所有使用 Subversion 1.6.x 的客户端都可以一起使用（“x”表示该数字与兼容性无关）

因此，您可以使用任何 SVN 1.6.x 或 1.6.16，如果您想特别注意兼容性。

# javascript - mousemove 上的图像移动问题（相反方向）

> ID：13152626
> 
> 赞同：1
> 
> 时间：2012-10-31T06:47:12.263
> 
> 标签：javascript, jquery, jquery-events, mousemove, onmousemove

我必须像这个[url一样使用 jQuery / Javascript 移动图像](http://chaikenclothing.com/#/collections/attachment/11/)

我用我自己的逻辑做了[类似的事情。](http://jsfiddle.net/N2k6M/1/)但它会在顶部或底部被切割成更小/更大的图像。或者它在底部完全移动，而在顶部不完全移动，反之亦然。

[http://jsfiddle.net/N2k6M/](http://jsfiddle.net/N2k6M/) （请移动水平滚动条查看全图。）

任何人都可以在这里建议我/修复我的代码，以便我的鼠标移动功能可以正常工作并且图像的上/下部分可以正常移动。

我需要像在原始网址中一样无缝移动图像。

**HTML 部分**

```
<div id="oheight" style="z-index:1000;position:absolute;">123</div> , <div id="yheight" style="z-index:1000;position:absolute;">123</div>

    <img id="avatar" src="http://chaikenclothing.com/wp-content/uploads/2012/05/11.jpg![enter image description here][2]" style="position:absolute;overflow:hidden;" /> 
```

**JAVASCRIPT 部分**

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
<script lang="javascript">
var doc_height = $(document).height();
function updateAvatarPosition( e )
{
    var avatar = document.getElementById("avatar");
    var yheight = parseInt(e.y);
    var ywidth = e.x;
    //avatar.style.left = e.x + "px";

    if((yheight)<(doc_height)){     
        yheight*=2;
        avatar.style.top = '-'+(yheight) + "px";
    }
    console.log(yheight);
    $("#oheight").html(doc_height);
    $("#yheight").html(yheight);
    /*if((ywidth)<(doc_height/6)){
        avatar.style.top = '-'+e.x + "px";
    }*/ 
}

document.getElementById("avatar").onmousemove = updateAvatarPosition;

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:12:22.377

见[http://jsfiddle.net/N2k6M/7/](http://jsfiddle.net/N2k6M/7/)

```
function updateAvatarPosition( e )
{
    var img_height = $('#avatar').height();
    var window_height = $(window).height();
    var factor = (img_height - window_height) / window_height;
    if(factor > 1) {
        var avatar = document.getElementById("avatar");
        var yheight = parseInt(e.clientY);
        avatar.style.top = '-'+(yheight * factor) + "px";    
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T16:30:24.547

@Felix 的回答很棒而且效果很好，但是它做的工作比必要的要多。有一些常量不需要在每次调用时重新分配。通过在 updateAvatarPosition 函数之外设置这些，您可以提高一些性能。

```
var avatar = $('#avatar');
    img_height = avatar.height(),
    window_height = $(window).height();

function updateAvatarPosition( e )
{
    var factor = (img_height - window_height) / window_height,
        yheight = parseInt(e.clientY);

    if (factor < 1) {
        factor = 1;
    }

    avatar.css('top', -(yheight * factor));
}

avatar.on('mousemove', updateAvatarPosition); 
```

更新 [小提琴](http://jsfiddle.net/N2k6M/10/)

Avatar 被多次引用，因此无需多次遍历 DOM，尤其是在 mousemove 等不断循环的事件中多次。在函数之外对头像进行变量引用。image_height 和 window_height 也是常数，不会改变，所以也不需要每次都重新计算。如果它们有可能发生变化，则重新分配应由调整大小事件处理。

会直接在@Felix 的回答下回复/评论，但显然还没有足够的影响力。：-/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T07:10:45.053

我认为这是你想要的东西 [http://jsfiddle.net/N2k6M/6/](http://jsfiddle.net/N2k6M/6/)

```
var doc_height = $(document).height();
function updateAvatarPosition( e )
{
    var avatar = document.getElementById("avatar");
    var yheight = parseInt(e.clientY);
    var ywidth = e.clientX;

    if((yheight)<(doc_height)){        
        yheight*=2;
        avatar.style.top = '-'+(yheight) + "px";
    }
    /*if((ywidth)<(doc_height/6)){
        avatar.style.top = '-'+e.x + "px";
    }*/    
}

document.getElementById("avatar").onmousemove = updateAvatarPosition;​ 
```

# rename - 是否有任何 jsch ChannelSftp 的功能类似于命令 'cp'

> ID：13152627
> 
> 赞同：1
> 
> 时间：2012-10-31T06:47:13.260
> 
> 标签：rename, jsch, cp

这些天，我正在使用jsch-0.1.41，通过ChannelSftp在远程linux服务器上操作资源。我发现没有提供类似于shell命令“cp”的功能。现在我想从一个目录到另一个，这两个目录都是linux服务器上的远程目录。

我的演示中有任何错误点，请指出。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:48:21.917

SFTP 协议不提供这样的命令，因此 JSch 的 ChannelSftp 也不提供它。

你基本上有两种选择：

*   使用 和 的组合`get`，`put`即下载文件并再次上传。您可以在没有本地存储的情况下执行此操作（只需将一个流连接到另一个流），但这仍然需要通过网络移动数据两次（并加密/解密两次），而这并不是真正需要的。仅当其他方法不起作用时才使用此方法。

*   不要使用 SFTP，而是使用`exec`通道在服务器上执行复制命令。在 unix 服务器上，此命令通常命名为`cp`，在 Windows 服务器上可能是`copy`。（如果服务器管理员以某种方式将您的帐户限制为仅限 SFTP 访问，这将不起作用。）

# android - 使用 Android 在 Mail 和 Gmail 中获取多个电子邮件附件

> ID：13152630
> 
> 赞同：0
> 
> 时间：2012-10-31T06:47:39.953
> 
> 标签：android

我可以让 Mail 和 Gmail 将多个 csv 文件附加到电子邮件中。

当通过邮件发送时，**所有**附件都会被传递。
当通过 Gmail 发送时，不会传递**任何附件。**

我已阅读文档[发送二进制内容](http://developer.android.com/training/sharing/send.html#send-binary-content)。我已经搜索但只找到了一个不适用于 Mail 的 Gmail 解决方案。Mail 似乎对任何方法都很满意。Gmail 就是不想玩。

有没有人找到发送多个附件同时适用于 Mail 和 Gmail 的解决方案？

```
final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);
String subject = context.getString(R.string.export_data_email_header);
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
emailIntent.setType("text/csv");

ArrayList<Uri> uris = new ArrayList<Uri>();
if (diariesSelected) uris.add(Uri.fromFile(context.getFileStreamPath("diaries.csv")));
...
emailIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris);

context.startActivity(emailIntent); 
```

以及用于创建文件的代码

```
 FileOutputStream fos = context.openFileOutput(path, Context.MODE_WORLD_READABLE);
 OutputStreamWriter writer = new OutputStreamWriter(fos);
 writer.append(builder.toString());
 writer.close();
 fos.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T23:05:16.593

以下代码是我的一个应用程序的片段。据我记得，它适用于 GMail 和 Mail（目前无法验证。）。它看起来基本上像您的解决方案，但有一些小差异。也许其中之一就是您正在寻找的东西。:)

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);
emailIntent.setType("text/plain");
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[] { "address@mail.com" });
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "The subject");
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "The actual message");

ArrayList<Uri> attachmentUris = new ArrayList<Uri>();

for (File attachment : attachments) {
    attachmentUris.add(Uri.fromFile(attachment));
}

emailIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, attachmentUris);

startActivity(emailIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T07:58:12.187

在这里您可以获取详细信息[https://stackoverflow.com/a/18225100/942224](https://stackoverflow.com/a/18225100/942224)

通过使用下面的代码，我在 gmail 或 Mail 中附加图像文件....希望对您有所帮助

```
Intent ei = new Intent(Intent.ACTION_SEND_MULTIPLE);
        ei.setType("plain/text");
        ei.putExtra(Intent.EXTRA_EMAIL, new String[] {"email id"});
        ei.putExtra(Intent.EXTRA_SUBJECT, "That one works");

        ArrayList<String> fileList = new ArrayList<String>();
        fileList.add(Environment.getExternalStorageDirectory()+"/foldername/certi/qualifications.jpg");
        fileList.add(Environment.getExternalStorageDirectory()+"/foldername/certi/certificate.jpg");
        fileList.add(Environment.getExternalStorageDirectory()+"/foldername/Aa.pdf");

        ArrayList<Uri> uris = new ArrayList<Uri>();
        //convert from paths to Android friendly Parcelable Uri's

        for (int i=0;i<fileList.size();i++)
        {
            File fileIn = new File(fileList.get(i));
            Uri u = Uri.fromFile(fileIn);
            uris.add(u);
        }

        ei.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris);
        startActivityForResult(Intent.createChooser(ei, "Sending multiple attachment"), 12345); 
```

# apache2 - 用 Apache 重写查询字符串

> ID：13152633
> 
> 赞同：1
> 
> 时间：2012-10-31T06:47:53.917
> 
> 标签：apache2

我正在尝试重写查询字符串：

来自：domain.com/new-arrival.htm?webcat=1

至：domain.com/men-new-arrivals

这是我到目前为止似乎不起作用的东西：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} ^webcat=1$
RewriteRule ^new-arrival\.htm$ /men-new-arrivals? [R=301] 
```

谢谢

# scala - 使用 foldleft 或其他一些运算符来计算点距离？

> ID：13152644
> 
> 赞同：2
> 
> 时间：2012-10-31T06:48:29.407
> 
> 标签：scala, collections

好的，所以我认为这很容易，尝试练习 Scala 的集合运算符，我的示例是点列表。

该类可以计算并返回到另一个点的距离（作为双精度）。

但是，向左折叠似乎不是正确的解决方案 - 考虑到元素 e1、e2、e3.. 我需要一个移动窗口来计算，我需要查看最后一个元素以在函数中结转 - 而不仅仅是总和

```
Sum {
  e1.dist(e2)
  e2.dist(e3)
  etc
} 
```

阅读 API，我注意到一个名为“滑动”的函数，也许这是与另一个运算符结合使用的正确解决方案。我当然知道如何使用循环来做到这一点，但尝试学习 scala 方式。

谢谢

```
import scala.math._

case class Point(x:Int, y:Int) {
  def dist(p:Point) = sqrt( (p.x-x)^2+(p.y-y)^2 )

}

object Point {

  //Unsure how to define this?
  def dist(l:Seq[Point]) =l.foldLeft(0.0)((sum:Double,p:Point)=>)

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T07:22:29.230

我不太确定你想做什么，但假设你想要距离的总和：

```
l.zip(l.tail).map { case (x,y) => x.dist(y) }.sum 
```

或滑动：

```
l.sliding(2).map { 
  case List(fst,snd) => fst.dist(snd)
  case _ => 0
}.sum 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T16:11:27.957

如果你想把它作为一个折叠，你可以，但你需要累加器来保留总数和前一个元素：

```
l.foldLeft(l.head, 0.0){ 
  case ((prev, sum), p) => (p, sum + p.dist(prev)) 
}._2 
```

你完成了一个由最后一个元素和总和组成的元组，所以用它`._2`来获取总和部分。

顺便说一句，`^`在 Int 上是按位逻辑异或，而不是幂。使用`math.pow`.

最聪明的方法可能是使用`zipped`，这是一种迭代器，因此您不会像使用那样多次遍历列表`zip`：

```
(l, l.tail).zipped.map( _ dist _ ).sum 
```

# javascript - 如何在 ExtJs 窗口中显示 jsp 内容？

> ID：13152645
> 
> 赞同：0
> 
> 时间：2012-10-31T06:48:39.283
> 
> 标签：javascript, jsp, extjs

我有一个带有 ExtJs 应用程序的 jsp。我单击一个按钮 new Ext.Window appers 。在这个窗口中，我想显示来自另一个 jsp 的表单。这意味着我想要： 1 将参数发送到 jsp。2 根据这些参数填写表格。3 在窗口中显示来自。4 将参数发送到第一个 jsp 之后。

另一种方法是在第二个jsp中发送参数并在这个jsp中创建窗口和表单并显示它。

哪种方式更正确，如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:00:58.310

第二种方法可能更容易。Ext Window（或其父面板）组件具有可以指定的[contentEl属性。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-cfg-contentEl)这样做是将元素的 html 作为 html 属性加载到 Panel 组件中。因此，您可以在服务器端获取现有 JSP 及其所有呈现的 html，并在 Window 面板中按原样显示它。

第一种方式可以通过[组件加载器](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-cfg-loader)来实现。它的作用是让您将远程页面（在您的情况下为 JSP）的内容加载到您的 Ext 组件中。我没有使用过这个，所以我不确定你可能会遇到什么限制。然而，文档中描述了一些有趣的可能性： http://docs.sencha.com/ext-js/4-1/#! [/api/Ext.ComponentLoader](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ComponentLoader)

# graph - 距离神谕的“大小”是什么意思？

> ID：13152646
> 
> 赞同：-1
> 
> 时间：2012-10-31T06:48:45.273
> 
> 标签：graph, distance

我开始阅读有关距离预言的内容，但我不理解距离预言的“大小”一词。它是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:47:03.890

在对该主题的几篇文章进行了深入研究之后，它似乎是指预言机存储的空间量，以便能够有效地回答“图 G 中顶点 u 和 v 之间的距离是多少”类型的查询。

例如，Thorp & Zwick (2005) 的stretch-3 oracle 使用 O(|E| + (|V|^2)/|L|) 的内存。这样 |L| 是地标顶点的数量。

每个预言机都有它的效率，因此可能会存储图形的其他元素以便能够回答这些查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:39:27.680

这真的取决于你读过的上下文（你在哪里读到的？你有链接吗？）。它可以参考 oracle 的内存大小（=实现它所需的内存），路径的长度（=长或短距离查询），可能还有更多

# wordpress - 如何在 wordpress 的提要内容开始之前清除空白行？

> ID：13152651
> 
> 赞同：1
> 
> 时间：2012-10-31T06:49:04.903
> 
> 标签：wordpress, rss, feed, w3c-validation

我们的网站有一个类别提要 URL，如果尝试生成一个`SimpleXMLElement`.

```
http://www.e4s.co.uk/blogs/employers/category/articles/feed/ 
```

[我在http://validator.w3.org/appc/](http://validator.w3.org/appc/)验证了 URL，它显示开头的空白行是问题所在。

如何删除空白行。我的意思是我需要更改哪个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:36:58.140

要删除空白，请查看您的主题`header.php`并删除您在文件顶部看到的任何空白。理想情况下，它应该只包含在文档的第一行，并且在结束和您的 DOCTYPE 声明`<?php`之间没有空格，例如`?>`

```
<?php
/**
 * header.php
 */
?><!DOCTYPE html>

<!-- rest of file... --> 
```

查看您网站上的[内容页面](http://www.e4s.co.uk/blogs/employers/)，我发现没有关闭`</body>`，或者`</html>`这让我相信您的模板缺少`get_footer();`呼叫或`footer.php`不完整。

# android - 使用光标适配器时出现空指针异常...请帮助我识别它

> ID：13152654
> 
> 赞同：1
> 
> 时间：2012-10-31T06:49:14.697
> 
> 标签：android

在这里，我正在保存记录并尝试使用自定义适配器在 Listview 中显示它。单击按钮时我正在调用 getAlldata 方法。我收到空指针异常。

```
10-31 12:01:22.129: E/AndroidRuntime(758): FATAL EXCEPTION: main
10-31 12:01:22.129: E/AndroidRuntime(758): java.lang.NullPointerException
10-31 12:01:22.129: E/AndroidRuntime(758):  at com.salesforce.android.restsample.CustomAdapter.bindView(CustomAdapter.java:38)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.CursorAdapter.getView(CursorAdapter.java:250)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.AbsListView.obtainView(AbsListView.java:2033)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.ListView.makeAndAddView(ListView.java:1772)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.ListView.fillDown(ListView.java:672)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.ListView.fillFromTop(ListView.java:732)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.ListView.layoutChildren(ListView.java:1625)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.AbsListView.onLayout(AbsListView.java:1863)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.view.View.layout(View.java:11278)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.view.ViewGroup.layout(ViewGroup.java:4224)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.LinearLayout.layoutHorizontal(LinearLayout.java:1617)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1401)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.view.View.layout(View.java:11278)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.view.ViewGroup.layout(ViewGroup.java:4224)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.LinearLayout.layoutHorizontal(LinearLayout.java:1617)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.TableRow.onLayout(TableRow.java:121)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.view.View.layout(View.java:11278)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.view.ViewGroup.layout(ViewGroup.java:4224)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.TableLayout.onLayout(TableLayout.java:440)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.view.View.layout(View.java:11278)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.view.ViewGroup.layout(ViewGroup.java:4224)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.view.View.layout(View.java:11278)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.view.ViewGroup.layout(ViewGroup.java:4224)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.view.View.layout(View.java:11278)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.view.ViewGroup.layout(ViewGroup.java:4224)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.view.View.layout(View.java:11278)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.view.ViewGroup.layout(ViewGroup.java:4224)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1489)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.os.Looper.loop(Looper.java:137)
10-31 12:01:22.129: E/AndroidRuntime(758):  at android.app.ActivityThread.main(ActivityThread.java:4424)
10-31 12:01:22.129: E/AndroidRuntime(758):  at java.lang.reflect.Method.invokeNative(Native Method)
10-31 12:01:22.129: E/AndroidRuntime(758):  at java.lang.reflect.Method.invoke(Method.java:511)
10-31 12:01:22.129: E/AndroidRuntime(758):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-31 12:01:22.129: E/AndroidRuntime(758):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-31 12:01:22.129: E/AndroidRuntime(758):  at dalvik.system.NativeStart.main(Native Method)

Button **showOffline** = (Button)findViewById(R.id.show_offline_accounts);
          showOffline.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                    System.out.println("==="+databaseHelper.getAllData());
                    //Cursor c = databaseHelper.getAllData();

    customAdapter = new CustomAdapter(AccountListView.this,databaseHelper.getAllData(), CursorAdapter.NO_SELECTION);
                    //customAdapter.changeCursor(databaseHelper.getAllData());
                    lv.setAdapter(customAdapter);  
            }

          });

public class CustomAdapter extends CursorAdapter {

    public CustomAdapter(Context context,Cursor c,int flags) {
        super(context,c);
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {

        LayoutInflater inflater = LayoutInflater.from(parent.getContext());
        View retView = inflater
                .inflate(R.layout.single_row, parent, false);

        return retView;
    }

@Override
    public void bindView(View view, Context context, Cursor cursor) {

        TextView textViewPersonName = (TextView) view
                .findViewById(R.id.accountBillingCityEditText);
        textViewPersonName.setText(cursor.getString(cursor
                .getColumnIndex(cursor.getColumnName(1))));

        TextView textViewPersonPIN = (TextView) view
                .findViewById(R.id.accountBillingStateEditText);
        textViewPersonPIN.setText(cursor.getString(cursor.getColumnIndex(cursor
                .getColumnName(2))));
    }      
}

TextView textViewPersonName = (TextView) view.findViewById(R.id.accountBillingCityEditText); 
textViewPersonName.setText(cursor.getString(cursor.getColumnIndex(cursor.getColumnName(1)))); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-31T07:06:54.767

您是否检查过视图是否为空？如果不是，则检查`view .findViewById(R.id.accountBillingCityEditText);`返回的内容。如果它仍然不为空，那么（这可能听起来很有趣，但我们需要涵盖所有的基础）检查游标是否为空。

# java - Java：是否有可能知道 Web 服务器使用的 JVM 实例

> ID：13152656
> 
> 赞同：-1
> 
> 时间：2012-10-31T06:49:24.367
> 
> 标签：java

我有 4 个在生产中运行的单个 Web 应用程序的网络服务器。

无论如何我可以知道他们所有人都共享/使用相同的JVM吗？

是否有可能知道任何此类信息？

顺便说一句，我们使用 4 个 Jetty Web 服务器实例来实现由前面的负载均衡器和 JDK 1.6 版本控制的可扩展性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:00:48.913

是的，如果有 4 个 Jetty 实例，那么您有 4 个 JVM 正在运行，这 4 个实例不能共享一个 JVM。

# java - 如何从字符串中获取浮点数？

> ID：13152657
> 
> 赞同：0
> 
> 时间：2012-10-31T06:49:30.083
> 
> 标签：java, string, floating-point

是否有任何与**[php floatval](http://php.net/manual/en/function.floatval.php)**等效的**Java 方法**？

如果没有，我怎样才能在 Java中获取**字符串的****浮点值？**

 *** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T06:50:59.657

```
float f = Float.parseFloat("25");
String s = Float.toString(25.0f); 
```

`System.out.printf("%f", Float.parseFloat("1.0E7"));`输出`10000000.000000`

见[http://ideone.com/3o6dO](http://ideone.com/3o6dO)

从娜塔莎答案更新

使用正则表达式

```
 Pattern p = Pattern.compile("([-+]?[0-9]*\\.?[0-9]+)");
    Matcher m = p.matcher("some string and then a number 123.456789 and continue");
    while (m.find()) {
  System.out.println(m.group(1));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:51:44.023

`Float#parseFloat`将字符串解析为浮动。但是如果字符串包含单词字符，那么它会抛出`NumberFormatException`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:06:20.033

我找到了使用**正则表达式**的解决方案：

```
Pattern p = Pattern.compile("([-+]?[0-9]*\\.?[0-9]+)");
Matcher m = p.matcher("some string and then a number 123.456789 and continue");

if ( m.find() ) {
  System.out.println(m.group(1)); // 123.456789
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T04:53:25.580

我已经给出了一个链接来学习如何从字符串转换浮点值，如 [http://www.roseindia.net/java/beginners/ConvertStringToFloat.shtml](http://www.roseindia.net/java/beginners/ConvertStringToFloat.shtml) 我希望这个对你很有帮助**

# windows - Git下的Windows和Mac项目

> ID：13152658
> 
> 赞同：0
> 
> 时间：2012-10-31T06:49:32.797
> 
> 标签：windows, macos, git

我正在尝试在 Git 下建立一个软件项目。该项目将在 Mac 和 Windows 计算机上编译。Mac 和 Windows 版本中的绝大多数文件是相同的，但在某些情况下我需要以下内容：

文件 xxx 存在于 Mac 和 Windows 版本中。我希望这两个版本都存储在 Git 存储库中，但在 Mac 计算机上我只想访问和修改 Mac 版本，而在 Windows 计算机上我只想访问和修改 Windows 版本。

文件 yyy 在 Mac 版本中存在，但在 Windows 版本中不存在。当我使用 Mac 电脑从 Git 服务器拉取项目时，我希望包含 yyy 文件；但是当我使用 Windows 计算机从 Git 服务器中提取项目时，我不需要 yyy 文件。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:03:52.600

根据文件的组成和大小，您可以：

1.  按环境组织它们并更新编译过程以适应多种环境。这是常见的方法，对于我工作过的堆栈（java，rails），我从来没有遇到过这种方法的问题
2.  将它们重新定位到单独的存储库（[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)）中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:51:12.270

脚本可能是您的最佳选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:51:11.520

两个分支（可合并），两个（不同的）客户端遥控器？

# .net - 如何创建原理图属性（ArcObject .Net api）

> ID：13152659
> 
> 赞同：1
> 
> 时间：2012-10-31T06:49:39.233
> 
> 标签：.net, arcgis, arcobjects, esri-arc-engine

我正在编写用于创建逻辑示意图模板和元素类的 ArcCatalog(10.1) Addin(C#)。现在我需要为 Link 类创建一些属性，例如 OriginNode 和 ExtrimityNode，为其他类创建 Constant 和另一个字段 Attribute。

我创建了如下元素类，无法创建 *ISchematicElementClass emtClass = [ISchematicDataset].CreateSchematicElementClass(elmClassName, esriSchematicElementType.esriSchematicNodeType);*

元素类对象有一个方法 CreateSchematicAttribute("NodeName", uid) 但无法管理，如何使用它......

它给出了一个错误“在集合中找不到项目”

有人可以帮助....

谢谢奈姆

# schema - openam federation 的问题（使用 apacheds 作为数据存储）

> ID：13152660
> 
> 赞同：3
> 
> 时间：2012-10-31T06:49:43.150
> 
> 标签：schema, single-sign-on, openam, federation, apacheds

**请帮我解决这个问题：我正在尝试在 openam 中设置一个 idp 和一个 sp 的联盟。正在使用的数据存储是 ApacheDS。我正在尝试按照以下教程进行相同的操作。**

[http://fczaja.blogspot.com/2012/06/idp-initiated-sso-and-identity.html](http://fczaja.blogspot.com/2012/06/idp-initiated-sso-and-identity.html)

**在测试联合连接（来自控制台）期间，我在 openam 日志中收到以下错误*** ***

```
libSAML2:10/30/2012 06:48:41:399 PM IST: Thread[http-8080-1,5,main]
AccountUtils.setAccountFederation:  set fedinfo {sun-fm-saml2-nameid-info=[http://www.idp.com:8080/openam_10.0.0|http://www.sp.com:8090/openam_10.0.0|WC++1dcclPD//rTlgpYLD0EEISg2|http://www.idp.com:8080/openam_10.0.0|urn:oasis:names:tc:SAML:2.0:nameid-format:persistent|null|http://www.sp.com:8090/openam_10.0.0|IDPRole|false], sun-fm-saml2-nameid-infokey=[http://www.idp.com:8080/openam_10.0.0|http://www.sp.com:8090/openam_10.0.0|WC++1dcclPD//rTlgpYLD0EEISg2]} userID = id=appu,ou=user,dc=opensso,dc=java,dc=net
libPlugins:10/30/2012 06:48:41:543 PM IST: Thread[http-8080-1,5,main]
ERROR: IdRepoDataStoreProvider.setAttribute(): IdRepo exception
Message:Plug-in com.sun.identity.idm.plugins.ldapv3.LDAPv3Repo encountered an ldap exception.  LDAP Error 16: The specified attribute could not be found.
                        at com.sun.identity.idm.plugins.ldapv3.LDAPv3Repo.handleLDAPException(LDAPv3Repo.java:6117)
                        at com.sun.identity.idm.plugins.ldapv3.LDAPv3Repo.setAttributes(LDAPv3Repo.java:4141)
                        at com.sun.identity.idm.plugins.ldapv3.LDAPv3Repo.setAttributes(LDAPv3Repo.java:3921)
                        at com.sun.identity.idm.server.IdServicesImpl.setAttributes(IdServicesImpl.java:1701) 
```

**这可能意味着 openam 试图使用一些不存在的 LDAP 属性（因为我在 ApacheDS 中创建了最小属性集）。所以我去了 IDP 和 SP 中的数据存储设置，并从 LDAP 用户属性中删除了不可用的属性。现在它给出以下错误：**

```
WARNING: IdServicesImpl.setAttributes: Unable to modify identity in the following repository com.sun.identity.idm.plugins.ldapv3.LDAPv3Repo :: Illegal arguments: One or more required arguments is null or empty
amIdm:10/31/2012 10:20:26:362 AM IST: Thread[http-8080-1,5,main]
IdServicesImpl.setAttributes: Unable to set attributes in the following repository com.sun.identity.idm.plugins.internal.SpecialRepo :: Plug-in com.sun.identity.idm.plugins.internal.SpecialRepo does not support operation edit for type {2}
amIdm:10/31/2012 10:20:26:362 AM IST: Thread[http-8080-1,5,main]
WARNING: IdServicesImpl.setAttributes: Unable to set attributes  for identity user::appu in any configured data store
Message:Illegal arguments: One or more required arguments is null or empty
                        at com.sun.identity.idm.plugins.ldapv3.LDAPv3Repo.setAttributes(LDAPv3Repo.java:4039)
                        at com.sun.identity.idm.plugins.ldapv3.LDAPv3Repo.setAttributes(LDAPv3Repo.java:3921) 
```

**一些论坛说需要 sun-fm-saml2-nameid-info 和 sun-fm-saml2-nameid-infokey 等属性。但我无法将它们添加到我的数据存储中，因为它们与架构不匹配。此外，我无法将 openam 安装中给出的 LDIF 导入 Apache DS。我有两个问题： 1\. 我正朝着正确的方向前进（向 Apache ds 数据存储添加属性会有所帮助）？如果是，我如何在 Apache ds 中推送与 openam 相关的 schmea 项目？2.我在这里完全缺少什么。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T07:42:11.343

根据 SAML NameID 格式，OpenAM 将尝试将联合信息保存在用户数据存储中。默认情况下，这些属性是“sun-fm-saml2-nameid-info”和“sun-fm-saml2-nameid-infokey”，但您可以在配置 -> 全局 -> 上将属性名称更改为您想要的任何名称SAMLv2 服务配置页面。

如果您的 SP 使用临时 NameID 格式，则不会保存此信息。

如果您的 SP 使用未指定的 NameID 格式，则在“断言内容”页面上的远程 SP 配置中，您可以使用名为“如果未指定 NameID 格式，则禁用联合持久性”的选项来禁用此数据存储更新。

在任何其他情况下，OpenAM 将尝试在数据存储中保存/使用 Account Federation，这意味着它也会尝试更改/读取数据存储中的属性。如果您的数据存储无法识别这些属性，那么它将引发您提到的错误。此外，当您使用 OpenDJ 时，很可能会在此处加载 OpenAM 模式，因此可以保存该属性。

在 OpenAM 10.1.0 中，如果正在使用忽略的用户配置文件模式，将有一个禁用此更新的选项：[https](https://bugster.forgerock.org/jira/browse/OPENAM-1427) ://bugster.forgerock.org/jira/browse/OPENAM-1427 。

因此，您当前的选择是：

*   如前所述，将设置中的 NameID-Format 更改为瞬态/未指定
*   将配置中的属性名更改为实际存在于 ApacheDS 模式中的属性

# tfs - 在 tfs 实例之间移动提交历史

> ID：13152661
> 
> 赞同：1
> 
> 时间：2012-10-31T06:49:50.357
> 
> 标签：tfs

我是一个非常小的团队的一员。我们正在考虑尝试托管的 tfs 服务 (tfspreview.com) 我们目前正在使用 tfs 2010，但我们都不是该机器上的管理员。

是否可以“移动”提交历史（我只关心代码。拥有正确的提交日期/用户会很好，但不是必需的。）

从技术上讲，我可以检查旧 tfs 的每个提交并将其签入新的。但我觉得必须有一个简单的方法来做到这一点......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:20:55.663

TFS 集成工具是我知道的唯一方法，它有局限性。

[使用 TFS 集成工具从本地 Team Foundation Server 迁移到 Team Foundation Service Preview](http://msdn.microsoft.com/en-us/magazine/jj130558.aspx)

> 工具包未迁移的内容
> 
> *   准确的签到日期/时间（重播签到）
> *   入住注意事项
> *   标签
> *   权限
> *   工作区
> *   待更改
> *   货架集
> *   文件编码
> *   订阅
> *   测试用例
> *   入住政策
> *   报告
> *   团队门户/SharePoint
> *   流程模板
> *   工作项查询
> *   构建
> *   仓库数据

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T13:28:42.780

最后我使用[git-tfs](http://git-tfs.com/)做到了这一点。我克隆`--no-metadata`了旧的 tfs-repo 并提取了一个补丁序列（使用 , 在应用提交后不会混淆新 repo 的克隆）。接下来我克隆了新的 tfs-repo 并应用了补丁序列号。`git tfs rcheckin`“推送”到 tfs 的提交。

缺点：

*   现在我已经完成了每一次提交......
*   每一次提交都发生在“现在”

所以..使用这种方式我丢失了提交的所有元数据（谁做了什么以及何时），但我保留了代码历史......

# php - 如何从 the_content() 函数获得的图像中删除 href 链接

> ID：13152668
> 
> 赞同：0
> 
> 时间：2012-10-31T06:50:16.427
> 
> 标签：php, wordpress

我有一个摄影作品集网站。当单击 single.php 页面上的图像时，调用 the_content() 函数并将用户重定向到图像的实际目录，例如；[http://www.abcxyz.com/wp-content/uploads/2011/10/311565_33735319633456038_270235255_n.jpg](http://www.abcxyz.com/wp-content/uploads/2011/10/311565_33735319633456038_270235255_n.jpg)

我希望用户在图像点击时被重定向到下一个/其他帖子，并且'没有在我需要更改的核心 wordpress 文件中获取锚标记，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:58:38.757

好的，所以我想做这种 WordPress 风格，而不是用 jQuery 破解它。这就是您可以在functions.php 中使用的内容。我认为它应该做你想做的事情：

```
function my_the_content_filter() {
$content = get_the_content();
$nextpost = get_permalink(get_adjacent_post(false,'',false));

$body = preg_replace("{<img\\s*(.*?)src=('.*?'|\".*?\"|[^\\s]+)(.*?)\\s*/?>}ims", '<a href='.$nextpost.'><img $1src=$2 $3/></a>', $content);    

return $body;
}
add_filter( 'the_content', 'my_the_content_filter' ); 
```

所以函数 my_the_content_filter 抓取帖子的内容和下一个帖子的链接。使用正则表达式将内容中围绕图像的 href 替换为下一篇文章的链接。然后将过滤器添加到 the_content 函数。

希望对你有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:48:44.527

首先，我认为您正在做的事情可能有点hacky，您可能知道这一点，所以我将提出一个想法。

您可以使用[get_next_posts_link() 检索下一篇文章的 url；](http://codex.wordpress.org/Function_Reference/get_next_posts_link)

您可以将其附加到包装该帖子的相关元素上的数据属性。假设帖子包含一个 div 或文章标签，您可以为其添加一个 data-nextpostlink 属性。

因此，您可以使用 jQuery 轻松地在帖子中查找图像，用您可以从 data-nextpostlink 属性获取的下一个帖子链接重写链接。

正如我所说，它很老套，绝不理想。但如果你想这样做，那么你可以尝试这样的事情。

用 WordPress 术语来说，另一个可能更好的做法是使用 add_filter 并更改函数。您可能需要使用一些正则表达式来识别 the_content 函数中的图像。

# java - 在 jtable 中添加行时出现 ArrayIndexOutOfBoundsException

> ID：13152669
> 
> 赞同：2
> 
> 时间：2012-10-31T06:50:22.550
> 
> 标签：java, swing, jtable, defaulttablemodel, indexoutofboundsexception

```
this.tModel = new AdvancedMibTableModel(); 
this.table = new JTable(this.tModel);
this.tModel.addRow(new Object[]{"sysLocation","1.3.6.1.2.1.1.6","0",""}); 
```

运行上述代码时发生以下异常。

```
java.lang.ArrayIndexOutOfBoundsException: 0 >= 0
at java.util.Vector.elementAt(Unknown Source)
at javax.swing.table.DefaultTableModel.justifyRows(Unknown Source)
at javax.swing.table.DefaultTableModel.insertRow(Unknown Source)
at javax.swing.table.DefaultTableModel.addRow(Unknown Source)
at javax.swing.table.DefaultTableModel.addRow(Unknown Source) 
```

我在这里做错了什么？实际问题是什么？任何人都可以提出解决方案吗？我尝试了 addRow() 和 insertRow() 但发生了同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:41:02.560

异常很清楚

[在 java.util.Vector.elementAt（未知来源）](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#JTable%28java.util.Vector,%20java.util.Vector%29)

对比

[this.tModel.addRow(new Object[]{"sysLocation","1.3.6.1.2.1.1.6","0",""});](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#JTable%28java.lang.Object%5B%5D%5B%5D,%20java.lang.Object%5B%5D%29)

*   必须创造`Vector<Object>`而不是新的`Object[]`

*   尽快发布[SSCCE以获得更好的帮助](http://sscce.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:54:40.797

您是否将列添加到模型？

如果没有，您应该避免此异常。

您可以按如下方式向模型添加列：

```
TableColumn location = new TableColumn();
// ...
// set location fileds i.e. header etc.
// ...
this.tModel.addColumn(location); 
```

# iphone - 如何在 Iphone 中将语音转换为支持多种语言和快速响应的文本？

> ID：13152670
> 
> 赞同：2
> 
> 时间：2012-10-31T06:50:26.520
> 
> 标签：iphone, ios, xcode

我用于将语音转换为文本我语音 sdk 并给出缓慢的响应，如果任何其他 Sdk 可用于提供支持多种语言的快速响应...

如果您有任何示例或其他使用除提供我之外的任何其他 SDK...

提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:54:52.807

查看此语音识别和文本转语音库“OpenEars”。

[http://www.politepix.com/openears](http://www.politepix.com/openears)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:40:53.310

我不是人工智能专家，但在图像识别方面，他们使用神经网络之类的东西，人工智能可以学习阅读字符，通常基于反向传播的神经网络。

我认为语音识别就像图像识别，但这些技术应该是独立的。

我能想到的你需要互联网连接的唯一原因是因为 SDK 的开发人员希望在服务器上收集 AI 结果，以便 AI 技术可以从这些新结果中学习并变得更智能，就像如何苹果的 Siri 有效。

拥有更大数据池的 AI 很可能比拥有更少数据池的 AI 学得更快（如果应用程序只能在设备上运行，它只会理解你的口音，而不是像 Apple 那样的国际口音西里）

您使用的语音 SDK 似乎走这条路，因为它的所有结果都存储在他们的服务器上。

如果您希望语音识别离线工作，您可能需要学习神经网络 AI 编程并实现自己的编程，或者找到另一个不使用 Internet 连接的库。

# asp.net - 当 Google 速度测试显示“未指定过期时间”时，如何改进我的 asp.net 网站？

> ID：13152672
> 
> 赞同：0
> 
> 时间：2012-10-31T06:50:42.487
> 
> 标签：asp.net, performance, pagespeed

我进行了不同的速度测试，包括使用[Google 的 PageSpeed Insights](https://developers.google.com/speed/pagespeed/insights)。对于每页上的每张图片，它都警告我应该在每张图片上指定高度和宽度，但更重要的是，它在每张图片之后都说“**未指定过期**”。它提供了有关如何解决此问题的建议的链接，例如使用**HTTP 缓存标头**，但我根本不明白这一点。我有 47 页，其中许多页面上有 10 多张图片。

所有图像都经过优化，但由于我在一个有 5 个母版页的 asp.net 网站上，我该怎么办？我已经看到了 php 页面的解决方案。我什至不知道“未指定到期”是什么意思。有什么东西我应该放在我的母版页的头上，还是我需要对我网站上的每个图像进行某种类型的编码？在这方面的任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:00:31.750

您需要更改 IIS 设置，以便在提供图像文件（或其他有趣的静态内容）时设置适当的缓存到期值。

[这篇文章](http://www.iis.net/configreference/system.webserver/staticcontent/clientcache)开头很糟糕，倾向于表明您需要为到期选择一个固定值并将其放置在配置文件中。但它后来显示了一个屏幕截图：

![在此处输入图像描述](../Images/f70c08cf7d638f3d527a477012ab7669.png)

有一些更有希望的选择。

# jquery - 在鼠标悬停时更改内容并在鼠标悬停后恢复

> ID：13152683
> 
> 赞同：2
> 
> 时间：2012-10-31T06:51:21.573
> 
> 标签：jquery

我有一个带有一些文本的 DIV，想在鼠标悬停时更改文本，并在鼠标悬停后恢复文本。跟下面一样。

`<div class="test">Text of Mouseout</div>`

`<div class="test">Text of Mouseover</div>`

我尝试按照以下方式进行操作，但是鼠标悬停时文本会更改，但鼠标悬停后不会恢复：

```
$(".test").hover(
  function() {
    var $original = $(this).clone();
    $(this).html("Text of Mouseover");
  },
  function() {
    $(this).html($original);
  }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:54:06.973

您必须`$original`在悬停功能之外定义变量

```
var $original = null;
$(".test").hover(
  function() {
    if($original === null)
       $original = $(this).html();
    $(this).html("Text of Mouseover");
  },
  function() {
    $(this).html($original);
  }
);​ 
```

看看这个[jsfiddle](http://jsfiddle.net/ZphtC/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T06:58:07.600

```
$("div.test").hover(

  function () {
       originalText=$(this).text();
    $(this).text('New Text');
  }, 
  function () {
    $(this).text(originalText);
  }
      ); 
```

**[现场演示](http://jsfiddle.net/rEQJv/1/)**

```
​ 
```

# python - 如何将字符串转换为字典？

> ID：13152685
> 
> 赞同：-1
> 
> 时间：2012-10-31T06:51:34.337
> 
> 标签：python, json, dictionary

我的代码是

```
import json
import urllib2

# bit.ly data path
bitly_data_path = 'http://bitly.measuredvoice.com/bitly_archive/usagov_bitly_data2012-10-31-1351662469'

file = urllib2.urlopen(bitly_data_path)
records = [json.dumps(json.loads(line)) for line in file]
type(records[0]) 
```

当我运行这个时，我得到，

```
Out[32]: str 
```

当我将最后一行更改为

```
type(dict(records[0])) 
```

我明白了

```
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
/Users/hhimanshu/code/p/python/notebooks/<ipython-input-33-eb9c026d2b46> in <module>()
      8 file = urllib2.urlopen(bitly_data_path)
      9 records = [json.dumps(json.loads(line)) for line in file]
---> 10 type(dict(records[0]))

ValueError: dictionary update sequence element #0 has length 1; 2 is required 
```

[url](http://bitly.measuredvoice.com/bitly_archive/usagov_bitly_data2012-10-31-1351662469)上的数据，看起来像......

```
{ "a": "Mozilla\/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident\/4.0)", "c": "US", "nk": 1, "tz": "America\/Chicago", "gr": "MO", "g": "f8zxQx", "h": "OYt09h", "l": "fhah03269", "hh": "bit.ly", "r": "direct", "u": "http:\/\/portal.hud.gov\/hudportal\/HUD?src=\/i_want_to\/talk_to_a_housing_counselor", "t": 1351662469, "hc": 1350056673, "kw": "HUDcounsel", "cy": "Saint Louis", "ll": [ 38.639900, -90.183998 ] }
{ "a": "Mozilla\/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko\/20100101 Firefox\/14.0.1", "c": "US", "nk": 1, "tz": "America\/Los_Angeles", "gr": "WA", "g": "YlMtB7", "h": "YlMtB6", "l": "twitterfeed", "al": "en-us,en;q=0.5", "hh": "1.usa.gov", "r": "http:\/\/www.facebook.com\/l.php?u=http%3A%2F%2F1.usa.gov%2FYlMtB6&h=1AQFYTwLaAQFVlA4rmQgAET0ZHeNpBYEtVPYb18UJmHGjPQ&s=1", "u": "http:\/\/alerts.weather.gov\/cap\/wwacapget.php?x=OR124CCAE88F2C.WindAdvisory.124CCAE9CD24OR.MFRNPWMFR.b3351cd23df7ee2759f052f670a174df&utm_medium=facebook&utm_source=twitterfeed", "t": 1351662473, "hc": 1351661843, "cy": "Poulsbo", "ll": [ 47.753700, -122.612297 ] }
{ "a": "Mozilla\/4.0 (compatible; MSIE 6.0; Windows NT 5.1)", "c": "US", "nk": 0, "tz": "America\/Indianapolis", "gr": "IN", "g": "rsE6tG", "h": "oeow2l", "l": "addthis", "hh": "bit.ly", "r": "direct", "u": "http:\/\/www.gsa.gov\/portal\/content\/104109#.TjjjzkOlPCo.twitter", "t": 1351662478, "hc": 1312336782, "cy": "Indianapolis", "ll": [ 39.806198, -86.140701 ] }
{ "a": "Mozilla\/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident\/4.0; .NET CLR 1.1.4322; .NET CLR 2.0.50727)", "c": "RU", "nk": 1, "tz": "Europe\/Moscow", "gr": "48", "g": "Q33nV2", "h": "TQWLo1", "l": "jerrybrown2010", "al": "ru", "hh": "bit.ly", "r": "http:\/\/yandex.ru\/yandsearch?text=bit.ly&lr=213", "u": "http:\/\/gov.ca.gov\/news.php?id=17800", "t": 1351662480, "hc": 1351565210, "cy": "Moscow", "ll": [ 55.752201, 37.615601 ] }
{"_heartbeat_":1351662481}
... 
```

如何将我的内容更改为`json`记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:58:32.120

您正在尝试用字符串制作字典。只需不要打你最后的 json.dumps 电话。`dumps`将 dict 转换为字符串。`loads`将字符串转换为字典。

所以这是你的行：

```
records = [json.loads(line) for line in file] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:58:16.200

```
json_data = urllib2.urlopen(bitly_data_path)
data = json.loads(json_data.read()) 
```

# java - 通讯编程错误

> ID：13152687
> 
> 赞同：0
> 
> 时间：2012-10-31T06:51:41.310
> 
> 标签：java, bluetooth, serial-port

我用我的笔记本电脑连接了我的蓝牙接收器。它在 comport 23 continue 处向我发送数据。但我的代码未检测到此 comport。它给了我一个正在使用的 comport 列表。任何人都知道这个问题的解决方案。

```
import java.io.*;
import gnu.io.*;
import java.util.*;

public class  PortReader implements SerialPortEventListener  {
  static Enumeration ports;

  static CommPortIdentifier pID;

  InputStream inStream;

  SerialPort serPort;

  public PortReader() throws Exception{
    serPort = (SerialPort) pID.open("PortReader", 2000);
    inStream = serPort.getInputStream();

    serPort.addEventListener(this);

    serPort.notifyOnDataAvailable(true);

    serPort.setSerialPortParams(9600, SerialPort.DATABITS_8, SerialPort.STOPBITS_1,
        SerialPort.PARITY_NONE);
  }

  public void serialEvent(SerialPortEvent event) {
    switch (event.getEventType()) {
    case SerialPortEvent.BI:
      System.out.println("SerialPortEvent.BI occurred");
    case SerialPortEvent.OE:
      System.out.println("SerialPortEvent.OE occurred");
    case SerialPortEvent.FE:
      System.out.println("SerialPortEvent.FE occurred");
    case SerialPortEvent.PE:
      System.out.println("SerialPortEvent.PE occurred");
    case SerialPortEvent.CD:
      System.out.println("SerialPortEvent.CD occurred");
    case SerialPortEvent.CTS:
      System.out.println("SerialPortEvent.CTS occurred");
    case SerialPortEvent.DSR:
      System.out.println("SerialPortEvent.DSR occurred");
    case SerialPortEvent.RI:
      System.out.println("SerialPortEvent.RI occurred");
    case SerialPortEvent.OUTPUT_BUFFER_EMPTY:
      System.out.println("SerialPortEvent.OUTPUT_BUFFER_EMPTY occurred");
      break;
    case SerialPortEvent.DATA_AVAILABLE:
      System.out.println("SerialPortEvent.DATA_AVAILABLE occurred");
      byte[] readBuffer = new byte[20];

      try {
        while (inStream.available() > 0) {
          int numBytes = inStream.read(readBuffer);
        }
        System.out.print(new String(readBuffer));
      } catch (IOException ioe) {
        System.out.println("Exception " + ioe);
      }
      break;
    }
  }

  public static void main(String[] args) throws Exception{
    ports = CommPortIdentifier.getPortIdentifiers();

    while (ports.hasMoreElements()) {
      pID = (CommPortIdentifier) ports.nextElement();
      System.out.println("Port " + pID.getName());

      if (pID.getPortType() == CommPortIdentifier.PORT_SERIAL) {
        if (pID.getName().equals("COM23")) {
          PortReader pReader = new PortReader();
          System.out.println("COM23 found");
        }
      }
    }
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:26:53.253

您是否看到设备管理器中列出的 COM 端口？（“控制面板”->“设备管理器”->“端口”）如果没有，那么您的蓝牙驱动程序没有按照您的预期创建 COM 端口 (SPP)。

如果您确实在那里看到它，那么您可以尝试通过使用`-Dgnu.io.rxtx.SerialPorts=COM23`系统属性来临时覆盖通用端口枚举以查看您是否连接。

有关该`gnu.io.rxtx.SerialPorts`物业的更多信息：

*   [Rxtx 如何检测端口？](http://rxtx.qbang.org/wiki/index.php/Trouble_shooting#How_does_rxtx_detect_ports.3F__Can_I_override_it.3F)
*   [Rxtx 没有找到我的设备](http://rxtx.qbang.org/wiki/index.php/FAQ#RXTX_does_not_find_my_device.2C_what.27s_wrong.3F)

此外，Rxtx 有不同的版本和包。一些分支和 Rxtx 的最新版本修改了端口在 Windows 上的枚举方式，所以我认为之前存在问题。在此处查看 Rxtx 下载（和分叉）：[http](http://rxtx.qbang.org/wiki/index.php/Download) ://rxtx.qbang.org/wiki/index.php/Download 。

最后，如果您在 x64 系统上使用，请确保您使用的是 x64 二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:17:58.923

[Oracle 的 Doku](http://docs.oracle.com/cd/E17802_01/products/products/javacomm/reference/api/javax/comm/CommPortIdentifier.html)说：

> 获取一个枚举对象，该对象包含系统中每个端口的 CommPortIdentifier 对象。

因此，如果您想要的端口未在此处列出，则可能没有正确设置。我会先检查一下。

其次，它的名称可能与您所期望的不同。您应该打印出该列表以查看是否有一个名为类似但不完全符合您期望的端口。

# .net - .Net Com+TransactionProxyException 的原因以及如何解决？

> ID：13152689
> 
> 赞同：2
> 
> 时间：2012-10-31T06:51:42.957
> 
> 标签：.net, transactions, com+

我有一个使用 Com+ 的 .Net 2.0 Windows 服务，可以将 xml 数据导入数据库，而且大多数时候它工作得很好。

但是，有时（很少）我会抛出事务代理异常。（过去两个月发生过一次，在此期间有 250 000 次处决是正确的）。

最糟糕的是，数据被正确地导入数据库，但是抛出异常并且事务没有回滚。我尝试手动创建异常并验证事务处理是否正确。

你以前见过这个吗？网上关于这个错误的信息不多。该服务在带有 SP2 的 Server 2003 上运行。

抛出的异常是：

> `System.EnterpriseServices.TransactionProxyException`

System.EnterpriseServices.TransactionProxyException 和堆栈跟踪：

> `System.EnterpriseServices.TransactionProxy.MapTxExceptionToHR(TransactionExceptiontxException, Boolean isInCommit)
> at System.EnterpriseServices.TransactionProxy.Commit(Guid guid)
> at System.Runtime.InteropServices.Marshal.ThrowExceptionForHRInternal(Int32 errorCode, IntPtr errorInfo) at System.EnterpriseServices.Thunk.Callback.DoCallback(Object otp, IMessage msg, IntPtr ctx, Boolean fIsAutoDone, MemberInfo mb, Boolean bHasGit) at System.EnterpriseServices.ServicedComponentProxy.CrossCtxInvoke(IMessage reqMsg) at System.EnterpriseServices.ServicedComponentProxy.Invoke(IMessage request)
> at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
> at MyService`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:10:23.397

也许尝试更改这些 DTC 设置？

[http://support.microsoft.com/kb/2556390](http://support.microsoft.com/kb/2556390)

# c - 为什么函数有两个下划线

> ID：13152692
> 
> 赞同：1
> 
> 时间：2012-10-31T06:51:58.370
> 
> 标签：c, u-boot

我目前正在研究 ARM 的 u-boot 流程。我发现许多具有这种格式的功能`__funcname__`。为什么文件名前后要两个下划线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T06:56:40.603

它应该表明该函数在系统级代码中使用。我相信在*某些*编译器中，它们的处理方式与普通函数不同。我不认为这真的是一个要求，但我认为这是曾经做过的事情，并且传统要么继续存在，要么您可能正在查看一些较旧的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T06:56:53.713

保留以两个前导下划线或前导下划线后跟一个大写字母的关键字。它们可以被标准库和操作系统使用。这样，这些函数就不会与用户空间中的函数名称发生冲突（如果它们发生冲突，那是用户的错，因为这些名称是保留的！）

# java - 我应该将循环作业作为 CRON 还是使用 Java 构建的 JAR 运行？

> ID：13152693
> 
> 赞同：1
> 
> 时间：2012-10-31T06:52:02.980
> 
> 标签：java, linux, jar, cron, timer-jobs

我有一个资源非常少的 Linux CENTOS 服务器（例如 AWS MicroInstance）。我在这台服务器上运行了 3 个 PHP 应用程序和 MySQL 服务器实例。我需要为我的应用程序运行多个重复性作业，这些作业需要发送电子邮件、清理过程和生成缩略图。我不想让服务器变慢。在这种情况下将我的任务作为 CRON 或作为使用 Java 构建的 JAR 运行是否正确，或者我应该完全在该服务器之外查看一些东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T07:01:58.260

正如我评论的那样，`cron`通过`crontab`条目使用，也许与`nice`.

我不相信为了这个目的而制作一个主要是休眠并无限期运行的 Java 程序是一个好主意：它将使用资源（交换空间、进程）。而且它可能更脆弱：如果该 Java 进程停止（出于任何原因），您将不会发现。

如果您的 Java 程序相当小并且遵循该语言的一些旧规范，您甚至可以考虑使用[gcj](http://gcc.gnu.org/java/)[提前](http://en.wikipedia.org/wiki/AOT_compiler)将它编译成一个小的 ELF 可执行文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T07:07:15.767

Java 对资源的要求很高。除了缩略图生成之外，您可以使用 cron 和 bash 完成所有您想做的事情。有很多像 cthumb 这样的缩略图生成应用程序，但我一个都没用过。直接使用 ImageMagick 可能更简单。

这可能对资源的影响最小。是否会有足够的资源是另一个问题，并且取决于您希望执行此操作的频率，您很可能会这样做。

# java - 修改链表的最后一个或第一个节点？

> ID：13152695
> 
> 赞同：1
> 
> 时间：2012-10-31T06:52:14.273
> 
> 标签：java

假设我有一个名为 L 的链表，它存储链表，所以：

```
LinkedList <LinkedList<String>> L 
```

如果我这样做了`L1 = L.getLast()`，我也可以说`L.getLast.add("something")`或者`L1.add("something")`并且会在最后一个列表中添加“某物”还是仅在该列表的本地实例中添加“某物”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:04:51.193

> 这会将“某物”添加到最后一个列表还是仅添加该列表的本地实例？

由于您要添加到由两个引用（而不是实例）指向的同一个列表中，因此两行代码都将工作相同。

给定

```
LinkedList <LinkedList<String>> L 
```

以下两个片段将完全相同

*   有一个指向最后一个节点的本地引用（它不是你写的实例）。

    ```
    L1 = L.getLast() 

    L1.add("something") 
    ```

*   没有本地引用但使用存储在外部的引用`LinkedList L`

    ```
    L.getLast.add("something") 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:00:47.033

“该列表的本地实例”是什么意思？我们在这里处理引用类型——存储在外部列表中的只是对列表实例的*引用。*当您获取最后一个元素时，只会为您获取*参考*的副本。无论您如何访问该对象，您仍在修改该单个对象。

您通过创建 a 使您的示例变得比它需要的更复杂`LinkedList<LinkedList<String>>`，但从根本上讲，这与我们可以用 a 轻松演示的问题相同`StringBuilder`：

```
StringBuilder x = new StringBuilder();
StringBuilder y = x; // Copies the *reference*, not an object
y.append("foo");
System.out.println(x); // Prints "foo" 
```

同样，我们有一个`StringBuilder`对象，两者的值`x`和`y`都是对同一对象的引用。无论您如何修改它，修改都是可见的，但是您随后访问该对象。

或者，如果您想以列表为例：

```
List<String> list1 = new ArrayList<String>();
List<String> list2 = list1;
list1.add("help");
System.out.println(list2.size()); // Prints 1 
```

这对于理解 Java 至关重要——*所有*类都以相同的方式工作。表达式的值*永远*不是对象；它始终是引用或原始值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T07:03:17.190

L1 和 l.getLast() 都引用同一个对象（父链表中的最后一个）。

您可以使用 L1.addLast("something") 或 l.getlast().addlast("something") 将“something”添加到最后一个列表中。

# javascript - 在控制台中修改本地 javascript 变量

> ID：13152697
> 
> 赞同：1
> 
> 时间：2012-10-31T06:52:23.790
> 
> 标签：javascript, firefox, google-chrome

如果一个页面的代码将所有变量包装在一个范围内，如下所示：

```
$(function() {
    var attempts = 3;
}); 
```

是否可以从浏览器控制台编辑该范围内的变量（例如 Chrome 的开发者工具或 Firefox 的 Firebug）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:59:10.370

是的，只需设置一个断点。到达断点后，您可以修改断点范围内的所有变量 - 包括隐藏在闭包中的变量。

# android - 在我的 google nexus 7 平板电脑 4.1 中成功安装 apk 文件后，但我无法打开该应用程序，不幸的是它将关闭

> ID：13152699
> 
> 赞同：-1
> 
> 时间：2012-10-31T06:52:34.640
> 
> 标签：android

1.  我已成功在 htc android mobile 中安装了我的 apk 文件。
2.  我可以成功打开和访问该应用程序。
3.  在同一个 apk 文件中，我成功安装在 google nexus 7 tablet 4.1 jellybean 版本中。
4.  安装后，当我点击打开时，出现“**不幸的是应用程序已停止**”的错误..

    （注意：我也为平板电脑大地纵向视图配置了..）

我不知道该怎么办。请任何人帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:26:17.337

使用 USB 电缆将您的设备连接到计算机，并`adb logcat`在您的应用程序出现异常后立即键入，生成的 logcat 输出应该为您提供有关问题所在以及如何修复它的线索。如果您无法解决问题，请在您的问题中发布 logcat，否则没有人可以帮助您，应用程序可能出错的方式太多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:33:03.590

您无需将 HTC 连接到计算机即可查看 LogCat，只需转到**Play 商店**并搜索应用程序**aLogCat**，然后尝试重新打开您的应用程序，当您再次看到此错误时，请转到 aLogCat你会确切地看到出了什么问题。

# jquery - 获取同一类的总和

> ID：13152701
> 
> 赞同：2
> 
> 时间：2012-10-31T06:52:49.547
> 
> 标签：jquery

我有

```
<div id="english">
   <ul>
        <li>English</li>
        <li>Instructor Name</li>
        <li class="grade">85</li>
   </ul>
</div>

<div id="math">
    <ul>
        <li>Math</li>
        <li>Instructor Name</li>
        <li class="grade">80</li>
    </ul>
</div>

<div id="science">
    <ul>
        <li>Science</li>
        <li>Instructor Name</li>
        <li class="grade">90</li>
    </ul>
</div>
<p id="grade-sum">Sum of grade here</p> 
```

我的问题是我将如何使用 jquery 获得该班级成绩的总和。总和应该是 255。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T06:57:47.257

```
$(function() {
    var sum = 0;
    $('li.grade').each(function(){
        sum += parseInt(this.innerHTML, 10)
    })

    $('#grade-sum').text(sum);
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T06:58:19.160

使用 jQuery，您可以轻松地迭代并获得总和。

```
​$(document).ready(function(){
    total_grade = 0;
    $('.grade').each(function(){
        total_grade += parseInt($(this).text());
    })

   $('#grade-sum').text(total_grade);
});​ 
```

检查这个小提琴

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T06:57:56.007

```
var sum = 0;
$("li.grade").each(function(index, element){
  sum += parseInt($(element).text());
});
console.log(sum);
alert(sum);

$('#grade-sum').text(sum) 
```

# ios - 第二个滚动视图移动动画故障

> ID：13152702
> 
> 赞同：0
> 
> 时间：2012-10-31T06:52:49.767
> 
> 标签：ios, scrollview, uiviewanimation

出于审美/娱乐目的，在大于屏幕的背景图像上平移而不是推送第二个视图，我试图结合两个视图的功能，一个是根视图，第二个是推送视图.

因此，根视图有一个按钮，当点击该按钮时，会启动向右平移滚动视图，而不是推动第二个视图。这工作得很好：

```
- (IBAction)nextButton:(id)sender {
[UIView animateWithDuration:2.0 animations:^{
    _scrollViewToPan.contentOffset = CGPointMake(645, 0.0);
}]; 
```

}

现在出现在屏幕上的第二个视图涉及用户输入一些信息。在我尝试将其合并到一个视图中之前，所有这些都作为第二个推送视图。现在它们组合在一起了，当滚动视图动画移动以适应keyboardWasShown中的键盘时，它会出现故障：（见下文）-它会在滚动到键盘上方的位置之前跳转到原始坐标。

```
 NSDictionary* info = [aNotification userInfo];
CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

UIEdgeInsets contentInsets = UIEdgeInsetsMake(645, 0.0, kbSize.height, 0.0);
_scrollViewToPan.contentInset = contentInsets;
_scrollViewToPan.scrollIndicatorInsets = contentInsets;
CGRect aRect = self.view.frame;
aRect.size.height -= kbSize.height;
if (activeField == _nameTextView){
    CGPoint scrollPoint = CGPointMake (645, 160);
    [_scrollViewToPan setContentOffset:scrollPoint animated:YES];
}

if (activeField == _addressTextView){
    CGPoint scrollPoint = CGPointMake (645, 160);
    [_scrollViewToPan setContentOffset:scrollPoint animated:YES];
} 
```

键盘将隐藏：

```
[UIView animateWithDuration:0.3 animations:^{
    _scrollViewToPan.contentOffset = CGPointMake(645, 0.0);
}]; 
```

当这是一个单独的视图时，scrollPoint 为 (0,160) 并且一切正常。我将其更改为 (645, 160) 以与上述平移的第一个偏移量对齐。然而，当用户点击 textView 时，它并没有随着键盘外观平滑地向上滚动，而是跳转到原始的预平移坐标，然后向右和向上滚动，最终在正确的位置结束。

简而言之，我想要的是原始坐标 A --> (点击按钮) --> 滚动到坐标 B --> 点击 textView/keyboard 显示 --> 滚动到坐标 C --> 键盘关闭 --> 滚动到坐标 B。

我得到的是原始坐标 A --> (点击按钮) --> 滚动到坐标 B --> 点击 textView/keyboard 显示 --> (跳转到 A 然后滚动到 C) --> 键盘关闭 --> 滚动协调 B.

我怎样才能摆脱'jump-to-A'故障？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:18:35.060

在将 contentInsets 添加到混合中时，动画线在某处交叉。我没有为键盘即时添加它，而是在其 IB 设置中使我的 scrollView 更大，因此已经考虑了键盘高度。然后将keyboardWasShown简化为：

```
 if (activeField == _nameTextView){
    [UIView animateWithDuration:0.3 animations:^{
        _scrollViewToPan.contentOffset = CGPointMake(645, 140);
    }];
}
if (activeField == _addressTextView){

    [UIView animateWithDuration:0.3 animations:^{
        _scrollViewToPan.contentOffset = CGPointMake(645, 205);
    }]; 
```

在用户第一次和随后的选择时使用仅垂直滚动以适应键盘的正确动画。

# android - Android中希伯来元音点的对齐方式

> ID：13152703
> 
> 赞同：1
> 
> 时间：2012-10-31T06:52:52.787
> 
> 标签：android, text, hebrew

我想使用 Canvas.drawText 界面显示带有元音点 (nikkud) 的希伯来语文本。元音点未对齐，如下图使用摩托罗拉 Defy+ 设备拍摄的：

![错位元音](../Images/f0ef75e4249bab12da62241cb29dde52.png)

hiriq 介于 resh 和 yod 之间，holam 介于 vav 和修女之间。我在两端的字符串中添加了 rtl 代码 (\u200F)，不高兴。我知道有些应用程序已经解决了这个问题，例如 Smart Siddur。基于文本的应用程序和基于图形的应用程序之间有区别吗？我认为同一个引擎在这两种情况下都会呈现文本。我想我可以拆分字符串并将元音分开放置，但这似乎很痛苦且不可扩展。
TIA 的任何线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:21:21.523

好吧，以下工作。我仍然不明白为什么我必须实施它，但这确实有效......

```
 package com.lomda.ong2;

import java.util.HashMap;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Paint.FontMetricsInt;
import android.graphics.Typeface;
import android.graphics.Paint.Align;
import android.graphics.Paint.FontMetrics;
import android.graphics.Point;
import android.graphics.Rect;
import android.util.Log;

// render Hebrew strings with diacritic marks
// 
public class HebRender {

Paint paint;
HashMap<String, Integer> spaces;
String charString;
String prevChar = "";
final String TAG = "HebRender";

public HebRender(Context svContext){
    paint = new Paint(); 
    Typeface t =  Typeface.createFromAsset(svContext.getAssets(),"fonts/SimpleCLM-Bold.ttf");
    //Typeface t =  Typeface.createFromAsset(svContext.getAssets(),"fonts/gisha.ttf");
    paint.setTypeface(t);
    paint.setStyle(Paint.Style.FILL); 
    paint.setTextSize(48); 
    paint.setAntiAlias(true); 
    paint.setTypeface(Typeface.DEFAULT_BOLD); 
    paint.setTextAlign(Align.CENTER);
}

public void drawText(   Canvas canvas, String word, Point locate, int color) {
    Rect bounds = new Rect();
    Rect prevBounds = new Rect(0,0,0,0);
    paint.getTextBounds(word, 0, word.length(), bounds);
    paint.setColor(color);
    int wordWidth = bounds.width();
    // move to right edge (parameter is center)
    locate.x += wordWidth/2;
    // initialize bounds of individual characters
    bounds = new Rect(0,0,0,0);
    // for each character
    for (int i = 0; i < word.length(); i++) {
        // locate and write letter
        char c = word.charAt(i);
        charString = String.valueOf(c); 
        if (c >= 1488 && c <=1514) {// is in consonant range
            paint.getTextBounds(charString, 0, charString.length(), bounds); // get current char dimensions
            if (!prevChar.equals("")) {
                int moveOver = bounds.width()/2 + prevBounds.width()/2 + (int) paint.getTextSize()/10;
                locate.x -= moveOver;
            }
            Log.d(TAG, String.format("Char: %s, Prev char width: %d, char width: %d", charString, prevBounds.width(), bounds.width()));
            canvas.drawText(charString, locate.x, locate.y, paint);
            prevChar = charString;
            prevBounds.set(bounds); // save previous dimensions
        } else {// for each diacritic locate and write
            canvas.drawText(charString, locate.x + getOffset(c, bounds.width()), locate.y, paint);
        }

    }
}

// some diacritic marks need to be moved 
private int getOffset(char c, int charWidth) {
    int offset = 0;
    switch (c){
    case 0x05C1:  // shin dot
        offset = charWidth/2;
        break;
    case 0x05C2:  // sin dot
        offset = -charWidth/2;
        break;
    case 0x05BC:  // dagesh
        offset = findDagesh(c, charWidth);
        break;
    case 0x05B9: // holam
        offset = -(3*charWidth/5);
        break;
    }
    return offset;
}

// move dagesh around for certain characters
private int findDagesh(char c, int charWidth) {
    int offset = 0;
    if (prevChar.equals("ג")) {
        offset = Math.min(2, -charWidth/3);
    } else if (prevChar.equals("ו") ||prevChar.equals("ז") || prevChar.equals("י")){
        offset = Math.min(7, -7*charWidth/10);
    } else if (prevChar.equals("ע") || prevChar.equals("ש") ) {
        offset = Math.max(1, charWidth/3);
    } else if (prevChar.equals("פ")){
        offset = Math.max(2, charWidth/3);
    }
    return offset;
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:58:48.680

这可能是您使用的字体的问题，因为您也可以在台式计算机上重现相同的问题。尽管如今 Android 本身也有希伯来语字形，但供应商之间存在很大差异，因此即使它在一个设备上运行良好，但在其他所有设备上都无法正常运行。

我的建议是通过提供您自己的字体来解决这个问题。例如，您可以使用来自[Culmus Project](http://culmus.sf.net)的字体，这些字体是免费的，并且其中大多数都可以很好地支持希伯来语元音点。

# javascript - XHR 同步调用在 Chrome 中失败。脚本不等待 xhr 响应

> ID：13152705
> 
> 赞同：0
> 
> 时间：2012-10-31T06:53:13.413
> 
> 标签：javascript, xmlhttprequest

问题：在 Chrome 中工作时，脚本不等待同步 xhr 响应。在 FireFox/IE 中工作正常。也使用了 onreadyStateHandlers，但是在收到响应之前，其他代码仍然被执行。

```
function callingScript()
{ var a=callServer();
   alert(a);//Here a is showing undefined while executing in chrome. 
            But in FF/IE its waiting for the response and then alerts a with response. 
}

function callServer()
{
 var response;
 var httpRequest = new XMLHttpRequest();
 httpRequest.open("POST","abc",false);
 httpRequest.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
 httpRequest.onreadystatechange = function() 
   {       
        if (httpRequest.readyState != 4)  
           {return; }

        if (httpRequest.status != 200)    
               {response=httpRequest.status;}
        else   {response=httpRequest.responseText;}

   };
 httpRequest.send(data);
 return response;

 } 
```

请分享你的想法！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:13:45.317

函数 callServer() 不会等待请求得到响应。使用回调来解决这个问题：

```
function callingScript()
{ callServer(function(response) {
      alert(response);
  });
}

function callServer(callback)
{
 var response;
 var httpRequest = new XMLHttpRequest();
 httpRequest.open("POST","abc",false);
 httpRequest.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
 httpRequest.onreadystatechange = function() 
   {       
        if (httpRequest.readyState != 4)  
           {return; }

        if (httpRequest.status != 200)    
               {response=httpRequest.status;}
        else   {response=httpRequest.responseText;}

        callback(response);
   };
 httpRequest.send(data);
 return response;

 } 
```

# php - edit urls in string before echoing?

> ID：13152706
> 
> 赞同：1
> 
> 时间：2012-10-31T06:53:20.077
> 
> 标签：php, mysql, function, dom, href

not sure how it can be done, but how can I edit the urls in a string before echoing results from the db?

**basically:**

the string coming from db:

> Hello, I am Terry. I like using `<a href="http://www.twitter.com">Twitter</a>`, but I prefer using `<a href="http://www.facebook.com">Facebook</a>`. I like posting blogs on my website at `<a href="http://www.mycoolsite.com">My Cool Site</a>`, and I enjoying playing sports.

but I want to echo out:

> Hello, I am Terry. I like using `<a href="http://www.somepage.com/home?url=http://www.twitter.com">Twitter</a>`, but I prefer using `<a href="http://www.somepage.com/home?url=http://www.facebook.com">Facebook</a>`. I like posting blogs on my website at `<a href="http://www.somepage.com/home?url=http://www.mycoolsite.com">My Cool Site</a>`, and I enjoying playing sports.

eg: Replace `http://www.twitter.com` in href with `http://www.somepage.com/home?url=http://www.twitter.com`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:58:23.563

```
$string="Hello, I am Terry. I like using <a href="http://www.somepage.com/home?url=http://www.twitter.com">Twitter</a>, but I prefer using <a href="http://www.somepage.com/home?url=http://www.facebook.com">Facebook</a>. I like posting blogs on my website at <a href="http://www.somepage.com/home?url=http://www.mycoolsite.com">My Cool Site</a>, and I enjoying playing sports."

preg_replace('/<a href="([^"]*)" >/','<a href="someurl?url=$1" >',$string) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:07:47.230

This is what you are actually looking for,

```
<?php   /** PHP, JavaScript and HTML/CSS mixed-code sample */

$string = 'Hello, I am Terry. I like using <a href="http://www.twitter.com">Twitter</a>, but I prefer using <a href="http://www.facebook.com">Facebook</a>. I like posting blogs on my website at <a href="http://www.mycoolsite.com">My Cool Site</a>, and I enjoying playing sports.';    
$myurl = "http://www.somepage.com/home?url=";

$result = preg_replace('/(<a[^>]*href[\s]*=["|\'])(.*?["|\'])/', "$1$myurl$2", $string);

echo $result;
?> 
```

You can try that code on phpfiddle.org it's working. Let me know if you need anything change in that.

**UPDATED CODE:**

```
<?php
$string = 'Hello, I am Terry. I like using <a href="http://www.twitter.com">Twitter</a>, but I prefer using <a href="http://www.facebook.com">Facebook</a>. I like posting blogs on my website at <a href="http://www.mycoolsite.com">My Cool Site</a>, and I enjoying playing sports.';
$myurl = "http://www.somepage.com/home?url=";

preg_match_all('/(<a[^>]*href[\s]*=)["|\'](.*?)["|\']/', $string, $result, PREG_SET_ORDER);

for($i=0;$i<count($result);$i++){
    $string = str_replace($result[$i][0], $result[$i][1] .'"'. $myurl . urlencode($result[$i][2]) .'"'  ,$string);
}

?>
<!--<textarea><?php echo $string; ?></textarea>-->
<?php echo $string; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T06:57:30.530

Quick and dirty way to get it done,

```
$new_string = str_replace('href="', 'href="http://www.somepage.com/home?url=', $old_string); 
```

# c - DirectFB GetStringWidth 函数

> ID：13152707
> 
> 赞同：2
> 
> 时间：2012-10-31T06:53:26.720
> 
> 标签：c, string, directfb

我正在将 DirectFB 用于设备的 GUI。我在使用 DirecFB 的“GetStringWidth”函数获取字符串宽度时遇到问题。当我传递“a”时，它返回“9”宽度的字符串，如果我将传递“ä”特殊字符，那么它将返回“16”，因为“16”宽度我无法具体绘制字符串地点。

```
pstDFB->font_city->GetStringWidth(pstDFB->font_city,"a",-1,&atwidth); 
```

结果 atwidth 等于 9

```
pstDFB->font_city->GetStringWidth(pstDFB->font_city,"ä",-1,&atwidth); 
```

结果 atwidth 等于 16

请帮忙

# android - XmlPullParser 解析具有多种类型的节点

> ID：13152712
> 
> 赞同：0
> 
> 时间：2012-10-31T06:53:46.117
> 
> 标签：android, android-xml, xmlpullparser

请有人帮我使用 android 的 XmlPullParser 解析这段代码（仅此而已）：

```
<div fontStyle="normal">
    <p textAlign="center">
        <span fontSize="26">dontneedthis</span>
    </p>
    <p>description1</p>
    <p>description2</p>
    <p>description3</p>
</div> 
```

我只需要得到串联的 description1+description2+description3

似乎很容易，但我有跳过的问题， `<p textAlign="center">...</p>`因为我不需要它并且只得到其他`<p>`的 TEXT

整个文档很大，我已经解析了除此之外的所有其他部分。我写了一些代码，它巨大的解析正在工作（我可以用几个节点得到我真正需要的东西）。文档很大，很难发现错误。也许您的替代代码可以帮助我。

[这](http://developer.android.com/training/basics/network-ops/xml.html)是一个很好的教程，但它并没有解决我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:23:16.157

问题似乎与[这篇文章](https://stackoverflow.com/questions/11967062/arrayindexoutofboundsexception-in-androids-kxmlparser)有关。当光标位置达到 8192 时，KXmlParser（XmlPullParser 的实现）抛出错误。这是一个限制。我没有找到任何文档如何更改此限制。所以现在我使用编译 xml 文件（XmlPullParser 的 XmlBlock 实现）

# objective-c - NSTextView 中的圆角和渐变

> ID：13152714
> 
> 赞同：4
> 
> 时间：2012-10-31T06:53:58.020
> 
> 标签：objective-c, macos, cocoa

我在 NSTextView 中使用 NSAttributedString 来突出显示文本中的某些区域。我发现更改背景颜色和文本颜色很容易，但我什至不知道从哪里开始绘制更复杂的东西，例如圆角或背景渐变或边框。

这是我要实现的目标的图片：

![突出显示的文本模型](../Images/ab95158fc0e4b2af9e63ec89350a605d.png)

这在 web 视图中是完全可行的，但是对于一些额外的图形繁荣来说似乎有点过分了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-27T03:08:01.900

我创建了一个 NSTextView 实现，该实现与您要创建的外观非常相似（仅缺少渐变），该实现可在此处获得： http: [//github.com/aiman86/ANTaggedTextView](http://github.com/aiman86/ANTaggedTextView)： [![在此处输入图像描述](../Images/0c2ee5a47400b853bd6c4a7ced9dd517.png)](https://i.stack.imgur.com/EmJy4.png)

这是一篇解释我的方法的博客文章：http: [//aimannajjar.com/blog/1-How-to-Create-NSTextView-with-Facebook-like-Tags-Mentions.html#post](http://aimannajjar.com/blog/1-How-to-Create-NSTextView-with-Facebook-like-Tags-Mentions.html#post)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:18:13.000

You can do rounded corner with Quartz lib :

```
[view.layer setCornerRadius:7.0]; 
```

Everyting is possible but not as easy as a stylesheet !

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-15T09:24:40.737

您可以通过以下两种方式之一设置要突出显示的文本范围的属性：

```
NSTextView *textView = ...;
NSRange rangeToHighlight = ...; // Range of characters in textView's textStorage
NSColor *highlightColor = ...;

// Method 1: less efficient
[textView.textStorage setAttributes:@{ NSForegroundColorAttributeName : highlightColor } range:rangeToHighlight];

// Method 2: more efficient but only works for attributes that don't affect layout, e.g. color, underline etc.
[textView.layoutManager addTemporaryAttribute:NSForegroundColorAttributeName value:highlightColor forCharacterRange:rangeToHighlight]; 
```

我不确定你是否可以使用渐变色，但纯色当然可以。

不过，这不会让你得到圆角。

您可以尝试使用 NSTextAttachmentCell，以便自定义渲染角落。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-01T05:54:43.010

这个问题有一些解决方法可能会对您有所帮助，创建一个带有圆角的 UIView，然后尝试在其中绘制 NSTextView，它应该可以工作。

# javascript - 如何获取/访问浏览器（IE 等）的证书状态/信息

> ID：13152718
> 
> 赞同：0
> 
> 时间：2012-10-31T06:54:16.973
> 
> 标签：javascript, xmlhttprequest, certificate, activex

我想安装一个受信任的根证书。现在，我制作了一个批处理/exe 文件，只需单击它即可安装证书。现在，我想将文件附加到一个网页，该网页将自动下载/运行`exe/batch`并安装它。现在，这部分也通过以下代码完成（它作为 activex 对象工作）：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<!-- saved from url=(0014)about:internet -->

<SCRIPT Language="JScript">

function fnShellExecuteJ()

{

var objShell = new ActiveXObject("Shell.Application");

objShell.ShellExecute("D:\\New folder\\New folder\\RootInstaller.exe", "", "", "open", 1);

}

<HTML>

</SCRIPT> 

<BODY>

<body onLoad="javascript:fnShellExecuteJ();"> 

</BODY>

</HTML> 
```

现在，我想检查证书是否安装？如果根证书安装在“IE>工具>Internet选项>内容>证书>受信任的根证书颁发机构”中，则不会尝试打开安装程序并跳过。但是，如果它没有安装，那么它会尝试安装。

总之，我想检查已安装的证书状态，然后在此基础上继续下一步。

感谢您阅读本文（我的英语很糟糕）。任何建议/提示/写作都会帮助这个新人。谢谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:49:19.430

这真的取决于你想如何实现它。

确定特定证书存储中是否存在证书的“规范”方法是使用 API：**使用 CertOpenStore**打开特定存储后的 CertFindCertificateInStore（Windows 上有多个证书存储）。

现在，问题在于这是 C/C++ 代码，您必须将其嵌入 ActiveX（或类似的）中。对于 Windows 7 和 8，我认为您无法避免这种情况。

对于 Windows 7 之前的版本（Windows XP、Windows Vista），Microsoft 有一个名为 CAPICOM 的组件，它允许脚本访问加密。如果您的客户端只有 XP/Vista，您可以使用它，然后从您页面上的 JavaScript 调用 CAPICOM（您的用户必须安装它）。

但是，如果您在用户的计算机上运行可执行文件（以安装证书），为什么不简单地安装受信任的 ActiveX 对象（或 BHO）——您可以在 JavaScript 页面中测试它是否存在。

那是：

```
var MyObj;
try {
    MyObj = new ActiveXObject( "MyActiveX" );
    alert( 'my object exist' );
} catch( err ) {
    alert( 'my object do not exist' );
} 
```

# php - 将 mysql_fetch_row 结果转换为 javascript 数组

> ID：13152719
> 
> 赞同：-1
> 
> 时间：2012-10-31T06:54:36.423
> 
> 标签：php, javascript

我试图将 php mysql_fetch_row 结果转换为 javascript 数组，所以我写下面的代码来做到这一点。但我遇到了问题，如果结果中有多行，那么只有最后一行存储在 javascript 数组中

```
<script>
function sub()
{
alert("coming");
var a= new Array;
<?php
$dbhost ='localhost';
$dbuser = 'root';
$dbpass = '';
$dbname = 'pupilcafe';
$conn = mysql_connect($dbhost,$dbuser,$dbpass) or die ('Error Connecting to mysql');
mysql_select_db($dbname,$conn);
$uid=1;
$semester='1stSemester';    
$cid=1;
$qry="select * from subject where cid='$cid'&& uid='$uid'&& semester='$semester'";
$res = mysql_query($qry);
while($data=mysql_fetch_row($res))
{
$i=0;
echo "a[$i]='".$data[1]."';";
$i++;
}
?>
alert(a[0]);
}
</script> 
```

所以这里mysql代码获取两行frm db（Englishphp）但结果我只有php ..我想要javascript数组中的这两行所以怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:59:35.587

不要自己编造 Javascript 语法。使用`json_encode`：

```
$a = array();
while ($data = mysql_fetch_row($res)) {
    $a[] = $data[1];
}

?>

<script>
    var a = <?php echo json_encode($a); ?>;
</script> 
```

此外，不推荐使用 mysql_ 函数。不要将它们用于新代码。使用 mysqli 或 PDO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:02:35.227

首先，您应该遵循一些编码准则。你的编码方式不整洁。停止使用 mysql_query。它正在贬值并开始使用 PDO。在谷歌中搜索有关。其次，您应该转义您在查询中使用的变量以避免 sql 注入。您所写的代码无法实现您想要的。

```
function sub() {

    //your queries and other stuff here

    while($data=mysql_fetch_row($res))
    {

        $tempArray[] = $data;

    }

    return json_encode($tempArray);
}
?>

<script language = "javascript">

    window.addEventListener("onload", function () {
        var temArray = "<?php echo sub(); ?>";

        alert(tempArray);

    }, false);

</script> 
```

onload eventListener 将判断页面是否已加载。否则，您的函数调用 sub() 可能会给您一个错误“未定义的函数”，因为它尚未加载。

# validation - 肥皂用户界面。如何在发送之前验证请求？

> ID：13152722
> 
> 赞同：3
> 
> 时间：2012-10-31T06:54:50.513
> 
> 标签：validation, wsdl, request, soapui

我正在测试一些 Web 服务，我需要在发送之前针对 wsdl 验证请求（xml 消息）。在使用 GUI 的专业版 Soap UI 中，我可以做到（alt-v），但我不能自动做到。当我开始测试项目时，我需要以某种方式自动验证它。当我们的构建服务器开始运行测试项目时。可能有一些 groovy 脚本或其他东西？

当然，soap ui 中有断言，但它只适用于响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T14:55:41.327

您可以使用以下脚本断言：

```
def project = messageExchange.modelItem.testStep.testCase.testSuite.project

def wsdlcontext = project.getInterfaceAt(0).getDefinitionContext()
def validator = new com.eviware.soapui.impl.wsdl.support.wsdl.WsdlValidator(wsdlcontext);

def errors = validator.assertRequest(messageExchange, false)

assert errors.length < 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:23:43.193

您能否尝试以下脚本，如果您遇到任何问题，请告诉我。

```
import javax.xml.XMLConstants
import javax.xml.transform.stream.StreamSource
import javax.xml.validation.SchemaFactory

//Load the XSD from a file
def xsd = new File('/C:/schemaFile.xsd').text

//Get the XML from the response
def xmlHolder = new com.eviware.soapui.support.XmlHolder( messageExchange.requestContentAsXml )
def xml = xmlHolder['//result']

def factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI)
def schema = factory.newSchema(new StreamSource(new StringReader(xsd)))
def validator = schema.newValidator()

try {
   validator.validate(new StreamSource(new StringReader(xml)))
} catch( e ) {
   assert false
} 
```

# android - Android：在横向上更改 SlidingDrawer 的滑动方向

> ID：13152726
> 
> 赞同：0
> 
> 时间：2012-10-31T06:55:06.957
> 
> 标签：android, android-layout, slidingdrawer

我有一个滑动抽屉，可以从下往上滑动。但是在方向改变时，我希望它从右向左滑动，因为横向视图底部的位置较少。我的布局文件如下：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="#d9d9d9">

    <!-- <RelativeLayout 
        android:id="@+id/header1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="1dp"
        android:background="#999999"> -->

    <RelativeLayout
        android:id="@+id/header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/menubar_appointments"
        android:layout_alignParentTop="true"
        android:padding="0dp" >

        <ImageView 
            android:id="@+id/imgApptBack"
            android:layout_width="25dp"
            android:layout_height="25dp"
            android:layout_centerVertical="true"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="3dip"
            android:src="@drawable/icon_titlebar_back"
            android:padding="0dp"
            android:clickable="true"
            android:onClick="goBack"/>

        <TextView 
            android:id="@+id/titleApptName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/item_appointment"
            android:textSize="18sp"
            android:textColor="#FFFFFF"
            android:textStyle="bold"
            android:padding="2dp"
            android:typeface="sans"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"/>

        <ImageView 
            android:id="@+id/imgTitlebarShar"
            android:src="@drawable/icon_titlebar_share"
            android:layout_width="25dp"
            android:layout_height="25dp"
            android:layout_centerVertical="true"
            android:layout_alignParentRight="true"
            android:layout_marginRight="3dp"
            android:padding="0dp"
            android:clickable="true"/>

    </RelativeLayout>
    <!-- </RelativeLayout> -->

    <!-- Header End -->

    <LinearLayout 
        android:id="@+id/pastapptmntLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="10dp"
        android:layout_margin="10dp"
        android:orientation="vertical"
        android:background="@drawable/upapptmnt_bg"
        android:layout_below="@+id/header">

    <RelativeLayout 
        android:id="@+id/layoutForPassAppt"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:layout_margin="10dp">

        <TextView 
            android:id="@+id/txtApptTime"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textSize="15sp"
            android:textColor="@android:color/black"
            android:gravity="center"
            android:layout_marginTop="5dp"
            android:layout_centerHorizontal="true"
            android:text="This is Test Text"/>

        <TextView 
            android:id="@+id/txtApptWith"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textSize="13sp"
            android:textColor="@android:color/black"
            android:gravity="center"
            android:layout_marginTop="8dp"
            android:layout_centerHorizontal="true"
            android:layout_below="@+id/txtApptTime"
            android:text="This is test"/>

        <LinearLayout 
             android:layout_width="match_parent"
             android:layout_height="wrap_content" 
             android:orientation="horizontal"
             android:layout_centerHorizontal="true"
             android:gravity="center_horizontal"
             android:layout_below="@+id/txtApptWith"
             android:layout_marginTop="7dp" >

                <TextView 
                    android:id="@+id/txtApptType"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:textSize="13sp"
                    android:textColor="@android:color/darker_gray"
                    android:text="Your appointment is:"/>

                 <TextView 
                    android:id="@+id/txtApptConfirmedOrNot"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="3dp"
                    android:text="Confirmed"
                    android:textSize="12sp"
                    android:textColor="#006000" />
          </LinearLayout>

    </RelativeLayout>

    <RelativeLayout 
        android:id="@+id/ForpastApptBelow"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:layout_margin="5dp">

        <LinearLayout 
            android:id="@+id/pastapptbelowUP"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:layout_marginTop="5dp" >

               <TextView 
                   android:id="@+id/txtDirections"
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content"
                   android:text="Directions:"
                   android:textSize="12sp"
                   android:textColor="@android:color/black"
                   android:layout_marginLeft="5dp"
                   android:typeface="sans"/>

               <ImageView 
                   android:id="@+id/imgDirections"
                   android:layout_width="wrap_content"
                   android:layout_height="19dp"
                   android:layout_marginLeft="1dp" 
                   android:src="@drawable/direction"
                   android:layout_gravity="center_vertical"/>

               <TextView 
                   android:id="@+id/txtPhone"
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content"
                   android:textSize="12sp"
                   android:textColor="@android:color/black"
                   android:text="Phone:"
                   android:layout_marginLeft="40dp"
                   android:typeface="sans"/>

               <TextView 
                   android:id="@+id/txtPhoneNumber"
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content"
                   android:textSize="12sp"
                   android:textColor="#00699E"
                   android:text="555-555-555"
                   android:textStyle="bold"
                   android:typeface="sans"
                   android:layout_marginLeft="5dp"/>

          </LinearLayout>

          <LinearLayout 
             android:id="@+id/forremind"
             android:layout_width="match_parent"
             android:layout_height="wrap_content" 
             android:orientation="horizontal"
             android:layout_centerHorizontal="true"
             android:gravity="center_horizontal"
             android:layout_below="@+id/pastapptbelowUP"
             android:layout_marginTop="20dp"
             >

                   <TextView 
                       android:id="@+id/lblRemind"
                       android:layout_width="wrap_content"
                       android:layout_height="wrap_content"
                       android:textColor="@android:color/black"
                       android:textSize="12sp"
                       android:text="Please remind me:"
                       android:typeface="sans" />

                   <TextView
                        android:id="@+id/txtReminder"
                        android:background="@drawable/comboboximage"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"  
                        android:text="Please Remind Me"                     
                        android:clickable="true"
                        android:gravity="center"
                        android:textSize="12sp"
                        android:textColor="@android:color/black"
                        android:typeface="sans"
                        android:layout_marginLeft="10dp"
                        android:onClick="getReminderView"/>

         </LinearLayout> 

    </RelativeLayout>    

    </LinearLayout>

    <!-- <TextView 
        android:id="@+id/txtAppointment_DrName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="13sp"
        android:textColor="#555555"
        android:typeface="sans"
        android:layout_marginTop="10dip"
        android:layout_marginLeft="7dip"
        android:layout_gravity="left"
        android:gravity="top|left" /> -->

    <LinearLayout 
        android:id="@+id/MyNotes"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginLeft="7dip"
        android:layout_marginRight="7dip"
        android:background="@drawable/appointment_rounded_corner_dark"
        android:layout_marginTop="5dip"
        android:layout_below="@+id/pastapptmntLayout">

       <TextView 
        android:id="@+id/txtAppointment_MyNotes"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/title_my_notes"
        android:textSize="17sp"
        android:textStyle="bold"
        android:textColor="#FFFFFF"
        android:typeface="sans"
        android:layout_marginTop="0dip"
        android:layout_marginLeft="0dip"
        android:gravity="center_horizontal"
        android:paddingTop="3dip"
        android:paddingBottom="3dip"
        android:background="#56A5EC" />

            <EditText
                    android:id="@+id/txtNotes"
                    android:layout_width="match_parent"
                    android:layout_height="130dp"
                    android:layout_margin="7dp"
                    android:background="@drawable/edittext"
                    android:singleLine="false"
                    android:textSize="13sp"
                    android:inputType="textImeMultiLine|textCapSentences"
                    android:gravity="top|left" >
                </EditText>

       <!--  <View android:id="@+id/divider" android:background="@drawable/shap_appointment"
            android:layout_width="match_parent" android:layout_height="5sp"
            android:layout_below="@+id/MyNotes"/> -->
     </LinearLayout>   

<!-- <LinearLayout 
    android:layout_height="200dp"
    android:layout_width="fill_parent"
    android:baselineAligned="false"
    android:layout_below="@+id/pastapptmntLayout"
    android:layout_alignParentBottom="true"> -->

    <android.widget.SlidingDrawer
        android:id="@+id/reminderSlidingDrawer"
        android:handle="@+id/handle"
        android:content="@+id/reminderContainer"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="bottom"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_below="@+id/pastapptmntLayout"        
        >

        <Button 
            android:id="@+id/handle"
            android:visibility="invisible"
            android:layout_width="0px" 
            android:layout_height="0px"         
            />

        <LinearLayout
            android:id="@+id/reminderContainer"   
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical"
            android:layout_marginTop="5dp"                        
            android:background="@drawable/layout_wheel_bg">

            <Button
                android:id="@+id/setReminderVtn"
                android:layout_gravity="top|right"
                android:text="Done"
                textSize="12sp"
                android:textColor="#FFFFFF"
                android:background="@drawable/menu_bar_button"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:onClick="setReminder"
                android:layout_marginBottom="40dp"                                      
                />

            <kankan.wheel.widget.WheelView android:id="@+id/reminder"
            android:layout_height="wrap_content"
            android:layout_width="200dp"
            android:layout_gravity="center"                 
            />

        </LinearLayout>    

     </android.widget.SlidingDrawer> 
   <!-- </LinearLayout>    --> 
</RelativeLayout> 
```

我读[了这个](https://stackoverflow.com/questions/1137350/how-to-make-an-android-slidingdrawer-slide-out-from-the-left/11228364#11228364)，但对我没有用。

任何线索我怎样才能做到这一点？

# vhdl - VHDL 中的通用包

> ID：13152727
> 
> 赞同：5
> 
> 时间：2012-10-31T06:55:10.217
> 
> 标签：vhdl

是否有可能有一个通用的包？这意味着当我实例化实体时，我提供了一些通用的，并且包将依赖于它。

我有一个我想多次使用的块，每次使用不同的包（即不同的参数）

我必须使用包，因为我想使用数组数组，而我只能使用包来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:01:45.193

是的，但这是[VHDL-2008](http://www.doulos.com/knowhow/vhdl_designers_guide/vhdl_2008/vhdl_200x_major/#PackageGenerics)的功能。因此，您是否能够使用它取决于您的工具。

这个功能真的很强大。

这是[一个例子](https://stackoverflow.com/questions/7925361/passing-generics-to-record-port-types)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-06T20:10:49.650

目前这可以通过 Xilinx 的 Vivado 工具集实现，该工具集支持许多 VHDL-2008 特性。[参考此处](https://stackoverflow.com/a/63291059/2658159)提供的其他答案。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-31T07:32:50.087

不，不是，因为库子句是静态评估的，您需要的是动态绑定之类的东西，这在 vhdl 中是不可能的。

但是，您似乎想要一种方便的方式来提供不同的通用值“集”。在这种情况下，我建议您查看用户定义的记录或数组类型。例如，您可以定义一个包含您的配置数据的记录数组，并为每个实例提供它自己的数组集合。整洁干净，而且所有工具都支持这一点。

# wpf - 如何在 WPF 中不显示打印弹出窗口进行打印

> ID：13152735
> 
> 赞同：1
> 
> 时间：2012-10-31T06:55:50.107
> 
> 标签：wpf

```
private void btnPrint_Click(object sender, RoutedEventArgs e)
        {
            PrintDialog dialog = new PrintDialog();
            if (dialog.ShowDialog() == true)
            {
                StackPanel stpanel;
                stpanel = PrintStakPanel;
                stpanel.Measure(new Size(Double.PositiveInfinity, Double.PositiveInfinity));
                Size grdSize = stpanel.DesiredSize;
                Point grdPoint = new Point((dialog.PrintableAreaWidth - grdSize.Width) / 2, (dialog.PrintableAreaHeight - grdSize.Height) / 2);
                stpanel.Arrange(new Rect(grdPoint, grdSize));
                Grid.SetRow(stpanel, 0);
                dialog.PrintVisual(stpanel, "Cinema Ticket");

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:21:21.237

不要在代码中调用 dialog.ShowDialog()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:40:04.693

您`PrintDialog`无需`ShowDialog()`拨打电话即可使用....当前设置的打印机设置将仅在您拨打电话时使用`PrintVisual`。

要执行更复杂的操作，您可以使用`PrintTicket`.

有关更多详细信息，请参见此处：

*   [如何在 WPF 中没有打印对话框直接打印？](https://stackoverflow.com/questions/2995559/how-to-print-directly-without-print-dialog-in-wpf)

*   [http://msdn.microsoft.com/en-us/library/system.printing.printticket.aspx](http://msdn.microsoft.com/en-us/library/system.printing.printticket.aspx)

# android - 如何在 Android 中为文件生成 MD5 校验和？

> ID：13152736
> 
> 赞同：70
> 
> 时间：2012-10-31T06:55:55.147
> 
> 标签：android, md5, checksum

在我的应用程序中，我需要为文件生成 MD5 校验和。您能否告诉我是否有任何方法可以实现这一目标？

谢谢你。

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-02-17T15:04:15.283

此代码来自 CyanogenMod 10.2 android ROM 的 CMupdater。它将下载的 ROM 测试到更新程序应用程序中。

代码：[https ://github.com/CyanogenMod/android_packages_apps_CMUpdater/blob/cm-10.2/src/com/cyanogenmod/updater/utils/MD5.java](https://github.com/CyanogenMod/android_packages_apps_CMUpdater/blob/cm-10.2/src/com/cyanogenmod/updater/utils/MD5.java)

它就像一个魅力：

```
/*
 * Copyright (C) 2012 The CyanogenMod Project
 *
 * * Licensed under the GNU GPLv2 license
 *
 * The text of the license can be found in the LICENSE file
 * or at https://www.gnu.org/licenses/gpl-2.0.txt
 */

package com.cyanogenmod.updater.utils;

import android.text.TextUtils;
import android.util.Log;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.math.BigInteger;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

public class MD5 {
    private static final String TAG = "MD5";

    public static boolean checkMD5(String md5, File updateFile) {
        if (TextUtils.isEmpty(md5) || updateFile == null) {
            Log.e(TAG, "MD5 string empty or updateFile null");
            return false;
        }

        String calculatedDigest = calculateMD5(updateFile);
        if (calculatedDigest == null) {
            Log.e(TAG, "calculatedDigest null");
            return false;
        }

        Log.v(TAG, "Calculated digest: " + calculatedDigest);
        Log.v(TAG, "Provided digest: " + md5);

        return calculatedDigest.equalsIgnoreCase(md5);
    }

    public static String calculateMD5(File updateFile) {
        MessageDigest digest;
        try {
            digest = MessageDigest.getInstance("MD5");
        } catch (NoSuchAlgorithmException e) {
            Log.e(TAG, "Exception while getting digest", e);
            return null;
        }

        InputStream is;
        try {
            is = new FileInputStream(updateFile);
        } catch (FileNotFoundException e) {
            Log.e(TAG, "Exception while getting FileInputStream", e);
            return null;
        }

        byte[] buffer = new byte[8192];
        int read;
        try {
            while ((read = is.read(buffer)) > 0) {
                digest.update(buffer, 0, read);
            }
            byte[] md5sum = digest.digest();
            BigInteger bigInt = new BigInteger(1, md5sum);
            String output = bigInt.toString(16);
            // Fill to 32 chars
            output = String.format("%32s", output).replace(' ', '0');
            return output;
        } catch (IOException e) {
            throw new RuntimeException("Unable to process file for MD5", e);
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                Log.e(TAG, "Exception on closing MD5 input stream", e);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-10-31T06:59:19.693

将文件内容转换为字符串并使用以下方法：

```
public static String getMD5EncryptedString(String encTarget){
        MessageDigest mdEnc = null;
        try {
            mdEnc = MessageDigest.getInstance("MD5");
        } catch (NoSuchAlgorithmException e) {
            System.out.println("Exception while encrypting to md5");
            e.printStackTrace();
        } // Encryption algorithm
        mdEnc.update(encTarget.getBytes(), 0, encTarget.length());
        String md5 = new BigInteger(1, mdEnc.digest()).toString(16);
        while ( md5.length() < 32 ) {
            md5 = "0"+md5;
        }
        return md5;
    } 
```

请注意，这种简单的方法适用于小字符串，但对于大文件效率不高。对于后者，请参阅[dentex 的回答](https://stackoverflow.com/a/14922433/423105)。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-06-05T11:26:56.400

我有同样的任务，这段代码效果很好：

```
public static String fileToMD5(String filePath) {
    InputStream inputStream = null;
    try {
        inputStream = new FileInputStream(filePath);
        byte[] buffer = new byte[1024];
        MessageDigest digest = MessageDigest.getInstance("MD5");
        int numRead = 0;
        while (numRead != -1) {
            numRead = inputStream.read(buffer);
            if (numRead > 0)
                digest.update(buffer, 0, numRead);
        }
        byte [] md5Bytes = digest.digest();
        return convertHashToString(md5Bytes);
    } catch (Exception e) {
        return null;
    } finally {
        if (inputStream != null) {
            try {
                inputStream.close();
            } catch (Exception e) { }
        }
    }
}

private static String convertHashToString(byte[] md5Bytes) {
    String returnVal = "";
    for (int i = 0; i < md5Bytes.length; i++) {
        returnVal += Integer.toString(( md5Bytes[i] & 0xff ) + 0x100, 16).substring(1);
    }
    return returnVal.toUpperCase();
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-05-23T20:36:34.717

```
public static String getMd5OfFile(String filePath)
{
    String returnVal = "";
    try 
    {
        InputStream   input   = new FileInputStream(filePath); 
        byte[]        buffer  = new byte[1024];
        MessageDigest md5Hash = MessageDigest.getInstance("MD5");
        int           numRead = 0;
        while (numRead != -1)
        {
            numRead = input.read(buffer);
            if (numRead > 0)
            {
                md5Hash.update(buffer, 0, numRead);
            }
        }
        input.close();

        byte [] md5Bytes = md5Hash.digest();
        for (int i=0; i < md5Bytes.length; i++)
        {
            returnVal += Integer.toString( ( md5Bytes[i] & 0xff ) + 0x100, 16).substring( 1 );
        }
    } 
    catch(Throwable t) {t.printStackTrace();}
    return returnVal.toUpperCase();
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-04-14T20:52:26.607

如果您使用的是 Okio（目前大多数应用程序都在使用 Okio，直接或间接使用 OkHttp 或 Retrofit），您还可以执行以下操作：

```
return File(path).source().buffer().use { source ->
   HashingSink.md5(blackholeSink()).use { sink ->
     source.readAll(sink)
     sink.hash.hex()
   }
} 
```

这不必在内存中缓冲整个文件（`HashingSink`每次`write`调用都会更新 md5sum，然后调用到`blackholeSink()`，这对字节没有任何作用）。您也可以使用`HashingSource`来做类似的事情。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-09-16T08:58:57.163

如果你需要**计算大文件的 MD5**，你可能喜欢使用这个：

进口：

```
import java.security.MessageDigest; 
```

方法：

```
 private byte[] calculateMD5ofFile(String location) throws IOException, NoSuchAlgorithmException {
        FileInputStream fs= new FileInputStream(location);
        MessageDigest md = MessageDigest.getInstance("MD5");
        byte[] buffer=new byte[bufferSize];
        int bytes=0;
        do{
            bytes=fs.read(buffer,0,bufferSize);
            if(bytes>0)
                md.update(buffer,0,bytes);

        }while(bytes>0);
        byte[] Md5Sum = md.digest();
        return Md5Sum;
    } 
```

参考： [https ://docs.oracle.com/javase/7/docs/api/java/security/MessageDigest.html](https://docs.oracle.com/javase/7/docs/api/java/security/MessageDigest.html)

* * *

将字节数组转换为十六进制。用这个

```
public static String ByteArraytoHexString(byte[] bytes) {
    StringBuilder hexString = new StringBuilder();
    for (int i = 0; i < bytes.length; i++) {
        String hex = Integer.toHexString(bytes[i] & 0xFF);
        if (hex.length() == 1) {
            hexString.append('0');
        }
        hexString.append(hex);
    }
    return hexString.toString();
} 
```

参考[在Java中，如何将字节数组转换为十六进制数字字符串，同时保持前导零？](https://stackoverflow.com/questions/332079/in-java-how-do-i-convert-a-byte-array-to-a-string-of-hex-digits-while-keeping-l)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-07-18T00:42:59.520

这是干净的小 kotlin 扩展功能。也适用于大文件。

```
fun File.md5(): String {
    val md = MessageDigest.getInstance("MD5")
    return this.inputStream().use { fis ->
        val buffer = ByteArray(8192)
        generateSequence {
            when (val bytesRead = fis.read(buffer)) {
                -1 -> null
                else -> bytesRead
            }
        }.forEach { bytesRead -> md.update(buffer, 0, bytesRead) }
        md.digest().joinToString("") { "%02x".format(it) }
    }
} 
```

以及与之配套的单元测试：

```
@Test
fun `computes md5 checksum correctly`() {
    val file = File.createTempFile("test-", ".tmp")
    // did md5 on unix machine to comfirm -- put a literal LF at end to compare
    val content = "This is the content of a file." + 0x0a.toChar()
    file.writer().use { w -> w.write(content) }
    assertEquals("a149f5161e873921d84636b2a1b3aad2", file.md5())
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-10-31T06:58:12.683

哥们试试下面的代码

```
MessageDigest md = MessageDigest.getInstance("MD5");
InputStream is = new FileInputStream("file.txt");
try {
      is = new DigestInputStream(is, md);
      // read stream to EOF as normal...
    }
finally {
      is.close();
   }
byte[] digest = md.digest(); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-02-04T09:44:10.147

我发现以下工作非常好：

```
Process process = Runtime.getRuntime().exec("md5 "+fileLocation);
BufferedReader inputStream = new BufferedReader(new InputStreamReader(process.getInputStream()));
String result = inputStream.readLine().split(" ")[0]; 
```

这调用了内置`md5`命令。该变量`fileLocation`将被设置为文件的位置。当然，我确实建议在此处构建一些检查以检查文件是否存在。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-10-22T16:28:07.580

这个方法对我有用，在一个 131MB 的 zip 文件上。[由 AccuHash ( http://www.accuhash.com](http://www.accuhash.com) )在同一文件上计算的 MD5 计算匹配

```
public static String calculateMD5(File updateFile) {
        MessageDigest digest;
        try {
            digest = MessageDigest.getInstance("MD5");
        } catch (NoSuchAlgorithmException e) {
            Log.e("calculateMD5", "Exception while getting Digest", e);
            return null;
        }

        InputStream is;
        try {
            is = new FileInputStream(updateFile);
        } catch (FileNotFoundException e) {
            Log.e("calculateMD5", "Exception while getting FileInputStream", e);
            return null;
        }

        byte[] buffer = new byte[8192];
        int read;
        try {
            while ((read = is.read(buffer)) > 0) {
                digest.update(buffer, 0, read);
            }
            byte[] md5sum = digest.digest();
            BigInteger bigInt = new BigInteger(1, md5sum);
            String output = bigInt.toString(16);
            // Fill to 32 chars
            output = String.format("%32s", output).replace(' ', '0');
            return output;
        } catch (IOException e) {
            throw new RuntimeException("Unable to process file for MD5", e);
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                Log.e("calculateMD5", "Exception on closing MD5 input stream", e);
            }
        }
    } 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-05-31T11:09:54.297

科特林版本：

```
 fun File.getMD5Hash(path: String): ByteArray {
    val md = MessageDigest.getInstance("MD5")
    val stream: InputStream
    stream = FileInputStream(this)

    val buffer = ByteArray(8192)
    var read: Int
    while (stream.read(buffer).also { read = it } > 0) {
        md.update(buffer, 0, read)
    }
    stream.close()
    return md.digest()
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-11-08T09:59:27.877

```
 public static String md5(String data) throws NoSuchAlgorithmException {
    // Get the algorithm:
    MessageDigest md5 = MessageDigest.getInstance("MD5");
    // Calculate Message Digest as bytes:
    byte[] digest = md5.digest(data.getBytes(StandardCharsets.UTF_8));
    // Convert to 32-char long String:
    return String.format("%032x", new BigInteger(1, digest));
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-04-10T18:13:48.930

```
 fun md5(file: File): String {
        val digest = MessageDigest.getInstance(MD5_ALGORITHM)
        file.inputStream().buffered(BUFFER_SIZE).use { it.iterator().forEach(digest::update) }
        return digest.digest().joinToString("") { "%02x".format(it) }
    } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-02-24T13:14:49.200

这是我完整的工作代码。我需要使用校验和查找重复文件。

```
/**
 * this method is used for create check Sum further process...
 *
 * @param models    path of image.
 * @param asyncTask asyncTask of activity
 * @return return array of all files check sum.
 * <p>
 * before put BufferedInputStream
 * with BufferedInputStream (buffer 8192) with Logs
 * with BufferedInputStream (buffer 16384) with Logs
 * with BufferedInputStream (buffer 4194304) with Logs
 * with BufferedInputStream (buffer 32768) with Logs
 * with BufferedInputStream (buffer 32768) without Logs(MD5)
 * with BufferedInputStream (buffer 32768) without Logs (SHA-256)
 */
public static ArrayList<FileModel> generateCheckSum(ScanningListener scanningListener, ArrayList<FileModel> lstAllFile, AsyncTask asyncTask) {
    FileInputStream fis;
    MessageDigest md;
    byte[] buffer;
    int numOfBytesRead;
    byte[] hash;

    long startTime = System.currentTimeMillis();
    for (FileModel s : lstAllFile) {

        if (scanningListener != null)
            scanningListener.onGoingProgress(lstAllFile.size(),lstAllFile.indexOf(s));
        try {
            if (asyncTask.isCancelled()) {
                break;
            }

            fis = new FileInputStream(s.getFilePath());
            md = MessageDigest.getInstance("MD5");
            buffer = new byte[16384];//(1024*2048)

            while ((numOfBytesRead = fis.read(buffer)) > 0) {
                md.update(buffer, 0, numOfBytesRead);
            }

            hash = md.digest();
            s.setChecksum(convertHashToString(hash));
            CustomLog.error("path", String.valueOf(s.getFilePath()));
        } catch (IOException ex) {
            CustomLog.error("IOException", String.valueOf(ex));
        } catch (NoSuchAlgorithmException ex) {
            CustomLog.error("NoSuchAlgorithmException ", String.valueOf(ex));
        }
    }
    long endTime = System.currentTimeMillis();

    long totalTime = endTime - startTime;
    CustomLog.error("Total Time : ", TimeUtils.getDateIn24HrsFormatInUTC(totalTime));
    return lstAllFile;
} 
```

转换哈希到字符串（哈希）

```
/**
 * this method is help for convert hash value into string file and return hash code.
 *
 * @param hash byte array.
 * @return return string of hash code
 */
private static String convertHashToString(byte[] hash) {
    StringBuilder returnVal = new StringBuilder();
    for (byte md5Byte : hash) {
        returnVal.append(Integer.toString((md5Byte & 0xff) + 0x100, 16).substring(1));
    }
    return returnVal.toString();
} 
```

此方法将为您提供所有给定文件的哈希图。

**我尝试了许多不同类型的缓冲区大小以及 MD5 和 SHA-1，您可以在评论部分看到**

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-06-28T15:54:45.040

我在 Kotlin 中使用这两个扩展：

```
fun File.calcHash(algorithm: String = "MD5", bufferSize: Int = 1024): ByteArray {
    this.inputStream().use { input ->
        val buffer = ByteArray(bufferSize)
        val digest = MessageDigest.getInstance(algorithm)

        read@ while (true) {
            when (val bytesRead = input.read(buffer)) {
                -1 -> break@read
                else -> digest.update(buffer, 0, bytesRead)
            }
        }

        return digest.digest()
    }
}

fun ByteArray.toHexString(): String {
    return this.fold(StringBuilder()) { result, b -> result.append(String.format("%02X", b)) }.toString()
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-05-19T20:43:04.583

使用 OKio，它是单行的：

```
val md5_as_hex_string = Okio.buffer(Okio.source(file).readByteString().md5().hex() 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-12-13T20:55:59.647

在科特林

```
private fun calculateMd5(file: File): String {
    val digest = MessageDigest.getInstance("MD5")
    file.inputStream().buffered(8192).use { it.iterator().forEach(digest::update) }
    return digest.digest().joinToString("") { "%02x".format(it) }.toUpperCase()
} 
```

# java - 导出为 CSV 文件并在浏览器中打开

> ID：13152738
> 
> 赞同：10
> 
> 时间：2012-10-31T06:56:00.030
> 
> 标签：java, csv, export-to-csv

我遇到了一个问题，我需要将数据导出到 .csv 文件，但不将文件存储在文件系统中 - 相反，我需要简单地在浏览器中打开文件。

我编写了以下代码将数据写入 .csv 文件：

```
FileWriter myWriter = new FileWriter("output.csv");
myWriter.append(EmployeeCode);
myWriter.append(',');
myWriter.append(Band);
myWriter.append('\n');
response.setHeader("Content-Disposition", "attachment; filename=output.csv"); 
response.setContentType("application/ms-excel"); 
response.setCharacterEncoding("UTF-8"); 
```

我可以打开一个 .csv 文件，但它是空的。我的数据没有填充到其中。请建议我做错了什么。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-31T07:14:32.857

`FileWriter`将内容写入`output.csv`文件，而不是响应输出流。您应该执行以下操作：

```
OutputStream out = response.getOutputStream(); 
```

获取响应输出流。

并将内容写入`out`流中，例如：

```
response.setContentType("application/ms-excel"); // or you can use text/csv
response.setHeader("Content-Disposition", "attachment; filename=output.csv"); 
try {
    // Write the header line
    OutputStream out = response.getOutputStream();
    String header = "EmployeeCode, Band\n";
    out.write(header.getBytes());
    // Write the content
    String line=new String(EmployeeCode+","+Band+"\n");
    out.write(line.toString().getBytes());
    out.flush();
} catch (Exception e) {
   log.error(e);
} 
```

# android - 服务在android中的未知时间停止？

> ID：13152739
> 
> 赞同：0
> 
> 时间：2012-10-31T06:56:10.153
> 
> 标签：android, service, timer, timertask

我是android的新手。我正在制作一个应用程序，其中必须在每个指定时间（例如 15 秒）后重复某些任务。我正在为此使用服务。它可以正常工作一段时间，但我的问题是它在任何不确定的不知道是什么原因后停止。我正在使用 Timer.Schedule 和 Timertask 线程。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:05:30.087

您必须在 onStart(Intent intent, int startId) 中编写实际代码。如果服务已经在后台运行，Android 不会在服务启动时调用 onStart 方法。它调用 onStartCommand 方法，把日志放在这两个方法中你就知道了。

```
public void onStart(Intent intent, int startId) {
    executeCode();
}

public int onStartCommand(Intent intent, int flags, int startId) {
    executeCode();

    return 0;
} 
```

谢谢。

# regex - 如何以 $1 的价格为记事本 ++ 使用正则表达式

> ID：13152740
> 
> 赞同：2
> 
> 时间：2012-10-31T06:56:13.913
> 
> 标签：regex, notepad++

> **可能重复：**
> [在 Notepad++ 中使用正则表达式查找和替换](https://stackoverflow.com/questions/5840897/find-and-replace-in-notepad-using-regular-expression)

当我使用 php 时，如何为 notepad++ 使用正则表达式 $1
，我通常这样写：
preg_replace("@aa(.*)bb@",$1,$str)，但是 $1 在 notepad++ 中没有用
![在此处输入图像描述](../Images/58eadbd510b7a3e5d292b4a40cdd5a35.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:59:12.460

简单地使用`\1`，这也很常见。

```
@import "\1"; 
```

另请参阅：[使用 Notepad++ 理解 RegEx](http://blog.creativeitp.com/posts-and-articles/editors/understanding-regex-with-notepad/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:02:00.687

升级到[当前的 Notepad++ 版本](http://notepad-plus-plus.org/download/v6.2.html)。

**由于[版本 6.0 Notepad++ 支持 PCRE](http://notepad-plus-plus.org/news/notepad-6.0-release.html)，这是一个很大的改进，您也可以`$1`在替换字符串中使用。**

在旧版本中，您必须使用`\1`来获取第一个捕获组的内容。

# javascript - 您能为我解释一下 Jquery 中的这种 JavaScript 语法吗？

> ID：13152742
> 
> 赞同：0
> 
> 时间：2012-10-31T06:56:19.563
> 
> 标签：javascript, jquery

例如，这里是 jQuery1.8 的截图。 ![在此处输入图像描述](../Images/857c6824597217cb68fa048996d49e26.png)

为什么我可以从 jQuery 源代码的角度做这样的事情？是`addClass`jquery的方法吗？但我看到的是来自**jQuery.fn.extend**。

```
$("xid").addClass("xxx"); 
```

我对 JavaScript 比较陌生，写了一些非常简单的代码，比如直接在**.html**中添加一个方法。

```
 <html>
    <script>
        function m() {
            alert("simple");
        }
    </script>
 </html> 
```

尤其是ExtJs、jQuery等JavaScript框架中的复杂语法，我无法理解，虽然我已经搜索了一些相关文档，但我仍然没有一个清晰的理解。也许我需要花时间认真阅读一本专门的 JavaScript 书籍，但此刻我想知道答案。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:24:41.833

这个问题有几个层次。第一个是对象字面量。Javascript 允许您使用对象字面量语法来声明对象（您可能听说过 JSON，它只是在字符串中存储/​​传输的语法）。语法如下：

```
var obj = { key1 : "value1", key2 : "value2" }; 
```

一种更具结构化/可读性的编写方式是：

```
var obj = {
  key1 : "value1",
  key2 : "value2"
}; 
```

上面的代码和做的完全一样：

```
var obj = new Object();
obj.key1 = "value1";
obj.key2 = "value2"; 
```

所以你在这条线上看到的是：

```
addClass : function () { 
```

只是对象字面量声明的一部分。基本上代码是这样做的：

```
var tmp = new Object();
// ...
tmp.addClass = function () { /* ... */ };
// ...
jQuery.fn.extend(tmp). 
```

除了它直接在调用中声明对象字面量，`extend()`因此没有必要使用临时变量。

第二件事是javascript中的函数并不特殊。我的意思是，函数的处理方式与其他所有内容相同：字符串、数字、数组和对象。事实上，在javascript中，字符串、数字、数组和函数都是对象。因此，您可以将函数分配给变量：

```
var n = function () {alert("Hello World");} 
```

所以根本没有什么神奇的事情发生。它只是在对象文字语法中创建一个匿名对象，其中包含作为参数传递给`extend`方法的函数集合。

这就是语法的解释。也就是说，javascript 本身发生了什么。

我们知道我们正在查看 jQuery 代码。因此，这为我们提供了更多关于正在发生的事情的线索。首先要做的事情：`jQuery.fn`只是一个指向`jQuery.prototype`. 而`jQuery`它本身就是一个构造函数。在 javascript 中，构造函数是可用于创建对象的常规函数​​。当您使用构造函数创建对象时，该对象继承自构造函数的原型。

并且 jQuery 修改了它的原型并添加了一个`extend`方法，允许您将其他方法和属性添加到 jQuery 的原型中。它正在做什么。前面提到的对象字面量中包含的所有函数都将由`extend`要添加到 jQuery 本身的方法处理，以便在创建新的 jQuery 对象时它们将继承它们。

* * *

根据您的评论，您似乎需要学习很多关于 javascript 的内容。我可以建议阅读 Rhino 的书：[“JavaScript: The Definitive Guide”](http://shop.oreilly.com/product/9780596805531.do)。一旦您了解更多并且对 javascript 更加熟悉，我还建议您阅读[“Javascript: The Good Parts”](http://shop.oreilly.com/product/9780596517748.do)。

我会尽力在这里回答您的评论。解释一切需要一整本书。

首先，关于线路：

```
jQuery.extend = jQuery.fn.extend = function() { 
```

如前所述，`jQuery.fn`它只是一个指向`jQuery.prototype`. 所以它所做的基本上是这样的：

```
jQuery.prototype.extend = function () { /* ... */ };
jQuery.extend = jQuery.prototype.extend; 
```

两者有什么区别？您需要记住的第一件事是它`jQuery`是一个构造函数。由构造函数创建的对象继承了它的原型（javascript 没有类，但将“原型”一词转换为“类”，您开始了解对象的工作原理）。因此，extend 的第一个声明将其定义为所有`jQuery`对象实例的方法：

```
// note: The following is not the recommended way to write jQuery code
//       but it does illustrate the point about inheritance:

var foo = new jQuery();
foo.extend(); // this works because foo inherits jQuery's extend method 
```

现在，还记得我说过在 javascript 中函数也是对象吗？第二个声明将`jQuery`函数视为对象并直接向其添加函数。这主要是语法糖。这样你就可以写：

```
jQuery.extend(); 
```

而不是更长的：

```
jQuery.prototype.extend(); 
```

或令人费解的东西，例如：

```
new jQuery().extend.call(jQuery); 
```

取决于extend是如何写的。

所以，`jQuery.extend()`只是jQuery构造函数本身的一个方法。它不会被 jQuery 构造函数创建的对象继承。将其视为类方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:03:09.430

是的，addClass 是 jQuery 方法。代码截图是扩展jquery的方法，所以可以这样调用：$().method。$ 等于 jQuery。看一下jquery源码，如果你对js很了解的话，里面没有什么复杂的。

# iphone - 截屏视频直播

> ID：13152744
> 
> 赞同：2
> 
> 时间：2012-10-31T06:56:25.737
> 
> 标签：iphone

我需要将实时视频发送到服务器，并从屏幕上捕获视频使用此代码...

```
videoWriter = [[AVAssetWriter alloc] initWithURL:[self tempFileURL] fileType:AVFileTypeQuickTimeMovie error:&error];
    NSParameterAssert(videoWriter);

//Configure video
NSDictionary* videoCompressionProps = [NSDictionary dictionaryWithObjectsAndKeys:
                                       [NSNumber numberWithDouble:1024.0*1024.0], AVVideoAverageBitRateKey,
                                       nil ];

NSDictionary* videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                               AVVideoCodecH264, AVVideoCodecKey,
                               [NSNumber numberWithInt:self.frame.size.width], AVVideoWidthKey,
                               [NSNumber numberWithInt:self.frame.size.height], AVVideoHeightKey,
                               videoCompressionProps, AVVideoCompressionPropertiesKey,
                               nil];

videoWriterInput = [[AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo outputSettings:videoSettings] retain];

NSParameterAssert(videoWriterInput);
videoWriterInput.expectsMediaDataInRealTime = YES;
NSDictionary* bufferAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                  [NSNumber numberWithInt:kCVPixelFormatType_32ARGB], kCVPixelBufferPixelFormatTypeKey, nil];

avAdaptor = [[AVAssetWriterInputPixelBufferAdaptor assetWriterInputPixelBufferAdaptorWithAssetWriterInput:videoWriterInput sourcePixelBufferAttributes:bufferAttributes] retain];

//add input
[videoWriter addInput:videoWriterInput];
[videoWriter startWriting];
[videoWriter startSessionAtSourceTime:CMTimeMake(0, 1000)]; 
```

# asp.net - 如何使用 IIS 授予 IIS APPPOOL\DefaultAppPool 对 Asp.net 中存储过程的访问权限？

> ID：13152746
> 
> 赞同：2
> 
> 时间：2012-10-31T06:56:32.633
> 
> 标签：asp.net, sql, sql-server-2008, iis-7.5

这是我收到的错误消息，“对象'GetDepartments'，数据库'BalloonShop'，模式'dbo'的EXECUTE权限被拒绝”

我能够通过配置 sql server 2008 并使 IIS APPPOOL\DefaultAppPool 成为除数据写入器和数据读取器之外的 dbowner 来解决它，根据我在网上找到的一些文章，问题是它存在一些安全问题。

如何允许 IIS APPPOOL\DefaultAppPool 访问我当前数据库中的所有存储过程？（或任何数据库中）

（如果你能提供链接/脚本会很好）

先生/女士，您的回答会很有帮助。谢谢++

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:15:32.593

使用以下脚本授予对架构的执行权限

```
grant  execute on schema :: dbo to username 
```

# javascript - 选择选项卡时将焦点设置在弹出窗口上

> ID：13152749
> 
> 赞同：1
> 
> 时间：2012-10-31T06:56:40.603
> 
> 标签：javascript, jquery, asp.net, browser, focus

我有一个将上传文件的页面，并且我在附件中给出的单独窗口中显示上传进度。

我在这里担心的是，每当用户导航到同一浏览器上的其他选项卡或其他应用程序然后单击上传页面时，上传进度窗口应该按照附加的图形获得焦点。

我尝试了 windows.onfocus，但是当用户导航到同一浏览器上的不同选项卡时失败。

![在此处输入图像描述](../Images/e8af8d16bcace3099fa4ae82ac8ca8d0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:05:48.197

您为显示弹出窗口编写的代码是什么？你应该使用

```
window.showModalDialog('yourpage.ext', null, "dialogHeight:100px,dialogWidth:100px,resizable:no,center:yes" ); 
```

# ruby-on-rails-3 - 捆绑安装时发生错误

> ID：13152751
> 
> 赞同：0
> 
> 时间：2012-10-31T06:56:45.287
> 
> 标签：ruby-on-rails-3

```
Fetching gem metadata from https://rubygems.org/.........
Fetching gem metadata from https://rubygems.org/..
Using rake (0.9.2.2) 
Using i18n (0.6.1) 
Using multi_json (1.3.6) 
Using activesupport (3.2.7) 
Using builder (3.0.3) 
Using activemodel (3.2.7) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.2) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.1.3) 
Using actionpack (3.2.7) 
Using mime-types (1.19) 
Using polyglot (0.3.3) 
Using treetop (1.4.10) 
Using mail (2.4.4) 
Using actionmailer (3.2.7) 
Using arel (3.0.2) 
Using tzinfo (0.3.33) 
Using activerecord (3.2.7) 
Using activeresource (3.2.7) 
Using coffee-script-source (1.3.3) 
Using execjs (1.4.0) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.2) 
Using json (1.7.5) 
Using rdoc (3.12) 
Using thor (0.16.0) 
Using railties (3.2.7) 
Using coffee-rails (3.2.2) 
Using columnize (0.3.6) 
Using commonjs (0.2.6) 
Using debugger-ruby_core_source (1.1.3) 
Installing debugger-linecache (1.1.2) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /home/kapil/.rvm/rubies/ruby-1.9.3-p286/bin/ruby extconf.rb 
checking for vm_core.h... no
checking for vm_core.h... no
Makefile creation failed
**************************************************************************
No source for ruby-1.9.3-p286 provided with debugger-ruby_core_source gem.
**************************************************************************
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
  --with-opt-dir
  --with-opt-include
  --without-opt-include=${opt-dir}/include
  --with-opt-lib
  --without-opt-lib=${opt-dir}/lib
  --with-make-prog
  --without-make-prog
  --srcdir=.
  --curdir
  --ruby=/home/kapil/.rvm/rubies/ruby-1.9.3-p286/bin/ruby
  --with-ruby-dir
  --without-ruby-dir
  --with-ruby-include
  --without-ruby-include=${ruby-dir}/include
  --with-ruby-lib
  --without-ruby-lib=${ruby-dir}/lib

Gem files will remain installed in /home/kapil/.rvm/gems/ruby-1.9.3-p286/gems/debugger-linecache-1.1.2 for inspection.
Results logged to /home/kapil/.rvm/gems/ruby-1.9.3-p286/gems/debugger-linecache-1.1.2/ext/trace_nums/gem_make.out
An error occurred while installing debugger-linecache (1.1.2), and Bundler cannot continue.
Make sure that `gem install debugger-linecache -v '1.1.2'` succeeds before bundling. 
```

* * *

做的时候出现这个问题`bundle install`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-31T07:15:13.217

尝试`gem install debugger-linecache -v '1.1.2'`在捆绑安装之前运行，也许有帮助？

# iphone - 在 iOS 设备中以编程方式设置主屏幕图像

> ID：13152757
> 
> 赞同：2
> 
> 时间：2012-10-31T06:56:57.767
> 
> 标签：iphone, image, ipad, uiimagepickercontroller, homescreen

我正在开发一个允许用户拍照并可以将照片设置为主屏幕图像的应用程序？

如果设备被越狱打破了任何解决方案？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:29:31.780

You cannot set the background image pragmatically and there are no APIs to do this. Your only option is to save an image to the users' Photos and then tell them that they can set it from there.

# matlab - 在Matlab中测试浮点数是否为整数

> ID：13152758
> 
> 赞同：3
> 
> 时间：2012-10-31T06:57:08.643
> 
> 标签：matlab, floating-point, integer

**我的问题 - 第 1 部分：**测试浮点数是否为“整数”（在 Matlab 中）的最佳方法是什么？

**我目前对第 1 部分的解决方案：**显然，`isinteger`已经过时了，因为它测试的是元素的类型，而不是值，所以目前，我解决了这样的问题：

```
 abs(round(X) - X) <= sqrt(eps(X)) 
```

但也许有更原生的 Matlab 方法？

**我的问题 - 第 2 部分：**如果我目前的解决方案确实是最好的方法，那么我想知道是否有推荐的一般公差？正如您从上面看到的，我使用`sqrt(eps(X))`，但我没有任何充分的理由这样做。也许我应该只使用`eps(X)`，或者也许`5 * eps(X)`？任何建议都将受到欢迎。

**示例：**在 Matlab 中，`sqrt(2)^2 == 2`返回 False。但在实践中，我们可能希望该逻辑条件返回 True。可以使用上述方法实现这一点，因为`sqrt(2)^2`实际上等于`2 + eps(2)`（即完全在 的容差范围内`sqrt(eps(2))`。但这是否意味着我应该始终使用`eps(X)`作为我的容差，或者是否有充分的理由使用更大的容差，例如`5 * eps(X)`或`sqrt(eps(X))`？

**更新（2012-10-31）：** @FakeDIY 指出我的问题部分是[这个 SO 问题](https://stackoverflow.com/questions/5396551/how-do-i-test-for-integers-in-matlab)的重复（抱歉，不知道我在最初的搜索中是如何错过它的）。鉴于此，我想强调问题的“容忍”部分（该链接未涵盖），即是`eps(X)`一个合理的容忍，或者我应该使用更大的东西，比如`5 * eps(X)`，如果是，为什么？

**更新（2012-11-01）：**感谢大家的回复。我已经 +1 了所有三个答案，因为我觉得它们都对问题的各个方面做出了有意义的贡献。我将答案打勾给 Eric Postpischil，因为该答案确实很好地确定了问题的容差部分（并且此时它的支持率最高）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T11:23:55.437

No, there is no general tolerance that is recommended, and there cannot be.

The difference between a computed result and a mathematically ideal result is a function of the operations that produced the computed result. Because those operations are specific to each application, there is no general rule for testing any property of a computed result.

To design a proper test, you must determine what errors may have occurred during computation, determine bounds on the resulting error in the computed result, and test whether the computed result differs from the ideal result (perhaps the nearest integer) by less than those bounds. You must also decide whether those bounds are sufficiently small to satisfy your application’s requirements. (Using a relaxed test that accepts as an integer something that is not an integer decreases false negatives [incorrect rejections of a result as an integer where the ideal result would be an integer] but increases false positives [incorrect acceptances of a result as an integer where the ideal result would not be an integer].)

(Note that it can even be the case the testing as if the error bounds were zero can produce false negatives: It is possible a computation produces a result that is exactly an integer when the ideal result is not an integer, so any error tolerance, even zero, will falsely report this result is an integer. If this is unacceptable for your application, then, in such a case, the computations must be redesigned.)

It is not only not possible to state, without specific knowledge of the application, a numerical tolerance that may be used, it is impossible to state whether the tolerance should be absolute, should be relative to the computed value or to a target value, should be measured in ULPs (units of least precision), or should be set in some other manner. This is because errors may be introduced into computations in a variety of ways. For example, if there is a small relative error in `a` and `a` and `b` are close in value, then `a-b` has a large relative error. Additionally, if `c` is large, then `(a-b)*c` has a large absolute error.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T09:59:02.680

它可能不是最有效的方法，但我会`mod`为此使用：

```
a = 15.0000000000;
b = mod(a,1.0)
c = 15.0000000001;
d = mod(c,1.0) 
```

返回`b = 0`和`d = 1.0000e-010`

这里建议了许多其他替代方案：

[如何在 MATLAB 中测试整数？](https://stackoverflow.com/questions/5396551/how-do-i-test-for-integers-in-matlab)

我也喜欢比较的想法`(x == floor(x))`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T22:44:56.553

1）我历来以简单的公差使用您的方法，`eps(X)`。不过，mod 方法让我很感兴趣，所以我使用 Steve Eddins [timeit](http://www.mathworks.com/matlabcentral/fileexchange/18798)函数对一对夫妇进行了基准测试。

```
f = @() abs(X - round(X)) <= eps(X);
g = @() X == round(X);
h = @() ~mod(X,1); 
```

对于单个值，例如`X=1.0`，您的值似乎最快：

```
timeit(f) = 7.3635e-006
timeit(g) = 9.9677e-006
timeit(h) = 9.9214e-006 
```

但是，对于向量，例如`X = 1:0.01:100`，其他方法更快（尽管 round 仍然优于 mod）：

```
timeit(f) = 0.00076636
timeit(g) = 0.00028182
timeit(h) = 0.00040539 
```

2）误差界确实取决于问题。其他答案比我能做到的要好得多。

# c# - 我如何从 Facebook 获取图像

> ID：13152761
> 
> 赞同：-2
> 
> 时间：2012-10-31T06:57:41.543
> 
> 标签：c#, facebook

我想显示 Facebook 用户上传到我的 asp.net(c#) 网站的图像。我有 Facebook 用户的访问令牌

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:05:41.870

```
http://graph.facebook.com/{userName}/picture 
```

资源：http: [//developers.facebook.com/docs/api](http://developers.facebook.com/docs/api)

编辑：这里有另一个帖子有同样的问题：

[Facebook API - 如何通过 Facebook API 获取 Facebook 用户的个人资料图片（无需用户“允许”应用程序）](https://stackoverflow.com/questions/2821061/facebook-api-how-do-i-get-a-facebook-users-profile-image-through-the-fb-api)

# java - JMenu 显示在 Label 后面

> ID：13152764
> 
> 赞同：2
> 
> 时间：2012-10-31T06:57:50.090
> 
> 标签：java, swing, label, awt, mixing

![在此处输入图像描述](../Images/d01789a315bc72d8bb016529af95522c.png)

Statdard 是标签 当我打开文件 JMenu 时，标签显示在 jmenu 前面。发生这种情况是因为我正在混合 AWT 和摇摆。当我使用 JLabel 而不是 Label 它按预期工作正常。

[混合 AWT 和 Swing 组件](http://en.wikipedia.org/wiki/Abstract_Window_Toolkit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:32:49.147

我正在混合 AWT 和摇摆。对不起，`Label`不是`JLabel`。从这两篇文章中找到了帮助：

*   [*抽象窗口工具包*](http://en.wikipedia.org/wiki/Abstract_Window_Toolkit)。

*   [*混合重量级和轻量级组件*](http://www.oracle.com/technetwork/articles/java/mixing-components-433992.html)。

# asp.net - 在 Web.Config 文件中声明一个字符串

> ID：13152765
> 
> 赞同：2
> 
> 时间：2012-10-31T06:57:50.063
> 
> 标签：asp.net, web-config

请看这段代码：

```
string dir = "~/parkingTicket/files/"+ID_TextBox.Text;
try
{
   _path = Server.MapPath(dir) + ID_TextBox.Text + "_" + _file.FileName;
   EnsureDirectoriesExist(dir);
   _file.SaveAs(_path);
} 
```

我想在 web.config 中声明**（dir）**，我该怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:01:20.280

您可以在 appSetting 节点中执行此操作

```
<appSettings>
    <add key="dir" value="parkingTicket/files"/>
  </appSettings> 
```

您可以在代码文件中读取它，例如

```
string dir = ConfigurationManager.AppSettings["dir"].ToString(); 
```

# php - 零值被插入到数据库表中

> ID：13152766
> 
> 赞同：0
> 
> 时间：2012-10-31T06:57:49.667
> 
> 标签：php, mysql, insert

这是我用来打开一个带有变量 $query_string 的弹出窗口的代码，该变量用于保存表单中的条目。

```
 echo'<script language = "JavaScript" type="text/javascript">
        //<![CDATA[
        window.open(\'./save.php?'.$query_string.'\',\'save\',\'location=no,menubar=no,resizable=yes,scrollbars=yes,status=yes\'); 
```

然后我用 save.php 显示一个提交按钮并编写了一个插入语句将数据放入数据库中。问题是数据库表中的行被填充为 0。犯了任何错误吗？

```
 if($_POST['formSubmit'] == "Submit") 
        {
            //appending the date to store in the database.
            $entry_date_array = array($_REQUEST["year"],$_REQUEST["month"],$_REQUEST["day"]);
            $entry_date = implode('-', $entry_date_array);
            echo "$entry_date";
            //appending aggr nr and fetching the id from the database.
            $aggr_nr = $_REQUEST['list_nr_01'].$_REQUEST['list_nr_02'].$_REQUEST['list_nr_03'];
            $sql="SELECT v.id FROM aggregatenumber AS v WHERE v.aggr_nr = '".$aggr_nr."'";//missing Quotes
            $aggr_id = @mysql_query($sql);
            $result = @mysql_fetch_array($aggr_id);
            $test= $result['id'];
            echo "$test";

        $sql_einl_sp = "INSERT INTO search_parts(entry_date,aggr_nr)values('".$entry_date."','".$test."')";
        $result_einl_sp = @mysql_query($sql_einl_sp); 
```

html

```
 <body>
        <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
        <h>Save Information</h>
    <input type="submit" name="formSubmit" value="Submit" />
    <input type="submit" name="btncancel" value="Cancel"/>
        </form>
    </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:00:51.587

改变

```
$sql_einl_sp = "INSERT INTO search_parts(entry_date,aggr_nr)
                  values('".$entry_date."','".$test."')"; 
```

至

```
$sql_einl_sp = "INSERT INTO search_parts(entry_date,aggr_nr)
                 values('".$entry_date."',".$test.")"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:07:18.027

尝试打印查询以查看数据库的确切内容。

查询中的变量可能为空或 0，或者您可能没有正确定义表中此特定字段的数据类型。

# c++ - 调试c ++：../nptl/sysdeps/unix/sysv/linux/raise.c：没有这样的文件或目录

> ID：13152775
> 
> 赞同：21
> 
> 时间：2012-10-31T06:58:26.813
> 
> 标签：c++, gdb

我`gdb`用来调试`C++`程序。在行

```
assert(prevId ==  GetTagIdFromState(maxState)); 
```

*   参数`prevId`值为`0`；
*   方法`GetTagIdFromState(maxState)` `return`s `50`;

调试时，我收到以下错误。

```
Assertion `prevId == GetTagIdFromState(maxState)' failed.
Program received signal SIGABRT, Aborted.
0x00007ffff6ecbba5 in raise (sig=<value optimized out>) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
64    ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.
      in ../nptl/sysdeps/unix/sysv/linux/raise.c 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T07:00:31.980

您的应用程序按预期工作。断言失败（因为您传递给它的值不相等，`assert`宏接收 0），因此您的程序被中止。这就是断言的工作方式：

> 如果未定义 NDEBUG，则**assert 检查其参数**（必须具有标量类型）**比较为零。如果是，则 assert 在标准错误输出上输出特定于实现的诊断信息并调用 std::abort**。

强调我的。

检查[此断言参考](http://en.cppreference.com/w/cpp/error/assert)以获取更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-06T05:08:08.153

我在尝试在 Raspberry Pi 上调试程序时遇到了这个错误。该程序碰巧以要求程序以 root 身份运行的方式使用 GPIO。例如，我运行我编写的程序是这样的：

```
sudo ./foo 
```

但是，我在启动调试器时忘记了这一点，并尝试了

```
gdb foo 
```

我得到了你似乎遇到的错误：

```
Program received signal SIGABRT, Aborted.
0x76cd0f70 in __GI_raise (sig=sig@entry=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:56
56  ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory. 
```

当我使用 sudo 运行它时，它运行良好。

```
sudo gdb foo 
```

希望这对同一条船上的人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T07:10:27.937

这应该让您快速了解使用断言功能

```
void assert (int expression); 
```

评估断言 如果这个函数形式的宏的参数表达式比较等于零（即表达式为假），则将一条消息写入标准错误设备并调用中止，终止程序执行。

显示的消息的细节取决于编译器中的具体实现，但它应包括：断言失败的表达式、源文件的名称以及它发生的行号。通常的表达式格式是：

断言失败：表达式、文件文件名、行号 如果在包含名为 NDEBUG 的 assert.ha 宏时，该宏已被定义。这允许编码人员在调试程序时在源代码中包含许多断言调用，然后通过简单地包含如下行来禁用所有这些调用以用于生产版本：

```
#define NDEBUG at the beginning of its code, before the inclusion of assert.h. 
```

因此，该宏旨在捕获编程错误，而不是用户或运行错误，因为它通常在程序退出其调试阶段后被禁用。来自：[C++ 参考](http://www.cplusplus.com/reference/clibrary/cassert/assert/)

# vb6 - winsock多IP发送数据vb6

> ID：13152779
> 
> 赞同：0
> 
> 时间：2012-10-31T06:58:38.287
> 
> 标签：vb6, ip, winsock

如果可以使用winsock将文本发送到不同的IP，我已经在不同的论坛中搜索了很长时间，但我找不到如何。我尝试将两个不同的 Winsock 以相同的形式放置，但第二个 Winsock 的消息永远不会到达。这是我的代码：

```
Private Sub Form_Load()
On Error Resume Next
a = bytMsg()
wsck.RemoteHost = strNombreATMMonitor2
wsck.RemotePort = vPuertoATMMonitor2
wsck.Connect
'Conectamos el segundo
Winsock1.RemoteHost = strNombreATMMonitor
Winsock1.RemotePort = vPuertoATMMonitor
Winsock1.Connect
End Sub

    Private Sub wsck_Close()
      On Error Resume Next
        wsck.Close
        End
     End Sub

    Private Sub wsck_Connect()
       On Error GoTo Err_wsck_Connect

       wsck.SendData a

       End_wsck_Connect:
         Exit Sub
       Err_wsck_Connect:
           GrabaLog "wsck_Connect", Err.Description, " " & Err.Number & " Host: " &               strNombreATMMonitor
         Resume End_wsck_Connect
         End Sub

   Private Sub wsck_Error(ByVal Number As Integer, Description As String, ByVal Scode As        Long, ByVal Source As String, ByVal HelpFile As String, ByVal HelpContext As  Long, CancelDisplay As Boolean)
       'si no es un recordatorio, lo grabo
       If bytRecordatorio = 0 Then
          GrabaOff strLineaComandos
       End If
       GrabaLog "wsck_Error", "RemoteHost" & " - " & wsck.RemoteHost & " - RemotePort - " & Trim(wsck.RemotePort), "Error = " & Trim(Number) & " - " & Description
       End
        End Sub

Private Sub wsck_SendComplete()
On Error GoTo Err_wsck_SendComplete
wsck.Close

'Graba en un log el mensaje de NCR pasado como parametro a ATMSpyNEW + FTP
TrazaLog "ATMMonitor1 - " & strLineaComandos

End_wsck_SendComplete:
End
Err_wsck_SendComplete:
GrabaLog "wsck_SendComplete", Err.Description, "" & Err.Number
Resume End_wsck_SendComplete
 End Sub

Private Sub Winsock1_Close()
On Error Resume Next
Winsock1.Close
End
End Sub

 Private Sub Winsock1_Connect()
On Error GoTo Err_Winsock1_Connect

Winsock1.SendData a

 End_Winsock1_Connect:
    Exit Sub
 Err_Winsock1_Connect:
    GrabaLog "Winsock1_Connect", Err.Description, " " & Err.Number & " Host: " &   strNombreATMMonitor
    Resume End_Winsock1_Connect
 End Sub

Private Sub Winsock1_Error(ByVal Number As Integer, Description As String, ByVal Scode As   Long, ByVal Source As String, ByVal HelpFile As String, ByVal HelpContext As Long, CancelDisplay As Boolean)
'si no es un recordatorio, lo grabo
If bytRecordatorio = 0 Then
    GrabaOff strLineaComandos
  End If
GrabaLog "Winsock1_Error", "RemoteHost" & " - " & Winsock1.RemoteHost & " - RemotePort - " & Trim(Winsock1.RemotePort), "Error = " & Trim(Number) & " - " & Description
End
 End Sub 
```

有谁知道如何使用一个或两个winsock控件将一段文本发送到至少两个不同的IP（RemoteHost）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:19:14.580

我创建了一个新的 VB6 项目并在 Form1 上添加了两个 Winsock 控件。即 Winsock1 和 Winsock2。然后我添加了两个文本框（仅用于测试以显示来自 Winsocks 的输入和输出）并将它们设置为允许多行。我添加了一个按钮（cmdSendData），它将向两个winsocks 发送数据。在 Form_Load 事件中，我让这两个 Winsocks 连接到一个我已经可以访问的公共 TelNet 服务器（您需要将 IP 地址更改为您可以测试的地址）。我能够通过两个 Winsocks 发送数据（即使它们连接到同一台机器，它们的行为也不同，如果我知道我有另一个 IP 等待连接请求，可以轻松地将其中一个的 IP 更改为另一个）。

我跳过了错误处理，因为我相信您可以弄清楚该放在哪里。

```
Private Sub Form_Load()
    Me.Winsock1.RemoteHost = "10.11.27.87"
    Me.Winsock1.RemotePort = "23"
    Me.Winsock1.Connect

    Me.Winsock2.RemoteHost = "10.11.27.87"
    Me.Winsock2.RemotePort = "23"
    Me.Winsock2.Connect
End Sub

Private Sub cmdSendData_Click()
    Me.Winsock1.SendData "admin" & vbCrLf

    DoEvents   'This is necessary to immediatelly send the data without waiting for
               ' a certain buffer to be filled first

    Me.Winsock2.SendData "admin" & vbCrLf
    DoEvents    'same as above

End Sub

Private Sub Winsock1_DataArrival(ByVal bytesTotal As Long)
    Dim txt As String
    Me.Winsock1.GetData txt
    Me.Text1.Text = Me.Text1.Text & vbCrLf & txt
End Sub

Private Sub Winsock2_DataArrival(ByVal bytesTotal As Long)
    Dim txt As String
    Me.Winsock2.GetData txt
    Me.Text2.Text = Me.Text2.Text & vbCrLf & txt
End Sub 
```

![在此处输入图像描述](../Images/36f8cf580598c2908ff72640351e4a26.png)

# php - 如何在 jquerymobile 中重新加载页面？

> ID：13152787
> 
> 赞同：1
> 
> 时间：2012-10-31T06:59:17.040
> 
> 标签：php, jquery-mobile

在我的项目中，我有一些 javascript 来实现我的工作，但是当我启动页面时它没有占用，但是在重新加载页面后它正在工作。

这是代码：

```
<?php 
require_once"session.php";
$slat =$_GET['slat'];
$slang =$_GET['slang'];
$elat =$_GET['elat'];
$elang =$_GET['elang'];
?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
  <?php require_once"header.php";?>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <title>Near My Location Contacts</title>
    <script src="http://maps.google.com/maps/api/js?sensor=false"
            type="text/javascript"></script>
    <script type="text/javascript">
   /* function refreshPage() {
        alert('dfg');
    window.location.href,
    {
      allowSamePageTransition : true,
      transition              : 'none',
      showLoadMsg             : false,
      reloadPage              : true
    }
}
refreshPage();*/
    //<![CDATA[
var directionsDisplay;
var directionsService = new google.maps.DirectionsService();
var map;
//var haight = new google.maps.LatLng(37.7699298, -122.4469157);
//var oceanBeach = new google.maps.LatLng(37.7683909618184, -122.51089453697205);
var haight = new google.maps.LatLng(<?php echo $slat;?>,<?php echo $slang;?>);
var oceanBeach = new google.maps.LatLng(<?php echo $elat;?>,<?php echo $elang;?>);
function initialize() {
  directionsDisplay = new google.maps.DirectionsRenderer();
  var mapOptions = {
    zoom: 14,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: haight
  }
  map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
  directionsDisplay.setMap(map);
  directionsDisplay.setPanel(document.getElementById("directionsPanel"));
}

function calcRoute() {
  var request = {
    origin:haight,
    destination:oceanBeach,
    travelMode: google.maps.TravelMode.DRIVING,
    unitSystem: google.maps.UnitSystem.METRIC
  };
  directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(response);
    }
  });
}

    //]]>
  </script>
  </head>
  <body style="margin:0px; padding:0px;" onload="initialize();calcRoute()"> 
  <div data-role=page id=nmContacts >
    <div data-role=header data-theme="e" >
        <a href="geoMapGrid.php" data-icon="back" ><font size="2px">Back</font></a>
        <h1 align="left"><font size="2px">Near My Contacts</font></h1>
    </div>
  <div data-role=content style="width:100%;height:100%;">
  <div data-role=content id="map_canvas" style="width:95%; height:300px"></div>
<div id="directionsPanel" style="width:97%;height 100%"></div>

</div>

  </body>
</html> 
```

在上面我有body onload，它在刷新后第一次没有工作，只有它在工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:01:08.490

这是答案：

```
 Before You are calling to this page You have to specify in href like the following 
```

假设您要加载以下链接：

```
<a href="sample.php" rel="external">sample</a> 
```

这里 `href="external" 你必须指定否则它不会工作.....

# google-apps-script - 如何在这种情况下循环

> ID：13152789
> 
> 赞同：0
> 
> 时间：2012-10-31T06:59:22.053
> 
> 标签：google-apps-script

在这种情况下，我正在寻找一点帮助。我有一个电子表格，我在其中创建了一个新工作表，我将其重命名，一旦完成，我对大约 10 个其他电子表格执行相同操作，我想知道如何实现 for 或 while 循环，这样我就没有键入重复的代码 10 次。我的代码如下，任何帮助将不胜感激。我在另一个文档中有键，所以基本上我需要知道如何能够读取变量中的键，然后能够读取每个键，因为它们位于垂直列中。

```
function create(){
var ss0 = SpreadsheetApp.getActiveSpreadsheet();
ss0.setActiveSheet(ss0.getSheetByName("old"));
ss0.setActiveSheet(ss0.duplicateActiveSheet());
ss0.renameActiveSheet("main");
var ss0 = SpreadsheetApp.getActiveSpreadsheet();
ss0.getRange("A4:I500").clearContent();

    //repeated code key 1
var ss0 = SpreadsheetApp.getActiveSheet();
var master = SpreadsheetApp.openById("key1");
ss0.copyTo(master);
var ss0 = SpreadsheetApp.getActiveSpreadsheet();
master.setActiveSheet(master.getSheetByName("Copy of main"));
master.renameActiveSheet("main"); 

    // key 2
var ss0 = SpreadsheetApp.getActiveSheet();
var master = SpreadsheetApp.openById("key2");
ss0.copyTo(master);
var ss0 = SpreadsheetApp.getActiveSpreadsheet();
master.setActiveSheet(master.getSheetByName("Copy of main"));
master.renameActiveSheet("main"); 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:33:27.593

您需要获取数组中的键并遍历该数组。

这是一个大纲

```
function myFunction() {
  //get the keys in an array
  //say, they are in column A in a spreadsheet from A1:A10
  var keyArray = SpreadsheetApp.openById("ID of the ss with key").getSheetByName("name of the sheet with key")
      .getRange("A1:A10").getValues();

  var ss0 = SpreadsheetApp.getActiveSheet();

  //loop for all the spreadsheets
  for(var i in keyArray){
    var ss = SpreadsheetApp.openById(keyArray[i][0]);
    ss0.copyTo(ss);
    ss.getSheetByName("Copy of main").setName("main")
  }
} 
```

# mysql - MYSQL 查询 - 按月获取总计

> ID：13152796
> 
> 赞同：15
> 
> 时间：2012-10-31T07:00:01.180
> 
> 标签：mysql, query-optimization

[http://sqlfiddle.com/#!2/6a6b1](http://sqlfiddle.com/#!2/6a6b1)

上面给出了该方案..我想要做的就是将结果作为销售额/月的总额...用户将输入开始日期和结束日期，我可以生成（在 PHP 中）所有月份和年份那些日期。例如，如果我想知道 12 个月的“销售”总数，我知道我可以运行 12 个带有开始和结束日期的单独查询，但我只想运行一个查询，结果如下所示：

```
Month     numofsale
January - 2  
Feb-1
March - 23
Apr - 10 
```

等等...

或者只是一个没有月份的销售列表，然后我可以将它与 PHP 中生成的月份数组配对......任何想法......

编辑/模式和从 sqlfiddle.com 粘贴的数据：

```
CREATE TABLE IF NOT EXISTS `lead_activity2` (
  `lead_activity_id` int(11) NOT NULL AUTO_INCREMENT,
  `sp_id` int(11) NOT NULL,
  `act_date` datetime NOT NULL,
  `act_name` varchar(255) NOT NULL,
  PRIMARY KEY (`lead_activity_id`),
  KEY `act_date` (`act_date`),
  KEY `act_name` (`act_name`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1  ;

INSERT INTO `lead_activity2` (`lead_activity_id`, `sp_id`, `act_date`, `act_name`) VALUES
(1, 5, '2012-10-16 16:05:29', 'sale'),
(2, 5, '2012-10-16 16:05:29', 'search'),
(3, 5, '2012-10-16 16:05:29', 'sale'),
(4, 5, '2012-10-17 16:05:29', 'DNC'),
(5, 5, '2012-10-17 16:05:29', 'sale'),
(6, 5, '2012-09-16 16:05:30', 'SCB'),
(7, 5, '2012-09-16 16:05:30', 'sale'),
(8, 5, '2012-08-16 16:05:30', 'sale'),
(9, 5,'2012-08-16 16:05:30', 'sale'),
(10, 5, '2012-07-16 16:05:30', 'sale'); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-31T07:04:38.150

```
SELECT DATE_FORMAT(date, "%m-%Y") AS Month, SUM(numofsale)
FROM <table_name>
WHERE <where-cond>
GROUP BY DATE_FORMAT(date, "%m-%Y") 
```

在您的小提琴演示中检查以下内容，它对我有用（删除`where`子句进行测试）

```
SELECT DATE_FORMAT(act_date, "%m-%Y") AS Month, COUNT(*)
FROM lead_activity2
WHERE <where-cond-here> AND act_name='sale'
GROUP BY DATE_FORMAT(act_date, "%m-%Y") 
```

它返回以下结果

```
MONTH   COUNT(*)
07-2012 1
08-2012 2
09-2012 1
10-2012 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T07:16:39.747

您可以尝试如下查询

```
select  SUM(`SP_ID`) AS `Total` , DATE_FORMAT(act_date, "%M") AS Month, Month(`ACT_DATE`) AS `Month_number` from `lead_activity2`  WHERE `ACT_DATE` BETWEEN '2012-05-01' AND '2012-12-17' group by Month(`ACT_DATE`) 
```

这里`2012-05-01`和`2012-12-17`是从表单输入的日期。如果数据库中存在，它将返回特定月份的销售额总和。

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T07:05:22.480

试试这个查询 -

```
SELECT
  MONTH(act_date) month, COUNT(*)
FROM
  lead_activity2
WHERE
  YEAR(act_date) = 2012 AND act_name = 'sale'
GROUP BY
  month 
```

检查 WHERE 条件是否适合您 - `act_name = 'sale'`。

如果要输出月份名称，请使用**MONTHNAME()**函数而不是**MONTH()**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T07:06:06.377

```
SELECT YEAR(act_date), MONTH(act_date), COUNT(*)

FROM lead_activity2

GROUP BY YEAR(act_date), MONTH(act_date) 
```

要按月获取数据或基于列的任何其他数据，您必须添加 GROUP BY。

您可以将许多列或计算值添加到 GROUP BY。

我假设“销售数量”意味着行数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-13T19:15:07.360

有时您可能希望月份名称为 Jan、Feb、Mar .... Dec 可能用于像[FusionChart这样的图表](http://www.fusioncharts.com/dev/)

```
SELECT DATE_FORMAT(date, "%M") AS Month, SUM(numofsale)
FROM <Table_name>
GROUP BY DATE_FORMAT(date, "%M") 
```

结果在桌子上看起来像这样

```
MONTH   COUNT(*)
Jul       1
Aug       2
SEP       1
OCT       3 
```

# jquery - 在淘汰赛js中读取文本框值

> ID：13152797
> 
> 赞同：0
> 
> 时间：2012-10-31T07:00:03.203
> 
> 标签：jquery, knockout.js

我正在构建一个可编辑的网格。礼物名称是一个自动建议文本框。

当我选择一个值并尝试检索该值时，它不会显示该值。我的代码在 [这里](http://jsfiddle.net/bhagirathip/x6H8s/38/)

在文本框中选择一个值并单击提交按钮。它应该显示第一个文本框值，但显示为空。

我在哪里犯了错误。

-提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:38:47.783

似乎真正的问题是`name`当您使用 jQuery 的自动完成功能时没有正确更新。您应该更改绑定`name`：

```
<input data-bind="value: name, valueUpdate: 'blur'" class='tags' /> 
```

当元素失去焦点时会发生模糊事件。并且每次它会发生 - KO 将强制绑定以更新值。

* * *

[KO 文档](http://knockoutjs.com/documentation/value-binding.html)：

> **价值更新**
> 
> 如果您的绑定还包括一个名为 valueUpdate 的参数，则这定义了 KO 应该使用的其他浏览器事件来检测除了更改事件之外的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:11:19.710

我看着你的小提琴，你在打电话时似乎少了几个括号`self.gifts()`。

这个：

```
self.save = function () {
    var abc = $.parseJSON(ko.toJSON({ gifts: self.gifts }));
    alert(abc.gifts[0].name);
}; 
```

应该：

```
var abc = $.parseJSON(ko.toJSON({ gifts: self.gifts() })); 
```

最后加上括号。

您必须记住，它`self.gifts = ko.observableArray(gifts);`返回*包装在函数中的值*，因此为了访问该值，您需要调用`self.gifts()`.

运行此示例将显示带有空字符串的警报，因为您`gifts`使用空名称值初始化了数组。

如果您在此处为名称添加值：

```
var viewModel = new GiftModel([
    { name: "", price: "" }
]); 
```

然后，您将在警报框中显示该名称。[在这里](http://jsfiddle.net/uC7b6/)查看更新的 jsfiddle 。

# php - 发送和接收传真

> ID：13152798
> 
> 赞同：0
> 
> 时间：2012-10-31T07:00:03.883
> 
> 标签：php, web-applications

您好我需要构建一个可以发送和接收传真的 Web 应用程序。有人可以提及一些我可以参考的文章/网页以获取更多详细信息吗？

此外，我将其发布给 PHP 人员，假设这可以在 PHP 中完成，但如果您觉得其他合适，请指导我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:05:22.353

像这样的东西？

[http://www.interfax.net/en/dev/php](http://www.interfax.net/en/dev/php)

只是从一个快速的谷歌搜索......我没有任何个人经验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:06:19.150

发送传真不是 PHP 内置的功能。为此，您需要使用外部服务。

[谷歌“在线发送传真”](https://www.google.com/?q=send%20fax%20online)并开始阅读。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T07:12:20.153

我认为将它与 PHP 集成的最简单方法是使用 Mail 2 Fax 网关，那里有很多服务。

通常，您只需将带有 pdf 附件的电子邮件发送到特定地址，例如 [faxnumber]@fax.fax2mail.com (390302121212@fax.fax2mail.com)

我已经为我的公司将它与 php 和 java（两个单独的应用程序）集成。

# sql-server - 调用-SqlCmd QueryTimeout

> ID：13152809
> 
> 赞同：1
> 
> 时间：2012-10-31T07:00:53.977
> 
> 标签：sql-server, sql-server-2008, powershell, powershell-2.0

有谁知道如何将 Invoke-SqlCmd QueryTimeout 设置为超过 65535？

微软表示他们已经在 Denali 中修复了它，但我们仍在使用带有最新服务包的 SQL 2008 R2。

[http://connect.microsoft.com/SQLServer/feedback/details/551799/invoke-sqlcmd-querytimeout-0-still-times-out](http://connect.microsoft.com/SQLServer/feedback/details/551799/invoke-sqlcmd-querytimeout-0-still-times-out)

基本上，我们正在尝试使用 powershell 备份或恢复数据库。我们的一些数据库非常大，因此完成这项工作需要超过 65535 个。

有人建议我们应该在 powershell 中使用带有超时的 ADO.NET。但我想知道我们是否对 Invoke-SqlCmd 有任何解决方法...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-05-23T16:38:31.143

```
调用-Sqlcmd -query 'select * from largeDb' -QueryTimeout 0
```

**-QueryTimeout 0**：将使您的 cmdlet**超时。**

AFAIK 很快，这个错误就会得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-30T03:29:25.173

您可以使用以下函数自定义您自己的*查询超时*和*会话超时*限制（同时定义您可以给您自己想要的值的参数）

```
function Invoke-SqlCommand 
{ 
    [CmdletBinding()] 
    param( 
    [Parameter(Position=0, Mandatory=$true)] [string]$ServerInstance, 
    [Parameter(Position=1, Mandatory=$false)] [string]$Database, 
    [Parameter(Position=2, Mandatory=$false)] [string]$Query, 
    [Parameter(Position=3, Mandatory=$false)] [string]$Username, 
    [Parameter(Position=4, Mandatory=$false)] [string]$Password, 
    [Parameter(Position=5, Mandatory=$false)] [Int32]$QueryTimeout=600, 
    [Parameter(Position=6, Mandatory=$false)] [Int32]$ConnectionTimeout=15, 
    [Parameter(Position=7, Mandatory=$false)] [ValidateScript({test-path $_})] [string]$InputFile, 
    [Parameter(Position=8, Mandatory=$false)] [ValidateSet("DataSet", "DataTable", "DataRow")] [string]$As="DataRow" 
    ) 

    if ($InputFile) 
    { 
        $filePath = $(resolve-path $InputFile).path 
        $Query =  [System.IO.File]::ReadAllText("$filePath") 
    } 

    $conn=new-object System.Data.SqlClient.SQLConnection 

    if ($Username) 
    { $ConnectionString = "Server={0};Database={1};User ID={2};Password={3};Trusted_Connection=False;Connect Timeout={4}" -f $ServerInstance,$Database,$Username,$Password,$ConnectionTimeout } 
    else 
    { $ConnectionString = "Server={0};Database={1};Integrated Security=True;Connect Timeout={2}" -f $ServerInstance,$Database,$ConnectionTimeout } 

    $conn.ConnectionString=$ConnectionString 

    #Following EventHandler is used for PRINT and RAISERROR T-SQL statements. Executed when -Verbose parameter specified by caller 
    if ($PSBoundParameters.Verbose) 
    { 
        $conn.FireInfoMessageEventOnUserErrors=$true 
        $handler = [System.Data.SqlClient.SqlInfoMessageEventHandler] {Write-Verbose "$($_)"} 
        $conn.add_InfoMessage($handler) 
    } 

    $conn.Open() 
    $cmd=new-object system.Data.SqlClient.SqlCommand($Query,$conn) 
    $cmd.CommandTimeout=$QueryTimeout 
    $ds=New-Object system.Data.DataSet 
    $da=New-Object system.Data.SqlClient.SqlDataAdapter($cmd) 
    [void]$da.fill($ds) 
    $conn.Close() 
    switch ($As) 
    { 
        'DataSet'   { Write-Output ($ds) } 
        'DataTable' { Write-Output ($ds.Tables) } 
        'DataRow'   { Write-Output ($ds.Tables[0]) } 
    } 

} 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:26:09.853

您可以编写自己的 Invoke-SqlCmd 版本，该版本直接使用 System.Data.SqlClient 对象并使用它做任何您想做的事情。有很多示例说明如何执行此操作，包括[invoke-sqlcmd2](http://gallery.technet.microsoft.com/scriptcenter/7985b7ef-ed89-4dfd-b02a-433cc4e30894)，它是专门为绕过 QueryTimeout 错误而编写的，托管在 Microsoft 的脚本库中。如果您不想部署这样的脚本，您可以直接将相关代码集成到您的备份脚本中。

或者，您应该能够使用 SMO 来备份数据库。IIRC，querytimeout 错误不会影响 SMO。

# android - 列表数据格式

> ID：13152814
> 
> 赞同：0
> 
> 时间：2012-10-31T07:01:05.150
> 
> 标签：android, sqlite, list, arraylist

我正在从表中获取数据作为列表并将其添加到子列表中，但我得到了我没想到的输出。我不知道如何解决这个问题，以便我可以得到我需要的输出我已经附加了代码请帮我解决这个问题？

```
public List<List<String>> fetchData(){
    List<List<String>> main= new ArrayList<List<String>>();
    List<String> sub= new ArrayList<String>();
    String qry="SELECT * FROM "+myTable+"";
    SQLiteDatabase db= this.getReadableDatabase();
    Cursor cursor=db.rawQuery(qry, null);
    if (cursor.moveToFirst()) {
        do {
            System.out.println("-TblPOmaster-");
            sub.add(cursor.getString(0));               
            sub.add(cursor.getString(1));
            sub.add(cursor.getString(2));
            main.add(sub);
            System.out.println("Data:"+main);
        } while (cursor.moveToNext());      
    }
    cursor.close();
    db.close();
    return main;
}

Output what i'm Getting Now

Data:[[a1,a2,a3]]
    Data:[[a1,a2,a3,b1,b2,b3],[a1,a2,a3,b1,b2,b3]]
    Data:[[a1,a2,a3,b1,b2,b3,c1,c2,c3],[a1,a2,a3,b1,b2,b3,c1,c2,c3],[a1,a2,a3,b1,b2,b3,c1,c2,c3]]

Output what i need

Data:[[a1,a2,a3]]
    Data:[[a1,a2,a3],[b1,b2,b3]]
    Data:[[a1,a2,a3],[b1,b2,b3],[c1,c2,c3]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:47:53.870

```
 if (cursor.moveToFirst()) {
      do {
       List<String> sub= new ArrayList<String>();
        System.out.println("-TblPOmaster-");
        sub.add(cursor.getString(0));               
        sub.add(cursor.getString(1));
        sub.add(cursor.getString(2));
        main.add(sub);
        System.out.println("Data:"+main);
    } while (cursor.moveToNext());      
   }
   cursor.close();
   db.close();
return main;
} 
```

尝试在游标内声明子列表，它会正常工作

# sql-server - 如何使用sql中的触发器在数值中插入数字？

> ID：13152815
> 
> 赞同：0
> 
> 时间：2012-10-31T07:01:07.213
> 
> 标签：sql-server

输入数字金额后，我需要自动获取文字金额。

eg：如果我输入2500，它应该在下一个字段中自动插入为2500。

是否可以在 sql server 中提供解释。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:19:09.730

Please use the below function to Convert into the word:

```
 CREATE FUNCTION [dbo].[Currency_ToWords] (
            @Input Numeric (38) -- Input number with as many as 18 digits

        ) RETURNS VARCHAR(8000) 

        /*
        * Converts a integer number as large as 34 digits into the 
        * equivalent words.  The first letter is capitalized.
        *
        * Attribution: Based on NumberToWords by Srinivas Sampath
        *        as revised by Nick Barclay
        *
        * Example:
        select dbo.udf_Num_ToWords (1234567890) + CHAR(10)
              +  dbo.udf_Num_ToWords (0) + CHAR(10)
              +  dbo.udf_Num_ToWords (123) + CHAR(10)
        select dbo.udf_Num_ToWords(76543210987654321098765432109876543210)

        DECLARE @i numeric (38,0)
        SET @i = 0
        WHILE @I <= 1000 BEGIN 
            PRINT convert (char(5), @i)  
                    + convert(varchar(255), dbo.udf_Num_ToWords(@i)) 
            SET @I  = @i + 1 
        END
        *
        * Published as the T-SQL UDF of the Week Vol 2 #9 2/17/03
        ****************************************************************/
        AS BEGIN
        Declare @Number Numeric(38,0)
        set @Number = @Input
        Declare @Cents as int
        set @Cents = 100*Convert(money,(@Input - convert(Numeric(38,3),@Number)))
        DECLARE @inputNumber VARCHAR(38)
        DECLARE @NumbersTable TABLE (number CHAR(2), word VARCHAR(10))
        DECLARE @outputString VARCHAR(8000)
        DECLARE @length INT
        DECLARE @counter INT
        DECLARE @loops INT
        DECLARE @position INT
        DECLARE @chunk CHAR(3) -- for chunks of 3 numbers
        DECLARE @tensones CHAR(2)
        DECLARE @hundreds CHAR(1)
        DECLARE @tens CHAR(1)
        DECLARE @ones CHAR(1)

        IF @Number = 0 Return 'Zero'

        -- initialize the variables
        SELECT @inputNumber = CONVERT(varchar(38), @Number)
             , @outputString = ''
             , @counter = 1
        SELECT @length   = LEN(@inputNumber)
             , @position = LEN(@inputNumber) - 2
             , @loops    = LEN(@inputNumber)/3

        -- make sure there is an extra loop added for the remaining numbers
        IF LEN(@inputNumber) % 3 <> 0 SET @loops = @loops + 1

        -- insert data for the numbers and words
        INSERT INTO @NumbersTable   SELECT '00', ''
            UNION ALL SELECT '01', 'one'      UNION ALL SELECT '02', 'two'
            UNION ALL SELECT '03', 'three'    UNION ALL SELECT '04', 'four'
            UNION ALL SELECT '05', 'five'     UNION ALL SELECT '06', 'six'
            UNION ALL SELECT '07', 'seven'    UNION ALL SELECT '08', 'eight'
            UNION ALL SELECT '09', 'nine'     UNION ALL SELECT '10', 'ten'
            UNION ALL SELECT '11', 'eleven'   UNION ALL SELECT '12', 'twelve'
            UNION ALL SELECT '13', 'thirteen' UNION ALL SELECT '14', 'fourteen'
            UNION ALL SELECT '15', 'fifteen'  UNION ALL SELECT '16', 'sixteen'
            UNION ALL SELECT '17', 'seventeen' UNION ALL SELECT '18', 'eighteen'
            UNION ALL SELECT '19', 'nineteen' UNION ALL SELECT '20', 'twenty'
            UNION ALL SELECT '30', 'thirty'   UNION ALL SELECT '40', 'forty'
            UNION ALL SELECT '50', 'fifty'    UNION ALL SELECT '60', 'sixty'
            UNION ALL SELECT '70', 'seventy'  UNION ALL SELECT '80', 'eighty'
            UNION ALL SELECT '90', 'ninety'   

        WHILE @counter <= @loops BEGIN

            -- get chunks of 3 numbers at a time, padded with leading zeros
            SET @chunk = RIGHT('000' + SUBSTRING(@inputNumber, @position, 3), 3)

            IF @chunk <> '000' BEGIN
                SELECT @tensones = SUBSTRING(@chunk, 2, 2)
                     , @hundreds = SUBSTRING(@chunk, 1, 1)
                     , @tens = SUBSTRING(@chunk, 2, 1)
                     , @ones = SUBSTRING(@chunk, 3, 1)

                -- If twenty or less, use the word directly from @NumbersTable
                IF CONVERT(INT, @tensones) <= 20 OR @Ones='0' BEGIN
                    SET @outputString = (SELECT word 
                                              FROM @NumbersTable 
                                              WHERE @tensones = number)
                           + CASE @counter WHEN 1 THEN '' -- No name
                               WHEN 2 THEN ' thousand ' WHEN 3 THEN ' million '
                               WHEN 4 THEN ' billion '  WHEN 5 THEN ' trillion '
                               WHEN 6 THEN ' quadrillion ' WHEN 7 THEN ' quintillion '
                               WHEN 8 THEN ' sextillion '  WHEN 9 THEN ' septillion '
                               WHEN 10 THEN ' octillion '  WHEN 11 THEN ' nonillion '
                               WHEN 12 THEN ' decillion '  WHEN 13 THEN ' undecillion '
                               ELSE '' END
                                       + @outputString
                    END
                 ELSE BEGIN -- break down the ones and the tens separately

                     SET @outputString = ' ' 
                                    + (SELECT word 
                                            FROM @NumbersTable 
                                            WHERE @tens + '0' = number)
                                     + '-'
                                     + (SELECT word 
                                            FROM @NumbersTable 
                                            WHERE '0'+ @ones = number)
                           + CASE @counter WHEN 1 THEN '' -- No name
                               WHEN 2 THEN ' thousand ' WHEN 3 THEN ' million '
                               WHEN 4 THEN ' billion '  WHEN 5 THEN ' trillion '
                               WHEN 6 THEN ' quadrillion ' WHEN 7 THEN ' quintillion '
                               WHEN 8 THEN ' sextillion '  WHEN 9 THEN ' septillion '
                               WHEN 10 THEN ' octillion '  WHEN 11 THEN ' nonillion '
                               WHEN 12 THEN ' decillion '   WHEN 13 THEN ' undecillion '
                               ELSE '' END
                                    + @outputString
                END

                -- now get the hundreds
                IF @hundreds <> '0' BEGIN
                    SET @outputString  = (SELECT word 
                                              FROM @NumbersTable 
                                              WHERE '0' + @hundreds = number)
                                        + ' hundred ' 
                                        + @outputString
                END
            END

            SELECT @counter = @counter + 1
                 , @position = @position - 3

        END

        -- Remove any double spaces
        SET @outputString = LTRIM(RTRIM(REPLACE(@outputString, '  ', ' ')))
        SET @outputstring = UPPER(LEFT(@outputstring, 1)) + SUBSTRING(@outputstring, 2, 8000)

        RETURN UPPER(@outputString)   -- return the result
        END 
```

**For E.x :** SELECT dbo.Currency_ToWords(2500)

**OUTPUT:** TWO THOUSAND FIVE HUNDRED

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:19:48.520

我想说最好的解决方案是创建一个函数来实现将数字转换为单词的逻辑。网上有这种逻辑的例子，例如：[http](http://www.meadinkent.co.uk/xlnumberstext.htm) ://www.meadinkent.co.uk/xlnumberstext.htm它只需要转换为t-sql。

然后存储数值并使用计算字段导出字符串值。计算字段将调用您的新函数并传入数字列，结果将是数字的字符串表示形式。

有关计算字段的参考，请查看此处：http: [//msdn.microsoft.com/en-us/library/ms191250 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms191250(v=sql.105).aspx)

有关创建函数的参考，请查看此处：http: [//msdn.microsoft.com/en-us/library/ms186755.aspx](http://msdn.microsoft.com/en-us/library/ms186755.aspx)

# php - 如何在 html 中使用 php 代码？

> ID：13152818
> 
> 赞同：-1
> 
> 时间：2012-10-31T07:01:18.757
> 
> 标签：php, codeigniter

这是一个幼稚的问题，但我不知道如何解决它。我在 php 代码中使用 html 代码。它工作正常。但是当我在那个 html 代码中使用 php 代码时，它会显示错误。我的代码是->

```
$config['full_tag_open'] = '<div class="pagination"> <span class="page_no">Page 1 of 30</span> <ul class="pag_list">'; 
```

它工作正常，但我想在此使用 php 代码代替第 1 页，共 30 页。像这样->

```
 $config['uri_segment'] =4;

 $config['full_tag_open'] = '<div class="pagination"> <span class="page_no">Page ."$config['uri_segment']". of 30</span> <ul class="pag_list">'; 
```

请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:03:40.670

PHP 代码位于字符串中，并被视为字符串。

将其更改为：

```
 $config['uri_segment'] = 4;

 $config['full_tag_open'] = 
    '<div class="pagination"> <span class="page_no">Page '.
    $config['uri_segment'].
    ' of 30</span> <ul class="pag_list">'; 
```

请注意，为了清楚起见，我将换行符放入。实际上，关闭（和重新打开）单引号和删除周围的双引号可以解决`$config['uri_segment']`问题。如果您在荧光笔中查看您的代码（甚至在您的问题中），您会看到它是红色的（如字符串）并且未突出显示（如 PHP 代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:04:16.780

你有一个错字......你`.`的位置不对，而且在`"`. 看起来你在混合你的报价`'/"`。尝试这个：

```
$config['full_tag_open'] = '<div class="pagination"> <span class="page_no">Page ' . $config['uri_segment'] . ' of 30</span> <ul class="pag_list">'; 
```

# c - 我可以返回在函数中创建的缓冲区吗？

> ID：13152820
> 
> 赞同：2
> 
> 时间：2012-10-31T07:01:21.987
> 
> 标签：c

```
char * return_buffer()
{
    char buffer[1024];
    snprintf(buffer, sizeof(buffer), "%s", "test");
    return buffer;
} 
```

函数中创建了缓冲区，我可以直接返回缓冲区吗？函数返回后，缓冲区会消失吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T07:05:02.770

您正在创建一个静态分配的缓冲区，这意味着它是在堆栈上创建的。当函数返回时，它将为您提供一个不再使用的堆栈地址。因此，如果您进行更多的函数调用，它存储的数据可能会损坏。

通过调用 malloc 将其分配到堆中要好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:03:27.887

您将需要使用`malloc`.
`buffer`是一个局部/自动变量，在函数返回后不保证存在。在函数范围之外使用任何此类缓冲区将导致未定义行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T07:03:49.343

是的。这个缓冲区是一个使用堆栈的局部变量，一旦你退出函数就会被释放。使用 malloc 分配动态内存缓冲区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T07:04:06.627

在这种情况下，不，你不能。更像你*可以*，但你*不应该*这样做。这里`buffer`是在堆栈上创建的，将被重用。

您可以在分配 with`malloc`或类似功能时返回。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T07:05:17.270

这是不可能的，可能会导致崩溃。这里内存是在堆栈上分配的，一旦函数返回，内存将被释放。如果要从函数返回缓冲区，则必须在堆上分配内存。您可以为此使用 malloc/calloc。阅读[更多](http://www.cplusplus.com/reference/clibrary/cstdlib/malloc/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T07:46:55.747

不，您不能返回指向局部变量的指针。

编写此类函数的最佳方法是将分配留给调用者。优点是：1）代码独立于内存分配方法，可以与静态和动态分配的内存一起使用，2）将算法和内存分配分开，这样算法只关心手头的主要任务并且不关心与算法本身无关的副任务，例如内存分配。

这种程序设计很常见（例如被 Windows API 使用）。

例子：

```
void print_buffer (char* buffer, size_t size)
{
  snprintf(buffer, size, "%s", "test");
} 
```

# putty - plink：巡航控制中的未知选项“-q”错误

> ID：13152821
> 
> 赞同：1
> 
> 时间：2012-10-31T07:01:37.793
> 
> 标签：putty, cruisecontrol

在巡航控制上配置项目时出现以下错误

错误日志

```
plink: unknown option "-q"
svn: E210002: Unable to connect to a repository at URL 'svn+ssh://<uname>@<ip>/subversion/<folder1>/mconsole'
svn: E210002: To better debug SSH connection problems, remove the -q option from 'ssh' in the [tunnels] section of your Subversion configuration file.
svn: E210002: Network connection closed unexpectedly
<Update> failed. 
```

我尝试编辑 %USERPROFILE%\AppData\Roaming\Subversion\config 并从 ssh = $SVN_SSH ssh 中删除“-q”选项，但仍然给出相同的错误。

我的 SVN 版本：

```
TortoiseSVN 1.7.10, Build 23359 - 64 Bit , 2012/10/08 11:46:26
Subversion 1.7.7 
```

我已将 plink.exe 从我的 putty 文件夹复制到 tortoise folds 并将其重命名为 ssh.exe 以解决 ssh+svn 问题

有人可以帮我解决这个问题。

# performance - 从 OpenJPA 1.2 迁移到 Hibernate 4.0 后 find() 方法的性能问题

> ID：13152822
> 
> 赞同：0
> 
> 时间：2012-10-31T07:01:38.753
> 
> 标签：performance, hibernate, jpa, openjpa, timesten

我从 OpenJPA 1.2 迁移到 Hiberante 4.0
我正在使用 TimesTen DB

我正在执行本机查询以获取我需要的对象的 id，然后对它们中的每一个执行查找。我使用方法而`OpenJPA`不是 find `findCache()`，如果它返回 null 我使用`find()`方法，在休眠中我只使用`find()`方法。

我在同一个数据库上执行了这个操作。

经过几次测试后，我发现 OpenJPA 的性能要好得多。

我打印了休眠会话的统计信息（在查询并找到相同的对象之后），并看到`hit\miss`一级缓存的计数始终为 0。而 OpenJPA 通过使用该`findCache`方法获取对象显然达到了它的缓存。

如何提高 Hibernate 中 find 的性能？我怀疑它指的是这个工具的一级缓存实现的差异。

另一个事实：我在应用程序运行时使用相同的 EntityManager（我需要最小化创建 EntityManager 的成本 - 我的应用程序是软实时的）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:45:22.110

Hibernate 中的一级缓存对应会话。因此，如果会话还没有加载给定的对象，它将是一个未命中。您需要启用二级缓存才能跨会话按 id 缓存对象。

查看参考文档以获取更多信息[http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#performance-cache](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#performance-cache)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:11:09.530

首先，你为什么不只检索完整的对象而不是 id。检索多个对象的一个​​ select 语句比单独检索每个项目快很多倍。

其次，您可能需要二级缓存来进行休眠。一级缓存主要适用于每个会话。

# c# - 在编辑时只允许在 gridviewcell 中输入数字

> ID：13152823
> 
> 赞同：1
> 
> 时间：2012-10-31T07:01:40.437
> 
> 标签：c#, gridview

我的 C# windows 应用程序中有一个 gridview ......它允许被编辑，我想要一个特殊的单元格（名为“Price”）来只允许按键上的数字......我使用下面的代码用于 texboxes 只允许数字。 .. 在哪个网格视图事件中我应该编写这段代码？

```
 private void txtJustNumber_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (!char.IsDigit((char)(e.KeyChar)) &&
            e.KeyChar != ((char)(Keys.Enter)) &&
            (e.KeyChar != (char)(Keys.Delete) || e.KeyChar == Char.Parse(".")) &&
            e.KeyChar != (char)(Keys.Back))
        {
            e.Handled = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:16:22.250

```
You can use CellValidating event of DataGridView.

private void dataGridView1_CellValidating(object sender,
        DataGridViewCellValidatingEventArgs e)
    {
        // Validate the Price entry.
        if (dataGridView1.Columns[e.ColumnIndex].Name == "Price")
        {
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T17:33:03.487

thx伙计们......我使用了下面的代码，我的问题解决了......

```
 public Form1()
    {
        InitializeComponent();
        MyDataGridViewInitializationMethod();
    }

    private void MyDataGridViewInitializationMethod()
    {
        gvFactorItems.EditingControlShowing +=
            new DataGridViewEditingControlShowingEventHandler(gvFactorItems_EditingControlShowing);
    }

    private void gvFactorItems_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
    {
        e.Control.KeyPress += new KeyPressEventHandler(Control_KeyPress); ;
    }

    private void Control_KeyPress(object sender, KeyPressEventArgs e)
    {

        if (!char.IsDigit((char)(e.KeyChar)) &&
            e.KeyChar != ((char)(Keys.Enter)) &&
            (e.KeyChar != (char)(Keys.Delete) || e.KeyChar == Char.Parse(".")) &&
            e.KeyChar != (char)(Keys.Back))
        {
            e.Handled = true;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:06:32.027

我认为你应该看看这个，它会有所帮助:-

[DataGridView keydown 事件在 C# 中不起作用](https://stackoverflow.com/questions/4284370/datagridview-keydown-event-not-working-in-c-sharp)

# python - 覆盖函数，看到类中定义了一个bool

> ID：13152824
> 
> 赞同：0
> 
> 时间：2012-10-31T07:01:43.743
> 
> 标签：python, html-parsing, global

我正在尝试在 python 中解析一些 html 页面。当我到达某个标签时，我想开始打印所有数据。到目前为止，我想出了这个：

```
class MyHTMLParser(HTMLParser):
    start = False;
    counter = 0;
    def handle_starttag(self,tag,attrs):
        if(tag == 'TBODY'):
            start = True;
            counter +=1
            #if counter == 1
    def handle_data(self,data):
        if (start == True): # this is the error line
            print data 
```

问题是有一个错误说它不知道 start 是什么。我知道我可以使用全局变量，但这不会强迫我在整个类之外定义变量吗？

编辑：将 start 更改为 self.start 可以解决问题，但是有没有办法在**init**中定义它而不会弄乱 HTMLParser init？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:39:02.000

```
class MyHTMLParser(HTMLParser):
    start = False;
    counter = 0;
    ... 
```

这并不像你认为的那样！

在 Java、C# 或类似语言中，类似代码所做的是声明称为`MyHTMLParser`all 的对象类具有`start`初始值为`False`和`counter`初始值为 的属性`0`。

在 Python**中，类也是对象**。它们有自己的属性，就像所有其他对象一样。所以上面在 Python 中所做的是创建一个名为 的类对象`MyHTMLParser`，其属性`start`设置为`False`，属性`counter`设置为`0`。¹

要记住的另一件事是，**没有任何方法**可以对裸名称进行分配，例如`start = True`在对象上设置属性。它总是设置一个名为 的变量`start`。²

`MyHTMLParser`因此，您的类不包含在您的任何实例上设置任何属性的代码；类主体中的代码是设置类对象本身的属性，而其中的代码`handle_starttag`是设置局部变量，然后当它们超出范围时将其丢弃。

出于类似的原因，您的代码正在从名为（您从未设置过）`handle_data`的局部变量中读取。`start`在 Python 中，如果不指定要在哪个对象中查找属性，就无法读取属性。bare`start`总是指代变量，无论是在本地函数范围内还是在某些外部范围内。您需要`self.start`读取对象的`start`属性`self`。

请记住，`def`定义方法的块没有什么特别之处，它是一个和其他任何函数一样的函数。只有稍后，当该函数恰好存储在类对象的属性中时，该函数才能被归类为方法。因此，该`self`参数的行为与任何其他参数相同，实际上也与任何其他名称相同。它不必被命名`self`（尽管这是一个明智的约定），并且它没有特殊的特权使裸名的读取和写入查找`self`.

所以：

1.  不要在类块中用它们的初始值来定义你的属性；这是由类的所有实例共享的值，而不是每个实例的属性。实例属性只有在您引用特定实例后才能被初始化；最常见的是在`__init__`方法中完成，只要对象存在就会调用该方法。

2.  您*必须*指定要在哪个对象中读取或写入属性。这*始终*适用于*任何*情况。特别是，您通常将方法内的属性称为`self.attribute`.

应用它（并消除在 Python 中不需要的分号）：

```
class MyHTMLParser(HTMLParser):
    def __init__(self):
        start = False
        counter = 0

    def handle_starttag(self, tag, attrs):
        if(tag == 'TBODY'):
            self.start = True
            self.counter += 1

    def handle_data(self, data):
        if (self.start == True):
            print data 
```

* * *

¹方法`handle_starttag`和`handle_data`函数也只不过是函数，它们恰好是用作类的对象的属性。

²通常是局部变量；如果您已声明`start`为`global`，`nonlocal`则它可能是外部变量。但它*绝对*不是您碰巧在附近的某个对象的属性，即使该其他对象绑定到 name `self`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:07:31.927

使用 self 关键字

```
class MyHTMLParser(HTMLParser):
    def __init__(self):
        self.start = False;
        self.counter = 0;
    def handle_starttag(self,tag,attrs):
        if(tag == 'TBODY'):
            self.start = True;
            self.counter +=1
            #if counter == 1
    def handle_data(self,data):
        if (self.start == True): # this is the error line
            print data 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T07:20:08.710

请注意，您不需要`;`在每行的末尾添加分号。如有必要，您可以将其用作分隔符以将多个语句放在同一行上。请参阅[为什么在这个 python 片段中允许使用分号？](https://stackoverflow.com/questions/8236380/why-is-semicolon-allowed-in-this-python-snippet)

# node.js - 为什么 bigpipe 需要“冲洗”？

> ID：13152827
> 
> 赞同：0
> 
> 时间：2012-10-31T07:01:58.657
> 
> 标签：node.js

[https://github.com/jehrhardt/bigpipe-node/blob/master/app.js](https://github.com/jehrhardt/bigpipe-node/blob/master/app.js) http://www.subbu.org/blog/2010/07/bigpipe-done-in-node-js

我注意到 bigpipe 的所有实现都需要“刷新”HTML。换句话说，总是会发生这样的事情：

```
// header n stuff

res.write('<script>function flushHTML(id, html) {'
  + 'document.getElementById(' + id + ').innerHTML = ' + html
  + '};</script>')

// more stuff

// a "pagelet"
res.write('<script>flushHTML(' + someID + ', ' + myHTML + ');</script>')

res.end('</body></html>') 
```

为什么你不能只在`res.write(html)`每个部分不冲洗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:50:14.610

重点是将生成整个 HTML 的大任务拆分为许多小任务（也称为 pagelet）。例如，假设您想向浏览器发送两件事：用户详细信息和他刚刚进行的交易的详细信息。无需同时执行这两项任务（即从 DB 加载数据）并在此之后发送 HTML，您将从 DB 加载用户并将其发送到浏览器，然后从 DB 加载事务并将其发送到浏览器。

这最终会带来更好的用户体验和更快的加载时间（因为浏览器会逐块生成 HTML，这比一次生成所有内容更有效）。

请注意，这是 Facebook 开发的（或至少被 Facebook 广泛使用），因此请阅读本文了解更多信息：

[http://www.facebook.com/note.php?note_id=389414033919](http://www.facebook.com/note.php?note_id=389414033919)

# c++ - 在代码块中打开程序

> ID：13152831
> 
> 赞同：1
> 
> 时间：2012-10-31T07:02:27.933
> 
> 标签：c++, codeblocks

我已经下载了一个用 c++ 编写的包，其中包括我想要打开和运行的示例程序。我应该为每个程序创建一个新项目并“手动”添加头文件吗？还是有另一种自动方法。

# php - 使用 PHP cURL 登录 eBay

> ID：13152832
> 
> 赞同：3
> 
> 时间：2012-10-31T07:02:28.003
> 
> 标签：php, curl

我是 cURL 的新手，我正在尝试使用 php cURL 访问我的 ebay 帐户，我有一个现有的代码，但 ebay 似乎不允许我使用 cURL 登录。当我回显结果时，它只显示登录页面。

```
$username="testtest"; 
$password="testtest"; 
$url="https://signin.ebay.co.uk/ws/eBayISAPI.dll?co_partnerId=2&siteid=3&UsingSSL=1"; 

$gacookie="/var/www/barcode/cookie/cookie.txt";
$postdata = 'userid='. $username .':pass='. $password;

$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, $url); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt ($ch, CURLOPT_COOKIEJAR, $gacookie); 
curl_setopt ($ch, CURLOPT_COOKIEFILE, $gacookie);
curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt ($ch, CURLOPT_POST, 1); 
$AskApache_result = curl_exec ($ch); 
curl_close($ch); 

echo $AskApache_result; 
```

是否可以通过用户名和密码或令牌使用 php cURL 登录 ebay？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:04:59.307

发布数据应如下所示：

`foo=bar&field=value`

在你的情况下：

`$postdata = 'userid='. $username .'&pass='. $password;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:09:17.390

尝试添加以下代码

```
curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0); 
```

并进一步排除故障

```
var_dump($AskApache_result);
echo curl_error($ch); 
```

# java - 如何获取 Groovy 生成的 java 源代码

> ID：13152833
> 
> 赞同：5
> 
> 时间：2012-10-31T07:02:33.210
> 
> 标签：java, groovy, dynamically-generated, gmaven-plugin

我们有一些使用 Groovy 的遗留代码，我们想从应用程序中删除 Groovy，因此，我们需要获取使用 gmaven 插件后生成的 java 源代码。

基本上，换句话说，我正在动态生成新类（使用 gmaven Groovy maven 插件），并且我希望能够获得此类生成的类的 java 源代码。

我研究了一下，可以看到这个插件的唯一目标是

```
<goal>generateStubs</goal>
<goal>compile</goal>
<goal>generateTestStubs</goal>
<goal>testCompile</goal> 
```

我看不到任何目标可以让您获得完全实现的 java 源代码，存根代码对我们来说是不够的，因为我们需要最终的实现源代码才能摆脱 Groovy。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T07:35:43.853

我对 gmaven 插件不是很熟悉，但我认为它会将 groovy 代码编译成字节码。在这种情况下，您可以使用字节码反编译器，这里有一个不错的[列表](http://www.program-transformation.org/Transform/JavaDecompilers#Java_Bytecode_Decompilers)。过去我使用过 JAD，它非常好。最好的也会尝试根据类名创建有意义的变量名。

不过有一个警告——Groovy 对象是从 GObject 派生的，而不是 java.lang.Object，因此您可能需要保留 groovy jar 直到 groovy->java 移植完成。另外，请准备好它不会是一个非常容易阅读的java ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-19T08:33:05.480

它可能超出了您的范围（1 岁），但我与同样的问题作斗争并找到了一种从反编译的 groovy 类中检索算法（而不是 java 源代码）的方法。

你可能想看看： http: [//michael.laffargue.fr/blog/2013/11/02/decompiling-groovy-made-classes/](http://michael.laffargue.fr/blog/2013/11/02/decompiling-groovy-made-classes/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T07:47:49.197

生成的存根对您毫无用处。它们正是它们的名字所暗示的：存根。

存根仅在进行联合 java/groovy 编译时才有用。这是因为在一个 java/groovy 混合项目中涉及到两个编译器。

1.  解析 groovy
2.  创建存根
3.  编译 java 和存根（使用 javac）
4.  继续 groovy 编译（使用 groovyc）

groovy 代码将使用编译器进行`groovyc`编译，结果是字节码。

这是生成的存根的示例：

```
package maba.groovy;

import java.lang.*;
import java.io.*;
import java.net.*;
import java.util.*;
import groovy.lang.*;
import groovy.util.*;

@groovy.util.logging.Log4j() public class Order
    extends java.lang.Object  implements
    groovy.lang.GroovyObject {
    public  groovy.lang.MetaClass getMetaClass() { return (groovy.lang.MetaClass)null;}
    public  void setMetaClass(groovy.lang.MetaClass mc) { }
    public  java.lang.Object invokeMethod(java.lang.String method, java.lang.Object arguments) { return null;}
    public  java.lang.Object getProperty(java.lang.String property) { return null;}
    public  void setProperty(java.lang.String property, java.lang.Object value) { }
    public  int getPrice() { return (int)0;}
    public  void setPrice(int value) { }
    public  int getQuantity() { return (int)0;}
    public  void setQuantity(int value) { }
    @java.lang.Override() public  java.lang.String toString() { return (java.lang.String)null;}
} 
```

如您所见，没有什么有用的。你仍然会依赖一些 groovy 库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T09:26:28.413

这个问题前段时间已经在邮件列表中[0]。总而言之：从 Groovy 到 Java 很难实现，因为 Java 中不存在语言结构和 API（如果您确实想完全删除 Groovy 依赖项）。

尤其是在引入调用站点缓存和其他性能优化技术后，生成的 Java 代码看起来很像这样（为了简单起见，我只是将一些脚本放入 JD-GUI [1]）：

```
public class script1351632333660 extends Script
{
public script1351632333660()
{
script1351632333660 this;
CallSite[] arrayOfCallSite = $getCallSiteArray();
}

public script1351632333660(Binding arg1)
{
Binding context;
CallSite[] arrayOfCallSite = $getCallSiteArray();
ScriptBytecodeAdapter.invokeMethodOnSuperN($get$$class$groovy$lang$Script(), this, "setBinding", new Object[] { context });
}

public Object run()
{
CallSite[] arrayOfCallSite = $getCallSiteArray(); Object items = ScriptBytecodeAdapter.createList(new Object[0]);
Object[] item = (Object[])ScriptBytecodeAdapter.castToType(ScriptBytecodeAdapter.createList(new Object[] { "Fluff", arrayOfCallSite[1].callConstructor($get$$class$java$util$Date()), (Integer)DefaultTypeTransformation.box(11235813) }), $get$array$$class$java$lang$Object());

arrayOfCallSite[2].call(items, item);

arrayOfCallSite[3].callCurrent(this, items);

ValueRecorder localValueRecorder = new ValueRecorder();
try
{
Object tmp102_101 = items; localValueRecorder.record(tmp102_101, 8);
Object tmp126_121 = arrayOfCallSite[4].call(tmp102_101, new script1351632333660._run_closure1(this)); localValueRecorder.record(tmp126_121, 14); if (DefaultTypeTransformation.booleanUnbox(tmp126_121)) localValueRecorder.clear(); else ScriptBytecodeAdapter.assertFailed(AssertionRenderer.render("assert items.findAll { it }", localValueRecorder), null);  } finally {
localValueRecorder.clear(); throw finally; } return null; return null; } 
static { __$swapInit();
Long localLong1 = (Long)DefaultTypeTransformation.box(0L);
__timeStamp__239_neverHappen1351632333665 = localLong1.longValue();
Long localLong2 = (Long)DefaultTypeTransformation.box(1351632333665L);
__timeStamp = localLong2.longValue(); } 
class _run_closure1 extends Closure implements GeneratedClosure { public _run_closure1(Object _thisObject) { super(_thisObject); } 
public Object doCall(Object it) { CallSite[] arrayOfCallSite = $getCallSiteArray(); return it; return null;
}

// ... 
```

[0] [http://groovy.329449.n5.nabble.com/Java-lt-gt-Groovy-converters-td337442.html](http://groovy.329449.n5.nabble.com/Java-lt-gt-Groovy-converters-td337442.html)

[1] [http://java.decompiler.free.fr](http://java.decompiler.free.fr)

# android - 使用 EditText 自定义列表视图：焦点

> ID：13152837
> 
> 赞同：4
> 
> 时间：2012-10-31T07:02:39.937
> 
> 标签：android, listview, focus

我有一个带有 EditText 和 Listview 的简单布局。实现了自定义 ArrayList 适配器以填充列表视图和自定义过滤器，以便用户可以搜索列表视图中显示的项目。

当我运行应用程序时，焦点最初设置为 EditText，键盘按预期显示。但这是我想做的：

1.  启动应用程序时，焦点最初应设置为 ListView。
2.  如果用户想通过选择edittext 控件来输入文本，那么应该会出现键盘。
3.  （此时，当用户输入文本时，列表视图项将发生变化 - 我已经实现了这一点）
4.  在键盘仍然打开的情况下，如果用户在列表视图中选择了一个项目，键盘应该会消失并触发列表视图的 onItemClick 函数。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:10:56.907

`EditText`1.在其 layout-xml 中将以下属性添加到您的特定属性：

```
android:focusable="false"
android:focusableInTouchMode="true" 
```

2.然后在你的`Activity`添加：

```
mEditText.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        v.setFocusable(true);
        return false;
    }
}); 
```

希望这可以帮助。

# java - 用于 MySQL 数据库条目的预构建 Java Servlet？

> ID：13152843
> 
> 赞同：-1
> 
> 时间：2012-10-31T07:03:42.660
> 
> 标签：java, mysql, servlets, open-source

我正在寻找一个能够接受 POST 或 GET 请求并将它们解密为操作的 servlet 的良好起点。此操作将请求将数据输入到 MySQL 数据库上的表中。

我以前在 Eclipse 中处理过我自己定制的 servlet，但我想要一个预构建的 servlet，它的唯一目的是为 MySQL 输入数据。

有谁知道允许我调用简单的例程来处理这样的传入请求的库或开源项目？

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-31T07:56:15.113

周围有很多 Web 框架，根据我的个人喜好，我建议将 spring 用于依赖注入与 struts-2 配对

# blackberry-10 - vmware 播放器无法在 blackberry 10 dev alpha 上正常工作

> ID：13152845
> 
> 赞同：2
> 
> 时间：2012-10-31T07:03:50.240
> 
> 标签：blackberry-10, vmware-player, blackberry-qnx

我正在尝试在我的 Core i3 笔记本电脑上使用黑莓 10 模拟器，但性能非常糟糕。

我正在使用 Windows 7 和 BB10 dev alpha 模拟器图像。我在启动 BB 时使用了安全选项，因为没有它会有奇怪的视觉伪影。

模拟器速度慢得无法使用，我在 VMWare 模拟器上启用了 2 个内核，详见此处： [https ://developer.blackberry.com/devzone/develop/simulator/simulator_improving_performance.html](https://developer.blackberry.com/devzone/develop/simulator/simulator_improving_performance.html)

我可以做些什么来提高模拟器的性能？启动模拟器需要半个多小时，几乎完全无法使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:08:16.127

I found the problem. All I had to do was to reboot, enter my BIOS by pressing delete, Go to CPU settings and enable Virtualisation. This made a huge difference. Can't believe I missed that in the documentation.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T23:37:25.410

模拟器是出了名的资源匮乏。您的问题可能是 CPU、RAM 和 HDD 的组合。内存不足是罪魁祸首。我发现任何小于 8GB 的​​东西都像狗一样跑。

理想的设置是：

*   8GB 内存
*   固态硬盘（我有三星 830，速度快如闪电）
*   Sandy/Ivy Bridge Intel i7 CPU

# android - 检查互联网状态后更改 ImageView 图像

> ID：13152852
> 
> 赞同：1
> 
> 时间：2012-10-31T07:04:12.287
> 
> 标签：android, sdk

我想在检查 Internet 状态后更改 imageview 图像。基本的，如果我想显示某个图像，我想检查互联网是否正常工作。

这是我的代码：

```
public void onClick(View v) {

    // get Internet status
    isInternetPresent = cd.isConnectingToInternet();

    // check for Internet status
    if (isInternetPresent) {
        // Internet Connection is Present
        // make HTTP requests
        showAlertDialog(AndroidDetectInternetConnectionActivity.this, "Internet Connection", "You have internet connection", true);
    } else {
        // Internet connection is not present
        // Ask user to connect to Internet
        showAlertDialog(AndroidDetectInternetConnectionActivity.this, "No Internet Connection", "You don't have internet connection.", false);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:09:58.060

我假设您了解在 Android 中检查互联网。

在 oncreate 使用这个：

```
imagev = (ImageView)findviewbyid(R.id.imageview); 
```

按钮点击：

```
public void onClick(View v) {

                // get Internet status
                isInternetPresent = cd.isConnectingToInternet();

                // check for Internet status
                if (isInternetPresent) {
                    // Internet Connection is Present
                    // make HTTP requests
                    showAlertDialog(AndroidDetectInternetConnectionActivity.this, "Internet Connection",
                            "You have internet connection", true);
                              imagev.setImageDrawable(getResources().getDrawable(R.drawable.withinternet));

                } else {
                    // Internet connection is not present
                    // Ask user to connect to Internet
                    showAlertDialog(AndroidDetectInternetConnectionActivity.this, "No Internet Connection",
                            "You don't have internet connection.", false);
                 imagev.setImageDrawable(getResources().getDrawable(R.drawable.nointernet));
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:10:04.317

使用以下方法检查互联网是否可用

```
public static boolean isOnline(Activity context) {
    ConnectivityManager cm = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnected()) {
        return true;
    }
    return false;
} 
```

通过在清单文件中设置以下权限

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

然后检查如下

```
if(isOnline())
    img.setImageResource();
else
    img.setImageResource(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T07:18:04.360

试试这个来改变`ImageView`.

```
 your_ImageView.setBackgroundResource(R.drawable.your_image_name); 
```

# ejb - 使用 JMeter 进行 Weblogic 测试：在“240”秒内未收到任何消息；嵌套异常是：weblogic.rjvm.PeerGoneException

> ID：13152854
> 
> 赞同：3
> 
> 时间：2012-10-31T07:04:17.580
> 
> 标签：ejb, weblogic, jmeter, performance-testing

我正在使用 JMeter 进行性能测试以评估我们的产品。我们的产品部署在 Weblogic 服务器中，并具有 Oracle 数据库。

在性能测试中，JMeter 客户端访问一组驻留在 weblogic 服务器中的 EJB 并调用相关函数。

但是在测试之后，我在 jmeter 日志中看到了一些异常。我把测试过程中遇到的异常放在下面。由于负载，JMeter 客户端似乎无法访问 weblogic 服务器中的 EJB 实例。但我不确定。你能帮我解决这个问题吗？

```
javax.ejb.EJBException: No message was received for: '240' seconds; nested exception is: weblogic.rjvm.PeerGoneException: No message was received for: '240' seconds
weblogic.rjvm.PeerGoneException: No message was received for: '240' seconds
    at weblogic.rjvm.ResponseImpl.unmarshalReturn(ResponseImpl.java:234)
    at weblogic.rmi.cluster.ClusterableRemoteRef.invoke(ClusterableRemoteRef.java:348)
    at weblogic.rmi.cluster.ClusterableRemoteRef.invoke(ClusterableRemoteRef.java:259)
    at com.xxxx.xxx.impl.adminagent.AdminAgentInfoSessionBeanWithAffinity_337280_AdminAgentInfoSessionRemoteWithAffinityImpl_1034_WLStub.setAdminAgentInfoForSecureElement(Unknown Source)
    at sun.reflect.GeneratedMethodAccessor62.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at weblogic.ejb.container.internal.RemoteBusinessIntfProxy.invoke(RemoteBusinessIntfProxy.java:73)
    at $Proxy7.setAdminAgentInfoForSecureElement(Unknown Source)
    at com.xxxx.xxx.bench.subscription.SubscriptionUseCases.addAdminAgentInfo(SubscriptionUseCases.java:388)
    at com.xxxx.xxx.bench.sampler.m1.create.AddAATriggerInfoSampler.runTest(AddAATriggerInfoSampler.java:145)
    at org.apache.jmeter.protocol.java.sampler.JavaSampler.sample(JavaSampler.java:165)
    at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:300)
    at java.lang.Thread.run(Unknown Source)
javax.ejb.EJBException: No message was received for: '240' seconds; nested exception is: weblogic.rjvm.PeerGoneException: No message was received for: '240' seconds
    at weblogic.ejb.container.internal.RemoteBusinessIntfProxy.unwrapRemoteException(RemoteBusinessIntfProxy.java:112)
    at weblogic.ejb.container.internal.RemoteBusinessIntfProxy.invoke(RemoteBusinessIntfProxy.java:91)
    at $Proxy7.setAdminAgentInfoForSecureElement(Unknown Source)
    at com.xxxx.xxx.bench.subscription.SubscriptionUseCases.addAdminAgentInfo(SubscriptionUseCases.java:388)
    at com.xxxx.xxx.bench.sampler.m1.create.AddAATriggerInfoSampler.runTest(AddAATriggerInfoSampler.java:145)
    at org.apache.jmeter.protocol.java.sampler.JavaSampler.sample(JavaSampler.java:165)
    at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:300)
    at java.lang.Thread.run(Unknown Source)
Caused by: weblogic.rjvm.PeerGoneException: No message was received for: '240' seconds 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:02:31.870

根据[Oracle 论坛帖子](https://kr.forums.oracle.com/forums/thread.jspa?threadID=1060677)，当客户端（在这种情况下为 JMeter）和服务器（部署在 ManagedServer 上的 EJB 应用程序）之间没有网络连接时，会在特定时间限制（默认值：240 秒）内抛出 PeerGoneException。

如果您正在执行的性能测试配置是模拟实际生产级别的流量，那么执行 WebLogic 服务器的调整是一个好主意。

要执行调整，请转到：管理控制台 -> 服务器 -> serverName -> 调整（选项卡）-> 高级（底部的链接）。`Period Length`并且`Idle Periods Until Timeout`是需要更改的属性。默认值 240 秒是这样计算的：周期长度 * 超时前的空闲周期。因此调整这些值以设置最佳值（基于 JMeter 性能测试）。尝试使用不同的值并确定更接近默认值的最佳值。

# java - 我可以设置一个仅允许查看的 .doc 文件（不能复制内容，不可编辑）。我可以在 .java 文件中做同样的事情吗？

> ID：13152859
> 
> 赞同：0
> 
> 时间：2012-10-31T07:04:38.157
> 
> 标签：java, file-permissions

基本上我想提供一个只能查看，既不能编辑也不能以任何其他方式使用的java代码。可能吗。

注意：这与交付 .class 文件无关。客户想查看 .java 文件中的代码。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:09:16.653

这是不可能的。

您可以将文件设置为只读。但查看者也可以更改权限！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:42:46.597

如果他们可以阅读它，他们可以复制它。您可以通过将文件作为一组 PNG 或 JPEG 屏幕截图发送，强制他们重新输入（或使用好的 OCR 程序）来增加难度。如果您需要让他们阅读 Java 代码，那么他们可以制作副本。

你对此无能为力。

# java - 系统代理设置，Java

> ID：13152861
> 
> 赞同：2
> 
> 时间：2012-10-31T07:04:39.977
> 
> 标签：java, url, proxy

我有一个需要连接到网络的应用程序。在处理代理连接时我需要一些建议。目前用户设置代理设置，因此我使用输入的信息进行连接。有没有更好的方法来处理这种情况。

我的意思是 chrome 之类的东西，它打开系统的代理设置然后使用它们。如何做到这一点并检索这些值？还有其他理想的方法吗？

其次，目前我正在检查是否有代理集。如果是，我使用的是`url.openConnection(proxy);` IF not then plain`url.openConnection();`有没有更清洁的方法？其中系统自动连接代理集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T07:07:40.853

```
//Set the http proxy to webcache.mydomain.com:8080

System.setProperty( "http.proxyHost", "webcache.mydomain.com" );
System.setProperty( "http.proxyPort", "8080" );

System.setProperty( "https.proxyHost", "webcache.mydomain.com" );
System.setProperty( "https.proxyPort", "8080" ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T07:37:08.297

从源代码我们可以使用

```
System.getProperties().put("http.proxyHost", "ProxyURL");
System.getProperties().put("http.proxyPort", "ProxyPort");
System.getProperties().put("http.proxyUser", "UserName");
System.getProperties().put("http.proxyPassword", "Password"); 
```

命令行 ：

```
 $> java -Dhttp.proxyHost=proxyhostURL -Dhttp.proxyPort=proxyPortNumber
-Dhttp.proxyUser=UserName -Dhttp.proxyPassword=Password ProxyClassHere 
```

[文档](http://viralpatel.net/blogs/http-proxy-setting-java-setting-proxy-java/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-20T08:30:37.773

我遇到了同样的问题，想使用 SOAP 客户端调用 1 个 WSDL。我能够通过 SOAP UI 调用 WSDL 但是当我尝试通过我的 JAVA 代码打包请求时，它失败了。我发现了问题，我的 java 代码没有选择代理的集合。我通过在我的 Eclipse 中设置这些代理来明确尝试：Eclipse -> Windows -> Preferences -> Geneal -> Network Connection。将本机更改为手动并添加了代理和端口。尽管如此，它还是没有奏效。最后，我在我的代码中只添加了 1 行并且它全部工作： System.setProperty("java.net.useSystemProxies", "true"); 如果您的 JAVA 主页设置正确，这肯定会在 Eclipse 中获取系统设置代理。

谢谢 Saurabh M. Chande

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T07:28:22.347

也看看这个： [How do I set the proxy to be used by the JVM](https://stackoverflow.com/questions/120797/how-do-i-set-the-proxy-to-be-used-by-the-jvm)

可以通过使用一些标志启动 JVM 来完成： JAVA_FLAGS=-Dhttp.proxyHost=10.0.0.100 -Dhttp.proxyPort=8800 java ${JAVA_FLAGS}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-29T09:57:35.740

您所需要的一切：[https ://docs.oracle.com/javase/7/docs/api/java/net/doc-files/net-properties.html](https://docs.oracle.com/javase/7/docs/api/java/net/doc-files/net-properties.html)

忠告：不要使用`System.getProperties().put`，见[http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/Properties.java](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/Properties.java)

```
/**
 * ....
 * Because {@code Properties} inherits from {@code Hashtable}, the
 * {@code put} and {@code putAll} methods can be applied to a
 * {@code Properties} object.  Their use is strongly discouraged as they
 * allow the caller to insert entries whose keys or values are not
 * {@code Strings}.  The {@code setProperty} method should be used
 * instead.
 * ....
 */ 
```

（如果你使用`Properties::put`非字符串值，你会遇到麻烦）

# c++ - 将字符串的排列与存储在文本文件中的单词进行比较

> ID：13152863
> 
> 赞同：3
> 
> 时间：2012-10-31T07:04:47.903
> 
> 标签：c++, stl

我打算找出用户输入字符串的任何排列是否是文本文件中的有效单词，单词很少。

输入字符串后，没有任何反应！“如果” stmt 有什么问题或什么？另外，如果我写了一个执行的 else ，这意味着即使我输入了 list.txt 中存在的单词，也无法达到控制

我可以尝试什么来解决这个问题？

```
//check if any permutation of a user inputted word are in a pre defined text file

    #include <iostream>
    #include <fstream>
    #include <vector>

    using namespace std;

    int main(){
        cout<<"Enter a word to check for the presence of any
        << of its permutation in a file \n"; 
        string word; 
        cin>>word; 
        sort(word.begin(), word.end()); 
        vector<string> str; 
        do str.push_back(word);
        while( next_permutation(word.begin(),word.end()) );                  

        ifstream readFile("list.txt");
        string line;
        while(readFile>>line){
              for (int i = 0; i < str.size(); ++i){
                  if(line==str[i]){
                     cout << "found " << str[i] << endl;
                     break;
                  }
              }
        }
        system("pause");
        return EXIT_SUCCESS;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:16:03.263

除非你的字典特别大（大到你不能把它全部保存在内存中），否则我会从字典中读取一个单词，创建一个副本并对副本中的字母进行排序，然后将它们添加到成对的向量中排序/原始单词。阅读完所有内容后，按排序后的单词对向量进行排序。

当您想检查字典是否包含（置换的）单词时，请对该单词进行排序，然后`std::equal_range`在您的向量上使用以查找与其匹配的所有单词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:18:20.573

你不需要做任何排列。

您只需对字典中每个单词的字符进行排序，然后与用户输入的字符串中的排序字符进行比较。它们可能匹配多个单词。您可以成对存储字典。我会这样做一次并将其存储以备后用。例如：

```
addpy paddy
orst sort
cet etc 
```

如果然后按第一个（排序的）单词对字典对进行排序，则可以使用二进制搜索快速找到排序的用户字符串，然后在两个方向上查找其他匹配的单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T07:14:06.283

1）您应该将要搜索的字符串存储在向量中。

```
vector<string> words_to_search;
sort(word.begin(), word.end()); 
do 
   words_to_search.push_back(word);
while (next_permutation(word.begin(), word.end())); 
```

然后你可以像这样循环它们

```
for (vector<string>::iterator i = words_to_search.begin();
     i != words_to_search.end(); ++i)
{
    string search_word = *i;
    // search for search_word
    ...
} 
```

2）要比较你的字符串，只需使用 ==

```
if (line == search) 
```

不过，您可能需要先删除前导空格和尾随空格`line`。

# java - 当空格后跟四位数字时添加标识符

> ID：13152866
> 
> 赞同：1
> 
> 时间：2012-10-31T07:05:00.883
> 
> 标签：java, android, regex, string

我正在处理一个字符串，

```
30-Nov-2012 30-Nov-2012 United Kingdom, 31-Oct-2012 31-Oct-2012 United Arab Emirates, 29-Oct-2012 31-Oct-2012 India 
```

每次在四位数字后出现空格时，我都需要添加空格，即：

```
30-Nov-2012@30-Nov-2012@United Kingdom, 31-Oct-2012@31-Oct-2012@United Arab Emirates, 29-Oct-2012@31-Oct-2012@India 
```

我不知道如何编写正则表达式，请帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:12:24.867

由于您不知道如何编写正则表达式，因此最好的选择是学习如何使用正则表达式。

这是一个很好的教程。

[http://www.vogella.com/articles/JavaRegularExpressions/article.html](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

你要写的表达式似乎不是很复杂。完成本教程后，您应该能够做到这一点。

编辑：这是另一个提示。看看[replaceAll](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll)

并看看[积极的回顾](http://www.regular-expressions.info/lookaround.html)

Edit2：我很无聊，所以这是答案。

```
string.replaceAll("(?<=\\d{4})\\s", "@"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:36:18.397

试试这个正则表达式：

```
(\d{4})\s+ 
```

用。。。来代替

```
$1@ 
```

和示例代码：

```
String result = inputString.replaceAll("(\\d{4})\\s+", "$1@"); 
```

解释：

> ***`\d`*** 匹配任何十进制数字。
> 
> ***`{n}`*** 精确匹配前一个元素的`n`次数。
> 
> ***`\s`*** 匹配任何`white-space`字符。
> 
> ***`+`*** 匹配前一个元素一次或多次。
> 
> ***`(subexpression)`*** 捕获匹配的子表达式并为其分配一个从零开始的序数。
> 
> ***`$ number`*** 替换与组号匹配的子字符串。

# java - 页面重定向在 selenium 中的 favicon.ico 上进行

> ID：13152873
> 
> 赞同：3
> 
> 时间：2012-10-31T07:05:32.393
> 
> 标签：java, selenium

我正在编写一个 selenium 测试，我正在检查网站的 UI 和功能。在功能中，我在输入块中输入用户名和密码，并希望单击登录按钮。除了登录按钮外，一切正常。点击也是发生，但它不会重定向到正确的页面。它总是重定向

> [http://vma-dev.saas.trilogy.com/favicon.ico](http://vma-dev.saas.trilogy.com/favicon.ico) " 其中 [http://vma-dev.saas.trilogy.com](http://vma-dev.saas.trilogy.com)是我的基本网址。我正在使用以下代码.. 使用以下功能登录。 .

```
public void getLogin() throws InterruptedException 
{
    enterTextValueByElementNameInWindow(getBaseElement(),AppConstants.Html_Id_Common_Text_User ,AppConstants.USER_VAL);
    //getBaseElement().keyUp(AppConstants.Html_Id_Common_Text_User,"m");
    enterTextValueByElementNameInWindow(getBaseElement(),AppConstants.Html_Id_Common_Text_PWD ,AppConstants.PASSWORD_VAL);
    //getBaseElement().keyUp(AppConstants.Html_Id_Common_Text_PWD,"3");
    clickByElementInWindow(getBaseElement(), AppConstants.Html_Id_Common_Btn_Text_SignIn, true);
    try
    {
        getBaseElement().wait(10000);
    }
    catch(IllegalMonitorStateException ie)
    {

    }

} 
```

并单击登录按钮，我正在使用以下功能..

```
public static void clickByElementInWindow(LoggingSelenium appWindow, String element, boolean waitForPageLoad) 
{
    LoggingAssert.assertTrue("Button Element " + element + " cannot be located",appWindow.isElementPresent(element), appWindow);
    LoggingAssert.assertTrue("Button Element " + element + " is not visible",appWindow.isVisible(element), appWindow);
    appWindow.click(element);
    appWindow.setSpeed("500");
    if (waitForPageLoad){
        // wait for page to be ready
        // appWindow.waitForPageToLoad(Integer.toString(AppConstants.APP_READY_TIME));

        // sometimes page doesn't get loaded even with waitForPageToLoad. Use sleep to be safe. 
        try
        {    
            Thread.sleep(AppConstants.APP_PAGE_LOAD_WAIT_TIME);    
        }
        catch(InterruptedException ie)
        {
            // do nothing
        }
    }
} 
```

我被严重困在这里。任何帮助都会得到帮助。

# css - 活动 CSS 菜单选项卡

> ID：13152874
> 
> 赞同：0
> 
> 时间：2012-10-31T07:05:34.827
> 
> 标签：css, codeigniter

我一直在阅读此链接[Active menu tabs with codeigniter](https://stackoverflow.com/questions/6511558/active-menu-tabs-with-codeigniter)，它可以工作，但是如果链接是这样的呢`domain.com/mycontroller/myfunction/id`

例如`menu A`-> `domanin.com/A/a/1`、`menu A`->`domanin.com/A/b/1`等。突出显示的活动类位于“A”控制器上。

谢谢你

**已编辑**

下面是我的模板视图代码

```
 <?php foreach ($menu as $row): ?>
 <li <?php if($this->uri->uri_string(2) == url_title($row->menu,'/detail_product/',TRUE)):?>class="active"<?php endif;?>><?php echo anchor('/'.$row->link,$row->menu); ?></li>
 <?php endforeach; ?> 
```

这是我的控制器代码

```
public function index()
{
    $data['content'] = 'home/garagebox';
    $data['menu'] = $this->auction_model->load_menu();

    $this->load->view('template',$data);
} 
```

我的菜单是这样的，

主页 | 拍卖 | 消息

我有产品，当我选择一个时，它会指向这个链接`http://domain.com/index.php/auction/detail_product/1`，因为这个链接在拍卖菜单下，所以在拍卖菜单上它应该突出显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:36:10.283

链接 1 | 链接 2 | ...

首先，您需要在控制器文件中设置一个变量，例如。

```
 $data['selected_menu'] = 'link1';
 $this->load->view('your view file',$data); //and send $data variable to your view file. 
```

在视图文件中，您只需检查值：

```
 if($selected_menu == 'link1')
      //highlight link. 
```

与所有控制器相同，即方法/功能。

# jquery - 你可以在 jQuery/javascript 中结合 ctrl 和 mouseenter 吗？

> ID：13152876
> 
> 赞同：2
> 
> 时间：2012-10-31T07:05:39.793
> 
> 标签：jquery, keypress, ctrl

我正在用 jQuery 制作一个小游戏，我想知道是否可以在按下鼠标悬停和/或鼠标输入时触发事件`Ctrl`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T07:15:13.540

bind`mouseenter`和`keypress`event 为您希望事情解决的元素。

```
$( "#id_of_element" ).bind('mouseenter keypress', function(event) {
if (event.ctrlKey)//check if cntrl key is pressed
{
//your code here
}
}); 
```

# file - 适合许多小文件的良好文件系统和/或存档系统

> ID：13152881
> 
> 赞同：0
> 
> 时间：2012-10-31T07:05:55.553
> 
> 标签：file, filesystems, storage, inode

我正在寻找存储许多（5 亿 - 9 亿）小（2kB-9kB）文件。

大多数通用文件系统似乎不适合这种情况，因为它们要么无法处理大量文件，要么因文件过多而速度变慢，要么具有非常大的块大小。

这似乎是一个常见问题，但是当将小文件存储在与自身大小大致相同的 inode 上时，我能找到的所有解决方案似乎最终都会受到存储效率的影响。

**因此**

是否有专门设计用于处理数亿个小文件的文件系统？

**或者**

是否有生产级解决方案可以即时归档小文件并将一个大文件写入磁盘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:21:23.677

我们的 SolFS 支持低至 512 字节的页面大小，并允许您在文件中创建虚拟文件系统，从而将所有文件合并到一个存储文件中。但是，性能取决于文件的存储方式（分层或在一个文件夹中），并且通常特定于使用场景。

# sql - 通过选择查询在表中插入一行

> ID：13152887
> 
> 赞同：2
> 
> 时间：2012-10-31T07:06:26.440
> 
> 标签：sql, sql-server

我在 My Sql Server 中使用了两个存储过程和两个表。

第一个表结构。

![在此处输入图像描述](../Images/b8ed871c377bd668530f20e09ac464ec.png)

第二个表结构。

![在此处输入图像描述](../Images/b20e7b9e656e218b2c827bf4a44e8a1e.png)

当客户预订订单时，数据将插入表 1。

我在另一个页面中使用选择查询，它从第二个表中选择详细信息。

如果第二个表中不存在第一个表中带有 billno 的行，我想在选择查询中插入带有一些默认值的第二个表。我怎样才能做到这一点 ？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T07:32:19.177

如果要在同一个查询中插入，则必须创建一个存储过程。在那里，您将查询第二个表中是否存在行，如果不存在，则在第二个表中插入一个新实体。

您的代码应如下所示：

```
-- --------------------------------------------------------------------------------
-- Routine DDL
-- Note: comments before and after the routine body will not be stored by the server
-- --------------------------------------------------------------------------------
DELIMITER $$

CREATE DEFINER=`table`@`%` PROCEDURE `insertBill`(IN billNo int, val1 int, val2 int, val3 int)
BEGIN
    DECLARE totalres INT DEFAULT 0;
     select count(*) from SECOND_TABLE where Bill_Number = billNo INTO totalres;
        IF totalres < 1 THEN
            INSERT into SECOND_TABLE values(val1,val2,val3);
        END IF;
END 
```

Val1、val2 和 val3 是要插入到第二个表中的值。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T07:17:23.163

你要做的是`LEFT JOIN`对这两个表，然后只选择第二个表没有要加入的行，这意味着账单号丢失了。在下面的示例中，您可以将`@default_inform_status`和 @default_response_status 替换为您的默认值。

```
INSERT INTO second_table (Bill_Number, Rest_Inform_Status, Rest_Response_Status)
SELECT ft.Bill_Number, @default_inform_status, @default_response_status
FROM first_table ft
LEFT JOIN second_table st
  ON st.Bill_Number = ft.Bill_number
WHERE st.Bill_Number IS NULL 
```

如果`Bill_Number`第一个表中可能有相同的重复项，您还应该`DISTINCT`在`SELECT`. 但是考虑到它是主键这一事实，这对您来说不是问题。

# .net - 从缓存加载 MEF 程序集？

> ID：13152889
> 
> 赞同：0
> 
> 时间：2012-10-31T07:06:44.693
> 
> 标签：.net, plugins, mef

我有一个通过 MEF 加载插件的应用程序。

该应用程序在终端服务器上的多个实例中运行。

当我需要在生产环境中测试新插件时，我会将 MEF 重定向到另一个文件夹。**问题是有时即使在重定向之后程序集也会从原始文件夹加载。** 它不会每次都发生，我无法在我的机器上重现它。我怀疑这是某种缓存问题。

MEF 加载代码如下所示：

```
using (var catalog = new AggregateCatalog()) {

    Console.WriteLine("Loading components from {0}", folder);

    catalog.Catalogs.Add(new DirectoryCatalog(folder, "*.dll"));

    using (var container = new CompositionContainer(catalog)) {
        try {
            container.ComposeParts(this);
        }
        catch (ReflectionTypeLoadException ex) {
            foreach (var loaderException in ex.LoaderExceptions) {
               // log loading error
    }
}

foreach (var assembly in _allComponents.GroupBy(x => x.GetType().Assembly)) {
    Console.WriteLine("Loaded from {0}", assembly.Key.CodeBase);
} 
```

上面代码的结果看起来像

```
Loading components from C:\NewPlugins
Loaded from C:\OldPlugins 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:53:18.223

因为根据您的评论，您在两个目录中都有具有相同标识的程序集，所以上面代码的输出是正常的。这不是问题`DirectoryCatalog`。它确实会加载尝试从特定目录加载程序集，但如果当前`AppDomain`. 从哪里加载程序集并不重要，重要的是身份。

解决方案是使您的程序集具有强名称，并在您创建插件更新时增加版本。这样，*NewPlugins目录中的程序集将与已从**OldPlugins*目录中加载的程序集具有不同的标识。

如果您有兴趣了解如何加载程序集，请查看[Suzanne Cook 的](http://blogs.msdn.com/b/suzcook/?Redirected=true)关于程序集加载的博客条目。

# ios - 编译器错误：没有要编译的架构（ARCH = i386 ValidArch：Armv6 Armv7）

> ID：13152892
> 
> 赞同：2
> 
> 时间：2012-10-31T07:06:52.940
> 
> 标签：ios, xcode, xcode4, ios-simulator, xcode4.5

当我尝试在 Xcode 4.0.1 版上构建项目时，它会出现编译器错误。

```
 [BEROR]No architectures to compile for (ARCHS=i386, VALID_ARCHS=armv6 armv7) 
```

所以，我按照以下程序使项目运行

```
 1\. Add i386 to valid archs
    2\. Set Architecture as standard (armv6,armv7) 
    3\. Set Buil valid architecture only - NO
    4\. Clean 
    5\. Build 
```

但是，我现在收到以下错误

**无法解析“example.xib”的 Interface Builder 插件依赖项。Xcode 4 缺少加载以下类所需的组件：IBNSLayoutConstraint。确保已正确安装 Xcode。**

谁能帮我理解问题并解决它？

# sorting - 快速排序 - 无法识别枢轴

> ID：13152895
> 
> 赞同：1
> 
> 时间：2012-10-31T07:07:05.723
> 
> 标签：sorting, quicksort

我试图理解快速排序，我得到了一般的想法，但我在下面的问题上遇到了麻烦。有没有一种简单的方法可以在每次迭代后根据数组来识别正在使用哪个枢轴？

```
Consider the following array and its state after iterations of QuickSort on the array: 

Initial Array: 32, 12, 17, 73, 40, 88, 16, 75 
After Iter 1: 32, 12, 17, 40, 16, 73, 88, 75 
After Iter 2: 12, 16, 17, 40, 32, 73, 88, 75 
After Iter 3: 12, 16, 17, 40, 32, 73, 88, 75 
After Iter 4: 12, 16, 17, 32, 40, 73, 88, 75 
After Iter 5: 12, 16, 17, 32, 40, 73, 75, 88 
```

命名此快速排序执行中使用的枢轴选择策略。

提示：检查在每个阶段选择什么值作为枢轴。请记住，快速排序首先对左子数组及其左子数组进行递归排序，然后再对右子数组进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:09:39.483

选择任何元素作为枢轴，然后在第一次迭代中，所有小于枢轴的元素都放在枢轴的左侧，如果它们已经不是，则放在右侧。这意味着如果需要，也可以在阵列中提前交换枢轴。了解这一点并查看迭代应该有助于确定枢轴。

例如，在您的上述情况下，我相信中间元素被选为枢轴，即 73。第一次迭代后，所有小于它的元素都被移动到左边，大于它的元素都被移动到右边。

# php - 在php中写一行

> ID：13152901
> 
> 赞同：-5
> 
> 时间：2012-10-31T07:07:34.330
> 
> 标签：php, html

我想用完全 php 语法编写一个 php 代码。html代码也应该用php编写。我很努力地写这个但失败了。任何人都可以帮助解决这个问题。请立即告诉我写语法。注意：base_url 和 slugify 是函数。现在请看这段代码。我让你现在更容易理解

```
 <?php
    while ($row = mysql_fetch_array($result_pag_data)) 
{ 
$htmlmsg=htmlentities($row['Name']); //HTML entries filter
//$msg .= "<li><b>" . $row['Sku'] . "</b> " . $htmlmsg . "</li>";
$msg .= "<div class='deal'><div class='deal-left'>
        <img src=".$row["ImageURL"]." width='100px'/>
    </div>
    <div class='deal-right'>
//------- I want below line in correct syntan of php. Right Now is not a right syntax.
        <h2><a href='base_url'deals/'slugify".$row['Merchant']."'/'slugify".$row['Name']."'/'".$row['id']."'>".substr($row['Name'], 0,50)."</a></h2>
//--------
        <div class='deal-info'>SKU</div>
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:11:52.177

```
echo '<a href="'.base_url.'deals/'.slugify($row['Merchant']).'/'.slugify($row['Name']).'/'.$row['id'].'">'.substr($row['Name'], 0,33).'...</a></h2>' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:11:54.827

有时它有助于将事物分解成不同的部分以提高可读性。您还可以尝试使用[Slim PHP 之](http://www.slimframework.com)类的框架将业务逻辑与表示层分离。请再次观看此代码，然后根据我的需要进行更正。

```
<?php
   $url = base_url('deals/' . slugify($row['Merchant']) . 
        '/' . slugify($row['Name']) . $row['id'] );
?>
<h2>
   <a href="<?php echo $url; ?>"><?php echo substr($row['Name'], 0,33); ?></a>
</h2> 
```

一行php代码（虽然丑陋的IMO）：

```
 <?php
  echo '<a href="' . base_url('deals/' . slugify($row['Merchant']) . '/' . slugify($row['Name']) . $row['id']) . '">' . substr($row['Name'], 0,33) . '</a>';
 ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T07:12:16.073

如果您将 html 代码包装在 php 中会更好，
例如
，而不是

```
<h1><a href="<?php echo base_url.deals> 
```

写

```
<?php echo"<h1>"."<a href='linkdiscription'>"; 
```

这会更好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T07:32:30.627

> 我想用完全 php 语法编写一个 php 代码。html代码也应该用php编写。

```
<?php
$row['Merchant'] = 'Merchant';
$row['Name']     = 'Name';
$row['id']       = 'Id';

echo chr(60).chr(104).chr(50).chr(62).chr(60).
     chr(97).chr(32).chr(104).chr(114).chr(101).
     chr(102).chr(61).chr(34).chr(100).
     chr(101).chr(97).chr(108).chr(115).chr(47).
     $row['Merchant'].chr(47).$row['Name'].chr(47).
     $row['id'].chr(34).chr(62).chr(32).
     substr($row['Name'],0,33).chr(46).chr(46).
     chr(46).chr(32).chr(60).chr(47).chr(97).
     chr(62).chr(60).chr(47).chr(104).chr(50).chr(62);
?> 
```

[http://codepad.org/9zXlGbzW](http://codepad.org/9zXlGbzW)

对不起，我忍不住...;p

# c# - 想要将日期时间转换为 mm/yyyy 等格式

> ID：13152910
> 
> 赞同：0
> 
> 时间：2012-10-31T07:08:11.340
> 
> 标签：c#, datetime

我想以字符串形式获取日期时间对象，例如“mm/yyyy”

```
ViewBag.Created = d.item.StartDate.ToString("mm/yyyy"); 
```

但我得到的字符串是 10-2012。请帮助我克服这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:09:36.293

月份的格式，应该是`MM`，`mm`是分钟

```
 ViewBag.Created = d.item.StartDate.ToString("MM/yyyy", 
                                              CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T07:09:49.530

`mm`是分钟，并且`/`是**特定于区域性的**日期分隔符。这听起来像在当前的文化中，`-`是日期分隔符。我怀疑你想要`MM/yyyy`使用不变的文化，它`/`作为分隔符：

```
ViewBag.Created = d.item.StartDate.ToString("MM/yyyy",
                                            CultureInfo.InvariantCulture); 
```

或者，您可以只引用斜线：

```
ViewBag.Created = d.item.StartDate.ToString("MM'/'yyyy"); 
```

请注意，如果当前区域性使用非公历，则此差异*也会更改月份和年份数字。*

有关更多详细信息，请参阅[有关自定义日期和时间格式说明符的 MSDN 页面](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。

您确定要修复*所有*文化的格式吗？不幸的是，没有办法说“给我一个适合文化的月份和年份格式”，但你至少需要意识到这对某些人来说可能看起来很奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T07:11:35.287

您可以使用

```
ViewBag.Created = d.item.StartDate.ToString(@"MM\/yyyy"); 
```

# php - 分两步接收ajax响应

> ID：13152911
> 
> 赞同：2
> 
> 时间：2012-10-31T07:08:23.397
> 
> 标签：php, ajax

在我的项目中，用户输入后，会向服务器发送一个 AJAX 调用，但该过程可能需要几秒钟才能完成，用户等待很无聊。

所以我想分两步给出回应。第一步将返回更重要的数据，然后完成其余过程，最后应返回其余数据。

首先，我尝试进行两次 ajax 调用，但它产生了一些额外的问题，这使其成为一个坏主意。

这是否可以分两步给出ajax响应并更新页面，或者是否有其他类型的技术来处理这项工作？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:17:01.860

在第一个 ajax 请求的回调函数中，您启动第二个。

不要同时启动两个，因为一次只执行一个（如果您使用会话服务器端）并且哪个是第一个或多或少是随机的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:39:15.963

正如[Niko Sams](https://stackoverflow.com/a/13153028/920303)所解释的，您可以将第二个 AJAX 调用放在第一个的成功回调中。

**其他解决方案**

看看这个：
[两个快速的 AJAX 调用混淆 PHP](https://stackoverflow.com/questions/1491228/two-rapid-ajax-calls-confuses-php)
也许这可以解决你的两个 AJAX 调用的问题。

[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)
或者您可以在一次 AJAX 调用成功后使用 .trigger() 触发事件，并使用 .on() 方法添加事件侦听器。

# hibernate - Liquibase 和 Hibernate JPA for PostgreSQL 和 H2 之间的序列名称不兼容

> ID：13152918
> 
> 赞同：5
> 
> 时间：2012-10-31T07:09:09.513
> 
> 标签：hibernate, postgresql, jpa, h2, liquibase

我有一个使用标准 Hibernate JPA 和 Liquibase 运行的应用程序来生成数据库。我在运行时使用 H2 进行测试和 PostgreSQL。

我的问题是我似乎无法让这个设置很好地用于生成序列的主键。

当我有这样的实体 id 时：

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id; 
```

并使用 liquibase 创建数据库，如下所示：

```
<column name="id" type="BIGINT" autoIncrement="true" incrementBy="1">
    <constraints nullable="false" primaryKey="true" />
</column> 
```

它在 H2 中运行良好，但对于 PostgreSQL Hibernate 抱怨它是：

```
"Missing sequence or table: hibernate_sequence" 
```

我可以通过将 JPA @GeneratedValue 更改为以下内容来为 PostgreSQL 修复此问题：

```
@Id
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "text_id_seq")
@SequenceGenerator(name = "text_id_seq", sequenceName = "text_id_seq", allocationSize = 1)
private Long id; 
```

但是现在 H2 序列与 Hibernate 所期望的不匹配。

似乎没有任何简单的方法可以确保 Liquibase 具有特定名称的序列。我该怎么做才能使此设置正常工作？

我看起来像我目前正在运行

*   liquibase.version 2.0.4
*   休眠 4.1.7
*   postgres 驱动程序 9.1-901.jdbc3
*   postgres 9.2.1（至少在本地）
*   h2 1.3.168

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T11:29:30.030

使用`GenerationType.IDENTITY`. 这应该适用于大多数数据库。

在我看来，身份生成是 JPA 的缺点之一。根据您正在使用的数据库等设置生成选项的全局覆盖太难了。在注释中执行此操作很难以编程方式进行调整。

Hibernate 的怪异`hibernate_sequence`特别痛苦。为什么它不使用 PostgreSQL 默认序列来生成列，这超出了我的理解。

# hbase - 计算 HBASE 中的对象数量并通过电子邮件发送计数

> ID：13152921
> 
> 赞同：0
> 
> 时间：2012-10-31T07:09:26.207
> 
> 标签：hbase, couchbase

我是 HBASE 的新手 1.如何获取 HBASE 中的对象数和 2.想要将该计数存储在 sql server 数据库中 有人可以帮我吗？

谢谢和问候， Karthik

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:41:29.230

在 HBase 中计算行数不像在 SQL 数据库中那样容易，您需要创建一个 MapReduce 作业并运行它，并且需要一些时间。

您可以使用以下命令从 HBase shell 执行此操作

```
count 'tableName' 
```

或使用 hadoop 运行作业：

```
hadoop jar hbase.jar rowcount 
```

之后（您可以通过 shell 脚本调用它，并在运行时返回部分计数，请参阅[HBase wiki](https://wiki.apache.org/hadoop/Hbase/Shell)），并将其写入本地文件，然后读取并将其保存在 SQL 数据库或任何地方。

如果您的应用程序仅在一个节点上并且它是唯一的修饰符，则可以只使用内部管理的计数器（当您添加一行时整数增加，删除一行时整数减少）来避免该问题。

# jquery - 如何在更改事件中使用收音机？

> ID：13152927
> 
> 赞同：575
> 
> 时间：2012-10-31T07:09:53.890
> 
> 标签：jquery, jquery-ui

我在更改事件上有两个单选按钮我想要更改按钮这怎么可能？我的代码

```
<input type="radio" name="bedStatus" id="allot" checked="checked" value="allot">Allot
<input type="radio" name="bedStatus" id="transfer" value="transfer">Transfer 
```

脚本

```
<script>
    $(document).ready(function () {
        $('input:radio[name=bedStatus]:checked').change(function () {
            if ($("input[name='bedStatus']:checked").val() == 'allot') {
                alert("Allot Thai Gayo Bhai");
            }
            if ($("input[name='bedStatus']:checked").val() == 'transfer') {
                alert("Transfer Thai Gayo");
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1118
> 
> 时间：2012-10-31T07:13:26.520

您可以使用`this`which 引用当前`input`元素。

```
$('input[type=radio][name=bedStatus]').change(function() {
    if (this.value == 'allot') {
        alert("Allot Thai Gayo Bhai");
    }
    else if (this.value == 'transfer') {
        alert("Transfer Thai Gayo");
    }
}); 
```

[http://jsfiddle.net/4gZAT/](http://jsfiddle.net/4gZAT/)

请注意，您正在比较`allot`if 语句和`:radio`选择器中的值已弃用。

如果你不使用 jQuery，你可以使用`document.querySelectorAll`and`HTMLElement.addEventListener`方法：

```
var radios = document.querySelectorAll('input[type=radio][name="bedStatus"]');

function changeHandler(event) {
   if ( this.value === 'allot' ) {
     console.log('value', 'allot');
   } else if ( this.value === 'transfer' ) {
      console.log('value', 'transfer');
   }  
}

Array.prototype.forEach.call(radios, function(radio) {
   radio.addEventListener('change', changeHandler);
}); 
```

* * *

## 回答 #2

> 赞同：160
> 
> 时间：2012-10-31T07:16:11.150

对上述答案的改编......

```
$('input[type=radio][name=bedStatus]').on('change', function() {
  switch ($(this).val()) {
    case 'allot':
      alert("Allot Thai Gayo Bhai");
      break;
    case 'transfer':
      alert("Transfer Thai Gayo");
      break;
  }
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<input type="radio" name="bedStatus" id="allot" checked="checked" value="allot">Allot
<input type="radio" name="bedStatus" id="transfer" value="transfer">Transfer
```

[http://jsfiddle.net/xwYx9](http://jsfiddle.net/xwYx9)

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2015-09-17T09:48:05.437

一种更简单、更干净的方法是使用带有@Ohgodwhy 答案的类

```
<input ... class="rButton">
<input ... class="rButton"> 
```

脚本

```
​$( ".rButton" ).change(function() {
    switch($(this).val()) {
        case 'allot' :
            alert("Allot Thai Gayo Bhai");
            break;
        case 'transfer' :
            alert("Transfer Thai Gayo");
            break;
    }            
});​ 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2014-08-08T13:27:18.323

```
$(document).ready(function () {
    $('#allot').click(function () {
        if ($(this).is(':checked')) {
            alert("Allot Thai Gayo Bhai");
        }
    });

    $('#transfer').click(function () {
        if ($(this).is(':checked')) {
            alert("Transfer Thai Gayo");
        }
    });
}); 
```

[JS小提琴](http://jsfiddle.net/4gZAT/135/)

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2018-11-03T18:03:27.333

简单的**ES6** *（仅限 JavaScript）*解决方案。

```
document.forms.demo.bedStatus.forEach(radio => {
  radio.addEventListener('change', () => {
    alert(`${document.forms.demo.bedStatus.value} Thai Gayo`);
  })
});
```

```
<form name="demo">
  <input type="radio" name="bedStatus" value="Allot" checked>Allot
  <input type="radio" name="bedStatus" value="Transfer">Transfer
</form>
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2018-01-29T05:30:47.597

使用**onchage**功能

```
<input type="radio" name="bedStatus" id="allot" checked="checked" value="allot" onchange="my_function('allot')">Allot
<input type="radio" name="bedStatus" id="transfer" value="transfer" onchange="my_function('transfer')">Transfer

<script>
 function my_function(val){
    alert(val);
 }
</script> 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-04-23T10:15:54.933

```
document.addEventListener('DOMContentLoaded', () => {
  const els = document.querySelectorAll('[name="bedStatus"]');

  const capitalize = (str) =>
    `${str.charAt(0).toUpperCase()}${str.slice(1)}`;

  const handler = (e) => alert(
    `${capitalize(e.target.value)} Thai Gayo${e.target.value === 'allot' ? ' Bhai' : ''}`
  );

  els.forEach((el) => {
    el.addEventListener('change', handler);
  });
}); 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-01-30T23:37:37.960

如果单选按钮是动态添加的，您可能希望使用这个

```
$(document).on('change', 'input[type=radio][name=bedStatus]', function (event) {
    switch($(this).val()) {
      case 'allot' :
        alert("Allot Thai Gayo Bhai");
        break;
      case 'transfer' :
        alert("Transfer Thai Gayo");
        break;
    }     
}); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-11-23T06:03:13.893

```
<input type="radio" name="radio"  value="upi">upi
<input type="radio" name="radio"  value="bankAcc">Bank

<script type="text/javascript">
$(document).ready(function() {
 $('input[type=radio][name=radio]').change(function() {
   if (this.value == 'upi') {
    //write your logic here

    }
  else if (this.value == 'bankAcc') {
    //write your logic here
 }
 });
 </script> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-02-19T06:29:49.710

```
$(document).ready(function () {
    $('input:radio[name=bedStatus]:checked').change(function () {
        if ($("input:radio[name='bedStatus']:checked").val() == 'allot') {
            alert("Allot Thai Gayo Bhai");
        }
        if ($("input:radio[name='bedStatus']:checked").val() == 'transfer') {
            alert("Transfer Thai Gayo");
        }
    });
}); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-06T14:50:27.373

将类“pnradio”添加到单选按钮，然后使用 .attr('id') 进行切换

```
<input type="radio" id="sampleradio1" class="pnradio" />
<input type="radio" id="sampleradio2" class="pnradio" />
    $('.pnradio').click(function() {
          switch ($(this).attr('id')) {
            case 'sampleradio1':
              alert("xxx");
              break;
            case 'sampleradio2':
              alert("xxx");
              break;
          }
        }); 
```

# c# - .CSProj 和 .Sln 文件有什么用？

> ID：13152933
> 
> 赞同：19
> 
> 时间：2012-10-31T07:10:09.590
> 
> 标签：c#, asp.net, visual-studio

我搜索了很多关于**.csproj 和 .sln**的信息。我现在知道的是 .Csproj 文件包含 info ab 项目，而 .sln 文件包含解决方案中所有项目的 info ab。

我的问题是它们包含哪些信息，任何实际示例都会真正有帮助。

下面的陈述对吗？

**我们在 Web 应用程序中有 .csproj 而不是在网站中？**

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T07:25:55.307

哈比卜说的对你来说是最好的。当您打开 CSPROJ 或 SLN 文件时，您会发现一个 XML 文件（存储为 TEXT），其中包含大量关于

1.  如何构建项目及其设置。
2.  项目引用的程序集。
3.  MSBuild 信息和命令：MSBuild 是一个框架，允许开发人员使用他们在 MSBuild 文件（例如项目文件本身）中指定的命令自定义构建过程。例如，如果您希望项目在每次构建时都以自定义方式处理文件，则使用 MSBuild，您可以将其放入您的 CSProject 文件中。

一个 web 项目有一个引用，也可以有自定义构建操作，这就是为什么应该有一个项目文件。此外，这样的项目包含文件，项目文件列出了这些文件以及如何构建/编译它们。这与其他 IDE 中基于文件的项目不同，在 Visual Studio 中，您可以在项目文件夹中拥有*不*属于该项目的文件。

关于您关于网站和 Web 项目的问题，这里有一个关于[Web 应用程序项目与 Visual Studio 中的网站项目](http://msdn.microsoft.com/en-us/library/dd547590.aspx)的链接，以及关于在网站中包含哪些文件（*没有*项目文件）它说：

> 对于网站项目，文件夹结构中的所有文件都被自动视为包含在网站中。如果要从编译中排除某些内容，则必须从网站项目文件夹中删除该文件或将其文件扩展名更改为未编译且不由 IIS 提供的扩展名。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T07:26:28.020

对于解决方案 ( ) 文件的内容，您可以在这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/bb165951%28v=vs.80%29.aspx)`.sln`中找到很多信息。

关于 Project ( `.csproj`) 文件内容，[这里是另一篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/2208a1f2.aspx)，描述了 C++ Visual Studio 2012 项目中的内容，它非常接近 C# 项目，这里是[Visual Studio 2012 项目](http://msdn.microsoft.com/en-us/library/s17bt45e%28v=vs.100%29.aspx)介绍。

# apache-flex - 如何在 Flex 4.6 中的 TextInput 内放置按钮

> ID：13152937
> 
> 赞同：1
> 
> 时间：2012-10-31T07:10:40.683
> 
> 标签：apache-flex, flex4, flex4.5, flex4.6

我想在 TextInput 中添加带有图像的按钮，如下图所示

![在此处输入图像描述](../Images/5781326301497af7fbbe53af18d4ec49.png)

请建议我这样做的清晰方法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:08:02.893

所需的方法是创建扩展 Flex`TextInput`控件的自定义组件。您可以根据标准创建自定义皮肤`TextInputSkin`并将图标放置在该皮肤中。

[编辑]

不完全是你想要的。但这可能会帮助你..

[http://saturnboy.com/2010/07/supertextinput-building-a-custom-component/](http://saturnboy.com/2010/07/supertextinput-building-a-custom-component/)

# html - 如何在页面右侧显示购物车

> ID：13152944
> 
> 赞同：0
> 
> 时间：2012-10-31T07:11:06.597
> 
> 标签：html, css

我正在学习如何使用 HTML 和 css，想在右侧的 menu1、menu2、menu3、menu 4 栏的正下方添加一个购物车，但不知道怎么做，我正在尝试做一个 .在 css 中的描述定义但没有运气我有一个模拟，当然我不能上传图像文件夹中的图像...... [http://cssizer.com/build/preview/wzNqVAyI](http://cssizer.com/build/preview/wzNqVAyI) 这里是源 [http： //cssizer.com/JKQLGFIM](http://cssizer.com/JKQLGFIM)

所以我试图让描述定义出现在菜单栏的正下方，然后是购物车的图像，但不知道如何定义好，我应该如何修改代码以获得这样的东西

![在此处输入图像描述](../Images/2d1f37225845b786eb4a2e32f217adc2.png)

代替

![在此处输入图像描述](../Images/4c8b6bd1e566e8fbfc15a76462609524.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:17:04.393

嗨，现在添加`overflow:hidden`您的`#nav id`

像这样

```
#nav{
overflow:hidden;
} 
```

**[*结果是](http://i.stack.imgur.com/YqONm.png)*****

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:03:16.067

如果您想在网站右侧添加购物车图标，请听 html 代码。

```
<div id="head">
<div id="head-one">
<h1>TOM TOC</h1>
<h2>Slogan de </h2></div>
<div id="head-two"><img src="http://c.dryicons.com/images/icon_sets/stickers_icon_set/png/64x64/shopping_cart.png" /></div>
<div class="clear"></div>
</div> 
```

听到的是css代码。

```
#head-one{float:left; width:700px;} 
#head-two{float:right; width:70px;} 
.clear{clear:both;} 
```

猜猜它对你有帮助。

# spring - 什么是 OncePerRequestFilter？

> ID：13152946
> 
> 赞同：90
> 
> 时间：2012-10-31T07:11:20.637
> 
> 标签：spring

文档说`org.springframework.web.filter.OncePerRequestFilter`“*保证每个请求只执行一次*”。在什么情况下，每个请求可能会多次执行过滤器？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-10-31T07:16:36.133

> 在什么情况下，每个请求可能会多次执行过滤器？

您可以在过滤器链上多次使用过滤器。

可以使用请求分派器将请求分派到不同（或相同）的 servlet。

* * *

一个常见的用例是在 Spring Security 中，其中身份验证和访问控制功能通常作为位于主应用程序 servlet 前面的过滤器来实现。当使用请求分派器分派请求时，它必须再次通过过滤器链（或者可能是另一个过滤器链），然后才能到达将要处理它的 servlet。问题是某些安全过滤器操作应该只对请求执行一次。因此需要*这个*过滤器。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2018-08-21T04:19:56.027

要了解*OncePerRequestFilter*的作用，我们首先需要清楚地了解普通过滤器的行为方式。当您希望在 servlet 执行之前或之后执行某些特定代码时，您可以创建一个过滤器，其工作方式如下：

```
code1   ===>   servlet execution (using chain.doFilter())   ===>    code2 
```

所以code1在servlet之前执行，code2在servlet执行之后执行。但是在这里，当 servlet 执行时，可能会有一些其他请求到不同的 servlet，并且不同的 servlet 也具有相同的过滤器。*在这种情况下，此过滤器将再次执行。*

*OncePerRequestFilter*阻止了这种行为。对于我们的一个请求，此过滤器将只执行一次（不多不少）。在使用安全身份验证时，此行为非常有用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-01-16T08:36:35.943

在 Servlet 3.0 环境中引入了一种特殊的 GenericFilterBean。这个版本增加了在单独的线程中处理请求的可能性。为了避免这种情况下执行多个过滤器，Spring Web 项目定义了一种特殊的过滤器，OncePerRequestFilter。它直接扩展了 GenericFilterBean，并且作为这个类，位于 org.springframework.web.filter 包中。OncePerRequestFilter 定义了 doFilter 方法。在它内部，通过在请求的参数中查找对应于 true 的“${className}.FILTER”属性来检查是否已经应用了给定的过滤器。此外，它定义了一个抽象的 doFilterInternal((HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) 方法。它的实现将包含由给定过滤器执行的代码，如果过滤器没有'

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-10-12T17:14:17.650

> 在什么情况下，每个请求可能会多次执行过滤器？

* * *

过滤器可以作为 REQUEST 或 ASYNC 调度的一部分被调用，这些调度发生在单独的线程中。我们应该使用 OncePerRequestFilter，因为我们正在执行数据库调用来检索主体或经过身份验证的用户，多次这样做是没有意义的。之后，我们将主体设置为安全上下文。

```
Authentication auth = jwtTokenProvider.getAuthentication(token);
SecurityContextHolder.getContext().setAuthentication(auth); 
```

其中 jwtTokenProvider 是您从 jwt 令牌获取身份验证的服务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-26T05:53:19.127

OncePerRequestFilter 实现逻辑以确保每个请求只执行一次过滤器的 doFilter() 方法。

# android - 没有得到格式化的文本

> ID：13152958
> 
> 赞同：0
> 
> 时间：2012-10-31T07:12:26.790
> 
> 标签：android

我正在尝试读取 .txt 文件。但在文本视图中，文本未格式化。我，即使我已经给出了新行，文本视图中也没有新行。句子是连续的。可以格式化吗？代码是这样的

```
final StringBuffer buffer = new StringBuffer();

    try{
        DataInputStream dataIO= new DataInputStream(getResources().openRawResource(R.raw.chapter1));
        String strLine= null;
        while((strLine = dataIO.readLine())!=null){
            buffer.append(strLine);
        }
        dataIO.close();
    }catch(Exception e){

    }
    TextView tv=(TextView) findViewById(R.id.chapter);
    tv.setText(buffer.toString());

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T07:22:35.043

参考[DataInputStream.readLine()的文档](http://developer.android.com/reference/java/io/DataInputStream.html#readLine%28%29)

> 该字符串不包括换行符序列。

因此`strLine`，您附加到的`StringBuffer`将不​​包含换行符。您可以按如下方式修改您的代码：

```
 while((strLine = dataIO.readLine())!=null){
        buffer.append(strLine);
        buffer.append('\n');
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:17:40.070

读取文件后将文件内容存储在字符串中，如下所示：

```
String fileContent = buffer.toString().replaceAll("\\r|\\n", "<br />"); 
```

然后，在您的文本视图中将文本设置为 HTML ：

```
txtview.setText(Html.fromHtml(fileContent)); 
```

# ruby - 从 Rack 应用程序提供非公共二进制文件

> ID：13152968
> 
> 赞同：5
> 
> 时间：2012-10-31T07:13:08.740
> 
> 标签：ruby, rack

我正在制作一个简单的机架应用程序，在身份验证后授予对受保护文件的访问权限。
由于文件中的数据是敏感的，它们位于应用程序的非公共文件夹中。

现在，在检查会话数据后，我只是打开文件进行读取并将内容作为响应的主体发送。
感觉很难看，并且对于较大的文件必须非常消耗资源。

示例响应：

```
[ "200", {"Content-Type"=> MIME::Types.type_for(file).first.to_s }, File.open( file ).read() ] 
```

我查看了[Rack::Sendfile](http://rack.rubyforge.org/doc/Rack/Sendfile.html)，但据我了解，它是一个中间件，无法从应用程序本身内部发送文件。

从 Rack 应用程序发送非公共二进制文件的最有效方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:25:10.547

机架响应主体必须响应`#each{|d|}`. 所以你可以像这样流式传输响应：

```
class FileStreamer
  def initialize(path)
    @file = File.open(path)
  end

  def each(&blk)
    @file.each(&blk)
  ensure
    @file.close
  end
end 
```

用法：

```
[ "200", {"Content-Type"=> MIME::Types.type_for(file).first.to_s }, FileStreamer.new(file) ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:26:35.747

作为替代方案，如果您使用[Rack::Response 对象](http://rack.rubyforge.org/doc/Rack/Response.html)，您可以执行以下操作：

```
response = Rack::Response.new
file = open(path_to_binary_file, "rb")
# other stuff…
mime = Mime.mime_type(::File.extname(file.path), 'text/html')
response.headers.merge!( "Content-Type" => mime ) if mime
response.write file
response.finish 
```

# c - 如何在c项目中添加头文件？

> ID：13152969
> 
> 赞同：0
> 
> 时间：2012-10-31T07:13:16.707
> 
> 标签：c, header-files

我正在使用 Dev c++ 编译器来编译 ac 代码。（我是初学者）当我编译时，它说“一些”头文件丢失了。我怎样才能在我的系统中包含这些头文件，以便程序使用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:36:35.617

诸如`<sys/sem.h>`用于该功能的标头`[semget()](http://linux.die.net/man/2/semget)`在 Windows 中通常不可用。它是一个 POSIX 标头，Windows 没有实现开箱即用的 POSIX 标准。

您也许应该查看 Win32 API，例如像`[CreateSemaphore()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682438%28v=vs.85%29.aspx)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:34:19.657

问题是您正在尝试在 Windows 上使用 Linux API。这是发生的事情：每个操作系统都有自己的一组库供程序员用来在该平台上制作程序。在本例中，您尝试在 Windows 上使用 Linux 库。Windows 没有名为 sys/ipc 或 sys/sem 的代码位置。

此外，既然您说您是初学者，请尝试寻找另一个教程。sys/ipc.h 和 sys/sem.h 不适合初学者，它们是通常用于进程之间通信的库。这些概念现在已经超出了你的想象，哈哈：P

这是一个更好的起点：[http ://www.cprogramming.com/tutorial/c-tutorial.html](http://www.cprogramming.com/tutorial/c-tutorial.html)

# compiler-construction - 在 KVM 客户机上使用 Intel 编译器

> ID：13152971
> 
> 赞同：0
> 
> 时间：2012-10-31T07:13:32.353
> 
> 标签：compiler-construction, cpu, virtualization, intel, kvm

我正在使用 KVM 来宾，并将通过英特尔编译器编译 apache 以获得高性能。在虚拟机上使用英特尔编译器是个好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:47:38.027

这取决于虚拟机如何将系统架构暴露给来宾操作系统。

英特尔编译器倾向于生成适用于您正在构建的架构的代码，并且由于您的 VM 可能会隐藏编译器用于生成优质代码的所有细节，因此它可能无法按您预期的那样工作。你可能会得到糟糕的性能，或者它甚至可能根本无法构建。

你试过了吗？

# communication - 沟通两个 Jar 文件

> ID：13152972
> 
> 赞同：-1
> 
> 时间：2012-10-31T07:13:36.317
> 
> 标签：communication

首先，我是 Java 新手。我希望你会对这个问题感兴趣，但请让你的答案尽可能明显。我会尝试以公开的方式讲述我的问题。我正在使用 NetBeans。我想以这样的方式交流两个 jar 文件，让我有两个 jar A 和 B。它们都在进程中，也就是说它们是单独执行的，我看到两个打开的窗口。在 jar A 的窗口中，它等待来自用户的字符串，我在那里写“调用 B”。然后在 jar B 的窗口中，会说“program A is called at ...”。我在互联网上搜索，我找到了这样的工作人员；“java.util.jar.JarFile，远程方法调用，网络套接字等”。但是我无法从他们那里得到任何结果，因为我找不到初学者可以理解的答案。所以如果你推荐其中之一，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:24:10.977

对于简单的通信形式，您可以使用 java.net.socket 在两个 jar 文件之间进行通信。这将使您获得您想要的“乒乓”效果。

在 programA 中，您将设置服务器套接字并监听客户端连接

```
try {
serverSocket = new ServerSocket(4567);
} 
catch (IOException e) {
    System.out.println("Could not listen on port: 4567");
    System.exit(-1);
}
Socket clientSocket = null;
try {
    clientSocket = serverSocket.accept();
} 
catch (IOException e) {
    System.out.println("Accept failed: 4567");
    System.exit(-1);
} 
```

如果服务器能够接受客户端，则 clientSocket 对象会将远程地址和远程端口设置为客户端的远程地址和远程端口。

服务器成功与客户端建立连接后，使用以下代码与客户端（程序B）进行通信：

```
PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
BufferedReader in = 
new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
String inputLine, outputLine;

out.println("ping");

while ((inputLine = in.readLine()) != null) {   
    System.out.println("Program B says: " + inputLine);
    out.println("server: " + inputLine);
    if (inputLine.equals("quit"))
        break;
} 
```

现在您已经为程序 A 编写了能够与程序 B 对话的逻辑，您还需要创建客户端以便能够与之交互。

程序B：

```
Socket socket = new Socket("programb", 4567);
PrintWriter out = new PrintWriter(socket.getOutputStream(), true);
BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
BufferedReader sysIn = new BufferedReader(new InputStreamReader(System.in));
String fromServer;
String fromUser;

while ((fromServer = in.readLine()) != null) {
    System.out.println("Server: " + fromServer);
if (fromServer.equals("server: quit"))
    break;

fromUser = sysIn.readLine();
if (fromUser != null) {
    System.out.println("Client: " + fromUser);
    out.println(fromUser);
} 
```

}

然后为了良好的做法关闭溪流

```
out.close();
in.close();
sysIn.close()
socket.close(); 
```

这应该给你一个能够在两者之间交谈的基础，你可能需要在服务器上实现某种形式的协议（处理消息的东西），以便它输出一些有用的东西

参考：[http ://docs.oracle.com/javase/6/docs/api/java/net/Socket.html](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html)

# batch-file - 创建 Sh 和 Bin 文件以执行文件夹中的所有 SQL 脚本

> ID：13152973
> 
> 赞同：0
> 
> 时间：2012-10-31T07:13:38.160
> 
> 标签：batch-file, sh

我不确定这是否可能，但如果我有一个包含 40 多个 SQL 脚本的目录。是否可以制作 run_scripts.bat 和/或 run_scripts.sh 文件来执行文件夹中的所有 SQL 脚本？抱歉，我什至没有开始代码，但我一直在寻找如何做到这一点，但无济于事。感谢任何可以提供帮助的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:17:00.197

根据您使用的数据库（例如 mysql），您可以循环运行：

```
for f; do
    mysql -u $DBUSER -p $DB <$f
done 
```

然后，您可以在命令行上调用它：

```
$ sh run_scripts.sh *.sql 
```

# extjs - 如何在视口中嵌入gridview

> ID：13152983
> 
> 赞同：0
> 
> 时间：2012-10-31T07:14:00.933
> 
> 标签：extjs

在 extjs 中，我想实现[链接](http://docs.sencha.com/ext-js/4-0/#!/example/writer/writer.html)中提到的网格结构。

那么如何在基本视口中嵌入这个网格结构呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:35:45.917

将视口的中心区域设为容器，然后将网格添加到该容器。

```
this.viewport = Ext.ComponentQuery.query('viewport')[0];
this.centerRegion = this.viewport.down('[region=center]');

this.centerRegion.add(new Ext.grid.Panel({title:'Grid', columns:[{text:'col1'}]})); 
```

例子：

[http://jsfiddle.net/Ym5T4/1/](http://jsfiddle.net/Ym5T4/1/)

# sh - 尽管拥有完整权限，但 shell 脚本未执行

> ID：13152991
> 
> 赞同：1
> 
> 时间：2012-10-31T07:14:28.800
> 
> 标签：sh

我有一个小脚本可以从我的主文件夹中正常执行，但是当移动到不同分区（EXT4）上的不同文件夹时

```
 $ ls -lah ./build.sh

-rwxrwxr-x 1 olmec(me) olmec(me) 510 Oct 31 20:00 ./build.sh

$ ./build.sh

bash: ./build.sh: Permission denied 
```

我试过 chmod 777 build.sh 但没有区别。该脚本位于文件夹 /media/data/source

数据驱动分区在 FStab 中挂载为 UUID=affd0ac6-f3da-4f88-ac22-65d94dc5da8c /media/data ext4 user,user 0 0

通过修改FStab挂载命令解决 UUID=affd0ac6-f3da-4f88-ac22-65d94dc5da8c media/data ext4 auto,users,exec 0 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:45:52.033

很可能它位于使用该选项安装的卷上`noexec`，我会检查一下。`strace bash yourscript`如果不是这种情况，您仍然可以尝试从' 的输出中找出答案。

# liferay - 在非 root 上下文中运行的 Liferay 中部署主题和 portlet

> ID：13152994
> 
> 赞同：1
> 
> 时间：2012-10-31T07:14:45.410
> 
> 标签：liferay

我们的 Liferay 服务器设置在非根上下文中。门户上下文设置为 -portal.ctx=/lportal

因此，我们开发的主题不起作用。图像 css 未在非根上下文中加载。此外，portlet 具有的自定义 css 也没有加载。

有关如何解决此问题的任何线索。

问候，蒂娜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:20:51.820

我们遇到了同样的问题，我们通过使用应用程序服务器的自定义部署描述符解决了这个问题。

我们使用的是 WebLogic，因此我们向`weblogic.xml`主题添加了一个文件，其中包含一个`context-root` 指定非根上下文的指令：

```
<?xml version="1.0"?>
<weblogic-web-app xmlns="http://www.bea.com/ns/weblogic/weblogic-web-app"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.bea.com/ns/weblogic/weblogic-web-app http://www.bea.com/ns/weblogic/weblogic-web-app/1.0/weblogic-web-app.xsd">
    <context-root>/foo/your-theme</context-root>
</weblogic-web-app> 
```

使用 Tomcat 或 JBoss 执行此操作的说明应该非常相似。

然后你还必须在 Liferay 主题描述符 ( `liferay-look-and-feel.xml`)中指定虚拟路径

```
<?xml version="1.0"?>
<!DOCTYPE look-and-feel PUBLIC "-//Liferay//DTD Look and Feel 6.0.0//EN" "http://www.liferay.com/dtd/liferay-look-and-feel_6_0_0.dtd">

<look-and-feel>
    <compatibility>
        <version>6.1.10+</version>
    </compatibility>
    <theme id="foo-theme" name="Foo Theme">
        <virtual-path>/foo/your-theme</virtual-path>
    </theme>
</look-and-feel> 
```

重新部署主题后，指向 CSS、javascript 等的链接将在 /foo/your-theme 下正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:41:38.473

请注意，主题始终部署为自己的 Web 上下文 - 独立于 Liferay。因此，当 Liferay 部署在[http://www.example.com/lportal](http://www.example.com/lportal)时，您的主题将部署在[http://www.example.com/my-theme](http://www.example.com/my-theme)并且应该从那里引用图像。

如果 Apache 生成 404 错误，请确保它将请求转发到您的应用服务器。通常，如果您将 mod_jk 或 mod_proxy 或类似配置配置为将 /lportal 转发到 Liferay，您还需要转发 /my-theme。

如果这没有帮助，请提供更多信息，例如不起作用的版本和示例 css，包括它生成的内容。

# python - 如何从 Google App Engine 中的 InboundMailHandler 读取电子邮件（自定义）标题和附件

> ID：13152995
> 
> 赞同：1
> 
> 时间：2012-10-31T07:14:45.347
> 
> 标签：python, google-app-engine

如何在 Google App Engine 中阅读电子邮件标头。我正在尝试在谷歌搜索，但找不到任何好的和有效的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:14:45.347

这里是答案。
**文件：app.yaml**
*（您将发送电子邮件至**mymail@myapp.appspotmail.com**）*

```
application: myapp
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:    
- url: /_ah/mail/mymail@myapp\.appspotmail\.com
  script: mail.app
  login: admin

- url: .*
  script: main.app

libraries:
- name: webapp2
  version: "2.5.1"

inbound_services:
- mail 
```

假设您的应用收到一封电子邮件，这是电子邮件标题的一部分：

```
...
MIME-Version: 1.0
Received: by 10.220.68.18 with HTTP; Tue, 30 Oct 2012 21:18:18 -0700 (PDT)
Date: Wed, 31 Oct 2012 12:18:18 +0800
Message-ID: <CA+aGk47FkztZR3jUfrG=XU-ikLNnpEVE3KOcoXHgX1ntoBs1+A@mail.gmail.com>
Subject: Butter cake receipe
From: Someone somebody <someone@somebody.com>
To: Danny Hong <danny@otherone.com>
Content-Type: multipart/alternative; boundary=bcaxec5y19610f36df7204cd5331cd
X-Gm-Message-State: ALoCoQmzPBg3OYwtkdO5pUbNI5Zk+v2Qa42P5E6lWRzCiVUPBNsHbmSOJoBir2UfsUdq7vZLYnUOsHg
... 
```

**文件：mail.py**

```
import logging
import webapp2
from google.appengine.ext.webapp.mail_handlers import InboundMailHandler

class MailHandle(InboundMailHandler):
  def receive(self, mail_message):

    #Read headers    
    buf = mail_message.original.get('MIME-Version')
    logging.info("I get: %s" % buf)
    # output: i get: 2.0

    buf = mail_message.original.get('Message-ID')
    logging.info("I get: %s" % buf)
    # output: i get: <CA+aGk47FkztZR3jUfrG=XU-ikLNnpEVE3KOcoXHgX1ntoBs1+A@mail.gmail.com>

    buf = mail_message.original.get('X-Gm-Message-State')
    logging.info("I get: %s" % buf)
    # output: i get: ALoCoQmzPBg3OYwtkdO5pUbNI5Zk+v2Qa42P5E6lWRzCiVUPBNsHbmSOJoBir2UfsUdq7vZLYnUOsHg

    buf = mail_message.original.get('Subject', 'no subject')
    logging.info("I get: %s" % buf)
    # output: i get: Butter cake receipe

    buf = mail_message.original.get('something-else','no such header')
    logging.info("I get: %s" % buf)
    # output: i get: no such header

    # Looping and getting attachments...
    if hasattr(mail_message,'attachments'):
      for fn, att in mail_message.attachments:
        logging.info("Attachment filename is %s" % fn)
        # output: Attachment file is <filename.xxx>
        logging.info("Attactment data in blob %s" % att.decode())
        # output: Attachment data in blob <binary> 
```

# c# - 无法从文本“鼠标”创建“Windows.UI.Xaml.Controls.Primitives.PlacementMode”

> ID：13152998
> 
> 赞同：3
> 
> 时间：2012-10-31T07:14:56.237
> 
> 标签：c#, windows-8, app-store, microsoft-metro

嘿，我只是一个Windows 8商店应用程序的新开发者。这是我遇到的一个问题，即使我已经尽力寻找答案。但我找不到解决方案。我希望有人可以帮助我。

我只是想在 Windows 8 上开发一个测试应用程序，但是当我打开 floder Common.The Visual Studio 中的文件“StandardStyle.xaml”时报告错误：“无法创建'Windows.UI.Xaml.Controls。 Primitives.PlacementMode' 来自文本“鼠标””。

我是中国人，所以文字是中文的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:13:45.507

在“StandardStyle.xaml”中，替换：

```
<ToolTipService.Placement>鼠标</ToolTipService.Placement> 
```

和 ：

```
<ToolTipService.Placement>Mouse</ToolTipService.Placement> 
```

工具提示服务。[Placement](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.primitives.placementmode)只能是**Bottom**、**Left**、**Mouse**、**Right**或**Top**。它不应该在 Microsoft 方面自动翻译。我在法语中遇到了同样的问题`Souris`，我必须手动更改为`Mouse`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:50:01.687

`PlacementMode`是一个枚举（查看此链接[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.primitives.placementmode](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.primitives.placementmode)）。标记之间的文本应该被一个值替换。所以唯一有效的文本是上面链接中的文本。似乎全球化是这里的问题（翻译不应该的东西）。

# vb.net - 在 Visual Studio 中关闭漂亮的列表

> ID：13152999
> 
> 赞同：2
> 
> 时间：2012-10-31T07:15:00.683
> 
> 标签：vb.net, visual-studio-2010, macros, add-in

我有一个宏/插件，我需要在其中临时禁用 Vb.Net**漂亮列表**。

![VB 漂亮的列表选项](../Images/10ed01d8f01a1c44124631b8bdb755c9.png)

试图录制一个宏，但它只显示我打开了选项对话框。

也试过

```
Dim props As EnvDTE.Properties = DTE.Properties("TextEditor", "Basic") 
```

但是 props 集合不包含 VB 特定下的任何选项。
（General 和 Tabs 的选项在集合中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:23:32.533

[在此处](http://msdn.microsoft.com/en-us/library/ms165642%28v=vs.80%29.aspx)找到选项列表

就我而言，它是

```
Dim prettyListingProperty = DTE.Properties("TextEditor", "Basic-Specific").Item("PrettyListing") 
```