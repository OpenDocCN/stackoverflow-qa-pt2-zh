# StackOverflow 问答 15855000-15855999

# c++ - 如何让我的win32应用程序显示鼠标右键

> ID：15855000
> 
> 赞同：1
> 
> 时间：2013-04-06T19:17:49.660
> 
> 标签：c++, winapi

这就是我到目前为止所拥有的。

```
 case WM_PAINT:
            hdc = BeginPaint (hwnd, &ps);

            GetClientRect (hwnd, &rect);

            GetWindowRect(hwnd, &size);

            width = size.right - size.left;
            itoa(width, Swidth, 10);
            height = size.bottom - size.top;
            itoa(height, Sheight, 10);
            itoa(rect.bottom, sBottom, 10);
            itoa(rect.top, sTop, 10);
            itoa(rect.left, sLeft, 10);
            itoa(rect.right, sRight, 10);

            TextOut(hdc, 0, 0, "Here is my width: ", 18);
            TextOut(hdc, 125, 0, Swidth, 5);
            TextOut(hdc, 175, 0, "Here is my height: ", 18);
            TextOut(hdc, 300, 0, Sheight, 4);

            TextOut(hdc, 0, 20, sBottom, strlen(sBottom));
            TextOut(hdc, 50, 20, sTop, strlen(sTop));
            TextOut(hdc, 100, 20, sRight, strlen(sRight));
            TextOut(hdc, 150, 20, sLeft, strlen(sLeft));

            TextOut(hdc, 0, 40, "Right Button Clicked: ", 23);
            itoa(rightButtonClicked, SrightButtonClicked, 10);
            TextOut(hdc, 150, 40, SrightButtonClicked, strlen(SrightButtonClicked));

            if(rightButtonClicked > 20)
                TextOut(hdc, 0, 60, SrightButtonClicked, strlen(SrightButtonClicked));

            EndPaint (hwnd, &ps);
            return 0;

      case WM_LBUTTONDOWN:
          return 0;

      case WM_RBUTTONDOWN:
          rightButtonClicked++;
          return 0 
```

现在我不确定我做错了什么，但我应该让它输出我在窗口中右键单击的次数。我为 rightButtonClicked incremetns 设置的计数器，但它不会正确显示。是的，这是作业，我已经研究了很多这个话题，所以我正在寻找一些帮助。

# c++ - C ++ ifstream I/O？

> ID：15855001
> 
> 赞同：0
> 
> 时间：2013-04-06T19:18:00.267
> 
> 标签：c++, io, fstream

我正在试验 C++ 文件 I/O，特别是 fstream。我编写了以下代码，截至目前，它告诉我没有 getline 成员函数。我被告知（并且仍然坚持）有一个成员函数 getline。有人知道如何将 getline 成员函数用于 fstream 吗？或者也许是另一种从文件中一次获取一行的方法？我在命令行上接受了两个文件参数，它们具有唯一的文件扩展名。

./fileIO foo.code foo.encode

```
#include <fstream>
#include <iostream>  
#include <queue>
#include <iomanip>
#include <map>
#include <string>
#include <cassert>
using namespace std;
int main( int argc, char *argv[] )
{
  // convert the C-style command line parameter to a C++-style string,
  // so that we can do concatenation on it
  assert( argc == 2 );
  const string foo = argv[1];

  string line;string codeFileName = foo + ".code";

  ifstream codeFile( codeFileName.c_str(), ios::in );
  if( codeFile.is_open())
  {
  getline(codeFileName, line);
  cout << line << endl;
  }
  else cout << "Unable to open file" << endl;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:21:17.260

```
getline(codeFileName, line); 
```

应该

```
getline(codeFile, line); 
```

您传递的是文件名，而不是流。

顺便说一句，[`getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)您使用的是自由函数，而不是成员函数。事实上，应该避免使用[成员函数`getline`](http://en.cppreference.com/w/cpp/io/basic_istream/getline)。它更难使用，并且可以追溯到`string`标准库中没有的日子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T19:21:17.887

错字

```
getline(codeFileName, line); 
```

应该

```
getline(codeFile, line); 
```

我想教训是你必须学习如何解释编译器错误消息。我们都会犯某些类型的错误，并了解它们往往会产生的编译器错误。

# sorting - Python 帮助：如何在 7 个字符串的列表中查找 3 个或 4 个字符串是否相同？

> ID：15855003
> 
> 赞同：0
> 
> 时间：2013-04-06T19:18:13.500
> 
> 标签：sorting, python-3.x, compare

我正在创建一个拉米牌游戏，我在其中输入 7 张牌。A、2、3、4、5、6、7、8、9、T、J、Q、K为牌号。S、H、C、D 是花色（黑桃、红心、梅花、方块） 例如。8H 是 8 颗心

代码：

```
card1, card2, card3, card4, card5, card6, card7 = input('1\. ').split(', ')

c1p1, c1p2 = card1[:-1], card1[1:]

c2p1, c2p2 = card2[:-1], card2[1:]

c3p1, c3p2 = card3[:-1], card3[1:]

c4p1, c4p2 = card4[:-1], card4[1:]

c5p1, c5p2 = card5[:-1], card5[1:]

c6p1, c6p2 = card6[:-1], card6[1:]

c7p1, c7p2 = card7[:-1], card7[1:] 
```

我将用户的输入与卡号和西装分开。这个程序的目标是找出它们是否是 3 到 4 张具有相同数字的卡片，但我不知道如何比较所有 7 个数字来确定其中 3-4 是否相等。

任何帮助将不胜感激，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:30:23.190

你可以使用类似 list.count(listElement)

```
for item in list:
    c= list.count(item)
    if c>3:
        print "card %s is more than 3 times"%item 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:40:19.823

我会用字典来计算一个数字出现的次数，试试下面的代码：

```
def method():
    cards_string = "8H,3S,4H,7D,5C,JH,AS"
    cards = cards_string.split(',')
    card_numbers_count = {'A':0, '2':0, '3':0, '4':0, '5':0, '6':0, '7':0, '8':0, '9':0, '10':0, 'J':0, 'Q':0, 'K':0}

    for card in cards:
        card_number = card[:-1]
        card_numbers_count[card_number] += 1

    print card_numbers_count

if __name__ == "__main__":
    method() 
```

# jquery - 对 jquery 的奇怪影响我淡出

> ID：15855008
> 
> 赞同：0
> 
> 时间：2013-04-06T19:18:39.647
> 
> 标签：jquery, fadeout

我试图在单击 a`div`时显示 a`li`并在单击其他时隐藏它`li`。问题是当我点击最后一个时会出现奇怪的效果`li`。

这是我的代码的外观：http: [//jsfiddle.net/zxGqV/4/](http://jsfiddle.net/zxGqV/4/)

我是 jQuery 的新手，所以我确信我的一些代码逻辑没有意义。

```
$('.btn').click(function(c){
      c.preventDefault();
      var a = $(this).attr("id").replace('title_', '');
      $(this).closest("#elements").find('.btn').removeClass("current");
      $(this).closest('li').addClass("current");
      $("#elements").find('.details').fadeOut("slow", function(){
          $('.btn-group').find('#details_' + a).fadeIn("fast");
      });
});

<div class="row">
 <div class="span8 center">
  <ul id="elements" class="ui-sortable">

   <li id="element_10" class="">
     <div class="btn-group">
       <button id="title_10" type="button" class="btn">
         lorem 10</button>
       <div style="display: none;" id="details_10" class="details">
         lorem ipsum 10
       </div>               
     </div>
   </li>

   <li id="element_11" class="">
      <div class="btn-group">
       <button id="title_11" type="button" class="btn">
            foo 11</button>
       <div style="display: none;" id="details_11" class="details">
            foo bar 11
       </div>               
      </div>
   </li> 
```

... ETC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:30:15.863

这行得通——可能需要调整时间。

在这里，我使用当前课程来确保我一次只处理一个项目。

[http://jsfiddle.net/cewFL/](http://jsfiddle.net/cewFL/)

```
$('.btn').click(function(c){
      c.preventDefault();
      $(this).attr("id").replace('title_', '');
      $(".current .details").fadeOut("fast");
      $(".current").removeClass("current");
      $(this).closest('li').addClass("current");
      $(".current .details").fadeIn("fast");

}); 
```

# php - Memcached 是否缓存图像、css、js 等静态文件？

> ID：15855017
> 
> 赞同：0
> 
> 时间：2013-04-06T19:20:04.283
> 
> 标签：php, memcached

我刚刚安装了 Memcached，我想知道 Memcached 是否可以在我的服务器上缓存图像、js、css、字体文件等，或者它只适用于脚本语言？

它是自动缓存还是必须配置？

如果没有，我如何使用 PHP 缓存静态文件（就像变量值一样？）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T19:23:36.733

不，它没有，但是在正确配置的服务器上执行此操作的需求也为零：服务器上经常访问的文件将已经在缓存中/在内存缓冲区中，特别是如果它们是静态的并且您的服务器有足够的记忆，会在那里停留相当长的一段时间。尝试使用 Memcache 为它们提供服务将产生更多的开销，而不是更少。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T19:35:06.977

您最好的选择可能是使用像[nginx](http://nginx.com)这样的缓存层来处理 HTTP 流量（作为 apache 的代理或作为主要的 HTTP 服务器）。如果你只是想要一个代理，Varnish 也是一个不错的选择。

如果您在使用 Apache 时遇到问题，这里是让基于内存的缓存工作的起点：[http ://httpd.apache.org/docs/2.2/caching.html#inmemory](http://httpd.apache.org/docs/2.2/caching.html#inmemory)

此外，您可能希望更多地研究在文件上设置缓存标头，以便同一用户的多个请求不会意味着更多的文件和网络 IO。这可能比在内存中显式缓存内容节省更多，因为 Linux 将为您完成其中的一些工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T19:23:12.690

将其转换为字符串并将其保存在 memcache 中

```
<?php
  file_get_contents("/path/to/image.jpg");
?> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-06T19:25:52.417

[http://php.net/manual/en/book.memcached.php](http://php.net/manual/en/book.memcached.php)有文档。您可以保存二进制数据，但可以有效地存储生成的复杂数据，例如 DB-results

# memory - x86 push/pop 可以小于 4 字节吗？

> ID：15855021
> 
> 赞同：7
> 
> 时间：2013-04-06T19:20:39.663
> 
> 标签：memory, assembly, x86, stack

嗨，我正在阅读弗吉尼亚大学关于 x86 的指南，它指出推送和弹出堆栈会删除或向堆栈添加 4 字节数据元素。

为什么设置为 4 个字节？这可以改变吗，你可以通过推送更小的数据元素来节省堆栈上的内存吗？

如果有人想查看该指南，可以在这里找到： [http ://www.cs.virginia.edu/~evans/cs216/guides/x86.html](http://www.cs.virginia.edu/~evans/cs216/guides/x86.html)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T20:04:20.747

简短回答：是的，16 位或 32 位。并且，对于[x86-64](http://en.wikipedia.org/wiki/X86-64)，64 位。

堆栈的主要原因是从嵌套函数调用返回并保存/恢复寄存器值。它也通常用于传递参数和返回函数结果。除了最小的参数外，这些项在处理器设计上通常具有相同的大小，即指令指针寄存器的大小。对于 8088/8086，它是 16 位。对于 80386 和后续版本，它是 32 位的。因此，在其他大小上操作的堆栈指令几乎没有价值。

还有内存总线上数据大小的考虑。检索或存储一个字所花费的时间与处理一个字节所花费的时间相同。（除了 8088，它有 16 位寄存器，但有 8 位数据总线。）对齐也起作用。堆栈应在字边界上对齐，以便每个值都可以作为一个内存操作检索。权衡通常是为了节省时间而不是节省内存。要将一个字节作为参数传递，通常使用一个字。（或者，根据编译器可用的优化，将使用一个字大小的寄存器，完全避免堆栈。）

# c++ - 如何将 CRTP 与可变参数模板一起使用？

> ID：15855031
> 
> 赞同：1
> 
> 时间：2013-04-06T19:21:47.397
> 
> 标签：c++, templates, c++11, variadic-templates, crtp

假设最初我使用 CRTP 进行了以下设计：

```
template<class Outputter> class Generator {
protected:
    vector<int> v;
private:
    void work(ostream& out) {
        // perform first part of some complex operations on v
        out << *static_cast<Outputter *>(this);
        // perform second part of some complex operations on v
        out << *static_cast<Outputter *>(this);
        // many more ....
        // perform some final actions
    }
public:
    Generator(unsigned length): v(length) {}
    friend ostream& operator<<(ostream& out, Outputter&& generator) {
        // perform some preparation work
        work(out);
        // perform some final actions
        return out;
    }
};

class SimpleDumpOutputter : public Generator<SimpleDumpOutputter> {
private:
    unsigned count;
public:
    SimpleDumpOutputter(unsigned length): Generator(length), count() {}
    friend ostream& operator<<(ostream& out, SimpleDumpOutputter& outputter) {
        out << "Step " << ++count << " of calculation: "
        copy(outputter.v.begin(), outputter.v.end(), ostream_iterator<int>(out, " "));
        out << endl;
        return out;
    }
};

class FancyOutputter : public Generator<FancyOutputter> { // create a graph using graphviz's dot language to visualise v
private:
    // abbreviated
public:
    FancyOutputter(unsigned length): Generator(length) {}
    friend ostream& operator<<(ostream& out, FancyOutputter& outputter) {
        // write statements to out
        return out;
    }
};

// some more different Outputters, for example an Outputter that creates a pretty LaTeX document 
```

在这个设计中，有一个`Generator`CRTP 类模板，它使用其派生类的 befriended 对 执行复杂计算并在计算的`vector<int> v`每个步骤/部分打印结果`operator<<`。

这是我想要实现的一个有趣的概念：我希望在一次执行中以多种格式输出。具体来说，我认为我可以这样做：

```
template<class Outputters> class AggregateOutputter : public Generator<AggregateOutputter<Outputters...> > {
private:
    static const unsigned outputter_count = sizeof...(Outputters);
    typedef array<ostream *, outputter_count> DestArr;
    DestArr destinations;
public:
    AggregateOutputter(unsigned v_length, DestArr destinations): IsomerGenerator<AggregateOutputter<Outputters...> >(length), destinations(destinations) {}
    friend ostream& operator<<(ostream&, AggregateOutputter& outputter); // first argument is dummy, because we would use the ostreams in destinations
} 
```

这个想法是用户会使用，比如说，并用两个s`AggregateOutputter<SimpleDumpOutputter, FancyOutputter`构造对象。每当调用输出器类时，都会遍历s in和类型 in并调用类似.`array``ostream``Generator``operator<<``AggregateOutputter``ostream``destinations``Outputters``*dest_iter << *static_cast<Outputter_Iter>(this);`

我不确定这将如何工作。我不确定是否可以以这种方式使用多重继承，是否可以在一个`array`和一组参数化类型之间“压缩”。有没有人了解这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T21:00:50.033

我修改了你原来的设计。我认为在调用输出运算符时生成器进行大量计算至少可以说是令人惊讶的。此外，您的 AggregateOutputter 输出忽略 << 的 ostream 参数也令人惊讶。此外，Outputter 与 Generator 没有 is-a 关系。

我试图分离出这些问题，最终没有使用 CRTP，而是使用了可变参数模板，但我认为它可以满足您的需求。

[http://ideone.com/xQrnW4](http://ideone.com/xQrnW4)

```
#include <vector>
#include <iostream>
#include <iterator>
#include <array>
using namespace std;

class Generator {
protected:
    vector<int> v;
public:
    Generator(unsigned length): v(length) {}

    template<class Outputter>
    void do_calculations_with_output(Outputter& out){
        // perform first part of some complex operations on v
        out.output(v);
        // perform second part of some complex operations on v
        out.output(v);
        // perform some final actions
    }

};

class SimpleDumpOutputter {
private:

    ostream* out;
    unsigned count;
public:
    SimpleDumpOutputter(ostream& os): out(&os), count() {}
    template<class C>
    void output(const C& c) {
        *out << "Step " << ++count << " of calculation: ";
        copy(c.begin(),c.end(), ostream_iterator<int>(*out, " "));
        *out << endl;
    }
};

class FancyOutputter {
    ostream* out;
    int count;
public:
    FancyOutputter(ostream& os): out(&os),count() {}
    template<class C>
    void output(const C& c) {
        // create a graph using graphviz's dot language to ease visualisation of v
        *out << "Step " << ++count << " of calculation: ";
       *out << "Graphviz output\n";
    }
};

template<class... Outputters> class AggregateOutputter : private Outputters... {
private:
   template<class First, class... Rest>
   struct output_helper{
      template<class C>
      static void do_output(AggregateOutputter* pthis,const C& c){
          static_cast<First*>(pthis)->output(c);
          output_helper<Rest...>::do_output(pthis,c);
      }

   };

   template<class First>
   struct output_helper<First>{
      template<class C>
      static void do_output(AggregateOutputter* pthis,const C& c){
          static_cast<First*>(pthis)->output(c);
      }

   };
public:
   template<class... Out>
    AggregateOutputter( Out&... out): Outputters(out)...{}
    template<class C>
    void output(const C& c) {
        output_helper<Outputters...>::do_output(this,c);
    }

};
int main(){

    AggregateOutputter<FancyOutputter,SimpleDumpOutputter> out(cout,cout);

    Generator g(10);

    g.do_calculations_with_output(out);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T05:13:03.760

好的，这是我在受到 John Bandela 的解决方案启发后提出的解决[方案](https://stackoverflow.com/a/15855970/1102119 "这里")。（请参阅我对答案的评论，了解为什么我认为他的方法不符合我的需求）

```
template<class... Outputters> class AggregateOutputter : public Generator<AggregateOutputter<Outputters...> > {
private:
    typedef array<ostream *, sizeof...(Outputters)> DestArr;
    DestArr destinations;
    typedef typename DestArr::iterator DestArrIter;
    struct OutputterHolder : public Outputters... {
        OutputterHolder(vector<int>& v): Outputters(v)... {}
    } outputter_holder;
    template<class First, class... Rest> struct OutputHelper {
        static void do_output(OutputterHolder *pthis, DestArrIter dest) {
            **dest << *static_cast<First *>(pthis);
            OutputHelper<Rest...>::do_output(pthis, ++dest);
        }
    };
    template<class First> struct OutputHelper<First> {
        static void do_output(OutputterHolder *pthis, DestArrIter dest) {
            **dest << *static_cast<First *>(pthis);
        }
    };
public:
    template<typename... OstreamStar> AggregateOutputter(unsigned length, OstreamStar... ostreams): Generator<AggregateOutputter<Outputters...> >(length), destinations{{ostreams...}}, outputter_holder(this->v) {
        static_assert(sizeof...(OstreamStar) == sizeof...(Outputters), "number of outputters and destinations do not match");
    }
    friend ostream& operator<<(ostream& dummy_out, AggregateOutputter& outputter) {
        OutputHelper<Outputters...>::do_output(&outputter.outputter_holder, outputter.destinations.begin());
        // possibly write some logging info to dummy_out
        return dummy_out;
    }
};

// to use this:
ofstream fout("gv.gv");
cout << AggregateOutputter<FancyOutputter, SimpleDumpOutputter>(length, &fout, &cout); 
```

这个想法是除了`output_helper`在约翰的答案（我已重命名为`OutputHelper`）之外，还有另一个`struct`名为的辅助`OutputterHolder`，它继承自所有`Outputters`. 我还使用了`array`of`ostream *`来存储输出的目的地，并修改`do_output`为也采用 an`iterator`以便`ostream`可以匹配正确的。

重要的是，为了配合更改，我将受保护的成员`vector<int> v`in`Generator`更改为引用，即`vector<int>& v`，以便`outputter_holder`可以使 in 的数据结构引用 in 的结构`AggregateOutputter`。这还需要在所有采用`vector<int>&`. 长度为 的原始构造函数`v`现在将使用`new`.

我不确定我想出的这个解决方案是最好/最优雅的解决方案。

# visual-studio-2012 - 适用于 Windows 8 的 Visual Studio Express 2012：TDD 中止环境

> ID：15855032
> 
> 赞同：0
> 
> 时间：2013-04-06T19:21:53.647
> 
> 标签：visual-studio-2012, tdd

我已经在我的开发系统上安装了适用于 Windows 8 的 Visual Studio Express。当我为 TDD 添加项目并构建解决方案时，IDE 崩溃 - 显然它无法找到任何测试（即使它们在代码中）。“测试输出”窗口表明它正在搜索测试，然后整个 devenv 崩溃。

使用 Visual Studio 2012 Professional 的试用版可以正常工作，但是自从卸载它并用 Win8 的 VS Express 替换它后，我没有运气让 MSTest 在不崩溃环境的情况下工作。

关于我可能会错过什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T18:48:15.180

原来是与计算机上的另一个进程（Garmin 更新程序）发生冲突。停止此过程后，测试输出按预期工作。该问题已在 VS2013 中修复。

# laravel - 使用 Composer 在 Laravel 4 中加载 css/js 文件？

> ID：15855033
> 
> 赞同：9
> 
> 时间：2013-04-06T19:21:54.693
> 
> 标签：laravel, composer-php, laravel-4

我正在努力在 Laravel 4 中创建一个新项目。我在 Laravel 3 中有一点经验，在其中我习惯了资产系统。我现在在弄清楚如何在新系统中加载 CSS 和 JS 文件时遇到了很多麻烦。

我相信我应该使用 Composer PHP，但我不确定如何。我将实际的 .css 和 .js 文件放在哪里？然后如何使用 Composer 加载它们以在 Laravel 项目中使用？

我知道有一些外部插件，比如 Best Asset 等，它们是为了复制 Laravel 3 的 Assets 系统而编写的，但我希望了解新系统而不必使用外部插件。

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-06T20:30:46.280

您的 css/js 资产不需要 Composer。您可以使用与 Laravel 3 几乎相同的资产

您可以将它们放在您的公用文件夹中并在您的视图中引用它们。您可以使用纯 html，或使用 HtmlBuilder：`HTML::style('style.css')`和`HTML::script('script.js')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-08T16:57:56.193

您必须注意区分大小写。
此类必须用大写字母书写。

```
HTML::style('style.css');
HTML::script('script.js'); 
```

[Laravel 样式表和 javascript 不会为非基础路由加载](https://stackoverflow.com/questions/15232600/laravel-stylesheets-and-javascript-dont-load-for-non-base-routes)

# prolog - 有没有办法说∃！在序言中？

> ID：15855034
> 
> 赞同：2
> 
> 时间：2013-04-06T19:21:56.057
> 
> 标签：prolog, boolean, boolean-logic, boolean-expression

在序言中，有没有办法说“确实存在一个”（`∃!`）？我正在考虑做类似的事情

```
% a predicate which is proven true if there is only one tall person
only_one_tall() :- is_tall(X), is_tall(Y), X\=Y. 
```

然后否定整个事情。但我认为这行不通。

有人知道吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:41:53.677

在标准 Prolog 中产生类似条件的一种方法如下：

```
only_one_tall() :- findall(X, is_tall(X), List), length(List, 1). 
```

这是[关于 ideone 的演示](http://ideone.com/zkSpuO)。

# ios - 没有任何背景的自定义后退按钮，只是一个图像

> ID：15855036
> 
> 赞同：0
> 
> 时间：2013-04-06T19:22:00.083
> 
> 标签：ios, objective-c, uinavigationbar

如何从`UINavigationBar`没有背景的背景中制作后退按钮......只显示在 iPhone 的 Youtube 应用程序上看到的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:40:33.013

靠近您的设计师并告诉他们根据需要创建图像并将其放在 UIButtont 上，例如

```
UINavigationBar *bar = self.navigationController.navigationBar;
UIBarButtonItem *item = [[UIBarButtonItem alloc] initWithImage:myImage
                             style:UIBarButtonItemStyleBordered
                            target:self action:@selector(buttonPressed:)];
bar.leftBarButtonItem = item;
[bar.leftBarButtonItem setImage:[UIImage imageNamed:@"image.png"] forState:UIControlStateNormal];
[item release]; 
```

# swing - 从 Clojure 代理 Thread.UncaughtExceptionHandler

> ID：15855039
> 
> 赞同：2
> 
> 时间：2013-04-06T19:22:15.840
> 
> 标签：swing, exception, clojure, event-dispatch-thread

我正在尝试实现一个“完整的”未捕获异常处理程序，允许在 Clojure*中*捕获 EDT 异常。

我正在尝试从此处接受的答案（有 15 个以上的赞成票）中实现该类：

[如何捕获事件调度线程 (EDT) 异常？](https://stackoverflow.com/questions/4448523/how-can-i-catch-event-dispatch-thread-edt-exceptions)

这是我想移植到 Clojure 的部分：

```
public static class ExceptionHandler implements Thread.UncaughtExceptionHandler {

    public void handle(Throwable thrown) {
      // for EDT exceptions
      handleException(Thread.currentThread().getName(), thrown);
    }

    public void uncaughtException(Thread thread, Throwable thrown) {
      // for other uncaught exceptions
      handleException(thread.getName(), thrown);
    }

    protected void handleException(String tname, Throwable thrown) {
      System.err.println("Exception on " + tname);
      thrown.printStackTrace();
    }
  }

  public static void main(String[] args) {
    Thread.setDefaultUncaughtExceptionHandler(new ExceptionHandler());
    System.setProperty("sun.awt.exception.handler",
                       ExceptionHandler.class.getName()); 
```

但是我被困住了。这`UncaughtExceptionHandler`是一个在 Thread 内部定义的公共接口，我似乎无法从 Clojure 代理它。

我不知道要导入什么，也不知道如何实现。

任何帮助将不胜感激，因为我似乎可以诊断出异常，因为它们在 EDT 的某个地方“丢失”（并且 EDT 会自动修复/重新启动）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:41:20.307

用来`reify`实现`Thread$UncaughtExceptionHandler`。Java 的内部类和接口被命名为类文件。

```
(def h (reify Thread$UncaughtExceptionHandler    
  (uncaughtException [this t e] 
    (println t ": " e)))) 
```

请参阅：[在 Clojure 中实现 Java 泛型接口](https://stackoverflow.com/questions/3999252/implementing-java-generic-interface-in-clojure)

# r - 使用 rbind 将列更改为行

> ID：15855046
> 
> 赞同：-3
> 
> 时间：2013-04-06T19:22:57.967
> 
> 标签：r, multiple-columns

我有一个数据集如下：

```
 N2     N3     N4    N5     N7     N8    N10    N12   N13    N14   N17   N19    N25    N28   N29    N31    N32
1 1.300 -0.170 -0.344 2.138  0.684  0.656  0.882  0.684 1.822  1.214 2.046 2.432  0.208  0.312 0.530  0.358  0.264
2 0.888 -0.534 -0.684 1.442 -0.178 -0.060  0.430 -0.148 1.420  0.286 1.444 2.138 -0.264 -0.042 0.398 -0.196 -0.148
3 0.792 -0.564 -0.622 0.998 -0.320  1.858 -0.036 -0.118 1.476  0.110 0.964 2.048 -0.480 -0.434 0.040 -0.538 -0.322
4 0.324 -1.022 -1.128 1.380 -0.792  1.042 -0.054 -0.158 1.518 -0.102 1.354 2.386 -0.708 -0.510 0.258 -0.696 -0.566
5 0.650 -0.774 -0.982 1.124 -0.540  3.200 -0.052 -0.258 1.452  0.028 1.022 2.110 -0.714 -0.646 0.266 -0.768 -0.532
6 0.670 -0.660 -0.844 1.248 -0.550  2.868 -0.098 -0.240 1.380 -0.012 1.164 2.324 -0.498 -0.474 0.860 -0.588 -0.324
  MeteoSwiss
1       -0.6
2       -1.2
3       -1.0
4       -0.8
5       -0.4
6       -0.2 
```

我想更改行和列的位置。

我使用 rbind 如下：

```
data <- data.frame(hour1=numeric(0),hour2=numeric(0),hour3=numeric(0),hour4=numeric(0),hour5=numeric(0),hour6=numeric(0),hour7=numeric(0),hour8=numeric(0),hour9=numeric(0),hour10=numeric(0),hour11=numeric(0),hour12=numeric(0),hour13=numeric(0),hour14=numeric(0),hour15=numeric(0),hour16=numeric(0),hour17=numeric(0),hour18=numeric(0),hour19=numeric(0),hour20=numeric(0),hour21=numeric(0),hour22=numeric(0),hour23=numeric(0),hour24=numeric(0))

data <- rbind(data[1,],data2)
data <- rbind(data[2,],data3)
data <- rbind(data[3,],data4)
data <- rbind(data[4,],data5)
data <- rbind(data[5,],data7)
data <- rbind(data[6,],data8)
data <- rbind(data[7,],data10)
data <- rbind(data[8,],data12)
data <- rbind(data[9,],data13)
data <- rbind(data[10,],data14)
data <- rbind(data[11,],data17)
data <- rbind(data[12,],data19)
data <- rbind(data[13,],data25)
data <- rbind(data[14,],data28)
data <- rbind(data[15,],data29)
data <- rbind(data[16,],data31)
data <- rbind(data[17,],data32)
data <- rbind(data[18,],sw) 
```

问题是显然 rbind 不能用于超过 2 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:15:58.513

可能您正在寻找：

```
 library(reshape2)
 melt(data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T00:45:03.467

使用重塑可能有更好的方法，但这是我目前能想到的

```
## df is your data frame I am creating a dummy one here...
df <- data.frame(N1 = runif(5), N2 = runif(5), N3 = runif(5), N4 = runif(5))

## then we create a list of single column data frames...
dfList <- lapply(1:ncol(df), function(x) data.frame(col = df[[x]]))

## then we bind them all using do.call and rbind
df <- do.call(rbind, dfList) 
```

# switch-statement - OpenMP 工具开关...案例

> ID：15855047
> 
> 赞同：1
> 
> 时间：2013-04-06T19:23:07.243
> 
> 标签：switch-statement, openmp, parallels

我正在尝试`switch ... case`使用 OpenMP 指令并行化（c++），但尽管我尽了最大努力，但代码比正常的顺序执行要慢。

我用过`#pragma parallel`，，`#pragma sections`我试图用 if ... else 语句重写 switch case，但没有好的结果...

```
switch (number) {
  case 1:
    f1();
    break;
  case 2:
    f2();
    break;
  case 3:
    f3();
    break;
  case 4:
    fn();
    break;
} 
```

然后还有第二个问题，OpenMP 不会中断或返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:13:21.067

switch case 不能在 Openmp 中实现，只需添加 pragma 之类的并行部分即可。沿着并行部分运行的线程通过循环索引在它们之间划分工作，否则它们在条件循环中执行相同的工作。Openmp 部分需要知道它需要处理多少个元素或决定开始和结束的主要条件。你想让输入部分并行而不是函数（f1，f2，.. fn），所以我猜你正在处理很多“**数字**”。一种方法是在数组/向量中收集这些数字。然后，你可以沿着这个向量/数组做一个并行，调用相应的函数。

```
while(some_condition_on_numbers)
{
    // Collect Numbers in a vector / some array    
}

#pragma omp parallel for
for(int counter = 0; counter < elements_to_process; counter++)
{
    F(array_of_number[counter]);
}

F(int choice)
{
    if(choice = 1) {f1(); }
    if(choice = 2) {f2(); }
    ..
} 
```

# codeigniter - Codeigniter - url 段替换或重定向

> ID：15855048
> 
> 赞同：0
> 
> 时间：2013-04-06T19:23:08.253
> 
> 标签：codeigniter, url, redirect

我有一个基本控制器 ( `base`)，所有其他控制器都从该控制器扩展。放在这里的任何东西都会覆盖其他控制器，重定向将在这里。

**网址示例：**

```
 http://domain.com/controllerone/function
 http://domain.com/controllertwo/function
 http://domain.com/controllerthree/function 
```

使用下面的代码。会给我控制器名称

```
$this->uri->segment(1); 
```

上述每个控制器都需要重定向到单独的 URL，但功能部分不应更改：

```
 http://domain.com/newcontrollerone/function
 http://domain.com/newcontrollertwo/function
 http://domain.com/newcontrollerthree/function 
```

在我的基本控制器中，我想要以下逻辑：

```
 $controller_name =   $this->uri->segment(1);

    if($controller_name === 'controllerone'){
       // replace the controller name with new one and redirect, how ?
    }else if($controller_name === 'controllertwo'){
     // replace the controller name with new one and redirect, how ?
    }else{
        // continue as normal
   } 
```

我在想我应该使用`redirect()`函数和`str_replace()`，但不知道这些会有多有效。理想情况下，我不想使用该`Routing`课程。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:30:23.040

尝试

```
header("Location:".base_url("newcontroller/".$this->uri->segment(2))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-01T10:36:12.157

使用 segment_array 的简单解决方案：

```
$segs = $this->uri->segment_array();

if($segs[1] === 'controllerone'){
  $segs[1] = "newcontroller";
   redirect($segs);
}else if($segs[1] === 'controllertwo'){
   $segs[1] = "newcontroller2";
   redirect($segs);
}else{
    // continue as normal
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T00:44:23.863

[CodeIgniter 的 URI Routing](http://ellislab.com/codeigniter/user-guide/general/routing.html)应该能够在这种情况下提供帮助。但是，如果您有充分的理由不使用它，那么此解决方案可能会有所帮助。

潜在的重定向在一个数组中，其中*键*是在 URL 中查找的控制器名称，*值*是要重定向到的控制器的名称。`if-then-else`这可能不是最有效的，但我认为它应该比可能很长的声明更容易管理和阅读。

```
//Get the controller name from the URL
$controller_name = $this->uri->segment(1);
//Alternative: $controller_name = $this->router->fetch_class();

//List of redirects
$redirects = array(
    "controllerone" => "newcontrollerone",
    "controllertwo" => "newcontrollertwo",
    //...add more redirects here
);

//If a redirect exists for the controller    
if (array_key_exists($controller_name, $redirects))
{
    //Controller to redirect to
    $redirect_controller = $redirects[$controller_name];
    //Create string to pass to redirect
    $redirect_segments = '/'
                       . $redirect_controller
                       . substr($this->uri->uri_string(), strlen($controller_name)); //Function, parameters etc. to append (removes the original controller name)
    redirect($redirect_segments, 'refresh');    
}
else
{
    //Do what you want...
} 
```

# ms-access - 使用 powershell 自动化 MSACCESS 应用程序

> ID：15855059
> 
> 赞同：1
> 
> 时间：2013-04-06T19:24:26.367
> 
> 标签：ms-access, powershell, automation, sendkeys

我希望能够使用 Sendwait 函数使用 powershell 命令自动化 MS-ACCESS 应用程序。不幸的是，我无法以通常的方式处理实际的应用程序窗口。我可以获取 MS-ACCESS 本身的句柄，但尝试使用 Sendwait 来自动化窗口失败。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T21:47:40.413

为什么需要发送密钥？为什么不直接使用相关对象的方法和属性。

去吧：

要启动 Access，打开数据库，然后打印报告，然后退出？

```
$Acc = New-Object –com Access.Application

$Acc.OpenCurrentDataBase("c:\t.accdb")
$Acc.docmd.OpenReport("rptCustomers")
$Acc.Quit() 
```

因此，Access 应用程序的大多数（如果不是全部）方法和属性都可以通过 power-shell 使用，因此，我认为您不需要也不想尝试使用某种类型的发送密钥，因为这往往是相当不稳定的，而且一种使事情自动化的糟糕方法。您可能想指出您需要什么命令或什么，但您也可以通过这种方式调用 VBA 代码，如前所述，甚至添加记录等。

# angularjs - AngularJS如何将数据从一个控制器传递到不同的指令

> ID：15855060
> 
> 赞同：-1
> 
> 时间：2013-04-06T19:24:31.300
> 
> 标签：angularjs, angularjs-directive, angularjs-controller

我不确定我是否可以这样做或有更好的方法。我需要有人指导我。

我使用指令创建了两个模板（两个指令在同一页面中）。让我们说

*   用于显示视频的directiveVideo
*   用于展示照片的directivePhoto

然后我有一个控制器。这个控制器请求两个不同的数据，视频和照片。我的问题是，如何将视频数据传递给在directiveVideo 中显示，将照片数据传递给directivePhoto

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:38:38.183

你的问题非常模糊，所以我会给出同样模糊的答案。如果您想要更具体的内容，您需要编辑您的问题以包含一些代码 - 最好在 Plunker 中。

如果您的控制器声明了两个作用域变量`videos`和`photos`，那么您可以简单地将它们作为属性传递给您的指令：

```
<div photos="photos"></div>
<div videos="videos"></div> 
```

你可以从你的指令中读到这个。假设您有一个隔离范围：

```
scope: { photos: '=' } 
```

否则：

```
scope: true,
link: function ( scope, element, attrs ) {
  attrs.$observe( 'photos', function ( val ) {
    $scope.photos = val;
  });
} 
```

您的模板可以访问它，但它需要：

```
<ul>
  <li ng-repeat="photo in photos"><img ng-src="{{photo.url}}" /></li>
</ul> 
```

# javascript - 如何将 JSON 转换为数组

> ID：15855063
> 
> 赞同：0
> 
> 时间：2013-04-06T19:24:48.727
> 
> 标签：javascript, jquery, arrays, json, parsing

这是我对*StackOverflow*的第一个问题。我认为答案并不那么复杂，但我对*Javascript*很陌生。

我有一个解析这个**JSON**对象的**JQuery AJAX函数：**

 **```
{
  "Users":[
    {
      "key":"1",
      "label":"Tom Clancy"
    },
    {
      "key":"12",
      "label":"Steve Martin"
    }
  ]
} 
```

并且应该获得与以下相同的结果：

```
var sections = [{
    key: 1,
    label: "Tom Clancy"
  }, {
    key: 12,
    label: "Steve Martin"
  }
]; 
```

我能够遍历**JSON**元素，但我不知道如何继续。

你能提供建议吗？

编辑：我仍然无法让它工作......这是我的代码：

```
 var sections=[
        {key:1, label:"Section A"},
        {key:2, label:"Section B"},
        {key:3, label:"Section C"},
        {key:4, label:"Section D"}
    ];
    $.ajax({
    url: '/WebOffice/ListaUtenti',
    type: "POST",
    dataType: 'json',
    success: function (data) 
    {
        console.log( "success" );
        sections = data.Users;
    }});

    scheduler.createTimelineView({
        name:   "matrix",
        x_unit: "day",
        x_date: "%d %M",
        x_step: 1,
        x_size: 15,
        y_unit: sections,
        y_property: "section_id"
    }); 
```

jquery ajax 调用不会将新值分配给部分（调用状态为成功，已验证），因此调度程序仍显示原始部分。我哪里错了？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:06:59.070

我会解释你的过程。转到任何在线 JSON 格式化程序，可能是[这个](http://jsonformatter.curiousconcept.com/)并漂亮地打印您的 JSON。它会显示为。

```
{
   "Users":[
      {
         "key":"1",
         "label":"Tom Clancy"
      },
      {
         "key":"12",
         "label":"Steve Martin"
      }
   ]
} 
```

`Users`对象数组也是如此。`Users[0]`是第一个对象，`Users[1]`是第二个对象。因此，您可以轻松地迭代 JSON 并获得您想要的结果。

现场演示：http: [//jsfiddle.net/sbymr/](http://jsfiddle.net/sbymr/)

查看控制台的输出。**

# c# - 使用 Windows 身份验证反对 Active Directory 的 Asp.net 网页

> ID：15855064
> 
> 赞同：0
> 
> 时间：2013-04-06T19:24:57.487
> 
> 标签：c#, asp.net, active-directory, windows-authentication

我整晚都在搞这个，这真的很令人沮丧。我终于可以显示该网页，但由于某种原因它无法正常工作，这意味着它会将我返回到我的错误页面并指出“无法验证用户，请重试！”。我无法弄清楚这一点，因为这可以在我安装了 Visual Studio 的本地机器上完美找到。

请如果有人可以花时间帮助解决这个问题，我整天都在与它作斗争。谢谢

类.cs

```
public bool IsUserInSetup(string groupName, UserPrincipal user)
    {
        PrincipalContext context = new PrincipalContext(ContextType.Domain, "DomainName");
       GroupPrincipal group = GroupPrincipal.FindByIdentity(context, "GroupName");

        if (user.IsMemberOf(group))
        {
            return true;
        }
        return false;
    } 
```

身份验证.aspx.cs

```
 if (!IsPostBack)
            {
                if (Request.IsAuthenticated)
                {

                    if (gv.IsUserInSetup("GroupName", user))
                    {
                        Session["userValue"] = UserPrincipal.Current;

                        Response.Redirect("Default.aspx");

                    }
 else
                {
                    lblInfo.Text = "Could Not Authenticate User Please Try Again!";
                    lblInfo.Text += "<br><b>Name: </b>" + User.Identity.Name;
                    lblInfo.Text += "<br><b>Authenticated With: </b>";
                    lblInfo.Text += User.Identity.AuthenticationType;
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:11:04.433

应用程序在 IIS 上部署时可能失败的一个可能原因是，您将其配置为在其下运行的帐户没有足够的权限来访问 Active Directory 服务器。默认情况下，IIS 中的应用程序池在服务器帐户本地的内置 ApplicationPoolIdentity 帐户下运行。您应该转到 IIS 中的应用程序池的设置，并选择一个具有足够权限的域帐户。

这在 VS 中本地运行时有效，因为您使用您的帐户运行应用程序，该帐户可能是可以访问 Active Directory 的域帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:09:41.673

在另一个论坛上得到了答案，但我无缘无故地做了很多额外的工作。Asp.net 有一个 USER.ISINROLE("GROUPNAME") 并且我使用了它。

# ektron - 在 C# 中以管理员身份更新成员的自定义属性

> ID：15855070
> 
> 赞同：0
> 
> 时间：2013-04-06T19:25:46.133
> 
> 标签：ektron

我为成员添加了一个自定义属性，并希望创建一个循环遍历所有成员并初始化自定义属性的例程。

我正在使用 Ektron 版本 8.5 sp1

以下是我尝试过的两种方法： 方法 1 - 此方法不返回 userData 对象

```
var userManager = new Ektron.Cms.Framework.User.UserManager(Ektron.Cms.Framework.ApiAccessMode.Admin);
var userData = userManager.GetItem(userManager.UserId, true);
userData.CustomProperties["Year 7 Year"].Value = newYear7Year;
userManager.Update(userData); 
```

方法 2 - 我担心这行不通，因为我没有将 ApiAccessMode 指定为 Admin

```
var commonApi = new Ektron.Cms.CommonApi();
var userApi = new Ektron.Cms.API.User.User();
var userData = userApi.GetUser(commonApi.UserId, false, false);
userData.CustomProperties["Year 7 Year"].Value = newYear7Year;
userApi.UpdateUser(userData); 
```

我应该如何更新会员？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:54:07.963

我有要更新的自定义属性。当用户创建帐户时，我会更新它们，但我认为这没有什么不同。我不使用 CommonApi。以下是我所做的基本工作：

```
Ektron.Cms.API.User.User userApi = new Ektron.Cms.API.User.User();
Ektron.Cms.UserData userData = userApi.GetUser(PUT_USER_ID_HERE);
userData.CustomProperties[keyName].Value = value;
userApi.UpdateUser(userData); 
```

PUT_USER_ID_HERE 的值决定了将更新哪个用户。
我不需要对管理员用户或类似的东西做任何特别的事情，所以希望这对你来说也不会成为问题。

# java - GL11 纹理渲染错误

> ID：15855072
> 
> 赞同：1
> 
> 时间：2013-04-06T19:25:58.327
> 
> 标签：java, textures, render, lwjgl

我正在尝试在基本四边形上渲染图像，我查看了[Space Invaders Example Game](http://lwjgl.org/wiki/index.php?title=Space_Invaders_Example_Game)的代码，并将该代码实现到我的中。图像在屏幕上以正确的颜色呈现，但图像似乎发生了变化。这是我要渲染的图像：

[http://img203.imageshack.us/img203/5264/testwq.png](http://img203.imageshack.us/img203/5264/testwq.png)

这是它的渲染方式：

[http://img593.imageshack.us/img593/6849/test2uh.png](http://img593.imageshack.us/img593/6849/test2uh.png)

图像是 128x128，四边形也是。

这是我的代码：

```
public class RenderEngine
{
    private IntBuffer intbuf = BufferUtils.createIntBuffer(1);
    private ColorModel glAlphaColorModel;
    private ColorModel glColorModel;

    public RenderEngine()
    {
        this.glAlphaColorModel = new ComponentColorModel(ColorSpace.getInstance(ColorSpace.CS_sRGB), new int[] { 8, 8, 8, 8 }, true, false, Transparency.TRANSLUCENT, DataBuffer.TYPE_BYTE);
        this.glColorModel = new ComponentColorModel(ColorSpace.getInstance(ColorSpace.CS_sRGB), new int[] { 8, 8, 8, 0 }, false, false, Transparency.OPAQUE, DataBuffer.TYPE_BYTE);
    }

    public void bindTexture(String filename)
    {
        try
        {
            File file = new File(CivilPolitica.instance.getDir(), "resources/" + filename);
            FileInputStream fis = new FileInputStream(file);
            GL11.glBindTexture(GL11.GL_TEXTURE_2D, this.getTexture(fis));
            fis.close();
        }
        catch (Exception e)
        {
            e.printStackTrace();
            System.exit(0);
        }
    }

    private int getTexture(InputStream in)
    {
        try
        {
            GL11.glGenTextures(this.intbuf);
            int id = this.intbuf.get(0);

            GL11.glBindTexture(GL11.GL_TEXTURE_2D, id);

            BufferedImage bi = ImageIO.read(in);
            int format = bi.getColorModel().hasAlpha() ? GL11.GL_RGBA : GL11.GL_RGB;

            ByteBuffer texData;
            WritableRaster raster;
            BufferedImage texImage;

            int texWidth = 2;
            int texHeight = 2;

            while (texWidth < bi.getWidth())
            {
                texWidth *= 2;
            }
            while (texHeight < bi.getHeight())
            {
                texHeight *= 2;
            }

            if (bi.getColorModel().hasAlpha())
            {
                raster = Raster.createInterleavedRaster(DataBuffer.TYPE_BYTE, texWidth, texHeight, 4, null);
                texImage = new BufferedImage(this.glAlphaColorModel, raster, false, new Hashtable<String, Object>());
            }
            else
            {
                raster = Raster.createInterleavedRaster(DataBuffer.TYPE_BYTE, texWidth, texHeight, 3, null);
                texImage = new BufferedImage(this.glColorModel, raster, false, new Hashtable<String, Object>());
            }

            Graphics g = texImage.getGraphics();
            g.setColor(new Color(0f, 0f, 0f, 0f));
            g.fillRect(0, 0, texWidth, texHeight);
            g.drawImage(bi, 0, 0, null);

            byte[] data = ((DataBufferByte) texImage.getRaster().getDataBuffer()).getData();

            texData = ByteBuffer.allocateDirect(data.length);
            texData.order(ByteOrder.nativeOrder());
            texData.put(data, 0, data.length);
            texData.flip();

            glTexParameteri(GL11.GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL11.GL_LINEAR);
            glTexParameteri(GL11.GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL11.GL_LINEAR);

            glTexImage2D(GL11.GL_TEXTURE_2D, 0, GL11.GL_RGBA, bi.getWidth(), bi.getHeight(), 0, format, GL_UNSIGNED_BYTE, texData);

            return id;
        }
        catch (Exception e)
        {
        e.printStackTrace();
            System.exit(0);
        return 0;
       }
   }
} 
```

而实际的四边形：

```
 CivilPolitica.instance.renderer.bindTexture("test.png");

        GL11.glPushMatrix();
        GL11.glTranslatef(128, 128, 0);

        GL11.glBegin(GL11.GL_QUADS);

        GL11.glTexCoord2f(0, 0);
        GL11.glVertex2i(0, 0);

        GL11.glTexCoord2f(0, 127);
        GL11.glVertex2i(0, 128);

        GL11.glTexCoord2f(127, 127);
        GL11.glVertex2i(128, 128);

        GL11.glTexCoord2f(127, 0);
        GL11.glVertex2i(128, 0);

        GL11.glEnd();

        GL11.glPopMatrix(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T19:30:10.140

```
 GL11.glTexCoord2f(0, 0);
    GL11.glVertex2i(0, 0);

    GL11.glTexCoord2f(0, 127);
    GL11.glVertex2i(0, 128);

    GL11.glTexCoord2f(127, 127);
    GL11.glVertex2i(128, 128);

    GL11.glTexCoord2f(127, 0);
    GL11.glVertex2i(128, 0); 
```

一定是

```
 GL11.glTexCoord2f(0.0f, 0.0f);
    GL11.glVertex2i(0, 0);

    GL11.glTexCoord2f(0.0f, 1.0f);
    GL11.glVertex2i(0, 128);

    GL11.glTexCoord2f(1.0f, 1.0f);
    GL11.glVertex2i(128, 128);

    GL11.glTexCoord2f(1.0f, 0.0f);
    GL11.glVertex2i(128, 0); 
```

因为它是从 0.0f 到 1.0f 的纹理坐标（一侧是 0.0f，另一侧是 1.0f，这样它不依赖于分辨率）

# c# - 第二次打开 PDF 时 Visual Studio 崩溃

> ID：15855074
> 
> 赞同：0
> 
> 时间：2013-04-06T19:26:17.243
> 
> 标签：c#, pdf, visual-studio-2012, process, itextsharp

在我的程序中，当我使用以下命令打开 PDF 文件时，我遇到了一个奇怪的问题：

```
 Process.Start("test.pdf"); 
```

第一次，文件打开得很好，但第二次我在任何 pdf 文件上使用此命令时，在代码中的任何位置，vshost.exe 崩溃。

我的下一步是禁用 vshost，在禁用 vshost 的情况下，应用程序自身崩溃。

当我说“崩溃”时，我的意思是它已经停止响应。

如果我创建一个新项目，它工作得很好，所以我的项目一定有问题吗？

我`iTextSharp`在代码中的其他点使用库来创建 pdf，这可能是一个原因吗？

我意识到这个问题非常普遍，但我不知道是什么原因造成的，所以我不知道要提供什么信息。

更多信息：

当我在程序崩溃后查看调试器的输出时，它显示“程序'[4320] SmartShelf.exe: Managed (v4.0.30319)' has exited with code -1073741819 (0xc0000005)'Access violation'。”

编辑：有人知道使用 c# 查看 pdf 的任何其他方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:34:15.767

在调用 start("asdf.pdf") 之前，我会使用 using context 或 dispose 命令来摆脱任何打开的文件连接，看看是否能解决它。

还要确保您的进程在win7中以管理员身份运行。您可以尝试的另一件事是使用 process.start(cmd, "aspdf.pdf") 以这种方式启动命令窗口并调用 pdf 启动器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T23:21:12.130

虽然并不完美，但我最终的解决方案是在 webBrowser 控件中显示 pdf，方法是将 URL 设置为使用 PDF 的路径

`webBrowser1.Navigate("asdf.pdf");`

这将它显示在 adobe reader 中，但在 web 浏览器中。

这个解决方案非常适合我的需求（如果不是更好的话）并且不会导致应用程序崩溃。谢谢大家的建议。

# git - 如何 git 合并已经解决了与 master 冲突的分支？

> ID：15855076
> 
> 赞同：0
> 
> 时间：2013-04-06T19:26:28.337
> 
> 标签：git, version-control, merge, git-merge

我有一个当前与`master`. 另一个开发人员刚刚合并`master`到他们的分支并解决了所有冲突，但他们还没有做相反的事情：将他们的分支合并到 master。

当我将他们的分支合并到我的分支时，我仍然会得到他们在上次合并提交中解决的所有冲突。我如何告诉 git 使用其他开发人员已经完成的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:37:56.590

关于什么

```
git checkout master
git merge -Xtheirs otherbranch 
```

# tfs - 如何删除 Team Foundation Server 2012 中的工作项区域？

> ID：15855080
> 
> 赞同：2
> 
> 时间：2013-04-06T19:26:38.257
> 
> 标签：tfs, agile, alm

我正在考虑从 FogBugz 迁移到 TFS 2012 以进行错误/缺陷跟踪。在 FogBugz 中，创建数据库、报告等区域很容易。我去了工作项区域，它有一个与项目名称匹配的区域。我创造了它的孩子来匹配我们不同的团队。后来我决定在 TFS 中添加团队（我是 TFS 的新手，有很多事情要弄清楚！）所以它创建了工作区域来匹配团队。所以现在我有：

```
ProjectName
--Blah
--Blah Team
--Foo
--Foo Team 
```

现在我想回去删除 Blah 和 Foo，因为它现在的方式是愚蠢和混乱的。

如何删除这些我不再需要的工作项区域？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:53:55.360

转到团队 Web 访问，然后右键单击您不再需要的项目，将出现一个上下文菜单，其中包含删除等选项。

# opencv - 在使用 opencv 的图像处理程序中包含 assert.h 的必要性是什么？

> ID：15855081
> 
> 赞同：0
> 
> 时间：2013-04-06T19:26:51.110
> 
> 标签：opencv

我的意思是当程序只跟踪你的脸和眨眼时会做出什么断言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:28:27.263

如果您不做出任何断言，则不需要包含它。任何确实需要它的文件都应该包含它。

# java - 创建列表 使用xml格式以及如何验证它

> ID：15855086
> 
> 赞同：-2
> 
> 时间：2013-04-06T19:27:29.630
> 
> 标签：java, xml, collections, map, stack

我有这个问题

1.- 第一个是如何创建一个`list<String> list`不使用 .xml 的 XML 格式

例如，我想把它放在列表中：

```
<list_conferences>
<conference>
<code> 0001371 </code>
<name> "examples" </name>
</conference>
</list_conferences> 
```

2.-我如何验证该列表是否使用堆栈*格式正确*

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:57:19.803

例如，您可以看看 JAXB。JAXB 帮助您将 XML 字符串转换为 java bean，反之亦然

# html - 如何在居中徽标的两侧提供导航选项？

> ID：15855089
> 
> 赞同：0
> 
> 时间：2013-04-06T19:27:40.703
> 
> 标签：html, css, navigation

我想创建一个顶部标题，其中徽标位于中心，导航选项位于左侧和右侧。

以下是我到目前为止所拥有的，但不知道如何在那里形成。我该怎么做才能做到这一点？

```
<div class="header">
    <div class="nav">
        <ul>
            <li>Option 1</li>
            <li>Option 2</li>
            <li>Option 3</li>
            <li>Option 4</li>
    <img class="logo_home" src="logo.png" height="100">
            <li>Option 5</li>
            <li>Option 6</li>
            <li>Option 7</li>
            <li>Option 8</li>
        </ul>
    </div>
</div> 
```

CSS：

```
ul {
list-style:none;
}
li {
display:inline;
}
.header {
background-color: #999;
width: 100%;
height: 80px;
top: 0;
left: 0;
position:absolute;
}
 .logo_home {
display:block;
margin-left:auto;
margin-right:auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:38:18.587

这是关于我认为您正在努力实现的目标的[小提琴。](http://jsfiddle.net/NRd5H/2/)更改`li inline to float`, 现在 ul 需要根据您的需要进行修改，因此可以居中。

这是另一个[小提琴](http://jsfiddle.net/NRd5H/3/)，我认为这正是您想要实现的。您只需要删除`display:block`图像并添加`text-align:center`到 ul。像这样，元素位于中心。

所以这里是html

```
<div class="header">
    <div class="nav">
        <ul>
            <li href="#">Option 1</li>
            <li href="#">Option 2</li>
            <li href="#">Option 3</li>
            <li href="#">Option 4</li>
            <li><img class="logo_home" src="logo.png" height="100" /></li>
            <li href="#">Option 5</li>
            <li href="#">Option 6</li>
            <li href="#">Option 7</li>
            <li href="#">Option 8</li>
        </ul>
    </div>
</div> 
```

这是你的CSS

```
ul {
list-style:none;
    text-align:center;/* this will center your items*/
}
li {
    margin: 0 5px;
    display:inline;
}
.header {
background-color: #999;
width: 100%;
height: 80px;
}
 .logo_home {
margin-left:auto;
margin-right:auto;
/*removed display:block*/
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T19:41:01.797

我`display: inline`从`li`to更改为`float: left`并将其包装`img`在`li`标签中。看起来这就是你要找的东西：[**FIDDLE**](http://jsfiddle.net/zTWB6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T19:41:42.683

我认为这就是你想要的：

[http://jsfiddle.net/VWcVw/](http://jsfiddle.net/VWcVw/)

将所有内容设置为`display: inline`并将图像放入`<li>`标签中。

编辑：这是一个更好的版本，徽标两侧的链接水平堆叠。[http://jsfiddle.net/VWcVw/1/](http://jsfiddle.net/VWcVw/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T19:41:52.110

那就是走得更远。我会将左右分为两个类，也放置链接。

```
 .logo_home img{
margin:0 auto;
}
.navleft {
    float: left;
    width: 500px;
    height: 90px;
    margin: 0 auto;
    padding: 0;
    }
.navleft li {
    float: left;
    padding: 5px 5px 5px 5px;
}
.navright {
    float: right;
    width: 500px;
    height: 90px;
    margin: 0 auto;
    padding: 0;
    }
    .navright li {
    float: left;
    padding: 5px 5px 5px 5px;
}
</style>
</head>
<body>
<div class="header">
        <ul>
            <div class="navleft">
            <li><a href="#">Option 1</li>
            <li><a href="#">Option 2</li>
            <li><a href="#">Option 3</li>
            <li><a href="#">Option 4</li>
    </div>      
    <img class="logo_home" src="logo.png" height="100">
    <div class="navright">
            <li><a href="#">Option 5</li>
            <li><a href="#">Option 6</li>
            <li><a href="#">Option 7</li>
            <li><a href="#">Option 8</li>
        </ul>
    </div>
</div> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-06T19:42:08.067

像这样的东西会做到这一点-

```
.left-li {
    float:left;
}
img {
    float:left;
}
.right-li {
    float:left;
} 
```

这是HTML

```
<div class="header">
<div class="nav">
    <ul class="left-li">
        <li href="#">Option 1</li>
        <li href="#">Option 2</li>
        <li href="#">Option 3</li>
        <li href="#">Option 4</li>
    </ul>
<img class="logo_home" src="logo.png" height="100">
    <ul class="right-li">
        <li href="#">Option 5</li>
        <li href="#">Option 6</li>
        <li href="#">Option 7</li>
        <li href="#">Option 8</li>
    </ul>
</div> 
```

# cuda - 使用 CUDA 创建二维数组

> ID：15855090
> 
> 赞同：1
> 
> 时间：2013-04-06T19:28:08.507
> 
> 标签：cuda, multidimensional-array

在 cuda c 编程指南文档中有一个显示二维数组的示例：

```
// Kernel definition
__global__ void MatAdd(float A[N][N], float B[N][N], float C[N][N])
{
int i = blockIdx.x * blockDim.x + threadIdx.x;
int j = blockIdx.y * blockDim.y + threadIdx.y;
if (i < N && j < N)
C[i][j] = A[i][j] + B[i][j];
}

int main()
{
...
// Kernel invocation
dim3 threadsPerBlock(16, 16);
dim3 numBlocks(N / threadsPerBlock.x, N / threadsPerBlock.y);
MatAdd<<<numBlocks, threadsPerBlock>>>(A, B, C);
...
} 
```

我使用具有以下形式的二维数组并且可以正常工作：

```
dim3 grid[COLUMNS][ROWS];
kernel_Matrix<<<grid,1>>>(dev_strA, dev_strB, dev_Matrix);

__global__ void add(int *a, int *b, int *c)
{
int x = blockIdx.x;
int y = blockIdx.y;
int i = (COLUMNS*y) + x;
c[i] = a[i] + b[i];
} 
```

有没有一种方法可以用 [ ][ ] 定义实现二维数组？我以这种方式进行了测试，但不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T19:46:25.857

`dim3`不是数组，而是在 CUDA 头文件 (vector_types.h) 中定义的结构。该结构用于在全局函数的执行配置中指定 GRID 的维度，即在`<<< >>>`. 它不保留“真实”块，它只是配置了一些将被执行的块。

初始化此结构的唯一两种方法（据我所知）是：
1\. `dim3 grid(x, y, z);`
2.`dim3 grid = {x, y, z};`

**编辑：** 具有初始化和将数组传递给内核函数的主机代码，`dim3`您将能够通过以下方式访问其元素`[][]`：

```
float A[N][N];
float B[N][N];
float C[N][N];

float (*d_A)[N]; //pointers to arrays of dimension N
float (*d_B)[N];
float (*d_C)[N];

for(int i = 0; i < N; i++) {
    for(int j = 0; j < N; j++) {
        A[i][j] = i;
        B[i][j] = j;
    }
}       

//allocation
cudaMalloc((void**)&d_A, (N*N)*sizeof(float));
cudaMalloc((void**)&d_B, (N*N)*sizeof(float));
cudaMalloc((void**)&d_C, (N*N)*sizeof(float));

//copying from host to device
cudaMemcpy(d_A, A, (N*N)*sizeof(float), cudaMemcpyHostToDevice);
cudaMemcpy(d_B, B, (N*N)*sizeof(float), cudaMemcpyHostToDevice);
cudaMemcpy(d_C, C, (N*N)*sizeof(float), cudaMemcpyHostToDevice);

// Kernel invocation
dim3 threadsPerBlock(16, 16);
dim3 numBlocks(N / threadsPerBlock.x, N / threadsPerBlock.y);
MatAdd<<<numBlocks, threadsPerBlock>>>(d_A, d_B, d_C);

//copying from device to host
cudaMemcpy(A, (d_A), (N*N)*sizeof(float), cudaMemcpyDeviceToHost);
cudaMemcpy(B, (d_B), (N*N)*sizeof(float), cudaMemcpyDeviceToHost);
cudaMemcpy(C, (d_C), (N*N)*sizeof(float), cudaMemcpyDeviceToHost); 
```

# java - Java 斐波那契数列 - 数组中的返回值

> ID：15855095
> 
> 赞同：1
> 
> 时间：2013-04-06T19:28:28.407
> 
> 标签：java, arrays, recursion, fibonacci

我正在尝试将斐波那契数列递归计算为 100，使用 buildArray 方法将这些返回值存储到数组中，然后打印存储在数组中的值。当我尝试在 main 方法中打印 A[N] 时，出现“无法解析为变量”编译错误。我正在使用 longs，因为我正在计算最多 100 个系列，尽管我不知道是否有必要使用 longs。

如果我用 F(N) 代替 A[N] 代码可以工作，但我需要将值放入一个数组并打印该数组。此代码甚至将值存储在数组中吗？我刚开始java，谢谢。

```
public class MyFibonacci {
    public static final int MAX = 100;

    public static long[] buildArray(int MAX, int N) {
        long[] A = new long[MAX];

        A[0] = 0;
        A[1] = 1;

        for(N = 2; N < MAX; N++)
            A[N] = F(N);
        return A;
    }

    public static long F(int N) {
        if(N == 0)
            return 0;
        if(N == 1)
            return 1;
        return F(N - 1) + F(N - 2);
    }

    public static void main(String[] args) {
        for(int N = 0; N < MAX; N++)
            System.out.println(N + " " + A[N]);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:32:13.560

您已声明`A[]`在`buildArray(int MAX, int N)`. 因此，`A[]`在`buildArray`. 您需要将声明移至`long A[]` 类变量。

此外，您实际上需要运行`buildArray`才能构建数组。

为了将来参考，我强烈建议使用适当的标签结构。它使查看正在发生的事情变得更加容易。我已经编辑了您的代码（尽管它必须被批准）以包含它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T19:37:00.357

我认为这是您需要的代码：

```
public class MyFibonacci{

    public static final int MAX = 100;
    long[] A = new long[MAX];
    public static long[] buildArray(int N){
    A[0] = 0;
    A[1] = 1;

    for (N = 2; N < MAX; N++){
        A[N] = F(N);
        }
    return A;
    }

    public static long F(int N)
    {
   if (N == 0) return 0;
   if (N == 1) return 1;
   return F(N-1) + F(N-2);
    }

    public static void main(String[] args)
    {
    buildArray(<some number - not sure where you get it from? N by the way in buildArray()>);
   for (int N = 0; N < MAX; N++)
      StdOut.println(N + " " + A[N]);
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T19:35:54.257

主要问题是您永远不会调用该`buildArray`函数。

要使您的代码正常工作，您只需将其添加到`main`：

```
long[] A = buildArray(MAX, 0); 
```

**其他一些事情：**

您可以删除参数`N`并在函数中声明它（或将其全部删除，见下文）。

您已经可以访问`MAX`，无需将其传递给函数。

for-loop in`buildArray`效率比较低，可以在里面设置数组`F`。

鉴于以下情况，`A`作为类变量比传递它更干净。

**最后，代码：**

```
static int MAX = 100;
static long[] A;
public static void buildArray()
{
  A = new long[MAX+1];
  F(MAX);
}

public static long F(int N)
{
  long val;
  if (N < 2)
    val = N;
  else if (A[N] != 0) // HEY! It's already calculated! Awesome! Just return it.
    return A[N];
  else
    val = F(N-1) + F(N-2);
  A[N] = val;
  return val;
}
public static void main(String[] args)
{
  buildArray();
  for (int N = 0; N <= MAX; N++)
    System.out.println(N + " " + A[N]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-01T01:15:59.113

由于您可以分配数组内存，因此在计算期间使用它是很有意义的。考虑这种方法：

```
public static long[] f_a(int n) {
    long[] a = new long[n];
    a[1] = 1;
    for (int i = 2; i < n; i++)
        a[i] = a[i-1] + a[i-2];
    return a;
} 
```

# javascript - 用户滚动时尝试执行js代码

> ID：15855100
> 
> 赞同：0
> 
> 时间：2013-04-06T19:28:48.800
> 
> 标签：javascript, jquery

我正在尝试执行一些 js 代码，现在它们被警报替换，当滚动条从顶部移动到任何其他高度时。

因此，当用户第一次滚动时，“已滚动”警报将触发。如果用户滚动回到顶部，它会重置并触发“回到顶部”的警报。

我尝试使用 scrollTop、scrollHeight 和 clientHeight 执行此操作，但它似乎不会在滚动时触发警报。

每次用户滚动时，我都不会尝试触发警报，只是在第一次滚动时。但如果用户滚动回顶部，它会重置并触发新警报。

因此，如果他们从顶部滚动到 X，则会触发“滚动”警报。如果他们从 X 滚动到 Y，则不会发生任何事情。如果从 X 或 Y 滚动到顶部，则会触发“返回顶部”。然后，如果从顶部滚动到 X 或 Y，它已重置并且警报“滚动”触发（再次）。

这是我的代码：

```
var body = $('body');
var scrollTop = body.scrollTop;
var difference = body.scrollHeight - body.clientHeight;
var percentScrolled = (scrollTop/difference)*100;
if(percentScrolled > 0){
alert("scrolled!");
} 
```

**更新**：

由于其中一条评论，我现在有了这个工作，它在滚动回顶部时触发“回到顶部”警报，但在每次滚动时触发“滚动”警报。仅当滚动条从顶部移动到顶部以外的任何其他位置时，如何才能触发“滚动”警报？

这是代码：

```
window.onscroll = function () { 
    var doc = document.body, 
    scrollPosition = doc.scrollTop,
    pageSize = (doc.scrollHeight - doc.clientHeight),
    percentageScrolled = Math.floor((scrollPosition / pageSize) * 100);

    if(percentageScrolled == 0){
        alert("back at top");
    }
    else if(percentageScrolled > 0){
        alert("scrolled");
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:55:54.557

不确定您要做什么，但听起来您可能想要某种标志：

```
var body = $('body');
var scrollTop = body.scrollTop;
var difference = body.scrollHeight - body.clientHeight;
var percentScrolled = (scrollTop/difference)*100;

if(percentScrolled > 0 && this.leftzero === undefined){
   this.leftzero = true;
   alert("scrolled!");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:43:15.763

用户滚动 x% 后使用 javascript 自动返回顶部的示例。正如 noidea3p5 所问的那样，您到底想做什么..

```
var AllowedPercentageToScroll = 20;
window.onscroll = function () { 
    var doc = document.body, 
    scrollPosition = doc.scrollTop,
    pageSize = (doc.scrollHeight - doc.clientHeight),
    percentageScrolled = Math.floor((scrollPosition / pageSize) * 100);

    if(percentageScrolled > AllowedPercentageToScroll){
       window.scrollTo(0,0); // back to top
    }
    else if(percentageScrolled > 0){ // if user starts to scroll it will trigger
        //do whatever you like, dont recommend alert though
    }
}; 
```

编辑：如果在顶部则显示状态，并在开始滚动时显示滚动活动

```
window.onscroll = function () { 
    var doc = document.body, 
    scrollPosition = doc.scrollTop,
    pageSize = (doc.scrollHeight - doc.clientHeight),
    percentageScrolled = Math.floor((scrollPosition / pageSize) * 100);

    if(percentageScrolled == 0){
       document.getElementById("status").innerHTML = "Your at the top";    
    }
    else if(percentageScrolled > 1){
        document.getElementById("status").innerHTML = percentageScrolled + "%";      
    }
};

</script>
<body>
<div style="width: 100%; position: fixed; top:0px; background-color:#c0c0c0;">
   Scroll Position: <span id="status">0%</span>
</div> 
```

# c++ - 为什么双端队列的大小会小于一个小数字？

> ID：15855106
> 
> 赞同：0
> 
> 时间：2013-04-06T19:29:33.047
> 
> 标签：c++, while-loop, deque

我有一个程序，我需要在其中做`deque`足够长的时间来将一个项目保存在某个索引处。我使用以下循环来扩展`deque`：

```
while(int1+deque1.size()<=int2){
     deque1.push_back(0);
} 
```

当两者`int1`和`int2`都是`-1`（以及在许多其他情况下；这是我在调试时注意到的）时，`deque1`会增长到一个巨大的规模（数十万个项目），但循环仍在继续。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:45:48.590

deque::size() 返回一个 unsigned long int，因此 int1 和 int2 必须是正数，否则会溢出。

这是编译器自动生成的代码。

```
while(static_cast<unsigned long>(int1)+deque1.size()<=static_cast<unsigned long>(int2)){
 deque1.push_back(0);
} 
```

因此，如果（例如）int1 是一个 8 位无符号整数，并且您给它赋值 -1，它将变为 (2^8 - 1 = 255)。这就是位编码在计算机中的工作原理。

解决方案大概如下：

```
while(int1+static_cast<ptrdiff_t>(deque1.size())<=int2){
 deque1.push_back(0);
} 
```

干杯。

# mysql - C# Mysql 异步等待

> ID：15855107
> 
> 赞同：0
> 
> 时间：2013-04-06T19:29:34.210
> 
> 标签：mysql, asynchronous

有什么方法可以制作经典：

```
MySqlCommand cmd = new MySqlCommand(query, connection);
cmd.ExecuteNonQuery();
CloseConnection(); 
```

在进行许多操作时使用异步方法不冻结整个应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:32:12.183

你在使用 C# 吗？如果您为 DAL 使用实体框架，您可以创建一个数据库上下文并异步查询它。请参阅：http: [//msdn.microsoft.com/en-us/data/jj819165.aspx](http://msdn.microsoft.com/en-us/data/jj819165.aspx)

# gnuplot - GNUplot 将 OSX 系统字体添加到 PDF 输出

> ID：15855110
> 
> 赞同：1
> 
> 时间：2013-04-06T19:29:38.340
> 
> 标签：gnuplot

我需要在 GNUplot 的 PDF 输出中使用一种名为 Moon Fonts TTF 的符号字体。GNUplot 在 Aqua 终端中发现它没有问题。

我试过了：

> 设置字体路径“/Users/house/Library/Fonts/MoonPhases.ttf”

和其他从 gnuplot 帮助页面添加字体文件建议没有运气。

在排版专家的一些支持下，我还尝试了一系列 .ttf、.otf、postscript 和 unicode 映射字体，但完全没有运气：pdfcairo、postscript 或 epscairo 似乎找不到它。

GNUplot 的“显示字体路径”给出：

> 系统字体路径是“/System/Library/Fonts”“/Library/Fonts”“/Users/house/Library/Fonts”

并且字体在这些路径之一中。我还尝试将它们直接放在 GN 的工作目录中。

如果有人对如何使这项工作提出建议，将不胜感激。

OSX雪豹
GNUplot 4.6.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-13T01:14:07.570

您可以首先使用 postscript eps 终端进行绘图，然后将 eps 转换为 postscript `epstopdf`，至少在我的系统上，使用 postscript 将所需的字体嵌入到生成的 pdf 中。如果不是，您可以尝试通过直接提供 ghostscript 参数来强制它。

要使您的字体对 postscript 终端可见，请将其安装到您的字体路径中，然后使用

```
fc-cache -fv 
```

重新加载您的字体缓存。字体的名称可能会有所不同，因为对于 postscript，您必须找到字体的 postscript 名称：

```
fc-query /path/to/your/font/MoonPhases.ttf | grep postscript 
```

有关这方面的更多示例，请阅读此博客文章：

[Schriftarten über Umwege：Linux 和 Mac OS X 下的 Gnuplot](https://techblog.auf-nach-mallorca.info/2014/03/12/schriftarten-ber-umwege-gnuplot-unter-linux-und-mac-os-x/)

它是德语，但谷歌翻译应该会有所帮助。

# php - php 事件发生的概率百分比

> ID：15855115
> 
> 赞同：0
> 
> 时间：2013-04-06T19:30:18.233
> 
> 标签：php, probability

我知道这是一个菜鸟问题，但我很坚持，所以我希望你能帮助我。

我有一个整数数组。根据情况，我可以有一个包含 1,2,3 或 1,1,1 或 1,2,2 等的数组。重要的是数组中的值之间的差异可能不大于最小数字 + 2（我可以有 1、2、3 但没有 1、2、4）。现在我抓取数组的最大值和最小值并从最大值递减最小值。因为 max 和 min 之间的差异总是 0、1 或 2（数组值彼此之间不大于两个），所以我有免费的可能机会：

```
0: - all array values are equal
1: - all array values are from range <x, x + 1>
2: - all array values are from range <x-1, x+1> 
```

现在，如果我想从上面的数组中随机选择值，这很容易。但是我怎么能以比其他人更大的概率选择数字的百分比机会呢？

我是什么意思？考虑第二个示例，以及数组 x-1、x+1 中的值范围 - 让它成为 Array(2, 3, 4)。现在我想有 50% 的机会选择 4、30% 的机会选择 3 和 20% 的机会选择 2。如何将数组中的整数值与选择它的机会联系起来？

我希望你能明白我的意思，你可以帮助我。

编辑：换句话说，如果我有一个充满值的数组，如何轻松地让一系列值成为数组中所有值的一部分，选择一个值的概率比另一个值大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:36:40.927

我不确定我是否完全理解第一部分，但假设您希望有 50% 的机会选择 4、30% 的机会选择 3 和 20% 的机会选择 2。

您只需用 5 个 4、3 个 3 和 2 个 2 填充一个长度为 10 的整数数组：

```
int[] a=[4,4,4,4,4,3,3,3,2,2]; 
```

现在以相等的概率随机选择 0 到 9 之间的索引，并返回数组中该索引处的数字。这将返回 50% 的 4、30% 的 3 和 20% 的 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:46:50.733

```
$rand = rand(1, 100);
if ($rand > 50) {
    //select first array
} else {
    //select the second array and so on.
} 
```

上面的代码会有帮助吗？

# sql - postgresql FUNCTION 无法检测到 SELECT 条件

> ID：15855119
> 
> 赞同：0
> 
> 时间：2013-04-06T19:30:29.563
> 
> 标签：sql, function, postgresql

```
CREATE OR REPLACE FUNCTION heckANDinsert(
    first VARCHAR(20), surname VARCHAR(20),
  No VARCHAR(30), nation VARCHAR(30), dob DATE
) RETURNS SETOF passenger AS $$
DECLARE 

name VARCHAR(20);
Sname VARCHAR(20);
Pass VARCHAR(30);
nation VARCHAR(30);
birthdate DATE;

BEGIN

SELECT first, same,passportNo, nationality,dob 
INTO fname,sname, PassportN, nation, birthdate 
FROM passenger
WHERE 
    firstname = $1 
    AND surname = $2 
    AND passportNo = $3 
    AND nationality = $4 
    AND dob = $5;

IF NOT FOUND THEN
    INSERT INTO passenger 
    SELECT MAX(passengerid)+1, $1,$2,$3,$4,$5 
    FROM passenger;
ELSE 
    RAISE EXCEPTION 'passenger record already exists.';
END IF; 

END;
$$ LANGUAGE plpgsql; 
```

我使用

```
SELECT passenger_checkANDinsert( 
    'john', 'levis', 'v39949455', 'British', '1990-07-23'
); 
```

如果我将名字更改为另一个，该函数会将正确的结果插入数据库。但如果我更改姓氏并保持名字与数据库数据相同，它将不起作用。我猜函数中的 select 语句 WHERE 条件中有问题，但我找不到任何错误..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:58:41.763

```
CREATE OR REPLACE FUNCTION passenger_checkANDinsert

(firstname VARCHAR(20),surname VARCHAR(20),

passportNo VARCHAR(30),nationality VARCHAR(30),dob DATE)

RETURNS SETOF passenger AS
$$

DECLARE 

_exists boolean;    

BEGIN

SELECT count(*)>0 INTO  _exists FROM passenger      
WHERE firstname = $1 AND surname = $2 AND passportNo = $3 AND nationality = $4 AND dob = $5;

IF NOT _exists THEN

    INSERT INTO passenger SELECT MAX(passengerid)+1, $1,$2,$3,$4,$5 FROM passenger;

    ELSE 

    RAISE EXCEPTION 'passenger record already exists.';

    END IF; 

END;

$$

   LANGUAGE plpgsql; 
```

我认为你做得不好`MAX(passengerid)+1`，为什么不使用`bigserial`数据类型？如果您这样做只是为了不丢失该字段的顺序，那么您做得不对。

也许您需要通过以下方式为您的字段添加顺序：

```
CREATE SEQUENCE passengerid_seq;
ALTER TABLE passenger ALTER COLUMN passengerid SET DEFAULT NEXTVAL('passengerid_seq'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T23:26:03.620

```
create or replace function passenger_checkandinsert(
    _firstname varchar(20), _surname varchar(20),
    _passportno varchar(30), _nationality varchar(30), _dob date
) returns setof passenger as $$

insert into passenger (
    passengerid, firstname, surname, passportNo, nationality, dob
)
select coalesce(max(passengerid)+1, 1), $1, $2, $3, $4, $5
from passenger
where not exists ( 
    select 1
    from passenger
    where
        firstname = $1
        and surname = $2
        and passportno = $3
        and nationality = $4
        and dob = $5
    )
returning *
;
$$ language sql; 
```

*   在变量中使用列的名称可能会有问题。只需在前面加上下划线。
*   声明要插入值的列。
*   简单的 SQL 将满足您的所有需求。
*   不要`count`检查是否存在行，因为它将读取整个表。相反`exists`，它会在找到的第一个行中停止读取。
*   注意合并来处理还没有行的情况。
*   `returning *`将返回插入的行。

# c# - C# 低级键盘设备

> ID：15855121
> 
> 赞同：0
> 
> 时间：2013-04-06T19:31:14.160
> 
> 标签：c#, keyboard, device

我正在为模拟键盘的条码扫描器编写 C# dll。我和这个斗争了一段时间。我对原始输入有疑问。我发现的所有示例都需要 MainApplication 窗口句柄。如何在没有它的情况下附加到设备并获得扫描的条形码。第二个问题是我必须知道它是从哪个键盘发送的。

我试图用这个来得到它：

[http://www.codeproject.com/Articles/17123/Using-Raw-Input-from-C-to-handle-multiple-keyboard](http://www.codeproject.com/Articles/17123/Using-Raw-Input-from-C-to-handle-multiple-keyboard)

它获取我的数据和设备名称，但需要窗口句柄。

你有什么想法？

米。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:30:57.880

我认为您需要有代码来初始化设置，并且当从设备扫描条形码时，记录设备名称并将其分配给配置文件或数据库中的键盘。

然后你就知道了。

# android - 替换具有滑动视图的 ActionBar 选项卡中的片段

> ID：15855123
> 
> 赞同：2
> 
> 时间：2013-04-06T19:31:38.143
> 
> 标签：android, android-fragments, android-actionbar, android-viewpager, android-tabs

我在这里进行了快速搜索，但没有找到我的问题的任何答案，如果它已经回答，请指出我的问题..

我有一个带有滑动视图的 ActionBar 选项卡，根据这个[android training](http://developer.android.com/training/implementing-navigation/lateral.html#horizontal-paging)实现。我的活动有 3 个标签 `Weather` `Comment` `Dashboard` 和这些片段
`WeatherFragment` `CommentsFragment` `LoginFragment` `DasboardFragment` `RegisterFragment`

随着活动开始， `Weather Tab`显示`WeatherFragment`， `Comments Tab`显示`CommentsFragment`和 `Dashboard Tab`显示`LoginFragment`

如果登录成功`LoginFragment`，`DasboardFragment`应该替换`LoginFragment`里面的`Dashboard`Tab。因此，如果用户滑动到其他选项卡并返回`Dashboard Tab` `DasboardFragment`应该是可见的。

我是 android 开发的新手，所以任何代码片段或教程将不胜感激

代码我到目前为止**MainActivity 类**

```
public class MainActivity extends FragmentActivity implements
    ActionBar.TabListener {

AppSectionsPagerAdapter mAppSectionsPagerAdapter;
ViewPager mViewPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_get_network_weather);

    mAppSectionsPagerAdapter = new AppSectionsPagerAdapter(
            getSupportFragmentManager());

    final ActionBar actionBar = getActionBar();
    //actionBar.setDisplayShowTitleEnabled(false);
    //actionBar.setDisplayShowHomeEnabled(false);
    actionBar.setHomeButtonEnabled(false);
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mAppSectionsPagerAdapter);
    mViewPager
            .setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                @Override
                public void onPageSelected(int position) {                      
                    actionBar.setSelectedNavigationItem(position);
                }
            });

    for (int i = 0; i < mAppSectionsPagerAdapter.getCount(); i++) {         
        actionBar.addTab(actionBar.newTab()
                .setText(mAppSectionsPagerAdapter.getPageTitle(i))
                .setTabListener(this));
    }       
}

public static class AppSectionsPagerAdapter extends FragmentPagerAdapter {

    public AppSectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        switch (i) {
        case 0:
            return new WeatherInfoFragment();
        case 1:
            return new PostsFragment();
        default: //TODO method to find which fragment to display ?
            return new LoginFragment();
        }
    }

    @Override
    public int getCount() {
        return 3;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        if (position == 0) {
            return "Weather";
        } else if (position == 1){
            return "Comments";
        }
        else{
            return "Dashboard";
        }
    }
}

@Override
public void onTabReselected(ActionBar.Tab tab,
        android.app.FragmentTransaction ft) {
}

@Override
public void onTabSelected(Tab tab, android.app.FragmentTransaction ft) {
    mViewPager.setCurrentItem(tab.getPosition());
}

@Override
public void onTabUnselected(Tab tab, android.app.FragmentTransaction ft) {
 }
 } 
```

**登录片段**

```
public class LoginFragment extends Fragment implements AsyncResponse {
Button loginButton;
TextView loginError, login_url;
JSONfunctions task;
JSONObject jsonObject;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    return inflater.inflate(R.layout.login, container, false);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
}

@Override
public void onStart() {
    super.onStart();

    loginButton = (Button) getView().findViewById(R.id.button_login);
    loginError = (TextView) getView().findViewById(R.id.login_error);

    loginButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {               
            attemptLogin(finalLoginUrl);
            // attemptPost(postURL);
        }
    });
}

private void attemptLogin(String url) {     
        try {
            task = new JSONfunctions(getActivity());
            task.listener = this;
            task.execute(new String[] { url });
        } catch (Exception ex) {
            Log.e("attempt login", ex.getMessage());
        }
    }
}

@Override
public void processFinish(String result) {
    try {
        jsonObject = new JSONObject(result);
        int success = Integer.parseInt(jsonObject.getString("Success"));
        if (success == 0) {             
            // Replace LoginFragment and launch DashboardFragment ?                 
        } else {
            loginError.setText(jsonObject.getString("ErrorMessage"));
        }

    } catch (JSONException e) {
        Log.e("JSON parsing from login result", e.getMessage());
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T00:16:00.987

我不确定这是处理此问题的最佳方法，但您可以在您的内部定义一个静态布尔值，`MainActivity`如下所示：

```
public static boolean loggedIn = false; 
```

（例如下面`ViewPager mViewPager;`）

然后，在你的方法`processFinish(...)`里面`LoginFragment`when刚刚`success`设置`0``MainActivity.loggedIn = true;`

这样，您可以简单地在 getItem 方法中的默认情况下放入 if 语句来检查用户是否已登录（如果是，则调用 Dashboard-Fragment）或未登录（显示 Login-Fragment）。

希望这对你有用！

**编辑：登录片段**

```
public class LoginFragment extends Fragment implements AsyncResponse {
Button loginButton;
TextView loginError, login_url;
JSONfunctions task;
JSONObject jsonObject;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
    Bundle savedInstanceState) {
    return inflater.inflate(R.layout.login, container, false);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
}

@Override
public void onStart() {
    super.onStart();

    loginButton = (Button) getView().findViewById(R.id.button_login);
    loginError = (TextView) getView().findViewById(R.id.login_error);

    loginButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {               
            attemptLogin(finalLoginUrl);
            // attemptPost(postURL);
        }
    });
}

private void attemptLogin(String url) {     
    try {
        task = new JSONfunctions(getActivity());
        task.listener = this;
        task.execute(new String[] { url });
    } catch (Exception ex) {
        Log.e("attempt login", ex.getMessage());
    }
}

@Override
public void processFinish(String result) {
    try {
        jsonObject = new JSONObject(result);
        int success = Integer.parseInt(jsonObject.getString("Success"));
        if (success == 0) {             
            MainActivity.loggedIn = true;                 
        } else {
            loginError.setText(jsonObject.getString("ErrorMessage"));
        }

    } catch (JSONException e) {
        Log.e("JSON parsing from login result", e.getMessage());
    }
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:38:03.790

没有彻底阅读[这里](https://stackoverflow.com/a/12155594/2235914)的答案是我自己的错。实现了该答案中的代码并使功能正常工作:)

# android - 在两个不同的活动中显示带有 AChartEngine 图形的 LinearLayout

> ID：15855130
> 
> 赞同：1
> 
> 时间：2013-04-06T19:32:48.717
> 
> 标签：android, xml, android-linearlayout

我有一个主要活动，它在位于内部文件中显示`AchartEngine`图形。我有兴趣使用不同的 xml 文件在另一个活动中显示它。`LinearLayout``main.xml``LinearLayout`

有没有办法这样做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:42:30.807

将您的共享元素包装在 Fragment 中：http: [//developer.android.com/reference/android/app/Fragment.html](http://developer.android.com/reference/android/app/Fragment.html)

# eclipse-plugin - 在 Eclipse 插件中使用 Google Guice

> ID：15855131
> 
> 赞同：0
> 
> 时间：2013-04-06T19:32:51.507
> 
> 标签：eclipse-plugin, guice

是否全面讨论了在 Eclipse 插件上下文中使用 Google Guice 的方法？有一个以 OSGi 容器为目标的 Peaberry 项目，但这似乎在生产插件项目中使用得不多，这让我对使用它有点怀疑（如果我错了，有人纠正我）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:20:46.847

完整的[Xtext](http://www.eclipse.org/Xtext/)和[Xtend](http://www.eclipse.org/xtend/index.html)接线是使用 Guice 完成的。这包括与 Eclipse 无关的部分，还包括 Eclipse 插件和 UI 组件。

# c++ - 分配值的指针数组

> ID：15855132
> 
> 赞同：-1
> 
> 时间：2013-04-06T19:33:01.953
> 
> 标签：c++

作品：

```
int GlobalVar = 5;
int * LPVar[] = {&GlobalVar}; 
```

不起作用：

```
int GlobalVar = 5;
int * LPVar[]; // int * LPVar[1] doesn't work too

LPVar[0] = &GlobalVar; // errors here 
```

> ------ 构建开始：项目：指针，配置：发布 Win32 ------ 正在编译... ilovpointers.cpp .\ilovpointers.cpp(9)：错误 C2466：无法分配常量大小的数组 0 .\ilovpointers.cpp(9)：错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持 default-int .\ilovpointers.cpp(9) : error C2040: 'LPVar' : 'int []' 在间接级别上与 'int *[1]' 不同。\ilovpointers.cpp(9 ) : error C2440: 'initializing' : cannot convert from 'int *' to 'int []' 没有对数组类型的转换，尽管有对数组的引用或指针的转换 构建日志保存在“file:// f:\Visual Studio C++\Project1\pointers\pointers\Release\BuildLog.htm" 指针 - 4 个错误，0 个警告 ========= 构建：

编辑：

我解决了，但有问题。

```
#include <iostream>
#include <stdio.h>

using namespace std;

int GlobalVar = 5;
int * LPVar[1];

void main()
{
    LPVar[0] = &GlobalVar;
    printf("%i", *LPVar[0]);

    cin.get();
} 
```

LPVar 是一个全局数组，为什么当我把它放在定义之后它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:41:15.897

*   代码是否在文件范围内？

    鉴于更新的代码片段，答案似乎是肯定的。

*   如果是这样，您就不能像`LPVar[0] = &GlobalVar;`在文件范围内那样进行随机分配。您只能在文件范围内拥有声明（没有初始化器）或定义（可选地带有初始化器）。

在您的问题中，这有效（确实应该如此），因为有两个带有初始化程序的变量定义。

```
int GlobalVar = 5;
int *LPVar[] = {&GlobalVar}; 
```

此代码不起作用（实际上它不应该），因为第三行是赋值语句而不是声明或定义：

```
int GlobalVar = 5;
int *LPVar[];          // Declaration, not definition
LPVar[0] = &GlobalVar; // Assignment is not allowed outside a function body 
```

变体：

```
int GlobalVar = 5;
int *LPVar[1];         // Definition without initializer
LPVar[0] = &GlobalVar; // Assignment is not allowed outside a function body 
```

# javascript - 匹配任何整数，后跟特定值 - Javascript

> ID：15855135
> 
> 赞同：2
> 
> 时间：2013-04-06T19:33:15.070
> 
> 标签：javascript, match

我在javascript中有一个对象-：

```
var array = {"1":"John","2":"Caprio","3":"David","4":"Edward"} 
```

我想做这个 -：

```
var message = 'Wats up David#1\. Are you with David#5 or Caprio#89'; 

$.each(array, function(key, value){
var matchMe=value+'#'+anywholenumber;                                                       
if(message.match(matcheMe))
{ 
var ge = new RegExp(matchMe, 'g'); 
message = message.replace(ge,'['+matchMe+']');
}                                }); 
```

我该怎么做？非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:41:27.220

如果它正在工作，您拥有的代码将用第一个元素 (john)替换*每个数字。*

我想你想要这个：

```
var arr = array("John","Caprio","David","Edward","Suzy");
var message = 'Wats up David#1\. Are you with David#5 or Caprio#2'; 

for (i=0; i < arr.length; i++) {
    var re = new RegExp(i, 'g');
    message = message.replace(re, arr[i]);
} 
```

# java - 生成 javadoc 但 index.html 变得很奇怪

> ID：15855136
> 
> 赞同：3
> 
> 时间：2013-04-06T19:33:15.187
> 
> 标签：java, eclipse, javadoc

我正在使用 Eclipse 并用它生成了一个 javadoc，但是当我打开 index.htmlm 这就是我得到的全部内容：

> 生成的文档（无标题） targetPage = "" + window.location.search; if (targetPage != "" && targetPage != "undefined") targetPage = targetPage.substring(1); if (targetPage.indexOf(":") != -1) targetPage = "undefined"; 函数 loadFrames() { if (targetPage != "" && targetPage != "undefined") top.classFrame.location = top.targetPage; }

我也尝试从命令行执行此操作，但它给出了有关 javadoc 的此错误：

> javadoc -sourcepath 源*路径*-d *destpath*

如何生成 javadoc？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-10T14:49:01.977

Try regenerating javadoc using Eclipse, and JavaDoc command needs to be from JDK witch is determined in PATH so everything works fine.

# java - 自动跳过输入

> ID：15855137
> 
> 赞同：0
> 
> 时间：2013-04-06T19:33:15.687
> 
> 标签：java

```
public static void main(String[] args) {    
    Scanner in = new Scanner(System.in);
    System.out.print("Please choose.('e' to encrypt, 'd' to decrypt, 'q' to quit): ");
    String userIn= in.next();
    if(userIn.equals("e")){
        System.out.println("Please enter your text that you want to encrypt: ");
        String userInput = in.nextLine();

        System.out.print("Please enter your shift key(0-25): ");
        int userS = in.nextInt();
        if(userS < 0 || userS > 25){
            System.out.print("Invalid shift key, please enter a valid shift key: ");
            userS = in.nextInt();
        } 
```

在我上面的程序中，代码的以下部分：

```
System.out.println("Please enter your text that you want to encrypt: ");
                String userInput = in.nextLine();

                System.out.print("Please enter your shift key(0-25): "); 
```

它正在跳过这个`userInput`，它会在我输入文本之前越过它并要求输入 shift 键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:38:26.020

这修复了它（在 Eclipse 中测试）：

```
Scanner in = new Scanner(System.in);
System.out.print("Please choose.('e' to encrypt, 'd' to decrypt, 'q' to quit): ");
String userInput = in.nextLine();
if (userInput.equals("e"))
{
    System.out.println("Please enter your text that you want to encrypt: ");
    userInput = in.nextLine();

    System.out.print("Please enter your shift key(0-25): ");
    int userS = Integer.parseInt(in.nextLine());
    if (userS < 0 || userS > 25)
    {
        System.out.print("Invalid shift key, please enter a valid shift key: ");
        userS = Integer.parseInt(in.nextLine());
    }
}
in.close(); 
```

我将您的`userIn`变量更改为 be `userInput`，因为我们不需要它；您的`next()`电话也更改为`nextLine()`。

`nextInt()`我还把你所有的'都改成了`nextLine()`'。这将帮助您避免`Exception`以后发生。

最后，总是`Scanner`在完成后关闭它以节省系统资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:38:08.663

改变：

```
String userInput = in.nextLine() 
```

到

```
in.nextLine(); String userInput = in.nextLine(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T19:39:04.467

很简单，把你的代码改成

```
String userInput = in.next(); 
```

# ruby-on-rails - 未定义的方法“管理员？” 对于零：NilClass

> ID：15855138
> 
> 赞同：5
> 
> 时间：2013-04-06T19:33:20.813
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication, authorization, railscasts

我[从 Scratch 遵循 railscast #250 Authentication](http://railscasts.com/episodes/250-authentication-from-scratch-revised)并且一切正常。现在我试图只在我的索引页面上显示编辑和销毁链接到管理员用户的链接。

我已经使用管理员布尔字段设置了 mu User 数据库并尝试在另一个模型（hikingtrails）的视图中放置一个简单的 if 语句，以仅显示指向管理员用户的某些链接，但是当我尝试它时出现此错误，`undefined method 'admin?' for nil:NilClass`

## 数据库模式

```
 create_table "users", :force => true do |t|
    t.string   "email"
    t.string   "password_digest"
    t.boolean  "admin"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
  end 
```

## 用户模型

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation#, :admin

  validates :email, :uniqueness => true

  has_secure_password
end 
```

## 应用控制器

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  # fetch the currently logged-in user record to see if the user is currently logged in
  # putting this method in ApplicationController so that it’s available in all controllers
  private
  def current_user
    # checks for a User based on the session’s user id that was stored when they logged in, and stores result in an instance variable
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
  end
  # to give access to this method from all the views, the helper_method makes it a helper method
  helper_method :current_user

  # basic authorization, user must be logged in!
  def authorize
    redirect_to login_url, alert: "You must be logged in to perform this action" if current_user.nil?
  end
end 
```

## 意见/远足径/index.html.erb

```
 <% if current_user.admin? %>
    <%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_hikingtrail_path(hikingtrail), :class => 'btn btn-mini' %>
    <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              hikingtrail_path(hikingtrail),
              :method => :delete,
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-mini btn-danger' %>
  <% end %> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-06T19:39:02.037

`current_user`如果用户未根据您的代码登录，将为 nil。所以你需要这样做：

```
<% if current_user && current_user.admin? %> 
```

或者使用`try`Rails 添加到所有对象的方法。

```
<% if current_user.try(:admin?) %> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T20:16:29.373

正如 Dogbert 所说，`current_user`如果用户未登录，它将为零。

我会建议另外两种选择：

**1)**在`current_user`方法中返回一个特殊类型的“guest”用户而不是 nil。如果您以后想用它做其他事情，例如响应某些用户操作，Il 将很有用。
作为灵感，看看 Ryan Bates 如何解释`Ability`他的 gem *cancan*类：[链接](https://github.com/ryanb/cancan/wiki/defining-abilities)。他做的第一件事是创建一个统一的（而不是持久化的）用户。`Ability`每次 Rails 使用这种用户验证解析 ERB 模板时，都会实例化一个该类。
所以，你可以这样做：

```
def current_user
  @current_user ||= ((User.find(session[:user_id]) if session[:user_id]) || User.new)
end 
```

因此，如果`(User.find(session[:user_id]) if session[:user_id])`返回`nil`，`@current_user`则将设置为未初始化的用户，在数据库中没有身份。

**2）**定义一个新的方法来检查用户是否是管理员，例如：

```
# your unmodified current_user implementation
def current_user
  @current_user ||= User.find(session[:user_id]) if session[:user_id]
end

def is_an_admin?
  if current_user && current_user.admin?
end 
```

这样您就可以以这种方式使用它：

```
<% if is_an_admin? %>
  <div>
    <%= do stuff....%> 
```

...这可能是一个额外的方法调用，但它也可能使您的代码更具可读性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-05T13:17:04.297

我知道这是旧的，但如果有人像我一样在谷歌上搜索错误，Rails 教程中实际上没有错误，但他们忘记突出显示他们添加的一件事。

# 清单 9.54

```
before_action :logged_in_user, only: [:index, :edit, :update, :destroy] 
```

请注意，他们在此处添加了 :destroy 操作，之前未添加，这确保用户已登录以执行销毁操作，然后检查他是否是管理员

```
before_action :admin_user,     only: :destroy 
```

# 更正：

截至 2015 年 12 月 14 日编辑时，rails 教程现在在清单 9.53 中添加了 :destroy 操作。如果你像我一样错过了那个，你会得到这个错误。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-06T19:40:21.310

在您的用户模型中看起来像：

```
 attr_accessible :email, :password, :password_confirmation#, :admin 
```

admin被注释掉了，你需要删除#。

# java - 二维ArrayList设置一个元素

> ID：15855154
> 
> 赞同：5
> 
> 时间：2013-04-06T19:35:29.340
> 
> 标签：java, arraylist

我有这段代码：

```
List<ArrayList<Integer>> tree = new ArrayList<ArrayList<Integer>>();

tree.add(0, new ArrayList<Integer>(Arrays.asList(1)));
tree.add(1, new ArrayList<Integer>(Arrays.asList(2,3)));
tree.add(2, new ArrayList<Integer>(Arrays.asList(4,5,6))); 
```

例如，我想将 5 替换为 9。我该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-06T19:38:10.683

采用

```
tree.get(2).set(1,Integer.valueOf(9)); 
```

获取位置 2 的 ArrayList，然后将第二个元素设置为 9。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T19:38:55.937

```
tree.get(2).set(1, 9) 
```

这将获取外部 ArrayList 的第三个（即索引 = 2）元素，该元素返回内部 ArrayList。然后将第二个元素（索引 = 1）设置为 9。自动装箱负责 int 到 Integer 的转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T19:40:05.870

查找要替换的元素的索引并使用两次[set(index, newElement)](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#set%28int,%20E%29) 方法进行替换

# java - 为什么 HttpClient 不发送指定的 Accept-Language 字段？

> ID：15855159
> 
> 赞同：2
> 
> 时间：2013-04-06T19:35:41.980
> 
> 标签：java, internationalization, apache-httpcomponents

在我的项目中，我使用 Apache 的 HttpComponents 连接到服务器。以下代码创建 HttpClient。

```
HttpParams params = new BasicHttpParams();
params.setParameter("http.language.Accept-Language", "de-de,de;q=0.8,en-us;q=0.5,en;q=0.3");
HttpProtocolParams.setUserAgent(params, "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1003.1 Safari/535.19 Awesomium/1.7.1");

DefaultHttpClient client = new DefaultHttpClient(params); 
```

但是当我执行一个请求时，没有发送 Accept-Language 字段。只是以下内容：

```
2013/04/06 20:52:07:129 MESZ [DEBUG] headers - >> GET /ws/search.json?text=&levelmin=0&levelmax=80&offset=1 HTTP/1.1
2013/04/06 20:52:07:129 MESZ [DEBUG] headers - >> Host: tradingpost-live.ncplatform.net
2013/04/06 20:52:07:129 MESZ [DEBUG] headers - >> Connection: Keep-Alive
2013/04/06 20:52:07:129 MESZ [DEBUG] headers - >> User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1003.1 Safari/535.19 Awesomium/1.7.1
2013/04/06 20:52:07:129 MESZ [DEBUG] headers - >> Cookie: s=abcdefg 
```

这是一个错误还是我做错了什么？我只想拥有一个“全球”接受语言字段（对于我从一个客户发送的所有请求）。

欢迎任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:18:08.230

我无法解决这个问题，但对于任何出现相同问题的人来说，这里有一个解决方法：创建一个中心方法，例如

```
void prepareHttpRequest(HttpRequest request){
    request.addHeader("Accept-Language", "de-de,de;q=0.8,en-us;q=0.5,en;q=0.3");
} 
```

您必须为您所做的每个 POST 或 GET 请求执行此操作。我知道这不是很优雅，但我唯一的解决方案，

# jvm - 为什么不是所有的 java 字节码最初都被解释为机器码？

> ID：15855160
> 
> 赞同：3
> 
> 时间：2013-04-06T19:35:48.143
> 
> 标签：jvm, interpreter, java, bytecode

我阅读了有关[即时编译 (JIT)](http://en.wikipedia.org/wiki/Just-in-time_compilation)的信息，据我所知，有两种方法可以解决这个问题——[解释器](http://en.wikipedia.org/wiki/Interpreter_%28computing%29)和 JIT，它们都在运行时解释[字节码。](http://en.wikipedia.org/wiki/Java_bytecode)

为什么不直接将所有字节码解释为机器码，然后才开始运行进程而不再需要解释器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T20:03:17.127

延迟 JIT 编译的另一个原因与优化有关：在运行时，VM 可以检测到它可能优化的更多/其他模式，而不是编译器在编译时所做的。启动时的 JIT 预编译总是必须是静态的，并且编译器已经完成了同样的工作，但是通过分析*实际*运行时行为，VM 可能有更多关于可能优化的信息，因此可能会产生更好的优化结果。

例如，VM 可以检测到单个代码实际上在运行时运行了一百万次，并执行编译器可能没有相关信息的适当优化，这与现代 CPU 在运行时完成的分支预测不同。
更多信息可以在关于[“自适应优化”](http://en.wikipedia.org/wiki/Adaptive_optimization)的维基百科文章中找到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T19:40:19.620

很简单：因为将所有内容预编译为机器码需要时间。并且用户不想等待应用程序启动。请记住，预编译必须进行大量优化，这需要时间。

JVM 的服务器版本在预先编译和优化代码方面更加积极，因为服务器端的代码在进程关闭之前往往会更频繁地执行更长的时间。

但是，一个解决方案（对于.Net）是一个名为 NGen 的应用程序，它预先进行预编译，这样之后就不需要它了。你只需要运行一次。

并非所有 VM 都包含解释器。例如 Chrome 和 CLR (.Net) 在运行之前总是编译成机器码。但是，它们具有多个级别的优化以减少启动时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-24T21:43:40.143

我找到了显示运行时重新编译如何优化性能并节省额外 CPU 周期的[链接。](https://plumbr.eu/blog/java/do-you-get-just-in-time-compilation)

*   内联扩展：降低过程调用的成本。
*   删除冗余负载：当 2 个编译代码导致一些重复代码时，可以通过在运行时重新编译将其删除并进一步优化。
*   复制传播
*   消除死代码

这是上面给出的相同解释的另一个[链接。](http://docs.oracle.com/cd/E15289_01/doc.40/e15058/underst_jit.htm)

# c++ - 如何在不使用 IDE 的情况下从 cpp 文件自动生成/更新头文件？

> ID：15855164
> 
> 赞同：27
> 
> 时间：2013-04-06T19:36:32.370
> 
> 标签：c++, vim, ide, makefile

我使用 VIM 进行 C++ 开发已经有好几年了，我不想争论是使用 IDE 还是功能强大的文本编辑器进行软件开发的问题。到目前为止，我主要涉及一个仅包含标头的模板库，其中所有内容要么是模板，要么是声明的内联文件，因此 .cpp 文件不起主要作用。

最近我更多地参与“传统”C++开发，面临头/非头文件同步的老问题。我想知道是否有任何命令行工具可以在make 目标中使用或集成到VIM 中来处理这项工作，即基于.cpp 文件更新头文件。基本上，类/结构或（模板和内联）实现的声明应该在头文件中被忽略，而函数声明应该基于 .cpp 文件添加、删除或更新。

但是，我知道[lzz](http://www.lazycplusplus.com/)工具需要您以附加的第三种文件格式实际编码，然后在实际编译之前将其预处理为 .h / .cpp 文件。

周围有什么可以做的吗？其他非 IDE 开发人员如何处理这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T20:21:14.393

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-14T22:22:50.163

有一个`makeheaders`从`fossil`项目中调用的程序（vcs 替代 git）。您可以轻松地从[源代码](https://fossil-scm.org/fossil/file/src/makeheaders.c)编译它。我还建议您阅读[文档](https://fossil-scm.org/fossil/doc/trunk/src/makeheaders.html#H0006)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T19:47:27.667

在 UNIX 类型的系统上，通常 IDE 不处理这项工作（根据我的经验）。构建工具（通常不与 Eclipse、Emacs 等 IDE 捆绑在一起）将完成这项工作。

在现代系统中，处理这个问题的最好方法是让编译器来做：毕竟，编译器最清楚。GCC 和大多数其他 UNIX/POSIX 编译器具有在源文件编译期间发出 make 样式依赖声明的选项。您只需在您的 makefile 中进行安排，然后将输出文件包含在您的 makefile 中，这一切都很好。

参见，例如： http: [//make.mad-scientist.net/autodep.html](http://make.mad-scientist.net/autodep.html)

然后检查 GCC 选项，例如`-MMD -MP`（这些是预处理器选项）。

# java - Java：找不到包文件夹路径

> ID：15855165
> 
> 赞同：0
> 
> 时间：2013-04-06T19:36:40.927
> 
> 标签：java

我有一个设置了以下包的项目：

```
-src
   -界面
   -资源
      -图片

```

我想找到资源包文件夹的路径。通过使用`getClass().getClassLoader().getResource()`，我可以访问 images 文件夹中的图像，但我还想获取文件夹 Resources 的路径。由于我不确切知道那里会有哪些文件，因此无法查找确定的资源。我正在使用 JFileChooser 使用户能够选择文件，目的是设置默认目录以在 Resources 目录中打开。

从 NetBeans 运行项目时它可以正常工作，但是当我运行 dist 可执行 jar 时它找不到它，因为返回的路径通过 jar 文件。知道如何解决这种情况吗？

所以...每当项目在 Netbeans 中运行以及运行 dist jar 时，我都能找到返回的路径。遵循返回的路径：

**netbeans：** *“调度程序/资源/”*

**dist：** *“调度程序/Scheduler.jar！/Resources/”*

# python - 在 Python 脚本中使用命令创建原始输入

> ID：15855168
> 
> 赞同：1
> 
> 时间：2013-04-06T19:37:00.210
> 
> 标签：python, raw-input, ftplib

我正在尝试实现一个小脚本来从命令行使用 Python 中的 FTP 连接并使用适当的“ftplib”模块来管理 localhost。我想为用户创建一种原始输入，但已经设置了一些命令。

我试图更好地解释：

一旦我创建了 FTP 连接并通过用户名和密码成功完成登录连接，我将展示一种“bash shell”，可以使用最著名的 UNIX 命令（例如`cd`，`ls`分别移动目录并显示当前路径中的文件/文件夹）。

例如我可以这样做：

```
> cd "path inside localhost" 
```

从而显示目录或：

```
> ls 
```

显示该特定路径中的所有文件和目录。我不知道如何实现这一点，所以我问你一些建议。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T20:04:49.180

听起来命令行界面就是您要询问的部分。将用户输入映射到命令的一种好方法是使用字典，事实上，在 python 中，您可以通过在函数名称后面加上 () 来运行对函数的引用。这是一个简单的示例，向您展示我的意思

```
def firstThing():  # this could be your 'cd' task
    print 'ran first task'

def secondThing(): # another task you would want to run
    print 'ran second task'

def showCommands(): # a task to show available commands
    print functionDict.keys()

# a dictionary mapping commands to functions (you could do the same with classes)
functionDict = {'f1': firstThing, 'f2': secondThing, 'help': showCommands}

# the actual function that gets the input
def main():
    cont = True
    while(cont):
        selection = raw_input('enter your selection ')
        if selection == 'q': # quick and dirty way to give the user a way out
            cont = False
        elif selection in functionDict.keys():
            functionDict[selection]()
        else:
            print 'my friend, you do not know me. enter help to see VALID commands'

if __name__ == '__main__':
    main() 
```

# php - 选择查询未在 php 中返回结果

> ID：15855170
> 
> 赞同：0
> 
> 时间：2013-04-06T19:37:09.340
> 
> 标签：php, mysql, select, phpmyadmin

我正在执行以下简单的 sql 查询：

`SELECT people_picture, people_gender FROM people LIMIT 1`在 phpmyadmin 中给出了一个结果。

我的php代码如下：

```
 $query = "SELECT people_picture, people_gender FROM people LIMIT 1";
    $result = mysqli_query($con,$query);
    $row = mysql_fetch_assoc($result);
    $row1 = mysql_fetch_array($result);

    print_r($row1);
    print_r($row); 
```

它不会给出错误，但它什么也不做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:39:35.600

您正在混合 mysqli 和 mysql 接口，这就是您卡住的原因：

请试试这个：

```
$con = mysqli_connect($host, $user, $pass, $dbase);
if(!$con){
    echo 'Connection failed : '.mysqli_connect_error();
    exit(0);
}
$query = "SELECT people_picture, people_gender FROM people LIMIT 1";
$result = mysqli_query($con,$query);
if(!$result){
   echo 'Query failed : '.mysqli_error();
   exit(0);
} 
$row = mysqli_fetch_assoc($result);  //  mysql_fetch_assoc was the problem
print_r($row); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T19:39:50.857

改用 mysqli_fetch_assoc

# java - SPAN_EXCLUSIVE_EXCLUSIVE

> ID：15855171
> 
> 赞同：1
> 
> 时间：2013-04-06T19:37:11.793
> 
> 标签：java, android, xml

我正在使用 Galaxy S3 制作应用程序，并收到“SPAN_EXCLUSIVE_EXCLUSIVE 长度不能为零”错误。该应用程序在模拟器上运行良好。任何帮助，将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:42:57.290

当我在我的设备上测试我的应用程序时也会发生这种情况。你的手机上安装了 Swiftkey 吗？如果您这样做，这可能会对这个问题有所帮助。

[http://support.swiftkey.net/forums/116693-2-bug-reports/suggestions/2994580-span-exclusive-exclusive-spans-cannot-have-a-zero-](http://support.swiftkey.net/forums/116693-2-bug-reports/suggestions/2994580-span-exclusive-exclusive-spans-cannot-have-a-zero-)

编辑：看到这个答案 - [https://stackoverflow.com/a/13986224/183231](https://stackoverflow.com/a/13986224/183231)

# jsf-2 - Ajax 动态添加文本框在 PrimeFaces v3.5 中不起作用

> ID：15855173
> 
> 赞同：0
> 
> 时间：2013-04-06T19:37:18.903
> 
> 标签：jsf-2, primefaces

My`h:form`包含一个`p:selectOneMenu`组件，它有两个值 single 和 multiple。`h:form`还包含一个默认`p:inputText`值。`p:inputText`我的目标是仅在选择值倍数时添加多个组件。请参阅随附的屏幕截图- ![在此处输入图像描述](https://i.stack.imgur.com/BZhH5.png)

下面是我的视图，假设`ajax`在单击图标按钮时发送请求-

```
<h:form>
    <p:panel header="Dynamically Add textbox">
        <p:selectOneMenu id="runType" value="#{repeateRun.runType}">
            <f:selectItems value="#{repeateRun.runList}" var="runType" itemLabel="#{runType}" itemValue="#{runType}" />
            <p:ajax update="outPanel" listener="#{repeateRun.renderComponent}" />
        </p:selectOneMenu>
        <h:panelGrid id="runList">
            <ui:repeat value="#{repeateRun.runs}" var="run">
                <p:inputText value="#{run.runValue}" />
            </ui:repeat>
        </h:panelGrid>
        <p:outputPanel id="outPanel">
            <p:commandButton update="runList" icon="ui-icon-plusthick" title="Add more" rendered="#{repeateRun.showAddButton}">
                <f:ajax render="runList" listener="#{repeateRun.addRun}" />
            </p:commandButton>
        </p:outputPanel>
    </p:panel>
</h:form> 
```

RepeateRun`@ViewScoped` `@ManagedBean`如下-

```
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.event.ActionEvent;
@ManagedBean
@ViewScoped
public class RepeateRun implements Serializable {
    private static final long serialVersionUID = 1L;
    private List<String> runList;
    private List<Run> runs;
    private int runValue;
    private String runType;
    private boolean showAddButton = false;
    private static final String SINGLE = "Single";
    private static final String MULTIPLE = "Multiple";
    //Note : Getters Setters are removed while putting here
    @PostConstruct
    public void initBean() {
        this.setRunList(this.populateRunList());
        this.setRuns(this.populateRuns());
    }
    public void addRun() {
        if (this.runs == null) {
            this.setRuns(this.populateRuns());
        } else {
            this.runs.add(this.defaultRun());
        }
    }
    public void renderComponent() {
        if (this.getRunType().equals(SINGLE)) {
            this.setShowAddButton(false);
        } else {
            this.setShowAddButton(true);
        }
    }
    private List<String> populateRunList() {
        List<String> runList = new ArrayList<String>();
        runList.add(SINGLE);
        runList.add(MULTIPLE);
        return runList;
    }
    private Run defaultRun() {
        Run defaultRun = new Run();
        defaultRun.setRunValue(1);
        return defaultRun;
    }
    private List<Run> populateRuns() {
        List<Run> runs = new ArrayList<Run>();
        runs.add(this.defaultRun());
        return runs;
    }
} 
```

因此，在加号图标按钮中选择值 Multiple 后`f:selectItems`，按钮未调用附加方法，即`addRun`. 为了确认`addRun`点击后的方法调用，我在method.xml中放了一些`sysout`语句`addRun`。我看到了，`sysout`没有脸红。与此同时，我`xml`在萤火虫中看到了一些反应。
哪里有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:22:54.400

问题在于`f:ajax`which 不适用于`p:commandButton`. 以下是罪魁祸首-

```
<p:commandButton update="runList" icon="ui-icon-plusthick" title="Add more" rendered="#{repeateRun.showAddButton}">
     <f:ajax render="runList" listener="#{repeateRun.addRun}" />
</p:commandButton> 
```

上面的行应该替换为下面的行

```
<p:commandButton actionListener="#{repeateRun.addRun}" update="runList" icon="ui-icon-plusthick" title="Add more" rendered="#{repeateRun.showAddButton}" /> 
```

# c++ - 一个类型是否应该是只移动的，仅仅因为复制可能很昂贵？

> ID：15855174
> 
> 赞同：10
> 
> 时间：2013-04-06T19:37:19.523
> 
> 标签：c++, c++11, move-semantics

我有一种可复制的类型，但复制起来可能很昂贵。我已经实现了移动构造函数和移动赋值。但是我有性能问题，人们在按值传递时忘记调用 move()。

删除复制构造函数是否良好的 C++11 风格，而是为实际需要复制的极少数情况提供显式的 copy() 方法？这在其他语言（Ruby、JavaScript）中是惯用的，但我不知道 C++ 标准库中有任何内容纯粹为了性能而禁止复制。例如， std::vector<> 是可复制的，而 std::unique_ptr<> 和 std::thread 由于其他原因是不可复制的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-06T19:40:29.813

> 一个类型是否应该是只移动的，仅仅因为复制可能很昂贵？

**没有**。如果你的类型的**语义**使得复制它在概念上是有意义的，那么使复制可用的正确方法是实现一个复制构造函数，并让用户有机会采用标准语法来调用它：

```
T a;
T a = b; 
```

如果人们忘记从他们不想再使用的物体上移开……好吧，那是他们的坏事：

```
T c = std::move(a); // I'm doing it right (if I no longer need object a);
T d = b; // If I don't need b anymore, I'm doing it wrong. 
```

如果（出于任何原因）您的某些函数总是希望调用者提供一个可以从中移动的对象，那么让函数接受一个右值引用：

```
void foo(my_class&& obj);

my_class a;
foo(a); // ERROR!
foo(std::move(a)); // OK 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T19:49:10.463

如果副本足够昂贵，我会将该类视为不可复制的签名。从语义上讲，只有您希望它们是可复制的，并且昂贵的副本是决定“不，不可复制”的正当理由。

可以复制的能力并不意味着它需要以可复制的类型实现。该类型的实现者可以决定它是否应该在语义上是可复制的。

我不会将产生昂贵副本的操作称为“复制”，而是将其称为“克隆”或“复制”。

对于一种方法，您可以这样做：

```
#include <utility>

template<typename T>
struct DoCopy {
  T const& t;
  DoCopy( T const& t_ ):t(t_) {}
};
template<typename T>
DoCopy<T> do_copy( T const& t ) {
  return t;
}
struct Foo {
  struct ExpensiveToCopy {
    int _[100000000];
  };
  ExpensiveToCopy* data;
  Foo():data(new ExpensiveToCopy()) {}
  ~Foo(){ delete data; }
  Foo(Foo&& o):data(o.data) { o.data = nullptr; }
  Foo& operator=(Foo&& o) { data=o.data; o.data=nullptr; return *this; }
  Foo& operator=(DoCopy<Foo> o) {
    delete data;
    if (o.t.data) {
      data=new ExpensiveToCopy(*o.t.data);
    } else {
      data=new ExpensiveToCopy();
    }
    return *this;
  }
  Foo( DoCopy<Foo> cp ):data(cp.t.data?new ExpensiveToCopy( *cp.t.data ):new ExpensiveToCopy() ) {};
};
int main() {
  Foo one;
  // Foo two = one; // illegal
  Foo three = std::move(one); // legal
  Foo four;
  Foo five = do_copy(three);
  four = std::move(three);
  five = do_copy(four);
} 
```

这有点类似于在右值引用存在之前您可以编写`std::move`类似语义的方式，与此类技术具有相似的缺点，即语言本身不知道您在做什么恶作剧。

它的优点是上面`do_copy`的语法类似于 的语法`std::move`，并且它允许您使用传统表达式，而无需创建琐碎的实例`Foo`then 构造另一个变量的副本等。

如果我们希望将其视为可复制的情况很常见（如果要避免），我会在知道该`duplicate`方法的类周围编写一个复制包装器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T19:41:45.967

不。如果类型是可复制的，那么该类型是可复制的。这意味着它的复制构造函数可用并且*可以工作*。这并不意味着某些成员函数的名称看起来像字符`c`, `o`,`p`并且`y`按顺序执行“几乎是类似的事情”。

# ios - 对ios触摸代码感到困惑

> ID：15855179
> 
> 赞同：-4
> 
> 时间：2013-04-06T19:37:53.053
> 
> 标签：ios, objective-c, uitouch

-(void)ccTouches 开始...

UITouch* touch = [触摸任何对象];

CGPoint location = [touch locationInView:[touch view]];

有人可以详细解释这两行代码中到底发生了什么。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:43:48.880

```
UITouch *touch = [touches anyObject]; 
```

`touches`是一个`NSSet`。`UITouch`代码只是从中获取一个对象`touches`并将其分配给一个名为 的变量`touch`。这隐含地假设`NSSet`只保留一个元素。

```
CGPoint location = [touch locationInView:[touch view]]; 
```

上面的行在截取触摸的视图的坐标系中获取触摸的 (x,y) 坐标。`CGPoint`只不过是一个具有两个浮点值的 C 结构，`x`并且`y`.

所以最重要的是，您将获得视图中触摸的坐标。

# c# - 创建跨平台应用程序

> ID：15855186
> 
> 赞同：1
> 
> 时间：2013-04-06T19:38:20.983
> 
> 标签：c#, mono, cross-platform

我正在使用**C#**和**Windows Forms制作一个****OpenGL**应用程序。

 ****最近我想让它跨平台，我的意思是让它运行在**Windows**、**Linux**和**OS X**上。我什至从未尝试过制作跨平台应用程序。

我做了一些研究，发现我应该使用单声道。使用 MonoDevelop 制作的应用程序是否可以在所有这些平台上正常运行而无需任何额外安装？如果没有，用户究竟需要安装什么才能运行该应用程序？

有没有什么简单的方法可以编写一次代码，然后为 windows、linux 和 os x 构建它，而不需要额外的安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:45:16.043

> 使用 MonoDevelop 制作的应用程序是否可以在 windows、linux、os x 上正常运行而无需任何额外安装？

好。他们将要求在 Linux 和 OsX 上安装 Mono，并在 Windows 上安装相应版本的 .NET 框架（或那里也安装 Mono）。

在开发时，您当然需要牢记跨平台问题（例如，目录分隔符，尽管`Path`该类在这里有所帮助），并且 Mono 已经创建了迁移分析器来帮助解决这个问题 - 请参阅[MoMa](http://www.mono-project.com/MoMA)。

现在，假设您牢记这些并且在最终用户系统上安装了 Mono 和/或 .NET 框架，您应该不需要安装任何额外的东西。****

# php - 从嵌入在html中的xml中提取xml

> ID：15855188
> 
> 赞同：3
> 
> 时间：2013-04-06T19:38:22.153
> 
> 标签：php, html, xml, ncbi

我试图获取这里提供的 xml [http://www.ncbi.nlm.nih.gov/sra/ERX086768?report=FullXml](http://www.ncbi.nlm.nih.gov/sra/ERX086768?report=FullXml)但它有点棘手，因为他们没有提供任何支持。目的是将xml转换为php以便处理xml。

有人可以给个提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:46:26.813

通过其中的 HTML 呈现的 XML 也不是 XML，这并不是*真的。*

您正在寻找的是[*DOMDocument中称为*](http://php.net/class.domnode#domnode.props.textcontent)[*textContent*的](http://php.net/class.domnode#domnode.props.textcontent)*内容。这将只为您提供该 HMTL 中的文本。就像它在浏览器中显示为“文本”一样。*

 *因此，您需要做的就是将 HTML 文档加载到[`DOMDocument`](http://php.net/DOMDocument). 因为它包含错误，所以使用内部错误：

```
$url = 'http://www.ncbi.nlm.nih.gov/sra/ERX086768?report=FullXml';

$doc = new DOMDocument();
libxml_use_internal_errors(TRUE);
$doc->loadHTMLFile($url);
libxml_use_internal_errors(FALSE); 
```

下一部分暗示了有关被抓取页面的特定知识。在您的情况下，XML 是所有具有类属性*"xml-tag"* *followed* 的div-tags的上述*文本内容，位于 ID 为**"ResultView"*的标签之后。

 **这些标签可以通过 xpath 查询轻松获取，然后将它们的文本内容存储到一个数组中：

```
$xpath  = new DOMXPath($doc);
$nodes  = $xpath->query('//*[@id="ResultView"]/following-sibling::div[@class="xml-tag"]');
$buffer = array();
foreach ($nodes as $node) {
    $buffer[] = $node->textContent;
} 
```

所以现在剩下的就是创建一个新的`DOMDocument`并将 XML 缓冲区加载到其中，做一些很好的格式化和输出：

```
$new = new DOMDocument();
$new->preserveWhiteSpace = FALSE;
$new->formatOutput = TRUE;
$new->loadXML(implode('', $buffer));
$new->save('php://output'); 
```

这大约 20 行代码会产生以下输出：

```
<?xml version="1.0"?>
<EXPERIMENT_PACKAGE>
  <EXPERIMENT alias="SC_EXP_7229_8#56" center_name="SC" accession="ERX086768">
    <IDENTIFIERS>
      <PRIMARY_ID>ERX086768</PRIMARY_ID>
      <SUBMITTER_ID namespace="SC">SC_EXP_7229_8#56</SUBMITTER_ID>
    </IDENTIFIERS>
    <TITLE/>
    <STUDY_REF accession="ERP000913" refname="Genome_diversity_in_Streptococcus_dysgalactiae_subspecies_equisimilis-sc-2011-09-22T08:43:17Z-1977" refcenter="SC">
      <IDENTIFIERS>
        <PRIMARY_ID>ERP000913</PRIMARY_ID>
        <SUBMITTER_ID namespace="SC">Genome_diversity_in_Streptococcus_dysgalactiae_subspecies_equisimilis-sc-2011-09-22T08:43:17Z-1977</SUBMITTER_ID>
      </IDENTIFIERS>
    </STUDY_REF>
    <DESIGN>
      <DESIGN_DESCRIPTION>Standard</DESIGN_DESCRIPTION>
      <SAMPLE_DESCRIPTOR accession="ERS074283" refname="MR223754-sc-2011-11-18T11:31:44Z-1306470" refcenter="SC">
        <IDENTIFIERS>
          <PRIMARY_ID>ERS074283</PRIMARY_ID>
          <SUBMITTER_ID namespace="SC">MR223754-sc-2011-11-18T11:31:44Z-1306470</SUBMITTER_ID>
        </IDENTIFIERS>
      </SAMPLE_DESCRIPTOR>
      <LIBRARY_DESCRIPTOR>
        <LIBRARY_NAME>4008297</LIBRARY_NAME>
        <LIBRARY_STRATEGY>WGS</LIBRARY_STRATEGY>
        <LIBRARY_SOURCE>GENOMIC</LIBRARY_SOURCE>
        <LIBRARY_SELECTION>RANDOM</LIBRARY_SELECTION>
        <LIBRARY_LAYOUT>
          <PAIRED NOMINAL_LENGTH="250"/>
        </LIBRARY_LAYOUT>
      </LIBRARY_DESCRIPTOR>
      <SPOT_DESCRIPTOR>
        <SPOT_DECODE_SPEC>
          <READ_SPEC>
            <READ_INDEX>0</READ_INDEX>
            <READ_CLASS>Application Read</READ_CLASS>
            <READ_TYPE>Forward</READ_TYPE>
            <BASE_COORD>1</BASE_COORD>
          </READ_SPEC>
          <READ_SPEC>
            <READ_INDEX>1</READ_INDEX>
            <READ_CLASS>Application Read</READ_CLASS>
            <READ_TYPE>Reverse</READ_TYPE>
            <RELATIVE_ORDER follows_read_index="0"/>
          </READ_SPEC>
        </SPOT_DECODE_SPEC>
      </SPOT_DESCRIPTOR>
    </DESIGN>
    <PLATFORM>
      <ILLUMINA>
        <INSTRUMENT_MODEL>Illumina HiSeq 2000</INSTRUMENT_MODEL>
      </ILLUMINA>
    </PLATFORM>
    <PROCESSING/>
  </EXPERIMENT>
  <SUBMISSION accession="ERA119046" center_name="SC" submission_date="2012-04-17T09:29:50Z" alias="ERP000913-sc-20120417-2" lab_name="">
    <IDENTIFIERS>
      <PRIMARY_ID>ERA119046</PRIMARY_ID>
      <SUBMITTER_ID namespace="SC">ERP000913-sc-20120417-2</SUBMITTER_ID>
    </IDENTIFIERS>
  </SUBMISSION>
  <STUDY alias="Genome_diversity_in_Streptococcus_dysgalactiae_subspecies_equisimilis-sc-2011-09-22T08:43:17Z-1977" center_name="SC" accession="ERP000913">
    <IDENTIFIERS>
      <PRIMARY_ID>ERP000913</PRIMARY_ID>
      <SUBMITTER_ID namespace="SC">Genome_diversity_in_Streptococcus_dysgalactiae_subspecies_equisimilis-sc-2011-09-22T08:43:17Z-1977</SUBMITTER_ID>
    </IDENTIFIERS>
    <DESCRIPTOR>
      <STUDY_TITLE>Genome_diversity_in_Streptococcus_dysgalactiae_subspecies_equisimilis</STUDY_TITLE>
      <STUDY_TYPE existing_study_type="Whole Genome Sequencing"/>
      <STUDY_ABSTRACT>http://www.sanger.ac.uk/resources/downloads/bacteria/</STUDY_ABSTRACT>
      <CENTER_PROJECT_NAME>Genome_diversity_in_Streptococcus_dysgalactiae_subspecies_equisimilis</CENTER_PROJECT_NAME>
      <STUDY_DESCRIPTION>http://www.sanger.ac.uk/resources/downloads/bacteria/
This data is part of a pre-publication release. For information on the proper use of pre-publication data shared by the Wellcome Trust Sanger Institute (including details of any publication moratoria), please see http://www.sanger.ac.uk/datasharing/</STUDY_DESCRIPTION>
    </DESCRIPTOR>
  </STUDY>
  <SAMPLE alias="MR223754-sc-2011-11-18T11:31:44Z-1306470" center_name="SC" accession="ERS074283">
    <IDENTIFIERS>
      <PRIMARY_ID>ERS074283</PRIMARY_ID>
      <SUBMITTER_ID namespace="SC">MR223754-sc-2011-11-18T11:31:44Z-1306470</SUBMITTER_ID>
    </IDENTIFIERS>
    <SAMPLE_NAME>
      <COMMON_NAME>Streptococcus dysgalactiae subspecies equisimilis</COMMON_NAME>
      <TAXON_ID>119602</TAXON_ID>
      <SCIENTIFIC_NAME>Streptococcus dysgalactiae subsp. equisimilis</SCIENTIFIC_NAME>
    </SAMPLE_NAME>
    <SAMPLE_LINKS>
      <SAMPLE_LINK>
        <ENTREZ_LINK>
          <DB>biosample</DB>
          <ID>859730</ID>
        </ENTREZ_LINK>
      </SAMPLE_LINK>
    </SAMPLE_LINKS>
    <SAMPLE_ATTRIBUTES>
      <SAMPLE_ATTRIBUTE>
        <TAG>Strain</TAG>
        <VALUE>MR223754</VALUE>
      </SAMPLE_ATTRIBUTE>
      <SAMPLE_ATTRIBUTE>
        <TAG>Sample Description</TAG>
        <VALUE/>
      </SAMPLE_ATTRIBUTE>
      <SAMPLE_ATTRIBUTE>
        <TAG>ArrayExpress-StrainOrLine</TAG>
        <VALUE>MR223754</VALUE>
      </SAMPLE_ATTRIBUTE>
      <SAMPLE_ATTRIBUTE>
        <TAG>ArrayExpress-Sex</TAG>
        <VALUE>not applicable</VALUE>
      </SAMPLE_ATTRIBUTE>
      <SAMPLE_ATTRIBUTE>
        <TAG>ArrayExpress-Species</TAG>
        <VALUE>Streptococcus dysgalactiae subspecies equisimilis</VALUE>
      </SAMPLE_ATTRIBUTE>
    </SAMPLE_ATTRIBUTES>
  </SAMPLE>
  <RUN_SET>
    <RUN alias="SC_RUN_7229_8#56" center_name="SC" accession="ERR109334" total_spots="2708543" total_bases="406281450" size="334475592" load_done="true" published="2012-04-27 20:11:35" is_public="true" cluster_name="public" static_data_available="1">
      <IDENTIFIERS>
        <PRIMARY_ID>ERR109334</PRIMARY_ID>
        <SUBMITTER_ID namespace="SC">SC_RUN_7229_8#56</SUBMITTER_ID>
      </IDENTIFIERS>
      <EXPERIMENT_REF refname="SC_EXP_7229_8#56" refcenter="SC" accession="ERX086768">
        <IDENTIFIERS>
          <PRIMARY_ID>ERX086768</PRIMARY_ID>
          <SUBMITTER_ID namespace="SC">SC_EXP_7229_8#56</SUBMITTER_ID>
        </IDENTIFIERS>
      </EXPERIMENT_REF>
      <Pool>
        <Member member_name="" accession="ERS074283" sample_name="MR223754-sc-2011-11-18T11:31:44Z-1306470" spots="2708543" bases="406281450"/>
      </Pool>
    </RUN>
  </RUN_SET>
</EXPERIMENT_PACKAGE> 
```

所以不要重新发明轮子，只需了解现有工具即可。有时它比第一眼看起来更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T19:42:28.540

[http://php.net/manual/en/class.simplexmlelement.php](http://php.net/manual/en/class.simplexmlelement.php)

它将为您提供一个简单的界面来使用 xml 作为对象。您可能会设置一些属性以解析我想的 cdata 值和属性。要从 Web 服务器获取 xml，请使用 curl 或 file_get_contents 之类的东西。但推荐使用卷曲。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T19:43:42.237

单击发送数据>获取将带您到另一个页面。以不同格式下载的选项。此网址：[http](http://trace.ncbi.nlm.nih.gov/Traces/sra/?cmd=dload&run_list=ERR109334&format=fasta) ://trace.ncbi.nlm.nih.gov/Traces/sra/?cmd=dload&run_list=ERR109334&format=fasta似乎以 gzip 格式提供数据。也许您可以`GET`在此源上使用 a 而不是尝试将 XML 从 HTML 中解析出来？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T19:55:00.823

您必须列出所有有效的 HTMl 标签并将它们从网页中删除。例如：

```
$taglist = ['div', 'b', 'input']; // List the HTML tags here.
$xml= (read in the webpage here);
foreach ($taglist as $tag) {
    $regex = '<' . $tag . '(?: [a-z]+(?:=.+))*?>';
    $xml = preg_replace($regex, '', $xml);

    // Repeat for the closing tag
    $regex = '</' . $tag . '(?: [a-z]+(?:=.+))*?>';
    $xml = preg_replace($regex, '', $xml);
} 
```

完成后，$xml 将包含 XML 作为字符串，PHP 应该能够处理它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T20:09:50.073

这门课`XmlRead`可以做到。我也为它设置了 curl 课程

卷曲：

```
 function HeaderProc($response,$Run="",$String=1/*[Is 1 IF Use for String Mode ]*/){
          if($String==1){
             $response=explode("\r\n",$response);  
          }
          $PartHeader=0;
          $out[$PartHeader]=array();
          while(list($key,$val)=each($response)){
              $name='';
              $value='';
              $flag=false;
              for($i=0;$i<strlen($val);$i++){
                  if($val[$i]==":"){
                      $flag=true;
                      for($j=$i+1;$j<strlen($val);$j++){
                        if($val[$i]=="\r" and $val[$i+1]=="\n"){    
                            break;
                        }
                        $value.=$val[$j];
                      }
                      break;
                  }
                  $name.=$val[$i]; 
              }
              if($flag){
                if($name=='' and $value==''){
                    $PartHeader++;  
                }else{
                  if(isset($out[$PartHeader][$name])){
                    if(is_array($out[$PartHeader][$name])){   
                        $out[$PartHeader][$name][]=$value;
                    }else{
                        $T=$out[$PartHeader][$name];
                        $out[$PartHeader][$name]=array();
                        $out[$PartHeader][$name][0]=$T;  
                        $out[$PartHeader][$name][1]=$value;  
                    }
                  }else{
                    $out[$PartHeader][$name]=$value;
                  }
                }
              }else{
                if($name==''){
                    $PartHeader++;  
                }else{
                    if(isset($out[$PartHeader][$name])){ 
                      if(is_array($out[$PartHeader][$name])){   
                        $out[$PartHeader][$name][]=$value;
                      }else{
                        $T=$out[$PartHeader][$name];
                        $out[$PartHeader][$name]=array();
                        $out[$PartHeader][$name][0]=$T;  
                        $out[$PartHeader][$name][1]=$name;  
                      }
                    }else{
                        $out[$PartHeader][$name]=$name; 
                    }
                } 
              }
              if($Run!=""){
                $Run($name,$value);  
              }
          }
          return $out;
}

class cURL { 
    var $headers; 
    var $user_agent; 
    var $compression; 
    var $cookie_file; 
    var $proxy; 
    var $Cookie; 
    function CookieAnalysis($Cookie){//convert str cookie to array cookie 
       //echo $Cookie;
       $this->Cookie=array();
       preg_match("~(.*?)=(.*?);~si",' '.$Cookie.'; ',$M);
       $this->Cookie[trim($M[1])]=trim($M[2]);
       return $this->Cookie;
    }
    function cURL($cookies=false,$cookie='cookies.txt',$compression='gzip',$proxy='') {
         $this->headers[] = 'Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8';
         $this->headers[] = 'Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3'; 
         $this->headers[] = 'Accept-Encoding:gzip,deflate,sdch';
         $this->headers[] = 'Accept-Language:en-US,en;q=0.8';
         $this->headers[] = 'Cache-Control:max-age=0';
         $this->headers[] = 'Connection:keep-alive';
         $this->user_agent = 'User-Agent:Mozilla/5.0 (SepidarSoft [Organic Search Engine Crawler] Linux Edition) AppleWebKit/536.5 (KHTML, like Gecko) SepidarBrowser/1.0.100.52 Safari/536.5';
         $this->compression=$compression; 
         $this->proxy=$proxy; 
         $this->cookies=$cookies; 
         if ($this->cookies == TRUE) $this->cookie($cookie); 
    } 
    function cookie($cookie_file) { 
         if (file_exists($cookie_file)) { 
            $this->cookie_file=$cookie_file; 
         } else { 
            fopen($cookie_file,'w') or $this->error('The cookie file could not be opened. Make sure this directory has the correct permissions');
            $this->cookie_file=$cookie_file; 
            @fclose($this->cookie_file); 
         } 
    }
    function GET($url) { 
         $process = curl_init($url); 
         curl_setopt($process, CURLOPT_HTTPHEADER, $this->headers); 
         curl_setopt($process, CURLOPT_HEADER, 1); 
         curl_setopt($process, CURLOPT_USERAGENT, $this->user_agent); 
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEFILE, $this->cookie_file);
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEJAR, $this->cookie_file);
         curl_setopt($process,CURLOPT_ENCODING , $this->compression); 
         curl_setopt($process, CURLOPT_TIMEOUT, 30); 
         if ($this->proxy) curl_setopt($process, CURLOPT_PROXY, $this->proxy); 
         curl_setopt($process, CURLOPT_RETURNTRANSFER, 1); 
         curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1); 
         $response = curl_exec($process);
         $header_size = curl_getinfo($process,CURLINFO_HEADER_SIZE);
         $result['Header'] = HeaderProc(substr($response, 0, $header_size),'',1);
         foreach($result['Header'] as $HeaderK=>$HeaderP){
           if(!is_array($HeaderP['Set-Cookie']))continue;
           foreach($HeaderP['Set-Cookie'] as $key=>$val){
             $result['Header'][$HeaderK]['Set-Cookie'][$key]=$this->CookieAnalysis($val);
           }
         }
         $result['Body'] = substr( $response, $header_size );
         $result['HTTP_State'] = curl_getinfo($process,CURLINFO_HTTP_CODE);
         $result['URL'] = curl_getinfo($process,CURLINFO_EFFECTIVE_URL); 
         curl_close($process); 
         return $result; 
    }
    function POST($url,$data) { 
         $process = curl_init($url); 
         curl_setopt($process, CURLOPT_HTTPHEADER, $this->headers); 
         curl_setopt($process, CURLOPT_HEADER, 1); 
         curl_setopt($process, CURLOPT_USERAGENT, $this->user_agent); 
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEFILE, $this->cookie_file);
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEJAR, $this->cookie_file);
         curl_setopt($process, CURLOPT_ENCODING , $this->compression); 
         curl_setopt($process, CURLOPT_TIMEOUT, 30); 
         if ($this->proxy) curl_setopt($process, CURLOPT_PROXY, $this->proxy); 
         curl_setopt($process, CURLOPT_POSTFIELDS, $data); 
         curl_setopt($process, CURLOPT_RETURNTRANSFER, 1); 
         curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1); 
         curl_setopt($process, CURLOPT_POST, 1);
         $response = curl_exec($process); 
         $header_size = curl_getinfo($process,CURLINFO_HEADER_SIZE);
         $result['Header'] = HeaderProc(substr($response, 0, $header_size),'',1);
         foreach($result['Header'] as $HeaderK=>$HeaderP){
            if(!is_array($HeaderP['Set-Cookie']))continue;
           foreach($HeaderP['Set-Cookie'] as $key=>$val){
             $result['Header'][$HeaderK]['Set-Cookie'][$key]=$this->CookieAnalysis($val);
           }
         }
         $result['Body'] = substr( $response, $header_size );
         $result['HTTP_State'] = curl_getinfo($process,CURLINFO_HTTP_CODE);
         $result['URL'] = curl_getinfo($process,CURLINFO_EFFECTIVE_URL);
         curl_close($process); 
         return $result; 
    }
    function error($error) { 
         echo "<center><div style='width:500px;border: 3px solid #FFEEFF; padding: 3px; background-color: #FFDDFF;font-family: verdana; font-size: 10px'><b>cURL Error</b><br>$error</div></center>";
         die; 
    } 
 } 
```

XmlRead

```
 class XmlRead{    
    static function Clean($html){
   $html=preg_replace_callback("~<script(.*?)>(.*?)</script>~si",function($m){
      //print_r($m);
     // $m[2]=preg_replace("/\/\*(.*?)\*\/|[\t\r\n]/s"," ", " ".$m[2]." ");
      $m[2]=preg_replace("~//(.*?)\n~si"," ", " ".$m[2]." ");
      //echo $m[2];
      return "<script ".$m[1].">".$m[2]."</script>";
      }, $html);
  $search = array(
        "/ +/" => " ",
        "/<!–\{(.*?)\}–&gt;|<!–(.*?)–&gt;|[\t\r\n]|<!–|–&gt;|\/\/ <!–|\/\/ –&gt;|<!\[CDATA\[|\/\/ \]\]>|\]\]>|\/\/\]\]>|\/\/<!\[CDATA\[/" => "");
  //$html = preg_replace(array_keys($search), array_values($search), $html);   
  $search = array(
       "/\/\*(.*?)\*\/|[\t\r\n]/s" => "",
       "/ +\{ +|\{ +| +\{/" => "{",
       "/ +\} +|\} +| +\}/" => "}",
       "/ +: +|: +| +:/" => ":",
       "/ +; +|; +| +;/" => ";",
       "/ +, +|, +| +,/" => ","
       );
       $html = preg_replace(array_keys($search), array_values($search), $html);
       preg_match_all('!(<(?:code|pre|script).*>[^<]+</(?:code|pre|script)>)!',$html,$pre);
$html = preg_replace('!<(?:code|pre).*>[^<]+</(?:code|pre)>!', '#pre#', $html);
$html = preg_replace('#<!–[^\[].+–&gt;#', '', $html);
$html = preg_replace('/[\r\n\t]+/', ' ', $html);
$html = preg_replace('/>[\s]+</', '><', $html);
$html = preg_replace('/\s+/', ' ', $html);
if (!empty($pre[0])) {
    foreach ($pre[0] as $tag) {
        $html = preg_replace('!#pre#!', $tag, $html,1);
    }
}
return($html);
}
function loadNprepare($content,$encod='') {
   $content=self::Clean($content);
   //$content=html_entity_decode(html_entity_decode($content));
  // $content=htmlspecialchars_decode($content,ENT_HTML5);
   $this->DataPage='';
   preg_match('~<body(.*?)>(.*?)</body>~si',$content,$M);
   $this->DataPage=$M[2];
   $HTML=$this->DataPage;
   $HTML="<!doctype html><html><head><meta charset=\"utf-8\"><title>Untitled Document</title></head><body>".$HTML."</body></html>";
   $dom= new DOMDocument; 
   $HTML = str_replace("&", "&amp;", $HTML);  // disguise &s going IN to loadXML() 
  // $dom->substituteEntities = true;  // collapse &s going OUT to transformToXML() 
   $dom->recover = TRUE;
   @$dom->loadHTML('<?xml encoding="UTF-8">' .$HTML); 
   // dirty fix
   foreach ($dom->childNodes as $item)
    if ($item->nodeType == XML_PI_NODE)
      $dom->removeChild($item); // remove hack
   $dom->encoding = 'UTF-8'; // insert proper
    return $dom;
}
function GetBYClass($Doc,$ClassName){
    $finder = new DomXPath($Doc);
    return($finder->query("//*[contains(@class, '$ClassName')]"));
}
function extractText($node) {
     if($node==NULL)return false;    
     if (XML_TEXT_NODE === $node->nodeType || XML_CDATA_SECTION_NODE === $node->nodeType) {
         return $node->nodeValue;
     } else if (XML_ELEMENT_NODE === $node->nodeType || XML_DOCUMENT_NODE === $node->nodeType || XML_DOCUMENT_FRAG_NODE === $node->nodeType) {
       if ('script' === $node->nodeName) return '';

     $text = '';
     foreach($node->childNodes as $childNode) {
        $text .= $this->extractText($childNode);
     }
     return $text;
     }
}
function DOMRemove(DOMNode $from) {

    $from->parentNode->removeChild($from);    
 }

} 
```

为您的页面调用 class 和 conf

```
 $cc = new cURL(); //
 $XmlRead=new XmlRead();
 $Data=$cc->get('http://www.ncbi.nlm.nih.gov/sra/ERX086768?report=FullXml');
     //get page 
 $doc=$XmlRead->loadNprepare($Data['Body']);//load as html
     //remove two part of page related to your page .
 $productspec=$XmlRead->DOMRemove($XmlRead->GetBYClass($doc,'title')->item(0));
 $productspec=$XmlRead->DOMRemove($XmlRead->GetBYClass($doc,'aux')->item(0));
     //select xml part
 $productspec=$XmlRead->GetBYClass($doc,'rprt');
 foreach($productspec as $data)
 {
    $content=html_entity_decode(html_entity_decode($XmlRead->extractText($data)));//decode as entity html 
    print_r($content);  
 } 
```

输出：

```
 <EXPERIMENT_PACKAGE><EXPERIMENT alias="SC_EXP_7229_8#56"center_name="SC"accession="ERX086768"><IDENTIFIERS><PRIMARY_ID>ERX086768</PRIMARY_ID><SUBMITTER_ID namespace="SC">SC_EXP_7229_8#56</SUBMITTER_ID></IDENTIFIERS><TITLE></TITLE><STUDY_REF accession="ERP000913"refname="Genome_diversity_in_Streptococcus_dysgalactiae_subspecies_equisimilis-sc-2011-09-22T08:43:17Z-1977"refcenter="SC"><IDENTIFIERS><PRIMARY_ID>ERP000913</PRIMARY_ID><SUBMITTER_ID namespace="SC">Genome_diversity_in_Streptococcus_dysgalactiae_subspecies_equisimilis-sc-2011-09-22T08:43:17Z-1977</SUBMITTER_ID></IDENTIFIERS></STUDY_REF><DESIGN><DESIGN_DESCRIPTION>Standard</DESIGN_DESCRIPTION><SAMPLE_DESCRIPTOR accession="ERS074283"refname="MR223754-sc-2011-11-18T11:31:44Z-1306470"refcenter="SC"><IDENTIFIERS><PRIMARY_ID>ERS074283</PRIMARY_ID><SUBMITTER_ID namespace="SC">MR223754-sc-2011-11-18T11:31:44Z-1306470</SUBMITTER_ID></IDENTIFIERS></SAMPLE_DESCRIPTOR><LIBRARY_DESCRIPTOR><LIBRARY_NAME>4008297</LIBRARY_NAME><LIBRARY_STRATEGY>WGS</LIBRARY_STRATEGY><LIBRARY_SOURCE>GENOMIC</LIBRARY_SOURCE><LIBRARY_SELECTION>RANDOM</LIBRARY_SELECTION><LIBRARY_LAYOUT><PAIRED NOMINAL_LENGTH="250"></PAIRED></LIBRARY_LAYOUT></LIBRARY_DESCRIPTOR><SPOT_DESCRIPTOR><SPOT_DECODE_SPEC><READ_SPEC><READ_INDEX>0</READ_INDEX><READ_CLASS>Application Read</READ_CLASS><READ_TYPE>Forward</READ_TYPE><BASE_COORD>1</BASE_COORD></READ_SPEC><READ_SPEC><READ_INDEX>1</READ_INDEX><READ_CLASS>Application Read</READ_CLASS><READ_TYPE>Reverse</READ_TYPE><RELATIVE_ORDER follows_read_index="0"></RELATIVE_ORDER></READ_SPEC></SPOT_DECODE_SPEC></SPOT_DESCRIPTOR></DESIGN><PLATFORM><ILLUMINA><INSTRUMENT_MODEL>Illumina HiSeq 2000</INSTRUMENT_MODEL></ILLUMINA></PLATFORM><PROCESSING></PROCESSING></EXPERIMENT><SUBMISSION accession="ERA119046"center_name="SC"submission_date="2012-04-17T09:29:50Z"alias="ERP000913-sc-20120417-2"lab_name=""><IDENTIFIERS><PRIMARY_ID>ERA119046</PRIMARY_ID><SUBMITTER_ID namespace="SC">ERP000913-sc-20120417-2</SUBMITTER_ID></IDENTIFIERS></SUBMISSION><STUDY alias="Genome_diversity_in_Streptococcus_dysgalactiae_subspecies_equisimilis-sc-2011-09-22T08:43:17Z-1977"center_name="SC"accession="ERP000913"><IDENTIFIERS><PRIMARY_ID>ERP000913</PRIMARY_ID><SUBMITTER_ID namespace="SC">Genome_diversity_in_Streptococcus_dysgalactiae_subspecies_equisimilis-sc-2011-09-22T08:43:17Z-1977</SUBMITTER_ID></IDENTIFIERS><DESCRIPTOR><STUDY_TITLE>Genome_diversity_in_Streptococcus_dysgalactiae_subspecies_equisimilis</STUDY_TITLE><STUDY_TYPE existing_study_type="Whole Genome Sequencing"></STUDY_TYPE><STUDY_ABSTRACT>http://www.sanger.ac.uk/resources/downloads/bacteria/</STUDY_ABSTRACT><CENTER_PROJECT_NAME>Genome_diversity_in_Streptococcus_dysgalactiae_subspecies_equisimilis</CENTER_PROJECT_NAME><STUDY_DESCRIPTION>http://www.sanger.ac.uk/resources/downloads/bacteria/This data is part of a pre-publication release. For information on the proper use of pre-publication data shared by the Wellcome Trust Sanger Institute (including details of any publication moratoria),please see http://www.sanger.ac.uk/datasharing/</STUDY_DESCRIPTION></DESCRIPTOR></STUDY><SAMPLE alias="MR223754-sc-2011-11-18T11:31:44Z-1306470"center_name="SC"accession="ERS074283"><IDENTIFIERS><PRIMARY_ID>ERS074283</PRIMARY_ID><SUBMITTER_ID namespace="SC">MR223754-sc-2011-11-18T11:31:44Z-1306470</SUBMITTER_ID></IDENTIFIERS><SAMPLE_NAME><COMMON_NAME>Streptococcus dysgalactiae subspecies equisimilis</COMMON_NAME><TAXON_ID>119602</TAXON_ID><SCIENTIFIC_NAME>Streptococcus dysgalactiae subsp. equisimilis</SCIENTIFIC_NAME></SAMPLE_NAME><SAMPLE_LINKS><SAMPLE_LINK><ENTREZ_LINK><DB>biosample</DB><ID>859730</ID></ENTREZ_LINK></SAMPLE_LINK></SAMPLE_LINKS><SAMPLE_ATTRIBUTES><SAMPLE_ATTRIBUTE><TAG>Strain</TAG><VALUE>MR223754</VALUE></SAMPLE_ATTRIBUTE><SAMPLE_ATTRIBUTE><TAG>Sample Description</TAG><VALUE></VALUE></SAMPLE_ATTRIBUTE><SAMPLE_ATTRIBUTE><TAG>ArrayExpress-StrainOrLine</TAG><VALUE>MR223754</VALUE></SAMPLE_ATTRIBUTE><SAMPLE_ATTRIBUTE><TAG>ArrayExpress-Sex</TAG><VALUE>not applicable</VALUE></SAMPLE_ATTRIBUTE><SAMPLE_ATTRIBUTE><TAG>ArrayExpress-Species</TAG><VALUE>Streptococcus dysgalactiae subspecies equisimilis</VALUE></SAMPLE_ATTRIBUTE></SAMPLE_ATTRIBUTES></SAMPLE><RUN_SET><RUN alias="SC_RUN_7229_8#56"center_name="SC"accession="ERR109334"total_spots="2708543"total_bases="406281450"size="334475592"load_done="true"published="2012-04-27 20:11:35"is_public="true"cluster_name="public"static_data_available="1"><IDENTIFIERS><PRIMARY_ID>ERR109334</PRIMARY_ID><SUBMITTER_ID namespace="SC">SC_RUN_7229_8#56</SUBMITTER_ID></IDENTIFIERS><EXPERIMENT_REF refname="SC_EXP_7229_8#56"refcenter="SC"accession="ERX086768"><IDENTIFIERS><PRIMARY_ID>ERX086768</PRIMARY_ID><SUBMITTER_ID namespace="SC">SC_EXP_7229_8#56</SUBMITTER_ID></IDENTIFIERS></EXPERIMENT_REF><Pool><Member member_name=""accession="ERS074283"sample_name="MR223754-sc-2011-11-18T11:31:44Z-1306470"spots="2708543"bases="406281450"></Member></Pool></RUN></RUN_SET></EXPERIMENT_PACKAGE> 
```***

# c# - ASP 上的服务器标签格式不正确：gridview 的图像

> ID：15855189
> 
> 赞同：0
> 
> 时间：2013-04-06T19:38:24.163
> 
> 标签：c#, asp.net, gridview, imageurl

对是否应该使用 Eval 或 Bind 感到困惑。我阅读了很多关于这个主题的答案，但似乎没有一个是我的具体情况。此链接上的答案应该可以工作，但没有

[如何从服务器 Floder 在 gridview 中显示图像？](https://stackoverflow.com/questions/12638205/how-to-display-image-in-gridview-from-server-floder)

这是我最初尝试的，我没有收到错误，但我没有让图片显示在网格中。

```
 <asp:TemplateField HeaderText="Image" SortExpression="Image" HeaderStyle-Width="250" >
      <ItemTemplate>
        <asp:Image runat="server" ID="imagePreview"  Width="200" ImageUrl='~/ProductImages/ <%# Bind("Filename") %>' />
      </ItemTemplate>
    </asp:TemplateField> 
```

然后我尝试根据上面链接中的建议将我的 asp:image 标记重新编码为以下内容

`<asp:Image runat="server" ID="imagePreview" Width="200" ImageUrl="<%# Page.ResolveClientUrl(String.Format("~/ProductImages/{0}",Eval("Filename"))) %>" />`

但这给了我一个

> “服务器标签格式不正确”

错误。

我也尝试了使用标签的建议，但也无法使用这种方法。

是否可以在不在文件后面的代码中设置图像 url 和 asp:image 标记的情况下执行此操作，还是必须使用 img 标记？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:47:46.510

通过图像 url lyk 这个....

```
ImageUrl='<%# "~/ProductImages/"+Eval("Filename").ToString() %>' 
```

# ruby-on-rails - “评估”已被弃用。请改用“评估”

> ID：15855193
> 
> 赞同：7
> 
> 时间：2013-04-06T19:38:41.917
> 
> 标签：ruby-on-rails, ruby, linux, cucumber

从最近开始写黄瓜功能我收到警告

```
[DEPRECATION] "eval" is deprecated. Please use "evaluate" instead 
```

一切正常，但这个警告让我感到不安。我正在使用**Rails 3.1.0**和**ruby​​ 1.9.3p392 (2013-02-22 revision 39386) [x86_64-linux]**。我的文件是：

**项目特征：**

```
Background: logged in as an admin
Given I am logged in as an administrator 
```

**用户步骤.rb**

```
 Given /^I am logged in as an administrator$/ do
 steps %Q{
   Given the following users exist:
    | email               | password         | role       |
    | admin@test.com      | admin_password   | admin      |
    | visitor@visitor.com | visitor_password | registered |
   And I am on the "home page"
   And I follow "Login"
   And I fill in "Email" with "admin@test.com"
   And I fill in "Password" with "admin_password"
   And I press "Sign in"
   Then I should see "admin"
}
end 
```

**结果我有：**

```
 Background: logged in as an admin            # features/item.feature:6
[DEPRECATION] "eval" is deprecated. Please use "evaluate" instead
[DEPRECATION] "eval" is deprecated. Please use "evaluate" instead
[DEPRECATION] "eval" is deprecated. Please use "evaluate" instead
[DEPRECATION] "eval" is deprecated. Please use "evaluate" instead 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T20:23:25.927

遇到完全相同的问题。它没有破坏任何东西，它只是丑陋。

这似乎是**代码不匹配**。Gherkin 已弃用`eval`，`evaluate`Cucumber 正在调用旧方法。[在 github 上](https://github.com/cucumber/cucumber/issues/420)已经准备好了一个 pull request 和一个已关闭的 issue

在 Cucumber 可能很快更新之前，最快和最简单的解决方案就是将这一行添加到您的 Gemfile 中：

```
gem 'gherkin', '<= 2.11.6' 
```

这将迫使 gherkin 回到 eval 被弃用之前的时间。

**编辑：**

黄瓜 gem 似乎已更新，不再产生弃用警告。

# jmeter - 查看结果树报告的执行顺序不正确

> ID：15855205
> 
> 赞同：-1
> 
> 时间：2013-04-06T19:39:54.603
> 
> 标签：jmeter

我执行了多个线程组，每个组都有多个采样器（请求）。
在完成最终结果后，我没有看到正确的执行顺序。
我的意思是在结果树中所有请求都以正确的顺序显示，但我希望以正确的顺序查看。

有什么方法可以查看具有正确执行顺序的完整报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:13:39.420

测试计划配置中有一个选项`Run Thread Groups consecutively (i.e. run groups one at a time)`- 如果这是您正在寻找的东西。

# c++ - 我现在如何知道哪些 DLL 是 C++ 的一部分？

> ID：15855207
> 
> 赞同：1
> 
> 时间：2013-04-06T19:40:10.780
> 
> 标签：c++, deployment, dependencies

我已经在 Dependency Walker 中打开了我的程序。它显示了以下 DLL：

*   GDI32.DLL
*   OLEAUT32.DLL
*   IMM32.DLL
*   WINMM.DLL
*   内核32.DLL
*   USER32.DLL
*   SHELL32.DLL
*   OLE32.DLL
*   ADVAPI32.DLL
*   WS2_32.DLL
*   MSVCP100.DLL
*   MSVCR100.DLL

所以我猜其中一半是 Windows 的一部分，另一半是 C++ 的一部分，对吧？找出哪些是操作系统的一部分而哪些不是的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:55:48.483

**不要打包您自己未明确添加到项目中的*任何DLL。***

阅读您的工具链（Visual Studio 或其他）的文档，了解您的包中是否需要包含任何可*再发行组件。*这些可能包括一些 DLL。

如果您不允许发布*安装程序*（微软产品的上述可再发行组件通常采用这种形式），那么您不应简单地手动转储 DLL。您应在*发行说明*中注明这些依赖项必须已安装在目标系统上。您使它们成为您的应用程序*的先决条件*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T19:49:00.953

MSVCP100.dll 和 MSVCR100.dll 包含 C 和 C++ 的运行时库。列表中的其他所有内容都属于 Windows。确定 DLL 是否属于 Windows 的一种方法是查看它的路径 (c:\windows...)，然后检查来自 MS 的数字签名。这不是万无一失的，但它会让您更接近确定 DLL 是否属于 Windows。

编辑：请参阅Lightness Races In Orbit 关于分发 Windows DLL 的[答案](https://stackoverflow.com/a/15855370/845568)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T19:45:28.403

除了使用谷歌查找它们之外，可能没有简单的方法来判断。但是，在这种情况下，我可以告诉您这`MSVCP100.DLL`是 C++ 标准库代码，并且`MSVCR100.DLL`是 C 运行时库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T19:52:45.310

Dependency Walker 本身具有“已知系统 DLL”列表。您可以在选项 -> 配置模块搜索顺序菜单中找到它。

# python - 将此 Python 代码转换为可视 GUI？

> ID：15855214
> 
> 赞同：0
> 
> 时间：2013-04-06T19:40:32.780
> 
> 标签：python, user-interface

我有一个朋友制作的 python 代码，因为我对 python 的了解非常少。我想将它转换为 GUI，因为我们会将代码作为程序分发，以使其对初学者友好。

无论如何，这是代码：

```
import time, os, sys 
try: 
if len(sys.argv) < 2: 
    fn = raw_input("Enter the name of the file you want to edit: ") 
else: fn = sys.argv[1] 
f = open(fn) 
b = f.read() 
for i in b[:300]: 
    print hex(ord(i))[2:], 
f.close() 
line = str(0x15c)+'-'+str(0x15f) 
if len(sys.argv)<3: 
    hexcode = raw_input("3 bytes color hex number: ") 
else: hexcode = sys.argv[2] 
if not hexcode.startswith('0x'): 
    hexcode = '0x'+hexcode 
hexstr = '0x'
start = int(line.split('-')[0]) 
end = int(line.split('-')[1]) 
for i in b[start:end]: 
    hexstr+=hex(ord(i))[2:] 
ascii = '' 
for i in range(2,len(hexcode),2): 
    char = chr(int(hexcode[i:i+2],16)) 
    ascii+=char 
b = b[:start]+ascii+b[end:] 
for i in b[:300]: 
    print hex(ord(i))[2:], 
except Exception, x: 
print x 
time.sleep(3) 
finally: 
f = open(fn,'wb') 
f.write(b) 
f.close() 
```

现在我在教程中找到了这个但不知道如何使用它：#simple GU0I

```
from Tkinter import *

root = Tk()
root.title("BreffHexReplace")
root.geometry("400x200")

app = Frame(root)
app.grid()
label = Label(app, text = "This is a label!")

label.grid()

root.mainloop() 
```

有什么帮助吗？谢谢！

还有一件事，在这段代码中，在我输入名称或替换十六进制后，它会显示一个十六进制列表，我怎样才能让它不显示？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:22:33.920

因为这个程序很简单，你可以试试 EasyGui(easygui.sourceforge.net/)。首先，添加`import easygui as eg`. 此行加载 EasyGui 模块。接下来，替换`fn = raw_input("Enter the name of the file you want to edit: ")`为`fn = eg.fileopenbox(title = 'HexReplace', msg = 'Browse to the file you wish to edit')`。这将打开一个框以浏览到想要的文件。也替换`hexcode = raw_input("3 bytes color hex number: ")`为`hexcode = eg.enterbox(msg = '3 bytes color hex number', title = 'HexReplace')`. 这会弹出一个输入框。替换`print x`为`eg.msgbox(title = 'HexReplace', msg = x)`。这将显示一个带有异常的消息框。`title`参数是窗口标题。要删除十六进制列表，请在导入和`try`块之间添加：`null = open(os.devnull, 'W's); oldstdout = system.stdout; sys.stdout = null` 这将使所有打印消息静音。

# php - 使用 PHP 实现 RSA

> ID：15855218
> 
> 赞同：1
> 
> 时间：2013-04-06T19:40:50.727
> 
> 标签：php, runtime, rsa

我正在尝试编写 RSA 算法的实现。为此，我需要在 PHP 中计算具有非常大数字的模幂。例如：c^d Mod n，其中 c,d,n 的长度约为 1024 位。这适用于 bcpowmod，但运行时非常糟糕。计算一个这样的数字大约需要 2-3 秒。在具有 BigInteger 的 Java 和具有同等实现 BigInteger 的 JavaScript 中，相同的步骤需要 ca。0.04 秒。PHP中有另一种方式，或者我还能如何在服务器端执行此操作？这是 PHP 中的代码：

```
$c = "alongnumber";
$d = "alongnumber";
$n = "alongnumber";
$m = bcpowmod($c,$d,$n); 
```

提前致谢！

# java - java.lang.AbstractMethodError: com.mysql.jdbc.PreparedStatement.setBlob(ILjava/io/InputStream;)V

> ID：15855222
> 
> 赞同：2
> 
> 时间：2013-04-06T19:41:06.953
> 
> 标签：java, mysql, jdbc, blob

我正在尝试将上传的文件保存在 MySQL 数据库中，如下所示：

```
String firstName = request.getParameter("firstName");
String lastName = request.getParameter("lastName");

InputStream inputStream = null; // input stream of the upload file

// obtains the upload file part in this multipart request
Part filePart = request.getPart("photo");
if (filePart != null) {
    // prints out some information for debugging
    System.out.println(filePart.getName());
    System.out.println(filePart.getSize());
    System.out.println(filePart.getContentType());

    // obtains input stream of the upload file
    inputStream = filePart.getInputStream();
}

Connection conn = null; // connection to the database
String message = null;  // message will be sent back to client

try {
    // connects to the database
    DriverManager.registerDriver(new com.mysql.jdbc.Driver());
    conn = DriverManager.getConnection(dbURL, dbUser, dbPass);

    // constructs SQL statement
    String sql = "INSERT INTO image(image,firstName, lastName) values (?, ?, ?)";
    PreparedStatement statement = conn.prepareStatement(sql);

    if (inputStream != null) {
        // fetches input stream of the upload file for the blob column
        statement.setBlob(1, inputStream);
    }

    statement.setString(2, firstName);
    statement.setString(3, lastName);

    // sends the statement to the database server
    int row = statement.executeUpdate();
    if (row > 0) {
        message = "File uploaded and saved into database";
    }
} catch (SQLException ex) {
    message = "ERROR: " + ex.getMessage();
    ex.printStackTrace();
} finally {
    if (conn != null) {
        // closes the database connection
        try {
            conn.close();
        } catch (SQLException ex) {
            ex.printStackTrace();
        }
    }
    // sets the message in request scope
    request.setAttribute("Message", message);

    // forwards to the message page
    getServletContext().getRequestDispatcher("/Message.jsp").forward(request, response);
} 
```

当我运行这个我得到一个错误是：

```
javax.servlet.ServletException: Servlet execution threw an exception

root cause

java.lang.AbstractMethodError: com.mysql.jdbc.PreparedStatement.setBlob(ILjava/io/InputStream;)V
    UploadServlet.doPost(UploadServlet.java:64)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

这个错误的原因可能是什么？输入字段名称是名字，姓氏和照片

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-06T09:46:21.580

您应该使用 `mysql-connector-java-5.1.7-bin.jar`它来完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T19:59:07.930

正如 giorgiga 在[这篇文章](https://stackoverflow.com/questions/13789797/java-file-upload-to-mysql)中所说，它是您的 JDBC 驱动程序版本。要么更新它，要么使用旧版本的 setBlob。

**编辑：** 取自 giorgiga 的回答，以防万一链接失效。

> AbstractMethodError 表示您的 JDBC 驱动程序的 PreparedStatements 没有实现 setBlob(int, InputStream, long)。
> 
> 使用较旧的 setBlob(int, Blob) 或更新您的驱动程序（Connector/J 5.1 实现了 Jdbc 4.0，这应该是您对 setBlob(int, InputStream, long) 所需要的）

# php - 中断然后继续循环

> ID：15855223
> 
> 赞同：0
> 
> 时间：2013-04-06T19:41:11.827
> 
> 标签：php

如果标题为空，我需要打破循环然后继续循环数组

像这样的东西

```
for($i=0;$i<count($out[0]);$i++){

$title = "$z->extract('<title>','</title>',$data);"

   if (empty($title)) {
       break; // Don't continue the sentences below and continuw the next value from the loop
   }
//more sentences php
//more sentences php
//more sentences php
//more sentences php
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:43:14.990

您使用`continue;`而不是`break;`恢复到下一个循环而不处理其他行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T19:43:05.457

采用

```
continue; 
```

而不是休息；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T19:43:26.020

你只需要替换`break`为`continue`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T19:45:56.417

你有两个选择：

```
if (empty($title)) {
      $i++;
} 
```

或者

```
if(!empty($title)){
//more sentences php
//more sentences php
//more sentences php
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T19:49:59.097

```
for($i=0;$i<count($out[0]);$i++){

$title = "$z->extract('<title>','</title>',$data);"

if (empty($title)) continue;
 //more sentences php
 //more sentences php 
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-06T19:46:04.120

**说明：考虑循环是**

```
while {
   foreach {
     if($i == 2) {
       continue 1; //means going to foreach and continue the loop
       continue 2; //means going to while and continue the loop
     }
   }
} 
```

# c# - 使用命名空间与从命名空间显式调用类之间是否存在性能差异？

> ID：15855228
> 
> 赞同：5
> 
> 时间：2013-04-06T19:41:50.097
> 
> 标签：c#, performance

直接从命名空间类库而不是`using`命名空间显式调用方法是否有任何性能优势？

这是我所指的情况的示例：

```
// using
using System.Configuration;
public class MyClass
{
    private readonly static string DBConn = ConfigurationManager.ConnectionStrings["DBConn"].ConnectionString;
} 
```

对比

```
//explicit
public class MyClass
{
    private readonly static string DBConn = System.Configuration.ConfigurationManager.ConnectionStrings["DBConn"].ConnectionString;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T19:43:12.050

不，没有。

编译器会将所有调用转换为一个类以使用完全限定名称。

这很容易在生成的 IL 中看到，使用任何反编译器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T19:45:22.280

## 不。

编译器将为两个代码生成相同的 IL（[中间语言](http://en.wikipedia.org/wiki/Intermediate_language)）。因此，在这一点上不存在性能问题。

例如;

```
Console.WriteLine("Sample Code"); 
```

生成；

```
ldstr       "Sample Code"
call        System.Console.WriteLine 
```

和

```
System.Console.WriteLine("Sample Code"); 
```

生成；

```
ldstr       "Sample Code"
call        System.Console.WriteLine 
```

**tl博士**；编译器将这两个代码都转换为 *完全限定的类名*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T19:43:46.023

这与运行时性能无关，因为它仅对编译器有意义。
编译器必须解析名称才能创建代码。这对运行时没有影响。

# java - 尝试发送电子邮件时出现奇怪的错误

> ID：15855230
> 
> 赞同：1
> 
> 时间：2013-04-06T19:41:53.447
> 
> 标签：java, email, jakarta-ee, java-ee-6, runtime-error

返回以下奇怪的错误。我不明白它来自哪里，因为 Netbeans 调试器非常缺乏。

```
Exception in thread "AWT-EventQueue-0" java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/mail/Address
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at modules.impl.EmailModule.process(EmailModule.java:41)
    at agent.AgentDriver.callModules(AgentDriver.java:66)
    at agent.AgentDriver.process(AgentDriver.java:33)
    at agent.AgentUI.agentTextFieldActionPerformed(AgentUI.java:71) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:20:02.150

事实证明，这实际上与 Java EE 有关。这个解决方案来自[这里](http://www.mkyong.com/hibernate/java-lang-classformaterror-absent-code-attribute-in-method-that-is-not-native-or-abstract-in-class-file/)和[这里](http://helponjee.blogspot.com/2012/04/classformaterror-absent-code-attribute.html)。

Java EE 可能会搞砸您的类路径，因此通常只需将其删除并再次添加（或只是删除）。如果你的类路径有问题，你偶尔会得到一个`java.lang.ClassFormatError`，这就是这里发生的情况。

# java - 无法访问的代码，计数器 = 0

> ID：15855232
> 
> 赞同：-1
> 
> 时间：2013-04-06T19:42:02.053
> 
> 标签：java, android, eclipse

```
package com.thenewboston.jordy;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class Startingpoint extends Activity {

        @Override
    protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_startingpoint);
}

int counter;
Button add, sub;
TextView display;

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.startingpoint, menu);
    return true;

    counter = 0;
    add = (Button) findViewById(R.id.BAdd);
    sub = (Button) findViewById(R.id.Bsub);
    display = (TextView) findViewById(R.id.tvDisplay);
    add.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter++;
            display.setText("Your total is " + counter);
        }
    });
    sub.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter--;
            display.setText("Your total is " + counter);

        }
    });
}

} 
```

你好，我刚刚开始学习使用 eclips 制作 android 应用程序的教程。现在我在“counter = 0”行得到这个错误无法访问的代码，我认为它必须对“return true”行做一些事情，因为当我删除错误消失但随后我得到其他错误：s，确实有人知道这里有什么问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T19:50:33.447

**return**之后的任何代码都不会被执行。因此，您会得到无法访问的代码。

将**return**放在方法的末尾

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
   getMenuInflater().inflate(R.menu.startingpoint, menu);

   counter = 0;
   ...
   return true;
} 
```

# jquery - 使用 jQuery 将选择标签附加到菜单会导致菜单在 wordpress 中翻倍

> ID：15855235
> 
> 赞同：0
> 
> 时间：2013-04-06T19:42:09.530
> 
> 标签：jquery, wordpress, menu, responsive-design

在通过 wp_enqueue_script 调用的 js 文件中，我有这个：

```
jQuery(function () {
    jQuery("<select />").appendTo("#primary_menu_mobile");
    jQuery("<option />", {
        "selected": "selected",
            "value": "",
            "text": "Go to..."
    }).appendTo("#primary_menu_mobile select");
    jQuery("#primary_menu_mobile a").each(function () {
        var el = jQuery(this);
        jQuery("<option />", {
            "value": el.attr("href"),
                "text": el.text()
        }).appendTo("#primary_menu_mobile select");
    });
    jQuery("#primary_menu_mobile select").change(function () {
        window.location = jQuery(this).find("option:selected").val();
    });
}); 
```

在我的 header.php 中，我调用这样的菜单：

```
<?php wp_nav_menu( array(('container_id' => 'primary_menu_mobile')); ?> 
```

输出是我手机上显示的两个菜单。一种是清单。所有链接都可以正常工作。另一个是具有相同菜单链接的下拉菜单。这里的所有链接也可以正常工作。我是否应该像我的主要导航一样为移动性制作一个单独的菜单和 wordpress 并调用它？我对为什么菜单打印两次感到困惑。我重命名了 js 文件以查看没有 jquery 会发生什么，并且列表 ul 菜单仍然显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:47:44.163

如果我正确理解你的问题...

```
jQuery("#primary_menu_mobile a").each 
```

上面的代码似乎暗示你知道你已经将它作为一个链接列表，所以当你完成每个链接时，只需删除这些。

# android - NativeApplication DEACTIVATE-ACTIVATE 应用在后台时

> ID：15855239
> 
> 赞同：1
> 
> 时间：2013-04-06T19:42:19.597
> 
> 标签：android, actionscript-3, air

我做了一个Flash Air游戏。玩游戏时，如果我按下 Android 设备上的 Home 按钮，我会进入手机菜单，但我仍然可以听游戏的音乐，这意味着游戏仍然可以正常运行。

我希望我的应用程序不在前台时暂停。

我已经看过这些代码，但显然我做错了什么，因为它们可能无法正常工作......

```
NativeApplication.nativeApplication.addEventListener(Event.DEACTIVATE, handleApplicationDeactivated);
NativeApplication.nativeApplication.addEventListener(Event.ACTIVATE, handleApplicationActivated); 
```

我列出了：

```
import flash.events.Event;
import flash.desktop.NativeApplication; 
```

你能帮我正确的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:12:32.233

下面的代码将在您按下主页按钮时运行 onPause，并在您返回应用程序时运行 onResume。SoundMixer.stopAll(); 将停止所有正在播放的声音。

```
 this.stage.addEventListener(flash.events.Event.DEACTIVATE, onPause, false, 0, true);

    this.stage.addEventListener(flash.events.Event.ACTIVATE, onResume, false, 0, true);

    private function onPause(event:flash.events.Event):void
    {

        //here save your games state.

        //then stop ALL sound from playing with the following line:
        SoundMixer.stopAll();
        //Remember to import flash.media.SoundMixer;

    }
    private function onResume(event:flash.events.Event):void
    {
         //here you start the sounds again, for example: 
        sound.play();

    } 
```

# c++ - 包含 std::map 的 std::set 中的迭代器

> ID：15855247
> 
> 赞同：0
> 
> 时间：2013-04-06T19:42:59.307
> 
> 标签：c++, map, stl, set

我如何才能访问`map`存储在其中的内容`std::set`？我需要做类似的事情

```
for (iterator=map.begin(); iterator!=map.end(); iterator++) {
    some_function(iterator->first);
} 
```

，但不是使用包含地图的集合来代替地图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:46:07.403

它与迭代任何其他地图没有太大区别。

```
set<map<int, int> > s;
for (set<map<int, int> >::iterator it = s.begin(); it != s.end(); ++it) {
  for (map<int, int>::iterator iter = it->begin(); iter != it->end(); ++iter) {
     .. do something ...
  }
} 
```

因此，首先您遍历集合，然后遍历外部容器的迭代器指向的映射元素。我在`map<int, int>`这里只是为了说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T19:55:30.917

使用 range-for 使这更简单（假设我理解你的问题）：

```
for (map<int, int>& m : my_set) {
    some_function(m);
} 
```

# python - python：在python导入中使用（）的目的是什么？

> ID：15855248
> 
> 赞同：13
> 
> 时间：2013-04-06T19:43:03.690
> 
> 标签：python

我刚看到以下

```
from flask_login import (LoginManager, login_required, login_user, 
                         current_user, logout_user, UserMixin) 
```

在[这里](http://blog.thecircuitnerd.com/flask-login-tokens/)

`()`在 import 语句中使用括号的目的是什么？

为什么有人要使用括号，而我们可以没有括号？

推荐吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-06T19:43:50.947

因此该语句可以换行到下一行。

见章节：[2.1.5。显式行连接和 2.1.6。隐式连线](http://docs.python.org/2/reference/lexical_analysis.html#explicit-line-joining)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-06T19:43:57.773

括号允许导入跨越多行。没有括号，你会得到一个语法错误。

如果导入都在一行上，则括号不会改变任何内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-06T19:51:07.050

我想在我的经验中给你类似的例子：

我们能做的：

```
 a, b, c = (1 ,2 ,3) 
```

但是假设您的代码中的一行很长，并且您想将代码分成多行：

```
 a,
  b,
  c = (1, 2, 3) 
```

但是如果没有 LHS 上的括号你就不能这样做，它会给你错误`NameError: name 'a' is not defined` （编辑：你可以`\`在每一行上使用显式行加入）

你可以这样做：

```
 (a,
    b,
    c )= (1, 2, 3) 
```

而不是`\`我更喜欢`()`方法。

可能我没有完全回答你的问题，但我觉得我应该和你分享。

# jquery - jquery 动力学启用标准垂直触摸滑动

> ID：15855265
> 
> 赞同：0
> 
> 时间：2013-04-06T19:44:17.973
> 
> 标签：jquery, scroll, kineticjs

我使用 jquery kinetic 来获得平滑的水平 div 滚动（[https://github.com/davetayls/jquery.kinetic](https://github.com/davetayls/jquery.kinetic)）。

它工作得很好。但是，在触摸设备上，jquery 动力学禁用正常的垂直滑动/滚动手势。在我看来，如果没有垂直滚动，您将无法在触摸设备上执行任何操作……如果您有一个使用动力学的全宽容器，您将看不到容器下方或上方的内容……

如果动力学设置为仅水平滚动，垂直滚动仍然是禁用的。

有没有办法在使用带有动力学的水平滚动时启用正常的垂直滚动？

对不起我的英语，我是法国人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T01:07:05.333

我遇到了类似的问题，但我不想使用插件，因为太多的插件会给移动设备带来巨大的不必要的开销。

所以我写了以下代码 - 请注意我正在使用

*   jQuery手机
*   jQuery

jQuery mobile 可以为您提供以下事件

```
$("#slider").css("transform","translateX(0px)");
$(document).off("touchstart").on('touchstart',touchStartHandler);
$(document).off("touchmove").on('touchmove',touchMoveHandler);
$(document).off("touchend").on('touchend',touchEndHandler); 
```

您将需要一些全局变量和一些将要滑动的 div 的初始化

```
function touchStartHandler(event){

    touchStart = event.originalEvent.touches[0];
    prevTouch = touchStart ;
    matrix = transMatrixToArray($("#slider").css("transform"));
    initSliderLeft = parseInt(matrix[4] , 10) ; };

function touchMoveHandler(event){

      var touch = event.originalEvent.touches[0];

      disFromStart = touch.pageX - touchStart.pageX ;
      var dis = touch.pageX - prevTouch.pageX ;
      //detecting swipe horizontally , this section should be entered once per swipe
      if( ! isSwiping && Math.abs(disFromStart) > 30 &&(Math.abs(touch.pageY - touchStart.pageY)< 80)){
            isSwiping = true ;
            $("#slider").css("transition-duration", "0s");

      }

      matrix1 = transMatrixToArray($("#slider").css("transform"));
      curTrans = matrix1[4] ;

      if( isSwiping && Math.abs(dis) > 0){
        event.preventDefault();

        $("#slider").css("transform","translateX("+( initSliderLeft + disFromStart  )+"px)");

        prevTouch = touch ;
      } }

function touchEndHandler(event){

isSwiping = false ;
var screenWidth = document.documentElement.clientWidth ;

if( Math.abs(disFromStart) > (screenWidth /3) && (Math.abs(prevTouch.pageY - touchStart.pageY)< Math.abs(disFromStart)*3) ){
    if(disFromStart > 0){
        currentSubPage++ ;

    }else{
        currentSubPage-- ;
    }

}

$("#slider").css("transition-duration", "0.5s");
$("#slider").css("transform","translateX("+(screenWidth * currentSubPage)+"px)"); }

function transMatrixToArray(matrix) {
return matrix.substr(7, matrix.length - 8).split(', ');} 
```

在这段代码中，我使用 css3 转换来滑动一个名为滑块的容器 div，这个容器包含 3 个全宽子页面

# javascript - D3中的节点属性

> ID：15855268
> 
> 赞同：1
> 
> 时间：2013-04-06T19:44:39.370
> 
> 标签：javascript, d3.js

[https://github.com/mbostock/d3/wiki/Force-Layout#wiki-nodes](https://github.com/mbostock/d3/wiki/Force-Layout#wiki-nodes)

这提到了节点的以下属性：index、x、y、px、py、fixed 和 weight

[http://bl.ocks.org/mbostock/4062045](http://bl.ocks.org/mbostock/4062045)

该示例使用上述 URL 未提及的两个节点属性：名称和组。

这是文档部分（即链接 1）或示例（即链接 2）中的错误，是否需要做一些额外的事情来完成我不理解的工作？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T20:02:13.337

第一个链接提到的属性是力布局用于运行模拟的属性。除此之外，您还可以使用任何其他属性来存储附加信息——例如在第二个链接中。不同之处在于，文档中提到的那些通常对力布局有意义，而第二个添加的那些是特定于这个的。

在任何可视化中，您都将拥有包含节点标签、颜色等信息的附加属性。您可以自由使用您喜欢的任何（未使用的）名称。

# algorithm - 如何检测给定图是否有一个包含其所有节点的循环？建议的算法有任何缺陷吗？

> ID：15855270
> 
> 赞同：9
> 
> 时间：2013-04-06T19:44:53.077
> 
> 标签：algorithm, graph, language-agnostic, hamiltonian-cycle, cyclic-graph

我有一个具有 N 个节点和 2N-3 条边的连接的无向图。您可以将图视为构建在现有初始图的基础上，该图具有 3 个节点和 3 条边。添加到图中的每个节点都与图中的现有节点有 2 个连接。当所有节点都添加到图中（总共添加 N-3 个节点）时，构建最终图。

最初我被问到，这个图中可以访问一次的最大节点数是多少（初始节点除外），即给定图的最大哈密顿路径中包含的最大节点数是多少？*（好吧，说最大哈密顿路径不是一个有效的短语，但考虑到问题的性质，我需要找到一次访问的最大节点数，并且行程在初始节点处结束。我认为它可以被视为子图是哈密顿量，由最大数量的节点组成，因此是最大可能的哈密顿路径）。*

由于没有要求我找到路径，因此我应该首先检查给定数量的节点是否存在哈密顿路径。我知道平面图和[循环图](http://en.wikipedia.org/wiki/Cycle_graph)s (C [n] ) 是哈密顿图（我也知道哈密顿图[的 Ore 定理](http://en.wikipedia.org/wiki/Ore%27s_theorem)，但我将要处理的图不会是一个很有可能的密集图，因此使 Ore 的定理很漂亮在我的情况下没用）。因此，我需要找到一种算法来检查该图是否为循环图，即是否存在一个包含给定图的所有节点的循环。

由于 DFS 用于检测周期，我认为对 DFS 进行一些小的操作可以帮助我检测我正在寻找的内容，例如跟踪探索的节点，最后检查最后访问的节点是否与初始节点有连接。不幸的是，我无法通过这种方法取得成功。

我尝试的另一种方法是排除一个节点，然后尝试从另一个相邻节点开始到达其相邻节点。根据所选的相邻节点，该算法可能无法给出正确的结果。

我几乎被困在这里。你能帮我想出另一种算法来告诉我该图是否是循环图吗？

**编辑**

我在评论的帮助下意识到（谢谢你）：

> 循环图由一个循环组成，有 N 个边和 N 个顶点。如果存在一个包含给定图的所有节点的循环，那就是哈密顿循环。-纳米

我*实际上是*在寻找一条哈密顿路径，我并不打算这样做:) 再想一想，我认为在构建图的同时检查图的哈密顿属性会更有效，这也是我正在寻找的: 时间效率。

经过一番思考，我认为无论节点数量是多少，由于节点添加标准，该图似乎是哈密顿量。问题是我无法确定，也无法证明。以这种方式添加节点，即添加具有 2 条边的新节点，将添加的节点连接到现有节点，是否会改变图的哈密顿属性？如果它不改变哈密顿性质，那又如何呢？如果它确实改变了，又是怎么回事？谢谢。

**编辑#2**

我再次意识到，按照我描述的方式构建图形可能会改变哈密顿量。考虑如下给出的输入：

```
1 3
2 3
1 5
1 3 
```

这些输入表示第 4 个节点连接到节点 1 和节点 3，第 5 个节点连接到节点 2 和节点 3。. .

第 4 和第 7 个节点连接到相同的节点，从而将可以仅访问一次的最大节点数降低 1。如果我检测到这些冲突（**不**包括诸如 3 3 之类的输入，这是您建议的示例由于问题表明新添加的边连接到**其他 2 个节点**）并降低最大节点数，从 N 开始，我相信我可以得到正确的结果。

看，我不选择连接，它们是给我的，我必须找到最大值。节点数。

我认为在构建图形时计算相同的连接数并从 N 中减去相同的连接数会得到正确的结果吗？你能证实这一点还是这个算法有缺陷？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T03:55:37.893

我们在这个问题中得到的是一个`connected, non-directed`有**N**个节点和**2N-3 条**边的图。考虑下面给出的图表，

```
 A
           / \
          B _ C
         ( )  
          D 
```

该图没有哈密顿循环。但是 Graph 的构造符合您添加节点的规则。因此，搜索哈密顿循环可能无法为您提供解决方案。更重要的是，即使有可能哈密顿循环检测是一个具有**O(2** **^N** **)**复杂性的**NP 完全**问题。所以这种方法可能并不理想。

我建议使用`Floyd's Cycle Finding algorithm`（也称为`Tortoise and Hare`算法）的修改版本。

修改后的算法是，

```
1\. Initialize a List CYC_LIST to ∅.

2\. Add the root node to the list CYC_LIST and set it as unvisited. 

3\. Call the function Floyd() twice with the unvisited node in the list CYC_LIST for each of the two edges. Mark the node as visited.

4\. Add all the previously unvisited vertices traversed by the Tortoise pointer to the list CYC_LIST.

5\. Repeat steps 3 and 4 until no more unvisited nodes remains in the list.

6\. If the list CYC_LIST contains N nodes, then the Graph contains a Cycle involving all the nodes. 
```

该算法最多调用 Floyd 的循环查找算法 2N 次。Floyd 的循环查找算法需要线性时间 ( O(N) )。因此修改后的算法的复杂度为**O(N ² )**，比基于哈密顿循环的方法所花费的指数时间要好得多。

`closed paths`这种方法的一个可能问题是，除非实施更严格的检查标准，否则它将与循环一起检测。

**回复编辑#2**

考虑下面给出的图表，

```
 A------------\
           / \            \
          B _ C            \
          |\ /|             \
          | D |             F
          \   /            /
           \ /            / 
            E------------/ 
```

根据您的算法，该图没有包含所有节点的循环。但是这个图中有一个包含所有节点的循环。

```
A-B-D-C-E-F-A 
```

所以我认为你的方法有一些缺陷。但是假设如果你的算法是正确的，它比我的方法要好得多。因为我的需要**O(n ² )**时间，而你只需要**O(n)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:30:36.183

为这个线程添加一些澄清：找到一个哈密顿循环是 NP 完全的，这意味着找到一个最长的循环也是 NP 完全的，因为如果我们可以在任何图中找到最长的循环，我们就可以找到子图的哈密顿循环由位于该循环上的顶点诱导。（参见关于最长周期问题的例如[这篇论文）](http://onlinelibrary.wiley.com/doi/10.1002/net.3230060206/abstract;jsessionid=BEFD54C9EE14B1BA1ABACD64E14CF379.d04t02)

我们不能在这里使用狄拉克的标准：狄拉克只告诉我们`minimum degree >= n/2 -> Hamiltonian Cycle`，这是我们需要的相反方向的暗示。反过来肯定是错误的：对`n`顶点进行循环，无论圆的大小如何，其中的每个顶点的度数都为 2，但它有（是）一个 HC。你可以从狄拉克那里看出`no Hamiltonian Cycle -> minimum degree < n/2`，这在这里没有用，因为我们不知道我们的图是否有 HC ，所以我们不能使用暗示（尽管我们根据 OP 描述的内容构建的每个图都会有一个度数的顶点`2`，即添加到图中的最后一个顶点，所以对于任意的`n`，我们有最小度数`2`）。

问题是您可以构建具有 HC 的任意大小的图和没有 HC 的任意大小的图。对于第一部分：如果原始三角形是A，B，C并且添加的顶点编号为1到k，则将第一个添加的顶点连接到A和C，将第k+1个顶点连接到A和第k个所有 k >= 1 的顶点。循环为`A,B,C,1,2,...,k,A`。对于第二部分，将顶点 1 和 2 都连接到 A 和 B；该图没有HC。

还需要注意的是，具有 HC 的属性可以在构造过程中从一个顶点更改为另一个顶点。您可以在添加顶点时创建和销毁 HC 属性，因此每次添加顶点时都必须检查它。一个简单的例子：在添加第一个顶点之后获取图形，并将第二个顶点与边一起添加到与第一个顶点相连的三角形的相同两个顶点。这从一个有 HC 的图构造了一个没有 HC 的图。反过来：现在添加第三个顶点并将其连接到 1 和 2；这是从没有 HC 的图和有 HC 的图构建的。
在构建过程中存储最后一个已知的 HC 并不能真正帮助您，因为它可能会完全改变。在添加第 20 个顶点之后，您可以有一个 HC，然后在 [21,2000] 中没有一个用于 k 的，然后再为添加的第 2001 个顶点添加一个。您在 23 个顶点上的 HC 很可能对您没有太大帮助。

如果您想弄清楚如何**有效**地解决这个问题，您必须找到适用于所有可以有效检查的图表的标准。否则，在我看来，您的问题并不比一般情况下的哈密顿循环问题更简单，因此您可以将[用于该问题](http://en.wikipedia.org/wiki/Hamiltonian_path_problem#Algorithms)的算法之一调整为您的变体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T06:09:23.843

下面我在原始图中添加了三个额外的节点（3,4,5），看起来我可以无限期地添加新节点，同时保持哈密顿循环的属性。对于下图，循环将是`0-1-3-5-4-2-0`

```
 1---3---5
 / \ / \ /
0---2---4 
```

由于对于如何添加具有两条边的新节点没有额外的限制，我认为通过构造，您可以拥有一个具有哈密顿循环属性的图。

# excel - 如何使用条件将数据从剪贴板粘贴到 Excel 以将数据拆分为单独的列？

> ID：15855275
> 
> 赞同：0
> 
> 时间：2013-04-06T19:45:27.023
> 
> 标签：excel, vba

如何使用条件将数据从剪贴板粘贴到 Excel 以将数据拆分为 2 个单独的列？

例如，我的剪贴板中有这个：

8:01
17:01
7:56
17:02
7:56
17:00
7:53
17:01
7:56
17:01
7:57
17:02
7:56
17:01
7:56
17:00
7: 56
17:02

我想将低于 10:00 的值粘贴到 A 列中，将大于 10:00 的值粘贴到 B 列中，这样结果将是：

      A B
1 8:01 17:01
2 7:56 17:02
3 7:56 17:00
4 7:53 17:01
5 7:56 17:01
6 7:57 17:02
7 7:56 17:01
8 7:56 17:00
9 7:56 17:02

到目前为止，我唯一管理的是将它们全部粘贴到一列中，然后使用过滤器，然后手动将值复制并粘贴到两个不同的列中

![在此处输入图像描述](https://i.stack.imgur.com/mWiaP.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:17:36.127

编辑：将以下方法粘贴到模块或包含数据的工作表中

```
Option Explicit
Sub SplitCellsForValue(ByVal splitValue As Integer)
Dim source As Range
Dim cell
Dim currentValue

Dim rowForColumn1Ctr As Integer
Dim rowForColumn2Ctr As Integer

Dim column1Ctr As Integer
Dim column2Ctr As Integer

Dim maxRowsAfterSplit As Integer

rowForColumn1Ctr = 1
rowForColumn2Ctr = 1

'** Put your source range here
Set source = Range("A1:A7")

maxRowsAfterSplit = CInt(source.Rows.Count / 2)
For Each cell In source.Cells
    currentValue = Val(Replace(cell.Text, ":", ""))

    If currentValue < splitValue Then
        Range("B" & rowForColumn1Ctr) = cell.Text
        rowForColumn1Ctr = rowForColumn1Ctr + 1
    Else
        Range("C" & rowForColumn2Ctr) = cell.Text
        rowForColumn2Ctr = rowForColumn2Ctr + 1
    End If
Next
End Sub 
```

用法：（您可以从即时窗口调用以下内容）

```
SplitCellsForValue 1000 
```

在上面的示例中，它从 A1:A7 获取数据（根据您的情况进行更改）并通过给定参数（值：1000）拆分内容`SplitCellsForValue`并将内容放入“B”和“C”列 - 您可以更改.

注意：值 1000 = 10:00，其中 : 已删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:32:34.287

如果您粘贴以下 vba 代码并在您粘贴了值的工作表上运行它，您将按照要求得到两列。

```
Sub cell_to_column()

    Dim lastrow as long, currentpaste as long
    'find last row
    lastrow = Columns("A:A").Find("*", range("A1"), xlValues, , xlByRows, xlPrevious).row
    currentpaste =1

    'cycle through all cells in column a
    For each a in range(cells(1,1), cells(lastrow,1))

        If len(trim(a.value)) >= 5 then 'if found 10:00 or larger

            'if a value if found copy its value over 
            Cells(currentpaste, 2).value = a.Value
            A.value = ""
            Currentpaste = currentpaste +1

        End if

    Next

    'remove all blank cells
    range(cells(1,1), cells(lastrow,1)).SpecialCells(xlCellTypeBlanks).Delete Shift:=xlUp

End sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T20:50:24.057

另一种方式...此代码也将进行粘贴。您不必手动进行:)

```
Sub Macro1()
    Dim ws As Worksheet
    Dim LastRow As Long, startRowA As Long, startRowB As Long
    Dim i As Long

    On Error GoTo Whoa

    '~~> Change this to the relevant sheet
    Set ws = ThisWorkbook.Sheets("Sheet1")

    startRowA = 1: startRowB = 1

    With ws
        '~~> Using this as you are copying it from Notepad~~~~
        .Activate
        .Range("A1").Select
        .PasteSpecial Format:="Text", Link:=False, DisplayAsIcon:=False
        '~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

        LastRow = .Range("A" & .Rows.Count).End(xlUp).Row

        For i = 1 To LastRow - 1 Step 2
            .Range("C" & startRowA).Value = .Range("A" & i).Value
            startRowA = startRowA + 1
        Next i

        For i = 2 To LastRow Step 2
            .Range("D" & startRowB).Value = .Range("A" & i).Value
            startRowB = startRowB + 1
        Next i
    End With

    Exit Sub
Whoa:
    MsgBox Err.Description
End Sub 
```

![在此处输入图像描述](https://i.stack.imgur.com/hWLvi.png)

**跟进**

问题显然是希伯来语版本的 Excel。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T20:59:58.553

如果您不想编写宏，请执行以下操作：

1.  将值粘贴到 A1 中。
2.  开`B1`，键入`=OFFSET(A1,ROW()-ROW($A$1),0)`
3.  开`C1`，键入`=OFFSET(A1,ROW()-ROW($A$1)+1,0)`
4.  格式化`B1`并`C1`进入时间。否则，它将显示为一个数字。
5.  选择`B1`然后`C1`粘贴下来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T21:29:03.113

不要粘贴到记事本中（即先返回一步），粘贴到 Word 中，插入 > 表格 - 表格，将文本转换为表格并选择列：2，然后再粘贴到 Excel 中。

# java - 无法使用 GCM 发送 PUSH 通知

> ID：15855277
> 
> 赞同：1
> 
> 时间：2013-04-06T19:45:42.697
> 
> 标签：java, php, proxy, google-api, google-cloud-messaging

我的本地主机上有一些代码可以正常工作，但是当我将它们全部移到我的服务器时，它似乎不起作用。

我的服务器在防火墙后面，所以我决定使用 PHP 脚本来使用 GCM。同样，我在 localhost 上对其进行了全部测试，并且可以正常工作，但是在我的服务器上，什么都没有发送。

这是我的 PHP 脚本：

```
<?php
include('tools.php');
// Replace with real BROWSER API key from Google APIs
$apiKey = "xxxx";
// Replace with real client registration IDs 
//$registrationIDs = array($_POST['devices']);
$registrationIDs = $_POST['devices'];
$proxy = 'http://proxy.vmsrv.redbrick.dcu.ie:3128';

// Message to be sent
$message = $_POST['message'];

// Set POST variables
$url = 'https://android.googleapis.com/gcm/send';

$fields = array(
                'registration_ids'  => $registrationIDs,
                'data'              => array( "message" => $message ),
                );

$headers = array( 
                    'Authorization: key=' . $apiKey,
                    'Content-Type: application/json'
                );

// Open connection
$ch = curl_init();

// Set the url, number of POST vars, POST data
curl_setopt( $ch, CURLOPT_URL, $url );

curl_setopt( $ch, CURLOPT_POST, true );
curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );

curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode( $fields ) );
curl_setopt( $ch, CURLOPT_PROXY, $proxy);
// Execute post
$result = curl_exec($ch);

// Close connection
curl_close($ch);

print_as_json($result);

// Report all PHP errors
error_reporting(-1);
?> 
```

在我的 Java 程序调用脚本后，我在控制台中得到的唯一输出是：

```
[java] DB: Result: Warning: mysql_fetch_assoc() expects parameter 1 to be resource, string given in /var/www/tools.php on line 5[] 
```

无论如何我可以尝试获取一些信息以找出问题所在？？？

**编辑** 工具.php

```
<?php

function print_as_json($result) {
    $all = array();
    while($r = mysql_fetch_assoc($result)) {
        $all[] = $r;
    }
    echo(json_encode($all));
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:29:22.923

删除线

```
print_as_json($result); 
```

并改用简单的回声。

```
echo $result; 
```

或者您可能想尝试查看它是什么类型的对象：

```
var_dump($result); 
```

我不确定 $result 是什么样的。如果它是一个 json 字符串，你可以将它转换成一个数组：

```
$array = json_decode($result); 
```

# c# - DotNetOpenAuth：想要在存储 Nonce 时访问用户名

> ID：15855278
> 
> 赞同：0
> 
> 时间：2013-04-06T19:45:43.443
> 
> 标签：c#, oauth-2.0, dotnetopenauth

我正在使用 DotNetOpenAuth 4.0.20926 并尝试使用 Db Nonce 提供程序实现基于 OAuth2 的身份验证服务器。

出于某种目的，我想在处理 GetToken 请求时访问 NonceStore 的 StoreNonce 函数中的用户名。我没有办法在该调用中检索用户名。

我怎么解决这个问题？

* * *

嘿 Andrew 感谢您的回复和 DotNetOpenAuth。

我的 GetToken 方法是这样的

```
 public ActionResult Token()
  {
     string userName = "";  
     //Want to fetch username here 
     //Using username here 
     var result = this.authorizationServer.HandleTokenRequest(this.Request);
     return result.AsActionResult();
  } 
```

我想在调用 HandleTokenRequest 之前获取用户名。
是否有任何消息解析器或帮助器方法从请求数据/代码值中获取用户名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:59:58.987

正如您所观察到的，接口不会将用户名传递给`StoreNonce`方法。因此，您可能能够获取用户名的唯一方法是让您在实例化您的`INonceStore`实例之前首先发现它是什么，然后首先将其传递给该 nonce 存储，以便稍后`StoreNonce`调用时，它已经知道用户名。

也就是说，我相信任何存储和检查 nonce 需要用户名的设计都需要重新考虑。它不仅混合了原本应该保持独立的问题，而且您可能会限制自己前进，甚至引入安全漏洞。

# java - ArrayIndexOutOfBoundsException gui jlist

> ID：15855280
> 
> 赞同：0
> 
> 时间：2013-04-06T19:45:55.103
> 
> 标签：java

您好，我正在尝试制作一个程序，该程序允许我加载文件并将其名称上传到列表中。一旦我在列表中选择了一个文件名，它应该遍历该文件并将每一行放入指定的 jtextfield 中。但是当我尝试加载第二个文件并尝试选择它时，它告诉我arrayIndexOutOfBounds。有人可以向我解释我做错了什么。我正在使用 NetBeans。

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package prog24178.assignment4;

import java.awt.event.KeyEvent;
import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Scanner;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFileChooser;

public class CustomerView extends javax.swing.JFrame {

    /**
     * Creates new form CustomerView
     */
    private Application ass4App = new Application();
    public ArrayList<Customer> customer = new ArrayList<Customer>();
    public ArrayList<String> names = new ArrayList<String>();
    public String fileName;
    public Customer customers = new Customer();
    public int i;

    public void setApplication(Application customerApp) {
        this.ass4App = ass4App;
    }

    public CustomerView() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */

    private void jExitItemActionPerformed(java.awt.event.ActionEvent evt) {                                          
        // TODO add your handling code here:
        System.exit(0);
    }                                         

    private void jOpenCusItemActionPerformed(java.awt.event.ActionEvent evt) {                                             
        // TODO add your handling code here:
        String currentPath = System.getProperty("user.dir");
        JFileChooser fc = new JFileChooser();

        fc.setMultiSelectionEnabled(true);
        fc.setFileSelectionMode(JFileChooser.FILES_ONLY);
        if (fc.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {
            File[] file = fc.getSelectedFiles();
            for (int i = 0; i < file.length; i++) {
                try {
                    customers.constructCustomer(file[i]);
                } catch (FileNotFoundException ex) {
                    Logger.getLogger(CustomerView.class.getName()).log(Level.SEVERE, null, ex);
                }
                customer.add(customers);
                names.add(customer.get(i).getName());
            }

            jCustomerList.setListData(names.toArray());            
        }
    }                                            

    private void jCustomerListValueChanged(javax.swing.event.ListSelectionEvent evt) {                                           
        // TODO add your handling code here:             
        jCusNameField.setText((String) customer.get(jCustomerList.getSelectedIndex()).getName());
        jAddressField.setText((String) customer.get(jCustomerList.getSelectedIndex()).getAddress());
        jCityField.setText((String) customer.get(jCustomerList.getSelectedIndex()).getCity());
        jProvinceField.setText((String) customer.get(jCustomerList.getSelectedIndex()).getProvince());
        jPostalCodeField.setText((String) customer.get(jCustomerList.getSelectedIndex()).getPostalCode());
        jEmailAddressField.setText((String) customer.get(jCustomerList.getSelectedIndex()).getEmailAddress());
        jPhoneNumberField.setText((String) customer.get(jCustomerList.getSelectedIndex()).getPhoneNumber());

    } 
```

我解决问题。我意识到我只是将可变客户添加到客户而没有给它一个适当的价值。customer.add(customers.constructCustomer(file[i]));

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:00:46.253

我不知道具体是什么`customers.constructCustomer(file[i]);`或`customer.add(customers);`做什么——我们没有足够的代码知道——但您正在使用 i 遍历 File 对象数组并获取客户 ( `customers.get(i)`)。那是我要看的第二个地方。

我要看的第一个地方是错误消息；它告诉您数组索引超出范围的行、索引的值以及数组的上限。

# c++ - C++ 中的最大 else 语句数

> ID：15855284
> 
> 赞同：8
> 
> 时间：2013-04-06T19:46:22.210
> 
> 标签：c++

`if/else if/else if`我有一些用于使用巨大... 块实现的消息传递系统的遗留代码。当我想添加一个新`else`块时，Visual Studio 2010 出现“内部编译器错误”。

你知道是由 C++ 标准定义还是实现定义的最大`else`语句数？如果定义了实现，我在哪里可以找到 Visual Studio 2010 的最大数量？

由于历史原因，我无法更改代码，即使实现是......不是很明智。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-06T19:48:10.770

C++ 标准没有最低要求。它有一个推荐的最小值，但不是必需的。

> 复合语句、迭代控制结构和选择控制结构的嵌套级别[256]。

一旦超过了实现的限制，行为就不确定了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T22:43:18.153

以下是 Visual Studio C++ 编译器限制（由 Google 提供）。

[MSVC 编译器限制](http://msdn.microsoft.com/en-us/library/ft39hh4x%28v=vs.80%29.aspx?ppud=4)

# iphone - UIWebview scalesPageToFit 不能完美运行

> ID：15855291
> 
> 赞同：1
> 
> 时间：2013-04-06T19:47:23.893
> 
> 标签：iphone, ios, objective-c, xcode

我正在使用一个小的`UIWebView`，并且`scalesPageToFit`对于某些 url 不能正常工作。（看起来它不能以 100% 调整大小。（但如果我手动缩小 web 视图（手势），它可以工作！

```
view = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 200.0f, 400.0f)];
webViewT = [[UIWebView alloc] initWithFrame:view.bounds];
webViewT.delegate = self;
webViewT.scalesPageToFit = YES;
NSURL* url = [NSURL URLWithString:@"http://www.google.com/"];
[webViewT loadRequest:[NSURLRequest requestWithURL:url]]; 
```

请注意，我找到了解决方案：（下面的工作，但我有时间看到“调整大小”

```
- (void) webViewDidFinishLoad:(UIWebView *)webViewT {  
    if ([theWebView respondsToSelector:@selector(scrollView)])
    {
        UIScrollView *scroll=[theWebView scrollView];

        float zoom=theWebView.bounds.size.width/scroll.contentSize.width;
        [scroll setZoomScale:zoom animated:NO];
    }
} 
```

任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:55:16.407

在某些情况下会产生此类问题。当时java脚本用于控制Zoom的`UIWebView`，使用下面的代码。

```
NSString *jsCommand = [NSString stringWithFormat:@"document.body.style.zoom = 1.5;"];
[webLookupView stringByEvaluatingJavaScriptFromString:jsCommand]; 
```

**另一种方式是**

请参阅此答案[UIWebView 不会缩放内容以适应](https://stackoverflow.com/questions/1511707/uiwebview-does-not-scale-content-to-fit/11367804#11367804)

# javascript - 使用 getElementbyID 复制到剪贴板不起作用

> ID：15855298
> 
> 赞同：0
> 
> 时间：2013-04-06T19:47:51.553
> 
> 标签：javascript, forms

我正在使用此复制到剪贴板脚本来复制返回到表行的值。当我使用实际字段时它工作正常，但当我尝试从输入的行中复制值时却不行。既然我正在使用 getElementByID.. 显然不是专家，但理论上它似乎应该工作

```
 <script type="text/javascript"><!--
    // input field descriptions
    var desc = new Array();
    desc['PROC_CODE'] = 'Procedure Code';
    desc['STATUS'] = 'Status';
    function CopyFields(){
        var copytext = '';
        for(var i = 0; i < arguments.length; i++){
            copytext += desc[arguments[i]] + ': ' + document.getElementById(arguments[i]).value + '\n';
        }
        var tempstore = document.getElementById(arguments[0]).value;
        document.getElementById(arguments[0]).value = copytext;
        document.getElementById(arguments[0]).focus();
        document.getElementById(arguments[0]).select();
        document.execCommand('Copy');
        document.getElementById(arguments[0]).value = tempstore;
    }
    --></script>
    </head>
    <body>

      <table width="100%" border="0" cellpadding="5" cellspacing="1">
        <tr bgcolor="#F0F0F0"> 
          <td colspan="5" align="center" class="th2">1) Procedure Code Record</td>
        </tr>
         <tr bgcolor="#F0F0F0">
          <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">
            Procedure Code </td>
          <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
          <td width="55%" bgcolor="#FFFFFF" class="tLBL1l" id="PROC_CODE" name="PROC_CODE">&nbsp;
            </td>

        </tr>

        <tr bgcolor="#F0F0F0">
          <td width="12%" align="right" bgcolor="#CCCCCC" class="tdFieldHeadingsR1">
            STATUS </td>
          <td width="1%" align="right" bgcolor="#FFFFFF" class="tdFieldHeadingsR1">&nbsp;</td>
          <td width="55%" bgcolor="#FFFFFF" class="tLBL1l" id="STATUS" name="STATUS" >&nbsp;
            </td>

        </tr>

    <a href="#" onclick="CopyFields('PROC_CODE', 'STATUS');">Copy values of text fields to clipboard</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:51:26.443

看一下：[JavaScript，获取带有 id 名称的 td 的值](https://stackoverflow.com/questions/2310145/javascript-getting-value-of-a-td-with-id-name)

我认为您想`.innerText`获取文本内容，而不是`.value`

# math - 在两个角度之间的二维网格中获取单元格

> ID：15855301
> 
> 赞同：2
> 
> 时间：2013-04-06T19:48:09.600
> 
> 标签：math, grid, vector-graphics, angle, raycasting

![在此处输入图像描述](https://i.stack.imgur.com/FoZ6z.png)

我已经成功实现了一个基本的光线投射算法，但我想扩展它以使用“角度范围”。

知道网格单元大小、列数和行数、起始射线位置、角度 a 和角度 b，我如何才能获得落在两条射线之间的所有单元？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:09:45.500

如果两条光线位于同一象限或相邻象限：

您可以使用稍微修改的[Bresenham 算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)将两条光线并行地走在一起，并在它们之间获得整列或整行单元格。您的示例和（主要）水平扇区的示例伪代码：

```
 initialisation for deltaerr1, deltaerr2
 for x from 0 to EndXCoord
         get all cells in column (x,y1)-(x,y2)

         error1 := error1 + deltaerr1
         if error1 ≥ 0.5 then
             y1 := y1 + 1
             error1 := error1 - 1.0

         error2 := error2 + deltaerr2
         if error2 ≥ 0.5 then
             y2 := y2 + 1
             error2 := error2 - 1.0 
```

如果光线在相反的象限中，则将它们分开（并取所有中间象限）

一些案例：

第 1 和第 2 象限：沿 y 方向走步，获取行

第 1 和第 4 象限：在 x 方向上执行步骤，获取列（如伪代码）

从第 1 象限开始，在第 3 象限结束角度：在每个象限中沿 y 方向步进，在第 2 象限中获取所有需要的单元格

特别案例：

某个角度是 n*90 - 可能需要改变方向

射线形成 180° 角：在所需范围内沿线进行 Bresenham 步骤，在选定的半平面中获取行或列

# javascript - 如何在主要的 TypeScript 应用程序中包含和内联外部 util 类？

> ID：15855303
> 
> 赞同：2
> 
> 时间：2013-04-06T19:48:11.687
> 
> 标签：javascript, visual-studio, module, compilation, typescript

我正在使用新的[TypeScript for VS](http://typescriptlang.org)工具系统从 TypeScript 语法生成 JavaScript 程序。我需要在单独的文件中定义我的应用程序和实用程序，并且我需要知道如何将实用程序“类”和函数包含到主应用程序中。

1.  我听说过`/// <reference path="....ts" />`允许您从外部文件访问代码的语法。这种语法是否像`include`C++ 中的那样？它将使用的类/函数拉入主`app.ts`文件还是只是期望目标文件作为`.js`文件存在于同一目录中？

2.  我应该使用[内部模块](https://stackoverflow.com/a/12842023/1294758)来定义将包含（内联）到主应用程序中的类吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T23:52:39.140

如果您有另一个 .ts 文件的标签，那么如果您为开关`/// <reference ... >`指定文件名，那么那些引用的文件（递归地）将被编译到同一个 .js 文件中。`--out`否则，同一组文件将被并行编译 ( `a.ts`-> `a.js`)。

这些行为都不依赖于使用内部模块而不是将事物保持在顶层。但是，如果您选择使用*外部*模块，情况就大不相同了（可能参见现有材料）。

# c# - 使用 SharpPcap 拦截和编辑数据包

> ID：15855308
> 
> 赞同：2
> 
> 时间：2013-04-06T19:48:29.883
> 
> 标签：c#, sharppcap

我已经看过并且看不到在这方面找到任何东西。

所以我有一台通过我的主电脑桥接的电脑，我将如何从我的主电脑拦截和编辑一个数据包（我知道它会发送到我的另一台电脑）？我知道如何拦截它，但我在编辑它时找不到任何东西。

我目前的代码是：

```
static void Main()
{
    // Retrieve all capture devices
    var devices = CaptureDeviceList.New();

    var device = devices.FirstOrDefault(dev => dev.Description.ToLowerInvariant().Contains("intel(r)"));

    // check device isn't null
    if (device == null)
        throw new NullReferenceException();

    while(true)
    {
        // open device
        device.Open();

        var capture = device.GetNextPacket();
        if (capture == null || capture.Data == null)
            continue;

        var packet = PacketDotNet.Packet.ParsePacket(capture.LinkLayerType, capture.Data);
        var asciiz = Encoding.ASCII.GetString(capture.Data);

        if (asciiz.ToLowerInvariant().Contains("xeraxic"))
        {
            asciiz = asciiz.Replace("<view>1</view>",
                                    "<view>2</view>");

            packet.PayloadPacket.PayloadPacket.PayloadData = Encoding.ASCII.GetBytes(asciiz);
            Console.WriteLine("Modified Packet, fingers crossed");
        }

        // close device
        device.Close();
    }
} 
```

# html - img:first-of-type 选择所有图像

> ID：15855311
> 
> 赞同：0
> 
> 时间：2013-04-06T19:48:39.843
> 
> 标签：html, css, modernizr

我的页面中有两张图片。我希望在用户使用触摸设备或不支持 Javascript 访问网站时显示第一个，方法是使用 Modernizr 定位他们。

页面顶部的菜单按钮：

```
<img src="menubutton.png" alt="Menubutton"> 
```

另一张图片，只是文章中使用的一张图片：

```
<img src="image.jpg" alt="Image"> 
```

在我的 CSS 中，我有这个：

```
.no-touch img:first-of-type, .no-js img:first-of-type {
    display:none;
} 
```

现在，这几乎可以正常工作：图像没有显示在我的笔记本电脑上，但显示在我的 iPad 上。但是，第二张图片也没有显示在我的笔记本电脑上。但是，第二张图片显示在我的 iPad 上。此外，如果我使用 ID 定位第一张图像，它会按照我想要的方式工作，但除非真的需要，否则我不能使用 ID。这里发生了什么事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:51:10.097

first-of-type 选择器的支持*非常*有限。它也将是其父元素中的第一个类型，而不是整个文档，这可能是问题所在。

# windows - 在 Haskell 中，在 Windows 7 中，我可以读取已经被另一个程序写锁定的文件吗？

> ID：15855313
> 
> 赞同：3
> 
> 时间：2013-04-06T19:49:00.337
> 
> 标签：windows, file-locking

我有一个连续运行的第 3 方程序，并将事件记录在文本文件中。我想编写一个小型 Haskell 程序，在其他程序运行时读取文本文件，并在记录某些事件时警告我。

我环顾四周，似乎对于 Windows，readFile 是单写或多读 - 它不允许单写和多读。据我了解，这是为了避免在读取之后/期间写入更改文件等副作用。

有什么方法可以解决这个对锁的约束吗？日志文件只是附加的，我只是在文件中寻找特定的行，所以我真的不介意我没有得到最新的写入，因为我对最终的一致性感兴趣并将继续检查文件.

# ios - 为 iOS 构建 Assimp

> ID：15855315
> 
> 赞同：0
> 
> 时间：2013-04-06T19:49:06.213
> 
> 标签：ios, objective-c, compiler-errors, linker-errors

我正在尝试为 iOS 构建 Assimp，它编译得很好，没有错误，但是，当我尝试在我的项目中使用它时，我在链接过程中遇到了很多错误（准确地说是 154）。在方法签名之后判断，错误与C++有关，但是，我想使用C接口。我已经测试过`lipo`并且该库是为我的拱门编译的，它实际上是一个胖库。它们是链接器错误，应该很容易修复，唉，我缺乏经验并没有帮助。这是带有错误的屏幕截图（第一行，因为总共有 100 多个）。

![在此处输入图像描述](https://i.stack.imgur.com/auABR.png)

我应该如何调试这个？什么地方出了错？

编辑：感谢@Zadr，我设法将其缩小到 8 个错误：

![在此处输入图像描述](https://i.stack.imgur.com/nNdlJ.png)

`_crc32`听起来很熟悉，但还是找不到这一切背后的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:53:13.097

您正在构建的库已链接到 libstdc++ 的一个版本，而您正尝试链接到另一个版本。

在项目设置中，应该有一个“C++ 标准库”字段。将其从默认选项（clang 的 libc++、iirc）更改为其他选项（gcc）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T20:14:36.487

除了@zadr 已经提到的内容之外，您还应该链接`libz.dylib`以消除最后 8 个错误。我*几乎*可以肯定这些功能与它有关，而且我肯定知道这些功能的`Assimp`用途`libz`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T20:02:42.493

首先告诉我您是否必须将任何内容`framework`作为复制粘贴？在大多数情况下，都会产生此类问题。

通常，当您的类`.m`文件未存储/放入时会发生这种类型的错误`Compile Sources`

在这种情况下，您需要手动将此`.m`文件添加到`Compile Sources`

**以下步骤描述如何手动放入`.m`文件`Compile Sources`**

```
Select Project Form Project Manager
  |
  | 
  Targets
       |
       |
     Build Phases
          |
          |
        Compile Sources
                |
                |
        Click on '+' button and add .m file in it 
```

这是如何将文件手动放入`Compile Sources`.

# ruby - LoadError: 无法加载此类文件 -- 目录/文件名

> ID：15855319
> 
> 赞同：1
> 
> 时间：2013-04-06T19:49:22.783
> 
> 标签：ruby

我有一个像这样的文件结构

```
root
|--lib
   |--root.rb
   |--extensions
      |--strings.rb 
```

我希望能够使用文件中`string.rb`的方法`root.rb`。

所以我`require 'extensions/strings'`在文件顶部添加了`root.rb`。

但我得到`LoadError: cannot load such file -- extensions/strings.rb`错误。

我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:29:19.460

您可以尝试以下方法：

```
require File.dirname(__FILE__) + "/extensions/strings" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T20:32:04.053

如果您使用的是 Ruby 1.9 或更高版本，请使用 require_relative。在 root.rb 中，写入：

```
require_relative 'extensions/strings.rb' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T20:13:31.267

[我在这里找到了我正在寻找的答案。](https://stackoverflow.com/questions/735073/best-way-to-require-all-files-from-a-directory-in-ruby)

我使用了jandot的解决方案。

`Dir[File.dirname(__FILE__) + '/extensions/*.rb'].each {|file| require file }`

* * *

经过一些测试后编辑，

出于某种原因，这不会引发任何错误消息，但它似乎并没有加载实际的 Ruby 文件。

我尝试将其添加到 extensions/strings.rb

```
class Dog
  def self.bark
    puts "bark"
  end
end 
```

并在irb上运行它。

```
1.9.3-p0 :001 > require 'rhapsody'
 => true 
1.9.3-p0 :002 > Dog
NameError: uninitialized constant Dog
    from (irb):2
    from /Users/jasonkim/.rvm/rubies/ruby-1.9.3-p0/bin/irb:16:in `<main>' 
```

因此，由于某种原因，它没有在 extensions/strings.rb 中找到 Dog 类。

* * *

阅读 ruby​​gems.org 中的指南后进行编辑

当我开始 irb 时，我不得不去`irb -Ilib -rextensions`

指南这样解释情况

> 我们需要在这里使用一个奇怪的命令行标志：-Ilib。通常 RubyGems 会为您包含 lib 目录，因此最终用户无需担心配置其加载路径。但是，如果您在 RubyGems 之外运行代码，则必须自己进行配置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-20T21:14:30.767

```
require_relative '../lib/extensions/strings' 
```

为我工作。

# java - BigDecimal 与 BigInteger 和 BigDecimal 的性能对比

> ID：15855321
> 
> 赞同：7
> 
> 时间：2013-04-06T19:49:29.783
> 
> 标签：java, performance, biginteger, bigdecimal

我正在争论是使用 BigDecimal 和 BigInteger 还是只使用 BigDecimal 来让我的生活更轻松，减少来回转换。仅在资源方面使用 BigDecimal 有缺点吗？

仅使用原始数据类型和 BigInteger 或仅使用 BigInteger 来让我的生活更轻松，减少来回转换如何？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-06T19:58:28.460

来自：[http ://www.javamex.com/tutorials/math/BigDecimal_BigInteger_performance.shtml](http://www.javamex.com/tutorials/math/BigDecimal_BigInteger_performance.shtml)

请注意，BigDecimal 本质上是 BigInteger 的包装器，它“记住小数点在哪里”。

由于我们习惯于处理数字的方式，作为人类，与整数相比，我们在手工计算非整数时可能不得不“多想一些”（例如，我们可能已经熟记 7 次表以加快速度向上某些计算，但可能不是 0.7 倍表）。但是对于计算机实现而言，操作非整数本质上并不比操作整数更费力，以此类推，BigDecimal 上的方法往往与 BigInteger 上的类似方法执行相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T21:00:45.867

我知道您的问题的标题是“BigDecimal 与 BigInteger 和 BigDecimal 的性能”，但您的一个问题是“如何仅使用原始数据类型和 BigInteger 或仅使用 BigInteger 来制作”。好吧，这是我推荐的：

如果您需要准确度、精确度并且需要处理大量数据（例如庞大的财务数据），那么最好使用 BigDecimal 和 BigInteger 而不是原始类型。BigDecimal 和 BigInteger 的其他几个特征还包括：

1.  两者都来自不可变对象。
2.  两者都从 Number 类扩展并实现可比较的接口

现在回到性能方面的主要问题，两者之间的性能差异不大。如果您可以在 BigDecimal 中显示您的信息，只需使用它，这样您就不必将其转换为 BigInteger，但再次查看程序，看看是否始终只使用 BigDecimal 是否有意义。BigInteger 和 BigDecimal 的主要区别在于 BigInteger 支持任意精度的整数，而 BigDecimal 用于任意精度的定点数。

这是我的消息来源，祝你好运:)

[纽约大学](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDUQFjAA&url=http://cs.nyu.edu/courses/fall12/CSCI-UA.0101-004/10slide.ppt&ei=94tgUazlIYeuqgGu-YCQBA&usg=AFQjCNEfrmIeIaU6AGWoxSAL7DnpktI6Ng&sig2=XHPYOwQn6XnLuGzvxHFHaQ&bvm=bv.44770516,d.aWM)

[科罗拉多大学](http://www-plan.cs.colorado.edu/diwan/3308-05/book/TIJ304.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T19:57:13.417

如果您正在开发一个低延迟的应用程序并且每一微秒都很重要，那么 BigDecimal/BigInteger 不适合您。除此之外，BigDecimal/BigInteger 没有明显的影响。

BigDecimal 的预制件低于`long`, `double`。BigInteger 及其相应的原语同样适用。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-07T01:54:11.400

如果您非常担心大数字的性能，我会避免使用 Java`BigInteger`并`BigDecimal`喜欢瘟疫。

两者都使用慢速（渐近和相当小的输入）算法进行乘法、除法和基数转换。如果事实证明这是一个瓶颈，你就没有办法用更有效的算法来替换它们，除非你自己编写`BigInteger`兼容的大数字并进行大的重构。

如果您正在处理大整数，那么在 GMP 和 MPFR 周围使用 Java 包装器可能会好得多。由于 Java 在调用本机方法时所做的事情，这里的“大”可能是几百位数。

# r - R：根据另一个矩阵中的值计算整个矩阵的百分比值

> ID：15855322
> 
> 赞同：0
> 
> 时间：2013-04-06T19:49:29.927
> 
> 标签：r, matrix

我有两个矩阵，一个是 10x1 双矩阵，可以扩展到任何用户预设的数字，例如。100。

查看（min_matrx）

```
 V1
1   27
2   46
3   30
4   59
5   46
6   45
7   34
8   31
9   52
10  46 
```

另一个矩阵如下所示，还有更多行未显示：

查看（main_matrx）

```
row.names     sum_value
s17           45
s7469         213
s20984        24
s17309        214
s7432369      43
s221320984    12
s17556        34
s741269       11
s20132984     35 
```

对于 main_matrx 中的每个行名，我想计算一个值大于 main_matrx 中 sum_value 的值出现在 min_matrx 中的次数。然后我想将它除以 min_matrx 中的行数，并将该值作为新列添加到 main_matrx 中。

例如，在s17的main_matrx的第1行中，min_matrx中出现超过45的值的次数=5次。

现在将 min_matrx=> 5/10 =0.5 的 5 除以 10 行将是我希望在 main_matrx 中作为 s17 的新列的值。然后对行名称中的所有 s_id 使用相同的公式。

到目前为止，我一直在摆弄：

```
for(s in 1:length(main_matrx)) {
  new<-sum(main_matrx[s,]>min_CPRS_set)/length(min_matrx)
  } 
```

我尝试使用 apply() 但我仍然没有得到结果。

```
apply(main_matrx,1:length(main_matrx), function(x) sum(main_matrx>min_CPRS_set)/length(min_matrx))) 
```

现在，我只是被卡住了，因为它不起作用。我还是 R 新手，所以我的代码不是特别有效。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:00:08.020

有很多方法可以解决这个问题。这是我想到的一个（我想我明白你在追求什么；再一次，理解一个例子比单独用单词要容易得多。将来我会建议一个例子来配合文本问题。）

其中 x 是一个元素，y 是一个向量

```
FUN <- function(x, y = min_matrix[, 1]) { 
    sum(y > x)/length(y)
}
main_matrx$new <- sapply(main_matrx[, 2], FUN)

## > main_matrx
##    row.names sum_value new
## 1        s17        45 0.5
## 2      s7469       213 0.0
## 3     s20984        24 1.0
## 4     s17309       214 0.0
## 5   s7432369        43 0.6
## 6 s221320984        12 1.0
## 7     s17556        34 0.6
## 8    s741269        11 1.0
## 9  s20132984        35 0.6 
```

# ios - 在 iPhone 应用程序和 Arduino 服务器之间安全传输数据的方法

> ID：15855325
> 
> 赞同：2
> 
> 时间：2013-04-06T19:49:43.033
> 
> 标签：ios, arduino, security

我正在尝试在 iPhone 应用程序和 Arduino 服务器之间建立安全协议。目标是 iPhone 应用程序向 Arduino 服务器发出请求，并且服务器仅在它具有一种或另一种形式的正确凭据时才处理它。我不确定如何解决这个问题。任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T05:53:28.253

不幸的是，Arduino 上没有真正安全的通信选项。基本问题是 SSL 库尚未移植到该平台，部分原因是该平台构建的 8 位处理器不是很强大。话虽如此，有些事情你可以做，但你必须自己做：

[基本访问身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)是控制对 HTTP 页面的访问的一种非常不安全的方法，因此不推荐使用。 [另一方面，摘要访问身份验证](http://en.wikipedia.org/wiki/Digest_access_authentication)采用单向加密编码（散列）。它只需要 MD5 库，[实际上可](http://arduino.cc/forum/index.php/topic,37905.0.html)用于 Arduino。您需要做的是修改[Web Server](http://arduino.cc/en/Tutorial/WebServer)类的源代码以支持摘要访问身份验证：AFAIK 它不支持开箱即用。

如果这看起来很困难，您可以自己实现一些相当基本的（并且不是很安全，但总比没有好）。它可能看起来像这样：

*   第一个 GET 请求来自客户端
*   服务器以“未授权”响应进行响应，在响应中嵌入与请求 IP 地址（可能是哈希）相关的令牌。您也可以将原始时间框架作为散列的一部分，并为此类令牌提供有限的生命周期。
*   如果来自同一 IP 地址的下一个请求包含基于某个密码的哈希 + 发送的令牌，则接受下一个请求。

现在这不会保护您免受 IP 地址欺骗以及我可能没有想到的许多其他事情。然而，它会给你一点安全感（如果你相信这种事情，它会给你一点点安全感（如果你相信这种事情的话）。您可以要求（稍微）更详细的[超级用户方案](http://superuser.stackexchange.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T19:41:31.510

您也许可以只使用基于共享机密的经过身份验证的消息。消息将包含 [至少] 消息类型、消息正文、时间戳和消息摘要。您通过使用共享密钥对其他内容进行 HMAC 处理来创建摘要。（将 HMAC Arduino 输入 Google 以获取库和代码。）消息通过 TCP 或 UDP 发送（我更喜欢它）。Arduino 计算消息摘要，检查它，验证数据，然后对消息进行操作。

我喜欢做的一件事是在应用服务器前面的网络层实现端口敲门或其他东西。这可以防止不需要的流量到达自定义（并且可能是易受攻击的）命令服务器。这可以悄悄地完成（参见静音敲门）或明显地完成。网络保护也可以通过专用设备来实现，该设备可以在大量流氓流量到达 Arduino 之前执行繁重的工作并取消其资格。

# javascript - 查找上一页的网址，该网址不在网络历史记录中

> ID：15855331
> 
> 赞同：0
> 
> 时间：2013-04-06T19:50:39.330
> 
> 标签：javascript, google-chrome-extension

我正在尝试编写与 xkcd 相关的 chrome 扩展，并且我希望能够判断当前页面是否来自[random button](http://dynamic.xkcd.com/random/comic/)。不幸的是，该 URL ( [http://dynamic.xkcd.com/random/comic/](http://dynamic.xkcd.com/random/comic/) ) 未在网络历史记录中找到，并且不适用于`document.referrer`. 有没有办法获取上一页，即使它不在网络历史记录中？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:55:46.330

我认为这是一个安全限制，您只能访问引荐来源网址，并且随机处理服务器端仅返回新页面，它是一个功能（可以这么说）而不是您访问过的页面。

我唯一的建议是检查引荐来源网址是否是同一个域（xkcd）但不是一个连续的 url

即当前网址是 xkcd.com/189 是推荐人 /188 或 /190 否则假设它是随机的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T21:03:13.990

没有什么可以阻止您直接执行此操作。随机页面是一个`307`重定向，它由浏览器无形地处理，但您可以使其更加可见。我不确定你想用它来自随机按钮的知识做什么，但请考虑以下示例：

**清单.json**

```
{
  "name": "Chrome webrequest test",
  "version": "0.1",
  "description": "A test for webrequest",
  "manifest_version": 2,
  "permissions": [
    "<all_urls>","webRequest","webRequestBlocking"
  ],
  "background": {
    "scripts": ["bgp.js"],
    "persistent": true
  },
  "content_scripts": [{
    "matches": ["http://xkcd.com/*"],
    "js": ["xkcdInject.js"]
  }]
} 
```

**bgp.js**

```
var requestIds = [];

chrome.webRequest.onBeforeRedirect.addListener(function(details){
  requestIds.push(details.requestId);
},
{urls: ["http://dynamic.xkcd.com/random/comic/"]});

chrome.webRequest.onCompleted.addListener(function(details){
  var n = requestIds.indexOf(details.requestId);
  if(n > -1){
    setTimeout(function(){
      chrome.tabs.sendMessage(details.tabId,{random:"true"});
    },1000); 
    requestIds.splice(n,1);
  }
},
{urls: ["http://xkcd.com/*"]},["responseHeaders"]); 
```

**xkcdIject.js**

```
chrome.runtime.onMessage.addListener(function(message,sender,sendResponse){
  if(message.random == 'true')
    console.log("This page came from the random button.");
}); 
```

在此示例中，它正在侦听随机按钮的使用，然后将有关此使用的知识发送到相关选项卡。有了这个，你的标签就知道它是否来自随机按钮。

# android - 从 AsyncTask onPostExecute 更新共享首选项

> ID：15855332
> 
> 赞同：0
> 
> 时间：2013-04-06T19:50:55.257
> 
> 标签：android, android-asynctask, sharedpreferences

当我尝试使用从 doInBackground 收到的值更新 SharedPreferences 时，AsyncTask onPostExecute 崩溃（报告 nullpointerexecption）。

我对调用活动的处理是：`private DashboardActivity<?> callerActivity;`没有`<?>`它抱怨。我尝试了几种方法：1）将 onPostExecute 中的 SP 更新为：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(callerActivity);
prefs.edit().putInt("lastrecord", intRec ).commit(); 
```

我还在 callerActivity 中调用了一个方法：

```
callerActivity.storeLastInsertedRecord(intRec); 
```

所有错误都是相同的，这些行上的 nullpointerexecution。

我可能做错了什么？这个答案[Android - 在 AsyncTask onPostExecute() 中设置的共享首选项并不总是设置？](https://stackoverflow.com/questions/12604414/android-shared-preferences-set-in-an-asynctask-onpostexecute-not-always-set)@denisdrew 是最接近的，但是当我尝试实例化意图时它在同一个地方崩溃：

```
Intent myIntent = new Intent(callerActivity.getApplicationContext(), SharedPrefsHelperActivity.class); 
```

或者

```
Intent myIntent = new Intent(callerActivity.getBaseContext(), SharedPrefsHelperActivity.class); 
```

我可能做错了什么？我知道我要推送的值不是 null (intRec)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:54:27.943

所以问题很可能与分配给的 Context 有关**`NULL`**。我建议你通过 AsyncTask eq 的构造函数传递 Context 变量

```
private Context c;

public MyTask(Context c) {
   this.c = c;
} 
```

并称它为：

```
new MyTask(YourCallerActivity.this).execute(); 
```

**注意：**我最近处理了类似的问题（在 onPostExecute 中保存 SharedPreferences）并且一切正常，因为我通过构造函数传递了 Context。

# ruby-on-rails-3 - Rspec 模型验证

> ID：15855334
> 
> 赞同：0
> 
> 时间：2013-04-06T19:50:59.567
> 
> 标签：ruby-on-rails-3, rspec

我尝试在 rails 3 中使用 TDD Rspec 进行模型验证。
我的 user_spec.rb 文件看起来像

```
require 'spec_helper'

describe User do

before { @user = User.new(name: "eric", country: "hawaii", email: "nice@nice.ch", password: "nicenice") }

subject { @user }

it { should respond_to(:name) }
it { should respond_to(:email) }

it { should be_valid }

end 
```

运行 rspec spec/models/user_spec.rb 后，我收到一条错误消息

```
No DRb server is running. Running in local process instead ...
..F

Failures:

  1) User 
     Failure/Error: it { should be_valid }
     TypeError:
       type mismatch: String given
     # ./spec/models/user_spec.rb:37:in `block (2 levels) in <top (required)>'

Finished in 0.09495 seconds
3 examples, 1 failure

Failed examples:

rspec ./spec/models/user_spec.rb:37 # User 

Randomized with seed 42015 
```

be_valid 应该是一个字符串吗？

# c# - 以新形式编辑选定的数据网格行

> ID：15855339
> 
> 赞同：0
> 
> 时间：2013-04-06T19:51:36.683
> 
> 标签：c#, data-binding, gridview

在 C# 中，我有绑定到客户表的数据网格视图，我希望当用户双击网格中的选定行然后出现绑定到客户表（包括文本框）的新表单并让用户修改数据并保存到数据库？

实际上我尝试了这段代码但没有工作！我尝试通过以下代码同步gridview的位置和我的编辑表单绑定源，但运行时没有任何反应！

```
edit_customerform editcustomer = new edit_customerform();
editcustomer.customersBindingSource.Position=this.customersBindingSource.Position; 
editcustomer.ShowDialog(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:26:30.067

以下是使用 EntityFramework 的方法。

[http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/881d238c-1738-41e6-8a90-5bcc1f8d4801](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/881d238c-1738-41e6-8a90-5bcc1f8d4801)

# android - jquery mobile selectbox隐藏固定工具栏

> ID：15855344
> 
> 赞同：1
> 
> 时间：2013-04-06T19:51:53.623
> 
> 标签：android, jquery-mobile

我对 Android 设备上的原生选择框有一个奇怪的问题 - 在屏幕高度等较长页面的情况下，点击选择框后 - 固定工具栏隐藏。部分代码（原始有大约 7 个选择框）：

```
<div data-role="page" id="profile" class="whole_page">
    <div data-role="header" data-tap-toggle="false" data-position="fixed">
        <img src="img/logo.png" class="ui-btn-left header_image" /><h1>Title</h1>
    </div>
    <div data-role="content">
           <label for="occupation">Povolanie:</label>
       <select class="selecttmenu" name="occupation" id="occupation" data-theme="a" onchange="check_profile_form()">
               <option value="0" data-placeholder="true"></option>
               <option value="1">student</option>
               <option value="2">employed</option>
               <option value="3">unemployed</option>
            </select> 
        </div>
    <div data-role="footer" data-position="fixed" data-tap-toggle="false" class="footer_border" data-id="myfooter">
        <div data-role="navbar" class="navbarik">
            <ul>
                <li><a href="#" data-theme="c" class="profile ui-btn-active ui-state-persist active-white"><img src="img/profile.png" class="footer_image" /><br /><span class="footer_text">profile</span></a></li>
                <li class="last"><a href="#" data-theme="c" class="logout inactive-white"><img src="img/logout.png" class="footer_image" /><br /><span class="footer_text">logout</span></a></li>
            </ul>
        </div>
    </div>
</div> 
```

每一个答案将不胜感激。提前致谢。

# c# - 如何从存储库或自动映射器中的另一个表中提取数据？

> ID：15855345
> 
> 赞同：0
> 
> 时间：2013-04-06T19:52:14.463
> 
> 标签：c#, asp.net-web-api, repository-pattern, automapper-2

我本质上是在尝试找到一种干净的方法来从另一个表中提取数据。下面是我的模型的简化版本。我的目标是将平台名称放在用户平台中。我想要最干净的方法来做到这一点，所以我假设使用自动映射器或直接在我的存储库中。

当我尝试在用户平台中放置对平台的虚拟引用时，我的代码收到一个错误，我们有一个级联删除循环。

关于如何解决这个问题的任何想法？

```
public class User
{
    public int UserID { get; set; }
    public virtual ICollection<UserPlatform> UserPlatform { get; set; }
}
public class UserPlatform
{
    public int UserPlatformID { get; set; }
    public String PlatformName { get; set; }
    public int UserID { get; set; }
}

public class Platform
{
    public int PlatformID { get; set; }
    public string Name { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:18:49.187

备择方案

1.  Db：对您的数据进行非规范化处理，以便将信息存储在您的用户表中。
2.  存储库：在内部进行连接
3.  存储库：执行两个不同的查询并手动构建用户对象。

# php - 未定义的偏移量：第一个 PHP 应用程序中的 0

> ID：15855346
> 
> 赞同：1
> 
> 时间：2013-04-06T19:52:15.013
> 
> 标签：php

我目前正在构建我的第一个 PHP 应用程序。我想从 csv 文件中读取公交车时间，并将下一班从他们住所到我们大学的公交车还给 ti 用户。这是我第一次尝试 PHP，所以要温柔：

```
<?php

    // configuration
    require("../includes/config.php"); 

    if (!empty($_SESSION["id"]))
    {
        //lookup database entries for house
        $users = query("SELECT * FROM users WHERE id = ?", $_SESSION["id"]);
        if ($users === false)
        {
            apologize("Sorry, there was an error");
        }
        //lookup database entries for house
        $residences = query("SELECT * FROM residences WHERE id = ?", $users[0]["residence"]);
        if ($residences === false)
        {
            apologize("Sorry, there was an error");
        }
        //if user specified a residence in his profile
        if($residences[0]["id"] != 0)
        {   
            $times = array();           
            //if there is no bus today, in this case sat and sun
            if(date( "w", $timestamp) == 0 || date( "w", $timestamp) == 6)
            {
                $times[0] = "There is no bus today";
            }
            //load the busplan for his residence
            else
            {
                //open file and load in array if time is higher than date("His");
                $timesList = file_get_contents($users[0]["residence"] . ".csv");
                $nextbuses = explode(',', $timesList);
                $hoursMins = date("Gi");

                $num = 0;

                for($i = 0; $i < count($nextbuses); $i++)
                {
                    if($hoursMins < $nextbuses[$i])
                    {
                        $times[$num] = $nextbuses[$i];
                        $num++;
                    }

                }
            }
            render("shuttle_show.php", ["title" => "Next Shuttle from your residence.", "times" => $times]);
        }
    } 
```

这使用函数查询：

```
function query(/* $sql [, ... ] */)
{
    // SQL statement
    $sql = func_get_arg(0);

    // parameters, if any
    $parameters = array_slice(func_get_args(), 1);

    // try to connect to database
    static $handle;
    if (!isset($handle))
    {
        try
        {
            // connect to database
            $handle = new PDO("mysql:dbname=" . DATABASE . ";host=" . SERVER, USERNAME, PASSWORD);

            // ensure that PDO::prepare returns false when passed invalid SQL
            $handle->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
        }
        catch (Exception $e)
        {
            // trigger (big, orange) error
            trigger_error($e->getMessage(), E_USER_ERROR);
            exit;
        }
    }

    // prepare SQL statement
    $statement = $handle->prepare($sql);
    if ($statement === false)
    {
        // trigger (big, orange) error
        trigger_error($handle->errorInfo()[2], E_USER_ERROR);
        exit;
    }

    // execute SQL statement
    $results = $statement->execute($parameters);

    // return result set's rows, if any
    if ($results !== false)
    {
        return $statement->fetchAll(PDO::FETCH_ASSOC);
    }
    else
    {
        return false;
    }
} 
```

我猜它使用的其他功能不相关。现在我似乎无法找到为什么这会继续产生：

注意：未定义的偏移量：第 16 行 /Applications/MAMP/htdocs/html/shuttle.php 中的 0

注意：未定义的偏移量：第 22 行 /Applications/MAMP/htdocs/html/shuttle.php 中的 0

相关线路是

```
 $residences = query("SELECT * FROM residences WHERE id = ?", $users[0]["residence"]); 
```

和

```
 if($residences[0]["id"] != 0) 
```

将不胜感激一些帮助！:)

编辑：

我将相同的文件传输到我的 linux 系统，并且没有任何更改，我得到了一个 vardump。如果我在 Mac 上的 MAMP 上使用相同的 vardump，则数组为空。现在我得到：

```
var_dump($users);

array (size=1)
  0 => 
    array (size=5)
  'id' => int 12
  'username' => string 'frechdaxx' (length=9)
  'mail' => string '*************@gmail.com' (length=23)
  'hash' => string '$1$qr5axj4C$BET5zZGJza2DcHI8eD8fV0' (length=34)
  'residence' => int 9573 
```

1.  为什么这是一个问题？在我访问用户表之前，函数查询使用完全相同的语法，我们可以看到它正确地返回了所有其他值。

2.  为什么我的环境之间存在差异？该阵列在我的 MAMP 服务器上是空的，但可以在 Linux 上运行。但是，其他带有查询功能的代码示例在这两种环境下都能完美运行

3.  为什么 9573 的大整数？表中的值为 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:04:38.623

这简直就是`$users[0]["residence"]`不存在（未设置）。在尝试使用它之前，您应该检查它。如您所见，这只是一个通知，而不是错误。这意味着在某些情况下，可以取消设置变量并且 PHP 不会抱怨太多，但这绝对不是一般规则。

我会将其更改为：

```
 $users = query("SELECT * FROM users WHERE id = ?", $_SESSION["id"]);
  if (empty($users[0]["residence"]))
    {
    apologize("Sorry, there was an error");
    } 
```

此外，这只会“修复”它。如果你想找到问题的根源，它在被调用的 query() 函数中`$users = query("SELECT * FROM users WHERE id = ?", $_SESSION["id"]);`：

```
 // execute SQL statement
  $results = $statement->execute($parameters);

  // return result set's rows, if any
  if ($results !== false)
  {
    $fetched = $statement->fetchAll(PDO::FETCH_ASSOC);
    // Check that ther was actually something fetched
    if(!empty($fetched))
    {
      return $fetched;
    }
  }
/* You don't need to return false, null is the default returned value.
 * If you *want* it, then delete the else. */
} 
```

从[文档](http://php.net/manual/en/pdostatement.fetchall.php)中，如果没有任何内容， fetchall 返回一个空数组，因此该函数可能会返回一个空数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T20:17:07.157

```
$users = query("SELECT * FROM users WHERE id = ?", $_SESSION["id"]);
if ($users === false) {   } 
```

您正在严格检查查询是否返回错误，这仅在查询或参数有问题时发生。这不会检查是否返回了任何结果，并且您指的`$users[0]["residence"]`是不存在的第一个返回记录（）（`$users`是一个空数组）。

由于用户 id 来自`$_SESSION["id"]`它应该存在并在数据库中可用，但有可能在您的代码中的某处您正在用其他 id 覆盖它。

# ios - 将 json 对象作为变量在 iOS 6 中的 POST 中命名为 json

> ID：15855347
> 
> 赞同：0
> 
> 时间：2013-04-06T19:52:37.773
> 
> 标签：ios, objective-c, json, cocoa-touch

服务器需要一个名为 json 的变量，其值为 json 对象。我可以将 an`NSDictionary`转换`JSON`为 NSData 形式的对象（*对我来说这是一个黑盒子*）。

我的问题是，如何获取 NSData 的黑盒并将其分配给变量 json，然后将其发布到服务器？

作为一个附带问题，服务器要求这种格式是我还是奇怪？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:32:07.237

不，不只是你。这有点奇怪，但好消息是它可以做到！

```
NSError *jsonError = nil;
NSData *jsonObject = [NSJSONSerialization dataWithJSONObject:jsonDict options:0 error:&jsonError];
if (!jsonError) {
    NSMutableData *postBody = [[NSMutableData alloc] initWithData:[@"json=" dataUsingEncoding:NSUTF8StringEncoding]];
    [postBody appendData:jsonObject];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:theURL];
    [request setHTTPMethod:@"POST"];
    [request setHTTPBody:postBody];
} 
```

# c# - 在 C# 中使用 Specflow 向测试人员发送测试失败消息

> ID：15855351
> 
> 赞同：2
> 
> 时间：2013-04-06T19:53:18.497
> 
> 标签：c#, testing, exception-handling, qa, specflow

我正在通过 Specflow 为 QA 编写测试代码。

目前，测试充满了断言（例如： Assert.IsTrue(foo, "foo is not true, test could not continue") ）和失败消息。当一个步骤或其中的一部分失败时，我们会抛出一个带有错误消息的异常，并在顶层捕获它。

问题是现在“失败消息”包含一个非常长的异常消息（包含确切的文件、方法和类名——这些信息对测试人员来说并不重要）。

我想知道是否有办法忽略顶层异常消息的特定部分。或者也许使用另一种策略，而不是使用异常 throw\catch 和 Assertions。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-29T02:55:59.930

听起来您只是在断言失败时不想要堆栈信息。许多人在尝试调试时发现这很有用，所以我可能会建议尝试隐藏它而不是摆脱它。

由于 SpecFlow 所做的只是将功能文件转换为测试（我们现在假设为 nunit），因此要运行测试，您只需像往常一样运行 NUnit。如果您使用 nunit-console.exe 执行，SpecFlow 开箱即用提供了一个 html 报告生成器来执行您的要求。如果这就是您正在使用的，这也适用于 mstest。

它列出了所有测试并将它们显示为红色或绿色，并有一个 [show]/[hide] 选项，允许您仅在您关心它时显示更多信息。您可以修改报告生成器以对测试输出做任何您想做的事情，但我真的建议将其保留在那里。

下面的链接向您展示了如何设置它。我们在 CI 中运行它，但您可以编写一个批处理脚本，甚至可以通过 C# 执行它。

[https://github.com/techtalk/SpecFlow/wiki/Reporting](https://github.com/techtalk/SpecFlow/wiki/Reporting)

NUnit Runner

```
nunit-console.exe /labels /out=TestResult.txt /xml=TestResult.xml bin\Debug\BookShop.AcceptanceTests.dll 
```

*   输出文件有 console.WriteLine 信息
*   xml文件有测试结果

SpecFlow 报告生成器

```
specflow.exe nunitexecutionreport BookShop.AcceptanceTests.csproj /out:MyResult.html 
```

*   生成供测试人员阅读和操作的 html 报告

# objective-c - 在核心数据映射模型的值表达式中使用“indexOfObject:”

> ID：15855352
> 
> 赞同：1
> 
> 时间：2013-04-06T19:53:29.250
> 
> 标签：objective-c, macos, core-data, icloud, core-data-migration

我需要迁移我的核心数据模型以用正常的关系替换有序关系以支持 iCloud。我创建了一个映射模型并尝试通过添加新属性“index”并使用“ *`FUNCTION($source.project.tasks, "indexOfObject:" , $source)`*”来获取旧索引来维护顺序。（$source.project.tasks 应该是一个有序集。我的实体“Project”和“Tasks”之间的关系如下所示：tasks <-->> project）不幸的是，这不起作用。应用程序在启动时崩溃 (EXC_BAD_ACCESS)。

我不确定这是否是正确的方法。有没有办法让我的方法奏效，还是有更好的方法？

![映射模型](https://i.stack.imgur.com/Z9dvH.png)

**编辑：** $source.project.tasks 返回错误错误消息： `Relationship 'tasks' fault on managed object (0x1019f9130)`

我用“indexOfTask:”方法创建了一个 NSManagedObject 类别来记录对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T10:18:23.707

我找到了一个解决方案：所有使用的方法都`FUNCTION(...)`需要返回一个 id 值，所以我为 NSManagedObject 创建了一个类别并添加了这个方法：

```
- (NSNumber *)getIndexOfTask {
    NSUInteger index = [(NSOrderedSet *)[[(CTask *)self project] tasks] indexOfObject:self];
    if (index == NSNotFound)
        return @0;
    else
        return [NSNumber numberWithInteger:index];
} 
```

此方法将索引返回为 NSNumber 并可用于`FUNCTION(...)`：

```
FUNCTION($source, "getIndexOfTask").intValue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T21:28:42.097

**第一个想法**：尝试使用另一个名称（不是`index`）。好像有特殊的意义。怎么样`sequence`？

**第二个想法**：做一个两步迁移。

在中间步骤中，您只需添加索引。您遍历所有有序集并设置索引并保存。然后您进行第二次迁移，完全消除有序集。

（*应该有一个多存储策略，您可以使用它来确保安全，如果出现问题，可以返回旧数据或临时数据。*）

# java - Android 应用程序在添加动画时停止

> ID：15855357
> 
> 赞同：1
> 
> 时间：2013-04-06T19:54:14.837
> 
> 标签：java, android, xml, android-emulator, android-animation

我是 android 和编码小游戏介绍屏幕的初学者。我的问题是，当我向介绍屏幕添加一些基本动画时，没有输出并且应用程序停止并出现这样的弹出窗口![在此处输入图像描述](https://i.stack.imgur.com/2zwHd.png)，

当我评论动画方法时，它显示了简单的基于 xml 的布局，请帮助我这里的问题是我的 java 文件

```
public class MainActivity extends Activity 
{
TextView  logo ;
TextView bottom  ;   
@Override
protected void onCreate(Bundle savedInstanceState)
{   
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    animate();
}
public void animate()
{  
    logo=  (TextView) findViewById(R.id.toplogo);
    bottom =(TextView) findViewById(R.id.footer);
    Animation fade1= AnimationUtils.loadAnimation(this, R.anim.fade_in);
    logo.setAnimation(fade1);

    Animation fade2=  AnimationUtils.loadAnimation(this, R.anim.fade_in2);
    bottom.setAnimation(fade2);

    fade2.setAnimationListener(new AnimationListener(){

        @Override
        public void onAnimationEnd(Animation animation)
        {
           startActivity(new  Intent(MainActivity.this, Menu.class));    
           MainActivity.this.finish();  
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub
    }}
    );

 }     
public void onpause()
{
    super.onPause();
    logo.clearAnimation();
    bottom.clearAnimation();        
}
public void onResume()
{
    super.onResume();
    animate();
} 
```

}

```
activity_main.xml file

<LinearLayout       xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@android:color/black"
>

<TextView
    android:id="@+id/toplogo"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello_world"
    android:textColor="@color/logoname"
    android:gravity="top|center"
    android:textSize="@dimen/logosize" />

<TableLayout
    android:id="@+id/TableLayout01"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:stretchColumns="*" >

    <TableRow
        android:id="@+id/tableRow1"
         android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal"
             android:minHeight="150px"               
            >
        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_gravity="center_vertical|center_horizontal"
            android:src="@drawable/splash1"
              />

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal"
            android:src="@drawable/splash2"
              />

    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:minHeight="150px"               

        >
         <ImageView
            android:id="@+id/imageView3"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_gravity="center_vertical|center_horizontal"
            android:src="@drawable/splash3" />

        <ImageView
            android:id="@+id/imageView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal"
            android:src="@drawable/splash4" />
    </TableRow>

</TableLayout>

<TextView
    android:id="@+id/footer"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/logoname"
    android:textSize="@dimen/logosize"
    android:text="Done That " 
    android:gravity="bottom|center"
    android:minHeight="120px"
     >
  </TextView>

   </LinearLayout> 
```

动画文件

```
 fade_in2.xml
   <?xml version="1.0" encoding="utf-8"?>
  <set  xmlns:android="http://schemas.android.com/apk/res/android"
 android:shareInterpolator="false">
  <alpha
    android:fromAlpha="0.0"
    android:toAlpha="1.0"
    android:duration="2500"
    android:startOffset="2500">
 </alpha>

 </set > 
```

和同样的方式`fade_in.xml`等请帮助我解决它不能使用的逻辑/代码有什么问题`animation`..

**编辑** 错误日志..

我不确定我是否复制了所需的一个，请看这个（我确实从 logcat 选项卡的下拉菜单中选择了错误）

```
04-06 20:18:25.996: E/AndroidRuntime(812): FATAL EXCEPTION: main
04-06 20:18:25.996: E/AndroidRuntime(812): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.simplegame/android.view.Menu}; have you declared this activity in your AndroidManifest.xml?
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1618)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1417)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.app.Activity.startActivityForResult(Activity.java:3370)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.app.Activity.startActivityForResult(Activity.java:3331)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.app.Activity.startActivity(Activity.java:3566)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.app.Activity.startActivity(Activity.java:3534)
04-06 20:18:25.996: E/AndroidRuntime(812):  at com.example.simplegame.MainActivity$1.onAnimationEnd(MainActivity.java:41)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.animation.AnimationSet.getTransformation(AnimationSet.java:400)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.animation.Animation.getTransformation(Animation.java:940)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.View.drawAnimation(View.java:13205)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.View.draw(View.java:13344)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.View.draw(View.java:13715)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.View.draw(View.java:13596)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.View.draw(View.java:13715)  
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.widget.FrameLayout.draw(FrameLayout.java:467)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.View.draw(View.java:13596)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.View.draw(View.java:13594)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
04-06 20:18:25.996: E/AndroidRuntime(812):  at an  droid.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.View.draw(View.java:13715)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.widget.FrameLayout.draw(FrameLayout.java:467)
04-06 20:18:25.996: E/AndroidRuntime(812):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2211)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.ViewRootImpl.drawSoftware(ViewRootImpl.java:2281)
04-06 20:18:25.996: E/AndroidRuntime(812):  at  android.view.ViewRootImpl.draw(ViewRootImpl.java:2177)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2045)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1854)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.Choreographer.doCallbacks(Choreographer.java:562)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.Choreographer.doFrame(Choreographer.java:532)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.os.Handler.handleCallback(Handler.java:725)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.os.Looper.loop(Looper.java:137)
04-06 20:18:25.996: E/AndroidRuntime(812):  at android.app.ActivityThread.main(ActivityThread.java:5041)
04-06 20:18:25.996: E/AndroidRuntime(812):  at java.lang.reflect.Method.invokeNative(Native Method)
04-06 20:18:25.996: E/AndroidRuntime(812):  at java.lang.reflect.Method.invoke(Method.java:511)
04-06 20:18:25.996: E/AndroidRuntime(812):  at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-06 20:18:25.996: E/AndroidRuntime(812):  at     com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-06 20:18:25.996: E/AndroidRuntime(812):  at dalvik.system.NativeStart.main(Native       Method) 
```

编辑 Manifest.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
 package="com.example.simplegame"
 android:versionCode="1"
 android:versionName="1.0" >

 <uses-sdk
 android:minSdkVersion="8"
 android:targetSdkVersion="17" />

 <application
 android:allowBackup="true"
 android:icon="@drawable/ic_launcher"
 android:label="@string/app_name"
 android:theme="@style/AppTheme" >
 <activity
  android:name="com.example.simplegame.MainActivity"
  android:label="@string/app_name" >
  <intent-filter>
  <action android:name="android.intent.action.MAIN" />
  <category android:name="android.intent.category.LAUNCHER" />
  </intent-filter>
  </activity>
  <activity android:name="Menu"></activity>
   </application>     

  </manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:33:26.183

问题是您没有在清单中声明活动

```
04-06 20:18:25.996: E/AndroidRuntime(812): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.simplegame/android.view.Menu}; have you declared this activity in your AndroidManifest.xml? 
```

**更新**

将此添加到您的清单中。并将*包名称*替换为您的包名称，例如 com.etc.xxx

```
 <activity
        android:name="*package name*.Menu"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MENU" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T20:37:57.183

您没有在`AndroidManifest.xml`.

此链接应该对您有所帮助：[Best way to add Activity to an Android project in Eclipse?](https://stackoverflow.com/questions/2337874/best-way-to-add-activity-to-an-android-project-in-eclipse)

记住谷歌是你的朋友，努力自学，从长远来看，它会让你受益。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T10:53:24.250

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
 package="com.example.simplegame"
 android:versionCode="1"
 android:versionName="1.0" >

 <uses-sdk
  android:minSdkVersion="8"
  android:targetSdkVersion="17" />

 <application
  android:allowBackup="true"
  android:icon="@drawable/ic_launcher"
  android:label="@string/app_name"
  android:theme="@style/AppTheme" >

   <activity
       android:name="com.example.simplegame.INTRO"
       android:label="@string/app_name" >
       <intent-filter>
         <action android:name="android.intent.action.MAIN" />
         <category android:name="android.intent.category.LAUNCHER" />
       </intent-filter>
   </activity>
   <activity
       android:name= "com.example.simplegame.Menu" <!-- java file-->
       android:label="@string/app_name">
       <intent-filter>
         <action android:name="thePackageOfTheLayoutsXmlFiles.MENU"/> <!-- layout -->
         <category androi:name = "android.intent.category.DEFAULT"/>
      </intent-filter>
   </activity>
 </application>     
 </manifest> 
```

在清单文件中，您忘记将布局引用到 java 文件。此外，当您想向应用程序添加新活动时，您需要为布局创建一个新的 xml 文件..和新的 java 类，这个类应该扩展 Activity，然后将 onCreate() 方法添加到此类。

# sql - 如何获得不同列的最大值

> ID：15855360
> 
> 赞同：2
> 
> 时间：2013-04-06T19:54:58.070
> 
> 标签：sql, postgresql

我有两个这样的表：

最后下载：

```
Movie    Date-last-downloaded
 A              1-1-1111
 B              2-2-2222
 C              3-3-3333
 D              4-4-4444
 E              5-5-5555 
```

最后购买：

```
Movie    Date-last-purchased
 A              0-0-0000
 B              3-3-3333
 C              5-5-5555
 G              2-2-2222
 H              7-7-7777 
```

我正在尝试查找每部电影的最后一次下载或购买。那是：

*   如果电影同时被购买和下载，则返回较晚的日期（最近的）
*   否则，如果只是下载而不购买（反之亦然），则返回`Date-last-downloaded`(or `Date-last-purchased`)

我该怎么做？

最终结果应该是这样的：

```
Movie    Date-last-purchased-or-downloaded
 A              1-1-1111
 B              3-3-3333
 C              5-5-5555
 D              4-4-4444
 E              5-5-5555
 G              2-2-2222
 H              7-7-7777 
```

（问题名称具有误导性 - 如果有人能想到一个更好的问题并为我修复它，我将不胜感激）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:57:55.057

```
select  movie
,       max(dt)
from    (
        select  Movie
        ,       Date-last-downloaded as dt
        from    LastDownloaded
        union all
        select  Movie
        ,       Date-last-purchased
        from    LastPurchased
        ) SubQueryAlias
group by
        movie 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T23:59:13.410

```
select
    coalesce(lp.movie, ld.movie) movie,
    greatest(
        date_last_downloaded,
        date_last_purchased
    ) Date_last_purchased_or_downloaded
from
    lastdownloaded ld
    full outer join
    lastpurchased lp on ld.movie = lp.movie 
```

# java - Java不显示矩形？

> ID：15855367
> 
> 赞同：0
> 
> 时间：2013-04-06T19:55:39.347
> 
> 标签：java, swing, graphics, awt, paint

我正在尝试在指定位置显示一个矩形，但它没有显示出来。背景是洋红色，但矩形不存在。

另外：除了“颜色。（在此处插入很少的选项）”之外，我如何访问更多颜色

```
import javax.swing.*;
import java.awt.*;

class Screensaver {
    private final static int FRAME_HEIGHT = 600;
    private final static int FRAME_WIDTH = 600;
    public static void main(String[] args){
        JFrame win;
        Container contentPane;
        Graphics g;

        win = new JFrame();
        win.setSize(FRAME_WIDTH, FRAME_HEIGHT);
        win.setVisible(true);
        contentPane = win.getContentPane();
        contentPane.setBackground(Color.MAGENTA);
        g = contentPane.getGraphics();
        g.setColor(Color.BLACK);
        g.fillRect(80, 350, 400, 250);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T20:03:04.750

你不应该在 main(); 最好扩展JPanel，更改paintComponent()，并将面板添加到JFrame。

```
public class PaintPanel extends JPanel {

    public PaintPanel() {
        setBackground(Color.MAGENTA);
    }

    protected void paintComponent(Graphics g) {
        super.paintComponent(g); // This paints the background

        g.setColor(Color.BLACK);
        g.fillRect(80, 350, 400, 250);
    }
} 
```

在 main() 中：

```
public static void main(String[] args) {
    JFrame frame = new JFrame();
    frame.add(new PaintPanel());
    frame.setVisible(true);
} 
```

如果要制作自己的颜色，可以使用 new Color(int red, int green, int blue) 构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:11:21.867

尝试这个 ：

```
import javax.swing.*;
import java.awt.*;

class Screensaver {

    private final static int FRAME_HEIGHT = 600;
    private final static int FRAME_WIDTH = 600;

    public static void main(String[] args) {
        JFrame win;
        Container contentPane;
        win = new JFrame();
        win.setSize(FRAME_WIDTH, FRAME_HEIGHT);
        win.setVisible(true);
        Component comp = new Component();
        contentPane = (Container) win.getContentPane().add(comp);

    }
    }

    class Component extends JComponent {

    @Override
   public void paintComponent(Graphics g) {
    super.paintComponent(g);
        g.setColor(Color.magenta);
        g.fillRect(0, 0, getWidth(), getHeight());
        g.setColor(Color.BLACK);
        g.fillRect(80, 350, 400, 250);
    }
} 
```

关于颜色，您可以创建新颜色并根据需要设置红色、绿色、蓝色，试试这个：

```
g.setColor(new Color(red, green, blue)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T20:16:06.667

如果您要绘制东西，请创建一个继承自 Swing 容器、JComponent、JPanel 等的类并覆盖paint(Graphics g) 方法。如果您看到洋红色背景，则必须添加 contentPane。可能发生的是它在您的矩形上绘制洋红色背景，但这只是一个猜测。尝试这个...

```
public class ContentPane extends JComponent {
     public ContentPane() {

     }

     @Override
     public void paint(Graphics g) {
          g.setColor(Color.MAGENTA);
          g.fillRect(0, 0, getWidth(), getHeight());

          g.setColor(Color.BLACK);
          g.fillRect(80, 350, 400, 250);

     }
} 
```

然后在您的主类中实例化 ContentPane 类的一个对象并将其添加到您的 JFrame。调用 repaint() 可能是不必要的，但这将确保它被绘制。您也可以尝试使用 paintComponent(Graphics g) 方法，两者之间存在差异，我相信这是从 update 方法调用它们的顺序，但我可能错了，但这应该可以解决您的问题问题。

至于颜色，请查阅 API。您可以将 RGB 值传递给 Color 构造函数以创建各种颜色。颜色颜色 = 新颜色（int red，int green，int blue）。我认为这是创建自定义颜色的最简单方法，但就像我在 API 中所说的那样。希望这可以帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-06T20:13:10.343

矩形只绘制一次，但每次调用 JFrames repaint() 方法时都会将其擦除并绘制基本组件。要在 JFrames 中添加自定义绘图，您必须重写 paint 方法。在这里，我稍微改进了你的代码，让你开始走这条路。如您所见，您想在 Paint 方法中绘制框。我制作了一个 Container 元素来完成您的绘图并删除了背景颜色，并将其添加到paint方法中。

尝试这个

```
import javax.swing.*;
import java.awt.*;

public class JavaApplication10 {
    private final static int FRAME_HEIGHT = 600;
    private final static int FRAME_WIDTH = 600;
    public static void main(String[] args){
        JFrame win = new JFrame();
        win.setContentPane(new MyBoxContainer());
        win.setSize(FRAME_WIDTH, FRAME_HEIGHT);
        win.setVisible(true);
    }

    private static class MyBoxContainer extends Container {
        @Override
        public void paint(Graphics g) {
            super.paint(g);
            g.setColor(Color.MAGENTA);
            g.fillRect(0, 0, getWidth(), getHeight());
            g.setColor(Color.BLACK);
            g.fillRect(80, 350, 400, 250);
        }
    }
} 
```

# actionscript-3 - Away3D 和 BB 手册

> ID：15855368
> 
> 赞同：0
> 
> 时间：2013-04-06T19:55:45.770
> 
> 标签：actionscript-3, flash, blackberry-playbook, away3d

我在 Mobile Actionscript Flash Builder 项目中使用 Away3D 框架，并尝试在我的 bb 剧本上调试/运行。当我通过 Flash Builder（不是特定于 bb playbook）运行/调试时，一切都很好。一旦我尝试在我的实际设备上运行/调试，我就会收到以下错误：

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。
> 在 away3d.core.managers::Stage3DManager()[/Users/jesskeating/Documents/Adobe Flash Builder 4.6/3DMobile/src/away3d-core-fp11_4_0_9_gold(1)/src/away3d/core/managers/Stage3DManager.as:35 ]
> 
> 在 away3d.core.managers::Stage3DManager$/getInstance()[/Users/jesskeating/Documents/Adobe Flash Builder 4.6/3DMobile/src/away3d-core fp11_4_0_9_gold(1)/src/away3d/core/managers/Stage3DManager.as :45]
> 
> 在 away3d.containers::View3D/onAddedToStage()[/Users/jesskeating/Documents/Adobe Flash Builder 4.6/3DMobile/src/away3d-core-fp11_4_0_9_gold(1)/src/away3d/containers/View3D.as:762]
> 
> 在 Flash.display::DisplayObjectContainer/addChild() 在 Main/setupScene（[/Users/jesskeating/Documents/Adobe Flash Builder 4.6/3DMobile/src/Main.as:85]
> 
> 在 Main()[/Users/jesskeating/Documents/Adobe Flash Builder 4.6/3DMobile/src/Main.as:79]

我知道空对象引用意味着我需要声明/定义一个 var 但由于该应用程序与 flash builder 完美运行我不明白。

任何帮助将非常感激。我的代码如下...

```
package{
import away3d.containers.View3D;
import away3d.entities.Mesh;
import away3d.events.MouseEvent3D;
import away3d.lights.DirectionalLight;
import away3d.materials.ColorMaterial;
import away3d.materials.SkyBoxMaterial;
import away3d.materials.lightpickers.StaticLightPicker;
import away3d.primitives.CubeGeometry;
import away3d.primitives.SphereGeometry;
import away3d.textures.BitmapCubeTexture;
import away3d.textures.BitmapTexture;

import flash.desktop.NativeApplication;
import flash.display.SimpleButton;
import flash.display.Sprite;
import flash.display.StageAlign;
import flash.display.StageScaleMode;
import flash.events.*;
import flash.events.AccelerometerEvent;
import flash.geom.Vector3D;
import flash.sensors.Accelerometer;
import flash.text.*;

[SWF(width=1024, height=600, frameRate=60)]

public class Main extends Sprite{

    [Embed(source="dice.png")]
    private var Dice:Class;
    [Embed(source="alum-01.png")]
    private var Alum:Class;
    [Embed(source="bat-01.png")]
    private var Bat:Class;
    [Embed(source="brun-01.png")]
    private var Brun:Class;
    [Embed(source="julie-01.png")]
    private var Julie:Class;
    [Embed(source="slice-01.png")]
    private var Slice:Class;

    private var format:TextFormat;
    private var inst:TextField;

    private var myview:View3D = new View3D();;
    private var dice:Mesh;
    private var slice:Mesh;
    private var bat:Mesh;
    private var brun:Mesh;
    private var julie:Mesh;
    private var alum:Mesh;

    private var acc1:Accelerometer;
    private var acc2:Accelerometer;
    private var acc3:Accelerometer;

    private var knife:Mesh;

    public function Main(){
        super();

        // support autoOrients
        stage.align = StageAlign.TOP_LEFT;
        stage.scaleMode = StageScaleMode.NO_SCALE;

        format = new TextFormat();
        format.size = 26;
        format.color = 0xFFFFFF;
        inst = new TextField;

        inst.defaultTextFormat = format;
        inst.text = "Click on the cube you want to learn the cut of!"
        addChild(inst);
        inst.x = 250;
        inst.y = 300;
        inst.width = 500;
        setupScene();
    }

    private function setupScene():void{
        //adding the view for 3D
        //myview = new View3D();
        addChild(myview);

        var tdice:BitmapCubeTexture = new BitmapCubeTexture(new Dice().bitmapData,
            new Dice().bitmapData,
            new Dice().bitmapData,
            new Dice().bitmapData,
            new Dice().bitmapData,
            new Dice().bitmapData);

        var tslice:BitmapCubeTexture = new BitmapCubeTexture(new Slice().bitmapData,
            new Slice().bitmapData,
            new Slice().bitmapData,
            new Slice().bitmapData,
            new Slice().bitmapData,
            new Slice().bitmapData);

        var tbat:BitmapCubeTexture = new BitmapCubeTexture(new Bat().bitmapData,
            new Bat().bitmapData,
            new Bat().bitmapData,
            new Bat().bitmapData,
            new Bat().bitmapData,
            new Bat().bitmapData);

        var tbrun:BitmapCubeTexture = new BitmapCubeTexture(new Brun().bitmapData,
            new Brun().bitmapData,
            new Brun().bitmapData,
            new Brun().bitmapData,
            new Brun().bitmapData,
            new Brun().bitmapData);

        var tjulie:BitmapCubeTexture = new BitmapCubeTexture(new Julie().bitmapData,
            new Julie().bitmapData,
            new Julie().bitmapData,
            new Julie().bitmapData,
            new Julie().bitmapData,
            new Julie().bitmapData);

        var talum:BitmapCubeTexture = new BitmapCubeTexture(new Alum().bitmapData,
            new Alum().bitmapData,
            new Alum().bitmapData,
            new Alum().bitmapData,
            new Alum().bitmapData,
            new Alum().bitmapData);
        //making the shapes, adding cube to stage
        dice = new Mesh(new CubeGeometry(), new SkyBoxMaterial(tdice));
        myview.scene.addChild(dice);
        dice.x = -270;
        dice.y = 150;

        slice = new Mesh(new CubeGeometry(), new SkyBoxMaterial(tslice));
        myview.scene.addChild(slice);
        slice.x = 0;
        slice.y = 150;

        bat = new Mesh(new CubeGeometry(), new SkyBoxMaterial(tbat));
        myview.scene.addChild(bat);
        bat.x = 250;
        bat.y = 150;

        brun = new Mesh(new CubeGeometry(), new SkyBoxMaterial(tbrun));
        myview.scene.addChild(brun);
        brun.x = -270;
        brun.y = -150;

        julie = new Mesh(new CubeGeometry(), new SkyBoxMaterial(tjulie));
        myview.scene.addChild(julie);
        julie.x = 0;
        julie.y = -150;

        alum = new Mesh(new CubeGeometry(), new SkyBoxMaterial(talum));
        myview.scene.addChild(alum);
        alum.x = 270;
        alum.y = -150;

        //making the mouse work and click event on the cube
        dice.mouseEnabled = true;
        dice.addEventListener(MouseEvent3D.MOUSE_DOWN, function(event:MouseEvent3D):void{clickMe("Dice")});

        slice.mouseEnabled = true;
        slice.addEventListener(MouseEvent3D.MOUSE_DOWN, function(event:MouseEvent3D):void{clickMe("Slice")});

        julie.mouseEnabled = true;
        julie.addEventListener(MouseEvent3D.MOUSE_DOWN, function(event:MouseEvent3D):void{clickMe("Julienne")});

        bat.mouseEnabled = true;
        bat.addEventListener(MouseEvent3D.MOUSE_DOWN, function(event:MouseEvent3D):void{clickMe("Batonnet")});

        brun.mouseEnabled = true;
        brun.addEventListener(MouseEvent3D.MOUSE_DOWN, function(event:MouseEvent3D):void{clickMe("Brunoise")});

        alum.mouseEnabled = true;
        alum.addEventListener(MouseEvent3D.MOUSE_DOWN, function(event:MouseEvent3D):void{clickMe("Alumette")});

        knife = new Mesh(new CubeGeometry, new ColorMaterial(0xFF0000));

        //setting how you look at the view
        myview.camera.z = -500;
        myview.camera.lookAt(new Vector3D());

        //adding the enter frame event for spinning
        addEventListener(Event.ENTER_FRAME, loop);
    }

    private function loop(event:Event):void{

        //making the shapes rotate
        dice.rotationY++;
        slice.rotationY++;
        alum.rotationY++;
        julie.rotationY++;
        bat.rotationY++;
        brun.rotationY++;

        //rendering the view
        myview.render();
    }

    private function clickMe(cutPicked:String):void{

        switch(cutPicked){
            case "Dice":
                acc1.addEventListener(AccelerometerEvent.UPDATE, onAccUpdate);
                myview.scene.removeChild(dice);
                myview.scene.removeChild(slice);
                myview.scene.removeChild(alum);
                myview.scene.removeChild(julie);
                myview.scene.removeChild(bat);
                myview.scene.removeChild(brun);
                removeChild(inst);

                myview.scene.addChild(knife);
                //knife.rotateTo(10,10,0);
                break;
            case "Chiffonade":
                //acc3.addEventListener(AccelerometerEvent.UPDATE, onAccUpdate3);
                myview.scene.removeChild(dice);
                myview.scene.removeChild(slice);
                myview.scene.removeChild(alum);
                myview.scene.removeChild(julie);
                myview.scene.removeChild(bat);
                myview.scene.removeChild(brun);
                removeChild(inst);

                myview.scene.addChild(knife);
                knife.x = -75;
                break;
            case "Slice":
                //acc2.addEventListener(AccelerometerEvent.UPDATE, onAccUpdate2);
                myview.scene.removeChild(dice);
                myview.scene.removeChild(slice);
                myview.scene.removeChild(alum);
                myview.scene.removeChild(julie);
                myview.scene.removeChild(bat);
                myview.scene.removeChild(brun);
                removeChild(inst);

                myview.scene.addChild(knife);
                knife.x = -75;
                break;
            case "Alumette":
                //acc2.addEventListener(AccelerometerEvent.UPDATE, onAccUpdate2);
                myview.scene.removeChild(dice);
                myview.scene.removeChild(slice);
                myview.scene.removeChild(alum);
                myview.scene.removeChild(julie);
                myview.scene.removeChild(bat);
                myview.scene.removeChild(brun);
                removeChild(inst);

                myview.scene.addChild(knife);
                knife.x = -75;
                break;
            case "Batonnet":                    
                //acc2.addEventListener(AccelerometerEvent.UPDATE, onAccUpdate2);
                myview.scene.removeChild(dice);
                myview.scene.removeChild(slice);
                myview.scene.removeChild(alum);
                myview.scene.removeChild(julie);
                myview.scene.removeChild(bat);
                myview.scene.removeChild(brun);
                removeChild(inst);

                myview.scene.addChild(knife);
                knife.x = -75;
                break;
            case "Julienne":
                //acc2.addEventListener(AccelerometerEvent.UPDATE, onAccUpdate2);
                myview.scene.removeChild(dice);
                myview.scene.removeChild(slice);
                myview.scene.removeChild(alum);
                myview.scene.removeChild(julie);
                myview.scene.removeChild(bat);
                myview.scene.removeChild(brun);
                removeChild(inst);

                myview.scene.addChild(knife);
                knife.x = -75;
                break;
            case "Brunoise":
                //acc1.addEventListener(AccelerometerEvent.UPDATE, onAccUpdate);
                myview.scene.removeChild(dice);
                myview.scene.removeChild(slice);
                myview.scene.removeChild(alum);
                myview.scene.removeChild(julie);
                myview.scene.removeChild(bat);
                myview.scene.removeChild(brun);
                removeChild(inst);

                myview.scene.addChild(knife);
                knife.x = -75;
        }

        knife.mouseEnabled = true;
        knife.addEventListener(MouseEvent3D.MOUSE_DOWN, up);
    }

    private function up(event:MouseEvent3D):void{
        if (Accelerometer.isSupported){
            acc1 = new Accelerometer();
            acc2 = new Accelerometer();
            acc3 = new Accelerometer();

            acc1.addEventListener(AccelerometerEvent.UPDATE, onAccUpdate);
        }else{
            // Handle case when the accelerometer is not supported here
        }  
    }

    private function onAccUpdate(e:AccelerometerEvent):void{
        var threshold:Number = 2;
        if(e.accelerationY > threshold){
            knife.rotationX = 45;
            if(knife.rotationX == 45){
                knife.rotationX = -45;
            }
        }
        } 
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:19:00.100

我不认为 BB Playbook 的 AIR 版本支持 Stage3D，最后我听说他们使用的是 AIR 3.1。我读到他们计划用 AIR 3.2 或更高版本更新 SDK，但不确定这是否已经发生。

# google-chrome-extension - 如何在 Chrome 扩展程序列表中设置宣传图片？

> ID：15855373
> 
> 赞同：3
> 
> 时间：2013-04-06T19:56:08.290
> 
> 标签：google-chrome-extension, chrome-web-store

我可以看到很多 Chrome 扩展在列表中都有宣传图片。例如使用 gmail： [https ://chrome.google.com/webstore/search-extensions/gmail?hl=fr&utm_source=chrome-ntp-launcher](https://chrome.google.com/webstore/search-extensions/gmail?hl=fr&utm_source=chrome-ntp-launcher)

我找不到在开发者仪表板中设置此图像的位置。如何 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-06T21:15:13.180

访问[开发人员仪表板](https://chrome.google.com/webstore/developer/dashboard)并单击编辑链接。
向下滚动（在屏幕截图部分下方），并为您的扩展上传图片：

![](https://i.stack.imgur.com/IoqZc.png)

图片上传后将被放入审核队列。如果图片符合[宣传图片的标准](https://developers.google.com/chrome/web-store/docs/images?hl=en#promo)，它将在几天内出现在网上商店中。

当图像获得（拒绝）批准时，您不会收到*任何通知。*向 cws-assets@google.com 发送消息以查询图片的状态。不，您无法在仪表板上看到状态，这与[官方文档](https://developers.google.com/chrome/web-store/docs/images#promo)所述相反。

# angularjs - Angular.js：在嵌套的嵌入中包装元素

> ID：15855382
> 
> 赞同：8
> 
> 时间：2013-04-06T19:57:43.930
> 
> 标签：angularjs, angularjs-directive

这似乎是一件很简单的事情，但我就是不知道该怎么做。

这是我想要的：

```
<my-buttons>
  <my-button ng-click="doOneThing()">abc</my-button>
  <my-button ng-click="doAnotherThing()">def</my-button>
</my-buttons> 
```

这变成了这样的事情：

```
<ul class="u">
  <li class="l"><button ng-click="doOneThing()">abc</button></li>
  <li class="l"><button ng-click="doAnotherThing()">def</button></li>
</ul> 
```

注意它`ng-click`是如何在`button`包装内的`li`。但是，正常的嵌入会将`ng-click`.`li`

我最好的尝试是在这个小提琴上：http: [//jsfiddle.net/WTv7k/1/](http://jsfiddle.net/WTv7k/1/)我已经用一个类替换了 ng-click，所以很容易看出它什么时候有效，什么时候无效。

关于如何完成这项工作的任何想法？如果它真的很简单，也许首页上的选项卡/窗格示例可以扩展为包含窗格周围的包装器，同时仍保留属性。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T18:10:21.090

使用*replace:true*替换过程将所有属性/类从旧元素（*<my-button ...>*）迁移到新元素（模板中的根元素，*<li ...>*）。Transclude 将旧元素的内容移动到指定的 (ng-transclude) 元素。我不确定是否有一种简单的方法可以更改模板中将接收迁移属性的元素。

为了实现您想要的，您可能可以在 my-button 指令中的自定义编译函数中进行一些 dom 操作。但是，我认为在 my-button 指令中创建一个新的隔离范围会更好：

```
<my-buttons>
  <my-button click-fn="doOneThing()">abc</my-button>
  <my-button click-fn="doAnotherThing()">def</my-button>
</my-buttons> 
```

（请注意，我已将 ng-click 更改为 click-fn）

```
module.directive('myButtons', function () {
  return {
    restrict:'E',
    transclude:true,
    replace:true,
    template:'<ul class="u" ng-transclude></ul>'
  }
});

module.directive('myButton', function () {
  return {
    scope:{clickFn:'&'},
    restrict:'E',
    transclude:true,
    replace:true,
    template:'<li class="l"><button ng-click="clickFn()" ng-transclude></button></li>'
  }
}); 
```

我还制作了[你的 fiddle 的工作版本](http://jsfiddle.net/UWEsN/)。

要了解隔离作用域的工作原理（*作用域：{clickFn:'&'}*），我建议您阅读 [有关指令的角度指南](http://docs.angularjs.org/guide/directive)。

# javascript - 你能把一张画布放在另一张画布里面吗？

> ID：15855383
> 
> 赞同：1
> 
> 时间：2013-04-06T19:57:45.220
> 
> 标签：javascript, canvas, easeljs

基本上，我有 2 个 javascript（带有添加脚本的easelJS）在我的 html 索引文件中的 2 个不同的画布元素上运行。

我想知道，我是否可以将这两个“包装”在一个主要的画布元素中，从而有更多的能力来玩它们的布局，而不是依赖于 html/css 定位。

可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:00:13.870

嵌套`canvas`在另一个内部`canvas`是可能的。说这样的话：

```
<canvas id="outer">
    <canvas id="inner"></canvas>
</canvas> 
```

不确定这是否回答了您的问题，但您可以参考[Canvas inside canvas of html5](https://stackoverflow.com/questions/11625767/canvas-inside-canvas-of-html5)了解更多信息。

# shell - Visual Basic for Applications (VBA) 外壳

> ID：15855386
> 
> 赞同：0
> 
> 时间：2013-04-06T19:58:19.473
> 
> 标签：shell, vba, command-line-arguments, putty

我想在 Excel 中使用 VBA 在我的 linux 服务器上调用一个脚本。为此，我使用了路径中的本地 Putty 副本。

我已经成功编写了一个命令来创建一个腻子会话并登录到服务器，我只是不确定如何在 shell 中打开另一个命令后传递另一个命令。

有任何想法吗？

以下子例程有效，但在尝试第二个命令时会导致问题。

干杯

```
Sub test()
Dim putty As String
Dim strCommand As String
Dim strCommand1 As String
Dim User As String
Dim Pass As String
Dim Host As String
Dim File As String
Dim RemotePath As String

putty = """" & Range("E3").Text & "\Putty.exe"""
User = Range("E8").Text
Pass = Range("E9").Text
Host = Range("E7").Text
'File = """" & Range("E11").Text & """"
RemotePath = Range("E10").Text

strCommand = putty & " -l " & User & " -pw " & Pass & _
    " " & File & " " & Host & ":" & RemotePath
'MsgBox strCommand
Shell strCommand, 1 ' vbNormalFocus '
Module2.WaitFor (5)
Shell "ls -l > shell.log", 1
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:47:12.337

使用其他工具执行 shell 命令[plink](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html) 通过以下代码执行此命令：

```
Private Declare Function WaitForSingleObject Lib "kernel32" (ByVal hHandle As Long, ByVal dwMilliseconds As Long) As Long
Private Declare Function OpenProcess Lib "kernel32" (ByVal dwDesiredAccess As Long, ByVal bInheritHandle As Long, ByVal dwProcessId As Long) As Long
Private Declare Function CloseHandle Lib "kernel32" (ByVal hObject As Long) As Long

Sub ShellAndWait(ByVal program_name As String, _
    ByVal window_style As VbAppWinStyle)
Dim process_id As Long
Dim process_handle As Long

    ' Start the program.
    On Error GoTo ShellError
    process_id = Shell(program_name, window_style)
    On Error GoTo 0

    DoEvents

    ' Wait for the program to finish.
    ' Get the process handle.
    process_handle = OpenProcess(SYNCHRONIZE, 0, process_id)
    If process_handle <> 0 Then
        WaitForSingleObject process_handle, INFINITE
        CloseHandle process_handle
    End If

    Exit Sub

ShellError:
    MsgBox Err.Description, vbOKOnly Or vbExclamation, "Error"
End Sub

ShellAndWait "plink -pw password -noagent user@server.com ""rm -f /tmp/file.txt ; gunzip /tmp/file.txt.gz""", vbMaximizedFocus 
```

# java - 编写未知长度的 Wav 文件 (Java)

> ID：15855394
> 
> 赞同：0
> 
> 时间：2013-04-06T19:58:53.147
> 
> 标签：java, audio, wav

我正在尝试为我编写的一些音频处理软件添加一个功能。

我的软件已经从麦克风输入捕获声音，实时处理它，并将结果发送到扬声器输出。（这已经是一个线程应用程序。）我一直在使用 javax.sound.sampled.* 并处理 wav 数据（将其转换为数字样本或从数字样本转换以进行处理。

我想添加一个功能，将使用该软件的会话的原始输入和转换后的输出保存到 wav 文件中。但是创建新 wav 文件的签名（例如，WavFile.newWavFile(...) 似乎想提前知道它将接收多少帧数据。由于这些是不确定时间的实时会话，我没有事先了解这些信息的方法。

我错过了什么吗？除了保存数据或样本文件然后对其进行后处理之外，还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:13:55.257

大多数音频文件编写者在写入输出流之前需要知道完整的文件大小。[有一个名为Tritonus](http://tritonus.org/)的开源项目，它是 Java 声音 API 的一个实现，它有一个 AudioOutputStream 插件，你可以试试。

# service - AngularJS 使用 $http 和 $q 测试服务

> ID：15855398
> 
> 赞同：1
> 
> 时间：2013-04-06T19:59:42.367
> 
> 标签：service, angularjs, jasmine, promise, karma-runner

我是 AngularJS 和一般 JS 测试的新手，我在思考如何测试这个相当简单的服务时遇到了麻烦。我尝试在变体配置中使用 $httpBackend 和 'when' 和 'expect' GET，但无济于事。测试应验证 1) 数据通过 deferred.resolve 返回，2) 没有数据通过 deferred.reject 返回。如果有人能指出我正确的方向，我将不胜感激。谢谢！

顺便说一句：我正在使用 Jasmine + Testacular

```
.service('myService', function($http, $q) {
    return {
        getMyData: function() {
            var deferred = $q.defer();

            $http.get('/foo/bar.do').success(function(data) {
                deferred.resolve(data);
            }).error(function(){
                deferred.reject();
            });

            return deferred.promise;
        }
    }
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T23:57:26.300

我在使用 $http 和 $q 测试服务时遇到了同样的问题。这是我通过的测试之一：

```
it('should issue a GET request to /foo/bar.do', inject(function ($httpBackend) {
  $httpBackend.when('GET', '/foo/bar.do').respond('success');
  var finalResult = '';

  var result = myService.getMyData();

  result.then(function(data) {
    finalResult = data;
  }, function() {
    console.log('error');
  });

  $httpBackend.flush();

  expect(finalResult).toBe('success');
})); 
```

# ios - 尝试使用 NSFetchedResultsController 将 CoreData 集成到我的 UITableView 中，但是一旦应用启动它就会失败

> ID：15855399
> 
> 赞同：1
> 
> 时间：2013-04-06T19:59:44.703
> 
> 标签：ios, objective-c, core-data, nsfetchedresultscontroller

我一直在按照[本](http://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller)教程学习 T，但是当我运行我的应用程序时，每次启动时都会失败，并出现以下错误：

> ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“+entityForName：nil 不是搜索实体名称“ArticleInfo”的合法 NSManagedObjectContext 参数

但我无法弄清楚我做错了什么会导致这种情况。作为我所做工作的背景，我有一个数据模型文件，其中包含一个名为 ArticleInfo 的实体，该实体具有一堆不同类型的属性（一些临时属性，如果需要注意的话）。按照本文的建议，[我](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)将其分类`NSManagedObject`为`ArticleInfo`.

如果值得注意的话，我在数据模型中创建了`preview`,`wordsInBody`和`progress`瞬态（我在数据模型检查器中给出`position`了默认值）。`0`因此，在子类中，我制作了如下自定义 getter：

```
- (NSString *)preview {
    [self willAccessValueForKey:@"preview"];
    NSString *preview = [self primitiveValueForKey:@"preview"];
    [self didAccessValueForKey:@"preview"];

    if (self.body.length < 200) {
        preview = self.body;
    }
    else {
        preview = [self.body substringWithRange:NSMakeRange(0, 200)];
    }

    return preview;
}

- (NSNumber *)progress {
    [self willAccessValueForKey:@"progress"];
    NSNumber *progress = [self primitiveValueForKey:@"progress"];
    [self didAccessValueForKey:@"progress"];

    if (self.body.length == 0) {
        progress = @100;
    }
    else {
        progress = @(100 * [self.position intValue] / [self.wordsInBody intValue]);
    }

    return progress;
}

- (NSNumber *)wordsInBody {
    [self willAccessValueForKey:@"wordsInBody"];
    NSNumber *wordsInBody = [self primitiveValueForKey:@"wordsInBody"];
    [self didAccessValueForKey:@"wordsInBody"];

    if (!wordsInBody) {
        __block int numberOfWordsInBody = 0;
        NSRange range = {0, self.body.length};
        [self.body enumerateSubstringsInRange:range options:NSStringEnumerationByWords usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
            numberOfWordsInBody++;
        }];

        wordsInBody = @(numberOfWordsInBody);
    }

    return wordsInBody;
} 
```

（同样，不确定这是否相关。）

现在在我的主 viewcontroller 类（具有我正在使用的 tableview 的那个`NSFetchedResultsController`）中，我声明了该属性，并覆盖了它的 getter：

在.h中：

```
@property (nonatomic, strong) NSFetchedResultsController *fetchedResultsController; 
```

以 .m 为单位：

```
- (NSFetchedResultsController *)fetchedResultsController {
    if (!_fetchedResultsController) {
        NSManagedObjectContext *context = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
        NSEntityDescription *entity = [NSEntityDescription entityForName:@"ArticleInfo" inManagedObjectContext:context];
        NSFetchRequest *request = [[NSFetchRequest alloc] init];
        request.entity = entity;

        NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"timeStamp" ascending:NO];
        request.sortDescriptors = [NSArray arrayWithObject:descriptor];

        request.fetchBatchSize = 20;

        NSFetchedResultsController *fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:context sectionNameKeyPath:nil cacheName:@"Root"];
        _fetchedResultsController = fetchedResultsController;
        _fetchedResultsController.delegate = self;
    }

    return _fetchedResultsController;
} 
```

但同样，它在应用启动时一直给我这个错误。我到底做错了什么导致该错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:17:54.380

NSEntityDescription *entity = [NSEntityDescription entityForName:@"ArticleInfo" inManagedObjectContext:context]

这里的东西是零。记录上下文和实体以查看哪个。也许您模型中的实体名称不是“ArticleInfo”（错字？），或者您的应用程序委托在创建上下文时遇到问题。

# cocos2d-iphone - 物理学，像汽车一样转动

> ID：15855403
> 
> 赞同：0
> 
> 时间：2013-04-06T20:00:00.070
> 
> 标签：cocos2d-iphone, physics, chipmunk, car-analogy

我很难让花栗鼠物理引擎做我想做的事。唯一可行的解​​决方案需要一些繁重的矢量数学。在为我的游戏的其他组件潜入那个兔子洞之前，我希望有人能以更好的方式来填补我的空白。想要的游戏玩法如下：

*   人物在自上而下的视图中在有限空间内移动
*   在角色面对的任何方向上，运动始终是一个恒定的速度
*   玩家点击屏幕，这会导致角色“转向”触摸的位置

基本思想就像开车。您不能立即掉头，而是必须先掉头。那辆车还必须保持恒定的速度。我该怎么做？额外的问题：您如何覆盖花栗鼠调用的任何方法来更新身体的位置，这是一个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T23:00:17.930

有本教程介绍如何使用特殊配置的关节进行自上而下的控制：http: [//chipmunk-physics.net/tutorials/ChipmunkTileDemo/](http://chipmunk-physics.net/tutorials/ChipmunkTileDemo/)

它基于 Chipmunk Pro，但关于控制角色的内容很容易适应原版 Chipmunk。如果您想查看一些 C 代码，非 Pro Chipmunk 源附带的“坦克”演示实现了几乎相同的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T04:49:51.253

您基本上希望更渐进地旋转播放器的方向。您可以以恒定速率执行此操作，因此当您点击屏幕时，它将开始以恒定速率旋转，直到达到正确的方向。这将给出一个圆形转弯圈。但是，这会影响您的位置，因此您必须继续转动，直到您与您点击的位置发生碰撞。您将要走的路径类似于游戏 Achtung die kurve 的路径。

因此，您必须保存玩家的位置和方向（x、y 和 phi 坐标）。要确定是否停止转动，您可以执行以下操作：

```
dx = playerx - tapx;
dy = playery - tapy;
targetAngle = atan2(dy,dx);
if (phi > targetAngle)
    {
    if (phi - targetAngle > PI) omega = rotate;
    else omega = -rotate;
    }
else if (phi < targetAngle)
    {
    if (targetAngle - phi > PI) omega = -rotate;
    else omega = rotate;
    }
else omega = 0; 
```

# python-2.7 - 在 OpenCV for python 中找到用 CornerHarris 方法标记的角的坐标

> ID：15855409
> 
> 赞同：2
> 
> 时间：2013-04-06T20:00:48.417
> 
> 标签：python-2.7, opencv, image-processing, computer-vision, corner-detection

我试图找到 HarrisCorner 方法在我的图像上标记的所有形状的坐标。

我已经设置好了，所以它标记了正确的角落并显示了正确的结果，但我不知道在说完之后在哪里可以找到坐标。我需要一个由该算法标记的所有角的列表，以便我可以找到它们的面积、重心、形状和大小。另外，我有每个形状中包含的所有像素的列表，因此我很容易将坐标与相应的形状相匹配。如果这是一个绿色问题，我很抱歉。我一直在阅读我能找到的所有内容。感谢 OpenCV 专业人士！

```
 im = cv.LoadImage("image.jpg")
    imgray = cv.LoadImage("image.jpg", cv.CV_LOAD_IMAGE_GRAYSCALE)

    cornerMap = cv.CreateMat(im.height, im.width, cv.CV_32FC1)
    cv.CornerHarris(imgray,cornerMap,3)
    for y in range(0,imgray.height):
       for x in range (0, imgray.width):
          harris = cv.Get2D(cornerMap, y, x)
          if harris[0] >10e-06:
              temp = cv.Circle(im, (x,y),2,cv.RGB(115,0,25))

    cv.ShowImage('my window', im)
    cv.SaveImage("newimage3.jpg",im)
    cv.WaitKey() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:24:53.170

角点是角点测试通过的 (x,y) 坐标：

```
if harris[0] > 10e-06 
```

# macos - Automator 服务的脚本，用于删除回车并用它们替换应用程序中的逗号和空格

> ID：15855412
> 
> 赞同：0
> 
> 时间：2013-04-06T20:00:57.380
> 
> 标签：macos, shell, automator

使用 automator 我想创建一个允许我获取列表的服务

前任。

```
list item 1
list item 2
list item 3
list item 4 
```

并删除回车回车并用逗号和空格替换它们`,`

前任。

```
list item 1, list item 2, list item 3, list item 4 
```

在我的研究中，我遇到了各种删除空格或回车的方法，但它们看起来都像这样：

```
sed 's/[:space:]+/,/g' orig.txt > modified.txt 
```

我很可能错过了我正在寻找的功能。无论如何，我都不是程序员，有时所说或描述的事情会超出我的想象。

创建一个文本文档然后修改它对我不起作用。我需要能够在创建文档之前对其进行修改。

这可能吗？

我的目标是获得一个可以输入到 Automator 服务的脚本，该脚本将允许我在应用程序中选择文本，右键单击，选择允许我删除回车并用逗号替换它们的预制函数和空间。

如果实际上之前已经提出过这个确切的问题，那么也感谢文章的链接。

任何帮助表示赞赏。

谢谢大家！

弗洛伊德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:43:12.197

选择服务模板，检查输出替换选定的文本，并添加这样的运行 shell 脚本操作并选择传递输入作为参数：

```
x=${1%$'\n'}
printf %s "${x//$'\n'/, }"
[[ "$1" != "$x" ]] && printf '\n\n' || exit 0 
```

*   `${var%pattern}`从末尾删除一个模式
*   `${var//search/replace}`替换所有出现
*   `printf %s`就像`echo -n`（它不添加额外的换行符）
*   如果脚本没有以 0 退出，Automator 会显示错误对话框

# javascript - 在 asp.net mvc3 中创建一个下拉列表

> ID：15855414
> 
> 赞同：0
> 
> 时间：2013-04-06T20:01:03.327
> 
> 标签：javascript, asp.net-mvc, web

我正在使用 asp.net MVC4 开发简单的 Web 应用程序

我想知道如何在 asp.net mvc4 中创建一个下拉列表

在我的应用程序中，我不想使用“ID_Sous_Type”，但我想从“Sous_Type”类加载列表

[http://i.stack.imgur.com/qf1C4.jpg](http://i.stack.imgur.com/qf1C4.jpg)

我在我的索引方法中写了这段代码：

```
 var GenreLst = new List<string>();

        var GenreQry = from d in secdb.SousTypes
                       orderby d.ID_Sous_Type
                       select d.Nom_Sous_Type;
        GenreLst.AddRange(GenreQry.Distinct());

        ViewBag.types = new SelectList(GenreLst); //Can't load this 
```

在我看来 ：

```
 @Html.DropDownList("types") 
```

**更新 ！**

我正在处理一个表单来检索数据并将其保存在我的表中我有两个表，Task 和 TaskType For Task，创建页面就是这样。 [http://i.stack.imgur.com/qf1C4.jpg](http://i.stack.imgur.com/qf1C4.jpg)

对于最后一个字段“ID_Sous_Type”，我想加载列表（来自其他表 TaskType）以提供良好的用户界面，用户可以在其中以更好的方式选择合适的类型（给出 ID_Sous_Type 不是那么容易理解）
为此，我会喜欢在下拉列表中加载（TaskType）的名称

在我的索引控制器中：我创建了 . var GenreLst = new List();

//这里我从TaskType表中得到了所有的名字

```
var GenreQry = from d in secdb.SousTypes
               orderby d.ID_Sous_Type
               select d.Nom_Sous_Type; 

GenreLst.AddRange(GenreQry.Distinct()); 
```

然后我添加了 Ranges 以轻松获取它，但我无法在下拉列表中“绑定”它，我想知道如何！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:19:35.130

如果我理解正确，您的 ViewBag.types 缺少一些重要信息，这就是它返回您的列表的原因。它应该是这样的：

```
ViewBag.GenreId = new SelectList(db.Genres, "GenreId","Name"); 
```

请参阅官方 .net 站点上的这篇文章，它应该可以帮助您更好地理解下拉列表。 [http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-5](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-5)

# jsf-2 - 如何进行 JSF 嵌套表绑定。目标不可达异常

> ID：15855415
> 
> 赞同：1
> 
> 时间：2013-04-06T20:01:03.817
> 
> 标签：jsf-2

我正在尝试在 JSF 数据表上实现与具有嵌套数据表的支持 bean 值的绑定，该嵌套数据表与当前数据行的值绑定，请参见以下代码：

```
<h:form prependId="false">
    <h:dataTable  binding="#{tableBean.mainDataTable}" var="row" >
            <h:column>
                <h:dataTable binding="#{row.nestedDataTable}" />
            </h:column>
    </h:dataTable>
</h:form> 
```

这些是支持的 bean 和数据：

```
@ManagedBean
@SessionScoped
public class TableBean implements Serializable{
    private HtmlDataTable mainDataTable;
    private List<TableBeanData> tableBeanDataLst;

    public TableBean() {
        tableBeanDataLst = new ArrayList<TableBeanData>();
        DataModel<TableBeanData> mainDataModel =new  ListDataModel<TableBeanData>(tableBeanDataLst);
        mainDataTable = new HtmlDataTable();
        mainDataTable.setValue(mainDataModel);
    }

    public HtmlDataTable getMainDataTable() {
        return mainDataTable;
    }

    public void setMainDataTable(HtmlDataTable mainDataTable) {
        this.mainDataTable = mainDataTable;
    }

    public List<TableBeanData> getTableBeanDataLst() {
        return tableBeanDataLst;
    }

    public void setTableBeanDataLst(List<TableBeanData> tableBeanDataLst) {
        this.tableBeanDataLst = tableBeanDataLst;
    }
}

public class TableBeanData implements Serializable{
     private HtmlDataTable nestedDataTable;

     public TableBeanData (){
         nestedDataTable = new HtmlDataTable();
     }
    public HtmlDataTable getNestedDataTable() {
        return nestedDataTable;
    }

    public void setNestedDataTable(HtmlDataTable nestedDataTable) {
        this.nestedDataTable = nestedDataTable;
    }
} 
```

但我得到一个未找到属性的异常：

```
/index.xhtml @17,69 binding="#{row.nestedDataTable}": Target Unreachable, indentified 'row' resolved to null 
```

我不太明白，因为我正在初始化构造函数中的数据表。

如何解决此类错误以允许表、嵌套表和数据绑定的这种配置？

# entity-framework - 代码优先：上下文字段为空

> ID：15855416
> 
> 赞同：0
> 
> 时间：2013-04-06T20:01:16.257
> 
> 标签：entity-framework, code-first

这是我的背景：

```
public class ContentContext : DbContext
{
    public ContentContext() : base("Name=CodeFirstDatabase") {  }

    public DbSet<Article> Articles;
    public DbSet<ArticleTag> ArticleTags;
} 
```

连接字符串：

```
<add name="CodeFirstDatabase" providerName="System.Data.SqlClient" connectionString="Server=X-ПК\SQLEXPRESS;Database=Products;Trusted_Connection=true;"/> 
```

全球.asax：

```
Database.SetInitializer(new CreateDatabaseIfNotExists<ContentContext>()); 
```

家庭控制器：

```
 public ActionResult Index()
    {
       ContentContext context = new ContentContext();
       context.Database.Initialize(true);

       Article a = new Article() { Text = "TEXT" };

       context.Articles.Add(a);
       context.SaveChanges();

       return View();
    } 
```

实体：

```
public class Article
{
    public int Id { get; set; }
    public string Author { get; set; }
    public string Text { get; set; }
    public virtual ICollection<ArticleTag> ArticleTags { get; set; }

}

public class ArticleTag
{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual Article Article { get; set; }
} 
```

数据库按预期创建。但没有在其中创建表，当我尝试添加新文章时出现空引用异常。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:06:26.967

更改您`DBSet<>`的`ContentContext`属性（而不是字段）：

```
public DbSet<Article> Articles { get; set; }
public DbSet<ArticleTag> ArticleTags  { get; set; } 
```

# asp.net-mvc-4 - 从 Mvc 控制器使用 WebApi - HttpClient 或参考 API 程序集？

> ID：15855422
> 
> 赞同：2
> 
> 时间：2013-04-06T20:01:57.210
> 
> 标签：asp.net-mvc-4, asp.net-web-api, autofac, dotnet-httpclient

我有一个带有 MVC 应用程序和 Web API 的解决方案。它们位于不同的项目和域中（使用 CORS）。我将其构建为 Web API，以便灵活地添加消费者，但目前我的 MVC 应用程序是唯一的消费者。因此，我正在争论是在我的 MVC 控制器中使用 HttpClient 还是直接实例化 ApiController。

在任何一种情况下，我都在使用依赖注入（Autofac），所以我也想知道如何配置它，因为 HttpClient 或 ApiController 都没有任何类型的接口，我可以像通常那样通过构造函数参数注入，所以我是不知道如何处理。

注入实例的生命周期范围应该是什么？HttpClient 可能应该是 Singleton，因为不鼓励在每次请求后处理它。

**注意**通过调用 API 返回用于填充图表的大型数据集，这就是为什么我稍微远离 HttpClient，因为我觉得使用 Http 会产生额外的开销。直接实例化 ApiController 是反模式吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T00:14:23.590

你总是可以这样做

```
var httpClient = new HttpClient(new HttpServer(GlobalConfiguration.Configuration)); 
```

这允许您继续使用 HttpClient，但请求会直接传递到 WebApi 服务器，而无需发出网络请求。这样，如果您以后决定分离 WebAPI，您的客户端代码不会改变

# perl - Perl 中的“$$q”是什么意思？

> ID：15855426
> 
> 赞同：5
> 
> 时间：2013-04-06T20:02:15.613
> 
> 标签：perl

我正在学习 Perl，我遇到了下面的代码片段：

```
print $$q, "\n" 
```

有一个`$q`变量我们不知道它到底是什么。但是，我们知道当我们运行这段代码时，它会打印`"world"`.

那么，可以`$q`是什么？是什么`$$q`意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T20:04:24.527

在您的情况下`$q`是*标量引用*。所以`$$q`给你一个由引用指向的标量`$q`。简单的例子：

```
$a = \"world"; #Put reference to scalar with string "world" into $a
print $$a."\n"; #Print scalar pointed by $a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T20:19:17.613

```
$$q == ${$q} 
```

`$q`表示一个引用，并且您试图在标量上下文中取消引用它。

有关更多信息，请访问[perlref 文档](http://perldoc.perl.org/perlref.html)。

# javascript - 从 JavaScript 函数生成一组源代码行

> ID：15855428
> 
> 赞同：0
> 
> 时间：2013-04-06T20:02:33.547
> 
> 标签：javascript

我正在尝试从 JavaScript 函数中获取一组行。给定对特定函数的引用，我想返回一个数组，其中每个元素由函数源的单个连续行组成。

### 例子：

```
//the following function will be used as the input for getArrayOfLines, and each line of  functionToUse should be returned as output (represented as a string).
function functionToUse(){
    //This comment here should be included in the array of lines.
    //This is the second line that should be in the array.
}

var funcLines = getArrayOfLines(functionToUse);

// should return: 
// [ "//This comment here should be included in the array of lines.", 
//   "//This is the second line that should be in the array." ] 
```

这是我所在的位置：

```
function getArrayOfLines(theFunction){
    //return an array of lines from the function that is entered as input.
    //each line should be represented as a string
    var theString = theFunction.toString();
    // now I'll need to generate an array of lines from the string, 
    // and then return the array
} 
```

主要是，我试图这样做，以便我可以评估函数的每一行（一次一行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:07:15.517

很简单 - 您需要做的就是使用`stringtoSplit.split("\n")`来获取行数组。

jsfiddle 上的演示：http: [//jsfiddle.net/FDCh6/2/](http://jsfiddle.net/FDCh6/2/)

```
function getArrayOfLines(theFunction){
    var theString = theFunction.toString();
    //now I'll need to generate an array of lines from the string, and then return the array
    var arrToReturn = theString.split("\n");
    return arrToReturn.slice(1, arrToReturn.length-1);
}

function functionToUse(){
    //This comment here should be included in the array of lines.
    //This is the second line that should be in the array.
}

alert(getArrayOfLines(functionToUse)); //get the array of lines from functionToUse 
```

# mspec - 多个因为语句可以在 MSpec 中共享相同的断言吗？

> ID：15855430
> 
> 赞同：2
> 
> 时间：2013-04-06T20:02:36.460
> 
> 标签：mspec

我有一个简单的 MSpec 测试，其中我将一个空值传递给语句`string`中的方法参数（类型） 。然后我检查语句`Because`中是否引发了异常。`It`

```
Because _of = () => _exception = Catch.Exception(() => foo(null));
It should_throw_an_exception = () =>_exception.ShouldBeOfType<Exception>(); 
```

当参数为空字符串并且断言应该保持不变时，我需要另一个测试。我可以编写另一个测试，复制代码。

或者，有没有更简洁的方法在 MSpec 中进行这种测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T23:41:38.917

对于这样的事情，我宁愿使用 NUnit 的 TestCaseAttribute 来针对相同的代码验证输入参数的所有组合。MSpec 并不是最好的工具，因为它不支持上面提到的测试生成器。行为可能会有所帮助，但只会对 It 进行重复数据删除。恕我直言，为您发布的内容混合测试框架并没有错。

# android - weightSum 无法正常工作

> ID：15855437
> 
> 赞同：0
> 
> 时间：2013-04-06T20:03:27.150
> 
> 标签：android, android-linearlayout, android-imageview, textview

我有一个`LinearLayout`和在线性布局中我有一个`ImageView`和一个`TextView`。我想为每个设置 %50 宽度。我使用`weightSum`and`layout_weight`用于此目的，但我的它不起作用。如何为每个视图设置 50% 的宽度

正如您在下面看到的，重量 = 10 并且重量`TextView`为`ImageView`5

![在此处输入图像描述](https://i.stack.imgur.com/zPjAi.jpg)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/my_root"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_margin="0dp"
android:background="#3e4231"
android:orientation="vertical"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context="com.hakkikonu.countriesultimate.CountryDetails" >

<TextView
    android:id="@+id/tv_show_extra"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="0dp"
    android:layout_marginTop="0dp"
    android:background="#ff4444"
    android:text="Country Name"
    android:textColor="#FFFFFF"
    android:textSize="24sp" />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="10" >

    <ImageView
        android:id="@+id/iv_bayrak_goster"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="5"
        android:adjustViewBounds="true"
        android:baselineAlignBottom="false"
        android:src="@drawable/default_flag" />

    <TextView
        android:id="@+id/tv_capital"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="0dp"
        android:layout_marginTop="0dp"
        android:background="#ff4444"
        android:text="Capital"
        android:textColor="#FFFFFF"
        android:textSize="16sp" 
        android:layout_weight="5"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:07:50.080

对于 weightsum 为 10 的布局，将 android:layout_width 设置为 0dp 而不是匹配父级。

# ios - AFXMLRequestOperation 与 Google 文档

> ID：15855443
> 
> 赞同：0
> 
> 时间：2013-04-06T20:04:17.377
> 
> 标签：ios, objective-c, google-docs-api

我尝试了几种不同的方法来使用 AFNetworking 从谷歌文档中提取内容。

1.  我已经修改了可接受的内容类型。
2.  使用 AFKiss 功能
3.  使用常规的 AFHttp 操作

仍然无法从以下代码中获取任何内容。如果有人有一些想法，应该可以重现。

> NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@" [https://spreadsheets.google.com/feeds/worksheets/0AhNgJb3GRiT3dEFkYmJVQ1pUUXBpdWlOYjFBMUtpOEE/private/full](https://spreadsheets.google.com/feeds/worksheets/0AhNgJb3GRiT3dEFkYmJVQ1pUUXBpdWlOYjFBMUtpOEE/private/full) "]];

```
AFXMLRequestOperation *operation = [AFXMLRequestOperation XMLParserRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, NSXMLParser *XMLParser) {
    NSLog(@"Finished");
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, NSXMLParser *XMLParse) {
    NSLog(@"Failed");
}];
[operation start]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:09:22.560

*无需登录 Google 帐户即可*在浏览器中查看该链接。它没有任何内容，因此无论您如何尝试都无法加载 xml。

您需要在您的应用中添加 Google 身份验证才能查看其显示的电子表格。可以[在移动应用程序中的身份验证用户](https://developers.google.com/accounts/docs/MobileApps)指南中找到信息。

# java - 具有 matlab 等效功能的 Java 库

> ID：15855454
> 
> 赞同：1
> 
> 时间：2013-04-06T20:05:25.503
> 
> 标签：java, matlab, matrix, scientific-computing

我正在寻找一个 Java 库，它与 matlab 的 Matrix 函数以及可能在多项式插值等领域的其他函数密切相关。

如果不存在这样的库，我正在考虑构建自己的库，但使用现有的 Matrix 或科学计算库来完成繁重的工作 - 如果我这样做，哪些库将成为此类库的候选者努力

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:15:27.920

[Eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page)是 C++ 中最常用（也是最快）的矩阵计算库之一，它有一个 java 包装器：[jeigen](https://github.com/hughperkins/jeigen)。

它允许人们操纵完整和稀疏的矩阵，并使操作成为其中之一。它也值得一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T03:48:56.493

Try to look at [la4j](http://la4j.org) (Linear Algebra for Java). It supports dense matrices as well as sparse ones. Here is just a brief example of using functional features of la4j:

```
// reads the dense matrix from the CSV file
Matrix a = new Basic2DMatrix(Mattrices.asSymbolSeparatedSource("matrix.csv", ","));

// calculates the sum of all elements of the matrix 'a'
double sum = a.fold(Matrices.asSumAccumulator(0));

// creates a new matrix 'b', that contains elements of matrix 'a' multiplied by '2'.
Matrix b = a.transform(Matrices.asMulFunction(2)); 
```

The best way to get the last version of la4j - visit it's [GitHub page](https://github.com/vkostyukov/la4j).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T20:08:17.163

查看以下资源/包

1.  [http://math.nist.gov/javanumerics/jama/](http://math.nist.gov/javanumerics/jama/)

2.  [http://www.jscience.org/](http://www.jscience.org/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-15T13:59:23.903

我使用 Colt 库进行矩阵运算。

参见： [http ://acs.lbl.gov/software/colt/api/index.html](http://acs.lbl.gov/software/colt/api/index.html)

我认为它非常好用且易于使用，并且比我已经尝试过的 Apache Commons-Math 和 EJML 更好。

我建议您尝试所有提到的库并选择更接近您需求的库。

# java - Spring MVC 中的组件扫描

> ID：15855460
> 
> 赞同：3
> 
> 时间：2013-04-06T20:06:06.870
> 
> 标签：java, spring, spring-mvc

我正在学习 Spring MVC，并使用上下文侦听器创建了一个根 Web 应用程序上下文。根据我的阅读，这用于声明服务 bean 等 bean，并且调度程序 servlet 从根上下文继承。

我在根上下文中添加了组件扫描 XML 元素。它扫描所有包，包括带有`@Controller`. 那么，为什么在我在调度程序上下文中添加另一个组件扫描之前，控制器的 URL 没有呢？它会是重复的bean定义吗？这甚至是正确的吗？

我是否应该在根上下文中仅针对服务包等添加组件扫描，然后在调度程序上下文中仅针对控制器包添加组件扫描元素？

*从上下文文件中删除了命名空间。*

从调度程序上下文：

```
<beans>
    <!--<context:component-scan base-package="com.mycompany.controller"/>-->
    <mvc:annotation-driven/>    
</beans> 
```

根上下文：

```
<beans>
    <context:component-scan base-package="com.mycompany"/>
</beans> 
```

web.xml

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
          http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
         version="3.0">

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/applicationContext.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>defaultServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/webContext.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>defaultServlet</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

# c# - 在 MVC 中重定向来自旧网站的请求

> ID：15855462
> 
> 赞同：3
> 
> 时间：2013-04-06T20:06:19.387
> 
> 标签：c#, asp.net-mvc, redirect

我使用 ASP.Net MVC 3 为客户端构建了一个网站，该网站旨在替换我没有构建并用 PHP 编写的旧网站。

我在新网站上的大部分页面都映射到原来的旧页面，例如 www.mysite.com/contactus 曾经是 www.mysite.com/contactus.php

在查看了我的错误日志（由 Elmah 记录）后，我收到了一些旧页面请求的错误，如下所示：

找不到路径“/ContactUs.php”的控制器或未实现 IController。

是否有人对如何纠正此问题提出建议，理想情况下将用户重定向到新目的地（如果存在），或者只是将它们默认为主页。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T20:17:42.093

您应该能够使用 web.config 中的 IIS 重写规则来执行此操作：

```
<rewrite>
  <rules>
    <rule name="Remove .php suffix">
      <match url="^(.*).php$" />
      <action type="Rewrite" url="{R:1}" />
    </rule>
  </rules>
</rewrite> 
```

这应该去除任何传入请求的“.php”后缀。有关更多信息，请参见此处：[http ://www.iis.net/learn/extensions/url-rewrite-module/creating-rewrite-rules-for-the-url-rewrite-module](http://www.iis.net/learn/extensions/url-rewrite-module/creating-rewrite-rules-for-the-url-rewrite-module)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T20:21:20.973

You can use this route:

```
routes.MapRoute(
    name: "oldphp",
    url: "{*path}",
    defaults: new { controller = "PhpRedirect", action="Get" },
    constraints: new { path = @".*\.php" }); 
```

And then implement `PhpRedirectController` like this:

```
public class PhpRedirectController : Controller
{
    [HttpGet]
    public ActionResult Get(string path)
    {
        // TryGetNewUrl should be implemented to perform the
        // mapping, or return null is there is none.
        string newUrl = TryGetNewUrl(path);
        if (newUrl == null)
        {
            // 404 not found
            return new HttpNotFoundResult();
        }
        else
        {
            // 301 moved permanently
            return RedirectPermanent(newUrl);
        }
    }
} 
```

# asp.net - 每个请求使用一个会话，如何处理更新子对象

> ID：15855463
> 
> 赞同：0
> 
> 时间：2013-04-06T20:06:23.047
> 
> 标签：asp.net, nhibernate, fluent-nhibernate, repository, webforms

在尝试修改子对象然后保存父对象时，我的 ASP.NET WebForms 应用程序中的 Fluent Nhibernate 遇到了一些严重问题。

我的解决方案目前由 2 个项目组成：

*   核心：所有实体和存储库类都位于的类库
*   网站：ASP.NET 4.5 WebForms 应用程序

这是我的 Employee 对象的简单映射：

```
public class EmployeeMap : ClassMap<Employee>
{
    public EmployeeMap()
    {
        Id(x => x.Id).GeneratedBy.Identity();
        Map(x => x.DateCreated);
        Map(x => x.Username);
        Map(x => x.FirstName);
        Map(x => x.LastName);
        HasMany(x => x.TimeEntries).Inverse().Cascade.All().KeyColumn("Employee_id");
    }
} 
```

这是我对 TimeEntry 对象的映射：

```
public class TimeEntryMap : ClassMap<TimeEntry>
{
    public TimeEntryMap()
    {
        Id(x => x.Id).GeneratedBy.Identity();
        Map(x => x.DateCreated);
        Map(x => x.Date);
        Map(x => x.Length);
        References(x => x.Employee).Column("Employee_id").Not.Nullable();
    }
} 
```

如标题所述，我在我的网络应用程序中使用每个请求一个会话，在 Gobal.asax 中使用此代码：

```
 public static ISessionFactory SessionFactory = Core.SessionFactoryManager.CreateSessionFactory();

    public static ISession CurrentSession
    {
        get { return (ISession)HttpContext.Current.Items["current.session"]; }
        set { HttpContext.Current.Items["current.session"] = value; }
    }

    protected Global()
    {
        BeginRequest += delegate
        {
            System.Diagnostics.Debug.WriteLine("New Session");
            CurrentSession = SessionFactory.OpenSession();
        };
        EndRequest += delegate
        {
            if (CurrentSession != null)
                CurrentSession.Dispose();
        };
    } 
```

另外，这是我的 SessionFactoryManager 类：

```
public class SessionFactoryManager
{
    public static ISession CurrentSession;

    public static ISessionFactory CreateSessionFactory()
    {
        return Fluently.Configure()
        .Database(MsSqlConfiguration.MsSql2008.ConnectionString(c => c.FromConnectionStringWithKey("Website.Properties.Settings.WebSiteConnString")))
        .Mappings(m => m
        .FluentMappings.AddFromAssembly(Assembly.GetExecutingAssembly()))
        .ExposeConfiguration(cfg => new SchemaUpdate(cfg).Execute(false, true))
        .BuildSessionFactory();
    }

    public static ISession GetSession()
    {
        return (ISession)HttpContext.Current.Items["current.session"];
    }
} 
```

这是我的存储库类之一，我用来处理 Employee 的对象数据操作：

```
public class EmployeeRepository<T> : IRepository<T> where T : Employee
{
    private readonly ISession _session;

    public EmployeeRepository(ISession session)
    {
        _session = session;
    }

    public T GetById(int id)
    {
        T result = null;
        using (ITransaction tx = _session.BeginTransaction())
        {
            result = _session.Get<T>(id);
            tx.Commit();
        }
        return result;
    }

    public IList<T> GetAll()
    {
        IList<T> result = null;
        using (ITransaction tx = _session.BeginTransaction())
        {
            result = _session.Query<T>().ToList();
            tx.Commit();
        }
        return result;
    }

    public bool Save(T item)
    {
        var result = false;
        using (ITransaction tx = _session.BeginTransaction())
        {
            _session.SaveOrUpdate(item);
            tx.Commit();
            result = true;
        }
        return result;
    }

    public bool Delete(T item)
    {
        var result = false;
        using (ITransaction tx = _session.BeginTransaction())
        {
            _session.Delete(_session.Load(typeof (T), item.Id));
            tx.Commit();
            result = true;
        }
        return result;
    }

    public int Count()
    {
        var result = 0;
        using (ITransaction tx = _session.BeginTransaction())
        {
            result = _session.Query<T>().Count();
            tx.Commit();
        }
        return result;
    }
} 
```

现在，这是我的问题。当我尝试插入员工时，一切都很好。更新也是完美的......好吧，只要我不更新Employee的“TimeEntries”属性中引用的TimeEntry对象之一......

这是引发异常的地方（在 Web 项目的 ASPX 文件中）：

```
 var emp = new Employee(1);
            foreach (var timeEntry in emp.TimeEntries)
            {
                timeEntry.Length += 1;
            }
            emp.Save(); 
```

这是引发的异常：

> [NonUniqueObjectException：具有相同标识符值的不同对象已与会话相关联：1，实体：Core.Entities.Employee]

基本上，每当我尝试

1.  加载员工和
2.  修改一个已保存的`TimeEntry`，我得到了那个异常。

仅供参考，我尝试将`SaveOrUpdate()`存储库中的`Merge()`. 它做得很好，但是在使用创建对象时`Merge()`，我的对象永远不会设置它的 ID。

我还尝试在我的存储库的每个函数中创建和刷新`ISession`。这是没有意义的，因为一旦我试图加载`TimeEntries`一个 Employee 的属性，就会引发一个异常，说当 ISession 关闭时，该对象不能被延迟加载......

我迷路了，希望能得到一些帮助。也欢迎对我的存储库提出任何建议，因为我对此很陌生。

谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:48:33.287

这个[StackOverflow 答案](https://stackoverflow.com/a/171017/314763)对使用合并给出了很好的描述。

## 但...

我相信您在为您的应用程序设置正确的会话模式时遇到了问题。

我建议您查看**每个请求的会话**模式，在该模式中，您为每个请求创建一个 NHibernate 会话对象。会话在收到请求时打开，并在生成响应时关闭/刷新。

还要确保不要使用`SessionFactory.OpenSession()`来获取会话，而是尝试使用`SessionFactory.GetCurrentSession()`它来承担 NHibernate 的责任，以向您返回当前正确的会话。

我希望这能把你推向正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T14:45:23.887

这段代码

```
 var emp = new Employee(1);
    foreach (var timeEntry in emp.TimeEntries)
    {
        timeEntry.Length += 1;
    }
    emp.Save(); 
```

正在创建一个新的 Employee 对象，假定通过构造函数传递的 ID 为 1。您应该从数据库中加载 Employee，并且您的 Employee 对象不应允许设置 ID，因为您使用的是标识列。此外，新 Employee 不会有任何 TimeEntries 并且错误消息清楚地指出 Employee 实例是问题所在。

我不喜欢存储库中的事务，我真的不喜欢通用存储库。为什么您的 EmployeeRepository 是通用的？难道不应该

```
public class EmployeeRepository : IRepository<Employee> 
```

我认为您的代码应该类似于：

```
var repository = new EmployeeRepository(session);
var emp = repository.GetById(1);
foreach (var timeEntry in emp.TimeEntries)
{
    timeEntry.Length += 1;
}
repository.Save(emp); 
```

我个人更喜欢直接使用 ISession：

```
using (var txn = _session.BeginTransaction())
{
    var emp = _session.Get<Employee>(1);
    foreach (var timeEntry in emp.TimeEntries)
    {
        timeEntry.Length += 1;
    }
    txn.Commit();
} 
```

# python - 姜戈奥斯卡。如何添加产品？

> ID：15855468
> 
> 赞同：5
> 
> 时间：2013-04-06T20:06:36.410
> 
> 标签：python, django, e-commerce, django-oscar

我是 Python 和 Django 的初学者。我已经安装了 django-oscar。然后我配置它并启动服务器，它可以工作。

现在，我不明白`how to add a product`？

在仪表板上有一个按钮`Create new product`。但是为了添加新产品，它要求选择产品类别，我在给定的下拉选项中找不到任何产品类别。

为我提供一个如何在 django-oscar 中添加产品的演示示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-08-17T15:02:59.013

您需要以超级用户身份登录并转到商店/仪表板 URL **不要从普通 DJANGO 管理员控制台管理此**内容（即使该答案已被接受？）

这是包含的沙盒应用程序中的示例 [![在此处输入图像描述](https://i.stack.imgur.com/ZR19S.png)](https://i.stack.imgur.com/ZR19S.png)

您需要添加类别、产品类型和合作伙伴，然后才能开始添加真实产品

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T08:41:39.500

查看此提交 - 它尚未合并到 Oscar 的 master 中，但应该让您了解如何以编程方式创建产品，例如在导入数据时。

[https://github.com/ArtS/django-oscar/blob/3f9abaf8d5c179c385b90dfa463a35ff9f92f73c/docs/source/recipes/importing_a_catalogue.rst](https://github.com/ArtS/django-oscar/blob/3f9abaf8d5c179c385b90dfa463a35ff9f92f73c/docs/source/recipes/importing_a_catalogue.rst)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-17T07:29:04.150

有一个单独的页面来管理产品类型，并带有“创建新产品类型”按钮。

使用 django-admin 不是一个好的解决方案，您可以通过它添加产品类型和产品，但您将错过任何仪表板挂钩到正常流程。

查看源代码表明，虽然您可以添加没有类型的产品（FK 可以为空），但您可能会遇到其他问题，因为 oscar 预计只有子产品具有 null product_class。

```
 #: None for child products, they inherit their parent's product class
    product_class = models.ForeignKey(
        'catalogue.ProductClass', null=True, on_delete=models.PROTECT,
        verbose_name=_('Product Type'), related_name="products",
        help_text=_("Choose what type of product this is")) 
```

绝对最好尝试使用系统而不是周围。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-24T05:06:58.947

您必须添加至少一个产品类别 /admin/catalogue/productclass/

# pycharm - 在实时模板 PyCharm 中循环？

> ID：15855471
> 
> 赞同：2
> 
> 时间：2013-04-06T20:07:13.093
> 
> 标签：pycharm

如何在 PyCharm 中制作一个实时模板，使其符合以下描述：假设一个人希望制作一种自动制作元组的方法。因此，输入 中的一种`tuple#`，其中`#`是数字。它会创建这样的东西：

```
$someTuple$ = (
    '', * # number of times
) 
```

或者更好的是，输入类似的东西`makeTuple`，它会变成这样：

```
$someTuple$ = (
    '$somevalue here$',
) $END$ 
```

只要你一直按`[tab]`，你就可以继续创建新的元组。一旦你按下`[enter]`，它就会停止，然后来到`$END$`

# php - foreach 循环导致 POST 为 NULL mysql_real_escape_string

> ID：15855474
> 
> 赞同：0
> 
> 时间：2013-04-06T20:07:35.487
> 
> 标签：php, forms, security, foreach, mysql-real-escape-string

这是一个小段，为了简单和测试目的，使用 PHP 和数据库构建，这里是一个文本示例。

这个想法是表单将提交，然后 PHP 将处理结果。但是我试图为每个帖子使用 mysql_real_escape_string 以确保安全（也许有更好的方法？）

无论如何，这就是问题所在。当我保持 foreach 循环到位时， qty[] 和 optname[] 的两个后数组变量都返回为 NULL（通过 var_export($_POST) 输出用于测试目的。这是 WITH foreach mysql_real_escape_string 循环输出的内容：

```
array (
  'update' => 'Yes',
  'qty' => NULL,
  'optname' => NULL,
) 
```

如果我删除 foreach 循环一切正常，这就是我得到的，也是 php 处理结果所需要的，这就是我用 foreach mysql_real_escape_string 循环注释掉的结果：

```
array (
  'update' => 'Yes',
  'qty' => 
  array (
    1 => '2',
    2 => '2',
    3 => '2',
    4 => '2',
  ),
  'optname' => 
  array (
    1 => '1|4',
    2 => '1|4',
    3 => '1|4',
    4 => '1|4',
  ),
) 
```

但是在 sql 查询发生之前没有检查/清理数据。如何使用循环检查每个 post 变量但保持 POST 变量完整？

这是可以粘贴到任何本地主机并进行测试的代码。

```
<?php
foreach ($_POST as $key=>$value) { $_POST[$key] = mysql_real_escape_string($value); }

echo '<pre>';
var_export($_POST);
echo '</pre>';  
?>
<form name="updateQty" id="updateQty" method="post" />
  <input type="hidden" name="update" id="update" value="Yes" />

  <input type="text" name="qty[1]" id="qty[]" class="field" value="2" />
  <input type="hidden" name="optname[1]" id="optname[]" value="1|4" />

  <input type="text" name="qty[2]" id="qty[]" class="field" value="2" />
  <input type="hidden" name="optname[2]" id="optname[]" value="1|4" />

  <input type="text" name="qty[3]" id="qty[]" class="field" value="2" />
  <input type="hidden" name="optname[3]" id="optname[]" value="1|4" />

  <input type="text" name="qty[4]" id="qty[]" class="field" value="2" />
  <input type="hidden" name="optname[4]" id="optname[]" value="1|4" />

  <input type="submit">
</form> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:26:40.060

> 我正在尝试使用 mysql_real_escape_string 来保证安全

那就是你做错了。**此功能与安全性完全无关**。
事实上，你真正想做的是恢复一个已经被弃用和删除`magic quotes`的功能，破坏你的数据而不保证它的安全。

至少您必须以这种方式使用此功能

```
$var = "'".mysql_real_escape_string($value)."'"; 
```

将引号添加到转义值（当然同时从查询中删除它们）。而且您必须在查询构建之前完成它，而不是其他任何地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T20:14:12.907

```
foreach ($_POST as $key=>$value) {
    if(is_array($value)){
        foreach ($value as $k => $v) {
            $_POST[$key][$k] = mysql_real_escape_string($v); 
        }
    } else {
        $_POST[$key] = mysql_real_escape_string($value); 
    }
} 
```

在您的情况下，您的 POST 值是数组，因此您也必须循环它们..

正如@hjpotter92 评论它不好使用旧的mysql 函数。他们不会在未来的版本中工作......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T20:41:56.237

一种更简单的方法（未经测试）是尝试[`array_walk_recursive()`](http://php.net/manual/en/function.array-walk-recursive.php).

```
function MyEscape( &$string, $key ) {
    if( !is_array($string) )
        $string = mysql_real_escape_string( $string );
}
array_walk_recursive($_POST, 'MyEscape'); 
```

# scala - 如何将 Scala 列表用作堆栈？

> ID：15855477
> 
> 赞同：2
> 
> 时间：2013-04-06T20:07:49.023
> 
> 标签：scala

我正在尝试解决 Scala 中的硬件问题。一个传统的解决方案需要一个堆栈，但到目前为止还没有在课程中引入堆栈。只介绍了列表。我的问题是如何将列表视为堆栈？换句话说，我如何模拟列表中的推送和弹出元素？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T20:12:15.460

我希望这将表明这个想法：

```
scala> val x = List(1,2,3)
x: List[Int] = List(1, 2, 3)

scala> val pushed0 = 0::x
push3: List[Int] = List(0, 1, 2, 3)

scala> val pop0 = pushed0.head
pop3: Int = 0
// it is actually more peek than fair pop 

scala> val stackAfterPop = pushed0.tail
stackAfterPop: List[Int] = List(1, 2, 3) 
```

当您熟悉模式匹配时，它实际上会有更好的语法（我猜是下周）：

```
scala> val popped::stack = pushed0
popped: Int = 0
stack: List[Int] = List(1, 2, 3) 
```

# elasticsearch - 创建 elastic.js 查询

> ID：15855479
> 
> 赞同：0
> 
> 时间：2013-04-06T20:08:09.950
> 
> 标签：elasticsearch, elasticjs

长话短说。

我需要使用 elasticjs 创建一个类似物进行查询：

`http://example.com/one/two/_search?q=tags:three*`

我对[文档](http://docs.fullscale.co/elasticjs/)页面上列出的选项感到困惑。已经尝试创建`BoolQuery`和`TermQuery`其他几个，但它们对我不起作用。

我现在被困住了，希望能在这个问题上提供任何帮助。

PS 还有同一个问题的另一面。我找不到 json 应该如何获取相同的数据。到目前为止想出了这个解决方案，但不幸的是它不起作用：

```
{
  "query": {
    "bool": {
      "should": [
        {
          "term": {
            "tag": "three*"
          }
        }
      ]
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:54:22.700

```
ejs.Request()
    .indices("one") 
    .types("two")
    .query(ejs.QueryStringQuery ( "tags:three*" ))
    .doSearch(function (data) {
        // do something with data
    }); 
```

PS在json中：

```
{
  "query": {
    "query_string": {
      "query": "tags:three*"
    }
  }
} 
```

或者

```
{
  "query": {
    "wildcard": {
      "tags": "three*" 
    }
  }
} 
```

# ruby - 如何在Ruby中将单词数组排序为字谜数组？

> ID：15855480
> 
> 赞同：2
> 
> 时间：2013-04-06T20:08:12.457
> 
> 标签：ruby, arrays, string, hash, anagram

[http://spark-university.s3.amazonaws.com/berkeley-saas/homework/hw1.pdf](http://spark-university.s3.amazonaws.com/berkeley-saas/homework/hw1.pdf)

尝试完成此作业的第 3 部分。以下代码似乎不起作用，即对于参数`['HeLLo', 'hello']`，返回`[["hello"], ["HeLLo"]]`而不是`[["HeLLo", "hello"]]`

```
def combine_anagrams(words)
    #iterate through words, make hashmap with the sorted version
    hash = {}
    words.each do |x|
        hash[x.chars.sort.join.downcase.gsub /\W/, ""] = []
    end

    #iterate through words, access hashmap and append curr to array
    words.each do |x|
        hash[x.chars.sort.join.downcase.gsub /\W/, ""] << x
    end

    hash.values #return array of values
end 
```

任何帮助，将不胜感激。（我是红宝石新手）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:49:17.320

您可以像这样轻松地做到这一点：

```
def combine_anagrams(words)
  anagrams={}
      words.each do |word|
        anagrams[word.downcase.split('').sort.join] ||=[]
        anagrams[word.downcase.split('').sort.join] << word 
      end
      anagrams.values
end 
```

# events - 事件点击把手

> ID：15855482
> 
> 赞同：2
> 
> 时间：2013-04-06T20:08:13.130
> 
> 标签：events, click, handlebars.js

使用 Handlebars 和 OpenDatabase 我有小问题。当您单击链接并且没有任何反应时

我的 JS。

```
 db.transaction(function (tx) {
  tx.executeSql('SELECT * FROM exhibition', [], function (tx, results) {
  var source = document.querySelector("#exhibition-template").innerHTML;
  var data = [];
  template = Handlebars.compile(source);

  for(var i=0;i < results.rows.length; i++) {
      data.push(results.rows.item(i));
  }
  var context = (data);
  if (language == 'pl')
  {
    var html = template({o:context,language_pl:true});
  }else{
    var html = template({o:context,language_en:true});
  }
  document.querySelector("#template").innerHTML = html;  

 }, null);

$(".exl").on("click", function(){
  alert('event click!');
});

}); 
```

和我的html

```
 {{#each o}}
  <a href='' class='exl'>{{name_pl}}</a>
  {{/each}} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T20:31:45.210

您可能在生成的 DOM 附加到页面之前绑定事件。因此，您可以等待 Handlebars 模板被呈现（在您的情况下，这意味着来自回调的绑定事件`tx.executeSql`）。或者您可以将[事件委托与 jQuery 一起](http://www.elijahmanor.com/2012/02/differences-between-jquery-bind-vs-live.html)使用：

```
$(document).on("click", ".exl", function(){
  alert('event click!');
}); 
```

# zend-framework2 - Zend\Mail\Message 问题

> ID：15855485
> 
> 赞同：1
> 
> 时间：2013-04-06T20:08:20.153
> 
> 标签：zend-framework2

我使用 ZF2 的 Message 类来尝试发送电子邮件。但是，执行下面的代码后，页面尝试重定向，大约一分钟后给我一个“本地主机已超时”错误。有任何想法吗？

```
 $message = new Message();
    $message->addTo('ToEmail@gmail.com')
      ->addFrom('FromEmail@gmail.com')
      ->setSubject('Greetings and Salutations!')
      ->setBody("Sorry, I'm going to be late today!");

    // Setup SMTP transport using LOGIN authentication
    // Setup SMTP transport using PLAIN authentication over TLS
    $transport = new SmtpTransport();
    $options   = new SmtpOptions(array(
        'name'              => 'localhost',
        'host'              => 'localhost',
        'port'              => 8888, // Notice port change for TLS is 587
        'connection_class'  => 'plain',
        'connection_config' => array(
            'username' => 'FromEmail@gmail.com',
            'password' => 'FromPassword',
            'ssl'      => 'tls',
        ),
    ));
    $transport->setOptions($options);
    $transport->send($message); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T10:17:11.650

我可以使用 Zend Framework 2.0 发送电子邮件。请遵循以下代码集。

```
$options = new Mail\Transport\SmtpOptions(
                                    'smtp_options' => array(
            'name' => 'localhost',
            'host' => 'smtp.gmail.com',
            'port'=> 587,
            'connection_class' => 'login',
            'connection_config' => array(
                'username' => '<your gmail account username>@gmail.com',
                'password' => '<your gmail account password>',
                'ssl'      => 'tls'
            ),
        )
                            );

                            $content = 'Message to be sent in the email.(goes here)';  

                            // make a header as html  
                            $html = new MimePart($content);  
                            $html->type = "text/html";  
                            $body = new MimeMessage();  
                            $body->setParts(array($html)); 

                            // instance mail   
                            $mail = new Mail\Message();  
                            $mail->setBody($body); // will generate our code html from template.phtml  
                            $mail->setFrom('FromEmail@gmail.com');  
                            $mail->setTo('ToEmail@gmail.com');
                            $mail->setSubject('Subject for sending email.');

                            $transport = new Mail\Transport\Smtp($options);
                            $transport->send($mail); 
```

如果您在 dineshs@mindfiresolutions.com 遇到任何问题，请告诉我

# ios - iOS：在 2 个集合视图控制器之间滑动

> ID：15855486
> 
> 赞同：0
> 
> 时间：2013-04-06T20:08:28.467
> 
> 标签：ios, uiviewcontroller

我有 2 个集合视图控制器，我想从第一个滑动到第二个。然后，我正在使用 Swipe 组件，但它在我的应用程序上不起作用（根本不起作用）。

否则，我知道如何在 2 个简单的视图控制器组件之间使用它，但我想在集合视图控制器组件中使用它。

你知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:00:11.327

我认为最简单的方法就是将视图控制器嵌入到`UIPageViewController`.

*   初始化使用`– initWithTransitionStyle:navigationOrientation:options:`
*   使用设置初始视图控制器`– setViewControllers:direction:animated:completion:`
*   实现数据源方法`pageViewController:viewControllerBeforeViewController:`和`pageViewController:viewControllerAfterViewController:`

不要忘记设置`datasource`.

# ios - 使用 xCode 4.6 的 iOS 应用程序中的日志记录突然停止工作

> ID：15855487
> 
> 赞同：1
> 
> 时间：2013-04-06T20:08:32.040
> 
> 标签：ios, xcode, logging, nslog, xcode4.6

我正在使用 xCode 4.6。我刚出的时候就升级了，没问题。

今天，日志记录突然停止在我的应用程序中工作。自从我第一次创建应用程序（几年前）以来，它一直没有问题，然后今天它就停止了。

我努力了：

*清理项目

*删除派生数据

*关闭并重新启动xcode

*从模拟器中删除应用程序

*重置模拟器

*搜索以查看是否在某处重新定义了 NSLog（或 DLog，因为我主要使用，虽然我也使用了一些 NSLog）（它们不是）

我查看了该站点上的其他帖子，但它们并没有帮助解决问题。我真的不知道从这里做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:14:51.003

您可能需要在 Schema Info 中选择 Debug Configuration。

![在此处输入图像描述](https://i.stack.imgur.com/pFOGM.png)

# jquery - jQuery - 如何将 target="_blank" 添加到生成文本中的外部链接

> ID：15855488
> 
> 赞同：0
> 
> 时间：2013-04-06T20:08:33.150
> 
> 标签：jquery

我需要将 target="_blank" 添加到我网站上的所有外部链接中，通常我会使用：

```
$("a[href^=http]").each(function(){
    if(this.href.indexOf(location.hostname) == -1) {
        $(this).attr({
            target: "_blank",
            title: "Opens in a new window"
        });
    }
}); 
```

不幸的是，我需要检查的链接位于 id 为 messageArea 的 div 中，并且由于它们是通过 ajax 调用生成的，因此它们不会被拾取。

我可以使用 c# 正则表达式函数并重写内容或添加 target="_blank" 但我宁愿将内容保留在其原始状态。

有什么建议么？

* * *

使用 lucuma 的建议，解决方案是：

```
$.getJSON(
   "ajax/GetMessage.aspx?message=" + msgID,
   function (msgs) {
       $("div#messageArea").html(msgs.responseText);
       $("div#messageArea a[href^=http]").each(function(){
           if(this.href.indexOf(location.hostname) == -1) {
               $(this).attr({
                   target: "_blank",
                   title: "Opens in a new window"
               });
           }
       });
    }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:11:25.830

在从 ajax 调用返回时添加以下代码：

```
$("div#messageArea a[href^=http]").each(function(){
    if(this.href.indexOf(location.hostname) == -1) {
        $(this).attr({
            target: "_blank",
            title: "Opens in a new window"
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:17:27.893

```
<a href="http://google.com">google</a> 
```

[一切正常](http://jsfiddle.net/heFNv/)也许您可以显示更多代码？

# android - Android 异步任务使用

> ID：15855491
> 
> 赞同：-2
> 
> 时间：2013-04-06T20:09:03.740
> 
> 标签：android, asynchronous, task

单击按钮时，我想打开一个对话框。在该对话框中，我想动态设置文本（有点像秒表），文本将通过循环出现。有人可以用示例代码指导我吗？我尝试了网上给出的许多示例，但未能成功实现结果。

```
//Button where the action starts
public void onClickStart(View v) {
    final Dialog dialog = new Dialog(MainActivity.this);
    dialog.setContentView(R.layout.activity_details);
    dialog.setTitle("Your Step Details");
    dialog.show();
    DisplayTask dd= new DisplayTask();
    dd.execute();
}

public void doWork(){
        final Handler handler=new Handler();
        new Thread(new Runnable (){
            boolean isRunning=true;
            @Override
            public void run() {
                while(isRunning){
                    try{
                        handler.post(new Runnable(){

                            @Override
                            public void run() {
                                try{
                                    TextView txtCurrentTime= (TextView)findViewById(R.id.txtLeft);
                                        Date dt = new Date();
                                        int hours = dt.getHours();
                                        int minutes = dt.getMinutes();
                                        int seconds = dt.getSeconds();
                                        String curTime = hours + ":" + minutes + ":" + seconds;
                                        txtCurrentTime.setText(curTime);
                                }catch (Exception e) {}

                            }

                        });
                    }catch(Exception e){

                    }
                }

            }

        }).start();
    }

public class DisplayTask extends AsyncTask<Void , Void, Void> {

    protected void onPostExecute(){
        MainActivity main= new Mai`enter code here`nActivity();
        main.doWork();
    }

    @Override
    protected Void doInBackground(Void... params) {
        onPostExecute();
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:23:04.923

If you want to do something on a timer, AsyncTask isn't the right method. Use a Handler, and post a message to it using postMessageDelayed. This will let you do something in a few milliseconds/seconds, but it will happen on the UI thread.

# java - 如何使用 Drools debugWorkingMemorylistener？

> ID：15855493
> 
> 赞同：0
> 
> 时间：2013-04-06T20:09:31.040
> 
> 标签：java, jboss, drools, business-rules, rule-engine

以下代码行直接来自文档

```
ksession.addEventListener(new DebugWorkingMemoryEventListener()); 
```

eclipse中提示如下错误

> WorkingMemoryEventManager 类型中的方法 addEventListener(WorkingMemoryEventListener) 不适用于参数 (DebugWorkingMemoryEventListener)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:29:10.783

您可能 import`org.drools.event.DebugWorkingMemoryEventListener`而不是`org.drools.event.rule.DebugWorkingMemoryEventListener`.

在我们的例子中，以下代码可以正常工作：

```
import org.drools.event.rule.DebugWorkingMemoryEventListener;
import org.drools.event.rule.ObjectInsertedEvent;
import org.drools.event.rule.ObjectRetractedEvent;
import org.drools.event.rule.ObjectUpdatedEvent;
...
StatelessKnowledgeSession ksession = kbase.newStatelessKnowledgeSession();
ksession.addEventListener(new DebugWorkingMemoryEventListener() {
    @Override
    public void objectInserted(ObjectInsertedEvent event) {
        System.out.println(event);
    }

    @Override
    public void objectRetracted(ObjectRetractedEvent event) {
        System.out.println(event);
    }

    @Override
    public void objectUpdated(ObjectUpdatedEvent event) {
        System.out.println(event);
    }
}); 
```

# matlab - 矩阵计算 matlab

> ID：15855498
> 
> 赞同：0
> 
> 时间：2013-04-06T20:10:03.577
> 
> 标签：matlab, matrix

我有一个 3x3 矩阵如下

```
ls        1      2     3
mic  1    d11    d12   d13
mic  2    d21    d22   d23
mic  3 
```

其中矩阵元素定义了每个组件之间的距离，例如 d11 是麦克风 1 (mic 1) 和扬声器 1 (ls 1) 之间的距离。

每个 ls 都有一个特定的增益值，如下 3x1

```
g1     // ls1
g2     // ls2
g3     // ls3 
```

如何将每个增益值划分为距离矩阵中的相应元素，例如 g1/d11、g1/d21 和 g2/d12、g2/d22 等，然后将这些值存储在结果矩阵中。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T20:40:14.807

利用`bsxfun`

```
res = bsxfun(@rdivide, gain_vec(:)', dist_matrix); 
```

# java - 无法将拖放添加到顶级 JFrame

> ID：15855499
> 
> 赞同：0
> 
> 时间：2013-04-06T20:10:36.017
> 
> 标签：java, swing, drag-and-drop, jframe, jsplitpane

我有一个这样的 JFrame 集：

```
class MainWindow extends JFrame {
    JPanel left, tab1, tab2;
    JTabbedPane right;
    public MainWindow(String name)
        super(name);
        left = new JPanel();
        tab1 = new JPanel();
        tab2 = new JPanel();
        right = new JTabbedPane();
        right.addTab(tab1);
        right.addTab(tab2);
        this.getContentPane().add(splitPane);
        this.setTransferHandler(new FileTransferHandler());

    this.pack();        
    this.setVisible(true);
} 
```

其中`FileTransferHandler`是一个 TransferHandler 类，它将文件导入窗口并且运行良好。现在我尝试将我的文件从外部文件系统拖到 JFrame 中。它有效，但仅适用于 JPanel 之间的空间。当我将文件拖到 JPanels 区域时，它不起作用。

我在这里按照教程进行操作：http: [//docs.oracle.com/javase/tutorial/uiswing/dnd/toplevel.html](http://docs.oracle.com/javase/tutorial/uiswing/dnd/toplevel.html) 但在本教程中，它只是`this.setTransferHandler(handler)`对主 JFrame 做同样的事情。

我尝试`setTransferHandler(handler)`了 JFrame 上的所有组件，但它仍然像以前一样工作。只是它们之间的空间起作用了。

有谁知道这里有什么问题？谢谢！

# javascript - 为什么使用 Function.prototype.bind 而不是 Function.prototype.call？

> ID：15855501
> 
> 赞同：5
> 
> 时间：2013-04-06T20:10:50.593
> 
> 标签：javascript

```
myFunction.call(thisArg, arg1, arg2 ...) 
```

我的理解是，当我使用`call`方法并提供一个函数时，函数中`thisArg`的`this`值被设置为我传入的对象。

```
myFunction.bind(thisArg, arg1, arg2 ...) 
```

`bind`另一方面，该方法返回一个新函数，新函数的上下文`this`设置为我传入的对象。

但我不明白为什么要使用`bind`而不是`call`. 如果我只想改变 , 的上下文`this`，`call`对我来说似乎就足够了。那么为什么在IE8及以下浏览器中中断时使用bind。

那么，`bind`与 相比，何时使用成为更好的情况`call`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-06T20:19:16.710

> 与 相比，何时使用`bind`成为更好的情况`call`？

回调。

如果您需要确保在特定对象的上下文中调用函数，但无法控制函数的调用方式（例如当您将函数作为参数传递给回调时），您可以使用`bind`.

```
var f,
    example;
f = new Foo();
example = document.getElementById('example');

//`f.bar` is called in the context of `f`
f.bar();

//`f.bar` will be called in the context of `example`
example.addEventListener('click', f.bar); 

//`f.bar` will be called in the context of `f`
example.addEventListener('click', f.bar.bind(f)); 
```

# javascript - Javascript getElementById 值设置在函数返回时重置

> ID：15855502
> 
> 赞同：0
> 
> 时间：2013-04-06T20:11:13.517
> 
> 标签：javascript, getelementbyid

我有一个简单的函数来显示/隐藏 div 元素。我有一个javascript函数来做到这一点。我用 Opera 调试了这个。该函数在 div 元素上正确设置隐藏值。我可以看到 div 元素消失了。但是，当函数返回时，div 元素会重新出现。javascript函数在它自己的文件中：main.js：

```
function showhide(name){
    var elem = document.getElementById(name) ;
    if( elem.hidden == false ) {
        document.getElementById(name).hidden = true ;
    } else {
        document.getElementById(name).hidden = false ;
    }
} 
```

的HTML是：

```
<div class=wrap><p>
<div class=sidebar>
    <FORM><input type="submit" value="Toggle" onclick="showhide('specname');"/></FORM></div>
<div class=main>main Div
    <div id="specname">collapsible text</div></div></p></div>. 
```

我在 javascript 函数 showhide 中设置了调试断点，以查看该值是否设置正确。但是在函数返回时，该值被重置。

这可能是我想念的一些简单但似乎看不到的东西？有任何想法吗？谢谢！

**答案解决了我的问题。我错过了提交重绘页面并且我丢失了更改的事实。我将 type=submit 更改为 type=button。我将表单删除为仅带有类型按钮的输入元素。那效果很好。谢谢大家的帮助！！！我真的很感谢你的回答！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:14:14.987

以下内容在某些浏览器中不会执行任何操作：

```
document.getElementById(name).hidden = true 
```

将其更改为

```
document.getElementById(name).style.display = 'block' // and 'none' for the matching line 
```

这是否使它做你需要的？

* * *

正如其他人所指出的，它也在提交页面 - 要么使用不同的元素，要么将函数更改为 start ：

```
function showHide(e, name) {
     e.preventDefault();
     //do the toggle here
     return false;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:14:10.003

可能是因为当您单击按钮时表单提交并刷新页面？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T20:15:23.897

问题是您正在使用提交控件，它将提交到服务器并刷新页面。您想停止提交或更改控件类型。以下两个都应该工作。我推荐第2个。

试试这个

```
<FORM><input type="submit" value="Toggle" onclick="showhide('specname'); return false;"/> 
```

或这个

```
<input type="button" value="Toggle" onclick="showhide('specname');"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T20:16:34.620

您不应该使用表单只是为了拥有一个执行某些操作的按钮。相反，尝试使用
`<button onClick="showhide('specname');">Toggle</button>`（并完全摆脱形式）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T20:17:48.717

为你的 showhide() 试试这个。

```
function showhide(name){
    var elem = document.getElementById(name);
    (elem.style.visibility == 'hidden'?elem.style.visibility = 'visible':elem.style.visibility = 'hidden'); 
} 
```

或类似地：

```
function showhide(name){
    var elem = document.getElementById(name);
    (elem.style.display== 'none'?elem.style.display= 'inline':elem.style.display= 'none'); 
} 
```

也许尝试他们两个，看看你需要哪个。

干杯。

# php - 将 txt 文件解析为 php/html 中的表格

> ID：15855511
> 
> 赞同：1
> 
> 时间：2013-04-06T20:12:33.667
> 
> 标签：php, css, parsing

我刚刚创建了一个脚本来获取 ip、主机名和日期并将其放入文本文件中。我想创建另一个脚本来将此信息显示到带有一些表格的 .php 中，以便于阅读。

这是我用来写入文件的代码，它可以完美运行。我只是不知道如何解析它来做我想做的事。

```
$logFile = 'IPLog.txt';
$fh = fopen($logFile,'a') or die("can't open file");
$ip = $_SERVER['REMOTE_ADDR'];
$fullhost = gethostbyaddr($ip);
$stringData = date('m/d/y | h:ia') . " - " . $ip . ":" . $fullhost . "\n";
fwrite($fh, $stringData);
fclose($fh); 
```

输出看起来像这样..

2013 年 4 月 6 日 | 下午 2:53 - xxx.xxx.xxx.xxx:xxx.comcast.net

我正在等待脚本读取文件并将其显示在表格中，例如。

```
IP Address      | Hostname          | Date        | Time
----------------|-------------------|-------------|-----------------------------
xxx.xxx.xxx.xx  | xxx.comcast.net   | 04/06/13    | 02:53pm
--------------------------------------------------------------------------------
xxx.xxx.xxx.xx  | xxx.comcast.net   | 04/06/13    | 02:53pm
--------------------------------------------------------------------------------
xxx.xxx.xxx.xx  | xxx.comcast.net   | 04/06/13    | 02:53pm
--------------------------------------------------------------------------------
xxx.xxx.xxx.xx  | xxx.comcast.net   | 04/06/13    | 02:53pm
-------------------------------------------------------------------------------- 
```

所以我希望它只是制作一个漂亮的小表格来显示信息，这样我就可以快速检查它并且看起来不错。

我想要这个没有任何特别的原因。我仅将其用作如何解析文本文件的示例。我从来都不擅长它，我真的很想了解它是如何完成的。因此，如果我也愿意，我可以将其用于其他事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:52:26.977

将当前输出更改为：`04/06/13 - 02:53pm - xxx.xxx.xxx.xxx - www.comcast.net`。这将使以后更容易解析。因此，在您当前的文件中，您必须更改以下行：

`$stringData = date('m/d/y - h:ia') . " - " . $ip . " - " . $fullhost . "\n";`

现在要在表中显示数据，您可以使用以下命令：

```
$logFile = 'IPLog.txt';
$lines = file($logFile); // Get each line of the file and store it as an array
$table = '<table border="1"><tr><td>Date</td><td>Time</td><td>IP</td><td>Domain</td></tr>'; // A variable $table, we'll use this to store our table and output it later !
foreach($lines as $line){ // We are going to loop through each line
    list($date, $time, $ip, $domain) = explode(' - ', $line);
    // What explode basically does is it takes a delimiter, and a string. It will generate an array depending on those two parameters
    // To explain this I'll provide an example : $array = explode('.', 'a.b.c.d');
    // $array will now contain array('a', 'b', 'c', 'd');
    // We use list() to give them kind of a "name"
    // So when we use list($date, $time, $ip, $domain) = explode('.', 'a.b.c.d');
    // $date will be 'a', $time will be 'b', $ip will be 'c' and $domain will be 'd'
    // We could also do it this way:
    // $data = explode(' - ', $line);
    // $table .= '<tr><td>'.$data[0].'</td><td>'.$data[1].'</td><td>'.$data[2].'</td><td>'.$data[3].'</td></tr>';
    // But the list() technique is much more readable in a way
    $table .= "<tr><td>$date</td><td>$time</td><td>$ip</td><td>$domain</td></tr>";
}
$table .= '</table>';
echo $table; 
```

# symfony - FOSUserBundle : 未找到 Security:Login 的路由

> ID：15855515
> 
> 赞同：3
> 
> 时间：2013-04-06T20:13:17.573
> 
> 标签：symfony, routes, fosuserbundle

几天前我在这里发布了一个问题： [FOSUserBundle：嵌入登录表单并选择其模板](https://stackoverflow.com/questions/8040512/fosuserbundle-embedding-the-login-form-and-choosing-its-template)

但是很复杂，而且我觉得这个问题的背后，可能是一个简单的路由问题，所以我觉得创建一个平行的话题，删除我所做的所有修改，重新开始安装是个好主意。

所以，我安装了 FOSUserBundle，我有一个 WelcomeBundle，其中包含我网站的几个页面，我还创建了一个新的 UserBundle，它只包含 FOSUserBundle 的用户实体，没有其他内容（没有覆盖任何内容）。

在我的 rsWelcomeBundle 中，在我的 index.html.twig 中，我输入了这个简单的代码：

```
{% extends "rsWelcomeBundle::layout.html.twig" %}

{% block title "Page d'accueil" %}

{%  block body %}
    <div class="span6">
        <div class="well">
            <h2>Présentation du jeu</h2>
            <a href="{{ path('rsWelcomeBundle_homepage_inscription') }}" class="btn ">Je m'inscris !</a></p>
        </div>
    </div>
    <div class="span6">
        <div class="well">
            {% render "FOSUserBundle:Security:login" %}
        </div>
    </div>

{% endblock %} 
```

而且我总是有这个错误：

在第 1 行的 rsWelcomeBundle:Homepage:index.html.twig 中呈现模板（“No route found for "GET Security:login"”）时引发异常。

如果我将这条线用于渲染部分，它就可以工作。

```
{% render(controller("FOSUserBundle:Security:login")) %} 
```

但为什么 ？？在文档中，我从未见过我们必须使用“渲染（控制器”。为什么我不能直接使用：渲染“FOSUserBundle：Security：login”？

在 app/config/routing.yml 我有：

```
tuto_welcome:
    resource: "@rsWelcomeBundle/Resources/config/routing.yml"
    prefix:   /

fos_user_security:
    resource: "@FOSUserBundle/Resources/config/routing/security.xml"

fos_user_profile:
    resource: "@FOSUserBundle/Resources/config/routing/profile.xml"
    prefix: /profile

fos_user_register:
    resource: "@FOSUserBundle/Resources/config/routing/registration.xml"
    prefix: /register

fos_user_resetting:
    resource: "@FOSUserBundle/Resources/config/routing/resetting.xml"
    prefix: /resetting

fos_user_change_password:
    resource: "@FOSUserBundle/Resources/config/routing/change_password.xml"
    prefix: /profile 
```

在 UserBundle 中我没有 routing.yml。在 WelcomeBundle 我有这个 routing.yml ：

```
rsWelcomeBundle_homepage:
    pattern:  /
    defaults: { _controller: "rsWelcomeBundle:Homepage:index" } 
```

我已经两天了，我试图解决这个问题，你能帮我吗？

非常感谢大家！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T15:02:28.187

`{% render "FOSUserBundle:Security:login" %}`是 Symfony 2.0 渲染子请求的方式。`{{ render(controller("FOSUserBundle:Security:login")) }}`是 2.1+ 的语法。两种语法基本上都意味着相同的东西。

关于子请求的文档在这里：[http ://symfony.com/doc/current/quick_tour/the_view.html#embedding-other-controllers](http://symfony.com/doc/current/quick_tour/the_view.html#embedding-other-controllers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T02:04:56.130

尝试`{% render url('your url') %}`改用。

# concrete5 - 如何使页面显示在日历导航日历中？

> ID：15855520
> 
> 赞同：0
> 
> 时间：2013-04-06T20:13:36.203
> 
> 标签：concrete5

我正在尝试使用[Calendar Nav](https://www.concrete5.org/marketplace/addons/calendar-nav/)建立一个网站。

我已经安装了插件。添加日历块就可以了。

![日历块有效](https://i.stack.imgur.com/a0WmM.png)

但是，我无法在日历上显示我想要的页面。

[![我试图在日历中显示的博客文章](https://i.stack.imgur.com/FzInK.png)](https://clients1.google.com/generate_204 "我想在日历上显示的页面�A;  （是的，我知道我在日历中导航回 2008 年。）")

[演示站点在日历中获取这些页面，但我没有。](http://awesomescreenshot.com/0e514w3bec)

**我尝试了什么：**

当然，我已经阅读了[说明](http://www.surefyre.com/news/calendar-nav-addon-released/)并尝试遵循它们。（我也在网上搜索了说明等。）不过我一定做错了什么……

1.  [我要显示的页面确实启用了“在日历导航中显示此项目”设置。](https://i.stack.imgur.com/Szgso.png)
2.  我添加了一个日历导航块，设置为“列表”模式（在博客和主页上），指向博客。

不过，我怀疑我在列表模式上做错了。没有显示我放置它的位置。

如何使博客文章显示在日历中？

# python - 确定一个条件是否对列表的所有成员都成立

> ID：15855521
> 
> 赞同：2
> 
> 时间：2013-04-06T20:13:38.570
> 
> 标签：python, for-loop, iterator

这是我有一段时间没有想到的事情。例如，假设我有一个数字列表，我想检查每个数字是否可以被另一个列表中的每个数字整除，我该怎么做？我能想到的只有：

```
mylist = [1,2,3,4,5,etc...]
divisible = [1,2,3,4,5,6,etc...]
for i in mylist:
    for x in divisible:
        if i % x == 0:
            <do something> 
```

显然，这只会检查 in中的任何元素`mylist`是否可以被 'divisible' 中的任何元素整除，但不会检查它是否可以被该列表中的所有元素整除。我该怎么做呢？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T20:15:51.163

你可以使用`all`：

```
>>> i = 2*3*17*23
>>> divs = [2, 17, 23]
>>> all(i % x == 0 for x in divs)
True
>>> all(i % x == 0 for x in [2,13,17])
False 
```

另见`any`和`next`：

```
>>> any(i % x == 0 for x in [5, 17, 101])
True
>>> next(x for x in [5, 17, 101] if i % x == 0)
17 
```

# jquery - 如何使用 Jquery 在新窗口上获取元素 ID？

> ID：15855530
> 
> 赞同：0
> 
> 时间：2013-04-06T20:14:32.300
> 
> 标签：jquery, user-interface

我有这个 PHP：

```
echo'
<a href="?model='.$f_sek['model'].'&id='.$f_sek['id'].'" class="open_div">
<img src="images/model/'.$f_sek['model'].'.png">
</a>'; 
```

当我单击图像时，它会打开一个 JQuery UI 窗口：

```
$("#new_div").dialog({ autoOpen: false });

$(".open_div").click(
    function () {
        $("#new_div").dialog('open');
        return false;
    }
); 
```

我只想发送`$_GET[id]`到`new_div`. 我的意思是当新窗口打开时，我可以看到`$_GET[id]`我点击了哪个。

PS 我可以写 HTML FORM 的`#new_div`，但我认为这并不重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:08:58.717

如果我对您的理解正确，您可能需要考虑一个函数并以这种方式传递您的参数（如果它们是字符串，请确保您的 php 变量被引用）：

```
echo'
<a href="javascript:void(0);" onclick="$.myOpenDialog('.$f_sek['model'].','.$f_sek['id'].')">
<img src="images/model/'.$f_sek['model'].'.png">
</a>'; 
```

然后，该函数可以在根据您的参数将内容加载到其中后打开对话框：

```
$.myOpenDialog = function(model,id) {
   var url = "/?model="+model+"&id="+id;
   $("#new_div").load(url).dialog('open');
} 
```

# javascript - 为什么 new 关键字没有创建 Router 类的唯一实例？

> ID：15855532
> 
> 赞同：2
> 
> 时间：2013-04-06T20:14:42.970
> 
> 标签：javascript, backbone.js

在这个例子中，为什么 new 关键字不创建正在使用的 Router 类的唯一实例？您可以看到我的简单路由器有一个 $deferred 属性，该属性已被解析，但即使在创建新类并再次测试状态时，它仍然被解析，而不是在创建新类时被重置为“待处理”。

```
var Router = Backbone.Router.extend({

    $deferred: new $.Deferred(),
    initialize: function () {

    }

});

var router1 = new Router({});
$("#results").append(router1.$deferred.state() + "<br>");  //pending
router1.$deferred.resolve();
$("#results").append(router1.$deferred.state() + "<br>"); // resolved

var router2 = new Router({});
$("#results").append(router2.$deferred.state() + "<br>"); //resolved -- should be pending
router2.$deferred.resolve();
$("#results").append(router2.$deferred.state() + "<br>"); //resolved 
```

[http://jsfiddle.net/Nv7ep/](http://jsfiddle.net/Nv7ep/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:19:54.077

这是一个更新的小提琴：http: [//jsfiddle.net/phoenecke/Nv7ep/1/](http://jsfiddle.net/phoenecke/Nv7ep/1/)

```
var Router = Backbone.Router.extend({
    initialize: function () {
        // add the deferred object to the new instance.
        this.$deferred = new $.Deferred();
    }

}); 
```

当您像以前一样添加属性时`extend`，它会添加到原型中，因此`$deferred`由所有实例共享。如果您想要为每个路由器实例提供一个唯一的延迟实例，您应该将它添加到`initialize`.

# java - 如何使用音频文件作为进度条更新 jslider

> ID：15855533
> 
> 赞同：1
> 
> 时间：2013-04-06T20:15:01.897
> 
> 标签：java, audio, jslider

我有一个 wav 音频文件。我知道如何在 java 中使用 AudioImputStream 播放它。我学会了创建一个jslider。现在我必须将滑块用作带有音频的进度条，例如播放音频，因此滑块会向前移动。如果用户改变了滑块的位置，音频文件必须从那个位置开始播放。

我是 Java 新手，我可能在帖子中犯了一些错误。请忽略它们

因此，当滑块更新时，我一直在更新音轨。我尝试将 changeListner 添加到滑块，但我无法让它工作。

这是代码

```
import java.io.File;
import java.util.Timer;
import java.util.TimerTask;

import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.Clip;
import javax.sound.sampled.DataLine;
import javax.swing.JFrame;
import javax.swing.JSlider;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class audio {

public static void main(String args[])
{

try {
final JFrame f=new JFrame();
File yourFile;
AudioInputStream stream;
AudioFormat format;
DataLine.Info info;
final Clip clip;
yourFile = new File(fileName);

stream = AudioSystem.getAudioInputStream(yourFile);
format = stream.getFormat();
final long frames =stream.getFrameLength();
final double durationInSeconds = (frames+0.0) / format.getFrameRate();  
final JSlider slider=new JSlider(0,(int) Math.round(durationInSeconds),0);
info = new DataLine.Info(Clip.class, format);
clip = (Clip) AudioSystem.getLine(info);
clip.open(stream);
clip.start();

f.add(slider);
f.pack();
f.setLocationRelativeTo(null);
f.setVisible(true);
TimerTask timerTask=new TimerTask(){

@Override
public void run() {
// TODO Auto-generated method stub
{
double timeNow=(durationInSeconds*clip.getFramePosition())/frames;
slider.setValue((int)Math.round(timeNow));
f.repaint();
}

}
};
Timer timer = new Timer("MyTimer");//create a new Timer

timer.scheduleAtFixedRate(timerTask, 30, 30);//this line starts the timer at the same time its executed

}

catch (Exception e) {
System.out.println(e);
}

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T23:46:35.373

> 这样更新滑块的问题就解决了。我使用了一个计时器，在其中我获取当前音轨帧，将其转换为持续时间并每 30 毫秒更新一次计时器。
> 
> 但我仍然坚持如何更新滑块更新的轨道。

我不明白您为什么要手动更新轨道：如果您已经可以获取音轨的当前帧，则它必须正在更新。因此，要解决您可能面临的问题：

如果您的滑块没有正确更新，我发现将其从组件中删除然后更新它，然后重新添加它以工作：

```
@Override
public void run() {
// TODO Auto-generated method stub
{
f.remove(slider);
double timeNow=(durationInSeconds*clip.getFramePosition())/frames;
slider.setValue((int)Math.round(timeNow));
f.add(slider);
f.repaint();
} 
```

如果您想手动更新剪辑，请使用`clip.setFramePosition(int frames)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T01:12:33.383

当我运行您的代码时，我观察到以下内容：JSlider 确实更新，但每秒只有一次（或稍快）。

我不知道这是否是答案，但也许值得考虑。有时重绘的调用会“崩溃”。可能的情况是 EDT 没有对每个重绘调用做出反应，而是决定相邻的调用足够相似，以至于它们可以折叠成更少的重绘。我注意到，如果我在 TimerTask 中放置一个 System.out.println(timeNow)，每秒在控制台上打印大约 33 个 timeNow，我认为这是您希望更新 JSlider 的速率。

我发现如果我在一个单独的类中有一个 Timer（连同它的 TimerTask）并从那里调用重绘，EDT 折叠重绘的可能性会更小。我记得有一次在 JPanel 上放置 Timer 之前，将它称为“它自己的”重绘给了我类似的“折叠 EDT”结果。

我不知道这背后的确切机制或理论。所以这可能不是最好的建议。但是仍然值得将计时器代码分离到自己的类中。为此，您还必须将 JFrame 和 Clip 的副本传递给此类。

# ffmpeg - 使用ffmpeg在视频中设置B帧

> ID：15855535
> 
> 赞同：5
> 
> 时间：2013-04-06T20:15:12.477
> 
> 标签：ffmpeg, mpeg, mpeg-4

根据ffmpeg手册，设置`-g`是定义“I”帧之间的空间，并设置`-bf`使用“B”帧。前者我得到，后者没有。

目标：我正在尝试制作 GOP 3,12（M=3，N=12）的视频。这意味着：2 个“B”帧分隔每个“P”帧，“I”帧具有 12 个距离。或者简单地说：“IBBPBBPBBPBBI”

我认为我只得到了 N=12，使用以下命令：

1.  `ffmpeg -s cif -r 30 -b 64000 -bt 3200 -g 12 -y -i video.yuv -vcodec mpeg4 video.m4v`
2.  `MP4Box -hint -mtu 1460 -fps 30 -add video.m4v video.mp4`
3.  `ffmpeg -y -i video.mp4 video_ref.yuv`
4.  `../cmd/psnr 352 288 420 video.yuv video_ref.yuv > psnr_ref.txt`
5.  `../cmd/mp4trace -f -s 192.168.0.2 12346 video.mp4 > trace`
6.  `head -n 20 trace`

结果：

```
[robert@10-2Fontes]$ head -n 20 trace
1   H   12002   9   0.000
2   P   11479   8   0.034
3   P   12021   9   0.066
4   P   11239   8   0.099
5   P   5407    4   0.134
6   P   2735    2   0.166
7   P   1014    1   0.199
8   P   850 1   0.232
9   P   619 1   0.265
10  P   979 1   0.298
11  P   813 1   0.331
12  P   806 1   0.364
13  H   5109    4   0.396 
```

*注意，最重要的是`-g 12`ffmpeg中的命令，但我写了所有命令。我使用的视频是“高速公路”，来自 cif 页面视频：[http ://www2.tkn.tu-berlin.de/research/evalvid/cif.html](http://www2.tkn.tu-berlin.de/research/evalvid/cif.html)

我不知道为什么结果跟踪使用“H”而不是“I”。

我试图`-bf 2`输入 ffmpeg 命令，但没有奏效（我想是因为我在结果中没有看到“B”指示）

项目清单

```
ffmpeg -s cif -r 30 -b 64000 -bt 3200 -g 12 -bf 2 -y -i video.yuv -vcodec mpeg4 video.m4v 
```

结果：

```
[robert@10-2Fontes]$ head -n 20 trace
1   H   12002   9   0.001
2   P   11479   8   0.034
3   P   12021   9   0.067
4   P   11239   8   0.100
5   P   5407    4   0.132
6   P   2735    2   0.166
7   P   1014    1   0.199
8   P   850 1   0.232
9   P   619 1   0.265
10  P   979 1   0.298
11  P   813 1   0.331
12  P   806 1   0.363
13  H   5109    4   0.400 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T14:40:53.440

解决了：

就像 LordNeckbeard 所说的那样，选项放置在 ffmpeg 中很重要。

基本顺序是：

```
ffmpeg [global options] [input options] -i input [output options] output 
```

我更改为下面的命令（输入-g 30 -bf 2）并且它有效：

```
ffmpeg -s cif -r 30 -i video.yuv -vcodec mpeg4 -g 30 -bf 2 video.m4v 
```

注意：即使在第一次更改后也没有用。程序要求我覆盖文件，我说是。但显然某事没有被删除，此刻我删除了所有文件并再次（从零开始）它工作了。

现在结果是：

```
[robert@10-2Fontes]$ head -n 40 trace
1   H   12038   9   0.034
2   P   13204   10  0.132
3   B   5367    4   0.132
4   B   5553    4   0.132
5   P   12157   9   0.232
6   B   5069    4   0.232
7   B   5613    4   0.232
8   P   12739   9   0.334
9   B   5935    5   0.334
10  B   3921    3   0.334
11  P   4474    4   0.429
12  B   1247    1   0.429
13  B   784 1   0.429
14  P   1448    1   0.528
15  B   350 1   0.528
16  B   397 1   0.528
17  P   1023    1   0.627
18  B   299 1   0.633
19  B   265 1   0.634
20  P   829 1   0.727
21  B   209 1   0.733
22  B   340 1   0.733
23  P   867 1   0.826
24  B   343 1   0.833
25  B   378 1   0.833
26  P   865 1   0.925
27  B   282 1   0.925
28  B   461 1   0.925
29  H   5083    4   1.034
30  B   818 1   1.034
31  B   838 1   1.034
32  P   1171    1   1.122
33  B   443 1   1.133
34  B   409 1   1.133
35  P   1078    1   1.221
36  B   269 1   1.233
37  B   327 1   1.233
38  P   795 1   1.321
39  B   298 1   1.333
40  B   304 1   1.334
41  P   854 1   1.419
42  B   477 1   1.419
43  B   412 1   1.419
44  P   869 1   1.519
45  B   371 1   1.519
46  B   314 1   1.519
47  P   983 1   1.617
48  B   337 1   1.617
49  B   454 1   1.617
50  P   1118    1   1.717
51  B   286 1   1.717
52  B   275 1   1.717
53  P   1044    1   1.815
54  B   362 1   1.815
55  B   273 1   1.815
56  P   973 1   1.914
57  B   302 1   1.914
58  B   324 1   1.915
59  H   4525    4   2.033 
```

# c++ - 在函数中修改二维引用数组的值

> ID：15855541
> 
> 赞同：2
> 
> 时间：2013-04-06T20:15:42.703
> 
> 标签：c++, function, multidimensional-array

这个程序必须有一个函数可以接受 2 个数组并在第三个数组中返回它们的乘积。所有数组都必须是 2d 的，并且一个单独的函数必须按成员完成元素的乘法。当我在 Visual Studio 中运行它时，我得到了错误：

```
Unhandled exception at 0x003f15ec in program4.exe: 0xC0000005:  
Access violation reading location 0x00000000. 
```

这可能是由于我对 C++ 缺乏了解，但我认为我可能犯了语法错误或其他问题。这是程序：

```
#include<iostream>
using namespace std;

void ProductArrays(int[3][4], int[3][4], int** array3[3][4]);

void main()
{
int array1[3][4] = { {1,3,5,7}, {9,11,13,15},  {17,19,21,23} };
int array2[3][4] = { {2,4,6,8}, {10,12,14,16}, {18,20,22,24} };
int** array3[3][4] = {0,0,0,0,0,0,0,0,0,0,0,0};

ProductArrays(array1, array2, array3);

system("pause");
return;
}

void ProductArrays(int array1[3][4], int array2[3][4], int** array3[3][4])
{
int i,j;
for (i=0;i<3;i++)
    {
    for(j=0;j<4;j++)
        {
          **array3[i][j] = array1[i][j] * array2[i][j];
        }
    }
return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:18:41.850

我认为你的意思`array3`是引用一个二维指针数组，但它实际上是一个二维数组`int**`。所以当你做乘法时，这部分：

```
**array3[i][j] 
```

试图取消引用 中的内容`array3[i][j]`，即 0，因此是 AccessViolation。我想你可能的意思是签名是：

```
void ProductArrays(int array1[3][4], int array2[3][4], int (&array3)[3][4]) 
```

并声明array3 与array1 和array2 的类型相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T20:18:01.093

**(1)**
array3 的声明是错误的，因为你需要。

```
int** array3[3][4] = {0,0,0,0,0,0,0,0,0,0,0,0}; 
```

你需要这个如果我正确理解你的问题：

```
int array3[3][4] = {0,0,0,0,0,0,0,0,0,0,0,0}; 
```

**(3)**
您收到错误，因为您正在创建指向 NULL ( `0`) 的指针的二维数组，并且您正在分配`0`位置。

```
**array3[i][j] = array1[i][j] * array2[i][j];
               ^ assign to `0` location 
```

**(2)**
声明你的功能如下：

```
void ProductArrays(int array1[3][4], int array2[3][4], int (*array3)[4])
{ //                                                          ^ notice
int i,j;
for (i=0;i<3;i++)
    {
    for(j=0;j<4;j++)
        {
           array3[i][j] = array1[i][j] * array2[i][j];
        // ^ remove **  
        }
    }
return;
} 
```

从 main 中调用它，例如：

```
ProductArrays(array1, array2, array3); 
```

另外一点，我的答案是通过地址传递，@Barry 的答案是通过引用传递。在 C++ 中，两者都是允许的。（*在 C 中只能通过地址传递*）

通过具有指针功能的引用传递，但像值变量一样易于使用所以@Barry 的答案更好。考虑我的回答以了解观点。

# php - 拒绝从浏览器访问公共 php 但允许应用程序使用

> ID：15855544
> 
> 赞同：3
> 
> 时间：2013-04-06T20:15:59.290
> 
> 标签：php, security, redirect, browser, header

大家好，请帮助无知。我四处寻找解决方案，但它似乎避开了我。

我最近在我的主机上的公共 html 文件夹中设置了一个包含读取所有脚本的 php 文件。db_config 和 db_connect 以及任何更敏感的文件都被隐藏起来，因此无法直接访问。

我需要阻止或至少减慢普通乔能够在他们的浏览器中运行我读取所有脚本的速度，显然随着收集这样一个数据库所花费的时间，它变得有些有价值，并且不愿意让某人免费拥有它太容易了。

移动应用程序需要可以访问 php 才能执行，所以不幸的是必须留在公共目录中（除非你知道吗？）

你能指出我正确的方向吗？

标头重定向似乎是唯一可用的选项。我必须承认这让我对脚本有些困惑。

就像我很喜欢有人给我剧本一样，不自己学习的乐趣在哪里:)

感谢您抽出宝贵时间阅读和回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:27:03.973

我将在这个答案中忽略 CHMOD：

这不是最好的解决方案，但一种易于维护的保护文件的方法是使用 HTACCESS（如果可以的话）阻止对它的公共访问。使用像其他答案之一提到的标志也很好，也是一种合法的方式来做到这一点，但 HTACCESS 甚至会首先禁止脚本运行。

```
<files myfile.php>
order allow,deny
deny from all
</files> 
```

**编辑：**刚刚看到您提到了 JSON，所以在这种情况下忽略上述内容（我不熟悉 JSON，但我认为它不会起作用）。

这个解决方案也不是完美的，但它可能会有所帮助： [PHP 检查传入请求是否为 JSON 类型](https://stackoverflow.com/questions/1377564/php-check-whether-incoming-request-is-json-type)

您可以检测传入的请求是否来自 JSON，如果不是则忽略。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-06T20:19:44.790

据我了解，您的应用需要使用它，但网络上的任何人都不需要，对吧？你可以做几件事。

首先，您的应用程序可以使用查询字符串请求页面，`&verified=1`除非传递了 $_GET 变量，否则脚本将无法工作。像

```
if(isset($_GET['verified'])){ 
//show code
}
else
{
//not today average joe
} 
```

你也可以把它放在一个秘密目录中，比如“sjdvjhb_kdfjgvkedn”

# android - 如何在java中对json对象数组进行排序

> ID：15855548
> 
> 赞同：3
> 
> 时间：2013-04-06T20:16:15.153
> 
> 标签：android, json, sorting

我在这样的 jsonarray 中有两个 json 对象

```
"errorCode": "1",
"data": [
    {
        "messageId": 590,
        "message": "WvZiT3RPm7feC6Hxsa/Ing==",
        "messageType": "CHAT",
        "sentOn": "01:51 PM, Apr 06, 2013",

        "mainParent": 589,
        "officeId": "19",
        "webParent": 590
    },
    {
        "messageId": 589,
        "message": "1A45rtoC3Cy88h73TEvDqQ==",
        "messageType": "CHAT",
        "sentOn": "01:50 PM, Apr 06, 2013",

        "parent": 0,
        "signImg": null,
        "mainParent": 589,
        "officeId": "19",
        "webParent": 1
    }
] 
```

所以我想根据消息ID键升序排序。我尝试使用对象类型为 json 对象的比较器，但在 compareto 方法中出现错误。请建议我

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-01T19:27:21.787

我在这里发布答案，以帮助其他面临此类问题的人。

```
public static JSONArray getSortedList(JSONArray array) throws JSONException {
            List<JSONObject> list = new ArrayList<JSONObject>();
            for (int i = 0; i < array.length(); i++) {
                    list.add(array.getJSONObject(i));
            }
            Collections.sort(list, new SortBasedOnMessageId());

            JSONArray resultArray = new JSONArray(list);

            return resultArray;
} 
```

这部分代码将有助于对json数组进行排序

查看下面的 SortBasedOnMessageId 类。

```
public class SortBasedOnMessageId implements Comparator<JSONObject> {
    /*
    * (non-Javadoc)
    * 
    * @see java.util.Comparator#compare(java.lang.Object, java.lang.Object)
    * lhs- 1st message in the form of json object. rhs- 2nd message in the form
    * of json object.
    */
    @Override
    public int compare(JSONObject lhs, JSONObject rhs) {
        try {
            return lhs.getInt("messageId") > rhs.getInt("messageId") ? 1 : (lhs
                .getInt("messageId") < rhs.getInt("messageId") ? -1 : 0);
        } catch (JSONException e) {
            e.printStackTrace();
        }
        return 0;

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-24T20:47:16.917

从 Java 8 开始，这可以通过 1 个方法中的 Integer.compare() 函数来解决：

```
private JSONArray getSortedMessages(JSONArray array) throws JSONException {
    List<JSONObject> list = new ArrayList<>();
    for (int i = 0; i < array.length(); i++) {
        list.add(array.getJSONObject(i));
    }
    list.sort((a1, a2) -> {
        try {
            return Integer.compare(a1.getInt("messageId"), a2.getInt("messageId"));
        } catch (JSONException e) {
            e.printStackTrace();
        }
        return 0;
    });
    return new JSONArray(list);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-10T15:04:56.337

这是一个解决方案：

```
public static String writeAsSortedJson(Object object) throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    mapper.setNodeFactory(getArrayNodeKeyValueSortingNodeFactory());

    mapper.configure(SerializationFeature.ORDER_MAP_ENTRIES_BY_KEYS, true);
    mapper.configure(MapperFeature.SORT_PROPERTIES_ALPHABETICALLY, true);

    String preparedJson = mapper.writeValueAsString(object);
    JsonNode jsonNode = mapper.readTree(preparedJson);

    return mapper.writerWithDefaultPrettyPrinter().writeValueAsString(jsonNode);
}

@SuppressWarnings("JavaNCSS")
public static JsonNodeFactory getArrayNodeKeyValueSortingNodeFactory() {
    return new JsonNodeFactory() {
        @Override
        public ObjectNode objectNode() {
            return new ObjectNode(this, new TreeMap<String, JsonNode>());
        }

        @SuppressWarnings("JavaNCSS")
        @Override
        public ArrayNode arrayNode() {
            return new ArrayNode(this, new SortedArrayList<JsonNode>(new Comparator<JsonNode>() {
                @Override
                public int compare(final JsonNode o1, final JsonNode o2) {
                    return compareRecursively(o1, o2);
                }

                private int compareRecursively(final JsonNode o1, final JsonNode o2) {
                    if (o1.isObject() && o2.isObject()) {
                        return compareObjectNodes(o1, o2);
                    } else if (o1.isObject()) {
                        return 1;
                    } else if (o2.isObject()) {
                        return -1;
                    } else if (o1.isArray() && o2.isArray()) {
                        return compareArrayNodes(o1, o2);
                    } else if (o1.isArray()) {
                        return 1;
                    } else if (o2.isArray()) {
                        return -1;
                    }
                    return o1.asText().compareTo(o2.asText());
                }

                private int compareArrayNodes(final JsonNode o1, final JsonNode o2) {
                    List<JsonNode> elements1 = Lists.newArrayList(o1.elements());
                    List<JsonNode> elements2 = Lists.newArrayList(o2.elements());

                    for (int i = 0; i < elements1.size() || i < elements2.size(); i++) {
                        if (i >= elements1.size()) {
                            return -1;
                        } else if (i >= elements2.size()) {
                            return 1;
                        }

                        JsonNode jsonNode1 = elements1.get(i);
                        JsonNode jsonNode2 = elements2.get(i);
                        int compareRecursively = compareRecursively(jsonNode1, jsonNode2);
                        if (compareRecursively != 0) {
                            return compareRecursively;
                        }
                    }

                    return 0;
                }

                @SuppressWarnings("ReturnCountExtended")
                private int compareObjectNodes(JsonNode o1, JsonNode o2) {
                    List<Map.Entry<String, JsonNode>> elements1 = Lists.newArrayList(o1.fields());
                    List<Map.Entry<String, JsonNode>> elements2 = Lists.newArrayList(o2.fields());
                    if (elements1.isEmpty() && elements2.isEmpty()) {
                        return 0;
                    } else if (elements1.isEmpty()) {
                        return -1;
                    } else if (elements2.isEmpty()) {
                        return 1;
                    }

                    for (int i = 0; i < elements1.size() || i < elements2.size(); i++) {
                        if (i >= elements1.size()) {
                            return -1;
                        } else if (i >= elements2.size()) {
                            return 1;
                        }

                        Map.Entry<String, JsonNode> entry1 = elements1.get(i);
                        Map.Entry<String, JsonNode> entry2 = elements2.get(i);
                        int compare = entry1.getKey().compareTo(entry2.getKey());
                        if (compare == 0) {
                            int compareRecursively = compareRecursively(entry1.getValue(), entry2.getValue());
                            if (compareRecursively != 0) {
                                return compareRecursively;
                            }
                        } else {
                            return compare;
                        }
                    }

                    return 0;
                }
            }) { });
        }
    };
}

public static class SortedArrayList<T> implements List<T> {
    private final List<T> delegate = new ArrayList<>();
    private final Comparator<T> comparator;

    public SortedArrayList(Comparator<T> comparator) {
        this.comparator = comparator;
    }

    @Override
    public int size() {
        return delegate.size();
    }

    @Override
    public boolean isEmpty() {
        return delegate.isEmpty();
    }

    @Override
    public boolean contains(final Object o) {
        return delegate.contains(o);
    }

    @NotNull
    @Override
    public Iterator<T> iterator() {
        return delegate.iterator();
    }

    @NotNull
    @Override
    public Object[] toArray() {
        return delegate.toArray();
    }

    @NotNull
    @Override
    public <T1> T1[] toArray(@NotNull final T1[] a) {
        return delegate.toArray(a);
    }

    @Override
    public boolean add(final T t) {
        boolean add = delegate.add(t);
        sort();
        return add;
    }

    @Override
    public void add(final int index, final T element) {
        delegate.add(index, element);
        sort();
    }

    @Override
    public boolean remove(final Object o) {
        boolean remove = delegate.remove(o);
        sort();
        return remove;
    }

    @Override
    public T remove(final int index) {
        T remove = delegate.remove(index);
        sort();
        return remove;
    }

    @Override
    public boolean containsAll(@NotNull final Collection<?> c) {
        return delegate.containsAll(c);
    }

    @Override
    public boolean addAll(@NotNull final Collection<? extends T> c) {
        boolean addAll = delegate.addAll(c);
        sort();
        return addAll;
    }

    @Override
    public boolean addAll(int index, @NotNull Collection<? extends T> c) {
        boolean addAll = delegate.addAll(index, c);
        sort();
        return addAll;
    }

    @Override
    public boolean removeAll(@NotNull final Collection<?> c) {
        boolean removeAll = delegate.removeAll(c);
        sort();
        return removeAll;
    }

    @Override
    public boolean retainAll(@NotNull final Collection<?> c) {
        boolean retainAll = delegate.retainAll(c);
        sort();
        return retainAll;
    }

    @Override
    public void clear() {
        delegate.clear();
    }

    @Override
    public boolean equals(final Object o) {
        if (this == o) {
            return true;
        }
        if (o == null || getClass() != o.getClass()) {
            return false;
        }
        SortedArrayList<?> that = (SortedArrayList<?>) o;
        return Objects.equals(delegate, that.delegate);
    }

    @Override
    public int hashCode() {
        return Objects.hash(delegate);
    }

    @Override
    public T get(final int index) {
        return delegate.get(index);
    }

    @Override
    public T set(final int index, final T element) {
        delegate.set(index, element);
        sort();
        return element;
    }

    @Override
    public int indexOf(final Object o) {
        return delegate.indexOf(o);
    }

    @Override
    public int lastIndexOf(final Object o) {
        return delegate.lastIndexOf(o);
    }

    @NotNull
    @Override
    public ListIterator<T> listIterator() {
        return delegate.listIterator();
    }

    @NotNull
    @Override
    public ListIterator<T> listIterator(final int index) {
        return delegate.listIterator(index);
    }

    @NotNull
    @Override
    public List<T> subList(final int fromIndex, final int toIndex) {
        return delegate.subList(fromIndex, toIndex);
    }

    private void sort() {
        delegate.sort(comparator);
    }
} 
```

# php - PHP结束会话（不同的方式）我不明白

> ID：15855550
> 
> 赞同：4
> 
> 时间：2013-04-06T20:16:30.217
> 
> 标签：php

我正在尝试了解会话以及结束它们的某些功能如何工作。我去过不同的网站/甚至在这里，基本上，没有任何工作。

我有一个我正在尝试使用的应用程序，当用户登录时，我像这样存储用户名（不打算粘贴整个代码，但你明白了）

```
if($row == 1){
    session_start();
    $_SESSION['usrname'] = $login_usrname;
    $_SESSION['usrpass'] = $login_usrpass;
    header("Location:index.php");
    exit;
} 
```

在所述应用程序的索引页面上，我有一张这样的支票

```
session_start();
if(!isset($_SESSION['usrname']) && !isset($_SESSION['usrpass'])){ 
    header("Location:login-acc.php");
    exit;
} 
```

它让他们进来。我检查了 Firefox 网络开发工具中的 cookie，我看到它正在生成，所以到目前为止我要说“它正在工作”。

现在，当我想注销时，长话短说，我有一个注销链接，可以将他们带到一个页面，该页面应该清除所有会话数据并将它们重定向到登录页面。当我测试应用程序并单击注销链接时，我被重定向到登录页面，但是当我返回并单击“索引页面”链接时。它让我直接进去。

在注销文件中，试图以**矫枉过正**的方式强制解决问题大声笑，我有这个，但似乎没有任何效果。

```
unset($_SESSION['usrname']);
unset($_SESSION['usrpass']);

session_unset();

$_SESSION = array();
session_destroy();

setcookie('PHPSESSID', '', time()-3600,'/', '', 0, 0);

header("Location:login-acc.php");
exit; 
```

它将我重定向到登录页面，但同样，当我手动转到索引页面时，它让我直接进入。或者在被重定向到登录页面后，我点击“返回”按钮并让我直接进入。

如果我然后进入 FF Web 开发人员工具应用程序并删除所有 cookie 等，然后导航到索引页面，那么它会将我锁定在外面。

正如您在上面看到的，我尝试了多种方法，最后，我将它们全部放在一起，这应该做点什么。我的问题是，既然我已经投入了所有这些功能来尝试删除/取消设置/删除一般会话，我还能做什么？我对它应该如何工作感到有点迷茫。

有人可以引导我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:20:43.673

`session_start()`您在注销页面的顶部缺少一个。它试图修改一个不存在的会话！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T20:31:14.647

您必须开始会话才能结束会话。我建议看看... [http://php.about.com/od/advancedphp/ss/php_sessions_3.htm](http://php.about.com/od/advancedphp/ss/php_sessions_3.htm)

```
// you have to open the session to be able to modify or remove it 
session_start(); 

// to change a variable, just overwrite it 
$_SESSION['size']='large'; 

//you can remove a single variable in the session 
unset($_SESSION['shape']); 

// or this would remove all the variables in the session, but not the session itself 
session_unset(); 

// this would destroy the session variables 
session_destroy(); 
```

# image - 如何在 AS3 中修复舞台上的重叠对象

> ID：15855551
> 
> 赞同：0
> 
> 时间：2013-04-06T20:16:33.260
> 
> 标签：image, actionscript-3

我有一个 Flash 游戏，其中我有一张图片设计为提示文本框和内部带有相关文本的文本框，但文本框被图像隐藏。任何人都知道如何制作，以确保文本框位于顶部，或者我需要做些什么来防止这种情况发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T22:56:25.090

使用的另一个答案`setChildIndex`肯定会起作用，但是，我认为您应该采取不同的设计方法来完全消除头痛。

例如，在游戏中，我可能有不同的层，例如：

```
backgroundLayer
gameLayer
interfaceLayer 
```

这 3 个 Sprite 层将按该顺序添加到舞台中。然后我会将显示对象添加到适当的图层。因此，我添加到 backgroundLayer 或 gameLayer 的任何内容都将始终位于 interfaceLayer 上我的用户界面的“后面”。

这使您不必担心不断分层。答案`setChildIndex`将解决那一刻的问题，但是如果将其他内容添加到容器中，它将与您的文本框重叠，这是我不认为您想要的。

这是一个例子：

```
var backgroundLayer:Sprite = new Sprite;
var gameLayer:Sprite = new Sprite;
var interfaceLayer:Sprite = new Sprite;

addChild(backgroundLayer);
addChild(gameLayer);
addChild(interfaceLayer); 
```

现在，无论您添加到 interfaceLayer 中的什么，都将始终位于您添加到 gameLayer 或 backgroundLayer 的对象之上。

因此，对于您的文本框，只需将其添加到您的 interfaceLayer 和您想要在其后面的任何其他对象，您添加到 gameLayer 或 backgroundLayer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:52:30.790

将显示对象添加到显示对象容器的顺序会影响它们的 z 顺序，即从前到后的顺序。最后添加的显示对象成为最前面。因此，显示对象容器的子项的子索引对于重叠子项的绘制很重要。

如果将图片和文本放在同一个 DisplayObjectContainer 上，例如 MovieClip：

假设您的 DisplayObjectContainer 是 mc。

你的文本框是 txt

请试试这个：

```
mc.setChildIndex(txt, mc.numChildren-1); 
```

# java - 将 ANTLR4 集成到 Java 中

> ID：15855556
> 
> 赞同：0
> 
> 时间：2013-04-06T20:16:37.153
> 
> 标签：java, antlr4

我已经用 ANTLR4 生成并编译了一个语法。通过命令行我可以查看是否有错误，但是我在将此解析器成功集成到 java 程序中时遇到问题。我可以使用 ANTLR4 方法，因为我已经在 Eclipse 中将 JAR 添加到我的库中，但是我完全无法检索令牌文本或找出是否以任何有意义的方式生成错误。任何帮助，将不胜感激。如果我以任何方式模棱两可，请告诉我，我将深入研究更多细节。

查看以前的版本，可能是我想要的类似 compilerUnit() 的等效方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-31T20:23:15.963

像这样的东西应该可以工作（假设你从你的语法中生成）`GeneratedLexer`：`GeneratedParser`

```
import java.io.FileInputStream;
import java.io.InputStream;
import org.antlr.v4.runtime.ANTLRInputStream;
import org.antlr.v4.runtime.CommonTokenStream;
import org.antlr.v4.runtime.tree.ParseTree;
import test.GeneratedLexer;
import test.GeneratedParser;

public class Main {
    public static void main(String[] args) throws Exception {
        String inputFile = null;
        if (args.length > 0) {
            inputFile = args[0];
        }
        InputStream is = System.in;
        if (inputFile != null) {
            is = new FileInputStream(inputFile);
        }
        ANTLRInputStream input = new ANTLRInputStream(is);
        GeneratedLexer lexer = new GeneratedLexer(input);
        CommonTokenStream tokens = new CommonTokenStream(lexer);
        GeneratedParser parser = new GeneratedParser(tokens);
        ParseTree tree = parser.startRule();

        // Do something useful with the tree (e.g. use a visitor if you generated one)
        System.out.println(tree.toStringTree(parser));
    }
} 
```

如果您不想从语法中预生成它们（或者您有动态语法），您也可以使用[解析器和词法分析器解释器。](http://www.antlr.org/wiki/display/ANTLR4/Parser+and+lexer+interpreters)

# macos - 如何在 Emacs 的 shell 命令中使用正确的 rbenv Ruby 版本？

> ID：15855557
> 
> 赞同：4
> 
> 时间：2013-04-06T20:16:39.390
> 
> 标签：macos, emacs, zsh

这是我当前的设置：

*   带有山狮的 MacBook
*   Emacs 是[http://emacsformacosx.com/](http://emacsformacosx.com/)
*   具有全局 1.9.3-p374 的 rbenv
*   登录shell是zsh

我的 ~/.zprofile （我确定该文件被执行）：

```
# Customize to your needs...
export PATH=/Users/username/.rbenv/shims:/Users/username/.nvm/v0.9.8/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/sbin

eval "$(rbenv init -)" 
```

我想将我的全局定义的 ruby​​ 版本与`M-x shell-command`（或`M-!`）一起使用。我希望`M-! ruby -v`回来`ruby 1.9.3p374 (2013-01-15 revision 38858) [x86_64-darwin12.3.0]`，但我得到`ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]`了。

如果我`ruby -v`在`M-x shell`正确的版本中运行加载。我怀疑`M-!`它不能按预期工作，因为它作为非交互式 shell 运行。

有没有办法解决这个问题，除了运行类似的东西：`M-! eval "$(rbenv init -)" && ruby -v`？这可行，但我不想在`eval "$(rbenv init -)" &&`我执行的所有内容之前插入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-02T20:23:36.830

Emacs 需要看到您从 shell 的路径，为了使这更容易，请使用以下 elisp 包。

[https://github.com/purcell/exec-path-from-shell](https://github.com/purcell/exec-path-from-shell)

您可以通过 el-get 安装它，也可以通过将其放到您的`~/.emacs.d/lisp`目录中并将其添加到您的`~/.emacs`or`~/.emacs.d/init.el`文件中来手动安装它。

```
(add-to-list 'load-path "~/.emacs.d/lisp")
(unless (require 'exec-path-from-shell nil 'noerror)
  (exec-path-from-shell-initialize)) 
```

lisp 文件将负责其余的工作。

# django - Django - 防止重复记录

> ID：15855560
> 
> 赞同：4
> 
> 时间：2013-04-06T20:17:17.230
> 
> 标签：django, django-validation

我的数据库中有一个客户记录列表。每年，我们都会为每个客户生成一个工单。然后，对于每个工单记录，用户应该能够创建特定于工单的注释。然而，并不是所有的工单都需要备注，只是一些。

现在，我不能简单地将`note`字段添加到工单，因为有时我们需要在工单生成之前创建注释。有时，此注释特定于 2-3 年内不会发生的工作订单。因此，笔记和工单必须是独立的，尽管当它们都存在时它们会“找到”对方。

好的，情况就是这样。我希望用户能够填写一个非常简单的`note`表单，其中有两个字段：`noteYear`和`note`. 因此，他们所做的就是选择一年，然后写下笔记。更重要的是，用户不应该能够为同一个客户在同一年创建两个笔记。

我想要得到的是通过确保该客户在那一年没有笔记来验证笔记。我假设这将通过`is_valid`表单中的自定义方法来实现，但我不知道如何去做。

这是我到目前为止所尝试的（请注意，我知道这是错误的，它不起作用，但这是我迄今为止的尝试）：

请注意，这`systemID`是我的客户记录

我的模型：

```
class su_note(models.Model):
    YEAR_CHOICES = (
        ('2013', 2013),        
        ('2014', 2014),        
        ('2015', 2015),        
        ('2016', 2016),        
        ('2017', 2017),        
        ('2018', 2018),        
        ('2019', 2019),        
        ('2020', 2020),        
        ('2021', 2021),        
        ('2022', 2022),        
        ('2023', 2023),        
    )
    noteYear = models.CharField(choices = YEAR_CHOICES, max_length = 4, verbose_name = 'Relevant Year')
    systemID = models.ForeignKey(System, verbose_name = 'System ID')
    note = models.TextField(verbose_name = "Note")

    def __unicode__(self):
        return u'%s | %s | %s' % (self.systemID.systemID, self.noteYear, self.noteType) 
```

我的表格：

```
class SU_Note_Form(ModelForm):
    class Meta:
        model = su_note
        fields = ('noteYear', 'noteType', 'note')
    def is_valid(self):
        valid = super (SU_Note_Form, self).is_valid()

        #If it is not valid, we're done -- send it back to the user to correct errors
        if not valid:
            return valid

        # now to check that there is only one record of SU for the system
        sysID = self.cleaned_data['systemID']
        sysID = sysID.systemID
        snotes = su_note.objects.filter(noteYear = self.cleaned_data['noteYear'])
        for s in snotes:
            if s.systemID == self.systemID:
                self._errors['Validation_Error'] = 'There is already a startup note for this year'
                return False
        return True 
```

**编辑**——这是我的解决方案（感谢 janos 让我朝着正确的方向前进）

我的最终形式如下所示：

```
class SU_Note_Form(ModelForm):
    class Meta:
        model = su_note
        fields = ('systemID', 'noteYear', 'noteType', 'note')
    def clean(self):
        cleaned_data = super(SU_Note_Form, self).clean()
        sysID = cleaned_data['systemID']
        sysID = sysID.systemID
        try:
            s = su_note.objects.get(noteYear = cleaned_data['noteYear'], systemID__systemID = sysID)
            print(s)
            self.errors['noteYear'] = "There is already a note for this year."
        except:
            pass
        return cleaned_data 
```

对于其他查看此代码的人来说，唯一令人困惑的部分是具有以下内容的行：`sysID = sysID.systemID`. 这`systemID`实际上是另一个模型的一个领域——尽管`systemID`也是这个模型的一个领域——可能是糟糕的设计，但它确实有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T20:48:30.753

请参阅 Django 文档中的此页面： [https ://docs.djangoproject.com/en/dev/ref/forms/validation/](https://docs.djangoproject.com/en/dev/ref/forms/validation/)

由于您的验证逻辑依赖于两个字段（年份和 systemID），因此您需要使用表单上的自定义清理方法来实现这一点，例如：

```
def clean(self):
    cleaned_data = super(SU_Note_Form, self).clean()
    sysID = cleaned_data['systemID']
    sysID = sysID.systemID
    try:
        su_note.objects.get(noteYear=cleaned_data['noteYear'], systemID=systemID)
        raise forms.ValidationError('There is already a startup note for this year')
    except su_note.DoesNotExist:
        pass

    # Always return the full collection of cleaned data.
    return cleaned_data 
```

# algorithm - 算法 - 创建考试时间表

> ID：15855561
> 
> 赞同：0
> 
> 时间：2013-04-06T20:17:18.967
> 
> 标签：algorithm, optimization, flow, constraint-programming

我有一个基于三个因素创建考试时间表的问题：房间、课程和天数。有一定数量的房间 r、课程 c 和天 d，其中每天有三个时段。

还有一组学生和从学生到课程的映射，因此不会有任何冲突。

我正在尝试为此找到一种算法，并发现这适合最大流量问题。我在为此制作流网络图时遇到了麻烦。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:13:24.267

ITC2007 **track 1 考试**定义了一个非常好的、非平凡的考试调度问题，涉及多个真实世界的数据集。因为这个问题是 NP 完全的，所以没有已知的多项式算法可以最优地解决它。

[有关哪些算法可以处理这个问题的灵感，请查看这个与OptaPlanner](http://www.optaplanner.org/)竞争的 java 开源实现：

*   [考试安排文档](http://docs.jboss.org/drools/release/6.0.0.Alpha9/drools-planner-docs/html_single/#examination)，包括所有约束、数据集大小和域模型的描述。
*   [考试安排源代码](https://github.com/droolsjbpm/optaplanner/tree/master/optaplanner-examples/src/main/java/org/optaplanner/examples/examination)

# c# - 在 WinForms 中通过引用返回位图的矩形部分

> ID：15855562
> 
> 赞同：0
> 
> 时间：2013-04-06T20:17:24.250
> 
> 标签：c#, winforms

当我有一个巨大的位图时 - 我可以通过引用以某种方式返回它的矩形部分吗？无需复制内容？

伙计们，让我强调一下我是在 WinForms 中做的——我可以在那里做点什么吗？

注意：几周前我问过同样的问题，但它被关闭为重复。然而，这是因为版主认为我要求 WPF 中的解决方案 - 但我问的是 WinForms！谢谢。

# c++ - opencv设置图片维度

> ID：15855565
> 
> 赞同：1
> 
> 时间：2013-04-06T20:17:36.097
> 
> 标签：c++, opencv

嗨，

我正在使用 OpenCV2.4.4 开发以下应用程序：

1.  读取 Mat 格式的图像；
2.  将其转换为灰度；
3.  检测人脸（如果存在）；
4.  裁剪人脸，提取感兴趣区域；
5.  将裁剪的图像保存到文件。

我的问题是：我可以为保存的图像（宽度和高度）设置标准尺寸吗？

我尝试使用**调整大小**功能，但实际上我并不想要它，因为它只保存了脸部的一部分。

```
cv::cvtColor(croppedImage, greyMat, CV_BGR2GRAY);
greyMat.resize(100);    
imwrite("result.jpg", greyMat); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T20:31:54.357

尝试使用[cv::resize](http://opencv.willowgarage.com/documentation/cpp/geometric_image_transformations.html#cv-resize)代替：

```
cv::cvtColor(croppedImage, greyMat, CV_BGR2GRAY);
cv::Mat result;
cv::resize(greyMat, result, cv::Size(100,100));    
imwrite("result.jpg", result); 
```

有关详细信息，请参阅文档。

# python - Python面向对象不改变init函数中的值

> ID：15855576
> 
> 赞同：0
> 
> 时间：2013-04-06T20:18:52.010
> 
> 标签：python, oop, pygame

嗨，我正在制作游戏，但遇到了一个绊脚石，这是我下面代码的一部分：

```
class player(object):
    def __init__(self):
        self.x = 10
        self.y = 10
        self.amount = 5
        self.answer = 0

     def move(self):
        self.x += self.amount
        self.y += self.amount

while True:
    player().move()
    print player().x 
```

这可能是一个非常基本的错误，但无论 move() 函数做什么，它似乎都不会改变 self.x 或 self.y 的值，有人可以请我朝正确的方向戳！谢谢，我意识到我可能缺少一些非常基本的东西，我对 OO 没有太多经验

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T20:20:33.267

```
player().move()    # create a player and move it
print player().x   # create another player and print its x 
```

你的意思是：

```
aplayer = player()
aplayer.move()
print aplayer.x 
```

PS：常见的做法是类名大写：

```
class Player(object):
    def __init__(self):
        self.x = 10
        self.y = 10
        self.amount = 5
        self.answer = 0

     def move(self):
        self.x += self.amount
        self.y += self.amount

player = Player()
player.move()
print player.x 
```

这样就很容易区分类和对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T02:32:56.333

好的。对方说的是需要把“玩家”设置为George这样的变量，然后调用George.move()

所以

```
class Player(object):
    def __init__(self):
        self.x = 10
        self.y = 10
        self.amount = 5
        self.answer = 0

    def move(self):
        self.x += self.amount
        self.y += self.amount

While True:
    george = Player()
    george.move()
    print george.x 
```

那应该工作。您可以将“george”更改为您想要的任何内容，只要确保它是一致的。

# c++ - 为什么我插入 STL 列表运行缓慢？

> ID：15855577
> 
> 赞同：2
> 
> 时间：2013-04-06T20:18:57.177
> 
> 标签：c++, list, stl

我正在尝试使用邻接表实现无向图。我使用了以下代码：

```
int v,e;
scanf("%d%d",&v,&e);
list<int> graph[3000];
for(int i=0;i<e;i++){
    int a,b;
    scanf("%d%d",&a,&b);
    graph[a].push_back(b);
    graph[b].push_back(a);
} 
```

为了测试我的代码的运行时间，我创建了一个包含 3000 个顶点和所有可能边的输入文件。运行时间为 2.2 秒。我尝试通过将其更改为二维数组来进行优化，如下所示

```
int graph[3000][3000];

for(int i=0;i<e;i++){
    int a,b;
    scanf("%d%d",&a,&b);
    graph[a][p[a]]=b;
    graph[b][p[b]]=a;
    p[a]++;
    p[b]++;
} 
```

其中“p”的大小为 3000，初始化为全零。对于相同的输入文件，此代码仅在 0.35 秒内运行。我正在使用 gcc-4.3.2 编译器。我知道在列表末尾插入可以在恒定时间内完成，那么为什么第一个代码运行缓慢？是否有机会优化链表实现？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T20:31:11.363

避免`std::list`。这是一个双向链表，它对缓存非常不友好（节点随机分布在内存中）并且涉及大量开销（每个元素 2 个指针）。所以每次你追加一些东西时，列表都会分配`2*sizeof(void*)+sizeof(int)`字节和额外的一些内存管理开销`operator new`。

稍后在算法中，当您迭代这些值时，您实际上会跳过整个内存，这会更慢。

二维数组没有这个问题，但确实浪费了一些内存。

我通常将邻接表表示为向量的向量。

```
std::vector<std::vector<int> > graph; 
```

请注意，向量也可以`push_back`取值`O(1)`（以及 a `std::deque`，它可以更快地追加，但在遍历时更慢）。如果预计图是密集的，那么邻接矩阵可能是更好的选择。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-06T20:21:44.517

插入列表需要分配一个新节点。因此，当您进行 6000 次推回时，您必须进行 6000 次内存分配。在数组的情况下，您根本不需要进行任何分配，因此速度要快得多。这就是全部的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T17:22:14.220

要在这里扩展答案，请自己实现一个链表类，您会发现它为什么很慢。

可以做一些事情，例如实现一个包含容量值、大小值和指向实际列表中第一个节点的指针的列表。该指针实际上是一个动态数组，当 size==capacity 时，数组被调整大小并且容量增加了一些因子（例如 10）。

缺点是它被限制为 2^(sizeof capacity * CHAR_BIT) - 1 个元素，而每次仅分配节点涉及更长的插入时间，而理论上节点数量不受限制。在将更快的列表实现的容量最大化之前，您很可能会用完内存，但不能保证这一点，更不用说调整列表的大小通常涉及对其进行复制，因此最大容量突然变得很大无论如何，它的限制较小。

链表通常很慢。它们有其用途，但如果您需要更快的运行时间，找到更好的实现，使用不同的容器，例如 std::vector，或者自己创建一个解决方案，尽管老实说标准容器做得很好。

# flash - 1136：参数数量不正确。预期 0 AS3 闪存 CS6

> ID：15855578
> 
> 赞同：1
> 
> 时间：2013-04-06T20:19:00.067
> 
> 标签：flash, flash-cs6, flash-cs5

主文件

```
package{
    import flash.display.*;
    import flash.events.Event;

    public class main extends MovieClip{

        public function main(){
            changeState(null,"menu");
        }
        public function changeState( CurrentState, NextState){
            if(CurrentState != null){
                removeChild(CurrentState);
            }
            if(NextState == "menu"){
                var mm:mainMenu = new mainMenu(changeState);
                addChild(mm);
            }
            else if(NextState == "game"){
                var g:CollapsingBlocks = new CollapsingBlocks(changeState);
                addChild(g);
            }
            else if(NextState == "exit"){

            }
        }
    }
} 
```

maniMenu.as

```
package{
    import flash.display.*;
    import flash.events.MouseEvent;
    import flash.events.Event;

    public class mainMenu extends MovieClip{

        var theCallBackFunction:Function;
        public function mainMenu(callBack){
            var btnPlay:mmPlay = new mmPlay();
            btnPlay.addEventListener(MouseEvent.MOUSE_DOWN, btnP_Button);
            btnPlay.x=width/2=btnPlay.width/2;
            btnPlay.y=height/2=btnPlay.height/2;
            addChild(btnPlay);

            var btnExit:mmExit = new mmExit();
            btnExit.addEventListener(MouseEvent.MOUSE_DOWN, btnE_Button);
            btnExit.x=width/2=btnExit.width/2;
            btnExit.y=height/2=btnExit.height/2;
            btnExit.y + btnExit.height + 4;
            addChild(btnExit);

            theCallBackFunction = callBack;
        }
        public function btnP_button(e:MouseEvent){
            theCallBackFunction (this, "game");
            return;
        }
        public function btnE_button(e:MouseEvent){
            theCallBackFunction (this, "exit");
            return;
        }
    }
} 
```

CollapsingBlock.as

```
..
public function startCollapsingBlocks(callBack) {
.. 
```

如何解决这个问题呢？（错误 1136），我使用的是 Flash CS6 版本。游戏文件名为 CollapsingBlocks.fla，主函数名为 startCollapsingBlocks，我试图在这里制作简单的 Flash 游戏菜单，带有 2 个按钮（播放和退出）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:28:37.040

看起来你正在调用一些不需要参数的函数，但你正在给它参数。从您的代码中，它唯一可以是`theCallBackFunction (this, "game");`and `theCallBackFunction (this, "exit");`，因为它们是唯一的运行时引用

检查 的值`theCallBackFunction`是否始终是需要 2 个参数的函数。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-07T06:20:38.427

0 个预期参数意味着您在函数括号内添加了一些非预期的示例：

```
 function mainMenu(callBack) //this is a 1 argument expected answer
    function mainMenu();        this expects no expected arguments 
```

请检查你在哪里请求函数，你会发现函数说明/参数应该是 0；

否则你已经为这个函数定义了零周长/参数

# java - 使 GWT 应用程序与 Rest API 并行运行（在 Root 中部署 Resteasy）

> ID：15855579
> 
> 赞同：2
> 
> 时间：2013-04-06T20:19:00.150
> 
> 标签：java, rest, gwt, servlets, resteasy

使用 GWT 时，我们使用以下 URL 形式：

调试：

```
http://127.0.0.1:8888/index.html?gwt.codesvr=127.0.0.1:9997#hash 
```

编译：

```
http://127.0.0.1:8888/index.html#hash 
```

我需要能够访问底层的 Rest API。

我需要在“根”中映射

```
http://127.0.0.1:8888/{contentId} 
```

但是，这肯定会破坏 GWT 应用程序的访问权限，并且将无法再访问它。

考虑到在根目录中拥有 Rest API 的主要要求，我如何才能使这项工作协同工作？

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
       <web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

    <context-param>
        <param-name>resteasy.guice.modules</param-name>
        <param-value>org.jboss.errai.ui.demo.server.MyModule</param-value>
    </context-param>

    <listener>
        <listener-class>
            org.jboss.resteasy.plugins.guice.GuiceResteasyBootstrapServletContextListener
        </listener-class>
    </listener>

    <servlet>
        <servlet-name>Resteasy</servlet-name>
        <servlet-class>
            org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher
        </servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>Resteasy</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

**编辑：**

这个想法是我应该能够做到这两点：

```
http://127.0.0.1:8888/index.html#hash 
```

和

```
http://127.0.0.1:8888/abc123 
```

也就是说，与“GWT servlet”共存，因为 GWT servlet 和 Rest API“servlet”都将部署在同一服务器和同一 webapp 路径中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T08:11:10.817

显然，您需要在自己的 servlet 中处理根上下文。基本思想是将 YourRoutingServlet 映射到 /* 路径，然后通过分析请求路径（gwt 或 rest）来处理 get/post 和其他调用，并将处理委托给适当的 servlet。

根据您的应用程序特定，您可以扩展例如 gwt servlet(RemoteServiceServlet) 并检查请求 url，如果这是一个 gwt url(带有#hash)，则只需调用 super 方法，如果不是，则将 req/resp 委托给 rest servlet。

这也意味着您必须在您的 servlet 中有 rest servlet 实例，或者您可以使用 servlet 重定向（我不建议这样做）

# nginx - 协助优化高流量服务器

> ID：15855580
> 
> 赞同：0
> 
> 时间：2013-04-06T20:19:08.007
> 
> 标签：nginx, webserver, fastcgi, vps

我需要一些帮助。目前，我有以下软件包：

2048 MB 80GB RAID 10 磁盘空间 4x CPU 优先级 5000 GB 带宽 CentOS

(VPS-4) [http://www.knownhost.com/vps_packages.html](http://www.knownhost.com/vps_packages.html)

我的 VPS 一直在接收大量流量。一天之内，它的页面浏览量就达到了 100 万！

尽管这很酷，但自从点击量急剧上升以来，我们就一直受到问题的困扰。

我们一开始使用的是 SuPHP，它会占用大量资源。服务器每隔几天就会关闭一次，我们会收到有关运行过多进程的自动电子邮件。

然后我们切换到 FastCGI。这一直运行良好，我们停止收到这些电子邮件。但是，在高峰时间，如果有很多人连接，那么网页将不会显示。您必须刷新页面几次才能显示它（听起来好像所有连接插槽都被阻止了）。

我们目前在这台服务器上使用 NGINX + Apache w/ CPANEL + eAccelerator + FastCGI。

忽略当前的设置配置并牢记我们正在使用的硬件，你们有任何建议的配置可能最适合支持所有这些命中吗？

请记住，大量点击发生在一页（不要问！）。该页面上几乎没有任何 PHP（但部分是动态的，因此需要 PHP），甚至没有连接到数据库。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:03:39.180

在整个过程中，我将修改**nginx**配置。Apache 可以保持原样。

**第 1 步**：部署 gzip 压缩

这一步非常简单——gzip-compress 输出。

```
gzip             on;
gzip_min_length  1000;
gzip_proxied     expired no-cache no-store private auth;
gzip_types       text/plain application/xml application/json; 
```

这将做的就是为：text/html（默认）、application/xml、application/json 和 text/plain 启用 gzip 压缩。顺便说一句，我假设您正在从 CDN 提供图像。如果没有，也为他们启用它。

这应该会看到您使用的带宽下降，但会通过轻微的 CPU 成本来抵消。然而，CPU 很少是瓶颈——通常是带宽和磁盘 I/O，尤其是在静态站点上，所以我们将致力于解决这个问题。

**第 2 步（可选）**：如果可以，请删除 apache

如果您只是提供静态内容，那么 nginx 本身就值得拥有。如果您已经在使用 fastCGI，请考虑使用 PHP-FPM，它可以让您缩短 Apache 的内存消耗。

**第 3 步**：通过标头缓存

这将通过强制 nginx 提供的所有页面的本地缓存版本来降低带宽使用率。非常酷的东西，因为它会完全阻止客户重新下载他们已经拥有的东西。

```
expires       24h;
add_header    Cache-Control  public; 
```

这一步还有一个意想不到的优势：apache 将获得更少的查询。

**第 4 步**：内存中页面缓存

此步骤将使您的页面脱离磁盘 I/O 并进入内存。如果您有一个静态页面，您应该会看到这样做的显着收益。[这个问题](https://serverfault.com/questions/30705/how-to-set-up-nginx-as-a-caching-reverse-proxy)有很多关于这个的。覆盖它需要很长时间。

这将有两个优点：

*   nginx 将更频繁地从内存中加载而不是查询 apache，从而减轻 Apache 上的负载
*   因此，Apache 本身将减少从磁盘和 fork 工作人员中读取的频率

完成所有这些后，您应该会看到负载减少，可能足以减少 Apache 上的工作人员数量。

# php - PHP中的Excel公式

> ID：15855584
> 
> 赞同：5
> 
> 时间：2013-04-06T20:19:21.520
> 
> 标签：php, excel

谁能告诉我这个 MS Excel 函数背后的数学原理。我正在用 php 编写代码，我无法使用 Excel 来计算这些，但我仍然需要相同的结果。

```
CUMIPMT(rate,nper,pv,start_period,end_period,type) Returns the cumulative
interest paid on a loan between start_period and end_period. 
```

我的 Excel 函数 -

```
=IF($C$33<0,CUMIPMT($C$36/12,$C$35,-$C$33,$C$34,$C$34+11,0),-CUMIPMT($C$36/12,$C$35,$C$33,$C$34,$C$34+11,0)) 
```

还有一个问题 - 我使用`(=E11-E12)`了但它没有减去，它增加了两个值，我不明白为什么？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:24:04.293

我没用过，但你可能想看看[PHPExcel Library](http://phpexcel.codeplex.com/)。Excel 和 PHP 完全不同，您要么需要使用我链接到的库，要么需要编写函数来手动完成所有这些数学运算。就您而言，处理 excel 文件似乎是实现目标的最简单方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-19T19:29:10.167

我知道这个线程很旧，但是我今天正在将 Excel 电子表格转换为 Objective-c，并且也需要对此的答案。这是我最终写的解决方案：

```
double cumipmt(double rate, int nper, double pv, int start_period, int end_period, BOOL type)
{
    double cumipmt = 0;
    double thePmt = pmt(rate, nper, pv, 0, type);
    double endValue = pv;

    if (type==0)
{
    for (int i=1; i<=end_period; i++)
    {
        double beginning = endValue;
        double interest = beginning * rate;
        endValue = beginning + interest + thePmt;

        if (i>=start_period)
        {
            cumipmt += interest;
        }
    }
}
else
{
    for (int i=1; i<end_period; i++)
    {
        double beginning = endValue + thePmt;
        double interest = beginning * rate;
        endValue = beginning + interest + thePmt;

        if (i>=start_period)
        {
            cumipmt += interest;
        }
    }
}

    return cumipmt;
}

double pvFactor(double rate, int nper)
{
    return (1 / fvFactor(rate, nper));
}

double fvFactor(double rate, int nper)
{
    return pow(1+rate,nper);
}

double annuityPvFactor(double rate, int nper, bool type)
{
    if (rate == 0) {
        return nper;
    }
    else {
        return (1 + rate * type) * (1 - pvFactor(rate, nper)) / rate;
    }

}

double pmt(double rate, int nper, double pv, double fv, bool type)
{
    return (-1 * (pv + fv + pvFactor(rate, nper))) / (annuityPvFactor(rate, nper, type));
} 
```

我知道这不在 PHP 中，但转换起来应该很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T20:27:59.803

`IF( condition, [value_if_true], [value_if_false] )`

**条件**是您要测试的值。

**value_if_true**是可选的。如果条件评估为 TRUE，则返回该值。

**value_if_false**是可选的。如果条件评估为 FALSE，则返回该值。

所以基本上，它是这么说的

```
if ($C$33 < 0) {
    // if the condition is TRUE
    return CUMIPMT($C$36 / 12, $C$35, -$C$33, $C$34, $C$34 + 11, 0);
} else {
    // if the condition is FALSE
    return -CUMIPMT($C$36 / 12, $C$35, $C$33, $C$34, $C$34 + 11, 0);
} 
```

关于你的**`(=E11-E12)`**问题。尝试将其更改为 this `=E11-E12`。如果 E12 是负数，您必须记住减号将分配。

**编辑：** 关于你的评论，我希望这个链接有帮助

[http://www.excelforum.com/excel-programming-vba-macros/515109-need-longhand-formulas-for-cumipmt-and-cumprinc-functions-in-excel.html](http://www.excelforum.com/excel-programming-vba-macros/515109-need-longhand-formulas-for-cumipmt-and-cumprinc-functions-in-excel.html)

# javascript - 可以点击的覆盖div

> ID：15855585
> 
> 赞同：0
> 
> 时间：2013-04-06T20:19:26.397
> 
> 标签：javascript, html, css, opacity

我想知道是否有一种使用 css 或 javascript 的方法允许半透明的 div 元素在所有其他元素的顶部视觉显示，但仍然可以点击它下面的超链接和其他交互元素？只是一个异想天开的想法，让我的网站能够使网站的外观变暗或变亮。

编辑

我知道 z-index 将对象从背景移动到前景，但它们也会阻止交互式对象......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T20:22:55.347

这种行为可能通过`poiner-events:none`（非标准且不受 IE 支持）。最初是 SVG 功能，它支持任何 SVG 元素（IE 9+）：

```
<svg poiner-events="none">
  <rect width="100%" height="100%" fill="black" fill-opacity="0.5" />
</svg> 
```

但是对于您提到的效果，我建议在以下位置使用不透明度`body`和一些背景`html`：

```
body {
  opacity: 0.5;
}

html {
  background: black;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:23:06.270

在现有 div 之上创建另一个 div 元素，并使其 z-index 大于现有的。希望这会有所帮助。

# python - 在python中将空格替换为+

> ID：15855589
> 
> 赞同：1
> 
> 时间：2013-04-06T20:19:57.790
> 
> 标签：python

我在 python 中编写了一些代码，我遇到了一个问题，例如，当我有一个句子“这是我的第一个 python 程序”时，在使用该`split`函数后，我得到如下结果：

```
['this', 'is', 'my', 'very', 'first', 'python', 'program']
['this', 'is', 'my', 'very', 'first', 'python program']
['this', 'is', 'my', 'very', 'first python program']
['this', 'is', 'my', 'very first python program']
['this', 'is', 'my very first python program']
['this', 'is my very first python program']
['this is my very first python program'] 
```

现在我想将每个用 + 号分隔的单词传递到一个 url 中。

我想为每个循环使用一个，但我的问题是它应该自动替换它，如上所述。

例如， 的结果`"python program"`应该是`"python+program"`。

那么谁能告诉我如何在python中解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T20:27:53.897

最好使用正确的工具。你需要的是对文本参数进行urlencode，所以你需要使用`urllib.urlencode`函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T20:36:51.580

这个怎么样：

```
>>> a = "this is my first Python program"
>>> "+".join(a.split())
'this+is+my+first+Python+program' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T20:24:02.690

这应该工作

```
my_string = "this is my very first python program"
n = len(my_string.split(' '))
for i in range(n):
    my_string_split = [x.replace (" ", "+") for x in my_string.split(' ', n-i-1)]
    print my_string_split 
```

# jquery - jQuery 中缺少步骤并得到“ReferenceError: $ is not defined”

> ID：15855590
> 
> 赞同：-3
> 
> 时间：2013-04-06T20:19:58.510
> 
> 标签：jquery

我有一个 script.js 页面

```
$(document).ready(function () {

//errortrap
function alerts(str) {
    return false;
}
//errortrap

//lightbox
$('.LikeDiv').lightBox({ openPop: '.rename', closePop: '.cloSign', centerAlign: true });
//lightbox
});

function lightboxopen() {

$('.LikeDiv').load('subscriberforgotpassword.aspx');
return false;
}

function showLightBox() {

$('.rename').trigger('click');
} 
```

即使在 $ 存在之后，我也会收到此错误“ReferenceError: $ is not defined”。谁能告诉我如何解决这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:22:08.240

`$(document)`不保证已加载。为此，您需要：

*   以老式方式绑定到 DOM
*   包裹一个闭包
*   确保脚本在 jQuery 之后加载（即它的脚本标签在之后）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:20:48.113

该错误很可能是您在 script.js 之后加载 jquery。确保首先加载您对 jquery 库的引用。

# jquery - 从 AJAX 数据中隔离元素

> ID：15855593
> 
> 赞同：0
> 
> 时间：2013-04-06T20:20:11.047
> 
> 标签：jquery, ajax

我正在尝试从 AJAX 调用中提取一个元素（或者更确切地说是它的子元素），但很难将其隔离。我的代码如下：

```
function AJAXcomplete(data){
    var result = $(data).find('#productDetails > *');
    jQ('#productDetails').append(result);
};

function getDetails(e){
    e.preventDefault();
    var addy = jQ(this).attr("href");
    jQ('body').append('<div id="productDetails"></div>');
    jQ('#productDetails').show();
    $.get(addy, AJAXcomplete);
};

jQ('#slides').on('click', '.slideLink', getDetails); 
```

上面*应该*存储来自 AJAX 调用的孩子`#productDetails`，并将它们附加到新创建的具有相同 id 的 div 中。

我可以成功检索整个 AJAX 数据并附加（经过测试），但我无法获得我想要的元素 - 没有选择任何内容。我究竟做错了什么？

# java - min nm 以便对整个数组进行排序

> ID：15855594
> 
> 赞同：5
> 
> 时间：2013-04-06T20:20:12.480
> 
> 标签：java, algorithm

我在一次采访中被问到以下问题：

```
Given an array of integers, write a method to find indices m and n such that 
if you sorted elements m through n, the entire array would be sorted. Minimize
n-m. i.e. find smallest sequence. 
```

在下面找到我的答案，请对解决方案发表评论。谢谢！！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T20:28:31.777

终于找到解决问题的办法了，欢迎评论。

举个例子：

```
int a[] = {1,3,4,6,10,6,16,12,13,15,16,19,20,22,25} 
```

现在，如果我将其放入图表中（X 坐标 -> 数组索引和 Y 坐标 -> 数组的值），那么图表将如下所示： ![在此处输入图像描述](https://i.stack.imgur.com/qArIa.png)

现在，如果我们看到图表，有两个地方发生下降，一个在 10 之后，另一个在 16 之后。现在在之字形部分，如果我们看到最小值为 6，最大值为 16。所以我们应该排序的部分使整个数组排序在 (6,16) 之间。请参考下图：

![在此处输入图像描述](https://i.stack.imgur.com/uZRu2.png)

现在我们可以轻松地将数组分成三部分。中间部分是我们要排序的部分，以便对整个数组进行排序。请提供您宝贵的意见。我试图最好地向我的标签解释，如果我想解释更多，请告诉我。等待有价值的输入。

下面的代码实现了上面的逻辑：

```
public void getMN(int[] a)
{
    int min = Integer.MAX_VALUE; int max = Integer.MIN_VALUE;
    for(int i=1; i<a.length; i++)
    {
        if(a[i]<a[i-1])
        {
            if(a[i-1] > max)
            {
                max = a[i-1];
            }
            if(a[i] < min)
            {
                min = a[i];
            }
        }
    }
    if(max == Integer.MIN_VALUE){System.out.println("Array already sorted!!!");}
    int m =-1, n =-1;
    for(int i=0; i<a.length; i++)
    {
        if(a[i]<=min)
        {
            m++;
        }
        else
        {
            m++;
            break;
        }
    }
    for(int i=a.length-1; i>=0; i--)
    {
        if(a[i]>=max)
        {
            n++;
        }
        else
        {
            n++;
            break;
        }
    }
    System.out.println(m +" : "+(a.length-1-n));
    System.out.println(min +" : "+max);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T21:44:24.767

实际上，我想出了类似的东西：

```
public static void sortMthroughN(int[] a)
{   
    int m = -1;
    int n = -1;
    int k = -1;
    int l = -1;
    int biggest;
    int smallest;
    // Loop through to find the start of the unsorted array.
    for(int i = 0; i < a.length-1; i++)
        if(a[i] > a[i+1]) {
            m = i;
            break;
        }
    // Loop back through to find the end of the unsorted array.
    for(int i = a.length-2; i > 0; i--)
        if(a[i] > a[i+1]) {
            n = i;
            break;
        }
    biggest = smallest = a[m];
    // Find the biggest and the smallest integers in the unsorted array.
    for(int i = m+1; i < n+1; i++) {
        if(a[i] < smallest)
            smallest = a[i];
        if(a[i] > biggest)
            biggest = a[i];
    }

    // Now, let's find the right places of the biggest and smallest integers. 
    for(int i = n; i < a.length-1; i++)
        if(a[i+1] >= biggest) {
            k = i+1;      //1
            break;
        }

    for(int i = m; i > 0; i--)
        if(a[i-1] <= smallest) {                               
            l = i-1;    //2
            break;
        }
            // After finding the right places of the biggest and the smallest integers
            // in the unsorted array, these indices is going to be the m and n.
    System.out.println("Start indice: " + l);
    System.out.println("End indice: " + k);

} 
```

但是，我看到结果与您的解决方案@Trying 不一样，我误解了这个问题吗？顺便说一句，在您的代码中，它会打印

```
4 : 9
6 : 16 
```

这些是什么？哪些是指数？

谢谢。

编辑：通过添加标记为 1 的地方：

```
 if(a[i+1] == biggest) {
                k = i;
                break;
            } 
```

和 2：

```
 if(a[i+1] == smallest) {
            l = i;
            break;
         } 
```

这个比较好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-15T18:39:16.943

从数组末尾开始找到最大值更容易：

```
public void FindMinSequenceToSort(int[] arr)
{
    if(arr == null || arr.length == 0) return;

    int m = 0, min = findMinVal(arr);
    int n = arr.length - 1, max = findMaxVal(arr);

    while(arr[m] < min)
    {
        m ++;
    }

    while(arr[n] > max)
    {
        n --;
    }

    System.out.println(m);
    System.out.println(n);
}

private int findMinVal(int[] arr)
{
    int min = Integer.MAX_VALUE;
    for(int i = 1; i < arr.length; i++)
    {
        if(arr[i] < arr[i-1] && arr[i] < min)
        {
            min = arr[i];
        }
    }

    return min;
}

private int findMaxVal(int[] arr)
{
    int max = Integer.MIN_VALUE;
    for(int i = arr.length - 2; i >= 0; i--)
    {
        if(arr[i] >= arr[i+1] && arr[i] > max)
        {
            max = arr[i];
        }
    }

    return max;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-17T20:27:04.427

实际上，您可以有两个指针，最后一个指针向后移动以检查最短未排序序列的起始索引。这是一种 O(N2) 但更清洁。

```
public static int[] findMinUnsortedSequence(int[] array) {
        int firstStartIndex = 0;
        int startIndex = 0;
        int endIndex = 0;
        for (int i = 0; i < array.length; i++) {
            for (int j = 0; j < i; j++) {
                if (array[j] <= array[i]) {
                    startIndex = j + 1;
                } else {
                    endIndex = i;
                    if (firstStartIndex == 0) {
                        firstStartIndex = startIndex;
                    }
                }
            }
        }
        return new int[]{firstStartIndex, endIndex};
    } 
```

# jquery - 通过 css 或 Jquery 进行对角线悬停

> ID：15855600
> 
> 赞同：1
> 
> 时间：2013-04-06T20:20:58.073
> 
> 标签：jquery, css, web

我想制作某个图像，当鼠标移到它上面时它会变成另一个图像；通过创建链接可以轻松使用css，并且此链接充当图像更改的部分，在进行方形悬停时没问题。

但是我想在对角线图像上悬停，我该怎么做？

[例如此图像](http://im39.gulfup.com/iwYGh.png)：- 当鼠标悬停在链接 1 上时，图像变为白色图像，例如。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:25:46.810

最简单的方法是使用具有透明区域的定位良好的图像（叠加层），如果您不想使用图像，我能想到的唯一方法是使用边框黑客来创建三角形/对角线。如果你在 Stu Nicholls 的网站 www.cssplay.com 上选择后者，那是我多年前学习的地方——但要注意它随着 CSS 的发展而相当先进

* * *

按要求解释：

因为使用从左到右倾斜的对角线图像不支持对角线（/ / / /），这意味着图像不会按照您的意愿出现在一起，而是一个倾斜的左下角将与右上角对齐之前的倾斜，而不是你想要的右下角

您可以通过使用 z-index 重叠它们以及相对或绝对定位来解决此问题：

```
.img1 { width: 100px; position: relative; z-index: 1; }
.img2 { width: 100px; position: relative; left: -100px; z-index: 2; }
.img3 { width: 100px; position: relative; left: -200px; z-index: 3; }
.img4 { width: 100px; position: relative; left: -300px; z-index: 4; } 
```

每个图像进一步移动会有更大的间隙，确切的距离将取决于图像的大小和倾斜角度。请记住，您实际上会想要移动包装 a 而不是图像本身，否则您可以单击的区域不会位于图像上方

# php - switch using $_SERVER['HTTP_HOST'] always defaults to first

> ID：15855604
> 
> 赞同：1
> 
> 时间：2013-04-06T20:21:43.687
> 
> 标签：php, switch-statement

I have the following code:

```
<?php
echo $_SERVER['HTTP_HOST'];
// CONFIGURATION ITEMS
$captcha_private_key = '';
$captcha_public_key = '';
switch ($_SERVER['HTTP_HOST']) {
    case 'earth-neighbours.com' || 'www.earth-neighbours.com':
        $captcha_private_key = '6Lcb_t4SAAAAALkdH4njSny2HYbrmGKS_G84kM_d';
        $captcha_public_key = '6Lcb_t4SAAAAAPEtqJEcWXuo0zmRD5PxYkXx84R4';
        echo 'live';
        break;
    case 'earth-neighbours.projects.mi24.net':
        $captcha_private_key = '6Lca_t4SAAAAAJb5L4sA7fEHxDFA0Jl8jFw-h3hE';
        $captcha_public_key = '6Lca_t4SAAAAAFd-Q2k8esFa9U8nQ2rirEZHFtAH';
        break;
    case 'earth-neighbours.local':
        $captcha_private_key = '6LcZ_t4SAAAAAGc1_S9ahxo-Vg-e7QgHg4yAWBVU';
        $captcha_public_key = '6LcZ_t4SAAAAAPHQDb_f-g4mS6mpmc0heustHQ60&hl';
        echo 'local';
        break;
}
?> 
```

It's running on the local server (earth-neighbours.local) so should output 'local'. Instead it outputs 'live'. The echo at the top however (echo $_SERVER['HTTP_HOST'];) returns the url earth-neighbours.local so it should be 'local' that is echoed. This has me stumped. I had it working before and now I've shifted it to the top of the page and it doesn't work. Weird! Anyone?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T20:26:27.103

PHP 不像其他编程语言那样做 switch case 或语句。

当您编写以下内容时：

```
 switch ($test) {
   case 1 || 2:
    $blah();
    break;
 } 
```

这就是实际发生的情况：

```
 switch ($test) {
   if (true == $test) {
   }
 } 
```

发生这种情况的原因是案例内容实际上被评估了，并且在 PHP 中，`1 || 2 === true`. 然后 PHP 对 $test 进行类型转换为布尔值，并且 $test 除非为空，否则结果为真。

PHP“正确”的语法是：

```
switch ($test) {
  case 1:
  case 2:
    $blah();
    break; 
```

在 PHP（实际上还有一些其他语言）中，一旦解释器`switch`进入`break`. 在案件结束时不打破告诉它继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:23:53.737

利用：

```
case 'earth-neighbours.com':
case 'www.earth-neighbours.com': 
```

代替：

```
case 'earth-neighbours.com' || 'www.earth-neighbours.com': 
```

因为这是[**switch 语句的错误语法**](http://php.net/manual/en/control-structures.switch.php)

# ruby-on-rails - Rails 4，使用 ActiveRecord 的原始查询

> ID：15855606
> 
> 赞同：38
> 
> 时间：2013-04-06T20:21:52.063
> 
> 标签：ruby-on-rails, ruby

目前有没有办法在 Rails 4.0.0.beta1 中使用 ActiveRecord 进行原始 SQL 选择查询？我看到 ActiveRecord::Base.execute 不再存在。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-07T01:22:08.573

在这里试试这个，选择示例..：

```
query = "select ...."
results = ActiveRecord::Base.connection.execute(query) 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-04-27T11:01:58.877

加上我的十便士，使用 Model.connection.execute 的原始查询不会返回 ActiveRecord 模型 - 它会返回原始数据集。

以下将返回 ActiveRecord 模型：

```
MyModel.find_by_sql(query) 
```

编辑：当然假设您正在运行选择。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-02-12T01:53:36.003

在 Rails 4（也可能是以前的版本）中，如果您要使用自定义查询来提高速度，您可以添加一个`:skip_logging`参数来避免写入日志：

```
query = "SELECT ..."
results = MyModel.connection.execute(query, :skip_logging) 
```

（注意：如果我正确阅读了源代码，这在 PostgreSQL 中可能不成立。）

# c - long long 整数的错误计算

> ID：15855608
> 
> 赞同：0
> 
> 时间：2013-04-06T20:22:00.547
> 
> 标签：c

在循环结果的最后一次迭代中是错误的。我知道减法之前的数字可能比 long 大。这就是为什么我将 power 设置为 long long。最后一次迭代的结果应该是 17888888888888888889。为什么不是？

```
 const int NR_LEVELS = 18;
  unsigned long levels[NR_LEVELS];
  unsigned long long power = 10;
  for(unsigned int i = 0; i < NR_LEVELS; i++) {
    levels[i] = ((i+1)*10*power-(i+2)*power+1)/9;
    cout << levels[i] << endl;
    power *= 10;
  }
  levels[17] = 17888888888888888889lu;
  for(unsigned int i = 0; i < NR_LEVELS; i++) {
    cout << levels[i] << endl;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T20:25:52.940

中间值（除以 9 之前）溢出 64 位整数。这就是你没有得到预期结果的原因。

更准确地说，64位整数的最大值为：

```
18446744073709551615 
```

与除法前的（最小）中间值相比：

```
161000000000000000001 
```

这个答案假设`long`您的代码中的类型转换为 64 位整数类型（标准要求该`long`类型至少为 32 位，因此您可能还会根据环境获得 32 位整数类型）。根据操作系统、计算机体系结构和编译器，类型的上限`long`可能会有所不同。

# c++ - OpenMP(C/C++)：共享 unordered_map 的有效方式 > 和一个向量 线程之间

> ID：15855609
> 
> 赞同：1
> 
> 时间：2013-04-06T20:22:06.790
> 
> 标签：c++, c, parallel-processing, openmp

我有一个我想并行的 for 循环，但是线程必须共享 an`unordered_map`和 a `vector`。

因为 for 循环有点大，所以我将在这里发布它的简要概述，以便我可以清楚地说明我的主要问题。请阅读评论。

```
 unordered_map<string, vector<int>> sharedUM;

   /*
      here I call a function that updates the unordered_map with some
      initial data, however the unordered_map will need to be updated by
      the threads inside the for loop
   */

   vector<int> sharedVector;
  /* 
     the shared vector initially is empty, the threads will 
    fill it with integers, the order of these integers should be in ascending
    order, however I can simply sort the array after all the 
    threads finish executing so I guess we can assume that the order 
    does not matter
  */

   #pragma omp parallel for
   for(int i=0; i<N; i++){

      key = generate_a_key_value_according_to_an_algorithm();
      std::unordered_map<string, vector<int>::iterator it = sharedUM.find(key);

      /*
       according to the data inside it->second(the value), 
       the thread makes some conclusions which then
       uses in order to figure out whether 
       it should run a high complexity algorithm
       or not.
      */
       bool conclusion = make_conclusion();

       if(conclusion == true){

           results = run_expensive_algorithm();

          /*
             According to the results, 
             the thread updates some values of
             the key that it previously searched for inside the unordered_map
             this update may help other threads avoid running 
             the expensive algorithm
          */

       }

       sharedVector.push_back(i);

   } 
```

最初我将代码保持原样，所以我只是`#pragma`在 for 循环中使用它，但是在更新`sharedVector`. 所以我决定使用简单的锁来强制线程在写入向量之前获取锁。所以在我的实现中，我有这样的事情：

```
 omp_lock_t sharedVectorLock;
      omp_init_lock(&sharedVectorLock);
      ...
      for(...)
      ...
       omp_set_lock(&sharedVectorLock);
       sharedVector.push_back(i);
       omp_unset_lock(&sharedVectorLock);
      ...
      omp_destroy_lock(&sharedVectorLock); 
```

我已经多次运行我的应用程序，一切似乎都运行良好，直到我决定自动重新运行它太多次，直到我得到错误的结果。因为我对 OpenMP 世界和一般线程非常陌生，所以我不知道当编写器更新某些共享数据时我们应该锁定所有读取器这一事实。正如您在我的应用程序中看到的那样，线程总是从中读取一些数据`unordered_map`，以便得出一些结论并了解有关分配给它们的键的信息。如果两个线程必须使用同一个键，而其他线程试图读取这个键的值，而另一个线程已经达到更新这些值的地步，会发生什么？我相信这就是我的问题发生的地方。

但是，我现在的主要问题是我不确定避免此类事情发生的最佳方法是什么。就像我的系统在 99% 的时间里都在工作，但是这 1% 会破坏一切，因为两个线程很少分配有相同的键，这反过来又是因为我的 unordered_map 通常很大。

锁定 unordered_map 会做我的工作吗？最有可能，但这不会有效，因为`A`想要使用密钥`x`的线程必须等待`B`已经在使用密钥`y`的线程，而该线程可能与完成`y`不同`x`。

所以我的主要问题是，我应该如何解决这个问题？`unordered_map`当且仅当两个线程使用相同的密钥时，如何锁定？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:34:54.913

*1*关于使用锁和互斥锁。*您必须在并行块之外*（之前）声明和初始化锁变量`#pragma omp parallel`，然后在并行块内使用它们：（1）获取锁（如果另一个线程已锁定它，这可能会阻塞），（2）更改变量竞争条件，（3）释放锁。最后，在退出并行块后将其销毁。在并行块内声明的锁是线程本地的，因此无法提供同步。这可以解释你的问题。

*2*关于写入复杂的 C++ 容器。OpenMP 最初是为简单的 FORTRAN do 循环而设计的（类似于 C/C++ 的带有整数控制变量的循环）。一切更复杂的事情都会让你头疼。为了安全起见，对 C++ 容器的任何非常量操作都必须在锁（对同一容器上的*任何*此类操作使用相同的锁）或 omp 关键区域（对*任何*此类操作使用相同的名称）内执行同一个容器）。这包括`pop()`等等`push()`，除了简单的阅读。只有在这种非常量容器操作只花费一小部分时间的情况下，这才能保持高效。

*3*如果我是你，我不会为 openMP 烦恼（我用过，但现在后悔了）。使用 C++，您可以使用 TBB，它还带有一些线程安全但无锁的容器。它还允许您从递归执行的任务而非线程的角度进行思考（父任务产生子任务等），但 TBB 有一些简单的并行 for 循环实现，例如。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:53:33.453

另一种方法是使用 TBB 的[concurrent_unordered_map](http://threadingbuildingblocks.org/docs/help/reference/containers_overview/concurrent_unordered_map_cls.htm)。

您不必使用 TBB 的其余并行性支持（尽管如果您从头开始使用 C++，它肯定比 OpenMP 更“c++-ish”）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T08:59:51.040

这可能会有所帮助：

```
 vector<bool> sv(N); 
```

代替

```
 sharedVector.push_back(i); 
```

经过

```
 sv[i]=true; 
```

这可以避免锁（非常耗时），并且可以轻松地对 sharedVector 进行排序，例如

```
 for(int i=0; i<N;i++){
        if(sv[i])sharedVector.push_back(i);
    } 
```

# android - Button gravity changes when the button is clicked

> ID：15855615
> 
> 赞同：3
> 
> 时间：2013-04-06T20:22:45.997
> 
> 标签：android, android-layout

I have a big tablelayout with 28 buttons. (Making a calculator) Anyway when one of these buttons gets clicked the gravity of that button and even some buttons in the same row changes so that the text is aligned to the left end.

I have no idea and it´s starting to make me a bit crazy.

Here´s the layout.

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/LinearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/TableLayout1"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginBottom="10dp"
    android:background="#DDD"
    android:orientation="vertical" >

    <ScrollView
        android:background="#DDD"
        android:id="@+id/scrollView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <RelativeLayout
            android:id="@+id/RelativeLayout1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textViewInput"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="#000" />

            <TextView
                android:id="@+id/textViewResult"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_alignParentTop="true"
                android:layout_marginRight="5dp"
                android:gravity="right"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="#000" />

        </RelativeLayout>
    </ScrollView>
</LinearLayout>

<TableLayout
    android:id="@+id/TableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" >

    <TableRow
        android:id="@+id/TableRow07"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:gravity="center_vertical"
        android:weightSum="5" >

        <Button
            android:id="@+id/Button06"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_root"
            android:textColor="@android:color/primary_text_light"
            android:gravity="center" />

        <Button
            android:id="@+id/bAsin"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:paddingBottom="10dp"
            android:paddingTop="10dp"
            android:textColor="@android:color/primary_text_light"
            android:gravity="center" />

        <Button
            android:id="@+id/bAcos"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2" 
            android:gravity="center"/>

        <Button
            android:id="@+id/batan"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.4"
            android:gravity="center" />
    </TableRow>

    <TableRow
        android:id="@+id/TableRow06"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:weightSum="5" >

        <Button
            android:id="@+id/Button04"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_pi"
            android:textColor="@android:color/primary_text_light"
            android:gravity="center" />

        <Button
            android:id="@+id/Button03"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:paddingBottom="10dp"
            android:paddingTop="10dp"
            android:text="@string/_sin"
            android:textColor="@android:color/primary_text_light" 
            android:gravity="center"/>

        <Button
            android:id="@+id/Button02"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_cos"
            android:gravity="center" />

        <Button
            android:id="@+id/Button01"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.4"
            android:text="@string/_tan" 
            android:gravity="center"/>
    </TableRow>

    <TableRow
        android:id="@+id/TableRow05"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:weightSum="5" >

        <Button
            android:id="@+id/bPow"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_pow"
            android:textColor="@android:color/primary_text_light" 
            android:gravity="center"/>

        <Button
            android:id="@+id/blpar"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:paddingBottom="10dp"
            android:paddingTop="10dp"
            android:text="@string/_lpar"
            android:textColor="@android:color/primary_text_light" 
            android:gravity="center"/>

        <Button
            android:id="@+id/brpar"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_rpar"
            android:gravity="center" />

        <Button
            android:id="@+id/bdiv"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.4"
            android:text="@string/_div"
            android:gravity="center" />
    </TableRow>

    <TableRow
        android:id="@+id/TableRow04"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:weightSum="5" >

        <Button
            android:id="@+id/b7"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_7"
            android:textColor="@android:color/primary_text_light" 
            android:gravity="center"/>

        <Button
            android:id="@+id/b8"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:paddingBottom="10dp"
            android:paddingTop="10dp"
            android:text="@string/_8"
            android:textColor="@android:color/primary_text_light" 
            android:gravity="center"/>

        <Button
            android:id="@+id/b9"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_9"
            android:gravity="center" />

        <Button
            android:id="@+id/bmul"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.4"
            android:text="@string/_times"
            android:textStyle="bold"
            android:gravity="center" />
    </TableRow>

    <TableRow
        android:id="@+id/TableRow03"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:weightSum="5" >

        <Button
            android:id="@+id/b4"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_4"
            android:textColor="@android:color/primary_text_light"
            android:gravity="center" />

        <Button
            android:id="@+id/b5"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:paddingBottom="10dp"
            android:paddingTop="10dp"
            android:text="@string/_5"
            android:textColor="@android:color/primary_text_light"
            android:gravity="center" />

        <Button
            android:id="@+id/b6"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_6"
            android:gravity="center" />

        <Button
            android:id="@+id/bsub"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.4"
            android:text="@string/_minus" 
            android:gravity="center"/>
    </TableRow>

    <TableRow
        android:id="@+id/TableRow02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:weightSum="5" >

        <Button
            android:id="@+id/b1"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_1"
            android:textColor="@android:color/primary_text_light" 
            android:gravity="center"/>

        <Button
            android:id="@+id/b2"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:paddingBottom="10dp"
            android:paddingTop="10dp"
            android:text="@string/_2"
            android:textColor="@android:color/primary_text_light"
            android:gravity="center" />

        <Button
            android:id="@+id/b3"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_3" 
            android:gravity="center"/>

        <Button
            android:id="@+id/badd"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.4"
            android:text="@string/_plus" 
            android:gravity="center"/>
    </TableRow>

    <TableRow
        android:id="@+id/TableRow01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:weightSum="5" >

        <Button
            android:id="@+id/b0"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_0"
            android:textColor="@android:color/primary_text_light" 
            android:gravity="center"/>

        <Button
            android:id="@+id/bPoint"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:gravity="center"
            android:paddingBottom="10dp"
            android:paddingTop="10dp"
            android:text="@string/dot"
            android:textColor="@android:color/primary_text_light" />

        <Button
            android:id="@+id/bClear"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:gravity="center"
            android:text="@string/clear" />

        <Button
            android:id="@+id/bEnter"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.4"
            android:text="@string/enter" />

        </TableRow>

    </TableLayout>
</RelativeLayout> 
```

Anyone got any idea of whats wrong? I´m not touching the buttons through code, just checking the id to know which button was clicked. Nothing more, not changing gravity there or anything.

EDIT

oh yeah right, i forgot the white style. I´m pretty sure thats not it since i trie I dont know why it´s behaving like this.

```
 <?xml version="1.0" encoding="utf-8"?>    
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:state_pressed="true" >
    <shape android:shape="rectangle">
        <corners android:radius="0dp"/>
        <gradient android:startColor="#a8a8a8" android:endColor="#c8c8c8" android:angle="270"></gradient>
    </shape>
</item>

<item android:state_focused="true" >
    <shape>
        <solid android:color="#DDDDDD" />
     </shape>
 </item>

    <item>
        <shape android:shape="rectangle" >
        <corners android:radius="0dp"/>
        <solid android:color="#c8c8c8"/>
        </shape>
     </item>
</selector> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-03T17:33:34.450

我知道我迟到了 5 年，但这仍然是一个相当莫名其妙的错误，即使在奥利奥。

对我来说，它有时只会发生（我有另一个应用程序在“片段 A 和片段 B 在同一屏幕情况下并排”中具有完全相同的布局，这不是问题）。

当我将表格布局放到单个屏幕上并单击按钮（更新`TextView`表格上方的 a）时，按钮的重力会自行改变并且不会变回。

我的解决方案（这绝对是一个 hack，但它有效），是将a**包装`TableLayout`在 a 中`FrameLayout`，然后`TextView`我在它自己的`FrameLayout`**. 这必须强制 Android 跳过重新布局表的尝试，因为它们是独立的帧。

# python - in python, search in a matrix the next higher number to a given number

> ID：15855617
> 
> 赞同：-1
> 
> 时间：2013-04-06T20:22:58.920
> 
> 标签：python, matrix, find

I began with python and I need to find, in a matrix, the next higher number from a given number. Actually the value of the number is not interesting but I need its location.

For example, if my matrix is

`a = ([0.14, 0.93, 0.2], [0.1, 0.8, 0.55])`

and my given number is 0.5

How would I do to have `(3, 2)` for i and j value of 0.55 which is the next higher number from 0.5?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:36:09.350

您可以以扁平的方式遍历单元格：

```
>>> a = ([0.14,0.93,0.2],[0.1,0.8,0.55])
>>> [(v, (j, i)) for i, row in enumerate(a,1) for j,v in enumerate(row, 1)]
[(0.14, (1, 1)), (0.93, (2, 1)), (0.2, (3, 1)), (0.1, (1, 2)), (0.8, (2, 2)), (0.55, (3, 2))] 
```

由于您还想要 > 0.5 的最小元素，我们可以这样做：

```
>>> cc = ((v, (j, i)) for i, row in enumerate(a,1) for j,v in enumerate(row, 1))
>>> min(c for c in cc if c[0] > 0.5)
(0.55, (3, 2)) 
```

（我们可以将所有这些都塞进一行，但我认为将枚举与搜索分开会更清楚。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:29:55.467

这取决于您是需要先按列搜索还是按行搜索。无论哪种方式，您都可以对行或列进行排序。这样您就可以对每一行/列执行二进制搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T20:35:51.400

恐怕您需要扫描矩阵中的每个元素...

代码看起来像这样：

```
num=0.5
min = 999.999 # or a large enough number
pos_i=-1
pos_j=-1

for i ...:
    for j ...:
        if a[i][j] < min and a[i][j] > num:
            pos_i = i
            pos_j = j
            min = a[i][j] 
```

这具有 O(n^2) 复杂度

您可以通过对数据进行排序来改进，大约 O(n log(n))，但这取决于您是否要保留索引...

# javascript - $(this) 在未命名的 html 元素上的值是多少？

> ID：15855620
> 
> 赞同：0
> 
> 时间：2013-04-06T20:23:11.420
> 
> 标签：javascript, jquery, forms

我找不到答案。所以我希望它不是多余的..

有一个简单的表单元素：

```
<label>Email Address:</label>
<input type="text" onblur="validateEmail(this)" /> 
```

我正在运行一个验证脚本来检查这个输入值（onBlur）是否有效。效果很好！

现在.. 我想要做的是保持脚本的通用性——所以我不必依赖类名或 ID 来使其工作。

所以我想知道的是如果值不是电子邮件地址，如何对这个字段采取行动。具体来说，我想更改标签的颜色并在字段本身上放置一个红色边框。

这是不起作用的脚本：

```
var inputTextTest = field.value;
var filter = /^((\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*?)\s*;?\s*)+/;

if ( filter.test(inputTextTest) ) {
    var name = field;
    $(this).focus();
    $(this).css("border","1px");
    $(this).css("border-color","red");
} else {
    $(this).css("border", "none");
} 
```

我可以看到我对 $(this) 的调用不起作用。那么我如何对这个特定字段采取行动并保持脚本完全通用（即，不依赖于特定的类或 ID 名称）？

提前感谢大家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T20:30:51.460

我猜参数引用`this`是`field`，因为您`field.value`在顶部使用：

```
validateEmail(field) {
    var inputTextTest = field.value;
    var filter = /^((\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*?)\s*;?\s*)+/;

    if ( filter.test(inputTextTest) ) {
        var name = field.name;
        $(field).focus().css("border","1px solid red");
    } else {
        $(field).css("border", "none");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T20:30:57.773

尝试`field`而不是`this`假设函数声明看起来像`validateEmail(field)`

在`onblur`您内部`this`作为对象传递给函数，但随后需要使用您在声明函数参数时使用的任何参数名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T20:27:54.913

为了使其通用，我建议您使用现有的验证库之一：

[https://github.com/DiegoLopesLima/Validate#readme](https://github.com/DiegoLopesLima/Validate#readme)

$(this) 对您不起作用的原因是它没有被定义，您不在回调或创建引用的函数中。

要执行通用循环并使用 $(this) 您需要执行以下操作：

```
$('input').each(function() {
  $(this)  // will now reference each element.
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T20:33:24.873

将脚本放入函数中并将对象作为参数，然后对对象执行所有操作。

# windows - context menu shell extension doesn't appear in explorer

> ID：15855622
> 
> 赞同：2
> 
> 时间：2013-04-06T20:23:24.353
> 
> 标签：windows, com, contextmenu, shell-extensions

I have the same problem as described here "[Shell extension doesn't work in Windows-Explorer but works in other programs?](https://stackoverflow.com/questions/7668305/shell-extension-doesnt-work-in-windows-explorer-but-works-in-other-programs)", but it doesn't works only in explorer. OS Windows 7 x64\. Dll was compiled as x64 project.

Part of my trace-file when i call context menu in explorer:

```
DllGetClassObject
Factory: Create component
clComponent::QueryInterface: Return pointer to IContextMenu
Factory: Self Destruction
clComponent::QueryInterface: Interface doesn't supported : {00000003-0000-0000-C000-000000000046}
clComponent::QueryInterface: Interface doesn't supported : {0000001B-0000-0000-C000-000000000046}
clComponent::QueryInterface: Return pointer to IUnknown
clComponent::QueryInterface: Interface doesn't supported : {00000018-0000-0000-C000-000000000046}
clComponent::QueryInterface: Interface doesn't supported : {00000019-0000-0000-C000-000000000046}
clComponent::QueryInterface: Interface doesn't supported : {4C1E39E1-E3E3-4296-AA86-EC938D896E92}
clComponent::QueryInterface: Return pointer to IContextMenu
Component: Self Destruction 
```

I also implement two interfaces IShellExtInit and IContextMenu. Maybe I did something wrong in Windows register?.. Could someone write necessary changes in register?

Trace-file after registration 32 and 64 bit dlls:

```
DllMain: dwReason == DLL_PROCESS_ATTACH

DllRegisterServer
HKEY_CLASSES_ROOT\CLSID\{7E6025F5-6D2F-4A95-A6FE-E38AF9D1D0E5} : COM Shell Extension
HKEY_CLASSES_ROOT\CLSID\{7E6025F5-6D2F-4A95-A6FE-E38AF9D1D0E5}\InprocServer32 : C:\COMShellExtension32.dll
HKEY_CLASSES_ROOT\CLSID\{7E6025F5-6D2F-4A95-A6FE-E38AF9D1D0E5}\ProgID : COMShellExtension.ShellExtension.1
HKEY_CLASSES_ROOT\CLSID\{7E6025F5-6D2F-4A95-A6FE-E38AF9D1D0E5}\VersionIndependentProgID : COMShellExtension.ShellExtension
HKEY_CLASSES_ROOT\COMShellExtension.ShellExtension : COM Shell Extension
HKEY_CLASSES_ROOT\COMShellExtension.ShellExtension\CLSID : {7E6025F5-6D2F-4A95-A6FE-E38AF9D1D0E5}
HKEY_CLASSES_ROOT\COMShellExtension.ShellExtension\CurVer : COMShellExtension.ShellExtension.1
HKEY_CLASSES_ROOT\COMShellExtension.ShellExtension.1 : COM Shell Extension
HKEY_CLASSES_ROOT\COMShellExtension.ShellExtension.1\CLSID : {7E6025F5-6D2F-4A95-A6FE-E38AF9D1D0E5}
HKEY_CLASSES_ROOT\*\shellex\ContextMenuHandlers\{7E6025F5-6D2F-4A95-A6FE-E38AF9D1D0E5} : COM Shell Extension
RegisterServer: S_OK

DllMain: dwReason == DLL_PROCESS_ATTACH

DllRegisterServer
HKEY_CLASSES_ROOT\CLSID\{7E6025F5-6D2F-4A95-A6FE-E38AF9D1D0E5} : COM Shell Extension
HKEY_CLASSES_ROOT\CLSID\{7E6025F5-6D2F-4A95-A6FE-E38AF9D1D0E5}\InprocServer32 : C:\COMShellExtension64.dll
HKEY_CLASSES_ROOT\CLSID\{7E6025F5-6D2F-4A95-A6FE-E38AF9D1D0E5}\ProgID : COMShellExtension.ShellExtension.1
HKEY_CLASSES_ROOT\CLSID\{7E6025F5-6D2F-4A95-A6FE-E38AF9D1D0E5}\VersionIndependentProgID : COMShellExtension.ShellExtension
HKEY_CLASSES_ROOT\COMShellExtension.ShellExtension : COM Shell Extension
HKEY_CLASSES_ROOT\COMShellExtension.ShellExtension\CLSID : {7E6025F5-6D2F-4A95-A6FE-E38AF9D1D0E5}
HKEY_CLASSES_ROOT\COMShellExtension.ShellExtension\CurVer : COMShellExtension.ShellExtension.1
HKEY_CLASSES_ROOT\COMShellExtension.ShellExtension.1 : COM Shell Extension
HKEY_CLASSES_ROOT\COMShellExtension.ShellExtension.1\CLSID : {7E6025F5-6D2F-4A95-A6FE-E38AF9D1D0E5}
HKEY_CLASSES_ROOT\*\shellex\ContextMenuHandlers\{7E6025F5-6D2F-4A95-A6FE-E38AF9D1D0E5} : COM Shell Extension
RegisterServer: S_OK 
```

My Registry.cpp

```
//
// Registry.cpp
//

#include <objbase.h>
#include <Shlobj.h>
#include <assert.h>
#include "trace_tool.h"
#include "Registry.h"

////////////////////////////////////////////////////////
//
// Internal helper functions prototypes
//

// Set the given key and its value.
BOOL setKeyAndValue(const wchar_t* pszPath,
                    const wchar_t* szSubkey,
                    const wchar_t* szValue) ;

// Convert a CLSID into a char string.
void CLSIDtochar(const CLSID& clsid, 
                 wchar_t* szCLSID,
                 int length) ;

// Delete szKeyChild and all of its descendents.
LONG recursiveDeleteKey(HKEY hKeyParent, const wchar_t* szKeyChild) ;

////////////////////////////////////////////////////////
//
// Constants
//

// Size of a CLSID as a string
const int CLSID_STRING_SIZE = 39 ;

/////////////////////////////////////////////////////////
//
// Public function implementation
//

//
// Register the component in the registry.
//
HRESULT RegisterServer(HMODULE hModule,            // DLL module handle
                       const CLSID& clsid,         // Class ID
                       const wchar_t* szFriendlyName, // Friendly Name
                       const wchar_t* szVerIndProgID, // Programmatic
                       const wchar_t* szProgID)       //   IDs
{
    // Get server location.
    wchar_t szModule[512] ;
    DWORD dwResult =
        ::GetModuleFileName(hModule, 
                            szModule,
                            sizeof(szModule)/sizeof(wchar_t)) ;
    assert(dwResult != 0) ;

    // Convert the CLSID into a char.
    wchar_t szCLSID[CLSID_STRING_SIZE] = {0};
    CLSIDtochar(clsid, szCLSID, CLSID_STRING_SIZE) ;

    // Build the key CLSID\\{...}
    wchar_t szKey[64] ;
    wcscpy(szKey, L"CLSID\\") ;
    wcscat(szKey, szCLSID) ;

    // Add the CLSID to the registry.
    setKeyAndValue(szKey, NULL, szFriendlyName) ;

    // Add the server filename subkey under the CLSID key.
    setKeyAndValue(szKey, L"InprocServer32", szModule) ;

    // Add the ProgID subkey under the CLSID key.
    setKeyAndValue(szKey, L"ProgID", szProgID) ;

    // Add the version-independent ProgID subkey under CLSID key.
    setKeyAndValue(szKey, L"VersionIndependentProgID", szVerIndProgID) ;

    // Add the version-independent ProgID subkey under HKEY_CLASSES_ROOT.
    setKeyAndValue(szVerIndProgID, NULL, szFriendlyName) ; 
    setKeyAndValue(szVerIndProgID, L"CLSID", szCLSID) ;
    setKeyAndValue(szVerIndProgID, L"CurVer", szProgID) ;

    // Add the versioned ProgID subkey under HKEY_CLASSES_ROOT.
    setKeyAndValue(szProgID, NULL, szFriendlyName) ;
    setKeyAndValue(szProgID, L"CLSID", szCLSID) ;

    // context-menu hendler
    setKeyAndValue(L"*\\shellex\\ContextMenuHandlers", szCLSID, szFriendlyName);

    trace("RegisterServer: S_OK");
    return S_OK ;
}

//
// Remove the component from the registry.
//
LONG UnregisterServer(const CLSID& clsid,         // Class ID
                      const wchar_t* szVerIndProgID, // Programmatic
                      const wchar_t* szProgID)       //   IDs
{
    // Convert the CLSID into a char.
    wchar_t szCLSID[CLSID_STRING_SIZE] = {0};
    CLSIDtochar(clsid, szCLSID, CLSID_STRING_SIZE) ;

    // Build the key CLSID\\{...}
    wchar_t szKey[64] = {0};
    wcscpy(szKey, L"CLSID\\") ;
    wcscat(szKey, szCLSID) ;

    // Delete the CLSID Key - CLSID\{...}
    LONG lResult = recursiveDeleteKey(HKEY_CLASSES_ROOT, szKey) ;
    assert((lResult == ERROR_SUCCESS) || (lResult == ERROR_FILE_NOT_FOUND)) ; // Subkey may not exist.

    // Delete the version-independent ProgID Key.
    lResult = recursiveDeleteKey(HKEY_CLASSES_ROOT, szVerIndProgID) ;
    assert((lResult == ERROR_SUCCESS) || (lResult == ERROR_FILE_NOT_FOUND)) ; // Subkey may not exist.

    // Delete the ProgID key.
    lResult = recursiveDeleteKey(HKEY_CLASSES_ROOT, szProgID) ;
    assert((lResult == ERROR_SUCCESS) || (lResult == ERROR_FILE_NOT_FOUND)) ; // Subkey may not exist.

    // Delete the context-menu hendler
    //lResult = recursiveDeleteKey(HKEY_CLASSES_ROOT, szProgID) ;
    //assert((lResult == ERROR_SUCCESS) || (lResult == ERROR_FILE_NOT_FOUND)) ; // Subkey may not exist.

    trace("UnregisterServer: S_OK");
    return S_OK ;
}

///////////////////////////////////////////////////////////
//
// Internal helper functions
//

// Convert a CLSID to a char string.
void CLSIDtochar(const CLSID& clsid, wchar_t* szCLSID, int length)
{
    assert(length >= CLSID_STRING_SIZE) ;
    // Get CLSID
    LPOLESTR wszCLSID = NULL ;
    HRESULT hr = StringFromCLSID(clsid, &wszCLSID) ;
    assert(SUCCEEDED(hr)) ;

    //// Covert from wide characters to non-wide.
    //wcstombs(szCLSID, wszCLSID, length) ;

    wcsncpy(szCLSID, wszCLSID, length - 1);

    // Free memory.
    CoTaskMemFree(wszCLSID) ;
}

//
// Delete a key and all of its descendents.
//
LONG recursiveDeleteKey(HKEY hKeyParent,           // Parent of key to delete
                        const wchar_t* lpszKeyChild)  // Key to delete
{
    // Open the child.
    HKEY hKeyChild ;
    LONG lRes = RegOpenKeyEx(hKeyParent, lpszKeyChild, 0, KEY_ALL_ACCESS, &hKeyChild);
    if (lRes != ERROR_SUCCESS)
    {
        return lRes ;
    }

    // Enumerate all of the decendents of this child.
    FILETIME time ;
    wchar_t szBuffer[256];
    DWORD dwSize = 256 ;
    while (RegEnumKeyEx(hKeyChild, 0, szBuffer, &dwSize, NULL, NULL, NULL, &time) == S_OK)
    {
        // Delete the decendents of this child.
        lRes = recursiveDeleteKey(hKeyChild, szBuffer) ;
        if (lRes != ERROR_SUCCESS)
        {
            // Cleanup before exiting.
            RegCloseKey(hKeyChild) ;
            return lRes;
        }
        dwSize = 256 ;
    }

    // Close the child.
    RegCloseKey(hKeyChild) ;

    // Delete this child.
    return RegDeleteKey(hKeyParent, lpszKeyChild) ;
}

//
// Create a key and set its value.
//   - This helper function was borrowed and modifed from
//     Kraig Brockschmidt's book Inside OLE.
//
BOOL setKeyAndValue(const wchar_t* szKey,
                    const wchar_t* szSubkey,
                    const wchar_t* szValue)
{
    HKEY hKey;
    wchar_t szKeyBuf[1024] = {0};

    // Copy keyname into buffer.
    wcscpy(szKeyBuf, szKey) ;

    // Add subkey name to buffer.
    if (szSubkey != NULL)
    {
        wcscat(szKeyBuf, L"\\") ;
        wcscat(szKeyBuf, szSubkey ) ;
    }

    // Create and open key and subkey.
    long lResult = RegCreateKeyEx(HKEY_CLASSES_ROOT ,
                                  szKeyBuf, 
                                  0, NULL, REG_OPTION_NON_VOLATILE,
                                  KEY_ALL_ACCESS, NULL, 
                                  &hKey, NULL) ;
    if (lResult != ERROR_SUCCESS)
    {
        return FALSE ;
    }

    // Set the Value.
    if (szValue != NULL)
    {
        RegSetValueEx(hKey, NULL, 0, REG_SZ, (BYTE *)szValue, (wcslen(szValue)+1) * sizeof(wchar_t) );
        trace(std::wstring(L"HKEY_CLASSES_ROOT\\") + szKeyBuf + L" : " + szValue);
    }

    RegCloseKey(hKey) ;
    return TRUE ;
} 
```

**Solved! HKEY_CLASSES_ROOT\CLSID\%CLSID%\InprocServer32 : name: "ThreadingModel" val: "Apartment"**

# c - How should I convert the endianness of a 14-bit bitfield?

> ID：15855624
> 
> 赞同：-2
> 
> 时间：2013-04-06T20:23:25.910
> 
> 标签：c, endianness, bit-fields

If I know I am on a little-endian machine, how can I convert the endiannes of a 14-bit bitfield?

```
struct {
    unsigned foo : 14, bar 2;
} baz; 
```

I have a hunch that `baz.foo = htons(baz.foo)` will not work properly.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:26:38.187

将它与 a 放在一个联合中，`uint16_t`然后交换它。

# ruby-on-rails - 尝试在 Ruby on Rails 中创建带有表单提交的模型对象

> ID：15855627
> 
> 赞同：1
> 
> 时间：2013-04-06T20:23:46.337
> 
> 标签：ruby-on-rails, forms

第一次使用 ROR，我试图在表单提交时从索引视图创建一个新的模型对象。我想我明白了，但我得到：

```
uninitialized constant UsersController 
```

在我看来，我有：

```
=form_for :user, :url => { :action => "new", :controller => "user" } do |f|
    = f.text_field :username, :placeholder => 'Username', :size => 30
    %br
    = f.text_field :email, :placeholder => 'E-mail', :size => 30
    %br
    = f.password_field :password, :placeholder => 'Password', :size => 30
    %br
    %br
    = f.submit_tag 'Sign Up' 
```

在我的控制器中，我有：

```
def new
user_info = :params[:user]
    @user = User.create!(user_info)
    flash[:notice] = "#{@user.username} has been added!  Please fill out your profile page."
    redirect_to user_path
end 
```

谁能明白我为什么会得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:36:40.130

第一个问题只是`f.submit_tag`与`form_for`助手一起使用。其他的建议..

在 Rails 中执行这样的表单时，您应该使用该`new`操作设置一个空模型以供表单工作

```
def new
  @user = User.new

  respond_to do |format|
    format.html  # new.html.erb
    format.json  { render :json => @user }
  end
end 
```

然后表单将提交给`create`操作，您可以在其中阅读`params`并使用它们来创建您将保存的用户对象

```
def create
  @user = User.new(params[:post])

  respond_to do |format|
    if @user.save
      format.html  { redirect_to(@user, :notice => 'User was successfully created.') }
      format.json  { render :json => @user, :status => :created, :location => @user }
    else
      format.html  { render :action => "new" }
      format.json  { render :json => @post.errors, :status => :unprocessable_entity }
    end
  end
end 
```

此处的`respond_to`块可让您检查其他文件扩展名，通常是 .json 或 .xml，并为您提供一种为每个扩展名格式化输出的方法。

对于该`show`操作，您可以执行以下操作：

```
def show
  @user = User.find(params[:id])

  respond_to do |format|
    format.html  # show.html.erb
    format.json  { render :json => @user }
  end
end 
```

并转到 /users/1 您会看到呈现的视图（这是默认设置，因此那里的空行带有注释`#show.html.erb`，假设您有视图，则无需执行任何操作）

如果你去 /users/1.json 你会得到它的结果`@user.to_json`对于从你的 Javascript 与 Rails 交谈很有用

关于未定义的常量问题：

1.  检查您的 UsersController 是否缺少任何`end`行

2.  检查相关的 User 模型和 UsersController 是否具有所有正确的命名约定，以免混淆 Rails

users_controller.rb：

```
class UsersController < ApplicationController
...
end 
```

用户.rb：

```
class User < ActiveRecord::Base
...
end 
```

# r - ROAuth - 握手错误 - “您可能误输入了您的 PIN...”

> ID：15855633
> 
> 赞同：1
> 
> 时间：2013-04-06T20:24:17.933
> 
> 标签：r, twitter-oauth

在生成有效的令牌 URL 并且我输入了 PIN 之后，握手返回以下错误。

`Error in cred$handshake() : Invalid response after authorization. You likely misentered your PIN, try rerunning this handshake & browser authorization to get a new PIN.`

我已经三重检查了我没有输入错误的密码。在函数中放置一些打印表明“oauth_token_secret”不在 oauthPOST() 的响应中？

重现代码和我的系统配置文件如下。提前致谢。

```
library(twitteR);
library(tm);
library(wordcloud);
library(RColorBrewer);
library(ROAuth);
library(RCurl);
library(digest);

##consumer key
twit_consumer_key='XXXXXXXXXXXXXX';
##consumer secret
twit_consumer_secret='XXXXXXXXXXXXXXXXXX';
##request token URL
twit_request_url='https://api.twitter.com/oauth/request_token';
##access token URL
twit_access_url='https://api.twitter.com/oauth/access_token';
##authorize URL
twit_authorize_url='https://api.twitter.com/oauth/authorize';

cred <- OAuthFactory$new(consumerKey=twit_consumer_key,
                         consumerSecret=twit_consumer_secret,
                         requestURL=twit_request_url,
                         accessURL=twit_authorize_url,
                         authURL=twit_authorize_url);
cred$handshake(); 
```

以下是会话信息：

```
> sessionInfo()
R version 2.15.3 (2013-03-01)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C               LC_TIME=en_GB.UTF-8       
 [4] LC_COLLATE=en_GB.UTF-8     LC_MONETARY=en_GB.UTF-8    LC_MESSAGES=en_GB.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                  LC_ADDRESS=C              
[10] LC_TELEPHONE=C             LC_MEASUREMENT=en_GB.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] digest_0.6.3       wordcloud_2.2      RColorBrewer_1.0-5 Rcpp_0.10.3        tm_0.5-8.3        
[6] twitteR_1.1.0      rjson_0.2.12       RCurl_1.95-4.1     bitops_1.0-5      

loaded via a namespace (and not attached):
[1] codetools_0.2-8 slam_0.1-28     tools_2.15.3 
```

# c++ - 为什么我得到“向量迭代器不兼容”？

> ID：15855634
> 
> 赞同：11
> 
> 时间：2013-04-06T20:24:23.853
> 
> 标签：c++, visual-studio-2008, visual-c++, vector, iterator

为什么这段代码

```
#include <algorithm>
#include <iterator>
#include <vector>

int main()
{
    std::vector<int> v;
    v.push_back(1);
    v.push_back(2);
    v.push_back(3);
    v.reserve(v.size() * 2);  // Reserve enough space to keep iterators valid
    std::copy(v.begin(), v.end(), std::back_inserter(v));
    return 0;
} 
```

给我调试断言失败，*表达式：向量迭代器不兼容*（Visual C++ 2008）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-06T20:26:41.767

与元素对应的迭代器仅在必须重新分配向量时才失效，从而`reserve`避免了。

但是，`v.end()`不会保持有效。

该标准的描述`push_back`和`insert`保证

> 如果新大小大于旧容量，则导致重新分配。如果没有发生重新分配，则插入点之前的所有迭代器和引用仍然有效。

`v.end()`不是“在插入点之前”。

# mysql - mySQL比较数字

> ID：15855637
> 
> 赞同：1
> 
> 时间：2013-04-06T20:24:48.497
> 
> 标签：mysql, sql, numbers, compare

我试图在 mySQL 中找出一种方法来将数字与数字列表进行比较，以找到最接近它的数字。

所以本质上，如果我有数字 5 和数字列表 7、8、9、2、1，答案将是 7。

有人对如何做到这一点有任何想法吗？

谢谢

这就是我需要的。当我提供我所在的当前车站 ID 和我正在寻找的服务时，我试图找到最近的具有特定服务的车站。

这是我的存储过程的代码：

```
 DROP PROCEDURE IF EXISTS nearest;
    DELIMITER //
    CREATE PROCEDURE nearest
    (
        IN serviceIn VARCHAR(20), IN stationid INT
    )
    BEGIN
        SELECT station_id
        FROM station
        WHERE ABS(station_id - stationid) = (SELECT MIN(ABS(station_id - stationid))
        FROM station) AND service = serviceIn;
    END //
    DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:35:10.597

你可以这样做：

```
SELECT number
FROM tablename
ORDER BY  ABS(number - 5) 
LIMIT 1; 
```

看到它在行动

*   [SQL 小提琴演示](http://sqlfiddle.com/#!2/c1785/5)

* * *

但这将始终只返回一个数字，但如果有重复的数字与相同的数字接近，它只会得到其中一个。例如，如果您的列表中有数字 3，在这种情况下应该返回两个数字 7 和 3，之前的查询将只返回其中一个。

对于这种情况，试试这个：

```
SELECT number
FROM tablename
WHERE ABS(number - 5) = (SELECT MIN(ABS(number - 5))
                         FROM tablename); 
```

看看它的实际效果：

*   [重复的 SQL Fiddle 演示](http://sqlfiddle.com/#!2/01d49/1)

* * *

## 更新：

您还需要将条件 `` 添加到子查询中，以便您的存储过程应如下所示：

```
DROP PROCEDURE IF EXISTS nearest;

CREATE PROCEDURE nearest
(
  IN serviceIn VARCHAR(20), IN stationid INT
)
BEGIN
  SELECT station_id
  FROM station
  WHERE ABS(station_id - stationid) = (SELECT MIN(ABS(station_id - stationid))
                                       FROM station
                                       WHERE service = serviceIn) AND service = serviceIn;
END 
```

## [更新的 SQL Fiddle 演示](http://sqlfiddle.com/#!2/d33d2/2)

# drupal - 将自定义选项卡添加到用户个人资料页面 Drupal 7

> ID：15855641
> 
> 赞同：4
> 
> 时间：2013-04-06T20:25:19.390
> 
> 标签：drupal, drupal-7

我正在尝试在我的 Drupal 7 站点上的 mysite.com/user 上的用户帐户页面中添加两个新选项卡。我想添加指向添加照片节点/添加/照片和添加视频节点/添加/视频的链接，但是我的模块 user_menu_add 的以下代码对我不起作用：

```
function user_menu_add_menu() {

$items['node/add/photos'] = array(
    'title' => t('Add Photos'),
    'page callback' => 'user_menu_add',
    'page arguments' => array(1),
    'access callback' => TRUE,
    'access arguments' => array('access user menu add'),
    'type' => MENU_LOCAL_TASK,
);

return $items;

} 
```

我引用的一个例子是[here](https://stackoverflow.com/questions/4192846/custom-menu-tabs-in-drupal-user-profile-page?rq=1)，但仅适用于“/user”子目录下的链接

```
function my_module_menu() {

$items['user/%user/funky'] = array(
    'title' => t('Funky Button'),
    'page callback' => 'my_module_funky',
    'page arguments' => array(1),
    'access callback' => TRUE,
    'access arguments' => array('access funky button'),
    'type' => MENU_LOCAL_TASK,
);

return $items;

} 
```

![当前用户选项卡](https://i.stack.imgur.com/BujaV.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T01:18:52.067

您可以保持`node/add/photos`菜单项不变。您需要保留 URL 模式格式`user/%user/addphoto`，以便使选项卡出现在用户个人资料页面上。但是，请尝试[`drupal_goto()`](http://api.drupal.org/api/drupal/includes%21common.inc/function/drupal_goto/7)在您的新菜单项中使用以重定向到该`node/add/photos`页面。

试试这个：

```
$items['user/%user/addphoto'] = array(
  'title' => t('Add Photos'),
  'page callback' => 'drupal_goto',
  'page arguments' => array('node/add/photos'),
  'access callback' => 'user_is_logged_in',
  'type' => MENU_LOCAL_TASK,
); 
```

参考：

*   [`drupal_goto()`](http://api.drupal.org/api/drupal/includes%21common.inc/function/drupal_goto/7)
*   [`user_is_logged_in()`](http://api.drupal.org/api/drupal/modules%21user%21user.module/function/user_is_logged_in/7)
*   [Drupal 7 菜单系统](http://api.drupal.org/api/drupal/includes%21menu.inc/group/menu/7)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-24T19:18:15.770

我没有足够的声誉来评论答案。请注意，[hook_menu](https://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu/7)确实 需要**未翻译**的标题，文档中说：

> ```
> "title": Required. The untranslated title of the menu item. 
> ```

所以代码应该是

```
function my_module_menu() {
    $items['user/%user/addphoto'] = array(
      'title' => 'Add Photos',
      'page callback' => 'drupal_goto',
      'page arguments' => array('node/add/photos'),
      'access callback' => 'user_is_logged_in',
      'type' => MENU_LOCAL_TASK,
    );
    return $items;
} 
```

# c# - Entity Framework 4.0 奇怪的保存数据

> ID：15855661
> 
> 赞同：0
> 
> 时间：2013-04-06T20:27:03.267
> 
> 标签：c#, entity-framework, c#-4.0, entity-framework-4

我面临下一个问题。我有一个带有模型的数据仓库

```
public class GameResult
    {
        public int GameResultId { get; set; }

        public virtual Competition Competition { get; set; }
        public virtual CustomDate DateGame { get; set; }       
        public virtual Contender ContenderFirst { get; set; }
        public virtual Contender ContenderSecond { get; set; }
        public virtual Location Location { get; set; }
}

public class Competition
    {
        [Key]
        public int CompetitionId { get; set; }
        public string Name { get; set; }

        //Lazy loading
        public virtual KindSport KindSport { get; set; }

    } 
```

类似的东西我为事实表生成了一些数据`GameResult`

```
gameResult.Location = location;
gameResult.Competition = competition;
gameResult.ContenderFirst = firstContender;
gameResult.ContenderSecond = secondContender;

public void saveGameResult(GameResult gameResult)
        {
            using (var db = new GameContext())
            {
                db.GameResults.Add(gameResult);
                db.SaveChanges();
            }

        } 
```

但是，当我尝试保存数据时，我发现我并没有将实体保存在事实表中，它们也将级联保存在子表中作为`Location, Contender`.

我怎样才能解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:02:31.433

您必须从数据库加载实体位置和竞争者。否则它们将被插入其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T22:53:01.043

`Add`将整个对象图标记为`Added`。

这是修复它的一种方法：

```
public void saveGameResult(GameResult gameResult, .... more arguments ....)
{
    using (var db = new GameContext())
    {
        db.GameResults.Add(gameResult);
        gameResult.Location = location;
        gameResult.Competition = competition;
        gameResult.ContenderFirst = firstContender;
        gameResult.ContenderSecond = secondContender;
        db.SaveChanges();
    }
} 
```

但是你必须添加更多的论点。

一种更繁琐的方法是将所有内容保持原样并将每个维度标记为`UnChanged`：

```
db.GameResults.Add(gameResult);
Entry(gameResult.Location).State = EntityState.Unchanged;
... 
```

另一种方法是`Id`仅设置值：

```
gameResult.LocationId = location.LocationId;
... etc.

public void saveGameResult(GameResult gameResult)
{
    ... (original code) 
```

但是当然原始的 Id 属性应该是他事实类的一部分，形成[外键关联](http://blogs.msdn.com/b/msdnforum/archive/2010/05/07/foreign-key-association-in-entity-framework-4.aspx)。

# vb.net - 如何在 VB.NET 中将十六进制偏移量转换为两字节指针？

> ID：15855663
> 
> 赞同：2
> 
> 时间：2013-04-06T20:27:47.970
> 
> 标签：vb.net, pointers, hex, z80

我正在开发一个包含 Z80 两字节指针转换器的专业十六进制编辑器。

转换背后的数学是这样的：

1.  获取您希望指向的偏移量。
2.  取偏移量的最后四位数字，并切断其余数字。
3.  如果偏移量超出范围`&H4000`- `&H7FFF`，则必须像这样转换：`(offset % &H4000) + &H4000`. 换句话说：
    *   如果偏移量是从`&H0000`到`&H3FFF`，则添加`&H4000`到偏移量。
    *   如果偏移量是 from`&H4000`到`&H7FFF`，不要对偏移量做任何事情。
    *   如果偏移量是从`&H8000`到`&HBFFF`，则从偏移量中减去`&H4000`。
    *   如果偏移量是从`&HC000`到`&HFFFF`，则从偏移量中减去`&H8000`。

我的问题是我不知道如何将 5 或 6 位十六进制偏移量转换为两位数偏移量。我将如何在开始时剃掉多余的字节（第二步）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T21:22:07.773

[`Mod`](http://msdn.microsoft.com/en-GB/library/se0w9esz%28v=vs.80%29.aspx)使用Visual Basic拼写的“余数”运算符：

```
offset Mod &H10000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T21:31:39.047

# html - 在 twitter 引导程序中指定图像

> ID：15855666
> 
> 赞同：0
> 
> 时间：2013-04-06T20:27:58.183
> 
> 标签：html, css, twitter-bootstrap

我正在尝试使用 twitter-bootstrap 示例

[http://twitter.github.io/bootstrap/examples/carousel.html](http://twitter.github.io/bootstrap/examples/carousel.html)

如果你去页面，你会看到三个光环，上面写着140X140。

我想在那个圈子里有一个形象..

以下是相关代码

```
<div class="span4">
              <img class="img-circle" data-src="holder.js/140x140">
              <h2>foobar</h2>
              <p>Elaborate</p>
              <p><a class="btn" href="#">View details &raquo;</a></p>
            </div><!-- /.span4 --> 
```

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:30:01.577

它只是使用`border-radius`样式。该图像实际上是一个方形图像，但`border-radius`样式将角落修剪成圆形。

```
.img-circle {
-webkit-border-radius: 500px;
-moz-border-radius: 500px;
border-radius: 500px;
} 
```

不过，我建议您不要加载图像来执行此操作。你可以用这样的 div 做同样的事情：

HTML

```
<div class="img-circle"></div> 
```

CSS

```
.img-circle {
background:#555;
width: 140px;
height: 140px;
-webkit-border-radius: 500px;
-moz-border-radius: 500px;
border-radius: 500px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T20:32:42.590

为什么不将图像替换为您自己的图像，而不是将其插入其中

代替-

```
<img class="img-circle" data-src="holder.js/140x140"> 
```

这

```
<img class="img-circle" data-src="yourImage.jpg"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-13T06:26:14.243

Holder.js：Holder 完全在客户端呈现图像占位符。

[http://imsky.github.io/holder/](http://imsky.github.io/holder/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-10T05:44:28.067

抱歉我来晚了，尝试将 data-src="" 更改为 src="" 然后将 img 链接/名称放在 " " 之间

# xml - 如何从 NHibernate 映射文件 (XML) 生成表/数据库架构

> ID：15855669
> 
> 赞同：0
> 
> 时间：2013-04-06T20:28:16.190
> 
> 标签：xml, nhibernate, orm, mapping

我有一个 XML 文件，其中包含表列名称和类型的所有信息。如何在 SQL Server 2008 中创建该表。

```
<?xml version="1.0" encoding="utf-8" ?>
    <hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
    <class name="Op" table="op" dynamic-update="true">
    <id name="Id" column="id">
        <generator class="native" />
    </id>

    <property name="AccountId" column="account_id" not-null="true"/>
    <property name="Date" column="date" not-null="true" type="Timestamp"/>
    <property name="Amount" column="amount" not-null="true"/>

    <many-to-one name="AccountProp" column="account_id" 
                class="Account" not-null="true"/>

    <joined-subclass name="PayOperation" table="pay_operations">
        <key column="operation_id" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:38:42.673

在构建会话工厂时执行 schemaExport。

例如

```
new SchemaExport(cfg).Execute(true, true, true); 
```

# phpfox - 需要帮助在 phpfox 的 polls 模块中添加更多选项

> ID：15855671
> 
> 赞同：0
> 
> 时间：2013-04-06T20:28:45.840
> 
> 标签：phpfox

我检查了现有选项的脚本，例如所有民意调查、我的民意调查等，所有这些都来自带有一些整数值的 xml。但我不知道如何添加新选项。作为参考，我附上了屏幕排序。

![在此处输入图像描述](https://i.stack.imgur.com/W8AUy.png)

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T12:39:23.297

1.  转到轮询索引控制器：

    模块/poll/include/component/controller/index.class.php

2.  寻找 `$this->template()->buildSectionMenu('poll', $aFilterMenu);`

3.  `$aFilterMenu`您可以通过在数组中添加项目来在列表中添加更多选项

    例如： `$aFilterMenu['xyz'] = 'xyz';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T00:47:11.433

那些不是来自 xml 文件，检查文件 /module/poll/include/component/controller/index.class.php 在那里寻找“buildMenu”

# python - 为什么是 123.56 - 62.12 = 61.440000000000005

> ID：15855674
> 
> 赞同：0
> 
> 时间：2013-04-06T20:29:07.937
> 
> 标签：python, floating-point, floating-accuracy, subtraction, floating-point-precision

我刚开始使用 python 并且正在运行一个教程[here](http://en.wikibooks.org/wiki/Non-Programmer%27s_Tutorial_for_Python_3/Hello,_World)

运行示例，我惊讶地发现 print("123.56 - 62.12 =", 123.56 - 62.12)

输出为 123.56 - 62.12 = 61.440000000000005

我正在运行 python v3.3.0 在[此处](http://mathcs.holycross.edu/~kwalsh/python/)的在线解释器中运行它并得到相同的结果

# ldap - 如何使用 Active Directory 用户使用的属性在 OpenLDAP 中扩展 inetOrgPerson 对象类

> ID：15855676
> 
> 赞同：2
> 
> 时间：2013-04-06T20:29:18.797
> 
> 标签：ldap, openldap

我有一个与 Active Directory 一起使用的应用程序，它依赖于用户 objectClass 的某些属性。我想添加一个与 OpenLDAP 一起使用的模式，以便我可以在 OpenLDAP 中创建一个使用用户帐户，其代码与今天与 Active Directory 一起使用的代码相同。我创建了以下扩展 inetOrgPerson 的架构，但在尝试验证并将其转换为 ldif 文件时，slaptest 响应

> 第 11 行属性类型：找不到语法：“1.2.840.113556.1.4.906”

问题行似乎在 Active Directory 使用的大整数语法上。OpenLDAP 仅包含 Integer 语法（1.3.6.1.4.1.1466.115.121.1.27），那么如何为 Large Integer 定义新语法？

```
attributetype ( 1.2.840.113556.1.4.750 NAME 'groupType'
   SYNTAX '1.3.6.1.4.1.1466.115.121.1.27' SINGLE-VALUE )

attributetype ( 1.3.114.7.4.2.0.33 NAME 'memberOf'
    SYNTAX '1.3.6.1.4.1.1466.115.121.1.26' )

attributetype ( 1.2.840.113556.1.4.656 NAME 'userPrincipalName'
    SYNTAX '1.3.6.1.4.1.1466.115.121.1.15' )

attributetype ( 1.2.840.113556.1.4.52 NAME 'lastLogon'
    SYNTAX '1.2.840.113556.1.4.906' )

attributetype ( 1.2.840.113556.1.4.159 NAME 'accountExpires'
    SYNTAX '1.2.840.113556.1.4.906' )

attributetype ( 1.2.840.113556.1.4.96 NAME 'pwdLastSet'
    SYNTAX '1.2.840.113556.1.4.906' )

attributetype ( 1.2.840.113556.1.4.221 NAME 'sAMAccountName'
    SYNTAX '1.3.6.1.4.1.1466.115.121.1.15' )

attributetype ( 1.2.840.113556.1.4.8 NAME 'userAccountControl'
    SYNTAX '1.3.6.1.4.1.1466.115.121.1.27' )

attributetype ( 1.2.840.113556.1.4.90 NAME 'unicodePwd'
    SYNTAX '1.3.6.1.4.1.1466.115.121.1.40' )

objectclass ( 1.2.840.113556.1.5.9 NAME 'user'
        DESC 'a user'
        SUP inetOrgPerson STRUCTURAL
        MUST ( cn )
        MAY ( userPassword $ memberOf $ userPrincipalName $ distinguishedName $ lastLogon $ accountExpires $ pwdLastSet $ sAMAccountName $ userAccountControl $ unicodePwd ) )

objectclass ( 1.2.840.113556.1.5.8 NAME 'group'
        DESC 'a group of users'
        SUP top STRUCTURAL
        MUST ( groupType $ cn )
        MAY ( member ) ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T07:56:33.450

看到这个，支持 LDAP 语法

[http://www.zytrax.com/books/ldap/apa/types.html#syntaxes](http://www.zytrax.com/books/ldap/apa/types.html#syntaxes)

试试：1.3.6.1.4.1.1466.115.121.1.38

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-04T11:48:44.793

1.2.840.113556.1.4.906 是[Active Directory 使用的大整数语法（也是 Integer8 和其他几个名称），](http://www.rlmueller.net/Integer8Attributes.htm)在大多数其他 LDAP 服务器实现中没有等效的语法。

您在 LDIF 中显示的属性（lastLogon、pwdLastSet 和 accountExpires）实际上是与添加值时在大多数其他 LDAP 服务器实现中使用的整数语法不兼容的日期。

大多数 LDAP 服务器实现使用的 GeneralizedTime (1.3.6.1.4.1.1466.115.121.1.24) 与大整数语法中使用的值不同。

但是，您所处的情况将很难解决，就像应用程序专门查询架构或使用“大整数语法”向属性添加值一样。

我们有一些关于[大整数日期的文档](https://ldapwiki.com/wiki/LargeInteger%20Date)

我建议您询问您的应用程序供应商是否可以支持其他 LDAP 实现。

# sql-server-2008 - 使用 OleDb 提供程序从 SQL Server 插入 ms Access

> ID：15855678
> 
> 赞同：0
> 
> 时间：2013-04-06T20:29:31.887
> 
> 标签：sql-server-2008, c#-4.0, ms-access, ado.net, ms-access-2003

在[这篇文章](https://stackoverflow.com/questions/14653324/insert-into-access-from-sql-server)中，Remou 很好地描述了如何使用以下语法将 SQL Server 表中的数据批量插入到 MS Access 表中：

```
SELECT fld1, fld2 INTO accessTable FROM [sql connection string].sqltable 
```

在他的帖子中的示例中，Remou 使用了 ODBC 关键字。[如果我们使用SQL Server Native Client 10.0 OLE DB Provider](http://connectionstrings.com/sql-server-2008#sql-server-native-client-10-0-oledb-provider)而不是[SQL Server Native Client 10.0 ODBC Driver](http://connectionstrings.com/sql-server-2008#sql-server-native-client-10-0-odbc-driver)，我们如何修改这些示例

例如，我尝试了以下方法，但它不起作用。它在调用 ExecuteNonQuery() 时出现错误“找不到可安装的 ISAM”。AccessConn 工作正常，因为我已经使用 Remou 的 ODBC 示例对其进行了测试。问题似乎与 SQL Server 的连接字符串有关。

```
OleDbConnection AccessConn = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source='C:\\TestFolder\\Test.mdb'");
OleDbCommand AccessCmd = new OleDbCommand("INSERT INTO Table2 SELECT * FROM [OLEDB;Provider=SQLNCLI10;Server=MyServer\\SQLEXPRESS;Database=TestDb1;Uid=TestUser;Pwd=TestPassword].Table1", AccessConn);
AccessCmd.ExecuteNonQuery();
AccessConn.Close(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:07:00.120

我怀疑根本没有办法使用 OLEDB 来做你描述的事情。

我测试了以下 VBA 代码，它工作正常：

```
Sub odbcTest()
Dim cdb As DAO.Database, sql As String
Set cdb = CurrentDb
sql = _
        "SELECT ID, LastName INTO myContacts " & _
        "FROM [ODBC;Driver={SQL Server Native Client 10.0};Server=.\SQLEXPRESS;Database=myDb;Trusted_Connection=yes;].dbo.myContacts"
cdb.Execute sql, dbFailOnError
End Sub 
```

然后，我测试了（我希望是）OLEDB 等效项，但它失败了，出现了与您遇到的相同的错误（“找不到可安装的 ISAM。”）

```
Sub oledbTest()
Dim cdb As DAO.Database, sql As String
Set cdb = CurrentDb
sql = _
        "SELECT ID, LastName INTO myContacts " & _
        "FROM [OLEDB;Provider=SQLNCLI10;Server=.\SQLEXPRESS;Database=myDb;Trusted_Connection=yes;].dbo.myContacts"
cdb.Execute sql, dbFailOnError
End Sub 
```

但请注意方括号内的`ODBC;`and`OLEDB;`前缀：在建立“正常”连接时不需要它们。以下代码有效...

```
Sub adoTest()
Dim con As Object
Const sqlInstance = ".\SQLEXPRESS"
Set con = CreateObject("ADODB.Connection")
con.Open "Driver={SQL Server Native Client 10.0};Server=" & sqlInstance & ";Database=myDb;Trusted_Connection=yes;"
MsgBox "ODBC connection to " & sqlInstance & " established."
con.Close
Set con = Nothing
End Sub 
```

...但是当我`ODBC;`在连接字符串的开头添加一个子句时...

```
Sub adoTest()
Dim con As Object
Const sqlInstance = ".\SQLEXPRESS"
Set con = CreateObject("ADODB.Connection")
con.Open "ODBC;Driver={SQL Server Native Client 10.0};Server=" & sqlInstance & ";Database=myDb;Trusted_Connection=yes;"
MsgBox "ODBC connection to " & sqlInstance & " established."
con.Close
Set con = Nothing
End Sub 
```

...失败并显示“[Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified”。

因此，上面第一个代码示例`ODBC;`中的前缀表明该方法只是一个 Access 快捷方式，用于从 ODBC 数据源中提取数据，而无需显式创建链接表。（方括号内的内容将是链接表对象的属性。）`Sub odbcTest()``FROM [ODBC;...]``.Connect``TableDef`

因此，据我所知，Access 仅支持 ODBC 链接表（而不支持 OLEDB 链接表），因此对 OLDEB 使用此方法将不起作用。

# java - 如何从 ArrayList 中删除对象？

> ID：15855679
> 
> 赞同：0
> 
> 时间：2013-04-06T20:29:37.720
> 
> 标签：java, arraylist

我想根据学生姓名从 ArrayList 中删除一个对象，每个对象都有 5 个元素。问题：如何从文本文件中删除对象。

```
ArrayList<Student> studentList= new ArrayList<Student>();
Iterator iter = studentList.iterator();

public DVD remove(String removeName) {
    while (iter.hasNext()) {
        for (Student stu : studentList) {
            if (stu .GetName().toUpperCase().contains(removeName.toUpperCase())) {
                System.out.println("Found And Removed");
                iter.remove();
                return stu ;
            }

            System.out.println("Not Found");
        }
    }
    return null;

} 
```

每个学生都从一个文本文件中读入。每行一个元素。

前任：

```
 John Smith
  Undergrad
  21 years old
  2010
  2014
  Pocahantas
  Professor
  369 years old
  1599
  1603
  Etc... // new person
  etc.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:40:07.280

我认为您不需要迭代器：

```
 public Student remove(String removeName) {
        for (Student stu : studentList) {
            if (stu.getName().toUpperCase().contains(removeName.toUpperCase())) {
                System.out.println("Found and Removed");
                studentList.remove(stu);
                return stu;
            }
         }
         System.out.println("Not Found");
         return null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:37:35.317

您以错误的方式使用迭代器；如果您使用外部迭代器进行迭代，则不需要以下`for`语句：

```
while (iter.hasNext()) {
    Student stu = iter.next();
    if (stu .GetName().toUpperCase().contains(removeName.toUpperCase())) {
        System.out.println("Found And Removed");
        iter.remove();
        return stu ;
    }
    System.out.println("Not Found");
    }
} 
```

如果您之前知道学生（或它的位置），您可以简单地`remove`从`List`接口调用方法，但如果您想在迭代集合时删除它，那么外部迭代器是大多数 Java 集合的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T20:38:19.960

如果我理解正确，您想删除与必须从文本文件中删除的学生姓名相对应的 5 行。

如果这是您想要做的，请参考

[在文件中查找一行并将其删除](https://stackoverflow.com/questions/1377279/java-find-a-line-in-a-file-and-remove)

这有用于删除一行的代码段。您需要做的是，一旦遇到要删除的名称，就删除接下来的 5 行。

# mysql - 根据不同表中的列将表导出到 csv 到多个文件

> ID：15855684
> 
> 赞同：1
> 
> 时间：2013-04-06T20:29:56.033
> 
> 标签：mysql, mysqldump

我需要根据另一个表中的列值将一个表转储到多个文件中。

我也想只使用 mysql 命令行，而不是通过任何脚本语言。可能吗？

例如：

表 A 有

`(ID, Name, Stuff)`, `Name`独特的

表 B 有

`(ID, Name, Start, End)`

`Name`我想将 B 中存在的所有行转储`A`到基于`Name`.

在 SQL 中，大致是这样的：

```
SELECT *
FROM B
WHERE Name = 'brad' (exists in A)
INTO OUTFILE '/home/csv/brad.csv' 
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' 
LINES TERMINATED BY '\n' 
```

除了 A 中存在的每个名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:15:35.720

为了确保`Name`存在于表中`A`，只需加入`A`并`B`在名称上：

```
SELECT *
FROM B
INNER JOIN A ON B.Name = A.Name
WHERE Name = 'brad' 
```

至于改变`OUTFILE`名称，我认为没有编程/脚本就没有办法做到这一点。您可以使用 MySQL 程序来执行此操作`EXECUTE`；[这里](http://forums.mysql.com/read.php?97,23677,62359#msg-62359)有一个简单的例子，你可以适应。一般的方法是创建一个不同名称的游标，然后扫描它并`OUTFILE`为每个名称构建/执行 SQL（包括值）。

# javascript - 扩展对象（嵌套）

> ID：15855686
> 
> 赞同：-1
> 
> 时间：2013-04-06T20:30:02.923
> 
> 标签：javascript

在一个部分对象中，我有一个`CategoryId`- 就像一个外键。现在，我想将每个部分复制到匹配的类别对象中。

来源：

```
var sections = [{title:"FirstSection", CategoryId : 1},
                {title:"SecondSection", CategoryId : 1}, 
                {title:"ThirdSection", CategoryId : 2}];
var categories = [{title:"Cat1", Id : 1},
                 {title:"Cat2", Id : 2}]; 
```

结果将如下所示：

```
categories = [{title:"Cat1", 
               Id : 1, 
               sections : [{title:"FirstSection", CategoryId : 1},
                           {title:"SecondSection", CategoryId : 1}]
              },
              {title:"Cat2", 
               Id : 1, 
               sections: [{title:"ThirdSection", CategoryId : 2}]
              }]; 
```

现在所有的节`CategoryId = 1`都在 ID = 1 的类别的节数组中。

也许我正在搜索错误的关键字，但我找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:35:29.920

在这种情况下，我会使用下划线库（您可以手动完成所有这些操作）。

[http://underscorejs.org/#findWhere](http://underscorejs.org/#findWhere)

当您遍历类别数组时，您可以轻松地执行以下操作：

```
_.findWhere(sections, {categoryId: 1}); 
```

此外，您可以使用下划线：

```
var combined = _.groupBy(categories, function(cat){ 
    cat.sections = _.findWhere(sections, {CategoryId: cat.Id});
    return cat;
 }); 
```

并结合将拥有您正在寻找的东西。

演示：http: [//jsfiddle.net/lucuma/kjkkV/1/](http://jsfiddle.net/lucuma/kjkkV/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T20:42:08.783

如果[支持](http://kangax.github.io/es5-compat-table/#Array.prototype.forEach)（> IE8 和所有其他浏览器），这很容易通过...

```
categories.forEach(function(category) {
    category["sections"] = sections.filter(function(s) {
        return s.CategoryId === category.Id;
    });
}); 
```

[例子](http://jsfiddle.net/Z4CMR/1/)

# wpf - 2窗口场景下避免内存泄漏的最简单方法

> ID：15855687
> 
> 赞同：0
> 
> 时间：2013-04-06T20:30:15.223
> 
> 标签：wpf, events, memory-leaks

我有两个窗口：一个**主**窗口和一个通过双击主窗口数据网格中的特定行打开的**详细信息窗口。**保存详细信息窗口中的数据时，我想刷新主窗口的数据网格控件。

（一些不相关的细节：每个窗口都继承自一个`BaseWindow`类，并且有一个继承自 EF5 的类的自己的副本`DbContext`。我已向`Save`部分类添加了一个事件，并在调用时重写`SaveChanges`以引发此事件`SaveChanges`。这实际上是事件我正在附加一个事件处理程序。）

我知道我可以通过将事件处理程序附加到事件来做到这一点`Save`。但是，我不知道关闭窗口的顺序 - 如果先关闭主窗口，则详细信息窗口的实例仍然会引用它。

如果我监听`Closing'/'Closed`主窗口的事件，以便知道何时释放附加到“保存”事件的处理程序，我将遇到同样的问题——即使在详细信息窗口关闭。

我知道我可以按照[这里](http://msdn.microsoft.com/en-us/library/aa970850.aspx)`WeakEventManager`的描述实现 a ，但我想知道是否有更简单的技术可以使用。（有人告诉我我有把事情复杂化的倾向。）

（我没有使用 MVVM。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:59:40.300

`WeakEventManager`可以完成这项工作，只需使用通用版本，并没有什么复杂的。在您的情况下，性能方面应该非常好。

如您所说，另一种选择是`Closing`从主窗口取消订阅主窗口的事件处理程序。

要在详细信息窗口关闭时删除所有引用，请在详细信息窗口关闭时取消订阅详细信息窗口内的所有事件处理程序，方法是将此方法订阅到`Closing`事件：

```
public OnClosing()
{       
    Delegate[] registeredDelegates = saveHandler.GetInvocationList();
    foreach (Delegate d in registeredDelegates )
       saveHandler-= (d as SaveDelegate);
} 
```

其中 saveHandler 是您的处理程序，而 SaveDelegate 是您的自定义委托类型。

话虽如此，如果您想摆脱过于复杂的形象，请不要在意...

# html - 表格单元格内的 CSS 100% 宽度滚动条 (overflow-x)

> ID：15855689
> 
> 赞同：4
> 
> 时间：2013-04-06T20:30:27.363
> 
> 标签：html, css, width, scrollbar, overflow

这是我的第一篇文章。最后我决定和大家一起加入stackoverflow！

我的问题是关于必须 100% 适合其容器的水平滚动条。在以下示例中，您将找到理解我的问题所需的一切。

[http://jsfiddle.net/cexUr](http://jsfiddle.net/cexUr)

所以问题是：为什么代码在第一种情况下工作正常，但是当嵌套在表格单元格中时（第二种情况），滚动条会溢出它的容器？为什么会发生这种情况以及如何解决？有人可能会说：“只是摆脱表格”，但我需要这段代码在一个有一些表格布局的大网站上工作。摆脱桌子对我来说意味着一百个小时的工作。

第一个（正确）和第二个 scrollb（不正确）之间的主要区别是：

## 第一卷（正确）

```
<div class="hscroll"> (images) </div> 
```

水平滚动的CSS代码：

```
.hscroll {
    overflow-x:scroll;
    overflow-y:hidden;
    white-space:nowrap;
} 
```

## 第二卷（不正确）

```
<table><tr><td> (same code as first scroll) </td></tr></table> 
```

我会非常感谢您的明智建议。

杰拉德。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T20:35:32.590

`table { table-layout: fixed; }`

固定桌子为我解决了这个问题。

**编辑**：似乎我晚了几秒钟！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-06T20:34:15.713

添加`table-layout: fixed;`到您的`.table`班级。

```
.table{width:100%;margin-top:50px; table-layout: fixed; } 
```

这是一个例子：

[http://jsfiddle.net/cexUr/2/](http://jsfiddle.net/cexUr/2/)

# ruby-on-rails - ember.js 和 rails 布局

> ID：15855693
> 
> 赞同：3
> 
> 时间：2013-04-06T20:30:40.507
> 
> 标签：ruby-on-rails, ember.js

我正在将 ember 集成到我的 Rails 应用程序中。所以我发现的问题是 - ember 编译模板，然后将其附加到正文中。

导轨模板：

```
 %body
#main-content
  = render 'layouts/header'
  .container.main
    #content
      = yield :dashboard

      #EMBER template
      %script{type:'text/x-handlebars'}
       {{view Ember.TextField valueBinding="newEnrtyName"}}
       {{newEnrtyName}}

    - if has_left_menu?
      #navigation.l= render 'layouts/left-menu'
  = render 'layouts/footer' 
```

模板附加在页脚之后:(

那么是否可以仅使用页面的一部分告诉 ember 工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T22:21:51.750

您可以在应用程序上设置[`rootElement`属性](http://emberjs.com/api/classes/Ember.Application.html#property_rootElement)，例如：

```
App = Ember.Application.create({
  rootElement: '#ember-app-container'
}); 
```

您的 HTML 模板中必须存在此元素。

# core-data - 带有文本字段和核心数据的自定义单元格

> ID：15855695
> 
> 赞同：0
> 
> 时间：2013-04-06T20:30:44.063
> 
> 标签：core-data, uitableview, nsfetchedresultscontroller

我有一个表格视图，我制作了一个带有两个文本字段的自定义单元格...我希望将文本字段中的文本保存在核心数据中，所以我为此目的创建了核心数据类，并且我知道如何实现核心数据方法.

我无法理解如何在表格视图中显示单元格，以便用户输入文本，然后将其保存在核心数据中。据我了解，这些是步骤：

1 - 默认情况下，tableview 使用文本字段加载并显示自定义单元格。

2 - 用户输入文本，按回车键，他就保存在核心数据中。

我的问题是我如何执行数字 1，我无法加载视图中的数据，因为还没有数据！我必须先显示单元格。

谁能帮我解决这个问题，让我了解我在这里缺少什么？到目前为止，这是我的代码：

```
- (void)viewDidLoad
{

AppDelegate *appDelegate =[[UIApplication sharedApplication] delegate];
self.managedObjectContext=[appDelegate managedObjectContext];

NSError *error;
if (![[self fetchedResultsController] performFetch:&error]) {
    /*
     Replace this implementation with code to handle the error appropriately.

     abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
     */
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);

}

[self fetchedResultsController];

[super viewDidLoad];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

return [[self.fetchedResultsController sections] count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [[[self.fetchedResultsController sections] objectAtIndex:section] numberOfObjects];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{
static NSString *CellIdentifier = @"machines";

cellMeios *cellM = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cellM == nil) {
    cellM = [[cellMeios alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

return cellM;
}

- (NSFetchedResultsController *)fetchedResultsController
{
if (_fetchedResultsController != nil)
{
    return _fetchedResultsController;
}

// Create and configure a fetch request.
NSFetchRequest *fetchRequestMo = [[NSFetchRequest alloc] init];
NSEntityDescription *entityMo = [NSEntityDescription entityForName:@"Mo" inManagedObjectContext:self.managedObjectContext];
[fetchRequestMo setEntity:entityMo];

// Create the sort descriptors array.
NSSortDescriptor *cellTitle = [[NSSortDescriptor alloc] initWithKey:@"reference" ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:cellTitle, nil];
[fetchRequestMo setSortDescriptors:sortDescriptors];

// Create and initialize the fetch results controller.
_fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequestMo managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"reference" cacheName:nil];
_fetchedResultsController.delegate = self;
self.fetchedResultsController = _fetchedResultsController;

return _fetchedResultsController;
} 
```

还有其他方法，但我认为它们与我的问题无关，问题是......我需要向用户显示一些东西，以便他可以填写！

我已经有另一个处理核心数据的表格视图，但在这种情况下，表格一开始应该是空的，然后表格视图顶部有一个加号按钮，然后他选择了一些东西，它被保存在核心数据中显示具有相关信息的单元格。

预先感谢问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:53:15.463

如果您希望表格视图可编辑，您应该有一个类似 insertNewObject 的方法，当用户点击导航栏中的“+”（加号）按钮时会触发该方法。此方法的实现创建一个新的托管对象，将其插入上下文中，并重新加载表。当 fetchedResultsController 返回为空时，您也可以触发此方法。

这是我的一个视图控制器的一个版本：

```
- (void)insertNewObject:(id)sender
{
    NSManagedObjectContext *context = [self.managedObject managedObjectContext];
    NSRelationshipDescription *relation = [[self.managedObject entity] relationshipsByName][self.relationship];
    NSEntityDescription *destinationEntity = [relation destinationEntity];
    NSManagedObject *newManagedObject = (NSManagedObject*)[NSEntityDescription insertNewObjectForEntityForName:[destinationEntity name] inManagedObjectContext:context];

    if ([relation isOrdered]) {
        [self.items insertObject:newManagedObject atIndex:[self.items count]];
    }
    else {
        NSMutableSet *set = [self.managedObject mutableSetValueForKey:self.relationship];
        [set addObject:newManagedObject];
        self.items = [NSMutableOrderedSet orderedSetWithSet:set];
    }

    // Save the context.
    NSError *error = nil;
    if (![context save:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        [[[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Validation Error", @"Validation Error") message:[error localizedDescription] delegate:nil cancelButtonTitle:NSLocalizedString(@"OK", @"OK") otherButtonTitles: nil, nil] show];
    }
    [self.tableView reloadData];
} 
```

# php - PHP / HTML Ipad (IOS) 软键盘

> ID：15855697
> 
> 赞同：-1
> 
> 时间：2013-04-06T20:30:48.503
> 
> 标签：php, html

我制作了一个 PHP 网页以显示在 Ipad / Iphone 互联网浏览器上。

如何隐藏软键盘并制作显示/隐藏“ABC”软键盘和/或“123”软键盘的按钮？那是 PHP 还是 HTML 的可能？

加载页面时，我希望输入字段自动对焦和软键盘隐藏。我使用条形码扫描仪而不是键盘。

并在输入字段旁边有两个按钮，如下所示；

按钮 1 = 显示/隐藏“123”键盘。
按钮 2 = 显示/隐藏“abc”键盘。

我已经尝试了来自谷歌搜索的不同代码，但没有工作..

有谁能帮忙？？？

对不起我的英语，不太好..... :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:17:08.417

您无法从 HTML 控制那些 iPhone、iPad 用户界面元素。您唯一的选择是构建一个原生 iPhone/iPad 应用程序。这需要用Objective C编写。

# core-data - 从两个 NSManagedObjects 中获取一个属性，并将其保存为另一个的属性

> ID：15855704
> 
> 赞同：0
> 
> 时间：2013-04-06T20:31:17.317
> 
> 标签：core-data, core-data-migration

在我的应用程序的新版本中，我想合并两个不同 NSManagedObjects 上的两个属性，并将其用于这两个对象的关系。

例如，我有一个对象“文档”（在更新的版本中，它现在具有属性“标题”），该对象与以前都具有属性“标题”的“书”和“约会”相关。

Core Data 编程指南阅读起来非常混乱，根据我的能力，我必须执行/覆盖自定义迁移。

我的模型得到了很好的迁移，除了这段数据。任何人都可以将我推向正确的方向以更新此属性吗？

谢谢！

这就是我的意思：

**我的旧模型**

```
+--------------------+            +--------------------+            +--------------------+
|        Book        |            |     Appointment    |            |      Document      |
+--------------------+            +--------------------+            +--------------------+
| - Title            |            | - Title            |            | - Date Added       |
| - Date Added       |            | - Date Added       |            | - Date Modified    |           
| - Date Modified    |            | - Date Modified    |            +--------------------+
+--------------------+            +--------------------+            |  (Relationships)   |
|  (Relationships)   |            |  (Relationships)   |            +--------------------+
+--------------------+            +--------------------+ 
```

**我的新模型**

```
+--------------------+            +--------------------+            +--------------------+
|        Book        |            |     Appointment    |            |      Document      |
+--------------------+            +--------------------+            +--------------------+
| - Date Added       |            | - Date Added       |            | - Title            |                                                       
| - Date Modified    |            | - Date Modified    |            | - Date Added       |
+--------------------+            +--------------------+            | - Date Modified    |
|  (Relationships)   |            |  (Relationships)   |            +--------------------+
+--------------------+            +--------------------+            |  (Relationships)   |
                                                                    +--------------------+ 
```

如何将数据从旧模型移动到新模型中？

# drupal - drupal 7中的块没有出现

> ID：15855705
> 
> 赞同：1
> 
> 时间：2013-04-06T20:31:26.847
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views

我在一个块中创建了一个表单，第一次出现但它没有再次出现，我不知道为什么会发生这种情况，因为我对 drupal 还很陌生。

```
 <?php

         function my_module_block_info() {
              $blocks = array();
              $blocks['my_block'] = array(
              'info' => t('My Custom Block'),
              );

              return $blocks;
         }
         function hook_block_view($delta = '') {
               switch ($delta) {
               case 'my_block':
               $block['subject'] = t('My form');
               $block['content'] = my_module_my_form();
         }
       }

       function my_module_menu() {
           $items = array();
           $items['my_module/form'] = array(
           'title' => t('My form'),
           'page callback' => 'my_module_form',
           'acess arguments' => array('access content'),
           'description' => t('My form'),
           'type' => MENU_CALLBACK,
           'access callback' => TRUE,
            );
       return $items;
           }

        function my_module_form() {
        return drupal_get_form('my_module_my_form');
            }

        function my_module_my_form($form) {

             $form['name'] = array(
             '#type' => 'textfield',
             '#title' => t('username'),
             '#required' => TRUE,
             '#description' => "enter your username.",
             '#size' => 20,
             '#maxlength' => 20,
             );
             $form['picture'] = array(
             '#type' => 'file',
             '#title' => t('Image'),
             '#description' => t('Upload a file, allowed extensions: jpg, jpeg, png, gif'),
              );
     $form['submit'] = array(
      '#type' => 'submit',
      '#value' => 'update your profile',
     );
     return $form;
 }

    function my_module_my_form_submit($form, &$form_state) {
     global $user;
     $account = user_load($user -> uid);
     $image_path = 'picture://';
      $validators = array(
      'file_validate_is_image' => array(),
       );
     $file = new StdClass();
         $file -> uid = $user -> uid;
         $file->uri = $image_path;
         $file = file_save_upload('picture', $validators);
     $new = array (
      'name' => $form_state['values']['name'],
      'picture' => $file,
      );
      user_save($account,$new );
    $message = 'You have updated your profile';
    drupal_set_message(t($message));
 } 
```

此表单正在更新用户名和用户图片，但是当我尝试在一个块中将此表单作为其内容调用时，但它在第一次后无法正常工作。请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T22:02:24.187

该功能存在许多问题

```
function hook_block_view($delta = '') {
  switch ($delta) {
    case 'my_block':
      $block['subject'] = t('My form');
      $block['content'] = my_module_my_form();
    }
} 
```

1.  您在这里编写的是 hook_block_view() 的实现，而不是钩子本身，因此应该调用该函数`my_module_block_view()`；
2.  `$block['content']`应该填充呈现的表单，因此您需要调用而`my_module_form()`不是表单定义函数（就像您在菜单挂钩中的页面回调中所做的那样）；
3.  您的函数不返回任何内容！您应该`return $block;`在 switch 语句之后包含。

所以你的功能最好是这样的

```
function my_module_block_view($delta = '') {
  switch ($delta) {
    case 'my_block':
      $block['subject'] = t('My form');
      $block['content'] = my_module_form();
      break;
  }
  return $block;
} 
```

# javascript - 使用jquery在div中并排的图像和描述

> ID：15855708
> 
> 赞同：0
> 
> 时间：2013-04-06T20:31:52.727
> 
> 标签：javascript, jquery

我有一个 Jquery 代码，如下所示。

```
for(i = 0; i<n ; i++)
{
    $('#gameContentDiv').append('<div sytle="float:left"><a href='+json.results[i].site_detail_url+' target="_blank"> <img src="' + json.results[i].image.medium_url + '" alt=Image /></a></div>');
     $('#gameContentDiv').append(description);
} 
```

我希望图像和描述并排。（描述必须在图片的右上角）。

# api - plesk api 外壳访问

> ID：15855710
> 
> 赞同：0
> 
> 时间：2013-04-06T20:31:59.230
> 
> 标签：api, ssh, plesk

我尝试创建脚本以在 plesk whit api 中添加新域，我编写了这个脚本：

```
<packet version='1.4.2'> 
<domain>
<add>
   <gen_setup>
      <name>domain.com</name>
      <client_id>1</client_id>
      <ip_address>127.0.0.1</ip_address>
      <status>0</status>
   </gen_setup>
   <hosting>
      <vrt_hst>
          <ftp_login>username</ftp_login>
          <ftp_password>password</ftp_password>
          <php>true</php>
          <ssi>true</ssi>
          <cgi>true</cgi>
          <php_safe_mode>false</php_safe_mode>
          <ip_address>127.0.0.1</ip_address>
      </vrt_hst>
   </hosting>
</add>
</domain>
</packet> 
```

该脚本添加了新的域 bat 不工作 ssh 访问，我需要添加对该脚本的 shell 访问。谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:27:19.343

这取决于 plesk/协议版​​本。尝试`<shell>/bin/bash</shell>`添加`<vrt_hst>...</vrt_hst>`

下一个查询适用于 Plesk 10/11：

```
<packet version="1.6.3.0">
<webspace>
<add>
   <gen_setup>
      <name>example.com</name>
      <owner-id>1</owner-id>
      <htype>vrt_hst</htype>
      <ip_address>10.0.0.1</ip_address>
      <status>0</status>
   </gen_setup>
   <hosting>
      <vrt_hst>
          <property>
            <name>shell</name>
            <value>/bin/bash</value>
          </property>
          <property>
            <name>ftp_login</name>
            <value>ftp16se4fdf0</value>
          </property>
          <property>
            <name>ftp_password</name>
            <value>qweqwe</value>
          </property>
          <ip_address>10.0.0.1</ip_address>
       </vrt_hst>
    </hosting>
</add>
</webspace>
</packet> 
```

# c++ - c ++客户端在不同端口上响应

> ID：15855713
> 
> 赞同：0
> 
> 时间：2013-04-06T20:32:16.363
> 
> 标签：c++, sockets

我正在用 C++ 编写客户端（套接字编程），但是服务器有两个选项可以发送到客户端请求，服务器也可以在特定端口上发送数据（比如说端口 ZZ）。我希望客户端监听端口 ZZ 非阻塞。我该怎么做？select() 命令会帮助我吗？或者是否有任何其他技术来实现这一点。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:38:10.237

您可以使用非阻塞模式，也可以使用非常小的阻塞时间（例如一毫秒）。

要激活非阻塞模式，您必须配置您的套接字。

请参阅[Beejs 套接字编程指南](http://beej.us/guide/bgnet/)以了解如何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T05:40:07.627

也许使用多线程是更好的选择。您可以在主线程中使用接收响应并在另一个线程中侦听端口 ZZ。

# java - 内容无法在表格中正确显示

> ID：15855714
> 
> 赞同：-2
> 
> 时间：2013-04-06T20:32:17.200
> 
> 标签：java, swing, nullpointerexception, jtable, jbutton

这是我的文本文件的样子：将其复制到记事本中并在 SSCCE 中打开

```
名字：丹
姓氏： rmadakkk
电话号码：(348) 794-7329
电子邮件：leo@live.ca

```

更新：这就是我所看到的。

![错误的](https://i.imgur.com/WTwUzJS.png)

这就是我想要的。

![对](https://i.imgur.com/0013aWN.png)

```
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import javax.swing.*;
import javax.swing.table.*;

public class Main extends JFrame {

    private JTextField Searchtextfield;
    private JTable table;
    private JTextField Firstnametext;
    private JTextField lastnametext;
    private JTextField Phonenumbertext;
    private JTextField Emailtext;
    BufferedReader reader;
    DefaultTableModel tableModel;

    public Main() throws Exception {

        getContentPane().setLayout(null);
        JTabbedPane tabbedPane = new JTabbedPane(JTabbedPane.TOP);

        tabbedPane.setBounds(0, 32, 650, 365);
        getContentPane().add(tabbedPane);

        JPanel MainPanel = new JPanel();
        MainPanel.setBackground(Color.LIGHT_GRAY);
        tabbedPane.addTab("Main", null, MainPanel, null);
        MainPanel.setLayout(null);

        JScrollPane scrollPane = new JScrollPane();
        scrollPane.setBounds(10, 42, 604, 217);
        MainPanel.add(scrollPane);

        table = new JTable();

        scrollPane.setViewportView(table);

        String columns[] = {"First Name", "Last Name", "Phone Number", "Email"};
        tableModel = new DefaultTableModel(0, 4);
        tableModel.setColumnIdentifiers(columns);
        table.setModel(tableModel);

        JButton button = new JButton("Open Txt");
        button.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {

                String line;
                JFileChooser fileload = new JFileChooser();

                if (fileload.showOpenDialog(Main.this) == JFileChooser.APPROVE_OPTION) {
                    try {
                        File file = fileload.getSelectedFile();
                        FileInputStream fis = new FileInputStream(file);

                        reader = new BufferedReader(new FileReader(file));

                        while ((line = reader.readLine()) != null) {
                            tableModel.addRow(line.split(": "));
                        }
                        reader.close();
                    } catch (IOException e10) {
                        JOptionPane.showMessageDialog(null, "Buffered Reader issue.");
                    }
                }
            }
        });
        button.setBounds(160, 11, 129, 23);
        MainPanel.add(button);
    }

    public static void main(String[] args) throws Exception {
        Main frame = new Main();
        frame.setTitle("Phone Book App");
        frame.setSize(640, 400);
        frame.setLocationRelativeTo(null); // Center the frame
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T23:37:03.630

根据您的代码段判断，txt 文件在一行中包含表中每一列的值，因此，通过逐行读取并将其作为行添加到表模型中，您错误地填充了表。

此外，`line.split(": ");`考虑到您发布的文本片段中的第一行，返回一个字符串数组`[FirstName][danny]`。如果您只放置字段数据而不是字段名称，`line.split(": ")[1];`则可以解决此问题，但是，它不会解决您使用单个数据字段填充行的问题。

考虑创建一个类，也许是联系人，因为我看到您的文本文件上的信息属于联系人信息，读取 txt 文件并创建联系人对象，将它们放入数组中，然后用数据实例化您的表模型。

更好的方法也将导致您编写自己的表模型。

更新：好的，看来我会提出一个解决方法。

假设要加载的 txt 文件都具有相同的格式。

```
 First Name: dan
    Last Name: rmadakkk
    Phone Number: (348) 794-7329
    Email: leo@live.ca 
```

检查这个：

```
 public void actionPerformed(ActionEvent arg0) {
    String line;
    JFileChooser fileload = new JFileChooser();
        if (fileload.showOpenDialog(Main.this) == JFileChooser.APPROVE_OPTION) {
            try {
                File file = fileload.getSelectedFile();
                FileInputStream fis = new FileInputStream(file);
                reader = new BufferedReader(new FileReader(file));
                Object[] tableRow = new Object[columnNames.length];
                int column = 0;
                while ((line = reader.readLine()) != null) {
                    tableData[column++] = line.split(": ")[1];
                    if (column > 3) {
                        tableModel.addRow(tableRow);
                        column = 0;
                    }
                }
                reader.close();
             } catch (IOException e10) {
                  JOptionPane.showMessageDialog(null, "Buffered Reader issue.");
             }
        }
    }; 
```

# django - 过滤最接近给定日期时间的日期时间

> ID：15855715
> 
> 赞同：15
> 
> 时间：2013-04-06T20:32:18.540
> 
> 标签：django

我有一个具有日期时间字段的模型。现在给定一个特定的日期时间 - DT，我需要获取日期时间最接近 DT 的对象。这可能吗？

谢谢，

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-06T21:03:41.633

您可以通过两个查询和一些逻辑来获得它：

这个想法是在目标日期时间之后找到一个对象，在目标日期时间之前找到一个对象，然后返回其中一个：

```
# this method is on the model's manager
def get_closest_to(self, target)
    closest_greater_qs = self.filter(dt__gt=target).order_by('dt')
    closest_less_qs    = self.filter(dt__lt=target).order_by('-dt')

    try:
        try:
            closest_greater = closest_greater_qs[0]
        except IndexError:
            return closest_less_qs[0]

        try:
            closest_less = closest_less_qs[0]
        except IndexError:
            return closest_greater_qs[0]
    except IndexError:
        raise self.model.DoesNotExist("There is no closest object"
                                      " because there are no objects.")

    if closest_greater.dt - target > target - closest_less.dt:
        return closest_less
    else:
        return closest_greater 
```

要通过一个查询获得它，您必须从 ORM 中退出到原始 SQL。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-28T23:51:24.200

我想完成 Pavel 的回答，如：

`dt__gte` `dt__lte`

应改为使用。

提供确切日期时的过滤将无法正常工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-05T07:50:19.903

只需将 Pavlel 的答案更改为：

```
def get_closest_to_dt(qs, dt):
    greater = qs.filter(dt__gte=dt).order_by("dt").first()
    less = qs.filter(dt__lte=dt).order_by("-dt").first()

    if greater and less:
        return greater if abs(greater.dt - dt) < abs(less.dt - dt) else less
    else:
        return greater or less 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-16T12:47:51.363

上述版本的通用实现，可与任意模型一起使用。

```
def get_closest(
    *,
    qs: models.QuerySet,
    datetime_field: str,
    target_datetime: Union[datetime.datetime, datetime.date],
) -> models.Model:

    greater = qs.filter(**{
        f'{datetime_field}__gte': target_datetime,
    }).order_by(datetime_field).first()

    less = qs.filter(**{
        f'{datetime_field}__lte': target_datetime,
    }).order_by(f'-{datetime_field}').first()

    if greater and less:
        greater_datetime = getattr(greater, datetime_field)
        less_datetime = getattr(less, datetime_field)
        return greater if abs(greater_datetime - target_datetime) < abs(less_datetime - target_datetime) else less
    else:
        return greater or less 
```

# android - 自定义操作项 ActionBarSherlock

> ID：15855721
> 
> 赞同：3
> 
> 时间：2013-04-06T20:33:21.207
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在尝试在我的中添加一些自定义操作`ActionBar`，是否可以使用自定义布局来实现这些操作？因为我想为这些操作添加一些通知计数器之类的徽章。

例如

![在此处输入图像描述](https://i.stack.imgur.com/CWcU6.png)

知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T20:42:35.763

当然，您可以从 XML 中将任意布局设置为操作视图：

```
<item android:id="@+id/menu_refresh_progress"
  android:actionLayout="@layout/menu_progress"
  android:showAsAction="always"/> 
```

但是由于您可能想将徽章更新为当前的东西，如果您手动创建菜单，您也可以设置任意视图`onCreateOptionsMenu()`：

```
public boolean onCreateOptionsMenu(Menu menu) { 
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    MenuItem someMenuItem = menu.getItem(R.id.menu_option_id);
    someMenuItem.setActionView(theView);
    return true;
} 
```

# php - 从表中获取 ID

> ID：15855728
> 
> 赞同：0
> 
> 时间：2013-04-06T20:34:02.430
> 
> 标签：php, jquery

我有一个从 mysql 到 php 的数据表

```
echo"<table id='tableedit'>"

echo"<tr>";
echo"<td class='get'>";
echo $id;
echo $title;
echo"<tr>";
echo"<td>";

echo"<tr>";
echo"<td class='comments'>";
echo $comments;
echo"</tr>";
echo"</td>"; 
```

所以信息看起来像：

```
ID:1
Title:something
Comments:something.. 
```

当用户输入它们时，还有更多。我正在尝试使用户能够使用内联编辑来编辑他们的评论：

```
 $(document).ready(function() {

    $('#tableedit tr td.comments').click(function () {
     var html = $(this).text();
     var input = $('<input type="text"; />');
    input.val(html);
               $(this).replaceWith(input);
                          $('#tableedit input').focus();
                            $('#tableedit input').blur(function () {

                              var review =(this.value);
               $(this).replaceWith(review);                                   
             //$.post('editcomments.php',{review:review});

            });                              
       });
  }); 
```

内联文本编辑工作正常，但问题是我想将评论发布到 mysql 数据，`ajax`但是我想`$id`从表中获取每个评论的值。我试过这个，它给了我一个空值

```
 var id = $(this).(html).parent('#tableedit').find('tr td #get');
alert(id);  //gives a null value 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:39:53.693

您可以添加`id`作为属性：

```
echo "<td data-id='$id' class='comments'>"; 
```

然后你可以很容易地检索它：

```
var id = $(this).data('id'); 
```

# list - 返回方案中子列表的索引

> ID：15855731
> 
> 赞同：1
> 
> 时间：2013-04-06T20:34:21.453
> 
> 标签：list, scheme, sublist

好吧，我是一个 Scheme 新手，我现在正在阅读 SICP。我在网站上发现了一个问题。我花了 2 天时间考虑，但仍然不知道你们能帮忙吗？

以下问题：

计算机科学中的一项常见任务是在数据集中查找模式的实例。在这个问题中，您将编写一个过程（find-sublist space sublist），它按顺序返回空间中子列表的所有实例的开始索引的列表。请注意，子列表的实例可能会重叠，如给定 [ *] 的示例之一。如果空间包含列表，则无需像下面的示例 [* *] 中那样在空间的列表中查找子列表。您可以假设子列表不为空。

```
Examples:
(find-sublist '(7 1 2 3 4 1 2 1 2) '(1 2)) ; should return '(2 6 8)
(find-sublist '(“a” “b” “c” “b” “d”) '(“d”)) ; should return '(5)
(find-sublist '((1 2) (3 4) (5 . 6) 7 #f) '((3 4) (5 . 6))) ; should return '(2)
(find-sublist '(1 1 1 2 1) '(1 1)) ; [*] should return '(1 2)
(find-sublist '(9 1 2 3 (5 1 2 3) 1 2 3) '(1 2 3)) ; [**]should return '(2 6)
(find-sublist '() '(#t #f #f)) ; should return '() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T22:15:24.447

我会给你一些提示，让你自己找到答案，填空。第一步是将问题分成两部分，首先是一个判断是否`sublst`在 中的谓词，`lst`从 中的第一个位置开始`lst`：

```
(define (sublist? lst sublst)
  (cond (<???> <???>)  ; if sublst is empty return true
        ((and <???>    ; if lst is not empty and
              <???>)   ; the first element is equal in both lists
         (sublist? <???> <???>)) ; advance recursion over both lists
        (else <???>))) ; otherwise return false 
```

现在是主程序：这个程序检查每个位置`space`是否有一个从那里开始的子列表（使用前面的程序）。如果是这样，构建一个列表作为元素传递当前索引。请注意，我们需要在一个额外的参数中跟踪当前索引：

```
(define (find-sublist space sublist)
  (let loop ((space space)            ; initialize iteration variables
             (idx 1))
    (cond (<???> <???>)               ; if space is empty return the empty list
          ; if the list starting at current position is the sublist
          ((sublist? space sublist) 
           (cons <???>                ; cons current index, advance recursion
                 (loop <???> <???>))) ; over the list and increment index
          (else                       ; otherwise just advance the recursion
           (loop <???> <???>)))))     ; same as before 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T03:01:44.837

你问自己一个问题：我的列表的第一个元素是否与模式匹配？如果是，记录索引。如果您解决了该问题，那么您将相同的逻辑应用于列表的其余部分。这是一个简单的解决方案。

```
(define (find-sublist list sub)
  (define (sublist? list sub)
    (or (null? sub)
        (and (not (null? list))
             (equal? (car sub) (car list))
             (sublist? (cdr list) (cdr sub)))))

  (let walking ((list list) (index 1) (indices '()))
    (if (null? list)
        (reverse indices)
        (walking (cdr list)
                 (+ 1 index)
                 (if (sublist? list sub)
                     (cons index indices)
                     indices))))) 
```

这使用了一种称为“尾递归”的技术，使其在计算上等同于迭代。

# bash - sed 查找和删除单个单词

> ID：15855735
> 
> 赞同：1
> 
> 时间：2013-04-06T20:35:13.707
> 
> 标签：bash, sed

我想从`.htaccess`文件中删除用户名。

示例`.htaccess`：

```
RewriteEngine On
RewriteBase /~usern/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /~usern/index.php [L] 
```

我想给我们一种动态命令，因为我不必`/~username`每次都为每个用户手动输入。

我试过

```
sed 's/$whoami##g' .htaccess 
```

但这并没有达到预期的效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T22:32:29.167

你可以`sed -i "s/$(whoami)//g" .htaccess`

如果您只想删除一行中的第一个条目，请删除最后一个`g`选项。

`sed -i (inline sed, do actions directly on file) "s/find_this/replace_with_this/" (search and replace)`

如果您想搜索 ~/username 并删除它而不是仅删除用户名条目，只需将表达式更改为：

`sed -i "s/~\/$(whoami)//g" .htaccess`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T20:43:02.467

`s`您在 sed中寻找：

```
 sed 's#/~usern##g' file 
```

用你的例子：

```
kent$  cat file
RewriteEngine On<br />
RewriteBase /~usern/<br />
RewriteRule ^index\.php$ - [L]<br />
RewriteCond %{REQUEST_FILENAME} !-f<br />
RewriteCond %{REQUEST_FILENAME} !-d<br />
RewriteRule . /~usern/index.php [L]<br />

kent$  sed 's#/~usern##g' file
RewriteEngine On<br />
RewriteBase /<br />
RewriteRule ^index\.php$ - [L]<br />
RewriteCond %{REQUEST_FILENAME} !-f<br />
RewriteCond %{REQUEST_FILENAME} !-d<br />
RewriteRule . /index.php [L]<br /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-11T06:50:19.157

### 与其*删除*旧版本，不如将它们存储为注释：

当我对配置文件进行一些修改时，我喜欢做很多备份，以便在出现问题时能够获得旧配置。

因此，我更喜欢制作旧行的*注释副本，而不是**替换*（并确保只修改未注释的所需行）：

 *```
sed -re "s/^(\s*Rewrite.*)\/~$(whoami)(.*$)/# &\n\1\2/" -i.bak .htaccess 
```

比`diff -u .htaccess{.bak,}`会产生：

```
--- .htaccess.bak   2013-09-07 18:44:07.043537404 +0200
+++ .htaccess       2013-09-07 18:46:35.236454686 +0200
@@ -1,6 +1,8 @@
 RewriteEngine On<br />
-RewriteBase /~usern/<br />
+# RewriteBase /~usern/<br />
+RewriteBase /<br />
 RewriteRule ^index\.php$ - [L]<br />
 RewriteCond %{REQUEST_FILENAME} !-f<br />
 RewriteCond %{REQUEST_FILENAME} !-d<br />
-RewriteRule . /~usern/index.php [L]<br />
+# RewriteRule . /~usern/index.php [L]<br />
+RewriteRule . /index.php [L]<br /> 
```

### 解释：

*查找包含`Rewrite.*usern`. 将此行替换为注释标记 ( `#`)，后跟整行，而不是 a`newline`和没有的同一行`usern`*

因为`\s*`是**在**括号中，所以任何类型的缩进都会在输出时复制。

当`sed`使用 switch 运行时`-i.bak`，未修改的旧版本文件将被存储为（这对于复制和注释未修改的旧行的语法`.htaccess.bak`可能有点*多余）。*`/# &\n...`

它仅用于示例，因此您可以选择：

*   编辑时备份旧文件
*   编辑时备份旧行
*   编辑时备份行和文件
*   无需备份，因为您已经拥有强大而高效的备份解决方案。*

# ruby - 发条红宝石：如何重新启动？

> ID：15855736
> 
> 赞同：0
> 
> 时间：2013-04-06T20:35:14.333
> 
> 标签：ruby, clockwork

如何重新启动 Ruby Clockwork gem？

阅读 Wiki 后，您似乎只能启动它，而不能停止或重新启动它。

我不想手动终止该进程并再次运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:25:54.380

假设您将它作为守护进程启动，那么 'clockworkd -c YOUR_CLOCK.rb stop' 应该可以解决问题。

# jquery - jQuery(window).load() 中的美元变量 ($) 而不是 jQuery

> ID：15855737
> 
> 赞同：2
> 
> 时间：2013-04-06T15:32:07.130
> 
> 标签：jquery

Codex [ [1](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_Wrappers) ] 描述了如何处理使用该`$`变量的 jQuery 代码。我想将所描述的包装技术应用于以下示例：

```
jQuery(window).load(function() {

    if(jQuery('#div1').length) {
        /* do stuff */
    }
}); 
```

在 Codex 包装器示例中，`ready()`函数使用`$`参数。据我了解，它`$`应该在回调函数中被接受，而不是`jQuery`. 我尝试对我的示例做同样的事情：

```
jQuery(window).load(function($) {

    if($('#div1').length) {
        /* do stuff */
    }
}); 
```

使用上述内容，Firebug 的控制台报告`TypeError: e is not a function`.

Codex 示例可以正常工作，但我希望它可以`jQuery(window).load()`在所有图像完全加载后运行代码。可以做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T15:38:46.323

使用一个[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)，一个自动执行的匿名函数，来包装你的 JS。`jQuery`将对象传递给它并`$`作为参数：

```
(function($){
    $(window).load(function() {
        if($('#div1').length) {
            /* do stuff */
        }
    });
})(jQuery); 
```

# xml - 在 XSD 中创建不同的元素

> ID：15855745
> 
> 赞同：0
> 
> 时间：2013-04-06T20:35:43.710
> 
> 标签：xml, xsd, xsd-validation

我修改了 XSD 以添加新项目，而无需创建新的 XSD。目前在这种情况下我有一个元素是“轮胎”。

我创建了一个“轮胎”类型的元素。

```
<xs:element name="tire" type="x:tire" /> 
```

但验证时出现错误。**错误**：

```
Not valid.
Error - Line 4, 43: org.xml.sax.SAXParseException; lineNumber: 4; columnNumber: 43; src-resolve.4.2: Error resolving component 'x:tire'. It was detected that 'x:tire' is in namespace 'http://www.w3.org/2001/XMLSchema', but components from this namespace are not referenceable from schema document 'null'. If this is the incorrect namespace, perhaps the prefix of 'x:tire' needs to be changed. If this is the correct namespace, then an appropriate 'import' tag should be added to 'null'.
Error - Line 4, 43: org.xml.sax.SAXParseException; lineNumber: 4; columnNumber: 43; src-resolve: Cannot resolve the name 'x:tire' to a(n) 'type definition' component. 
```

**XML**

```
<?xml version="1.0" encoding="UTF-8"?>
<tire trademark="runway" id="369954" product-type="tire">
  <url>http://www.tire.es/product/369954.html</url>
  <price>28.95</price>
  <specs>
    <spec name="b_homologation">0</spec>
    <spec name="b_xl">0</spec>
    <spec name="b_runflat">0</spec>
    <spec name="s_drawing_type">simétrico</spec>
    <spec name="s_consumption">f</spec>
    <spec name="i_noise">69</spec>
    <spec name="s_grip">c</spec>
  </specs>
</tire> 
```

**XSD**

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:x="http://www.w3.org/2001/XMLSchema">

  <xs:element name="tire" type="x:tire" />

  <xs:complexType name="product">
    <xs:sequence>
      <xs:element type="xs:anyURI" name="url" />
      <xs:element type="xs:double" name="price" />

      <xs:element name="specs" maxOccurs="unbounded"
        minOccurs="0">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="spec" maxOccurs="unbounded"
              minOccurs="0">
              <xs:complexType>
                <xs:simpleContent>
                  <xs:extension base="xs:string">
                    <xs:attribute type="xs:string" name="name"
                      use="optional" />
                  </xs:extension>
                </xs:simpleContent>
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="features" maxOccurs="unbounded"
        minOccurs="0">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="feature" maxOccurs="unbounded"
              minOccurs="0">
              <xs:complexType>
                <xs:simpleContent>
                  <xs:extension base="xs:string">
                    <xs:attribute type="xs:string" name="name"
                      use="optional" />
                  </xs:extension>
                </xs:simpleContent>
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute type="xs:string" name="id" />
    <xs:attribute type="xs:string" name="product-type" />
  </xs:complexType>

  <xs:complexType name="tire">
    <xs:complexContent>
      <xs:extension base="product">
        <xs:attribute type="xs:string" name="model" />
        <xs:attribute type="xs:string" name="trademark" />
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>

<xs:element name="products">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="tire" maxOccurs="unbounded"
        minOccurs="0" type="x:tire" />
    </xs:sequence>
  </xs:complexType>
</xs:element>

</xs:schema> 
```

新产品会将它们添加为元素。

```
<xs:element name="glass" maxOccurs="unbounded" minOccurs="0" type="x:glass" /> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T23:13:08.003

“轮胎”类型不在 XSD 命名空间[http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema)中，它在模式文档的目标命名空间中，在本例中为“无命名空间”。所以它应该是 type="tire" 而不是 type="x:tire"。

# android - 如何在 AndroidManifest.xml 中添加代码

> ID：15855746
> 
> 赞同：0
> 
> 时间：2013-04-06T20:35:50.290
> 
> 标签：android, sms, broadcastreceiver

我对 Android 编程相当陌生，我正在尽力理解本教程。我已经从[这个链接](http://msatpathy.wordpress.com/android/send-and-receiving-sms-%E2%80%93-in-android/)下载了示例代码。

现在我想整合这个[线程](https://stackoverflow.com/questions/5380192/sms-receive-with-no-notification?rq=1)的代码。它在这里说“在您的 AndroidManifest.xml 中声明 SMS 接收器”

代码是：

```
 <receiver android:name="mypackage.SMSReceiver">
   <intent-filter>
     <action android:name="android.provider.Telephony.SMS_RECEIVED"/>
   </intent-filter>
 </receiver>

<uses-permission android:name="android.permission.RECEIVE_SMS" /> 
```

这是我在 AndroidManifest.xml 下下载的示例文件中的现有代码：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.example.smsTest"
      android:versionCode="1"
      android:versionName="1.0">
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".SMSTest"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>
     <uses-permission android:name="android.permission.SEND_SMS">
    </uses-permission>
    <uses-permission android:name="android.permission.RECEIVE_SMS">
    </uses-permission>
</manifest> 
```

现在我的问题是将代码（上面的第一个代码）添加到 AndroidManifest.xml 的位置。

我试图改变这一行：

```
<action android:name="android.intent.action.MAIN" /> 
```

有了这个：

```
<action android:name="android.provider.Telephony.SMS_RECEIVED"/> 
```

没有运气。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:40:35.720

您需要将接收器添加为应用程序中的第二项。您不会替换活动上的意图过滤器。它应该在和标签之间。

清单实际上是在描述您的 apk 中的内容。您的应用程序将有 1 个从启动器启动的活动 SMSTest。它还有 1 个接收器接收意图 SMS_RECEIVED。所以这两个部分都需要在那里。有道理？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T20:40:46.580

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.example.smsTest"
  android:versionCode="1"
  android:versionName="1.0">
<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".SMSTest"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
<receiver android:name="mypackage.SMSReceiver">
  <intent-filter>
  <action android:name="android.provider.Telephony.SMS_RECEIVED"/>
</intent-filter>
</receiver>
</application>
 <uses-permission android:name="android.permission.SEND_SMS">
</uses-permission>
<uses-permission android:name="android.permission.RECEIVE_SMS">
</uses-permission>
</manifest> 
```

# python - 在 min python 函数中将正值优先于负值。

> ID：15855747
> 
> 赞同：2
> 
> 时间：2013-04-06T20:35:50.730
> 
> 标签：python, distance, min

假设我有一个值列表：

```
l = [1, -1] 
```

我想取更接近其他值的列表值，例如 0，我可以这样做：

```
min(l, key=lambda v: abs(v - 0))
# prints 1 
```

但是如果我更改列表中值的顺序，例如：

```
l = [-1, 1] 
```

我在上面调用了相同的函数`-1`而不是`1`，那么在相同距离处同时存在正值和负值的情况下，我怎样才能始终获得正值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T20:38:18.130

您可以让 lambda 函数返回一个元组，其中的第二项指示它是正数还是负数：

```
min(l, key=lambda v: (abs(v - 0), v < 0)) 
```

比较元组时，第一项优先，其次是第二项。因此，第二项用作“决胜局”。由于`False < True`，这将优先考虑`1`（变为`(1, False)`）到`-1`（变为`(1, True)`.

# salesforce - 如何在 SFDC 开发人员控制台中查看所有字段名称

> ID：15855751
> 
> 赞同：3
> 
> 时间：2013-04-06T20:36:13.527
> 
> 标签：salesforce

如何使用 SFDC 开发人员控制台查看对象的所有字段？

[我在http://www.salesforce.com/_app/video/developer/help/developer_console.jsp](http://www.salesforce.com/_app/video/developer/help/developer_console.jsp)查看了这个 Salesforce YouTube 视频 但是，我没有看到通过 Repository 选项卡获取对象字段列表的方法对象选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:09:35.650

*finneycanhelp*是正确的。

在开发者控制台中：

1.  单击存储库选项卡
2.  单击设置实体类型窗口中的对象
3.  双击实体窗口中的任何对象
4.  您将找到该特定对象的所有字段的列表。

希望这更清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T20:50:06.483

如果双击 Object 实体，则会显示字段的名称。

# java - 扫描仪未检测到空行且计数器不准确

> ID：15855752
> 
> 赞同：0
> 
> 时间：2013-04-06T20:36:14.970
> 
> 标签：java, counter, java.util.scanner, nosuchelementexception

这应该是一个非常基本的程序，但我是 Java 新手。我希望能够使用 Scanner 将多个字符串输入到控制台中来检测它们。到目前为止，我已经能够正确输入部分，我希望程序以这样一种方式运行，即在输入空白而不是字符串时显示结果。奇怪的是，当我点击两次 return 时，我只能得到结果，但是，当有超过 4 个输入点击 return 一次时。我的计数器应该计算输入的“课程”数量并将它们显示在结果中，但它给出的读数不准确。

```
import java.util.Scanner;

public class Saturn
{

    static Scanner userInput = new Scanner(System.in);

    public static void main(String[] args)
    {

        System.out.println("For each course in your schedule, enter its building");
        System.out.println("code [One code per line ending with an empty line]");

        String input;
        int counter = 0;

        while (!(userInput.nextLine()).isEmpty())
        {
            input = userInput.nextLine();
            counter++;
        }

        System.out.println("Your schedule consits of " + counter + " courses");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:40:03.903

你调用`Scanner#nextLine`了两次——一次在`while`循环表达式中，一次在循环体中。您可以`input`从`while`循环表达式中分配。此外，您可以使用`Scanner#hasNextLine`来防御`NoSuchElementException`发生：

```
while (userInput.hasNextLine() && 
        !(input = userInput.nextLine()).isEmpty()) {
   System.out.println("Course accepted: " + input);
   counter++;
} 
```

# c# - 将项目添加到所有者窗口列表框

> ID：15855754
> 
> 赞同：0
> 
> 时间：2013-04-06T20:36:25.463
> 
> 标签：c#, properties, listbox, window

我实际上是在尝试向所有者窗口中的 ListBox 添加一个元素

我尝试使用 Owner Windows 属性，但无法访问我的 ListBox。

```
Window parent = this.Owner;
parent.toto.Items.Add(); 
```

我还尝试在我的 Owner Window 类中添加一个公共属性（并在 set 方法上添加项目），但我也无法访问它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:44:47.603

`Owner`属性的类型是`Window`。编译器不知道它实际上是您创建的类型。如果您执行演员表，并且您`ListBox`是**公开**的，您应该能够访问它：

```
YourWindowType parent = (YourWindowType)this.Owner;
parent.toto.Items.Add(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:40:50.390

尝试

> `Window parent = this.ActiveForm;`

# r - 在R中使用日期值不等式子集行

> ID：15855756
> 
> 赞同：0
> 
> 时间：2013-04-06T20:36:38.037
> 
> 标签：r, date, subset

我想使用 2 个不同的日期变量——START 和 END（在第 2 列和第 3 列中）对我拥有的数据（DATA）集进行子集化。它有两个部分。首先，我想排除这两个变量缺失值的行。我一直在使用这个：

```
!is.na(DATA[,2:3]) 
```

然后，我只需要包含 START 值等于或晚于 1999 年 3 月 3 日并且 END 值在 2002 年之前的行。START 和 END 变量都是数字并且具有先前格式化的日期类如（格式='%d%b%Y'）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:10:41.027

```
library(ts)
data1<-window(data.ts, start=c(1993, 3,3), end=c(2002,12,31)) # you need to set the data as.ts

#or,

library(zoo)
data1<-data.z[as.Date(c("1993/3/3", "2002/12/31"))] # you need to set the data as .z 
```

# opencl - OpenCL 1.2 C++ Wrapper - 对 clReleaseDevice 的未定义引用

> ID：15855759
> 
> 赞同：5
> 
> 时间：2013-04-06T20:36:49.010
> 
> 标签：opencl, nvidia

我正在尝试将 OpenCL C++ 包装 API 用于以下程序：

```
#define __CL_ENABLE_EXCEPTIONS

#include <CL/cl.hpp>
#include <cstdio>
#include <cstdlib>
#include <iostream>

 const char helloStr []  = "__kernel void "
                          "hello(void) "
                          "{ "
                          "  "
                          "} ";

 int
 main(void)
 {
    cl_int err = CL_SUCCESS;
    try {

      std::vector<cl::Platform> platforms;
      cl::Platform::get(&platforms);
      if (platforms.size() == 0) {
          std::cout << "Platform size 0\n";
          return -1;
      }

      cl_context_properties properties[] =
         { CL_CONTEXT_PLATFORM, (cl_context_properties)(platforms[0])(), 0};
      cl::Context context(CL_DEVICE_TYPE_CPU, properties);

      std::vector<cl::Device> devices = context.getInfo<CL_CONTEXT_DEVICES>();

      cl::Program::Sources source(1,
          std::make_pair(helloStr,strlen(helloStr)));
      cl::Program program_ = cl::Program(context, source);
      program_.build(devices);

      cl::Kernel kernel(program_, "hello", &err);

      cl::Event event;
      cl::CommandQueue queue(context, devices[0], 0, &err);
      queue.enqueueNDRangeKernel(
          kernel,
          cl::NullRange,
          cl::NDRange(4,4),
          cl::NullRange,
          NULL,
          &event);

      event.wait();
    }
    catch (cl::Error err) {
       std::cerr
          << "ERROR: "
          << err.what()
          << "("
          << err.err()
          << ")"
          << std::endl;
    }

   return EXIT_SUCCESS;
 } 
```

我使用该博客文章中的相同内核文件，无论如何这不是问题，因为我无法通过编译。

我正在使用以下命令编译程序：

```
g++ example.cpp -o example -l OpenCL 
```

我收到以下错误消息：

```
/tmp/ccbUf7dB.o: In function `cl::detail::ReferenceHandler<_cl_device_id*>::release(_cl_device_id*)':
example.cpp:(.text._ZN2cl6detail16ReferenceHandlerIP13_cl_device_idE7releaseES3_[_ZN2cl6detail16ReferenceHandlerIP13_cl_device_idE7releaseES3_]+0x14): undefined reference to `clReleaseDevice'
collect2: error: ld returned 1 exit status 
```

我已经阅读了有关 clReleaseDevice 不适用于旧设备的内容（例如，请参阅[此问题](https://stackoverflow.com/questions/15305212/run-opencl-program-on-nvidia-hardware)），但我的显卡是最新的（NVidia GTX 660 Ti，支持 OpenCL 1.2）。我可以从那里去哪里？

我在 Ubuntu 13.04 x64 上运行它，并从 ubuntu 存储库安装了 nvidia-opencl-dev 和 opencl-headers。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T18:32:32.223

# 根本原因

问题是您链接的 OpenCL 库不支持 OpenCL 1.2。笼统地说，在支持您要使用的版本的 OpenCL 实现可用于特定平台之前，当链接到随它提供的 OpenCL 共享库时，您将遇到这个问题。有两种解决方案：

*   从 Khronos 下载与您选择的硬件提供的 OpenCL 版本相匹配的 cl.hpp 版本，并继续使用设备制造商提供的库。
*   链接到实现最新 OpenCL 标准的 OpenCL 共享库，但编写多个代码路径 - 每个 OpenCL 版本一个，确保每个代码路径仅使用该版本支持的 OpenCL 功能。**这条路线更难，我不知道如何使用 C++ 包装器来实现。**如果您尝试在不支持 OpenCL 1.2 的平台上调用 OpenCL 1.2 函数，您将收到段错误，这就是需要不同代码路径的原因。

# 英伟达专用

Nvidia 在提供 OpenCL 1.2 支持方面非常缓慢。结果，他们的 OpenCL 库没有提供链接器正在寻找的 OpenCL 1.2 函数，从而导致错误。

**2015 年 5 月，Nvidia 发布了支持 OpenCL 1.2 的驱动程序**，请参阅下面 Z Boson 的评论。更新驱动程序应该可以解决链接器错误。GeForce GTX 6xx 和更高版本的显卡（前几代的更名除外）支持 OpenCL 1.2。您可以在 Khronos OpenCL 网站上查看[符合标准的产品列表](https://www.khronos.org/conformance/adopters/conformant-products)以确保。列出了 GTX 660 Ti，所以你很幸运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-08T09:26:38.260

是的。我从未在 Nvidia 设备上看到过 OpenCL 1.2。在您的系统上编译它，然后查看“OpenCL C 版本”：

```
#include <iostream>
#include <vector>
#include <CL/cl.hpp>

int main() {

    // Get the platforms
    std::vector<cl::Platform> platforms;
    cl::Platform::get(&platforms);

    // Loop over the number of platforms
    for ( size_t i = 0; i < platforms.size(); ++i ) {

        // Display the platform information
        std::cout << "Platform " << i+1 << ": "
                            << platforms[i].getInfo<CL_PLATFORM_NAME>()
        << "\n----------------------------------------------"
        << "\nVendor    : " << platforms[i].getInfo<CL_PLATFORM_VENDOR>()
        << "\nVersion   : " << platforms[i].getInfo<CL_PLATFORM_VERSION>();

        // Get the devices on the current platform
        std::vector <cl::Device> devices;
        platforms[i].getDevices( CL_DEVICE_TYPE_ALL , & devices);

        // Loop over the devices
        std::cout << "\n----------------------------------------------\n";
        for ( size_t j = 0; j < devices.size(); ++j ) {

            // Display the device information
            std::cout
            << "\n   Device " << j+1 << ": "
            <<          devices[j].getInfo< CL_DEVICE_NAME >()
            << "\n\t Device Version     : "
            <<          devices[j].getInfo< CL_DEVICE_VERSION >()
            << "\n\t OpenCL C Version   : "
            <<          devices[j].getInfo< CL_DEVICE_OPENCL_C_VERSION >()
            << "\n\t Compute Units      : "
            <<          devices[j].getInfo< CL_DEVICE_MAX_COMPUTE_UNITS >()
            << "\n\t Max Work Group Size: "
            <<          devices[j].getInfo< CL_DEVICE_MAX_WORK_GROUP_SIZE >()
            << "\n\t Clock Frequency    : "
            <<          devices[j].getInfo< CL_DEVICE_MAX_CLOCK_FREQUENCY >()
            << "\n\t Local Memory Size  : "
            <<          devices[j].getInfo< CL_DEVICE_LOCAL_MEM_SIZE >()
            << "\n\t Global Memory Size : "
            <<          devices[j].getInfo< CL_DEVICE_GLOBAL_MEM_SIZE >();

            // Check if the device supports double precision
            std::string str = devices[j].getInfo<CL_DEVICE_EXTENSIONS>();
            size_t found = str.find("cl_khr_fp64");
            std::cout << "\n\t Double Precision   : ";
            if ( found != std::string::npos ){ std::cout << "yes\n"; }
            else {                             std::cout <<  "no\n"; }
        }
        std::cout << "\n----------------------------------------------\n";
    }
//  std::cin.ignore();
    return 0;
} 
```

# google-apps-script - 在 google docs 脚本中添加和/或 if 语句的子句

> ID：15855762
> 
> 赞同：4
> 
> 时间：2013-04-06T20:37:23.190
> 
> 标签：google-apps-script, google-sheets

我需要在谷歌脚本中包含和/或声明 if 条件。我是脚本新手，无法找到这样做的方法。请帮忙

```
if (dateval<>"") and (repval<>"") {condition if true} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-06T20:48:27.917

您可以[在此站点上找到有关](http://www.w3schools.com/js/)[该主题](http://www.w3schools.com/js/js_comparisons.asp)（和其他）的所有信息。

在你的例子中，答案是

```
if (dateval!="" && repval!="") {do something} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-12T18:17:14.880

逻辑符号
或 ||
并且 && 等于 == 不是 !=

[https://www.w3schools.com/js/js_comparisons.asp](https://www.w3schools.com/js/js_comparisons.asp)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2019-10-13T01:22:55.977

我尝试了[Serge insas 的答案](https://stackoverflow.com/a/15855859)，发现它没有编译。

我搞砸了，修改该行如下：

```
if ((dateval<>"") and (repval<>"")) {condition if true} 
```

我终于让这个工作了。显然，它需要额外的括号。

# excel - excel表格中的动态减法公式

> ID：15855764
> 
> 赞同：-2
> 
> 时间：2013-04-06T20:37:30.183
> 
> 标签：excel, dynamic, excel-formula

我需要在 excel 中编写一个用于动态减法的公式，该公式从其上方的单元格中减去一个单元格（指定列的）。

例如，A2 = A1 - G1（G 列是固定的）

```
 and  A3    =     A2   -    G2

    and  A4    =     A3   -    G3 
```

等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:49:47.383

Excel 足够聪明，可以使用对当前单元格的动态引用和相对引用。例如，如果您`=A1-G1`输入单元格`A2`并使用方块向下拖动此单元格，您将自动在 column 中的所有其他单元格中获得类似的公式`A`。

视频示例：[复制单元格并保持与当前单元格相关的公式](http://m.youtube.com/#/watch?v=saIfyPISk40&desktop_uri=/watch?v=saIfyPISk40)

# vb.net - 如何响应以编程方式创建的 UI 元素引发的事件？

> ID：15855765
> 
> 赞同：0
> 
> 时间：2013-04-06T20:37:30.920
> 
> 标签：vb.net, winforms, visual-studio-2012

我正在为一个课程作业创建一个棋盘游戏。对于电路板，我使用一些嵌套的 For 循环通过 2D 数组运行，以在每个方格生成一个“空间”对象。

Space 对象包含一个图片框和一些关于该空间的数据。

如何处理由单击生成的图片框引起的事件，而不必为每个空间进行硬编码？

我注意到[这个](https://stackoverflow.com/questions/13023343/how-to-get-windows-for-to-raise-mouseclick-event-for-programatically-created-pic)问题似乎解决了这个问题，但它在 C# 中，我无法将它翻译成 VB.Net。

编辑：这就是板的生成方式

```
 Dim board(23, 24) As Space

 Private Sub GenerateBoard()

    Dim spaceSize As New Size(30, 30)
    Dim spaceLocation As New Point
    Dim validity As Boolean

    For Y = 0 To 24
        For X = 0 To 23
            spaceLocation.X = 6 + (31 * X)
            spaceLocation.Y = 6 + (31 * Y)

            If validSpaces(Y).Contains(X + 1) Then
                validity = True
            Else
                validity = False
            End If

            board(X, Y) = New Space(validity, spaceSize, spaceLocation)
            Me.Controls.Add(board(X, Y).imageBox)
            board(X, Y).imageBox.BackColor = Color.Transparent
            board(X, Y).imageBox.BringToFront()
        Next
    Next
End Sub 
```

空间类：

```
Public Class Space

Dim _active As Boolean
Dim _imageBox As PictureBox

Public Sub New(ByVal activeInput As Boolean, ByVal size As Size, ByVal location As Point)
    _active = activeInput
    _imageBox = New PictureBox
    With _imageBox
        .Size = size
        .Location = location
        .Visible = False
    End With
End Sub

Property active As Boolean
    Get
        Return _active
    End Get
    Set(value As Boolean)
        _active = value
    End Set
End Property

Property imageBox As PictureBox
    Get
        Return _imageBox
    End Get
    Set(value As PictureBox)
        _imageBox = value
    End Set
End Property

Public Sub highlight()
    With _imageBox
        .Image = My.Resources.Highlighted_slab
        .Visible = True
    End With
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:00:42.867

首先由设计器（文本框、标签...）创建的所有控件也是由代码生成的，但 VisualStudio 会为您编写。如果您打开 Designer 文件（`yourForm.Designer.vb`），那么您可以看到如何生成控件的所有代码。

如果你想为你的创建事件处理程序`pictureBox`，那么：

```
//Initialize control
Private WithEvents _imageBox as PictureBox 
```

然后创建一个事件处理方法：

```
Private Sub imageBox_Click(sender as Object, e as EventArgs)
    //Your code
End Sub 
```

然后在 VB.NET 中，您可以通过两种方式将事件处理程序分配给事件

首先：在你创建了一个pictureBox( `New PictureBox()`)之后的类构造函数中添加

```
AddHandler Me._imageBox, AddressOf Me.imageBox_Click 
```

第二：在线我们您创建了一个事件处理程序添加下一个：

```
Private Sub imageBox_Click(sender as Object, e as EventArgs) Handles _imageBox.Click
    //Your code
End Sub 
```

并记住将您的图片框添加到表单控件`YourForm.Controls.Add(spaceInstance.ImageBox)`

# sql - 如何提高使用表值函数的查询的性能？

> ID：15855767
> 
> 赞同：2
> 
> 时间：2013-04-06T20:37:44.393
> 
> 标签：sql, postgresql, database-performance

我有一个表格查询：

```
SELECT a.id, b.colb, c.colc, d.cold, ...
FROM a JOIN b on a.id=b.id
       JOIN c on a.id=c.id
       JOIN d on a.id=d.id
       JOIN e on a.id=e.id
       ... 
```

这里的每个表实际上都是一个表值函数。此查询的运行时间超过一分钟，但当我手动创建临时表 ( `CREATE TEMPORARY TABLE ax as SELECT * from a`) 并针对这些临时表运行查询时，它需要几毫秒（创建表也需要几毫秒）。

是什么导致了如此大的性能差异（至少两个数量级）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T20:39:21.183

PostgreSQL 优化器可能会选择将您的连接作为[循环连接](http://en.wikipedia.org/wiki/Category%3aJoin_algorithms)来执行。也就是说，它将评估每个左侧行的函数调用。

您使用临时表的解决方案是避免这种情况的绝佳方法。即使优化器更愿意`loop join`再次使用，结果也会在临时表中进行大量查找。查找比重复评估函数便宜一个数量级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T23:50:25.023

尝试 CTE：

```
with
    a as (select * from a),
    b as (select * from b),
    c as (select * from c),
    d as (select * from d),
    e as (select * from e)
select a.id, b.colb, c.colc, d.cold, ...
from a
    join b on a.id=b.id
    join c on a.id=c.id
    join d on a.id=d.id
    join e on a.id=e.id 
```

# android - 为另一个 Galaxy S3 变体构建 Galaxy S3 内核

> ID：15855769
> 
> 赞同：1
> 
> 时间：2013-04-06T20:37:50.503
> 
> 标签：android, kernel, porting, galaxy, samsung-mobile

基本上，我要做的是构建一个内核，该内核为 Galaxy S3 (d2usc) 的一个变体配置另一个 Galaxy S3 (d2cri)，它们本质上是相同的模型，但内核不可互换。我有一个我修改过的 defconfig，但我的问题是，需要在内核源代码中添加或更改哪些设备特定代码才能使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-13T16:01:22.267

你可以做的是去三星的开源页面，它刚刚焕然一新。你可以在这里找到它[http://opensource.samsung.com/](http://opensource.samsung.com/)。

点击手机，选择“手机”并选择您的确切型号。可在此处找到可用模型变体的列表[http://en.wikipedia.org/wiki/Samsung_Galaxy_S_III#Model_variants](http://en.wikipedia.org/wiki/Samsung_Galaxy_S_III#Model_variants)。

在三星开源页面上，您可以下载两个不同的内核源代码。打开包装并比较它们。通常，它们会附带一个关于如何构建和如何创建配置文件的简短自述文件。比较它们。并且不要忘记比较来源。对于 linux，有一些很棒的比较工具，比如 meld ( [http://meldmerge.org/](http://meldmerge.org/) )。

在某些设备上，启用了配置标志，它允许您从设备中提取正在运行的内核的配置。如果你有文件权限，你通常可以做一个

```
adb pull /proc/config.gz myDeviceOriginalKernelConfig.gz 
```

打开包装并研究它。在较新的设备上，出于“安全”原因，默认情况下可能不会设置此配置标志。

祝你好运

# javascript - 为什么我们需要客户端和服务器端验证？

> ID：15855770
> 
> 赞同：12
> 
> 时间：2013-04-06T20:37:50.670
> 
> 标签：javascript, validation, web-applications, client-side-validation, server-side-validation

使用验证器同时使用客户端验证 (JavaScript) 和服务器端验证的论点是：如果客户端浏览器不支持 JavaScript，则用户不能使用客户端验证。

我的问题是这个论点在实践中有多好？理论上这是有道理的，但实际上，如果在浏览器中禁用 JavaScript，那么大多数网站功能甚至都无法工作。如果没有 JavaScript，用户甚至可能无法加载页面，更不用说提交表单了。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-06T20:41:05.107

客户端验证只是避免了客户端“但我把这些都填了，它什么也没告诉我！”。这*实际上*不是强制性的，实际上，客户端验证是一个非常新的东西（阅读：5 岁或更少）。实际上，它所做的只是阻止您的客户端（启用 JS）在重新加载页面之前知道表单是否正常。如果 AJAX 在游戏中，那就不同了——它可以让您节省带宽以及在提交前向用户提供反馈。最后，如果您正在构建严格的客户端、点对点交换应用程序（想想游戏），您将需要客户端验证以防止客户端作弊。

服务器端验证也很重要，因为通过关闭 JavaScript 可以完全绕过客户端验证。在某种程度上，JS 驱动的验证是一种方便和美观/美观的改进，不应*依赖*。此外，在本地编辑页面的源代码以禁用或绕过即使是最复杂的 JS 验证也是微不足道的。

如果您不进行服务器端验证，用户可以做什么？任何事情，取决于您如何使用他们的数据。您可能允许用户删除整个数据库（或者更糟糕的是，泄露它们），修改他们喜欢的任何内容（或者更糟糕的是，阅读他们喜欢的任何内容。目录遍历缺陷是顽皮的人极其常见的入口点），并随意提升他们的权限。你想冒这个风险吗？不验证用户输入就像信任别人而不是在你的房子上安装锁一样。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-06T20:45:04.073

**验证**应始终在服务器端执行 - 您永远不能信任客户端验证。

*客户端验证*始终提供更好的用户体验 (UX)，因此用户不必仅仅因为表单中的值无效而提交和重新加载页面 - 它使事情变得更加动态。

由于您甚至不需要浏览器来发出请求，而您的网站依赖于 JS 才能正常工作，因此您将需要服务器端验证并清理所有用户输入，以防您不关心数据库被盗用。

现在由您决定是否要提供带有动态客户端验证提示的 UI。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T20:51:55.843

*始终保护您在服务器上的输入*。这并不总是与禁用 JavaScript 的用户有关，而且他们可能会破坏服务器。

例如，如果一个站点对 . 有一个 JavaScript 最大长度检查`<input>`，用户可以禁用该检查，从而发送比您的服务器和/或数据库预期更多的数据。这可能会通过长时间占用服务器线程的大型 POST 使服务器过载，它可能会暴露数据库中的弱点，例如违反数据库约束可能会暴露有关任何持久性信息的详细信息。更糟糕的是，如果没有约束，用户可能能够执行注入攻击。

另一个例子是有人使用外部 HTTP 工具向您的服务器发送请求，完全绕过任何 JavaScript。我在开发过程中一直使用适用于 Chrome 的[Advanced REST Client](http://restforchrome.blogspot.co.uk/)来测试 JSON API。

通过 JavaScript 进行客户端验证只是一种向使用网站的人提供有关他们与网站交互的任何信息的*更快反馈的方式。*由于上述原因，在传统的客户端-服务器通信中，它**不应该是唯一的验证。**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-06T20:52:05.473

如果用户禁用了 javascript 是他自己的问题，他决定单独禁用 javascript 是有原因的......因此，当您制作网站时，您必须始终牢记您的网站必须对具有和没有javascript。出于多种原因需要双方验证，其中一些是：

*   用户已禁用 javascript
*   恶意用户故意删除了 javascript 以利用系统
*   通过 javascript 验证，您可以减少网站和客户端之间的数据流量。
*   当然，通过服务器验证，您可以确保所有数据都是正确的

有可能有一个同时使用 javascript 和“旧”技术的网站对每个用户和每个浏览器都有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T20:45:26.690

客户端验证是一种具有即时字段验证的高度交互表单的解决方案，但它不会阻止恶意用户将无效的格式化数据注入和发布到服务器。重要的是，您的服务器端脚本验证用户所做的一切，否则您会将您的网站暴露给 SQL 注入攻击、XSS 攻击、用户做他们不应该做的事情等。

# appcmd - 如何使用 AppCMD 使用站点名称测试并查看 IIS7 中是否存在网站？

> ID：15855777
> 
> 赞同：7
> 
> 时间：2013-04-06T20:38:28.927
> 
> 标签：appcmd

我想使用 appcmd 向站点添加新绑定，但我需要先查看它是否存在。如何使用 AppCMD 做到这一点？

非常感激！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-12-04T14:06:30.753

您可以使用以下代码创建批处理文件：

```
@ECHO OFF

SET appcmd=CALL %WINDIR%\system32\inetsrv\appcmd

%appcmd% list site /name:"Default Web Site"
IF "%ERRORLEVEL%" EQU "0" (
    ECHO EXISTS
    REM Add your bindings here
) ELSE (
    ECHO NOT EXISTS
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-22T07:57:28.407

这是 PowerShell 方式：

```
$exists = (&$appcmd list apppool /name:'MyApplicationPool') -ne $null

if ($exists -eq $false)
{
    Write-Host 'App Pool does not exist'
}
else
{
    Write-Host 'App Pool exists'
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-16T08:39:44.487

您可以指定 site.name 并使用命令行在一行中执行此操作：`"%systemroot%\system32\inetsrv\AppCmd.exe" list apps /path:"/PORTALSiteName" /site.name:"Default Web Site" && ECHO EXISTS`

# delphi - “类”单元实现

> ID：15855785
> 
> 赞同：0
> 
> 时间：2013-04-06T20:40:02.743
> 
> 标签：delphi, freepascal

也许我是盲人，但我在类的 Free Pascal 源文件实现和其他一些单元（如 System. 大多数情况下，但不仅是，我对`TObject`,`TPersistent`和`TControl`代码感兴趣。我在 SourceForge 上的 Lazarus 和 FP 站点中都进行了搜索。我的问题是文件列表很大。谷歌拒绝搜索是因为`robots.txt`.

有一个[lclclasses.pas](http://svn.freepascal.org/cgi-bin/viewvc.cgi/tags/lazarus_0_9_30_4RC3/lcl/lclclasses.pp?view=markup&revision=35874&root=lazarus)单元，但它不是我要找的 - 在`uses`块中它指的是类，但没有像“classes.pas”这样的文件（我的意思是我找不到它）。

[在这里](http://svn.freepascal.org/cgi-bin/viewvc.cgi/branches/release_0_9_30_2_rc1/lcl/include/control.inc?view=markup&revision=31606&root=lazarus)我找到了`TControl`实现，但这在层次结构中太远了。

在[此页面上](http://www.freepascal.org/docs-html/rtl/classes/tpersistent.html)，有一条信息`TPersistent`在“classesh.inc”中定义，我下载了源代码，它确实在 rtl\objpas\classes\classesh.inc 中，但是，这个文件似乎只是`interface`单元的一部分。

我也将这个问题标记为“delphi”，因为事实上如果有一些 Delphi 的开源代码，我也可以接受。如果这个基类的实现`TObject`是`TPersistent`某种内置功能（`System`我认为单位是），我还可以看看 C（或任何其他语言）源代码。

有人可以帮我找到类单元的实现和在那里定义的对象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:22:19.960

因为 FPC 支持的平台非常多，所以 RTL 代码的结构有些复杂。

但是 RTL 代码中与平台无关的部分，也就是您感兴趣的部分，可以在该`source\rtl\objpas`目录下找到。

*   的代码`Classes`在包含文件中`source\rtl\objpas\classes`。相关文件是`classesh.inc`和`classes.inc`。前者包含接口部分的代码，后者包含实现部分的代码。
*   该`System`单元是高度特定于平台的。在 下查找您的平台`source\rtl`。
*   `SysUtils`看下`source\rtl\objpas\sysutils`。_

# java - 在“AWT-EventQueue-0”线程错误中出现异常

> ID：15855788
> 
> 赞同：0
> 
> 时间：2013-04-06T20:40:10.647
> 
> 标签：java, swing, exception

我知道这个问题已经被问了一百万次了，但我看过很多答案，但它们对我没有任何帮助。我不知道我做错了什么。

我相信我收到错误的原因是由于这里的代码：

```
 RollerBall roller = new RollerBall(game);
        roller.setPosition(new Vec2(-50,-120)); 
```

我正在使用上面的代码来调用一个代码如下所示的类：

```
package game;

import city.soi.platform.*;
import fsm.FSM;

public class RollerBall extends Body implements StepListener {

    public static final float RANGE = 150;

    private Game game;
    private FSM<RollerBall> fsm;

    public RollerBall(Game game) {
        super(game.getWorld());
        game = game;
        fsm = new FSM<RollerBall>(this);
        fsm.start(new StandStillState());
        getWorld().addStepListener(this);
    }

    public boolean inRangeLeft() {
        Player p = game.getPlayer();
        float gap = getPosition().x - p.getPosition().x;
        return gap < RANGE && gap > 0;
    }

    public boolean inRangeRight() {
        Player p = game.getPlayer();
        float gap = getPosition().x - p.getPosition().x;
        return gap > -RANGE && gap < 0;
    }

    public boolean inRange() {
        return inRangeLeft() || inRangeRight();
    }

    public void preStep(StepEvent e) {
        fsm.update();
    }

    public void postStep(StepEvent e) {}
} 
```

最后，当尝试这样做时，我收到以下错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at game.RollerBall.inRangeLeft(RollerBall.java:23)
    at game.StandStillState.update(StandStillState.java:10)
    at fsm.FSM.update(FSM.java:47)
    at game.RollerBall.preStep(RollerBall.java:39)
    at city.soi.platform.World.preStep(World.java:495)
    at city.soi.platform.World.step(World.java:328)
    at city.soi.platform.World$1.actionPerformed(World.java:206)
    at javax.swing.Timer.fireActionPerformed(Timer.java:312)
    at javax.swing.Timer$DoPostEvent.run(Timer.java:244)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:48:00.493

编码：

```
 RollerBall roller = new RollerBall(game);
    roller.setPosition(new Vec2(-50,-120)); 
```

堆栈跟踪中未提及。

*堆栈跟踪中提到了*这一点：**

 *```
at game.RollerBall.inRangeLeft(RollerBall.java:23)
at game.StandStillState.update(StandStillState.java:10)
at fsm.FSM.update(FSM.java:47)
at game.RollerBall.preStep(RollerBall.java:39) 
```

所以错误在这里某处，但你没有显示行号：

```
public boolean inRangeLeft() {
    Player p = game.getPlayer();
    float gap = getPosition().x - p.getPosition().x;
    return gap < RANGE && gap > 0;
} 
```

那么`game`, `getPosition()`, `p`, 还是`p.getPosition()`null 呢？

实际上，如果行号与发布的内容一致，我们就可以解决。如果：

```
game.RollerBall.preStep(RollerBall.java:39) 
```

然后我们可以倒数到第 23 行，就是这一行：

```
 Player p = game.getPlayer(); 
```

所以我猜那`game`是空的。

**编辑**- 查看您的构造函数：

```
game = game; 
```

这不会分配`game`给您班级的`game`字段。你需要这个：

```
this.game = game; 
```*

# javascript - Javascript 验证在 html 注册表单中不起作用

> ID：15855790
> 
> 赞同：0
> 
> 时间：2013-04-06T20:40:20.637
> 
> 标签：javascript, html, validation

我正在使用 php mysql 进行用户注册。我添加了 javascript 验证来检查任何字段是否为空白。但是表单验证不起作用。形式是

```
<?php
include("header.php");
include ("includes/mainmenu.php");
?>

<!--Javasript Validation File Import -->
<script type="text/javascript" src="js/validation.js"></script>
<script type="text/javascript" src="js/formreg.js"></script>
<script type="text/javascript" language="JavaScript">

function HidePart(d) { document.getElementById(d).style.display = "none";  }
function ShowPart(d) { document.getElementById(d).style.display = "block"; }
function CheckboxChecked(b,d)
{
   if(b) { ShowPart(d); }
   else  { HidePart(d); }
}
</script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!--<link rel="stylesheet" type="text/css" href="styles/styles.css" />-->
<link href="styles/form.css" rel="stylesheet" type="text/css">
<link href="styles/structure.css" rel="stylesheet">
<link href="styles/bootstrap.css" rel="stylesheet">

</head>

<body onLoad="document.registration.userid.focus();">
<br>
<div id="container" class="ltr">
    <header id="header" class="info">
<h2>User Registration</h2>
</header>
    <form action="insert.php" method="post" name="regForm" onSubmit="return valide()">

            <ul>

            <li id="foli0" class="notranslate">
            <label class="desc" id="title0" for="Field0">Name</label>
            <span><input id="fname" type="text" name="fname" class="field text1 fn" size="50"/></span><span>Please Enter Your full Name</span>
            </li>

            <li id="foli0" class="notranslate">
            <label class="desc" id="title0" for="Field0">Username</label>
            <span><input id="Field0" type="text" name="usernamename" class="field text1 fn"  size="50" /></span>
            </li>

            <li id="foli0" class="notranslate">
            <label class="desc" id="title0" for="group">Educational Background</label></td>
            <span><select id="Field0" class="field text1 fn" name="background" size="0">
                <option selected="0" value="">select your Background</option>
                <option value="Science">Science</option>
                <option value="Humanities">Humanities</option>
                <option value="Commerce">Commerce</option>
                </select></span><span>Enter your HSC Background</span>
            </li>

            <li id="foli0" class="notranslate">
            <label class="desc" id="title0" for="Field0">Date of Birth</label>
            <span><input id="Field0"  type="date" name="birth" class="field text1 fn"  size="50"/></span><span>Enter your date of Birth</span>
            </li>

            <li id="foli0" class="notranslate">
            <label class="desc" id="title0" for="Field0">Password</label>
            <span><input id="Field0"  type="password" name="password" class="field text1 fn" size="50" /></span><span>Enter your password</span>
            </li>

            <li id="foli0" class="notranslate">
            <label class="desc" id="title0" for="Field0">Password</label>
            <span><input id="Field0"  type="password" name="conpassword"  class="field text1 fn" size="50" /></span><span>Enter your password again</span>
            </li>

            <li id="foli0" class="notranslate">
            <label class="desc" id="title0" for="Field0">Email</label>
            <span><input id="Field0"  type="text" name="email" class="field text1 fn" size="50" /></span><span>Enter a valid email address</span>
            </li>
            <li class="buttons ">
            <div>

                    <input id="submit" name="submit" class="btn" type="submit" value="Complete Registration"/></div>
            </li>

            </ul>
        </form>

            </div>

<?php
include("includes/footer.php");
?> 
```

验证javascript代码是

```
function valide()
{
var fname=document.forms["regForm"]["fname"].value;
var username=document.forms["regForm"]["username"].value;
var subject = document.forms["regForm"]["background"].value;
var password=document.forms["regForm"]["password"].value;
var conpassword=document.forms["regForm"]["conpassword"].value;
var email=document.forms["regForm"]["email"].value;
var atpos=email.indexOf("@");
var dotpos=email.lastIndexOf(".");

if (fname==null || fname=="" || fname.length<7)
  {
  alert("Please provide Your full name");
  return false;
  }

else if (username==null || username=="")
  {
      if(username.length<6)
        {
            alert("Username must contains atleast 6 charecters");
        }
        else
  alert("Please provide a username");
  return false;
  }
 else if(subject==null || subject == "")
    {
        alert("Enter Background");
        return false;
        } 
 else if (password==null || password=="")
  {
      if(password.length<8)
        {
            alert("Password must contain atleast 8 charecters");
            }
            else
  alert("Please insert your password");
  return false;
  }
   else if (conpassword != password)
  {
  alert("Confirm password doesn't match");
  return false;
  }

else if (email==null || email=="")
  {
  alert("Email must be filled out.");
  return false;
  }

else if (atpos <1 || dotpos <atpos+2 || dotpos + 2 >= email.length)
  {
  alert("Not a valid e-mail address");
  return false;
  }
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:11:12.237

让我们看看你的函数 valide()

它有一些错误，当一切正常时它不会返回**真**......

由于它不返回true，因此没有提交表单......

这是一个更正的版本：

```
function valide(){
var fname=document.forms["regForm"]["fname"].value;
var username=document.forms["regForm"]["username"].value;
var subject = document.forms["regForm"]["background"].value;
var password=document.forms["regForm"]["password"].value;
var conpassword=document.forms["regForm"]["conpassword"].value;
var email=document.forms["regForm"]["email"].value;
var atpos=email.indexOf("@");
var dotpos=email.lastIndexOf(".");

// Let me warn you:
// There are many many people with names less than 7 characters

if (fname==null || fname=="" || fname.length<7) {
  alert("Please provide Your full name");
  return false;
} // if returned so else is not required

if (username==null || username==""){
    if(username.length<6){
            alert("Username must contains atleast 6 charecters");
    } else
            alert("Please provide a username");
    return false;
} // if returned so else is not required

if(subject==null || subject == ""){
    alert("Enter Background");
    return false;
} // if returned so else is not required 

if (password == null || password==""){
   // length = 0 or password is null here so:  
   // if(password.length<8)  is unnecessary 
   if(password == ""){  
          alert("Password must contain at least 8 charecters");
   } else
          alert("Please insert your password");
   return false;
}  // if returned so else is not required

if (conpassword != password){
   alert("Confirm password doesn't match");
   return false;
}  // if returned so else is not required

if (email==null || email==""){
   alert("Email must be filled out.");
   return false;
} // if returned so else is not required

if (atpos <1 || (dotpos <atpos+2) || (dotpos + 2 >= email.length)){
   alert("Not a valid e-mail address");
   return false;
} // if returned no else needed.

// and now this function should return:
return(true); 
} 
```

# python - 如何在 Python 中比较 2D 列表是否相等？

> ID：15855792
> 
> 赞同：9
> 
> 时间：2013-04-06T20:40:26.590
> 
> 标签：python, arrays, list

给定两个列表：

```
a = [[1,2],[3,4]]
b = [[1,2],[3,4]] 
```

我将如何写`compare`这样的：

```
compare(a,b) => true 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-06T20:42:18.037

你想要这个吗：

```
>>> a = [[1,2],[3,4]]
>>> b = [[1,2],[3,4]]
>>> a == b
True 
```

注意：`==`当 List 无序时无用，例如（*注意 order in`a`和 in`b`*）

```
>>> a = [[3,4],[1,2]]
>>> b = [[1,2],[3,4]]
>>> a == b
False 
```

请参阅此问题以获取更多参考：[How to compare a list of lists/sets in python?](https://stackoverflow.com/questions/6105777/how-to-compare-a-list-of-lists-sets-in-python)

**编辑**：感谢@dr jimbob

如果要在排序后进行比较，可以使用`sorted(a)==sorted(b)`.
但是再强调一点，如果那样的`c = [[4,3], [2,1]]`话`sorted(c) == sorted(a) == False`，是因为`sorted(c)`不同`[[2,1],[4,3]]`（*不是深入排序*）

[为此，您必须使用链接答案中的技术。因为我也在学习 Python :)]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T20:42:04.883

简单的：

```
def compare(a, b): return a == b 
```

另一种方法是使用`lambda`创建一个匿名函数：

```
compare = lambda a, b: a == b 
```

# svg - d3.js 力有向图的不同节点符号

> ID：15855794
> 
> 赞同：6
> 
> 时间：2013-04-06T20:40:42.523
> 
> 标签：svg, graph, d3.js, nodes, force-layout

如何在 d3.js 的力导向库中将节点显示为不同的符号？我想实现类似于我在下面写的东西：

```
 var node = svg.selectAll(".node") 
      .data(graph.nodes) 
    .enter().append(function(d){return d.shape;}) 
      .attr("class", "node") 
      .attr("r", 5) 
      .style("fill", function(d) { return color(d.group); }) 
      .call(force.drag); 
```

每个节点都有一个编码的形状（“矩形”、“圆形”等）。但是，我收到错误：

```
Uncaught TypeError: Object function (d){return "circle";} has no method 'indexOf' 
```

我与之相关的另一个问题是：如何在为每个形状应用不同属性之间切换？圆形需要细化“r”属性，但矩形需要“高度”和“宽度”。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T22:44:43.350

使用[d3.svg.symbol](https://github.com/mbostock/d3/wiki/SVG-Shapes#wiki-symbol)，如[强制导向符号](http://bl.ocks.org/mbostock/1062383)示例中所示。

# android - 是否可以使用 ArrayList > 在 ExpandabliListivew ChildRows 中？

> ID：15855814
> 
> 赞同：1
> 
> 时间：2013-04-06T20:42:49.740
> 
> 标签：android

我想`ExpandableListview`用来自 ArrayList> 的数据填充我的数据，但是每次我将它发送`ArrayList<hashmap<String,String>>`到适配器时，它只返回第一项并在我添加时重复它们以作为示例

```
ArrayList<hashmap<String,String>> child=new ArrayList<hashmap<String,String>>();

HashMap<String,String> hm=new HashMap<String,String>();

hm.put("Key1","Value1");
hm.put("Key2","Value2");
child.add(hm); 
```

它创建两个具有相同数据的子行，它们是`Value1`

如何解决这个问题？因为我认为`ArrayList<hashmap<String,String>>`不能用于在 ExpandabliListview 中填充子行，因为它适用于`ArrayList<String>`，如果可能请帮助我

# ruby - 如何用 Ruby 编写笛卡尔积？

> ID：15855818
> 
> 赞同：2
> 
> 时间：2013-04-06T20:43:19.357
> 
> 标签：ruby, arrays, cartesian-product

[http://spark-university.s3.amazonaws.com/berkeley-saas/homework/hw1.pdf](http://spark-university.s3.amazonaws.com/berkeley-saas/homework/hw1.pdf)

尝试完成此作业的第 7 部分。以下代码似乎不起作用，但坦率地说，我不确定为什么，自动评分器会留下代码后面的注释。

```
class CartesianProduct
    include Enumerable

    def initialize(arr1 = [], arr2 = [])
        @arr1 = arr1
        @arr2 = arr2
    end

    def each
        prod = []
        @arr1.each do |i|
            @arr2.each do |j|
                prod << [i, j]
            end
        end
        prod.each
    end
end

On Time 
CartesianProduct

Failures:

  1) CartesianProduct should work for the first example given in the homework [15 points]
     Failure/Error: c.to_a.should include([:a, 4],[:a,5],[:b,5],[:b,4])
       expected [] to include [:a, 4], [:a, 5], [:b, 5], and [:b, 4]
       Diff:
       @@ -1,2 +1,2 @@
       -[[:a, 4], [:a, 5], [:b, 5], [:b, 4]]
       +[]

  2) CartesianProduct should work for other examples for 2x2 [20 points]
     Failure/Error: c.to_a.should include([11, 13],[11, 14],[12, 13],[12, 14])
       expected [] to include [11, 13], [11, 14], [12, 13], and [12, 14]
       Diff:
       @@ -1,2 +1,2 @@
       -[[11, 13], [11, 14], [12, 13], [12, 14]]
       +[]

  3) CartesianProduct should work for 3x3 and 4x4 [40 points]
     Failure/Error: c.to_a.should include([1, 4],[1, 5],[1, 6],[2, 4],[2, 5],[2, 6],[3, 4],[3, 5],[3, 6])
       expected [] to include [1, 4], [1, 5], [1, 6], [2, 4], [2, 5], [2, 6], [3, 4], [3, 5], and [3, 6]
       Diff:
       @@ -1,2 +1,2 @@
       -[[1, 4], [1, 5], [1, 6], [2, 4], [2, 5], [2, 6], [3, 4], [3, 5], [3, 6]]
       +[]

Finished in 0.00631 seconds
5 examples, 3 failures

Failed examples:

rspec /tmp/rspec20130406-910-bhzxkp.rb:32 # CartesianProduct should work for the first example given in the homework [15 points]
rspec /tmp/rspec20130406-910-bhzxkp.rb:47 # CartesianProduct should work for other examples for 2x2 [20 points]
rspec /tmp/rspec20130406-910-bhzxkp.rb:55 # CartesianProduct should work for 3x3 and 4x4 [40 points] 
```

有人可以向我解释错误是什么，以便我可以在我的代码中修复它们吗？我是 Ruby 的新手，所以我实际上不确定自动评分器在说什么......

一些示例输入和输出：[:a, :b, :c], [4, 5] #=> [ [:a,4], [:a,5], [:b,4], [:b ,5], [:c,4], [:c,5] ] 对于这种情况，我的代码有效。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-06T21:07:28.773

采用[`Array#product`](http://www.ruby-doc.org/core-2.0/Array.html#method-i-product)

```
p [:a, :b, :c].product [4, 5] 
```

**输出：**

```
[[:a, 4], [:a, 5], [:b, 4], [:b, 5], [:c, 4], [:c, 5]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T21:32:50.550

您的每个实现都是错误的。您在对数组上调用 each，但您没有通过传递给 each 方法的块。解决此问题的一种方法是将您的方法定义为

```
def each(&block)
  #setup prod
  prod.each(&block)
end 
```

它将块传递给您的 each 方法，并确保在您计算的产品数组上调用 each 时也使用它

# css - 如何在不颠倒顺序的情况下直接在无序列表中模拟浮动列表项？

> ID：15855820
> 
> 赞同：6
> 
> 时间：2013-04-06T20:43:27.790
> 
> 标签：css, css-float, html-lists

我的网站上有一个导航菜单，它是一个无序列表。项目自然地从左到右以正确的顺序显示。它看起来像这样：

```
|[--1--][-2-][----3----][--4--].......|
|[---5---][-6-][-----7-----][-8-].....|
|[------9------][----10----]..........| 
```

显然，如果我将所有列表项（“li”）浮动到右侧，它们将显示在我希望它们购物的位置——但顺序相反：

```
|.......[--4--][----3----][-2-][--1--]|
|.....[-8-][-----7-----][-6-][---5---]|
|..........[----10----][------9------]| 
```

我喜欢这个定位，但我不想要颠倒的顺序。我需要它看起来像这样：

```
|.......[--1--][-2-][----3----][--4--]|
|.....[---5---][-6-][-----7-----][-8-]|
|..........[------9------][----10----]| 
```

我提出的限制是我不能以相反的顺序重写菜单 HTML。我想单独在 CSS 中做到这一点。据推测，这可以通过将无序列表（“ul”）向右浮动，并将列表项（li）向左浮动来完成。但是，我没有成功，因为我的 CSS 太小了，我不确定我可能会错过什么。

在不更改 HTML 的情况下是否可以实现所需的样式？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-06T20:54:08.233

不要使用浮动，而是让导航项显示：inline-block。如果将容器设置为 text-align: right，块将“浮动”到右侧。

```
nav{text-align: right;}
nav li{display: inline-block; text-align: center;} 
```

如果您想要支持 Internet Explorer 7，您应该添加`zoom: 1`和`*display: inline`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:58:22.873

有什么理由不只是浮动`<ul>`？

```
ul {
  list-style-type: none;
  float: right;
}
li { float: left; } 
```

[http://jsfiddle.net/WPgHW/](http://jsfiddle.net/WPgHW/)

# parallel-processing - 推荐并行化多通道算法的方法

> ID：15855822
> 
> 赞同：0
> 
> 时间：2013-04-06T20:43:34.457
> 
> 标签：parallel-processing, go, multipass

我正在为自定义视频格式 ( [QTC](http://d00m.org/~someone/qtc/) ) 编写解码器和编码器。解码过程由多个阶段组成，每个阶段的输出被传递到下一个阶段：

1.  反序列化输入流
2.  使用范围编码器生成符号序列
3.  从符号流生成图像流
4.  将图像流序列化为输出格式

第三步和第四步几乎占据了所有的处理时间，第三步大约占 35%，第四步大约占 60%，第一步和最后一步相当琐碎。

并行运行四个步骤的推荐和理想方式是什么？我最感兴趣的是如何处理部件之间的通信。我计划在第二步和第三步使用一个 Goroutine，这些例程通过缓冲通道连接。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T20:51:19.147

[对于某些具有通过仔细使用互斥锁](http://golang.org/pkg/sync/#Mutex)来“保护”的“共享”数据结构的任务来说更容易，但是缓冲通道将是在 Go 中执行此操作的“标准”方式，对于您的任务来说，这听起来也是正确的解决方案。

既然您在这里问，您是否遇到任何问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T02:45:45.867

别想太多。只写一些代码。Go 代码很容易更改 - 编译器握着你的手。编写一些测试/基准以保持诚实。

亚历克斯

# c++ - C++ 简单加密

> ID：15855825
> 
> 赞同：2
> 
> 时间：2013-04-06T20:43:57.620
> 
> 标签：c++, encryption, character

我阅读了 Bjarne Stroustrup 的《The C++ Programming Language》一书，他的一个练习是进行简单的加密。我输入一些东西，用 std::cin 阅读并加密它+将加密的文本打印到屏幕上。我就是这样做的：

在我的*int main()*中：

```
std::string read;
std::cin >> read;

encript(read); 
```

我的功能（只是一部分）：

```
void encript(const std::string& r){

std::string new_r;
for(int i = 0; i <= r.length(); i++)
{
    switch(r[i])
    {
        case 'a':
            new_r += "a_";
            break;
        case 'b':
            new_r += "b_";
            break;
        case 'c':
            new_r += "c_";
            break;
        case 'd':
            new_r += "d_";
            break;
... //goes on this way 
    }
}

std::cout << new_r << std::endl; 
```

我现在的问题是我真的必须写下每一个字符吗？我的意思是这些只是非大写字符。还有特殊字符、数字等。

还有另一种方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T20:47:00.413

当然还有另一种方式：

```
new_r += std::string(1,r[i]) + "_"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T20:51:23.333

如果你使用 range-for，它会更干净：

```
std::string new_r;
for (char c : r) {
    new_r += c;
    new_r += '_';
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-06T20:52:11.430

这将是相同的：

```
void encript(const std::string& r){

std::string new_r;
for(int i = 0; i < r.length(); i++) // change this too
{
    new_r += r[i];
    new_r += "_";
}

std::cout << new_r << std::endl; 
```

**但**您也可以只使用**STL**。不必使用 C++11：

```
string sentence = "Something in the way she moves...";
istringstream iss(sentence);
ostringstream oss;

copy(istream_iterator<char>(iss),
     istream_iterator<char>(),
     ostream_iterator<char> (oss,"_"));

cout<<oss.str(); 
```

> 输出：
> 
> 东西在她移动的方式_。_。_。_

# html - style="display:none" 的 CSS 替代品

> ID：15855826
> 
> 赞同：27
> 
> 时间：2013-04-06T20:44:04.657
> 
> 标签：html, css, richfaces

我正在实现一个 JSF 组件库，您必须在其中覆盖正在使用的 css，否则它将使用其默认 css。我试图隐藏`div`并且我试图设置`rich-panelbar-header-act class style="display:none"`，但随后它会拉入其默认 css。有没有办法添加一个`rich-panelbar-header-act`隐藏的样式属性（因为我必须实现类）`div`？我在下面包含了我的 css 和 html

**CSS：**

```
element.style {
}
Matched CSS Rules
.rich-panelbar-header-act {
background-image: url(/spot-main-web/a4j/g/3_3_3.Finalorg.richfaces.renderkit.html.GradientA/DATB/eAGLj48PDQ1lBAAJswIe.html);
background-position: top left;
background-repeat: repeat-x;
vertical-align: middle;
color: #FFF;
background-color: #555;
font-size: 11px;
font-weight: bold;
font-family: Arial,Verdana,sans-serif;
}
.rich-panelbar-header-act {
border: 0 solid red;
padding: 0 1px 1px 5px;
cursor: pointer;
}
user agent stylesheetdiv {
display: block;
}
Inherited from body.browserChrome.browserChrome2
body {
font: 12px/17px Helvetica, Arial, Verdana;
} 
```

**HTML：**

```
<html version="XHTML 2.0" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head></head>
<body>
<div class="rich-panelbar rich-panelbar-b " id="j_id95" style="padding: 0px; height: 400px; width: 500px; none">
<div class="rich-panelbar rich-panelbar-interior " id="j_id96" style="none"><div class="rich-panelbar-header " style=";">Leverage the whole set of JSF benefits while working with AJAX</div><div class="rich-panelbar-header-act " style=";;;;display: none;">Leverage the whole set of JSF benefits while working with AJAX</div><div class="rich-panelbar-content-exterior" style="display: none; width: 100%;"><table cellpadding="0" cellspacing="0" style="height: 100%;" width="100%"><tbody><tr><td class="rich-panelbar-content " style=";">

Ajax4jsf is fully integrated into the JSF lifecycle. While other frameworks only

give you access to the managed bean facility, Ajax4jsf advantages the action and value

change listeners as well as invokes server-side validators and converters during the

AJAX request-response cycle.</td></tr></tbody></table></div></div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-04-06T20:48:25.073

```
width: 0; height: 0; 
```

或者

```
visibility: hidden; 
```

或者

```
opacity: 0; 
```

或者

```
position: absolute; top: -9999px; left: -9999px; 
```

要不就

```
display: none !important; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T20:48:12.907

我想`visibility:hidden;`会帮助你。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-28T10:27:45.393

这对我有用..

`!important`不能在 amp 版本中使用，所以不要`display:none;`使用这个：

```
position: absolute; top: -9999px; left: -9999px; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T20:48:28.400

使用 !important 阻止它被覆盖 -

```
.rich-panelbar-header-act {
    display:none !important;
} 
```

您也可以使用 JavaScript 作为备份 -

```
function hidediv() {
if (document.getElementById) { // DOM3 = IE5, NS6
document.getElementById('DIVIDNAME').style.display = 'none';
}else {
if (document.layers) { // Netscape 4
document.DIVIDNAME.display = 'hidden';
}else { // IE 4
document.all.DIVIDNAME.style.display = 'none';
}}}
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-10T15:13:42.953

这个问题已经得到解答，尽管我看到最初的答案有几个缺陷......虽然他们将元素视觉上从屏幕上移开，但网络可访问性指南建议不要使用其中的几个。

提供一个更简单、更好的答案`visibilty: hidden;`将是一种选择，但如果您需要该元素所在的空间，那`display: none !important;`将是您的最佳选择。该标记`!important`应该覆盖作用于它的其他 CSS 元素`<div>`。

如上所述，`position: absolute; top: -9999px; left: -9999px;`根据 Web 可访问性指南，简单地将元素视觉上移出页面（例如 ）不被视为最佳实践，因为*大多数*电子阅读器仍会阅读元素中的任何文本，并且键盘用户可能会导航到该元素，即使它位于“屏幕外”。

`display: none !important`如果我有其他 CSS 类作用于我需要隐藏的元素，我通常会使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-24T14:34:22.763

# 我想这会帮助你

您可以通过 2 种方式执行此操作：

## 使用更多属性

你可以简单地使用这个：[编辑：添加 !important 到属性]

```
visibility: hidden!important;position: absolute!important; top: -9999px!important; left: -9999px !important;opacity: 0 !important;width: 0 !important; height: 0!important; 
```

我认为它会起作用。它使用了所有可以在 CSS 中使用的属性。

## 使用 !important 元素

```
display:none!important 
```

# django - 如何在传递给包含模板的参数中应用变量和过滤器？

> ID：15855828
> 
> 赞同：2
> 
> 时间：2013-04-06T20:44:25.260
> 
> 标签：django, django-templates

我有类似的 html 片段，我想将其制作为单独的模板，包括：

```
...
<div class='item'>
  <div class='header'>It's a header 1</div>
  <div class='text'>It's a text for paragraph 1.</div>
</div>

<div class='item'>
  <div class='header'>It's a header 2</div>
  <div class='text'>You have {{points}} point{{points|pluralize}}</div>
</div>
... 
```

我制作了一个包含模板**item.html**：

```
<div class='item'>
  <div class='header'>{{header}}</div>
  <div class='text'>{{text}}</div>
</div> 
```

并将第一个片段替换为：

```
{% include "item.html" with title="It's a header 1" text="It's a text for paragraph 1." %}
{% include "item.html" with title="It's a header 2" text="You have {{points}} point{{points|pluralize}}" %} 
```

在我们使用“points”上下文变量的情况下如何应用过滤器“pluralize”以及如何应用变量“points”的值？

现在我们有了`You have {{points}} point{{points|pluralize}}`输出。

我可以在**没有**自定义模板标签/过滤器的情况下做到这一点吗？

**更新**。

它可以是另一种方便的“DRY”方案（可能不包括模板）。

**决议**。

感谢 karthikr 的建议。我已经创建了下一个标签（解决）。它解析变量的内容：

```
from django import template
from django.utils.safestring import mark_safe
from django.utils.html import escape

register = template.Library()
@register.tag( name="resolve" )

def do_resolve( parser, token ):
    nodelist = parser.parse(('endresolve',))

    parser.delete_first_token()

    return ResolveNode( nodelist )

class ResolveNode( template.Node ):
    def __init__( self, nodelist ):
        self.nodelist = nodelist

    def render( self, context ):
        output = self.nodelist.render( context ) # applye children here     
        output = template.Template( output ).render( context )
        return output 
```

因此，我们可以使用标签更改我们的**item.html**：

```
<div class='item'>
  <div class='header'>{{header}}</div>
  <div class='text'>{% resolve %}{{text}}{% endresolve %}</div>
</div> 
```

现在，如果我们作为带有参数的字符串传递，它会正常处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:24:30.520

这是一个想法：

在模板标签中，您可以解析文本`{{}}`并解析上下文。

这可以让您了解渲染[模板标签节点](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-the-renderer)

# java - 如何在 struts2 中映射长 REST url - 使用 struts2 rest 插件

> ID：15855831
> 
> 赞同：5
> 
> 时间：2013-04-06T20:44:50.027
> 
> 标签：java, rest, jakarta-ee, struts2, friendly-url

过去几天我一直在学习使用 struts2 rest 插件。但是我没有找到如何映射长休息 URL。

例如，如果我想映射如下 URL：

```
/profiles/user-test/orders/64/item/4 
```

在哪里

```
username is user-test
order id is 64
item id is 4 
```

我怎样才能将这样的东西映射到 struts2 动作？

我在互联网上发现的只是一个正在编辑/显示的单个级别等。但是如果我想在多个级别上显示一些东西 - 那么如何进行？请指导。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T09:19:37.783

您可以使用 来做到这一点[`Advanced Wildcard Mappings`](https://stackoverflow.com/a/20097360/1654265)，而无需 REST 插件：

> `/profiles/user-test/orders/64/item/4`
> 
> 用户名是用户测试
> 
> 订单编号为 64
> 
> 项目 ID 为 4

此示例所需的操作配置为：

```
<action name="/profiles/{username}/orders/{order}/item/{item}" class="fooBarAction">
    <result>fooBar.jsp</result>
</action> 
```

# python - Python：是否有更改实例类的用例？

> ID：15855836
> 
> 赞同：5
> 
> 时间：2013-04-06T20:45:22.447
> 
> 标签：python, object

相关：[Python对象转换](https://stackoverflow.com/questions/2153295/python-object-conversion)

我最近了解到 Python 允许您像这样更改实例的类：

```
class Robe:
    pass

class Dress:
    pass

r = Robe()
r.__class__ = Dress 
```

我试图弄清楚是否存在这样的“变形”对象有用的情况。我在 IDLE 中搞砸了这个，我注意到的一件事是分配不同的类不会调用新类的`__init__`方法，尽管如果需要可以显式地完成。

几乎我能想到的每个用例都可以通过组合得到更好的服务，但我是一个编码新手，所以我知道什么。;)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T21:12:38.050

很少有充分的理由对不相关的类执行此操作，例如`Robe`您`Dress`的示例。没有一点工作，很难确保你最终得到的对象处于理智状态。

但是，如果您想使用非标准工厂函数或构造函数来构建基对象，则在从基类继承时会很有用。这是一个例子：

```
class Base(object):
    pass

def base_factory():
    return Base()  # in real code, this would probably be something opaque

def Derived(Base):
    def __new__(cls):
        self = base_factory()     # get an instance of Base
        self.__class__ = Derived  # and turn it into an instance of Derived
        return self 
```

在这个例子中，派生类的`__new__`方法想要使用`base_factory`返回`Base`类实例的方法来构造它的对象。通常这种工厂位于某个库中，您无法确定它是如何制作对象的（您不能只调用`Base()`或`super(Derived, cls).__new__(cls)`自己获得相同的结果）。

实例的`__class__`属性被重写，因此调用的结果`Derived.__new__`将是`Derived`该类的一个实例，这确保了它将具有`Derived.__init__`调用它的方法（如果存在这样的方法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T21:31:07.737

我记得很久以前使用这种技术在识别现有对象持有什么样的数据后“升级”现有对象。它是实验性 XMPP 客户端的一部分。XMPP 使用许多简短的 XML 消息（“节”）进行通信。

当应用程序收到一个节时，它被解析成一个 DOM 树。然后应用程序需要识别它是什么类型的节（存在节、消息、自动查询等）。例如，如果它被识别为消息节，则 DOM 对象被“升级”为提供“get_author”、“get_body”等方法的子类。

我当然可以创建一个新类来表示已解析的消息，创建该类的新对象并从原始 XML DOM 对象复制相关数据。不过，就地更改对象的类有两个好处。首先，XMPP 是一个非常可扩展的标准，如果代码的其他部分在那里或调试时发现有用的东西，仍然可以轻松访问原始 DOM 对象是很有用的。其次，分析代码告诉我，创建一个新对象并显式复制数据比仅重用无论如何都会很快销毁的对象要慢得多——这种差异在 XMPP 中已经足够重要了，它使用许多短消息。

我认为这些原因中的任何一个都不能证明在生产代码中使用这种技术是合理的，除非你真的需要 CPython 中的（不是那么大的）加速。这只是一个 hack，我发现它有助于在实验应用程序中使代码更短、更快。还要注意，这种技术很容易破坏非 CPython 实现中的 JIT 引擎，使代码变得更慢！

# jquery - 带有引导程序和/或 jquery 的响应式缩略图？（动态调整大小？）

> ID：15855838
> 
> 赞同：0
> 
> 时间：2013-04-06T20:45:28.100
> 
> 标签：jquery, twitter-bootstrap, responsive-design, thumbnails, image-resizing

我以为我以前解决过这个问题，但我想没有。

在我的例子中：http: [//jsfiddle.net/VDtgT/31/](http://jsfiddle.net/VDtgT/31/)

我会认为在跨度 div 中调用的图像会受到 div 的最大高度和最小高度设置的约束/调整大小？

我基本上打算有一行带有单个图像的数据库输出，但它需要根据窗口的大小缩放该图像。

HTML：

```
<div id="wrap">

<!-- *** TOP ROW -->
<div class="row-fluid show-grid">
<div class="span12" style="background-color: yellow;" align="center">HEADER ROW</div>
</div> 

<!-- *** MIDDLE ROW --->
<div class="row-fluid">

    <div class="span4 boxitup">
    <a href="#"> <img src="http://placehold.it/150x150" alt="img1"></a> 
    </div>
<div class="span4 boxitup">Column 2</div>
<div class="span4 boxitup">Column 3</div>
</div>    

    </div> <!-- /close wrap --> 

<div id="push"></div>

<!-- FOOTER BEGIN --> 

<div id="footer">

<div class="row-fluid">
<div class="span12" style="background-color: yellow;" align="center">
    Footer row
</div>
</div>
    </div> 
```

的JavaScript：

```
$( document ).ready( function(){
setMaxHeight();
$( window ).bind( "resize", setMaxHeight );  

function setMaxHeight() {
$( ".boxitup" ).css( "min-height", ($(window).height() / 7) + "px" );   
$( ".boxitup" ).css( "max-height", ($(window).height() / 7) + "px" );   
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:58:24.303

如果您只想让图像填充其封闭框，只需将以下内容添加到您的 css 中：

```
img {
      height:100%;
} 
```

您可以[在我的 jsFiddle 分支中](http://jsfiddle.net/amullins/cPLXH/1/)查看结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:58:59.347

您设置的最大和最小高度相同，当我打开演示时是 42px。

为了看不到大于容器的内容，您需要设置 css `overflow:hidden`。

你所看到的只是溢出。不完全清楚为什么要定位行而不是图像，或者为什么将最大和最小高度设置为相同

# python - time.sleep - TypeError：需要浮点数

> ID：15855841
> 
> 赞同：-6
> 
> 时间：2013-04-06T20:46:01.543
> 
> 标签：python

```
time.sleep('2')
TypeError: a float is required 
```

我该如何解决？我不确定我应该在这里做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T20:46:30.700

您正在传递一个字符串（一个字符`"2"`）。传递一个数字：

```
time.sleep(2) 
```

# python - 你会使用什么 Python 标准库数据结构来存储稀疏矩阵？

> ID：15855844
> 
> 赞同：0
> 
> 时间：2013-04-06T20:46:46.090
> 
> 标签：python, matrix, spreadsheet

有问题的稀疏矩阵是一个电子表格，通常非常稀疏。但是，它们也可以完全填充，因此在这种情况下使用的数据结构不应该降级太严重。

为什么有标准库要求？好吧，因为我正在考虑一个在 Python 中处理电子表格的库，我希望它只基于 stdlib。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:50:02.637

字典列表怎么样：

```
sparse = [{"ID":0, "Value1":123, "Value999":0},
          {"ID":1, "Value123":999}, # etc.
         ] 
```

（您可能希望使用与 不同的键`Value_x`）

# bash - 从文件中提取每 n 行，包括 bash 中的空白行

> ID：15855846
> 
> 赞同：1
> 
> 时间：2013-04-06T20:46:57.087
> 
> 标签：bash, sed, awk, cat

我正在使用 bash 从文件中提取行，如下所示：

```
for line in $(sed -n 3~6p  file)
do
    echo $line
done 
```

但是，我现在有些行是空的/空白的，并且这些行没有打印，因此在表单上给了我一个输出：

```
line3
line9
line21
line27 
```

我也希望打印空行，以便获得：

```
line3
line9

line21
line27 
```

关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T20:49:00.837

使用`read`命令逐行读取输入：

```
sed -n 3~6p file | \
while read line
do
    echo "$line"
done 
```

除了忽略空行之外，使用进程替换读取文件还有其他问题：它将所有`sed`输出读入内存，忽略所有尾随空格，并按空格*分割*每一行。最后一个意味着如果您的其中一行包含 string `a b c`，它将被打印为三个单独的行。`while read line`成语解决了所有这些问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T20:48:53.503

您一直有解决方案，只需删除`bash`for 循环：

```
$ sed -n 3~6p  file

line9
line15 
```

该`sed`脚本从第 3 行开始每隔 6 行打印一次。如果您告诉我们您想要做什么，Bash 不是文本处理的最佳工具，也许`sed`可以处理整个工作，如果不是`awk`肯定可以。

# r - 添加到具有不同长度元素的ggplot

> ID：15855850
> 
> 赞同：3
> 
> 时间：2013-04-06T20:47:11.587
> 
> 标签：r, ggplot2

我是 ggplot2 的新手，我正试图弄清楚如何在我创建的现有绘图中添加一条线。`T1`原始图是数据框中一列数据的累积分布，其中`x`包含大约 100,000 个元素。我已经使用 ggplot2 和`stat_ecdf()`我在下面发布的代码成功地绘制了这个。现在我想使用一组 (x,y) 坐标添加另一条线，但是当我尝试使用时，`geom_line()`我收到错误消息：

```
Error in data.frame(x = c(0, 7.85398574631245e-07, 3.14159923334398e-06,  : 
arguments imply differing number of rows: 1001, 100000 
```

这是我尝试使用的代码：

```
> set.seed(42)
> x <- data.frame(T1=rchisq(100000,1))
> ps <- seq(0,1,.001)
> ts <- .5*qchisq(ps,1) #50:50 mixture of chi-square (df=1) and 0
> p <- ggplot(x,aes(T1)) + stat_ecdf() + geom_line(aes(ts,ps)) 
```

这就是从上面产生错误的原因。现在这是使用我曾经使用但我现在正试图摆脱的基本图形的代码：

```
plot(ecdf(x$T1),xlab="T1",ylab="Cum. Prob.",xlim=c(0,4),ylim=c(0,1),main="Empirical vs. Theoretical Distribution of T1")
lines(ts,ps) 
```

我看过其他一些关于一般添加线的帖子，但我没有看到的是当两个原始向量的长度不同时如何添加线。（注意：我不想只使用 100,000 (x,y) 坐标。）

作为奖励，有没有一种简单的方法，类似于 using `abline`，在 ggplot2 图表上添加一条下降线？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:08:31.097

`ggplot`处理`data.frames`，您需要在调用中`ts`指定`ps`此`data.frame`额外内容：`data.frame``geom_line`

```
 set.seed(42)
 x <- data.frame(T1=rchisq(100000,1))
 ps <- seq(0,1,.001)
 ts <- .5*qchisq(ps,1) #50:50 mixture of chi-square (df=1) and 0
 tpdf <- data.frame(ts=ts,ps=ps)
 p <- ggplot(x,aes(T1)) + stat_ecdf() + geom_line(data=tpdf, aes(ts,ps)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/Li7a9.png)

# ruby - 如何计算文件的特定部分之间有多少行？

> ID：15855852
> 
> 赞同：1
> 
> 时间：2013-04-06T20:47:59.143
> 
> 标签：ruby, file, parsing, cucumber

所以，我试图解析一个 Cucumber 文件（*.feature），以确定每个场景有多少行。

文件示例：

* * *

```
 Scenario: Add two numbers 
       Given I have entered 50 into the calculator
       And I have entered 70 into the calculator
       When I press add
       Then the result should be 120 on the screen

    Scenario: Add many numbers
       Given I have entered 50 into the calculator
       And I have entered 20 into the calculator
       And I have entered 20 into the calculator
       And I have entered 30 into the calculator
       When I press add
       Then the result should be 120 on the screen 
```

* * *

所以，我期待解析这个文件并得到如下结果：

场景：添加两个数字 ---> 它有 4 行！

场景：添加许多数字 ---> 它有 6 行！

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:51:13.587

你为什么不从简单的开始？就像@FeRtoll 建议的那样，逐行进行可能是最简单的解决方案。像以下这样简单的东西可能就是您正在寻找的东西：

```
scenario  = nil
scenarios = Hash.new{ |h,k| h[k] = 0 }

File.open("file_or_argv[0]_or_whatever.features").each do |line|
  next if line.strip.empty?

  if line[/^Scenario/]
    scenario = line
  else
    scenarios[scenario] += 1
  end
end

p scenarios 
```

输出 ：

```
{"Scenario: Add two numbers \n"=>4, "Scenario: Add many numbers\n"=>6} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T21:59:43.737

[`Enumerable#slice_before`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-slice_before)几乎是为此量身定做的。

```
File.open('your cuke scenario') do |f|
  f.slice_before(/^\s*Scenario:/) do |scenario|
    title = scenario.shift.chomp
    ct = scenario.map(&:strip).reject(&:empty?).size
    puts "#{title} --> has #{ct} lines"
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T21:48:39.997

FeRtoll 提出了一个很好的方法：按部分累积。为我解析它的最简单方法是清除我可以忽略的部分（即评论），然后分成几个部分：

```
file = ARGV[0] or raise "Please supply a file name to parse"

def preprocess file
  data = File.read(file)
  data.gsub! /#.+$/, ''    # strip (ignore) comments
  data.gsub! /@.+$/, ''    # strip (ignore) tags
  data.gsub! /[ \t]+$/, '' # trim trailing whitespace
  data.gsub! /^[ \t]+/, '' # trim leading whitespace
  data.split /\n\n+/       # multiple blanks separate sections
end

sections = {
  :scenarios    => [],
  :background   => nil,
  :feature      => nil,
  :examples     => nil
}

parts = preprocess file

parts.each do |part|
  first_line, *lines = part.split /\n/

  if first_line.include? "Scenario:"
    sections[:scenarios] << {
      :name  => first_line.strip,
      :lines => lines
    }
  end

  if first_line.include? "Feature:"
    sections[:feature] = {
      :name  => first_line.strip,
      :lines => lines
    }
  end

  if first_line.include? "Background:"
    sections[:background] = {
      :name  => first_line.strip,
      :lines => lines
    }
  end
  if first_line.include? "Examples:"
    sections[:examples] = {
      :name  => first_line.strip,
      :lines => lines
    }
  end
end

if sections[:feature]
  puts "Feature has #{sections[:feature][:lines].size} lines."
end

if sections[:background]
  puts "Background has #{sections[:background][:lines].size} steps."
end

puts "There are #{sections[:scenarios].size} scenarios:"
sections[:scenarios].each do |scenario|
  puts "  #{scenario[:name]} has #{scenario[:lines].size} steps"
end

if sections[:examples]
  puts "Examples has #{sections[:examples][:lines].size} lines."
end 
```

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T00:35:09.620

这是我正在处理的当前代码（基于 Kyle Burton 方法）：

```
def get_scenarios_info
    @scenarios_info = [:scenario_name => "", :quantity_of_steps => []]
    @all_files.each do |file|
        line_counter = 0
        File.open(file).each_line do |line|
            line.chomp!
            next if line.empty?
            line_counter = line_counter + 1
            if line.include? "Scenario:"
                @scenarios_info << {:scenario_name => line, :scenario_line => line_counter, :feature_file => file, :quantity_of_steps => []}
                next
            end
            @scenarios_info.last[:quantity_of_steps] << line
        end
    end
    #TODO: fix me here!
    @scenarios_info.each do |scenario|
        if scenario[:scenario_name] == ""
            @scenarios_info.delete(scenario)
        end
        scenario[:quantity_of_steps] = scenario[:quantity_of_steps].size
    end
    puts @scenarios_info
end 
```

# java - NetBeans 给出错误说项目在从未打开时被删除

> ID：15855854
> 
> 赞同：0
> 
> 时间：2013-04-06T20:48:00.860
> 
> 标签：java, maven, netbeans

我刚刚从 GitHub 存储库克隆了一个项目，然后尝试使用“从现有源导入项目”选项在 NetBeans 中打开该项目，但我被一个错误阻止，告诉我一个项目已经在管理该文件夹.

[可以在这里看到错误http://puu.sh/2v8ED](http://puu.sh/2v8ED)

```
Project folder is managed by a project Craftys.
Instead of creating a new project just open it. If by a chance you just deleted the project Craftys than restart the IDE to reuse the folder. 
```

我的项目列表中没有一个项目`Craftys`，也没有。

该项目使用 Maven，与`Craftys2`（文件夹名称）相反的“Craftys”一词似乎来自 pom.xml。

当我从基本目录中删除 pom.xml 时，项目会打开，但是我无法创建 pom.xml，因此所有依赖项的用法都会出错。

所以，我的问题是，**我将如何导入这个现有项目，同时仍然允许它使用 maven？**我四处搜寻，没有发现任何其他有同样问题的人，我对我应该做什么感到困惑。

[这是我遇到相同问题的类似项目的链接。](https://github.com/prism/Prism)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:56:15.150

忘记“从现有来源导入项目”。这些已经是 Netbeans（已启用）项目，只需按照明确说明的错误消息打开它们（文件->打开，然后浏览到项目位置）。

![Netbeans - 打开对话框](https://i.stack.imgur.com/RINjZ.png)

# c++ - 怪异：指针地址不变，但内容减 1

> ID：15855857
> 
> 赞同：0
> 
> 时间：2013-04-06T20:48:22.630
> 
> 标签：c++, char, shared-memory, memory-address

我正在交叉发布这个，因为它可能是一个 Pd 问题，但也许这里有人知道为什么会发生这样的事情。

简而言之，我有一个 dll，我在名为 Pd（puredata，用于计算机音乐）的程序中使用它。我创建了一个名为 recordString 的对象，我将它与基本的 Pd API 结合使用来创建 pd 将读取的 dll。所有 Pd 需要访问的是一些简单的功能。我已经将使用 Pd API 的代码作为 recordString 的一部分。

无论如何，recordString 对象包含一个我正在使用 new 创建的 char*（我也尝试过 malloc）。当我设置 char* 的值时，它正确设置为 HELLOWORLD。我正在输出地址以确保它保持在应有的位置。

我已经确认该值是应有的，但后来当我调用一个函数来获取 char* 的值时，它以某种方式移动了 1 个字节。

有没有人听说过指针将地址更改为 1 的情况？不被告知？

无论如何，这是输出，然后是 datarecord.cpp 的代码

```
字符串：HELLOWORLD
长度：10
地址：32774028
地址 2：32578488

调用 postString
字符串：ELLOWORLD
长度：9
地址：32774028
地址 2：32578489

```

```
#include "m_pd.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "datarecord.h"

using namespace std;

recordString::recordString()
    :name(NULL)
{
};

recordString::recordString(const char* sourceString)
{
    this->name = new char[strlen(sourceString)+1];

    post("-------- in string constructor -----------");
    post("address: %d", &this->name);
    strcpy(this->name, sourceString );
    post("copy: %s", this->name);
};

recordString::~recordString()
{
    //delete(this->name);
    delete[] name;
    name = NULL;

    //free(this->name);
};

recordString::recordString(const recordString & rhs)
{
    post("-------- in copy constructor -----------");
    post("source: %s", rhs.name);
    post("length: %d", strlen(rhs.name));
    post("\n");

    this->name = new char[strlen(rhs.name)+1];

    strcpy(this->name, rhs.name);

    post("copy: %s", this->name);
    post("length: %d", strlen(this->name));
    post("address: %d", &name);
    post("address-2: %d", name);
    post("\n");
}

recordString & recordString::operator=(const recordString &rhs)
{
    post("-------- in operator= -----------");
    post("source: %s", rhs.name);
    post("length: %d", strlen(rhs.name));
    post("\n");

    if(name!=NULL)
    {
        delete[] name;
    }

 //this->name = (char*) malloc((strlen(rhs.name))); 
    this->name = new char[strlen(rhs.name)+1];

    strcpy(this->name, rhs.name);

    post("copy: %s", this->name);
    post("length: %d", strlen(this->name));
    post("address: %d", &name);
    post("address-2: %d", name);
    post("\n");
}

int recordString::setString(const char * sourceString)
{

    post("-------- in setString -----------");
    post("source: %s", sourceString);
    post("length: %d", strlen(sourceString));
    post("\n");

    this->name = new char[strlen(sourceString)];
    strcpy(this->name, sourceString);

    post("copy: %s", this->name);
    post("length: %d", strlen(this->name));
    post("address: %d", &name);
    post("address-2: %d", name);
    post("\n");

    return (this->name == NULL);
}

void recordString::postString()
{
    post("string: %s", this->name);
    post("length: %d", strlen(this->name));
    post("address: %d", &name);
    post("address-2: %d", name);
    post("\n");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T20:57:18.720

你的问题是你没有为你的字符串分配足够的内存

```
this->name = new char[strlen(sourceString) + 1]; 
```

C 样式字符串具有的`+ 1`nul 终止符需要 。

其他错误是：

使用`delete`not `delete[]`(`new[]`应该与`delete[]`) 配对。

您的默认构造函数`name`未初始化。

您的赋值运算符会泄漏内存，因为它从不释放旧字符串。`setString`是一样的。

当您输出您想要的地址时，您要打印的是对象内部的地址，而不是指向的`post("address: %d", name)`地址。`post("address: %d", &this->name)``name``name`

我必须同意 Cameron 的观点，`std::string`它将把你从所有这些复杂性中解救出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T23:51:29.303

和几个人聊了聊，词对齐和结构填充的话题就上来了。该结构的原始代码是

```
typedef struct _something {
    t_object x_obj; // *this 
    recordString r;
} t_something 
```

由于某种原因， r->name 指向的指针的值与 4 字节边界对齐。不知道为什么，但显然与结构填充有关。做了一些测试来确认这一点，它确实与 4 字节边界对齐。

我从结构中删除了 recordString r，并将其放在全局上下文中，它不再受这种对齐方式的影响。

对我来说奇怪的是，它发生在调用之间，在不同的范围内，在不同的时间，在运行时。我对编译器或打包/填充结构不太了解，但在运行时发生类似的事情似乎很危险。

无论如何，现在似乎通​​过从结构中删除对象来修复。

谢谢！我将把它打开一段时间，以防有人在运行时添加关于对齐的细节。

# visual-studio-2012 - xaml 设计不起作用

> ID：15855863
> 
> 赞同：0
> 
> 时间：2013-04-06T20:48:36.247
> 
> 标签：visual-studio-2012, winrt-xaml, xaml-designer

我在 xaml 设计器中看不到任何控件，我可以单击它们并转到后面的代码但看不到，我重新安装 VS 2012 但没有运气，即使我创建新项目它也会这样做，而且这个也发生混合。我搜索了这么多这么多来解决这个问题，但没有运气，请帮帮我 PS：我在这里安装了 vs 2010 sp1，vs 2012 update 1 带有按钮的空白 Windows 商店应用程序的基本代码

```
<Page
x:Class="App6.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:App6"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d">

<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">

</Grid>
</Page> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:07:27.017

终于经过 5 天的搜索。我发现了问题，它来自我的显卡：我有 hp probook 4540s 笔记本电脑，它有 intel 和 amd 显卡，所以我自定义设置以提供完整的图形功能，所以我打开 Catalyst Control Center 并让 Power give我最大化性能（问题从这里开始）我将其更改为优化性能，一切都恢复正常（OMG）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:59:43.817

这是一个猜测，但您通常必须为网格提供某种行或列定义。这是一个定义两行的网格：

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Button Content="hello world"></Button>
</Grid> 
```

以上对我有用，但以下不起作用：

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Button Content="hello world"></Button>
</Grid> 
```

# java - 将对象从 JDialog 传回根框架

> ID：15855864
> 
> 赞同：1
> 
> 时间：2013-04-06T20:48:49.497
> 
> 标签：java, swing, constructor, jframe, jdialog

假设我们有一个 JFrame `frame`，它包含两个 JPanel`buttonPanel`和`dataPanel`，并且在这个面板中只有一个 JButton `button`。单击时，会在其自己的窗口中`button`创建并显示一个 JDialog （与往常一样）。`dialog`使用几个 JTextField 和一个提交按钮，JDialog`dialog`创建一个`dataObject`封装这些输入数据的新对象。如果我们希望我们的`dataPanel`JPanel 在主应用程序`frame`中显示 this `dataObject`，应该如何`dataObject`适当地传递给驻留在外部 JFrame 中的 JPanel？

在写它的时候，这对我来说也是一个拗口，所以我将尝试澄清：

框架`frame`

*   JPanel `dataPanel`- 用于显示来自在 JDialog 中创建的对象的数据
*   JPanel `buttonPanel`- 包含一个打开 JDialog 的按钮，其中将输入一些信息，并使用所述信息`dataObject`构造我们的对象。

这里的目标是将这个`dataObject`（以及它的组成字段）传递`dataPanel`给要显示的。处理此问题的最合适方法是什么？我考虑将对象保持为`dataPanel`静态，然后从 JDialog 调用静态方法来添加新对象，但这似乎不是正确的做法。

一些指导？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:53:56.287

很大程度上取决于程序的结构，包括对话框的行为方式：

*   如果 JDialog 是*模态*的并且在按下提交按钮时消失，那么解决方案很简单——在它返回后从与对话框相关的类中提取数据，这将是显示对话框之后的代码行。对话框的提交 JButton 的侦听器可以简单地使对话框不再可见。
*   否则，如果 JDialog*是非模态*的并且在按下提交按钮时消失，那么您可能希望将一个侦听器附加到它的窗口，我相信一个 WindowListener，然后让您的调用代码在侦听器指示时提取信息对话框已关闭或正在关闭。
*   否则，如果 JDialog*是非模态*的，并且在按下提交按钮时不应该变得不可见，但您需要用新数据更新调用程序，那么我会让调用类将 PropertyChangeListener 添加到与对话框相关的类，以便与对话框相关的类可以通知任何已按下提交的侦听器。此代码将在对话框的提交 JButton 的侦听器中。
*   我会给与对话框相关的类一个`public DataObject getDataObject()`方法，一旦对话框返回，调用代码就可以调用该方法，从而允许显示对话框的类在需要时提取相关信息。
*   无论您做什么，都没有理由使用静态字段，也有很多理由不使用。我强烈建议你不要考虑这个。

例如返回的*模态*对话框：

```
// caveat: code has not been tested by compilation or running. 
JButton myButton = new JButton(new AbstractAction("Show Dialog Button") {
  public void actionPerformed(ActionEvent evt) {
    MyDialogPanel myDialogPanel = new MyDialogPanel();
    JDialog myDialog = new JDialog(myJFrame, "My Dialog", 
            ModalityType.APPLICATION_MODAL);
    myDialog.add(myDialogPanel);
    myDialog.pack();
    myDialog.setLocationRelativeTo(myJFrame);
    myDialog.setVisible(true);

    // dialog now returns and we can get the data
    // assuming that the wrapper object for your data 
    // is called "DataObject"
    DataObject dataObject = myDialogPanel.getDataObject();

    // and perhaps use it. Assume setDataObject is a method 
    // of the main GUI that displays the data object
    setDataObject(dataObject);
  }
}); 
```

# c - 为什么这会产生一个无限循环（C，While Loop）

> ID：15855868
> 
> 赞同：2
> 
> 时间：2013-04-06T20:49:27.553
> 
> 标签：c, loops, while-loop, infinite

我正在为我的班级做一个程序，我需要在开始之前将数组“十年”的所有值设置为 -1。我试过这个（以及for循环中的版本），它只是让我陷入无限循环！有人可以解释为什么会这样，我该如何解决？

代码：

```
int decade[9][9], i = 0, k = 0;
while (i<10) {
    while (k<10) {
        printf("i is %d, k is %d\n",i,k);
        decade[i][k] = -1;
        k++;
    }
    k=0;
    i++;
} 
```

提前致谢！

它打印出这个： ![打印出来的东西](https://i.stack.imgur.com/jKLKu.png)

**对于将来需要答案的任何人，请将十年声明为“十年[10][10]”而不是“十年[9][9]”，或者定义您的十年。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T20:55:46.877

当您声明一个大小数组时，`9`它的索引从`0`到`8`。你去`9`哪个会覆盖内存。这是*未定义的行为*，可能会导致任何数量的微妙但错误的行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T20:52:40.990

我不知道如何定义“十年” - 但如果定义不正确，和/或大小错误，您*可能*会导致缓冲区溢出，这*可能*导致错误的内存设置为“-1” - 即“我" 或 "k" 变量可能会被覆盖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T20:56:40.900

```
int decade[9][9], i = 0, k = 0;
while (i<10) {
    while (k<10) {
        printf("i is %d, k is %d\n",i,k);
        decade[i][k] = -1;
        k++;
    }
    k=0;
    i++;
} 
```

不正确，因为您从 0 迭代到 9（10 个元素）

这段代码是正确的：

```
int decade[9][9], i = 0, k = 0;
while (i<9) {
   k = 0;

   while (k<9) {
      printf("i is %d, k is %d\n",i,k);
      decade[i][k] = -1;
      k++;
   }

i++;
} 
```

请注意，您在再次循环*之前将 k 设置为零。*

还存在其他循环的可能性，例如`for`循环，您使用 while 循环实际上不是为了计数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T20:56:44.077

您的循环必须从 0 到 8（十进制数组的长度为 9）：

```
while (i<9) {
    while (k<9) {
       /* ... */
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T20:57:35.217

“9x9”中的尺寸 - 您正在初始化 10x10。将其设置为十年[10][10]，使用 (x<8) 或执行 (x<=9)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-06T21:02:40.853

```
Index out of bound exception for your code. Try this one instead.

   int dimSize = 10;
    int decade[dimSize][dimSize], i = 0, k = 0;
    while (i<dimSize) {
        while (k<dimSize) {
            printf("i is %d, k is %d\n",i,k);
            decade[i][k] = -1;
            k++;
        }
        k=0;
        i++;
    } 
```

# php - 如何使用 php 从图像数组中自动调整图像大小？

> ID：15855869
> 
> 赞同：0
> 
> 时间：2013-04-06T20:49:39.277
> 
> 标签：php, html

当我使用以下代码从目录中获取图像列表作为数组时，图像的自动调整大小存在问题：

```
<?php   
    if ($handle = opendir('directory_of_images')) {
        while (false !== ($pict = readdir($handle))) {
            if ($pict != "." && $pict != "..") {
                $thumbsp .= '<a href="#'.$pict.'"><image src="directory_of_images'.$pict.'" width="50" border="0" hspace="5" vspace="5" align="middle"></a>';       
                $thump .= '<p id="'.$pict.'" style="height:700px; margin-bottom:200px;"><br><img src="directory_of_images'.$pict.'" width="450px" align="top"></p>';
            }
        }
        closedir($handle);
    }
?> 
```

现在，我需要调整图像大小并保持纵横比。当图像宽度大于图像高度时，我想调整图像大小，反之亦然。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:57:12.127

您可以使用 php 函数 getimagesize($filename_of_img)。返回值的第 0 个和第 1 个数组元素是宽度和高度。然后您可以轻松比较宽度和高度

# php - jquery ajax php json返回不起作用

> ID：15855871
> 
> 赞同：0
> 
> 时间：2013-04-06T20:49:56.500
> 
> 标签：php, jquery, ajax

困惑...我有一个文件“api.php”，如下所示。这是在 jquery ajax 调用中调用的。当我从命令行运行它时，我得到一个看起来正确的响应（即不为空）。当我在 ajax 调用中运行它时，它似乎是空的。现在...当我注释掉“if($td < $lessthan)”和两个大括号时，它都可以正常工作（即，ajax 成功获得了正确的数据。

这是我的“api.php”函数：

```
 $basedir = "calls/";
    $now = time();

    $lessthan  = 20 * 60;
    $ret = array();
    $dir = opendir( $basedir );
    while(($currentFile = readdir($dir)) !== false)
    {
            if ( preg_match( '/(.*).txt/', $currentFile, $match) )
            {
                    $tt = @file_get_contents($basedir.$currentFile);
                    $td = ($now - @strtotime( $tt ));
                    if( $td < $lessthan )
                    {
                            $ret[] = $match[1];
                    }
            }
    }
    closedir($dir);

  echo json_encode(implode(',', $ret));
?> 
```

这是我的 jquery ajax 调用：

```
 $.ajax({                          
      url: 'api.php',                 
      data: "",                       
      dataType: "json",               
      type: "POST",                   
      success: function(data, textStatus, jqXHR)
      {                                     
            console.log(data + ':' + previous + '  ' + textStatus );
            if( data != null && data != previous && data != "" )
            {                                                               previous = data;                
                    $('#other').hide(); //Set output element html
                    $('#loaddiv').fadeOut('fast').load('reload.php?q='+data).fadeIn("fast"); //Set output element html
            }

            if( (data == null || data == "" ) && previous != null )                {                                       
                    //$('#loaddiv').fadeOut('fast').html('No Active Calls').fadeIn("fast"); //Set output element html
                    $('#loaddiv').fadeOut('fast'); //Set output element html
                    $('#other').show();             
                    $('#other').fadeOut('fast').load('default.php').fadeIn("fast");
                    previous = null;                
            }                               
      },                              
      error: function(m) { alert('error'); } 
    }); 
```

关于为什么在 api.php 中注释掉“if”语句使整个事情起作用的任何想法？或者更好的是，我怎样才能保留 if 语句并让它工作。

# android - android webview 中的 Dipaly 波斯语文本（适用于不支持波斯语的手机）

> ID：15855875
> 
> 赞同：4
> 
> 时间：2013-04-06T20:50:28.823
> 
> 标签：android, character-encoding, webview, internationalization, farsi

在波斯语中，字母连接在一起形成书写脚本。但是，当我使用“UTF-8”或“Windows-1256”编码保存 HTML 页面并尝试在 android 中使用 webview 显示它们时，字母会以从左到右的方向（而不是 RTL）单独显示。我应该注意到这种情况并没有发生在支持波斯语的手机中。

正确的形式应该是这样的（来自支持波斯语的手机的快照）：
![正确形式的样本](https://i.stack.imgur.com/j89OI.jpg)
在不支持波斯语（波斯语）的手机中会出现格式错误的文本：

![不良显示示例](https://i.stack.imgur.com/OMKWZ.jpg)

应该注意我在这两种情况下都使用了波斯字体。我还看到了一些针对 java 中普通字符串的解决方案，这些解决方案在这个 [问题中将字符更改为一个](https://stackoverflow.com/a/7962813/1080355)

**我的问题**：我可以解决这种情况（或者应该由电话供应商解决）？如果可能的话，解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:02:29.137

我在做键盘时经常遇到这个错误。问题是 Android 中内置的 canvas.drawText 函数不支持 RTL 语言。它有一个补丁，但它不是 Android 默认构建的一部分。因此，只有面向世界上那些使用它的地区的模特才会拥有它。不幸的是，我没有办法测试它是否有补丁。如果没有，就没有办法修复它。您可以尝试反转文本，但随后您会破坏确实有补丁的设备。

长话短说 - 没有办法解决它。但是，如果谷歌现在还没有在主线中找到补丁（它早在 2.2 天就已经存在），我会感到震惊，因此它影响了手机数量的减少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T13:06:39.370

您可以尝试使用反向字体序列制作 html！只需编写一个 Windows 应用程序来获取字体并提供反向字体，然后在您的 android 设备中使用它

# c++ - 将 MPI 结果写入文件

> ID：15855877
> 
> 赞同：0
> 
> 时间：2013-04-06T20:50:36.440
> 
> 标签：c++, mpi

我有一些代码可以解决所有的最短路径问题，每个处理器都有一个结果。我正在尝试编写此结果，它是输出文件的矩阵。因此，每个具有部分解决方案的进程都会将结果写入正确位置的输出文件。现在我正在尝试为此使用 fseek 但由于整数大小不同而有点卡住了。像 2 和 -199 将不得不占用更多空间。我该怎么做才能使处理器不会相互覆盖？写作也可能存在竞争条件。

我应该以另一种方式这样做还是有办法做到这一点？我正在考虑将所有结果发送到一个进程（等级 0）并让它创建数组并写入文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:28:31.253

不要使用 ASCII 输出；使用二进制，它的大小定义明确。

因此，如果您使用 fstream 和双打：

```
fstream filewriter("file.bin",ios::out | ios::binary);

vector<double> mylist;
mylist.push_back(2.5);
mylist.push_back(7.6);
mylist.push_back(2.1);
mylist.push_back(3.2);
mylist.push_back(4.2);

filewriter.write((char*)&mylist[0],mylist.size()*sizeof(double)); 
```

这将准确写入 40 个字节，即双 (8) 倍的列表大小（5 个元素）。并且使用 fseek 将非常容易。

在具有大量输出的科学环境中，强烈建议使用二进制数据。然而：

1-您必须了解字节序（大字节序，小字节序）的概念。2- 您必须适当地记录您的工作以供重复使用（目的、大小、元素数量、维度）。当我忘记记录东西时，我面临着巨大的误解（我是一名为模拟编程的物理学博士）。

所以用于数据分析的 ASCII 不是正确的选择。

幸运的是，有一个专门为您组织内容的完整库，称为 HDF5。它为您组织字节顺序和可移植性；但是，处理它并不容易，而且学习曲线陡峭。我认为这对于以后的时间来说是一个更难的故事。

我建议您学习如何处理二进制文件以及如何阅读它们，了解它们的问题和问题。我认为您足够专业，可以处理二进制文件，因为您使用 MPI。

这是二进制文件的快速教程：

[http://courses.cs.vt.edu/cs2604/fall02/binio.html](http://courses.cs.vt.edu/cs2604/fall02/binio.html)

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T21:21:33.073

您可以让每个进程以某种格式写入输出，这些格式可以在最后一个进程完成后合并和清理。像 (x, y, z), (x, y, z)...其中 x 是行的索引，y 是列，z 是值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:59:30.633

这对于内存映射文件来说是一项很好的工作。它们依赖于系统，但它们在 POSIX 和 Windows 操作系统系列中都实现了，所以如果你使用现代操作系统，它们就可以工作。在 boost 中有一个可移植且 C++ 友好的实现（类 mapped_file_source、mapped_file_sink 和 mapped_file）。进程间输出是其用法的经典示例。

它们是二进制的，因此 Samer 在他的回答中所说的大部分内容也适用，唯一的区别是您使用指针算术而不是查找。

# java - 如何保持变量的值直到我重置它？

> ID：15855880
> 
> 赞同：0
> 
> 时间：2013-04-06T20:50:53.420
> 
> 标签：java, android

我的游戏中有 4 个益智游戏，可以说是子游戏。为每个用户赚取一些积分。game1 结束后，我将获得的积分设置为公共静态 int pointsGame1 变量。以此类推其他游戏。在我的主菜单中，我有一个应该显示总分的框。我做这样的事情：

```
boxTotalPoints.setText("" + pointsGame1 + pointsGame2 + pointsGame3 + pointsGame4); 
```

问题是当我开始该活动时，我得到 0000，因为所有变量的起始值都是 0。

我遇到的第二个问题是，当我完成游戏1 时，我将这些点添加到我的 totalPoints 变量中，也是 public static int，如下所示：

```
Menu.totalPoints =+ pointsGame1; 
```

但是当我玩第二场比赛时，它应该汇总我所有的积分并将其显示在 mu 总框中，但我只从最后一场比赛中获得积分。此外，如果我在第一场比赛中获得 60 分，它将显示 00060。

如何解决这两件事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:58:22.093

`SharedPreferences`在您的活动中使用。

准确地说：使用来自不同活动/服务/意图/...的共享首选项，您应该将其与模式 MODE_MULTI_PROCESS 一起使用（常量值 int = 4）。如果没有，文件将被锁定，并且只有一个进程可以一次写入！

```
SharedPreferences preferences = getSharedPreferences("myapp",4);
SharedPreferences.Editor editor = preferences.edit();
int points= pointsGame1 + pointsGame2 + pointsGame3 + pointsGame4;
editor.putInteger("points", points);
editor.commit(); 
```

* * *

```
SharedPreferences preferences = getSharedPreferences("myapp",4);
points= preferences.getInteger("points", 0);
points= point+pointsGame1;
SharedPreferences.Editor editor = preferences.edit();
editor.putInteger("points", points);
editor.commit(); 
```

并且任何时候您需要跨活动保留点，请使用上面的代码。

* * *

然后，当您需要从任何活动/流程中检索积分时：

```
SharedPreferences preferences = getSharedPreferences("myapp", 4);
points= preferences.getInteger("points", 0); 
```

# c# - 在 C# 中使用反射创建具有字符串值的未知枚举实例

> ID：15855881
> 
> 赞同：14
> 
> 时间：2013-04-06T20:51:02.217
> 
> 标签：c#, reflection, enums

我有一个问题，当在运行时我有枚举的 System.Type 并检查 BaseType 是 System.Enum 时，如何准确地创建枚举的实例，我的值是一个与神秘项目匹配的 int 值枚举。

我到目前为止的代码只是上面描述的逻辑，如下所示。

```
 if (Type.GetType(type) != null)
        {
            if (Type.GetType(type).BaseType.ToString() == "System.Enum")
            {
                return ???;
            }
        } 
```

过去使用枚举时，我总是在代码时知道我要解析哪个枚举，但在这种情况下，我很困惑，而且几乎没有运气以谷歌友好的方式表达我的问题......我通常会做类似的事情

```
(SomeEnumType)int 
```

但由于我在代码时不知道 EnumType 我怎么能实现同样的事情？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-06T21:00:15.567

使用类[`ToObject`](http://msdn.microsoft.com/en-us/library/system.enum.toobject.aspx)上的方法`Enum`：

```
var enumValue = Enum.ToObject(type, value); 
```

或者像您提供的代码一样：

```
if (Type.GetType(type) != null)
{
    var enumType = Type.GetType(type);
    if (enumType.IsEnum)
    {
        return Enum.ToObject(enumType, value);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T21:01:48.657

利用`(ENUMName)Enum.Parse(typeof(ENUMName), integerValue.ToString())`

作为通用函数（编辑以纠正语法错误）...

```
 public static E GetEnumValue<E>(Type enumType, int value) 
                        where E : struct
    {
        if (!(enumType.IsEnum)) throw new ArgumentException("Not an Enum");
        if (typeof(E) != enumType)
            throw new ArgumentException(
                $"Type {enumType} is not an {typeof(E)}");
        return (E)Enum.Parse(enumType, value.ToString());
    } 
```

旧错误版本：

```
public E GetEnumValue(Type enumType, int value) where E: struct
{
  if(!(enumType.IsEnum)) throw ArgumentException("Not an Enum");
  if (!(typeof(E) is enumType)) 
       throw ArgumentException(string.format(
           "Type {0} is not an {1}", enumType, typeof(E));
  return Enum.Parse(enumType, value.ToString());
} 
```

# php - 如何在表单上定义正确的动作参数？

> ID：15855882
> 
> 赞同：0
> 
> 时间：2013-04-06T20:51:16.373
> 
> 标签：php, laravel, laravel-3

现在我有那些。

```
user_add.blade.php
<form method="post" id="customForm" action="admin/user_add">
    ...
</form>

routes.php
Route::post('admin/user_add', 'admin@user_add');

admin.php
public function action_user_add()
{
   print_r(Input::get());
} 
```

我应该如何给出正确的行动路径？像; `admin/user_add`或类似的东西`{{ Base_path }}admin/user_add`？当我进入生产服务器时，我不希望出现问题。（例如使用子文件夹等）

另外，我的方法是正确的还是有更好的方法？

附言。我应该使用表单方法吗？喜欢`<input type="text" id="username" name="username" class="small">`_`Form:text("username", "", "small");`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:05:11.443

试试这个：

```
<form method="post" id="customForm" action="{{ URL::to_action('admin@user_add') }}"> 
```

是否要使用表单助手，实际上是您的选择。它们使一些事情变得更简单，例如声明目标 URL，但它们对于编写额外的 HTML 来说有点麻烦（向`id`表单添加属性）。

# ios - 目标 C - -[__NSCFString _isAncestorOfFirstResponder] 错误

> ID：15855886
> 
> 赞同：-1
> 
> 时间：2013-04-06T20:51:49.647
> 
> 标签：ios, objective-c, xcode

我正在尝试创建此应用程序，当您按下表格单元时，您会看到 ViewController，并且变量 get 设置在另一个视图控制器中。虽然我在按下 uitablecell 时遇到了一些错误。

错误：

```
2013-04-06 22:47:25.970 iFSX Guide[1069:907] Called
2013-04-06 22:47:26.009 iFSX Guide[1069:907] -[__NSCFString     _isAncestorOfFirstResponder]: unrecognized selector sent to instance 0x1d562390
2013-04-06 22:47:26.016 iFSX Guide[1069:907] *** Terminating app due to uncaught      exception 'NSInvalidArgumentException', reason: '-[__NSCFString    _isAncestorOfFirstResponder]: unrecognized selector sent to instance 0x1d562390'
 *** First throw call stack:
 (0x319b22a3 0x3964c97f 0x319b5e07 0x319b4531 0x3190bf68 0x33832beb 0x338a837f   0x338548fb 0x33a95619 0x338a79b9 0x338a5fe7 0x339c83ef 0xa22a5 0x3387c28d 0x338fef81   0x322c0277 0x319875df 0x31987291 0x31985f01 0x318f8ebd 0x318f8d49 0x354ba2eb 0x3380e301   0xa19d1 0x39a83b20)
 libc++abi.dylib: terminate called throwing an exception 
```

编码：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)in  dexPath{
   NSLog(@"Called");
    Aircraft = indexPath.row;

     [self performSegueWithIdentifier:@"ToSections" sender:self];

 }

 -(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([segue.identifier isEqualToString:@"ToSections"]){
        AirplaneSections *sections = (AirplaneSections *)segue.destinationViewController;
        sections.plane = Aircraft;
    }
} 
```

* * *

我发现这是视图控制器上的 ViewDidLoad 错误。

```
NSString *quickTemp = [NSString alloc];
switch (plane) {
    case 0:
        quickTemp = @"Boeing 737-800";
        break;

    default:
        break;
}
TitleLabel.text = quickTemp;
*/ 
```

我在那里做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:55:36.987

你在用ARC吗？这类问题通常表明某处存在内存错误。基本上，某处的某些代码正试图访问已发布的对象。这让一切都变得热闹起来。

如果您不使用 ARC，则应将其打开。

之后，您应该做的下一件事是运行静态分析器。解决任何出现的问题。

如果这不能解决问题，请在 Xcode 中添加一个断点，该断点在引发 Objective-C 异常时停止。它应该告诉你这个问题到底发生在哪里。

如果这没有帮助，请在 Instruments 和 Zombie 工具下运行您的代码。这将*准确*显示您尝试访问已释放内存的位置。

# java - 使用数组调用方法时出现“.class”预期错误

> ID：15855889
> 
> 赞同：0
> 
> 时间：2013-04-06T20:52:02.023
> 
> 标签：java

到目前为止，我已经购买了三本书并观看了几个视频，但我仍然不清楚为什么这不能编译。任何帮助将不胜感激。我正在尝试读取信用卡号码文件，并根据用户在我的主目录中输入的号码进行检查。这是我的课程，然后是我的主要课程：（感谢您的帮助）

```
 import java.util.Scanner;
    import java.io.*;

    public class Validator1
    {
        int[] valid;    

    public Validator1()throws IOException
    {   

    }

    public Validator1(String fileName)throws IOException
    {   
        int beginning = 0;
        int place = 0;
        int size = 0;

        File file = new File(fileName);
        Scanner inputFile = new Scanner(file);
        Scanner inputFile2 = new Scanner(file);

        while(inputFile.hasNextInt())
        {
            size++;
            inputFile2.nextInt();
        }

        while(inputFile2.hasNextInt() && place < valid.length)
        {
            valid[place] = inputFile2.nextInt();
            place++;
        }

    }

    public void sort(int[]valid)
    {
        valid = new int[valid.length];
        for(int start = 0; start < valid.length; start++)
        {
            int lowestValue = valid[start];
            int lowestIndex = start;
            for(int i = start + 1; i < valid.length; i++)
            {
                if(valid[i] < lowestValue)
                {
                lowestValue = valid[i];
                lowestIndex = i;
                }
            }
            int temp = valid[start];
            valid[start] = valid[lowestIndex];
            valid[lowestIndex] = temp;
        } 
    }

    public boolean isValid(int[] valid, int number)
    {
        int low =0;
        int high = valid.length-1;
        while(high >= low)
        {
            int middle = (high + low)/2;
            if(valid[middle] == number)
            {
                return true;
            }
            if (valid[middle] < number)
            {
                low = middle +1;
            }
            if(valid[middle] > number)
            {
                high = middle-1;
            }
        }
        return false;
    }
}

import java.util.Scanner;
import java.io.*;

public class ChargeIt1
{
    public static void main(String[] args)
    {
        int accountNumber;
        int[] valid = 0;
        Scanner keyboard = new Scanner(System.in);

        System.out.println("Enter the file name: ");
        String fileName1 = keyboard.nextLine();
        String fileName = fileName1 + ".txt";

        File file = new File(fileName);

        while(!file.exists())
        {
            System.out.println("the file does not exist");
            System.out.println("Enter the file name: ");
            fileName1 = keyboard.nextLine();
            fileName = fileName1 + ".txt";
            file = new File(fileName);

        }
        System.out.println("Enter your charge account number: ");
        accountNumber = keyboard.nextInt();

        //Validator1 val = new Validator1(fileName);
        try
        {
            Validator1 val = new Validator1(fileName);
            if(val.isValid(valid, accountNumber))
                System.out.println("That is a valid account number.");
            else
                System.out.println("That is an INVALID account number.");

        }
        catch(Exception e)
        {
            //System.out.println("An error has occurred.");
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:56:08.427

这一行是错误的：

```
int[] valid = 0; 
```

0 不是数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T21:02:26.067

你的问题在`ChargeIt1`课堂上，在这里：

```
if(val.isValid(valid[], accountNumber))
    System.out.println("That is a valid account number.");
else
    System.out.println("That is an INVALID account number."); 
```

`val.idValid`方法 ( ) 的第一个参数`valid[]`是非法语法。将该行替换为：

```
if(val.isValid(valid, accountNumber)) 
```

这应该可以解决您的编译器错误。快速注意，这是一个 IDE 会很快突出显示的东西，我强烈建议使用它，***尤其是***在刚开始编程时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T11:22:44.720

您的代码中有许多错误。

要解决这一行：

```
int[] valid = 0;  // does not compile 
```

您有几个选项可以修复它：

数组的长度是固定的，要初始化一个数组，你必须提供一个维度，例如：

```
int[] valid = new int[10]; 
```

但是，由于数组是固定的，您的代码可能会读取比数组空间更多的输入。还有另一种方法 - 使用集合，它会根据需要自动扩展大小。

# c++ - OpenCV 2.4.3+ 与 iOS 的 libstdc++？

> ID：15855894
> 
> 赞同：5
> 
> 时间：2013-04-06T20:52:24.070
> 
> 标签：c++, ios, xcode, opencv, c++11

我正在尝试将最新版本的 OpenCV 包含到现有的 iOS 项目中，并且遇到链接器错误，因为我的 XCode 项目设置为使用 libstdc++ 而不是 libc++ / C++ 11 支持。

我见过其他几个人通过启用 libc++ 修复了他们的错误。例子：

*   [将 Xcode 升级到 4.5.2 和 OpenCV 升级到 2.4.3 后的链接器错误](https://stackoverflow.com/questions/14030546/linker-errors-after-upgrading-xcode-to-4-5-2-and-opencv-to-2-4-3)
*   [如何使用 OpenCV 解决 iOS 链接错误](https://stackoverflow.com/questions/14185716/how-to-resolve-ios-link-errors-with-opencv)

但是，我需要使用 libstdc++，因为我有其他 3rd 方库，这些库已经用旧的 stdlib 编译（无法更改）。有没有办法在没有 -stdlib=libc++ 的情况下编译 OpenCV 2.4.3+ ？是否有特殊标志可以传递给 CMake？还是 OpenCV 源代码的 ios 文件夹中的 build_framework.py 脚本？

或者，有人有可用的二进制版本吗？假设 libc++ / C++11 似乎所有都可以从 OpenCV 下载。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T01:01:25.823

在 openCV 的源代码中找到这个文件：

```
ios/cmake/Modules/Platform/iOS.cmake 
```

更改此行：

```
set (CMAKE_CXX_FLAGS "-stdlib=libc++ -headerpad_max_install_names -fvisibility=hidden -fvisibility-inlines-hidden") 
```

到：

```
set (CMAKE_CXX_FLAGS "-stdlib=libstdc++ -headerpad_max_install_names -fvisibility=hidden -fvisibility-inlines-hidden") 
```

使用python脚本编译

```
ios/build_framework.py 
```

那么你应该很高兴

我刚刚在 2.4.3 源代码上试过这个，在现有项目的结果框架中交换，将项目的 C++ 标准库更改为 libstdc++ 并且运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-27T13:06:10.327

我还在使用 OpenCV 和需要 libstdc++ 的第 3 方库开展项目。

当我自己遇到这个问题时，我想分享对我有用的东西。

* * *

通过将“libc++.dylib”添加到我的项目中，我能够让 OpenCV 正常工作。

构建阶段->“将二进制文件与库链接”->“+”-> libc++.dylib

作为参考，我正在使用来自 opencv.org 的 OpenCV 2.4.9 (opencv-2.4.9)。我按照 OpenCV 文档中的说明使用 ios 平台 build_framework.py 编译了它。无需修改。

# java - SimpleDateFormat 解析返回 null

> ID：15855897
> 
> 赞同：2
> 
> 时间：2013-04-06T20:52:31.347
> 
> 标签：java, android, json, date

我有一个“2013-03-28T15:16:58.000Z”类型的日期值。我想将其转换为“dd-MMM-yyyy”格式。为此，我使用了以下代码：

```
public static String getTime(String time)
{
    try 
    {           
        String tim = time.replace("T", " ");
        SimpleDateFormat df1 = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSSZ", Locale.US);
        SimpleDateFormat df2 = new SimpleDateFormat("dd-MMM-yyyy", Locale.US);

        return df2.format(df1.parse(tim));
    }
    catch (ParseException e) 
    {
        return null;
    }
} 
```

我从 StackOverflow 的各种帖子中得到了这个解决方案。但是这段代码仍然返回 null。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T20:55:54.167

由于第一次返回是由于日期格式无效`null`而从异常块返回的值。`SimpleDateFormat``null`

该`Z`模式用于表示时区模式。要接受文字`Z`字符，您需要用单引号将字符括起来。

```
new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS'Z'", Locale.US); 
```

此外，`T`如果您不想手动替换，也可以对字符执行相同操作：

代替

```
String tim = time.replace("T", " "); // remove 
```

只需使用`time`和使用：

```
new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'", Locale.US); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T20:59:26.433

它返回 null 是因为它正在捕获 ParseException 并且您告诉它返回 null。您至少应该打印出堆栈跟踪，这应该会告诉您为什么会收到 ParseException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T20:56:44.627

它在解析字符串 2013-03-28 15:16:58.000Z 时抛出 ParseException。

尝试摆脱 Z [就像您对 T 所做的那样] 并使用`SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS", Locale.US)`

# python - 使用 python csv 模块，为什么创建相同值的列表会加快创建行列表的速度？

> ID：15855901
> 
> 赞同：4
> 
> 时间：2013-04-06T20:53:17.743
> 
> 标签：python, csv

`csv`我正在使用Python中的无价模块读取一个大型 csv 文件（超过 400 万行） 。在计时各种方法时，我遇到了一个不直观的结果。

如果我运行以下脚本，大约需要**11-12 秒**。 `b`之后几乎立即创建`a`。

```
r = csv.reader(open("data.csv", "rb"), delimiter=";")
a = [None for row in r]
b = [row for row in r] 
```

但是，如果我运行一个根本不创建的类似脚本，`a`则代码需要*更长*的时间（**21-22 秒**）：

```
r = csv.reader(open("data.csv", "rb"), delimiter=";")
b = [row for row in r] 
```

我可以理解为什么在创建之后`b`几乎不需要任何时间`a`。但我会（天真地）认为，第二个代码块，其中 only`b`是 created 而不是`a`，将是更快的脚本。冒着出现非 Pythonic 的风险，**我很想知道是否有人可以解释为什么创建`a`然后几乎是单独`b`创建的两倍。`b`**

此外，如果这种速度提升在更复杂的操作中是一致的，是否有充分的理由（除了样式/可读性问题）*不*利用它？比我更精明的 Python 程序员是否已经使用我从未听说过的一些传统方法节省了相同的时间？

如果我`a`使用整数而不是构造`None`，我会得到相同的结果。如果不是迭代`csv.reader`我迭代的对象`open("data.csv", "rb").readlines()`，那么时间就像我期望的那样：`b`单​​独创建比创建`a`then更快`b`。因此，时间差异可能与`csv.reader`对象的属性或类似它的更一般类的对象的属性有关。如果我`b`在之前创建，则时间与我单独 `a`创建的时间大致相同。`b`

一些注意事项：

*   `b`在此之前创建与单独创建`a`所需的时间相同。`b`
*   我没有在交互模式下逐行运行这些。我将每个都作为单独的脚本运行。
*   我并没有真正尝试创建一个列表，其中包含与 相同长度`r`的列表，或者`r`.
*   万一这很重要，我正在 64 位 Windows 7 上使用 Enthought Python 发行版 7.3-2 运行 Python 2.7.3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T20:58:54.423

你看过`b`你的第一个例子吗？它是空的，因为`r`第一个列表理解已经筋疲力尽了。所有行都已被迭代，并且 - 正如@soulcheck 指出的那样 - 创建一个包含 400 万个`None`s 的列表比包含 400 万个子列表的列表要快得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T21:28:38.670

这可能会提供一些见解。让我们以 10 行的 csv 文件为例进行比较：

```
import csv
from collections import Counter

r = csv.reader(open('foo.csv'))
a = [id(row) for row in r]

r = csv.reader(open('foo.csv'))
b = [row for row in r]
b_id = [id(row) for row in b]

c1 = Counter(a)
c2 = Counter(b_id)

print c1
print c2 
```

这导致

```
Counter({139713821424456: 5, 139713821196512: 5})
Counter({139713821196512: 1, 139713821669136: 1, 139713821668776: 1, 139713821196584: 1, 139713821669064: 1, 139713821668560: 1, 139713821658792: 1, 139713821668704: 1, 139713821668848: 1, 139713821668632: 1}) 
```

换句话说，在 中`a`，我们一遍又一遍地重用相同的内存。由于列表推导`a`不保留对 的任何引用`row`，它将立即被垃圾收集，打开该内存以供重用。如果我们坚持下去，自然地，我们将不得不为每个新列表分配内存。

# lisp - 程序按预期工作，但仍然显示错误消息

> ID：15855904
> 
> 赞同：2
> 
> 时间：2013-04-06T20:53:45.250
> 
> 标签：lisp, scheme, racket, sicp

我一直在尝试通过“计算机程序的结构和解释”这本书来学习编程。为了做我一直在使用 DrRacket 的练习（我找不到 Windows 7 的方案解释器，而且 DrRacket 看起来不错），并且到目前为止还没有遇到任何问题。但是在做练习 1.22 时我遇到了一个问题。我编写了一个程序，它给出了一个大于*a的素数的给定数量（* *n* ） ：

 *```
(define (search-for-primes a n)
  (define (sfp-iter a n counter)
    (cond ((and (prime? a) (= counter n))
           ((newline) (display "end")))
          ((prime? a)
           ((newline)
            (display a)
            (sfp-iter (+ a 1) n (+ counter 1))))
          (else (sfp-iter (+ a 1) n counter))))
  (sfp-iter a n 0)) 
```

该过程按预期工作，显示它应该显示的所有内容，但在显示*结束*后它显示以下错误消息：

*申请：不是程序；期望一个可以应用于给定参数的过程：# arguments...：#*

并突出显示以下代码行：

```
((newline) (display "end")) 
```

问题是什么？（我为任何拼写错误道歉，所以英语不是我的母语，我也为格式或标记中的任何错误道歉，我是新来的）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T21:15:16.193

你有几个括号问题，这解决了它：

```
(define (search-for-primes a n)
  (define (sfp-iter a n counter)
    (cond ((and (prime? a) (= counter n))
           (newline) (display "end"))
          ((prime? a)
           (newline)
           (display a)
           (sfp-iter (+ a 1) n (+ counter 1)))
          (else (sfp-iter (+ a 1) n counter))))
  (sfp-iter a n 0)) 
```

在 的第一个和第二个条件中`cond`，您错误地用 . 包围了代码`()`。这是不必要的，在一个`cond`子句中，条件之后的所有表达式都被一个`(begin ...)`表单隐式包围，因此无需将它们组合在一起。*

# php - 找不到 Illuminate\Routing\Redirector::to("user/login") 的匹配处理程序

> ID：15855910
> 
> 赞同：2
> 
> 时间：2013-04-06T20:54:34.263
> 
> 标签：php, laravel, laravel-4, mockery

我如何在 laravel 4 中用参数模拟外观？例如，我正在尝试测试我的用户控制器和我的“登录”方法。

我的控制器方法

```
public function login(){

    $this->beforeFilter('guest');

    $creds = array(
        'email'    => Input::get('email'),
        'password' => Input::get('password'),
    );

    if(Auth::attempt($creds, true)){
        return "successful";
    } else {
        return Redirect::to('user/login')->with('error', true);
    }
} 
```

不起作用的重定向测试

```
 public function testPostLogin(){

        Redirect::shouldReceive('to')->once()->with('error', true);

        $response = $this->action('POST', 'UserController@login');

        $this->assertRedirectedTo('user/login');

    } 
```

我收到以下异常。我不知道如何将“用户/登录”参数注入重定向模拟

> Mockery\Exception\NoMatchingExpectationException : 没有为 Illuminate\Routing\Redirector::to("user/login") 找到匹配的处理程序

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-21T20:04:51.747

从理论上讲，您可以模拟您的`Auth`课程。

尝试这个：

```
Auth::shouldReceive('attempt')->once()->andReturn(true); 
```

# php - 如何正确与 twitter API 的 JSON 返回交互？

> ID：15855915
> 
> 赞同：0
> 
> 时间：2013-04-06T20:55:09.110
> 
> 标签：php, json, twitter

我正在使用 Twitter API（1.1 版），并试图通过 PHP 从 JSON 返回中获取特定变量。**$mentions**是请求返回的**json_decode()**值[`GET statuses/mentions_timeline`](https://dev.twitter.com/docs/api/1.1/get/statuses/mentions_timeline)。

我有以下 PHP：

```
foreach($mentions as $mention) {
    echo '<pre>' . print_r($mention) . "</pre><br>";
} 
```

这可以按预期工作，但是当我将**['created_at']**添加到**$mention**时，我得到：

```
Fatal error: Cannot use object of type stdClass as array 
```

根据[twitter 文档](https://dev.twitter.com/docs/api/1.1/get/statuses/mentions_timeline)的预期回报：

```
[ // mentions
  { // mention
    "created_at": "Mon Sep 03 13:24:14 +0000 2012"
  }
] 
```

**这是print_r($mention)**（在循环内）返回的示例：

```
stdClass Object (
    [created_at] => Sat Apr 06 14:56:36 +0000 2013
) 
```

这个**stdClass**是什么，如果可能的话，我该如何与之交互？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:56:07.317

采用

```
$mentions = json_decode($data, true) 
```

如果您查看[文档](http://php.net/manual/en/function.json-decode.php)，您会注意到`assoc`如果您想获取关联数组而不是对象，则有参数。

否则，您可以使用`$mention->created_at`

# python - 如何使用烧瓶访问表单数据？

> ID：15855921
> 
> 赞同：11
> 
> 时间：2013-04-06T20:56:02.680
> 
> 标签：python, flask, flask-extensions, flask-login

我的`login`端点看起来像

```
@app.route('/login/', methods=['GET', 'POST'])
def login():
    if request.method == 'POST':
        print request.form # debug line, see data printed below
        user = User.get(request.form['uuid'])
        if user and hash_password(request.form['password']) == user._password:
            login_user(user, remember=True)  # change remember as preference
            return redirect('/home/')
    else:
        return 'GET on login not supported' 
```

当我使用 测试这个`curl`时，`GET`调用看起来像

```
⮀ ~PYTHONPATH ⮀ ⭠ 43± ⮀ curl http://127.0.0.1:5000/login/
GET on login not supported 
```

但是`POST`，我无法访问表单数据并获取`HTTP 400`

```
⮀ ~PYTHONPATH ⮀ ⭠ 43± ⮀ curl -d "{'uuid': 'admin', 'password': 'admin'}" http://127.0.0.1:5000/login/
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<title>400 Bad Request</title>
<h1>Bad Request</h1>
<p>The browser (or proxy) sent a request that this server could not understand.</p> 
```

但是在服务器上，我的调试信息会打印以下内容

```
ImmutableMultiDict([("{'uuid': 'admin', 'password': 'admin'}", u'')]) 
```

我在哪里`print request.form`。我无法理解我做错了什么

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T21:21:23.903

你没有`curl`正确使用。试试这样：

```
curl -d 'uuid=admin&password=admin' 
```

当`400 Bad Request`您尝试从`request.form`.

或者，使用`request.json`代替`request.form`并`curl`像这样调用：

```
curl -d '{"uuid":"admin","password":"admin"}' -H "Content-Type: application/json" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-06T21:06:19.340

您仍然需要返回响应：

```
from flask import abort

@app.route('/login/', methods=['GET', 'POST'])
def login():
    if request.method == 'POST':
        user = User.get(request.form['uuid'])

        if user and hash_password(request.form['password']) == user._password:
            login_user(user, remember=True)
            return redirect('/home/')
        else:
            return abort(401)  # 401 Unauthorized
    else:
        return abort(405)  # 405 Method Not Allowed 
```

这是[自定义 Flask 错误页面](http://flask.pocoo.org/docs/patterns/errorpages/#error-handlers)的文档。

另外，看看[Flask-Bcrypt](http://pythonhosted.org/Flask-Bcrypt/)的密码散列。

* * *

您的 CURL 命令行无效。JSON 对象需要在键和值周围加上双引号：

```
$ curl -d '{"uuid": "admin", "password": "admin"}' http://127.0.0.1:5000/login/ 
```

现在，您可以使用 访问密钥`request.json`。

# ruby-on-rails - 注册后设计重定向到 /users

> ID：15855931
> 
> 赞同：0
> 
> 时间：2013-04-06T20:57:00.870
> 
> 标签：ruby-on-rails, ruby, devise, erb

在我的应用程序控制器中，我有

```
protect_from_forgery

layout :layout_by_resource

def layout_by_resource
  if devise_controller? && resource_name == :user && action_name == 'new'
    "signin"
  else
    "application"
  end
end 
```

因此，登录、注册、忘记密码等设计视图使用该布局。

出于某种原因，在注册和忘记密码页面上，如果我遇到错误，它会重定向到`/users`（如果注册页面错误）并且`/users/password`如果忘记密码页面错误。然而，在登录页面上，它只显示正常的错误。

在我的`signin`布局内容中，我有：

```
<% flash.each do |key,msg| %>
    <div class="message" id="<%= key %>">
        <%= content_tag :div, msg %>
    </div>
<% end %>

<&= yield %> 
```

对于登录视图，我有：

```
<%= form_for(resource, :as => resource, :url => session_path(resource)) do |f| %>
  <p><%= f.text_field :email, :placeholder => "Email" %></p>
  <p><%= f.password_field :password, :placeholder => "Password" %></p>
  <p><%= f.submit 'Sign in', :class => "button" %>
  <p><%= f.check_box :remember_me %><%= f.label :remember_me, "Stay Signed In" %></p>
<% end %> 
```

对于注册视图，我有：

```
<%= form_for(resource, :as => resource, :url => registration_path(resource)) do |f| %>
  <p><%= f.text_field :email, :placeholder => "Email" %></p>
  <p><%= f.password_field :password, :placeholder => "Password" %></p>
  <p><%= f.submit 'Sign up', :class => "button" %>
<% end %> 
```

对于忘记密码的视图，我有：

```
<%= form_for(resource, :as => resource_name, :url => password_path(resource_name), :html => { :method => :post }) do |f| %>
  <p><%= f.email_field :email, :placeholder => "Email" %></p>
  <p><%= f.submit "Reset", :class => "button" %></p>
<% end %> 
```

知道出了什么问题吗？

## 更新

这是我在设计路线中覆盖的内容：

```
devise_scope :user do
  get "/account" => "devise/registrations#edit"
  get "/signin" => "devise/sessions#new", :as => "signin"
  get "/signout" => "devise/sessions#destroy", :as => "signout"
end 
```

# prolog - 关于使用置换的 8 皇后解决方案的一些解释

> ID：15855932
> 
> 赞同：-1
> 
> 时间：2013-04-06T20:57:01.767
> 
> 标签：prolog, n-queens

我正在 Prolog 学习 SWI Prolog 实施的大学考试。

我对这个版本的 8 Queen 问题如何使用排列解决问题有一些疑问：

```
solution(Queens) :-
 permutation([1,2,3,4,5,6,7,8], Queens),
 safe(Queens).

permutation([],[]).

permutation([Head|Tail],PermList) :-
 permutation(Tail,PermTail),
 del(Head,PermList,PermTail).

del(Item,[Item|List],List).

del(Item,[First|List],[First|List1]) :-
 del(Item,List,List1).

safe([]).

safe([Queen|Others]) :-
 safe(Others),
 noattack(Queen,Others,1).

noattack(_,[],_).

noattack(Y,[Y1|Ylist],Xdist) :-
 Y1-Y=\=Xdist,
 Y-Y1=\=Xdist,
 Dist1 is Xdist + 1,
 noattack(Y,Ylist,Dist1). 
```

在以前的解决方案中，我使用了这个解决方案模板： [1\Y1, 2\Y2, 3\Y3, 4\Y4, 5\Y5, 6\Y6, 7\Y7, 8\Y8] 简单地说每个女王都有要在不同的行上，X 值可能会受到限制。

这个版本的程序有很大的不同，因为我们可以观察到，为了防止垂直攻击，所有的皇后都必须在不同的行上，所以我每行都有一个皇后。

因此，在不丢失信息的情况下，我可以说解决方案将是列表的排列：**[1,2,3,4,5,6,7,8]**，其中每个元素都表示女王的 Y 坐标。

所以在这种情况下，我只通过它的 Y 坐标（它的行索引）来表示一个皇后位置

所以我有**解决方案**的关系，而不是说如果**皇后**是**[1,2,3,4,5,6,7,8]**原始列表的前排列并且如果这个排列是**安全**的（每个皇后在这个排列列表不攻击其他女王）。

好的，这很清楚......现在它定义了**安全**关系。

有一个基本情况说，如果列表为空，那么这是安全的，因为没有攻击。

并且有一个一般情况，列表不为空。如果列表不为空，我可以将其划分为**[Queen|Others]**，其中**Queen**是**列表中的第一个皇后，** Others**是**剩余的子列表......所以如果子列表 Others 它，原始列表**[Queen|Others]**是安全的本身就是一个解决方案（如果是安全的，如果Others中没有攻击的话）并且如果第一项**Queen**没有攻击其他子列表中的另一个Queen...

好的......直到现在我认为这对我来说很清楚......

**现在我对noattack**关系的定义有一些问题！

问题是我只通过它的 Y 坐标和 X 坐标来表示一个皇后位置，它没有明确存在。

我知道为了规避这种表示的限制，有以下概括（我希望能很好地理解......我不太确定......）：**我也知道每列必须有一个女王棋盘的，所以与列表中的第一个皇后（Queen）和子列表Others的X距离必须为1**

第一项Queen和子列表Others的距离是第一项Queen和最接近它的Queen的X距离，我的推理是否正确？

因此，如果女王在不同的列上，则**noattack**关系为 TRUE（对于构造总是正确的），我可以表示必须在不同的行上，说从女王和其他子列表中最近的女王的 X 距离为 1。

但是，如果我的推理是正确的，我会发现很多麻烦试图理解这部分代码中这个东西是多么的好：

```
noattack(Y,[Y1|Ylist],Xdist) :-
 Y1-Y=\=Xdist,
 Y-Y1=\=Xdist,
 Dist1 is Xdist + 1,
 noattack(Y,Ylist,Dist1). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:48:05.880

我认为你的问题只有这两条线：

```
Y-Y1=/=Xdist,
Y1-Y=/=Xdist, 
```

它检查有 Y 的皇后是否以对角方式攻击距离 Xdist 的行中的皇后。( `|Y - Y1| = Xdist --> diagonal attack` )。

攻击其他皇后的另一种方法是将它们 qttack 在同一行中，这不会仅仅因为解决方案是 的排列而发生`[1,2,3,4,5,6,7,8]`。所以像`[1,1,3,4,5,6,7,8]`永远不会发生的事情，这足以检查对角线。

我希望它解决了这个问题。

ps注意是从规则`Y1`头部的Y坐标。所以它一开始是 a为 1 的皇后，然后它回溯到其他行。`Others``Safe/1``Xdist`

## 澄清

我们正在谈论`noattack/3`。你给它三个论点：

**第一个**：`Y` *当前女王的坐标*，

**第二个**：*最右边的列表从列表* `[Y1| Ylist]` *中 where 之后的某处开始* `Y` *，并继续到主列表的末尾。（是的，这是解决方案的子列表）*，并且

**第三**：`Xdist` *是当前女王（有Y）和将与当前女王（有Y1并且是第二个参数的头）检查的女王之间的索引距离。*

第三个参数是必要的，因为没有它我们无法检查当前女王与拥有 Y1 的女王之间的对角线交互。这真的是基础数学，坐标系中有 2 个点，只有自然数。假设当且仅当**abs(x1 - x2) = abs(y1 - y2)**时，这两个点以对角线方式相互攻击。

示例 #1 。如果您很好地理解了我的解释，请将其选中为已接受。

**P1 = (3, 4) 和 P2 = (1, 2)** `-->`这些点具有对角线攻击，因为**abs(3-1) = abs(4-2) = 2**

示例 #2

**P1 = (3, 4) 和 P2 = (7, 0)** `-->`这些点具有对角线攻击，因为**abs(3-7) = abs(4-0) = 4**

这就是我们同时检查 `Y1-Y =\= Xdist` 和的原因 `Y-Y1 =\= Xdist` 。因为每当有对角线攻击时，至少会有一个`true`。`Y`当它们都不是真的时，这意味着女王与女王之间没有对角线攻击`Y1`。所以我们可以继续检查下一个皇后，即`Ylist`.

我希望这足够。这是一个非常简单的问题，只要仔细阅读它，如果你不能再次理解，请尝试自己在一张纸上追踪算法。这是一种总是有效的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T21:45:45.620

在使用 C 递归解决相同问题时，我也有同样的困惑。对角线攻击有两种可能的方向。用 x,y 坐标为每个正方形编号，左上角为 0,0。然后你会看到这两个攻击对角线检测或计算满足条件：

*   x1 - y1 == x2 - y2
*   x1 + y1 == x2 + y2

我用 C 等式表示法而不是 Prolog 表示法对上面的比较进行了注释。在 (x1,y1) 和 (x2,y2) 两点之间，如果满足上述条件之一，则存在女王对角线攻击。

# glassfish - 如何在 Windows 7 上启动 GlassFish Server？

> ID：15855933
> 
> 赞同：0
> 
> 时间：2013-04-06T20:57:07.353
> 
> 标签：glassfish

我在 C:\glassfish3 目录中安装了 GlassFish Server。

当我在 c:\glassfish3\bin 目录中键入“dir”时，文件被列出得很好。

![在此处输入图像描述](https://i.stack.imgur.com/SlosM.png)

但是当我输入 asadmin 时，我得到“系统找不到指定的路径”。

可能有什么问题？

我将如何启动 GlassFish 服务器？

- 编辑 -

此外，安装后我得到：

创建域

* * *

执行命令：C:\glassfish3\glassfish\bin\asadmin.bat --user admin --passwordfile - create-domain --savelogin --checkports=false --adminport 4848 --instanceport 8080 --domainproperties=jms.port= 7676:domain.jmxPort=8686:orb.listener.port=3700:http.ssl.port=8181:orb.ssl.port=3820:orb.mutualauth.port=3920 domain1 C:\glassfish3\glassfish\bin\asadmin .bat --user admin --passwordfile - create-domain --savelogin --checkports=false --adminport 4848 --instanceport 8080 --domainproperties=jms.port=7676:domain.jmxPort=8686:orb.listener.port =3700:http.ssl.port=8181:orb.ssl.port=3820:orb.mutualauth.port=3920 domain1 系统找不到指定的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T21:45:01.730

glassfish 需要已安装 jdk6 或 7。`java -version`在命令行上键入。如果它不工作，那么你需要安装它。

或者，您可以通过修改告诉 glassfish 寻找特定的 jdk——`C:\glassfish3\glassfish\config\asenv.bat`但我不推荐它。

# regex - 使用正则表达式进行 JAX-RS URI 匹配

> ID：15855936
> 
> 赞同：0
> 
> 时间：2013-04-06T20:57:24.420
> 
> 标签：regex, jax-rs

我在 JAX-RS 中定义了以下两个@PATH：

```
@Path("{ontoId: [a-zA-Z0-9]+}/{version: [0-9]+}")
@GET
public String getSomething(){
      return "First";
}
@Path("{ontoId: [a-zA-Z0-9]+}/{version: [0-9]+}/{entity:#([a-zA-Z0-9]+)}")
@GET
public String getAnotherthing(){
      return "Second";
} 
```

无法区分以下三个Url：

```
GET http://localhost:8080/pizza/20060718/#abcd
GET http://localhost:8080/pizza/20060718#abcd
GET http://localhost:8080/pizza/20060718 
```

也就是说，这三个Url都会返回“First”。

我的@Path 定义有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:34:44.840

FWIW，最好说明您使用的是什么 JAX-RS 实现。

另请注意，“#”符号不是有效的 URI 路径组件字符，实际上是 URI 片段组件的分隔符。因此，它不会被解析为 JAX-RS 请求路径匹配算法的一部分。本质上，在上述所有这些情况下，只会匹配“20060718”（假设“pizza”是您的应用程序上下文路径）。

# c# - 如何将 MVC4 与 EF5 Db First 单独项目结合起来

> ID：15855937
> 
> 赞同：3
> 
> 时间：2013-04-06T20:57:35.133
> 
> 标签：c#, asp.net-mvc-4, entity-framework-5, ef-database-first

在我的解决方案中，我有两个项目。一个是主**MVC4项目**。另一个是一个**DataLayer 项目**，它包含一个从现有数据库（以后可能还有一些存储库）生成的 Entity Framework 5 edmx 模型。

问题是 pocos EF5 生成位于 DataLayer 项目中。但我需要它们在 MVC4 项目的 Models 文件夹中。

我希望单独的 DataLayer 项目增加抽象和关注点分离，但我不知道如何将这两个部分放在一起。
（我想在 Models 文件夹中维护另一层 pocos 但这似乎不对）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:24:55.557

正如您所描述的，我将我的项目分为两个。

> 我想在 Models 文件夹中维护另一层 pocos 但这似乎不对

我想你会发现你最终会构建这个层。

这是两个项目**Project.Data**和**Project.Web**。Project.Web 具有对 Project.Data 的项目引用。

*   Project.Data.Models：实体
*   Project.Web.Models：DTO、ViewModels

我的观点从不直接引用实体。我将使用 AutoMapper 将实体映射到 DTO 或 ViewModel。这发生在我的*服务*中，它位于自己的命名空间下的*Project.Web中。*我的服务从不返回实体类型，我的视图只使用 ViewModel。

```
interface IFooService
{
    FooDTO GetFoo(int id);
}

public class FooService : IFooService
{
    public FooDTO GetFoo(int id)
    {
        var foo = dbContext.Foo.Where(f => f.Id == id).Select(f => new FooDTO {
            Bar = f.Bar,
            Blah = f.Blah
        }).FirstOrDefault();
        // I let AutoMapper take care of the mapping for me
        var foo = Mapper.Map<FooDTO>(dbContext.Foo.Where(f => f.Id == id).FirstOrDefault());

        return foo;
    }
} 
```

控制器动作：

```
public ActionResult FooDetails(int id)
{
    FooViewModel foo = Mapper.Map<FooViewModel>(fooService.GetFoo(id));
    return View(foo);
} 
```

**编辑：** 添加花药模型层来映射实体 => DTO => 查看模型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T23:27:33.110

这是存储库的工作。创建 DTO 类来保存视图友好的模型，并使用存储库来调用您的数据层并组装 dto。然后可以专门构建 dto 以返回给客户端，包括任何序列化或显示装饰等。这里没有什么复杂的。

我认为有些人的第一反应是“如果我必须创建这些类，我就是在重复我的努力”，但你真的不是，因为这些类服务于不同的目的，这正是你所说的，关注点分离。

```
public MyViewModel // model that is bound to the view
{
    private UserRepository _userRepo;
    public EmployeeDto ActiveUser {get;set;}

    public MyViewModel()
    {
        _userRepo = new UserRepository();
        LoadActiveUser();
    }

    private void LoadActiveUser()
    {
        var userId = (int)HttpContext.Current.Session["activeUser"] ?? 0;
        if(userId > 0)
        {
            ActiveUser = _userRepo.GetEmployee(userId);
        }
    }

}

public UserRepository
{
    private SomeEntityReference1 _myDal1;
    private SomeEntityReference2 _myDal2; // maybe you need to make some other data layer call in order to fill this object out

    public UserRepository()
    {
        _myDal1 = new SomeEntityReference1 ();
        _myDal2 = new SomeEntityReference2 (); 
    }

    public EmployeeDto GetEmployee(int id)
    {
        var empDto = new EmployeeDto();
        // get employee
        var dalEmpResult = _myDal.Employees.FirstOrDefault(e => e.EmployeeId == id);
        empDto.FirstName = dalResult.FName;
        empDto.LastName = dalResult.LName;
        empDto.Id = dalResult.EmployeeId;

        // get employee department info
        var dalDeptResult = _myDal2.Departments.FirstOrDefault(d => e.DepartmentId == dalEmpResult.DeptartmentId);
        empDto.DepartmentName = dalDeptResult.Name;

        return empDto;
    }
}

// client friendly employee object
[DataContract(Name="Employee")]
public class EmployeeDto
{
    public int Id {get; internal set;}

    [DataMember(Name="fname")]
    [DisplayName("Employee First Name:")]
    public string FirstName {get;set;}

    [DataMember(Name="lname")]
    [DisplayName("Employee Last Name:")]
    public string LastName {get;set;}   

    public int DeptId {get;set;}

    [DataMember(Name="dept")]
    [DisplayName("Works at:")]
    public string DepartmentName {get;set;}
} 
```

我在这里展示两个不同的 EF 引用（您的数据库实体模式）的唯一原因只是为了说明这将是您在返回 FINISHED dto 以供使用之前进行任何“附加”处理的机会。

# android - Android OpenGL ES：自动更正 env->self 和 NvRmChannelSubmit 失败

> ID：15855939
> 
> 赞同：5
> 
> 时间：2013-04-06T20:57:43.317
> 
> 标签：android, java-native-interface, opengl-es-2.0

下面两个问题。

我们有一个图形 OpenGL ES 2 应用程序，它在 Windows、Linux、MacOS、iPhone、iPad 和 Android 手机上运行了几年。在过去的几个月里，我们开始收到一些 Android 设备（如 Toshiba Thrive、HTC One X、Nexus 7 或 Asus Transformer、API 15 和 17）的用户关于黑屏或闪烁屏幕或很少有应用程序问题的反馈碰撞。我们的应用面向API 9及以上，使用NativeActivity用NDK编写，直接基于nvidia android示例和demo，在所有平台上经过彻底测试，无内存泄漏，无无效内存访问，很少调用一些小java代码。

查看 LogCat，我们注意到这些设备上有两种错误消息：

(1)`JNI ERROR: env->self != thread-self (0x11734c0 vs. 0xd6d360); auto-correcting`

(2)`NvRmChannelSubmit failed (err = 196623, SyncPointValue = 0)`其次是`GL_OUT_OF_MEMORY`

关于 (1)，我们知道线程与 JNI 的问题，我们希望知道如何解决这个问题。我已经阅读[了这些信息](http://android-developers.blogspot.com/2011/11/jni-local-reference-changes-in-ics.html)，我的问题是：“自动更正”是否意味着我们必须担心一些错误，或者它只是一个警告，意味着代码在未来会表现不佳，但现在它工作得很好（更正！）这与问题（2）无关？我问的原因是有时我们还会看到以下几行：

```
E/libEGL: call to OpenGL ES API with no current context (logged once per thread)
E/NvEGLUtil: Failure: eglSwapBuffers, error = 0x0000300d (swap:422) 
```

看起来很认真。我们已经在启用了 JNIcheck 的 API 17 模拟器上测试了我们的应用程序 - 没有报告任何问题，并且应用程序运行良好。

现在，关于消息（2），我找到了一些论坛（例如[here](http://forum.xda-developers.com/showthread.php?t=1766647)，[here](http://forum.xda-developers.com/showthread.php?t=1753905)和[this](https://stackoverflow.com/questions/11911030/android-canvas-opengl-renderer-is-out-of-memory)）有人举报了这条消息，原因尚不清楚。看起来像固件或驱动程序问题，或者 GPU 内存泄漏或内存碎片......许多游戏受到屏幕闪烁的影响，人们试图重新启动/重置设备，清除缓存，升级等，但问题似乎仍然存在. 这个问题涉及很多流行的设备。尽管`GL_OUT_OF_MEMORY`错误代码，“内存不足”是不合理的，因为我们用于测试的应用程序使用小的 32x32 纹理而不是常规版本中使用的 512x512 纹理（这些较大的纹理在旧设备上运行良好）。任何人都对如何解决这个问题有任何经验，这对我们来说是否可以解决？这是官方确认的硬件/固件/操作系统错误吗？我正在寻找这个问题的已知原因和真正的解决方案，而不是在[不知道原因的情况下意外帮助](https://stackoverflow.com/questions/12034436/opengl-es-2-0-screen-flickering)的试错解决方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-08T17:37:44.683

因此，经过几年尝试找出问题后，是时候给出答案了 :-) 这个问题非常痛苦、耗时且难以（几乎不可能）调试，它是非确定性的、罕见的，只会影响某些特定设备，它似乎与系统的特定版本相关，甚至与同时运行（或不运行）其他程序相关......

在我们的 C++ 代码中，在 nvidia 框架`bool Engine::initUI()`函数的末尾，我们调用了自己的`keepScreenOn(getApp())`函数，该函数使用当前活动的参数调用了我们自己的静态 java 方法：

```
//Keep the screen on.
//Note that flag modification must be done in the UI thread:
//https://android-developers.googleblog.com/2009/05/painless-threading.html
static void keepScreenOn(Activity a) {
    final Window w = a.getWindow();
    if (w != null) {
        a.runOnUiThread(new Runnable() {
            public void run() {
                w.addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
            }
        });
    }
} 
```

据我了解，修改 Window 标志会导致窗口被销毁并重新创建（如果我错了，请任何人纠正我），当应用程序正在启动时，这显然不是一个好主意。这似乎是导致 - 尽管非常罕见 - 线程之间的一些竞争条件或某些图形驱动程序的问题......这导致延迟错误消息，如“NvRmChannelSubmit failed (err = 196623, SyncPointValue = 0)”，然后是“GL_OUT_OF_MEMORY ”。

设置窗口标志会导致这种延迟 GL 问题的事实令人惊讶，并且没有通过推理发现（我们花了几年时间试图在我们的 OpenGL 代码中找到这个问题的原因）。它是通过毫无希望地注释掉任何可能影响显示的代码来发现的......解决方案是引入我们自己的子类，`NativeActivity`该子类从一开始就创建具有正确标志的主应用程序窗口：

```
public class OurSubclassOfNativeActivity extends NativeActivity
{
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);   
        super.onCreate(savedInstanceState);
    }
} 
```

我们想避免引入我们自己的 子类`NativeActivity`，但似乎需要设置`FLAG_KEEP_SCREEN_ON`我们这样做的力量。

# ruby-on-rails - 从一个 check_box_tag 保存数据数组

> ID：15855944
> 
> 赞同：0
> 
> 时间：2013-04-06T20:58:37.803
> 
> 标签：ruby-on-rails, api

我有从 сontributed API 创建的视图

```
=form_tag add_group_vk_vk_entries_path, method: :put do
  -length_of_array = @vk_groups['message']['vk'].length
    .row-fluid
      -@vk_groups['message']['vk'][1..length_of_array].each do|item| 
        .span4
          p= check_box_tag "vk_groups[]", item['gid']
          p=item['name']
          p=image_tag item['photo'], :size => "100x100",:class => "img-circle"
= submit_tag "ok" 
```

我想通过 check_box_tag 将此 api 中的数据发送到我的控制器。我不仅要发送 item['gid'] 我还想将我通过一个 check_box_tag 检查的所有数据发送到我的控制器，但我不知道如何。

在我的控制器中

```
def add_group_vk
    params[:vk_groups].each do |item|
      if VkEntry.not_exists?(item) == true
        VkEntry.create!(
           :git => item
          )
      end
    end
    redirect_to vk_entries_url
  end 
```

我想要这样的东西

```
def add_group_vk
    params[:vk_groups].each do |item|
      if VkEntry.not_exists?(item) == true
        VkEntry.create!(
           :git => item[:gid],
           :name=> item[:name],
           :ser=> item[:ser],
           :photo=> item[:photo]
          )
      end
    end
    redirect_to vk_entries_url
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:27:33.403

首先，我假设您的上面生成的复选框名称如下：

```
vk_groups[100], vk_groups[101],... 
```

您真正可以提取的只是一个 id 列表，它们在哈希键中，值并不重要。

params[:vk_groups] 将产生一个哈希，像这样迭代哈希

```
def add_group_vk
  params[:vk_groups].each do |key,val|
  if VkEntry.not_exists?(key) == true
    VkEntry.create!(
       :git => key,
       :name=> item[:name],
       :ser=> item[:ser],
       :photo=> item[:photo]
      )
  end
end
redirect_to vk_entries_url 
```

结尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:01:27.383

结果我做了：

```
def add_group_vk
    params[:vk_groups].each do |key,val|  

      item = eval val

      if VkEntry.not_exists?(key) == true

        VkEntry.create!(
            :gid          => key,
            :name         => item['name'],
            :screen_name  => item['screen_name'],
            :is_closed    => item['is_closed'],
            :is_admin     => item['is_admin'],
            :is_member    => item['is_member'],
            :type_vk      => item['type_vk'],
            :photo        => item['photo'],
            :photo_medium => item['photo_medium'],
            :photo_big    => item['photo_big']
          )
      end
      end
     redirect_to vk_entries_url
  end 
```

在视图中

```
p= check_box_tag "vk_groups[#{item['gid']}]", item 
```

# asp.net - 会话变量错误 asp.net

> ID：15855945
> 
> 赞同：1
> 
> 时间：2013-04-06T20:58:39.707
> 
> 标签：asp.net, session-variables

假设我有 2 页“A”和“B”。我在“A”中设置了一个会话变量，该变量在“B”页面的 page_load 函数中使用：

```
 if (!string.IsNullOrEmpty(Session["x"].ToString()))
 {
 } 
```

并根据该会话变量的值执行适当的操作，但如果我首先打开页面“B”，则会出现错误：

```
 Object reference not set to an instance of an object. 
```

我如何预先设置这个对象的实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:00:56.450

`IsNullOrEmpty`在执行操作和评估传递给的参数之前，您会遇到异常`IsNullOrEmpty`。您将通过调用`ToString()`if`Session["x"]`为`Session["x"]`null 得到异常。所以在调用之前你会得到异常`IsNullOrEmpty`。

*改变*

```
if (!string.IsNullOrEmpty(Session["x"].ToString())) {} 

To

if(Session["x"] != null && Session["x"].ToString() != string.Empty) {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T21:01:34.687

你正在使用`Session["x"].ToString()`when `SessionX`is null 这就是你得到的原因`null exception` 所以你应该检查那`Session["x"]`不应该是`null`

```
if(Session["x"] != null )
{
  // your code
} 
```

# java - 比较器类的使用

> ID：15855950
> 
> 赞同：-1
> 
> 时间：2013-04-06T20:59:09.003
> 
> 标签：java, sorting, arraylist, compare, comparator

我正试图让这个程序编译，现在已经卡在这个点上几个小时了。我正在尝试对包含矩形的 ArrayLists 进行排序。当宽度相同时，我试图按宽度递增、宽度递减和高度对这些矩形进行排序。我有一个包含主方法和 ArrayLists 内容的类，还有一个 DescendingComparator 类和一个 AscendingComparator 类，但无法让它们在主方法中运行。这是我的代码。任何建议都有帮助，谢谢。

```
import java.awt.Rectangle;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;

public class SortingHomework10 extends Rectangle {
    public static void main(String[] args){

//set up first array list with rectangles of differing widths
ArrayList<Rectangle> first = new ArrayList<Rectangle>();       
Rectangle rectangleOne = new Rectangle(2,6);
Rectangle rectangleTwo = new Rectangle(4,4);
Rectangle rectangleThree = new Rectangle(2,5);

first.add(rectangleOne);
first.add(rectangleTwo);
first.add(rectangleThree);

//set up second array list with rectangles that have same width
ArrayList<Rectangle> second = new ArrayList<Rectangle>();
Rectangle rectangleFour = new Rectangle(2,5);
Rectangle rectangleFive = new Rectangle(2,4);
Rectangle rectangleSix = new Rectangle(2,3);
Rectangle rectangleSeven = new Rectangle(1,3);

second.add(rectangleFour);
second.add(rectangleFive);
second.add(rectangleSix);
second.add(rectangleSeven);

System.out.println("Before sorting.");
System.out.println(first);
System.out.println("");

//Sorting in ascending width
Collections.sort(first, new AscendingComparator());
System.out.println("In ascending order by width.");
for(int j=0; j <first.size(); j++){

System.out.println(first.get(j));
}

System.out.println("");

System.out.println("In descending order by width.");
//Sorting in descending width
//for(int i = first.size() - 1; i >=0; i--){
    //System.out.println(first.get(i));
Collections.sort(first, new DescendingComparator());
}
}

//////////AscendingComparator Class code
public class AscendingComparator implements Comparator<Rectangle> {

    @Override
    public int compare(Rectangle o1, Rectangle o2) {
        if(o1.getWidth() < o2.getWidth()){
            return -1;
        }
        if(o1.getWidth() > o2.getWidth()){
            return 1;
        }
        else return 0;
    }

}

//////////////DescendingComparator Class code
public class DescendingComparator implements Comparator<Rectangle> {

    @Override
    public int compare(Rectangle o1, Rectangle o2) {
       if(o1.getWidth() > o2.getWidth()){
           return -1;
       }
       if(o1.getWidth() < o2.getWidth()){
           return 1;
       }
       else return 0;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:02:31.927

看起来您对第一个集合进行了两次排序，而在构建第二个集合之后没有对它做任何事情。

# css - 如何将 textarea 完全放入 div - CSS

> ID：15855951
> 
> 赞同：23
> 
> 时间：2013-04-06T20:59:17.040
> 
> 标签：css

我有一个`<div>`固定宽度和高度（可能以 px / % 为单位）。我有一个`<textarea>`内部，宽度为 100%，例如；

**HTML**

```
<div>
    <textarea></textarea>
</div> 
```

**CSS**

```
div{
    height: 200px;
    width: 300px;
    background: red;
}
textarea{
    height: 100px;
    width: 100%;
} 
```

但是`</textarea>`它从容器中伸出来，就像； ![截屏](https://i.stack.imgur.com/v4AtQ.png)

我希望 textarea 与容器一起拉伸到 100%。我怎样才能做到这一点？

**[这](http://jsfiddle.net/BwVQZ/)**是工作小提琴。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-06T21:01:06.700

添加`box-sizing:border-box`到 textarea 的 CSS。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-06T21:14:14.103

您可以使用盒子大小。但是每个浏览器都不一样，所以这个例子适用于所有 A 类浏览器。

```
textarea{
    height: 100%;
    width: 100%;
   -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;         /* Opera/IE 8+ */
} 
```

[http://jsfiddle.net/BwVQZ/7/](http://jsfiddle.net/BwVQZ/7/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-06T21:05:06.357

textarea 具有原生填充和边框。

如果您设置：

```
textarea{
   height: 100px;
   width: 98%;
   padding:1%;
   border:none;
} 
```

它将被安装:)

# wordpress - 未找到正文和未关闭的 div 元素的结束标记

> ID：15855952
> 
> 赞同：0
> 
> 时间：2013-04-06T20:59:18.003
> 
> 标签：wordpress, html

这是困扰我 2 天的问题。我在 Wordpress 上运行的网站运行良好，直到我添加了 1 篇新文章；之后模板被弄乱了，在 w3.org 上运行验证后，它说我缺少一个结束标记和 2 个未关闭的元素。

现在奇怪的是这个。**当我删除（取消发布）一篇文章**时，**模板再次正常工作。**. 但是当我将那篇文章发表回来时，验证错误再次出现。

我已经消除了错误是编辑器中包含不需要的 html 代码（意外）导致的可能性，但我找不到导致此错误的原因。

有人可以帮帮我吗？我的想法不多了:(

我的网站：[http](http://www.vantagemag.com/) ://www.vantagemag.com/ 验证码： http: [//validator.w3.org/check ?uri=http%3A%2F%2Fwww.vantagemag.com%2F&charset=%28detect+automatically% 29&doctype=内联&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.vantagemag.com%2F&charset=%28detect+automatically%29&doctype=Inline&group=0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:06:55.413

原来，之前的一篇文章在代码中有元素，我的客户在发布那篇文章时没有看到这些元素。现在我已经删除了所有不需要的元素，一切都恢复正常了。

感谢大家的回复和您的时间！

# ruby-on-rails - 预编译资产似乎不起作用

> ID：15855954
> 
> 赞同：1
> 
> 时间：2013-04-06T20:59:22.120
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, asset-pipeline

在将我的 Rails 应用程序部署到生产环境时，我遇到了一个从未遇到过的奇怪问题。

我跑：

```
bundle exec rake assets:precompile 
```

这是输出：

```
/home/ubuntu/.rvm/rubies/ruby-2.0.0-p0/bin/ruby /home/ubuntu/.rvm/gems/ruby-2.0.0-p0/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets
/home/ubuntu/.rvm/rubies/ruby-2.0.0-p0/bin/ruby /home/ubuntu/.rvm/gems/ruby-2.0.0-p0/bin/rake assets:precompile:nondigest RAILS_ENV=production RAILS_GROUPS=assets 
```

这是我的应用程序/资产/javascripts/application.js：

```
//= require jquery
//= require jquery_ujs
//= require jquery.ui.all
//= require twitter/bootstrap
//= require_tree . 
```

这是我的 app/assets/stylesheets/application.css：

```
/*
 *= require_self
 *= require jquery.ui.all
 *= require_tree . 
*/ 
```

预编译后，这是我的 public/assets/application-946a5a61f067fe19fe65ffd12f8c4a20.js

```
//= require jquery
//= require jquery_ujs
//= require jquery.ui.all
//= require twitter/bootstrap
//= require_tree . 
```

所以它与原始文件完全相同。

而 public/assets/application-df7525e917401704ef453cb56bf16697.css 是一个空文件。

这是我的 Gemfile：

```
source 'http://rubygems.org'

gem 'rails', '3.1.1'

# Bundle edge Rails instead:
# gem 'rails',     :git => 'git://github.com/rails/rails.git'

gem 'pg'
gem 'settingslogic'
gem 'jquery-rails'
gem 'jquery-ui-rails'
gem 'json'
gem 'will_paginate', '~>3.0.pre2'
gem 'friendly_id', '~> 4.0.0.beta14'
gem 'rails3-jquery-autocomplete'
gem 'omniauth'
gem 'omniauth-twitter'
gem 'omniauth-facebook'
gem 'paperclip', '~> 3.0'
gem 'public_activity'
gem 'rails-timeago'
gem 'therubyracer', :require => 'v8'
gem 'less-rails'
gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails'
  gem 'coffee-rails'
  gem 'uglifier', '>= 1.0.3'
end

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug'

group :test do
  # Pretty printed test output
  gem 'turn', :require => false
end 
```

和 config/environments/production.rb：

```
Yupp::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # Code is not reloaded between requests
  config.cache_classes = true

  # Full error reports are disabled and caching is turned on
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true

  # Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = false

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = false

  # Generate digests for assets URLs
  config.assets.digest = true

  #config.assets.initialize_on_precompile = false

#...
end 
```

任何方向将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-14T15:58:50.163

什么为我解决了这个问题：

*   在 Gemfile 中设置最后一个 rails 版本（目前为 3.2.14）

*   `bundle update`

*   `bundle install`

*   重启应用`touch tmp/restart.txt`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-27T01:06:56.133

我花了 2 个小时，然后我找到了[https://github.com/sstephenson/sprockets/issues/352](https://github.com/sstephenson/sprockets/issues/352)

我尝试将 ruby​​ 降级到 1.9.3 并进行预编译，然后将编译后的文件添加到 repo.. 这不是我想要的，但它可以工作..

更新：您使用的是什么版本的导轨？我正在使用 3.2.2 有这样的问题。3.2.13 工作正常（使用 ruby​​ 2.0）。

# android - 使用 Android 连接到 Twitter

> ID：15855955
> 
> 赞同：0
> 
> 时间：2013-04-06T20:59:22.447
> 
> 标签：android, twitter

我目前正在尝试 DL 一些 twitter 信息，由于某种原因，我使用的代码不会返回数据。

当我在资源管理器中手动使用 URL 时，我确实得到了数据。但是当我尝试让 Android 去做时，我得到了一个例外。

我找到了两种尝试获取数据的方法。第一个如图所示。第二个是注释掉注释上方的三行并取消注释其他行。

之后我将使用简单的 JSON 来解析字符串。

我希望我已经充分解释了我的问题。欢迎任何意见。

```
import java.io.InputStream;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    String searchUrl = "http://search.twitter.com/search.json?q=@aplusk&rpp=100&page=1";

    HttpClient client = new  DefaultHttpClient();
    HttpGet get = new HttpGet(searchUrl);

    ResponseHandler<String> responseHandler = new BasicResponseHandler();

    String responseBody = null;
    Log.d("log", "test"+responseBody);
    try{
        responseBody = client.execute(get, responseHandler);
        HttpResponse response = client.execute(get);
        responseBody =  response.toString();

//          HttpResponse response = client.execute(get);
//          InputStream inputStream = response.getEntity().getContent();
//          responseBody = inputStream.toString();

        Log.d("log", "test2"+responseBody);

    }catch(Exception ex) {
        Log.d("log", "nope");
        ex.printStackTrace();
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:24:07.220

我不确定您的例外是什么，但您的第一个问题可能是您正在主线程上进行网络活动。您必须启动一个新线程或使用[Async Task](http://developer.android.com/reference/android/os/AsyncTask.html)。

您的第二个问题是您不正确地将响应转换为字符串。要获取实际的内容字符串，您必须遍历 InputStream。[这是我的首选方法](https://stackoverflow.com/a/5445161/645387)。

另外，请确保`<uses-permission android:name="android.permission.INTERNET" />`在您的`AndroidManifest.xml`文件中。

试试这个：

```
import java.io.InputStream;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        (new Thread(new Runnable() {

            @Override
            public void run() {
                String searchUrl = "http://search.twitter.com/search.json?q=@aplusk&rpp=100&page=1";
                HttpClient client = new DefaultHttpClient();
                HttpGet get = new HttpGet(searchUrl);

                String responseBody = null;
                Log.d("log", "test" + responseBody);
                try {
                    HttpResponse response = client.execute(get);
                    InputStream inputStream = response.getEntity().getContent();
                    // responseBody = inputStream.toString();
                    responseBody = streamToString(inputStream);

                    Log.d("log", "test2" + responseBody);

                } catch (Exception ex) {
                    Log.d("log", "nope");
                    ex.printStackTrace();
                }

            }
        })).start();
    }

    public static String streamToString(InputStream is) {
        java.util.Scanner s = new java.util.Scanner(is).useDelimiter("\\A");
        return s.hasNext() ? s.next() : "";
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

# c# - SQL 索引表连接

> ID：15855960
> 
> 赞同：1
> 
> 时间：2013-04-06T20:59:48.257
> 
> 标签：c#, sql, sql-server, join

我正在 C# MVC 应用程序中针对 SQL 数据库执行以下两个查询。

## 查询1

```
SELECT tableone.id, name, time, type, grade, product, element, value
FROM dbo.tableone INNER JOIN dbo.tabletwo ON dbo.tableone.id = dbo.tabletwo.id
Where name = '" + Name + "' Order By tableone.id Asc, element 
```

## 查询2

```
Select DISTINCT element FROM dbo.tableone
INNER JOIN dbo.tabletwo ON dbo.tableone.id = dbo.tabletwo.id
Where name = '" + Name + "'" 
```

在运行执行这些查询的方法时，每个查询都会挂起，并且我的应用程序的下一页通常不会加载超过一分钟，或者它会在一个或另一个上超时。当我在 SQL Server 中运行相同的查询时，每个查询都需要 10 到 15 秒才能运行，这仍然太长了。

我怎样才能加快他们的速度？我从来没有创建过 SQL 索引，我不确定如何为每个索引创建它，或者这是否是正确的追求路径。

Tableone 目前有 20808805 行 3 列，tabletwo 有 597707 行 6 列。

表一

```
id(int, not null)
element(char(9), not null)
value(real, null) 
```

表二

```
id(int, not null)
name(char(7), null)
time(datetime, null)
type(char(5), null)
grade(char(4), null)
product(char(14), null) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T22:51:07.117

首先，正如@Robert **Co**所说， tabletwo.name 上的索引将有助于提高性能。

另外，tableone.id 和 tabletwo.id 上是否有索引？我会假设有，因为它们看起来像主键。如果没有，您肯定需要在它们上放置索引。我可以看到 tableone 到 tabletwo 是一个多对一的关系，这意味着你可能没有 table one 上的主键。**您非常需要在tableone上添加一个主键，例如tableoneid，并使其成为聚集索引！**

我认为这里的另一个原因是，您的 tableone 比 tabletwo 大得多，后者受到 where 子句（name = 'Name'）的进一步限制。这意味着您正在将一个大表 (tableone) 连接到一个小表（带有 where 子句的 tabletwo）。**在 SQL 中，将大表连接到小表会很慢。**

我能想到的解决方案是，也许您可**​​以将一些列（例如“类型”）移动到 tableone，以便您也可以将 tableone 限制为查询中的一个小集合**：

```
Select DISTINCT element FROM dbo.tableone
INNER JOIN dbo.tabletwo ON dbo.tableone.id = dbo.tabletwo.id
Where tableone.type = 'some type' and name = '" + Name + "'" 
```

我不太确定这些建议如何适合您的数据模型，我只是希望它们能有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T06:28:00.800

10 到 15 秒，有 2000 万行且没有索引？这还不错！

正如 Ethen Li 所说，一切都与索引有关。在理想情况下，您将在过滤器（JOIN 和 WHERE）或 ORDER BY 中的所有列上创建索引。但是，由于这可能会严重影响 UPDATE 和 INSERT，因此您需要更加实用且不太理想。根据您提供的信息，我建议创建以下索引： CREATE INDEX index1 ON tableone (name); 如果 tableone.id 是您的候选键（唯一标识行的键），您还应该在其上创建一个索引 - 可能是聚集的，这取决于 ID 的生成方式）：

在 tableone (id) 上创建唯一索引 IX1TableOne；

或者

CREATE UNIQUE CLUSTERED INDEX IX1TableOne ON tableone (id);

对于 tabletwo：同样适用于 ID 和 tableone - 在 ID 上至少创建一个 unqiue 索引。

有了这些索引，您应该会发现显着的性能改进。

或者添加主键约束：

ALTER TABLE tableone ADD CONSTRAINT pktableone PRIMARY KEY CLUSTERED (id);

ALTER TABLE tabletwo 添加约束 pktabletwo PRIMARY KEY CLUSTERED (id);

在 tableone 上，这可能需要一段时间，因为可能必须对数据进行物理重新排序。因此，请在没有活动用户的维护期间执行此操作。

# c# - 如何在gridview i中获取特定单元格的值并将其作为c#中的参数传递给db？

> ID：15855961
> 
> 赞同：-2
> 
> 时间：2013-04-06T20:59:54.263
> 
> 标签：c#, gridview

我使用 C#，我在检索 gridview 中特定单元格的值时遇到问题。情况是，我的网格中显示了一个工作列表。列是 job_id 和 job_title。我正在从数据库中填充我的网格，因此网格显示了可用的作业列表。客户可以点击job_title，这是一个超链接（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:11:12.007

您可以在超链接中嵌入 job_id - 超链接可以是您数据库的一部分（一个额外的列），也可以在您使用数据库中的数据填充网格时创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T21:05:04.670

您可以使用 DataKeys 属性

> [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.datakeys.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.datakeys.aspx)

# c - 通用快速排序适用于 int*，但不适用于 void*

> ID：15855962
> 
> 赞同：1
> 
> 时间：2013-04-06T20:59:56.820
> 
> 标签：c, pointers, function-pointers

我有一个通用的快速排序功能：

```
void qsort(void* sup,int n,
 int(*cmp) (void *x,void *y),
  void (*swap) (void *a,void *b))
{
 int pv=n/2,l=0,h=n-1;

 if(n<2)
  return;

 while(h-1>=l)
 {
  if(l==pv)
  {
   swap(sup+pv,sup+pv+1);
   pv++;
  }
  if(h==pv)
  {
   swap(sup+pv,sup+(pv-1));
   pv--;
  }
  if(cmp(sup+h, sup+pv))
  {
   h--;
   continue;
  }
  if(cmp(sup+pv, sup+l))
  {
   l++;
   continue;
  }
  swap(sup+l,sup+h);
  l++,h--;
 }
 qsort(sup, l, cmp, swap);
 qsort(sup+l,n-l, cmp, swap);
} 
```

以这些函数作为参数：

```
int cmp(int *c1, int *c2) {
 return *c1 > *c2;
}

void swap(int *a,int *b)
{
 int c= *a;
 *a=*b;
 *b=c;
} 
```

主要功能如下：

```
int main()
{
 int arr[4] = {3,4,1,2};
 print(arr, 4);
 printf("\n\n");
 qsort(arr, 4, &cmp, &swap);
 print(arr, 4);
 return 0;
} 
```

打印在哪里：

```
void print(int* arr, int size) {
 int i = 0;
 for(; i < size; ++i) {
  printf("%d \t", arr[i]);
 }
} 
```

问题：

当原型`qsort`为：

```
void qsort(int* sup,int n,
 int(*cmp) (void *x,void *y),
  void (*swap) (void *a,void *b)) 
```

效果很好，

但是当我将`sup`参数更改为`void*`：

```
void qsort(void* sup,int n,
 int(*cmp) (void *x,void *y),
  void (*swap) (void *a,void *b)) 
```

它不起作用。有人知道为什么吗？

我正在使用 MinGW 在 Windows 下使用 Code::Blocks。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:26:27.867

以下是修复排序的方法：

```
#include <stdio.h>

void Qsort(
  void* sup,
  int n,
  int size,
  int(*cmp) (const void *x, const void *y),
  void (*swap) (void *a,void *b))
{
  int pv = n / 2, l = 0, h = n - 1;

  if (n < 2)
    return;

  while (h - 1 >= l)
  {
    if (l == pv)
    {
      swap((char*)sup + pv * size, (char*)sup + (pv + 1) * size);
      pv++;
    }

    if(h == pv)
    {
      swap((char*)sup + pv * size, (char*)sup + (pv - 1) * size);
      pv--;
    }

    if (cmp((char*)sup + h * size, (char*)sup + pv * size) > 0)
    {
      h--;
      continue;
    }

    if (cmp((char*)sup + pv * size, (char*)sup + l * size) > 0)
    {
      l++;
      continue;
    }

    swap((char*)sup + l * size, (char*)sup + h * size);
    l++, h--;
  }

  Qsort(sup, l, size, cmp, swap);
  Qsort((char*)sup + l * size, n - l, size, cmp, swap);
}

int cmp(const void *c1, const void *c2)
{
  int a = *(const int*)c1;
  int b = *(const int*)c2;
  if (a > b) return 1;
  if (a < b) return -1;
  return 0;
}

void swap(void *c1, void *c2)
{
  int c = *(int*)c1;
  *(int*)c1 = *(int*)c2;
  *(int*)c2 = c;
}

void print(int* arr, int size)
{
  int i = 0;
  for(; i < size; ++i)
  {
    printf("%d \t", arr[i]);
  }
}

int main(void)
{
  int arr[4] = {3,4,1,2};
  print(arr, 4);
  printf("\n\n");
  Qsort(arr, 4, sizeof(arr[0]), &cmp, &swap);
  print(arr, 4);
  return 0;
} 
```

输出（[ideone](http://ideone.com/4fE7xl)）：

```
3       4       1       2

1       2       3       4 
```

请注意，以与标准库函数相同的方式命名函数是一件坏事。您的程序可能无法编译或工作。出于这个原因，我`qsort`改为`Qsort`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T21:02:14.700

您必须能够取消引用您的参数。`void*`不能取消引用，因为编译器无法确定您传递的类型。如果你通过了，你必须使用显式转换`void*`。

这个

```
void qsort(int* sup,int n,
 int(*cmp) (void *x,void *y),
  void (*swap) (void *a,void *b)) 
```

绝对没问题，但在这里

```
void qsort(void* sup,int n,
 int(*cmp) (void *x,void *y),
  void (*swap) (void *a,void *b)) 
```

你正在传递一个`void*`(sup) 并且这个不能被取消引用。因此，您的第一个解决方案很好，但您必须输入类型`(*cmp)`或为每种类型定义一个 qsort。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-13T14:17:08.060

我们可以改进通用快速排序以省略交换功能。

```
#ifdef _WIN32
#define alloca _alloca
#else
#include <alloca.h>
#endif

// the generic swap function
void arrswap(void * const a, void * const b, int const sz) {
    int64_t tmp;
    void * p;
    bool needfree = false;
    if (sz > sizeof(int64_t)) {
        p = alloca(sz);
        if (p == NULL) {
            p = malloc(sz);
            //assert(p != NULL, "not enough memory");
            needfree = true;
        }
    }
    else {
        p = &tmp;
    }

    memcpy(p, b, sz);
    memcpy(b, a, sz);
    memcpy(a, p, sz);

    if (needfree) {
        free(p);
    }

}
// O(n^2) sort
void arrsort(void * const p, int const sz, int const n,
    int(*compare)(void const * const pa, void const *const pb)) {

    for (int i = 0; i < n; i++) {
        for (int j = i + 1; j < n; j++) {
            if (compare((char*)p + i*sz, (char*)p + j*sz) == 1) {
                arrswap((char*)p + i*sz, (char*)p + j*sz, sz);
            }
        }
    }
}

// guess the index of the pivot value from three value in the array.
static int guessmidval(void * const p, int const sz, int const n,
    int(*compare)(void const * const pa, void const *const pb)) {

    int a = 0;
    int b = n / 2;
    int c = n - 1;

    int ab = compare((char*)p + a*sz, (char*)p + b*sz);
    int bc = compare((char*)p + b*sz, (char*)p + c*sz);
    int cb = compare((char*)p + c*sz, (char*)p + b*sz);
    int ba = compare((char*)p + b*sz, (char*)p + a*sz);
    if (ab <= 0 && bc <= 0 || cb <= 0 && ba <= 0) {
        return b;
    }

    int ac = compare((char*)p + a*sz, (char*)p + c*sz);
    int ca = compare((char*)p + c*sz, (char*)p + a*sz);
    if (ba <= 0 && ac <= 0 || ca <= 0 && ab <= 0) {
        return a;
    }

    return c;
}
// quick sort
void arrqsort(void * const p, int sz, int const n,
    int(*compare)(void const * const pa, void const *const pb)) {

    if (n <= 2) {
        arrsort(p, sz, n, compare);
        return;
    }

    int midval_index = guessmidval(p, sz, n, compare);
    arrswap(p, (char*)p + midval_index*sz, sz);

    int i, j;
    for (i = 1, j = n - 1; ; i++, j--) {
        for (; compare((char*)p + i*sz, p) <= -1 && i <= j; i++);
        for (; compare((char*)p + j*sz, p) >= +1 && i <= j; j--);
        if (i >= j)break;
        arrswap((char*)p + i*sz, (char*)p + j*sz, sz);
    }
    arrqsort(p, sz, i, compare);
    arrqsort((char*)p + i*sz, sz, n - i, compare);
} 
```

为 int64 创建比较函数：

```
int compare_int64(void const * const pa, void const *const pb) {
    int64_t a = *(int64_t*)pa;
    int64_t b = *(int64_t*)pb;
    if (a > b)return 1;
    else if (a < b)return -1;
    return 0;
} 
```

我们可以`arrqsort`这样称呼：

```
int64_t a[] = { 3,1,65,4,-1 };
int n = sizeof(a) / sizeof(*a);
arrqsort(a, sizeof(*a), n, compare_int64);
for (int j = 0; j < n; j++) {//-1,1,3,4,65,
    printf("%d,", a[j]);
} 
```

# c# - 避免使用泛型和自定义数据列表进行强制转换

> ID：15855972
> 
> 赞同：0
> 
> 时间：2013-04-06T21:01:02.153
> 
> 标签：c#, .net, generics, interface

我有以下代码用于支持不同类型的列表：

```
public enum eType
{
    tInt,
    tString,
    tDateTime
}

public interface ICustomType<out T>
{
    T Value { get; }
}

public abstract class DifferentType
{
    protected DifferentType(eType type, string mnemonic)
    {
        Type = type;
        Mnemonic = mnemonic;
    }

    public string Mnemonic { get; private set; }

    public eType Type { get; private set; }
}

public class DateTimeType : DifferentType, ICustomType<DateTime>
{
    public DateTimeType(DateTime value, string mnemonic)
        : base(eType.tDateTime, mnemonic)
    {
        Value = value;
    }

    public DateTime Value { get; private set; }
}

public class IntType : DifferentType, ICustomType<int>
{
    public IntType(int value, string mnemonic)
        : base(eType.tInt, mnemonic)
    {
        Value = value;
    }

    public int Value { get; private set; }
}

public class StringType : DifferentType, ICustomType<string>
{
    public StringType(string value, string mnemonic)
        : base(eType.tString, mnemonic)
    {
        Value = value;
    }

    public string Value { get; private set; }
}

public static class UtilValue
{
    public static T GetValue<T>(DifferentType customType)
    {
        return ((ICustomType<T>)customType).Value;
    }
}

public class testTypes2
{
    public testTypes2()
    {
        var values = new List<DifferentType> { GetInt(), GetString(), GetDate() };

        foreach (var i in values)
        {
            switch (i.Type)
            {
                case eType.tInt:
                    int resInt = UtilValue.GetValue<int>(i);
                    break;

                case eType.tString:
                    string resString = UtilValue.GetValue<string>(i);
                    break;

                case eType.tDateTime:
                    DateTime resDateTime = UtilValue.GetValue<DateTime>(i);
                    break;
            }
        }
    }

    private DateTimeType GetDate()
    {
        return new DateTimeType(new DateTime(2000, 1, 1), "MnemonicDate");
    }

    private IntType GetInt()
    {
        return new IntType(5, "MnemonicInt");
    }

    private StringType GetString()
    {
        return new StringType("ok", "MnemonicString");
    }
} 
```

并且想避免在`return ((ICustomType<T>)customType).Value;`课堂上排队`UtilValue`，知道如何在保持设计的同时摆脱它吗？

我什至不确定这个演员阵容是否昂贵？我的猜测是*肯定*的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:19:22.377

访客模式示例：

```
interface IDifferentTypeVisitor
{
    void Visit(DateTimeType dt);
    void Visit(StringType st);
}

class DifferentType
{
    public abstract void Accept(IDifferentTypeVisitor visitor);
}

class DateTimeType : DifferentType
{
    public void Accept(IDifferentTypeVisitor visitor)
    {
        visitor.Visit(this);
    }
}

class StringType : DifferentType
{
    public void Accept(IDifferentTypeVisitor visitor)
    {
        visitor.Visit(this);
    }
}

class SomeVisitor : IDifferentTypeVisitor
{
    public void Visit(DateTimeType dt)
    {
        //DateTime resDateTime = dt.Value; Or similar
    }

    public void Visit(StringType st)
    {
        //string resString = st.Value; Or similar
    }
}

public class testTypes2
{
    public testTypes2()
    {
        var values = new List<DifferentType> { /* Content */ };
        var visitor = new SomeVisitor();

        foreach (var i in values)
        {
            i.Accept(visitor);
        }
    }
} 
```

在 C# 4 中，`dynamic`可以通过将其添加到以下内容来保存一些代码`DifferentType`：

```
public void Accept(IDifferentTypeVisitor visitor)
{
    visitor.Visit((dynamic)this);
} 
```

然后删除所有其他`Accept`方法。它会损害性能，但看起来更好;-)

# java - 在程序的参数中展开通配符

> ID：15855974
> 
> 赞同：0
> 
> 时间：2013-04-06T21:01:07.670
> 
> 标签：java, windows, batch-file, wildcard

我有尝试启动 java 应用程序的批处理文件：

```
java -jar myProgram*.jar 
```

我希望批处理文件评估通配符 * 以便无论版本号如何都能找到程序。所以它应该找到 myProgram1.jar 或 myProgram438.jar 并运行它。

但是这个批处理文件产生：

```
Error: Unable to access jarfile myProgram*.jar 
```

看起来 shell 没有处理 java 的参数。有没有办法在传递参数之前扩展参数中的通配符？我知道 Bash 有 backtics 可以做到这一点。可以在windows中做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T21:56:53.637

如果您必须指定的文件夹中有更多 program*.jar，则您要启动它。脚本启动“最后发现”：

```
@echo off&setlocal
for %%i in (myProgram*.jar) do set "jarProg=%%~i"
java -jar %jarProg% 
```

为此，您不需要“Cygwin”。

# javascript - chrome、javascript、getCSSrule 使 CPU 时间达到 100%

> ID：15855975
> 
> 赞同：0
> 
> 时间：2013-04-06T21:01:19.427
> 
> 标签：javascript, google-chrome

我使用一些函数在运行时获取特定的 css 规则

```
function getCSSRule(ruleName) {
var stylesheets = document.styleSheets;
for (var i=0; i < stylesheets.length; i++) {
    var rules = stylesheets[i].cssRules || stylesheets[i].rules;
    for (var j=0, rule; rule = rules[j++]; ) {
        if (rule.selectorText === '#title') {
            return rule;
        }
    }
}   
return false;
} 
```

并在 ajax 回调中像这样使用

```
var r = document.getElementsByClassName('#title')[0];
r.style.background = col; 
```

它使我的 cpu 使用率达到 100%。问题是当我尝试设置颜色时，而不是函数本身（？）任何建议将不胜感激。问题在 Chrome 中，在 FF 中没有问题，即使在 IE6 中也很好用。

简单地说，这在 Chrom 中工作，但 CPU 使用率很高，还有一些其他意想不到的（其他 javascripts）行为。有什么线索吗？

```
var r = document.styleSheets[0].cssRules[10]; // acess by hand

r.style.border = "auto"; // modify something 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:27:50.237

```
function getCSSRule(ruleName) {
    var stylesheets = document.styleSheets;
    for (var i=0; i < stylesheets.length; i++) {
        var rules = stylesheets[i].cssRules || stylesheets[i].rules;
        for (var j=0, k=rules.length, rule; j < k; rule = rules[j++]; ) {
            if (rule.selectorText === '#title') {
                return rule;
            }
        }
    }   
    return false;
} 
```

第二个`for`循环中缺少条件语句。您需要检查`rules.length`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T23:54:46.317

拔掉头发后，我找到了另一个解决方案，非常简单且跨浏览器。万一有人需要:)

```
<div id="menu" class="menu">
<a href="config.htm">Configuration</a>
<a href="status.htm">Status</a>
...
</div> 
```

现在在 css 中，有 2 个“菜单”类，一个用于 ON，一个用于 OFF（仅用于检测在线和离线）。并且从 javacript 更改（以 10 毫秒速率 ajax 回调）效果完美

```
if(Offline)
{   
  var elem = document.getElementById('menu');
elem.className = 'menudis';
} 
```

# c++ - 如果在程序的所有运行过程中都应该存在对象，则不需要删除？

> ID：15855977
> 
> 赞同：2
> 
> 时间：2013-04-06T21:01:25.227
> 
> 标签：c++, memory-management

在阅读有关什么是内存泄漏的[答案](https://stackoverflow.com/a/9968204/976344)后，可以得出结论，如果对象应该在所有程序运行期间都存在，并且是通过创建的`new`，则无需调用`delete`此类对象。

因此，例如，如果我有一些主窗口和其他一些窗口/小部件，我在主窗口构造函数中使用 new 创建，我不需要在析构函数中调用 delete，因为将调用主窗口析构函数程序退出，所以它不是内存泄漏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T21:07:22.683

直到您的程序成为更大程序（例如 servlet）中的一个模块，此时您就有了泄漏。

它还会掩盖您的代码审查和对 valgrind 的使用。valgrind 会认为这是一个泄漏，为什么每次您尝试在其他地方追踪泄漏时都必须记住“那个很好”？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T21:08:26.843

> '因为程序退出时会调用主窗口析构函数，所以不是内存泄漏

**这是内存泄漏**，但您可以依赖这样一个事实，即操作系统将在进程终止时释放您的进程使用的资源（至少是内存）——即使进程本身没有采取行动主动执行此操作。

但是，当需要释放其他类型的资源（例如文件句柄或网络连接）时，情况可能并非如此。更一般地，当具有这些职责的程序或模块没有履行其他类型的**职责时。**

不泄漏内存是您的程序的责任，并且以您编写的模块将履行其职责的方式练习编程是很好的。用于此目的的工具和习语足够通用，足以证明在有意义的情况下练习它们的使用是合理的。例如，**RAII 习语（资源获取是初始化）**在这方面是基本的，它也可以应用于您的示例 - 使用智能指针。

尽管在特定示例中您提到内存泄漏不会是一个大问题（内存消耗不会随着程序运行而持续增长，因为我们正在谈论*一个*对象），但没有真正的理由保留它在那里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T21:07:20.280

当您启动程序时，操作系统将创建一个进程，其中包含运行该程序所需的所有信息。
当进程被破坏时，例如通过关闭主窗口，操作系统将（不是立即）从内存中清理进程的图像，并且您的内存泄漏将消失。
p如果您有一个长时间运行的进程并造成内存泄漏，这将成为一个问题，因此该进程将死亡或操作系统开始运行缓慢。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-06T21:08:11.250

最好`delete`自己养成 ing 内存的习惯（或使用智能指针），因为代码会随着时间而变化，谁知道该对象是否会在未来持续整个程序的生命周期，当您（或下一个开发人员）早就忘记了你`delete`的`new`.

# c++ - 检测堆栈或堆分配

> ID：15855979
> 
> 赞同：4
> 
> 时间：2013-04-06T21:01:37.960
> 
> 标签：c++, memory-management, constructor, new-operator

我有一个类，我希望能够设置一个标志，说明它是否是堆分配的，这样它就可以在自己之后正确清理，如果它在堆栈上，就不会尝试删除自己。问题是......我似乎无法同时覆盖两者`new`和构造函数。因此，它从`new`设置标志的重载开始，`isHeapAllocated`然后进入重置标志的构造函数。

```
void* String8::operator new(size_t size)
{
    String8* string = (String8*)malloc(size);
    if(string == null)
        Exception("allocation fail : no free memory");
    string->isHeapAllocated = true;
    return string;
}

String8::String8() 
{
    isHeapAllocated = false;
} 
```

所以`new String8()`设置`isHeapAllocated`标志，然后将其重置为`false`. 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T21:21:20.503

它不会按预期工作：

new 运算符返回要给构造函数的未初始化的内存。你 - 正确 - 做`String8* string = (String8*)malloc(size);`，但是`*string`，在这个阶段还不是一个 String8 对象：它只是包含它的内存块。

所以`string->isHeapAllocated = true;`实际上在尚未构造的对象（即 UB）中设置了一个标志。

承认这一点不会危及操作系统进程，因此程序不会崩溃（你写的内存已经属于你，毕竟......），当你稍后会做类似的事情时`String8* ptr = new String8;`，在 new 返回后，String8::String8构造函数被调用，并且该成员将独立于您在新运算符重载中所做的设置回“false”。

管理 C++ 对象的惯用方法是让分配者负责解除分配。（如果“谁”是堆栈，它只是按照定义来做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T21:43:28.177

这是一个坏主意，但这是一种不会调用未定义行为的方法。

```
#include <iostream>
#include <memory>
#include <set>

using namespace std;

class C {
public:

  void* operator new(size_t size) {
    C* c = static_cast<C*>(::operator new(size));
    heap_instances.insert(c);
    return c;
  }

  C() : heap_allocated(heap_instances.find(this) != heap_instances.end()) {}

  const bool heap_allocated;

private:
  static set<const C*> heap_instances;
};

set<const C*> C::heap_instances;

int main(int argc, char** argv) {
  cout << boolalpha;

  C stack;
  cout << stack.heap_allocated << '\n'; // false

  C* heap_nozero = new C;
  cout << heap_nozero->heap_allocated << '\n'; // true
  delete heap_nozero;

  C* heap_zero = new C();
  cout << heap_zero->heap_allocated << '\n'; // true
  delete heap_zero;
} 
```

当然，您可以在使用完指针后删除`heap_instances`它们，如果您在多线程环境中运行，则可以使用更合适的容器。但同样，我不建议您实际这样做——根据分配决定行为不是对象应该做的事情。

我能想到的唯一正当理由是启用`delete this`. 如果在对象自杀后小心不要访问成员，这是安全的，但让对象管理*其他*对象的生命周期通常更明智。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T21:05:02.517

请注意，如果在堆栈或堆上分配了构造函数，则会调用它，并且对象无法检测它是在堆栈上还是在堆中分配。

要在堆栈上创建一个对象，您不要使用任何像这样的内存分配函数

```
String8 myString; 
```

在你做的堆上创建它

```
String8 *myString = new String8(); 
```

请注意，您必须在不再使用该对象后手动进行清理。

对于绑定到堆栈范围的堆对象的使用，您可以查看 C++ 程序大量使用的 RAII 原则（有关堆分配和堆栈分配区别的更好解释，请参见[此处）。](https://stackoverflow.com/questions/655065/when-should-i-use-the-new-keyword-in-c/655206#655206)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T21:35:45.053

不知道你为什么需要这个，真的。如果需要，调用者有责任调用`delete`，无论是在堆栈上的对象上还是在堆上调用，你的类的析构函数都不应该有所不同......但是，也许，你正在做一些特殊用途的类......这是我的快速看法它。

编辑：您可能还应该将自定义`delete`运算符添加到您的类中，除非您知道全局`delete`调用与您在自定义运算符中使用的分配函数匹配的释放函数`new`。

```
#include <cstdlib>
#include <iostream>

namespace so
{

class _test_
{
 private:
  static bool flag_allocation_heap;
  bool flag_heap;

 public:
  _test_()
      : flag_heap( flag_allocation_heap )
  {
   flag_allocation_heap = 0;
   std::cout << flag_heap << std::endl;
  }

  void * operator new( std::size_t _size )
  {
   _test_ * test_ = static_cast< _test_ * >( std::malloc( _size ) );
   flag_allocation_heap = 1;
   return ( test_ );
  }
};

bool _test_::flag_allocation_heap = 0;

} // namespace so

int main()
{

 so::_test_ test_stack_;
 so::_test_ * test_memory_ = new so::_test_;

 delete test_memory_;

 return( 0 );
} 
```

输出：

```
0
1 
```

# android - 将Unity3D中的Camera.MAIN传递给android java方法

> ID：15855983
> 
> 赞同：0
> 
> 时间：2013-04-06T21:01:53.913
> 
> 标签：android, unity3d, image-recognition

我正在使用 Moodstocks SDK 集成图像识别应用程序，要在moodstocks 中启动扫描仪，我必须使用surfaceview（相机），当我在eclipse 中执行此操作时一切正常，但我想使用unity3D，因为我正在制作它在某种游戏中，

所以我将我的eclipse项目作为JAR并将其导入统一，我试图从统一脚本调用我的java类中的方法并将camera.Main传递给它

所以如果你能给我任何指导

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:34:34.593

*免责声明：我为 Moodstocks 工作。*

`ScannerSession`Moodstocks SDK for Android 中的对象被设计成一个高级的、易于使用的包装器，在经典的 Java 应用程序的上下文中，它自己解决了许多“技术”难题。特别是，它会为您初始化相机，在提供的预览中进行预览，`SurfaceView`并将相机帧发送到 Moodstocks SDK。

我自己从未使用过 Unity，因此无法深入了解细节，但我认为在您的上下文中，鉴于 Unity 有自己的初始化和使用相机的方式，您将不得不绕过此`ScannerSession`对象并点击 Moodstocks SDK 的底层函数。了解如何使用 Unity 获取相机帧，并将它们手动提供给 Moodstocks SDK`Scanner`对象。您可以从 中所做的事情中获得灵感，`ScannerSession`看看如何做到这一点！

希望这可以帮助！如果您正在寻找更多建议，您可以在[Moodstocks 帮助中心向我们提问](http://help.moodstocks.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:09:37.830

有几种方法可以创建 Java 插件，但每种情况的结果都是您最终得到一个 .jar 文件，其中包含插件的 .class 文件。一种方法是下载 JDK，然后使用 javac 从命令行编译您的 .java 文件。这将创建 .class 文件，然后您可以使用 jar 命令行工具将其打包成 .jar。另一种选择是将 Eclipse IDE 与 ADT 一起使用。

构建 Java 插件 (.jar) 后，您应该将其复制到`Assets->Plugins->Android`Unity 项目中的文件夹中。Unity 会将您的 .class 文件与其余的 Java 代码打包在一起，然后使用 Java 本机接口 (JNI) 访问代码。从 Java 调用本机代码以及从本机代码与 Java（或 JavaVM）交互时都使用 JNI。

要从本机端查找 Java 代码，您需要访问 Java VM。幸运的是，可以通过在 C/C++ 代码中添加这样的函数来轻松获得该访问权限：

```
jint JNI_OnLoad(JavaVM* vm, void* reserved) {
  JNIEnv* jni_env = 0;
  vm->AttachCurrentThread(&jni_env, 0);
} 
```

这就是从 C/C++ 开始使用 Java 所需的全部内容。完全解释 JNI 超出了本文档的范围。但是，使用它通常涉及查找类定义、解析构造函数 () 方法和创建新的对象实例，如下例所示：-

```
jobject createJavaObject(JNIEnv* jni_env) {
  // find class definition
  jclass cls_JavaClass = jni_env->FindClass("com/your/java/Class"); 
  // find constructor method        
  jmethodID mid_JavaClass = jni_env->GetMethodID (cls_JavaClass, "<init>",  "()V");     
  // create object instance
  jobject obj_JavaClass = jni_env->NewObject(cls_JavaClass, mid_JavaClass);     
  // return object with a global reference
  return jni_env->NewGlobalRef(obj_JavaClass);                      
} 
```

这个解释来自[这个信息页面](http://docs.unity3d.com/Documentation/Manual/PluginsForAndroid.html)，其中也写了一些例子。你应该看看这里！[这](http://docs.unity3d.com/Documentation/Manual/Plugins.html#AndroidPlugins)可能也值得一读。

# mysql - “org.hibernate.ObjectNotFoundException：不存在具有给定标识符的行”但它确实存在

> ID：15855986
> 
> 赞同：0
> 
> 时间：2013-04-06T21:02:22.337
> 
> 标签：mysql, spring, hibernate

我正在为我的网络服务使用休眠。

我可以列出所有记录，但无法仅列出一条。

该表包含：

```
ID (VARCHAR)                      VALUE(BIT)
celiac                               1
rate                                 1
suggestions                          0 
```

显示的错误是：

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.hibernate.ObjectNotFoundException: No row with the given identifier exists: [com.pfc.restaurante.models.Device#id="xxxxxx"]
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

主要代码：

```
 @JsonAutoDetect
    @Entity
    @Table(name = "SETTINGS")
    public class Settings implements Serializable{
        @Id
        @Column(name="ID")
        private String id;

        @Column(name="VALUE", nullable=false)
        private boolean value;
    (...)
    }
    //////////////////7
   @Controller
   @RequestMapping("/settingsService")
   public class SettingsServiceController {

    @Autowired
    SettingsService settingsService;

        @RequestMapping(value = "/{id}", method = RequestMethod.GET)
    public @ResponseBody Settings find(@PathVariable("id") String id){
        return settingsService.find(id);
    }
          (...)
} 
```

我已经阅读过，这可能是因为数据库与我的实体不一致（一些 nullable = true 时不应该），但我已经检查过了，没有这样的事情。

有人可以帮帮我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T02:40:05.613

您的错误涉及一个名为“设备”的实体，但您的代码显示了一个实体“设置”。他们是一样的吗？

我仅在 2 种情况下看到此错误：

1.  数据库中不存在主要实体，使用 Session.load()。使用 Session.get() 并检查 null 。

2.  破裂的关系。考虑一下：EntityA 拥有与 EntityB 的关系。EntityB 被删除，而 EntityA 中的 FK 保持不变。因此，每当 HB 尝试加载链接 AB 时，就会发生错误。这可能在运行正常搜索时甚至在保存/刷新 EntityA 时发生（HB 也需要刷新链接）。

# php - php mysql从日期feald查找超过一天的行

> ID：15855993
> 
> 赞同：0
> 
> 时间：2013-04-06T21:02:37.763
> 
> 标签：php, mysql, database, time

应该是这样的：

1.  在数据库中搜索超过一天的上传。
2.  输出列表中上传的 id。

这是我到目前为止所拥有的：

```
<?php
include 'config.php';
$connect = mysql_connect(DB_HOST, DB_USER, DB_PASS);
mysql_select_db(DB_NAME);

$timestamp = strtotime("-1 days");
$efined = mysql_query("SELECT * FROM uploads WHERE timestamp < '$timestamp'");
$efound = mysql_query($efined);
$enum = mysql_numrows($efound);
$ecount = 0;
echo $enum.'records were found.';
while ($ecount < $enum) {
    $euid = mysql_result($efound,$ecount,"uid");
    echo $euid.'<br>';
    $ecount++;
}
mysql_close($connect);
?> 
```

目前，当有 3 天的记录时，这不会输出任何内容。我将如何指定日期格式？在我的数据库中，它看起来像这样：2013-04-02。谢谢你的帮助，乔希。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T21:09:39.067

这个

```
 $enum=mysql_numrows($efound); 
```

应该

```
 $enum=mysql_num_rows($efound); 
```

编辑。

试试你的sql

```
 where  timestamp < date('now', '-1 days') 
```

编辑：

你正在定义两个`mysql_query`

改变这个

```
 $efined = mysql_query("SELECT * FROM uploads WHERE timestamp < '$timestamp'"); 
```

至

```
 $efined = "SELECT * FROM uploads WHERE timestamp < '$timestamp'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T21:11:49.873

你的错误...

```
$efined = mysql_query("SELECT * FROM uploads WHERE timestamp < '$timestamp'");
$efound=mysql_query($efined);
$enum=mysql_numrows($efound); 
```

必须只有一个查询和错误的 num_rows 名称...

```
$sql= "SELECT * FROM uploads WHERE timestamp < '$timestamp'";
$efound = mysql_query($sql);
$enum = mysql_num_rows($efound); 
```

PS 旧的 myslq 函数支持在 PHP 5.4 结束。开始使用 myslqi 或 PDO mysql 对您有好处！

# ios - 搜索栏正常工作，但不显示任何结果

> ID：15855996
> 
> 赞同：3
> 
> 时间：2013-04-06T21:02:48.560
> 
> 标签：ios, uisearchbar, is-empty

我在我的项目中添加了一个搜索栏，效果很好。您可以搜索（表视图的）对象，并且关系也有效。但搜索显示不显示结果名称。

例如：我没有以“x”开头的对象>>>所以没有结果（这是正确的）：

![](https://i.stack.imgur.com/t6eRF.png)

但是一个对象以“b”开头，但是虽然我可以单击它并没有显示名称，但它正确显示了下一个视图（关系）：

![](https://i.stack.imgur.com/Id2Ad.png)

也许这是由于我的代码引起的：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
static NSString *simpleTableIdentifier = @"CarCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
}

if (tableView == self.searchDisplayController.searchResultsTableView) {

    Car *search = [searchResults objectAtIndex:indexPath.row];
    UILabel *carNameLabel = (UILabel *)[cell viewWithTag:101];
    carNameLabel.text = search.name; 
```

我不知道为什么这不起作用，这对我来说似乎很奇怪。如果有人可以帮助我，那就太好了。

**更新：完整方法**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
static NSString *simpleTableIdentifier = @"CarCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
}

if (tableView == self.searchDisplayController.searchResultsTableView) {

     Car *search = [searchResults objectAtIndex:indexPath.row];
    UILabel *carNameLabel = (UILabel *)[cell viewWithTag:101];
    carNameLabel.text = search.name;

} else {
    Car *car = [cars objectAtIndex:indexPath.row];
    UIImageView *carImageView = (UIImageView *)[cell viewWithTag:100];
    carImageView.image = [UIImage imageNamed:car.thumbnail];

    UILabel *carNameLabel = (UILabel *)[cell viewWithTag:101];
    carNameLabel.text = car.name;

    UILabel *carSpeedLabel = (UILabel *)[cell viewWithTag:102];
    carSpeedLabel.text = car.carSpeed;

}

return cell; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:20:40.877

如果更新的代码是整个`tableView:cellForRowAtIndexPath:`方法，那么您没有将`carImageView`、`carNameLabel`和`carSpeedLabel`视图添加到您的单元格中。

在初始化新单元格时，您需要添加和配置这些子视图，包括使用适当的标签。您应该将视图添加到`cell.contentView`然后用于`[cell.contentView viewWithTag:X]`检索它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T22:22:24.463

您正在尝试获取`UILabel`按值设置的 s `tag`，但您使用的是 stock `UITableViewCell`。尝试以下操作：

```
if (tableView == self.searchDisplayController.searchResultsTableView) {
    Car *search = [searchResults objectAtIndex:indexPath.row];
    cell.textLabel.text = search.name;
} else {
    Car *car = [cars objectAtIndex:indexPath.row];
    cell.imageView.image = [UIImage imageNamed:car.thumbnail];

    cell.textLabel.text = car.name;
    cell.detailTextLabel.text = car.carSpeed;
} 
```

如果您不想使用`UIView`内置于 normal 中的标准 s，则`UITableViewCell`必须在创建新单元格的块中创建并添加自定义视图（并设置其`tag`属性）。