# StackOverflow 问答 15761000-15761999

# python - 如何计算Python中稀疏直方图之间的差异

> ID：15761001
> 
> 赞同：3
> 
> 时间：2013-04-02T09:48:00.697
> 
> 标签：python, histogram

我正在使用 3D 直方图来比较从视频序列中拍摄的两幅图像中的超像素区域。基于直方图阈值，我想将区域分类为相似或不相似。我使用卡方距离来比较两个直方图。但我看到卡方距离应该只用于密集的直方图。我的直方图很稀疏，有很多包含零条目的 bin。你能建议我在 Python 中比较这些直方图的最佳方法吗？

# r - 在 R 中创建新包时安装其他包

> ID：15761004
> 
> 赞同：0
> 
> 时间：2013-04-02T09:48:14.037
> 
> 标签：r, installation, package

我创建了一个名为`myPackage`. 在那个包中，我使用了其他包，例如`RJSONIO`、和。如果之前没有安装，我想在安装时安装所有这些包。`stringr``RSQLite``Rcpp``myPackage`

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:50:19.673

[您可以在说明](http://cran.r-project.org/doc/manuals/R-exts.html)文件的`DEPENDS`部分中指定软件包列表。从链接的文档文件

> 'Depends' 字段给出了这个包所依赖的包名的逗号分隔列表。包名后面可以有一个可选的括号中的注释。注释应包含比较运算符、空格和有效的版本号。如果您的包依赖于某个版本的 R，您也可以使用特殊的包名称“R”——例如，如果该包仅适用于 R 版本 2.11.0 或更高版本，请在其中包含“R (>= 2.11.0)” “取决于”字段。您还可以要求 R-devel 或 R-patched 的某个 SVN 版本，例如“R (>= 2.14.0), R (>= r56550)”需要比 2011 年 7 月下旬的 R-devel 晚的版本（包括发布2.14.0 版本）。库和 R 包检查工具都使用此字段：因此，使用不正确的语法或滥用“Depends”字段来评论可能需要的其他软件是错误的。其他依赖项（R 系统外部）应列在“SystemRequirements”字段中，可能会在单独的 README 文件中放大。R INSTALL 工具检查所使用的 R 版本是否足够新，可以安装包，并且指定的包列表将在当前包之前附加（在检查版本要求之后），无论是在调用库时还是在准备时用于安装期间的延迟加载。

还有其他相关部分，例如`IMPORTS`和`SUGGESTS`- 有关详细信息，请参阅文档。

查看 r-forge 上的一些 R-packages 以获得一个想法。

# android - 在弹出窗口中显示 pdf 文件

> ID：15761008
> 
> 赞同：0
> 
> 时间：2013-04-02T09:48:35.490
> 
> 标签：android, pdf, popup

我正在开发一个 android 应用程序。我需要在弹出窗口中显示我的 pdf 文件（仅包含一页）。我正在从 popup 开始新活动。我在 manifest.xml 中将其主题更改为：

```
 <activity
        android:name="com.example.myapp.Label"
        android:label="@string/title_activity_label"
        android:theme="@android:style/Theme.Dialog" > 
    </activity> 
```

我的 Label.java 的代码是：

```
public class Label extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Bundle b=getIntent().getExtras();

    String pdfurl=b.getString("url");
    Boolean dilg=b.getBoolean("isDialog");

    final String googleDocsUrl = "http://docs.google.com/viewer?url=";

    WebView mWebView=new WebView(Label.this);

   // mWebView.getSettings().setJavaScriptEnabled(true);
    WebSettings webSettings = mWebView.getSettings();
    webSettings.setPluginState(PluginState.ON);

    mWebView.setWebViewClient(new WebViewClient() {
        public boolean shouldOverrideUrlLoading(WebView view, String url){

            view.loadUrl(url);
            return false; // then it is not handled by default action
       }
    });

    mWebView.loadUrl((googleDocsUrl + pdfurl));

    setContentView(mWebView);
}
} 
```

我的安卓版本是：4.2

它在弹出窗口中打开新活动，但没有打开 PDF。我的代码有什么错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:58:03.067

您需要使用 webview 显示自定义对话框。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android" 
android:layout_width="wrap_content"
android:layout_height="wrap_content"
>
<WebView
android:id="@+id/webview"
android:scrollbars="vertical"
android:scrollbarAlwaysDrawVerticalTrack="true"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_centerInParent="true" /> 
```

显示一个对话框。

```
 Dialog dialog = new Dialog(Activity.this);
    dialog.setContentView(R.layout.web_dialog)
    WebView wb = (WebView) dialog.findViewById(R.id.webview);
    wb.getSettings().setJavaScriptEnabled(true);
    WebSettings webSettings = wv.getSettings();
    webSettings.setPluginState(PluginState.ON);
    wb.setWebViewClient(new WebViewClient() {
                                            public boolean shouldOverrideUrlLoading(WebView view, String url){

                                                view.loadUrl(image_urlpdf);
                                                return false; // then it is not handled by default action
                                           }
                                        });

    wb.loadUrl((googleDocsUrl + image_urlpdf));
    dialog.setCancelable(true);
    dialog.setTitle("WebView");
    dialog.show(); 
```

# java - 如何在 google appengine 中实现关闭挂钩处理程序

> ID：15761011
> 
> 赞同：3
> 
> 时间：2013-04-02T09:48:40.073
> 
> 标签：java, google-app-engine

如何在 google appengine 中实现关闭挂钩处理程序。我在这里不理解他们的文档[https://developers.google.com/appengine/docs/java/backends/overview#Shutdown](https://developers.google.com/appengine/docs/java/backends/overview#Shutdown)。我需要的是，当后端由于任何原因停止时，我需要在代码中得到通知。

```
this is my code
try{        
    while (haveMoreWork() &&
        !LifecycleManager.getInstance().isShuttingDown()) {
            process(); // this is my function to read all the data.if it fails because of termination.i need to be notified.
    }catch(Exception e){
        log.log(Level.SEVERE, e.getMessage(), e);
        log.severe("error occured"+e);
        log.info("failed ");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-05T09:57:32.177

您需要使用钩子而不是状态报告：

```
LifecycleManager.getInstance().setShutdownHook(new ShutdownHook() {
  public void shutdown() {
    // code
  }
}); 
```

# java - JTextArea - 如何添加代码/语法突出显示？

> ID：15761015
> 
> 赞同：-1
> 
> 时间：2013-04-02T09:48:52.337
> 
> 标签：java, swing, syntax-highlighting, jtextarea

我正在用 java 开发一个应用程序，一个简单的文本编辑器。我想要做的是添加语法高亮，所以它会为java（公共，静态，无效，int，float）着色。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:52:01.130

你可以看看这个旧的讨论，但这听起来很棘手。看看[这个](http://www.linuxquestions.org/questions/programming-9/java-jtextarea-and-syntax-highlighting-417575/)。但我不知道 JTextArea 是否是您正在寻找的东西，请阅读 JTextPane 或 JEditorPane 的一些文档。您可能想要使用它们。

# php - PHP - 执行长脚本时可能遇到的障碍

> ID：15761018
> 
> 赞同：5
> 
> 时间：2013-04-02T09:49:06.390
> 
> 标签：php, loops, memory, foreach, ini

我在一个函数中运行了一个很长的循环，但没有完成所有最终的迭代并停止而不给出任何错误：

```
function my_function(){

    foreach (range(100,999) as $art_id){ 

    $current++;//see bottom flush functions...
    outputProgress($current, $art_id );//see bottom flush functions...

// do a lot of stuff on remote URL...
    // including download images , 
    // scraping HTMl etc ..

    }
} 
```

我正在使用一些输出进度和刷新来跟踪进度

```
function outputProgress($current, $total) {
    // echo "<span style='background:red;font-size:1.5em;color:#fff;'>" . round($current / $total * 100) . "% </span>";
    echo "<span style='background:red;font-size:1.5em;color:#fff;'>" . $current .'/'. $total  . "% </span>";
    myFlush();
    sleep(1);
} 
```

和

```
function myFlush() {
    echo(str_repeat(' ', 256));
    if (@ob_get_contents()) {
        @ob_end_flush();
    }
    flush();
} 
```

（不要介意百分比计算，它现在被禁用，只显示迭代的 ID）

我注意到大部分时间我都在执行循环，它会在 20-25 次迭代后停止。有时只有 10 个。

我的第一个嫌疑人是`time limit`, 和`max_execution time`，所以我补充说：

```
set_time_limit(99999);
ini_set('max_execution_time', 99999);

function my_function(){

    foreach (range(410,499) as $art_id){ // done 500-600

    set_time_limit(99999);
    ini_set('max_execution_time', 99999);

    // do a lot of stuff on remote URL...
    // including download images , 
    // scraping HTMl etc ..
    }
} 
```

正如你所看到的，我已经添加了这些`INSIDE`和`OUTSIDE`函数本身，以防万一。

但这并没有多大帮助，循环仍然停止。我的下一个嫌疑人是`Memory limit`，所以我补充说：

```
ini_set('memory_limit','128M'); 
```

由于我正在研究 wp，我也尝试过

```
define('WP_MEMORY_LIMIT', '128M'); 
```

但无济于事。经过少量迭代后，scipt 仍然停止。

*   **这种行为的其他可能原因是什么，以及可能的补救措施？**

请注意 - 脚本没有给出任何错误，它只是在某个循环处停止。

**编辑我**

我已将脚本粘贴在[这里](http://pastebin.com/nSQhVx1h) 。它实际上是[simplehtmldom](http://simplehtmldom.sourceforge.net/) lib 包含的示例中稍微修改的 scrap_slashdot() 函数。

它被修改为插入 wordpress 帖子，同时还下载图像并附加它们。

**EDIT II** 使用@Allendar 评论`echo ini_get('memory_limit');`似乎可行，并且设置为 128M ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:56:16.833

我加快了`usleep(50000);`测试速度。此代码在 PHP 上需要一秒钟的时间才能完成，`5.4`并且不会导致内存泄漏：

```
ini_set('memory_limit', '32M'); // Force back to default X/W/L/M/AMP

function my_function(){
    $current = 0;

    foreach (range(100,999) as $art_id){ 
        $current++;
        outputProgress($current, $art_id );
    }
}

function outputProgress($current, $total) {
    echo "<span style='background:red;font-size:1.5em;color:#fff;'>" . $current .'/'. $total  . "% </span>";
    myFlush();
    usleep(50000);
}

function myFlush() {
    echo(str_repeat(' ', 256));
    if (@ob_get_contents()) {
        @ob_end_flush();
    }
    flush();
}

my_function();

echo memory_get_usage(); 
```

我添加`$current = 0;`了取消 Xdebug 给出的警告。

内存使用仅输出 282304 字节（约 275,69 千字节）。

在这种情况下，每个周期等待 1 秒可能会导致脚本在执行时中止。

```
ini_set('max_execution_time', 0); 
```

..会解决这个问题，但不推荐；）

如果您仍然发现脚本突然停止，那么它确实必须在您有评论的部分，您编写的有代码。该代码在 PHP 守护程序的有效负载上可能足够繁重而无法中止。除此之外，还有一些主机（如果脚本在线）会阻止您设置 ini 值，甚至可能会在 PHP 进程“僵尸”时杀死它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:10:15.507

首先，这不是“长”脚本，我一直在使用数组 - 实际上 16 个数组都有超过 650 个索引（= 14 X 650 = 9100 个索引，如果我计算错误，则为 nvm）。它在几秒钟内加载，所以它似乎没有问题。我敢肯定你做错了什么。它工作正常（如果我知道正确的话）[[（在线测试，在 php 5 上）]](http://writecodeonline.com/php) ]，即使没有`ini_set();`（被网站禁用）并且内存使用量为 63072（以字节为单位 ~ 63kbs ~ 0.063mb > 128mb）

**并**想告诉你，你从哪里设置的`$current`？您`my_function()`没有参数，我还建议您通过以下方式打开错误报告
`error_reporting(E_ALL); ini_set('display_errors', '1');`

您使用的在线编译器应该有问题，尝试我使用的一个或下载apache服务器，您也可以尝试一些免费的主机。

# html - 功能：照片标记作为 html 代码的一部分

> ID：15761019
> 
> 赞同：1
> 
> 时间：2013-04-02T09:49:09.323
> 
> 标签：html, image, tags

目前，在 html 中，对于图像，我们有如下属性：[alt,align,border,crossorigin,height,hspace,ismap,longdesc,src,usemap,vspace,width]。
来源：[HTML img 标签](http://www.w3schools.com/tags/tag_img.asp#gsc.tab=0)。
我正在考虑在 html 级支持本身中嵌入照片标记功能。
例如，目前，在 Facebook 网站的上下文中，可以标记图像。
如果在 facebook 之外有数以万计的图像并且需要为照片添加标签怎么办？
任何人都可以分享从这个方向开始的指针吗？
这个想法是在我浏览此链接时产生的：[Paul Graham 的 76 个强大思想，](http://www.rosshudgens.com/thoughts-from-paul-graham/)我将鼠标悬停在链接中的第一张图片上。
如果您将鼠标悬停在任何脸上，它会显示：Paul Graham。
但我很想知道，同一张照片中的其他人是谁。
截至目前，我不知道如何开始。任何人都可以分享他们的想法吗？
谢谢。

# c++ - C++ 自己函数的好“名称”

> ID：15761020
> 
> 赞同：0
> 
> 时间：2013-04-02T09:49:16.693
> 
> 标签：c++, class

我有一门 C++ 课程（VS2010）。

此类具有公共功能，例如“ToString”。

有时，我需要从类中调用 ToString。

例如：

```
void::ConvertToLowerCase()
{
    wstring ws;
    ws = ToString();
    ws = lower(ws);
    m_wsText= ws
} 
```

例如，我想知道是否可以在 ToString 行中添加“所有者”

```
ws = self.ToString(); 
```

或者

```
ws = me.ToString(); 
```

我尝试了所有我能想象到的名字，但我没有找到任何可行的名字。拥有这样的所有者名称有助于我找出函数所在的位置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T09:50:19.953

在 C++ 中，您可以通过以下方式执行此操作`this`：

```
ws = this->ToString(); //this is a pointer 
```

但在这种情况下调用，这相当于你已经拥有的：

```
ws = ToString(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T09:51:16.710

`this`指针：

```
ws = this->ToString(); 
```

# forms - 如何制作跨域帖子（从 googledrive 到 google docs 表单）？

> ID：15761021
> 
> 赞同：1
> 
> 时间：2013-04-02T09:49:17.937
> 
> 标签：forms, google-docs, google-drive-api

我在谷歌文档中创建了一个新表单，然后在谷歌驱动器中托管了一个 html。帖子位置的链接是：docs.google.com，托管的html的链接是googledrive.com。

我如何让彼此交流？

# vb.net - 带有计时器的控制台应用程序未运行

> ID：15761022
> 
> 赞同：1
> 
> 时间：2013-04-02T09:49:20.153
> 
> 标签：vb.net, visual-studio, visual-studio-2012, timer, console-application

我首先在 WinForm 项目中执行此操作，现在我已将应用程序类型更改为“控制台应用程序”，删除了 form1.vb，将启动对象更改为此“Module1.vb”但现在我无法运行应用程序。应用程序运行良好，但计时器滴答未做任何事情，代码完全相同，我只对**sub main/form1_load**名称进行了一次更改

我做错了什么？

PS：我已经测试了错误是否在 lock 方法的条件下并且一切都很好，问题出在 ticker 事件上，但我不知道为什么。

```
#Region " Vars "

    Dim Running As Boolean = False
    Dim Errors As Boolean = False

    Dim Executable_Name As String = Nothing

    Dim Toogle_Key As System.Windows.Forms.Keys = Nothing
    Dim WithEvents Toogle_Key_Global As Shortcut = Nothing

    Dim Executable_Timer As New Timer
    Dim Lock_Timer As New Timer
    Dim Lock_Interval As Int32 = 10
    Dim Lock_Sleep As Int32 = Get_Milliseconds(3)

    Dim Screen_Center_X As Int16 = (Screen.PrimaryScreen.Bounds.Width / 2)
    Dim Screen_Center_Y As Int16 = (Screen.PrimaryScreen.Bounds.Height / 2)

#End Region

    ' Load
Sub main()
    Pass_Args()
    Sleep()
    Lock()
End Sub

    ' Lock
Private Sub Lock()
    If Process_Is_Running(Executable_Name) Then
        AddHandler Lock_Timer.Tick, AddressOf Lock_Tick
        AddHandler Executable_Timer.Tick, AddressOf Executable_Tick
        Lock_Timer.Interval = Lock_Interval
        Lock_Timer.Start()
        Executable_Timer.Start()
        Running = True
    Else
        Terminate()
    End If
End Sub

' Lock Tick
Private Sub Lock_Tick()
    Console.WriteLine("test")
    If Running Then Cursor.Position = New Point(Screen_Center_X, Screen_Center_Y)
End Sub 
```

> 更新

我在 MSDN 的示例中进行了这些更改：

```
Dim Executable_Timer As New System.Timers.Timer
Dim Lock_Timer As New System.Timers.Timer

AddHandler Lock_Timer.Elapsed, AddressOf Lock_Tick
AddHandler Executable_Timer.Elapsed, AddressOf Executable_Tick 
```

但是滴答声/已逝去的仍然没有做任何事情......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:54:02.203

来自 MSDN

[Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)

> 实现一个以用户定义的时间间隔引发事件的计时器。此计时器针对在 Windows 窗体应用程序中的使用进行了优化，并且必须在窗口中使用。

您需要一个[System.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)
当然这需要不同的事件处理（示例取自 MSDN）

```
 ' Create a timer with a ten second interval.
    Dim aTimer = new System.Timers.Timer(10000)

    ' Hook up the Elapsed event for the timer.
    AddHandler aTimer.Elapsed, AddressOf OnTimedEvent

    ....

    Private Shared Sub OnTimedEvent(source As Object, e As ElapsedEventArgs)
         Console.WriteLine("The Elapsed event was raised at {0}", e.SignalTime)
    End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-31T14:08:32.627

`Windows.Forms.Timer`如果您`Application.Run()`在`main()`.

如果您使用任何屏幕外对象，这种计时器在某些控制台应用程序中可能很有用`Windows.Forms`- 即：对于屏幕外渲染 - 这些对象不能简单地访问，`System.Timer`因为它在单独的线程上触发（而不是在`Windows.Forms`创建对象的线程上） ）。

否则一定要使用`System.Timers.Timer`or`System.Threading.Timer`

# javascript - Tablesorter：排序后更改ID

> ID：15761030
> 
> 赞同：-1
> 
> 时间：2013-04-02T09:50:04.713
> 
> 标签：javascript, asp.net, jquery-ui

在我的表中，我有一个 [object HTMLInputElement]，我想更改此元素的 id。但这不起作用：

`函数绑定函数（）{

```
 $('table[id*="tbl_main"]').tablesorter();
        $('table[id*="tbl_main"]').bind("sortEnd",function() { 
            var table = document.getElementById('<%=tbl_main.ClientID%>');
            for (var i = 0, row; row = table.rows[i]; i++) {
                var e = row.cells[0].firstChild;
                e.id= '5';           
            }
        }); 
    };` 
```

谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:52:06.243

如果没有看到相关的标记，*很难*提供帮助。但我的猜测是单元格的第一个孩子是文本节点而不是元素。DOM`firstChild`属性为您提供第一个**node**，它可能是也可能不是元素。例如，如果您的表格行如下所示：

```
<tr><td>Foo</td></tr> 
```

...then`row.cells[0].firstChild`是一个包含 text 的文本节点`"Foo"`。

另请注意，引用的代码将创建无效的 DOM 结构：您**不能**`id`在文档中的多个元素上使用相同的结构。您正在尝试将`id`值赋予`"5"`每行的第一个子元素。`id`值**必须**是唯一的。

此外，看起来您正在使用 jQuery（尽管您没有标记问题`jquery`）。我只想提一下，虽然它是 HTML`"5"`的有效值，但它**不是**CSS的有效值，而且由于 jQuery 使用 CSS 样式的选择器，因此在jQuery 中使用无效的 CSS 值是有问题的。`id`**`id``id`**

# java - PoolingClientConnectionManager 性能问题

> ID：15761035
> 
> 赞同：2
> 
> 时间：2013-04-02T09:50:18.637
> 
> 标签：java, performance, httpclient, instance, connection-pooling

我有以下使用 a 的代码`PoolingClientConnectionManager`：

```
public static void main(String[] args) {

    int NoOfSimultaneousRequest = 1000;
    int poolsize =1000;

    try{

        if (poolsize>0){

            mgr = new PoolingClientConnectionManager();
            mgr.setMaxTotal(poolsize);
            mgr.setDefaultMaxPerRoute(poolsize);
            httpclient  = new DefaultHttpClient(mgr); 
        }

        Thread [] tr = new Thread[NoOfSimultaneousRequest];
        for(int i=0;i<NoOfSimultaneousRequest;i++){
            MultipleThreadsTest multiTest = new MultipleThreadsTest();

            Thread t = new Thread(multiTest);
            tr[i] = new Thread(multiTest);
        }       

        for(int i=0;i<NoOfSimultaneousRequest;i++){
            tr[i].start();
        }

        for(int i=0;i<NoOfSimultaneousRequest;i++){
            tr[i].join();
        }

    }catch (Exception e){
        e.printStackTrace();
    }finally{

        if (mgr!=null){
            mgr.shutdown();
        }

        if (httpclient!=null){
            httpclient.getConnectionManager().shutdown();
        }
    }
}

public void run() {
    if (mgr==null){ //if no connection manager then create multiple instances of defaulthttpClient
        HttpClient  hc  = new DefaultHttpClient();                  
        response = invokeWebService(hc,"http://urltoPost") ;

    }else{ //if connection manager is used then use only one instance of httpclient
        response = invokeWebService(httpclient,"http://urltoPost") ;
    }   
}   

private static String invokeWebService(HttpClient httpClient,String url){
    HttpPost httpPost = new HttpPost(new URI(url));
    try{
        String response  = httpClient.execute(httpPost,new BasicResponseHandler());
        return response;
    }catch(Exception e){

    }finally{
        if (httpPost != null) {
            httpPost.releaseConnection();
        }
    }
} 
```

我的问题是，当我关闭池（通过设置<= 0）时，与池打开（ > 0）`poolSize`相比，代码的执行速度要快得多。`poolSize`这两个版本之间的唯一区别是，当使用池时，只有一个`HttpClient`created 实例（如 Apache 推荐的那样），而当池关闭时，`HttpClient`会创建多个实例。当我使用 HTTP 连接池时，代码应该执行得更好。但这并没有发生。你看到我使用连接管理器有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-26T20:09:38.343

您不能基于此做出任何有效且受支持的诊断。为了找出您的应用程序运行得更快/更慢的原因，您需要收集信息，为此您需要进行性能测试。否则你只会在黑暗中射击。

对于您的案例，我将在您的测试期间开始测量整体系统性能，确保两个测试案例都使用相同类型的工作负载。

首先，整体系统性能是指 CPU 和内存上的利用率、饱和度和错误。您需要找出您的代码执行时间在哪里，并从那里开始更深入地挖掘。

# jplayer - 捕捉 jPlayer 全屏事件

> ID：15761038
> 
> 赞同：0
> 
> 时间：2013-04-02T09:50:22.853
> 
> 标签：jplayer

我正在尝试使用以下代码捕获 jPlayer 全屏事件：

```
mainPlayer.bind($.jPlayer.event.resize, function(event) {
    alert("size changed");
}); 
```

但是，当我按下全屏按钮或按下 ESC 退出全屏模式时，都不会触发该事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T16:18:03.070

检查您的**mainPlayer**变量并确保它引用了 jQuery jPlayer 对象。要进行故障排除，请尝试：

```
$('#yourJPlayerID').bind($.jPlayer.event.resize, function(event) {
    alert("size changed");
}); 
```

# javascript - 在 HTML 中使用 Web 服务

> ID：15761044
> 
> 赞同：5
> 
> 时间：2013-04-02T09:50:45.580
> 
> 标签：javascript, html, web-services

我创建了一个 Web 服务并保存了它的 .wsdl 文件。我想通过提供它的 URL 在我的 HTML 文件中使用这个服务。

谁能告诉我如何在 HTML 中调用 URL 并使用它？就像在这里做的一样。 [http://www.codeproject.com/Articles/14610/Calling-Web-Services-from-HTML-Pages-using-JavaScr/](http://www.codeproject.com/Articles/14610/Calling-Web-Services-from-HTML-Pages-using-JavaScr/)

唯一的区别是我的 Web 服务没有像“asmx?wsdl”这样的扩展名。这有什么区别吗。我也遵循了该教程，但它没有产生任何输出。

谢谢你////

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T09:58:49.413

您绝对应该熟悉[AJAX](http://www.w3schools.com/ajax/)。您可以使用 jQuery 提供的 ajax 功能。这是最简单的方法，我想。看看[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

你可以像这样使用它

```
$.ajax({
  url: "urltoyourservice.xml"
  dataType: "xml",
}).done(function(data) {
  console.log(data);
}); 
```

HTML 本身不能使用 Web 服务。绝对需要Javascript。您的 WSDL 文件的存在看起来您可能正在使用 XML 格式作为 Web 服务的返回。您必须在 javascript 中处理 XML。因此，请看一下[Tim Downs](https://stackoverflow.com/questions/649614/xml-parsing-of-a-variable-string-in-javascript/8412989#8412989)的解释。

但请记住，您的 Web 服务 URL 必须在与您的消费 HTML 文件相同的域下可用。否则，您将收到[跨站点脚本错误](http://en.wikipedia.org/wiki/Cross-site_scripting)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:06:36.593

是的，您可以使用 ajax，但请记住，您将无法跨域发出请求。消费网络服务应该在服务器端完成。

要进一步了解这方面的知识，请阅读[如何从 javascript 调用 Web 服务](https://stackoverflow.com/questions/118565/how-do-i-call-a-web-service-from-javascript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T10:43:48.453

```
function submit_form(){
        var username=$("#username").val();
        var password=$("#password").val(); 
                var data = { loginName: username, password:password };
                $.ajax( {
                    type: "POST",
                    url:"Paste ur service address here",
                    data: JSON.stringify(data),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function(data){
                        var value = data.d;
                        if(value.UserID != 0){
                            alert.html('success');
                        }
                    },
                    error: function (e) {
                    }
                });  
        } 
```

试试这个它会有所帮助

# validation - gwt 验证问题

> ID：15761045
> 
> 赞同：3
> 
> 时间：2013-04-02T09:50:48.453
> 
> 标签：validation, gwt

我正在尝试使用新*的验证 API（1.1）*和 Hibernate 验证器（5.0）来使用 gwt 验证*模块（jsr303 ），但是，显然得到了*

 *```
ERROR: Errors in 'file:/C:/projects/qiwi-digest/webui/trunk/src/main/java/ru/befree/qiwi/client/gin/SampleValidatorFactory.java'
  ERROR: Line 27: No source code is available for type javax.validation.ParameterNameProvider; did you forget to inherit a required module?
  ERROR: Line 27: The method getParameterNameProvider() of type SampleValidatorFactory must override or implement a supertype method
  ERROR: Line 28: No source code is available for type org.hibernate.validator.internal.engine.DefaultParameterNameProvider; did you forget to inherit a required module?
  ERROR: Line 32: The method close() of type SampleValidatorFactory must override or implement a supertype method 
```

即 GWT 当前不支持 Validation API 1.1。

任何解决方法的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:16:51.667

您可能在使用 Hibernate 5 方面走在了前面！！！！

GWT 仅支持 hibernate 4.1.0.Final 。[这是Validation](https://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/validation)的 GWT 示例中的 maven pom.xml 的片段。

```
 <!-- Hibernate bean validation binary for the server -->

    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-validator</artifactId>
      <version>4.1.0.Final</version>
      <exclusions>
        <exclusion>
          <groupId>javax.xml.bind</groupId>
          <artifactId>jaxb-api</artifactId>
        </exclusion>
        <exclusion>
          <groupId>com.sun.xml.bind</groupId>
          <artifactId>jaxb-impl</artifactId>
        </exclusion>
      </exclusions>
    </dependency>

    <!-- Hibernate bean validation source for the GWT client -->

    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-validator</artifactId>
      <version>4.1.0.Final</version>
      <classifier>sources</classifier>
      <exclusions>
        <exclusion>
          <groupId>javax.xml.bind</groupId>
          <artifactId>jaxb-api</artifactId>
        </exclusion>
        <exclusion>
          <groupId>com.sun.xml.bind</groupId>
          <artifactId>jaxb-impl</artifactId>
        </exclusion>
      </exclusions>
    </dependency> 
```

GWT 已移植休眠验证器代码以与客户端一起使用。你可以在这里找到它 - [https://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/org/hibernate/validator](https://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/org/hibernate/validator)

你可以尝试破解这个来支持hibernate 5和validation-api 1.1 !!!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:10:31.557

您是否在路径中添加了 javax.validation-api 源？如果您使用 maven，您的依赖项应如下所示：

```
<dependency>
  <groupId>javax.validation</groupId>
  <artifactId>validation-api</artifactId>
  <version>1.0.0.GA</version>
  <scope>test</scope>
</dependency>
<dependency>
  <groupId>javax.validation</groupId>
  <artifactId>validation-api</artifactId>
  <version>1.0.0.GA</version>
  <classifier>sources</classifier>
  <scope>test</scope>
</dependency> 
```*

# c# - WPF FlowDocumentScrollViewer/RichTextBox 中的文本换行

> ID：15761046
> 
> 赞同：1
> 
> 时间：2013-04-02T09:50:50.463
> 
> 标签：c#, wpf

如何防止`text wrapping`in a`FlowDocumentScrollViewer`或 in a `RichTextBox`？一个`Textblock`不工作：

```
<TextBlock TextWrapping="NoWrap" Margin="203,12,12,6" Grid.RowSpan="4">
    <FlowDocumentScrollViewer Name="rTB" />
</TextBlock> 
```

`FlowDocument`我在`FlowDocumentScrollViewer`with中加载 a `formated text`。我保存并加载`FlowDocument`到`Database(binary)`. [AvalonEdit](http://www.codeproject.com/Articles/42490/Using-AvalonEdit-WPF-Text-Editor)中有一个示例，但我不明白。这对我来说太复杂了。我不使用 MVVM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:56:37.897

我认为您可以尝试[此处描述](https://stackoverflow.com/questions/1368047/c-wpf-disable-text-wrap-of-richtextbox)的解决方案，尽管其中存在一些问题（RichTextBox 中的水平滚动条将始终可见）。

# css - 使用相对位置将某些东西定位到浏览器的右侧

> ID：15761048
> 
> 赞同：0
> 
> 时间：2013-04-02T09:50:53.047
> 
> 标签：css, position

我必须使用

```
position: relative 
```

为了在溢出的情况下出现滚动条（使用固定位置时滚动条显然不起作用）。

但是通过使用相对，我的内联块将出现在页面中间，并且我无法将它定位在每个屏幕尺寸的右侧 30px 处。有什么解决办法吗？

我现在的代码：

```
#main_wrap 
{
    min-height: 100%;
    background: url(images/content_back.png) repeat-y top left; 
    margin: 0 0 0 240px;
    position: relative;
}

#main
{
    position: relative;
    width: 680px;
    padding: 0 40px 5px 40px;
    font: normal 14px Verdana, Arial, sans-serif;
    line-height: 20px;
    display: inline-block;
    z-index: 2;
} 
```

我可以使用的另一个解决方案是在使用固定位置时可以使用滚动条。

也许是一个愚蠢的问题，但我对这个主题没有那么有经验:) 在此先感谢！

# android - 嵌套 TabHost 内的 ListView

> ID：15761051
> 
> 赞同：0
> 
> 时间：2013-04-02T09:51:02.740
> 
> 标签：android, listview, android-tabhost

我在屏幕底部有 4 个选项卡。第二个选项卡打开一个活动，该活动具有自己的 3-7 个选项卡。所有这些选项卡都显示不同的列表。

我可以导航到列表，但列表视图隐藏了底部选项卡。

如何在另一个 tabhost 的 tabhost 子项中添加 listview ？我不想隐藏任何标签。![所需的屏幕设计](https://i.stack.imgur.com/Ru6yk.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T11:33:34.283

根据您的布局在您的 listView 中制作 layout_marginBottom

# python - 以 10 为基数的 int() 的无效文字：'' 保存修改后的模型表单集时

> ID：15761059
> 
> 赞同：2
> 
> 时间：2013-04-02T09:51:23.057
> 
> 标签：python, django, django-forms

我有一个 modelform formset 允许用户添加空行，通过 AJAX 删除现有行并使用 jQuery sortable 重新排列行。

添加/重新排列都只是在表单上设置值，并保存为`formset.save()`.

添加新行机制生成最后一个现有行的克隆，并生成正确的输入名称，例如：`form-0-id`.

如前所述，删除操作调用 AJAX，然后在成功时从 DOM 中删除该行。

重新排列设置了一个隐藏的权重输入，它是模型的一部分。

按保存后，按顺序发生以下情况：

1.  剥离任何完全空白的行
2.  将 #id_form-TOTAL_FORMS 设置为正确的值
3.  重置每行上每个输入的 name 属性，使它们是连续的，以防止由于删除而导致的间隙。
4.  提交表格。

据我所知，`console.log`上述步骤均按预期执行，但是出现错误的一种情况是：

1.  有5行
2.  将值添加到第 6 行
3.  删除任何预先存在的行
4.  点击保存

我得到`invalid literal for int() with base 10: ''`

具体来说，此错误是从以下位置触发的：

```
lib/python2.7/site-packages/django/db/models/fields/__init__.py in get_prep_value
    return int(value) ...
    Local vars:
        Variable    Value
        self    <django.db.models.fields.AutoField: id>
        value   u'' 
```

我不太明白为什么这会失败，我认为自动字段的全部意义在于设置一个值（如果还没有）。

我也有些困惑，因为整个表单可以很好地添加新行，只要在保存整个表单之前没有发生删除。

表单是否以某种方式记住了不同的输入名称属性并尝试更新现有记录而不是保存新记录？

这是来自失败请求的 POST 数据：

```
Variable    Value
form-INITIAL_FORMS      u'6'
form-TOTAL_FORMS        u'3'
form-MAX_NUM_FORMS      u''
form-0-id               u'38'
form-0-weight           u'0'
form-0-disk_space       u'1'
form-0-price_per_month  u'1'
form-0-embedded_html    u'1'
form-1-id               u'45'
form-1-weight           u'3'
form-1-disk_space       u'2'
form-1-price_per_month  u'2'
form-1-embedded_html    u'2'
form-2-id               u''
form-2-weight           u'6'
form-2-disk_space       u'3'
form-2-price_per_month  u'3'
form-2-embedded_html    u'3' 
```

`form-2-id`因此，尝试设置字段值似乎失败了，而不是让 auto 来完成它的工作。

下面是来自成功提交的 POST 数据，但是我只是加载了表单，添加了一个新行然后保存。

```
Variable            Value
form-INITIAL_FORMS      u'2'
form-TOTAL_FORMS        u'3'
form-MAX_NUM_FORMS      u''
form-0-id               u'38'
form-0-weight           u'0'
form-0-disk_space       u'1'
form-0-price_per_month  u'1'
form-0-embedded_html    u'1'
form-1-id               u'48'
form-1-weight           u'1'
form-1-disk_space       u'2'
form-1-price_per_month  u'2'
form-1-embedded_html    u'2'
form-2-id               u''
form-2-weight           u'2'
form-2-disk_space       u'3'
form-2-price_per_month  u'3'
form-2-embedded_html    u'3' 
```

据我所知，一切都与失败的请求相同，新行的 id 为空白。

**完整回溯**： http: [//pastebin.com/AvegYgJA](http://pastebin.com/AvegYgJA)（对 SO 来说太大了）

**复制和粘贴模式回溯** [http://pastebin.com/9R68M6YX](http://pastebin.com/9R68M6YX)

*解决方案*：

根据下面 Daniel Roseman 的回答，我只需要设置`id_form-INITIAL_FORMS`以匹配更新的行数。在提交表单之前，我没有在删除时减少初始表单，而是在我的 JS 中添加了以下内容：

```
$('#id_form-INITIAL_FORMS').val(this.form.find('span.row-id input[value!=""]').length); 
```

从而永远解决问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:24:18.750

我认为问题在于您的 JS 不会修改`form-INITIAL_FORMS`您删除表单时的值。正因为如此，Django 认为您的新表单实际上是更新，而不是添加，并尝试修改现有的 db 行 - 但当然您有该行的空白 ID。尝试`form-INITIAL_FORMS`在删除中递减。

# mysql - 将单个表拆分为多对多关系

> ID：15761060
> 
> 赞同：0
> 
> 时间：2013-04-02T09:51:24.130
> 
> 标签：mysql, database-design, phpmyadmin, many-to-many, database-normalization

我有一个如下所示的表：

![在此处输入图像描述](https://i.stack.imgur.com/H5nTt.png)

我想将其拆分为 3 个具有 PK-FK 关系的不同表。本质上一个省可以有很多州，一个州可以有很多市。如果可能的话，使用 SQL 查询一次性完成此操作的最佳方法是什么？或者使用 phpmyadmin 之类的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:57:07.673

省份表：

```
Province_ID (PK)
Province_Name 
```

状态表：

```
State_ID (PK)
State_Name
Province_ID (FK)
AreaCode 
```

花旗表：

```
Citi_ID (PK)
Citi_Name
State_ID (FK)
Citi_Code 
```

我认为没有任何工具可以帮助您自动规范化此表。因此，您必须通过代码创建这些表，然后使用 sql 查询将值插入其中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:57:18.443

您可以按如下方式对其进行分区：

`Prov Table with Prov_ID as PK.`

`State Table with State_ID as PK and Prov_ID as FK`

`City Table with City_ID as PK and State_ID as FK and Prov_ID as FK`

# c# - 在 Tap bing 地图控件上添加图钉 - windows phone

> ID：15761064
> 
> 赞同：0
> 
> 时间：2013-04-02T09:51:38.277
> 
> 标签：c#, windows-phone-7, bing-maps

我想问你，当用户点击屏幕时添加图钉是否是好的解决方案？我做到了，当用户点击屏幕时，添加了带有地址的图钉。这是另一种解决方案，如何在不点击的情况下在某个位置添加图钉？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:08:12.530

另一种解决方案可能是使用 Hold 事件而不是点击事件。这样，您将确定用户想要在他们点击的地方做某事。

您可以去[那里](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.maps.controls.map%28v=vs.105%29.aspx)查看有关地图控件的更多信息。

希望有帮助！

# javascript - 对 JavaScript 变量作用域（单级）有点困惑

> ID：15761067
> 
> 赞同：0
> 
> 时间：2013-04-02T09:51:47.820
> 
> 标签：javascript, variables, for-loop, scope

我有两个功能，比方说：

getCustomers() - 获取客户列表 getCustomerDetials() - 获取每个客户的详细信息

我运行`getCustomers()`并且该功能在其自身内部运行`getCustomerDetails()`......显然，我需要列出所有客户及其详细信息。

所以，这里是过程。

`getCustomers()`加载所有客户 ID 的列表并遍历每个客户 ID：

```
for(i = 0; i < array_count; i++); 
```

`getCustomerDetails(id)`对找到的每个客户开火。

`getCustomerDetails`然后运行它自己的内部循环：

```
for(i = 0; i < array_count; i++); 
```

循环遍历每个细节。

问题：我有两个相同的 for 循环从父函数和内部运行的函数运行。

基本上，我的循环“i”变量似乎正在更新父循环“i”变量，但它永远不会完成！

我将内部函数的循环“i”变量更改为 i2，一切都恢复正常。

很抱歉解释了很长，但我只是想明确表示这是正常和预期的结果？还是我的代码有问题？

我已经处理过几种语言（我是一位经验丰富的 PHP 和 AS2 程序员），而且我以前从未遇到过这种冲突……尽管如此，我在 JS 方面并不是那么好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T09:52:46.933

> 我认为在函数内声明的变量保持本地化？

他们是这样; 问题是您**没有**在函数内声明变量。

使用`var`关键字*声明*变量：

```
for (var i = 0; i < array_count; i++) 
```

如果没有这个关键字，您将使用*全局*变量。

* * *

^(这应该包含在您的 JavaScript 书籍中。你用的是哪一个？)

# ios - 调试和发布的区别

> ID：15761068
> 
> 赞同：1
> 
> 时间：2013-04-02T09:51:52.880
> 
> 标签：ios, objective-c, debugging, release, testflight

我有一个运行同步算法的应用程序。

当我在调试模式下构建并运行它（在我的 iPhone 5 上）时，一切正常。

但是，当我将其存档并将其上传到 TestFlight，然后下载并安装到同一个 iPhone 5 时，部分同步不起作用。

它不会崩溃或任何事情，它只是不运行同步的那部分。

愚蠢的是，它是一个没有运行的单个函数中的一行代码。该函数中的其他所有内容都会运行。

我不知道从哪里开始寻找这个。

**编辑**

在 Mindaugas 的帮助下，我确切地找到了为什么以及哪些代码没有运行。

功能是...

```
- (void)uploadData
{
    NSLog(@"pushing photos");
    for (StoredImage *storedImage in self.recordArray) {
        NSURL *url = [self urlForImageUpload:storedImage];

        if (url == nil) {
            continue;
        }

        ImageUploadOperation *uploader = [[OJFImageUploadOperation alloc] init];
        uploader.image = storedImage.image;
        uploader.url = url;
        [self.recordQueue addOperation:uploader];
    }
} 
```

当我将优化级别设置为“最快，最小”时，它似乎弄乱了这个函数的顺序。

当它进入时，我可以看到数组中有一个对象，它进入了循环。但随后它完全跳过第一行`NSURL *url = [self urlForImageUpload:storedImage];`并走到最后。所以上传永远不会真正开始，它会移动到下一个项目。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T10:09:12.467

Release 配置默认使用与 Debug 配置不同的代码优化，因此可以优化和跳过一些代码行

您可以在 Target -> Build Settings -> search for Optimization Level 检查/更改配置

# css - CSS设置绝对位置

> ID：15761075
> 
> 赞同：3
> 
> 时间：2013-04-02T09:52:06.427
> 
> 标签：css, css-position

当我设置`position: absolute`并且`top: 0px`元素实际上并没有绝对定位时，它相对于其父级（使用`position: relative`）定位。

有没有一种简单的方法来设置元素相对于整个文档而不是父级的位置？

**更新**

如果我的元素已经附加到 div 上，我可以这样做`position:relative`吗？在我的情况下，将元素重新附加到身体是一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:53:45.280

如果你希望你的 div 绝对定位到父级而不是简单地将它放在`<body>`标签之间（这里我假设你正在使用`position: relative`for `body`）而不是任何定位的相对子元素内，否则你定位的绝对 div 将定位到该元素的绝对位置，而不是身体（你在这里指的是父母）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:54:48.270

具有 position: absolute 的元素会将自身绝对定位到具有另一种位置样式的第一个父元素。

您需要将元素放在具有位置样式的任何元素之外。如果无论如何都要绝对定位，你也可以把它放在正文 HTML 的末尾。

# udp - 通过以太网向 fpga spartan 3e 发送 UDP 数据包

> ID：15761080
> 
> 赞同：0
> 
> 时间：2013-04-02T09:52:25.663
> 
> 标签：udp, ethernet, fpga, microblaze, spartan

我想向包含 microblaze 的 fpga 发送 UDP 数据包。但是我有一个关于IP地址的问题。fpga的ip地址在哪里可以查到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:04:50.037

您必须为 mac 地址分配一个静态 IP，并在您的 FPGA 代码中使用该 IP 来过滤 n 等，如果您的电路板不在任何网络上，对您的计算机说一对一的以太网，那么只需 VHDL 编码即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:50:54.213

您的 FPGA 本身没有 IP 地址。如果您有评估/原型开发板，通常会有一个带有分配给该板的 MAC 地址的标签。关于 IP 地址处理和 UDP 端口号的一切都取决于您，并且必须作为 FPGA 本身的逻辑或作为 Microblaze 的软件来实现。

# java - 自定义类加载失败并出现 java.lang.IllegalAccessError：预验证类中的类引用解析为意外实现

> ID：15761081
> 
> 赞同：2
> 
> 时间：2013-04-02T09:52:27.540
> 
> 标签：java, android, classloader

我正在尝试根据我的需要调整[http://android-developers.blogspot.de/2011/07/custom-class-loading-in-dalvik.html](http://android-developers.blogspot.de/2011/07/custom-class-loading-in-dalvik.html)中的示例。为此，我设置了 3 个项目：

classloadingtest：标准android应用项目，包含上面链接中MainActivity的源码，稍作调整（将DexClassLoader业务移到名为“AndroidClassLoader”的类中），参考下面的“iface”项目

iface：一个android库项目，只包含一个接口，只有一个函数（“getMessage（）”）返回一个字符串

loadable：一个标准的 android 应用程序项目，还引用了“iface”库，其中仅包含一个实现该非常简单接口的类，并带有一个 custom_rules.txt 文件来调整构建过程：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="BuildLoadableDex" default="debug">
    <target name="-dex" depends="-compile, -post-compile, -obfuscate">
        <echo level="info">Custom -dex target</echo>
        <property name="out.dex.input.absolute.dir" value="${out.classes.absolute.dir}" />
        <dex executable="${dx}"
                output="${intermediate.dex.file}"
                dexedlibs="${out.dexed.absolute.dir}"
                nolocals="@{nolocals}"
                forceJumbo="${dex.force.jumbo}"
                disableDexMerger="${dex.disable.merger}"
                verbose="${verbose}">
            <path path="${out.dex.input.absolute.dir}"/>
        </dex>
    </target>

    <target name="-package" depends="-dex, -package-resources">
        <echo level="info">Custom -package target</echo>
        <jar destfile="${out.absolute.dir}/${ant.project.name}.jar"
            basedir="${out.absolute.dir}"
            includes="${dex.file.name}" />
    </target>
</project> 
```

所以这实际上只是修改了 -dex 目标以从 classes.dex 文件中省略库类（通过 dexdump 验证未显示接口）并更改 -package 目标以输出 jar 文件而不是 apk。

然后我将 loadable.jar 文件复制到 classloadingtest/assets 并构建该 apk 文件。

一切都编译得很好，但是在运行和触发类加载时，我得到以下堆栈跟踪：

```
W/dalvikvm(14393): Class resolved by unexpected DEX: Lloadable/Test;(0x4294b620):0x5a6a7000 ref [Lclassloading/iface/LoadableClass;] Lclassloading/iface/LoadableClass;(0x42912fb8):0x5a4bf000
W/dalvikvm(14393): (Lloadable/Test; had used a different Lclassloading/iface/LoadableClass; during pre-verification)
I/dalvikvm(14393): Failed resolving Lloadable/Test; interface 6 'Lclassloading/iface/LoadableClass;'
W/dalvikvm(14393): Link of class 'Lloadable/Test;' failed
D/AndroidRuntime(14393): Shutting down VM
W/dalvikvm(14393): threadid=1: thread exiting with uncaught exception (group=0x41c622a0)
E/AndroidRuntime(14393): FATAL EXCEPTION: main
E/AndroidRuntime(14393): java.lang.IllegalAccessError: Class ref in pre-verified class resolved to unexpected implementation
E/AndroidRuntime(14393):        at dalvik.system.DexFile.defineClass(Native Method)
E/AndroidRuntime(14393):        at dalvik.system.DexFile.loadClassBinaryName(DexFile.java:211)
E/AndroidRuntime(14393):        at dalvik.system.DexPathList.findClass(DexPathList.java:315)
E/AndroidRuntime(14393):        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:58)
E/AndroidRuntime(14393):        at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
E/AndroidRuntime(14393):        at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
E/AndroidRuntime(14393):        at classloading.loading.AndroidClassLoader.findClass(AndroidClassLoader.java:56)
E/AndroidRuntime(14393):        at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
E/AndroidRuntime(14393):        at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
E/AndroidRuntime(14393):        at classloading.loading.AndroidClassLoader.loadClass(AndroidClassLoader.java:37)
E/AndroidRuntime(14393):        at classloading.ClassLoadingTest$1.onClick(ClassLoadingTest.java:60)
E/AndroidRuntime(14393):        at android.view.View.performClick(View.java:4211)
E/AndroidRuntime(14393):        at android.view.View$PerformClick.run(View.java:17267)
E/AndroidRuntime(14393):        at android.os.Handler.handleCallback(Handler.java:615)
E/AndroidRuntime(14393):        at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(14393):        at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(14393):        at android.app.ActivityThread.main(ActivityThread.java:4898)
E/AndroidRuntime(14393):        at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(14393):        at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(14393):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
E/AndroidRuntime(14393):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
E/AndroidRuntime(14393):        at dalvik.system.NativeStart.main(Native Method) 
```

我确实知道这意味着 LoadableClass 接口“似乎”以某种方式存在两次但存在差异，但我无法理解这是如何发生的，看到 APK（classloadingtest）和 loadable.jar 都使用完全相同的库项目用于编译，因此我不知道如何修复此错误。

请随时请求使用更多代码进行编辑，我只是​​不知道这里有什么用处，也不想粘贴*所有内容*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:10:36.330

愚蠢解决了，我一直在尝试加载旧版本的 loadable.jar。把它留在这里，这样其他人可能会受益，而不是浪费太多时间。

# c# - Structure Map Automocker Inject 是如何工作的？

> ID：15761090
> 
> 赞同：2
> 
> 时间：2013-04-02T09:53:06.483
> 
> 标签：c#, unit-testing, structuremap, rhino-mocks, automocking

我有包含 IEnumerable 参数的构造函数。当我尝试将具体对象注入 automocker 时，它没有被使用。

当我使用包含 IEnumerable 属性的包装类时，一切都按预期工作。

如何测试 TestClass1？

## IEnumerable 参数

```
public class TestClass1
{
    public TestClass1(IEnumerable<IItem> items)
    {
        Items = items;
    }

    public IEnumerable<IItem> Items { get; private set; }
}

[TestMethod]
public void TestClass1Constructor()
{
    RhinoAutoMocker<TestClass1> autoMocker = new RhinoAutoMocker<TestClass1>();

    IEnumerable<IItem> items = new[] { MockRepository.GenerateMock<IItem>() };
    autoMocker.Inject(items);

    Assert.AreEqual(1, autoMocker.ClassUnderTest.Items.Count());
} 
```

测试结果是：

> Assert.AreEqual 失败。预期：<1>。实际：<0>。

## 包装类参数

```
public class TestClass2
{
    public TestClass2(WrapperClass numbersWrapper)
    {
        Items = numbersWrapper.Items;
    }

    public IEnumerable<IItem> Items { get; private set; }
}

[TestMethod]
public void TestClass2Constructor()
{
    RhinoAutoMocker<TestClass2> autoMocker = new RhinoAutoMocker<TestClass2>();

    WrapperClass numbers = new WrapperClass(new[] { MockRepository.GenerateMock<IItem>() });
    autoMocker.Inject(numbers);

    Assert.AreEqual(1, autoMocker.ClassUnderTest.Items.Count());
} 
```

测试结果是：

> 成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:02:42.063

在查看了[该类](https://github.com/structuremap/structuremap/blob/master/src/StructureMap/AutoMocking/AutoMocker.cs)[的源代码`AutoMocker<TTargetClass>`](https://github.com/structuremap/structuremap/blob/master/src/StructureMap/AutoMocking/AutoMocker.cs)后，我注意到以下内容：

*   AutoMocker 在幕后使用了一个 StructureMap 容器
*   通常所有的依赖都是直接使用容器解决的
*   类型的依赖项`IEnumerable<T>`被不同地对待（见下文）

这是该类中的一段代码`AutoMocker<TTargetClass>`，显示了如何解决构造函数依赖关系（为简洁起见，我删除了一些行）：

```
private object[] getConstructorArgs()
{
    ConstructorInfo ctor = Constructor.GetGreediestConstructor(typeof (TTargetClass));
    var list = new List<object>();
    foreach (ParameterInfo parameterInfo in ctor.GetParameters())
    {
        Type dependencyType = parameterInfo.ParameterType;

        if (dependencyType.IsArray)
        {
            [...]
        }
        else if (dependencyType.Closes(typeof (IEnumerable<>)))
        {
            Type @interface = dependencyType.FindFirstInterfaceThatCloses(typeof (IEnumerable<>));
            Type elementType = @interface.GetGenericArguments().First();

            // Here's the interesting code:
            var builder = typeof (EnumerableBuilder<>).CloseAndBuildAs<IEnumerableBuilder>(_container,
                                                                                           elementType);
            list.Add(builder.ToEnumerable());
        }
        else
        {
            object dependency = _container.GetInstance(dependencyType);
            list.Add(dependency);
        }
    }

    return list.ToArray();
} 
```

代码显示依赖关系通常使用 解决`_container.GetInstance`，但有两个例外：ararys 和`IEnumerable<>`s

对于`IEnumerable<T>`，事实证明`_container.GetAllInstances(typeof(T))`是使用的。这意味着在您的情况下，您应该注入多个`IItem`实例，而不是`IEnumerable<IItem>`. 负责这个的代码是`EnumerableBuilder<T>`类，可以在[同一个文件](https://github.com/structuremap/structuremap/blob/master/src/StructureMap/AutoMocking/AutoMocker.cs)中找到（在最后）。

好了，说够了。我不确定我的解释是否足够清楚，所以下面是通过的两个测试的代码。希望这将澄清一切：

```
[Test]
public void Test_OneItem()
{
    var autoMocker = new RhinoAutoMocker<TestClass1>();

    autoMocker.Inject(MockRepository.GenerateMock<IItem>());

    Assert.AreEqual(1, autoMocker.ClassUnderTest.Items.Count());
}

[Test]
public void Test_TwoItems()
{
    var autoMocker = new RhinoAutoMocker<TestClass1>();

    autoMocker.Inject(MockRepository.GenerateMock<IItem>());
    autoMocker.Inject(MockRepository.GenerateMock<IItem>());

    Assert.AreEqual(2, autoMocker.ClassUnderTest.Items.Count());
} 
```

# c++ - 重载运算符 >> 适用于所有枚举类型

> ID：15761091
> 
> 赞同：3
> 
> 时间：2013-04-02T09:53:10.543
> 
> 标签：c++, operator-overloading

我有枚举类型，为此我重载了`operator>>`.

```
std::istream& operator >>(std::istream &is,MyEnum& enumVar)
{
  int intVal;
  is>>intVal;
  enumVar = intVal;
  return is;
} 
```

如何避免为所有未来的枚举类型编写此代码，即如何编写函数使其适用于所有枚举类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T10:02:07.463

将操作符设为模板并仅在模板参数为枚举时启用它（使用`enable_if`）：

```
#include <type_traits>

template<typename T>
typename std::enable_if<std::is_enum<T>::value, std::istream&>::type
operator >>(std::istream &is, T& enumVar)
{
  std::cout << "enum\n"; // just to see it is this one that gets used
  int intVal;
  is >> intVal;
  enumVar = static_cast<T>(intVal); // note the explicit cast to make it legal
  return is;
} 
```

如果你没有可用的 C++11，你可以使用 boost 的`type_traits`库。

看到您不知道确切如何`enable_if`工作的评论，这里是一个[带有详细解释的链接。](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/enable-if)

简而言之，`enable_if`模板是成对出现的——一个在条件（第一个模板参数）为真时具有第二个模板参数的成员 typedef `type`，而在条件为假时没有该 typedef。具有 false 条件的模板实例化无效，因为成员 typedef 不存在。然后，这种实例化（而不是硬编译器错误）从重载集中丢弃，以供以后的重载解决。另请阅读有关[SFINAE](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/SFINAE)的信息。

编辑：boost 的`enable_if`工作方式与标准的略有不同。使用任一：

```
boost::enable_if < boost::is_enum<T>, std::istream& >::type
                // ^^^^^^^^^^^^^^^^^
                // expects a type 
```

或者

```
boost::enable_if_c < boost::is_enum<T>::value, std::istream& >::type
                  // ^^^^^^^^^^^^^^^^^^^^^^^^
                  // expects a value 
```

# c# - 如何在编译之前读取添加到项目中的文本文件？

> ID：15761093
> 
> 赞同：0
> 
> 时间：2013-04-02T09:53:13.270
> 
> 标签：c#, xna, windows-phone-8

我有这样的问题。

我有文本文件。我想将它添加到我的项目中，然后阅读它。这个文件是 Lua 脚本。我读过，我可以阅读它并保存在独立存储中。但我有几个问题：

我正在用 C#、XNA 4.0、Windows Phone 8 SDK 编写。在 SDK 中没有像“应用程序”这样的类（System.Windows - 没有这样的命名空间）

没有“ResourceReader”类（System.Resource 命名空间中没有 ResourceReader 类）

我正在阅读 stackoverflow 提示，但它们都不适用于我的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:58:05.240

[如何读取嵌入式资源文本文件](https://stackoverflow.com/questions/3314140/how-to-read-embedded-resource-text-file)

并且引用了您需要的程序集，以防您找不到已添加到项目中的程序集。

# javascript - DOM：为什么这是内存泄漏？

> ID：15761094
> 
> 赞同：30
> 
> 时间：2013-04-02T09:53:13.600
> 
> 标签：javascript, internet-explorer, memory-leaks, garbage-collection, circular-reference

[考虑一下来自Mozilla Docs 关于 JavaScript 内存泄漏的](https://developer.mozilla.org/en-US/docs/JavaScript/A_re-introduction_to_JavaScript#Memory_leaks)引用：

> ```
> function addHandler() {
>     var el = document.getElementById('el');
>     el.onclick = function() {
>         this.style.backgroundColor = 'red';
>     }
> } 
> ```
> 
> 上面的代码将元素设置为在单击时变为红色。它还会造成内存泄漏。为什么？因为对 el 的引用无意中被为匿名内部函数创建的闭包中捕获。这会在 JavaScript 对象（函数）和本机对象 (el) 之间创建循环引用。

请用简单明了的方式解释上述泄漏的原因，我没有得到确切的意思。

网站/页面是否因泄漏而面临安全问题？我该如何避免它们？还有哪些其他代码会导致内存泄漏？如何判断何时发生内存泄漏？

我是内存泄漏主题的绝对初学者。有人可以一步一步地为我澄清这些东西吗？还有人可以帮我澄清这个陈述*“这会在 JavaScript 对象（函数）和本机对象（el）之间创建循环引用。”*

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-02T10:20:10.860

有两个概念可以帮助您理解此示例。

**1) 闭包**

闭包的定义是*[每个内部函数都可以访问其父函数的变量和参数。](http://crockford.com/javascript/private.html)*

当`addHandler()`函数完成时，匿名函数仍然可以访问父变量`el`。

2）**功能=内存**

每次定义一个`function`新对象时都会创建一个。让这个例子有点混乱的是 onclick 是一个只能设置一次 DOM 元素的事件。

所以肯定`el.onclick = function(){};`会覆盖旧功能吗？

错误的！每次 addHandler 运行时，都会创建一个新的函数对象。

**综上所述：**

每次函数运行时，它都会创建一个新对象，其中包含一个包含`el`. 由于匿名函数保持对 的访问`el`，垃圾收集器无法将其从内存中删除。

anon函数会维护对el的访问，而el对函数有访问权，即循环引用，导致IE内存泄漏。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-02T10:28:59.527

每当您在 JavaScript 中定义一个函数时，都会为它创建一个[执行上下文；](https://stackoverflow.com/questions/9384758/what-is-the-execution-context-in-javascript-exactly)这个执行上下文包含对作用域链中所有变量的引用，从全局作用域一直到局部作用域：

```
function test()
{
    var el = document.getElementById('el');
    el.onclick = function() {
        // execution context of this function: el, test
        alert('hello world');
    }
} 
```

完成`test()`后，匿名函数还没有被回收，因为它现在被分配给 DOM 的一个元素；即它被DOM 元素的一个属性*引用*。

同时，DOM 元素本身也是函数执行上下文的一部分，由于循环引用，现在无法回收，即使它实际使用时并不是很明显；你可以在[这个答案](https://stackoverflow.com/a/15801533/1338292)中找到一个演示。

也就是说，如今，大多数 JavaScript 引擎（甚至是 IE 中的引擎）都使用更高级的[垃圾收集器](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)，可以更好地识别未使用的变量，使用诸如[标记和清除](http://www.brpreiss.com/books/opus5/html/page424.html)或分代/临时垃圾收集之类的技术。

为了确保您不会在*任何*浏览器上遇到问题（不过，由于页面的典型生命周期，这主要是理论上的）：

```
document.getElementById('el').onclick = function() {
    alert('hello world');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-12T00:41:39.433

另请参阅有关该问题的 MS 文章的[更多信息](http://support.microsoft.com/kb/830555)部分：

> 发生这种内存泄漏是因为 DOM 对象是非 JScript 对象。DOM 对象不在 JScript 的标记和清除垃圾收集方案中。因此，在浏览器完全拆除页面之前，DOM 对象和 JScript 处理程序之间的循环引用不会被破坏。

但请注意，与那篇文章中所说的相反（当浏览器转到新页面时，内存将被回收），[这篇文章](http://support.microsoft.com/kb/929874)确认 IE 6 中的一个错误导致内存永远泄漏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-15T10:53:36.253

JavaScript 的内存管理通常是这样工作的：“只要可以到达，就保留它”。这基本上是任何垃圾收集驱动的内存模型背后的范例。

垃圾收集器往往非常擅长他们所做的事情，他们甚至会检测某组元素是否只能在这组元素中访问。这些组也称为循环引用，因为如果您遵循引用，您最终会到达您已经访问过的元素：您已经运行了一个圆圈。

但是，在您的示例中，您实际上有来自两个不同“世界”的两个对象：

![循环引用](https://i.stack.imgur.com/dYvO8.png)

> Internet Explorer 为此使用自己的垃圾收集方案，与 JavaScript 使用的机制分开。正是两者之间的交互会导致内存泄漏。

这正是发生的事情，可能导致内存泄漏。

# java - 如何从 JSON 对象中获取日期

> ID：15761101
> 
> 赞同：31
> 
> 时间：2013-04-02T09:53:44.297
> 
> 标签：java, json, date, object, getdate

我有一个 JSON 对象，它有一个字段是生日：

```
JSONObject obj = new JSONObject(response);
User user = new User();
user.setuserID(obj.getString("userID"));
user.setisMale(obj.getBoolean("isMale"));
user.setEmail(obj.getString("email"));
// user.setBirthdate(obj.getDate("birthdate"));
user.setLastName(obj.getString("lastName"));
user.setFirstName(obj.getString("firstName")); 
```

但`getDate()`JSONObject 中不存在该方法。
如何在我的用户对象中设置生日？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-02T10:06:25.513

你可以像下面这样，

```
String dateStr = obj.getString("birthdate");
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
Date birthDate = sdf.parse(dateStr);
//then
user.setBirthdate(birthDate); 
```

希望能帮到你:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T09:57:12.413

通常，日期以毫秒或格式化字符串的形式传递。因此，根据您的 json，您可以使用 use`new Date(json.getLong(milliseconds))`或者如果 date 在字符串中

```
String birthdate = json.getString(date);//"2013-03-26"
DateFormat df = new SimpleDateFormat("yyyy-MM-dd"); 
```

# java - 编组将特殊字符转换为问号

> ID：15761107
> 
> 赞同：2
> 
> 时间：2013-04-02T09:53:55.693
> 
> 标签：java, xml, marshalling, bytearrayoutputstream

在我的代码中，我想将一些字段写入 xml 文件。

当我调用`Marshaller.marshal(element, out);`正确的字段时，例如 value="barça" 的字段将在 ByteArrayOutputStream 中转换为 bar??a。

有什么想法可能导致这种情况吗？

我已将其设置为编组器的属性：

```
Marshaller.JAXB_FORMATTED_OUTPUT,true
Marshaller.JAXB_ENCODING,"UTF-8" 
```

谢谢您的帮助

# jquery - 推特引导。记住警报关闭操作

> ID：15761109
> 
> 赞同：6
> 
> 时间：2013-04-02T09:54:00.037
> 
> 标签：jquery, cookies, twitter-bootstrap, alert

在这篇文章之后，我试图记住 Twitter 的 Bootstrap 警报中的关闭操作（[使用 Bootstrap，让警报框记住关闭操作](https://stackoverflow.com/questions/13408244/using-bootstrap-have-alert-box-remember-close-action)）

我希望用户在关闭警报并且页面重新加载后看不到警报。

我知道我必须将状态存储到 cookie 中，所以我使用了上面示例中建议的 JQuery 函数，但不起作用。我究竟做错了什么？

小提琴-> [http://jsfiddle.net/kFy5y/](http://jsfiddle.net/kFy5y/)

提前致谢！！

```
jQuery(function( $ ){

    // Check if alert has been closed
    if( $.cookie('alert-box') === 'closed' ){

        $('.alert').hide();

    }

     // Grab your button (based on your posted html)
    $('.close').click(function( e ){

        // Do not perform default action when button is clicked
        e.preventDefault();

        /* If you just want the cookie for a session don't provide an expires
         Set the path as root, so the cookie will be valid across the whole site */
        $.cookie('alert-box', 'closed', { path: '/' });

    });

}); 
```

警报

```
<div class="alert alert-info fade in">            
            <button type="button" class="close" data-dismiss="alert">×</button>
            <strong> ALERT BODY</strong>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:08:14.570

您使用`$.cookie('alert-box')`的不是标准的 jQuery 函数，而是在[jquery-cookie 之](https://github.com/carhartl/jquery-cookie)类的库中实现的方法。

所以你需要添加这个库或类似的库才能使用 jQuery 保存 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-22T09:45:46.823

这是一个通用解决方案，适用于每个具有 ID 的警报的每个页面。

```
//////////////////////////////////
    //remember close BS alert

    function showUnDismissedAlerts(){
        //if there is no localStorage, just show all alerts and return
        if (!localStorage.getItem(`dismissedAlerts_${document.title}`)) {
            $('.alert').show()
            return;
        }
        //get dismissed alert ID's
        let dismissedAlerts = JSON.parse(localStorage.getItem(`dismissedAlerts_${document.title}`))
        //look for each alert if it was dismissed
        $('.alert').map((index, el) => {
            //get the alert ID
            let alertId = $(el).attr('id')
            //if there is no ID, return (next alert)
            if (!alertId) return;
            //assuming the alert isn' dismissed
            let dismissed = false
            for (let i = 0; i < dismissedAlerts.length; i++) {
                //if the alert is present, it was dismissed, therefore set dismissed to true and exit for
                if (alertId == dismissedAlerts[i]) {
                    dismissed = true
                    break;
                }
            }
            //if alert isn't dismissed, show it
            if (!dismissed) $(el).show()
        })
    }

    //fires if there are alerts on page
    if ($('.alert').length > 0) {
        $('.alert').on('click', '.close', function (e) {
            e.preventDefault()
            //get alert element
            let parent = $(this).parent()
            //get alert ID
            let id = $(parent).attr('id')
            //return if no ID is defined
            if (!id) return;
            //get all dismissed alerts, based om localStorage. The document title is in key to prevent long data arrays
            if (!localStorage.getItem(`dismissedAlerts_${document.title}`)) {
                //if storage doesn't exists, add it with the dismissed alert ID
                localStorage.setItem(`dismissedAlerts_${document.title}`, JSON.stringify([id]))
            } else {
                //localStorage exists, so get it and parse it to an array
                let alerts = JSON.parse(localStorage.getItem(`dismissedAlerts_${document.title}`))
                //assuming the alert isn't already dismissed
                let alreadyDismissed = false
                //loop trough dismissed alerts and find out if there is a double
                alerts.map(alertId => {
                    //if id is already there, return
                    if (alertId == id) {
                        alreadyDismissed = true
                        return;
                    }
                })
                //if id alert ID isn't added, so add it an store the new dismissed alerts array
                if (!alreadyDismissed) {
                    alerts.push(id)
                    localStorage.setItem(`dismissedAlerts_${document.title}`, JSON.stringify(alerts))
                }
            }
        })

        //show all the undismissed alerts
        showUnDismissedAlerts()
    }
```

```
.none{
  display: none;
}
```

```
<!-- css -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>

<div class="alert alert-info alert-dismissible none" role="alert" id="my_alert">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">×</span>
  </button>
  <strong>I'm a alert</strong>
</div>

<!-- script -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
```

# ios - 在iOS中没有递归遍历目录

> ID：15761113
> 
> 赞同：0
> 
> 时间：2013-04-02T09:54:10.093
> 
> 标签：ios, algorithm, tree-traversal

我需要遍历应用程序从共享服务器访问的目录的文件夹结构中的所有文件。通过包含静态库，我可以访问各种服务器以及其中共享的文件。所有服务器的列表都存储在 NSArray 中

我需要遍历服务器共享的所有文件夹以将所有文件存储在容器中。我使用了递归，但是如果文件夹和子文件夹的数量增加，这会对性能产生巨大影响。

任何人都可以建议任何算法或逻辑来遍历目录结构。

请参考下图以了解结构。

![在此处输入图像描述](https://i.stack.imgur.com/HeYJz.png)

一种可能性可能是使用线程，但如何划分逻辑以迭代所有文件夹的文件，以便线程可以并行处理它们。

作为一个移动应用程序，我没有奢侈的记忆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:58:19.333

备注：“我没有奢侈的记忆。” - 问一位在 70 年代工作的工程师。他会说你 iPhone 中的 1GB RAM 绰绰有余。

直截了当：您确定**确实是递归本身**对性能有如此大的影响吗？当然，有一些算法可以使用显式堆栈在不递归的情况下遍历树数据结构（例如文件系统中的目录），但这*确实很痛苦。*

相反，请确保您**只获得必要的信息，**例如，如果您只需要文件的完整路径，请不要获取文件的所有属性和硬链接计数和生日以及...和...。

# php - 使用 PHP Simple HTML DOM Parser 查找带有类的 div

> ID：15761115
> 
> 赞同：5
> 
> 时间：2013-04-02T09:54:17.960
> 
> 标签：php, parsing, dom, simple-html-dom

我只是从提到的 Parser 开始，并以某种方式直接从一开始就解决问题。

参考本教程：

[http://net.tutsplus.com/tutorials/php/html-parsing-and-screen-scraping-with-the-simple-html-dom-library/](http://net.tutsplus.com/tutorials/php/html-parsing-and-screen-scraping-with-the-simple-html-dom-library/)

我现在只想在具有类 ClearBoth Box 的 div 的源代码中找到内容

我用 curl 检索代码并创建一个简单的 html dom 对象：

```
$cl = curl_exec($curl);  
$html = new simple_html_dom();
$html->load($cl); 
```

然后我想将 div 的内容添加到一个名为 divs 的数组中：

```
$divs = $html->find('div[.ClearBoth Box]'); 
```

但是现在，当我 print_r $divs 时，它提供了更多，尽管源代码在 div 中没有更多。

像这样：

```
Array
(
    [0] => simple_html_dom_node Object
        (
            [nodetype] => 1
            [tag] => br
            [attr] => Array
                (
                    [class] => ClearBoth
                )

            [children] => Array
                (
                )

            [nodes] => Array
                (
                )

            [parent] => simple_html_dom_node Object
                (
                    [nodetype] => 1
                    [tag] => div
                    [attr] => Array
                        (
                            [class] => SocialMedia
                        )

                    [children] => Array
                        (
                            [0] => simple_html_dom_node Object
                                (
                                    [nodetype] => 1
                                    [tag] => iframe
                                    [attr] => Array
                                        (
                                            [id] => ShowFacebookButtons
                                            [class] => SocialWeb FloatLeft
                                            [src] => http://www.facebook.com/plugins/xxx
                                            [style] => border:none; overflow:hidden; width: 250px; height: 70px;
                                        )

                                    [children] => Array
                                        (
                                        )

                                    [nodes] => Array
                                        (
                                        ) 
```

我不明白为什么 $divs 不只是来自 div 的代码？

以下是网站上的源代码示例：

```
<div class="ClearBoth Box">
          <div>
<i class="Icon SmallIcon ProductRatingEnabledIconSmall" title="gute peppige Qualität: Sehr empfehlenswert"></i>
<i class="Icon SmallIcon ProductRatingEnabledIconSmall" title="gute peppige Qualität: Sehr empfehlenswert"></i>
<i class="Icon SmallIcon ProductRatingEnabledIconSmall" title="gute peppige Qualität: Sehr empfehlenswert"></i>
<i class="Icon SmallIcon ProductRatingEnabledIconSmall" title="gute peppige Qualität: Sehr empfehlenswert"></i>
<i class="Icon SmallIcon ProductRatingEnabledIconSmall" title="gute peppige Qualität: Sehr empfehlenswert"></i>

              <strong class="AlignMiddle LeftSmallPadding">gute peppige Qualität</strong> <span class="AlignMiddle">(17.03.2013)</span>
          </div>
          <div class="BottomMargin">
            gute Verarbeitung, schönes Design,
          </div>
        </div> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-20T14:46:20.893

```
$html = new simple_html_dom();   
$html->load($output); 
$items = $html->find('div.youclassname',0)->children(1)->outertext; 
print_r($items); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T09:57:07.263

获取带有类的 div 的正确代码是：

```
$ret = $html->find('div.foo');
//OR
$ret = $html->find('div[class=foo]'); 
```

基本上，您可以像使用 CSS 选择器一样获取元素。

来源：[http ://simplehtmldom.sourceforge.net/manual.htm](http://simplehtmldom.sourceforge.net/manual.htm)
*如何找到 HTML 元素？*部分，选项卡*高级*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-27T06:58:08.250

找到以下元素：`DIV -> class(product-inner clearfix) -> class(price)`可以使用以下 XPath：

```
foreach($html->find('div[class=product-inner  clearfix]') as $element){
        $itemPrice = $element->find('.price',0)->plaintext;
        echo $itemPrice;
    } 
```

# android - 来自用户的隐形应用

> ID：15761118
> 
> 赞同：0
> 
> 时间：2013-04-02T09:54:22.920
> 
> 标签：android

我想要一个完全不可见的应用程序（隐身），它不会有任何启动器图标，只有当我在拨号器中拨打特定号码时我们才能检索在 android 中是否可能？

# sql-server-2008 - 查询得到指定表中所示的输出

> ID：15761122
> 
> 赞同：-1
> 
> 时间：2013-04-02T09:54:30.953
> 
> 标签：sql-server-2008, pivot

```
EmpId EmpDeptName
1   Account
2   Sales
3   IT
4   HR 
```

我想以格式输出

```
EmpId Account Sales IT HR 
 1 
 2 
 3 
 4 
```

如果有人知道如何编写查询来获得此输出，请向我提供该查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:40:57.153

这种类型的 od 数据转换是 a `PIVOT`，您可以在其中获取行数据并将其转换为列。

您没有提供太多详细信息，但如果您想要每个部门的员工人数，您可以使用以下内容：

```
select Account, Sales, IT, HR
from 
(
  select EmpDeptName
  from employees
) d
pivot
(
  count(EmpDeptName)
  for EmpDeptName in (Account, Sales, IT, HR)
) p; 
```

这会将每个部门的员工总数显示为列数据而不是行。

# c++ - C/C++ Plugin API 设计困境

> ID：15761123
> 
> 赞同：3
> 
> 时间：2013-04-02T09:54:36.300
> 
> 标签：c++, c, plugins

我正在为包含 3 个组件的解决方案设计 C/C++ 插件架构：

1.  客户级别
2.  一个核心级别
3.  可视化级别

所有这些级别都有与另一端相应插件对话的插件（即：客户端，磁盘插件与核心磁盘插件对话，可能还有可视化磁盘插件，但不与核心CPU插件对话）

现在，我想让插件的创建尽可能简单，所以我想出了以下内容：插件在共享库中实现并根据请求加载，并且有一组预定义的函数，例如加载、卸载、名称等...组件加载插件共享库，查找这些功能，完成工作，卸载插件。

现在，有一个头文件，如：

```
plugin_client.h:

/***************************************************************************
 *             Methods that are exposed in a client side plugin            * 
 ***************************************************************************/
PLUGIN_LOAD_STATUS load();
PLUGIN_UNLOAD_STATUS unload(PLUGIN_UNLOAD_REQUEST reason);
const char* name();
void do_work(); 
```

这让插件开发者清楚，他需要实现上述功能，插件才能集成到系统的客户端组件中。

困境开始了：对于核心组件插件，也应该有一个非常相似（几乎相同）的头文件，可视化部分也是如此。问题来了：

我应该如何处理这种情况？我想到了2个解决方案：

1.  不同组件的所有插件的一个通用头文件，即：`plugin.h`所有可以实现的功能都在其中，并带有注释，该方法应在客户端中实现，在核心中，在可视化组件中. 这样做的缺点是所有东西都在一个地方，并且许多不必要的东西对不感兴趣的各方可见。
2.  在每个插件的头文件上，所以：，，`plugin_client.h`插件 开发人员包括他想要的。这些插件有一个特殊的功能：如果这是一个客户端、核心或可视化插件，它会返回。这样做的缺点是信息的重复。`plugin_core.h``plugin_vis.h``int plugin_type();`

如果您对如何优雅地解决这个困境有任何想法，请告诉我？

谢谢， f。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:58:43.650

确实不必重复信息。特定类型的标头如何包含基本标头，如下所示：

**plugin_base.h**：

```
/***************************************************************************
 *             Methods that are exposed in a client side plugin            * 
 ***************************************************************************/
PLUGIN_LOAD_STATUS load();
PLUGIN_UNLOAD_STATUS unload(PLUGIN_UNLOAD_REQUEST reason);
const char* name();
void do_work();
int plugin_type(); 
```

**插件客户端.h：**

```
#include "plugin_base.h"
void client_only_function(); 
```

其他插件类型完全相同。

# c# - WPF DataGrid 绑定不显示值

> ID：15761124
> 
> 赞同：1
> 
> 时间：2013-04-02T09:54:43.190
> 
> 标签：c#, .net, wpf, data-binding, expression-blend

我是 WPF 的初学者，我尝试在 WPF 中绑定到 DataGrid。

XAML 代码：

```
<Grid x:Name="LayoutRoot">
    <Grid HorizontalAlignment="Left" Height="440" VerticalAlignment="Top"
        Width="632">
        <DataGrid HorizontalAlignment="Left" Height="420" Margin="10,10,0,0"
            VerticalAlignment="Top" Width="603" ItemsSource="{Binding
            Source=MailCollection}" AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTextColumn  Header="id" Binding="{Binding Id}"/>
                <DataGridTextColumn  Header="nazwa" Binding="{Binding Name}"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Grid> 
```

这里是`MailTpl`类：

```
public class MailTpl
{
    public string Id { get; set; }
    public string Name { get; set; }
} 
```

这是我如何进行绑定：

```
public partial class WindowDataGridTest : Window
{
    ObservableCollection<MailTpl> _MailCollection =
        new ObservableCollection<MailTpl>();
    public ObservableCollection<MailTpl> MailCollection
        { get { return _MailCollection; } }

    public WindowDataGridTest()
    {
        _MailCollection.Add(new MailTpl
            { Id= "abbb", Name = "badfasdf" });
        _MailCollection.Add(new MailTpl
            { Id = "asasdfasdfdf", Name = "basdfasdfaa" });
        this.InitializeComponent();
        // Insert code required on object creation below this point.
    }
} 
```

我不知道为什么它不起作用。有什么线索吗？网格不显示任何值。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T10:03:26.467

只是对未来的建议。

`Visual studio`-> `Options`-> `Debugging`-> `Output Window`-> `WPF Trace Settings`。您可以在此处设置详细级别并在`Output`窗口中查看有关数据绑定的重要信息。它为我节省了几个小时。

现在的原因。您声明`MailCollection`为 Window 的公共属性，但`DataContext`默认情况下会进行绑定。

所以，你有两种方法：

```
this.DataContext = _MailCollection 
```

并将绑定更改为：

```
ItemsSource={Binding} 
```

或者只是将绑定更改为：

```
ItemsSource="{Binding RelativeSource={RelativeSource Mode=FindAncestor,
              AncestorType=Window}, Path=MailCollection}" 
```

我还推荐这个[PDF 装订备忘单](http://www.nbdtech.com/Free/WpfBinding.pdf)。它缺少一些 WPF 4.5 功能，但仍然有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:04:35.830

你忘了在 WindowDataGridTest() 构造函数中写这个。

```
this.DataContext = this; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T10:17:53.523

您**尚未**将 ObservableCollection 绑定到 DataGrid。

这是解决问题的步骤。

1.  为您的 DataGrid 定义一个名称。（比方说`myDataGrid`）

2.  然后在代码隐藏文件的构造函数中插入下面的代码

    ```
    myDataGrid.DataContext = this.MailCollection; 
    ```

请查看[本教程](http://msdn.microsoft.com/en-us/library/ms752347.aspx)以了解有关数据绑定的更多信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-01T08:04:06.433

我遇到了同样的问题，然后我通过增加网格高度来解决它。确保您的网格高度足以显示数据。

# php - 如何在opencart中插入上传图片？

> ID：15761127
> 
> 赞同：1
> 
> 时间：2013-04-02T09:54:48.887
> 
> 标签：php, opencart

我是 OpenCart eshop 的初学者。我正在尝试根据打印服务创建自定义表单。我需要将上传的图像插入 MySQL 并在 OpenCart 的管理部分显示。如何验证`<input type='file'>`OpenCart 中的文件类型输入？在纯 PHP 中有`$_FILES[][]`适用的数组，但如何访问 OpenCart 中提交的文件？请帮我解决它。

```
if (isset($this->error['file'])) {
    $this->data['error_file'] = $this->error['file'];
} else {
    $this->data['error_file'] = '';
} 
```

我的自定义页面控制器：

```
 <?php
    class ControllerInformationDesign extends Controller {
        private $error = array();

        public function index() {
            /*if (!$this->customer->isLogged()) {
                $this->session->data['redirect'] = $this->url->link('account/custreview', '', 'SSL');

                $this->redirect($this->url->link('account/login', '', 'SSL'));
            } */

            $this->language->load('information/design');

            $this->document->setTitle($this->config->get('config_name') . ' - ' . $this->language->get('heading_title'));

            $this->load->model('account/custreview');

            $this->getForm();
        } 

        public function insert() {
            $this->load->language('information/design');

            $this->document->setTitle($this->config->get('config_name') . ' - ' . $this->language->get('heading_title'));

            $this->load->model('account/custreview');

            if (($this->request->server['REQUEST_METHOD'] == 'POST') && $this->validateForm()) {
                $this->model_account_custreview->addReview($this->request->post);

                $this->session->data['success'] = $this->language->get('text_success');

                $this->redirect($this->url->link('information/design'));
            }

            $this->getForm();
        }

        private function getForm() {
            $this->data['heading_title'] = $this->language->get('heading_title');
            $this->data['entry_prefix'] = $this->language->get('entry_prefix');
            $this->data['entry_desc'] = $this->language->get('entry_desc');
            $this->data['entry_industry'] = $this->language->get('entry_industry');
            $this->data['entry_design'] = $this->language->get('entry_design');
            $this->data['entry_prefix1'] = $this->language->get('entry_prefix1');
            $this->data['entry_other'] = $this->language->get('entry_other');
            $this->data['entry_prefix2'] = $this->language->get('entry_prefix2');
            $this->data['entry_prefix3'] = $this->language->get('entry_prefix3');
            $this->data['entry_prefix4'] = $this->language->get('entry_prefix4');

            $this->data['logged'] = $this->customer->getFirstname() . ' ' . $this->customer->getLastName();

            $this->data['text_none'] = $this->language->get('text_none');
            $this->data['text_select'] = $this->language->get('text_select');

            $this->data['entry_product'] = $this->language->get('entry_product');
            $this->data['entry_author'] = $this->language->get('entry_author');
            $this->data['entry_rating'] = $this->language->get('entry_rating');
            $this->data['entry_review'] = $this->language->get('entry_review');
            $this->data['entry_good'] = $this->language->get('entry_good');
            $this->data['entry_bad'] = $this->language->get('entry_bad');

            $this->data['button_save'] = $this->language->get('continue_shop');
    $this->data['button_checkout'] = $this->language->get('check_out');

            if (isset($this->error['warning'])) {
                $this->data['error_warning'] = $this->error['warning'];
            } else {
                $this->data['error_warning'] = '';
            }

            if (isset($this->session->data['success'])) {
                $this->data['success'] = $this->session->data['success'];

                unset($this->session->data['success']);
            } else {
                $this->data['success'] = '';
            }

            if (isset($this->error['product'])) {
                $this->data['error_product'] = $this->error['product'];
            } else {
                $this->data['error_product'] = '';
            }

            if (isset($this->error['product_id'])) {
                $this->data['error_product_id'] = $this->error['product_id'];
            } else {
                $this->data['error_product_id'] = '';
            }

            if (isset($this->error['author'])) {
                $this->data['error_author'] = $this->error['author'];
            } else {
                $this->data['error_author'] = '';
            }

            if (isset($this->error['text'])) {
                $this->data['error_text'] = $this->error['text'];
            } else {
                $this->data['error_text'] = '';
            }

            if (isset($this->error['rating'])) {
                $this->data['error_rating'] = $this->error['rating'];
            } else {
                $this->data['error_rating'] = '';
            }   
            if (isset($this->error['cdesc'])) {
                $this->data['error_desc'] = $this->error['cdesc'];
            } else {
                $this->data['error_desc'] = '';
            }
            if (isset($this->error['industry'])) {
                $this->data['error_industry'] = $this->error['industry'];
            } else {
                $this->data['error_industry'] = '';
            }
            if (isset($this->error['design'])) {
                $this->data['error_design'] = $this->error['design'];
            } else {
                $this->data['error_design'] = '';
            }
            if (isset($this->error['other'])) {
                $this->data['error_other'] = $this->error['other'];
            } else {
                $this->data['error_other'] = '';
            }
            if (isset($this->error['file'])) {
                $this->data['error_file'] = $this->error['file'];
            } else {
                $this->data['error_file'] = '';
            }

            $this->data['breadcrumbs'] = array();

            $this->data['breadcrumbs'][] = array(
                'text'      => $this->language->get('text_home'),
                'href'      => $this->url->link('common/home', 'SSL'),
                'separator' => false
            );

            $this->data['breadcrumbs'][] = array(
                'text'      => $this->language->get('heading_title'),
                'href'      => $this->url->link('information/design','SSL'),
                'separator' => ' :: '
            );

            if (!isset($this->request->get['review_id'])) { 
                $this->data['action'] = $this->url->link('information/design/insert');
            }

            $this->data['cancel'] = $this->url->link('information/design','SSL');

            if (isset($this->request->get['review_id']) && ($this->request->server['REQUEST_METHOD'] != 'POST')) {
                $review_info = $this->model_account_custreview->getReview($this->request->get['review_id']);
            }

            $this->load->model('catalog/category');

            $this->data['categories'] = $this->model_catalog_category->getCategories(0);

            $this->load->model('catalog/product');

            if (isset($this->request->post['product_id'])) {
                $this->data['product_id'] = $this->request->post['product_id'];

                $product_info = $this->model_catalog_product->getProduct($this->request->post['product_id']);

                if ($product_info) {
                    $this->data['product'] = $product_info['name'];
                } else {
                    $this->data['product'] = '';
                }
            } elseif (isset($review_info)) {
                $this->data['product_id'] = $review_info['product_id'];

                $product_info = $this->model_catalog_product->getProduct($review_info['product_id']);

                if ($product_info) {
                    $this->data['product'] = $product_info['name'];
                } else {
                    $this->data['product'] = '';
                }
            } else {
                $this->data['product_id'] = '';
            }

            if (isset($this->request->post['product_id'])) {
                $this->data['product_id'] = $this->request->post['product_id'];
            } elseif (isset($review_info)) {
                $this->data['product_id'] = $review_info['product_id'];
            } else {
                $this->data['product_id'] = '';
            }

            if (isset($this->request->post['product'])) {
                $this->data['product'] = $this->request->post['product'];
            } elseif (isset($review_info)) {
                $this->data['product'] = $review_info['product'];
            } else {
                $this->data['product'] = '';
            }

            if (isset($this->request->post['author'])) {
                $this->data['author'] = $this->request->post['author'];
            } elseif (isset($review_info)) {
                $this->data['author'] = $review_info['author'];
            } else {
                $this->data['author'] = '';
            }

            if (isset($this->request->post['text'])) {
                $this->data['text'] = $this->request->post['text'];
            } elseif (isset($review_info)) {
                $this->data['text'] = $review_info['text'];
            } else {
                $this->data['text'] = '';
            }

            if (isset($this->request->post['rating'])) {
                $this->data['rating'] = $this->request->post['rating'];
            } elseif (isset($review_info)) {
                $this->data['rating'] = $review_info['rating'];
            } else {
                $this->data['rating'] = '';
            }

            if (isset($this->request->post['cdesc'])) {
                $this->data['cdesc'] = $this->request->post['cdesc'];
            } elseif (isset($review_info)) {
                $this->data['cdesc'] = $review_info['cdesc'];
            } else {
                $this->data['cdesc'] = '';
            }
            if (isset($this->request->post['industry'])) {
                $this->data['industry'] = $this->request->post['industry'];
            } elseif (isset($review_info)) {
                $this->data['industry'] = $review_info['industry'];
            } else {
                $this->data['industry'] = '';
            }
            if (isset($this->request->post['design'])) {
                $this->data['design'] = $this->request->post['design'];
            } elseif (isset($review_info)) {
                $this->data['design'] = $review_info['design'];
            } else {
                $this->data['design'] = '';
            }
            if (isset($this->request->post['other'])) {
                $this->data['other'] = $this->request->post['other'];
            } elseif (isset($review_info)) {
                $this->data['other'] = $review_info['other'];
            } else {
                $this->data['other'] = '';
            }
            if (isset($this->request->post['file'])) {
                $this->data['file'] = $this->request->post['file'];
            } elseif (isset($review_info)) {
                $this->data['file'] = $review_info['file'];
            } else {
                $this->data['file'] = '';
            }

            if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/information/design.tpl')) {
                $this->template = $this->config->get('config_template') . '/template/information/design.tpl';
            } else {
                $this->template = 'default/template/information/design.tpl';
            }

            $this->children = array(
                'common/column_left',
                'common/column_right',
                'common/content_top',
                'common/content_bottom',
                'common/footer',
                'common/header'     
            );

            $this->response->setOutput($this->render());
        }

        private function validateForm() {

            /*if (!$this->request->post['product_id']) {
                $this->error['product'] = $this->language->get('error_product');
            }

            if (!$this->request->post['product_id']) {
                $this->error['product_id'] = $this->language->get('error_product_id');
            }*/

            if ((strlen(utf8_decode($this->request->post['author'])) < 3) || (strlen(utf8_decode($this->request->post['author'])) > 64)) {
                $this->error['author'] = $this->language->get('error_author');
            }
    /*
            if (strlen(utf8_decode($this->request->post['text'])) < 1) {
                $this->error['text'] = $this->language->get('error_text');
            }*/

            /*if (!isset($this->request->post['rating'])) {
                $this->error['rating'] = $this->language->get('error_rating');
            }
            if (!isset($this->request->post['file'])) {
                $this->error['file'] = $this->language->get('error_file');
            }*/
            if ((strlen(utf8_decode($this->request->post['cdesc'])) < 3) || (strlen(utf8_decode($this->request->post['cdesc'])) > 1000)) {
                $this->error['cdesc'] = $this->language->get('error_desc');
            }
            if ((strlen(utf8_decode($this->request->post['industry'])) < 3) || (strlen(utf8_decode($this->request->post['industry'])) > 1000)) {
                $this->error['industry'] = $this->language->get('error_industry');
            }
        if ((strlen(utf8_decode($this->request->post['design'])) < 3) || (strlen(utf8_decode($this->request->post['design'])) > 1000)) {
            $this->error['design'] = $this->language->get('error_design');
        }
        if ((strlen(utf8_decode($this->request->post['other'])) < 3) || (strlen(utf8_decode($this->request->post['other'])) > 1000)) {
            $this->error['other'] = $this->language->get('error_other');
        }

        if (!$this->error) {
            return true;
        } else {
            return false;
        }
    }   

    public function autocomplete() {
        $json = array();

        if (isset($this->request->post['filter_name'])) {
            $this->load->model('catalog/product');

            $data = array(
                'filter_name' => $this->request->post['filter_name'],
                'start'       => 0,
                'limit'       => 20
            );

            $results = $this->model_catalog_product->getProducts($data);

            foreach ($results as $result) {
                $json[] = array(
                    'product_id' => $result['product_id'],
                    'name'       => html_entity_decode($result['name'], ENT_QUOTES, 'UTF-8'),   
                    'model'      => $result['model'],
                    'price'      => $result['price']                
                );  
            }
        }

        $this->load->library('json');

        $this->response->setOutput(Json::encode($json));
    }   
}
?> 
```

如何处理 OpenCart 中的文件上传以及如何将上传的文件插入数据库？如何解决？请指导我...

# javascript - 本例中如何获取数据

> ID：15761128
> 
> 赞同：1
> 
> 时间：2013-04-02T09:54:50.427
> 
> 标签：javascript, jquery

给定这样的代码

```
<table>
  <tr>
    <td>1</td>
    <td>e</td>
    <td>a</td>
  </tr>
  <tr>
    <td>2</td>
    <td>e</td>
    <td>c</td>
  </tr>
   ...
</table> 
```

每行的第一个单元格是 id （它是唯一的）如果输入是 id 的值，我怎样才能得到该行中第三个单元格的值

```
Example: input 1 -> output a
         input 2 -> output c 
```

我怎样才能用 Jquery 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T09:55:58.027

您可以使用`td:last`

**[现场演示](http://jsfiddle.net/UsbpA/)**

```
$('tr').eq(index).find('td:last').text(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T09:58:33.120

## 更新

您可以执行以下操作

```
var valueSearch = "4";
$('tr').each(function(index){
        if($(this).find('td:first').text()==valueSearch){
            alert($(this).find('td:last').text());
        }

 }); 
```

这是一个工作示例 `**[live fiddle](http://jsfiddle.net/mayooresan/9FuM9/2/)**`

## 旧答案

```
$('tr').eq("1").find('td:last').text(); 
```

是正确的做法。

这是一个活生生的例子`**[Fiddle](http://jsfiddle.net/mayooresan/9FuM9/)**`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T09:57:09.630

试试喜欢

```
$('table tr').each(function(){
     alert("input "+ $(this + 'td').eq(0).text() + " -> " + $(this + 'td').eq(2).text());
}); 
```

或尝试喜欢

```
$('table tr').each(function(){
     alert("input "+ $(this + 'td:first').text() + " -> " + $(this + 'td:last').text());
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T10:11:51.100

使用 JavaScript，你可以使用这个

```
var id = document.getElementsByTagName('tr')[0].getElementsByTagName('td')[0].innerHTML;
var value = document.getElementsByTagName('tr')[id].getElementsByTagName('td')[2].innerHTML; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T10:31:54.420

这正是你想要的。

你可以使用[演示链接](http://jsfiddle.net/liyakat/dDYzr/)

功能看起来像

```
$(document).ready(function() {

$('table tr').each(function() {        

  var str = "input "+ $(this).find('td:first').text() + " -> output " + $(this).find('td:last').text();        
    $("#result").append("</br>"+str);
}); 
```

});

# windows - Windows 7中的vim电力线

> ID：15761129
> 
> 赞同：2
> 
> 时间：2013-04-02T09:54:51.527
> 
> 标签：windows, vim, vim-powerline

我正在尝试在窗口上安装 VIM Powerline，我发现一条评论应该可以修复它在 Windows 中的外观，但是评论的编码本身就被破坏了......

[博客文章的链接。](http://codejury.com/consolas-font-in-vim-powerline-windows/)

```
I had the same problem on windows. As an alternative to editing “vim-powerline-develop\autoload\Powerline\Functions.vim”, you can also add this to your vimrc:

    let g:Powerline_mode_V=”V·LINE
    let g:Powerline_mode_cv=”V·BLOCK”
    let g:Powerline_mode_S=”S·LINE”
    let g:Powerline_mode_cs=”S·BLOCK” 
```

我不知道如何`cdot`在我的键盘上输入运算符（对不起这个名字，我想我太喜欢 Latex 了......）。那么，我应该怎么做才能让 VIM 在 Windows 下运行呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T10:15:22.273

要获得*中间点*，最简单实用的方法就是从剪贴板粘贴它。

对于直接文本输入，您可以通过字符编码的数值输入：`<C-v>183`，请参见`:help i_CTRL-V_digit`。在 Windows 上，您经常需要使用`<C-q>`而不是`<C-v>`.

Vim 还有一个称为*digraphs*的功能，用于快速输入特殊字符。中间的点是`<C-k>.M`.

要使其中任何一个起作用，您的文本编码必须支持非 ASCII 字符。最佳使用价值

```
:set encoding=utf-8 
```

并确保您`~/.vimrc`是 UTF-8 编码的。

# c++ - 使子窗口出现在任务栏中

> ID：15761130
> 
> 赞同：0
> 
> 时间：2013-04-02T09:55:06.857
> 
> 标签：c++, winapi

如何使子窗口出现在任务栏中，在win32程序中？
（`WS_EX_APPWINDOW`扩展样式，仅对顶层窗口有帮助）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:00:55.177

通常只有弹出窗口可以出现在任务栏中，但您可以使用该`ITaskbarList`界面来执行此操作。

根据文档`ITaskbarList::AddTab`，

> 任何类型的窗口都可以添加到任务栏...

我自己没有尝试过，所以我不知道这是否适用于子窗口，但这是我能想到的唯一可能成功的方法。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/bb774652(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774652(v=vs.85).aspx)。

# android - Android - 检测与特定 wifi ssid 断开连接的正确方法？

> ID：15761132
> 
> 赞同：4
> 
> 时间：2013-04-02T09:55:11.863
> 
> 标签：android, broadcastreceiver, android-wifi

我已经看过几个 BroadcastReciever 示例来检测 wifi 断开连接，但它们似乎都不能正常工作（例如，每次断开连接触发两次）并且没有提到检查 ssid，这甚至可能吗？

因此，为了澄清，我想检测与特定 ssid 的断开连接。实际断开连接，而不是在设备上禁用 wifi。

谢谢

编辑：重新打开，因为在我们必须测试的*两个设备上都不起作用。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-25T06:57:03.310

NETWORK_STATE_CHANGED_ACTION 最终是答案。当另一个应用程序（也将监听类似事件）被卸载时，注册此事件有问题的设备开始工作！不知道一个应用程序如何或为什么会阻止向另一个应用程序注册的事件。最终的解决方案是；

```
 String action = intent.getAction();

    if (action.equals(WifiManager.NETWORK_STATE_CHANGED_ACTION))
    {
        WifiManager manager = (WifiManager)context.getSystemService(Context.WIFI_SERVICE);
        NetworkInfo networkInfo = intent.getParcelableExtra(WifiManager.EXTRA_NETWORK_INFO);
        NetworkInfo.State state = networkInfo.getState();

        if(state == NetworkInfo.State.CONNECTED)
        {
            String connectingToSsid = manager.getConnectionInfo().getSSID().replace("\"", "");
            WifiStateHistory.recordConnectedSsid(connectingToSsid);
//connected
        }

        if(state == NetworkInfo.State.DISCONNECTED)
        {
            if(manager.isWifiEnabled())
            {
                String disconnectedFromSsid = WifiStateHistory.getLastConnectedSsid();
//disconnected
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:05:27.850

您确定同一状态有两次通知吗？断开连接总是有两个阶段：

WifiManager.WIFI_STATE_DISABLING

WifiManager.WIFI_STATE_DISABLED

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T22:10:03.197

我检测（和重播）连接和断开连接（不是通过禁用 wifi）并将 SSID 作为额外的代码如下。我读过的大部分内容都建议使用 SUPPLICANT_CONNECTION_CHANGE_ACTION 但这只是无法正常工作，它似乎只会在我的设备（Nexus 4）上禁用/启用 wifi 而不是在连接期间触发。唯一的问题是应用程序的首次运行，因为它不会记录当前的 ssid，因此不知道刚刚连接的网络的 ssid 是什么。有什么想法吗？

```
public class EventMapper extends BroadcastReceiver
{
    private static String lastConnectedSsid = "";

    @Override
    public void onReceive(Context context, Intent intent)
    {
        if (intent.getAction().equals(WifiManager.SUPPLICANT_STATE_CHANGED_ACTION))
        {
            SupplicantState state = intent.getParcelableExtra(WifiManager.EXTRA_NEW_STATE);

            if(state == SupplicantState.COMPLETED)
            {
                WifiManager manager = (WifiManager)context.getSystemService(Context.WIFI_SERVICE);

                lastConnectedSsid = manager.getConnectionInfo().getSSID().replace("\"", "");

                Intent newIntent = new Intent();            
                newIntent.setAction(Event.App_Event_WifiConnected.name());
                newIntent.putExtra("App_Events_SSID", lastConnectedSsid);

                context.sendBroadcast(newIntent);
            }

            if(state == SupplicantState.DISCONNECTED)
            {
                boolean wifiEnabled = ((WifiManager)context.getSystemService(Context.WIFI_SERVICE)).isWifiEnabled();

                if(wifiEnabled)
                {
                    Intent newIntent = new Intent();            
                    newIntent.setAction(Event.App_Event_WifiDisconnected.name());
                    newIntent.putExtra("App_Events_SSID", lastConnectedSsid);

                    context.sendBroadcast(newIntent);   
                }
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-02T09:22:10.817

我在一些自定义 rom 中遇到了同样的问题。我使用“android.net.wifi.STATE_CHANGE”来监听网络变化。在接收器中，我使用 "(NetworkInfo)intent.getParcelableExtra("networkInfo")).getState()" 来获取网络状态。共有三种状态：DISCONNECTED、CONNECTING、CONNECTED。您可以使用 DISCONNECTED 来检测网络是否断开。

请让我知道它是否适用于您的情况（HTC One X (4.1)）。

# visual-web-gui - 在图片框中显示图像字符串数据。

> ID：15761133
> 
> 赞同：0
> 
> 时间：2013-04-02T09:55:13.197
> 
> 标签：visual-web-gui

我必须在 VisualWebGui 的图片框中显示图像。我有字符串格式的图像。

```
string ImageString_P;
FileStream fs_P = new FileStream(LocalDirectory + "Page_2.tif", FileMode.Open, FileAccess.Read);

byte[] picbyte_P = new byte[fs_P.Length];
fs_P.Read(picbyte_P, 0, Convert.ToInt32(fs_P.Length));
ImageString_P = Convert.ToBase64String(picbyte_P); 
```

现在，如何在图片框中显示此图像（ImageString_P）。我应该创建这个字符串数据的图像还是可以直接在 PictureBox 中显示这个数据？

如果我将在路径中创建图像（假设“c:\xyz.jpg”）。它（xyz.jpg）将如何显示在图片框中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:44:26.600

Visual WebGui 是一个 Web 应用程序，因此它基本上需要让浏览器专门请求任何应该呈现的图形数据，这与桌面应用程序有根本的不同，您可以简单地将图形数据本身分配给图像属性一个图片框。

如果你研究了一个带有 PictureBox 的网页是如何在 Visual WebGui 中呈现给浏览器的，你会看到 PictureBox 被呈现为一个 img 标记，其源被设置为一个 Url，它负责将图像提供给浏览器。当浏览器在 img 标记上看到该 Url 时，它会向服务器发出另一个请求以获取该 Url 的内容。这个“次要”请求在 Visual WebGui 中称为网关请求。

要将图形提供给浏览器，您需要在 Visual WebGui 应用程序中使用某种网关。Visual WebGui 中有几种类型的预定义网关，例如图像 (ImageResourceHandle) 和图标 (IconResourceHandle)，但在这种情况下，您有一个动态生成的图像，因此您需要定义自己的网关来提供图形内容。 ...或者您可以将图像数据写入应用程序的 Resources\Images 文件夹，然后使用 ImageResourceHandle 来引用它。

[在 Visual WebGui 中定义您自己的网关非常简单，您可以在这里](http://wiki.visualwebgui.com/pages/index.php/Images)看到很多示例。

希望这会有所帮助，帕利

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T13:18:13.120

你可以这样做：

```
string ImageString_P;
FileStream fs_P = new FileStream(LocalDirectory + "Page_2.tif", FileMode.Open, FileAccess.Read);

byte[] picbyte_P = new byte[fs_P.Length];
this.picMyPicture.Image = new DynamicStreamResourceHandle(contentBitmap, "image/jpeg"); 
```

它应该很好。

# java - org/dom4j/DocumentException

> ID：15761134
> 
> 赞同：2
> 
> 时间：2013-04-02T09:55:17.670
> 
> 标签：java, xml, excel, apache-poi

大家早上好 ，

我有允许我从 xml flye 创建一个 excel 文件的 java 代码。但它无法正确创建文件，我有这个例外，我不明白它的含义：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/dom4j/DocumentException
at org.apache.poi.openxml4j.opc.Package.init(Package.java:145)
at org.apache.poi.openxml4j.opc.Package.<init>(Package.java:132)
at org.apache.poi.openxml4j.opc.ZipPackage.<init>(ZipPackage.java:67)
at org.apache.poi.openxml4j.opc.Package.create(Package.java:271)
at org.apache.poi.xssf.usermodel.XSSFWorkbook.newPackage(XSSFWorkbook.java:245)
at org.apache.poi.xssf.usermodel.XSSFWorkbook.<init>(XSSFWorkbook.java:145)
at escel1.Escel1.main(Escel1.java:104)
Caused by: java.lang.ClassNotFoundException: org.dom4j.DocumentException
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:248) 
```

如果有人知道这意味着什么，那对我很有帮助:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T05:58:59.720

我找到了你的问题的关键。`dom4j-1.6.1-sources.jar` 您不应该将 jar 文件添加`dom4j-1.x.jar`到项目库中。因为带有源的 jar 文件的名称是纯 java 文件（xx.java），这意味着它根本没有被编译。

然后重建你的项目，它会正常工作。

希望能帮到你:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T05:19:35.797

Apache POI 有一个[方便的页面，列出了所有组件及其依赖项](http://poi.apache.org/overview.html#components)，您应该从阅读该页面开始！

其次，如果您下载了 Apache POI 的二进制 zip/tarball，那么它会在`/lib/`和`/ooxml-lib/`目录中包含您需要的所有依赖项。确保在类路径中包含所有[需要的依赖](http://poi.apache.org/overview.html#components)项！（你错过了一些，因此错误）

# php - 它可能在没有 ORDER By 子句的情况下反向 mysql 获取数组？

> ID：15761136
> 
> 赞同：-1
> 
> 时间：2013-04-02T09:55:24.303
> 
> 标签：php, mysql, arrays, arraylist

是否可以在不使用查询子句的情况下反转`mysql_fetch_array`值？`ORDER BY``SELECT`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:59:42.777

如果您想要的只是反转返回的数组，那么您可以使用`array_reverse`：

```
array_reverse($array); 
```

[您可以在文档](http://php.net/manual/es/function.array-reverse.php)中找到更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:00:18.930

当您执行 select 语句时，您永远无法确定返回项目的顺序。所以为了确定，你必须使用 order by 子句。如果您想要相反的顺序，请执行

```
ORDER BY columnA DESC 
```

大多数情况下，大多数数据库都会返回内容，没有按添加行的顺序排列，但它是不确定的。

# hadoop - java.sql.SQLException: 无法启动数据库 'metastore_db' 错误，同时使用 hive 初始化数据库

> ID：15761139
> 
> 赞同：3
> 
> 时间：2013-04-02T09:55:38.223
> 
> 标签：hadoop, permissions, mapreduce, hive, hdfs

我在 3 个集群上安装了 Hadoop 和 Hive。我可以从运行 HIVE 的集群节点登录到 hive。

> root@NODE_3 hive]# hive 使用 jar 中的配置初始化日志记录：file:/usr/lib/hive/lib/hive-common-0.10.0-cdh4.2.0.jar!/hive-log4j.properties Hive 历史文件=/ tmp/root/hive_job_log_root_201304020248_306369127.txt hive> 显示表；OK 所用时间：1.459 秒蜂巢>

但是当我尝试在我的集群节点上运行一些配置单元测试时，我得到以下错误。

这里它试图以用户 =ashsshar{my username} 身份初始化数据库

> 3/04/02 02:32:44 INFO mapred.JobClient：清理暂存区 hdfs://scaj-ns/user/ashsshar/.staging/job_201304020010_0080 13/04/02 02:32:44 错误 security.UserGroupInformation : PriviledgedActionException as:ashsshar (auth:SIMPLE) 原因:java.io.IOException: javax.jdo.JDOFatalDataStoreException: 无法创建数据库'/var/lib/hive/metastore/metastore_db'，有关详细信息，请参阅下一个异常。NestedThrowables: java.sql.SQLException: 无法创建数据库'/var/lib/hive/metastore/metastore_db'，有关详细信息，请参阅下一个异常。java.io.IOException: javax.jdo.JDOFatalDataStoreException: 无法创建数据库 '/var/lib/hive/metastore/metastore_db'，有关详细信息，请参阅下一个异常。NestedThrowables：java.sql.SQLException：无法创建数据库'

我尝试了两件事。

1\. 授予 cd /var/lib/hive/metastore/metastore_db 权限

1.  删除 rm /var/lib/hive/metastore/metastore_db/*lck

但我仍然遇到同样的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-30T23:13:43.520

创建元存储似乎是一个问题。我通过创建一个目录并将值设置为该目录来解决这个问题，如下所示：

步骤 1：在 home 上创建一个目录说它：hive-metastore-dir

第 2 步：作为超级用户编辑 hive-site.xml（其位于：/usr/lib/hive/conf），如下所示：

```
<name>javax.jdo.option.ConnectionURL</name>
  <value>jdbc:derby:;databaseName=/var/lib/hive/metastore/metastore_db;create=true</value> 
```

至

```
<name>javax.jdo.option.ConnectionURL</name> 
  <value>jdbc:derby:;databaseName=/home/hive-metastore-dir/metastore/metastore_db;create=true</value> 
```

**第 3 步：以sudo hive**启动 CLI并执行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-07T22:21:21.290

您可以从用户具有写入权限的目录登录到 hive 客户端。默认情况下，打开 shell 时，hive 将尝试在本地和 HDFS 中创建临时目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-10T17:04:12.823

如果您使用 CDH，请按照以下步骤操作 1\. 复制 /usr/lib/hive/conf/hive-site.xml 并粘贴到 /usr/lib/spark/conf/

这将解决“metastore_db”错误的问题

谢谢

# ios - iOS MVC - 数据类型转换发生在哪里？

> ID：15761140
> 
> 赞同：1
> 
> 时间：2013-04-02T09:55:48.113
> 
> 标签：ios, model-view-controller, design-patterns

我在构建 iPhone 应用程序时正在学习 MVC，并且想知道数据类型转换属于哪里？例如，我有一个 uitextfield，它以“12:59”（分钟：秒）的形式接受用户的持续时间。这必须转换为表示为整数的秒数。

所以我的问题是，模型对象是否应该接受字符串，进行转换并存储它？UIViewController 是否应该处理模型和视图之间的转换？或者我应该在文本字段上附加某种格式化程序对象来处理这个？

任何帮助是极大的赞赏。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T10:05:52.730

根据 MVC：

*   视图 - UITextField
*   模型 - 任何信息或数据
*   控制器 - 转换器/格式化程序，UIViewController

在现实生活中：我建议您将数据转换器/格式化程序和 UIViewController 结合起来，但如果您需要在其他类中使用此代码，最好编写像 DataConverter 这样的分离类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:04:33.633

**UIViewController**这包含所有**逻辑**，因此“12.59”必须在您的 textview 委托方法中转换为秒

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:02:12.370

在您的控制器中有委托，`UITextField`理想情况下，转换应在控制器中进行。

# windows - 如何在 GIT 中的窗口上合并具有不同大小写的分支？

> ID：15761141
> 
> 赞同：2
> 
> 时间：2013-04-02T09:55:48.320
> 
> 标签：windows, git, git-merge

我的同事偶然从我们的主分支“develop-Client”（大写“C”）创建了一个名为develop-client（小写“c”）的分支。我们都在窗户上工作。现在，我如何将开发客户端合并回开发客户端？Windows 中的 Git 将两个分支视为一个分支，因此当我尝试执行**“git merge --no-ff origin/develop-client”**（当我在开发客户端时）时，它会显示“已经是最新的”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:21:11.863

使用命令 git rev-parse Branch_name 确定其 SHA 并使用命令 git merge SHA1 合并

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:29:14.210

`HEAD`指定要合并的分支的提交的哈希值，或者手动将有问题的分支重命名为`.git/refs/heads`目录内的临时名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-10T22:36:13.237

这发生在我的本地存储库中。这是远程之前的一次提交。我只是按照迈克尔的建议重命名了文件：在

```
.git/refs/heads/<in-lower-case> 
```

到

```
.git/refs/heads/<in-Capital-case> 
```

由于我也意外推送到远程，我删除了上游小写分支（在我的情况下是在 Github），并在我的本地仓库中更改了遥控器：

```
.git/refs/remotes/origin/<in-lower-case> 
```

到

```
.git/refs/remotes/origin/<in-Capital-case> 
```

# many-to-many - SSAS 计算度量：访问关系数据库

> ID：15761145
> 
> 赞同：2
> 
> 时间：2013-04-02T09:56:04.700
> 
> 标签：many-to-many, ssas, olap, measure

我最近问[了一个](https://stackoverflow.com/questions/15250014/intersection-in-mdx)关于多对多关系的问题，以及如何使用它们来计算得到很好回答的交叉点。现在，我们的多维数据集还有另一个很好的需求，可以将其扩展到更多数据。一般问题仍然存在：`How many orders contain both product x and y?`

但是，度量值组现在要大得多，目前大约有 14 亿行。我尝试使用另一篇文章中描述的方法来实现这一点，其中包含几个隐藏的交叉引用度量组。但是，这对于我们的硬件来说实在是太大了，立方体的大小接近 0.5 TB，并且查询需要几分钟才能完成。

现在我会尝试使用另一个选项：我可以通过计算度量访问我们的关系数据库吗？看来我可以使用[本文中描述的](http://msdn.microsoft.com/en-us/library/ms713711(v=vs.85).aspx)UDF 。我可以在 C# 中编写一个函数来查询我们的关系数据库并返回包含用户选择的产品的所有订单。但为了做到这一点，我需要将用户选择的所有维度数据提供给 UDF。我还需要 UDF 返回计算值，以便将其作为计算成员的结果输出。那可能吗？如果是，如何？microsoft 提供的示例仅包含一个小的确定性字符串函数作为 UDF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:57:51.293

这是我自己的结果：

这似乎是可能的，尽管有局限性。该类`Microsoft.AnalysisServices.AdomdServer.Context`可以为您提供每个层次结构的 currentMember，但这不适用于 Excel-Style-Subselects。它要么包含单个成员，要么包含 AllMember。

另一种选择是使用 dmv 获取 MDX 查询`SELECT * FROM $System.DISCOVER_SESSIONS`。该视图上会有一个列，其中包含给定会话的最后一个 mdx 查询。但是，为了不覆盖您自己的最后一个查询，您将不需要使用当前连接，而是打开一个新连接。session id 可以通过`Microsoft.AnalysisServices.AdomdServer.Context.CurrentConnection.SessionID`.

第二种方法适用于我们的用例。它**不允许**你处理轴，因为 udf 函数有一个单元格范围，但你不知道你在哪个单元格中。如果你们中的任何人知道最后一点，请告诉我。谢谢！

# javascript - noscript 标签在 Internet Explorer 上不起作用

> ID：15761148
> 
> 赞同：1
> 
> 时间：2013-04-02T09:56:17.160
> 
> 标签：javascript, html, css, internet-explorer, noscript

我有一个网站，其`<noscript>`标签在除 IE (7,8,9,10) 之外的所有浏览器上都可以正常工作。在 Internet 选项中的安全设置下禁用脚本后，我只能在我的 PC`<noscript>`上查看 IE 上的内容，但在其他 PC（几乎全部）上我看不到代码。使用这些 PC，我们对 Gmail 和 FB 的站点使用相同的设置，并且我们确实收到了未启用 js 的警告。

这是 HTML：

```
<noscript>
    <div class="noscript">
        JavaScript must be enabled in order for you to use WEBSITE NAME in standard view.<br />
        However, it seems JavaScript is either disabled or not supported by your browser.<br />
        To use standard view, enable JavaScript by changing your browser options, then <a href="">try again</a>. 
    </div>
</noscript> 
```

CSS：

```
.noscript {
    background: red;
    color: #fff;
    padding: 10px;
    text-align: center;
    position: relative;
    z-index: 3;
} 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-28T22:21:46.167

也遇到过这个问题。我有这个在 IE 中工作，然后它突然停止了。我发现，如果您的 css 嵌套在实际 css 定义中的 noscript 标签下，它将**无法**工作。如果你只使用一个类名就可以了。

我正在使用 IE 10 进行测试，并使用他们的开发工具将文档模式更改为较旧的浏览器模式以进行验证。实际使用旧版浏览器时，结果可能会有所不同。如果是这种情况，请回来报告。

**示例 html：**

```
<noscript>
    <div class="noscript">
        JavaScript must be enabled ...
    </div>
</noscript> 
```

**不工作：**

```
// classes nested beneath a noscript tag are not applied by IE
noscript div.noscript {
        display: block;
        text-align: center;
        color: white;
        font-weight: 700;
        background: #D53333;
        margin: 0 auto;
        padding: 4px;
    } 
```

**是否有效：**

```
div.noscript {
    display: block;
    text-align: center;
    color: white;
    font-weight: 700;
    background: #D53333;
    margin: 0 auto;
    padding: 4px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-27T04:35:55.857

我记得当我刚接触 html 时，我是如何努力解决这个问题的。虽然，我还没有找到解决问题的方法，但我发现了一个非常好的技巧，可以很好地完成这项工作。它已经解释如下：

**通常**，我们为此使用**noscript标签。**但 Internet Explorer 不支持此标记。

因此，不要采用常规方式，而是使用**div**标签而不是**noscript**标签。给它一个**id**。稍后在结束正文标记上方，添加一个脚本标记并粘贴以下代码：

```
var noscript = document.getElementById('_id_of_the_div_used_instead_of_noscript');
noscript.style.display = 'none'; 
```

**上面的代码是做什么的？**
它获取**#noscript**元素并将其显示样式设置为“无”。因此它消失了。

**这是如何运作的？**
这是有效的，因为如果脚本被禁用，您粘贴上述代码的脚本标签将不起作用。因此**div#noscript**仍然可见。但是如果启用了脚本，上面的代码会使**div#noscript**消失。它就像**noscript**标签一样工作。

## 请参见下面的示例：

通常我们这样做：

*   html:`<noscript> please enable javascript ... </noscript>`
*   CSS：`noscript{background-color: red; color: white; font-size: 24px; ... }`

* * *

而是这样做：

*   html:`<div id="noscript"> please enable javascript ... </div>`
*   CSS：`#noscript{background-color: red; color: white; font-size: 24px; ... }`
*   js：`document.querySelector('#noscript').style.display="none";`

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-02T10:13:04.940

试试这个 CSS

```
.noscript {
   background: red;
   top: 100px; 
   color: #fff;
   padding: 10px;
   text-align: center;
   position: relative;
   z-index: 3;
} 
```

# java - jstack：“JNI 全局引用”是什么意思？

> ID：15761149
> 
> 赞同：1
> 
> 时间：2013-04-02T09:56:18.503
> 
> 标签：java, debugging, jstack

运行该`jstack`工具时，在所有堆栈跟踪之后，最后一行是这样的输出：

```
JNI global references: 1319 
```

[What is 'JNI Global reference'](https://stackoverflow.com/questions/112603/what-is-jni-global-reference)这个问题 解释了“JNI Global reference”是什么，但我不明白这个值对 jstack 输出的意义。

那么：这个数字是什么意思，为什么它与 jstack 的输出有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:18:25.507

看了这么几篇文章我猜想： 1.数字是引用计数 2.jstack正在查看jvm，jvm的jni级别有全局引用限制。

# cuda - 如何从包含设备成员变量的类中调用 CUDA 内核

> ID：15761151
> 
> 赞同：0
> 
> 时间：2013-04-02T09:56:19.877
> 
> 标签：cuda, gpgpu

我想使用 CUDA 5.0 链接来编写可重用的 CUDA 对象。我已经设置了这个简单的测试，但是我的内核静默失败（运行时没有错误或异常并输出垃圾）。

我的简单测试（如下）将整数数组分配给 CUDA 设备内存。CUDA 内核应该使用顺序条目 (0,1,2,....,9) 填充数组。设备数组被复制到 CPU 内存并输出到控制台。

目前，此代码输出“0,0,0,0,0,0,0,0,0”，而不是所需的“0,1,2,3,4,5,6,7,8,9, ”。它是使用 VS2010 和 CUDA 5.0 编译的（设置了 compute_35 和 sm_35）。使用 GeForce 580 在 Win7-64 位上运行。

在 Test.h 中：

```
class Test
{
public:
    Test();
    ~Test();
    void Run();
private:
    int* cuArray;
}; 
```

在 Test.cu 中：

```
#include <stdio.h>
#include <assert.h>
#include <cuda_runtime.h>

#include "Test.h"

#define ARRAY_LEN 10

__global__ void kernel(int *p)
{
    int elemID = blockIdx.x * blockDim.x + threadIdx.x;
    p[elemID] = elemID;
}

Test::Test() 
{
    cudaMalloc(&cuArray, ARRAY_LEN * sizeof(int));
}

Test::~Test() 
{
    cudaFree(cuArray);
}

void Test::Run()
{
    kernel<<<1,ARRAY_LEN>>>(cuArray);
    // Copy the array contents to CPU-accessible memory
    int cpuArray[ARRAY_LEN];
    cudaMemcpy(static_cast<void*>(cpuArray), static_cast<void*>(cuArray), ARRAY_LEN * sizeof(int), cudaMemcpyDeviceToHost);

    // Write the array contents to console
    for (int i = 0; i < ARRAY_LEN; ++i)
        printf("%d,", cpuArray[i]);
    printf("\n");
} 
```

在 main.cpp 中：

```
#include <iostream>
#include "Test.h"
int main()
{

    Test t;
    t.Run();
} 
```

我已经`__device__ __host__`按照@harrism 的建议尝试了DECL（），但没有效果。

谁能建议如何制作他的作品？（代码不在类中时有效。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:02:19.550

您使用的设备是 GTX 580，其计算能力为 2.0。如果您为任何大于 2.0 的架构编译代码，内核将不会在您的设备上运行，并且输出将是垃圾。编译计算 2.0 或更低版本的代码，代码将运行良好。

# ios - 在 iOS 中写入 NSOutputStream 时使用 CFString 进行大量分配

> ID：15761153
> 
> 赞同：0
> 
> 时间：2013-04-02T09:56:22.777
> 
> 标签：ios, sockets, memory-management, nsstring

我在写入 NSOutputStream 时遇到大量分配问题。我一起使用了几个类，这些类应该将数据从 AudioUnit 流式传输到远程服务器。下面的代码：

音频处理器.m

```
Data *data = [Data sharedData]; //it's shared data I use to store information for the final socket

intFromBuffer = audioBufferList->mBuffers[0].mData;
NSUInteger length = audioBufferList->mBuffers[0].mDataByteSize;

NSMutableData *dataOut = [[NSMutableData alloc] initWithCapacity:0];
[dataOut appendBytes:(const void *)intFromBuffer length:length * sizeof(SInt16)];

[data setOutput:dataOut]; //it writes data to the shared data 
```

数据.m

```
@implementation Data
NSMutableData *output;
NSMutableData *input;

@synthesize output;
@synthesize input;

+(id)sharedData {
static Data *sharedData = nil;

@synchronized(self) {
    if (sharedData == nil) {
        sharedData = [[self alloc] init];
    }
    return sharedData;
  }
}

-(void) setOutput:(NSMutableData*)outputt{
    output = outputt;
}

-(void) setInput:(NSMutableData*)inputt{
    input = inputt;
}

@end 
```

网络通讯.m

```
- (void) observeValueForKeyPath:(NSString*)keyPath ofObject:(id)object change:(NSDictionary*)change context:(void*)context {
//NSLog(@"changed!!!!");
if ([keyPath isEqualToString:@"output"]) {
    Data *data = [Data sharedData];
    [self writeOut:data.output];

    }
}

- (void)writeOut:(NSString *)s {
    NSString *dataTo = [NSString stringWithFormat:@"%@\n", s];
    NSData *data = [[NSData alloc] initWithData:[dataTo dataUsingEncoding:NSASCIIStringEncoding]];
    [outputStream write:[data bytes] maxLength:[data length]];
} 
```

它通常会创建大量数据，在 2.5 分钟内，虚拟内存中大约有 200 MB。我试图简单地`stringWithFormat:`直接传递给我的`writeOut:`函数，但是它什么也没提供，不知道如何处理它。

如果有人问我为什么使用 stringWithFormat，仅仅是因为我需要放置`\n`服务器来读取消息。

非常感谢任何帮助。

编辑1：

我用不同的方式绑它。在我的 AudioProcessor.m 中（因为这是创建的数据 - 在录音机回调中）我这样设置：

```
dataOut = [[NSMutableData alloc] initWithCapacity:0];
[dataOut appendBytes:(const void *)intFromBuffer length:length * sizeof(SInt16)];

net = [NetworkCommunication init];

const char *s = [dataOut bytes];

[[net outputStream] write:s maxLength:strlen(s)]; 
```

现在它会生成类型为 Malloc 1,00KB 和 Malloc 2,00 KB 的疯狂分配，其中`NSThread callStackSymbol`和`NSThread callStackReturnAddresses`. 还有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:34:13.413

您是否尝试发送 C 字符串？

```
const char *s = [dataTo UTF8String];
[outputStream write:s maxLength:strlen(s)]; 
```

# excel - Excel时间跨度计算时间报告

> ID：15761154
> 
> 赞同：1
> 
> 时间：2013-04-02T09:56:25.353
> 
> 标签：excel, ms-office

我需要为我的公司写一份时间报告。

可悲的是，我必须使用给定的格式：

```
B1: 9.00 - 18.00 //timespan between arrival and leaving

C1: 60.00 //minutes I spent in drinking coffee

D1: 8.00 // total hours of work 
```

我需要一个公式，a) 计算 A1 中两个时间之间的总小时数，减去休息的分钟数，然后给我在 D1 中工作的总小时数。我不允许更改单元格的格式（例如在列中分别写入到达和离开时间），这使得它变得复杂。

提前谢谢你，哈利

### 更新

```
=IF(ISBLANK(B16)," ",(TIMEVALUE(TRIM(RIGHT(B16, SEARCH("-",B16,1)-1)))-TIMEVALUE(TRIM(LEFT(B16, SEARCH("-",B16,1))))) * 24 -C16/60) 
```

现在工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:15:26.277

您可以尝试 D1 中的结果：

```
=TRIM(RIGHT(B1, SEARCH(" - ",B1,1)))-TRIM(LEFT(B1,SEARCH(" - ",B1,1)-1))-C1/60 
```

或者如果连字符 (-) 之间没有空格，我建议：

```
TRIM(RIGHT(B1, SEARCH("-",B1,1)-1))-TRIM(LEFT(B1,SEARCH("-",B1,1)-1))-C1/60 
```

**解释：**

`=TRIM(RIGHT(B1, SEARCH(" - ",B1,1)-1))`= 时间跨度的右侧部分 (18.00)

`=TRIM(LEFT(B1,SEARCH(" - ",B1,1)-1))`= 时间跨度的左边部分 (9.00)

`C1/60`= 休息分钟（1 小时 = 60 分钟）

# javascript - Angular 未使用 ng-click 提交参数

> ID：15761156
> 
> 赞同：3
> 
> 时间：2013-04-02T09:56:40.307
> 
> 标签：javascript, angularjs

我正在尝试在 Angular 应用程序中提交标准表单。一切正常，直到我尝试将 ng-click 添加到表单的提交按钮单击操作只是为了给用户一些反馈。

我的行为有点奇怪。提交完成，点击行为的调用都被调用了，但是，没有随表单提交的参数。

我一直在谷歌搜索，人们似乎说在表单上使用 ng-click 禁用提交，但事实并非如此，每个工作正常，除了未发送的表单参数。

我知道我可能可以重新定义自己的提交功能，使用 ng-submit 拦截帖子并自己做帖子，这似乎有点矫枉过正，因为我想做的几乎是工作。（在这种情况下，我如何从角度回调中获取表单参数？）

## 更新

这是一个实时示例： http: [//jsfiddle.net/hHapg/5/](http://jsfiddle.net/hHapg/5/.If)。如果您选中一个框并提交，则 URL 上没有参数。如果您编辑文件并删除提交按钮上的 ng-click，它就可以工作。

```
<form ng-app="test" action="/echo/jsonp" name="orders" target="_blank" ng-controller="test">
    <table>
    <tr ng-repeat="order in [{orderId:1}, {orderId:4}]" >
        <td>
            <input  type="checkbox" name="order_ids{{i}}" value="{{order.orderId}}"></input>
        </td>
        <td>
            {{order.orderId}} : {{ order.checked}}
        </td>

    </tr>
    </table>
    <input type="submit" name="action" value="Picking List" class="btn btn-primary picked" ng-clik="submit(true)">
</form> 
```

## 解决方案

发现了问题。尽管真正的代码并不完全是我发布的代码。在兰登的帮助下，我设法解决了这个问题。问题是我在表单声明中有一个硬编码数组（而不是在我的示例中的 ng-repeat 中）。（从角度来看，它是硬编码的，但实际上是在运行时生成的）。将此数组移动到顶部（与 ng-ap 相同），解决了 prome。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:52:13.297

您是否在所有标签上设置`name`属性？我想大多数 Angular 示例都不包含该属性，因为提交表单似乎已成为过去。`input``select``name`

下面的简化示例工作正常。我需要查看您的特定代码，以帮助您解决可能存在的其他问题。

**[http://jsfiddle.net/langdonx/DUV9q/](http://jsfiddle.net/langdonx/DUV9q/)**

HTML：

```
<form ng-app="test" ng-controller="test" action="/echo/jsonp/" method="get">
    <input type="text" name="value1" ng-model="value1"/>
    <input type="text" name="value2" ng-model="value2"/>
    <input type="submit" ng-click="submit()">
</div> 
```

JavaScript：

```
var app = angular.module('test', []);

app.controller('test', function ($scope, $http) {
    $scope.value1 = "val 1 here";
    $scope.value2 = "and val 2 here";

    $scope.submit = function () {
        alert('it should submit now, if it worked, you\'ll see some json');
    }
}); 
```

# java - 将 Autoit 集成到 selenium：在 Selenium 脚本中获取 AutoIT 代码中的变量值

> ID：15761159
> 
> 赞同：0
> 
> 时间：2013-04-02T09:56:44.380
> 
> 标签：java, selenium-webdriver, autoit

我的要求是自动配置实例（我正在开发的公司产品的实例）。场景是这样的，在我的配置中间，控件从窗口转到浏览器，其余的配置过程在浏览器中处理，因此整个过程是基于窗口和基于浏览器的组合。我已经使用 AutoIT 完成了基于窗口的配置，当控件转到浏览器时，我正在使用`_FFStart() $ffUrl = _FF_GetCurrentURL()`. 我在 AutoIT 脚本的变量中获取 URL。我想通过 Selenium 自动化进一步的基于 Web 的配置。我从我的 Java 类中调用这个 AutoIT 编译的脚本。我的问题是，有没有一种方法可以获取保存在 AutoIT 脚本中的 URL，以便创建 Web 驱动程序实例、使用 URL 打开浏览器并使用 Selenium 进一步处理我的配置过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T20:59:39.793

如果您从代码中启动/运行 exe 文件，则可以将路径变量作为参数，例如：

$va = "我的变量" run("myexe.exe $var)

或等效的

或一般来说：

您可以通过多种方式在应用程序/进程之间共享变量

*   使用 windows 消息查找 _WinAPI_PostMessage 函数，该函数将消息发送到特定窗口或广播消息到所有窗口，以便所有正在运行的应用程序在 autoit 中获取消息（也可以传递 2 个变量）您可以设置一个运行的函数（停止主程序）当您的 autoit 应用收到此类消息和变量时

*   您可以设置 UDP 或 TCP 通道，以便您正在运行的应用程序可以通信（UDP 应该可以正常工作）一个应用程序是服务器另一个是客户端

*   文件通信设置，将要发送的变量或信息写入文件，其他应用程序读取文件（与第一种方法结合使用会很好：应用程序'A'将数据写入文件'data.msg'然后向应用程序“B”发送消息，在收到消息后读取“data.msg”）您可以建立复杂的协议以及确认消息等，以防您的应用程序需要它。

_WinAPI_RegisterWindowMessage _WinAPI_PostMessage GUIRegisterMsg

是相关功能，您可以在 autoit 帮助中查找它们

如果您认为其中任何一个是可行的，但您需要进一步的帮助，我可以编写一个简单的代码，在实践中证明这一点

# ios - AVPlayer 在自定义类中不起作用

> ID：15761162
> 
> 赞同：0
> 
> 时间：2013-04-02T09:56:58.093
> 
> 标签：ios, objective-c, avplayer

我不知道我哪里出错了。[audioPlayer 播放]、[audioPlayer 停止] 不起作用。因为 audioPlayer 为零。但是，如果我尝试在状态检查 AVPlayerStatusReadyToPlay 中播放 audioPlayer，那么它可以正常工作，但其他按钮仍然无法正常工作，同样的 audioPlayer nil。

**自定义类.h**

```
@property (nonatomic, retain) AVPlayer *audioPlayer; 
```

**自定义类.m**

```
-(void)prepareAudioPlayerFor:

    NSURL *urlPath = [NSURL URLWithString:@"http://freshmp3music.ru/music/04.2013/chris_brown_-_fine_china_(www.freshmp3music.ru).mp3"];

   AVAsset *asset = [AVURLAsset URLAssetWithURL:urlPath options:nil];
   AVPlayerItem *anItem = [AVPlayerItem playerItemWithAsset:asset];

   AVPlayer *player = [AVPlayer playerWithPlayerItem:anItem];

    audioPlayer = player;

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(playerItemDidReachEnd:)
                                                 name:AVPlayerItemDidPlayToEndTimeNotification
                                               object:[audioPlayer currentItem]];

    [audioPlayer addObserver:self forKeyPath:@"status" options:0 context:nil];
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {

    if (object == audioPlayer && [keyPath isEqualToString:@"status"]) {
        if (audioPlayer.status == AVPlayerStatusFailed) {
            NSLog(@"AVPlayer Failed");

        } else if (audioPlayer.status == AVPlayerStatusReadyToPlay) {
            NSLog(@"AVPlayerStatusReadyToPlay");
            if(audioPlayer.currentItem == nil)
            {
                UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"No Audio Anthem Found" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
                [alert show];

            }else
            {

                NSLog(@"readyToPlay");
              //  [audioPlayer play];  // Here Play works fine but still other buttons not work
            }

        } else if (audioPlayer.status == AVPlayerItemStatusUnknown) {
            NSLog(@"AVPlayer Unknown");

        }
    }
}
- (void)playerItemDidReachEnd:(NSNotification *)notification {
    NSLog(@"finished");

   // [self playPauseBtn:nil];
    CMTime fiveSecondsIn = CMTimeMake(0, 1);
    [audioPlayer seekToTime:fiveSecondsIn];
    [audioPlayer pause];
}

- (IBAction)playBtn:(id)sender {
    if (audioPlayer == nil) {
        NSLog(@"Player Nil");
    }
    [audioPlayer play]; // this don't work why

}

OUTPUT : AVPlayerStatusReadyToPlay
OUTPUT : readyToPlay
OUTPUT : Player Nil 
```

# java - 在运行时更新属性文件

> ID：15761163
> 
> 赞同：0
> 
> 时间：2013-04-02T09:56:58.317
> 
> 标签：java, spring, jakarta-ee

我有一个使用 Spring 的项目（比如 A）。项目 A 在内部依赖于其他项目（比如 B）的几个任务。所以 B 项目 URL 可以在 A 项目的 server.properties 文件中配置。

因此，现在每次更改 B 项目的 URL 时，我都必须关闭 A 项目，更改 server.properties 文件中的 URL，然后再次启动服务器。

所以我要求用户使用 GUI 输入新的 URL 并在运行时更改 URL。

我知道可以在运行时更改属性的值，但它只会为该会话设置，而不是对属性文件的实际修改，一旦服务器再次重新启动，它将引用旧 URL，因为存在实际更改在会话中，而不是实际的属性文件。

我的实际需要是更改应该反映在属性文件中（以便将来重新启动服务器，它应该可以工作）以及 bean 配置文件（对于当前会话 - 我知道该怎么做。）

现在我的要求是，每当配置发生任何更改时，它也应该在物理上更改属性文件......是否有任何巧妙的方法可以做到这一点，而不是读取文件并搜索该键然后替换子字符串。

是否有任何第三方 api 可以很好地做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:15:54.763

你可以看看[commons的配置](http://commons.apache.org/proper/commons-configuration/)。[在此处](http://commons.apache.org/proper/commons-configuration/userguide/howto_filebased.html#File-based_Configurations)查看基于文件的保存和重新加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-06T13:59:03.673

您可以使用[Commons Configuration API](http://commons.apache.org/proper/commons-configuration/)在运行时更新属性文件，然后按键获取值。这是很好的工作[示例更新和读取属性](http://javabycode.com/java-core/java-io/how-to-update-properties-file-in-java.html)

希望这有帮助！

# java - 格式化字符串货币

> ID：15761166
> 
> 赞同：2
> 
> 时间：2013-04-02T09:57:03.797
> 
> 标签：java

我正在尝试使用以下代码将 3000 显示为 €300,0：

```
String formattedString = String.format("%.2€;",3000);  
System.out.println("format: "+formattedString); 
```

但导致强制关闭错误。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T09:58:00.337

我建议改用特定于区域设置的货币格式

```
NumberFormat currencyFormat = NumberFormat.getCurrencyInstance(Locale.getDefault()); 
```

那样更好的I18N。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:01:00.333

查看[Java API：NumberFormat](http://docs.oracle.com/javase/tutorial/i18n/format/numberFormat.html)。它将展示如何使用**预定义**的格式来实现您的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:01:35.917

尝试这样的事情：

```
import java.text.NumberFormat;
import java.util.Locale;

Locale locale = new Locale("en", "UK");
NumberFormat fmt = NumberFormat.getCurrencyInstance(locale);//use Locale.getDefault() if you didn't know the type
System.out.println(fmt.format(100.00)); 
```

这将打印：£100.00

# ios - free 没有发生并导致 ios 中的内存溢出

> ID：15761173
> 
> 赞同：0
> 
> 时间：2013-04-02T09:57:27.507
> 
> 标签：ios, xcode, malloc, free, instruments

在 ARC XCode 应用程序中，它使用原生 C 库。

当库函数被连续调用大约 2000 次时，应用程序在 iPad 设备上停止工作。

“仪器”显示，只有“Malloc”被积累，“免费”未被考虑。

我不知道，“免费”电话会发生什么。

代码如下：

内存分配：

> efHeapSize = EF_MIN_HEAPSIZE; pEFHeap = (void *)malloc(efHeapSize);
> 
> cedHeapsize = heapMemorySize - efHeapSize; pCEDHeap = (void *)malloc(cedHeapsize);

内存空闲：

> 如果（pEFHeap！= NULL）{
> 
> ```
> free (pEFHeap);
> pEFHeap = NULL;
> printf("pEFHeap freed \n"); 
> ```
> 
> }
> 
> ```
>  if (pCEDHeap != NULL)   {
> free (pCEDHeap);
> pCEDHeap = NULL;
> printf("pCEDHeap freed \n"); 
> ```
> 
> }

# sql - 如果查询返回一行，如何选择一条记录，或者如果查询返回更多行，如何选择无记录？

> ID：15761175
> 
> 赞同：7
> 
> 时间：2013-04-02T09:57:36.053
> 
> 标签：sql, oracle

如果只有一行存在，我需要选择一行，如果有更多行，它应该选择 0 行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T10:08:38.923

如果您使用的是 PL/SQL，那么如果返回多于一行，则选择使用的列`select-into`将引发异常：`too_many_rows`

```
declare
  var table.column%type;
begin
  select column
  into   var
  from   table
  where  ...;
end; 
```

如果您只想使用 SQL 来执行此操作，那么您可以执行以下操作：

```
select *
from
  (select s.*, count(*) over () c
   from
    (select *
     from table
     where ...
     and   rownum <= 2
    ) s
)
where c = 1 
```

**更新**

正如 DazzaL 在评论中所说，`rownum <= 2`限制的原因是如果结果集中有超过 2 行，则将查询短路。如果数据集很大，这可以带来显着的性能优势。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T10:29:57.553

我想出了这个，只是为了它，使用 CTE

```
With counter as
( select count(any_field) as cnt from your_query
)
SELECT
  your_query
WHERE exists (SELECT cnt from Counter WHERE cnt=1) 
```

有 1 条记录时为 1 行 - [http://sqlfiddle.com/#!4/84c7b/2](http://sqlfiddle.com/#!4/84c7b/2)
超过 1 条记录时为 0 行 - [http://sqlfiddle.com/#!4/95c4a/1](http://sqlfiddle.com/#!4/95c4a/1)

**编辑**
或者如果你想避免重复整个查询......一个例子：（
*使用来自 sqlfiddle [http://sqlfiddle.com/#!4/6a2d8/117](http://sqlfiddle.com/#!4/6a2d8/117)的模式）*

```
With results as
( select * from montly_sales_totals
),
counter as
( SELECT count(name) as cnt FROM results
)
SELECT *
FROM results
WHERE exists (SELECT cnt from Counter WHERE cnt=5) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T10:34:53.527

```
SELECT fld1, fld2
FROM (SELECT COUNT(*) over() cnt ,fld1, fld2 FROM tbl WHERE fld1 = 'key')
WHERE cnt = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T14:15:38.990

> 如果只有一行存在，我需要选择一行，如果有更多行，它应该选择 0 行。

我假设该表仅包含您有兴趣查看（或不查看）的行，在这种情况下，我会写类似

```
select *
  from table1
 where 1 = (select count(1) 
              from table1
           ) 
```

如果您只想从表的结果子集中查看一行，我会选择类似的内容：

```
with t as ( select *
              from table1
             where [put here your condition]
)
select *
  from t
 where 1 = (select count(1) 
              from t
           ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-07T11:43:53.507

试试这个：

```
SELECT f1,f2
FROM  Table
WHERE (f1 = @f1) AND (f2=@f2) AND (f3=@f3)
GROUP BY f1,f2
HAVING (COUNT(*) = 1) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-02T10:06:01.810

试试这个：

```
SELECT col1, col2 FROM
(SELECT count(id) as 'cnt', col1, col2 FROM table_name WHERE col1='value') 
WHERE cnt=1; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-02T10:08:54.463

声明 COL_COUNT NUMBER；
BEGIN
COL_COUNT: = 0 ;
SELECT COUNT (1) INTO COL_COUNT FROM USER_TAB_COLUMNS WHERE TABLE_NAME = '(你的表名)';
IF COL_COUNT = 0 THEN
EXECUTE IMMEDIATE ('select * from dual') ;
万一;
结尾;

# google-maps - 不支持控制工具的缩放和平移效果

> ID：15761180
> 
> 赞同：1
> 
> 时间：2013-04-02T09:57:41.753
> 
> 标签：google-maps, jquery-mobile, google-maps-api-3

我需要在没有控制工具帮助的情况下包含平移效果和缩放效果。在手机和平​​板电脑中的实现，所以我不需要工具栏而不是需要触摸缩放和拖动平移效果。是否可以实施？寻找建议

```
var myLatlng = new google.maps.LatLng(Lat, Long);
      var myOptions = {
    zoom: 10,
    maxZoom : 24,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
       draggable: false
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:12:27.233

这是代码：

只需添加`disableDefaultUI: true`

```
function initialize() {
 var mapOptions = {
 zoom: 10,
 center: new google.maps.LatLng(-33, 151),

 disableDefaultUI: true, // <- this

 mapTypeId: google.maps.MapTypeId.ROADMAP
 }
 var map = new google.maps.Map(document.getElementById("map-canvas"),
 mapOptions);
} 
```

[**例子**](https://google-developers.appspot.com/maps/documentation/javascript/examples/control-disableUI)

# php - 无法发送电子邮件标题

> ID：15761181
> 
> 赞同：0
> 
> 时间：2013-04-02T09:57:45.093
> 
> 标签：php

我无法以 html 形式发送从邮箱携带的电子邮件地址。当我用 someone@yahoo.com 填写表单邮箱时，电子邮件被发送到邮箱，但是当我用 someon@gmail.com 填写表单邮箱时，电子邮件脚本有效，但电子邮件没有进入邮箱或垃圾邮件文件夹。

```
-----*This is the html code*-------

<input type="email" name="email" id="email" size="70" /></td>

-----*-------------

$email_from = "$mail";
$email_to = "someone@gmail.com"; 
$email_message ="test message";

$email_subject = "Registration form "; // email subject line

$headers .= 'MIME-Version: 1.0'."\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1'."\r\n";
$headers .= 'From:'.$mail;
mail($email_to, $email_subject, $email_message, $headers); 
```

# php - Yii CGridview 复选框 ajax 数据库更新

> ID：15761185
> 
> 赞同：2
> 
> 时间：2013-04-02T09:58:00.300
> 
> 标签：php, ajax, yii, cgridview

我在yii cgridview中列出了三个项目，每一行都有一个复选框，点击当前行项目的状态应该在数据库中更新。请提供一些实现这一点的想法。

![在此处输入图像描述](https://i.stack.imgur.com/0QR5I.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:42:57.967

您可以使用 cgridview 列数组的 ajax 属性。请在下面找到示例。

```
 array(
        'header'=>'Status',
        'type'=>'raw',
        'value'=>'CHtml::CheckBox("$data->active",$data->active,array(
         "ajax" => array(
                    "type"=>"POST", 
                    "url"=> ApplicationConfig::getURL("user", "twitterFeed", "changeStatus",array("feed_id"=>$data->feed_id)),
                    "dataType"=>"text",
                    "data" => array("ap_programType_id" => $data->feed_id),
                    "success" => "js:function(html){
                           if(html==\"1\"){
                               $(\"#active$data->feed_id\").attr(\"checked\",\"checked\");
                               window.location.reload()
                           }
                               else if(html==\"0\"){
                               $(\"#active$data->feed_id\").attr(\"checked\",false);
                               window.location.reload()
                           }

                    }",
                    "error"=>"function (xhr, ajaxOptions, thrownError){
                            alert(xhr.statusText);
                            alert(thrownError);}",
            ),
        "style"=>"width:50px;","feed_id"=>$data->feed_id,"id"=>"active".$data->feed_id))',
        'htmlOptions'=>array("width"=>"50px"),
    ), 
```

# javascript - JSLint 函数报表中的背景颜色是什么意思？

> ID：15761190
> 
> 赞同：1
> 
> 时间：2013-04-02T09:58:09.807
> 
> 标签：javascript, jslint

我刚刚用 JSLint 测试了我的代码，函数报告背后的背景颜色是白色、淡黄色、蓝色和绿色。

我找不到关于他们的信息？

我认为它们不仅仅是为了装饰，而是它们的含义是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:07:24.817

它们代表不同级别的嵌套。您会发现它们与它们出现的块的缩进相匹配。

# asp.net - 将 Checklistbox 与 SqlServerDatabase 绑定

> ID：15761197
> 
> 赞同：0
> 
> 时间：2013-04-02T09:58:21.230
> 
> 标签：asp.net, sql-server-2008

我想在 sqlserver2008 中将一个复选框与数据库绑定。我在用户控制模块上的 asp.net C# 中工作。我写了一个代码。我想知道代码是否完美，也想知道在哪种情况下我应该放置此代码以获得正确的输出。

```
{
  int Post_Id = int.Parse(ViewState["ID"].ToString());
    SqlConnection cn1 = new SqlConnection();
    cn1.ConnectionString=
    ConfigurationManager.ConnectionStrings["SiteSqlServer"].ConnectionString;
    SqlDataAdapter da = new SqlDataAdapter("SelectTags", cn1);
    DataTable ds = new DataTable();
    SqlCommand cmnd1 = new SqlCommand("SelectTags", cn1);
    cmnd1.Parameters.AddWithValue("@Post_Id",Post_Id);
    cmnd1.CommandType = CommandType.StoredProcedure;
    cn1.Open();
    cmnd1.ExecuteNonQuery();
    da.Fill(ds);
    cn1.Close();
    foreach (DataRow dr in ds.Rows)
    {
        String field1 = dr["Tag_Name"].ToString();
        CheckBoxList2.Items.Add(field1);
        CheckBoxList2.DataBind();
    } 
} 
```

sql server 2008 的 SQL 查询

```
GO
/****** Object:  StoredProcedure [dbo].[InsertPost2Tag]    Script Date: 04/02/2013 09:47:01 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
Alter PROCEDURE [dbo].[SelectTags]
    -- Add the parameters for the stored procedure here
@Post_Id int
AS
BEGIN

    SELECT mst_Tag.Tag_Name FROM mst_Tag INNER JOIN Post2Tag ON mst_Tag.tagId = Post2Tag.Tag_Id Where Post2Tag.Post_Id=@Post_Id

END
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:17:48.703

在页面加载时执行此操作

```
 if(!ispostback){
    CheckBoxList2.DataSource = ds; //This is the dataset that you fill from your stored procedure;
    CheckBoxList2.DataTextField = "Tag_Name";
    CheckBoxList2.DataValueField = "Tag_Name_Id";
    CheckBoxList2.DataBind();
 } 
```

并在您的 sp 查询中再使用一个参数 Tag_Name_Id ..

```
 SELECT mst_Tag.Tag_Name,Tag_Name_Id FROM mst_Tag INNER JOIN Post2Tag ON mst_Tag.tagId = Post2Tag.Tag_Id Where Post2Tag.Post_Id=@Post_Id 
```

从您的代码中删除它

```
foreach (DataRow dr in ds.Rows)
{
    String field1 = dr["Tag_Name"].ToString();
    CheckBoxList2.Items.Add(field1);
    CheckBoxList2.DataBind();
} 
```

希望这会有所帮助......如果这是你所要求的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:19:49.730

无需做任何事情只需为复选框选择数据源，并在其选定的索引更改事件中使用网格视图的选定值设置会话变量。

它对我有用……而且太容易实现了。

# java - java同步的工作原理

> ID：15761205
> 
> 赞同：1
> 
> 时间：2013-04-02T09:58:44.913
> 
> 标签：java

如果类 A 有两个同步方法，比如 methodA 和 methodB。如果一个线程正在访问methodA，另一个线程可以访问methodB吗？根据我的理解，当访问methodA时，线程获取对象的锁，其他线程应该不能同时访问methodB。但这会大大降低性能，对吧？而且，我似乎习惯阅读一篇文章，说另一个线程可以访问方法B。哪一个是正确的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T10:04:42.237

> 如果类 A 有两个同步方法，比如 methodA 和 methodB。如果一个线程正在访问methodA，另一个线程可以访问methodB吗？根据我的理解，当访问methodA时，线程获取对象的锁，其他线程应该不能同时访问methodB。

这是正确的; 如果一个线程持有对象的锁，其他线程必须等待才能获得锁。当然，只有当两个线程都在完全相同的对象上调用方法时才会出现这种情况。

> 但这会大大降低性能，对吧？

它可能会影响性能，但有时它是必要的，例如防止两个线程同时修改相同的数据。

> 而且，我似乎习惯阅读一篇文章，说另一个线程可以访问方法B。哪一个是正确的？

第一个是正确的，第二个是不正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:02:08.247

> 但这会大大降低性能，对吧？

它可能会，也可能不会。这取决于应用程序的性质。同步的成本可能接近于零，也可能是主要瓶颈，有效地将多线程应用程序转变为单线程应用程序。

参见[阿姆达尔定律](http://en.wikipedia.org/wiki/Amdahl%27s_law)。

> 而且，我似乎习惯于阅读一篇文章说另一个线程可以访问`methodB`.

运行时没有其他线程可以调用`methodB` *同一个对象*`methodA`。当然，其他线程可以自由调用同一类的`methodB` *其他实例*。

# unit-testing - 在 Kiwi 模拟上缺少验证方法是否有解决方法？

> ID：15761207
> 
> 赞同：3
> 
> 时间：2013-04-02T09:58:48.847
> 
> 标签：unit-testing, kiwi, ocmockito

我非常喜欢用于单元测试的高度可预测的[Arrange Act Assert 格式。](http://c2.com/cgi/wiki?ArrangeActAssert)

因为 Kiwi 没有针对模拟的显式验证语句，所以它强制使用不同的模式，例如：

```
// Arrange
Thing *mockThing = [CollaboratingClass mock];
TestedClass *sut = [[TestedClass alloc] initWithCollaborator:mockThing];

// Expect (collaboration expectations)
[[[mockThing should] receive] someMessage];

// Act
[mockArray someMethodInvolvingCollaborator];

// Assert (state expectations)
[[sut.someProperty should] equal:someValue]; 
```

我知道验证无论如何都会发生，但更喜欢能够快速扫描测试，将断言和期望放在一个可预测的地方。[mockito](http://code.google.com/p/mockito/wiki/FeaturesAndMotivations)（以及它的 Objective-C 实现[OCMockito](https://github.com/jonreid/OCMockito) ）很好地实现了这一点，其中验证步骤指定了方法调用 post-hoc，从而不需要事先的期望步骤。

我是一个相对的新西兰新手，所以我可能错过了文档中的一些内容。有没有明确验证 Kiwi 模拟的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T04:43:03.253

您提供的有关*Arrange Act Assert*的链接说明了该模式的好处（已添加重点）：

> 好处：
> 
> *   ...
> *   使一些 TestSmells 更加明显：
>     *   断言与“Act”代码混合。
>     *   **尝试同时测试太多不同事物的测试方法**

特别是如果您的目标是能够快速扫描断言，我认为您的示例最好分成两个测试用例：协作测试和对象状态如何变化的单独测试。

我实际上认为这里有第四步，专门针对协作测试，即*Expect*。Kiwi 允许您*安排、预期、*执行，`OCMock`实际上需要您通过 requires 来添加第四个冗余的*Assert*步骤`[mockThing verify]`。

我认为这将是设置这些测试的更好方法：

```
__block TestedClass *sut;
beforeAll(^{
    sut = [[TestedClass alloc] initWithCollaborator:mockThing];
}

// Collaboration: Arrange, Expect, Act
it(@"sends someMessage to mockThing", ^{
    // Arrange
    Thing *mockThing = [CollaboratingClass mock];

    // Expect
    [[[mockThing should] receive] someMessage];

    // Act
    [mockArray someMethodInvolvingCollaborator];
}

// State: Arrange, Act, Assert
it(@"sets someProperty to the return value of someMethod", ^{
    // Arrange
    NSString *expectedString = @"foo";
    Thing *mockThing = [CollaboratingClass mock];
    [[mockThing stubAndReturn:expectedString] someMessage];

    // Act
    [mockArray someMethodInvolvingCollaborator];

    // Assert
    [[sut.someProperty should] equal:expectedString];
} 
```

使用此设置获得的好处是，如果您需要基于协作者的返回值进行分支，您只需添加另一个测试，该测试`someMethod`将返回不同的结果，并做出不同的断言：

```
it(@"sets someProperty to nil if someMethod returns baz", ^{
    // Arrange
    Thing *mockThing = [CollaboratingClass mock];
    [[mockThing stubAndReturn:@"baz"] someMessage];

    // Act
    [mockArray someMethodInvolvingCollaborator];

    // Assert
    [sut.someProperty shouldBeNil];
} 
```

最终，我认为 Kiwi 不要求我们参加`verify`测试双打是在帮我们一个忙。

# c# - 如何使用嵌入式代码块传递查询字符串？

> ID：15761209
> 
> 赞同：0
> 
> 时间：2013-04-02T09:58:58.577
> 
> 标签：c#, javascript, asp.net

我试图在单击任何动态生成的超链接时传递查询字符串值。像这样的东西。。

```
<%
------some code----
 clickedalbum = dt6.Rows[0]["albumid"].ToString();

  %> 
      <asp:HyperLink ID="HyperLink1" runat="server" href="attendance1.aspx?albumid=<%#clickedalbum %>" > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:13:14.323

我明白了，问题是我正在使用服务器控制。使用
`<a href='attendance1.htm?albumid=<%=clickedalblum%>'>--some stuff--</a>` 解决了这个问题。感谢大家的回应，特别是 Ratna。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:05:41.743

像这样使用

```
href='<%# "attendance1.aspx?albumid="+clickedalbum %>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:19:22.887

从加载事件后面的代码中执行此操作

```
HyperLink1.NavigateUrl = "attendance1.aspx?albumid=" + clickedalbum; 
```

好的，如下所示：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="test.aspx.cs" Inherits="test" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div>
<asp:HyperLink ID="HyperLink1" runat="server"  NavigateUrl='<%#clickedalbum %>' Text="Testlink"></asp:HyperLink>
</div>
</form>
</body>
</html> 
```

在后面的代码中：

```
using System;

public partial class test : System.Web.UI.Page
{
 public string clickedalbum = "";
protected void Page_Load(object sender, EventArgs e)
{
     clickedalbum = "attendance1.aspx?albumid=123";
     DataBind();
}
} 
```

有关详细信息，请访问此链接[为什么将 <%= %> 表达式作为服务器控件上的属性值会导致编译错误？](https://stackoverflow.com/questions/370201/why-will-expressions-as-property-values-on-a-server-controls-lead-to-a-co)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T13:16:36.010

```
NavigateUrl='<%# Eval("clickedalbum ","~/attendance1.aspx?albumid={0}") %>' 
```

# apache - 如何在 Apache 中安装/配置 mod_reqtimeout

> ID：15761210
> 
> 赞同：2
> 
> 时间：2013-04-02T09:58:59.367
> 
> 标签：apache, security

我需要在我的 Apache 服务器 v2.2.22（在 linux 机器上）中配置 mod_reqtimeout。问题是，我完全不知道该怎么做。

[我在此链接](http://httpd.apache.org/docs/2.2/mod/mod_reqtimeout.html)上检查了此模块上的 Apache 站点，但没有给出下载/配置详细信息。有人可以帮我吗？任何帮助深表感谢。基本上，

```
Is there something needed to download ?
If not, which files do I need to edit and how? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:43:36.830

它是 2.2.15 及更高版本的标准 Apache 模块，**但在某些发行版（例如**[Ubuntu](https://bugs.launchpad.net/ubuntu/+source/apache2/+bug/562531)、[FreeBSD](http://lists.freebsd.org/pipermail/freebsd-ports/2010-May/061337.html)）中显然缺少。

首先，检查是否`mod_reqtimeout`存在（例如查看`apache2/modules/`或 - 取决于您的系统 - 执行类似的操作`/usr/sbin/httpd -l | grep mod_reqtimeout`）。其次，如果是，请确保它已在您的 Apache 配置中启用。

`mod_reqtimeout`可[从 GitHub 获得](https://github.com/apache/httpd/blob/2.2.x/modules/filters/mod_reqtimeout.c)（另请参阅[RPM 资源](http://rpmfind.net/linux/rpm2html/search.php?query=apache-mod_reqtimeout)）。最后，这个线程有[一些有用的提示](http://forum.directadmin.com/showthread.php?t=45230)。顺便说一句，我认为它不能在 .htaccess 文件中启用。

# c++ - cocos2dx Sprite setPosition 错误

> ID：15761214
> 
> 赞同：0
> 
> 时间：2013-04-02T09:59:09.063
> 
> 标签：c++, cocos2d-x, coordinates, coordinate-systems

我将图像精灵定位在位置*（0,0）*，以便屏幕的左边缘与图像的左边缘重合。但是图像总是出现在屏幕的中心，图像和屏幕的中心重合。

的大小`CCImage`是 854 x 480 并`getVisibleSize()`返回 320 x 240。要显示图像左侧与屏幕左边缘重合的精灵，我必须`setPosition`在 x= -264

我在[cocos2dx wiki co-ordinates systems](http://devcircle.blogspot.in/2013/03/cocos2d-x-coordinate-system.html)浏览了这个 wiki，它说*(0,0)*从左下角开始。我还看到了迭代相同[的 setPosition 方法的 Cocos2d-x 参考。](http://www.cocos2d-x.org/reference/native-cpp/d0/ded/classcocos2d_1_1_c_c_node.html#a043d491dc14639ca380dbf0b7812ad47)

我错过了什么吗？任何想法为什么会发生这种情况？

**更新** 我想我应该提到我正在`CCLayerPanZoom`为此使用扩展名。 `getAnchorPoint()`返回 x = 0.5 和 y = 0.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T11:57:58.877

这会将您的图像精灵定位到屏幕的左下角：

```
sprite->setAnchorPoint(CCPoint(0, 0));

sprite->setPosition( ccp(0,0)); 
```

# c# - 远程服务器返回错误 401 Unauthorized Webexception (POST)

> ID：15761217
> 
> 赞同：0
> 
> 时间：2013-04-02T09:59:21.733
> 
> 标签：c#, httpwebrequest, unauthorizedaccessexcepti

我正在尝试解决一个我主要（70%）遇到的问题（30% 是成功的）。

我尝试使用以下代码进行网络请求（POST）：

```
private string HttpWebRequest(string busStopCode)
    {
        //XML input
        string xml = "<?xml version='1.0' encoding='UTF-8' standalone='yes'?><Siri version='1.0' xmlns='http://www.siri.org.uk/'><ServiceRequest>                              <RequestTimestamp>2011-10-24T15:09:12Z</RequestTimestamp><RequestorRef><username></RequestorRef><StopMonitoringRequest version='1.0'>                                 <RequestTimestamp>2011-10-24T15:09:12Z</RequestTimestamp><MessageIdentifier>12345</MessageIdentifier><MonitoringRef>"+busStopCode+"</MonitoringRef></StopMonitoringRequest></ServiceRequest></Siri>";
        string responseFromServer = null;

        // Create a request using a URL that can receive a post. 
        WebRequest request = WebRequest.Create("http://<username>:<username>@nextbus.mxdata.co.uk/nextbuses/1.0/1");
        // Set the Method property of the request to POST.
        request.Method = "POST";

        request.Credentials = CredentialCache.DefaultNetworkCredentials;
        // Create POST data and convert it to a byte array.
        string postData = xml;

        byte[] byteArray = Encoding.UTF8.GetBytes(postData);

        // Set the ContentType property of the WebRequest.
        request.ContentType = "application/x-www-form-urlencoded";

        // Set the ContentLength property of the WebRequest.
        request.ContentLength = byteArray.Length;

        // Get the request stream.
        Stream dataStream = request.GetRequestStream();

        // Write the data to the request stream.
        dataStream.Write(byteArray, 0, byteArray.Length);

        // Close the Stream object.
        dataStream.Close();

        // Get the response.

        WebResponse response = null;

        while (response == null)
        {
            try
            {
                response = request.GetResponse();
            }
            catch (Exception e) 
            {
                MessageBox.Show(e.ToString());
            }
        }

        // Display the status.
        MessageBox.Show(((HttpWebResponse)response).StatusDescription + " Completed");

        // Get the stream containing content returned by the server.
        dataStream = response.GetResponseStream();

        // Open the stream using a StreamReader for easy access.
        StreamReader reader = new StreamReader(dataStream);

        // Read the content.
        responseFromServer = reader.ReadToEnd();

        // Clean up the streams.
        reader.Close();
        dataStream.Close();
        response.Close();

        return responseFromServer;

    } 
```

当我调用这个函数时，我得到的主要是我的异常消息框：

```
"System.Net.WebException: The remote Server returned an error(401) not authorized with System.Net.Http.Webrequest.GetResponse() with WindowsFormApplication1.Form1.HttpWebRequest(string BusstopCode) in <my pathfile>...." 
```

我做错了什么？

我已经从以前的线程中尝试了几种解决方案，但没有成功......

谢谢！

# android - android 错误与市场上的 facebook 登录

> ID：15761218
> 
> 赞同：0
> 
> 时间：2013-04-02T09:59:22.013
> 
> 标签：android, facebook, facebook-authentication, facebook-access-token

当我用 eclipse 在我的设备上测试这个应用程序时一切正常；但是当我在 google play store 上发布这个应用程序时，facebook 登录失败！为什么？请帮帮我！！它是一个简单的应用程序（市场上的“咖啡休息时间”）；

```
 public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main );

            elementoInserito=(EditText)findViewById(R.id.editTextElementoInserito);
            elementoEstratto=(TextView)findViewById(R.id.textViewElementoEstratto);
            inserisci=(Button)findViewById(R.id.buttonInserisci);
            stampa=(Button)findViewById(R.id.buttonStampa);  

            facebookLogin=(Button)findViewById(R.id.facebookLogin);
            Session session = Session.getActiveSession();
             if (session == null) {
                    if (savedInstanceState != null) {
                        session =Session.restoreSession(this,null,statusCallback,savedInstanceState);
                    }
                    if (session == null) {
                        session = new Session(this);
                    }
                    Session.setActiveSession(session);
                    if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
                       session.openForRead(newSession.OpenRequest(this).setCallback(statusCallback));
                    }
                }

                inserisci.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        inizializza_array(elementoInserito);
                        elementoInserito.setText("");
                    }
                });
                updateView();
        } 
        private void updateView() {
              Session session = Session.getActiveSession();
              if (session.isOpened()) {
                facebookLogin.setOnClickListener(new OnClickListener() {
                    public void onClick(View view) { 
                        onClickLogout(); }
                });

              }
             else {
                facebookLogin.setOnClickListener(new OnClickListener() {
                    public void onClick(View view) { 
                        onClickLogin(); }
                });
            }
        } 
        private void onClickLogin() {
            Session session = Session.getActiveSession();
            if (!session.isOpened() && !session.isClosed()) {
                session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
            } else {
                Session.openActiveSession(this, true, statusCallback);
            }
            Bundle bundle=new Bundle();
           Session.saveSession(session,bundle);
           Toast.makeText(getApplicationContext(), 
                   "sto salvando la sessione   "+session.getState(),
                     Toast.LENGTH_LONG).show();
        }
        private void onClickLogout() {
            Session session = Session.getActiveSession();
            if (!session.isClosed()) {
                session.closeAndClearTokenInformation();
            } 
        }
        private class SessionStatusCallback implements Session.StatusCallback {
            @Override
            public void call(Session session, SessionState state, Exception exception) {
                onSessionStateChange(session, state, exception);    
                updateView();
            }
        }
        private void onSessionStateChange(Session session, SessionState state, Exception exception) {
            if (state.isOpened()) {
                Log.i(TAG, "Logged in...");
            } else if (state.isClosed()) {
                Log.i(TAG, "Logged out...");
            }
        }
        public void inizializza_array(EditText n){
            this.ins=""+n.getText();
            if(ins==""){
                 Toast.makeText(getApplicationContext(), 
                         "errore: campo vuoto",
                           Toast.LENGTH_LONG).show();
            }
            else{
                lista.add(ins);
            }
        }
        public void stampa(View v){
            if(lista.size()==0){
                elementoEstratto.setText("Inserire elementi");
            }
            else{
            Random random = new Random();
            String x = lista.get(random.nextInt(lista.size()));
                elementoEstratto.setText(x);
                lista.clear();
               try {
                  publishStory(x);
            } catch (Exception e) {
            } 
            }
        }
         public void onStart() {
                super.onStart(); 
                Session.getActiveSession().addCallback(statusCallback);
            }  
            @Override
            public void onStop() {
                super.onStop();
                Session.getActiveSession().removeCallback(statusCallback);
            }
            @Override
            protected void onSaveInstanceState(Bundle outState) {
                super.onSaveInstanceState(outState);
                Session session = Session.getActiveSession();
                Session.saveSession(session, outState);
            }
            public void publishStory(String sorteggiato) {
                Session session = Session.getActiveSession();
                try {       
                if (session != null){  
                    List<String> permissions = session.getPermissions();
                    if (!isSubsetOf(PERMISSIONS, permissions)) {
                        pendingPublishReauthorization = true;
                        Session.NewPermissionsRequest newPermissionsRequest = new Session
                                .NewPermissionsRequest(this, PERMISSIONS);
                    session.requestNewPublishPermissions(newPermissionsRequest);
                        return;
                    }
                    Bundle postParams = new Bundle();
                    postParams.putString("name",""));
                    postParams.putString("caption","");
                    postParams.putString("description","");
                    Request.Callback callback= new Request.Callback() {
                        public void onCompleted(Response response) {
                            JSONObject graphResponse = response
                                                       .getGraphObject()
                                                       .getInnerJSONObject();
                            String postId = null;
                            try {
                                postId = graphResponse.getString("id");
                            } catch (JSONException e) {
                                Log.i(TAG,
                                    "JSON error "+ e.getMessage());
                            }
                            FacebookRequestError error = response.getError();
                            if (error != null) {
                                Toast.makeText(getApplicationContext(),
                                     error.getErrorMessage(),
                                     Toast.LENGTH_SHORT).show();
                                } else {
                                    Toast.makeText(getApplicationContext(), 
                                       "shared",//postId
                                         Toast.LENGTH_LONG).show();
                            }
                        }
                    };

                    Request request = new Request(session, "me/feed", postParams, 
                                          HttpMethod.POST, callback);
                    RequestAsyncTask task = new RequestAsyncTask(request);
                    task.execute();
                    }
                else{
                    Toast.makeText(getApplicationContext(), 
                            "effettua il Login su Facebook per condividere con i tuo amici",
                              Toast.LENGTH_LONG).show();
                }
                } catch (Exception e) {
                    // TODO: handle exception
                }
                }
                private boolean isSubsetOf(Collection<String> subset, Collection<String> superset) {
                    for (String string : subset) {
                        if (!superset.contains(string)) {
                            return false;
                        }
                    }
                    return true;
                }
                @Override
                public void onActivityResult(int requestCode, int resultCode, Intent data) {
                    super.onActivityResult(requestCode, resultCode, data);
                    Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
                }    
                @Override 
                        public boolean onCreateOptionsMenu(Menu menu) {
                            Intent intent = new Intent (MainActivity.this,Info.class); 
                            //Intent intent2 = new Intent(MainActivity.this,Caffe.class);
                            menu.add("About Coffee Break").setIntent(intent);
                            //menu.add("Il caffè").setIcon(R.drawable.caffe).setIntent(intent2);
                           return true; 
                        }       
    } 
```

我不明白为什么我有这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:50:01.287

我已经自行解决了这个问题，我没有以正确的方式阅读 relese.k​​eystore 我不理解这段代码：

```
keytool -exportcert -alias myAlias -keystore ~/.your/path/release.keystore | openssl sha1 -binary | openssl base64 
```

当我意识到代码时我得到了正确的密钥

myAlias = 导出项目时使用的 alis

~/.your/path/release.keystore = eclipse生成的key所在路径，文件名

做得好

# c# - 将 string[] 转成 List >

> ID：15761223
> 
> 赞同：1
> 
> 时间：2013-04-02T09:59:44.320
> 
> 标签：c#, list, data-structures

我有这个 strig[] ：

```
string[] SkippedAreasArray = new string[] {"A", "B", "C", "D", "E", "F", "G",
            "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q"}; 
```

我想把它变成：

```
 List<KeyValuePair<int, string>>  SkippedAreasArray  = ??? 
```

我一直没有使用这种`List<KeyValuePair<int, string>>`数据结构。所以我不得不质疑如果我把它变成`List<KeyValuePair<int, string>>`（如何定义它？），我的字符串数组会是什么样子。而且 - 我的逻辑在很大程度上取决于我使用 simple 时容易采用的索引`string[]`。使用的想法`List<KeyValuePair<int, string>>`是我可能需要使用 , 之类的值，`"A1"`并且我知道更好的数据结构可以在需要时轻松添加这些值，但是我可以保持元素的正确索引吗？`"B1"``"B2"``List<KeyValuePair<int, string>>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:03:27.093

这是你想要的：

```
string[] SkippedAreasArray = new string[] {"A", "B", "C", "D", "E", "F", "G",
"H", "I", "J", "K", "L", "M", "N", "O", "P", "Q"};
Dictionary<int,string> dictionary =
                 SkippedAreasArray.Select((r, i) => new { value = r, index = i })
                 .ToDictionary(t => t.index, t => t.value); 
```

哪里`key`是索引，`value`是字母表。

或者

```
List<KeyValuePair<int, string>> list =
    SkippedAreasArray.Select((r, index) => new KeyValuePair<int,string>(index, r))
    .ToList() 
```

;

# sqlite - 在 Sqlite 更新 statmet 中使用 Limit 和 offset

> ID：15761224
> 
> 赞同：3
> 
> 时间：2013-04-02T09:59:47.860
> 
> 标签：sqlite

```
update table set column_name limit 3 offset 2; 
```

上面的查询不起作用。

抛出错误

sql 错误: ***'limit'***附近的语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:02:17.690

UPDATE 语句在 之后需要一个新值`column_name`，如下所示：

```
update thetable set column_name = 'some new value' 
```

此外，[文档](http://www.sqlite.org/lang_update.html)提到您需要使用[SQLITE_ENABLE_UPDATE_DELETE_LIMIT](http://www.sqlite.org/compile.html#enable_update_delete_limit)选项编译 SQLite，默认情况下*不*启用该选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-03T08:46:57.150

Sqlite 不允许像在 MYSQL 中那样使用 LIMIT 和 OFFSET 语句。您将不得不使用嵌套查询来解决它。或者使用两个查询。

# c# - RegEx to Parse URL from text (text contains HTML tags)

> ID：15761225
> 
> 赞同：0
> 
> 时间：2013-04-02T09:59:48.537
> 
> 标签：c#, .net, regex

我想从给定文本中解析 URL，

输入文本：-

```
 <h3 class="r"> <a
 href="/url?q=http://rakesh.agrawal-family.com/papers/vldbj03watermark.pdf&amp;sa=U&amp;ei=m2laUfD2AdDorQf0rYHoDw&amp;ved=0CBoQFjAA&amp;usg=AFQjCNFJOQCS471sWjxy5CkNbzDxzcD66A">
 <h3 class="r"> <a
 href="/url?q=http://www.cse.ust.hk/vldb2002/VLDB2002-proceedings/papers/S05P03.pdf&amp;sa=U&amp;ei=m2laUfD2AdDorQf0rYHoDw&amp;ved=0CCIQFjAD&amp;usg=AFQjCNHbfCk_51dKLupvs3KVVEDboK54xg">
 <h3 class="r"> <a
 href="/url?q=http://cvml.unige.ch/publications/postscript/99/VoloshynovskiyPereiraPun_eww99.pdf&amp;sa=U&amp;ei=m2laUfD2AdDorQf0rYHoDw&amp;ved=0CCYQFjAE&amp;usg=AFQjCNGt54TSNY93PXgd4u4L3-E6C6P2jw"> 
```

预期输出：

[http://rakesh.agrawal-family.com/papers/vldbj03watermark.pdf](http://rakesh.agrawal-family.com/papers/vldbj03watermark.pdf)

[http://www.cse.ust.hk/vldb2002/VLDB2002-proceedings/papers/S05P03.pdf](http://www.cse.ust.hk/vldb2002/VLDB2002-proceedings/papers/S05P03.pdf)

[http://cvml.unige.ch/publications/postscript/99/VoloshynovskiyPereiraPun_eww99.pdf](http://cvml.unige.ch/publications/postscript/99/VoloshynovskiyPereiraPun_eww99.pdf)

示例代码：-

```
Match match = Regex.Match(input, @"<h3 class=""r""> <a href=""/url\?q=(.*?)&amp;", RegexOptions.IgnoreCase);         
while (match.Success)            
{                
// Finally, we get the Group value and display it.                
string key = match.Groups[1].Value;                
Console.WriteLine(key);                
match = match.NextMatch(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:46:16.173

RegEx 构建 DFA，因此非常昂贵，如果您需要从已知模式中提取数据，您可以使用它，

```
url=line[i].substring(line[i].indexOf("q=")+1, line[i].indexOf(">\"")); 
```

基本上使用索引的线性搜索而不是复杂的 DFA

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:07:34.043

请注意，不建议混合使用 HTML 和正则表达式。

但是，如果您正在寻找快速破解，您可以使用这个正则表达式：

```
url\?q=\*\*[\'"]?([^\'" >]+)\*\* 
```

在这里检查这个链接：[http ://rubular.com/r/v0jqtAXMF9](http://rubular.com/r/v0jqtAXMF9)

# drupal-7 - drupal 7中的Webform验证

> ID：15761226
> 
> 赞同：0
> 
> 时间：2013-04-02T09:59:52.793
> 
> 标签：drupal-7, drupal-modules, drupal-webform

我想向我的网络表单添加一个验证，其中网络表单应该接受一次电子邮件 ID。如果用户再次提供相同的电子邮件 ID，则应显示一条消息，说明“邮件 ID 已存在”。有没有使用 Web 表单验证模块？请给我建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T10:13:27.860

如果您使用的是[Webform](http://drupal.org/project/webform)模块。然后执行以下操作：

1.  添加“电子邮件”类型的字段
2.  在此字段的已编辑部分下，有一个名为“验证”的部分，此验证的选项之一是“唯一”

# html - 透明背景

> ID：15761228
> 
> 赞同：0
> 
> 时间：2013-04-02T09:59:58.693
> 
> 标签：html, pdf, itextsharp, transparent

当使用 HTML 到 PDF 时，我得到奇怪的结果，试图
在没有彩色背景的情况下将页面中心的一些文本对齐到 div。

现在，我似乎也无法让 h1 或 p 从顶部填充，
但我可以让 div 向下填充，但不能对齐中心。

请给我任何提示。

:}

```
PdfReader template = new PdfReader(Server.MapPath("~/Cirtificate.pdf"));
Document document = new Document(PageSize.A4);
PdfWriter writer = PdfWriter.GetInstance(document, new     FileStream(Server.MapPath("~/test.pdf"), FileMode.Create));
document.Open();

PdfContentByte cb = writer.DirectContent;
PdfImportedPage page = writer.GetImportedPage(template, 1);
document.NewPage();
cb.AddTemplate(page, 0, 0);

WebClient wc = new WebClient();
string htmlText = wc.DownloadString("http://localhost:65061/TEST_OUTPUT_PAGE.html");

StringReader sr = new StringReader(htmlText);
XMLWorkerHelper.GetInstance().ParseXHtml(writer, document, sr);  
document.Close();

Response.Redirect("~/test.pdf"); 
```

CSS

```
html, body {
    display: block;
    clear: both;
    float: left;
    position: static;
    overflow: visible;
    width: 100%;
    height: 100%;
    margin: 0px;
    border: 0px;
    padding: 0px;
    background-color: #fff;
}

body {
    font-family: Arial, Sans-Serif;
    text-align: center;
    color: #000;
    font-size: 12px;
    line-height: 100%;
    text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:14:01.407

有关各种对象[支持的 CSS 样式列表，](http://demo.itextsupport.com/xmlworker/itextdoc/CSS-conformance-list.htm)请参阅此页面。我建议将您包装`<p>`在 .`<div>`上使用填充`<div>`和对齐`<p>`。

```
var outputFile = System.IO.Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "Test1.pdf");
using (var fs = new FileStream(outputFile, FileMode.Create, FileAccess.Write, FileShare.None)) {
    using (Document document = new Document(PageSize.A4)) {
        using (PdfWriter writer = PdfWriter.GetInstance(document, fs)) {
            document.Open();
            var html = "<html><head><title>Test</title></head><body><div style=\"padding-top:200px;\"><p style=\"text-align:center;padding-top:200px;\">This is a test</p></div></body></html>";
            using (StringReader sr = new StringReader(html)) {
                XMLWorkerHelper.GetInstance().ParseXHtml(writer, document, sr);
            }
            document.Close();
        }
    }
} 
```

# jquery - BX 滑块 - startSlide 选项

> ID：15761230
> 
> 赞同：0
> 
> 时间：2013-04-02T10:00:07.753
> 
> 标签：jquery, bxslider

我使用 bx-slider 作为导航菜单。

在每张幻灯片中，我显示 4 个项目，但我不知道如何使用`startSlide`选项，以便 bx-slider 不会从第一张幻灯片开始，而是从包含单击项目的幻灯片开始。

例如：

1.  项目 1 | 项目 2 | 项目 3 | 第 4 项
2.  项目 5 | 项目 6 | 项目 7 | 第 8 项
3.  项目 9 | 项目 10 | 项目 11 | 第 12 项

如果我单击第 7 项，我希望起始幻灯片是幻灯片 2，而不是一张。我不知道如何使用`startSlide`，因为我在一张幻灯片中有 4 个项目。

这是我使用的代码：

```
$('.slider').bxSlider({
        slideWidth: 220,
        auto: false,
        pause: 5000,
        minSlides: 4,
        nextText: '',
        prevText: '',
        maxSlides: 4,
        slideMargin: 20,
        pager:false
    }); 
```

有任何想法吗？

编辑：这是我的菜单代码：

```
<ul class="slider_items">
    <li>item 1</li>
    <li>item 2</li>
    <li>item 3</li>
    <li>item 4</li>
    <li>item 5</li>
    <li>item 6</li>
    <li>item 7</li>
    <li>item 8</li>
    <li>item 9</li>
    <li>item 10</li>
    <li>...</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:51:47.103

您需要在活动导航菜单上使用一个类。

我假设您的菜单结构如下

```
<ul>
    <li>
        <ul>
            <li><a href="">Link 1</a></li>
            <li><a href="">Link 2</a></li>
            <li><a href="">Link 3</a></li>
            <li><a href="">Link 4</a></li>
        </ul>
    </li>
    <li><!-- .closest li -->
        <ul>
            <li><a href="">Link 5</a></li>
            <li><a href="">Link 6</a></li>
            <li><a href="" class="active">Link 7</a></li>
            <li><a href="">Link 8</a></li>
        </ul>
    </li>
    <li>
        <ul>
            <li><a href="">Link 9</a></li>
            <li><a href="">Link 10</a></li>
            <li><a href="">Link 11</a></li>
            <li><a href="">Link 12</a></li>
        </ul>
    </li>
</ul> 
```

然后，您可以将`startSlide`选项添加到 bxSlider，如下所示：

```
var startSlide = $('.active').closest('li').index() 
```

# java - 通过 SOAP 返回时捕获损坏的管道

> ID：15761232
> 
> 赞同：2
> 
> 时间：2013-04-02T10:00:13.317
> 
> 标签：java, web-services, soap

我正在尝试使我的 SOAP 服务更加健壮，并在他们调用的方法仍在运行时处理断开连接的客户端。我正在使用@WebService 和 javax.jws.WebService。

问题是被调用的代码忽略了断开连接的客户端并继续运行，只有在它尝试返回*后才会失败。*我想反转已完成的处理，但不知道如何捕获此异常，因为它只是在方法返回后打印。

```
javax.xml.ws.WebServiceException: javax.xml.stream.XMLStreamException: java.io.IOException: Broken pipe
    at com.sun.xml.internal.ws.encoding.StreamSOAPCodec.encode(StreamSOAPCodec.java:101)
    at com.sun.xml.internal.ws.encoding.SOAPBindingCodec.encode(SOAPBindingCodec.java:249)
    at com.sun.xml.internal.ws.transport.http.HttpAdapter.encodePacket(HttpAdapter.java:328)
    at com.sun.xml.internal.ws.transport.http.HttpAdapter.access$100(HttpAdapter.java:82)
    at com.sun.xml.internal.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:470)
    at com.sun.xml.internal.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:233)
    at com.sun.xml.internal.ws.transport.http.server.WSHttpHandler.handleExchange(WSHttpHandler.java:95)
    at com.sun.xml.internal.ws.transport.http.server.WSHttpHandler.handle(WSHttpHandler.java:80)
    at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:65)
    at sun.net.httpserver.AuthFilter.doFilter(AuthFilter.java:65)
    at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:68)
    at sun.net.httpserver.ServerImpl$Exchange$LinkHandler.handle(ServerImpl.java:557)
    at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:65)
    at sun.net.httpserver.ServerImpl$Exchange.run(ServerImpl.java:529)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.xml.stream.XMLStreamException: java.io.IOException: Broken pipe
    at com.sun.xml.internal.stream.writers.XMLStreamWriterImpl.flush(XMLStreamWriterImpl.java:388)
    at com.sun.xml.internal.ws.streaming.XMLStreamWriterUtil.getOutputStream(XMLStreamWriterUtil.java:86)
    at com.sun.xml.internal.ws.message.jaxb.JAXBMessage.writePayloadTo(JAXBMessage.java:308)
    at com.sun.xml.internal.ws.message.AbstractMessageImpl.writeTo(AbstractMessageImpl.java:131)
    at com.sun.xml.internal.ws.encoding.StreamSOAPCodec.encode(StreamSOAPCodec.java:98)
    ... 16 more
Caused by: java.io.IOException: Broken pipe
    at sun.nio.ch.FileDispatcher.write0(Native Method)
    at sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:29)
    at sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:69)
    at sun.nio.ch.IOUtil.write(IOUtil.java:40)
    at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:336)
    at sun.net.httpserver.Request$WriteStream.write(Request.java:397)
    at sun.net.httpserver.ChunkedOutputStream.writeChunk(ChunkedOutputStream.java:108)
    at sun.net.httpserver.ChunkedOutputStream.flush(ChunkedOutputStream.java:138)
    at sun.net.httpserver.PlaceholderOutputStream.flush(ExchangeImpl.java:395)
    at java.io.FilterOutputStream.flush(FilterOutputStream.java:123)
    at com.sun.xml.internal.stream.writers.UTF8OutputStreamWriter.flush(UTF8OutputStreamWriter.java:140)
    at com.sun.xml.internal.stream.writers.XMLStreamWriterImpl.flush(XMLStreamWriterImpl.java:386)
    ... 20 more 
```

# c# - 为什么我可以将带有默认参数的方法添加到事件操作？

> ID：15761234
> 
> 赞同：-1
> 
> 时间：2013-04-02T10:00:24.863
> 
> 标签：c#, methods, delegates, mono

考虑类

```
class FirstClass 
{
    //Some fields, ctors and methods
    ...
    public event Action Test
    {
        add
        {
            var method = value.Method;
            var parameters = method.GetParameters (); //Count == 1
            // (1)
            //I don't know anything about value so I think I can pass null as argument list because it's Action, not Action<T>
            //And we get Reflection.TargetParameterCountException here.
            method.Invoke (value.Target, null); 
            //Instead of calling Invoke as done above, we should call it like that:
            // (2)
            method.Invoke (value.Target, new object[] { null });
            //But since it's Action, we should be able to call it with (1) not with (2)
        }
        remove
        {
            ...
        }
    }
} 
```

还有一个班级

```
class SecondClass
{
    public void TestMethod (Action action = null)
    {
        ...
    }
    public void OtherMethod ()
    {
        var a = new FirstClass ();
        a.Test += TestMethod;
    }
} 
```

恕我直言：在类型系统级别不应允许将具有默认参数的方法添加到没有参数的委托。为什么允许？

**PS**您不仅可以在 add { } 访问器中执行此操作，还可以在任何其他地方执行此操作，上面的代码只是示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T16:10:49.160

这不应该编译。

委托动作有一个零参数的标志，并且没有返回值：

```
public delegate void Action(); 
```

因此，只能为它分配零参数而不是返回值的方法。您的第二堂课`SecondClass.TestMethod`确实有一个类型的参数`Action`（我猜是为了让这一切变得混乱；））。因此该方法将与另一个 Action 委托兼容（其中 T = Action）：

```
public delegate void Action<T>(); 
```

如果您甚至尝试设法调用 FirstClass.Test.Add，并且您尝试进行两次 Invoke 调用，那么第一个应该会失败。

为什么？该方法是一个`MethodInfo`。`SecondClass.TestMethod`此方法至少需要一个参数。此参数必须在提供给调用方法的对象数组内。但是，在您的第一次通话中，您没有对象数组；您的对象数组设置为空。并且设置为 null 的对象数组不能容纳任何东西，甚至不能容纳 0 个元素，更不用说 1 个具有 null 的元素了。

第二个 Invoke 确实有一个带有一个元素的对象数组，具有空值。

# c# - C#：顺序函数调用如何工作？（效率方面）

> ID：15761235
> 
> 赞同：6
> 
> 时间：2013-04-02T10:00:33.993
> 
> 标签：c#, optimization, stack

在 C# 中，通常以相当客观的方式编写，如下所示：

```
MyObj obj = new MyObj();
MyReturn ret = obj.DoSomething();
AnotherReturn rett = ret.DoSomethingElse(); 
```

我可以像这样写上面的：

```
AnotherReturn rett = new MyObj().DoSomething().DoSomethingElse(); 
```

但是，当您按这样的顺序有一堆函数调用时，stackframe 是如何工作的？这个例子相当简单，但想象一下，如果我有 50 多个函数调用被链接起来（这可能发生在 JavaScript (/w jQuery) 之类的地方）。

我的假设是，对于每个函数调用，都会生成一个返回地址（到“点”？），然后返回值（具有其他方法的新对象）立即被泵入该返回地址的下一个函数调用。这个工作如何获得整体返回值（在本例中，返回地址将最终函数值分配给 rett）？如果我继续链接调用，我最终会溢出吗？在这种情况下，采取客观路线是否被认为更明智（以“不必要的”内存分配为代价？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:03:02.547

这与您在单独的行中调用每个方法完全相同，每次将返回值分配给一个变量，然后使用该变量调用下一个方法。

所以你的两个样本是相同的，有效的。

你有反光板吗？您可以尝试这两种方法并检查生成的 IL 代码以确切了解存在哪些差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:13:20.207

虽然这 2 个调用是相同的，但如果你有很多“点”，那么在某处它就是代码异味（得墨忒耳定律）。

见下面[的讨论](https://softwareengineering.stackexchange.com/questions/183753/temporary-variables-vs-line-length-requirements)

# google-chrome - 使用 Chrome 扩展程序，如何使选项卡发出 POST 请求并导航？

> ID：15761238
> 
> 赞同：0
> 
> 时间：2013-04-02T10:00:40.397
> 
> 标签：google-chrome, google-chrome-extension, firefox-addon, chromium

使用 Chrome 扩展程序，如何使选项卡发出 POST 请求并导航？我正在寻找与 chrome.tabs.update 非常相似的东西。chrome.tabs.update 允许我将标签“导航到”一个 URL。是否有一个 API 可用于进行类似的导航但带有 POST 请求？[Firefox 在Web Navigation URL](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIWebNavigation#loadURI%28%29)中有类似的东西。

# c++ - C++ std::set 为什么是关联的？

> ID：15761239
> 
> 赞同：13
> 
> 时间：2013-04-02T10:00:43.227
> 
> 标签：c++, stl, set

为什么`std::set`定义为关联容器？

我的意思`std::map`是一个关联容器，因为它将一个值映射到一个键，但为什么它是一个集合？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T10:09:05.443

### 23.4.6.1 类模板集概述[set.overview]

> A`set`满足 [..] 关联容器 (23.2.4) [...] 的所有要求

因为它满足作为关联容器的所有先决条件，这些先决条件在“将键映射到值”中进行了描述`23.2.4.`并且并不像“将键映射到值”那么简单。

第二段甚至强调了这一点（或者更确切地说，强调它实际上是`map`并且`multimap`比关联容器具有额外的功能）：

### 23.2.4 关联容器 [associative.reqmts]

> 2) 每个关联容器在 Key 和一个排序关系 Compare 上参数化，该排序关系对 Key 的元素产生严格的弱排序 (25.4)。此外，map 和 multimap 将任意类型 T 与 Key 相关联。Compare 类型的对象称为容器的比较对象。

整个段落太大，无法在此处复制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T10:04:21.680

[参考 cplusplus.com](http://www.cplusplus.com/reference/set/set/)

在集合中，键是值，它必须是唯一的。

编辑：

“关联容器中的元素是通过它们的键而不是它们在容器中的绝对位置来引用的。”

# jsp - 如何在 Struts 2 的 s:doubleselect 标记中设置名称和值？

> ID：15761242
> 
> 赞同：1
> 
> 时间：2013-04-02T10:00:46.010
> 
> 标签：jsp, struts2

这是我的代码：

```
<s:set name="serverList" 
     value="#{
         'AppServer': {'Apache', 'Tomcat', 'JBoss'},
         'Database': {'Oracle', 'MySQL'}
         }" />
<s:doubleselect label="Server (OGNL) " 
name="server1" list="#serverList.keySet()" 
doubleName="server2" doubleList="#serverList[top]" /> 
```

在这里，我如何将值 Appserver 映射到某个键，例如 110 并相应地将 {'Apache', 'Tomcat', 'JBoss'} 映射到 1,2,3 就像在选择标记中完成的一样，如下面的代码 Jan=1 , 二月=2

```
<s:select label="Select a month" 
        headerKey="-1" headerValue="Select Month"
        list="#{'1':'Jan', '2':'Feb', '3':'Mar', '4':'Apr'}" 
        name="yourMonth" /> 
```

因此，在我的操作类中，我可以将操作类中的值检索为 Appserver 的 110、Apache 的 1 等等。

默认情况下，两个选择框都出现在另一个下方，是否可以并排放置它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:06:23.970

您需要使用地图表示法`#{...}`在列表中创建地图。并使用标签和关键字的`doubleListKey`和`doubleListValue`属性从地图中获取值。`<s:doubleselect>``key``value`

```
<s:set name="serverList" 
     value="#{
         'AppServer': #{'11':'Apache', '12':'Tomcat', '13':'JBoss'},
         'Database': #{'21':'Oracle', '22':'MySQL'}
         }" />
<s:doubleselect label="Server (OGNL) "
name="server1" list="#serverList.keySet()" 
doubleName="server2" doubleList="#serverList[top]"
doubleListKey="key" doubleListValue="value"/> 
```

为了并排放置选择框，您需要更改`<s:doubleselect>`标签的 freemarker 模板。

**更新**

```
<s:set name="serverList" value="#{'101':'AppServer', '202':'Database'}" />
<s:set name="serverList2" 
     value="#{'101': #{'11':'Apache', '12':'Tomcat', '13':'JBoss'}, '202': #{'21':'Oracle', '22':'MySQL'}}" />

<s:doubleselect label="Server (OGNL) "
name="server1" list="#serverList.keys" listValue="#serverList[top]"
doubleName="server2" doubleList="#serverList2[top]" doubleListKey="key" 
doubleListValue="value"/> 
```

# jquery - jQuery 为什么我的一些图标开始看起来不正确

> ID：15761246
> 
> 赞同：7
> 
> 时间：2013-04-02T10:00:55.880
> 
> 标签：jquery, html, jquery-mobile

我在我的应用程序上使用 jQuery mobile，一切正常，但我只是注意到下面这两项看起来不再正确。

第一个是一个选择，以前有一个小箭头，而不是那个空的灰色圆圈。

第二个是旋转轮，以前是动画轮，现在有一个空的灰色圆圈。

不知道代码更改的哪一部分真正影响了这一点，有什么想法吗？

![在此处输入图像描述](https://i.stack.imgur.com/C2mGO.png)

![在此处输入图像描述](https://i.stack.imgur.com/y1lZp.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T10:25:19.637

您缺少对图像文件的引用。您需要将图像放入您的项目中。当您将库下载为 ZIP 文件时，您可以找到包含图像的文件夹。

其他使用 CDN 如下

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T10:59:40.740

[Mayu Mayooresan](https://stackoverflow.com/users/348301/mayu-mayooresan)的回答对于使用 CDN 托管的 jQuery-Mobile 是正确的。

如果要在本地托管，请[下载 jQuery Mobile](http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.zip)，将文件解压缩到文件夹`/js/`。结构应如下所示：

HTML 文件，直接在*根*文件夹中

> webapp/Index.html

*root/JS*文件夹下的脚本

> webapp/js/jquery.mobile-1.3.0.min.css
> 
> webapp/js/jquery-1.8.2.min.js
> 
> webapp/js/jquery.mobile-1.3.0.min.js

*root/JS/images/*文件夹下的图片

> webapp/js/images/ajax-loader.gif
> 
> webapp/js/images/icons-18-black.png
> 
> webapp/js/images/icons-36-black.png
> 
> webapp/js/images/icons-18-white.png
> 
> webapp/js/images/icons-36-white.png

在您的 HTML 文件中：

```
<head>
 <link rel="stylesheet" href="js/jquery.mobile-1.3.0.min.css" />
 <script src="js/jquery-1.8.2.min.js"></script>
 <script src="js/jquery.mobile-1.3.0.min.js"></script>
</head> 
```

# ios - MKMapViewDelegate 被调用，但 Pin 没有像我设置的那样下降

> ID：15761250
> 
> 赞同：0
> 
> 时间：2013-04-02T10:01:09.960
> 
> 标签：ios, mkmapview, mapkit, mkpinannotationview, mkmapviewdelegate

我尝试制作一个 pin 注释以放入 MapView 。但事实并非如此。

视图控制器有一个表格视图，我将 mapView 插入标题中。

```
DetailViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
 self.title = @"Nearby";

  //coord is CLLocationCoordinate2D which is instance variable 

 ItemMapPoint *itemMapPoint = [[SquakItemMapPoint alloc] initWithCoordinate:coord title:@"Test"];
[mapView addAnnotation:itemMapPoint];

MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(coord, 500, 500);
[mapView setRegion:region animated:YES];
//the delegate is not set here but I set it in Interface Builder

self.tableView.tableHeaderView = mapView;

}
/this is delegate method to set Pin to drop 
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id     <MKAnnotation>)annotation
{
  MKPinAnnotationView *annoView = [[MKPinAnnotationView alloc]
 initWithAnnotation:annotation
 reuseIdentifier:@"current"];  

annoView.animatesDrop = YES;
annoView.pinColor = MKPinAnnotationColorGreen;
return annoView;
} 
```

我在代理中设置的 Pin 是绿色的，但是当屏幕加载时 Pin 不会掉落。我也尝试将代码更改为 ViewDidAppear() 但它仍然不起作用。

请帮忙 。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:13:48.457

两件事情-

1.  确保你`ItemMapPoint`并`SquakItemMapPoint`实施所需的协议。

2.  尝试在添加注释之前添加 ie`mapView`即。`self.tableView.tableHeaderView = mapView;``[mapView addAnnotation:itemMapPoint];`

# android - 在android中存储静态数据的最快/首选方式是什么？

> ID：15761252
> 
> 赞同：7
> 
> 时间：2013-04-02T10:01:14.920
> 
> 标签：android

我想存储大约一千个字符串（如一些引号）并填充`ListView`或`ListFragment`使用它们。这些字符串是静态的，一旦加载就不可能改变。

它是只读数据，不应允许用户对其进行操作。

我应该使用 XML 文件还是文本文件来存储它们，或者最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:45:20.297

Shared Prefrences 是存储小数据的最佳方式。[您可以从本教程中获得帮助](http://www.vogella.com/articles/AndroidFileBasedPersistence/article.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T10:10:06.750

使用 Sqlite db 那是有效和安全的方式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T11:03:26.613

如果数据在整个应用程序开发中不会发生变化，为什么你不使用任何你喜欢的**访问修饰符的****静态最终**方式，你可以在你的应用程序中使用它们，并且由于大小问题，数千或十万个字符串数据不会去我们也知道，String 是**不可变**的，在整个应用程序生命周期中都不能改变，另外一件事是声明为**final**，所以 reinitialize 将不存在，而只会重用。将所有字符串声明为类部分，以便它在何时加载类加载即一次。如果有更多的事情让我知道。

 ******* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T10:13:35.690

永远不会改变？

字符串数据类型？

你在构建应用程序时已经拥有它们了吗？

只需将它们保存在资源、字符串中；就像你存储像'appname'这样的值你可以保存一个用换行符（或逗号、冒号等）分隔的巨大字符串变量，然后使用java的字符串实用程序或tokenize来获取每个子字符串，或者根据模式你看起来合适的任何东西它有

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T11:15:12.897

只需将它们放在您存储在资产文件夹中的文本文件中。如果您逐行放置它们，则您已经拥有您的物品。******

# perl - 如何使用 perl 修改远程机器上的文件

> ID：15761258
> 
> 赞同：2
> 
> 时间：2013-04-02T10:01:30.057
> 
> 标签：perl

我在远程 linux 机器上有一个文件。我想在执行脚本的主机上对该文件进行一些修改。

我在这里使用 Perl

现在如何使用 perl 连接到其他机器。以及如何处理文件修改。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T10:15:17.757

除非您添加有关可用连接的更多详细信息，否则要准确回答这个问题有些模糊，但由于 SSH/SCP/SFTP 目前几乎无处不在，您可能需要处理来自[CPAN](http://cpan.org)的许多 Perl 模块之一。您可能想尝试一下[`Net::uFTP`](http://p3rl.org/Net%3a%3auFTP)，因为它为许多其他模块提供了通用接口。

您也可以只调用`scp`with `system`，在本地执行修改并传回文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T08:19:48.853

您可以使用[Net::SFTP::Foreign](https://metacpan.org/module/Net%3a%3aSFTP%3a%3aForeign)修改远程计算机上的文件。

另一种可能性是使用 本地挂载远程文件系统`sshfs`，并将文件更改为本地文件。这样做的缺点是，如果您的脚本由于某些错误而过早结束，则远程文件系统可能会重新挂载。

# python - 模拟多次抛硬币

> ID：15761259
> 
> 赞同：0
> 
> 时间：2013-04-02T10:01:32.107
> 
> 标签：python, python-2.7

我需要模拟一个掷硬币的序列并监控我必须做多少次尝试才能获得预定长度的正面（或反面）条纹。换句话说，我需要计算我需要掷多少次硬币才能连续连续 3 次正面朝上。一旦脚本完成了连胜，它应该对 4 连胜和 5 连胜做同样的事情。

我确实尝试过这样的事情：

```
def main():
    import random

    attemps = [4, 5, 6]  # length of the streaks we want to achieve
    for item in attemps:
        mylist = list(xrange(item))
        while True:
            for i in mylist:
                y = random.randint(0, 1) # 0 as head, 1 as tail
                print i, y
                if y != 0:
                    return False 
```

但当然它不会做我想要的。它有两个问题：

1.  一旦硬币值为 1，它就会退出，但只要连续完成，它就不会再次尝试。

2.  它仅测试“尝试”列表的第一个数字，即 4。

我真的不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:42:25.357

我重写了你的函数：

```
import random

def main(n):
    """ Returns number of flips needed 
    to get n heads in a row """
    mylist = ['heads', 'tails']
    cnt = 0
    while 1:
        if [random.choice(mylist) for _ in range(n)].count('heads') == n:
            return cnt
        else:
            cnt += 1 
```

然后你可以这样做：

```
>>> for i in range(4, 7):
...     main(i)
... 
12
18
29 # All values are completely random, this just happens to be what I got. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:05:05.147

而不是从函数返回的“return False”，而是尝试使用 break - 这将退出当前循环迭代。

```
if y != 0:
     break 
```

# wso2 - 我们可以动态更改 Wso2Esb 中的端点吗

> ID：15761263
> 
> 赞同：0
> 
> 时间：2013-04-02T10:01:37.210
> 
> 标签：wso2, wso2esb, wso2dss

当我们实现代理服务时，我们可以定义端点。它在本地系统中工作，我们需要更改生产环境或部署或测试。在这种情况下，如果我的 Wso2dss 服务器在另一台机器上时本地主机无法正常工作，我需要更改我的端点地址。我需要克服这个问题。你有对此的任何引用，它将在我需要更改环境时将每个端点设置为属性 如果属性发生更改，则无需设置配置文件，它将反映每个地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:55:26.543

唯一的方法是，使用[Header](http://docs.wso2.org/wiki/display/ESB451/Header+Mediator) mediator 动态设置“To”地址。您可以使用 Header 调解器设置“To”寻址标头，然后使用“Default”端点发送请求。消息将被发送到由“To”标头设置的地址。要设置值，在 Header mediator dynamic 中，您可以使用 xpath，您可以在其中选择预定义的属性或对传入请求进行 xpath 评估以选择值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:13:20.377

您可以使用动态端点。因此，您将端点存储在注册表中并引用它们。请参考此[示例](http://docs.wso2.org/wiki/display/ESB460/Sample+10%3a+Introduction+to+Dynamic+Endpoints+with+the+Registry)。

# asterisk - Asterisk ivr 音频没有播放几秒钟

> ID：15761266
> 
> 赞同：0
> 
> 时间：2013-04-02T10:01:44.713
> 
> 标签：asterisk, audio

我有一台带有星号 1.8 和免费 pbx 2.10 gui 的 arm 机器。我有一个用于来电的 ivrsetup，有时录音的音频效果很好。有时虽然**我在 5-10 秒内什么都听不见，但它只是在录音中间跳跃**。录音文件曾经是一个 wav 文件，但由于我的上传速度不是很好，我将它（sox）转换为一个**gsm 文件。** 在 CLI 中，我可以看到**正在播放该文件，**因此这不是所有权问题，有时音频正在正确播放这一事实表明该文件应该没问题。大家觉得问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:58:15.600

我可以建议你 1) 描述你使用什么作为调用源，你使用什么技术 2) 检查你是否有记录、播放或 i/o 延迟错误。例如将您的文件放入 tmpfs 文件系统

Asterisk 团队一般不支持 Arm 机器，它是在 ARM 上设置的专家级工作。

# c# - 如何在网格视图中插入多个数据

> ID：15761267
> 
> 赞同：0
> 
> 时间：2013-04-02T10:01:46.257
> 
> 标签：c#, vb.net, winforms, sql-server-2008, visual-studio-2008

我有visual studio 2008和sql mgmt studio 2008 ...我创建了一个winform，我有一个组合框，显示在我的sql db中创建的所有表的名称，一个dgv和一个按钮...现在我想插入数据在 dgv 的多个新行中并将其自动保存在我的 sql 数据库中...这是我的代码中的片段-

**代码**：

```
 private void InsertInfo()
    {

        string table = comboBox1.Text;
        string connectionString = null;
        SqlConnection connection;
        SqlDataAdapter adapter = new SqlDataAdapter();

        connectionString = @"Data Source=HP\SQLEXPRESS;database=MK;Integrated Security=true";

        connection = new SqlConnection(connectionString);

        //if (comboBox1.Text == "lol")
        //{
        //    string insrtQry = "INSERT INTO lol (name, marks) VALUES (@value1, @Value2)";
        //}
        //else
        //{
        //    string insrtQry = "INSERT INTO datejoin (first name,last name,date joined) VALUES (@value1, @value2,@value3)";

        //}
        foreach (int rowIndex in lstNewRows)
        {

            string insrtQry = "insert into " + comboBox1.Text + " values(";

            foreach (DataGridViewCell cell in dataGridView1.Rows[rowIndex].Cells)
            {
                insrtQry += "'" + cell.Value.ToString() + "',";
            }

            insrtQry = insrtQry.TrimEnd(",".ToCharArray());

            insrtQry += ")";

            try
            {
                connection.Open();
                adapter.InsertCommand = new SqlCommand(insrtQry, connection);
                adapter.InsertCommand.ExecuteNonQuery();

                MessageBox.Show("Row inserted !! ");
                connection.Close();
            }

            catch (Exception ex)
            {
                MessageBox.Show(ex.ToString());
            }
        }
    }

        private void insert_Click(object sender, EventArgs e)
        {
            InsertInfo();
        }
 private void dataGridView1_DefaultValuesNeeded(object sender, DataGridViewRowEventArgs e)
        {
            lstNewRows.Add(e.Row.Index);
        } 
```

# django - Django 测试的 Sphinx 文档

> ID：15761268
> 
> 赞同：1
> 
> 时间：2013-04-02T10:01:49.243
> 
> 标签：django, python-sphinx

我将 Sphinx 用于我的 django 项目文档。我想记录我所有的测试。我如何告诉 index.rst 从我的项目目录中以“test...”开头的所有文件中获取所有 autodoc 字符串。我不想写：

```
.. automodule:: my_project.some_app.tests.test_api

.. autoclass:: my_project.some_app.tests.test_api.TestAPI
    :members: 
```

对于我在项目中拥有的每个测试文件。

谢谢，亚历克斯

# android - 我们如何从布局中删除动态添加的片段

> ID：15761272
> 
> 赞同：9
> 
> 时间：2013-04-02T10:02:09.947
> 
> 标签：android, android-fragments

谁能帮我。我有一个片段说片段 A 并动态将其添加到布局中...假设我已将 3 个片段 A 实例添加到该布局中。那么我如何以编程方式删除该 3 个片段实例。我尝试了谷歌搜索以及另一个 stackoverflow线程，但他们不工作..

请帮我

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-02T10:28:38.657

其实很简单：

假设您添加了这样的片段：

```
fragmentTransac.add(R.id.content, fragA); 
```

相反，您也可以使用 TAG 添加它

```
fragmentTransac.add(R.id.content, new FragA(), "first");
// then the other
fragmentTransac.add(R.id.content, new FragA(), "second"); 
```

然后删除：

```
Fragment f = getFragmentManager().findFragmentByTag("first");
if(f!=null) fragmentTransac.remove(f);
fragmentTransac.commit(); 
```

快乐编码=]

# jsf - 如何禁用 Primefaces 对话框中第一个输入的焦点？

> ID：15761275
> 
> 赞同：13
> 
> 时间：2013-04-02T10:02:13.900
> 
> 标签：jsf, primefaces, dialog, focus

我的页面中有一个对话框，其中包含一个输入字段**(Date, Calendar)**。问题是打开对话框后直接打开日历，因为焦点设置在第一个输入上。

有没有办法在 Primefaces 中禁用焦点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-02T22:16:15.200

您可以更改默认行为；

[http://forum.primefaces.org/viewtopic.php?f=3&t=29050](http://forum.primefaces.org/viewtopic.php?f=3&t=29050)

您始终可以覆盖小部件的默认行为，例如防止日历关注对话框打开；

```
PrimeFaces.widget.Dialog.prototype.applyFocus = function() {
  var firstInput = this.jq.find(':not(:submit):not(:button):input:visible:enabled:first');
  if(!firstInput.hasClass('hasDatepicker')) {
      firstInput.focus();
  }
} 
```

原始代码是；

```
PrimeFaces.widget.Dialog.prototype.applyFocus = function() {
  this.jq.find(':not(:submit):not(:button):input:visible:enabled:first').focus();
} 
```

如果您将覆盖放在 PrimeFaces 资源之后，那么您的 applyFocus 实现将被拾取并使用。

我建议创建一个像 primefaces-overrides.js 这样的 js 文件并将这样的东西放入其中，这是一个缺点，因为您正在针对低级 api 进行编码，您需要在迁移期间注意回归，尽管我们的目标是保持向后兼容性尽我们所能。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-06-02T18:06:36.903

默认情况下，可以在您拥有的另一个输入中设置更简单的焦点。

```
<p:dialog id="dialog" header="Users" focus="savebtn" widgetVar="txtName"> 
```

如果您从另一个文件调用

```
<p:dialog id="dialog" header="Users" focus="savebtn" widgetVar="formRegUsers:txtName"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-25T16:24:08.550

解决此问题的另一个技巧：

我在对话框中添加了一个文本输入作为对话框的第一个输入：

```
<p:dialog id="myDialogId" widgetVar="myDialog"....

  <p:inputText id="fixForFocusProblem"/>

  <p:calendar ...
  ..
</p:dialog> 
```

当显示对话框时，我称之为：

```
$('#myForm\\:fixForFocusProblem').show();
myDialog.show(); 
$('#myForm\\:fixForFocusProblem').hide(); 
```

这样，焦点就放在了立即不可见的输入文本上。

不太好，但它可以在没有视觉干扰的情况下工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-29T12:02:20.027

这也可以：

```
<p:dialog onShow="$(document.activeElement).blur()" ...> 
```

或者 Primefaces jQuery

```
<p:dialog onShow="jQuery(document.activeElement).blur()" ...> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-01T11:07:59.383

在您的 .xhtml 中添加此脚本：

```
 PrimeFaces.widget.Dialog.prototype.applyFocus = function () {
        var firstInput = this.jq.find(':not(:submit):not(:button):input:visible:enabled:first');
        if (!firstInput.hasClass('hasDatepicker')) {
            firstInput.focus();
        }
    } 
```

# android - Android 警报对话框无需等待即可关闭

> ID：15761277
> 
> 赞同：0
> 
> 时间：2013-04-02T10:02:15.247
> 
> 标签：android

在我的应用程序中，我使用了一个警报对话框来显示警告消息并等待是/否。但警告对话框无需等待即可显示并消失。这里的代码如下所示

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("Delete Macro");
            builder.setMessage(" " + mMacroName + "\n\nAre you sure ?");

            builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                   // some tasks
                   }
               });

            builder.setNegativeButton("No", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       finish();
                   }
               });

            AlertDialog dialog = builder.create();
            builder.show(); 
```

**收到的 logcat**显示一些泄漏

```
 04-02 15:09:32.954: E/WindowManager(279): Activity com.mtxlabs.hat.setup.MacroProp has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@43ea4d50 that was originally added here
 04-02 15:09:32.954: E/WindowManager(279): android.view.WindowLeaked: Activity com.mtxlabs.hat.setup.MacroProp has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@43ea4d50 that was originally added here
 04-02 15:09:32.954: E/WindowManager(279):  at android.view.ViewRoot.<init>(ViewRoot.java:247)
 04-02 15:09:32.954: E/WindowManager(279):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
 04-02 15:09:32.954: E/WindowManager(279):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
 04-02 15:09:32.954: E/WindowManager(279):  at android.view.Window$LocalWindowManager.addView(Window.java:424)
 04-02 15:09:32.954: E/WindowManager(279):  at android.app.Dialog.show(Dialog.java:241)
 04-02 15:09:32.954: E/WindowManager(279):  at android.app.AlertDialog$Builder.show(AlertDialog.java:802)
 04-02 15:09:32.954: E/WindowManager(279):  at com.mtxlabs.hat.setup.MacroProp.onSaveButtonClick(MacroProp.java:218)
 04-02 15:09:32.954: E/WindowManager(279):  at java.lang.reflect.Method.invokeNative(Native Method)
 04-02 15:09:32.954: E/WindowManager(279):  at java.lang.reflect.Method.invoke(Method.java:521)
 04-02 15:09:32.954: E/WindowManager(279):  at android.view.View$1.onClick(View.java:2067)
 04-02 15:09:32.954: E/WindowManager(279):  at android.view.View.performClick(View.java:2408)
 04-02 15:09:32.954: E/WindowManager(279):  at android.view.View$PerformClick.run(View.java:8816)
 04-02 15:09:32.954: E/WindowManager(279):  at android.os.Handler.handleCallback(Handler.java:587)
 04-02 15:09:32.954: E/WindowManager(279):  at android.os.Handler.dispatchMessage(Handler.java:92)
 04-02 15:09:32.954: E/WindowManager(279):  at android.os.Looper.loop(Looper.java:123)
 04-02 15:09:32.954: E/WindowManager(279):  at android.app.ActivityThread.main(ActivityThread.java:4627)
 04-02 15:09:32.954: E/WindowManager(279):  at java.lang.reflect.Method.invokeNative(Native Method)
 04-02 15:09:32.954: E/WindowManager(279):  at java.lang.reflect.Method.invoke(Method.java:521)
 04-02 15:09:32.954: E/WindowManager(279):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 04-02 15:09:32.954: E/WindowManager(279):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
 04-02 15:09:32.954: E/WindowManager(279):  at dalvik.system.NativeStart.main(Native Method) 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:10:57.617

试试这个

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setTitle("Delete Macro");
                builder.setMessage(" " + mMacroName + "\n\nAre you sure ?");

                builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {
                       // some tasks
                       }
                   })

                builder.setNegativeButton("No", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {

                       //you are finishing the activity first and trying to display          the dialog later.this your problem 
                           // comment the `finish()`    and see

                          //finish();
                       }
                   }).create();

                builder.show(); 
```

# google-drive-api - 在 Drive 中安装应用程序

> ID：15761279
> 
> 赞同：0
> 
> 时间：2013-04-02T10:02:16.947
> 
> 标签：google-drive-api

我搜索在 Drive 中安装 GAE 应用程序（带有新 API TR 的示例 DrEdit）。一切正常，但我无法正确配置“Google Drive SDK”（部分：驱动器集成）和“安装 URL”字段。

查看屏幕截图（此处：[https](https://docs.google.com/file/d/0B6UEJFMrvusLY01XcHlXd0Fib2M/edit?ups=drive_web) ://docs.google.com/file/d/0B6UEJFMrvusLY01XcHlXd0Fib2M/edit?ups=drive_web ）

错误示例：错误：redirect_uri_mismatch 请求中的重定向 URI：[https](https://pcop-gd01.appspot.com) ://pcop-gd01.appspot.com与注册的重定向 URI 不匹配

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T12:53:25.180

应将安装 URL 添加到 API 访问部分的“重定向 URI”以解决此错误。可以有多个由换行符分隔的重定向 URI。

# java - 除了堆之外，使用 new 构造的 String 对象在哪里？

> ID：15761283
> 
> 赞同：0
> 
> 时间：2013-04-02T10:02:31.263
> 
> 标签：java, string

使用 new 运算符创建的字符串是否驻留在堆上以及字符串池上？

或者可能有人可以将我指向一些文档或链接来指导我的字符串池行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:08:12.887

Java 代码中的字符串字面量驻留在字符串池中，但使用 new 创建的却没有。

字符串池是一种缓存，也存储在堆中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T10:37:07.590

**情况1-**

```
String s1="world";
String s2="india";
String s3="world"; 
```

这里将在 Pool 中创建两个对象。s1 和 s3 将指向同一个对象。字符串文字进入池内存。

**案例2-**

```
String s1=new String("world");
String s2=new String("india");
String s3=new String("world"); 
```

这里将在堆上创建三个对象。

新词使用堆内存来创建对象。

希望我能告诉。

有关更多详细信息，请参见[链接](http://theopentutorials.com/tutorials/java/strings/string-literal-pool/) 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:26:28.903

使用 new 运算符创建的字符串驻留在堆上，而不是在字符串池中（字符串池也存在于堆内存中）。但是您可以通过使用将该对象移动到池中`String.intern()`。
调用`String.intern()`字符串后，如果使用`new`关键字创建的字符串已经存在于池中，则返回池对象的引用。所以现在它将指向池化对象而不是前一个。更多[详情](https://stackoverflow.com/questions/7065337/intern-behaving-differently-in-java-6-and-java-7)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T15:59:20.810

实际上什么都没有承诺。

编译器/JVM 可能会决定在字符串池中创建它，但也可以在 neap 上创建它。今天它可能会在字符串字面量池中为您创建字符串，明天在 JVM 更新后它可能会在堆上为完全相同的代码创建它们。

关键是你的代码**不应该依赖**于你的字符串是在哪里创建的。

例如 - 避免使用 == 运算符比较字符串值。

# asp.net-mvc - ETag 已设置 - 部分视图出错

> ID：15761284
> 
> 赞同：1
> 
> 时间：2013-04-02T10:02:35.980
> 
> 标签：asp.net-mvc, asp.net-mvc-4, partial, etag

```
protected override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        base.OnActionExecuted(filterContext);
        AddRequiredInfoToViewBag();

        if (Request.IsAjaxRequest())
        {
            Response.CacheControl = "no-cache";
            Response.Cache.SetETag((Guid.NewGuid()).ToString());
        }
    } 
```

当我从部分视图调用操作时，上面的代码会崩溃。有人知道如何检查 ETag 是否已设置在缓存中吗？

# java - FIR频率响应

> ID：15761285
> 
> 赞同：0
> 
> 时间：2013-04-02T10:02:37.687
> 
> 标签：java, signal-processing

我是 DSP 的新手。我正在尝试在 java 上创建用于教育目的的应用程序。我想计算 FIR 滤波器系数并绘制它的频率响应。

为了计算系数，我想使用理想频率响应的 ifft，它基本上是矩形窗口。我可以用这种方法和我的 FIR 滤波信号计算系数。然后我想探索它的频率响应。据我所知，我可以通过 fft 从滤波器的脉冲响应中得到它（但那将是同一个矩形窗口，对吧？）。我得到相同的矩形理想频率响应，但我想要真实的频率响应。就像那张照片一样。

![在此处输入图像描述](https://i.stack.imgur.com/iNq1r.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:51:38.537

1.  创建理想的频率响应。
2.  要创建滤波器系数，请使用理想频率响应的 ifft。
3.  要计算实际频率响应，请将零添加到系数数组并调用该数组的 fft。我的问题是，我没有向系数数组添加零。当然，从系数我会得到相同的理想频率响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:26:28.133

记住使用 fft 或 ifft 你假设你的信号是周期性的（所以它不是一个矩形，它是无限的）。此外，理想的响应是幅度的矩形窗口和相位的线性窗口。所以你必须制作一个具有线性相位的信号

```
F = exp(-i*w*0.1);
F(51:end-50) = 0;
impulse = real(ifft(F)); 
```

你仍然会有虚部（但它会非常小），因为当你“归零”高通频带时相位不精确。在该示例中，截止频率为 50，所需的群延迟为 0.1。

# javascript - 如何在不提供 id 的情况下获取 li 的文本？

> ID：15761286
> 
> 赞同：1
> 
> 时间：2013-04-02T10:02:43.703
> 
> 标签：javascript, jquery, html

我`li`在一个标签中有四个标签`ul`。

当我选择一个 li 并且我想隐藏其他三个 li 值时，我想在 li 标签内获取文本。

只有选定的一个仍应显示在页面上。

```
<ul id="names">
  <li>a</li>
  <li>b</li>
  <li>c</li>
  <li>d</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:06:24.250

```
$('#names li').click(function(){
    $(this).siblings().hide();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T10:06:07.830

**这回答了您问题的两个部分：**

```
$('#names li').click(function(){    
  var x = $(this).text(); // gets the text of the selected li
  alert(x); // displays the text inside the selected li 
  $(this).siblings().hide();​​​​ // hides all other li's   
}); 
```

这是您的示例的有效[jsFiddle](http://jsfiddle.net/FTUQF/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T10:06:48.900

这个怎么样？它会将它们全部隐藏并显示使用 jQuery 选择器单击的那个。

```
$('#names li').click(function() {
    $('#names li').hide();
    $(this).show();
}) 
```

使用示例：http: [//jsfiddle.net/eqUD3/](http://jsfiddle.net/eqUD3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T10:06:26.140

像这样试试

```
$("#names li").click(function(){
   var selected = $(this);
   alert('You have selected '+ $(this).text());
   $("#names li").hide();
   $(this).show();
}); 
```

检查小提琴[**DEMO**](http://jsfiddle.net/eqUD3/3/)

# sql-server - SQL Server 中的聚合函数如何工作？

> ID：15761299
> 
> 赞同：1
> 
> 时间：2013-04-02T10:03:25.860
> 
> 标签：sql-server, tsql

有些东西激起了我的好奇心（虽然我的代码没有问题，只是一个普遍的问题）。SQL Server 中的聚合函数究竟是如何工作的？它背后的机制是什么？

假设我们有一个包含 999,999,999 行的表，我们只想获取该表中的行数。

```
SELECT Count(*)
FROM   <Table> 
```

此聚合函数是否会逐行扫描整个表以获取该表中的行数，或者是否有一个内部表在从该表中添加/删除行时跟踪其中的行数（访问通过系统存储过程）并且像这样的函数会使用更多的 CPU 还是会使用更多的 I/O 读/写时间？

PS 我读了[这个 MSDN 站点](http://msdn.microsoft.com/en-us/library/ms175997.aspx)，但很遗憾它没有回答我的问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:00:42.793

只是一个简短的说明：`count(*)`在 SQL Server 中**不**询问元数据。**当您考虑未提交事务的隔离级别和行可见性时，****查询元数据`count(*)`**是完全不正确的。此外，在某些条件下，元数据行数可能会偏离实际行数（旧版本更多，新版本更少）。具体条件无关，但考虑一下*为什么* [`DBCC UPDATEUSAGE`](http://msdn.microsoft.com/en-us/library/ms188414.aspx)有一个`COUNT_ROWS`子句：

> 指定行计数列使用表或视图中的当前行数计数进行更新。

话虽如此，聚合是如何实现的？首先，我建议阅读有关[Volcano](http://paperhub.s3.amazonaws.com/dace52a42c07f7f8348b08dc2b186061.pdf)执行模型的信息。是一篇冗长的论文，但对于理解大多数关系数据库的逐行执行模型至关重要。接下来我推荐阅读这篇博文[Stream Aggregate](http://blogs.msdn.com/b/craigfr/archive/2006/09/13/752728.aspx)。它的要点是流聚合需要一个*排序*的输入，并且在排序的输入上很容易计算任何聚合（顺便说一句。有众所周知的单次[方差](http://en.wikipedia.org/wiki/Algorithms_for_calculating_variance)算法，唯一一个没有明显的琐碎实现的算法）。

为了完整起见，这里是流式聚合~~丑陋姐妹~~内存猪替代品的链接：[哈希聚合](http://blogs.msdn.com/b/craigfr/archive/2006/09/20/hash-aggregate.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T10:24:51.813

如果可能，它将运行和索引扫描，否则将运行表扫描。

```
Set SHOWPLAN_TEXT on
go
SELECT Count(*)
FROM   <Table> 
```

# c++ - 二维数组是否在 glUniformMatrix4fv、C++ 中工作？

> ID：15761301
> 
> 赞同：2
> 
> 时间：2013-04-02T10:03:26.687
> 
> 标签：c++, opengl, glsl

我有一个 4x4 矩阵类，将值保存为 2d 浮点数组：float mat[4][4]; 我重载了 [] 运算符

`inline float *Matrix4::operator[](int row) { return mat[row]; }`

我的着色器中有一个统一的 mat4（统一的 mat4 Bones[64];），我将把我的数据上传到上面。我将骨骼保存为 Matrix4 指针 (Matrix4 *finalBones)，它是一个矩阵数组，包含 numJoints 元素。这就是我用来上传数据的：

```
glUniformMatrix4fv(shader.getLocation("Bones"),numJoints,false,finalBones[0][0]); 
```

我完全不确定会发生什么，所以我需要询问这是否可行，或者我需要将所有内容提取到 16*numJoints 大小的浮点数组中，这对于每个刻度来说似乎都很昂贵。

编辑这是我所做的，对于每个绘制操作来说似乎真的很昂贵

```
void MD5Loader::uploadToGPU()
{
float* finalmat=new float[16*numJoints];
for (int i=0; i < numJoints; i++)
    for (int j=0; j < 4; j++)
        for(int k=0; k < 4; k++)
            finalmat[16*i + j*4 + k] = finalBones[i][j][k];

glUniformMatrix4fv(shader.getLocation("Bones"),numJoints,false,finalmat);

delete[] finalmat;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T10:40:48.037

这取决于两件事。假设您的编译器是 C++03，（并且您关心标准合规性），那么您的`Matrix`类*必须*是[POD 类型](https://stackoverflow.com/a/4178176/734069)。特别是，它必须没有构造函数。C++11[显着放宽了这些规则](https://stackoverflow.com/a/7189821/734069)。

另一件事是您的矩阵似乎是行优先的。我这样说是因为您`operator[]`似乎认为您的 2D 数组是行优先的。第一个坐标是`row`而不是列，所以它是行主要的存储顺序。

如果你要给 OpenGL 行优先矩阵，你需要*告诉*它它们是行优先的：

> glUniformMatrix4fv(shader.getLocation("Bones"), numJoints, GL_TRUE, finalBones[0][0]);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:24:54.337

使用 C++11，具有[标准布局](http://en.cppreference.com/w/cpp/types/is_standard_layout)的类可以转换为指针，寻址它的第一个成员，然后再返回。通过**sizeof**检查，您可以保证连续的矩阵数据：

```
#include <type_traits>

static_assert((sizeof(Matrix4) == (sizeof(GLfloat) * 16)) &&
              (std::is_standard_layout<Matrix4>::value),
              "Matrix4 does not satisfy contiguous storage requirements"); 
```

一旦您拥有非平凡的构造函数等，[平凡](http://en.cppreference.com/w/cpp/types/is_trivial)`transpose`（或 POD）布局就太受限制了。您的帖子建议您需要将参数设置为`GL_TRUE`.

# iphone - 计算两个CGPoint的外点

> ID：15761303
> 
> 赞同：0
> 
> 时间：2013-04-02T10:03:29.127
> 
> 标签：iphone, ios, xcode, cocos2d-iphone

我们有： 1）m_ptBulletStartPos 点 2）触摸移动点

计算内容：通过投掷弹罩点和触摸移动点并根据触摸移动旋转的直线上的外部点。

获取方法：我们创建一个方法，在其中绘制虚线，该函数根据另一个函数调用，该函数根据触摸移动点响应工作。

我必须计算两个 CGPoint 的外点。

我的第一个 CGPoint 是 - `ccp(m_ptBulletStartPos.x,m_ptBulletStartPos.y);`// 固定点

第二个 CGPoint 是 - At touchesMoved

我将 CGPoint 对象添加到一个数组中。

```
 External point(it will move accruing to touch moved
                         |
                         |
                         |
                         |
          ccp(m_ptBulletStartPos.x,m_ptBulletStartPos.y)// it should be fixed like anchor
                         |
                         |
                         |
                         |
                    Touch move point : ccp(touch.x,touch.y) 
```

这是我的代码根据[查找外部点](http://easycalculation.com/analytical/learn-ratio.php)工作，但工作不正确。

```
CGPoint myexternalPoint=ccp(230,60);    //suppose
float fDistancem        = sqrt(pow(myexternalPoint.x - point.x, 2) + pow(myexternalPoint.y - point.y, 2));
float fDistancen        = sqrt(pow(myexternalPoint.x - m_ptBulletStartPos.x, 2) + pow(myexternalPoint.y - m_ptBulletStartPos.y, 2));    
CGFloat xdt=(fDistancem*point.x-fDistancen*m_ptBulletStartPos.x)/(fDistancem-fDistancen);
CGFloat ydt=(fDistancem*point.y-fDistancen*m_ptBulletStartPos.y)/(fDistancem-fDistancen);
CGPoint newexternalPoint = ccp(xdt, ydt);
NSLog(@"new externalPoint %@", NSStringFromCGPoint(newexternalPoint)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:10:22.313

```
CGPoint fixedPoint = ...
CGPoint touchPoint = ...

CGPoint direction
direction.x = fixedPoint.x - touchPoint.x;
direction.y = fixedPoint.y - touchPoint.y;

CGPoint calculatedPoint;
calculatedPoint.x = fixedPoint.x + direction.x;
calculatedPoint.y = fixedPoint.y + direction.y; 
```

这是你想要的点吗？如果您希望该点更远/更接近`fixedPoint`，只需乘以`direction`一个因子。

欲了解更多信息，您可以 google`vector algebra`或`analytic geometry`. 了解基础知识是每个程序员必须的。

# ruby - 以字段为键将对象数组转换为哈希

> ID：15761306
> 
> 赞同：31
> 
> 时间：2013-04-02T10:03:35.067
> 
> 标签：ruby, type-conversion

我有一个对象数组：

```
[
  #<User id: 1, name: "Kostas">,
  #<User id: 2, name: "Moufa">,
  ...
] 
```

我想将其转换为以`id`为键，以对象为值的哈希。现在我这样做，但我*知道*有更好的方法：

```
users = User.all.reduce({}) do |hash, user|
  hash[user.id] = user
  hash
end 
```

预期输出：

```
{
  1 => #<User id: 1, name: "Kostas">,
  2 => #<User id: 2, name: "Moufa">,
  ...
} 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-04-02T10:12:32.697

```
users_by_id = User.all.map { |user| [user.id, user] }.to_h 
```

如果您使用的是 Rails，ActiveSupport 提供[Enumerable#index_by](http://api.rubyonrails.org/classes/Enumerable.html#method-i-index_by)：

```
users_by_id = User.all.index_by(&:id) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T10:11:22.580

通过使用`each_with_object`而不是`reduce`.

```
users = User.all.each_with_object({}) do |user, hash|
  hash[user.id] = user
end 
```

# button - 将变量从 aspx 传递到 .cs

> ID：15761309
> 
> 赞同：0
> 
> 时间：2013-04-02T10:03:44.907
> 
> 标签：button, sender, commandargument, aspbutton

我正在尝试将 Id 从 aspx 传递给 .cs。这是我在 aspx 中的代码：

```
 <asp:Button ID="btnAddAsFriend" runat="server" Text="Add as Friend" onclick="btnAddAsFriend_Click" CommandName = "Id" CommandArgument='<%# Eval("u.UserID.ToString()") %>'/> 
```

正在设置 CommandArgument，但是当我尝试从 .cs 中读取它时，它变得空了。这是我在 .cs 中的代码

```
 protected void btnAddAsFriend_Click(object sender, EventArgs e)
        {
            string id = ((Button)sender).CommandArgument;

        } 
```

谢谢

# c# - 添加资源和设置exe描述

> ID：15761310
> 
> 赞同：0
> 
> 时间：2013-04-02T10:03:54.843
> 
> 标签：c#, codedom

我在运行时生成 C# 代码并用`CSharpCodeProvider`我遇到的两个问题进行编译

*   如何为生成的exe添加资源？
*   如何为其设置可执行描述（即公司名称等）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:08:02.080

看看这里我的朋友。我认为这会解决你的问题，因为这个人遇到了同样的问题：

[我们如何将嵌入式资源添加到在运行时从源文件编译的文件中](https://stackoverflow.com/questions/10234203/how-can-we-add-embedded-resources-to-a-file-which-is-compiled-from-a-source-file)

# asp.net-mvc - ASP MVC 3 路由错误？

> ID：15761312
> 
> 赞同：0
> 
> 时间：2013-04-02T10:04:01.297
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我在我的网站上发现了一个缺陷……我不确定这是一个错误……还是设计使然。

我注册了以下路线。

```
routes.MapRoute("EditProduct", // Route name
                "product/addproduct/{id}", // URL with parameters
                new { controller = "Product", action = "AddProduct", id = UrlParameter.Optional } 
                ); 
```

在 _Layout.cshtml 我定义了以下链接：

```
 <li><a href="@Url.Action( "AddProduct", "Product")">Add new product</a></li> 
```

如果当前 url 包含 'Id' 参数，例如：/product/details/5，则从布局中生成菜单链接 /product/addproduct/5。它从 RequestContext 中获取 id 参数。

这是一个错误......因为在帮助程序中我没有为我的链接指定参数？...或者这是设计使然？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:08:45.720

我认为您甚至不需要在这里指定路线。

默认情况下 MVC3 使用 URL `/Controller/Action/{id}`。

尝试删除您指定的路线，看看它是否可以正常工作。

# android - ArrayAdapter 不接受参数化类型参数

> ID：15761317
> 
> 赞同：0
> 
> 时间：2013-04-02T10:04:18.767
> 
> 标签：android, generics

以下代码确实有效：

```
ArrayList<String> menuItems = new ArrayList<String>(Arrays.asList(new String[] {
    "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten"
}));

ListView listView = (ListView) findViewById(R.id.listView1);
ArrayAdapter<String> mAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, menuItems);
mAdapter.setDropDownViewResource(android.R.layout.simple_list_item_1);
listView.setAdapter(mAdapter); 
```

但是当我使用`ArrayAdapter<WrapperType<T>>`代替时`ArrayAdapter<String>`，它不起作用；Android 将声明*应用程序已意外停止*。

为什么它没有按预期工作？不能将`ArrayAdapter`参数化类型作为参数处理？

PS：想象一下，类型`T`只是一个带有几个属性的类。该`WrapperType<T>`类型是参数化的，并且有一个`toString()`使用`T`类属性的方法。

## 更新：

我读了 LogCat （它隐藏在某个地方），似乎我得到了一个`NoClassDefFoundError`on class `ContentManager$1`。

我检索`ArrayList<WrapperType<T>> menuItems`如下：

```
ArrayList<WrapperType<T>> menuItems = ContentManager.readIt(); 
```

**内容管理器类：**

```
public class ContentManager {

    public static ArrayList<WrapperType<T>> readIt() {
        T t1 = new T("One", "1");
        T t2 = new T("Two", "2");

        WrapperContainer<T> container = new WrapperContainer<T>(Arrays.asList(new T[] { t1, t2 })) {

            protected void initParams(WrapperType<T> dc) {
                dc.setParam("%a%", dc.extract().getPropA());
                dc.setParam("%b%", dc.extract().getPropB());
            }

            protected void initFormatting(WrapperType<T> dc) {
                String ft = "%a% - %b%";
                setFormatting(ft);
            }
        };
        return container.getDisplayWrappers();
    }
} 
```

**WrapperType 类：**

```
class WrapperType {

    protected T element;

    private String formatting = "";

    protected HashMap<String, String> params = new HashMap<String, String>();

    public DisplayWrapper(T element) {
        this.element = element;
        initParams();
        initFormatting();
    }

    protected void initParams() { }

    protected void initFormatting() { };

    public final void setParam(String key, String value) {
        this.params.put(key, value);
    }

    public final void setFormatting(String formatting) {
        this.formatting = formatting;
    }

    public final T extract() {
        return this.element;
    }

    private final String getFormattedText() {
        String ft = this.formatting;
        for (String key : this.params.keySet()) {
            ft = ft.replace(key, this.params.get(key));
        }
        return ft;
    }

    @Override
    public String toString() {
        String ft = getFormattedText();
        return ((ft != null && !ft.equals("")) ? ft : "[UNFORMATTED_STRING]");
    }
} 
```

**WrapperContainer 类：**

```
public abstract class WrapperContainer<T> {

    private ArrayList<WrapperType<T>> containers = new ArrayList<WrapperType<T>>();

    protected HashMap<String, String> params = new HashMap<String, String>();

    public WrapperContainer(List<T> elements) {
        for (T element : elements) {
            WrapperType<T> dw = new WrapperType<T>(element) {

                protected void initParams() {
                    WrapperType<T> dw = this;
                    WrapperContainer.this.initParams(dw);
                }
            };
            this.containers.add(dw);
        }
    }

    protected abstract void initParams(WrapperType<T> dw);

    protected void initFormatting(WrapperType<T> dw) { }

    protected void setFormatting(String formatting) {
        for (WrapperType<T> dw : this.containers) {
            dw.setFormatting(formatting);
        }
    }

    public ArrayList<WrapperType<T>> getDisplayWrappers() {
        return this.containers;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:15:21.517

我猜您正在尝试将适配器的源设置为非字符串数组列表；尝试在将 menuItems 设置为适配器之前将其转换为字符串数组或字符串列表

# c# - 应用程序在计划任务启动时不执行 Form1_load 方法

> ID：15761318
> 
> 赞同：0
> 
> 时间：2013-04-02T10:04:20.080
> 
> 标签：c#

我有一个使用 Windows 窗体的 C# 应用程序。我的应用程序工作正常，但是当我想通过操作系统（Windows 7）使用计划任务启动它时，它不会加载 Form1_load 方法。我该如何解决这个问题？

这是 Form1_load 方法的主体：

```
 private void   Form1_Load(object sender, EventArgs e)
    {
        try
        {

            bool fResult = false;
            fResult = registerDeviceNotification();
            g_oGeneratorManager = new CGeneratorManager();
            if (true != fResult)
            {
                Debug.WriteLine("Register device notification failed");
                MessageBox.Show("Register device notification failed", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }

            lblStatus.Text = "Running";
        }
        catch (Exception ex)
        {
            this.Visible = false;
            CLog.Err(ex.Message);
            MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            Application.Exit();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:49:28.293

任务调度程序意味着执行类似命令或控制台应用程序，无需 ui。

拆分出你打算在任务调度器下执行的代码，并将这些代码包装在 (dll) 下

然后您使用 ui 创建 2 个单独的项目：第一个是您现有的 winform，但您更改了代码以重用 dll。第二个项目是控制台应用程序，与winform类似的方法，重用dll逻辑。

现在将控制台应用程序用于任务调度程序。

# windows-store-apps - c:\users\public 文件夹无法从 x86 机器上的 Metro 应用程序访问

> ID：15761321
> 
> 赞同：-2
> 
> 时间：2013-04-02T10:04:28.490
> 
> 标签：windows-store-apps

我无法使用 StorageFolder.GetFolderFromPathAsync("C:\Users\Public\Documents") 从 x86 机器上运行的 Windows 商店应用程序访问 C:\Users\Public\Documents 文件夹。它在我的 win8 桌面上运行良好。知道为什么我会收到此错误吗？谢谢，MetroUI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:11:15.743

JB 是对的，由于沙盒限制，您无法直接访问该文件夹，但您可以采用其他 2 种可能更适合您的方法。

如果您添加`Documents Library`到您的应用程序`Capabilities`，您将能够直接访问用户文档库中的文件（它也应该包括公共文档，除非用户更改了他的设置），只要您已`File Type Association`为您的应用程序的该扩展声明了一个`Declarations`. 您可以通过编辑来设置两者`Package.appxmanifest`。使用以下代码访问`StorageFolder`：

```
var folder = KnownFolders.DocumentsLibrary; 
```

请记住，[您需要公司帐户](http://blogs.msdn.com/b/jennifer/archive/2012/09/18/what-is-the-difference-between-a-company-vs-individual-account-for-the-windows-store.aspx)才能将具有`Documents Library`功能的应用程序发布到 Windows 应用商店。

或者，您可以使用`FolderPicker`，以便用户授予您对该文件夹的访问权限。在这种情况下，您不需要任何功能或声明，您将能够访问所有文件：

```
var picker = new FolderPicker();
picker.FileTypeFilter.Add(".txt");
var folder = await picker.PickSingleFolderAsync(); 
```

您不需要用户在每次应用启动时都选择文件夹。您可以存储它的引用以`FutureAccessList`供以后访问它并存储相应的令牌（例如设置）：

```
var token = StorageApplicationPermissions.FutureAccessList.Add(folder); 
```

当您想再次访问文件夹时，只需使用令牌获取文件夹引用：

```
folder = await StorageApplicationPermissions.FutureAccessList.GetFolderAsync(token);
var items = await folder.GetItemsAsync(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:24:19.610

您无法使用该方法访问应用程序沙箱之外的文件系统。这只会访问您的应用程序隔离存储中的文件。

如果您想从沙箱外部获取文件，则必须使用 a`FileOpenPicker`并让用户选择文件

```
var picker = new FileOpenPicker();
picker.SuggestedStartLocation = PickerLocationId.DocumentsLibrary;

var file = await picker.PickSingleFileAsync();
if (file != null)
{
    IRandomAccessStream stream = await file.OpenAsync(Windows.Storage.FileAccessMode.Read);
} 
```

然后，您将使用流中的数据。

# android - 向 TabActivity 添加搜索功能

> ID：15761326
> 
> 赞同：0
> 
> 时间：2013-04-02T10:04:39.720
> 
> 标签：android, search, tabactivity, android-tabactivity

根据我的应用程序要求，我创建了一个扩展 TabActivity 的活动，添加了选项卡和不同的活动作为这些选项卡的内容。至此一切正常，但我想将搜索功能添加到整个 TabActivity，这意味着搜索是在 TabHost 的顶部完成的，它应该反映所有选项卡内容搜索。

我知道如何将搜索添加到单个活动，但我没有找到任何解决我的问题的方法。

如果您知道执行此操作的任何程序，请建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:21:18.997

根据文档 TabActivity 已弃用：

[http://developer.android.com/reference/android/app/TabActivity.html](http://developer.android.com/reference/android/app/TabActivity.html)

您应该使用 FragmentTabHost 或超级棒的 SherlockActionBar 库。

在您实施其中一种现代方式之后，只需在您的菜单中添加一个 searchView 菜单项，它就会在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:27:44.920

在添加标签主机之前，您可以尝试在活动中托管搜索栏，如下面的代码所示。并通过添加文本观察器另外实现搜索功能

```
 public class MyTabActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab_xml_with_search_bar);

    }
} 
```

**tab_xml_with_search_bar.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="Search text"
        />

<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@android:id/tabhost"
    android:layout_width="match_parent"
     android:layout_height="match_parent" >
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"/>
    </LinearLayout>

</TabHost> 
```

# css - CSS padding 不断继承

> ID：15761331
> 
> 赞同：0
> 
> 时间：2013-04-02T10:04:46.863
> 
> 标签：css, overriding, padding, inheritance

我正在制作一个下拉菜单，但是第一个 ul 中的所有样式都被添加到第一个 ul 下方每个 ul 的样式中。

我尝试使用 !important 覆盖样式，并将 css 移动到不同的级别。有人知道这里发生了什么吗？

这张图片可能是最好的解释方式：[http ://screencast.com/t/UrkRbjjaYctp](http://screencast.com/t/UrkRbjjaYctp)

![在此处输入图像描述](https://i.stack.imgur.com/wd2yG.png)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:28:38.953

```
#menuwrapper > ul{
padding-left:37px;
}
#menuwrapper ul ul {
padding-left:40px;
} 
```

这应该可以解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:21:05.823

这是预期的行为。填充是相对添加的。

如果您不想`ul`填充嵌套，则必须`37px`从父级中删除填充`ul`（或使用一些技巧作为负边距，例如*margin-left: -37px*）。

如果您从父级删除填充，您可能需要为其每个子级添加一些边距以保留布局。我建议重新考虑 HTML 结构。

# themes - 如何在不“破解”核心的情况下将文件添加到 PrestaShop 主题

> ID：15761333
> 
> 赞同：3
> 
> 时间：2013-04-02T10:04:52.537
> 
> 标签：themes, prestashop

我正在开发一个需要重新设计的 PrestaShop 网络。
我已经复制了他们的主题，我正在那里工作。现在我需要添加一些 javascript 文件，它们需要包含在我的所有主题页面中。

我在这里阅读了类似的问题并查找了信息，基本上我找到了两种解决方案：

1) 使用类似 {$base_dir} 的内容将文件直接添加到您的 HEAD.tpl 中
（此处解释：[Prestashop 根目录](https://stackoverflow.com/questions/10428347/prestashop-root-directory)）

2) 使用新的 setMedia() 函数在 FrontController.php（覆盖/类）中添加文件
（解释这里：[http](http://tinyurl.com/cxucwq7) ://tinyurl.com/cxucwq7 ）

第二种解决方案似乎是最推荐的一种，但是当我打开 FrontController.php 时，我看到以下警告：

```
* Do not edit or add to this file if you wish to upgrade PrestaShop to newer versions in the future. 
```

所以我现在有点困惑。编辑此文件是否安全？未来的升级怎么样，它们会覆盖那里所做的任何更改吗？将它们添加到您的主题 header.tpl 并且不影响 cms 的核心不是更安全吗？

（这是我在这里的第一个问题，我尝试按照指南进行操作，但如果对如何改进它提出任何意见，我将不胜感激，谢谢！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:24:53.713

使用覆盖文件是完全安全的，这就是它们存在的原因。我在我制作的每个 Prestashop 中都使用过它们，并且它们从未在更新中被替换过。他们放的文字是用于许可证的，他们可能只是将其复制/粘贴到任何地方。

我不建议手动将文件添加到`header.tpl`. 它会起作用，但使用该`Tools::addJs()`方法添加它的好处是脚本将与所有其他脚本连接。

# wpf - 如何发送有关组合集合更改的通知

> ID：15761334
> 
> 赞同：0
> 
> 时间：2013-04-02T10:04:54.507
> 
> 标签：wpf, notifications, compositecollection

我有一个复合集合。从后面的代码修改其项目后，我希望视图得到更新。但我不知道如何通知视图。我试过了`INotifyCollectionChanged`，但它对我不起作用。

```
 protected ObservableCollection<ScriptParameterComboItem> cItems

    public virtual CompositeCollection CItems
    {
        get
        {
            return new CompositeCollection {new CollectionContainer {Collection = cItems}};
        }
    }

    public void ConvertValue(params object[] parameters)
    {
        string newAverageOption = DisplayValueConverter.Convert(1, parameters);
        var enumItem = cItems[1];
        enumItem.Value = newAverageOption;
        RaiseCollectionChanged("CItems");
    }

    protected void RaiseCollectionChanged(string property)
    {
        if(CollectionChanged != null)
            CollectionChanged(this, new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:08:16.770

你的`ScriptParameterComboItem`班级必须实现`INotifyPropertyChanged`. 因此，当**更改**其属性时，将通知侦听器。使用有助于在将某些内容**添加**到集合或**从中删除**`ObservableCollection`时通知侦听器。不更改每个项目中的实际数据。

# php - 使用 PHP 上传、调整大小和保存（或生成缩略图）

> ID：15761335
> 
> 赞同：0
> 
> 时间：2013-04-02T10:04:57.473
> 
> 标签：php, html

我正在制作一个网站，让用户能够跟踪他们最喜欢的乐队。该网站的功能之一是允许用户上传他们去过的任何演出的照片，然后将它们保存到文件中，并将图像位置存储在数据库中。

我的问题是我需要能够在保存时调整图像的大小，因为当有很多图片时页面需要很长时间才能加载。

我知道这里有很多这样的问题，但我只是不确定如何修改我必须这样做的代码。

这是最好的方法还是我应该使用缩略图？由于图像将显示在画廊中，如果有很多则页面加载速度会变慢

我对php的了解有限，因此不胜感激

这是我目前的代码：

```
 <?php

  ///UPLOAD IMAGES
 $sql = "SELECT * FROM photouploads WHERE BandID ='$bandid'";
 $result = mysql_query($sql,$connect)or die ($error1);
 $row = mysql_num_rows($result);
     $userid=$_SESSION['userid'];

 if (isset($_POST['submit']))

     {
         $name = $bandid."(".++$row.").jpg";

         $tmp_name=$_FILES['photo']['tmp_name'];

         if ($name)
         {
             //start upload
             $location="Photouploads/".$name;
             if (move_uploaded_file($tmp_name,$location))
                  {
                   mysql_query("INSERT INTO photouploads (BandID,UserID,ImageLocation)
                   VALUES ('$bandid', '$userid', '$location')") ;
                  }

         }
else
;

} 
```

我的表格：

```
 <input type='file' name='photo' id='photo'> 
        <input type='submit' class='submitLink' name='submit' id='submit'value='upload'>
 </form>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:20:37.900

检索*所有*数据以找到新图像的名称非常低效。更好的解决方案是插入一条记录而不存储文件名并从 auto_increment id 生成文件名（使用基本路径 /some/where/Photouploads/$bandid/）。

如果这不是您最大的性能问题，那么很快就会出现。

减小图像的大小也是一个好主意——检查重复项也是如此。

> 如果有很多，那么页面加载速度会变慢

推迟在首屏下加载图像 - 有很多现成的脚本可以做到这一点（[例如](http://www.appelsiini.net/projects/lazyload)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:53:50.990

这是我过去使用过的一个非常基本的 PHP 图像大小调整类。您需要安装并启用 PHP GD2 模块才能使其工作。

用法：

```
$resized = ImageResizer::resizeExistingImage($_FILES['photo']['tmp_name'],
                                                                null,
                                                                500,
                                                                500,
                                                                100);
if (!$resized){
    throw new Exception('Could not resize image');
}

echo '<pre>';
print_r($resized);
echo '</pre>'; 
```

班上：

```
class ImageResizer
{
    const RESULT_RESIZE_NOT_REQUIRED = 'resize_not_required';
    const RESULT_RESIZE_SUCCESSFUL = 'resize_successful';

    private static $_filePath = null;
    private static $_newPath = null;
    private static $_maxwidth = null;
    private static $_maxheight = null;
    private static $_quality = null;

    private static $_newWidth = null;
    private static $_newHeight = null;

    private static $_actualWidth = null;
    private static $_actualHeight = null;

    /**
     * Takes an image (from a file path) and resizes it. The newly resized image
     * can then either be created in a different location, therefore maintainig 
     * the original file. Or can be created in the original location, therefore
     * overwriting the original file.
     * 
     *
     * @static 
     * @access public
     * @param string    $filePath   The file path of the image to resize
     * @param string    $newPath    The file path where the resized image will 
     *                              be created. Null to overwrite original.
     * @param integer   $maxwidth   The maximum height of the resized image
     * @param integer   $maxheight  The maximum width of the resized image
     * @param integer   $quality    The quality of the image 
     */
    public static function resizeExistingImage($filePath, 
                                                $newPath = null, 
                                                $maxwidth = 1000, 
                                                $maxheight = 1000, 
                                                $quality = 100)
    {
        if (is_null($newPath)) {
            $newPath = $filePath;
        }

        $gdImage = getimagesize($filePath);

        $actualWidth = $gdImage[0];
        $actualHeight = $gdImage[1];

        // Do we even need to resize the image!?
        if ($actualWidth <= $maxwidth && $actualHeight <= $maxheight){
            return array('result' => self::RESULT_RESIZE_NOT_REQUIRED,
                            'newHeight' => $actualHeight,
                            'newWidth' => $actualWidth);
        }

        $ratio = $actualWidth / $maxwidth;
        // echo "ratio : ".$ratio."<br />";

        // echo "Current dimensions: ".$actualWidth." : ".$actualHeight." : <br />";

        // set the defaults:
        $newWidth = intval($actualWidth);
        $newHeight = intval($actualHeight);     

        if ($actualWidth > $maxwidth) {
            $newWidth = intval($maxwidth);
            $newHeight = intval($actualHeight / $ratio);
        }

        // echo "After width process, dimensions: ".$newWidth." : ".$newHeight." : <br />";

        // once we've got the size width, is the height now small enough? 
        if ($newHeight > $maxheight) {
            // set a new ratio
            $ratio = $newHeight / $maxheight;
            $newWidth = intval($newWidth / $ratio);
            $newHeight = intval($maxheight);
        }       

        // echo "New dimensions: ".$newWidth." : ".$newHeight." : <br />";

        // Assign the class vars
        self::$_filePath = $filePath;
        self::$_newPath = $newPath;
        self::$_maxwidth = $maxwidth;
        self::$_maxheight = $maxheight;
        self::$_quality = $quality;

        self::$_newWidth = $newWidth;
        self::$_newHeight = $newHeight;

        self::$_actualWidth = $actualWidth;
        self::$_actualHeight = $actualHeight;

        switch (strtolower($gdImage['mime'])) {
            case 'image/jpeg':
                self::_createFromJpeg();
                break;
            case 'image/pjpeg':
                self::_createFromPJpeg();
                break;
            case 'image/png':
                self::_createFromPng();
                break;
            case 'image/gif':
                self::_createFromGif();
                break;

            default:
                throw new Exception('Mime Type \'' . $gdImage['mime'] . '\' not supported');
                break;
        }

        return array('result' => self::RESULT_RESIZE_SUCCESSFUL,
                        'newHeight' => $newHeight,
                        'newWidth' => $newWidth);

    }

    /**
     * Resizes images of type image/jpeg.
     *
     * @static 
     * @access private
     * @return void
     */
    private static function _createFromJpeg()
    {
        $img = imagecreatefromjpeg(self::$_filePath);

        $new_img = imagecreatetruecolor(self::$_newWidth, self::$_newHeight);

        imagecopyresampled($new_img, 
                            $img, 
                            0, 
                            0, 
                            0, 
                            0, 
                            self::$_newWidth, 
                            self::$_newHeight, 
                            self::$_actualWidth, 
                            self::$_actualHeight);

        imagejpeg($new_img, self::$_newPath, self::$_quality);
    }

    /**
     * Resizes images of type image/jpeg.
     *
     * @static 
     * @access private
     * @return void
     */
    private static function _createFromPJpeg()
    {
        $img = imagecreatefromjpeg(self::$_filePath);

        imageinterlace($img, 1);

        $new_img = imagecreatetruecolor(self::$_newWidth, self::$_newHeight);

        imagecopyresampled($new_img, 
                            $img, 
                            0, 
                            0, 
                            0, 
                            0, 
                            self::$_newWidth, 
                            self::$_newHeight, 
                            self::$_actualWidth, 
                            self::$_actualHeight);

        imagejpeg($new_img, self::$_newPath, self::$_quality);
    }

    /**
     * Resizes images of type image/png.
     *
     * @static 
     * @access private
     * @return void
     */
    private static function _createFromPng()
    {
        $img = imagecreatefrompng(self::$_filePath);

        $new_img = imagecreatetruecolor(self::$_newWidth, self::$_newHeight);

        imagecopyresampled($new_img, 
                            $img, 
                            0, 
                            0, 
                            0, 
                            0, 
                            self::$_newWidth, 
                            self::$_newHeight, 
                            self::$_actualWidth, 
                            self::$_actualHeight);

        imagepng($new_img, self::$_newPath);        
    }

    /**
     * Resizes images of type image/gif.
     *
     * @static 
     * @access private
     * @return void
     */
    private static function _createFromGif()
    {
        $img = imagecreatefromgif(self::$_filePath);

        $new_img = imagecreatetruecolor(self::$_newWidth, self::$_newHeight);

        imagecopyresampled($new_img, 
                            $img, 
                            0, 
                            0, 
                            0, 
                            0, 
                            self::$_newWidth, 
                            self::$_newHeight, 
                            self::$_actualWidth, 
                            self::$_actualHeight);

        imagegif($new_img, self::$_newPath);    
    }
} 
```

希望有帮助。

# sql - SQL SERVER 2005 中 DATETIME 中的 DATE（不使用 VARCHAR）

> ID：15761336
> 
> 赞同：1
> 
> 时间：2013-04-02T10:04:57.343
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我们的应用程序使用***SQL SERVER 2005***

我只需要在 GridView中显示**来自 DateTime 的 DATE 。**

我不想**将**其转换为任何其他格式之类的`Varchar`东西。它应该只是**DateTime**格式本身，没有**Time**。

请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T10:38:24.787

在 SQL Server 中，代码是

```
CAST(datediff(d,0,datetimecol) as datetime) 
```

但是，我怀疑这对 GridView 有什么好处，它会推断它是一个“日期时间”列并显示“日期+时间”格式，即使时间都是“00:00:00”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T10:12:25.507

如下所示在 Grid 中绑定 DateField 列，然后它可以工作...

```
<asp:BoundField DataField="Your_Date_Column" 
                    HeaderText="Date_Column" 
                    DataFormatString="{0:d}" /> 
```

`DataFormatString="{0:d}"`它显示日期`3/11/2013`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T10:49:21.463

在 SQL 2005 中，如果没有时间（时间是 datetime 类型的一部分），则无法将其保持为 datetime 格式，您可以获得的最佳结果是：

```
2013-04-02 00:00:00.000 
```

如果您愿意转换为 VARCHAR，则可以使用类似于：

```
SELECT CONVERT(VARCHAR(10),GETDATE(),111) 
```

它将根据需要显示日期部分。否则，您需要迁移到 SQL 2008+，在该版本中可以使用适当的日期类型。

如果您需要坚持使用 SQL 2005，实现此目的的最佳方法是在数据网格视图本身中对其进行格式化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T10:50:11.293

如果您想截断日期时间以使其仅返回午夜的日期，请参阅此问题的已接受答案[-](https://stackoverflow.com/questions/923295)该问题专门与 SQLServer 2008 相关，但答案包括有关如何在 SQLServer 2005 中实现此目的的详细信息。

如果您想将日期时间字段转换为仅日期字段 - 您无法在 SQLServer 2005 中单独使用 SQL 实现此目的，因为没有仅日期数据类型 - 请参见[此处](http://msdn.microsoft.com/en-gb/library/ms187752%28v=sql.90%29.aspx)。

# android - 在 SQLite 中使用事务在 JellyBean 中给出错误

> ID：15761340
> 
> 赞同：2
> 
> 时间：2013-04-02T10:05:06.630
> 
> 标签：android, multithreading, sqlite, transactions

我有一个扩展异步任务的 DownLoadData 类，用于从 Web 服务下载主数据。SQLite 数据库中有 10 个主表，每个表都需要单独的 Web 服务调用。所以，在 DownLoadData 任务中，我有 10 个线程。每个都将调用各自的 web 服务，接收数据，然后将其插入到各自的表中。

我在 开始事务，`_onPreExecute()_`并在检查是否所有线程都完成后，在 结束事务`_onPostExecute()_`。

问题是，这种方法对于 ICS 之前的版本非常有效。它似乎在 JellyBean 中不起作用。该应用程序每隔 60 秒就会挂起此 logcat 消息：

```
04-02 14:53:23.263: W/SQLiteConnectionPool(1409): The connection pool for database '/data/data/com.c2info.liveorder/databases/DB' has been unable to grant a connection to thread 117 (AsyncTask #2) with flags 0x1 for 30.010002 seconds.

04-02 14:53:23.263: W/SQLiteConnectionPool(1409): Connections: 0 active, 1 idle, 0 available. 
```

我像这样开始和结束交易：

```
public LocalDatabase beginTransact() {

  mdbHelper = new DatabaseHelper(ctx);
  mdb = mdbHelper.getWritableDatabase();
  execSQL("BEGIN");
  return this;
}

public void endTransact() {

  execSQL("END");
  mdbHelper.close();
} 
```

我还在所有线程中使用相同的数据库实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T04:26:48.493

我通过将每个单独的线程视为单个事务而不是所有线程的单个事务来克服 JellyBean 中的问题

# android - 应用程序无法在 Nexus 10 上正常运行

> ID：15761343
> 
> 赞同：0
> 
> 时间：2013-04-02T10:05:20.663
> 
> 标签：android

我正面临一个奇怪的问题（这似乎不合逻辑，我正面临着它！）

问题是这部分代码适用于所有设备，但不适用于我客户的设备 NEXUS 10。代码是：

```
 Chronometer Timer = (Chronometer) findViewById(R.id.practicePageTimer);
    Timer.setOnChronometerTickListener(new OnChronometerTickListener(){

        @Override
        public void onChronometerTick(Chronometer arg0) {
            // TODO Auto-generated method stub
            if("00:30".equals(Timer.getText()))
            {
                Timer.setBackgroundResource(R.drawable.yellowtimer);
            }
            else if("01:00".equals(Timer.getText()))
            {
                Timer.setBackgroundResource(R.drawable.redtimer);
            }
        }

    }); 
```

它应该将“00:30”的背景更改为黄色，将“01:00”的背景更改为红色，但它在nexus 10上没有发挥作用。我已经在Xperia S上对其进行了测试，它工作正常。请帮帮我。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:14:14.990

也许 Nexus 10 的区域设置与您期望的不同，并且返回的值根本不匹配。“默认情况下，它将以“MM:SS”或“H:MM:SS”的形式显示当前定时器值，或者您可以使用 setFormat(String) 将定时器值格式化为任意字符串。”尝试设置使用 setFromat("MM:SS"); 格式化 也许有帮助。

# c - 无法在 Visual Studio 2012 中编译 C

> ID：15761347
> 
> 赞同：0
> 
> 时间：2013-04-02T10:05:35.303
> 
> 标签：c, visual-studio

我有一个较旧的 c 项目，它使用了许多变量名，导致它无法在 c++ 中编译`new`，`this`等等。

所以为了尝试看看我是否可以编译它，我已经这样做了：

1.  新的空 C++ 项目
2.  添加了一个新类，重命名了文件`.c`（下面的代码）
3.  清空头文件
4.  项目属性->C/C++->高级->编译为=编译为C代码(/TC)

测试.c：

```
#include "Test.h"

int test()
{
    int new = 123;
    return new;
} 
```

但它仍然抱怨`new`，所以它没有将它编译为纯 C。我错过了什么？

**编辑**

我知道`new`,`this`等是`c++`. 但是我试图将其编译为`c`并且我试图避免在大型项目中重命名。如果我告诉它编译为`c`，为什么它仍然强制执行这些保留名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:15:22.577

在这里查看答案：

[https://stackoverflow.com/a/5770919/1191089](https://stackoverflow.com/a/5770919/1191089)

有一些额外的标志可以禁用可能适用的 Microsoft 扩展。

我知道它不能回答问题，但您可能会发现更改变量名称的工作量更少，对名为“this”和“new”的变量进行搜索和替换只需 5 分钟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:07:27.020

`new`是用于分配内存的保留标识符，如

```
int* i = new int(123); 
```

你不能使用它。为您的变量切换到另一个名称，例如

```
#include "Test.h"

int test()
{
    int i = 123;
    return i;
} 
```

C++ 的保留字可以方便地分成几组。在第一组中，我们将那些也存在于 C 编程语言中并已被转移到 C++ 中的内容。其中有 32 个，它们是：

```
auto   const     double  float  int       short   struct   unsigned
break  continue  else    for    long      signed  switch   void
case   default   enum    goto   register  sizeof  typedef  volatile
char   do        extern  if     return    static  union    while 
```

还有另外 30 个保留字不在 C 中，因此对 C++ 来说是新的，它们是：

```
asm         dynamic_cast  namespace  reinterpret_cast  try
bool        explicit      new        static_cast       typeid
catch       false         operator   template          typename
class       friend        private    this              using
const_cast  inline        public     throw             virtual
delete      mutable       protected  true              wchar_t 
```

取自[这里](http://cs.smu.ca/~porter/csc/ref/cpp_keywords.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:14:51.433

您没有将 C 源代码编译为 C 代码，您需要将代码迁移到 C++，这涉及替换变量的名称，这些变量在 C++ 中用作关键字。

# django - Dajax：dajaxproject.com 中的简单表单有问题吗？

> ID：15761358
> 
> 赞同：0
> 
> 时间：2013-04-02T10:06:13.497
> 
> 标签：django, combobox, dajax

我正在尝试通过在第一个组合框中选择选项来测试一个在第二个组合框中显示选项的简单表单。所以我尝试使用 dajax，我首先测试了 http://www.dajaxproject.com/forms/ 中存在的一个非常简单的[表单](http://www.dajaxproject.com/forms/)不起作用（第二个组合不显示任何内容）。我认为这是因为我的 html 文件中没有包含 dajax。有什么建议么？

# java - FileNotFoundException

> ID：15761369
> 
> 赞同：-1
> 
> 时间：2013-04-02T10:06:53.037
> 
> 标签：java, inputstream, filenotfoundexception, fileinputstream

大家好，我是 Java 新手，我的要求之一是创建一个程序，使用户能够添加编辑删除视图记录，例如保存在记事本，添加后，程序将计算税收和 sss 贡献等，这些也将保存到不同的 txt 文件中，也可以查看和编辑。我的问题是我无法在 txtfile 上编写计算并得到“FileNotFoundException”。这是我在 txt 文件中读写的代码

```
public static void payrollReadFromFile(String filename) {

        // initializes br identifer as BufferedReader.
        BufferedReader br = null;

        payrolls.clear(); // removes all elements in arraylist employees

        try {
            // instantiate br as FileReader with filename param
            br = new BufferedReader(new FileReader(filename)); 
            try {

                 String name;               
                double   gincome, nincome, deduc, sss, pagibig, phil = 0; // initialize identifiers

                // reads each line through br identifier, and stores it on
                // temporary identifiers
                // loop continues until null is encountered
            while ((name = br.readLine()) != null) {

                    gincome = Double.parseDouble(br.readLine());
                    sss = Double.parseDouble(br.readLine());
                    pagibig = Double.parseDouble(br.readLine());
                    phil = Double.parseDouble(br.readLine());
                    deduc = Double.parseDouble(br.readLine());
                    nincome = Double.parseDouble(br.readLine());                    

                    // adds the data to employees arraylist
                    payrolls.add(new Person( name, gincome, sss, pagibig, phil,deduc, nincome));
                }
            } finally {
                br.close(); // closes BufferedReader
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    // method which writes data into parameter 'filename'
    // uses PrintWriter and FileWriter
    public static boolean payrollWriteToFile(String filename) {
        boolean saved = false;
        PrintWriter pw = null; // pw is a PrintWriter identifier

        try {
            // instantiate pw as PrintWriter, FileWriter
            pw = new PrintWriter(new FileWriter(filename)); 

            try {

                // for each loop. each data from employees is written to parameter
                // filename
                for (Person payroll : payrolls) {
                                       // pw.println(employee.getId());
                    pw.println(payroll.getName());
                    pw.println(payroll.getGincome());
                    pw.println(payroll.getSss());
                    pw.println(payroll.getPagibig());
                    pw.println(payroll.getPhil());
                    pw.println(payroll.getDeduc());
                    pw.println(payroll.getNincome());

                }
                saved = true;
            } finally {
                pw.close();
            }
        } catch (IOException e) {

            e.printStackTrace();
        }
        return saved;
    } 
```

有人能帮我吗？我不知道该怎么办。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:12:31.203

异常的好处是堆栈跟踪（这可能是您在控制台输出中看到的）准确地告诉您哪一行代码引发了异常。很可能是这一行：

```
br = new BufferedReader(new FileReader(filename)); 
```

查看将文件传递给您的`payrollReadFromFile`方法的代码。您传递的文件不是您认为的位置。传递 File 对象而不是 String 可能更有意义，因为 File 对象不仅包含文件名，还包含该文件的完整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:25:35.630

这个问答的关键在于代码的层次，和问题的层次有很大的不同。在我看来，这段代码是由具有相当多的 Java 知识的人编写的，但提出问题的人（他们自己承认）是新手。所以选择有两个：

1) 雇用我们中的一个为您修理它。你可以雇我，但我很贵，还有其他人会以便宜的价格来做。

2）学习Java，如果你是上课的学生，那么你应该学习这个。分解它慢慢来。

这是一个调试提示：

System.out.println(文件名);

这样您就可以看到您要查找的文件名是什么。

解决您的问题不是 stackoverflow 贡献者的责任。我们在这里帮助您学习。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T10:09:29.290

您可以抛出异常，如下所示：

```
public static void payrollReadFromFile(String filename) throws FileNotFoundException { 
```

另外我建议您查看 try and catch 方法。

# javascript - 选择资产sailsjs

> ID：15761377
> 
> 赞同：3
> 
> 时间：2013-04-02T10:07:11.003
> 
> 标签：javascript, express, sails.js

我已经开始将 SailsJS 用于一个小型 Web 应用程序，到目前为止它很棒。但是我在资产和布局上苦苦挣扎。

基本上我希望能够根据页面使用不同类型的资产（css文件组）。为此，我编写了 2 个不同的布局，每个布局都应包含正确的 css 文件。但是，当我在文件中添加这些文件时，`config/assets.js`它们都捆绑在一起。有没有办法在我的布局中指定我想使用哪些资产？我知道您可以指定`assets.js`，`assets.styles`但我希望能够创建自己的组。

我还尝试将这些资产放在不同的目录中（例如公共目录）并在我的布局中手动加载它们。它仍然无法正常工作，因为服务器不想“服务”它们。

任何的想法 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T04:52:23.337

很高兴你喜欢 Sails :)

目前，您可以 (a) 始终引入所有样式并仅应用相关样式 (b) 使用其他工具（如 Grunt）像在 vanilla node.js 项目中一样捆绑资产或 (c) 链接手动样式表（将它们放在您的公用文件夹中）。

至于路线图——社区正在研究更多用于提供模板/样式/客户端逻辑的选项。这里有一个开放的规范：

[https://github.com/balderdashy/sails/issues/240](https://github.com/balderdashy/sails/issues/240)

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-18T12:43:49.350

我知道这是旧的，但以防其他人遇到这个；在最近版本的sails 中，资产管道默认是围绕grunt 构建的（我在0.10.x 之前没有使用过sails）。

您可以添加自己的导出`tasks/pipeline.js`并将它们链接到`tasks/config/sails-linker.js`. 例如，您可以有一个`views/public`文件夹并告诉sails-linker 在`publicCSS`那里注入变量。然后调整你的`layout.ejs`，以便它从任何文件夹中导入样式/javascript。

# android - 从对象 URL 播放声音

> ID：15761387
> 
> 赞同：2
> 
> 时间：2013-04-02T10:07:48.327
> 
> 标签：android, google-chrome, xmlhttprequest, html5-audio

我使用 XMLHttpRequest 为游戏预加载文件。如果不支持 WebAudio，我会退回到使用音频元素。

在 Android 上，它在 Firefox 中运行良好，但在 chrome 中无法播放声音。下面是一些测试代码：

```
document.addEventListener('touchstart', function(event) {
    event.preventDefault();
    if( window.audio ) window.audio.play();
    console.log( window.audio );
});

window.audio    = null;

var xhr = new XMLHttpRequest();
xhr.open('GET', '/sounds/shotgun.webm', true);
xhr.responseType = 'arraybuffer';

xhr.onreadystatechange = function() {
    if (xhr.readyState === 4) {
        var blob = new Blob( new Array( new Int8Array( xhr.response ) ), { type: 'audio/webm' } );
        var url = window.URL.createObjectURL( blob )
        window.audio = new Audio();
        window.audio.src = url;

        console.log( 'sound loaded' );
    }
    };

xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xhr.send(); 
```

我怀疑这是对象 url 的 Chrome for android 问题...

无论如何，我正在寻找一种使用来自 XMLHttpRequest 的缓存数据在 Chrome for Android 上播放声音的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T04:14:39.967

这实际上似乎是一个错误。我在这里提出了它[https://code.google.com/p/chromium/issues/detail?id=227476](https://code.google.com/p/chromium/issues/detail?id=227476)并为它创建了一个测试用例。当我从假期回来时，如果尚未对其进行分类，我会将其分配给正确的团队。如果我发现任何其他解决方法，我也会更新这个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:35:05.173

我手边没有安卓手机，但我知道过去你需要`window.webkitURL`使用`window.URL`. 也许尝试：

`( window.URL || window.webkitURL ).createObjectURL( blob )`

# jar - 使用 GREP 在 jar 中搜索 xml 文件

> ID：15761389
> 
> 赞同：0
> 
> 时间：2013-04-02T10:07:55.797
> 
> 标签：jar, grep, ubuntu-12.04

我想在我的主目录中搜索 abc.xml 文件的数量。那些 xml 文件在罐子里。我正在使用 ubuntu 12.04 LTS。如何使用 GREP 搜索 jar 中的那些 xml 文件。我想知道该目录中的 xml 文件总数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:32:19.860

据我所知，您想知道 .jar 文件中包含的 XML 文件的数量。如果这是正确的，那么以下将达到预期：

```
jar tvf <jarfile> | grep "\.xml$" | wc -l 
```

假设您要在当前目录（和子目录）中的所有 jar 文件中进行搜索，以下应该可以解决问题：

```
total=0;
for i in `find . -type f -name "*.jar"`; do
  count=$(jar tvf $i | grep "abc.xml" | wc -l);
  let total+=count;
done
echo ${total} 
```

为了简单地列出匹配的 jar 文件：

```
for i in `find . -type f -name "*.jar"`; do
  jar tvf $i | grep "abc.xml";
  if [ $? -eq 0 ]; then echo $i; fi;
done 
```

# php - PHP组织相同值的行

> ID：15761392
> 
> 赞同：0
> 
> 时间：2013-04-02T10:08:05.050
> 
> 标签：php, mysql

我正在从 sql server 检索数据，然后以有组织的方式呈现它们。
我有一个这样的对象数组：

```
Array
(
[0] => stdClass Object
    (
        [post_id] => 1
        [controller] => Cato
        [controller_method] => edit
        [http_method] => post
    )

[1] => stdClass Object
    (
        [post_id] => 1
        [controller] => Cato
        [controller_method] => edit
        [http_method] => get
    )

[2] => stdClass Object
    (
        [post_id] => 1
        [controller] => Cato
        [controller_method] => create
        [http_method] => post
    )

[3] => stdClass Object
    (
        [post_id] => 1
        [controller] => Cato
        [controller_method] => create
        [http_method] => get
    )
) 
```

不知何故，我需要转换成这样的东西：

```
Array(
    [0] => Array(
        [controller] => controller1,
        [controller_methods] => Array (
            [0] => Array (
                [controller_method] => create,
                [http_methods] => Array (
                    [0] => get,
                    [1] => post
                )
            ),
            [0] => Array (
                [controller_method] => edit,
                [http_methods] => Array (
                    [0] => get,
                    [1] => post
                )
            )
        )
    ),
    [0] => Array(
        [controller] => controller2,
        [controller_methods] => Array (
            [0] => Array (
                [controller_method] => create,
                [http_methods] => Array (
                    [0] => get,
                    [1] => post
                )
            ),
            [0] => Array (
                [controller_method] => edit,
                [http_methods] => Array (
                    [0] => get,
                    [1] => post
                )
            )
        )
    )
) 
```

在使用 sql db 使用 php 时，我总是遇到这样的事情。
有什么方便的方法可以做到这一点吗？

# .net - 具有相似电影的电影数据库 API

> ID：15761396
> 
> 赞同：-1
> 
> 时间：2013-04-02T10:08:15.087
> 
> 标签：.net, api, imdb

需要 api 来获得像 imdb 一样的电影推荐。themoviedb 在搜索类似电影时没有提供相应的 IMDB id（顺便说一下，他们的类似电影列表真的很奇怪）。烂番茄 API 每天只有 10000 个请求，[http://www.omdbapi.com/](http://www.omdbapi.com/)没有提供类似的电影。所以我被困在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:22:24.880

你试过烂番茄 API 吗？

# html - 使用“HTTP 标头“Content-Type: application/x-web-app-manifest+json”为 Web 应用程序清单提供服务到底是什么意思？

> ID：15761399
> 
> 赞同：0
> 
> 时间：2013-04-02T10:08:21.903
> 
> 标签：html

我是网络应用程序开发的菜鸟，我对在哪里声明所说的“内容类型”感到困惑。它应该在清单上还是应该在应用程序源代码上？我正在使用保管箱公用文件夹作为我的服务器，我也不确定这是否有问题。

我创建了 2 个文件：我的应用程序和清单的 html 源代码。

我的清单的顶部是这样的：

> {
> 
> "name":"我的应用名称",
> 
> “描述”：“我的应用程序描述”，
> 
> “launch_path”：“ [http://dl.dropbox.com/x/xxxxx/xxxxxx.html](http://dl.dropbox.com/x/xxxxx/xxxxxx.html) ”
> 
> “图标”：{
> 
> “128”：“ [http://dl.dropbox.com/x/xxxxxxxx/xxxxxxx_128px.png](http://dl.dropbox.com/x/xxxxxxxx/xxxxxxx_128px.png) ”
> 
> }

它被保存为“myManifest.webapp”。

而且，我的源代码顶部是这样的：

```
<!DOCTYPE HTML>
<html  lang="en">  
   <head>

    <meta http-equiv="Content-Type" content="application/x-web-app-manifest+json; charset=UTF-8">
    <title>My App Name</title>
</head> 
```

我试图通过 Firefox Marketplace 验证我的清单，但我一直失败，出现 3 个错误：

-JSON 解析错误；

- 清单必须使用 HTTP 标头“Content-Type: application/x-web-app-manifest+json”。

- 清单的编码与 HTTP Content-Type 中提供的字符集不匹配。

任何帮助我度过难关将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:19:05.827

它在谈论[*HTTP`Content-Type`标头*](http://en.wikipedia.org/wiki/HTTP_headers)。*这是在实际文件数据之前*作为 HTTP 协议的一部分发送的标头。它不是文件本身的任何内容，它是由通过 HTTP 协议提供文件的 Web 服务器设置的设置。

这个标头明确地告诉浏览器它正在处理什么样的文件，因为 URL 不一定与从它提供的文件有任何关系。

我不知道您在使用 Dropbox 时是否对此标头有任何影响。

# c++ - 在 C++ 中将原始指针更改为 smart

> ID：15761402
> 
> 赞同：0
> 
> 时间：2013-04-02T10:08:26.437
> 
> 标签：c++, pointers, smart-pointers

有一个简单的函数创建一个存储在数组中的零填充矩阵。

```
void zeroMatrix(const int rows, const int columns, void* M)
{
   for(int i = 0; i < rows; i++)
       for(int j = 0; j < columns; j++)
          *(((double *)M) + (rows * i) + j) = 0;

} 
```

如何更改代码以`std::unique_ptr<double>`用作 M？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:55:12.480

由于该`zeroMatrix`函数没有所有权转移，因此您需要一个*参考*：

（假设 M 是一个向量）

```
void zeroMatrix(const int rows, const int columns, std::vector<double> &M)
{
   for(int i = 0; i < rows; i++)
       for(int j = 0; j < columns; j++)
          M[(rows * i) + j] = 0;

} 
```

# php - 在会话变量中保存回显语句

> ID：15761405
> 
> 赞同：-1
> 
> 时间：2013-04-02T10:08:33.820
> 
> 标签：php, echo, session-variables

好的，所以我可以很好地回应这个。（它将从数据库中的帖子中回显名称）

```
<?php echo $rows['name']; ?> 
```

我的问题是，我如何将此名称保存在会话变量中。

我试过这个：

```
<?php $rows['name'] = $_SESSION['name']; ?> 
```

但它不起作用:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:10:17.513

您以相反的方式分配它，您分配`$_SESSION['name']`给`$rows['name']`

```
$_SESSION['name'] = $rows['name']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:10:17.767

对会话变量的赋值则相反：

```
$_SESSION['name'] = $rows['name']; 
```

在稍后阶段，您可以再次获取该值：

```
echo $_SESSION['name']; 
```

还要确保您`session_start()`在访问会话的脚本的顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:11:11.567

反过来：）

```
<?php $_SESSION['name'] = $rows['name']; ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T10:11:26.260

反之亦然

```
$_SESSION['name'] = $rows['name']; 
```

# c# - 将密钥转换为 VirtualKeyCode

> ID：15761412
> 
> 赞同：4
> 
> 时间：2013-04-02T10:08:58.813
> 
> 标签：c#, wpf, .net-4.5, keyboard-events

在我的 C#/WPF/.NET 4.5 应用程序中，我试图通过 KeyEventHandler 捕获按键，然后使用出色的[Windows 输入模拟器](http://inputsimulator.codeplex.com/)来模拟该按键（将手势、语音等命令映射到键盘）。

麻烦的是，我从's中得到了一个`Key`枚举成员，但后来我需要传递一个to 。`KeyEventHandler``RoutedEventArgs``VirtualKeyCode``SimulateKeyPress()`

我如何从`Key`到`VirtualKeyCode`？

```
// Trigger reader
private void Editor_CommandButton_Click(object sender, RoutedEventArgs e) {
  PressKeyModal.Visibility = System.Windows.Visibility.Visible;
  AddHandler(Keyboard.KeyDownEvent, (KeyEventHandler)Editor_HandleKeyDownEvent);
}
// Read key press from keyboard
private void Editor_HandleKeyDownEvent(object sender, KeyEventArgs e) {
  // Here is the culprit
  VirtualKeyCode CodeOfKeyToEmulate = ConvertSomehow(e.Key);
  // /culprit
  PressKeyModal.Visibility = System.Windows.Visibility.Hidden;
  RemoveHandler(Keyboard.KeyDownEvent, (KeyEventHandler)Editor_HandleKeyDownEvent);
}

// Later, emulate the key press
private void EmulateKeyPress(VirtualKeyCode codeOfKeyToEmulate( {
  InputSimulator.SimulateKeyPress(codeOfKeyToEmulate);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T10:35:30.327

看来[KeyInterop.VirtualKeyFromKey](http://msdn.microsoft.com/en-us/library/system.windows.input.keyinterop.virtualkeyfromkey.aspx)方法是我正在寻找的。上面代码中麻烦的部分因此变成：

```
// Read key press from keyboard
private void Editor_HandleKeyDownEvent(object sender, KeyEventArgs e) {
  // The rehabilitated culprit
  VirtualKeyCode CodeOfKeyToEmulate = (VirtualKeyCode)KeyInterop.VirtualKeyFromKey(e.Key);
  // /rehabilitated culprit
  PressKeyModal.Visibility = System.Windows.Visibility.Hidden;
  RemoveHandler(Keyboard.KeyDownEvent, (KeyEventHandler)Editor_HandleKeyDownEvent);
} 
```

值得注意的是，该`KeyInterop.VirtualKeyFromKey`方法返回的不是 a`VirtualKeyCode`而是`int32`必须转换为 a的 an `VirtualKeyCode`。

# php - php 在 if else 语句中发布数据

> ID：15761413
> 
> 赞同：1
> 
> 时间：2013-04-02T10:09:00.607
> 
> 标签：php, jquery

我有一个注册表单，有 3 页。我使用 jquery $post 发布错误消息而不刷新第二个 php 页面将检查所有数据。如果所有数据都正确，它将发送到第三页（协议页）。如果用户在第三页点击同意，则所有数据都将写入数据库。

但是我有问题通过使用 if & else 将数据发布到 php 中的第三页

这是一个注册表单。因此我不能使用 $_GET[]

```
ex. else{header("location:agreement.php?email=somedata&pw=somedata");} 
```

有什么方法可以将这些数据传递到 php 中的第三页？

第 1 页

```
 <form>
    <input type="text" name="email"/>
    (some input)...

    <input type="button" onclick="get();"/>
    </form>

JQUERY
function get(){
    $('#error').hide();
    $.post('signup.php',{firstname:signup.firstname.value,...},
    function(output){$('#error').html(output).fadeIn(50);})
    } 
```

第二页

```
signup.php
    if(will check everything){echo "error";}
      //Jquery will output error without refresh the page
    else{
        [Need to POST all sign up data from 1st page to 3rd page]
        header("to agreement.php");
    } 
```

第三页

```
agreement.php
if user tick agree. All sign up data will insert into database. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:13:51.147

为什么不将数据存储在会话中？然后，您可以轻松地在第 3 页上检索它，而无需将其传递给客户端，然后再传递给服务器并再次返回给客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:18:16.830

当您添加数据然后在第一个表单上将数据添加到表中并在会话和所有其他表单页面上使用 record_id 时，只需更新该数据库记录

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T10:23:35.003

将其存储在会话中，或者如果您显示页面将其存储在其中，您也可以使用 CURL，但它是“硬”的方式。使用 curl 您可以将 POST 与您想要的所有变量一起发送到另一个页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T10:28:39.037

发送`email`到 3rd php的示例

```
function get(){
var email = $('#email').val();
    $('#error').hide();
    $.post('signup.php',{firstname:signup.firstname.value,email:email,...},
    function(output){$('#error').html(output).fadeIn(50);})
    }

signup.php
$email = $_GET['email'];
    if(will check everything){echo "error";}
      //Jquery will output error without refresh the page
    else{
        [Need to POST all sign up data from 1st page to 3rd page]
        header("to agreement.php?".$email);

agreement.php
$email = $_POST['email'];
if user tick agree. All sign up data will insert into database.
    } 
```

# maven - Jetty 插件仅 maven 依赖

> ID：15761414
> 
> 赞同：0
> 
> 时间：2013-04-02T10:09:02.900
> 
> 标签：maven, jetty

我正在使用 JDK 7 + Eclipse Juno + Maven 3 开发 CXF Web 服务并部署在 WebSphere 7 Application Server 上。

我花了几个小时来找到 WAS 接受而没有冲突的依赖项的正确配置（运行时、系统、编译和提供的范围的复杂组合），但是使用此配置，我的 jetty 插件不再工作。

如何指定仅针对 Jetty 插件的类路径（希望是 maven 配置）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:11:40.950

AFAIK，使 jetty 插件在所有这些依赖问题上正常工作的唯一方法是`<provided>`将 webapp 中的所有依赖项指定为 jetty 插件的直接依赖项（不幸的是，这带来了一种冗余）：

```
<plugin>
    <groupId>org.eclipse.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>9.0.0.v20130308</version>
    ...
   <dependencies>
     <!-- put here all your dependencies with scope provided in your webapp -->
     <dependency>
       <groupId>javax.servlet</groupId>
       <artifactId>servlet-api</artifactId>
       <version>3.0</version>
     </dependency>
     ...
   </dependencies>
</plugin> 
```

# asp.net-mvc - 在 asp.net mvc 控制器中使用构造函数注入的 IoC 会浪费资源吗？

> ID：15761417
> 
> 赞同：8
> 
> 时间：2013-04-02T10:09:07.560
> 
> 标签：asp.net-mvc, dependency-injection, service-locator

我不确定是不是只有我一个人，但我感觉 ASP.NET MVC 控制器中使用的构造函数注入会导致不必要的资源消耗。

在创建控制器时，仍然需要创建未用于**特定 Web 请求的组件。***这就像在我渴了牛奶的时候买了摊位牛奶和果汁，然后我就把果汁扔掉了。*

比较控制器的构造函数注入和服务定位器的这些示例，以澄清我的担忧。

## 构造函数注入，创建了展位deps，但只使用了一个。

```
public class MyController : Controller
{
    private readonly IDep1 _dep1;
    private readonly IDep2 _dep2;

    public MyController(IDep1 dep1, IDep2 dep2)
    {
        _dep1 = dep1;
        _dep2 = dep2;
    }

    public ActionResult Index()
    {
        _dep1.MakeStuff();
        return View();
    }
    public ActionResult PageTwo()
    {
        _dep2.MakeStuff();
        return View();
    }
} 
```

## 服务定位器，每个 dep 仅在使用时创建。

```
public class MyController : Controller
{
    public ActionResult Index()
    {
        var dep1 = ServiceLocator.Resolve<IDep1>();
        dep1.MakeStuff();
        return View();
    }
    public ActionResult PageTwo()
    {
        var dep2 = ServiceLocator.Resolve<IDep2>();
        dep2.MakeStuff();
        return View();
    }
} 
```

*请注意*，IoC 容器（由于许多原因是有益的）仍然可以用于服务定位器模式。我不希望这是围绕 IoC 和容器框架的讨论，也没有构造函数注入的其他好处（依赖关系的清晰可见性等）。我关心的是**构造函数注入模式以及它在 ASP.NET MVC 控制器情况下如何浪费资源。**

我想这里的主要问题是： **对于上述场景（ASP.NET MVC 控制器），Service Locator 是更好的解决方案性能吗？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T10:25:46.217

如果对象创建是您的瓶颈，那么您要么处于非常好的情况（其他一切都像魅力一样工作，因此 < 1 ms 操作计数），要么处于非常糟糕的情况（您的构造函数正在做一些繁重的工作 - 他们不应该这样做至）。

Mark Seemann 已经在这里介绍了这个主题：http: [//blog.ploeh.dk/2011/03/04/Composeobjectgraphswithconfidence/](http://blog.ploeh.dk/2011/03/04/Composeobjectgraphswithconfidence/)

> 在许多情况下，这是您必须承受的性能损失，因为无论如何您都需要这些类，但有时您可能会担心过早地承受这种性能损失。然而，我声称在绝大多数情况下，这种担忧是无关紧要的。

并提供了一个可能的解决方案，如果它对你仍然很重要（延期分支）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-24T11:36:27.500

如果你不想构造你不需要的东西/使用传递可以构造你需要的东西的东西。

在我们的控制器工厂中使用服务定位器 + DI，我们可以将一个 dep 工厂传递给控制器​​，并允许控制器决定向工厂询问什么。

这不是我们有工厂模式的原因吗？

因此，要在问题中重构您的示例，您可能想做这样的事情......

```
public class MyController : Controller
{
    private readonly IDepFactory _factory;

    public MyController(IDepFactory factory)
    {
        _factory= factory;
    }

    public ActionResult Index()
    {
        var dep1 = factory.Get<IDep1>();
        dep1.MakeStuff();
        return View();
    }
    public ActionResult PageTwo()
    {
        var dep2 = factory.Get<IDep2>();
        dep2.MakeStuff();
        return View();
    }
} 
```

这既有效又很好地利用了模式。

从测试的角度来看，您可以模拟传入的 IDepFactory，以便它始终返回一些常量，当查询返回已知结果时，您可以确认控制器中的逻辑行为正确。

从性能的角度来看，我认为差异主要取决于每种情况下依赖堆栈的深度，如果依赖堆栈非常浅，您可能更喜欢不使用工厂并像以前一样传入两个 deps因为收益几乎没有。

# objective-c - 使用多个窗口

> ID：15761424
> 
> 赞同：1
> 
> 时间：2013-04-02T10:09:20.630
> 
> 标签：objective-c, xcode, macos, cocoa

在我的 MainMenu.xib 中，我的应用程序的主窗口带有 Web 视图，现在我在 MainMenu.xib 中添加了一个新窗口（带有文本字段和按钮）。

我在添加一个菜单选项卡时遇到问题，我单击并出现我新添加的窗口（不在应用程序启动时）。如何将菜单选项卡项与窗口连接..???

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:22:49.680

你想在没有一行代码的情况下做到这一点吗？

即**使用绑定**。

开始了：

创建要在菜单单击时打开的辅助窗口。

取消选中“关闭时释放”

![在此处输入图像描述](https://i.stack.imgur.com/hmfUj.png)

创建一个新菜单项：`ctrl`+从菜单拖动到窗口，选择“makeKeyAndOrderFront”

就是这样。

![在此处输入图像描述](https://i.stack.imgur.com/PsMPo.png)

# android - 图像缩放方法

> ID：15761427
> 
> 赞同：0
> 
> 时间：2013-04-02T10:09:34.527
> 
> 标签：android

我想在屏幕上以 2 x 2 网格格式显示 4 张图像。图片来自谷歌图片搜索，图片大小为 200 X 200

这是我扩展它们的方法。具有 4 个嵌套的 RelativeLayout 的 RelativeLayout，每个布局中都有 imageView。这就是我如何获得屏幕宽度来缩放图像。将内部布局参数的高度和宽度设置为 screenWidth/2，然后缩放图像。

这就是我为获取特定屏幕的图像高度和宽度所做的工作。例如，如果屏幕宽度为 550，那么我的图像尺寸将为 275 x 275。

```
public static int getOptionWidth(Context context) {
    DisplayMetrics metrics = context.getResources().getDisplayMetrics();
    return metrics.widthPixels;
}

optionWidth = (getOptionWidth(context) / 2) 
```

这是用于未缩放的位图

```
public static Bitmap resourceDecoder(byte[] imgBytes, int destWidth, int destHeight) {
    Options options = new Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeByteArray(imgBytes, 0, imgBytes.length, options);
    options.inJustDecodeBounds = false;

    float srcAspect = (float) srcWidth / (float) srcHeight;
    float dstAspect = (float) dstWidth / (float) dstHeight;

        if (srcAspect > dstAspect) {
            options.inSampleSize = srcHeight / dstHeight;
        } else {
            options.inSampleSize = srcWidth / dstWidth;
        }
    Bitmap unscaledBitmap = BitmapFactory.decodeByteArray(imgBytes, 0, imgBytes.length, options);

    return unscaledBitmap;
} 
```

这将是我的目标宽度和高度，因为我需要方形图像。我已经实现了获取源矩形（getSrcRect）和获取目标矩形（getDstRect）的基本方法

```
Rect srcRect = getSrcRect(unscaledBitmap.getWidth(), unscaledBitmap.getHeight(), dstWidth, dstHeight);
Rect dstRect = getDstRect(unscaledBitmap.getWidth(), unscaledBitmap.getHeight(), dstWidth, dstHeight);
Bitmap scaledBitmap = Bitmap.createBitmap(dstRect.width(), dstRect.height(), Config.ARGB_8888);
Canvas canvas = new Canvas(scaledBitmap);
canvas.drawBitmap(unscaledBitmap, srcRect, dstRect, new Paint(Paint.FILTER_BITMAP_FLAG));

return scaledBitmap; 
```

这工作正常，结果如预期（在 hdpi、xhdpi 和 mdpi 上测试）。但现在我很困惑，因为我没有使用 dxtopx 或 pxTodX 转换。我错过了什么吗？虽然结果符合预期，但我并不担心这种方法。我不知道我应该使用 pxToDx 还是反之亦然。如果我这样做，它将如何影响我的结果以及我应该如何使用这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:07:57.193

您不必为此使用 PX 到 DP 转换，因为您已经使用 getOptionWidth(context) 设置了相对于屏幕宽度的所有大小变量。

# android - BaseAdapter 中的图像没有好的位置

> ID：15761428
> 
> 赞同：0
> 
> 时间：2013-04-02T10:09:39.250
> 
> 标签：android, image, baseadapter

我有一个带有 5 个部分的 PullToRefresh ListView（每个部分是列表的一个项目），每个部分都有许多照片。我有一个 BaseAdapter 类，它用部分照片填充 5 个部分。问题是当我第一次加载列表视图时，照片显示不正确，但是当我滚动时，照片出现在正确的位置。我使用 BitmapFun 代码来加载照片。

我有：

```
private ArrayList<Pair<Integer, ArrayList<String>>> section_photos_url; 
```

第一个值是部分，第二个值是每个部分的照片数组。

getView 方法：

```
public View getView(int position, View convertView, ViewGroup container) {

    if (position < 5) {

        ItemViewHolder viewHolder;

        // Si la vista de dicha posicion ha sido inflada
        if (view_array[position] == null) { 

            // Inflate the view
            LayoutInflater li = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            switch (section_photos_url.get(position).first) {
            case ConstantsTypeSection.SECTION1:
                view_array[position] = li.inflate(R.layout.timeline_section_today_trending, container, false);
                break;
            case ConstantsTypeSection.SECTION2:
                view_array[position] = li.inflate(R.layout.timeline_section_trendy_smiler, container, false);
                break;
            case ConstantsTypeSection.SECTION3:
                view_array[position] = li.inflate(R.layout.timeline_section_around_me, container, false);
                break;
            case ConstantsTypeSection.SECTION4:
                view_array[position] = li.inflate(R.layout.timeline_section_trending_hashtag, container, false);
                break;
            case ConstantsTypeSection.SECTION5:
                view_array[position] = li.inflate(R.layout.timeline_section_last_content, container, false);
                break;
            }

            viewHolder = new ItemViewHolder();

            viewHolder.sectionName = (TextView) view_array[position].findViewById(R.id.section_name);
            viewHolder.userName = (TextView) view_array[position].findViewById(R.id.user_name);
            viewHolder.hashTag = (TextView) view_array[position].findViewById(R.id.hash_tag_name);

            viewHolder.userImage = (ImageView) view_array[position].findViewById(R.id.user_photo);

            viewHolder.item1 = (RecyclingImageView) view_array[position].findViewById(R.id.item_1);
            viewHolder.item2 = (RecyclingImageView) view_array[position].findViewById(R.id.item_2);
            viewHolder.item3 = (RecyclingImageView) view_array[position].findViewById(R.id.item_3);
            viewHolder.item4 = (RecyclingImageView) view_array[position].findViewById(R.id.item_4);
            viewHolder.item5 = (RecyclingImageView) view_array[position].findViewById(R.id.item_5);
            viewHolder.item6 = (RecyclingImageView) view_array[position].findViewById(R.id.item_6);
            viewHolder.item7 = (RecyclingImageView) view_array[position].findViewById(R.id.item_7);
            viewHolder.photos_layout = (LinearLayout) view_array[position].findViewById(R.id.photo_section);

            view_array[position].setTag(viewHolder);
        } else {
            viewHolder =  (ItemViewHolder) view_array[position].getTag();
        }

        switch (section_photos_url.get(position).first) {
        case ConstantsTypeSection.SECTION1:
                 viewHolder.sectionName.setText(context.getResources().getString(R.string.today_trending_section));

          LinearLayout.LayoutParams lp = new  LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT,    LinearLayout.LayoutParams.WRAP_CONTENT);
        viewHolder.photos_layout.addView(getPhotoView(section_photos_url.get(0).second), lp);

            break;
        case ConstantsTypeSection.SECTION2:
            viewHolder.sectionName.setText(context.getResources().getString(R.string.trendy_smiler_section));

                          LinearLayout.LayoutParams lp = new  LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT,    LinearLayout.LayoutParams.WRAP_CONTENT);
        viewHolder.photos_layout.addView(getPhotoView(section_photos_url.get(1).second), lp);

            break;
        case ConstantsTypeSection.SECTION3:
            viewHolder.sectionName.setText(context.getResources().getString(R.string.around_me_section));

                          LinearLayout.LayoutParams lp = new  LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT,    LinearLayout.LayoutParams.WRAP_CONTENT);
        viewHolder.photos_layout.addView(getPhotoView(section_photos_url.get(2).second), lp);
            break;
        case ConstantsTypeSection.SECTION4:
            viewHolder.sectionName.setText(context.getResources().getString(R.string.trending_hashtag_section));

                          LinearLayout.LayoutParams lp = new  LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT,    LinearLayout.LayoutParams.WRAP_CONTENT);
        viewHolder.photos_layout.addView(getPhotoView(section_photos_url.get(3).second), lp);
            break;
        case ConstantsTypeSection.SECTION5:
            viewHolder.sectionName.setText(context.getResources().getString(R.string.last_content_section));

                          LinearLayout.LayoutParams lp = new  LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT,    LinearLayout.LayoutParams.WRAP_CONTENT);
        viewHolder.photos_layout.addView(getPhotoView(section_photos_url.get(0).second), lp);
            break;
        }

        return view_array[position];

    } else {
        return null;
    }
}

private class ItemViewHolder {
    TextView sectionName;
    TextView userName;
    TextView hashTag;
    ImageView userImage;

    RecyclingImageView item1;
    RecyclingImageView item2;
    RecyclingImageView item3;
    RecyclingImageView item4;
    RecyclingImageView item5;
    RecyclingImageView item6;
    RecyclingImageView item7;

    LinearLayout photos_layout;

}

  private View getPhotoView(ArrayList<String> photos) {

    View view = null;

    LayoutInflater li = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    switch (photos.size()) {
    case 1:
        break;
    case 3:
        view = li.inflate(R.layout.timeline_item_three, null, false);
        break;
    case 5:
        if (Math.random() * 2 < 1) {
            view = li.inflate(R.layout.timeline_item_three_two, null, false);
        } else {
            view = li.inflate(R.layout.timeline_item_two_three, null, false);
        }
        break;
    case 7:
    default:
        view = li.inflate(R.layout.timeline_item_seven, null, false);
        break;
    }

    RecyclingImageView image = null;
    for (int i = 0; i < photos.size(); i++) {
        switch (i) {
        case 0:
              image =  (RecyclingImageView) view.findViewById(R.id.item_1);
            break;
        case 1:
            image =  (RecyclingImageView) view.findViewById(R.id.item_2);
            break;
        case 2:
            image =  (RecyclingImageView) view.findViewById(R.id.item_3);
            break;
        case 3:
            image =  (RecyclingImageView) view.findViewById(R.id.item_4);
            break;
        case 4:
            image =  (RecyclingImageView) view.findViewById(R.id.item_5);
            break;
        case 5:
            image =  (RecyclingImageView) view.findViewById(R.id.item_6);
            break;
        case 6:
            image =  (RecyclingImageView) view.findViewById(R.id.item_7);
            break;
        }

        CacheLoaderImagesSingleton.getInstance().getImageFetcher().loadImage(photos.get(i), image);
    }

    return view;
} 
```

有什么建议可以正确显示图像吗？那些是图像。第一个是错误的图像，因为所有照片都必须是紫色的花朵照片，并且不要发黄。第二个是正确的。图像是部分的一部分

![在此处输入图像描述](https://i.stack.imgur.com/Fv1uR.png) ![在此处输入图像描述](https://i.stack.imgur.com/gXAoX.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:45:02.190

首先，如果您使用 view_array 将视图存储在列表中的位置，那么它是什么。然后就错了。实现该列表以重用视图。

其次，为了让列表视图具有不同的布局，您可以使用 getItemViewType() 和 getViewTypeCount()。

请参见下面的示例，

```
public class Adapter extends BaseAdapter {

    private static final int SECTION1 = 0;
    private static final int SECTION2 = 1;
    private static final int SECTION3 = 2;
    private static final int SECTION4 = 3;
    private static final int SECTION5 = 4;

    ...

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View view;

        int type = getItemViewType(position);

        if (convertView == null)
        {
            switch (type) {
            case SECTION1:
                view = inflater.inflate(layout_id1, parent, false);
                break;
            case SECTION2:
                view = inflater.inflate(layout_id2, parent, false);
                break;
            case SECTION3:
                view = inflater.inflate(layout_id3, parent, false);
                break;
            case SECTION4:
                view = inflater.inflate(layout_id4, parent, false);
                break;
            case SECTION5:
                view = inflater.inflate(layout_id5, parent, false);
                break;
            }
        }
        else
        {
            // Based on value of getItemViewType the ListView will pass the 
            // corresponding layout which was inflated before by getView so no need to inflate again
            view = convertView;
        }

        ...

        return view;
    }

    // getItemViewType should return value from 0 to 4 since the count is 5
    // See doc for more info
    @Override
    public int getItemViewType(int position) {
        // return the section type which should be in range 0 to 4
    }

    @Override
    public int getViewTypeCount() {
        return 5;
    }
} 
```

# php - 在 CodeIgniter 中跳过 csv_from_result() 中的第一行

> ID：15761429
> 
> 赞同：3
> 
> 时间：2013-04-02T10:09:40.227
> 
> 标签：php, codeigniter, csv, expressionengine

我正在尝试使用CodeIgniter将仅包含两个字段`id`的简单表导出`email`到 CSV 文件。`csv_from_result()`

生成的 CSV 文件的第一行包含列的名称，但我只想要数据。

有什么办法可以跳过这条线吗？

这是我的代码：

```
$query = $this->EE->db->query("SELECT email FROM exp_sct_mailing_list");

$this->EE->load->dbutil();
$data = $this->EE->dbutil->csv_from_result( $query, ",", "\r\n" );

$this->EE->load->helper('download');
force_download("mailing_list.csv", $data);
exit; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T10:23:40.567

最简单的方法是像这样删除第一行：

```
$query = $this->EE->db->query("SELECT email FROM exp_sct_mailing_list");

$this->EE->load->dbutil();
$data = ltrim(strstr($this->EE->dbutil->csv_from_result($query, ',', "\r\n"), "\r\n"));

$this->EE->load->helper('download');
force_download("mailing_list.csv", $data);
exit; 
```

这里我们只提取从第一个 CRLF`\r\n`到数据末尾的内容。然后我们将 CRLF 修剪掉，因此删除了第一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:23:34.837

可悲的是，没有办法将参数传递给函数`csv_from_result`并避免列名，但您可以`csv_from_result`根据原始函数的代码构建自定义函数并删除不需要的部分：

```
/**
* Generate CSV from a query result object
*
* @param object $query Query result object
* @param string $delim Delimiter (default: ,)
* @param string $newline Newline character (default: \n)
* @param string $enclosure Enclosure (default: ")
* @return string
*/
function my_custom_csv_from_result($query, $delim = ',', $newline = "\n", $enclosure = '"')
{
if ( ! is_object($query) OR ! method_exists($query, 'list_fields'))
{
show_error('You must submit a valid result object');
}

$out = '';

// Blast through the result array and build out the rows
while ($row = $query->unbuffered_row('array'))
{
foreach ($row as $item)
{
$out .= $enclosure.str_replace($enclosure, $enclosure.$enclosure, $item).$enclosure.$delim;
}
$out = substr(rtrim($out), 0, -strlen($delim)).$newline;
}

return $out;
} 
```

该代码基于`csv_from_result`从此处获取的实现：[https ://github.com/EllisLab/CodeIgniter/blob/develop/system/database/DB_utility.php](https://github.com/EllisLab/CodeIgniter/blob/develop/system/database/DB_utility.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-13T21:28:06.127

你可以使用[array_shift](http://php.net/manual/en/function.array-shift.php)

```
$data = array_values(array_shift($data)); 
```

这将删除第一行。

你的代码变成：

```
$query = $this->EE->db->query("SELECT email FROM exp_sct_mailing_list");

$this->EE->load->dbutil();
$data = $this->EE->dbutil->csv_from_result( $query, ",", "\r\n" );

$data = array_values(array_shift($data)); //skip the first line

$this->EE->load->helper('download');
force_download("mailing_list.csv", $data);
exit; 
```

# c# - C# Winform 或 WPF 字样页面组件

> ID：15761430
> 
> 赞同：0
> 
> 时间：2013-04-02T10:09:42.983
> 
> 标签：c#, winforms

有谁知道我可以用作“Word-Blank-page”控件的 C# WinForm 或 WPFcomponent 吗？我需要我的用户在运行时看到一个空白页面，可以通过基本文本编辑（粗体、字体、颜色）、基本表格和图像在“画布”（白页）的任何位置进行操作。该组件应该给我一个 API，因此我可以对组件上的用户操作做出反应，例如右键单击表格或图像时（我将根据单击的对象显示不同的表单）。

我寻找来自不同供应商的 RichTextEdit 控件的一些扩展，但其中任何一个都可以为我提供所需的功能。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:52:08.860

流文档是一个很好的方法。Microsoft 对它们进行[了详尽的记录](http://msdn.microsoft.com/en-us/library/aa970909.aspx)。

它们提供了您提到的所有功能，然后提供了一些功能。Code Project 有一些关于如何使用流文档的好例子。您可以查看[此初学者指南](http://www.codeproject.com/Articles/37368/WPF-Flow-Document-For-Beginners)以了解初学者。

# c++ - 如何制作原始类型 C++ 的副本？

> ID：15761433
> 
> 赞同：0
> 
> 时间：2013-04-02T10:09:54.843
> 
> 标签：c++, visual-c++, g++

我想复制一个常量原始类型的值，并分配给一个引用。我想这样做，但不让它在堆中是可能的吗？

做这样的事情：

```
const unsigned long rawnan[2]={0xffffffff, 0x7fffffff};
const double NaN = *( double* )rawnan;
    Class{
        float &_f;
        inline Class( ):_f(float(NaN)){
        }
    } 
```

我想知道何时：

```
Class{
    float &_f;
    inline Class( float F):_f(float(F)){
    }
} 
```

如果我实际上制作了变量 F 的副本（我知道可以直接引用 F 但我认为它的范围将在构造函数的末尾结束，那么我需要复制它的值。）

（如果代码无法编译，那是因为是真实代码的伪代码，基础问题很重要，希望可以理解）

（我做了 NaN 的定义，因为这是迄今为止我知道的最好的方法，并且与 VC++ 和 G++ 兼容）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:11:53.020

就是这样：

```
float first = 3.14159265358979324f;
float second = first; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:38:06.363

您的代码片段都不正确。

`float(NaN)`并且`float(F)`是临时对象。您将它们绑定到引用数据成员`_f`，但这不会延长它们的生命周期。因此，当您开始使用该参考`_f`时，它将悬而未决。

如果要获取 a 的副本`float`，请使用`float`数据成员，而不是`float&`. 如果你想要一个引用数据成员，你必须确保它引用的东西在使用引用时仍然存在。

> 如果代码无法编译，那是因为是真实代码的伪代码

处理这个问题的正确方法是编写一个简短而完整的程序，包括您要询问的代码，检查它是否可以编译，然后询问关于您的完整程序的问题。您发布的代码至少存在两个编译问题。您的真实代码（如果它在 g++ 中编译）不可能像您在示例代码中所做的那样初始化引用。

# html - 怎么把文字放在图片前面？

> ID：15761435
> 
> 赞同：0
> 
> 时间：2013-04-02T10:09:57.813
> 
> 标签：html, css, image, css-float

我有一张图片，我想把文字放在图片的左侧，但我做不到。

以下是我的代码：

```
<div style="float:right; width:75%;">
<p style="float: left;">Affiliated to Board of Secondary Education Rajasthan, Jhunjhunu International School is purely english medium from LKG to 10th. It is equipped with most modern study and play equipment, which includes extramarks SMART LEARN CLASS, completely automated school automation software - SchoolPrime, SMS based parent information system, centralized  examination and evaluation, world class celebrations, hobby classes, personality development and above all, Professionally trained team of teachers.</p>

<p style="float: left;">View Details</p>
<img src="images/disp_1_jis_logo.jpg" style="float: right;">
</div> 
```

[截图附在](http://i.stack.imgur.com/sexj7.png)这篇文章中。谁能帮我把文字放在图片的左边？并将图像向上拉，使其与文本内联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:13:27.703

`float:left`从 p 标签和 div 中删除's。

添加`display:inline-block`到 p 标签。

将图像标签移到顶部

```
<div style=" width:75%; display:inline-block">
<img src="images/disp_1_jis_logo.jpg" width="150"style="float: right;">
    <p>Affiliated..</p>
<p >View Details</p>

</div> 
```

**[演示](http://jsfiddle.net/uHqgQ/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:17:57.527

如果您无法更改元素的顺序，请为第一个 p 元素添加宽度。

```
<p style="float: left; width: 50%">Affiliated ...</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:19:56.480

试试这个：

```
<div style="float:right; width:75%;">

<p style="float: left; display: inline-block; width: 800px;"><img src="test.jpg" style="float: left; padding: 0px 10px 10px 0px;">Affiliated to Board of Secondary Education Rajasthan, Jhunjhunu International School is purely english medium from LKG to 10th. It is equipped with most modern study and play equipment, which includes extramarks SMART LEARN CLASS, completely automated school automation software - SchoolPrime, SMS based parent information system, centralized  examination and evaluation, world class celebrations, hobby classes, personality development and above all, Professionally trained team of teachers.
equipment, which includes extramarks SMART LEARN CLASS, completely automated school automation software - SchoolPrime, SMS based parent information system, centralized  examination and evaluation, world class celebrations, hobby classes, personality development and above all, Professionally trained team of teachers.</p>

<p style="float: left;">View Details</p>

</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T10:31:03.670

可以这样想——默认情况下，每个块元素，如段落、图像或 div，都放置在从其容器元素左侧开始的新行上，例如页面主体或另一个 div .

要更改此默认放置，请将要移动的元素（在本例中为图像）浮动到您想要它所在的一侧，即`<img src="images/disp_1_jis_logo.jpg" style="float: right;">`，就像您在代码中所做的那样。这会将元素放在容器元素的最右侧，无论它在代码中的哪一行。任何后续元素都可以从同一行开始，并将放置在该行的左侧。所以，左边你想要的段落应该是图片之后的下一个元素，即

```
<img src="images/disp_1_jis_logo.jpg" style="float: right;">
<p>Affiliated to Board of Secondary Education Rajasthan, Jhunjhunu International 
School is purely english medium from LKG to 10th. It is equipped with most modern
study and play equipment, which includes extramarks SMART LEARN CLASS, completely
automated school automation software - SchoolPrime, SMS based parent information 
system, centralized  examination and evaluation, world class celebrations, hobby 
classes, personality development and above all, Professionally trained team of 
teachers.</p>
<p>View Details</p> 
```

您还可以将元素从其他块元素中浮动出来，即如果图像在第一个段落块内，它的行为方式类似。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T10:50:48.127

试试这个。

```
<div style="float:right; width:75%;text-align: justify;">
<p style="float: left;">
Affiliated to Board of Secondary Education Rajasthan, 
<img src="images/disp_1_jis_logo.jpg" style=" float: right; margin:5px;"> 
```

Jhunjhunu国际学校是从LKG到10th的纯英语媒介。它配备了最现代化的学习和游乐设备，其中包括加分项 SMART LEARN CLASS、-SchoolPrime、基于短信的家长信息系统、集中考试和评估、世界级庆祝活动、兴趣班、个性发展，最重要的是，经过专业培训的教师团队.

```
<p style="float: left;">View Details</p>
</div 
```

# sockets - 一个连接中有多少个元组？

> ID：15761436
> 
> 赞同：12
> 
> 时间：2013-04-02T10:10:01.783
> 
> 标签：sockets, ip, protocols, port, tuples

[有人](https://stackoverflow.com/questions/152457/what-is-the-difference-between-a-port-and-a-socket)说一个连接有4个元组

**客户端IP地址、客户端端口号、服务器IP地址、服务器端口号**

[有人](https://stackoverflow.com/questions/489036/how-does-the-socket-api-accept-function-work)说有5

**客户端IP地址、客户端端口号、服务器IP地址、服务器端口号、协议**

哪一个是正确的？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-02T12:07:14.840

你误解了术语。TCP*连接*由 5 元组标识。这意味着*一个*元组，有 5 个元素。这五个要素是：

1.  协议。这通常被省略，因为我们知道我们在谈论 TCP，它留下了 4。
2.  源 IP 地址。
3.  源端口。
4.  目标 IP 地址。
5.  目标端口。

# ruby - 类 eval 通过引用传递类变量

> ID：15761440
> 
> 赞同：0
> 
> 时间：2013-04-02T10:10:12.580
> 
> 标签：ruby, class-eval

***以下代码片段：***

```
class A
end
    @class = eval("A")
    @class.class_eval do
        @@attr = 100
        def self.get_attr
            @@attr
        end
        def self.set_attr(_x)
            @@attr = _x
        end
    end

    class B
    end

    @class = eval("B")
    @class.class_eval do
        @@attr = 100
        def self.get_attr
            @@attr
        end
        def self.set_attr(_x)
            @@attr = _x
        end
    end
    a = A.new
    b = B.new
    A.set_attr(103)
    B.set_attr(222)
    puts A.get_attr
    puts B.get_attr 
```

类变量正在共享。

***结果：***

222 222

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:26:23.167

这是因为你没有设置你认为你做的变量。

```
class A; end

@class = eval("A")
@class.class_eval do
  class_variable_set :@@attr, 100

  def self.get_attr
    class_variable_get :@@attr
  end

  def self.set_attr(_x)
    class_variable_set :@@attr, _x
  end
end

class B
end

@class = eval("B")
@class.class_eval do
  class_variable_set :@@attr, 100

  def self.get_attr
    class_variable_get :@@attr
  end
  def self.set_attr(_x)
    class_variable_set :@@attr, _x
  end
end

A.set_attr(103)
B.set_attr(222)
puts A.get_attr
puts B.get_attr

# >> 103
# >> 222 
```

当我运行您的代码时，它会给出几个“从顶层访问类变量”的警告。因此，显然，您正在设置和读取`main`对象的类变量，而不是您的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:36:51.270

看下面的代码：

```
class A
end
@class = eval("A")
@class.class_eval do
    @@attr = 100
    def self.get_attr
        @@attr
    end
    def self.set_attr(_x)
        p "hi"
        @@attr = _x
    end
end

class B
end

@class = eval("B")
@class.class_eval do
    @@attr = 100
    def self.get_attr
        @@attr
    end
    def self.set_attr(_x)
        p "hi"
        @@attr = _x
    end
end
a = A.new
b = B.new
A.set_attr(103)
B.set_attr(222)

p A.class_variable_defined?(:@@attr) 
p B.class_variable_defined?(:@@attr) 
p Object.class_variable_defined?(:@@attr)

p A.class_variable_get(:@@attr)
p B.class_variable_get(:@@attr)
p Object.class_variable_get(:@@attr)

p A.class_variables
p B.class_variables
Object.remove_class_variable(:@@attr)
p A.class_variables
p B.class_variables 
```

*输出：*

```
true
true
true
222
222
222
[:@@attr]
[:@@attr]
[]
[] 
```

***说明：***根据您的代码`@@attr`属于`Object`类类变量。并且根据`Ruby`A 和 B 都是`Object`. 因此类变量`@@attr`已被共享。

[`Module#class_eval`](http://www.rubydoc.info/stdlib/core/Module#class_eval-instance_method)说：

> > **(a) 这可用于向类添加方法。**
> > 
> > **(b) 当给定一个块时，常量/类变量查找不受影响。**

这是 ruby​​ 的特性，如果你`class variable`在里面使用`class_eval`它会`class variable`在类中搜索`Object`。

为了使其可见，我编写了以下代码，这反过来将证明：***常量/类变量查找不受影响。***

```
@@avar = 1
class A < BasicObject
@@avar = "hello"
end
A.class_eval { puts @@avar } 
```

查看代码输出：

```
D:/Rubyscript/My ruby learning days/Scripts/TEST.RB:91: warning: class variable
access from toplevel
D:/Rubyscript/My ruby learning days/Scripts/TEST.RB:95: warning: class variable
access from toplevel
1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:12:22.637

检查下面的代码，

```
class A
end

class B
end

ADD_ATTR = lambda do
    @@attr = 100
    def self.get_attr
      puts "self : #{self} getting attr : #{@@attr}"
        @@attr
    end
    def self.set_attr(_x)
      puts "self : #{self} setting attr : #{@@attr} to _x : #{_x}"
        @@attr = _x
    end
end

A.class_eval &ADD_ATTR
B.class_eval &ADD_ATTR

a = A.new
b = B.new

A.set_attr(103)
B.set_attr(222)
puts A.get_attr
puts B.get_attr

ADD_BTTR = '
    @@bttr = 100
    def self.get_bttr
      puts "self : #{self} getting bttr : #{@@bttr}"
        @@bttr
    end
    def self.set_bttr(_x)
      puts "self : #{self} setting bttr : #{@@bttr} to _x : #{_x}"
        @@bttr = _x
    end
'
A.class_eval ADD_BTTR
B.class_eval ADD_BTTR

A.set_bttr(103)
B.set_bttr(222)
puts A.get_bttr
puts B.get_bttr 
```

似乎ruby在将对象方法加入类之前在对象方法的上下文中进行块评估，因此评估发生在代码附加到类之前，它需要将属性附加到对象方法，以证明我使用的点带有 lambda 运算符的代码。

同时，如果我们使用字符串执行类 eval，则相同的代码可以工作

# 这是我得到的输出：

```
self : A 设置 attr : 100 to _x : 103
self : B 设置 attr : 103 到 _x : 222
self : 获取 attr : 222
222
自我：B 获得属性：222
222
self : 一个设置 bttr : 100 到 _x : 103
self : B 设置 bttr : 100 到 _x : 222
self : 越来越 bttr : 103
103
自我：B得到bttr：222
222

```

# c# - 字符串到布尔内联转换

> ID：15761443
> 
> 赞同：5
> 
> 时间：2013-04-02T10:10:17.227
> 
> 标签：c#, asp.net, string, boolean

我目前拥有的：

```
bool okPress = !string.IsNullOrEmpty(Ctx.Request["okPress"]) &&
    Convert.ToBoolean(Ctx.Request["okPress"]); 
```

如果我在这里错了，请纠正我，但`FormatException`如果字符串不是“ `true`/ `True`”或“ `false`/ `False`”，这不会抛出 a 吗？有什么方法可以在一行中处理转换，而不必担心异常？还是我需要使用`Boolean.TryParse`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T10:13:19.643

您可以使用[`Boolean.TryParse`](http://msdn.microsoft.com/en-us/library/system.boolean.tryparse.aspx)：

```
bool okPress;
bool success = Boolean.TryParse(Ctx.Request["okPress"]), out okPress); 
```

对于它的价值，这里是一个“单线”，创建以下扩展，这可能在 LINQ 查询中特别有用：

```
public static bool TryGetBool(this string item)
{
    bool b;
    Boolean.TryParse(item, out b);
    return b; 
} 
```

和写：

```
bool okPress = Ctx.Request["okPress"].TryGetBool(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T10:13:55.657

如果你不想使用`TryParse`你可以做类似的事情

```
bool okPress = !string.IsNullOrEmpty(Ctx.Request["okPress"]) &&
(Ctx.Request["okPress"].ToLower()=="true"); 
```

这样，如果字符串不是真/假，它只会为您假设假，不会抛出异常。

当然，这确实假设您很高兴将“fish”的值视为错误而不是异常。

更好的是不要将其作为单行来执行。您通常没有最大的代码行数，因此两三行简单的代码通常比一行复杂的代码要好...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T10:14:16.047

为什么不将字符串与 比较`true`？

```
bool okPress = !string.IsNullOrEmpty(Ctx.Request["okPress"]) &&
    String.Compare(Ctx.Request["okPress"], "true", StringComparison.OrdinalIgnoreCase) == 0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T10:15:32.480

正如你所说，你可以使用类的[TryParse](http://msdn.microsoft.com/en-us/library/system.boolean.tryparse.aspx)方法。`Boolean`

> 尝试将逻辑值的指定字符串表示形式转换为其等效的布尔值。返回值指示转换是成功还是失败。

```
bool result = Boolean.TryParse(Ctx.Request["okPress"]), out okPress); 
```

`true`如果值转换成功，则返回；否则，`false`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T10:21:27.517

您的内联转换。

```
 public static bool TryParseAsBoolean(this string expression)
    {
        bool booleanValue;

        bool.TryParse(expression, out booleanValue);

        return booleanValue;
    }

    bool okPress =  Ctx.Request["okPress"].TryParseAsBoolean(); 
```

# mysql - 在更长的时间段和时区存储统计信息

> ID：15761450
> 
> 赞同：5
> 
> 时间：2013-04-02T10:10:35.160
> 
> 标签：mysql, database, date, database-design, timezone

目前我正在研究一个计算数据并按 ID 将其存储在分析数据库中的项目。

例如，一篇新闻文章被阅读的次数（因此大约有 20 类数据以整数形式存储）。

我们将数据存储在如下字段中： int user_id int value_type_id int value datetime datetime

我们使用 4 个表，x_hour、x_day、x_week、x_month 这样我们就不必计算潜在的几千甚至几百万条记录的数据。

数据需要动态计算并通过某些连接过滤。这一切都没有问题，并且按预期以令人满意的速度工作。

接下来的问题。我们希望数据显示在查看它的用户的时区中，时区并不总是相同的，因为它可能很有趣，例如 UTC-5 或 UTC+4。

由于我们将日期存储在 UTC 上，因此我们在天、周和月的间隔方面存在问题，因为如果活动在午夜前一小时存储，则较大的间隔将其视为昨天，即使它可能在该时区的同一天。

我已将解决方案阅读为添加 24 列来保存每个时区的数据，是否有人有不同的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:15:19.287

继续以 UTC 格式存储日期时间。

将用户的时区传递给查询。

在 中转换`SELECT`，使用[`CONVERT_TZ`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_convert-tz)函数：

```
CONVERT_TZ(`datetimefield`, 'UTC', 'Europe/Amsterdam') 
```

其中“欧洲/阿姆斯特丹”替换为适当的时区。

你最好使用上面的 IANA 时区字符串，而不是像“UTC-5”这样的偏移量，只要你有这些数据可用。它将正确处理发生这种情况的地区的夏令时问题。

进一步说明：[https](https://dev.mysql.com/doc/refman/5.5/en/mysql-tzinfo-to-sql.html) ://dev.mysql.com/doc/refman/5.5/en/mysql-tzinfo-to-sql.html - 该程序用于使用时区数据初始化 MySQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:57:29.247

似乎唯一的方法是使用 15 分钟的存储桶或精确定义的时区，因为那样只会得到大约 40 列。

然后我们必须在几天几周和几个月内做同样的事情，这样我们就有每个时区的正确数据。

花费更多时间并占用更多数据存储空间，但如果我们保持数据清洁，这可能是一个足够体面的解决方案。

# c++ - 在本机 C++ 循环的 C++/CLI 包装器中取消 BackgroundWorker

> ID：15761451
> 
> 赞同：0
> 
> 时间：2013-04-02T10:10:40.290
> 
> 标签：c++, .net, c++-cli, backgroundworker

像这篇[文章](https://stackoverflow.com/questions/10723045/cancelling-backgroundworker-windows-forms-c-cli/15760410)一样，我需要取消派生自 .NET BackgroundWorker 的 C++/CLI 类中的 BackgroundWorker。

我正在使用 C++/CLI 来包装一个长期运行的、遗留的、本机 C++ 函数。

我如何/应该如何从本机 C++ 中的长时间运行循环访问 BackgoundWorker 类的 CancellationPending 成员？

```
public ref class BackgroundWorkerWrapper : BackgroundWorker
{
    private:
        Outline* pOutline;

    public:
        BackgroundWorkerWrapper(void) 
        {
            WorkerReportsProgress = true;

            pOutline = new Outline;

    //      pOutline->CancellationPending = &(BackgroundWorker::CancellationPending);

        }

    protected:

        virtual void OnDoWork(DoWorkEventArgs ^e) override {
            pOutline->DoWork();
            BackgroundWorker::OnDoWork(e);
        }

    }; 
```

在上面你可以看到我试图将 CancellationPending 映射到 Outline 类中的布尔值。到目前为止，这还没有奏效。

我的大纲课程相当简单。

```
public class Outline
{

public:
    bool* CancellationPending;

    Outline()
    {
    }
    ~Outline()
    {
    }

    void DoWork()
    {
        try
        {
            for (int i=0; i < 1000; i++)
            {
                if (CancellationPending[0] == true)
                {
                    break;
                }

                // Do some trivial work
                Sleep(50);
            }
        }
        // catch(...)
              catch (exception& e)
        {
            cout << e.what() << endl;
        }

    }
}; 
```

或者，是否有另一种方法可以向 BackgroundWorker 类的 CancelAsnc() 函数添加另一个处理程序，该处理程序可以以某种方式在大纲类中设置取消变量？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T21:29:00.593

您可以在`OnDoWork`覆盖的末尾添加一些内容以不断检查`BackgroundWorker::CancellationPending`标志。如果为真，`pOutline->CancellationPending`也设置为真。

# html - 在 twitter bootstrap 中放置表单中心的标签

> ID：15761453
> 
> 赞同：3
> 
> 时间：2013-04-02T10:10:47.537
> 
> 标签：html, css, forms, twitter-bootstrap

我对 twitter bootstrap 很陌生，我正在努力将我的表格放在中心位置。

我在这里有这样的代码：

```
<div class="row">
  <div class="pagination-centered">
        <br/><br/><br/><br/>
        <form action="/payment-init" method="POST">
          <fieldset>
            <legend>Merchant CheckOut Page</legend>
            <label>Product Name</label>
            <input type="text" placeholder="Type something..." name="productName" value="Samsung Mobile Phone"/>
            <label>Amount</label>
            <input type="text" placeholder="Enter the amount in rupees..." name="amount" required="true" />
            <label>Merchant Name</label>
            <input type="text" placeholder="Merchant name" name="merchantId" required = "true" />
            <label>Customer Email</label>
            <input type="text" placeholder="test@gmail.com" name="email" required = "true" />
            <br>
            <button type="submit" class="btn">Submit</button>
          </fieldset>
        </form>
  </div>
</div> 
```

其输出如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/BiDkm.png)

我希望将`label`（即产品名称、金额等）移动到文本框的左上角。那可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:14:09.397

试试`float: left; text-align: left;`如果这无助于将一些 CSS 代码放入帖子中 :) 我无法告诉修复表单该屏幕截图 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T10:22:27.250

要将标签放在每个文本框的左上角，您还需要使每个文本框填充所有可用宽度。因此，请执行以下操作：

```
.pagination-centered label {
  text-align:left;
}

.pagination-centered input {
  width: 100%;
} 
```

# java - Grails 应用程序中的 SMTP 邮件失败（MS Exchange 和无身份验证）

> ID：15761454
> 
> 赞同：1
> 
> 时间：2013-04-02T10:10:48.500
> 
> 标签：java, debugging, grails, smtp, jakarta-mail

我们有一个使用邮件插件代码的 Grails 1.2.1 应用程序。我们必须修改代码，因为我们需要连接到各种 SMTP 主机，而不仅仅是当时允许的插件。

无论如何，它多年来一直运行良好，直到我们需要连接到配置为没有 smtp 身份验证的 Exchange 服务器。

通常，此配置设置适用于 Exchange：

```
mail.smtp.auth=true;mail.smtp.socketFactory.port=2525;mail.smtp.socketFactory.fallback=true;mail.smtp.starttls.enable=true 
```

对于这种情况，我正在使用：

```
mail.smtp.auth=false;mail.smtp.socketFactory.port=2525;mail.smtp.debug=true;mail.debug.auth=true 
```

使用这个特定的 smtp 服务器，我们得到：

```
org.springframework.mail.MailAuthenticationException: Authentication failed; nested exception is javax.mail.AuthenticationFailedException
    at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:415)
    at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:341)
    at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:337)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:229)
    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:52)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:117)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125) 
```

**第一关，如何显示调试消息，**我似乎无法打开任何详细的日志记录。

我在 config.groovy 中为这些模式启用了调试级别跟踪：

```
 ,"org.springframework.mail"
                ,"javax.mail" 
```

**第二，我可以尝试解决身份验证问题的任何选项吗？**我已经看到一个使用 javaMail 的 connect() 没有 uid/密码的答案，但是我们的应用程序调用

```
org.springframework.mail.MailSender.send(org.springframework.mail.SimpleMailMessage simpleMailMessage) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:53:38.157

我通过 mail.smtp.auth=false 解决了身份验证问题，并将用户 ID 和密码都设置为 null。

获取调试级别跟踪输出没有成功

# jquery - jquery在val中显示小数

> ID：15761459
> 
> 赞同：0
> 
> 时间：2013-04-02T10:11:03.860
> 
> 标签：jquery

我有以下语法，这些函数中的每一个都设置输入框的值。

折扣，1 位小数调整价格，2 位小数（货币）

如何显示每个函数的小数位。

```
 function calculateRow(row) {
        var price = +row.find('input[name^="adjustedprice"]').val();
        var qty = +row.find('input[name^="qty"]').val();
        row.find('input[name^="linetotal"]').val((price * qty).toFixed(2));
        var listprice = +row.find('input[name^="price"]').val();
        var discount = 0;
        var discount = Math.round(100 - (price / listprice) * 100);
        row.find('input[name^="discount"]').val(discount);
    }

    function calculateAjustedPrice(row) {
        var listprice = +row.find('input[name^="price"]').val();
        var discount = +row.find('input[name^="discount"]').val();
        var adjustedprice = Math.round((listprice/100)*(100-discount));
        row.find('input[name^="adjustedprice"]').val(adjustedprice);
        calculateRow(row);
        calculateGrandTotal();
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:18:26.347

[您可以使用toFixed](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Number/toFixed)方法使用定点表示法设置小数位：

```
(number).toFixed(n); 
// where number is the value you want to format
// n is the decimal places you want 
```

例如

```
var n = 12.8;
n.toFixed(2); // Returns 12.80 : note added zero 
```

# file - 在 WinSCP 中使用 FTP 协议上传时设置文件权限

> ID：15761461
> 
> 赞同：2
> 
> 时间：2013-04-02T10:11:11.160
> 
> 标签：file, permissions, ftp, winscp

当我使用 WinSCP 通过 FTP 将文件上传到服务器时，它总是将权限设置为`rw-------`.

我尝试更改设置，但文本框模糊不清。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:17:04.823

WinSCP 不支持在使​​用 FTP 协议上传时自动设置权限：
[https ://winscp.net/eng/docs/ui_transfer_custom#upload](https://winscp.net/eng/docs/ui_transfer_custom#upload)

您可以在上传后明确更改权限：
[https ://winscp.net/eng/docs/task_properties](https://winscp.net/eng/docs/task_properties)

# actionscript-3 - 用于 Nape 中船舶和子弹的 sensorGroup 和 sensorMask 组合

> ID：15761463
> 
> 赞同：4
> 
> 时间：2013-04-02T10:11:14.427
> 
> 标签：actionscript-3, game-physics, haxe, physics-engine, nape

我有多艘宇宙飞船（`SHIP_CB`CbType），它们都可以发射导弹（`BULLET_CB`CbType）。我如何在那里设置`sensorGroup`，`sensorMask`所以`InteractionListeners`我得到以下行为：

1.  船只相互碰撞并反弹。
2.  子弹根本不会相互反应或感知。
3.  子弹感应敌舰。
4.  子弹对发射子弹的船**没有**感觉。

是否有可能仅通过在每个对象上设置正确的 sensorGroup 和 sensorMask 来获得所有这些行为？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T18:25:31.003

假设子弹只会感应到，因此不应以任何方式与发射它们的船相互作用，一种方式是：

从一切默认开始，

每艘船

```
ship.group = new InteractionGroup(true);
```

对于为给定的船“船”创建的每个子弹

将子弹设置为与发射它的船具有相同的交互组。这样，由于组上的 ignore=true，从给定飞船发射的任何子弹都将被排除在与该飞船的交互之外。

```
子弹.组=船组；
```

对于每种形状的子弹，可能只有 1\. 制作子弹形状传感器

```
bulletShape.sensorEnabled = true;
```

使子弹形状对除了它们自己之外的所有事物都有意义。

```
bulletShape.sensorGroup = 2;
bulletShape.sensorMask = ~2;
```

ref: [Nape 手册：InteractionGroups](http://napephys.com/help/manual.html#Interactions.InteractionGroups)

您“可以”纯粹使用 sensorGroup/sensorMask 来做到这一点。但是你会被限制在 31 艘不同的船上，而且逻辑会更复杂一些。

您还可以使用回调系统来忽略飞船和它发射的子弹之间的交互，并在回调中添加一些额外的逻辑，但它比使用 InteractionGroup 的东西要重得多。

# r - ggplot2 箱线图

> ID：15761465
> 
> 赞同：0
> 
> 时间：2013-04-02T10:11:20.863
> 
> 标签：r, ggplot2, boxplot

我正在尝试使用 ggplot2 绘制箱线图。样本数据是这样的。

`> sampe`

```
count genotype
71       mt
50       mt
71       mt
95       wt
60       mt
63       mt
75       mt
82       wt
93       wt
87       wt
61       mt
102       wt
60       mt
78       wt
78       wt
87       wt
84       wt
104       wt
81       wt
85       mt

> qplot(factor(genotype),count,data=sampe,geom="boxplot") 
```

上面的命令产生这样的情节： ![在此处输入图像描述](https://i.stack.imgur.com/49eeo.png)

这里有什么问题？？为什么它会这样绘制？即使下面的代码也会产生相同的输出。

```
ggplot(sampe,aes(x=factor(genotype),y=count))+geom_boxplot() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T11:03:55.153

好的..我会回答我自己的问题。根据建议计数值存储为因子。将它们转换为数字就可以了

```
qplot(factor(genotype),as.numeric(count),data=sampe,geom="boxplot") 
```

谢谢大家的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-18T15:24:00.470

我认为您的问题是您的 Y 轴实际上没有计数，R 将计数理解为变量。实际上，您只需要按基因型对数据进行分组，而不是 ggplot2。

```
df %>% group_by(genotype)
ggplot(df) +
  geom_boxplot(mapping = aes(x=genotype, y = count)) 
```

# ruby-on-rails - 在 Ruby 中打开目录中的文件失败

> ID：15761468
> 
> 赞同：0
> 
> 时间：2013-04-02T10:11:29.283
> 
> 标签：ruby-on-rails, ruby

我正在尝试以以下给定方式更改文件的权限。

`File.chmod(0777,"util\logger\Sample.txt").`但问题是 Sample.txt 在给定的路径 util/logger/Sample.txt 中。

上述操作失败，因为找不到文件名 Sample.txt。我以这种方式尝试过`Dir.chdir("\util\logger")`，然后我在做 `File.chmod(0777,"Sample.txt")`。

所以我再次需要回到我的基本文件夹来做其他操作。我对这种开发代码的方式感觉并不好。

因此，在不更改当前目录的情况下直接从目录访问文件的任何帮助将对我有很大帮助。

在此先感谢，阿迪亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:35:44.947

首先，我认为您不能在 Unix 系统上使用反斜杠作为文件分隔符。路径中的反斜杠是微软的事情。幸运的是，Ruby 有一种从路径中删除文件分隔符的好方法，因此可以根据环境在运行时计算它们。

利用 `File.join('path', 'to', 'file.txt')`

这将返回一个带有`path/to/file.txt`Unix 值的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:47:53.887

我是这样解决的。。

```
File.chmod(0777,"util/logger/Sample.txt") , Previously i try to enter /util/logger 
```

# wpf - 在 WPF 中执行 SQL 查询时在 UI 上显示计时器

> ID：15761470
> 
> 赞同：-1
> 
> 时间：2013-04-02T10:11:41.490
> 
> 标签：wpf, timer

当我单击“开始”按钮时，我的 SQL 查询开始执行。我想在单击开始按钮时启动计时器并在 UI 中完成查询执行时停止它。请建议我如何在 WPF 中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:14:15.537

尝试使用`BackgroundWorker`类：

```
 BackgroundWorker worker = new BackgroundWorker();
  worker.DoWork += (o, ea) =>
  {
    //Work to be done i.e executing the SQL query
  };

  worker.RunWorkerCompleted += (o, ea) =>
  {
    //Code for when the job has complete i.e stopping the timer
  };

  //Start the timer here
  worker.RunWorkerAsync(); 
```

这将在执行代码时保持 UI 响应。

希望这可以帮助！

# javascript - AS3 字符串到 XML

> ID：15761471
> 
> 赞同：0
> 
> 时间：2013-04-02T10:11:41.900
> 
> 标签：javascript, xml, string, actionscript-3

我有一个 JS 代码读取 div 的内容并返回字符串数据。比我想读这个并转换为 XML

首先转换`<`为`&lt;`和`>`从`&gt;`html 获取字符串：

```
XmlData = String(ExternalInterface.call("ReadXmlContent")); 
```

创建 XML：

```
bookxml = new XML(XmlData);

aaaa.htmlText +="bookxml "+ bookxml.toXMLString() + " <br>" // shows complete xml

aaaa.htmlText +="length"+ bookxml.content.page.length() + " <br>"; // shows : 0 
```

完整的 xml 正在显示，但无法读取 xml 节点。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:35:51.780

抱歉英语不好。感谢@Anton 提供有用的问题解决方案：

我的 XML 节点：

```
<MediaObject Title='name' MediaObjectID='14' X1='42,00' Y1='3,00' X2='72,00' Y2='31,00' MediaType='video'/>
<MediaObject Title='name' MediaObjectID='15' X1='3,00' Y1='3,00' X2='34,00' Y2='31,00' MediaType='video'/> 
```

如果你在 div 中使用 xml 节点，浏览器会转换它：

```
<mediaobject title='name' mediaobjectid='14' x1='42,00' y1='3,00' x2='72,00' y2='31,00' mediatype='video'>
<mediaobject title='name' mediaobjectid='15' x1='3,00' y1='3,00' x2='34,00' y2='31,00' mediatype='video'></mediaobject></mediaobject> 
```

浏览器更改节点并将节点名称和属性转换为小写。

解决方案：使用 xml 作为值，如下所示并阅读它。因此浏览器不添加节点，也不将节点名称/属性更改为小写。不要忘记使用带有“'”的属性值：

```
<input type="hidden" name="xmldata" id="xmldata" value="<Contents><Content PreviousContentID='30' PreviousContentName='aaa' NextContentID='28' NextContentName='aaa'><Page Number='3' RelativePath='images/res1.jpg' AbsolutePath='a.net'><MediaObject Title='aaa' MediaObjectID='58' X1='38,64' Y1='50,37' X2='54,06' Y2='54,25' MediaType='link'></MediaObject><MediaObject Title='aaa' MediaObjectID='58' X1='8,43' Y1='2,27' X2='33,12' Y2='24,31' MediaType='link'></MediaObject></Page></Content></Contents>"> 
```

如果你想在 div 中使用：使用小写的节点名称和属性，不要使用这样的行：

```
<mediaobject title='name' mediaobjectid='14' x1='42,00' y1='3,00' x2='72,00' y2='31,00' mediatype='video'/> 
```

将其更改为：

```
<mediaobject title='name' mediaobjectid='14' x1='42,00' y1='3,00' x2='72,00' y2='31,00' mediatype='video'></mediaobject> 
```

# c# - Linq 包括来自集合的孩子

> ID：15761477
> 
> 赞同：3
> 
> 时间：2013-04-02T10:11:51.193
> 
> 标签：c#, linq, entity-framework, include, linq-to-entities

使用 include 方法不包括集合的子项。

```
var abuseCaseQuery =
  from @event in 
    context.AbuseEvents.Include("AbuseCase.AbuseCaseStatus.Status")
  select new
  {
    @event.SecurityGroupId,
    @event.AbuseCaseId,
    @event.AbuseCase.AbuseCaseStatus
  }
;

var abuseCases = abuseCaseQuery.ToList(); 
```

`abuseCases`List 包含所有`AbuseCasesStatus`和 ，但`StatusId`对象`Status`为空。

edmx：

![edmx](https://i.stack.imgur.com/8Synk.png)

如何填充`Status`导航属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:04:48.253

在 EF 中，`Includes`当您使用 . 添加投影时将被忽略`Select`。

因此，您必须明确选择所需的所有数据：

```
select new
{
  @event.SecurityGroupId,
  @event.AbuseCaseId,
  @event.AbuseCase.AbuseCaseStatuses
    .Select( acs => new { AbuseCaseStatus = acs, Status = acs.Status } )
} 
```

* * *

这确实会产生一个“平面”对象，因此您可能希望在之后修复对象图：

```
foreach( var abuseCase in abuseCases )
{
  foreach( var acs in abuseCase.AbuseCaseStatuses )
  {
    acs.AbuseCaseStatus.Status = acs.Status;
  }
} 
```

# twitter-bootstrap - twitter bootstrap的后台打印问题

> ID：15761479
> 
> 赞同：4
> 
> 时间：2013-04-02T10:11:57.410
> 
> 标签：twitter-bootstrap, printing

我正在使用 Twitter Bootstrap 并尝试使用背景打印页面。我尝试了网络浏览器中的所有选项，但它不起作用。如果我不包括 twitter bootstrap，则背景的打印效果很好。（顺便说一下，在这个特定的页面上，我没有使用任何与 TBS 相关的东西）。

在不排除 TBS 的情况下，我能做些什么让它工作（一种重置）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-02T10:35:39.810

Bootstrap css 文件有一个“@media print”部分，它设置了以下 css 规则：

```
* {
    color: #000 !important;
    text-shadow: none !important;
    background: transparent !important;
    box-shadow: none !important;
  } 
```

如您所见，它将所有背景设置为透明。

您需要在自定义样式表中覆盖它或在 bootstrap.css 文件中更改它。

# javascript - 读取 SkyDrive 文件的内容

> ID：15761480
> 
> 赞同：2
> 
> 时间：2013-04-02T10:11:57.613
> 
> 标签：javascript, web-applications, xmlhttprequest, onedrive

## 我有的

我 在必须访问 SkyDrive 文件的浏览器中运行**WEB应用程序。**我使用`WL.js`提供的不错的接口来访问当前经过身份验证的用户的文件列表：

```
 function openFromSkyDrive() {
        WL.fileDialog({
            mode: 'open',
            select: 'single'
        }).then(
        function (response) {

            var files = response.data.files;
            for (var i = 0; i < files.length; i++) {
                var file = files[i];
                log(file.name);
                WL.download({ "path": file.id + "/content" }, onDownloadFileCompleted).then(
                function (response) {
                   var r = response;
                },
                function (responseFailed) {
                  log("Error downloading file: " + responseFailed.error.message);
                });

                //TRIED TO USE SIMPLE GET CALL TOO, DIDN'T WORKED AS WELL
               /* var url = file.link;
                WL.api({ path: url,

                    method: "GET"
                }).then(
                     function (response) {
                         log("Downloaded : " + response.name + ", ID: " + response.id)
                     },
                    function (responseFailed) {
                        "Error calling API: " + responseFailed.error.message;
                    }
                ); */

            }
        },
       .....
    );
    } 
```

一切都很好，很干净。

## 问题

当我使用`WL.download`文件的下载在浏览器中开始时，浏览**器**会加载文件，但我需要将文件内容加载到我的 javascript 中，这样**我就可以**直接从我的应用程序处理内容。

请注意，我已经尝试使用`WL.api`具有`GET`不同路径的方法（我尝试了文件对象中的所有可用方法）但它失败了：或者它返回一个错误，或者什么也没有。

`WinJS`似乎提供`XHR`调用方法，但我不能使用它，因为我正在编写网络应用程序并且`WinJS`仅供桌面使用。

## 问题

如何处理从 skydrive 下载/下载文件的内容？是否有可能无需手动创建框架和 XHR 调用定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T10:41:15.593

您可以像这样使用 WL.api 方法创建一个链接，允许您访问该文件：

```
WL.api({
    path: file.id + "/content",
    method: "GET"
}).then(
    function(response) {
        //URL will be in response.location, so load file content using jQuery or similar
        $.get(response.location, /* etc */);
    },
    function(err) {
        alert(err);
    }
); 
```

奇怪的是，返回的 URL`response.location`不需要任何身份验证 - 因此您可以通过电子邮件发送给其他人，他们将有权访问该文件。这与文件是否在 OneDrive 中设置为共享无关。从安全的角度来看，这对我来说似乎很奇怪，但我可能会遗漏一些东西。

# php - 如果一小时过去了，jquery 加载模式

> ID：15761481
> 
> 赞同：-2
> 
> 时间：2013-04-02T10:11:58.507
> 
> 标签：php, jquery, twitter-bootstrap, time

```
$(document).ready(function() { 
    $('#bb').modal();
}); 
```

我正在加载一个引导模式。但我不想在每次负载时都显示模态。它应该像“显示上一次加载后是否经过 60 分钟”。

我无法记录 IP 地址，因为所有用户都使用相同的 IP 地址。

我可以只用 jquery 来做到这一点（它可以像“显示时间是否是一小时的前 5 分钟”）？

如果不是，我的其他选择是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T10:15:17.200

您可以设置一个有效期为 60 分钟的 cookie，并检查该 cookie 是否仍然存在。如果不是，则再次显示您的模态。

[这里](https://github.com/carhartl/jquery-cookie)有一个不错的 jQuery Cookie 插件。

如果您没有将 cookie 的到期日期设置为 60 分钟，或者根本不可能，您可以将 cookie 的创建时间存储在 cookie 中，并检查该时间是否与当前时间相差 >= 60 分钟时间。如果是这样，您将显示模式并刷新 cookie 时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:14:49.910

您在 javascript 中有一个 Date() 对象。检查代码中的时间。如果它的前 5 分钟显示模式。否则不显示模态。

```
var date = new Date();
if(date.getMinutes()<=5)
{
   // display
}
else{
    // Dont display
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T10:26:02.277

这应该可以满足您的需求，但是您可能需要考虑异步重新加载内容，而不是始终关闭 document.ready()

```
<!DOCTYPE html>
<html>
<head>
<script>
function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
  {
  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
  x=x.replace(/^\s+|\s+$/g,"");
  if (x==c_name)
    {
    return unescape(y);
    }
  }
}

function setCookie(c_name,value,exminutes)
{
var exdate=new Date();
exdate.setMinutes(exdate.getMinutes() + exminutes);
var c_value=escape(value) + ((exminutes==null) ? "" : "; expires="+exdate.toUTCString());
document.cookie=c_name + "=" + c_value;
}

function checkCookie()
{
var lastload=getCookie("lastload");

if (lastload!=null && lastload!="")
  {
    // no need to do anything
  }
else 
  {
    // show / load modal
  }
  setCookie("lastload",1,60);
}
</script>
</head>
<body onload="checkCookie()">
</body>
</html> 
```

# python - Python：响应命令行提示

> ID：15761489
> 
> 赞同：15
> 
> 时间：2013-04-02T10:12:36.867
> 
> 标签：python, command-line, python-3.x, subprocess, command-prompt

我正在尝试使用 Python 通过命令行与另一个程序进行交互。我遇到的主要问题是一个具有多个后续提示的特定呼叫。最初，命令行调用询问项目的名称，然后继续询问我是否要查看项目的任何子文件夹。我需要按顺序对每一个回答y/n，不幸的是，每一个的答案都不是y或n。此外，如果不阅读各个提示，我无法知道问题的答案，因此我无法一次发送一个“y”或“n”块。

这是命令行调用：

**si viewproject**

输入命令后，命令行提示：

**输入项目名称：**

一个示例响应是：

**输入项目名称：c:/test.pj**

进入项目后提示如下：

**是否要递归到子项目 test_subprj.pj 中？[ynYN](n)**

在这一点上，我需要根据我是否需要该子项目来回复 ay 或 n。同样，对这个问题的回答取决于子项目。我需要能够阅读此提示中的子项目，以便用“y”或“n”响应它

目前我需要分别手动输入项目和每个y和n。我的目标是使用 Python 自动化这个过程。

有没有办法自动响应这些命令行提示？

# 现在的进展

## 子流程策略

```
 project_path = "c:/test.pj"

 with Popen(["si", "viewproject", "--project=" + project_path], 
             stdin=PIPE, stdout=PIPE, universal_newlines=True) as p:
     for line in p.stdout: 
         if line.startswith("Do you want"):
             answer = 'n'
         else:
             continue # skip it
         print(answer, file=p.stdin) # provide answer
         p.stdin.flush() 
```

此方法挂在 with Popen 语句之后。它永远不会出错，但永远不会进入或退出 for 语句并且永远不会完成。目前我将所有答案默认为“n”，但稍后将用逻辑替换。

## Winpexpect 策略

```
 import re
 import sys
 from functools import partial
 import winpexpect

 project_path = "c:/test.pj"

 p = winpexpect.winspawn('si viewproject --project=' + project_path)
 p.logfile = sys.stdout
 patterns = [re.compile('ynYN'), winpexpect.EOF]

 for found in iter(partial(p.expect, patterns), 1): # until EOF
     if found == 0:
         answer = 'n'
         p.sendline(answer) 
```

返回以下错误消息：

```
 Traceback (most recent call last):
   File "C:\Python33\lib\site-packages\winpexpect-1.5-py3.3.egg\winpexpect.py", line 541, in read_nonblocking
     handle, status, data = self.child_output.get(timeout=timeout)
   File "C:\Python33\lib\queue.py", line 175, in get
     raise Empty
 queue.Empty

 During handling of the above exception, another exception occurred:

 Traceback (most recent call last):
   File "C:\Python33\lib\site-packages\winpexpect-1.5-py3.3.egg\pexpect.py", line 1378, in expect_loop
     c = self.read_nonblocking (self.maxread, timeout)
   File "C:\Python33\lib\site-packages\winpexpect-1.5-py3.3.egg\winpexpect.py", line 543, in read_nonblocking
     raise TIMEOUT('Timeout exceeded in read_nonblocking().')
 pexpect.TIMEOUT: Timeout exceeded in read_nonblocking().

 During handling of the above exception, another exception occurred:

 Traceback (most recent call last):
   File "K:\eclipse_3.6.0\plugins\org.python.pydev_2.6.0.2012062818\pysrc\pydev_runfiles.py", line 432, in __get_module_from_str
     mod = __import__(modname)
   File "C:\workspace\Test_prj\Test_prj.py", line 19, in <module>
     for found in iter(partial(p.expect, patterns), 1): # until EOF
   File "C:\Python33\lib\site-packages\winpexpect-1.5-py3.3.egg\pexpect.py", line 1311, in expect
     return self.expect_list(compiled_pattern_list, timeout, searchwindowsize)
   File "C:\Python33\lib\site-packages\winpexpect-1.5-py3.3.egg\pexpect.py", line 1325, in expect_list
     return self.expect_loop(searcher_re(pattern_list), timeout, searchwindowsize)
   File "C:\Python33\lib\site-packages\winpexpect-1.5-py3.3.egg\pexpect.py", line 1409, in expect_loop
     raise TIMEOUT (str(e) + '\n' + str(self))
 pexpect.TIMEOUT: Timeout exceeded in read_nonblocking().
 <winpexpect.winspawn object at 0x0144AE50>
 version: 2.3 ($Revision: 399 $)
 command: si
 args: ['si', 'viewproject', '--project=c:/test.pj']
 searcher: searcher_re:
     0: re.compile("ynYN")
     1: EOF
 buffer (last 100 chars): 
 before (last 100 chars): 
 after: <class 'pexpect.TIMEOUT'>
 match: None
 match_index: None
 exitstatus: None
 flag_eof: False
 pid: 6448
 child_fd: 4
 closed: False
 timeout: 30
 delimiter: <class 'pexpect.EOF'>
 logfile: <_io.TextIOWrapper name='<stdout>' mode='w' encoding='Cp1252'>
 logfile_read: None
 logfile_send: None
 maxread: 2000
 ignorecase: False
 searchwindowsize: None
 delaybeforesend: 0.05
 delayafterclose: 0.1
 delayafterterminate: 0.1
 ERROR: Module: Test_prj could not be imported (file: C:\workspace\Test_prj\Test_prj.py). 
```

## 安装 Winpexpect

**懒人之道**

[安装分发](http://www.lfd.uci.edu/~gohlke/pythonlibs/#distribute)

[做这个](http://www.varunpant.com/posts/how-to-setup-easy_install-on-windows)

[安装 PyWin32](http://sourceforge.net/projects/pywin32/files/pywin32/Build%20218/)

[安装 Winpexpect](https://bitbucket.org/geertj/winpexpect/wiki/Home)

[可选：安装鼻子](https://nose.readthedocs.org/en/latest/)

[可选：安装 Pip](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pip)

**第一世界问题**

Python 对我来说是一门新语言，我之前从未安装过 Python 包。此外，Python 3.x 与其他版本的 Python 略有不同，这使得安装模块更像是一种冒险。

所以，为了帮助其他人获得一些甜蜜甜蜜的模块操作（并帮助那些更有知识的人看看我是否做错了什么）这里有一个即将成功的故事（希望）记录我如何获得和安装我的第一个模块。

**设置**

Python 允许第三方团体开发和分发扩展编程语言能力的模块。当然，有一种标准方法可以帮助第三方开发人员尽可能轻松地为最终用户提供模块。

对于 Python 3.x，分发模块的标准称为 Distutils。

以下是开发人员如何使用 Distutils： [分发 Python 模块](http://docs.python.org/3.2/distutils/index.html#distutils-index)

以下是最终用户如何使用 Distutils： [安装 Python 模块](http://docs.python.org/3.2/install/)

通常，在命令行中导航到下载模块的文件夹并运行“setup.py install”就足够了。

**但**

有时生活并不那么容易，您的安装可能仍然存在问题。事实上，你可能需要别的东西。例如，您可能会收到以下错误：

“ImportError “没有名为 Setuptools 的模块””

幸运的是，有一个解决方案： [Python 3: ImportError "No Module named Setuptools"](https://stackoverflow.com/questions/14426491/python-3-importerror-no-module-named-setuptools)

事实证明，并非所有东西都使用 distutils。一些软件包使用 setuptools。不幸的是，没有适用于 Python 3.x 的设置工具。相反，Python 3.x 使用的是 setuptools 的一个分支分发。

所以对于那些使用 Python 3.x 的人来说，这里是 Distribute：[Distribute](https://pypi.python.org/pypi/distribute)

对于使用 Python 2.x 的用户，这里是 Setuptools：[Setuptools](https://pypi.python.org/pypi/setuptools)

在分发的安装说明中，它说如下：“ `distribute_setup.py <http://python-distribute.org/distribute_setup.py>`使用您选择的 Python 解释器下载并执行它。”

它还说：“请注意，源版本中也提供了此文件。”

所以我下载了Distribute并将其保存到计算机上。将其保存到计算机后，我从源版本中运行了distribute_setup.py 并收到以下错误：

```
Downloading http://pypi.python.org/packages/source/d/distribute/distribute-0.6.36.tar.gz
Traceback (most recent call last):
  File "C:\Python33\lib\urllib\request.py", line 1252, in do_open
    h.request(req.get_method(), req.selector, req.data, headers)       File "C:\Python33\lib\http\client.py", line 1049, in request
    self._send_request(method, url, body, headers)
  File "C:\Python33\lib\http\client.py", line 1087, in _send_request
    self.endheaders(body)
  File "C:\Python33\lib\http\client.py", line 1045, in endheaders
    self._send_output(message_body)
  File "C:\Python33\lib\http\client.py", line 890, in _send_output
    self.send(msg)
  File "C:\Python33\lib\http\client.py", line 828, in send
    self.connect()
  File "C:\Python33\lib\http\client.py", line 806, in connect
    self.timeout, self.source_address)
  File "C:\Python33\lib\socket.py", line 406, in create_connection
    for res in getaddrinfo(host, port, 0, SOCK_STREAM):
socket.gaierror: [Errno 11001] getaddrinfo failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\workspace\PythonTest\distribute_setup.py", line 553, in <module>
    sys.exit(main())
  File "C:\workspace\PythonTest\distribute_setup.py", line 549, in main
    tarball = download_setuptools(download_base=options.download_base)
  File "C:\workspace\PythonTest\distribute_setup.py", line 204, in download_setuptools
    src = urlopen(url)
  File "C:\Python33\lib\urllib\request.py", line 160, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Python33\lib\urllib\request.py", line 473, in open
    response = self._open(req, data)
  File "C:\Python33\lib\urllib\request.py", line 491, in _open
    '_open', req)
  File "C:\Python33\lib\urllib\request.py", line 451, in _call_chain
    result = func(*args)
  File "C:\Python33\lib\urllib\request.py", line 1272, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Python33\lib\urllib\request.py", line 1255, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [Errno 11001] getaddrinfo failed> 
```

那不好！老实说，我仍然不知道该错误来自何处或为什么会发生。

无论如何，然后我发现以下站点运行了一个 .exe 来安装分发以及 pip。

[安装分发](http://www.lfd.uci.edu/~gohlke/pythonlibs/#distribute)

[安装点](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pip)

所以我安装了这些，然后使用以下站点设置我的计算机以更轻松地使用 easy_install：[设置 Easy Install Made Easy](http://www.varunpant.com/posts/how-to-setup-easy_install-on-windows)

一旦我得到这个工作，我就安装了鼻子：[鼻子](https://nose.readthedocs.org/en/latest/)

我得到nose的原因是因为[Winpexpect网站](https://bitbucket.org/geertj/winpexpect/wiki/Home)说：“WinPexpect包括单元测试。要运行测试，你需要nose。使用以下命令运行测试：

$ python setup.py 测试"

嗯，听起来不错:)。现在我只是希望我知道在哪里运行该测试。我知道，如果您手动安装，则使用 setup.py install 命令，因此在线压缩目录中肯定会有 setup.py。为了查看这是否正确，我下载并保存了 winpexpect 文件，提取信息，通过命令行导航到该文件，然后运行 ​​setup.py 测试。

结果如下：

```
running test
running build_py
running egg_info
creating c:\documents and settings\slz1fh\desktop\winpexpect\geertj-winpexpect-76df3cfcb143\build\lib\winpexpect.egg-info
writing c:\documents and settings\slz1fh\desktop\winpexpect\geertj-winpexpect-76df3cfcb143\build\lib\winpexpect.egg-info\PKG-INFO
writing dependency_links to c:\documents and settings\slz1fh\desktop\winpexpect\geertj-winpexpect-76df3cfcb143\build\lib\winpexpect.egg-info\dependency_links.txt
writing top-level names to c:\documents and settings\slz1fh\desktop\winpexpect\geertj-winpexpect-76df3cfcb143\build\lib\winpexpect.egg-info\top_level.txt
writing requirements to c:\documents and settings\slz1fh\desktop\winpexpect\geertj-winpexpect-76df3cfcb143\build\lib\winpexpect.egg-info\requires.txt
writing manifest file 'c:\documents and settings\slz1fh\desktop\winpexpect\geertj-winpexpect-76df3cfcb143\build\lib\winpexpect.egg-info\SOURCES.txt'
reading manifest file 'c:\documents and settings\slz1fh\desktop\winpexpect\geertj-winpexpect-76df3cfcb143\build\lib\winpexpect.egg-info\SOURCES.txt'
writing manifest file 'c:\documents and settings\slz1fh\desktop\winpexpect\geertj-winpexpect-76df3cfcb143\build\lib\winpexpect.egg-info\SOURCES.txt'
running build_ext
Traceback (most recent call last):
  File "C:\Documents and Settings\SLZ1FH\Desktop\winpexpect\geertj-winpexpect-76df3cfcb143\setup.py", line 35, in <module>
    use_2to3 = True
  File "C:\Python33\lib\distutils\core.py", line 148, in setup
    dist.run_commands()
  File "C:\Python33\lib\distutils\dist.py", line 917, in run_commands
    self.run_command(cmd)
  File "C:\Python33\lib\distutils\dist.py", line 936, in run_command
    cmd_obj.run()
  File "C:\Python33\lib\site-packages\distribute-0.6.36-py3.3.egg\setuptools\command\test.py", line 138, in run
    self.with_project_on_sys_path(self.run_tests)
  File "C:\Python33\lib\site-packages\distribute-0.6.36-py3.3.egg\setuptools\command\test.py", line 118, in with_project_on_sys_path
    func()
  File "C:\Python33\lib\site-packages\distribute-0.6.36-py3.3.egg\setuptools\command\test.py", line 164, in run_tests
    testLoader = cks
  File "C:\Python33\lib\unittest\main.py", line 124, in __init__
    self.parseArgs(argv)
  File "C:\Python33\lib\unittest\main.py", line 168, in parseArgs
    self.createTests()
  File "C:\Python33\lib\unittest\main.py", line 175, in createTests
    self.module)
  File "C:\Python33\lib\unittest\loader.py", line 137, in loadTestsFromNames
    suites = [self.loadTestsFromName(name, module) for name in names]
  File "C:\Python33\lib\unittest\loader.py", line 137, in <listcomp>
    suites = [self.loadTestsFromName(name, module) for name in names]
  File "C:\Python33\lib\unittest\loader.py", line 96, in loadTestsFromName
    module = __import__('.'.join(parts_copy))
  File "C:\Python33\lib\site-packages\nose-1.3.0-py3.3.egg\nose\__init__.py", line 1, in <module>
    from nose.core import collector, main, run, run_exit, runmodule
  File "C:\Python33\lib\site-packages\nose-1.3.0-py3.3.egg\nose\core.py", line 143
    print "%s version %s" % (os.path.basename(sys.argv[0]), __version__)
                    ^
SyntaxError: invalid syntax 
```

好的，所以 Python 3.3 版本的 Nose 包含 Python 3.3 的无效语法？

print "%s version %s" % (os.path.basename(sys.argv[0]), **version** )...

肯定应该有括号......这让我怀疑鼻子是否真的可以在这里工作，因为它显然是为早期版本的 Python 制作的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T08:32:34.340

在您提到的评论中，它`xx viewproject < answers.txt > output.txt`有效但您不能使用它，因为答案取决于子流程的输出。

通常可以使用[`pexpect`](https://pypi.python.org/pypi/pexpect/)类似模块，例如(for Windows)。[`winpexpect`](https://bitbucket.org/geertj/winpexpect/wiki/Home)就像是：

```
import re
import sys
from functools import partial
from winpexpect import EOF, winspawn as spawn

p = spawn('xx viewproject')
p.logfile = sys.stdout
patterns = ['the project:', re.escape('? [ynYN](n)'), EOF]
for found in iter(partial(p.expect, patterns), 2): # until EOF
    if found == 0:
        p.sendline(project_name)
    elif found == 1:
        filename = get_filename_from_prompt(p.before) # a regex could be used
        answer = yes_or_no_from_subproject.get(filename, 'no') # a dict
        p.sendline(answer) 
```

如果提示以换行符终止（并且子进程不缓冲它们）；`subprocess`您可以直接使用模块逐行阅读：

```
from subprocess import Popen, PIPE

with Popen(["xx", "viewproject"], stdin=PIPE, stdout=PIPE, 
           universal_newlines=True) as p:
    for line in p.stdout: 
        if line.startswith("Please enter the name of the project"):
            answer = project_name
        elif line.startswith("Would you like to recurse into the subproject"):
            filename = get_filename_from_prompt(line) # a regex could be used
            answer = yes_or_no_from_subproject.get(filename, 'n') # a dict
        else:
            continue # skip it
        print(answer, file=p.stdin) # provide answer
        p.stdin.flush() 
```

要测试您可以从`xx`using中读取一些内容`subprocess`：

```
from subprocess import Popen, PIPE, STDOUT

with Popen(["xx", "viewproject"], bufsize=0,
           stdin=PIPE, stdout=PIPE, stderr=STDOUT) as p:
    print(repr(p.stdout.read(1))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T10:24:50.440

是的，首先您可以通过以下方式将子流程创建为对象：

```
p = subprocess.Popen('xx viewproject', shell=True, stdin=subprocess.PIPE, 
                      stdout=subprocess.PIPE, universal_newlines=True) 
```

然后您将拥有[`communicate()`](http://docs.python.org/3.2/library/subprocess.html#subprocess.Popen.communicate)可用的方法，例如：

```
newline = os.linesep # [1]
commands = ['y', 'n', 'y', 'n', 'y']
p.communicate( newline.join( commands)) 
```

^(1 -[`os.linesep`](http://docs.python.org/3.2/library/os.html#os.linesep))

它将一次发送所有答案（希望它就足够了），每次都依赖于相同的问题顺序。

您也可以尝试解析[`p.stdout`](http://docs.python.org/3.2/library/subprocess.html#subprocess.Popen.stdout)然后写入[`p.stdin`](http://docs.python.org/3.2/library/subprocess.html#subprocess.Popen.stdin)，但是当一个缓冲区在等待另一个缓冲区时已满时，这可能会导致死锁，因此请注意这一点。幸运的是，谷歌上有[一些复杂的例子](http://stefaanlippens.net/python-asynchronous-subprocess-pipe-reading)。

简单的版本是：

```
p = Popen(...)
line = p.stdout.readline() # At this point, if child process will wait for stdin
                           # you have a deadlock on your hands
parse_line( line)
p.stdin.write( newline.join( commands).encode( 'utf-8')) 
```

我也会考虑重写：

```
p = subprocess.Popen('si viewproject --project=d:/Projects/test.pj', shell=True, 
                      stdin=subprocess.PIPE, stdout=subprocess.PIPE) 
```

至：

```
p = subprocess.Popen( ['si', 'viewproject', '--project=d:/Projects/test.pj'],
                      shell=False, stdin=subprocess.PIPE, stdout=subprocess.PIPE) 
```

除非您明确需要 Shell 调用。

# jsf - p:message 不显示 p:fileUpload

> ID：15761491
> 
> 赞同：0
> 
> 时间：2013-04-02T10:12:37.477
> 
> 标签：jsf, jsf-2, primefaces, dialog

`p:fileUpload`如果用户没有`p:message`选择任何文件，它可以显示 requiredMessage 。

我试图展示`p:message`但没有成功。以下代码我尝试过。

```
<h:form>
      <p:dialog id="userFileImportDailog" widgetVar="userFileImport"
                width="600" height="120" modal="true" header="User File Import">

         <p:fileUpload id="userFileUploader"  mode="advanced" sizeLimit="100000" 
                       auto="true" required="true"
                       requiredMessage="#{msgs['validation.requiredMsg.label']}"
                       allowTypes="/(\.|\/)(csv)$/" />
         <p:message for ="userFileUploader"  id="userFileUploaderMsg"/>
                        <br/>

         <p:commandLink id="btnFileSave" actionListener="#{userController.saveUserImports}"
                        update=":userRightPaneForm :header:messages userFileUploaderMsg"
                        styleClass="saveButtonLnk"/>     
  </p:dialog>
</h:form> 
```

我如何显示所需的消息`p:fileUpload`？

# objective-c - 如何从正在运行的（uiviewcontroller）应用程序启动 cocos2d 场景

> ID：15761497
> 
> 赞同：2
> 
> 时间：2013-04-02T10:13:03.967
> 
> 标签：objective-c, cocos2d-iphone, scene

因为到目前为止我使用整个 cocos2d 进行了游戏，并且我第一次使用负责启动游戏场景的 UIViewController 的项目工作，我想知道我该怎么做，因为 appDelegate 是从一个普通的 UIViewController，如何在按钮上设置方法来启动游戏（例如游戏的第一个场景）？我一直在寻找关于这个的例子或讨论，但我没有找到任何东西，我看到的每个例子都是在第一次调用时从 appDelegate 开始游戏场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T12:28:27.957

只需导入您的 cocos2d layer.h 和 layer.m 文件并从视图控制器调用使用以下代码：-

```
if( ! [CCDirector setDirectorType:kCCDirectorTypeDisplayLink] )
        [CCDirector setDirectorType:kCCDirectorTypeDefault];

    CCDirector *director = [CCDirector sharedDirector];

    EAGLView *glView = [EAGLView viewWithFrame:[self.view bounds]
    pixelFormat:kEAGLColorFormatRGB565 depthFormat:0];

    [director setOpenGLView:glView];

    [director setDeviceOrientation:kCCDeviceOrientationLandscapeLeft];

    [director setAnimationInterval:1.0/60];
    [director setDisplayFPS:YES];

    [self setView:glView];

    [CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];

    [[CCDirector sharedDirector] runWithScene: [HelloWorldLayer scene]]; 
```

# ios - 更改方向时在滚动视图中显示索引图像的校正

> ID：15761499
> 
> 赞同：0
> 
> 时间：2013-04-02T10:13:09.160
> 
> 标签：ios, scrollview

我的应用支持两种方向模式（横向和纵向）。我在 scrollView 中有 4 个图像，我的问题是当我更改为横向模式后，当我在图像索引 1 处作为纵向时，它总是在索引 0 处显示图像。所以我想通过显示与索引对应的图像来解决这个问题Land <-> Port，请给出想法或一些代码。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:44:30.060

我使用这种方法进行分页`UIScrollView`...

```
// Delegate method
-(void) scrollViewDidScroll:(UIScrollView *)scrollView {

    // Store current position (the offset by half the view is to be more accurate when paging)
    curPos = (scrollView.contentOffset.x + scrollView.bounds.size.width/2) / scrollView.bounds.size.width;

}

-(void) viewWillLayoutSubviews {
    [super viewWillLayoutSubviews];

    // Scroll back to the current item
    scroll.contentOffset = CGPointMake(curPos * scroll.bounds.size.width, 0);

} 
```

那么你所需要的只是`int curPos`在你的班级标题中......

# jquery - 滚动冲突时的jQuery淡出

> ID：15761500
> 
> 赞同：1
> 
> 时间：2013-04-02T10:13:18.823
> 
> 标签：jquery, debugging, scroll

我是 jQuery 的新手，所以我在继续学习。

在我正在创建的网站上，有 2 个功能似乎相互冲突：第一个是当用户开始滚动时网站的标题会淡出，第二个是用于在页面上的锚点之间平滑滚动。第二个脚本使淡出脚本即使没有用户滚动也会立即运行。

这是一个显示这个想法的小提琴：http: [//jsfiddle.net/Mvf67/284/](http://jsfiddle.net/Mvf67/284/)

这是代码：

```
// fade out
$(document).ready(function () {
    $(window).scroll(function () {
        $(".title").fadeOut(1000);
    });
});

// smooth scroll
$(document).ready(function () {
    function filterPath(string) {
        return string.replace(/^\//, '')
        .replace(/(index|default).[a-zA-Z]{3,4}$/, '')
        .replace(/\/$/, '');
    }
    var locationPath = filterPath(location.pathname);
    var scrollElem = scrollableElement('html', 'body');

    $('a[href*=#]').each(function () {
        var thisPath = filterPath(this.pathname) || locationPath;
        if (locationPath == thisPath && (location.hostname == this.hostname || !this.hostname) && this.hash.replace(/#/, '')) {
            var $target = $(this.hash),
            target = this.hash;
            if (target) {
                 var targetOffset = $target.offset().top;
                 $(this).click(function (event) {
                     event.preventDefault();
                     $(scrollElem).animate({
                         scrollTop: targetOffset
                     }, 1500, function () {
                         location.hash = target;
                     });
                 });
            }
       }
  });

  function scrollableElement(els) {
      for (var i = 0, argLength = arguments.length; i < argLength; i++) {
          var el = arguments[i],
          $scrollElement = $(el);
          if ($scrollElement.scrollTop() > 0) {
              return el;
          } else {
              $scrollElement.scrollTop(1);
              var isScrollable = $scrollElement.scrollTop() > 0;
              $scrollElement.scrollTop(0);
              if (isScrollable) {
                  return el;
              }
          }
      }
      return [];
   }

}); 
```

任何人都可以帮忙吗？

提前致谢。

*编辑：小提琴链接已修复*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:22:28.757

只保留一个`document.ready`功能而不是两个

# iphone - 显示演示页面后在应用内购买

> ID：15761508
> 
> 赞同：0
> 
> 时间：2013-04-02T10:13:31.503
> 
> 标签：iphone, ios, objective-c, ios5, in-app-purchase

我正在开发一个故事书应用程序。客户希望在其中显示 2 页作为免费演示，并查看他需要购买该书的剩余其他页面。有人请告诉我苹果是否允许这样做，因为我刚刚听说苹果不允许这样做。

**请大家帮帮我。*我从未在 In App Purcahse 上工作过。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:19:40.477

只要该书是数字购买并且不能从应用程序中取出，它就可以作为应用内购买。

至于最后一行，请参阅相关的[编程指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction/Introduction.html)。

# jquery - jQuery 在 Firefox 上工作，但在 Chrome 上不工作

> ID：15761509
> 
> 赞同：1
> 
> 时间：2013-04-02T10:13:33.967
> 
> 标签：jquery, html, google-chrome, firefox

我已经坚持了几天了。我正在开发一个网站，并且一直在 Firefox 上对其进行测试，但在 Firefox 上运行的不是在 Chrome 或 Chrome、Firefox 或 Dolphin HD 等移动浏览器上运行。

这是 jsFiddle 中的代码：http: [//jsfiddle.net/5QMJQ/10/](http://jsfiddle.net/5QMJQ/10/)

它所做的是获取在前五个选择中选择的数据并将其添加到最后一个。在 Firefox 中很好，但在 Chrome 中它不会进入函数。而且我不知道还能做什么。

```
$(document).ready(function () {

     console.log('1 - Working');
     // Función que va añadiendo o quitando elementos al campo "Oficial responsable"
     // del equipo local dependiendo de los campos anteriores.
     $("#equipo_local select option").click(function () {

         console.log('2 - Working');

         ...
     });
 }); 
```

console.log('1 - Working'): FF 和 Chrome 显示这个。

console.log('2 - Working')：只有桌面 FF 显示这个。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T10:16:33.760

我不认为点击事件对选项有效。而是尝试 .change 选择？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T10:16:47.563

我怀疑这与如何在元素`click`上处理事件有很大关系。`option`

如果您将处理程序从`click`on更改`option`为`change`on `select`，您会发现它可以正常工作。

```
$("#equipo_local select").change(function () { 
```

[http://jsfiddle.net/5QMJQ/11/](http://jsfiddle.net/5QMJQ/11/)

# wix - Wix 条件和预处理器变量

> ID：15761514
> 
> 赞同：3
> 
> 时间：2013-04-02T10:13:47.763
> 
> 标签：wix

我想根据是否定义了值来更改 Wix 变量的值。在我的 wixproj 中，我有：

```
 <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'TFS Live|x86' ">
    <OutputPath>bin\$(Platform)\$(Configuration)\</OutputPath>
    <IntermediateOutputPath>obj\$(Platform)\$(Configuration)\</IntermediateOutputPath>
    <WixVariables>LIVE</WixVariables>
    <DefineConstants>LIVE</DefineConstants>
  </PropertyGroup> 
```

...在我的 wxs 中，我有：

```
<?ifdef LIVE ?>
<?define binaryPath = "C:\Builds\5\IT Aerodynamics\RBT.TestSpec.LiveRelease\Binaries" ?>
<?else?>
<?define binaryPath = "C:\Builds\5\IT Aerodynamics\RBT.TestSpec.CI\Binaries" ?>
<?endif?> 
```

...但是当我构建适当的配置时， ifdef 永远不会触发。我总是得到第二个值`binaryPath`。关于我做错了什么的任何建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T13:21:46.590

That code works for me. One thing to check is that you don't have another `DefineConstants` MSBuild Property later in the .wixproj that doesn't look like:

```
<DefineConstants>$(DefineConstants);OtherVars=Value</DefineConstants> 
```

The default .wixproj template creates projects where the `Debug` preprocessor variable is defined like:

```
<DefineConstants>Debug</DefineConstants> 
```

And that will overwrite `DefineConstants` defined higher in the project for debug builds. Otherwise, everything looks fine.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-05T14:49:28.240

One more thing, in addition to the @RobMensching answer.

If you build your solution using command line and msbuild, and if you define your DefineConstants in that build command, all your defines in projects will be overridden with those defined in command line:

```
msbuild Your.sln /t:Build
        /p:Configuration=TFSLive
        /p:Platform=x86
        /p:DefineConstants=Your;Defines;Here 
```

# jquery - jQuery：在消息框中显示 ajax 返回的消息

> ID：15761526
> 
> 赞同：0
> 
> 时间：2013-04-02T10:14:24.680
> 
> 标签：jquery, ajax

我曾经使用跟随 AJAX 来使用`content`返回的消息更新 div。现在我想在弹出的消息框中显示消息，而用户将单击一个按钮来关闭该框。有没有一种**简单**的方法和方法？谢谢。

```
$(document).ready(function() { 
  $('#myForm').ajaxForm(function(message) {
    $('#content').html(message);
    return false;
  }); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:32:09.243

```
$(document).ready(function() { 
  $('#myForm').ajaxForm(function(message) {
    //$('#content').html(message);
    alert(message);
    return false;
  }); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:08:36.747

在页面上创建一个 div。保持它最初不显示...然后填充数据并显示它

```
<div id="popup" class="popup">
  This a vertically and horizontally centered popup.
</div>

<style type="text/css">
  .popup {
    width:200px;
    height:100px;
    position:absolute;
    top:50%;
    left:50%;
    margin:-50px 0 0 -100px; /* [-(height/2)px 0 0 -(width/2)px] */
    display:none;
  }
</style>

  $(document).ready(function() { 
      $('#myForm').ajaxForm(function(message) {

        $('.popup').html(message);
        $('.popup').show()
      }); 
    }); 
```

# python - 使用 win32com 的 Python、Excel 和图表

> ID：15761528
> 
> 赞同：3
> 
> 时间：2013-04-02T10:14:28.583
> 
> 标签：python, excel, charts, win32com

Python 和 MS Excel 问题 - 使用 win32com，我可以在 Excel 中创建图表，但无法在工作表中移动它。我在网上找到了生成图表的代码：

```
import win32com.client
from win32com.client import constants as c

xl = win32com.client.gencache.EnsureDispatch('Excel.Application')
xl.Visible = True
wb = xl.Workbooks.Add()
ws = xl.ActiveSheet
ws.Range('A1').FormulaR1C1 = 'X'
ws.Range('B1').FormulaR1C1 = 'Y'
ws.Range('A2').FormulaR1C1 = 1
ws.Range('A3').FormulaR1C1 = 2
ws.Range('A4').FormulaR1C1 = 3
ws.Range('B2').FormulaR1C1 = 4
ws.Range('B3').FormulaR1C1 = 5
ws.Range('B4').FormulaR1C1 = 6
#ws.Range('A1:B4').Select()
ch = ws.Shapes.AddChart().Select()
xl.ActiveChart.ChartType = c.xlXYScatterLines
xl.ActiveChart.SetSourceData(Source=ws.Range("A1:B4"))
#ch.Location(10,10) # something like this? 
```

如何在工作表中移动图表？ ![在此处输入图像描述](https://i.stack.imgur.com/vdFHV.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:57:11.163

您可以在创建图表时指定位置，`expression.AddChart(Type, Left, Top, Width, Height)`请参见[此处](http://msdn.microsoft.com/en-us/library/office/microsoft.office.interop.excel.shapes.addchart%28v=office.14%29.aspx)。

如果您不想将图表嵌入工作表中，您可以创建图表工作表：

`wb.Worksheets.Add(Type:=xlChart)`

警告：Microsoft.interop.Excel 不是 win32com，但应该可以工作。

# java - java.util.Abstractlist 中的 Java ConcurrentModificationException

> ID：15761529
> 
> 赞同：2
> 
> 时间：2013-04-02T10:14:28.710
> 
> 标签：java, exception

我在 Servlet 类中有以下代码，我得到了

```
ConcurrentModificationException checkforcomodification at java.util.Abstractlist 
```

在 `for (Projects persist: projectList) {`

我该如何解决这个问题以及导致此异常的原因

**代码片段**

```
List<Projects> projectList = new ArrayList<Projects>();
Projects project = new Projects();
projectList.add(project);
for (Projects persist: projectList) { // error in this line
persist.setPNo(pNo);
persist.setExpirtyDate(eDate;

myDAO.persistProjects(projectList);
projectList.clear();        
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:20:41.080

错误是您正在清除循环内的列表`projectList.clear();`。

for 循环中的最后一行是抛出错误而不是第一行。

可能您可以做的是在处理循环后清除列表

```
List<Projects> projectList = new ArrayList<Projects>();
Projects project = new Projects();
projectList.add(project);
for (Projects persist: projectList) { // error in this line
    persist.setPNo(pNo);
    persist.setExpirtyDate(eDate);

}
myDAO.persistProjects(projectList);
projectList.clear(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T10:21:29.323

你真的需要吗

```
myDAO.persistProjects(projectList);
projectList.clear(); 
```

在循环内？迭代时不能修改列表。进行修改，然后在循环清除和/或保留列表之后

可能您的代码必须是：

```
List<Projects> projectList = new ArrayList<Projects>();
Projects project = new Projects();
projectList.add(project);
for (Projects persist: projectList) {
  persist.setPNo(pNo);
  persist.setExpirtyDate(eDate;
}
myDAO.persistProjects(projectList); 
```

`projectList.clear();`除非您将列表重用于其他目的，否则应该不需要，但如果需要，请始终在循环之外使用它。

经验法则是永远不要修改您正在迭代的列表，您可以使用迭代器来规避它，但通常不需要它并添加大量样板代码，如果您需要删除一些对象，通常最好创建另一个列表要删除的元素并在循环后删除整个列表，它更具可读性并避免任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T10:26:08.800

移出循环`projectList.clear();`。**`for`**

查看[ConcurrentModificationException](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ConcurrentModificationException.html)的 API 详细信息，了解为什么这是一个问题的更多详细信息。

> 如果线程在使用快速失败迭代器迭代集合时直接修改集合，则迭代器将抛出此异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T10:26:44.930

如果 list 的结构通过另一个迭代器或另一个线程修改，则在迭代时，它将抛出`ConcurrentModificationException`.

您在迭代时删除了所有元素，`List`这确保了迭代器**的快速失败**行为，并`ConcurrentModificationException`随着列表结构的修改而抛出。

# vba - VBA工作表更改事件绕过？

> ID：15761530
> 
> 赞同：17
> 
> 时间：2013-04-02T10:14:30.473
> 
> 标签：vba, excel, worksheet

我正在修复电子表格。程序员为每张工作表制作了一个宏，以便在工作表更改时触发。这很好，因为它会在添加新信息时对工作表详细信息进行颜色协调，所以我想保留此功能。

我编写了一个对数据进行排序并允许删除和添加新员工的宏，这与更改事件宏相冲突，如果它们都可操作，则会导致我的宏出现错误。

问：有没有办法在宏运行时绕过工作表更改事件，然后在宏完成后再次将其放置到位？

这是更改事件的代码。

```
Private Sub Worksheet_Change(ByVal target As Excel.Range, skip_update As Boolean)
If skip_update = False Then
    Call PaintCell(target)
End If
End Sub 
```

当我引用工作表或范围时，我的宏出现错误。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-02T13:03:33.230

我认为您想要对象的`EnableEvents`属性`Application`。当您设置`EnableEvents`为 False 时，您的代码所做的任何事情都不会触发任何事件，并且其他事件代码都不会运行。例如，如果您的代码更改了一个单元格，它通常会触发 Change 事件或 SheetChange 事件。但是，如果你像这样构造它

```
Application.EnableEvents = False
    Sheet1.Range("A1").Value = "new"
Application.EnableEvents = True 
```

然后更改 A1 不会触发任何事件。

有时让您的代码触发事件代码是有益的，有时则不然。`EnableEvents`当你想阻止它时使用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-08-18T01:15:11.720

这是对@Dick Kusleika 答案的重要修改。

关闭 EnableEvents 设置时，最好包含错误处理以重新打开 EnableEvents。如果您不这样做并且脚本抛出错误，则更改事件触发器（您的脚本）将停止工作，直到您手动重新打开 EnableEvents。

理想情况下，您应该在任何重新触发您的更改事件的代码之前立即放置以下行。第一行告诉 VBA 在遇到错误时转到名为“enableEventsOn”的标签。第二行绕过更改事件。

```
On Error Goto enableEventsOn:
Application.EnableEvents = False 
```

然后将此代码紧跟在重新触发更改事件的代码之后。这将重新打开更改事件触发器并将正常的错误处理返回给您的脚本。

```
Application.EnableEvents = True
On Error Goto 0 
```

最后，将此代码放在脚本的末尾。这是上面提到的标签。如果在“On Error Goto enableEventsOn:”和“On Error Goto 0”之间遇到错误，则脚本将转到此处并重新打开 EnableEvents，使其准备好在下次更改工作表时启动脚本。

```
EnableEventsOn:
Application.EnableEvents = True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T10:24:37.930

在我个人看来太冒险了。

我会使用一个名为“skip_update”的变量，它在每个宏的开头设置为“True”，在它结束时设置为false。

例如：

```
dim skip_update as Boolean = False

sub auto_macro_when_modify()
   if skip_update == True then
      exit sub ' NO CHANGE !
   end if
end sub

sub other_macro
    skip_update = True
    ' ( do stuff)
    skip_update = False
end sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-29T15:20:45.107

您可以在执行将触发事件例程更改的输入时按住 CTRL 键。我有一个例程来对给定列中选定范围内的值求和。如果我将光标从第 1 行拖到第 5 行，突出显示它们，则这些总和将保存到剪贴板。此列中单元格中的任何条目都会触发该例程。如果我在执行预期操作或列中单元格中的任何条目时按住 CTRL 键，则不会启动例程。可能不适用于更复杂的 ChangeEvent 场景。

# c# - 实体框架枚举 SqlQuery 结果

> ID：15761531
> 
> 赞同：19
> 
> 时间：2013-04-02T10:14:33.977
> 
> 标签：c#, enumeration, entity-framework-4.3

尝试查看 SqlQuery 的结果时出现奇怪的错误：

```
var sql = "SELECT @someParam";
var someParamSqlParameter = new SqlParameter("someParam", "Some Value");
var result = _dbContext.SqlQuery<string>(sql, someParamSqlParameter);
var containsAnyElements = result.Any(); 
```

因此，当调试器位于最后一行并且当我尝试扩展结果视图时，**它**显示我预期`result("Some Value")`但在调用最后一行时出现异常

> *“SqlParameter 已包含在另一个 SqlParameterCollection 中。”。*

看起来当我尝试打开结果的结果视图时，**它**会再次调用此查询。如果这种行为正确？如果是，请解释为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-02T10:26:29.263

> 看起来当我尝试打开结果的结果视图时，它会再次调用此查询

你说得对——你看到了[`Deferred Execution`](http://msdn.microsoft.com/en-us/library/bb738633.aspx)

`Database.SqlQuery<T>`返回一个`IEnumerable<T>`实际上是一个类型的对象：

```
System.Data.Entity.Internal.InternalSqlQuery<T> 
```

所以你的`result`对象实际上只是对查询的描述——而不是查询结果。

只有当您尝试查看查询结果时，才会在数据库上实际执行 SQL 查询。

您看到的是这种情况发生了两次：一次是在您的代码调用`.Any()`时，一次是在调试器枚举结果集时。

* * *

您可以通过明确告诉 EF 何时运行查询来解决此问题`.ToList()`：

```
var result = _dbContext.SqlQuery<string>(sql, someParamSqlParameter).ToList(); 
```

的类型`result`是 now `List<string>`，它包含您的查询结果。

# java - 封装类和使类更安全的区别

> ID：15761535
> 
> 赞同：2
> 
> 时间：2013-04-02T10:14:39.540
> 
> 标签：java, oop

我想知道封装类和使类更安全之间的区别。封装提供了与类通信的抽象接口层，对外界隐藏了类的内部工作，同时安全性也具有类似的属性。我们是否可以说每个封装的类都是安全的，但安全类不一定要封装好？请帮助我了解这两者之间的区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:57:15.383

## 我们可以说每个封装的类都是安全的吗？

不，但封装是迈向安全的*第一步。*

把你的班级想象成一栋有几十扇窗户的建筑。

![在此处输入图像描述](https://i.stack.imgur.com/bKVkh.png)

为了完全保护建筑物，您必须覆盖所有开口：不仅是窗户，还有门、屋顶和后门。通过封装，您可以保护您的实现不被直接访问，从而关闭**其中一个**窗口，但是......还有几十个。

正如许多评论中提到的，安全性是一个非常广泛的术语。你必须做很多事情来声明你的类（和/或应用程序）是安全的。你可以从这些开始：

*   [如何保护已编译的 Java 类？](https://stackoverflow.com/questions/2443542/how-to-protect-compiled-java-classes)
*   [安全编码](http://www.oracle.com/technetwork/java/seccodeguide-139067.html)

## 安全类是否需要被封装？

不会。但是这很难做到，因为在大多数设计模式中都会有某种程度的封装。在这种情况下，您可能会在 Java*之外*实现安全性（例如，借助操作系统或其他第三方工具）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:22:20.783

类应该小而简单。这就是我所说的安全类的意思。

为了提高类的可靠性，应该限制其他开发人员对其成员和算法的访问。为了在 OOP 世界中做到这一点，开发人员使用一种称为封装的机制。通过将可见性设置为私有来限制对类元素的访问，我们隐藏了代码如何处理任务的细节。这提高了安全性，因为其他开发人员无法在代码执行期间修改数据。

从我的角度来看，封装和“使类更安全”之间没有区别。通过使用封装，您的类在定义上更加安全。您可以通过引入诸如不可变之类的概念并使用关键字“final”使您的类接近继承机制来扩展这种安全性。

但这更像是一个维基答案和问题，所以没有好的答案。

强烈感谢任何评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:27:33.843

封装就是将你的逻辑封装到不同的类中，并在你的代码中调用。

当我们在一个团队中工作时，我们会这样做——一个成员会说调用我的这个方法，你的工作就会完成。. 调用者不必担心执行。

“简单地说，将你的逻辑从你的类中取出并通过一种方法调用它”。

但是要安全地实施它

使用访问修饰符

和最终变量。根据您的需要。

# qtp - 从动作数据表中检索值 - QTP

> ID：15761540
> 
> 赞同：2
> 
> 时间：2013-04-02T10:14:43.863
> 
> 标签：qtp

在 QTP 中，据说动作数据表是本地的，其中的值只能访问特定动作中的代码（如 Action1 数据表中的值只能由 Action1 脚本访问），这就是我们必须使用全局表的原因。

但是我遇到了下面的函数，它会从不同的动作表中获取数据，比如动作 1 数据表中的数据和动作 2 中的代码。

如果这是可行的，任何人都可以告诉我吗？如果可以，为什么普遍认为 Action 数据表中的值是本地的，并且只能从任何地方访问 Global 数据表中的值？

```
DataTable.Getsheet("Action1").GetParameter(A).Value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T16:14:01.213

默认情况下，本地和全局数据表与当前**操作有关系。**您可以在操作的第一行发出这些命令，您将获得值：

*   DataTable.GlobalSheet.Name
*   DataTable.LocalSheet.Name

但是，HP 不会阻止您访问所需的任何工作表：仅存在**ImportSheet**函数就强调了这样一个事实，即如果 2 个表不够用，您可以使用外部表。使用另一个动作的工作表与使用导入的 excel 文件中的工作表没有什么不同。

![在此处输入图像描述](https://i.stack.imgur.com/0mbtO.png)

您说得有道理，将本地数据表的访问权限仅限于拥有的**Action**是有意义的，就像局部变量仅限于定义它们的函数一样。但请记住，Action 的 DataSheet 是一个完全独立的对象。它唯一不可撤销的关系是与其父 excel 文件。这可能就是惠普没有设置这种限制的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:01:35.840

看起来你可以做到这一点，但是，你为什么也想要呢？制作一个脚本并从中调用您的操作不是更容易吗？这样，您可以只引用您想要使用的操作数据表的哪一行。

例如..

RunAction "Action1 [Action1]","1-1"

RunAction "Action2 [Action2]","1-1"

对于尝试使用您的测试脚本的其他任何人来说，这似乎相当干净且不那么混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-07T23:41:53.227

Datatable("columnname","tabname") 可以从任何软件访问。

示例：Struser = datatable("user","Global") 等于 Struser = datatable("user",dtGlobalSheet)

# c# - 通过cs代码动态html代码（c#）

> ID：15761552
> 
> 赞同：0
> 
> 时间：2013-04-02T10:15:31.130
> 
> 标签：c#, asp.net, dataset, computer-science

我正在尝试通过使用数据集中的 src 来通过 cs 代码制作动态 html 代码。（数据集中的每个项目都是另一张图片的 src）。这是我第一次尝试做这样的事情并且它不起作用，任何提示都会有帮助:)

**html代码**：

```
 <asp:Literal ID="imageGallery" runat="server" /> 
```

**cs (c#) 代码**：

```
 DataSet ds = new DataSet();
    ds = DAL.GetBestPics();
    imageGallery.Mode = LiteralMode.Encode;
    string divStart = @"<div class='more-products-holder'><ul>";
    imageGallery.Text += divStart;

    foreach (DataRow item in ds.Tables[0].Rows)
    {
        string imageHTML = @"<li><a>
                       <img src='";
        string mid = @"" + item.ToString();
        string imageHTML2 = @"' /></a></li>";
        imageGallery.Text += imageHTML;
        imageGallery.Text += mid;
        imageGallery.Text += imageHTML2;

    }
    string divEnd = @"</ul></div>";
    imageGallery.Text += divEnd;

    this.Controls.Add(imageGallery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:35:41.633

```
foreach (DataRow item in ds.Tables[0].Rows)
{
    ...
    string mid = @"" + item.ToString(); 
```

item 是 DataRow 对象。您应该引用其中一个字段/列，例如：

项目[“字段名”].ToString();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:36:16.457

在您的代码中，您分配`DataRoW as image Source not DataRow Value..`

```
string mid = @"" + item.ToString(); 

item.ToString() - > is a DataRow Not a DataRow Value 
```

它的输出是这样的`<img src='System.Data.DataRow' />`

你需要像下面这样改变

```
item["imageSrc"].ToString() - > it returns DataRow Value 
```

您必须为其分配一个字段名称，如下所示

```
string mid = @"" + item["ImageSRC"].ToString(); 
```

它的输出是这样的`<img src='sam.jpg' />`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:51:16.303

使用 stringbuilder 类怎么样

```
 StringBuilder sb = new StringBuilder();
        sb.Append("<div class='more-products-holder'><ul>");
        foreach (DataRow item in ds.Tables[0].Rows)
        {
            sb.Append("<li><a><img src='" + item.ToString() + "'");
            sb.Append("' /></a></li>");

        }

       sb.Append("</ul></div>");
       imageGallery.Text = sb.ToString(); 
```

# c# - 具有最大限制的堆栈对象

> ID：15761554
> 
> 赞同：1
> 
> 时间：2013-04-02T10:15:32.320
> 
> 标签：c#

C# Stack 对象非常适合处理无限堆栈。但是有没有办法限制它（或类似的对象）可以限制一定数量的堆叠元素？如果添加了 max+1 个元素，我还希望删除最旧的（第一个插入的）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T10:21:47.550

.NET Framework 不提供具有您描述的属性的数据结构。[但是，您应该能够通过获取循环缓冲区](http://en.wikipedia.org/wiki/Circular_buffer)并将其从 FIFO 更改为 LIFO轻松创建自己的数据结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:20:59.737

也许您可以使用 a[`BlockingCollection<T>`](http://msdn.microsoft.com/en-gb/library/dd267312.aspx)它提供[了一个构造函数，可以让您指定队列的上限](http://msdn.microsoft.com/en-gb/library/dd267301.aspx)。

或者，如果您只想在最旧的项目已满时丢弃它，您可能需要一个[循环缓冲区](http://circularbuffer.codeplex.com/)（另[见 Wikipedia 上的此处](http://en.wikipedia.org/wiki/Circular_buffer)）。

这是一个示例实现：

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Diagnostics.CodeAnalysis;
using System.Diagnostics.Contracts;

namespace Demo
{
    /// <summary>
    /// A circular buffer with a maximum capacity set at construction time.
    /// You can repeatedly add elements to this buffer; once it has reached its capacity
    /// the oldest elements in it will be overwritten with the newly added ones.
    /// This is how it differs from a queue: Oldest elements will be overwritten when the buffer is full.
    /// </summary>
    /// <typeparam name="T">The type of the elements stored in the buffer.</typeparam>

    [SuppressMessage("Microsoft.Naming", "CA1710:IdentifiersShouldHaveCorrectSuffix", Justification = "Calling this CircularBufferCollection would be stupid.")]

    public class CircularBuffer<T>: IEnumerable<T>
    {
        /// <summary>Constructor.</summary>
        /// <param name="capacity">The maximum capacity of the buffer.</param>

        public CircularBuffer(int capacity)
        {
            Contract.Requires<ArgumentOutOfRangeException>(capacity > 0, "Capacity must be greater than zero.");

            // We will use a buffer with a size one greater than the capacity.
            // The reason for this is to simplify the logic - we can use "front == back" to indicate an empty buffer.

            _buffer = new T[capacity+1];
        }

        /// <summary>A delegate that is called when an element is added to the buffer.</summary>

        public ElementAddedAlert OnElementAdded
        {
            get;
            set;
        }

         /// <summary>A delegate that is called when an element is overwritten in the buffer.</summary>

        public ElementOverwrittenAlert OnElementOverwritten
        {
            get;
            set;
        }

        /// <summary>A delegate that is called when a single element is removed from the buffer.</summary>

        public ElementRemovedAlert OnElementRemoved
        {
            get;
            set;
        }

        /// <summary>A delegate that is called when the buffer is emptied.</summary>

        public Action OnBufferEmptied
        {
            get;
            set;
        }

        /// <summary>The buffer capacity.</summary>

        public int Capacity
        {
            get
            {
                Contract.Ensures(Contract.Result<int>() > 0);
                return _buffer.Length - 1;
            }
        }

        /// <summary>The number of elements currently stored in the buffer.</summary>

        public int Count
        {
            get
            {
                Contract.Ensures(0 <= Contract.Result<int>() && Contract.Result<int>() <= this.Capacity);

                int result = _back - _front;

                if (result < 0)
                {
                    result += _buffer.Length;
                }

                return result;
            }
        }

        /// <summary>Is the buffer empty?</summary>

        public bool IsEmpty
        {
            get
            {
                return this.Count == 0;
            }
        }

        /// <summary>Is the buffer full? (i.e. has it reached its capacity?)</summary>

        public bool IsFull
        {
            get
            {
                return nextSlot(_back) == _front;
            }
        }

        /// <summary>Empties the buffer.</summary>

        public void Empty()
        {
            Contract.Ensures(this.IsEmpty);

            _front = _back = 0;
            Array.Clear(_buffer, 0, _buffer.Length); // Destroy any old references so they can be GCed.
            var onEmptied = this.OnBufferEmptied;    // Copy for thread-safeness.

            if (onEmptied != null)
            {
                onEmptied();
            }
        }

        /// <summary>Add an element to the buffer, overwriting the oldest element if the buffer is full.</summary>
        /// <param name="newItem">The element to add.</param>

        public void Add(T newItem)
        {
            _buffer[_back] = newItem;
            _back = nextSlot(_back);

            if (_back == _front) // Buffer is full?
            {
                _front = nextSlot(_front); // Bump the front, overwriting the current front.
                var onValueOverwritten = this.OnElementOverwritten; // Copy for thread-safeness.

                if (onValueOverwritten != null)
                {
                    onValueOverwritten(newItem, _buffer[_back], this.Capacity);
                }

                _buffer[_back] = default(T); // Remove the old front value.
            }
            else // Buffer is not full.
            {
                var onValueAdded = this.OnElementAdded; // Copy for thread-safeness.

                if (onValueAdded != null)
                {
                    onValueAdded(newItem, this.Count);
                }
            }
        }

        /// <summary>Removes and returns the oldest element from the buffer.</summary>
        /// <returns>The element that was removed from the buffer.</returns>
        /// <exception cref="InvalidOperationException">Thrown if the buffer is empty.</exception>

        public T RemoveOldestElement()
        {
            Contract.Requires<InvalidOperationException>(!this.IsEmpty, "Cannot remove an element from an empty buffer.");

            T result = _buffer[_front];
            _buffer[_front] = default(T); // Zap the front element.
            _front = nextSlot(_front);

            var onElementRemoved = this.OnElementRemoved; // Copy for thread-safeness.

            if (onElementRemoved != null)
            {
                onElementRemoved(result, this.Count);
            }

            return result;
        }

        /// <summary>
        /// The typesafe enumerator. Elements are returned in oldest to newest order.
        /// This is not threadsafe, so if you are enumerating the buffer while another thread is changing it you will run
        /// into threading problems. Therefore you must use your own locking scheme to avoid the problem.
        /// </summary>

        public IEnumerator<T> GetEnumerator()
        {
            for (int i = _front; i != _back; i = nextSlot(i))
            {
                yield return _buffer[i];
            }
        }

        /// <summary>The non-typesafe enumerator.</summary>

        IEnumerator IEnumerable.GetEnumerator()
        {
            return GetEnumerator(); // Implement in terms of the typesafe enumerator.
        }

        /// <summary>The delegate used for <see cref="OnElementAdded"/>.</summary>
        /// <param name="addedElement">The element that was added.</param>
        /// <param name="newCount">The new count after the element was added.</param>

        public delegate void ElementAddedAlert(T addedElement, int newCount);

        /// <summary>The delegate used for <see cref="OnElementOverwritten"/>.</summary>
        /// <param name="addedElement">The element that was added.</param>
        /// <param name="overwrittenElement">The element that was overwritten.</param>
        /// <param name="newCount">
        /// The new count after the element was added.
        /// By definition this will be equal to <see cref="Capacity"/>.
        /// </param>

        public delegate void ElementOverwrittenAlert(T addedElement, T overwrittenElement, int newCount);

        /// <summary>The delegate used for <see cref="OnElementRemoved"/>.</summary>
        /// <param name="removedElement">The removed element.</param>
        /// <param name="newCount">The new count after the element was removed.</param>

        public delegate void ElementRemovedAlert(T removedElement, int newCount);

        /// <summary>Calculates the index of the slot following the specified one, wrapping if necessary.</summary>

        private int nextSlot(int slot)
        {
            return (slot + 1) % _buffer.Length;
        }

        /// <summary>
        /// The index of the element at the front of the buffer. 
        /// If this equals _back, the buffer is empty.
        /// </summary>

        private int _front;

        /// <summary>
        /// The index of the first element BEYOND the last used element of the buffer. 
        /// Therefore this indicates where the next added element will go.
        /// </summary>

        private int _back;

        /// <summary>The underlying buffer. This has a length one greater than the actual capacity.</summary>

        private readonly T[] _buffer;
    }
} 
```

# android - 如何禁用Android应用程序的通知栏？

> ID：15761555
> 
> 赞同：1
> 
> 时间：2013-04-02T10:15:34.103
> 
> 标签：android, statusbar, titlebar, android-notification-bar

我有一个 android 应用程序，它列出了已安装的应用程序并在单击项目时启动它们。我想禁用从我的应用程序访问通知栏。即，当用户从我的应用程序启动“浏览器”应用程序时，可以向下拖动通知栏，他/她可以更改gps、wifi等的设置...我试过了

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                    WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

但它只适用于我的活动。如何为我的整个应用程序禁用通知栏？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:19:47.733

在 XML 中的应用程序上设置主题：

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:19:15.083

您可以在您的 AndroidManifest.xml 中添加一个主题：

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

这将隐藏标题栏

```
<activity android:name=".YourClassName"
android:theme="@android:style/Theme.NoTitleBar"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:32:42.047

请参阅下面的代码。我应用了您在问题中指定的代码，并且我的通知栏被隐藏了。您将无法禁用外部浏览器应用程序的通知栏

```
public class ContentBrowser extends Activity {
    private LinearLayout _progressBarLayout;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                            WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.browserlayout);

        Bundle receiveBundle = this.getIntent().getExtras();

        initialize(receiveBundle.getString("url"));
    }

    @SuppressLint("SetJavaScriptEnabled")
    private void initialize(String url) {

        WebView webView = (WebView) findViewById(R.id.browserView);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.getSettings().setDefaultZoom(WebSettings.ZoomDensity.MEDIUM);
        webView.getSettings().setDomStorageEnabled(true);

        _progressBarLayout = (LinearLayout) findViewById(R.id.browserProgressLayout);

        final Activity activity = this;
        webView.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress) {
                // Activities and WebViews measure progress with different scales.
                // The progress meter will automatically disappear when we reach 100%
                activity.setProgress(progress * 1000);
            }
        });

        webView.setWebViewClient(new browserClient());

        if (url != null && !"".equals(url))
            webView.loadUrl(url);
    }

    @Override
    public void onBackPressed() {
        finish();
    }

    public class browserClient extends WebViewClient
    {
        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            // TODO Auto-generated method stub
            super.onPageStarted(view, url, favicon);
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            // TODO Auto-generated method stub

            view.loadUrl(url);
            return true;

        }

        @Override
        public void onPageFinished(WebView view, String url) {
            // TODO Auto-generated method stub
            super.onPageFinished(view, url);

            _progressBarLayout.setVisibility(View.GONE);
        }
    }

} 
```

# php - 路由参数 symfony

> ID：15761556
> 
> 赞同：0
> 
> 时间：2013-04-02T10:15:37.857
> 
> 标签：php, symfony

我定义了这条路线

```
teln_operator_edit_1:
    pattern:  /edit1/{id}/{step}
    defaults: { _controller: TelnOperatorBundle:Operator:step1 } 
```

我得到

/Symfony/web/app_dev.php/edit1/13/1 我想获取步长值怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:19:33.910

您将 URL 参数值作为参数获取到您的操作方法中：

```
public function step1Action($id, $step) {
    // ...
} 
```

确保方法参数名称与您的模式中的参数名称相同。

# jquery - 如何使完整日历和anytime.js的日期格式相同，以及如何显示/添加/修改/删除存储在数据库中的事件

> ID：15761558
> 
> 赞同：0
> 
> 时间：2013-04-02T10:15:50.257
> 
> 标签：jquery, fullcalendar, anytime

你好朋友在我的应用程序中我需要使用[FullCalendar.js](http://arshaw.com/fullcalendar/)和[anytime.js](http://www.ama3.com/anytime/) 那么我怎样才能使两种格式都相同，例如“Tue Apr 02 2013 00:00:00 05:30 (IST)”等等我如何获取数据（ eventname,starttime,endtime) 来自数据库，分别显示开始时间和结束时间，如果有任何事件在每天/每周完成特定时间和日期，那么我如何在完整日历中显示以及如果存储在事件中的更改数据库请朋友帮帮我

* * *

完整的日历代码：

```
<script type='text/javascript'>

    $(document).ready(function() {  
            var count=0;
        /* initialize the calendar
        -----------------------------------------------------------------*/
        $('#calendar').fullCalendar({
                        axisFormat:'HH:mm',
            header: {

                left: 'prev,next today',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            },
                 viewDisplay: function(view) {
                            if(view.name=="month" && count==0){
                                    var a=$(".fc-day-number").prepend("<img src='/assets/images/add.jpg' width='20' height='20'style='margin-right:80px;' name='date'>");                                    
                                    count++;
                                }
                            if(view.name=="agendaDay" || view.name=="agendaWeek"){
                                $("#popup").hide();
                                count++;
                            }

                        },
                    slotMinutes:5,
            editable: true,
            droppable: true, // this allows things to be dropped onto the calendar !!!
                        timeFormat: 'H(:mm)',
                        events:"<?php echo base_url();?>data/read",
                        eventClick : function (calEvent, jsEvent, view){
                console.log(calEvent);                                
            },
            dayClick : function (date, allDay, jsEvent, view){
                console.log(jsEvent);   
                                        alert(date);
                                        $("#popup").show();
                                       $("#popup").css({left : jsEvent.clientX, top : jsEvent.clientY});
                                       var getdata = $.getJSON( "data", function() {
                                        console.log( "success" );
})
            }

    });

});
</script> 
```

* * *

anyTime.js 代码：

```
 <script>
        $('#startTime').focus(
                function(e) {

                        $('#startTime').AnyTime_picker({format:"%a %b %d %Y %h:%i"}).focus();
                        e.preventDefault();
                    });               
        $('#endTime').focus(
                function(e) {
                    $('#endTime').AnyTime_picker({format:"%a %b %d %Y %T"}).focus();
                    e.preventDefault();
                }); 
                $(function(){

                    $(".k-button").click(function(){
                        var eventName=$("#eventName").val();
                        var startTime=$("#startTime").val();
                        var endTime=$("#endTime").val();
                        var dataString={};
                        dataString['eventName']=eventName;
                        dataString['startTime']=startTime;
                        dataString['endTime']=endTime;
                    if(eventName==""||startTime==""||endTime==""||startTime>endTime)
                        {
                            alert("Please Data Enter Properly");
                        }

                        else
                        {
                            $.ajax({
                                    type : 'POST',
                                    dataType : 'json',
                                    url : '<?php echo base_url();?>data/insert',
                                    data: dataString,
                                    cache:false,
                                    success: function(data) {
                                            if(rsp.success)
                                                alert("Data Insert SuccessFully");
                                    }
                             });
                         }
                   });
                                       });
                             </script> 
```

html代码：

```
<div id="popup"> 
    <form name="addData" id="addData" action="" method="post">
        <table>
            <tr>
                <td><lable for="eventName">Description:</lable></td>
                <td><input name="eventName" id="eventName"></td>
            </tr>
            <tr>
                <td><lable for="startTime">Start: </td>
                <td><input type="text" id="startTime"name="startTime"/></td>
            </tr>
            <tr>
                <td><lable for="endTime">End: </td>
                <td><input type="text" id="endTime"name="endTime"/></td>
            </tr>
            <tr>
                <td align="left"colspan="2">
                    <button type="submit"class="k-button" name="submit" id="submit">Submit</button>
                    <button type="reset" name="reset" class="k-button" id="reset">Reset</button>
                </td>
            </tr>
        </table>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:55:35.877

我不确定我是否正确理解了您的问题，也不知道如何使用 fullCalendar。但是，我认为您可能会问如何使用日历中的值填充日期字段。如果这是真的，那么您可以使用 AnyTime.Converter 来格式化该值。我认为您希望将此代码放入您的`dayClick`处理程序中：

```
var conv = new AnyTime.Converter({format:"%a %b %d %Y %h:%i"});
$('#startTime').val( conv.format( date ) ); 
```

请注意，您使用的格式说明符对于您的选择器和转换器必须相同。

此外，您的代码中的格式与您在问题中提到的格式不匹配（它不包括[时区说明符](http://www.ama3.com/anytime/#specifiers)）。与您的问题匹配的格式是：

```
"%a %b %d %Y %T %: (%@)" 
```

在此示例中，`%@`要简单地为“ `IST`”，您必须确保只有“ `IST`”出现在您的[时区标签](http://www.ama3.com/anytime/#AnyTime.utcLabel)中，例如：

```
AnyTime.utcLabel[330]=['IST']; 
```

在将日期/时间保存回数据库的代码中，您可以使用相同的 AnyTime.Converter 将字段中的值解析回 JS 日期对象；例如：

```
var newDate = conv.parse( $('#startTime').val() ); 
```

我怀疑这个答案并不能完全解决您的问题，但我希望它能为您指明正确的方向。

# android - Android KSOAP2 网络服务错误

> ID：15761560
> 
> 赞同：1
> 
> 时间：2013-04-02T10:15:51.560
> 
> 标签：android

```
package com.example.weblab;
import org.apache.http.protocol.HTTP;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.util.Log;

public class WebServiceCaller {

private final String NAMESPACE="http://tempuri.org/";
private final String URL="http://10.0.2.2:8080/Service1.asmx?WSDL";

public String authenticateUser(String usern,String passw)
{
    String result = "";
    final String SOAP_ACTION="http://tempuri.org/AuthenticateUser";

    final String METHOD_NAME="GetUserName";

    SoapObject request=new SoapObject(NAMESPACE, METHOD_NAME);

    PropertyInfo prinfo=new PropertyInfo();
    prinfo.setName("name");
    prinfo.setValue(usern);
    prinfo.setType(String.class);
    request.addProperty(prinfo);

    SoapSerializationEnvelope envelop=new      SoapSerializationEnvelope(SoapEnvelope.VER11);//ver11 version
    envelop.dotNet=true;//only for dotnet

    envelop.setOutputSoapObject(request);
    HttpTransportSE httptransportse=new HttpTransportSE(URL);
    try{
    httptransportse.call(SOAP_ACTION, envelop);

    SoapPrimitive response=(SoapPrimitive)envelop.getResponse();

    Log.i("myapp",response.toString());

        result = response.toString();

    }catch (Exception e) {

        e.printStackTrace();

    }

    return result;

}   
} 
```

`04-02 09:39:26.044: W/System.err(13741): org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <html>@2:7 in java.io.InputStreamReader@40d38638)`

当我尝试将我的 android 应用程序连接到在本地主机中运行的 Web 服务时出现此错误。

这是 KSOAP Web 服务的完整代码。目前，我在 Eclipse 中使用我的模拟器运行本地主机服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:27:59.367

尝试在这样的另一个线程中使用您的代码

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

 StrictMode.setThreadPolicy(policy); 
```

# javascript - js变量的奇怪之处

> ID：15761565
> 
> 赞同：1
> 
> 时间：2013-04-02T10:16:14.777
> 
> 标签：javascript, arrays, variables, var

为什么这段代码会两次提醒同一件事（1,2,3,4）？

```
var arr = [1,2,3];
var new_arr = arr;
new_arr[new_arr.length] = 4;
alert(new_arr);
alert(arr); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:17:19.810

在 JavaScript 中，所有值要么是原始值（数字、字符串、布尔值、、`null`），`undefined`要么是对对象的引用（其中包括数组、函数等）。

只有一个数组，两个变量都持有对该数组的引用。

如果您想拥有另一个数组，以便您可以独立更改它们，请复制第一个：

```
var arr = [1,2,3];
var new_arr = arr.slice(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:17:16.373

因为当您更改第二个变量时，您正在操作底层数组，该数组被两个变量引用（代表事物），但它只是*一*件事，然后显示两次。

这与[引用和值类型](http://docstore.mik.ua/orelly/webprog/jscript/ch04_04.htm)有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T10:20:29.790

中的数组`JavaScript`是`reference object`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T10:34:35.680

当你这样做时：

```
var arr = [1,2,3];
var new_arr = arr; 
```

您现在有两个变量指向同一个数据结构。数组的分配是通过引用进行的，这意味着不会创建数据的副本，两个变量只是指向同一个数组。

因此，无论您修改哪个变量，您都将更改它们都指向的同一条数据。

所以，当你这样做时：

```
new_arr[new_arr.length] = 4; 
```

数据的单一副本已被修改，两个变量都将报告相同的更改。

在 javascript 中，如果您想要数据的副本，则必须显式创建副本，并且您还必须知道是要创建浅拷贝（仅复制顶级项目）还是深拷贝（甚至对象或嵌套在数组中的数组也会被复制）。

一个浅拷贝对于一个数组来说是非常容易的`.slice()`方法。

```
var arr = [1,2,3];

// make a copy of the array
var new_arr = arr.slice(0);

// modify the copy
new_arr[new_arr.length] = 4;

alert(arr);        // shows length of 3
alert(new_arr);    // shows length of 4 
```

# visual-studio-2010 - 如何在 Visual C++ 项目中引用 .lib 文件（本机 C++）？

> ID：15761567
> 
> 赞同：2
> 
> 时间：2013-04-02T10:16:20.513
> 
> 标签：visual-studio-2010, visual-c++, linker, static-libraries

我有一个项目，我需要为本地 C++ SDK 制作一个 Visual C++ 包装器，以便最终可以在 C# 中使用它。

SDK 包含我正确包含的 .h 文件（这些文件没有编译错误）和一些需要引用的 .lib 文件。这似乎是棘手的部分。

正如我在[这个问题](https://stackoverflow.com/questions/15758851/unresolved-external-sybol-in-referenced-library-visual-c)中解释的那样，每当我尝试调用属于库的函数时都会出错。错误如下所示：

```
error LNK2080: unresolved token (0A000027) "public: static class vhtIOConn *__clrcall vhtIOConn::getDefault(enum vhtICRConn::DeviceType)"
error LNK2019: unresolved external symbol "public: static class vhtIOConn * __clrcall vhtIOConn::getDefault(enum vhtIOConn::DeviceType)" 
```

据我了解，C++/CLR 期望`__clrdecl`原生 C++ 提供`__clrcall`.

解决这个问题的正确方法是什么？我在很多地方读到这是可能的，但我还没有看到任何实际的工作示例。请注意，我使用的是 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:18:36.190

您可以从链接器错误中判断出了什么问题，请注意错误消息中的 __clrcall。这表明编译器认为您的本机 C++ 正在编译为 MSIL，而不是本机代码。编译得很好，任何兼容的 C++03 代码都可以编译为 MSIL，但是当你尝试链接它时会死掉。你必须让它知道，你可以简单地使用#pragma：

```
#pragma managed(push, off)
#   include "foo.h"
#pragma managed(pop) 
```

# c# - 从对象类型创建表

> ID：15761568
> 
> 赞同：5
> 
> 时间：2013-04-02T10:16:22.710
> 
> 标签：c#, dapper

我试图弄清楚如何从对象类型创建一个空表。类型非常简单（只有原始类型属性）；有什么可以使用的吗？

我是否需要使用某些属性反射来编写自己的“CREATE TABLE”查询？

我正在开发一个项目，该项目使用 Dapper 从 FirebirdSQL 数据库读取数据并将其中一些表写入 Sqlite 数据库。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T13:04:19.793

正如 Marc 所说，Dapper 不会为您执行此操作，但请在此处查看我的答案（[ADO.NET distinct databases](https://stackoverflow.com/questions/15746050/ado-net-distinct-data-bases/15788258#15788258)）并简单地调整命令属性之一来构造 CREATE TABLE 语句，它将利用反射. 有了这么多的领先优势，这应该是非常简单的。

我会创建一个示例，但我正在通过手机回答这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-28T16:23:55.117

派对迟到了，但我只想补充一点，这种功能在[ServiceStack.OrmLite](https://github.com/ServiceStack/ServiceStack.OrmLite)中可用：

```
class Poco 
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Ssn { get; set; }
}

db.DropTable<Poco>();
db.TableExists<Poco>(); //= false

db.CreateTable<Poco>(); 
db.TableExists<Poco>(); //= true

db.ColumnExists<Poco>(x => x.Ssn); //= true
db.DropColumn<Poco>(x => x.Ssn);
db.ColumnExists<Poco>(x => x.Ssn); //= false 
```

但是请注意，这个库**不是**免费的。

# php - PHP 中的 LiveCycle ES 8.2 PDF 动态填充

> ID：15761581
> 
> 赞同：0
> 
> 时间：2013-04-02T10:17:37.577
> 
> 标签：php, pdf, adobe, livecycle

我希望我的网站生成`PDF`格式的动态报告。我最近发现了哪些在文档`Adobe liveCycle Designer ES`中创建可编辑字段。有谁知道是否可以在其中创建一个空模板，例如在用户单击按钮后用动态值填充它？`PDF`

`Adobe liveCycle Designer ES``php form`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:11:28.190

当然，您可以在 LiveCycle Designer 中创建 PDF 模板，但是为了以自动方式填充数据，您需要一个带有 Forms 模块的 Adob​​e LiveCycle 服务器。它有一些将数据和模板结合在一起的 Web 服务。您现在应该知道这是一个非常昂贵的解决方案。

[有关通过 Web 服务生成带有数据的 pdf 的更多详细信息，您可以在此处找到](http://help.adobe.com/en_US/livecycle/9.0/programLC/help/000592.html#1548552)

# objective-c - cmake - 设置 - xcode 属性 - 隐式链接 Objective-C 运行时支持

> ID：15761583
> 
> 赞同：3
> 
> 时间：2013-04-02T10:17:41.713
> 
> 标签：objective-c, xcode, cmake, attributes, set

我想在 cmake 源文件中将隐式链接 Objective-C 运行时支持设置为 NO。

我试过 set_target_properties

```
XCODE_ATTRIBUTE_IMPLICITLY_LINK_OBJECTIVE-C_RUNTIME_SUPPORT NO 
```

但它不工作。

更改属性的规则是什么？或者它应该是cmake的预定义属性？如果是 XCODE_ATTRIBUTE 列表在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T09:48:42.570

更改此设置的正确 Xcode 属性似乎是`CLANG_LINK_OBJC_RUNTIME`. 尝试：

```
set_target_properties(targetName PROPERTIES XCODE_ATTRIBUTE_CLANG_LINK_OBJC_RUNTIME "NO") 
```

# ios - 将 NSDateFormatter 设置为 HeaderSection

> ID：15761589
> 
> 赞同：0
> 
> 时间：2013-04-02T10:17:51.927
> 
> 标签：ios, objective-c, uinavigationbar, nsdateformatter

我尝试使用**viewForHeaderInSection:将计时器添加到****UINavigationTabBar**。但它不显示时间。如果我在 -(void)viewDidLoad 方法中尝试相同的方法，它正在工作。我的代码有什么问题。是否可以在 NavigationTabBar 中调用 NSDateFormatter？这是代码

 **```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
   UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 60, 30)];
   UILabel *label1 = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 60, 30)];
   label1.backgroundColor=[UIColor blueColor];
   NSDateFormatter *dateFormatter=[[NSDateFormatter alloc]init];
   [dateFormatter setDateFormat:@"hh:mm:ss"];
   label1.text=[dateFormatter stringFromDate:[NSDate date]];
   [self performSelector:@selector(timeLimiteAlert) withObject:self afterDelay:1.0];
   [view addSubview:label1];
   [label1 release];
   return [view autorelease];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:30:44.867

您忘记将视图添加到 NavigationBar：

```
self.navigationItem.titleView = view; 
```

所以代码会是这样的：

```
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 60, 30)];
UILabel *label1 = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 60, 30)];
label1.backgroundColor=[UIColor blueColor];
NSDateFormatter *dateFormatter=[[NSDateFormatter alloc]init];
[dateFormatter setDateFormat:@"hh:mm:ss"];
label1.text=[dateFormatter stringFromDate:[NSDate date]];
[self performSelector:@selector(timeLimiteAlert) withObject:self afterDelay:1.0];
[view addSubview:label1];
self.navigationItem.titleView = view; 
```

并将其放入 ViewDidLoad 中。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:30:53.193

请尝试在 viewDidLoad 中设置：

```
 UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 60, 30)];
 UILabel *label1 = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 60, 30)];
 label1.backgroundColor=[UIColor blueColor];
 NSDateFormatter *dateFormatter=[[NSDateFormatter alloc]init]; 
```

希望它有效。**

# javascript - 如果在执行 Ext.application() 之前需要全局辅助函数，我应该把它们放在哪里？

> ID：15761593
> 
> 赞同：0
> 
> 时间：2013-04-02T10:17:57.843
> 
> 标签：javascript, sencha-touch-2

假设我们有

```
Ext.application({
    name: 'APP',

    //this is my global helper method.
    determineSomething: function() {
        return true;
    }
}); 
```

和一个应该访问方法确定Something（）的视图：

```
Ext.define('APP.view.Main', {
extend: 'Ext.Panel',

config: {
    myConfigValue : APP.app.determineSomething()
}}); 
```

只要你使用 Sencha 类加载系统就可以正常工作（因为带有这个 Main-View 的 js 文件是在 APP 可用后由 Sencha 加载的。）。

但是现在假设我们要缩小我们的脚本。这意味着浏览器会在 Sencha 应用程序加载之前解析 Main.js 文件。但是此时APP还没有准备好，我们无法访问它。

一种解决方案是简单地使用该方法制作一个非 ext 配置类/数组/任何东西，但这是一个不错的解决方案吗？这个问题的干净解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:18:32.750

我会将我的辅助函数保存在一个单例 Helper 类中，该类在加载应用程序时会被实例化。例如，这是我的助手类的样子：

```
Ext.define('MyntraTabApp.util.Helper', {
    singleton : true,
    alternateClassName : 'Helper',
    determineSomething : function(){
        // do something
    }
}); 
```

我可以在任何我想要的地方使用它

```
Helper.determineSomething(); 
```

# php - Elgg - 扩展小部件标题 - 通过 ajax 切换内容

> ID：15761594
> 
> 赞同：0
> 
> 时间：2013-04-02T10:17:59.397
> 
> 标签：php, elgg

我有一个带有小部件仪表板视图的 Elgg 站点。

我需要按如下方式扩展帖子和文章视图：扩展小部件标题以显示 3 个链接：最近的帖子 | 热门帖子 | 单击链接时为帖子加星标并切换小部件内容

有人有经验或线索如何实施吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:30:57.110

要向*标题*添加链接，您需要覆盖对象/小部件视图。不过，您可以将它们作为小部件内容中的选项卡。

要刷新小部件内容，您需要编写自己的 JS 来获取小部件的视图。您可以将对象/小部件注册为 ajax 可刷新视图（elgg_register_ajax_view），然后调用 ajax/view/object/widget?guid=XX（请参阅 JS 中的 elgg.get 函数）

我在[这个插件](http://community.elgg.org/plugins/1158489/1.0/core-version)中重新加载小部件，以它为例。不过，您的情况需要进行一些更改。

# c++ - C++ 传递 STL 容器项作为参考

> ID：15761595
> 
> 赞同：0
> 
> 时间：2013-04-02T10:18:00.507
> 
> 标签：c++, map, reference

我有一张类型的地图`std::map<std::string, std::vector<MyClass>>`。地图以这种方式填充，我创建了一个矢量并将其与一个 guid 作为一对放入地图中。然后我想调用一个函数，给它刚刚插入的向量，让它填充向量。它看起来像这样：

```
{
    std::string guid = "aGUID"
    std::vector<MyClass> vec_myClass(0);
    my_map[guid] = vec_myClass;
    std::vector<MyClass>& vec_ref = my_map[guid];

    FillVector(vec_ref);    
}

FillVector(std::vector<MyClass>& vec)  { vec.push_back(...); } 
```

我认为 [] 运算符返回对 in 项目的引用`my_map`，我可以将其提供给使用它的函数，但此时我的应用程序崩溃了。我将向量首先放入地图中（当它为空时），因为我想避免复制工作，因为函数 FillVector 将大量项目放入向量中。我的错误在哪里？通过引用函数来传递引用可能是错误的吗？或者有明显更好的解决方案吗？我更喜欢这里的引用而不是指针。谢谢，一切顺利。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:21:39.683

所有这些代码都简化为：

```
{
    std::string guid = "aGUID"
    FillVector(my_map[guid]);    
} 
```

顺便提一句。我认为您的问题似乎不在这里，但是在代码中您没有向我们展示...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:30:10.753

如果键不存在，std::map 运算符将在内部为键创建值。看到[这个链接](http://www.cplusplus.com/reference/map/map/operator%5b%5d/)。传递对函数的引用是可以的，问题似乎出在代码中的其他地方。

# matlab - Matlab：如何处理函数的不同输出

> ID：15761596
> 
> 赞同：0
> 
> 时间：2013-04-02T10:18:03.230
> 
> 标签：matlab, function, output

我有这个功能

```
function [imag2] = sumIntegral(x,w,a,b,c,p)
    imag2 = zeros(p-1,p);
for k = 1:p-1
    f = @(t)(1:p-1==k)*Integrand[1](t,x,w,a,b,c);
    imag2(k,:) = quadv(f,x(k),x(k+1));
end 
```

而 `Integrand[1]`应该是`real2`这个功能

`[real2,real3,imag2,imag3] = Integrand(t,x,w,a,b,c,p);`

问题是，如果我`Integrand`之前定义了函数，我会得到一个错误，因为`t`未定义。你知道如何写成`real2`一个函数`t`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:51:27.930

只需**在 for 循环之外定义您的快速函数**

```
function [imag2] = sumIntegral(x,w,a,b,c,p)
    imag2 = zeros(p-1,p);
    f = @(t)(1:p-1==k)*Integrand[1](t,x,w,a,b,c);
    for k = 1:p-1        
    imag2(k,:) = quadv(f,x(k),x(k+1));
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:24:02.627

您可以只制作一个仅输出第一个参数的虚拟代理函数：

```
function real2 = MyIntergrand(t,x,w,a,b,c)
    real2 = Integrand(t,x,w,a,b,c);
end 
```

# android - 收到“RadioGroup 不适用于参数”的原因

> ID：15761597
> 
> 赞同：0
> 
> 时间：2013-04-02T10:18:08.173
> 
> 标签：android

我正在我的应用程序中实现**RadioGroup**。为此，我已导入`import android.widget.RadioGroup`和`implemented OnCheckedChangeListener`. 但我仍然收到此错误：

> RadioGroup 类型中的方法 setOnCheckedChangeListener(RadioGroup.OnCheckedChangeListener) 不适用于参数 (OpenedClass)

爪哇：

> OpenedClass.java

```
public class OpenedClass extends Activity implements OnClickListener,OnCheckedChangeListener{

    TextView tv1,tv2;
    RadioGroup selectionList;
    Button rtn;
    String gotBread;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.send);
        initlize();
        Bundle gotBusket = getIntent().getExtras();
        gotBread = gotBusket.getString("KEY");
        tv1.setText(gotBread);

    }
    private void initlize() {
        // TODO Auto-generated method stub

        tv1 = (TextView)findViewById(R.id.tvQuestion);
        tv2 = (TextView)findViewById(R.id.textView2);
        rtn = (Button)findViewById(R.id.bReturn);
        rtn.setOnClickListener(this);
        selectionList = (RadioGroup)findViewById(R.id.rgAnswers);
        selectionList.setOnCheckedChangeListener(this);
    }
    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
        // TODO Auto-generated method stub

        switch(arg0.getId())
        {
        case R.id.rCrazy:
            break;
        case R.id.rSuper:
            break;
        case R.id.rBoth:
            break;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T10:20:29.053

您正在导入不正确的`OnCheckedChangeListener`for类`RadioGroup`。

代替：

```
import android.widget.CompoundButton.OnCheckedChangeListener; 
```

有了这个：

```
import android.widget.RadioGroup.OnCheckedChangeListener; 
```

并修复您的接口实现，如下所示：

```
@Override
public void onCheckedChanged(RadioGroup group, int checkedId) {
   switch(checkedId)
   {
      //your cases
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T19:03:48.330

在创建 oncheckedchangelistener() 期间，指定“ `new RadioGroup.OnCheckedChangeListener()`”而不是“ `OnCheckedChangeListener()`”解决了问题。

添加示例代码供其他人参考。

```
RadioGroup rdGroup = (RadioGroup) findViewById(R.id.rdbGp1);
    rdGroup.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            // TODO Auto-generated method stub

        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T19:49:51.647

您正在导入不正确的 OnCheckedChangeListener 类

# web - 打开网站延迟

> ID：15761599
> 
> 赞同：0
> 
> 时间：2013-04-02T10:18:13.060
> 
> 标签：web, page-load-time

首先感谢所有在这个论坛上支持我解决关键问题的人，并提前感谢这个问题。

我正在建立一个网站[http://kidneyprostate.com](http://kidneyprostate.com)我也使用过 wordpress。**索引**文件是一个 HTML5 的 php 文件，所有**其他文件**都在**Wordpress**中。

我所做的我将所有其他文件（包括博客）保存在根文件夹内**名为**http://kidneyprostate.com/kidney-prostate.com/[的子文件夹中。](http://kidneyprostate.com/kidney-prostate.com)

我发现一切正常。但几天后，我的服务器超出了带宽速度，我的主机公司对其进行了纠正。

现在我面临的是该网站正在延迟开放。我检查了**Pingdom 工具**并优化了图像（用于幻灯片的图像），缩小了 CSS 和 Javascript 文件。但是延迟问题仍然存在。

我猜测的原因可能是由于子文件夹的名称相同或带宽速度尚未完全纠正。

你能帮我看看我猜对了还是有其他问题？如果我对子文件夹的命名（即肾前列腺.com）不是正确的方法，那么在更改子文件夹的名称后会起作用吗？

再次提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:29:54.633

“同名”网址无关。

```
1) Use a cache plugin (I would recommend WP Super Cache) and deactivate all the unnecessary plugins. 
2) Delete all the unused themes and images.
3) Also I would consider that you deactivate some heavy bandwidth plugins (like google-analytics ones) 
```

# pdf - 如何将大图像PDF文件转换为PNG？

> ID：15761604
> 
> 赞同：0
> 
> 时间：2013-04-02T10:18:27.040
> 
> 标签：pdf, converter

[我有一个由Trace2UML](http://trace2uml.tigris.org/)工具自动生成的大型单页 PDF（约 700KB） 。这提供了从运行应用程序时获得的跟踪日志生成 UML 交互图的方法。它具有将图表导出为 PDF 和 PNG 文件格式的选项；但是，由于图像尺寸较大，PNG 导出失败，而 PDF 导出成功。所以我一直在寻找一种方法来将这个大文件从 PDF 转换为 PNG 格式。

今天早上我用谷歌搜索了几个小时。有很多程序和在线服务可以做到这一点，但它们都不能与我的文件一起使用。当我将文件加载到 PDF-XChange Viewer 中时，它表明图像尺寸为 136 x 11186 厘米。所以，绝对是巨大的！有没有办法转换这个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T04:29:34.280

对于mac，预览可以将pdf转换为png（只需打开pdf并另存为png），但不确定它是否适用于大文件。

# scala - scala 附加到可变的 LinkedList

> ID：15761608
> 
> 赞同：18
> 
> 时间：2013-04-02T10:18:42.430
> 
> 标签：scala, collections, mutable

请检查这个

```
import scala.collection.mutable.LinkedList

var l = new LinkedList[String]

l append LinkedList("abc", "asd")

println(l)
// prints 
// LinkedList() 
```

但

```
import scala.collection.mutable.LinkedList

var l = new LinkedList[String]

l = LinkedList("x")
l append LinkedList("abc", "asd")

println(l)
// prints 
// LinkedList(x, abc, asd) 
```

为什么第二个代码片段有效，但第一个无效？这是在 Scala 2.10 上

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-02T10:40:04.643

文档说`If this is empty then it does nothing and returns that. Otherwise, appends that to this.`。这正是你观察到的。如果你真的需要一个可变列表，我建议你改用`scala.collection.mutable.ListBuffer`它，你可以这样做

```
val lb = new ListBuffer[Int]

scala> lb += 1
res14: lb.type = ListBuffer(1)

scala> lb
res15: scala.collection.mutable.ListBuffer[Int] = ListBuffer(1)

scala> lb ++= Seq(1,2,3)
res17: lb.type = ListBuffer(1, 1, 2, 3, 1, 2, 3)

scala> lb
res18: scala.collection.mutable.ListBuffer[Int] = ListBuffer(1, 1, 2, 3, 1, 2, 3) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-26T18:44:37.130

据我了解，它与列表中的 First/Last ( `Nil`) 元素有关（如果列表为空`Nil`，则同时是第一个和最后一个元素）。

LinkedList（仍然）遵循“**[原始魅力](http://www.scala-lang.org/api/current/index.html#scala.collection.mutable.LinkedList)**”的策略。因此，它不会尝试将新数据添加/追加到/之后`Nil`，可能会产生如下结果：{Nil, newElement}。（毕竟`Nil`应该是最后一个元素）

当然它可以检查`if`列表是否为空，然后放在`addingList`开头和`Nil`结尾。但这将是“太聪明了”，我猜。

但是，无论如何`append()`都会返回“预期”的结果，如下所示：

```
val addingList = new LinkedList[String]("a", "b")
val result = emptyList append addingList 
```

`result = {"a", "b"}.`在这种情况下，它会返回 'addingList' 本身，和/但不会更改初始列表。

如果我们尝试将 newElement 分配给`next`ref：

```
 emptyList.next = LinkedList("whatever") 
```

结果，我们将 emtyList 更改为：

```
 LinkedList(null, whatever) 
```

即**它将第一个元素创建为 null**，因为我们已经使用`next()`分配新/下一个元素给它。所以它将 Nil 移动到最后，因为第一个为 null 的元素具有我们添加的新元素的下一个引用 ( `addingElelement`)。

因为

> ““emptyList”也是“head”链接”

在我们的例子中 head 是`Nil`，但`Nill`不能有 next ，所以它必须创建新的第一个元素（它具有空值）， next() 引用我们的 new `addingElelement`。

我个人觉得它“太原始”而不是“那么优雅”。但这取决于，我猜。

**任务导向的故事：**

对于我的初始任务（为什么我开始考虑这个“奇怪”的列表行为[即使它是可变的]）——我想将可变列表用于一个名为的类/对象`Dictionary`，它将保留`Words`在其中（字典默认没有任何单词）。而且我会有`ddWord(wod:String)`添加新单词的方法。现在我的实现将被更改（我不会使用 this `LinkedList`，而是使用`MutableList`。它似乎比以前的**更易变）：**

```
object Dictionary {

  val words = new mutable.MutableList[Word]();

  def addWord(word: Word): Unit = {
    words += word;
  }

} 
```

**但可能的实现可能是这样的：**

```
object Dictionary {

  var words = new mutable.LinkedList[Word]();

  def addWord(word: Word): Unit = {

    if (words.isEmpty) {
      words = words append( mutable.LinkedList[Word](word) ) // rely on append result
    } else {
      words append( mutable.LinkedList[Word](word) )
    }

  }

} 
```

但是后来我必须使用`var`而不是`val`，并且我应该将每个新**单词**都转换为`LinkedList`，我的逻辑变得更加复杂。

# jquery - 添加嵌套输入文本

> ID：15761611
> 
> 赞同：0
> 
> 时间：2013-04-02T10:18:45.663
> 
> 标签：jquery, input, nested

还是同样的问题：

应该在问答测验中添加动态输入文本，但答案有些问题！我不知道我是否因为它是动态的而无法获得问题的名称，或者我写了一些错误的东西来引用它。这是代码

```
$(function() {

var domande=1;
var indice= new Array();
var contatore=1;
var numero_domanda=1;

$('a.addd').click(function() {

    $('<div class="question">Domanda N:'+domande+'<input type="text" name="'+domande+'" /></br></div><a href="#" name="one" class="addr"><img src="add.png" /></a></br>').animate({ opacity: "show" }, "slow").appendTo('.content');
    domande++;
    indice[domande]=0;
});

$('a.addr').click(function() {

    numero_domanda=$(':input').attr('name');//recupero il nome della domanda
    //numero_domanda=$(.closest('.class').find('input').attr('name'));
    indice[numero_domanda]++;
    $('<div class="answers">risposta N:'+indice[numero_domanda]+'<input type="text" name="r'+numero_domanda+'_'+indice[numero_domanda]+'" /></br></div>').animate({ opacity: "show" }, "slow").appendTo('.question');
    contatore++;

}); 
```

和html

```
<body>
<div class="content">
<a href="#" name="one" class="addd"><img src="add.png" /></a></br> 
```

有问题，它的答案是没有......只有一个问题和多个答案是，但都不是:(

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:24:00.623

你应该使用[.on()](http://api.jquery.com/on/)方法来工作

```
$('.content').on('click', 'a.addd', function() {

    $('<div class="question">Domanda N:'+domande+'<input type="text" name="'+domande+'" /></br></div><a href="#" name="one" class="addr"><img src="add.png" /></a></br>').animate({ opacity: "show" }, "slow").appendTo('.content');
    domande++;
    indice[domande]=0;
});

$('.content').on('click', 'a.addr', function() {

    numero_domanda=$(':input').attr('name');//recupero il nome della domanda
    //numero_domanda=$(.closest('.class').find('input').attr('name'));
    indice[numero_domanda]++;
    $('<div class="answers">risposta N:'+indice[numero_domanda]+'<input type="text" name="r'+numero_domanda+'_'+indice[numero_domanda]+'" /></br></div>').animate({ opacity: "show" }, "slow").appendTo('.question');
    contatore++;

}); 
```

# java - 具有字符串连接的 Spring 属性占位符

> ID：15761619
> 
> 赞同：8
> 
> 时间：2013-04-02T10:19:09.147
> 
> 标签：java, spring, properties

我的问题看起来很简单，但我无法解决。我有一个属性文件，其中包含所有环境（dev、qa、prod）的配置详细信息。

示例`config.properties`：

```
dev.maxLength=2000  
qa.maxLength=4000 
```

我们有一个父属性文件，其中包含主机名、环境映射。

示例`hosts.properties`：

```
host1=dev
host2=qa 
```

属性名称`host1`存储在 bean`hostname`中。

```
<bean id="hostname"
  factory-bean="localhostInetAddress"
  factory-method="getHostName"/> 
```

要解析配置属性名称，我必须按如下方式加入字符串， `${${**hostname**}.maxLength}`应将其解析为`${dev.maxLength}`

我尝试使用 SpEL 没有成功。我得到了`Could not resolve placeholder`例外。如何在属性占位符中连接 bean 值？动态属性名称是如何构造的？

**春季版 3.2**

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-11T19:44:40.743

要连接从 Spring 属性占位符解析的值，您需要使用单个 quoutes ( `''`) 转义它们的值，并使用 SpEL 表达式包装占位符表达式`#{}`。

```
<bean id="myService" class=""com.services.MyService">
  ...
  <property name="endpointAddress" value="#{'${server}' + ':' + '${port}' + '${endpoint}'}" />
</bean> 
```

在哪里：

> 服务器 = [http://domain.host.com](http://domain.host.com)
> 
> 端口 = 7777
> 
> 端点 = /services/myservice

结果将是：

> [http://domain.host.com:7777/services/myservice](http://domain.host.com:7777/services/myservice)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T09:50:37.240

我通过将`PropertyPlaceholderConfigurer`bean 更改为`Properties`. `<util:properties/>`可在 SpEL 中访问。

例子： `"#{prop[host+'.'+'maxLength']}"`

`host`字符串豆在哪里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T10:56:32.077

最好在自己的文件中包含特定于环境的属性并使用 Spring Profiles。例如，我有四个仅用于 db 配置的 xml 文件，local.db.xml、dev.db.xml、qa.db.xml 和 prod.db.xml。在每个 db.xml 中，我将配置文件设置为适当的值。

我的 local.db.xml 有

```
<beans profile="db.local" .. > 
```

为了启动 Tomcat，我指定 VM 选项如下

```
-Dspring.profiles.active=db.local 
```

# jquery - 仅当变量具有使用 jquery 的值时才在 html 中显示逗号？

> ID：15761626
> 
> 赞同：0
> 
> 时间：2013-04-02T10:19:31.207
> 
> 标签：jquery, html

我有一张这样的桌子：

```
<table class="table table-bordered">  
        <thead>  
          <tr>  
            <th></th>
            <th>Project Name</th>
            <th>Tape-ID</th>  
            <th>Video Type</th>  
            <th>Date Created</th>  
            <th>Director</th>  
            <th>Camera Person</th>
            <th>Editor</th> 
            <th>Tag</th> 
          </tr>  
        </thead>  
        <tbody>  
        {% load endless %}

    {% paginate 8 a %}
        {% for choice, i in a %}
          <tr>  
            <td><input type="checkbox" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id }}"  onchange="checkChecked()" /></td>
            <td>{{ choice.name }}</td>
            <td>{{ choice.tape_id }} </td>  
            <td>{{ choice.video_type }}</td> 
            <td>{{ i }}</td>  
            <td>{{ choice.director }}</td>  
            <td>{{ choice.cameraman }}</td>  
            <td>{{ choice.editor }}</td> 
            <td>{{ choice.tag1 }}, {{ choice.tag2 }}, {{ choice.tag3 }}, {{ choice.tag4 }},
            {{ choice.tag5 }}, {{ choice.tag6 }}, {{ choice.tag7 }}, {{ choice.tag8 }}, 
            {{ choice.tag9 }}, {{ choice.tag10 }}

            </td>   
          </tr>  
       {% endfor %}

        </tbody>  
      </table> 
```

这些变量`{{ choice...}}`可能有也可能没有价值。虽然它是顺序的。最多 3 的变量可以有值，并且在 3 之后没有任何值。如果没有值，它会像这样：

```
water, pollution, hello, , , , , , 
```

如果没有价值，我不想显示逗号。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:43:45.277

尝试这个 ：

```
 <td>
  {% if choice.tag1 %}
      {{ choice.tag1 }}, 
  {% endif %} 
  {% if choice.tag2 %}
      {{ choice.tag2 }}, 
  {% endif %} 
  {% if choice.tag3 %}
      {{ choice.tag3 }}, 
  {% endif %} 
  {% if choice.tag4 %}
      {{ choice.tag4 }}, 
  {% endif %}
  {% if choice.tag5 %}
      {{ choice.tag5 }}, 
  {% endif %}
  {% if choice.tag6 %}
      {{ choice.tag6 }}, 
  {% endif %}
  {% if choice.tag7 %}
      {{ choice.tag7 }}, 
  {% endif %} 
  {% if choice.tag8 %}
      {{ choice.tag8 }}, 
  {% endif %} 
  {% if choice.tag9 %}
      {{ choice.tag9 }}, 
  {% endif %} 
  {% if choice.tag10 %}
      {{ choice.tag10 }} 
  {% endif %} 

   </td> 
```

或者使用 jquery 试试这个：

```
 $(document).ready(function () {
        $("#add_commas .manupulate_me span:not(span:last-child)").each(function ()  {
            if ($.trim($(this).html()) != "") {
                $(this).append(",");
            }
        });
    }); 
```

并将 html 更改为：

```
<table id="add_commas">
<tr class="manupulate_me">
<td>
    <span id="sp1">value1</span>
    <span id="sp2">vale2</span>
    <span id="sp3"> </span>
    <span id="sp4"> </span>
    <span id="sp5"> </span>
    <span id="sp6">value6</span>
    <span id="sp7">value7</span>
    <span id="sp8"> </span>
    <span id="sp9">value9</span>
    <span id="sp10"> value10</span>
  </td>  
</tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:51:18.207

尝试使用

```
{{#choice.tag1}}
  {{ choice.tag1 }}{{#choice.tag2}},{{/choice.tag2}}
{{/choice.tag1}} 
```

每次出现。最后一个将是：

```
{{#choice.tag10}}
  {{ choice.tag10 }}
{{/choice.tag10}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:26:38.273

如果您正在寻找 jQuery 解决方案（看到您标记 jQuery），您可以这样做：

```
$(function() {
    // get rows
    $('table.table tbody tr').each(function() {
        // get last cell in each row
        var cell = $(this).find('td:last');
        // replace trailing spaces and commas
        var text = cell.html().replace(/(,|\s)+$/, '');
        // update cell display
        cell.html(text);
    });
}); 
```

概念证明：http: [//jsfiddle.net/wPRNH/](http://jsfiddle.net/wPRNH/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T10:27:59.793

得到该结果后可以使用正则表达式`s = s.replace(/[,\s]{2,}/,"");`

# windows - USER 对象的内核地址

> ID：15761631
> 
> 赞同：1
> 
> 时间：2013-04-02T10:19:47.697
> 
> 标签：windows, object, windows-8

有人能告诉我如何在 Windows 8 上的分页池中获取 USER 对象的地址（一些代码或任何想法）吗？Fe on win 7 我们可以做到这一点。2 种方式：通过 CsrClientConnectToServer 和 gSharedInfo。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:09:52.760

好的。以下是一些可以帮助您找到答案的文章。

[http://msdn.microsoft.com/en-us/library/ms810501.aspx](http://msdn.microsoft.com/en-us/library/ms810501.aspx)

对象管理器是 Windows NT 系列操作系统中的集中资源代理，它跟踪分配给进程的资源。它与资源无关，可以管理任何类型的资源，包括设备和文件句柄。所有资源都表示为对象，每个都属于用于分类的逻辑命名空间，并具有表示资源类型的类型，该类型通过属性公开能力和功能。

一个对象一直可用，直到所有进程都完成它为止；对象管理器通过引用计数维护当前正在使用的对象的记录，以及所有权信息。任何改变进程资源分配状态的系统调用都通过对象管理器进行。

来源：[http://en.wikipedia.org/wiki/Object_Manager_(Windows)](http://en.wikipedia.org/wiki/Object_Manager_(Windows))

关于内核对象及其与 GDI/用户对象的区别

[http://windowsarchitecture.wordpress.com/2010/11/24/kernel-objects-%E2%80%9Care%E2%80%9D-different-from-gdi-user-objects/](http://windowsarchitecture.wordpress.com/2010/11/24/kernel-objects-%E2%80%9Care%E2%80%9D-different-from-gdi-user-objects/)

这是一篇文章，它可能会让您对内核中的分页池有所了解。

[http://vishu25.wordpress.com/2012/08/30/kernelmemory/](http://vishu25.wordpress.com/2012/08/30/kernelmemory/)

下面的论文肯定会帮助你更深入的研究......

www.mista.nu/research/MANDT-kernelpool-PAPER.pdf

让我知道它是否对你有帮助..

# javascript - CSV2Table 似乎正在缓存结果 - 我该如何阻止它？

> ID：15761637
> 
> 赞同：0
> 
> 时间：2013-04-02T10:20:02.040
> 
> 标签：javascript, jquery

我正在使用 CSV2Table 插件：[CSV2Table](http://code.google.com/p/jquerycsvtotable/)

html页面的正文是：

```
 <body onload="JavaScript:timedRefresh();">
     <div id="CSVTable"></div>
  </body> 
```

TimedRefresh 脚本是：

```
 <script type="text/JavaScript">
       function timedRefresh() {
         setInterval(function(){
         ref()},30000);
    </script> 
```

将 CSV 加载到 DIV 的脚本是：

```
 <script type="text/javascript">

    function ref(){
        $('#CSVTable').CSVToTable('q.csv', { loadingImage: 'images/loading.gif', startLine: 0, tableClass:'table table-condensed table-striped table-bordered table-hover' }).bind("loadComplete",function() { 
        $('#CSVTable').find('TABLE').tablesorter().tableClass('table table-condensed');     

                    });
        </script> 
```

问题是，尽管调用了**ref** ，但CSV2Table 似乎正在缓存结果 - 而不是重新读取 CSV 文件（在其他地方动态更新）。

有没有办法阻止缓存在 CSV2Table 上发生？我试过谷歌搜索，但找不到它的缓存设置！

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:29:09.363

`CSVToTable`使用`$.get`，因此您可以使用[`$.ajaxSetup`](http://api.jquery.com/jQuery.ajaxSetup/)来设置全局ajax缓存设置；例如

```
$.ajaxSetup({ cache: false }); 
```

以上将阻止在*所有*后续 AJAX 请求中使用缓存，包括由`CSVToTable`. 这种方法当然有缺点，jQuery 文档本身建议不要使用`ajaxSetup`.

另一种选择是更改插件的[来源](https://code.google.com/p/jquerycsvtotable/source/browse/trunk/js/jquery.csvToTable.js#97)，使用`$.ajax`，并允许将 ajax 选项传递给插件，以便可以将插件配置为不使用缓存。如果您继续进行这样的更改，您当然应该将其提交给作者，以便它可以合并到主分支中，并且您可以下载未来的更新而不会覆盖您自己的更改。

# jquery - jquery float条形图不显示

> ID：15761642
> 
> 赞同：0
> 
> 时间：2013-04-02T10:20:19.370
> 
> 标签：jquery, flot, bar-chart

我想实时绘制一个条形字符（数据每秒更新一次）。每次出现新数据点时，我的条形图都应该绘制以前和新添加的数据。我以前使用 flot 绘制了直方图、散点图。他们都做得很好。我不明白为什么这现在不起作用。

我没有任何错误。当我调试时，我看到我的数据是正确的。

我的代码示例是

```
 var options = {
            series: {
            bars:{show:true}
    }};

        $(document).ready(function() {

          chart1 = $.plot($("#placeholder"),
          [{
            data:  new_data,
            xaxis: {ticks:8,minTickSize: 1},
            yaxis: {min:-1,max:3,tickSize:1},
            grid: { borderWidth: 1  }
            }],options)

         }); 
```

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:29:50.020

我解决了这个问题。我以不同的格式存储我的数据。我想发送`new_data`到绘图功能，`[[0, 1], [1200, 1], [2400, 0], [3600, 1]];`而不是像发送它一样`[0, 1], [1200, 1], [2400, 0], [3600, 1]`。

# java - 为什么此方法会导致无限递归调用？

> ID：15761643
> 
> 赞同：0
> 
> 时间：2013-04-02T10:20:23.757
> 
> 标签：java, recursion, stack-overflow, avl-tree, recursive-datastructures

我很难理解为什么这个类不起作用。这是数据结构课程作业的一部分（编辑：作业的截止日期已经过去，我只是想弄清楚......）。该节点是基于 BST 构建的 AVL 树的一部分，我选择实现它的方式是在我的 Node 类中创建方法来查找平衡因子和高度。

该类的结构如下：

```
public class Node<T extends Comparable<? super T>> {

public T data;
public Node left;
public Node right;

public Node(T IN) {
    data = IN;
}

public Node(T IN, Node L, Node R) {
    this(IN);
    left = L;
    right = R;
}

@Override
public String toString() {
    return data.toString();
}

@Override
public Node clone() {
    return new Node(this.data) ;
}

public int getHeight() {
    return getHeight(this) ;
}

public int getBF() {

        //Calculate BF
        int balanceFactor = 0;
        if (right != null && left != null)
            balanceFactor = getHeight(right) - getHeight(left);
        else if (left != null) {
            balanceFactor = 0 - getHeight(left) ;
        }
        else if (right != null) {
            balanceFactor = getHeight(right) ;
        }
        else
            balanceFactor = 0 ;
        return balanceFactor ;
}

private int getHeight(Node p) {
    if (p.left == null && p.right == null ) {
        return 0 ;
    }
    else if (p.left != null && p.right != null) {
        return 1 + max(p.left.getHeight(), p.right.getHeight());
    }
    else if (p.left != null) {
        return 1 + p.left.getHeight() ;
    }
    else if (p.right != null) {
        return 1 + p.right.getHeight() ;
    }
    else {
        return 0;
    }
}

private int max(int x, int y) {
    if (x >= y) {
        return x;
    } else {
        return y;
    }
} 
```

}

调用该方法的函数是：

```
@Override
public boolean insert(T el) {
    boolean test = super.insert(el) ;
    if (test) {
        return checkBalance(root) ;
    }
    else
        return false ;
} 
```

我收到的例外是重复：

```
Exception in thread "main" java.lang.StackOverflowError
at Node.getHeight(Node.java:54)
at Node.getHeight(Node.java:33)
at Node.getHeight(Node.java:58) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T10:29:23.503

我建议你的树要么变形，要么真的很大。代码似乎没有问题。

如果您的树以这样的方式变形，以至于您`Node`在同一棵树中插入了两次，那么此代码将中断。

**补充**- 你吃的堆栈比你需要的多 - 替换`p.left.getHeight()`为`getHeight(p.left)`etc. 将避免每次递归推送一个堆栈。如果您的问题只是*大树*，那么这可能会让您陷入困境，但这只会推迟问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T10:28:52.720

通过查看这两种 getHeight 方法，您似乎没有树而是循环图。您应该从仅包含根的树开始测试，然后添加节点，直到观察到无限递归。您可能在重新平衡树的函数中有错误。

编辑：并且您应该将属性（至少左右）设为私有。

# camera - 三JS。如何实现 ZoomALL 并确保给定的框填充画布区域？

> ID：15761644
> 
> 赞同：3
> 
> 时间：2013-04-02T10:20:27.963
> 
> 标签：camera, three.js, webgl

我正在寻找一个函数来确保给定的盒子或球体将在 WebGL 画布中可见，并且它将适合画布区域。我正在使用透视相机，相机已经指向物体的中间。我知道这可以通过更改 FOV 角度或沿视轴移动相机来实现。

知道如何使用 ThreeJS 实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T06:21:38.123

这就是我最终实现它的方式：

```
var camera = new THREE.PerspectiveCamera(35,1,1, 100000);
var controls = new THREE.TrackballControls( me.camera , container);
[...]

/**
 * point the current camera to the center
 * of the graphical object (zoom factor is not affected)
 *
 * the camera is moved in its  x,z plane so that the orientation 
 * is not affected either
 */
function pointCameraTo (node) {

    var me = this;

    // Refocus camera to the center of the new object
    var COG = shapeCenterOfGravity(node);

    var v = new THREE.Vector3();
    v.subVectors(COG,me.controls.target);

    camera.position.addVectors(camera.position,v);

    // retrieve camera orientation and pass it to trackball  
    camera.lookAt(COG);
    controls.target.set( COG.x,COG.y,COG.z );  

};

/**
 *  Zoom to object
 */
function zoomObject (node) {

   var me = this; 

   var bbox = boundingBox(node);
   if (bbox.empty()) {
       return;
   }
   var COG =  bbox.center();

   pointCameraTo(node);

   var sphereSize = bbox.size().length() * 0.5;
   var distToCenter = sphereSize/Math.sin( Math.PI / 180.0 * me.camera.fov * 0.5);

   // move the camera backward 

   var target = controls.target;
   var vec = new THREE.Vector3();
   vec.subVectors( camera.position, target );
   vec.setLength( distToCenter );
   camera.position.addVectors(  vec , target );
   camera.updateProjectionMatrix();
   render3D();
}; 
```

这方面的一个例子可以在[https://github.com/OpenWebCAD/node-occ-geomview/blob/master/client/geom_view.js中看到](https://github.com/OpenWebCAD/node-occ-geomview/blob/master/client/geom_view.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T04:42:10.383

这是我的做法{使用轨迹球放大/缩小平移等}

```
function init(){
......
......
controls = new THREE.TrackballControls(camera);

controls.rotateSpeed = 1.0;
controls.zoomSpeed = 1.2;
controls.panSpeed = 0.8;

controls.noZoom = false;
controls.noPan = false;

controls.staticMoving = true;
controls.dynamicDampingFactor = 0.3;

controls.keys = [65, 83, 68];

controls.addEventListener('change', render);

.....
.....
render(scene, camera);
animate();
}
function render() 

{
    renderer.render(scene, camera);
    //stats.update();
}

function animate() {
    requestAnimationFrame(animate);
    controls.update();
} 
```

# java - 翻译Animated ImageView 闪烁

> ID：15761655
> 
> 赞同：0
> 
> 时间：2013-04-02T10:20:57.363
> 
> 标签：java, android

我有一个大问题。我使用此代码为 ImageView 设置动画，以将一个 ImageView 从当前 X 位置水平移动到 0。

这是动画代码

```
 translate = new TranslateAnimation(0, translateX, 0, 0);
    translate.setDuration(400);
    translate.setAnimationListener(new AnimationListener() {
        public void onAnimationEnd(Animation animation) {
            txtTitle.setText(String.format("Translate: %d %d", translateX, lpView1.leftMargin));
            lpView1.leftMargin = 0;
            mainSwitchBtn.setLayoutParams(lpView1);
        }

        public void onAnimationRepeat(Animation animation) {
        }

        public void onAnimationStart(Animation animation) {
        }

    });
    translate.reset();
    translate.setFillAfter(false);
    mainSwitchBtn.clearAnimation();
    mainSwitchBtn.startAnimation(translate); 
```

动画结束时，我已将 ImageView 移至 0。此时我看到 ImageView 闪烁。我不知道是什么问题。有人能帮我吗？

**编辑：成立问题**

我已经确定了我的代码中存在的问题。

我已经替换了这段代码

```
mainSwitchBtn.setLayoutParams(lpView1); 
```

有了这个

```
mainSwitchBtn.layout(0, 0, 0, 0); 
```

我不知道在布局参数中设置边距和设置参数以查看对象或使用 .layout 函数有什么区别，但现在我没有闪烁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:41:47.227

似乎动画结束并且您的图像视图返回到原始的非动画图像，也许您应该尝试使用 Horizo​​ntalScrollView 而不是动画

# hibernate - Hibernate Optimistic Locking for Concurrent Insert-possible？

> ID：15761661
> 
> 赞同：1
> 
> 时间：2013-04-02T10:21:18.197
> 
> 标签：hibernate, jpa

在同一个表中的一个并发插入操作中，我得到了 ConstraintViolationException。

```
javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: 
could not insert: 
```

Hibernate Optimistic Lock 可以在这方面帮助我吗？据我所知，乐观锁定在数据库中同一记录的更新/删除操作中起作用。

它也适用于插入查询吗？

我在目标表（实体）中创建了一个版本列。但仍然得到相同的异常（没有optimisticLockException 或StaleObjectStateException）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:58:38.320

乐观锁定用于防止用过时的数据覆盖现有数据。由于您不能用另一个插入覆盖一个插入，因此执行乐观锁检查没有意义，因为数据库已经抛出了自己的异常 - ConstraintViolation 异常。如果插入失败，您可以从刷新或提交中获得 PersistenceException。如果已经插入，您可以配置您的 JPA 提供程序以在调用 persist 时抛出 EntityExistsException，除非您已经将其设置为 persist，在这种情况下您可能会点击[https://hibernate.atlassian.net/browse/HHH -4131](https://hibernate.atlassian.net/browse/HHH-4131)

# java - 用于大型数据集的 Java 贝叶斯推理框架

> ID：15761665
> 
> 赞同：2
> 
> 时间：2013-04-02T10:21:28.590
> 
> 标签：java, bayesian-networks

请就 Java 贝叶斯推理框架提出建议：

```
1\. Is open-source
2\. Can be used programmatically from Java app.
3\. Will be able to process 10 GB data-set running on a single host (node) 
4\. NOT Mahout or any other Hadoop-based / distributed frameworks (see 3.) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T14:13:49.537

您的数据大小不会成为限制因素，而是您将要更新的模型的复杂性。如果它是一个简单的朴素贝叶斯模型，那么这很容易实现。如果您想要更复杂的东西，例如多连接网络，那么模型复杂性将决定您是否可以进行精确推理，或者是否需要权衡取舍，例如近似算法。

Kevin Murphy 最近更新了贝叶斯推理软件比较，网址为[http://www.cs.ubc.ca/~murphyk/Software/bnsoft.html](http://www.cs.ubc.ca/~murphyk/Software/bnsoft.html)。我正在探索的一个开源包是 libDAI ( [http://cs.ru.nl/~jorism/libDAI/](http://cs.ru.nl/~jorism/libDAI/) )，它使用 C++，但我认为它可以从 Java 中调用。它支持多种推理方法，包括循环信念传播，这似乎是一种非常好的近似算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:47:04.657

也许 weka 符合您的要求？[http://www.cs.waikato.ac.nz/ml/weka/](http://www.cs.waikato.ac.nz/ml/weka/) 它肯定满足要求 1、2 和 4。3 应该可以使用类似 weka.core.Instances 的自定义实现的东西，如果默认的没有提供某种数据的“流式传输”，因此并非所有数据都需要立即驻留在内存中 - 有一段时间没有使用它，所以我不确定。

# erlang - 为什么 simple_one_for_one 工作人员可以共享相同的子规范 ID？

> ID：15761668
> 
> 赞同：3
> 
> 时间：2013-04-02T10:21:35.933
> 
> 标签：erlang, erlang-otp

我为一个名为 band_supervisor 的主管定义了 simple_one_for_one 工人规范，子规范 id 是`jam_musician`：

```
 init([]) ->
    {ok, {{simple_one_for_one, 3, 60},
    [{jam_musician,
    {musicians, start_link, []},
    temporary, 1000, worker, [musicians]}
    ]}}; 
```

音乐家模块是：

```
-module(musicians).
-behaviour(gen_server).

-export([start_link/2, stop/1]).
-export([init/1, handle_call/3, handle_cast/2,
handle_info/2, code_change/3, terminate/2]).

-record(state, {name="", role, skill=good}).
-define(DELAY, 750).

start_link(Role, Skill) ->
  gen_server:start_link({local, Role}, ?MODULE, [Role, Skill], []).

stop(Role) -> gen_server:call(Role, stop). 
```

我可以通过以下方式创建许多工人：

```
3> supervisor:start_child(band_supervisor, [drum, good]).
Musician Arnold Ramon, playing the drum entered the room
{ok,<0.696.0>}
3> supervisor:start_child(band_supervisor, [guitar, good]).
Musician Wanda Perlstein, playing the guitar entered the room
{ok,<0.698.0>} 
```

我注意到所有工作人员都有相同的子规范 ID：`jam_musician`

你知道其他类型的工人必须有唯一的孩子ID，对吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T13:36:38.063

您很可能将子进程的 start_link 函数（我假设它是一个 gen_server）编写为：

```
start_link() ->
    gen_server:start_link({local,Name}, ?MODULE, [], []). 
```

这不仅调用了 init/1 函数，而且还使用原子名称注册了进程。

因此，任何在第二个时刻开始的新孩子都将尝试使用第一个孩子已经使用的名称在 erlang 节点内注册。

为了避免这种名称冲突，您应该使用以下内容：

```
start_link() ->
    gen_server:start_link(?MODULE, [], []). 
```

这样没有孩子会有注册名字，你也不会发生冲突。

如果您确实需要注册每个孩子，则可以选择使用[gproc](https://github.com/uwiger/gproc)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T12:24:37.973

监管者的子规范标识符将是相同的，`simple_one_for_one`因为只有一种子类型和许多该类型的子实例（工作者）。

从[`supervisor`行为文档](http://www.erlang.org/doc/man/supervisor.html)：

> 请注意，当重启策略为 时`simple_one_for_one`，子规范列表必须是只有一个子规范的列表。（忽略子规范标识符。）然后在初始化阶段不启动子进程，但假定所有子进程都使用`start_child/2`.

# php - magento 如何将产品链接到目录规则/销售规则中的规则

> ID：15761671
> 
> 赞同：0
> 
> 时间：2013-04-02T10:21:44.157
> 
> 标签：php, magento, magento-1.7

我正在做一个 magento 扩展，其中包含与 magento 的本地目录价格规则相同的规则功能，也就是说您可以设置一些条件，然后您可以获得所有符合这些条件的产品。

但是在检查了magento的代码之后，我找不到magento如何将产品与规则联系起来，有人能指出magento根据条件获取所有产品的代码在哪里吗？（PS：我需要通过条件获取产品的代码，而不是通过规则ID获取产品的代码，我知道这是从数据库中获取的，但我想知道将这些记录保存到数据库的代码在哪里。）

很多谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:18:31.627

Mage_CatalogRule_Model_Resource_Rule

这是将与目录规则相关方面的 Db 交互的资源文件。

# vbscript - 使用 https 发布数据不会在服务器端处理

> ID：15761675
> 
> 赞同：-1
> 
> 时间：2013-04-02T10:21:56.357
> 
> 标签：vbscript

我有一个从第 3 方应用程序调用的 VBScript，该脚本从第 3 方应用程序获取数据，并通过以 POST 格式传递数据在 IE 浏览器中打开 URL。当我使用 http 作为协议时，该脚本工作正常，但在我使用 https 的那一刻，服务器端代码 (request.getParameter("param1")) 抱怨它无法在请求对象中找到参数。通过传递 URL 和数据调用脚本。例如 run.vbs [https://xyz.com?param1=1234](https://xyz.com?param1=1234)。以下是 vbscript 供您仔细阅读。当我使用 https 作为协议时，你能告诉我我缺少什么吗？非常感谢任何帮助。非常感谢。

```
If WScript.Arguments.Count = 1 Then
uri = WScript.Arguments.Item(0)
'WScript.Echo "Arguments " & uri
Set WshNetwork = WScript.CreateObject("WScript.Network")
'WScript.Echo "Current User Name: " & WshNetwork.UserName
filename="C:\Documents and Settings\"+WshNetwork.UserName+"\Application Data\XYZ\Profiles\default\Settings.xml"
'WScript.Echo "Current User fileName: " & filename

Set xmlDoc = CreateObject("Microsoft.XMLDOM")
xmlDoc.Async = "False"
xmlDoc.Load(filename)
strQuery = "Agent"
Set colItem = xmlDoc.getElementsByTagname(strQuery)
For Each objItem in colItem
    Agentid = objItem.getAttribute("Login")
    'MsgBox "AgentId = " + AgentID
Next

'uri = uri+"^&agentid="+Agentid
uri = uri+"&agentid="+Agentid
pos = InStr(uri,"?")
extracteduri = Mid(uri,1,pos-1)
params = Mid(uri, pos+1)
postdata = Str2Bytes(params,"us-ascii")
header = "Content-Type: application/x-www-form-urlencoded"

Set IE = CreateObject("InternetExplorer.Application")
'IE.Navigate "about:blank"
'IE.AddressBar = True
'IE.ToolBar = True
'IE.StatusBar = True
IE.Visible = True
'WScript.Sleep 2000
Set shl = WScript.CreateObject("WScript.Shell")
shl.SendKeys "% X" 
IE.Navigate extracteduri, Nothing, Nothing, postdata, header
Wscript.Quit
 Else
Wscript.Echo "Usage: RunURL.vbs <URL to invoke>"
Wscript.Quit
 End If
 Function Str2Bytes(Text, CharSet)
Const adTypeText = 2
Const adTypeBinary = 1

  'Create Stream object
  Dim BinaryStream 'As New Stream
  Set BinaryStream = CreateObject("ADODB.Stream")

  'Specify stream type - we want To save text/string data.
  BinaryStream.Type = adTypeText

  'Specify charset For the source text (unicode) data.
  If Len(CharSet) > 0 Then
    BinaryStream.CharSet = CharSet
  Else
    BinaryStream.CharSet = "us-ascii"
  End If

  'Open the stream And write text/string data To the object
  BinaryStream.Open
  BinaryStream.WriteText Text

  'Change stream type To binary
  BinaryStream.Position = 0
  BinaryStream.Type = adTypeBinary

  'Ignore first two bytes - sign of
  BinaryStream.Position = 0

  'Open the stream And get binary data from the object
  Str2Bytes = BinaryStream.Read
End Function 
```

我现在正在使用以下函数从服务器获取响应，使用 https 作为协议和 POST 作为格式，但服务器仍然无法看到参数

```
Set req = CreateObject("MSXML2.ServerXMLHTTP")
'Set the below option to get rid of the "Certificate authority is invalid or     
     'incorrect, error code - 80072F0D" error
req.setOption 2, 13056
req.open "POST", extracteduri, False
req.setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
encodedParams = Escape(params)
WScript.Echo "encodedParams: " & encodedParams
req.send encodedParams
WScript.Echo "req.responseText: " & req.responseText 
```

下面是编码后的参数 uui%3DU1%3D123456%26agentid%3D123456

服务器仍然抱怨请求对象中缺少参数。

我正在使用相同的脚本（XMLHTTP 请求），但我正在使用 Str2Bytes 函数（如上所述）加密参数

```
Set req = CreateObject("MSXML2.ServerXMLHTTP")
req.setOption 2, 13056
req.open "POST", extracteduri, False
req.setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
req.send postdata
WScript.Echo "req.responseText: " & req.responseText 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:05:35.100

我建议使用一个[`XMLHTTPRequest`](http://msdn.microsoft.com/en-us/library/windows/apps/hh453379.aspx)而不是 Internet Explorer COM 对象。有关示例，请参见[此处。](https://stackoverflow.com/a/15636155/1630171)请注意，您必须对发布数据中的特殊字符[进行编码。](http://www.degraeve.com/reference/urlencoding.php)

但是，如果您无论如何都想在 IE 中打开 URL，您可能最好坚持原来的方法。在这种情况下，我会检查服务器以获取有关服务器端为什么认为它找不到参数的更多信息。请求甚至有一个名为的参数`"param1"`吗？

# php - 从 php 应用程序写入 CSV 数据库文件

> ID：15761677
> 
> 赞同：0
> 
> 时间：2013-04-02T10:22:00.103
> 
> 标签：php, javascript, html, csv

我有一个运行调查的简单**PHP/HTML应用程序（托管在 Heroku 上）。**我想将对此调查的回复（仅 4/5 个问题）保存到**CSV**文件中以供日后分析。这些响应当前保存为**PHP**变量，因此目前无法提交表单。

做这个的最好方式是什么？我假设这将是使用 Javascript 最简单的方法，但我愿意接受建议。另外，我应该将**CSV**文件放在不同的服务器上吗？

# android - Android中的内存缓存

> ID：15761679
> 
> 赞同：4
> 
> 时间：2013-04-02T10:22:16.287
> 
> 标签：android

我正在尝试将一个视频存储在内存缓存中，视频完成后将其从缓存中删除。并且在播放过程中，该视频文件无法从缓存中删除。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T11:55:49.673

每个 Android 应用程序都有自己的有限内存

```
// Get max available VM memory, exceeding this amount will throw an
// OutOfMemory exception. 
 final int maxMemory = (int) (Runtime.getRuntime().maxMemory() / 1024);

// Use 1/8th of the available memory for this memory cache.
 final int cacheSize = maxMemory / 8; 
```

在普通设备上，每个应用程序至少分配了大约 4 MB (32/8) 32 MB。

在具有 800x480 分辨率的设备上填充图像的全屏网格视图将使用大约 1.5MB（800*480*4 字节）。800*480*4 = 实际图片尺寸

这将在内存中缓存至少大约 2.5 页的图像。即在您的网格视图中，只有 2.5 个图像存储在缓存中...当您向上和向下滚动到 2.5 个图像时，它会从缓存中获取图像...当用户移动到第 3 或第 4 图像..前两个图像缓存被清除，新的下载图像在缓存中。

缓存机制主要用于网格视图列表中图像的平滑滚动。

机制：在列表或网格视图中，当用户向下滚动时，从网络下载第一张图像并存储在缓存中。当用户向上滚动时，如果可用，则从缓存中获取图像。

Android 使用两种机制：

1.LRU Cache(使用内部应用内存) 2.Disk Cache(使用sdcard内存)

磁盘缓存代码是从 Android 操作系统中提取的。这将有限数量的数据存储在 sdcard 中。当插入的数据超过时，最近最少使用的文件被删除并存储新文件。

例如：Facebook Android 使用磁盘缓存。

在应用程序级别或设置>管理应用程序>应用程序名称中清除缓存内存。

每个应用程序都有自己的缓存内存，一个应用程序无法访问其他应用程序的缓存内存。

欲了解更多信息，请访问：

[http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html#disk-cache](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html#disk-cache)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:42:11.147

从评论中您似乎想要做的是将一个文件存储在永久内存中，然后将其删除：

所以我建议您使用[getCacheDir()](http://developer.android.com/reference/android/content/Context.html#getCacheDir%28%29)方法来获取写入文件的位置，然后使用[createTempFile()](http://developer.android.com/reference/java/io/File.html#createTempFile%28java.lang.String,%20java.lang.String,%20java.io.File%29)创建一个临时文件，并在不再需要时使用[delete()方法。](http://developer.android.com/reference/java/io/File.html#delete%28%29)

这是一个 StackOverflow 帖子，展示了如何做到这一点：[https ://stackoverflow.com/a/6485850/906362](https://stackoverflow.com/a/6485850/906362)

# symfony - Symfony2 中的多个动态数据库连接

> ID：15761685
> 
> 赞同：5
> 
> 时间：2013-04-02T10:22:46.477
> 
> 标签：symfony, saas

我有一个 Symfony2 应用程序，我想通过使用一个数据库 pr 租户来创建多租户（有些人不认为这是多租户，但这不是重点）。

该[文档](http://symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html)描述了如何完成此操作。但是，我希望能够动态创建租户，并且将新的数据库连接详细信息（和实体管理器）直接写入 config.yml 文件似乎很麻烦。我宁愿有一个单独的数据库来保存租户及其连接，然后根据标识符（例如，从应用程序的子域 - clientname.app.com 获取）选择正确的连接/em。

使用[这种方法](https://github.com/FriendsOfSymfony/FOSUserBundle/issues/413#issuecomment-10295345)我应该能够做到这一点，但同时可能会在运行用于更新数据库模式等的命令行命令时破坏指定数据库连接和/或实体管理器的能力。

如果我想做的事情有意义，有没有聪明的方法来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-12T09:54:09.963

我设置了一个静态数据库来处理登录和租赁信息，以及一个辅助数据库来保存用户数据

应用程序/配置/config.yml：

```
doctrine:
    dbal:
        default_connection: default
        connections:
            default:
                driver:   "%database_driver%"
                host:     "%database_host%"
                port:     "%database_port%"
                dbname:   "%database_name%"
                user:     "%database_user%"
                password: "%database_password%"
                charset:  UTF8
            tenantdb:
                driver:   "%database_driver%"
                host:     "%database_host%"
                port:     "%database_port%"
                dbname:   "%database_name%"
                user:     "%database_user%"
                password: "%database_password%"
                charset:  UTF8
    orm:
        default_entity_manager: default
        entity_managers:
            default:
                 connection: default
                 mappings:
                    MyCoreBundle: ~
            tenantdb:
                 connection: tenantdb
                 mappings:
                     MyAppBundle: ~ 
```

然后，在控制器中，而不是

```
 $something = $this->getDoctrine()
                           ->getManager()
                           ->getRepository('MyAppBundle:Thing')
                           ->findAll(); 
```

我们做了：

```
 $something = $this->getDoctrine()
                           ->getManager('tenantdb')
                           ->getRepository('MyAppBundle:Thing', 'tenantdb')
                           ->findAll(); 
```

您可以在这里找到详细信息：http: [//symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html](http://symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html)

然后，基于[Symfony2，Dynamic DB Connection/Early override of Doctrine Service](https://stackoverflow.com/questions/15108732/symfony2-dynamic-db-connection-early-override-of-doctrine-service/24585284#24585284) 我设置了一个服务来根据请求的子域切换数据库（例如tenant1.example.com tenant2.example.com）

src/MyCoreBundle/Resources/config/services.yml：

```
services:
    my.database_switcher:
        class: MyCoreBundle\EventListener\DatabaseSwitcherEventListener
        arguments:  [@request, @doctrine.dbal.tenantdb_connection]
        scope:      request
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest } 
```

MyCoreBundle\EventListener\DatabaseSwitcherEventListener.php

```
namespace MyCoreBundle\EventListener;

use Symfony\Component\HttpFoundation\Request;
use Doctrine\DBAL\Connection;

class DatabaseSwitcherEventListener {

    private $request;
    private $connection;

    public function __construct(Request $request, Connection $connection) {
        $this->request = $request;
        $this->connection = $connection;
    }

    public function onKernelRequest() {
        $connection = $this->connection;
        if (! $connection->isConnected()) {
            $params = $this->connection->getParams();
            $subdomain = __GET_SUBDOMAIN__();
            $oldname = preg_replace (
                "/_tenant_$subdomain|_template/",
                '',
                $params['dbname']
            );
            $params['dbname'] =  $oldname . ($subdomain ? "_tenant_$subdomain"
                                                        : "_template");
            $connection->__construct(
                $params,
                $connection->getDriver(),
                $connection->getConfiguration(),
                $connection->getEventManager()
            );
            $connection->connect();
        }
    }

} 
```

为方便起见，我们有一个名为 XXX_template 的“额外”租户数据库，系统管理员在进行全局更改时会连接到该数据库。计划是在租户创建时将此数据库复制到租户数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:27:38.563

创建一个服务，该服务根据用户的凭证生成您的自定义实体管理器。

`$this->get('my.db.service')->getEmForUser('bob');`

那么您的服务将是这样的

```
class EntityManagerService
{

   function __construct($doctrine)
   { ... }

   function getEmForUser($user)
   {
      //look up Bob's connection details in your connection db
      //and get them using the globally configured entity manager

      //create Entity Manager using bob's config

      return $em.

    } 
```

这是最可重用的做事方式，它符合 Symfony2 使用的依赖注入模式。

您需要返回此类的实例

[https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/EntityManager.php](https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/EntityManager.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T14:49:34.397

不知道我是否了解您的问题的范围，但我使用此连接到不同的数据库：

```
 $connectionFactory = $this->container->get('doctrine.dbal.connection_factory');
    $conn = $connectionFactory->createConnection(array(
        'driver' => 'pdo_mysql',
        'user' => 'mattias',
        'password' => 'nkjhnjknj',
        'host' => 'fs1.uuyh.se',
        'dbname' => 'csmedia',
    ));
    return $conn; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-09T07:14:44.907

我们在项目中遇到了同样的问题。

我们在供应商包中创建了一个名为：connectionManager 的新服务。

该服务是一个 multiton，它通过参数返回一个 entityManager。

# c - 如果我尝试在信号处理程序中调用开放系统，则代码转储

> ID：15761687
> 
> 赞同：0
> 
> 时间：2013-04-02T10:22:53.853
> 
> 标签：c, linux, linux-kernel, signals

当我收到信号时，我需要模拟系统调用。我试图调用一个开放的系统调用，但 reuslt 是一个核心转储，我不明白为什么。

我正在使用的代码是这样的：

```
static void emulator(int nr, siginfo_t *siginfo, void *void_context)
{
        ucontext_t *ctx = (ucontext_t *)(void_context);

        int syscall_n;
        char *buf;
        ssize_t bytes;
        size_t len;
        long long int syscall_addr;

        long int arg0=0,arg1=0,arg2=0,arg3=0,arg4=0,arg5=0, ret=0;

        if (siginfo->si_code != SYS_SECCOMP)
                return;
        if (!ctx)
                return;

        syscall_n = ctx->uc_mcontext.gregs[REG_SYSCALL];
        arg0 = ctx->uc_mcontext.gregs[REG_ARG0];
        arg1 = ctx->uc_mcontext.gregs[REG_ARG1];
        arg2 = ctx->uc_mcontext.gregs[REG_ARG2];
        arg3 = ctx->uc_mcontext.gregs[REG_ARG3];
        arg4 = ctx->uc_mcontext.gregs[REG_ARG4];
        arg5 = ctx->uc_mcontext.gregs[REG_ARG5];

        syscall_addr= (long int)siginfo->si_call_addr;

        printf("Arg0 = %d \n", arg0);
        printf("Arg1 = %d \n", arg1);
        printf("Arg2 = %d \n", arg2);
        printf("Arg3 = %d \n", arg3);
        printf("Arg4 = %d \n", arg4);
        printf("Arg5 = %d \n", arg5);

        //ret=syscall(syscall_n, arg0,arg1,arg2,arg3,arg4,arg5);                                                                                                                                                                                                                

        //ret=syscall(SYS_open,"testfile.txt", 2);                                                                                                                                                                                                                              

        open("test.p", O_RDWR);

        getpid();
        ctx->uc_mcontext.gregs[REG_RESULT]=ret;

        return;
}

static int install_emulator(void)
{
        struct sigaction act;
        sigset_t mask;
        memset(&act, 0, sizeof(act));
        sigemptyset(&mask);
        sigaddset(&mask, SIGSYS);

        act.sa_sigaction = &emulator;
        /*specify to use sigaction as handler*/
        act.sa_flags = SA_SIGINFO;
        if (sigaction(SIGSYS, &act, NULL) < 0) {
                perror("sigaction");
                return -1;
        }
        if (sigprocmask(SIG_UNBLOCK, &mask, NULL)) {
                perror("sigprocmask");
                return -1;
        }
        return 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:37:47.280

*   首先：您不应该在信号处理程序中使用 printf() 。printf() 不是信号安全的。

*   第二：您对 open() 的调用毫无意义。您正在泄漏文件描述符，并且在*不*关闭它之前甚至没有*使用它。*

 *[作为答案发布，因为我还不能发表评论]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-24T08:40:38.583

您通过在信号处理程序中调用不安全函数调用了未定义的行为，除非您的信号没有中断不安全函数。*

# java - 从演员系统中删除 AKKA 演员并创建另一个具有相同路径名称的演员

> ID：15761689
> 
> 赞同：2
> 
> 时间：2013-04-02T10:22:58.263
> 
> 标签：java, concurrency, akka

我有投票事件，它有 id、startDate、endDate、status 等。startDate 和 endDate 是未来的日期，以长（毫秒）为单位，状态值可以是字符串“活动”、“非活动”和“完成”之一。

当 Poll 对象被保存到数据库时，它的状态是“非活动的”。我通过扩展 UnTypedActor 来编写 PollActor，以便在达到 startDate 时将其状态更改为“活动”，并在通过 endDate 时将其状态更改为“已完成”。对于演员的唯一名称，我使用了投票事件的 id。例如：**“pollActor”+ 12** ，其中 12 是投票 ID。如果我不更新 Poll 事件，这很好。当我更新民意调查时，问题就来了。PollActor 具有字段 final Poll poll。初始化后，我无法更改其内容。所以我想在投票中删除现有的 PollActor 并在投票更新时创建一个新的 PollActor。我尝试“Kill”并创建新的 PollActor，但它没有用，抛出 InvalidActorNameException。

# wordpress - 如何使我在 Wordpress 中的链接不添加到现有 URL？

> ID：15761709
> 
> 赞同：0
> 
> 时间：2013-04-02T10:24:07.420
> 
> 标签：wordpress, hyperlink

我猜有一个简单的解决方案，但是在搜索它时我似乎无法正确表达我的措辞，所以我将其发布在这里。

我在 Wordpress 中有一些看起来像这样的链接：

```
<a target="_blank" href="<?php echo get_post_meta($post->ID, $prefix.'hjemmeside', true); ?>"><?php echo get_post_meta($post->ID, $prefix.'hjemmeside', true); ?></a> 
```

只是我在单个模板中回显的常规链接以创建用户主页/facebook 等。问题是当您单击它时，该链接只会将自身添加到 URL 的末尾：

例子：

wordpress.com/single

点击链接时：

wordpress.com/single/www.homepagelink.com

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:42:41.420

我的猜测是 wordpress 没有添加任何东西。如果您在自定义字段中没有前面的 URL `http://`，浏览器会以这种方式显示。如果您使用浏览器检查生成的源代码，您会发现如下代码：

```
<a target="_blank" href="www.homepagelink.com">www.homepagelink.com</a> 
```

如果没有`http://`或其他有效的 URL 模式，浏览器会将其解释为相对链接并按此方式处理。

您可以`http://`在字段中添加值，也可以在主题中放置一个包装器函数，`functions.php`以确保无论字段中放入什么，它始终被解释为 URL。

```
function my_field_link($id, $field) {
  $value = get_post_meta($id, $field, true);
  if (substr($value, 0, 7) == "http://") return $value;
  return "http://" . $value;
} 
```

然后你可以像这样调用这个函数：

```
<a target="_blank" href="<?php echo my_field_link($post->ID, prefix.'hjemmeside'); ?>"><?php echo my_field_link($post->ID, prefix.'hjemmeside'); ?></a> 
```

现在链接将始终以`http://`.

注意：如果您希望使用其他 URL 模式（https、ftp、scp 等），您应该相应地调整函数。

# perl - 如何使用带附件的perl发送邮件？

> ID：15761711
> 
> 赞同：1
> 
> 时间：2013-04-02T10:24:16.003
> 
> 标签：perl, email, smtp, sendmail

我尝试使用带有附件的 perl 发送邮件，`Email::Stuff`并且 `MIME::Lite`在运行时我遇到了一些错误，因为`Authentication failed`或服务器未连接有人可以帮助我吗？对应的代码是：

```
 use MIME::Lite;
use Net::SMTP;
### Adjust sender, recipient and your SMTP mailhost
my $from_address = 'atme04@gmail.com';
my $to_address = 'thiyagu040@gmail.com';
my $mail_host = 'smtp.gmail.com';

### Adjust subject and body message
my $subject = 'A message with 2 parts ...';
my $message_body = "Here's the attachment file(s) you wanted";
my $your_file_zip = 'my.zip';

$msg = MIME::Lite->new (
  From => $from_address,
  To => $to_address,
  Subject => $subject,
  Type =>'multipart/mixed'
) or die "Error creating multipart container: $!\n";
MIME::Lite->send('smtp', 'smtp.gmail.com' ,
                          Port =>465 ,
                          Timeout=>320 ,
                          Debug => 1 ,
                          Hello => $mail_host,
                          User  => $from_address,
                          Password  => 'Thiyagu.04' );
#$mime_msg->send() or die "Error sending message: $!\n";

#MIME::Lite->send('smtp',$mail_host,AuthUser=> $from_address, AuthPass=>"apssword");

$msg->send(); 
```

错误信息是；

```
 SMTP Failed to connect to mail server: A connection attempt failed because the connected party did not properly respond aft
    er a period of time, or established connection failed because connected host has failed to respond.
     at mail.pl line 54. 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:09:42.823

错误信息对我来说似乎很清楚。问题在于您与邮件服务器的连接 - 因此更改您正在使用的模块不太可能获得任何有用的结果。我对 Gmail 的服务器设置知之甚少，无法评论问题所在，但[此页面](http://support.google.com/mail/answer/78775?hl=en)提供了一些您可能会遵循的建议。具体来说，您可以检查 Gmail 帐户是否启用了“允许身份验证”，以及您的邮件客户端（Perl 程序）是否使用 SSL 进行连接。

此外，如果您使用专为 Gmail 设计的电子邮件，这可能会更容易。[Email::Send::SMTP::Gmail](https://metacpan.org/release/Email-Send-SMTP-Gmail)看起来是根据您的要求量身定制的。

# python - GAE dev_appserver 抛出 HTTP 504 网关超时

> ID：15761715
> 
> 赞同：2
> 
> 时间：2013-04-02T10:24:25.120
> 
> 标签：python, google-app-engine

我刚刚将我的 GAE SDK 升级到 1.7.6（Linux、Python）。现在，使用 dev_appserver.py，我的应用程序加载得很好，但是当我在浏览器中转到 localhost:8080 时，就会出现未捕获的 HTTP 504 网关超时异常。我已经用 helloworld 示例代码复制了它。一切都像使用 old_dev_appserver.py 之前一样。

这是一个错误还是我做错了什么？还是我的 Python 发行版？

```
 File "/usr/lib64/python2.7/urllib2.py", line 406, in open
    response = meth(req, response)
  File "/usr/lib64/python2.7/urllib2.py", line 519, in http_response
    'http', request, response, code, msg, hdrs)
  File "/usr/lib64/python2.7/urllib2.py", line 444, in error
    return self._call_chain(*args)
  File "/usr/lib64/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/usr/lib64/python2.7/urllib2.py", line 527, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
HTTPError: HTTP Error 504: Gateway Time-out 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-13T17:54:44.990

可能为时已晚，但我希望这可以帮助任何可能遇到同样问题的人。

同样的事情发生在我身上，对我来说问题是我的系统设置为使用代理。因此，GAE dev_appserver 无法连接到自己（它使用 ip 和端口组合来连接到自己并管理一些 API 内容），所以它会抛出 HTTP 504 Gateway Timeout 错误。因此，我删除了代理设置，并照常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:34:30.913

对于最新版本，您需要安装[PyObj](http://pythonhosted.org/pyobjc/)。试试这个：

```
$ easy_install -U pyobjc-core
$ easy_install -U pyobjc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T11:40:08.677

就我而言，它是代理。我有：

```
export http_proxy=http://IP.IP.IP.IP:3128/ 
```

在我的 .bashrc 文件中。我以为我没有在 python 和机械化中使用代理。但原因恰恰相反。我取消了导出的代理并没有它，这解决了这个错误：

```
mechanize._response.httperror_seek_wrapper: HTTP Error 504: Gateway Time-out 
```

现在使用 python 和 mechanize 进行身份验证连接工作正常。

PS：我能够连接到该站点并获得登录屏幕（启用代理）。但是当我提交登录条目时，出现错误 504。

# image - Corona SDK (LUA) 幻灯片查看器

> ID：15761717
> 
> 赞同：2
> 
> 时间：2013-04-02T10:24:26.750
> 
> 标签：image, view, lua, coronasdk, slide

我想知道如何将 SlideViewer 创建为 SAMPLE CODE 的“SlideView”，但从服务器获取我的图像。

我尝试这样做，但图像总是显示并且不正确。

```
display.setStatusBar( display.HiddenStatusBar ) 
local slideView = require("slideView")
local myImages = {
        "myPhotos2.jpg",
    "myPhotos3.jpg",
    "myPhotos4.jpg",
        display.loadRemoteImage("http://some huge link.jpg", "GET","", "img_term_435_bmw-mini-logo11.jpg", system.TemporaryDirectory, 0, 0 )
}       
slideView.new( myImages ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T21:53:41.550

“CoronaSDK/SampleCode/Interface/SlideView”中的 SlideView 需要本地文件系统上的文件路径。[它使用display.newImage](http://docs.coronalabs.com/api/library/display/newImage.html)在 SlideView 中创建图像。

你有两个选择：

1.  将 SlideView 更改为使用[display.loadRemoteImage](http://docs.coronalabs.com/api/library/display/loadRemoteImage.html)并向其传递 URL 表

2.  将图像预下载到本地文件系统并将它们传递给 SlideView。但是，您仍然需要修改 SlideView 的使用，`display.newImage`因为它正在寻找图像`system.ResourceDirectory`而不是`system.TemporaryDirectory`.

例子：

```
network.download("http://example.com/image.jpg", "GET", nil, nil, "img_term_435_bmw-mini-logo11.jpg", system.TemporaryDirectory)

-- Change slideview to load from system.TemporaryDirectory first, then
local slideView = require("slideView")
local myImages = {
    "img_term_435_bmw-mini-logo11.jpg"
}       
slideView.new( myImages ) 
```

# xml - SSIS 2005 多个 XML 文档

> ID：15761718
> 
> 赞同：1
> 
> 时间：2013-04-02T10:24:34.583
> 
> 标签：xml, ssis, resultset

伙计们，

有什么方法可以在一个“执行 SQL 任务”中返回两个单独的 XML 文档？

1) 创建一个存储过程，返回两个单独的 XML 文档 2) 配置“执行 SQL 任务”，使其具有： - ADO.NET 连接管理器， - 它调用存储过程， - 将 resultSet 设置为 'XML'， -在“结果集”控制杆上，输出映射到两个单独的字符串变量：例如：ResultName: 0 - VariableName: firstVar, ResultName: 1 - VariableName: secondVar;

如果我有一个只有一个结果变量的“结果集”，这一切都很好——它很好地从被调用的存储过程中返回第一个 xml 并将其映射到变量。当我添加第二个变量时，我得到了错误：

[执行 SQL 任务] 错误：为 ResultSetType 返回的结果绑定数无效：“ResultSetType_XML”。

这有可能完成这一任务吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:22:32.733

不是直接的。如[MSDN](http://msdn.microsoft.com/en-us/library/cc280492.aspx)中所述：

> *   当查询以**XML**格式返回结果集时，将使用 XML 结果集。例如，此结果集用于包含 FOR XML 子句的 SELECT 语句。
> 
> 如果执行 SQL 任务使用**完整结果集**结果集并且查询返回多个行集，则该任务仅返回第一个行集。如果此行集生成错误，则任务会报告错误。如果其他行集生成错误，则任务不会报告它们。

但是，正如您所指出的，您可以编写一个存储过程来运行您的两个查询，在内部将结果存储为字符串，然后将结果作为 OUTPUT 参数返回。或者，当然，您可以只构建两个 Execute SQL 任务。

# c# - c#通过socket发送图片

> ID：15761719
> 
> 赞同：0
> 
> 时间：2013-04-02T10:24:35.227
> 
> 标签：c#, sockets, screenshot, send

我在通过 c# 中的套接字发送屏幕截图时遇到问题。

**客户**：

```
 private void btnCaptureScreen_Click(object sender, EventArgs e)
    {
        clientSocket = new TcpClient();
        clientSocket.Connect(txtIP.Text, 8888);

        NetworkStream serverStream = clientSocket.GetStream();

        byte[] inStream = new byte[9999999];
        serverStream.Read(inStream, 0, (int)clientSocket.ReceiveBufferSize);
        ImageConverter ic = new ImageConverter();
        Image img = (Image)ic.ConvertFrom(inStream);
        Bitmap bit = new Bitmap(img);
        bit.Save(@"C:\temp\capturas\scn" + numCapturas + ".png", ImageFormat.Png);
        clientSocket.Close();
    } 
```

**服务器**：

```
 TcpListener serverSocket = new TcpListener(IPAddress.Parse(LocalIPAddress()), 8888);

    TcpClient clientSocket = default(TcpClient);
    serverSocket.Start();
    NetworkStream networkStream = clientSocket.GetStream();
    Bitmap bmpScreenshot = new Bitmap(Screen.PrimaryScreen.Bounds.Width,  Screen.PrimaryScreen.Bounds.Height, PixelFormat.Format32bppArgb);
    Graphics gfxScreenshot = Graphics.FromImage(bmpScreenshot);

    gfxScreenshot.CopyFromScreen(Screen.PrimaryScreen.Bounds.X, Screen.PrimaryScreen.Bounds.Y, 0, 0, Screen.PrimaryScreen.Bounds.Size, CopyPixelOperation.SourceCopy);

    ImageConverter converter = new ImageConverter();
            Byte[] sendBytes = (byte[])converter.ConvertTo(bmpScreenshot, typeof(byte[]));
    networkStream.Write(sendBytes, 0, sendBytes.Length);
    networkStream.Flush(); 
```

这是我的代码的一部分。如果我将服务器中的屏幕截图保存到一个文件夹中，它可以正常工作，但是当我通过套接字将它发送到客户端后，客户端只显示图像的一半，图像的另一半不正确，因为它都是灰色的。

谢谢！

**编辑**：现在我尝试改进阅读逻辑......但现在不起作用，当我尝试保存位图时出现 ArgumentException。

**客户**：

clientSocket = new TcpClient(); clientSocket.Connect(txtIP.Text, 8888);

```
 NetworkStream serverStream = clientSocket.GetStream();

    byte[] outStream = System.Text.Encoding.ASCII.GetBytes("screenCapture()$");

    serverStream.Write(outStream, 0, outStream.Length);
    serverStream.Flush();

    byte[] bytesFrom = new byte[10025];
    serverStream.Read(bytesFrom, 0, (int)clientSocket.ReceiveBufferSize);

    String dataFromClient = System.Text.Encoding.ASCII.GetString(bytesFrom);
    dataFromClient = dataFromClient.Substring(0, dataFromClient.IndexOf("$"));
    Int64 lengthdata = Convert.ToInt64(dataFromClient);
    byte[] inStream = new byte[lengthdata];

    int recived = 0;
   while (recived != lengthdata)
    {
        recived += serverStream.Read(inStream, 0,(int)clientSocket.ReceiveBufferSize);
    }

    TypeConverter tc = TypeDescriptor.GetConverter(typeof(Bitmap));
    Bitmap screenShot = (Bitmap)tc.ConvertFrom(inStream); //<--- Exception 
    screenShot.Save(@"C:\temp\capturas\scn" + numCapturas + ".png", ImageFormat.Png);
    clientSocket.Close(); 
```

**服务器：**

```
private void sendScreenCapture(NetworkStream networkStream)
{
    Bitmap bmpScreenshot = new Bitmap(Screen.PrimaryScreen.Bounds.Width, Screen.PrimaryScreen.Bounds.Height, PixelFormat.Format32bppArgb);
    Graphics gfxScreenshot = Graphics.FromImage(bmpScreenshot);

    gfxScreenshot.CopyFromScreen(Screen.PrimaryScreen.Bounds.X, Screen.PrimaryScreen.Bounds.Y, 0, 0, Screen.PrimaryScreen.Bounds.Size, CopyPixelOperation.SourceCopy);

    ImageConverter converter = new ImageConverter();
    byte[] sendBytes = (byte[])converter.ConvertTo(bmpScreenshot, typeof(byte[]));

    byte[] tamañoImagen = System.Text.Encoding.ASCII.GetBytes(sendBytes.Length.ToString() + "$");
    networkStream.Write(tamañoImagen, 0, tamañoImagen.Length);

    networkStream.Write(sendBytes, 0, sendBytes.Length);
    networkStream.Flush();
} 
```

**编辑2：**哈哈终于明白了，我必须控制字节[]中的位置：

```
 int pos = 0;
   while (lengthdata > 0)
   {
     int recived = serverStream.Read(inStream, pos, (int)lengthdata);
     if (recived == 0) break;
     lengthdata -= recived;
     pos+=recived;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:50:32.403

您正在读取`clientSocket.ReceiveBufferSize`一次字节并停止。据推测，图像更大，所以你错过了它的一部分。你需要更好的阅读逻辑......

一般来说，听起来您正在尝试自制远程桌面实现 - 考虑使用实际的远程桌面或类似工具。

# ruby - 随机置换迭代器

> ID：15761722
> 
> 赞同：3
> 
> 时间：2013-04-02T10:24:38.237
> 
> 标签：ruby, ruby-1.9.3

需要用新的迭代器扩充 Enumerable 模块，它以随机顺序返回集合元素。关于收集的唯一信息 - 它响应每个。没有关于元素的其他假设。我有一个解决方案 - 将元素包装到 Array 中，然后使用示例方法：

```
def each_permuted
    tmp = []
    self.each do |w|
        tmp << w
    end
    tmp.sample(tmp.length).each do |w|
        yield w
    end
end 
```

不喜欢它，因为这里我们经过两次收集（甚至三次计算 tmp.sample 随机排列）。单程可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:22:10.253

我怀疑是否有可能与signle go through有关。看看这个页面：[http ://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle#The_.22inside-out.22_algorithm](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle#The_.22inside-out.22_algorithm)

我在文章中实现了名为“由内而外的算法”的算法（它经过两次收集）：

```
def each_permuted
  generator = Random.new
  tmp = []
  self.each do |w|
    r = generator.rand(tmp.size + 1)
    if r == tmp.size
      tmp << w
    else
      tmp << tmp[r]
      tmp[r] = w
    end
  end

  tmp.each do |w|
    yield w
  end
end 
```

测试：

```
1.9.3p327 :064 > [1,2,3,4,5,6].each_permuted { |x| p x }
1
5
2
6
3
4
 => [1, 5, 2, 6, 3, 4]
1.9.3p327 :065 > [1,2,3,4,5,6].each_permuted { |x| p x }
4
3
2
5
6
1
 => [4, 3, 2, 5, 6, 1]
1.9.3p327 :066 > [1,2,3,4,5,6].each_permuted { |x| p x }
4
5
2
1
3
6
 => [4, 5, 2, 1, 3, 6] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:41:20.727

```
def each_permuted &pr; shuffle.each(&pr) end 
```

# javascript - 使用 Raphael.js 转换 SVG 路径

> ID：15761729
> 
> 赞同：0
> 
> 时间：2013-04-02T10:25:06.437
> 
> 标签：javascript, svg, raphael

我是 SVG 和 Raphael.js 的新手，所以虽然我编写的代码按预期/想要的那样工作，但我想检查我所做的是否是最佳实践/正确的方法，或者是否有更好的方法。

我有一条路径，它基本上是一个非圆（根据品牌）。我通过将 PNG 转换为 SVG（在线）获得了路径。我遇到的问题是，当图像本来是 72x72px 时，在线转换器已将其缩放到相当大的东西。

这实际上对我有利，因为我需要使用各种大小的圆圈。

所以我过去常常`.transform()`把它缩小并将它转换成我需要的大小。感觉有点像黑客。有没有更好的办法？或者这是你能做的最好的？

这是我的代码：http: [//jsfiddle.net/9LHUE/](http://jsfiddle.net/9LHUE/)。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:46:37.300

使用`.transform()`就好了。“可缩放矢量图形”的整个想法是它们是可扩展的。由于它们是根据基于坐标的定义在页面上呈现的，因此它们在任何尺寸下都应该看起来一样好。

对我来说，感觉就像是从 png 中导入这个漂亮的几何图形，而不是用更数学的方式来计算定义。我怀疑你真的需要如此巨大的贝塞尔曲线来制作如此简单的形状。

也就是说，我不知道什么是“外圈”。也许这根本不简单。

# bson - 理解 BSON 表示法

> ID：15761740
> 
> 赞同：4
> 
> 时间：2013-04-02T10:25:34.323
> 
> 标签：bson

我试图从网站[BSON Site理解](http://bsonspec.org/#/specification)**BSON Notations**。但是我无法理解相关性背后的原因。

我也提到了以下问题，但由于以下原因，我并不相信。

[问题 1](https://stackoverflow.com/questions/9855681/better-explanation-of-bson-spec-examples)：不熟悉**ruby**​​ 实现

[问题2](https://stackoverflow.com/questions/3554325/why-is-it-called-bson/3554355#3554355)：我理解字节分配。但不确定符号。

我想知道[BSON 站点](http://bsonspec.org/#/specificaiton)**中以下示例的 bson 对象是如何形成**的

**1.{"hello": "world"}
2.{"BSON": ["awesome", 5.05, 1986]}**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-11T12:49:20.703

**{“你好世界”}**

```
\x16\x00\x00\x00
  \x02 hello\x00 \x06\x00\x00\x00 world\x00
\x00 
```

（总体：22 字节）

前四个字节包含作为 32 位 little-endian 整数的总长度。

`\x16\x00\x00\x00`=> 那是十进制的 22。

现在是第一个元素。第一个字节给出数据的类型。

`\x02`=> 那是一个 UTF-8 字符串。

然后是第一个元素的名称，以空字符结尾的字符串。

`hello\x00`

接下来是先前给定类型的元素的数据，在本例中为字符串。对于可扫描性（因此您可以在不需要它们时快速跳过），字符串以它们的长度开始，并且以空值结尾。

`\x06\x00\x00\x00`=> 那是长度 6。

`world\x00`

现在将出现后续元素，如果有的话。整个事情以一个空字节结束。

`\x00`

* * *

**{“BSON”：[“真棒”，5.05，1986]}**

```
\x31\x00\x00\x00
  \x04 BSON\x00 \x26\x00\x00\x00
                  \x02 0\x00 \x08\x00\x00\x00 awesome\x00
                  \x01 1\x00 \x33\x33\x33\x33\x33\x33\x14\x40
                  \x10 2\x00 \xc2\x07\x00\x00
                \x00
\x00 
```

（整体：49 字节，数组：38 字节）

前四个字节包含作为 32 位 little-endian 整数的总长度。

`\x31\x00\x00\x00`=> 那是十进制的 49。

现在是第一个元素。第一个字节给出数据的类型。

`\x04`=> 那是一个数组。

然后是第一个元素的名称，以空字符结尾的字符串。

`BSON\x00`

接下来是先前给定类型中元素的数据，在本例中为数组。

*[引用：“数组的文档是一个普通的 BSON 文档，键为整数，从 0 (..) 开始”]*

为了可扫描性，并且因为它们自己形成文档，数组以它们的长度开始，并且以空值结尾。

`\x26\x00\x00\x00`=> 那是十进制的 38。

现在是数组的第一个元素。第一个字节给出数据的类型。

`\x02`=> 那是一个 UTF-8 字符串。

然后是数组的第一个元素的名称，以 null 结尾。

`0\x00`=> 这是关键 0。

接下来是先前给定类型的元素的数据，在本例中为字符串。字符串以它们的长度开始，并且以空值结尾。

`\x08\x00\x00\x00`=> 长度 8

`awesome\x00`

现在是数组的第二个元素。第一个字节给出数据的类型。

`\x01`=> 这是一个双浮点数。

然后是数组的第二个元素的名称，以 null 结尾。

`1\x00`=> 这是关键 1。

接下来是先前给定类型中元素的数据，在本例中为双浮点数。

`\x33\x33\x33\x33\x33\x33\x14\x40`=> 那是 5.5。

现在是数组的第三个元素。第一个字节给出数据的类型。

`\x10`=> 那是一个 32 位整数。

然后是数组的第三个元素的名称，以 null 结尾。

`2\x00`=> 这是关键 2。

接下来是先前给定类型中元素的数据，在本例中为 32 位整数。

`\xc2\x07\x00\x00`=> 那是 1986 年。

数组以空字节结束。

`\x00`

整个事情以一个空字节结束。

`\x00`

# database - Visual Studio 数据库项目约束 - 表脚本或单独的文件？

> ID：15761742
> 
> 赞同：3
> 
> 时间：2013-04-02T10:25:45.567
> 
> 标签：database, visual-studio, database-project

在 Visual Studio 数据库项目中，我看到表约束以两种不同的方式添加：

1.  作为用于创建表的同一脚本文件的一部分，在 CREATE TABLE 语句之后；
2.  在一个单独的文件中，保存在“Tables\Constraints”文件夹中，每个文件一个约束。

有充分的理由去做其中一个吗？

从 SQL Server 导入数据库时​​，Visual Studio 排在第 2 位，所以我猜这是最好的方法，但我不明白为什么。从开发人员的角度来看，数字 1 似​​乎更好，因为它使表定义和约束彼此“更接近”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:52:54.043

由于您提到的原因，我只能想到将它们保持在一起的原因（＃1）：它使表定义和约束彼此更接近。

Visual Studio 曾经将约束保存在单独的文件中，但在 SQL Server Data Tools 引入的最新“SQL Server 数据库项目”模板中停止了这种做法（开箱即用地安装在 VS 2012 中，并且需要单独下载 VS 2010）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T21:01:45.327

强烈投票给#1。将约束与表脚本分开使得以后添加不可为空的列变得非常痛苦。部署时，生成的 ALTER TABLE 脚本将无法将 NOT NULL 列添加到具有现有数据的表中，因为它没有 DEFAULT 约束。如果约束已经在 CREATE TABLE 脚本中，ALTER TABLE 将使用它，一切都会正常工作。

# c++ - 将 Try/Catch 与裸函数一起使用

> ID：15761749
> 
> 赞同：1
> 
> 时间：2013-04-02T10:26:12.390
> 
> 标签：c++

为什么函数不允许使用 Try-Catch `naked`？还有其他选择吗？

```
Error 2 error C2490: 'try' not allowed in function with 'naked' attribute 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T10:32:45.173

> 不允许结构化异常处理和 C++ 异常处理构造，因为它们必须在堆栈帧中展开。

（请参阅[与上述同一站点的此链接](http://msdn.microsoft.com/en-us/library/4d12973a%28v=vs.80%29.aspx)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T10:35:23.910

在“naked”上使用异常处理不起作用的原因是它们的函数没有标准的序言和结语部分，这是“展开堆栈”所必需的，而“catch”则有。它[在这里](http://msdn.microsoft.com/en-us/library/4d12973a%28v=vs.80%29.aspx)说（裸函数的限制）。

您将需要找到其他方法来实现您想要的 - 或者以某种方式包装您的裸函数以“让它们穿着”[穿着 = 与裸相反，不确定这是否是技术术语]，或者不要使用 try-抓住。

# javascript - 如何设置链接的动态ID？

> ID：15761750
> 
> 赞同：2
> 
> 时间：2013-04-02T10:26:19.303
> 
> 标签：javascript, jquery, html

我有一个水平菜单。我想使用 jQuery 为每个创建一个 id。我的代码是：

```
<div class="menuBar">
    <div class="menuHeader ui-corner-top">
        <span><a href="#" onclick="Home()">Home</a></span>
    </div>
    <div class="menuHeader ui-corner-top">
        <span><a href="#" onclick="NewTransaction()" id="menu2">New Transaction</a></span>
    </div>
</div> 
```

这里的菜单没有 id。我想使用 jQuery 动态创建 id。我怎样才能做到这一点？我做了一个这样的例子，但它不起作用：

```
var i = 0;
$('.menuHeader').each(function () {
    i++;
    newID = menu + i;
    $(this).attr('id', newID);
    $(this).val(i);
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T10:28:18.420

该`.each()`方法旨在使 DOM 循环结构简洁且不易出错。当被调用时，它会遍历作为 jQuery 对象一部分的 DOM 元素。每次回调运行时，都会通过当前循环迭代，从 0 开始。

*当您将菜单*字符串与`i`变量连接时，您还省略了引号。

```
$('.menuHeader').each(function (i) {
  $(this).find('a').attr('id', 'menu' + (i + 1));
  $(this).html((i + 1) + '. ' + $(this).html());
}); 
```

[jsFiddle 演示](http://jsfiddle.net/cE4GM/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:34:12.600

试试这个，不需要额外的变量`i`：

```
$('.menuHeader').each(function () {
    $(this).attr('id', 'menu' + ($(this).index() + 1));
    $(this).val($(this).index() + 1);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:30:05.647

试试这个

```
 $('.menuHeader').each(function (i) {
      newID = "menu_" + i;
      $(this).attr('id', newID);
      $(this).val(i);
    }); 
```

# c++ - C++ 文件读取

> ID：15761752
> 
> 赞同：0
> 
> 时间：2013-04-02T10:26:23.077
> 
> 标签：c++

我有一个文件，其中有一个数字，其中是后面的名称数。例如：

```
4
bob
jim
bar
ted 
```

我正在尝试编写一个程序来读取这些名称。

```
void process_file(ifstream& in, ofstream& out)
{
    string i,o;
    int tmp1,sp;
    char tmp2;
    prompt_user(i,o);
    in.open (i.c_str());

    if (in.fail())
    {
        cout << "Error opening " << i << endl;
        exit(1);
    }

    out.open(o.c_str());
    in >> tmp1;
    sp=tmp1;

    do
    {
        in.get(tmp2);
    } while (tmp2 != '\n');

    in.close();
    out.close();
    cout<< sp;
} 
```

到目前为止，我能够阅读第一行并将 int 分配给 sp

我需要 sp 来计算有多少个名字。我怎样才能读懂这些名字。我剩下的唯一问题是如何在忽略第一个数字的情况下获取名称。在那之前我无法实现我的循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:39:52.793

```
while (in >> tmp1)
        sp=tmp1; 
```

这成功地从第一个读取`int`然后尝试继续。由于第二行不是`int`，因此提取失败，因此它停止循环。到现在为止还挺好。

但是，流现在处于`fail`状态，除非您清除错误标志，否则所有后续提取都将失败。

`in.clear()`在第一个`while`循环之后说。

不过，我真的不明白您为什么要编写一个循环来提取单个整数。你可以写

```
if (!(in >> sp)) { /* error, no int */ } 
```

要阅读名称，请阅读`string`s。这次循环很好：

```
std::vector<std::string> names;
std::string temp;

while (in >> temp) names.push_back(temp); 
```

您可能希望在某处添加一个计数器，以确保名称的数量与您从文件中读取的数量相匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:41:19.573

```
int lines;
string line;
inputfile.open("names.txt");
lines << inputfile;
for(i=0; i< lines; ++i){   
   if (std::getline(inputfile, line) != 0){
      cout << line << std::endl;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:41:22.360

首先，假设第一个循环：

```
while (in >> tmp1)
    sp=tmp1; 
```

是为了读取开头的数字，这段代码应该这样做：

```
in >> tmp1; 
```

根据[手册](http://www.cplusplus.com/reference/istream/istream/operator%3E%3E/) `operator>>`：

> istream 对象 (*this)。
> 
> 提取的值或序列不会返回，而是直接存储在作为参数传递的变量中。

所以不要在条件下使用它，而是使用：

```
in >> tmp1;
if( tmp1 < 1){
     exit(5);
} 
```

* * *

其次，**永远不要**依赖文件格式正确的假设：

```
do {
    in.get(tmp2);
    cout << tmp2 << endl;
} while ( (tmp2 != '\n') && !in.eof()); 
```

尽管整个算法对我来说似乎有点笨拙，但这应该可以防止无限循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T10:43:34.963

这是一个简单的示例，说明如何以您想要的方式从文本文件中读取指定数量的单词。

```
#include <string>
#include <iostream>
#include <fstream>

void process_file() {
    // Get file name.
    std::string fileName;
    std::cin >> fileName;

    // Open file for read access.
    std::ifstream input(fileName);

    // Check if file exists.
    if (!input) {
        return EXIT_FAILURE;
    }

    // Get number of names.
    int count = 0;
    input >> count;

    // Get names and print to cout.
    std::string token;
    for (int i = 0; i < count; ++i) {
        input >> token;
        std::cout << token;
    }
} 
```

# java - 如何刷新我的主键列？

> ID：15761755
> 
> 赞同：2
> 
> 时间：2013-04-02T10:26:32.583
> 
> 标签：java, sql, database, db2, hibernate-annotations

直到最近我使用休眠`@Entity` **注释**映射到数据库表。所有主键都用**@GeneratedValue注释**`(strategy = GenerationType.IDENTITY)`

我有一个场景，我需要创建新架构 + 将数据从旧架构迁移到新架构。（只有很少的列更改，如删除、长度和类型）

当我尝试使用应用程序插入数据时成功将数据迁移到新模式表后，它会抛出异常

```
[ERROR] util.JDBCExceptionReporter DB2 SQL Error: SQLCODE=-803, SQLSTATE=23505, SQLERRMC=1; _NewSchema_._TableName_ , DRIVER=3.51.90 
```

我相信应用程序正在尝试使用从 1 开始的主键值再次插入行，因为相同的应用程序可以正常处理空表。

我希望插入数据行，并将其主键值作为现有行主键的最高值。

任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:42:50.993

是的，您可以通过更改表格来做到这一点。更改表并为 中的标识列设置起始索引`DB2`。

假设 is 的最大行数`TBALE_A`和`50`标识列的名称是`TABLE_ID`

```
ALTER TABLE TBALE_A ALTER COLUMN TABLE_ID
   RESTART WITH 51 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:45:16.320

您的猜测是正确的，这是我的解决方案，执行以下 SQL 为 ID 列指定一个指定的起始位置，然后您的应用程序将正常工作。

```
alter table TABLE_NAME alter column ID set GENERATED BY DEFAULT RESTART WITH 10000; 
```

希望能帮到你:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:44:23.260

在生成类型 IDENTITY 的情况下，您应该寻找身份列是自动的。@GeneratedValue(strategy = GenerationType.IDENTITY) 要求主键列是自动增量的。

# python - rpy2：检查是否安装了包

> ID：15761756
> 
> 赞同：3
> 
> 时间：2013-04-02T10:26:33.820
> 
> 标签：python, r, installation, package, rpy2

使用`rpy2`，我想检查是否安装了给定的包。如果是，我导入它。如果没有，我先安装它。

如何检查它是否已安装？

```
from rpy2 import *
if not *my package is installed*:
   rpy2.interactive as r
   r.importr("utils")
   package_name = "my_package"
   r.packages.utils.install_packages(package_name)
myPackage = importr("my_package") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T12:55:39.190

这是一个在 Python 端执行的函数（注意`contriburl`，应该设置为 CRAN 镜像，并且不处理安装库失败的情况）。

```
from rpy2.rinterface import RRuntimeError
from rpy2.robjects.packages import importr
utils = importr('utils')

def importr_tryhard(packname, contriburl):
    try:
        rpack = importr(packname)
    except RRuntimeError:
        utils.install_packages(packname, contriburl = contriburl)
        rpack = importr(packname)
    return rpack 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:57:23.083

您可以使用我从@SaschaEpskamp 对[另一个 SO 帖子](https://stackoverflow.com/questions/9341635/how-can-i-check-for-installed-r-packages-before-running-install-packages)的回答中获得的以下功能：

```
pkgTest <- function(x)
  {
    if (!require(x,character.only = TRUE))
    {
      install.packages(x,dep=TRUE)
        if(!require(x,character.only = TRUE)) stop("Package not found")
    }
  } 
```

并使用它来加载你的包：

```
r.source("file_with_pkgTest.r")
r.pkgTest("utils") 
```

一般来说，我建议不要尝试在 Python 中编写太多 R 代码。只需创建一些满足您需要的高级 R 函数，并将它们用作 R 和 Python 之间的最小接口。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T11:11:10.743

```
 import sys,subprocess
   your_package = 'nltk' 

   package_names = subprocess.Popen([pip freeze], 
   stdout=subprocess.PIPE).communicate()[0]
   pakage = package_names.split('\n')

   for package in packages:
      if package ==your_package:
         print 'true' 
```

# ios - 'NSInvalidArgumentException'，原因：'-[UIImage 长度]：无法识别的选择器发送到实例 0x1d53b6b0'

> ID：15761765
> 
> 赞同：0
> 
> 时间：2013-04-02T10:27:13.493
> 
> 标签：ios, objective-c, arrays, nsarray, overlay

我在相机叠加层上有一系列图像。当我单击按钮时，我需要使用相机视图拍摄一张叠加图像的快照。但是当我在设备中启动时出现以下错误。我搜索了一些我无法得到答案的现有代码。

错误：

```
[UIImage length]: unrecognized selector sent to instance 0x1d53b6b0 2013-04-02 11:27:18.748 
    ARimage[1166:907] *** Terminating app due to uncaught exception 
    'NSInvalidArgumentException', reason: '-[UIImage length]: unrecognized selector sent to instance 0x1d53b6b0' 
```

数组叠加图像的代码：

```
 NSArray *arrayOfImageFiles=[[NSArray alloc]initWithObjects:[UIImage imageNamed:@"img1.png"],
[UIImage imageNamed:@"img2.png"],
[UIImage imageNamed:@"img3.png"],
[UIImage imageNamed:@"img4.png"],
[UIImage imageNamed:@"img5.png"], nil];//array of images.

     for(NSString * imageFileName in arrayOfImageFiles)//here you are getting string format but imageFileName is an image object
          {
    UIImage * overlay = [UIImage imageNamed: imageFileName];//here imageFileName is image simply give here  UIImage * overlay=imageFileName;
    if(overlay)
        {

       CGSize overlaySize = [overlay size];                                                                    

       [overlay drawInRect:CGRectMake(30 * xScaleFactor, 100 * yScaleFactor, overlaySize.width * xScaleFactor, overlaySize.height * yScaleFactor)];                                                                  
        } else {                                                                                                                                      
         NSLog( @"could not find an image named %@", imageFileName);   

           }
          }                                                             
        UIImage *combinedImage = UIGraphicsGetImageFromCurrentImageContext();                          
         [self setStillImage:combinedImage];                                                           
           UIGraphicsEndImageContext();                                                     
             [[NSNotificationCenter defaultCenter] postNotificationName:kImageCapturedSuccessfully object:nil];                                    

       }];                                                 
        } 
```

捕获按钮单击的叠加图像：

```
 - (void)ButtonPressed {

    [self captureStillImageWithOverlay:[NSArray arrayWithObjects:[UIImage imageNamed:@"img1.png"],
[UIImage imageNamed:@"img2.png"],
[UIImage imageNamed:@"img3.png"],
[UIImage imageNamed:@"img4.png"],
[UIImage imageNamed:@"img5.png"], nil]];                                                          

         } 
```

图像显示在相机叠加视图中。当我单击按钮捕获叠加图像时，出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:39:25.913

该`for`声明：

```
for(NSString * imageFileName in arrayOfImageFiles) 
```

没有意义。中的对象`arrayOfImageFiles`是 UIImage 的实例，而不是`NSString`. 在这一行

```
 UIImage * overlay = [UIImage imageNamed: imageFileName]; 
```

您将 UIImage 作为字符串参数传递，该参数永远不会起作用。

我认为您需要将代码更改为这样（使用新的数组初始化器语法）：

```
NSArray *arrayOfImageFileNames = @[@"img1.png", @"img2.png", @"img3.png", @"img4.png", @"img5.png"];

for (NSString* imageFileName in arrayOfImageFileNames)
{  
    // The rest as per your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:33:38.107

试试这样

```
 NSArray *arrayOfImageFiles=[[NSArray alloc]initWithObjects:[UIImage imageNamed:@"img1.png"],
[UIImage imageNamed:@"img2.png"],
[UIImage imageNamed:@"img3.png"],
[UIImage imageNamed:@"img4.png"],
[UIImage imageNamed:@"img5.png"], nil];//array of images.

     for(NSString * imageFileName in arrayOfImageFiles)//here you are getting string format but imageFileName is an image object
          {
      UIImage * overlay=(UIImage *)imageFileName;
    if(overlay)
        {

       CGSize overlaySize = [overlay size];                                                                    

       [overlay drawInRect:CGRectMake(30 * xScaleFactor, 100 * yScaleFactor, overlaySize.width * xScaleFactor, overlaySize.height * yScaleFactor)];                                                                  
        } else {                                                                                                                                      
         NSLog( @"could not find an image named %@", imageFileName);   

           }
          }                                                             
        UIImage *combinedImage = UIGraphicsGetImageFromCurrentImageContext();                          
         [self setStillImage:combinedImage];                                                           
           UIGraphicsEndImageContext();                                                     
             [[NSNotificationCenter defaultCenter] postNotificationName:kImageCapturedSuccessfully object:nil];                                    

       }];                                                 
        } 
```

# internet-explorer - IE 中的 SignalR 支持

> ID：15761766
> 
> 赞同：1
> 
> 时间：2013-04-02T10:27:25.150
> 
> 标签：internet-explorer, signalr

我想在 IE 中运行 SignalR 应用程序。IE 中是否支持 SignalR。如果它不存在，我可以让它在 IE 中工作。**SignalR 不支持哪些版本的 IE。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:04:46.587

我们不支持 IE < 8。即使旧版本可能工作，我们也不会主动测试它们或修复它们中的错误

# c# - C#如何为单独的表单提供唯一ID

> ID：15761770
> 
> 赞同：0
> 
> 时间：2013-04-02T10:27:34.583
> 
> 标签：c#, forms, instance

我需要给表单的不同实例一个唯一的 ID 号。对于这个项目，我最多可以同时打开 5 个表单实例，并且必须能够关闭并重新启动表单以保留唯一编号。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:35:21.300

对它进行子分类并在其上具有用于序列的属性是否有效？就像是

```
public class YourMainForm : Form
{
   protected int SomeUniqueID;
   ... rest of all code for the original class
}

public class FormInstance1 : YourMainForm
{
    public FormInstance1() : base()
    { SomeUniqueID = 1;}
}

public class FormInstance2 : YourMainForm
{
    public FormInstance1() : base()
    { SomeUniqueID = 2;}
}

public class FormInstance3 : YourMainForm
{
    public FormInstance1() : base()
    { SomeUniqueID = 3;}
} 
```

# javascript - 从外部 javascript 获取 CGridView 图像的路径

> ID：15761771
> 
> 赞同：0
> 
> 时间：2013-04-02T10:27:35.073
> 
> 标签：javascript, image, yii, assets, cbuttoncolumn

我有一个外部 js 文件，我在其中手动将一行添加到 CGridView 生成的表中。

我的问题是如何将路径传递给 CButtonColumn 中的图像（如`update`或`delete`按钮）？我不想使用固定路径，因为当我将其移动到另一台服务器时，可能会导致路径错误（资产文件夹可能会更改对吗？）。

# sed - 使用 sed 递归查找和删除多个文件

> ID：15761773
> 
> 赞同：0
> 
> 时间：2013-04-02T10:27:37.047
> 
> 标签：sed

如何进行字符串匹配，例如：

```
<meta name="keywords" content=" 
```

然后每次找到匹配项时删除整行？

我希望对当前目录及以下目录中的所有文件执行此操作。

我也是 sed 的新手。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T10:36:31.637

试试这个命令：

```
find . -type f -exec sed -i '/foobar/d' {} \; 
```

更改`foobar`为您搜索的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T10:38:19.313

为了回答这个问题：“我如何递归地对所有文件执行 x？”，答案是使用`find`. 要使用`sed`删除行，您可以使用 non-portable `-i`，或者简单地编写脚本来重定向流。例如：

```
find . -exec sh -c 'f=/tmp/t.$$; 
    sed "/<meta name=\"keywords\" content=\"/d" $0 > $f; mv $f $0' {} \; 
```

# validation - 这是否可以验证域属于某人？

> ID：15761775
> 
> 赞同：0
> 
> 时间：2013-04-02T10:27:48.230
> 
> 标签：validation, dns, subdomain

例如，我有一个字段让用户输入他们的域，用户可以在此输入任何域，但我不认为该域属于该用户。当然，我可以生成一个随机数文本文件供用户上传，当我得到随机数文本文件时，如果匹配，我可以将其视为有效的域持有者。但是，除了从这种方法之外，无论如何都要这样做吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:49:20.457

我见过的选项：

*   让用户在文档根目录中创建一个文本文件，检查它
*   向 whois 中列出的联系人发送电子邮件（或其他角色类型帐户（postmaster、hostmaster 等），并带有他们需要返回的令牌
*   让他们在其 DNS 中创建一个唯一的“A”记录，您可以查询。

真的没有其他方法可以判断他们是否可以控制该域。使用 whois 信息并不是 100% 准确的，因为人们不会更新它，或者他们的信息没有注册给他们，或者被代理隐藏在诸如域之类的东西后面。DNS 中没有可以告诉您所有权的标准信息。由于 google 使用 DNS 方法和文本文件方法（我认为），您可以放心地假设这是验证它的好方法。

# tcp - TCP 是否使用另一个端口发送数据？

> ID：15761776
> 
> 赞同：6
> 
> 时间：2013-04-02T10:27:56.270
> 
> 标签：tcp, connection, port, send, listen

我听说对于 TCP 连接，服务器将侦听 1 个端口，并使用另一个端口发送数据。

例如，Web 服务器侦听端口 80。每当客户端连接到它时，该服务器将使用另一个端口（例如 9999）向客户端发送数据（Web 内容）。如果多个客户端连接到它，该服务器是否会创建多个“另一个端口”来发回数据？

客户端是否像服务器一样使用 2 个端口（监听端口和发送数据端口）？

我对吗？我听很多人这么说，我找不到任何关于这方面的好书或文章

请解释

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-02T11:57:10.130

> 我听说对于 TCP 连接，服务器将侦听 1 个端口，并使用另一个端口发送数据。

不可以。同一个端口用于监听和接受的连接，同样的连接通常用于发送和接收。TCP 连接是双向的。FTP 是一个例外，因为它使用两个连接：一个用于命令，一个用于数据。

> 例如，Web 服务器侦听端口 80。每当客户端连接到它时，该服务器将使用另一个端口（例如 9999）向客户端发送数据（Web 内容）。

不。

> 如果多个客户端连接到它，该服务器是否会创建多个“另一个端口”来发回数据？

不。

> 客户端是否像服务器一样使用 2 个端口（监听端口和发送数据端口）？

不。

> 我对吗？

不。

> 我听很多人这么说

他们都错了。

> 我找不到任何关于这个的好书或文章

没有。只有一本非常糟糕的书或文章会说这样的话。

# ios - 架构 i386 的未定义符号：“_OBJC_CLASS_$_SBJsonParser”

> ID：15761780
> 
> 赞同：1
> 
> 时间：2013-04-02T10:28:10.850
> 
> 标签：ios, objective-c, xcode4.5, sbjson

我正在创建一个 iphone 应用程序，它包含用于登录目的的 SBJson_3.1.1 [我正在使用 webservice 登录数据] 但是当我运行项目时它显示以下错误，我找不到它的原因我很陌生ios开发所以请指导我。

> 架构 i386 的未定义符号：
> “_OBJC_CLASS_$_SBJsonParser”，引用自：ViewController.o 中的 objc-class-ref ld：找不到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:49:07.640

如果您正在构建 SBJson 库并将您的应用程序链接到该库，则需要将`-ObjC`和`-all_load`标志添加到您的链接器选项。

# php - Symfony2 表单组件 - 违反 MVC 和 SRP？

> ID：15761785
> 
> 赞同：9
> 
> 时间：2013-04-02T10:28:18.663
> 
> 标签：php, model-view-controller, design-patterns, symfony, single-responsibility-principle

我使用 Symfony2 并与它的形式斗争得越多，我就越得出结论，它们是一个甚至不应该真正存在的巨大可怕的野兽。

我在这里看到这篇文章 [，](http://arialdomartini.wordpress.com/2011/04/01/how-to-kill-symfony%E2%80%99s-forms-and-live-well/)我发现我同意作者的观点。即使这篇文章是针对 Symfony 1.x 的，我认为它仍然适用于 Symfony2 中的表单组件。看起来表单组件确实试图在一个地方解决属于模板、控制器和模型的问题。这不是严重违反 MVC 和/或 SRP（单一责任原则）吗？

这可能是一个不同的问题，但我觉得它有点相关——我还注意到，许多 symfony 可用的捆绑包都试图解决视图之外的视图问题，例如：

KnpMenuBundle - 您在服务器端使用 oo 接口生成菜单（为什么不在它们所属的视图层中？）

IvoryCKEditorBundle - 将 textarea 转换为 ckeditor 是在视图文件中的一个 jquery 行中完成的，那么为什么这个包存在呢？我什至不想计算那里的行数。

所以在 Symfony 的核心中似乎到处都有这些违规行为，或者我只是不明白吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-19T11:30:15.083

表单处理的问题在于它违反了 MVC 的定义。这是一个被称为“横切”的问题，过去已经被科学研究过。例如，论文[Domain Driven Web Development With WebJinn](http://www.cs.virginia.edu/~lorenz/papers/oopsla03b/oopsla03b.pdf)是关于该主题的有趣读物。

例如，考虑表单与 MVC 不同层的关系：

**模型：**

*   表单复制了域模型 (DM) 的*信息结构*。如果您更改此结构（例如，通过向数据结构添加字段或向过程添加参数），您还必须调整表单以输入该信息。
*   他们需要来自您的 DM 的*类型信息，以将输入转换为那里所需的类型。*
*   他们需要知道您的 DM 中指定的*约束*以验证输入。
*   理想情况下，它们直接从/向您的 DM 读取和写入数据（例如，通过读取/写入数据结构的字段或通过使用提交的值作为参数调用 DM 中的过程）。

**控制器：**

*   表单接收提交的数据并将其发送给 DM。
*   他们根据是否成功验证来改变程序流程。

**看法：**

*   表单呈现为 HTML 标记和属性的复杂结构，依赖于上述所有内容（是否需要字段？是否应显示错误？如何对字段进行排序？在下拉列表中提供哪些选择？等）

因此，*不可能*编写一个不涉及所有这些层的表单抽象机制。相反，解决方案是根据 MVC 将表单库本身构造成满足 SRP 的不同层和子组件。如果您查看 Symfony2 表单组件，它做得非常好。;)

那么为什么它会是这样一个“巨大的可怕野兽”呢？第一个问题是抽象问题。例如，考虑一个简单的下拉菜单。如果我们想重用下拉菜单的代码，我们需要以某种方式抽象它。现在检查上面的列表，即使是这个简单的输入也触及了 MVC 应用程序的所有三层。你怎么能抽象出要被构造成三个不同部分的东西呢？

第二个问题是特征多样性。表单库永远无法解决开发人员在日常生活中面临的所有问题。因此，所有这些层和抽象机制都需要可扩展，以便您可以使它们的行为完全符合您的要求。

虽然是可扩展的，但 Form 组件已经解决了数百个您甚至不必再考虑的小问题。如何输入日期，如何使用不同的 UI（下拉菜单、复选框、单选按钮等）选择一个或多个选项列表，如何再次保护表单安全漏洞等等都是我可以写论文的主题关于。

您会看到表单库变得非常复杂。在编写此类“巨大的可怕野兽”时，我们最好的选择是让他们的 API 对于初学者来说尽可能简单，对于更高级的用户来说尽可能灵活，并编写关于充分利用其全部功能的大量文档。最后一点肯定仍然缺乏（[请帮助！](https://github.com/symfony/symfony-docs/issues)），但我们一直在努力解决上述所有问题。

另一方面，不幸的是，将复杂问题简化为简单问题是不可能的。

那么其他更简单的表单库呢？在我看来，这些甚至都没有尝试解决 Symfony2 表单组件已经为您解决的大多数问题。:)

**2014 年 1 月 24 日更新：**对于任何想了解更多（更多）的人，这[是我发表的一篇关于该主题的论文](https://webmozart.io/files/bsc-thesis.pdf)。

# javascript - 如何在 HighCharts 中添加与图例相关的类别？

> ID：15761788
> 
> 赞同：0
> 
> 时间：2013-04-02T10:28:21.593
> 
> 标签：javascript, graph, highcharts

除了一个问题，我几乎完成了我的图表。我想将每个独特的系列与图例和类别联系起来。我想在每个图表下放一个数字，这些数字将显示在图例中。所以让我从视觉上解释一下。

这是我所做的：

![在此处输入图像描述](https://i.stack.imgur.com/nFnEi.png)

这就是我想要做的：

![在此处输入图像描述](https://i.stack.imgur.com/KOfKI.png)

看？它总是放在`0`底部？但我想像第二个一样为每个条添加单独的数字。

这是[jsfiddle](http://jsfiddle.net/TBCd4/)。

我不想使用纯 HTML，因为我担心*定位*。

**PS：**我已经试过`categories: [1,2,3,4,5]`了，但是没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:39:38.317

您可以在发布时设置类别，

[http://jsfiddle.net/yTFTb/](http://jsfiddle.net/yTFTb/)

```
xAxis: {
            categories: [
                '1',
                '2',
                '3',
                '4',
                '5'
            ]
        }, 
```

或为 xAxis 设置 min/tickInterval 值。

[http://jsfiddle.net/yTFTb/2/](http://jsfiddle.net/yTFTb/2/)

[http://api.highcharts.com/highcharts#xAxis.min](http://api.highcharts.com/highcharts#xAxis.min) [http://api.highcharts.com/highcharts#xAxis.tickInterval](http://api.highcharts.com/highcharts#xAxis.tickInterval)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:55:48.800

类别对您不起作用的原因是您指定了 5 个系列和 1 个数据点，而类别与 5 个数据点相关。如果您像这样指定数据：

```
var data = [{data:[
    {
        x:1,y:6793,name:'lorem',pname:'some explanation',chid:9,color:'red'
    },
    {
        x:2,y:4237,name:'ipsum',pname:'some explanation',chid:7
    },
    {
        x:3,y:3384,name:'dolor',pname:'some explanation',chid:23
    },
    {
        x:4,y:2542,name:'sit',pname:'some explanation',chid:1
    },
    {
        x:5,y:724,name:'amet',pname:'some explanation',chid:1
    }
]}
]; 
```

[http://jsfiddle.net/Z5VPw/](http://jsfiddle.net/Z5VPw/)

你可以让它工作，因为有 5 个类别和 5 个数据点。

我不得不修改你的函数来迭代点，而不是系列：

```
$.each(chart.series[0].points, function (i, series) { 
```

# javascript - 在javascript中将32位整数转换为4字节数据

> ID：15761790
> 
> 赞同：20
> 
> 时间：2013-04-02T10:28:23.673
> 
> 标签：javascript

我被要求将整数转换为 32 位二进制数。因此使用`integer.toString(2)`0 和 1 的 32 位二进制格式得到所需的值。但实际上我被要求做的是将整数转换为 4 个字节的数据。我无法按照建议获得输出。我用过`integer.toString(8)`，`integer.toString(16)`。但没有用。

例子：

```
 num=1065489844 
 num.toString(2) //Output: 111111100000100001010110110100
 num.toString(8) //Output: 7740412664 
```

请告诉我，我缺少的地方。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-07-25T02:11:14.440

现在您可以使用`ArrayBuffer`和`DataView`。它们是原生的，因此如果您需要经常使用它，性能会更好。

```
function toBytesInt32 (num) {
    arr = new ArrayBuffer(4); // an Int32 takes 4 bytes
    view = new DataView(arr);
    view.setUint32(0, num, false); // byteOffset = 0; litteEndian = false
    return arr;
} 
```

等于

```
function toBytesInt32 (num) {
    arr = new Uint8Array([
         (num & 0xff000000) >> 24,
         (num & 0x00ff0000) >> 16,
         (num & 0x0000ff00) >> 8,
         (num & 0x000000ff)
    ]);
    return arr.buffer;
} 
```

它使用javascript按位运算符来实现这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-16T15:13:25.147

SEIAROTg 的回答不输出字符串。我已经用正数和负数进行了全面测试，这段代码会给你一个 4 字节的字符串输出，代表大端格式的数字（2 的补码 0xFFFFFFFF = -1）。

```
var toBytesInt32=function(num) {
    var ascii='';
    for (let i=3;i>=0;i--) {
        ascii+=String.fromCharCode((num>>(8*i))&255);
    }
    return ascii;
}; 
```

顺便说一句，如果你想反过来，你可以使用

```
var fromBytesInt32=function(numString) {
    var result=0;
    for (let i=3;i>=0;i--) {
        result+=numString.charCodeAt(3-i)<<(8*i);
    }
    return result;
}; 
```

将 4 字节字符串转换为整数

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T10:38:18.097

如果您需要十六进制格式的输出，这里是代码。

```
/* Convert value as 8-bit unsigned integer to 2 digit hexadecimal number. */

function hex8(val) {
    val &= 0xFF;
    var hex = val.toString(16).toUpperCase();
    return ("00" + hex).slice(-2);
}

/* Convert value as 16-bit unsigned integer to 4 digit hexadecimal number. */

function hex16(val) {
    val &= 0xFFFF;
    var hex = val.toString(16).toUpperCase();
    return ("0000" + hex).slice(-4);
}

/* Convert value as 32-bit unsigned integer to 8 digit hexadecimal number. */

function hex32(val) {
    val &= 0xFFFFFFFF;
    var hex = val.toString(16).toUpperCase();
    return ("00000000" + hex).slice(-8);
}

var num = 1065489844;
console.log("0x" + hex32(num)); // will output 0x3F8215B4 
```

# java - 使用新的 try-with-resources 块在 SQLException 上回滚事务

> ID：15761791
> 
> 赞同：57
> 
> 时间：2013-04-02T10:28:30.430
> 
> 标签：java, try-with-resources

我对 try-with-resources 有疑问，我只是想确定一下。如果我需要对异常做出反应，并且我仍然需要 catch 块中的资源，我可以使用它吗？给出的例子是这样的：

```
try (java.sql.Connection con = createConnection())
{
    con.setAutoCommit(false);
    Statement stm = con.createStatement();
    stm.execute(someQuery); // causes SQLException
}
catch(SQLException ex)
{
    con.rollback();
    // do other stuff
} 
```

我担心在这种情况下我仍然注定要使用旧的 try-catch-finally，即使根据 oracle 文档 - “catch and finally blocks in a try-with-resources statement, any catch or finally block are run after the resources宣布已关闭。”

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-08T15:55:26.823

根据语言规范，将在执行 catch 子句之前关闭连接（[http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.20.3.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.20.3.2)） .

一个可能的解决方案是嵌套 try-with-resources 语句：

```
try (java.sql.Connection con = createConnection())
{
    con.setAutoCommit(false);
    try (Statement stm = con.createStatement())
    {
        stm.execute(someQuery); // causes SQLException
    }
    catch(SQLException ex)
    {
        con.rollback();
        con.setAutoCommit(true);
        throw ex;
    }
    con.commit();
    con.setAutoCommit(true);
} 
```

希望这能说明这一点。如果您打算在生产代码中使用它，这应该会有所改进。

例如，如果您正在使用连接池，那么您必须在获得连接时返回连接，因此 con.setAutoCommit(true); 应该在 finally 子句中完成。这意味着外部的 try-with-resources 应该是传统的 try-catch-finally。

***编辑 (2018)***

我仍然看到人们对此发表评论，所以我想我会给它一个 2018 年的回复。我不再使用Java了，主要是使用Scala、Clojure和Kotlin，并且这段代码没有经过测试，所以请把这当作另一个例子。但是，由于 Java 有 lambda，我认为以下方法要好得多。我在这些其他语言的生产代码中做了类似的事情。

在这种方法中，有一个 inTransaction 函数来处理所有讨厌的事务。但是用法很简单。

```
public class Foo {

    interface ConnectionProvider {
        Connection get() throws SQLException;
    }

    public static <A> A doInTransation(ConnectionProvider connectionProvider, Function<Connection, A> f) throws SQLException {
        Connection connection = null;
        A returnValue;
        boolean initialAutocommit = false;
        try {
            connection = connectionProvider.get();
            initialAutocommit = connection.getAutoCommit();
            connection.setAutoCommit(false);
            returnValue = f.apply(connection);
            connection.commit();
            return returnValue;
        } catch (Throwable throwable) {
            // You may not want to handle all throwables, but you should with most, e.g.
            // Scala has examples: https://github.com/scala/scala/blob/v2.9.3/src/library/scala/util/control/NonFatal.scala#L1
            if (connection != null) {
                connection.rollback();
            }
            throw throwable;
        } finally {
            if (connection != null) {
                try {
                    if(initialAutocommit){
                        connection.setAutoCommit(true);
                    }
                    connection.close();
                } catch (Throwable e) {
                    // Use your own logger here. And again, maybe not catch throwable,
                    // but then again, you should never throw from a finally ;)
                    StringWriter out = new StringWriter();
                    e.printStackTrace(new PrintWriter(out));
                    System.err.println("Could not close connection " + out.toString());
                }
            }
        }
    }

    public static void main(String[] args) throws SQLException {
        DataSource ds = null;

        // Usage example:
        doInTransation(ds::getConnection, (Connection c) -> {
            // Do whatever you want in a transaction
            return 1;
        });
    }
} 
```

我希望有一些经过实战考验的库可以为您做这些事情，至少在这些其他语言中是这样。

我看到有一些关于自动提交和连接池的评论。上面的例子应该不知道连接来自哪里，一个池与否，即只有当它是初始值时才将它设置回true。因此，如果从池中它是错误的，则不应触摸它。

关于资源尝试的最后一句话。我不认为这是一个很好的抽象，所以我会在更复杂的场景中小心使用它。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-05-09T18:17:53.080

在您的代码中，您正在捕获“SQLException”以执行 autoCommit 重置。任何类型的运行时异常（如空指针异常）都会从您的代码中冒泡，而无需重置自动提交。

try-with-resource 语法使编译器生成一些精彩的代码来覆盖所有执行路径，并通过关闭来跟上所有被抑制的异常。使用几个帮助类，您可以将提交/回滚和重置自动提交插入代码生成过程：

```
import java.sql.SQLException;
import java.sql.Connection;

public class AutoRollback implements AutoCloseable {

    private Connection conn;
    private boolean committed;

    public AutoRollback(Connection conn) throws SQLException {
        this.conn = conn;        
    }

    public void commit() throws SQLException {
        conn.commit();
        committed = true;
    }

    @Override
    public void close() throws SQLException {
        if(!committed) {
            conn.rollback();
        }
    }

}

public class AutoSetAutoCommit implements AutoCloseable {

    private Connection conn;
    private boolean originalAutoCommit;

    public AutoSetAutoCommit(Connection conn, boolean autoCommit) throws SQLException {
        this.conn = conn;
        originalAutoCommit = conn.getAutoCommit();
        conn.setAutoCommit(autoCommit);
    }

    @Override
    public void close() throws SQLException {
        conn.setAutoCommit(originalAutoCommit);
    }

} 
```

现在您可以使用“try with resource”语法来控制回滚和自动提交，如下所示：

```
 try(Connection conn = getConnection(),
        AutoSetAutoCommit a = new AutoSetAutoCommit(conn,false),
        AutoRollback tm = new AutoRollback(conn)) 
    {

        // Do stuff

        tm.commit();
    } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-05-08T04:56:09.230

```
 //try with resources
    try(Connection conn = this.connectionProvider.getConnection()){//auto close BEFORE reach this , catch block, so we need a inner try block for statement
        boolean oldAutoCommit=conn.getAutoCommit();
        conn.setAutoCommit(false);//auto commit to false
        try(
            Statement stm = con.createStatement()
        ){
            stm.execute(someQuery); // causes SQLException
            conn.commit();//commit
        }
        catch (SQLException ex){
            conn.rollback();//error, rollback
            throw ex;//If you need to throw the exception to the caller
        }
        finally {
            conn.setAutoCommit(oldAutoCommit);//reset auto commit
        }
    } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-30T16:42:31.070

在上面的例子中，我认为最好放在`con.commit()`nested 里面`try-catch`，因为它也可以 throw `SQLException`。

```
 try (java.sql.Connection con = createConnection())
    {
        con.setAutoCommit(false);
        try (Statement stm = con.createStatement())
        {
            stm.execute(someQuery); // causes SQLException
            con.commit();           // also causes SQLException!
        }
        catch(SQLException ex)
        {
            con.rollback();
            throw ex;
        }finally{
            con.setAutoCommit(true);
        }
    } 
```

我们在生产环境中遇到了这样的问题，会话未关闭。

# ruby - 如何打印包含 TAB 字符的 Ruby 文件中的行？

> ID：15761795
> 
> 赞同：1
> 
> 时间：2013-04-02T10:28:37.993
> 
> 标签：ruby

我有两个文件，“test1.rb”，“test2.rb”。“test1.rb”`"\t"`在第 82 行和第 84 行包含 TAB ( ) 字符。

我想要这样的打印输出：

```
test1.rb: 82 (it means that there are TAB included in the line of 82).
test1.rb: 84 (it means that there are TAB included in the line of 84). 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T10:49:29.967

```
def check_tab file
  open(file){|io| io.each_line.with_index(1){|s, l| puts "#{file}: #{l}" if s =~ /\t/}}
end
%w[test1.rb test2.rb].each{|f| check_tab(f)} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:29:40.637

我会这样做：

```
["test1.rb", "test2.rb"].each do |fn|
  File.foreach(fn) do |li|
    puts "#{ fn }: #{ $. }" if li["\t"]
  end
end 
```

`$.`表示“正在读取的文件中的当前行号”。

# .htaccess - 如何使用 .htaccess 文件确保所有三个变量都存在

> ID：15761796
> 
> 赞同：0
> 
> 时间：2013-04-02T10:28:38.110
> 
> 标签：.htaccess, url-rewriting

在我的网站上，我向人们展示了两张定制摩托车的图片，并允许他们投票选出最喜欢的。当他们点击按钮投票时，我会传递获胜者 ID、失败者 ID 和时间。我使用 ColdFusion 来确定 ID 和时间是否合适。

我的问题是 .htaccess 文件。如果没有三个变量，我想将它们重定向到起始页。

```
--- is a good url
http://www.flyingpiston.com/rate/ 

--- is a good url
http://www.flyingpiston.com/rate/1502/1991/2013-4-2-4-43/

--- is NOT a good url
http://www.flyingpiston.com/rate/1502/1991/

--- my current settings
RewriteRule ^rate/([0-9]+)/([0-9]+)/(.*)/ /index.cfm?section=rate&winnerid=$1&loserid=$2&time=$3 [NS,L]
RewriteRule ^rate/([0-9]+)/([0-9]+)/ /index.cfm?section=rate [NS,L]
RewriteRule ^rate/ /index.cfm?section=rate [NS,L]

--- is not doing what I think it should do
RewriteRule ^rate/([0-9]+)/([0-9]+)/ /index.cfm?section=rate [NS,L] 
```

如果第三个变量不存在，我认为上面的行应该重定向到起始页。

如何调整我的语句，以便有三个变量或没有变量传递？

要查看该页面，您可以访问此处：[http](http://www.flyingpiston.com/rate/) : //www.flyingpiston.com/rate/ 仅使用前两个按钮进行投票。左上角的按钮传递三个变量。右上角的按钮只传递获胜者和失败者的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:43:03.720

它测试了完整的 URL，但实际上存在一些缺陷：

这条线

```
RewriteRule ^rate/([0-9]+)/([0-9]+)/(.*)/ /index.cfm?section=rate&winnerid=$1&loserid=$2&time=$3 [NS,L] 
```

还匹配一个空字符串作为第三个匹配项，也许您应该将其更改为

```
RewriteRule ^rate/([0-9]+)/([0-9]+)/(.+)/ /index.cfm?section=rate&winnerid=$1&loserid=$2&time=$3 [NS,L] 
```

此外，这一行：

```
RewriteRule ^rate/([0-9]+)/([0-9]+)/ /index.cfm?section=rate [NS,L] 
```

匹配 URL 的开头而不是完整的 URL，请尝试将其更改为：

```
RewriteRule ^rate/([0-9]+)/([0-9]+)(/?)$ /index.cfm?section=rate [NS,L] 
```

（也就是说，使用 line-placeholder 的 $ -end 匹配整个 URL，并在两种情况下都重写，最后有和没有斜线）。您可以在[此处](http://regexr.com?34c7h)测试最后一个正则表达式。

# java - JIRA 中的单个文件上传

> ID：15761800
> 
> 赞同：5
> 
> 时间：2013-04-02T10:28:43.377
> 
> 标签：java, file-upload, jira, jira-plugin

我正在尝试为我的插件在 JIRA上上传**一个文件。**默认的 JIRA 上传行为是通过 Ajax 上传文件并将它们转换为复选框，从而使多个文件能够通过一个表单`type="file"`元素“上传”（见图）。

![附加的文件](https://i.stack.imgur.com/mm4m7.png)

要禁用内联附加，`ignore-inline-attach`可以指定类：

```
<form action="TestBrowse.jspa" id="upload-form" method="post" enctype="multipart/form-data">
        <input type="hidden" name="id" value="10000"/>
        <input type="file" name="uploadFile" class="ignore-inline-attach"/>
        <input type="submit"/>
</form> 
```

但是，当我尝试`MultipartRequestWrapper`在 servlet / action 中获取时，我什么也得不到（根据各种来源，这应该是要走的路，比如[这里](https://answers.atlassian.com/questions/56249/how-to-get-multipartrequestwrapper-object-in-jira)）：

```
@Override
public String doExecute() throws Exception {
  MultiPartRequestWrapper requestWrapper = ServletActionContext.getMultiPartRequest();
  if (requestWrapper == null)
    log.error("Why am I not getting a multipart wrapper?")
  else  {
    ...do something...
  }  
  return returnCompleteWithInlineRedirect("/browse/" + getIssueObject().getKey());
} 
```

此外，请求的 enctype 似乎是`application/x-www-form-urlencoded; charset=UTF-8`，尽管`multipart/form-data`在表单模板中明确指定。有什么想法我犯了错误或一些解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-11T18:47:01.920

这是一个迟到的答案，但这是我在调查 1 天后发现的......

如果您`<input type="file">`在 JIRA 对话框中，则使用 ajax 提交表单。这就是为什么请求的内容类型是`"application/x-www-form-urlencoded;"`. 尝试在新的浏览器选项卡中打开链接，此问题就会消失。您将`MultiPartRequestWrapper`在服务器中收到一个，因为该表单已正常提交（没有 ajax）。

## 1) 扩展 JIRA.FormDialog

我的第一种方法是扩展`JIRA.FormDialog`组件以发送`FormData`带有文件和其他表单输入的对象。这有效，服务器收到了`multipart/form-data`请求。

***（编辑）*** ~~问题是将响应返回到对话框。我找不到办法做到这一点。响应总是返回带有页眉和页脚的完整 JIRA 页面，因为不知何故服务器不知道我在对话框的上下文中。~~

我找出问题所在。服务器不使用参数`inline`和`decorator`位置（附加到 FormData 对象）。我尝试将这些参数添加到操作 url 并且它有效：

```
 <form ... action="MyUploadAction.jspa#if($action.isInlineDialogMode())?inline=true&decorator=dialog#end"> 
```

这是代码：

```
var TEST = window.TEST || {};
TEST.FormDialog = JIRA.FormDialog.extend({
    _getFormDataAsObject: function() {
        var data = new FormData(this.$form[0]);
        data.append('inline', true);
        data.append('decorator', 'dialog');
        return data;
    }
});

JIRA.Dialogs.uploadFile = new TEST.FormDialog({
    id: "dialog-id",
    trigger: "a.dialog-trigger",
    ajaxOptions: JIRA.Dialogs.getDefaultAjaxOptions,        
    onSuccessfulSubmit : JIRA.Dialogs.storeCurrentIssueIdOnSucessfulSubmit,
    submitAjaxOptions: {
        type: "post",
        data: {
            inline: true,
            decorator: "dialog"
        },
        processData: false,
        contentType: false,
        mimeType: 'multipart/form-data',
        dataType: "html"
    }
}); 
```

## 2) 文件读取器 API

接下来我尝试了`FileReader`API。当用户更改文件输入时，我读取文件并将其内容存储在 DOM 中。当通过 ajax 提交表单时，文件内容被视为普通 var。我不太喜欢这种方法，因为如果文件很大，那么网页会占用这个不必要的内存来存储内容。

## 3) JIRA 临时文件 API

最后，当您在输入中输入文件时，我尝试使用 JIRA 方法（删除`ignore-inline-attach`）发送文件。JIRA 将它们作为临时文件存储在服务器中。然后，您必须通过 JIRA Attachment API 在 webwork 操作中访问它们。这种方法的缺点是可以发送多个文件，但我只想发送一个文件（就像你一样）。

请注意，最后两种方法需要两种方法来处理服务器中的文件：1）正常`MultiPartRequestWrapper`，因为用户仍然可以在新页面中打开对话框并且表单不是通过 ajax 提交的。2）具体的方法。

在解决了响应问题（如上所述）之后，我最终使用了 1) 方法。高温高压

# css - 我怎样才能定位这个div？

> ID：15761806
> 
> 赞同：0
> 
> 时间：2013-04-02T10:29:01.377
> 
> 标签：css, html, position, css-float

我得到了 5 个 div，其中 4 个得到了：

```
4divs{width:150px; height:100px; float:left;} 
```

和中间div：

```
midDiv{width:200px; height:200px; float:left;} 
```

和容器：

```
container{width:500px; height:200px;} 
```

我想要的是：

![](https://i.stack.imgur.com/5K8ja.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:58:14.263

为您`#container{position:relative;}`的每个 div 提供绝对定位：

```
div:nth-child(1){position:absolute; top:0; left:0;}
div:nth-child(2){position:absolute; top:100px; left:0;}
div:nth-child(3){position:absolute; top:0; left:100px;}
div:nth-child(4){position:absolute; top:0; right:0;}
div:nth-child(5){position:absolute; top:100px; right:0;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:40:48.037

假设名称：div1、div2、div3、div4 和 div-mid。试试这样安排...

`<container>`

`<div1> </div1>`

`<div-mid> </div-mid>`

`<div2> </div2>`

`<div3> </div3>`

`<div4> </div4>`

`</container>`

然后你会

*   将 div3 定位到容器*中*的最左侧。
*   将 div4 定位到容器*中*的最右侧。
*   *然后将它们都放在*容器的底部。

尝试`float: left`并`float : right`为此。尝试`position: relative`为 div3 和 div4 做。

如果没有，请获取 Firebug： [https ://getfirebug.com/](https://getfirebug.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:49:44.063

您无法从给定的 CSS 状态中为 Div 实现您想要的。无论您做什么，都必须修改指定的 CSS 才能实现。

有两种可能的方法可以解决它

1.  将三个 div 向左浮动或内联显示，即在水平线上彼此相邻。然后将左右div垂直分成两部分即

    ```
     <div class="container">
       <div class="left">
          <div class="upper"> 
          </div>
          <div class="lower"> 
          </div>
      </div>
      <div class="middle">
      </div>
      <div class="right">
         <div class="upper"> 
         </div>
         <div class="lower"> 
         </div>
     </div> 
    ```

2.  制作你的 div`position:absolute`

看到这个[小提琴的第一个解决方案](http://jsfiddle.net/ULmzb/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T10:52:24.257

鉴于您当前的 html 结构，您将无法仅使用 css 创建该布局。

您确实需要具有以下 html 结构，这意味着一个带有三个浮动 dics 的容器，其中包含您的各个块。

```
<div class="container">

    <div class="container-2">
        <div class="div1">
        </div>
        <div class="div1">
        </div>
    </div>

    <div class="container-2">
        <div class="div2"></div>
    </div>

    <div class="container-2">
        <div class="div1">
        </div>
        <div class="div1">
        </div>
    </div>

</div><!-- / .container -->

.container {
    overflow: hidden;
}

.container-2 {
    float: left;
    margin-right: 10px;
    display: inline-block;
}

.div1 {
    width: 150px;
    height: 100px;
    margin-bottom: 10px;
}

.div2 {
    width: 150px;
    height: 210px;
    margin-bottom: 10px;
}

.container-2 .div1:last-child {
    margin-bottom: 0;
} 
```

# java - 带有 MySQL 和 Java Web 应用程序的图表

> ID：15761808
> 
> 赞同：1
> 
> 时间：2013-04-02T10:29:04.937
> 
> 标签：java, web-applications, google-visualization, jfreechart

我一直在网上查看有关在 Java Web 应用程序中使用图表库的示例，但他们都在尝试实现某种形式的 php 以在生成图表之前获取数据。

理想情况下，我想使用谷歌图表，然后通过某种类型的 jsp/servlet 从我的数据库中获取数据，但我无法在没有 php 的情况下在线找到任何示例。

我试过 Jfreechart 但又找不到太多文档。

我想问的问题是，我如何能够绘制从 MySQL 获取数据的图表并将它们显示在我的网页上。所有这些目前都在 Netbeans 中。

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:48:45.887

您是否考虑过使用 Java Server Faces，而不是使用 jsp/servlet？您可以在[此处](https://stackoverflow.com/questions/2095397/what-is-the-difference-between-jsf-servlet-and-jsp/2097732#2097732)找到对差异的解释。

如果您要使用 Java Server Faces，那么您将能够使用[PrimeFaces Charts](http://www.primefaces.org/showcase/ui/barChart.jsf)创建如下内容：

![PrimeFaces 图表](https://i.stack.imgur.com/8qg6T.jpg)

[您可以在 PrimeFaces 网站上看到完整的示例集，这里](https://netbeans.org/kb/docs/web/jsf20-crud.html#completedProject)有一个关于创建生成 JavaServer Faces 2 应用程序的教程，其中包括创建一个与 MySQL 数据库对齐的应用程序。

使用这种方法，您可以将图表数据放在 bean 中，然后从您的网页中引用它（bean）。

如果您想使用 JFreeChart，您可以使用[`ChartUtilities#saveChartAsXXXX`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/ChartUtilities.html)将图表的图像保存在服务器上，然后在您的网页中包含指向生成的图像的链接。

# java - EnumSet 可打包

> ID：15761818
> 
> 赞同：2
> 
> 时间：2013-04-02T10:29:36.693
> 
> 标签：java, android, serialization, parcelable, enumset

我正在编写该`writeToParcel`方法，并且我的模型具有`EnumSet<object>`as 属性。我不知道`out.write....()`我必须为这种类型使用哪个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:10:24.347

EnumSet 实现`Serializable`，因此您可以使用`out.writeSerializable(enumset)`

# php - 致命错误：调用未定义函数 ldap_control_paged_result()

> ID：15761820
> 
> 赞同：0
> 
> 时间：2013-04-02T10:29:43.540
> 
> 标签：php, ldap

我在我的项目中使用 LDAP。我收到以下错误。

```
Fatal error: Call to undefined function ldap_control_paged_result() 
```

这是我的代码外观：

```
$ds=ldap_connect("162.188.10.180");  // must be a valid LDAP server!
if ($ds)
{
    ldap_set_option($ds, LDAP_OPT_PROTOCOL_VERSION, 3);

     $dn        = 'DC=testphp,DC=local';
     $filter    = '(|(cn=vol*)(givenname=Abd*))';
     $justthese = array('ou', 'cn', 'givenname', 'mail');
     ldap_control_paged_result($ds, 1);

     $sr = ldap_search($ds, $dn, $filter, $justthese);

     $info = ldap_get_entries($ds, $sr);

     echo $info['count'] . ' entries returned' . PHP_EOL;

    ldap_close($ds);
} else
{
    echo "<h4>Unable to connect to LDAP server.</h4>".ldap_error($ds);
} 
```

请帮我解决。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:31:43.080

## 错误的 PHP 版本

函数[ldap_control_paged_result](http://php.net/manual/en/function.ldap-control-paged-result.php)仅在 php 5.4 或更高版本中可用 - 您需要将 php 升级到当前版本或使用不同的函数。

# kinect - Kinect 工具箱检测新形状

> ID：15761822
> 
> 赞同：1
> 
> 时间：2013-04-02T10:29:47.637
> 
> 标签：kinect, kinect.toolbox

**问题**

所以我正在使用 kinect 工具箱（来源： http: [//kinecttoolbox.codeplex.com/](http://kinecttoolbox.codeplex.com/)）并且想要检测除圆形之外的其他形状。但我找不到如何为任何其他形状制作“CircleKB.save”类型文件（由该工具箱使用）的方法，因为我不知道这个圆形知识库文件中有什么或它是如何制作的. 或者简单地告诉我如何在此工具箱中添加自定义手势。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:01:42.610

您应该像这样编辑您的“Learningmachine.cs”：

```
public void AddPath(RecordedPath path)
{
    path.CloseAndPrepare();
    Paths.Add(path);
    SaveTheGestureInFile();
}

public void SaveTheGestureInFile()
{
    using (Stream recordStream = File.Create(@"D:\Research\Kinect Toolbox\Sources\GesturesViewer\Data\abc.save")) //wherever you want to save the file.
    {
        Persist(recordStream);
    }
} 
```

# php - 在smarty中遍历多维数组

> ID：15761823
> 
> 赞同：1
> 
> 时间：2013-04-02T10:29:51.310
> 
> 标签：php, arrays, smarty

我坚持使用 smarty 中的这种多维数组处理（更准确地说是 prestashop）。

我在遍历所有元素时遇到了麻烦。

这是我的数组，print_r-ed。

```
(
    [0] => Array
        (
            [superorder] => 1
            [basket] => Array
                (
                    [0] => Array
                        (
                            [product_name] => iPod shuffle
                            [position_left] => 37
                            [position_top] => 73
                            [order] => 1
                        )

                    [1] => Array
                        (
                            [product_name] => iPod touch
                            [position_left] => 5
                            [position_top] => 66
                            [order] => 2
                        )

                    [2] => Array
                        (
                            [product_name] => iPod Nano
                            [position_left] => 67
                            [position_top] => 49
                            [order] => 3
                        )

                )

        )

    [1] => Array
        (
            [superorder] => 2
            [basket] => Array
                (
                    [0] => Array
                        (
                            [product_name] => iPod shuffle
                            [position_left] => 37
                            [position_top] => 73
                            [order] => 1
                        )

                    [1] => Array
                        (
                            [product_name] => iPod touch
                            [position_left] => 5
                            [position_top] => 66
                            [order] => 2
                        )

                    [2] => Array
                        (
                            [product_name] => iPod Nano
                            [position_left] => 67
                            [position_top] => 49
                            [order] => 3
                        )

                )

        )

) 
```

这就是我正在尝试使用的，但失败得很惨：

```
{foreach from=$all_baskets name=outer key=superorder item=basket}

    <div superorder="{$basket.superorder}" >

        {foreach from=$basket name=inner key=i item=basket_image}

            <div product_name="{$basket_image.product_name}" order="{$basket_image.order}" style="left:{$basket_image.position_left}px; top:{$basket_image.position_top}px"></div>

        {/foreach}

    </div>

{/foreach} 
```

我是 smarty 的新手，我知道我做错了什么，所以我希望你能帮助我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:35:16.147

没关系，伙计们，我明白了。我没有注意到子数组 [basket] 应该在第二个循环级别内调用。这是解决方案：

```
{foreach from=$all_baskets name=outer key=superorder item=singlebasket}

            <div class="holder active" superorder="{$singlebasket.superorder}" >

                <span {if $cart_image_url!=""}style="background:url('{$cart_image_url}')"{/if} class="basketbg"></span>

                {foreach from=$singlebasket.basket name=inner key=i item=basket_image}

                    <img class="slot slot-{$basket_image.order}" product_name="{$basket_image.product_name}" src="{$basket_image.url}" order="{$basket_image.order}" style="left:{$basket_image.position_left}px; top:{$basket_image.position_top}px" />

                {/foreach}

            </div>

        {/foreach} 
```

# php - 服务器到服务器的电子邮件传输安全吗？

> ID：15761831
> 
> 赞同：1
> 
> 时间：2013-04-02T10:30:22.323
> 
> 标签：php, security, email, joomla, mta

我们正在运行一个带有网络到电子邮件表单的网站。我们强制使用 https 来保护从浏览器到 Web 服务器的传输。我们使用 PHP 从 Web 服务器生成包含接收到的信息的电子邮件消息。目标电子邮件服务器位于另一个位置。我想知道从 Web 服务器到目标电子邮件服务器的电子邮件传输是否安全。

所以我有几个相关的问题：

A) 默认情况下，从发件人服务器到收件人服务器的电子邮件传输是否安全？（需要明确的是，这**不是**关于从电子邮件客户端到 SMTP 服务器的连接的问题）

B）如果传输默认不安全，我如何检查消息是否安全传输？

C）如果传输当前不安全，我如何请求/强制安全连接？

我们使用默认的 PHP 邮件功能（通过 Joomla 扩展）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:50:54.220

**A)**最初，服务器到服务器的 smtp 连接始终在端口 25 上以纯文本形式出现。如果源服务器和目标服务器*都支持*[TLS 扩展，那么通常使用](https://www.rfc-editor.org/rfc/rfc3207)[STARTTLS](http://en.wikipedia.org/wiki/STARTTLS)命令将纯文本连接转换为加密连接

**B)**要检查邮件是否通过加密连接传输，请在传输`"Received"`后读取结果消息中的 -Headers。

它们看起来像这样：

```
Received: from X.example.com (X.example.com [y.y.y.y])
    by z.example.net (Postfix) with ESMTPS id ...... 
```

重要的部分是**ESMTPS**位。最后一个`S`意思是“安全”。如果它只是说*“ESMTP”*或*“SMTP”*而不是*“ESMTPS”*，则传输*未*加密。

**C）**如果目标服务器不支持 TLS，除了像 PGP 之类的端到端加密（如 Álvaro G. Vicario 所建议的那样）之外，您无能为力。一些服务器（如[postfix](http://www.postfix.org/postconf.5.html#smtp_tls_security_level)）提供了配置选项，以防止在目标无法执行 TLS 时完全发送消息。

如果服务器支持 STARTTLS，您可以使用 telnet 手动测试：

```
telnet gmail-smtp-in.l.google.com 25
Trying 173.194.70.27...
Connected to gmail-smtp-in.l.google.com.
Escape character is '^]'.
220 mx.google.com ESMTP 4si1878861eee.197 - gsmtp
EHLO mail.example.com              <--- you have to type that
250-mx.google.com at your service
250-SIZE 35882577
250-8BITMIME
250-STARTTLS                       <----- GMAIL supports TLS
250 ENHANCEDSTATUSCODES 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:55:48.183

事实上，我认为这毕竟*是*一个关于从电子邮件客户端到 SMTP 服务器的连接的问题。当源服务器连接到目标服务器以传递消息时，它成为客户端。它使用 SMTP 协议，就像您的桌面电子邮件程序一样。但是，有一个非常重要的区别：

*   当您使用常规电子邮件客户端时，您通常使用可以（并且应该）提供某些安全措施（包括身份验证和加密）的同一受信任提供商。

*   当邮件服务器连接到第三方服务器时，它是匿名连接的，它需要与端口 25 建立未加密的连接。他们没有事先同意做其他事情。

鉴于通道是清晰的，除非消息本身被加密（PGP 或其他），否则服务器到服务器的通信是*不安全的。*您可以将电子邮件信息想象成蜗牛的明信片。

*（出于这个原因，那些在您注册时通过电子邮件明确发送密码的网站是错误的。）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T01:16:14.913

充分尊重迄今为止在 Joomla 中的非常好的答案！SMTP 邮件功能`JMail`由其扩展`PHPMailer`类处理。设置 Joomla 时！你有三个不同的选择：

1.  PHP Mail - 通过 . 使用[PHP mail()](http://php.net/manual/en/function.mail.php)设置`PHPMailer`。
2.  Sendmail -[`sendmail`](http://www.sendmail.com/sm/open_source/) 通过`PHPMailer`...使用
3.  SMTP - 使用[`PHPMailer`](https://github.com/Synchro/PHPMailer)类

[PHPMailer](https://github.com/Synchro/PHPMailer)`tls`类同时支持`ssl`SMTP 连接协商。

当然，这取决于您在**Global Configuration->Server**中进行设置。在标题为的窗格中，`Mail Settings`您可以打开**SMTP 安全性**(SSL|TLS) 并提供您的用户名和密码。*这些详细信息是通过您的 SMTP 服务器进行身份验证所必需的。*

# c# - 替换 tcp 侦听器套接字 c# 中的无限循环

> ID：15761833
> 
> 赞同：0
> 
> 时间：2013-04-02T10:30:26.127
> 
> 标签：c#, .net, sockets

我正在使用套接字侦听器从客户端接收数据。

`while (true)`服务器侦听连接时 是否可以替换无限循环？

```
// 监听传入的连接。
        尝试
        {
            listener.Bind(localEndPoint);
            listener.Listen(10);

 `// Start listening for connections.
        while (true)//infinite loop
        {
        }` 

            回答 #1

赞同：5

时间：2013-04-02T11:28:43.153

假设您的 while 循环如下所示：

```
while(true)
{
    Socket workerSocket = listener.Accept();
    DoSomethingWithSocket(workerSocket);
} 
```

那么是的，替换`while(true)`为

`listener.BeginAccept(new AsyncCallback(OnClientConnect), null);`

然后添加一个方法

```
 public void OnClientConnect(IAsyncResult asyn)
 {

    Socket workerSocket = Listener.EndAccept(asyn);
    Listener.BeginAccept(new AsyncCallback(OnClientConnect), null);
    DoSomethingWithSocket(workerSocket);
 } 
```

```

# xpath - XPath - 基于多个子选择选择父节点

> ID：15761836
> 
> 赞同：4
> 
> 时间：2013-04-02T10:30:34.490
> 
> 标签：xpath

让我们的 XML 看起来像这样

```
<bookshelf>
  <cathegory name = "Programming" />
  <book name = "Tille 1" >
    <author>....</author>
  </book>
  <book name = "Tille 2" >
    <author>....</author>
    <translator></translator>
  </book>
  <book name = "Tille 3" >
    <author>....</author>
    <translator>John D.</translator> <!-- non-empty nodes are acceptred! -->
  </book>
</bookshelf> 
```

我们如何选择具有**名称属性的****分类**节点和至少一**本书**具有非空**翻译节点的****书架**？

 ******基本 XPath 教程没有提供如此复杂的示例。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T10:34:25.053

您可以一个接一个地链接条件：

```
//bookshelf[cathegory/@name][.//translator/text()] 
```

它选择一个书架，其中有一个具有名称属性的分类子级，并且散列一个非空的翻译后代。******

# c++ - QObject 有多大？

> ID：15761841
> 
> 赞同：6
> 
> 时间：2013-04-02T10:30:43.547
> 
> 标签：c++, qt, size, qobject

我很好奇 QObject 实际上有多大，包括每个实例动态创建的典型私有数据。`sizeof`由于它们的实施方式，我无法获得这些。

编辑：请注意，我**问**的是 QObject 的典型使用场景的大小，我不是问“如何获得大小”，这是另一个问题的意义，我问的是知道近似大小的人，因为显然，语言本身并没有提供报告的方式。

# asp.net - 如何将空字符串转换为双精度

> ID：15761843
> 
> 赞同：1
> 
> 时间：2013-04-02T10:30:50.973
> 
> 标签：asp.net

```
double mrp = Convert.ToDouble(gvRow.Cells[9].Text.ToString()); 
```

在上面的代码中，当`mrp = "6458.0"`它工作正常但有时当mrp为空时它会抛出一个异常。请帮助我解决这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:33:30.823

使用`Double.TryParse`，这不会抛出异常，如果解析失败，那么您将获得`0`解析后的值。

```
double number;
if (double.TryParse(gvRow.Cells[9].Text, out number))
{
    //valid
}
{
    //invalid
}

//if invalid then number will hold `0` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:33:48.880

使用**[Double.TryParse](http://msdn.microsoft.com/en-us/library/system.double.tryparse.aspx)**检查转换是否成功。

```
double mrp;
if (Double.TryParse(gvRow.Cells[9].Text.ToString(), out mrp))
{
   // Success
}
else
{
  // Cannot convert to double
} 
```

此外，您可能想使用[Double.IsNan](http://msdn.microsoft.com/en-us/library/system.double.isnan.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T10:34:23.873

你应该试试这个：`double mrp = gvRow.Cells[9].Text.ToString() != "" ? Convert.ToDouble(gvRow.Cells[9].Text.ToString()): 0.0;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T10:33:53.693

```
if (Double.TryParse(gvRow.Cells[9].Text.ToString(), out mrp))
   Console.WriteLine("Ok");
else
   Console.WriteLine("not a number"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T10:50:11.750

试试 double.tryParse

[参考](https://stackoverflow.com/questions/586436/double-tryparse-or-double-convert-what-is-faster-and-more-safe)

```
Convert.ToDouble will throw an exception on non-numbers
Double.Parse will throw an exception on non-numbers or null
Double.TryParse will return false or 0 on any of the above without generating an exception. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T10:37:33.227

您可以使用 double.Tryparse..

```
 double num; 

if(Double.Tryparse(gvRow.Cells[9].Text.ToString(),num) 
{
  // get the converted value
}
else
{
  //invalid
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-02T10:40:48.550

正如其他人所说，您应该使用 Double.TryParse。

但作为一种替代方式，您可以通过数据类型检查来验证您的单元格，或者它不应该为空等。

# javascript - 如何在 HTML5 中获取 IceCast 流元数据？

> ID：15761844
> 
> 赞同：3
> 
> 时间：2013-04-02T10:30:52.117
> 
> 标签：javascript, html, streaming, metadata, icecast

我创建了一个使用 HtmlAudioElement 播放 IceCast 音频流的 HTML5 网页。

我想显示艺术家/歌曲信息，这些信息在 IceCast 流中作为元数据发送。

我可以使用 HTML5/JavaScript 从流中获取该信息吗？

# python - 使用python在maya中选择单个面

> ID：15761846
> 
> 赞同：1
> 
> 时间：2013-04-02T10:30:59.423
> 
> 标签：python, maya

嘿，我目前正在使用 Maya 中的工具，需要选择每个面并测量每个面的表面积。这里有没有人知道如何去做？老实说，我不知道从哪里开始。理想情况下，我想将所有信息保存在字典中，以便轻松迭代。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:41:18.200

您应该查看[MItMeshPolygon 的文档](http://download.autodesk.com/us/maya/2011help/API/class_m_it_mesh_polygon.html)。您可以使用它来迭代网格的每个面，并且有[一种方法](http://download.autodesk.com/us/maya/2011help/API/class_m_it_mesh_polygon.html#32ae9c59cee440dae99da3bc21675720)可以计算面在不同空间中的面积。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T21:26:38.327

选择您的对象并遍历每个面并使用 polyInfo 的 faceToVertex 构建您的顶点列表，然后进行数学运算。

[http://download.autodesk.com/us/maya/2011help/CommandsPython/polyInfo.html](http://download.autodesk.com/us/maya/2011help/CommandsPython/polyInfo.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-01T14:43:45.897

另一种捕捉脸部的方法是：

```
faces = [component for component in sel.f[:]] 
```

我喜欢使用列表推导，这种方式更像 PyMEL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-22T03:50:48.170

就选择面孔而言，下面的代码对我有用

```
for i in range(0,connections):
    x = random.randrange(0,connections,1)
    print 'x = %d' %(x)
    cmd.select('polySphere_1.f[%d]' %(x), tgl = True,) 
```

# php - 如何从 PHP 服务器引发 XML RPC 错误

> ID：15761848
> 
> 赞同：0
> 
> 时间：2013-04-02T10:30:59.797
> 
> 标签：php, magento, xml-rpc

我不是 PHP 开发人员。有一些 PHP 代码是一个服务器，它通过 XML RPC 公开其 API。如何从该代码中引发 XML RPC 故障？

**背景**

我正在为 PHP XML RPC 服务编写一个 C# 客户端。有时，PHP 代码会在某些层发生爆炸。当它发生时，它不会向我发送 XML RPC 故障。事实上，它甚至不发回任何 XML。它只是发送带有异常消息的纯文本字符串。我想编辑服务器上的 PHP 代码，捕获异常并生成 XML RPC 错误以发送回客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:47:50.487

引发 XML-RPC 错误实际上只是输出正确的 XML 的问题，仅此而已。根据您使用的框架，这可能会有所不同，因此我无法给您任何代码。

# java - Ecore XMI 到 OMG 标准转换

> ID：15761849
> 
> 赞同：0
> 
> 时间：2013-04-02T10:31:01.403
> 
> 标签：java, xmi, ecore

我们正在尝试将 Ecore XMI 文件转换为 OMG 标准 XMI。

是否有任何 API:s 或工具可用于进行此转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:42:04.760

在编辑器中，您可以使用*另存为*并指定`.emof`为文件扩展名。这会将 Ecore 模型序列化为符合 OMG 的 EMOF。

# highcharts - 如何删除 xAxis 标签之间的空格？

> ID：15761851
> 
> 赞同：0
> 
> 时间：2013-04-02T10:31:02.680
> 
> 标签：highcharts

我正在使用 Highcharts 动态绘制图表。

如下图所示，年份之间有很多空白。

我怎样才能缩小它？

我想使用空格来扩展每个列项的宽度。

![在此处输入图像描述](https://i.stack.imgur.com/3elmm.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:27:53.813

分配您的 groupPadding 值非常接近零（或零）。

```
plotOptions: {
        series: {
            groupPadding: 0.01
        }
    }, 
```

由于您没有发布代码，我将展示另一个[示例](http://jsfiddle.net/ztYLv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:32:36.180

您可以使用 pointWidth 增加列宽，并使用 groupPadding 缩小年份之间的空间。

[http://api.highcharts.com/highcharts#plotOptions.column.pointWidth](http://api.highcharts.com/highcharts#plotOptions.column.pointWidth)

```
plotOptions: {
        series: {
            groupPadding: 0.01,
            pointWidth: 50
        }
    } 
```

# wcf - 将字节数组上传到 WCF 服务器

> ID：15761855
> 
> 赞同：0
> 
> 时间：2013-04-02T10:31:18.137
> 
> 标签：wcf, windows-phone-7, image-uploading

我无法在 Windows Phone 中发布转换为字节数组的图像，这是我的代码-

```
var client = new WebClient();
client.DownloadStringCompleted += dataSubmitCompleted;
client.DownloadStringAsync(new Uri(
    "here url/Service1.svc/saverecord3" + convertImageToArray(bitmapImage1),
    UriKind.Absolute)); 
```

这里 convertImageToArray 是将照片转换为字节数组的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:28:31.613

您不应该在 GET 请求中提交图像，这就是这样`DownloadStringAsync`做的。正如@radoslaf 提到的，您应该改用*Upload*方法（默认情况下执行 POST）。如果你发送一个字节数组，你应该使用`UploadDataAsync`(not `UploadString`)。

您还应该对服务进行编码以从客户端接收字节。[http://blogs.msdn.com/b/carlosfigueira/archive/2008/04/17/wcf-raw-programming-model-receiving-arbitrary-data.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2008/04/17/wcf-raw-programming-model-receiving-arbitrary-data.aspx)上的帖子展示了如何实现这样的服务。

*评论后更新*- 我明白了，WP7.5 的 WebClient API 真的非常有限。对于这种情况，您可能最好使用该`HttpWebRequest`类型。下面的代码显示了如何将其用于您的场景。

```
 private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        HttpWebRequest req = HttpWebRequest.CreateHttp("http://here.url/service1.svc/saverecord3");
        req.Method = "POST";
        req.Headers[HttpRequestHeader.ContentType] = "application/octet-stream";
        req.BeginGetRequestStream(GetRequestStreamCompleted, req);
    }

    void GetRequestStreamCompleted(IAsyncResult ar)
    {
        byte[] imageBytes = new byte[] { 1, 2, 3, 4, 5, 6, 7, 8, 9 };
        HttpWebRequest req = (HttpWebRequest)ar.AsyncState;
        Stream reqStream = req.EndGetRequestStream(ar);
        reqStream.Write(imageBytes, 0, imageBytes.Length);
        reqStream.Close();
        req.BeginGetResponse(GetResponseCompleted, req);
    }

    void GetResponseCompleted(IAsyncResult ar)
    {
        HttpWebRequest req = (HttpWebRequest)ar.AsyncState;
        HttpWebResponse resp = (HttpWebResponse)req.EndGetResponse(ar);
        this.Dispatcher.BeginInvoke(() =>
        {
            this.txtStatus.Text = "Upload result: " + resp.StatusCode;
        });
    } 
```

# java - 我想使用spring 3在我的控制器中的pojo中获取表单数据集，就像struts1.2方法一样

> ID：15761868
> 
> 赞同：1
> 
> 时间：2013-04-02T10:32:14.280
> 
> 标签：java, forms, spring-mvc, controller, get

我有 login.jsp 作为我的欢迎页面/主页。像 struts1.2 方法一样，我希望将 login.jsp（用户名和密码）中的数据设置在 pojo（LoginForm）中，并且我需要从控制器中的 pojo 访问用户名和密码。

**登录.jsp**

```
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form" %>
<html>
<head>
    <title>Spring 3.2.1 MVC Series</title>
</head>
<body>
   <br><div align='center'> <h2>Welcome to Spring MCV 3.2 Example. </h2><br> </div>
   <br/>
   <form:form method="post" action="login.do" modelAttribute="req">
<label for="UserName :"></label> <form:input path="name"/>
<label for="Password :"/> <form:password path="password"/>
<input name="submit" type="submit"/>
   </form:form>
</body>
</html> 
```

**LoginForm pojo 类**

```
public class LoginForm {
private String name;
private String password;
public String getName() {
    return name;
}
public void setName(String name) {      
    this.name = name;
}
public String getPassword() {
    return password;
}
public void setPassword(String password) {
    this.password = password;
}
} 
```

**登录控制器**

```
import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;
import com.spring3.bean.LoginForm;
@Controller

@RequestMapping("/login")
public class LoginController {
@RequestMapping(method = RequestMethod.POST)
public ModelAndView userLogin(@ModelAttribute("req") LoginForm login,BindingResult result)
{
    System.out.println("Inside LoginController...");
    return new ModelAndView("welcome","req",new LoginForm());
}
} 
```

web.xml 和 dispatcher-servlet.xml 文件包含适当的映射。

我收到以下错误。

```
"java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean     name 'req' available as request attribute
" 
```

我的 requiremnet 就像在 struts1.2 中一样，我们从 jsp 以 Action 形式获取数据，就像在 spring 3 中一样，因为它是一个迁移项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T09:47:28.023

要在我的控制器（如 struts1.2 或 2x）的 pojo 中获取表单数据集，您需要使用 commons-beanutils.jar API

此 API 将能够在 bean 中为您提供 HTML 表单数据，只需在构建路径中包含此 jar 以及 commons-logging-1.1.jar（日志记录所需）

将以下 util 类添加到您的项目中

```
import java.lang.reflect.InvocationTargetException;
import javax.servlet.http.HttpServletRequest;
import org.apache.commons.beanutils.BeanUtils;

/**
* @author count
* FormUtil class used BeanUtils class populate method for setting the form values in       Java beans.
*  I made this class a generic class so that we do not need to write same lines again and again in each servlet, 
*  just we need to pass the class of java bean and request in populate method of FormUtil. 
*/
public class FormUtil {

public static <T> T populate(Class<T> clazz, HttpServletRequest request) {
    T object = null;
    try {

        object = (T) clazz.newInstance();
        BeanUtils.populate(object, request.getParameterMap());

    } catch (InstantiationException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        e.printStackTrace();
    }
    return object;
}
} 
```

现在你想要你的 POJO 的对象使用下面的代码

```
 LoginForm loginForm = FormUtil.populate(LoginForm.class, request); 
```

# java - 被阻塞一段时间的方法或函数，Java，Android

> ID：15761870
> 
> 赞同：1
> 
> 时间：2013-04-02T10:32:25.843
> 
> 标签：java, android, timer, singleton, thread-sleep

什么是使方法可调用一次的良好且有效的方法，并且在 2 分钟的时间段内，它在 2 分钟的间隔内被阻止再被调用。只有在两分钟结束后才能再次调用它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:36:08.423

您可以将 a 保留和更新`System.currentTimeMillis()`为静态变量，并检查 current`System.currentTimeMillis()`是否比 stored 大两分钟`System.currentTimeMillis()`。如果是这样的话; 继续，做任何你想做的事，如果没有；您可以简单地返回，或抛出异常以稍后捕获它，这是您的电话。

# java - 在 JavaEE 和 JavaSE 应用程序之间发送数据

> ID：15761872
> 
> 赞同：3
> 
> 时间：2013-04-02T10:32:29.340
> 
> 标签：java, jakarta-ee

使用 JPA 和 JSF 开发了一个 Java EE 应用程序。但它需要高级打印（如根据需要更改打印机和纸张，而不带 PrintDialog）和发送传真。可以使用 Java SE 开发一个在每台客户端机器上运行的简单 Java SE 应用程序以满足这些特定要求。有什么方法可以让 Web 浏览器与 Java SE 应用程序通信。

我想到了：

1.  如果一个 XML 文件被下载到一个文件夹中，其中有 Java SE 应用程序可以搜索以定期从新下载的 XML 文件中提取数据，但下载位置经常变化。
2.  开发 Java 小程序，

但不确定上述场景的实用性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T10:49:55.497

有许多选项，但其中首先是 Web 服务选项。这就是 web 服务旨在解决的问题，即弥合断开组件之间的差距。

1.  看看[这个](https://stackoverflow.com/a/12870543/1530938)答案，您可以在 JavaSE 中开发一个轻量级的 Web 服务，该服务包装了所需的功能

2.  您可能会探索的另一个选项是嵌入式 Java EE 容器。请查看[此](http://docs.oracle.com/javaee/6/tutorial/doc/gkfae.html)嵌入式容器开发介绍，以帮助您入门。虽然它与选项 1 相似，但在这里您可以获得更丰富的功能集，包括注入、安全性和容器管理事务

3.  Spring 框架是为在容器外运行而构建的，因此您可以在简陋的 JavaSE 环境中轻松获得它的全部功能集。在春季，您的分布式计算选项有很多。至少，您将获得一个托管上下文（类似于您从 2\. 以上获得的内容，以及将分布式框架的组件插入在一起的服务（JMS，Spring-Ws）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T11:10:41.693

另一种选择是将该逻辑放入 Java 应用程序中，并使用 Java Web Start 通过 Web 应用程序在客户端 PC 上启动它。这样，您可以保持您的 Web 应用程序保持原样，然后启动 Web 启动应用程序以获得您想要的打印功能？

# java - 上下文切换时间

> ID：15761876
> 
> 赞同：0
> 
> 时间：2013-04-02T10:32:45.783
> 
> 标签：java, multithreading

我有以下场景，我打算知道何时会发生上下文切换。

场景 1：java 线程调用了一个对象的等待，但该线程的时间片仍然存在。

场景 2：- 一个 java 线程正在等待数据库查询的结果，但该线程的时间片仍然存在。

场景 3：- 一个 java 线程正在等待数据库查询的结果，但该线程的时间片仍然完成。

场景 4：- 一个 java 线程正在做一些计算，但该线程的时间片仍然完成。

在上下文切换中可能发生的任何其他情况，但我错过了它？

我正在考虑使用这些方案来确定线程池大小是否可以大于 Runtime.getRuntime.availableProcessors() 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:27:34.617

如果一个线程正在做某事，例如调用`wait()`，这意味着时间片没有用完。如果线程因为调用而被阻塞`wait()`，或者等待 I/O 结果（包括数据库结果），则不计算时间片。一旦线程被解除阻塞并恢复执行，它就会开始计数。如果时间片用完，这意味着线程一直在运行并且没有以任何方式被阻塞。

因此，您的场景分类不正确。

# android - 从 sd 卡 Android 读取图像时自动旋转

> ID：15761877
> 
> 赞同：1
> 
> 时间：2013-04-02T10:32:47.467
> 
> 标签：android

我要溢出，这是我在这里的第一个问题:)

我有一个画廊、图像切换器和用于从相机捕获图像的按钮。将图像捕获到 SD 卡后，我想将图像加载到图库并在图像切换对象中显示它。现在它可以很好地解决一个大问题。

为什么所有图像都在图库和图像切换器中旋转？

这是我的java代码：

```
protected void onCreate(Bundle savedInstanceState) {
   iSwitcher = (ImageSwitcher) findViewById(R.id.ImageSwitcher01);
        iSwitcher.setFactory(this);
        iSwitcher.setInAnimation(AnimationUtils.loadAnimation(this,
                android.R.anim.fade_in));
        iSwitcher.setOutAnimation(AnimationUtils.loadAnimation(this,
                android.R.anim.fade_out));
        setAllPics();
        gallery = (Gallery) findViewById(R.id.Gallery01);
        gallery.setAdapter(new ImageAdapter(this)); 
        gallery.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                //iSwitcher.setImageResource(pics[arg2]);
                //iSwitcher.setImageURI(mUrls[arg2]);
                iSwitcher.setImageDrawable(new BitmapDrawable(getResources(),(bitmap[arg2])));
            }
        });
        Button BtnGetPhoto = (Button) this.findViewById(R.id.BtnGetPicture);
}
public class ImageAdapter extends BaseAdapter {

        private Context ctx;
        int mGalleryItemBackground;
        public ImageAdapter(Context c) {
            ctx = c;
        }

        @Override
        public int getCount() {
            return mUrls.length;
            //return pics.length;
        }

        @Override
        public Object getItem(int arg0) {

            return arg0;
        }

        @Override
        public long getItemId(int arg0) {

            return arg0;
        }

        @Override
        public View getView(int arg0, View arg1, ViewGroup arg2) {

            ImageView iView = new ImageView(ctx);
            //iView.setImageURI(mUrls[arg0]);
            iView.setImageDrawable(new BitmapDrawable(getResources(),(bitmap[arg0])));
            //iView.setImageResource(pics[arg0]);
            iView.setScaleType(ImageView.ScaleType.FIT_XY);
            iView.setLayoutParams(new Gallery.LayoutParams(150, 150));
            return iView;
        }
    }
private void setAllPics(){
        File images  = new File(PATH);
        File[] imagelist = images.listFiles(new FilenameFilter() {

            @Override
            public boolean accept(File dir, String filename) {
                 return ((filename.endsWith(".jpg"))||(filename.endsWith(".png")));  
            }
        });
        /* There isn't enough memory to open up more than a couple camera photos */
        /* So pre-scale the target bitmap into which the file is decoded */

        /* Get the size of the ImageView */
        int targetW = 350;//iSwitcher.getWidth();
        int targetH = 220;//iSwitcher.getHeight();

        BitmapFactory.Options bmOptions = new BitmapFactory.Options();

        mFiles = new String[imagelist.length];
        int photoW[] = null;
        int photoH[] = null; 
        int scaleFactor[] = null ;

        photoW = new int[imagelist.length];
        photoH = new int[imagelist.length];
        scaleFactor = new int[imagelist.length];
        bitmap = new Bitmap[imagelist.length];
        for(int i= 0 ; i< imagelist.length; i++)  
            {               
                bmOptions.inJustDecodeBounds = true;
                mFiles[i] = imagelist[i].getAbsolutePath();  
                bitmap[i] = BitmapFactory.decodeFile(mFiles[i], bmOptions);
                /* Get the size of the image */
                photoW[i] = bmOptions.outWidth;
                photoH[i] = bmOptions.outHeight;
                /* Figure out which way needs to be reduced less */

                if((targetW > 0)  || (targetH > 0 ))
                    scaleFactor[i]  = Math.min(photoW[i]/targetW, photoH[i]/targetH);
                /* Set bitmap options to scale the image decode target */
                bmOptions.inJustDecodeBounds = false;
                bmOptions.inSampleSize = scaleFactor[i];
                bmOptions.inPurgeable = true;
                try{
                /* Decode the JPEG file into a Bitmap */
                bitmap[i] = BitmapFactory.decodeFile(mFiles[i], bmOptions);
                //iSwitcher.setImageDrawable(new BitmapDrawable(getResources(),(bitmap[i])));
                } catch (OutOfMemoryError error) {
                    error.printStackTrace();
                }

            }  

        mUrls = new Uri[mFiles.length];  

        for(int i=0; i < mFiles.length; i++)  
                {  
                    mUrls[i] = Uri.parse(mFiles[i]);     
                }

    }
private OnClickListener onClickListener =new OnClickListener(){ 

    // @Override
     public void onClick(View v) {

         switch (v.getId()){
             case R.id.BtnGetPicture:

                 Intent cameraIntent = new Intent (android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

                 String imageFileName = "";
                 String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());

                 SetPathIfNotExist(PATH);
                 imageFileName = timeStamp + ".jpg";

                 File image = new File(PATH,imageFileName);
                 Uri uriSavedImage = Uri.fromFile(image);
                 cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, uriSavedImage);

                 startActivityForResult(cameraIntent,CAMERA_REQUEST);
                     break;
                        default:

                break;
         }          

     }    
     };
protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) { 
        setAllPics();
        gallery.setAdapter(new ImageAdapter(this)); 

        //Bitmap photo = (Bitmap) data.getExtras().get("data"); 
        //imageView.setImageBitmap(photo);
    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:34:40.860

```
Hi have a look at this below code. before saving your captured image do the following process. it will save the images in portrait mode. hope this will help you.

 int rotation = -1;
 rotation = ((WindowManager)getSystemService(Context.WINDOW_SERVICE))
                .getDefaultDisplay().getOrientation();

    Matrix rotator = new Matrix();
    switch (rotation) {
    case (Surface.ROTATION_0):
        break;
    case (Surface.ROTATION_90):
        rotator.postRotate(270);
        break;
    case (Surface.ROTATION_180):
        rotator.postRotate(180);
        break;
    case (Surface.ROTATION_270):
        rotator.postRotate(90);
        break;

    // screen_{width,height} are applied before the rotate, so we don't
    // need to change them based on rotation.
    bmp_ss = Bitmap.createBitmap(bmp_ss, 0, 0, screen_width, screen_height, rotator, false); 
```

# java - Java 类未定义 serialVersionUID 是否影响性能

> ID：15761882
> 
> 赞同：1
> 
> 时间：2013-04-02T10:33:13.883
> 
> 标签：java, serialization

我对 serialVersionUID 感到困惑，有人告诉我如果我没有定义 serialVersionUID 这会影响性能，所以我需要总结一下我的知识

据我了解，在 Java 编译器中，如果您需要在 2 个类之间进行通信，或者您需要在 1 个任务与 1 个任务之间使用对象通信。当发送者发送对象时，应该在发送者和接收者中生成serialVersionUID，将serialVersionUID放入对象中，然后接收验证对象是否正确接收者将继续该过程如果不是它会抛出异常

所以如果我没有输入serialVersionUID，那么java编译器将根据我的理解在运行时定义它，所以我认为执行Java时不会影响性能

我希望我的理解应该是正确的如果不是请帮助本网站的其他人提出建议

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T10:37:22.857

这些细节的答案总是可以在规范中找到。

> 如果可序列化类没有显式声明 serialVersionUID，则序列化运行时将根据类的各个方面为该类计算默认的 serialVersionUID 值，如 Java(TM) 对象序列化规范中所述。

有关更多信息，请访问 java.io.Serializable。

答案是它会，但真正的问题是多少？

这个问题的答案可以在这篇文章中找到[进入连载神话的迷雾](http://www.javaworld.com/javaqa/2003-06/02-qa-0627-mythser.html?page=1)。

结论是影响不那么相关，但代码管理的成本可能更大。与往常一样，此类问题的最终答案取决于项目规模和应用程序将运行的环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:40:24.990

首先，serialVersionID 应该生成/添加到实现`Serializable`接口的类中，它有助于对象的反序列化。因此，您不必担心可能的性能问题，但绝对应该考虑为您的 Serializable 类提供 serizalVersioItd。

在[此线程](https://stackoverflow.com/questions/285793/what-is-a-serialversionuid-and-why-should-i-use-it)中，您可以了解 serialVersionID 的用途。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T01:57:31.507

> 所以如果我没有输入serialVersionUID，那么java编译器将根据我的理解在运行时定义它，所以我认为执行Java时不会影响性能

这种说法没有意义。编译器在运行时不能做任何事情。如果省略它，*JVM*将在任何特定的`ObjectInputStream`或`ObjectOutputStream`.

开销并不显着。

# linux - 读取特定进程 ID 的 io stats

> ID：15761886
> 
> 赞同：0
> 
> 时间：2013-04-02T10:33:28.527
> 
> 标签：linux, linux-kernel

如何读取 Android linux 内核中特定进程的 I/O 统计信息。`/proc/stat`给出一般 cpu io 等待时间，但不适用于特定进程。我尝试使用`/proc/<pid>/stat`which 包含有关进程的所有信息。但它没有成功。

# git - 内部版本号中的分支名称

> ID：15761887
> 
> 赞同：7
> 
> 时间：2013-04-02T10:33:29.287
> 
> 标签：git, branch, teamcity

我正在尝试将分支名称放入内部版本号，但找不到正确的参数。我正在使用内部版本号格式：`%teamcity.build.branch%.{0}`

它可以工作，但是当它尝试构建默认分支“dev”时，teamcity 将其命名为`<default>`.

![在此处输入图像描述](https://i.stack.imgur.com/PlW3R.png)

如何解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-13T16:04:06.567

我能够通过以下方式解决这个问题：

*   在我的 VCS Root 中 - 使用 git - 将我的默认分支设置为：master
*   在我的 VCS Root 中 - 使用 git - 将我的分支规范设置为：

    +:refs/heads/(master)

    +:refs/heads/(release-*)

    +:refs/heads/(hotfix-*)

*   创建配置参数：BuildNumberPrefix = SomeService.%teamcity.build.branch%.release_

*   将我的内部版本号格式设置为：%BuildNumberPrefix%%build.counter%

*   然后在我的构建步骤中添加一个命令行步骤作为第一步，使用以下脚本：

    设置 t=%BuildNumberPrefix%%build.counter%

    echo ##teamcity[buildNumber '%%t%%']

在构建项目时的 Team City 项目列表中，您应该看到在执行命令行步骤后，构建号的部分被删除。由于某种原因，重新评估使用 teamcity.build.branch 变量的 BuildNumberPrefix 会导致默认值消失并被分支名称替换。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:05:23.527

看看它是否可以帮助您解决问题。引用[http://youtrack.jetbrains.com/issue/TW-24147](http://youtrack.jetbrains.com/issue/TW-24147)的第一条评论：

> 我们使用特殊的分支名称 ( `<default>`) 是有原因的：当有多个具有不同默认分支的 VCS 根时，我们需要一个单独的分支名称来构建。您可以从构建参数 teamcity.build.vcs.branch 获取 VCS 根目录中使用的真实分支名称。`<canonical VCS root name>`. 搜索 teamcity.build.vcs.branch。在 UI 中构建的“构建参数”选项卡上。

# git - Git只添加所有新文件，不添加修改文件

> ID：15761890
> 
> 赞同：16
> 
> 时间：2013-04-02T10:33:32.520
> 
> 标签：git, git-add

有没有办法只添加新文件而不用git添加修改过的文件？也就是说，使用 git status 列为未跟踪的文件。

当然，除了单独添加每个文件。

在我的情况下，这样做并不是绝对必要的，对我来说真正的问题在这里得到了回答：[如何使 git-diff 和 git log 忽略新的和已删除的文件？](https://stackoverflow.com/questions/6894322/how-to-make-git-diff-and-git-log-ignore-new-and-deleted-files)

也就是说，不要在新文件上显示差异，所以我问这个问题更多，因为我在任何地方都找不到答案。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-02T10:36:49.877

也许

```
git add $(git ls-files -o --exclude-standard) 
```

`git ls-files`让您列出由 git 管理的文件，并按某些选项过滤。`-o`在这种情况下，将其过滤为仅显示“其他（即未跟踪的文件）”

该`$(...)`语句将该命令的返回值作为参数传递给`git add`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T10:55:03.143

您可以使用 git status 的短模式（请参阅[man git-status(1)](https://www.kernel.org/pub/software/scm/git/docs/git-status.html)），它提供以下输出：

没有短模式：

```
$ git status

...

# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   README
#   application/libraries/Membres_exception.php
no changes added to commit (use "git add" and/or "git commit -a") 
```

短模式：

```
$ git status -s
 M application/models/membre_model.php
?? README
?? application/libraries/Membres_exception.php 
```

然后使用 grep、awk 和 xarg，您可以添加第一列为`??`.

```
$ git status -s | grep '??' | awk '{ print $2 }' | xargs git add 
```

并看到它有效：

```
$ git status
# On branch new
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   new file:   README
#   new file:   application/libraries/Membres_exception.php 
```

# javascript - 在动画期间防止重叠元素

> ID：15761891
> 
> 赞同：11
> 
> 时间：2013-04-02T10:33:32.963
> 
> 标签：javascript, jquery

我正在创建一个加法和减法游戏，其中一个总和是随机生成并显示在容器顶部的。然后数字从下到上动画，想法是点击正确的。

数字在开始时被赋予一个随机的“x”位置，然后以相同的速度动画到顶部。

我遇到的问题是，当程序运行时，元素有时会重叠，因为它们在开始时被赋予了类似的“x”位置。

我需要告诉程序不要给出相同的“x”位置，直到使用它的元素在屏幕上足够远以至于它们不会重叠。

问题是在游戏刚开始时最糟糕。

这是相关的代码...

```
var currentMoving = [];

function moveRandom(id) {

    // Mark this one as animating
    currentMoving.push(id);

    var cPos = $('#container').offset();
    var cHeight = $('#container').height();
    var cWidth = $('#container').width();
    var bWidth = $('#' + id).width();

    var bHeight = $('#' + id).css('top', '395px').fadeIn(100).animate({
        'top': '-55px'
    }, AnimationSpeed,'linear').fadeOut();

    maxWidth = cPos.left + cWidth - bWidth;
    minWidth = cPos.left;
    newWidth = randomFromTo(minWidth, maxWidth);

    $('#' + id).css({
        left: newWidth
    }).fadeIn(100, function () {
        setTimeout(function () {
            $('#' + id).fadeOut(10);

            // Mark this as no longer animating                
            var ix = $.inArray(id, currentMoving);
            if (ix !== -1) {
                currentMoving.splice(ix, 1);
            }
            window.cont++;
        }, 100);
    });
} 
```

这是一个小提琴 - [http://jsfiddle.net/pUwKb/68/](http://jsfiddle.net/pUwKb/68/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T10:57:23.473

这是一个简单的解决方案，但不是最佳解决方案。

1/而不是随机x，用网格标记你的画布，并且只选择x偏移作为50px（你的盒子宽度）的倍数，所以可以从你的600px画布中的12个网格中的任何一个启动一个盒子。

|1|2|3|4|5|6|7|8|9|10|11|12

2/ 当一个盒子在任何网格中启动时，将该网格锁定 1 秒或 2 秒，以便新盒子的随机位置生成器在锁定之前不会生成该网格。

3/ 一段时间后，清除网格的锁定。

# [http://jsfiddle.net/pUwKb/72/](http://jsfiddle.net/pUwKb/72/)

代码片段生成基于网格的 x 位置，而不是随机 x：[第 230-238 行]

```
function randomFromToPosition(from, to) {
    /* align boxes in grids instead of random positions */
    do {
    var pos = Math.floor(Math.random() * (to - from + 1) + from);
    var roundedPos = Math.floor(pos/50)*50;
    } while(lockedGrid[roundedPos] == true);

    return roundedPos;
} 
```

锁定和解锁网格：[第 289-300 行]

```
 maxWidth = cPos.left + cWidth - bWidth;
        minWidth = cPos.left;
        newWidth = randomFromToPosition(minWidth, maxWidth);

        lockedGrid[newWidth] = true; // Lock the grid position
        setTimeout(function(){
            delete lockedGrid[newWidth];
        },2000);      // free the lock after 2 seconds. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:18:39.853

扩展@DhruvPathak 的解决方案，我的建议是使用另一个数组来跟踪起始区域中的对象，并在选择随机位置时对该区域中的所有对象进行碰撞检查。

为对象设置动画时，您需要将两个动画链接在一起。第一个将对象从起始区域带出，然后将自身从数组中清除，然后一直动画到顶部。

在检查碰撞时，如果检测到碰撞，最简单的解决方案是计算新对象与其碰撞对象之间的高度差，以便将新对象放置得更远一些。

然后，您需要做的就是相应地调整动画速度，使其与其他对象相比以恒定速率移动，因为与现在的恒定距离相比，您将覆盖任意距离以离开起始区域。

# android - 以编程方式暂停媒体记录器。来自三星银河的 Camera.apk 有 `this.mMediaRecorder.pause();` 在我的代码中不起作用

> ID：15761892
> 
> 赞同：4
> 
> 时间：2013-04-02T10:33:40.147
> 
> 标签：android, video, record, video-capture, mediarecorder

现在，我制作了一个库来连接 2 个视频，使用 mp4parser 库。有了这个，我可以暂停和继续录制视频（在录制第二个视频后，它会将其附加到第一个视频）。现在，我的老板告诉我做一个包装器，并将它用于没有硬件支持暂停视频的手机。对于具有该功能的手机（三星 Galaxy S2 和三星 Galaxy S1 可以使用他们的相机应用程序暂停视频录制），我需要在没有库的情况下执行此操作，因此速度会很快。[如果在媒体记录器状态图http://developer.android.com/reference/android/media/MediaRecorder.html](http://developer.android.com/reference/android/media/MediaRecorder.html)上看到，我该如何实现这个本机，没有暂停状态？

我已经从 Samsung Galaxe Ace 反编译了 Camera.apk 应用程序，并且代码在 CamcorderEngine.class 中有这样的方法：

```
public void doPauseVideoRecordingSync()
{
Log.v("CamcorderEngine", "doPauseVideoRecordingSync");
if (this.mMediaRecorder == null)
{
  Log.e("CamcorderEngine", "MediaRecorder is not initialized.");
  return;
}
if (!this.mMediaRecorderRecording)
{
  Log.e("CamcorderEngine", "Recording is not started yet.");
  return;
}
try
{
  this.mMediaRecorder.pause();
  enableAlertSound();
  return;
}
catch (RuntimeException localRuntimeException)
{
  Log.e("CamcorderEngine", "Could not pause media recorder. ", localRuntimeException);
  enableAlertSound();
} 
```

}

如果我在我的代码中尝试`this.mMediaRecorder.pause();`，它不起作用，这怎么可能，他们使用相同的导入（android.media.MediaRecorder）。他们是否在系统级别重写了整个代码？

是否可以获取第二个视频的输入流（在录制时），并将这些数据直接附加到我的第一个视频中？对于我的连接方法，我使用 2 个参数（2 个视频，它们都是 FileInputStream），是否可以从录制函数中获取 InputStream 并将其作为第二个参数传递？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-13T07:14:27.460

> 如果我尝试 this.mMediaRecorder.pause();

该类`MediaRecorder`没有`pause()`功能，因此很明显在这个特定设备上有一个自定义的 MediaRecorder 类。这并不稀奇，因为 OEM 唯一要求的就是通过设备上的“android 兼容性测试”；添加功能没有限制。

> 是否可以获取第二个视频的输入流（在录制时），并将这些数据直接附加到我的第一个视频中？

我不确定您是否可以这样做，因为视频流是编码数据（编解码器标头、关键帧等），在我看来，仅将 2 个流合并为 1 个文件不会产生有效的视频文件。

基本上你可以做什么：

1.  从相机预览表面获取原始数据图像（参见 Camera.setPreviewCallback()）
2.  使用 android.media.MediaCodec 对视频进行编码
3.  然后使用 OutputFilStream 写入文件。

这将为您提供所需的灵活性，因为在这种情况下，您在应用程序中决定哪些帧进入编码器，哪些不进入。但是，对于您的特定项目来说，这可能是一种过度杀伤，并且可能会出现一些性能问题。

PS。哦，顺便说一下，试试看一下 MediaMuxer - 也许它也可以帮助你。developer.android.com/reference/android/media/MediaMuxer.html

# encoding - 为什么 FFMPEG 总是制作大的 WebM 文件？

> ID：15761893
> 
> 赞同：9
> 
> 时间：2013-04-02T10:33:44.300
> 
> 标签：encoding, ffmpeg, webm

我正在尝试将我的电影编码为 WebM：

```
ffmpeg -i input.MOV -codec:v libvpx -quality good -cpu-used 0 -b:v 10k
-qmin 10 -qmax 42 -maxrate 10k -bufsize 20k -threads 8 -vf scale=-1:1080
-codec:a libvorbis -b:a 192k
output.webm 
```

我想以几种不同的比特率（视频和音频相结合）进行编码：

*   2192 kbps
*   1692 kbps
*   1000 kbps

问题是无论我输入哪种比特率，我总是得到一个比特率高于 1900 kbps 的文件。（上面的代码示例为 1914 kbps。）

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-02T18:42:55.330

`libvpx`在码率控制和质量设置方面有点复杂。有关详细信息，请参阅[vpx 编码指南](http://ffmpeg.org/trac/ffmpeg/wiki/vpxEncodingGuide)和[VP8 编码参数指南](http://www.webmproject.org/docs/encoder-parameters/)。我花了一个小时挖掘源代码来理解它。

如果要设置恒定比特率，则必须将`b:v`,`maxrate`和设置`minrate`为相同的值，例如像这样（请注意，为简洁起见，我在此处省略了音频选项）：

```
ffmpeg -i input.mov -c:v libvpx -b:v 1900K -maxrate 1900K -minrate 1900K output.webm 
```

相反，如果您想使用可变质量并且只指定比特率的上限，那么您需要同时设置`b:v`和`crf`。如果您省略`crf`，则指定的比特率将被视为平均值。只有使用`crf`，编码器才会将 的含义更改为`b:v`最大允许速率。

```
ffmpeg -i input.mov -c:v libvpx -b:v 1900K -crf 10 output.webm 
```

CRF 的值 10 是一个很好的起点，但`libvpx`可能会在 的范围内改变每帧的质量`qmin ≤ q ≤ qmax`，如果需要，您也可以指定。设置 10 的下限`qmin`对我来说似乎有点高，但本质上无论如何你都必须做一些试验和错误，因为如果最大比特率太低，你会不断地饱和它。

# three.js - 需要通过阴影/照明而没有颜色失真的纹理

> ID：15761898
> 
> 赞同：1
> 
> 时间：2013-04-02T10:34:02.510
> 
> 标签：three.js

我想使用不受光照/阴影影响的贴图/纹理。我应该选择哪个 Three.js 着色器？在其他 3D 程序中，您可能会在环境颜色上使用贴图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:54:15.983

你需要使用`MeshBasicMaterial`. 它不受灯光影响。

```
material = new THREE.MeshBasicMaterial( { color: 0xffffff, map: texture } ); 
```

# html - 在另一个 html 页面中嵌入 html5 横幅

> ID：15761902
> 
> 赞同：3
> 
> 时间：2013-04-02T10:34:19.827
> 
> 标签：html

我有一个 html5 横幅，其中包含一些动画等。我如何将它嵌入到已经存在的 html 文档中？我不想从 html5 文档中获取代码，如果我可以链接到 html5 横幅，那就太好了。

我不知道这是否可能。

```
<html>
    <body>
        <!-- Embed html5 banner here -->
        <div src="/assets/html5banner.html" /> <!-- Something like that, I don't know -->
    </body>
</html> 
```

任何朝着正确方向的推动都将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:35:55.707

用于`iframe`将其他 html 文档嵌入到您的页面中

```
<iframe src="#"></iframe> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T10:37:06.027

[iFrame](http://www.w3schools.com/tags/tag_iframe.asp#gsc.tab=0)是您的朋友。

```
<iframe src="/htmlanim.html"></iframe> 
```

您也可以花哨地使用 Ajax 将内容动态地附加到空的`<div>`-Container 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T10:36:02.203

您应该只使用 iframe。

# junit - Bamboo 的 JUnit 解析器不会解析我的 gtest output.xml

> ID：15761906
> 
> 赞同：6
> 
> 时间：2013-04-02T10:34:33.060
> 
> 标签：junit, googletest, bamboo

我试图用 Bamboo 将一些自动化单元测试添加到我的项目中，并且遇到了一些问题。单元测试本身是使用 googletest 完成的，它会创建一个与 JUnit 解析器兼容的 XML 文件。

但是，执行 Bamboo 的 JUnit Parser 时出现以下错误：

```
02-Apr-2013 12:11:22 Starting task ''Parse UnitTest output' of type 'com.atlassian.bamboo.plugins.testresultparser:task.testresultparser.junit'
02-Apr-2013 12:11:22 Parsing test results...
02-Apr-2013 12:11:22 Failing task since test cases were expected but none were found.
02-Apr-2013 12:11:22 Finished task 'Parse UnitTest output' 
```

这似乎与 .xml 文件本身没有任何关系，因为我已经尝试了一些。这包括我自己的 output.xml，由 googletest 生成，以及来自[https://confluence.atlassian.com/display/BAMBOO/JUnit+parsing+in+Bamboo](https://confluence.atlassian.com/display/BAMBOO/JUnit+parsing+in+Bamboo)的示例输出。
我还针对两个提议的 .xsd 文件调整了上述文件，这应该与 JUnit Parser 期望的输出相匹配，但都没有效果。

**更新：**
到目前为止，我告诉 JUnit Parser 寻找 ${bamboo.build.working.directory}/output.xml
当我尝试 **/*.xml 时它起作用了。
以我现在的理解，在非常仔细地阅读了任务描述之后，我必须给它一个文件夹。但是我也可以给它文件，如果我以 ant 风格（用 glob？）来做。这至少非常令人困惑，并且仍然没有完全回答最初的问题。所以如果有人能启发我，请做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-27T21:06:01.857

这是一个超级古老的问题，我想我会为后代添加一个答案。正如一些人评论的那样，测试输出文件的配置值需要一个相对路径。问题是，相对于什么？

我认为这个问题的答案取决于你如何配置你的源存储库，但通常它与你的项目的根目录有关。如果一切都失败了，看看竹子在签出时把你的源代码放在哪里；这将是竹子附加测试输出搜索路径的目录。

对于配置语法，可以使用 ant 样式模式是正确的（[学习 Ant 路径样式](https://stackoverflow.com/questions/2952196/learning-ant-path-style)供参考）。

举个例子，如果您的本地计算机上有一个项目位于`C:\git\MyProject`，并且您的测试结果最终位于`C:\git\MyProject\Output\Tests\output.xml`，那么您将`Output/Tests/output.xml`在相应任务配置的“指定自定义结果目录”字段中指定。您还可以使用`Output/**/*.xml`搜索输出目录中的所有 .xml 文件。

# android - Google Nexus 和 Galaxy 选项卡（7 和 10）的布局和可绘制文件夹

> ID：15761909
> 
> 赞同：0
> 
> 时间：2013-04-02T10:34:48.880
> 
> 标签：android, android-layout

我现在对设置布局和可绘制文件夹感到非常困惑。我希望我的图形支持 Galaxy nexus 7 asus 和 Galaxy tab。我首先准备了一个演示应用程序，我看到的都支持具有正常布局的 hdpi 文件夹。但两者都有不同的分辨率和密度。所以我的图形在 Galaxy 选项卡中看起来不太好看。我搜索并找到了很多链接并通过了这些链接，但对我不起作用。不知道我犯了什么错误。请纠正我或给我任何建议。

首选链接： [galaxy tab 7 vs nexus 7 不同尺寸 res 文件夹](https://stackoverflow.com/questions/14855128/galaxy-tab-7-vs-nexus-7-different-dimensions-res-folder)

[Google Nexus 7 和 10 的布局文件夹](https://stackoverflow.com/questions/14556800/layout-folders-for-google-nexus-7-and-10)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:13:06.203

Nexus7 是一款独特的设备，具有有点奇怪的 dpi 结构。

对于您可能需要知道的更多信息，这里有一个很好的解释（来自 Google 的 Android 工程师 Dianne Hackborn）：[Dianne Hackborn 解释了 Nexus7 的独特分辨率](https://plus.google.com/105051985738280261832/posts/6eWwQvFGLV8)

Nexus7 将使用 xhdpi 文件夹中的资源 - 并根据其独特的分辨率对其进行缩放。

这是第一次这样做，所以绝对是独一无二的（并解释了为什么你可能会看到奇怪的行为）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T14:04:28.197

可能有两种可能的解决方案。

**1.**首先，您可以使用一个名为**layout-sw600dp**的 Galaxy 选项卡布局的新文件夹，并将您的布局 xml 文件保留为 Galaxy 选项卡的新布局。请参阅 [此链接](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)。 **res/layout-sw600dp/main_activity.xml # 适用于 7 英寸平板电脑（600dp 宽和更大）**

**2.**第二种解决方案可能是您手动找出手机的分辨率并手动设置分辨率的drawable。

```
 DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    int scrheight = metrics.heightPixels;
    int scrwidth = metrics.widthPixels;
            if(scrheight==1024 && scrwidth==600)
            {
            **set ur resources here**
            } 
```

# iphone - 大图像在 iPhone 4 上降低 FPS

> ID：15761910
> 
> 赞同：1
> 
> 时间：2013-04-02T10:34:49.103
> 
> 标签：iphone, ios, ios4, cocos2d-iphone

我在 iPhone 4 上遇到了 FPS 问题。我想在屏幕上放一个大图像，当我这样做时，FPS 下降（iPhone 4 上为 50-51）。当我使用 CCSpriteBatchNode 时效果相同 :(
正如我猜想的问题是绘图。我只是将图像放在屏幕上而不移动它并且 FPS 下降到 50-51。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:03:09.017

好的，我自己找到了解决方案。

我启用了 CC_ENABLE_GL_STATE_CACHE，我的 FPS 现在是 60.0。要启用它，只需在 ccconfig.h 中将 CC_ENABLE_GL_STATE_CACHE 0 更改为 CC_ENABLE_GL_STATE_CACHE 1

我希望这会有所帮助。

# java - Hibernate 无法读取 hibernate.cfg.xml

> ID：15761912
> 
> 赞同：2
> 
> 时间：2013-04-02T10:35:09.433
> 
> 标签：java, hibernate

我在 Jetty 1.6 上运行的 GWT 应用程序中使用 Hibernate 4.1 得到了启动 hib.instance 的下一个代码：

```
Configuration configuration = new Configuration().configure(ABS_PATH_TO_CONFIG+File.separator+"hibernate.cfg.xml");
ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();
sessionFactory = configuration.buildSessionFactory(serviceRegistry); 
```

第一行给了我一个错误：

```
org.hibernate.HibernateException: ...hibernate.cfg.xml not found
at org.hibernate.internal.util.ConfigHelper.getResourceAsStream(ConfigHelper.java:173) 
```

但我`hibernate.cfg.xml`在加载 hib.config 之前检查了可用性：

```
File conf = new File(ABS_PATH_TO_CONFIG+File.separator+"hibernate.cfg.xml");
System.out.println(conf.canRead()); 
```

Sysout 返回真。

查看`ConfigHelper.getResourceAsStream`带有断点的来源：

```
InputStream stream = null;
ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
if (classLoader!=null) {
    stream = classLoader.getResourceAsStream( stripped );
}
if ( stream == null ) {
    stream = Environment.class.getResourceAsStream( resource );
}
if ( stream == null ) {
    stream = Environment.class.getClassLoader().getResourceAsStream( stripped );
}
if ( stream == null ) {
    throw new HibernateException( resource + " not found" );
} 
```

我做错了什么（不明白什么）或者这里真的没有 xml 加载器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:47:24.863

这里有几件事是错误的。

首先，这个：

```
Configuration configuration = new Configuration().configure(ABS_PATH_TO_CONFIG+File.separator+"hibernate.cfg.xml"); 
```

不做你认为它做的事。

您的示例未检查配置文件的可用性。它正在检查文件是否存在于文件系统中，而不是在类路径中。这种差异很重要。

如果不了解更多关于如何构建和部署 webapp 或如何组织文件的信息，很难给你任何更具体的建议，除了尝试将“hibernate.cfg.xml”复制到类路径的根目录，然后将其传递给 configure() 方法。那应该行得通。

所以你的代码应该是：

```
Configuration configuration = new Configuration().configure("hibernate.cfg.xml"); 
```

而且您的 hibernate.cfg.xml 文件应该在您的类路径的根目录中。

或者，如果您使用 Maven，只需将其放在“resources”文件夹下，然后 Maven 将为您完成剩下的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:04:12.447

我会告诉你，程序永远不会对待你。关于您的问题，您可以这样做来获取配置文件的路径：

```
String basePath = PropertiesUtil.class.getResource("/").getPath(); 
```

然后阅读

```
InputStream in = new FileInputStream(basePath + fileName); 
```

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T13:28:01.730

这种方式自定义定位的配置文件被加载：

```
File conf = new File(ABS_PATH_TO_CONFIG+File.separator+"hibernate.cfg.xml");
Configuration configuration = new Configuration().configure(conf.getAbsoluteFile()); 
```

FYC：`configure()`方法重载

# javascript - 如果单击导航栏 ID，则 jQuery Mobile 警报

> ID：15761913
> 
> 赞同：0
> 
> 时间：2013-04-02T10:35:12.167
> 
> 标签：javascript, jquery-mobile, jquery, jquery-mobile-navbar

我正在尝试修改以下 jQuery Mobile 代码以显示是否单击了 ID 为“e”的导航栏。下面的代码适用于所有导航栏项目，但我只希望在单击 id 为“e”的导航栏时出现警报。任何修改这个的帮助都会很棒。非常感谢！

```
$(document).on('pagebeforeshow', '#p_page', function(event){       
    $('div[data-role="navbar"] a').live('click', function () {

        alert("div E clicked");
});       
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T10:36:31.517

这应该有效：

```
$(document).on('pagebeforeshow', '#p_page', function(event){       
    $('div[data-role="navbar"] ul li a#e').on('click', function () {
        alert("div E clicked");
    });       
}); 
```

工作示例：http: [//jsfiddle.net/Gajotres/rnRqm/](http://jsfiddle.net/Gajotres/rnRqm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:36:59.673

而不是`live`使用`click`事件，因为 live 已从 jquery 中弃用。

```
 $('div[data-role="navbar"] a').on('click', function () {
      alert("div E clicked");
 }); 
```

# git - Gitblit：导航到二级文件夹时出现错误请求

> ID：15761920
> 
> 赞同：4
> 
> 时间：2013-04-02T10:35:36.623
> 
> 标签：git, gitblit

我正在尝试[Gitblit](http://gitblit.com/)，这对于 Git 来说似乎是一个相当不错的 web-UI。通过 war 文件进行安装非常简单，而且开箱即用。但是，我遇到了一个奇怪的问题。
我正在共享一个具有标准文件夹结构的 Maven 项目

```
project
   pom.xml
   src
   src/test-file.txt (I added this file to verify the issue)
   src/java
   src/java/main
   src/java/main/package
   src/java/main/package/File.java 
```

只要我尝试导航第一级（so, `pom.xml`and `src`）一切都很好，我可以正确打开和读取文件。但是，当我尝试打开`java`下的文件夹`src`时，链接会呈现为`localhost:8080/gitblit/tree/project/commit-id/src%2Fjava`并且我会看到一个白页。请求不会转发到服务器（如果有帮助的话，tomcat 7.0.32），firebug 只是告诉我`Error 400: Bad Request`。
这`%2F`看起来很奇怪，所以我手动尝试修复 中的链接`localhost:8080/gitblit/tree/project/commit-id/src/java`，但随后生成了内部服务器错误。看着日志，我读到

```
INFO  Found more URL path parts then expected, these will be ignored. Url: 'http://localhost:8080/gitblit/tree/project/commit-id/src/java', mountpath: 'blob', urlPath: 'project/commit-id/src/java', expected 3 parameters was 4 
```

然后，我添加了`test-file.txt`. 如果我导航到`src`并尝试打开`test-file.txt`，首先链接会尝试打开`localhost:8080/gitblit/blob/project/commit-id/src%2Ftest-file.txt`，显示一个 html 页面，说明找不到文件。如果我尝试与以前相同的技巧（`%2F`to `/`），那么我会收到此异常：

```
INFO  Found more URL path parts then expected, these will be ignored. Url: 'http://localhost:8080/gitblit/blob/project/commit-id/src/test-file.txt', mountpath: 'blob', urlPath: 'project/commit-id/src/test-file.txt', expected 3 parameters was 4
ERROR /path/to/project/.git cant find {1} in tree {2}
org.eclipse.jgit.errors.IncorrectObjectTypeException: Object commit-id is not a blob.
    at org.eclipse.jgit.storage.file.WindowCursor.open(WindowCursor.java:130)
    at org.eclipse.jgit.lib.ObjectDatabase.open(ObjectDatabase.java:176)
    at org.eclipse.jgit.lib.Repository.open(Repository.java:278)
    at com.gitblit.utils.JGitUtils.getByteContent(JGitUtils.java:563)
    at com.gitblit.utils.JGitUtils.getStringContent(JGitUtils.java:596)
    at com.gitblit.wicket.pages.BlobPage.<init>(BlobPage.java:133)
    at sun.reflect.GeneratedConstructorAccessor22.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.apache.wicket.session.DefaultPageFactory.createPage(DefaultPageFactory.java:188)
    at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:89)
    at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.newPage(BookmarkablePageRequestTarget.java:305)
    at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.getPage(BookmarkablePageRequestTarget.java:320)
    at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.processEvents(BookmarkablePageRequestTarget.java:234)
    at org.apache.wicket.request.AbstractRequestCycleProcessor.processEvents(AbstractRequestCycleProcessor.java:92)
    at org.apache.wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:1279)
    at org.apache.wicket.RequestCycle.step(RequestCycle.java:1358)
    at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1465)
    at org.apache.wicket.RequestCycle.request(RequestCycle.java:545)
    at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:486)
    at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:319)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:662)
ERROR Can't instantiate page using constructor public com.gitblit.wicket.pages.BlobPage(org.apache.wicket.PageParameters) and argument r = "project" h = "commit-id" f = "src"
org.apache.wicket.WicketRuntimeException: Can't instantiate page using constructor public com.gitblit.wicket.pages.BlobPage(org.apache.wicket.PageParameters) and argument r = "project" h = "commit-id" f = "src"
    at org.apache.wicket.session.DefaultPageFactory.createPage(DefaultPageFactory.java:212)
    at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:89)
    at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.newPage(BookmarkablePageRequestTarget.java:305)
    at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.getPage(BookmarkablePageRequestTarget.java:320)
    at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.processEvents(BookmarkablePageRequestTarget.java:234)
    at org.apache.wicket.request.AbstractRequestCycleProcessor.processEvents(AbstractRequestCycleProcessor.java:92)
    at org.apache.wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:1279)
    at org.apache.wicket.RequestCycle.step(RequestCycle.java:1358)
    at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1465)
    at org.apache.wicket.RequestCycle.request(RequestCycle.java:545)
    at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:486)
    at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:319)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.GeneratedConstructorAccessor22.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.apache.wicket.session.DefaultPageFactory.createPage(DefaultPageFactory.java:188)
    ... 27 more
Caused by: java.lang.NullPointerException
    at com.gitblit.wicket.pages.BlobPage.generateSourceView(BlobPage.java:142)
    at com.gitblit.wicket.pages.BlobPage.<init>(BlobPage.java:134)
    ... 31 more 
```

我基本上没有配置 gitblit 本身（没有更改`gitblit.properties`），所以我的问题可能存在于错过的配置中，但我可以弄清楚在哪里。有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T10:46:47.413

> gitblit.properties 没有变化

这句话是造成麻烦的那句话。[该解决方案在Gitblit.com FAQ](http://gitblit.com/faq.html)上有很好的记录。

> 在 Tomcat 上运行 Gitblit
> Tomcat 采取了额外的预防措施，即[默认情况下不允许嵌入斜杠](http://tomcat.apache.org/security-6.html#Fixed_in_Apache_Tomcat_6.0.10)。这会破坏 Gitblit 网址。对于如何处理这种情况，您有几个选项：
> 1.**调整 Tomcat** 将 -Dorg.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH=true 添加到 CATALINA_OPTS 或 JVM 启动参数
> 2.使用以下之一**修改 gitblit.properties** :
> - web.mountParameters = false 并使用不漂亮的参数化网址
> - web.forwardSlashCharacter = ! 它告诉 Gitblit 使用 ! 代替 /

我使用`web.forwardSlashCharacter = !`，从管理器重新加载 gitblit webapp，现在一切正常。我的错是我没有仔细阅读常见问题解答，直到[James Morger](https://stackoverflow.com/users/830200/james-moger)建议我进行讲座。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-25T21:03:45.600

解决这个愚蠢问题的简单方法是在 /var/lib/tomcat7/gitblit.properties中禁用**挂载 URL ：**

**请按照以下简单步骤操作：**

1.  纳米/var/lib/tomcat7/webapps/gitblit/WEB-INF/data/gitblit.properties
2.  找到 web.mountParameters = true*并更改为* **false**
3.  重启tomcat **/etc/init.d/tomcat7 restart**
4.  就这样 ！

啊！

# html - 使用 readHTMLTable 检索 html 表格

> ID：15761921
> 
> 赞同：2
> 
> 时间：2013-04-02T10:35:37.957
> 
> 标签：html, r, web-scraping, html-table, rcurl

我正在尝试在**R**中从新交所网站检索价格。

```
myUrl="http://www.sgx.com/wps/portal/sgxweb/home/marketinfo/securities/etfs/!ut/p/c5/04_SB8K8xLLM9MSSzPy8xBz9CP0os3gjR0cTDwNnA0sDC3cLA0_XsDBfFzcPQ_dQQ6B8JJK8hZG7uYGnoVmgs2GIs7G3qwlJuv1DDYG6Q50CTZzCQg29Pc0I6PbzyM9N1S_IDY0od1RUBADjR8NU/dl3/d3/L2dBISEvZ0FBIS9nQSEh/"  

x=readHTMLTable(myUrl,which="priceTableData")  

Error in function (classes, fdef, mtable)  :    unable to find an inherited method for
function ‘readHTMLTable’ for signature ‘"NULL"’ 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-02T11:03:32.037

您不能`readHTMLTable`在那里使用，因为您要查找的表不在您提供的 url 检索到的 HTML 文件中。该表实际上是由该页面内的 javascript 代码动态创建的。

通常，此类 javascript 代码`json`通过单独的 http 查询以格式检索数据。如果幸运的话，您可以`json`自己获取这些数据。您可以在浏览器中使用 javascript 调试器（希望是 google chrome 或 firefox）来找出 json 数据的 URL。

这是 Google chrome 的 javascript 调试器的快速屏幕截图，您可以在其中找到`json`数据链接。单击网页中的刷新图标后，调试器中的网络选项卡会显示该页面发出的所有网络请求。

![在此处输入图像描述](https://i.stack.imgur.com/FsWSx.png)

您可以右键单击相关的网络请求行，然后复制 url

它看起来像

```
http://www.sgx.com/JsonRead/JsonData?qryId=REtf&timeout=60&%20noCache=1364900004343.639397.7228688071 
```

我认为可以简单地将其简化为以下内容，`timeout`并且`noCache`URL 请求中的变量在直观上似乎是可选的。

```
http://www.sgx.com/JsonRead/JsonData?qryId=REtf 
```

这个 URL 给出的数据如下，可能是你想要的。

```
{}&& {identifier:'ID', label:'As at 02-04-2013 5:04 PM',items:[{ID:0,N:'ABF SG BOND ETF',SIP:'@',NC:'A35',R:'NONE',I:'NONE',M:'-',LT:1.180,C:0.000,VL:7000.000,BV:8000.000,B:'1.175',S:'1.18',SV:49000.000,O:1.180,H:1.180,L:1.180,V:8260.000,SC:'8',PV:1.180,IOPV:0.000,P:0.0,P_:'X',V_:''},{ID:1,N:'CIMB APAC Div 100S$D',SIP:'',NC:'QR9',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:1000.000,B:'1.364',S:'1.373',SV:1000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:1.361,IOPV:0.000,P:0.0,P_:'X',V_:''},{ID:2,N:'CIMB APAC Div 100US$',SIP:'',NC:'P5P',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:20000.000,B:'1.1',S:'1.109',SV:20000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:1.092,IOPV:0.000,P:0.0,P_:'X',V_:''},{ID:3,N:'CIMBASEAN40 100S$D',SIP:'',NC:'QS0',R:'XD',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:100.000,B:'13.74',S:'13.84',SV:100.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:13.930,IOPV:0.000,P:0.0,P_:'X',V_:''},{ID:4,N:'CIMBASEAN40 100US$',SIP:'',NC:'M62',R:'XD',I:'NONE',M:'-',LT:10.970,C:-0.530,VL:9500.000,BV:2000.000,B:'11.03',S:'11.12',SV:2000.000,O:11.120,H:11.120,L:10.970,V:104862.000,SC:'8',PV:11.500,IOPV:0.000,P:-4.6086953125,P_:'X',V_:''},{ID:5,N:'DBXT ASX200 10US$',SIP:'X@',NC:'LF1',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:2500.000,B:'40.93',S:'41.06',SV:2500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:40.810,IOPV:0.000,P:0.0,P_:'X',V_:''},{ID:6,N:'DBXT AUDBonds 5AU$',SIP:'X@',NC:'K6Y',R:'NONE',I:'NONE',M:'-',LT:184.720,C:2.580,VL:400.000,BV:500.000,B:'183.95',S:'184.75',SV:500.000,O:184.720,H:184.720,L:184.720,V:73888.000,SC:'8',PV:182.140,IOPV:0.000,P:1.41649267578125,P_:'X',V_:''},{ID:7,N:'DBXT AUDCS 5AU$',SIP:'X@',NC:'KV5',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:500.000,B:'207.95',S:'208.2',SV:500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:207.620,IOPV:0.000,P:0.0,P_:'X',V_:''},{ID:8,N:'DBXT AUDCS 5SG$',SIP:'X@',NC:'KV7',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:250.000,B:'269.25',S:'270.05',SV:250.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:267.400,IOPV:0.000,P:0.0,P_:'X',V_:''},{ID:9,N:'DBXT AUDCS 5US$',SIP:'X@',NC:'KV6',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:250.000,B:'217.44',S:'218.14',SV:250.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:215.850,IOPV:0.000,P:0.0,P_:'X',V_:''},{ID:10,N:'DBXT China25 10US$',SIP:'X@',NC:'HD8',R:'NONE',I:'NONE',M:'-',LT:27.820,C:-0.180,VL:2150.000,BV:2000.000,B:'27.97',S:'28.1',SV:2000.000,O:27.820,H:27.820,L:27.820,V:59813.000,SC:'8',PV:28.000,IOPV:0.000,P:-0.642857177734375,P_:'X',V_:''},{ID:11,N:'DBXT CSI300 10US$',SIP:'X@',NC:'KT4',R:'NONE',I:'NONE',M:'-',LT:7.800,C:0.000,VL:88360.000,BV:10000.000,B:'7.81',S:'7.83',SV:10000.000,O:7.800,H:7.830,L:7.730,V:686716.000,SC:'8',PV:7.800,IOPV:0.000,P:0.0,P_:'X',V_:''},{ID:12,N:'DBXT DBCBLEB 10US$',SIP:'X@',NC:'L5G',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:2500.000,B:'19.55',S:'19.62',SV:2500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:21.200,IOPV:0.000,P:0.0,P_:'X',V_:''},{ID:13,N:'DBXT DBCDJUBS10US$',SIP:'X@',NC:'L5F',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:1500.000,B:'31.72',S:'31.84',SV:1500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:31.730,IOPV:0.000,P:0.0,P_:'X',V_:''},{ID:14,N:'DBXT DBLCI-OY 5US$',SIP:'X@',NC:'J0S',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:1500.000,B:'37.22',S:'37.36',SV:1500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:37.500,IOPV:0.000,P:0.0,P_:'X',V_:''},{ID:15,N:'DBXT E50 10US$',SIP:'X@',NC:'IH0',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:1500.000,B:'39.93',S:'40.05',SV:1500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:40.290,IOPV:0.000,P:0.0,P_:'X',V_:''},{ID:16,N:'DBXT EONIA 5US$',SIP:'X@',NC:'KV8',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:250.000,B:'179.1',S:'179.75',SV:250.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:183.330,IOPV:0.000,P:0.0,P_:'X',V_:''},{ID:17,N:'DBXT iBoxxKR 5US$',SIP:'X@',NC:'KT2',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:500.000,B:'140.49',S:'141.69',SV:500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:141.930,IOPV:0.000,P:0.0,P_:'X',V_:''},{ID:18,N:'DBXT iBoxxSing5SG$',SIP:'X@',NC:'KV4',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:500.000,B:'129.78',S:'130.28',SV:500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:130.230,IOPV:0.000,P:0.0,P_:'X',V_:''},{ID:19,N:'DBXT iBoxxSvEu5US$',SIP:'X@',NC:'KF6',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:300.000,B:'244.53',S:'246.13',SV:300.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:237.390,IOPV:0.000,P:0.0,P_:'X',V_:''},{ID:20,N:'DBXT iBoxxUSTr5US$',SIP:'X@',NC:'KF7',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:300.000,B:'207.59',S:'208.59',SV:300.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:206.100,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:21,N:'DBXT MS SING 10US$',SIP:'X@',NC:'O9A',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:50000.000,B:'1.335',S:'1.339',SV:50000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:1.317,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:22,N:'DBXT MSAsExJp10US$',SIP:'X@',NC:'IH1',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:4000.000,B:'32.95',S:'33.1',SV:4000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:33.060,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:23,N:'DBXT MSASPAC 10US$',SIP:'X@',NC:'O9B',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:16500.000,B:'3.7',S:'3.71',SV:16500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:3.710,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:24,N:'DBXT MSAXJHDY10US$',SIP:'X@',NC:'N2F',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:33000.000,B:'1.82',S:'1.828',SV:33000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:1.850,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:25,N:'DBXT MSBANGL 10US$',SIP:'X@',NC:'O9C',R:'NONE',I:'NONE',M:'-',LT:0.804,C:0.004,VL:70170.000,BV:31000.000,B:'0.805',S:'0.812',SV:31000.000,O:0.798,H:0.804,L:0.798,V:56031.000,SC:'8',PV:0.800,IOPV:0.000,P:0.500000048828125,P_:'',V_:''},{ID:26,N:'DBXT MSBrazil10US$',SIP:'X@',NC:'J0O',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:7400.000,B:'5.42',S:'5.46',SV:7400.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:5.410,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:27,N:'DBXT MSCHINA 10US$',SIP:'X@',NC:'LG9',R:'NONE',I:'NONE',M:'-',LT:11.750,C:0.000,VL:15000.000,BV:5000.000,B:'11.72',S:'11.77',SV:5000.000,O:11.660,H:11.750,L:11.660,V:175700.000,SC:'8',PV:11.750,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:28,N:'DBXT MSEmer 10US$',SIP:'X@',NC:'J0M',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:16000.000,B:'4.02',S:'4.03',SV:16000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:4.030,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:29,N:'DBXT MSEMAsia10US$',SIP:'X@',NC:'J0N',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:100000.000,B:'3.82',S:'3.83',SV:100000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:3.830,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:30,N:'DBXT MSEurope10US$',SIP:'X@',NC:'IH3',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:1400.000,B:'49.27',S:'49.5',SV:1400.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:49.200,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:31,N:'DBXT MSINDIA 10US$',SIP:'X@',NC:'LG8',R:'NONE',I:'NONE',M:'-',LT:8.620,C:-0.030,VL:6700.000,BV:6700.000,B:'8.72',S:'8.76',SV:6700.000,O:8.620,H:8.620,L:8.620,V:57754.000,SC:'8',PV:8.650,IOPV:0.000,P:-0.3468208251953125,P_:'',V_:''},{ID:32,N:'DBXT MSINDO 10US$',SIP:'X@',NC:'KJ7',R:'NONE',I:'NONE',M:'-',LT:16.830,C:-0.220,VL:38000.000,BV:3500.000,B:'16.88',S:'16.97',SV:3500.000,O:16.980,H:17.030,L:16.830,V:644380.000,SC:'8',PV:17.050,IOPV:0.000,P:-1.29032265625,P_:'',V_:''},{ID:33,N:'DBXT MSJAP 10US$',SIP:'X@',NC:'LF2',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:1500.000,B:'40.64',S:'40.81',SV:1500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:40.900,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:34,N:'DBXT MSKorea 10US$',SIP:'X@',NC:'IH2',R:'NONE',I:'NONE',M:'-',LT:58.800,C:-0.040,VL:10.000,BV:850.000,B:'58.11',S:'58.39',SV:850.000,O:58.800,H:58.800,L:58.800,V:588.000,SC:'8',PV:58.840,IOPV:0.000,P:-0.06798096923828124,P_:'',V_:''},{ID:35,N:'DBXT MSMSIA 10US$',SIP:'X@',NC:'LG6',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:3900.000,B:'14.22',S:'14.28',SV:3900.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:14.100,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:36,N:'DBXT MSPacXJp10US$',SIP:'X@',NC:'J0Q',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:16000.000,B:'5.19',S:'5.22',SV:16000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:5.010,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:37,N:'DBXT MSPAKIS 10US$',SIP:'X@',NC:'O9D',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:24000.000,B:'1.367',S:'1.373',SV:24000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:1.355,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:38,N:'DBXT MSPHILS 10US$',SIP:'X@',NC:'N2E',R:'NONE',I:'NONE',M:'-',LT:2.130,C:-0.025,VL:7000.000,BV:40000.000,B:'2.122',S:'2.13',SV:40000.000,O:2.130,H:2.130,L:2.130,V:14910.000,SC:'8',PV:2.155,IOPV:0.000,P:-1.16009287109375,P_:'',V_:''},{ID:39,N:'DBXT MSRussia10US$',SIP:'X@',NC:'J0R',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:18000.000,B:'2.96',S:'2.97',SV:18000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:2.980,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:40,N:'DBXT MSTaiwan10US$',SIP:'X@',NC:'HD7',R:'NONE',I:'NONE',M:'-',LT:18.370,C:-0.120,VL:300.000,BV:2900.000,B:'18.38',S:'18.46',SV:2900.000,O:18.370,H:18.370,L:18.370,V:5511.000,SC:'8',PV:18.490,IOPV:0.000,P:-0.648999462890625,P_:'',V_:''},{ID:41,N:'DBXT MSTHAI 10US$',SIP:'X@',NC:'LG7',R:'NONE',I:'NONE',M:'-',LT:22.500,C:-0.100,VL:5200.000,BV:2600.000,B:'22.6',S:'22.71',SV:2600.000,O:22.440,H:22.500,L:22.440,V:116844.000,SC:'8',PV:22.600,IOPV:0.000,P:-0.442477880859375,P_:'',V_:''},{ID:42,N:'DBXT MSUSA 10US$',SIP:'X@',NC:'KF8',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:1650.000,B:'38.47',S:'38.61',SV:1650.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:36.780,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:43,N:'DBXT MSWorld 10US$',SIP:'X@',NC:'J0P',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:16000.000,B:'3.65',S:'3.67',SV:16000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:3.680,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:44,N:'DBXT Nifty 10US$',SIP:'X@',NC:'HE0',R:'NONE',I:'NONE',M:'-',LT:106.100,C:-0.340,VL:470.000,BV:470.000,B:'107.29',S:'107.78',SV:470.000,O:106.100,H:106.100,L:106.100,V:49867.000,SC:'8',PV:106.440,IOPV:0.000,P:-0.31942880859375,P_:'',V_:''},{ID:45,N:'DBXT S&P500 10US$',SIP:'X@',NC:'K6K',R:'NONE',I:'NONE',M:'-',LT:25.590,C:0.080,VL:50.000,BV:3000.000,B:'25.54',S:'25.65',SV:3000.000,O:25.590,H:25.590,L:25.590,V:1279.000,SC:'8',PV:25.510,IOPV:0.000,P:0.3136025146484375,P_:'',V_:''},{ID:46,N:'DBXT S&PShort10US$',SIP:'X@',NC:'HD6',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:1500.000,B:'31.5',S:'31.58',SV:1500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:31.620,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:47,N:'DBXT SORA 5SG$',SIP:'X@',NC:'KJ6',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:500.000,B:'107.36',S:'107.66',SV:500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:107.380,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:48,N:'DBXT STGLDv 10US$',SIP:'X@',NC:'KT3',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:1900.000,B:'30.11',S:'30.25',SV:1900.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:29.900,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:49,N:'DBXT USDCS 5US$',SIP:'X@',NC:'IH4',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:500.000,B:'170.72',S:'170.91',SV:500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:170.640,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:50,N:'DBXT USDIGInfl5US$',SIP:'X@',NC:'KF5',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:300.000,B:'287.36',S:'289.36',SV:300.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:286.670,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:51,N:'DBXT Vietnam 10US$',SIP:'X@',NC:'HD9',R:'NONE',I:'NONE',M:'-',LT:26.200,C:0.240,VL:900.000,BV:2000.000,B:'26.23',S:'26.3',SV:2000.000,O:26.200,H:26.200,L:26.200,V:23580.000,SC:'8',PV:25.960,IOPV:0.000,P:0.92449921875,P_:'',V_:''},{ID:52,N:'GLD 10US$',SIP:'@',NC:'O87',R:'NONE',I:'NONE',M:'-',LT:154.840,C:0.400,VL:13050.000,BV:10.000,B:'154.68',S:'154.84',SV:100.000,O:155.080,H:155.100,L:154.700,V:2022693.000,SC:'8',PV:154.440,IOPV:154.549,P:0.259000244140625,P_:'',V_:''},{ID:53,N:'IS ASIA BND 100S$D',SIP:'@',NC:'QL2',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:500.000,B:'13.4',S:'13.49',SV:500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:13.380,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:54,N:'IS ASIA BND 100US$',SIP:'@',NC:'N6M',R:'NONE',I:'NONE',M:'-',LT:10.850,C:0.000,VL:61000.000,BV:500.000,B:'10.76',S:'10.85',SV:5100.000,O:10.850,H:10.850,L:10.850,V:658805.000,SC:'8',PV:10.850,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:55,N:'IS ASIA HYG100S$D',SIP:'@',NC:'QL3',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:700.000,B:'13.8',S:'13.86',SV:500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:13.970,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:56,N:'IS ASIA HYG100US$',SIP:'@',NC:'O9P',R:'NONE',I:'NONE',M:'-',LT:11.120,C:-0.060,VL:49800.000,BV:1100.000,B:'11.1',S:'11.19',SV:100.000,O:11.120,H:11.120,L:11.120,V:556241.000,SC:'8',PV:11.180,IOPV:0.000,P:-0.536672607421875,P_:'',V_:''},{ID:57,N:'IS DJ USTECH 10US$',SIP:'@',NC:'I21',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:800.000,B:'72.39',S:'73.09',SV:800.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:72.860,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:58,N:'IS LC 1-3Y 100S$D',SIP:'@',NC:'QL0',R:'NONE',I:'NONE',M:'-',LT:12.940,C:-0.040,VL:100.000,BV:100.000,B:'12.92',S:'12.95',SV:100.000,O:12.940,H:12.940,L:12.940,V:1294.000,SC:'8',PV:12.980,IOPV:0.000,P:-0.30816640625,P_:'',V_:''},{ID:59,N:'IS LC 1-3Y 100US$',SIP:'@',NC:'O9Q',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:100.000,B:'10.4',S:'10.49',SV:100.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:10.400,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:60,N:'IS LC BND 100S$D',SIP:'@',NC:'QL1',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:500.000,B:'13.18',S:'13.27',SV:500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:12.990,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:61,N:'IS LC BND 100US$',SIP:'@',NC:'N6L',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:500.000,B:'10.62',S:'10.71',SV:500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:10.670,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:62,N:'IS MS INDIA 100S$D',SIP:'@',NC:'QK9',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:500.000,B:'7.61',S:'7.7',SV:500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:7.640,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:63,N:'IS MS INDIA 100US$',SIP:'@',NC:'I98',R:'NONE',I:'NONE',M:'-',LT:6.210,C:0.060,VL:55400.000,BV:145000.000,B:'6.19',S:'6.23',SV:70000.000,O:6.060,H:6.210,L:6.060,V:341371.000,SC:'8',PV:6.150,IOPV:6.229,P:0.975609765625,P_:'',V_:''},{ID:64,N:'IS MSCI SIN 100US$',SIP:'@',NC:'I19',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:4000.000,B:'13.93',S:'13.98',SV:19000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:13.710,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:65,N:'IS S&P500 10US$',SIP:'@',NC:'I17',R:'NONE',I:'NONE',M:'-',LT:156.920,C:-0.070,VL:1000.000,BV:500.000,B:'156.95',S:'157.67',SV:350.000,O:156.920,H:156.920,L:156.920,V:156920.000,SC:'8',PV:156.990,IOPV:0.000,P:-0.04458882751464844,P_:'',V_:''},{ID:66,N:'Lyxor Asia 10US$',SIP:'X@',NC:'P60',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:30000.000,B:'4.78',S:'4.83',SV:30000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:4.790,IOPV:4.840,P:0.0,P_:'',V_:''},{ID:67,N:'Lyxor AsiaCS 10US$',SIP:'X@',NC:'NF6',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:1000.000,B:'56.24',S:'56.9',SV:1000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:56.090,IOPV:56.580,P:0.0,P_:'',V_:''},{ID:68,N:'Lyxor AsiaFN 10US$',SIP:'X@',NC:'NF5',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:2000.000,B:'31.61',S:'31.96',SV:2000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:26.310,IOPV:31.810,P:0.0,P_:'',V_:''},{ID:69,N:'Lyxor AsiaIF 10US$',SIP:'X@',NC:'NF3',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:2000.000,B:'33.27',S:'33.62',SV:2000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:32.850,IOPV:33.500,P:0.0,P_:'',V_:''},{ID:70,N:'Lyxor AsiaIT 10US$',SIP:'X@',NC:'NF4',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:2000.000,B:'30.',S:'30.35',SV:2000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:25.290,IOPV:30.180,P:0.0,P_:'',V_:''},{ID:71,N:'Lyxor AsiaMT 10US$',SIP:'X@',NC:'NF7',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:1000.000,B:'48.58',S:'49.16',SV:1000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:49.070,IOPV:48.830,P:0.0,P_:'',V_:''},{ID:72,N:'Lyxor AsiaRE 10US$',SIP:'X@',NC:'MT7',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:3000.000,B:'10.59',S:'10.7',SV:3000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:10.720,IOPV:10.650,P:0.0,P_:'',V_:''},{ID:73,N:'Lyxor ChinaH 10US$',SIP:'X@',NC:'P58',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:20000.000,B:'13.93',S:'14.26',SV:20000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:14.440,IOPV:14.080,P:0.0,P_:'',V_:''},{ID:74,N:'Lyxor Cmdty 10US$',SIP:'X@',NC:'A0W',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:31000.000,B:'2.74',S:'2.8',SV:30000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:2.740,IOPV:2.740,P:0.0,P_:'',V_:''},{ID:75,N:'Lyxor CRBxEny10US$',SIP:'X@',NC:'G1O',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:26600.000,B:'2.48',S:'2.54',SV:25000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:2.510,IOPV:2.510,P:0.0,P_:'',V_:''},{ID:76,N:'Lyxor EastEur10US$',SIP:'X@',NC:'H1M',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:10000.000,B:'4.4',S:'4.61',SV:10000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:4.850,IOPV:4.500,P:0.0,P_:'',V_:''},{ID:77,N:'Lyxor EM Mkt 10US$',SIP:'X@',NC:'H1N',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:10000.000,B:'10.28',S:'10.47',SV:10000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:10.210,IOPV:10.370,P:0.0,P_:'',V_:''},{ID:78,N:'Lyxor Europe 10US$',SIP:'X@',NC:'JC5',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:5000.000,B:'13.06',S:'13.21',SV:5000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:13.190,IOPV:13.180,P:0.0,P_:'',V_:''},{ID:79,N:'Lyxor HSI 10US$',SIP:'X@',NC:'A9B',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:30000.000,B:'2.82',S:'2.85',SV:1000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:2.900,IOPV:2.840,P:0.0,P_:'',V_:''},{ID:80,N:'Lyxor Indonesia10US$',SIP:'X@',NC:'P2Q',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:500.000,B:'106.55',S:'108.15',SV:500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:102.870,IOPV:107.080,P:0.0,P_:'',V_:''},{ID:81,N:'Lyxor Japan 10US$',SIP:'X@',NC:'CW4',R:'NONE',I:'NONE',M:'-',LT:1.069,C:0.001,VL:2500.000,BV:57500.000,B:'1.066',S:'1.076',SV:60000.000,O:1.069,H:1.069,L:1.069,V:2672.000,SC:'8',PV:1.068,IOPV:1.060,P:0.09363296508789062,P_:'',V_:''},{ID:82,N:'Lyxor Korea 10US$',SIP:'X@',NC:'AO9',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:15000.000,B:'5.14',S:'5.2',SV:15000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:5.200,IOPV:5.170,P:0.0,P_:'',V_:''},{ID:83,N:'Lyxor LATAM 10US$',SIP:'X@',NC:'H1O',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:10000.000,B:'7.61',S:'7.73',SV:10000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:7.410,IOPV:7.680,P:0.0,P_:'',V_:''},{ID:84,N:'Lyxor MAL 10US$',SIP:'X@',NC:'G1M',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:10000.000,B:'9.8',S:'9.94',SV:10000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:9.420,IOPV:9.860,P:0.0,P_:'',V_:''},{ID:85,N:'Lyxor MSIndia10US$',SIP:'X@',NC:'G1N',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:26000.000,B:'13.71',S:'13.84',SV:20000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:13.590,IOPV:13.870,P:0.0,P_:'',V_:''},{ID:86,N:'Lyxor Nasdaq 10US$',SIP:'X@',NC:'H1Q',R:'NONE',I:'NONE',M:'-',LT:11.110,C:-0.070,VL:1900.000,BV:8100.000,B:'11.15',S:'11.25',SV:10000.000,O:11.110,H:11.110,L:11.110,V:21109.000,SC:'8',PV:11.180,IOPV:11.170,P:-0.62611806640625,P_:'',V_:''},{ID:87,N:'Lyxor Russia 10US$',SIP:'X@',NC:'JC7',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:7500.000,B:'3.73',S:'3.81',SV:7500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:3.870,IOPV:3.940,P:0.0,P_:'',V_:''},{ID:88,N:'Lyxor Taiwan 10US$',SIP:'X@',NC:'A9A',R:'NONE',I:'NONE',M:'-',LT:0.970,C:0.000,VL:3000.000,BV:27000.000,B:'0.975',S:'0.986',SV:30000.000,O:0.970,H:0.970,L:0.970,V:2910.000,SC:'8',PV:0.970,IOPV:0.980,P:0.0,P_:'',V_:''},{ID:89,N:'Lyxor ThaiSET 10US$',SIP:'X@',NC:'P2P',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:500.000,B:'143.6',S:'145.24',SV:500.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:104.920,IOPV:145.210,P:0.0,P_:'',V_:''},{ID:90,N:'Lyxor USDJIA 10US$',SIP:'X@',NC:'JC6',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:5000.000,B:'14.73',S:'14.87',SV:5000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:14.620,IOPV:14.790,P:0.0,P_:'',V_:''},{ID:91,N:'Lyxor World 10US$',SIP:'X@',NC:'H1P',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:50000.000,B:'1.431',S:'1.454',SV:50000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:1.418,IOPV:1.450,P:0.0,P_:'',V_:''},{ID:92,N:'LYXOR Asia EX 10US$',SIP:'X@',NC:'G1K',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:20000.000,B:'4.47',S:'4.52',SV:20000.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:4.440,IOPV:4.480,P:0.0,P_:'',V_:''},{ID:93,N:'Nikko AM STI ETF100',SIP:'@',NC:'G3B',R:'NONE',I:'NONE',M:'-',LT:3.370,C:0.000,VL:2100.000,BV:31000.000,B:'3.36',S:'3.38',SV:4500.000,O:3.360,H:3.370,L:3.360,V:7057.000,SC:'8',PV:3.370,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:94,N:'SPDR DJIA 10US$',SIP:'@',NC:'D07',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:0.000,B:'',S:'',SV:0.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:108.600,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:95,N:'SPDR S&P500 10US$',SIP:'@',NC:'S27',R:'NONE',I:'NONE',M:'-',LT:0.000,C:0.000,VL:0.000,BV:10.000,B:'155.6',S:'',SV:0.000,O:0.000,H:0.000,L:0.000,V:0.000,SC:'8',PV:155.300,IOPV:0.000,P:0.0,P_:'',V_:''},{ID:96,N:'STI ETF',SIP:'@',NC:'ES3',R:'NONE',I:'NONE',M:'-',LT:3.350,C:0.010,VL:35000.000,BV:1000.000,B:'3.34',S:'3.35',SV:74000.000,O:3.330,H:3.350,L:3.320,V:116640.000,SC:'8',PV:3.340,IOPV:3.350,P:0.299401220703125,P_:'',V_:''},{ID:97,N:'UETF SSE50China100',SIP:'X@',NC:'JK8',R:'NONE',I:'NONE',M:'-',LT:1.730,C:-0.010,VL:88800.000,BV:6000.000,B:'1.73',S:'1.76',SV:44500.000,O:1.740,H:1.740,L:1.730,V:153970.000,SC:'8',PV:1.740,IOPV:0.000,P:-0.574712646484375,P_:'',V_:''}]} 
```

现在您需要做的就是解析这个 json 数据并获取您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-17T19:26:30.560

如果您不打算自动执行此操作（即一次性完成），则每次都有效的解决方案是在您最喜欢的浏览器中转到开发人员工具，并将 HTML 节点的内容复制到带有 HTML 的新文件中延期。之所以可行，是因为开发者工具中表示的 DOM 是*渲染*后的DOM，这意味着所有数据传输脚本都已在其上运行。

这将为您提供一个完整呈现表格的 HTML 文件。您可以正常加载它，例如`my.data <- readHTMLTable("C:/Users/username/Desktop/webpage.htm", header = TRUE, which = 1)`.

我最近不得不对一些没有公开 API 的 CDC 数据执行此操作。如果您可以选择使用 API，请这样做，因为它更清洁、更容易。

# java - Liferay Web 服务的第一步

> ID：15761928
> 
> 赞同：7
> 
> 时间：2013-04-02T10:35:50.037
> 
> 标签：java, eclipse, web-services, liferay

*   我按照本[教程](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/soap-web-services)- 关于 Liferay Web 服务的文档进行操作。
*   我在 tomcat 上运行 Lifaray
*   如果我`http://localhost:8080/api/axis/Portal_UserService?wsdl`通过浏览器使用，我会有回应。
*   当我在 Eclipse 上创建一个 webService 客户端并将这个 url`http://localhost:8080/api/axis/Portal_UserService?wsdl`放在服务定义中时......但我有这个错误消息：

    *`No server can be found and WebServiceProject does not exist. Choose an existing project or use the preferences to configure a server runtime.`*
    为什么？

![在此处输入图像描述](https://i.stack.imgur.com/qZT8j.png)![在此处输入图像描述](https://i.stack.imgur.com/NxkzT.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:38:53.590

创建动态 Web 项目并配置服务器，然后添加 wsdl 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:20:18.637

这并不意味着找不到服务器（例如 Liferay），而是通知您 Eclipse 不知道在哪里放置/如何配置生成的 WebService：它需要一个服务器运行时和一个 WebServiceProject - 例如，您可以创建一个项目中的 WebServiceClient - 如果不存在合适的项目，eclipse 会抱怨。

所以：Liferay 方面的一切都很好。您需要 IDE 中的基础架构才能继续执行此操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T16:02:30.960

我找不到任何解决方案，由于某种原因`Eclipse`无法识别有效的`wsdl`. 我下载了试用版`IntelliJ IDEA 13 Ultimate`并在`Web Service Client`那里进行了设置。一切正常。

# javascript - 隐藏窗口滚动条而不移动居中的内容

> ID：15761929
> 
> 赞同：0
> 
> 时间：2013-04-02T10:35:52.090
> 
> 标签：javascript, css

是否可以（暂时）隐藏主窗口（垂直）滚动条（body/html 上的滚动条）而不（稍微）移动居中的内容？

设置`overflow: hidden`为`body, html`隐藏滚动条，但在执行此操作时，居中的内容会向右移动一半的滚动条宽度。我可以添加`padding-right: <width-of-scrollbar>`，但这会有所不同，如果没有滚动条，也会移动内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:13:01.647

您可以相对定位居中的部分（左：50%），然后使用 javascript 以像素为单位设置固定位置。在 jQuery 中：

```
$(".centered").offset({left : $(".centered").offset().left}); 
```

在此处查看实际操作：http: [//jsfiddle.net/willemvb/jP3PK/4/](http://jsfiddle.net/willemvb/jP3PK/4/)

# iphone - 在 iOS 中与 Instagram 上的图像共享文本

> ID：15761932
> 
> 赞同：8
> 
> 时间：2013-04-02T10:35:58.113
> 
> 标签：iphone, ios, objective-c, instagram

在我的应用程序中，我在 Instagram 上分享了一张图片。它在我的应用程序中运行良好。

我正在使用以下代码。

```
@property (nonatomic, retain) UIDocumentInteractionController *dic;    

CGRect rect = CGRectMake(0 ,0 , 0, 0);
UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, self.view.opaque, 0.0);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIGraphicsEndImageContext();
NSString  *jpgPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/test.igo"];

NSURL *igImageHookFile = [[NSURL alloc] initWithString:[[NSString alloc] initWithFormat:@"file://%@", jpgPath]];
//    NSURL *igImageHookFile = [[NSURL alloc] initWithString:[[NSString alloc] initWithFormat:@"file://%@", screenshot]];

self.dic.UTI = @"com.instagram.photo";
self.dic = [self setupControllerWithURL:igImageHookFile usingDelegate:self];
self.dic=[UIDocumentInteractionController interactionControllerWithURL:igImageHookFile];
[self.dic presentOpenInMenuFromRect: rect    inView: self.view animated: YES ];

- (UIDocumentInteractionController *) setupControllerWithURL: (NSURL*) fileURL usingDelegate: (id <UIDocumentInteractionControllerDelegate>) interactionDelegate {
UIDocumentInteractionController *interactionController = [UIDocumentInteractionController interactionControllerWithURL: fileURL];
interactionController.delegate = interactionDelegate;
return interactionController;
} 
```

现在我还想与图像分享一些文字。

如下图所示。在“写一个标题”中，我想要一些默认的自定义文本，例如。“分享这张照片”。

我怎样才能做到这一点？

提前致谢...

![在此处输入图像描述](https://i.stack.imgur.com/q25LA.png)

**已编辑**

我正在从我的应用程序中打开 Instagram 以共享图像，它运行良好。

但是是否有可能我可以检查用户是否已成功共享它？

意味着当用户成功共享图像时，我想在我的数据库中执行一些操作。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T11:05:29.390

我得到了我的答案。刚刚添加了一行，它对我有用。

```
self.dic.annotation = [NSDictionary dictionaryWithObject:@"Here Give what you want to share" forKey:@"InstagramCaption"]; 
```

谢谢...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-04T15:56:35.100

它也记录在[http://instagram.com/developer/iphone-hooks/的官方文档中](http://instagram.com/developer/iphone-hooks/)

> 要在您的照片中包含预填充的标题，您可以将文档交互请求上的注释属性设置为包含键“InstagramCaption”下的 NSString 的 NSDictionary。注意：此功能将在 Instagram 2.1 及更高版本上可用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-02T09:23:13.867

您不再被允许与 Instagram 或 Facebook 共享预填充文本。

只有图像/屏幕截图可以通过 UIDocumentInteractionController 共享。

# java - 组合两个叠加的图像

> ID：15761934
> 
> 赞同：0
> 
> 时间：2013-04-02T10:36:01.703
> 
> 标签：java, android, image, overlay, android-canvas

您好，我有两个图像视图，一个带有从相机中选择的图片，另一个图像视图仅带有文本，例如“Made Hawk Nelson”，两个图像视图的图像如下

![在此处输入图像描述](https://i.stack.imgur.com/hxfuR.png)

xml代码如下

```
 <RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="7"
    android:scaleType="fitXY" >

    <ImageView
        android:id="@+id/imgSelectedPhoto"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="fitXY" />

    <ImageView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/txt_made_hawk_nelson"
        android:layout_centerInParent="true" />

</RelativeLayout> 
```

上图是半屏代码，上图也是半屏

现在我想保存这张照片，任何人都可以帮助我，我该怎么做？可能是 CANVAS 会帮助我，但我不知道该怎么做，所以请任何人帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:52:19.070

这可能会对您有所帮助，这里需要使用必需的字符串更改功能，并传递您的背景图像，并使用和创建一个单一的`drawable`调整字体大小、文本颜色和对齐方式并检查它。`Canvas``Bitmap`

```
private Bitmap getThumb(String strangle, String strnote, int width, int height) {

  //Bitmap mBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.transperet_bg);
  Bitmap bmOverlay = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);

  Canvas canvas = new Canvas(bmOverlay);
  Paint paint = new Paint();

  paint.setColor(Color.WHITE);
  paint.setTextSize(20);
  paint.setFlags(Paint.ANTI_ALIAS_FLAG);
  // if the background image is defined in main.xml, omit this line
  canvas.drawARGB(140, 0, 0, 0);
  //canvas.drawBitmap(mBitmap, 0, 0, null);
  // draw the text and the point
  paint.setTextAlign(Paint.Align.LEFT);

  canvas.drawText("Head Angel = " + strangle, 10, 20, paint);

  strnote = edtnote.getText().toString();
  if (TextUtils.isEmpty(strnote)) {
   strnote = "Note";
  }
  canvas.drawText(strnote, 10, 50, paint);
  paint.setTextAlign(Paint.Align.RIGHT);

  canvas.drawText("www.moovemtb.com", width-60, 50, paint);
  canvas.drawText("Head Angel App", width-60, 20, paint);

  canvas.drawPoint(30.0f, height/2, paint);
  return bmOverlay;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:10:08.927

你有正确的想法。画布将是最简单的方法。

但是您必须首先了解这些 ImageView 只是屏幕上的表示，并且创建一个位图与这两个重叠的图像与屏幕上的表示几乎没有关系。

在图像的内存表示中，您将拥有 Drawables（根据屏幕大小预先缩放，因此它们的大小会根据 ldpi、mdpi、hdpi 和 xhdpi 文件夹因设备而异）和位图，它们是绝对表示.

我刚才所说的一切都会根据您的应用程序而有所不同，我不会为您提供确切的解决方案，但会向您解释所有概念：

举个例子，假设您将背景和文本都作为 Bitmaps 对象，那么您的代码将是：

```
// Init our overlay bitmap
Bitmap bmp = backgroundBitmap.copy(Bitmap.Config.ARGB_8888, true);
// Init the canvas
Canvas canvas = new Canvas(bmp);
// Draw the text on top of the canvas
canvas.drawBitmap(textBitmap, 0, 0, null);

// now bmp have the two overlayed: 
```

您可以（并且应该）做一些数学运算并使用`drawBitmap()`方法中的值 0, 0 将文本在画布上居中。

或者，如果您有一个可绘制对象（例如 getResources.getDrawable(R.drawable.bkgr); ），您可以使用[draw() 方法](https://developer.android.com/reference/android/graphics/drawable/BitmapDrawable.html#draw%28android.graphics.Canvas%29)绘制到画布并使用 getIntrinsicHeight 和 getIntrinsicWidth 使用[此方法创建位图](https://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap%28int,%20int,%20android.graphics.Bitmap.Config%29)

快乐编码！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T11:10:11.707

将布局更改为

```
<Framelayout
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_weight="7" >

<ImageView
    android:id="@+id/imgSelectedPhoto"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="fitXY" />

<ImageView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/txt_made_hawk_nelson"
    android:layout_centerInParent="true" /> 
```

设置 setDrawingCacheEnabled(true); 并从中创建位图。

```
Bitmap bitmap;
// frmCaptureThis is the root framelayout (this contains your imageviews)
View v1 = frmCaptureThis; 
v1.setDrawingCacheEnabled(true);
bitmap = Bitmap.createBitmap(v1.getDrawingCache());
v1.setDrawingCacheEnabled(false);
saveImgToSDcard(bitmap); // function to saves the image to sd card 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-17T09:41:45.890

请试试这个，效果很好

```
BufferedImage img1 = ImageIO.read(new File(pathtoImage)); //first image
BufferedImage img2 = ImageIO.read(new File(pathtoOverlay)); //overlay text image
BufferedImage combinedImage = new BufferedImage(img1.getWidth(),img1.getHeight(),BufferedImage.TYPE_INT_RGB);

    Graphics g = combinedImage.getGraphics();

    g.drawImage(img1, 0, 0, null);
    g.drawImage(img2, 0, 0, null);
    ImageIO.write(combinedImage,"JPG",new File(pathToBeSaved,"combined.jpg"); 
```

# jquery - 触发css：使用jquery悬停

> ID：15761939
> 
> 赞同：1
> 
> 时间：2013-04-02T10:36:20.430
> 
> 标签：jquery, css

我在这样的标签上应用了一个 CSS 规则

```
a { background-color: #000; }
a:hover {background-color: #ff0000; } 
```

我想使用 jquery 触发它的悬停行为，这可能吗？此代码运行良好，但未将 bg 颜色更改为红色。

```
$('.me a').mouseenter(); 
```

为什么我需要这个？我必须为我的 Web 应用程序的菜单编写自动化测试，这就是我需要的。

这里的重点是我可以使用 jquery 执行附加到 a:hover 的浏览器行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:40:21.333

试试这个

```
<a href="#">Move the mouse pointer over this paragraph.</a>

$(document).ready(function(){
  $("a").mouseover(function(){
    $("a").css("background-color","yellow");
  });
  $("a").mouseout(function(){
    $("a").css("background-color","lightgray");
  });
}); 
```

Jsfiddle 示例[http://jsfiddle.net/X5r8r/1110/](http://jsfiddle.net/X5r8r/1110/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:40:37.893

更改您的 CSS 规则，使样式也有一个类名：

```
a:hover,
a.mouseenter
{
   background-color: #ff0000;
} 
```

然后，您可以在希望提供悬停效果时简单地添加/删除类：

```
$('.me a').addClass("mouseenter"); 
```

***现场演示：http:** [//jsfiddle.net/X3Hm9/](http://jsfiddle.net/X3Hm9/)*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T11:27:22.123

**不**，您不能以`hover`编程方式设置状态。

正如其他人指出的那样，您可以以编程方式设置一个类，并在悬停或分类时对元素使用相同的样式：

```
a.hover, a:hover { ... } 
```

你可以用 做类似的事情`:focus`，这也是可以编程设置的（[demo](http://jsfiddle.net/mky3a/)）。

但是，您似乎只能在应用程序中触发 javascript，而不能更改其源代码的任何部分。在这种情况下，您必须做的是使用 java 脚本更改 css 规则本身。

在测试设置中，您可以将所有`:hover`样式更改为另外接受类名的样式：

```
function allowMockHover() {

    // iterate over all styleSheets
    for(var i = 0, l = document.styleSheets.length; i < l; i++) {
        var s = document.styleSheets[i];
        if(s.cssRules == null) continue;

        // iterate over all rules in styleSheet
        for(var x = 0, rl = s.cssRules.length; x < rl; x++) {
            var r = s.cssRules[x];
            if(r.selectorText && r.selectorText.indexOf(':hover') >= 0) {
               fixRule(r);
            }
        }
    }

}

function fixRule(rule) {

    // if the current rule has several selectors, treat them separately:
    var parts = rule.selectorText.split(',');
    for(var i = 0, l = parts.length; i < l; i++) {
        if(parts[i].indexOf(':hover') >= 0) {
           // update selector to be same + selector with class
           parts[i] = [ parts[i], parts[i].replace(/:hover/gi, '.mock-hover') ].join(',');
        }
    }

    // update rule
    rule.selectorText = parts.join(',');
} 
```

[演示](http://jsfiddle.net/pxyab/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T10:38:36.547

```
$('.me a').hover(function (){ $(this).css("background-color,"red")}, 
function(){$(this).css("background-color,"black")}); 
```

应该帮助你:)

在这里您可以了解更多关于 Jquery [http://api.jquery.com/hover/中的 hover()](http://api.jquery.com/hover/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T10:44:44.267

据我所知，这里并不是真的触发浏览器默认的悬停行为（这不是你想要的吗？）。但即使有，当你这样做时（`$('a').mouseenter();`），你也只需模拟几分之一秒的悬停，就在它默认为正常行为之后。一个更简单的方法可能只是添加一个类，如下所示：

```
$('a').addClass('is-hover'); 
```

使用以下CSS：

```
a:hover,
a.is-hover {
    background: red;
} 
```

真的不需要小提琴，但无论如何：http: [//jsfiddle.net/5fqXs/](http://jsfiddle.net/5fqXs/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T10:45:39.390

如果要重用 CSS 规则，请执行以下操作

1）将CSS规则更改为

```
a:hover, .hovered {background-color: #ff0000; } 
```

2）添加这个javascript代码

```
$('.me a').hover(function(){
  $(this).addClass('hovered');
},function(){
  $(this).removeClass('hovered');
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-02T10:49:31.480

我使用的一种方法是：

开始模拟悬停： `$('.me a').trigger("mouseover")`

结束模拟悬停： `$('.me a').trigger("mouseleave)`

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-04-02T10:38:21.440

试试这个：

```
$('.me a').mouseenter(function(){
    $(this).css('background', 'red')
}); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-04-02T10:42:25.260

与直接操作 CSS 相比，此代码背后的原因是 CSS 属于样式表而不是单个页面。现在想象一下，你想改变应用程序的背景颜色，并且直接在 jQuery 中改变 CSS，玩得开心。通过下面的示例，您可以更改 CSS 表中的 .hoverClass 并完成。

```
a { background-color: #000; }
.hoverClass {background-color: #ff0000; }

$('.me a').mouseenter(function(){
     $(this).toggleClass('hoverClass');
}).mouseout(function(){
     $(this).toggleClass('hoverClass');
}); 
```

尽管如前所述，这似乎完全没有意义，因为悬停类的概念是您想要实现的。

```
.me>a:hover {background-color: #ff0000; } 
```

# ios - 如何取消 NSManagedObjectContext 中的未决更改？

> ID：15761940
> 
> 赞同：1
> 
> 时间：2013-04-02T10:36:23.887
> 
> 标签：ios

在我的代码中，我插入了以下实体：

```
customer = [NSEntityDescription insertNewObjectForEntityForName:@"Customer" inManagedObjectContext:self.managedObjectContext]; 
```

然后，如果我检查 self.managedObjectContext 的详细信息，我可以在 self.managedObjectContext -> unprocessedInserts 下看到一条记录

但是在某些情况下（例如：用户按下了取消按钮），我想取消这个待处理的更改，你能告诉我如何做到这一点吗？我不想分配和初始化一个新的 managedObjectContext。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:40:01.783

尝试回滚：

```
- (void) rollback 
```

> 从撤消堆栈中删除所有内容，丢弃所有插入和删除，并将更新的对象恢复到它们最后提交的值。

阅读苹果文档以获取更多详细信息：[回滚](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html#//apple_ref/doc/uid/TP30001182-BAJEJBGH)

# mysql - 在Struts2中使用显示标签实现外部分页和排序

> ID：15761941
> 
> 赞同：1
> 
> 时间：2013-04-02T10:36:24.167
> 
> 标签：mysql, struts2, displaytag

我需要知道如何在**struts2**中实现**displaytag的****外部分页**和**排序方法**。

 ****在参考文档中，只有jsp页面信息。

此外，它们规定一个类应该实现 PaginatedList 接口以进行外部分页和排序。使用 PaginatedList 实现类的对象**，**我们可以进行外部分页。

我尝试了以下链接中已使用的方法[DispalyTag Pagination Problem 中提供的答案](https://stackoverflow.com/a/3899850/1093784)

但是我现在面临的问题是，在实现了 PaginatedList 的抽象方法之后，

*   如何使用类的对象来执行外部分页功能？
*   如何设置方法的值？
*   以及如何检索动作类中的索引和页码？
*   在 jsp 页面中未检索到该对象。显示未定义大小属性等错误。

我搜索了互联网，但找不到任何明确的资源或示例。

请帮我解决问题。

如果提供任何好的例子和建议，我将不胜感激。****

# validation - 淘汰赛验证问题

> ID：15761942
> 
> 赞同：0
> 
> 时间：2013-04-02T10:36:29.267
> 
> 标签：validation, knockout.js, numeric, custom-errors

我的淘汰赛模型验证存在以下问题，不知道如何解决。首先是我的模型，带有验证规则：

```
var Data = function (data) {
this.Val = data;
}

function ViewModel(item) {
var parse = JSON.parse(item.d);
var self = this;
this.Name = ko.observable(parse.Name);
this.UserType = ko.observable(parse.UserType);
this.ID = ko.observable(parse.ID).extend({ required: { params: true, message: "ID is    required" }, decimal: { params: 2, message: "Should be decimal"} });
this.Username = ko.observable(parsed.Username).extend({ required: {
        onlyIf: function () {
            return self.UserType() > 1;
        }
    }   
});

this.WeeklyData = ko.observableArray([]);
var records = $.map(parse.WeeklyData, function (data) { return new Data(data) });
this.WeeklyData(records);
this.WeeklyData2 = ko.observableArray([]);
var records = $.map(parse.WeeklyData2, function (data) { return new Data(data) });
this.WeeklyData2(records);
}

ko.extenders.numeric = function (target, precision) {
var result = ko.dependentObservable({
    read: function () {
        return target().toFixed(precision);
    },
    write: target
});

result.raw = target;
return result;
}; 
```

这是我的问题：

1) 对于可观察的 ID()，我想将其限制为两个小数点，因此我创建了验证扩展器“数字”，但它不起作用。我如何使用它以及如何纠正它有什么问题吗？

2）另外，如果我想将一个可观察对象限制为整数，我该怎么做？

3）当我定义一个带有条件的规则时，（即用户名（）），我如何定义一个自定义消息？我能够为默认规则做到这一点，但使用条件规则，它不起作用

4) 我有两个可观察的数组 WeeklyData1 和 WeeklyData2 都包含 Data() 对象。我想为这两个设置单独的最小/最大规则，例如，WeeklyData1 的 min/max - 1,7 和 WeeklyData2 的 min/max - 1,150。我怎样才能完成它？

4）现在我的错误消息出现在数据字段旁边，但我希望所有这些都出现在一个验证摘要中，同时针对该字段显示“*”。有人告诉我使用[Validation-bindings](https://github.com/ericmbarnard/Knockout-Validation/wiki/Validation-Bindings)，但我不确定如何使用它，有人可以举个例子吗？

我知道这是很多问题，但如果有人可以提供帮助，我将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:24:18.473

我没有深入研究您的代码，而是为您的问题创建了一个小型演示。好的，我们开始吧，

> 1）对于可观察的 ID()，我想将其限制为两个小数点......和 ​​2）另外，如果我想将可观察的限制为整数......

您的 1 和 2 问题非常相似，所以我在一个小提琴中涵盖了这两个问题。[**检查这个小提琴**](http://jsbin.com/iqamag/1/edit)。

> 3）当我定义一个带有条件的规则时，（即用户名（）），我如何定义一个自定义消息....

您可以使用`message`属性来设置自定义消息，[**检查这个小提琴**](http://jsbin.com/owuviq/1/edit)。

> 4) 我有两个可观察的数组 WeeklyData1 和 WeeklyData2 都包含 Data() 对象

我不清楚这个问题是什么，这两个数组都包含什么类型的数据以及您想要设置的最小/最大规则（数组长度或其他）。所以请清除这一点，而不是我会尽力帮助解决这个问题。

> 5）现在我的错误消息出现在数据字段旁边......

这个问题的答案我已经在你的[how to中给出了？带有淘汰赛 js 验证](https://stackoverflow.com/questions/15740415/how-to-with-knockout-js-validations/15741677#15741677)问题（检查更新）。

让我知道它是否有帮助！

# c# - ASP.NET 网站中的 RSS 错误

> ID：15761945
> 
> 赞同：0
> 
> 时间：2013-04-02T10:36:38.550
> 
> 标签：c#, asp.net, xml, rss, webforms

尝试在谷歌搜索，但没有找到任何有用的东西来解决这个问题，所以我们在这里。有一个页面，使用 RSS 应该提醒来自 DB 的 10 条最新消息。使用本课完成了这项任务 - [http://net.tutsplus.com/tutorials/asp-net/how-to-build-an-rss-feed-with-asp-net/](http://net.tutsplus.com/tutorials/asp-net/how-to-build-an-rss-feed-with-asp-net/) 似乎我做的一切都是正确的，但是当我启动我的应用程序时 - 我有下一个错误或警报，nvm：

```
This XML file does not appear to have any style information associated with it. The     document tree is shown below.
<rss version="2.0">
<channel>
<title>Name of the website</title>
<link>http://pudel.com</link>
<description>Short description of the site</description>
<item>
<title>Jenzyk Polski</title>
<link>http://localhost:56957/rss.aspx?ID=11</link>
<pubDate>Wed, 03 Apr 2013 00:00:00 GMT</pubDate>
<description>Co to jest?</description>
</item>
<item>
<title>Czy mowic pana zona po Polsku?</title>
<link>http://localhost:56957/rss.aspx?ID=13</link>
<pubDate>Tue, 02 Apr 2013 00:00:00 GMT</pubDate>
<description>Tak, bardzo dobze mowic</description>
</item>
<item>
<title>Kim jestes z pochodzenia?</title>
<link>http://localhost:56957/rss.aspx?ID=12</link>
<pubDate>Tue, 02 Apr 2013 00:00:00 GMT</pubDate>
<description>Jestes Polakiem</description>
</item>
</channel>
</rss>
[/XML] 
```

当然，这种观点不是我计划要做的。那么，问题出在哪里？尝试用不同的浏览器打开——都一样。尝试将 web.config 中的编码从 UTF-8 更改为 WINDOWS-1251 - 都一样。

这是 rss.aspx.cs 页面的代码：

```
 using System;
 using System.Collections;
 using System.Configuration;
 using System.Data;
 using System.Linq;
 using System.Web;
 using System.Web.Security;
 using System.Web.UI;
 using System.Web.UI.HtmlControls;
 using System.Web.UI.WebControls;
 using System.Web.UI.WebControls.WebParts;
 using System.Xml.Linq;
 using System.Data.SqlClient;

 namespace softacom.pb
{
public partial class rss : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        string connString = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;

        SqlConnection sqlConn = new SqlConnection();
        sqlConn.ConnectionString = connString;

        string sqlQuery = "SELECT TOP 10 newsID, Title, Date, Description FROM News ORDER BY Date DESC";

        SqlCommand cmd = new SqlCommand();
        cmd.Connection = sqlConn;
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = sqlQuery;

        sqlConn.Open();
        RepeaterRSS.DataSource = cmd.ExecuteReader();
        RepeaterRSS.DataBind();
        sqlConn.Close();

    }
    protected string RemoveIllegalCharacters(object input)
    {
        string data = input.ToString();
        data = data.Replace("&", "&amp;");
        data = data.Replace("\"", "&quot;");
        data = data.Replace("'", "&apos;");
        data = data.Replace("<", "&lt;");
        data = data.Replace(">", "&gt;");

        return data;
    }

}
 } 
```

这是 rss.ASPX

```
<%@ Page Language="C#" ContentType="text/xml"  AutoEventWireup="true"     CodeBehind="rss.aspx.cs" Inherits="softacom.pb.rss" %>

 <asp:Repeater ID="RepeaterRSS" runat="server">
 <HeaderTemplate>
 <rss version="2.0">
 <channel>
 <title>Name of the website</title>
 <link>http://pudel.com</link>
 <description> Short description of the site</description>
 </HeaderTemplate>
 <ItemTemplate>
 <item>
 <title><%# RemoveIllegalCharacters(DataBinder.Eval(Container.DataItem, "Title"))%>   </title>
 <link>http://localhost:56957/rss.aspx?ID=<%# DataBinder.Eval(Container.DataItem, "newsID") %></link>
 <pubDate><%# String.Format("{0:R}", DataBinder.Eval(Container.DataItem, "Date"))%>  </pubDate>  
 <description><%# RemoveIllegalCharacters(DataBinder.Eval(Container.DataItem, "Description"))%></description>  
    </item>  
    </ItemTemplate>  
    <FooterTemplate>  
            </channel>  
        </rss>    
    </FooterTemplate>  
 </asp:Repeater> 
```

# php - .htaccess 热链接保护不起作用

> ID：15761946
> 
> 赞同：2
> 
> 时间：2013-04-02T10:36:45.883
> 
> 标签：php, apache, .htaccess, hotlinking

你能纠正并通知我吗？我的问题是我的 .htaccess 热链接保护不起作用。我在具有 .htaccess 支持的共享服务器上。（SEO 友好链接有效）

我的域类型是`http://www.mydomain.p.ht`或者`http://mydomain.p.ht`

我的 2 个试验来源是：

1.  [http://www.htaccesstools.com/hotlink-protection/](http://www.htaccesstools.com/hotlink-protection/)
2.  堆栈溢出

我没有忘记`mydomain`用我的真实域名替换

## 我的 .htaccess

```
RewriteEngine On
RewriteBase /

# hotlink protection
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?mydomain.p.ht [NC]
RewriteRule \.(jpg|jpeg|png|gif|css)$ - [NC,F,L]

# compress text, html, javascript, css, xml:
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript

# File caching is another famous approach in optimizing website loading time
<FilesMatch ".(flv|gif|jpg|jpeg|png|ico|swf|js|css|pdf)$">
Header set Cache-Control "max-age=2592000"
</FilesMatch>

#SEO friendly linking
...
... 
```

## 我也试过

# 1

```
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?mydomain.p.ht [NC]
RewriteRule \.(flv)$ - [NC,F,L] 
```

# 2

```
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?mydomain\.p\.ht/.*$ [NC]
RewriteRule .*\.(jpg|jpeg|png|gif)$ - [F,NC,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:26:25.283

你的方法是正确的并且工作正常。由于您为这些文件启用了缓存，因此很可能`http://htaccesstools.com/test-hotlink-protection`会向您显示图像的缓存快照。如果您真的想测试它，请在您的 localhost 或主机以外的其他主机上创建一个 html 文件，`mydomain.p.ht`并包含此行（将 /images/home.gif` 替换为实际 gif 文件的路径）：

```
<img border="0" src="http://mydomain.p.ht/images/home.gif"> 
```

并查看图像是否显示在浏览器中。如果您在执行此操作时打开了 Firbug 网络选项卡，您应该会看到上图的 Forbidden 403 状态。

# javascript - 如何在 MVC 中使用 javascript 获取可选参数值

> ID：15761950
> 
> 赞同：1
> 
> 时间：2013-04-02T10:36:52.517
> 
> 标签：javascript, asp.net-mvc-4, parameters

我有以下网址

[http://MySite.com/MyGame/Play/1](http://MySite.com/MyGame/Play/1)

现在我想使用javascript或jquery获取url的id **1**（例如播放后的1）。

我正在使用 MVC 4.0 C# 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:43:38.687

```
var url = document.URL.split('/'); 
```

然后您可以执行以下任一操作：

```
var id = url.pop(); 
```

或者

```
var id = url[url.lengh-1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:41:13.207

在 JavaScript 中，它将是：

```
var parts = document.location.href.split("/");
var id = parts[parts.length-1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-15T07:51:27.133

如果没有 id，Adeel 和 Jeff 的解决方案将失败 - 就像我的情况一样。所以我将它扩展了一点以供我使用。GetIdIfExists 函数将返回 id（如果有）。否则，它将返回 null。

编辑：假设 id 总是数字。

```
function isNumeric(n) {
    return !isNaN(parseFloat(n)) && isFinite(n);
}

function GetIdIfExists() {
    var parts = document.location.href.split("/");
    var id = parts[parts.length - 1];

    if (isNumeric(id)) {
        return parseInt(id);
    } else {
        return null;
    }
} 
```

结果：

```
//url = https://stackoverflow.com/questions/15761950/how-do-get-optional-parameter-value-using-javascript-in-mvc
> GetIdIfExists()
< null

//url = https://stackoverflow.com/questions/15761950/how-do-get-optional-parameter-value-using-javascript-in-mvc/0
> GetIdIfExists()
< 0 
```

# java - 在 Java 中编辑单选按钮

> ID：15761952
> 
> 赞同：0
> 
> 时间：2013-04-02T10:36:58.480
> 
> 标签：java, swing, jradiobutton, buttongroup

我有 GUI 屏幕，可让您通过选择来设置联系人的隐私`RadioButton`。虽然我可以像这样将选择添加到数据库中......

```
 private void addContactButtonActionPerformed(java.awt.event.ActionEvent evt) {                                                 
        try {
            ContactDAO cDao = new ContactDAO();
            final ContactDTO cdto = new ContactDTO();

 String privacy = "";
            String alumni = "";
            if (all.isSelected()) {
                privacy = all.getText();
            }
            if (bio.isSelected()) {
                privacy = bio.getText();
            }
            if (none.isSelected()) {
                privacy = none.getText();
            }
            if (yes.isSelected()) {
                alumni = yes.getText();
            }
            if (no.isSelected()) {
                alumni = no.getText();
            }
            cdto.setAlumni(alumni);
            cdto.setStatus(privacy);
            cDao.add(cdto); 

} 
```

我被困在检索先前选择的项目以进行编辑模式。每个单选按钮选项都属于一个按钮组。

```
private void editContact() {
    txtID1.setText(String.valueOf(cDTO.getID()));
    txtTitle1.setText(cDTO.getTitle());
    txtFn1.setText(cDTO.getForename());
    txtSn1.setText(cDTO.getSurname());
    //get status from cDTO.getStaus and adjust appropriately to the radio button
} 
```

在上面的方法中我想设置单选按钮的选中项。就像您对 JComboBox 执行 getSelectedItem() 一样，我正在尝试为单选按钮实现相同的效果。note`cDTO`包含从数据库中获取值的数据字符串 cDTO.getStatus。但是我如何将它设置为我拥有的 3 个单选按钮，名为`allButton` `bioButton` `noneButton`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:40:23.793

假设`cDTO.getStatus()`返回`String`与单选按钮名称匹配的 a ：对于 , 中的每个按钮`ButtonGroup`，`b`请执行以下操作：

```
b.setSelected(cDTO.getStatus().equals(b.getText())); 
```

# ms-access - Access 2007 坚持保存查询

> ID：15761959
> 
> 赞同：8
> 
> 时间：2013-04-02T10:37:10.987
> 
> 标签：ms-access, ms-access-2007

比其他任何事情都更令人烦恼，但我在谷歌上找不到任何信息。

我经常在 Access 2007 中创建一个查询来测试某些东西，或者一次性快速获取一些结果。我不想保存这些查询，因为它们只适合一种用途。

并非总是如此，但通常情况下，如果我不保存此查询，Access 不会关闭它，这意味着我必须稍后将其删除。这可能会阻止我在保存之前关闭 Access，并创建大量不需要的查询。

为什么会这样？有没有什么特别的东西可以触发它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-26T16:21:46.763

这`Track name AutoCorrect info`条路不是为我做的。相反，事实证明我已经离开了`DoCmd.SetWarnings False`。进入即时窗口并运行`DoCmd.SetWarnings True`会带回旧的“是否要保存此查询是/否/取消”窗口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-25T15:17:59.817

如果您在 VBA ( ) 中关闭了警告`DoCmd.SetWarnings False`但以后没有打开它们，您每次都会遇到这种行为。请记住：

1.  完成程序后，您应该始终打开警告
2.  如果您在关闭警告的过程中出错，它们可能仍然处于关闭状态。

尝试进入 VBA，调出立即窗口 ( `Ctrl+G`)，输入`DoCmd.SetWarnings True`并点击`Enter`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T16:39:11.710

作为一个疯狂的猜测，我建议您检查*轨道名称自动更正*是否导致您描述的行为。如果已启用，请暂时禁用它并查看 Access 是否仍会强制您保存新查询，而不是简单地丢弃它们。

我提出这个建议的原因是因为我从未见过这种行为。每当我尝试关闭新的未保存查询时，Access 都会询问我是否要保存查询设计，并在我回答“否”时丢弃未保存的查询。

而且我从不启用*跟踪名称自动更正*，因为据报道它会产生太多问题（[Microsoft Access 中的缺陷：问题属性](http://allenbrowne.com/bug-09.html)和[由名称自动更正引起的故障](http://allenbrowne.com/bug-03.html)）。当然这可能只是一个巧合，但我认为检查是否涉及自动更正可能是值得的。

如果*Track Name AutoCorrect*是原因，那么您需要决定哪个不那么痛苦：永久禁用*Track Name AutoCorrect ；*或被迫保存您不想保留的新查询。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-27T16:11:40.583

这很奇怪..我也遇到了完全相同的问题，我只能选择保存或取消查询。找到这个线程并检查了 Track Name AutoCorrect 并将其设置为 Off .... 将其打开，然后在它说要映射数据库时取消，然后我的查询对话框更改为 Do you want to save, Yes否或取消..因此您可能只需要单击打开/关闭即可重置此“功能”

# postgresql - 如何使用 custom_variable_class

> ID：15761961
> 
> 赞同：2
> 
> 时间：2013-04-02T10:37:21.183
> 
> 标签：postgresql, triggers, postgresql-9.1

我`custom_variable_class= myapp`在`postgresql.conf`. 并将值设置在函数内部，例如

```
CREATE OR REPLACE FUNCTION fn_purchase(xmode text, xuserno integer)
  RETURNS text AS

set myapp.user_no=xuserno
..........
..........

END; 
```

现在我在我的触发器中使用 myapp.user

```
CREATE OR REPLACE FUNCTION public.delete_history()
  RETURNS trigger AS

$BODY$
    DECLARE userno text;
    BEGIN

    SELECT current_setting('myapp.user_no') into userno;
END;
$BODY$ 
```

如果设置`userno`为`integer`则显示错误消息。

```
invalid input syntax for integer: "xuserno". 
```

并且 不`SELECT current_setting('myapp.user_no')`显示。这意味着它显示不。我做错了什么？`xuserno``xuserno value``xuserno=5``xuserno``5`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T02:05:03.413

你的问题是一个非常微妙的问题：

根据文档而不是：

```
 custom_variable_class= myapp 
```

你应该有

```
custom_variable_classes='myapp' 
```

请注意，`custom_variable_classes`它旨在用于为多个插件设置多个类。

从那里，有了上面的评论，这应该可行。

# php - 在单个数组中合并数组

> ID：15761963
> 
> 赞同：1
> 
> 时间：2013-04-02T10:37:26.240
> 
> 标签：php, codeigniter, array-merge

我使用以下代码获取数组并合并它们。
在 print_r(arr1) 我得到以下数组。在 $arr 我试图合并数组但是当我 print_($arr) 在 for-each 结束时我得到相同的数组。
我在做错误的数组合并吗？我怎样才能合并或合并它？

```
foreach($q1->result_array() as $row4)
 {  
        $arr1 = $q1->result_array();
        echo"<pre>"; 

            print_r($arr1); 

        echo"</pre>";
        $arr = array_merge($arr, $arr1);
        echo "<br/>";
        $id = $row4['id'];
        $parent_id = $row4['parent_id'];
        if(!empty($arr1))
        {
            $this->showreply($id);                          
        }

 }
 print_r($arr); 
```

我在 print_r($arr1) 上得到的数组：

```
Array
(
    [0] => Array
        (
            [id] => 69
            [reply] => First reply to Reply
            [parent_id] => 68
            [postid] => 0
            [us_id] => 41
            [added_by] => Shailesh
            [photo] => 9.jpg
            [added_on] => 2013-04-01 16:06:13
        )

)

Array
(
    [0] => Array
        (
            [id] => 70
            [reply] => Reply to Nested Reply
            [parent_id] => 69
            [postid] => 0
            [us_id] => 41
            [added_by] => Shailesh
            [photo] => 9.jpg
            [added_on] => 2013-04-01 16:07:24
        )

)

Array
(
    [0] => Array
        (
            [id] => 52
            [reply] => Reply on demand
            [parent_id] => 70
            [postid] => 0
            [us_id] => 50
            [added_by] => swapnil
            [photo] => 
            [added_on] => 2013-03-29 16:27:57
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:45:19.553

试试这个……我想这就是你要找的

```
 foreach($q1->result_array() as $row4)
    {  
         $arr1 = $q1->result_array();

          $arr[]=$row4; 
    }

  print_r($arr) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:42:41.370

```
$arr = array_merge($arr, $arr1); 
```

这个 $arr 变量从未被初始化，所以没有任何东西加上 $arr1 等于 $arr1。

另外为什么这段代码在foreach中？

# php - 带有两个提交按钮的 PHP 联系我们表单，将使用三个不同的电子邮件地址

> ID：15761964
> 
> 赞同：0
> 
> 时间：2013-04-02T10:37:26.517
> 
> 标签：php, html

我已经创建了一个联系我们的表单，但是有两个提交按钮：

1.  按钮名称提交将转到此电子邮件地址的数据：sm.musa.cse@gmail.com
2.  按钮名称很紧急，将数据这两个电子邮件地址`sm_musa@hotmail.co.uk`和`s_m_musa@yahoo.com`

我在单独的页面中编写了php，在索引页面中编写了表单，但它不起作用。下面是代码：

HTML 代码：

```
<form action="bin/MailHandler.php" id="ContactForm" method="post">
    <div class="success"> Contact form submitted!>
        <br />
        <strong>We will be in touch soon.</strong> 
    </div>
    <fieldset>
        <div class="wrapper">
            <label class="name">
                <span class="bg">
                    <input type="text" name="name" value="Name:" class="input" />
                </span>
                <span class="error">*This is not a valid name.</span>
                <span class="empty">*This field is required.</span>
            </label>
        </div>
        <div class="wrapper">
            <label class="email">
                <span class="bg">
                    <input type="text" name="email" value="E-mail:" class="input" />
                </span>
                <span class="error">*This is not a valid email address.</span>
                <span class="empty">*This field is required.</span>
            </label>
        </div>
        <div class="wrapper">
            <label class="phone">
                <span class="bg">
                    <input type="tel" name="phone" value="Phone:" class="input" />
                </span>
                <span class="error">*This is not a valid phone number.</span>
                <span class="empty">*This field is required.</span>
            </label>
        </div>
        <div class="wrapper">
            <label class="message">
                <span class="bg">
                    <textarea rows="1" cols="1" name="message">Message:</textarea>
                </span>
                <span class="error">*The message is too short.</span>
                <span class="empty">*This field is required.</span>
            </label>
        </div>
        <div class="btns">
            <input name="first_email_send" type="submit" value="submit" />
        </div>
        <div class="btns">
            <input name="second_email_send" type="submit" value="very urgent" />
        </div>
    </fieldset>
</form> 
```

php代码：

```
<?php
    $name= $_POST['name'];
    $email= $_POST['email'];
    $phone= $_POST['phone'];
    $message= $_POST['message'];

    $to1="sm.musa.cse@gmail.com";
    $to2_1="sm_musa@hotmail.co.uk";
    $to2_2="s_m_musa@yahoo.com";

    $subject="You Have Recieved Mail From Customer";
    $mess1= $name.$phone.$message."MUSA VAI JEITA ICCA SEITA LEKO";
    $mess2_1= $name.$phone.$message."MUSA VAI JEITA ICCA SEITA LEKO";
    $mess2_2= $name.$phone.$message."MUSA VAI JEITA ICCA SEITA LEKO";

    //$send_contact= mail( $to,$subject,$email,$mess);
    if(isset($_POST['first_email_send']))
    {

        $send_contact= mail( $to1,$subject,$email,$mess1);
        if($send_contact){
            echo "Thank for submitting you details we've received your Details. One of our sales member contact you as soon as possible";
        }
        else {
        echo "ERROR";
        }
    }
    if(isset($_POST['second_email_send']))
    {
        $send_contact1= mail( $to2_1,$subject,$email,$mess2_1);
        $send_contact2= mail( $to2_2,$subject,$email,$mess2_2);
        if($send_contact1 && $send_contact2){
            echo "Thank for submitting you details we've received your Details. One of our sales member contact you as soon as possible";
        }
        else {
            echo "ERROR";
        }
    }
    /*if($send_contact){
    echo "Thank for submitting you details we've received your Details. One of our sales member contact you as soon as possible";
    }
    else {
    echo "ERROR";
    }*/
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:00:56.327

问题是您检查数据提交方式的方式。你需要改变两件事

使提交按钮的名称相同，说“提交”

```
 <div class="btns">
        <input name="submit" type="submit" value="submit" />
    </div>
    <div class="btns">
        <input name="submit" type="submit" value="very urgent" />
    </div> 
```

发布数据作为键值对提交。提交按钮的值将提示您单击了哪个按钮。

检查 POST 中“提交”参数的值，然后做出决定。即像这样修改你的php代码

```
if($_POST['submit'] == 'submit')
{

    $send_contact= mail( $to1,$subject,$email,$mess1);
    if($send_contact){
        echo "Thank for submitting you details we've received your Details. One of our sales member contact you as soon as possible";
    }
    else {
         echo "ERROR";
    }
}
if($_POST['submit'] == 'very urgent')
{
    $send_contact1= mail( $to2_1,$subject,$email,$mess2_1);
    $send_contact2= mail( $to2_2,$subject,$email,$mess2_2);
    if($send_contact1 && $send_contact2){
        echo "Thank for submitting you details we've received your Details. One of our sales member contact you as soon as possible";
    }
    else {
        echo "ERROR";
    }
} 
```

参考：[https ://stackoverflow.com/a/56/1523245](https://stackoverflow.com/a/56/1523245)

# c# - 如何使用 ViewModel 在 Kinect 交互示例中传递骨骼数据

> ID：15761966
> 
> 赞同：1
> 
> 时间：2013-04-02T10:37:32.817
> 
> 标签：c#, wpf, xaml, kinect, kinect-sdk

我正在使用最新的 SDK (1.7) 并想在其中一个示例中进行一些更改。

我有一个名为[KinectAttractWindow](https://github.com/tkowalczyk/KinectAttractWindow)的项目，我想从骨骼、深度或彩色图像中获取数据，但我无法弄清楚如何在视图和视图模型之间传递这些数据。例如，在此[HomeScreenViewModel](https://github.com/tkowalczyk/KinectAttractWindow/blob/master/KinectAttractWindow/KinectAttractWindow/ViewModels/HomeScreenViewModel.cs)中，我想使用此[HomeScreenView](https://github.com/tkowalczyk/KinectAttractWindow/blob/master/KinectAttractWindow/KinectAttractWindow/View/HomeScreenView.xaml)绘制骨架。或者如何使用相同的项目架构显示深度或颜色数据？

如何以正确的方式做到这一点？你对我有什么建议吗？

我已经更新了我的 HomeView 和 ViewModel，但我在这里得到了 NullReferenceException：

```
'this.RGBImage.DisplayImage.Source =
                BitmapSource.Create(colorFrame.Width,
                colorFrame.Height,
                96,
                96,
                PixelFormats.Bgr32,
                null,
                pixels,
                stride);' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:15:20.850

首先确保您的对象`RGBImage`及其属性`DisplayImage`不是`null`。我使用 WriteableBitmap 来显示我的 RGB 值，因为它创建了一个 WriteableBitmap 对象并将像素重写到它，以便性能更好。[您可以在此处](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx)找到有关 WriteableBitmap 的更多信息。

你可以像这样使用它 -

```
WriteableBitmap wBitmap = new WriteableBitmap(colorFrame.Width,
                                                  colorFrame.Height,
                                                  // Standard DPI
                                                  96, 96,
                                                  // Current format for the ColorImageFormat
                                                  PixelFormats.Bgr32,
                                                  // BitmapPalette
                                                  null); 
```

通过这样做将新像素写入对象 -

```
wBitmap.WritePixels(
                // Represents the size of our image
               new Int32Rect(0, 0, colorFrame.Width, colorFrame.Height),
                // Our image data
               _pixelData,
                // How much bytes are there in a single row?
               colorFrame.Width * colorFrame.BytesPerPixel,
                // Offset for the buffer, where does he need to start
               0); 
```

将其分配给您的图像控件 -

```
this.RGBImage.DisplayImage.Source  = wBitmap; 
```

**骨架数据**

您可以像颜色数据、`Enable()`流、处理传入的数据`SkeletonFrameReady`并将所有数据保存在`ViewModel`. 通过这样做，您可以将数据绑定到这些属性。

# javascript - JavaScript中画布上的碰撞检测

> ID：15761970
> 
> 赞同：0
> 
> 时间：2013-04-02T10:37:42.880
> 
> 标签：javascript, html, html5-canvas, getimagedata

我正在为大学作业制作[游戏](http://gideonjon.es/line-drawing-2.html)。这个想法是你通过画一条线（单击、拖动和释放来画一条线）来*保护*中心圈免受传入的小行星（线）的影响，从而阻止它们。撞击一条线的小行星应该摧毁这条线的小行星。

我目前遇到的问题是没有检测到碰撞。

我有一系列线和小行星的物体。线条由简单的开始和结束 x 和 y 组成，小行星由随机速度和随机角度（它们的入射角）组成 - 旋转上下文，绘制小行星，然后为下一行重置。

为了检测碰撞，我使用 getImageData 并在小行星前面进行检查，但是在该迭代中这条线会前进多少像素（基本上是它们的速度），如果颜色是红色，它将摧毁小行星 - 我还没有来得及破坏这条线，当我遇到它时会解决这个障碍（不过欢迎提出建议）。

```
function asteroids_draw() {
            for (var i = 0; i < asteroids.length; i++) {
                //  Drawing setup
                context.save();
                context.translate(width / 2, height / 2);
                context.rotate(asteroids[i].angle);             

                //  Detecting close asteroids
                if ((asteroids[i].distance - asteroids[i].speed) < planet.size) {
                    asteroids.splice(i, 1);
                    game_life_lost();
                    context.restore();      
                    return;

                } else if ((asteroids[i].distance - asteroids[i].speed) < 150){
                    asteroids[i].colour = '#FF0000';
                }

                //  Scanning ahead for lines                    
                for (var j = 0; j < asteroids[i].speed; j++) {
                    if (context.getImageData(asteroids[i].distance - j, 0, 1, 1).data[0] == 255) {                          
                        asteroids.splice(i, 1);
                        context.restore();      
                        return;
                    }
                }                   

                //  Drawing asteroid
                context.beginPath();
                context.moveTo(asteroids[i].distance -= asteroids[i].speed, 0);
                context.lineTo(trig, 0);
                context.strokeStyle = asteroids[i].colour; 
                context.stroke();               
                context.closePath();

                context.restore();      
            }
        } 
```

问题是，小行星从不与线条相撞，我一生都无法理解为什么，或者看到另一种简单的方法。任何建议将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:12:40.720

我认为您的问题是，当您旋转上下文时，先前绘制的项目（线）不会旋转，只有在旋转后绘制的对象才会旋转。[请参阅此页面了解更多信息](http://creativejs.com/2012/01/day-10-drawing-rotated-images-into-canvas/)。

您可以在平移和旋转画布之前尝试执行小行星/线相交测试，并使用余弦和正弦来查找要从中获取图像数据的像素的 x 和 y 坐标。

```
var pixelLocation = 
    [Math.cos(asteroids[i].angle) * j, Math.sin(asteroids[i].angle) * j];
if (context.getImageData(pixelLocation[0], pixelLocation[1], 1, 1).data[0] == 255) { 
```

在传递给 cos 和 sin 之前，请确保您的角度以弧度为单位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:31:52.083

我对这个问题进行了更多思考，并意识到这种做事方法绝对不是最好的方法。它应该在没有视图的情况下可行 - 一个模型视图控制器设计模式。解决它的最好方法是使用数学！

两条线的交点有简单的数学运算，但这需要一个范围内的两条线的交点。我找到[了一种算法](https://stackoverflow.com/questions/9043805/test-if-two-lines-intersect-javascript-function)，它使用八个坐标进一步简化了这一点——两条线的开始 x 和 y 和结束 x 和 y。

我已经发布了[结果](http://gideonjon.es/line-drawing-4.html)。谢谢您的帮助。

# iphone - MKMapview自定义注解视图

> ID：15761972
> 
> 赞同：0
> 
> 时间：2013-04-02T10:37:54.133
> 
> 标签：iphone, ios, objective-c, annotations, mkmapview

我在 MKMapview customannotationview 中工作，并使用以下代码成功地将 pin drop 自定义到我自己的图像中，

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    static NSString *parkingAnnotationIdentifier=@"ParkingAnnotationIdentifier";

    if([annotation isKindOfClass:[MyAnnotationClass class]]){
    //Try to get an unused annotation, similar to uitableviewcells
        MKAnnotationView *annotationView=[mapView dequeueReusableAnnotationViewWithIdentifier:parkingAnnotationIdentifier];
    //If one isn't available, create a new one
        if(!annotationView){
            annotationView=[[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:parkingAnnotationIdentifier];
        annotationView.image = [UIImage imageNamed:@"my image.png"];

        }
        return annotationView;
    }
    return nil;
} 
```

即，我将注释视图的图像自定义为我的图像，但我需要在注释视图的右上角有一个气泡或标签，如下所示，

如何得到它？您的帮助肯定会得到赞赏。

![在此处输入图像描述](https://i.stack.imgur.com/wbtwA.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-12T11:04:20.027

MKAnnotationView 只是继承自 UIView。因此您可以向其中添加自己的子视图。

解决方案：

1.  在右上角添加横幅

2.  如果你想在横幅上处理触摸事件，你应该处理 hitTest 问题。只需在下面覆盖以扩展触摸边界。

    ```
    - (BOOL)pointInside:(CGPoint)point
               withEvent:(UIEvent *)event 
    ```

# android - 在android中禁用菜单项的背景突出显示颜色

> ID：15761974
> 
> 赞同：6
> 
> 时间：2013-04-02T10:38:01.710
> 
> 标签：android, background, selector, menuitem

我在应用程序的菜单中添加了一个项目（带有图标和文本）。

我有两个图像用于项目的正常（非按下）状态和突出显示（按下）状态。

这是我的菜单 xml

```
<?xml version="1.0" encoding="utf-8"?>

<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
         android:showAsAction="ifRoom|withText"
         android:title="New"
         android:icon="@drawable/menu_selector"
         android:id="@+id/add_channel"></item>-
</menu> 
```

这是选择器 menu_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="false"
           android:state_pressed="false"
           android:drawable="@drawable/new_channel" />

    <item android:state_pressed="true"
          android:drawable="@drawable/book"/>

    <item android:state_selected="true"
          android:state_pressed="false"
          android:drawable="@drawable/book" />
</selector> 
```

但这对我来说还不够。当我按下该项目时，它会更改它包含的图像，但也会在背景中突出显示绿色发光效果。

如何禁用或使这种发光效果不可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:23:00.360

您可以使用 ImageButton 和背景选择器创建布局，以更改按下状态的颜色。在您的项目菜单中选择此布局： `android:actionLayout="@layout/item_layout"`

item_layout.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageButton
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/tab_button"
        android:src="@drawable/ic_menu_item_icon" />

</LinearLayout> 
```

tab_button.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item
    android:state_enabled="false"
    android:drawable="@drawable/tab_button_background"/>
<item
    android:state_pressed="true"
    android:state_enabled="true"
    android:drawable="@drawable/tab_button_background_pressed" />
<item
    android:state_focused="true"
    android:state_enabled="true"
    android:drawable="@drawable/tab_button_background"
     />
<item
    android:state_enabled="true"
    android:drawable="@drawable/tab_button_background"
     />
</selector> 
```

tab_button_background.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid
        android:color="#9ec03b" />
</shape> 
```

tab_button_background_pressed.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid
        android:color="#dfff53" />
</shape> 
```

菜单.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/add_channel"
        android:showAsAction="ifRoom|withText"
        android:actionLayout="@layout/item_layout"
        android:title="New">
    </item>
</menu> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-10T00:53:26.487

如果您在项目上有一个点击监听器，您可以将此代码放入处理程序中：

```
menuItem.setChecked(false); 
```

# android - Android Activity 在不应该被销毁时被销毁

> ID：15761982
> 
> 赞同：2
> 
> 时间：2013-04-02T10:38:20.157
> 
> 标签：android, android-billing

我正在使用 Google Play In app Billing 并使用 提交我的请求`IabHelper`，在后台使用`startIntentSenderForResult`.

正如预期的那样，调用完成后（Google Play Activity 关闭），结果将在`onActivityResult`方法中返回给我的 Activity，然后`OnIabPurchaseFinishedListener`通过`IabHelper`. 如果在购买过程中发生错误，则会在完成的侦听器中向用户（我的代码）显示一个对话框。在用户完成调用的 Play 商店活动之前，结果似乎已返回到我的应用程序。

**详细信息：** 在我的应用程序中，我按下启动购买意图的购买按钮，显示 Play 商店并显示错误（项目不可用，它处于非活动状态（故意用于负面测试））。

```
04-03 20:21:14.371: D/com.satalyst.android.ui.PurchaseAction(10129): Launching purchase flow request for sku: demo_test
04-03 20:21:14.371: D/IabHelper(10129): Starting in-app billing setup.
04-03 20:21:14.446: D/IabHelper(10129): Billing service connected.
04-03 20:21:14.446: D/IabHelper(10129): Checking for in-app billing 3 support.
04-03 20:21:14.461: D/IabHelper(10129): In-app billing version 3 supported for com.satalyst.android
04-03 20:21:14.476: D/IabHelper(10129): Subscriptions AVAILABLE.
04-03 20:21:14.476: D/IabHelper(10129): Starting async operation: launchPurchaseFlow
04-03 20:21:14.476: D/IabHelper(10129): Constructing buy intent for demo_test, item type: inapp
04-03 20:21:14.506: D/IabHelper(10129): Launching buy intent for demo_test. Request code: 1
04-03 20:21:14.846: D/IabHelper(10129): Ending async operation: launchPurchaseFlow
04-03 20:21:14.846: E/IabHelper(10129): In-app billing error: Null data in IAB activity result.
04-03 20:21:14.846: D/com.satalyst.android.ui.PurchaseAction$PurchaseCompleteListener(10129): Received purchase code: -1002
04-03 20:21:14.846: E/com.satalyst.android.ui.PurchaseAction$PurchaseCompleteListener(10129): Unable to purchase item: demo_test due to error: -1002 with message: Null data in IAB result (response: -1002:Bad response received)
04-03 20:21:14.856: I/ACTIVITY-RESUME(10129): com.satalyst.android.ui.MainActivity@4151b760
04-03 20:21:15.526: D/com.satalyst.android.ui.MainActivity(10129): Request update of cache
04-03 20:21:15.601: D/com.satalyst.android.ui.HomeFragment(10129): Payload currently selected: demopayload updating UI
04-03 20:21:16.091: E/WindowManager(10129): Activity com.satalyst.android.ui.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41a9d218 that was originally added here
04-03 20:21:16.091: E/WindowManager(10129): android.view.WindowLeaked: Activity com.satalyst.android.ui.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41a9d218 that was originally added here
04-03 20:21:16.091: E/WindowManager(10129):     at android.view.ViewRootImpl.<init>(ViewRootImpl.java:386)
04-03 20:21:16.091: E/WindowManager(10129):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
04-03 20:21:16.091: E/WindowManager(10129):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
04-03 20:21:16.091: E/WindowManager(10129):     at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
04-03 20:21:16.091: E/WindowManager(10129):     at android.view.Window$LocalWindowManager.addView(Window.java:537)
04-03 20:21:16.091: E/WindowManager(10129):     at android.app.Dialog.show(Dialog.java:278)
04-03 20:21:16.091: E/WindowManager(10129):     at android.app.AlertDialog$Builder.show(AlertDialog.java:932)
04-03 20:21:16.091: E/WindowManager(10129):     at com.satalyst.android.ui.PurchaseAction.showSendEmailErrorDialog(PurchaseAction.java:176)
04-03 20:21:16.091: E/WindowManager(10129):     at com.satalyst.android.ui.PurchaseAction.access$5(PurchaseAction.java:152)
04-03 20:21:16.091: E/WindowManager(10129):     at com.satalyst.android.ui.PurchaseAction$PurchaseCompleteListener.onIabPurchaseFinished(PurchaseAction.java:240)
04-03 20:21:16.091: E/WindowManager(10129):     at com.satalyst.android.iab.IabHelper.handleActivityResult(IabHelper.java:434)
04-03 20:21:16.091: E/WindowManager(10129):     at com.satalyst.android.ui.MainActivity.onActivityResult(MainActivity.java:225)
04-03 20:21:16.091: E/WindowManager(10129):     at android.app.Activity.dispatchActivityResult(Activity.java:4649)
04-03 20:21:16.091: E/WindowManager(10129):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2988)
04-03 20:21:16.091: E/WindowManager(10129):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3035)
04-03 20:21:16.091: E/WindowManager(10129):     at android.app.ActivityThread.access$1100(ActivityThread.java:127)
04-03 20:21:16.091: E/WindowManager(10129):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1189)
04-03 20:21:16.091: E/WindowManager(10129):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-03 20:21:16.091: E/WindowManager(10129):     at android.os.Looper.loop(Looper.java:137)
04-03 20:21:16.091: E/WindowManager(10129):     at android.app.ActivityThread.main(ActivityThread.java:4507)
04-03 20:21:16.091: E/WindowManager(10129):     at java.lang.reflect.Method.invokeNative(Native Method)
04-03 20:21:16.091: E/WindowManager(10129):     at java.lang.reflect.Method.invoke(Method.java:511)
04-03 20:21:16.091: E/WindowManager(10129):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
04-03 20:21:16.091: E/WindowManager(10129):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
04-03 20:21:16.091: E/WindowManager(10129):     at dalvik.system.NativeStart.main(Native Method) 
```

此时仍显示 Play 商店应用程序（在前台）。在我看来，错误是由于操作返回到调用活动（没有焦点）而导致的，导致附加对话框时出现错误（创建后立即泄漏）。在 Play 商店活动的错误中按“确定”会导致以下结果（为我的应用程序创建了一个新活动并获得焦点）。

```
04-03 20:21:18.296: I/com.satalyst.android.ui.MainActivity(10129): Loading selected payload: demopayload
04-03 20:21:18.341: I/ACTIVITY-RESUME(10129): com.satalyst.android.ui.MainActivity@41adf048
04-03 20:21:18.601: D/com.satalyst.android.ui.MainActivity(10129): Request update of cache
04-03 20:21:18.626: D/com.satalyst.android.ui.HomeFragment(10129): Payload currently selected: demopayload updating UI 
```

解决这个问题让我很困惑，因为我想在发生购买错误时在我的活动中显示一个对话框，允许他们通过电子邮件向我发送详细信息，以便我可以优先帮助客户解决购买错误。我确信我可以做一些 hack 修复，可能会在错误发生并过早返回时保留详细信息，然后在每次恢复活动时检查是否存在持续故障并采取适当的措施；然而，这感觉就像一个令人讨厌的工作。

**没有对话框的堆栈跟踪：**

```
04-03 21:15:40.236: D/com.satalyst.android.ui.PurchaseAction(12415): Launching purchase flow request for sku: demo_test
04-03 21:15:40.236: D/IabHelper(12415): Starting async operation: launchPurchaseFlow
04-03 21:15:40.236: D/IabHelper(12415): Constructing buy intent for demo_test, item type: inapp
04-03 21:15:40.276: D/IabHelper(12415): Launching buy intent for demo_test. Request code: 1
04-03 21:15:40.806: D/IabHelper(12415): Ending async operation: launchPurchaseFlow
04-03 21:15:40.806: E/IabHelper(12415): In-app billing error: Null data in IAB activity result.
04-03 21:15:40.806: D/com.satalyst.android.ui.PurchaseAction$PurchaseCompleteListener(12415): Received purchase code: -1002
04-03 21:15:40.811: E/com.satalyst.android.ui.PurchaseAction$PurchaseCompleteListener(12415): Unable to purchase item: demo_test due to error: -1002 with message: Null data in IAB result (response: -1002:Bad response received)
04-03 21:15:40.811: I/ACTIVITY-RESUME(12415): com.satalyst.android.ui.MainActivity@414cb8e0
04-03 21:15:41.681: I/com.satalyst.android.ui.MainActivity(12415): Destroying MainActivity: com.satalyst.android.ui.MainActivity@414cb8e0
04-03 21:15:42.396: I/ACTIVITY-RESUME(12415): com.satalyst.android.ui.MainActivity@414d8f5 
```

**触发购买的代码：**

```
/**
 * Stage #1, ensure the server is contactable and has correct protocol
 * version
 */
@Override
public void onClick() {
    // Verify server can be communicated with
    final ProgressDialog dlg = new ProgressDialog(activity);
    dlg.setMessage(activity.getString(R.string.preparing_purchase));
    dlg.setIndeterminate(true);
    dlg.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    dlg.show();
    AsyncTask.execute(new Runnable() {
        @Override
        public void run() {
            try {
                versionAgent.checkCloudServiceVersion();
                dlg.dismiss();
                purchasePayload(payload);
            } catch (VersionQueryException e) {
                activity.runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        Toast.makeText(
                                activity,
                                activity.getResources().getString(
                                        R.string.query_version_error),
                                Toast.LENGTH_LONG).show();
                    }
                });
                Log.e(this,
                        "Purchase disabled, could not query service version");
            } catch (VersionMismatchException e) {
                activity.runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        Toast.makeText(
                                activity,
                                activity.getResources()
                                        .getString(
                                                R.string.query_version_update_required),
                                Toast.LENGTH_LONG).show();
                    }
                });
                Log.e(this, "Purchase disabled, update is required");
            }
        }
    });
}

/**
 * Stage #2, trigger IAB purchase of given payload
 * 
 * @param payload
 */
private void purchasePayload(@Nonnull final Payload payload) {
    final String sku = payload.getSku();
    Log.d(this, "Launching purchase flow request for sku: " + sku);
    final IabHelper helper = ((MainActivity) activity).helper;
    final OnIabPurchaseFinishedListener onPurchasedListener = new PurchaseCompleteListener();

    if (!helper.isSetup()) {
        helper.startSetup(new OnIabSetupFinishedListener() {
            @Override
            public void onIabSetupFinished(IabResult result) {
                helper.launchPurchaseFlow(activity, sku,
                        BillingConstants.PURCHASE_REQUEST,
                        onPurchasedListener);
            }
        });
    } else {
        helper.launchPurchaseFlow(activity, sku,
                BillingConstants.PURCHASE_REQUEST, onPurchasedListener);
    }
} 
```

**MainActivity 代码中的 onResume/onPause/onActivityResult 和 onDestroy：**

```
/**
 * {@inheritDoc}
 */
@Override
protected void onResume() {
    super.onResume();
    Log.i("ACTIVITY-RESUME", this.toString());
    eventBus.register(this);
}

/**
 * {@inheritDoc}
 */
@Override
protected void onPause() {
    super.onPause();
    eventBus.unregister(this);
}

@Override
protected void onDestroy() {
    super.onDestroy();
    Log.i(this, "Destroying MainActivity: "+ this);
}

/**
 * {@inheritDoc}
 */
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (helper == null
            || !helper.handleActivityResult(requestCode, resultCode, data)) {
        super.onActivityResult(requestCode, resultCode, data);
    }
} 
```

**OnIabPurchaseFinishedListener 通过助手在 onActivityResult 中触发：**

```
private final class PurchaseCompleteListener implements
        OnIabPurchaseFinishedListener {

    @Override
    public void onIabPurchaseFinished(IabResult result, Purchase purchase) {
        Log.d(this, "Received purchase code: " + result.getResponse());

        if (result.isSuccess()) {
            // Removed this code since else is triggered in trouble case.
        } else {
            int responseCode = result.getResponse();
            switch (responseCode) {
            case IabHelper.BILLING_RESPONSE_RESULT_USER_CANCELED:
                Log.i(this, "Billing response received: User Canceled");
                // Do nothing
                break;
            default:
                String message = result.getMessage();
                Log.e(this, "Unable to purchase item: " + payload.getSku()
                        + " due to error: " + responseCode
                        + " with message: " + message);
                break;
            }
        }
    }
} 
```

**清单 XML 中的活动定义**

```
 <activity
        android:name="com.satalyst.android.ui.MainActivity"
        android:label="@string/app_name"
        android:launchMode="singleInstance"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Holo.Light" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

**错误日志（完整）显示过早的 Activity 破坏：**

```
D/IabHelper( 4462): Launching buy intent for demo_test. Request code: 1
I/power   ( 2004): *** acquire_dvfs_lock : lockType : 1  freq : 1200000 
I/ActivityManager( 2004): START {intent.toShortString} from pid -1
D/PowerManagerService( 2004): acquireDVFSLockLocked : type : DVFS_MIN_LIMIT  frequency : 1200000  uid : 1000  pid : 2004  tag : ActivityManager
W/ActivityManager( 2004): mDVFSLock.acquire()
D/dalvikvm( 2004): JIT code cache reset in 2 ms (1048532 bytes 1/0)
D/dalvikvm( 2004): GC_CONCURRENT freed 1981K, 18% free 19557K/23623K, paused 3ms+11ms
I/ALSAModule( 1837): Terminated ALSA PLAYBACK device hifi
W/WifiStateTracker( 2004): getNetworkInfo : NetworkInfo: type: wifi[], state: UNKNOWN/IDLE, reason: (unspecified), extra: (none), roaming: false, failover: false, isAvailable: false
E/WifiP2pStateTracker( 2004): getNetworkInfo : NetworkInfo: type: wifi_p2p[], state: UNKNOWN/IDLE, reason: (unspecified), extra: (none), roaming: false, failover: false, isAvailable: false
I/SurfaceFlinger( 1834): id=48 Removed idx=3 Map Size=4
I/SurfaceFlinger( 1834): id=48 Removed idx=-2 Map Size=4
D/dalvikvm( 4462): GC_CONCURRENT freed 12727K, 37% free 44670K/69959K, paused 2ms+4ms
D/ActivityManager( 2004): Trying to launch applicationName
V/GCMRegistrar( 3130): Is registered on server: true
W/WifiStateTracker( 2004): getNetworkInfo : NetworkInfo: type: wifi[], state: UNKNOWN/IDLE, reason: (unspecified), extra: (none), roaming: false, failover: false, isAvailable: false
E/WifiP2pStateTracker( 2004): getNetworkInfo : NetworkInfo: type: wifi_p2p[], state: UNKNOWN/IDLE, reason: (unspecified), extra: (none), roaming: false, failover: false, isAvailable: false
I/SurfaceFlinger( 1834): id=49(3) createSurface 0x398ec (1x1),1 flag=400
D/Finsky  ( 3130): [1] SelfUpdateScheduler.checkForSelfUpdate: Skipping DFE self-update. Local Version [8016014] >= Server Version [-1]
W/InputManagerService( 2004): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@4211eaa0 (uid=10110 pid=4462)
I/ActivityManager( 2004): Displayed shortComponentName: +105ms
V/yamaha::media::VolumeCtrl( 1837): VolumeCtrl::createVolume()
V/yamaha::media::VolumeCtrl( 1837): VolumeCtrl::setVolume()
D/yamaha::media::VolumeCtrl( 1837): VolumeCtrl::setVolume() FM Playback: Ready
D/yamaha::media::VolumeCtrl( 1837): VolumeCtrl::setVolume() VoiceCall: Ready
W/Finsky  ( 3130): [1] CarrierParamsAction.run: Saving carrier billing params failed.
E/Finsky  ( 3130): [184] FileBasedKeyValueStore.delete: Attempt to delete 'params1Fzx-vZz47HyPCTxqb1ncg' failed!
D/Finsky  ( 3130): [1] GetBillingCountriesAction.run: Skip getting fresh list of billing countries.
I/SurfaceFlinger( 1834): id=47 Removed idx=1 Map Size=4
I/SurfaceFlinger( 1834): id=47 Removed idx=-2 Map Size=4
I/power   ( 2004): *** release_dvfs_lock : lockType : 1 
D/PowerManagerService( 2004): releaseDVFSLockLocked : all DVFS_MIN_LIMIT are released 
W/ActivityManager( 2004): mDVFSLock.release()
I/ACTIVITY-IS-FINISHING( 4462): false com.satalyst.android.ui.MainActivity@416d9098
I/ACTIVITY-IS-FINISHING( 4462): false com.satalyst.android.ui.MainActivity@416d9098
I/ACTIVITY-IS-FINISHING( 4462): false com.satalyst.android.ui.MainActivity@416d9098
I/ACTIVITY-DESTROY( 4462): com.satalyst.android.ui.MainActivity@416d9098
D/com.satalyst.android.ui.MainActivity( 4462): Destroying helper.
D/IabHelper( 4462): Disposing.
D/IabHelper( 4462): Unbinding from service.
D/STATUSBAR-NetworkController( 2127): onDataActivity: direction=3
E/DataRouter( 1832): usb connection is true 
E/DataRouter( 1832): DSR is ON. Don't send DTR ON.
E/Finsky  ( 3130): [1] CheckoutPurchase.setError: type=PURCHASE_FAILED, code=-1, permissionCode=4, message=The item you requested is not available for purchase 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-17T08:29:52.903

我在尝试实施 IAP 时遇到了类似的问题。

我的活动将启动模式设置为“singleInstance”，禁止系统在其任务中启动新活动。

似乎 startIntentSenderForResult 试图在其任务中启动一个新活动，失败并因此返回 null 作为结果。

当我将启动模式设置为限制较少的“singleTop”时，这个问题就消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-29T20:28:10.123

我遇到了同样的问题，因为我的活动标记为 noHistory

```
<activity android:name=".BuyActivity" android:screenOrientation="portrait"
              android:noHistory="true"/> 
```

当我删除属性时，一切正常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:08:38.753

我的建议是尝试：

1.  从 AlertDialog 切换到 DialogFragment。
2.  尝试发布一个 Runnable 使用`runOnUiThread()`它打开对话框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T13:33:48.917

所以，两个问题：

1.  查看第一个 logcat，看起来失败是在`dialog.show()`调用时发生的。我想知道您是否为此设置了正确的上下文 - 我经常发现 this 是导致此失败的原因。

2.  没有对话框。据我从问题和您的评论中了解到，核心顺序如下。查看完整日志，我认为 Finsky 与您正在做的事情密切相关：

    W/Finsky (3130)：[1] CarrierParamsAction.run：保存运营商计费参数失败。E/Finsky（3130）：[184] FileBasedKeyValueStore.delete：尝试删除“params1Fzx-vZz47HyPCTxqb1ncg”失败！D/Finsky (3130)：[1] GetBillingCountriesAction.run：跳过获取新的计费国家列表。

[应用内计费错误](https://stackoverflow.com/questions/13470338/in-app-billing-error)表明此过程（尤其是在开发中）可能存在可以规避的问题。或者这是您期望从应用内计费中获得的行为？

除此之外，`ActivityManager.getProcessesInErrorState()`调用 onDestroy 以查看它是否告诉您有关问题所在的任何信息可能会很有趣...

# java - 子类之间的序列化

> ID：15761987
> 
> 赞同：5
> 
> 时间：2013-04-02T10:38:27.327
> 
> 标签：java, serialization

在面试中被问到有一个类`A`没有实现`serializable`如下所示的接口

```
class A
{ 
    private int a;

    A( int a)
    {
        this.a = a;
    }
} 
```

并且有一个类`B`扩展`A`并实现了`serializable`接口

```
class B extends A implements serializable
{

    private int a , b;

    B(int a, int b)
    {
        this.a = a;
        this.b = b; 
    }
} 
```

现在请告知我是否可以序列化类`B`，如果类`A`没有序列化假设我想序列化类的对象`B`，可以做到吗。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T10:42:43.083

> 现在请告知我是否可以序列化 B 类，前提是 A 类没有序列化

是的。

任何实现的类`Serializable`都可以序列化。即使它的基类没有实现它。

所有不可序列化的类都扩展`Object`了，但它的子类仍然可以通过实现来序列化`Serializable`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T10:43:55.860

如果不将 A 修改为具有可访问的无参数构造函数，则无法序列化 B。

来自[java.io.Serializable的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)

> 为了允许序列化不可序列化类的子类型，子类型可以负责保存和恢复超类型的公共、受保护和（如果可访问）包字段的状态。仅当它扩展的类具有可访问的无参数构造函数来初始化类的状态时，子类型才可以承担此责任。**如果不是这种情况，则声明类 Serializable 是错误的。将在运行时检测到错误。**
> 
> 在反序列化过程中，不可序列化类的字段将使用类的公共或受保护的无参数构造函数进行初始化。可序列化的子类必须可以访问无参数构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T10:43:14.153

是的，你可以，因为你的类正在实现可序列化的接口，足以使你的 B 类序列化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T10:44:35.890

是的; 无论 A 类如何，您都可以序列化 B 类。

**编辑：**

```
class A{
int a;
A(int t){
    a =t;
}
A(){}   //default constructor is must
 }

class B extends A implements Serializable{
String b;
B(int t, String u){
    super(t);
    b=u;
}
}

public class SOSerialization {
public static void main(String[] args) throws FileNotFoundException, IOException, ClassNotFoundException {
    ObjectOutputStream os = new ObjectOutputStream(new FileOutputStream("test.ser"));
    B b = new B(1, "tmp");
    os.writeObject(b);
    os.close();

    ObjectInputStream ois = new ObjectInputStream(new FileInputStream("test.ser"));

    Object o = ois.readObject();
    ois.close();
    B bb = (B)o;
    System.out.println(" values :"+ bb.a + "  "+ bb.b);
}
} 
```

因此，如果您想成功地进行反序列化，则需要提供一个默认构造函数。

**输出：**

值：0 tmp

所以它获取超类属性的默认值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T10:43:04.277

当然..这里我们只能序列化B类..但不能序列化A，因为它没有实现序列化接口。

**虽然序列化没问题。但是，只有反序列化时才会出现运行时错误。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T10:54:49.060

当然你可以序列化 B 类，因为它实现了 Serializable 接口。

**1** - 任何实现 Serializable 接口的类都可以被序列化。

基类是否可序列化并不重要。

**2** - 如果基类是可序列化的，那么子类也是可序列化的。

**3** - 如果一个对象被序列化，那么它完整的对象图将被序列化。实例变量引用的所有对象，由序列化的对象盯着。

# django - 在这种情况下可以使用 Django forloop.counter 吗？

> ID：15761988
> 
> 赞同：0
> 
> 时间：2013-04-02T10:38:28.373
> 
> 标签：django, django-templates

我想使用`Django forloop.counter`这样的：

```
{% for i in "xxxxxxxxxxxxxxxxxxxx" %}
    {{ i.time_code{{forloop.counter}} }}
{% endfor %} 
```

事实证明，这是不可能的。

做到这一点的理由。我有 20 个数据库列，例如：time_code1、time_code2 ....time_code20。所以，我不想单独调用每个，而是这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:59:35.137

我不确定我是否正确理解了您的问题。您想动态检索属性吗？您可以编写一个自定义标签：

```
from django.template import Library

register = Library()

@register.simple_tag
def get_attr(obj, name, default=None):
    return getattr(obj, str(name), default) 
```

然后您可以将属性列表传递给您的模板：

```
attrs = ( "time_code"+str(i) for i in xrange(0, 100) )
return render_to_response("test.html", { "attrs": attrs }) 
```

最后在您的模板中：

```
{% for attr in attrs %}
    {% get_attr i attr %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:49:49.840

我以类似的方式使用过。这是一个例子，不知道它是否有帮助。

```
<form action= "{% url 'result_show' forloop.counter0 %}" method="post"> 
```

它的作用是接受 的输出`forloop.counter0`作为视图中方法的参数。它就是这样工作的。

您是否考虑过将`time_code`s 迁移到列表而不是通过 访问它们`forloop.counter`？

# xamarin.android - 使用 Mvvmcross 获取位置

> ID：15761990
> 
> 赞同：0
> 
> 时间：2013-04-02T10:38:31.013
> 
> 标签：xamarin.android, mvvmcross

我正在尝试在我的应用程序中获取位置（mvvmcross/monodroid） 我关注这篇文章：[http](http://slodge.blogspot.be/2012/04/getting-location-information-in.html) : //slodge.blogspot.be/2012/04/getting-location-information-in.html 我正在使用 Vnext 版本。当我尝试获取位置时，输出中有此消息：“位置服务提供商不可用 - 返回 null”。我有这段代码来初始化 App.cs 中的位置插件：

```
protected override void InitialisePlugIns()
    {Cirrious.MvvmCross.Plugins.Location.PluginLoader.Instance.EnsureLoaded();} 
```

在我的 ViewModel 中，我遵循示例。当我在视图上时，我必须获取位置，所以我在 ViewModel 构造函数中添加了这段代码：

```
_watcher = this.GetService<IMvxGeoLocationWatcher>();
DoStartStop(); 
```

我做错了什么我有这个消息？

编辑：我使用三星 Galaxy Tab 2.0 7"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:33:08.263

我不确定问题可能是什么，但可以尝试的一些事情是：

*   你的设备肯定有gps吗？它是否启用？
*   您的测试应用程序是否在清单文件中声明了粗略和精细的功能？
*   另一个应用程序可以工作吗？例如带有位置视图的 mvx 教程应用程序？

# osgi - 如何查找 OSGi 包的包依赖项

> ID：15761992
> 
> 赞同：0
> 
> 时间：2013-04-02T10:38:36.690
> 
> 标签：osgi, apache-felix, obr

我有 2 个 OSGi 捆绑存储库。如果提供了 2 obr，我想使用 API 检查捆绑包是否有任何依赖问题。我怎样才能调用 api 来做到这一点？看来我可以使用下面的代码和 Felix API 来做到这一点。但是我怎样才能得到 RepositoryAdmin 对象呢？

```
RepositoryAdmin repoAdmin = ...
repoAdmin.addRepository(new File("/home/chandler/ws/reliability/testParent/test.eba/target/localobr/repository.xml").toURI().toURL());
repoAdmin.addRepository(new File("/home/chandler/geronimo3/var/obr.xml").toURI().toURL());
List<Repository> repos = new ArrayList<Repository>();
for(Repository repo : repoAdmin.listRepositories()) {
repos.add(repo);
}       
repos.add(repoAdmin.getSystemRepository());
repos.add(getLocalRepository(repoAdmin));
Resolver resolver = repoAdmin.resolver(repos.toArray(new Repository[0]));
Resource resources[] = repoAdmin.discoverResources("(&(presentationname=*)(symbolicname=com.chandler.app.osgi.test))");
resolver.add(resources[0]);
boolean resolved = resolver.resolve(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:35:54.207

org.apache.felix.bundlerepository-xyzjar 应该在您的 OSGi 框架中安装并启动。您可以从 BundleContext 实例获取 RepositoryAdmin 服务。

# android - 预计到达时间的计算

> ID：15761993
> 
> 赞同：1
> 
> 时间：2013-04-02T10:38:38.760
> 
> 标签：android

我们如何计算 wifi 信号的预计到达时间..我需要检查我什么时候从我的 wifi 路由器收到信号..是 ping 到路由器的一种方法吗？？...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:26:02.687

**注意：** *我的建议只涵盖了您问题的一半。另一半也许可以通过底部发布的链接来实现。*

我认为您首先要获取需要 ping 的路由器（默认网关）的 IP 地址。

```
WifiManager wifiMgr = (WifiManager) getSystemService(Context.WIFI_SERVICE);
DhcpInfo dhcpInfo =wifiMgr.getDhcpInfo();
String strGateway = String.valueOf(dhcpInfo.gateway); 
```

而且我认为您将需要 Manifest 文件中的这些权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

为了检查估计时间，请尝试在此处使用此解决方案：[https](https://stackoverflow.com/a/9991264/450534) ://stackoverflow.com/a/9991264/450534 。它非常详细，*我认为*它应该可以帮助您进行设置。同样在同一页面上，还有指向[Android Terminal Emulator source](https://github.com/jackpal/Android-Terminal-Emulator)的链接。这也可能有用。对原作者的支持。

我使用的第一部分，它的工作原理。然而，第二部分对我来说从来没有必要，因此从未尝试过。

# c# - 如何以编程方式将 .doc 转换为 .htm？

> ID：15761998
> 
> 赞同：-1
> 
> 时间：2013-04-02T10:39:05.570
> 
> 标签：c#, .doc

我想在 C#中转换`.doc`为。`.htm`如果我使用`Microsoft.Office.Interop.Word`我会得到异常：

> 由于以下错误，检索具有 CLSID {000209FF-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80040154 未注册类（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）

有什么解决办法吗？

[可能重复的是：[C# convert .doc to .htm](https://stackoverflow.com/questions/5850499/c-sharp-convert-doc-to-htm)，但它不能解决我的问题。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:14:16.633

您可以做的是使用 3rd 方 dll 读取 doc/docx 文件，然后使用将数据写入 html 格式`HtmlTextWriter`

看看这个stackoverflow问题：

[使用免费的第三方 dll 将 word 转换为 pdf](https://stackoverflow.com/questions/10442772/convert-word-to-pdf-using-free-third-party-dll)

[使用 C# 读取 doc 和 docx 文件，而无需在服务器上安装 MS Office](https://stackoverflow.com/questions/14455268/reading-doc-and-docx-files-using-c-sharp-without-having-ms-office-installed-on-s)

上述问题中提供的链接是：

对于 docx：

[http://docx.codeplex.com/](http://docx.codeplex.com/)

[http://msdn.microsoft.com/en-us/library/bb656295%28office.12%29.aspx](http://msdn.microsoft.com/en-us/library/bb656295%28office.12%29.aspx)

对于文档：

[http://npoi.codeplex.com/](http://npoi.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:00:55.007

对象的 CLSID`{000209FF-0000-0000-C000-000000000046}`需要在注册表中。

互操作程序集是使用 MS Office 提供的 COM dll 的包装器。所以在某些层面你使用 COM，尽管它对你来说是透明的。

[请检查您是否安装了 MS Office 的互操作程序。请参阅此链接http://msdn.microsoft.com/en-us/library/aa159923%28office.11](http://msdn.microsoft.com/en-us/library/aa159923%28office.11%29.aspx) ​​%29.aspx 您可以检查您是否有互操作程序集安装了 MS Word。

# php - jQuery ajax (JSON) 从 PHP 获取数组工作正常，但不在网络服务器上

> ID：15761999
> 
> 赞同：0
> 
> 时间：2013-04-02T10:39:18.897
> 
> 标签：php, javascript, mysql, ajax, json

我发现了一些类似的问题，但没有解决方案可以解决这个问题。

```
function loadProject(id) {
    $.ajax({
        url: 'loadDrumsetData.php',
        type: 'GET',
        data: {
            i: id
        },
        dataType: 'JSON',
        success: function (e) {
            pushLoadedData(e.bank); //create the JavaScript array
        },
        error: function (request, textStatus, errorThrown) {
            console.log(request, textStatus, errorThrown);
        }
    });
} 
```

我尝试从中获取数组结果`loadDrumsetData.php`。在我的本地 apache 上它工作正常。但是在我的网络服务器（apache）上，我得到了这个解析器错误：

```
SyntaxError: JSON.parse: unexpected end of data 
```

**loadDrumsetData.php：**

```
<?php
header('Content-type: application/json; charset=UTF-8');
error_reporting(-1);

$i=$_GET["i"];

$con=mysqli_connect("localhost","userxxx","xxxxx","drumpcdata");

if (mysqli_connect_errno())

  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

$result = mysqli_query($con," SELECT * FROM `session_".$i."` ORDER BY `pID` ASC ");

$soundArray = array();
$bankArray = array();

while($row = mysqli_fetch_array($result))
  {
    $pid = $row['pID'];
    $r = $row['Row'];
    $sound = $row['Sound'];
    $number = $row['Number'];
    $x = $row['X'];
    $y = $row['Y'];
    $w = $row['W'];
    $h = $row['H'];
    $spr = $row['Sprite'];
    $pressed = $row['Pressed'];
    $bankArray = [];
    array_push($soundArray, [$pid, $r, $sound ,$number,$x,$y,$w,$h,$spr, $pressed]);
    array_push($bankArray, $soundArray);
  }

mysqli_close($con);

$encoded = json_encode(array("bank" => $bankArray));
echo $encoded; 
?> 
```

我将不胜感激有关此主题的任何帮助。任何想法是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:49:08.233

你确定你正确连接到mysql数据库吗？

首先，如果连接失败，这**不会停止处理：**

```
if (mysqli_connect_errno())
   echo "Failed to connect to MySQL: " . mysqli_connect_error();
} 
```

并尝试进行查询等...

由于失败时，您的服务器发送字符串而不是 json，它会炸毁事情。

```
if (mysqli_connect_errno()){
   echo json_encode(
            array(
                "Success" => false,
                "Reason" => "Failed to connect to MySQL: ".mysqli_connect_error()
            )
        );
   exit(0);
} 
```

请尝试为您的脚本添加一些故障控制。

查询也可能失败。