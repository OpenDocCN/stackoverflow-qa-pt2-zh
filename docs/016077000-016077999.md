# StackOverflow 问答 16077000-16077999

# perl - 没有元素时 $#ArrayName 的默认值 (Perl)

> ID：16077001
> 
> 赞同：1
> 
> 时间：2013-04-18T07:31:14.753
> 
> 标签：perl

下面的代码用于显示在命令行中输入的参数数量。

```
#!/usr/bin/perl –w
$myVar = $#ARGV + 1;
print "Hi " , $ARGV[0] , "\n";
print "You have $myVar arguments\n"; 
```

在 perlintro 中，`$#ARGV`是一个特殊变量，它告诉您数组最后一个元素的索引。

如果是这种情况，当我没有在命令行中输入任何值时，`$myVar`value 如何以 0 结尾？

是不是因为当数组中没有元素时，“无元素”的索引是 -1 ？因为-1 + 1 = 0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T07:47:25.720

`$#ARGV`意思是“ARGV 的最后一个元素的索引”——不仅仅是 perlintro 句子似乎暗示的任何数组。

对于任何数组，如果它为空，则为`$#array`-1 和`scalar @array`0。

警告：如果有人修改`$[`了（“第一个元素的索引”），那也会改变`$#`。如果您追求长度并获取最后一个元素，您*可能*应该始终使用。`scalar @array``$array[-1]`

```
> cat demo.pl
my @array = ();
print "Size=", scalar @array, " items, last=", $#array, "\n";
$[ = 2;
print "Size=", scalar @array, " items, last=", $#array, "\n";
> perl demo.pl
Size=0 items, last=-1
Size=0 items, last=1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T07:48:50.927

你说的对。

`$#ARGV`是`scalar @ARGV - 1`，正如 squiguy 指出的那样。

但是有一些噪音较小的替代方法可以计算传递给程序的参数数量，您应该考虑使用这些替代方法：

```
my $count = scalar @ARGV;  # Explicit using of 'scalar' function
my $count = 0+@ARGV;       # Implicitly enforce scalar context
my $count = @ARGV;         # Since the context is already set by LHS 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T07:37:42.167

根据[perlvar](http://perldoc.perl.org/perlvar.html)页面：

> @ARGV 数组@ARGV 包含用于脚本的命令行参数。$#ARGV 通常是参数个数减一，因为 $ARGV[0] 是第一个参数，而不是程序的命令名本身。有关命令名称，请参见 $0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T07:49:08.490

> 是不是因为当数组中没有元素时，“无元素”的索引是 -1 ？因为 -1 + 1 = 0

几乎。它不是“'无元素'的索引”，而是适用以下规则：

[perldata](http://p3rl.org/perldata)

> 以下情况总是正确的：
> 
> 标量（@whatever）== $#whatever + 1;

# android - 片段webview java脚本功能不起作用

> ID：16077002
> 
> 赞同：1
> 
> 时间：2013-04-18T07:31:16.037
> 
> 标签：android, android-fragments, android-webview

我已经动态创建了操作栏和选项卡。我已经为标签片段定义了一个类，如下面的代码。

```
public static class TabFragmentClass extends Fragment
{   
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
       try
       {
           linearLayout=new LinearLayout(sActiveContext);
           linearLayout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT)); 
           linearLayout.setOrientation(LinearLayout.VERTICAL);
           CustomWebView webview=new CustomWebView(sActiveContext);
           FrameLayout layout=webview.createwebview();
           for (int i = 0; i < arrayList.size(); i++) {
               if(sActionBar.getSelectedTab().getPosition()==i)
               {
                   webview.initwebview(arrayList.get(i));
                   mWebViewList.add(i, webview);
                   break;
               }
           }
           linearLayout.addView(layout);
           linearLayout.setId(sActionBar.getSelectedTab().getPosition());
           return linearLayout;
        }
        catch(Exception error)
        {
            System.out.println(error.getMessage());
            return null;
        }

 }
   } 
```

url 是具有自己的本地 java 方法调用的本地 html 文件。如果我是**第一次**选择操作栏选项卡，这可以**正常工作**。那就是正确调用本机java方法并且回调成功。如果我第二次访问选项卡，则仅显示片段，不会重新创建选项卡内容。**我需要不是每次都创建的选项卡内容的功能**。但我面临本机方法未定义错误的问题。那就是**根本不调用本机方法**。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:32:57.417

将您的片段更改为此，

```
public static class TabFragmentClass extends Fragment
{   
   private static CustomWebView webview=null;
   private static boolean isInitialized=false;
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
       try
       {
           linearLayout=new LinearLayout(sActiveContext);
           linearLayout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT)); 
           linearLayout.setOrientation(LinearLayout.VERTICAL);
           webview=new CustomWebView(sActiveContext);
           FrameLayout layout=webview.createwebview();
           onLoadWebview();
           linearLayout.addView(layout);
           linearLayout.setId(sActionBar.getSelectedTab().getPosition());
           return linearLayout;
        }
        catch(Exception error)
        {
            System.out.println(error.getMessage());
            return null;
        }

 }
@Override
public void onActivityCreated()
{
super.onActivityCreated();
isInitialized=true;
}
@Override
public void onResume()
{
if(isInitialized)
    onLoadWebView();
}
public void onLoadWebview()
{
for (int i = 0; i < arrayList.size(); i++) {
               if(sActionBar.getSelectedTab().getPosition()==i)
               {
                   webview.initwebview(arrayList.get(i));
                   mWebViewList.add(i, webview);
                   break;
               }
           }
}
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:39:25.327

onCreateView only will be created Once ONLY after Activity Created 您可以将您的方法放在 onResume() 或刷新 web 您可以在[此处查看 Fragment 的生命周期](http://developer.android.com/guide/components/fragments.html#Lifecycle)

# ruby-on-rails - VCR 忽略参数：获取真实的 http 请求

> ID：16077003
> 
> 赞同：1
> 
> 时间：2013-04-18T07:31:17.633
> 
> 标签：ruby-on-rails, ruby, rspec, vcr

我正在用 VCR 为我的测试套件记录 http 请求。我必须忽略一个调用`callback`的参数，因为该参数是随机的，并且我不希望 VCR 在此参数更改时记录新的请求（因为只有参数更改，而不是请求本身）。

`callback`但我的问题是，我需要根据我的客户端在运行时生成的原始值来修改 VCR 为我的应用程序提供的响应正文。

这是我的录像机配置：

```
VCR.configure do |c|
  c.cassette_library_dir = 'spec/vcr_cassettes'
  c.hook_into :webmock
  c.allow_http_connections_when_no_cassette = false
  c.ignore_localhost = true

  c.before_http_request(:stubbed?) do |request|
    # request.uri is the ORIGINAL request made by the client
    puts request.uri
  end

  c.before_playback do |interaction, cassette|
    # request uri got the value from the cassette
    interaction.request.uri
    # and here I want to modify the interaction.response.body
    # based on the callback parameter from the original request from the client
    interaction.response.body = "...."
  end

  # add the callback and no caching _ parameter to the ignored parameters
  c.default_cassette_options = {
    record: :once,
    match_requests_on: [:method, VCR.request_matchers.uri_without_params("callback", "_")]
  }
end 
```

在`c.before_http_request(:stubbed?)`回调中，真正的值`callback`在`request.uri`. 然后 VCR 忽略此参数，并重放之前录制的磁带。在`c.before_playback`回调中，我可以修改`interaction.response.body`，但`callback`参数在录制时从盒式磁带中获取值。

如何获得回调内部的**真正**价值？因为此回调是唯一允许修改响应正文的回调。我试过了`callback``c.before_playback``c.after_http_request(:stubbed?)`获取响应正文和参数的实际值的位置`callback`，但是这个钩子为时已晚，因为我的应用程序已经收到了响应正文。

任何猴子补丁，肮脏的黑客或技巧都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T09:31:27.820

当有人把我引向正确的方向时，我在 Github 上找到了解决方案：[https ://github.com/nbibler/vcr-284](https://github.com/nbibler/vcr-284)

# android - 报警管理器不工作

> ID：16077004
> 
> 赞同：0
> 
> 时间：2013-04-18T07:31:20.737
> 
> 标签：android, alarmmanager

我正在尝试为我的应用程序创建一个新的调度程序，该调度程序每天在用户定义的时间运行。这是下面的代码。问题是调度程序没有在设定的时间运行。请建议如何执行此操作

```
 private void setAlarm(String targetCal){
    Toast.makeText(MainActivity.this,"Alarm Set", Toast.LENGTH_LONG).show();
    String[] Time=targetCal.split(":");
    Calendar timeOff = Calendar.getInstance();
    Intent intent = new Intent(getBaseContext(), AlarmReceiver.class);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(getBaseContext(), RQS_1, intent, 0);
    AlarmManager alarmManager = (AlarmManager)getSystemService(Context.ALARM_SERVICE);

    //int days = Calendar.SUNDAY + (7 - timeOff.get(Calendar.DAY_OF_WEEK)); // how many days until Sunday
    timeOff.set(Calendar.HOUR,Integer.valueOf(Time[0].trim()));
    timeOff.set(Calendar.MINUTE,Integer.valueOf(Time[1].trim()));
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, timeOff.getTimeInMillis(), alarmManager.INTERVAL_DAY , pendingIntent);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:36:08.383

Try this code

```
 Intent i = new Intent("in.servicealarmdemo.demoactivity");

/** Creating a Pending Intent */
PendingIntent operation = PendingIntent.getActivity(getBaseContext(), count+2, i, Intent.FLAG_ACTIVITY_NEW_TASK);

/** Getting a reference to the System Service ALARM_SERVICE */
AlarmManager alarmManager = (AlarmManager) getBaseContext().getSystemService(ALARM_SERVICE);
/** Creating a calendar object corresponding to the date and time set by the user */
GregorianCalendar calendar = new GregorianCalendar(pYear,pMonth,pDay,pHour,pMinute);

/** Converting the date and time in to milliseconds elapsed since epoch */
long alarm_time = calendar.getTimeInMillis();

/** Setting an alarm, which invokes the operation at alart_time */
alarmManager.set(AlarmManager.RTC_WAKEUP  , alarm_time , operation);

/** Alert is set successfully */
Toast.makeText(getBaseContext(), "Alarm is set successfully",Toast.LENGTH_SHORT).show(); 
```

Or you can simply try this tutorial

[http://wptrafficanalyzer.in/blog/setting-up-alarm-using-alarmmanager-and-waking-up-screen-and-unlocking-keypad-on-alarm-goes-off-in-android/](http://wptrafficanalyzer.in/blog/setting-up-alarm-using-alarmmanager-and-waking-up-screen-and-unlocking-keypad-on-alarm-goes-off-in-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:38:10.080

设置变量可能会出现问题。而是尝试找出当前时间与新值之间的差异，然后执行以下操作：

```
timeOff.add(Calender.HOUR,diff); 
```

# java - 在 DST 期间转换为 GMT 会出现问题

> ID：16077005
> 
> 赞同：0
> 
> 时间：2013-04-18T07:31:21.767
> 
> 标签：java

我在我们现有的应用程序中面临一个问题，其中员工输入的时间（从他的组织/商店使用时钟应用程序）首先转换为 GMT，然后存储在数据库中。并且为了显示回来，将GMT时间转换回存储本地时区并显示。在大多数情况下，这可以正常工作，但当时区移动到 DST 时则不行，反之亦然。

让我更具体一点。假设商店的标准时区是 GMT-8 并且员工在早上 08:00 打卡，因此将时间转换为 GMT 16:00，然后存储在 DB 中。转换过程首先将这个 08:00 AM 转换为存储本地时间，以某种方式给出 17:00 CET，然后这个 17:00 CET 转换为 GMT，给出 16:00 CET。

但是，如果我们以 3 月 31 日的 DST 为例，此时 02:00 AM 变为 03:00 AM。假设员工在 18:00（3 月 30 日）打卡，它在第一次转换为本地时返回给我 04:00 AM CEST，然后当我将其转换为 GMT 时，它给出了 03:00 CEST。因此，在将其转换回来时，这会给出 19:00，这是不正确的。该设计表示本地时间被转换为 UTC，然后存储在数据库中，但如果它仍然是 UTC，那么它应该存储 02:00 AM 而不是 03:00 AM，因为 GMT/UTC 没有 DST。

用于进行转换的代码是：

**步骤1**

```
final Date localPunchDateTime = R3ValConverter.convertFromTimeZone(teData.m_dtTm,  
                                               TimeZone.getTimeZone("GMT-8")); 
```

**第2步**

```
teData.m_dtTm = R3ValConverter.convertToGMT( localPunchDateTime ); 
```

**R3ValConverter.java**

```
public static Date convertFromTimeZone(final Date dtSrc, final TimeZone tzSrc)
    {

        final SISDateTime dtTmTemp = new SISDateTime(dtSrc, TimeZone.getDefault());
        final SISDateTime dtTmSrc = new SISDateTime( dtTmTemp.getYear(), dtTmTemp.getMonth(), 
                                                     dtTmTemp.getDate(), dtTmTemp.getHour(), 
                                                     dtTmTemp.getMinute(), dtTmTemp.getSecond(), 
                                                     tzSrc );

        return dtTmSrc.toDate();                                                       
    } 
```

**SISDateTime**

```
GregorianCalendar m_cal;

public SISDateTime(Date dt, TimeZone tz) throws SISDateTimeException
    {

        m_cal = new GregorianCalendar(tz);
        m_cal.setTime(dt);
        resetMillis();
    } 
```

另一个 SISDateTime 方法也使用相同的 GregorianCalendar。

我真的很感激在这方面的任何帮助。我在这里假设我们在第一步中遇到了一些问题，但目前不知道有什么好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:01:13.073

您必须在数据库中存储从本地时间到 UTC 的 UTC + 当前偏移量（以秒为单位）。所以如果你想保留本地时间，你总是需要一对 (Utc time, offset)

然后使用`TimezoneWithOffsetFromGMT`（或类似名称）

# iphone - locationManager:didUpdateLocations: 总是被调用多次

> ID：16077008
> 
> 赞同：6
> 
> 时间：2013-04-18T07:31:26.687
> 
> 标签：iphone, ios, cllocationmanager

当视图确实出现时，我开始更新当前位置，并在`locationManager:didUpdateLocations:`调用时停止更新位置。但是为什么`locationManager:didUpdateLocations:`总是被调用几次呢？我错过了什么？

```
#import "ViewController.h"

@interface ViewController (){
    CLLocationManager *locationManager; // location manager for current location
}
@end

@implementation ViewController
- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [self startUpdatingCurrentLocation];
}

- (void)startUpdatingCurrentLocation
{
    if (!locationManager)
    {
        locationManager = [[CLLocationManager alloc] init];
        [locationManager setDelegate:self];
        locationManager.distanceFilter = 10.0f; // we don't need to be any more accurate than 10m
    }
    [locationManager startUpdatingLocation];
}

-(void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations{
    [locationManager stopUpdatingLocation];
}
@end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T07:35:39.713

可能这取决于您为 locationManager 设置的准确性。您有 3 种 o 定位蜂窝无线电、WiFi 地图、GPS。如果您设置为最佳精度，则位置管理器将继续检查您的位置，如果精度更高的位置超出距离过滤器的范围，则将再次调用委托方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-19T06:50:48.623

`SWIFT`版本

我做了一个助手类`HelperLocationManager`并添加了一个`notification- observer`模式

```
import UIKit
import CoreLocation

class HelperLocationManager: NSObject {

    var locationManager = CLLocationManager()
    static let sharedInstance = HelperLocationManager()
    var currentLocation :CLLocation?
    var notGotUserLocation = true

    override init() {

        super.init()

        var code = CLLocationManager.authorizationStatus()

        if code == CLAuthorizationStatus.NotDetermined {

            locationManager.requestAlwaysAuthorization()
            locationManager.requestWhenInUseAuthorization()

        }
        locationManager.requestAlwaysAuthorization()
        locationManager.requestWhenInUseAuthorization()
        locationManager.delegate = self
        locationManager.distanceFilter = 100;

    }

}

extension HelperLocationManager: CLLocationManagerDelegate{

    func locationManager(manager: CLLocationManager!, didUpdateLocations locations: [AnyObject]!) {

            var locValue = locations.last as! CLLocation
            println(locValue)
            self.currentLocation = locValue
            NSNotificationCenter.defaultCenter().postNotificationName("sendCurrentAddressToViewController", object:self.currentLocation)
            notGotUserLocation = false

    }

    func locationManager(manager: CLLocationManager!, didFailWithError error: NSError!) {

        println("Your error is ", error.localizedDescription)

    }

} 
```

现在，如果您的`Viewcontroller`班级需要该位置，则将观察员放在那里

```
var helperLocation:HelperLocationManager? 
```

`viewDidLoad`作为_

```
 override func viewDidLoad() {

         helperLocation = HelperLocationManager()
         NSNotificationCenter.defaultCenter().addObserver(self, selector: "getCurrentAddressToViewController:", name: "sendCurrentAddressToViewController", object: nil)

  } 
```

//和观察者作为

```
 func getCurrentAddressToViewController(notification: NSNotification) {

        currentLocation = notification.object as? CLLocation
        NSNotificationCenter.defaultCenter().removeObserver(self, name: "sendCurrentAddressToViewController", object: nil)

    } 
```

//虽然`didUpdateLocation`被多次调用你只得到一个时间位置，因为`observer`在你得到位置后删除。

**编辑：我重构了这个助手类，这样你就不需要添加通知观察者模式**

```
class HelperLocationManager: NSObject {

    private lazy var locationManager = CLLocationManager()
    static let sharedInstance = HelperLocationManager()
    var currentLocation :CLLocation?

    override init() {

        super.init()
        locationManager.desiredAccuracy = kCLLocationAccuracyBest
        locationManager.delegate = self
    }
}

extension HelperLocationManager: CLLocationManagerDelegate{

    func locationManager(manager: CLLocationManager, didChangeAuthorizationStatus status: CLAuthorizationStatus) {

        switch status {

        case CLAuthorizationStatus.NotDetermined:

            locationManager.requestWhenInUseAuthorization()

        case CLAuthorizationStatus.Restricted:

            PrinterHelper.messagePrinter("Restricted Access to location")

        case CLAuthorizationStatus.Denied:

            PrinterHelper.messagePrinter("User denied access to location")

        case CLAuthorizationStatus.AuthorizedWhenInUse:

            if #available(iOS 9.0, *) {

                locationManager.requestLocation()

            } else {

                locationManager.startUpdatingLocation()
            }

        default:

            PrinterHelper.messagePrinter("default authorization")

        }
    }

    func locationManager(manager: CLLocationManager, didUpdateLocations locations: [CLLocation]) {

        let locValue = locations.last
        HelperLocationManager.sharedInstance.currentLocation =  locValue
        locationManager.stopUpdatingLocation()

    }

    func locationManager(manager: CLLocationManager, didFailWithError error: NSError) {

        PrinterHelper.errorPrinter(error.localizedDescription)

    }
} 
```

查看需要获取用户权限的Controller

```
var helperLocationManager:HelperLocationManager? 
```

`viewDidLoad`作为_

```
 override func viewDidLoad() {

         helperLocationManager = HelperLocationManager.sharedInstance

  } 
```

要获得您需要将单例属性`currentLocation`称为的位置

```
 if  let userCurentLoc = HelperLocationManager.sharedInstance.currentLocation{

           //userCurrentLoc is the user Location

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-14T10:26:34.013

为了补充 Anish 的回答，如果您想知道您的助手类何时没有调用位置更新（即当您关闭位置服务时），您可以使用该`locationManager:didChangeAuthorizationStatus:`方法管理它，如果您的位置不允许，您可以打电话给另一个`notification- observer`

```
func locationManager(manager: CLLocationManager, didChangeAuthorizationStatus status: CLAuthorizationStatus) {
    var shouldIAllow = false

    switch status {
    case CLAuthorizationStatus.Restricted:
        locationStatus = "Restricted Access to location"
    case CLAuthorizationStatus.Denied:
        locationStatus = "User denied access to location"
    case CLAuthorizationStatus.NotDetermined:
        locationStatus = "Status not determined"
    default:
        locationStatus = "Allowed to location Access"
        shouldIAllow = true
    }

    if (shouldIAllow == true) {
        print("Location to Allowed")
        // Start location services
        locationManager!.startUpdatingLocation()
    } else {
        print("Denied access: \(locationStatus)")
        NSNotificationCenter.defaultCenter().postNotificationName("deniedLocation", object:locationStatus)
    }
} 
```

# javascript - HTML5 画布 toDataURL 有时会返回“data:”而不是图像

> ID：16077010
> 
> 赞同：2
> 
> 时间：2013-04-18T07:31:35.163
> 
> 标签：javascript, html, html5-canvas

我创建了一个画布`document.createElement("canvas")`：

```
var canvas = document.createElement("canvas");
canvas.width = width;     // width = 4000 or more
canvas.height = height;   // height = 5000 or more 
```

然后我`canvas.toDataURL()`用来获取它的base64字符串：

```
var str = canvas.toDataURL(); 
```

但“str”有时会返回为`"data:,"`，其中没有图像数据。就这六个字符。

有时它会返回正确的字符串，例如`"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAEGgAABPsCAYAAABg/aH3AAAgAElEQVR4XuzcQREAAAjDM..."`

我的`canvas.width`太大了....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:49:37.677

您应该尝试显式创建 2D 上下文，然后在其中绘制一个空形状，例如：

```
var canvas = document.createElement("canvas");
canvas.width = 4000;
canvas.height = 5000;
var ctx=canvas.getContext('2d');
ctx.fillRect(0,0,0,0);
canvas.toDataURL(); 
```

编辑：您的画布似乎包含太多数据，无法导出为 dataUri：

```
var canvas = document.createElement("canvas");
canvas.width = 400000000;
canvas.height = 500000000;
var ctx=canvas.getContext('2d');
ctx.fillRect(0,0,0,0);
canvas.toDataURL();
// outputs : "data:," 
```

# javascript - 使用javascript在客户端转换视频

> ID：16077012
> 
> 赞同：0
> 
> 时间：2013-04-18T07:31:38.027
> 
> 标签：javascript, video, web, video-conversion

有没有办法在客户端使用 javascript 和浏览器转换视频。

我正在寻找能够最大限度地减少我们的服务器进程并显示转换进度的解决方案。

如果没有这样的方法，我如何显示视频转换的过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:37:51.993

没有简单和标准的方法来做到这一点（无论如何也不是不可能，你可以使用一些组件，但是对于广大公众来说，他们会因安全风险而回避）。

要知道如何显示视频转换的进度，您需要说明您在服务器中使用哪些工具来转换视频。

# excel - Excel RANDBETWEEN 作为字符串

> ID：16077013
> 
> 赞同：4
> 
> 时间：2013-04-18T07:31:43.117
> 
> 标签：excel, excel-formula, excel-2007

如何将字符串值用作随机值，我有 3 个值，即 SMS、Datasynergy 和其他，我想通过使用 random 函数将上述值之一随机分配给我的字段来模拟实时数据？

我想到的方法是在 1-3 之间做一个随机值，然后继续说 if 1 = SMS else if 2 = Datasynergy else Other

但我很确定一定有其他方法可以做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-18T07:37:39.153

尝试这个

```
=CHOOSE(RANDBETWEEN(1,3),"SMS","Datasynergy","Other") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T10:24:37.143

另一种方法是使用 INDEX，例如

`=INDEX({"SMS","Datasynergy","Other"},RANDBETWEEN(1,3))`

您可以轻松适应这样的更长列表

`=INDEX(List,RANDBETWEEN(1,COUNTA(List)))`

# ios - 将 UIImagePicker 相机视图限制为屏幕的一小部分

> ID：16077019
> 
> 赞同：1
> 
> 时间：2013-04-18T07:31:56.257
> 
> 标签：ios, ipad, uiimagepickercontroller

我正在开发一个使用 UIImagePicker 捕获和保存屏幕的应用程序。以下是启动相机的代码。

```
UIImagePickerController *imgPickController = [[UIImagePickerController alloc] init];
imgPickController.sourceType = UIImagePickerControllerSourceTypeCamera;
imgPickController.delegate =self;
imgPickController.allowsEditing=YES;
[self presentModalViewController:imgPickController animated:YES]; 
```

这会在整个屏幕中启动相机。

有没有办法在应用程序屏幕上的另一个小子视图中显示相机视图？希望我清楚。谢谢。

# jquery - jQuery：鼠标悬停功能不会触发无序列表后代

> ID：16077021
> 
> 赞同：2
> 
> 时间：2013-04-18T07:31:56.380
> 
> 标签：jquery, html, html-lists, anchor, mouseover

我有一个无序列表如下：

```
<ul id="dasList">
 <li id="dasListItem1">
  <span>
   <div style="height:10px">
     <label id="dasLabel1">LaLaLa</label>
   </div>
   <a id="dasAnchor1"></a>
  </span>
 </li>
 <li id="dasListItem2">
  <span>
   <div style="height:10px">
     <label id="dasLabel2">LaLaLa</label>
   </div>
   <a id="dasAnchor2"></a>
  </span>
 </li>
</ul> 
```

现在这就是我想要做的。我想在列表项中包含的锚标记上触发鼠标悬停功能。目前，我正在使用这个：

```
$("#dasList a").mouseover(function(){
        alert('i find your lack of faith disturbing');
    }); 
```

但由于某种不敬虔的原因，它没有触发。我也设置了断点，但无济于事:(

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T13:39:12.727

我想到了！这是我的浏览器的问题:) 显然，当 chrome 开发工具打开时，最新的 Chrome 更新似乎将鼠标悬停识别为 mouseclick：/

老实说，这是一个非常奇怪的场景，也是我从未预料到的。我终于结束了这个问题，因为我认为是时候结束了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:33:43.760

它应该是

```
 $("#dasList li a").mouseover(function(){
   ... 
```

**使用查找（）**

```
 $("#dasLis").find("a").mouseover(function(){ 
```

**使用属性选择器`^`**选择所有以提供的字符串开头的元素

```
 $("a[id^='dasAnchor']").mouseover(function(){ 
```

# oracle - 从表中检索用户定义的数据类型

> ID：16077023
> 
> 赞同：1
> 
> 时间：2013-04-18T07:32:02.533
> 
> 标签：oracle, alias, user-defined-types, user-defined

```
SQL> -- CASE 1

SQL>select nest_test.id.num from nest_test;
select nest_test.id.num from nest_test
       *
ERROR at line 1:
ORA-00904: "NEST_TEST"."ID"."NUM": invalid identifier

SQL> -- CASE 2

SQL>select n.id.num from nest_test n;

    ID.NUM
----------
        12 
```

因为，AFAIK，给任何表起别名只是为表或列提供简单的名称。那么，当我尝试从表中检索用户定义的对象时，为什么在**案例 1中出现错误？**当我给我的表起别名时，实际发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T07:52:58.357

Oracle 文档指出，需要表别名来引用对象的方法或属性，以避免潜在的“内部捕获”（表列名称与对象属性名称冲突）。 [了解更多](http://docs.oracle.com/cd/B19306_01/appdev.102/b14260/adobjbas.htm#sthref178)。

该文档指出：

> “即使表名本身由模式名称限定，您也必须使用表别名而不是表名来限定对对象属性或方法的引用。”

它没有说明甲骨文为何强制执行此规则。但是在命名空间实现中显然存在一些复杂性，这是由于将对象改装到关系内核中造成的。

* * *

> “那么，为什么这个查询有效 select emp.sal from emp”

因为那是表格上的常规列。Oracle 从未对普通表强制使用别名。从现在开始将破坏数十年来积累的大量代码。

必须使用别名只是使用对象类型定义表列的另一种惩罚。它远不是 Oracle 的 ORDBMS 实现所附带的笨拙语法中最繁重的方面。

此外，几乎在某些情况下，使用对象而不是现实表来持久化数据是正确的解决方案，所以这并不重要。

# php - 浮点数计算

> ID：16077024
> 
> 赞同：0
> 
> 时间：2013-04-18T07:32:04.070
> 
> 标签：php

我有两个花车：

```
time1: 0.009925 
time2: 0.01 
```

当我回来时，`time1 - time2`我得到了这个：

```
difference -7.5E-5 
```

`time2 - time1`也返回 7.5E-5。

你如何返回一个正常的浮点数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:54:45.900

尝试 number_format [http://us3.php.net/number-format](http://us3.php.net/number-format)

```
echo number_format(0.009925 - 0.01,5); //-0.00008 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:34:55.713

这是计算的正确答案，作为正常的浮点值返回。

值得注意的`E`是 引用`x10^N`，所以这些值等价于`7.5x10^-5`。我认为您的困惑源于此。

# lisp - 反向 LISP 列表到位

> ID：16077025
> 
> 赞同：1
> 
> 时间：2013-04-18T07:32:11.807
> 
> 标签：lisp

我想编写一个反转列表元素的函数，但它应该发生在适当的位置（也就是说，不要创建一个新的反转列表）。

就像是：

```
>> (setq l ' (a b c d))
((a b c d)
>> (rev l)
(d c b a)
>> l
(d c b a) 
```

我应该遵循哪些标志来实现这一目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T07:36:12.820

Have a look at `nreverse` which will modify the list in place (see [HyperSpec](http://www.lispworks.com/documentation/HyperSpec/Body/f_revers.htm)).

As per the comments, do note the comments that @Barmar made and this bit from the spec:

> For nreverse, sequence might be destroyed and re-used to produce the result. The result might or might not be identical to sequence. Specifically, when sequence is a list, nreverse is permitted to setf any part, car or cdr, of any cons that is part of the list structure of sequence.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:04:46.253

实现这一点并不难（忽略故障情况）。密钥`(setf cdr)`用于重用给定的 cons 单元格，而不是丢失对先前 cdr 的引用。

```
(defun nreverse2 (list)
  (recurse reving ((list list) (rslt '()))
    (if (not (consp list))
        rslt
        (let ((rest (cdr list)))
          (setf (cdr list) rslt)
          (reving rest list)))))

(defmacro recurse (name args &rest body)
  `(labels ((,name ,(mapcar #'car args) ,@body))
     (,name ,@(mapcar #'cadr args)))) 
```

[编辑] 如评论中所述，要真正就地执行此操作（并且不考虑 consing）：

```
(defun reverse-in-place (l)
  (let ((result l))
    (recurse reving ((l l) (r (reverse l))
      (cond ((not (consp l)) result)
            (else (setf   (car l) (car r))
                  (reving (cdr l) (cdr r)))))))

> (defvar l '(1 2 3))
> (reverse-in-place l))
(3 2 1)
> l
(3 2 1) 
```

# android - MediaPlayer.seekTo() 不寻求在 Android 上定位

> ID：16077026
> 
> 赞同：7
> 
> 时间：2013-04-18T07:32:13.890
> 
> 标签：android, android-mediaplayer

我正在开发一个应用程序，其中视频以 3 个不同的时间间隔暂停。在第二次暂停之后，如果单击按钮，它应该从上一个位置开始。

例如。如果它当前在 1:30 暂停，然后单击按钮，它会转到上一个书签，即 00:45。

我认为使用 MediaPlayer.seekTo() 将帮助我实现这一目标。但是， seekTo() 根本不寻找位置。即使在调用 seekTo(); 之后 currentPosition 也保持不变；

这是我的代码。

```
mediaPlayer.setOnSeekCompleteListener(new OnSeekCompleteListener() {
    @Override
    public void onSeekComplete(MediaPlayer mp) {
        Log.d("VID_PLAYER","Seek Complete. Current Position: " + mp.getCurrentPosition());
        mp.start();
    }
}); 
```

在下面的某个地方，我有这个......

`mediaPlayer.seekTo(45000);`

问题是什么？为什么不是 seekTo(); 在职的？任何帮助，将不胜感激。

我目前正在 Android v4.0.3 (ICS) 上测试它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-26T00:51:05.893

Android 无法做到这`seekTo`一点的原因之一是视频的奇怪编码。例如，在 MP4 格式中，可以在文件的开头和结尾指定所谓的“搜索点”（即搜索索引）。如果在文件开头指定了它们，那么它们的`seekTo`行为将正确。但是如果在文件末尾指定了它们，则 seekTo 将什么都不做，视频将从`seekTo`.

这是在 Android 4.4.2 中确认的错误或功能。

**PS**在 Youtube 上，所有视频都在文件开头使用“搜索点”进行编码。因此，如果您在应用程序中遇到此问题，`seekTo`请首先使用 Youtube 中的一些视频文件检查您的应用程序。也许你需要重新编码你的视频......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-18T08:54:27.907

尝试下面给出的代码片段，以更准确地寻找媒体的特定位置。

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) 
    mediaPlayer.seekTo(seekPosition,MediaPlayer.SEEK_CLOSEST);
else 
    mediaPlayer.seekTo((int)seekPosition); 
```

请记住 - 随着准确性的提高，搜索速度会降低。因此，在播放高分辨率视频时，建议不要`MediaPlayer.SEEK_CLOSEST`更频繁地使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T07:38:11.923

您的问题是否与此错误有关： [https ://code.google.com/p/android/issues/detail?id=4124](https://code.google.com/p/android/issues/detail?id=4124)

我记得大约一年前遇到过这种情况。我认为我当时没有找到解决方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-25T14:43:27.527

从 API 26 开始，Android 添加了一个

```
seekTo(long msec, int mode); 
```

通过指定 a `mode`，我们可以告诉我们`MediaPlayer`如何寻找：

*   `SEEK_PREVIOUS_SYNC`: 具有与 相同的行为`seekTo(int msec)`。它向后寻找最近的“搜索点”（即同步帧）。
*   `SEEK_NEXT_SYNC`: 与 相同`PREVIOUS`，但向前看。
*   `SEEK_CLOSEST_SYNC`：这会寻找给定`msec`时间最近的同步帧。
*   `SEEK_CLOSEST`：这会寻找给定`msec`时间最近的帧。

几天前我遇到了类似的问题，通过使用`SEEK_CLOSEST`模式，这个问题得到了解决。

作为参考，请查看以下链接：[https://developer.android.com/reference/android/media/MediaPlayer.html#seekTo(long,%20int)](https://developer.android.com/reference/android/media/MediaPlayer.html#seekTo(long,%20int))

[https://en.wikipedia.org/wiki/Video_compression_picture_types](https://en.wikipedia.org/wiki/Video_compression_picture_types)

# php - Wordpress 为主题 template.php 动态添加钩子

> ID：16077027
> 
> 赞同：0
> 
> 时间：2013-04-18T07:32:14.760
> 
> 标签：php, wordpress

有没有办法动态地将钩子添加到主题 template.php 中，例如在 top-a 或 bottom-b 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:46:21.153

您可以尝试在另一个挂钩中注册。*`setup_theme`* 在包含主题*functions.php*之前和*`after_setup_theme`*之后调用该钩子。

所以你注册一个钩子，然后注册其他钩子。

另见：

*   [Wordpress 3.0 程序流文件包含](http://toolpress.de/tools/Toolpress_-_Wordpress-3.0-Program-Flow-0.2-2010-06-28.pdf)

# xml - 如何将系统输出重定向到 apache log4j 中的 FileAppendar

> ID：16077034
> 
> 赞同：1
> 
> 时间：2013-04-18T07:32:32.997
> 
> 标签：xml, apache, logging, log4j

我已经成功地为我的应用程序实现了 log4j，所有日志都写在一个文件中。现在，我有一些系统，我想打印在同一个日志文件中。这是我到目前为止所拥有的

```
<!DOCTYPE log4j:configuration SYSTEM "log4Vj.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
<!-- general application log -->

<appender name="console" class="org.apache.log4j.ConsoleAppender">
                <param name="Target" value="System.out"/>
                    <layout class="org.apache.log4j.PatternLayout">
                <param name="ConversionPattern" value="%d %-5p %30.30c - %m%n"/>
                    </layout>
         </appender>
        <appender name="default" class="org.apache.log4j.RollingFileAppender">
                <param name="File" value="${log.dir}/logs/debug.txt" />
                <param name ="Append" value="TRUE"/>
                <errorHandler class="org.apache.log4j.varia.FallbackErrorHandler">
                        <root-ref/>
                       <appender-ref ref="console"/>
                 </errorHandler>
                <layout class="org.apache.log4j.PatternLayout">
                        <param name="ConversionPattern" value="%d{[HH:mm:ss:SSS]|[MM-dd-yyyy]} [%c] %p - %m%n"/>
                </layout>
                <param name="MaxFileSize" value="10MB"/>
                <param name="MaxBackupIndex" value="100"/>
        </appender>

<logger name="ioreactorlog" additivity="false">
                <level value="INFO"/>
                <appender-ref ref="default"/>
        </logger>

        <root>
                <level value="INFO"/>
                <appender-ref ref="default"/>
                <appender-ref ref="console"/>
        </root>
</log4j:configuration> 
```

是否可以将一些控制台写入 debug.txt？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T18:34:55.320

使用配置文件添加`debug.txt`为目标`FileAppender`：

```
<appender name="FileAppender" type="org.apache.log4j.FileAppender">
    <file value="debug.txt" />
    <appendToFile value="true" />
    <layout type="org.apache.log4j.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
    </layout>
</appender> 
```

# ios - 带有缓存的延迟图像加载

> ID：16077036
> 
> 赞同：1
> 
> 时间：2013-04-18T07:32:39.317
> 
> 标签：ios

我无法形成问题标题，因为这个问题就像描述性的。但我可以在这里解释清楚。这与ios中的图像缓存有关。

**我的要求：我想创建一个列表，其中包含图像视图和从在线加载的图像。我还需要为该图像实现缓存（因为每次如果我在线加载 fom 都会花费太多时间并且还消耗网络）。**

**注意：通常我们会根据该图像链接为该图像准备缓存键。**

**有没有其他方法来准备缓存键？**

加载列表视图后，我可以单击任何行，我将重定向到详细信息页面。在那个详细的页面中，我有编辑选项，我可以更改该图像。我重新提交到服务器。完成上传后，我会强制关闭我的应用程序并作为新应用程序打开。在这种情况下，在服务器端，图像链接没有变化，**因为该图像链接如[h​​ttp://www.uigarden.net/english/images/108.jpg](http://www.uigarden.net/english/images/108.jpg)**

现在我加载那个tableview而不是所有图像从缓存或服务器加载。所以我们有两种情况。

1）从缓存：如果链接没有变化并且该链接ID在缓存文件夹中可用，那么它将从缓存中加载。这里 Mu 问题：我无法找到它是否已编辑或未编辑。所以我无法加载新编辑的图像，因为我已经基于链接缓存了该图像。

2) 如果基于链接的键在缓存中不可用，则从直接链接。

**我们如何区分它是编辑图像还是旧图像？**

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-09T10:55:03.203

解决方案是 - [SDWebImage](https://github.com/rs/SDWebImage)

您只需要到`#import <SDWebImage/UIImageView+WebCache.h>`您的项目，您还可以在下载图像时使用以下代码定义占位符：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
        static NSString *CellIdentifier;
        CustomCell *cell = [tableview dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

        MyObject *object = (MyObject *)[self.list.array objectAtIndex:indexPath.row];

        [cell.imageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"]
                       placeholderImage:[UIImage imageNamed:@"placeholder.png"]];

        return cell;
} 
```

它还缓存下载的图像并为您提供出色的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:51:25.907

AFNetWorking 与 NSURLCache 的组合很棒

# winapi - 为 Windows Mobile 6 编译时找不到 Shell32.lib

> ID：16077039
> 
> 赞同：0
> 
> 时间：2013-04-18T07:32:54.783
> 
> 标签：winapi, windows-mobile, arm, shell32

我尝试编译一个使用 SHBrowseForFolder api 调用的简单 windows mobile 6 项目。我还在项目链接器依赖项中包含了 shell32.lib。不知何故，ARMv4 sdk 中似乎缺少 shell32.lib。有解决方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:46:32.613

`shell32.lib` is a desktop library. Windows CE uses `ceshell.lib`, [as stated in the docs](http://msdn.microsoft.com/en-us/library/aa453669.aspx). I don't know if it's available in WinMo. Since the OS is customizable, and the WinMo team rewrote the entire shell, it's always possible it was omitted.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:20:38.657

克里斯是正确的。`shell32.lib`不包括在 CE 中。

> 不知何故，ARMv4 sdk 中似乎缺少 shell32.lib。有解决方法吗？

如果您真的需要，您将不得不编写自己的表单来执行此操作。

# groovy - Groovy：如何获取调用静态方法的类型？

> ID：16077041
> 
> 赞同：0
> 
> 时间：2013-04-18T07:33:01.847
> 
> 标签：groovy, static-methods

当使用子类调用基类上定义的静态方法时，如何找到它是在子类类型上调用的？：

```
class Base {
    static def method(){
        println "class on which this method is called? ${this}"
    }
}

class Child extends Base {}

Child.method() 
```

在上面的代码中，`this`正确地指向了 Base 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:53:50.250

我不认为它可以用实际的静态方法来完成，但一个不错的选择是使用 groovy *expandoMetaClass*添加一个静态闭包方法。在所说的闭包中，您可以作为*delegate*访问调用类。IE

```
Base.metaClass.static.anotherMethod = {
   println "class on which another method is called? ${delegate}"
} 
```

现在调用 Base.anotherMethod() 将使*委托*引用 Base，调用 Child.anotherMethod 将使其指向 Child。

# r - 如何找到正数的数量

> ID：16077046
> 
> 赞同：0
> 
> 时间：2013-04-18T07:33:20.093
> 
> 标签：r

我是世界的新手`R`，并且有一个相当简单的问题，但这让我很困扰。

我有很多数字：

```
abc=rnorm(100, mean=0, sd=1) 
```

我想知道这些数字中有多少是正数。我试过了：

```
length(which(abc>0) 
```

但这没有用。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T07:36:02.197

你想要的是：

```
sum(abc > 0) 
```

先试试`abc > 0`。这将为您提供所有`abc`正值的布尔向量 TRUE，两者`abc`的长度和布尔向量相同。由于 TRUE 等于 1 并且 FALSE 等于 0，因此该向量的元素之和将为您提供所需的计数。这是 R 中的一个常见技巧，这就是为什么我觉得它可能是您的情况的答案。

另一个有用的技巧是做同样的事情，但使用`mean`, 例如`mean(abc > 0)`这会给你一个*比例*的值为`abc`正的值。

您最初的方法也可以工作（提供正确的括号），但根据我的口味 which() 不是用于此类用途的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T08:18:34.547

另一种选择是在`table`这里使用，给你正数和负数的数量：

```
table(abc > 0 )
FALSE  TRUE 
   45    55 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-16T11:48:27.967

我认为这是你应该尝试的：

```
length(abc[abc>0]) 
```

在 R 中，一切都以矩阵的形式输入，这就是我们使用`[]`而不是`()`.

# linux - Gstreamer 视频输出位置跟踪和寻找

> ID：16077047
> 
> 赞同：3
> 
> 时间：2013-04-18T07:33:30.990
> 
> 标签：linux, camera, gstreamer

我正在使用 gstreamer (gst-launch) 捕获相机并将流保存为视频和图像帧。管道的问题是，当管道完成（通过中断）视频记录时，它不能支持位置跟踪和搜索。因此，视频在未知长度的 vlc 播放器中播放。我认为问题出在管道本身。我们如何才能实现支持位置跟踪和搜索。

在下面，您可以看到 gstreamer 管道代码：

```
gst-launch -v --gst-debug-level=0 \
       v4l2src device=/dev/video0 \
       ! videorate \
       ! video/x-raw-yuv, width=320, height=240, framerate=5/1 \
       ! tee name=tp
       tp. \
       ! queue \
       ! videobalance saturation=0.0 \
       ! textoverlay halign=left valign=top text="(c)PARK ON OM " shaded-background=true \
       ! clockoverlay halign=right valign=top time-format="%D %T "  text="Date:" shaded-background=true \
       ! queue \
       ! ffmpegcolorspace \
       ! ffenc_mpeg4 \
       ! avimux \
       ! filesink location=/ram/pmc/recordCAM1.mp4 \
       tp. \
       ! queue \
       ! jpegenc \
       ! multifilesink location=/ram/pmc/webcam1.jpeg & 
```

管道的解释如下：

```
 ______________  ________  _______     ________________
                                                        |convert into|->|append|->|encode| -> |save file as    | 
_________________    ________________   _____________   | grayscale  |  |text  |  |ffenc |    | recordCAM1.mp4 |
| use /dev/video |-> |set framerate |-> |multiplexer|->
| as input source|   |and resolution|   | named tp  |->
                                                        __________  _________________
                                                        |jpeg enc|->|save to filesink|
                                                        | encode |  |   as jpeg      | 
```

最后，两个多路复用器输出都将文件保存到磁盘。我应该在管道中添加什么以在任何媒体播放器上实现位置跟踪。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:59:48.370

确保 gstreamer 在您中断流时正确地向所有元素发出流即将结束的信号。

通常这是通过发送 EOS 事件来完成的。

```
man gst-launch
   [...]
   -e, --eos-on-shutdown
           Force an EOS event on sources before shutting the pipeline down.
           This is useful to make sure muxers create readable files when a muxing
           pipeline  is  shut  down forcefully via Control-C. 
```

# asp.net - ASP.NET AJAX 动画在 Localhost 中工作正常，但在 ip 主机中不工作

> ID：16077051
> 
> 赞同：1
> 
> 时间：2013-04-18T07:33:53.523
> 
> 标签：asp.net

如果我在我的机器上运行它，`localhost:56993/WebSite7/Default.aspx`它工作正常

如果我使用`192.168.1.3/WebSite7/Default.aspx`页面打开的地址运行它，但是当我点击文本框时，不会发生淡入淡出：

```
<%@ Page Language="VB" AutoEventWireup="false"
CodeFile="Default.aspx.vb" Inherits="_Default" %> <%@ Register
assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral,
PublicKeyToken=31bf3856ad364e35" namespace="System.Web.UI"
tagprefix="asp" %> <%@ Register Assembly="AjaxControlToolkit"
Namespace="AjaxControlToolkit" TagPrefix="asp" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"> <head runat="server">
    <title>Untitled Page</title>

</head> <body>
    <form id="form1" runat="server">
    <div>

        <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
        </asp:ToolkitScriptManager>
        <br />
        <asp:Button ID="Button1" runat="server" Text="Button" />
        <asp:AnimationExtender ID="Button1_AnimationExtender" runat="server" 
            TargetControlID="TextBox1"  >
               <Animations>
    <OnClick>
    <Sequence>
    <StyleAction Attribute="display" Value="block" AnimationTarget="Panel1" />
    <Parallel Duration="1" AnimationTarget="Panel1" Fps="20">
     <FadeIn />
     </Parallel>
     </Sequence>
    </OnClick>   </Animations>

        </asp:AnimationExtender>

        <asp:Panel ID="Panel1" runat="server" 

            style="position:absolute; top: 180px; left: 89px; height: 148px; width: 151px; ">
            <asp:Calendar ID="Calendar1" runat="server" BackColor="#FFFFCC" 
                BorderColor="#FFCC66" BorderWidth="1px" DayNameFormat="Shortest" 
                Font-Names="Verdana" Font-Size="8pt" ForeColor="#663399" Height="99px" 
                ShowGridLines="True" Width="61px" >
                <SelectedDayStyle BackColor="#CCCCFF" Font-Bold="True" />
                <SelectorStyle BackColor="#FFCC66" />
                <TodayDayStyle BackColor="#FFCC66" ForeColor="White" />
                <OtherMonthDayStyle ForeColor="#CC9966" />
                <NextPrevStyle Font-Size="9pt" ForeColor="#FFFFCC" />
                <DayHeaderStyle BackColor="#FFCC66" Font-Bold="True" Height="1px" />
                <TitleStyle BackColor="#990000" Font-Bold="True" Font-Size="9pt" 
                    ForeColor="#FFFFCC" />
            </asp:Calendar>
        </asp:Panel>

        <br />

        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>

    </div>
    </form> </body> </html> 
```

我在这里做错了什么？

# jpa - JPA EclipseLink Weaver 在其 setter 中生成对 porperty getter 的调用 -> NullPointerException

> ID：16077054
> 
> 赞同：1
> 
> 时间：2013-04-18T07:34:01.617
> 
> 标签：jpa, orm, glassfish, eclipselink, embeddable

我有一个`@Embeddable`类，它使用属性访问来包装另一个不能由 JPA 通过字段访问直接映射的对象。它看起来像这样：

```
@Embeddable
@Access(AccessType.PROPERTY)
public class MyWrapper {

    @NotNull
    @Transient
    private WrappedType wrappedField;

    protected MyWrapper() {
    }

    public MyWrapper(WrappedType wrappedField) {
        this.wrappedField = wrappedField;
    }

    @Transient
    public WrappedType getWrappedField() {
        return wrappedField;
    }

    public void setWrappedField(WrappedType wrappedField) {
        this.wrappedField = wrappedField;
    }

    @Column(name = "wrappedTypeColumn")
    protected String getJPARepresentation() {
        return wrappedField.toString();
    }

    protected void setJPARepresentation(String jpaRepresentation) {
        wrappedField = new WrappedType(jpaRepresentation);
    }
} 
```

坚持`@Entity`一个`MyWrapper`字段工作正常。但是当我执行查询以从数据库加载实体时，我得到一个`NullPointerException`. 堆栈跟踪和一些调试显示 Eclipselink`MyWrapper`通过调用其默认构造函数创建一个新实例，然后调用该`setJPARepresentation()`方法（如预期的那样）。

但是现在意外发生了：堆栈跟踪显示`getJPARepresentation()`从 setter 内部调用了，这当然会导致执行`NullPointerException`时返回`wrappedField.toString()`。

```
java.lang.NullPointerException
    at MyWrapper.getJPARepresentation(MyWrapper.java:27)
    at MyWrapper.setJPARepresentation(MyWrapper.java)
    ... 109 more 
```

事实是，代码中显然没有对 getter 的调用，并且堆栈跟踪显示没有行号指示从 setter 中调用 getter 的位置。所以我的结论是，Eclipselink 的字节码编织器生成了对 getter 的调用。

构建解决方法很容易，但**我的问题是：为什么 Eclipselink 会这样做？**

PS：我在 GlassFish Server Open Source Edition 3.1.2（build 23）中使用 EclipseLink 2.3.2.v20111125-r10461

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:33:27.683

启用编织时（Glassfish 上的默认设置），EclipseLink 会将代码编织到属性获取/设置方法中，

*   变更跟踪
*   获取组（部分对象）
*   懒惰（关系）

为了支持更改跟踪，将编织 set 方法来检查新值是否与旧值不同，因此它必须调用 get 方法来获取旧值。

现在这仍然很奇怪，因为您正在构建一个新对象，我不希望设置更改侦听器，因此希望绕过更改跟踪检查。您可以反编译代码以准确查看生成的内容。

最简单的解决方法是在您的 get 方法中进行空检查，这通常对您的代码来说可能是最好的。您还可以切换到字段访问，这不会在 get/set 方法中产生副作用。您还可以使用 Converter 来处理转换，而不是在 get/set 方法中进行转换。

# ruby-on-rails - 如何确保进程在 Ruby 中运行

> ID：16077055
> 
> 赞同：0
> 
> 时间：2013-04-18T07:34:04.623
> 
> 标签：ruby-on-rails, ruby, process, monitor

我在 rails 中调用 ffmpeg 命令来 grep 流并将其推送到 Wowza 以便苹果设备也可以看到它，命令是这样的

```
Thread.new do
  `/usr/local/bin/ffmpeg -re -i http://10.191.255.90:30080/#{user.phone} -vcodec libx264 -vpre ipod640 -g 15 -acodec libvo_aacenc -ar 8000 -ac 1 -f flv rtmp://127.0.0.1/live/#{user.phone}`
end 
```

有时该进程会因为网络中断或其他原因而被杀死，我想知道有没有办法可以监视该进程，以便一旦它停止我就可以重新启动它

我目前的想法是记录进程的 pid，让有人喜欢`resque`检查给定 pid 的进程是否每 60 秒运行一次，但我有很多这样的进程，所以我想知道它以后会遇到性能问题。

是否有更好的解决方案来管理 Ruby 中的这些流程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:07:53.757

你可以这样做：

```
Thread.new do
  begin
    Process.wait Process.spawn 'find /oeinfsroif'
    raise unless $?.exitstatus == 0
  rescue
    retry
  end
end.join 
```

管理失败前的尝试次数：

```
Thread.new do
  max_attempts = 10
  attempts = 0
  begin
    Process.wait Process.spawn 'find /oeinfsroif'
    raise unless $?.exitstatus == 0
  rescue
    attempts += 1
    attempts < max_attempts ? retry : raise 
  end
end.join 
```

输出：

```
find: `/oeinfsroif': No such file or directory
find: `/oeinfsroif': No such file or directory
find: `/oeinfsroif': No such file or directory
find: `/oeinfsroif': No such file or directory
find: `/oeinfsroif': No such file or directory
find: `/oeinfsroif': No such file or directory
find: `/oeinfsroif': No such file or directory
find: `/oeinfsroif': No such file or directory
find: `/oeinfsroif': No such file or directory
find: `/oeinfsroif': No such file or directory
rb:6:in `block in <main>': unhandled exception 
```

# android - 从 GridView Android 将图像存储到 SD 卡时的质量损失

> ID：16077057
> 
> 赞同：1
> 
> 时间：2013-04-18T07:34:10.903
> 
> 标签：android, android-imageview, out-of-memory, android-image

要从图库中获取图像，我使用了以下代码，

```
String[] projection = new String[]{
    MediaStore.Images.Media._ID,
    MediaStore.Images.Media.BUCKET_DISPLAY_NAME,
    MediaStore.Images.Media.DATE_TAKEN,
    MediaStore.Images.Media.DATA,
    MediaStore.Images.Media.DEFAULT_SORT_ORDER
};

Uri images = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;

Cursor cur = managedQuery(images,
    projection, // Which columns to return
    "",         // Which rows to return (all rows)
    null,       // Selection arguments (none)
    ""          // Ordering
    );

if (cur.moveToFirst()) {
String bucket;
String id;
String filePath;
int bucketColumn = cur.getColumnIndex(
    MediaStore.Images.Media.BUCKET_DISPLAY_NAME);

int dateColumn = cur.getColumnIndex(
    MediaStore.Images.Media._ID);
int dataColumnIndex = cur.getColumnIndex(MediaStore.Images.Media.DATA);

do {
    // Get the field values
    bucket = cur.getString(bucketColumn);
    id = cur.getString(dateColumn);
    data=cur.getString(dataColumnIndex);

    // Do something with the values.
    Log.i("ListingImages", " bucket=" + bucket 
       + "  date_taken=" + id + "Data = "+filePath);

} while (cur.moveToNext());

} 
```

然后使用位图采样方法在网格视图中显示图像

```
private Bitmap decodeFile(String filePath){
        //decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(filePath, o);

        //Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE=70;

        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;

        while(o.outWidth/scale/2>=REQUIRED_SIZE && o.outHeight/scale/2>=REQUIRED_SIZE)
    scale*=2;

        //decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        Bitmap bitmap=BitmapFactory.decodeFile(filePath, o2);

        return bitmap;
} 
```

然后只想从网格视图中选择图像，然后将选择的图像存储到不同尺寸的 SD 卡中，如 640*480 和 120*90，这意味着一般图像和缩略图图像

要将图像存储到 SD 卡中，我使用了以下代码，

```
File root = new File(Environment.getExternalStorageDirectory()+ "/wo_photos");

if(!root.exists())
     root.mkdirs();

Bitmap selectedBitmap=Bitmap.createBitmap(yourSelectedImage.getWidth(), yourSelectedImage.getHeight(), Bitmap.Config.RGB_565);

Canvas canvas = new Canvas(selectedBitmap);
    Rect dstRect = new Rect(0,0, yourSelectedImage.getWidth(), yourSelectedImage.getHeight());

    canvas.drawBitmap(yourSelectedImage, dstRect, dstRect, null);

ByteArrayOutputStream bytes = new ByteArrayOutputStream();

Bitmap bitmap=Bitmap.createScaledBitmap(selectedBitmap, 640, 480, false);

bitmap.compress(Bitmap.CompressFormat.JPEG, 100, bytes);

//you can create a new file name "test.jpg" in sdcard folder.
File f = new File(root,pos+"wo_image.jpg");
f.createNewFile();
//write the bytes in file

FileOutputStream fo = new FileOutputStream(f);
fo.write(bytes.toByteArray());

// remember close de FileOutput
fo.close();
fOut.close();

When i see images in SD Card it has quality loss.However when i store images without sampling bitmap it gives
OutOfMemory exeption.I belive that quality loss in images by giving sampling size.

To get images without quality loss what should i do?

Thanks, 
```

# sql - 在 Oracle11g 中调整查询需要帮助

> ID：16077059
> 
> 赞同：0
> 
> 时间：2013-04-18T07:34:14.217
> 
> 标签：sql, oracle11g

我正在修改原始问题，因为更改的条件很少 - 我在 Oracle11g 上运行以下查询，显示结果需要 27 秒。任何人都可以建议改善查询响应时间的解决方案吗？我在下面提供相关细节 -

```
select  Column1 , round(count(Column2)/10) 
from SE_CA 
where Column3 <= 4855 
and Column4 > 4490
group by Column1;

SE_CA table has total 123914265 records.

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------
Plan hash value: 3324421310

-------------------------------------------------
| Id  | Operation          | Name  | Cost (%CPU)|
-------------------------------------------------
|   0 | SELECT STATEMENT   |       |   211K  (3)|
|   1 |  HASH GROUP BY     |       |   211K  (3)|
|*  2 |   TABLE ACCESS FULL| SE_CA |   208K  (1)|
-------------------------------------------------

Predicate Information (identified by operation id):

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------
---------------------------------------------------

   2 - filter("Column3"<=4855 AND "Column4">4490)

SQL> desc SE_CA;
Name                                      Null?     Type
Column1                                             VARCHAR2(3)
Column2                                             NUMBER
Column3                                             NUMBER
Column4                                             NUMBER
Column5                                             NUMBER
Column6                                             NUMBER
Column7                                             NUMBER
Column8                                             NUMBER
Column9                                             VARCHAR2(5)
Column10                                            VARCHAR2(12)

Index Definition -

CREATE  INDEX IDX1_SE_CA ON SE_CA(Column3);
CREATE  INDEX IDX2_SE_CA ON SE_CA(Column4);
CREATE  INDEX IDX4_SE_CA ON SE_CA(Column1); 
```

*   应用这两个条件后，预期输出约为整个表行（10581643 行）的 10%。
*   单独应用每个条件后，第 3 列的输出为 10581643，第 4 列的输出为 12391426。
*   Column3 的最小值和最大值分别为 4623 和 4988。
*   而第 4 列的最小值和最大值分别为 4624 和 4991。

你能告诉我创建的索引是否正确还是我需要不同的索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:54:14.950

了解您是否可以提高此查询的性能的关键是了解有关数据的一些基本统计信息。

1.  您有谓词（max，min）的两列的值范围是多少？
2.  您期望有多少百分比的行单独满足每个条件？
3.  您期望有多少百分比的行同时满足这两个条件？

如果谓词 Column3 <= 4855 将包括表的 30% 的行，那么全表扫描或快速全索引扫描将是优化器的最佳选择，*如果这是表上唯一的谓词*。

现在，可能是谓词 Column4 > 4490 将包括表的 90% 的行——仅基于这一点，优化器可能会得出结论，当两个谓词都存在时，要检索的行的比例是0.3 * 0.9 = 27%。这仍然表明完全扫描是合适的。

然而，这两个值之间可能存在相关性，例如 column1 的低值很少有 column2 的高值，并且只有 3% 的行满足该条件。在这种情况下，可能值得尝试使用基于索引的访问方法。

这是优化器动态采样可以通过包含优化器提示来检测的情况：

```
select /*+ dynamic_sampling(SE_CA 4) */  Column1 , ... 
```

因此，获得有关值分布的这些问题的答案，并尝试动态采样——这个查询看起来是一个很好的候选者，因为我认为“EXPOSED_TIME”和“INFECTIOUS_TIME”之间存在相关性；）

## 更远

由于您希望从表中检索大约 10% 的行，因此基于索引的访问表的方法不太可能会有所帮助。即使是索引范围扫描也可能不如优化器选择的索引快速全扫描那么有效。这将取决于 i/o 子系统的效率以及单块和多块 i/o 的相对速度。（你能确保段空间是自动分配的或以至少 1MB 为单位均匀分配的吗？）

但是，如果您有可用的分区选项，则可以在 EXPOSED_TIME 上对该表进行范围分区，以允许更有效的分区修剪扫描以选择表行的子集。然而，这是一个很大的改变，并且必须非常小心地考虑对其他操作的副作用。

您可能还考虑使用低程度的查询并行性，尽管这也有副作用（段级检查点，这可能会对当时发生大量更改的表产生负面影响） .

# wpf - 列表框项的事件

> ID：16077063
> 
> 赞同：0
> 
> 时间：2013-04-18T07:34:28.287
> 
> 标签：wpf, events, mvvm, listbox, listboxitems

最推荐用于列表框项目的事件是什么。我的列表中有三个静态项目，单击时应该导航到一个页面。我知道列表框项目或列表框没有点击事件。然后我将它绑定到我的视图模型中。我想到的是选定的事件，对吗？同样对于用于绑定的方法，选择项目时导航的语法如何？提前非常感谢！

```
<ListBox x:Name="lbviewlist">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Selected">
            <Command:EventToCommand Command="{Binding ViewListCommand}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <ListBox.Items>
        <ListBoxItem Content="By product" FontSize="25"/>
        <ListBoxItem>By Vendor</ListBoxItem>
        <ListBoxItem>By Best Combination</ListBoxItem> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:42:22.043

有两个[ListBox 事件](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox_events%28v=vs.95%29.aspx)可以实现这一点：

*   [UIElement.Tap 事件](http://msdn.microsoft.com/en-us/library/system.windows.uielement.tap%28v=vs.95%29.aspx)
*   [Selector.SelectionChanged 事件](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectionchanged%28v=vs.95%29.aspx)

在这两种情况下，您都可以通过[SelectedIndex](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedindex%28v=vs.95%29.aspx)或[SelectedItem](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selecteditem%28v=vs.95%29.aspx)属性获取项目。希望这能让你上路。

# java - 在 Java 6 上运行时，Java 7 ssl 握手失败

> ID：16077064
> 
> 赞同：3
> 
> 时间：2013-04-18T07:34:32.060
> 
> 标签：java, ssl, smtp, handshake

我正在使用 Ability 邮件服务器 (AMS) 工具来测试我的 SMTP 服务器网络在各种配置（SMTP、带 TLS 的 SMTP、基于 SSL 的 SMTP 等）中的可用性。我的服务器端是用 java 编写的，并使用 SubethaSmtp 库来实现。

在我决定将服务器从 java 6 升级到 java 7 之前，AMS 运行良好并且可以很好地满足我的测试需求。从那时起，我无法使用此实用程序来测试我的 SMTP over SSL 和 SMTP 与 TLS 连接，因为每次尝试我越来越：

```
Outgoing Route: Relay localhost:40125 rejected connection with 
```

我也写在 java 上的其他集成测试是成功的，但是这个问题仍然困扰着我。我无法找出，有什么不同。

**我的 java 6 成功的 SSL 握手调试输出**

```
org.subethamail.smtp.server.Session-/127.0.0.1:51806, READ: TLSv1 Handshake, length = 205
org.subethamail.smtp.server.ServerThread *:40125, setSoTimeout(60000) called
*** ClientHello, TLSv1
RandomCookie:  GMT: 1366202273 bytes = { 29, 88, 44, 226, 58, 30, 188, 76, 46, 113, 18, 193, 226, 156, 129, 241, 160, 23, 39, 190, 177, 37, 141, 173, 175, 6, 125, 195 }
Session ID:  {}
Cipher Suites: [TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, Unknown 0x0:0x88, Unknown 0x0:0x87, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, Unknown 0x0:0x84, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, Unknown 0x0:0x9a, Unknown 0x0:0x99, Unknown 0x0:0x45, Unknown 0x0:0x44, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, Unknown 0x0:0x96, Unknown 0x0:0x41, SSL_RSA_WITH_IDEA_CBC_SHA, TLS_ECDHE_RSA_WITH_RC4_128_SHA, TLS_ECDHE_ECDSA_WITH_RC4_128_SHA, TLS_ECDH_RSA_WITH_RC4_128_SHA, TLS_ECDH_ECDSA_WITH_RC4_128_SHA, SSL_RSA_WITH_RC4_128_SHA, SSL_RSA_WITH_RC4_128_MD5, SSL_DHE_RSA_WITH_DES_CBC_SHA, SSL_DHE_DSS_WITH_DES_CBC_SHA, SSL_RSA_WITH_DES_CBC_SHA, SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA, SSL_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_RSA_EXPORT_WITH_RC2_CBC_40_MD5, SSL_RSA_EXPORT_WITH_RC4_40_MD5, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]
Compression Methods:  { 0 }
Extension ec_point_formats, formats: [uncompressed, ansiX962_compressed_prime, ansiX962_compressed_char2]
Extension elliptic_curves, curve names: {sect163k1, sect163r1, sect163r2, sect193r1, sect193r2, sect233k1, sect233r1, sect239k1, sect283k1, sect283r1, sect409k1, sect409r1, sect571k1, sect571r1, secp160k1, secp160r1, secp160r2, secp192k1, secp192r1, secp224k1, secp224r1, secp256k1, secp256r1, secp384r1, secp521r1}
Unsupported extension type_35, data: 
***
%% Created:  [Session-1, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA]
*** ServerHello, TLSv1
RandomCookie:  GMT: 1366202273 bytes = { 239, 167, 83, 82, 189, 146, 43, 152, 2, 25, 247, 132, 153, 169, 208, 74, 207, 219, 235, 179, 154, 225, 199, 147, 238, 91, 114, 53 }
Session ID:  {81, 111, 152, 161, 109, 178, 13, 166, 232, 166, 36, 148, 10, 94, 92, 222, 61, 86, 245, 119, 215, 130, 31, 150, 99, 74, 121, 252, 181, 255, 30, 22}
Cipher Suite: SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA
Compression Method: 0
Extension renegotiation_info, renegotiated_connection: <empty>
***
Cipher suite:  SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA
*** Certificate chain
Finalizer, called close()
Finalizer, called closeInternal(true)
Finalizer, called closeSocket(selfInitiated)
chain [0] = [
[
  Version: V3
  Subject: CN=U, OU=U, O=U, L=Unknown, ST=Unknown, C=Unknown
  Signature Algorithm: SHA256withRSA, OID = 1.2.840.113549.1.1.11

  Key:  Sun RSA public key, 2048 bits
  modulus: 16529753809247247111312284751522134978177807492128325820211425902224490010793234062180928535488108823704586950959318642289246645463583464189812207858850010614046945230962602914709480782247492980056070065328765412779951346605688731554625592721596539401530793434052536122002537683254913189373178145181405215449627192067321602357247727580287704588004112308611398315890251445283600299225291631455558225388037583805230035932707731947473961715066552985380371964947081577833023069202844021620640680874794841415527496125781091471359903204493217693952167487019116813691991952393229097684735681407566394557493095017917012563127
  public exponent: 65537
  Validity: [From: Tue Sep 18 11:41:33 GMT+04:00 2012,
               To: Wed Sep 18 11:41:33 GMT+04:00 2013]
  Issuer: CN=U, OU=U, O=U, L=Unknown, ST=Unknown, C=Unknown
  SerialNumber: [    6e640d68]

Certificate Extensions: 1
[1]: ObjectId: 2.5.29.14 Criticality=false
SubjectKeyIdentifier [
KeyIdentifier [
0000: 07 CC 44 CE D3 FD EA 07   18 67 A0 BE F0 70 E9 97  ..D......g...p..
0010: D2 D7 1B E3                                        ....
]
]

]
  Algorithm: [SHA256withRSA]
  Signature:
0000: 12 8A E0 40 EB 91 7F 6D   A5 06 E8 F8 A2 CD D5 EF  ...@...m........
0010: AC E1 3A 95 7C 99 09 D7   04 AA 5E 59 4D FC 45 92  ..:.......^YM.E.
0020: CD 9F 58 95 8F F1 F4 17   D4 73 8D B4 D3 BC 8C DD  ..X......s......
0030: 99 C7 47 5D 4E 22 43 BA   74 C1 4B 2B 76 98 1A AA  ..G]N"C.t.K+v...
0040: 1F 6A 62 1E 1E 2B BD 13   3D 36 97 36 05 7F 31 F1  .jb..+..=6.6..1.
0050: 68 A9 60 E1 94 74 84 6A   60 68 B4 8A ED 94 04 43  h.`..t.j`h.....C
0060: 0F 89 D2 83 4F D2 A4 4F   E7 24 D5 AE 13 7A CD F2  ....O..O.$...z..
0070: 4D AE DA B2 4C 27 C8 97   7D 10 20 13 A6 B5 83 A5  M...L'.... .....
0080: 79 96 52 CE C0 BC 2F 1E   67 7C 49 DC 3D 2E 55 24  y.R.../.g.I.=.U$
0090: 73 5E F1 95 10 6C 9A 21   1E 5F 2D 9B 75 7A D8 31  s^...l.!._-.uz.1
00A0: 59 42 B0 6C AD 86 6E 05   D9 59 86 67 16 E5 AD C1  YB.l..n..Y.g....
00B0: E8 6C 21 15 19 8A 85 D8   70 59 B4 51 D6 3D 16 CE  .l!.....pY.Q.=..
00C0: 2D AD 7B E8 08 32 0D B7   2F F0 15 1C 12 EE 9F 18  -....2../.......
00D0: C3 DE 61 16 C4 D3 A4 1A   F2 1E E0 C5 BA 28 49 B8  ..a..........(I.
00E0: 70 0E 19 21 6E 1B 47 CA   1E E9 A0 33 D9 23 D5 CF  p..!n.G....3.#..
00F0: CE 91 71 AA 6B 54 0B 24   49 4A CE 2F 92 6D 4D DA  ..q.kT.$IJ./.mM.

]
***
*** Diffie-Hellman ServerKeyExchange
DH Modulus:  { 233, 230, 66, 89, 157, 53, 95, 55, 201, 127, 253, 53, 103, 18, 11, 142, 37, 201, 205, 67, 233, 39, 179, 169, 103, 15, 190, 197, 216, 144, 20, 25, 34, 210, 195, 179, 173, 36, 128, 9, 55, 153, 134, 157, 30, 132, 106, 171, 73, 250, 176, 173, 38, 210, 206, 106, 34, 33, 157, 71, 11, 206, 125, 119, 125, 74, 33, 251, 233, 194, 112, 181, 127, 96, 112, 2, 243, 206, 248, 57, 54, 148, 207, 69, 238, 54, 136, 193, 26, 140, 86, 171, 18, 122, 61, 175 }
DH Base:  { 48, 71, 10, 213, 160, 5, 251, 20, 206, 45, 157, 205, 135, 227, 139, 199, 209, 177, 197, 250, 203, 174, 203, 233, 95, 25, 10, 167, 163, 29, 35, 196, 219, 188, 190, 6, 23, 69, 68, 64, 26, 91, 44, 2, 9, 101, 216, 194, 189, 33, 113, 211, 102, 132, 69, 119, 31, 116, 186, 8, 77, 32, 41, 216, 60, 28, 21, 133, 71, 243, 169, 241, 162, 113, 91, 226, 61, 81, 174, 77, 62, 90, 31, 106, 112, 100, 243, 22, 147, 58, 52, 109, 63, 82, 146, 82 }
Server DH Public Key:  { 196, 174, 239, 97, 244, 9, 222, 141, 94, 81, 143, 199, 56, 23, 160, 164, 140, 162, 44, 78, 243, 75, 44, 208, 229, 164, 90, 214, 232, 7, 55, 101, 24, 164, 116, 13, 189, 175, 113, 183, 170, 161, 229, 93, 86, 216, 238, 9, 179, 130, 120, 140, 173, 190, 119, 34, 131, 169, 114, 230, 223, 139, 79, 128, 46, 17, 200, 81, 229, 13, 176, 73, 129, 204, 10, 243, 197, 24, 174, 152, 108, 11, 14, 58, 168, 9, 11, 49, 222, 189, 117, 125, 126, 49, 230, 250 }
Signed with a DSA or RSA public key
*** ServerHelloDone
org.subethamail.smtp.server.Session-/127.0.0.1:51806, WRITE: TLSv1 Handshake, length = 1570
org.subethamail.smtp.server.Session-/127.0.0.1:51806, READ: TLSv1 Handshake, length = 102
*** ClientKeyExchange, DH
DH Public key:  { 95, 208, 98, 2, 159, 50, 206, 212, 96, 80, 180, 201, 119, 130, 53, 165, 5, 81, 35, 243, 18, 0, 100, 250, 160, 150, 10, 60, 129, 126, 9, 130, 58, 236, 226, 104, 238, 19, 255, 109, 213, 240, 24, 22, 47, 10, 6, 114, 91, 199, 56, 238, 79, 158, 30, 199, 90, 16, 174, 112, 202, 125, 87, 70, 101, 86, 131, 15, 73, 103, 223, 186, 196, 132, 4, 54, 46, 6, 58, 211, 70, 213, 246, 244, 250, 125, 1, 175, 155, 197, 68, 73, 224, 19, 133, 189 }
SESSION KEYGEN:
PreMaster Secret:
0000: 68 1E 91 97 0A 91 6A E3   B2 41 17 32 41 B9 80 24  h.....j..A.2A..$
0010: 4F C8 84 F2 7F C7 D8 F5   28 BB 84 82 4E C9 C3 53  O.......(...N..S
0020: 0B B8 10 3E 08 0B C0 87   D8 2D FB A1 BA D4 1C FB  ...>.....-......
0030: 01 DA 8F F2 10 E0 63 EA   BF 41 90 D5 25 1C EC 52  ......c..A..%..R
0040: 00 6A 33 92 C3 84 78 C4   2D 5B 8D 87 9A CE CC E9  .j3...x.-[......
0050: 23 36 49 58 9C 20 20 15   DD 4D AC 01 10 FE D6 DD  #6IX.  ..M......
CONNECTION KEYGEN:
Client Nonce:
0000: 51 6F 98 A1 1D 58 2C E2   3A 1E BC 4C 2E 71 12 C1  Qo...X,.:..L.q..
0010: E2 9C 81 F1 A0 17 27 BE   B1 25 8D AD AF 06 7D C3  ......'..%......
Server Nonce:
0000: 51 6F 98 A1 EF A7 53 52   BD 92 2B 98 02 19 F7 84  Qo....SR..+.....
0010: 99 A9 D0 4A CF DB EB B3   9A E1 C7 93 EE 5B 72 35  ...J.........[r5
Master Secret:
0000: DD 91 8B 8B 81 B8 DA 9F   EC 60 E9 F4 DF 0E C3 27  .........`.....'
0010: F8 BD 3E B1 A7 28 03 FB   A7 E7 24 DB D6 80 D5 3F  ..>..(....$....?
0020: 8C 90 F0 EF 31 65 51 03   20 CB CA 12 D8 0A 05 AB  ....1eQ. .......
Client MAC write Secret:
0000: F2 6C AE B6 C0 3B 2D D7   8E 7C D7 00 6A 3B 80 D3  .l...;-.....j;..
0010: 16 73 B2 57                                        .s.W
Server MAC write Secret:
0000: 69 2C A7 C1 32 B9 D3 3A   FD 30 15 F0 78 4E DE 76  i,..2..:.0..xN.v
0010: 6B F2 EE F2                                        k...
Client write key:
0000: C3 33 CC EC 07 6C 4F 51   1C B6 14 74 29 6C 82 59  .3...lOQ...t)l.Y
0010: 02 1D A1 99 EA 4A 10 45                            .....J.E
Server write key:
0000: 4B 6F 90 B3 C3 C0 00 35   EA DF 0F C7 7F 2D 77 3A  Ko.....5.....-w:
0010: 12 C8 34 C9 8B 6E E6 7E                            ..4..n..
Client write IV:
0000: C2 23 F2 38 C0 E2 46 99                            .#.8..F.
Server write IV:
0000: 08 CC 53 9B 23 D6 23 6B                            ..S.#.#k
org.subethamail.smtp.server.Session-/127.0.0.1:51806, READ: TLSv1 Change Cipher Spec, length = 1
org.subethamail.smtp.server.Session-/127.0.0.1:51806, READ: TLSv1 Handshake, length = 40
*** Finished
verify_data:  { 76, 73, 162, 146, 43, 189, 56, 224, 219, 30, 197, 162 }
***
org.subethamail.smtp.server.Session-/127.0.0.1:51806, WRITE: TLSv1 Change Cipher Spec, length = 1
*** Finished
verify_data:  { 253, 203, 94, 73, 30, 8, 230, 39, 100, 105, 142, 219 }
***
org.subethamail.smtp.server.Session-/127.0.0.1:51806, WRITE: TLSv1 Handshake, length = 40
%% Cached server session: [Session-1, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA]
org.subethamail.smtp.server.Session-/127.0.0.1:51806, WRITE: TLSv1 Application Data, length = 80
org.subethamail.smtp.server.Session-/127.0.0.1:51806, READ: TLSv1 Application Data, length = 24
org.subethamail.smtp.server.Session-/127.0.0.1:51806, READ: TLSv1 Application Data, length = 48
org.subethamail.smtp.server.Session-/127.0.0.1:51806, WRITE: TLSv1 Application Data, length = 24
org.subethamail.smtp.server.Session-/127.0.0.1:51806, WRITE: TLSv1 Application Data, length = 80
org.subethamail.smtp.server.Session-/127.0.0.1:51806, READ: TLSv1 Alert, length = 24
org.subethamail.smtp.server.Session-/127.0.0.1:51806, RECV TLSv1 ALERT:  warning, close_notify
org.subethamail.smtp.server.Session-/127.0.0.1:51806, called closeInternal(false)
org.subethamail.smtp.server.Session-/127.0.0.1:51806, SEND TLSv1 ALERT:  warning, description = close_notify
org.subethamail.smtp.server.Session-/127.0.0.1:51806, WRITE: TLSv1 Alert, length = 24
org.subethamail.smtp.server.Session-/127.0.0.1:51806, called closeSocket(selfInitiated)
org.subethamail.smtp.server.Session-/127.0.0.1:51806, called close()
org.subethamail.smtp.server.Session-/127.0.0.1:51806, called closeInternal(true)
org.subethamail.smtp.server.Session-/127.0.0.1:51806, called close()
org.subethamail.smtp.server.Session-/127.0.0.1:51806, called closeInternal(true) 
```

**我的 java 7 总是失败 SSL 握手调试输出**

```
Allow unsafe renegotiation: false
Allow legacy hello messages: true
Is initial handshake: true
Is secure renegotiation: false
org.subethamail.smtp.server.ServerThread *:40125, setSoTimeout(60000) called
Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 for SSLv2Hello
Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 for SSLv2Hello
Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256 for SSLv2Hello
Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256 for SSLv2Hello
Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256 for SSLv2Hello
Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256 for SSLv2Hello
Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256 for SSLv2Hello
Ignoring unavailable cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA
Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 for SSLv3
Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 for SSLv3
Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256 for SSLv3
Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256 for SSLv3
Ignoring unavailable cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA
Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256 for SSLv3
Ignoring unavailable cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA
Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256 for SSLv3
Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256 for SSLv3
Ignoring unavailable cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA256
Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unavailable cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA256
Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unavailable cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384
Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unavailable cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384
Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unavailable cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA256
Ignoring unavailable cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA
org.subethamail.smtp.server.Session-/127.0.0.1:51856, READ: TLSv1 Handshake, length = 205
*** ClientHello, TLSv1
RandomCookie:  GMT: 1366202735 bytes = { 148, 248, 66, 243, 154, 205, 184, 147, 105, 230, 198, 110, 97, 132, 40, 233, 246, 125, 120, 183, 97, 219, 182, 40, 20, 87, 103, 53 }
Session ID:  {}
Cipher Suites: [TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_CAMELLIA_256_CBC_SHA, TLS_DHE_DSS_WITH_CAMELLIA_256_CBC_SHA, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_RSA_WITH_CAMELLIA_256_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_SEED_CBC_SHA, TLS_DHE_DSS_WITH_SEED_CBC_SHA, TLS_DHE_RSA_WITH_CAMELLIA_128_CBC_SHA, TLS_DHE_DSS_WITH_CAMELLIA_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_SEED_CBC_SHA, TLS_RSA_WITH_CAMELLIA_128_CBC_SHA, SSL_RSA_WITH_IDEA_CBC_SHA, TLS_ECDHE_RSA_WITH_RC4_128_SHA, TLS_ECDHE_ECDSA_WITH_RC4_128_SHA, TLS_ECDH_RSA_WITH_RC4_128_SHA, TLS_ECDH_ECDSA_WITH_RC4_128_SHA, SSL_RSA_WITH_RC4_128_SHA, SSL_RSA_WITH_RC4_128_MD5, SSL_DHE_RSA_WITH_DES_CBC_SHA, SSL_DHE_DSS_WITH_DES_CBC_SHA, SSL_RSA_WITH_DES_CBC_SHA, SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA, SSL_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_RSA_EXPORT_WITH_RC2_CBC_40_MD5, SSL_RSA_EXPORT_WITH_RC4_40_MD5, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]
Compression Methods:  { 0 }
Extension ec_point_formats, formats: [uncompressed, ansiX962_compressed_prime, ansiX962_compressed_char2]
Extension elliptic_curves, curve names: {sect163k1, sect163r1, sect163r2, sect193r1, sect193r2, sect233k1, sect233r1, sect239k1, sect283k1, sect283r1, sect409k1, sect409r1, sect571k1, sect571r1, secp160k1, secp160r1, secp160r2, secp192k1, secp192r1, secp224k1, secp224r1, secp256k1, secp256r1, secp384r1, secp521r1}
Unsupported extension type_35, data: 
***
%% Initialized:  [Session-1, SSL_NULL_WITH_NULL_NULL]
matching alias: server_certificate
%% Negotiating:  [Session-1, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA]
*** ServerHello, TLSv1
RandomCookie:  GMT: 1366202735 bytes = { 218, 177, 74, 98, 93, 153, 110, 141, 95, 69, 218, 102, 107, 215, 209, 26, 0, 157, 60, 33, 94, 70, 40, 77, 46, 103, 173, 224 }
Session ID:  {81, 111, 153, 111, 235, 17, 119, 190, 82, 45, 15, 130, 77, 69, 37, 136, 91, 110, 135, 121, 204, 13, 56, 171, 101, 52, 110, 122, 85, 126, 15, 109}
Cipher Suite: TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA
Compression Method: 0
Extension renegotiation_info, renegotiated_connection: <empty>
***
Cipher suite:  TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA
*** Certificate chain
chain [0] = [
[
  Version: V3
  Subject: CN=U, OU=U, O=U, L=Unknown, ST=Unknown, C=Unknown
  Signature Algorithm: SHA256withRSA, OID = 1.2.840.113549.1.1.11

  Key:  Sun RSA public key, 2048 bits
  modulus: 16529753809247247111312284751522134978177807492128325820211425902224490010793234062180928535488108823704586950959318642289246645463583464189812207858850010614046945230962602914709480782247492980056070065328765412779951346605688731554625592721596539401530793434052536122002537683254913189373178145181405215449627192067321602357247727580287704588004112308611398315890251445283600299225291631455558225388037583805230035932707731947473961715066552985380371964947081577833023069202844021620640680874794841415527496125781091471359903204493217693952167487019116813691991952393229097684735681407566394557493095017917012563127
  public exponent: 65537
  Validity: [From: Tue Sep 18 11:41:33 GMT+04:00 2012,
         To: Wed Sep 18 11:41:33 GMT+04:00 2013]
  Issuer: CN=U, OU=U, O=U, L=Unknown, ST=Unknown, C=Unknown
  SerialNumber: [    6e640d68]

Certificate Extensions: 1
[1]: ObjectId: 2.5.29.14 Criticality=false
SubjectKeyIdentifier [
KeyIdentifier [
0000: 07 CC 44 CE D3 FD EA 07   18 67 A0 BE F0 70 E9 97  ..D......g...p..
0010: D2 D7 1B E3                                        ....
]
]

]
  Algorithm: [SHA256withRSA]
  Signature:
0000: 12 8A E0 40 EB 91 7F 6D   A5 06 E8 F8 A2 CD D5 EF  ...@...m........
0010: AC E1 3A 95 7C 99 09 D7   04 AA 5E 59 4D FC 45 92  ..:.......^YM.E.
0020: CD 9F 58 95 8F F1 F4 17   D4 73 8D B4 D3 BC 8C DD  ..X......s......
0030: 99 C7 47 5D 4E 22 43 BA   74 C1 4B 2B 76 98 1A AA  ..G]N"C.t.K+v...
0040: 1F 6A 62 1E 1E 2B BD 13   3D 36 97 36 05 7F 31 F1  .jb..+..=6.6..1.
0050: 68 A9 60 E1 94 74 84 6A   60 68 B4 8A ED 94 04 43  h.`..t.j`h.....C
0060: 0F 89 D2 83 4F D2 A4 4F   E7 24 D5 AE 13 7A CD F2  ....O..O.$...z..
0070: 4D AE DA B2 4C 27 C8 97   7D 10 20 13 A6 B5 83 A5  M...L'.... .....
0080: 79 96 52 CE C0 BC 2F 1E   67 7C 49 DC 3D 2E 55 24  y.R.../.g.I.=.U$
0090: 73 5E F1 95 10 6C 9A 21   1E 5F 2D 9B 75 7A D8 31  s^...l.!._-.uz.1
00A0: 59 42 B0 6C AD 86 6E 05   D9 59 86 67 16 E5 AD C1  YB.l..n..Y.g....
00B0: E8 6C 21 15 19 8A 85 D8   70 59 B4 51 D6 3D 16 CE  .l!.....pY.Q.=..
00C0: 2D AD 7B E8 08 32 0D B7   2F F0 15 1C 12 EE 9F 18  -....2../.......
00D0: C3 DE 61 16 C4 D3 A4 1A   F2 1E E0 C5 BA 28 49 B8  ..a..........(I.
00E0: 70 0E 19 21 6E 1B 47 CA   1E E9 A0 33 D9 23 D5 CF  p..!n.G....3.#..
00F0: CE 91 71 AA 6B 54 0B 24   49 4A CE 2F 92 6D 4D DA  ..q.kT.$IJ./.mM.

]
***
*** ECDH ServerKeyExchange
Server key: Sun EC public key, 163 bits
  public x coord: 9136528840887878846890758313033245846487987894913
  public y coord: 10222364285200404385822101945158338799500469323918
  parameters: sect163k1 [NIST K-163] (1.3.132.0.1)
*** ServerHelloDone
org.subethamail.smtp.server.Session-/127.0.0.1:51856, WRITE: TLSv1 Handshake, length = 1323
org.subethamail.smtp.server.Session-/127.0.0.1:51856, received EOFException: error
org.subethamail.smtp.server.Session-/127.0.0.1:51856, handling exception: javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake
%% Invalidated:  [Session-1, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA]
org.subethamail.smtp.server.Session-/127.0.0.1:51856, SEND TLSv1 ALERT:  fatal, description = handshake_failure
org.subethamail.smtp.server.Session-/127.0.0.1:51856, WRITE: TLSv1 Alert, length = 2
org.subethamail.smtp.server.Session-/127.0.0.1:51856, called closeSocket()
Allow unsafe renegotiation: false
Allow legacy hello messages: true
Is initial handshake: true
Is secure renegotiation: false
org.subethamail.smtp.server.ServerThread *:40125, setSoTimeout(60000) called
Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 for SSLv2Hello
Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 for SSLv2Hello
Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256 for SSLv2Hello
Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256 for SSLv2Hello
Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256 for SSLv2Hello
Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256 for SSLv2Hello
Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256 for SSLv2Hello
Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 for SSLv3
Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 for SSLv3
Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256 for SSLv3
Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256 for SSLv3
Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256 for SSLv3
Ignoring unavailable cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA
Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256 for SSLv3
Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256 for SSLv3
Ignoring unavailable cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA
Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unavailable cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA
Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unavailable cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA256
Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256 for TLSv1
Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unavailable cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA256
Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unavailable cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384
Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256 for TLSv1.1
Ignoring unavailable cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA256
Ignoring unavailable cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA
org.subethamail.smtp.server.Session-/127.0.0.1:51856, called close()
org.subethamail.smtp.server.Session-/127.0.0.1:51856, called closeInternal(true)
org.subethamail.smtp.server.Session-/127.0.0.1:51856, called close()
org.subethamail.smtp.server.Session-/127.0.0.1:51856, called closeInternal(true) 
```

**我的 SMTP over SSL 服务器实现**

```
private static class SmtpServer extends SMTPServer {

    private SSLContext context;

    protected SmtpServer(MessageHandlerFactory factory, SSLContext context) {
        super(factory);
        this.context = context;
    }

    @Override
    public SSLSocket createSSLSocket(Socket socket) throws IOException {
        InetSocketAddress remoteAddress = (InetSocketAddress) socket.getRemoteSocketAddress();
        SSLSocketFactory sf = context.getSocketFactory();
        SSLSocket s = (SSLSocket) sf.createSocket(socket, remoteAddress.getHostName(), socket.getPort(), true);
        // we are the server
        s.setUseClientMode(false);
        return s;
    }

} 
```

实施与以往没有任何区别。唯一的区别是 JDK 的版本。

我不知道，握手期间会出什么问题。是在测试实用程序问题还是我应该执行任何步骤来修复此错误以防止发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T08:37:57.813

`openssl distribution binaries`通过更新到位于 Ability Mail Server 安装文件夹中的最新版本解决了问题。使用最新版本的 DLL 运行的 AMS 没有描述问题。

换句话说，回答我自己的问题：这个问题不在我们这边。

# asp.net - 在鼠标悬停时显示大量文本

> ID：16077065
> 
> 赞同：0
> 
> 时间：2013-04-18T07:34:32.700
> 
> 标签：asp.net, html, css, tooltip, mouseover

我正在使用这个弹出工具提示： [http ://www.dynamicdrive.com/dynamicindex16/showhint.htm](http://www.dynamicdrive.com/dynamicindex16/showhint.htm)

这样每当我将鼠标悬停在 [?] 符号上时，就会出现一条消息。

在提供的脚本中：

```
<a href="#" class="hintanchor" onMouseover="showhint('Please choose a username. Should consist of alphanumeric characters only.', this, event, '150px')">[?]</a> 
```

我的意思是输入文本以显示在`showhint`函数内的弹出窗口中，如上所示。

我的问题是我有大量的文本要显示（即半页 Word 文档大小），并且需要在段落之间安排中断。

当我将文本块放在 showhint 函数的第一个参数中时，它不起作用。

如何获得工具提示以显示带有适当中断等的长消息？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:39:16.523

您正在使用的“显示提示”脚本似乎接受 HTML 标签，例如**inside - 这样您就可以将文本放在一个段落中**

 **```
<a href="#" class="hintanchor" onMouseover="showhint('<p>Please choose a username.</p><p>Should consist of alphanumeric characters only.</p>', this, event, '150px')">[?]</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:39:25.443

您可以在 showhint 文本本身中添加 html 标签，如下所示。有用。

```
<a href="#" class="hintanchor" onmouseover="showhint('<b>Please choose a username.</b> &lt;p&gt;Should consist of alphanumeric characters only.&lt;/p&gt;', this, event, '150px')">[?]</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T07:39:45.893

你试过把 \n 或 \n\r 或 <br> 或 <br/> 放在你想要休息的地方吗？这在过去帮助了我

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T08:45:54.230

在您的弹出 css 中使用 word-wrap 属性，如下所述

```
 <div id='row' style='word-wrap:break-word;'> 
```

它将相应地包装文本

```
 #hintbox{ 
     /*CSS for pop up hint box */ 
    position:absolute; top: 0; 
    background-color:lightyellow; width: 150px;
    /*Default width of hint.*/ 
    padding: 3px; border:1px solid black;  
    font:normal 11px Verdana; 
    line-height:18px; 
    z-index:100; 
    border-right: 
    3px solid black; 
    border-bottom: 
    3px solid black; 
    visibility: hidden; 
    Word-wrap:break-word; 
```

}

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T07:45:03.457

通常不是这样，悬停帮助的用途是什么。也许你最好使用 showhint 来显示一个预告片和一个链接来打开一个类似边栏的东西，你可以在其中显示普通的 html，并且在用户输入时保持显示。

文档说*HTML 是受支持*的，所以你尝试过这样的文本：

```
<html>line-1<br/>line-2</html> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-18T07:54:07.430

您是否尝试使用 <br> 换行？（没有空格）

像那样：

```
<a href="#" class="hintanchor" onMouseover="showhint('Please choose a username. <br> Should consist of alphanumeric characters only.', this, event, '150px')">[?]</a> 
```**

# c++ - 为 windows 编译 Graphin

> ID：16077076
> 
> 赞同：0
> 
> 时间：2013-04-18T07:35:14.327
> 
> 标签：c++, graphics, linker, antialiasing

我正在尝试为此处存在的 Windows 编译 Graphin

```
svn checkout http://graphin.googlecode.com/svn/trunk/ graphin-read-only 
```

但是对于 VS 2005，它失败了

```
1>------ Build started: Project: graphin, Configuration: Release Win32 ------
1>Linking...
1>   Creating library .\../../bin/graphin.lib and object .\../../bin/graphin.exp
1>agg2d.lib(agg2D.obj) : error LNK2019: unresolved external symbol "public: void __thiscall agg::vcgen_dash::remove_all_dashes(void)" (?remove_all_dashes@vcgen_dash@agg@@QAEXXZ) referenced in function "public: void __thiscall agg::conv_dash<class agg::conv_curve<class agg::path_base<class agg::vertex_block_storage<double,8,256> >,class agg::curve3,class agg::curve4>,struct agg::null_markers>::remove_all_dashes(void)" (?remove_all_dashes@?$conv_dash@V?$conv_curve@V?$path_base@V?$vertex_block_storage@N$07$0BAA@@agg@@@agg@@Vcurve3@2@Vcurve4@2@@agg@@Unull_markers@2@@agg@@QAEXXZ)
1>agg2d.lib(agg2D.obj) : error LNK2019: unresolved external symbol "public: void __thiscall agg::vcgen_dash::add_dash(double,double)" (?add_dash@vcgen_dash@agg@@QAEXNN@Z) referenced in function "public: void __thiscall agg::conv_dash<class agg::conv_curve<class agg::path_base<class agg::vertex_block_storage<double,8,256> >,class agg::curve3,class agg::curve4>,struct agg::null_markers>::add_dash(double,double)" (?add_dash@?$conv_dash@V?$conv_curve@V?$path_base@V?$vertex_block_storage@N$07$0BAA@@agg@@@agg@@Vcurve3@2@Vcurve4@2@@agg@@Unull_markers@2@@agg@@QAEXNN@Z)
1>agg2d.lib(agg2D.obj) : error LNK2019: unresolved external symbol "public: void __thiscall agg::vcgen_dash::dash_start(double)" (?dash_start@vcgen_dash@agg@@QAEXN@Z) referenced in function "public: void __thiscall agg::conv_dash<class agg::conv_curve<class agg::path_base<class agg::vertex_block_storage<double,8,256> >,class agg::curve3,class agg::curve4>,struct agg::null_markers>::dash_start(double)" (?dash_start@?$conv_dash@V?$conv_curve@V?$path_base@V?$vertex_block_storage@N$07$0BAA@@agg@@@agg@@Vcurve3@2@Vcurve4@2@@agg@@Unull_markers@2@@agg@@QAEXN@Z)
1>agg2d.lib(agg2D.obj) : error LNK2019: unresolved external symbol "public: unsigned int __thiscall agg::vcgen_dash::vertex(double *,double *)" (?vertex@vcgen_dash@agg@@QAEIPAN0@Z) referenced in function "public: unsigned int __thiscall agg::conv_adaptor_vcgen<class agg::conv_curve<class agg::path_base<class agg::vertex_block_storage<double,8,256> >,class agg::curve3,class agg::curve4>,class agg::vcgen_dash,struct agg::null_markers>::vertex(double *,double *)" (?vertex@?$conv_adaptor_vcgen@V?$conv_curve@V?$path_base@V?$vertex_block_storage@N$07$0BAA@@agg@@@agg@@Vcurve3@2@Vcurve4@2@@agg@@Vvcgen_dash@2@Unull_markers@2@@agg@@QAEIPAN0@Z)
1>agg2d.lib(agg2D.obj) : error LNK2019: unresolved external symbol "public: void __thiscall agg::vcgen_dash::rewind(unsigned int)" (?rewind@vcgen_dash@agg@@QAEXI@Z) referenced in function "public: unsigned int __thiscall agg::conv_adaptor_vcgen<class agg::conv_curve<class agg::path_base<class agg::vertex_block_storage<double,8,256> >,class agg::curve3,class agg::curve4>,class agg::vcgen_dash,struct agg::null_markers>::vertex(double *,double *)" (?vertex@?$conv_adaptor_vcgen@V?$conv_curve@V?$path_base@V?$vertex_block_storage@N$07$0BAA@@agg@@@agg@@Vcurve3@2@Vcurve4@2@@agg@@Vvcgen_dash@2@Unull_markers@2@@agg@@QAEIPAN0@Z)
1>agg2d.lib(agg2D.obj) : error LNK2019: unresolved external symbol "public: void __thiscall agg::vcgen_dash::add_vertex(double,double,unsigned int)" (?add_vertex@vcgen_dash@agg@@QAEXNNI@Z) referenced in function "public: unsigned int __thiscall agg::conv_adaptor_vcgen<class agg::conv_curve<class agg::path_base<class agg::vertex_block_storage<double,8,256> >,class agg::curve3,class agg::curve4>,class agg::vcgen_dash,struct agg::null_markers>::vertex(double *,double *)" (?vertex@?$conv_adaptor_vcgen@V?$conv_curve@V?$path_base@V?$vertex_block_storage@N$07$0BAA@@agg@@@agg@@Vcurve3@2@Vcurve4@2@@agg@@Vvcgen_dash@2@Unull_markers@2@@agg@@QAEIPAN0@Z)
1>agg2d.lib(agg2D.obj) : error LNK2019: unresolved external symbol "public: void __thiscall agg::vcgen_dash::remove_all(void)" (?remove_all@vcgen_dash@agg@@QAEXXZ) referenced in function "public: unsigned int __thiscall agg::conv_adaptor_vcgen<class agg::conv_curve<class agg::path_base<class agg::vertex_block_storage<double,8,256> >,class agg::curve3,class agg::curve4>,class agg::vcgen_dash,struct agg::null_markers>::vertex(double *,double *)" (?vertex@?$conv_adaptor_vcgen@V?$conv_curve@V?$path_base@V?$vertex_block_storage@N$07$0BAA@@agg@@@agg@@Vcurve3@2@Vcurve4@2@@agg@@Vvcgen_dash@2@Unull_markers@2@@agg@@QAEIPAN0@Z)
1>agg2d.lib(agg2D.obj) : error LNK2019: unresolved external symbol "public: __thiscall agg::vcgen_dash::vcgen_dash(void)" (??0vcgen_dash@agg@@QAE@XZ) referenced in function "public: __thiscall agg::conv_adaptor_vcgen<class agg::conv_curve<class agg::path_base<class agg::vertex_block_storage<double,8,256> >,class agg::curve3,class agg::curve4>,class agg::vcgen_dash,struct agg::null_markers>::conv_adaptor_vcgen<class agg::conv_curve<class agg::path_base<class agg::vertex_block_storage<double,8,256> >,class agg::curve3,class agg::curve4>,class agg::vcgen_dash,struct agg::null_markers>(class agg::conv_curve<class agg::path_base<class agg::vertex_block_storage<double,8,256> >,class agg::curve3,class agg::curve4> &)" (??0?$conv_adaptor_vcgen@V?$conv_curve@V?$path_base@V?$vertex_block_storage@N$07$0BAA@@agg@@@agg@@Vcurve3@2@Vcurve4@2@@agg@@Vvcgen_dash@2@Unull_markers@2@@agg@@QAE@AAV?$conv_curve@V?$path_base@V?$vertex_block_storage@N$07$0BAA@@agg@@@agg@@Vcurve3@2@Vcurve4@2@@1@@Z)
1>.\../../bin/graphin.dll : fatal error LNK1120: 8 unresolved externals
1>Build log was saved at "file://c:\graphin-read-only\build\release\BuildLog.htm"
1>graphin - 9 error(s), 0 warning(s)
2>------ Build started: Project: win32, Configuration: Release Win32 ------
2>Linking...
2>Embedding manifest...
2>Build log was saved at "file://c:\graphin-read-only\Release\win32\BuildLog.htm"
2>win32 - 0 error(s), 0 warning(s)
========== Build: 1 succeeded, 1 failed, 4 up-to-date, 0 skipped ========== 
```

请帮助我摆脱它...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:49:30.387

似乎该库依赖于另一个名为“ `anti-grain-geometry`”的库。您可能需要获取它，并从中获得一个`.lib`-file。

[AGG](http://agg.sourceforge.net/)可以在那里找到。

# c# - ZedGraph 如何检测放大或缩小？

> ID：16077079
> 
> 赞同：2
> 
> 时间：2013-04-18T07:35:27.960
> 
> 标签：c#, events, charts, zooming, zedgraph

我已经使用 ZedGraph 有一段时间了，但是经过数小时的搜索后我感到很沮丧，我找不到如何区分缩放事件是“放大”、“缩小”还是“全部缩小”的检测方法？

实际上，我正在制作自己的放大和缩小版本，以便在每种情况下对特定数据进行采样，我真的需要找到一种方法来检测缩放事件的类型。

如果有人有想法，请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T12:34:04.143

早些时候，我通过检查 zedGraphControl1.GraphPane.XAxis.Scale.Max 值是否小于图表中的点数来检测放大或缩小。如果它小于然后放大是有意的，反之亦然。然而，这并不是万无一失的，因为有时缩小被检测为放大。

经过大量搜索，我发现的是：http: [//sourceforge.net/p/zedgraph/discussion/392232/thread/d33cfd8c/](http://sourceforge.net/p/zedgraph/discussion/392232/thread/d33cfd8c/)

因此，使用类似的技术，我通过计算当用户使用左键单击和拖动（使用 zedGraphControl1.GraphPane.XAxis.Scale.Max 和 zedGraphControl1.GraphPane.XAxis 的新值）放大时所选缩放区域的面积来改进检测。 Scale.Min ）并将该区域与整个图表的区域进行比较（使用 zedGraphControl1.GraphPane.XAxis.Scale.Max 和 zedGraphControl1.GraphPane.XAxis.Scale.Min 的先前值）。

像这儿：

```
private void zedGraphControl1_ZoomEvent(ZedGraphControl sender, ZoomState oldState, ZoomState newState)
{

    if (((lastYAxisMax - lastYAxisMin) * (lastXAxisMax - lastXAxisMin)) > ((sender.GraphPane.XAxis.Scale.Max - sender.GraphPane.XAxis.Scale.Min) * (sender.GraphPane.YAxis.Scale.Max - sender.GraphPane.YAxis.Scale.Min)))
    {
        zoomIn = true;
        zoomOut = false;
    }
    else
    {
        zoomIn = false;
        zoomOut = true;
    }
} 
```

知道没有简单的方法可以做到这一点真是令人失望，但到目前为止这工作正常，因为用户选择的区域不能等于或大于图表区域。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-24T21:44:48.460

我今天找到了解决方案。我将 GraphPane 变量取出为 form1 中的全局变量，并添加了我自己的标志：

```
GraphPane myPane;
bool inv = false; 
```

然后在构造函数中注册到 ZedGraph 控件的缩放事件：

```
zedGraphControl1.ZoomEvent += new ZedGraphControl.ZoomEventHandler(MyZoomEvent); 
```

这是缩放事件代码：

```
private void MyZoomEvent(ZedGraphControl control, ZoomState oldState,

                    ZoomState newState)
        {
            inv = myPane.IsZoomed;
        } 
```

现在我有 CreateGraph 方法，我在这个方法中每秒从一个计时器滴答事件中调用它，我检查我的标志是 false 还是 true：

```
private void CreateGraph(ZedGraphControl z1)
        {
            myPane = z1.GraphPane;
            if (myPane != null)
            {
                myPane.CurveList.Clear();
                myPane.GraphObjList.Clear();
                myPane.Title.Text = "Histograms";
                myPane.XAxis.Title.Text = "Bar Number";
                myPane.YAxis.Title.Text = "Value";

                myPane.XAxis.Scale.MaxAuto = false;
                myPane.XAxis.Scale.MinAuto = false;
                myPane.YAxis.Scale.MaxAuto = false;
                myPane.YAxis.Scale.MinAuto = false;

                myPane.XAxis.Scale.Min = 0;
                myPane.XAxis.Scale.Max = 255;
                myPane.YAxis.Scale.Min = 0;
                myPane.YAxis.Scale.Max = 255;

                PointPairList list = new PointPairList();

                for (int i = 0; i < Core.graphValues.Count; i++)
                {
                    double x = (double)i;
                    double y = (double)Core.graphValues[i];
                    double z = 0;
                    list.Add(x, y, z);
                }
                LineItem myCurve = myPane.AddCurve("Top 1000 Averages",
               list, Color.Red, SymbolType.None);

                if (inv != true)
                {
                    z1.Invalidate();
                }
                z1.AxisChange();
            }

        } 
```

对我来说，它工作得很好。我在任何缩放选项中对其进行了测试，所有缩放选项都可以缩小和缩小，并且可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:24:03.983

据我了解，没有找到放大/缩小或全部缩小的特定选项，但有一个解决方法。

目前它只会说它是什么状态......

```
private void zedGraphControl1_ZoomEvent(ZedGraphControl sender, ZoomState oldState, ZoomState newState)
    {
       if(newState.Type == ZoomState.StateType.Pan ){ }
       else if (newState.Type == ZoomState.StateType.Zoom){ }
       else if (newState.Type == ZoomState.StateType.Scroll){ }
       else if (newState.Type == ZoomState.StateType.WheelZoom){ }
    } 
```

如果为 Context Menu Builder (zedGraphControl1_ContextMenuBuilder) 添加事件处理程序并添加以下代码。

```
bool isSubscriptionEnabled = false;

    private void zedGraphControl1_ContextMenuBuilder(ZedGraphControl sender, ContextMenuStrip menuStrip, Point mousePt, ZedGraphControl.ContextMenuObjectState objState)
    {
        // Remove default options
        menuStrip.Items.RemoveByKey("unzoom");
        menuStrip.Items.RemoveByKey("undo_all");

        // custom context menu items
        ToolStripMenuItem unZoom_toolStripMenuItem = new ToolStripMenuItem();
        ToolStripMenuItem unZoomAll_toolStripMenuItem = new ToolStripMenuItem();

        // 1.Un Zoom
        unZoom_toolStripMenuItem.Name = "unZoom";
        unZoom_toolStripMenuItem.Tag = "unzoom";
        unZoom_toolStripMenuItem.Text = "Un Zoom*";

        // 2.Undo All Zoom/Pan
        unZoomAll_toolStripMenuItem.Name = "undoZoomAll";
        unZoomAll_toolStripMenuItem.Tag = "undozoomall";
        unZoomAll_toolStripMenuItem.Text = "Undo All Zoom/Pan*";

        // Add the above 2 menu strip items
        menuStrip.Items.Insert(4, unZoom_toolStripMenuItem);
        menuStrip.Items.Insert(5, unZoomAll_toolStripMenuItem);

        if (!isSubscriptionEnabled)
        {
            // The following event handler help us to notify user click event on context menu
            menuStrip.ItemClicked += new ToolStripItemClickedEventHandler(menuStrip_ItemClicked);
            isSubscriptionEnabled = true;
        }
    }

    private void menuStrip_ItemClicked(object sender, ToolStripItemClickedEventArgs e)
    {
        if (e.ClickedItem.ToString() == "Un Zoom*")
        {
            // Add your custom task
            MessageBox.Show("Un Zoom");

        }
        else if (e.ClickedItem.ToString() == "Undo All Zoom/Pan*")
        {
            // Add your custom task
        }            
    } 
```

希望有帮助。

# css - 如何在 CSS 自定义片段着色器中正确声明变量？

> ID：16077081
> 
> 赞同：0
> 
> 时间：2013-04-18T07:35:35.900
> 
> 标签：css, webkit, webgl, fragment-shader

出于某种原因，每次我在 CSS 片段着色器中声明自定义变量时，着色器都会停止工作。我不知道为什么会这样，因为我很确定语法是正确的。

这是我的 HTML 代码和我的 CSS：

```
#holder{
    width:600;
    height:600;
    -webkit-filter :custom(url(v.vs) mix(url(f2.fs) multiply source-over), 20 20);
}
...
...
<div id="holder"></div> 
```

这是我的片段着色器 f2.fs：

```
void main()
{
    uniform float time;//remove this line and the shader will work!

    css_MixColor = vec4(0.738, 0.821, 0.321, 1.0);

    css_ColorMatrix = mat4(1, 0, 0, 0,
                           0, 1, 0, 0,
                           0, 0, 1, 0,
                           0, 0, 0, 1 );

} 
```

而不是`uniform float`，我也尝试了`float`or `vec4 test = vec4(1,1,1,1);`，但无论我做什么，每次我尝试声明自定义变量时都不会应用着色器。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:28:41.700

我不熟悉 CSS 中的着色器，但在 WebGL 中，您必须`uniform`在`main`.

# jquery - Jquery DataTable 中的滚动问题

> ID：16077090
> 
> 赞同：14
> 
> 时间：2013-04-18T07:35:46.430
> 
> 标签：jquery, jquery-datatables

我不确定我是否在重复这个问题，如果是，请指导正确的地方:)

我正在使用数据表并尝试实现水平滚动并找到此链接

[http://www.datatables.net/examples/basic_init/scroll_x.html](http://www.datatables.net/examples/basic_init/scroll_x.html)

我在我的数据表代码中使用了这些属性，并且在 UI 中遇到了问题。

我的数据得到了水平滚动条，但我的列没有扩展，也没有按预期工作。我的正常列下方有额外的空列。

基本上我的用户界面搞砸了。我看到了同样的旧线程讨论！

[DataTables 修复了与宽表中的列不对齐的标题](https://stackoverflow.com/questions/13178039/datatables-header-alignment-issue)

这些问题现在解决了吗？

=================================

添加示例代码

```
$("#results").dataTable({
    "aaData": [
        //My data
    ],
    "aoColumns": [
        //My Columns
    ],
    "bPaginate": true,
    "bSort": true,
    "bFilter": false,
    "bJQueryUI": false,
    "bProcessing": true,
    "sScrollX": "100%",
    "sScrollXInner": "110%",
    "bScrollCollapse": true
}); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-18T08:04:05.070

我有一个类似的问题，但以不同的方式解决了它。

我修改了`sDom`参数以将表格包装在一个额外的`div`：

```
sDom: 'r<"H"lf><"datatable-scroll"t><"F"ip>', 
```

然后，我将以下样式应用于`.datatable-scroll`该类：

```
/**
 * Makes the table have horizontal scroll bar if its too wide for its container
 */
.datatable-scroll {
    overflow-x: auto;
    overflow-y: visible;
} 
```

[http://datatables.net/usage/options#sDom](http://datatables.net/usage/options#sDom)

# asp.net - What happens to the ViewState when I click back on the browser?

> ID：16077097
> 
> 赞同：1
> 
> 时间：2013-04-18T07:36:04.837
> 
> 标签：asp.net, browser, viewstate

I'm curious to know what happens to the ViewState on the browse back button.

Does it stay or does the page make a new request?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:51:19.623

Viewstate 一旦呈现为 html 就不再是 .NET 实现，它们成为页面 html 中的普通隐藏字段。所以当你做浏览返回按钮的时候，大部分时间我们从浏览器的缓存中获取页面，是不会有请求到服务器的。没有办法只有 ViewState 会在不刷新页面的情况下自行更新，因为在一天结束时 Viewstate 只不过是一些隐藏字段。

# iphone - NSNetService (bonjour) cannot find devices

> ID：16077099
> 
> 赞同：0
> 
> 时间：2013-04-18T07:36:09.000
> 
> 标签：iphone, ios, objective-c, bonjour, nsnetservice

I tried to make an app to communicate between iOS devices and I found ["Chatty"](http://mobileorchard.com/tutorial-networking-and-bonjour-on-iphone/), which is based on [`NSNetService`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNetService_Class/Reference/Reference.html) (Bonjour) and it works on my devices. (iPad 3Gen, iPhone 4S and iPhone 5)

However, there's a problem, some devices cannot find each other if I use the "Internet Sharing" of Mac OSX to make Wifi hotspot, or connect to a b/g/n mixed 2.4GHz router, but it work perfectly if I use the hotspot of my iPhone 5.

Can you tell me why it cannot work in these routers? I guess that Bonjour is influenced by other routers in the room which I didn't connect, is that true?

# xmpp - 使用 (a)Smack 登录时 XMPP“流：错误（冲突）”

> ID：16077100
> 
> 赞同：9
> 
> 时间：2013-04-18T07:36:09.610
> 
> 标签：xmpp, smack, asmack

目前我正在为 android 使用 xmpp/jabber 聊天。我刚刚尝试使用 Openfire 并尝试连接我的 jabber 帐户。连接成功。但我无法发送任何消息。它显示一些冲突错误。请检查错误日志.给我一个解决方案。

```
Initializing connection to server eworks port 5222
Connected: true
Creating entry for buddy 'testuser2' with name testuser2
Sending mesage 'Hello mate' to user testuser2@eworks
Buddy:testuser2 - Status:null
stream:error (conflict)
at org.jivesoftware.smack.PacketReader.parsePackets(PacketReader.java:306)
at org.jivesoftware.smack.PacketReader.access$000(PacketReader.java:44)
at org.jivesoftware.smack.PacketReader$1.run(PacketReader.java:76) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T11:06:52.510

由于冲突而导致的 XMPP`stream:error`意味着已经存在具有相同完整 JID（即裸 JID 和资源部分）的连接。

一旦检测到冲突，大多数 XMPP 服务器都能够通过重新分配不同的资源来处理冲突。可以配置此行为。

# ruby-on-rails - @ is not allowed as an instance variable name

> ID：16077106
> 
> 赞同：0
> 
> 时间：2013-04-18T07:36:25.077
> 
> 标签：ruby-on-rails, ruby, mongoid3

I am currently working on a project with mongoid and rails. Here is the code:

```
class Account
  include Mongoid::Document
  include Mongoid::Timestamps

  field :account_name, type: String

  has_many :groups
end

class Group
  include Mongoid::Document

  field :group_name, type: String

  belongs_to :account
  has_and_belongs_to_many :groups
end

class GroupsController < ApplicationController
  before_filter :require_login, :find_company

  def new
    @group = @company.groups.new
  end

  def create
    @group = @company.groups.new params[:group]
    if @group.save
      redirect_to people_path
    else
      render :new
    end
  end

  private

  def find_company
    @company = current_account.groups.find(params[:company_id]) if params[:company_id]
  end
end 
```

And the error that is being returned is:

```
@' is not allowed as an instance variable name (NameError)
./app/controllers/groups_controller.rb:5:in `new' 
```

I can't seem to find much googling around for the issue, but it would appear the issue lies with the has_and_belongs_to_many relationship, but I am not certain.

Any ideas would be appreciated.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:20:35.700

问题是我误解了has_and_belongs_to_many。我已经通过删除它解决了这个问题！

谢谢大家的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-22T20:36:36.097

对我来说，原因是数据库连接没有正确配置：？

# ruby-on-rails - Rails：用空对象模式替换 try

> ID：16077115
> 
> 赞同：6
> 
> 时间：2013-04-18T07:36:59.137
> 
> 标签：ruby-on-rails, ruby, design-patterns

在我的大多数应用程序中，我都有一个`current_user`方法。为了避免在`current_user.name`where `current_user`is等情况下出现异常`nil`，rails 提供了该`try`方法。这样做的问题是我需要记住在`try`任何地方`current_user`都可以使用`nil`.

我想使用 Null Object 模式来消除这种额外的开销。

```
class NullUser
  def method_missing(method_name, *args)
    nil
  end
end

def current_user
  return NullUser.new unless UserSession.find
  @current_user ||= UserSession.find.user
end 
```

`try`这在某些情况下可以替代：

```
current_user.try(:first_name)     #=> nil
current_user.first_name           #=> nil 
```

但进一步链接失败：

```
current_user.profiles.first.name    #=> undefined method... 
```

* * *

我试图返回空对象：

```
class NullUser
  def method_missing(method_name, *args)
    self.class.new
  end
end

current_user.try { |u| u.profiles.first.name }  #=> nil
current_user.profiles.first.name                #=> nil 
```

但这在其他情况下会失败：

```
current_user.is_admin?            #=>  #<NullUser:0x96f4e98> 
```

这个问题有没有可能的解决方案，还是我们都必须忍受`try`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T11:24:36.887

我会坚持使用`NullUser`但将其名称更改`GuestUser`为使事情更清楚。此外，您应该从您的 User 类中存根所有重要的方法，例如

```
class GuestUser
  def method_missing(method_name, *args)
    nil
  end

  def is_admin?
    false
  end

  # maybe even fields:
  def name
    "Guest"
  end

  # ...
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-23T22:00:11.350

如果您希望能够在`NullUser`实例上链接方法，则需要使用`method_missing`return`self`而不是`nil`. 您尝试返回`self.class.new`很接近...

[Avdi Grim 解释了如何在 Ruby 中实现空对象模式。](http://devblog.avdi.org/2011/05/30/null-objects-and-falsiness/)

# visual-studio-2010 - 链接 libtiff - LNK2001：无法解析外部符号 TIFFOpen

> ID：16077117
> 
> 赞同：0
> 
> 时间：2013-04-18T07:37:01.917
> 
> 标签：visual-studio-2010, libtiff, lnk2001

我在 64 位机器上使用 MSVS 2010。我使用设置文件安装了 tiff 库版本 3.8.2，更改了项目属性表：include - *\GnuWin32\include; 链接器 - *\GnuWin32\lib，输入 - libtiff.lib。但是 MSVS 2010 仍然给我链接器错误：

LNK2001：未解析的外部符号 TIFFOpen
LNK2001：未解析的外部符号 TIFFGetField
LNK2001：未解析的外部符号 TIFFIsTiled

（因为我的一个源文件中的函数调用）。

我也尝试将包含目录添加到我的环境变量 Path 中，但无济于事。我还下载了 tiff-4.0.3.zip 并按照 libtiff 网站上的说明从命令提示符构建了库。我相应地更新了项目属性表：包括 - *\libtiff; 链接器 - *\libtiff，输入 - libtiff.lib，libtiff_i.lib。我什至将 libtiff.dll 复制到 *\Windows\system 和 *\Windows\system32 目录，并将 *\libtiff 目录添加到我的环境变量 Path 中。但是，MSVS 2010 仍然给我同样的错误。

我在网上搜索过，似乎没有人遇到过这样的问题，或者对于那些在不同库中遇到过类似问题的人，解决方案是我上面尝试过的。我现在已经花了将近两天的时间，并且迫切需要解决方案。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:42:44.667

嘻嘻！！！我解决了。由于我是 MSVS 的新手，我不知道它有自己的命令提示符。我使用的是 Windows 中的普通 cmd，但我使用了 Visual Studio x64 命令提示符并最终编译。不放弃是值得的 ha - 感谢切换到 bing 搜索，我得到的结果给了我这个想法。这个量身定制的谷歌搜索......：-/

# symfony1 - Symfony 1.4 Doctrine 运行自定义查询给出警告

> ID：16077120
> 
> 赞同：0
> 
> 时间：2013-04-18T07:37:07.097
> 
> 标签：symfony1, doctrine

我尝试按如下方式运行以下查询。

```
 $query = "DELETE FROM `ski_chalet_price` WHERE 1";    

 $conn = Doctrine_Manager::getInstance()->connection();
 $stmt = $conn->prepare($query);
 $stmt->execute(); 
```

但它会引发以下警告。

```
Warning: Invalid argument supplied for foreach() in /home/dinuka/workspace/symfony/lib/plugins/sfDoctrinePlugin/lib/database/sfDoctrineConnectionProfiler.class.php on line 196

Warning: join(): Invalid arguments passed in /home/dinuka/workspace/symfony/lib/plugins/sfDoctrinePlugin/lib/database/sfDoctrineConnectionProfiler.class.php on line 141 
```

这是我要运行的查询。

```
INSERT INTO ski_chalet_price 
(ski_chalet_id, month, d_19,d_20,d_21,d_22,d_23,d_24,d_25,created_at) VALUES
(44,'2013-04-01',10,10,10,10,10,10,10,'2013-04-19 13:27:26') 
ON DUPLICATE KEY UPDATE 
ski_chalet_id = 44, month = '2013-04-01',d_19 = 10,d_20 = 10,d_21 = 10,d_22 = 10,d_23 = 10,d_24 = 10,d_25 = 10, updated_at = '2013-04-19 13:27:26' ; 
```

这不取决于我的查询。什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-22T17:19:52.670

我检查了代码，`sfDoctrineConnectionProfiler.class.php`发现`execute();`需要一组空参数（即一个空数组）才能不抱怨。

所以：

```
$stmt->execute(); 
```

应该：

```
$stmt->execute(array()); 
```

请注意，错误中的“加入”一词具有误导性。它不是指 SQL 连接，而是指 PHP 的原生 join() 函数，它是 implode() 的别名。

# windows - 在 Windows 中以管理员模式在 emacs 中调用

> ID：16077122
> 
> 赞同：1
> 
> 时间：2013-04-18T07:37:11.020
> 
> 标签：windows, emacs, admin

只是好奇是否有任何方法可以从命令行但在管理员模式下调用 emacs，以便我可以编辑 C:\System32 中的文件，例如？顺便说一句，我的 Windows 7 机器上有 emacs。

# clojure - 过滤/求和值，不确定如何实现 clojure

> ID：16077123
> 
> 赞同：1
> 
> 时间：2013-04-18T07:37:20.560
> 
> 标签：clojure

我正在尝试“透视”以下数据，尽管即使在 excel 中尝试它似乎也不起作用。我不确定我的逻辑是否正确。基本上我需要将数据集a转换为数据集b。

一个

日期 奖牌 值 1 值 2 值 3 值 4

2013-03-08 银 0 6052 0 0

2013-03-04 青铜 0 0 0 0

2013-03-04 青铜 0 0 0 0

2013-03-04 青铜 0 0 0 0

2013-03-04 青铜 0 1437 0 0

2013-03-01 青铜 0 0 240 0

2013-03-01 银 0 0 0 0

2013-03-01 青铜 0 0 0 0

2013-03-01 青铜 0 173 0 0

2013-03-08 银 0 0 0 271

2013-03-04 银 0 2547 0 0

2013-03-04 青铜 0 495 0 0

2013-03-04 黄金 279 0 0 0

2013-03-02 银 0 0 0 0

2013-03-01 青铜 0 0 0 0

2013-03-01 银 0 0 0 0

2013-03-01 青铜 0 0 0 0

2013-03-01 青铜 0 20 0 0

2013-03-03 银 0 0 0 0

乙

奖牌价值 1 价值 2 价值 3 价值 4

青铜 0 2125 240 0

黄金 279 0 0 0

银 0 8599 0 271

所以基本上我正在尝试按 MEDAL 分组并根据 MEDAL 过滤器对每个值列求和（MEDAL 是可变的，可能是 PURPLE、BLUE 等）。下面的尝试是完全错误的，我正在重用一些以前的代码，所以它可能是圆钉方孔领域，但我不知道如何去做，即使在逻辑上它现在让我感到困惑...... :(

任何帮助或建议将不胜感激

```
(defn- create-summary [data]
(->> data

     (group-by :MEDAL)
     vals
     (map 
        (fn [recs]
            (let [a (fn [b] (+ (filter #(= b(:MEDAL%)) recs)recs))]
                {:MEDAL (:MEDAL (first recs))
                 :VALUE1sum (a :MEDAL)
                 :VALUE2sum (a :MEDAL)
                 :VALUE3sum (a :MEDAL)
                 :VALUE4sum (a :MEDAL)

                 })))

        )) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:47:43.337

我认为合并将是一个简洁解决方案的关键。

鉴于您的数据位于向量中，如下所示：

```
(def medal-values
 [["2013-03-08" "SILVER" 0   6052 0   0]
  ["2013-03-04" "BRONZE" 0   0    0   0]
  ["2013-03-04" "BRONZE" 0   0    0   0]
  ["2013-03-04" "BRONZE" 0   0    0   0]
  ["2013-03-04" "BRONZE" 0   1437 0   0]
  ["2013-03-01" "BRONZE" 0   0    240 0]
  ["2013-03-01" "SILVER" 0   0    0   0]
  ["2013-03-01" "BRONZE" 0   0    0   0]
  ["2013-03-01" "SILVER" 0   0    0   0]
  ["2013-03-01" "BRONZE" 0   0    0   0]
  ["2013-03-01" "BRONZE" 0   173  0   0]
  ["2013-03-08" "SILVER" 0   0    0   271]
  ["2013-03-04" "SILVER" 0   2547 0   0]
  ["2013-03-04" "BRONZE" 0   495  0   0]
  ["2013-03-04" "GOLD"   279 0    0   0]
  ["2013-03-02" "SILVER" 0   0    0   0]
  ["2013-03-01" "BRONZE" 0   0    0   0]
  ["2013-03-01" "SILVER" 0   0    0   0]
  ["2013-03-01" "BRONZE" 0   0    0   0]
  ["2013-03-01" "BRONZE" 0   20   0   0]
  ["2013-03-03" "SILVER" 0   0    0   0]]) 
```

您可以按如下方式实现所需的转换：

```
(defn count-medals
      [medal-counts]
      (merge-with #(map + %1 %2)
                (reduce (fn [agg [_ k & counts]] (merge-with
                                                 #(map + %1 %2)
                                                 agg {k counts})) {} medal-counts))) 
```

结果是：

```
(count-medals medal-values)

=> {"GOLD" (279 0 0 0), "BRONZE" (0 2125 240 0), "SILVER" (0 8599 0 271)} 
```

肯定会有更好的方法将其折叠一点，但希望这会让你走上正确的轨道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:11:46.877

```
(def data [{:medal "silver" :v1 1 :v2 2 :v3 3}
           {:medal "gold" :v1 1 :v2 2 :v3 3}
           {:medal "silver" :v1 1 :v2 2 :v3 3}
           {:medal "bronze" :v1 1 :v2 2 :v3 3}
           {:medal "bronze" :v1 1 :v2 2 :v3 3}
           {:medal "gold" :v1 1 :v2 2 :v3 3}])

(->> data
     (group-by :medal)
     (map (fn [[k v]] [k (apply merge-with + (map #(dissoc % :medal) v))]))
     (into {}))

==> {silver {:v1 2, :v2 4, :v3 6}, gold {:v1 2, :v2 4, :v3 6}, bronze {:v1 2, :v2 4, :v3 6}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:37:23.463

将数据转换为以下结构：

```
(def data [{:BRONZE [0 495 0 0]}
       {:GOLD [0 0 55 0]}
       {:BRONZE [0 134 0 0]}
       {:SILVER [0 348 0 0]}
       {:SILVER [764 0 0 0]}]) 
```

和

```
(apply (partial merge-with #(map + %1 %2)) data) 
```

# mongodb - 在 MongoDB 中使用数组查询文档

> ID：16077124
> 
> 赞同：0
> 
> 时间：2013-04-18T07:37:34.473
> 
> 标签：mongodb, mongodb-.net-driver

我有一个文档，它有一个数组属性，其中包含存储在另一个集合中的文档的 id，如下所示：

`movie: { title: 'A title', genres: ['id_1', 'id_2', 'id_3', 'id_4' ] }`

现在，我想通过一次查询指定电影来提取所有相关类型。使用 C# 的 MongoDB 驱动程序可以做到这一点`Query.All()`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:04:13.750

由于 mongoDB 不支持 joins ，C# Drivers 无法帮助您。（[https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/Uuqikhcxp4o](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/Uuqikhcxp4o)）。如果你在客户端加入，它会很慢。尝试改变文档结构，如果可能的话，使用流派的子文档来发挥 mongoDB 的优势。我可以给出的建议之一是，如果您在大多数地方都显示有关流派的少量信息，则 Id 存储更多信息但不是全部，因此在放映电影时您可以选择文件并轻松显示它们并给出如果他们想要更多的链接。更多关于 SO：[MongoDB 和“加入”](https://stackoverflow.com/questions/4067197/mongodb-and-joins)

```
 movie: { title: 'A title', genres: [{Id : 'id_1' , "Name" : "Classic"}, {Id :'id_2' , "Name" : "Romantic"} ] } 
```

# android - 如何在我的应用程序上使用必应地图

> ID：16077141
> 
> 赞同：1
> 
> 时间：2013-04-18T07:38:20.987
> 
> 标签：android, bing-maps

我的目的是在我的应用程序上显示**纽约**地图。

首先我下载`BinMapsAndroidSDK1.5`. 然后，我将它导入到 eclipse 中并作为一个 android 应用程序运行。结果是徽标和“ `Bing Maps Android Sdk`”。

如果我错过了什么，谁能告诉我？我应该怎么做才能达到我的目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-01T01:48:05.740

看看这个用于在 Android 中集成 Bing 地图的 SDK：http: [//blogs.bing.com/maps/2011/03/31/bing-maps-android-sdk-available-on-codeplex/](http://blogs.bing.com/maps/2011/03/31/bing-maps-android-sdk-available-on-codeplex/)

它是一个很酷的 API，易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T17:26:37.887

你必须连接到互联网，我猜你没有这样做。但在那之后，有一个关于 bing 帐户的警报，这也是我的问题，所以如果有人可以提供帮助，我会非常高兴......

编辑：我发现这个很有帮助，希望你也会；）祝你好运：D [http://trivedihardik.wordpress.com/2012/03/24/how-to-integrate-bing-map-in-android/](http://trivedihardik.wordpress.com/2012/03/24/how-to-integrate-bing-map-in-android/)

# php - 仅从时间戳值中获取时间值

> ID：16077142
> 
> 赞同：0
> 
> 时间：2013-04-18T07:38:32.527
> 
> 标签：php, datetime, timezone

我将 dateLocal 变量获取为**“2013-04-18T12:25:00.000”** 我如何才能在其中仅检索**12:25:00.000**？

我在下面的代码中调用这个值

```
echo $flightstatus->arrivalDate->dateLocal,"<br>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:40:43.857

您可以使用[`date`](http://php.net/manual/it/function.date.php)和[`strtotime`](http://php.net/manual/en/function.strtotime.php)函数来实现这一点

```
echo date('H:i:s',strtotime($flightstatus->arrivalDate->dateLocal)); 
```

这将输出

```
12:25:00 
```

# rdf - SPARQL Tracker 无法运行更新，在本体中找不到属性

> ID：16077143
> 
> 赞同：2
> 
> 时间：2013-04-18T07:38:34.323
> 
> 标签：rdf, sparql

```
 tracker-sparql -qu "INSERT SILENT INTO <urn:uuid:38f> {  <urn:uuid:38f> a nfo:FileDataObject , nie:InformationElement ;nie:isStoredAs <urn:uuid:38f> ; nie:url 'file.mp3' ; nie:dataSource <urn:nepomuk:datasource:840494F4EDG> ;nie:deviceId '840494F4EDG';nmm:audioType 128 ; tracker:available true; a nmm:MusicPiece , nfo:Audio; nie:title 'Abandoner' .}"

  tracker-sparql -qu "INSERT {<urn:artist:38caadd1f13bf78a26aca0e7d42a8f58> a nmm:Artist ;nmm:artistName 'Aesop'; ?f nmm:performer <urn:artist:38caadd1f13bf78a26aca0e7d42a8f58>;  nmm:extEnsemble <urn:artist:38caadd1f13bf78a26aca0e7d42a8f58>  } WHERE { ?f nie:url 'file.mp3'}" 
```

第一次插入返回完成。第二次插入返回无法运行更新，在本体中找不到属性“urn:uuid:38f”。

我真的无法理解如何将新艺术家与现有音乐作品联系起来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:09:09.407

您的第二个 SPARQL INSERT 语句格式错误：

```
INSERT {
    <urn:artist:38caadd1f13bf78a26aca0e7d42a8f58> 
        a nmm:Artist ;
        nmm:artistName 'Aesop'; 
        ?f nmm:performer <urn:artist:38caadd1f13bf78a26aca0e7d42a8f58>;  
        nmm:extEnsemble <urn:artist:38caadd1f13bf78a26aca0e7d42a8f58>  
} WHERE { ?f nie:url 'file.mp3'} 
```

有一个`;`where a`.`应该是关闭一个三元组并开始一个新的三元组，这意味着`?f`谓词在一个三元组中的位置。正如`<urn:uuid:38f>`定义为`nfo:FileDataObject`、和`nie:InformationElement`，但不是OWL 属性，Tracker 表示没有由 URI 标识的属性。`nmm:MusicPiece``nfo:Audio``rdfs:Property``<urn:uuid38f>`

正确的说法是

```
INSERT {
    <urn:artist:38caadd1f13bf78a26aca0e7d42a8f58> 
        a nmm:Artist ;
        nmm:artistName 'Aesop' . 

    ?f nmm:performer <urn:artist:38caadd1f13bf78a26aca0e7d42a8f58>;  
        nmm:extEnsemble <urn:artist:38caadd1f13bf78a26aca0e7d42a8f58>  
} WHERE { ?f nie:url 'file.mp3'} 
```

# android - Android HoloEverywhere：默认 Holo.Theme 问题上没有顶部 ActionBar/TitleBar

> ID：16077144
> 
> 赞同：1
> 
> 时间：2013-04-18T07:38:43.027
> 
> 标签：android, actionbarsherlock, android-theme, android-holo-everywhere

我正在`HoloEverywhere`为我的应用程序使用端口，但我遇到了一个非常奇怪的问题：在 Gingerbread 上，默认值`Holo.Theme`不会在任何活动上显示顶部的 ActionBar/TitleBar（是的，我确实检查了我所有的布局和 XMLs manifest for 'silly'错误）。

然而，当在另一部运行 JellyBean 的手机上进行测试时，它按预期工作。（你可能会争辩说 JB 已经内置了 Holo 主题......但无论如何我只是在陈述正在发生的事实。）

这已经让我沮丧了 2 天。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:51:24.270

Gingerbread 没有 actionBar 功能。它是在 HoneyComb 中添加的。如果你想在 2.3 以下有像 HoneyComb/ICS/Jelly bean 这样的动作栏，你需要自己自定义标题栏。您可以参考我关于自定义标题的实现： 自定义标题[栏示例](https://code.google.com/p/wifi-map-with-nokia-here-api/source/browse/src/com/buptcoder/wifimap/SingleAPMapActivity.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:47:01.767

这是我修复它的方法：

*   将此添加到您的 AndroidManifext.XML

    android:name="org.holoeverywhere.app.Application"

*   将此添加到您的活动中

    导入 org.holoeverywhere.app.Activity；

*   完毕。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T07:48:02.137

我认为可能有两个问题

1.

```
 android:theme="@android:style/Theme.NoTitleBar" 
```

2.去掉代码如果这是写在`Activity` `Class`,`OnCreate`方法

```
this.requestWindowFeature(Window.FEATURE_NO_TITLE);
this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

# java - 超大尺寸精灵表加载到 android - outofmemoryerror

> ID：16077147
> 
> 赞同：0
> 
> 时间：2013-04-18T07:38:46.270
> 
> 标签：java, android, sprite, out-of-memory

我的问题是什么是最好的解决方案或解决我的问题？

这是我的问题。我正在从 Flash 游戏中制作 2d android 游戏。我有一个尺寸为 8000 x 4800 的 png 图像。它是一个具有 10 列和 10 行的精灵表，每帧的尺寸为 800 x 480。我知道它对于 sprite sheet 来说是超大尺寸，但是因为 flash 游戏是超级动画并且具有良好的图形，我们只是将每个动作/场景导出为 png 序列以保留动画和图形的质量并避免计算动画。

如果我在android中加载图片，我得到了内存不足的错误。我认为这是因为图像大小。我在同一个屏幕上加载了 4 个相同尺寸的图像。请帮我。什么是最好的解决方案或解决此问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:45:27.350

您需要在显示相同的图像之前出售图像。

[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。

检查在内存中加载缩小版本下的主题。

此外，您应该在不使用时回收位图。就像在 onResume() 中加载位图和在 onPause() 中回收位图一样。

```
 bitmap.recycle() 
```

[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)

视频中的谈话是关于内存管理的。

# git - 想要设置一个将提交的文件复制到特定文件夹的挂钩

> ID：16077149
> 
> 赞同：12
> 
> 时间：2013-04-18T07:39:07.110
> 
> 标签：git, githooks, gitlab

**背景：**使用 PHP Laravel 框架和 MySQL 数据库开发 Facebook 应用程序。

我已经在我们的开发服务器上设置了 Gitlab 并在其上创建了一个存储库，其中团队已被添加并正在提交和推送代码。

我想做的是，当我将代码推送到 GitLab 上的特定分支（例如 Master）时，我希望它在 /var/www/productname 上可用，以便我也可以在 Facebook 画布中对其进行测试（那里发生的某些事情无法在您的本地计算机上进行测试）。

但是，我不希望每次在 master 上发生推送时钩子都复制所有文件，而只是复制被修改的文件。

任何人都可以帮助解决这样的钩子吗？

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T07:53:25.000

您需要向裸仓库（由 GitLab 管理）添加一个`post-receive`钩子，该钩子将：

*   维护工作树（git checkout -f master）
*   从那个工作中复制你想要的文件

那将是：

```
cd ~git/repositories/yourRepo.git/hooks
touch post-receive
chmod +x post-receive 
```

您可以确保只有在有人推动分支时才会激活钩子`master`：

```
#!/bin/bash
while read oldrev newrev refname
do
    branch=$(git rev-parse --symbolic --abbrev-ref $refname)
    if [ "master" == "$branch" ]; then
        # Do something
    fi
done 
```

对于该钩子完成的结帐，请参阅“ [GIT post-receive checkout without root folder](https://stackoverflow.com/questions/15927943/git-post-receive-checkout-without-root-folder/15930178#15930178) ”，即：
确保您指定`--git-dir`and `--git-work-tree`：

```
git --git-dir=/path/to/project_root.git --work-tree=/path/to/your/workingtree checkout -f 
```

同样，`/path/to/your/workingtree`可以是：

*   只有一个中间工作树供您从中提取要复制的相关文件。
*   或您的应用程序的路径，如果您希望在您的 wab 应用程序的目标目录中更新 master 中的*所有*文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T07:52:49.510

[Seb Duggan 博客上的这篇文章](http://sebduggan.com/blog/deploy-your-website-changes-using-git/)很好地描述了它。您只需创建`post-receive`包含以下内容的钩子：

```
#!/bin/sh
GIT_WORK_TREE=/path/to/webroot/of/mywebsite git checkout -f 
```

添加它`+x`标志，它将在给定文件夹中签出您的回购。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-25T15:32:14.900

使用 rsync 而不是 cp 进行此操作。它会自动进行差异检查。这样你的提交后钩子就不会变得不必要的复杂。

# c# - 是否可以从这 2 个 linq 语句中创建 1 个通用方法？

> ID：16077150
> 
> 赞同：5
> 
> 时间：2013-04-18T07:39:09.687
> 
> 标签：c#, linq

我有 2 个 linq 语句 - 目前在一个 switch 块的中间。声明如下。

```
pwStartTime = lender.ApplicationWindows
.Where(w => w.Name == pwPeriod && w.EndTime.TimeOfDay > dateToCheck.TimeOfDay)
.Select(w => w.StartTime)
.FirstOrDefault();

pwStartTime = lender.TransferWindows
.Where(w => w.Name == pwPeriod && w.EndTime.TimeOfDay > dateToCheck.TimeOfDay)
.Select(w => w.StartTime)
.FirstOrDefault(); 
```

正如您所看到的，唯一的区别是它们引用“lender”的两个不同属性，但是，linq 查询中使用的所有元素在“ApplicationWindows”和“TransferWindows”中都是相同的，尽管它们不是相同的对象并且每个确实包含其他独特的属性。

那么，可以通过一种通用方法返回 w.StartDate 吗？

提前致谢。

// 这是2个类

```
public class ApplicationWindow
{
    public string Name { get; set; }
    public DateTime StartTime { get; set; }
    public DateTime EndTime { get; set; }
}

public class TransferWindow
{
    public string Name { get; set; }

    public DateTime StartTime { get; set; }

    public DateTime EndTime { get; set; }

    [XmlIgnore]
    public TimeSpan Cycle { get; set; }

    [Browsable(false)]
    [XmlElement("Cycle")]
    public string CycleString
    {
        get { return XmlConvert.ToString(Cycle); }
        set { Cycle = value.IsNullOrEmpty() ? TimeSpan.Zero : XmlConvert.ToTimeSpan(value); }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T07:46:39.290

如果 ApplicationWindows 和 TransferWindows 实现了一个通用接口，那么您可以执行以下操作；

```
public DateTime GetStartTime(IEnumerable<IWindow> windows, string pwPeriod, TimeSpan timeOfDay)
{
    return windows.Where(w => w.Name == pwPeriod && w.EndTime.TimeOfDay > timeOfDay)
        .Select(w => w.StartTime)
        .FirstOrDefault();
} 
```

**更新**

如果您使用的是 LINQ To SQL，那么您可以通过创建与两个 Window 类具有相同名称（并且在相同命名空间中）的部分类来实现接口，并说这实现了接口。

*我相信这应该可行，尽管我已经有一段时间没有这样做了，我是用 VB.NET 做到的。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T08:37:49.040

您可以使用接口执行的操作的示例：

```
pwStartTime = lender.ApplicationWindows.FirstOrDefaultDateTime(pwPeriod, dateToCheck);
pwStartTime = lender.TransferWindows.FirstOrDefaultDateTime(pwPeriod, dateToCheck);

public interface IWindow
{
    string Name { get; }
    public DateTime StartTime { get; }
    public DateTime EndTime { get; }
}

public class ApplicationWindow : IWindow
{
    public string Name { get; set; }
    public DateTime StartTime { get; set; }
    public DateTime EndTime { get; set; }
}

public class TransferWindow : IWindow
{
    public string Name { get; set; }
    public DateTime StartTime { get; set; }
    public DateTime EndTime { get; set; }
}

public static class IWindowExt
{
    public static DateTime FirstOrDefaultDateTime(this IEnumerable<IWindow> windows, string pwPeriod, DateTime dateToCheck)
    {
        return windows
                .Where(w => w.Name == pwPeriod && w.EndTime.TimeOfDay > dateToCheck.TimeOfDay)
                .Select(w => w.StartTime)
                .FirstOrDefault();
    }
} 
```

当您有针对一个接口的方法时，更漂亮的解决方案是创建关联的扩展方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T07:46:04.397

`TransferWindow`为什么不为and创建一个接口或抽象基类`ApplicationWindow`，定义公共属性呢？然后你可以做这样的事情（假设`lender.TransferWindows`和`lender.ApplicationWindows`是它们各自类的列表 - 如果不是，则根据需要修改方法签名）：

```
public DateTime GetStartTime(IList<Window> windows, DateTime dateToCheck, string pwPeriod)
{
    return windows
    .Where(w => w.Name == pwPeriod && w.EndTime.TimeOfDay > dateToCheck.TimeOfDay)
    .Select(w => w.StartTime)
    .FirstOrDefault();
} 
```

# angularjs - 命名 Angular 指令（ng- vs data-ng-）

> ID：16077158
> 
> 赞同：11
> 
> 时间：2013-04-18T07:39:30.633
> 
> 标签：angularjs, angularjs-directive

标记 Angular 指令的推荐做法是什么？

除了 html 验证之外，在内置指令和我自己的自定义指令前加上“ `data-`”还有其他好处吗？

还是不必要的混乱？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T22:37:14.640

我会说数据 - 将是最佳实践。由于这将允许 html 进行验证，因此它应该是开发人员的标准做法。这可能会造成一些混乱，但总的来说，我认为它有助于保持应用程序和开发人员的完整性。并且看到到目前为止我可以说的角度无关紧要，那么真的没有理由不使用数据-。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-17T16:06:57.350

如果要使页面 HTML 有效，可以使用 data-ng- 而不是 ng-。
这不会出错

```
<div ng-app="">

<p>Input something in the input box:</p>
<p>Name: <input type="text" ng-model="name"></p>
<p ng-bind="name"></p>

</div> 
```

这将给出错误

```
<div data-ng-app="scope" data-ng-init="name='test'"

<p>Input something in the input box:</p>
<p>Name: <input type="text" data-ng-model="name"></p>
<p data-ng-bind="name"></p>

</div> 
```

# module - ZF2：在应用程序布局中获取模块名称（或路由）以进行菜单突出显示

> ID：16077159
> 
> 赞同：6
> 
> 时间：2013-04-18T07:39:30.810
> 
> 标签：module, zend-framework2, router

如何在 ZF2 中获取应用程序布局中的当前（选定）模块名称？目的：我的应用布局包括zf2 app的主菜单，每次选择一个模块我都需要高亮该模块的菜单声音。此外，当使用此菜单制作菜单时，我需要设置正确的路线（网址，操作）。每个模块都有一个菜单声音：

```
<ul class="nav">
 <?php foreach ($menu_modules as $mod):
  $is_active = ($mod['name'] == $CURRENT_MODULE_NAME)?'selected':'';//GET MODULE NAME
 ?>
 <!--  class="active" -->
 <li><a href="#" <?php echo $is_active;?> ><?php echo $mod['title']; ?></a></li>
 <?php endforeach; ?>

 <li><a href="<?php echo $this->url('login/process', array('action'=>'logout')); ?>"><?php echo $this->translate('Logout') ?></a></li>
</ul>

<div class="row-fluid" id="main_container">
    <?php echo $this->content; ?>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-01T14:46:11.290

我知道现在回答这个问题为时已晚，而且已经有很多可用的答案，但万一有人看到这个问题，它可能会有所帮助。

在主模块或任何模块中`Module.php`，写下 -

```
class Module {

    public function onBootstrap(MvcEvent $e) {

        $sm = $e->getApplication()->getServiceManager();

        $router = $sm->get('router');
        $request = $sm->get('request');
        $matchedRoute = $router->match($request);

        $params = $matchedRoute->getParams();

        $controller = $params['controller'];
        $action = $params['action'];

        $module_array = explode('\\', $controller);
        $module = array_pop($module_array);

        $route = $matchedRoute->getMatchedRouteName();

        $e->getViewModel()->setVariables(
            array(
                'CURRENT_MODULE_NAME' => $module,
                'CURRENT_CONTROLLER_NAME' => $controller,
                'CURRENT_ACTION_NAME' => $action,
                'CURRENT_ROUTE_NAME' => $route,
            )
        );
    }
} 
```

然后您可以`$CURRENT_MODULE_NAME`在布局文件中使用变量（如问题本身所做的那样）。如果需要，可以使用上面代码中提到的其余变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-18T00:10:13.473

我更喜欢更简单的方法而不需要处理`Module.php`

将此代码放入**layout.phtml**

```
$routeName = $this->getHelperPluginManager()->getServiceLocator()->get('Application')
               ->getMvcEvent()->getRouteMatch()->getMatchedRouteName();
if($routeName === "users") ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-01T14:41:14.393

使用**array_shift**而不是 array_pop （Kunal Dethe 答案）：

```
$controller = $this->getParam('controller');
$module_array = explode('\\', $controller);
$module = array_shift($module_array); 
```

# c++ - 如何检查回文列表

> ID：16077160
> 
> 赞同：0
> 
> 时间：2013-04-18T07:39:43.447
> 
> 标签：c++

我想知道如何编写一个函数来确定从波纹管代码中读取的列表是否是回文？例如，如果说数字列表是 123456，程序将打印出“这个列表不是回文”，如果列表是 12321，那么它会打印出“这个列表是回文”。

任何帮助，将不胜感激。

```
void popArray(int array1[]) {
    ifstream infile("TEST1.TXT");
    if (!infile) {
        cout << "Can't open file: " << endl;
        exit(EXIT_FAILURE);
    }
    for (int i = 0; i < 10; i++) {
        infile >> array1[i];
        cout << setw(2) << array1[i];
    }
}
void reverseList(int array1[]) {
    for (int x = 9; x > -1; x--) {
        cout << setw(2) << array1[x];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:43:38.033

我建议使用索引`i`并让它从`0`到`size/2`。然后在循环内比较`list[i] == list[(size - 1) - i ]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:47:00.753

```
bool isPalindrome(int array1[], int size) {
    for (int i = 0, j = size - 1; i < j; ++i, --j)
        if (array1[i] != array1[j])
            return false;
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:49:59.763

你甚至可以尝试这种方式

```
for(i=0;i<(size/2);i++)
 if(b[i] - b[size-i] !=0 )
  break;

if(i<(size/2))
 cout<<"Not palindrome";
else
 cout<<"palindrome"; 
```

假设`b`是原始数组的临时副本

# c - 在函数中切换对 printf 的调用如何确定我的代码是否不会崩溃？

> ID：16077165
> 
> 赞同：0
> 
> 时间：2013-04-18T07:39:53.973
> 
> 标签：c

我正在编写一个简单的函数，它在链表的开头创建一个新节点。当我尝试执行该文件时，我的 Windows 命令错误窗口出现“a.exe 已停止工作”。

对我来说一个谜是，当我`printf`在 的正文中添加一个调用时`insertNewNodeAtFront`，代码执行时没有上述错误框。想法？

这是源文件：

```
#include <stdio.h>

typedef struct NodeTag{
    const char* Airport;
    struct NodeTag * Link;                
    } NodeType;

void insertNewNodeAtFront(NodeType *, const char*);

void insertNewNodeAtFront(NodeType * L,  const char* str){

    NodeType * N;
    N = L;    
    NodeType * NewFirst;
    NewFirst->Airport = str;
    NewFirst->Link = N;
    L = NewFirst;
   //printf("L->Airport: %s\n",L->Airport); <---This is the line that magically makes it work.
}

int main(){
    NodeType * myitinerary;
    insertNewNodeAtFront(myitinerary,"ONT");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:50:02.117

正如 hmjd 所说，崩溃是由使用未初始化的内存引起的。当您添加更多代码时它不会崩溃的原因是这会导致编译器在内存中移动东西，因此未初始化的变量指向不同的地方。

但是，它仍然很糟糕：您的代码仍然在内存中删除了一些随机位置，这很可能会导致下次崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:43:21.950

该代码正在推迟一个未初始化的指针，导致[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)：

```
NodeType * NewFirst;
NewFirst->Airport = str; 
```

在使用前分配内存`NewFirst`：

```
NodeType* newFirst = malloc(sizeof(*newFirst));
if (newFirst)
{
} 
```

它`printf()`在未定义行为的表现中起主导作用，但不是原因。

此外，如果您希望更改对`L`调用者可见，则需要将指针的地址传递给`insertNewNodeAtFront()`C 通过值传递（请参阅[http://c-faq.com/ptrs/passptrinit.html](http://c-faq.com/ptrs/passptrinit.html)）：

```
void insertNewNodeAtFront(NodeType** L,  const char* str){
    /* ...snip... */
    *L = NewFirst;
}

NodeType* myitinerary = NULL;
insertNewNodeAtFront(&myitinerary,"ONT"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:45:29.757

当你的程序有未定义的行为时，各种各样的事情都可能发生。

具体来说，您实际上从未`malloc`为您的节点分配内存（使用 ），因此当您开始执行以下操作时`NewFirst->Airport = str;`- 它会覆盖内存中的随机地址（NewFirst 是一个未初始化的指针）。所有的赌注都取消了。在继续您的实现尝试之前，您可能应该搜索实现链接列表的示例代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T07:45:46.163

而不是这段代码

```
 void insertNewNodeAtFront(NodeType * L,  const char* str){

        NodeType * N;
        N = L;    
        NodeType * NewFirst;
        NewFirst->Airport = str;
        NewFirst->Link = N;
        L = NewFirst;
       //printf("L->Airport: %s\n",L->Airport); <---This is the line that magically makes it work.
    } 
```

使用此代码 insertFirst

```
void insertNewNodeAtFront(NodeType ** L,  const char* str){

    NodeType * NewFirst = malloc(sizeof(NodeType));
    NewFirst->Airport = str;
    NewFirst->Link = *L;
    *L = NewFirst;
    printf("L->Airport: %s\n",(*L)->Airport);
} 
```

在主函数中

```
insertNewNodeAtFront(&myitinerary,"ONT"); 
```

# mysql - mysql存储过程语法不一致

> ID：16077166
> 
> 赞同：0
> 
> 时间：2013-04-18T07:39:54.853
> 
> 标签：mysql, syntax

我有一个存储过程，它在我的本地 PC 上的语法上是可以接受的，在那里我有 MySQL 工作台 5.2.44，我认为我的本地 MySQL 版本是 5.5.29，从文件夹名称来看。这是代码，为了说明，我已将其减少到最低限度

```
DELIMITER $$

CREATE PROCEDURE `usp_insert_booking_test_2`(
        IN  p_dtmTimeSlot DATETIME  
     )

BEGIN 

     INSERT INTO tblBookings (dtmTimeSlot)
     SELECT p_dtmTimeSlot
     FROM tblBookings
     WHERE NOT EXISTS (SELECT * FROM tblBookings WHERE dtmTimeSlot = p_dtmTimeSlot) LIMIT 1;

END$$ 
```

如您所见，我正在努力确保不会在同一时间段创建两个预订。是的，我对桌子也有限制。腰带和牙套。当我尝试在我的远程主机（运行 MySQL 版本 5.1.68-cll）上添加此过程时，它说

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 12 行的 '' 附近使用正确的语法

第 12 行是 WHERE NOT EXISTS 行。我试过删除 LIMIT 1，这没什么区别。有没有办法编写查询以便 MySQL 5.1 接受它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:13:41.633

我需要添加

分隔符；

到代码的末尾，如图所示。不知道为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:27:51.790

用这个。

```
DELIMITER $$

CREATE PROCEDURE `usp_insert_booking_test_2`(
    IN  p_dtmTimeSlot DATETIME  
 )

BEGIN 

 INSERT INTO tblBookings (dtmTimeSlot)
 SELECT p_dtmTimeSlot
 FROM tblBookings
 WHERE NOT IN (SELECT * FROM tblBookings WHERE dtmTimeSlot = p_dtmTimeSlot LIMIT 1);

END $$
DELIMITER ; 
```

这里 somevalue 是您要插入的值。

# character-encoding - 如何获取文件名的字符集

> ID：16077168
> 
> 赞同：1
> 
> 时间：2013-04-18T07:40:01.157
> 
> 标签：character-encoding, filenames

大家好。

无论如何要检索文件名的字符集？

我想将文件名（不包括内容）的字符集转换为特定的编码，如 UTF-8。但我需要原始字符集来实现这一点。

任何解决方案将不胜感激。命令行解决方案更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:45:27.037

这样，就可以得到当前的字符集：System.getProperty("file.encoding")

# javascript - 通过 JAVASCRIPT 添加 iframe

> ID：16077169
> 
> 赞同：0
> 
> 时间：2013-04-18T07:40:01.907
> 
> 标签：javascript, iframe

我正在尝试获取通过 Javascript 添加 iframe 的 javascript。它在标签之前创建 iframe。

你可以看到[jsfiddle 演示。](http://url.funtwixt.com/6) 但我不想添加标签。我只想添加外部 .js 文件，它可以自己做所有事情！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:45:57.720

用这个

```
var newElem = createElement('script');
newElem.setAttribute('src',      'http://example.com/js/script.js');
newElem.setAttribute('type',     'text/javascript');
newElem.setAttribute('language', 'JavaScript');
document.getElementById('IdFromTheHeadElem').appendChild(newElem); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:42:16.400

您可以使用创建标签

`document.write("<iframe..............>");`

编辑：我在 jQuery 的评论中写的解决方案：

在您的 JS 文件中：

```
$(function(){
    $('#container').html('<iframe........');
}); 
```

在您的 HTML 中：

```
<div id="#container"></div> 
```

将其包含在您的标题中：

```
<script src=".............yourscriptname.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T17:18:18.280

从您的 jsfiddle 看起来您应该这样做（在纯 JS 中）以避免直接在 HTML 代码中定义 iframe：

```
var iframe = document.createElement('iframe');
iframe.id = 'iframeID';
document.body.appendChild(iframe);
// the rest is manipulating this iframe
iframe.contentDocument.write("<html><head></head><body><div id='foo'>The div</div></body></html>");
iframe.contentDocument.getElementById('foo').innerHTML = "Greetings from outside!"; 
```

[jsfiddle 上](http://jsfiddle.net/QfDyq/8/)的代码（我将代码包装在一个闭包中以防止污染全局命名空间）

`document.body.appendChild(iframe);`应该更改为其他内容，具体取决于您要将其放置在页面内的位置（例如`document.getElementById('some-div-id').appendChild(iframe);`）

# asp.net - gridview 中的 PageIndexChanging 不会触发

> ID：16077171
> 
> 赞同：0
> 
> 时间：2013-04-18T07:40:12.897
> 
> 标签：asp.net, events, gridview, page-index-changed

我从互联网上下载了一个免费模板，现在我在我的 ASP.NET 项目中使用它。我有一个 gridview 并且我正在使用 Paging 但由于模板的原因，PageIndexChanging 事件不会触发。

现在是否有替代方法，因为我在 gridview 中的数据非常大，因此 gridview 变得很长并且超出了我的模板。此事件可以在单击按钮时触发吗？

我的 .cs 代码是：

```
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView1.PageIndex = e.NewPageIndex;
    emp();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:19:50.467

尝试这个.......

```
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView1.PageIndex= e.NewPageIndex;
    emp();
} 
```

在 Aspx 文件中设置属性............

```
 AllowPaging = true 
PageindexChanged = GridView1_PageIndexChanged 
```

# html - 从 AJAX 获取 JSON 响应并放入 HTML 以在另一个 JSP 中呈现

> ID：16077174
> 
> 赞同：0
> 
> 时间：2013-04-18T07:40:35.200
> 
> 标签：html, ajax, json, jsp

我的 Web 应用程序中有一个 jsp。此 jsp 在网格中显示来自 json 的数据。：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
            <html>
            <head>
            <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
            <title>ARGO</title>
            <link rel="stylesheet" type="text/css" href="css/jquery-ui.css" />
            <link rel="stylesheet" type="text/css" href="jtable/themes/metro/blue/jtable.min.css"/>
            <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
            <script type="text/javascript" src="js/jquery-ui.js"></script>
            <script type="text/javascript" src="jtable/jquery.jtable.min.js"></script>
            <script type="text/javascript" src="js/argo.js"></script>
<body><div id= "ProductTable"></div>
                    $('#ProductTable').jtable({
                        title: 'Table of people',
                        actions: {
                           listAction: '/bsnet/test.html'
                         },

                        fields: {
                            productid: {
                                title: "Organization",
                                width:"20%"
                            },
                            productname: {
                                title: "Role",
                                width: "10%"
                            },
                            unitcost: {
                                title: "Status",
                                width: "20%"
                            }
                        }
                    });
                    $('#ProductTable').jtable('load');
                });
            </script>
            </html> 
```

我正在使用 jtable 在网格中显示内容。
JTable 只需要 JSON 响应。它期望以这种格式响应：

```
 {  
             "Result":"OK",
             "Records":[
                {"productid":"FI-SW-01","productname":"Koi","unitcost":10.00,"status":"P","listprice":36.50,"attr1":"Large","itemid":"EST-1"}}]} 
```

我的 Web 服务没有发送 "Result":"OK" 作为 json 响应的一部分。

所以我决定在中间嵌入一个 HTML，它将把它添加到响应中并将它发送到 jtable jsp。

```
 This is the HTML that I created:

                <html>
                    <head>
                        <script type="text/javascript" src="js/jquery-1.9.1.js"></script>
                    </head>
                    <body>
               <!-- placing this in the body of the HTML  -->       
        {"Result":"OK","Records": 
                        <script type="text/javascript">
                        $(document).ready(function(){
    // json file that contains the server response
    // this will be replaced by a web service URL                     
    $.getJSON("/test/data.json", function(data){
    // adding the response to the body
                            $('body').append("<span>"+JSON.stringify(data)+"</span>}");
                          });
                        });
                        </script>
                    </body>
                </html>
             When I refer to the html in the jsp by adding it as part of the URL, I get the entire HTML content like: <html><head>....
            but I want only the json response or the body content 

            {
             "Result":"OK",
             "Records":[
                {"productid":"FI-SW-01","productname":"Koi","unitcost":10.00,"status":"P","listprice":36.50,"attr1":"Large","itemid":"EST-1"}]} 
```

来自jsp中的HTML。那可能吗？
当我在浏览器中点击 HTML 时，我可以看到所需的响应。
有什么帮助？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:10:03.320

好的，这是一个使用 JSP scriptlet 的最简单的解决方案：

将其放入您的包装 JSP（仅此）：

```
<%@ page import="java.net.URL" %>
<%@ page import="java.io.InputStream" %>
<%@ page import="java.util.Scanner" %>
{
"Result":"OK",
"Records":
<%
    final String yourServiceURL = "your_FULL_Url_with_http_and_stuff";
    final String yourServiceEncoding = "UTF-8";

    final InputStream stream = new URL(yourServiceURL).openStream();
    final String text = new Scanner(stream, yourServiceEncoding ).useDelimiter("\\A").next();
    out.write(text);
%>
}

<%
    response.setContentType("application/json");
%> 
```

如果从流中读取失败，您还可以向该代码添加一些异常处理以生成“结果：错误”。

# javascript - 表单提交后只打开一次彩盒？

> ID：16077175
> 
> 赞同：0
> 
> 时间：2013-04-18T07:40:35.380
> 
> 标签：javascript, jquery, colorbox

我们有一种情况，表单提交结果必须显示在 Colorbox 中。为此，我们做了一个 jQuery.post 请求并尝试在颜色框中打开返回的 html。这是代码。

```
jQuery("#f1").submit(function(){
    var formData = $(this).serializeArray();
    jQuery.post("index.php", formData, function(r){
        jQuery.fn.colorbox({html:r,width:"80%",height:"80%",title:"Event Details"});
    });
        return false; // To override non-ajax submitting
    }); 
```

一切都很好，但只是第一次。因此，当表单提交第一次发生时，它会在颜色框中打开。第二次它在新页面中打开。这里可能有什么问题？

# java - 要访问 Java 类中的变量，是通过方法返回它的值，还是通过 myClass.variable 访问它更好？

> ID：16077190
> 
> 赞同：0
> 
> 时间：2013-04-18T07:41:54.110
> 
> 标签：java

我认为标题说明了一切。也许我应该问：不使用方法来返回变量或它的值是不是很糟糕？一个示例是具有 x 和 ay 变量的二维点类。

使用`myPoint.x`获取 x 变量而`myPoint`不是`myPoint.xValue()`，它只是返回有什么问题`mypoint.x`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T07:44:17.110

保持内部隐私，并提供访问方法。

外部世界不需要知道内部，如果你以后改变内部，你可以保持API不变，内部改变你想要的，所以没有外部影响。

通过方法检索要好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:44:55.810

你应该让你的代码，封装，使用setter和getter。

[在java中设置和获取方法？](https://stackoverflow.com/questions/6638964/set-and-get-methods-in-java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T07:45:43.680

这完全取决于：

如果您正在创建一个符合**JavaBeans** [Specification](http://en.wikipedia.org/wiki/JavaBeans)`Point`的类，那么您的变量必须使用相关的 getter/setters 方法。**`private`**

 **此外，如果您正在创建 API，那么`myPoint.x`也不合适，因为您希望按合同创建应用程序，即带有`Point.getX()`. 这样，使用 API，开发人员就知道有`Point`一个从方法返回`x`坐标的`getX()`方法。

最终取决于您的设计。我更喜欢保持[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)我的变量以限制对我的内部（例如变量）的访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T07:47:22.570

封装是java的特性之一。

通过将变量设为私有并提供适当的访问器和修改器来更新或检索这些值来避免直接访问变量。

因此，使用方法来访问这些变量值并将这些变量声明为私有。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T07:47:30.273

使用 getter 访问更安全。许多程序员使用**private**关键字保护他们的类变量。我建议使用 getter 和 setter 公共方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T07:47:53.237

好的方法是遵循`encapsulation`Java 中的规则。

提供私有变量和公共 setter 和 getter。

[供参考链接](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_05.htm)**

# git - 如何正确地将本地 git 仓库与远程仓库合并（在 github 上）？

> ID：16077191
> 
> 赞同：0
> 
> 时间：2013-04-18T07:41:55.927
> 
> 标签：git, github, branching-and-merging

我在使用远程 github 存储库的更改更新本地 git 存储库时遇到问题。本地存储库自上次从远程存储库更新以来已更改。当我尝试在 Eclipse 中从 github 拉取数据时，我收到了合并冲突错误。之后我尝试手动合并甚至覆盖更改。尽管如此，在 Eclipse 中，我在工作区中所有跟踪的项目旁边显示了向下箭头和数字 1。我尝试的下一件事是承诺。提交成功，但更改未提交到远程（github）存储库。怎么了？

# ios - 与 archiveRootObject:toFile: 和 writeToFile 的区别：

> ID：16077192
> 
> 赞同：9
> 
> 时间：2013-04-18T07:42:03.230
> 
> 标签：ios, objective-c, nskeyedarchiver

最近，我正在学习 NSKeyedArchiver 和 NSKeyedUnarchiver。我发现有三种方法可以归档数组，我正试图找出差异。

**1.使用`archiveRootObject:toFile:`**

```
 [NSKeyedArchiver archiveRootObject:testArray toFile:filePath]; 
```

**2.从文件中获取数据`archivedDataWithRootObject:`并将其写入文件**

```
 NSData *data = [NSKeyedArchiver archivedDataWithRootObject:testArray];
    [data writeToFile:filePath atomically:YES]; 
```

**3.使用encodeObject：获取数据**

```
 NSMutableData *data = [NSMutableData data];
    NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
    [archiver encodeObject:testArray forKey:@"testArray"];
    [archiver finishEncoding];
    [data writeToFile:path atomically:YES]; 
```

经过测试，我发现上述所有方法都可以正常工作并将相同的内容写入文件。

Q1：以上所有方式有什么区别？

Q2：我可以以第三种方式使用 NSData 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T07:50:03.813

第一个不会让您选择如何处理数据。它将转到一个文件。例如，我使用第二种方式通过网络连接发送数据。它更灵活。第三种方式做同样的事情，除了你可以把单个对象放进去。我不确定它是否可以与现有的数组一起使用，但它可能会。它更加灵活，因此您无需准备好数组或字典。

差不多就是这样。这一切都与便利性与灵活性有关。

# php - 将数据导出到excel工作簿时出现phpexcel异常错误

> ID：16077200
> 
> 赞同：0
> 
> 时间：2013-04-18T07:42:44.927
> 
> 标签：php, codeigniter, phpexcel

我正在尝试使用 phpexcel 将数据导出到 excel，但它返回此错误，但指定的 excel 文件在该位置突出显示。问题是excel文件在那个位置，但是一旦它返回那个错误，文件就找不到了，我做错了什么？

错误：

**致命错误**：C:\server\htdocs\NQCL\application\third_party\PHPExcel 中的消息“文件 zip://workbooks/NDQA201303001/NDQA201303001.xlsx#xl/media/nqcl1.png 不存在”未捕获的异常“异常” \Writer\Excel2007\ContentTypes.php:216

处理进程的网页脚本代码

```
 $objReader = PHPExcel_IOFactory::createReader('Excel2007');           

        $objPHPExcel = $objReader->load("workbooks/" . $labref . "/" . $labref . ".xlsx");
        $objPHPExcel->getActiveSheet(0)
               ->setCellValue('E22', 'Tabs/Capsule Weight')

                ->setCellValue('E23', 'No.')
                ->setCellValue('F23', 'Tabs/Capsule Weights (mg)');
$dir = "workbooks";

        if (is_dir($dir)) {

            $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
            $objWriter->save("workbooks/" . $labref . "/" . $labref . ".xlsx");

            echo 'Data exported';
        } else {
            echo 'Dir does not exist';
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:00:31.893

如果您使用 Codeigntier 将数据从查询导出到 Excel，这非常容易。您不需要为此使用 php excel。Codeigniter 中提供了所有资源。

看看我的这个答案，这可能对你有帮助。它将以 csv 格式导出数据，您可以使用 xlsx 进行更改。

[Codeigniter 中的报告](https://stackoverflow.com/questions/11189021/reports-in-codeigniter/11189368#11189368)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T07:56:54.153

Use the bellow code and change it as per your requirements.This works fine.

```
<?php
include("config.php");
$result = mysql_query("SELECT * FROM recruitment" );

function xlsBOF() { 
echo pack("ssssss", 0x809, 0x8, 0x0, 0x10, 0x0, 0x0);  
return; 
}
function xlsEOF() { 
echo pack("ss", 0x0A, 0x00); 
return; 
}
function xlsWriteNumber($Row, $Col, $Value) { 
echo pack("sssss", 0x203, 14, $Row, $Col, 0x0); 
echo pack("d", $Value); 
return; 
} 
function xlsWriteLabel($Row, $Col, $Value ) { 
$L = strlen($Value); 
echo pack("ssssss", 0x204, 8 + $L, $Row, $Col, 0x0, $L); 
echo $Value; 
return; 
}
function xlsWriteString( $Row , $Col , $Value )
{
$L = strlen( $Value );
echo pack( "ssssss" , 0x204 , 8 + $L , $Row , $Col , 0x0 , $L );
echo $Value;
return;
}
// Send Header
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); 
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");;
header("Content-Disposition: attachment;filename=export.xls ");
header("Content-Transfer-Encoding: binary ");

// XLS Data Cell
xlsBOF();
xlsWriteLabel(1,0,"Application No");
xlsWriteLabel(1,1,"Date of Application");

$xlsRow = 2;

while($row = mysql_fetch_array($result))
{
$applicationno=$row['applicationno'];
$dateofapplication=$row['dateofapplication'];

//echo $salarydetails;
xlsWriteNumber($xlsRow,0,"$applicationno");
xlsWriteNumber($xlsRow,1,"$dateofapplication");

$xlsRow++;

}

xlsEOF();
exit();

//}
?> 
```

# sinatra - vlad 将 Sinatra 应用程序部署到Passenger 4.0.0.rc6。在生产服务器上，它一直需要：Gemfile 中的开发组

> ID：16077201
> 
> 赞同：1
> 
> 时间：2013-04-18T07:42:48.090
> 
> 标签：sinatra, passenger, gemfile, vlad-deployer

在生产服务器上，Passenger(4.0.0.rc6 + nginx) 不断要求`:development`. `Gemfile`从应用程序中手动将它们注释掉后`Gemfile`运行良好。否则，Passenger 会因为缺少宝石而无法启动应用程序。

我检查了错误页面，似乎Passenger在生产模式下运行：

```
Environment (value of RAILS_ENV, RACK_ENV, WSGI_ENV and PASSENGER_ENV)
production 
```

以下是我的简单应用程序的来源，我是否缺少让乘客工作的任何设置？谢谢。

这是我的`app.rb`，一个简单的 sinatra 应用程序。

```
require 'rubygems'
require 'sinatra'
get "/" do
   "Hello!"
end 
```

我通过 vlad 将它部署到生产服务器。这里是`config/deploy.rb`

```
require 'bundler/vlad'
set :application, "sinatratest"
set :domain, "server domain"
set :deploy_to, "path/on/server"
set :repository, "mygithub branch" 
```

和我的`config.ru`

```
require 'rubygems'
require 'sinatra'
require './app'
run Sinatra::Application 
```

和`Gemfile`

```
source 'https://rubygems.org'
gem 'sinatra'
group :development do
    gem 'vlad', require: false
    gem 'vlad-git', require: false
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:40:19.227

回答我自己的问题：

[请参阅Bundler 手册](http://gembundler.com/v1.3/deploying.html)中的 vlad 部分，`require 'bundler/vlad'`并创建一个新任务，该任务同时运行`vlad:update`和`vlad:bundle:install`或插入`vlad:bundle:install`原始`vlad:update`命令。

如果服务器使用 RVM，那么它需要在 vlad 任务中`bundle`显式设置路径`source ~/.rvm/scripts/rvm`或使用`vlad-extra`gem，请参阅[这篇文章](http://dennisreimann.de/blog/deployment-with-vlad/)。

我正在做什么以使其发挥作用：

在`config/deploy.rb`：

```
require 'bundler/vlad'
set :bundle_cmd, "source $HOME/.rvm/scripts/rvm && bundle" 
```

在`Rakefile`：

```
namespace :vlad do
  desc "Run vlad:update and vlad:bundle:install"
  task :deploy => %w[vlad:update vlad:bundle:install]
end 
```

在本地机器上运行`rake vlad:deploy`，它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:45:55.670

我认为问题是

> 需要“红宝石”

据我了解，这意味着需要 Gemfile 中的所有宝石。只需要具有以下功能的 Productiv 宝石：

```
require 'rubygems'
require 'bundler/setup' 
```

来源： http: [//gembundler.com/v1.3/rationale.html](http://gembundler.com/v1.3/rationale.html)

# python - 如何通过按钮获得总工人数？

> ID：16077202
> 
> 赞同：0
> 
> 时间：2013-04-18T07:42:50.140
> 
> 标签：python, xml, openerp

当我在选择工人树视图中添加工人时，我的要求是这样的，然后需要在右侧底部总工人字段中添加它们的总数。它可以在我要保存或单击**（更新）**按钮时显示。我指的是购买模块，但我找不到单击该按钮时调用的函数exaclty。

[我上传到这里](https://github.com/priyankahdp/openerp.git)@GitHub的整个代码 参考 bpl_view.xml 中的第 397 行和 bpl.py 中的第 335 行

根据购买模块，我编写了函数。但它只有返回语句。这也让我感到困惑。

```
def button_total(self, cr, uid, ids, context=None):
    return True 
```

请就这个问题给我建议&请告诉我为什么单击按钮时会自动保存记录。它只返回 True 语句。? ?

![屏幕](https://i.stack.imgur.com/ghEqm.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:39:45.283

写下这段代码：

```
def button_total(self, cr, uid, ids, context=None):
    tea_worker_line_ids = self.browse(cr, uid, ids[0], context=context).selected_tea_workers_line_ids or []
    total_tea_worker = len(tea_worker_line_ids)
    self.write(cr, uid, ids, {'total_workers': total_tea_worker}, context=context)
    return True 
```

# sql-server - 将 Tsql 查询结果从行转换为列名，其他行作为列数据

> ID：16077219
> 
> 赞同：2
> 
> 时间：2013-04-18T07:43:43.563
> 
> 标签：sql-server, tsql

我使用此查询来获取结果：

```
Declare @Mag Int = 237006
;With Res
As
(
  Select
    Mnf.FileTypeID As MagType,
    Mnf.InsertDate As MagDate,
    Mnf.Star,
    Nl.LogType,
    Nl.InsertDate As LogDate
  From 
    MagazineNumberFiles As Mnf
    Left Outer Join Nomags_Log As Nl On Nl.MagazineNumberID = Mnf.MagazineNumberID
  Where 
    Mnf.MagazineNumberID = @Mag
)
Select * From Res 
```

此查询的结果是：

```
MagType MagDate         Star    LogType LogDate
2           2013-04-13  *       7       2013-04-16 
6           2013-04-14  *       3       2013-04-17 
8           2013-04-15  NULL    NULL    NULL 
```

我想将此结果转换为：

```
MagType2    MagStar2 MagType6   MagStar6 MagType8 MagStar8 LogType7     LogType3
2013-04-13  *        2013-04-14 *        5        NULL     2013-04-16   2013-04-17 
```

如何使用 tsql 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:51:33.973

您可以使用一些丑陋的动态 sql：

```
declare @sql nvarchar(max) = '';

select @sql = 'select ' + stuff((select
',''' + convert(varchar,MagDate) + ''' as MagType' + convert(varchar,MagType)
+ char(10)
+ isnull(',''' + convert(varchar,Star) + '''', ',null') + ' as MagStar' 
+ convert(varchar,MagType)
+ char(10)
+ isnull(',''' + convert(varchar,LogDate) + ''' as LogType', '') 
+ isnull(convert(varchar,LogType), '')
+ char(10)
from Res
for xml path(''))
,1,1,'');

exec sp_executesql @sql; 
```

# android - 在Android中，哪个更适合上传大文件？单独进程的服务或

> ID：16077221
> 
> 赞同：0
> 
> 时间：2013-04-18T07:43:58.990
> 
> 标签：android, network-programming, android-asynctask, android-service

当应用程序需要上传很多大文件时，这将是一个更好的解决方案：

1）在单独的进程（*即远程服务*）上执行此操作？

2）使用单独的线程（或`AsyncTask`）？

对此有明确而明确的答案吗？

顺便说一句，应用程序一直在上传东西——通常是非常小的数据块。它时不时需要发送大文件，所以我想用一种单独的机制来做到这一点，然后是我正在使用的机制。（顺便说一句，我正在使用单个任务线程的小块，效果很好）

我也明白这`AsyncTask`对一次性操作有好处，线程更适合多次操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:47:40.750

使用 AsyncTask 总是更好，因为 AsynsTask 只不过是一个线程，因为您要上传多个文件，因此需要多线程以避免任何异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:49:03.283

无需创建全新的流程。后台服务是最好的选择。将您的活动绑定到您的服务，并在您想要发送数据时激活它。最好在服务中使用线程/AsyncTask 发送（是的，即使在服务中也需要进行多线程）。我更喜欢 AsyncTask，因为它们易于管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:50:52.250

根据[使用 AsyncTask 或 Service 在后台上传文件更好吗？](https://stackoverflow.com/questions/13706059/is-it-better-to-use-asynctask-or-service-to-upload-a-file-in-background)服务可能会更好，因为服务特别适合长时间在后台做事。

同一页面还提到，当 Activity 进入后台时，AsyncTasks 可能会被终止。

# iphone - 未调用带参数的初始化方法

> ID：16077222
> 
> 赞同：0
> 
> 时间：2013-04-18T07:44:17.133
> 
> 标签：iphone, objective-c, xcode

我花了几个小时试图解决这个问题我试图用参数初始化一个类

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //Fetch the value of the selected row in NSString
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
   // NSString *tableRowValue = cell.text;
     tableRowValue = [[listOfItems objectAtIndex:indexPath.row]objectForKey: @"clientId"];

    //Call the next view

    ContactsList *contactsList = [[ContactsList alloc] initWithNibName:NSStringFromClass([ContactsList class]) bundle:nil];
    @try {

        [self presentModalViewController:contactsList animated:YES];
    }
    @catch (NSException *ex) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:[NSString stringWithFormat:@"%@",ex]
                                                       delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
        [alert show];
    }

    contactsList.modalTransitionStyle = UIModalTransitionStyleCrossDissolve ;

    //Initialize the view with the clicked row value thwough NSString variable
    [contactsList init:tableRowValue];

} 
```

这行代码

```
[contactsList init:tableRowValue]; 
```

我收到以下警告：未使用表达式结果

在 ContactsList 类中，未调用 init 方法

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:59:56.657

ContactList 对象已经在 initWithNibName: 方法中初始化，该方法又调用从 NSObject 继承的 init 方法（不带参数）。

如果您需要在初始化后设置视图，请创建一个名为“setupWithTableRowValue:”或类似名称的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:28:17.027

你不应该那样打电话`init`。`init`应该在分配对象后首先调用，然后再调用。在您的情况下`init`，已经通过`initWithNibName`.

改用一些二传手。你的二传手不需要返回任何东西。init 总是返回 id。所以 contactsList = [contactsList init:tableRowValue]; 如果在 contactList = [ContactsList alloc]; 之后直接调用它会很好。因为`init`实际上可能返回另一个对象，而不是调用它的对象。您没有使用返回值，因此理论上可以释放您的对象。

再次：使用 setter 或类似方法传递`tableRowValue`给`contactsList`.

# python - 导入中间件 cms.middleware.page 时出错：“没有名为 middleware.page 的模块”

> ID：16077224
> 
> 赞同：0
> 
> 时间：2013-04-18T07:44:22.947
> 
> 标签：python

即使我的路径看起来正确，我也无法导入模块。

```
>>> import cms.middleware.page
Traceback (most recent call last):
  File "<console>", line 1, in <module>
ImportError: No module named middleware.page 
```

Heres显示我的路径没问题

```
>>> for x in sys.path:
...     if x == "/usr/local/lib/python2.7/site-packages":
...         print x
...
/usr/local/lib/python2.7/site-packages 
```

这是模块

```
[root@monty codecrab]# ls -l /usr/local/lib/python2.7/site-packages/cms/middleware/page.py
-rw-r--r-- 1 root root 1304 Apr 17 19:49 /usr/local/lib/python2.7/site-packages/cms/middleware/page.py 
```

这是文件

```
[root@monty cms]# pwd
/usr/local/lib/python2.7/site-packages/cms
[root@monty cms]# ls -l __init__.py middleware/__init__.py middleware/page.py
-rw-r--r-- 1 root root   47 Apr 17 19:49 __init__.py
-rw-r--r-- 1 root root    0 Apr 17 19:49 middleware/__init__.py
-rw-r--r-- 1 root root 1304 Apr 17 19:49 middleware/page.py 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:17:26.283

这可能是由于您的软件包安装不正确。

为了能够做到这一点`import cms.middleware.page`，该`cms`目录必须在您的 Python 路径上，并且`cms`和`middleware`目录都包含一个`__init__.py`文件，以便将它们视为 Python 包。

以下文件/目录必须存在：

```
/usr/local/lib/python2.7/site-packages/cms
/usr/local/lib/python2.7/site-packages/cms/__init__.py
/usr/local/lib/python2.7/site-packages/cms/middleware
/usr/local/lib/python2.7/site-packages/cms/middleware/__init__.py
/usr/local/lib/python2.7/site-packages/cms/middleware/page.py 
```

# ios - 比较从 ui 到 sqlite 数据库图像的图像

> ID：16077228
> 
> 赞同：0
> 
> 时间：2013-04-18T07:44:27.650
> 
> 标签：ios, sqlite, uiimage

我想在 ios 中创建一个应用程序，该应用程序在 imageview 中具有图像，并且在数据库中包含数千张图像，这些图像将用于比较当前在图像视图中的图像

为了。例如：假设我在 imageView 中有一些名人的图像。然后我必须将此图像与 sqlite 数据库进行比较，并显示与之匹配的最合适的图像/图像列表。

这只是一个原始的想法，还没有开始工作，所以我不能显示任何代码

ios中是否有任何开源库可以用来实现这一目标？？？或者有人可以指导我一些链接。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T13:09:39.733

没有找到开源库，我使用 OpenCV 创建了自己的逻辑并将图像存储在数据库中。我用[分页](http://en.wikipedia.org/wiki/Pagination)概念来解决要处理的大量数据谢谢

# windows-8 - 为未全屏运行的 Windows 8 应用程序选择哪种 Visual Studio 项目类型

> ID：16077229
> 
> 赞同：0
> 
> 时间：2013-04-18T07:44:32.000
> 
> 标签：windows-8, visual-studio-express

我有一个想法，我想使用 VS2012 Express for Windows 8 开发一个 Windows 8 应用程序。该应用程序将有一个非常简单的 UI，并且交互很少。我希望该应用程序具有一种“小部件”外观，但我不知道这是否可以通过 Windows 8 应用程序实现，或者我需要另一种类型的项目。我的问题是这是否可以在 VS2012 Express for Windows 8 中使用简单的空白应用项目类型来完成？

# android - 更改默认相机属性

> ID：16077230
> 
> 赞同：0
> 
> 时间：2013-04-18T07:44:35.940
> 
> 标签：android, camera

我想从我的应用程序中使用

```
Intent camera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(camera, TAKE_PICTURE); 
```

并将其发送到网络服务器。但由于网络服务器将其压缩为**大小不超过 50 kb的****150x150 图像**，因此我不需要拍摄一些**3264x2448****大小 ~ 2 mb**的图像，因为发送传输需要大量时间。我想拍摄最小尺寸的图像。

 ******那么，有没有办法让相机提供特定尺寸的图像？

我尝试使用 Camera API 并更改其属性：

```
private Camera mCamera;

Camera.Size pictureSize = getSmallestPictureSize(mCamera
                .getParameters());
        if (pictureSize != null) {
            mCamera.getParameters().setPictureSize(pictureSize.width,
                    pictureSize.height);
        }

private Camera.Size getSmallestPictureSize(Camera.Parameters parameters) {
        Camera.Size result = null;

        for (Camera.Size size : parameters.getSupportedPictureSizes()) {
            if (result == null) {
                result = size;
            } else {
                int resultArea = result.width * result.height;
                int newArea = size.width * size.height;

                if (newArea < resultArea) {
                    result = size;
                }
            }
        }

        return (result);
} 
```

问题是我仍然得到更大的图像。但这不是实际问题：

当我为此使用预览时，就像这样

![在此处输入图像描述](https://i.stack.imgur.com/dsUtc.png)

不允许用户旋转预览、放大/缩小等。

有没有办法使用带有自定义参数的实际相机预览？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:53:24.407

一些相机开始在横向模式下拍摄一些在纵向模式下的图像。这可以在 sdk 级别修复，对于 cpu，它在运行时会有点昂贵，但可以完成。

您需要更小的尺寸：

- 在 sdk 级别实现一个管道，您将在其中将捕获的图像缩小到原始图像的 10-15%，它会耗尽电池，但可以做到。- 在 ndk 级别，您必须为每个支持的相机实现自定义驱动程序......对于这个自定义驱动程序，您也将实现自定义软件，一切都很好。******

# jquery - 回发后停止jquery ui窗口关闭

> ID：16077231
> 
> 赞同：1
> 
> 时间：2013-04-18T07:44:40.097
> 
> 标签：jquery, asp.net, jquery-ui, state

我有一个带有一组文本框和一个图像上传器的 jquery UI 窗口。我已经启动并运行良好，但是图像上传器有问题。

当用户点击上传他们的图片时，代码触发正常，但在回发到同一页面后返回，但显示为平面页面（即没有 UI 窗口和样式）。

IM 猜测由于页面已回发，它对其先前的状态一无所知。为菜鸟之类的问题道歉，我通常会参与 MVC 项目，并且可以在睡梦中做到这一点，哈哈。

任何人都可以就我可以做什么提供任何建议。代码：

这从网格加载窗口：

```
$("a[name^='editSection_']").on("click", function (e) {
    e.preventDefault();

    var id = $(this).data("id");
    var divDiag = $("#addEdit");

    $.ajax({
        url: "/edit.aspx?id=" + id,
        success: function (data) {
            $(divDiag).html(data);
            $(divDiag).dialog({
                show: { effect: 'drop', direction: "up" },
                title: "Editing Feature Box",
                height: 800,
                width: 740,
                modal: true,
                resizable: false,
                option: "show",
                close: function (ev, ui) {
                    window.location.reload(true);
                }
            });
        },
        error: function (data) {
            $(divDiag).html(data);
            $(divDiag).dialog({

                show: { effect: 'drop', direction: "up" },
                title: "Editing Feature Box",
                height: 800,
                width: 740,
                modal: true,
                resizable: false,
                option: "show",
                close: function (ev, ui) {
                    window.location.reload(true);
                }
            });
        }
    }); 
```

这是图片上传器的 HTML。

```
 <asp:FileUpload ID="editImage" runat="server" />
        <asp:Button ID="btnUploadImage" Text="Upload" runat="server" OnClick="btnUploadImage_Click" />
        <asp:Label ID="lblUpload" runat="server"></asp:Label> 
```

代码在 btnUploadImage 上运行：

```
 protected void btnUploadImage_Click(object sender, EventArgs e)
    {
        if (editImage.HasFile)
        {
            try
            {
    .....code to upload sits here 
```

上传完成后，我想直接返回 UI 窗口，状态与以前相同。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:39:01.653

如果您擅长 jquery，则使用以下 jquery 组件，您必须为您的解决方案自定义它

[Dropzonejs](http://www.dropzonejs.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:26:42.037

没错，文件上传控件在页面上进行了完整的回发，以便上传文件，因此打开的对话框会丢失。从我看到你有两个选择：

*   在回发后以与之前相同的状态重新打开 Jquery 对话框（在您的情况下，这可能是不可能的或不可取的）
*   将文件上传控件更改为其他内容。也许在这里使用 ajax 上传会是一个更好的选择，比如[这个](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AjaxFileUpload/AjaxFileUpload.aspx)。

# css - CSS继承填充，然后减少数字

> ID：16077232
> 
> 赞同：0
> 
> 时间：2013-04-18T07:44:52.190
> 
> 标签：css

我有一个类被添加到网站的各个部分以显示一个部分是可编辑的。该类名为`.editable`

当用户登录时，当他们将鼠标悬停在此类部分上时，该部分周围会显示红色虚线边框。

我目前这样做是这样的：

```
.editable { /* add padding to act as clear border */
    padding:1px; 
}
.editable:hover { /* remove padding and add border */
    padding:0px; 
    border:1px dashed red 
} 
```

如评论中所示，我添加了一个 1px 填充，因此当边框在悬停时显示时，该部分不会“移动”。

当要编辑的部分已经有填充时，就会出现问题。例如

```
.sectionToBeEdited {
    padding:10px;
} 
```

当我添加 .editable 类`<div class="sectionToBeEdited editable">blah</div>`时，填充被覆盖。

**问题**有没有办法继承填充设置然后添加1px？然后在悬停时将任何填充减少 1px。

我知道另一种方法是将可编辑部分包装在单独的 div 中并在那里应用填充，但这涉及重写和添加许多类和 div。

还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:50:28.537

CSS 只能覆盖它的值，不支持数学运算。

您可以通过为您的`editable`班级使用白色/透明边框而不是填充来解决您的问题。

```
.editable { /* change border color to something invisible */
    border:1px solid white;
}
.editable:hover { /* make border visible */
    border:1px dashed red;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:25:28.777

取决于浏览器的支持，有一些可用的选择：

1.  有`transparent`边框，只需将颜色更改为`red`悬停
2.  使用边框的轮廓`outline: 1px dashed red;`它不会影响框大小
3.  添加`margin: -1px; border: 1px dashed red;`悬停，使框在所有方面都被拉伸 1px

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:01:57.937

这就是我的选择：

```
.editable { 
    border: 1px dashed rgba(255, 0, 0, 0);
}
.editable:hover { 
    border: 1px dashed rgba(255, 0, 0, 1);
} 
```

悬停时将边框的不透明度设置为 0 和 1

# java - 在 JSP 中显示消息，java bean 类何时受到影响？

> ID：16077240
> 
> 赞同：1
> 
> 时间：2013-04-18T07:45:12.617
> 
> 标签：java, javascript, jquery, jsp, javabeans

如果不清楚，请不要犹豫编辑我的问题。

目前我有一种情况，当我`server`发送任何消息时`response`，我需要`JSP`在我的`bean class`更改时反映消息。

我的豆类将是，

```
public class Information {

    public LinkedList<String> information = null ;

    public LinkedList<String> getInformation() {
        return information;
    }

    public void setInformation(LinkedList<String> information) {
        this.information = information;
        System.out.println("List is : "+this.information);
    }

} 
```

我`Thread`将运行以影响 bean 类，当它得到任何响应时`server`

```
Class Producer extends Thread{

    LinkedList<String>() list = new LinkedList<String>();
    Information info = new Information();

    public void run() {

        if(ConnectionProtocol.protocol != null){
            try {

                response = ConnectionProtocol.protocol.receive();
                if(response != null){
                    System.out.println("Listener Response : \n"+response+"\n");
                    list.add("EventLinkEventLinkConnected event received..");
                    info.setInformation(list);
                }
            }
        }
    }
} 
```

当我的 bean 类将受到影响或修改时，我需要在 JSP 中显示这些信息。

此外，我知道 ajax 并在每 5 秒访问一次 bean 时使用这种情况。如果 bean 中没有消息，我会得到空值。而且一切正常。

我的ajax将是，

```
function pingAction(){

    $.ajax(
            {
                type: "post",
                url: "PingAction",
                async:     true,
                data : "userId="+encodeURIComponent(userId)+"&secureKey="+encodeURIComponent(secureKey)+"&sid="+Math.random() ,
                cache:false,
                contentType: "application/x-www-form-urlencoded; charset=utf-8",
                scriptCharset: "utf-8" ,
                dataType: "html",

                error: function (xhr, ajaxOptions, thrownError) {
                //alert("status :"+xhr.status+"\nthrownError : "+thrownError+"\nresponseText : "+xhr.responseText);
                xhr.abort();

            },

            success: function( responseData , status){
                //alert("PingAction Response Data : "+ responseData +"\nStatus : "+status);

                if(responseData != "null" && responseData.length != 0  && responseData != null){

                    //Process to view the response in the JSP
                }
            } ,

            complete:function(){
                timer = setTimeout(pingAction, 5000);
            }

            }                           
    );

} 
```

但是当我的服务器没有发送任何要添加到列表中的消息时，会出现空响应。因为我`PingAction()`每 5 秒调用一次函数。

好的答案绝对值得赞赏。

# python - Python - 按 len(value) 对字典 {String Key: List of Strings} 进行排序？

> ID：16077241
> 
> 赞同：3
> 
> 时间：2013-04-18T07:45:18.350
> 
> 标签：python, sorting, dictionary

假设我有以下字典：

```
{"A":["u","w"],"B":["t"],"C":["x","y","z"]} 
```

如何按每个值的列表中的字符串数对字典进行排序，以便返回：

```
[("C",["x","y","z"]), ("A",["u","w"]), ("B":["t"])] 
```

因为“C”的值在列表中有三个项目，“A”有两个，“B”有一个。我在想一些事情：

```
sorted(d.items(),key=operator.methodcaller(len(),tuple[1]),reverse=True) 
```

或者

```
sorted(d.items(),key=(string, stringList):(len(stringList),string),reverse=True) 
```

但两者似乎都不起作用。对排序还是很陌生，所以感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:46:33.423

```
>>> d = {"A":["u","w"],"B":["t"],"C":["x","y","z"]}
>>> sorted(d.items(), key=lambda x: len(x[1]), reverse=True)
[('C', ['x', 'y', 'z']), ('A', ['u', 'w']), ('B', ['t'])] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:47:28.630

你几乎拥有它。

```
>>> sorted(d, key=lambda x: len(d[x]), reverse=True)
['C', 'A', 'B'] 
```

或者，也获取值：

```
>>> sorted(d.items(), key=lambda x: len(x[1]), reverse=True)
[('C', ['x', 'y', 'z']), ('A', ['u', 'w']), ('B', ['t'])] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:49:59.590

使用`lambda`：

```
sorted(d.items(), key=lambda x: len(x[1]), reverse=True) 
```

# android - 在 android 选项卡中未调用 Linkedin 集成 onNewIntent()

> ID：16077244
> 
> 赞同：1
> 
> 时间：2013-04-18T07:45:28.617
> 
> 标签：android, linkedin

我正在开发应用程序，并且在 tabhost 中我有共享设置活动。我在我的应用程序中集成了 twitter、facebook 和linkedin。现在，我在linkedin 中遇到了问题

```
 @Override
 protected void onNewIntent(Intent intent)
 {
     Log.v("finish", "finish Authenticate..");

     finishAuthenticate(intent.getData());
 } 
```

没有被调用，因为我使用了 tabhost。没有tabhost，它工作得很好..

**我通过 android:launchMode="singleTop" 和 android:launchMode="singleTask" 应用 Manifest 文件中的更改也是 android:launchMode="singleInstance" bt 它根本不工作..**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T08:34:30.683

以下代码非常适合我

通过以下代码，我已成功完成 100% 测试

```
 public class ShareInLinkedIn extends Activity implements OnClickListener {

private LinkedInOAuthService oAuthService;
private LinkedInApiClientFactory factory;
private LinkedInRequestToken liToken;
private LinkedInApiClient client;
public static final String LINKEDIN_PREF = "GamePrefs";

@SuppressLint({ "NewApi", "NewApi", "NewApi" })
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.linkedin);

    if (android.os.Build.VERSION.SDK_INT > 9) {
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);
    }

    oAuthService = LinkedInOAuthServiceFactory.getInstance().createLinkedInOAuthService(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET, Constants.SCOPE_PARAMS);
    System.out.println("oAuthService : " + oAuthService);

    factory = LinkedInApiClientFactory.newInstance(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);

    liToken = oAuthService.getOAuthRequestToken(Constants.OAUTH_CALLBACK_URL);
    System.out.println("onCreate:linktoURL : " + liToken.getAuthorizationUrl());
    Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(liToken.getAuthorizationUrl()));
    startActivity(i);

}

@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);

    try {
        linkedInImport(intent);
    } catch (NullPointerException e) {
        e.printStackTrace();
    }
}

private void linkedInImport(Intent intent) {
    String verifier = intent.getData().getQueryParameter("oauth_verifier");
    System.out.println("liToken " + liToken);
    System.out.println("verifier " + verifier);

    LinkedInAccessToken accessToken = oAuthService.getOAuthAccessToken(liToken, verifier);
    //SharedPreferences settings = getSharedPreferences(LINKEDIN_PREF, MODE_PRIVATE);
    // final Editor edit = settings.edit();
    // edit.putString(OAuth.OAUTH_TOKEN, accessToken.getToken());
    // edit.putString(OAuth.OAUTH_TOKEN_SECRET,
    // accessToken.getTokenSecret());
    // edit.putString("linkedin_login", "valid");
    // edit.commit();

    client = factory.createLinkedInApiClient(accessToken);

    // client.postNetworkUpdate("LinkedIn Android app test");

    Person profile = client.getProfileForCurrentUser(EnumSet.of(ProfileField.ID, ProfileField.FIRST_NAME, ProfileField.LAST_NAME, ProfileField.HEADLINE));

    System.out.println("First Name :: " + profile.getFirstName());
    System.out.println("Last Name :: " + profile.getLastName());
    System.out.println("Head Line :: " + profile.getHeadline());

    OAuthConsumer consumer = new CommonsHttpOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
    consumer.setTokenWithSecret(accessToken.getToken(), accessToken.getTokenSecret());

    DefaultHttpClient httpclient = new DefaultHttpClient();
    HttpPost post = new HttpPost("https://api.linkedin.com/v1/people/~/shares");
    try {
        consumer.sign(post);
        post.setHeader("content-type", "text/XML");
        String myEntity = "<share><comment>This is a test</comment><visibility><code>anyone</code></visibility></share>";
        post.setEntity(new StringEntity(myEntity));
        org.apache.http.HttpResponse response = httpclient.execute(post);
        // Get the response
        BufferedReader rd = new BufferedReader
          (new InputStreamReader(response.getEntity().getContent()));
        StringBuffer strBfr = new StringBuffer();   
        String line = "";
        while ((line = rd.readLine()) != null) {

            strBfr.append(line);
        } 
        System.out.println("Response is : "+strBfr.toString());
        Toast.makeText(ShareInLinkedIn.this, strBfr.toString(), Toast.LENGTH_LONG).show();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

} 
```

}

常量.java

```
 public class Constants {

public static final String CONSUMER_KEY = "YOUR_CONSUMER_KEY";
public static final String CONSUMER_SECRET = "YOUR_CONSUMER_SECRET_KEY";
public static final String OAUTH_CALLBACK_SCHEME = "x-oauthflow-linkedin";
public static final String OAUTH_CALLBACK_HOST = "litestcalback";
public static final String OAUTH_CALLBACK_URL = OAUTH_CALLBACK_SCHEME + "://" + OAUTH_CALLBACK_HOST;
public static final String SCOPE_PARAMS = "rw_nus+r_basicprofile"; 
```

}

AndroidManifiest.xml 文件

```
 <activity
        android:name="com.linkedin.ShareInLinkedIn"
        android:launchMode="singleInstance" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data
                android:host="litestcalback"
                android:scheme="x-oauthflow-linkedin" />
        </intent-filter>
    </activity> 
```

# javascript - Javascript 正则表达式从特定单词中获取数字部分

> ID：16077251
> 
> 赞同：3
> 
> 时间：2013-04-18T07:45:47.900
> 
> 标签：javascript, jquery, regex

假设我们有一个包含这些类的元素：“floatLeft item4”。

如果我想将数字“4”保存到“item4”中的变量中，我该怎么做？

我想我会使用这种模式 "/item(\d+)/" 但我是使用替换还是匹配以及如何使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:50:47.727

```
var str = "item4",
    num = (str.match(/item([0-9]+)/)||[])[1]; // if no match, `match` will return null therefore the `|| []` (or empty array). 

console.log(num); // "4" (typeof num === "string")

console.log(+num) // 4 (typeof num === "number") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T07:59:28.680

使用替换：

`"floatLeft item4".replace(/.*item(\d+)/,"$1")`

使用匹配：

`"floatLeft item4".match(/item(\d+)/)[1]`

exec（很像匹配）

`/item(\d+)/.exec("floatLeft item4")[1]`

使用拆分（再次，很像匹配）：

`"floatLeft item4".split(/item(\d+)/)[1]`

[http://jsfiddle.net/UQBNn/](http://jsfiddle.net/UQBNn/)

尽管`split`并非所有浏览器都支持该方法（例如 IE ..）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T07:47:17.573

您可以像这样使用匹配：

```
var str = "item4",
    num = +str.match(/item(\d+)/)[1]; // => 4 
```

我用一元`+`转换为一个数字。您可以改用`parseInt`or`Number`构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T07:48:32.780

您需要`.match(..)`与捕获组一起使用。

```
"floatLeft item4".match(/item(\d+)/)
// Result: ["item4", "4"] 
```

# c# - Telerik ASP.NET Ajax 的客户端验证不起作用

> ID：16077254
> 
> 赞同：1
> 
> 时间：2013-04-18T07:45:52.167
> 
> 标签：c#, telerik, client-side, validation

我目前正在使用 Telerik Radcontrols ASP.NET Ajax，我想为我的页面创建客户端验证。我创建了一个用户控件并按照我在 Telerik 网站上找到的[本](http://demos.telerik.com/aspnet-ajax/ajax/examples/common/validation/defaultcs.aspx)教程进行操作。不幸的是它不起作用，我不知道我做错了什么。有人可以帮我看看我的代码并指出我正确的方向吗？

```
 <%@ Control Language="C#" AutoEventWireup="false" CodeBehind="ManageAccountControl.ascx.cs" Inherits="Docl.WebDoc.Controls.Account.ManageAccountControl" %>

<style type="text/css">
    .btn {
        margin-top: 15px;
    }
</style>
<div id="CreateUser" style="margin: 10px 10px 10px 10px">

    <telerik:RadScriptManager ID="RadScriptManager1" runat="server"></telerik:RadScriptManager>
    <telerik:RadSkinManager ID="QsfSkinManager" runat="server" ShowChooser="true" />
    <telerik:RadFormDecorator ID="QsfFromDecorator" runat="server" DecoratedControls="All" EnableRoundedCorners="false" />
    <telerik:RadAjaxPanel ID="rapPanel" runat="server" LoadingPanelID="LoadingPanel1">
        <div onclick="Validate()">
            <table class="adminProps">
                <tr>
                    <td>Email</td>
                    <td>
                        <telerik:RadTextBox ID="ctrlEmail" runat="server">
                        </telerik:RadTextBox></td>
                    <td>
                        <asp:Panel ID="pnlEmail" runat="server" Width="25px">
                            <asp:RegularExpressionValidator Display="Dynamic" ID="regexEmail"
                                ValidationExpression="^[a-zA-Z][\w\.-]*[a-zA-Z0-9]@[a-zA-Z0-9][\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]$"
                                runat="server" ControlToValidate="ctrlEmail" ErrorMessage="A valid Email is required!" EnableClientScript="true">*</asp:RegularExpressionValidator>
                            <asp:RequiredFieldValidator ID="rfvEmail" runat="server" ValidationGroup="group1" ControlToValidate="ctrlEmail" ErrorMessage="Email is required" Display="Dynamic">*</asp:RequiredFieldValidator>
                        </asp:Panel>
                    </td>
                </tr>
                <tr>
                    <td>Voornaam</td>
                    <td>
                        <telerik:RadTextBox ID="ctrlFirstName" runat="server"></telerik:RadTextBox></td>
                    <td>
                        <asp:Panel ID="pnlFirstName" runat="server" Width="25px">
                            <asp:RequiredFieldValidator ID="rfvFirstName" runat="server" ValidationGroup="group1" ControlToValidate="ctrlFirstName" ErrorMessage="FirstName is required" Display="Dynamic" EnableClientScript="true">*</asp:RequiredFieldValidator>
                        </asp:Panel>
                    </td>
                </tr>
                <tr>
                    <td>Achternaam</td>
                    <td>
                        <telerik:RadTextBox ID="ctrlLastName" runat="server"></telerik:RadTextBox></td>
                    <td>
                        <asp:Panel ID="pnLastName" runat="server" Width="25px">
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator1" ValidationGroup="group1" runat="server" ControlToValidate="ctrlLastName" ErrorMessage="LastName is required" Display="Dynamic" EnableClientScript="true">*</asp:RequiredFieldValidator>
                        </asp:Panel>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <telerik:RadButton ID="ctrlCreate" runat="server" Text="Voeg toe"></telerik:RadButton>
                    </td>
                </tr>
                <tr>
                    <td colspan="3">
                        <asp:Label ID="lblRed" Style="color: red" runat="server" Width="159px"></asp:Label>
                        <asp:Label ID="lblGreen" Style="color: green" runat="server" Width="159px"></asp:Label></td>
                </tr>
                <tr>
                    <td></td>
                    <td colspan="2">
                        <asp:Panel ID="Panel3" runat="server">
                            <asp:ValidationSummary ID="ValidationSummary" runat="server" Width="174px" BorderColor="Red"
                                BorderWidth="1px" HeaderText="List of errors" EnableClientScript="true" DisplayMode="BulletList" ValidationGroup="group1"></asp:ValidationSummary>
                        </asp:Panel>
                    </td>
                </tr>
            </table>
    </telerik:RadAjaxPanel>
</div>
<telerik:RadAjaxLoadingPanel ID="LoadingPanel1" runat="server" MinDisplayTime="300">
</telerik:RadAjaxLoadingPanel>

</div>
<script type="text/javascript">
    function Validate() {

        Page_ClientValidate('group1');
    }
</script> 
```

代码背后：

```
public partial class ManageAccountControl : System.Web.UI.UserControl
{
    RootRepos _repos;

    protected override void OnInit(EventArgs e)
    {
        InitializeComponent();
        base.OnInit(e);
    }
    protected void Page_Load(object sender, EventArgs e)
    {
        _repos = new RootRepos();
        InitCtrls();
        foreach (BaseValidator validator in Page.Validators)
        {
            validator.EnableClientScript = true;
        }

    }

    private void InitializeComponent()
    {
        this.ctrlCreate.Click += new System.EventHandler(ctrlCreate_Click);
        this.Load += new System.EventHandler(Page_Load);
    }

    private void InitCtrls()
    {
        lblRed.Text = string.Empty;
        lblGreen.Text = string.Empty;
    }

    protected void ctrlCreate_Click(object sender, EventArgs e)
    {
        if (Page.IsValid)
        {
            lblRed.Text = "Name Registered: ";
            lblGreen.Text = ctrlLastName.Text + " " + ctrlFirstName.Text;
        }
        else
        {
            lblRed.Text = "Account not registered! Validation error.";
        }
    }

    private bool CheckIfUserExists()
    {

        if (_repos.AccountRepos.GetSingle(ctrlEmail.Text) != null)
            return true;
        else
            return false;

    }

    private Data.Account CreateAccount(Guid partyid)
    {
        Data.Account account = new Data.Account();
        account.PartyId = partyid;
        account.Name = ctrlEmail.Text;

        return account;
    }

    private Data.Party CreateParty()
    {
        Data.Party party = new Data.Party();
        party.PartyId = Guid.NewGuid();
        party.LastName = ctrlLastName.Text;
        party.Name = ctrlFirstName.Text + " " + ctrlLastName.Text;
        party.FirstName = ctrlFirstName.Text;

        return party;
    }

} 
```

谢谢！

# javascript - Windows 商店应用程序 - 课堂上的 addEventListener

> ID：16077261
> 
> 赞同：0
> 
> 时间：2013-04-18T07:46:04.533
> 
> 标签：javascript, windows-store-apps

我意识到不可能添加选择`addEventListener`器`document.getElementByClassName`。但我有几个功能相同的按钮。我能以某种方式做到这一点吗？好的，我可以使用 id 选择器，但是这样我就必须添加更多的代码行然后“需要”。

使用 jQuery：

```
$(".class").on("click", someFunction); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:40:16.990

为什么不直接遍历 document.getElementsByClassName() 返回的数组呢？

```
var elements = document.getElementsByClassName('foo');
for (var i = 0; i < elements.length; i++)
   elements[i].addEventListner('someEvent', eventHandler(evt), false); 
```

它可能不像等效的 jQuery 那样简洁，但它可以完成工作。或者，您可以在您的应用程序中使用 jQuery（就我个人而言，我还没有尝试过）。

# jmeter - JMeter 并发用户数

> ID：16077262
> 
> 赞同：2
> 
> 时间：2013-04-18T07:46:05.137
> 
> 标签：jmeter, load-testing, performance-testing, qa, automated-tests

我有一个正在生产中的 Web 应用程序，我的应用程序有 2000 多个用户。现在我必须在系统上执行性能测试，那么你知道有多少并发用户将同时发送请求吗？假设并非所有 2000+ 用户同时访问服务器。

我将使用 JMeter 对我的系统进行负载测试，那么我应该假设有多少并发用户必须同时访问服务器？

世界上是否有任何做法正在遵循或它因应用程序而异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T11:22:52.560

当您设置负载测试时，您正在为线程设置三个参数：用户数（线程）、加速周期、循环计数。

线程数是运行测试时您将拥有的用户总数。您可以通过为测试设置循环计数来进行多次运行，但线程数永远不会大于您设置的值。

Ramp up period 是在几秒钟内创建所有线程所需的时间。例如，如果您将其设置为 10 秒，则在您的测试运行中创建所有线程都需要这段时间。

循环计数仅影响测试将重复多少次。

因此，如果您有 100 个线程，0 秒的加速周期和循环计数设置为 1，那么将立即创建所有 100 个线程，在您的情况下是所有 2000 个。

我建议尝试不同的组合来查看您的 Web 应用程序如何处理负载。然后，您将看到并更好地理解 JMeter 如何创建和执行线程。

我会从 100 个线程开始，10 秒加速，1 个循环，然后慢慢增加线程数，减少加速周期，并增加循环数。

# forms - ms 访问从表单上的派生字段中获取总和

> ID：16077264
> 
> 赞同：1
> 
> 时间：2013-04-18T07:46:11.387
> 
> 标签：forms, ms-access-2007, derived

我在计算总和的子表单中有一个派生字段。在主窗体上，我想计算派生字段的所有记录的总和。我该怎么做？下面是子窗体的计算。

```
 =DSum("value","lineitems","jobno = " & [JOBNO]) 
```

在我的主要形式中，我尝试过：

```
 =Sum([JobVALUE]) 
```

**JobVALUE**是子表单中派生字段的名称。

我试图将计算放在我的主要形式中，并从中读取，[但这](http://support.microsoft.com/kb/207763)不起作用。

```
=Sum(DSum("value","lineitems","jobno = " & [JOBNO]))
=Sum(DSum("value","lineitems","jobno = " & [frmJobs].[Form]![JOBNOField])) 
```

# php - PHP正则表达式不起作用：移动格式

> ID：16077266
> 
> 赞同：-1
> 
> 时间：2013-04-18T07:46:24.637
> 
> 标签：php

我的代码有问题。我似乎无法解决这个问题。
这是我的测试对象：+447799604555
，这是我的代码

```
preg_match("/^\+44d{10}$/", "+447799604555"); 
```

返回 0 这是错误的。不知道问题出在哪里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T07:48:06.380

你以前错过`\`了`d`。尝试使用以下正则表达式：

```
/^\+44\d{10}$/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:49:05.687

尝试`preg_match("/^\+44\d{10}$/", "+447799604555");`

# php - 无法弄清楚这个通配符子域事故

> ID：16077271
> 
> 赞同：1
> 
> 时间：2013-04-18T07:46:31.920
> 
> 标签：php, .htaccess, subdomain, wildcard, wildcard-subdomain

我已经尝试完成这几个小时了，由于某种原因它不想工作。

我想要的只是 username.domain.com 在内部访问 domain.com/users/username

我设置了我的 dns，通配符子域指向 public_html/wild 文件夹，我在其中放置了一个 index.html 文件，一切似乎都运行良好。

问题是当我使用这个 .htaccess 文件时：

```
RewriteCond %{HTTP_HOST} !^www\.domain\.com$ [NC]
RewriteCond %{HTTP_HOST} ^(www\.)?([a-z0-9-]+)\.domain\.com$ [NC]
RewriteRule !^index\.php($|/) index.php/users/%2%{REQUEST_URI} [PT,L] 
```

它显示 404 页面未找到错误。我检查了日志，它说它仍然在 /wild 文件夹中查找，但是我的脚本在 public_html 文件夹中的上一级。

我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:30:14.110

这是最终奏效的方法：

```
RewriteCond %{HTTP_HOST} ^([^.]+)\.myserver\.com$ [NC]
RewriteRule (?!^m/$)^.*$ http://myserver.com/m/sites/%1%{REQUEST_URI} [NC,L,P] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:54:56.057

您说您已将通配符子域指向`public_html/wild`，这意味着当有人请求时`http://user.domain.com/`/**请求**被映射到`public_html/wild`。这意味着对通配符子域的请求将永远无法映射到父目录中的任何内容`public_html`（这就是它被称为文档*根*目录的原因）。

您可以做的一件事是将通配符子域的文档根指向与主域相同的位置，即所在的位置`index.php`。但是，如果您从主域获得了不想混入子域的内容，反之亦然，您可以尝试使用`P`使用 mod_proxy 并创建反向代理的标志：

```
RewriteCond %{HTTP_HOST} !^www\.domain\.com$ [NC]
RewriteCond %{HTTP_HOST} ^(www\.)?([a-z0-9-]+)\.domain\.com$ [NC]
RewriteRule !^index\.php($|/) http://www.domain.com/index.php/users/%2%{REQUEST_URI} [P,L] 
```

# c# - 具有多数据库支持的 ASP.NET Web 应用程序

> ID：16077274
> 
> 赞同：-2
> 
> 时间：2013-04-18T07:46:35.200
> 
> 标签：c#, asp.net, sql, multiple-databases

我们正在开发一个基于 asp.net web 的应用程序，例如，如果我想部署相同的 web 应用程序，使用 MS 访问作为后端或 Sql 作为后端，它应该使用的数据访问层应该是可配置的。

如果我采用以下架构

模型

```
Employee
    ID
    Name 
```

达尔

```
EmployeeAccessDb (Uses inline queries)
    GetAll
    GetByID
    Insert
    Update
    Delete

EmployeeSqlDb (Uses stored procedures)
    GetAll
    GetByID
    Insert
    Update
    Delete 
```

页面（使用 EmployeeAccessDb / EmployeeSqlDb）

```
ObjectDataSource SelectMethod="GetAll" TypeName=" < EmployeeAccessDb / EmployeeSqlDb >"
Insert
Update
Delete 
```

因此，如果我使用 Access 作为后端，页面应该使用 Access DAL，如果我使用 Sql 页面应该使用 SQL DAL。

请让我知道如何使这个可配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:12:33.417

请您使用 web.config 进行配置，并在您的 DAL 中读取 web.config 中的值并对数据库进行必要的调用

您需要添加对 System.Configuration 的引用。您应该使用 ConfigurationManager

```
 String Activedatabase = ConfigurationManager.AppSettings["ActiveDatabase"]; 
```

web.config 看起来像这样

```
 <appSettings>
     <add key="ActiveDatabase" value="SQLDB"/>
    </appSettings> 
```

# javascript - 如果 CDN 不工作，如何加载本地文件

> ID：16077276
> 
> 赞同：8
> 
> 时间：2013-04-18T07:46:39.790
> 
> 标签：javascript, jquery, asp.net, cdn

我正在使用一些 CDN js 和 css 文件。

如果 CDN 不工作，我在 Google 中搜索了如何加载本地数据。

我找到了一个这样写的好链接

```
<script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
        <script type="text/javascript">
            if (typeof jQuery == 'undefined') {
                document.write(unescape("%3Cscript src='JS/Plugins/jquery-1.8.2.min.js' type='text/javascript'%3E%3C/script%3E"));
            }
        </script> 
```

是的，它可以工作，但后来我尝试了另一个 CDN 网络，然后它没有从本地下载。如果 CDN 不工作，那么它在我的页面中显示错误，并且由于缺少该 js 文件，页面无法正常工作。方法 ：

```
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
<script type="text/javascript">
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='Include/JS/JqueryPlugin/jquery.min.js' type='text/javascript'%3E%3C/script%3E"));
    }
</script> 
```

在上述情况下，当上述 CDN 不起作用时，本地 jquery.min.js 不会下载。

类似地如何为 CSS 做（在 Google 中搜索并没有找到任何好的解决方案）。

如何知道哪个 CDN 不工作并从本地下载相应的文件。

请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-19T03:15:18.707

您可以在下面使用此脚本：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>    window.jQuery || document.write('<script src="/scripts/jquery.1.9.1.min.js"><\/script>')</script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
<script>    window.jQuery.ui || document.write('<script src="/scripts/jquery-ui.min.js"><\/script>')</script> 
```

希望有用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-10T07:17:20.020

这可以通过 DNS 设置实现，无需更改代码。

基本上，您正在尝试在 CDN 和源服务器之间进行故障转移。如果 CDN 失败，请求将故障转移到您的源服务器。一种选择是使用 DNS 级别的故障转移，主要是 CDN CNAME，备份到您的原始服务器主机名。

您还在 CDN 和源服务器的 DNS 设置中包含健康检查。一旦 CDN 的健康检查失败，DNS 应该故障转移到您的源服务器并自动从那里提供静态文件。

# javascript - 未捕获的错误：语法错误，无法识别的表达式：不支持的伪：

> ID：16077280
> 
> 赞同：36
> 
> 时间：2013-04-18T07:46:57.017
> 
> 标签：javascript, jsf

我有一个 txtBox，它的 id 是：beginDateTxt

但是jsf做到了`j_idt8:beginDateTxt`

在jquery中，我尝试像那样达到它

```
 <script type="text/javascript">
            $(document).ready(function() {
                $(function() {
                    $("#j_idt8:beginDateTxt").mobiscroll().date({
                       theme: 'android-ics light', mode:'scroller', display: 'bottom'
                    });
                });

            });
   </script> 
```

但我得到以下错误：

> 未捕获的错误：语法错误，无法识别的表达式：不支持的伪：beginDateTxt

为什么？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-04-18T07:50:01.897

你可以试试

```
$(document.getElementById('j_idt8:beginDateTxt')).mobiscroll().date({theme: 'android-ics light', mode:'scroller', display: 'bottom'}); 
```

一般来说，jQuery 在其`$()`函数中使用类似 CSS 选择器的东西。在 CSS 选择器中，`:`表示伪类。但是，在您的情况下，这`:`只是 id 的一部分。

如果您使用 generic `getElementById()`，则参数*不会*被分解，而是完全被视为一个 ID。因此，通过使用`getElementById()`和包装结果`$()`可以规避这种“误解”。

但是，总的来说，我认为更改 JSF 中的命名空间方案会更好。

**编辑**

关于选择器的[jQuery 文档](http://api.jquery.com/category/selectors/)指出，您应该使用以下命令转义特殊字符`\\`：

> 要使用任何元字符（例如 !"#$%&'()*+,./:;<=>?@[]^`{|}~ ）作为名称的文字部分，它必须使用两个反斜杠进行转义：\。例​​如，带有 , 的元素`id="foo.bar"`可以使用选择器`$("#foo\\.bar")`。

这将导致丹尼尔已经给出的答案，在我看来，这优于上面给出的答案。然而，这种解释仍然有效。

```
$("#j_idt8\\:beginDateTxt").mobiscroll().date({theme: 'android-ics light', mode:'scroller', display: 'bottom'}); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-04-18T08:18:07.243

如果你想使用 jQuery id 选择器，你需要转义`:`with`\`然后转义`\`（双转义）

这里：

```
$(function() {
    $("#j_idt8\\:beginDateTxt").mobiscroll().date({
        theme: 'android-ics light',
        mode:'scroller', display: 'bottom'
    });
}); 
```

# c# - 我可以“阻塞”一个函数直到异步线程完成吗？

> ID：16077282
> 
> 赞同：-1
> 
> 时间：2013-04-18T07:47:02.090
> 
> 标签：c#, multithreading, winforms

我在 WinForm 上有这段代码：

```
private void buttonStart_Click(object sender, EventArgs e)
{
    Task.Factory.StartNew(() => ThreadFunction())
        .ContinueWith(t => ThreadFunctionComplete()
        , CancellationToken.None
        , TaskContinuationOptions.None
        , TaskScheduler.FromCurrentSynchronizationContext());

    ThreadFinished();
} 
```

我`ThreadFinished()`只想在`ThreadFunctionComplete()`完成后开始。好吧，我可以放在`ThreadFinished()`末尾`ThreadFunctionComplete()`，但是对于流程的某些工作流程，我不会。可能吗？也许是一种等待/锁定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T07:50:59.447

基本上，您可以简单地调用`ContinueWith`两次：

```
Task.Factory.StartNew(....)
            .ContinueWith(...)
            .ContinueWith(...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:51:47.997

您可以使用 Wait() 但它会阻塞当前线程...

```
Task.Factory.StartNew(...).Wait(); 
```

或添加另一个 ContinueWith()

```
Task.Factory.StartNew(...).ContinueWith(t => ThreadFinished()); 
```

# android - 注销时如何销毁活动？

> ID：16077283
> 
> 赞同：2
> 
> 时间：2013-04-18T07:47:03.230
> 
> 标签：android

我正在用安卓开发应用程序。因为我使用 SharedPreferences 进行会话管理的登录和注销活动。我的应用程序注销，将数据存储在 sharedpreferences 以保持会话成功完成。当我从应用程序（第二个活动）注销并呈现到第一个活动（登录活动）但是当我在成功注销后单击模拟器上的后退按钮仍然再次呈现到第二个活动并且遇到某些版本（如 2.3.3 等）时会发生什么例外

```
java.lang.RuntimeException: Unable to destroy activity {com.oj.bs/com.oj.bs.LoginActivity}: java.lang.NullPointerException 
```

任何人都可以解决这个问题。请参考以下代码

以下是**登录活动代码**

```
sessionmngr = new SessionManager(getApplicationContext());

                    JSONObject json_user = jsonObj.getJSONObject("user");
                    sessionmngr.createLoginSession(id,json_user.getString(KEY_UNAME), 
                            json_user.getString(KEY_UEMAIL));
                     .
                     . 
```

以下是**会话管理**

```
public class SessionManager {

SharedPreferences pref;
Editor editor;
Context contxt;
//shared pref mode
int PRIVATE_MODE = 0;
 // Sharedpref file name
private static final String PREF_NAME = "bookingScapePref";

// All Shared Preferences Keys
private static final String IS_LOGIN = "IsLoggedIn";
public static final String KEY_NAME = "name";
public static final String KEY_ID = "id";
public static final String KEY_EMAIL = "email";

public SessionManager(Context context) {
    super();
    this.contxt = context;
    pref = context.getSharedPreferences(PREF_NAME, PRIVATE_MODE);
    editor = pref.edit();
    editor.commit();
}
/**
 * Create login session
 * */
public void createLoginSession(int id,String name, String email) {

    editor.putBoolean(IS_LOGIN,true);
    editor.putString(KEY_NAME, name);
    editor.putString(KEY_EMAIL, email);
    editor.putInt(KEY_ID, id);
    editor.commit();
}
/**
 * Get stored session data
 * */
public HashMap<String, String> getUserDetails() {
    HashMap<String, String> userDetails = new HashMap<String, String>();
    userDetails.put(KEY_NAME, pref.getString(KEY_NAME, null));
    userDetails.put(KEY_EMAIL, pref.getString(KEY_EMAIL, null));
    return userDetails;
}
/**
 * Check login method will check user login status
 * */
public void checkLogin() {

    if (!this.isLoggedIn()) {
        Intent i = new Intent(contxt, LoginActivity.class);
        //closing all the activity
        i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        //Add new Flag to start new Activity
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        contxt.startActivity(i);
    }
}

public void logoutUser() {
    //clearing all data from sharedPreferences
    editor.clear();
    editor.commit();
    Intent intnt = new Intent(contxt, LoginActivity.class);
    // Closing all the Activities
    intnt.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

    // Add new Flag to start new Activity
    intnt.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    // Staring Login Activity
    contxt.startActivity(intnt);
}

/**
 * Quick check for login
 * **/
// Get Login State
public boolean isLoggedIn(){
    return pref.getBoolean(IS_LOGIN, false);
} 
```

}

这是我正在检查会话的**第二个活动**

```
public class ProjectFragActivity extends SherlockFragmentActivity {

SessionManager sessionMngr ;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    sessionMngr = new SessionManager(getApplicationContext());

    Toast.makeText(getApplicationContext(), "User Login Status: " + sessionMngr .isLoggedIn(), 
            Toast.LENGTH_LONG).show();
    sessionMngr.checkLogin();
            .
            . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:50:45.510

```
@Override
public void onBackPressed() {
// TODO Auto-generated method stub
    Intent intent = new Intent(Intent.ACTION_MAIN);
    intent.addCategory(Intent.CATEGORY_HOME);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(intent);
super.onBackPressed();
} 
```

您好，在您的登录屏幕中使用 onBackpressed 函数并实现此**Intent**函数。它将带您进入手机的主屏幕。

希望这会给你一些解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:54:01.377

一个更简单的解决方案应该是调用`finish();`您的第二个活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:15:41.527

首先不要打电话`finish()`，`destroy()`活动已经结束并离开，再加上其他一切都搞砸了。您需要做的是`finish()`在注销时调用，无论您必须使用什么功能来注销该人，在它的最后，输入`finish()`.

# ios - 需要有关@property 概念的帮助

> ID：16077285
> 
> 赞同：-1
> 
> 时间：2013-04-18T07:47:21.063
> 
> 标签：ios, objective-c

我正在处理核心定位并编写此代码

```
CLLocationManager *locationManager = [[CLLocationManager alloc]init];
    [locationManager setDesiredAccuracy:kCLLocationAccuracyBestForNavigation];
    [locationManager setDelegate:self];
    //[locationManager setDistanceFilter:0.0f];
    [locationManager startUpdatingLocation];

-(void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations { 
    .
    .
    .
} 
```

但是我的委托方法不起作用，在 15 - 20 之后我意识到我没有创建 CLLocationManager 的属性`@property (strong, nonatomic) CLLocationManager *locationManager;`

完成后一切正常，没有问题。我已经经历过好几次了，有时事情没有创造就可以工作`@property`，有时事情没有创造就绝对不能工作`@property`。

我知道`@property @synthesize`创建 getter setter 会自动包含防止对象立即销毁的内存管理，但是有时代码如何在不创建的情况下工作`@property`？

**编辑：**

我创建了一个新的类名`MyClass`

我的类.h：

```
@interface MyClass : NSObject
-(void)giveMeOk;
@end 
```

我的班级.m

```
@implementation MyClass

-(void)giveMeOk {
    NSLog(@"Its Ok.");
}

@end 
```

在我编写核心定位代码的视图控制器中，`viewdidload`我这样做了：

```
.
.
.
MyClass *myClassObj = [[MyClass alloc]init];

    [myClassObj giveMeOk];
.
.
. 
```

并在控制台`Its Ok.`打印成功，所以它没有`@property`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:20:15.623

我认为您可能遇到的问题是，当您不“创建属性”时，您使用的是局部变量。不同之处在于，一旦该变量的范围结束（通常是创建它的方法的结尾），它将被释放，因此不会调用像位置管理器这样的委托方法（因为不再有要调用的对象他们，即使你的代表仍然存在）

通过创建一个属性，您可以增加对象的保留计数，确保该对象的生命周期超出创建它的方法

更新：

你的更新让我觉得我是对的。问题是您不了解对象的生命周期：局部变量仅存在于创建它的范围内（因此对于您的示例：运行 viewDidLoad 后， myClassObj 不再存在）。对于需要在该方法之后继续工作的事情（即基本上只是轮询硬件 GPS 的位置管理器），您需要一个属性，因为它需要保留足够长的时间才能完成其工作。对于立即完成其工作的东西（例如您的示例类，它只执行日志并返回，即没有异步），局部变量很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:10:21.807

正如您所说，属性会生成 getter 和 setter 方法并管理您的内存。你没有说的是它创建了一个实例变量。这就是使您的代码工作的原因，因为它保留了您的位置管理器的实例（否则它会被释放 - 假设您使用的是 ARC）。

当您说“有时它有效”时，您需要举例说明。但是，这只能意味着其他一些类正在保留您创建的实例......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:37:54.280

您将属性与实例变量混合在一起。仅当您要从外部访问属性时才需要属性。调用者甚至不关心属性是否对应于实例变量或哪个实例变量，尽管有一个实例变量是很常见的，并且在很多情况下，当属性（以及 getter ) 称为 abc。如果您不合成它，则实例变量 _abc 的类型相同。

它是保存实际数据的实例变量。

当您不需要从外部访问它时，您可以声明一个没有属性的实例变量。由于属性非常方便，您可以选择在 *.m 文件中声明属性。

你的所作所为有点危险。当您声明一个属性`locationManager`，然后在方法或 if 块或 for 循环或任何声明中本地声明`CLLocationManager *locationManager`时，您将处理同名的局部变量。这是完全合法的，但可能会导致错误。在本地范围之外`locationManager`仍然有可用的财产。但这允许访问另一个具有相同类型和名称的对象！

# html - 将数据添加到本地存储并在另一个页面上使用

> ID：16077297
> 
> 赞同：0
> 
> 时间：2013-04-18T07:47:48.567
> 
> 标签：html, codeigniter, local-storage

是否可以将数据保存到站点的本地存储中，然后稍后在同一站点的另一个页面上使用它？

例如：我在此页面中有一个“添加到本地存储”按钮：http: [//www.domain.com/exhibitors/view/41873](http://www.domain.com/exhibitors/view/41873)当我单击它时，我将一些数据添加到本地存储，然后我想在[http://www.domain.com/favorites/view/](http://wwww.domain.com/favorites/view/)上使用它

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T09:17:13.493

是的，有可能，您只需将其设置为 localStorage ：

```
localStorage.username = "User"; 
```

现在你只需要在任何你想要的地方检索它，比如：

```
alert(localStorage.username); 
```

在你的情况下，你只需要这样：

```
<a href="#" onclick="localStorage.username = 'Paul'">Add to localStorage</a> 
```

然后在您看来其他地方只是这样做：

```
<script> alert(localStorage.username); </script> 
```

> > 通常有2种可能：
> 
> `localStorage`= 将其视为 cookie（在浏览器关闭时也会持续存在）
> 
> `sessionStorage`= 将其视为一个会话（它会一直持续到您关闭浏览器）

**明显地**

强烈建议不要在浏览器中存储敏感数据，因此将它们用于例程而不是存储密码，例如，因为用户可以从他的浏览器中编辑它们，恶意用户也可以

# c++ - 如何使用 C++/C++11 打印当前时间（以毫秒为单位）

> ID：16077299
> 
> 赞同：21
> 
> 时间：2013-04-18T07:48:01.820
> 
> 标签：c++, linux, windows, time, c++11

目前我使用这个代码

```
string now() {
    time_t t = time(0);
    char buffer[9] = {0};

    strftime(buffer, 9, "%H:%M:%S", localtime(&t));
    return string(buffer);
} 
```

格式化时间。我需要添加毫秒，所以输出格式如下：`16:56:12.321`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-18T12:02:12.510

不要在 Boost 上浪费时间（我知道很多人会被这种说法冒犯并认为它是异端邪说）。

该讨论包含两个非常可行的解决方案，它们不需要您将自己束缚于非标准的 3rd 方库。

[C++ 在 Linux 上获取毫秒时间——clock() 似乎不能正常工作](https://stackoverflow.com/questions/588307/c-obtaining-milliseconds-time-on-linux-clock-doesnt-seem-to-work-properl)

[http://linux.die.net/man/3/clock_gettime](http://linux.die.net/man/3/clock_gettime)

可以在 opengroup.org 上找到对 gettimeofday 的引用

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-18T09:46:35.333

您可以使用**[Boost 的 Posix Time](http://www.boost.org/doc/html/date_time/posix_time.html)**。

您可以使用`boost::posix_time::microsec_clock::local_time()`从微秒分辨率时钟获取当前时间：

```
boost::posix_time::ptime now = boost::posix_time::microsec_clock::local_time(); 
```

然后您可以计算当天的时间偏移量（因为您的持续时间输出格式为`<hours>:<minutes>:<seconds>.<milliseconds>`，我假设它们被计算为当日偏移量；如果不是，请随意使用另一个*起点*作为持续时间/时间间隔）：

```
boost::posix_time::time_duration td = now.time_of_day(); 
```

然后您可以使用`.hours()`, `.minutes()`,`.seconds()`访问器来获取相应的值。
不幸的是，似乎没有`.milliseconds()`访问器，但有`.total_milliseconds()`一个；所以你可以做一些减法运算来让剩余的毫秒在字符串中格式化。

然后，您可以使用`sprintf()`（或者`sprintf()_s`如果您对非可移植的仅 VC++ 代码感兴趣）将这些字段格式化为原始`char`缓冲区，并将此原始 C 字符串缓冲区安全地包装到一个健壮方便的`std::string`实例中。

有关详细信息，请参阅下面的注释代码。

控制台中的输出类似于：

> 11:43:52.276

* * *

**示例代码：**

```
///////////////////////////////////////////////////////////////////////////////

#include <stdio.h>      // for sprintf()

#include <iostream>     // for console output
#include <string>       // for std::string

#include <boost/date_time/posix_time/posix_time.hpp>

//-----------------------------------------------------------------------------
// Format current time (calculated as an offset in current day) in this form:
//
//     "hh:mm:ss.SSS" (where "SSS" are milliseconds)
//-----------------------------------------------------------------------------
std::string now_str()
{
    // Get current time from the clock, using microseconds resolution
    const boost::posix_time::ptime now = 
        boost::posix_time::microsec_clock::local_time();

    // Get the time offset in current day
    const boost::posix_time::time_duration td = now.time_of_day();

    //
    // Extract hours, minutes, seconds and milliseconds.
    //
    // Since there is no direct accessor ".milliseconds()",
    // milliseconds are computed _by difference_ between total milliseconds
    // (for which there is an accessor), and the hours/minutes/seconds
    // values previously fetched.
    //
    const long hours        = td.hours();
    const long minutes      = td.minutes();
    const long seconds      = td.seconds();
    const long milliseconds = td.total_milliseconds() -
                              ((hours * 3600 + minutes * 60 + seconds) * 1000);

    //
    // Format like this:
    //
    //      hh:mm:ss.SSS
    //
    // e.g. 02:15:40:321
    //
    //      ^          ^
    //      |          |
    //      123456789*12
    //      ---------10-     --> 12 chars + \0 --> 13 chars should suffice
    //  
    // 
    char buf[40];
    sprintf(buf, "%02ld:%02ld:%02ld.%03ld", 
        hours, minutes, seconds, milliseconds);

    return buf;
}

int main()
{
    std::cout << now_str() << '\n';    
}

/////////////////////////////////////////////////////////////////////////////// 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-06-19T08:26:49.890

这是我在不使用 boost 的情况下找到的解决方案

```
std::string getCurrentTimestamp()
{
using std::chrono::system_clock;
auto currentTime = std::chrono::system_clock::now();
char buffer[80];

auto transformed = currentTime.time_since_epoch().count() / 1000000;

auto millis = transformed % 1000;

std::time_t tt;
tt = system_clock::to_time_t ( currentTime );
auto timeinfo = localtime (&tt);
strftime (buffer,80,"%F %H:%M:%S",timeinfo);
sprintf(buffer, "%s:%03d",buffer,(int)millis);

return std::string(buffer);
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-18T08:06:40.337

您可以使用`boost::posix_time`. 请参阅这个[SO 问题](https://stackoverflow.com/questions/6734375/c-boost-get-current-time-in-milliseconds)。前任：

```
boost::posix_time::time_duration diff = tick - now;
diff.total_milliseconds(); 
```

要获取当前时间：

```
boost::posix_time::ptime t1 = boost::posix_time::microsec_clock::local_time();
// ('tick' and 'now' are of the type of 't1') 
```

如果可以使用C++11，也可以使用 C [++11 chrono](http://en.cppreference.com/w/cpp/chrono)。前任：

```
int elapsed_milliseconds = std::chrono::duration_cast<std::chrono::milliseconds>(end-start).count(); 
```

要获取当前时间（您有几个不同的时钟可用，请参阅文档）：

```
std::chrono::time_point<std::chrono::system_clock> t2;
t2 = std::chrono::system_clock::now();
// ('start' and 'end' are of the type of 't2') 
```

对于以毫秒为单位的时间，您可以获得午夜和当前时间之间的持续时间。[std::chrono 示例](http://ideone.com/9Xl6Gt)：

```
unsigned int millis_since_midnight()
{
    // current time
    std::chrono::time_point<std::chrono::system_clock> now = std::chrono::system_clock::now();

    // get midnight
    time_t tnow = std::chrono::system_clock::to_time_t(now);
    tm *date = std::localtime(&tnow);
    date->tm_hour = 0;
    date->tm_min = 0;
    date->tm_sec = 0;
    auto midnight = std::chrono::system_clock::from_time_t(std::mktime(date));

    // number of milliseconds between midnight and now, ie current time in millis
    // The same technique can be used for time since epoch
    return std::chrono::duration_cast<std::chrono::milliseconds>(now - midnight).count();
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2021-02-20T12:29:30.807

这是一个非常古老的问题，但对于其他访问的人来说，这是我使用现代 C++ 提出的解决方案......

```
#include <chrono>
#include <ctime>
#include <sstream>
#include <iomanip>

std::string timestamp()
{
    using namespace std::chrono;
    using clock = system_clock;

    const auto current_time_point {clock::now()};
    const auto current_time {clock::to_time_t (current_time_point)};
    const auto current_localtime {*std::localtime (&current_time)};
    const auto current_time_since_epoch {current_time_point.time_since_epoch()};
    const auto current_milliseconds {duration_cast<milliseconds> (current_time_since_epoch).count() % 1000};

    std::ostringstream stream;
    stream << std::put_time (&current_localtime, "%T") << "." << std::setw (3) << std::setfill ('0') << current_milliseconds;
    return stream.str();
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-18T12:18:05.350

我建议使用 Boost.Chrono 而不是 Boost.Datetime 库，因为 Chrono 已成为 C++11 的一部分。[这里的例子](http://www.boost.org/doc/libs/1_53_0/doc/html/chrono/users_guide.html#chrono.users_guide.tutorial.i_o.system_clock_time_point_io)

# iphone - 不要先从几行中获得正确的值在 tableview

> ID：16077302
> 
> 赞同：0
> 
> 时间：2013-04-18T07:48:15.873
> 
> 标签：iphone, ios, uitableview, nsarray, nsdictionary

```
NSMutableArray *wholeJsonArray = [LoginResult objectForKey:@"Response"];
//NSMutableArray *values=[NSMutableArray arrayWithArray:[LoginResult allValues]];    
NSMutableArray *statenameArray=[LoginResult objectForKey:@"Response"];
for(NSDictionary *countname in wholeJsonArray)
{

    NSString *cName = [NSString stringWithFormat:@"%@",[countname objectForKey:@"country_name"]];
    [countryArray addObject:cName];

}
for(NSDictionary *cid in wholeJsonArray)
{

    NSNumber *number = [cid objectForKey:@"country_id"];
    [idcountry addObject:number];
}

for(NSDictionary *statename in statenameArray)
{

    NSString *sName=[NSString stringWithFormat:@"%@",[statename objectForKey:@"state_name"]];
    [stateArray addObject:sName];
} 
```

我写了上面的代码。

国家名称在表格视图中正确显示。状态名称响应也会显示，但显示的行数为空值，其他行值正确。那么我应该怎么做才能从几行中删除空值。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:22:57.523

尝试这个

```
NSMutableArray *countries = [LoginResult objectForKey:@"Response"];

for(NSDictionary *country in countries){

    NSString *countryName = country[@"country_name"];
   if(countryName)
        [countryArray addObject:countryName];

    NSNumber *countryId = country[@"country_id"];
    if(countryId)
        [idcountry addObject:countryId];

    NSString *stateName = country[@"state_name"];
    if(stateName)
        [stateArray addObject:stateName];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:57:07.810

Replace the last `for` with this:

```
for (NSDictionary *statename in statenameArray) {
    NSString * sName = [statename objectForKey:@"state_name"];
    if (sName.length > 0) {
        [stateArray addObject:[NSString stringWithFormat:@"%@", sName]];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:57:32.897

Add state strings to array only if it's valid.

```
for(NSDictionary *statename in statenameArray)
{
   NSString *sName=[NSString stringWithFormat:@"%@",[statename objectForKey:@"state_name"]];
   if (sName!=nil && sName.length!=0) {
     [stateArray addObject:sName]; 
    }
} 
```

# java - Glassfish EAR 部署时间异常

> ID：16077303
> 
> 赞同：0
> 
> 时间：2013-04-18T07:48:17.480
> 
> 标签：java, jsf, glassfish, glassfish-3

我正在尝试将EAR 部署到Glassfish，它在EAR 中使用JSF 和WAR 文件，`faces-config.xml`即在WEB-INF 下。但是当我尝试部署到 Glassfish 服务器时，我遇到了以下异常：

```
java.lang.IllegalStateException: ContainerBase.addChild: start
org.apache.catalina.LifecycleException: java.lang.RuntimeException: 
com.sun.faces.config.ConfigurationException: 
java.util.concurrent.ExecutionException: 
com.sun.faces.config.ConfigurationException: 
Unable to parse document 'jndi:/server/WEB-INF/faces-config.xml': null 
```

我不确定是什么问题，Eclipse 在编写 faces-config.xml 时没有给我任何错误，但 Glassfish 给出了上述错误。是的，我在 WEB-INF 文件夹中有 faces-config.xml。

这是`faces-config.xml`文件示例：

```
<?xml version='1.0' encoding='UTF-8'?>

<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
version="2.0">
<!-- there are other elements here -->
</faces-config> 
```

我无法发布整个 xml 文件，因为它很大而且仅供参考，我正在尝试部署 Duke 的书店 Oracle 示例 Java EE 应用程序，但我遇到了这个错误。我尝试在 Google 中搜索，但没有得到任何有用的结果。你能帮帮我吗？如果需要，我可以提供更多信息。

我的 faces-config.xml 可以在这里找到：http: [//temp-share.com/show/gFHKBRxsY](http://temp-share.com/show/gFHKBRxsY)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:22:12.130

您的`faces-config.xml`.
也许你错过了一个`>`或类似的东西。

您必须发布或链接到该文件以提供更多信息。

**更新：**

当您链接到您的实际 faces-config.xml 时，我可以看到文件的开头与您发布的不相等。

在您的文件中，您有：

```
<?xml version='1.0' encoding='UTF-8'?>
<faces-config xmlns="http://xmlns.jcp.org/xml/ns/javaee/"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0"> 
```

错误在第二行... XML 命名空间错误。

您必须将其更改为：

```
<?xml   version='1.0' encoding='UTF-8'?>
<faces-config version="2.0"
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"> 
```

实际上与您在问题中发布的相同:)

# struct - 如何使用 F# 为结构的“项目”设置值

> ID：16077304
> 
> 赞同：0
> 
> 时间：2013-04-18T07:48:20.067
> 
> 标签：struct, f#, set

如何设置`Item`结构的值？我尝试了以下两种类型，但都以`value must be mutable`错误告终。

```
module Test1 =
  [<Struct>]
  type Test (array: float []) =
    member o.Item
      with get i = array.[i]
      and set i value = array.[i] <- value

  let test = Test [|0.0|]
  test.[0] <- 4.0

module Test2 =

  [<Struct>]
  type Test =
    val mutable array: float []
    new (array: float []) = { array = array }
    member o.Item
      with get i = o.array.[i]
      and set i value = o.array.[i] <- value

  let test = Test [|0.0|]
  test.[0] <- 4.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:04:48.007

请尝试更换：

```
 let test = Test [|0.0|] 
```

和：

```
 let mutable test = Test [|0.0|] 
```

# android - 如何在不启动该应用程序的情况下将应用程序加载到 RAM

> ID：16077307
> 
> 赞同：0
> 
> 时间：2013-04-18T07:48:35.733
> 
> 标签：android, android-intent, android-memory

我想将一组应用程序加载到 RAM 中，而不启动它们。当我将该应用程序加载到 RAM 中时，用户应该不知道它们。

我尝试使用以下代码：

```
Intent LaunchIntent = mContext.getPackageManager().getLaunchIntentForPackage(appName);
    LaunchIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    LaunchIntent.setFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
    mContext.startActivity(LaunchIntent); 
```

上面的代码启动应用程序并将该应用程序置于前面。但我不希望将该应用程序放在首位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:03:07.827

您只能通过`Service`. 请阅读`Android`文档。

`Service/Activity/BroadcastReceivers`与`Intents`. `Activity`将显示在前台。 `Service`将在后台运行，直到被`Android OS`开发人员停止。 `BroadcastReceiver`将运行最多 10 秒，然后停止。

# java - 如何使用 Java 监控 Windows 中的文件传输？

> ID：16077309
> 
> 赞同：0
> 
> 时间：2013-04-18T07:48:38.453
> 
> 标签：java, windows, monitoring, file-transfer

我正在编写一个实用程序来检查一个非常大的文件是否已完全传输。

根据我在网上找到的信息，我了解到最好的方法是让发件人发送一个小文件以表明文件传输已完成。例如，发送一个 10GB 的视频文件后`bigfile.mov`，发送方再发送一个 1KB`bigfile.txt`的包含校验和或其他东西来识别文件；接收器然后轮询`bigfile.txt`.

但是，就我而言，这种方法对我不开放，因为我无法控制发送给我的文件。因此，我采用了更不可靠的方法，即在指定的时间间隔内轮询文件一定次数，以了解其文件大小和最后修改时间。

```
public static boolean hasFinished(String sFilename, int polls, int interval) {

    boolean isDone = true;
    File file = new File(sFilename);
    long size = file.length();
    long lastModified = file.lastModified();

    if (file.isFile()) {

        for (int i = 0; i < polls; i++) {

            // sleep a bit
            try {
                TimeUnit.SECONDS.sleep(interval);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

            System.out.println("Checking...");
            if (file.length() != size || file.lastModified() != lastModified) {
                isDone = false;
                break;
            }
        }

    }

    return isDone;
} 
```

我正在 Windows 上编写此实用程序，并通过将一个非常大的文件从临时位置复制到我想要的位置（例如`C:\bigfile.mov`）来测试它。问题是，一旦文件复制开始，文件大小和最后修改时间似乎都被锁定，所以即使我在文件仍在复制时测试此方法，我仍然得到`true`我的结果（显然不是这样）。

在这种情况下我应该如何更改我的代码？

# android - 如何从视频链接数组中一个一个地在android中播放视频

> ID：16077310
> 
> 赞同：0
> 
> 时间：2013-04-18T07:48:41.677
> 
> 标签：android

对于android中的单个视频播放，我正在使用这个代码片段它对我来说工作正常

```
Intent intent= new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(Uri.parse(<videoLink>), "video/*");
        startActivity(intent); 
```

但我在 ArrayList 中有 Number 个视频，我想一一播放这些视频

下面的代码需要改变什么

```
Intent intent= new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(<Parse arraylist of VideoLinks and play one by one > , "video/*");
        startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-18T07:58:02.743

制作你的 URI 的数组列表

```
ArrayList<Uri> imageUris = new ArrayList<Uri>();
imageUris.add(imageUri1); // Add your image URIs here
imageUris.add(imageUri2); 
```

然后，

```
Intent shareIntent = new Intent(Intent.ACTION_VIEW);
shareIntent.setAction(Intent.ACTION_SEND_MULTIPLE);
shareIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, imageUris); 
```

# java - 在参数中传递一个类常量

> ID：16077313
> 
> 赞同：0
> 
> 时间：2013-04-18T07:48:52.837
> 
> 标签：java, string, constants, param

我在java中有一个很小的问题。我想我还没有真正清醒。

我有两节课：

第一个使用 jar 中的常量（例如：Highgui.CV_LOAD_IMAGE_COLOR）。在第二个中，用户在列表中选择他想要使用的常量。

因此，第二个类调用第一个类的方法，并在参数中使用“stringify”常量。

但是第一个不能使用 param 中的字符串有一个真正的类常量。

我知道，这是一个非常愚蠢的问题，我很确定我错过了一些明显的东西。

有人有办法解决这个问题吗？

编辑 ：

一段代码更清楚：

在 Class2

```
Class1.finder("c:aaa.jpg","Highgui.CV_LOAD_IMAGE_COLOR"); 
```

在 Class1

```
public void finder(String path1, String constant){
    Mat object = Highgui.imread(path1, Highgui.CV_LOAD_IMAGE_COLOR);
    //I want to use "constant" instead of Highgui.CV_LOAD_IMAGE_COLOR
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:35:53.997

这看起来像一个设计问题。传递包含 Java 常量名称的字符串不是一个好主意。为什么不简单地创建一个包含颜色值及其描述的类或枚举：

```
public enum DescribedColor {
    CV_LOAD_IMAGE_COLOR("CV load image color", "red"),
    ...

    private String description;
    private String color;

    private DescribedColor(String description, String color) {
        this.description = description;
        this.color = color;
    }
} 
```

然后在 Class1 ：

```
public void finder(String path1, DescribedColor describedColor) {
    ...
} 
```

在 Class2 中：

```
Class1.finder("c:aaa.jpg", DescribedColor.CV_LOAD_IMAGE_COLOR); 
```

而在显示给用户的列表中，只需要存储所有DescribedColor实例，并将它们的描述作为显示给用户的值。

这样，您就实现了 OO、类型安全、自文档化，并且不需要讨厌的反射技巧。

# ruby-on-rails - 在 rails 应用程序中使用不同的 ruby 调用 shell 脚本

> ID：16077314
> 
> 赞同：2
> 
> 时间：2013-04-18T07:48:53.760
> 
> 标签：ruby-on-rails, ruby, rvm

我有一个在 Ruby 1.9 上运行的 Rails 应用程序和一个依赖于 Ruby 1.8 的 shell 脚本（Podcast Producer）。

我需要从应用程序中调用 shell 脚本。我使用的 Ruby 版本管理器是 rvm，应用程序在乘客中运行。现在由于明显的原因，它为 shell 脚本使用了错误的 Ruby（意味着它加载了 rvm 和 bundler env，并尝试在应用程序运行时在同一个环境中启动它）。

shell脚本的第一行：

```
#!/usr/bin/env ruby -I/usr/lib/podcastproducer 
```

在应用程序中调用

```
`/usr/bin/podcast` 
```

你会如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:55:45.977

RVM中有[`do`](https://rvm.io/set/do/)命令。所以你需要打电话：

```
%x{rvm 1.8.7 do /usr/bin/podcast} 
```

或者如果`/usr/bin/`在`$PATH`你只能运行：

```
%x{rvm 1.8.7 do podcast} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:56:30.823

You can use `rvm-shell` (included in the RVM installation) to override the current Ruby/RVM version in your environment and explicitly use the system's default Ruby version (assuming you have not installed an alternate Ruby version as your system default, which you can check by running `/usr/bin/ruby -v`).

You should be able to use `rvm-shell` from within a Ruby script as follows:

```
`rvm-shell system -c '/usr/bin/podcast'` 
```

The `system` argument instructs RVM to use the system's default Ruby version.

# java - 使用具有多个实现的接口的 Spring 依赖注入

> ID：16077321
> 
> 赞同：3
> 
> 时间：2013-04-18T07:49:16.903
> 
> 标签：java, spring, jakarta-ee, autowired

我的问题已经在以下链接中提出。

[Spring：为什么我们自动装配接口而不是实现的类？](https://stackoverflow.com/questions/12899372/spring-why-do-we-autowire-the-interface-and-not-the-implemented-class/12899432#12899432)

我想知道我们是否使用`@Qualifier`注入 bean 而不是自动装配接口的目的是什么？为什么我们不自动连接相同的实现类？

通过自动装配接口，我们希望利用运行时多态性，但如果我们遵循`@Qualifier`. 请给我一个标准的方法。

如果我在没有弹簧的情况下这样做，以下是简单的代码。我想知道 spring 将如何注入 PrepaidPaymentService 实例和 PostPaidPaymentService 实例？

```
 public interface PaymentService{
        public void processPayment();
    }

public class PrepaidPaymentService implements PaymentService{

    public void processPayment(){

        System.out.println("Its Prepaid Payment Service");

    }
}

public class PostPaidPaymentService implements PaymentService{

    public void processPayment(){

         System.out.println("Its Postpaid Payment Service");

    }
}

public class Test {

    public PaymentService service;

    public static void main(String[] args) {

        Test test = new Test();

        int i = 1;
        if(i ==1 ){
            test.setService(new PrepaidPaymentService());
            test.service.processPayment();
        }
        i = 2;
        if(i == 2){
            test.setService(new PostPaidPaymentService()); 
            test.service.processPayment();
        }

    }

    public void setService(PaymentService service){
        this.service = service;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:10:19.687

除了 mthmulders 所说的之外，以下情况也适用 -

当仅存在一种实现时，按类型自动装配有效。如果你有多个实现，那么 Spring 需要知道选择哪一个。@Qualifier 允许您定义在这种情况下选择哪一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:59:42.193

一个原因是通过自动装配接口（即使使用 a `@Qualifier`），您可以注入不同的实现来进行测试。

例如，如果您有一个使用 DAO 访问数据库的服务，您可能希望替换该 DAO 以便对该服务进行单元测试。

# yii - EJuiDateTimePicker 值未保存到数据库

> ID：16077325
> 
> 赞同：0
> 
> 时间：2013-04-18T07:49:36.873
> 
> 标签：yii, yii-extensions

我在 yii 框架中为日期和时间选择器使用 EJuiDateTimePicker 扩展。我已经下载了 EJuiDateTimePicker 并放在 protected\extensions\jui 下

**意见：**

```
$this->widget(
                    'ext.jui.EJuiDateTimePicker',
                    array(
                        'model'     => $model,
                        'attribute' => 'todo_datetime',
                        'value' => $model->todo_datetime,
                        'options'   => array(
                            'dateFormat' => 'dd-mm-yy',
                            'timeFormat' => 'hh:mm:ss',//'hh:mm tt' default
                        ),
                    )
                ); 
```

**行动：**

```
if(isset($_POST['Todo']))
{
    $model->attributes=$_POST['Todo'];
                if($model->save())
        $this->redirect(array('view','id'=>$model->id));
} 
```

**问题：**

保存在数据库表中的值为 0000-00-00 00:00:00 它不采用日期时间选择器的值。

**编辑：**

**模型验证**

```
return array(
    array('todo_text, todo_datetime, priority, status', 'required'),
    array('priority, status', 'numerical', 'integerOnly'=>true),
    // The following rule is used by search().
    // Please remove those attributes that should not be searched.
    array('todo_text, todo_datetime, added_on, priority, status', 'safe', 'on'=>'search'),
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:11:39.567

好吧，没什么奇怪的，你应该在你的小部件和数据库中使用相同的日期格式，实际上：

*   在您的小部件中：`dd-mm-yy hh:mm:ss`
*   在数据库中：`yyyy-mm-dd hh:mm:ss`

您可以使用 getter/setter 或 beforeSave/afterFind 来处理这个常见问题，这是一个使用 getter/setter 的**简单**示例：

**在您的模型中**：

```
public $dateTimeIncomeFormat = 'yyyy-MM-dd H:mm:ss';
public $dateTimeOutcomeFormat = 'dd-MM-yy H:mm:ss';

public function getDateTime()
{
    return Yii::app()->dateFormatter->format($this->dateTimeOutcomeFormat, CDateTimeParser::parse($this->todo_datetime, $this->dateTimeIncomeFormat));
}

public function setDateTime($datetime)
{
    $this->todo_datetime = Yii::app()->dateFormatter->format($this->dateTimeIncomeFormat, CDateTimeParser::parse($datetime, $this->dateTimeOutcomeFormat));
} 
```

这将创建一个`dateTime`可以在小部件中使用的虚拟属性。不要忘记在模型验证规则中添加此属性。

[http://www.yiiframework.com/doc/guide/1.1/fr/topics.i18n#date-and-time-formatting](http://www.yiiframework.com/doc/guide/1.1/fr/topics.i18n#date-and-time-formatting)

# html - 浏览器请求仅提供一个样式表或所有 css 文件（主样式表中的 @import 是哪个）？

> ID：16077326
> 
> 赞同：1
> 
> 时间：2013-04-18T07:49:37.343
> 
> 标签：html, css

我试图“@import”在单个“style.CSS”中导入一个 CSS 文件，该文件用于头标签中的主 html 文件，如“link href”。然后使用萤火虫检查元素并只看到应用于它的“style.css”，我想知道浏览器对服务器的请求只有一次“style.css”或每个css是“style.css”中的@import这个组件包含在“style.css”中吗？

该组件包含在“style.css”中

```
@import url("main.css");
@import url("colorzilla.css");
@import url("mainbox.css");

article, aside, details, figcaption, figure, footer, header, hgroup, nav, section { display: block; }
audio, canvas, video { display: inline-block; *display: inline; *zoom: 1; }
audio:not([controls]) { display: none; }
[hidden] { display: none; }

html { font-size: 100%; overflow-y: scroll; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }
body { margin: 0; font-size: 13px; line-height: 1.231; }
body, button, input, select, textarea { font-family: sans-serif; color: #222; }

::-moz-selection { background: #fe57a1; color: #fff; text-shadow: none; }
::selection { background: #fe57a1; color: #fff; text-shadow: none; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:27:24.690

浏览器为每个导入的样式表发送一个单独的请求。JavaScript 文件也一样。

为避免这种情况，您可以在服务器端使用缩小器，它（除了缩小之外）结合了不同的样式表（和 JavaScript），因此 1 个请求足以处理所有 CSS，1 个请求足以处理所有 JS 内容。然后它们被缓存。

如果您使用 HTTPS，请求的数量将变得更加重要，因为 SSL/TLS 导致每个请求都有额外的握手和开销。

# regex - 字符、逗号和分号的模式匹配

> ID：16077337
> 
> 赞同：0
> 
> 时间：2013-04-18T07:50:05.257
> 
> 标签：regex

我正在尝试对文本框输入字段进行模式匹配。

输入的文本应仅包含由“,”或“;”分隔的字符 后跟一个可选空格。

示例：`Jane, Doe`、`Jane,Doe`和是有效的`Jane,Doe; Jack,Black`。`Jane,Doe;Jack,Black`但是`Jane Doe`,`(leading space)Jane`和`Doe(trailing space)`是无效的。

我目前的模式是， `/^[A-Za-z]+(,;)?$/`

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T07:53:47.143

这个怎么样：

```
/^[A-Za-z]+([,;]\s?[A-Za-z]+)*$/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T07:53:21.490

尝试使用以下正则表达式：

```
/^[a-zA-Z]+([,;] ?[a-zA-Z]+)*$/ 
```

# javascript - 使用 javascript 操作时 SVG 为空

> ID：16077338
> 
> 赞同：0
> 
> 时间：2013-04-18T07:50:11.013
> 
> 标签：javascript, svg, enyo

我正在开发一个 enyo 应用程序。我想画一个svg。到目前为止，这是我的代码：

```
enyo.kind({
    name:"draw",
    kind:enyo.Control,
    tag:"svg",
    attributes:{
        xmlns:"http://www.w3.org/2000/svg",
        version:"1.1"
    },
    classes:"drawSvg",
    published:{
        drawSize:5,
        selectedColor:"333333",
        paths:0
    },
    handlers:{
        ondown:"onDownHandler",
        onmove:"onMoveHandler"
    },

    create:function(){
        this.inherited(arguments);
        this.render();
    },
    rendered:function(){
        this.inherited(arguments);
    },

    onDownHandler:function(sender,target){
        this.iPaths++;
        var p = this.getPositionInSvg(target);
        var path = document.createElementNS("http://www.w3.org/2000/svg", "path");
        path.setAttribute('class', 'drawpath'+ this.iPaths);
        path.setAttribute('fill', 'none');
        path.setAttribute('stroke', '#'+this.getSelectedColor());
        path.setAttribute('stroke-width', this.getDrawSize());
        path.setAttribute('d', "M " + p.x + "," + p.y);

        $(this.hasNode()).append(path);
    },

    onMoveHandler:function(sender,target){
        var p = this.getPositionInSvg(target);
        $('. drawpath'+ this.iPaths).attr("d", $('. drawpath'+ this.iPaths).attr("d") + " L "+ p.x+","+ p.y);
    },

    getPositionInSvg:function(target){
        var pos = new Object();
        pos.x = ((target.pageX - this.hasNode().offsetLeft) / window.settings.SCALE) + 0.5>>0;
        pos.y = ((target.pageY - $(this.hasNode()).offset().top) / window.settings.SCALE) + 0.5>>0;
        return pos;
    }
}); 
```

当我在 firebug 中查看生成的 HTML 代码时。这是代码：

```
<svg id="frame_view1_drawSvg" class="drawSvg" xmlns="http://www.w3.org/2000/svg" 
version="1.1" style="left: 62px; top: 0px; height: 877px; width: 1403px; 
pointer-events: auto; cursor: none;">
<path class="drawpath1" fill="none" stroke="#333333" stroke-width="5" d="M 795,597 
L 795,599 L 795,601 L 795,603 L 793,606 L 785,609 L 767,617 L 742,623 L 713,629 
L 640,634 L 616,636 L 579,634 L 549,630 L 530,622 L 513,611 L 495,597 L 485,588 
L 477,581 L 474,577 L 473,576 L 472,575 L 466,572 L 452,566 L 436,557 L 420,543 
L 410,526 L 404,502 L 404,491 L 416,487 L 452,484 L 499,494 L 537,513 L 573,538 
L 588,554 L 591,557 L 591,556 L 583,551 L 570,542 L 553,525 L 531,504 L 523,496 
L 521,495 L 521,494 L 521,494 L 522,494">
<path class="drawpath2" fill="none" stroke="#333333" stroke-width="5" d="M 1166,136 
L 1166,137 L 1164,135 L 1162,135 L 1157,134 L 1148,131 L 1128,129 L 1117,124 
L 1107,122 L 1099,119 L 1096,119 L 1094,117 L 1092,117 L 1092,118 L 1092,119 
L 1093,120 L 1095,125 L 1096,129 L 1096,133 L 1096,139 L 1096,141 L 1237,139 
L 1234,140 L 1227,142 L 1219,145 L 1203,151 L 1190,154 L 1172,160 L 1157,162 
L 1148,164 L 1145,164 L 1142,164 L 1139,165 L 1138,167 L 1138,168 L 1138,169 
L 1138,169 L 1139,169 L 1144,169 L 1148,170 L 1149,170 L 901,317 L 901,317 
L 901,317 L 899,326 L 899,327 L 898,331 L 896,336">
</svg> 
```

我认为生成的代码看起来不错。但我在 svg 中看不到任何内容。什么都没有渲染，svg 是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:48:11.713

我没有时间调查，但我会在我这样做时更新这个答案。但我对书中 SVG 示例的回忆是，您不能只修改 SVG 对象的节点，一旦它被渲染。您可能需要将函数设置到 SVG 中，或者使用不同的方法来修改节点。看看这个，看看它是否有帮助： [动态更新 SVG](https://stackoverflow.com/questions/5966385/update-svg-dynamically)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:24:17.420

在您的 SVG 中，[路径标签](http://www.w3schools.com/svg/svg_path.asp)必须是自闭合标签。您可以使用[w3c](http://validator.w3.org/check)等在线工具来查找 SVG 标记有效性中的错误。

我没有要检查的完整代码，但我建议在您的 onDownHandler:function 中尝试使用`$(this.hasNode()).appendChild(path);`

这是在您的 SVG 中生成第一行的小提琴：http: [//jsfiddle.net/e9RkY/1/](http://jsfiddle.net/e9RkY/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:49:43.577

我用每晚的 Enyo 验证了我可以做一个非常简单的 SVG 测试。

[http://jsfiddle.net/sugardave/4wXWv/](http://jsfiddle.net/sugardave/4wXWv/)

声明

```
{name: "svg", tag: "svg", attributes: {xmlns: "http://www.w3.org/2000/svg", version: "1.1"}} 
```

在应用程序类型中工作得很好，我没有尝试将它作为独立类型。

# c# - 如何将变量传递给c#中的类

> ID：16077340
> 
> 赞同：-3
> 
> 时间：2013-04-18T07:50:15.007
> 
> 标签：c#, class, variables

我有这个简单的代码：

```
class ResourceInterceptor: IResourceInterceptor
        {

            public bool OnFilterNavigation(NavigationRequest request)
            {
                return false;
            }

            ResourceResponse IResourceInterceptor.OnRequest(ResourceRequest request)
            {
                request.Referrer = "http://www.google.com";
                return null;
            }
        } 
```

我需要将一个变量传递给类（只需阅读它，不要编辑），但如果我插入一个未在类中声明的变量，它会给我这个错误：

> 无法通过嵌套类型“WindowsFormsApplication1.Form1.ResourceInterceptor”访问外部类型“WindowsFormsApplication1.Form1”的非静态成员

例如我需要这样的东西（显然不起作用！）

```
public string referrer = "www.google.com";
class ResourceInterceptor: IResourceInterceptor
        {

            public bool OnFilterNavigation(NavigationRequest request)
            {
                return false;
            }

            ResourceResponse IResourceInterceptor.OnRequest(ResourceRequest request)
            {
                request.Referrer = referrer;
                return null;
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T07:54:26.807

您可以使用初始化构造函数。例如：

```
class ResourceInterceptor: IResourceInterceptor
{
    public ResourceInterceptor(string referer)
    {
        m_Referer = referer;
    }

    public bool OnFilterNavigation(NavigationRequest request)
    {
        return false;
    }

    ResourceResponse IResourceInterceptor.OnRequest(ResourceRequest request)
    {
        request.Referrer = m_Referrer;
        return null;
    }

    private string m_Referer;
} 
```

然后在创建类的实例时简单地将引用者传递给构造函数：

```
ResourceInterceptor interceptor = new ResourceInterceptor("www.google.com"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:04:38.767

另一种解决方案，如果您只需要在所有类实例中使用该变量，则使用 class ( `static`) 属性：

```
class ResourceInterceptor : IResourceInterceptor
{
    // Public class property.
    public static string Referer { get; set; }
    ResourceResponse IResourceInterceptor.OnRequest(ResourceRequest request)
    {
        request.Referrer = Referer;
        return null;
    }
}

// Somewhere else...
ResourceInterceptor.Referer = "www.google.com"; 
```

在此之后，您的所有`ResourceInterceptor`实例将共享相同的`Referer`类属性。

# css - 如何重置 HTML5 按钮元素的所有默认样式

> ID：16077341
> 
> 赞同：23
> 
> 时间：2013-04-18T07:50:15.300
> 
> 标签：css, html, button, default, user-agent

## 设想

我使用的`<button>`元素显示为纯文本，右端带有“+”。
单击时，div 元素会展开并显示一些信息。我认为按钮元素在语义上是正确的，可以表示这样的......按钮......触发器。

## 问题

所以我混合了一些按钮和 h2 元素，我遇到了视觉问题。在重置所有**默认用户代理样式**后，我希望我引入到文档中的每个元素看起来都很简单且没有样式。

但是按钮元素看起来并不那么简单。它有一个文本，略带文本缩进。

## 例子

![首先，三个元素是 <h2><button>TEXT</button></h2> 而上面的两个只是 <h2>TEXT</h2>](https://i.stack.imgur.com/RY67y.jpg)

首先，三个元素是`<h2><button>text node</button></h2>`，上面的两个只是`<h2>text node</h2>`

## CSS

```
* {
        /*Reset's every elements apperance*/
        background: none repeat scroll 0 0 transparent;
        border: medium none;
        border-spacing: 0;
        color: #26589F;
        font-family: 'PT Sans Narrow',sans-serif;
        font-size: 16px;
        font-weight: normal;
        line-height: 1.42rem;
        list-style: none outside none;
        margin: 0;
        padding: 0;
        text-align: left;
        text-decoration: none;
        text-indent: 0;
} 
```

## 其他元素的 CSS

其他元素使用背景图像，文本转换：大写，就是这样。在 Firebug 中，**没有**填充、边距、文本缩进或其他“软”或“硬”属性会搞砸。我玩弄了显示设置，但它并没有“修复”任何东西或让它变得更糟。

## 问题

任何人都可以解释为什么即使在重置默认样式之后，元素上也会出现这种视觉故障`<button>`？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-18T08:12:08.847

```
button::-moz-focus-inner,
input::-moz-focus-inner {
  border: 0;
  padding: 0;
} 
```

在css中添加这个也可以解决你的问题。

# sql - Oracle SQL 外键不起作用

> ID：16077346
> 
> 赞同：0
> 
> 时间：2013-04-18T07:50:39.743
> 
> 标签：sql, database, oracle

表格1：

```
CREATE TABLE Department(
  Dept_ID char(02) Primary Key, 
  Dept_Name varchar(20) , 
  Manager_ID char(03), 
  Location_ID char(04)
) 
```

表#2：

```
CREATE TABLE employee (
   Employee_ID char(03) Primary key, 
   First_Name varchar(10), 
   Dept_ID char(02) foreign key references Department(Dept_ID),
   Email varchar(10), 
   Tel_No char(10),
   Hire_Date Date
) 
```

当我尝试在表#2 中创建 FOREIGN KEY 时。我收到以下错误。

```
ORA-00907: missing right parenthesis 
```

请善意地告诉我我的代码有什么问题，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T07:55:59.497

只需删除`foreign key`：

```
CREATE TABLE employee (
   Employee_ID char(03) Primary key, 
   First_Name varchar(10), 
   Dept_ID char(02) references Department(Dept_ID),
   Email varchar(10), 
   Tel_No char(10),
   Hire_Date Date
) 
```

因为外键默认引用主键，

```
CREATE TABLE employee (
   Employee_ID char(03) Primary key, 
   First_Name varchar(10), 
   Dept_ID char(02) references Department,
   Email varchar(10), 
   Tel_No char(10),
   Hire_Date Date
) 
```

也足够了。

注意外键列不是强制性的——你没有`not null`在任何地方指定，所以它是一个*可选的外键*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:56:31.543

在 Oracle 中，外键通常作为约束添加：

```
CREATE TABLE employee (
   Employee_ID char(03) Primary key, 
   First_Name varchar(10), 
   Dept_ID char(02),
   Email varchar(10), 
   Tel_No char(10),
   Hire_Date Date,
   CONSTRAINT fk_department foreign key (Dept_ID) references Department(Dept_ID)
) 
```

# mongodb - 每个用户都是一个新线程 JSF - JBOSS 并在 MongoDb 中创建新连接

> ID：16077353
> 
> 赞同：1
> 
> 时间：2013-04-18T07:51:00.173
> 
> 标签：mongodb, jsf, mongo-java

我正在尝试使用 mongoDB。我在 JSF 应用程序范围的 bean（使用 CDI）中创建。

```
@Named("appMongo")
@ApplicationScoped
public class MongoApplicationScope implements Serializable{

private static final long serialVersionUID = 1L;
private DB db = null;
private MongoClient mongoClient = null;

@PostConstruct
public void init() {
try {
    mongoClient = new MongoClient("localhost", 27017);
    db = mongoClient.getDB("mydb");
} catch (UnknownHostException e) {
    e.printStackTrace();
}
}

public DB getDb() {
return db;
}

public DBCollection getCollectionInDatabase(String collection) {
    DBCollection coll;
    coll = db.getCollection(collection);
    return coll;
}

public MongoClient getMongoClient() {
    return mongoClient;
}
} 
```

然后我创建使用 prevoius bean 的请求范围 bean。

```
@Named("mongoBean")
@RequestScoped
public class MongoBean implements Serializable {

private static final long serialVersionUID = 1L;
@Inject MongoApplicationScope mongoAccess;
public void pringNumber() {
System.out.println(mongoAccess.getCollectionInDatabase("mydb").getCount());

}
} 
```

在 xhtml 页面上，我有带有 actionListener 的 commandButton，它调用“printNumber”方法。结果是每个连接到 jboss 服务器并单击按钮打开与 mongo 的新连接的用户。我不想要那种情况。我想实现我只有 1 个连接 bettwen 服务器和数据库的情况，并且每个用户都重用该连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-28T20:38:02.317

MongoDB 驱动程序维护一个自己的连接池。连接不能也不应该在请求之间共享（想想也将共享的服务器端游标）。但是，连接将在交回池后被重用。在它们再次被使用之前，它们将在一段时间内保持活动状态，因为获取到数据库的新连接并不便宜。TCP 三向握手需要相当长的时间，因此保持连接打开确实有意义。事实上，在使用 RDBMS 时，您必须走一英里才能实现这种期望的行为，例如使用 C3p0 或 DBCP。

供您参考：您的连接池大小（以及您可能打开的与数据库服务器的连接数）应该至少是您的 servlet 引擎的执行线程数，这样就没有人必须等待其他请求完成之前甚至数据库连接可用（更不用说查询的数据）。对于一个成熟的应用程序服务器，我会添加另外 20-50 个连接，具体取决于配置。无论您是否使用 MongoDB，这都是要走的路。根据您的部署，这些是大约 200-550 个连接。

好的一面：

1.  MongoDB 连接在 RAM 方面非常轻量级。在客户端，我们谈论的是每个空闲连接几 KB，在服务器端分配了 1MB。
2.  您可以配置驱动程序要使用的连接数。请注意，摆弄连接数量可能会对负载下的性能产生*严重*后果。有关详细信息，请参阅[API 文档`MongoClientOptions.Builder`](http://api.mongodb.org/java/current/com/mongodb/MongoClientOptions.Builder.html)。
3.  驱动程序的默认值实际上在资源使用方面相当保守。例如，每个主机的最大连接数默认设置为 100，这对于任何严重的应用程序来说都有点低。

长话短说：除非遇到问题，否则切勿触摸正在运行的系统。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-09T07:48:45.267

请尝试更换

```
@Inject MongoApplicationScope mongoAccess; 
```

和

```
@ManagedProperty(value = "#{appMongo}")
private MongoApplicationScope mongoAccess; 
```

并为`mongoAccess`.

# xml - 如何将“ca.uwaterloo.gp.fmp_0.6.6”插件添加到eclipse 3.7.1并使用它来编辑特征模型

> ID：16077355
> 
> 赞同：0
> 
> 时间：2013-04-18T07:51:02.250
> 
> 标签：xml, eclipse-plugin

我有 eclipse 3.7.1 和一个用于编辑 FMP (Feature Modeling Project) 的插件。如何添加这个插件和编辑`.fmp`文件

`Plugin name : ca.uwaterloo.gp.fmp_0.6.6.jar`

**网站： http:** [//gp.uwaterloo.ca/fmp](http://gp.uwaterloo.ca/fmp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:53:11.413

看起来这个插件没有更新站点。您可以获取 jar 文件并将其放入 eclipse/dropins 文件夹中。这应该可行，但不太理想，因为它并没有真正使用 Eclipse 的供应系统。

如果这对您不起作用，那么您应该联系插件的作者并要求他们创建一个适当的更新站点。

# java - java进程在启动使用文件系统的可执行文件时挂起

> ID：16077356
> 
> 赞同：0
> 
> 时间：2013-04-18T07:51:06.637
> 
> 标签：java, process

我正在尝试在我的 java 代码中执行“edena”生物信息学程序。该过程使用输入文件并写入输出文件。当输入文件很小（~1 MB）时，该过程完成并完美退出。当输入文件较大（~ 80 MB）时，进程就会挂起。从 cmd 调用进程工作得很好，所以我怀疑它与缓冲区等有关。我正在使用 4GB RAM 的 ubuntu 12.04.10（不知道它是否相关）。这是挂起的代码：

```
String edena_exe1 = "edena -M 75 -p " + workshopDir + BinAssembly.cliqueFilesDir +         
"clique_" + c.getId() + " -DRpairs "+ workshopDir + BinAssembly.cliqueFilesDir +  
"/clique" + c.getId() + "pair1.fna " + workshopDir + 
BinAssembly.cliqueFilesDir + "/clique" + c.getId() + "pair2.fna ";
Process edena_proc1 = Runtime.getRuntime().exec(edena_exe1);
edena_proc1.waitFor(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:31:11.163

我怀疑输入文件越大，该过程会产生更多的输出。

当 JVM 启动一个进程时，它会获得一个有限的缓冲流用于输出。如果您在进程运行时不放出该流，它最终可能会填满并阻塞。

```
private static void dir() throws IOException {
  Runtime r = Runtime.getRuntime();
  Process p = r.exec("DIR C:\\ /S");
  BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));
  try {
    String line;
    // Bleed the output.
    while ((line = br.readLine()) != null) {
      System.out.println(line);
    }
  } finally {
    br.close();
  }
  // Just in case.
  p.destroy();
} 
```

# ruby - 将哈希中的一个匹配值替换为另一个

> ID：16077357
> 
> 赞同：2
> 
> 时间：2013-04-18T07:51:11.353
> 
> 标签：ruby, arrays, hash

我有一个哈希数组：

```
arr = [
  {:key1=>"one", :key2=>"two", :key3=>"three"},
  {:key1=>"four", :key2=>"five", :key3=>"six"},
  {:key1=>"seven", :key2=>"eight", :key3=>"nine"}
] 
```

我想搜索并替换`:key1`if `"replaced"`=`:key`的值`"one"`。

然后生成的数组将读取：

```
arr = [
  {:key1=>"replaced", ;key2=>"two", :key3=>"three"},
  {:key1=>"four", ;key2=>"five", :key3=>"six"},
  {:key1=>"seven", ;key2=>"eight", :key3=>"nine"}
] 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:55:35.940

尝试使用以下代码，看看它是否解决了你的问题

```
arr.each { |item| item[:key1] = "replaced" if item[:key1] == "one" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:15:31.620

```
arr = [
  {:key1=>"one", :key2=>"two", :key3=>"three"},
  {:key1=>"four", :key2=>"five", :key3=>"six"},
  {:key1=>"seven", :key2=>"eight", :key3=>"nine"}
]

p arr.each {|x| x[:key1] = "replaced" if x.assoc(:key1).include? "one"} 
```

或者

```
p arr.each {|x| x[:key1] = "replaced" if x.values_at(:key1) == "one"} 
```

*输出：*

```
[{:key1=>"replaced", :key2=>"two", :key3=>"three"}, {:key1=>"four", :key2=>"five", :key3=>"six"}, {:key1=>"seven", :key2=>"eight", :key3=>"nine"}] 
```

# php - php：对表单的操作不起作用-初学者

> ID：16077361
> 
> 赞同：0
> 
> 时间：2013-04-18T07:51:23.790
> 
> 标签：php, forms

我是 php 的初学者，所以在提交表单时执行操作有一个小问题

表格是这样的

```
<form name="form1" method="post" action="?flag=1"> 
  <input type="submit" name="button" id="button" value="Submit">
</form> 
```

和 php 代码 - 在同一页面上 -

```
<?php

if ($flag) {echo "Helllllllllo";}
?> 
```

它没有用，我试图在其他页面上进行操作 `action="otherpage.php?flag=1"`

但它也没有任何帮助请:)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T07:57:33.870

**[$_GET](http://php.net/manual/en/reserved.variables.get.php)变量**- 您在查询字符串中看到的变量

**[$_POST](http://php.net/manual/en/reserved.variables.post.php)变量**- 随表单发送的变量 if`method="post"`

如果您只需要检查标志是否存在，请执行以下操作：

```
if(isset($_GET['flag'])){ 
```

没有[isset](http://php.net/isset)你可以获得**未定义索引通知**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T07:52:30.750

尝试使用：

```
<?php
if ($_GET['flag']) {echo "Helllllllllo";}
?> 
```

不过，您的表单配置不正确。正确一：

```
<?php
if (isset($_POST['flag'])) { echo "Helllllllllo ", $_POST['flag']; }
?>

<form name="form1" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
  <input type="text" name="flag" value="1">
  <input type="submit" name="button" id="button" value="Submit">
</form> 
```

`?`URL之后的所有内容都存储在 中[`$_GET`](http://php.net/manual/ru/reserved.variables.get.php)，几乎所有其他内容都存储在中[`$_POST`](http://php.net/manual/ru/reserved.variables.post.php)（文件和其他一些特殊内容除外）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:52:46.220

尝试这个：

```
<?php

if (isset($_GET['flag'])) {echo "Helllllllllo";}
?> 
```

* * *

**编辑**
但问题是另一个，您发出一个发布请求并在 GET 中执行一个操作，出于您的目的尝试此操作：

```
<form name="form1" method="post" action=""> 
  <input type="hidden" name="flag" value="1">
  <input type="submit" name="button" id="button" value="Submit">
</form> 
```

后：

```
<?php

if (isset($_POST['flag'])) {echo "Helllllllllo";}
?> 
```

在这种模式下，您将值为 1 的变量 falg 传递给您的 oage，您可以使用 $_POST 检索它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T07:53:51.163

什么是`$flag`

```
Try $_SERVER["flag"]

<?php

if ($_SERVER["flag"]) {echo "Helllllllllo";}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T07:55:44.693

您的表单是错误的，您需要将同一页面或您想要重定向到的其他页面作为操作页面，然后获取`POST`变量，转换为变量并用于您的`if`条件

```
<form name="form1" method="post" action="'.$_SERVER['PHP_SELF'].'"> 
  <input type="submit" name="button" id="button" value="Submit">
  <input type="hidden" name="flag" value="1">
</form>

$flag = $_POST['flag'];

if ($flag == '1') {echo "Helllllllllo";} 
```

# postgresql - 处理来自 C 函数的异常

> ID：16077364
> 
> 赞同：0
> 
> 时间：2013-04-18T07:51:26.927
> 
> 标签：postgresql, postgis

我有一个从 C 库调用函数的函数。无论如何，我可以从调用 C 函数的 Postgres 函数中捕获该异常吗？

这是我正在调用的函数：

```
-- Function: public.st_makevalid(geometry)

-- DROP FUNCTION public.st_makevalid(geometry);

CREATE OR REPLACE FUNCTION public.st_makevalid(geometry)
 RETURNS geometry AS
'$libdir/postgis-2.0', 'ST_MakeValid'
  LANGUAGE c IMMUTABLE STRICT
  COST 100;
ALTER FUNCTION public.st_makevalid(geometry) OWNER TO postgres;
COMMENT ON FUNCTION public.st_makevalid(geometry) IS 'args: input - Attempts to make an         invalid geometry valid w/out loosing vertices.'; 
```

这是我从中调用它的函数：

```
CREATE OR REPLACE FUNCTION public.mango_repair(geometry)
  RETURNS geometry AS
$BODY$
    DECLARE
        the_geom geometry := $1;
        reason text := ST_IsValidReason(the_geom);
    BEGIN
        IF reason LIKE 'Self-intersection%' THEN
            the_geom = ST_MakeValid(ST_Boundary(the_geom));
        END IF;
        RETURN the_geom;
    EXCEPTION
        WHEN OTHERS THEN
            RAISE NOTICE 'something went wrong';
            RETURN the_geom;
    END;
$BODY$
  LANGUAGE plpgsql STABLE STRICT
  COST 100;
ALTER FUNCTION public.mango_repair(geometry) OWNER TO postgres; 
```

这就是我从 SQL 中调用它的方式：

```
UPDATE "test_layer" SET the_geom = mango_repair(the_geom) WHERE NOT ST_IsValid(the_geom); 
```

当我运行该 SQL 时，我收到以下错误，并且 mango_repair 函数没有按预期进入 EXCEPTION 块。

这是我收到的错误消息：

```
ERROR:  Geometry type (MultiLineString) does not match column type (MultiPolygon)

********** Error **********

ERROR: Geometry type (MultiLineString) does not match column type (MultiPolygon)
SQL state: 22023 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:11:00.110

如果我猜对了你的意思，那么我怀疑你有一个用 C 语言实现的 PostgreSQL 函数，它引发了一个 PostgreSQL 异常。如果是这样，您无法在普通 SQL 中捕获和处理它 - 但您可以使用 PL/PgSQL`BEGIN ... EXCEPTION`块。有关其异常处理功能的详细信息，请参阅 PL/PgSQL 文档。

进一步的讨论表明，真正的问题与异常处理无关，实际上`UPDATE`是调用函数的查询中几何类型之间的不匹配。

# jsf - PrimeFaces tabmenu 不改变索引

> ID：16077366
> 
> 赞同：2
> 
> 时间：2013-04-18T07:51:36.297
> 
> 标签：jsf, primefaces

我正在使用`p:tabMenu`组件。我有 4 个菜单项，每个菜单项都重定向到不同的 jsf 页面，但问题是该页面在没有更改的情况下返回，`activeindex`并且`activeindex`初始值为 0。

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui">
<p:tabMenu activeIndex="0">
    <p:menuitem value="Home" url="Menu.jsf" icon="ui-icon-star"/>  
    <p:menuitem value="Fabricants" url="/pagess/pagesFabricant/Fabricant.jsf" icon="ui-icon-wrench" />  
    <p:menuitem value="Composants" url="/pagess/pagesComposant/Composant.jsf" icon="ui-icon-search"/>  
    <p:menuitem value="Dossier d'equivalence" url="DEQ.jsf" icon="ui-icon-document"/>  
</p:tabMenu> 

</ui:composition> 
```

知道应该自动更改，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:49:48.860

您可以使用 EL 在托管 bean 级别对其进行设置。所以像这样

```
<p:tabMenu activeIndex="#{myBean.myActiveIndex}">
    <p:menuitem value="Home" url="Menu.jsf" icon="ui-icon-star" action="#{myBean.setActiveIndex(0)}"/>  
    <p:menuitem value="Fabricants" url="/pagess/pagesFabricant/Fabricant.jsf" action="#{myBean.setActiveIndex(1)}" icon="ui-icon-wrench" />  
</p:tabMenu> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T13:20:09.773

我用 javascript 解决方法解决了 activeIndex 问题。我创建了一个 inputHidden 并在我有一个 onclick 事件时更改了它的值。

我有一个 tabBean 托管 bean，它创建我的菜单并存储 activeIndex：

```
@SessionScope
@ManagedBean(name="tabBean") 
public class TabBean{

private int activeIndex;

 public IMenu getMenu(){
  IMenuModel simpleMenuModel = new DefaultMenuModel();

  MenuItem mi = new MenuItem();
  mi.setValue("Home");
  mi.setIcon("ui-icon-home");
  mi.setActionExpression(UITools.ExternalContext.getMethodValue("home", new Class[]{}));
  mi.setAjax(false);
  simpleMenuModel.addMenuItem(mi);
  ...
  return menu;
 }
} 
```

在我的 xhtml 页面中，我有：

```
<script>
  function setCurrentIndex(index){
    var activeIndexName = PrimeFaces.escapeClientId('tabForm:activeIndex_hidden');
    var component = $(activeIndexName);
    component.val(index);
  }
</script>
<p:outputPanel id="menuPanel" layout="block"> 
   <h:form id="tabForm"> 
     <p:tabMenu  id="tabMenu" model="#{tabBean.menu}" activeIndex="#{tabBean.activeIndex}" />  
     <h:inputHidden id="activeIndex_hidden" value="{tabBean.activeIndex}"/> 
   </h:form>    
</p:outputPanel> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T13:55:10.330

```
<p:tabMenu activeIndex="#{loginBean.activeindex}">  
    <p:menuitem value="Accueil"  icon="ui-icon-star" action="#{loginBean.Dirige(0)}" />
    <p:menuitem value="Fabricants"  icon="ui-icon-wrench"  action="#{loginBean.Dirige(1)}" /> 
    <p:menuitem value="Composants" icon="ui-icon-search"  action="#{loginBean.Dirige(2)}"/> 
    <p:menuitem value="Dossier d'equivalence"  icon="ui-icon-document"  action="#{loginBean.Dirige(3)}"/> 
</p:tabMenu> 
```

并使用 Dirige 中的参数设置 activeindex :)

# android - 带点运算符的断言方法

> ID：16077367
> 
> 赞同：0
> 
> 时间：2013-04-18T07:51:38.660
> 
> 标签：android, assert, dot-operator

这是教科书上的一个问题，没有答案，所以它必须在这里问。

“简单”版本是：

```
assertEquals (resourceString, textView.getText()); 
```

如果我必须将点运算符用于“完整”版本，会是这样吗？

```
Assert.assertEquals (resourceString, textView.getText()); 
```

希望你能明白我的意思:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:06:15.777

我认为您正在寻找的答案是等于函数。

```
resourceString.equals(textView.getText()); 
```

# ruby - Ruby - 'require'：127：找不到指定的过程（LoadError）

> ID：16077372
> 
> 赞同：0
> 
> 时间：2013-04-18T07:52:02.707
> 
> 标签：ruby

所以，我有一个小 Ruby 程序，它是一个简单的“Hello World”——代码如下

```
require 'ray'

Ray.game 'Hello world!', :size => [800, 600] do
  register { add_hook :quit, method(:exit!) }
scene :hello do
  @text = text 'Hello, Ruby!', :angle => 30, :at => [100, 100], :size => 30
  render { |win| win.draw @text }
end
scenes << :hello
end 
```

它在我的 Win7-32​​ 位机器上运行良好。然而，当我将完全相同的程序带到我的 Win7-64 位机器上时，Ruby 解释器吐出以下消息：

```
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': 127:
The specified procedure could not be found.   - C:/Ruby193/lib/ruby/gems/1.9.1
/gems/ray-0.2.0/lib/ray_ext.so (LoadError) 
```

从错误消息来看，似乎缺少“ray_ext.so”，但实际上它就在那里：

![在此处输入图像描述](https://i.stack.imgur.com/hswTy.png)

两台 PC 都安装了完全相同的 Ruby (1.9.3) 版本，并且安装了完全相同的 gems 列表，但是为什么完全相同的程序在 32 位 Win7 上运行良好，但在 64 位 Win7 上却失败了？

我尝试再次重新安装 gem (ray)，以及更新 gem 列表，但这并没有解决问题。从我从网上发现的情况来看，这似乎是一个“dll”链接问题（如果我错了，请纠正我），但我不知道如何解决它（对不起，我还是个菜鸟Ruby），除了重新安装 gem - 这不起作用。

还有什么我可以尝试的吗？您认为这纯粹是gem的问题（与Win7-64位不兼容）吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T02:55:54.287

简而言之，使用[最新的 Ruby](http://rubyforge.org/frs/?group_id=167)。

当我在我的 Windows 7 64bit 上安装 Jekyll 时，我得到了同样的错误（是的，Ruby 的版本是 1.9.3）。直到我将我的 Ruby 更改为 2.0.0（不是 2.0.0-x64）它才消失.

虽然我根本不懂Ruby，但我希望这可以解决你的问题。谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-15T00:51:23.973

我有问题。我尝试设置指向 oci.dll 的正确 oracle bin 路径，但没有成功。我将 oci.dll 复制到 ruby​​\bin 目录，后来它又给了我另一个错误。我不得不复制 orauts.dll，然后就可以了……该应用程序正常工作。

希望对其他人有所帮助。

# asp.net - ASP.NET C# 网站中的视频会议

> ID：16077373
> 
> 赞同：1
> 
> 时间：2013-04-18T07:52:04.597
> 
> 标签：asp.net, c#-4.0, video-streaming, video-conferencing

好吧，我正在开发一个虚拟教室，即在线教室，它是一个为教师和学生提供互动学习方式的网站。我几乎完成了，只是我被这个视频会议模块卡住了。我正在使用 ASP.NET C#。我为此搜索了很多。我找到的一些信息是：

1）我了解了ConferenceXP模块。由微软开发，开发人员可以使用它来构建自己的视频-音频会议。我也搜索了很多关于它的内容，但我对如何在我的网站中实现它感到困惑。任何有关如何在网站上使用 ConferenceXP 的步骤的建议。

2）虽然我搜索了很多，但是如果留下了一些链接，我再次问这个问题，有没有更好更简单的方法（更简单快捷，因为我需要在 7 天内将其实施到我的网站中）来实施视频-使用 C#（或使用 Visual Studio 的任何其他技术）在网站中的音频聊天应用程序。

3) 在搜索时，我发现我可以在我的在线课堂上使用 Skype，有什么相关的建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T08:39:38.070

无论您采用何种技术，您都可以使用[Openmeetings](http://openmeetings.apache.org)。整个界面是基于 SOAP/REST 的。

# ios - Xcode 无法删除 UIBarbuttonItem 而不会出现错误

> ID：16077374
> 
> 赞同：0
> 
> 时间：2013-04-18T07:52:15.970
> 
> 标签：ios, objective-c, xcode

因此，我从日历视图中的 2 个按钮开始使用我的应用程序：一天和一周按钮。现在我只想使用 1 个按钮并动态更改它的名称（该部分有效）我为此使用了 weekbutton。但现在我想删除日期按钮。但我无法从我的程序中得到它。

我尝试先删除 .xib 中的链接，然后删除按钮。然后我从 .h 文件中删除它，然后从 .m 文件中删除它总是会导致相同的错误：

***由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不符合键 dayButton 的键值编码。”

不明白为什么我不能删除按钮...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:03:55.767

您已经从代码 .h/.m 文件中删除了出口，但在 .xib 中的某处仍然连接到已删除的出口。重新检查 .xib 文件中的所有连接，以确保它们在 .h 文件中有适当的声明。

# html - 如何在网页中流式传输 RTMPT

> ID：16077376
> 
> 赞同：0
> 
> 时间：2013-04-18T07:52:18.570
> 
> 标签：html, video-streaming, flash

如何在 html 文件中播放下面的链接？

```
rtmpt://s4bfl.castup.net/993860018-123.flv?ct=IL&rg=KZ&aid=386&tkn=20130417204452&ts=0&cu=C78D7065-B213-4905-A7E9-73E7994A4443 
```

我知道我需要一个 SWF 播放器，但我找不到可以使用此链接的播放器。

例如，这个站点让我在演示 [http://www.ideaweb.it/eng/player.cfm](http://www.ideaweb.it/eng/player.cfm)中流式传输它。但我找不到将其包含在我的网站中的方法。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-26T17:18:34.007

您可以通过嵌入此播放器[http://www.longtailvideo.com/jw-player/](http://www.longtailvideo.com/jw-player/)来做到这一点，您只需下载播放器并将其上传到您的网站即可。

# matplotlib - 如何使用给定的图形设置节点颜色

> ID：16077380
> 
> 赞同：0
> 
> 时间：2013-04-18T07:52:33.777
> 
> 标签：matplotlib, networkx

我正在使用 **networkx**和**matplotlib**

现在我想设置节点的颜色，我从文本文件中读取图形

```
G=nx.read_edgelist("Edge.txt")
nx.draw(G)
plt.show() 
```

这是示例的边缘文件

```
0 1
0 2
3 4 
```

这是我所做的，但失败了

```
import networkx as nx
import matplotlib.pyplot as plt
G = nx.read_edgelist("Edge.txt")
pos = nx.spring_layout(G)
nx.draw_networkx_nodes(G,pos,node_list=[0,1,2],node_color='B')
nx.draw_networkx_nodes(G,pos,node_list=[3,4],node_color='R')
plt.show() 
```

结果是很多**没有边缘的蓝色节点**

所以如果我想将 NodeListA=[0,1,2] 设置为蓝色，NodeListB=[3,4] 设置为红色

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:30:34.300

通过调用顶级函数**draw_networkx_nodes显式绘制节点**

并将您的节点列表作为参数**node_list**的值和参数**node_color**的值传递，就像这样

```
nx.draw_network_nodes(G, pos, node_list=NodeListA, node_color="#5072A7") 
```

参数 pos 只是一个 python 字典，其键是图形的节点，值是 x、y 位置；一个易于提供的 pos 是将您的图形对象传递给将返回字典的**spring_layout 。**

```
pos = nx.spring_layout(G) 
```

或者，您可以直接传入字典，例如，

```
pos = {
       0:(2,2),
       1:(3,5),
       2:(1,2),
       3:(5,5),
       4:(7,4)
} 
```

执行 OP 中的代码的可能原因是对 read_edgelist 的调用；特别是，传入的文件可能格式不正确。

以下是如何检查以及如何修复它：

```
G = nx.path_graph(5)

df = "/path/to/my/graphinit.edgelist"

nx.write_edgelist(G, df)    # save a properly formatted edgelist file

G = nx.read_edgelist(df)    # read that file back in 
```

# javascript - 如何在 xui js 中读取 xml

> ID：16077392
> 
> 赞同：0
> 
> 时间：2013-04-18T07:53:08.317
> 
> 标签：javascript, cordova, xui

我在PhoneGap中使用xui js，我想通过xui js读取xml。我已经编写了一些代码，并且我成功获取了root Element。并且为每个元素运行forloop我也得到了能够显示textContent的元素。但是我我无法在元素的标签内获取更多元素。我怎样才能得到它。我的代码如下：

```
 xui(window).on('load', function(){
        var url="http://www.w3schools.com/dom/books.xml";
        fireURL(url,winner);
    });

    function fireURL(url,success)
    {   
        var option={
        async:true,
        callback:function(){
            success(this.responseText);
        }
        }
        x$().xhr(url,option);
    } 

   function winner(data)
    {    
         domParser = new DOMParser();
         var xmlDoc=domParser.parseFromString(data,"text/xml");

        x$(xmlDoc).find("book").each(function(element,index){
            alert(element.textContent);
            //Here I want to get further elements by its tag name
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:15:26.197

您可以轻松地使用 javascript。从[这里获取参考](http://www.w3schools.com/dom/dom_document.asp)

或用以下代码替换您的成功代码：-

```
 function winner(data)
    {    
         domParser = new DOMParser();
         var xmlDoc=domParser.parseFromString(data,"text/xml");

         var _bookStore=[];

        x$(xmlDoc).find("book").each(function(element,index){
              var _book={};
              _book.author=[];
              _book.title=element.getElementsByTagName("title")[0].textContent;
              for(j=0;j<element.getElementsByTagName("author").length;j++){
                  _book.author.push(element.getElementsByTagName("author")[j].textContent);
              }
              _book.year=element.getElementsByTagName("year")[0].textContent;
              _book.price=element.getElementsByTagName("price")[0].textContent;
              _bookStore.push(_book);
        });

         alert("hello"+JSON.stringify(_bookStore));
    } 
```

# java - 无法在 Windows 上的任何 Java 应用程序中更改输入语言

> ID：16077394
> 
> 赞同：0
> 
> 时间：2013-04-18T07:53:18.913
> 
> 标签：java, windows

我正在尝试通过 ALT+SHIFT 将 Windows 输入语言从俄语切换为英语，但在 java 应用程序中却没有。在 Windows 中它工作正常，但是当我通过 ALT+TAB 切换到 Java 应用程序之一时它不起作用。要修复它，我必须重新启动应用程序，例如 Itellij IDEA。但过了一段时间又出现了。任何人都可以描述如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:10:41.327

如果它有自己的快捷键功能绑定到 ALT+SHIFT，请查看您的 Java 应用程序键盘首选项。IntelliJ IDEA 可能就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:11:56.083

AFAIK，正如您所经历的那样，默认语言是在启动时决定的。这允许使用一些命令行参数覆盖默认语言。

恐怕，事情就是这样。您必须重新启动应用程序才能从操作系统获取更改后的默认语言。

# php - 我的同事在 PHP 上编写代码，并将其用作常量...注意 - 静态方法

> ID：16077403
> 
> 赞同：-2
> 
> 时间：2013-04-18T07:53:41.423
> 
> 标签：php

即代替：

```
const MY_CONST = 0; 
```

他写：

```
public static function MY_CONST() { return 0 }; 
```

我以前的同事，前端开发人员，在 JavaScript 中这样做，因为没有常量，但在 PHP 中这样做？在我看来，如果语言有常量，你应该使用它们。

我想向他发送这个问题的链接，作为我的论点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:12:07.553

编写始终返回相同值的方法是毫无意义的。当然，使用常量是更好的做法。即使您查看性能，当您声明某些您知道不会更改为常数的东西时，它也会更快。

我同意 hakre 不要与白痴争论，他们会让你达到他们的水平并用经验击败。

我在某处读到 PHP 中的常量不是那么快。你应该阅读这篇文章。

[http://planetozh.com/blog/2006/06/php-variables-vs-constants/](http://planetozh.com/blog/2006/06/php-variables-vs-constants/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:56:46.697

> In my opinion, if the language have a constants, you should use them.

Sure, that's why they are in. Otherwise it is not a constant. Did he said he needs a constant? If so, tell him there is a PHP manual explaining it in case the language is new to him.

The URLs are [http://php.net/const](http://php.net/const) and [http://php.net/constants](http://php.net/constants) .

Apart from these fundamental and bare things, do not argue with idiots. They live - by the original meaning of the word - in their own world. So you can not get through to them.

# c# - WCF 跟踪日志覆盖旧消息

> ID：16077411
> 
> 赞同：0
> 
> 时间：2013-04-18T07:54:10.540
> 
> 标签：c#, wcf

我想限制 WCF 跟踪正在写入的日志文件的数量。为此，我使用了 maxMessagesToLog 属性。当它达到极限时会发生什么，比如说 2000 条消息？它会停止写入还是覆盖旧消息？

我想覆盖旧消息。我是怎么做的？最佳做法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:07:27.973

您可以实现一个循环跟踪侦听器来达到您想要的。使用它，您可以设置跟踪日志可以获得的最大文件大小。到达它后，旧条目将被覆盖。

[请参阅MSDN](http://msdn.microsoft.com/en-us/library/aa395205.aspx)上的此示例和说明

# ios - iOS中的绘图和动画

> ID：16077415
> 
> 赞同：1
> 
> 时间：2013-04-18T07:54:26.263
> 
> 标签：ios, animation, canvas, drawing, processing

我的背景是处理和 HTML5 画布。现在我想编写一个 iOS 应用程序，并包含某种画布，我可以在其中绘制形状和图像，类似于 Processing (2D) 中的草图。

在 iOS 开发中常见/最简单的方法是什么？如果您知道一些入门教程，我也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T21:53:48.427

简单的方法是，假设您在 Processing 中没有使用任何 Java 库，请在 PhoneGap 之类的东西中使用 processing.js 和您的 .pde 文件，以便您可以将其编译为 iOS 的本机代码。我已经这样做了，它运行良好，尽管性能与使用 html5 应用程序在移动 safari 中获得的性能相似。

# php - 提交表单 - 使用 javascript

> ID：16077418
> 
> 赞同：0
> 
> 时间：2013-04-18T07:54:45.123
> 
> 标签：php, javascript, forms, submission

我有一个页面循环通过 15,000 个条目将它们导入数据库。每 50 个条目后，用户会看到一个继续按钮。

```
<form name="contine" method="post" action="<?php echo $continue?>">
    <input type="submit" name="Submit" value="Continue"></input>
</form> 
```

这很好用，因为它减慢了脚本的速度，因此它不会加载服务器（运行 PHP4 的 NAS 驱动器），并绕过 php 页面超时。

`$continue`包含脚本名称和导入的当前位置，因此提交后页面将从那里开始。

我正在尝试这样做，这样用户就不需要在 50 个条目后坐在那里单击继续。总共有 15,000 次点击。

如果我只尝试导入大约 3,000 个条目，我已经尝试过使用`header('Location: '.$continue.'/');` This works，除此之外，Chrome 抱怨循环。

所以我希望我可以用一些将为我提交表单的javascript替换输入按钮。

这可能吗？我该怎么做？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:57:23.833

使用纯JS，提交表单使用（需要添加`id="continue"`到表单）：

```
document.forms["continue"].submit(); 
```

使用 jQuery，您可以使用以下代码提交表单：

```
$('form[name="continue"]').submit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:58:00.750

您可以添加一个简单地提交表单的 oneliner。此外，您可以在超时内执行此操作，以便用户可以取消该过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:59:40.553

您可以在 Location 调用之前放置一个 sleep 命令，还可以添加一个随机字符串 get 变量，以时间戳作为值，以便浏览器看到更不同的查询字符串。显然，您的脚本可以忽略随机获取变量...

# java - 如何从位图数据创建 BufferedImage

> ID：16077423
> 
> 赞同：0
> 
> 时间：2013-04-18T07:54:52.373
> 
> 标签：java, bufferedimage, jai, javax.imageio

在经历了许多类似的问题之后，我没有办法，只能在这里提出我自己的问题。

我需要在摇摆应用程序上显示图像。图像的来源是从 MS SQL 服务器检索的位图数据。我尝试了以下方法

**尝试 1** - 我尝试`ImageIcon`从检索到的字节创建一个。没有结果。

**尝试 2** - 将字节保存在 .png 文件中并尝试使用`ImageIO`. 这在我的本地机器上工作正常，但在测试服务器上失败。两者都是windows机器。

**TRY3** - 在第 2 步中，我尝试以不同于 .png 的格式保存。它根本不起作用。

请让我知道我错过了什么？

注意：我也尝试将 jai jar 包含到引用的库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:06:21.807

您应该已经存储了数据在数据库中的格式的提示。如果不行，那只能希望ImageIO*能*处理了。

无需将数据写入文件（这本身就是一个陷阱，您会将它们写入*哪里*？想想受限的进程权限和磁盘配额）。只需创建一个直接访问数据的 InputStream（例如 java.io.ByteArrayInputStream），这样您就可以使用基于流的方法直接加载 ImageIO。

# java - 命令在 Windows cmd 中有效，但 Runtime.getRuntime.exec() 失败

> ID：16077426
> 
> 赞同：2
> 
> 时间：2013-04-18T07:54:58.030
> 
> 标签：java, windows

Windows 7`cmd`执行没有问题`ping -n 5 127.0.0.1 > nul`。此外，`Runtime.getRuntime.exec(new String[]{"ping", "-n", "5", "127.0.0.1"})`工作正常。

但是`Runtime.getRuntime.exec(new String[]{"ping", "-n", "5", "127.0.0.1", ">", "nul"})`失败了`Bad parameter >`。为什么？

我在 Java6 模式下使用 Java7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:01:04.853

`>`重定向不是 ping 命令的一部分，它是其`cmd`自身的一部分。当`exec()`看到`>`它时，它会尝试将其`ping`作为参数提供给它。

`InputStream`要获得相同的功能，只需从`Process` `exec`返回值中读取（并忽略）数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:57:09.170

Because `>` is not a valid argument for `ping`. When executed on the command prompt the `>` is interpreted as output direction, but when used from `Runtime().exec()` it is not interpreted and is passed to `ping` as an argument (hence the error message).

To capture the output (unintuitively) use [`Process.getInputStream()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html#getInputStream%28%29) (an instance of `Process` is returned by `Runtime.exec()`).

# sql - SQL：检查约束/序列中的问题

> ID：16077427
> 
> 赞同：2
> 
> 时间：2013-04-18T07:55:05.990
> 
> 标签：sql, oracle, sequence, check-constraints

所以我创建了一个名为“exam”的表，其中包含“Name”、“Rollno”和“Result P/F”三列。我希望它执行以下操作：

输入名称时（通过'&name'语法），它会自动为名字分配卷号（Rollno）1501，然后询问您的结果，您只能输入“P”或“F”，分别代表通过或失败。当您输入下一个名称时，它会将 Rollno 增加到 1502.. 等等。

关于 Rollno 部分，我有一个名为 EXAMSQN 的序列。看起来像： ![第一个](https://i.stack.imgur.com/6bST3.jpg)

关于“结果 P/F”部分，我有一个检查约束。这就是我向表中插入值的方式：

```
insert into exam (name, rollno, "Result P/F")
values ('&name', examsqn.nextval, '&Result P/F') 
```

顺便说一句，这就是我的检查约束的方式：

```
1  alter table exam
2* add constraint exam_result_ck check ("Result P/F" in ('P','F')) 
```

所以我对此的期望是，当它要求结果时，它只需要一个 P 或一个 F

我被要求提供名称和结果，但在那之后我得到了一个错误。整个过程是这样的：

```
Enter value for name: nikh
Enter value for result: P
old   2: values ('&name', examsqn.nextval, '&Result P/F')
new   2: values ('nikh', examsqn.nextval, 'P P/F')
insert into exam (name, rollno, "Result P/F")
*
ERROR at line 1:
ORA-02290: check constraint (SCOTT.EXAM_RESULT_CK) violated 
```

非常感谢您的帮助。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:45:01.167

输出清楚地显示了替换值：

```
new   2: values ('nikh', examsqn.nextval, 'P P/F') 
```

显然`'P P/F' != 'P' and 'P P/F' != 'F'`。所以检查约束猛烈。

发生这种情况是因为变量名中有空格。我建议您改用下划线：`&Result_PF`. 或者只是调用它`result`。

如果您想告诉用户什么是有效值，您需要使用 SQL*Plus 提示符：

```
accept result_pf prompt "Please enter a value for Result (P/F): " 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:45:55.813

要让它工作，您需要做的就是从“&Result P/F”中删除“P/F”

您可以从它试图插入“PP/F”的旧的新输出中看到这一点，这就是您的约束失败的原因。

此外，最好不要将列称为“结果 P/F”，而是使用别名。

干杯

# c++ - 带有可变参数的外部模板无法编译

> ID：16077430
> 
> 赞同：3
> 
> 时间：2013-04-18T07:55:19.803
> 
> 标签：c++, templates, c++11, variadic-templates

我尝试使用可变参数创建一个外部模板，例如：

```
extern template<typename... XS> void log( XS... xs ); 
```

但是 gcc 7.2 没有编译它，并显示错误：

```
error: expected unqualified-id before ‘&lt;’ token 
```

我检查了 c++11 中的 gcc 状态，extern 模板应该可以工作，不是吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T08:08:21.387

该`extern`关键字的作用与您的预期不同 - 当然，如果我正确理解您的预期。

该`extern`关键字应用于模板的*显式实例化*，它可以防止编译器在处理某个翻译单元时为该模板隐式生成代码。根据 C++11 标准的第 14.7.2/2 段：

> 显式实例化有两种形式：显式实例化定义和显式实例化声明。**显式实例化声明以`extern`关键字**开头。

如果没有关键字，编译器将在每个包含对 的调用的翻译单元中`extern`为（比如说）生成代码，并且该代码（对于所有翻译单元应该并且应该是相同的）最终将由链接器合并（链接器基本上会丢弃所有重复并只保留一个）。`log(double, int)``log(double, int)`

`extern`关键字通过告诉编译器：“*相信我，其他人会在其他地方实例化这个模板——你现在不需要这样做*”，从而避免了编译时间的浪费。**但这个承诺必须兑现**。

例如，如果您有这个主模板：

```
template<typename... Xs> void log(Xs... xs); 
```

然后你声明这个显式实例化：

```
extern template void log(int, double); 
```

比您必须在某些翻译单元中具有相应的显式实例化：

```
template void log(int, double) 
```

否则，编译器将永远不会为 生成代码`log<int, double>(int, double)`，并且链接器将抱怨未定义的引用。

# mysql - MYSQL 查询 - 当 col1 只有“特殊”使用时，其他使用另一个

> ID：16077435
> 
> 赞同：1
> 
> 时间：2013-04-18T07:55:43.003
> 
> 标签：mysql, sql, having

关注数据集

```
 ID  | Description |   Type
-------------------------------
12204 |     ABC     | Special
12204 |     DEF     | Connector
12541 |     GHI     | Special
12541 |     JKL     | Special
12541 |     MNO     | Hybrid
13292 |     PQR     | Resistor
13292 |     STU     | Connector
13292 |     VWX     | Hybrid
14011 |     YZa     | Special
14012 |     bcd     | Resistor 
```

我想要的是以下内容：

```
 ID  | Description |   Type
-------------------------------
12204 |     DEF     | Connector
12541 |     MNO     | Hybrid
13292 |     PQR     | Resistor or Connector or Hybrid <-- doesn't matter
14011 |     YZa     | Special
14012 |     bcd     | Resistor 
```

所以，我需要的只是根据类型的整个数据集。如果可能只有“特殊”类型，那么我需要使用它，但如果没有，那么我想使用其他类型。

我想对所有内容进行分组，但随后它使用了第一行，其中主要包含 Special ...

到目前为止我的查询：

```
SELECT ID, Description, Type FROM anyDatabase GROUP BY ID HAVING count(Type) > 1 
```

希望任何人都可以提供帮助:) Adi

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:08:47.603

你可以这样试试

```
SELECT
  l.id,
  l.description,
  IF(r.type IS NULL, l.type, r.type) AS `Type`
FROM newtable as l
  LEFT JOIN (SELECT *
         FROM newtable
         WHERE type <> 'Special') as r
    on r.id = l.id
GROUP BY l.id 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/b729d/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:19:48.290

这可能是一个解决方案：

```
SELECT 
    newtable.id, 
    newtable.description, 
    newtable.type
FROM newtable 
INNER JOIN(
           SELECT
              id, 
              MAX(CASE WHEN Type!='Special' THEN Type END) type
           FROM newtable
           GROUP BY id
      ) mx
  ON newtable.id=mx.id
     AND newtable.type=COALESCE(mx.type, 'Special') 
```

[在这里](http://sqlfiddle.com/#!2/f4e0b/5)提琴（感谢 raheel shan 的提琴！）

# r - How to calculate the amount of numbers inside a specific range

> ID：16077439
> 
> 赞同：2
> 
> 时间：2013-04-18T07:55:57.337
> 
> 标签：r

I'm still having problems calculating numbers.

Trying to find the amount of numbers inside [-0.5 , 0.5] the first line, and the amount of numbers outside the same range in the second line.

I use `abc = rnorm(100, mean=0, sd=1)`. So I have 100 numbers in total, but i only have 35 numbers inside the range, and 35 outside the range, that dosen't add up to 100.

```
length(abc[abc>=-0.5 & abc<=0.5])
[1] 35

length(abc[abc<-0.5 & abc>0.5])
[1] 35 
```

Then I tried:

```
length(which(abc>=-0.5 & abc<=0.5))
[1] 40

length(which(abc<-0.5 & abc>0.5))
[1] 26 
```

And it still doesn't add up to 100\. What's wrong?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T08:01:10.997

你在追求：

```
R> set.seed(1)
R> abc = rnorm(100, mean=0, sd=1)
R> length(abc[abc >= -0.5 & abc <= 0.5])
[1] 41
R> length(abc[abc < -0.5 | abc > 0.5])
[1] 59 
```

**什么地方出了错**

两件事情：

1.  `abc < -0.5 & abc > 0.5`要求小于 -0.5**且**大于 0.5的值
2.  但是，您实际上有：`abc[abc<-0.5 & abc>0.5]`由于范围界定，这会有所不同。让我们把它分开：

    ```
    R> abc[abc<-0.5 & abc>0.5]
     [1] 1.5953 0.7383 0.5758 1.5118 1.1249 0.9438 <snip> 
    ```

    现在让我们看看`abc`

    ```
    R> abc
    [1] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE 
    ```

    你改变了`abc`! 这是因为`<-`是赋值运算符。您已设置`abc`为`0.5 & abc > 0.5`。为避免这种情况，请使用间距（如我的代码中所示）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T08:14:06.030

当想要像这样在半径内外查找数字时，考虑绝对值会很有帮助，然后您只需进行一次比较：

```
length(abc[abs(abc)<=0.5])
[1] 41
length(abc[abs(abc)>0.5])
[1] 59 
```

或者您可以在一行中使用`cut`and来完成：`table`

```
table(cut(abs(abc),c(-Inf,0.5,Inf)))

  (-Inf,0.5] (0.5,Inf] 
       41        59 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T08:03:13.790

作为捷径，您也可以这样做：

```
set.seed(1)
abc <- rnorm(100, mean=0, sd=1)
sum(abc>=-0.5 & abc<=0.5)
# [1] 41
sum(abc< -0.5 | abc>0.5)
# [1] 59 
```

这是有效的，因为`sum`将 TRUE 视为 1，将 FALSE 视为 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T08:07:24.653

或者通过`subset`：

```
set.seed(1)
abc <- rnorm(100, mean=0, sd=1)

length(subset(abc, abc >= (-0.5) & abc <= 0.5))
[1] 41
length(subset(abc, abc < (-0.5) | abc > 0.5))
[1] 59 
```

# netbeans-7 - Apache Velocity Initialised error

> ID：16077446
> 
> 赞同：0
> 
> 时间：2013-04-18T07:56:22.677
> 
> 标签：netbeans-7, velocity

I have a Maven project that I built using Netbeans 7.2 and runs on Glassfish 3\. I thought I would try my luck at upgraded from Netbeans 7.2 to 7.3 yesterday but the transition has caused an error with Apache Velocity. If I run it in 7.2 it works fine, If I run it in 7.3 I get the following errors

```
SEVERE: There was an unspecified exception whilst sending an email
java.lang.RuntimeException: Velocity could not be initialized!
    at org.apache.velocity.runtime.RuntimeInstance.requireInitialization(RuntimeInstance.java:307)
    at org.apache.velocity.runtime.RuntimeInstance.parse(RuntimeInstance.java:1196)
    at org.apache.velocity.runtime.RuntimeInstance.parse(RuntimeInstance.java:1181)
    at org.apache.velocity.runtime.RuntimeInstance.evaluate(RuntimeInstance.java:1297)
    at org.apache.velocity.runtime.RuntimeInstance.evaluate(RuntimeInstance.java:1265)
    at org.apache.velocity.app.Velocity.evaluate(Velocity.java:180)
    at tv.tarka.dastraxweb.integration.email.Velocity.combine(Velocity.java:111)
    at tv.tarka.dastraxweb.integration.email.EmailConstructor.build(EmailConstructor.java:93)
    at tv.tarka.dastraxweb.object.ticket.ManualTicketObj.create(ManualTicketObj.java:267)
    at tv.tarka.dastraxweb.service.tickets.NewManualTicketMb.openNewTicket(NewManualTicketMb.java:51)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.invokeMethod(BeanELResolver.java:779)
    at javax.el.BeanELResolver.invoke(BeanELResolver.java:528)
    at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:257)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:248)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39)
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:87)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:101)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:791)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1256)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)
    at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
    at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
    at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
    at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
    at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
    at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
    at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)
    at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)
    at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)
    at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)
    at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:383)
    at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)
    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.velocity.exception.VelocityException: Error initializing log: Failed to initialize an instance of org.apache.velocity.runtime.log.Log4JLogChute with the current runtime configuration.
    at org.apache.velocity.runtime.RuntimeInstance.initializeLog(RuntimeInstance.java:875)
    at org.apache.velocity.runtime.RuntimeInstance.init(RuntimeInstance.java:262)
    at org.apache.velocity.runtime.RuntimeInstance.requireInitialization(RuntimeInstance.java:302)
    ... 77 more
Caused by: org.apache.velocity.exception.VelocityException: Failed to initialize an instance of org.apache.velocity.runtime.log.Log4JLogChute with the current runtime configuration.
    at org.apache.velocity.runtime.log.LogManager.createLogChute(LogManager.java:220)
    at org.apache.velocity.runtime.log.LogManager.updateLog(LogManager.java:269)
    at org.apache.velocity.runtime.RuntimeInstance.initializeLog(RuntimeInstance.java:871)
    ... 79 more
Caused by: java.lang.RuntimeException: Error configuring Log4JLogChute : 
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.apache.velocity.util.ExceptionUtils.createWithCause(ExceptionUtils.java:67)
    at org.apache.velocity.util.ExceptionUtils.createRuntimeException(ExceptionUtils.java:45)
    at org.apache.velocity.runtime.log.Log4JLogChute.initAppender(Log4JLogChute.java:133)
    at org.apache.velocity.runtime.log.Log4JLogChute.init(Log4JLogChute.java:85)
    at org.apache.velocity.runtime.log.LogManager.createLogChute(LogManager.java:157)
    ... 81 more
Caused by: java.io.FileNotFoundException: velocity.log (Permission denied)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:136)
    at org.apache.log4j.FileAppender.setFile(FileAppender.java:273)
    at org.apache.log4j.RollingFileAppender.setFile(RollingFileAppender.java:156)
    at org.apache.log4j.FileAppender.<init>(FileAppender.java:97)
    at org.apache.log4j.RollingFileAppender.<init>(RollingFileAppender.java:60)
    at org.apache.velocity.runtime.log.Log4JLogChute.initAppender(Log4JLogChute.java:118)
    ... 83 more

SEVERE: There was an unspecified exception whilst sending an email
java.lang.NullPointerException
    at org.apache.velocity.runtime.RuntimeInstance.parse(RuntimeInstance.java:1198)
    at org.apache.velocity.runtime.RuntimeInstance.parse(RuntimeInstance.java:1181)
    at org.apache.velocity.runtime.RuntimeInstance.evaluate(RuntimeInstance.java:1297)
    at org.apache.velocity.runtime.RuntimeInstance.evaluate(RuntimeInstance.java:1265)
    at org.apache.velocity.app.Velocity.evaluate(Velocity.java:180)
    at tv.tarka.dastraxweb.integration.email.Velocity.combine(Velocity.java:111)
    at tv.tarka.dastraxweb.integration.email.EmailConstructor.build(EmailConstructor.java:99)
    at tv.tarka.dastraxweb.object.ticket.ManualTicketObj.create(ManualTicketObj.java:267)
    at tv.tarka.dastraxweb.service.tickets.NewManualTicketMb.openNewTicket(NewManualTicketMb.java:51)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.invokeMethod(BeanELResolver.java:779)
    at javax.el.BeanELResolver.invoke(BeanELResolver.java:528)
    at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:257)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:248)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39)
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:87)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:101)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:791)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1256)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)
    at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
    at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
    at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
    at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
    at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
    at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
    at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)
    at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)
    at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)
    at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)
    at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:383)
    at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)
    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

The actual line of code that triggers the error is:

```
org.apache.velocity.app.Velocity.evaluate(context, writer, "Velocity log Tag", emailTemplate); 
```

The line that I find interesting is:

```
Caused by: java.io.FileNotFoundException: velocity.log (Permission denied) 
```

I was reading some posts and the Velocity docs and it appears that this error might be caused when velocity is trying to log to a file that it does not have permission to write to.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:59:51.100

这实际上是日志记录权限的问题。假设您使用 VelocityEngine 的单独实例，您只需要指定一个属性来防止记录：

```
VelocityEngine ve = new VelocityEngine();
ve.setProperty("runtime.log.logsystem.class", "org.apache.velocity.runtime.log.NullLogSystem");
ve.init(); 
```

而已！

注意。我不喜欢这个答案，因为它基本上会关闭 Velocity 日志记录，但如果您遇到问题，它会让 Velocity 恢复运行。

# opengl-es - 纹理全黑

> ID：16077448
> 
> 赞同：1
> 
> 时间：2013-04-18T07:56:29.700
> 
> 标签：opengl-es, opengl-es-2.0

据我所知，我第一次尝试在三角形上绘制纹理的设置正确，但它显示为全黑。

我将图像发送到 OpenGL，如下所示：

```
 GLuint gridTexture;
    glGenTextures(1, &gridTexture);
    glBindTexture(GL_TEXTURE_2D, gridTexture);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, size.x,
                 size.y, 0, GL_RGBA, GL_UNSIGNED_BYTE, pixels); 
```

虽然我不确定如何测试“像素”是否符合我的预期，但我确实知道我正在使用的 PNG 的`size.x`和`size.y`变量正在正确记录，所以我假设像素也运行良好，因为它们都是在我的资源加载器中一起提取

我的着色器很简单：

```
attribute vec4 Position;
attribute vec4 SourceColor;
attribute vec2 TextureCoordinate;

varying vec4 DestinationColor;
varying vec2 TextureCoordOut;

uniform mat4 Projection;
uniform mat4 Modelview;

void main(void)
{
    DestinationColor = SourceColor;

    gl_Position=Projection*Modelview*Position;
    TextureCoordOut = TextureCoordinate;
} 
```

分段：

```
varying lowp vec4 DestinationColor;
varying mediump vec2 TextureCoordOut;

uniform sampler2D Sampler;

void main(void)
{
    gl_FragColor = texture2D(Sampler, TextureCoordOut) * DestinationColor;
//        gl_FragColor = DestinationColor; //this works and I see varied colors fine
} 
```

我从客户端内存中发送纹理坐标，如下所示：

```
glEnableVertexAttribArray(textCoordAttribute));    
glVertexAttribPointer(textCoordAttribute, 2, GL_FLOAT, GL_FALSE, sizeof(vec2),&texs[0]); 
```

带有纹理坐标的三角形及其顶点是这样的；我知道坐标没有抛光，我只想在屏幕上看到一些东西：

```
//omitting structures that I use to hold my vertex data, but you can at least see the vertices and the coordinates I am associating with them. The triangle draws fine, and if I disable the texture2D() function in the frag shader I can see the colors of the vertices so everything appears to be working except the texture itself.

    top.Color=vec4(1,0,0,1);
    top.Position=vec3(0,300,0);
    texs.push_back(vec2(0,1));

    right.Color=vec4(0,1,0,1);
    right.Position=vec3(300,0,0);
    texs.push_back(vec2(1,0));

    left.Color=vec4(0,0,1,1);
    left.Position=vec3(-300,0,0);
    texs.push_back(vec2(0,0));

    verts.push_back(top);
    verts.push_back(right);
    verts.push_back(left); 
```

为了更好地衡量，我尝试在绘制之前再次使用 glBindTexture 绑定纹理以使其处于“活动状态”，但这没有任何区别。

我认为可能有一个非常简单的步骤我没有在某个地方做，但我在任何地方都找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-02-07T21:27:12.490

对于纹理显示为黑色的人，我发现的另一个原因是，如果您在创建纹理时（在 glTexImage2D 之前）没有设置这些简单的参数，则纹理显示为黑色

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_GENERATE_MIPMAP, GL_FALSE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:11:22.487

通过使我的纹理尺寸的长度和宽度为 2 的幂来解决该问题。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-18T08:32:36.127

在设置过滤器之前，您必须将数据绑定到纹理。您必须先调用 glTexImage2D

```
GLuint gridTexture;
glGenTextures(1, &gridTexture);
glBindTexture(GL_TEXTURE_2D, gridTexture);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, size.x,
                 size.y, 0, GL_RGBA, GL_UNSIGNED_BYTE, pixels);  
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR); 
```

# php - AJAX call success but data not retrieved at server

> ID：16077451
> 
> 赞同：2
> 
> 时间：2013-04-18T07:56:38.383
> 
> 标签：php, jquery, ajax, google-api

I have an ajax call that passes data to another php file, createTest2.php, as below.

But the createTest2.php file throws error

```
"Notice: Undefined index: aaa in C:\xampp\htdocs\TestProj\Test\createTest2.php on line 2 
```

I have no clue how to fix it.

caller.php

```
$(document).ready(function(){
    $("#button_submit").click(function() 
  {

    $.ajax({
      type:"POST",
      url:"createTest2.php",
      data:{aaa : "UNIT_TEST"},
      success:function()
      {
        alert("success");
      }
    });
 });
}); 
```

createTest2.php

```
$test_name = $_POST['aaa']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:04:25.270

```
 if you are using 
    $test_name = $_POST['aaa'];
 you have to call ajax like this
$(document).ready(function(){
    $("#button_submit").click(function() 
  {

    $.ajax({
      type:"POST",
      url:"createTest2.php",
     data:"aaa=UNIT_TEST",
      success:function()
      {
        alert("success");
      }
    });
 });
}); 
```

最主要的是“数据：”aaa = UNIT_TEST“，”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:05:29.533

尝试这个：

```
//sample.php
<?php
if(isset($_POST) && isset($_POST['aaa'])){
    echo json_encode("hello world! Your data was: " . $_POST['aaa']);
}
?>

//your client side page
<html>
<head>
    <title></title>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript">

        function send(){
            $.ajax({
                type:"POST",
                url: 'sample.php',
                data:{aaa:"UNIT_TEST"},
                dataType: 'json'
            }).done(function(data){
                alert(data);
            });
        }

    </script>
</head>
<body>
<a href="#" onclick="send();">Send</a>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:18:30.510

例如，在 index.html 中试试这个：

```
<script>
$(document).ready(function(){
    $("#button_submit").click(function() 
  {

    $.ajax({
    global: false,
    type:"post",
    dataType: "html",
    cache: false,
    url: "createTest2.php",
    data: {aaa:'test'},
    success:function(html)   {    alert(html);  },
    error: function(e) {alert(e);}
    });
 });
});
</script> 
```

并在您的 createTest2.php 中放置它以查看是否收到了 ajax 调用：

```
<?php
echo $_POST['aaa'];

?> 
```

# memory - GCC 中的后链接器汇编代码

> ID：16077452
> 
> 赞同：2
> 
> 时间：2013-04-18T07:56:38.920
> 
> 标签：memory, gcc, assembly, linker, mips

我正在将 C 程序编译为 elf32-bigmips 汇编代码，并且我已经设法使用以下命令获取汇编输出（对于使用 O1 的示例程序）。

mips-elf-gcc -O1 -c -g fib.c

mips-elf-objdump -D -S -M 无别名 -j .rodata -j .text -j .bss -j .data fib.o > fib-O1.asm

但是，这给了我缺少链接部分的汇编代码。我在代码中使用带有数据的常量数组，这些数组都是汇编代码中的引用，就好像它们从内存位置 0 开始一样，即没有内存地址偏移！我怀疑这是因为缺少链接器信息？

*   如何获得具有正确内存引用的后链接器汇编代码？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:56:26.120

该`-c`选项的意思是`Compile and assemble, but do not link`。如果您还想将目标代码链接到可执行文件中，请将其删除，然后运行`objdump`​​.

# ios - File cached status without downloading - Dropbox Sync API

> ID：16077457
> 
> 赞同：1
> 
> 时间：2013-04-18T07:57:06.230
> 
> 标签：ios, dropbox

I would like to show the user a list of his dropboxed files and whether they are cached on the device or have to be downloaded first.

The way I tried to do this is to iterate the result of listFolder (Dropbox Sync API, iOS) and open the files to get the DBFileStatus. But by opening the files, they start to download.

Is there a way to get this information without downloading all the files?

Thanks Manuel

# macos - Rmpi 是否需要有效的 Internet 连接？

> ID：16077460
> 
> 赞同：5
> 
> 时间：2013-04-18T07:57:14.900
> 
> 标签：macos, r, parallel-processing, mpi

我刚刚`Rmpi`使用本教程安装：Mac OS-X Mountain Lion 上的[http://www.stats.uwo.ca/faculty/yu/Rmpi/mac_os_x.htm 。](http://www.stats.uwo.ca/faculty/yu/Rmpi/mac_os_x.htm)我只需要 Rmpi​​ 来使用所有内核，而不需要部署在硬件集群或类似设备上。

实际上，一切正常，但现在我体验到，每当我没有有效的互联网连接（比如坐在火车上或只是转无线）时，产卵奴隶都会失败，我想知道这是否应该像这样工作？

```
> require( Rmpi )
> mpi.spawn.Rslaves( nslaves=2 )

--------------------------------------------------------------------------
At least one pair of MPI processes are unable to reach each other for
MPI communications.  This means that no Open MPI device has indicated
that it can be used to communicate between these processes.  This is
an error; Open MPI requires that all MPI processes be able to reach
each other.  This error can sometimes be the result of forgetting to
specify the "self" BTL.

  Process 1 ([[56132,1],0]) is on host: ABC-MB02
  Process 2 ([[56132,2],0]) is on host: ABC-MB02
  BTLs attempted: self sm

Your MPI job is now going to abort; sorry.
--------------------------------------------------------------------------
    2 slaves are spawned successfully. 0 failed.
[ABC-MB02:53970] 2 more processes have sent help message help-mca-bml-r2.txt / unreachable proc
[ABC-MB02:53970] Set MCA parameter "orte_base_help_aggregate" to 0 to see all help / error messages 
```

然后我的 CPU 的负载就跳到 100%，最终 R 会话将崩溃。

有什么想法可以避免这种行为吗？这是我的`sessionInfo`

```
R version 2.15.2 (2012-10-26)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] graphics  grDevices datasets  stats     utils     methods   base     

other attached packages:
[1] Rmpi_0.6-3     ggplot2_0.9.3  stringr_0.6.2  reshape2_1.2.2 plyr_1.8      

loaded via a namespace (and not attached):
 [1] colorspace_1.2-1   dichromat_2.0-0    digest_0.6.3       grid_2.15.2        gtable_0.1.2       labeling_0.1      
 [7] MASS_7.3-23        munsell_0.4        proto_0.3-10       RColorBrewer_1.0-5 scales_0.2.3       tools_2.15.2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T14:40:05.983

它不需要互联网连接，但是如果您只有“self”和“sm”BTL 可用，并且在我的 Mac 笔记本电脑上，“tcp”BTL 不可用，除非“网络首选项”中至少有一个网络“已连接”。有趣的是，当工人由 mpirun 启动时，我能够成功使用 Rmpi​​，而不是被生成。此外，当 Linux 机器完全拔掉电源时，我在 Linux 机器上生成进程也没有任何问题。

通过使用以太网电缆将笔记本电脑连接到另一台计算机，甚至连接到一个小树莓派，我能够成功地让我的笔记本电脑生成进程。尽管电缆实际上不能用于任何事情，但它诱使 Mac 认为“以太网”已连接，因此“tcp”BTL 在 Open MPI 中可用，因此生成过程有效。

更新：

我终于找到了一个适用于我的 MacBook Pro 的解决方案。通过将**btl_tcp_if_include** MCA 参数设置为“lo0”，您可以在笔记本电脑未连接到任何外部网络时强制 Open MPI 使用环回接口进行 TCP 通信。设置它的一种方法是在 R 脚本中使用环境变量：

```
Sys.setenv(OMPI_MCA_btl_tcp_if_include='lo0')
library(Rmpi)
mpi.spawn.Rslaves(nslaves=2) 
```

只要您在加载之前设置环境变量，它似乎就可以工作`Rmpi`，这是调用 MPI_INIT 的时候。

# cuda - 在 GPU 上用于双精度的 atomicAdd()

> ID：16077464
> 
> 赞同：9
> 
> 时间：2013-04-18T07:57:30.653
> 
> 标签：cuda, atomic

我在GPU上做一个项目，我必须使用atomicAdd()来做double，因为cuda不支持double，所以我使用下面的代码，这是NVIDIA提供的。

```
__device__ double atomicAdd(double* address, double val)
{
    unsigned long long int* address_as_ull =
                                          (unsigned long long int*)address;
    unsigned long long int old = *address_as_ull, assumed;
    do {
        assumed = old;
        old = atomicCAS(address_as_ull, assumed, 
                        __double_as_longlong(val + 
                        __longlong_as_double(assumed)));
    } while (assumed != old);
    return __longlong_as_double(old);
} 
```

现在我想知道为什么该工具需要一个循环，而（假设！=旧）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T10:15:08.477

基本上是因为实现需要负载，而负载不能以原子方式执行。比较和交换操作是一个原子版本

```
(*address == assumed) ? (assumed + val) : *address 
```

不能保证 at 的值`*address`不会在加载值`*address`的周期和`atomicCAS`调用用于存储更新值的周期之间发生变化。如果发生这种情况，`*address`则不会更新 at 的值。因此，循环确保重复这两个操作，直到`*address`读取和比较和交换操作之间的值没有变化，这意味着更新发生了。

# javascript - SyntaxError：意外的令牌 Q

> ID：16077472
> 
> 赞同：0
> 
> 时间：2013-04-18T07:57:38.573
> 
> 标签：javascript

在 Chrome 控制台中使用此代码出现错误

```
SyntaxError: Unexpected token Q 
```

我需要的是使用 JSON.parse() 转换对象中的输入。

知道如何解决此错误吗？

```
var input = 'QR|BEGIN:VEVENT\r\nSUMMARY:Event test 18 APrile\r\nDTSTART:20130418T085900Z\r\nDTEND:20130418T105900Z\r\nLOCATION:Class 18\r\nDESCRIPTION:Desc 18 APrile\r\nEND:VEVENT';

    var output = input.split(/\r\n/);
    output = "{" + output  + "}";
    alert(output);

    var outputJson = JSON.parse(output);
    console.log(outputJson); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:08:17.023

因为它根本不是[JSON](http://www.json.org/)，所以不要将其解析为 JSON。这是你可以做到的：

```
var obj = {};
input.split("\r\n").forEach(function(t){
  var nv = t.split(':');
  obj[nv[0]]=nv[1];
}); 
```

[演示](http://jsbin.com/ametaw/1/edit)（点击“Run with JS”并打开控制台）

（请注意，[由于 forEach](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)要在 IE8 上运行，此代码需要一个 shim）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:08:51.027

JSON.parse 需要一个 JSON 格式字符串作为参数，并将其转换为 JavaScript 对象。您的变量`input`不是 JSON 格式，因此出现错误消息。

您可以参考[http://en.wikipedia.org/wiki/JSON](http://en.wikipedia.org/wiki/JSON)关于 JSON 格式字符串的外观以及它是如何构建的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:13:12.920

该`JSON.parse()`方法期望以有效的 JSON 字符串开头。

您在这里的真正任务是从现有数据中生成这样一个有效的字符串，一种方法是：

```
var output = input.split(/\r\n/);
for (var i = 0; i < output.length; i++) {
    var temp = output[i].split(":");
    output[i] = "\"" + temp[0] + "\": \"" + temp[1] + "\"";
}
var strJSON = "{" + output.join(", ") + "}";
var outputJson = JSON.parse(strJSON); 
```

[现场测试用例](http://jsfiddle.net/V38aV/)。

# java - LDAP 绑定与搜索

> ID：16077473
> 
> 赞同：3
> 
> 时间：2013-04-18T07:57:41.147
> 
> 标签：java, linux, ldap, unboundid-ldap-sdk

LDAP 新手。我计划使用 UnboundID Java API 通过非常慢的链接检查 LDAP 服务器中是否存在约 5K 条目。一是，我可以使用正确的 LDAP 搜索选项。或者通过绑定条目的 DN 来确定条目的存在。请建议，这是快速/最好的方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T16:44:41.723

您绝对不应该仅仅为了确定条目是否存在而执行绑定。这有几个很好的理由：

*   对于您尝试以不存在的用户身份绑定的情况和您尝试使用错误密码绑定的情况，符合标准的 LDAP 服务器应返回“无效凭据”响应。因此，如果您不知道某个用户的密码（如果您甚至不知道该用户是否存在，这是一个不错的选择），那么您就不能使用绑定来区分丢失的用户和错误的用户密码。

*   绑定尝试可能会导致写入目标条目，这可能会显着降低性能。如果您尝试使用错误的密码进行绑定，那么服务器可能会配置为跟踪失败的身份验证尝试，并且在某些情况下甚至可能会锁定用户。即使您使用正确的密码绑定，服务器也可能被配置为更新条目（例如，记录上次登录时间）。

您可以考虑其他一些选项。他们包括：

*   正如 Terry 建议的那样，对每个条目（这是 LDAPConnection.getEntry 方法所做的）执行基本级别的搜索，请求的属性集为“1.1”，这意味着没有属性。如果该条目不存在，您将得到“没有这样的对象”结果（这将导致 LDAP SDK 抛出 LDAPException）。如果条目确实存在，那么您将返回一个仅包含其 DN 的搜索结果条目，然后是搜索结果完成响应。

*   作为使用基本级别搜索的替代方法，您可以使用 LDAP 比较操作。如果您只想知道条目是否存在，这比搜索更有效，因为每个条目只有一个响应（比较结果）而不是两个（搜索结果条目和搜索结果完成）。如果条目存在，那么您将根据条目是否与比较断言匹配得到“比较真”或“比较假”的响应。如果该条目不存在，那么您将得到一个带有“没有这样的对象”结果的 LDAPException。

*   如果您使用的服务器支持 entryDN 操作属性（如 RFC 5020 中所述），那么您可以执行单个搜索来检索多个条目。例如，您可以构造一个过滤器，如 "(|(entryDN=uid=user.1,dc=example,dc=com)(entryDN=uid=user.2,dc=example,dc=com)(entryDN=uid =user.3,dc=example,dc=com)(entryDN=uid=user.4,dc=example,dc=com)(entryDN=uid=user.5,dc=example,dc=com))”。此示例适用于单个搜索请求，可用于确定这五个条目中的哪一个存在。您将拥有一个请求，最多包含五个搜索结果条目响应和一个搜索结果完成响应，而不是为每个条目单独请求和响应。我绝对不建议构建一个包含 5000 个元素的 OR 过滤器，

*   如果您使用的目录没有比您要检查的目录多得多的条目，那么您可以简单地使用您正在寻找的 DN 创建一个集合，执行子树“（objectClass = *）”搜索，然后从服务器返回的集合中删除每个条目的 DN。搜索完成后，留在集合中的条目将是服务器中不存在的条目。当然，如果您只想检查包含大量条目的服务器中的少数条目，这将是一个非常糟糕的主意。

请注意，在您尝试根据条目是否在一组搜索结果中返回来确定条目是否存在的最后两种情况下，您还将受到访问控制限制。如果您用来绑定到服务器的帐户没有权限查看您尝试检查的所有条目，那么您可能会错误地认为某个条目不存在只是因为客户端不存在有权查看它。相反，如果您无权进行检查，前两种方法可能会返回“访问权限不足”的结果，因此这也可能会阻止您做出决定。最终，这意味着您应该使用您自己的帐户

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T10:11:12.497

如果 DN 已知，然后客户端正在检查是否存在而不进行身份验证，则检索`1.1`OID（无属性），而不是 BIND。BIND 通常比搜索慢。例如：

```
try {
    // Connect to the server
    LDAPConnection ldapConnection = new LDAPConnection(...);
    try {
        for(String dn:listOfDns) {
            Entry entry = ldapConnection.getEntry(dn,"1.1");
        }
    } catch(LDAPException ex) {
        // handle an exception from the search
    } finally {
        ldapConnection.close();
    }
 } catch(LDAPException ex) {
        // handle an exception from the connection attempt
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T08:11:16.773

如果没有必要，不要搜索。如果您已经知道 DN，只需绑定到它。

但是通常情况是您知道其他内容，即属性值，例如`mail`or `displayName`，因此您必须首先搜索以找到具有该属性的条目，然后与该条目的 DN 绑定。

# c++ - 为什么此代码段不产生任何输出

> ID：16077475
> 
> 赞同：1
> 
> 时间：2013-04-18T07:57:52.243
> 
> 标签：c++

我正在阅读[Use Python for Scientific Computing](http://www.linuxjournal.com/magazine/use-python-scientific-computing?page=0,0 "使用 Python 进行科学计算")，并决定自己测试代码。所以 C++ 代码是（稍作修改）

```
#include <cstdlib>
#include <ctime>
#include <iostream>
#include <cstring>

int main() {
    std::clock_t begin = std::clock();
    double a1[500][500];
    double a2[500][500];
    double a3[500][500];
    memset(a1, 0, 500*500*sizeof(double));
    memset(a2, 0, 500*500*sizeof(double));
    memset(a3, 0, 500*500*sizeof(double));
    int i, j, k;
    for(i = 0; i < 500; i++) {
        for(j = 0; j < 500; j++) {
            for(k = 0; k < 500; k++) {
                a3[i][j] += a1[i][k] * a2[k][j];
            }
        }
    }
    std::clock_t end = std::clock();
    std::cout << (double)(end - begin) / (double)CLOCKS_PER_SEC<<std::endl;
    return 0;
} 
```

这是一个非常简单的代码，但奇怪的是根本没有生成任何输出。不是0，而是什么都没有。我尝试了 VC11 和 MinGW 4.7，但它们都没有产生任何结果。只有`for`去掉里面的循环，这段代码才会产生输出，也就是0。

如果我在 VS 2012 中调试，则会抛出“堆栈溢出”异常，而如果不在调试模式下则不会发生错误。

这种奇怪行为的原因是什么？

* * *

**编辑**

所以我用`new`了，这次有一个正常的输出0.83。

尽管如此，我还是觉得奇怪的是没有显示堆栈溢出错误，但程序只是退出而不给出输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:17:53.390

你跑了两件事：

1.  编译器\环境参数差异。默认堆栈大小（a1、a2 和 a3 在堆栈中分配）因编译器、操作系统而异。因此，在堆栈不足以容纳这些变量的情况下，您会得到堆栈溢出异常
2.  优化级别的差异（SuvP 得到 0.83 秒）：此代码执行时间会因优化而异。编译器可以注意到循环没有做任何特别的事情，只是将其删除。它可以走得更远，意识到`memset`它们没有用，也可以删除它们。但是如果按原样执行循环，那么在 double 上会有 1.25 亿次操作，这将远远超过仅仅 0.8 秒。

您链接的帖子中的测试从一开始就有缺陷......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:22:22.710

视觉工作室：

您试图在堆栈上放置（提交）6MB，在 x86 和 x64 上，默认保留堆栈大小为 1MB，在安腾上，默认保留堆栈大小为 4MB。你不能承诺比你保留的更多。

在 Visual Studio 中要更改预定义的保留堆栈大小，您应该转到项目属性->链接器->系统->堆栈保留大小，将值设置为 10000000(10MB)，您不会有任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T08:17:06.947

这绝对是堆栈溢出。在 VS 2008 上，它给了我`Unhandled exception at 0x00ef18d7 in Test.exe: 0xC00000FD: Stack overflow.`

`chkstk.asm`在`test`命令中发生错误：

```
; Find next lower page and probe
cs20:
        sub     eax, _PAGESIZE_         ; decrease by PAGESIZE
  -->   test    dword ptr [eax],eax     ; probe page.
        jmp     short cs10

_chkstk endp 
```

要解决此问题，请使用`new`@sarat 提到的分配器分配：

```
double** a1 = new double*[500];
for(int i = 0; i < 500; ++i)
    a1[i] = new double[500]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T08:03:36.247

这将导致堆栈溢出。尝试使用 new 而不是本地数组声明。

这应该会有所帮助：[如何在 C++ 中使用数组](https://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T08:19:15.137

如果不在调试模式下，您的代码只是崩溃/冻结，修复堆栈溢出，它将完成。

增加堆栈大小（链接器堆栈选项）。

# python - Distutils 编译器选项配置

> ID：16077481
> 
> 赞同：7
> 
> 时间：2013-04-18T07:58:06.593
> 
> 标签：python, python-2.7, distutils, enthought

也许是一个愚蠢的问题，但我想知道 Python 的 distutils 从哪里获得编译器选项？它使一些链接目录出错，我想一劳永逸地纠正它。

我知道应该有一个前缀/lib/pythonver/distutils/distutils.cfg，但我在计算机上的任何地方都找不到任何distutils.cfg。显然我没有本地 setup.cfg 或任何 $HOME/.pydistutils.cfg。

我在 Mac OS X 10.8.3 上使用 Enthought 64 位发行版，版本 7.3 (Python 2.7)

干杯，U。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T08:51:20.650

我实际上将它们导出到环境中，就像 autotools 的配置一样：

```
export CC=/usr/local/bin/clang
export CFLAGS=-I${HOME}/include
export LDFLAGS=-lboost 
```

如果您还需要单独覆盖链接器：

```
export LDSHARED=/usr/local/bin/clang -shared 
```

如果您不喜欢`export`对您的环境进行设置，请为一次性设置执行以下操作：

```
CC=/usr/local/bin/clang CFLAGS=-I${HOME}/include python setup.py build 
```

如果您想了解构建 python 时的默认选项，请使用`python-config --<flag>`. 一些标志是`cflags`、`ldflags`或`libs`。`includes`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T16:36:42.050

编译器选项取自 CPython 的 Makefile。IOW 它们与用于编译 Python 的相同。如 Evert 所述，您可以在命令行上覆盖其中的大多数。

全局 distutils.cfg 是系统管理员*可以*创建以设置默认选项的东西，而不是随 Python 一起安装的文件。

# ios - 使用 NSMutableData iOS 进行键值观察

> ID：16077482
> 
> 赞同：0
> 
> 时间：2013-04-18T07:58:14.370
> 
> 标签：ios, xcode, key-value-observing, nsmutabledata

在我的模型中，我有称为数据的 NSMutableData 对象。我想从另一个对象观察它，并在添加或删除数据时收到通知。

我知道这是一个对多的关系，所以我不能通过首先使用这段代码添加观察者来使用普通的 KVO

```
[object addObserver:self forKeyPath:@"data" options:NSKeyValueObservingOptionNew context:NULL]; 
```

然后在`observeValueForKeyPath:ofObject:change:context:`发送通知时实现该方法来做某事。

我已经阅读了[Key-Value Observing Documentation](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueObserving/Articles/KVODependentKeys.html)并找到了关于它的其他帖子。[使用 KVO 与 NSNotificationCenter 观察对可变数组的更改](https://stackoverflow.com/questions/10436185/observing-changes-to-a-mutable-array-using-kvo-vs-nsnotificationcenter)并[观察 NSMutableArray 以进行插入/删除](https://stackoverflow.com/questions/302365/observing-an-nsmutablearray-for-insertion-removal)它们都使用 NSMutableArray 作为示例。NSMutableData 也可以吗？我不明白我必须实施什么。

有人能告诉我我究竟必须在哪个类中实现 NSMutableData 对象的 KVO 工作吗？或者，如果这是不可能的，另一种解决方案？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T08:30:08.430

对 KVO 有一个常见的误解：无法观察其他符合 KVO 的属性的内部状态。

NSData 就是这种情况：从 KVO 的角度来看，对象的数据属性不会改变，改变的是 NSData 的状态。如果 NSMutableData 为其内容公开符合 KVO 的属性，您可以通过观察关键路径（如 @"data.contents"）来观察更改，但事实并非如此。

KVO 仅适用于 KVC 兼容的属性，这些属性也被记录为兼容 KVO。大多数 Cocoa 框架类不提供这种保证，并且观察对象及其关键路径是一个错误。

您的情况的解决方案不是将 an`NSMutableData`作为公共属性公开，而是使用不可变数据并将方法添加`appendData:`到您的自定义类中。这将使您有机会在这些方法中对数据对象进行更改并手动发出 KVO 通知（使用`willChangeValueForKey:@"data"`... do the change ... `didChangeValueForKey:@"data"`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:33:16.937

KVO 不会帮助您观察 NSMutableData 的内部变化。在您的示例中，您只观察“数据”属性，并且只有在模型的数据属性发生更改时才会收到有关更改的通知（例如，您分配了另一个 NSData 实例）。

在您的情况下，我建议您使用通知：对数据突变感兴趣的对象订阅给定名称的通知，并且每次将新数据附加到模型的数据时，模型都会发布此通知。

# vb.net - If() 语句的奇怪行为

> ID：16077483
> 
> 赞同：5
> 
> 时间：2013-04-18T07:58:16.860
> 
> 标签：vb.net

今天我偶然发现了 VB.net If() 语句的一个奇怪行为。也许您可以解释为什么它会像现在这样工作，或者您可以确认它是一个错误。

所以，我有一个 SQL 数据库，其中有一个表“TestTable”，其中一个 int 列“NullableColumn”可以包含 NULL。我想读出本专栏的内容。

所以我为此声明了一个类型的变量，为“SELECT NullableColumn FROM TestTable”`Nullable(Of Integer)`打开一个`SqlClient.SqlDataReader`并使用以下代码获取该列的内容：

```
Dim content as Nullable(Of Integer)

...

Using reader as SqlClient.SqlDataReader = ...
  content = If(reader.IsDBNull(reader.GetOrdinal("NullableColumn")), Nothing, reader.GetInt32(reader.GetOrdinal("NullableColumn")))
End Using 
```

但在那之后，我的变量`content`的值为 0，`Nothing`与我预期的不同。

调试时一切看起来都很好，所以

*   `reader.GetOrdinal("NullableColumn")`提供此列的正确序号位置（即 0）
*   `reader.IsDBNull(0)`并`reader.IsDBNull(reader.GetOrdinal("NullableColumn"))`交付`True`，因为该列的内容确实为 NULL
*   `If(1=2, Nothing, "Not Nothing")`提供字符串“Not Nothing”
*   `If(1=1, Nothing, "Not Nothing")`交付`Nothing`
*   `reader.GetInt32(reader.GetOrdinal("NullableColumn"))`抛出错误，因为 NULL 不能转换为`Integer`

那么，为什么我的变量的值为 0？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T15:11:23.863

在 VB 中，Nothing 与 null 不同。If 运算符必须根据传递给它的参数确定其结果的类型。当然，Nothing 没有类型，因此 If 运算符可以在您的代码中返回的唯一类型是 Int32。如果 IsDBNull 方法返回 true，则 If 运算符返回 Nothing 转换为 Int32。在 VB 中，Nothing 返回类型的默认值。对于 Int32，默认值为 0。

从 MSDN 关于 Nothing 关键字：

```
Nothing represents the default value of a data type. The default value depends 
on whether the variable is of a value type or of a reference type.

For non-nullable value types, Nothing in Visual Basic differs from null in C#. 
In Visual Basic, if you set a variable of a non-nullable value type to Nothing, 
the variable is set to the default value for its declared type. In C#, if you 
assign a variable of a non-nullable value type to null, a compile-time error 
occurs. 
```

我认为只是一个普通的 If 效果最好：

```
If Not reader.IsDBNull(reader.GetOrdinal("NullableColumn")) Then
    content = reader.GetInt32(reader.GetOrdinal("NullableColumn"))
End If 
```

或者让它更短

```
If Not reader.IsDBNull(reader.GetOrdinal("NullableColumn")) Then content = reader.GetInt32(reader.GetOrdinal("NullableColumn")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:40:26.820

> 但在那之后，我的变量`content`具有 value `0`，而不是`Nothing`我所期望的。

你如何检查`content`价值？

首先，你应该从`content.HasValue`财产开始。它应该`False`适用于您的情况`Nothing`以及`True`从数据库中获取正确值的时间。

当它没有价值时，您也应该`InvalidOperationException`在访问时获得。`content.Value`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T15:32:16.783

Chris 给出了解释，但我不喜欢他选择的赋值风格，因为它将赋值与变量声明分开。

相比之下，我建议在声明时初始化变量。在这种情况下，它确实有点令人费解，因为您需要`If`首先将任一运算符转换为正确的类型。

```
Dim content = If(reader.IsDBNull(reader.GetOrdinal("NullableColumn")),
                DirectCast(Nothing, Integer?),
                reader.GetInt32(reader.GetOrdinal("NullableColumn"))) 
```

其实你也可以用稍短`New Integer?()`的代替`DirectCast`.

当然 now`content`是在`Using`块内声明的——这可能不是你想要的，但你*应该尽量*使声明本地化。

此外，这段代码很复杂，很可能会被重用。我建议创建一个单独的（扩展）方法来将数据库 NULL 值转换为可空值：

```
<Extension> _
Public Shared Function GetNullable(Of T)(SqlClient.SqlDataReader this, String fieldName) As T?
    Dim i = this.GetOrdinal(fieldName)
    Return If(this.IsDBNull(i), New T?(), this.GetFieldValue(Of T)(i))
End Function 
```

现在您可以按如下方式使用它：

```
Dim content = reader.GetNullable(Of Integer)("NullableColumn") 
```

# c++ - 构建时的 Soci C++ sqlite3 后端抽象

> ID：16077484
> 
> 赞同：2
> 
> 时间：2013-04-18T07:58:18.987
> 
> 标签：c++, sqlite, soci

我在使用 SOCI C++ 3.2 和 mysql 和 sqlite3 后端构建应用程序时遇到问题。这是我包含的标题：

 `````
#include <soci.h>
#include <soci-backend.h>
#include <soci-mysql.h>
#include <soci-sqlite3.h> 
````  `这是我得到的建筑错误：

 `````
/usr/include/soci/sqlite3/soci-sqlite3.h:263: erreur: cannot declare variable ‘soci::sqlite3’ to be of abstract type ‘const soci::sqlite3_backend_factory’
/usr/include/soci/sqlite3/soci-sqlite3.h:257: note:   because the following virtual functions are pure within ‘const soci::sqlite3_backend_factory’:
/usr/local/include/soci/soci-backend.h:271: note:       virtual soci::details::session_backend* soci::backend_factory::make_session(const soci::connection_parameters&) const 
````  `我在网上没有找到有关此问题的太多信息，因此不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:37:11.130

我理解这个问题，soci-3.1 最初是安装在我的环境中（不是我自己），我的 autoconf 宏正在从我从源代码和旧版本执行的 soci-3.2 安装中选择文件。

所以我不得不卸载以前的...````

# javascript - 我不确定我的 ajax 导航是否正常

> ID：16077487
> 
> 赞同：1
> 
> 时间：2013-04-18T07:58:23.020
> 
> 标签：javascript, jquery, ajax, history

我试图用历史 API 制作菜单。但在我看来它工作得不好，我有理由这么认为：

1 我的“标题”没有改变

2 如果我在我的链接上点击快速，我在重新加载时会闪烁页面，但它不应该！（但如果我点击慢，没关系。如何防止重新加载或闪烁？）

请告诉我我做错了什么

```
 $(document).ready(function(){

 sliderStartUp()

//menu click
 $('.navigation').click(function(){

//fill the storage
var storage = {
 url: $(this).children('a').attr('href'),
 title: $(this).children('a').attr('title')
 };

 history.pushState(null, storage.title, storage.url );

    $.ajax({
        url: $(this).children('a').prop("href"),
        cache: false,
        success: function(data){ //if the data you return is a css notation      (eg: #id) of the location of the title name
   JqObj = $(data);
   var addSmth = JqObj.find('#central').html();
  $("#central").html('').html(addSmth);
sliderStartUp()

  }
   });
 return false;

  });

function sliderStartUp(){
  $('#slider').nivoSlider({
effect: 'fold',
animSpeed: '500',
pauseTime: '4000'
});

 }

 }); 
```

这是我的havigarion

```
 <ul id="navig">
 <?php
if ($_SERVER['REQUEST_URI'] == "/") 
{
    $_SERVER['REQUEST_URI'] = "/index";
}
$arrayNav = array(  array (
                        'name' => 'yyyyyy',
                        'title' => 'yyyyyyyyyyy',
                        'link' =>'http://bistro.loc/index',
                        'identificator' => 'id_index',
                        'pattern' => '/index/i'
                            ),
                    array (
                        'name' => 'xxxxxx',
                        'title' => 'xxxxxxx',
                        'link' => http://bistro.loc/price',
                        'identificator' => 'id_price',
                        'pattern' => '/price/i'
                            ),
                    array (
                        'name' => 'aaa',
                        'title' => '',
                        'link' => 'http://bistro.loc/#' ,   
                        'identificator' => 'id_serv',
                        'pattern' => '/#/i'
                            ),
                    array (
                        'name' => 'ssss',
                        'title' => '',
                        'link' => 'http://bistro.loc/#' ,   
                        'identificator' => 'id_cont',
                        'pattern' => '/#/i'
                            ),
                    array (
                        'name' => 'dddd',
                        'title' => '',
                        'link' => 'http://bistro.loc/#' ,   
                        'identificator' => 'id_about',                          
                        'pattern' => '/#/i'                     
                            ));
 foreach ($arrayNav as $item)
{if (preg_match($item['pattern'],"http://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'] ))
    {
        echo "<li  class = \"navigation\" id = \"".$item['identificator']."\"                                                                tltle=\"".$item['title']."\"><a href=\"".$item['link']."\" class=\"active\">".$item['name']."</a></li>";
        }else{
            echo "<li  class = \"navigation\" id = \"".$item['identificator']."\" tltle=\"".$item['title']."\"><a href=\"".$item['link']."\">".$item['name']."</a></li>";}
   ;}

   ?>           
 </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:21:13.887

你的成功功能看起来不太好：

```
success: function(data){
   jqObj = $(data);
   var addSmth = jqObj.find('#central');
   $("#central").html('').html(addSmth); 
```

我认为您的意思是以下内容？

```
success: function(data){ //data is normally just a string
    $("#title").html(data)); 
```

或者

```
function(data){ //if the data you return is a css notation (eg: #id) of the location of the title name
  JqObj = $(data);
  var addSmth = jqObj.find('#central').html();
  $("#central").html(addSmth); 
```

@慢下来：

`$('li[id^=id_]')`可能会减慢速度。我建议你为此使用类。

您也可以`nivoSlider`在创建点击事件后创建。如果你想确保点击事件都尽快完成。

# java - Spring MVC 3 用户定义的异常处理与用户定义的视图

> ID：16077488
> 
> 赞同：4
> 
> 时间：2013-04-18T07:58:24.110
> 
> 标签：java, exception, spring-mvc

如何使用自定义消息和视图名称在 Spring MVC 3 中处理用户定义的异常（自定义异常例如：“BusinessException”）？

例如 ：

如果我从服务层抛出我自己的异常，它应该被捕获并应该重定向到带有消息的指定视图，视图名称可能相同或不同。

我想使用我在谷歌搜索的属性文件显示消息，但没有运气。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T08:06:50.423

看看[SimpleMappingExceptionResolver](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/portlet/handler/SimpleMappingExceptionResolver.html)

```
<bean
    class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
    <property name="exceptionMappings">
        <props>
            <prop key="com.example.exception.BusinessException">
                YourView
                    </prop>
            <prop key="java.lang.Exception">error</prop>
        </props>
    </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-28T06:24:49.817

最后，我详细找到了我在应用程序中使用的问题的答案。在这篇文章中，我已经解释了在三个级别的春季应用程序中处理异常

1.特定代码错误，如404

2.申请错误

3.Ajax调用中的任何异常

## 1.特定代码错误，如404

在 web.xml 中

```
<error-page>
    <error-code>404</error-code>
    <location>/error</location>
</error-page> 
```

指定一个控制器

```
@Controller
public class ErrorController {
      @RequestMapping(value="/error")
      public String handlePageNotFoundException(Exception ex,
          HttpServletResponse response) {
     return "error";
      }

} 
```

在 View Resolver 中指定的位置的 error.jsp

```
<span >
            An error has occured, please contact the support team.
</span> 
```

## 2.申请错误

客户异常处理程序

```
@Component  
public class ExceptionHandler extends ExceptionHandlerExceptionResolver{
        @Autowired
        ApplicationContext context;

        @Override
        public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response, Object o, Exception ex) {

            TestException exception=null;
            if (ex instanceof DataAccessException) {
                exception = new TestException(context.getMessage("SQLException",
                        null, null));
            } else if (ex instanceof SQLException) {
                exception = new TestException(context.getMessage("SQLException",
                        null, null));
            } else if (ex instanceof java.net.UnknownHostException) {
                exception = new TestException(context.getMessage(
                        "UnknownHostException", null, null));
            } else if (ex instanceof IOException) {
                exception = new TestException(context.getMessage("IOException",
                        null,null));
            } else if (ex instanceof Exception) {
                exception = new TestException(context.getMessage("Exception",
                        null, null));
            } else if (ex instanceof Throwable) {
                exception = new TestException(context.getMessage("Throwable",
                        null, null));
            }

            if( isAjax(request) ) {
             return exception.asModelAndView();
           } 
            else
            {  ModelAndView modelAndView = new ModelAndView("TestExceptionPage");

            modelAndView.addObject("exception", exception);
            return modelAndView;
            }
        }
        private boolean isAjax(HttpServletRequest request) {
            return "XMLHttpRequest".equals(request.getHeader("X-Requested-With"));
        }

    } 
```

异常波乔

```
public class TestException extends RuntimeException { 
    private String message;
    public TestException(){}

    public TestException(String message) {
        this.message = message;
    }
    public String getMessage(){
        return this.message;
    }

    public void setMessage(String message) {
        this.message = message;
    }

    public ModelAndView asModelAndView() {
        MappingJacksonJsonView jsonView = new MappingJacksonJsonView();
        return new ModelAndView(jsonView, ImmutableMap.of("error", message));
    } 
```

异常jsp

```
 <h3><span>${exception.message}</span></h3> 
```

## 3.Ajax调用中的任何异常

Common.js

```
 function isError(data){
    if(typeof data.error == 'undefined')
        {
        return true;
        }
        return false;
} 
```

jsp 中的示例 Ajax 调用

```
function customerNameAvail() {
    $.ajax({
      url: 'userNameAvail',
      data: ({email : $('#email').val()}),
      success: function(data) {
          if(isError(data))
          {

    if(data=="email already registered"){
     alert('customer Name already exist');
      }
          else{

             alert('customer Name Available');
              }
          }
          else
          {
        alert(data.error);
          }
      }
    });
} 
```

希望这对那些在 spring 3.2 中寻找异常处理的人有所帮助。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:21:20.840

您可以通过创建具有默认值的 bean来注册 a`@Component`以捕获**所有**异常，然后将特定对象添加到.[`DispatcherServlet`](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/servlet/DispatcherServlet.html) `HANDLER_EXCEPTION_RESOLVER_BEAN_NAME``ModelAndView`

您可以使用[`@Value`](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/annotation/Value.html)(Spring 3.0+) 注入属性 - 请参阅[Spring properties (property-placeholder) autowiring](https://stackoverflow.com/questions/2882545/spring-properties-property-placeholder-autowiring)示例。

```
import org.springframework.web.servlet.*;
import org.springframework.validation.*;
import javax.servlet.http.*;

@Component(DispatcherServlet.HANDLER_EXCEPTION_RESOLVER_BEAN_NAME)
public class MyHandlerExceptionResolver implements HandlerExceptionResolver {

    @Value("${property.name}") private String injectedProperty;

    @Override
    public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) {
        ModelAndView mav = new ModelAndView("viewname");

        if (ex instanceof BusinessException) {
            mav.addObject("injectedProperty", injectedProperty);
        } else (ex instanceof BindException) {
            BindException bindEx = (BindException) ex;
            BindingResult result= bindEx.getBindingResult();

            // add errors from validation to mav
        }

        return mav;
    }
} 
```

# sorting - Grails Gorm 禁用脚手架中字段的排序

> ID：16077489
> 
> 赞同：0
> 
> 时间：2013-04-18T07:58:29.530
> 
> 标签：sorting, grails, grails-orm

我正在寻找一种简单的方法来使用脚手架禁用 gorm 模型中仅一列的排序链接，但在这方面还没有发现任何东西。

就像是

```
static constraints = {
    entryDate(nullable: false, blank: false, sortable: false)
} 
```

这在gorm中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:15:51.793

您可以定义自己的属性并自定义脚手架模板。

自定义属性：

```
static constraints = {
    entryDate(nullable: false, blank: false, attributes: [sortable: false])
} 
```

自定义脚手架模板可能如下所示：

```
props.eachWithIndex { p, i ->
cp = domainClass.constrainedProperties[p.name]
if (p.isAssociation() || (cp.attributes?.sortable != null && !cp.attributes.sortable) ) { %> 
```

# c# - 在 LINQ 中获取动态 OrderBy

> ID：16077490
> 
> 赞同：3
> 
> 时间：2013-04-18T07:58:34.893
> 
> 标签：c#, linq, entity-framework, linq-to-entities, dynamic-linq

我在我的 ASP.NET MVC 3 站点的很多页面中使用数据表。他们使用服务器端分页，现在我想实现基于列标题的排序。Datatables 附带`iSortCol_0` 的是单击哪一列的 int 值。

我不喜欢这种方法，因为查询最终会是这样的：

```
if(iSortCol_0 == 0)
{    
    // query
    // OderBy(x => x.CarName)
} 
```

然后这将对每一列重复（加上一个 else 子句按降序排列）。所以我改变了我的方法，现在将列名传递给服务器。

我想出了以下几点：

```
Expression<Func<vw_Car, string>> sortExpression1 = null;
Expression<Func<vw_Car, int>> sortExpression2 = null;

switch(columnToSort) 
{
    case "InvoiceNo": sortExpression1 = x => x.CarNo; break;
    case "ClientNumber": sortExpression1 = x => x.ForeName; break;
    case "ClientName": sortExpression1 = x => x.SurName; break;
    default: sortExpression2 =  x => x.Age.Value; break;
}

// start of query
.OrderByDir(sortDirection, sortExpression1 , sortExpression2) 
```

现在`OrderByDir`看起来如下：

```
public static IOrderedQueryable<T> OrderByDir<T>(this IQueryable<T> source, string dir, Expression<Func<T, string>> column1, Expression<Func<T, int>> column2)
{
    if (column1 != null)
    {
        return dir == "asc" ? source.OrderBy(column1) : source.OrderByDescending(column1);
    }         
    if (column2 != null)
    {
        return dir == "asc" ? source.OrderBy(column2) : source.OrderByDescending(column2);
    }    
    return null;
} 
```

这样做的原因是它对类型为`string`或的列进行排序`int`。我有另一列`DateTime`要排序，所以我需要写另一列`sortExpression3`，然后将其添加到我的`OrderByDir`.

但是我不太喜欢这个实现——我试图编写一个通用的排序表达式，它把一个对象作为第二个参数而不是`string`, `int`, `Datetime`，但是当有这个代码时，我*无法转换类型 'System.日期时间”键入“System.Object”。LINQ to Entities 仅支持转换实体数据模型原语类型*。

任何人对可能的更好方法有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T08:44:23.147

这样的扩展应该满足您的需求：

```
public static class LinqExtensions
{
    public static IOrderedQueryable<T> OrderBy<T>(this IQueryable<T> source, string property)
    {
        return ApplyOrder(source, property, "OrderBy");
    }

    public static IOrderedQueryable<T> OrderByDescending<T>(this IQueryable<T> source, string property)
    {
        return ApplyOrder(source, property, "OrderByDescending");
    }

    private static IOrderedQueryable<T> ApplyOrder<T>(IQueryable<T> source, string property, string methodName)
    {
        var props = property.Split('.');
        var type = typeof(T);
        var arg = Expression.Parameter(type, "x");
        Expression expr = arg;
        foreach (var prop in props)
        {
            // use reflection (not ComponentModel) to mirror LINQ
            var pi = type.GetProperty(prop);
            expr = Expression.Property(expr, pi);
            type = pi.PropertyType;
        }
        var delegateType = typeof(Func<,>).MakeGenericType(typeof(T), type);
        var lambda = Expression.Lambda(delegateType, expr, arg);

        var result = typeof(Queryable).GetMethods().Single(
                method => method.Name == methodName
                        && method.IsGenericMethodDefinition
                        && method.GetGenericArguments().Length == 2
                        && method.GetParameters().Length == 2)
                .MakeGenericMethod(typeof(T), type)
                .Invoke(null, new object[] { source, lambda });
        return (IOrderedQueryable<T>)result;
    }
} 
```

调用示例：

```
query.OrderBy("Age.Value"); 
```

# git - 将阶段命名为 git checkout-index 参数

> ID：16077491
> 
> 赞同：3
> 
> 时间：2013-04-18T07:58:39.933
> 
> 标签：git

```
git checkout-index --help 
```

说

> --stage=|all 不要检查未合并的条目，而是从命名阶段复制文件。必须介于 1 和 3 之间。注意：--stage=all 自动暗示--temp。

我想了解从 1 到 3 的数字对应的“命名阶段”是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T08:08:42.913

[`git merge`手册页](http://git-scm.com/docs/git-merge)说明：

> 对于冲突的路径，索引文件最多记录三个版本：stage 1 存储来自共同祖先的版本，stage 2 来自`HEAD`和 stage 3 来自`MERGE_HEAD`（您可以检查阶段[`git ls-files -u`](http://git-scm.com/docs/git-ls-files)）。工作树文件包含“合并”程序的结果；即 3 路合并结果与熟悉的冲突标记`<<< === >>>`。

# java - 如何在对象集合和数据库表之间执行差异同步

> ID：16077493
> 
> 赞同：0
> 
> 时间：2013-04-18T07:58:49.047
> 
> 标签：java, hibernate, sync

我有一个类型的哈希图（字符串，PojoObj）。这由我的 Java 程序使用，该程序使用 Quartz schedular 定期运行和触发。

为了安全起见突然杀死java进程..哈希图将被破坏..造成数据丢失..

所以，我计划在计划开始执行类时转储/同步 Hashmap 数据（pojo 对象）。如果同步是差分的，它将有效..（仅在 DB 中更新更改的值）。

我不知道该怎么做...请帮助我..我在我的程序中使用 Hibernate 3.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:14:26.243

您可以为此目的使用 ShutDown 处理程序：

```
public final class MyShutDownHandler extends Thread {

    private List<IObserver> observerList;
    private static MyShutDownHandler shutdownHandler;

    private MyShutDownHandler() {
        observerList = new ArrayList<IObserver>();
        Runtime.getRuntime().addShutdownHook(this);
    }

    public static MyShutDownHandler getShutdownHandler() {
        if (shutdownHandler == null) {
            synchronized (MyShutDownHandler.class) {
                if (shutdownHandler == null) {
                    shutdownHandler = new MyShutDownHandler();
                }
            }
        }
        return shutdownHandler;
    }

    public void run() {
        for (IObserver observer : observerList) {
            observer.execute();
        }
    }

    public void register(IObserver observer) {
        observerList.add(observer);
    }
} 
```

您可以根据需要注册任意数量的观察者（IObserver 的实现）。特定的观察者可以在关闭发生之前执行必要的过程。

```
public interface IObserver {

    void execute();

} 
```

# c# - 在form2中访问form1的结构体数组数据

> ID：16077495
> 
> 赞同：0
> 
> 时间：2013-04-18T07:58:51.813
> 
> 标签：c#, winforms, structure

这是我的问题。

我在form1中有一个如下的自定义结构。

```
public struct MessageInfo
    {
        public int MessagePosition;
        public string UserID;
        public string PutDateTime;
        public string ID;
        public string MessageLength;
        public string MessageData;
    } 
```

我有多个结构数据，我将它们存储在一个结构数组中，如下所示

```
public MessageInfo[] messages; 
```

我将每个结构的多个数据存储在数组中。现在，我想访问这个结构数组，它在 form2 中有数据。有什么建议我该怎么做？

我在form1中尝试了以下内容，但无法访问form2中的数据。

```
public MessageInfo[] GetMessageInfo
    {
        get { return messages;}
    } 
```

我得到以下异常。

```
Cannot implicitly convert type 'form1.MessageInfo[]' to 'form2.MessageInfo[]' 
```

提前致谢。

问候， 维奈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:04:02.957

您的例外是告诉您已经`struct`在**两种形式**中定义了。您需要`MessageInfo`在**一个地方**定义结构并从两种形式中引用相同的结构。

# java - Android - 该类型的 findViewById(int) 方法未定义

> ID：16077497
> 
> 赞同：0
> 
> 时间：2013-04-18T07:59:03.813
> 
> 标签：java, android

任何人都可以帮助不断收到此错误我在这行代码中得到它

```
TextView t1 = (TextView)findViewById(R.id.textCocktailName); 
```

这是完整的代码片段：

```
package com.drunktxtapp;

import android.os.Bundle;
import android.widget.Button;
import android.widget.ImageView;
import android.view.View.OnClickListener;
import android.content.Intent;
import android.widget.TextView;
import android.view.View;

public class CocktailDetail {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.bloody_mary);
        ImageView imageView1 = (ImageView)findViewById(R.id.imageCocktail);
        imageView1.setImageDrawable(getResources().getDrawable(R.drawable.bloodymary));
        Button b1 = (Button) findViewById(R.id.bYoutube);
        TextView t1 = (TextView) findViewById(R.id.textCocktailName);
        String cocktailName = getIntent().getStringExtra("Bloody Mary");
        t1.setText(cocktailName);
        b1.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.youtube.com/watch?v=Alt-ehDc3fc")));
                }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T08:01:07.870

```
public class CocktailDetail { 
...
} 
```

需要是：

```
public class CocktailDetail extends Activity {
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:10:03.533

**使用 Activity 类扩展您的课程**

# java - 在 onchange 之后，Wicket 数据表更改单元格的字体或 css

> ID：16077499
> 
> 赞同：1
> 
> 时间：2013-04-18T07:59:13.217
> 
> 标签：java, javascript, css, datatable, wicket

在我的应用程序中，我有一个 defaultDataTable，带有一个可点击的列和一个用于过滤表的搜索字段。过滤器在将字符插入输入字段后过滤数据表的内容。我的目标是在适用于用户输入的字段中为文本部分加下划线（或其他 CSS）。

示例：如果用户输入“ab”，则字符串“abc”的字符“a”和“b”应加下划线。使用 Javascript，我可以添加一些样式，但我的函数对数据表做了一些奇怪的事情。它会删除表格标签内的所有内容，然后将新的 html 放在那里。所有其他信息都消失了。我究竟做错了什么？

```
<script>
    $('.searchField').keyup(function(){
        var page = $('.datatable');
        alert(page.text());
        var pageText = page.text().replace("<span>","").replace("</span>");
        alert(pageText);
        var searchedText = $('#searchField').val();
        var theRegEx = new RegExp("("+searchedText+")", "igm");    

        var newHtml = pageText.replace(theRegEx ,"<b>$1</b>");
        alert(newHtml);
        page.html(newHtml);
   });
</script> 
```

新表：

```
<table id="ID" class="datatable" wicket:id="ID">
Col1 Col2 123
<b>MATCHEDCHAR</b>
TEXT
<b>MATCHEDCHAR</b>
TEXT
</table> 
```

旧桌子（倒塌的身体和头部）：

```
<table id="ID" class="datatable" wicketsource="URL.java" wicket:id="ID">
<thead wicketsource="org.apache.wicket.extensions.markup.html.repeater.data.table:DataTable.java:181" wicket:id="topToolbars">
<tbody wicketsource="org.apache.wicket.extensions.markup.html.repeater.data.table:DataTable.java:207" wicket:id="body">
<tr class="even" wicketsource="org.apache.wicket.extensions.markup.html.repeater.data.table:DefaultDataTable.java:71" wicket:id="rows">
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:09:34.633

我认为您有一个`searchField`执行表刷新的处理程序。因此，您只需订阅`complete ajax event`.

```
Wicket.Event.subscribe('/ajax/call/complete', function(jqEvent, attributes, jqXHR, errorThrown, textStatus) {
  // call code that highlight the text
}); 
```

您可以将此订阅方法放在页面中（在`script`标签中）。如果你想将 js 调用链接到一个特定的行为`OnChangeAjaxBehavior`，那么你需要调用`target.appendJavaScript`：

```
 new OnChangeAjaxBehavior(){
        @Override
        protected void onUpdate(AjaxRequestTarget target) {
            target.appendJavaScript("<call highlight function here>");
        }
    }; 
```

试试[这个](http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html)jquery highlight 插件。更多关于 ajax 全局调用监听器[的信息](https://cwiki.apache.org/WICKET/wicket-ajax.html)。

我做了一个简单的[演示](http://jsfiddle.net/S8ydD/)，你可以检查一下。

# nhibernate - NHibernate：如何选择已排序的父/子并仅检索特定的 row_numbers

> ID：16077506
> 
> 赞同：0
> 
> 时间：2013-04-18T07:59:37.670
> 
> 标签：nhibernate, queryover, row-number

我有 2 个表：Parent 和 Child，它们具有以下关系：Parent 有很多 Childs。

```
public class Parent
{
    public  DateTime Timestamp;
    public  IList<Child> Child;
}
public Child
{
    public string Name;
} 
```

我想同时选择父级和子级，按时间戳排序，并且只获取索引 x 到 y 之间的行。

```
public IList<Parent> Get(DateTime from, DateTime to, int startRow, int count)
{
    QueryOver<Parent>().Where(row => row.Timestamp >= from)
    .And(row => row.Timestamp <= to).OrderBy(row => row.Timestamp).Asc.List();
} 
```

我不知道如何只获取所需的行。

我应该用 QueryOver 来做吗？还是在 HQL 中做得更好？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:10:50.273

我改变了关系，而不是父母和孩子，我只使用一张桌子：

```
public class Info
{
    public  DateTime Timestamp;
    public string Name;
} 
```

为了获取日期之间的所有记录，对它们进行排序并将它们从索引 startRow 到 startRow + count 我使用了以下内容：

```
public IList<Info> GetInfo (DateTime fromDate, DateTime toDate, int startRow, int count)
{
    IList<Info> result = 
    QueryOver<Info>()
    .Where(row => row.Timestamp >= fromDate)
    .And(row => row.Timestamp <= toDate)
    .OrderBy(row => row.Timestamp).Asc
    .Skip(startRow).Take(count).List();
    return result;
} 
```

生成的 SQL 是：

```
SELECT * FROM Info WHERE timestamp >= :fromDate AND timestamp <= :toDate 
ORDER BY timestamp ASC OFFSET :startRow ROWS FETCH NEXT :count ROWS ONLY 
```

# .net - 在上次更新日期过滤 Rally 缺陷

> ID：16077509
> 
> 赞同：0
> 
> 时间：2013-04-18T07:59:41.600
> 
> 标签：.net, filter, rally, defects

我正在使用以下代码从反弹中检索缺陷数据。目前，缺陷正在通过格式化 ID 过滤。

有什么办法可以按最后更新日期过滤结果吗？

例如：**字符串 queryString = @"(LastUpdateDate < 4\5\2013)";**

```
静态无效主要（字符串 [] 参数）{

RallyServiceService 服务 = 新的 RallyServiceService();

string rallyUser = "用户名";

string rallyPassword = "密码";

 service.Url = "https://rally1.rallydev.com/slm/webservice/1.41/RallyService";

         System.Net.NetworkCredential credential =
           new System.Net.NetworkCredential(rallyUser, rallyPassword);

        Uri uri = new Uri(service.Url);
        System.Net.ICredentials credentials = credential.GetCredential(uri, "Basic");
        service.Credentials = credentials;
        service.PreAuthenticate = true;

         service.CookieContainer = new System.Net.CookieContainer();

         // Find Defect
        //string queryString = @"(LastUpdateDate < 4\5\2013)";
String queryString = "(FormattedID = DE577)";

        // Order by FormattedID Ascending
        string orderString = "FormattedID asc";

        bool fetchFullObjects = true;

        // Paging information
        long start = 0;
        long pageSize = 200;

        // issue query
        QueryResult queryResult = service.query(null, "Defect", queryString, orderString, fetchFullObjects, 1, 20);

        // look at the object returned from query()
        Console.WriteLine("Query returned " + queryResult.TotalResultCount + " objects");

        Console.WriteLine("There are " + queryResult.Results.Length + " objects on this page");
        for (int i = 0; i < queryResult.Results.Length; i++)
        {
             DomainObject rallyobject = queryResult.Results[i];

            Defect defect = (Defect) rallyobject;
            Console.WriteLine("Date: "+defect.LastUpdateDate);
        }

        Console.ReadKey();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:44:55.247

Rally 需要 ISO8601 格式的日期，因此格式的查询字符串：

`string queryString = "(LastUpdateDate < \"2013-04-15\")";`

应该为你工作。

提醒一下，特别是如果您刚刚开始构建集成，我强烈建议您使用 Rally 的[.NET REST SDK](https://developer.help.rallydev.com/rest-api-net)之一，而不是 SOAP。

REST 更健壮、性能更高，而且，Webservices API 1.4x（x 尚未确定）将是支持 SOAP 的最终 API 版本。Webservices 2.x 将仅支持 REST，因此对于任何希望推进新的 Web 服务功能的人来说，使用 REST 将是必不可少的。

# android - 如何在不启用缩放的情况下使内容适合 Android 中的 WebView？

> ID：16077513
> 
> 赞同：2
> 
> 时间：2013-04-18T07:59:55.203
> 
> 标签：android, android-webview, zooming, meta-tags

我尝试如下所示设置元标记以使内容适合 webview，但它不起作用。

```
<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, target-densityDpi=device-dpi, user-scalable=no\"> 
```

但是当我设置以下 webview 设置时，它正在工作。

```
webview.getSettings().setUseWideViewPort(true);
webview.setInitialScale(1); 
```

现在的问题是 webview 允许我放大我不想要的双击。我怎样才能避免这种行为？我还尝试在 webview 设置中设置 setSupportZoom(true)，但我仍然可以双击放大。有人可以建议我解决方案吗？

# python - 带有 mod_wsgi、apache 和 sqlalchemy 的无效语法类模板（metaclass=_TemplateMetaclass）

> ID：16077514
> 
> 赞同：2
> 
> 时间：2013-04-18T07:59:55.413
> 
> 标签：python, apache, sqlalchemy, mod-wsgi, bottle

![在此处输入图像描述](https://i.stack.imgur.com/ncZIH.png)我有一个导入脚本：

```
from bottle import route, request
from sqlalchemy import create_engine, MetaData
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker
from sqlalchemy import Table, Column, Integer
import xml.etree.cElementTree as ET 

@route('/getmember')
def get_member():
    pass
run(host='localhost', port=8080, reloader=True) 
```

我可以使用网络服务器中的瓶子构建成功运行此脚本：`$python3.2 getmember.py`

完成后，我想使用 Apache 运行应用程序，`mod_wsgi`并创建一个名为`adapter.wsgi`：

```
import sys, os, bottle
sys.path = ['/var/www/getmember/'] + sys.path
os.chdir(os.path.dirname(__file__))
import getmember
application = bottle.default_app() 
```

在 Apache 我有：

```
WSGIDaemonProcess getmember user=www-data group=www-data processes=1 threads=5 python-path=/usr/lib/python3.2/site-packages
WSGIScriptAlias /getmember /var/www/idcheck/adapter.wsgi
<Directory /var/www/getmember>
    WSGIProcessGroup getmember
    WSGIApplicationGroup %{GLOBAL}
    Order deny,allow
    Allow from all
</Directory> 
```

当我在: 上使用浏览器运行此脚本时`localhost/getmember`，我收到 HTTP 200 错误，并且 Apache 错误日志显示：

```
mod_wsgi (pid=10271): Exception occurred processing WSGI script '/var/www/getmember/adapter.wsgi'.
Traceback (most recent call last):
  File "/var/www/getmember/adapter.wsgi", line 7, in <module>
    import getmember # This loads your application
  File "/var/www/getmember/getmember.py", line 10, in <module>
    from sqlalchemy import create_engine, MetaData
  File "/usr/lib/python3.2/site-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/__init__.py", line 10, in <module>
    from .sql import (
  File "/usr/lib/python3.2/site-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/sql/__init__.py", line 7, in <module>
    from .expression import (
  File "/usr/lib/python3.2/site-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/sql/expression.py", line 34, in <module>
    from .. import util, exc, inspection
  File "/usr/lib/python3.2/site-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/util/__init__.py", line 7, in <module>
    from .compat import callable, cmp, reduce, defaultdict, py25_dict, \\
  File "/usr/lib/python3.2/site-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/util/compat.py", line 100, in <module>
    from urllib.parse import parse_qsl
    ImportError: No module named parse 
```

那么为什么它在正常的 python 调用下工作（意味着所有库和包都可以）但在 wsgi 和 Apache 下它会抛出这个错误？我感觉它找不到该包的所需路径，但不知道如何添加它。

**编辑**

我运行`import sys`and`print sys.path`来获取运行 python3.2 环境时加载的所有路径。我有多个路径，我在 Apache 中添加到 Python-path：

```
WSGIDaemonProcess idcheck user=www-data group=www-data processes=1 threads=5 python-path=/usr/local/lib/python3.2/dist-packages/distribute-0.6.34-py3.2.egg:/usr/local/lib/python3.2/dist-packages/logilab_common-0.58.3-py3.2.egg:/usr/local/lib/python3.2/dist-packages/logilab_astng-0.24.1-py3.2.egg:/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg:/usr/local/lib/python3.2/dist-packages/psycopg2-2.4.6-py3.2-linux-x86_64.egg:/usr/local/lib/python3.2/dist-packages/pip-1.2.1-py3.2.egg:/usr/local/lib/python3.2/dist-packages/sqlautocode-0.6b1-py3.2.egg:/usr/lib/python3.2:/usr/lib/python3.2/plat-linux2:/usr/lib/python3.2/lib-dynload:/usr/local/lib/python3.2/dist-packages:/usr/lib/python3/dist-packages 
```

这样，早先的错误就消失了，我得到了这个新的无效语法。SQLAlchemy 和 mod_wsgi + Apache 有什么问题吗？

```
mod_wsgi (pid=21339): Target WSGI script '/var/www/getmember/adapter.wsgi' cannot be loaded as Python module.
mod_wsgi (pid=21339): Exception occurred processing WSGI script '/var/www/getmember/adapter.wsgi'.
Traceback (most recent call last):
  File "/var/www/getmember/adapter.wsgi", line 6, in <module>
    import getmember # This loads your application
  File "/var/www/getmember/getmember.py", line 10, in <module>
    from sqlalchemy import create_engine, MetaData
  File "/usr/local/lib/python3.2/dist-packages/SQLAlchemy-0.8.0b2-py3.2.egg/sqlalchemy/__init__.py", line 7, in <module>
    import inspect as _inspect
  File "/usr/lib/python3.2/inspect.py", line 36, in <module>
    import string
  File "/usr/lib/python3.2/string.py", line 89
    class Template(metaclass=_TemplateMetaclass):
                            ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:32:29.773

也许 Apache 正在使用第 2 版 Python 可执行文件？您可以检查 apache 用户的搜索路径或查看 WSGI 指令 WSGIPythonHome / WSGIPythonExecutable。

尝试：

```
import sys 
```

-剪辑-

```
@route('/test', method='GET')
def test():
    return sys.version 
```

或者：

```
#grep Python /var/log/httpd/error_log 
```

# ruby - timeout ie.close 不起作用并发生超时错误

> ID：16077515
> 
> 赞同：0
> 
> 时间：2013-04-18T07:59:56.590
> 
> 标签：ruby, watir

```
ie.link(:id, "ctl00_ContentPlaceHolder1_BtnSearch").click

 rescue Timeout::Error
      #sleep(5)

            puts "timeout"
            ie.close

        #sleep(9)

        retry #open new browser and go to begin
            end` 
```

**当 .click 链接超时时，输出为 = timeout，但 ie.close 不起作用。超时错误来了** **我想在超时错误来时关闭浏览器**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:49:56.070

我不相信`ie.link(:id, "ctl00_ContentPlaceHolder1_BtnSearch").click`会抛出一个`Timeout::Error`。这就是为什么该`rescue`块永远不会执行的原因。

可能引发的异常是：

*   当您这样做`ie.link(:id, "ctl00_ContentPlaceHolder1_BtnSearch").click`并且未找到该元素时，`Watir::Exception::UnknownObjectException`将发生 a 。
*   当您这样做`ie.link(:id, "ctl00_ContentPlaceHolder1_BtnSearch").when_present.click`并且在要求的时间范围内未找到该元素时，`Watir::Wait::TimeoutError`将发生 a。

您的救援可能需要捕获这些异常之一。

```
begin
  ie = Watir::Browser.new
  ie.goto 'www.yourpage.com'
  ie.link(:id, "ctl00_ContentPlaceHolder1_BtnSearch").click
rescue Watir::Exception::UnknownObjectException
  puts "element not found"
  ie.close
  retry #open new browser and go to begin
end 
```

或者，如果您`when_present`在元素上使用：

```
begin
  ie = Watir::Browser.new
  ie.goto 'www.yourpage.com'
  ie.link(:id, "ctl00_ContentPlaceHolder1_BtnSearch").when_presentclick
rescue Watir::Wait::TimeoutError
  puts "element did not appear in time"
  ie.close
  retry #open new browser and go to begin
end 
```

# eclipse - 如何在 Eclipse 中创建类图？

> ID：16077517
> 
> 赞同：0
> 
> 时间：2013-04-18T07:59:57.903
> 
> 标签：eclipse, class, uml

我只是想在 Eclipse 中创建我的项目的类图。该项目已经实现，建议我使用任何工具在 Eclipse 中绘制该项目的图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:01:41.090

看看[模型开发工具（MDT）](http://www.eclipse.org/modeling/mdt/?project=uml2)。

对于逆向工程，您可以使用[JUPE](http://jupe.binaervarianz.de/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-16T23:17:24.590

`ObjectAid`当您只需将类从项目管理器拖放到图表时，就会生成类图。

`UMLGraph`从代码自动创建类/活动图并将它们附加到 javadocs。

据我所知，两者都适用于 Java。我不知道他们是否支持其他语言。

`Papyrus`是手动创建任何 UML 和其他图表的非常强大的工具

# c++ - 第一个 CppUnit 测试：未定义对 CppUnit::SourceLine::SourceLine 的引用

> ID：16077518
> 
> 赞同：1
> 
> 时间：2013-04-18T08:00:02.440
> 
> 标签：c++, unit-testing, compilation, include

我第一次尝试使用 CppUnit 测试。当我尝试编译测试代码时，我得到：

> testing.cpp:(.text+0xca): 未定义引用`CppUnit::SourceLine::SourceLine(std::basic_string, std::allocator > const&, int)'

以及许多其他错误消息。

我猜原因是编译器不知道 UnitTest 库是什么。[在这里](https://stackoverflow.com/questions/5923538/getting-started-with-unittest)，我发现有人问同样的问题。我尝试使用链接问题的答案中的建议，但它仍然不起作用。当我尝试时，`c++ -lunittest++ testing.cpp`我得到：

```
/usr/bin/ld: cannot find -lunittest++
collect2: ld gives back 1 as End-Status 
```

在其他人使用的 make 文件和我看到的工作中：`LDLIBS := -lcppunit`. 所以我尝试`c++ -lcppunit++ testing.cpp`了，但我得到了与`-lunittest`.

有人知道我如何找到 UnitTest 库的位置并将此信息传递给编译器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:13:55.293

这就是我设法编译我的代码的方式：

```
g++ testing.cpp -lcppunit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-17T18:35:55.143

我在netbeans中编译。我在中添加了选项 -lcppunit

属性 > 链接器 > 附加选项

并让我的测试文件编译和运行。请记住不要在选项之间留任何空格，因为这会导致您的代码无法编译

# asp.net - 在不同页面导航时重用 signalR 中的相同连接

> ID：16077519
> 
> 赞同：9
> 
> 时间：2013-04-18T08:00:07.747
> 
> 标签：asp.net, asp.net-mvc, websocket, signalr

我有一个 MVC 项目，有多个页面。

我有一个长时间运行的过程，它会更新客户端的进度。但是，此更新仅发送给单个客户端，而不是广播给所有客户端。

```
Clients.Client(ConnectionId).sendMessage(msg); 
```

在我的 layout.cshtml 中，这是我连接到集线器的方式

```
 var serverHub = $.connection.notifier;
    window.hubReady = $.connection.hub.start(function () { }); 
```

问题是，当我导航到另一个页面时，我不再收到来自 signalr 的消息，因为连接 ID 已更改。

我应该如何解决这个问题，以便我的信号器集线器仍然可以将消息发送到单个客户端，而客户端从一个页面导航到另一个页面。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T23:57:12.980

您将需要创建用户到连接 ID 的服务器映射。请参阅：[SignalR 1.0 beta 连接工厂](https://stackoverflow.com/questions/14350158/signalr-1-0-beta-connection-factory/14350859#14350859)。

您将希望让您的用户在 OnDisconnected 事件之后持续存在，并且当他们使用不同的连接 Id 连接时，您可以继续向他们发送数据。

所以思考过程可能如下：

1.  页面加载，SignalR 连接被实例化
2.  连接完全启动后，调用 => TryCreateUser（返回用户，无论它是否存在或已创建）。
3.  长时间运行的过程开始
4.  客户端更改页面 -> SignalR 连接停止
5.  新页面加载，新 SignalR 连接被实例化
6.  连接完全启动后，查看您是否有 cookie、会话或某种类型的数据来代表您的身份 => TryCreateUser(userData)（返回您在最后一页创建的用户）。
7.  数据继续向用户输送。

**注意：**如果您采用身份验证方法，则必须在开始连接之前进行身份验证，并且该数据在 SignalR 连接的生命周期内不能更改，它只能在连接处于断开状态时创建/修改。

# javascript - 选择下拉项时填充文本区域

> ID：16077522
> 
> 赞同：0
> 
> 时间：2013-04-18T08:00:11.180
> 
> 标签：javascript, jquery, jsp, google-cloud-datastore

我在编码方面很新。让我直接来回答这个问题。我的jsp中有一个下拉列表，当页面加载时，它会填充来自数据存储（JDO）的实体类型。这就是我要的。当我从下拉列表中选择实体种类时，文本区域应填充该特定实体种类的列名。它可以在 javascript 或 jQuery 中。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:17:20.370

你正在寻找这样的东西吗？

```
<div>
    <textarea id="carPark"></textarea>
</div>
<div>
    <select id="carDealer">
        <option value="volvo">Volvo</option>
        <option value="saab">Saab</option>
        <option value="mercedes">Mercedes</option>
        <option value="audi">Audi</option>
    </select>
</div>

function putIt(e) {
    $("#carPark").val(e.target.value);
}

$("#carDealer").on("change", putIt); 
```

它在[jsfiddle 上供](http://jsfiddle.net/Xotic750/YEcye/)您使用

# wcf - Vs2012 上的 ADO.NET 实体框架 + WCF = 错误

> ID：16077524
> 
> 赞同：0
> 
> 时间：2013-04-18T08:00:16.807
> 
> 标签：wcf, entity-framework-5

首先，感谢您阅读我的问题。

我正在使用 VS 2012 使用 ADO.NET Entity Framework（我认为是最新版本）开发一个解决方案。一切正常，直到我将 WCF 服务作为业务层引入（这是学校的作业，我不能从业务层废弃 WCF）。

问题是当我从数据库请求数据时。当我有一个从数据库返回字符串的方法时，它工作得很好（因为它是一个原语）。但是当它返回一个 Entity 对象（例如 Account）时，一切都变得糟透了。

例外：（是的，它非常模糊）。

`An error occurred while receiving the HTTP response to http://localhost:8733/Services/AccountsManager. This could be due to the service endpoint binding not using the HTTP protocol. This could also be due to an HTTP request context being aborted by the server (possibly due to the service shutting down). See server logs for more details.`

我尝试了什么：我尝试修改 Entites.tt 文件以添加 [DataContract] [DataMember] 属性。这是因为在旧版本的 EF 中，它似乎是自己做的。但我不知道这是否有必要，因为它允许我编译并且不会抱怨它不可序列化。

这是它最初的样子：

```
namespace CommonLayer
{
using System;
using System.Collections.Generic;

 public partial class Account
{
    public Account()
    {
        this.Transactions = new HashSet<Transaction>();
        this.Transactions1 = new HashSet<Transaction>();
    }

    public System.Guid ID { get; set; }
    public int Type { get; set; }
    public string Name { get; set; }
    public int Currency { get; set; }
    public decimal Balance { get; set; }
    public System.DateTime DateOpened { get; set; }
    public Nullable<int> Duration { get; set; }
    public string UserName { get; set; }

    public virtual AccountType AccountType { get; set; }
    public virtual Currency Currency1 { get; set; }
    public virtual User User { get; set; }
    public virtual ICollection<Transaction> Transactions { get; set; }
    public virtual ICollection<Transaction> Transactions1 { get; set; }
}
} 
```

修改后的样子：

```
namespace CommonLayer
{
using System;
using System.Collections.Generic;
using System.Runtime.Serialization;
[DataContract] public partial class Account
{
    public Account()
    {
        this.Transactions = new HashSet<Transaction>();
        this.Transactions1 = new HashSet<Transaction>();
    }

    [DataMember] public System.Guid ID { get; set; }
    [DataMember] public int Type { get; set; }
    [DataMember] public string Name { get; set; }
    [DataMember] public int Currency { get; set; }
    [DataMember] public decimal Balance { get; set; }
    [DataMember] public System.DateTime DateOpened { get; set; }
    [DataMember] public Nullable<int> Duration { get; set; }
    [DataMember] public string UserName { get; set; }

    public virtual AccountType AccountType { get; set; }
    public virtual Currency Currency1 { get; set; }
    public virtual User User { get; set; }
    public virtual ICollection<Transaction> Transactions { get; set; }
    public virtual ICollection<Transaction> Transactions1 { get; set; }
}
} 
```

非常感谢任何指针。

我的 WCF 课程

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.ServiceModel;
using System.Text;
using System.Threading.Tasks;

namespace BusinessLayer
{

    [ServiceContract]
    interface IAccountsManager
    {
        [OperationContract]
        List<CommonLayer.Account> GetAccounts(String UserName);

        [OperationContract]
        String GetData();

        [OperationContract]
        CommonLayer.Account GetAccount(String UserName);
    }

    class AccountsManager: IAccountsManager, IDisposable
    {
        public List<CommonLayer.Account> GetAccounts(String UserName)
        {
            return DataLayer.AccountsRepository.Instance.GetAccountList(UserName).ToList();
        }

        public String GetData()
        {
            CommonLayer.Account acc  = this.GetAccounts("test").FirstOrDefault();
            return acc.DateOpened.ToString();
        }

        public CommonLayer.Account GetAccount(String UserName)
        {
            return this.GetAccounts(UserName).FirstOrDefault();
        }

        public void Dispose()
        {
            DataLayer.AccountsRepository.Reset();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T12:28:48.413

似乎当 EF 类具有导航属性（如`ICollection<Transaction> Transactions`在您的类中）时，它会在通过 WCF 传输时失败。

经过多次搜索后，除了将 EF 类映射到与 EF 类完全相同的等效 DTO 类之外，我找不到任何解决方案，除了 Navigation 属性和构造函数（即我已经剥离了所有虚拟属性（如 ICollection 的）和 ctor来自 EF 类，并从中创建了一个与我的 EF 类相同的新类加上 Dto 后缀（例如 CustomerDto）。

我使用**[AutoMapper](http://automapper.org/)**自动将 EF 对象映射到 Dto 等效对象。例如：

```
 var customer = getCustomer(cid);

   var customerDto = Mapper.Map<CustomerDto>(customer);

   return customerDto; 
```

我的 WCF 合同包括

```
[OperationContract]
CustomerDto getCustomerData(int cid); 
```

此外，我需要对 Mapper 进行一次初始化。我在 Global.asax 中完成了如下操作：

```
Mapper.CreateMap<Customer, CustomerDto>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T16:47:40.817

我所做的是更改了我的 Entities.Edmx 文件。首先，我删除了所有 (2) 个“.tt”文件。然后我将代码生成策略从无更改为默认。这似乎解决了我所有的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:24:06.840

您需要使用 DTO（数据传输对象）并将 EF 对象映射到 DTO。

因此服务可能会接受一个名为 MyDto 的对象，如下所示：

```
[DataContract]
public class MyDto {
    [DataMember]
    public int Id {get;set;}
} 
```

和一个带有方法的静态映射类

```
public static MyEntity Map(MyDto dto) {
    return new MyEntity { Id = dto.Id };
}

public static MyDto Map(MyEntity entity) {
    return new MyDto { Id = entity.Id };
} 
```

然后，您可以根据需要进行映射，以便服务可以使用 DTO，而实体框架可以使用实体。

# android - 纹理/图案识别/匹配 int Unity？

> ID：16077526
> 
> 赞同：1
> 
> 时间：2013-04-18T08:00:32.993
> 
> 标签：android, ios, unity3d

我打算开发一个游戏，用户用他/她的手指在屏幕上绘制一个形状。现在我已经有了一些纹理形式的预定义形状。我需要做的是检测用户用他/她的手指在屏幕上做出的形状。例如，用户在屏幕上画了一个箭头，然后与预定义的形状进行比较，我想知道他/她是否画了一个箭头。现在我需要建议/建议我应该采取的方式

1) 在屏幕上画一个形状？（可能与线渲染器、Trail Renderer 或？）

2）检测他/她画的形状？（任何统一或插件的解决方案）

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:13:21.970

如果您愿意为此付费，Asset Store 中的[FingerGestures](https://www.assetstore.unity3d.com/#/content/1044)包似乎有您需要的东西，以及可能派上用场的其他功能。个人没用过，感觉评价不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:09:38.870

鉴于您需要进行一些数字信号处理，特别是在计算机视觉领域，我完全推荐您使用[OpenCV4Android](https://www.google.com.cu/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC4QFjAA&url=http%3A%2F%2Fdocs.opencv.org%2Fdoc%2Ftutorials%2Fintroduction%2Fandroid_binary_package%2FO4A_SDK.html&ei=KKlvUc3HEMXStQbN9IGYDA&usg=AFQjCNGf-cNspA6D8CLLpeoy4HSTW_6_qw&bvm=bv.45368065,d.Yms)，它是一个主要用 C 语言编写的第三方库，具有广泛的平台支持，包括 Android。有了这个，您可以归档模式匹配，这基本上就是您所需要的。我没有使用过 Unity，但我确信 openCV 对于这种情况来说是一个强大的工具。祝你好运

# c - 父进程创建子进程并且父进程和子进程运行相同程序不同代码的程序

> ID：16077528
> 
> 赞同：4
> 
> 时间：2013-04-18T08:00:40.587
> 
> 标签：c, unix, process, fork

```
//same program different code
#include<stdio.h>
#include<unistd.h>
#include<stdlib.h>

int main()
{
    int pid;
    pid=fork();
    if(pid<0)
    {
        printf("\n Error ");
        exit(1);
    }
    else if(pid==0)
    {
        printf("\n Hello I am the child process ");
        printf("\n My pid is %d ",getpid());
        exit(0);
    }
    else
    {
        printf("\n Hello I am the parent process ");
        printf("\n My actual pid is %d \n ",getpid());
        exit(1);
    }

} 
```

我试过这个，我希望它是正确的。
但我对输出不满意。

输出是：

```
 Hello I am the parent process 
 My actual pid is 4287 
 ashu@ashu-VirtualWorld:~/Desktop/4thSemester/testprep$ 
 Hello I am the child process 
 My pid is 4288 
```

请帮助我，我无法理解它的输出，我希望子进程首先发生，然后是父进程。另外，当执行结束时，控制权转移到程序，所以要返回终端我必须使用 ctrl+c ，我希望在程序执行结束后控制权转移到终端。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T10:54:59.117

```
#include<stdio.h>
#include<unistd.h>
#include<stdlib.h>
#include<sys/wait.h>
int main()
{
    int status;
    int pid;
    pid=fork();
    if(pid<0)
    {
        printf("\n Error ");
        exit(1);
    }
    else if(pid==0)
    {
        printf("\n Hello I am the child process ");
        printf("\n My pid is %d ",getpid());
        exit(0);
    }
    else
    {
       wait(&status);
        printf("\n Hello I am the parent process ");
        printf("\n My actual pid is %d \n ",getpid());
        exit(1);
    }

} 
```

在这个程序中，if (pid == 0) 表示子进程，pid > 0 表示父进程，因此父进程和子进程同时运行访问相同的资源，因此出现竞争条件的问题。哪个是首先访问它首先执行的资源，另一个是稍后执行的。

等待函数避免竞争条件和当子执行完成时，直到父等待和执行父之后

默认 vfork 避免竞争条件

```
 pid=vfork();

Because the vfork use the parent wait for until the child complete. 
```

此外，如果您想获取父进程的进程 ID。使用 int ppid = getppid() 函数。

程序的输出是：

```
 Hello I am the child process 
     My pid is 7483 
     Hello I am the parent process 
     My actual pid is 7482 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-18T08:03:27.737

并行过程的问题在于它们不能很好地映射到“先发生”的想法。它们*并行*运行。

当然，您可以通过在打印输出之前延迟父母的代码来改变赔率。

完全不确定“控制权转移到程序”是什么意思；因为这两个进程在打印它们的消息后都会很快命中`exit()`，所以应该没有程序可以转移控制权。

请注意，您不需要使用`exit()`from `main()`，它应该以普通 old 结尾，`return`因为它的返回类型是`int`.

# ios - 如何在objective-c中使用来自localhost的json数据？

> ID：16077529
> 
> 赞同：1
> 
> 时间：2013-04-18T08:00:47.743
> 
> 标签：ios, objective-c, json

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    NSURL *site_url = [NSURL URLWithString:[NSString stringWithFormat:@"%@/json/data/post?sid=%@", SECURE, PASSCODE]];

    NSData *jsonData = [NSData dataWithContentsOfURL:site_url];
    NSError *error = nil;
    NSDictionary *dataDictionary = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:&error];

    self.items = dataDictionary;

} 
```

我正在尝试解析 json 数据。它适用于来自实时服务器的数据。但是，当我将链接更改为`http://localhost:8090`. 它停止工作。

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'data parameter is nil' 
```

我可以从网络浏览器的数据中访问它。有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:08:31.063

您在这里需要的是实现 NSURLConnection 并从中接收数据

看看这个

```
NSURL *site_url = [NSURL URLWithString:[NSString stringWithFormat:@"%@/json/data/post?sid=%@", SECURE, PASSCODE]];
NSURLRequest *req = [NSURLRequest requestWithURL:site_url];
NSURLConnection *con = [[NSURLConnection alloc] initWithRequest:req delegate:self];
[con start]; 
```

并从代表那里得到回应

这个[文件](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)可以帮助你很多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:15:51.317

它可以在模拟器上运行而不是在真实设备上运行吗？

开发应用程序时不应该使用 localhost，而是使用服务器的本地 IP。本地主机是调用服务器的机器。当您在模拟器上尝试并且您在同一台机器上拥有服务器时，它可以工作，因为它们是相同的。但是当你在真实设备上尝试时，localhost 是设备，并且设备没有安装服务器，所以它会失败。顺便说一句，要在真实设备上进行测试，它必须连接到同一个网络。

# javascript - Django模型选择字段提交

> ID：16077535
> 
> 赞同：3
> 
> 时间：2013-04-18T08:01:06.603
> 
> 标签：javascript, python, html, django, html-select

我有一个在模板中显示为下拉列表的表单。当用户选择一个选项时，将调用一个 javascript 函数并重新加载页面。我想使用 request.POST.get(...) 捕获所选选项的值，但我无法将提交设置为 POST。我发现了一些使用 ajax 的方法，但我不熟悉它。有没有更简单的方法呢？

主页.html：

```
<script>
    function refresh(){
        window.location.href = 'http://127.0.0.1:8000/home';
    }
</script>

<form>
    {{ days }}
</form> 
```

模型.py：

```
class Date(models.Model):
    day = models.CharField(max_length=200, default='')
    month = models.CharField(max_lenght=200, default='')
    def __unicode__(self):
        return self.day

class CronForm(forms.Form):
    days = forms.ModelChoiceField(queryset=Date.objects.all().order_by('alias'), widget=forms.Select(attrs={"onChange":'refresh()'})) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T08:11:42.403

提交变更表格

```
class CronForm(forms.Form):
    days = forms.ModelChoiceField(queryset=Date.objects.all().order_by('alias'), 
           widget=forms.Select(attrs={"onChange":'submit()'})) 
```

并将您的模板编辑为

```
<form method=post> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T08:13:28.230

[使用firebug](http://getfirebug.com)查找`id`下拉列表的。它应该与您使用的名称一样。然后将 jQuery事件绑定到它。`id_days``days``change`

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" >
    $(function(){
        $('#id_days').change(function(){
            $('#id_of_form').submit();
        });
    });
</script>

<form id="id_form" method="post" action="." name="form_name" >
    {{ days }}
</form> 
```

# icalendar - 在 iCalendar 中表达替代重复时间

> ID：16077541
> 
> 赞同：0
> 
> 时间：2013-04-18T08:01:22.137
> 
> 标签：icalendar, rrule, rfc5545

有没有办法在 iCalendar 中表达以下内容？（可能使用 RRULE？）

> 每天上午 9 点到下午 5 点之间，周日上午 10 点到下午 4 点之间除外。

我可以创建多个 RRULE 吗？哪些有优先权？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:11:30.093

iCalendar 没有在持续时间中间有洞的事件的概念。因此，即使不谈论重复事件，您也无法使用单个事件来创建像从上午 9 点到上午 10 点以及从下午 4 点到下午 5 点这样的事件

因此，您实际上需要创建 3 个事件：

```
DTSTART:2013xxxxT090000
DURATION:PT1H
RRULE:FREQ=DAILY

DTSTART:2013xxxxT100000
DURATION:PT6H
RRULE:FREQ=DAILY;BYDAY=MO,TU,WE,TH,FR,SA

DTSTART:2013xxxxT160000
DURATION:PT1H
RRULE:FREQ=DAILY 
```

至于有多个 RRULE，这在 RFC2445 中得到支持，但由于缺乏支持和复杂性，它在 RFC5545 中已被弃用（就像 EXRULE）。

# ios - 在uiview中加载xib但没有响应

> ID：16077543
> 
> 赞同：0
> 
> 时间：2013-04-18T08:01:25.873
> 
> 标签：ios, uiview, xib, uistoryboard

我创建了一个多标签页，点击更改视图。

一个选项卡包含一个订单，但我的故事板中已经有一个单独的订单，所以我尝试将该表单加载到我通过编码完成的订单选项卡视图中。

```
OrderViewController *we = [self.storyboard instantiateViewControllerWithIdentifier:@"OrderViewController"];

we.view.frame = CGRectMake(-8,10, 320, 500);
we.calc.frame = CGRectMake(0,1, 320, 45);

[order addSubview:we.view];
[self.view addSubview:order]; 
```

但是，当我单击订单上的任何按钮或项目时，它会发出警告……不明白为什么有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:38:05.020

```
[we retain]; 
```

因为，（如果我错了，请纠正我）VC 将在一段时间后被释放（自动释放）。

# objective-c - 使用 NSCoding 序列化对象图中更改的好方法？

> ID：16077546
> 
> 赞同：0
> 
> 时间：2013-04-18T08:01:32.763
> 
> 标签：objective-c, nscoding

我有一张支持`NSCoding`. 我有一个单独的类来处理序列化本身，即。它检测对象图中的变化`NSKeyedArchiver`并将其保存到文件中。

我对设计相当满意，但我不确定如何观察对象图中的变化。我想到的一个通用解决方案是`version`为每个对象添加一个属性，每次更改都会增加一个属性：

```
- (void) setFoo: (id) newFoo
{
    _foo = newFoo;
    self.version++;
} 
```

当图中的一个对象引用其他对象时，它会观察它们`version`（使用 KVO），如果它发生变化，则向上传播变化。序列化类然后观察`version`根节点的。

这可行，但管理所有 KVO 内容很麻烦并且容易出错。你能想出更好的解决方案吗？另一个限制是我希望对象尽可能少地了解序列化。他们应该知道如何序列化（通过实现`NSCoding`），但他们不应该关心更多。

这一定是序列化框架中的一个常见问题，对吧？

# configuration - 限制特定用户对站点公共页面的访问

> ID：16077552
> 
> 赞同：3
> 
> 时间：2013-04-18T08:01:48.323
> 
> 标签：configuration, liferay, liferay-6, administration

是否可以通过配置限制少数用户访问站点公共页面？

现在，默认情况下，liferay 中的任何人都可以访问任何站点的公共页面 [这就是它们被命名为公共页面的原因:-)]，无论`Open`是`Restricted`还是`Private`.

在我们的系统中，我们强制登录以访问公共页面，但是一旦登录，用户可以看到任何站点的公共页面，如果他有 URL 的话。

*为了使需求更加清晰：*

我在系统中有 3 个用户，`User01`, `User02`, `User03`. 我有 3 个站点—— `Site01`（开放）、`Site02`（受限）、`Site03`（私有）这些站点分别只有一个用户。

所有这 3 个用户都可以看到所有三个站点的公共页面。所以现在我想要的只是`User02`应该是一个例外，即`User02`不应该能够访问和的公共`Site01`页面`Site03`。

这可以通过配置实现吗？还是需要更改 liferay 代码（可能通过钩子）？

即使我们可以限制所有非该站点成员的用户对公共页面的访问也可以使用？

非常感谢任何想法或帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:52:18.923

以下是实现此目的的几个步骤：

> 1.  您可以从页面的管理权限选项卡中删除访客角色（或根据您的要求的所有角色）到指定页面（这里根据您的要求从公共页面）的查看权限。
>     
>     
> 2.  创建一个新角色（将允许查看权限）并从页面的管理权限分配此角色查看权限。
>     
>     
> 3.  现在将这些新创建的角色分配给您想要查看页面访问权限的用户

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T09:21:25.333

对于你的最后一个问题

> 即使我们可以限制所有非该站点成员的用户对公共页面的访问也可以使用？

这可以通过删除站点的每个公共页面的访客角色的查看权限来实现。

高温下，

谢谢，

# python - 如何为此文本构建正则表达式

> ID：16077556
> 
> 赞同：5
> 
> 时间：2013-04-18T08:02:24.867
> 
> 标签：python, regex

这是输入：

```
7\. Data 1 1\. STR1 STR2 3\. 12345 4\. 0876 9\. NO 2 1\. STR 2\. STRT STR 3\. 9909090 5\. YES 6\. NO 7\. YES 8\. NO 9\. YES 10\. 5000 XX 11\. 1000 ZŁ 12\. NO PRub. 1 1\. 1000 XX 2\. NO 3 1\. STRT 2\. STRT 3\. 63110300291 5\. YES 6\. NO 7\. NO 8\. NO 9\. YES 10\. 5000 XX 11\. 1000 ZŁ 12\. NO PRub. 1 1\. 1000 XX 2\. NO 4 1\. QWERET 2\. IOSTR9 3\. 76012509879 5\. YES 6\. NO 7\. NO 8\. NO 9\. YES 10\. 5000 XX 11\. 1000 XX 12\. NO PRub. 1 1\. 1000 XX 2\. NO 0 1. 
```

这是预期的输出：

```
[('1', '1\. STR1 STR2 3\. 12345 4\. 0876 9\. NO'),
('2', '1\. STR 2\. STRT STR 3\. 9909090 5\. YES 6\. NO 7\. YES 8\. NO 9\. YES 10\. 5000 XX 11\. 1000 ZŁ 12\. NO PRub. 1 1\. 1000 XX 2\. NO'),
('3', '1\. STRT 2\. STRT 3\. 63110300291 5\. YES 6\. NO 7\. NO 8\. NO 9\. YES 10\. 5000 XX 11\. 1000 ZŁ 12\. NO PRub. 1 1\. 1000 XX 2\. NO'),
('4', '1\. QWERET 2\. IOSTR9 3\. 76012509879 5\. YES 6\. NO 7\. NO 8\. NO 9\. YES 10\. 5000 XX 11\. 1000 XX 12\. NO PRub. 1 1\. 1000 XX 2\. NO')] 
```

我试过这个：

```
re.findall(r'(?=\s(\d+)\s(1\..*?)\s\d+\s1\.)', txt, re.DOTALL) 
```

但当然这不是正确的解决方案 - 正则表达式必须匹配`(\d+) 1.`但不是`PRub. 1 1.`.
我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T08:21:23.190

这怎么样：

```
In [1]: s='7\. Data 1 1\. STR1 STR2 3\. 12345 4\. 0876 9\. NO 2 1\. STR 2\. STRT STR 3\. 9909090 5\. YES 6\. NO 7\. YES 8\. NO 9\. YES 10\. 5000 XX 11\. 1000 ZŁ 12\. NO PRub. 1 1\. 1000 XX 2\. NO 3 1\. STRT 2\. STRT 3\. 63110300291 5\. YES 6\. NO 7\. NO 8\. NO 9\. YES 10\. 5000 XX 11\. 1000 ZŁ 12\. NO PRub. 1 1\. 1000 XX 2\. NO 4 1\. QWERET 2\. IOSTR9 3\. 76012509879 5\. YES 6\. NO 7\. NO 8\. NO 9\. YES 10\. 5000 XX 11\. 1000 XX 12\. NO PRub. 1 1\. 1000 XX 2\. NO 0 1.'

In [2]: import re

In [3]: re.findall('(?<=\s)\d.*?(?=\s\d\s\d[.](?=$|\s[A-Z]))',s)
Out[3]: 
['1 1\. STR1 STR2 3\. 12345 4\. 0876 9\. NO',
 '2 1\. STR 2\. STRT STR 3\. 9909090 5\. YES 6\. NO 7\. YES 8\. NO 9\. YES 10\. 5000 XX 11\. 1000 Z\xc5\x81 12\. NO PRub. 1 1\. 1000 XX 2\. NO',
 '3 1\. STRT 2\. STRT 3\. 63110300291 5\. YES 6\. NO 7\. NO 8\. NO 9\. YES 10\. 5000 XX 11\. 1000 Z\xc5\x81 12\. NO PRub. 1 1\. 1000 XX 2\. NO',
 '4 1\. QWERET 2\. IOSTR9 3\. 76012509879 5\. YES 6\. NO 7\. NO 8\. NO 9\. YES 10\. 5000 XX 11\. 1000 XX 12\. NO PRub. 1 1\. 1000 XX 2\. NO'] 
```

对于您的确切输出，我会执行以下操作：

```
In [4]: ns = re.findall('(?<=\s)\d.*?(?=\s\d\s\d[.](?=$|\s[A-Z]))',s)

In [5]: [tuple(f.split(' ',1)) for f in ns]
Out[5]: 
[('1', '1\. STR1 STR2 3\. 12345 4\. 0876 9\. NO'),
 ('2', '1\. STR 2\. STRT STR 3\. 9909090 5\. YES 6\. NO 7\. YES 8\. NO 9\. YES 10\. 5000 XX 11\. 1000 Z\xc5\x81 12\. NO PRub. 1 1\. 1000 XX 2\. NO'),
 ('3', '1\. STRT 2\. STRT 3\. 63110300291 5\. YES 6\. NO 7\. NO 8\. NO 9\. YES 10\. 5000 XX 11\. 1000 Z\xc5\x81 12\. NO PRub. 1 1\. 1000 XX 2\. NO'),
 ('4', '1\. QWERET 2\. IOSTR9 3\. 76012509879 5\. YES 6\. NO 7\. NO 8\. NO 9\. YES 10\. 5000 XX 11\. 1000 XX 12\. NO PRub. 1 1\. 1000 XX 2\. NO')] 
```

可能是更好的方法，但我的 python foo 不如我的正则表达式 foo。

**正则说明：**

```
(?<=\s) # Use positive look-behind to match a leading space but don't include it
\d      # match digit    
.*?     # Match everything up till the next record (lazy)
        # The following positive look-behinds is the key. It matches the start of
        # each new record i.e
        # 2 1\. S
        # 3 1\. S
        # 4 1\. Q
        # 0 1.$ 
        # look-arounds match but don't seek past.  
(?=\s\d\s\d[.](?=$|\s[A-Z]))
(?=     # positive look-ahead 1
\s      # space
\d      # digit
\s      # space
\d      # digit
[.]     # period
(?=     # postive look-ahead 2 
$       # end of string
|       # OR
\s[A-Z] # space followed by uppercase letter
)       # close look-ahead 1
)       # close look-ahead 2 
```

# c# - C# Regex - 接受字符串中的空格

> ID：16077560
> 
> 赞同：6
> 
> 时间：2013-04-18T08:02:41.750
> 
> 标签：c#, regex

我有一个应用程序需要对某些领域进行一些验证。其中一个是可以由 2 个单词组成的姓氏。在我的正则表达式中，我必须接受这些空格，所以我尝试了很多东西，但没有找到任何解决方案。

这是我的正则表达式：

```
@"^[a-zA-Zàéèêçñ\s][a-zA-Zàéèêçñ-\s]+$" 
```

通常用于空格，`\s`但它不起作用，我收到此错误消息：

```
parsing "^[a-zA-Zàéèêçñ\s][a-zA-Zàéèêçñ-\s]+$" - Cannot include class \s in character range. 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T08:09:08.913

`-`表示一个字符范围，就像您`A-Z`用来描述*A 和 Z 之间的任何字符*一样。您的正则表达式使用`ñ-\s`引擎尝试将其解释为*ñ 和 \s 之间的任何字符*- 然后注意到，这`\s`在那里没有多大意义，因为`\s`它本身只是任何空白字符的*缩写*。

这就是错误的来源。

为了摆脱这种情况，如果你想包含文字字符，你应该总是*把你的字符类`-`放在**末尾：***`-`

```
@"^[a-zA-Zàéèêçñ\s][a-zA-Zàéèêçñ\s-]+$" 
```

这样，引擎就知道`\s-`不是一个字符范围，而是两个字符`\s`并`-`分开。

另一种方法是转义`-`字符：

```
@"^[a-zA-Zàéèêçñ\s][a-zA-Zàéèêç\-\s]+$" 
```

因此，现在引擎`ñ\-\s`不再解释为字符范围，而是*任何字符`ñ`,`-`或`\s`*. 就个人而言，虽然我总是尽量避免逃避，因为恕我直言，它会造成混乱并且不必要地延长表达的长度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T08:04:51.110

您需要转义最后一个`-`字符 -`ñ-\s`解析为 range `a-z`：

```
@"^[a-zA-Zàéèêçñ\s][a-zA-Zàéèêçñ\-\s]+$" 
```

另请参阅正则表达式风暴：[`[a-\s]`](http://regexstorm.net/tester?p=%5ba-%5cs%5d&i=a)，[`[a\-\s]`](http://regexstorm.net/tester?p=%5ba%5c-%5cs%5d&i=a)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-28T15:01:19.613

[RegularExpression(@"^[a-zA-Z\s]+$", ErrorMessage = "只允许字母字符和空格。")]

这有效

# javascript - TypeScript 中的 setInterval 行为

> ID：16077565
> 
> 赞同：20
> 
> 时间：2013-04-18T08:02:49.563
> 
> 标签：javascript, typescript

我刚开始玩 TypeScript。我已经使用 Visual Studio 2012 Express for Web 创建了一个示例项目，该示例有一行代码，其行为我自己无法解释。

首先是 TypeScript 代码：

```
start() {
    this.timerToken = setInterval(() => this.span.innerHTML = new Date().toUTCString(), 500);
} 
```

所以这一行每 500 毫秒设置一次 timerToken 的值，并用当前的日期/时间更新一个 HTML 元素。

在 JavaScript 中，这将等同于：

```
Greeter.prototype.start = function () {
        this.timerToken = setInterval(this.span.innerHTML = new Date().toUTCString(), 500);
    }; 
```

所以我想知道 TypeScript 代码行中的 lambda 表达式并将其删除，但日期/时间字符串将不再更新。

这么简单的问题……为什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-18T08:35:44.387

我假设这`span`是与方法在同一类中的属性`start`...如果我在这方面错了，请纠正我。

因此，胖箭头语法在 TypeScript 中具有特殊的含义。

当您使用`() =>`TypeScript 时，它会保留词法范围……这意味着`this`表达式内部的含义与表达式外部的含义相同。您可以在编译后的 JavaScript 中看到它创建了一个名为的变量`_this`来执行此操作。

因此，使用胖箭头语法，`this.span`是类中名为 span 的属性。如果没有粗箭头语法，`this.span`则未定义。

您可以使用此基本测试通过调用`withFatArrow`or来查看差异，`withoutFatArrow`然后您会看到会发生什么。

```
class Test {
    public example = 'Test';
    private timer;

    withFatArrow() {
        this.timer = setTimeout(() => alert(this.example), 500);
    }

    withoutFatArrow() {
        this.timer = setTimeout(function() { alert(this.example) }, 500);
    }
}

var test = new Test();
//test.withFatArrow();
test.withoutFatArrow(); 
```

# asp.net - asp.net 开发服务器端口与 Web 应用程序端口不同

> ID：16077566
> 
> 赞同：-1
> 
> 时间：2013-04-18T08:02:54.627
> 
> 标签：asp.net, aspnet-development-server

当我在 上运行我的 asp.net Web 应用程序时`VS2008 SP1`，它使用端口启动 ASP.NET 开发服务器，`1257`但 Web 应用程序正试图在其上浏览`localhost:1559`。所以资源管理器无法浏览我的 Web 应用程序，因为 url 不正确。我必须在资源管理器的地址栏上手动更改 url 才能浏览我的应用程序。你可以猜到这有点烦人。
我该如何解决这个问题？*（1257 和 1559 只是示例。）*

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-18T13:25:43.387

如果有人需要解决方案，我会回答我自己的问题。
问题是关于`ESET antivirus program`我的。在 ESET 设置中，您需要通过“ `settings/advanced settings/Web access security/Web browsers`”。然后，您将看到 ESET 接受作为 Web 浏览器的进程列表。`C:\Program Files\Microsoft Visual Studio 8\Common7\IDE\devenv.exe`取消选中“ ”或“ ”的复选框`C:\Program Files\Microsoft Visual Studio 9\Common7\IDE\devenv.exe`。
然后 ESET 将停止扫描您的 asp.net 开发服务器，并且您的端口号将与打开浏览器页面 url 的端口号匹配。
您还可以阅读这篇文章：[http ://www.wahooga.com/2008/02/20/visual-studio-development-web-server-automatic-port-numbering-problem/](http://www.wahooga.com/2008/02/20/visual-studio-development-web-server-automatic-port-numbering-problem/)

# javascript - 传递对元素的引用而不分配 id

> ID：16077570
> 
> 赞同：0
> 
> 时间：2013-04-18T08:03:04.743
> 
> 标签：javascript, jquery

我希望几个元素使用相同的 onclick 处理程序，所以我有：

```
function close_div() {
    $(this).remove();
}

<div class="closeX" onclick="close_div()">The first div</div>
<div class="closeX" onclick="close_div()"The second div</div>
<div class="closeX" onclick="close_div()"The third div</div> 
```

因此，当您单击任何 div 时，它都会从 DOM 中删除。

上面代码的问题是 onclick 没有传递有用的 this 关键字，所以 close_div() 不能使用它。如果我给每个人`div.closeX`一个不同的**id**，我可以通过它`close_div(id)`并做类似 `$("#"+id).remove()`. 但似乎应该有一种方法可以自动传递对被单击元素的引用，而无需为元素分配 id 并传递它。我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T08:05:02.450

更好——不要使用内联处理程序。

```
$('.closeX').on('click', function(e){
  $(this).remove();
}); 
```

我可能猜测您正在动态创建这些元素，这就是您想要使用内联处理程序的原因 - 但我们仍然有更好的解决方案来分离行为和内容。
这叫委托。

基本上，如果您要动态添加这些元素，那么您在 DOM 中的某个地方有一个静态祖先——关键是要为其附加一个处理程序。

例如：

```
$('#ancestor-container').on('click', '.closeX', function(e){
  $(this).remove();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T08:05:05.930

删除内联事件处理并分配这样的东西，

```
$(".closeX").on("click", close_div); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:04:05.663

```
function close_div(el) {
    $(el).remove();
}

<div class="closeX" onclick="close_div(this)">The first div</div>
<div class="closeX" onclick="close_div(this)"The second div</div>
<div class="closeX" onclick="close_div(this)"The third div</div> 
```

# oracle - 根据列值计算总行数

> ID：16077573
> 
> 赞同：-1
> 
> 时间：2013-04-18T08:03:09.283
> 
> 标签：oracle

我有一个查询应该根据列值计算返回的总行数。例如：

![在此处输入图像描述](https://i.stack.imgur.com/IZqV3.png)

如您所见，M 字段应显示返回的总行数，应该为 5，因为 FT_LOT 都是相同的值。这是我到目前为止的查询：

```
SELECT DISTINCT
VBATCH_ID, MAXIM_PN, BAGNUMBER, FT_LOT
, m 
, level as n
FROM
(
SELECT
VBATCH_ID, MAXIM_PN, BAGNUMBER, FT_LOT, QTY, DC, PRINTDATE, WS_GREEN, WS_PNR, WS_PCN, MSL, BAKETIME, EXPTIME
, una
, dulo
, (dulo - una) + 1 AS m 
FROM
(
SELECT c.containername VBATCH_ID
,pb.productname MAXIM_PN
,bn.wipdatavalue BAGNUMBER
,ln.wipdatavalue FT_LOT 
,aw.wipdatavalue QTY
,DECODE(ln.wipdatavalue,la.attr_081,la.attr_083
,la.attr_085,la.attr_087
,la.attr_089,la.attr_091
,la.attr_093,la.attr_095
,la.attr_097,la.attr_099
,la.attr_101,la.attr_103
,la.attr_105,la.attr_107
,la.attr_109,la.attr_111
,la.attr_113,la.attr_116
,la.attr_117,la.attr_119

) DC

,TO_CHAR(SYSDATE,'MM/DD/YYYY HH:MI:SS PM') PRINTDATE 
,DECODE(UPPER(la.attr_158),'GREEN','HF',NULL) WS_GREEN 
,DECODE(la.attr_140,NULL,NULL,'PNR') WS_PNR 
,DECODE(la.Attr_080,NULL,NULL,'PCN') WS_PCN 
,p.attr_011 MSL
,P.attr_013 BAKETIME
,p.attr_014 EXPTIME
, CASE
WHEN INSTR(bn.wipdatavalue, '-') = 0 THEN
bn.wipdatavalue
ELSE
SUBSTR(bn.wipdatavalue, 1, INSTR(bn.wipdatavalue, '-')-1) 
END AS una
, CASE
WHEN INSTR(bn.wipdatavalue, '-') = 0 THEN
bn.wipdatavalue
ELSE
SUBSTR(bn.wipdatavalue, INSTR(bn.wipdatavalue, '-') + 1)
END AS dulo
FROM Container C
JOIN a_lotattributes la ON c.lotattributesid = la.lotattributesid
JOIN product p ON c.productid=p.productid
JOIN productbase pb ON p.productbaseid=pb.productbaseid
JOIN a_adhocwipdatarecord a ON a.objectrefid=c.containerid
JOIN a_adhocwipdatarecorddetails bn ON a.adhocwipdatarecordid=bn.adhocwipdatarecordid AND bn.wipdatanamename ='TR_BAG_NUMBER'
LEFT JOIN a_adhocwipdatarecorddetails ln ON a.adhocwipdatarecordid=ln.adhocwipdatarecordid AND ln.wipdatanamename ='TR_FT_LOT NUMBER'
LEFT JOIN a_adhocwipdatarecorddetails aw ON A.adhocwipdatarecordid=aw.adhocwipdatarecordid AND aw.wipdatanamename ='TR_FT LOT QTY'
WHERE ln.wipdatavalue = :ftlot AND bn.wipdatavalue LIKE :wip
)
) WHERE level LIKE :n
CONNECT BY LEVEL <= m
ORDER BY BAGNUMBER 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:38:45.727

实际上 GROUP BY 不是解决方案。再次查看您想要的输出后，我意识到您想要的是分析计数。

您发布的查询有点混乱，抱歉，但我不准备花时间在上面。这是您需要的结构：

```
 select vbatch_id, maxim_pn, bagnumber, ft_lot
        , count(*) over (partition by ft_lot) m
 from whatever ... 
```

[了解更多](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions001.htm#i81407)。

不确定为什么需要 DISTINCT。DISTINCT 几乎总是表示未能正确使用 WHERE 子句。

# javascript - 动态改变光标/设置 cur 文件

> ID：16077575
> 
> 赞同：0
> 
> 时间：2013-04-18T08:03:27.500
> 
> 标签：javascript, css, cursor

如何使用 JS 或 CSS 动态更改 div 上的光标样式？因为我有多种情况......我试过下面的代码：

```
 div.addEventListener("mouseover", function(evt) {
        if (tool == "BC"){
          div.style.cursor = "url(/icons/bc.cur)";
        }
        if (tool == "pan"){
          div.style.cursor = "url(/icons/pan.cur)";
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:18:24.377

假设您使用 html5 样板中的条件注释，您可以定义这种样式（请注意新浏览器的不同语法 - 请参阅[MDN 文档](https://developer.mozilla.org/en-US/docs/CSS/cursor/url?redirectlocale=en-US&redirectslug=CSS/Using_URL_values_for_the_cursor_property)以获取更多信息）：

```
div.bc { cursor : url(/icons/bc.cur), auto;  }
div.pan { cursor : url(/icons/pan.cur), auto; }

/* style for IE<9 */
.lt-ie9 div.bc { cursor : url(/icons/bc.cur); }
.lt-ie9 div.pan { cursor : url(/icons/pan.cur); } 
```

并且，为简单起见，假设您的 div 没有应用任何类，只需像这样更改您的 js 代码：

```
div.addEventListener("mouseover", function(evt) {
    this.className = tool.toLowerCase();
} 
```

* * *

这种方法将确保良好的可扩展性，因为如果您要列出另一个光标，则不需要进一步修改 javascript，只需添加几个新的 css 规则。此外，您将完全远离 javascript 的 css，因此您的 javascript 具有更好的可维护性。

# javascript - 如何在提交表单后重置它们的值。

> ID：16077577
> 
> 赞同：0
> 
> 时间：2013-04-18T08:03:29.707
> 
> 标签：javascript, html, forms, submit, reset

我有 form1 和一个提交按钮，如下所示：

```
<input type="submit" name="submit2" id="submit2" value="Insert" onclick="document.form1.reset();"/> 
```

我想在提交值后重置表单的值。上面的代码重置它们，然后提交（空）值。

我也试过：onclick="document.form1.submit();document.form1.reset();" 但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:09:33.980

将以下内容附加到表单的标签中：

```
onsubmit="this.submit(); this.reset(); return false;" 
```

# hibernate - 在 Hibernate 中使用 SQLQuery 更新查询

> ID：16077578
> 
> 赞同：-3
> 
> 时间：2013-04-18T08:03:34.027
> 
> 标签：hibernate

我必须这样做：假设：

```
int posterid=100;
int userid=5;

SQLQuery query=session.createSQLQuery("update poster set userid='"+userid+"' where posterid='"+posterid+"' ");
query.executeUpdate(); 
```

它不工作，如果我写：

```
SQLQuery query=session.createSQLQuery("update poster set userid=:userid where posterid=:posterid ");
query.setParameter("userid",userid);
query.setParameter("posterid",posterid);

query.executeUpdate(); 
```

也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:13:23.850

**session.beginTransaction();**

SQLQuery query=session.createSQLQuery("更新海报集 userid='"+userid+"' where posterid='"+posterid+"' ");
查询.executeUpdate();

**session.getTransaction().commit();**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:09:15.123

你如何检索会话对象？您必须确保您的更新查询在未标记为只读的事务中运行。

您有不同的方法来执行此操作，具体取决于您的执行上下文。

尝试NobodyElse 方法或`@Transactional`为您的方法添加注释

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T06:50:40.207

我已经纠正了这个问题。现在它工作正常。

有提交事务的问题。

# php - symfony 认证后重定向用户

> ID：16077588
> 
> 赞同：1
> 
> 时间：2013-04-18T08:03:59.930
> 
> 标签：php, symfony

我有两个包 userBundle 和 xxxBundle。我希望在对用户包中的用户进行身份验证后将其重定向到 xxxBundle。但是，根据角色（ROLE_ADMIN 和 ROLE_USER），我会将他重定向到两个不同的路由（route1、route2）。

我将此控制器添加到我的 userBundle

```
class SecurityController extends Controller
{
  public function loginAction()
  {
    if ($this->get('security.context')->isGranted('ROLE_ADMIN')) {
      return $this->redirect($this->generateUrl('route1'));

    }
if ($this->get('security.context')->isGranted('ROLE_USER')) {
      return $this->redirect($this->generateUrl('route2'));

    }

    $request = $this->getRequest();
    $session = $request->getSession();

    // On vérifie s'il y a des erreurs d'une précédent soumission du formulaire
    if ($request->attributes->has(SecurityContext::AUTHENTICATION_ERROR)) {
      $error = $request->attributes->get(SecurityContext::AUTHENTICATION_ERROR);
    } else {
      $error = $session->get(SecurityContext::AUTHENTICATION_ERROR);
      $session->remove(SecurityContext::AUTHENTICATION_ERROR);
    }

    return $this->render('UserBundle:Security:login.html.twig', array(
      // Valeur du précédent nom d'utilisateur rentré par l'internaute
      'last_username' => $session->get(SecurityContext::LAST_USERNAME),
      'error'         => $error,
    ));
  } 
```

但是，这并没有给出适当的结果：对于正确的用户名和密码，用户被重定向到欢迎 symfony 页面。有人对此有解释吗？

我在 symfony 文档中发现，我可以使用隐藏字段控制登录表单的重定向，如下所示：

```
{# src/Acme/SecurityBundle/Resources/views/Security/login.html.twig #}
{% if error %}
    <div>{{ error.message }}</div>
{% endif %}

<form action="{{ path('login_check') }}" method="post">
    <label for="username">Username:</label>
    <input type="text" id="username" name="_username" value="{{ last_username }}" />

    <label for="password">Password:</label>
    <input type="password" id="password" name="_password" />

    <input type="hidden" name="_target_path" value="account" />

    <input type="submit" name="login" />
</form> 
```

问题：我如何参数化路线以负责用户和管理员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-25T15:58:49.037

使用`_target_path`输入字段并将经过身份验证的用户引导到带有您的控制器的路由。在控制器内部，您检查用户的角色并基于此转发到另一个控制器。

# spring - Spring JNDI 配置

> ID：16077594
> 
> 赞同：2
> 
> 时间：2013-04-18T08:04:07.930
> 
> 标签：spring, transactions, datasource, jndi, autocommit

我们正在使用 Spring 为我们的数据访问需求进行 JNDI 查找。我们正在调用多个存储过程（在 Sybase 中）。我想要一种在调用这些存储过程时控制事务的自动提交属性的方法。我能够使用 BasicDataSource（属性名称 =“defaultAutoCommit”）来实现它。
但是当我们转向进行 JNDI 查找（来自 Weblogic）时，我陷入了困境。

```
<jee:jndi-lookup jndi-name="WL_data_source"  id="dataSource" />

<bean id="procedureHandlerBean" class="myclass">
    <property name="procDataSource" ref="dataSource"/>
</bean> 
```

经过几天的研究，在我看来，我可以使用 JtaTransactionManager。但是，我不确定是否可以使用事务管理器在每个过程调用的基础上配置自动提交（由于不同过程的不同链式/非链式模式要求）。有没有一种干净的方法来实现这一目标？谢谢

# linux - 如何唤醒内核中的用户模式睡眠进程？

> ID：16077596
> 
> 赞同：0
> 
> 时间：2013-04-18T08:04:09.793
> 
> 标签：linux, linux-kernel

我想唤醒 kernel 中的用户模式进程。通过在用户模式下调用 sleep() 来阻止该进程。我在 kernel 中调用了函数 wake_up_process() ，但是在 wake_up_process() 调用之后进程没有唤醒。我不知道为什么 。有谁知道如何唤醒内核中的用户模式睡眠进程？谢谢你 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:42:44.223

如果进程调用`sleep()`了 ，它将在时间到来时或收到信号时唤醒。`wake_up_process`只会让内核测试时间是否到了，然后再次进入睡眠状态。

所以发出信号。

# perl - 更改符号链接

> ID：16077597
> 
> 赞同：0
> 
> 时间：2013-04-18T08:04:11.550
> 
> 标签：perl, symlink

我需要更改给定目录中的所有符号链接以使用最短的相对路径。

示例：更改

```
kat/../kat/link 
```

或者

```
usr/sth/sth/kat/link 
```

进入

```
kat/link 
```

如何使用 Perl 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:25:23.187

`abs_path`您可以通过使用然后删除当前目录以使其相对来获得简化的路径：

```
use warnings;
use strict;
use Cwd qw/getcwd abs_path/;

my $silly_path = 'foo/../foo/../foo/../foo';

my $simplified = abs_path($silly_path);
my $cwd = getcwd();

print "Canonical path: $simplified\n";
print "Current directory: $cwd\n";

$simplified =~ s|^\Q$cwd/||;    #Make relative if within current directory.

print "Simplified path: $simplified\n"; 
```

这假定链接在 Perl 的当前工作目录中。如果需要，您可以将其替换为另一个目录。它将导致当前目录中的链接的相对路径，或者指向当前目录之外的东西的简化绝对路径。

您可以使用[glob](http://perldoc.perl.org/functions/glob.html)获取目录中的所有文件，然后使用`-l $file` [文件测试运算符](http://perldoc.perl.org/functions/-X.html)测试是否`$file`是符号链接。

# c# - C# 使用线程关闭程序/表单

> ID：16077600
> 
> 赞同：3
> 
> 时间：2013-04-18T08:04:23.187
> 
> 标签：c#, multithreading, forms

好的，所以我有一个带有几个类的 C# 表单。在其中一个类中，我正在运行一个线程来检查外部程序是否正在运行。当外部程序未运行时，我希望我的程序关闭。

我是个新手，所以对我来说显而易见的答案是使用 form.Close()。但我不确定是否可以从子类甚至不同的线程访问此函数！

所以我的问题是：（如何）是否可以从其他类中的不同线程关闭表单？更重要的是最佳实践吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:09:38.417

您可以使用[`Control.InvokeRequired`](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.invokerequired.aspx)and[`Control.BeginInvoke()`](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.begininvoke.aspx)来调用 UI 线程上的方法。

例如（此方法必须在表单类本身内）：

```
public void CloseForm()
{
    if (this.InvokeRequired)
    {
        this.BeginInvoke(new Action(this.Close));
    }
    else
    {
        this.Close();
    }
} 
```

从另一个线程调用是安全的。

# java - 对象序列化/反序列化和 FileInputStream.available()

> ID：16077605
> 
> 赞同：0
> 
> 时间：2013-04-18T08:04:44.803
> 
> 标签：java, file, object, serialization

我正在想办法解决使用无限循环读取对象的整个坏习惯。我的算法涉及迭代检查

`if (FileInputStream("myFile.ser").available() != 0)`然后反序列化`next`对象。否则，我会关闭文件。

我想知道这是否是解决此问题的正确方法。

我已经阅读了这个问题的答案：[FileInputStream.available 可以愚弄我吗？](https://stackoverflow.com/questions/2788869/may-the-fileinputstream-available-foolish-me)并且不知道是否为空，它们是否意味着读取指针位于文件末尾。

换句话说，**我可以相信** `FileInputStream.available()` **检查还有多少数据可用于从文件中读取吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T20:18:04.357

不，你不应该使用`InputStream.available()`任何东西。该方法的定义（和实现）过于松散，没有任何意义。

为什么无限循环是“坏习惯”？

# database - 当我们可以通过主键唯一标识一个元组时，为什么需要超级键？

> ID：16077607
> 
> 赞同：3
> 
> 时间：2013-04-18T08:04:49.953
> 
> 标签：database, database-design, relational-database

维基百科中超键和主键的定义

> 超级键是表中的一组属性，其值可用于唯一标识一个元组。

和

> 主键必须包含不能被任何其他行复制的特征。主键可以由单个属性或多个属性组合组成。

我浏览了许多书籍并在互联网上冲浪，但我在其中发现了什么是主键和什么是超级键。

但我想知道的是，当我们可以通过 primarykey 唯一标识一个元组时，为什么需要 superkey ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T01:00:40.417

超级键是为了概念完整性而定义的。出于参考目的，您永远不需要超级键。对主键的引用就可以了。

当您分析数据体以发现其中的所有功能依赖关系时，超级键的概念可能很有用。

一旦你发现了一个密钥，下一个问题就是它是否是一个超级密钥。如果是，则将注意力转向包含在超键中的候选键。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T12:36:49.477

让我们首先定义这些术语的含义：

*   “**超级键”**是任何一组属性，当它们组合在一起时，可以唯一地标识表中的行。
*   一个最小的^(1 个)超级键称为**"candidate key"**，或者只是**"key"**。
*   同一张表中的所有键在逻辑上是等价的，但出于[历史和实际原因](https://stackoverflow.com/a/9798682/533120)，我们选择其中一个并将其称为**“主键”**，而其余键是**“备用”**键。

因此，每个主键都是键，但不是每个键都是主键。每个键都是超键，但不是每个超键都是键。

在数据库中物理强制执行键的约束是：PRIMARY KEY 约束（用于主键）和 UNIQUE 约束（用于备用键）。不应在所有超级键上创建这些约束，而应仅在键上创建这些约束。

根据数据的性质，在同一个表中有多个键并不罕见。例如，一个 USER 表可能具有唯一的 USER_ID*和*唯一的 USER_NAME。由于它们本身都需要是唯一的，因此您必须创建^(2 个)这两个密钥，即使只需要其中一个来进行识别。

* * *

*¹也就是说，如果从其中删除任何属性，则超级键将不再是唯一的（因此，成为超级键）。*

*²即创建PRIMARY KEY 或UNIQUE 约束。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T20:47:17.050

主键*是*超键。只有一个这样的键约束和只有一种识别元组的方法并不一定足够。

首先，关系模型的多功能性很大程度上源于它不*预先*确定如何可以或应该如何访问表中的数据。用户或应用程序可以根据当时可能需要或方便的任何属性集自由查询表。没有义务使用“主”键，这可能与某些查询相关，也可能不相关。

其次，唯一性约束（通常在候选键上）是一种数据完整性特征。他们保证数据不会在关键属性中重复。这种约束通常对不止一组属性有用，在这些属性中，业务规则规定事物应该是唯一的。一件事的唯一性显然不能保证另一件事的唯一性。

第三，查询优化器可以利用任何和所有键作为通过查询重写来优化数据访问的一种方式。从优化器的角度来看，它必须在表中使用的键越多越好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-18T12:08:30.970

*   一个词`key`通常是 a 的缩写`candidate key`。
*   `Superkey`表示键的超集（键属性等）。
*   不可约`superkey`称为 a `candidate key`。（不可约意味着如果你删除一个属性，它就不再是键了）；通常，给定关系（实际上是关系变量）不止一个`candidate key`。
*   `candidate key`设计师选择（出于某种原因）更喜欢的一种称为`primary key`.

这是在逻辑层面上，键是为关系变量定义的，即所谓的 relvars。

在物理实现中：

*   Relvar 映射到一个表。
*   主键到表的主键。
*   其他候选键（PK 除外）映射到备用键（唯一非空）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T08:19:50.603

我认为超级键只是关系代数抽象的一部分-您的主键（可能）是最小的超级键，但您可能有其他超级键，而您只有一个主键。

# android - 如何为 Android 应用程序制作图标和图像？

> ID：16077609
> 
> 赞同：0
> 
> 时间：2013-04-18T07:45:56.240
> 
> 标签：android, image, icons, screen-resolution

我认为这对 iPhone 应用程序来说可能不是问题，因为屏幕尺寸是一样的。

但是android有很多不同屏幕尺寸的设备。图像如何适合不同的屏幕尺寸？

我的意思是，该应用程序是否必须为不同宽度和高度的多个版本存储相同的图标，以便为不同屏幕尺寸的智能手机安装。

或者，（我不这么认为）图像和图标在手机上按比例缩放以适合在手机上查看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:04:46.650

[这在Android 开发者图标设计指南](http://developer.android.com/guide/practices/ui_guidelines/icon_design.html)中有非常详尽的记录。

如果可用，不同密度的设备会从不同的文件夹加载其资产。

```
res/...
    drawable-ldpi/...
        finished_asset.png
    drawable-mdpi/...
        finished_asset.png
    drawable-hdpi/...
        finished_asset.png
    drawable-xhdpi/...
        finished_asset.png 
```

您应该`mdpi`用作基线。

```
ldpi = 120 dpi (Low density screen)
mdpi = 160 dpi (Medium density screen)
hdpi = 240 dpi (High density screen)
xhdpi = 320 dpi (Extra-high density screen)

                     ldpi            mdpi            hdpi            xhdpi
Launcher Icon Size   36 x 36 px      48 x 48 px      72 x 72 px      96 x 96 px 
```

# scala - 在 Scala 中处理 Option 元素的规范方法

> ID：16077615
> 
> 赞同：1
> 
> 时间：2013-04-18T08:05:14.137
> 
> 标签：scala, tags, option, maybe

例如，我想将一个函数`f: (Int,Int) => Int`应用于 type 的两个元素`Option[Int]`。我的想法类似于 (a,b).zipped.map(f)，但这会产生一个列表，我想得到一个新的 Option[Int] 作为结果。

```
scala> def f(a:Int,b:Int) = a*b
f: (a: Int, b: Int)Int

scala> val x = Some(42)
x: Some[Int] = Some(42)

scala> val y:Option[Int] = None
y: Option[Int] = None

scala> (x,y).zipped.map(f)//I want None as a result here
res7: Iterable[Int] = List() 
```

如果没有显式分支，如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T08:08:44.180

就像 scala 中的许多其他操作一样，这可以通过理解来完成：

```
def f(a:Int,b:Int) = a*b
for (x <- maybeX; y <- maybeY) yield f(x, y) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:23:23.073

与这类问题的情况一样，scalaz 有一些帮助：

```
scala> import scalaz._
import scalaz._

scala> import Scalaz._
import Scalaz._

scala> def f(a:Int,b:Int) = a*b
f: (a: Int, b: Int)Int

scala> val x = Some(42)
x: Some[Int] = Some(42)

scala> val y:Option[Int] = None
y: Option[Int] = None

scala> ^(x,y)(f)
res0: Option[Int] = None

scala> val x = 42.some
x: Option[Int] = Some(42)

scala> (x |@| y)(f)
res3: Option[Int] = None 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:18:12.047

使用 om-nom-nom 的想法，我可以做这样的事情：

```
scala> def f(a:Int,b:Int) = a*b
f: (a: Int, b: Int)Int

scala> def lifted(f: (Int,Int) => Int) = (a:Option[Int],b:Option[Int]) => for(x<-a;y<-b) yield f(x,y)
lifted: (f: (Int, Int) => Int)(Option[Int], Option[Int]) => Option[Int]

scala> def liftedF = lifted(f)
liftedF: (Option[Int], Option[Int]) => Option[Int]

scala> val x = Some(42)
x: Some[Int] = Some(42)

scala> val y:Option[Int] = None
y: Option[Int] = None

scala> liftedF(x,x)
res0: Option[Int] = Some(1764)

scala> liftedF(x,y)
res2: Option[Int] = None 
```

我们甚至可以概括这一点……请遮住你的眼睛：

```
 def lift2[A, B, C](f: (A, B) => C): (Option[A], Option[B]) => Option[C] = (a: Option[A], b: Option[B]) =>
    for (x <- a; y <- b) yield f(x, y) 
```

# java - Java 对 Google Cloud Storage 的版本控制支持？

> ID：16077618
> 
> 赞同：2
> 
> 时间：2013-04-18T08:05:28.490
> 
> 标签：java, google-app-engine, version, google-cloud-storage

以前我问过一个关于使用 Google 云存储在 GAE 之上构建文档管理系统的问题[使用 Google Cloud Storage](https://stackoverflow.com/questions/16057601/when-to-use-google-cloud-storage-vs-google-drive)的文档管理系统。我想我得到了适当的答案。这个问题只是相同的延伸。所以我的问题是：我可以通过我的 java 代码来处理版本控制，就像在这个链接 (developers.google.com/storage/docs/object-versioning) 中提到的那样，比如列出对象的所有版本、检索对象的特定版本等。

由于我找到了用于在 Google 云存储上列出、删除对象和执行多项操作的列表 API，但我可以通过 Java 提供的任何 API 处理版本吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:12:17.830

正如 Google Cloud Storage 文档所述（[https://developers.google.com/storage/docs/developer-guide](https://developers.google.com/storage/docs/developer-guide)），存储的对象是不可变的。

即您只能在存储和存储新对象后删除对象，即使名称相同。

因此，要进行版本控制，您可以在伪文件夹中组织数据。比如：`bucket/file-name/version-1; data/file-name/version-2`等等。然后你需要添加一些 BL 来处理这个版本（需要时访问最新的版本，删除过时的等）。然而，在文档管理系统中，考虑事务、冲突等是很好的。因此，您可能希望在 DB 中管理版本（在 GAE 上？），并将版本内容作为文件存储在云中（即由文件内容哈希命名）。

# php - 从 foreach 中的数组中取消设置元素

> ID：16077620
> 
> 赞同：0
> 
> 时间：2013-04-18T08:05:32.387
> 
> 标签：php, foreach, unset

我目前正在研究一个通用表单创建类，昨天遇到了一个问题。我做了一个片段来重现这个问题。

本质上，我想在绘制整个组之后删除从原始元素数组中分组的元素，并且我在循环遍历元素数组时这样做。

代码片段应该涵盖问题，我在这里遗漏了什么吗？据我所知，在 foreach 中删除元素是完全安全和合法的，因为 foreach 在内部只使用了可以在循环期间修改的副本。

```
$ids = array('a' => array(), 'b' => array(), 'c' => array());
$groups['g1'] = array('a', 'c');
foreach($ids as $id => $element) {

    //var_dump($ids);
    $g_id = '';

    // search the id in all groups
    foreach($groups as $group_id => $group) {
        if(in_array($id, $group)) {
            $g_id = $group_id;
            break;
        }
    }

    // element is part of a group
    if($g_id !== '') {

        //echo $g_id;

        // element a and c gets unset within loop and should not be in $ids anymore
        foreach($groups[$g_id] as $field_id) {
            unset($ids[$field_id]);

            echo $field_id;
        }
        unset($groups[$g_id]);
    } else {
        if($id === 'a' || $id === 'c')
            echo $id;   
    }
} 
```

元素“c”在 foreach(groups ..) 循环中未设置，但随后再次在 else 分支中输出。此外，当我在开始时使用 var_dump($fields) 时，我总是在里面得到“a”、“b”和“c”。我正在使用 PHP 5.4.7。

提前致谢

编辑：我在示例代码中犯了一个错误，现在更新了。所有关于使用错误索引（本来应该是 0,1 等）的评论当然都是正确的。使用 var_dump 时的值现在未设置，但我仍然使用 'c' 进入 else 一次。

EDIT2：我没有完成原始代码，但在阅读了评论后，我目前对上面发布的代码片段提出了以下解决方案：

```
$ids=array("a"=>array(),"b"=>array(),"c"=>array(),"d"=>array(),"e"=>array());
$groups=array(array("a"),array("c", "e"));
array_walk($groups,function($v,$i)use(&$ids){

    $in_both = array_intersect(array_keys($ids),$v);
    //var_dump($in_both);
    foreach($in_both as $b) {
        unset($ids[$b]);
    }
});
print_r($ids); 
```

或者

```
$ids=array("a"=>array(),"b"=>array(),"c"=>array(),"d"=>array(),"e"=>array());
$groups=array(array("a"),array("c"));
array_walk($ids,function($v,$i)use(&$ids, $groups){
    $in_both = array();
    foreach($groups as $g) {
        if(in_array($i,$g)) {
            $in_both = array_intersect(array_keys($ids),$g);
        }
    }

    foreach($in_both as $b) {
        unset($ids[$b]);
    }
});
print_r($ids); 
```

在这种情况下，使用 foreach 对我不起作用，因为我需要在循环遍历它时更改 $ids 数组。

在最基本的情况下，代码如下：

```
$ids = array('a', 'b');

while(count($ids)) {
    array_pop($ids);
    echo 'pop';
}

echo 'empty'; 
```

尽管 foreach 可以更改数组中的原始值，但它不会更改用于迭代的数组副本，如 nl-x 已经说明的那样。感谢 Passerby 提出使用 array_walk 的想法。

EDIT3：更新的代码再次被剪断。尽管第二个剪断的行为也未定义。在迭代数组时从数组中删除元素似乎是个坏主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:34:21.680

花了一些时间阅读你的代码，我**猜**你的程序是：

*   对于 中的每个元素`$ids`，检查它是否存在于中的某个子数组中`$groups`；
*   如果存在，则删除`$ids`该子数组中也存在的所有内容。

按照上面的逻辑，我想出了这个：

```
$ids=array("a","b","c","d","e");
$groups=array(array("a","c"),array("c","e"));
array_walk($groups,function($v,$i)use(&$ids){
    $ids=array_diff($ids,$v);
});
print_r($ids);//debug 
```

[现场演示](http://3v4l.org/kTmOb#v530)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:22:09.917

克里斯，如果我理解正确，您不希望在 else 分支中输出“C”吗？

但是应该输出。你的逻辑是：

*   你做 foreach ids 并从 id 'a' 开始。
*   然后您从 ids 中清除 ids a 和 c并删除包含“a”**的组 g1 。**在此步骤中，将输出已删除的 id，即 a 和 c。（从 ids 中清除 a 和 c 不会影响`foreach($ids as $id)`foreach 将继续使用**未触及的副本**，即使在 ids 数组已被清除后也是如此。）
*   然后你做 id 'b'：在任何组中都找不到它。（其实反正现在已经没有群了）
*   所以对于 'b' 你进入 else 分支。但是 else 分支中的 if() 阻止了输出
*   然后你做 id 'c'，在任何组中也找不到，因为你**已经删除了组 g1**！没有组了，记得吗？
*   所以对于 'c' 你也进入 else 分支。这次 else 分支中的 if() 允许输出！输出只是 c

所以总输出确实是acc。

*很高兴知道，即使在其元素被清除后，foreach() 仍会继续保留未触及的副本，这是特定的 PHP 事物。其他语言不一定做同样的事情。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T08:27:30.697

`$ids[$field_id]`不存在，您使用的是值而不是键。

您应该使用正确的键简单地取消设置：

```
if (in_array($field_id, $ids))
    unset($ids[array_search($field_id, $ids)]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T08:28:18.823

我现在正在仔细检查。但我认为用 foreach 取消设置数组~~并不是~~很安全。

我通常会做的是进行一次 foreach，并从最高索引开始，并在此过程中降低索引。`for($i = count($arr)-1; $i >= 0; $i--) { unset($array[$i]); }`

我会在几分钟内编辑这篇文章。

**编辑：**我很困惑。$i++ 的 for 确实是罪魁祸首。**foreach 是安全**的（在 php 中！不是在所有语言中）

```
<?php

$arr = Array(1,2,3,4,5,6,7,8,9,10);
foreach ($arr as $key=>$val)
    unset($arr[$key]);
echo implode(',',$arr); // returns nothing

$arr = Array(1,2,3,4,5,6,7,8,9,10);
for ($i=0; $i<count($arr); $i++)
    unset($arr[$i]);
echo implode(',',$arr); // returns 6,7,8,9,10

$arr = Array(1,2,3,4,5,6,7,8,9,10);
for ($i=count($arr)-1; $i>=0; $i--)
    unset($arr[$i]);
echo implode(',',$arr); // returns nothing

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T08:11:58.570

如果你想从数组中删除元素，你不应该用 '拼接'它`array_splice`吗？

来自 PHP 手册： http: [//php.net/manual/en/function.array-splice.php](http://php.net/manual/en/function.array-splice.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T08:16:35.603

由于使用了数组的副本，因此您的 foreach 不会进行任何更改。您需要使用按引用传递才能使其正常工作。下面提到了一种方法

```
 while(list($key,$value) = each($array)){
   if(your reason to unset)
       unset($array[$key]);
} 
```

这将从数组中删除元素。

# spring - web项目依赖pojos，web部署

> ID：16077621
> 
> 赞同：1
> 
> 时间：2013-04-18T08:05:37.747
> 
> 标签：spring, maven-2

我有 3 个 maven 项目：
1 - 普通 pojos 项目
2 - web 项目
3 - java 客户端项目

web 和 java 项目使用来自 common 项目的相同 pojo，依赖于 1 个项目

我添加到 web 构建路径 common pojos 项目，
但是当我将 web 项目部署到服务器时，没有 pojo 类异常......

我的问题是如何配置它以使我的 pojos 类与所有 web 项目一起部署？
（这将是太棒了，如果你有一些在线示例）
Tnx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:18:55.950

如果您所有的 3 个项目都是 maven 项目并且依赖项设置正确，那么 maven 会自动将所有依赖项打包到战争中。

commons pojos 是一个 jar 项目 web 项目是一个 war 项目，它依赖于 commons pojos 项目。除非没有**提供**依赖**范围**，否则jar 将被打包在 war 中。

 **您可以通过打开 war 文件来验证是否存在 commons pojos jar 以及该 jar 是否具有所需的类。**

# c - 结构内的字段采用随机值

> ID：16077624
> 
> 赞同：1
> 
> 时间：2013-04-18T08:05:42.090
> 
> 标签：c, structure

我是 C 新手，我正在尝试使用结构和一些将更改结构的 int** 字段的方法来定义矩阵。矩阵应该是动态分配的，并且可以在它可以拥有的行数中调整大小。当我运行下面的程序并在 main 中打印出矩阵的值时，矩阵只有随机值，而不是插入到 genMatrix() 和 addRow() 中的值。我究竟做错了什么？非常感谢任何帮助。

我这样定义结构：

```
typedef struct matrix {
    int** matrix;
    int rows;
    int cols;
    int capacity;
} matrix; 
```

然后有以下方法应该改变结构的字段：

```
matrix* genMatrix() {
    matrix* matrix = malloc(sizeof(matrix));

    initMatrix(matrix, 100, 3, 200);

    for (int i = 0; i < 10; i++) {
        for (int j = 0; j < 10; j++) {
            int row[] = {i+j, i*j, i-j};            
            addRow(matrix, row);
        }
    }

    return matrix;
}   

void initMatrix(matrix* matrix, int rows, int cols, int capacity) {
    matrix->matrix = malloc(rows * sizeof(int*));
    for (int i = 0; i < rows; i++) {
        matrix->matrix[i] = malloc(cols * sizeof(int));
    }
    matrix->cols = cols;
    matrix->rows = rows;
    matrix->capacity = capacity;
}

void addRow(matrix* matrix, int* row) {
    if (matrix->rows == matrix->capacity) {
        matrix->capacity *= 2;
        matrix->matrix = realloc(matrix->matrix, matrix->capacity * sizeof(int*));
    }

    matrix->matrix[matrix->rows++] = row;
} 
```

在 main 中，我调用函数 genMatrix，然后将结果打印出来，但会得到随机值，如 32691、-1240670624 等。

```
int main() {
    matrix* matrix = genMatrix();   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:08:54.090

当您尝试在此处添加一行时：

```
 int row[] = {i+j, i*j, i-j};            
        addRow(matrix, row); 
```

您添加的数据是一个临时的局部变量。在下一次循环迭代中，它将被覆盖，然后当循环退出时，它将超出范围。

您需要为新的行数据*分配*一些内存，例如使用`malloc`：

```
 int * row = malloc(3 * sizeof(int));
        row[0] = i+j;       
        row[1] = i*j;       
        row[2] = i-j;       
        addRow(matrix, row); 
```

`free`完成矩阵后，不要忘记所有这些行分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:18:53.507

row 是一个局部变量。一旦循环进行新的迭代，数据就会被覆盖，并且循环退出后，数据就会超出范围。所以使用 int * row = malloc(NumOfRows * sizeof(int)); 然后是行成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:11:30.823

您正在存储`row`，一个局部变量。一旦它的作用域结束，这个指针就不再有效：

```
for (int j = 0; j < 10; j++) {
    int row[] = {i+j, i*j, i-j};            
    addRow(matrix, row);
} 
```

您也必须为行数据动态分配内存。

# ios - 关闭 iAd 屏幕 ipad 屏幕变黑

> ID：16077627
> 
> 赞同：0
> 
> 时间：2013-04-18T08:05:53.643
> 
> 标签：ios, ios5, ios6, iad

我有一个基于选项卡的应用程序。我在 appdelegate 类中创建了一个 iad 对象，并在我的三视图控制器类中使用它。它在选项卡 2 的第一个屏幕和选项卡 3 的第一个屏幕上运行良好。在选项卡 2 上有一个表格视图，在单击该表视图的行时，我导航到新视图，在该视图中我为 iad 使用了相同的代码。单击 iad 时 iad 屏幕以横向模式打开，当关闭屏幕时，屏幕变为黑色并记录以下内容。

**[ADHostWindowController supportsOrientation:]：消息发送到已释放实例 0x100bc740**

我已经像这样在应用程序委托中创建了对象..

```
self.bannerView = [[ADBannerView alloc]init];
[self.bannerView setDelegate:self]; 
```

我在这样的视图控制器中添加横幅
[[[self appdelegate] bannerView] setFrame:CGRectMake(0, hightofView-180, 768, 66)]

我所有的视图控制器都是纵向的，但 iad 总是以横向模式打开。如何解决这个问题，这在 ios 6 中有效，但这个问题仅适用于 ios5 ipad。如何解决 thgis .plz 帮助我。任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T16:51:41.500

iad 不是问题，因为它从您的问题看起来只是检查当您正在显示 iad 的视图消失时您会做什么，

# ios - 组织者 - 档案。与 ${PRODUCT_NAME} 不同的名称

> ID：16077630
> 
> 赞同：0
> 
> 时间：2013-04-18T08:06:02.750
> 
> 标签：ios, xcode

我有一个让我发疯的问题。我正在使用 Ejecta 一个 JS 包装器（有点像 Phone Gap，但用于游戏）。

我仔细检查了 xcode 中的所有内容，并且 ${PRODUCT_NAME} 在“构建设置”->“产品名称”中设置正确，我检查了我所了解的所有地方，在 Xcode 中没有提到“Ejecta”的任何地方。即使是这种情况，我存档（没有问题，没有警告）并在管理器中，在名称下我找到“Ejecta”而不是我正确设置的应用程序名称。

有人可以帮我理解为什么吗？问题可能出在哪里？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:22:05.917

我在这里想了几件事。

1.  Info.plist 文件中的 Bundle 显示名称
2.  也许您使用 CFBundleDisplayName 'Ejecta' 创建了一个名为 InfoPlist.strings 的文件

如果这都不是，我会这样做来追踪它（请参阅随附的屏幕截图）。

1.  在您的目标中创建一个运行脚本阶段
2.  确保选择了“在构建日志中显示环境变量”选项
3.  使其停止并显示错误代码 (>0)
4.  生成错误时，右键单击->在日志中显示
5.  到处寻找“Electra”这个词

![在此处输入图像描述](https://i.stack.imgur.com/KhO9E.png)

希望这可以帮助

# repository-pattern - IRepository - 实体实现

> ID：16077635
> 
> 赞同：0
> 
> 时间：2013-04-18T08:06:34.260
> 
> 标签：repository-pattern

我正在使用 Repository 和 UnitOfWork 模式来维护解耦代码并实现一种简单的方法来测试我的应用程序。

内部实现首先使用 EntityFramerowk 和 DB，一切正常。

明天，我可能想要使用其他一些具体的存储库实现，例如文件系统而不是数据库，因此某些存储库方法（如查找或删除）可能难以完成，因为我的实体没有实现任何关于主外键等的东西. 这意味着我对存储库的实体研究应该寻找与 T 对象参数匹配的所有字段。

那么，为某些接口实现强制执行我的实体是一种好习惯吗？例如：

是否有一些可用的示例或教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:41:57.810

> 某些存储库方法（如查找或删除）可能难以完成，因为我的实体没有实现任何关于主外键等的内容。这意味着我对存储库的实体研究应该寻找与 T 对象参数匹配的所有字段。

这就是不实现存储库的方式。存储库接口（合同）应该不了解底层实现细节，例如实体框架。只有这样，您才能拥有不同的存储库实现并实现关注点分离。此外，使用存储库的测试代码根本不应该涉及 EF 或 db。

# windows - Windows 路径中的短名称

> ID：16077641
> 
> 赞同：-1
> 
> 时间：2013-04-18T08:07:11.217
> 
> 标签：windows

在一些批处理脚本中，我看到“C:\Oracle\MIDDLE~1”用于表示路径“C:\Oracle\Middleware”。我想知道为什么这是缩写，以及“MIDDLE~1”和“中间件”之间的映射存储在 Windows 中的哪个位置。你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:11:32.820

短文件名由 Windows 自动生成，以实现与旧的基于 MS-DOS 或 16 位程序的兼容性，这些程序期望所有文件名都采用 8.3 格式 - 即 8 个符号代表名称，3 个符号代表扩展名。可以在此处找到有关如何从长名称生成短名称的详细信息：[https ://technet.microsoft.com/en-us/library/cc976806.aspx](https://technet.microsoft.com/en-us/library/cc976806.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:13:17.823

这是微软管理长文件名的方式。

[在这里](http://en.wikipedia.org/wiki/Long_filename)和[这里阅读](http://support.microsoft.com/kb/142982/en-us)

摘录：

```
Long filenames (LFN), are Microsoft's way of implementing filenames longer than 
the 8.3 filename, or short-filename, naming scheme used in Microsoft DOS in their
modern FAT and NTFS filesystems. Because these filenames can be longer than an 
8.3 filename, they can be more descriptive. Another advantage of this scheme is 
that it allows longer extensions common on other operating systems (e.g. .jpeg, 
.tiff, .html, and .xhtml) rather than specialized shortened names (e.g. .jpg, 
.tif, .htm, .xht). The first Microsoft Windows operating system to implement 
long filenames on FAT was Windows NT 3.5 in 1994.

The long filename system allows a maximum length of 255 UTF-16 characters,
including spaces and non-alphanumeric characters (excluding the following 
characters, which have special meaning within the command interpreter or the 
operating system kernel: \ / : * ? " < > |). 
This is achieved by chaining up to 20 directory entries of 13 2-byte unicode 
characters each.

To maintain compatibility with older operating systems, Microsoft formulated a 
method of generating an 8.3 filename from the long filename (for example, 
"Microsoft.txt" to "MICROS~1.TXT") and associating it with the file. 
```

# javascript - Javascript HTML5 音频 - 如果已经播放，不播放声音？

> ID：16077642
> 
> 赞同：2
> 
> 时间：2013-04-18T08:07:17.853
> 
> 标签：javascript, html

我在我的网站上设置了一些 HTML 音频，并在几秒钟后设置了自动播放功能，但是声音似乎加载了两次？一个开始直接玩另一个虽然，一个是鬼，看不到玩家。

如果已经有声音播放，我怎么能告诉javascript不要开始播放声音？

```
<audio controls="controls" onloadeddata="var audioPlayer = this; setTimeout(function() { audioPlayer.play(); }, 2000)" }>
    <source src="http://www.alanis50.com/Music/music.mp3" type="audio/mp3"/>
    <source src="http://www.alanis50.com/Music/music.ogg" type="audio/ogg"/>
</audio> 
```

上述问题已解决，但我想为 Internet Explorer 添加此音频的 Flash 后备，因此添加了：

```
<div id ="audio">

<script>var readingMusic = false; </script>
<audio controls="controls" loop="loop" onloadeddata="var audioPlayer = this; if (!readingMusic){readingMusic = true;setTimeout(function() { audioPlayer.play(); }, 2000)}" }>
    <source src="http://www.alanis50.com/Music/music.mp3" type="audio/mp3"/>
    <source src="http://www.alanis50.com/Music/music.ogg" type="audio/ogg"/>
    <embed type="application/x-shockwave-flash" flashvars="audioUrl=http://www.alanis50.com/Music/music.mp3&autoPlay=true" src="http://www.google.com/reader/ui/3523697345-audio-player.swf" width="400" height="27" quality="best" wmode="transparent"></embed>
</audio>
</div>

<div id="audiohide">
<audio controls="controls" loop="loop" onloadeddata="var audioPlayer = this; if (!readingMusic){readingMusic = true;setTimeout(function() { audioPlayer.play(); }, 2000)}" }>
    <source src="http://www.alanis50.com/Music/music.mp3" type="audio/mp3"/>
    <source src="http://www.alanis50.com/Music/music.ogg" type="audio/ogg"/>
    <embed type="application/x-shockwave-flash" flashvars="audioUrl=http://www.alanis50.com/Music/music.mp3&autoPlay=true" src="http://www.google.com/reader/ui/3523697345-audio-player.swf" width="400" height="27" quality="best" wmode="transparent"></embed>
</audio>

</div> 
```

但是现在 Flash 音频的表现如何，以前的音频显然 javascript 没有影响 Flash 嵌入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:39:34.910

如果已经有一些音乐在播放，你不能有一个布尔值告诉浏览器吗？

带有 2 个标签的示例：

```
<script>var readingMusic = false; </script>
<audio controls="controls" onloadeddata="var audioPlayer = this; if (!readingMusic){readingMusic = true;setTimeout(function() { audioPlayer.play(); }, 2000)}" }>
    <source src="http://www.alanis50.com/Music/music.mp3" type="audio/mp3"/>
    <source src="http://www.alanis50.com/Music/music.ogg" type="audio/ogg"/>
</audio>

<audio controls="controls" onloadeddata="var audioPlayer = this; if (!readingMusic){readingMusic = true;setTimeout(function() { audioPlayer.play(); }, 2000)}" }>
    <source src="http://www.alanis50.com/Music/music.mp3" type="audio/mp3"/>
    <source src="http://www.alanis50.com/Music/music.ogg" type="audio/ogg"/>
</audio> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:51:42.870

嗯，[这是](http://pastebin.com/2hEqa8vb)你的[jScript.js](http://alanis50.com/wp-content/themes/studio8/js/jScript.js)的一部分。

似乎问题出在这一行：

```
location = base + "/#" + current.replace(base, ""); 
```

您在不离开当前页面的情况下导航到新网址（如果来源相同并且唯一的区别在于哈希值）。我建议您在更改位置来源后开始播放音频。

因此，您可以在此位置更改后立即放置自动播放逻辑。

# vba - 修改和粘贴剪贴板文本

> ID：16077646
> 
> 赞同：2
> 
> 时间：2013-04-18T08:07:40.170
> 
> 标签：vba, ms-word, paste

我的目标是：

1.  将 PDF 中的文本复制到剪贴板
2.  在一个移动中，将文本粘贴到 MS Word，同时
    *   用空格替换所有换行符
    *   匹配目的地的格式

我创建了一个宏，它用文档中的空格替换所有换行符。

```
Selection.Find.Execute Replace:=wdReplaceAll
Selection.WholeStory
Selection.PasteAndFormat (wdFormatOriginalFormatting)
Selection.Find.ClearFormatting
Selection.Find.Replacement.ClearFormatting
With Selection.Find
    .Text = "^p"
    .Replacement.Text = " "
    .Forward = True
    .Wrap = wdFindContinue
    .Format = False
    .MatchCase = False
    .MatchWholeWord = False
    .MatchWildcards = False
    .MatchSoundsLike = False
    .MatchAllWordForms = False
End With 
```

如何将替换应用到剪贴板，然后粘贴这个替换的片段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T09:03:08.217

我建议这样做：

1.  记住您将粘贴剪贴板数据的当前选择点
2.  粘贴剪贴板中的内容
3.  设置粘贴区域的结束点
4.  仅对刚刚粘贴的文本范围进行替换。

以下解决方案部分基于问题中的代码。评论了必要的（测试）。

```
Sub replacement_for_selection()

'Selection.Find.Execute Replace:=wdReplaceAll
'Selection.WholeStory

Dim rngFrom, rngTo
    rngFrom = Selection.Start
Selection.PasteAndFormat (wdFormatOriginalFormatting)
    rngTo = Selection.End
ActiveDocument.Range(rngFrom, rngTo).Select

Selection.Find.ClearFormatting
Selection.Find.Replacement.ClearFormatting
With Selection.Find
    .Text = "^p"
    .Replacement.Text = " "
    .Forward = False    '!!!
    .Wrap = wdFindStop   '!!!
    .Format = False
    .MatchCase = False
    .MatchWholeWord = False
    .MatchWildcards = False
    .MatchSoundsLike = False
    .MatchAllWordForms = False
End With
Selection.Find.Execute , , , , , , , , , , wdReplaceAll
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T21:47:28.617

它也对我有用，但我改进了它，添加了一个命令来消除双空格：

```
Sub KM()
'
' KM Macro
' Paste and eliminate line breaks and double spaces.
'
'Selection.Find.Execute Replace:=wdReplaceAll
'Selection.WholeStory

Dim rngFrom, rngTo
    rngFrom = Selection.Start
Selection.PasteAndFormat (wdFormatOriginalFormatting)
    rngTo = Selection.End
ActiveDocument.Range(rngFrom, rngTo).Select

Selection.Find.ClearFormatting
Selection.Find.Replacement.ClearFormatting
With Selection.Find
    .Text = "^p"
    .Replacement.Text = " "
    .Forward = False    '!!!
    .Wrap = wdFindStop   '!!!
    .Format = False
    .MatchCase = False
    .MatchWholeWord = False
    .MatchWildcards = False
    .MatchSoundsLike = False
    .MatchAllWordForms = False
End With
Selection.Find.Execute , , , , , , , , , , wdReplaceAll

Selection.Find.ClearFormatting
    Selection.Find.Replacement.ClearFormatting
    With Selection.Find
        .Text = "  "
        .Replacement.Text = " "
        .Forward = False
        .Wrap = wdFindStop
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchWildcards = False
        .MatchSoundsLike = False
        .MatchAllWordForms = False
    End With
    Selection.Find.Execute Replace:=wdReplaceAll
    Selection.Find.Execute Replace:=wdReplaceAll
    Selection.Find.Execute Replace:=wdReplaceAll
End Sub 
```

# jquery - 检查电子邮件或电话验证（geektantra 插件）

> ID：16077653
> 
> 赞同：0
> 
> 时间：2013-04-18T08:08:05.193
> 
> 标签：jquery, validation

我正在验证用户填写他的电话号码或电子邮件地址的表单。但至少需要填写两者之一。

我正在使用这个验证插件：[http ://www.geektantra.com/projects/jquery-form-validate/advanced_demo/](http://www.geektantra.com/projects/jquery-form-validate/advanced_demo/)

我认为它应该看起来像这样，但这似乎不起作用：

```
 expression: "if ((VAL) || jQuery('#email').val()) return true; else return false;", 
```

希望得到帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-18T08:57:23.363

如果您尝试验证电话或电子邮件，

试试用这个，

```
 expression:  if ((VAL.match(/^[0-9]*$/) && VAL.length == 10) || VAL.match(/^[^\\W][a-zA-Z0-9\\_\\-\\.]+([a-zA-Z0-9\\_\\-\\.]+)*\\@[a-zA-Z0-9_]+(\\.[a-zA-Z0-9_]+)*\\.[a-zA-Z]{2,4}$/)) return true; else return false; 
```

这实际上检查它是否是电话号码或电子邮件，如果其中任何一个有效，则返回 true。

如果您有 2 个输入字段，请尝试这样的操作，

```
jQuery(this).parents("form").submit(function(){
var isFormValid = true;
    if(SelfID != <PHONE FEILD> || SelfID != <EMAIL FEILD> ){
        if (validate_field('#' + SelfID)) 

        else 
            isFormValid =  false;
    }
    if(validate_field('#' + <PHONE FEILD>)  || validate_field('#' + <EMAIL FEILD>)){
        if(isFormValid ==  true){
            return true;
        }else{
            return false;
        }
    }
}); 
```

# plugins - OSGi 捆绑为插件架构中的 SOAP Web 服务

> ID：16077654
> 
> 赞同：1
> 
> 时间：2013-04-18T08:08:05.833
> 
> 标签：plugins, soap, service, web, osgi

我想将 OSGi 包公开为 SOAP Web 服务，或者换句话说，发布由 OSGi 包提供的 Web 服务端点。

架构模型/想法是有一个主机 Web 应用程序，它是部署在 JBoss（5.1.0 GA）上的普通 war 文件，提供 SOAP Web 服务接口（JAX-WS）。
该宿主应用程序启动嵌入的 OSGi 框架（通过 ServletContextListener - 目前是 Equinox）并加载许多用作插件的 OSGi 包。
插件包依赖于主机应用程序，因为请求处理的一部分通过内部定义的接口委托给它们。
同时，插件包还应该能够贡献自己的公共 SOAP Web 服务接口（端点实现和相应的 WSDL 文件将被发布并由应用程序服务器提供）。

我们采用的第一种方法是主机 Web 应用程序部署一个调度程序/代理 servlet，它将处理委托给 OSGi 包提供的相关端点。
OSGi/Equinox (BridgeServlet/HTTPServiceServlet) 中有一个 servlet 桥接解决方案，它可以使用 HTTP 服务规范以编程方式注册 servlet（例如，在插件包的 BundleActivators 中）。
问题是我有基于 SOAP 的 Web 服务端点，并且需要能够将它们包装在 javax.servlet.Servlet 实现中。
这通常是 Java EE 5 服务器的 WS 堆栈实现的内部，它遵循基于 servlet 的 Web 服务方法（端点在 web.xml 中定义为 servlet），并在内部用于为 Web 服务端点安装本机端点 servlet。
我没有找到这样一个可以向 HTTP 服务注册的公共端点 servlet 实现（可能类似于 com.sun.jersey.spi.container.servlet.ServletContainer 可用于为 JAX-RS 发布基于 REST 的服务OSGi 中的应用程序）
我有点惊讶于我没有发现太多关于向 OSGi HTTP 服务注册基于 SOAP 的 WS 端点的信息，或者我可能没有看到明显的情况。

我发现了类似的东西，JAX-WS-Commons/Spring（用于配置 JAX-WS 的弹簧支持，[http://jax-ws-commons.java.net/spring/](http://jax-ws-commons.java.net/spring/)），它在内部使用 JAX- 的类 WSServletDelegate WS RI (metro) 处理端点的 Web 请求。但我不确定，它似乎已被弃用，我需要将 Metro WS 堆栈 jar 提供给 JBoss（或在 war 文件中），以使其在 JBoss 5.1.0 GA 上运行。

另一种方法似乎是分布式 OSGI，它允许发布 OSGi 服务以进行远程访问。
但是，我找不到关于如何在 JBoss 上将这些服务作为 Web 服务提供的明确信息。

其他实现方面有：

*   我们绑定到 JBoss 5.1.0 GA 并且对 JBoss 配置的更改应该尽可能少（为了对我们客户的设置有最小的限制）
*   所有 Web 服务都是以契约优先开发的，这意味着提供容器将使用原始 WSDL。
*   插件组件在依赖关系或技术方面应尽可能简单（以便对插件开发人员的技能要求最低）
*   我们使用 Spring 3 和 Gemini 蓝图。

最后，有一些模棱两可和不清楚的方面，不幸的是我找不到具有类似要求的项目的报告。

所以，我很想听听专家的一些建议或意见。
也许有一些我看不到的选项，或者也许有人以前实现过类似的项目并且喜欢分享经验。
非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T15:00:47.963

我不是专家，但我见过的另一种方法是将带有应用程序的整个应用服务器放入 OSGi 容器中。它是 Sling 启动板[http://sling.apache.org/documentation/the-sling-engine/architecture.html#launchpad中的一个选项](http://sling.apache.org/documentation/the-sling-engine/architecture.html#launchpad)

高温高压

# json - 如何使用 Jquery 从 Json 中获取值

> ID：16077655
> 
> 赞同：0
> 
> 时间：2013-04-18T08:08:06.360
> 
> 标签：json, jquery-ui, jquery

嗨，我是 Jquery 的新手，我不知道如何使用 json 数据。我有一个 Json 作为回应。我的成功功能是

```
success: function(resp)
{
    var x = JSON.stringify(resp);
    alert(x);

} 
```

警报有以下 JSON

{"xyz":{"abc":[{"action":"fail","re​​sult":"xxx"},{"action":"pass","re​​sut":"yyy"}]}}

我只想要行动价值。如何从 x 变量中获取该值以及如何在 HTML 中使用该值。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:10:04.470

当你使用`JSON.stringify()`你把它变成一个字符串时，你希望它作为一个对象来访问数据。试试这个：

```
success: function(resp) {
    alert(resp.xyz.abc[0].action); 
    var x = resp.xyz.abc[0].action  // to use the value in html later on
} 
```

[如果它以字符串形式返回（我目前无法判断），您可以使用$.parseJSON()](http://api.jquery.com/jQuery.parseJSON/)将其转换为对象（只要它是有效的 JSON ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:10:44.077

```
success: function(resp)
{
    var x = $.parseJSON(resp);
    var xyz = x.xyz;
    var pass = x.xyz.abc[1].action;
} 
```

或者您可以通过 $.each 循环遍历每个数组

```
success: function(resp)
{
    var x = $.parseJSON(resp);
    $.each(x.xyz.abc, function(index, element){
        alert('action:' + element.action + ', result:' + element.resut)
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:02:09.463

我认为，不要个人认为，您的 JSON 对象没有很好地组织为获取和拥有的对象。从我的角度来看，行动要么失败，要么成功，阅读它，正如您在上面的好答案中看到的那样，会给您带来您想要的东西。

当只有一个可用的（成功或失败）时，获得一个像你一样结构化数据的 JSON 有什么意义，其中编码了 2 个可能的答案。

# c# - 没有可用于编码 1252 的数据

> ID：16077659
> 
> 赞同：1
> 
> 时间：2013-04-18T08:08:15.983
> 
> 标签：c#, winforms, encoding, user-controls, propertygrid

我有奇怪的问题，没想到。

我有带有用户控件的自定义 dll（用于 WinForms），在 Windows 7 中使用 .NET4 VS2010 构建。

此用户控件具有类 System.Text.Encoding 的公共属性。

我为它编写了自己的 TypeConverter，以便在设计时从属性网格中选择编码。

在 Win8 下出现问题（Win7 - 没有错误）。

在 Win8 我有默认编码西欧（1252）。因此，当我尝试构建最简单的 winforms 应用程序时（只有表单和我的 dll 中的用户控件）

我在 Form1.resx 的标题中收到构建错误消息：

Resx 文件无效。在第 135 行，位置 5 处输入数据，无法加载，因为它在构建过程中抛出了以下异常：No data is available for encoding 1252。

如果我在构建之前选择另一种编码也没关系，我再次收到相同的消息。

即使我从列表中删除了 1252，每当使用编码类时更改为 UTF8，我仍然收到相同的消息。

您可以提出什么解决方法？我希望该属性是公开的，不想删除它，并且希望保存选择的编码是 resx 或以任何方式。

在Win7我没有这样的问题，没想到在Win8有它。

谢谢

# javascript - 从 JSON 中获取价值

> ID：16077661
> 
> 赞同：2
> 
> 时间：2013-04-18T08:08:19.547
> 
> 标签：javascript, json, google-maps-api-3

我有一个这样的 JSON——

```
 ....
        "location" : {
           "lat" : 37.42140090,
           "lng" : -122.08537010
        },
  .... 
```

我正在尝试访问 lat 和 lng 值。我该怎么做？

我的代码

```
 results[0].geometry.location.lat
  or results[0].geometry.location.lng 
```

不起作用。但是当我只使用 results[0].geometry.location 时，我得到了输出。

我使用的 JSON 是 -- [http://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=true)

更新 -

这就是我向 API 发出请求的方式

```
 geocoder.geocode( { 'address': search_addr}, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                var t = results[0].geometry.location.lat;
            } else {
              alert('Geocode was not successful for the following reason: ' + status);
            } 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T08:14:00.993

我试过你的代码

```
alert(json.results[0].geometry.location.lat); 
```

正如你在这个小提琴中看到的那样：

[http://jsfiddle.net/SWTZQ/](http://jsfiddle.net/SWTZQ/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T09:01:35.397

使用 Google 的 JavaScript API 时，您通常不会直接与解析后的 JSON 交互，而是与*wrapper* `Object`交互。

具体来说，`results[0].geometry.location`将是[`google.maps.LatLng`](https://developers.google.com/maps/documentation/javascript/reference#LatLng). 因此，与其保持值本身，`lat`不如`lng`将`return`这些值作为方法：

```
var geoLoc = results[0].geometry.location;
var lat = geoLoc.lat();
var lng = geoLoc.lng(); 
```

# android - 使用 ViewPagerIndicator 单击选项卡时禁用平滑动画

> ID：16077662
> 
> 赞同：5
> 
> 时间：2013-04-18T08:08:20.910
> 
> 标签：android, android-viewpager, viewpagerindicator

我正在使用 ViewPagerIndicator 库中的 TabPageIndicator 和 ViewPager 来显示 6 个片段。假设我在第一页，如果我点击第 6 个选项卡，我会看到我所有的页面都滚动了。是否可以禁用此动画？也许我可以在 ViewPager 中以某种方式禁用它？

这是适配器的代码：

```
public class TabBarFragmentPagerAdapter extends FragmentPagerAdapter implements IconPagerAdapter {
private final List<Fragment> items;
private static final String[] TITLES = new String[] { "Home", "Profile", "Explore", "Contacts", "Beacon" };
private static final int[] ICONS = new int[] {
        R.drawable.icon_tabbar_home_bg,
        R.drawable.icon_tabbar_profile_bg,
        R.drawable.icon_tabbar_explore_bg,
        R.drawable.icon_tabbar_contacts_bg,
        R.drawable.icon_tabbar_beacon_bg
};

public TabBarFragmentPagerAdapter(FragmentManager fm, List<Fragment> items) {
    super(fm);
    this.items = items;
}

@Override
public Fragment getItem(int position) {
    return items.get(position);
}

@Override
public int getIconResId(int index) {
    return ICONS[index];
}

@Override
public CharSequence getPageTitle(int position) {
    return TITLES[position];
}

@Override
public int getCount() {
    return items.size();
}
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-07T16:47:01.633

另一种选择是覆盖类`setCurrentItem(int i)`中的`CustomViewPager`子类`ViewPager`，如下所示：

```
@Override
public void setCurrentItem(int item) {
    super.setCurrentItem(item,false);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T09:20:09.540

我调查了 TabPageIndicator 的代码，发现现在不可能。参见 mTab​​ClickListener 的代码：

```
private final OnClickListener mTabClickListener = new OnClickListener() {
    public void onClick(View view) {
        TabView tabView = (TabView)view;
        final int oldSelected = mViewPager.getCurrentItem();
        final int newSelected = tabView.getIndex();
        mViewPager.setCurrentItem(newSelected);
        if (oldSelected == newSelected && mTabReselectedListener != null) {
            mTabReselectedListener.onTabReselected(newSelected);
        }
    }
}; 
```

为了支持这个特性，我们应该向 setCurrentItem 添加第二个参数。像这样的东西：

```
mViewPager.setCurrentItem(newSelected, smoothScrollEnabled); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-05T22:32:35.747

您现在可以使用 Material 库和 viewPager2 中的 TabLayout 以及这段代码来同步它们并禁用平滑滚动：

```
TabLayoutMediator(tabLayout, pager, false, false) { tab, position ->
                when(position) {
                    0 -> tab.text = "text 1"
                    1 -> tab.text = "text 2"
                    2 -> tab.text = "text 3"
                }
            }.attach() 
```

设置为 false 的第二个布尔参数是**smoothScroll**参数

更多信息和官方文档： [https ://material.io/develop/android/components/tabs](https://material.io/develop/android/components/tabs)

# c# - System.ObjectDisposedException：无法访问已处置的对象。对象名称：'OracleConnection' 重用 OracleConnection 对象

> ID：16077666
> 
> 赞同：3
> 
> 时间：2013-04-18T08:08:37.467
> 
> 标签：c#, oracle, database-connection, oraclecommand

我想为更多查询重用一个 OracleConnection 对象，所以我写了一个简单的类：

```
public static class DbConnectionsManager
    {
        /// <summary>
        /// 
        /// </summary>
        private static OracleConnection _dbConnection = null;

        /// <summary>
        /// 
        /// </summary>
        /// <param name="aConnectionString"></param>
        /// <returns></returns>
        public static OracleConnection GetDatabaseConnection(string aConnectionString) 
        {
            try
            {
                if (_dbConnection == null)
                {
                    _dbConnection = new OracleConnection(aConnectionString);
                    _dbConnection.Open();
                    return _dbConnection;
                }

                if (_dbConnection.State == System.Data.ConnectionState.Closed)
                {
                    _dbConnection.ConnectionString = aConnectionString;
                    _dbConnection.Open();
                    return _dbConnection;
                }

                if (!_dbConnection.ConnectionString.Equals(aConnectionString))
                {
                    _dbConnection.Close();
                    _dbConnection.ConnectionString = aConnectionString;
                    _dbConnection.Open();
                    return _dbConnection;
                }

                return null;
            }
            catch (Exception e)
            {

                return null;
            }
        }
    } 
```

这样我可以多次使用连接：

```
 using (OracleConnection connection = 
           DbConnectionsManager.GetDatabaseConnection(aDbConnectionString))
            {
                OracleCommand command = connection.CreateCommand();
                string sql = "SELECT * FROM MYTABLE";
                command.CommandText = sql;

                OracleDataReader reader = command.ExecuteReader();
                while (reader.Read())
                {
                    string myField = (string)reader["EXAMPLE"];
                    Console.WriteLine(myField);
                }
            } 
```

当我第一次调用该方法时，一切正常。如果我记得静态对象是 != null 但连接结果关闭的方法！我从不关闭连接！

当您尝试重新打开连接时，我有此异常

```
....
if (_dbConnection.State == System.Data.ConnectionState.Closed)
                {
                    _dbConnection.ConnectionString = aConnectionString;
                    _dbConnection.Open();
                    return _dbConnection;
                }
... 
```

错误

```
Message = "Cannot access a disposed object.\r\nObject name: 'OracleConnection'." 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T08:13:01.583

正如错误所说，它是一个已处置的对象。这意味着您需要删除该`using (`子句；这个子句处理了你的连接对象，这就是为什么你不能在外面使用这个对象`using (`。这意味着如果你想在外面使用它，你需要创建一个新的类对象`using (`。

请参阅： [C# Using 语句](http://www.w3enterprises.com/articles/using.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-23T19:44:59.480

正如另一个答案所解释的那样，该`using`子句并不适合您想要*重用的*东西。但是我有同样的想法 - 我仍然想使用这种类型的模式来自动打开和自动关闭连接。如果这是您希望做的，那么关键是您“使用”的对象不能是 OracleConnection 本身，因为您*确实*想重用它，并且“使用”它会杀死它。你真的只想要一个新对象，它在创建时打开连接，在 Dispose 时关闭连接，仅此而已。这应该可以解决问题（我将它用于我自己的目的）：

```
internal class OpenedContext : IDisposable
{
    private OracleConnection _connection;

    public OpenedContext(OracleConnection conn) {
        _connection = conn;
        if (_connection.State != System.Data.ConnectionState.Open) _connection.Open();            
    }

    public void Dispose() {
        if (_connection.State != System.Data.ConnectionState.Closed) _connection.Close();
    }

} 
```

然后在您的示例中，您可以执行类似...

```
 // Early on...
            OracleConnection _connection = DbConnectionsManager.GetDatabaseConnection(aDbConnectionString);

            // ... Later on, in various other calls ...
            using (new OpenedContext(_connection))
            {
                OracleCommand command = _connection.CreateCommand();
                string sql = "SELECT * FROM MYTABLE";
                command.CommandText = sql;
                OracleDataReader reader = command.ExecuteReader();
                while (reader.Read())
                {
                    string myField = (string)reader["EXAMPLE"];
                    Console.WriteLine(myField);
                }
            } 
```

虽然它在某种程度上很愚蠢，但我绝对更喜欢设置这样的模式，而不是总是期望未来的编码人员在每个数据库调用周围手动“包装”重新打开和重新关闭。它更具可读性（或可忽略）且风险较小（如果您非常担心在空闲时关闭连接）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-22T12:13:31.550

```
public OracleConnection GetConnection()
{

//Romove using(...) clouse 
using (OracleConnection conn = new OracleConnection(_connSettings.GetConnectionString()))
{return con;} 
```

问题是内部 using() 子句问题。

```
using (OracleConnection con = GetConnection()){} 
```

# c++ - 非数据类型模板参数，生成更多专业化？

> ID：16077675
> 
> 赞同：5
> 
> 时间：2013-04-18T08:09:02.467
> 
> 标签：c++, instantiation

我的代码是：

```
#include <iostream>

using namespace std;

template <typename T, int X>

class Test
{
   private:
    T container[X];
   public:
    void printSize();

};
template <typename T, int X>
void Test<T,X>::printSize()
{
    cout <<"Container Size = "<<X <<endl;
}

int main()
{
    cout << "Hello World!" << endl;
    Test<int, 20> t;
    Test<int, 30> t1;

    t.printSize();
    t1.printSize();
    return 0;
} 
```

**问题：**

1.  会产生多少专业化？如果我理解正确，它会生成两个专业，一个是 for `<int, 20>` ，另一个是 for `<int, 30>`。如果我的理解有误，请纠正？
2.  有没有办法查看/检查任何逆向工程生成的专业化数量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:13:03.580

这里没有*专业化*，只有*实例化*（[这个问题](https://stackoverflow.com/questions/3914642/difference-between-instantiation-and-specialization-in-c-templates)解释了差异）。此代码生成类模板的两个实例`Test`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T08:13:03.023

1) 是的，**编译器**会生成两个实例化，但是**链接器**可能会合并具有相同生成代码的函数（例如使用整个程序优化），这是减少代码膨胀的一种好方法。

2）看到这个[问题](https://stackoverflow.com/q/11403417/819272)，它解释了gcc如何生成模板实例化输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:20:25.390

a）在您的示例中创建了 2 个专业化实例。

b）没有内置方法来支持为类生成的专业化数量。如果它是您的项目，您可以添加静态计数。如果你愿意，你可以为你的类编写你自己的引用计数机制。在我们的构造函数中增加静态计数。

```
static int created = 0;
static int alive = 0;
class Test
{
counter()
    {
        created++;
        alive++;
    }
~counter()
{
  created--;
}
//Rest of class
}; 
```

# android - Android媒体控制器定位

> ID：16077676
> 
> 赞同：0
> 
> 时间：2013-04-18T08:09:02.890
> 
> 标签：android, mediacontroller

我在我的活动中使用媒体播放器和 mediaController 来播放音频。在我的活动中，我有一张与音频相关的图像，其下方是音频的描述。我希望 mediaController 从图像底部和描述上方显示。目前，即使我将图像作为锚视图，mediaController 也会出现在设备的底部。有没有办法可以将 mediaController 移到描述上方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:16:04.373

干得好：

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <VideoView
        android:id="@+id/videoview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@color/blue" />

</LinearLayout> 
```

活动代码：

```
package com.appsopmaat.bethgazo;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.media.MediaPlayer.OnErrorListener;
import android.media.MediaPlayer.OnPreparedListener;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.widget.MediaController;
import android.widget.Toast;
import android.widget.VideoView;

import com.loopj.android.http.AsyncHttpClient;
import com.loopj.android.http.BinaryHttpResponseHandler;

public class Player extends Activity {

    VideoView videoView;
    MediaController mediaController;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.player);

        videoView = (VideoView) findViewById(R.id.videoview);
        mediaController = new MediaController(Player.this);
        videoView.setMediaController(mediaController);
                                videoView.setVideoURI(Uri.parse(mp3url));
                                videoView.start();
                            }
                        }
                    });
        }

        videoView.setOnErrorListener(new OnErrorListener() {

            @Override
            public boolean onError(MediaPlayer mp, int what, int extra) {
                // TODO Auto-generated method stub
                Toast.makeText(Player.this, "Error please try again.",
                        Toast.LENGTH_LONG).show();
                finish();
                return true;
            }
        });

        videoView.setOnPreparedListener(new OnPreparedListener() {

            @Override
            public void onPrepared(MediaPlayer mp) {
                // TODO Auto-generated method stub
                mediaController.show();
            }
        });

        videoView.setOnCompletionListener(new OnCompletionListener() {

            @Override
            public void onCompletion(MediaPlayer mp) {
                // TODO Auto-generated method stub
                finish();
            }
        });
    }
} 
```

# javascript - 使用 javascript HTML5 和 CSS3 在设置的路径上滚动图像

> ID：16077680
> 
> 赞同：1
> 
> 时间：2013-04-18T08:09:29.090
> 
> 标签：javascript, html, css, scroll

我有一张背景图片，比如一张地图，上面有一条路。这条路不是直的，它上面也有一些曲线。我想用附加的链接做类似的事情，但就像我说的，在一条不直的路上。我尝试了一些现有的脚本，例如 jQuery Scroll Path，但这是基于您要滚动的对象周围的背景旋转，我不需要这种方式。如果你能给我一些关于如何实现它的建议，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:17:11.427

也许这可能适合你

[http://forum.jquery.com/topic/new-plugin-jquery-crspline-animates-elements-smoothly-along-arbitrary-length-sequences-of-waypoints-in-2d](http://forum.jquery.com/topic/new-plugin-jquery-crspline-animates-elements-smoothly-along-arbitrary-length-sequences-of-waypoints-in-2d)

你在那里设置位置，元素将跟随

# ruby - Textmate 2 - Ruby 没有作为选项出现

> ID：16077687
> 
> 赞同：0
> 
> 时间：2013-04-18T08:09:42.573
> 
> 标签：ruby, macos, textmate

在这里你可以看到我的 ruby​​ 包已经安装好了

![捆绑](https://i.stack.imgur.com/B9lDh.png)

在编辑文本时，我无法从列表中选择 ruby​​（因为它不存在），这是我的设置错误还是文本伙伴中的错误？我已经重新下载了文本伴侣并通过运行删除了设置

```
$ rm -rf ~/Library/Application Support/TextMate 
```

![可用列表](https://i.stack.imgur.com/Emn8s.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:11:55.780

我的捆绑包位于两个地方。对于预装 TextMate 的 Ruby 和其他捆绑包：

```
~/Library/Application Support/TextMate/Managed/Bundles 
```

保存的第 3 方捆绑包位于：

```
~/Library/Application Support/Avian/Bundles 
```

检查这些文件夹，看看你是否有`Ruby.tmbundle`文件。

确保 ruby​​ 源代码文件也以`.rb`文件扩展名保存，因此 TextMate 知道在语法突出显示、软制表符等时使用 Ruby 包。

# git - 如何在不先克隆该存储库的情况下更新远程存储库中的文件？

> ID：16077691
> 
> 赞同：32
> 
> 时间：2013-04-18T08:10:01.007
> 
> 标签：git

有没有办法将提交推送到远程 git 存储库，而无需先对该存储库进行本地克隆？

我有一个远程 repo 的有效 URL，我知道文件的路径，我要做的就是将文件的更新版本推送到主服务器上。理想情况下，我希望它适用于任何有效的远程 repo URL，但如果它仅适用于基于 https 的 git URL，它仍然会有所帮助。

我猜这是不可能的，因为根据[How to "git show" on a remote repo？](https://stackoverflow.com/questions/1971732/how-to-git-show-on-a-remote-repo). 但我希望有一种解决方法可以使用一些较低级别的 git 命令。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-18T09:20:26.163

不可能的。但是由于预期提交只需要一个提交作为其父提交，因此可以使用所谓的“浅层克隆”并仅获取您需要的分支的提示提交。这只会从远程带来最少量的对象。查找 的`--depth`命令行选项`git clone`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-09-29T03:20:35.253

[是的，您可以使用标记](https://git-scm.com/book/en/v2/Git-Basics-Tagging)推送新版本

按照这个步骤

在您的新项目根目录中

1.  `git init`
2.  `git remote add origin git@github.com:yourusername/yourpoject`
3.  `git tag -a v2.0 -m 'version 2.0'`
4.  `git add .`
5.  `git commit -m "New Version 2.0 :rocket:"`
6.  `git push -u origin v2.0`

现在您的新项目有了一个名为 v2.0 的新分支，并且您的主分支保持不变。之后，如果你不想，你可以在你的 github 项目设置中更改你的默认分支。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-09-12T08:54:09.477

刚发现这个问题，想到了更新。

如果你使用 github，只需在你的 repo url 前加上[https://gitpod.io#](https://gitpod.io#)。

这是一项允许您在线更新存储库的服务，因此您无需在本地克隆即可更新文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-18T08:13:08.750

不，我不认为这是可能的。您需要克隆整个存储库才能使其正常工作。Git 需要了解所有文件并`.git`正确完成其工作。这就是为什么你不能像那样推送任意文件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-22T20:54:35.247

好吧，如果您使用 GitHub，那么您可以使用 GitHub API
[https://developer.github.com/v3/repos/contents/#create-or-update-a-file轻松做到这一点](https://developer.github.com/v3/repos/contents/#create-or-update-a-file)

基本上你这样做：

1.  创建 OAuth 应用程序并获取访问令牌
    [https://developer.github.com/apps/building-oauth-apps/](https://developer.github.com/apps/building-oauth-apps/)

2.  向 GitHub API 发出请求：
    使用您的访问令牌 (OAuth 2.0) 设置授权标头
    PUT [https://api.github.com/repos/:owner/:repo/contents/:path](https://api.github.com/repos/:owner/:repo/contents/:path)
    与 JSON 正文如下：

```
{
  "message": "my test commit through API",
  "content": "QmFzZTY0IGVuY29kZWQgY29udGVudCBoZXJl",
  "sha": "cd220ncv229f2e4a95bce426ff48b1ae6b885b3a42"
} 
```

其中：
**message** - 你的提交消息
**内容**- Base64 格式编码的更新内容
**sha** - 用于更新文件的 sha，你可以通过 API 请求获取它
GET [https://api.github.com/repos/:owner/:repo/contents/ ：小路](https://api.github.com/repos/:owner/:repo/contents/:path)

**:owner** - 存储库所有者
**:repo** - 存储库名称
**:path** - 存储库中文件的路径

示例请求：
[https ://api.github.com/repos/nodejs/node/contents/README.md](https://api.github.com/repos/nodejs/node/contents/README.md)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-11T00:34:14.957

@algal，对于您的特定用例，您*可能*可以使用子模块（[http://git-scm.com/docs/git-submodule](http://git-scm.com/docs/git-submodule)）。您可以克隆并提交到子模块，而无需克隆可能包含您提到的“大量”代码的“超级模块”。超级模块可以参考您提到的配置信息的子模块。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-27T04:15:02.273

如果你使用 Github，你可以使用[Github Web Editor](https://docs.github.com/en/codespaces/the-githubdev-web-based-editor)。在不克隆本地存储库的情况下更新文件的最简单方法是：

1.  在浏览器中转到 Github 存储库
2.  然后，按`.`

您应该会看到 Visual Studio Code 在您的浏览器上运行。然后，创建文件夹或从您的计算机拖放文件

要保存更改，请按：`Ctrl + Shift + G`或单击左侧栏中的“源代码管理”选项，然后提交更改。

# clearcase - 无法添加到源代码管理，因为加载状态已取消更新

> ID：16077694
> 
> 赞同：1
> 
> 时间：2013-04-18T08:10:08.570
> 
> 标签：clearcase, clearcase-ucm

我们正在使用快照视图（UCM）。

当我们尝试添加源代码管理文件夹时，它失败并出现以下错误。

```
Rational ClearCase Explorer
---------------------------

 Error adding 'D:\cc_view\IS-Dev1\Impl\Install\ViewDeployment' to source control.

Checkout is currently disabled for element "D:\cc_view\IS-Dev1\Impl\Install".  An update appears to have been aborted or errors were  encountered during an update.  An update must be performed  on the element to enable a checkout. Checkout is currently disabled for element "D:\cc_view\IS-Dev1\Impl\Install".  Its config spec rule information is currently unavailable  due to either an aborted update or an update in progress. 
```

我们再次更新了视图并停止并启动了 clearcase 相关服务。

但仍然没有起色。当我们查看 view-> advanced tab 的属性时。它显示加载状态：更新已取消。

我认为这种状态可能会起作用。如何解决这个问题并允许它添加到源代码控制中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:13:45.367

您需要确保在快照视图的根目录（在 vobs 上方）启动更新，因为 UCM 可能会因为配置更改而抱怨。
如果 Stream 已重新设置基础，则更新将要求您接受新配置并启动完整更新，但前提是从视图的根目录完成。

还要检查这些更新的日志（`*.updt`视图根文件夹中的文件），其中的任何错误都意味着视图的“更新已取消”。

在您的情况下获得完整更新的一种方法是（仍在根文件夹中，如[本技术](http://www-01.ibm.com/support/docview.wss?uid=swg1IC48021)说明中所述——对于 CCRC，但对于完整的 ClearCase 安装也有效）：

```
 cleartool setcs -current 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-31T16:34:27.267

以前的更新或结帐未完成。您必须更新您的快照视图。你可以跑

```
cleartool setcs -current 
```

或者

```
ClearCase Explorer->(on left panel--snapshot_name) right click-> Update View->Yes 
```

该操作需要很长时间。修复此问题后，该操作完成。

警告：不要停止更新处理。您不应在启动时启动此操作。因为在清除案例更新以查看时，您无法取得进展。

# mysql - 将页脚行作为一组行的标题行

> ID：16077696
> 
> 赞同：3
> 
> 时间：2013-04-18T08:10:18.873
> 
> 标签：mysql, sql, sql-server, postgresql

我有一张如下表：

```
 rfa_yea | rfa_idx |                      rfa_dsp                       | rfa_tpr
---------+---------+----------------------------------------------------+---------
 2013    |       1 | PIGATO VERM.NO/ROSS/ORMEASCO CL75                  | A
 2013    |       2 | ESTATE\134134134047 BICCHIERE SING.VERDE           | A
 2013    |       3 | Rif. Trn. N. 17 del 17/04/2013 Cassa N. 00001      | C
 2013    |       4 | BIB.RED BULL LAT.CL25 ENER.DRI                     | A
 2013    |       5 | BIB.RED BULL LAT.CL25 ENER.DRI                     | A
 2013    |       6 | SHOPPER 30X60 MAXI X 1000                          | A
 2013    |       7 | SHOPPER HD 27X50 MEDIE X 1000                      | A
 2013    |       8 | PIGATO VERM.NO/ROSS/ORMEASCO CL75                  | A
 2013    |       9 |  * SCONTO SUBTOTALE                                | A
 2013    |      10 | Rif. Trn. N. 19 del 17/04/2013 Cassa N. 00001      | C 
```

字段`rfa_tpr`标记为的记录`'C'`是它之前的行组的标题。我现在需要将该行作为行组的标题而不是页脚（分隔符），所以我想检索如下结果集：

```
 rfa_yea | rfa_idx |                      rfa_dsp                       | rfa_tpr
---------+---------+----------------------------------------------------+---------
 2013    |       3 | Rif. Trn. N. 17 del 17/04/2013 Cassa N. 00001      | C
 2013    |       1 | PIGATO VERM.NO/ROSS/ORMEASCO CL75                  | A
 2013    |       2 | ESTATE\134134134047 BICCHIERE SING.VERDE           | A
 2013    |      10 | Rif. Trn. N. 19 del 17/04/2013 Cassa N. 00001      | C
 2013    |       4 | BIB.RED BULL LAT.CL25 ENER.DRI                     | A
 2013    |       5 | BIB.RED BULL LAT.CL25 ENER.DRI                     | A
 2013    |       6 | SHOPPER 30X60 MAXI X 1000                          | A
 2013    |       7 | SHOPPER HD 27X50 MEDIE X 1000                      | A
 2013    |       8 | PIGATO VERM.NO/ROSS/ORMEASCO CL75                  | A
 2013    |       9 |  * SCONTO SUBTOTALE                                | A 
```

有没有只有 SQL 的解决方案？该解决方案应该适用于以下每种数据库服务器：MSSQL、PostgreSQL 和 MySQL。

**笔记**

我可以有多个分隔符（页脚）行，而不仅仅是示例中的两个...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T08:44:55.063

```
SELECT a.rfa_yea ,
        a.rfa_idx ,
        a.rfa_dsp ,
        a.rfa_tpr
FROM table1 a
INNER JOIN table1 c ON a.rfa_idx <= c.rfa_idx AND c.rfa_tpr = 'C'
GROUP BY  a.rfa_yea ,
        a.rfa_idx ,
        a.rfa_dsp ,
        a.rfa_tpr
ORDER BY MIN(c.rfa_idx), a.rfa_tpr DESC, a.rfa_idx 
```

**[SQL Server 演示](http://sqlfiddle.com/#!6/b4afc/2)**

**[MySQL 演示](http://sqlfiddle.com/#!2/c6c21/1)**

**[PostgreSQL 演示](http://sqlfiddle.com/#!12/89457)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T08:48:05.283

如果将来有人需要做类似的事情，我自己在 SQL 查询下方找到了一个解决方案：

```
SELECT * FROM righfatture r 
LEFT JOIN ( 
SELECT r1.rfa_tpr,r1.rfa_idx, COALESCE(r2.rfa_idx, -1) AS IDXP FROM righfatture r1
LEFT JOIN righfatture r2  ON r2.rfa_idx < r1.rfa_idx AND r2.rfa_tpr = r1.rfa_tpr
WHERE r1.rfa_tpr = 'C'
) j ON j.rfa_tpr = r.rfa_tpr AND r.rfa_idx = j.rfa_idx
ORDER BY CASE WHEN j.rfa_tpr IS NOT NULL THEN  j.IDXP ELSE r.rfa_idx END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T09:13:23.780

解决方法很简单，问题就是问题...

假设去年应该排在第一位并且 rfa_idx 排在 rfa_yea 之后的解决方案。

```
select * from table1 order by rfa_yea desc, find_in_set(rfa_tpr, "C,A"), rfa_idx; 
```

问题是你不应该过分依赖增加 id 和已经提到的设计问题。

马可

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T08:35:53.177

我认为这是一个数据库设计问题。您所说的“行组”除了行的顺序之外没有任何共同点。

如果可能，我建议为这些行组添加一个字段并插入一个公共值。虽然这不是一个方便的解决方案，但我认为数据库设计*应该*反映您希望数据组织的方式。

# mysql - sql查询列值=列值-1

> ID：16077700
> 
> 赞同：0
> 
> 时间：2013-04-18T08:10:24.173
> 
> 标签：mysql, sql, database

我需要从表的每一行的列中取-1，我想知道是否有办法用 SQL 来做到这一点，而不是用 PHP 编写一些东西？

每一行都有一个“分数”列，我需要从每一行的值中减去 -1。

在php中我会使用类似的东西

```
foreach ( $rows as $row ){
     $score = $row->score - 1; 
     $this->update_score($score, $row->id);
} 
```

但是要更新 3000 多条记录，一定有更好的方法吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:13:23.870

```
UPDATE table_name
SET score = score - 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T08:14:22.833

用简单的方法来做。

```
UPDATE table SET score = score-1 
```

# sql - Oracle 11g：联合所有与 dbms_random

> ID：16077701
> 
> 赞同：0
> 
> 时间：2013-04-18T08:10:31.613
> 
> 标签：sql, function, stored-procedures, oracle11g

我正在尝试在 oracle 11g 中编写 sql 语句，该语句将从具有相同列**的两个不同表的联合中随机选择 5000 条记录：**

```
select * 
  from (
       select ename, job
       from emp1
       union all
       select ename, job
       from emp2
       order by dbms_random.value()
        )
where rownum <= 5000 
```

当运行它时，我得到错误 ORA-01785: ORDER BY item must be the number of a SELECT-list expression。当我删除第二张桌子时，它工作得很好。但是，现在我需要从两个表中随机选择，首先将它们合并，随机排序，然后选择其中的 5000 个。

或者也许有其他方法具有相同的结果？

寻求帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:27:05.103

您的 ORDER BY 仅适用于 UNION ALL 的第二部分 - 您必须先执行 UNION ALL，然后再应用 ORDER BY：

```
select * 
  from (
    select * from (
       select ename, job
       from emp1
       union all
       select ename, job
       from emp2
    )
    order by dbms_random.value()
)
where rownum <= 5000 
```

# asp.net - 在 aspx 页面中调用方法

> ID：16077708
> 
> 赞同：1
> 
> 时间：2013-04-18T08:11:05.377
> 
> 标签：asp.net, methods

我可以调用一个在 asp.net 网页中的方法（在 aspx.cs 页面中）而不在页面加载中检查它吗？

例如'../test2.aspx/TestMethod

在[此链接](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)中，我注意到我们可以在 jquery ajax 方法中提供 url：“PageName.aspx/MethodName”。我已经尝试过了，但从来没有为我工作过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:26:05.787

页面方法是 ASP.Net 应用程序中的一种新机制，其中服务器代码绑定到 Asp.Net 页面

要启用页面方法，我们需要将 ScriptManager 控件拖到页面并将
EnablePageMethods 标记为“True”。

```
 <asp:ScriptManager ID="ScriptManager1" runat="server"   
         EnablePageMethods="True">
    </asp:ScriptManager> 
```

转到页面的代码隐藏文件并添加一个静态方法

```
 [WebMethod]
    public static string HelloWorld(string name)
    {
       return string.Format("Hi {0}",name);
    } 
```

在javascript函数中我们可以使用PageMethods对象来调用页面的WebMethod。

```
 <script type="text/javascript">
    function GreetingsFromServer() {
       var name = 'Jalpesh';
       PageMethods.HelloWorld(name,OnSuccess, OnError);
       return false;
   }
   function OnSuccess(response) {
       alert(response);
   }
   function OnError(error) {
       alert(error);
   }
   </script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T10:47:26.783

您可以使用 ajax 调用另一个页面 webmethod

```
$(document).ready(function() {
// Add the page method call as an onclick handler for the div.
  $("#Result").click(function() {
  $.ajax({
         type: "POST",
         url: "Default.aspx/GetDate",
         data: "{}",
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         success: function(msg) {
         // Replace the div's content with the page method's return.
         $("#Result").text(msg.d);
        }
    });
  });
}); 
```

# struts2 - 没有为命名空间 [/] 和动作名称映射的动作 - Struts 2

> ID：16077709
> 
> 赞同：1
> 
> 时间：2013-04-18T08:11:14.793
> 
> 标签：struts2

## 在 struts 2 中使用注释而不是 XML 时出现此错误。

```
@Namespace("/")
@Result(name = "success", location = "/output.jsp")
public class HelloAnno extends ActionSupport{
    private String name;
   @Action(value = "/annoTest")
    public String execute(){
        return SUCCESS;
    }
@RequiredFieldValidator(message = "Required!")
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

![在此处输入图像描述](https://i.stack.imgur.com/GKAYF.png)

# symfony - Symfony2 可翻译包和最安全的多语言方法

> ID：16077711
> 
> 赞同：2
> 
> 时间：2013-04-18T08:11:21.853
> 
> 标签：symfony

我在 Symfony2 上以特定语言为个人项目开发了一个网站。编程通常需要很长时间，因为我喜欢在开发代码时遵循安全的方法，即使这是最愚蠢的事情。我现在的计划是实施我的目录业务网站 - 比如说乐器公司 - 以便来自世界各地的每个人都可以创建一个帐户并注册他们的业务。

我所做的是，我从头开始实现了所有内容：一个安全包，一些基本实体，如 Business {name, location, phone, email, information, etc.}, BusinessCategory {name, information etc.} 和一些自定义但它们之间的简单关系。用户可以成功注册一个帐户，然后注册他们的业务。我还通过使用 config.yml 中的语言环境和一些自定义的英语翻译，比如中文或西班牙语，为网站上显示的每个单词或短语实现了翻译。用户可以单击“英语”或“西班牙语”链接，所有内容都会被翻译成选定的语言，并且网站别名从 website.com/en 更改为 website.com/es。

我的下一步是：

*   我希望用户能够用英语或西班牙语注册。目前，在 mysql 数据库中该业务只有一个条目，并且仅存在网站文本的翻译。我希望用户能够为相同的字段输入英语数据和西班牙语数据，例如企业的“名称”、地址等。这可能需要 2 个具有不同语言环境和相同业务的条目。

*   我希望网站与当前存在的标签翻译与用户的翻译保持一致。这意味着当您选择“西班牙语”时，您将获得所有翻译成西班牙语和该业务的西班牙语行的内容。

*   我想使用我购买的语言域名 如果可能的话：Website.com、Website.es、Website.it 等。我希望有人在浏览器的地址栏中输入 website.it 并自动获取意大利语的所有内容。

我主要担心的是：

*   如果我使用可翻译的捆绑包，将为每个企业创建一个额外的行。它们将如何连接？我的意思是，ID 为 1234 的 X 业务将是西班牙语，而名称翻译为 Y 的同一个业务将具有 ID 1235。 symfony2 如何知道这两个业务在不同的语言环境中是同一个业务？

*   连接的表会发生什么？用户表链接到业务表，业务表链接到组表。如果我只对 Business 表使用可翻译的扩展，它将如何影响其他的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-16T20:07:14.987

两年前，当我检查它时，我承认并没有深入研究这个问题，所以对答案持保留态度。但：

> 如果我使用可翻译的捆绑包，将为每个企业创建一个额外的行。它们将如何连接？

有几种方法可以在同一数据库中保存多语言数据。

第一个，最简单，最常见的是管理子表。本质上，如果您有一个名为 的表`company`，您将创建和管理另一个表，例如，`company_translations`或按该顺序排列的东西，带有`company_id`和`locale`字段，其中包含已翻译的字段。在应用程序级别，您可以相应地传播属性调用。有时，主表会保存基本语言环境的翻译。这里的一个大问题是额外的连接来获取所有需要的细节。另一个是您失去了在 SQL 级别定义的[排序规则的好处。](https://stackoverflow.com/questions/16538605/utf8-collation-difference-between-unicode-and-danish/16544315#16544315)

另一种方法是将所有内容都放在同一个表中，同时使用具有该名称的字段保留对语言环境的引用，并将基本语言环境作为某种`parent_id`. 这里的理由是，不管怎样`tags`，`sectors`你需要的任何东西都需要翻译，所以不妨把所有东西都扔进去。但诚然，这种情况不太常见。这里最大的问题是，您也失去了在 SQL 级别定义的排序规则的好处。

另一种方法是让不同的表集以区域设置为前缀或存在于特定于区域设置的模式中。因此，前者的变体没有引入与排序相关的问题，但代价是在应用程序级别引入了对表前缀或搜索路径的担忧。

最后一个选项是完全不用担心，为每个语言环境创建完全不同的表集——本质上是一个新应用程序。无论它们是在单独的（和独立的）模式还是数据库中都无关紧要。（Fwiw，这是我的首选方法；见下文。）

如果没记错的话，Doctrine 会使用这些方法中的第一种，并在主表中使用基本语言环境——但通过测试和查看一组已翻译表的结构来仔细检查以确保。

> 我的意思是，ID 为 1234 的 X 业务将是西班牙语，而名称翻译为 Y 的同一个业务将具有 ID 1235。 symfony2 如何知道这两个业务在不同的语言环境中是同一个业务？

见上文，但请注意，除非您正在为居住在美国的西班牙裔人口建立一个网站，否则这可能是您最不担心的问题——即使如此，恕我直言，担心它是值得怀疑的。

这里要记住的一点是，如果您`en_US`向用户提供网站的逐字副本`es_MX`，那么您很可能在营销/传播方面做了一些非常错误的事情：您根本不会与这两个群体进行相同的沟通方法。一种论点可能迎合其中一种人群而推迟另一种论点，例如“Gringos no son bienvenidas”。此外，如果您在不存在适当的翻译时回退到为意外的语言环境提供服务，那么您可以说是在损害您的听众。

> 连接的表会发生什么？用户表链接到业务表，业务表链接到组表。如果我只对 Business 表使用可翻译的扩展，它将如何影响其他的？

见第一点。从好的方面来说，Doctrine 的行为会为你解决这个问题。不利的一面是，您通过使用行为引入了额外的连接。

我建议的替代方法是使用两组独立的表，并根据会话的语言环境配置 Doctrine 获取数据的位置。但这是非常个人的观点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-17T14:06:05.273

我是另一个 php 5.4+ 库的作者，它允许翻译实体字段。

**第 1 点**：看看[https://github.com/knplabs/doctrinebehaviors#translatable](https://github.com/knplabs/doctrinebehaviors#translatable)

它的实现类似于您使用的学说扩展（也使用侦听器），但方法不同。

这里所做的更接近于 OOP 和通常学说的 和 之间的 oneToMany `Buisness`关系`BuisnessTranslation`。

然后使用存储在特征中的简单 API 完成正确的翻译检索。

**第 2 点**：使用`_locale`symfony2 的本机处理方法，在您的 url 中添加此占位符：http: [//symfony.com/doc/current/book/translation.html#the-locale-and-the-url](http://symfony.com/doc/current/book/translation.html#the-locale-and-the-url)

**第 3 点**：使用主机配置路由来定义`_locale`占位符

[http://symfony.com/doc/2.2/components/routing/hostname_pattern.html](http://symfony.com/doc/2.2/components/routing/hostname_pattern.html)

**关注点 1**：如果您执行正确的关系数据，则不应有 2 个单独的行代表同一实体。您应该有一个拥有许多 BuisnessTranslations 的 Buisness 实体（每个语言环境一个）。

此 BuisnessTranslation 表将**仅**包含特定于语言环境的数据（名称、描述、...）

**关注点 2**：您必须将 Buisness 和 BuisnessTranlsation 表连接在一起才能获取 whoe 数据。

# math - Three.js 精密地形碰撞

> ID：16077725
> 
> 赞同：3
> 
> 时间：2013-04-18T08:12:08.023
> 
> 标签：math, three.js, game-engine, collision, terrain

一直在使用 WebGL 库 Three.js 开发游戏引擎。我有基本的地形碰撞工作到我可以找到用户站立的脸的地步。使用面顶点的平均或最大 Y 位置是不够的。

我可以使用什么公式来找到对象相对于“站立”的地形面的确切 Y 位置？假设我知道四个顶点位置和对象矢量位置。

![在此处输入图像描述](https://i.stack.imgur.com/U75PC.png)

该平面是由高度图增强的 THREE.PlaneGeometry(2000,2000,128,128)。上图是其中一张脸。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T11:36:29.927

我无法将代码放在评论中，所以我把它放在这里。你不需要做数学。让three.js 为您完成。您可以执行以下操作：

```
var plane = new THREE.Plane();
plane.setFromCoplanarPoints (v1, v2, v3);

// x, y, z: position of your object
var ray = new THREE.Ray (new THREE.Vector3(x, y, z), new THREE.Vector3(0, 1, 0));
var where = ray.intersectPlane (plane); 
```

并从 Vector3 'where' 使用 y 组件来更改对象的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-10T19:40:05.800

你可以很容易地找到你的对象站立的脸的高度

```
const down = new THREE.Vector3(0, -1, 0);
const raycaster = new THREE.Raycaster();

raycaster.set(obj.position, down);
const collisionResults = raycaster.intersectObject(terrain);

if (collisionResults.length > 0 && collisionResults[0].distance > 0)
   const pointHeight = collisionResults[0].point.y; 
```

此时只需从对象的 y 坐标中减去 pointHeight 即可获得相对高度。

```
const relativeHeight = obj.position.y - pointHeight; 
```

# java - jar 文件不工作 java.lang.NoClassDefFoundError

> ID：16077732
> 
> 赞同：0
> 
> 时间：2013-04-18T08:12:36.387
> 
> 标签：java, classpath, environment-variables, manifest, java-3d

当我在 cmd 中运行 jar 文件时，出现此错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: javax/media/j3d/Canvas3D 
```

当我使用`java -cp . Main`并且`java -jar BallJump.jar`我相当确定我设置了正确的类路径时都会发生这种情况，所以我不知道为什么会收到此错误消息。

这是我的 Manifest.txt：

```
Main-Class: Main
Class-Path: .;"C:\Program Files\Java\Java3D\1.5.2\lib\ext\j3dcore.jar";"C :\Program Files\Java\Java3D\1.5.2\lib\ext\j3dutils.jar";"C:\Program Files\Java\Java3D\1.5.2\lib\ext\vecmath.jar" 
```

我试图替换所有的“；” 按照答案中的建议，使用“”并将“添加到类路径中，但没有一个有效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:23:54.903

这是因为`javax.media.j3d.Canvas3D`JVM 找不到该类，但您的类已编译为引用它。

从快速搜索来看，这个类似乎是 的一部分，`j3dcore.jar`您在运行时（以及编译时）在类路径中需要它。这是 Java 3D API 的一部分：

[http://www.oracle.com/technetwork/java/javase/tech/index-jsp-138252.html](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-138252.html)

所以我会得出结论，您的清单类路径以某种方式错误地指定。您应该查看清单 doco 以检查您是否做错了什么：

[http://docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html](http://docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html)

**2013-04-18 更新**

> 我的清单类路径如何不正确？

阅读清单教程，我看到类路径元素应该用*空格*分隔；你有分号。

此外，行长限制为 72 个字符；你的类路径行远远超过了这个。

`C`中的驱动器号后面还有一个空格`"C :\Program Files..."`。

请注意，它必须是 UTF-8 编码的。

你可以试试：

```
Main-Class: Main
Class-Path: 
 .
 "C:\Program Files\Java\Java3D\1.5.2\lib\ext\j3dcore.jar"
 "C:\Program Files\Java\Java3D\1.5.2\lib\ext\j3dutils.jar"
 "C:\Program Files\Java\Java3D\1.5.2\lib\ext\vecmath.jar" 
```

（注意类路径元素上的前导空格。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:22:23.247

尝试替换“;” 带有“”空间的分号用于分隔你的罐子`manifest.mf`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:15:37.497

尝试`"`在您的类路径中使用

```
Class Path: .;"C:\Program Files\Java\Java3D\1.5.2\lib\ext\j3dcore.jar";"C
 :\Program Files\Java\Java3D\1.5.2\lib\ext\j3dutils.jar";"C:\Program Fil
 es\Java\Java3D\1.5.2\lib\ext\vecmath.jar" 
```

因为空间有问题

# c# - 如何在文件上传控件中获取文件类型？

> ID：16077733
> 
> 赞同：4
> 
> 时间：2013-04-18T08:12:42.217
> 
> 标签：c#, asp.net

我用于文件上传控制。我得到了`CreateDataBase.docx`. `fileType`现在我想要`docx`

我有 `CreateDataBase.docx` 。我只想要这个文件类型或者我想删除`CreateDataBase`

**我有很多 xml、pdf、docx 等文件。**.所以**我想要点（。）的文件类型或下一个字符**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T08:21:25.090

你可以简单地使用

```
System.IO.Path.GetExtension(FileUpload1.FileName) 
```

或者你可以简单地执行

```
 string[] segments= FileUpload1.FileName.Split(".");
 string fileExt = segments[segments.Length-1] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T08:16:26.727

试试下面的

```
 String FileExtension =System.IO.Path.GetExtension(FileUpload1.FileName); 
```

# c# - 什么是静态索引器？

> ID：16077734
> 
> 赞同：3
> 
> 时间：2013-04-18T08:12:50.523
> 
> 标签：c#, .net

一位面试官问我这个问题，我对这个术语感到困惑，因为我了解什么是“静态”成员，并且我熟悉“索引”的概念，但究竟是什么意思`static indexer`？我自己进行了一些搜索，但无法找到令人满意的定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:53:21.397

**静态索引器在 C# 中是不可能的**

索引器语义需要“this”关键字，它将代码块定义为索引器，并且也是对当前类实例的引用。由于静态索引器没有这样的引用，因此您不能将索引器定义为静态的。这只是我个人的解释，可能还有比这更大的图景。

但是，如果您有特殊需要，索引器只是一种便利——您可以通过方法完成您想做的老式方法。

然而，事实是，索引器不能定义为静态的。

# android - Android AsyncTask 作为方法参数

> ID：16077735
> 
> 赞同：6
> 
> 时间：2013-04-18T08:12:53.383
> 
> 标签：android, parameters, android-asynctask

我正在开发一个使用大量 AsyncTasks 的应用程序。当我开始参与这个应用程序的编码时，targetSdkVersion 设置为 10，因此我们对 AsyncTasks 没有任何问题，因为它们都是在并行后台线程上执行的。由于我们将 targtSdkVersion 设置为 17，因此我们遇到了一些任务问题，因为它们现在在单个后台线程上执行。为了解决这个问题，我找到了以下代码来专门使用并行任务：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    myTask.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
} else {
    myTask.execute();
} 
```

现在，因为我们有几个任务需要这些代码行，所以我想在我们自己的 Utils 类中编写一个方法，以这种方式执行任务......但我无法实现这一点，因为我无法通过由于“参数”，该方法的不同任务作为参数 | 进展 | 结果的东西因一项任务而异。有没有办法实现我们的目标？有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T08:41:03.450

由于`AsyncTask`是参数化类，因此需要使用泛型。像这样的东西：

```
@SuppressLint("NewApi")
static <P, T extends AsyncTask<P, ?, ?>> void execute(T task, P... params) {
  if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, params);
  } else {
   task.execute(params);
  }
} 
```

像这样使用：

```
MyAsyncTask task = new MyAsyncTask();
Utils.execute(task); 
```

# ruby - 对字符串中的数字执行数学运算

> ID：16077736
> 
> 赞同：-1
> 
> 时间：2013-04-18T08:12:57.247
> 
> 标签：ruby

给定一个包含逗号分隔数字的字符串，是否可以对它们执行数学运算？

例如，我如何获取字符串`"123,456,789"`，从中提取数字，并执行类似`123 + 456`or的操作`456 - 123`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:28:07.683

您可以使用`inject`、`split`和`map`方法，例如：

```
"123,32,3,4,5,6, 2,34".split(",").map(&:to_i).inject(&:+) 
```

您也可以使用 eval，但`eval`速度慢且耗时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:19:18.450

您可以在数组中拆分字符串，通过使用`split(',')` 现在，您可以`to_i`与任何数组元素一起使用。希望它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:39:48.330

由于您只是在胡闹，您可以使用`eval`和`gsub`

```
>> eval '123,456,789'.gsub(',', '*') # 44253432
>> eval '123,456,789'.gsub(',', '+') # 1368
>> eval '123,456,789'.gsub(',', '-') # -1122 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-18T08:17:21.400

干得好：

```
s = "123,456,789"

s.split(',').reduce(0) do |result, number|
  result = result + number.to_i
end 
```

将块内的标志`reduce`从`+`to`-`或任何您需要的更改。

# c# - 在 C# 中使用正则表达式和 lambda 将复杂字符串拆分为类列表

> ID：16077741
> 
> 赞同：0
> 
> 时间：2013-04-18T08:13:10.560
> 
> 标签：c#, regex, lambda

给定字符串“a:b,c”，我想在 C# 中使用正则表达式和 lambda 表达式将字符串拆分为类列表，以便返回以下内容。

```
{
    Column1: "a",
    Column2: "b",
},
{
    Column1: "a",
    Column2: "c",
} 
```

换句话说，我想为冒号后面的每个逗号分隔值重复冒号之前的值。在 SQL 中，这相当于进行交叉连接，其中 Column1 是连接的左侧，而 Column2 是连接的右侧。

我有大部分代码，包括正则表达式，但我无法将逗号分隔值的第二个`select`投影`split`到新类中。相反，我的代码有效地返回以下内容。

```
{
    Column1: "a",
    Column2: [
        "b",
        "c"
    ]
} 
```

这是我的代码，就目前而言。

```
public class MyClass {
    public string Column1 { get; set; }
    public string Column2 { get; set; }
}

List<MyClass> mc = "a:b,c"
    .Select(a => new { Column1 = new Regex(@"[a-z]+(?=\:)").Match(a).Value), Column2s = new Regex(@"(?<=\:)[a-z]+(,[a-z]+)*").Match(a).Value })
    .Select(b => new MyClass { Column1 = b.Column1, Column2 = b.Column2s.Split(',') })
    .ToList(); 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:27:14.883

```
string input = "a:b,c";

int colon = input.IndexOf(':');
string left = input.Substring(0, colon);
string right = input.Substring(colon + 1);

List<MyClass> result = right.Split(',')
                            .Select(x => new MyClass
                            {
                                Column1 = left,
                                Column2 = x,
                            })
                            .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:17:06.433

肯定存在其他解决您的问题的方法。你可以试试这个：

```
 [Test]
    public void ATest()
    {
        const string TestValue = "a:b,c";

        string valueForColumnA = new Regex(@"[a-z]+(?=\:)").Match(TestValue).Value;
        string setForColumnB = new Regex(@"(?<=\:)[a-z]+(,[a-z]+)*").Match(TestValue).Value;
        var target = setForColumnB.Split(',')
            .Select(item => new MyClass { Column1 = valueForColumnA, Column2 = item })
            .ToList();

        Assert.AreEqual(target[0].Column1, "a");
        Assert.AreEqual(target[0].Column2, "b");

        Assert.AreEqual(target[1].Column1, "a");
        Assert.AreEqual(target[1].Column2, "c");
    } 
```

不使用正则表达式（就性能而言）可能是更好的解决方案，但是，如果您将其指定为要求，则此解决方案有效。

# linux - 如何自动化 vnc+ssh 解决方案

> ID：16077752
> 
> 赞同：0
> 
> 时间：2013-04-18T08:13:28.417
> 
> 标签：linux, bash, ssh, vnc

我想在我的工作机器上运行一个应用程序（称之为 firefox）。问题是我需要做一些复杂的 ssh 调谐来访问它，因为从外部阻止了对机器的访问，并且一些端口也在内部被阻止。所以我做了以下。

```
ssh -v -L 1200:serverC:22 user@serverB (locally)
ssh -v -L 5900:127.0.0.1:5900 -p 1200 user_from_serverC@127.0.0.1 (locally)
x11vnc -safer -localhost -nopw -once -display :0 (on serverC)
vinagre localhost::5900 (locally) 
```

然后我在打开的 vnc 窗口中运行 firefox（比如说），一切正常。

但是我想要一个 bash 脚本来为我做这件事。我怎样才能自动化它？

有两个问题。

1.  我需要在上面的每个 ssh 之后保持登录，以便调谐工作，所以一个简单的 bash 脚本在第一步之后就停止了。
2.  我不知道如何让应用程序在 vnc 窗口中自动运行。

理想情况下，我只需在本地键入“./remote-firefox”（例如）即可让这一切发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:18:01.723

尝试：

```
x11vnc -safer -localhost -nopw -once -display :0 #Run manually on system_C 
```

& 在本地系统上，

```
ssh -t -L 5902:localhost:5901 user_B@server_B 'ssh -t -L 5901:localhost:5900 user_C@server_C' &
#Note: Enable password-less (key based) authentication from "your_pc -> servB" & "servB -> servC"

vncviewer localhost:2 #Run on local system 
```

**注意：**如果命令失败，请尝试更改端口号。在此示例中，我尝试将其隧道化，如下所示：

```
your_PC:5902 <-> server_B:5901 <-> server_C:5900 
```

* * *

我还没有测试过这个 2 级链（我不知道 x11vnc 的`-display`参数是否适用于 ssh，但我认为它应该。）：

```
#Run both lines on local system
ssh -t -L 5902:localhost:5901 user_B@server_B "ssh -t -L 5901:localhost:5900 user_C@server_C 'x11vnc -safer -localhost -nopw -once -display :0'" &
vncviewer localhost:2 
```

**编辑：** 为了适应这个：

> > 对，就是那样。但烦人的 servB -> servC 已阻塞端口 5900。– 阿努什

```
#Run both lines on local system. This may be overhead, but should work.
ssh -t -L 5902:localhost:5901 user_B@server_B "ssh -t -L 5901:localhost:1200 user_C@server_C 'ssh localhost -L 1200:localhost:5900 & x11vnc -safer -localhost -nopw -once -display :0'" &
vncviewer localhost:2 
```

# c# - 在 C# 中创建全局函数

> ID：16077754
> 
> 赞同：0
> 
> 时间：2013-04-18T08:13:35.280
> 
> 标签：c#, asp.net, function, global

对 C# 完全陌生，所以请耐心等待。

我有一个带有 2 个链接的应用程序。1 个链接供任何人查看，1 个链接仅供特定人员查看。代码和文件和一切都完全相同，唯一的区别是如果链接中包含某个字符串，它会使用 jquery 隐藏页面的某些区域。

所以，我有很多不同的 cshtml 页面，我不想重写用于检查用户名和重定向的逻辑，是否在每个页面中重定向。

我知道如何获取用户名，检查名称是否在“特殊列表数组”中，如果没有则重定向到适当的网站......只是不知道如何有效地做到这一点。如果 1 人被添加到数组中，目前我必须在每一页上更新数组。

有没有地方可以放置函数并在每个 cshtml 页面上调用它？

```
string userName = Environment.UserName;  // System.Security.Principal.WindowsIdentity.GetCurrent().Name;
string[] arr1 = new string[] { "one", "two", "three" };
bool inArray = false;
for (int i = 0; i < arr1.Length; i++)
{
    if (userName == arr1[i]){
        inArray = true;
    }
}
if(inArray)
{
    Response.Redirect("link1");
}
else
{
    Response.Redirect("link2");
} 
```

# google-app-engine - 发出“appcfg.py --oauth update”。有多个帐户？

> ID：16077759
> 
> 赞同：3
> 
> 时间：2013-04-18T08:13:55.673
> 
> 标签：google-app-engine, oauth, multiple-accounts

我为我拥有的一个帐户*my.first.email@gmail.com*配置了 OAuth 。它与我用于该帐户的 Appengine app_ids 完美配合。

但是，一旦我尝试在另一个帐户的应用程序“foo”上使用它（例如*my.second.email@gmail.com*），系统就会给我一个错误（非常预期）：

```
$ appcfg.py --oauth2 update .
10:09 AM Host: appengine.google.com
10:09 AM Application: foo; version: 100
10:09 AM Starting update of app: foo, version: 100
10:09 AM Getting current resource limits.
10:09 AM Scanning files on local disk.
Error 404: --- begin server output ---
This application does not exist (app_id=u'foo'). 
```

是否可以通过 App Engine 为*两个*（或更多）帐户使用 OAuth？我希望能够同时为两个帐户使用 OAuth，也许可以用两个不同的令牌更改 CLI 命令。

谢谢，里卡多

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-31T22:58:59.573

试试这个 appcfg.py 的秘密命令行选项：

```
appcfg.py --oauth2 --oauth2_credential_file=~/.appcfg_oauth2_tokens_personal update . 
```

通过查看 /usr/local/google_appengine/google/appengine/tools/appcfg.py 找到了这个选项。这应该允许您为不同的帐户使用不同的凭据文件，您可能希望为命令起别名以便于在 shell 中键入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-17T16:07:53.763

使用 gcloud 命令在多个帐户之间进行切换。

**添加新帐户：**

```
gcloud auth login 
```

完成登录过程

**将上述帐户设置为默认帐户（或只是切换帐户）：**

```
 gcloud config set account username@gmail.com 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-08T02:11:46.030

要基于[@Ryu_hayabusa](https://stackoverflow.com/users/1658975/ryu-hayabusa)的[建议](https://stackoverflow.com/a/24808505/699026)，请将其添加到您的`.bashrc`或`.bash_profile`帐户之间更方便地切换：

```
function gcauth() { email="$@"; gcloud config set account $email; echo "Updated GCloud auth to $email"; }

# set up functions for specific email addresses:
function gcwork() { gcauth work@email.com; }
function gcperso() { gcauth personal@email.com; } 
```

然后您可以非常轻松地在工作帐户和个人帐户之间切换，例如：

```
$ gcwork
Updated GCloud auth to work@email.com
$ gcperso
Updated GCloud auth to personal@email.com 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-16T15:27:01.927

如果您想从客户端登录（现在已永久弃用）转移，只需使用 --oauth2 更新，您的应用程序将被部署 -

```
python appcfg.py update --oauth2 /path/to/app 
```

使用客户端登录会给您以下错误 - 错误 404：--- 开始服务器输出 --- [https://developers.google.com/accounts/docs/AuthForInstalledApps](https://developers.google.com/accounts/docs/AuthForInstalledApps) --- 结束服务器输出 ---

# security - 网站的 Paypal Express Checkout API vs PayPal 按钮

> ID：16077760
> 
> 赞同：1
> 
> 时间：2013-04-18T08:13:58.420
> 
> 标签：security, button, paypal

网站的 PayPal 按钮和 Express Checkout API 有什么区别？为什么要使用 API 而不是按钮？它提供了哪些附加功能/其他优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:35:26.560

网站付款标准使用您在帐户中创建的 HTML 按钮，而 Express Checkout 将使用 API 调用来完成付款。您还可以通过 Express Checkout 更好地控制结帐流程，因为买家在完成付款后会回到您的网站。您可以在您的网站上计算运费和税金。您可以使用 Express Checkout 并行付款在不同帐户之间拆分付款，而网站付款标准则不能。

大多数商家喜欢这样一个事实，即您可以比使用网站支付标准按钮更好地控制结帐流程。例如，您可以将买家直接引导至结帐页面上的信用卡部分，或者您可以将他们发送到 PayPal 登录部分。使用网站付款标准，您无法做到这一点。它依赖于cookies，你无法用标准来控制它。

# windows-phone-8 - 单击按钮后没有任何反应

> ID：16077764
> 
> 赞同：0
> 
> 时间：2013-04-18T08:14:07.363
> 
> 标签：windows-phone-8

首先，问题标题可能有点无关紧要。我不知道如何给这个小烂摊子起个标题。几天前我开发了一个简单的 windows phone 8 应用程序。今天我刚刚将必要的图像添加到项目中，以便在应用商店中提交。当我尝试在发布模式下构建时，编译器`App.xaml.cs`在这一行的文件中给了我一个异常：

```
PhoneApplicationService.Current.UserIdleDetectionMode = IdleDetectionMode.Disabled; 
```

然后我注释掉这一行只是为了检查 & 之后我的应用程序正在运行。单击主页中的按钮后，应用程序进入空闲模式并且它不会导航到其他页面。页面导航代码：

```
NavigationService.Navigate(new Uri("/Category.xaml?", UriKind.RelativeOrAbsolute)); 
```

谁能告诉我这里发生了什么？

# google-places-api - 将 PHP/MySQL 与带有自动完成搜索框的 Google 地图一起使用

> ID：16077765
> 
> 赞同：0
> 
> 时间：2013-04-18T08:14:11.093
> 
> 标签：google-places-api

我正在使用[https://developers.google.com/maps/articles/phpsqlajax_v3](https://developers.google.com/maps/articles/phpsqlajax_v3)

```
 <!DOCTYPE html >
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Consultants Map</title>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
    //<![CDATA[

    var customIcons = {
      restaurant: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      },
      bar: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      }
    };

    function load() {
      var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(46.80, -100.78),
        zoom: 4,
        mapTypeId: 'roadmap'
      });
      var infoWindow = new google.maps.InfoWindow;

      //autocomplete.bindTo('bounds', map);

      // Change this depending on the name of your PHP file
      downloadUrl("consultants_maps.php", function(data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
          var name = markers[i].getAttribute("name");
          var address = markers[i].getAttribute("address");
          var type = markers[i].getAttribute("type");
          var point = new google.maps.LatLng(
              parseFloat(markers[i].getAttribute("lat")),
              parseFloat(markers[i].getAttribute("lng")));
                var html = "<b>" + name + "</b> <br/>"  + address;

          var icon = customIcons[type] || {};
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
          });
          bindInfoWindow(marker, map, infoWindow, html);
        }
      });
    }

    function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function doNothing() {}

    //]]> </script></head><body onload="load()">
    <div id="map" style="width: 1280px; height: 720px"></div>
  </body>
</html> 
```

此外，这里是 php 代码：

```
<?php
require_once('wp-config.php');
require_once('wp-load.php');
require_once('wp-includes/wp-db.php');

    global $wpdb;
    $table_name     = $wpdb->prefix . "consultants_map";

$dom = new DOMDocument("1.0");
$node = $dom->createElement("markers");
$parnode = $dom->appendChild($node); 

$query = "SELECT * FROM $table_name WHERE 1";
$result = mysql_query($query);

header("Content-type: text/xml"); 

// Iterate through the rows, adding XML nodes for each

while ($row = @mysql_fetch_assoc($result)){  
  // ADD TO XML DOCUMENT NODE  
  $address = $row['kt_number'] . "<br />" . $row['address'];
  $node = $dom->createElement("marker");  
  $newnode = $parnode->appendChild($node);   
  $newnode->setAttribute("name",$row['name']);
  $newnode->setAttribute("address", $address);  
  $newnode->setAttribute("lat", $row['lat']);  
  $newnode->setAttribute("lng", $row['lng']);  
  //$newnode->setAttribute("type", $row['type']);
} 

echo $dom->saveXML();

?> 
```

它对我来说工作正常

但我想在这里添加自动完成文本框功能 [https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)

我怎样才能将这两个代码结合在一个地方？？？

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:33:45.750

按照您在[https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)链接到的确切示例，您可以注意到您缺少的关键位：

1.  加载`places`库`libraries`时添加（[https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places](https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places)）
2.  创建您的自动完成对象`var autocomplete = new google.maps.places.Autocomplete(document.getElementById('searchTextField'));`
3.  `autocomplete.bindTo('bounds', map);`然后绑定

照顾好上述内容应该允许所有功能通过。

您还应该添加一个事件侦听`google.maps.event.addListener(autocomplete, 'place_changed', function() { ...`器，该侦听器在您的位置更改时触发，并`autocomplete.getPlace()`获取`place`包含有关所选位置的大量信息的对象。只需按照您找到的链接中的示例获取更多详细信息和示例。

# python - 行替换两个值 python django

> ID：16077768
> 
> 赞同：0
> 
> 时间：2013-04-18T08:14:17.670
> 
> 标签：python, django

我想在同一个文件中替换 2 个值。我想搜索 'input="Default"' 并将其值替换为 'This' 并将 pattern="Default" 替换为 'Now'。我创建了 tmp 表单，我的代码在其中读取值并写入另一个文件。对 django 和 python 来说是新手。目前它正在写入一个值。

视图.py

```
with open('/home/usr/dev/Django/rulebase/test_pattern_tmp.rb', 'r') as pattern_reading:
   lines = [line.replace('pattern = "Default"','Now') for line in pattern_reading.readlines()]
   lines = [line.replace('input = "Default"','This') for line in pattern_reading.readlines()]
with open('/home/usr/dev/Django/rulebase/test_pattern.rb', 'w') as pattern_reading:
   pattern_reading.writelines(lines) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:17:24.947

解决方案是：

```
with open('/home/usr/dev/Django/rulebase/test_pattern_tmp.rb', 'r') as pattern_reading:
    with open('/home/usr/dev/Django/rulebase/test_pattern.rb', 'w') as pattern_writing:
        for line in pattern_reading:
            out=line.replace('pattern="Default"','Now').replace('input="Default"','This')
            pattern_writing.write(out) 
```

你好，有两个问题：

1.  您正在将整个文件读入内存（这不一定是错误）
2.  一个文件对象可以被认为是一个迭代器。一旦您在第一次迭代中到达文件末尾，第二次迭代什么也不做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:16:53.930

它写一个值，因为您的`lines`列表仅包含最后一个替换；你需要`lines`在你替换的第二个语句中循环`input = "Default"`。

# android - 如何显示从 SOAP ListView 检索到的数据？

> ID：16077774
> 
> 赞同：0
> 
> 时间：2013-04-18T08:14:46.880
> 
> 标签：android

欢迎 我在添加从`SOAP`. 当您创建`ListView`弹出以下错误时：

```
04-06 00:12:47.852: W / dalvikvm (4092): threadid = 1: thread exiting with uncaught exception (group = 0x409c01f8) 
04-06 00:12:48.123: E /AndroidRuntime (4092): FATAL EXCEPTION: main 
04-06 00:12:48.123: E /AndroidRuntime (4092): android.content.res.Resources $NotFoundException: Resource ID # 0x7f08000c type # 0x12 is not valid 
```

不明白发生了什么。

请帮助解决问题并解释调用错误时发生的情况。

```
package com.example.pit_testy;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

import org.json.JSONObject;

import android.os.Bundle;
import android.os.CountDownTimer;
import android.app.Activity;
import android.content.Intent;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;

import com.example.pit_testy.R;
import com.example.pit_testy.soap.AsyncTaskManager;
import com.example.pit_testy.soap.GetSoapTaskTest;
import com.example.pit_testy.soap.OnAsyncTaskCompleteListener;
import com.example.pit_testy.soap.PitTestyMsg;
import com.example.library.UserFunctions;

public class TestyActivity extends Activity {

    UserFunctions userFunctions;

    private Button buttonWynik, buttonStartTest;
    private CountDownTimer testTotalClock;
    private long initialTotalTime = 300000;
    private long intervalSecondTime = 1000;
    private AsyncTaskManager taskMenager;
    private TextView textClock, textQuestion;
    private ListView listQuestions;
    private ArrayAdapter<String> listAdapter;
    private ArrayList<String> arrayListQuestions;
    private String categoryID = "0";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_testy);

        taskMenager = new AsyncTaskManager(this);

        textClock = (TextView)findViewById(R.id.textTimer);
        textClock.setText("Czas start!");
        textQuestion = (TextView)findViewById(R.id.textTrescPytania);
        textQuestion.setText("Treść pytania");

        testTotalClock = new CountDownTimer(initialTotalTime, intervalSecondTime) {

            @Override
            public void onTick(long millisUntilFinished) {
                Integer milisec = new Integer(new Double(millisUntilFinished).intValue());
                Integer cdSecs = milisec / 1000;
                Integer minutes = (cdSecs % 3600) / 60;
                Integer seconds = (cdSecs % 3600) % 60;

                textClock.setText(minutes.toString()+":"+seconds.toString());
            }

            @Override
            public void onFinish() {
                textClock.setText("Koniec czasu!");

                userFunctions.logoutUser(getApplicationContext());
                Intent nextView = new Intent(getApplicationContext(), WynikActivity.class);

                nextView.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(nextView);

            }
        };  

        loadTest(categoryID); // wybór kategorji

        buttonStartTest = (Button)findViewById(R.id.buttonStart);
        buttonStartTest.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                testTotalClock.start();             
                textQuestion.setText("Jak masz na imie?");
            }
        });     

        buttonWynik = (Button)findViewById(R.id.buttonWynik);
        userFunctions = new UserFunctions();
        buttonWynik.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

                testTotalClock.cancel();

                userFunctions.logoutUser(getApplicationContext());
                Intent nextView = new Intent(getApplicationContext(), WynikActivity.class);

                nextView.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(nextView);
            }
        });

        testTotalClock.cancel();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.testy, menu);
        return true;
    }

    private void loadTest(String category) {
        Map<String, String> map = new HashMap<String, String>();
        map.put("aid", "1");
        map.put("categories", category);

        GetSoapTaskTest task = new GetSoapTaskTest();
        taskMenager.executeTask(task, GetSoapTaskTest.createRequest("getCategories", new JSONObject(map).toString()), "Wykonano executeTask", 
            new OnAsyncTaskCompleteListener<PitTestyMsg>() {

                ArrayList<String> arrayListQuestions = new ArrayList<String>();

                @Override
                public void onTaskCompleteSuccess(PitTestyMsg result) {
                    if (result.errorCode == 0){
                            for (Map <String, String> var : result.data) {
                            Log.i("SoapCategories", "Testy pobrane = " + var.get("name"));
                            arrayListQuestions.add(var.get("name"));

                        }

                        taskMenager.onPostExecute(arrayListQuestions);

                        Intent mainTest = new Intent(getApplicationContext(), TestyActivity.class);
                        startActivity(mainTest);

                    }else{
                        Log.i("SoapCategories", "Testy niepobrane");
                    }
                }

                @Override
                public void onTaskFailed(Exception cause) {
                    Log.e("Soap", cause.getMessage(), cause);

                }

        });
    }

}

public final class AsyncTaskManager implements IProgressTracker {

    private final ProgressDialog progressDialog;

    private ListView listQuestions;
    private ArrayAdapter<String> listAdapter;
    private Context myContext;

    public AsyncTaskManager(Context context) {
        myContext = context;
        this.progressDialog = new ProgressDialog(context);
        this.progressDialog.setCancelable(false);
        this.progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    }

    /**
     * Executes a task in the background thread, while displaying a busy dialog (non cancellable).
     * 
     * @param task
     *            {@link AbstractProgressableAsyncTask}
     * @param request
     *            request for the background task
     * @param progressLabel
     *            label to be displayed when the progress dialog is being displayed.
     * @param onTaskCompletedListener
     *            {@link OnAsyncTaskCompleteListener} to be notified once the task is completed.
     */
    public <T, P> void executeTask(AbstractProgressableAsyncTask<P, T> task, P request, CharSequence progressLabel,
            OnAsyncTaskCompleteListener<T> onTaskCompletedListener) {
        this.progressDialog.setMessage(progressLabel);

        task.setOnTaskCompletionListener(onTaskCompletedListener);
        //task.setProgressTracker(this);
        task.execute(request);
    }

    // ------------------------------------------------------------------------
    // Progress Handlers
    // ------------------------------------------------------------------------

    @Override
    public void onStartProgress() {
        progressDialog.show();
    }

    @Override
    public void onStopProgress() {
        progressDialog.dismiss();
    }

    @Override
    public void onPostExecute(ArrayList<String> list){
        listAdapter = new ArrayAdapter<String>(myContext, R.id.listaPytan, list);
        listQuestions = (ListView)((Activity) myContext).findViewById(R.id.listaPytan);
        listQuestions.setAdapter(listAdapter);
        Log.i("ListView", "Lista wyswietlona");
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T13:55:00.623

您应该按以下方式使用 ArrayAdapter

`new ArrayAdapter<String>(myContext, android.R.layout.simple_list_item_1, list)`

代替

`new ArrayAdapter<String>(myContext, R.id.listaPytan, list)`

[更多信息](https://stackoverflow.com/questions/3663745/what-is-android-r-layout-simple-list-item-1)

# sockets - java web服务器向浏览器发送连续响应但在客户端关闭时不关闭套接字

> ID：16077776
> 
> 赞同：0
> 
> 时间：2013-04-18T08:14:53.257
> 
> 标签：sockets

我正在使用来自客户端的编程来制作一个辅助程序`server`。这里的客户端不是客户端程序。 接受来自的请求并使用. 作为响应，当用户关闭或更改选项卡或最小化时，Web 服务器将连续发送到浏览器作为出现 问题。然后服务器无法检测浏览器状态。`socket``java``multiple request``browser``Server``browser``Thread``data``streaming``browser``browser``socket`

为什么数据会不断地通过`server`程序发送到`socket`浏览器最小化时。我们如何检测 Java 套接字上的浏览器状态意味着选项卡、关闭或最小化。

我想知道如何`Apache tomcat`检测浏览器是否打开或关闭或浏览器中的选项卡更改。

# excel - VBA 防止用户仅参考初始单元格值更改单元格值

> ID：16077777
> 
> 赞同：1
> 
> 时间：2013-04-18T08:14:53.433
> 
> 标签：excel, vba, onchange

我试图阻止用户更改某些字段。但是我不知道这些字段将在哪些列中，只知道它们最初包含的值。

我目前的做法是这样的：

```
Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)    
    Dim columnHeaderRange As Range
Set shtData = Worksheets("Data")     
Set columnHeaderRange = Union(shtData.Columns(ColumnNumber(5, "example1")), _
                         shtData.Columns(ColumnNumber(5, "example2")), _
                         shtData.Columns(ColumnNumber(5, "example3")))    
Set columnHeaderRange = Application.Intersect(Target, columnHeaderRange)    
    ElseIf Not (columnHeaderRange Is Nothing) Then    
    With Application
        .EnableEvents = False
        .Undo
        MsgBox "Change is not possible.", 16
        .EnableEvents = True
    End With          
Else
    Exit Sub
End If 
```

上面代码中的我的 ColumnNumber 函数将行和字段值作为参数并返回列号。由于我使用的是固定字段值，因此如果字段已更改，则此操作失败，因此我的联合调用失败。

有没有办法在用户尝试更改单元格的值但在更改单元格的实际值之前运行此代码？或者，任何人都可以提出更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:34:09.887

除了我的评论

**例 1**

创建一个名为 的工作表`List`，它将存储您的值。这种方法最好的部分是您不必每次想要从列表中添加/删除项目时都修改代码。

见截图

![在此处输入图像描述](https://i.stack.imgur.com/lKK0A.png)

假设这是你的主要工作表

![在此处输入图像描述](https://i.stack.imgur.com/73hiH.png)

将此代码粘贴到工作表代码区域

```
Dim rngList As Range, aCell As Range
Dim RowAr() As Long

Private Sub Worksheet_Change(ByVal Target As Range)
    Dim i As Long

    On Error GoTo Whoa

    Application.EnableEvents = False

    For Each aCell In Target
        If aCell.Row = 5 Then
            With Application
                For i = LBound(RowAr) To UBound(RowAr)
                    If RowAr(i) = aCell.Column Then
                        MsgBox "Change is not possible."
                        .Undo
                        GoTo Letscontinue
                    End If
                Next
            End With
        End If
    Next

Letscontinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume Letscontinue
End Sub

Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    Dim wsList As Worksheet
    Dim n As Long, lrow As Long

    Set wsList = ThisWorkbook.Sheets("list")

    With wsList
        lrow = .Range("A" & .Rows.Count).End(xlUp).Row
        Set rngList = .Range("A1:A" & lrow)
    End With

    n = 0
    ReDim RowAr(n)

    For Each aCell In Range("5:5")
        If Len(Trim(aCell.Value)) <> 0 Then
            If Application.WorksheetFunction.CountIf(rngList, aCell.Value) > 0 Then
                n = n + 1
                ReDim Preserve RowAr(n)
                RowAr(n) = aCell.Column
                Debug.Print aCell.Column
            End If
        End If
    Next
End Sub 
```

![在此处输入图像描述](https://i.stack.imgur.com/lPT1f.png)

**代码在行动**

![在此处输入图像描述](https://i.stack.imgur.com/U7A7b.png)

**例 2**

这使用硬编码列表。

```
Option Explicit

Dim RowAr() As Long, aCell As Range

Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    Dim MyList As String, MyAr() As String
    Dim n As Long, i As Long

    '~~> This is the list
    MyList = "Header 1,Header 2"
    MyAr = Split(MyList, ",")

    n = 0
    ReDim RowAr(n)

    For Each aCell In Range("5:5")
        If Len(Trim(aCell.Value)) <> 0 Then
            For i = LBound(MyAr) To UBound(MyAr)
                If aCell.Value = MyAr(i) Then
                    n = n + 1
                    ReDim Preserve RowAr(n)
                    RowAr(n) = aCell.Column
                End If
            Next
        End If
    Next
End Sub

Private Sub Worksheet_Change(ByVal Target As Range)
    Dim i As Long

    On Error GoTo Whoa

    Application.EnableEvents = False

    For Each aCell In Target
        If aCell.Row = 5 Then
            With Application
                For i = LBound(RowAr) To UBound(RowAr)
                    If RowAr(i) = aCell.Column Then
                        MsgBox "Change is not possible."
                        .Undo
                        GoTo Letscontinue
                    End If
                Next
            End With
        End If
    Next

Letscontinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume Letscontinue
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:19:00.597

如果您不希望公式对单元格中的用户可见，他们可能不会更改，您也可以勾选隐藏。

**VBA解决方案**

您可以有一个 2 阶段脚本：

1.  第一阶段会将您的工作表副本保存在（隐藏）工作表中，以供在对该工作表进行更改之后以及在第 2 阶段运行之后进行参考。

2.  为 Worksheet_Change(Target) 创建一个脚本，该脚本将`Target`通过在工作表副本中查找目标范围内所有单元格的行/列坐标来检查范围是否最初包含特殊值之一。如果它包含一个特殊值，您只需将该值从您的工作表副本中放回。这主要是您已经拥有的脚本...

**工作表保护解决方案**

您是否考虑过使用工作表保护（*Review > Protect Sheet*）并仅在允许用户更改的那些单元格上解锁保护？这样，您无需额外编码就可以控制它......也许这些单元格的位置有一些逻辑，您已经可以预先使用？或者在您的脚本每次更改后，您将运行一个 VBA 脚本来查找具有这些值的所有单元格并设置锁定属性 = `True`，然后再次应用工作表保护。

手动设置单个单元格或范围的保护锁定，方法是*右键单击 > 格式化单元格 > 保护 > 勾选*锁定旁边的框

# php - 尝试使用 php 和 redis 内爆字符串

> ID：16077778
> 
> 赞同：1
> 
> 时间：2013-04-18T08:14:54.713
> 
> 标签：php, redis

这是我的 php 文件：-

```
 <?php
    require "predis-0.8/autoload.php";
    Predis\Autoloader::register();
    try {
        $redis = new Predis\Client();
        }catch (Exception $e) {
    };
    $redis->del("aaa");
    for($i=1;$i<=10;$i++)
    {
    $randNo=rand('1','5');
    $ec = $redis->set("arr",$randNo);
    $str = $redis->get("arr").",";
    echo ($str);
    }
    $comma = implode(",", $str);
    echo ($comma);
?> 
```

我正在将 Redis 与 PHP 一起使用。
我正在尝试内爆 strint。
但它不起作用。
返回我的错误。`Warning: implode(): Invalid arguments passed`
知道为什么我会收到此警告。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:19:10.117

您正在寻找的功能`explode`not `implode`。

implode 接受一个数组并将元素与给定的字符串连接在一起。

explode 获取一个字符串，并通过删除该字符串在找到给定字符串的位置将其拆分为一个数组。

```
$arr = array( 'foo', 'bar');
$imp = implode(',', $arr); # $imp == 'foo,bar'
$exp = explode(',', $imp); # $exp == array('foo', 'bar') 
```

编辑：

在进一步阅读您的代码后。我猜你试图在redis中存储一个数组。为了实现这一点（甚至更复杂的数据结构），您需要将数据转换为字符串。实现这一目标的最简单方法是`serialize`and `unserialize`。

```
$data; # contains some data , either array or objects or int or ...
$redis->set('foo', serialize($data));
$other_data = unserialize($redis->get('foo')); # $other_data == $data 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-18T08:20:21.353

慧，我认为这两个链接可以帮助你

1.  [http://www.w3schools.com/php/func_string_implode.asp](http://www.w3schools.com/php/func_string_implode.asp)

2.  [http://www.w3schools.com/php/func_string_explode.asp](http://www.w3schools.com/php/func_string_explode.asp)

# mysql - 长 SQL 调用中的许多 JOIN

> ID：16077782
> 
> 赞同：1
> 
> 时间：2013-04-18T08:15:19.353
> 
> 标签：mysql, sql

有 4 个表，每个表都是一个元组`ID(INT),name(VARCHAR)`（ID 是自动递增的）。餐（芝士汉堡、汉堡包、肉宴、BLT、番茄汤）、班级（汉堡、比萨、三明治、汤）、特色（辣、素食、无麸质）和配菜（沙拉、薯条、面包）有一张桌子.

存在另外三个表来制作元组`Meal.ID,Class.ID`, `Meal.ID,Characteristics.ID`，`Meal.ID,Sides.ID`因此 Meal 可以属于多个类，具有多个特征，并且具有多个边，反之亦然。

我有以下延迟加载就好了，但我们都知道那不好。我想要的是这顿饭的名字，它的特点、配菜和同一班的替代餐。

这个电话工作得很好：

```
SELECT Group_concat(DISTINCT m2.meal_name SEPARATOR ',')          AS alternates,
       Group_concat(DISTINCT c.characteristic_desc SEPARATOR ',') AS
       characteristics
FROM   meal AS M
       INNER JOIN mealclass AS MC
               ON M.meal_id = MC.meal_id
       LEFT JOIN (SELECT meal_id,
                         class_id
                  FROM   drugingredient) AS MC2
              ON MC2.class_id = MC.class_id
       LEFT JOIN meals AS M2
              ON MC2.meal_id = M2.meal_id
       LEFT JOIN mealchar AS MCh
              ON MCh.meal_id = M.meal_id
       INNER JOIN characterisics AS C
               ON C.characteristic_id = MCh.characteristic_id
WHERE  M.meal_id = :meal_id
       AND M.meal_id <> M2.meal_id 
```

但是当我把它扩展到这个时，我什么也没得到：

```
SELECT Group_concat(DISTINCT m2.meal_name SEPARATOR ',')          AS alternates,
       Group_concat(DISTINCT c.characteristic_desc SEPARATOR ',') AS
       characteristics,
       Group_concat(DISTINCT s.sides_desc SEPARATOR ',')          AS side_orders
FROM   meal AS M
       INNER JOIN mealclass AS MC
               ON M.meal_id = MC.meal_id
       LEFT JOIN (SELECT meal_id,
                         class_id
                  FROM   drugingredient) AS MC2
              ON MC2.class_id = MC.class_id
       LEFT JOIN meals AS M2
              ON MC2.meal_id = M2.meal_id
       LEFT JOIN mealchar AS MCh
              ON MCh.meal_id = M.meal_id
       INNER JOIN characterisics AS C
               ON C.characteristic_id = MCh.characteristic_id
       INNER JOIN mealsides AS MS
               ON M.meal_id = MS.meal_id
       INNER JOIN sides AS S
               ON S.sides_id = MS.sides_id
WHERE  M.meal_id = :meal_id
       AND M.meal_id <> M2.meal_id 
```

任何想法如何解决呼叫，或如何拥有更好的结构化架构？还是一定程度的延迟加载是最好的方法（：P）？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:48:03.673

您希望在这里完成三件可能的事情。我把它们写出来作为演示。

```
create table a (x integer, y integer);
create table b (v integer, w integer);
create table c (t integer, u integer);
insert into a values (1,2);
insert into a values (3,4);
insert into a values (5,6);
insert into b values (1,2);
insert into b values (5,6);
insert into c values (1,2);
insert into c values (3,4); 
```

这与您使用的相同：
(a LEFT JOIN b) JOIN c

```
select * from a left join b on a.x = b.v join c on b.v = c.t;
 x | y | v | w | t | u
---+---+---+---+---+---
 1 | 2 | 1 | 2 | 1 | 2 
```

这将只使用左连接：
(a LEFT JOIN b) LEFT JOIN c

```
select * from a left join b on a.x = b.v left join c on b.v = c.t;
 x | y | v | w | t | u
---+---+---+---+---+---
 1 | 2 | 1 | 2 | 1 | 2
 3 | 4 |   |   |   |
 5 | 6 | 5 | 6 |   | 
```

我*认为*这就是您的目标：a LEFT JOIN (b JOIN c)

```
select * from a left join (b join c on b.v = c.t) on a.x = b.v;
 x | y | v | w | t | u
---+---+---+---+---+---
 1 | 2 | 1 | 2 | 1 | 2
 3 | 4 |   |   |   |
 5 | 6 |   |   |   | 
```

希望这可以帮助

# java - 使用 java 客户端/服务器重现 tcp CLOSE_WAIT 状态

> ID：16077786
> 
> 赞同：6
> 
> 时间：2013-04-18T08:15:36.227
> 
> 标签：java, performance, tcp, java-server

有没有一种简单的方法可以用 java 程序重现 tcp CLOSE_WAIT 状态？

我有一个遗留 Java 应用程序有这个问题，我希望能够重现它，以便我可以测试我的修复。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T08:59:53.357

当另一端关闭连接但另一端没有关闭时，连接处于 CLOSE_WAIT 状态。很容易重现：

```
// Client.java (will sleep in CLOSE_WAIT)
import java.io.*;
import java.net.*;

public class Client
{
    public static void main(String[] args) throws Exception
    {
        Socket socket = new Socket(InetAddress.getByName("localhost"), 12345);
        InputStream in = socket.getInputStream();
        int c;
        while ((c = in.read()) != -1)
        {
            System.out.write(c);
        }
        System.out.flush();

        // should now be in CLOSE_WAIT
        Thread.sleep(Integer.MAX_VALUE);
    }
}

// Server.java (sends some data and exits)
import java.io.*;
import java.net.*;

public class Server
{
    public static void main(String[] args) throws Exception
    {
        Socket socket = new ServerSocket(12345).accept();
        OutputStream out = socket.getOutputStream();
        out.write("Hello World\n".getBytes());
        out.flush();
        out.close();
    }
} 
```

# android - 如何在搜索栏更改上模糊和去模糊位图

> ID：16077797
> 
> 赞同：1
> 
> 时间：2013-04-18T08:16:20.107
> 
> 标签：android, canvas, bitmap

我正在开发图像处理，我想使用 seekbar 应用模糊效果。我正在使用下面的代码来模糊位图，它可以工作，但现在我想去模糊我无法实现的位图......请帮我解决这个问题

```
private Bitmap blurfast(Bitmap bmp, int radius) {
      int w = bmp.getWidth();
      int h = bmp.getHeight();
      int[] pix = new int[w * h];
      bmp.getPixels(pix, 0, w, 0, 0, w, h);

      for(int r = radius; r >= 1; r /= 2) 
      {
          for(int i = r; i < h - r; i++)
          {
              for(int j = r; j < w - r; j++)
              {
                  int tl = pix[(i - r) * w + j - r];
                  int tr = pix[(i - r) * w + j + r];
                  int tc = pix[(i - r) * w + j];
                  int bl = pix[(i + r) * w + j - r];
                  int br = pix[(i + r) * w + j + r];
                  int bc = pix[(i + r) * w + j];
                  int cl = pix[i * w + j - r];
                  int cr = pix[i * w + j + r];

            pix[(i * w) + j] = 0xFF000000 |
            (((tl & 0xFF) + (tr & 0xFF) + (tc & 0xFF) + (bl & 0xFF) + 
(br & 0xFF) + (bc & 0xFF) + (cl & 0xFF) + (cr & 0xFF)) >> 3) & 0xFF |
            (((tl & 0xFF00) + (tr & 0xFF00) + (tc & 0xFF00) + (bl & 0xFF00) 
+  (br & 0xFF00) + (bc & 0xFF00) + (cl & 0xFF00) + (cr & 0xFF00)) >> 3) & 0xFF00 |
            (((tl & 0xFF0000) + (tr & 0xFF0000) + (tc & 0xFF0000) + 
(bl & 0xFF0000) + (br & 0xFF0000) + (bc & 0xFF0000) + (cl & 0xFF0000) + 
(cr & 0xFF0000)) >> 3) & 0xFF0000;
              }
          }
      }
      bmp.setPixels(pix, 0, w, 0, 0, w, h);
      return bmp;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:55:24.957

一旦图像模糊，您就不能“去模糊”图像。实现它的唯一方法是保留原件的副本并在必要时恢复它。处理模糊的**唯一方法是始终从原始图像中模糊。**您需要按以下方式重新组织您的代码：

```
private Bitmap origBitmap;
...

Bitmap bmp = //get your starting bitmap here;
origBitmap = Bitmap.createBitmap(bmp);

...

seekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
        Bitmap blurred = blurfast(origBitmap, progress);
        //now draw your blurred bitmap into wherever you need it to be
    }

    public void onStartTrackingTouch(SeekBar seekBar) {}
    public void onStopTrackingTouch(SeekBar seekBar) {}
});
...

private Bitmap blurfast(Bitmap bmp, int radius) {
      int w = bmp.getWidth();
      int h = bmp.getHeight();
      int[] pix = new int[w * h];
      bmp.getPixels(pix, 0, w, 0, 0, w, h);

      for(int r = radius; r >= 1; r /= 2) 
      {
          for(int i = r; i < h - r; i++)
          {
              for(int j = r; j < w - r; j++)
              {
                  int tl = pix[(i - r) * w + j - r];
                  int tr = pix[(i - r) * w + j + r];
                  int tc = pix[(i - r) * w + j];
                  int bl = pix[(i + r) * w + j - r];
                  int br = pix[(i + r) * w + j + r];
                  int bc = pix[(i + r) * w + j];
                  int cl = pix[i * w + j - r];
                  int cr = pix[i * w + j + r];

            pix[(i * w) + j] = 0xFF000000 |
            (((tl & 0xFF) + (tr & 0xFF) + (tc & 0xFF) + (bl & 0xFF) + 
(br & 0xFF) + (bc & 0xFF) + (cl & 0xFF) + (cr & 0xFF)) >> 3) & 0xFF |
            (((tl & 0xFF00) + (tr & 0xFF00) + (tc & 0xFF00) + (bl & 0xFF00) 
+  (br & 0xFF00) + (bc & 0xFF00) + (cl & 0xFF00) + (cr & 0xFF00)) >> 3) & 0xFF00 |
            (((tl & 0xFF0000) + (tr & 0xFF0000) + (tc & 0xFF0000) + 
(bl & 0xFF0000) + (br & 0xFF0000) + (bc & 0xFF0000) + (cl & 0xFF0000) + 
(cr & 0xFF0000)) >> 3) & 0xFF0000;
              }
          }
      }
      Bitmap blurred = Bitmap.createBitmap(w, h, bmp.getConfig);
      blurred.setPixels(pix, 0, w, 0, 0, w, h);
      return blurred;
    } 
```

需要注意的几点：

1.  在开始时，您要声明一个私有成员变量 type `Bitmap`，它将在应用任何模糊之前保存您的原始位图。

2.  每当您的搜索栏移动时，您将模糊应用于原始位图，而不是位图的当前状态。

3.  在该`blurfast`方法中，您需要使用模糊像素创建一个新位图，而不是更新传递给它的位图（注意我代码中的最后三行）。

4.  最后，请记住，如果您的位图很大，您可能会耗尽内存，因此请密切关注内存使用情况。

我没有测试过这段代码，所以不能保证这正是你所需要的，但这应该能让你开始。

# c++ - 在 QGraphicsScene 上绘画而不会丢失上面已有的图片。Qt C++

> ID：16077799
> 
> 赞同：0
> 
> 时间：2013-04-18T08:16:24.873
> 
> 标签：c++, qt, qgraphicsview

所以正如问题所说，我的用户界面上有一个 QGraphicsView 。我制作了一个将图像放到 QGraphicsView 上的函数：

```
// Read New Image from file
QImage image(":/images/myFile.png");

/// Declare a pointer to a scene
QGraphicsScene *scene = new QGraphicsScene();

// add a pixmap to the scene from the QImage 'image'
scene->addPixmap(QPixmap::fromImage(image));

// set the scene to equal the height and width of the map image
scene->setSceneRect(0,0,image.width(),image.height());

// Set the Scene to the GraphicsView on the UI
ui->graphicsView->setScene(scene); 
```

但是现在我希望能够在图像上的特定 XY 值处绘制点。我有一个函数可以很好地做到这一点，但是一旦调用这个函数，所有的点就会出现并且图片消失了:(。我知道这是因为我再次将场景设置为带有点的场景，所以程序只是得到摆脱它当前使用的那个（图像之一）

```
 for(unsigned int i = 0; i < pixels.size(); i++)
    {
        x = pix_iter->second;
        y = pix_iter->first;

        scene->addEllipse(x, y, 1, 1, pen, QBrush(Qt::SolidPattern));

        pix_iter++;
    }
    ui->graphicsView->setScene(scene); 
```

无论如何，我不知道该怎么做才能更新场景以添加点，而不仅仅是设置一个新场景

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:20:19.943

在第二个片段中，您是否重新创建场景？为什么不使用`ui->graphicsView->scene()`和添加点呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T08:27:23.003

只要您使用相同的场景指针进行操作，您就可以根据需要多次调用 setScene（尽管它不会改变任何内容）。因此，首先要了解的是 QGraphicsScene 实际上是 QGraphicsView 的*模型*，因此您应该全局声明它（取决于应用程序设计）或使用前一个答案建议的 scene() 方法。

为视图调用 scene() 当然是一种解决方案，但我更喜欢通过我自己的类而不是通过视图的方法来保持模型指针可用。那是因为有时您希望共享视图以根据应用程序状态/逻辑显示不同的模型。因此，如果必须将某些内容添加到场景中，您应该确定您正在使用哪个场景。

# android - 如何在 ActionBar 中添加自定义字体？

> ID：16077800
> 
> 赞同：0
> 
> 时间：2013-04-18T08:16:26.403
> 
> 标签：android

我正在使用 Sherlock 操作栏 我想在三个地方的操作栏上使用自定义字体

1.  标题
2.  标签
3.  菜单项。

如果有人使用过自定义字体，请分享如何完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:19:37.380

您好，请先通过谷歌搜索或在 stackoverflow 上搜索：

[如何在 ActionBar 标题中设置自定义字体？](https://stackoverflow.com/questions/8607707/how-to-set-a-custom-font-in-the-actionbar-title#answer-8748802)

它包含所有详细信息，因此易于实施，但请不要在不需要时询问，大多数问题已经被问到。

# java - 在数据库中找到数据并插入数据库后，PHP向java返回成功

> ID：16077802
> 
> 赞同：0
> 
> 时间：2013-04-18T08:16:26.750
> 
> 标签：java, php, json, apache

```
<?php

include("db_config.php");

$myusername = $_GET['username'];
$mypassword = $_GET['password'];

$sql="SELECT id FROM tablename WHERE username='$myusername' and password='$mypassword'";

echo $sql;

$result=mysql_query($sql);
$row=mysql_fetch_array($result);
$active=$row['active'];

$count=mysql_num_rows($result);

 // If result matched $myusername and $mypassword, table row must be 1 row
if($count==1)
{
 echo "<strong> <font size='18'>Login Success</font></strong>";
 }
 else 
 {
echo "<strong> <font size='18'>Login Failed</font></strong>";
}

?> 
```

我尝试了成功的响应数组..但是在java文件中我收到它..显示为空..我正在使用这条线来接收成功

```
 success=json.getInt(TAG_SUCCESS); 
```

我还在我的 JSON 解析器类中使用它来检查服务器是否返回成功。

```
 if (response.getStatusLine().getStatusCode() == 200) 
```

而且登录也给出了登录失败..虽然我输入了数据库中存在的用户名

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:37:09.737

不确定您使用的是哪个库，但在 HTML 文本“登录成功/失败”上使用方法“getInt()”看起来非常错误。

使用“json”。HTML 数据上的方法看起来也很错误。

因此，让您的 php 发出有效的 JSON，并让您的 Java 从 hte JSON 中提取登录成功或失败文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:37:36.757

如果我错了，请纠正我，但您的 php 没有返回有效的 JSON，而是返回 HTML 代码。自然，当您尝试将其解析为 JSON 时，您会得到`null`. 如果您的 PHP 更改为：

```
if($count==1) {
    $result['login'] == 'success';
}
else {
    $result['login'] == 'failed';
}
echo json_encode($result); 
```

那么你可以在你的java中解析它并使用类似的东西：

```
if("success".equals(json.getString("login")) {
    //login successful
} 
```

这不是实现这一目标的唯一方法，但它应该可以解决问题。

# c++ - Eclipse CDT：如何导入外部库？

> ID：16077803
> 
> 赞同：0
> 
> 时间：2013-04-18T08:16:31.023
> 
> 标签：c++, shared-libraries, eclipse-cdt

我是 C++ 和 Eclipse 的新手。我正在尝试使用开放动态引擎。我正在使用 ubuntu 12.04.2 LTS。

我从 sourceforge 下载了 ODE，并使用 make 的指令对其进行了编译。在该过程结束时，文件 libode.a 和 libode.la 存在于 usr/local/lib 中。

程序附带的演示运行良好。

我现在正在尝试将 ODE 与 eclipse CDT（Juno Service Release 2）一起使用。

我创建了一个项目并编写了这个极简程序：

```
#include <ode/ode.h>
int main() {
    return 0;
} 
```

首先，我根本没有更改项目的属性。但是默认情况下 /usr/local/include 在 Includes 中，并且 eclipse 不会抱怨找不到 ode.h。

当我运行程序时，我得到了 1057 个类似的错误：

```
a was not declared in this scope | line 134,external location: /usr/local/include/ode/matrix.h 
```

看起来它正在尝试重新编译 ODE ？

我想知道是不是因为它找不到库，我编辑了项目的属性。在属性/c/c++ Build/settings/cross G++ Linker/Libraries 中，我在库中添加“ode”，在库搜索路径中添加“/usr/local/lib”。

这并没有改变什么。

有什么我没有得到的吗？

- - 编辑

显然日食正在运行：

```
g++ -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"src/TestODE.d" -MT"src/TestODE.d" -o "src/TestODE.o" "../src/TestODE.cpp" 
```

我在终端中运行它并得到相同的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:58:47.823

运行`make install`并不是在现代 Linux 上安装东西的最佳方式。尝试安装`libode-dev`软件包 ( `sudo apt-get install libode-dev`)。此外，您可能应该事先删除手动安装的 ODE。

# symfony - 订购多对多

> ID：16077804
> 
> 赞同：0
> 
> 时间：2013-04-18T08:16:31.550
> 
> 标签：symfony, doctrine-orm, many-to-many

symfony 中是否有一种优雅的方式来建模与附加字段的多对多关系以**获得总订单**？我理解为什么需要为关系属性创建一个附加实体，但是这里这个“位置”可以包含在经典多对多关系的经典 ArrayCollection 中，数组中的位置对应于位置属性。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:39:20.840

这更像是一个 Doctrine 问题，而不是一个 Symfony 问题，但可以在[这里](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#ordering-to-many-collections)找到答案。简而言之，您必须将`@OrderBy`映射添加到该字段，如下所示：

```
class Foo
{
    /**
     * @ORM\ManyToMany(targetEntity="Bar")
     * @ORM\OrderBy({"position" = "ASC"})
     */
    protected $bar;
} 
```

# javascript - 如何在jquery中获取html表的行数据？

> ID：16077805
> 
> 赞同：-4
> 
> 时间：2013-04-18T08:16:33.360
> 
> 标签：javascript, jquery, html

```
$("#tblTest td:nth-child(3) a").click(function (event) {                     
       event.preventDefault();
       var $td = $(this).closest('tr').children('td');
       document.getElementById('id').value = $td.eq(0).text();
       document.getElementById('AppName').value = $td.eq(1).text();                        
}); 
```

我使用这个ans并且它工作正常但我的问题是在那个td中我有2个按钮（编辑和删除）点击编辑功能工作。但是我的删除按钮不是删除数据 bcz buttonclk 事件在此功能的 bcz 中不起作用。请建议一些答案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:48:35.503

如果你发布了你的 html 会更容易回答，但我猜它看起来像这样：

```
<table id="tblTest">
...
<td> <!-- this is the third td in #tblTest (#tblTest td:nth-child(3)) -->
    <a ...>Edit</a>
    <a ...>Delete</a>
</td>
</table> 
```

您的 jQuery 选择器正在寻找第三个元素中的所有 -tags。然后该函数调用 event.preventDefault()。问题是当您想要匹配编辑按钮时，您匹配两个按钮。一个简单的解决方案是将一个类添加到编辑按钮，然后将该类添加到选择器，因此该功能仅针对编辑按钮触发。这就是我将如何解决它：

```
<table id="tblTest">
...
<td>
    <a ... class="edit_button">Edit</a> <!-- add class to edit button. -->
    <a ...>Delete</a>
</td>
</table>

// will now only trigger for the edit button.
$("#tblTest td:nth-child(3) a.edit_button").click(function (event) { 
    ...
} 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-04-18T08:20:52.390

jquery 选择器 "$()" 只选择第一个匹配的元素，使用 ".find(*)" 函数代替。

# c++ - libcvd - 编译 C++ 时对“x ...”的未定义引用

> ID：16077809
> 
> 赞同：1
> 
> 时间：2013-04-18T08:16:53.473
> 
> 标签：c++, linux, reference, makefile

我正在尝试构建 libCVD 以便与 ROS 一起使用（来自 www.ros.org）。我的问题是我收到以下错误：

```
make[3]: Entering directory `/opt/ros/groovy/stacks/tum_ardrone/thirdparty/libcvd/build'
/usr/bin/g++-4.6 -o progs/cvd_display_image progs/cvd_display_image.o -L. -lcvd  -ltiff -ljpeg -lpng -lpng -llapack -lGLU -lGL -lrt  -L -lX11 -lXext -pthread

./libcvd.so: undefined reference to `XMoveWindow'
./libcvd.so: undefined reference to `XCreateGlyphCursor'
./libcvd.so: undefined reference to `XStoreName'
./libcvd.so: undefined reference to `XLookupString'
./libcvd.so: undefined reference to `XFreeFont'
./libcvd.so: undefined reference to `XSetClassHint'
./libcvd.so: undefined reference to `XCreateWindow'
./libcvd.so: undefined reference to `XCreateColormap'
./libcvd.so: undefined reference to `XOpenDisplay'
./libcvd.so: undefined reference to `XDestroyWindow'
./libcvd.so: undefined reference to `XCloseDisplay'
./libcvd.so: undefined reference to `XUnmapWindow'
./libcvd.so: undefined reference to `XNextEvent'
./libcvd.so: undefined reference to `XSetWMProtocols'
./libcvd.so: undefined reference to `XResizeWindow'
./libcvd.so: undefined reference to `XMapWindow'
./libcvd.so: undefined reference to `XSelectInput'
./libcvd.so: undefined reference to `XFlush'
./libcvd.so: undefined reference to `XWarpPointer'
./libcvd.so: undefined reference to `XLoadQueryFont'
./libcvd.so: undefined reference to `XDefineCursor'
./libcvd.so: undefined reference to `XInternAtom'
./libcvd.so: undefined reference to `XQueryPointer'
./libcvd.so: undefined reference to `XUndefineCursor'
./libcvd.so: undefined reference to `XGetWindowAttributes'
./libcvd.so: undefined reference to `XPending'
collect2: ld returned 1 exit status
make[3]: *** [progs/cvd_display_image] Error 1
make[3]: Leaving directory `/opt/ros/groovy/stacks/tum_ardrone/thirdparty/libcvd/build'
make[2]: *** [libcvd_built] Error 2 
```

还有一个 stackoverflow 问题几乎有类似的错误（[编译 libcvd 时出现未定义的参考错误](https://stackoverflow.com/questions/14939242/undefined-reference-error-while-compiling-libcvd/16077571#16077571)）。

我尝试了那里的建议，以找出为什么第二个 -L 选项没有给出路径。所以我最终进入了项目 configure.in 文件，我相信错误发生在该文件中。但我对这个构建系统没有经验，所以帮助会很大。

configure.in 文件位于[https://dl.dropboxusercontent.com/u/16804463/configure.in](https://dl.dropboxusercontent.com/u/16804463/configure.in)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:35:50.973

在另一个 SO 问题中选择的解决方案是不正确的。正确的解决方案是未选择的解决方案：错误是您的链接行中缺少路径。您的链接行包含：`-L -lX11`。后面应该有路径名`-L`。由于没有，链接器假定路径名是下一个参数，`-lX11`. 这意味着链接器不会链接实际的`libX11.so`库，因为它将库引用视为路径。

您需要查看`Makefile`并找到链接 cvd_display_image.o 目标的规则，看看这里发生了什么。正如其他 SO 答案中所提到的，您很可能会发现链接行类似于`-L$(SOME_VARIABLE)`并且该变量为空。您需要将该变量设置为某个值，可能通过运行`make SOME_VARIABLE=.`或`make SOME_VARIABLE=/usr/lib`其他方式。

看`configure.in`文件没那么有用：重要的部分是makefile。

无论如何，您绝对应该将此情况报告给该软件的维护人员，以便他们可以修复它：显然他们在这里遇到了一个真正的错误，因为很多人都遇到了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-29T13:34:00.237

我有类似的错误。我意识到 libcvd 似乎依赖于以下 3 个库。

*   拉帕克
*   布拉斯
*   香椿

这些都是数学库。从 Ubuntu 软件中心安装 Synaptic 软件包管理器。（假设你使用的是 ubuntu - 如果你不是，你可以使用 apt-get 或其他安装包的方式）

从 Synaptic 包管理器中，搜索以下包：

*   liblapack-开发
*   libblas-dev

并安装。

安装 TooN ： git clone git clone git://github.com/edrosten/TooN.git 这将在您克隆到的任何位置创建一个 TooN 目录。导航到 TooN 目录并输入：

。/配置

制作

进行安装

希望这可以帮助。

# file - 批处理脚本在目录中查找文件

> ID：16077814
> 
> 赞同：0
> 
> 时间：2013-04-18T08:17:07.313
> 
> 标签：file, batch-file, directory

我需要在特定文件夹中找到所有扩展名为 *.job 的查找。但不知何故我的代码不起作用。但是，当我将 *.job 更改为特定名称（例如 INV.job）时，它会起作用吗？

```
if exist "C:\WatchFolder\Incoming\*.job" (
 copy /Y /V "C:\WatchFolder\Incoming\*.job" "C:\WatchFolder\InProgress"
 ECHO TRIGGER AUTOMATIONS
) 
```

感谢阅读

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T08:43:19.807

尝试这个：

```
dir "C:\WatchFolder\Incoming\*.job" >nul 2>&1 && (
 copy /Y /V "C:\WatchFolder\Incoming\*.job" "C:\WatchFolder\InProgress"
 ECHO TRIGGER AUTOMATIONS
) 
```

`if exist`仅适用于特定文件，不适用于通配符`*`和`?`. `copy`适用于通配符。

# jquery - 如何设置 td 或单元格的触发器无法使用？我可以触发扳机但不关闭扳机

> ID：16077815
> 
> 赞同：-2
> 
> 时间：2013-04-18T08:17:07.963
> 
> 标签：jquery, kendo-ui, kendo-grid

如何设置 td 或单元格的触发器无法使用？我可以触发触发器但不关闭触发器。我将触发器设置为：

```
 my.contextMenu({
        trigger: '#Grid  td ',
        //leftButton: false,          
        rightButton: true,
        menu: '#testMenu',
        callback: ctxCallback
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:44:30.483

如果您通过 medialize 使用 contextMenu 插件，根据文档，您可以尝试：

```
$("#Grid  td").contextMenu(false); 
```

禁用触发器。

[禁用 contextMenu 触发器](http://medialize.github.io/jQuery-contextMenu/docs.html#disable-trigger)

# ios - png 文件显示在模拟器上，但不是 ipad

> ID：16077818
> 
> 赞同：0
> 
> 时间：2013-04-18T08:17:14.323
> 
> 标签：ios, image, uiimage, png

我正在努力解决一个问题，也许有人可以帮助我。[滑块 setThumbImage:[UIImage imageNamed:@"circle_black.png"] forState:UIControlStateNormal];

上面的代码在 ipad 模拟器中正确显示了图像，但在实际 ipad 设备上却没有。我查看了其他线程并尝试了以下操作但没有成功： - 小写字母（文件名如图所示，没有大写字母） - 重新创建文件以防文件损坏 - 干净重建 - 似乎在捆绑包中（构建阶段-> 复制捆绑资源已列出此文件）

我的ipad是ipad1，ios 5。

我可以尝试任何其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:41:19.350

@杰森，

图像名称在 iPhone/Ipad 中区分大小写，而在模拟器中图像名称不区分大小写。检查一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:52:32.173

您可能已经从应用程序中删除了图像，在模拟器上它可以参考已删除的图像，但不能在设备上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:23:46.953

可能是图像未正确添加到包中。

要做的事情。

*   检查是否存在同名的多个图像。如果有删除不需要的
*   从项目和文件夹中删除图像。再次添加到资源文件夹。添加到项目并再次运行。
*   最后但并非最不重要。复制图像给它另一个名称，添加到文件夹和项目并运行它

# alloy - 如何将 Event-Condition-Action 规则转换为 Alloy

> ID：16077822
> 
> 赞同：-1
> 
> 时间：2013-04-18T08:17:21.113
> 
> 标签：alloy

我们如何将 Event-Condition-Action 规则转换为 Alloy ( [http://alloy.mit.edu/alloy/](http://alloy.mit.edu/alloy/) )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:13:43.517

您可以查看以下幻灯片以了解有关 Alloy 中事件成语的更多信息

[http://people.csail.mit.edu/dnj/talks/lipari05/lectures/lipari-lecture4.pdf](http://people.csail.mit.edu/dnj/talks/lipari05/lectures/lipari-lecture4.pdf)

# wpf - 从 WPF 的 Syncfusion ExtendedGrid 获取过滤器值

> ID：16077824
> 
> 赞同：0
> 
> 时间：2013-04-18T08:17:21.613
> 
> 标签：wpf, wpfdatagrid, syncfusion

我们需要在 Syncfusion 的 WPF 网格中保留过滤器（标题行上的漏斗过滤器）。

如何读取当前的过滤器设置以便我们可以持久保存它？以编程方式恢复这些过滤器的方法是什么？

这甚至可能吗？

谢谢，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T05:16:45.487

```
You can get the Filters for particular column by using the following code snippet.

Code snippet[C#]:

var Filters = this.SyncGrid.VisibleColumns["CustomerID"].Filters;

And also you can add the Filters for particular column by using the following code snippet.

Code Snippet[C#]:
this.SyncGrid.VisibleColumns["CustomerID"].Filters.Add(new Syncfusion.Windows.Data.FilterPredicate()
{
    FilterValue = 2,
    PredicateType = Syncfusion.Windows.Data.PredicateType.Or,
    FilterBehavior = Syncfusion.Linq.FilterBehavior.StringTyped,
    FilterType = Syncfusion.Linq.FilterType.Equals
});

Note: Here CustomerID is the MappingName of GridDataVisibleColumn 
```

# c# - LINQ 查询不返回任何结果

> ID：16077825
> 
> 赞同：0
> 
> 时间：2013-04-18T08:17:22.393
> 
> 标签：c#, linq

我运行以下`LINQ`查询，以便我可以看到一个包含两列的表，但是我看不到结果，`DataGrid`有人可以告诉我我做错了什么吗？

```
Database d = server.Databases[cboDatabases.SelectedItem.ToString()];
System.Data.DataSet ds = d.ExecuteWithResults("SELECT * FROM INFORMATION_SCHEMA.COLUMNS");  
DataTable dt = ds.Tables[0];             
MessageBox.Show(dt.Columns.Count.ToString());  
var query = from data in dt.AsEnumerable()//AsEnumerable()
            select new
            {
                TableName = data[0],
                FieldName = data[1]
            };
dataGridView1.DataSource = query; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:19:46.577

调用`ToList`您的查询以获取结果：

```
var query = from data in dt.AsEnumerable()//AsEnumerable()
            select new
            {
                TableName = data[0],
                FieldName = data[1]
            };

dataGridView1.DataSource = query.ToList(); 
```

# nservicebus - NServiceBus：无法确定 URI 的格式

> ID：16077827
> 
> 赞同：0
> 
> 时间：2013-04-18T08:17:25.987
> 
> 标签：nservicebus

```
NServiceBus version: 2.6.0.1505 
```

NServiceBus 不喜欢我的 WCF 和 OData 服务引用。

它们已经在不同的环境中进行了单元测试，并且在不同的系统中成功使用了相同的服务 uri。

有没有人遇到过类似的 NServiceBus 异常？

从日志：

1)`Invalid URI: The format of the URI could not be determined.`

导致：`An exception occurred while trying to create an instance of type 'XXX.XXX'.`

```
Resulting in: Cannot activate part 'XXX.XXX'.
Element: XXX.XXX-->  XXX.XXX-->  DirectoryCatalog (Path="C:\Program Files (x86)\XXX\XXX\XXX") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:13:49.957

那个版本的 NServiceBus 已经很老了，我很确定我们从那时起就处理了关于 URI 序列化的问题，所以我想我的建议是升级到更新的版本，看看是否能解决它。

# javascript - 使用 HTML 文件而非 URL 时 Facebook 评论 iFrame 高度受限

> ID：16077835
> 
> 赞同：0
> 
> 时间：2013-04-18T08:17:47.113
> 
> 标签：javascript, html, iframe, facebook-javascript-sdk, facebook-comments

我正在从本地文件而不是 URL 加载 facebook 评论页面。

（原因：这是一个移动应用程序，我需要一个模板文件来创建多个评论页面）

FB 评论加载，但 iFrame 始终是相同的固定高度，这将视图限制为仅第一个评论。从我运行的许多测试来看，这是一个独立于浏览器和平台的问题。

如果我将 html 文件添加到我的网站并作为 URL 访问它，它会完美运行。

任何人都可以解释为什么 FB 评论的 iFrame 高度会因为源是本地文件而固定，而不是在 URL 时固定？

```
<html>
  <head>
    <title>Public Comments</title>
  </head>
  <body>
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
             var js, fjs = d.getElementsByTagName(s)[0];
             if (d.getElementById(id)) return;
             js = d.createElement(s); js.id = id;
             js.src = "http://connect.facebook.net/en_GB/all.js#xfbml=1&appId=XXXXXXXXXXXX";
             fjs.parentNode.insertBefore(js, fjs);
             }(document, 'script', 'facebook-jssdk'));</script>
    <div class="fb-comments" data-href="http://my-web-site.help/dir/#ALIAS" " data-num-posts="10" data-mobile="true"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:32:40.140

> 任何人都可以解释为什么 FB 评论的 iFrame 高度会因为源是本地文件而固定，而不是在 URL 时固定？

很可能是因为 JS SDK 必须执行的跨域通信才能调整站点中 iframe 元素的高度在这种情况下不起作用。

# android - 将 Gstreamer 支持添加到 android NDK 项目

> ID：16077836
> 
> 赞同：2
> 
> 时间：2013-04-18T08:17:48.140
> 
> 标签：android, android-ndk, java-native-interface, gstreamer

我已经在 windows 7 上安装了最新的 android SDK 包以及最新的 android NDK。

我已经设置了我的环境，并且能够从 NDK 安装包中运行 hellojni 示例。

但是当我尝试根据[gstreamer android 教程页面](http://docs.gstreamer.com/display/GstSDK/Installing+for+Android+development)的创建新项目部分添加 Gstreamer 支持时，当我尝试构建我的项目时出现此错误：

```
GStreamer      : [COMPILE] => gst-build/gstreamer_android.c
gst-build/gstreamer_android.c:1:17: fatal error: jni.h: No such file or directory
compilation terminated.
E:/GstreamerAndroid/sdk/share/gst-android/ndk-build//gstreamer.mk:167: recipe for 
target `gst-build/gstreamer_android.o' failed
make: *** [gst-build/gstreamer_android.o] Error 1 
```

我尝试了一些解决方案，例如将我的路径变量设置为 NDK 中的 jni.h（例如 ndkr8e\platforms\android-14\arch-arm\usr\include），但没有任何效果。

任何人都可以提出任何其他解决方案吗？

**编辑：**正如我的 iljan 建议的那样，我下载了旧版本的 android NDK (r8d)，并且我得到了我的项目进行编译。但我不明白问题是来自我这边还是 NDK 版本中的错误。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:24:16.657

NDK 版本 r8e 对我来说同样的问题：我已经设置了环境（eclipse、android sdk、ndk、cygwin）并成功编译了 hello-jni。但是 Gstreamer Tutorial1 不会编译。我的 NDK 安装路径是“C:\android\android-ndk-r8e”

但我很幸运在我的磁盘上的其他地方安装了以前的 ndk，所以我只是将它复制到从不安装旁边，所有文件从：“C:\Program Files\Android\ndk\android-ndk-r8d”到“C :\android\android-ndk-r8d" 并将 Eclipse 中的 NDK 位置路径：Window->Preferences->Android->NDK 更改为这个新文件夹。

瞧！它现在编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T21:59:44.813

在对此[问题](https://bugs.freedesktop.org/show_bug.cgi?id=62697)发表评论之后，似乎添加了

```
...
LOCAL_LDLIBS := -llog

SYSROOT := /opt/android-ndk-r8e/platforms/android-14/arch-arm/

include $(BUILD_SHARED_LIBRARY)
... 
```

一切正常。

# java - 如何从 org.jboss.netty.channel 中读取？

> ID：16077837
> 
> 赞同：0
> 
> 时间：2013-04-18T08:17:48.840
> 
> 标签：java, netty

我需要直接从频道读取。我正在使用网络。在我的 ChannelHandler 中，我有这个功能：

```
 public void messageReceived(ChannelHandlerContext ctx, MessageEvent e)

        ChannelBuffer buf = (ChannelBuffer) e.getMessage();
        Channel ch = e.getChannel();
        //I need to read somthing from ch, not from buf
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T19:50:59.123

您不能直接从 Channel 读取，因为 netty 确实将从通道读取的数据自动传递到您的处理程序。如果你想直接从 Channel 中读取，你可以直接使用 nio。

# c++ - C++ - MPIR：最快的日志函数？

> ID：16077839
> 
> 赞同：1
> 
> 时间：2013-04-18T08:17:51.050
> 
> 标签：c++

MPIR 是一个非常好的库，我目前在 C++ 中使用它来处理大量数字。不幸的是，它没有任何日志功能。因此，我正在为 MPIR 的 mpz_class 寻找一个快速的日志功能。

我们都很清楚，有些日志函数已经在 C++ 中提供（或应该提供），它们位于 Math 头文件 (Math.h) 中。不幸的是，他们不能处理大数字，这是我使用 MPIR 库的众多原因之一，

```
::mpz_class Log( ::mpz_class n ) {
    ::mpz_class ret;
    return ret;
}; 
```

在某些情况下，n 的对数会返回浮点值。因此，我们的 log 函数必须能够返回一个浮点值。如果我们要执行 15 的 Log，它应该返回 1.17609125906。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:45:48.527

还有另一个库[MPFR](http://www.mpfr.org/)，它（我认为）是建立在 MPIR 之上的，它*确实*包含对数函数。

# c# - DDD 以及如何将 EF 实体映射到域对象？

> ID：16077844
> 
> 赞同：0
> 
> 时间：2013-04-18T08:18:07.763
> 
> 标签：c#, entity-framework, mapping, domain-driven-design

我是 DDD 的新手，但尝试在我的新项目中使用 DDD 的想法。我也在使用实体框架（edmx）。我学到的关于 DDD 的一件事是避免在域对象中使用公共设置器。如果正确，如何将我的 EF 实体（Ef 生成的类）映射到我的域对象？我必须将所有初始值都放在构造函数中吗？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:24:57.300

使用 EDMX 文件时，您的实体中不需要公共设置器。您可以[更改 setter 可访问性](https://stackoverflow.com/questions/5202780/entity-framework-and-business-objects/5202859#5202859)。之后，您可以将 EF 实体用作域实体，将 EF 复杂类型用作值对象。它仍然有一些限制，因此有时您将不得不使用不太理想的设计来满足 EF 需求。

# c# - 将标题标签转换为图形标签

> ID：16077847
> 
> 赞同：0
> 
> 时间：2013-04-18T08:18:21.353
> 
> 标签：c#, php, regex, html

我想转换这个：（来自 Wordpress）

```
[caption id="attachment_5433" align="aligncenter" width="413"]
    <a href="http://baicadicungnamthang.net/uploads/2012/02/NSUT-Tuyet-Thanh.jpg"><img class=" wp-image-5433" title="NSUT-Tuyet-Thanh" src="http://baicadicungnamthang.net/uploads/2012/02/NSUT-Tuyet-Thanh.jpg" alt="NSƯT Tuyết Thanh" width="413" height="551"></a>NSƯT Tuyết Thanh
[/caption] 
```

对此：（html5）

```
<figure>
    <a href="http://baicadicungnamthang.net/uploads/2012/02/NSUT-Tuyet-Thanh.jpg"><img class=" wp-image-5433" title="NSUT-Tuyet-Thanh" src="http://baicadicungnamthang.net/uploads/2012/02/NSUT-Tuyet-Thanh.jpg" alt="NSƯT Tuyết Thanh" width="413" height="551"></a>
    <figcaption>NSUT Tuyết Thanh</figcaption>
</figure> 
```

如何通过 PHP 或 C# 来实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:27:53.570

尝试这个：

```
$subject = preg_replace(
'/\[caption[\s]{0,}(.*?)\][\s]{0,}(<a[\s]{0,}.*?<\/a>)[\s]{0,}(.*?)\[\/caption\]/ims', 
'<figure $1> $2 <figcaption>$3</figcaption> </figure>',
$subject); 
```

其中 $subject 具有 [caption] 到 [/caption] 的实际字符串

# java - 当不再需要 java 树结构时，我是否需要手动处理它？

> ID：16077850
> 
> 赞同：3
> 
> 时间：2013-04-18T08:18:24.677
> 
> 标签：java, memory, data-structures, tree

我在我的应用程序中构建了许多对象树，其中每个节点都是典型的树节点（对父节点的引用和对子节点的引用列表）。这些树是临时的，这意味着我可能会在应用程序终止之前处理它们。

到目前为止，我一直在树节点类中添加一个方法，该方法能够递归地遍历树分支并“销毁它”（将父引用设置为 null 并清除子列表等）。

```
public void destroy() {
    for (Node node : children) {
        node.destroy();
    }
    parent = null;
    children.clear();
} 
```

这对我来说总是有意义的，因为简单地将对您存储在某处的树根的引用设为空是不够的 - 孩子可能仍然有对它的引用，这意味着它将留在内存中并导致内存泄漏. 我假设这一点并提供这样的方法是否正确？

我怀疑自己的原因是我很少在提供树结构支持的 API 中看到这样的方法（至少不是直接在树节点接口中）。处理此类案件的正确模式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T08:24:33.230

您不需要自己销毁或清理对象。

您只需要确保*活动*对象没有对它们的引用（*活动*听起来很清楚，但这是一个相当复杂的定义）。

请注意，即使在不需要的对象中存在课程引用，您也不需要关心它们，GC 会处理这个问题。

有关的：

[在 Java 中将对象分配给 null 会影响垃圾收集吗？](https://stackoverflow.com/questions/449409/does-assigning-objects-to-null-in-java-impact-garbage-collection)

[可以从类本身中取消一个类吗？](https://stackoverflow.com/questions/10616987/can-a-class-be-nullified-from-within-the-class-itself)

[真的有必要在 JUnit 拆解方法中取消对象吗？](https://stackoverflow.com/questions/3655944/is-it-really-necessary-to-nullify-objects-in-junit-teardown-methods)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:43:22.923

我最近考虑过这个问题，并得出结论，答案是否定的——大多数情况下。

如果您有一个使用s 引用的普通`Tree`类型结构，那么您可以公开该结构（并因此阻止它处置）的唯一方法是分发您的 s。如果你这样做，那么你的树的大块当然可以被另一个组件引用。`Node``data``Node`

大多数情况下，您将分发`data`which 本身并没有对树中的其余节点有任何引用。

但是，可能会错误地设计数据结构，从而暴露树的内部结构。例如，如果您将`Map.Entry`类设计为保存对树结构组件的引用，例如条目所在的节点，那么您将遇到问题。

请记住，垃圾收集过程所做的是将**所有内容**视为不可访问，除非它是可访问的。仅仅因为你有一个复杂的交织结构并不意味着它是复杂的丢弃。

# actionscript-3 - Flex：在动作脚本中无法访问项目的属性

> ID：16077857
> 
> 赞同：0
> 
> 时间：2013-04-18T08:18:58.370
> 
> 标签：actionscript-3, apache-flex, mxml

**这个问题讨论了 verticalAlign 属性，但答案也可能与其他样式属性有关。**

我的 mxml 文件中有一个网格对象：

```
<mx:Grid width = "100%"
         height = "100%"
         id = "myGrid">
    <mx:GridRow width = "100%">
        <mx:GridItem verticalAlign = "middle">
          // Some design code
        </mx:GridItem>
    </mx:GridRow>
</mx:Grid> 
```

我正在尝试使用操作脚本以编程方式添加行：

```
var configurationItem:GridItem = new GridItem(); 
```

但是网格项实例没有`verticalAlign`属性。有没有办法在动作脚本中设置这个属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:28:12.567

verticalAlign 是一种样式，而不是属性。

要通过 ActionScript 实现这一点，请使用：

```
var configurationItem:GridItem = new GridItem();
configurationItem.setStyle("verticalAlign", "middle"); 
```

希望有帮助。

# php - 按列表项中的特定值排序列表

> ID：16077863
> 
> 赞同：0
> 
> 时间：2013-04-18T08:19:11.820
> 
> 标签：php, html, list, sorting

我想按列表项中的特定值对我的无序列表进行排序。我用循环生成我的列表。

我的循环列表项看起来像这样。该值`<?php echo $nyslutdatum; ?>`是我希望我的列表排序的值（显示两次，因为有两种循环条件）

```
<li>
    <div id="kursprogram-kurstillfalle-kurs">

        <?php the_title(); ?>

    </div>

    <div id="kursprogram-kurstillfalle-ort">

        <?php the_sub_field('ort'); ?>

    </div>

    <div id="kursprogram-kurstillfalle-datum">

        <?php if(get_sub_field('startdatum') != '') { ?>

            <?php echo $nystartdatum; ?> - <?php echo $nyslutdatum; ?>

        <?php } else { ?>

            <?php echo $nyslutdatum; ?>

        <?php } ?>

        <?php if(get_sub_field('slutdatum_2') != '') { ?>

        <br />

            <?php echo $nystartdatum_2; ?> - <?php echo $nyslutdatum_2; ?>

        <?php } ?>

    </div>

    <div id="kursprogram-kurstillfalle-notis">

        <?php the_sub_field('notis') ?>

    </div>

    <div class="clearboth" />

</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:41:00.490

如果我正确理解了这个问题，请使用 php 函数“usort”。

以下将 $array 从最高到最低“销售额”排序。

```
$array = array(
  array('sales'=> 10, 'views'=> 200),
  array('sales'=> 3,  'views'=> 100),
  array('sales'=> 13, 'views'=> 500)
);

usort($array,function($a,$b){
  if( $a['sales'] == $b['sales'] ){
    return 0;
  }
  return ($a['sales'] > $b['sales']) ? -1 : 1;
}); 
```

[PHP 排序](http://php.net/manual/en/function.usort.php)

# html - HTML 页面在外部服务器上丢失格式

> ID：16077864
> 
> 赞同：1
> 
> 时间：2013-04-18T08:19:12.753
> 
> 标签：html, css, highcharts

我制作了一个 HTML 页面，其中包含一些 CSS 以及 2 个简单的 highcharts (highcharts.com)

我已经在我自己的计算机上进行了本地测试，并且对结果非常满意，我将它移到了我们内部网络上的服务器上，以便所有人都可以使用它。

从服务器加载页面时，一切都显示为“错误”，如下图 2 所示。

（我似乎不允许发布图片）

[http://i46.tinypic.com/jaua7o.png](http://i46.tinypic.com/jaua7o.png)

这是正确的布局。

[http://i46.tinypic.com/1zo9dzo.png](http://i46.tinypic.com/1zo9dzo.png)

这是不正确的布局。正如您在不正确的布局上可能看到的那样，出于某种原因，菜单中的字母更小，并且图表左侧的“千兆字节”正遭受一些奇怪的奇怪东西。除此之外，当图表加载到我的本地计算机上时，它们有一些流畅的动画，从外部服务器加载时不会显示。

尽管这些字母比我的本地计算机上的要小，但很明显，某些格式可以按预期工作，因为菜单“有点”工作，这是用 CSS 制作的。

关于什么可能导致这种情况的任何提示？我有点困惑，因为我认为无论是从本地机器还是从服务器加载 HTML 都是一样的。

提前致谢。

特定页面的代码（抱歉我没有评论它）：

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="http://code.highcharts.com/highcharts.js"></script>

    <script type="text/javascript">

    function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split("&");
         for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split("=");
            if (pair[0] == variable) { return pair[1]; }
         }
         return (false);
    }
    var kunde = getQueryVariable("area");

    function onDownload() {
        document.location = 'database' + kunde + '.csv';
    }

    $(document).ready(function () {

        var graph = {
            colors: [
                        '#696567',
                        '#525051'
            ],
            exporting: { enabled: false },
            chart: {
                renderTo: 'container',
                type: 'column'
            },
            credits: {
                enabled: false
            },
            title: {
                text: 'Imaginært Diskforbrug'
            },
            xAxis: {
                categories: []
            },
            yAxis: {
                min: 0,                      
                title: {
                    text: 'Gigabyte'
                },
                stackLabels: {
                enabled: true,
                style: {
                    fontWeight: 'bold',
                    color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
            }
        }
            },
            legend: {
                align: 'right',
                x: -100,
                verticalAlign: 'top',
                y: 20,
                floating: true,
                backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColorSolid) || 'white',
                borderColor: '#CCC',
                borderWidth: 1,
                shadow: false
            },
            plotOptions: {
                column: {
                    stacking: 'normal',
                    dataLabels: {
                        enabled: true,
                        color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white'
                    }
                }
            },
            series: []
        };

        $.get("mfdisk" + kunde + ".txt", function(data) {
            var lines = data.split('\n');
            $.each(lines, function(lineNo, line) {
                var items = line.split(',');

                if (lineNo == 0) {
                    $.each(items, function(itemNo, item) {
                        if (itemNo > 0) graph.xAxis.categories.push(item);
                    })
                    ;
                }

                else {
                    var series = {
                        data: []

                    };
                    $.each(items, function(itemNo, item) {
                        if (itemNo == 0) {
                            series.name = item;
                        } else {
                            series.data.push(parseFloat(item));
                        }
                    });

                    graph.series.push(series);
                }

            });

            var chart = new Highcharts.Chart(graph);
        });     
    });
            </script>   
            <script type="text/javascript">
                $(document).ready(function () {

                        var tapegraph = {
                            colors: [
                                     '#525051'
                            ],
                            exporting: { enabled: false },
                        chart: {
                            renderTo: 'tapecontainer',
                            type: 'column'
                        },
                        credits: {
                            enabled: false
                        },
                        title: {
                            text: 'Imaginært Tapeforbrug'
                        },
                        xAxis: {
                            categories: []
                        },
                        yAxis: {
                            min: 0,
                            title: {
                                text: 'Gigabyte'
                            },
                            stackLabels: {
                                enabled: true,
                                style: {
                                    fontWeight: 'bold',
                                    color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
                                }
                            }
                        },
                        legend: {
                            align: 'right',
                            x: -100,
                            verticalAlign: 'top',
                            y: 20,
                            floating: true,
                            backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColorSolid) || 'white',
                            borderColor: '#CCC',
                            borderWidth: 1,
                            shadow: false
                        },
                        plotOptions: {
                            column: {
                                stacking: 'normal',
                                dataLabels: {
                                    enabled: true,
                                    color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white'
                                }
                            }
                        },
                        series: []
                    };

                        $.get("mftape" + kunde + ".txt", function (data) {
                        var lines = data.split('\n');
                        $.each(lines, function (lineNo, line) {
                            var items = line.split(',');

                            if (lineNo == 0) {
                                $.each(items, function (itemNo, item) {
                                    if (itemNo > 0) tapegraph.xAxis.categories.push(item);
                                })
                                ;
                            }

                            else {
                                var series = {
                                    data: []

                                };
                                $.each(items, function (itemNo, item) {
                                    if (itemNo == 0) {
                                        series.name = item;
                                    } else {
                                        series.data.push(parseFloat(item));
                                    }
                                });

                                tapegraph.series.push(series);
                            }

                        });

                        var chart = new Highcharts.Chart(tapegraph);
                    });
                });
    </script>   
</head>
<body>
            <ul class="tabmenu">
            <li><a href="csv.html">Forside</a></li>
            <li class="active"><a href="mfstart.html">Mainframe</a></li>
            <li><a href="">AIX</a></li>
            <li><a href="">Superdome</a></li>
            <li><a href="">TEST</a></li>
            </ul>
    <div class="menu">
    <a href="mf.html?area=AC">KMA</a>
    <a href="mf.html?area=fAC">FrysAC</a>
    <a href="mf.html?area=OC">KMO</a>
    <a href="mf.html?area=fOC">FrysOC</a>
    <a href="mf.html?area=BC">KMB</a>
    <a href="mf.html?area=SAP">SAP</a>
    <a href="mf.html?area=Eboks">Eboks</a>
    <a href="mf.html?area=fBC">FrysBC</a>
    <a href="mf.html?area=uAZ">Udv - AZ</a>
    <a href="mf.html?area=uOZ">Udv - OZ</a>
    <a href="mf.html?area=uBZ">Udv - BZ</a>
    <a href="mf.html?area=TCS">TCS</a>
    <a href="mf.html?area=COOP">COOP</a>
    <a href="mf.html?area=U1">KMD Udv1</a>
    <a href="mf.html?area=U2">KMD Udv2</a>
    <a href="mf.html?area=Nem">Nemkonto</a>
    <a href="mf.html?area=Systest">Systest</a>
    <a href="mf.html?area=AKI">ÅKI</a>
    <a href="mf.html?area=Ribe">Ribe</a>
    <a href="mf.html?area=Eindkomst">E-indkomst</a>
    <a href="mf.html?area=Fyn">Fyns Amt</a>
    <a href="mf.html?area=KK">KK</a>
    <a href="mf.html?area=KC">KC</a>
    <a href="mf.html?area=FDC">FDC</a>
    <a href="mf.html?area=ATP">ATP</a>
    </div>
    <div id="container" style="width: 720px; height: 360px; margin: 0 auto"></div>  
    <div id="tapecontainer" style="width: 720px; height: 360px; margin: 0 auto"></div>  
    <div class="downloadlink">
    <a href="javascript:onDownload();">Klik her for at downloade database over kundens forbrug</a>
    </div>
</body> 
```

我知道我为 2 个图表编写了几乎相同的代码可能看起来很丰富，但是一旦我在项目中走得更远，这些代码就会大不相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:45:07.217

在经历了很多挫折之后，以及在其他项目上的一些时间之后，我以全新的眼光回到了这个问题上。原来问题是由于 IE9 自动在我们的本地 Intranet 上以兼容模式打开网页，我禁用了它，它就像一个魅力！

# ruby-on-rails - 多域 Rails 商店设置的最佳实践

> ID：16077868
> 
> 赞同：1
> 
> 时间：2013-04-18T08:19:18.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在开发一个新的 Rails 应用程序，该应用程序在不同的域上有多个商店，只是内容不同。对此的最佳做法是什么？

我正在考虑运行一个应用程序并服务于多个域并设置商店`Shop.find_by_domain(request.host)`或类似的东西。

还是每个域都有一个 Rails 应用程序更好？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:44:35.713

您是否查看过子域？

这是一个很好的 railscast：[http: //railscasts.com/episodes/221-subdomains-in-rails-3](http://railscasts.com/episodes/221-subdomains-in-rails-3)

你可以使用 37 Signals 'pow' gem。您可能不需要不同的 Rails 应用程序，而是需要多租户应用程序。

查看 shopify.com ，这是一个具有不同商店模型的大型 Rails 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T02:01:52.677

考虑以下：

1.  每个站点的数据库内容完全不同（包括用户表）
2.  只有有限数量的网站（比如少于 10 个）
3.  您的应用程序不为客户服务。它不像 Blogger 或 Shopify。您拥有您网站的内容/客户并不“要求”拥有自定义域。

如果所有三点都符合您的情况，那么在单个应用程序上使用多个域似乎只会增加复杂性而没有太多好处。

另一方面，如果您确实想要多个域，我想阅读[Multi-tenant rails application：不同技术的优缺点是什么？](https://stackoverflow.com/questions/7003024)[https://leanpub.com/multi-tenancy-rails](https://leanpub.com/multi-tenancy-rails)可能会有所帮助。

# asp.net - 如何在不重新重写文本的情况下解决编码问题？

> ID：16077878
> 
> 赞同：0
> 
> 时间：2013-04-18T08:19:53.523
> 
> 标签：asp.net, html, encoding, metadata, arabic

我面临以下问题：

当我将gridview从页面复制到另一个页面时，我有一个.aspx页面，我遇到以下问题：

我有一些这样的阿拉伯语单词：

```
رقم اذن الإضافة 
```

它变成了：

```
&#1585;&#1602;&#1605; &#1575;&#1584;&#1606; &#1575;&#1604;&#1573;&#1590;&#1575;&#1601;&#1577; 
```

* * *

我的母版页元数据：

```
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
```

如何解决此问题

所有的阿拉伯数据都变成了那些奇怪的字符和数字！！只是在设计时

,但是在运行时一切正常。

但是当我尝试编辑时，我需要花费大量时间来检测正确的控件！如何在不重新重写所有这些阿拉伯字符的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:26:17.870

您需要使用 UTF-8 或 Windows-1256 编码才能正确显示，例如，[我应该为包含大部分阿拉伯文本的网页使用哪种字符编码？utf-8 可以吗？](https://stackoverflow.com/questions/2996475/what-character-encoding-should-i-use-for-a-web-page-containing-mostly-arabic-tex)

# javascript - 如何为多线图添加圆点？

> ID：16077879
> 
> 赞同：2
> 
> 时间：2013-04-18T08:19:57.607
> 
> 标签：javascript, d3.js

在此示例中（jsfiddle.net/vinhnguyenle/LG8Qe/2/），如何为 2 个折线图添加圆点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:36:30.997

在脚本底部添加：

```
svg.selectAll("circle.line2")
        .data(data)
        .enter().append("svg:circle")
        .attr("class", "line")
        .style("fill", "blue")
        .attr("cx", valueline2.x())
        .attr("cy", valueline2.y())
        .attr("r", 4.5); 
```

# jquery - 如何使用 BXSlider 进行延迟加载

> ID：16077883
> 
> 赞同：3
> 
> 时间：2013-04-18T08:20:23.797
> 
> 标签：jquery, html, css, bxslider, lazy-loading

我正在使用使用[Bxslider](http://bxslider.com/)的图片库。我在幻灯片中有超过 15 张图像，这需要很长时间才能加载。因此，当特定幻灯片出现时，我需要在每个滑块中一张一张地加载图像。我从这里[lazyload 和 bxslider](https://github.com/wandoledzep/bxslider-4/issues/118)得到了一个示例，它使用 LazyLoad 来加载图像。但它不适合我。谁能帮我这个？

我正在使用此代码

```
 $(document).ready(function(){
    $("#moreLessons").bxSlider( { 
        startingSlide:1,
        pager: false
    });
    // trigger lazy to load new in-slided images
    $("a.bx-prev, a.bx-next").bind("click", function() {
        // extra call for lazy loading
        setTimeout(function() { $(window).trigger("scroll"); }, 100);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-06T11:24:54.620

```
<div class="slider">
    <div>
        <img src="http://placekitten.com/400/200">
    </div>
    <div>
        <img class="lazy" src="http://placekitten.com/450/200" data-src="http://placekitten.com/450/200">
    </div>
    <div>
        <img class="lazy" src="http://placekitten.com/500/200" data-src="http://placekitten.com/500/200">
   </div>
</div>

$(function(){

    // create an options object to store your slider settings
    var slider_config = {
        mode: 'horizontal', // place all slider options here
        onSlideBefore: function($slideElement){
            var $lazy = $slideElement.find(".lazy")
            var $load = $lazy.attr("data-src");
            $lazy.attr("src",$load).removeClass("lazy");
             alert(JSON.stringify($lazy));
        }
    }
    // init the slider with your options
    var slider = $('.slider').bxSlider(slider_config);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T20:32:42.490

您可以通过添加“欺骗”浏览器移动 1 px：
$(window).scrollTop($(window).scrollTop()+1); 触发 a.bx-prev 和 a.bx-next

然后您可以设置：
$(window).scrollTop($(window).scrollTop()-1); 在事件被调用后立即触发。

因此，如果幻灯片是 50 张图片，您最终不会向下滚动页面 50px。

这种方法也适用于 Drupal 7 中的 bxslider，并添加了延迟加载模块。只需启用延迟加载，将加载图标设置为“无”，然后将上述 javascript 调用添加到视图中 bxslider 设置的回调部分。瞧！继续，把所有你喜欢的高分辨率图像放在那里。

# ruby - 如何在ruby中转换为大端

> ID：16077885
> 
> 赞同：5
> 
> 时间：2013-04-18T08:20:27.087
> 
> 标签：ruby, endianness

我有一个小端顺序的字符串，作为十六进制编码的字符串

```
000000020597ba1f0cd423b2a3abb0259a54ee5f783077a4ad45fb6200000218
000000008348d1339e6797e2b15e9a3f2fb7da08768e99f02727e4227e02903e
43a42b31511553101a051f3c0000000000000080000000000000000000000000
0000000000000000000000000000000000000000000000000000000080020000 
```

我想将每个 32 位块从 little-endian 字节交换到 big-endian 导致

```
020000001fba9705b223d40c25b0aba35fee549aa477307862fb45ad18020000
0000000033d14883e297679e3f9a5eb108dab72ff0998e7622e427273e90027e
312ba443105315513c1f051a0000000080000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000280 
```

我尝试了几种方法，但还没有成功。如果有人可以展示示例实现，那就太好了。

干杯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T14:05:14.947

您还可以通过以下方式使用`pack`和`unpack`：

*   首先解码十六进制
*   然后在小端转换为 32 位整数
*   用大端编码这些整数
*   将结果编码为十六进制。

在代码中：

```
s = "000000020597ba1f0cd4..."
[s].pack('H*').unpack('N*').pack('V*').unpack('H*')
# => "020000001fba9705b223..." 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T10:11:47.663

除了 Łukasz Niemier 的回答之外，您还可以让我们`scan`一步一步处理分组：

```
hex_string = "000000020597ba1f..."
hex_string.scan(/(..)(..)(..)(..)/).map(&:reverse).join
# => "020000001fba9705..." 
```

*   `scan(/(..)(..)(..)(..)/)`将字符串拆分为 4 x 2 字节的组：

    ```
    [["00", "00", "00", "02"], ["05", "97", "ba", "1f"], ... ] 
    ```

*   `map(&:reverse)`反转内部 2 字节数组：

    ```
    [["02", "00", "00", "00"], ["1f", "ba", "97", "05"], ... ] 
    ```

*   `join`连接所有数组元素

    ```
    "020000001fba9705..." 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T08:50:06.043

我的方法是为每 8 个字符拆分字符串：

```
hexes = str.scan(/.{8}/) 
```

然后通过反转每个 2 个字符将它们映射到更改字节序：

```
big = hexes.map { |hex| hex.scan(/.{2}/).reverse.join('') } 
```

然后把他们一起加入

```
str = big.join('') 
```

撬会话示例：

```
[23] pry(main)> str
=> "000000020597ba1f0cd423b2a3abb0259a54ee5f783077a4ad45fb6200000218000000008348d1339e6797e2b15e9a3f2fb7da08768e99f02727e4227e02903e43a42b31511553101a051f3c00000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000080020000"
[24] pry(main)> str.scan(/.{8}/).map { |s| s.scan(/.{2}/).reverse.join('') }.join('')
=> "020000001fba9705b223d40c25b0aba35fee549aa477307862fb45ad180200000000000033d14883e297679e3f9a5eb108dab72ff0998e7622e427273e90027e312ba443105315513c1f051a00000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000280" 
```

~~或改进@Stefan 的回答：~~

 ~~```
hex_string.scan(/(..){4}/).msp(&:reverse).join('') # remember that anybody can change $, variable 
```~~

# android - 我可以看到通过 file.createNewFile() 在 Android 平板电脑中创建的文件吗？

> ID：16077888
> 
> 赞同：0
> 
> 时间：2013-04-18T08:20:41.643
> 
> 标签：android, file, creation

我通过 file.createNewFile() 命令在“data/data/com.android.bonvoyage”文件夹中创建了一个文件，以测试在我的 android 平板电脑的内部存储中创建文件。

我发现当我有 root 帐户时该文件应该是可见的，但是我想找到一种方法来查看没有 root 权限创建的文件。我不在乎文件是在哪里创建的，只是想在实际的平板电脑上查看和测试它。

我可以这样做吗？

该过程是成功的

```
 File file = new File("data/data/com.android.bonvoyage/myfile.txt");
    boolean tf = false;
    if (!file.exists()) {
        try {
            tf = file.createNewFile();
        } catch (IOException ioe) {
            Toast.makeText(this, ioe.toString(), 5000).show();
            //ioe.printStackTrace();
        } finally {
            Toast.makeText(this, "File Created? " + Boolean.toString(tf), Toast.LENGTH_SHORT).show();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:23:29.270

使用 root 浏览器或任何支持 root 的文件浏览器，您可以浏览到：data/data/com.android.bonvoyage/myfile.txt 并查看它是否存在？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:32:26.973

将文件写入SD卡，然后您可以在没有root权限的文件浏览器中查看它。

使用以下代码（取自 android 指南）打开图片文件夹中的文件，例如：

```
public File getAlbumStorageDir(String albumName) {
    // Get the directory for the user's public pictures directory. 
    File file = new File(Environment.getExternalStoragePublicDirectory(
            Environment.DIRECTORY_PICTURES), albumName);
    if (!file.mkdirs()) {
        Log.e(LOG_TAG, "Directory not created");
    }
    return file;
} 
```

完整的指南可以在这里找到：http: [//developer.android.com/training/basics/data-storage/files.html#WriteExternalStorage](http://developer.android.com/training/basics/data-storage/files.html#WriteExternalStorage)

# d3.js - nvd3：绘图超出图表区域

> ID：16077889
> 
> 赞同：2
> 
> 时间：2013-04-18T08:20:44.297
> 
> 标签：d3.js, nvd3.js

我正在使用以下代码在 nvd3 中制作多图表：

```
 var data = 
    [{"variableName":"HHs_Index_Income_75K_9999K","contribution":6717418.0,"roi":0.0,"date":1.1997306E12,"spend":131.0},

    {"variableName":"HHs_Index_Income_75K_9999K","contribution":6563584.0,"roi":0.0,"date":1.2033594E12,"spend":128.0},
    ...
    ...
    ...
    {"variableName":"HHs_Index_Income_75K_9999K","contribution":6819974.0,"roi":0.0,"date":1.243881E12,"spend":133.0}];

    function formatOverviewPerformanceTrendsData(data, y1Var , y2Var ) {
        var finalData = new Array();
        var y1Array = new Array();
        var y2Array = new Array();

        for(var i=0;i<data.length;i++){
            var dataElement = data[i];
            //var datePattern =new RegExp('/','g');
            //var dateString = dataElement['date'].replace(datePattern,''); 
            var dateString = dataElement['date'];

            var objArray1 = {x: dateString , y:dataElement[y1Var.toLowerCase()]};
            var objArray2 = {x: dateString , y:dataElement[y2Var.toLowerCase()]};
            y1Array.push(objArray1);
            y2Array.push(objArray2);
        }
        var y1Obj = { key:y1Var , type:'line' , yAxis:'1' , values:y1Array};
        var y2Obj = { key:y2Var , type:'line' , yAxis:'2' , values:y2Array};

        finalData.push(y1Obj);
        finalData.push(y2Obj);

        return finalData;
    }

    function render_overview_trends_screen(data) {

        var contributionROIData = formatOverviewPerformanceTrendsData(data,'Contribution','ROI');
        var revenueTrendsData = formatOverviewPerformanceTrendsData(data,'Contribution','Spend');

        nv.addGraph(function() {
            var chart = nv.models.multiChart().margin({
                top : 10,
                right : 80,
                bottom : 40,
                left : 80
            }).color(d3.scale.category10().range());

            chart.xAxis.axisLabel('Date').
            tickFormat(function(d) { 
                return d3.time.format('%x')(new Date(d)); 
            });

            chart.yAxis1.axisLabel('Contribution');

            chart.yAxis2.axisLabel('ROI');

            d3.select('#chart1 svg').datum(contributionROIData)
                    .transition().duration(500).call(chart);

            return chart;
        });

    }

    document.body.onload = function(){
        render_overview_trends_screen(data);
    } 
```

但是制作的图表在图表区域之外绘制了线条。

请帮我解决这个问题。究竟是什么问题？你如何修补 nvd3 图表的比例/范围？

非常感谢！

# iphone - 向下滚动uitableview到特定日期

> ID：16077894
> 
> 赞同：0
> 
> 时间：2013-04-18T08:20:59.160
> 
> 标签：iphone, ios, xcode, ipad, uitableview

我想知道我是否有一个 uitable，每个表项的标题是日期和时间。如果我希望表格自动向下滚动到具有特定日期的单元格，例如今天的日期，我可以知道如何编码吗？我应该在 viewDidLoad 方法中编写什么代码？

这是我的表格代码，

```
@interface PictureListMainTable : UITableViewController{
    IBOutlet UIButton*scroll;

}

@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (strong, nonatomic) NSMutableArray *pictureListData;
@property (strong, nonatomic) IBOutlet UIButton*scroll;

- (void)readDataForTable;
-(IBAction)scrolldown:(id)sender;
@end

@synthesize managedObjectContext, pictureListData;
@synthesize scroll;

//  When the view reappears, read new data for table
- (void)viewWillAppear:(BOOL)animated
{
    //  Repopulate the array with new table data
    [self readDataForTable];
}

//  Grab data for table - this will be used whenever the list appears or reappears after an add/edit
- (void)readDataForTable
{
    //  Grab the data
    pictureListData = [CoreDataHelper getObjectsForEntity:@"Pictures" withSortKey:@"title" andSortAscending:YES andContext:managedObjectContext];

    //  Force table refresh
    [self.tableView reloadData];
}

#pragma mark - Actions

//  Button to log out of app (dismiss the modal view!)
- (IBAction)logoutButtonPressed:(id)sender
{
    [self dismissModalViewControllerAnimated:YES];
}

#pragma mark - Segue methods

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    //  Get a reference to our detail view
    PictureListDetail *pld = (PictureListDetail *)[segue destinationViewController];

    //  Pass the managed object context to the destination view controller
    pld.managedObjectContext = managedObjectContext;

    //  If we are editing a picture we need to pass some stuff, so check the segue title first
    if ([[segue identifier] isEqualToString:@"EditPicture"])
    {
        //  Get the row we selected to view
        NSInteger selectedIndex = [[self.tableView indexPathForSelectedRow] row];

        //  Pass the picture object from the table that we want to view
        pld.currentPicture = [pictureListData objectAtIndex:selectedIndex];
    }
}

#pragma mark - Table view data source

//  Return the number of sections in the table
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

//  Return the number of rows in the section (the amount of items in our array)
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [pictureListData count];
}

//  Create / reuse a table cell and configure it for display
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Get the core data object we need to use to populate this table cell
    Pictures *currentCell = [pictureListData objectAtIndex:indexPath.row];

    //  Fill in the cell contents
    cell.textLabel.text = [currentCell title];
    cell.detailTextLabel.text = [currentCell desc];

    //  If a picture exists then use it
    if ([currentCell smallPicture])
    {
        cell.imageView.contentMode = UIViewContentModeScaleAspectFit;
        cell.imageView.image = [UIImage imageWithData:[currentCell smallPicture]];
    }

    return cell;
}

//  Swipe to delete has been used.  Remove the table item
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        //  Get a reference to the table item in our data array
        Pictures *itemToDelete = [self.pictureListData objectAtIndex:indexPath.row];

        //  Delete the item in Core Data
        [self.managedObjectContext deleteObject:itemToDelete];

        //  Remove the item from our array
        [pictureListData removeObjectAtIndex:indexPath.row];

        //  Commit the deletion in core data
        NSError *error;
        if (![self.managedObjectContext save:&error])
            NSLog(@"Failed to delete picture item with error: %@", [error domain]);

        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
}

@end 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:00:30.687

由于您正在处理日期，因此最好创建一个日期数组并使用 dateComponents 查找当前日期。

在这个片段中，日期是一个`NSDate`实例数组。

```
NSCalendar *cal = [NSCalendar currentCalendar];

NSDate *today = [NSDate date];
[self.dates enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    NSDate *date = (NSDate *)obj;
    NSDateComponents *components = [cal components:NSDayCalendarUnit
                                          fromDate:date
                                            toDate:today
                                           options:0];
    if ([components day]==0) {
        *stop = TRUE;
        NSIndexPath *indexPath = [NSIndexPath indexPathForRow:idx inSection:0];
        [self.tableView scrollToRowAtIndexPath:indexPath
                              atScrollPosition:UITableViewScrollPositionTop
                                      animated:YES];
    }
}]; 
```

编辑 ：

```
- (void)viewWillAppear:(BOOL)animated
{
    //  Repopulate the array with new table data
    [self readDataForTable];

    NSCalendar *cal = [NSCalendar currentCalendar];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    [dateFormatter setDateFormat:@"dd.MMMM - EEEE"];
    NSDate *today = [NSDate date];
    [pictureListData  enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        Pictures *picture = (Pictures *)obj;
        NSDate *date = [dateFormatter dateFromString:picture.title];
        NSDateComponents *components = [cal components:NSDayCalendarUnit
                                              fromDate:date
                                                toDate:today
                                               options:0];
        if ([components day]==0) {
            *stop = TRUE;
            NSIndexPath *indexPath = [NSIndexPath indexPathForRow:idx inSection:0];
            [self.tableView scrollToRowAtIndexPath:indexPath
                                  atScrollPosition:UITableViewScrollPositionTop
                                          animated:YES];
        }
    }];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:59:01.883

首先`find index`是今天的日期或任何其他日期，`UITableView's dataSource`如下所示：

我假设并且`date format`是`search date``data source date``same`

```
NSInteger index = NSNotFound;
if ([tableViewArray containsObject:dateHere]) {
  index = [tableViewArray indexOfObject:dateHere];
} 
```

现在滚动使用`scrollToRowAtIndexPath`

```
[yourTableView scrollToRowAtIndexPath:NSIndexPath indexPathForRow:index inSection:0] atScrollPosition:UITableViewScrollPositionNone animated:YES]; 
```

**编辑**`ScrollPosition`：根据您的要求使用这些

```
UITableViewScrollPositionNone,
UITableViewScrollPositionTop,    
UITableViewScrollPositionMiddle,   
UITableViewScrollPositionBottom 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:53:53.920

您必须`indexpath`计算`specific date`. 并使用它`delegate`来`scroll down`或`scroll Up`在`UITableViewCells``TableView`

`[self.tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionNone animated:NO];`

如果您知道`UITableViewCells`要使用的位置

```
[tableView setContentOffset:CGPointMake(0,0) animated:YES]; 
```

# javascript - 从页面浏览器下载图像的 HTML5/Javascript 代码？

> ID：16077896
> 
> 赞同：3
> 
> 时间：2013-04-18T08:21:09.970
> 
> 标签：javascript, browser, client-side, imagedownload

我需要 javascript 代码来下载网页中的所有图像。有没有办法做到这一点？

当浏览器加载页面时，该页面中可能有一些图片，如何列出所有图片并下载？我的意思是这不应该涉及向服务器发送请求。由于浏览器已加载图像，我需要从浏览器而不是服务器下载图像。怎么做到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:33:15.983

您可以获得所有网址的列表或像这样遍历图像

```
var images = document.getElementsByTagName("img");

var urls = [];

Array.prototype.forEach.call(images, function (image) {
    if (image.src.length > 0) {
        urls.push(image.src);
    }
});

console.log(urls); 
```

[jsfiddle](http://jsfiddle.net/Xotic750/66vAw/)上有一个活生生的例子

也可以将图像保存到磁盘，参见[他的示例](http://eligrey.com/demos/FileSaver.js/)，但当它们来自另一个域时则不能。

这是一个[更新的小提琴](http://jsfiddle.net/Xotic750/66vAw/7/)，显示了跨域安全错误。

[同源](http://en.wikipedia.org/wiki/Same_origin_policy)
[策略同源策略](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:22:20.863

您可以获取所有图像并将其绘制在画布上，然后用于`getImageData`获取内容。看到这个[链接](https://stackoverflow.com/questions/12605315/html5-getimagedata-without-canvas)

# java - 从控制台打印参数

> ID：16077897
> 
> 赞同：2
> 
> 时间：2013-04-18T08:21:13.423
> 
> 标签：java, console

我正在尝试从 ubuntu 控制台运行参数。

> ./myTool -h

我得到的只是“1”的打印。

有人可以帮忙吗？

谢谢 ！

```
public static void main(String[] argv) throws Exception
{

    System.out.println("1");
    for(int i=0;i<argv.length;i++)
    {
        if (argv.equals("-h"))
        {
            System.out.println("-ip   target ip address\n");
            System.out.println("-t    time interval between each scan in milliseconds\n");
            System.out.println("-p    protocol type [UDP/TCP/ICMP]\n");
            System.out.println("-type scan type [full,stealth,fin,ack]\n");
            System.out.println("-b    bannerGrabber status\n");

        } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:22:58.963

`argv`是一个完整的数组。您要匹配的是带有字符串的数组的全部内容`-h`。尝试这样做：

```
public static void main(String[] argv) throws Exception
{

    System.out.println("1");
    for(int i=0;i<argv.length;i++)
    {
        if (argv[i].equals("-h"))
        {
            System.out.println("-ip   target ip address\n");
            System.out.println("-t    time interval between each scan in milliseconds\n");
            System.out.println("-p    protocol type [UDP/TCP/ICMP]\n");
            System.out.println("-type scan type [full,stealth,fin,ack]\n");
            System.out.println("-b    bannerGrabber status\n");

        }
     }
} 
```

旁注：[这个](https://stackoverflow.com/questions/367706/is-there-a-good-command-line-argument-parser-for-java)以前的 SO 帖子也可能值得一读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T08:23:30.463

您错过了`if`条件中的数组索引：

```
argv[i].equals("-h") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:22:45.150

您正在将数组与字符串进行比较。将其更改为：

```
 if (argv[i].equals("-h")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T08:22:58.040

您尝试将 String[] 与 String 进行比较。

请尝试：

```
 if (argv[i].equals("-h")) 
```

# perl - 如何在 perl 的 openssh 中指定 -v 选项

> ID：16077905
> 
> 赞同：1
> 
> 时间：2013-04-18T08:21:59.737
> 
> 标签：perl, openssh

我正在使用 Net::OpenSSH 模块连接到节点。但是在连接到节点时，我需要将 ssh 的 -v 指定为 ssh -v admin@hostname。尝试使用 master_opts 和 default_ssh_opts。但他们没有工作。

我的 $ssh = Net::OpenSSH->new("$user_name\:$password\@$server",strict_mode => 0, default_ssh_opts => [-o => "-v"]);

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:28:34.020

```
my $ssh = Net::OpenSSH->new($server,
                            user => $user_name,
                            password => $password,
                            strict_mode => 0,
                            master_opts => ['-v']); 
```

# python - Python Serial：如何使用 read 或 readline 函数一次读取多个字符

> ID：16077912
> 
> 赞同：34
> 
> 时间：2013-04-18T08:22:19.130
> 
> 标签：python, serial-port, readline, pyserial

我无法使用我的程序读取多个字符，我似乎无法弄清楚我的程序出了什么问题。

```
import serial

ser = serial.Serial(
    port='COM5',\
    baudrate=9600,\
    parity=serial.PARITY_NONE,\
    stopbits=serial.STOPBITS_ONE,\
    bytesize=serial.EIGHTBITS,\
        timeout=0)

print("connected to: " + ser.portstr)
count=1

while True:
    for line in ser.read():

        print(str(count) + str(': ') + chr(line) )
        count = count+1

ser.close() 
```

这是我得到的结果

```
connected to: COM5
1: 1
2: 2
3: 4
4: 3
5: 1 
```

实际上我期待这个

```
connected to: COM5
1:12431
2:12431 
```

像上面提到的那样，它可以同时读取多个字符，而不是一个一个地读取。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-18T18:34:53.853

我看到了几个问题。

第一的：

ser.read() 一次只会返回 1 个字节。

如果您指定计数

```
ser.read(5) 
```

它将读取 5 个字节（如果在 5 个字节到达之前发生超时，则更少。）

如果您知道您的输入总是以 EOL 字符正确终止，更好的方法是使用

```
ser.readline() 
```

这将继续读取字符，直到收到 EOL。

第二：

即使您让 ser.read() 或 ser.readline() 返回多个字节，由于您正在迭代返回值，您仍将一次处理一个字节。

摆脱

```
for line in ser.read(): 
```

然后说：

```
line = ser.readline() 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-09-09T01:57:53.150

我用这个小方法用 Python 读取 Arduino 串行监视器

```
import serial
ser = serial.Serial("COM11", 9600)
while True:
     cc=str(ser.readline())
     print(cc[2:][:-5]) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-04-18T08:27:58.373

串行一次发送 8 位数据，转换为 1 个字节，1 个字节表示 1 个字符。

您需要实现自己的方法，该方法可以将字符读入缓冲区，直到到达某个标记。约定是发送一条消息，例如`12431\n`指示一行。

因此，您需要做的是实现一个缓冲区，该缓冲区将存储 X 个字符，一旦到达该缓冲区，`\n`就对该行执行操作并继续将下一行读入缓冲区。

***请注意***，您必须处理缓冲区溢出情况，即当收到的行长于缓冲区等时...

***编辑***

```
import serial

ser = serial.Serial(
    port='COM5',\
    baudrate=9600,\
    parity=serial.PARITY_NONE,\
    stopbits=serial.STOPBITS_ONE,\
    bytesize=serial.EIGHTBITS,\
        timeout=0)

print("connected to: " + ser.portstr)

#this will store the line
line = []

while True:
    for c in ser.read():
        line.append(c)
        if c == '\n':
            print("Line: " + ''.join(line))
            line = []
            break

ser.close() 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-03-25T11:42:47.690

我从我的 arduino uno（0-1023 数字）那里收到了一些日期。使用来自 1337holiday、jwygralak67 的代码和来自其他来源的一些提示：

```
import serial
import time

ser = serial.Serial(
    port='COM4',\
    baudrate=9600,\
    parity=serial.PARITY_NONE,\
    stopbits=serial.STOPBITS_ONE,\
    bytesize=serial.EIGHTBITS,\
        timeout=0)

print("connected to: " + ser.portstr)

#this will store the line
seq = []
count = 1

while True:
    for c in ser.read():
        seq.append(chr(c)) #convert from ANSII
        joined_seq = ''.join(str(v) for v in seq) #Make a string from array

        if chr(c) == '\n':
            print("Line " + str(count) + ': ' + joined_seq)
            seq = []
            count += 1
            break

ser.close() 
```

# php - PHP exec 调用中的重定向创建空文件

> ID：16077918
> 
> 赞同：7
> 
> 时间：2013-04-18T08:22:40.057
> 
> 标签：php, shell, io-redirection

这很简单，我没有想法。我确信有一个快速的解决方法。

```
exec('echo 123 &> /var/log/123.log'); 
```

我确定这与权限无关，因为文件 123.log 已创建，但它只是空的。我也尝试过 shell_exec，但它根本不创建文件。还尝试了所有重定向变体，即`1> 2> >`.

使用 PHP 捕获输出不是选项，因为生产中的输出很大，我不想遇到内存问题。

任何想法表示赞赏。

顺便说一句，我使用的是 Ubuntu 12.04 LAMP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-15T18:20:54.843

Debian 和基于 Debian 的 Linux 发行版（如 Ubuntu）现在使用 dash 而不是 bash 作为 /bin/sh。

`&>`是一个 bash 扩展，破折号不知道。

正确的 posix 兼容的写法`cmd &> file`是`cmd > file 2>&1`

`cmd > file 2>&1`适用于所有 posix 兼容的 shell：dash、bash、ksh、zsh、ash ...

因此，您需要将代码更改为：

```
exec('echo 123 > /var/log/123.log 2>&1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:33:55.343

尝试不带 & 的 shell_exec：

```
echo shell_exec("echo 123 > /var/log/123.log"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:53:11.240

唯一有用的是创建一个具有 exec 权限的 shell 脚本，例如 test.sh：

```
#!/bin/bash
echo 123 &>> /var/log/123.log 
```

并像这样执行它：

```
shell_exec('[full path to]/test.sh'); 
```

因此，重定向运算符并不重要，但其他一切都是（#！指令，shell_exec）。

# yii - 如何扩展cactiverecord

> ID：16077927
> 
> 赞同：0
> 
> 时间：2013-04-18T08:23:11.597
> 
> 标签：yii, model, extends

我想在 CActiveRecord 中添加其他方法，但如果`class Project_Model extends CActiveRecord {}`出现错误

> 在数据库中找不到活动记录类“Project_ActiveRecord”的表“Project_ActiveRecord”。

我想创建简单的结构：CActiveRecord->Project_ActiveRecord（仅扩展方法）->Table（真实表）。

怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:52:31.767

错误很明显：您的数据库中没有命名表`Project_ActiveRecord`！

如果`Project_Model`要成为您其他活动记录模型的基本模型，那么您应该执行以下操作：

```
//A base classe example that has a behavior shared by all the inherited class
abstract class Project_Model extends CActiveRecord
{

    public function behaviors(){
        return array(
            'CTimestampBehavior' => array(
                'class' => 'zii.behaviors.CTimestampBehavior',
                'setUpdateOnCreate' => true
            ),
        );
    }

} 
```

然后你可以声明另一个**在 db 中有一个表的**类：

```
class YourClass extends Project_Model
{
    /**
     * Returns the static model of the specified AR class.
     * @param string $className active record class name.
     * @return Token the static model class
     */
    public static function model($className=__CLASS__)
    {
        return parent::model($className);
    }

    /**
     * @return string the associated database table name
     */
    public function tableName()
    {
        return 'YourClassTable';
    }
    ...
} 
```

然后你不应该在你的代码中**调用这个类`Project_Model`**（这就是我把关键字`abstract`放在你的代码中的原因），你必须调用在数据库中**具有现有表**的继承类！

# bash - 忽略空字段

> ID：16077934
> 
> 赞同：1
> 
> 时间：2013-04-18T08:23:31.060
> 
> 标签：bash, awk

鉴于此文件

```
$ cat foo.txt
,,,,dog,,,,,111,,,,222,,,333,,,444,,,
,,,,cat,,,,,555,,,,666,,,777,,,888,,,
,,,,mouse,,,,,999,,,,122,,,133,,,144,,, 
```

我可以像这样打印第一个字段

```
$ awk -F, '{print $5}' foo.txt
dog
cat
mouse 
```

但是我想忽略那些空字段，以便我可以这样调用

```
$ awk -F, '{print $1}' foo.txt 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T08:26:29.577

你可以这样使用：

```
$ awk -F',+' '{print $2}' file
dog
cat
mouse 
```

同样，您可以使用 $3、$4 和 $5 等等。在这种情况下不能使用 $1，因为记录以分隔符开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T02:45:31.497

```
$ awk '{print $1}' FPAT=[^,]+ foo.txt
dog
cat
mouse 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:51:32.320

您可以删除多个重复的字段`tr -s 'field'`：

```
$ tr -s ',' < your_file
,dog,111,222,333,444,
,cat,555,666,777,888,
,mouse,999,122,133,144, 
```

然后您可以通过以下方式访问`dog`等：

```
$ tr -s ',' < your_file | awk -F, '{print $2}'
dog
cat
mouse 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T08:41:07.680

```
awk -F, '{gsub(/^,*|,*$/,"");gsub(/,+/,",");print $1}' your_file 
```

测试如下：

```
> cat temp
,,,,dog,,,,,111,,,,222,,,333,,,444,,,
,,,,cat,,,,,555,,,,666,,,777,,,888,,,
,,,,mouse,,,,,999,,,,122,,,133,,,144,,, 
```

执行：

```
> awk -F, '{gsub(/^,*|,*$/,"");gsub(/,+/,",");print $1}' temp
dog
cat
mouse 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T09:19:23.127

```
perl -anF,+ -e 'print "$F[1]\n"' foo.txt
dog
cat
mouse 
```

这不是 awk，但您将使用 1 而不是 2。

# php - XML中的php访问子元素

> ID：16077945
> 
> 赞同：0
> 
> 时间：2013-04-18T08:24:08.240
> 
> 标签：php, xml-parsing

我在 PHP 中使用 simplexml 来解析 XML 文档。我有以下元素我无法创建到子元素之一的正确路径。这是元素：

```
<wp:category>
<wp:term_id>13</wp:term_id>
<wp:category_nicename>cleaner</wp:category_nicename>
<wp:category_parent></wp:category_parent>
<wp:cat_name><![CDATA[CLEANER]]></wp:cat_name> 
```

我需要访问的元素是`<wp:cat_name>`.

我将使用什么路径来访问数据？

李

* * *

$wp->类别->cat_name；是元素的路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:13:28.537

我认为您可以将您的 xml 作为 a 导入`DomDocument`而不保留名称空间

```
$xml ='
<wp:category>
    <wp:term_id>13</wp:term_id>
    <wp:category_nicename>cleaner</wp:category_nicename>
    <wp:category_parent></wp:category_parent>
    <wp:cat_name ><![CDATA[CLEANER]]></wp:cat_name>
</wp:category>';

$data = new DOMDocument;
$data->preserveWhiteSpace = FALSE;
$data->loadXml($xml, LIBXML_NOERROR);
foreach($data->documentElement->childNodes as $child)
{
    if($child->nodeName == 'cat_name')
    {
        print_r($child->nodeValue);
    }
} 
```

这将输出

```
CLEANER 
```

# mysql - 错误代码：1305 MySQL，函数不存在

> ID：16077946
> 
> 赞同：11
> 
> 时间：2013-04-18T08:24:09.813
> 
> 标签：mysql, function

我有个问题。我在 MySQL 中创建了一个函数，它返回一个字符串（varchar 数据类型）。

这是语法：

```
DELIMITER $$
USE `inv_sbmanis`$$
DROP FUNCTION IF EXISTS `SafetyStockChecker`$$

CREATE DEFINER=`root`@`localhost` FUNCTION `SafetyStockChecker`
(jumlah INT, safetystock INT)   
RETURNS VARCHAR(10) CHARSET latin1
BEGIN
DECLARE statbarang VARCHAR(10);
IF jumlah > safetystock THEN SET statbarang = "Stabil";
ELSEIF jumlah = safetystock THEN SET statbarang = "Perhatian";
ELSE SET statbarang = "Kritis";
END IF;
RETURN (statbarang);
END$$
DELIMITER ; 
```

当我调用函数时`call SafetyStockChecker(16,16)`，我得到这个错误：

> 查询：调用 SafetyStockChecker(16,16)
> 错误代码：1305
> PROCEDURE inv_sbmanis.SafetyStockChecker 不存在
> 执行时间：00:00:00:000
> 传输时间：00:00:00:000
> 总时间：00:00:00:000

功能有什么问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-18T08:26:19.390

这不是调用函数的正确方法。下面是一个调用函数的例子：

```
SELECT SafetyStockChecker(16,16) FROM TableName 
```

您现在正在做的方式是调用`STORED PROCEDURE`. 这就是为什么错误说：

> 过程 inv_sbmanis.SafetyStockChecker 不存在

因为它正在搜索存储过程而不是函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T08:36:02.060

你应该使用

```
SELECT SafetyStockChecker(16,16) 
```

# c# - 保存位图时 Alpha 值不保留

> ID：16077947
> 
> 赞同：2
> 
> 时间：2013-04-18T08:24:14.633
> 
> 标签：c#, .net

大家早上好，

我正在为大学做一个图像隐写术项目。在图像中隐藏数据时。我正在写“文本长度”，它是一个像素中的 Int32。因为 Int32 是 4 个字节。我想我可以把它写成 Alpha、Red、Green、Blue 的 4 个字节，因为每种颜色都是 1 个字节。然后我将图像保存为 bmp 格式。我使用单步和数据得到正确分布并设置在像素中。

当我读回像素时出现问题。R,G,B 有它们的价值，就像我设置它们一样。但无论设置什么，alpha 始终为 255。

我用于将 Int32 分配为 4 个字节的代码是

```
byte R, G, B, A;
int colorValue = messageLength;
int first = colorValue & 255;
//R contains bit 0-7 means the least significant 8 bits
R = (byte)first;
colorValue = colorValue - first;
int second = colorValue & 65535;
colorValue = colorValue - second;
second = second >> 8;
//G contains 8-15
G = (byte)second;
int third = colorValue & 16777215;
colorValue = colorValue - third;
third = third >> 16;
//B contains 16-23
B = (byte)third;
colorValue = colorValue >> 24;
//A contains 24-31
A = (byte)colorValue;
pixelColor = Color.FromArgb(A, R, G, B);
bitmap.SetPixel(location.X, location.Y, pixelColor); 
```

取回值的代码是

```
byte R, G, B, A;
R = pixelColor.R;
G = pixelColor.G;
B = pixelColor.B;
A = pixelColor.A;

messageLength = A;
messageLength = messageLength << 8;
messageLength += B;
messageLength = messageLength << 8;
messageLength += G;
messageLength = messageLength << 8;
messageLength += R; 
```

有什么我想念的吗。是不是 BMP 不允许 alpha 值持续存在？？？请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:27:05.957

很抱歉，Bitmap 不支持 alpha 值。

# ios - 带有月、日和周的 iPAD 日历控件

> ID：16077952
> 
> 赞同：2
> 
> 时间：2013-04-18T08:24:22.950
> 
> 标签：ios, ipad, calendar

我已经检查了谷歌足够的时间来获得一些好的 iPAD 日历控件 (UI) 与 iPAD 的本机日历应用程序相同。

例如，我有几个选择。Tapku 日历[http://developinginthedark.com/posts/iphone-tapku-calendar-markers](http://developinginthedark.com/posts/iphone-tapku-calendar-markers)它基本上适用于 iPhone，不显示周、月、日视图。我在我的一个应用程序中使用了 KAL。但同样适用于 iPhone，没有月、周、日视图。muhku 很好，接近我想要的。但它没有显示月视图。[https://github.com/muhku/calendar-ui](https://github.com/muhku/calendar-ui)？

我知道 EventKit 但它不能让您控制显示实际日历（据我所知）

有人可以建议我是否存在控件或库。它应该显示月、周、日视图和 iPAD。

或者，如果不是任何建议，我们将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:54:44.647

您可以查看[我的答案](https://stackoverflow.com/questions/16060301/how-to-add-default-calendar-programatically-in-iphone-sdk/16061467#16061467)，其中列出了所有可作为开源的日历控件。据我所知，我认为没有任何组件可以在一个控件中处理全天、一周和一个月，你必须合并任何两个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:35:35.310

试试 Apple 的[Event Kit](http://developer.apple.com/library/ios/#documentation/EventKitUI/Reference/EventKitUIFrameworkRef/_index.html)框架，它包含许多在日历视图等视图中显示和处理时间和日期的方法。祝你好运 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T08:54:26.043

[iOS 5 By Tutorials](http://www.raywenderlich.com/store/ios-5-by-tutorials)中有一个非常好的章节（第 29 章）向您展示了如何使用日历 API。

# c# - 如何在 C# 中拆分两个字符串并交换切片部分？

> ID：16077953
> 
> 赞同：0
> 
> 时间：2013-04-18T08:24:29.107
> 
> 标签：c#, string, split

我有一个数组，每个索引都包含一个包含四个字符的字符串。我需要在字符串中选择一个随机点，然后在同一点切片`stringaArray[0]`并`stringaArray[1]`交换它们切片的部分并将它们添加到`splicedStringArray[0]`and`splicedStringArray[1]`中。

我知道如何在 C# 中使用 split 并且我一直在尝试这个，但它只会将字符串拆分为字符，而不是部分。我问这个问题是因为我的思维方式是创建大量变量来保存临时字符串，然后将它们添加到`splicedStringArray[]`.

这是我最近一次尝试找到字符串的开始中间和结尾，并希望将我想要的任何内容复制到变量中以创建新字符串，然后将它们存储在第二个数组中：

```
 string s = stringaArray[0];
            char[] charArray = s.ToCharArray();

            int amount = charArray.Length;

            int findMiddle = amount / 2 + 1;

            int midchar = findMiddle - 1;
            int findLast = amount - 1;

            char fchar = charArray[0];
            char mchar = charArray[midchar];
            char lchar = charArray[findLast]; 
```

我也在看 C# 中的字符串生成器类，想知道那里是否有我可以使用的东西，但我想我会花很多时间在这上面，并开发最糟糕的解决方案，所以任何关于如何做到这一点的建议都将不胜感激.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:30:50.537

要在确切位置拆分，请使用[`String.Substring`](http://msdn.microsoft.com/en-us/library/system.string.substring.aspx). 通过这种方式，您可以拆分*到*某个点并*从*某个点开始。最简单的解决方案与此类似：

```
var offset = 1;
splicedStringArray[0] = stringArray[0].Substring(0, offset) + stringArray[1].Substring(offset);
splicedStringArray[1] = stringArray[1].Substring(0, offset) + stringArray[0].Substring(offset); 
```

免责声明：代码未经测试而编写。

# backbone.js - BackboneJS，MarionetteJS - 试图显示布局 + 区域

> ID：16077954
> 
> 赞同：0
> 
> 时间：2013-04-18T08:24:32.923
> 
> 标签：backbone.js, coffeescript, marionette

我有以下代码

```
$ ->

  class MainLayout extends Marionette.Layout
    template: Handlebars.compile $("#main_layout_hb").html()

    regions:
      header    : "#header"
      options   : "#options"
      footer    : "#footer"

  class MainRegion extends Marionette.Region
    el:"#main_wrap"

  class App extends Marionette.Application

    main_region : new MainRegion
    main_layout : new MainLayout

    onStart: =>
      @main_region.show(@main_layout)

      # start the backbone history for URL routing
      if Backbone.history
        Backbone.history.start()

  app = new App
  app.start() 
```

我正在尝试遵循此页面上的示例[https://github.com/marionettejs/backbone.marionette/wiki/The-relationship-between-regions-and-layouts](https://github.com/marionettejs/backbone.marionette/wiki/The-relationship-between-regions-and-layouts)

但是当我运行代码时，我没有将模板“#main_layout_hb”插入该区域。那里发生了什么事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:53:07.120

您应该使用 addRegions 方法创建应用程序的区域：

```
App.addRegions
    main_region: "#main_wrap" 
```

# html - 消息显示为“元素'标题'出现太多次。如何在此处使用单个“标题”标签？

> ID：16077964
> 
> 赞同：1
> 
> 时间：2013-04-18T08:24:49.503
> 
> 标签：html, razor, asp.net-mvc-4

消息显示为“元素'标题'出现太多次。如何在此处使用单个“标题”标签？

```
 <head>
        ...
        @if (ViewBag.Title != null)
        {
            <title>@ViewBag.Title</title>
        }
        else
        {
            <title>MyTitle</title>
        }
        ...
        </head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:30:41.797

您可以试试这个，它设置一个名为 title 的局部变量，并使用 null 合并运算符将其设置为 ViewBag.Title 或“MyTitle”（如果为空）。

```
@{var title = ViewBag.Title ?? "MyTitle";}
<title>@title</title> 
```

但实际上你最好在 ViewModel 中设置标题而不是使用 ViewBag。

# android - automatically stop recording in AudioRecord class

> ID：16077968
> 
> 赞同：0
> 
> 时间：2013-04-18T08:25:03.770
> 
> 标签：android, audio

I found the code for storing audio in .wav format from this [link](https://github.com/roman10/roman10-android-tutorial/tree/master/AndroidWaveRecorder).The code has two buttons to start and stop the recording.I want to stop the audio recording after sometime.It uses the AudioRecord class of Android to store audio.Is it possible to do so?

```
04-19 08:20:00.688: E/AndroidRuntime(2405): FATAL EXCEPTION: main
04-19 08:20:00.688: E/AndroidRuntime(2405): java.lang.RuntimeException: Unable to start    activity   ComponentInfo{com.example.androidwaverecorder/com.example.androidwaverecorder.MainActivity}:  java.lang.NullPointerException
04-19 08:20:00.688: E/AndroidRuntime(2405):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-19 08:20:00.688: E/AndroidRuntime(2405):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-19 08:20:00.688: E/AndroidRuntime(2405):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-19 08:20:00.688: E/AndroidRuntime(2405):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-19 08:20:00.688: E/AndroidRuntime(2405):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-19 08:20:00.688: E/AndroidRuntime(2405):     at android.os.Looper.loop(Looper.java:137)
04-19 08:20:00.688: E/AndroidRuntime(2405):     at android.app.ActivityThread.main(ActivityThread.java:5039)
04-19 08:20:00.688: E/AndroidRuntime(2405):     at java.lang.reflect.Method.invokeNative(Native Method)
04-19 08:20:00.688: E/AndroidRuntime(2405):     at java.lang.reflect.Method.invoke(Method.java:511)
04-19 08:20:00.688: E/AndroidRuntime(2405):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-19 08:20:00.688: E/AndroidRuntime(2405):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-19 08:20:00.688: E/AndroidRuntime(2405):     at dalvik.system.NativeStart.main(Native Method)
04-19 08:20:00.688: E/AndroidRuntime(2405): Caused by: java.lang.NullPointerException
04-19 08:20:00.688: E/AndroidRuntime(2405):     at   com.example.androidwaverecorder.MainActivity.onCreate(MainActivity.java:47)
04-19 08:20:00.688: E/AndroidRuntime(2405):     at  android.app.Activity.performCreate(Activity.java:5104)
04-19 08:20:00.688: E/AndroidRuntime(2405):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-19 08:20:00.688: E/AndroidRuntime(2405):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-19 08:20:00.688: E/AndroidRuntime(2405):     ... 11 more
04-19 08:31:55.766: E/Trace(2899): error opening trace file: No such file or directory (2)
04-19 08:31:55.766: W/Trace(2899): Unexpected value from nativeGetEnabledTags: 0
04-19 08:31:55.766: W/Trace(2899): Unexpected value from nativeGetEnabledTags: 0
04-19 08:31:55.766: W/Trace(2899): Unexpected value from nativeGetEnabledTags: 0
04-19 08:31:56.386: W/Trace(2899): Unexpected value from nativeGetEnabledTags: 0
04-19 08:31:56.386: W/Trace(2899): Unexpected value from nativeGetEnabledTags: 0
04-19 08:31:56.416: W/Trace(2899): Unexpected value from nativeGetEnabledTags: 0
04-19 08:31:56.416: W/Trace(2899): Unexpected value from nativeGetEnabledTags: 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:32:03.963

在 MainActivity 的 onCreate 中使用此代码

```
final Runnable r = new Runnable()
    {
        public void run() 
        {
            if (WavAudioRecorder.State.ERROR == mRecorder.getState()) {
                        mRecorder.release();
                        mRecorder = WavAudioRecorder.getInstanse();
                        mRecorder.setOutputFile(mRcordFilePath);
                        btnControl.setText("Start");
                    } else {
                        mRecorder.stop();
                        mRecorder.reset();
                        btnControl.setText("Start");
                    }
                }
        }
    };

    handler.postDelayed(r, YOUR TIME IN MILLISEC); 
```

**编辑**

```
 private static final String mRcordFilePath = Environment.getExternalStorageDirectory() + "/testwave.wav"; 
```

至

```
String mRcordFilePath = Environment.getExternalStorageDirectory() + "/testwave.wav"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T09:13:45.413

我找到了解决方案您可以使用 AsyncTask 来执行此操作。

简要说明如何做：当您开始录制时，在另一个类中创建一个线程，该线程将在所需的时间段内休眠，然后调用您的录制器停止函数。

```
public class Auto_Stop_Task extends AsyncTask<Void,Void, Integer> {
//int flag=0;
@Override
protected Integer doInBackground(Void... arg0) {

    try {
        Thread.sleep(30000);
        MainActivity.mRecorder.stop();
        MainActivity.mRecorder.reset();
        //flag=1;
    } catch (InterruptedException e) {

        e.printStackTrace();
    }
    return null;
}

} 
```

启动录音机后调用这个类。

```
new Auto_Stop_Task().execute(); 
```

感谢大家的帮助。

# c# - C# WindowsForms - Radio button comment/uncomment content of textbox keypress, textchanged and focusleave

> ID：16077969
> 
> 赞同：0
> 
> 时间：2013-04-18T08:25:07.747
> 
> 标签：c#, textbox, comments, radio-button

i have 3 radio buttons:

```
rbtPercentualmedioanual
rbtPercentualmensal
rbtValorfixo 
```

I would like to change options events for textbox1 according choosed option

If chose rbtValorfixo, It will uncomment:

```
private void textbox1_TextChanged(object sender, EventArgs e)
{
    //substituipontovirgula_textBox(sender as TextBox, e);
}

private void textbox1_Leave(object sender, EventArgs e)
{
    //formatamoeda_textBox(sender as TextBox, e);
}
private void textbox1_KeyPress(object sender, KeyPressEventArgs e)
{
    //numeropontoouvirgula_textBox(sender as TextBox, e);
    formatarporcentagem_textBox(sender as TextBox, e);
} 
```

and will comment

```
private void textbox1_KeyPress(object sender, KeyPressEventArgs e)
    {
        numeropontoouvirgula_textBox(sender as TextBox, e);
        //formatarporcentagem_textBox(sender as TextBox, e);
    } 
```

* * *

If choose option rbtPercentualmedioanual or rbtPercentualmensal, it will comment:

```
private void textbox1_TextChanged(object sender, EventArgs e)
{
    substituipontovirgula_textBox(sender as TextBox, e);
}

private void textbox1_Leave(object sender, EventArgs e)
{
    formatamoeda_textBox(sender as TextBox, e);
}
private void textbox1_KeyPress(object sender, KeyPressEventArgs e)
{
    numeropontoouvirgula_textBox(sender as TextBox, e);
    //formatarporcentagem_textBox(sender as TextBox, e);
} 
```

and will uncomment: formatarporcentagem_textBox

```
private void textbox1_KeyPress(object sender, KeyPressEventArgs e)
{
    //numeropontoouvirgula_textBox(sender as TextBox, e);
    //formatarporcentagem_textBox(sender as TextBox, e);
} 
```

i dont know how comment/uncomment keypress, textchanged or focusleave event using radiobutton check, only say how, not need make all, i can do it, but i have to know if its possible and if is, how ?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:29:29.370

您可以通过 radioButton.Checked 属性确定是否选中了单选按钮或复选框。

在您的情况下，它将是这样的：

```
private void textbox1_TextChanged(object sender, EventArgs e)
{
    if(!rbtValorfixo.Checked)
      substituipontovirgula_textBox(sender as TextBox, e);
} 
```

或者：

```
private void textbox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if(rbtValorfixo.Checked)
      numeropontoouvirgula_textBox(sender as TextBox, e);
    else
      formatarporcentagem_textBox(sender as TextBox, e);
} 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:34:57.097

你可能想使用这样的东西？不确定，因为它很不清楚你想说什么。private void Operation_Changed(object sender, EventArgs e) { RadioButton rbt = sender as RadioButton; 如果（btn！= null）

```
 {
                case "rbtPercentualmedioanual":
                    _operation = new example2();
                    example1.Visible = true;
                    example2.Visible = true;
                    example3.Visible = false;

                    return;

                case "rbtPercentualmensal":
                    _operation = new example3();
                    example1.Visible = true;
                    example2.Visible = true;
                    example3.Visible = false;

                    return;

                case "rbtValorfixo":
                    _operation = new example1();
                    example1.Visible = true;
                    example2.Visible = true;
                    example3.Visible = false;

                default:
                    break; 
```

并将其更改为您要显示的内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:30:03.457

您不需要注释或取消注释代码。在编程语言中，您需要注意正确的结构。

在这个相当简单的情况下，您只需要一个“if”块。

[这可能会有所帮助](http://msdn.microsoft.com/en-gb/library/5011f09h%28v=vs.80%29.aspx)

# git - git produces Gtk-WARNING: cannot open display

> ID：16077971
> 
> 赞同：140
> 
> 时间：2013-04-18T08:25:18.420
> 
> 标签：git, version-control, github, ssh

I've been working on my project remotely through the command line on a machine to which I don't have admin rights and after running `git push origin master` I get the following error message:

```
(gnome-ssh-askpass:29241): Gtk-WARNING **: cannot open display: 
```

My `.git/config` file has the following contents:

> ```
>  [core]
>        repositoryformatversion = 0
>        filemode = true
>        bare = false
>        logallrefupdates = true 
>     [remote "origin"]
>        fetch = +refs/heads/*:refs/remotes/origin/*
>        url = https://username@github.com/username/repository.git 
>     [branch "master"]
>        remote = origin
>        merge = refs/heads/master 
> ```

I was getting the 403 error earlier. Following the comment [here](https://stackoverflow.com/questions/7438313/pushing-to-git-returning-error-code-403-fatal-http-request-failed/9575906#9575906), I put my username before the @ sign in the remote url and since then, I've been getting the Gtk error.

When I login to the machine using `ssh -X` and try to push, I get the following error:

```
X11 connection rejected because of wrong authentication.
(gnome-ssh-askpass:31922): Gtk-WARNING **: cannot open display:localhost:10.0 
```

If I change the url of the remote to `git@github.com:username/repository.git`, then the error is:

```
ssh: connect to host github.com port 22: Connection timed out
fatal: The remote end hung up unexpectedly 
```

Do you know how to fix this?

* * *

## 回答 #1

> 赞同：344
> 
> 时间：2013-04-19T12:19:52.567

我终于找到了解决问题的方法。正如这里所描述[的](http://kartzontech.blogspot.it/2011/04/how-to-disable-gnome-ssh-askpass.html)，我在终端中运行了以下命令：

```
 unset SSH_ASKPASS 
```

然后`git push origin master`以应有的方式运行。您还可以将该行添加到您的`.bashrc`文件中。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-01-20T19:25:29.967

我最近在我们的 Git 版本为 1.7.4.1 的 RedHat 5 机器上处理了这种行为。

我没有高度的信心`unset SSH_ASKPASS`不会产生意想不到的后果，所以我想看看是否有其他解决方案。

我无法确定，但似乎在我们的 Git 版本发布的同时，[针对这个问题的补丁正在开发中。](http://git.661346.n2.nabble.com/git-calls-SSH-ASKPASS-even-if-DISPLAY-is-not-set-td5825303.html)因此，在我看来，希望更新的版本能够纠正这种行为是合理的。

确实如此。**升级到 Git 的 1.8 分支解决了这个问题。** 由于某些奇怪的原因，错误消息仍然显示，但系统会正确提示您输入密码并允许继续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-13T20:05:11.637

这些答案都不适合我（通过 Windows 10 上的 Cygwin SSH 到 RHEL 6.8 服务器并尝试从 RHEL 框中克隆 github.com 存储库）所以我所做的是通过 SSH 密钥而不是 HTTPS 用户名/密码。例如，我使用 git@github.com:MyUsername/myproject.git 而不是 https url。我还适当地将我的公钥上传到了 Github。这种方法效果很好。

注：以上解决方案中，我其实并没有尝试升级到 git 的 1.8 分支

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-14T07:13:42.557

您也可以尝试使用 ssh -Y 登录到远程服务器，以便以图形方式显示对话框。

与 OP 一样，通过 ssh -X 登录也不起作用。尝试推送时，服务器只是重复了相同的错误消息 -`(gnome-ssh-askpass:29241): Gtk-WARNING **: cannot open display:`就像在没有 X11 转发的情况下通过 ssh 登录时一样。这与 OP 在尝试 ssh -X 时报告的行为略有不同，因为他的错误消息与仅使用 ssh 略有不同。

但是，对我来说，一旦使用 ssh -Y: 登录没有错误，弹出密码对话框，我输入密码，GitHub 接受了推送。

作为预警， ssh -Y 可能会引发安全问题，因为您将远程服务器视为受信任的客户端（[https://askubuntu.com/questions/35512/what-is-the-difference-between-ssh-y-受信任的 x11 转发和 ssh-xu](https://askubuntu.com/questions/35512/what-is-the-difference-between-ssh-y-trusted-x11-forwarding-and-ssh-x-u)）。所以使用的时候要小心。

# python - 如何从 PyQt 组合框获取当前值

> ID：16077973
> 
> 赞同：0
> 
> 时间：2013-04-18T08:25:22.503
> 
> 标签：python, qt, pyqt

我正在使用 PyQt 设计器，然后使用 pyuic4 对其进行转换。
我的 ui 文件有这个组合框，如下所示：

```
 self.comboBox = QtGui.QComboBox(self.groupBox_3)
    self.comboBox.setGeometry(QtCore.QRect(20, 30, 81, 22))
    self.comboBox.setObjectName(_fromUtf8("comboBox"))
    self.comboBox.addItem(_fromUtf8(""))
    self.comboBox.addItem(_fromUtf8(""))
    self.comboBox.addItem(_fromUtf8(""))
    self.comboBox.addItem(_fromUtf8(""))
    self.comboBox.addItem(_fromUtf8(""))
    self.comboBox.addItem(_fromUtf8(""))
    self.comboBox.addItem(_fromUtf8(""))
    self.comboBox.addItem(_fromUtf8(""))
    self.comboBox.addItem(_fromUtf8(""))
    self.comboBox.addItem(_fromUtf8(""))
    self.comboBox.addItem(_fromUtf8(""))
    self.comboBox.addItem(_fromUtf8("")) 
```

如您所见，我放在组合框中的文本没有显示在这部分代码中，但它确实显示在 gui 中。

通常当我有一些用户选择时，比如单选按钮，我可以做这个检查：

```
if self.RAnkle.isChecked(): 
```

我可以用输入文本做类似的事情。我正在尝试使用组合框执行此逻辑，就像我想说 self.comboBox.getText() 并返回用户选择的字符串一样。[我尝试在这个http://pyqt.sourceforge.net/Docs/PyQt4/qcombobox.html](http://pyqt.sourceforge.net/Docs/PyQt4/qcombobox.html)上做一些项目， 但我无法让它工作。

例如，这段代码：

```
self.comboBox.activated() 
```

返回此错误消息：

```
TypeError: native Qt signal is not callable 
```

我也尝试使用 itemData() 但我仍然收到错误：

```
TypeError: QComboBox.itemData(int, int role=Qt.UserRole): not enough arguments 
```

我在回调内部这样做，所以我首先这样做：

```
self.analyzeButton.clicked.connect(self._AnalyzeData) 
```

然后在函数 _AnalyzeData 我试图获取当前组合框项的文本。

那么，这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:25:29.343

好吧，关于您的错误，它们不是很不言自明吗？:-)

从您刚刚链接的文档中：

> 无效激活（int）
> 
> 这是此信号的默认重载。当用户在组合框中选择一个项目时发送此信号。项目的索引被传递。请注意，即使选择未更改，也会发送此信号。如果您需要知道选择何时实际更改，请使用信号 currentIndexChanged()。

作为 Qt 信号，它不能直接被调用：它可以被发射，并且您可以创建一个在它发生时将被调用的槽。

> QVariant QComboBox.itemData (self, int index, int role = Qt.UserRole)
> 
> 返回组合框中给定索引中给定角色的数据，如果没有此角色的数据，则返回 QVariant.Invalid。
> 
> 另请参见 setItemData()。

角色参数有一个默认值，所以你可以省略它，但你必须给出索引。

很高兴你找到了解决方案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T08:59:34.987

如果你想通过参数调用一个`SLOT`in `connect function`，你应该使用 lambda，例如：

```
QtCore.QObject.connect(self.pushButton_2, QtCore.SIGNAL(_fromUtf8("clicked()")), 
                               lambda: self.materialsInstance.setFilterDict_Insert("L",self,"name",self.lineEdit.text())) 
```

# java - 无法访问 Camera 类型的封闭实例

> ID：16077978
> 
> 赞同：2
> 
> 时间：2013-04-18T08:25:39.257
> 
> 标签：java, android, camera

大家好，我正在开发一个需要使用相机的应用程序，但我的代码遇到了这个问题：

> 无法访问 Camera 类型的封闭实例。必须在“this.preSize_ = new Camera(0,0);”行上使用 Camera 类型的封闭实例（例如 xnew A()，其中 x 是 Camera 的实例）来限定分配；有什么帮助吗？或建议？

```
private void setupCamera()
  {
    this.camera_ = Camera.open();
    Camera localCamera = this.camera_;
    localCamera.getClass();
    this.preSize_ =  new Camera.Size(0,0);
    Camera.Parameters localParameters = this.camera_.getParameters();
    Iterator<Camera.Size> localIterator1 = localParameters.getSupportedPreviewSizes().iterator();
    Camera.Size localSize2;
    do
    {
      if (!localIterator1.hasNext())
        break;
      localSize2 = (Camera.Size)localIterator1.next();
      this.preSize_ = localSize2;
    }
    while ((localSize2.width != this.previewWidth) && (localSize2.height != this.previewHeight));
    localParameters.setPreviewSize(this.preSize_.width, this.preSize_.height);
    Iterator<Camera.Size> localIterator2 = localParameters.getSupportedPictureSizes().iterator();
    Camera.Size localSize1;
    do
    {
      if (!localIterator2.hasNext())
        break;
      localSize1 = (Camera.Size)localIterator2.next();
      this.procSize_ = localSize1;
    }
    while ((localSize1.width != this.processWidth) && (localSize1.height != this.processHeight));
    localParameters.setPictureSize(this.procSize_.width, this.procSize_.height);
    this.camera_.setParameters(localParameters);
    this.camera_.setDisplayOrientation(90);
    try
    {
      this.camera_.setPreviewDisplay(this.surfaceHolder_);
      this.camera_.startPreview();
      return;
    }
    catch (Exception localException)
    {
      while (true)
        localException.printStackTrace();
    }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:05:45.210

Size类是Camera的一个非静态类。因此，您只能从 Camera 类的封闭实例创建它。像这样：

```
this.preSize_ = localCamera.new Size(0,0); 
```

# ios - Worklight iOS 本机构建在 Jenkins 上失败

> ID：16077979
> 
> 赞同：1
> 
> 时间：2013-04-18T08:25:44.207
> 
> 标签：ios, ant, jenkins, ibm-mobilefirst

我正在尝试为 Worklight 混合应用程序构建 Jenkins。我能够构建应用程序的混合部分，但是当我尝试创建 .ipa 文件时，构建失败。我正在使用 Worklight 文档中的示例 ANT 脚本。构建实际上是成功的，但没有创建 ipa。当脚本执行 xcrun 命令时

```
 <exec
        dir="${wlappdir}/${mobilePlatform}/native"
        executable="${iosPackageCMD}"
        failonerror="false"
        output="${iosPackageCMDlog}"
        resultproperty="iosPackageCMDResult" >

        <arg value="-sdk" />

        <arg value="iphoneos" />

        <arg value="PackageApplication" />

        <arg value="${wlappdir}/${mobilePlatform}/native/build/Release-iphoneos/${wlApp}.app" />

        <arg value="-o" />

        <arg value="${local.ipaPath}/${wlApp}-${version}.ipa" />

        <arg value="--sign" />

        <arg value="${certificate}" />

        <arg value="--embed" />

        <arg value="${provisioning.profile}" />

        <arg value="-verbose" />
    </exec> 
```

我在日志中收到以下错误：

```
error: Specified application doesn't exist or isn't a bundle directory : '[my path]/JQMShowcase.app' 
```

当我查看工作区时，该文件肯定在那里。我也很确定所有变量对于脚本都是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T21:54:02.587

我们目前正在使用 Jenkins 1.518 和 XCode 集成插件 1.3.3。来自[https://wiki.jenkins-ci.org/display/JENKINS/Xcode+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Xcode+Plugin)。

我们正在通过 Jenkins 提供的 Web 界面配置和使用它，所以很遗憾我对您的确切问题并不熟悉。

* * *

对于 Worklight 构建，我们根据以下内容执行 worklight ANT 任务：

[http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m6/topic/com.ibm.worklight.help.doc/devref/r_ant_tasks_for_building_and_dep.html?resultof=%22%61%6e%74%22%20](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m6/topic/com.ibm.worklight.help.doc/devref/r_ant_tasks_for_building_and_dep.html?resultof=%22%61%6e%74%22%20)

* * *

对于 iOS 构建，我们有第二个 jenkins 服务器，它由第一个启动，一旦 worklight 构建完成并使用 FTP 将 iOS 本机文件夹复制到正确的位置：

我们必须在 Jenkins 全局配置中配置 Xcode Builder 配置：

```
xcodebuild executable path  /usr/bin/xcodebuild
agvtool executable path /usr/bin/agvtool
xcrun executable path   /usr/bin/xcrun 
```

在 iOS 项目的特定构建作业中，我们有 2 个构建步骤：执行 Shell 和 XCode：

执行 Shell 构建步骤：xcode 插件构建之前的一些命令（MASTER_BUILD_NUMBER 是一个简单的字符串参数，我们设置/传递以参数化我们的构建）：

```
echo $MASTER_BUILD_NUMBER
rm -rf Build_*
cp -rf /Users/Shared/Jenkins/UPLOAD/$MASTER_BUILD_NUMBER .
cd $MASTER_BUILD_NUMBER/native
chmod u+x buildtime.sh 
```

XCode 构建步骤：对于我们配置的构建的 xcode 插件部分：

*   Xcode 项目目录：${MASTER_BUILD_NUMBER}/native
*   选中“构建 IPA”复选框
*   构建输出目录：${HOME}/Home/jobs/XCODE_buildTest1/workspace/${MASTER_BUILD_NUMBER}/native/build/Release-iphoneos
*   代码签名身份：iPhone 发行：XXX Ltd.
*   嵌入式配置文件：${HOME}/Library/MobileDevice/Provisioning Profiles/XXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXXX.mobileprovision

（.. XXX 是我们公司的特定数据）

# c# - wpf - Data Template, change template with button

> ID：16077981
> 
> 赞同：2
> 
> 时间：2013-04-18T08:25:46.473
> 
> 标签：c#, wpf, xaml

my task is to make DataTemplate list, and create a button for changing the view. I have the "Data" and "FootballTeam" classes, and also I have the Static Resources. I need help for the button event, how can I change the current template?

As a tip, the example says to use this method:

"this.Resources[resource-key] as data-type;"

The XAML:

```
<Window x:Class="WpfApplication11.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"
        Height="250"
        Width="300">
  <Window.Resources>
    <DataTemplate x:Key="teamName">
      <TextBlock FontWeight="Bold"
                 Text="{Binding Path=TeamName}"></TextBlock>
    </DataTemplate>
    <DataTemplate x:Key="year">
      <TextBlock Text="{Binding Path=FoundingYear}"></TextBlock>
    </DataTemplate>
    <DataTemplate x:Key="logo">
      <Image Source="{Binding Path=Image}" />
    </DataTemplate>

  </Window.Resources>
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="*" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <ScrollViewer  Grid.Row="0"
                   AllowDrop="True">
      <ListBox Name="lstTeams">

      </ListBox>
    </ScrollViewer>
    <Button Grid.Row="1"
            Margin="6">Change View</Button>
  </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:25:33.673

我猜你想改变列表框模板，试试这个：

在 XAML 中

```
<Button Grid.Row="1" Margin="6" Click="changeTemplate">Change View</Button> 
```

在 C# 中

```
lstTeams.ItemTemplate = (DataTemplate)this.Resources["teamname"]; 
```

您必须处理要循环浏览的不同模板，但这几乎是如何在代码隐藏中进行的。

# postgresql - Postgresql 9.x: Index to optimize `xpath_exists` (XMLEXISTS) queries

> ID：16077982
> 
> 赞同：3
> 
> 时间：2013-04-18T08:25:51.430
> 
> 标签：postgresql, postgresql-9.1, postgresql-9.2

We have queries of the form

```
select sum(acol)
where xpath_exists('/Root/KeyValue[Key="val"]/Value//text()', xmlcol) 
```

What index can be built to speed up the where clause ?

A btree index created using

```
create index idx_01 using btree(xpath_exists('/Root/KeyValue[Key="val"]/Value//text()', xmlcol)) 
```

does not seem to be used at all.

**EDIT**

Setting `enable_seqscan` to `off`, the query using `xpath_exists` is much faster (one order of magnitude) and clearly shows using the corresponding index (the btree index built with `xpath_exists`).

Any clue why PostgreSQL would not be using the index and attempt a much slower sequential scan ?

Since I do not want to disable sequential scanning globally, I am back to square one and I am happily welcoming suggestions.

**EDIT 2 - Explain plans**

See below - Cost of first plan (seqscan off) is slightly higher but processing time *much* faster

```
b2box=# set enable_seqscan=off;
SET
b2box=# explain analyze
Select count(*) 
from B2HEAD.item
where cluster = 'B2BOX' and (  ( xpath_exists('/MessageInfo[FinalRecipient="ABigBank"]//text()', content) )  )  offset 0 limit 1;
                                                                           QUERY PLAN
-----------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=22766.63..22766.64 rows=1 width=0) (actual time=606.042..606.042 rows=1 loops=1)
   ->  Aggregate  (cost=22766.63..22766.64 rows=1 width=0) (actual time=606.039..606.039 rows=1 loops=1)
         ->  Bitmap Heap Scan on item  (cost=1058.65..22701.38 rows=26102 width=0) (actual time=3.290..603.823 rows=4085 loops=1)
               Filter: (xpath_exists('/MessageInfo[FinalRecipient="ABigBank"]//text()'::text, content, '{}'::text[]) AND ((cluster)::text = 'B2BOX'::text))
               ->  Bitmap Index Scan on item_counter_01  (cost=0.00..1052.13 rows=56515 width=0) (actual time=2.283..2.283 rows=4085 loops=1)
                     Index Cond: (xpath_exists('/MessageInfo[FinalRecipient="ABigBank"]//text()'::text, content, '{}'::text[]) = true)
 Total runtime: 606.136 ms
(7 rows) 
```

[plan on explain.depesz.com](http://explain.depesz.com/s/CwV)

```
b2box=# set enable_seqscan=on;
SET
b2box=# explain analyze
Select count(*) 
from B2HEAD.item
where cluster = 'B2BOX' and (  ( xpath_exists('/MessageInfo[FinalRecipient="ABigBank"]//text()', content) )  )  offset 0 limit 1;
                                                                           QUERY PLAN
-----------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=22555.71..22555.72 rows=1 width=0) (actual time=10864.163..10864.163 rows=1 loops=1)
   ->  Aggregate  (cost=22555.71..22555.72 rows=1 width=0) (actual time=10864.160..10864.160 rows=1 loops=1)
         ->  Seq Scan on item  (cost=0.00..22490.45 rows=26102 width=0) (actual time=33.574..10861.672 rows=4085 loops=1)
               Filter: (xpath_exists('/MessageInfo[FinalRecipient="ABigBank"]//text()'::text, content, '{}'::text[]) AND ((cluster)::text = 'B2BOX'::text))
               Rows Removed by Filter: 108945
 Total runtime: 10864.242 ms
(6 rows) 
```

[plan on explain.depesz.com](http://explain.depesz.com/s/XBY)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T01:24:17.233

## 计划员成本参数

> 第一个计划（seqscan off）的成本略高，但处理时间要快得多

这告诉我你的`random_page_cost`和`seq_page_cost`可能是错的。您可能使用具有快速随机 I/O 的存储 - 要么是因为大多数数据库都缓存在 RAM 中，要么是因为您使用的是 SSD、带缓存的 SAN 或其他随机 I/O 本身就很快的存储。

尝试：

```
SET random_page_cost = 1;
SET seq_page_cost = 1.1; 
```

大大减少成本参数差异然后重新运行。如果这样做可以考虑更改`postgresql.conf.`.

您的行数估计值是合理的，因此它看起来不像是规划器错误估计问题或表统计信息错误的问题。

## 查询不正确

您的查询也不正确。`OFFSET 0 LIMIT 1`没有 an`ORDER BY`会产生不可预知的结果，除非你保证只有一个匹配，在这种情况下，这些`OFFSET ... LIMIT ...`子句是不必要的，可以完全删除。

你通常最好尽可能地表达这样的`SELECT max(...)`查询`SELECT min(...)`；PostgreSQL 将倾向于能够使用索引来获取所需的值，而无需进行昂贵的表扫描或索引扫描和排序。

## 提示

顺便说一句，对于未来的问题，PostgreSQL wiki 在[性能类别](http://wiki.postgresql.org/wiki/Category%3aPerformance)中有一些很好的信息，并提供了询问[慢查询问题](http://wiki.postgresql.org/wiki/Slow_Query_Questions)的指南。

# php - （错误）试图获取非对象的属性（Facebook PHP SDK）

> ID：16077984
> 
> 赞同：2
> 
> 时间：2013-04-18T08:25:59.217
> 
> 标签：php, facebook, properties, oauth

我试图呼应我的名字，但出现错误：尝试获取非对象的属性。请帮忙。尽管获取应用程序访问令牌没有问题，但我在获取用户访问令牌时也遇到了问题。

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>
</head>
<body>
<?php 

require_once('facebook.php');
$config = array();
$config['appId'] = "MY_APP_ID";
$config['secret'] ="MY_APP_SECRET";
$facebook = new Facebook($config);

$app_id = "MY_APP_ID";
$app_secret = "MY_APP_SECRET";
$my_url = "http://localhost:8080/samplewebsite/index.php/";

$code = $_REQUEST['code'];

if(empty($code))
{
    $_SESSION['state'] = md5(uniqid(rand(),TRUE));
    $dialog_url = "https://www.facebook.com/dialog/oauth?client_id="
               . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state=" . $_SESSION['state']
               . "&scope=publish_actions,read_stream";
    header("Location: " . $dialog_url);
}
else 
{
    echo "Hello, your OAuth code is " . $code . "<br>";           
}

if ($_REQUEST['state'] == $_SESSION['state'])
{
    $facebook->api('oauth/access_token',array(
       'client_id' => $app_id,
       'client_secret' => $app_secret,
       'type' => 'client_cred',
       'code' => $code,
    ));

    $token = $facebook->getAccessToken();
    echo "<br>" . "Hello, Your access_token is: " .  $token;

    $graph_url = "https://graph.facebook.com/me?access_token=" . $token;
    //$user = json_decode(file_get_contents($graph_url));
    //echo $user->name;

    function curl($url) {
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); //Set curl to return the data instead of printing it to the browser.
        curl_setopt($ch, CURLOPT_URL, $url);
        $data = curl_exec($ch);
        curl_close($ch);
        return $data;

    }
    $user = json_decode(curl($graph_url));
    echo $user->name;
}

?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:45:26.563

您正在尝试`echo $user->name`但[`json_decode`](http://php.net/json_decode)默认情况下不会返回对象。它返回一个关联数组，除非您`TRUE`作为第二个参数传入。

所以如果你改变：

`$user = json_decode(curl($graph_url));`

至：

`$user = json_decode(curl($graph_url), TRUE);`

它可能会按您的意愿工作。如果没有，请尝试查看您的`curl()`调用返回的内容，然后查看`$user`实际包含的内容，例如`var_dump()`.

# gwt - GWT AutoBean 类别

> ID：16077985
> 
> 赞同：0
> 
> 时间：2013-04-18T08:26:04.717
> 
> 标签：gwt, autobean

我正在尝试让 AutoBean 中的 @Category(class) 工作。

我有一个简单的工厂

```
import com.google.web.bindery.autobean.shared.AutoBean;
import com.google.web.bindery.autobean.shared.AutoBeanFactory.Category;

@Category(TestCategory.class)
public interface TestFactory {
    AutoBean<Test> test();
} 
```

和类别类

导入 com.google.web.bindery.autobean.shared.AutoBean；

```
public class TestCategory {
    public static String asString(AutoBean<Test> instance) {
        return "as a string";
    }
} 
```

和测试接口。

```
public interface Test {
    String getValue();
    void setValue(String value);
    String asString();
} 
```

这三个都在同一个包中。

当我尝试编译 GWT 项目时，我收到以下错误消息

```
 [java]    Resolving com.mycompany.my_gwt_project.client.test.TestFactory
 [java]       Found type 'com.mycompany.my_gwt_project.client.test.TestFactory'
 [java]          [ERROR] Annotation error: cannot resolve com.mycompany.my_gwt_project.client.test.TestCategory
 [java]    java.lang.ClassNotFoundException: com.mycompany.my_gwt_project.client.test.TestCategory
 [java]     at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
 [java]     at java.security.AccessController.doPrivileged(Native Method)
 [java]     at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
 [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
 [java]     at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
 [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
 [java]     at java.lang.Class.forName0(Native Method)
 [java]     at java.lang.Class.forName(Class.java:249)
 [java]     at com.google.gwt.dev.javac.TypeOracleMediator.resolveAnnotationValue(TypeOracleMediator.java:750)
 [java]     at com.google.gwt.dev.javac.TypeOracleMediator.resolveAnnotationValue(TypeOracleMediator.java:689)
 [java]     at com.google.gwt.dev.javac.TypeOracleMediator.createAnnotation(TypeOracleMediator.java:498)
 [java]     at com.google.gwt.dev.javac.TypeOracleMediator.resolveAnnotation(TypeOracleMediator.java:648)
 [java]     at com.google.gwt.dev.javac.TypeOracleMediator.resolveAnnotations(TypeOracleMediator.java:663)
 [java]     at com.google.gwt.dev.javac.TypeOracleMediator.resolveClass(TypeOracleMediator.java:809)
 [java]     at com.google.gwt.dev.javac.TypeOracleMediator.addNewTypes(TypeOracleMediator.java:439)
 [java]     at com.google.gwt.dev.javac.TypeOracleMediatorFromSource.addNewUnits(TypeOracleMediatorFromSource.java:52)
 [java]     at com.google.gwt.dev.javac.CompilationState.assimilateUnits(CompilationState.java:164)
 [java]     at com.google.gwt.dev.javac.CompilationState.<init>(CompilationState.java:82)
 [java]     at com.google.gwt.dev.javac.CompilationStateBuilder.doBuildFrom(CompilationStateBuilder.java:466)
 [java]     at com.google.gwt.dev.javac.CompilationStateBuilder.buildFrom(CompilationStateBuilder.java:388)
 [java]     at com.google.gwt.dev.cfg.ModuleDef.getCompilationState(ModuleDef.java:373)
 [java]     at com.google.gwt.dev.Precompile.precompile(Precompile.java:246)
 [java]     at com.google.gwt.dev.Precompile.precompile(Precompile.java:229)
 [java]     at com.google.gwt.dev.Precompile.precompile(Precompile.java:141)
 [java]     at com.google.gwt.dev.Compiler.run(Compiler.java:232)
 [java]     at com.google.gwt.dev.Compiler.run(Compiler.java:198)
 [java]     at com.google.gwt.dev.Compiler$1.run(Compiler.java:170)
 [java]     at com.google.gwt.dev.CompileTaskRunner.doRun(CompileTaskRunner.java:88)
 [java]     at com.google.gwt.dev.CompileTaskRunner.runWithAppropriateLogger(CompileTaskRunner.java:82)
 [java]     at com.google.gwt.dev.Compiler.main(Compiler.java:177)
 [java]          [ERROR] Annotation error: expected class java.lang.Class, got null 
```

有人有任何线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:02:52.927

您必须将`javac`您的类包含在 DevMode 的类路径中。

不幸的是，这是 GWT 当前设计的一个已知限制：[https ://code.google.com/p/google-web-toolkit/issues/detail?id=7602](https://code.google.com/p/google-web-toolkit/issues/detail?id=7602)

# c++ - 主要放在哪里，在哪里写什么？

> ID：16077987
> 
> 赞同：1
> 
> 时间：2013-04-18T08:26:06.923
> 
> 标签：c++, main

我在文件中有以下代码`tested.cpp`：

```
#include <iostream>
using namespace std;

class tested {
    private:
        int x;
    public:
        tested(int x_inp) {
            x = x_inp;
        }

        int getValue() {
            return x;
        }
}; 
```

我还有另一个文件（称为`testing.cpp`）：

```
#include <cppunit/extensions/HelperMacros.h>
#include "tested.cpp"

class TestTested : public CppUnit::TestFixture
{
    CPPUNIT_TEST_SUITE(TestTested);
    CPPUNIT_TEST(check_value);
    CPPUNIT_TEST_SUITE_END();

    public:
        void check_value();
};

CPPUNIT_TEST_SUITE_REGISTRATION(TestTested);

void TestTested::check_value() {
    tested t(3);
    int expected_val = t.getValue();
    CPPUNIT_ASSERT_EQUAL(7, expected_val);
} 
```

当我尝试编译`testing.cpp`文件时，我得到：`undefined reference to`main'`。嗯，这是因为我没有 main（程序的入口点）。因此，编译器不知道如何开始执行代码。

但我不清楚的是如何执行`testing.cpp`. 我试图添加：

```
int main() {
        TestTested t();
        return 1;
} 
```

但是，它不打印任何内容（并且预计会返回错误消息，因为 3 不等于 7）。

有谁知道运行单元测试的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:11:29.430

既然您正在编写 cppunit 测试，为什么不查看 cppunit doc 呢？( [http://cppunit.sourceforge.net/doc/lastest/cppunit_cookbook.html](http://cppunit.sourceforge.net/doc/lastest/cppunit_cookbook.html) )

它告诉你主要的写法是这样的：

```
#include <cppunit/ui/text/TestRunner.h>
#include "ExampleTestCase.h"
#include "ComplexNumberTest.h"

int main( int argc, char **argv) {
  CppUnit::TextUi::TestRunner runner;
  runner.addTest( ExampleTestCase::suite() );
  runner.addTest( ComplexNumberTest::suite() );
  runner.run();
  return 0;
} 
```

# angularjs - AngularJS：与哈希的链接被 urlencoded

> ID：16077995
> 
> 赞同：0
> 
> 时间：2013-04-18T08:26:36.360
> 
> 标签：angularjs

我有一个链接`http://localhost:8000/#?4047=27.20#4047`

如果我将其粘贴并重新加载页面，一切正常。

如果我做一个像这样的链接

```
<a href="{{ location.$$absUrl }}" target="_blank">same</a> 
```

它工作正常。

如果我将链接粘贴到我的电子邮件或笔记软件中，链接看起来很好。但是，当我单击它时，它会被 urlencoded 并失败

```
http://localhost:8000/#?4047=27.20%234047 
```

所以，`$location.hash()`是空的。

我主要使用 chrome。Safari 类似，但稍差一些。我粘贴进去`http://localhost/#/?9189=668.00&7010=128.00#7010,9189`，它变成了`http://localhost/#/?9189=668.00&7010=128.00%237010,9189`，我的应用程序中断了。

Firefox 似乎没有对 #​​ 进行编码并按照我想要的方式处理它。人力资源管理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T18:28:51.040

也许我更愿意把它放在配置中的某个地方。但是，出于我的目的，如果需要，我可以在控制器的早期“更正”url。

```
// aint nobody got time fo dat
$location.url($location.url().replace('%23', '#')); 
```