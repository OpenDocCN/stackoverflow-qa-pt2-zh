# StackOverflow 问答 15023000-15023999

# xml - XSLT 1.0 Find unique node with Highest value

> ID：15023006
> 
> 赞同：0
> 
> 时间：2013-02-22T11:20:17.467
> 
> 标签：xml, xpath, xslt-1.0, transformation, xslt-grouping

I am beginner in XSLT 1.0\. I am facing an issue when i tried to find unique node with Highest value.

**Source XML:**

```
<Response>
    <Flight>
        <From>A</From>
        <To>B</To>
        <Passengers>
            <Passenger>
                <Fare>200</Fare>
                <Fee>15</Fee>
                <Type>ADT</Type>
            </Passenger>
            <Passenger>
                <Fare>200</Fare>
                <Fee>15</Fee>
                <Type>ADT</Type>
            </Passenger>
            <Passenger>
                <Fare>150</Fare>
                <Fee>15</Fee>
                <Type>CHD</Type>
            </Passenger>
        </Passengers>
    </Flight>
    <Flight>
        <From>B</From>
        <To>A</To>
        <Passengers>
            <Passenger>
                <Fare>250</Fare>
                <Fee>25</Fee>
                <Type>ADT</Type>
            </Passenger>
            <Passenger>
                <Fare>250</Fare>
                <Fee>25</Fee>
                <Type>ADT</Type>
            </Passenger>
            <Passenger>
                <Fare>100</Fare>
                <Fee>25</Fee>
                <Type>CHD</Type>
            </Passenger>
        </Passengers>
    </Flight>
</Response> 
```

As shown in above XML, There is a round trip result for A-B origin destination and i am going to purchase tickets for both the flights. i need to calculate total fare, fee (whichever is highest from both the Flights) and its total price.

**Expected Output:**

```
<Result>
    <PassengerGroup TotalFare="1150" TotalFee="75" TotalPrice="1225"/>
</Result> 
```

Here,

*   `TotalFare` is sum of all the `Fare` tag.
*   `TotalFee` is greater value of each passenger type multiply by no of passenger of that type.
*   e.g. For ADT greater Fee value is 25 and number of ADT is 2 so total Fee for ADT is 50. For CHD greater Fee value is 25 and number of CHD is 1 so total Fee for CHD is 25. That makes final total fee = 75.
*   `TotalPrice` is sum of `ToatalFare` and `TotalFee` attribute.

I've tried with below XSLT.

**XSLT:**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
version="1.0" xmlns:exslt="http://exslt.org/common" exclude-result-prefixes="exslt">

    <xsl:output method="xml" indent="yes" />

    <xsl:template match="Response">
        <xsl:element name="Result">
            <xsl:element name="PassengerGroup">
                <xsl:attribute name="TotalFare">
                    <xsl:value-of select="sum(//Flight/Passengers/Passenger/Fare)"/>
                </xsl:attribute>
                <xsl:attribute name="TotalFee">
                    <xsl:value-of select="sum(//Flight/Passengers/Passenger[not(Type=preceding::Passenger/Type)]/Fee)"/>
                </xsl:attribute>
                <xsl:attribute name="TotalFee">
                    <xsl:value-of select="sum(//Flight/Passengers/Passenger/Fare) + sum(//Flight/Passengers/Passenger/Fee)"/>
                </xsl:attribute>
            </xsl:element>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

and got the below output.

**Output:**

```
<Result>
  <PassengerGroup TotalFare="1150" TotalFee="30" TotalPrice="1270"/>
</Result> 
```

`TotalFee` is not calculated correctly. Please Help. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:14:49.707

我相信这应该这样做：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0" xmlns:exslt="http://exslt.org/common" exclude-result-prefixes="exslt">
  <xsl:output method="xml" indent="yes" />
  <xsl:key name="kPassenger" match="Passenger" use="Type" />

  <!-- The passenger nodes from just the first flight, so we can count how many of 
       each type there are -->
  <xsl:variable name="passengers" select="Response/Flight[1]/Passengers/Passenger" />

  <xsl:template match="Response">
    <xsl:variable name="totalFare" select="sum(Flight/Passengers/Passenger/Fare)" />
    <xsl:variable name="feeByPassenger">
      <xsl:apply-templates 
         select="$passengers[generate-id() = 
                             generate-id(key('kPassenger', Type)[1])]"
         mode="fee" />
    </xsl:variable>
    <xsl:variable name="totalFee" 
                  select="sum(exslt:node-set($feeByPassenger)/*/@value)" />

    <Result>
      <PassengerGroup TotalFare="{$totalFare}" TotalFee="{$totalFee}" 
                      TotalPrice="{$totalFare + $totalFee}" />
    </Result>
  </xsl:template>

  <xsl:template match="Passenger" mode="fee">
    <xsl:variable name="maxFee">
      <xsl:apply-templates select="key('kPassenger', Type)/Fee">
        <xsl:sort select="." data-type="number" order="descending"/>
      </xsl:apply-templates>
    </xsl:variable>
    <fee value="{$maxFee * count($passengers[Type = current()/Type])}"/>
  </xsl:template>

  <xsl:template match="Fee">
    <xsl:if test="position() = 1">
      <xsl:value-of select="." />
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，结果是：

```
<Result>
  <PassengerGroup TotalFare="1150" TotalFee="75" TotalPrice="1225" />
</Result> 
```

# iphone - test hybrid app on iphone/ipad

> ID：15023007
> 
> 赞同：0
> 
> 时间：2013-02-22T11:20:19.583
> 
> 标签：iphone, ipad, hybrid

I have created a hybrid application (using html5 and jQueryMobile and Phonegap).

I am planning to make it as an iphone and ipad application. I could easily test in on android phone. But iphone I know it’s not directly possible. Please not that I haven’t created it in mac machine. From some research I got in order to test it on iphone / to get the .ipa file I need to register in apple developer program (which is paid $99).

Or can I build my application in xcode (my friend's mac machine) and get the .ipa file without registering to apple developer program?

Please guide me..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:01:16.250

如果没有代码签名，您将无法将您的应用程序放入设备中，这意味着您需要注册为开发人员。

但是，您可以在模拟器上运行您的应用程序。

# ruby-on-rails - using middleman framework, can;t make this code work on my project. (generating navigation)

> ID：15023008
> 
> 赞同：1
> 
> 时间：2013-02-22T11:20:19.563
> 
> 标签：ruby-on-rails, navigation, hyperlink, haml, middleman

## Hi guys, I can't seem to make this code work on my project.

**This is the code in my config.rb**

`active_nav = {:class => "Active"}` // Changed it to nav_active hoping it would work but it didn't.

```
 helpers do
    def nav_active(page)
      @page_id == page ? {:class => "Active"} : {}
    end
    def path(page)
      ("#{page}.html")
    end
  end 
```

**This is the code in my _header.haml**

```
 %li{nav_active("index")}= link_to ('Home'), path('index')
  %li{nav_active("page")}= link_to ('Fast Facts'), path('page') 
```

**My html links are:**

1.  index.html.haml
2.  page.html.haml

Output is still

```
 <li><a href="/">Home</a></li>
  <li><a href="/page.html">Fast Facts</a></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:47:14.530

似乎您的 Home 路径`root_url`在您的路线中设置`index`为`Homes Controller`. 因此，您将输出链接作为 Home 的“/”。

另请注意，您已`index`在 Home Controller 中正确创建了该方法，并且还在`index.html`您的视图中创建了该文件。

还要运行`rake routes`以确定您要获得的路径`Home Controller index`并确保它没问题。

更新：

索引文件路径在 Rails 中的处理方式不同，因为它们与控制器名称相关联。因此，如果您的控制器名称为`Homes`，则您的索引路径为`homes_path`. 可能，这似乎是不同路线形成的原因。所以改变它的形成路径。

或者，您可以使用

```
match '/homes/:index', :to => 'homes#index', :as => :index 
```

由上述`:as`属性形成的路径将是`index_path`或`index_url`。

# php - 上传文件不起作用，太大

> ID：15023015
> 
> 赞同：1
> 
> 时间：2013-02-22T11:20:35.293
> 
> 标签：php, file-upload

我无法在 PHP 中读取大约 25mb 的大文件。我尝试将最大输入文件大小更改为 50mb，但它仍然无法正常工作。这是表单的代码。

```
<html>
<body>

<form action="parsed_xml.php" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file"><br>
<input type="submit" name="submit" value="Submit">
</form>

</body>
</html> 
```

这是 PHP 文件的代码：

```
<?php
if ($_FILES["file"]["error"] > 0)
  {
  echo "Error: " . $_FILES["file"]["error"] . "<br>";
  }
else
  {
  print_r ($_FILES["file"]);
  echo "Upload: " . $_FILES["file"]["name"] . "<br>";
  echo "Type: " . $_FILES["file"]["type"] . "<br>";
  echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
  echo "Stored in: " . $_FILES["file"]["tmp_name"];
  }
?> 
```

我没有收到任何错误，$_FILES 数组中没有存储任何内容。

谢谢

詹姆士

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T11:22:12.100

在我看来，您需要增加 Apache 在您的 php.ini 文件中设置的限制：

```
post_max_size=50M
upload_max_filesize=50M 
```

如果您无权访问 ini 文件，请让您的主机增加限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T11:23:20.553

两个 PHP 配置选项控制最大上传大小：`upload_max_filesize`和`post_max_size`. 对于 10 兆字节的文件大小，两者都可以设置为“10M”。

但是，您还需要考虑完成上传所需的时间。PHP 脚本通常会在 30 秒后超时，但在正常的宽带连接上上传一个 10MB 的文件至少需要 3 分钟（请记住，上传速度通常比下载速度慢五倍）。此外，操作或保存上传的图像也可能导致脚本超时。因此，我们需要将 PHP 的`max_input_time`和设置`max_execution_time`为 300（以秒为单位指定 5 分钟）。

您可以设置然后使用：

```
 1\. in php.ini - set these values and restart server
  2\. set it in htaccess
  3\. Set in your php code using ini_set 
```

参考：[http ://www.sitepoint.com/upload-large-files-in-php/](http://www.sitepoint.com/upload-large-files-in-php/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:26:13.703

检查服务器的上传限制。您需要增加它才能上传大文件。

只需检查一下：您是否在更改配置后重新启动了 PHP 进程？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T11:29:23.173

只需增加“php.ini”中的最大文件大小，或者如果您无权访问 php.ini，请在您的 Web 根目录中创建一个“.htaccess”。

示例 10MB：

```
 upload_max_filesize = 10M 
 post_max_size = 10M 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T21:51:01.763

如果您无法访问 php.ini 文件，请使用函数“ini_set”。

# c++ - 不调用析构函数时销毁类成员

> ID：15023016
> 
> 赞同：6
> 
> 时间：2013-02-22T11:20:37.003
> 
> 标签：c++

在下面的代码中，当`ptr`被删除时，`Base`调用的是析构函数for，而不是析构函数for `Derived`（由于析构函数`Base`不是虚拟的）。

```
class Base
{
  int b;
};

class Derived : public Base
{
  int d;
};

int main(void)
{
    Base * ptr = new Derived();
    delete ptr;
    return 0;
} 
```

Valgrind 报告说该程序不包含内存泄漏，我猜这是真的，因为在这种特殊情况下所有新数据都被删除了。**我的问题是 - 鉴于`Derived`未调用（默认）析构函数，何时以及如何`d`释放或回收内存？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T11:34:32.460

`delete`如果基类中的析构函数不是，则调用指向派生类对象的基类指针是未定义的行为`virtual`。

未定义的行为意味着任何事情都可能发生。内存泄漏与否无关紧要，事实是您的程序可以显示任何行为并且您不能依赖显示的任何行为。

**要使您的代码有效，基类中的析构函数必须是`virtual`.**

* * *

**C++11 标准 5.3.5 删除：**
**第 3 段：**

> 在第一种选择（删除对象）中，**如果待删除对象的静态类型与其动态类型不同，则静态类型应为待删除对象的动态类型的基类，静态类型应具有虚拟析构函数或行为未定义**。在第二种选择（删除数组）中，如果要删除的对象的动态类型与其静态类型不同，则行为未定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T11:35:24.703

我认为调用不正确的析构函数是未定义的行为。你应该有一个虚拟析构函数。

然而，由于 Derived 类的分配是在一个块中完成的，它“起作用”是因为 delete 的内部只是简单地跟踪分配的大小，从而释放对象占用的 8 个字节，而不是 4 个该基地将使用。

请注意，虚拟析构函数本身不负责释放指向的内存`this`。这发生在`delete`调用析构函数之后。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T11:27:54.633

**正如其他伟人所提到的，标准说这是未定义的行为，但通常在关心竞争和用户的编译器中，**这取决于系统分配器的实现，这可能因平台而异。析构函数本身不会释放`Derived`包含字段的对象的内存。

当您调用 时`new Derived`，将调用 的全局实现`operator new`并接收要分配的字节数。这将是`sizeof(Derived)`你的情况。

在实际内存释放（全局`operator delete`）时，分配器将知道要从被释放对象的地址中释放多少字节。`b`因此，两者使用的内存`d`将被回收

# css - 为有角度的徽标创建无缝、可平铺的图像

> ID：15023018
> 
> 赞同：0
> 
> 时间：2013-02-22T11:20:41.260
> 
> 标签：css, image, photoshop

这不是一个直接的编程问题，但它确实使用了一些数学和 css 并且它已经困扰了我一段时间了。

我的目标是创建一个有角度的徽标图像（将徽标旋转 35 度）并使其可以平铺。我已经提到了[这个经过深思熟虑的问题](https://stackoverflow.com/questions/11633444/creating-seamless-rotated-background-image)，但我目前有点卡在第 1 阶段。

所以说这是我的标志：

![在此处输入图像描述](../Images/16276665e3c757a46628d1c735d65f6d.png)

它不是那么规则，因为它在左上角有一个小图标，并且没有设置在设定大小的矩形内，因此它的边界不明显。

我想，第一步是让它以当前的形式平铺。仅仅对它应用一个 css 平铺规则就会导致这样的结果，这是不好的：

![在此处输入图像描述](../Images/35d163187933333faf553ecc1f377ae7.png)

理想情况下，在我们旋转它之前，我们希望交替行偏移，这样它就不像*网格了*。

![在此处输入图像描述](../Images/f4acdc3940449954ac600742b388cf76.png)

偏移量显然应该是 2 个相邻徽标上同一点之间空间的 50%。实现此步骤的最佳方法是什么？我只是复制/粘贴并拖动它直到它看起来正确吗？这不会那么准确。（使用 Photoshop）。

然后我需要确定裁剪区域，以便无缝重复。

一旦完成，我就有了一个图像网格，我现在可以在 Photoshop 中将其旋转到我想要的角度。困难在于使作物区域正确。然后我会参考我上面的链接。

增加的困难是确保我们有一个合适的水平标志裁剪区域。如果边缘的比率意味着我们有一个非常高的[最小公倍数](http://en.wikipedia.org/wiki/Least_common_multiple)，那么我的旋转裁剪区域将是巨大的且毫无意义的。

总而言之，可靠地设置水平网格以便我们获得具有合理尺寸（例如 150 x 100 像素）的裁剪区域的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:39:15.117

好的，经过一些艰苦的尝试，我已经破解了它，但只是旋转了 45 度。如果有人可以就如何计算其他角度的裁剪区域提供建议，我会很感兴趣。

*   所以第一步是制作一个水平的标志网格，就像问题中的最后一个例子一样。为此，将徽标放在画布的左上角，然后裁剪画布，使徽标正好适合里面。

*   接下来，如有必要，将画布调整为大约我们想要的图像大小。在这个阶段，纵横比并不重要，我们只希望有一个可管理的图像尺寸来工作。像 250px 宽的东西很好。这样做的结果很可能是另一边的尺寸很奇怪。例如 250px 宽 x 78px 高。

*   现在我们用空白填充徽标。这将有两个目的。首先要在徽标之间留出足够的空间，其次要获得良好的纵横比。这真的很重要。如果可能的话，试着让你的画布的一个边缘是另一边缘长度的 1/2 或 1/3。这将帮助我们尽可能降低最小公倍数。调整画布大小时，请确保将实际徽标保留在画布的左上角，填充位于图像的右侧和底部。

*   我们现在要手动平铺图像，但还要包括填充区域。如果我们只是照原样复制它，photoshop 将忽略填充区域而只复制徽标本身。创建一个新图层并将其与徽标图层放在图层文件夹中。用颜色填充这个层。

*   现在制作一个新的 Photoshop 文档。使画布尺寸相当大；比如 1000 像素 x 1000 像素。

*   将刚刚创建的图层文件夹复制到这个新文档中，方法是在选中图层时选择图层->复制，然后选择新文档作为目标。

*   现在通过复制图层并拖动它来平铺这个文件夹。首先向下拖动第一个副本，然后向右拖动。Photoshop 通过将关键点的图层与原始图层对齐来帮助解决此问题。您会发现，当复制图层的顶部边缘接触原始图层的底部边缘时，您可以捕捉复制图层，并且沿着长度的一半使其水平偏移。

*   继续复制和对齐，直到你用瓷砖大部分覆盖了大画布。

*   现在制作将产生平铺图像的裁剪。获取选择工具并选择`fixed size`选项。输入一个像素大小，使选择成为一个正方形，其边缘的长度与原始图像的较长长度相同。即，如果您的原始图像是 150 像素 x 50 像素，那么您应该使您的裁剪尺寸为 150 像素 x 150 像素。

*   单击画布上的任意位置进行选择，复制合并到一个新文档，您应该会发现您将拥有可以使用的可平铺图像，尽管带有水平徽标。

*   现在旋转它。转到大型平铺文档。Ctrl-D 取消选择。编辑-> 将画布旋转 45 度。

*   现在计算作物的大小。如下：

    1.  求最小公倍数。因此，如果您的尺寸是 150x50 `LCM = 150`。

    2.  裁剪框的大小是直角三角形的斜角，其他边长 = LCM。即如果`LCM = 150`，L = sqrt(150 ² * 150 ² ) = 212.12。

*   现在制作一个大小为 212 的方形裁剪（在这种情况下）旋转的画布（任何地方都可以）。这应该是一个可以保存、调整大小、编辑等的可平铺图像。

这种方法在我[公司的 Twitter 页面上很有效](https://twitter.com/IPSCapital)

正如我所说，任何计算其他角度的裁剪大小的方法都会有所帮助。

# java - multiple public classes in java

> ID：15023020
> 
> 赞同：-4
> 
> 时间：2013-02-22T11:20:43.563
> 
> 标签：java

I was trying to write a Java program with more than 1 public class and it gave me the following error:

```
Class [classname] is public,should be declared in a separate file named 
[classname].java 
```

Can't seem to find a convincing answer as to why this is happening.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:21:43.743

You can not declare more than one public class in one `.java` file. Separate your classes to different `.java` files.

**Class1.java**

```
public class Class1 {

} 
```

**Class2.java**

```
public class Class2 {

} 
```

* * *

> This restriction implies that there must be at most one such type per compilation unit. This restriction makes it easy for a compiler for the Java programming language or an implementation of the Java virtual machine to find a named class within a package; for example, the source code for a public type wet.sprocket.Toad would be found in a file Toad.java in the directory wet/sprocket, and the corresponding object code would be found in the file Toad.class in the same directory.

## Similar questions:

*   [Why only 1 public class in Java file](https://stackoverflow.com/questions/3578490/why-only-1-public-class-in-java-file)
*   [source file can't have more than one public class](https://stackoverflow.com/questions/4826685/source-file-cant-have-more-than-one-public-class)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T11:26:23.030

类名与文件名相同。如果文件中有多个类，则会产生冲突，从而导致错误。所以每个类都应该在一个单独的文件中，文件名与类名相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T11:22:21.303

每个公共类都必须在它自己的 .java 源文件中声明。

# java - 具有复合键“生成空 id”的 JPA 多对多连接表实体

> ID：15023021
> 
> 赞同：6
> 
> 时间：2013-02-22T11:20:46.173
> 
> 标签：java, hibernate, jpa, many-to-many, jointable

这是我的实体：

```
public class Account extends AbstractEntity<Long> {

    @Id
    @SequenceGenerator(name = "accountSequence", sequenceName = "SQ_ACCOUNTS", allocationSize = 1)
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "accountSequence")
    @Column(name = "ACC_ID", nullable = false)
    private Long id;
...
}

public class Integration extends AbstractEntity<Long> {

    @Id
    @SequenceGenerator(name = "integrationSequence", sequenceName="SQ_INTEGRATIONS", allocationSize = 1)
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "integrationSequence")
    @Column(name = "INT_ID", nullable = false)
    private Long id;
...
public void addIntegration(Integration integration) {
        IntegrationAccount association = new IntegrationAccount();
            // This does not help
        //association.setIntAccountsPK(new IntAccountsPK(integration.getId(), this.getId()));
        association.setAccount(this);
        association.setIntegration(integration);
        this.integrationAccounts.add(association);
        integration.getIntAccountsCollection().add(association);
    }
} 
```

这是连接表的实体

```
@Entity
@Table(name = "INT_ACCOUNTS")
public class IntegrationAccount  {

    @EmbeddedId
    protected IntAccountsPK intAccountsPK;

    @JoinColumn(name = "ACC_ID", referencedColumnName = "ACC_ID", insertable = false, updatable = false)
    @ManyToOne
    private Account account;

    @JoinColumn(name = "INT_ID", referencedColumnName = "INT_ID", insertable = false, updatable = false)
    @ManyToOne
    private Integration integration;
...
}
@Embeddable
public class IntAccountsPK  implements Serializable {

    @Column(name = "INT_ID", nullable = false)
    private Long intId;

    @Column(name = "ACC_ID", nullable = false)
    private Long accId;
...
} 
```

当我这样做时：

```
account.addIntegrations(integrations.getTarget());
account.setCustomer(customer);
accountService.save(account); 
```

我在我的日志中得到了这个原因：org.hibernate.id.IdentifierGenerationException: null id generated for:class com.dhl.dcc.domain.IntegrationAccount

我对这种映射了解不多，请告诉我如何改进这种映射（必须保留连接表的实体）以及如何通过相关集成保存帐户？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T16:08:54.033

我知道这个问题已经被标记为已解决，但我不同意接受的答案。这个答案通过在 table 中添加一个无用的列（新的 id）来修改数据模型`INT_ACCOUNTS`。在 Hibernate 中还有另一种方法可以在不修改数据模型的情况下解决此问题：

```
@Entity
@Table(name = "INT_ACCOUNTS")
public class IntegrationAccount implements Serializable {

    @Id
    @ManyToOne
    @JoinColumn(name = "INT_ID_FK")
    private Integration integration;

    @Id
    @ManyToOne
    @JoinColumn(name = "ACC_ID_FK")
    private Account account;
}

@Entity
@Table(name = "INTEGRATIONS")
public class Integration {

    @Id
    @SequenceGenerator(name = "integrationSequence", sequenceName = "SQ_INTEGRATIONS", allocationSize = 1)
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "integrationSequence")
    @Column(name = "INT_ID")
    private Long id;
}

@Entity
@Table(name = "ACCOUNTS")
public class Account {

    @Id
    @SequenceGenerator(name = "accountSequence", sequenceName = "SQ_ACCOUNTS", allocationSize = 1)
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "accountSequence")
    @Column(name = "ACC_ID")
    private Long id;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:25:48.633

您可以为您的 IntegrationAccount 创建一个 ID 字段，然后为您的两个字段创建一个唯一约束。

```
@Entity
@Table(name = "INT_ACCOUNTS",
       uniqueConstraints=@UniqueConstraint(columnNames={"ACC_ID", "INT_ID"}))
public class IntegrationAccount  {

    @Id
    private Long id;

    @JoinColumn(name = "ACC_ID", referencedColumnName = "ACC_ID", insertable = false, updatable = false)
    @ManyToOne
    private Account account;

    @JoinColumn(name = "INT_ID", referencedColumnName = "INT_ID", insertable = false, updatable = false)
    @ManyToOne
    private Integration integration;
...
} 
```

奇迹般有效！

# c++ - How to display tag attributes in htmlcxx c++ library?

> ID：15023024
> 
> 赞同：1
> 
> 时间：2013-02-22T11:20:54.947
> 
> 标签：c++, html, tree

How to display a html tree showing text and both tags and its attributes. I would be greteful for any decent manual or documentation for htmlcxx, I couldn't find any to help myself.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:44:06.240

我认为您的问题与其他 SO 线程非常相似。提供的答案应该可以帮助您实现目标。

[htmlcxx API 使用](https://stackoverflow.com/questions/11480570/htmlcxx-api-usage)

那里显示的代码遍历 dom 树的所有子节点并将它们写入标准输出、标签和文本。

# sql-server - Attempting To Modify XML in SQL Server Using XQuery

> ID：15023033
> 
> 赞同：0
> 
> 时间：2013-02-22T11:21:24.790
> 
> 标签：sql-server, xquery

I am attempting to add an attribute to a node in an XML column in SQL Server.

```
UPDATE
    TableName
SET Metadata.modify('
    insert attribute MyAttribute{"01b9cd0b-bfed-436f-bc58-57d2fddd9211"}
    into (Root/Collection/Item[@No="360"][1])
')
WHERE
    TableName.Id = 1 
```

I get the following error...

> *Msg 2226, Level 16, State 1, Line 4 XQuery
> [TableName.Metadata.modify()]: The target of 'insert' must be a single node, found 'element(Item,xdt:untyped) *'*

But I thought my selection would return a single item, given the `[1]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:22:46.303

愚蠢的 XQuery！（或者可能是我）。

您需要放置`[1]`括号的外部：

```
into (Root/Collection/Item[@No="360"][1]) 
```

应该

```
into (Root/Collection/Item[@No="360"])[1] 
```

# android - Garbage Collection causes : MediaPlayer finalized without being released

> ID：15023037
> 
> 赞同：33
> 
> 时间：2013-02-22T11:21:41.803
> 
> 标签：android, garbage-collection, android-asynctask

After a lot of debugging I finally found what is causing this error! Garbage Collection!

I have a video playing in media view and in the background I am looking for new videos from a Rest API.

Every now and then I see the Garbage collection running:

```
02-22 13:14:57.969: D/dalvikvm(16888): GC_EXPLICIT freed 152K, 4% free 6746K/6979K, paused 2ms+2ms 
```

And the straight after that:

```
02-22 13:14:57.969: W/MediaPlayer-JNI(16888): MediaPlayer finalized without being released 
```

So I tested it by calling System.gc() every 5 seconds.

As soon as the first GC is called it happens!

```
02-22 13:19:47.813: D/dalvikvm(17060): GC_EXPLICIT freed 167K, 5% free 6745K/7047K, paused 2ms+2ms ---- I call GC
02-22 13:19:47.813: W/MediaPlayer-JNI(17060): MediaPlayer finalized without being released ---- VIDEO PLAY INTERRUPTED 
```

Why does this happen? Can I prevent it?

Playing the video:

```
private void playMedia(int playListIndex) throws IOException {
        File mediadir = getDir("tvr", Context.MODE_PRIVATE);
        filelist = mediadir.listFiles();
        Log.i("media player", "play media!");
        String path = filelist[playListIndex].getAbsolutePath();
        FileInputStream fileInputStream = new FileInputStream(path);
        final Uri uri = Uri.parse(path);
        String filename = filelist[playListIndex].getName();
        if (filename.contains("image")) {
            imageView = (ImageView)findViewById(R.id.imageView);
            imageView.setVisibility(View.VISIBLE);
            imageView.setImageURI(uri);
            mHandler.postDelayed(new Runnable() {
                public void run() {
                    imageView.setVisibility(View.GONE);
                    imageView.setImageURI(uri);
                    onCompletion(null);
                }
            }, 4000);
        } else if (filename.contains("video")) {

            MediaPlayer pl = new MediaPlayer();
            pl.setOnCompletionListener(this);
            pl.setDisplay(holder);
            pl.setDataSource(fileInputStream.getFD());
            pl.prepare();
            pl.start();
        }
    } 
```

And when it is done:

```
@Override
    public void onCompletion(MediaPlayer mp) {
        Log.i("media player", "play next please!");
        if (mp != null) {
            mp.release();
        }
//      play next video
        currentMedia++;
        if (currentMedia > playList.size() - 1) {
            currentMedia = 0;
        }
        try {
            playMedia(currentMedia);
        } catch (IOException e) {
            e.printStackTrace();
        }

    } 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-02-22T11:43:46.973

我认为这是因为您在方法范围内创建了媒体播放器，因此，当方法完成时，它超出了范围。这意味着没有引用，因此可以进行垃圾收集。

这意味着，它甚至可以在调用 onCompletion 之前被 GC 释放，因此在清除之前不会释放。相反，您需要将媒体播放器的引用作为成员变量存储在您的类中。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-22T11:30:32.970

Java GC 只管理内存。所以当使用其他资源（例如文件、套接字等）时，您需要手动管理它们。对于 MediaPlayer，[文档](http://developer.android.com/reference/android/media/MediaPlayer.html)提到：

> 还建议一旦不再使用 MediaPlayer 对象，立即调用 release() 以便与 MediaPlayer 对象关联的内部播放器引擎使用的资源可以立即释放。资源可能包括单例资源，例如硬件加速组件，调用 release() 失败可能会导致 MediaPlayer 对象的后续实例回退到软件实现或完全失败。

因此，当您完成 MediaPlayer 实例时，您需要确保在该实例上显式调用 release()。执行此操作的好地方可能是包含 Activity 的生命周期方法，例如 onDestroy()。否则，当该 MediaPlayer 实例最终被垃圾回收时（在您不再引用它之后的某个任意时间），终结器会注意到您从未调用 release() 并将输出您看到的警告。

# java - Why is this thread running multiple times in a row?

> ID：15023040
> 
> 赞同：2
> 
> 时间：2013-02-22T11:21:49.407
> 
> 标签：java, multithreading, infinite-loop, runnable

**I just solved the problem myself. I had multiple calls for syncCustomers() due to a dialog closing event problem. I solved it by providing the parent JFrame in the JDialog constructor. Pretty stupid error on my side.**

My application contains a task that synchronizes with a webservice and a local database. This task may take up to several minutes. Thus I want to notify the user about this time consuming process with a simple dialog (Swing). The user is not supposed to continue working while the sync process is running.

So I thought of:

1.  open modal dialog with the notification for the user
2.  start the sync process in a separate thread
3.  close modal dialog after sync process is done

* * *

User clicked on the button to start sync process:

```
private void syncCustomers() {
    if (checkWebserviceAuth()) {

        SyncDialog dialog = new SyncDialog();
        dialog.setLocationRelativeTo(this);
        dialog.setVisible(true);

        SyncCustomersTask task = new SyncCustomersTask(dialog, getCoach());
        task.run(); // task.start() will result in the same problem

    } else {
        openAuthorizeDialog(true);
    }
} 
```

* * *

```
public class SyncDialog extends javax.swing.JDialog {

    public SyncDialog() {
        initComponents();
        // I already noticed that the modal dialog won't work for me since it interrupts within syncCustomers()
        //this.setModalityType(Dialog.ModalityType.APPLICATION_MODAL);

        this.setTitle(Application.getApplicationTitle());
    }

    ...

} 
```

* * *

```
public class SyncCustomersTask extends Thread {

    private void doWork() {
        System.out.println("Start doWork() and sleep for 10 seconds...");
        try {
            // for testing purpose
            Thread.sleep(10000);
        } catch (InterruptedException ex) {
        }
        System.out.println("Done with doWork().");
    }

    @Override
    public void run() {
        doWork();
        if (getCallback() != null) {
            System.out.println("Invoke callback...");
            getCallback().dispose();
            System.out.println("Callback invoked.");
        }
    }

    ...
} 
```

* * *

This will result in an infinite loop of:

```
Start with doWork()...
Start doWork() and sleep for 10 seconds...
Done with doWork().
Invoke callback...
Callback invoked. 
```

If I comment out

```
getCallback().dispose(); 
```

, the loop will stop after the second execution:

```
Start with doWork()...
Start doWork() and sleep for 10 seconds...
Done with doWork().
Invoke callback...
Callback invoked.
Start with doWork()...
Start doWork() and sleep for 10 seconds...
Done with doWork().
Invoke callback...
Callback invoked. 
```

I don't get it. What fires the thread to execute over and over again?

I guess this whole thing isn't a good idea to start with, but I wasn't able to get things like ProgressMonitor working either. :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:25:08.080

打电话`start()`，不是`run()`。后者将简单地执行线程，而*不是*在单独的线程中！该`start()`方法将实例化一个新线程，然后才`run()`在该新线程中调用您的方法。

顺便说一句，这是一个令人惊讶的常见问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:26:30.397

调用**run()**不会在新线程中执行代码。

# android - Android谷歌地图v2中的标记动画

> ID：15023049
> 
> 赞同：0
> 
> 时间：2013-02-22T11:22:21.193
> 
> 标签：android, google-maps-android-api-2

我正在使用数据库中的坐标将标记一一添加到 mapView。我需要同时为所有标记设置动画。

在循环中为每个添加的标记添加动画，但它仅适用于最后添加的标记

```
 **code for adding markers to map is:**

    Marker marker;

         do
            {

            marker= mapView.addMarker(new MarkerOptions()
                                                .position(new LatLng(latitude, longitude))
                                                .icon(BitmapDescriptorFactory
                                                        .fromBitmap((bitmap)))
                                                .snippet(text + "             ")
                                                .title(mine_name));

   //handling animation
  applyed Bounce Interpolator
       final Handler handler = new Handler(); 
                                  final long start = SystemClock.uptimeMillis(); 
                                  Projection proj =mapView.getProjection(); 
                                  Point startPoint =proj.toScreenLocation(new LatLng( latitude,longitude)); 
                                  startPoint.offset(0, -100); 
                                  final LatLng startLatLng = proj .fromScreenLocation(startPoint);
                                  final long duration = 1500; 
                                  final Interpolator interpolator = new BounceInterpolator();
                                  handler.post(new Runnable() {

                                  @Override public void run() { 
                                      long elapsed =SystemClock.uptimeMillis() - start;
                                      float t =interpolator .getInterpolation((float) elapsed /
                                  duration); 
                                      double lng = t * new LatLng(latitude,longitude).longitude + (1 - t) *
                                  startLatLng.longitude; 
                                      double lat = t * new LatLng(latitude, longitude).latitude + (1 - t) *
                                  startLatLng.latitude; 
                                      marker.setPosition(new LatLng(lat, lng)); 
                                      if (t < 1.0) { 
                                      // Post again 16ms later.
                                  handler.postDelayed(this, 32); } } });

                }while(count>0) 
```

但它适用于最后添加的引脚。我需要同时为所有引脚制作动画（即动画同时反映到引脚）

提前致谢。

# ios - 无法点赞来自 ios sdk 的帖子

> ID：15023057
> 
> 赞同：1
> 
> 时间：2013-02-22T11:22:48.777
> 
> 标签：ios, facebook-graph-api

我正在使用 Facebook SDK 3.0 登录用户，并且我成功获得了它的 FB id 和 FB 会话令牌。

```
`NSDictionary<FBGraphUser> *user.id` (FB ID) 
```

和 `[FBSession.activeSession accessToken]`（FB会话令牌）

现在我想在我的应用程序中赞一个帖子。所以我正在创建一个 POST 请求并像这样传递参数

```
NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/%@/og.likes",@"34856345..."]] cachePolicy:NO timeoutInterval:5.0];
    [urlRequest addValue:@"BAAGjjgD8bhUBAM73jzkpy23zlHo7e8ZAqPaOGvbxU..." forHTTPHeaderField:@"access_token"];
    [urlRequest addValue:myshareLink forHTTPHeaderField:@"object"];
    [urlRequest setHTTPMethod:@"POST"];
    NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self startImmediately:YES];
    [theConnection autorelease]; 
```

但我收到了这个错误

```
 result:{"error":{"message":"An access token is required to request this resource.","type":"OAuthException","code":104}} 
```

但是如果我使用 CURL 命令中的相同访问令牌和用户 ID，它会成功发布。

```
curl -X POST -F 'access_token=BAAGjjgD8bhUBAE8XmogjJZAZAPyJ8SUyxkllJQ...' -F 'object=http://xyz.com/abc/gallery.php#pic/pic2/' https://graph.facebook.com/732../og.likes 
```

请一些帮助我弄清楚我错过了什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T18:18:54.703

我建议使用 iOS Facebook SDK 中的 FBRequestConnection 和 FBRequest 类，而不是使用 NSURLConnection 和 NSMutableURLRequest。我相信 Facebook 需要 Facebook SDK 自动为您生成的 iOS 级别的一些额外标头值。

对于类似的操作，我使用 FBRequest 类方法 requestForGraphPath 来创建请求。在将 FBRequest 传递给 FBRequestConnection 之前，不要忘记在 FBRequest 上设置 httpMethod 和 session 字段。

# handlebars.js - 车把预编译模板问题

> ID：15023058
> 
> 赞同：0
> 
> 时间：2013-02-22T11:22:52.137
> 
> 标签：handlebars.js, precompile

我们在 Web 应用程序中使用车把预编译模板。我们的一个元素最近损坏了 - 在某个位置使用了不正确的 HTML。查看预编译的 js 时，我可以看到缺少元素。预编译的 HTML 非常庞大且复杂，包含许多把手操作符。这是一个非常简化的版本：

```
{{#if isGeneric}}
<!-- SEARCH FOR ME-->
<td class="empty">&nbsp;</td>
<td class="empty">&nbsp;</td>
<!-- THE END FOR ME-->
{{else}}
<td class="description"><p id="{{productId}}" isGeneric="{{isGeneric}}" productType="{{productType}}" class="bluetext productid_opener">{{description}}</p>
<td class="something">{{productName}}</td>
{{/if}} 
```

HTML 中的这个片段与另一个片段非常相似（如果这有什么不同的话）。

当我预编译它并在生成的 HTML 中搜索时`programXX`，我在任何地方都找不到代码（例如“为我搜索”）。我注意到在特定代码部分之前和之后的车把程序都有一个间隙编号。例如：

```
function program52(depth0,data) { // find elements in the condition just prior to the "if" above }
function program54(depth0,data) { // find elements from HTML in condition just after the "if" above } 
```

所以我会假设该函数`program53`包含相关代码，但为什么它不包含在生成的 HTML 中？把手如何确定 HTML 中包含或排除的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:30:01.633

我发布了[https://github.com/wycats/handlebars.js/issues/452](https://github.com/wycats/handlebars.js/issues/452)，这实际上是[https://github.com/wycats/handlebars.js/issues/428](https://github.com/wycats/handlebars.js/issues/428)的欺骗。

该问题已解决，并将很快在 npm 中可用。

# javascript - 加载 openSocial 小工具时访问被拒绝

> ID：15023059
> 
> 赞同：0
> 
> 时间：2013-02-22T11:22:56.723
> 
> 标签：javascript, opensocial

我有三台服务器：

服务器 A：主应用程序主机

服务器 B：另一个应用程序的主机，该应用程序在主应用程序中作为 openScoial 小工具打开

服务器 C：服务器 B 上应用程序的 OpenSocial 规范文件的主机

现在，我访问服务器 A 上的应用程序，但我收到错误消息，提示某些 JavaScript 文件功能拒绝访问。

似乎是一些跨域问题，欢迎任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:04:14.957

您是否对您的小工具使用任何类型的身份验证？为什么xml与应用程序在不同的服务器上？他们也在不同的域上吗？您使用什么方法来加载 javascript？您使用的是哪个 OpenSocial Container 实现？您是否使用锁定域？你试过什么了？

我可以给你一些一般性的建议/信息，但至少没有回答上述问题，我无法准确理解你的问题是什么。

OpenSocial 小工具在 iframe 内呈现，并且它们的域由呈现它们的 OpenSocial 容器选择，它们几乎从不（我知道没有任何情况）呈现在小工具 xml 的域上。此域通常只是父页面/OpenSocial 容器的域，除非启用了锁定域，在这种情况下，小工具将呈现在单独的唯一域上，以防止它访问父页面中的任何内容。

跨域策略阻止 xhr 请求，这就是为什么您需要将 gadgets.io.makeRequest 用于通常使用 xhr 执行的任何操作，但 makeRequest 需要某种身份验证（通常是 oauth），因为这基本上涉及 OpenSocial 容器代理来自小工具的服务器（在您的示例中为服务器的 C 和 B）。仍然可以使用不受跨源策略影响的 JSONP 加载 javascript / 数据。

# performance - 如何提高 Jenkins 服务器的性能？

> ID：15023060
> 
> 赞同：15
> 
> 时间：2013-02-22T11:23:00.297
> 
> 标签：performance, jenkins, hudson

我们的 Jenkins 服务器（Linux 机器）会在一段时间内变慢并且没有响应。所有作业都花费了非常长的时间（即使它们在与服务器不同的机器上运行）。我观察到的一件事是打开文件的数量增加了。如下图所示，这个数字似乎在增加。有没有人可以在不重新启动服务器的情况下继续检查这个问题？此外，是否有任何配置/调整可以提高詹金斯服务器的性能？

![在此处输入图像描述](../Images/9ae52c2eef1e4a1d0630230cbd12a1d8.png) ![在此处输入图像描述](../Images/5bba815a136d0a2d63b2bafab8961fcd.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-14T22:58:19.813

我们使用 Jenkins 已经四年了，我们试图让它保持最新（Jenkins + 插件）。和你一样，我们尝试了一些不便，取决于新版本的 Jenkins 或插件......所以我们决定停止这种“持续”升级

以下是一些不起眼的提示：

1.  避免技术债务。尽可能多地更新 Jenkins，但仅使用“长期支持”版本（最新版本为 2.138.2）
2.  `jenkins_home`在进行任何升级之前备份您的全部内容！
3.  每晚重启 Jenkins
4.  将 RAM 添加到您的服务器。Jenkins 大量使用文件系统，这将改善缓存
5.  使用相同的值定义 JVM 最小/最大内存参数以避免动态重新分配，例如：`-Xms4G -Xmx4G`
6.  添加从属并仅在从属上执行作业

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-20T12:55:36.760

除了以上，你还可以尝试：

1.  丢弃旧版本
2.  如果可能，将构建分布在多个从属服务器上。

# iphone - 如何在 iOS 中改变 URL 中的内容？

> ID：15023064
> 
> 赞同：0
> 
> 时间：2013-02-22T11:23:11.820
> 
> 标签：iphone, ios, objective-c, xcode

我有一个包含图像和音频文件的 URL。我正在使用以下代码将图像和音频文件下载到文档目录：

```
 // urlsArray contains the list of images and audio urls

 for(int i= 0 ;i<[urlsArrray count]; i++)
        {

        NSString *urlString = [urlsArrray objectAtIndex:i];
        NSString *escapedUrlString = [urlString             stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    NSURL *url = [NSURL URLWithString:escapedUrlString];
    NSData *fileData=[NSData dataWithContentsOfURL:url];
    NSString *urlstring1 = [url absoluteString];
    NSArray *parts = [urlstring1 componentsSeparatedByString:@"/"];
    NSString *fileName = [parts objectAtIndex:[parts count]-1];

    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,  NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];
    NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:fileName];
    [fileManager createFileAtPath:savedImagePath contents:fileData attributes:nil];

    NSLog(@"files Stored Path is %@",savedImagePath); 
```

现在我想分离图像和音频文件。我想将图像下载到文档目录，将音频文件下载到缓存目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:28:49.603

只需添加以下代码即可识别文件是图像文件还是音频文件

```
CFStringRef fileExtension = (CFStringRef) [file pathExtension];
CFStringRef fileUTI = UTTypeCreatePreferredIdentifierForTag(kUTTagClassFilenameExtension, fileExtension, NULL);

if (UTTypeConformsTo(fileUTI, kUTTypeImage)) NSLog(@"It's an image");
else if (UTTypeConformsTo(fileUTI, kUTTypeMovie)) NSLog(@"It's a movie");
else if (UTTypeConformsTo(fileUTI, kUTTypeText)) NSLog(@"It's text");
else  NSLog(@"It's audio"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:57:54.457

好的，如果你从你的数组中分离出来，那么请执行以下操作：

```
imagelist = [[NSMutableArray alloc]init];
videolist  = [[NSMutableArray alloc]init];

    for(int i = 0;i<urlsArrray.count;i++)
   {
    id arrayElement = [fileArray  objectAtIndex:i];
    if([arrayElement rangeOfString:@".mp3" ].location !=NSNotFound)
    {
     [videolist addObject:arrayElement];
      NSLog(@"videolist..%@",videolist); 
    }
    else([arrayElement rangeOfString:@".png"].location !=NSNotFound)
    {
    [imagelist addObject:arrayElement];
    NSLog(@"imagelist..%@",imagelist);
    }
} 
```

# python - 无法在 django userena mugshot 中更改裁剪类型

> ID：15023071
> 
> 赞同：0
> 
> 时间：2013-02-22T11:23:44.110
> 
> 标签：python, django

当我将面部照片图像上传到 userena 配置文件时，边缘上有空白，它会被裁剪。正如文档（[http://easy-thumbnails.readthedocs.org/zh/最新/使用/#thumbnail-options](http://easy-thumbnails.readthedocs.org/en/latest/usage/#thumbnail-options)）。我想将它设置为 False 但似乎看不到如何传递它，因为它需要传递给“resize_source”到 ThumbnailerImageField，如此处所示[https://github.com/SmileyChris/easy-thumbnails/ blob/master/easy_thumbnails/fields.py](https://github.com/SmileyChris/easy-thumbnails/blob/master/easy_thumbnails/fields.py)但在 UserenaBaseProfile 中，我只能通过 Django 设置传递两个选项：大小和裁剪类型。我错过了什么，或者真的没有办法设置比这些设置更多的东西吗？

更新：我尝试通过 userena 使用相同的选项，并直接在模型中使用 ThumbnailerImageField（不使用自动裁剪）。随着裁剪设置为智能，它实际上在两种情况下都删除了空格。但是在 ThumbnailerImageField 中将裁剪设置为缩放，它会停止删除空白，但在 userena 中将其设置为缩放并没有相同的效果，它会继续删除空白。我还尝试在 ThumbnailerImageField 中使用 autocrop = False，结果与以前相同，所以我想这不是我想要更改的。实际上我想将裁剪设置为类似比例的东西，但它对 userena 没有影响，只对 ThumbnailerImageField 直接产生影响。所以我相应地更改了问题的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:54:19.573

我安装了 userena v 1.0.1，由于某种原因，源裁剪类型被硬编码为“智能”，因此设置无效。更新到最新版本解决了它。

# java - Android 按钮详细信息

> ID：15023075
> 
> 赞同：-4
> 
> 时间：2013-02-22T11:24:09.977
> 
> 标签：java, android, button

为什么我们在`setOnClickListener`方法中传递这些参数？

请详细解释一下？

```
Button button = (Button) findViewById(R.id.button_send);
button.setOnClickListener(new View.OnClickListener() {
     public void onClick(View v) {
          // Do something in response to button click
     }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:29:11.753

其实这些都不是参数，如果你熟悉Java，你可能听说过`Anonymous Inner Classes`。因此，您只需实施`onClickListener`.

`button.setOnClickListener(this);`在您的代码中将此作为参数传递并执行`Override`该`onClick`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:32:58.043

`button.setOnClickListener`它实际上是在创建一个匿名内部类，它实现`OnClickListener.`了一个匿名类，它使用 new 运算符在一个简洁的表达式中定义和实例化。它用于创建简单的委托回调对象。这些匿名内部类可以访问封闭外部类的静态和实例变量。

更多详情，请查看[链接](https://stackoverflow.com/questions/9699844/android-setonclicklistener-parameter)。

# android - Google Play 安装错误 - 缺少共享库

> ID：15023079
> 
> 赞同：0
> 
> 时间：2013-02-22T11:24:46.403
> 
> 标签：android, actionbarsherlock, android-maps, android-holo-everywhere

我有一个在 Play 上有 100k~ 下载量的应用程序，我在一年前开始开发它。那时，它有默认的蹩脚的 android UI。一个月前，我决定包含 ActionbarSherlock+HoloEverywhere 库，这样它可以通过 Holo UI 提供更好的用户体验。问题来了。

我收到了一些用户报告，他们无法更新，因为 Play 一直在告诉他们，他们的设备与应用程序不兼容。除了添加和使用上述库之外，没有什么改变，所以他们的设备应该仍然与我的应用程序兼容。这是我所知道的，并且到目前为止尝试过的，包括来自与我合作并希望使用该应用程序的最有帮助的用户的报告。

*   他的旧设备坏了，所以它被替换了，他无法安装更新版本
*   在新设备上，他无法安装旧版本，而他可以在旧设备上安装
*   提到的设备是 atab5 MTK6577
*   目前最低 API 级别为 8 (Android 2.2)
*   我的应用请求以下权限：
    *   android.permission.ACCESS_FINE_LOCATION
    *   android.permission.ACCESS_NETWORK_STATE
    *   android.permission.INTERNET
*   该设备必须具备的功能如下：
    *   android.hardware.LOCATION
    *   android.hardware.location.GPS
    *   android.hardware.TOUCHSCREEN
*   我找到了一个不错的工具（[http://codekiem.com/2013/02/13/market-helper/](http://codekiem.com/2013/02/13/market-helper/)），我要求用户尝试是否可以欺骗 Play 安装应用程序，他做到了，最终应用程序已安装
*   安装后，他收到一条新的错误消息，“缺少共享库”，所以他仍然无法运行该应用程序
*   经过一些研究，我发现某些设备可能没有正确的 Google Maps api 或类似的东西，但可以通过将 Google API 添加到 apk 来修复它，通过将 Google Api 显式添加到构建路径
*   我给他发了新编译的apk，新的错误信息是：“Application not installed”
*   用户对更多应用程序有问题，而不仅仅是我的应用程序，通常是使用 GPS 的应用程序，我猜谷歌地图也是，所以这可能是设备故障
*   作为旁注，我使用的是标准 MapActivity，而不是 ActionbarSherlock mapactivity，但由于问题也存在于旧的非全息版本的应用程序中，所以没关系

我有什么办法可以解决我的问题吗？我真的不在乎，如果他仍然无法运行其他应用程序，是否可以使用我的应用程序。当然，如果他所有的问题都能解决，那是最好的情况，但我的首要任务是，我可以在我的 apk 中添加一些东西吗？或者，这里有什么问题？损坏的谷歌地图？

提前谢谢，干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:13:50.537

> 安装后，他收到一条新的错误消息，“缺少共享库”，所以他仍然无法运行该应用程序

这将来自`<uses-library>`清单中的某些元素。

> 但可以通过将 Google API 添加到 apk 来修复它，方法是将 Google Api 显式添加到构建路径

嗯，不，那是行不通的。

> 我有什么办法可以解决我的问题吗？

除了切换到 OpenStreetMap 之类的东西，没有。

> 损坏的谷歌地图？

更有可能是设备（或 ROM 模组）具有各种 Google 应用程序（例如 Google 地图）的盗版版本，因此未正确设置 Maps SDK 插件。

# python - plpython 中的 import 语句是如何处理的？

> ID：15023080
> 
> 赞同：17
> 
> 时间：2013-02-22T11:24:46.920
> 
> 标签：python, json, postgresql, postgresql-9.1, plpython

我有一个 plypython 函数，它可以做一些 json 魔术。为此，它显然导入了 json 库。

每次调用函数时都会调用导入吗？我必须注意任何性能影响吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-22T13:32:05.453

在`import`每个函数调用上执行。`import`如果您编写一个普通的 Python 模块，并且在函数体中使用与模块级别相反的语句，这与您将得到的行为相同。

是的，这会影响性能。

您可以通过像这样缓存导入来解决此问题：

```
CREATE FUNCTION test() RETURNS text
LANGUAGE plpythonu
AS $$
if 'json' in SD:
    json = SD['json']
else:
    import json
    SD['json'] = json

 return json.dumps(...)
$$; 
```

诚然，这不是很漂亮，并且正在讨论更好的方法来做到这一点，但它们不会在 PostgreSQL 9.4 之前发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-15T20:55:52.193

PL/Python 函数体中的声明最终将成为一个普通的 Python 函数，并因此表现得如此。当 Python 函数第一次导入模块时，模块会缓存在`sys.modules`字典中 ( [https://docs.python.org/3/reference/import.html#the-module-cache](https://docs.python.org/3/reference/import.html#the-module-cache) )。同一模块的后续导入将简单地将导入名称绑定到字典中找到的模块对象。从某种意义上说，我所说的可能会对已接受答案中给出的提示的有用性产生怀疑，因为它使它有些多余，因为 Python 已经为您做了类似的缓存。

总而言之，我想说的是，如果您以简单使用`import`or`from [...] import`结构的标准方式导入，那么您不必担心重复导入，无论是在函数中还是在其他方面，Python 都能满足您的要求。

另一方面，Python 允许您绕过其原生导入语义并实现自己的（使用`__import__()`函数和`importlib`模块）。如果这是您正在做的事情，也许您应该查看工具箱中的可用内容 ( [https://docs.python.org/3/reference/import.html](https://docs.python.org/3/reference/import.html) )。

# jquery - 在谷歌浏览器中使用 outerWidth() 计算错误的宽度 [onload]

> ID：15023088
> 
> 赞同：3
> 
> 时间：2013-02-22T11:25:18.463
> 
> 标签：jquery, google-chrome, onload, document-ready, outerwidth

我在 div 中有一个导航栏（顶部菜单）。如果菜单的宽度大于外部 div 的宽度，我必须隐藏其余的菜单元素。不幸`overflow:hidden`的是我不能用于 div 。所以我使用 `.outerWidth()`函数来计算 div 的总宽度和每个 elment(li) 的宽度，并隐藏溢出元素。所以我的问题是它在firefox（19.0），IE（8）中工作正常！，但不是在chrome中。在 chrome 中，所有元素都是隐藏的。当我改变时问题解决了

`$(document).ready(function() {});`到`$(window).load(function() {});`

但是随后，总 ul 显示了几分之一秒，然后它被隐藏（IE，FF 它仍然可以正常工作）。有没有更好的解决方案？或者任何不同的逻辑。

**样本**

```
<div style="width:300px;" > 
<ul id="menu1">
    <li class="noChild "><a  href="#" >3 Option</a></li>
    <li class="noChild"><a href="#" >2 Option</a></li>
    <li class="noChild "><a  href="#" >1 Option</a></li>
 </ul>
</div > 
```

[http://jsfiddle.net/RSA3X/4/](http://jsfiddle.net/RSA3X/4/)

[我的类似情况](http://bugs.jquery.com/ticket/6115)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:30:07.373

其实解决方法很简单。我把它弄复杂了。在下图中，我们还可以看到加载脚本、图像和 css 的过程。就我而言，我在 CSS 上方添加了脚本链接，例如

```
<script type='text/javascript' src='jquery.js'></script>
<script type='text/javascript' src='menu.js'></script>
<link rel="stylesheet" href="style.css" type="text/css" media="screen" /> 
```

并且它的负载类似于图像 2。所以我的脚本在加载 css 之前执行。而且我无法获得css的属性。

当我改变位置时

```
<link rel="stylesheet" href="style.css" type="text/css" media="screen" />
    <script type='text/javascript' src='jquery.js'></script>
    <script type='text/javascript' src='menu.js'></script> 
```

我的脚本在完成加载 css（图像 1）后执行。所以现在它完美无缺。

![在此处输入图像描述](../Images/dccb4628cca39264378e666eb8b6ff48.png)

# .htaccess - .htaccess 特定 php 请求的重定向

> ID：15023089
> 
> 赞同：-3
> 
> 时间：2013-02-22T11:25:18.687
> 
> 标签：.htaccess, redirect

我想使用 .htaccess 重定向以下请求：

```
http://www.oldwebsite.com/?feed=rss2 
```

到我的新网站：

```
http://www.newwebsite.com/feed/ 
```

有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:28:52.373

您需要`QUERY_STRING`在 Condition 中捕获：

```
RewriteCond %{QUERY_STRING} ^feed=
RewriteRule .+ http://www.newwebsite.com/feed [R=301,L] 
```

# matlab - Matlab函数比较两个字符串的元素

> ID：15023092
> 
> 赞同：0
> 
> 时间：2013-02-22T11:01:48.873
> 
> 标签：matlab

我想编写一个比较两个字符串的元素的 Matlab 函数，以便给定一个字符串的单个单元格数组，它将返回该单个单元格数组，但按字母顺序排列，例如`function({'car','apple','bus'})`，我编写了一个子函数来比较两个字符串相互对应并分配一个数值：

```
function [ out ] = comparestrings( a,b )

for k=1:min(length(a),length(b))

    if a(1,k)<b(1,k)
       out=1;
       return
    elseif b(1,k)<a(1,k)
        out=0;
        return
    end    
end
    if length(a)<length(b)        
       out=1;
    else out=0;      
    end   
end 
```

但是当我尝试在 Matlab 中运行我的程序时，它说行中有错误

```
if a(1,k) < b(1,k) 
```

我不知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:56:10.817

像`sort`、`unique`和`ismember`等函数不仅为数字定义，还为字符串元胞数组定义。因此，我认为没有必要将您的字符串转换为数字。

至于您的错误-您需要提供字符串，而不是单元格数组，即

```
myCellArray = {'car','apple'}

compareStrings(myCellArray{1},myCellArray{2}) 
```

使用大括号，您可以访问元胞数组元素的内容，而使用括号，您将提供单元格，并且`<`没有为单元格定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:55:09.557

我已经在 GNU/Linux 下的 Matlab R2010a 中运行了您的代码，它可以正常工作。我已将您的功能保存在一个名为 的文件`comparestring.m`中，然后我可以通过以下方式调用它：

```
comparestrings('car','apple')

ans =

     0

comparestrings('apple', 'car')

ans =

     1 
```

也许你没有正确调用你的函数？

无论如何，如果您不需要自己创建函数，您可以使用 Matlab 的内置函数`sort`：

```
sort({'car','apple','bus'})

ans = 

    'apple'    'bus'    'car' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T09:47:04.983

顺便说一句，matlab 中有一个叫做 strcmp 的函数可以做到这一点！

# php - PHP require_once 包括文件但变量未在新的 httpd/php/mysql CentOS 安装上使用

> ID：15023093
> 
> 赞同：0
> 
> 时间：2013-02-22T11:25:26.950
> 
> 标签：php, centos, apache

好的，所以我有一个名为 include.conf 的文件，如下所示：

```
<?
$var1 = 1;
?> 
```

然后我有 index.php 像这样：

```
<?php
require_once('include.conf');
print($var1);
?> 
```

在我在 OSX 上安装的 MAMP 上它工作正常。我将它转移到运行 CentOS HTTPD/PHP/MySQL 的新服务器上，但它不再工作。我知道该文件被包含在内，因为我可以在加载的源代码中看到它，但它不会获取变量。它只是返回：

```
Notice: Undefined variable: var1 in /var/www/html/index.php on line 3 
```

我将不胜感激任何帮助/建议。

PS这不是我的实际代码，它非常简化，但我已经像这样测试过它，它仍然失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:27:21.407

也许您的新服务器上没有启用短标签？

# mysql - 从每个表中选择 3 个结果

> ID：15023094
> 
> 赞同：0
> 
> 时间：2013-02-22T11:25:30.613
> 
> 标签：mysql

假设一个具有大量表（200+）的数据库，我该如何执行代表数据库中所有表的`SELECT * FROM <> LIMIT 3;`位置？`<>`我的目标是了解每个表包含的内容，其中显示的列名`DESCRIBE`并不是特别有用。因此，我想从每个表中查看 3 条记录。

我知道我可以通过迭代输出轻松地在 PHP 中编写脚本，`show tables;`但是我正在寻找在 MySQL 解释器（`mysql>`提示符）上运行的命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:03:13.607

它在此链接下详细描述（虽然我自己没有尝试过，它只是在我的书签中）：

[http://www.youdidwhatwithtsql.com/mysql-clone-of-sp_msforeachtable/624](http://www.youdidwhatwithtsql.com/mysql-clone-of-sp_msforeachtable/624)

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `usp_mysql_foreachtable`$$

CREATE PROCEDURE `usp_mysql_foreachtable`(IN sql_string VARCHAR(1000))
    LANGUAGE SQL
    NOT DETERMINISTIC
    COMMENT 'Functional clone of sp_MsForEachTable'
    BEGIN

    DECLARE var_tablename VARCHAR(100);
    DECLARE last_row BIT;

    DECLARE table_cursor CURSOR FOR SELECT TABLE_NAME
                    FROM information_schema.TABLES
                    WHERE TABLE_TYPE = 'BASE TABLE'
                    AND TABLE_SCHEMA = DATABASE();

    DECLARE CONTINUE HANDLER FOR NOT FOUND SET last_row = 1;

    OPEN table_cursor;
    FETCH table_cursor INTO var_tablename;

    SET last_row = 0;
    SET @var = '';

    lbl_table_cursor: LOOP

        SET @qry = REPLACE(sql_string, '?', var_tablename);

        PREPARE q FROM @qry;
        EXECUTE q;
        DEALLOCATE PREPARE q;

        FETCH table_cursor INTO var_tablename;
        IF last_row = 1 THEN
            LEAVE lbl_table_cursor;
        END IF;
    END LOOP lbl_table_cursor;

    CLOSE table_cursor;

    END$$

DELIMITER ; 
```

然后你用

```
CALL usp_mysql_foreachtable('SELECT * FROM ? LIMIT 3;'); 
```

# sql - 如何显示正确的结果

> ID：15023095
> 
> 赞同：-1
> 
> 时间：2013-02-22T11:25:31.323
> 
> 标签：sql, sql-server

如果您有此列表的数据：

```
nvarchar  int    int    nvarchar   nvarchar
Line      start  end    typ        color
-------------------------------------------
T11       1      null   cookie     Blue
T11       null   10     cookie     Blue
T11       null   null   cookie     Blue
T11       null   null   cookie     Blue
T2        20     null   computer   Red
T2        null   null   computer   Red
T2        null   52     computer   Red
T3        null   null   dark       black
T3        52     null   dark       black
T3        null   10     dark       black 
```

请求的结果应该是：

```
Line      start  end    typ        color
-------------------------------------------
T11       1      10     cookie     Blue
T2        20     52     computer   Red
T3        52     10     dark       black 
```

我应该如何在 SQL Server 2012 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:31:03.610

我想这就是你所要求的。显然将 tablename 替换为您的表的名称。

```
SELECT t.line, MIN(t.START), MAX(t.END), t.typ, t.color
FROM dbo.tablename t
GROUP BY t.line, t.typ,  t.color 
```

# php - 静态变量问题

> ID：15023099
> 
> 赞同：2
> 
> 时间：2013-02-22T11:25:43.953
> 
> 标签：php, class

我有我正在定义的这个静态变量，但我的代码中出现错误：

..意外的'$_SERVER'（T_VARIABLE）在...

```
class Constants {
        const ACCOUNTTYPE_SUPER_ADMIN   = 1;
        const ACCOUNTTYPE_COMPANY_ADMIN = 2;
        const ACCOUNTTYPE_AREA_ADMIN    = 3;
        const ACCOUNTTYPE_END_USER      = 4;

        const SAVETYPE_NEW              = 0;
        const SAVETYPE_EDIT             = 1;

        const LICENSE_VALIDITY_YEARS    = 1;
        const LICENSE_VALIDITY_LEFT_MAX = 12;

        public static $template_path = $_SERVER['DOCUMENT_ROOT'] . '/../_html/';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:30:49.910

您不能以这种方式使用变量声明静态变量，但您可以使用解决方法：

```
class Constants {
    ...

    public static $template_path;
}

Constants::$template_path = $_SERVER['DOCUMENT_ROOT'] . '/../_html/'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T11:28:09.230

您只能在定义类成员时分配直接值。

但是您可以创建一个方法 init() 来更改您的模板路径成员值。

```
 public static function init(){ self::$template_path = $_SERVER['DOCUMENT_ROOT'] . '/../_html/'; } 
```

并在您第一次使用该类或实例化它时运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-07T22:08:36.207

你可以使用静态函数

```
class Constants {
    // ...
    public static function getTemplatePath()
    {
        return $_SERVER['DOCUMENT_ROOT'] . '/../_html/';
    }
} 
```

并且可以像这样使用

```
Constants::getTemplatePath(); 
```

# javascript - 如何在 c# 中结合两个 onclient click for javascripts？

> ID：15023103
> 
> 赞同：0
> 
> 时间：2013-02-22T11:25:52.253
> 
> 标签：javascript, c#-4.0

单击按钮时我需要执行两个功能。我编写的代码是

```
 lnkBtn_mail.OnClientClick = imgBtn_mail.OnClientClick = "javascript:NewEmailMessageWindow(" + invoice.Id + ", " + FindPage.ToString().ToLower() + ");return false;";        
           lnkBtn_mail.OnClientClick = imgBtn_mail.OnClientClick = "return DisableButtons(true);"; 
```

问题总是低于一个正在执行。所以我怎样才能一次调用这些动作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:30:07.783

您可以将它们组合在一个 onclientclick 中：

```
imgBtn_mail.OnClientClick = 
    String.Format(
      "javascript:DisableButtons(true); NewEmailMessageWindow({0}, {1});return false;",
      invoice.Id, 
      FindPage.ToString().ToLower()
      ); 
```

# python - 使用空格作为分隔符解析 nginx 日志数据

> ID：15023105
> 
> 赞同：1
> 
> 时间：2013-02-22T11:25:54.670
> 
> 标签：python, nginx, logparser

我正在尝试从 nginx 日志文件中解析以下格式：

```
10.0.0.1    [02/Oct/2012:10:21:46 +0000]    GET /api/123/test.json?stop=2012-09-29  502 0 
```

我的python脚本：

```
#!/usr/bin/env python

f = file('slow-queries.txt', 'r')

# iterate over the lines in the file
for line in f:
    # split the line into a list of column values
    columns = line.split(' ')
    # clean any whitespace off the items
    # columns = [col.strip() for col in columns]

    # ensure the column has at least one value before printing
    if columns:
        print "first  =>", columns[0]  # print the first column
        print "second =>", columns[1] 
```

基本上我想要从日志文件中得到的只是发送的查询，所以在上面的例子中，我希望提取`/api/123/test.json?stop=2012-09-29`

我的脚本似乎没有这样做，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:28:28.600

这些是制表符，而不是空格：

```
ip, date, method, path, status, _ = line.split('\t') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:36:53.767

您做错的是使用通用编程语言，其中可以使用专门的日志文件解析器语言：awk ;)

```
awk '{ print $5 }' /path/to/slow-queries.txt 
```

当然它可以用 python/php/perl/YOUR AD HERE/ 但 awk 总是会胜过它们^^

编辑：甚至可能将结果通过管道传输到一个新文件，然后您的 python 脚本将使用该文件：

```
awk '{ print $5 }' /path/to/slow-queries.txt > /tmp/queries.txt 
```

# php - 年视图日历

> ID：15023108
> 
> 赞同：0
> 
> 时间：2013-02-22T11:25:57.803
> 
> 标签：php, javascript, jquery

我需要一个像[FullCalendar 这样](http://arshaw.com/fullcalendar/)但有全年视图的日历。这个想法是每个用户都可以使用这个日历选择自己的假期，并将所有单独的日子存储在数据库中。

有人知道任何图书馆或其他东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-10T10:37:39.923

这是您问题的解决方案。这可能对你有帮助 [http://www.eyecon.ro/datepicker/#about](http://www.eyecon.ro/datepicker/#about)

```
('#date3').DatePicker({
    flat: true,
    date: ['2008-07-28','2008-07-31'],
    current: '2008-07-31',
    calendars: 3,
    mode: 'range',
    starts: 1
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:17:25.203

这是对您的评论的后续回答。您可以使用此代码选择完整的压延机。这是`jqueryUI datepicker`一次显示多个月的代码。

```
 $( "#datepicker" ).datepicker({
          numberOfMonths: 12,
          showButtonPanel: true
        }); 
```

这将为您完成。

# r - 如何分析一个数据框并获得另一个值大于 0.05 的数据框？

> ID：15023109
> 
> 赞同：1
> 
> 时间：2013-02-22T11:26:05.163
> 
> 标签：r, dataframe

我有一个具有不同 p.value 值的数据框，包括缺失值（NA）：pvalue2=pvalue[1:679,3:10] 我需要分析它，大于 0.05 的数字我需要写“正常” e 值小于 0.05 我需要写入值。我希望将结果写入另一个数据框中。这是我的代码：

```
a=data.frame()
    for (i in 1:nrow(pvalue2)) {
      for (j in 1:ncol(pvalue2)){
        if (pvalue2[i,j] >=0.05) {
          print (a[i,j]=="Normal")
        } else {print a[i,j]==pvalue2[i,j] }
      }
    } 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:58:33.880

```
a <- ifelse(as.matrix(pvalue2) < .05, as.matrix(pvalue2), "normal")
a <- as.data.frame(a) 
```

由于 R 是一种未经编译的高级语言，因此`for`循环在增长时往往会变得*非常*缓慢。通过使用矢量化函数（在内部以较低级别的语言进行循环），您可以加快代码速度并使其更具可读性。

### 示例运行

```
> set.seed(123)
> pvalue2 <- matrix(runif(18)/10, 6, 3)
> pvalue2[sample(length(pvalue2), 4)] <- NA
> pvalue2 <- as.data.frame(pvalue2)
> pvalue2

          V1         V2          V3
1 0.02875775 0.05281055 0.067757064
2 0.07883051 0.08924190 0.057263340
3 0.04089769 0.05514350          NA
4 0.08830174 0.04566147 0.089982497
5 0.09404673         NA          NA
6         NA 0.04533342 0.004205953

> ifelse(as.matrix(pvalue2) < .05, as.matrix(pvalue2), "normal")

     V1                   V2                   V3                   
[1,] "0.0287577520124614" "normal"             "normal"             
[2,] "normal"             "normal"             "normal"             
[3,] "0.04089769218117"   "normal"             NA                   
[4,] "normal"             "0.0456614735303447" "normal"             
[5,] "normal"             NA                   NA                   
[6,] NA                   "0.0453334156190977" "0.00420595335308462" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T12:05:06.843

我想，您的 p 值存储为因子。您需要先将它们转换为数值。

```
tmp <- sapply(pvalue2, function(x) as.numeric(as.character(x))) 
```

现在，`tmp`可以使用该对象：

```
# copy the existing data frame to a new object
df2 <- pvalue2
# fill it with "Normal"
df2[ , ] <- "Normal"
# replace with values from tmp if value < 0.05
df2[tmp < 0.05] <- pvalue2[tmp < 0.05] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:33:43.107

假设您的第一个数据框称为 df

```
df_2<-data.frame(matrix(nrow=nrow(df),ncol=ncol(df)));
for (i in 1:ncol(df)){
    df_2[,i]<-ifelse(is.na(df[,i]) == FALSE && df[,i] >= .05,"Normal",ifelse(is.na(df[,i])==FALSE && df[,i] < 0.05,df[,i],NA))
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T12:01:57.480

```
set.seed(42)
df <- data.frame(a=runif(10,0,0.1),b=runif(10,0,0.1))
#since there are only numeric values
#you can transform to matrix
m <- as.matrix(df)

#new matrix
m2 <- m

m2[m>0.05] <- "Normal"

df2 <- as.data.frame(m2)

                    a                  b
1              Normal  0.045774177624844
2              Normal             Normal
3  0.0286139534786344             Normal
4              Normal 0.0255428824340925
5              Normal 0.0462292822543532
6              Normal             Normal
7              Normal             Normal
8   0.013466659723781 0.0117487361654639
9              Normal 0.0474997081561014
10             Normal             Normal 
```

# iphone - UIWebView 不加载移动网站

> ID：15023113
> 
> 赞同：4
> 
> 时间：2013-02-22T11:26:16.113
> 
> 标签：iphone, ios, objective-c, web, uiwebview

我知道这在之前已经介绍过了，但是提到的方法都不适合我，

我需要 UIWebView 来加载移动网站，但它会返回桌面版本

我试过了

```
NSMutableURLRequest *stadiumURLRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://www.example.com/"]];
[stadiumURLRequest setValue:@"Mozilla/5.0 (iPhone; U; CPU like Mac OS X; en) AppleWebKit/420+ (KHTML, like Gecko) Version/3.0 Mobile/1A543a Safari/419.3" forHTTPHeaderField:@"User-Agent"];
[stadiumWebView loadRequest:stadiumURLRequest]; 
```

在 AppDelegate 中：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
[[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookieAcceptPolicy:NSHTTPCookieAcceptPolicyAlways];

NSMutableDictionary *cookieProperties = [NSMutableDictionary dictionary];
[cookieProperties setObject:@"mobileApp" forKey:NSHTTPCookieName];
[cookieProperties setObject:@"1" forKey:NSHTTPCookieValue];
[cookieProperties setObject:@"www.example.com" forKey:NSHTTPCookieDomain];
[cookieProperties setObject:@"www.example.com" forKey:NSHTTPCookieOriginURL];
[cookieProperties setObject:@"/" forKey:NSHTTPCookiePath];
[cookieProperties setObject:@"0" forKey:NSHTTPCookieVersion];

NSHTTPCookie *cookie = [NSHTTPCookie cookieWithProperties:cookieProperties];
[[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookie:cookie];
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:07:42.627

您不必添加标题，默认情况下会发送它们，另外，查看它是否在 safari 中加载，而不仅仅是网站问题

# sql-server - 在 DISTINCT 中处理多个值

> ID：15023115
> 
> 赞同：2
> 
> 时间：2013-02-22T11:26:23.530
> 
> 标签：sql-server

我想创建一个从列中获取所有不同值的查询，如果有多个值，它应该选择最高的一个。

就像我有一个表架构一样：

> **员工姓名 | 任务 | 给定时间**

并且员工可以有多个相同的条目`Task`，我想`Tasks`为所有员工获得最高`TimeGiven`的所有不同，我该怎么做？

编辑
数据集：

```
EmployeName Task        TimeGiven
Mr. X       R&D         30
Mr. X       R&D         50
Mr. X       Devlpmnt    31
Mr. X       Devlpmnt    60
Mr. Y       R&D         40
Mr. Y       R&D         10
Mr. Y       R&D         90
Mr. Y       Devlpmnt    10

**Result Needed:**
Mr. X       R&D         50
Mr. X       Devlpmnt    60
Mr. Y       R&D         90
Mr. Y       Devlpmnt    10 
```

我需要的是每一个员工，`TimeGiven`每一个任务都做到最高！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:30:49.337

听起来你需要使用`group by`：

```
select EmployeeName
  , Task
  , TimeGiven = max(TimeGiven)
from t1
group by EmployeeName
  , Task 
```

**评论后编辑：**

你的意思是这样的：

```
select Task
  , TimeGiven = max(TimeGiven)
from t1
group by Task 
```

我所做的就是从查询中删除员工 - 这将为每个任务提供记录的 TimeGiven 最高的所有任务，无论哪个员工执行了该任务。

我仍然不清楚这是否是您需要的...如果不是，请提供示例数据集和您想要的输出。

**添加数据集后编辑：**

第一个查询给出了正确的结果。我所做的只是添加一个 order by 子句以提供您的确切结果集：

```
select EmployeeName
  , Task
  , TimeGiven = max(TimeGiven)
from tasks
group by EmployeeName
  , Task
order by EmployeeName
  , Task desc 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/260e4/3)。点击这里查看它的实际效果。

# mysql - 为什么在此 SQL 语句中使用 @variable 不会产生结果？

> ID：15023120
> 
> 赞同：0
> 
> 时间：2013-02-22T11:26:33.817
> 
> 标签：mysql, sql, variables

希望是一个简单的，可能是我错过的一些愚蠢的事情。为什么以下语句没有产生任何结果：

```
SET @old_sites_path = 'sites/mysite.co.uk/', @sites_path = 'sites/default/'

-- Update the content within blocks
UPDATE `boxes`
SET `body` = REPLACE(`body`, @old_sites_path+'files', @sites_path+'files'); 
```

但是，如果我只是简单地将变量替换为我得到的结果？

```
-- Update the content within blocks
UPDATE `boxes`
SET `body` = REPLACE(`body`, 'sites/mysite.co.uk/files', 'sites/default/files'); 
```

仅作为背景，这是帮助我管理 Drupal 数据库部署的更大脚本的一部分。

谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:29:08.837

运行它以获得线索：

```
SELECT 'sites/mysite.co.uk/' + 'files' 
```

然后看看[CONCAT()](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_concat)。

# kernel - 如何通过发送 Kernel_event 使用 clEnqueueTask 获取单个内核时序？

> ID：15023121
> 
> 赞同：0
> 
> 时间：2013-02-22T11:26:34.700
> 
> 标签：kernel, opencl, time.h

我正在尝试在 GPU 模拟器上实现任务并行性。而不是 EnQueueNDRangeKernel，我正在使用带有乱序执行模式启用的 EnQueueTask（具有 4 个差异内核）。我有两个主机指针，当我在试图将这两个写在全局内存上，由于异步模式，他们做错了..我创建了一个用户事件，比如..

```
clSetUserEventStatus(user_event, CL_COMPLETE);
ret = clEnqueueWriteBuffer(command_queue, Amobj, CL_TRUE, 0, 16*16*sizeof(float), A, 1, &user_event, NULL);
clSetUserEventStatus(user_event, CL_COMPLETE);
    ret = clEnqueueWriteBuffer(command_queue, Bmobj, CL_TRUE, 0, 16*16*sizeof(float), B, 1, &user_event, NULL); 
```

但它没有给出正确的结果，有时它会停滞不前..

```
cl_event timing_event1, timing_event2, timing_event3, timing_event4;
cl_ulong starttime1=0,starttime2=0,starttime3=0,starttime4=0,
         endtime1=0,endtime2=0,endtime3=0,endtime4=0,
         time_spent1,time_spent2=0,time_spent3=0,time_spent4=0, time_spent_all_0=0, time_spent_all_1=0;
ret = clEnqueueTask(command_queue, kernel[0], 0, NULL, &timing_event1);
ret = clEnqueueTask(command_queue, kernel[1], 0, NULL, &timing_event2);
ret = clEnqueueTask(command_queue, kernel[2], 0, NULL, &timing_event3);
ret = clEnqueueTask(command_queue, kernel[3], 0, NULL, &timing_event4);

  clGetEventProfilingInfo(timing_event1,CL_PROFILING_COMMAND_START,sizeof(cl_ulong),&starttime1,NULL);
clGetEventProfilingInfo(timing_event1,CL_PROFILING_COMMAND_END,sizeof(cl_ulong),&endtime1,NULL);
time_spent1 = endtime1 - starttime1;
  clGetEventProfilingInfo(timing_event2,CL_PROFILING_COMMAND_START,sizeof(cl_ulong),&starttime2,NULL);
clGetEventProfilingInfo(timing_event2,CL_PROFILING_COMMAND_END,sizeof(cl_ulong),&endtime2,NULL);
time_spent2 = endtime2 - starttime2;
    clGetEventProfilingInfo(timing_event3,CL_PROFILING_COMMAND_START,sizeof(cl_ulong),&starttime3,NULL);
clGetEventProfilingInfo(timing_event3,CL_PROFILING_COMMAND_END,sizeof(cl_ulong),&endtime3,NULL);
time_spent3 = endtime3 - starttime3;
    clGetEventProfilingInfo(timing_event4,CL_PROFILING_COMMAND_START,sizeof(cl_ulong),&starttime4,NULL);
clGetEventProfilingInfo(timing_event4,CL_PROFILING_COMMAND_END,sizeof(cl_ulong),&endtime4,NULL);
time_spent4 = endtime4 - starttime4;

time_spent_all_0 = time_spent1 + time_spent2 + time_spent3 + time_spent4;
time_spent_all_1 = endtime4 - starttime1;

printf("\n time_spent1 = %llu", time_spent1);
printf("\n time_spent2 = %llu", time_spent2);
printf("\n time_spent3 = %llu", time_spent3);
printf("\n time_spent4 = %llu", time_spent4);
printf("\n time_spent_all_0 = %llu", time_spent_all_0);
printf("\n time_spent_all_1 = %llu\n", time_spent_all_1); 
```

这样做之后，我得到了全零的..

```
 size_t resolution;
  clGetDeviceInfo(device, CL_DEVICE_PROFILING_TIMER_RESOLUTION, sizeof(resolution), &resolution, NULL);
  printf("resolution size : %d", resolution); 
```

这样做之后，我得到了一个像 17145896522 这样的大数字 .. 这是什么意思？

现在我的疑问是。，我需要在我的代码中放置`clFlush`和放置？`clFinish`我想要每个单独的内核计时和所有内核计时的总和..？如果这不值得，那么建议我使用任何其他方法来获得以毫秒、微秒或纳秒为单位的准确时间信息。

提前致谢..

* * *

我在更正代码后添加了我的结果..

```
gettimeofday( &t1, NULL );
ret = clEnqueueTask(command_queue, kernel[0], 0, NULL, &kernel_event1);
printf("Enqueue Task 0 successful: %d\n",ret);
gettimeofday( &t2, NULL );
ret = clEnqueueTask(command_queue, kernel[1], 0, NULL, &kernel_event2);
printf("Enqueue Task 1 successful: %d\n",ret);
gettimeofday( &t3, NULL );
ret = clEnqueueTask(command_queue, kernel[2], 0, NULL, &kernel_event3);
printf("Enqueue Task 2 successful: %d\n",ret);
gettimeofday( &t4, NULL );
ret = clEnqueueTask(command_queue, kernel[3], 0, NULL, &kernel_event4);
printf("Enqueue Task 3 successful: %d\n",ret);
gettimeofday( &t5, NULL );
clFinish(command_queue);

ret = clGetEventProfilingInfo(kernel_event1, CL_PROFILING_COMMAND_START, sizeof(cl_ulong), &starttime1, NULL);
printf("profiling starttime 1 : %d\n",ret);
ret = clGetEventProfilingInfo(kernel_event1, CL_PROFILING_COMMAND_END, sizeof(cl_ulong), &endtime1,NULL);
time_spent1 = endtime1 - starttime1;
printf("time_spent 1 = %llu\t profiling endtime 1 = %d\n", time_spent1, ret);

profiling starttime 1 : 0
time_spent 1 = 0
profiling endtime 1 = 0 
```

这些是我得到的结果。那我现在能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:57:52.530

在创建命令队列时不要忘记添加**CL_QUEUE_PROFILING_ENABLE 。**

检查每个 OpenCL 调用的返回码，尤其是**clCreateCommandQueue**调用，因为您的设备上可能无法进行分析。

在获取分析信息之前，您需要等待排队的命令终止。例如，在 4 个入队之后插入**clFinish**。

# php - 当有特定值时，禁用加载表上的复选框

> ID：15023124
> 
> 赞同：0
> 
> 时间：2013-02-22T11:26:42.430
> 
> 标签：php, jquery, html-table

我想在页面加载时检查表格行值..

表格示例：

**姓名** || **状态** || **放**

约翰 || 通过 || [ ]（复选框）

克里斯|| 失败 || [ ]（复选框）

当**状态**为“失败”时，我想禁用复选框..

现在我正在使用这个**jQuery**：

```
<script>
$(document).ready(function() {  

    if(getElementsByClassName('paket_ava').value=='kosong'))
    {  
        document.getElementById("checkboxx").disabled=true;
    } 
});
</script> 
```

这是我的**PHP 表代码**：

```
<tr>
    <td><?php echo $paket['id_paket'];?></td>                                   
    <td><?php echo $paket['nama_paket'];?></td>     
    <td><?php echo $paket['keterangan_paket'];?></td>
    <td><?php echo $paket['harga'];?></td>
    <td><img src='<?php echo $paket['gambar_paket']?>' width='120' height='120'></td>
    <td  class="paket_ava"><?php echo $paket['ketersediaan_paket'];?></td>
    // class on the table data
    <td><?php echo $paket['status_harian_paket'];?></td>
    <td><input type="checkbox" name="chkDel[]" id="checkboxx" class="aku" value="<?=$paket["id_paket"];?>"></td>
    <?php
         echo ("<td><a href='edit_data_paket.php?id_paket=$paket[id_paket]'>Edit</a></td>");        
    ?>
</tr> 
```

上面的代码不起作用，但是如果我更改为：

```
if(getElementsByClassId('paket_ava').value=='kosong')) 
        {  
            document.getElementById("checkboxx").disabled=true;
        } 
```

（当然我把表中的类改成id）

当页面加载它的行为奇怪并且第一个数据上的复选框被禁用时..

如何正确执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:41:59.113

尝试如下......它会帮助你......

小提琴示例：http: [//jsfiddle.net/68wbx/126/](http://jsfiddle.net/68wbx/126/)

假设您的 HTML 表格如下所示：

**HTML：**

```
<table id="datapaket" border="1">
    <tr>
        <th>Name</th><th>Status</th><th>Set</th>
    </tr>
    <tr>
        <td>John</td><td class="paket_ava">Pass</td>
        <td><input type="checkbox" name="chkDel[]" id="checkboxx" class="aku" value='sam'/></td>
     </tr>
    <tr>
        <td>Chris</td>
        <td class="paket_ava">Fail</td>
        <td><input type="checkbox" name="chkDel[]" id="checkboxx" class="aku" value='sam'/></td>
      </tr>
</table> 
```

并尝试下面的 Jquery ：

```
$(document).ready(function() {      
    $('#datapaket tr').each(function() {    //Looping Every Table Row
      //Get the TD Value that have Classname ".paket_ava"
      var str = $(this).find('.paket_ava').html(); 
      if(typeof str !== 'undefined'){
        if (str.indexOf("Fail") >= 0)
        $(this).find('td:nth-child(3) input:checkbox').attr("disabled", true);
      };
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:55:17.750

遍历每个具有类“paket_ava”的元素并在其中做你的事情。喜欢

```
 $('.paket_ava').each(function(i, obj) {
// your stuff...
}); 
```

参考：[jQuery循环遍历具有相同类的元素](https://stackoverflow.com/questions/4735342/jquery-to-loop-through-elements-with-the-same-class)

# php - 作曲家忽略 zip 依赖的 composer.json 文件

> ID：15023126
> 
> 赞同：6
> 
> 时间：2013-02-22T11:26:45.153
> 
> 标签：php, composer-php

我正在将 Composer 用于需要处理一些依赖项的项目，但我遇到了一个非常奇怪的问题。Composer 忽略了子包中包含的 composer.json 文件。

我的项目需要检索一些自定义 zip 包，在这些包中，composer.json 文件定义了其他要求。这些需求的存储库在根 composer.json 文件中声明，因为 Composer 不能递归地获取存储库。

问题是，在我的 zip 包被下载、解压缩并放置在供应商目录中之后，composer 完全忽略了它的 composer.json 定义了其他要求的地方......

zip 存档是这样的：

*   /目录1
*   /目录2
*   文件 1
*   文件2
*   作曲家.json

为了给你一个想法，这就是我的根 composer.json 的样子：

```
{
    "name": "myproject/project",
    "type": "library",
    "repositories": [    
        {
        "packagist" : false 
        },
        {
             "type": "package", 
             "package": {
                 "name" : "giulianobundles/mybundle",
                 "version" : "1",
             "dist": {
                "url": "http://url/to/zip/file",
                     "type": "zip"
                 }
             }
        },
        {
            "type": "package", 
            "package": {
                "name" : "giulianobundles/mybundlerequirement",
                "version" : "1",
        "dist": {
                    "url": "http://url/to/zip/file",
                "type": "zip"
        },
        }
    },  
    ],
    "require": {
        "php": ">=5.3.2",
         "giulianobundles/mybundle": "*"             
    },
    "autoload": {
        "psr-0": {
            "config": "./"
        }
    },
} 
```

并且捆绑包的 composer.json 包看起来像

```
{
    "name": "giulianobundles/mybundle",
    "type":"library",
    "require": {
        "giulianobundles/mybundlerequirement": "1"
    }
} 
```

Mybundle 包成功安装，但它的 composer.json 文件被完全忽略。任何的想法？我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T11:39:01.540

事实上，Composer 不会递归地查看*文件系统中的*composer.json 文件。它需要查看*存储库*中的 composer.json 文件。它通常的工作方式是一个包在某处有一个 git 或 svn URL。例如，Composer 将`git://<host>/<package>/composer.json`直接从存储库中获取，以在安装包之前计算出该包的依赖关系，以计算整体依赖关系。

`package`在您的情况下，您正在自己的 composer.json 文件中定义一个内联。这用于*代替依赖项中的 composer.json 文件*。这意味着 Composer 将`"package": { ... }`用作该包的规范 composer.json 文件，它不会查看代码本身；尤其是在打开包装之后。它将 Zip 文件视为没有自己的 composer.json 文件。

`"package": { ... }`在Composer 可以从中获取 composer.json 文件的版本控制系统中定义依赖关系或托管代码。

# python - 如何在python中清空缓冲区stringIO

> ID：15023129
> 
> 赞同：1
> 
> 时间：2013-02-22T11:26:54.360
> 
> 标签：python, truncate, stringio

实际上我正在尝试使用一些数据导出一个 csv 文件，下面是我的代码

```
import csv
from cStringIO import StringIO
import web

def download(list__of_records):
    csv_file = StringIO()
    csv_writer = csv.writer(csv_file)
    csv_writer.writerow(['Name', 'Link'])
    for i in list_of_records :
         csv_writer.writerow([i[0],i[1]])
    web.header('Content-Type','text/csv')       
    web.header('Content-disposition', 'attachment; filename=%s.csv'%file_name) 
    return csv_file.getvalue()

list_of_records_1 = [('name',"fedrik"),('age','73'),('city','portland')]
list_of_records_2 = [('name',"wow"),('age','466'),('city','asdsa')]

download(list_of_records_1) 
```

实际上，我将在一些下载带有数据的 csv 的网页中使用上面的代码`list_of_records`。

在上面的代码中，我使用的只是 web.py 框架，我使用它来指示浏览器下载 csv ifle

假设我调用了该函数`download(list_of_records_1)`，然后下载了一个包含数据的 csv 文件，如下所示

```
Name    fedrik
age         73
city        portland 
```

假设我用 调用相同的函数`download(list_of_records_2)`，保存到 csv 的输出如下

```
Name    fedrik
age         73
city        portland
Name    wow
age         466
city        asd 
```

也就是说，如果数据已经在 csv 中匹配，则将其覆盖，如果遇到新数据，则 csv 文件将使用以前的数据和当前`list_of_records_2`数据创建。

所以在上面的代码中，在将结果存储到缓冲区字符串`StringIO()`并保存到 csv 文件之后，我们应该截断/删除缓冲区字符串数据，这样当我们用其他结果列表调用相同的函数时，之前的数据就不会被写入进入当前文件的 csv 文件

谁能告诉我如何截断`StringIO()`上述代码中的缓冲区字符串？

# javascript - 仅在获取完成后使用比较器进行集合排序？

> ID：15023130
> 
> 赞同：0
> 
> 时间：2013-02-22T11:26:59.643
> 
> 标签：javascript, backbone.js

我有一个简单的消息集合，我想按时反向排序（最新的在顶部），使用`comparator`：

```
...
this.comparator = function(message) {
    var time = new Date(message.get("time")).getTime();
    return time;
}
... 
```

在我看来，我使用`fetch`和`add`事件：

```
messages = new MessageCollection();
messages.fetch({update: true});
messages.on("add", this.appendMessage);

...

appendMessage: function(message) {
    var messageView = new MessageView({
        model: message
    });
    this.$el.prepend(messageView.render().el);
} 
```

可悲的是，这些消息不是按照我要查找的顺序呈现的，而是按照它们来自服务器的原始顺序呈现的。

现在，经过一些测试，我发现当我一次添加所有消息时（使用`reset`），顺序与我预期的一样。

```
messages.fetch();
messages.on("reset", this.appendCollection);

...

appendCollection: function(messages) {
    messages.each(function(message) {
        this.appendMessage(message);
    }, this);
} 
```

尽管我可以理解这个过程，因为一个集合可能只能在添加所有模型后才能弄清楚它应该如何排序，这个（`on("add")`配置）曾经在 Backbone 0.9.2 中工作。

我错过了什么吗？比较器方法或事件模型是否发生了变化`add`？还是我走错路了？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:17:15.900

在“添加”的情况下，模型被插入到集合中的正确位置，正如“[比较器](http://backbonejs.org/#Collection-comparator)”文档所应该的那样）。但是你正在做

```
this.$el.prepend(messageView.render().el); 
```

这会将来自 MessageView 渲染的 html 放在 $el 的顶部（我假设它是 CollectionView 容器）。

保持 Html 尊重排序顺序的最佳方法是重新呈现集合视图，或滚动集合视图子项并将添加的 messageView 插入正确的位置（有点难做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:58:16.793

`appendMessage`在集合中添加模型时调用方法。是`appendMessage`按照添加模型的顺序而不是集合中的实际顺序调用的。

# sql-server - SQL Server 2012：登录到 PC-NAME\SQLEXPRESS 有效，但不能登录到本地/（本地）

> ID：15023131
> 
> 赞同：2
> 
> 时间：2013-02-22T11:27:10.510
> 
> 标签：sql-server, database-connection, connection-string, sql-server-2012, sql-server-2012-express

我想用服务器名登录我的 SQL Server 2012 Express，`local`但`(local)`它不起作用。

唯一有效的服务器名称是`PC-Name\SQLEXPRESS`.

`local/(local)`必须以某种方式工作，因为我必须使用以下连接字符串：

```
Data Source=localhost;Initial Catalog=... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T14:30:06.200

我已经重新安装它并确保在安装过程中选择“默认实例”而不是“命名实例”。现在一切又好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:37:56.803

我想我明白你现在想要做什么。

如果您真的不喜欢使用主机名\实例组合并且您正在使用 SQL 本地客户端进行连接，那么您始终可以在本地客户端中添加一个名为 local 的别名，该别名会解析为您的实例。这样，无论您最终通过更改别名将应用程序粘贴在哪个服务器/实例上，您都可以在应用程序中保持连接字符串相同。

有关如何配置的详细信息，请参阅下面的链接：

[如何设置和使用 SQL Server 别名](http://www.mssqltips.com/sqlservertip/1620/how-to-setup-and-use-a-sql-server-alias/)

# iis-7 - 为什么网站在安装谷歌站点地图生成器后开始抛出 HTTP 503 错误

> ID：15023132
> 
> 赞同：2
> 
> 时间：2013-02-22T11:27:15.977
> 
> 标签：iis-7, iis-7.5, windows-server-2008-x64

为什么 IIS 上的所有站点在安装 google 站点地图生成器后都开始抛出 HTTP 503 错误？

我注意到应用程序池正在崩溃。如果我重新启动应用程序池，它会在几分钟后再次崩溃。这一切都是在安装 Google 站点地图生成器工具 (sitemap_win-beta1-20091231.msi) 后开始的。

我们在 Windows server 2003 32bit OS 和 IIS6 上没有问题。在 Windows Server 2008 64 位操作系统上运行的 IIS 7 上存在此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:27:15.977

运行 64 位操作系统的 Windows Server 2008 上的安装程序错误地设置了 Google 站点地图生成器模块的路径。

```
C:\Program Files (x86)\Google\Google Sitemap Generator\\IIS7_Module_x64.dll 
```

注意 dll 文件名前的斜线。

要更正此问题，请执行以下操作：

*   在 IIS 管理器中单击您的服务器名称
*   点击“模块”</li>
*   选择一个名为“GoogleSiteMapGeneratorModule”的条目，然后点击“编辑”</li>
*   将路径字段中的双斜杠替换为单斜杠
*   您可能需要重新启动 IIS

# sql - SQL 结果集合并

> ID：15023133
> 
> 赞同：0
> 
> 时间：2013-02-22T11:27:17.707
> 
> 标签：sql, sql-server

我有一个限制，我一次只能将一个结果集发送到报告应用程序，以便为客户生成最终报告。

所以像这样的查询

```
select  
    [AGENT],
    [TRANSDATE], 
    [RECIPT NO],
    [CUSTOMER NAME],
    [ORDER NO] ,
    [TRANS NO] ,
    QUANTITY, 
    [AMOUNT COST],
From [Customer] C 
```

但是，我需要在底部有很多总计，例如某些列的此查询。由于它是一个遗留报告应用程序，我无法对前端进行任何更改。

```
select
    Sum ( QUANTITY ) as [SUM OF QUANTITY] , 
    Sum ( AMOUNT COST ) AS [SUM OF AMOUNT COST]
From  [Customer] C 
```

显然我简化了我正在使用的查询。所以问题是如何在 SQL 中使 2 个结果集成为一个结果集？

`Union``union all`如果您在最终应用程序中对列使用空白，则由于日期列被默认而失败。

`Rollup`或`Pivoting`或 CTE 我有点想，但还看不到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:53:47.507

窗口函数呢？

喜欢...

```
select  

[AGENT],

[TRANSDATE], 

[RECIPT NO],

[CUSTOMER NAME],

[ORDER NO] ,

[TRANS NO] ,

QUANTITY, 

[AMOUNT COST],

Sum ( QUANTITY ) over () as [SUM OF QUANTITY] , 

Sum ( [AMOUNT COST] ) over () AS [SUM OF AMOUNT COST]

From [Customer] C 
```

# c# - 如何在 Entity Framework 5 代码第一个子实体中映射识别关系与多个互斥父实体

> ID：15023137
> 
> 赞同：5
> 
> 时间：2013-02-22T11:27:31.923
> 
> 标签：c#, entity-framework-5, relationship

我使用的是 Entity Framework 5 Code First，我有以下模型：

```
class Document
{
    public int Id {get;set;}
    public String Name {get;set;}

    public IList<Page> Pages {get;set;}
}

class DocumentTemplate
{
    public int Id {get;set;}
    public String Description {get;set;}
    public String Name {get;set;}

    public IList<Page> Pages {get;set;}
}

class Page
{
    public int Id {get;set;}
    public string Text {get;set;}
} 
```

我知道如何映射子实体有 1 个父实体的识别关系。但我想映射 Page 实体，以便它对每个父母都有一个识别关系。

此外，父关系是相互排斥的。特定页面将属于 DocumentTemplate 或 Document，而不是两者。

在 Entity Framework 5 中是否可以进行这样的映射？

我不想为页面创建单独的实体，因为它们本质上是相同的，除了父关系。

TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T08:25:44.933

我不认为你可以有多个父母，但我会考虑以下选项：（
任何文档属于一些模板，只有模板可以有页面）

```
class Document
{
    public int Id {get;set;}
    public String Name {get;set;}
    public DocumentTemplate DocumentTemplate{get;set;}
}

class DocumentTemplate
{
    public int Id {get;set;}
    public String Description {get;set;}
    public String Name {get;set;}

    public IList<Page> Pages {get;set;}
}

class Page
{
    public int Id {get;set;}
    public string Text {get;set;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T23:36:09.490

这对你有用：

```
class Page
{
    public int Id {get;set;}
    public string Text {get;set;}

    public int? DocumentId { get; set; } // non-mandatory relationship to Document
    public int? DocumentTemplateId { get; set; } // non-mandatory relationship to DocumentTemplate

    // ... navigation properties
} 
```

# linux - grep + 使用正则表达式精确匹配 IP 地址

> ID：15023141
> 
> 赞同：1
> 
> 时间：2013-02-22T11:27:44.590
> 
> 标签：linux, perl, grep, solaris, ksh

我的目标是用三个八位字节精确匹配 IP 地址，而四个 IP 八位字节必须是有效八位字节 - 在 <0 到 255> 之间

例如，我在文件中有以下 IP

```
$ more file    
192.9.200.10
192.9.200.100
192.9.200.1555
192.9.200.1
192.9.200.aaa
192.9.200.@
192.9.200.:
192.9.200
192.9.200. 
```

我需要匹配前三个八位字节 - 192.9.200 而四个八位字节必须有效（0-255）

所以最后 - 期望结果应该是：

```
192.9.200.10
192.9.200.100
192.9.200.1 
```

基本语法应如下所示：

```
IP_ADDRESS_THREE_OCTETS=192.9.200
cat file | grep -x $IP_ADDRESS_THREE_OCTETS.[  grep‏ Regular Expression syntax ] 
```

请咨询如何在四个八位字节中编写正确的“grep正则表达式”以匹配三个八位字节，而四个八位字节必须有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:36:20.277

您需要使用一些高级工具将文本转换为正则表达式模式，因此您不妨只使用它。

```
perl -ne'
    BEGIN { $base = shift(@ARGV); }
    print if /^\Q$base\E\.([0-9]+)$/ && 0 <= $1 && $1 <= 255;
' "$IP_ADDRESS_THREE_OCTETS" file 
```

如果对基础进行硬编码是可以接受的，则可以简化为：

```
perl -ne'print if /^192\.9\.200\.([0-9]+)$/ && 0 <= $1 && $1 <= 255' file 
```

这两个片段也接受来自 STDIN 的输入。

* * *

对于完整的 IP 地址：

```
perl -ne'
    BEGIN { $ip = shift(@ARGV); }
    print if /^\Q$ip\E$/;
' 1.2.3.4 file 
```

或者

```
perl -nle'
    BEGIN { $ip = shift(@ARGV); }
    print if $_ eq $ip;
' 1.2.3.4 file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T11:34:47.083

正则表达式不适合比较数字，我会这样做`awk`：

```
$ awk -F. '$1==192 && $2==9 && $3==200 && $4>=0 && $4<=255 && NF==4' file
192.9.200.10
192.9.200.100
192.9.200.1 
```

如果你真的想使用`grep`你需要`-E`扩展正则表达式的标志或使用`egrep`因为你需要交替：

```
$ grep -Ex '192\.9\.200\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])' file
192.9.200.10
192.9.200.100
192.9.200.1

$ IP=192\.9\.200\.

$ grep -Ex "$IP(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])" file 
```

注意：您必须转义`.`以表示字面句点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-02T05:59:04.223

```
grep -E '^((25[0-5]|2[0-4][0-9]|[1]?[1-9][0-9]?).){3}(25[0-5]|2[0-4][0-9]|[1]?[1-9]?[0-9])$' 
```

此表达式不会匹配带有前导 0 的 IP 地址。例如，它不会匹配 192.168.1.01

此表达式不会匹配超过 4 个八位字节的 IP 地址。例如，它不会匹配 192.168.1.2.3

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T02:16:26.457

如果你真的想确定你拥有的是一个有效的 IPv4 地址，你可以随时检查（核心模块的[`inet_aton()`](http://perldoc.perl.org/Socket.html#%24ip_address-=-inet_aton-%24string)一部分）的返回值。`Socket`

# button - 在 Tkinter 中 def 如何工作？

> ID：15023149
> 
> 赞同：-2
> 
> 时间：2013-02-22T11:28:10.740
> 
> 标签：button, tkinter, photo, function

我在网格上制作了一本 Tkinter 书，导航按钮向下滚动左行，照片显示在右列上，跨越多行，因此按钮按应有的方式显示。在制作这本 Tkinter 书时。我在网格上做了一个按钮

```
left1 = Button(win, text=" Captian Scarlet ")# win, is root master
left1.configure(command=but1)# but1 is my first def
left1.grid(row=1, column=0)# all the buttons are on the left list 
```

这显示和工作就像一个没有定义的按钮

然后我做了一个def

```
def but1():
    img = Image.open("captain_scarlett.gif")# loads the gif file
    intro = ImageTk.PhotoImage(img)# loads image drivers I belevie
    right1 = Label(win, image=intro)# I think Lable is used the same as html <span>
    right1.grid(row=0, column=1, rowspan=13)# image formatting to display correctly with buttons 
```

因为当时我缺乏教育，我只能让图像在def之外显示。因此，我沮丧地发布了“此代码在未放入 def 时可以正常工作”。当我安顿下来后，我需要在网上找不到的知识，所以我问了一个问题：那么我如何让这段代码在 def 中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:44:42.267

**此代码可以正常工作。现在我的生产可以全速前进**

这是完成的代码

```
def but1():
    img = Image.open("captain_scarlett.gif")
    intro = ImageTk.PhotoImage(img)
    right = Label(win, image=intro)
    right.grid(row=0, column=1, rowspan=14)
    right.image=intro 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:47:36.160

是什么让你认为它不起作用？在这方面，Tkinter 没有什么特别之处。任何在 def 之外工作的东西肯定在 def 内工作。所有 python 代码的唯一警告是相同的。例如，除非另有声明，否则您在 def 中创建的任何变量都是本地变量，并且对象（但不是小部件）可能会在 def 执行后被垃圾收集。

可能正在发生的事情是您正在创建图像并将对它的引用存储在局部变量中。当 def 停止执行时，图像对象被垃圾收集。您需要保留对可以保留的图像的引用。一个简单的解决方案可能是做`right1.image=intro`.

# matlab - 暂停while循环并在Matlab中做其他事情

> ID：15023150
> 
> 赞同：0
> 
> 时间：2013-02-22T11:28:13.983
> 
> 标签：matlab, while-loop

我在 Matlab 中创建了一个 GUI，用户应该在开始时按下的按钮之一中有一个 while 循环。我在这个while循环中一帧一帧地拍摄。我的问题是我希望用户能够暂停这个过程（而不是完全停止），所以我添加了一个暂停按钮，并且在按下这个按钮时我正在更改一个标志。我需要在这个 matlab 中放置一个代码，当按下暂停按钮一次时，它将暂停循环过程，并在再次按下暂停按钮时继续循环过程。我试过

```
if flag==1 
   pause on; 
else 
   pause off 
end; 
```

但我看到了“暂停”；不会暂停 while 循环。有没有我可以使用的功能或方法？另外，我希望其他按钮能够在代码处于暂停模式时工作；例如另一个按钮显示一些文字，所以在暂停模式下，如果按下这个显示文字按钮，它必须在屏幕上显示文字。我尝试使用“waitfor”，但它停止了一切，这个显示按钮不起作用。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:01:45.417

您可能想使用 MATLAB 的[WAITFOR](http://www.mathworks.com/help/matlab/ref/waitfor.html)函数来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:37:21.830

我认为这可能是您正在寻找的

```
while flag == 1
   % Get/process your user input here

   % Finish checking user input
   pause(1) %Check every second, can of course be reduced
end 
```

# ios - 如何防止像素出血在较旧的 iOS 设备上渲染使用 Zwoptex 生成的精灵表？

> ID：15023158
> 
> 赞同：0
> 
> 时间：2013-02-22T11:28:44.777
> 
> 标签：ios, cocos2d-x, sprite-sheet, zwoptex

我打包了几个单独的精灵，并使用 Zwoptex 生成了一个大小为 2048*2048 的大型精灵表。但我缩小以匹配每个 iOS 设备，例如 iPad HD 为 2048*2048，iPhone 为 512*512 等。

我发现 Zwoptex 中的“间距像素”选项会影响精灵在设备上渲染的结果。该值表示在 sprite-sheet 中打包的每个单独的 sprite 之间的空间（以像素为单位）。例如，如果我将该值设置得太低，那么在更新或更好的设备以及旧设备上出现像素出血的可能性就更大。但是如果我增加这个值，机会就会降低，并且对于某个足够高的值，像素出血（希望）不会发生。

无论如何，我将值设置为 17-20 左右，这非常高，并且会占用精灵表上的宝贵空间。结果是，在 iPhone 模拟器上，还是有问题。

由于我们只能限制某些设备安装某些iOS版本的游戏，但iPhone 3GS仍然可以更新到最新版本，因此我需要解决这个问题。

所以我想知道如何防止从 iPhone 到 iPad（包括视网膜）的所有 iOS 设备上发生像素出血问题的解决方案。很高兴知道在精灵之间为“间距像素”选择特定值以在渲染时消除问题的任何最佳实践或实用解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:49:59.410

**如果只有模拟器显示这些工件，那么请务必忽略它们！**您的任何用户都不会在模拟器中运行您的应用程序，对吗？模拟器并不完美。

每个纹理图集精灵帧周围 2 个像素的间距足以（并且通常推荐）消除由像素出血引起的所有伪影。如果您仍然看到伪影，它们不是间距太小的直接原因。他们不可能。

我不确定 Zwoptex，您实际上是否必须手动创建纹理图集的每个缩小版本？你可能在那里做错了什么。试试[TexturePacker](http://www.texturepacker.com)，如果工件就这样消失了，我不会感到惊讶。

例如，一种类型的伪影是由未将对象放置在整数位置引起的。如果两个对象的位置类似于 (1.23545, 10.0) 和 (41.23545, 10.0)，您可能会看到两个对象之间存在间隙（通常是一条黑线）。使用整数坐标 (1,10) 和 (41,10) 可以解决问题。困难在于，这会一直沿层次结构向上，如果这些对象的父节点也在非整数位置，您仍然可以遇到这种线间隙伪影。

如果您四处搜索，您会发现大量关于 cocos2d 工件的因果讨论。要记住一件事：不要使用 CC_FIX_ARTIFACTS_BY_STRECHING_TEXEL 宏。这不是一个修复，它甚至没有接近。它有点修复了非整数位置伪影并引入了另一个（更糟糕的恕我直言）：运动过程中的混叠/闪烁。

# java - 我应该使用前置条件检查来检查中间结果吗？

> ID：15023161
> 
> 赞同：5
> 
> 时间：2013-02-22T11:28:49.927
> 
> 标签：java, guava

Guava 提供了辅助函数来检查先决条件，但我找不到辅助函数来检查中间结果。

```
private void foo(String param)
{
    checkNotNull(param, "Required parameter is not set");

    int x = get(param);
    if (x == -1) {
        throw new RuntimeException("This should never have happened and indicates a bug.");
    }
} 
```

*   我应该将零件包装`if (...) {....}`在自己的助手中吗？
*   还是我应该使用`checkState`番石榴？
*   还是我应该将失败`get()`视为`param`和使用的结果`checkArgument`？
*   在这些情况下我应该使用断言吗？
*   还是我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T12:04:40.743

它介于偏好问题和惯例问题之间。

一般人们会用断言来表示编程错误；也就是说，“如果我的工作做得对，那么无论用户输入或其他外部力量如何，非空值`param`都*不会*导致 -1 from 。” `get`我几乎将它们视为可以在运行时选择性地验证的注释。

另一方面，如果`get`在某些情况下可能返回 -1，但该输入无效，那么我通常会抛出一个`IllegalArgumentException`, 并且`checkArgument`是一种完全合理的方法。这样做的一个缺点是，当你后来发现它时，它可能来自几乎任何地方。考虑：

```
try {
    baz();
    bar();
    foo(myInput);
} catch (IllegalArgumentException e) {
    // Where did this come from!?
    // It could have come from foo(myInput), or baz(), or bar(),
    // or some method that any of them invoked, or really anywhere
    // in that stack.
    // It could be something totally unrelated to user input, just
    // a bug somewhere in my code.
    // Handle it somehow...
} 
```

在这很重要的情况下——例如，您想向用户弹出一个有用的注释，说明他们不允许`-1`在输入表单中输入——您可能需要抛出一个自定义异常，以便您可以更轻松地捕获后来：

```
try {
    baz();
    bar();
    foo(myInput);
} catch (BadUserInputException e) {
    reportError("Bad input: " + e.getMessage());
    log.info("recorded bad user input", e);
} 
```

至于`checkState`，对我来说听起来不太对劲。该异常通常意味着问题出在所处的状态`this`（或应用程序中的某个其他更全局的状态）。从[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true)：

> 表示方法已在非法或不适当的时间被调用。

在您的情况下， -1 永远不合适，因此`checkState`具有误导性。现在，如果它是：

```
if (x == -1 && (!allowNegativeOne()) { ... } 
```

...那会更合适，尽管它仍然具有上述缺点`IllegalArgumentException`。

所以，最后，有一个问题是你应该保持`if`原样，还是使用辅助方法。这真的归结为口味，检查的复杂程度以及使用频率（例如在其他方法中）。如果检查很简单，`x == -1`并且其他方法从未执行过检查（因此代码重用不是问题），我只会保留`if`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T11:41:44.423

如果该`get`方法只是将字符串转换为 int，那么它应该在那里进行验证，最好抛出非法ArgumentException 或一些这样的 RuntimeException。有了上述内容，您还可以在方法中混合抽象级别。例如，您`checkNotNull`抽象出`param`对 null 的检查，但`param`作为 int 的检查被拆分为`get`方法和`foo`方法。为什么没有一种 checkPreCondition 类型的方法？例如

```
private void paramShouldBeNonNullInt(String value) {
    if (value == null) throw new IllegalArgumentException("value was null");
    try {
       Integer.parseInt(value)
    } catch (NumberFormatException  e) {
        throw new IllegalArgumentException("value was not an integer");
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-06T11:07:44.277

首先，您需要区分合同（例如断言/编程错误）和错误处理（例如可以并且应该被捕获和从中恢复的可恢复异常）。

如果您需要检查中间结果，似乎您不信任调用的服务，并且您希望确保您的假设成立。对？这应该表达为一个断言，而 Guava 对此没有很好的支持。

看看valid4j。在这里找到[https://github.com/helsing/valid4j](https://github.com/helsing/valid4j)和在这里[http://www.valid4j.org](http://www.valid4j.org)。

然后我会表达这样的代码（使用valid4j对hamcrest-matchers的支持）：

```
private int getFoo(String param) {
    require(param, notNullValue()); // Violation means programming error at client

    int x = get(param);

    ensure(x, not(equalTo(-1)); // Violation means programming error at supplier
    return x;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-11T22:51:57.313

这里还有其他一些很好的答案。

从前提条件[javadoc](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/base/Preconditions.html)：

*前置条件异常用于发出*调用方法*出错的信号。(...) 后置条件或其他不变的失败不应该抛出这些类型的异常。*

所以 ...

> 我应该将 if (...) {....} 部分包装在我自己的助手中吗？

不，现有的设施应该足够好。

> 或者我应该使用 Guava 的 checkState 吗？

是的，可能：如果需要在调用此方法之前从文件中加载参数，那么这将是必须如何使用此类的合同的一部分。

> 或者我应该将 get() 的失败视为 param 的结果并使用 checkArgument？

可能是：例如，如果对参数的语法有一些格式限制。（虽然也许那会进去`get()`）

> 在这些情况下我应该使用断言吗？

是的。如果它不是像上面这样的前提条件检查，那么通常我会在`assert`这里使用。不要忘记您仍然可以添加消息：

```
assert x != 1 : "Indicates a bug."; 
```

我发现这适合记录期望并验证类或方法的内部/私有实现。

If you want to make that a runtime check, you *could* do `if (...) throw AssertionError` but that's probably only necessary if you're working with dodgy code that you don't trust.

# iphone - UITableview 偶尔会在最后一条记录下方加载空白

> ID：15023164
> 
> 赞同：0
> 
> 时间：2013-02-22T11:28:59.743
> 
> 标签：iphone, ios, objective-c, uitableview

我有一个`UITableview`偶尔会在最后一条记录下方加载空白。在下面的屏幕截图示例中，仅返回 9 个结果，表格应在最后一行结束。相反，表格中有相当多的滚动空白。如果我然后重新加载表格，那又可以了。它很少发生，我不知道问题可能是什么。

仅当您通过选择表格行从该视图控制器移动到详细视图时才会发生这种情况。当您返回到第一个带有表格的 vc 时，空白就在那里。

这是它的截图：

有 9 个结果。我滚动到 9 个结果的末尾（底部的黑色矩形是第 9 行），然后滚动到其下方的空白处。您可以从滚动条中看到有多少空白。

![在此处输入图像描述](../Images/9f4991cc3ca30418ca04ae86e5088052.png)

这是我创建单元格的方式：

```
 - (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"SimpleTableCell";

    tableCell *cell = (tableCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (cell == nil)
    {

    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"tableCell" owner:self options:nil];
    cell = [nib objectAtIndex:0];

    cell.selectedBackgroundView = [[UIView alloc] initWithFrame:CGRectZero];

    cell.selectedBackgroundView.backgroundColor = [UIColor colorWithRed:204.0/255.0 green:56.0/255.0 blue:55.0/255.0 alpha:1];

    cell.accessoryView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"arrowDisclosure.png"]];

    cell.descriptionLabel.numberOfLines = 0;

    [cell.titleLabel setFont:[UIFont fontWithName: @"Asap-Bold" size: 15.0f]];
    [cell.descriptionLabel setFont:[UIFont fontWithName: @"Asap-Regular" size: 10.0f]];
    [cell.priceDealLabel setFont:[UIFont fontWithName: @"Asap-Bold" size: 15.0f]];
    [cell.oldPriceDealLabel setFont:[UIFont fontWithName: @"Asap-Bold" size: 8.0f]];
    [cell.discountDealLabel setFont:[UIFont fontWithName: @"Asap-Bold" size: 12.0f]];

    [cell.ratingsNumberLabel setFont:[UIFont fontWithName: @"Asap-Regular" size: 9.0f]];
    [cell.amountLabel setFont:[UIFont fontWithName: @"Asap-Regular" size: 9.0f]];

} 
```

它发生在执行搜索之后，触摸一行以移动到详细视图，然后在返回到表视图时，空白就在那里。

我有这个。看起来我在两种键盘方法中都有相同的帧代码。会是这样吗？

```
 -(void) keyboardShown:(NSNotification *)note {

    CGRect keyboardFrame;
    [[[note userInfo] objectForKey:UIKeyboardFrameEndUserInfoKey] getValue:&keyboardFrame];
    CGRect tableViewFrame = self.tableView.frame;
    tableViewFrame.size.height -= keyboardFrame.size.height;
    [self.tableView setFrame:tableViewFrame];

    self.tableView.frame = CGRectMake(0, 100,320, 333); // displaying results after keyboard shown.

}
-(void)keyboardHidden:(NSNotification *)note {

    self.tableView.frame = CGRectMake(0, 100,320, 333); // displaying results after keyboard is hidden. 

} 
```

# asp.net - 远程报告：webexception 操作已超时

> ID：15023169
> 
> 赞同：0
> 
> 时间：2013-02-22T11:29:15.870
> 
> 标签：asp.net, visual-studio-2008, reportviewer

我有一个 ReportViewer，它可以在测试 SharePoint 服务器上很好地加载**远程**报告。我只是试图将它移动到生产（SharePoint）服务器，但是当我尝试查看报告时我在那里超时。

ReportViewer 确实可以在生产服务器上正常加载。我还看到了 ReportViewer 始终显示的默认“正在加载”消息以及报告的所有输入参数。但是过了一段时间（我想一分钟左右）我得到错误webexception 操作在报告数据通常出现的地方**超时。**

我不知道问题是什么。我试图增加报告超时，但这似乎没有任何效果：

```
ReportViewer1.ServerReport.Timeout = 1800000; 
```

我还将测试服务器的 web.config 复制到了生产服务器。所以那里没有区别。

还有什么我可以尝试的...？

# javascript - jqgrid 将数据附加到单元格

> ID：15023175
> 
> 赞同：1
> 
> 时间：2013-02-22T11:29:30.347
> 
> 标签：javascript, jqgrid

我已经使用 jgrid 几个星期了，我喜欢它。

我们正在使用 SignalR 为网格提供更新，当有更新时，我们会突出显示网格上的一个单元格，并且该突出显示会在用户配置的时间后消失。

目前要做到这一点 - 我们使用 data- 属性，每 3 秒处理所有具有该属性的元素并决定应用哪个类。

这种方法的问题是每次发生客户端事件（排序、分页、分组、过滤）时，这些数据属性都会丢失。

为了解决这个问题，我们一直在使用数组来管理它，但它变得非常混乱，而且已经是一场噩梦了！

所以我想知道的是 - 有没有更好的方法将数据附加到单元格..可能在数组级别？例如，id 喜欢能够在数据对象中的单元格上设置一个属性，然后只处理它而不是维护大量列表！

好吧，长话短说！是否可以在单元格中附加其他信息？因此可以在加载页面时对其进行处理..

**附加信息**

设置实际的单元格值不是问题，它将附加信息附加到我们需要做的单元格 - 目前我们向单元格添加最后更新的数据属性，这让我们决定如何在网格中显示该单元格（它可以根据用户定义的多个阈值进行更改）

我使用了 jquery.data() 但遗憾的是当元素从 dom 中删除时它被破坏了。

我可以只使用一个数组，但我希望有更好的解决方案！

**回答**

决定使用 $(grid).jqGrid('getLocalRow', id)["field"] = value; 这在网格的生命周期内一直存在，并允许我查询他们的属性 ongridloadcompleted！

干杯。圣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:44:46.147

如果您只需要*更新*网格中的一些现有数据，您可以使用[setCell](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods)方法，例如，它允许您在单元格上指定新数据、类或其他属性（请参阅讨论选项[的答案）。](https://stackoverflow.com/a/4943722/315935)该方法的缺点是每次修改单元格后都会重排页面[。](https://developers.google.com/speed/articles/reflow)然而，如果你没有太多的修改，它可能会更有效地作为整个网格体的*一次修改。*如果您提供演示问题的小型 SignalR 演示，我可以尝试为您提供更多优化建议。

# sql - sql中的数字到分钟

> ID：15023176
> 
> 赞同：0
> 
> 时间：2013-02-22T11:29:32.297
> 
> 标签：sql, sql-server, sql-server-2005, datetime

我需要在 SQL Server 中将数值转换为分钟值。

例如，让我们考虑 type 的输入变量`@ScheduleTime`和 type的`numeric(38,2)`输出变量`@NumberOfMinutes`。`int`

给定`@ScheduleTime = 2.35`（这意味着 2 小时 35 分钟），我需要输出`@NumberOfMinutes = 155`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:35:27.690

```
declare @ScheduleTime numeric(38,2)
set @ScheduleTime = 2.35

declare @NumberOfMinutes int
set @NumberOfMinutes = FLOOR(@ScheduleTime) * 60 + (@ScheduleTime % 1) * 100

print @NumberOfMinutes 
```

# ruby-on-rails - gem versionist（路径策略）测试 rspec

> ID：15023178
> 
> 赞同：0
> 
> 时间：2013-02-22T11:29:42.730
> 
> 标签：ruby-on-rails, ruby, rspec2

控制器中有一个方法“sign_up”

```
# controller/v3/users_controller
# POST api/v3/users/sign_up
def sign_up    
  user = User.new(params[:user])
  if user.save && user.update_attribute(:channel, "user_#{user.id}")
    render json: { Auth: { message: t(:sign_up_ok), user_id: user.id, channel: user.channel } }, status: 201
  else
    render json: { errors: Oj.load(user.errors.to_json) }, status: 400
  end
end 
```

路由.rb

```
api_version(module: 'V3', path: 'api/v3') do
  resources :users, only: [:index, :show, :destroy] do
    collection do
    post 'sign_up'
    post 'sign_in'
  end
end 
```

我正在尝试测试它：

```
require 'spec_helper'
describe V3::UsersController do
  describe "POST 'sign_up'" do
    it "should be successful" do
      post '/api/v3/users/sign_up'
      assert_response 200
    end
  end
end 
```

得到一个错误：

```
V3::UsersController POST 'sign_up' should be successful
  Failure/Error: post '/api/v3/users/sign_up'
  ActionController::RoutingError:
    No route matches {:controller=>"v3/users", :action=>"/api/v3/users/sign_up"}
 # ./spec/controllers/v3/user_controller_spec.rb:7:in `block (3 levels) in <top (required)>' 
```

耙路线

```
sign_up_api_v3_users POST    /api/v3/users/sign_up(.:format)     V3/users#sign_up 
```

请给我建议如何测试这种方法？

ruby-1.9.3 rails-3.2.12

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:32:57.287

该操作不应该包含完整路径，仅包含操作的名称。

```
post :sign_up 
```

RSpec 根据您使用的控制器推断路径的其余部分。正如您在错误消息中看到的，它发现控制器是 v3/users，并且它采取了您的操作，这不是一个有效的操作。

# android - Phonegap：源 URL 不在白名单中

> ID：15023185
> 
> 赞同：3
> 
> 时间：2013-02-22T11:30:16.370
> 
> 标签：android, cordova

我正在尝试让 PhoneGap 2.4.0 FileTransfer 在 Android 4.2 上运行。

我收到一条 Logcat 警告消息：

```
The Source URL is not in white list: 'http://api.etc.com' 
```

在我的 res/xml/cordova.xml 里面我有

```
<access origin=".*" subdomains="true"/> 
```

这应该将所有 URL 列入白名单，但没有运气，我仍然收到相同的警告和 FileTransfer 错误 3。

有任何想法吗？我可以检查 cordova.xml 是否正在被解析吗？

编辑：我正在使用 CordovaWebView。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T18:01:09.013

如果您不使用 DroidGap，则需要：

```
Config.init(this); 
```

在`onCreate`您的活动中。否则，所有白名单都会失败。经过两个小时的痛苦挖掘后才发现这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T15:23:38.007

如果您将 XML 更改为：

```
<access origin="*" subdomains="true"/> 
```

这个白名单基本上是整个互联网。如果您只想将您的域列入白名单，请使用更具体的内容。在此处查看详细信息：http: [//docs.phonegap.com/en/2.4.0/guide_whitelist_index.md.html](http://docs.phonegap.com/en/2.4.0/guide_whitelist_index.md.html)

“origin”属性现在是“uri”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:10:50.250

我设法通过使用 PhoneGap 1.9.0 而不是 2.4.0 解决了这个问题。使用更高版本时会返回错误。

我还设法通过不使用 CordovaWebView 而是使用 PhoneGap 构建来使其工作。但这在我的情况下是不可行的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-21T18:16:03.450

如果您在白名单 URL 配置中使用通配符，请不要使用子域属性。

看起来您必须非常具体地在 config.xml 中编写标签，尤其是在允许子域时 - 显然指定子域不适用于通配符，因此您需要两个标签块。

```
<access origin="*.google.com" />
<access origin="*.googleapis.com" />
<access origin="*.gstatic.com" />
<access origin="*.googleusercontent.com" />
<access origin="google.com" subdomains="true"/>
<access origin="googleapis.com" subdomains="true"/>
<access origin="gstatic.com" subdomains="true"/>
<access origin="googleusercontent.com" subdomains="true"/> 
```

# variables - 在特殊情况下使用保留变量值是一种不好的做法吗？

> ID：15023190
> 
> 赞同：1
> 
> 时间：2013-02-22T11:30:29.773
> 
> 标签：variables

我听说了故事的两端。一种观点认为，使用数值变量的特殊值来表示特殊状态是一种*设计缺陷*。但是，我一直遇到这种行为。

一个例子是一个字节无符号整数，其中值 255 表示缺少信息。

这是一个不好的做法吗？如果是这样，在什么特殊情况下是允许/鼓励的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:40:17.420

这在很大程度上取决于情况；一如既往，力求用最简单、最容易理解的方式写东西。希望异常情况处理不会弄乱正常情况的代码（这是异常背后的想法，但它们会造成自己的混乱......）。

选择用于特殊情况的值时要小心。例如，C/Unix 约定使用了很多，但请确保使用“不可能”的值。因此，`getchar(3)`返回一个字符代码作为`int`，但返回一个非字符`EOF`作为文件结尾。类似地，`read(2)`返回读取的字符数（如果没有要读取的内容，则可能为 0），或错误时返回 -1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:43:34.273

这绝对*不是*一个不好的做法，假设您负担得起，即可表示整数的范围有足够的额外值，您永远不需要在现实生活中使用。

例如，如果您需要完整范围的无符号字节，包括 255，那么给 255 赋予“未知”的新含义将是一个问题。如果 255 从未用于“真实”数据，那么您可以随意为其赋予任何您想要的含义。

然而，问题是在整个代码中使用特殊数字而不给它们分配特殊名称。例如，

```
if (myByte == 255) {
    // Process the situation when the value is unknown
} 
```

无疑是坏的。您应该命名所有特殊常量，并在整个代码中仅使用这些名称：

```
if (myByte == UNKNOWN_VALUE) {
    // You can skip the comment about processing an unknown value:
    // the name of the constant tells your readers what's going on.
} 
```

# dynamics-crm-2011 - CRM 2011 如何在高级查找中选择相关实体字段

> ID：15023193
> 
> 赞同：1
> 
> 时间：2013-02-22T11:30:35.850
> 
> 标签：dynamics-crm-2011, dynamics-crm

我正在使用 CRM 2011 Advanced Find on Account Entity 来查找 Incident CreatedOn 事件与 Account 相关联的日期。

但是当我去编辑列时，它没有给我选择事件创建日期的选项（因为高级查找查询在帐户实体上）。有什么方法可以在搜索中选择相关实体字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:51:44.733

您将无法在帐户实体的编辑列中添加 Incident.CreateOn，因为您只能添加查找字段（由帐户和其他实体之间的 N:1 关系产生）。

由于 Account 和 Incident 具有 1:N 的关系，您应该能够将 account 列添加到 Incident 列中，如 Pedro Azevedo 所述。下图向您展示了如何做到这一点：

![高级查找](../Images/7187148b1943d16e5d2bc394c0d7a8f0.png)

请注意，记录类型将向您显示您在事件实体中拥有的查找字段列表以及与哪个实体相关 - 在这种情况下，`Customer`是事件实体中的关系名称并且`Account`是相关实体。

干杯，二村

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T12:46:38.970

尝试在事件实体中执行此操作。您可以在两个实体中过滤和添加列。

# symfony - Symfony2 / Doctrine2 - 如何使用 QueryBuilder 转换此 SQL 请求？

> ID：15023195
> 
> 赞同：0
> 
> 时间：2013-02-22T11:30:39.253
> 
> 标签：symfony, doctrine-orm, query-builder

我有一个关系：**用户 -> [OneToMany] -> 个人资料 <- [OneToMany] <- 组**

当用户加入一个组时，会使用一对 user_id/group_id 创建一个配置文件。

我想从用户那里获得未加入的组。

这个 SQL 请求很好用，但我想用 QueryBuilder 翻译它：

对于 id 为 2 的用户，

```
SELECT g.id 
FROM Group g 
WHERE id NOT IN (SELECT group_id FROM Profile WHERE user_id = 2) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:40:31.723

我没有测试它，但我认为这应该工作

```
 $qb = $this->conn->createQueryBuilder();
    $qb->select('g.id');
    $qb->from('Group', 'g');
    $qb->innerJoin('g', 'Profile', 'p', 'g.id != p.group_id');
    $qb->where('p.group_id = 2); 
```

**编辑对不起，我没有阅读未加入的部分。

尝试这个

```
$qb = $this->conn->createQueryBuilder();
$qb->select('g.id');
$qb->from('Group', 'g');
$qb->where($qb->expr()->notin(
       'g.id',
       $qb2->select('p.group_id')
           ->from('Profile', 'p')

           ->getDQL()
)); 
```

# kml - Google 地球插件气球：现身活动

> ID：15023207
> 
> 赞同：0
> 
> 时间：2013-02-22T11:31:28.293
> 
> 标签：kml, google-earth-plugin

我们正在使用 GEPlugin 进行巡回演出，我有一些问题..

Tour类似于[Tour](http://google-latlong.blogspot.com/2009/02/fins-up-for-touring-in-google-earth.html "旅游")。

它启动并导航到一个地标，并在此停止并显示一个带有该地标特定信息的气球。
我在 kml 的描述中使用 iframe 定义了气球，它指向一个 php 脚本。
如果单击地标（通过附加的单击事件），我可以加载 css 和 javascript，但是当游览停止设置时，我无法显示它

```
<Change><Placemark><gx:balloonVisibility>1</gx:balloonVisibility></Placemark></Change> 
```

在 kml 文件中。

有没有办法让它以我想要的方式显示？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:55:07.960

好的，我找到了解决方案。

我将事件 balloonopening（查看整个文档）附加到 google earth 插件的实例，获取功能并设置特定的气球。

这里有一些代码示例：

```
function showBalloon(placemark){
    var content = placemark.getBalloonHtmlUnsafe();
    var balloon = ge.createHtmlStringBalloon('');
    balloon.setFeature(placemark);
    balloon.setContentString(content);
    balloon.setCloseButtonEnabled(false);
    ge.setBalloon(balloon);
}

google.earth.addEventListener(ge, 'balloonopening', function(){
    var placemark = ge.getBalloon().getFeature();
    showBalloon(placemark);
}); 
```

谢谢！

# scala - 在 Scala 中编写 Builder 模式，同时隐藏案例类直接访问

> ID：15023211
> 
> 赞同：2
> 
> 时间：2013-02-22T11:31:43.270
> 
> 标签：scala, design-patterns, neo4j, spring-data-neo4j

让我们假设这个构建器：

```
@NodeEntity
case class Meeting(@Indexed creator: String, @Indexed title: String, @Indexed description: String,
                 @Indexed activityType: String, @Indexed startSchedule: Date, @Indexed endSchedule: Date,
                 @Indexed place: String, @Indexed maxParticipants: Int) {

  @GraphId private var _id: Long = _

  private def this() {
    this("unknown", "no title", "no description", "no activity type", new Date(), new Date(), "no place", 0)
    //dummy values in order to satisfy Scala's no-arg constructor syntax (required by Spring-Data)
  }
}

object Meeting {

  def builder(): PossibleMeeting = PossibleMeeting()

  case class PossibleMeeting(creator: String = "", title: String = "", description: String = "",
                           activityType: String = "", schedule: (Date, Date) = (new Date(), new Date()),
                           place: String = "", maxParticipants: Int = 0) {

    def withCreator(creator: String) = {
        this.copy(creator = creator)
      }

      def withTitle(title: String) = {
        this.copy(title = title)
      }

      def withDescription(description: String) = {
        this.copy(description = description)
      }

      def withActivityType(activityType: String) = {
        this.copy(activityType = activityType)
      }

      def withSchedule(schedule: (Date, Date)) = {
        this.copy(schedule = schedule)
      }

      def withPlace(place: String) = {
        this.copy(place = place)
      }

      def withMaxParticipants(maxParticipants: Int) = {
        this.copy(maxParticipants = maxParticipants)
      }

      def build(validator: PossibleMeetingValidator) = {
        this.toMeeting(validator)
      }

    def toMeeting(possibleMeetingValidator: PossibleMeetingValidator): ValidationNEL[MeetingValidationError, Meeting] =
      (possibleMeetingValidator.checkForNonEmpty("creator", creator, "Creator must not be empty") |@|
        possibleMeetingValidator.checkForNonEmpty("title", title, "Title must not be empty") |@|
        possibleMeetingValidator.checkForNonEmpty("description", description, "Description must not be empty") |@|
        possibleMeetingValidator.checkForNonEmpty("activityType", activityType, "Activity type must not be empty") |@|
        possibleMeetingValidator.checkForEndScheduleConsistency("endSchedule", schedule._1, schedule._2, "Schedule is not consistent since endSchedule date is anterior to startSchedule date") |@|
        possibleMeetingValidator.checkForNonEmpty("place", place, "Place must not be empty"))(Meeting(_, _, _, _, schedule._1, _, _, maxParticipants))

  } 
```

*Spring-Data-Neo4j*`@NodeEntity`使用注释将对象保存为图形节点。

 *我想强制客户端使用此调用语法来创建`Meeting`：

```
Meeting.builder().
          withCreator(creator).
          withTitle(title).withDescription(description).
          withActivityType(activityType).
          withSchedule(schedule).withPlace(place).
          withMaxParticipants(maxParticipants).build(PossibleMeetingValidator()) 
```

而不是冒险的直接方式：

```
Meeting(creator, title, description, activityType, schedule, place, maxParticipants) 
```

我尝试了扩展 a 的著名技巧`case class`，在这里`Meeting`通过一个密封的特征并将其设为`Meeting`私有。此链接显示了一个示例：[隐藏案例类允许泄漏](http://gist.github.com/travisbrown/5008062)。

但是，使用此解决方案，*Spring-Data*会引发错误，通知`Meeting`必须具有公共构造函数（即公共类/案例类）。

是否有另一种隐藏案例类以防止外部直接使用的方法，以便 Spring-Data 不会抱怨访问？这似乎很困难，如果不是不可能的话，但是......它会很棒:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:08:05.870

好吧，如果我理解正确，这归结为有一个 spring 可以调用的构造函数，但 scala 代码不能。我看到的一个（丑陋的）解决方案是使 cosntructor 对`Meeting`单例私有。这将防止 scala 代码（除了单例）直接实例化它。另一方面，由于java不支持“作用域私有”的概念，所以从java代码的角度来看，构造函数实际上是public的。特别是当通过java反射访问构造函数时，构造函数被视为公共的，可以被调用。这意味着 spring 实例化应该没有问题`Meeting`，但同时 scala 代码将无法直接实例化它。正是你想要的。

所以你所要做的就是这个（注意`private`参数列表之前的关键字）：

```
@NodeEntity
case class Meeting private[Meeting] (@Indexed creator: String, @Indexed title: String, @Indexed description: String,
             @Indexed activityType: String, @Indexed startSchedule: Date, @Indexed endSchedule: Date,
             @Indexed place: String, @Indexed maxParticipants: Int) {
 ... 
```

This should work as expected, though it's a bit gross to rely on the imperfect mapping of scala code to the JVM model.

Another cleaner alternative would be to teach spring how to instantitate your class, using a custom factory that calls `Metting.builder`. I won't comment further on this solution as I have no experience with spring. However from a quick glance it seems that the following is relevant: [http://static.springsource.org/spring/docs/2.0.x/reference/beans.html#beans-factory-extension-factorybean](http://static.springsource.org/spring/docs/2.0.x/reference/beans.html#beans-factory-extension-factorybean)*

# php - PHP将位数组压缩为可能的最短字符串

> ID：15023213
> 
> 赞同：2
> 
> 时间：2013-02-22T11:32:00.423
> 
> 标签：php, arrays, encoding, compression

我有一个数组，其中包含代表真值或假值的 1 或 0 值。例如

```
array(1,0,0,1,0,1,1,1,1); 
```

我想将此数组压缩/编码为可能的最短字符串，以便可以将其存储在空间受限的地方，例如 cookie。它还需要能够在以后再次解码。我该怎么做？

附言。我在 PHP 中工作

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T11:39:27.770

这是我的建议：

```
$a = array(1,0,0,1,0,1,1,1,1,1,0,0,1,0,1,1,1,1,1,0,0,1,0,1,1,1,1);

$compressed = base64_encode(implode('', array_map(function($i) {
    return chr(bindec(implode('', $i)));
}, array_chunk($a, 8))));

var_dump($compressed); // string(8) "l8vlBw==" 
```

因此，您获取每 8 个字符（实际上是二进制`0..255`），将它们转换为整数，表示为 ASCII 字符，将其内爆为字符串并转换为 base64 以便能够将其保存为字符串。

**更新**：

相反的很简单：

```
$original = str_split(implode('', array_map(function($i) {
    return decbin(ord($i));
}, str_split(base64_decode($compressed))))); 
```

我到底是怎么写的（以防万一有人对如何编写这种不可读且几乎无法维护的代码感兴趣）：

我已经编写`$original = $compressed;`并开始逐步反转这个表达式的正确部分：

1.  从 base64 解码为二进制字符串
2.  将其拆分为数组
3.  将每个字符转换为其 ASCII 码
4.  将十进制 ASCII 码转换为二进制
5.  将所有二进制数合并为一个
6.  将长二进制字符串拆分为数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:37:34.263

不要使用序列化。只需制作一个字符串：

```
<?php

$string = implode( '', $array );
?> 
```

你会得到一个这样的字符串：

```
100101111 
```

如果您想再次拥有一个数组，只需像访问数组一样访问它：

```
$string = '100101111';

echo $string[1]; // returns "0"

?> 
```

当然，您也可以将其设为小数并仅存储数字。这甚至比“原始”位还要短。

```
<?php

$dec = bindec( $string );

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T13:25:12.353

[打包](http://www.php.net/manual/en/function.unpack.php)和解[包](http://www.php.net/manual/en/function.unpack.php)怎么样

```
$arr = array(1,1,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,1,1,1);
$str = implode($arr);
$res = pack("h*", $str);
var_dump($res);
$rev = unpack("h*", $res);
var_dump($rev); 
```

**输出：**

```
string(10) # Not visible here
array(1) {
  [1]=>
  string(20) "11110011010011001111"
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T14:09:33.777

这是我基于 zerkms 答案的解决方案，它处理将小数转换回二进制时前导 0 的丢失。

```
function compressBitArray(array $bitArray){
    $byteChunks = array_chunk($bitArray, 8);

    $asciiString = implode('', array_map(function($i) {
        return chr(bindec(implode('', $i)));
    },$byteChunks));   

    $encoded = base64_encode($asciiString).'#'.count($bitArray);
    return $encoded;
}

//decode
function decompressBitArray($compressedString){
    //extract origional length of the string
    $parts = explode('#',$compressedString);
    $origLength = $parts[1];

    $asciiChars = str_split(base64_decode($parts[0]));
    $bitStrings = array_map(function($i) {
        return decbin(ord($i));
    }, $asciiChars);

    //pad lost leading 0's
    for($i = 0; $i < count($bitStrings); $i++){
        if($i == count($bitStrings)-1){
            $toPad = strlen($bitStrings[$i]) + ($origLength - strlen(implode('', $bitStrings)));
            $bitStrings[$i] = str_pad($bitStrings[$i], $toPad, '0', STR_PAD_LEFT);
        }else{
            if(strlen($bitStrings[$i]) < 8){
                $bitStrings[$i] = str_pad($bitStrings[$i], 8, '0', STR_PAD_LEFT);
            }
        }
    }

    $bitArray = str_split(implode('', $bitStrings));
    return $bitArray;
} 
```

# ruby-on-rails - 公用文件夹中的 Rails 访问文件夹

> ID：15023216
> 
> 赞同：6
> 
> 时间：2013-02-22T11:32:15.113
> 
> 标签：ruby-on-rails

我有这样的结构（例如）：

```
 public
   art_im
     folder1
        img01.jpg 
```

我需要写什么，才能在标签中访问这个 img01.jpg？我试试

```
= image_tag("#{Rails.root}/public/art_im/images_#{@graphics.id}/#{@grp.id}.jpg", :alt => "#{@art.nr}") 
```

但我进入 html `<img alt="lalala" src="/home/prog/project/Shop/public/art_im/images_32/214800.jpg">`

但是如何在我的服务器上链接并获取这些图像？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T11:33:31.833

当您的应用程序由 webserver 运行时，它的 webroot 将是`public`目录。所以，这应该工作：

```
= image_tag("/art_im/images_#{@graphics.id}/#{@grp.id}.jpg", :alt => "#{@art.nr}") 
```

# android - Android ScrollView 和 TableLayout 中的相等列行

> ID：15023217
> 
> 赞同：0
> 
> 时间：2013-02-22T11:32:17.910
> 
> 标签：android, layout, scrollview, tablelayout

我正在开发一个需要添加动态行的应用程序。我面临以下问题。

1.  我有 3 列，并且需要它们中的每一列具有相等的宽度。表格列根据文本长度进行拉伸，这使应用程序变得混乱。

2.  我添加了 ScrollView 但它不能正常工作。添加大约五行多余的行后，只有第一列可见。

布局由 2 部分组成。表格布局出现在第二部分。这是我的 XML 布局。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/mabs"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:visibility="visible" >

<ImageButton
    android:id="@+id/shw"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="24dp"
    android:background="@null"
    android:src="@drawable/shw" />

<ImageView
    android:id="@+id/lbl"
    android:layout_width="match_parent"
    android:layout_height="75dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/moolbl" />

<EditText
    android:id="@+id/tf"
    android:layout_width="192dp"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/lbl"
    android:layout_marginTop="15dp"
    android:ems="10"/>
<ImageButton
    android:id="@+id/moob"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/lbl"
    android:background="@null"
    android:src="@drawable/moo" />

<ScrollView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_above="@id/shw"
    android:layout_alignParentLeft="true"
    android:layout_below="@id/moob">
    <TableLayout
        android:id="@+id/tbl"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tf"
        android:layout_marginTop="51dp"
        android:scrollbars="vertical" >

        <TableRow
            android:id="@+id/tblr"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal" >

            <TextView
                android:id="@+id/word"
                android:layout_weight="1"
                android:text="  GUESS"
                android:textStyle="bold"
                android:typeface="sans" />

            <TextView
                android:id="@+id/bull"
                android:layout_weight="1"
                android:text="  WORD"
                android:textStyle="bold"
                android:typeface="sans" />

            <TextView
                android:id="@+id/cow"
                android:layout_weight="1"
                android:text="  MEAN"
                android:textStyle="bold"
                android:typeface="sans" />
        </TableRow>
    </TableLayout>
</ScrollView> 
```

在代码部分（添加动态行）

```
TableRow tr = new TableRow(this);
LayoutParams lp = new LayoutParams(LayoutParams.FILL_PARENT,
    LayoutParams.WRAP_CONTENT);
lp.weight = 1; 
lp.gravity = Gravity.CENTER_HORIZONTAL;
tr.setLayoutParams(lp);
TextView tvLeft = new TextView(this);
tvLeft.setLayoutParams(lp);
tvLeft.setText(tft);
TextView tvCenter = new TextView(this);
tvCenter.setLayoutParams(lp);
tvCenter.setText(word + "");
TextView tvRight = new TextView(this);
tvRight.setLayoutParams(lp);
tvRight.setText(mean + "");
tr.addView(tvLeft);
tr.addView(tvCenter);
tr.addView(tvRight);

tbl.addView(tr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT,
    LayoutParams.WRAP_CONTENT)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:33:55.053

使用自定义[ListView](http://developer.android.com/guide/topics/ui/layout/listview.html)并将您的表格布局用作自定义 ListItem

# jquery - jQuery Fancybox 在 YouTube 视频上打开

> ID：15023220
> 
> 赞同：1
> 
> 时间：2013-02-22T11:32:34.423
> 
> 标签：jquery, youtube, fancybox-2

加载页面时我正在打开fancybox。如果在页面上嵌入了 YouTube 视频，它仍然可见，直到我单击fancybox 中的上一个/下一个图像。

这是HTML代码：

```
<div id="fancycontainer">
    <a href="img/normal/01.jpg" rel="fg" class="fg" id="fg_1"><img src="img/stamp/01.jpg"></a>
    <a href="img/normal/02.jpg" rel="fg" class="fg" id="fg_2"><img src="img/stamp/02.jpg"></a>
    <a href="img/normal/03.jpg" rel="fg" class="fg" id="fg_3"><img src="img/stamp/03.jpg"></a>
</div>
<p><iframe width="420" height="315" src="http://www.youtube.com/embed/P2-VGDF4y18" frameborder="0" allowfullscreen></iframe></p>
<p>blah blah...</p> 
```

这是jQuery代码：

```
$(function() {
    $('.fg').fancybox();
});
// autoopen
$(document).ready(function() {
    $('#fg_1').trigger('click');
} 
```

如何将打开的 fancybox 放在 youtube 视频上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T12:09:59.133

尝试将`wmode`参数添加到 URL 并将其设置为`opaque`，这应该可以解决您的问题。

```
<p><iframe width="420" height="315" src="http://www.youtube.com/embed/P2-VGDF4y18?wmode=opaque" frameborder="0" allowfullscreen></iframe></p> 
```

# iphone - NSJSONSerialization Json 嵌套子

> ID：15023221
> 
> 赞同：1
> 
> 时间：2013-02-22T11:32:37.250
> 
> 标签：iphone, ios, xcode, json, nsjsonserialization

我试图深入到嵌套的 JSon 数组中，我已经成功地完成了上面的级别，但我不知道如何更深入。

我需要记录图像@url 我已经附加了一个屏幕显示来显示我需要它去哪里。

谢谢 ：）

![json](../Images/3ef5a01e5e00e70ac12f4850b70c973e.png)

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

    NSURL *url = [NSURL URLWithString:@"http://api.storageroomapp.com/accounts/511a4f810f66026b640007b8/collections/511a51580f66023bff000ce9/entries.json?auth_token=Zty6nKsFyqpy7Yp5DP1L&preview_api=1"];

    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [[NSURLConnection alloc] initWithRequest:request delegate:self];

}

-(void)connectionDidFinishLoading:(NSURLConnection *) connection{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    NSDictionary *dictionary = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil];

    NSDictionary *arrayDictionary = dictionary[@"array"];

    news = arrayDictionary[@"resources"];

    [tableView reloadData];
}

-(void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{
    UIAlertView *errorView = [[UIAlertView alloc] initWithTitle:@"Error" message:@"The data could not be downloaded - please make sure you're connected to either 3G or Wi-FI" delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
    [errorView show];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
}

-(int)numberOfSectionsInTableView:(UITableView *)tableView{
    return  1;
}

-(int)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return [news count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    NSDictionary *newsItem = news[[indexPath row]];

    NSString *title = newsItem[@"title"];
    NSString *date = newsItem[@"date"];
    NSString *thumb = newsItem[@"tablethumb"];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MainCell"];

    if (cell == nil) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MainCell"];

        [[cell textLabel] setText:title];
        [[cell detailTextLabel] setText:date];

        if((NSNull *)thumb == [NSNull null]){
            NSLog(@"no image");
        } else{
            NSLog(@ "image = %@", thumb);

        }

    }
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:38:25.137

对于遍历嵌套对象，您可以使用`valueForKeyPath`方法并使用点语法来深入了解层次结构。

像这样的东西会从你的字典中获取`url`值：`newsItem`

```
NSDictionary *newsItem = news[[indexPath row]];
NSString *thumbUrl = [newsItem valueForKeyPath:@"tablethumb.url"]; 
```

PS。如果你真的有前缀的属性then 你可能会因为[使用作为 operator 的特殊标记而](http://nshipster.com/kvc-collection-operators/)`@`遇到麻烦。在这种情况下，您可以改为执行以下操作：`valueForKeyPath``@`

```
NSDictionary *newsItem = news[[indexPath row]];
id tablethumb = [newsItem objectForKey:@"tablethumb"];
NSString *thumbUrl = @"";
// Check if not null and access the @url
if (tablethumb != [NSNull null])
  thumbUrl = tablethumb[@"@url"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:54:10.167

尝试像这样从字典中访问值，

```
NSLog(@"URL: %@",[newsItem objectForKey:@"@url"]); 
```

# asp.net - ASP.NET 迁移 - 路径“GET”被禁止

> ID：15023222
> 
> 赞同：1
> 
> 时间：2013-02-22T11:32:37.690
> 
> 标签：asp.net

我们有一个从 2.0 迁移到 4.0 的 ASP.NET 应用程序。

迁移后，在访问根 URL 时，会抛出异常“路径 'GET' 被禁止。”。默认页面不同于 IIS 默认页面列表（“Pages/DashBoard.aspx”）中的页面。它在访问完整 URL ("<>/Pages/DashBoard.aspx") 时工作​​。

任何想法？

应用程序池管理的管道模式是“经典”。

# sql - SQL：按优先级排序，但将 0 放在最后

> ID：15023226
> 
> 赞同：7
> 
> 时间：2013-02-22T11:32:53.653
> 
> 标签：sql, sqlite, sql-order-by, android-sqlite

我有一个名为“优先级”的（int）列。当我选择我的项目时，我希望最高优先级（最低编号）排在第一位，最低优先级（最高编号）排在最后。

但是，没有优先级的项目（当前优先级为 0）应该在具有优先级的项目之后的其他列中列出。

换句话说。如果我有这些优先事项：

```
 1 2 0 0 5 0 8 9 
```

我如何对它们进行排序：

```
 1 2 5 8 9 0 0 0 
```

我想我可以使用 Int.max 代替 0，但是 0 构成了一个很好的默认值，我会尽量保留它。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-23T06:28:29.970

我认为它不会比这更干净：

```
ORDER BY priority=0, priority 
```

[SQLFiddle 演示](http://www.sqlfiddle.com/#!9/788b3/1)

请注意，与任何其他解决方案不同，此解决方案将利用 index on`priority`并且如果记录数量很大，则速度会很快。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-22T11:38:04.480

尝试：

```
order by case priority when 0 then 2 else 1 end, priority 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T11:38:18.707

一个非常简单的解决方案可能是使用复合值/“前缀”进行排序，如下所示：

```
SELECT ...
FROM ...
ORDER By CASE WHEN priority = 0 THEN 9999 ELSE 0 END + priority, secondSortCriteriaCol 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T11:38:51.893

这会成功的。您需要将 testtable 替换为您的表名。

```
SELECT t.priority
FROM dbo.testtable t
ORDER BY (CASE WHEN t.priority = 0 THEN 2147483647 ELSE t.priority END) 
```

如果不清楚我选择了 2147483647，因为这是优先级列的最大值，所以它将是最后一个。

马克的答案更好，并且可以使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T12:03:45.100

`order by case(priority) when 0 then 10 else priority end`

# xaml - Windows 8 Store 应用程序 XAML ListView Scroll Changed 事件

> ID：15023236
> 
> 赞同：0
> 
> 时间：2013-02-22T11:33:12.857
> 
> 标签：xaml, listview, scroll

我想在 Windows 8 Store 应用程序中检测 ListView Scroll Changed Event 有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:09:20.913

您是否尝试过事件[DragLeave](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.uielement.dragleave.aspx)？

我发现这个讨论[WinRT XAML: Automatically Scrolling ListView and Detection](http://mobile.dzone.com/articles/winrt-xaml-automatically)。希望它可以帮助你;）

# sencha-touch - tab.Panel 内的导航视图没有动画

> ID：15023237
> 
> 赞同：0
> 
> 时间：2013-02-22T11:33:15.277
> 
> 标签：sencha-touch

我有一个 TabPanel 容器，其中一个视图是 NavigationView。当我将另一个视图推入此 NavigationView 时，它不会以动画方式滑动，而是立即出现。我的布局有问题吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:08:23.093

我发现了问题。NavigationView 在它的配置中有一个卡片布局。删除它，现在它可以工作了。

# intel-8080 - 在 CP/M 上构建 ROM 映像

> ID：15023238
> 
> 赞同：1
> 
> 时间：2013-02-22T11:33:15.890
> 
> 标签：intel-8080, cpm

我正在尝试使用 CP/M 上古老的 M80 和 L80 工具来构建 ROM 映像。（它用于 CP/M 仿真器，因此我使用 CP/M 工具。）

不幸的是 L80 似乎真的很粗糙 --- AFAICT 它只是将每个目标文件加载到其绝对地址，修复它，然后将所有内容从 0x0100 转储到磁盘。这意味着基于其自身工作空间之外地址的目标文件似乎根本不起作用（只是产生错误消息）。我的 ROM 的基地址是 0xd000，这远远超出了这个范围。

有谁知道是否可以使用 M80 和 L80 来做到这一点，如果可以，怎么做？或者，任何人都可以推荐（并指出我！）一个 CP/M 汇编器/链接器套件吗？

（请注意，如果可能的话，我想避免交叉编译。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T20:35:14.667

如果您只是汇编一个文件，那么您可以使用 M80 的 .phase 指令让汇编器定位输出。

```
 .phase 0D000h 
```

如果你想构建几个源文件并在最后链接它们，那么你仍然可以使用 M80，但你需要 DRI 的链接器 LINK.COM，可以在 [http://www.cpm.z80.de/download找到/pli80_13.zip](http://www.cpm.z80.de/download/pli80_13.zip)。要使用的 LINK 命令行是

```
LINK result=module1,module2,module3[LD000 
```

（我认为，最接近的 L80 等效值是

```
L80 /P:D000,module1,module2,module3,result/N/E 
```

但是您必须从结果文件的开头删除 0xCF00 字节）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-30T04:01:36.277

老问题，但这可能对那些仍在寻找的人有用。我在我的 Ampro Little Board 上检查了这一点，该板在 CP/M 2.2 上运行 1980 M80/L80。

您可以在起始 .MAC 文件中使用 ASEG（绝对）指令，将 0D000H 指定为 org，然后引用外部模块。只要这些外部模块不包含 DSEG 或 PSEG 指令，您就应该能够将它们全部链接在一起，并以 0D000H 作为起始地址。例如

```
; TEST.MAC
        ASEG
        ORG 0D000H
public  tstart
tstart: 
        ...
        call myfoo##   ; call routine myfoo in external module foo.rel
        ...
        end tstart 
```

组装它：

```
M80 TEST,=TEST 
```

将其与 foo.rel 链接并在输出中使用 /X 以生成 .HEX 文件 (TEST.HEX)：

```
L80 TEST,FOO,TEST/N/X/E 
```

如果您检查生成的 .HEX 文件，您应该会看到起始地址是 0D000H。顺便说一句：如果您不使用 /X 选项，则带有 /N/E 的 L80 将生成一个 .COM，其中所有代码都使用偏移量 0D000H 链接，除非您还包含 .phase 指令。例如：

```
; TEST.MAC
        ASEG
        ORG 100H
        .phase 0D000H
public  tstart
tstart: 
        ...
        call myfoo##   ; call routine myfoo in external module foo.rel
        ...
        end tstart 
```

链接以制作 .COM 而不是 .HEX：

```
L80 TEST,FOO,TEST/N/E   <== note no '/X' 
```

您无法运行它，但您可以认为 .COM 文件实际上是填充到最近的 128 字节边界的 .BIN（假设您的 CP/M 使用分配 128 字节块的典型方法）。您可以通过对 .COM 文件执行 DUMP 来确认结果。如果代码很短，它还可能包含未被您的代码覆盖的 L80 加载程序代码的剩余部分。

请注意，您还可以使用带有 org 0100H 的 ASEG 方法来制作常规的 CP/M .COM。在这种情况下，您不需要使用 .phase 假设您的代码的开头是 100H。

# javascript - Twitter 引导工具提示说明不起作用？

> ID：15023239
> 
> 赞同：12
> 
> 时间：2013-02-22T11:33:23.653
> 
> 标签：javascript, twitter-bootstrap, tooltip

我注意到我的 twitter 引导工具提示不尊重`data-position`.

因此，我前往[Twitter Bootstrap 工具提示演示](http://twitter.github.com/bootstrap/javascript.html#tooltips)，专门查看“X 上的工具提示”示例，这就是我得到的：

![没有方向支持？](../Images/35577b07ce90b309e5e9a9ec8b764d72.png)

好像没有方向支持？

但是，工具提示继承自（或者可能是相反的方式？）的弹出框起作用：
![方向支持？](../Images/960b6bc5ef31f6f2831f3db0396b521a.png)

### 浏览器尝试：

Ubuntu 12.10 上的 Chromium 24.0 Ubuntu 12.10
上的 Firefox 19.0

这是应该报告的错误，还是这里发生的其他事情？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-22T12:40:40.677

Jsfiddle[带有工具提示的 Jsfiddle](http://jsfiddle.net/shail/vSTLU/2/)

它不是错误，但我们需要初始化它们。
**重要**的 Bootstrap 网站声明“出于性能原因，选择加入工具提示和弹出框数据 API，这意味着您必须自己初始化它们。” [Bootstrap 网站工具提示部分](http://twitter.github.com/bootstrap/javascript.html#popovers)

```
<div class="navbar tooltip-demo">
        <ul class="nav">
          <li><a class="top" title="" data-placement="top" data-toggle="tooltip" href="#" data-original-title="Tooltip on top">Tooltip on top</a></li>
          <li><a class="right" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="Tooltip on right">Tooltip on right</a></li>
          <li><a class="bottom" title="" data-placement="bottom" data-toggle="tooltip" href="#" data-original-title="Tooltip on bottom">Tooltip on bottom</a></li>
          <li><a class="left" title="" data-placement="left" data-toggle="tooltip" href="#" data-original-title="Tooltip on left">Tooltip on left</a></li>
        </ul>
      </div> 
```

要使用的javascript，您必须初始化

```
$('a').tooltip(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-16T14:44:33.150

我发现使用 Bootstrap 初始化工具提示的最简单方法是匹配他们的代码，这样你的任何工具提示都可以工作。

```
$(function () {
    $("[data-toggle='tooltip']").tooltip();
}); 
```

或者您实际上可以将此行添加到 bootstrap-tooltip.js 文件的最后

```
}(window.jQuery);  //<-- last line of bootstrap-tooltip.js

$("[data-toggle='tooltip']").tooltip(); 
```

我基本上计划是否要使用工具提示代码，那么我不妨默认启用它。所以，我把它放在我的 bootstrap-tooltip.js 文件中。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-22T13:15:14.790

我认为这是一个错误。从[http://twitter.github.com/bootstrap/assets/js/application.js](http://twitter.github.com/bootstrap/assets/js/application.js) 您可以看到使用“选择器”选项调用演示。

```
$('.tooltip-demo').tooltip({
  selector: "a[data-toggle=tooltip]"
}); 
```

[但是bootstrap-tooltip.js](https://raw.github.com/twitter/bootstrap/master/js/bootstrap-tooltip.js)中的 'show' 函数在处理 'placement' 时不会检查 'selector' 选项。因此发生了错误。

```
 placement = typeof this.options.placement == 'function' ?
      this.options.placement.call(this, $tip[0], this.$element[0]) :
      this.options.placement 
```

此错误的演示：http: [//jsfiddle.net/indream/xFC7G/](http://jsfiddle.net/indream/xFC7G/)
相关 github 问题：[https ://github.com/twitter/bootstrap/issues/6832](https://github.com/twitter/bootstrap/issues/6832)

# jquery - 使用 jQuery 切换类

> ID：15023241
> 
> 赞同：0
> 
> 时间：2013-02-22T11:33:29.470
> 
> 标签：jquery, toggleclass

当我单击缩略图 ( `.framesButton`) 时，它会滑动打开一个面板，这很好。我只是希望它还添加一个类 ( `.frameSelected`)，它将带有黑色小三角形的背景添加到`img`' 的父`<li>`级中，如果我单击和关闭与我刚刚切换的相同的缩略图，那么目前这种工作方式。但是，如果我在滑动面板仍然打开的情况下单击另一个缩略图，我会得到一个三角形，但面板是封闭的。你可以在这里看到：

[http://oaeyewear.4pixels.co.uk/brands.html](http://oaeyewear.4pixels.co.uk/brands.html)

到目前为止，我的代码是：

```
$('.framesButton').click(function() {
      $(this).parent().toggleClass('frameSelected');
      $(this).parent().siblings().removeClass('frameSelected');
}); 
```

不幸的是，我的 jQuery 对我来说仍然是基本的，无法将我想要的内容转换为代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:42:01.483

您总是在切换容器的可见性

```
$(".framesButton").click(function(){  
    $(".lensesDetail").slideToggle('slow');  
}); 
```

无论是否单击相同的缩略图。

一种解决方案是测试单击的元素是否是先前单击的元素，您可以通过测试其父元素是否具有 class 来做到这一点`frameSelected`。如果是，则隐藏容器，如果不是，则将其保持打开或打开。

将两个单击事件处理程序结合起来：

```
$('.framesButton').click(function() {
    var $parent = $(this).parent();

    if ($parent.hasClass('frameSelected')) {
        // toggle visibility of container
        $('.lensesDetail').slideToggle('slow');  
    }
    else {
        // show the container - won't do anything if already open
        $('.lensesDetail').slideDown('slow');
    }

    $parent.toggleClass('frameSelected')
        .siblings('.frameSelected').removeClass('frameSelected');
}); 
```

* * *

解决方案取决于您 `.lensesDetail`使用信息填充元素的准确程度，即您是为每个缩略图设置一个，还是为每一行设置一个，或者为整个列表设置一个。
弄清楚这一点后，您将不得不调整上述解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:46:29.917

简而言之，只需这样做：

```
$(".framesButton").click(function(){  
    $(".lensesDetail").slideUp('slow',function(){
       $(".lensesDetail").slideDown('slow');
    });  
    $(this).parent().toggleClass('frameSelected');
    $(this).parent().siblings().removeClass('frameSelected');
}); 
```

# jquery - 您如何配置 WYSIHTML5 工具栏反馈？

> ID：15023243
> 
> 赞同：1
> 
> 时间：2013-02-22T11:33:40.093
> 
> 标签：jquery, wysihtml5

在 WYSIHTML5 的演示中，工具栏反馈给您显示您选择的选项。即，如果您单击粗体的项目，工具栏会反映这一点。

你如何配置这个？

# google-chrome - Chrome for GWT 应用程序中的白框覆盖

> ID：15023246
> 
> 赞同：1
> 
> 时间：2013-02-22T11:33:52.217
> 
> 标签：google-chrome, gwt

在最近的 Chrome 版本中，我们的 GWT 应用程序开始出现一个非常烦人的问题。

在某些页面加载时，我们会得到一个几乎覆盖整个应用程序的大白色覆盖层。有谁见过这个，知道是什么原因造成的吗？

我尝试使用开发人员工具进行检查，但框架似乎不是任何 html 元素。调整窗口/页面的大小或重新加载可解决该问题。

![在此处输入图像描述](../Images/b4cecad572e60824a96c7d9943938390.png)

# iphone - 在 iOS 中通过 XMPP 发送有关用户的信息

> ID：15023248
> 
> 赞同：2
> 
> 时间：2013-02-22T11:33:56.573
> 
> 标签：iphone, ios, objective-c, xmpp, xmppframework

我已经实现了聊天，一切正常。我按照该链接[http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-server-setup/](http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-server-setup/)教程来实现聊天应用程序。现在我想发送有关用户的信息，例如照片、生日、昵称等。所以我只想创建该信息并发送给其他用户。

我还想将图像（数据）发送给另一个用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:14:14.817

要设置头像和其他用户信息，您应该查看 vcard 扩展 XEP-0153（[规范](https://github.com/robbiehanson/XMPPFramework/tree/master/Extensions/XEP-0054)和[实现](https://github.com/robbiehanson/XMPPFramework/tree/master/Extensions/XEP-0054)）。

[您将在XMPPFramework iphone 演示](https://github.com/NoilPaw/XMPPFramework/blob/master/Xcode/iPhoneXMPP/Classes/iPhoneXMPPAppDelegate.m)中找到 vCard 的示例实现。您将使用以下调用来更新和获取 vCard：

```
- (XMPPvCardTemp *)fetchvCardTempForJID:(XMPPJID *)jid;
- (XMPPvCardTemp *)fetchvCardTempForJID:(XMPPJID *)jid useCache:(BOOL)useCache;
- (void)updateMyvCardTemp:(XMPPvCardTemp *)vCardTemp; 
```

要发送二进制数据，您有一些选择。XMPPFramework[实现](https://github.com/robbiehanson/XMPPFramework/blob/master/Extensions/XEP-0065/TURNSocket.h)了XEP-0065。还有其他方法可以发送数据，例如：

*   [XEP-0066：带外数据](http://xmpp.org/extensions/xep-0066.html)
*   [XEP-0096：SI 文件传输](http://xmpp.org/extensions/xep-0096.html)
*   [XEP-0234：Jingle 文件传输](http://xmpp.org/extensions/xep-0234.html)

您可能可以将其实现为扩展并将它们集成到 XMPPFramework 中。

In 将很快集成发送二进制数据，如图像和视频。因此，请对您的实施发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:19:34.773

[首先在spark](http://www.igniterealtime.org/downloads/index.jsp)中设置用户 profire ，然后使用 [XMPPvCardTempModule myvCardTemp]

# php - PHP匹配2个代码的输出

> ID：15023249
> 
> 赞同：0
> 
> 时间：2013-02-22T11:33:56.520
> 
> 标签：php

我需要匹配2个代码的结果格式：

我需要得到这个的输出/格式：

```
$event_day = $year.'-'.$month.'-'.$list_day;  // $event_day 
```

匹配这个：

```
DATE_FORMAT(date,'%Y-%m-%d') 
```

完整代码：

```
$query = "
  SELECT title, DATE_FORMAT(date,'%Y-%m-%d') AS date 
  FROM table 
  WHERE user_id = '$session_user_id' 
    AND date BETWEEN '$year-$month-1' AND '" . date("Y-m-t", strtotime("$year-$month-1")) . "' 
    AND active = 1"; 
```

我的问题是 $event_day 仅显示以下事件：10 月、11 月和 12 月。

我在下面的代码中遇到了类似的问题：

```
$query = "
  SELECT title, DATE_FORMAT(date,'%Y-%m-%d') AS date 
  FROM table 
  WHERE user_id = '$session_user_id' 
    AND date LIKE '$year-$month%' 
    AND active = 1"; 
```

并使用以下代码修复了它：

```
$query = "
  SELECT title, DATE_FORMAT(date,'%Y-%m-%d') AS date 
  FROM table 
  WHERE user_id = '$session_user_id' 
    AND date BETWEEN '$year-$month-1' AND '" . date("Y-m-t", strtotime("$year-$month-1")) . "' 
    AND active = 1"; 
```

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:47:03.567

如果您只是尝试匹配 SQL 查询中的日期，这就是您所追求的，您可以将日期作为字符串传递，`#`每端带有 a。这将告诉 SQL 将字符串解析为日期，而您提供的格式并不重要。例外情况是它可能会混淆美国/欧盟日期格式，如 dd/mm/yyyy 与 mm/dd/yyyy。

```
$query = "SELECT title, DATE_FORMAT(myDate,'%Y-%m-%d') AS formattedDate 
          FROM table 
          WHERE user_id = '$session_user_id' 
          AND (myDate BETWEEN #$year-$month-1# AND #$year-$month-1#) 
          AND active = 1"; 
```

这种格式应该有效，但您的查询是选择同一日期之间的记录，因此您只会获得实际在该日期的记录。你也可以使用`WHERE date = #$year-$month-1#`

**编辑**：这假设您的日期字段数据类型在数据库中正确设置为日期/时间。

**edit2**：“日期”通常是数据库中的保留字，不应真正用于字段名称和变量。请参阅上面的编辑代码。

此外，我建议使用 php 使用[`date()`](http://www.php.net/manual/en/function.date.php)函数来格式化日期，而不是在查询中格式化它。这允许更灵活地实际使用脚本中的日期。

# c# - 对象真的是引用类型吗？

> ID：15023251
> 
> 赞同：2
> 
> 时间：2013-02-22T11:34:07.117
> 
> 标签：c#, types, reference-type

据我所知`Class`，`Object`是参考类型。

我有以下方法来更改值

```
public void ChangeValue(MyClass classobj)
{
    classobj.Number = classobj.Number*2;
} 
```

我调用该方法将值加倍

```
var myClass=new MyClass();
int myNumber = 10;
myClass.Number = myNumber;
ChangeValue(myClass); 
```

它将返回 20，这很好，因为您可以将其解释为当您创建类的对象然后它将引用传递给方法并更新引用值。

但我的问题是为什么它不会发生在 Object 类型中。换句话说，为什么当我制作对象并为其分配一些值时，如下所示

```
 object myObject = new object();
 string sometext  = "Some object value";
 myObject = sometext;
 ChangeValue(myObject) 
```

执行方法后它不会改变值

```
public void ChangeValue(object objectValue)
{
    objectValue = null;
} 
```

我知道方法的参数是值类型，但无法理解它对两种引用类型有不同的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:41:18.540

你实际上在这里做两件不同的事情。`Object`并且您`MyClass`确实都是引用类型，这意味着您将对实际对象的引用传递给`ChangeValue`方法。但是，您在方法中看到的引用是调用者持有的引用的*副本。*它们指向同一个对象，因此当您在方法中操作对象时，方法的调用者可以看到您的更改，但对方法内部实际引用的更改只会影响方法本身。

总结一下，对象是通过*引用*传递的，但那些引用是通过*值*传递的。

在你的方法中

```
public void ChangeValue(object objectValue)
{
    objectValue = null;
} 
```

您实际上正在做的是重新分配引用`objectValue`，并且该引用是`myObject`调用者拥有的被调用引用的副本。因为该方法只有一个副本，所以根本不会影响调用者的引用。

有一种方法可以使这项工作，您必须通过引用传递引用。这总是让我头疼，但这就是`ref`关键字的用途。

```
public void ChangeValue(ref object objectValue)
{
    objectValue = null; // this is the SAME reference as the caller has, so the caller will see this change
} 
```

但是，它也必须这样调用：

```
ChangeValue(ref myObject); 
```

因此在调用站点很明显它可能会返回指向不同的对象。知道这一点很重要，因为如果引用意外地指向不同的对象，您可能仍然有依赖旧值的东西并最终陷入可怕的混乱之中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:38:48.403

您将 传递`objectValue`给`ChangeValue(object objectValue)`by 值，该值是一个引用。然后你改变这个值，而不是`myObject`.

您必须将其传递为`ChangeValue(ref object objectValue)`实际通过引用传递引用的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:38:24.963

这不是不同的行为，你在做不同的事情

`object`这将与您的示例完全相同：

```
 public void ChangeValue(MyClass classobj)
    {
        classobj = null;
    } 
```

这将作为您的第一个示例（假设您将传递`MyClass`实例）：

```
 public void ChangeValue(object objectValue)
    {
        ((MyClass)objectValue).Number *= 2;
    } 
```

这里真正发生的是，当您分配参数（而不是参数的属性或字段）时，您只是在更改该参数的值。调用代码中的原始值和变量保持不变。

同样的情况也发生在这里：

```
MyClass a = new MyClass();
MyClass b = a;
a = null;
// b still contains the value created in the first line 
```

简单来说，引用变量保存的是实际值的指针（内存地址）。通过更改变量的值，您可以使其指向不同的对象或 null。但是，当您这样做时，`a.field=2`意味着您正在获取`a`正在引用的对象并更改它的`field`成员值。

# javascript - 如何在导航菜单栏中显示用户所在的页面？

> ID：15023252
> 
> 赞同：0
> 
> 时间：2013-02-22T11:34:12.750
> 
> 标签：javascript, html, css

我正在创建一个静态网站。我想显示当前标签用户正在以不同的颜色查看（除了正常的导航菜单标签）。如何在不使用任何服务器端脚本的情况下做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:40:51.530

这取决于你如何组织你的逻辑......例如，如果你有 Front Controller 并且你获得了应该由`GET`参数 ( `page`) 显示的当前页面，你可以：

**PHP**

```
$current = $_GET['page'];
print '<ul class="menu">';
while ($page = $pages->getNext()) {
   $label = $page->getLabel();
   if ($page->getName() === $current) {
      print '<li class="menu-item selected">' . $label . '</li>';
   } else {
      print '<li class="menu-item">' . $label . '</li>';
   }
}
print '</ul>'; 
```

正如您在脚本中看到的，我们根据这是否是当前页面打印不同类型的列表项。如果那是当前页面，我们的列表项有类`selected`，`menu-item`否则它只是一个菜单项。

如果你想从前端做同样的事情，你可以使用以下方法：

**JavaScript**

```
 var menuItems = {
       'info': {
           'label': 'Info',
           'id': 'info-item'
        },
       'home': {
           'label': 'Home',
           'id': 'home-item'
        }
   };
   //...
   function getCurrentPage() {
       var str = window.location.search.replace('?', ''),
           params = str.split('&');
       for (var i = 0; i < params.length; i += 1) {
           var current = params[i].split('=');
           if (current[0] === 'page') {
              return current[1];
           }
       }
       return undefined;
   }
   //...
   var page = getCurrentPage();
   clearCurrentPage();
   setCurrentPage(page);

   //...

   function setCurrentPage(page) {
      var item = pages[page];
      document.getElementById(item.id).className += ' selected';
   }

   function clearCurrentPage() {
      var selected = document.getElementsByClassName('selected');
      for (var i = 0; i < selected.length; i += 1) {
          selected[i].className = selected[i].className.replace(' selected', '');
      }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:40:03.160

根据您的说法，您的网站由 3 个页面组成：index.html、about.html、contact.html 和您在所有 3 个页面上常见的导航是 Home About Contact，菜单如下所示：

```
<ul>
<li><a href="index.html">Home</a></li>
<li><a href="about.html">About</a></li>
<li><a href="contact.html">Contact</a></li>
</ul> 
```

然后在 index.html 中，您应该在第一个链接上添加 class="active"，在 about.html 中，在 about 链接上添加 class="active" 等等

然后在你的 css 文件中定义 ul li a.active { background:yellow }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:44:18.517

> 我正在创建一个静态网站。我想显示当前标签用户正在以不同的颜色查看（除了正常的导航菜单标签）。

使`li`代表该选项卡的类的成员（例如`class="tab current-page"`）。然后风格不同。

> 如何使用任何服务器端脚本来做到这一点？

*   手动编辑 HTML
*   使用预处理器生成 HTML
*   用 JS 做客户端，与`location.href`可能的页面进行比较

# c++ - 迭代器错误中的向量迭代器

> ID：15023253
> 
> 赞同：0
> 
> 时间：2013-02-22T11:34:13.890
> 
> 标签：c++, iterator, stdvector, 2d-games

为我的作品集制作小行星游戏。使用以下代码块解决错误。错误只是迭代器不可延迟，但我已经缩小了错误范围。在我向您展示代码后，我将讨论这个问题：

```
void Game::Update()
{
if (elapsedTime > REFRESH_RATE)
{
    player->Update(elapsedTime);

    std::vector<Asteroid*>::iterator iterator= bigAsteroids.begin();
    std::vector<Bullet*>::iterator iter = bullets.begin();

    // *********************** //
    while (iterator!= bigAsteroids.end())
    {
        if (*iterator != nullptr) // Checks to see if player is colliding with an asteroid and updates the asteroid
        {
            player->CheckCollisionsAsteroid( *iterator );

            // *********************** // Checks to see if bullet is colliding with asteroid 
            while (iter != bullets.end())
            {
                if (*iter != nullptr)
                {
                    if ((*iter)->CheckCollisionsAsteroid( **iterator ))
                    {
                        size_t i = iterator - bigAsteroids.begin();
                        iter = bullets.erase(iter);
                        iterator = bigAsteroids.erase(iterator);
                        printf("\nAsteroid destroyed at position %i", i);
                    }
                    else
                    {
                        ++iter;
                    }
                }
            }
            iter = bullets.begin(); // Reset the bullet iterator else we'd only get to check 1 asteroid

            // *********************** //
            if (*iterator != nullptr && iterator != bigAsteroids.end()) { (*iterator)->Update(elapsedTime); }
        }
        if (*iterator != nullptr && (iterator!= bigAsteroids.end()))
        {++iterator;}
    }
    // *********************** //
    Clock.Reset(); 
}
} 
```

如果这一切看起来有点混乱，这里有一个简短的解释：

当迭代器通过每个小行星时，我检查玩家是否与每个小行星发生碰撞。*目前这没有任何作用*

然后我遍历我的子弹向量，检查每个子弹与当前的小行星。如果发生碰撞，我销毁并擦除子弹和小行星，并打印出被摧毁的小行星在向量中的位置。

完成后，我为下一个小行星重置了子弹迭代器。

我目前的主要问题是 (*iterator) <-- 小行星对更新的调用。

只有当我擦除小行星矢量中的最后一个物体时，才会出现这个问题。我知道擦除将迭代器返回到下一个对象 - 如果下一个对象不存在，则会引发错误（因为迭代器然后指向 nullptr，对吗？）。我正在检查 nullptr 无济于事..

有没有人可以提供任何建议或帮助？将不胜感激，我已经挠了好几个小时了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:42:30.663

问题是，当你摧毁最后一个小行星时，`iterator`将被设置为`bigAsteroids.end()`（通过分配给 的结果`erase()`）。然后在内`while`循环终止后，取消引用`iterator`. 不能取消引用过去的迭代器。

您必须切换检查顺序：

```
if (iterator != bigAsteroids.end() && *iterator != nullptr) 
```

# c - 在 MPI 中实现 Cannons 算法

> ID：15023254
> 
> 赞同：2
> 
> 时间：2013-02-22T11:34:27.660
> 
> 标签：c, algorithm, parallel-processing, mpi

我正在尝试使用 MPI 实现 Cannons 算法，我正在使用以下示例代码：

[http://siber.cankaya.edu.tr/ozdogan/GraduateParallelComputing.old/ceng505/node133.html](http://siber.cankaya.edu.tr/ozdogan/GraduateParallelComputing.old/ceng505/node133.html)

有一段看不懂。这是示例代码。

```
37    /* Perform the initial matrix alignment. First for A and then for B */ 
38    MPI_Cart_shift(comm_2d, 0, -mycoords[0], &shiftsource, &shiftdest); 
39    MPI_Sendrecv_replace(a, nlocal*nlocal, MPI_DOUBLE, shiftdest, 
40        1, shiftsource, 1, comm_2d, &status); 
41 
42    MPI_Cart_shift(comm_2d, 1, -mycoords[1], &shiftsource, &shiftdest); 
43    MPI_Sendrecv_replace(b, nlocal*nlocal, MPI_DOUBLE, 
44        shiftdest, 1, shiftsource, 1, comm_2d, &status); 
```

这是我当前的代码。

```
MPI_Comm_size(comm, &size); 
MPI_Comm_rank(comm, &rank); 
MPI_Cart_coords(comm, rank, 2, coordinates); 

MPI_Cart_shift(comm, 0, -1, &rightrank, &leftrank);
MPI_Cart_shift(comm, 1, -1, &downrank, &uprank); 

MPI_Cart_shift(comm, 0, -coordinates[0], &shiftsource, &shiftdest); 
printf("coordinates[0] = %d for a shiftsource = %d, shiftdest = %d\n", coordinates[0], shiftsource, shiftdest);
//MPI_Sendrecv_replace(a, a->rowNum * a->colNum, MPI_INT, shiftdest, 
    //1, shiftsource, 1, comm, &status); 

MPI_Cart_shift(comm, 1, -coordinates[1], &shiftsource, &shiftdest); 
printf("coordinates[1] = %d for b shiftsource = %d, shiftdest = %d\n", coordinates[1], shiftsource, shiftdest);
//MPI_Sendrecv_replace(b, b->rowNum * b->colNum, MPI_INT, 
  //  shiftdest, 1, shiftsource, 1, comm, &status); 
```

我在不同的函数中调用 MPI_Cart_create，但它与示例代码中的基本调用相同。

```
MPI_Comm_size (MPI_COMM_WORLD, &size);  /* get number of processes */
    .
    .
    .
if(is_perfect_square(size))  dim_size[0] = dim_size[1] = (int) sqrt(size);
else
{ //if size = 2 then dims = 2, 1; size = 4 then 2,2; 8 = 4, 2...
    dim_size[0] = (int) sqrt(size + size);
    dim_size[1] = dim_size[0] / 2;
}
MPI_Cart_create(MPI_COMM_WORLD, 2, dim_size, periods, 1, &CannonsCart); 
```

现在我只是想了解 shiftsource 和 shiftdest 的意义。我假设它是用于初始转变，但是当我运行此代码时，我的 printf 语句会这样说。

```
coordinates[0] = 0 for a shiftsource = 0, shiftdest = 0
coordinates[1] = 0 for b shiftsource = 0, shiftdest = 0

coordinates[0] = 1 for a shiftsource = 1, shiftdest = 1
coordinates[1] = 1 for b shiftsource = 2, shiftdest = 2

coordinates[0] = 1 for a shiftsource = 0, shiftdest = 0
coordinates[1] = 0 for b shiftsource = 2, shiftdest = 2

coordinates[0] = 0 for a shiftsource = 1, shiftdest = 1
coordinates[1] = 1 for b shiftsource = 0, shiftdest = 0 
```

我不明白为什么 shiftsource 和 shiftdest 是一样的。对于矩阵 a 和 b，它应该是左边一个，一个向上。

对于这个测试用例，这个调用的进程数（IE 大小）是 4。如果需要，我将托管我的所有代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:11:12.737

第三个参数`MPI_Cart_shift`是沿第二个参数指定的维度（方向）的位移。`0`对于沿指定维度具有坐标的所有进程，位移也将是`0`（因为它被指定为`-coordinate[i]`），因此源和目标等级将匹配调用进程的等级。

当位移是因为您的拓扑是 2x2`shiftsource`并且您在两个维度上都有周期性边界条件时，您也会得到相同的结果。沿先前等级的选定维度的坐标将是（这里计算模数）。但这等于，正好是下一个等级的坐标。因此，前一个过程和下一个过程的坐标重合，因此排名最终相同。`shiftdest``1``(coordinates[i] - 1 + 2) % 2``(a - m + k) % k``a - m``k``(coordinate[i] + 1) % 2`

# javascript - 没有特定单词的行匹配的正则表达式

> ID：15023269
> 
> 赞同：2
> 
> 时间：2013-02-22T11:35:16.740
> 
> 标签：javascript, regex, regex-negation

我正在尝试创建仅在行首不包含特定单词的数学行的正则表达式。就我而言，“恶魔：”。

```
My regex: (?!d)(?!e)(?!a)(?!m)(?!o)(?!n)(?!:).*\n 
```

但这也匹配“deamon：”后面的其余行，这是我不想要的。

**输入：**

```
deamon: parsing arguments...
deamon: parsing xml file...
deamon: creating xml file for demo...
deamon: executing demo
parsing arguments...
path to xml: /home/www/www/seg-chapter/tests/users/1/launches/60/demo.xml
parsing xml file... 
```

**匹配：**

```
parsing arguments...
parsing xml file...
creating xml file for demo...
executing demo
parsing arguments...
path to xml: /home/www/www/seg-chapter/tests/users/1/launches/60/demo.xml
parsing xml file... 
```

**我只想：**

```
parsing arguments...
path to xml: /home/www/www/seg-chapter/tests/users/1/launches/60/demo.xml
parsing xml file... 
```

你有人知道如何只匹配行开头没有“deamon：”的行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:57:24.220

```
str.match( /^(?!deamon:).*/mg ) 
```

多行标志`m`意味着`^`匹配每行的开头，而不仅仅是字符串的开头。
`(?!deamon:)`是一个否定的前瞻，如果一行以`deamon:`.

# asp.net - 将 KeyValuePair 添加到字典的前面

> ID：15023278
> 
> 赞同：0
> 
> 时间：2013-02-22T11:35:44.260
> 
> 标签：asp.net, vb.net, collections

我有一个存储下拉数据的字典，我想添加一个 all 选项，但我希望这是集合中的第一个条目，以便在构建 HTML 时它的顺序正确。

显而易见的解决方案是将 All 选项添加到新字典中，然后遍历项目：

```
Dim ListWithALL As Dictionary(Of Integer, String)
ListWithALL.Add(0, "All")
For Each option As KeyValuePair(Of Integer, String) In OptionsList
    ListWithALL.add(option)
Next
OptionsList = ListWithALL
ListWithALL.dispose() 
```

但我真的不喜欢这个解决方案，因为它看起来有点长的路要走，而且性能很差。

我还考虑过使用 IComparable 之类的东西并对数据进行排序，但我不希望其他数据与添加它们的顺序相同。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:38:14.473

您不能将项目添加到 a 中的任何“位置” `Dictionary<TKey,TValue>`，因为它没有排序。

如果您需要确保顺序，请使用`SortedDictionary<Tkey,TValue>`- 它是按键顺序排序的，因此如果您希望将项目放在开头，则需要使用会从头开始排序的键。

# javascript - 使用 Dictionary 将对象传递给 WebMethod 参数

> ID：15023279
> 
> 赞同：0
> 
> 时间：2013-02-22T11:35:50.410
> 
> 标签：javascript, jquery, asp.net, json, json.net

我有此错误无法将类型 \u0027System.String\u0027 的对象转换为类型 \u0027System.Collections.Generic.Dictionary `2[System.String,System.Int32]\u0027","StackTrace":" at System.Web.Script.Serialization.ObjectConverter.ConvertObjectToTypeInternal(Object o, Type type, JavaScriptSerializer serializer, Boolean throwOnError, Object& convertedObject)\r\n at System.Web.Script.Serialization.ObjectConverter.ConvertObjectToTypeMain(Object o, Type type, JavaScriptSerializer serializer, Boolean throwOnError, Object& convertedObject)\r\n at System.Web.Script.Serialization.ObjectConverter.ConvertObjectToType(Object o, Type type, JavaScriptSerializer serializer)\r\n at System.Web.Script.Services.WebServiceMethodData.StrongTypeParameters(IDictionary`2 rawParams)\r\n 在 System.Web.Script.Services.WebServiceMethodData.CallMethodFromRawParams（对象目标，IDictionary `2 parameters)\r\n at System.Web.Script.Services.RestHandler.InvokeMethod(HttpContext context, WebServiceMethodData methodData, IDictionary`2 rawParams)\r\n 在 System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)","ExceptionType":"System.InvalidOperationException

当我使用 Dictionary 将数组传递给 WebMethod 时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:47:38.027

如果它是 webapi 的 web 方法，那么您不能将列表或字典类型的对象传递给方法，您只需要传递字符串参数，要传递此对象，您需要将它们序列化为字符串，然后您可以将它们反序列化回使用该字符串的列表或字典对象。

使用 Web 方法的代码：

```
Dictionary<string,int> objstring = new Dictionary<string,int>
var serializer = new JavaScriptSerializer();
var serializedstring = serializer.Serialize(objstring); 
```

然后在参数中传递序列化字符串。

反序列化时执行相同操作，只需从 webapi 方法中的序列化程序对象调用反序列化方法。

我希望这可以帮助你。

# java - 在主类中使用计时器

> ID：15023280
> 
> 赞同：0
> 
> 时间：2013-02-22T11:35:50.200
> 
> 标签：java, timer, main

我正在创建一个以登录公式开头的程序。我想让整个程序停止并在 5 小时后再次显示此登录公式。为此，我使用 Timer。

```
public class MainClass implements ActionListener{

private final Timer timer = new Timer(30000, this);

public static void main(String args[]){
    timer.start();
    new JLogin();
}

//If time time-out
public void actionPerformed(ActionEvent e) {
    timer.stop();
    new Mainclass();
} 
```

当我写它时，它在我调用“timer.start()”时显示错误。错误说：“在静态（）中更改定时器（）的修饰符。发生这种情况的任何原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:38:24.697

`timer`是一个实例变量，因此只能通过`MainClass`. 您需要先创建一个实例：

```
MainClass mainClass = new MainClass();
mainClass.timer.start(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T11:39:50.180

采用`new MainClass().timer.start()`

你也可以这样做：

```
public static void main(String args[]) {
    new MainClass().begin();
}

private void begin() {
    timer.start();
    new JLogin();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:42:20.640

静态方法（main）不能有实例变量（定时器）

# jquery - jQuery ui拖动孩子不是父母

> ID：15023281
> 
> 赞同：0
> 
> 时间：2013-02-22T11:35:51.413
> 
> 标签：jquery, draggable

我有简单的列表项层次结构，例如

```
<ul>
    <li>Personal Details
        <ul style="position: relative; left: 0px; top: 0px;" class="ui-draggable">     
            <li>First Name</li>
        <li>Last Name</li>
        </ul>
    </li>
    <li>Employment Details
         <ul style="position: relative;" class="ui-draggable">
             <li>Title</li>
             <li>Department</li>
         </ul>
    </li>
</ul> 
```

[http://jsfiddle.net/grimmus/PtzF4/1/](http://jsfiddle.net/grimmus/PtzF4/1/)

我只想允许子列表项可拖动。因此，您不能拖动个人详细信息，但可以拖动名字、姓氏等。

我尝试在可拖动之前使用 children() 但它会拉动所有孩子而不仅仅是一个:-)

有谁知道我怎么能做到这一点？请检查小提琴 - [http://jsfiddle.net/grimmus/PtzF4/1/](http://jsfiddle.net/grimmus/PtzF4/1/)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:43:32.057

```
$('#results').delegate('li li', 'mouseover', function () 
```

您只需要将选择器更改为仅子元素。

[http://jsfiddle.net/PtzF4/2/](http://jsfiddle.net/PtzF4/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T07:30:11.577

两个问题：`draggable()`每次鼠标悬停时都会在元素上重新运行；`delegated()`已弃用。如果您要做的只是拥有一个可拖动元素的静态列表，那么只需使用`each()`.

```
$('#results .ui-draggable li').each(function() {
    $(this).draggable({
        revert: true,
        revertDuration: 0
    });
}); 
```

* * *

如果您希望能够动态添加元素并使它们可拖动（根据代码，这是您想要执行的操作），请查看：http:
[//jsfiddle.net/PtzF4/4/](http://jsfiddle.net/PtzF4/4/)
已删除无关的东西让 jsfiddle 脾气暴躁，并添加了一个记录器来显示我的版本和 Selven 关于重新运行的版本之间的差异`draggable()`。

# c# - 文本文件解析 - 如何搜索特定字符串并返回整行？

> ID：15023282
> 
> 赞同：1
> 
> 时间：2013-02-22T11:35:53.653
> 
> 标签：c#

例如 txt 文件有以下条目说：

```
england is cold country
India is poor country
england is cold country
england is cold country
India is poor country
english county cricket season. 
```

现在我想在这个 txt 文件中搜索一个字符串“england”并返回包含这个字符串的整行。我如何使用 C 语言来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:40:38.790

我会考虑两种方法，用于大文件（兆字节）和相对较小的文件。

# 大文件

如果文件很大并且包含兆字节的数据：使用流阅读器，读取文件直到 EndOfLine，分析刚刚读取的字符串

```
string pattern = "england";
IList<string> result = new List<string>();
using (var reader = new StreamReader("TestFile.txt")) 
{
    string currentLine;
    while ((currentLine= reader.ReadLine()) != null) 
    {
        if (currentLine.Contains(pattern)
        {
            // if you do not need multiple lines and just the first one
            // just break from the loop (break;)            
            result.Add(currentLine);
        }
    }
} 
```

# 小文件

如果文件很小，您可以使用帮助器将所有文件内容作为字符串数组返回 - ( [File.ReadAllLines()](http://msdn.microsoft.com/en-us/library/s2tte0y1%28v=vs.100%29.aspx) ) 每行字符串，然后使用 LINQ 搜索子字符串。如果您正在使用`.NET 4`或更新，您可以利用新的帮助程序（[File.ReadLines()](http://msdn.microsoft.com/en-us/library/system.io.file.readlines%28v=vs.100%29.aspx)），它不会读取整个文件并作为延迟操作读取。

.NET 2.0 - 3.5：

```
string pattern = "england";
IEnumerable<string> result = File.ReadAllLines()
                                 .Where(l => l.Contains(pattern)); 
```

.NET4 - 4.5：

```
string pattern = "england";
IEnumerable<string> result = File.ReadLines()
                                 .Where(l => l.Contains(pattern)); 
```

如果您只需要第一行使用`.FirstOrDefault(l => l.Contains(pattern))`而不是`Where(l => l.Contains(pattern))`

[MSDN](http://msdn.microsoft.com/en-us/library/dd383503%28v=vs.100%29.aspx)：

> ReadLines 和 ReadAllLines 方法的区别如下： 使用 ReadLines 时，可以在返回整个集合之前开始枚举字符串集合；使用 ReadAllLines 时，必须等待返回整个字符串数组才能访问该数组。因此，当您处理非常大的文件时，ReadLines 会更有效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:40:41.367

你可以这样做。如果你想返回所有带有“england”的行，你需要创建一个字符串列表并返回它。

```
foreach(string line in File.ReadAllLines("FILEPATH"))
    {
    if(line.contains("england"))
       return line;
    }
    return string.empty; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:41:48.063

1）阅读所有行。[http://msdn.microsoft.com/en-us/library/system.io.file.readalllines.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.readalllines.aspx)

2) 创建一个字符串列表以填充匹配项

3) 循环或 linq 行并使用 IndexOf(matchstring) > -1 查找匹配项

4) 返回结果

# c# - Monitor 是未绑定的并且可以从任何上下文中直接调用是什么意思？

> ID：15023291
> 
> 赞同：0
> 
> 时间：2013-02-22T11:36:20.400
> 
> 标签：c#, multithreading, monitor

[Monitor](http://msdn.microsoft.com/en-us/library/system.threading.monitor.aspx)描述中有一句话关于它的功能，它指出：

> 它是未绑定的，这意味着它可以直接从任何上下文中调用

有没有人可以在这里解释*上下文*的含义并举个例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T12:14:04.703

简单的说。无论工作线程、应用程序和对象状态如何，都可以在代码中所有语法有效的位置调用 Monitor 的方法。

# asp.net - 在 C#.net 中自动增加 GMDatePicker 的最大日期

> ID：15023295
> 
> 赞同：0
> 
> 时间：2013-02-22T11:36:33.547
> 
> 标签：asp.net

`DateTime s = GMDStartDate.Date; GMDStartDate.MinDate = DateTime.Now; GMDStartDate.MaxDate = DateTime.Now;`

我想从 C#.net 中的当前日期开始自动将 GMDatePicker 的最大日期增加 2 个月..？请任何人都可以告诉这个..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:42:46.753

您可以像这样使用[AddMonths()](http://msdn.microsoft.com/en-us/library/system.datetime.addmonths.aspx)：

```
GMDStartDate.MaxDate = DateTime.Now.AddMonths(2); 
```

# c# - 如何从 ViewModel 实例化视图？

> ID：15023296
> 
> 赞同：0
> 
> 时间：2013-02-22T11:36:39.847
> 
> 标签：c#, user-interface, mvvm

事件发生在我们的模型和视图模型中，需要创建适当的视图。问题是如何做到这一点并避免在 VM 或 M 中有任何 View 代码？

这是事件的顺序，因此您可以看到这个困境：

用户在表单中设置一个数字字段以启动一个长时间运行的后台进程，然后单击“开始”按钮。如果这个长期运行的过程成功，那么它需要弹出一个带有图表的图表来显示结果。但是，如果数据因任何原因处理失败，则无法弹出图表，而是会记录一条错误消息，该消息显示在表单的文本框中。

现在，该启动按钮调用 ViewModel 中的一个方法，该方法实际上启动了后台线程。

只有背景可以确定何时或是否创建视图。

目前，我们通过使用一个名为 ChartInterface 的接口来实现这一点。视图实现了这个接口，然后设置一个回调委托一直到后端模型。当它决定创建图表时，它会调用回调并使用接口传递适当的数据等。

但是，这会带来一个问题，因为它可能会生成数十或数百个图表。因此，我们需要一个“仪表板”，其中包含所有图表的列表，供用户选择要查看的图表。

所以现在后端需要决定何时或是否创建仪表板视图，然后将图表视图添加到其中。

所以它变得越来越混乱，因为这样的情况会越来越多，因为我们有很多需要视图的模型，所以创建大量的回调委托会很快变得丑陋。

一个似乎简化而不是大量回调的想法是只将一个接口传递给 ViewBinder 到后端。然后每次创建模型对象时，它可以将它传递给 ViewBinder 以查看它是否想将任何视图对象绑定到它。

我们的想法是，大多数后端对象都会（最终）以图形方式进行监控。所以如果他们每个人在构建之后都被传递给 ViewBinder 接口，那么视图可以决定是否要绑定任何东西。

这听起来总是更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:53:12.883

在处理代码时，答案变得很清楚。

公共接口 ModelBinderInterface { void TryBind( 对象模型); }

而不是一个全局“服务器定位器”，每个视图对象都更自然地实现这个接口。

然后，当它创建任何 ViewModel 对象时，它会将自己分配给 viewModel 对象的 ModelBinder 属性。

现在 ViewModel 可以将相同的接口传递给后端进程。

每当实例化任何相关模型时，它都会使用该对象调用 ModelBinder。

然后 View 对象可以决定它是否可以实例化该对象，如果不能，它可以将调用传递给它的父级，该父级也实现了 ModelBinderInterface。

这样，每个视图都可以处理它理解的实例化视图，无论是将控件添加到 DataGridView 还是将对象绑定到 ListView 等。

当然，这仍然允许使用单例 ModelBinder，因为较低级别可以继续将调用传递给只有一个并且可以提供单例实例的顶级应用程序 ModelBinder。

# php - 得到放大器; 使用 http_build_query 的符号

> ID：15023297
> 
> 赞同：0
> 
> 时间：2013-02-22T11:36:45.033
> 
> 标签：php, post, curl

我正在使用 curl 将一些数据从 website1 提交到 website2。

当我通过 then 在接收端提交数据时，我得到它

```
Array
(
    [ip] => 112.196.17.54
    [amp;email] => test@test.com
    [amp;user] => test123,
    [amp;type] => point
    [amp;password] => password
) 
```

据我说 http_build_query() 产生错误的结果。

### “ip”字段正确其余不正确。

### 请让我知道为什么会这样。

curl函数如下： http_build_query($config)

```
function registerOnPoints($username ,$password,$email,$ip ,  $time )
{

    $ch = curl_init("http://website2c.com/curl-handler");

    curl_setopt(

    $ch, CURLOPT_RETURNTRANSFER, 1);

    $config = array( 'ip' => $ip, 
                     'user' => $username, 
                     'email' => $email,
                     'password'=> $password,
                     'time' =>  $time,
                     'type' => 'point') ;

    # add curl post data                 
    curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($config));
    curl_setopt($ch, CURLOPT_POST, true);

    # execute 
    $response = curl_exec($ch);

    # retreive status code
    $http_status = curl_getinfo($ch , CURLINFO_HTTP_CODE);

   if($http_status == '200')
   {
      $response = json_decode($response);

    } else {
       echo $http_status;
    }

   // Close handle
   curl_close($ch);

} 
```

如果是 php 版本问题，那么显然我无权更改 php 版本，因为只有**curl**函数会产生错误，其余项目已完成并按预期工作。请帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T11:43:13.280

我想你可以试试：

```
http_build_query($config, '', '&'); 
```

或替代方案：

```
$paramsArr = array();

foreach($config  as $param => $value) {
   $paramsArr[] = "$param=$value";
}

$joined = implode('&', $paramsArr);
//and use
curl_setopt($ch, CURLOPT_POSTFIELDS, $joined); 
```

# javascript - 如何在 asp 上添加客户端事件：菜单项单击

> ID：15023302
> 
> 赞同：0
> 
> 时间：2013-02-22T11:37:08.860
> 
> 标签：javascript, asp.net

我`<asp:Menu>`在我的网站中使用控件，并使用 XML 数据源从我的 Sql Server 数据库表中填充它。现在我想在菜单项单击时添加客户端事件。当用户单击任何菜单项时，我需要显示一个请等待对话框窗口，直到页面完成刷新。为此，我需要在客户端单击时运行我的 java 脚本函数。那么任何人都可以告诉我如何在菜单项单击时添加客户端单击事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:05:12.057

通过添加css类解决了问题

```
<DynamicMenuStyle CssClass="primaryDynamicMenu" />
<StaticMenuStyle CssClass="primaryStaticMenu"/> 
```

然后为主菜单项添加这个 jquery 函数：

```
$(function() {
    $(".primaryStaticMenu a").each(function(index) {
        $(this).click(function() {
            alert($(this).attr("href"));
        });
    });
}); 
```

对于子菜单项：

```
$(function() {
    $(".primaryDynamicMenu a").each(function(index) {
        $(this).click(function() {
            alert($(this).attr("href"));
        });
    });
}); 
```

# c# - 运行内置在记事本++中的c#控制台应用程序

> ID：15023303
> 
> 赞同：0
> 
> 时间：2013-02-22T11:37:09.630
> 
> 标签：c#, .net, notepad++

我习惯在 VS 2008 < 中编写代码。但是现在我不得不开始使用 Notepad++，我什至无法运行 HelloWorld 程序。我按照本教程中的步骤操作：http: [//www.mastercsharp.com/Article/89/writing-your-first-c-program-hello-world-net-v1-1-](http://www.mastercsharp.com/Article/89/writing-your-first-c-program-hello-world-net-v1-1-) 我安装了 .NET SDK 2.0 ，但我仍然无法运行代码。基本上，当我尝试从 CMD Promppt 执行文件时，我收到一条消息“HelloWorld”不被识别为内部或外部命令、可运行程序或批处理文件。还有什么需要安装的吗？我已经安装了所有能够运行代码的东西，但我仍然无法让它运行。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:39:50.190

在 Notepad++（或任何其他文本编辑器）中编写程序。然后在控制台上使用

```
C:\Windows\Microsoft.NET\Framework\v2.0.50727\csc.exe HelloWorld.cs 
```

编译它。之后，您可以运行生成的可执行文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:39:13.460

你不能运行HelloWorld.cs，你需要把它编译成可执行文件。[用于`csc`那个](http://msdn.microsoft.com/en-us/library/vstudio/78f4aasd.aspx)。

或者只是安装 Visual Studio Express，它是免费的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-06-22T22:25:33.620

您可以为 Notepad++ 安装[CS-Script](http://www.codeproject.com/Articles/694248/Sharpening-Notepadplusplus)插件。该插件允许直接从 Notepad++ 执行 C# 代码（脚本），而不需要任何基础设施（例如项目文件）。它还提供了方便地启动带有系统 CLR 调试器（例如 VS）的 C# 脚本。

# php - 如何改变 第三个基于 2nd 的变化，其中第二个是通过使用 jquery ajax 更改第一个下拉列表的值来绘制的

> ID：15023304
> 
> 赞同：0
> 
> 时间：2013-02-22T11:37:13.793
> 
> 标签：php, jquery, html, ajax, select

我在我的项目（学校管理）中遇到了一些奇怪的情况，并且在互联网上找不到合适的解决方案。这就是问题所在，我有三个`<select>`元素，第一个是选择课程，第二个是选择该课程中的部分，第三个是从该部分中选择课程。代码如下

```
<select id="class">
    <option value="class1">Class 1</option>
    <option value="class2">Class 2</option>
</select>

<select id="section">
    <!--sections will be drawn here from database using ajax, based on class selected in 1st dropdown-->
</select>

<select id="course">
    <!--when a section is selected in 2nd dropdown, courses of that section will be drawn here from database using ajax-->
</select> 
```

我的 ajax 代码在更改#class 时绘制#section，它只是将选定的类发送到 draw_sections.php，在那里我使用 $_GET[] 来获取它的值并在查询中使用它来选择其中的部分来自数据库的类

```
$("#class").change(function(){
   var class = $(this).val();
   $.ajax({
       url: "draw_sections.php?class="+class+"", success: function(sections) {
         $("#section").html(sections);
       } 
    });
}); 
```

到目前为止，它可以正常工作并绘制所选类的部分。`<select>`现在，当在 2nd 中选择一个部分时，我想在 3rd 下拉菜单中绘制课程`<select>`。这是 ajax 我的 ajax 代码

```
$("#section").change(function(){
       var section = $(this).val();
       $.ajax({
           url: "draw_courses.php?section="+section+"", success: function(courses) {
             $("#course").html(courses);
           } 
        });
  }); 
```

此功能旨在将部分（就像在课堂上所做的那样）提取到 draw_course.php 并从数据库中选择该部分的课程，然后在第三个下拉列表中绘制它（就像它在第一个下拉列表中所做的那样），但问题是这些部分是通过 ajax 绘制的，选择一个部分不会影响课程下拉菜单。源代码中也不存在这些部分。因为我是 ajax 的初学者，所以无法比这更好地解释我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:41:22.393

试试 jQuery`.on`

```
 $("#section").on('change',function(){
      //code here
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:43:19.030

你需要使用`delegate`或者`on`因为`select`盒子是动态构建的

```
$("body").delegate('#section','change',function(){
  //code
}); 
```

或者

```
$("#section").on('change',function(){
//code
}); 
```

# linux - 无法将新文件夹名称附加到 UNIX 脚本中的现有路径

> ID：15023307
> 
> 赞同：0
> 
> 时间：2013-02-22T11:37:41.403
> 
> 标签：linux, shell, unix, scripting

这是shell脚本中的以下代码（while循环）

```
do
    echo "directory under is @ " ${dir} >>${DEBUG_LOG_FILE}
    BUP="$PS_HOME/${PSFT_SID}/${dir}";
    echo "backup folder created is1  :  ${BUP} " ${BUP}   >>${DEBUG_LOG_FILE}
    $BUP=${BUP}+"/ArchFolder"
    BUP1=${BUP}+"ArchFolder" (Since "/" is already in the BUP variable"
    echo "backup folder created is 2 :  ${BUP1} " ${BUP1}   >>${DEBUG_LOG_FILE}
        echo "backup folder created is 3 :  ${BUP} " ${BUP}   >>${DEBUG_LOG_FILE}
    mkdir -p ${BUP}

done 
```

当我在开头回显 ${BUP} 时，我得到 /psoft/PNRDP1/sqr/ 作为输出（目录结构）

我的任务：尝试将**/ArchFolder**附加到上面的输出，然后尝试使用 mkdir 命令创建目录，如上面的代码片段所示

我如何看到**/ArchFolder**在“ **/psoft/PNRDP1/sqr/** ”末尾没有连接。

我的问题是 1）连接技术是否有任何错误。

2）或者不是在mkdir中连接并使用该变量，我是否应该在mkdir中附加新的目录名称并执行，这是否可行，如果是的话，任何人都可以向我展示这段代码。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:55:17.387

[在 Bash 中连接两个变量很容易，请参见此处](https://stackoverflow.com/questions/4181703/how-can-i-concatenate-string-variables-in-bash)的示例：

```
foo="Hello"
foo="$foo World"
echo $foo
> Hello World 
```

但是，不需要额外变量的更简单的解决方案与您在第二个问题中提到的类似：

```
 mkdir -p "${BUP}/ArchFolder" 
```

# c# - 如何使 javascript 在 asp.net 控件上工作？

> ID：15023312
> 
> 赞同：0
> 
> 时间：2013-02-22T11:37:59.623
> 
> 标签：c#, javascript, jquery, asp.net

```
<script type="text/javascript">
    $(document).ready(function () {
        $('input[name="time"]').ptTimeSelect();
    });
</script> 
```

上面的脚本正在处理这个问题：

`<input name="time" value="" /></td>`

但没有在这方面工作......

`<asp:TextBox ID="time" name='time' runat="server"></asp:TextBox>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:43:03.627

从我对 ASP.NET 的记忆来看，它修改了元素的 ID 和名称，以确保它始终是唯一的。的最终结果`<asp:TextBox>`可能类似于：

```
<input name="ctr_0102_time" /> 
```

最好的办法是在活动页面上检查元素的来源以确定它具有哪些属性。如果它确实有一个随机标识符，那么你可能应该将它基于一个特定的类：

```
<input class="time" />
<asp:TextBox CssClass="time"></asp:TextBox>

$('input.time') ... 
```

可能导致这种情况发生的另一件事是回传。ASP.NET 中的回发不会重新准备文档，它们只是重新加载页面。而不是`$(document).ready()`使用：

```
function pageLoad() { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:46:04.593

请使用以下代码

```
<script type="text/javascript">
$(document).ready(function () {
var id='<%=time.clientid%>'
    $('#'+id).ptTimeSelect();
});
 </script> 
```

如果这不起作用，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T12:21:17.780

试试这个：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('[id$=time]').ptTimeSelect();
    });
</script> 
```

# php - PHP未定义变量错误

> ID：15023315
> 
> 赞同：0
> 
> 时间：2013-02-22T11:38:04.463
> 
> 标签：php

我有这个类（它是简单的卡片类）：

```
 class Card{
private $suit;
private $rank;

public function __construct($suit, $rank){
    $this->$suit = $suit;
    $this->$rank = $rank;
}

public function get_suit(){
    return $this->$suit;
}

public function get_rank(){
    return $this->$rank;
}
    } 
```

我将每张卡片（带有花色和等级）作为套牌实例：

```
 $tmp_deck = array();
    foreach ($SUITS as $suit){
        foreach($RANKS as $rank){
            array_push( $tmp_deck, new Card($suit, $rank) );
        }
    }
    echo $tmp_deck[0]->get_suit(); 
```

它给了我错误：

```
Notice: Undefined variable: suit in card.php on line 13 
```

我真的不明白出了什么问题。谁能帮我 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:39:05.797

类变量访问喜欢`$this->suit`不喜欢`$this->$suit`

改变这个

```
public function __construct($suit, $rank){
$this->$suit = $suit;
$this->$rank = $rank;
} 
```

至

```
public function __construct($suit, $rank){
   $this->suit = $suit;
   $this->rank = $rank;
} 
```

也改变其他人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T11:38:59.357

更改`$this->$suit`为，访问类变量时`$this->suit`不需要。`$`相同的`$this->$rank`->`$this->rank`

# java - 使用 Apache http 客户端从 java 打开由 django 提供的经过身份验证的图像

> ID：15023322
> 
> 赞同：0
> 
> 时间：2013-02-22T11:38:21.690
> 
> 标签：java, django, authentication, apache-httpclient-4.x

我正在使用 django 提供经过身份验证的图像。该图像位于需要登录的视图后面，最后我必须检查的不仅仅是身份验证。由于此处解释复杂的原因，我不能使用图像的真实 url，但我正在使用自定义 url 提供它，该自定义 url 导致经过身份验证的视图。

从 java 中，图像必须是可访问的，才能保存或显示。对于这一部分，我使用 Apache httpclient。

在 Apacahe 中，我尝试了很多东西（每个示例和示例组合......），但似乎无法使其正常工作。对于 webapp 的其他部分，我使用 django-rest-framwork，我成功地从 java（以及 c 和 curl）连接到它。

我在 django 中使用 login_reuired 装饰器，它首先尝试将 url 重定向到登录页面。

在 webviewer 中尝试链接和登录，我在服务器控制台中看到 200 代码（OK）。尝试与 httpclient 的链接，我在控制台中得到 302 Found....（查找 302，这意味着重定向..）

这就是我在 django 中所做的：

在 urls.py 中：

```
url(r'^photolink/(?P<filename>.*)$', 'myapp.views.photolink',name='photolink'), 
```

在views.py中：

```
import mimetypes
import os

@login_required
def photolink(request, filename):
    # from the filename I get the image object, for this question not interesting
    # there is a good reason for this complicated way to reach a photo, but not the point here
    filename_photo = some_image_object.url
    base_filename=os.path.basename(filename_photo)
    # than this is the real path and filename to the photo:
    path_filename=os.path.join(settings.MEDIA_ROOT,'photos',mac,base_filename)
    mime = mimetypes.guess_type(filename_photot)[0]
    logger.debug("mimetype response = %s" % mime)
    image_data = open(path_filename, 'rb').read()
    return HttpResponse(image_data, mimetype=mime) 
```

顺便说一句，如果我得到这个工作，我需要另一个装饰器来通过其他一些测试......但我首先需要让这个东西工作......

现在它不是一个安全的 url.... 纯 http。

在java中我尝试了很多东西......使用apache的httpclient 4.2.1代理，cookie，身份验证协商，跟随重定向......等等......

我在这里忽略了一些基本的东西吗？...似乎网站客户端的登录不适合自动登录...

所以问题可能出在我在 django 中的代码中……或在 java 代码中……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:28:48.293

最后的问题是，使用 HTTP 授权。login_required 装饰器中默认不使用它。

添加一个自定义装饰器来检查 HTTP 授权就可以了：

看这个例子：[http ://djangosnippets.org/snippets/243/](http://djangosnippets.org/snippets/243/)

# jquery - 如何使这个 jQuery 更简洁？

> ID：15023323
> 
> 赞同：2
> 
> 时间：2013-02-22T11:38:23.640
> 
> 标签：jquery

我对 jQuery 相当陌生，希望对我的以下 jQuery 代码块有一些指示，我有兴趣编写更好的代码。

基本上，当您单击两个菜单项之一时，代码只是从左侧滑入内容，然后再单击将其滑出。我想我正试图将它组合成一个代码块而不是两个函数。

```
$('#menu-item-91').click(function(e) {
    e.preventDefault();
    //console.log("Clicked");
    //$('.about').css('display','inherit').slideDown(3000);
    var sliding = $('.sliding');
    var sliding1 = $('.sliding1');

    if( sliding.css('display') == "none" && sliding1.css('display') == "none" ) { //show it
        sliding.fadeIn(0);
        sliding.animate({"left": 0},800);
    }else if ( sliding.css('display') == "none" && sliding1.css('display') == "block" ) {

        sliding1.animate({"left": -300},500 );
        sliding1.delay(500).fadeOut(0);
        sliding.fadeIn(0);
        sliding.animate({"left": 0},800);
    } else {

        sliding.animate({"left": -300},500 );
        sliding.delay(500).fadeOut(0);
    }

});

$('#menu-item-17').click(function(e) {
    e.preventDefault();
    //console.log("Clicked");
    //$('.about').css('display','inherit').slideDown(3000);
    var sliding = $('.sliding1');
    var sliding1 = $('.sliding');

    if( sliding.css('display') == "none" && sliding1.css('display') == "none" ) { //show it
        sliding.fadeIn(0);
        sliding.animate({"left": 0},800);
    }else if ( sliding.css('display') == "none" && sliding1.css('display') == "block" ) {

        sliding1.animate({"left": -300},500 );
        sliding1.delay(500).fadeOut(0);
        sliding.fadeIn(0);
        sliding.animate({"left": 0},800);
    } else {

        sliding.animate({"left": -300},500 );
        sliding.delay(500).fadeOut(0);
    }

}); 
```

就是这样！这是我的第一篇文章，所以我希望我没有违反任何规则，并且有人可以帮助我变得更好！

问候汤姆

***编辑***

多谢你们！还不想标记答案，因为我认为我可能错过了与某些答案相关的一些细节。

.sliding 和 .sliding1 这两个类被添加到单独的 div 中——一个称为投资组合，一个称为 about。

所以想法是，如果您单击 about 菜单项，about div 会滑入，然后如果您要单击投资组合菜单项，那么 about 会滑出，投资组合会滑入。但如果没有显示任何项目，那么您的项目点击会滑入。

希望这可以澄清一些事情，当单击任一菜单项时，一些答案只会滑入相同的内容中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:49:47.230

我在这里看到的第一个问题是您的大部分代码都是重复的，这与 jQuery 本身无关，这是一个 DRY 问题。利用 jQuery 提供的 :visible 和 :hidden 伪类，将您的公共代码包装在一个地方，并利用链接来避免一遍又一遍地重复使用变量名；最后但同样重要的是，在 jQuery 对象变量上使用 $ 前缀，这样它们就可以立即脱颖而出：

```
var $sliding1,
    $sliding2;

function doSlide($item1, $item2) {
    if ($item1.is(':hidden') && $item2.is(':hidden')) { //show it
        $item1.fadeIn(0)
             .animate({"left": 0}, 800);
    }
    else if ($item1.is(':hidden') && $item2.is(':visible')) {
        $item2.animate({"left": -300}, 500)
             .delay(500)
             .fadeOut(0);
        $item1.fadeIn(0)
             .animate({"left": 0}, 800);
    }
    else {
        $item1.animate({"left": -300}, 500)
             .delay(500)
             .fadeOut(0);
    }
}

function fetchSliders() {
  $sliding1 = $sliding1 || $('.sliding');
  $sliding2 = $sliding2 || $('.sliding1');
}

$('#menu-item-91').click(function(e) {
    e.preventDefault();
    fetchSliders();
    doSlide($sliding1, $sliding2);
});

$('#menu-item-17').click(function(e) {
    e.preventDefault();
    fetchSliders();
    doSlide($sliding2, $sliding1);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:45:24.670

使用多个 id 选择器，但您可以改用一个类。

```
var sliding = $('.sliding');
 var sliding1 = $('.sliding1');

$('#menu-item-91, #menu-item-17').click(function(e) {
    e.preventDefault();
    if (sliding.css('display') === "none" && sliding1.css('display') === "none" ) { //show it`enter code here`
        sliding.fadeIn(0)
               .animate({"left": 0},800);
    }else if (sliding.css('display') === "none" && sliding1.css('display') === "block" ) {
        sliding1.animate({"left": -300},500 )
                .delay(500)
                .fadeOut(0);
        sliding.fadeIn(0)
               .animate({"left": 0}, 800);
    } else {
        sliding.animate({"left": -300},500)
               .delay(500).fadeOut(0);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:45:56.137

你可以在这里做几件事：

*   使用 jQuery 的`:visible`选择器而不是检查 CSS 显示值是否为“无”
*   将同一元素上的方法链接在一行中，而不是将它们添加到单独的行中
*   看起来这两个点击函数之间的唯一区别是它们被调用的元素，因此可以使用带有逗号分隔的选择器列表的单击函数

这是您的代码的改编版本：

**编辑**我添加了一个函数，您可以根据下面里卡多的评论反馈调用并传入两个滑动变量的选择器：

```
$("#menu-item-17").click(function(e) {
  e.preventDefault();
  handleSlider($(".sliding1"), $(".sliding"));
});

$("#menu-item-91").click(function(e) {
  e.preventDefault();
  handleSlider($(".sliding"), $(".sliding1"));
});

function handleSlider(sliding, sliding1)
{
  if (!sliding.is(":visible") && !sliding1.is(":visible"))  //show it
  {
    sliding.fadeIn(0).animate({"left": 0},800);
  } 
  else if (!sliding.is(":visible") && sliding1.is(":visible")) 
  {
    sliding1.animate({"left": -300},500 ).delay(500).fadeOut(0);
    sliding.fadeIn(0).animate({"left": 0},800);
  } else {
    sliding.animate({"left": -300},500 ).delay(500).fadeOut(0);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T11:46:15.873

```
 function slideThis(sliding,sliding1)
        {
             if(sliding.is(":visible"))
             sliding.animate({"left": -300},500 ).delay(500).fadeOut(0);

             else 
             {
                 if(sliding1.is(":visible"))
                 sliding1.animate({"left": -300},500 ).delay(500).fadeOut(0);

                 sliding.fadeIn(0).animate({"left": 0},800);
             }    

        }

    var sliding = $('.sliding');
    var sliding1 = $('.sliding1');

    $('#menu-item-91').click(function(e) {
        e.preventDefault();
        slideThis(sliding,sliding1); //notice the changes in parameter name
    });

    $('#menu-item-17').click(function(e) {
        e.preventDefault();
        slideThis(sliding1,sliding); //notice the changes in parameter name
    }); 
```

# android - 我的媒体播放器不能很好地“循环”

> ID：15023327
> 
> 赞同：3
> 
> 时间：2013-02-22T11:38:27.420
> 
> 标签：android

我有一个扩展 Service 的类，我有一个 MediaPlayer 来管理我的应用程序的背景音乐。

```
MediaPlayer player = MediaPlayer.create(this, R.raw.background_music);
player.setLooping(true); 
```

问题是它不能很好地“循环”：我的意思是，当 mp3 文件结束时，在重新开始之前会有一秒钟的沉默。但是，在 mp3 文件中，实际上，没有一秒钟的沉默。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:44:49.150

你不能。这个错误已经存在很长时间了，但他们仍然没有修复它，而且看起来他们不会在不久的将来这样做！

[http://code.google.com/p/android/issues/detail?id=18756](http://code.google.com/p/android/issues/detail?id=18756)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-05T08:07:42.187

您可以尝试使用 SoundPool 来播放您的音频文件（它可以很好地循环播放并且没有延迟，但可能不适合某些音频资源）。

这是某种实现（弃用删除和适当关闭资源留作家庭作业:)）

```
SoundPool pool = new SoundPool(1, AudioManager.STREAM_MUSIC, 0);
afd = getResources().openRawResourceFd(audioResource);
pool.setOnLoadCompleteListener(new OnLoadCompleteListener() {
    @Override
    public void onLoadComplete(SoundPool soundPool, int sampleId, int status) {
        if (0 == status) {
            soundPool.play(sampleId, 1f, 1f, 10, -1 /* looping parameter */, 1f);
        }
    }
});
pool.load(afd, 10);
afd.close(); 
```

从另一方面来说，如果 MediaPlayer 是必须的，你可能会研究方法**setNextMediaPlayer**。所以想法是为同一个文件初始化几个 MediaPlayer（真是一团糟）并以一种智能的方式设置它们。

# javascript - 聆听选择范围的变化

> ID：15023329
> 
> 赞同：1
> 
> 时间：2013-02-22T11:38:33.547
> 
> 标签：javascript, ios

我有一个移动网络应用程序（Sencha Touch 2），用户可以在其中填写一个带有金额的数字字段。用户第一次输入数字时，会在字段末尾添加货币符号

现在，我想做的是阻止用户将光标移动到字段的末尾并删除货币符号。

当输入像这样获得焦点时，我已经在重置选择范围：

```
input.setSelectionRange(ln, ln); 
```

但我不知道如何知道用户何时移动该光标（该字段已经聚焦）

那么有没有在输入上触发的事件？或者有没有其他方法可以查到？

# iphone - 当我删除第一行时的表格视图在最后一个单元格添加了另一行，这是最后一个单元格信息

> ID：15023330
> 
> 赞同：-1
> 
> 时间：2013-02-22T11:38:36.257
> 
> 标签：iphone, ios, ipad

我创建了一个表格视图。我的每一行都有一个删除按钮。现在，当我删除第一行时，最后一行将再次添加到表格视图中。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:   (NSIndexPath *)indexPath
{
    if(currentHTMLElement==@"1") {
        static NSString *CellIdentifier=@"Cell";
        UITableViewCell* cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if(cell == nil) {
            cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault    reuseIdentifier:CellIdentifier]autorelease];
        }

        NSMutableDictionary *d = (NSMutableDictionary *) [arr objectAtIndex:indexPath.row];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        retun cell;
    }
} 
```

我在每一行都有更多的标签。另外，我重新加载表格视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:12:21.037

确保以这种方式删除它：

```
[self.tableView beginUpdates];
//delete item form you array (arr)
//delete row from tableView
[self.tableView reloadData];
[self.tableView endUpdates]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:48:36.263

可以替换`currentHTMLElement==@"1"`为`[currentHTMLElement isEqualToString:@"1"]`

# flash - 暂停 AIR-for-mobile 应用程序的首选方式是什么？

> ID：15023332
> 
> 赞同：0
> 
> 时间：2013-02-22T11:38:40.483
> 
> 标签：flash, mobile, air

我做了一个Flash Air游戏。玩游戏时，如果我按下 Android 设备上的 Home 按钮，我会进入手机菜单，但我仍然可以听游戏的音乐，这意味着游戏仍然可以正常运行。

我希望我的应用程序不在前台时暂停。我想过这个：

...

```
 stage.addEventListener(flash.events.Event.DEACTIVATE, deactivated); 
```

...

```
 private function deactivated(e:flash.events.Event):void {
        delayedCall = new DelayedCall(quitNow, 2 * 60);
        stage.addEventListener(flash.events.Event.ACTIVATE, reactivated);
    }
    private function quitNow():void {
        NativeApplication.nativeApplication.exit();
    }
    private function reactivated(e:flash.events.Event):void {
        stage.removeEventListener(flash.events.Event.ACTIVATE, reactivated);
        if (delayedCall) {
            delayedCall.dismiss();
            delayedCall = null;
        }
    } 
```

...

其中 DelayedCall 是一个自定义的“调用此函数之前等待”类：

```
package fanlib.utils {
import flash.utils.Timer;
import flash.events.TimerEvent;

public class DelayedCall {

    private var data:*;
    private var callback:Function;
    private var timer:Timer;

    public function DelayedCall(callb:Function, seconds:Number, dat:* = undefined, count:int = 1) {
        callback = callb;
        data = dat;

        timer = new Timer(seconds * 1000, count);
        timer.addEventListener(TimerEvent.TIMER, timeEvent);
        timer.start();
    }

    public function dismiss():void {
        timer.stop();
        complete();
    }

    private function timeEvent(e:TimerEvent):void {
        if (data) callback(data); else callback();
        if (timer.currentCount == timer.repeatCount) complete();
    }

    private function complete():void {
        timer = null;
        data = undefined;
    }
}
} 
```

上述方法适用于 Air Desktop 版本。当窗口失焦时，应用程序会在 2*60 秒后退出。

**在 Android 上，这种行为非常奇特：**

*   延迟呼叫永远不会调用 quitNow()
*   如果我删除“stage.addEventListener(flash.events.Event.ACTIVATE, reactivated);”，那么如果我在 2*60 秒后返回它，应用程序将关闭，但如果我没有得到它不会关闭回到它！

这似乎是当应用程序不在前台时，Actionscript 代码确实会暂停，但音乐仍然在播放。

任何想法或更好的替代方法，直接证明的方法？我不打算深入研究 Air 和 Android 的内部工作原理......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:51:51.617

在 Android 上，您可以监听*NativeApplication*的 DEACTIVATE 和 ACTIVATE 事件。当应用程序被发送到后台时，*handleApplicationDeactivated*将被调用。当它返回时，会调用*handleApplicationActivated*。希望这可以帮助。

```
NativeApplication.nativeApplication.addEventListener(Event.DEACTIVATE, handleApplicationDeactivated);
NativeApplication.nativeApplication.addEventListener(Event.ACTIVATE, handleApplicationActivated); 
```

# python - 简单的工具/库来可视化巨大的 python dict

> ID：15023333
> 
> 赞同：15
> 
> 时间：2013-02-22T11:38:41.793
> 
> 标签：python, user-interface, dictionary, gtk, tkinter

我有一个像这样的巨大 dict 结构：

```
my_data = {
    'key1': {
        '_': 'value1': 'aaa'
    },
    'key2': {
        '_': 'value2': 'bbb',
        'key2.1': {
            '_': 'ccc',
            'key2.1.1': {
                '_': 'ddd'
            }
        }
        'key2.2': {
            '_': 'eee',
            'key2.2.1': {
                '_': 'fff'
            }
            'key2.2.2': {
                '_': 'ggg'
            }               
        }
    }
} 
```

等等。

我想以一种树表示形式向用户显示它，使用 GTK、TK 或任何能够浏览它的东西来折叠和展开分支，并可能搜索键和值。

可能我不需要手动开发这样的工具，并且已经有一些东西可以开箱即用地可视化这种数据？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T12:22:46.447

我不知道现成的工具，但您可以使用[Traits UI](https://pypi.org/project/traitsui/)快速开发自己的

```
from enthought.traits.api \
    import HasTraits, Instance

from enthought.traits.ui.api \
    import View, VGroup, Item, ValueEditor

class DictEditor(HasTraits):
    Object = Instance( object )

    def __init__(self, obj, **traits):
        super(DictEditor, self).__init__(**traits)
        self.Object = obj

    def trait_view(self, name=None, view_elements=None):
        return View(
          VGroup(
            Item( 'Object',
                  label      = 'Debug',
                  id         = 'debug',
                  editor     = ValueEditor(),
                  style      = 'custom',
                  dock       = 'horizontal',
                  show_label = False
            ),
          ),
          title     = 'Dictionary Editor',
          width     = 800,
          height    = 600,
          resizable = True,
        )

def build_sample_data():
    my_data = dict(zip(range(10),range(10,20)))
    my_data[11] = dict(zip(range(10),range(10,20)))
    my_data[11][11] = dict(zip(range(10),range(10,20)))
    return my_data

# Test
if __name__ == '__main__':
    my_data = build_sample_data()
    b = DictEditor(my_data)
    b.configure_traits() 
```

而已。您将拥有如下 GUI：

Traits UI 使用模型-视图-控制器方法来创建 GUI，而无需以编程方式创建每个小部件。在这里，我使用预定义的 ValueEditor 来显示任意类型。您现在可以扩展它以支持搜索、过滤等...![截屏](../Images/f1c73f5641d5c56ea92ac3823c574316.png)

**编辑**

支持过滤的简单扩展：

```
# -*- coding: utf-8 -*-
"""
Created on Fri Feb 22 12:52:28 2013

@author: kranzth
"""
from enthought.traits.api \
    import HasTraits, Instance, Str, on_trait_change

from enthought.traits.ui.api \
    import View, VGroup, Item, ValueEditor, TextEditor

from copy import deepcopy

class DictEditor(HasTraits):
    SearchTerm = Str()
    Object = Instance( object )

    def __init__(self, obj, **traits):
        super(DictEditor, self).__init__(**traits)
        self._original_object = obj
        self.Object = self._filter(obj)

    def trait_view(self, name=None, view_elements=None):
        return View(
          VGroup(
            Item( 'SearchTerm',
                  label      = 'Search:',
                  id         = 'search',
                  editor     = TextEditor(),
                  #style      = 'custom',
                  dock       = 'horizontal',
                  show_label = True
            ),
            Item( 'Object',
                  label      = 'Debug',
                  id         = 'debug',
                  editor     = ValueEditor(),
                  style      = 'custom',
                  dock       = 'horizontal',
                  show_label = False
            ),
          ),
          title     = 'Dictionary Editor',
          width     = 800,
          height    = 600,
          resizable = True,
        )

    @on_trait_change("SearchTerm")
    def search(self):
        self.Object = self._filter(self._original_object, self.SearchTerm)

    def _filter(self, object_, search_term=None):
        def has_matching_leaf(obj):
            if isinstance(obj, list):
                return any(
                        map(has_matching_leaf, obj))
            if isinstance(obj, dict):
                return any(
                        map(has_matching_leaf, obj.values()))
            else:
                try:
                    if not str(obj) == search_term:
                        return False
                    return True
                except ValueError:
                    False

        obj = deepcopy(object_)
        if search_term is None:
            return obj

        if isinstance(obj, dict):
            for k in obj.keys():
                if not has_matching_leaf(obj[k]):
                    del obj[k]

            for k in obj.keys():
                if isinstance(obj, dict):
                    obj[k] = self._filter(obj[k], search_term)
                elif isinstance(obj, list):
                    filter(has_matching_leaf,obj[k])

        return obj

def build_sample_data():
    def make_one_level_dict():
        return dict(zip(range(100),
                        range(100,150) + map(str,range(150,200))))

    my_data = make_one_level_dict()
    my_data[11] = make_one_level_dict()
    my_data[11][11] = make_one_level_dict()
    return my_data

# Test
if __name__ == '__main__':
    my_data = build_sample_data()
    b = DictEditor(my_data)
    b.configure_traits() 
```

会给你一个带有“filter-as-you-type”的文本框。搜索并非对所有情况都完全正确，但您可以弄清楚这个想法。

请注意，在此示例中，dict 中的数据部分是整数，部分是字符串，两种类型都会被找到。

![截屏](../Images/d054ecaa065c82357cbba7ac6b15f837.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-27T14:49:45.493

我最终将我的数据转换`json`为@PavelAnossov 建议的格式并使用[d3 Tree Layout](https://github.com/mbostock/d3/wiki/Tree-Layout)。

![在此处输入图像描述](../Images/ee318fc2265fe3e186642f93113a01d5.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-01-28T16:37:37.330

这里已经有一些很好的答案，但我相信这个可以称为“简单”（它只使用 python 内置库 tkinter 和 uuid）。

它基于 John Gaines Jr. 在[另一个问题](https://stackoverflow.com/questions/8574070/python-display-a-dict-of-dicts-using-a-ui-tree-for-the-keys-and-any-other-widg)中的回答，由 Will Ware 修改以支持列表，由我修改以支持元组（在 python 3 上运行）。

我还对其进行了重新组织，以便您可以使用简单的东西来调用查看器`tk_tree_view(data)`，传入字典（如最后的示例中所示）。

```
import uuid
import tkinter as tk
from tkinter import ttk

def j_tree(tree, parent, dic):
    for key in sorted(dic.keys()):
        uid = uuid.uuid4()
        if isinstance(dic[key], dict):
            tree.insert(parent, 'end', uid, text=key)
            j_tree(tree, uid, dic[key])
        elif isinstance(dic[key], tuple):
            tree.insert(parent, 'end', uid, text=str(key) + '()')
            j_tree(tree, uid,
                   dict([(i, x) for i, x in enumerate(dic[key])]))
        elif isinstance(dic[key], list):
            tree.insert(parent, 'end', uid, text=str(key) + '[]')
            j_tree(tree, uid,
                   dict([(i, x) for i, x in enumerate(dic[key])]))
        else:
            value = dic[key]
            if isinstance(value, str):
                value = value.replace(' ', '_')
            tree.insert(parent, 'end', uid, text=key, value=value)

def tk_tree_view(data):
    # Setup the root UI
    root = tk.Tk()
    root.title("tk_tree_view")
    root.columnconfigure(0, weight=1)
    root.rowconfigure(0, weight=1)

    # Setup the Frames
    tree_frame = ttk.Frame(root, padding="3")
    tree_frame.grid(row=0, column=0, sticky=tk.NSEW)

    # Setup the Tree
    tree = ttk.Treeview(tree_frame, columns=('Values'))
    tree.column('Values', width=100, anchor='center')
    tree.heading('Values', text='Values')
    j_tree(tree, '', data)
    tree.pack(fill=tk.BOTH, expand=1)

    # Limit windows minimum dimensions
    root.update_idletasks()
    root.minsize(root.winfo_reqwidth(), root.winfo_reqheight())
    root.mainloop()

if __name__ == "__main__":
    # Setup some test data
    data = {
        "firstName": "John",
        "lastName": "Smith",
        "gender": "male",
        "age": 32,
        "address": {
            "streetAddress": "21 2nd Street",
            "city": "New York",
            "state": "NY",
            "postalCode": "10021"},
        "phoneNumbers": [
            {"type": "home", "number": "212 555-1234"},
            {"type": "fax",
             "number": "646 555-4567",
             "alphabet": [
                 "abc",
                 "def",
                 "ghi"]
             }
        ]}

    # call it with
    tk_tree_view(data) 
```

它看起来像这样：

[![在此处输入图像描述](../Images/f1d85337839de6cc8ae23b9f9fc3dd19.png)](https://i.stack.imgur.com/AwOH9.jpg)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-18T04:07:41.610

If you're using an IDE set a breakpoint after the dictionary is initialized and has the data you want to explore then run in debug mode. There should be a "Variables" view in debug mode where you can expand and collapse the dictionary as you mentioned.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-27T16:10:20.150

只需补充@Thorsten 的答案。`traits`很久以前，该软件包已被重构。运行 Thorsten 代码的正确方法是：

1.  安装特征模块：`sudo apt-get install python-traitsui`
2.  将其代码中的模块导入行更改为：

    ```
    from traits.api \
    import HasTraits, Instance, Str, on_trait_change

    from traitsui.api \
    import View, VGroup, Item, ValueEditor, TextEditor 
    ```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-11-02T17:35:04.370

这个简单的函数以表格形式打印字典。它还可以处理嵌套字典。

```
def visualise_dict(d,lvl=0):

    # go through the dictionary alphabetically 
    for k in sorted(d):

        # print the table header if we're at the beginning
        if lvl == 0 and k == sorted(d)[0]:
            print('{:<25} {:<15} {:<10}'.format('KEY','LEVEL','TYPE'))
            print('-'*79)

        indent = '  '*lvl # indent the table to visualise hierarchy
        t = str(type(d[k]))

        # print details of each entry
        print("{:<25} {:<15} {:<10}".format(indent+str(k),lvl,t))

        # if the entry is a dictionary
        if type(d[k])==dict:
            # visualise THAT dictionary with +1 indent
            visualise_dict(d[k],lvl+1) 
```

使用示例字典：

```
d = {}
d.update({1:{},2:{}})
d[1]['foo'] = {}
d[1]['foo']['bar'] = 1
d[2]['bar'] = 5.2

visualise_dict(d) 
```

返回

```
In [1]: visualise_dict(d)
KEY                       LEVEL           TYPE      
-------------------------------------------------------------------------------
1                         0               <class 'dict'>
  foo                     1               <class 'dict'>
    bar                   2               <class 'int'>
2                         0               <class 'dict'>
  bar                     1               <class 'float'> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-03T21:49:00.367

如果您使用带有 JSONViewer 扩展的浏览器，这可能对您有用：

```
import json
import tempfile
import os
import subprocess
def view_obj(obj):
  (f, filepath)= tempfile.mkstemp()
  os.close(f)
  with open(filepath, 'w') as f:
    json.dump(obj, f)
    subprocess.call(["google-chrome", filepath])

view_obj({'key':'value'})  # Opens Chrome and renders JSON nicely 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-06-02T04:36:00.987

我在上面修改了卢卡斯的答案，以便它接受具有混合键类型（如整数和字符串）的字典。我这样做的方式是使用 json 编码和解码，所以所有的键都是字符串。

```
import uuid
import json
import tkinter as tk
from tkinter import ttk

def j_tree(tree, parent, dic):
    for key in sorted(dic.keys()):
        uid = uuid.uuid4()
        if isinstance(dic[key], dict):
            tree.insert(parent, 'end', uid, text=key)
            j_tree(tree, uid, dic[key])
        elif isinstance(dic[key], tuple):
            tree.insert(parent, 'end', uid, text=str(key) + '()')
            j_tree(tree, uid,
                   dict([(i, x) for i, x in enumerate(dic[key])]))
        elif isinstance(dic[key], list):
            tree.insert(parent, 'end', uid, text=str(key) + '[]')
            j_tree(tree, uid,
                   dict([(i, x) for i, x in enumerate(dic[key])]))
        else:
            value = dic[key]
            if isinstance(value, str):
                value = value.replace(' ', '_')
            tree.insert(parent, 'end', uid, text=key, value=value)

def tk_tree_view(data):
    # Setup the root UI
    data = json.dumps(data)
    data = json.loads(data) 
    root = tk.Tk()
    root.title("tk_tree_view")
    root.columnconfigure(0, weight=1)
    root.rowconfigure(0, weight=1)

    # Setup the Frames
    tree_frame = ttk.Frame(root, padding="3")
    tree_frame.grid(row=0, column=0, sticky=tk.NSEW)

    # Setup the Tree
    tree = ttk.Treeview(tree_frame, columns=('Values'))
    tree.column('Values', width=100, anchor='center')
    tree.heading('Values', text='Values')
    j_tree(tree, '', data)
    tree.pack(fill=tk.BOTH, expand=1)

    # Limit windows minimum dimensions
    root.update_idletasks()
    root.minsize(root.winfo_reqwidth(), root.winfo_reqheight())
    root.mainloop()

if __name__ == "__main__":
    # Setup some test data
    data = {
        "firstName": "John",
        "lastName": "Smith",
        "gender": "male",
        "age": 32,
        "address": {
            "streetAddress": "21 2nd Street",
            "city": "New York",
            "state": "NY",
            "postalCode": "10021"},
        "phoneNumbers": [
            {"type": "home", "number": "212 555-1234"},
            {"type": "fax",
             "number": "646 555-4567",
             "alphabet": [
                 "abc",
                 "def",
                 "ghi"]
             }
        ]} 
```

我发现我可以将此代码粘贴到 ipython 中。
然后将数据定义为我的字典

```
data = [paste the big dict here] 
```

然后用

```
tk_tree_view(data) 
```

这种例子确实展示了 tk 的简单性。

# c# - 无法在 VS2012 上删除 RazorCustomSchema.xsd

> ID：15023334
> 
> 赞同：3
> 
> 时间：2013-02-22T11:38:46.840
> 
> 标签：c#, visual-studio-2012, xsd, app-config

我想摆脱项目中的模式警告。以下是警告：

*   找不到元素“supportedRuntime”的架构信息。
*   找不到属性“版本”的架构信息。
*   找不到属性“sku”的架构信息。

因此，我进行了研究并找到了此[解决方案](https://stackoverflow.com/questions/4355278/visual-studio-always-selects-the-wrong-xsd-for-app-config/4400071#4400071)。但是，我意识到 RazorCustomSchema.xsd 已被选中，尽管我选择了“不使用此架构”并单击“确定”，但 RazorCustomSchema 再次被选中。我想选择 DotNetConfig40.xsd 但我不能。有什么建议么？

# algorithm - 如何在逐字节比较之前先检查文件是否相等？

> ID：15023337
> 
> 赞同：0
> 
> 时间：2013-02-22T11:38:56.540
> 
> 标签：algorithm, file, compare, byte, equals

我正在编写一个比较很多文件的程序。

我首先按文件大小对文件进行分组。然后我在分组文件之间逐字节检查它们。在逐字节比较之前我可以检查哪些参数或属性以最小化使用它？

更新：要获得校验和，我需要读取整个文件。我寻求一些可以过滤不相等文件的属性。我忘了说我需要 100% 相等的文件。哈希函数有冲突。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:37:17.877

如果文件被操作系统记录为相同大小，那么除了检查字节之外，没有办法知道它们是否不同。

对于一组文件，一旦已知两个文件相同，则只需对两者中的一个进行比较。出于这个原因，根据日期相似的文件更有可能相同的理论，按日期对组中的文件进行排序是明智的。因此，您应该维护相同文件的列表。当进行新的比较时，只需将其与列表的头部进行比较。

您应该预先分配尽可能多的内存并将列表头保存在内存中。

进行比较时，您实际上不应该比较字节，而是比较单词。例如，在 32 位机器上，您将从硬盘驱动器读取 512 字节块中的数据，然后将每个块一次比较 4 字节。较新的 x86 处理器具有称为 MMX 的矢量化操作指令。你要确保你正在使用这些。

如果您使用 C 语言编写 Intel 机器，请使用 Intel 的编译器，而不是 Microsoft 的。仔细检查程序集以确保编译器没有做一些愚蠢的事情。

您还可以通过并行化来提高工作速度。这是通过创建线程来完成的。例如，如果代码在四核机器上运行，您创建 4 个线程并将工作分配给 4 个线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:02:43.677

检查文件的[校验和](http://en.wikipedia.org/wiki/Checksum)。它是为这个任务而修复的

对于 Python，您可以使用[hashlib](http://docs.python.org/2/library/hashlib.html)。例如，对于 C，您可以使用[openssl 中的 md5](http://www.openssl.org/docs/crypto/md5.html)。对于[php](http://www.w3schools.com/php/func_string_md5.asp)、[MySQL](https://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html#function_md5)以及可能对于所有其他编程语言都有类似的功能

最终你可以使用 linux 内置的[md5sum](http://linux.die.net/man/1/md5)

# android - 大屏幕上的大按钮 - dpi 与绝对分辨率混合

> ID：15023342
> 
> 赞同：0
> 
> 时间：2013-02-22T11:39:06.370
> 
> 标签：android

我刚刚意识到我对整个 mdpi/hdpi/xhdpi 问题的印象是错误的。我的想法是，在大型 10 英寸平板电脑上，操作系统自然会使用 xhdpi 目录中的图像，而在小型手机上，操作系统会选择 mdpi 目录中的图像……但经过一些实验后，我意识到不同的目录用于*每英寸不同的像素，*并且与实际的像素总数无关。但这是一个真正的问题，因为现在我无法安排将最大的图像用于最大绝对数量的像素。这可以在不拉伸/收缩位图的情况下完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:11:37.033

回答我自己的问题...

我被绊倒了，因为我见过的所有 XML 示例似乎都使用 mdpi/hdpi/xhdpi，所以我认为这些是唯一存在的指定屏幕特征的方法。但我刚刚看到您也可以使用小/中/大和其他东西 - 描述[here](http://developer.android.com/guide/topics/resources/providing-resources.html#SmallestScreenWidthQualifier)。

# php - 如何使用 PHP 显示网站的标题信息？

> ID：15023348
> 
> 赞同：3
> 
> 时间：2013-02-22T11:39:29.987
> 
> 标签：php, http-headers

如何使用 php 获取像这个网页（下）这样的标题信息

本网站[检查网站 HTTP Server Header 信息](http://webtools.live2support.com/header.php)

**结果：**

```
HTTP Status for: "http://www.abc.com"
The title is: ""

Keywords: ""
Description: ""

HTTP/1.1 200 OK
Date: Fri, 22 Feb 2013 12:00:56 GMT
Server: Apache/2.2.3 (Debian) PHP/4.4.4-8+etch6
X-Powered-By: PHP/4.4.4-8+etch6
Keep-Alive: timeout=300
Connection: Keep-Alive
Content-Type: text/html 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T11:41:42.380

使用 PHP 函数`get_headers`：

```
$headers = get_headers($url, 1); 
```

见： http: [//php.net/manual/en/function.get-headers.php](http://php.net/manual/en/function.get-headers.php)

如果您还想要*元关键字*和*元描述*，请使用[get_meta_tags()](http://php.net/manual/en/function.get-meta-tags.php)：

```
$tags = get_meta_tags($url); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T11:42:24.530

您可以使用 PHP 函数`get_header();`。此函数将返回一个包含所有标题字段的数组。

有关更多信息，请参阅： http: [//php.net/manual/en/function.get-headers.php](http://php.net/manual/en/function.get-headers.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T11:42:12.573

你可以使用：

```
print_r(get_headers($url)); 
```

# android - android andengine png图片闪烁

> ID：15023355
> 
> 赞同：0
> 
> 时间：2013-02-22T11:39:44.313
> 
> 标签：android, png, andengine

我是andengine游戏开发的新手，我在场景中添加了一个png图像，它显示在应用程序中，但它闪烁我不知道为什么，请帮助我，提前致谢。

这是我的代码：

```
public static final int WIDTH = 800;
public static final int HEIGHT = 480;

private static final int DEFAULT_IMAGE_ROTATION = 90;

private Scene mScene;
private Camera mCamera;

private Sprite mArrowSprite;
private Sprite mMarbleSprite;

private ITextureRegion mArrowTextureRegion;
private ITextureRegion mMarbleTextureRegion;
BitmapTextureAtlas playerTexture;

@Override
public EngineOptions onCreateEngineOptions() 
{
    // TODO Auto-generated method stub

    mCamera = new Camera(0, 0, WIDTH, HEIGHT);

    final FixedStepEngine engine = new FixedStepEngine(new EngineOptions(true,
            ScreenOrientation.LANDSCAPE_FIXED, new RatioResolutionPolicy(
                    WIDTH, HEIGHT), mCamera),60);

    //EngineOptions engineOptions = new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED, new FillResolutionPolicy(), mCamera);

    //engineOptions.getRenderOptions().setDithering(false);

    //return engineOptions;

    return engine.getEngineOptions();

}

@Override
public void onCreateResources(
        OnCreateResourcesCallback pOnCreateResourcesCallback)
        throws IOException 
        {
            // TODO Auto-generated method stub

            BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

            BuildableBitmapTextureAtlas mBitmapTextureAtlas = new BuildableBitmapTextureAtlas(mEngine.getTextureManager(), 128, 128, TextureOptions.BILINEAR_PREMULTIPLYALPHA);

            mArrowTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(mBitmapTextureAtlas, this, "player.png");
            //mMarbleTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(mBitmapTextureAtlas, this, "marble.png");

            try 
            {
                mBitmapTextureAtlas.build(new BlackPawnTextureAtlasBuilder<IBitmapTextureAtlasSource, BitmapTextureAtlas>(0, 0, 1));
            } 
            catch (TextureAtlasBuilderException e) 
            {
                e.printStackTrace();
            }

            mBitmapTextureAtlas.load();

            this.mEngine.getTextureManager().loadTexture(mBitmapTextureAtlas);

            pOnCreateResourcesCallback.onCreateResourcesFinished();

        }

@Override
public void onCreateScene(OnCreateSceneCallback pOnCreateSceneCallback)
        throws IOException 
        {
            // TODO Auto-generated method stub

            mScene = new Scene();

            mScene.setOnSceneTouchListener(this);

        }

@Override
public void onPopulateScene(Scene pScene,
        OnPopulateSceneCallback pOnPopulateSceneCallback)
        throws IOException 
        {
            // TODO Auto-generated method stub

        } 
```

}

我在谷歌上搜索并尝试了我发现但没有成功的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:15:08.907

你实际上是在跟注`mBitmapTextureAtlas.load()`两次。这***可能***是问题所在。

够`128x128`大`player.png`吗？

*闪烁*也不是一个非常精确的问题描述 = P

# javascript - javascript没有设置td标签的值

> ID：15023356
> 
> 赞同：0
> 
> 时间：2013-02-22T11:39:45.947
> 
> 标签：javascript, html, dom

我对 JavaScript 很陌生，我希望我可以`td`使用 JavaScript 设置标签的值。

我有这样的代码：

```
window.onload = function() {
     document.getElementById("units").value = "122"
} 
```

我有一个这样的html文件：

```
<table class="table" width="100%">
    <caption class="bold">TNEB UnitCalculator</caption>
    <tbody>
        <tr>
            <td>testing</td>
            <td id="units"></td>
        </tr>
    </tbody>
</table> 
```

但这似乎不起作用！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T11:42:20.333

该`td`标签没有 value 属性：

```
document.getElementById("units").appendChild(document.createTextNode(122)); 
```

或者如果你想设置一些属性：

```
document.getElementById("units").setAttribute('data-value', 122); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:41:31.590

该`td`元素没有`value`属性。改为使用`innerHTML`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:45:57.377

实际上你的代码工作正常

```
<script>
    window.onload = function() {
        document.getElementById("units").value = "122"
    }
</script>

<table class="table" width="100%">
    <caption class="bold">TNEB UnitCalculator</caption>
    <tbody>
        <tr>
            <td>testing</td>
            <td id="units"></td>
        </tr>
    </tbody>
</table> 
```

您可以在您的浏览器开发者工具中检查这一点。在命令行中，键入：

```
document.getElementById("units").value 
```

# c# - 找不到路径的一部分

> ID：15023357
> 
> 赞同：0
> 
> 时间：2013-02-22T11:39:46.590
> 
> 标签：c#

我正在尝试将 a 转换`DataTable`为 excel 文件，但在创建文件时它给了我错误：*找不到路径的一部分*。

```
string strDirectorypath = HttpContext.Current.Server.MapPath("~/ExcelUpload/");
DateTime dtbatchtime = Convert.ToDateTime(strBatchProcesstime);
strBatchProcesstime = dtbatchtime.ToString("MM-dd-yyyy_hh_mm_ss");

string strFilename = "FailedExcel_" + strBatchProcesstime + ".csv";
string csvdownloadPath = Path.Combine(strDirectorypath, strFilename);
using (FileStream File_Stream = new FileStream(csvdownloadPath, FileMode.Create, FileAccess.Write, FileShare.ReadWrite))
{
    using (StreamWriter FileWriter = new StreamWriter(File_Stream))
    {
        FileWriter.BaseStream.Seek(0, SeekOrigin.End);
        string[] columns = { "Opportunity Name", "Property Id", "Error Type", "Error Message", "Time" };//set columns here as in the Excel Sheet.
        CreateColumns(FileWriter, columns);
        FileWriter.WriteLine();
        if (dtRecords.Rows.Count > 0)
        {
            for (int i = 0; i < dtRecords.Rows.Count; i++)
            {
                string[] values = { 
                    dtRecords.Rows[i]["OpportunityName"].ToString(), 
                    dtRecords.Rows[i]["PropertyId"].ToString(), 
                    dtRecords.Rows[i]["ErrorType"].ToString(), 
                    dtRecords.Rows[i]["ErrorMessage"].ToString(), 
                    dtRecords.Rows[i]["TimeStamp"].ToString() 
                };
                CreateColumns(FileWriter, values);
                FileWriter.WriteLine();
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:46:11.037

如果该目录不存在，则不会创建，因此您应该检查并创建：

```
if (!Directory.Exists(strDirectorypath)) {
  Directory.Create(strDirectorypath);
} 
```

通过对您自己的可靠性/健全性的检查程度来扩展它。

# java - 泛型类中的这些语句有什么区别？

> ID：15023384
> 
> 赞同：10
> 
> 时间：2013-02-22T11:41:35.720
> 
> 标签：java, generics

我仍在学习泛型并有一个问题。假设你有这个通用类：

```
public class Test<T> {

    public static void main (String[] args) {
        Test t1 = new Test();
        Test<String> t2 = new Test<String>();
        Test t3 = new Test<String>();
    }
} 
```

所有的语句都可以编译，但我真的不知道是什么让它们不同。谁能给我简要解释一下这三个陈述。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T11:45:52.740

```
Test t1 = new Test(); 
```

在这里，您使用的是**Raw 类型**。即，不`Type argument`为您`generic clas`的 s 传递一个。

编译器应该在这里给你一个警告

> 测试是原始类型。对泛型类型 Test 的引用应该被参数化

```
 Test<String> t2 = new Test<String>(); 
```

在这里，您使用的是泛型。将 String 作为 a 传递`type argument`给您的`generic class`.

```
 Test t3 = new Test<String>(); 
```

编译器也应该在这里给你一个警告：

> *   测试是原始类型。对泛型类型 Test 的引用应该被参数化

与您的第一种情况相同，但您在调用构造函数时使用了参数化类型。

还有另一个类在 +java 7 版本中运行良好。

```
 Test<String> t4 = new Test<>(); 
```

如果由于**类型推断而使用 + java 7，则此处没有编译器警告**

在这种情况下，由于引入了`type inference`泛型类型，因此您不需要在构造函数调用期间提供泛型类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T11:57:22.930

泛型为您提供编译时类型检查。

它有助于添加您可以/不能对您的项目做什么的示例（为了便于示例，我已更改为）`Test`：`ArrayList`

```
 ArrayList t1 = new ArrayList();
    ArrayList<String> t2 = new ArrayList();
    ArrayList t3 = new ArrayList<String>();

    // First list can have ANYTHING added to it
    // Compiler won't check because no generics
    t1.add(new Integer("7"));
    t1.add("Hello");

    // Second list can only have Strings added to it
    // Compiler will check and throw compile error for anything else
    t2.add(new Integer("7"));   // doesn't compile
    t2.add("Hello");

    // Third list is interesting...
    // Again, can have ANYTHING added to it
    // This is because generics (in Java...) are swapped out at COMPILE time
    //   rather than RUNTIME. The compiler can see that the actual type is just
    //   plain ArrayList
    // If you like, it's similar to doing: 
    //   Object o = (String) new Object(); 
    // The net-effect is everything reduced back to Object
    t3.add(new Integer("7"));  // fine
    t3.add("Hello"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T11:53:08.800

它们实际上都创建了**相同**的对象。唯一的区别是它们在其余代码中的语法处理方式。

`t1`并且`t3`将被以完全相同的方式处理，因为它们是相同的类型 - 它们将被视为具有 class 的对象`Test`，仅此而已。

`t2`在类型检查方面将受到更严格的对待。如果编译器有机会利用其通用`<String>`质量，那么也需要匹配该质量。

# zend-framework2 - Zend Framework 2 - 适配器

> ID：15023388
> 
> 赞同：1
> 
> 时间：2013-02-22T11:41:41.800
> 
> 标签：zend-framework2

我是 Zend Framework 的新手，我有一个问题。

我的 CMS 中有 20 个模块，所有模块都使用 APC 缓存适配器（在模块配置中定义），现在我想将此适配器更改为 Memcache。

有没有什么好的做法而不是改变所有的 config.module.php ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:19:20.867

如果您使用 DI/Service Manager 设置缓存/缓存适配器，那么您应该能够非常简单地通过更改 Service Manager 配置中的定义来更改它。

服务管理器配置：

```
 'My\Cache' => function($sm){
        $cache = \Zend\Cache\StorageFactory::factory(array(
            'adapter' => 'filesystem',
            'plugins' => array(
                'exception_handler' => array('throw_exceptions' => FALSE),
                'serializer'
            )
        ));

        $cache->setOptions(array(
            'cache_dir' => './data/cache',
            'ttl'       => 60*60,
        ));

        return $cache;
    }, 
```

然后，您可以在 SM 中更改适配器和设置。所有模块都将使用服务管理器来使用缓存，因此它们不需要任何进一步的更改。

一些模块：

```
<?php $cache = $this->getServiceManager()->get('My\Cache'); ?> 
```

# javascript - 带有下一个上一个和停止暂停/恢复按钮的 jquery 选框

> ID：15023399
> 
> 赞同：0
> 
> 时间：2013-02-22T11:41:57.650
> 
> 标签：javascript, jquery, jquery-plugins, plugins, marquee

我已经从以下链接下载了 jQuery 插件来显示选取框。

[http://www.givainc.com/labs/marquee_jquery_plugin.htm](http://www.givainc.com/labs/marquee_jquery_plugin.htm) (jquery.marquee.js)

现在我需要添加下一个上一个和暂停按钮。

我已经完成了暂停/恢复功能，但无法实现 Next Previous。以下是我已经实现的代码

```
if (options.PPS) {
            $("#btnPause").click(
            function() {
                // if hard paused, prevent hover events                
                if (paused) {
                    resume();
                }
                else {
                    // pause scrolling
                    pause();
                }
            });

            $("#btnRightLeft").click(
            this.next = function() {
                       showNext();
            });
        } 
```

或者，如果有任何其他这样的 jquery / JavaScript 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:02:48.233

找到了以下插件。

[www.jquerynewsticker.com](http://www.jquerynewsticker.com/)

但它的限制是它不支持长文本（只会显示可以在显示区域修复的文本，其余文本不会显示）

# ruby-on-rails - 无法将符号转换为整数或未定义的方法“键？” 对于零：NilClass

> ID：15023400
> 
> 赞同：0
> 
> 时间：2013-02-22T11:42:00.880
> 
> 标签：ruby-on-rails, ruby

```
User has_many => Client has_many => Contact, Website 
```

Everyghing 工作正常，但是当我添加模型网站时，出现错误：无法将符号转换为整数。

这是第一个错误：[https](https://gist.github.com/dmitrynesterov/5012728) ://gist.github.com/dmitrynesterov/5012728 这是第二个错误，刷新后：[https ://gist.github.com/dmitrynesterov/5012735](https://gist.github.com/dmitrynesterov/5012735)

客户端rb：[https ://gist.github.com/dmitrynesterov/5012848](https://gist.github.com/dmitrynesterov/5012848)

Clients_controller rb：[https ://gist.github.com/dmitrynesterov/5012856](https://gist.github.com/dmitrynesterov/5012856)

索引html erb：[https ://gist.github.com/dmitrynesterov/5012865](https://gist.github.com/dmitrynesterov/5012865)

显示 html erb：[https ://gist.github.com/dmitrynesterov/5012872](https://gist.github.com/dmitrynesterov/5012872)

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:48:32.153

您的第一个错误是由 client.rb 中的这一行引起的

```
has_many :contacts, :websites 
```

把它分成两行，你应该没问题。

```
has_many :contacts
has_many :websites 
```

包含第二个错误的堆栈跟踪后，我将更新我的答案

# asp.net - 如何使用 bind 对数据库进行一些更改

> ID：15023413
> 
> 赞同：0
> 
> 时间：2013-02-22T11:42:31.990
> 
> 标签：asp.net, databound-controls

我`Eval`在 ASP.NET 的数据绑定控件中使用方法。

`eval`和之间的主要区别`bind`是 eval 是只读的，我们不能更改数据库的东西 eval。

使用 bind 时，我们可以对数据库进行一些更改。

你能给我一个例子，我们可以使用 Bind 对数据库应用一些更改吗？

# android - Android，两个几乎相同的 BroadcastReceiver：都适用于 ICS 模拟器，只有一个适用于 JB 手机……但为什么？

> ID：15023414
> 
> 赞同：0
> 
> 时间：2013-02-22T11:42:32.400
> 
> 标签：android, broadcastreceiver

我有两个活动`BroadcastReceiver`。在`ICS`模拟器上都可以工作，`completeReceiver`而`clickReceiver`在我的手机上`JB`只有第一个可以工作。

我真的无法想象为什么。谢谢你的帮助。

（我尝试的是在: 中进行更改`ShareActivity.this`，但结果相同）。`context``AlertDialog.Buider`

```
public class ShareActivity extends Activity {
    // stuff
    @Override
    protected void onStart() {
        super.onStart();
        registerReceiver(completeReceiver, new IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE));
        registerReceiver(clickReceiver, new IntentFilter(DownloadManager.ACTION_NOTIFICATION_CLICKED));
        Log.v(DEBUG_TAG, "_onStart");
    }

    // other stuff

    BroadcastReceiver completeReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
                long id = intent.getLongExtra(DownloadManager.EXTRA_DOWNLOAD_ID, -2);
                if (enqueue != -1 && id != -2 && id == enqueue) {
                    Query query = new Query();
                    query.setFilterById(id);
                    dm = (DownloadManager) context.getSystemService(Context.DOWNLOAD_SERVICE);
                    Cursor c = dm.query(query);
                    if (c.moveToFirst()) {
                        int columnIndex = c.getColumnIndex(DownloadManager.COLUMN_STATUS);
                        int status = c.getInt(columnIndex);
                        if (status == DownloadManager.STATUS_SUCCESSFUL) {
                        AlertDialog.Builder helpBuilder = new AlertDialog.Builder(ShareActivity.this);
                        helpBuilder.setIcon(android.R.drawable.ic_dialog_info);
                        helpBuilder.setTitle(getString(R.string.information));
                        helpBuilder.setMessage(getString(R.string.download_complete_dialog_msg1) + titleRaw + getString(R.string.download_complete_dialog_msg2));
                        helpBuilder.setPositiveButton(getString(R.string.download_complete_dialog_positive), new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface dialog, int which) {

                                Intent v_intent = new Intent();
                                v_intent.setAction(android.content.Intent.ACTION_VIEW);
                                v_intent.setDataAndType(videoUri, "video/*");
                                startActivity(v_intent);
                            }
                        });

                        helpBuilder.setNegativeButton(getString(R.string.dialogs_negative), new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface dialog, int which) {
                                    // cancel
                            }
                        });

                        AlertDialog helpDialog = helpBuilder.create();
                        if (! ((Activity) context).isFinishing()) {
                                helpDialog.show();
                        }
                    }
                }
            }
        }
    };

    BroadcastReceiver clickReceiver = new BroadcastReceiver() {

            @Override
            public void onReceive(Context context, Intent intent) {
                    long id = intent.getLongExtra(DownloadManager.EXTRA_DOWNLOAD_ID, -2);
                    if (enqueue != -1 && id != -2 && id == enqueue) {
                            Query query = new Query();
                            query.setFilterById(id);
                            dm = (DownloadManager) context.getSystemService(Context.DOWNLOAD_SERVICE);
                            Cursor c = dm.query(query);
                            if (c.moveToFirst()) {
                                    int columnIndex = c.getColumnIndex(DownloadManager.COLUMN_STATUS);
                                    int status = c.getInt(columnIndex);
                                    if (status == DownloadManager.STATUS_RUNNING ||
                                            status == DownloadManager.STATUS_PAUSED ||
                                            status == DownloadManager.STATUS_PENDING) {
                                AlertDialog.Builder helpBuilder = new AlertDialog.Builder(ShareActivity.this);
                                helpBuilder.setIcon(android.R.drawable.ic_dialog_info);
                                helpBuilder.setTitle(getString(R.string.cancel_download_dialog_title));
                                helpBuilder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface dialog, int which) {
                                    dm.remove(enqueue);
                                    Log.d(DEBUG_TAG, "download cancelled");
                            }
                        });

                        helpBuilder.setNegativeButton(getString(R.string.dialogs_negative), new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface dialog, int which) {
                                    // cancel
                            }
                        });

                        AlertDialog helpDialog = helpBuilder.create();
                        if (! ((Activity) context).isFinishing()) {
                                helpDialog.show();
                        }
                    }
                }
            }
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:56:53.700

它与我正在使用的 CyanogenMod 相关的问题。特别是包 CM 更新程序应该参与。在手机启动时，直到更新程序应用程序从未运行，接收器才能工作。第一次访问更新程序后，我上面的应用程序的接收器停止工作。

这是来自 cmupdater 接收器：

接收者：

```
package com.cyanogenmod.updater.receiver;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

import com.cyanogenmod.updater.UpdatesSettings;

public class NotificationClickReceiver extends BroadcastReceiver{
     private static String TAG = "NotificationClickReceiver";

     @Override
     public void onReceive(Context context, Intent intent) {

         // Bring the main app to the foreground
         Intent i = new Intent(context, UpdatesSettings.class);
         i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP |
                 Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
         context.startActivity(i);
     }
 } 
```

显现：

```
 <receiver android:name="com.cyanogenmod.updater.receiver.NotificationClickReceiver">
        <intent-filter>
            <action android:name="android.intent.action.DOWNLOAD_NOTIFICATION_CLICKED"/>
            <category android:name="android.intent.category.HOME"/>
        </intent-filter>
    </receiver> 
```

I changed my code to bring the system download manager to the front, when clicking on a download from the notification bar. if cmupdater is running, it is called instead. then, nothing is called. this led me to think a about the probable link between them.

maybe this is not a proper answer, because I don't have a solution. but that's it. all has been tested also on another device with the same ROM. while on emulator all works OK.

# asp.net-mvc - 当项目在 IIS 下运行时，如何从 JavaScript 调用控制器方法？

> ID：15023416
> 
> 赞同：0
> 
> 时间：2013-02-22T11:42:43.863
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我想调用 JavaScript 函数来计算选中的复选框，在这个函数中，我必须调用一个语句来调用控制器的 actionresult 方法，并以活动用户和非活动用户的身份执行某些功能，最后返回 view()

这是我的代码：

```
if (state == "Dec") {
    alert("Hello..Dear..you are DeActive");
    $.post('@Url.Action("UserDeactive","Admin", new{})' + '?Id=' + strvalue);
} 
```

当我按 F5 运行项目时，此语句在正常项目中运行良好，也使用 VS localhost。

但是当我在 IIS 中托管我的项目时，为了在 LAN 中访问，这不是工作保持 java 脚本调用，但此语句不是调用，也不是导航到操作结果方法..用于执行某些功能..！所以请我......亲爱的......！如果你有任何想法.!

这是我的控制器方法：-

```
 public ActionResult UserActive(string Id)
    {

        int[] numbers = Id.Split(',').Select(n => int.Parse(n)).ToArray();

        if (numbers != null)
        {
            foreach (int id in numbers)
            {
                User_Master u_master = db.User_Masters.Find(id);
                if (u_master.Is_active == "false")
                {
                    u_master.Is_active = "true";
                    db.Configuration.ValidateOnSaveEnabled = false;
                    db.SaveChanges();

                }

            }

        }

        return RedirectToAction("Dashboard", "Home");

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:53:52.403

使用该[`$.post()`](http://api.jquery.com/jQuery.post/)方法的第二个参数，它允许您向服务器发布附加参数：

```
var url = '@Url.Action("UserDeactive", "Admin")';
$.post(url, { id: strvalue }, function(result) {
    // handle the result of the AJAX call
}); 
```

# facebook-graph-api - 从提要中的 facebook 链接获取更大的图片

> ID：15023419
> 
> 赞同：1
> 
> 时间：2013-02-22T11:42:47.423
> 
> 标签：facebook-graph-api

我正在从页面解析 facebook 提要，并从 data.picture 提要中获取图片；如果提要中有图片链接

这就是我获取数据函数 getFeeds(Token) {

```
var row;
var tableData = [];
var json, data, name, picture, description, likes;

Ti.Facebook.requestWithGraphPath(Titanium.App.Properties.getString("pageID") +'/feed', {access_token: Token}, 'GET', function(e){
    if (e.success) {
        json = JSON.parse(e.result);
        for (i = 0; i < json.data.length; i++) {
        if (json.data[i].message) {
                    row = addRow(json.data[i]); 
                    tableData.push(row); 
                    }
            //  }

       } activityScreen.hide();
        table.setData(tableData);
    } else {
        if (e.error) {
            //alert(e.error);
        } else {
            alert("#serverfail...");
        }
    }
});
} 
```

我得到的图片太小了。

我怎样才能获得更大的图片？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T16:19:54.967

如果您不想发出第二个图形请求，您只需将图片 URL 末尾的 s 替换为 n。

所以[http://photos-h.ak.fbcdn.net/hphotos-ak-ash3/12345_12345_12345_s.jpg](http://photos-h.ak.fbcdn.net/hphotos-ak-ash3/12345_12345_12345_s.jpg)变成了 所以[http://photos-h.ak.fbcdn.net/hphotos-ak-ash3/12345_12345_12345_n.jpg](http://photos-h.ak.fbcdn.net/hphotos-ak-ash3/12345_12345_12345_n.jpg)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T15:27:56.427

为了从页面提要帖子中获得更大的图片，首先您需要检查提要的类型，如果类型等于照片，那么您可以在返回结果中找到额外的“对象id”。因此，如果您发送另一个图形 api 调用，请使用此对象 ID。在返回结果中，您将拥有名为“图像”的字段。在图像下，您将有多个尺寸的图像从那里您可以选择所需的尺寸。“图片”字段中的默认值是缩略图大小的图片，这就是您的图片尺寸很小的原因。（[在 fb 页面中，查看示例链接](https://developers.facebook.com/docs/reference/api/page/)）

```
https://graph.facebook.com/feed ===>

 "picture": "https://fbexternal-a.akamaihd.net/safe_image.php?d=AQB3Wv9mtyMdfNfw&w=90&h=90&url=https%3A%2F%2Fgeneralassemb.ly%2Fassets%2Fstatic%2FWin-A-Trip-To-SF-94fb4a6d732c86534f23e9a9ec2c2d4d.jpg", 
  "link": "https://generalassemb.ly/win/trip-to-sf", 
  "name": "Break Into the Big Leagues", 
  "type": "link", 
```

* * *

```
"type": "photo", 
      "status_type": "added_photos", 
      "object_id": "10151322059288553", 
```

如果你使用这个“object_id”

```
 https://graph.facebook.com/10151322059288553

 "height": 300, 
  "width": 720, 
  "images": [
    {
      "height": 853, 
      "width": 2048, 
      "source": "https://fbcdn-sphotos-b-a.akamaihd.net/hphotos-ak-prn1/s2048x2048/16985_10151322059288553_286780821_n.jpg"
    }, 
    {
      "height": 392, 
      "width": 940, 
      "source": "https://fbcdn-sphotos-b-a.akamaihd.net/hphotos-ak-prn1/16985_10151322059288553_286780821_n.jpg"
    }, 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-15T02:00:22.860

据我所知，您无法更改 safe_image.php 链接返回的照片的大小，因此如果链接不是 Facebook 对象，您能做的最好的事情就是提取“url”查询字符串变量从链接中，对其进行 urldecode 并获取原始图片。

例如，如果您的 URL（来自帖子的“图片”属性）是

```
https://fbexternal-a.akamaihd.net/safe_image.php?d=AQBMV0YW8BCmCBMB&w=154&h=154&url=https%3A%2F%2Ffbstatic-a.akamaihd.net%2Frsrc.php%2Fv2%2Fy6%2Fr%2FYQEGe6GxI_M.png 
```

并存储在变量`url`中，那么这应该返回全尺寸图像的 URL：

```
decodeURIComponent(url.match(/(url=)(.+)$/)[2]); 
```

# magento - 如何将最近查看的产品框添加到主页？

> ID：15023422
> 
> 赞同：0
> 
> 时间：2013-02-22T11:42:55.803
> 
> 标签：magento, layout, content-management-system, sidebar

这是一个完全简单的问题，但我无法解决它。

我尝试了以下方法：

将布局 xml 添加到此 cms 页面后端的更新布局字段中：

```
<reference name="right">
  <block type="reports/product_viewed" before="right.permanent.callout" name="right.reports.product.viewed" template="reports/product_viewed.phtml" />
</reference> 
```

或在 local.xml 中相同

```
<cms_index_index>
    <reference name="right">
      <block type="reports/product_viewed" before="right.permanent.callout" name="right.reports.product.viewed" template="reports/product_viewed.phtml" />
    </reference>
</cms_index_index> 
```

非常感谢，我知道它并不复杂，但我无法理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:57:51.117

以下是一些检查：

1.  检查您的页面是使用右两列还是三列布局。

2.  清除缓存

3.  直接将您的布局更新添加到 cms.xml 并清除缓存。

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T10:29:52.327

您可能错过了在自定义主页模板文件中回显该块？

```
echo $this->getChildHtml('right.reports.product.viewed'); 
```

或者您的主页可能使用 2-template left 或其他没有“right”内容块的模板。

# linux - {} \; 是什么？在unix命令中是什么意思？

> ID：15023425
> 
> 赞同：0
> 
> 时间：2013-02-22T11:43:11.637
> 
> 标签：linux

菜鸟问题

例如：

> 查找 /home/user/demo -type f -perm 777 -print -exec chmod 755 {} \;

我想我理解这段代码的作用——它递归地将文件权限从 777 更改为 755。但我不明白从哪里来`{} \;`。那是 exec 或 find 的一部分吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:16:51.773

花括号是 find 命令使用的占位符，用于知道在何处插入当前正在使用的文件的文件名。

find 命令查找“;” 显示它必须为每个文件执行的命令在哪里结束。

我们在它前面放了一个\（称为转义），这样shell（即bash）就不会解释它，并将它隐藏起来以防查找。

# linux - 在脚本中更改 linux 密码，悄悄地

> ID：15023432
> 
> 赞同：6
> 
> 时间：2013-02-22T11:43:20.270
> 
> 标签：linux, bash, shell, unix, passwd

作为尝试在我的 root ssh 会话中实施安全措施的一部分，我正在尝试设计一种在 root 用户登录 n 秒后启动脚本的方法，并更改用户密码并自动注销用户。

我一直在尝试默默地更改密码。我有以下代码：

```
echo -e "new\nnew" | passwd -q 
```

这不是像手册页中提到的那样“悄悄地”更改密码，而是输出以下内容：

```
~/php-pastebin-v3 #echo -e "new\nnew" | passwd -q
Enter new UNIX password: Retype new UNIX password: passwd: password updated successfully 
```

这没有多大帮助。

我试图管道标准输出和标准错误，但我认为我误解了管道。

```
~/php-pastebin-v3 #echo -e "new\nnew" | passwd -q > /dev/null
Enter new UNIX password: Retype new UNIX password: passwd: password updated successfully

~/php-pastebin-v3 #echo -e "new\nnew" | passwd -q /dev/null 2>&1
passwd: user '/dev/null' does not exist 
```

通过脚本悄悄地更改密码的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-10T19:53:19.937

如果要同时重定向 stdout 和 sterr：

```
echo "..." | passwd &> /dev/null 
```

这相当于

```
echo "..." | passwd > /dev/null 2>&1 
```

这意味着“将标准输出重定向到 /dev/null，然后将（复制）标准错误重定向到标准输出”。通过这种方式，您将 stdout 和 stderr 都重定向到 null ...但这可能还不够（我相信在这种情况下会如此）。但理论上程序可能会直接写入终端。例如这个脚本

```
$ cat test.sh
echo stdout
echo stderr 1 1>&2
echo stderr 2 >/dev/stderr
echo stderr 3 >/dev/fd/2
echo bad luck > /dev/tty

$ ./test.sh &> /dev/null
bad luck 
```

要摆脱此输出，您必须强制程序在伪终端中运行，例如[http://empty.sourceforge.net/](http://empty.sourceforge.net/)。但这只是一个旁注 &> /dev/null 可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-15T19:43:07.203

你也可以这样做：

```
mkpasswd
# Password:blah
# BVR2Pnr3ro5B2

echo "user:BVR2Pnr3ro5B2" | chpasswd -e 
```

所以密码已经在脚本中加密了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:46:47.600

这对我有用

```
echo "passssssword" | passwd root --stdin > /dev/null 
```

*注意：* `--stdin`仅适用于root用户

# java - 从 java 反射方法调用中转换返回

> ID：15023433
> 
> 赞同：3
> 
> 时间：2013-02-22T11:43:20.287
> 
> 标签：java, list, generics, reflection, hashmap

我正在尝试编写一个通用方法，该方法将基于通过反射调用方法来散列对象列表。这个想法是调用者可以指定哪个方法将生成散列密钥。我的问题是我想避免使用 @SuppressWarnings("unchecked") 注释。所以本质上我想找到一种方法让method.invoke返回一个T2类型的对象而不是Object。提前感谢您的帮助。

```
public static <T1, T2> HashMap<T2, T1> hashFromList(
        List<T1> items_to_be_hashed,
        String method_name_to_use_to_generate_key) {
    HashMap<T2, T1> new_hashmap = new HashMap<>(items_to_be_hashed.size() + 5, 1);
    for (T1 object_to_be_hashed : items_to_be_hashed) {
        try {
            //Call the declared method for the key
            Method method = object_to_be_hashed.getClass().getDeclaredMethod(method_name_to_use_to_generate_key);
            @SuppressWarnings("unchecked")
            T2 key = (T2) method.invoke(object_to_be_hashed);
            new_hashmap.put(key, object_to_be_hashed);
        } catch (NoSuchMethodException | SecurityException | IllegalAccessException | IllegalArgumentException | InvocationTargetException exception) {
            exception.printStackTrace();
        }
    }
    return new_hashmap;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T11:45:48.937

避免抑制警告并进行*真正*的强制转换（这会发现问题）的唯一方法是`T2`在执行时知道，您可以通过一个额外的参数来做到这一点：

```
... hashFromList(List<T1> itemsToHash,
                 String generationMethod,
                 Class<T2> clazzT2) 
```

然后您可以使用[`Class.cast`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#cast%28java.lang.Object%29)：

```
T2 key = clazzT2.cast(method.invoke(objectToHash)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:45:53.313

引入一个接口，该接口将为您返回一个密钥

```
// T1 = key, T2 = object type
public interface KeyGenerator<T1, T2> {
  T1 generateKey(T2 object);
} 
```

并让您的密钥生成器实现该接口，然后您可以将标题更改为

```
public static <T1, T2> HashMap<T2, T1> hashFromList(
        List<T1> items_to_be_hashed,
        KeyGenerator<T2, T1> keyGenerator) { 
```

并将代码更改为

```
 T2 key = keyGenerator.generateKey(object_to_be_hashed); 
```

这也意味着您可以删除 NoSuchMethod 异常，因为您现在应该在对象上进行静态类型（但显然您仍然可以获得 NPE）

希望这有帮助；并且应该注意的是，通常反射并不总是放入代码中的好东西！明智地使用它:)

# android - 如何专注于列表视图的项目，触摸屏幕并上下移动手指而不触摸它 - Android

> ID：15023434
> 
> 赞同：0
> 
> 时间：2013-02-22T11:43:23.613
> 
> 标签：android, android-listview

我有一个带有两列的列表视图，用户可以在其中将 productName 和 prostQty 与股票进行比较。该列表中有很多产品，用户可能会混淆所有这些产品。因此，这个想法是通过使用焦点来突出产品及其价格。

有谁知道是否可以像在虚拟键盘上一样在列表视图中实现它（它不是 onLongTouch 或单击）？

任何人都可以提示如何做到这一点？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:53:17.940

好的，就像在车轮选择器 iPhone 的情况下，我们可以突出显示产品，只需按照以下步骤操作

1.  实现列表的 onscrollchangedlistener 。
2.  将列表放在相对布局中，在 centerinparent 和 fillparent 的另一个视图中，您将显示突出显示的项目。

3.  当列表滚动时，在覆盖的 onscroll 方法中更新该视图上的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:06:10.703

您需要使用 View Holder Pattern。您可以在 Google 上找到更多信息。

只需在每一行上创建一个名为 的类`AdapterViewHolder`，声明属性。`Views`

例如：

```
public class AdapterViewHolder
{

    ImageView myImageView;

    TextView myTextView;

    ...

} 
```

在构造函数中将您的值传递给设置`views`，初始化`views`并设置您的值，例如：

```
public AdapterViewHolder(String param, Drawable imageDrawable){

// set values to views

} 
```

在`getView`方法中的适配器中：

```
if convertView == null 

//then create your layout and holder class, set your holder to your layout by view.setTag method, prepare your view and return it

else

//get your layout tag by view.getTag(), cast it to AdapterViewHolder and update your views and values of them as you like and then return updated view. 
```

有关更多信息，请在 android listviews 中搜索 ViewHolder Pattern。

# wpf - 如何将 DataTemplate 数据类型绑定到接口？

> ID：15023441
> 
> 赞同：31
> 
> 时间：2013-02-22T11:43:44.350
> 
> 标签：wpf, types, interface, bind, datatemplate

我正在编写一个复合松散耦合的 MVVM WPF 应用程序，父 VM 中的子 VM 是接口而不是类实例，例如

```
public IChildViewModel { get; set; } 
```

现在如何使用 DataTemplate 呈现此属性？喜欢：

```
<DataTemplate DataType="{x:Type contracts:IChildViewModel}"> 
```

我理解由于接口的性质（多重继承等），WPF 不允许这种直接绑定。但是由于接口应该在松散耦合的应用程序中广泛使用，是否有任何解决方法可以将 DataTemplate 绑定到接口？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-03T11:19:05.843

您可以通过明确告诉 wpf 您正在绑定到接口字段来绑定到接口：

（请注意，ViewModelBase 只是一个实现 INotifyPropertyChanged 接口的基类）

```
public class Implementation : ViewModelBase, IInterface
{
    private string textField;

    public string TextField
    {
        get
        {
            return textField;
        }
        set
        {
            if (value == textField) return;
            textField = value;
            OnPropertyChanged();
        }
    }
}

public interface IInterface
{
    string TextField { get; set; }
} 
```

然后在 ViewModel 上：

```
private IInterface interfaceContent;
public IInterface InterfaceContent
{
    get { return interfaceContent; }
} 
```

最后是使它成为可能的 Xaml：

```
<ContentControl Grid.Row="1" Grid.Column="0" Content="{Binding InterfaceContent}">
    <ContentControl.ContentTemplate>
        <DataTemplate DataType="{x:Type viewModels:IInterface}">
            <TextBox Text="{Binding Path=(viewModels:IInterface.TextField)}"/>
        </DataTemplate>
    </ContentControl.ContentTemplate>
</ContentControl> 
```

如您所见，绑定明确引用了“IInterface”定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-12T15:46:27.497

`DataTemplateSelector`在这种情况下，似乎使用 a是一种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-28T13:02:50.793

我在 uwp 中的数据模板中使用了带有接口类型的绑定。我没有在绑定路径上明确指定接口类型。当接口没有显式实现时，它可以工作。当接口被显式实现时，它会默默地失败。我相信如果接口是显式实现的，那么就需要在 Binding 路径中​​显式引用接口类型，这样 Binding 才能正确查找属性路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-23T12:09:18.343

您可以将接口转换为等效的抽象类。它以这种方式工作。

# python - 检查具有 OneToOneField 的对象是新的还是已经存在

> ID：15023443
> 
> 赞同：2
> 
> 时间：2013-02-22T11:43:48.647
> 
> 标签：python, django, orm, django-models

检查对象是否为新对象的常见模式是测试：

```
self.pk is not None 
```

如[在 django 模型自定义 save() 方法中所述，您应该如何识别新对象？](https://stackoverflow.com/questions/907695/in-a-django-model-custom-save-method-how-should-you-identify-a-new-object)

但是当对象与其他对象一对一关系时，它就不是真的了，比如说：

```
class X(models.Model):
     bla = models.OneToOneField(Bla) 
```

然后，如果我想创建这个对象实例并将其保存到数据库中，我会这样做：

```
x = X(bla=someBla)
x.save() 
```

而且 x.pk 从一开始就不是空的，而是 x.pk = someBla.pk 。

那么有没有可能检查这样一个对象是新的还是编辑过的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:34:19.353

```
new  =  not bool(X.objects.filter(pk=self.pk).count()) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T12:02:56.143

`self.pk`在这种情况下，in save 方法将为 None ，但请确保在类 X 的 save() 方法中调用 super.save()**之前检查这一点。**

# java - 如何在 Jboss-7 中部署 Axis2.war

> ID：15023444
> 
> 赞同：2
> 
> 时间：2013-02-22T11:43:52.963
> 
> 标签：java, deployment, jboss, jboss7.x, web-deployment

大家好，我是 jboss-7 的新手，我在 jboss-7 文件夹结构中部署了axis2.war，`jboss-as-7.1.0.Final/standalone/deployments` 我已将axis2.war 放在文件夹部署中。

这是我的日志文件：

```
 =========================================================================

16:04:18,897 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
16:04:20,402 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
16:04:20,590 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.0.Final "Thunder" starting
16:04:28,285 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
16:04:28,285 INFO  [org.xnio] XNIO Version 3.0.3.GA
16:04:28,382 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
16:04:28,441 INFO  [org.jboss.remoting] JBoss Remoting version 3.2.2.GA
16:04:28,561 INFO  [org.jboss.as.configadmin] JBAS016200: Activating ConfigAdmin Subsystem
16:04:28,706 INFO  [org.jboss.as.security] JBAS013101: Activating Security Subsystem
16:04:28,710 INFO  [org.jboss.as.clustering.infinispan] JBAS010280: Activating Infinispan subsystem.
16:04:28,722 INFO  [org.jboss.as.naming] JBAS011800: Activating Naming Subsystem
16:04:28,730 INFO  [org.jboss.as.webservices] JBAS015537: Activating WebServices Extension
16:04:28,737 INFO  [org.jboss.as.osgi] JBAS011940: Activating OSGi Subsystem
16:04:28,766 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
16:04:29,656 INFO  [org.jboss.as.connector] (MSC service thread 1-1) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.7.Final)
16:04:30,862 INFO  [org.jboss.as.naming] (MSC service thread 1-1) JBAS011802: Starting Naming Service
16:04:30,904 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
16:04:31,000 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-1) JBAS015400: Bound mail session [java:jboss/mail/Default]
16:04:31,533 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-3) JBoss Web Services - Stack CXF Server 4.0.1.GA
16:04:32,365 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-3) Starting Coyote HTTP/1.1 on http--127.0.0.1-8080
16:04:33,251 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-3) JBAS015012: Started FileSystemDeploymentService for directory /home/vivekray/Desktop/jboss-as-7.1.0.Final/standalone/deployments
16:04:33,304 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015003: Found axis2.war in deployment directory. To trigger deployment create a file called axis2.war.dodeploy
16:04:33,314 INFO  [org.jboss.as.remoting] (MSC service thread 1-3) JBAS017100: Listening on /127.0.0.1:9999
16:04:33,316 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on /127.0.0.1:4447
16:04:34,048 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-2) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
16:04:34,113 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: JBoss AS 7.1.0.Final "Thunder" started in 17065ms - Started 134 of 205 services (70 services are passive or on-demand) 
```

Axis2.war 部署成功，但是如果我请求 URL`http://127.0.0.1:8080/axis2`

我收到此错误：

```
HTTP Status 404 - /axis2
type Status report
message /axis2
description The requested resource (/axis2) is not available. 
```

我的问题是：这个 URL 是错误的还是我在部署期间犯了一些错误。请给我一些建议。

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:36:55.663

> Axis2.war 部署成功

不。

它只是说：

> 要触发部署，请创建一个名为 axis2.war.dodeploy 的文件

# security - 在 CakePHP 上编辑黑洞消息

> ID：15023449
> 
> 赞同：1
> 
> 时间：2013-02-22T11:44:03.353
> 
> 标签：security, cakephp, csrf

在 CakePHP 上，打开组件安全性和 CSRF，当组件捕获到它认为是攻击的东西时，它会抛出错误消息。

> 请求被黑洞
> 
> 错误：在此服务器上找不到请求的地址“/登录”。

即使`debug`设置为`0`，也会显示错误消息。这对普通用户没有任何意义，并且可能会使任何人感到困惑，因为毕竟请求的地址是存在的。

有没有办法在不接触 CakePHP 核心代码的情况下编辑该消息？或者也许重定向到`$this->data`空的推荐人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:10:56.457

您可以编辑文件夹中的`error400.ctp`and并覆盖消息。`error500.ctp``app/View/Errors/`

# avfoundation - macruby AVPlayer addBoundaryTimeObserverForTimes

> ID：15023451
> 
> 赞同：2
> 
> 时间：2013-02-22T11:44:06.847
> 
> 标签：avfoundation, avplayer, macruby

我在使用 AVFoundation AVPlayer 添加边界时间观察者时遇到了一个奇怪的问题。

```
 player = AVPlayer.playerWithURL(NSURL.URLWithString(someurl))
 player.play()
 player.addBoundaryTimeObserverForTimes([NSValue.valueWithCMTime(CMTimeMake(1,1))], queue: nil, usingBlock: -> { puts 'success' } ) 
```

在 XCode 中执行这段代码时，添加观察者时，它属于调试汇编代码，而控制台没有错误。有人遇到过这样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-20T15:05:55.777

我像这样使用它并且它有效：

```
__block AVPlayer* blockPlayer = self.player;        //player is already initialised and set up; 
__block id obs;

// Setup boundary time observer to trigger when audio really begins,
// specifically after 1/3 of a second playback

obs = [self.player addBoundaryTimeObserverForTimes: @[[NSValue valueWithCMTime:CMTimeMake(1, 10)]]
                                             queue:NULL
                                        usingBlock:^{

                                           // Raise a notificaiton when playback has started
                                           [[NSNotificationCenter defaultCenter] postNotificationName:PLAYBACK_STARTED_NOTIFICATION object:nil];

                                           // Remove the boundary time observer
                                           [blockPlayer removeTimeObserver:obs];
                                       }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-16T05:32:30.003

如果您仔细阅读文档，您会看到此方法返回：

> **返回值**：作为参数传递给 removeTimeObserver: 以停止观察的不透明对象。

后来：

> **只要您希望播放器调用时间观察器，就必须保留返回的值。**此方法的每次调用都应与对 removeTimeObserver 的相应调用配对：

您的问题是您没有保留该方法的返回值，您只是调用该方法，因此播放器没有调用时间观察器。

使用 __block 变量实际上应该在这里工作

```
player = AVPlayer.playerWithURL(NSURL.URLWithString(someurl))
player.play()

__block id observer = player.addBoundaryTimeObserverForTimes([NSValue.valueWithCMTime(CMTimeMake(1,1))], queue: nil, usingBlock: ->
{
    puts 'success'
    player.removeTimeObserver(observer) // IMPORTANT, but careful. Read below*
} ) 
```

**下面***：正如Apple所强调的，你需要调用removeTimeObserver，对我来说最有意义的地方是完成块，但是，至少在Obj C和Swift以及大多数其他语言中，这会导致一个保留周期. 您可以在 Obj C 和 Swift 中通过将观察者和播放器声明为[块变量](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW6)来解决此问题，以便您可以从块内安全地引用它们。

如果您可以找到其他地方安全地调用 removeTimeObserver 方法，那么您不必担心这一点。

无论如何，当播放器进入歌曲/视频 1 秒时，上述代码将执行该块。

另请注意：

> AV Foundation 不保证在每个间隔或边界通过时调用您的块。如果先前调用的块的执行尚未完成，则 AV Foundation 不会调用块。因此，您必须确保您在块中执行的工作不会对系统造成过多的负担。

我认为这不适用于您，但可能适用于添加了多个时间间隔/边界的其他人。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T23:05:23.437

也许它真的需要一些队列作为参数传递

尝试这个：

```
dispatch_queue_t myQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

[player addBoundaryTimeObserverForTimes:[NSValue.valueWithCMTime(CMTimeMake(1,1))]
                                  queue: myQueue
                             usingBlock: -> { puts 'success' }]; 
```

# linux - 使用带有感叹号的命令重复时如何隐藏命令？

> ID：15023453
> 
> 赞同：0
> 
> 时间：2013-02-22T11:44:13.017
> 
> 标签：linux, bash, command-line

当我使用！要执行先前的命令，它也会自动打印该命令。有没有办法隐藏这个？

示例：
会发生以下情况：

```
ralgrad:~$ echo test
test
ralgrad:~$ !!
echo test
test 
```

这就是我想要的：

```
ralgrad:~$ echo test
test
ralgrad:~$ !!
test 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:55:12.917

我查看了 bash 源代码，无法禁用扩展命令的自动打印。您必须编译自己的 bash 版本！

如果出于某种原因它对您特别重要，请查看`bashhist.c`函数`pre_process_line`并注释/删除以下行：

```
printf (stderr, "%s\n", history_value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:09:17.740

你不能这样做`!!`，因为它重复*最后一个命令*而不是*最后一个输出*。据我所知，没有一个命令可以实现您的要求。但是，您可以尝试一个简单的 hack：

```
result=`echo test`
echo "$result" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:57:00.170

好吧，您可以使用以下批处理文件模拟您想要的内容：

```
if [ -z $1 ]; then
exe=`fc -lrn | awk 'NR==2 {print;}'`
else
exe=`fc -lrn | cut -f2- | awk 'NR>=2 {print;}' | grep "^ $*" | head -n1 `
fi
eval $exe 
```

让`h`成为文件的名称（或者，如果需要，甚至`!`）。然后你可以这样做：

```
# echo Foo
Foo
# echo Bar
Bar
# h 
Bar
# h echo F
Foo 
```

# sql - 如何组合来自存储函数的信息

> ID：15023460
> 
> 赞同：2
> 
> 时间：2013-02-22T11:44:22.860
> 
> 标签：sql, sql-server, function, sql-server-2005

我有一个佣金报告功能，可以获取员工的所有日常销售信息。 `fCommissionINFO` 我想做的是根据输出获取不同的信息并创建佣金报告。例如，该功能获取总客户数、特定销售的描述。我想做的是统计总销售额、特定销售额的总数和特定销售额的百分比。例如......如果“Sara”的总销售额为“100”......在这 100 个销售额中，她有 3 个服务“x”（总计 3%）、5 个服务 Y（5%）、6 个服务“z”（6%）等等等等……

我最初的 2 个存储函数调用是：

```
Select UserName, SUM(CarCount) AS Cars
FROM dbo.fCommissionINFO(@startdate, @endate, 'ALL', 'ALL', '1', 'ALL', 'Combined', '0') AS fCommissionINFO_1
WHERE (Services > 0)
GROUP BY UserName 
```

和

```
SELECT COUNT(Description) AS [service x]
FROM dbo.fCommissioninfo(@startdate, @endate, 'ALL', 'ALL', '1', 'ALL', 'Combined', '0') AS fCommissionINFO_1
WHERE (Description = 'service x') 
```

我如何将这些结合起来，并结合第三个与用户名对齐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:23:25.240

你需要这个查询

```
 SELECT UserName,            
        (SUM(COUNT(CASE WHEN Description = 'service x' THEN 1  END)) OVER() * 100) /
        SUM(CASE WHEN [Services] > 0 THEN CarCount END) AS percentage
 FROM dbo.fCommissioninfo(@startdate, @endate, 'ALL', 'ALL', '1', 'ALL', 'Combined', '0') AS fCommissionINFO_1
 GROUP BY UserName 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/d41d8/10228)上的简单示例[](http://sqlfiddle.com/#!3/d41d8/10228)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:22:02.633

```
Select UserName, SUM(CarCount) AS Cars, COUNT(Description) AS [service x]
FROM dbo.fCommissionINFO(@startdate, @endate, 'ALL', 'ALL', '1', 'ALL', 'Combined', '0') AS fCommissionINFO_1
WHERE (Services > 0)
GROUP BY UserName, Description 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T13:03:09.130

我相信以下应该可以解决问题。请注意将 where 子句提升到计数内部。这是因为如果有一行的服务 <= 0 并且描述为“服务 x”，它将被顶部查询排除并包含在底部查询中。因此，通过简单地组合查询，您可以获得不同的结果，具体取决于您的数据。

```
Select UserName, 
SUM(CASE WHEN Services > 0 THEN CarCount ELSE 0 END) AS Cars,
COUNT(CASE Description = 'service x' THEN 1 ELSE 0 END) 
FROM            dbo.fCommissionINFO(@startdate, @endate, 'ALL', 'ALL', '1', 'ALL', 'Combined', '0') AS fCommissionINFO_1
GROUP BY UserName 
```**

# linux - Oprofile 和 gprof 输出因相同代码而异

> ID：15023463
> 
> 赞同：1
> 
> 时间：2013-02-22T11:44:27.053
> 
> 标签：linux, profiling, centos, gprof, oprofile

我正在运行我的代码 AMD optron 6270 机器。操作系统是 Centos 6.2 版本。我做了一个简单的程序

```
#include<stdio.h>
#include<stdlib.h>
int calling (long a);
int calling1 (long a);
int calling2 (long a);
int calling3 (long a);
int calling4 (long a);
int calling5 (long a);

void main()
{
    long a,b=0;
    printf("hi");
    for (a=0; a<10000000; a++) b++;
    b =Calling(a);
    b =Calling5(a);
    b =Calling4(a);

}

int Calling(long a)
{
    long b=0;
    for (a=0; a<100; a++) b = Calling1(a);
    return 0;
}

int Calling1(long a)
{
    long b=0;

    for (a=0; a<10000000; a++) b++;
    b =Calling2(a);
    return 0;
}

int Calling2(long a)
{
    long b=0;
    for (a=0;a<10000000;a++) b++;

    b =Calling3(a);
    return 0;
}
int Calling3(long a)
{
    long b=0;
    for (a=0;a<10000000;a++) b++;
    b =Calling4(a);
    return 0;
}
int Calling4(long a)
{
    long b=0;
    for (a=0; a<10000000; a++) b++;
    return 0;
}

int Calling5(long a)
{
    long b=0;
    for (a=0; a<10000000; a++) b++;
    b=0;
    for (a=0; a<10000000; a++) b++;
    b=0;
    for (a=0 ;a<10000000; a++) b++;
    b=0;
    for (a=0; a<10000000; a++) b++;
    b=0;
    return 0;
} 
```

在使用 gprof 和 Oprofile 分析此代码时。我得到了不同的报告。假设我使用 gprof 运行 main.exe 两次：第一次使用 gprof 平面配置文件报告：

每个样本计为 0.01 秒。

```
 %   cumulative   self              self     total           
 time   seconds   seconds    calls   s/call   s/call  name

 24.80      2.96     2.96      101     0.03     0.03  Calling4
 24.71      5.91     2.95      100     0.03     0.12  Calling1
 24.63      8.84     2.94      100     0.03     0.06  Calling3
 23.78     11.68     2.84      100     0.03     0.09  Calling2
  1.01     11.80     0.12        1     0.12     0.12  Calling5
  0.34     11.84     0.04                             main
  0.00     11.84     0.00        1     0.00    11.65  Calling 
```

与 gprof 的第二次报告

扁平型材：

每个样本计为 0.01 秒。

% 累计 self 总
时间 seconds seconds 呼叫 s/呼叫 s/呼叫名称

```
 25.13      2.99     2.99      100     0.03     0.12  Calling1
 24.88      5.95     2.96      101     0.03     0.03  Calling4
 24.80      8.89     2.95      100     0.03     0.06  Calling3
 23.48     11.69     2.79      100     0.03     0.09  Calling2
  1.02     11.81     0.12        1     0.12     0.12  Calling5
  0.17     11.83     0.02                             main
  0.00     11.83     0.00        1     0.00    11.66  Calling 
```

两份报告都不同。每次我运行我的 main.exe 时，我都会得到不同的分析报告。当我尝试 Oprofile 时，我也得到了不同的结果：

Oprofile report1 使用 /var/lib/oprofile/samples/ 作为示例目录。警告：找不到 /no-vmlinux。CPU：AMD64 family15h，速度 2.2e+06 MHz（估计） 计数 CPU_CLK_UNHALTED 事件（CPU 时钟未停止），单位掩码为 0x00（无单位掩码）计数 100000

```
samples  %        image name               symbol name
92552    24.7672  main                     Calling4
91610    24.5151  main                     Calling3
91566    24.5033  main                     Calling1
91469    24.4774  main                     Calling2
3665      0.9808  main                     Calling5
1892      0.5063  no-vmlinux               /no-vmlinux
916       0.2451  main                     main
10        0.0027  libc-2.12.so             profil_counter
1        2.7e-04  ld-2.12.so               _dl_cache_libcmp
1        2.7e-04  ld-2.12.so               _dl_relocate_object
1        2.7e-04  ld-2.12.so               _dl_sysdep_start
1        2.7e-04  ld-2.12.so               strcmp
1        2.7e-04  libc-2.12.so             __libc_fini
1        2.7e-04  libc-2.12.so             _dl_addr
1        2.7e-04  libc-2.12.so             _int_malloc
1        2.7e-04  libc-2.12.so             exit 
```

Oprofile 报告2

使用 /var/lib/oprofile/samples/ 作为示例目录。警告：找不到 /no-vmlinux。CPU：AMD64 family15h，速度 2.2e+06 MHz（估计） 计数 CPU_CLK_UNHALTED 事件（CPU 时钟未停止），单位掩码为 0x00（无单位掩码）计数 100000

样本 % 图像名称 符号名称

```
92254    24.7719  main                     Calling4
91482    24.5646  main                     Calling1
91480    24.5641  main                     Calling3
91340    24.5265  main                     Calling2
3658      0.9822  main                     Calling5
1270      0.3410  no-vmlinux               /no-vmlinux
916       0.2460  main                     main
6         0.0016  libc-2.12.so             profil_counter
1        2.7e-04  ld-2.12.so               _dl_lookup_symbol_x
1        2.7e-04  ld-2.12.so               _dl_setup_hash
1        2.7e-04  ld-2.12.so               _dl_sysdep_start
1        2.7e-04  ld-2.12.so               bcmp
1        2.7e-04  libc-2.12.so             __mcount_internal
1        2.7e-04  libc-2.12.so             _dl_addr
1        2.7e-04  libc-2.12.so             _int_free
1        2.7e-04  libc-2.12.so             mcount 
```

谁能告诉他们为什么会这样？造成这种情况的可能原因是什么？如何避免这种情况，以便获得持续的分析结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-27T16:18:51.400

我不会担心后续报告的不同。根据程序的执行方式，报告可能会有很大差异。此外，很难说这两个配置文件之间发生了什么。根据正在运行的其他进程，系统的缓存和 TLB 肯定会处于与第一个配置文件期间不同的状态。除非您可以确保受控的机器状态，否则不要期望一致的结果。

很容易理解为什么每个工具的报告不一致。这两种工具本质上是不同的。Oprofile 是一个基于采样的分析器，本质上是周期性地中断 CPU。Gprof 是基于仪器的；它必须编译到您的程序中。这会产生一个与不使用 gprof 时运行的二进制文件不同的二进制文件。因此，gprof 会高估时间。oprofile 用于 CPU-bound 进程，gprof 用于 I/O-bound 进程。

# objective-c - 如何在标头中声明未知枚举？

> ID：15023464
> 
> 赞同：4
> 
> 时间：2013-02-22T11:44:28.807
> 
> 标签：objective-c, declaration

我知道你可以使用这个`@class`词在 Objective-C 头文件中声明一个未知的类。有没有办法`enum`在头类中声明未知数？

例如，有没有办法防止编译错误`someEnum`？

```
#import <Foundation/Foundation.h>

@class UnknownClass;

@interface Foo

@property (nonatomic, strong) UnknownClass *someObject;
@property (nonatomic) UnknownEnum someEnum;

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T11:57:59.100

是的，您可以*转发声明*`enum`：

```
enum things; 
```

但是，如果您开始使用编译器标志，我认为您会遇到问题，`-pedantic`因为我不相信它是 ISO 标准的一部分。我还认为，就像前向声明一个类一样，您可能只能使用指向它的指针，因为它的大小是未知的。

我个人从来没有这样做过，而是更喜欢包含定义的头文件`enum`（而且我不认为*向前声明*比`enum`包含文件更干净）。

底线：**不要打扰**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:57:47.727

如果您出于某种原因不想为声明的标头添加`#import`or`#include`指令，*则*`enum`只需将其键入为其他内容。所有`enum`类型都仅限于某种形式的`int`. 只需将其声明为相似即可。如果你知道你会得到 0 或更高，你可以使用`NSUinteger`. 如果您知道会得到负数，请使用`NSInteger`. 其中任何一个都足以满足您的财产申报。

也就是说，命名枚举只不过是使用枚举成员的值或将该值分配给变量的类型定义。

另一种选择是做`#ifndef`定义自我相同类型的def。

# c# - 为什么我在 vb 中得到一个模棱两可的调用，但在 c# 中却没有？

> ID：15023465
> 
> 赞同：2
> 
> 时间：2013-02-22T11:44:31.593
> 
> 标签：c#, .net, vb.net, visual-studio-2010, ambiguous-call

我在 c# 中有一个具有以下方法的类：

```
public MyRetType MyMethod(String p1 = null)
 {
    MyMethod(<default values>);
 } 
public MyRetType MyMethod(String p1, String p2, MyClass1 p3, String p4 = null, MyClass2 p5 = null)
 {
    ...
 } 
```

我不得不添加一个新的可选参数。为了保持向后兼容性，我添加了几个方法，每个方法多了一个参数，并且我重写了以前的方法来调用新的方法：

```
 public MyRetType MyMethod(String p1 = null, IEnumerable<int> pnew = null)
 {
    MyMethod(<default values>);
 } 
 public MyRetType MyMethod(String p1) 
 {
     return MyMethod(p1, null); 
 }

 public MyRetType Launch(String p1, String p2, MyClass1 p3, IEnumerable<int> pnew , String p4 = null, MyClass2 p5 = null)
 {
    ...
 } 
 public MyRetType MyMethod(String p1, String p2, MyClass1 p3, String p4= null, MyClass2 p5 = null)
 {
     return MyMethod(p1, p2, p3, null, p4, p5);
 } 
```

这似乎在 c# 中有效，尽管我知道仅使用 null 调用 MyMethod 将是模棱两可的（它可能是最后一个清单中的两个第一个方法中的任何一个）。

但是，当尝试从 Visual Basic 调用 MyMethod 时，它不会在智能感知中列出。如果我手动编写它，我会收到一个错误：“Ambiguous call”。

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:58:46.610

您需要放弃可选项并坚持使用重载 - 如果您已经获得了没有可选参数的重载，则可选项的意义会降低：

```
public MyRetType MyMethod() 
{
    return MyMethod(null,null);
}

public MyRetType MyMethod(String p1) 
{
    return MyMethod(p1,null);
}

public MyRetType MyMethod(String p1, IEnumerable<int>)
{
    MyMethod(<default values>);
} 
```

# c++ - Awesomium c++：语法错误：缺少';' 前 '*'

> ID：15023468
> 
> 赞同：-2
> 
> 时间：2013-02-22T11:44:35.807
> 
> 标签：c++, pointers, awesomium

我正在尝试将 c++ 代码与 awesomium 功能集成，但我遇到了很多错误。似乎 VisualStudio 不喜欢我对 WebCore 元素的定义/声明。我从[http://wiki.awesomium.com/tutorials/tutorial-1-hello-awesomium.html](http://wiki.awesomium.com/tutorials/tutorial-1-hello-awesomium.html)复制了它。我已经简化了代码，直到这个，我仍然得到错误。

简单类.cpp：

```
#include <Awesomium/WebCore.h>
include "SimpleClass.h"
using namespace Awesomium;

CSimpleClass::CSimpleClass(){   
    WebCore *web_core = WebCore::Initialize(WebConfig());
}
CSimpleClass::~CSimpleClass(){
} 
```

简单类.h：

```
class CSimpleClass
{
public:
    CSimpleClass(void);
    ~CSimpleClass(void);
    WebCore *web_core;
}; 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:04:46.927

`SimpleClass.h`将标题更改为：

```
#pragma once
#ifndef SIMPLECLASS_H
#define SIMPLECLASS_H

// forward declarations
namespace Awesomium{
class WebCore;
}

class CSimpleClass
{
public:
    CSimpleClass(void);
    ~CSimpleClass(void);
    Awesomium::WebCore *web_core;
};

#endif /* SIMPLECLASS_H */ 
```

这样您就可以向编译器宣布`WebCore`命名空间中存在一个类型`Awesonium`，然后您可以使用它来声明成员指针`CSimpleClass::web_core`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:51:16.783

撇开潜在的依赖问题不谈，问题在于您的标头不知道您要使用`Awesomium`命名空间。

**要么** *（首选）*在标题中明确说明您对 *web_core 的定义

```
class CSimpleClass
{
public:
    CSimpleClass(void);
    ~CSimpleClass(void);
    Awesomium::WebCore *web_core; //note the use of Awesomium::
}; 
```

**或者** *（如果你真的必须）*在你的 using 指令之后包含你的标题

```
#include <Awesomium/WebCore.h>
using namespace Awesomium;
#include "SimpleClass.h" 
```

# php - 从数据库中删除记录

> ID：15023469
> 
> 赞同：1
> 
> 时间：2013-02-22T11:44:45.940
> 
> 标签：php

我可以使用以下功能删除记录吗？如果是，我该怎么做？我必须将功能传递给提交按钮吗？

```
function deleteImage($id = "")
        {
            if(isset($_POST['delete_image']))
            {
                $query = mysql_query("DELETE FROM store WHERE id='$id'");
            }
               return $query;

        } 
```

html 看起来像这样：

```
<?php

   $images = mysql_query("SELECT * FROM store");

   while($row = mysql_fetch_assoc($images)) {
?>
        <form action="admin.php" method="post">
            <?php 
                echo "<img src=".$row['image'].">"; 
            ?>
            <input type="submit" name="delete_image" value="DELETE IMAGE">
        </form>
<?php       
   }
?> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:52:57.330

你可以做这样的事情，在 while 循环内的表单中添加隐藏的输入。

```
<input type="hidden" name="id" value="<?php echo $row['id']; ?>" 
```

然后在 action.php 文件中

```
$id = $_POST['id'];
if(isset($_POST['delete_image']))
{
    $query = mysql_query("DELETE FROM store WHERE id='$id'");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:49:48.550

You should try this.

```
<?php
    if(isset($_POST['delete_image']))
    {
        $query = mysqli_query("DELETE FROM store WHERE id='".$_POST['image_id']."'")or die(mysqli_error());
    }

    $images = mysqli_query("SELECT * FROM store");

    while($row = mysqli_fetch_assoc($images)) 
    {
?>
        <form action="admin.php" method="post">
            <?php echo "<img src=".$row['image'].">"; ?>
            <input type="hidden" id="image_id_<?php echo $row['id']; ?>" value="<?php echo $row['id']; ?>" name="image_id"/>
            <input type="submit" name="delete_image" value="DELETE IMAGE">
        </form>
<?php       
    }
?>
```

I passed image id in hidden field.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T12:16:26.567

这是你的看法

```
<td>    
<?php $images = mysql_query("SELECT * FROM store"); ?>
<form action="index.php" method="post">
<?php while($row = mysql_fetch_assoc($images)): ?>
        <img src="<?php echo $row['image']; ?>">
        <input type="hidden" name="deleting[]" value="<?php echo $row['id_from_database'] ?>">
<?php endwhile; ?>
<input type="submit" name="delete_image" value="DELETE IMAGE">
</form>
</td> 
```

这是你的代码

```
<?php
function deleteImage()
{
    if(isset($_POST['delete_image'], $_POST['deleting']) && !empty($_POST['deleting']))
    {
        $ids = array_map('intval', $_POST['deleting']); // Type conversion to integer
        $ids = implode(', ', $ids); // Bringing to id1,id2...
        $query = mysql_query('DELETE FROM images WHERE id IN(' . $ids . ')'); // Deleting
        return (bool)$query;
    }
}
?> 
```

现在您需要设置复选框要删除哪些图像并按提交。

# php - PHP：通过 Javascript 发布分数的安全方式

> ID：15023471
> 
> 赞同：-1
> 
> 时间：2013-02-22T11:44:46.327
> 
> 标签：php, javascript, ajax

我创建了一个 php 文件，它将分数更新到数据库。例如：`http://domain.com/heli/test.php?id=100001181378824&score=50000`

Test.php 包含以下代码

```
mysql_connect(localhost,$user,$password);
$id = mysql_real_escape_string($_GET['id']);
$score = mysql_real_escape_string$_GET['score']);
@mysql_select_db($database) or die( "Unable to select database");
$query = "UPDATE heli SET score = '$score' WHERE app = '$id'";
echo $query;
$result=mysql_query($query);
mysql_close(); 
```

我想知道如何通过 Javascript 以安全的方式获取或发布对我的 test.php 的请求。现在我在 Js 下创建了。

```
 var httpwp = new XMLHttpRequest();
 var urlwp = "http://domain.com/heli/test.php?id=100001181378824&score=50000";
 var paramswp = "id="+ids+"&score="+scores+";
 httpwp.open("GET", urlwp, true);
 httpwp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
 httpwp.setRequestHeader("Content-length", paramswp.length);
 httpwp.setRequestHeader("Connection", "keep-alive");
 httpwp.send(paramswp); 
```

但是如何使用身份验证密钥等安全地发布或获取请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:55:46.717

您永远无法确定客户提交的数据。

为了使这更“安全”，您必须在您的服务器上编写一些关于该分数如何计算的逻辑。

例如。假设您现在开始游戏，并在 3 秒后提交 1000 分。那可能吗？

您必须创建一些步骤或限制，例如，如果玩家处于 1 级，则分数不能超过 100 分，并且不能在 1 分钟游戏开始前提交。等等！

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T12:13:31.477

1.首先，修复你的 PHP 代码，这样你就不会受到 SQL 注入的攻击。

2.接下来，通过 https 而不是 http 访问您的服务器。

3.添加一个php文件来接受一个名字和密码的登录请求，这将返回一个唯一的会话密钥。（一个大的随机数可能就足够了，或者随机数据的 sha1 哈希 + 请求中的一些数据）

4.将此号码连同它的发行日期一起存储在服务器端数据库中。

6.在上传乐谱之前，让您的应用从此文件中获取会话密钥。

7\. 让您的分数保存 php 文件接受您的会话密钥以及分数数据，并将其与数据库进行比较，以查看其是否有效，并且不会太旧（检查发布日期）。

8.存储一个新的会话密钥并与分数更新的结果一起返回，并从数据库中删除旧的会话密钥。

9.让你的js在后面的帖子中使用新的密钥，每次从服务器获取一个新的密钥。

10.在您的 php 应用程序中建立健全性检查，以检查荒谬和不可能的分数。还要检查过快获得的大分数。

# ajax - 如何获取已被 jQuery 加载的 HTML 标签之间的内容？

> ID：15023478
> 
> 赞同：1
> 
> 时间：2013-02-22T11:45:31.617
> 
> 标签：ajax, jquery, dom-manipulation, dom-traversal

我正在使用 jQuery (AJAX) 加载数据，然后将其加载到表中（因此这发生在页面加载之后）。

在每个表格行中都有一个“选择”链接，允许用户从表格中选择一行。然后我需要获取这一行中的信息并将其放入页面下方的表单中。

```
$('#selection_table').on('click', '.select_link', function() {
    $('#booking_address').text = $(this).closest('.address').text();
    $('#booking_rate').text = $(this).closest('.rate').val();
}); 
```

据我了解，“最近”函数遍历 DOM 树，因此由于我的链接位于每行的最后一个单元格中，它应该从前一行获取元素“地址”和“速率”（这些类被分配给正确的单元格）。

我已经尝试在许多变体中使用快速而肮脏的'alert（$（this）.closest（etc...'）来调试自己，但似乎没有任何效果。

我是否需要对原始页面加载后加载的目标数据采取不同的措施？我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:49:29.243

`.closest()`您对如何工作以及如何工作做出了错误的假设`.text()`。如有疑问，请养成阅读文档的习惯，它对如何使用 jQuery 的特性给出了清晰的描述和示例。

*   [`.closest()`](http://api.jquery.com/closest/)将遍历给定元素的父元素，尝试匹配您提供的选择器。如果您`.select_link`不在“内部” `.address`，您的代码将不起作用。

*   此外，[`.text()`](http://api.jquery.com/text/)是方法，而不是属性（在语义上，因为方法实际上是 Javascript 中的属性）。`x.text = 1;`简单地覆盖此元素上的方法，这不是一个好主意，您要调用该方法：`x.text(1);`.

这些方面的东西可能会起作用：

```
var t = $(this).closest('tr').find('.address').text();
$('#booking_address').text(t); 
```

如果`#booking_address`是表单元素，请`.val()`改为使用它。

如果它不起作用，请提供您正在使用的 HTML 结构（编辑您的问题，使用 jsFiddle 或类似服务），我会帮助您。当提出这样的问题时，提供相关的 HTML 结构无论如何都是一个好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:50:36.170

您可以尝试使用 parent() 和 find() 函数并直接定位数据， parent() 和 find() 方法的数量取决于您的 HTML。

前任。获取前一行数据

```
$('#selection_table').on('click', '.select_link', function(){ 
     $('#booking_address').text = $(this).parent().parent().prev().find('.address').text();
}); 
```

其中 parent 代表父元素 (tr)，然后 prev() 作为上一行并 find 查找元素。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-22T11:48:36.247

某处有代码演示吗？检查您何时调用代码。它应该在 AJAX 调用“成功”之后。

# c++ - WebSocket 握手期间出错：Sec-WebSocket-Accept 不匹配

> ID：15023481
> 
> 赞同：-1
> 
> 时间：2013-02-22T11:45:47.667
> 
> 标签：c++, c, websocket

```
GET / HTTP/1.1
Upgrade: websocket
Connection: Upgrade
Host: localhost:53000
Origin: null
Sec-WebSocket-Protocol: hmiModel
Sec-WebSocket-Key: Hbw2xjBq6OTGXzxeuqrdVQ==
Sec-WebSocket-Version: 13
Sec-WebSocket-Extensions: x-webkit-deflate-frame 
```

这是我在 chrome 浏览器上从客户端获得的请求密钥。之后，我将密钥与 Magic String 连接起来。

> 魔弦为258EAFA5-E914-47DA-95CA-C5AB0DC85B11

然后我使用了 SHA1 算法，我得到了以下哈希值

> a5877edcaa04801d07c5687aad3a6cf03d26ad5c

然后我使用base64对上述值进行编码，得到加密值

> Nzg1YWNkZTc0MGFhZDEwODVjNzA=

然后我向客户端发送响应握手

```
HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Charset: ISO8859-1,UTF-8
Connection: keep-alive, Upgrade
WebSocket-Origin: localhost
WebSocket-Location: localhost
WebSocket-Protocol: hmiModel
Sec-webSocket-Version: 13
Sec-WebSocket-Accept: Nzg1YWNkZTc0MGFhZDEwODVjNzA= 
```

但在控制台中，我收到错误消息“ **WebSocket 握手期间出错：Sec-WebSocket-Accept mismatch** ”

因此 onopen 和 onmessage 事件不会因为这个错误而触发。

谁能告诉我我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:56:24.367

我没有检查你的计算输出，但你的中间哈希值看起来很长。[使用来自RFC4634](https://tools.ietf.org/rfc/rfc4634.txt)的 SHA1 代码，我使用如下代码来计算握手响应

```
std::string key;
// populate key with content of Sec-WebSocket-Key header
key.append("258EAFA5-E914-47DA-95CA-C5AB0DC85B11");
SHA1Context* sha1ctx = (SHA1Context*)malloc(sizeof(*sha1ctx));
(void)SHA1Reset(sha1ctx);
(void)SHA1Input(sha1ctx, key.c_str(), key.size());
uint8_t digest[SHA1HashSize];
(void)SHA1Result(sha1ctx, digest);
free(sha1ctx);
// convert std::string(&digest[0], sizeof(digest)) to base64 
```

如果您想要更具体的反馈，请编辑您的问题以包含您的等效代码。

# function - Haskell库中某处的整数分解函数？

> ID：15023483
> 
> 赞同：5
> 
> 时间：2013-02-22T11:45:49.617
> 
> 标签：function, math, haskell, integer

我找到了一些实现整数分解函数的库。最好在一些流行的库中进行一些快速实现，而不是重新发明轮子。

有吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-22T12:49:43.330

一个快速的谷歌搜索显示了 Daniel Fischer 的[arithmoi](http://hackage.haskell.org/package/arithmoi)包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T12:49:54.643

见[`primeFactors`](http://hackage.haskell.org/packages/archive/primes/0.2.1.0/doc/html/Data-Numbers-Primes.html#v%3aprimeFactors)素[数](http://hackage.haskell.org/package/primes-0.2.1.0)。它相当快，例如它`104729 * 104723`立即起作用。

# java - 尝试读取单元格时出现奇怪的越界异常

> ID：15023486
> 
> 赞同：0
> 
> 时间：2013-02-22T11:45:53.970
> 
> 标签：java, jxl

我一直在尝试读取 excel 表并将单元格中的数据插入程序中。我在某种程度上是成功的，但是当我尝试从位置 4 及以后的单元格中获取数据时，我得到了一个越​​界异常。不知道为什么会这样，因为我可以调用位置 0、1、2 和 3 就好了。这是我的代码。

```
public void readExcel(File file) {

try {

//Workbook newBook = new Workbook();
Workbook workbook = Workbook.getWorkbook(file);
WritableWorkbook workbookOutput = Workbook.createWorkbook(new File("output.xls"));
// Workbook workbook = Workbook.getWorkbook(new File(“Res.xls”));
WritableSheet sheetOutput = workbookOutput.createSheet("First Sheet", 0);

sheet = workbook.getSheet(0);
boolean isnotnull = true;
int i = 0;
while(isnotnull){

    //Cell a1 = sheet.getCell(0, 2);
try{
    Cell a2 = sheet.getCell(0, i);
    Cell a3 = sheet.getCell(1, i);
    Cell a4 = sheet.getCell(2, i);
    stringa1 = a2.getContents();
    stringa2 = a3.getContents();
    stringa3 = a4.getContents();

    char c = stringa2.charAt(0);
    char d = stringa2.charAt(1);

    if(Character.isDigit(c) || Character.isDigit(d)){
        System.out.println("found one");
        stringa1 = stringa1 + "" + stringa2;
        stringa2 = stringa3;
        Cell a5 = sheet.getCell(3, i);
        try{
            Cell a10 = sheet.getCell(4, i);
           // System.out.print("Cell" + a6.getContents());
        }
        catch(Exception e){
            System.out.println(e);
        }

        stringa4 = a5.getContents();
        stringa3 = stringa4;
      //  checkCells(1, i);

    }
    Label label = new Label(0, i, stringa1);
    Label label2 = new Label(1, i, stringa2);
    Label label3 = new Label(2, i, stringa3);
    sheetOutput.addCell(label);
    sheetOutput.addCell(label2);
    sheetOutput.addCell(label3);
    i++;
    System.out.println(stringa1 + " |||||||||||| " + stringa2 + " |||||||| " + stringa3 + " " + i);
}catch(Exception e){
    System.out.println(e);
    isnotnull = false;
}

}

workbookOutput.write(); 
try{
workbookOutput.close();
}catch(Exception r){
    System.out.println(r);
}
System.out.println(stringa1);

workbook.close();

} catch (BiffException e) {

e.printStackTrace();

} catch (IOException e) {

   e.printStackTrace();

}

}`enter code here` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:57:11.633

此单元格根本不存在于电子表格中。似乎该`createSheet`方法只创建了几个第一个单元格。

# sql-server - SQL 复制“进程无法连接到订阅服务器”

> ID：15023491
> 
> 赞同：2
> 
> 时间：2013-02-22T11:46:02.227
> 
> 标签：sql-server, sql-server-2008, login, database-replication

我有三台服务器，都是 Windows 2008 + SQL Server 2008 R2：

*   服务器“A”
*   服务器“B”
*   服务器“Z”

A 和 B 是发布者，Z 是 A 和 B 的订阅者。订阅配置为“推送”模式（即从分发者到订阅者）。

从 A 到 Z 的复制工作完美。

从 B 到 Z 的复制失败，并显示消息*'The process could not connect to Subscriber 'ServerZ''*。此消息显示在分发服务器（服务器 B）上的同步状态中。

连接正在使用 SQL 登录运行，并且我已经多次检查了所有密码 - 我可以通过 SQL Management Studio 连接而没有任何问题 - 但是当将相同的凭据放入复制时，它会失败......

为什么？我该如何阻止它？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T11:32:33.750

最后发现问题与尝试连接的端口号复制有关（这是非标准的）。

您在 SQL 网络配置中指定端口的顺序似乎决定了如果在连接尝试中未指定端口，它将使用哪个端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-18T22:18:02.307

好吧，如果您还使用 Sql Server Aliases 连接到远程 SQL 服务器，那么这个技巧对您有用。

我在本机客户端配置（32 位）下创建了 SQL Server 别名，并且我的 SQL Studio 使我能够连接到远程服务器。

我刚刚在 Native Client Configuration (without 32 bit) 选项下创建了相同的别名，它很有效。

# java - 我在哪里可以找到 java 信任库文件？

> ID：15023492
> 
> 赞同：1
> 
> 时间：2013-02-22T11:46:02.837
> 
> 标签：java, ssl, certificate, truststore

我添加了一个带有 keytool 的证书。现在我必须找到关联的信任库文件。我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:00:09.503

没有“关联的信任库文件”之类的东西。您添加证书的文件*是*信任库。

# objective-c - 如果从应用程序中删除框架会发生什么？

> ID：15023498
> 
> 赞同：7
> 
> 时间：2013-02-22T11:46:20.120
> 
> 标签：objective-c, macos, cocoa, frameworks

有人问我一个问题，如果从您的设备中意外删除框架可能是 iphone 或 mac 会发生什么？

您的应用程序是否崩溃或它会正常工作而没有任何错误？

请给我答案和解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T12:37:30.567

您可能会收到链接错误。如果框架文件夹在应用程序内部，则意味着它的运行时链接。

> OS X 在每个动态库中嵌入了一个“安装名称”。此安装名称是 dyld 需要加载库时可以找到的路径。当您构建链接到动态库的应用程序时，此安装名称将复制到应用程序二进制文件中。当应用程序运行时，复制的安装名称将用于定位库或框架。

```
 $ otool -D /Applications/Google\ Drive.app/Contents/Frameworks/Python.framework/Versions/2.6/Python 
    /Applications/Google Drive.app/Contents/Frameworks/Python.framework/Versions/2.6/Python:
    @executable_path/../Frameworks/Python.framework/Versions/2.6/Python 
```

因此，如果您删除 Frameworks 文件夹，您将收到 Dyld 错误。

```
Dyld Error Message:
  Library not loaded: @loader_path/../Frameworks/Sparkle.framework/Versions/A/Sparkle
  Referenced from: /Applications/Transmission.app/Contents/MacOS/Transmission
  Reason: image not found 
```

![在此处输入图像描述](../Images/e55a16ad0d09b44178abc7ce899c3528.png)

![在此处输入图像描述](../Images/257d18ad069637cccc63cc2422ae0a7c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:50:43.313

如果删除框架，则只有链接到该框架的软件会受到影响。如果它是一个系统框架，预计您的系统会开始失败。如果是第 3 方框架，则应限制影响范围。如果它在您的应用程序包中，并且您的应用程序是代码签名的，那么删除捆绑的框架应该会阻止您的应用程序启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:51:58.893

这取决于应用程序是否需要访问您已删除的框架。如果您的应用程序需要该框架，那么它将无法编译。如果你不需要它，它会像平常一样编译。

# asp.net - 回调期间 DotNetOpenAuth.WebServerClient.XSRF-Session 更改

> ID：15023502
> 
> 赞同：7
> 
> 时间：2013-02-22T11:46:39.993
> 
> 标签：asp.net, .net, oauth, dotnetopenauth

我正在尝试设置一个简单的 Oauth2 登录身份验证。但是我被困在抛出以下异常的回调中：

```
 [ProtocolException: Unexpected OAuth authorization response received with callback and client state that does not match an expected value.]
   DotNetOpenAuth.Messaging.ErrorUtilities.VerifyProtocol(Boolean condition, String unformattedMessage, Object[] args) +426
   DotNetOpenAuth.OAuth2.WebServerClient.ProcessUserAuthorization(HttpRequestBase request) +771 
```

[这里](https://stackoverflow.com/questions/14225840/session-change-in-between-request-and-process-user-authorization)讨论了完全相同的问题

在我的情况下，SessionID 保持不变，但 DotNetOpenAuth.WebServerClient.XSRF-Session cookie 在回调时更改了它的值。

执行：

```
 public void Authorize(HttpRequest request)
    {
        string callbackString = request.Url.AbsoluteUri;
        Uri callbackUri = new Uri(callbackString);;

        IAuthorizationState authorization = nimbleClient.ProcessUserAuthorization();

        if (authorization == null)
        {
            // Kick off authorization request
            nimbleClient.RequestUserAuthorization(returnTo: callbackUri);
        }
        else
        {
            //Get AccesToken
            Uri.EscapeDataString(authorization.AccessToken);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-08T06:43:11.580

您是否将 cookie 声明为常量，如下所示：

```
private const string XsrfCookieName = "DotNetOpenAuth.WebServerClient.XSRF-Session" 
```

即使在回调时，这也将有助于保持该值。

# c++ - 使 QCompleter 在 QStandardItemModel “数据”而不是“文本”中搜索

> ID：15023505
> 
> 赞同：1
> 
> 时间：2013-02-22T11:46:51.017
> 
> 标签：c++, qt

我正在使用 a`QCompleter`作为`QStandardItemModel`模型。

代码是这样的：

```
QStandardItemModel *modelProtocolName = new QStandardItemModel();
QStringList list;
list << "one" << "two" << "three";
for (int i = 0; i < list.length(); i++)
{
    QStandardItem *item = new QStandardItem();
    item->setText( list.at( i ) );
    item->setData( "real one, two or three is inserted here", ZAdvancedCompleter::CompleteRole );
    modelProtocolName->appendRow( item );
}
ZAdvancedCompleter completerProtocolName = new ZAdvancedCompleter( this );
completerProtocolName->setModel( modelProtocolName ); 
```

现在，当我使用`QCompleter`它在列表中搜索时，即在“一”、“二”和“三”中搜索。是否可以将搜索定向到模型的数据？

# hover - CSS边框半径父子问题（带有：悬停和位置：绝对）

> ID：15023511
> 
> 赞同：3
> 
> 时间：2013-02-22T11:47:05.467
> 
> 标签：hover, parent, css, absolute

边界半径和子元素存在已知问题。子元素从父元素的圆角突出。

常见的解决方案是添加`overflow:hidden`到父元素。但是当父母有时它仍然不起作用`position:absolute`。

[http://jsfiddle.net/Xhrx8/2/](http://jsfiddle.net/Xhrx8/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:57:07.513

HTML

```
 <div id="items">
<div id="top">One</div>
<div>Two</div>
<div>Three</div>
<div id="bottom">Four</div> 
```

CSS

```
#items {
border: 1px solid black;
border-radius: 10px;
overflow: hidden;
position: absolute;
}

 #items div {
border-bottom: 1px solid black;
padding: 5px;
}

#items #top:hover {
border-top-right-radius: 10px;
border-top-left-radius: 10px;
background-color: #ccc;
}
#items div:hover{
background-color: #ccc;
}
#items #bottom:hover {
background-color: #ccc;
border-bottom-right-radius: 10px;
border-bottom-left-radius: 10px;
 } 
```

现场示例[http://jsfiddle.net/Xhrx8/3/](http://jsfiddle.net/Xhrx8/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T11:59:10.227

这似乎是 chrome css 的一个错误。
我们可以做的一种解决方法是使用包装器作为

```
<div style="position:absolute">
    <div id="items">
        <div>One</div>
        <div>Two</div>
        <div>Three</div>
        <div>Four</div>
    </div>
<div> 
```

`position:absolute`并从中删除`#items`

[小提琴](http://jsfiddle.net/Xhrx8/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-16T18:29:28.320

我喜欢 user1136403 的回答，但我会使用第一个和最后一个子 css 选择器。这样您就不必将 id="top", id="bottom" 添加到 HTML 中的第一个和最后一个 li。

HTML

```
<div id="items">
   <div >One</div>
   <div>Two</div>
   <div>Three</div>
   <div >Four</div>
</div> 
```

CSS

```
#items {
border: 1px solid black;
border-radius: 10px;
overflow: hidden;
position: absolute;
}
#items div {
border-bottom: 1px solid black;
padding: 5px;
}    
#items div {
border-bottom:none; //removes the double border on the bottom
}
#items div:hover{
background-color: #ccc; //this is the only background color def you need
}
#items div:first-child:hover {
border-top-right-radius: 10px;
border-top-left-radius: 10px;
}
#items div:last-child:hover {
border-bottom-right-radius: 10px;
border-bottom-left-radius: 10px;
} 
```

另请注意，您在第一个、最后一个子 CSS 块中不需要“背景颜色”。它已在#items div:hover{} 中定义。这是小提琴。 [http://jsfiddle.net/honkskillet/CHL8K/](http://jsfiddle.net/honkskillet/CHL8K/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T11:57:50.430

这是 Chrome 中的一个已知错误（在 Firefox 中运行良好）。

您需要一个围绕您的 DIV #items 的包装器，并将属性分配给该包装器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-19T15:07:34.650

您需要通过 css3 强制硬件加速。

```
#items {
[......]
-webkit-transform: translate3d(0,0,0);
-moz-transform: translate3d(0,0,0);
-ms-transform: translate3d(0,0,0);
-o-transform: translate3d(0,0,0);
transform: translate3d(0,0,0);
} 
```

# javascript - 是否可以在 underscore.js 或 lodash 模板中添加非 html 注释？

> ID：15023513
> 
> 赞同：21
> 
> 时间：2013-02-22T11:47:07.697
> 
> 标签：javascript, underscore.js, lodash

是否可以在 underscore.js 或 lodash 中添加非 html 注释？

就像是 ：

```
<%-- We do this here because... %> 
```

所以评论不在生成的html代码中？

如果我写：

```
<!-- We do this here because... --> 
```

注释在生成的 html 中。

谢谢你。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-05T23:04:21.313

这是一个客户端模板，您仍然会看到评论，但不会重复等...

```
<%
// comments go here
%> 
```

# c++ - 编译器在 Windows 上找不到对 zip_get_num_entries 的引用

> ID：15023516
> 
> 赞同：0
> 
> 时间：2013-02-22T11:47:15.920
> 
> 标签：c++, dll, zip, cmake

我想在我的 C++ 程序中使用 libzip 从 zip 存档中提取文件。因此，首先，我获取其中的文件数量，获取它们的名称并阅读它们。要获取文件数，我使用“zip_get_num_entries”。它的原型是：

```
zip_uint64_t zip_get_num_entries(struct zip *, int) 
```

以及我使用此功能的方式：

```
int nbrEntries(0);
zip *archive = zip_open("myZip.zip", 0, 0);
nbrEntries = zip_get_num_entries(archive, 0); 
```

当我编写这段代码时，Code::Blocks 建议我使用 zip_get_num_entries，所以标题没有问题。但是当我编译时，编译器（MinGW）告诉我：

```
undefined reference to `_imp__zip_get_num_entries' 
```

所以我尝试了它已弃用的等价物 zip_get_num_files 并且它有效。我将使用 CMake 制作的项目 libzip.dll.a 包括在内。我有两个文件：libzip.dll 和 libzip.dll.a。

我确定这是一个库问题（请注意，我在 MacOS 上没有这个问题），但我不知道如何解决这个问题。谢谢！

编辑：我搜索了他们的网站并读到当他们发布网站上可用的库时，zip_get_num_files 的实现是新的。所以我在他们的 Mercurial repo 中搜索并找到了 2 天前发布的版本（比网站上发布的版本更新了一点，它有将近 1 年）。我用 CMake 构建了它，它成功了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:50:57.970

"Undefined reference" means that there is no definition/implementation (as opposed to declaration/prototype) of the function available. You forgot to *link* the library. Since you use MinGW with `g++`, it will take something like `-lzip` on the command line or as parts of `LDFLAGS`.

There is a chance that you misconfigured something, too - in which case the symbol name may be different depending on a define. But the most likely case is that you forgot to link the dependency.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:33:51.363

我终于成功使用了 zip_get_num_entries！我搜索了他们的网站，发现 zip_get_num_files 在他们发布网站上可用的库时是新的。所以我在他们的 Mercurial repo 中搜索并找到了 2 天前发布的版本（比网站上发布的版本要新一点，它有将近 1 年）。我用 CMake 构建了它，它成功了！

# javascript - jquery-bing-maps 点击事件未从窗口标记触发

> ID：15023527
> 
> 赞同：0
> 
> 时间：2013-02-22T11:47:50.580
> 
> 标签：javascript, jquery, jquery-mobile, bing-maps, jquery-events

我试图从放置在 Bing 地图上的窗口标记内的链接触发事件，但是当我单击链接时，我被重定向到新页面，而不是让 JS 将函数绑定到事件

```
$('.single_address').live('click', function (evt) {

    alert('test');
    return false;
});

for (var i = 0; i < locations.length; i++) {
 (function (i) {
   var location_id = locations[i].aid;
   var address_street = locations[i].d;
   // var self = this;

   self.addMarker({
    'location': locations[i].la + ',' + locations[i].lo,
    'bounds': true
   }).click(function () {self.openInfoWindow({
    'title': address_street,
    'description': '<div class="single_address"><a href="test.php#list1">Contacts at this address</a></div>'
            }, this);
        });

    })(i);
} 
```

所以基本上没有显示警报消息，但页面被重定向到 test.php

使用 jquery-1.8.2 和 Jquery Mobile 1.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:36:26.057

好的，我已经设法让它工作了，我不确定我想要做的事情是可以实现的

我已关注 Bing 地图文档[http://msdn.microsoft.com/en-us/library/gg675210.aspx](http://msdn.microsoft.com/en-us/library/gg675210.aspx)

可以通过在**titleClickHandler属性中指定事件处理程序来使标题可点击，或者使用****actions**属性添加标签

```
 var infoboxOptions = {
         title:'My Infobox',
         description:'Testing actions',
         actions:[
          {label: 'test1', eventHandler: testEvent1},
          {label: 'test2', eventHandler: testEvent2}
         ]
   }; 
```

# php - Facebook PHP SDK 问题

> ID：15023532
> 
> 赞同：0
> 
> 时间：2013-02-22T11:48:20.500
> 
> 标签：php, facebook, facebook-graph-api, sdk, facebook-php-sdk

我在使用 facebook SDK 时遇到问题，我使用以下代码：

```
$facebook = new Facebook(array(
       'appId'  => 'MY_API_KEY',
       'secret' => 'MY_API_SECRET',
       'cookie' => true,
));

 $fql = "My fql query";

 $response = $facebook->api(array(
     'method' => 'fql.query',
     'query' =>$fql,
 ));
 print_r($response); 
```

工作正常，但一段时间后返回错误：“ *Uncaught CurlException: 3: No URL set!* ”

该问题会出现几分钟（5-10 分钟），然后再次出现。最大的问题是该错误每小时出现几次，有人知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:15:03.650

我认为您已设置默认 responseURL 。

可能是这个原因

示例：- php 代码

```
$params = array(
  'scope' => 'read_stream, friends_likes',
  'redirect_uri' => 'https://www.myapp.com/post_login_page'
);

$loginUrl = $facebook->getLoginUrl($params); 
```

希望这能解决问题。

# php - 在我自己的 PHP 扩展中的第二次请求期间 PHP-FPM 中的“调用未定义函数”

> ID：15023534
> 
> 赞同：1
> 
> 时间：2013-02-22T11:48:25.687
> 
> 标签：php, php-extension

我正在编写一个 PHP 扩展。在它里面我有我自己的函数，它只写一个传递给这个函数的字符串参数。我将 Apache 2.4 和 PHP-FPM 与 PHP 5.4.8 一起使用。在 PHP-FPM 配置中，我只有一个进程来处理 PHP 请求。

我有一个只有这个功能的简单示例。对于第一个请求，一切似乎都很好，但第二个请求返回“调用未定义函数”致命错误。

是否有一些特殊的方法可以为 PHP-FPM 编写扩展，或者它可能是 PHP 中的一个错误？

编辑：

代码 - config.m4：

```
dnl $Id$
dnl config.m4 for extension phpExtension

PHP_ARG_ENABLE(phpExtension, whether to enable phpExtension support,
[  --enable-phpextension           Enable phpExtension support])

if test "$PHP_PHPEXTENSION" != "no"; then

    PHP_REQUIRE_CXX()

    PHP_NEW_EXTENSION(phpExtension, phpExtension.cpp, $ext_shared)

    PHP_SUBST(PHPEXTENSION_SHARED_LIBADD)

    PHP_ADD_LIBRARY(stdc++, 1, PHPEXTENSION_SHARED_LIBADD)
fi 
```

phpExtension.h：

```
#ifndef PHP_PHPEXTENSION_H
#define PHP_PHPEXTENSION_H

extern zend_module_entry phpExtension_module_entry;
#define phpext_phpExtension_ptr &phpExtension_module_entry

#ifdef PHP_WIN32
#   define PHP_PHPEXTENSION_API __declspec(dllexport)
#elif defined(__GNUC__) && __GNUC__ >= 4
#   define PHP_PHPEXTENSION_API __attribute__ ((visibility("default")))
#else
#   define PHP_PHPEXTENSION_API
#endif

#ifdef ZTS
#include "TSRM.h"
#endif

PHP_MINIT_FUNCTION(phpExtension);
PHP_MSHUTDOWN_FUNCTION(phpExtension);
PHP_RINIT_FUNCTION(phpExtension);
PHP_RSHUTDOWN_FUNCTION(phpExtension);
PHP_MINFO_FUNCTION(phpExtension);

PHP_FUNCTION(phpExtensionTest);

#ifdef ZTS
#define phpExtension_G(v) TSRMG(phpExtension_globals_id, zend_phpExtension_globals *, v)
#else
#define phpExtension_G(v) (phpExtension_globals.v)
#endif

ZEND_BEGIN_MODULE_GLOBALS(phpExtension)
ZEND_END_MODULE_GLOBALS(phpExtension)

static PHP_GINIT_FUNCTION(phpExtension);
static PHP_GSHUTDOWN_FUNCTION(phpExtension);

static int php_phpExtension_post_deactivate();

#endif  /* PHP_PHPEXTENSION_H */ 
```

phpExtension.cpp：

```
#ifdef HAVE_CONFIG_H
#include "config.h"
#endif

#include <iostream>
#include <set>
#include <utility>
#include <string>

extern "C"
{
#include <ctype.h> //tolower
#include <stdio.h>

#include "php.h"
#include "php_ini.h"
#include "ext/standard/info.h"
#include "zend_vm_opcodes.h"
#include "zend_compile.h"
#include "zend_hash.h"
#include "zend_operators.h"
#include "zend_exceptions.h"
#include "php_phpExtension.h"
#include "zend_API.h"
#include "SAPI.h"
#include "zend_llist.h"
#include "zend.h"
#include "php_syslog.h"
#include <syslog.h>
}

using namespace std;

ZEND_DLEXPORT zend_function_entry phpExtension_functions[] =
{
    PHP_FE(phpExtensionTest, NULL)
    PHP_FE_END /* Must be the last line in phpExtension_functions[] */
};

ZEND_DECLARE_MODULE_GLOBALS(phpExtension)

zend_module_entry phpExtension_module_entry =
{
#if ZEND_MODULE_API_NO >= 20010901
    STANDARD_MODULE_HEADER,
#endif
    "phpExtension",
    phpExtension_functions,
    PHP_MINIT(phpExtension),
    PHP_MSHUTDOWN(phpExtension),
    PHP_RINIT(phpExtension),
    PHP_RSHUTDOWN(phpExtension),
    PHP_MINFO(phpExtension),
#if ZEND_MODULE_API_NO >= 20010901
    "0.1", /* TODO Replace with version number for your extension */
#endif
    PHP_MODULE_GLOBALS(phpExtension),
    PHP_GINIT(phpExtension),
    PHP_GSHUTDOWN(phpExtension),
    php_phpExtension_post_deactivate,
    STANDARD_MODULE_PROPERTIES_EX
};

extern "C"
{
    #ifdef COMPILE_DL_PHPEXTENSION
    ZEND_GET_MODULE(phpExtension)
#endif
}

/**
 * Initializes global parameters
 */
static PHP_GINIT_FUNCTION(phpExtension)
{
    fprintf(stderr, "phpExtension ginit\n");
    fflush(stderr);
}

static PHP_GSHUTDOWN_FUNCTION(phpExtension)
{
    fprintf(stderr, "phpExtension gshutdown\n");
    fflush(stderr);
}

static int php_phpExtension_post_deactivate()
{
    fprintf(stderr, "phpExtension php_phpExtension_post_deactivate\n");
    fflush(stderr);

    return SUCCESS;
}

PHP_MSHUTDOWN_FUNCTION(phpExtension)
{
    fprintf(stderr, "phpExtension mshutdown\n");
    fflush(stderr);

    return SUCCESS;
}

PHP_RINIT_FUNCTION(phpExtension)
{
    fprintf(stderr, "phpExtension rinit\n");
    fflush(stderr);

    return SUCCESS;
}

PHP_RSHUTDOWN_FUNCTION(phpExtension)
{
    fprintf(stderr, "phpExtension rshutdown\n");
    fflush(stderr);

    return SUCCESS;
}

PHP_MINFO_FUNCTION(phpExtension)
{
    php_info_print_table_start();
    php_info_print_table_header(2, "phpExtension support", "enabled");
    php_info_print_table_end();
}

PHP_FUNCTION(phpExtensionTest)
{
    int len;
    char *str;

    if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "s", &str, &len) == FAILURE)
    {
        RETURN_NULL();
    }

    php_printf("passed string: %s\n", str);

    RETURN_NULL();
}

PHP_MINIT_FUNCTION(phpExtension)
{
    fprintf(stderr, "phpExtension SAPI: %s %s\n", sapi_module.name, sapi_module.pretty_name);
    fflush(stderr);

    return SUCCESS;
} 
```

和 script.php：

```
<?php

phpExtensionTest("Test"); 
```

# angularjs - AngularJs 中的模板准备

> ID：15023537
> 
> 赞同：2
> 
> 时间：2013-02-22T11:48:33.707
> 
> 标签：angularjs

是否可以在页面上而不是在内存中使用 AngularJs 渲染模板？我需要准备 html 以作为电子邮件发送。我想我可以在隐藏的 div 中渲染一些东西，然后以某种方式将它的内容分配给变量，但对我来说它看起来很丑:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:10:25.770

你可以看看 $compile 函数：[http](http://docs.angularjs.org/api/ng) ://docs.angularjs.org/api/ng .$compile

例子：

```
function MyCtrl($scope, $compile){
  // You would probably fetch this email template by some service
  var template = '</div>Hi {{name}}!</div></div>Here\'s your newsletter ...</div>'; // Email template

  $scope.name = 'Alber';

  // this produces string '</div>Hi Alber!</div></div>Here\'s your newsletter ...</div>'
  var compiledTemplate = $compile(template)($scope); 

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:23:12.983

当然，您可以使用 $compile 服务来呈现模板。呈现的模板将是一个未附加到 DOM 树的 DOM 节点。而且你不必附加它来获取它的内容。你可以这样做：

```
<!doctype html>
<html ng-app="myApp">
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.angularjs.org/1.1.2/angular.min.js"></script>
    <script type="text/javascript">
    var myApp = angular.module('myApp', []);

    myApp.controller('MainCtrl', ['$scope', '$compile', function($scope, $compile){
        var compiled;
        $scope.compileTemplate = function() {
            var template = '<ul><li ng-repeat="i in [1, 2, 3]">{{i}}</li></ul>';
            var linker = $compile(template);
            compiled = linker($scope);
        }
        $scope.sendEmail = function() {
            alert("Send: " + compiled[0].outerHTML);
        }
    }]);
    </script>
</head>
<body ng-controller="MainCtrl">
    <button ng-click="compileTemplate()">Compile template</button>
    <button ng-click="sendEmail()">Send email</button>
</body>
</html> 
```

我在这里将它们分成两个不同的函数的原因是，当您编译并将其链接到作用域时，模板直到下一个摘要之后才会填充数据。也就是说，如果您在函数`compiled[0].outerHTML`末尾访问`compileTemplate()`，它不会被填充（除非您使用超时......）。

# fastcgi - 如何确定 PHP-FPM 进程中正在执行哪个脚本

> ID：15023540
> 
> 赞同：30
> 
> 时间：2013-02-22T11:48:40.303
> 
> 标签：fastcgi, php

我正在运行 nginx + php-fpm。有什么办法让我知道每个 PHP 进程在做什么？像 apache 中的扩展 mod_status 之类的东西，我可以看到 PID x 的 apache 进程正在处理 URL y。我不确定 PHP 进程是否知道 URL，但获取脚本路径和名称就足够了。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-22T17:09:19.247

经过几个小时的谷歌搜索和浏览 PHP.net 错误跟踪系统后，我找到了解决方案。它从 PHP 5.3.8 或 5.3.9 开始可用，但似乎没有记录。根据功能请求[#54577](https://bugs.php.net/bug.php?id=54577)，状态页面支持 option `full`，它将分别显示每个工作人员的状态。因此，例如 URL 将是`http://server.com/php-status?full`，示例输出如下所示：

```
pid:                  22816
state:                Idle
start time:           22/Feb/2013:15:03:42 +0100
start since:          10933
requests:             28352
request duration:     1392
request method:       GET
request URI:          /ad.php?zID=597
content length:       0
user:                 -
script:               /home/web/server.com/ad/ad.php
last request cpu:     718.39
last request memory:  1310720 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-22T12:16:45.647

PHP-FPM 有一个内置的状态监视器，虽然它不像 mod_status 那样详细。从 php-fpm 配置文件`/etc/php-fpm.d/www.conf`（在 CentOS 6 上）

```
; The URI to view the FPM status page. If this value is not set, no URI will be
; recognized as a status page. By default, the status page shows the following
; information:
;   accepted conn    - the number of request accepted by the pool;
;   pool             - the name of the pool;
;   process manager  - static or dynamic;
;   idle processes   - the number of idle processes;
;   active processes - the number of active processes;
;   total processes  - the number of idle + active processes.
; The values of 'idle processes', 'active processes' and 'total processes' are
; updated each second. The value of 'accepted conn' is updated in real time.
; Example output:
;   accepted conn:   12073
;   pool:             www
;   process manager:  static
;   idle processes:   35
;   active processes: 65
;   total processes:  100
; By default the status page output is formatted as text/plain. Passing either
; 'html' or 'json' as a query string will return the corresponding output
; syntax. Example:
;   http://www.foo.bar/status
;   http://www.foo.bar/status?json
;   http://www.foo.bar/status?html
; Note: The value must start with a leading slash (/). The value can be
;       anything, but it may not be a good idea to use the .php extension or it
;       may conflict with a real PHP file.
; Default Value: not set
;pm.status_path = /status 
```

如果启用此功能，则可以将路径从 nginx 传递到 PHP-FPM 的套接字/端口，并且可以查看状态页面。

nginx.conf：

```
location /status {

    include fastcgi_params;
    fastcgi_pass unix:/var/lib/php/php-fpm.sock;

} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-10T03:50:31.097

cgi命令行更方便：

```
SCRIPT_NAME=/status \
SCRIPT_FILENAME=/status \
REQUEST_METHOD=GET \
cgi-fcgi -bind -connect 127.0.0.1:9000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-11T04:24:40.790

您可以使用 strace 实时显示正在运行的脚本以及许多其他内容。它非常冗长，但它可以让您对正在发生的事情有一个很好的整体了解：

```
# switch php-fpm7.0 for process you're using
sudo strace -f $(pidof php-fpm7.0 | sed 's/\([0-9]*\)/\-p \1/g') 
```

以上将附加到 php fpm 的分叉进程。用于`-p`附加到特定的 pid。

以上将获得脚本路径。要获取 url，您将查看您的 nginx / apache 访问日志。

作为旁注，要查看系统调用以及哪些系统调用耗时最长：

```
sudo strace -c -f $(pidof php-fpm7.0 | sed 's/\([0-9]*\)/\-p \1/g') 
```

稍等片刻，然后按 Ctr-C

# awk - awk 中的列组

> ID：15023541
> 
> 赞同：0
> 
> 时间：2013-02-22T11:48:40.983
> 
> 标签：awk

以下 awk 语句按预期工作。

```
awk '{print $1, $2, $3}' test.txt 
```

但是我怎么说我需要第二列之后的所有列呢？

```
awk '{print $1, $2, $3 to $NF}' test.txt 
```

我需要从第三列到该行末尾的所有列。可以有 2 到 10 列，所有列都被视为最后一列的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:09:44.400

如果你只想要`$3-$NF`字段，标准方法是循环（`for/while`）

但根据您的要求，您可以：

```
awk '{$1=$2="";}sub("^ *","")' 
```

例如：

```
kent$  seq -s' ' 10|awk '{$1=$2="";}sub("^ *","")' 
3 4 5 6 7 8 9 10 
```

如果您想将 100 个字段“分组”为 3 个组：1,2、3-100：

```
awk '{x=$0;sub($1FS$2,"",x);gsub(FS,"",x);print $1,$2,x}' 
```

同样的例子：

```
kent$  seq -s' ' 10|awk '{x=$0;sub($1FS$2,"",x);gsub(FS,"",x);print $1,$2,x}'    
1 2 345678910 
```

希望这是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T12:27:39.620

直观的方式。

`awk 'BEGIN{ORS=""} {for(i=3; i<=NF; i++) if(i != NF){print $i " "} else {print $i "\n"}}' test.txt`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T21:18:03.740

多一点：

```
awk '{$1=$2=x; $0=$0; $1=$1}1' file

awk '{$1=$1; sub($1 FS $2 FS,x)}1' file 
```

为了保持间距完整：

```
awk 'sub($1 "[ \t]*" $2 "[ \t]*",x)' file 
```

# jquery - 无法更改jquery中的属性

> ID：15023543
> 
> 赞同：0
> 
> 时间：2013-02-22T11:48:43.807
> 
> 标签：jquery

我根本无法使用 jQuery 更新元素的属性。

HTML：

```
<input type="checkbox" name="row1" value="" > 
```

jQuery：

```
$(document).ready(function (event) {
    $("input[type='checkbox']").change(function (e) {
        var name = $(this).attr('name');
        // grab name of original
        var value = $(this).attr('value');
        // grab value of original
        var ischecked = $(this).is(":checked");
        //check if checked
        if (!ischecked) {
            $('#' + name).removeAttr("checked");
            alert("removed attr ");
        } else {

            $('#' + name).attr("checked", "checked");
            alert($('#' + name).attr("checked"));

        }

    });
}); 
```

当我检查时显示警报“未定义”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:52:32.550

更改`$('#' + name)`为`$(this)`

```
$('#'+name).removeAttr("checked"); 
```

到

```
$(this).removeAttr("checked"); 
```

如果使用 jQuery 1.6 或更高版本，您可以使用

```
$(this).prop("checked", false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:58:44.727

尝试改变这种方式：[**检查 jsbin**](http://jsbin.com/edekey/1/edit)

```
$(document).ready(function (event) {
  $("input[type='checkbox']").change(function (e) {
    var name = $(this).attr('name');
    var value = $(this).val();
    var ischecked = $(this).is(":checked");

    if (!ischecked) {
        $(this).prop("checked", false);
        alert("removed attr ");
    } else {
        $(this).prop("checked", true);
        alert($(":checked").val());
    }

  });
}); 
```

*`shows up an alert 'undefined' when i check.`*

这应该是因为您没有尝试检查该值`you can check the length of the **$(':checked')**`

```
alert($(":checked").length); 
```

如果您尝试检查：

```
alert($(":checked")); 
```

你会得到`[object object]`警觉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:53:55.797

'#' 适用于**id**但不适用于**名称**

```
<input type="checkbox" name="row1" id="row1" value="" > 
```

或使用**它**来获取参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T11:55:09.983

你的选择器是错误的。您尚未为复选框设置 ID。它应该是这样的：

```
$("input[name='"+name+"']").removeAttr("checked"); 
```

# autohotkey - 右对齐值列表

> ID：15023545
> 
> 赞同：0
> 
> 时间：2013-02-22T11:48:51.173
> 
> 标签：autohotkey

我是一个不规则的 AHK 用户，通常在我的知识范围内工作。我通常需要保留帮助文件。我正在使用版本 1.0.48.05 并且有问题。

简而言之 - 我想使用 Gui 接口打印一个数值列表，以便这些值在彼此下方对齐，向右对齐。我找不到一种简单或强大的方法来做到这一点。我错过了什么。这些值可以在 0 到 9999 之间变化。它们始终是整数。

=====================

这是我尝试右对齐之前的一段代码：

```
tabpos := 200
Gui, Add, Text, x%tabpos% y300, %value1%
Gui, Add, Text, x%tabpos% y320, %value2%
Gui, Add, Text, x%tabpos% y340, %value3%
Gui, Add, Text, x%tabpos% y360, %value4% 
```

这会在“tabpos”位置打印我的值，但都是左对齐的。

我第一次尝试右对齐是使用一个函数，该函数填充了由 "value" 的长度确定的多个空格。例如：

```
Gui, Add, Text, x%tabpos% y300, % pad(6, value1)

pad(width, val)
{
   ans :=  SubStr("      ", 1, width-StrLen(val)).val
   return ans
} 
```

但这效果不佳，因为数字的宽度与空格的宽度不同（或倍数）。我在函数中引入了一个倍数，对于不同的字体大小和字体，它的工作方式不同。

我的第二次尝试是根据“值”的长度将“tabpos”调整多个像素。例如 ：

```
newpos := tabpos - 9*StrLen(value1)     ; Where a digit is 9 pixels wide
Gui, Add, Text, x%newpos% y300, %value1% 
```

但这仅适用于数字恰好为 9 像素宽的情况。我想要一个更通用、更强大的方法。

我曾尝试使用 AHK SetFormat 指令，但未能取得任何效果。也许我使用不正确。无论如何，SetFormat 似乎是通过用空格填充来工作的，因此它与我第一次尝试（上图）具有相同的问题的效果相同。

===================

任何建议都将受到欢迎。

我希望该方法适用于任何字体、字体大小、粗体或正常以及显示器的 DPI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:59:45.713

怎么样...

```
Gui, Add, Text, x100 y100 w100 Right, 123
Gui, Add, Text, x100 y120 w100 Right, 123456
Gui, Add, Text, x100 y140 w100 Right, 123456789 
```

# actionscript-3 - 如何在 flex 4.5 移动版中获取 facebook 好友个人资料图片列表

> ID：15023548
> 
> 赞同：0
> 
> 时间：2013-02-22T11:49:01.180
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5

我正在使用 FacebookMobile api。我得到了朋友的 id 和名字，但没有得到图像。使用下面的代码。

```
 FacebookMobile.api("/me/friends", getStatusHandler); 
```

谁能建议我如何获得朋友的个人资料照片列表以及身份证和姓名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:05:48.773

看起来您应该使用 FQL 来获取其余信息；

[http://facebook-actionscript-api.googlecode.com/svn-history/r333/trunk/examples/FriendsListMobile_Flash/demo/models/FriendModel.as](http://facebook-actionscript-api.googlecode.com/svn-history/r333/trunk/examples/FriendsListMobile_Flash/demo/models/FriendModel.as)

# java - 如何在我的 java 游戏中保存玩家姓名和分数？

> ID：15023549
> 
> 赞同：0
> 
> 时间：2013-02-22T11:49:02.423
> 
> 标签：java, android, save, indexoutofboundsexception

我正在制作我的第一个 android 游戏。我想将用户名和分数保存到文件中并稍后读取。我正在尝试使用 arraylist 来存储 5 个用户对象。我不知道如何有效地写入文件和将其读回并存储在arraylist中。如果您知道另一种更好的方法，请告诉我。这是我用来写的方法。

```
public static void save(FileIO file) {
    preferences = file.getSharedPref();
    Editor editor = preferences.edit();
    for(int i=0;i<5;i++){
        editor.putString("username"+String.valueOf(i), User.userList.get(i).userName);
        editor.putInt("userscore"+String.valueOf(i), User.userList.get(i).highScore);
        }
    editor.commit();
} 
```

这就是我用来阅读的方法。

```
public static void read(FileIO file) {
    preferences = file.getSharedPref();
    for(int i=0;i<5;i++){
        User.userList.get(i).userName=preferences.getString("username"+String.valueOf(i), "abc");
        User.userList.get(i).highScore=preferences.getInt("userscore"+String.valueOf(i), 0);
    }

} 
```

这就是我试图显示我的高分的循环。 `for(int i=0;i<5;i++){ g.drawString(String.valueOf(i+1)+"."+String.valueOf(User.userList.get(i).userName), 100, y, paint); g.drawString(String.valueOf(User.userList.get(i).highScore),150, y, paint2); y+=80; }`

我收到 indexoutofbounds 异常

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:00:16.627

当您希望存储值时：

```
SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(Your_Activity.this);

Editor editor = sp.edit();
editor.putString("username", "<username goes here>");
editor.putInt("score", <the score goes here>);
editor.commit();   // Do not forget this to actually store the values 
```

当您希望稍后阅读这些值时：

```
String gameUsername = sp.getString("username", "default");
int gameScore = sp.getInt("score", 0); 
```

“用户名”和“分数”是他们推崇的价值观的关键。

SharedPreferences 是存储值时想到的最简单的方法。希望能帮助到你。~干杯。

# eclipse - Only to compile java file and save the class file to other directory

> ID：15023552
> 
> 赞同：1
> 
> 时间：2013-02-22T11:49:22.393
> 
> 标签：eclipse

I've got following scenario:

I wrote a Java class in Eclipse. After that I executed it. For example -a simple addition program.

The first Java file will be compiled and the generated class file is stored into the bin folder and then class file will be executed. So far so good.

My requirement is, I don't want to run the generated class file. Instead of execution, I only want to copy the class file into a different folder automatically. Is it possible in Eclipse?

# javascript - 验证电话号码的正则表达式失败

> ID：15023553
> 
> 赞同：1
> 
> 时间：2013-02-22T11:49:28.463
> 
> 标签：javascript, regex

我正在尝试使用以下格式使用`regex`. 但它在某些条件下失败了。

电话号码：

```
2323232
0112323232
011-2323232
+91-9898989898
98989898998 
```

我`regex`为上述数字写了这个：

```
^[+]?(\d{2,4}-)?(\d{7,11}) 
```

[在这里](http://regexr.com?33sck)测试过。

我在以下代码段中使用：

```
var phonePattern = /^[+]?(\d{2,4}-)?(\d{7,11})/;
if(!(phonePattern.test(formData.phone))){
    $('#errorList').append('<li>Invalid Phone Number</li>');
    error = 1;
} 
```

正则表达式适用于我需要的电话号码，但对于`formData.phone = '011-2323232asdasd'`. 我是新手`regex`，它在`javascript`. 我怎样才能让它工作？请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:51:16.100

`$`在您的正则表达式末尾添加：`^[+]?(\d{2,4}-)?(\d{7,11})$`

它的意思是“文本/行的结尾”，所以你的正则表达式需要只有数字直到字符串的结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:51:35.833

您需要在两端放置锚点*（*如`^<a-regex-goes-here>$`，否则会在比赛结束后放垃圾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:53:47.157

您需要在代码中添加“以 ($) 结尾”运算符。

```
/^[+]?(\d{2,4}-)?(\d{7,11})$/ 
```

您可能想看看这个 [http://www.regular-expressions.info/javascript.html](http://www.regular-expressions.info/javascript.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T12:41:59.237

试试这个正则表达式`/^((\+91)?-?[0\+\(]*\d{2,3}[-\s\)]*\.?\d{3,4}[-\s]*\.?[0-9]{4})$/`，这将适用于所有类型的有效电话号码。

在以下条件下返回 true：

```
1\. Just 10 digits
2\. +00 0000 0000
3\. +1 000 000 000
4\. (3 digits)<space>(3 digits)<space>4 digits
5\. (3 digits) - 3 digits - 4 digits
6\. +91-9898989898 
```

还有更多..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T16:39:23.430

我想你`$`最后错过了。采用：

```
^[+]?(\d{2,4}-)?(\d{7,11})$ 
```

# javascript - javascript中两个模块声明有什么区别？

> ID：15023560
> 
> 赞同：3
> 
> 时间：2013-02-22T11:49:54.407
> 
> 标签：javascript, module, iife

JavaScript中模块的两个声明有什么区别？一个在函数周围有括号，而另一个没有？

一篇文章说

> 注意匿名函数周围的 ()。这是语言所要求的，因为以标记函数开头的语句总是被认为是函数声明。包含 () 会创建一个函数表达式。

检查时两者似乎都做同样的事情。

```
var person = (function () {
    // Private
    var name = "Robert";
    return {
        getName: function() {
            return name;
        },
        setName: function(newName) {
            name = newName;
        }
    };
}()); 
```

```
var person = function () {
    // Private
    var name = "Robert";
    return {
        getName: function() {
            return name;
        },
        setName: function(newName) {
            name = newName;
        }
    };
}(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T12:14:11.417

JavaScript 中的函数有两种类型——声明和表达式。

这是两者之间的区别：

1.  函数声明被提升。这意味着您可以在函数出现在程序中之前调用它，因为 JavaScript 中的声明被**提升**了。
2.  可以立即调用函数表达式。函数声明不能​​。这是因为表达式**表达**（或返回值）。函数表达式表达一个函数。

**函数声明示例：**

```
foo("bar");

function foo(bar) {
    alert("foo" + bar);
} 
```

上面的程序可以工作，因为`foo`它是一个函数声明。

```
foo("bar"); // throws an error, foo is undefined - not a function

var foo = function (bar) {
    alert("foo" + bar);
}; 
```

上面的程序不能像`foo`声明的那样工作`undefined`，提升，然后分配一个函数表达式的值。因此，`undefined`当它被调用时。

**函数表达式示例：**

```
(function (bar) {
    alert("foo" + bar);
}("bar")); 
```

上面的函数将立即被调用，因为它是一个函数表达式。

```
function (bar) {
    alert("foo" + bar);
}("bar"); // throws an error, can't call undefined 
```

上面的函数不会立即被调用，因为它是一个函数声明。请记住，声明不表达（或返回值）。所以这就像试图`undefined`作为一个函数来调用。

**函数如何变成表达式？**

如果在预期表达式的上下文中使用函数，则将其视为表达式。否则，它被视为声明。

在以下情况下需要表达式：

1.  您正在为变量赋值（即`identifier = expression`）。
2.  括号内（即`( expression )`）。
3.  作为运算符的操作数（即`operator expression`）。

因此，以下都是函数表达式：

```
var foo = function () {};
(function () {});
~function () {}; 
```

其他一切都是函数声明。简而言之，如果您的函数前面没有任何内容，那么它就是一个声明。

请参阅此代码：[https ://github.com/aaditmshah/codemirror-repl/blob/master/scripts/index.js#L94](https://github.com/aaditmshah/codemirror-repl/blob/master/scripts/index.js#L94)

以下函数`isExpression`用于测试一些任意 JavaScript 代码是否为表达式：

```
function isExpression(code) {
    if (/^\s*function\s/.test(code)) return false;

    try {
        Function("return " + code);
        return true;
    } catch (error) {
        return false;
    }
} 
```

希望这可以消除您心中的任何疑问。

简而言之：

1.  函数表达式**表示**或返回一个值（在本例中为函数）。因此它可以立即被调用，但在它出现在程序中之前不能被调用。
2.  函数声明被**提升**。因此它可以在它出现在程序中之前被调用。然而，由于它不表达任何价值，它不能立即被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:56:59.530

不同的是在写的时候：

```
var foo = (function () {
          ...
}()); 
```

使用（多余但有用的）分组`()`是一种常见的编码风格，可以从第一行中清楚地看出右侧很可能是立即调用的函数表达式（IIFE）。但是，在第二个中：

```
var foo = function () {
          ...
}(); 
```

在您阅读最后一行之前，它不会变得明显，这可能是很多行。直到你到达最后一行，你可能认为你正在阅读一个简单的作业：

```
var foo = function () {
          ...
}; 
```

请注意，括号也可以用于普通赋值：

```
var foo = (function () {
          ...
}); 
```

但在那种情况下，它们确实是多余的（并且可能由于将它们用于 IIFE 的惯例而产生误导）。

请参阅[一对重要的括号](http://michaux.ca/articles/an-important-pair-of-parens)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T12:00:51.330

在当前上下文中，解释器没有区别。通常最好的编写模块的方法是用括号包装函数：

```
var person = (function () {
    // Private
    var name = "Robert";
    return {
        getName : function () {
            return name;
        }
    };
}()); 
```

那是因为语法更简洁，很明显你想在函数声明后立即调用它。还有一个原因是：

```
(function () {
    //some stuff
}()); 
```

会工作，但

```
function () {
    //some stuff
}(); 
```

这不会。

通过每次使用常见的编码风格时包装函数，这通常是一件好事:-)。

# ruby-on-rails - thumbs_up 一张最喜欢的图片（rails）

> ID：15023563
> 
> 赞同：0
> 
> 时间：2013-02-22T11:49:58.233
> 
> 标签：ruby-on-rails, boolean, voting

我遇到了[thumbs_up gem](https://github.com/bouchard/thumbs_up)的问题。

这是我的应用程序的工作方式：

Pictures act as voteable, users act as voters. 他们可以喜欢和不喜欢图片（所以加减计数也可以变为负数）。在图片数据库中：user_id, `:name`, `:image`, `:fame`. Fame 是一个布尔值，默认为 false。

这就是我现在想要做的：

每 24 小时，加减计数最高的图片的`:fame`值会从 false 变为 true，从而从图片库 (pictures#index) 中消失并出现在图片#highest 上。只有这一张图片，每24小时更换一次。

基本上我不知道如何每24小时将最喜欢的图片的布尔值更改为true，以及如何选择最喜欢的图片。任何代码表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:57:51.507

更改布尔值

```
@pic.update_attribute(:fame, true) 
```

每 24 小时尝试使用`whenever`gem

[https://github.com/javan/无论何时](https://github.com/javan/whenever)

[http://railscasts.com/episodes/164-cron-in-ruby](http://railscasts.com/episodes/164-cron-in-ruby)

选择得票最多的图片试试这个

```
@best_pic = Picture.all.sort{|a,b| b.votes.count <=> a.votes.count}.first 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:03:19.373

你的问题不是`thumbs_up`宝石。

您的问题是您不知道如何安排定期任务。

可以使用的工具是[Each gem](https://github.com/javan/whenever)。它可以让你做这样的事情：

```
# in whenever
every 24.hours do
  rake "pictures:set_fame"
end

# lib/tasks/my_task.rake
namespace :pictures do
  task :set_fame => :environment do
    # N.B.: I haven't had the chance to test this query.
    Picture.where(fame: true).first.update_attribute(:fame, false)
    Picture.order('tally DESC').first.update_attribute(:fame, true)
  end
end 
```

# android - Android：`java.lang.IllegalArgumentException：服务未注册`当调用 onStop()

> ID：15023564
> 
> 赞同：4
> 
> 时间：2013-02-22T11:50:01.180
> 
> 标签：android, service

我有一个绑定到长期运行的应用程序`Service`。我需要确保当用户离开停靠点`Activity`时。`Service`

因此我实施了`onStop()`关闭服务：

这是代码：

```
@Override    
protected void onStop() {
super.onStop();     
if(mService!=null)mService.stop();
stopService(new Intent(this, LocalService.class));
unbindService(mConnection);
stopService(intent);

} 
```

这是我的 LogCat：

```
02-22 11:42:44.393: E/AndroidRuntime(1006): FATAL EXCEPTION: main
02-22 11:42:44.393: E/AndroidRuntime(1006): java.lang.RuntimeException: Unable to destroy activity {com.example.quotes/com.example.quotes.Quotes}: java.lang.IllegalArgumentException: Service not registered: com.example.quotes.Quotes$1@40cebd80
02-22 11:42:44.393: E/AndroidRuntime(1006):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3451)
02-22 11:42:44.393: E/AndroidRuntime(1006):     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3469)
02-22 11:42:44.393: E/AndroidRuntime(1006):     at android.app.ActivityThread.access$1200(ActivityThread.java:141)
02-22 11:42:44.393: E/AndroidRuntime(1006):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1287)
02-22 11:42:44.393: E/AndroidRuntime(1006):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-22 11:42:44.393: E/AndroidRuntime(1006):     at android.os.Looper.loop(Looper.java:137)
02-22 11:42:44.393: E/AndroidRuntime(1006):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-22 11:42:44.393: E/AndroidRuntime(1006):     at java.lang.reflect.Method.invokeNative(Native Method)
02-22 11:42:44.393: E/AndroidRuntime(1006):     at java.lang.reflect.Method.invoke(Method.java:511)
02-22 11:42:44.393: E/AndroidRuntime(1006):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-22 11:42:44.393: E/AndroidRuntime(1006):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-22 11:42:44.393: E/AndroidRuntime(1006):     at dalvik.system.NativeStart.main(Native Method)
02-22 11:42:44.393: E/AndroidRuntime(1006): Caused by: java.lang.IllegalArgumentException: Service not registered: com.example.quotes.Quotes$1@40cebd80
02-22 11:42:44.393: E/AndroidRuntime(1006):     at android.app.LoadedApk.forgetServiceDispatcher(LoadedApk.java:921)
02-22 11:42:44.393: E/AndroidRuntime(1006):     at android.app.ContextImpl.unbindService(ContextImpl.java:1451)
02-22 11:42:44.393: E/AndroidRuntime(1006):     at android.content.ContextWrapper.unbindService(ContextWrapper.java:484)
02-22 11:42:44.393: E/AndroidRuntime(1006):     at com.example.quotes.Quotes.onDestroy(Quotes.java:420)
02-22 11:42:44.393: E/AndroidRuntime(1006):     at android.app.Activity.performDestroy(Activity.java:5273)
02-22 11:42:44.393: E/AndroidRuntime(1006):     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1110)
02-22 11:42:44.393: E/AndroidRuntime(1006):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3438)
02-22 11:42:44.393: E/AndroidRuntime(1006):     ... 11 more 
```

谢谢你的帮助！！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T12:33:05.947

关键是在 , 之后`onStop()`随后`onDestroy()`被调用。

但我的`onDestroy()` 是：

```
@Override    
protected void onDestroy() {
    super.onDestroy(); 
    if(mService!=null)mService.stop();
    stopService(new Intent(this, LocalService.class));
    unbindService(mConnection);
    stopService(intent);        

 } 
```

因此我试图关闭服务**两次**。但该服务**已**在`onStop()`.

不管怎么说，还是要谢谢你

# html - Twitter Bootstrap tooltip for span tag (not for a tag)

> ID：15023565
> 
> 赞同：9
> 
> 时间：2013-02-22T11:50:07.027
> 
> 标签：html, twitter-bootstrap, tooltip

My question is based on SO question [Bootstrap tooltips not working](https://stackoverflow.com/questions/9446318/bootstrap-tooltips-not-working?rq=1)

So, the solution is to use: jQuery:

```
$("[rel='tooltip']").tooltip(); 
```

html:

```
<a href="#" rel="tooltip" title="A nice tooltip">test</a> 
```

And that works perfect. My question is: what if I want to use a `<span>` tag instead of `<a>`.

Should it be `<span rel="tooltip" title="A nice tooltip">Hover on me</span>` ?

It works perfectly but I see the `rel` attribute is used for a tags.

So, what's the correct solution?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-22T14:30:13.083

您可以通过以下方式编写：

**方法一**

```
 <a title="" data-placement="top" data-toggle="tooltip" href="#" data-original-title="Tooltip on top">Tooltip on top</a> 
```

然后使用以下代码对其进行初始化：

```
$('a').tooltip(); 
```

另一种方法是使用类或 id 并一个一个地初始化它们，例如：

**方法二**

```
 <span class="top" title="A nice tooltip" data-original-title="Tooltip on right">Hover on me</span>      

<a class="top" title=""  href="#" data-original-title="Tooltip on top">Tooltip on top</a> 
```

比使用以下代码初始化它：

```
$(".top").tooltip({
placement: "top"
}); 
```

Jsfiddle[方法1](http://jsfiddle.net/shail/vSTLU/2/)

Jsfiddle[方法2](http://jsfiddle.net/shail/MxmbK/2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T12:15:55.923

如果您不想在 a 上使用`rel`属性`<span>`，只需使用类之类的其他东西并更新工具提示选择器，例如：

```
$("[rel='tooltip'], .tooltip").tooltip();

<span class="tooltip" title="A nice tooltip">Hover on me</span> 
```

您可以使用 jQuery 函数`$()`中的任何 CSS 选择器以任何方式选择页面上的任何元素。

# c# - Understanding Interfaces in OOP

> ID：15023566
> 
> 赞同：0
> 
> 时间：2013-02-22T11:50:09.353
> 
> 标签：c#, oop, interface

I am trying to learn OOP concept at an advance level. I was reading through the topic interfaces and have a confusion. But first, let me show you what exactly caused this confusion.
I tested this [Code Sample](https://stackoverflow.com/a/2026098/921321). but I am confused with the use of interfaces. After implementing that code, it seems to me that I can call the method DoFirst from class A by simply creating an instance of it. so why use an interface at first place?

Something like this:

```
A myA = new A();
myA.DoFirst(); 
```

and similiarly,

```
B myB = new B();
myB.DoFirst(); 
```

In both the classes, i have to implement a method called 'DoFirst', so what good does interface provided to me?

Can't I just write these methods in different classes myself?

my Second question, say I have an interface that has 5 methods. If a class implements it, and only wants to provide implementation of 3 methods instead of writing code of all 5 methods supplied by the interface. Isn't this useless? why have access methods that i don't want?

can somebody answer these with example (Highly appreciated) please?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:59:18.120

您提供的链接中已经指出了优势......基本上你也可以写

```
void DoSomething(IMyInterface obj)
{
    obj.DoFirst();
} 
```

然后发送实现该接口的任何类型的对象作为参数。

```
A myA = new A();
DoSomething(myA);
B myB = new B();
DoSomething(myB); 
```

该方法`DoSomethig`不关心对象的类型，只要它公开一个名为`IMyInterface`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T12:09:13.147

一些现实生活中的例子——也是使用接口的另一种方式/原因。

在我自己的代码中，我有一个引擎，它处理代码以在 Excel 中生成报告。在这个引擎中，我必须以两种不同的方式编写代码，一种使用 Microsoft Excel Interop，另一种使用 Open Office Interop。我没有复制我的整个引擎以两种不同的方式工作，或者在所有实际的互操作函数中编写大量 if 语句，而是实现了一个接口。然后我声明了两个类，每个类都实现了接口，但是一个使用Excel，另一个使用open office。然后，在我的代码中，我简单地引用了接口及其函数，并在函数的最开始使用一个 if 语句来告诉接口要实现哪个类。

```
public class ExcelEngineInterop : ISSinterface
{ ... }

public class OOEngineInterop : ISSinterface
{ ... }

//cant use two variables with the same name, so use 1 interface reference instead
ISSinterface ssInt;
if(ExcelFlag)
    ssInt = new ExcelEngineInterop();
else
    ssInt = new OOEngineInterop();

//two VERY different functions between Excel and OpenOffice.
ssInt.OpenApp();
ssInt.OpenFile(fileName);

//etc etc and so on 
```

这是使用接口的另一个原因。当您需要一个代码块根据某些外部标志执行两种（或更多）不同的方式时。

另一个例子。

有一个顶级表单，其下有许多自定义用户控件。用户触发表单级事件，例如按钮单击，但根据哪些用户控件处于活动状态以及单击发生时它们上的设置，控件本身需要做一些不同的事情。与其编写大量的 if 语句来确保每个语句从顶层正确运行，不如在每个控件上实现一个接口，然后执行以下操作：

```
public ButtonClick(object sender, EventArgs e)
{
    //note: I dont know which of my classes currentrightcontrol belongs to at the moment.
    //      it could be any one of 22 different controls. It must be cast to something
    //      in order to call the ButtonClick method (its actual type is generic "UserControl"

    IMyRunControl ctrl = CurrentRightControl as IMyRunControl;
    ctrl.FormButtonClicked();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:55:13.747

C# 是一种静态类型语言（至少除非你明确告诉它不是）。这意味着编译器使用变量的类型来知道被引用的对象是否有你将要使用的成员。

因此，该接口为编译器（以及其他程序员）提供了该类实现该接口的协定。因为接口可以在没有层次关系的类之间共享，这意味着您可以通过在参数类型中定义该接口来定义一个可以将对象作为参数的方法。

# java - Delete all files in a directory but not the directory every 24 hours

> ID：15023570
> 
> 赞同：0
> 
> 时间：2013-02-22T11:50:15.687
> 
> 标签：java, delete-file

I am looking to do some java, that will delete all the contents of a directory every 24 hours, what is the best approach to doing this? I have found a lot of ways using php but not java.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:53:29.807

> 这样做的最佳方法是什么

假设您确实需要在 Java 中执行此操作：

1.  编写一个 java 方法，使用 (例如) 遍历目录中的文件`File.listFiles()`。为每一个电话`File.delete()`。（如果目录包含子目录，它会有点复杂......取决于您希望对子目录发生什么。

2.  编写一些 java 代码，每 24 小时调用一次前一个方法。

参考：

*   javadocs 用于[`java.io.File`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)
*   [`java.util.Timer`](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)可用于定期运行任务的 javadoc 。

或者，您可以使用 Google 找到一些现有代码。（但我不会去找你。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:55:28.980

我知道你说 java ...但是.. 如果你使用的是 unix，请使用 crontab

```
crontab -e

0 1 * * * rm -rf /path/to/mydir/* 
```

每晚凌晨 1 点删除目录中的所有文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T12:05:50.530

在 Windows 机器中，您可以：

`at 00:00 /every:M,T,W,Th,F,S,Su "cmd /c del /f/s/q c:\path\to\dir"`

每天（午夜）`c:\path\to\dir`安静地删除所有内容（包括子目录） 。`00:00`

用于`at /delete`禁用计划任务。

[您可以在此处](http://technet.microsoft.com/en-us/library/bb726974.aspx)阅读有关 At Utility 的更多信息。

# javascript - Why is XMLHttpRequest so slow on localhost

> ID：15023575
> 
> 赞同：2
> 
> 时间：2013-02-22T11:50:31.693
> 
> 标签：javascript, jquery, ajax, xmlhttprequest, xmlhttprequest-level2

We're developing an application that uses XMLHttpRequest for uploading files with drag&drop support. We're using a jQuery plugin for that, but it's not the issue here.

Our tester has reported that uploading files on localhost takes a serious amount of time, considering he's basically sending files to his own machine through the browser. 20 MB file was uploading about 30 seconds (!).

I was assigned to investigate the problem and I found out that the problematic thing is XMLHttpRequest. When I've forced a fallback mechanism (iframe, works but has no progress bar support), the same file our tester was uploading took less than a second.

I've written a simple testing script to see what's the deal is (it's **very** quick and dirty, don't judge me)

```
# var file was leaked from our jquery uploader, it's basically input.files[0] where input = <input type="file">
average = 0; 
averages = []; 
previous = 0; 
previous_time = 0; 

x = new XMLHttpRequest;
x.open("POST", "/something/accept_file?upload_param_name=file", true);

x.upload.onprogress = function(e) { 
    now = e.loaded; 
    now_time = Date.now(); 
    diff = now - previous; 
    diff_time = now_time - previous_time; 
    console.log("speed", (diff / diff_time)); 
    averages.push((diff / diff_time)); 
    previous = now; 
    previous_time = now_time; 
}

x.onreadystatechange = function() { 
    if (x.readyState == 4) { 
        for(i=0, l=averages.length; i < l; i++) { 
            average += averages[i] 
        } 
        console.log("AVG SPEED: ", average/averages.length) 
    } 
}

x.setRequestHeader("X-Requested-With", "XMLHttpRequest");
x.setRequestHeader("X-File-Name", "test");
x.setRequestHeader("Content-Type", "application/octet-stream");
x.send(file); 
```

*   Average speed of uploading file to the same server: **488.3 KB/s**
*   Average speed of uploading file to the remote server: **801.7 KB/s** (which sounds about right considering our office internet connection)

Now my question is: **why is XMLHttpRequest with binary files so slow?** It looks to me like it sends the file through all our network so it passes through our router again, but Networking section in Task Manager didn't register any network activity spike (it did when uploading to the remote server though) or I am doing something wrong.

**edit:** As I see, any mention of keywords "jQuery plugin" makes people think in wrong terms, so:

```
x = new XMLHttpRequest;
x.open("POST", "/something/accept_file?upload_param_name=file", true);
x.send(file); 
```

This is enough to trigger the problem (slow upload). No jQuery, no fancy callbacks and progress bars, no chunking - three lines of code.

# macos - I can't find nsight eclipse and cuda samples after installing CUDA5.0 on my macbook pro

> ID：15023576
> 
> 赞同：0
> 
> 时间：2013-02-22T11:50:35.013
> 
> 标签：macos, cuda, installation

I'm a student who starts to learn CUDA programming. But I can't install the CUDA toolkit on my macbook pro retina 15 successfully . I've checked the installing instruction, and I have installed the gcc from Xcode. However, it only took me about 1 minute to install cuda_5.0.36_macos.pkg which not seems like reasonable. In fact, I can't find the nsight eclipse and other softwares , and there is no sample in ./Developer/NVIDIA/CUDA-5.0/. It's my first time to use OS X and I don't know how to solve the problem now.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T20:28:11.060

The path is `/Developer/NVIDIA` and not `./Developer/NVIDIA`. After installation the path to the bin folder is not set, thus terminal does not find it. But you find nsight in the bin folder at `/Developer/NVIDIA/CUDA-x.y/bin`

# php - 如果我想包含另一个文件夹，如何获取链接路径

> ID：15023579
> 
> 赞同：3
> 
> 时间：2013-02-22T11:50:42.983
> 
> 标签：php

我想知道如何提供另一个文件夹的包含路径。

例如，我有一个名为 test 文件夹的项目。在 test 文件夹中有一个文件夹，即 assets 文件夹和 index.php 文件。在 assets 文件夹中有两个文件夹，分别是 include 和 xyz 文件夹。在 include 文件夹中有两个文件，分别是 header.php 和 footer.php。在 header.php 文件中有三个链接 home、product 和 customer。在 xyz 文件夹中有 product.php 和 customer.php 文件。

在 index.php、product.php 和 customer.php 中，我想包含 header.php 和 footer.php。

但我不能正确的道路。

```
<?php include('../../header.php');?> 
```

............

```
<?php include('../../footer.php');?> 
```

请帮助我，我怎样才能给出正确的路径，如果我点击产品链接然后 header.php 和 footer.php 将被加载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:51:47.367

试试这个 ：

```
<?php
include_once(dirname(__FILE__) . '/database.class.php');
?> 
```

参考： http: [//php.net/manual/en/function.dirname.php](http://php.net/manual/en/function.dirname.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T12:00:34.247

如果您的目录看起来像这样：

```
src
->includes
  ->header.php
  ->footer.php
web
->index.php 
```

如果您想在 index.php 中包含页眉和页脚，请执行以下操作：

```
<?php
   //index.php
   include __DIR__.'/../src/includes/header.php';
   echo "foobar";
   include __DIR__.'/../src/includes/footer.php';
?> 
```

[http://php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T15:54:27.647

基本上我用过如下

```
<?php include_once('../include/header.php');?>
<?php include_once('../include/footer.php');?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T12:00:30.903

```
echo realpath('../../header.php');
echo realpath('../../footer.php'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T16:24:51.187

我认为如果你可以更换

```
 ../../header.php by ../include/header.php and

../../footer.php by ../include/footer.php. 
```

然后你会得到准确的结果。

# iphone - 如何通过单击文本字段转到另一个视图？

> ID：15023581
> 
> 赞同：1
> 
> 时间：2013-02-22T11:50:44.173
> 
> 标签：iphone, ios

我有一个简单的问题，如何将文本字段连接到另一个控制视图，如果我单击文本字段，而不是显示键盘，它会跳转到另一个视图

感谢您的回答

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T11:53:00.393

在 TextField 的委托方法中`textFieldShouldBeginEditing`，添加从当前视图到另一个视图的代码。

或者您可以在 TextField 上使用点击手势识别器来进行触摸。

这是代码：

在您的 IB 中创建一个 TextFied 并将其连接到 .h 文件

```
@interface ViewController : UIViewController<UITextFieldDelegate>

@property (strong, nonatomic) IBOutlet UITextField *firstTF; 
```

在 .m 文件中添加这个

```
@synthesize firstTF;

- (void)viewDidLoad
{
    [super viewDidLoad];
    firstTF.delegate= self;
}

-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField{
    secondViewController *ainfoController = [[secondViewController alloc] initWithNibName:@"secondViewController" bundle:nil];

    [self presentModalViewController:ainfoController animated:YES];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T12:00:04.563

如果您通过代码添加文本字段，那么，

```
UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(x, y, width, height)];
textField.delegate = self;
[self.view addSubview:textField]; 
```

并添加此方法

```
- (BOOL) textFieldShouldBeginEditing:(UITextField *)textField{
     // you can add the code for present a new viewController here
     return NO;
} 
```

确保您已在 .h 文件中添加 UITextFieldDelegate

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T12:31:34.167

我真的不明白你为什么需要这个，但作为一名开发人员，我们坚信要实现所有场景，所以在你的情况下，你可以通过遵循下面提到的任何一个技巧来实现同样的目标：

1) 在这种方法中，您需要覆盖 textfieldshouldbegin 委托并使用导航代码从一个屏幕移动到另一个屏幕，并且不要忘记在此处调用 resignFirstResponder。

2）在第二种方法中，您可以做什么，只需重叠一个自定义按钮（既没有图像也没有任何文本），然后在他的点击事件方法上编写您的导航代码以移动另一个屏幕。

做那件事，你会得到你想要的，如果你仍然发现任何困难，就对我大喊大叫。

# r - Shiny R localhost Server not working

> ID：15023582
> 
> 赞同：1
> 
> 时间：2013-02-22T11:50:44.353
> 
> 标签：r, shiny

I have been trying Shiny with R and loved the concept. I have been looking at many examples online and everything is working just fine. When i try to run the exact same example on my localhost server, I can see the text etc, tables but no images etc. It seems I have a JSON error in my browser. I dont understand why it is not happening when I browse online example. There is a png file in the example. Shiny struggles to generate this?

Thank you for your help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:45:59.807

听起来您使用的是 Internet Explorer 8 或 9，或者其他不支持 websockets 的浏览器。在没有 Shiny Server 的情况下运行 Shiny 应用程序需要相当新的 Chrome、Firefox、Safari 或 IE10 版本。（可能还有 Opera，但我们不对其进行测试。）

您看到的在线示例都使用 Shiny Server，它允许使用许多旧浏览器来使用应用程序。

# xcode - Saving multiple objects to plist and somehow sorting them in to categories

> ID：15023583
> 
> 赞同：1
> 
> 时间：2013-02-22T11:50:48.850
> 
> 标签：xcode, plist

So I am currently making a scanApp where it is necessarry to sort different objects in to different categories. So when the user scans a code and gets the result text the result should be saved into the plist file with that category.

This is my approach currently.

```
 values = [[NSMutableArray alloc]initWithObjects:resultText.text, nil];
        [values writeToFile:[self saveFilePath] atomically:YES];

- (NSString *) saveFilePath {
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [[path objectAtIndex:0] stringByAppendingString:@"savefile.plist"];
} 
```

It is the way that I've learnt, but how can I save things with (keys maybe) so that I can sort them.

Also how can I read the items with just that specific category.

Thanks everyone :)

# opencv - Using 32 bit ARGB camera buffer to initialize OpenCV Mat

> ID：15023588
> 
> 赞同：0
> 
> 时间：2013-02-22T11:51:01.857
> 
> 标签：opencv, camera, argb

I'm trying to initialize a Mat using a camera buffer that is holding a 32 bit ARGB frame. These are the steps I have taken till now:

```
cv::Mat src = cv::Mat(cv::Size(img_height, img_width),CV_8UC4);
memcpy(src.ptr(), (void*) img_buffer,img_height * img_width * 4);

cv::Mat dest= src.clone();

cv::cvtColor(src,dest,COLOR_BGRA2BGR); 
```

This leads to a segfault. Still occurs even if dest is initialized as

```
cv::Mat dest=cv::Mat(src.size(),src.type()); 
```

Would appreciate any help on this.

**UPDATE**

So I'm trying to untangle the order manually, like this:

```
int rgb_temp[4];
for(int y=0; y < (int)img_height; y++) {
    for(int x=0; x < (int)img_width; x++) {
        rgb_temp[0] = (unsigned int)img_buffer[(int)img_stride * y + x + 0]; // A
        rgb_temp[1] = (unsigned int)img_buffer[(int)img_stride * y + x + 1]; // R
        rgb_temp[2] = (unsigned int)img_buffer[(int)img_stride * y + x + 2]; // G
        rgb_temp[3] = (unsigned int)img_buffer[(int)img_stride * y + x + 3]; // B
        src.data[ (y + x)  + 0] = rgb_temp[3]; // B
        src.data[ (y + x)  + 1] = rgb_temp[2]; // G
        src.data[ (y + x)  + 2] = rgb_temp[1]; // R
        src.data[ (y + x)  + 3] = rgb_temp[0]; // A
    }
} 
```

But to no avail. I am able to read the ARGB values from the img_buffer but am unable to write to the src.data. Is this a right way to take?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:05:37.043

您可以使用以下结构：

```
Mat::Mat(int rows, int cols, int type, void* data, size_t step=AUTO_STEP) 
```

在您的情况下，它将您的数据映射到 OpenCV 格式，这是：

```
cv::Mat src(img_height, img_width ,CV_8UC4, img_buffer)
cv::Mat dst;
src.copyTo(dst); 
```

但要小心第一行不是复制数据。

# objective-c - NSTableView 中每个图像的不同工具提示

> ID：15023589
> 
> 赞同：1
> 
> 时间：2013-02-22T11:51:04.220
> 
> 标签：objective-c, cocoa, tooltip, nstableview, nsimagecell

我有`NSTableView`一个`NSImageCell`在里面。我想添加一个工具提示，当我用鼠标悬停图像时，我会得到一个带有图像路径的工具提示。做这个的最好方式是什么？

我遇到的问题是：

*   检索悬停图像的路径
*   在工具提示中显示它

请保持你的答案简单，我是新手。

- -编辑 - -

附加信息： myarray.arrangedobjects 填满表格。它是一个 NSMutableDictionaries 数组。字典有以下键：

*   图像（我想在表格中放置工具提示的那个）
*   图像路径（我想在工具提示中显示的文本）
*   文件名（显示在另一个单元格中）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T12:06:15.740

您将需要为 提供一个委托`NSTableView`并实现此委托方法：

```
– tableView:toolTipForCell:rect:tableColumn:row:mouseLocation: 
```

[您可以在此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSTableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSTableViewDelegate)找到该`NSTableViewDelegate`协议的文档。您需要确保将代理插入使用 IB 上的代理插座。除非已完成，否则不会调用您的方法。此外，值得注意的是，此委托方法是按需调用的，而不是预先调用的，因此在您将鼠标悬停在单元格上之前不会调用它。这种方法应该适用于具有数据源的表和使用绑定的表。`NSTableView`

我在 GitHub 上放了一个[简单的例子。](https://github.com/ipmcc/SOExamples/tree/master/bindings/SOToolTip)

# sql - how to insert yes/or in the database based on chexkbox checked or unchecked

> ID：15023591
> 
> 赞同：1
> 
> 时间：2013-02-22T11:51:13.173
> 
> 标签：sql, vb.net, checkbox

How to add Yes or no in the database using a check box based on check or uncheck if check then Yes and vice versa.?

```
Private Sub CheckBox1_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox1.CheckedChanged
    If CheckBox1.Checked Then
        Dim dbprovider As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\Taher\Documents\Visual Studio 2010\Projects\WindowsApplication1\WindowsApplication1\Database1.accdb;Persist Security Info=False;"
        Me.con = New OleDb.OleDbConnection()
        con.ConnectionString = dbprovider
        con.Open()

        Dim sqlquery As String = "INSERT INTO Company (dev)" + "VALUES ('" Yes "')
        Dim sqlcommand As New OleDb.OleDbCommand(sqlquery)
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:09:29.203

使用这种方式

```
Private Sub CheckBox1_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox1.CheckedChanged

    Dim dbprovider As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\Taher\Documents\Visual Studio 2010\Projects\WindowsApplication1\WindowsApplication1\Database1.accdb;Persist Security Info=False;"
    Me.con = New OleDb.OleDbConnection()
    con.ConnectionString = dbprovider
    con.Open()
    Dim sqlquery As String

    sqlquery = "Insert into Company (dev) values ('" + IIf(CheckBox1.Checked, "yes", "no") + "')"

    Dim sqlcommand As New OleDb.OleDbCommand(sqlquery)
    sqlcommand.executeNonQuery() 
```

结束子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:55:45.400

使用 sql 类型`BIT`来表示 False (0) 或 True (1)。您可以使用 TRUE 和 FALSE 来插入数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T11:55:54.210

复选框本质上是布尔输入。您可以使用相当多的方法将它们的值存储在数据库中，这些是最常见的： - 布尔字段（真/假） - 数字字段（1 代表真，0 代表假）

使用布尔关键字 TRUE 和 FALSE

TRUE 等于是 FALSE 等于否

```
UPDATE tablename SET field1 = TRUE, field2 = FALSE;

INSERT INTO tablename SET field1 = TRUE, field2 = FALSE ; 
```

希望这可以帮助

# llvm - LLVM: Cannot select: intrinsic %llvm.spu.si.sf

> ID：15023592
> 
> 赞同：2
> 
> 时间：2013-02-22T11:51:15.307
> 
> 标签：llvm, clang, intrinsics

I am getting this error

```
> clang -std=c99 -c derivative.c -o derivative.a
fatal error: error in backend: Cannot select: intrinsic %llvm.spu.si.sf 
```

when I try to compile this simple C program with Clang

```
#include <stdio.h>
#include <math.h>

int N = 100;
double H = 0.001;
double PI = 3.14159265;

void derive(double* input, long elements, double* output) {
  for (int i = 1; i < elements - 1; i++) {
    output[i - 1] = (input[i + 1] - input[i - 1])/ (2 * H);
  }
}

int main() {
  double f[N];
  double f_prime[N - 2];

  for (int i = 0; i < N; i++) {
    f[i] = sin(i * 2 * PI / (double)N);
  }

  derive(f, N, f_prime);

  for (int i = 0; i < N - 2; i++) {
    printf("%f  %f\n", i * 2 * PI / (double)N, f_prime[i]);
  }
} 
```

I already searched the Internet, but was not (yet) able to find a solution.

When I compile to Bitcode, it compiles but the execution dumps core.

```
> clang -emit-llvm -c derivative.c -o derivative.bc
> lli derivative.bc
lli: BitcodeReader.cpp:283: llvm::Value* llvm::BitcodeReaderValueList::getValueFwdRef(unsigned int, llvm::Type*): Assertion `(Ty == 0 || Ty == V->getType()) && "Type mismatch in value table!"' failed.
0  lli             0x0000000000c6fb02
1  lli             0x0000000000c6ff93
2  libpthread.so.0 0x00007f304d7dbbd0
3  libc.so.6       0x00007f304ca19037 gsignal + 55
4  libc.so.6       0x00007f304ca1c698 abort + 328
5  libc.so.6       0x00007f304ca11e03
6  libc.so.6       0x00007f304ca11eb2
7  lli             0x000000000052eeb0 llvm::BitcodeReaderValueList::getConstantFwdRef(unsigned int, llvm::Type*) + 0
8  lli             0x0000000000538943 llvm::BitcodeReader::ParseFunctionBody(llvm::Function*) + 10275
9  lli             0x000000000053acb1 llvm::BitcodeReader::Materialize(llvm::GlobalValue*, std::string*) + 241
10 lli             0x0000000000535195 llvm::BitcodeReader::MaterializeModule(llvm::Module*, std::string*) + 85
11 lli             0x0000000000c0a82f llvm::Module::MaterializeAllPermanently(std::string*) + 31
12 lli             0x00000000005360fc llvm::ParseBitcodeFile(llvm::MemoryBuffer*, llvm::LLVMContext&, std::string*) + 44
13 lli             0x00000000004f70b7
14 lli             0x00000000004e74f3 main + 339
15 libc.so.6       0x00007f304ca03ea5 __libc_start_main + 245
16 lli             0x00000000004f0f41
Stack dump:
0\.  Program arguments: lli derivative.bc 
Aborted (core dumped) 
```

Trying `llvm-dis` on the bc-file yields an almost identical core dump.

**EDIT**: I tried to find the minimal failing example, and it seems, the problem is defining the array size via the constant.

this fails:

```
int main() {
  int N = 100;
  double f[N];
} 
```

this works:

```
int main() {
  double f[100];
} 
```

**EDIT2**:

Changing `int N = 100` to `const int N = 100` makes the program compile with Clang. It makes sense that the variable should be `const`, but on the other hand, `gcc -std=c99 -Wall derivative.c -lm` does not complain if it is not `const`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T12:17:41.773

这是 ubuntu 错误：[https](https://bugs.launchpad.net/ubuntu/+source/llvm-3.2/+bug/1131614) ://bugs.launchpad.net/ubuntu/+source/llvm-3.2/+bug/1131614 。看起来他们盲目地修补了llvm + clang，而不了解他们在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:58:03.650

致命错误消息表明您在编译器中发现了错误。尝试在 llvm.org/bugs 报告错误。

# amazon-web-services - AWS SQS SendMessage Auth Signature Version 2

> ID：15023596
> 
> 赞同：2
> 
> 时间：2013-02-22T11:51:28.977
> 
> 标签：amazon-web-services, digital-signature, amazon-sqs

I've been going crazy over this for hours. I'm trying to use the SendMessage API call to the Amazon SQS message queue.

I'm following the Signature Version 2 method ([http://docs.aws.amazon.com/general/latest/gr/signature-version-2.html](http://docs.aws.amazon.com/general/latest/gr/signature-version-2.html))

I receive the error for a non matching signature. I've been thinking it has to do with the lexicographic byte ordering but I've spent hours trying to figure it out and had no luck :-/

I can send a message successfully with this as my "query string components": "AWSAccessKeyId=AKIAIEXAMPLE&Action=SendMessage&Expires=2013-02-22T12%3A19%3A30&MessageBody=12321&SignatureMethod=HmacSHA256&SignatureVersion=2&Version=2012-11-05"

broken down as these name value pairs for easy reading:

["AWSAccessKeyId", "Action", "Expires", "MessageBody", "SignatureMethod", "SignatureVersion", "Version"]

["AKIAIEXAMPLE", "SendMessage", "2013-02-22T12%3A19%3A30", "12321", "HmacSHA256", "2", "2012-11-05"]

But NOT with this set of query string components:

"AWSAccessKeyId=AKIAIEXAMPLE&Action=SendMessage&Expires=2013-02-22T12%3A19%3A30&MessageBody=234&SignatureMethod=HmacSHA256&SignatureVersion=2&Version=2012-11-05"

broken down as:

["AWSAccessKeyId", "Action", "Expires", "MessageBody", "SignatureMethod", "SignatureVersion", "Version"]

["AKIAIEXAMPLE", "SendMessage", "2013-02-22T12%3A19%3A30", "234", "HmacSHA256", "2", "2012-11-05"]

The only difference between the two is the MessageBody's value (12321 works, 234 doesn't) and I've tried a variety of values, both using characters and integers and can't seem to put my finger on the problem.

Any suggestions would be greatly appreciated.

# javascript - 在 IExplorer 中检测字体下载权限

> ID：15023605
> 
> 赞同：4
> 
> 时间：2013-02-22T11:51:56.467
> 
> 标签：javascript, internet-explorer, font-face, embedded-fonts

我在 HTML 页面中使用动态字体（字体）。

我看到有时，IExplorer 用户没有下载字体的权限。这是安全设置的选择。

如果浏览器允许字体下载，是否可以使用 Javascript 进行检测？在这种情况下，我可以显示一个警报，或者我可以使用另一种技术作为 Cufón。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T10:40:39.183

此[Web 字体加载器会将](https://github.com/typekit/webfontloader)[事件](https://github.com/typekit/webfontloader#events)附加到您的`html tag`.

对我很有用。

# mysql - 将数据库表转储到文本文件

> ID：15023613
> 
> 赞同：0
> 
> 时间：2013-02-22T11:52:21.590
> 
> 标签：mysql, windows-server-2008

我正在尝试通过运行以下查询将 MySQL 数据库中的表转储到文本文件中

```
 SELECT fields FROM text_file_table INTO OUTFILE 'C:\\Program Files\\textfile.text' 
```

但它给了我错误 **无法创建/写入文件“C:\Program Files\textfile.text”**

我认为这是由于安全问题，它不允许 DBMS 将文件写入该目录。如果还有其他问题，请告诉我，并帮助我找到问题的解决方案。我正在 Windows Server 2008 上执行此操作。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:56:34.060

可能有两个问题。该命令在操作系统中作为“mysql”运行，因此“mysql”用户可能没有写入 c:\Program Files 的权限。它不应该，所以这很好。如果您将目标路径更改为可以写入的位置，则此问题将消失。

另一个问题是您在 mysql 中登录的用户可能没有读取和写入文件的权限 - 请参阅[http://dev.mysql.com/doc/refman/5.1/en/privileges-provided.html#隐私文件](http://dev.mysql.com/doc/refman/5.1/en/privileges-provided.html#priv_file)。如果这是问题所在，则您必须拥有`GRANT`用户的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:04:24.047

我认为问题出在路径上。如果您使用的是窗户

查询中的文件路径应该是这样的

```
'C:/Program Files/textfile.txt' 
```

或者试试这个，我不确定

```
'C:\Program Files\textfile.txt' 
```

在文件名的文本中也使用 txt =>`textfile.text`

# sql - 用于检查数组中是否包含任何元素的 SQL 查询

> ID：15023614
> 
> 赞同：0
> 
> 时间：2013-02-22T11:52:22.880
> 
> 标签：sql, ruby-on-rails-3, activerecord

`u/1u/3u/19/g1/g4`我有一个数据库列，其中包含一个字符串，该字符串对于特定行可能看起来像这样。

是否有一种高效的方法来获取该列中至少包含以下元素之一的所有行`['u/3', 'g4']`？

我知道我可以使用`AND`子句，但是要验证的元素数量会有所不同并且可能会变得很大。

我在我的项目中使用 RoR/ActiveRecord。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:55:29.367

在 sql server 中，您可以使用 XML 将搜索参数列表转换为记录集，然后将其与基表交叉连接，并执行 charIndex() 以查看列是否包含子字符串。

由于我不知道您的表名或列名，因此我使用了一个已包含数据的表（人员），其中有一列“phone_home”。要搜索包含“202”或“785”的任何电话号码，我将使用以下查询：

```
select  person_id,phone_home,Split.data.value('.', 'VARCHAR(10)')
from    (select *, cast('<n>202</n><n>785</n>' as XML) as myXML
        from persons) as data cross apply myXML.nodes('/n') as Split(data)
where charindex(Split.data.value('.', 'VARCHAR(10)'),data.phone_Home) > 0 
```

如果匹配多个值，您将获得重复的记录，因此请在其中抛出一个 distinct 并在不需要的情况下从 select 语句中删除 Split。

在 sql 中使用 xml 对我来说是巫术魔法......我从这篇文章中得到了这个想法[http://www.sqljason.com/2010/05/converting-single-comma-separated-row.html](http://www.sqljason.com/2010/05/converting-single-comma-separated-row.html)

不知道性能如何……但至少没有任何游标或动态 sql。

编辑：转换 XML 非常慢，所以我把它变成了一个变量，所以它只被转换一次。

```
declare @xml XML
set @xml = cast('<n>202</n><n>785</n>' as XML)

select  person_id,phone_home,Split.persons.value('.', 'VARCHAR(10)')
from    persons cross apply @xml.nodes('/n') as Split(persons)
where charindex(Split.persons.value('.', 'VARCHAR(10)'),phone_Home) > 0 
```

# java - 安卓进度对话框

> ID：15023616
> 
> 赞同：0
> 
> 时间：2013-02-22T11:52:32.723
> 
> 标签：java, android, progressdialog

如何显示此代码的 ProgressDialog？

```
 try{

            leggiNews = Pattern.compile("<p><a href='(.*?)' class='rossobig'>(.*?)</a><br/>(.*?)</p>"); 

            leggi = leggiNews.matcher(getURL("http://www.example.com/"));

                      } catch(UnknownHostException tt){
                             Toast t=Toast.makeText(MainActivity.this, "NESSUNA CONNESSIONE DISPONIBILE!\nATTIVA LA RETE PER QUESTO SERVIZIO.", Toast.LENGTH_LONG);
                             t.setGravity(Gravity.TOP, 0, 240);
                             t.show();
                         }catch (Exception e) {  
                                Toast t=Toast.makeText(MainActivity.this, "[ERRORE GENERICO!]\n"+e, Toast.LENGTH_LONG);
                                 t.setGravity(Gravity.TOP, 0, 240);
                                 t.show();
                } 
```

专门针对 getURL() 方法：

```
static final String getURL(String u)throws IOException {
    URL url = new URL(u);
     InputStream content = (InputStream) url.getContent();
      BufferedReader in = new BufferedReader(new InputStreamReader(content));
      String line;
      String a="";
        while ((line = in.readLine()) != null) {
             a+=line; 
             }
      in.close();
      content.close();   
   return a;
   } 
```

getURL 方法始终在同一个类中，如何正确插入 ProgressDialog？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:09:32.510

您可以使用不同的 Thread 进行网络操作，如下所示

```
 ProgressDialog progress = ProgressDialog.show(this, "", "Loading ...", true);
 new Thread(new Runnable(){
       @Override
       public void run(){
          try{
                leggiNews = Pattern.compile("<p><a href='(.*?)' class='rossobig'>(.*?)</a><br/>(.*?)</p>"); 
                leggi = leggiNews.matcher(getURL("http://www.example.com/"));
          } catch(UnknownHostException tt){
                         tt.printStackTrace();
          } catch (Exception e) {  
                           e.printStackTrace();
            } 
          runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        progress.dismiss();
                    }
                });

      }
 }).start(); 
```

请确保 ProgressDialog 的对象在这里是类变量

# c# - 登录用户在索引页面中的角色

> ID：15023617
> 
> 赞同：0
> 
> 时间：2013-02-22T11:52:33.073
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我想在索引控制器中运行以下代码

```
public ActionResult Index()
{
    if(User!=null)
    {
        if(0==(Roles.GetRolesForUser(username).ToList().Contains("administrator")))
        {
            //do something
        }
    }
    return View();
} 
```

`GetRolesForUser`我在加载索引页面时遇到异常，尤其是在`User`不为空时（用户在线/登录）

异常要求我调用`WebSecurity's InitializeRoles`_appStart.cshtml 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:12:34.483

该`Controller.User`属性永远不会为空。当用户未登录时，`User`仍会引用一个`IPrincipal`实例。但是，`User.Identity.Name`将等于一个空字符串。此外，`User.IsAuthenticated`将等于`false`.

尝试这个：

```
public ActionResult Index()
{
    if (User.IsInRole("administrator"))
    {
        // do something
    }
    return View();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:52:55.720

如果您还没有，您必须在 web.config 中启用角色管理器。

看到这篇文章：[https ://stackoverflow.com/a/12980969/1502563](https://stackoverflow.com/a/12980969/1502563)

以下链接答案的片段：

```
<roleManager enabled="true" defaultProvider="SimpleRoleProvider">
  <providers>
    <clear/>
    <add name="SimpleRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData"/>
  </providers>
</roleManager>
<membership defaultProvider="SimpleMembershipProvider">
  <providers>
    <clear/>
    <add name="SimpleMembershipProvider" 
         type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData"/>
  </providers>
</membership> 
```

哦，当然 - 您还需要创建角色管理员。

有关从头开始的一些方法，请参阅这些链接：

[http://odetocode.com/blogs/scott/archive/2012/09/05/seeding-membership-amp-roles-in-asp-net-mvc-4.aspx](http://odetocode.com/blogs/scott/archive/2012/09/05/seeding-membership-amp-roles-in-asp-net-mvc-4.aspx)

[http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/)

# asp.net - HTML 行自动调整大小以适应窗口

> ID：15023618
> 
> 赞同：0
> 
> 时间：2013-02-22T11:52:42.643
> 
> 标签：asp.net, html, resize, telerik, row

我有一个 HTML 表格（黑色），它填充了一个窗口（蓝色）。该表包含两行。当我调整窗口大小时，第 1 行（红色）高度必须是可变的，第 2 行（绿色）高度必须是恒定的。

第 1 行内容是动态生成的（标签条和树视图 - 都是 Telerik）。

第 2 行包含两列。

换句话说，如何在调整窗口大小时使第 1 行自动调整大小？

![在此处输入图像描述](../Images/36701389ed061e7767d4b44f1f54fe01.png)

到目前为止，我所做的只是：

```
<table style="width:100%;">
    <tr style="height:100%;vertical-align:top;overflow:auto">
        <td colspan="2">
            <telerik:RadTabStrip ID="RadTabStrip1" runat="server" MultiPageID="RadMultiPage1" SelectedIndex="0" Width="100%" Height="100%">
                <Tabs>
                    <telerik:RadTab runat="server" Text="Tab1" Selected="True">
                    </telerik:RadTab>
                    <telerik:RadTab runat="server" Text="Tab2">
                    </telerik:RadTab>
                </Tabs>
            </telerik:RadTabStrip>
            <telerik:RadMultiPage ID="RadMultiPage1" runat="server" Width="100%" SelectedIndex="0" Height="100%">
                <telerik:RadPageView ID="RadPageView1" runat="server" Height="100%" style="border: 1px solid grey">
                    <telerik:RadTreeView ID="RadTreeView1" runat="server"></telerik:RadTreeView>
                </telerik:RadPageView>
                <telerik:RadPageView ID="RadPageView2" runat="server" Height="100%" style="border: 1px solid grey">
                    <telerik:RadTreeView ID="RadTreeView2" runat="server"></telerik:RadTreeView>
                </telerik:RadPageView>
            </telerik:RadMultiPage>
        </td>
    </tr>
    <tr>
        <td style="font: normal 12px arial; text-align: left;">
            <asp:CheckBox ID="CheckBox1" runat="server" Text="Do something when checked." AutoPostBack="true" />
        </td>
        <td style="text-align: right">
            <telerik:RadButton ID="CancelButton" runat="server" Text="Cancel" OnClientClicked="windowClose" UseSubmitBehavior="false">
            </telerik:RadButton>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:51:10.107

简单问题的简单答案。为第一行设置相对高度 (%)，为第二行设置固定高度 (px)！

```
<table style="width:100%;">
    <tr style="height:100%;vertical-align:top;overflow:auto">
          ....
    </tr>
    <tr style="height:100px;">
          ....
    </tr>
</table> 
```

将 调整`100px`到第 2 行必须具有的任何高度。

此外，使用 javascript 和 onload 方法将表格的高度设置为窗口的高度。

javascript将是：

```
document.onload  = new function(){ 
```

    var theTable = document.getElementById("myTable"); theTable.style.height = (document.height)+"px"; }

见[小提琴](http://jsfiddle.net/yMZnY/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:09:48.593

将此添加到您希望自动调整大小的任何行，甚至高度也可以给它 % 而不是 PX ，例如

```
<tr style="width:10%;height:20px;">
    <td style="font: normal 12px arial; text-align: left;">
        <asp:CheckBox ID="CheckBox1" runat="server" Text="Do something when checked." AutoPostBack="true" />
    </td>
    <td style="text-align: right">
        <telerik:RadButton ID="CancelButton" runat="server" Text="Cancel" OnClientClicked="windowClose" UseSubmitBehavior="false">
        </telerik:RadButton>
    </td>
</tr> 
```

# php - 如何组合两个函数并返回一个数组？

> ID：15023626
> 
> 赞同：1
> 
> 时间：2013-02-22T11:53:11.530
> 
> 标签：php, mysql, arrays, function, return

你好我想缩短我的代码，并想结合两个完全相同的功能。

所以我得到了这个：

```
function a($a){
    global $db;
    $query = $db->query("SELECT col_a FROM table WHERE Field= '$a' ");
    $check = $query->fetch_assoc();
    $return_a = $check['col_a'];
    return ($return_a);
}
function b($a){
    global $db;
    $query = $db->query("SELECT col_b FROM table WHERE Field= '$a' ");
    $check = $query->fetch_assoc();
    $return_b = $check['col_b'];
    return ($return_b);
} 
```

所以我想我可以将两者合二为一：

```
function ab($a){
global $db;
$query = $db->query("SELECT col_a, col_b FROM table WHERE Field= '$a' ");
$check = $query->fetch_assoc();
$return_array = array( $check['col_a'], $check['col_b'] );
return ($return_array);
} 
```

这似乎不起作用。我尝试使用以下方法读出数组：

```
$db_data = ab($a);

echo $db_data['col_a'];
echo $db_data['col_b']; 
```

所以如果有人能告诉我我做错了什么，我真的很感激。

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:56:47.973

您没有创建命名数组，因此您的结果使用`$db_data[0]`和索引`$db_data[1]`

代替： `$return_array = array( $check['col_a'], $check['col_b'] );`

和： `$return_array = array( 'col_a' => $check['col_a'], 'col_b' => $check['col_b'] );`

或者更简单的只是 return `$check`;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:57:27.547

试试这个 ：

```
$db_data = ab($a);

echo $db_data[0];
echo $db_data[1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T11:58:48.097

如果您这样做（与您的代码相同），您可以像访问它一样访问它

```
function ab($a){
    global $db;
    $query = $db->query("SELECT col_a, col_b FROM table WHERE Field= '$a' ");
    $check = $query->fetch_assoc();
    $return_array = array( $check['col_a'], $check['col_b'] );
    return ($return_array);
}

$db_data = ab($a);

echo $db_data[0]; // will return 'col_a';
echo $db_data[1]; // will return 'col_b'; 
```

你应该做这个

```
function ab($a){
    global $db;
    $query = $db->query("SELECT col_a, col_b FROM table WHERE Field= '$a' ");
    $check = $query->fetch_assoc();
    //$return_array = array( $check['col_a'], $check['col_b'] );
    return ($check);
} 
```

以及何时需要取

```
$db_data = ab($a);

echo $db_data['col_1'];
echo $db_data['col_1']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T11:55:12.477

```
list($col_a, $col_b) = ab($a);
echo $col_a;
echo $col_b; 
```

# ios - 如何在定义协议处理时阻止 iOS 应用程序启动

> ID：15023629
> 
> 赞同：1
> 
> 时间：2013-02-22T11:53:24.923
> 
> 标签：ios, objective-c, cocoa-touch

我已经成功实现了一个自定义协议的urlHandling。

当其他应用程序尝试调用此 url 以解决安全问题时，我需要阻止该应用程序启动。只有执行 JavaScript 代码的回调才需要该协议，因此只允许在应用程序内调用。

使用的响应`UIWebView:stringByEvaluatingJavascriptFromString`不是一个选项，因为 JS 代码必须在多个平台上工作。

我想在我的应用程序中拦截呼叫本身（这可以通过使用来工作`UIWebViewDelegate:shouldStartLoadWithRequest`），但我无法弄清楚这是否可以使用 WP8。（在 Android 中，这适用于`WebViewClient:shouldOverideUrlLoading`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:09:40.323

如何实现`UIApplicationDelegate`协议方法：

```
application:openURL:sourceApplication:annotation: 
```

并检查`sourceApplication`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:08:12.067

据我所知，iOS 上没有标准 API 有类似“白名单”的东西，允许应用程序调用您的自定义 URL 方案并以这种方式打开您的应用程序。使用此 URL 方案时，您只能拥有整个蛋糕，而不仅仅是一小块。

**建议 A：**
如果从您的应用程序或其他应用程序启动，您可以在您的应用程序委托中设置一个布尔变量来存储`openURL`，在您的视图控制器中检查此变量是否设置为并将您的应用程序与空白屏幕或信息屏幕`NO`交换告诉用户该应用程序不是从受信任的来源或其他任何地方打开的。`rootViewController``window`

**建议B：**
如果你真的不想让你的应用打开，你可以让它在`application:openURL:sourceApplication:annotation:`.

只需检查它是否`sourceApplication`是受信任的来源，如果不使用类似`NSAssert(YES == NO, @"Bad bad boy")`使其崩溃的东西。

**B**只会是一个黑客，我不会认为它是最佳实践。尝试建议 A，这是一种更加用户友好的方式，您应该能够实现您的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T18:44:58.980

最后我找到了适合我的解决方案。;) 不过，这是一种不同的方法。

首先：您可能想查看[WebViewJavascriptBridge](https://github.com/marcuswestin/WebViewJavascriptBridge)，这是双向通信的桥梁，实现回调和您可能需要的一切。但这适用于 iframe... 我想使用 ajax。

我没有实现我的应用程序要监听的协议。我现在要做的是实现一个[NSURLProtocol](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLProtocol_Class/Reference/Reference.html)，它总是会返回`NO`for `canInitWithRequest`。我正在使用唯一路径（如`/!anythingUnique`）来识别我的 JS 调用。有了这个设置，我可以调用 ajax 并在 Obj-C 代码中做一些事情。

1.  实现 NSURLProtocol。
2.  通过注册 NSURLProtocol `[NSURLProtocol registerClass:[SFJURLProtocol class]];`。
3.  您将需要设置一个 baseURL... 通过加载任何页面或通过`webView:loadHTMLSString`. 在初始化控制器时执行此操作。
4.  来自 JavaScript 的触发请求
5.  `canInitWithRequest`在你的函数中捕捉它们。为了干净的代码，您可能想在 Controller 中做一些事情，所以考虑一下回调机制或其他东西。;)
6.  ？？？
7.  利润！

我希望这有帮助。

# twitter-bootstrap - 使用 Composer 设置 Zendframework 2 和 twitter 引导程序

> ID：15023632
> 
> 赞同：0
> 
> 时间：2013-02-22T11:53:39.627
> 
> 标签：twitter-bootstrap, zend-framework2, dependency-management, composer-php

我目前正在使用 zendframework 2 的 composer 依赖管理器和 twitter bootstrap，我能够成功管理 zendframework 2，但我无法通过 composer 管理 twitter bootstrap。

问题是作曲家将 twitter 引导库下载到供应商目录。这是不可行的，我需要作曲家下载 twitter bootstrap 到 public 文件夹和 zendframework 到 vender 文件夹。如何实现这一目标

下面是我正在使用的当前 composer.json 文件。

```
 {
        "name": "zendframework/skeleton-application",
        "description": "Skeleton Application for ZF2",
        "license": "BSD-3-Clause",
        "keywords": [
            "framework",
            "zf2"
        ],
        "homepage": "http://framework.zend.com/",
        "require": {
            "php": ">=5.3.3",
            "zendframework/zendframework": "2.*",
            "twitter/bootstrap":"2.*"
        },
        "extra": {
        "installer-paths": {
            "public/bootstrap/": ["twitter/bootstrap", "twitter/bootstrap"],
            "vender/zendframework" : ["zendframework/zendframework" ,"zendframework/zendframework"]
            }
         }  
} 
```

我是作曲家的新手请建议在 composer.json 文件中为每个所需库指定路径的正确方法，

上面的代码作为无效格式抛出错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:16:20.183

您需要自定义安装程序才能安装到不同的路径

[http://getcomposer.org/doc/faqs/how-do-i-install-a-package-to-a-custom-path-for-my-framework.md](http://getcomposer.org/doc/faqs/how-do-i-install-a-package-to-a-custom-path-for-my-framework.md)

[http://getcomposer.org/doc/articles/custom-installers.md](http://getcomposer.org/doc/articles/custom-installers.md)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T05:02:47.703

在尝试了所有方法后，我在 github composer repository 上发布了这个问题，下面是链接

[使用 Composer 设置 Zendframework 2 和 twitter 引导程序](https://github.com/composer/composer/issues/1613)

[@Seldaek](https://stackoverflow.com/users/6512/seldaek)已通过回复该问题关闭了该问题，根据他的评论

Composer 目前不支持下载前端依赖项。他建议的管理 twitter 引导程序的解决方案是使用来自 twitter 的[Bower](https://github.com/bower/bower)浏览器包管理器。

Bower 也是一个很好的工具，用于管理各种前端包并在您的项目中保持最新，. 我尝试过并且成功地管理了 twitter 引导带和其他 JS 库。

我只是决定发布这个来帮助其他也在寻找同样问题的解决方案的人，

这篇文章肯定有助于其他人决定在项目中管理前端库的过程。

# php - 对服务器上的 mailto 页面的虚假请求

> ID：15023637
> 
> 赞同：1
> 
> 时间：2013-02-22T11:53:51.880
> 
> 标签：php, mailto

我正在尝试帮助维护旧网站。

我收到了对 /mailto URI 地址的虚假请求，这些地址本应打开客户端邮件应用程序。以下是关于今天的三个请求的一些 php 数据：

```
[HTTP_USER_AGENT] => Opera/9.80 (Windows NT 6.1; WOW64) Presto/2.12.388 Version/12.10
[REQUEST_URI] => /mailto:info%40somedomain.com

[HTTP_USER_AGENT] => Opera/9.80 (Windows NT 6.1; WOW64) Presto/2.12.388 Version/12.10
[REQUEST_URI] => /mailto:info@somedomain.com

[HTTP_USER_AGENT] => Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.21) Gecko/20100312 Firefox/3.6
[REQUEST_URI] => /mailto:info@somedomain.com?subject=Helpme&body=Dear%20etc 
```

为什么浏览器会尝试在服务器上打开这些 URI，而不是打开客户端电子邮件应用程序？

这是一些示例html：

```
<a class="emailaddress" href="mailto:info@somedomain.com?subject=Helpme&body=Dear etc">Helpme</a> 
```

这是另一个变体：

```
<FORM ACTION="mailto:info@somedomain.com" METHOD="POST" ENCTYPE="text/plain">
   <table>
    <TR>
        <TD width="100">Name: </TD>
        <TD>
          <INPUT TYPE="text" NAME="name" SIZE="35">
        </TD>
    </TR>
    <TR>
        <TD>Your Message</TD>
        <TD>
          <TEXTAREA NAME="text" COLS="35" ROWS="4"></TEXTAREA>
        </TD>
    </TR>
   </table>

    <input type="hidden" name="id" value="7180">
   <INPUT TYPE="submit" VALUE="Send">
   <INPUT TYPE="reset" VALUE="Reset">
</FORM> 
```

（就个人而言，我不会通过打开客户端电子邮件客户端来实现发送联系表格，也不会在表格中使用表格。我会建议替换那些。）

不知何故，一些浏览器似乎将此解释为用户想要打开页面而不是打开客户端电子邮件应用程序。

是什么导致了这些对服务器的错误请求，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:53:40.190

事实证明，这些解释是由一些有故障的垃圾邮件机器人完成的，他们试图提交指向其网站的链接和其他通用垃圾邮件。到目前为止，还没有真正的用户尝试以这种方式提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:04:17.390

据此，不应使用 mailto 操作，因为它取决于客户端上的软件[。](http://www.apptools.com/rants/mailto.php)我的猜测是有人发布了您的表单，但他们的浏览器不理解表单操作，并尝试将其解析为 html。

# java - 从属性文件中获取值

> ID：15023644
> 
> 赞同：1
> 
> 时间：2013-02-22T11:54:36.787
> 
> 标签：java, file

*   我有一个 java 代码将值附加到我的属性文件中
*   我的属性文件将有一个这样的条目。
*   key1 = 主机、端口、orcl、用户名、密码
*   key2 = 主机、端口、orcl、用户名、密码
*   key3 = 主机、端口、orcl、用户名、密码等...

这些 key1、key2 和 key3 是连接名称。

*   在进入属性文件之前，首先我必须检查文件是否已经给出了连接名称条目。我的意思是，如果用户再次使用 key1 或 key2 或 key3 连接名称输入值，它必须发出警报，说明此连接名称可用，因此请尝试使用另一个名称。

这是我在文件中输入的java代码：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
{
       try
       {
            Class.forName("oracle.jdbc.driver.OracleDriver").newInstance();
            con = DriverManager.getConnection("jdbc:oracle:thin:@"+host+":"+port+"/"+service,username,password);
            con.setAutoCommit(false);
            if (con!=null)
            {
                 session.setAttribute(username, con); 
                 out.println("Connected Successfully");          
                 PrintWriter out1 = new PrintWriter(new BufferedWriter(new FileWriter("my properties file", true)));
                 out1.println(cname+" = "+host+","+port+","+service+","+username+","+password);
                 out1.close();
            }
            else
            {
                 out.println("Error in getting connection");
            }
       }
       catch(Exception e)
       {
            e.printStackTrace();
       }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T12:01:14.143

```
Properties prop = new Properties();
prop.load("pathToPropertiesFile");

String key; //This is the key which user will enter
String propKey = prop.getProperty(key);
if(propKey == null)
{
    // Key is not present so enter the key into the properties file
      prop.setProperty("keyName", key);
}
else
{
    // Throw error saying key already exists
      out.println("Key "+key+" already exists.");
} 
```

有关 Java 中的属性的更多信息和示例，请参阅[此处](http://www.mkyong.com/java/java-properties-file-examples/)

**更新**：好的，如果您想检查任何键是否存在（不管）这样的值，请使用此代码

```
 // Ignoring the loading of the properties file
   // Assuming properties file is loaded in "prop"
   Enumeration keySet = prop.keys();
   String key; // This is the key which user will enter
   boolean keyExists = false;
   while(keySet.hasMoreElements())
   {
       String keyName = (String) keySet.nextElement();
       String keyValue = prop.getProperty(keyName);
       if( key.equals(keyValue))  //Check against all the keys' value present
       {
           keyExists = true;
           break;
       }
   }

   if(keyExists)
   {
       //throw error
   }
   else
   {
       //insert key
   } 
```

方法是获取所有存在的键并检查其值。如果属性文件中的值与用户输入的值相同，否则您知道要做什么

如果要对 KeyName 进行检查，则只需更改*循环中的 if 条件*

```
if( key.equals(keyName))  //Check against all the key Name present in the properties file
{
 keyExists = true;
 break;
} 
```

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:32:23.673

看看[`Properties`](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)班级。它有一些可能有用的相关方法；

```
load()
save()
setProperty()
containsKey() 
```

# hotmail - 如何以编程方式访问 hotmail 中的任务？

> ID：15023647
> 
> 赞同：2
> 
> 时间：2013-02-22T11:54:44.837
> 
> 标签：hotmail, activesync

我希望能够以编程方式访问 Hotmail 任务，这样我就可以继续重置提醒，直到任务被标记为完成。有谁知道如何做到这一点？

我已经看到这里有一个 Hotmail API：http: [//isdk.dev.live.com/](http://isdk.dev.live.com/?mkt=en-us) ?mkt=en-us 但我还没有看到您只能访问日历的任务信息。

我还看到 Hotmail 使用 Active Sync，所以我猜可以编写一个 Active Sync 客户端来检索任务信息（如果我错了请纠正我），我在这里找到了更多信息：[ActiveSync库](https://stackoverflow.com/questions/3585025/activesync-library/4673798#4673798)和[如何在 iphone 应用程序中实现 activesync 协议？](https://stackoverflow.com/questions/5075404/how-do-i-implement-activesync-protocol-in-iphone-app/5075450#5075450). 有些人建议使用[Exchange Web Services](http://msdn.microsoft.com/en-us/library/exchange/bb204119%28v=exchg.140%29.aspx)，但从我读到的 Hotmail 不支持这一点。

谢谢格兰特

# java - 通过hadoop在tomcat上运行jar

> ID：15023648
> 
> 赞同：0
> 
> 时间：2013-02-22T11:54:55.120
> 
> 标签：java, tomcat, servlets, hadoop, cmd

我有一个带有 tomcat 的动态 Web 项目（安装了 hadoop）。我想允许用户通过网站为我的 hadoop 应用程序定义一个参数。然后，在服务器上，我想通过 hadoop 使用提供的查询参数运行我的 jar。所以基本上我想在我的服务器上运行以下命令：

```
hadoop jar query.jar query 
```

由于 hadoop，我不能直接在我的动态 Web 项目中简单地使用 query.jar 的方法。所以我只希望服务器在其 cmd 中运行上述命令。我已将 query.jar 放在服务器的 WEB-INF/lib 文件夹中。我在我的 servlet 中尝试了以下代码：

```
String query = request.getParameter("query");
    String execute = "hadoop jar WEB-INF/lib/query.jar " + query;
    Process process = Runtime.getRuntime().exec(execute);
    try {
        process.waitFor();
    } catch (InterruptedException ex) {
        System.out.print("Error running jar");
    }
    System.out.print("Execution Successful"); 
```

虽然我总是得到“执行成功”，但我的 hadoop 作业从未在服务器上执行。我在执行字符串中提供的 query.jar 的路径是否正确？还有其他错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:12:20.707

仅仅因为你得到`Execution Successful`并不意味着它被正确执行。更改代码如下。

```
String query = sanitize(request.getParameter("query"));
String hadoopHome = System.getenv("HADOOP_HOME");
if(hadoopHome == null) {
    hadoopHome = "<ABSOLUTE PATH TO HADOOP>";
}
String execute = hadoopHome + "/bin/hadoop jar <ABSOLUTE PATH TO>/query.jar <Class Name> " + query;
Process process = Runtime.getRuntime().exec(execute);
int i = -1;
try {
    i = process.waitFor();
} catch (InterruptedException ex) {
    System.out.print("Error running jar");
}
if(i == 0) {
    System.out.print("Execution Successful");
} else {
    System.out.print("Error running jar");
} 
```

方法`sanitize`应该删除任何恶意代码，因为这将在服务器端运行。

# javascript - 彩盒在页面下方加载太远

> ID：15023650
> 
> 赞同：1
> 
> 时间：2013-02-22T11:55:05.273
> 
> 标签：javascript, colorbox

我有一个页面，当单击超链接时会弹出一个颜色框。我将超链接移到页面下方，颜色框弹出窗口现在也加载到页面下方。我正在使用默认的 CSS，我调用颜色框的代码是：

```
<script>
        jQuery(document).ready(function () {

        });
    </script> 
```

我还有一些其他的 javascript 从框中获取输入，然后输出链接本身。对此的附加代码是：

```
jQuery('a.post_bid_btn_new').colorbox({ opacity:0.5  }); 
```

现在链接本身可以工作了，只是在页面下方太远了。查看 colorbox 弹窗的源码，它有一个 CSS 属性 top: 1650px; 显然意味着它几乎在页面外显示。

有人可以建议如何解决这个问题吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:27:34.877

尝试在 css 中添加定位规则，例如：

```
.colorBoxClass{ 
               top: 300px;
 } 
```

`className`并在调用其方法时通过 ' ' 属性将这些规则赋予颜色框：

```
jQuery('a.post_bid_btn_new').colorbox({ opacity:0.5, className:'colorBoxClass' }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:18:09.930

通过设置 top: 来修复它在调用函数时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T09:54:56.123

> 现在链接本身可以工作了，只是在页面下方太远了。查看 colorbox 弹窗的源码，它有一个 CSS 属性 top: 1650px; 显然意味着它几乎在页面外显示。

从来没有人遇到过这个问题，我已经回答了数千个关于 colorbox 的问题。你有问题的演示吗？我认为没有人能够在无法检查的情况下给您一个体面的答案，因为这不是在正常情况下会发生的事情。

# ruby-on-rails - ruby 中的拆分/切片数组

> ID：15023651
> 
> 赞同：1
> 
> 时间：2013-02-22T11:55:05.683
> 
> 标签：ruby-on-rails, ruby

我发现这两个问题与我要问的问题相似：

[将数组分成 n 组 m 大小？](https://stackoverflow.com/questions/7907368/split-array-up-into-n-groups-of-m-size) 并且 [需要在Ruby中将数组拆分为指定大小的子数组](https://stackoverflow.com/questions/3864139/need-to-split-arrays-to-sub-arrays-of-specified-size-in-ruby)

这将数组拆分为三个数组，每个数组包含三个元素：

```
a.each_slice(3) do |x,y,z|
  p [x,y,z]
end 
```

所以如果我这样做（我的数组大小是 1000）：

```
a.each_slice(200) do |a,b,c,d,e|
            p "#{a} #{b} #{c} #{d} #{e}"
        end 
```

这应该将我的数组分成 5 个数组，每个数组有 200 个成员？但它没有？我真正需要做的是将 200 个随机元素放入 5 个数组中，我在正确的轨道上，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:19:57.753

[可枚举#each_slice](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_slice)

如果您为 each_slice 的块提供单个参数，那么它将使用小于或等于给定参数的值数组填充该参数。在最后一次迭代中，如果剩下的值少于 n 个，那么数组大小将是剩下的任何值。

如果您为 each_slice 的块提供多个参数，那么它将使用源数组中的值填充这些值。如果切片大小大于给定的参数数量，则某些值将被忽略。如果它小于参数的数量，那么多余的参数将为零。

```
a = (1..9).to_a

a.each_slice(3) {|b| puts b.inspect }
[1,2,3]
[4,5,6]
[7,8,9]

a.each_slice(4) {|b| puts b.inspect }
[1,2,3,4]
[5,6,7,8]
[9]

a.each_slice(3) {|b,c,d| puts (b + c + d)}
6   # 1 + 2 + 3
15  # 4 + 5 + 6
24  # 7 + 8 + 9

a.each_slice(3) {|b,c| puts (b + c)}
3   # 1 + 2, skips 3
9   # 4 + 5, skips 6
15  # 7 + 8, skips 9

a.each_slice(2) {|b,c| puts c.inspect}
2
4
6
8
nil

a.each_slice(3) {|b,c,d,e| puts e.inspect}
nil
nil
nil 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T12:06:44.727

```
irb(main):001:0> a= (1..10).to_a
=> [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
irb(main):002:0> a.sample(3)
=> [5, 10, 1]
irb(main):003:0> (1..3).map{ a.sample(3) }
=> [[6, 2, 5], [8, 7, 3], [4, 5, 7]]
irb(main):004:0> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T12:00:57.417

如果您想将该结果分配给 5 个不同的数组，您可以使用 splat 运算符，如下所示：

```
a,b,c,d,e = *(1..1000).each_slice(200).to_a 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T12:03:36.103

实际上，您将返回一个包含五个元素的字符串。你可以尝试一下：

```
a1 = [], a2 = [], a3 = [], a4 = [], a5 = []

a.each_slice(5) do |a,b,c,d,e|
  a1 << a
  a2 << b
  a3 << c
  a4 << d
  a5 << e
end 
```

您最终将得到五个数组，每个数组包含 200 个元素。我使用了最简单的语法来使其清晰，您可以使其更加简洁。

# select - Hive：如何使用 HiveQL 执行 SELECT 查询以输出唯一主键？

> ID：15023661
> 
> 赞同：0
> 
> 时间：2013-02-22T11:55:21.510
> 
> 标签：select, hadoop, distinct, hive

我有以下模式数据集，我想将其转换为可以导出到 SQL 的表。我正在使用`HIVE`. 输入如下

```
call_id,stat1,stat2,stat3
1,a,b,c,
2,x,y,z,
3,d,e,f,
1,j,k,l, 
```

输出表需要`call_id`作为其主键，因此它必须是唯一的。输出模式应该是

```
call_id,stat2,stat3,
1,b,c, or (1,k,l)
2,y,z,
3,e,f, 
```

问题是当我`DISTINCT`在`HIVE`查询中使用关键字时，它`DISTINCT`适用于所有组合的列。我只想将 DISTINCT 操作应用于`call_id`. 有点意思

```
SELECT DISTINCT(call_id), stat2,stat3 from intable; 
```

但是，这在`HIVE`（我也不精通 SQL）中无效。

唯一的合法查询似乎是

```
SELECT DISTINCT call_id, stat2,stat3 from intable; 
```

但这会返回多行，`call_id`因为其他列不同，并且整个行是不同的。

注意：a、b、c、x、y、z 等之间没有算术关系。因此，任何求平均或求和的技巧都是不可行的。

有什么想法我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T08:37:27.113

一个快速的想法，不是最好的，但会做的工作-

hive>create table temp1(a int,b string);

配置单元>插入覆盖表 temp1

select call_id,max(concat(stat1,'|',stat2,'|',stat3)) from intable group by call_id;

hive>插入覆盖表intable

从 temp1 中选择 a,split(b,'|')[0],split(b,'|')[1],split(b,'|')[2]；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T23:08:45.697

> ,,我只想对 call_id 应用 DISTINCT 操作”

但是 Hive 将如何知道要消除哪一行？

在不知道您拥有的统计字段的数据量/大小的情况下，以下查询可以完成：

```
select distinct i1.call_id, i1.stat2, i1.stat3 from (
  select call_id, MIN(concat(stat1, stat2, stat3)) as smin 
  from intable group by call_id
) i2 join intable i1 on i1.call_id = i2.call_id 
  AND concat(i1.stat1, i1.stat2, i1.stat3) = i2.smin; 
```

# java - 在将 java 转换的 List 迭代为不可变时使用 scala 并行性

> ID：15023666
> 
> 赞同：7
> 
> 时间：2013-02-22T11:55:35.117
> 
> 标签：java, performance, scala, parallel-processing

我正在尝试使用 scala 并行性来加快执行时间。

因此，要将 java ArrayList 转换为不可变的，我使用：

```
var imList = scala.collection.JavaConversions.asScalaBuffer(normalQLFolderList) 
```

然后在迭代时利用多个核心，我使用：

```
for (i <- imList .par) {
} 
```

我是否以正确的方式利用 scala 并行性？在这种情况下迭代一个列表。asScalaBuffer 对性能有很大影响吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T13:08:48.123

可以在恒定时间内转换为并行对应的集合包括可变和不可变哈希映射以及哈希集、范围、向量和数组。对于所有其他集合类型，包括来自 Java 的集合的包装器，调用`par`会导致将集合的内容复制为更适合并行化的格式。

此处对此进行了更详细的描述：

[http://docs.scala-lang.org/overviews/parallel-collections/conversions.html](http://docs.scala-lang.org/overviews/parallel-collections/conversions.html)

但是，根据收藏的规模和`for`区块的价格，为这种转换付费可能是完全合理的。并行`for`块对每个元素所做的处理越多，转换成本的摊销就越多。

我想说，如果每个元素的计算涉及任何不平凡的事情（例如，它至少创建新对象）为转换付费是有意义的，但一个好主意是测量顺序版本和并行版本之间的性能差异，包括调用`par`：

[http://docs.scala-lang.org/overviews/parallel-collections/performance.html](http://docs.scala-lang.org/overviews/parallel-collections/performance.html)

# php - Zend Framework 2 表单，他们是否消除了装饰器模式？

> ID：15023669
> 
> 赞同：5
> 
> 时间：2013-02-22T11:55:39.573
> 
> 标签：php, zend-form, zend-framework2

我目前正在学习 ZF2，ZF1 中的 Form 装饰器模式是否可能已在 ZF2 中删除？

我是否正确地编写自己的视图助手来装饰我的表单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T21:22:15.270

ZF2 中的装饰器不再存在。他们甚至在 ZF1 中也是一团糟。但是，请随意制作自己的装饰器。您可能也有兴趣查看表单集合[http://zf2.readthedocs.org/en/latest/modules/zend.form.collections.html](http://zf2.readthedocs.org/en/latest/modules/zend.form.collections.html)

# jquery - jquery min.js 和 woocommerce 插件冲突

> ID：15023672
> 
> 赞同：0
> 
> 时间：2013-02-22T11:55:49.677
> 
> 标签：jquery, wordpress, woocommerce

我在我的 wordpress 中使用了各种插件和 woocommerce 主题。当我在其中使用一些 Jquery 代码时。然后在该页面上出现一些冲突并且我的插件停止工作..为什么？我想在我的网站上使用该 jquery 代码。请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:51:47.577

确保您的插件在**[noConflict()](http://api.jquery.com/jQuery.noConflict/)**模式下运行。如果不是，您可以尝试添加**`jQuery.noConflict();`**到脚本中。您还可以通过将主题设置为默认的 TwentyTwelve 或 TwentyEleven 并启用插件来测试这是否是主题问题。如果发生主题冲突，您需要联系开发人员。有时开发主题时没有考虑到兼容性，并且容易出现插件冲突。

如果您仍然遇到问题，我会问一些问题：您使用的是什么主题以及您从哪里获得的？您要启用什么插件？您正在使用上述哪些版本以及您的 Wordpress 版本？

# thumbnails - Foundation Orbit 自定义缩略图不更改主图像

> ID：15023675
> 
> 赞同：0
> 
> 时间：2013-02-22T11:56:04.983
> 
> 标签：thumbnails, zurb-foundation, orbit

我正在使用 Foundation 框架和 Orbit。我在这里建立了滑块：[http](http://www.abricot-production-dev.co.uk/group-two/gallery.html#) ://www.abricot-production-dev.co.uk/group-two/gallery.html# 但目前拇指并没有改变主要图片。

我的代码：

```
<div id="slider">
    <img src="images/slider/image-01.jpg" data-thumb="image-01.jpg" data-caption="#captionOne"/>
    <img src="images/slider/image-02.jpg" data-thumb="image-02.jpg" data-caption="#captionTwo"/>
    <img src="images/slider/image-03.jpg" data-thumb="image-03.jpg" data-caption="#captionThree"/>
</div>

<span class="orbit-caption" id="captionOne">Here is another caption...</span> 
<span class="orbit-caption" id="captionTwo">Here is a caption 2...</span> 
<span class="orbit-caption" id="captionThree">And here is a caption 3...</span>

<ul class="orbit-bullets">
    <li class="has-thumb" style="background-image: url(images/slider/thumbs/image-01.jpg); background-position: initial initial; background-repeat: no-repeat no-repeat; ">1</li>
    <li class="has-thumb" style="background-image: url(images/slider/thumbs/image-02.jpg); background-position: initial initial; background-repeat: no-repeat no-repeat; ">2</li>
    <li class="has-thumb" style="background-image: url(images/slider/thumbs/image-03.jpg); background-position: initial initial; background-repeat: no-repeat no-repeat; ">3</li>
</ul>

</div> 
```

初始化：

```
<script>
   $(window).load(function() {
       $("#slider").orbit();
   });
</script> 
```

在foundation.min.js中：

```
bullets:!1, bulletThumbs:!0, bulletThumbLocation:"../images/slider/thumbs/" 
```

我错过了什么？

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:56:59.130

我找到了这个解决方案：http: [//foundation.zurb.com/docs/components/orbit.html](http://foundation.zurb.com/docs/components/orbit.html)

执行：

```
<ul class="disc">
  <li class="has-thumb" style="background-image: url(images/slider/thumbs/image-01.jpg); background-position: initial initial; background-repeat: no-repeat no-repeat; "data-orbit-link="headline-1">1</li>
  <li class="has-thumb" style="background-image: url(images/slider/thumbs/image-02.jpg); background-position: initial initial; background-repeat: no-repeat no-repeat; " data-orbit-link="headline-2">2</li>
  <li class="has-thumb" style="background-image: url(images/slider/thumbs/image-03.jpg); background-position: initial initial; background-repeat: no-repeat no-repeat; " data-orbit-link="headline-3">3</li>
</ul> 
```

希望它有效。

干杯。

# firefox - 当网站托管在最终服务器上时，Webfont 不显示在 Firefox 上

> ID：15023676
> 
> 赞同：0
> 
> 时间：2013-02-22T11:56:06.060
> 
> 标签：firefox, font-face

我对 webfonts 和 firefox 有一个非常奇怪的问题。

我用 DIN webfont 作为字体制作了一个网站，当网站托管在我的个人服务器上时，它在所有浏览器中都显示得很好：http: [//daviddarx.com/stuffs/work/pozzo/04/](http://daviddarx.com/stuffs/work/pozzo/04/)

但是，由于我们在最终服务器上转移了网站，因此 webfont 不再显示在 firefox（mac 版）中，而在其他浏览器中仍然可以：http: [//pozzo.ch/](http://pozzo.ch/)

你知道问题可能是什么吗？我无法弄清楚，因为它在本地和我的服务器上运行良好。我还认为问题可能来自最终的服务器配置、url 或其他任何东西。但我对这些技术领域一无所知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:21:40.213

您字体上的这条线似乎`src:url("../fonts/din_regular.eot?#iefix")`在 Firefox 上造成了麻烦。

尝试删除“#”，所以这样写这一行：`src:url("../fonts/din_regular.eot?iefix")`

# visual-studio-2010 - 在哪里可以找到 natvis 模式定义（用于创建 VC++ 调试器可视化工具）？

> ID：15023690
> 
> 赞同：5
> 
> 时间：2013-02-22T11:56:52.227
> 
> 标签：visual-studio-2010, debugging, visual-c++, visual-studio-2012, debuggervisualizer

各种在线资源告诉我，我可以在 @%VSINSTALLDIR%\Xml\Schemas\natvis.xsd 找到它。但我一直无法在上述路径中找到它。我检查了多个 VS2010 和 VS2012 安装。任何人都可以在这里粘贴架构定义吗？任何额外的文档都会很棒

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-07T00:53:06.643

Hans Passant 评论了正确的答案，但从他的帖子中并不能立即看出为什么你（或我）最初找不到它，即：

*natvis XSD 不在 中`\Schemas`，但在`\Schemas\1033`*.

您必须深入挖掘一层才能找到它，因为显然微软认为它是代码页本地化的或其他东西。无论如何，这是我在我的 Visual Studio 副本中找到它的位置：

**视觉工作室 2012：**

`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Xml\Schemas\1033\natvis.xsd`

**视觉工作室 2013：**

`C:\Program Files (x86)\Microsoft Visual Studio 12.0\Xml\Schemas\1033\natvis.xsd`

* * *

此外，就其价值而言，Microsoft 为架构提供的 URL，在`http://schemas.microsoft.com/vstudio/debugger/natvis/2010`撰写本文时是 3xx 重定向，因此请不要费心去看那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-15T20:15:36.103

视觉工作室 2017：

`C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\Xml\Schemas\1033\natvis.xsd`

# android - 在另一个事件中停止线程

> ID：15023691
> 
> 赞同：2
> 
> 时间：2013-02-22T11:56:52.070
> 
> 标签：android, multithreading

我的问题是……我有 2 个事件……onCreate 和 Onclick。我有一个线程在 onCreate 内部运行，我必须在 onClick 内部停止它。这可能吗？如果是，请向我提供一些提示/代码片段如何实现这一点。

我在 onCreate 事件中的代码是这样的：-

```
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_screen);

    button = (Button) findViewById(R.id.btn);
        button.setOnClickListener(this);
        try{
            bright = Settings.System.getInt(getContentResolver(), 
                     Settings.System.SCREEN_BRIGHTNESS);
            }catch(Exception ex){
                ex.printStackTrace();
                bright = 1.0f;
            }

        lp = getWindow().getAttributes();
         new Thread(new Runnable(){

        @Override
        public void run() {
            // TODO Auto-generated method stub
            while (true) {
                try {
                    Thread.sleep(10000);
                    mHandler.post(new Runnable() {

                        @Override
                        public void run() {
                            // TODO Auto-generated method stub
                            lp.screenBrightness= dim;
                            getWindow().setAttributes(lp);
                            // SLEEP 2 SECONDS HERE ...
                            final Handler handler = new Handler(); 
                            Timer t = new Timer(); 

                            t.schedule(new TimerTask() { 
                                    public void run() { 
                                            handler.post(new Runnable() { 
                                                    public void run() { 
                                                    lp.screenBrightness=bright;
                                                    getWindow().setAttributes(lp);
                                                    } 
                                            }); 
                                    } 
                            }, 2000); 

                        }
                    });
                } catch (Exception e) {
                    // TODO: handle exception
                }
            }

        }

      }).start();  

    } 
```

此活动在循环内运行。我想停止这个我点击按钮。似乎我无法在按钮 onclick 事件中调用 Thread.interrupt() 方法。我该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:05:30.817

如果你创建了一个引用，你可以从你班级的任何地方访问它。所以，在类正文广告中，类似

```
Thread thrd 
```

就像您使用 Button、TextView 或其他任何东西一样。然后在 onCreate 方法中添加引用，如

```
thrd = new Thread(new Runnable(){ 
```

现在，您可以引用您的线程，您可以在课堂上的任何地方使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T12:08:04.490

1.  在你的类中声明一个`boolean` `mRunnning`，这就像一个标志，自定义运行线程将依赖它来了解它是否已被取消。

2.  像往常一样，您的线程中有一个循环，而不是`while(true)`do `while(mRunning)`。

3.  此外，您正在使线程睡眠，在睡眠期间，线程将无法检查`mRunning`变量，您将不得不调用`interrupt()`线程对象以使其停止。

4.  最好使用变量来保存线程引用`Thread t = new Thread(....`

5.  所以，现在要停止你的线程，你必须调用`mRunning = false`then `t.interrupt()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T13:15:45.893

根据您目前的情况根据之前的答案评论。你尝试像：

```
myThread = new Thread(new Runnable 
```

对？

那么你也应该删除`.start();`你以前的编码的一部分。然后写：

```
myThread.start(); 
```

你应该在你的类中声明`myThread`为全局的，这样你就可以从你类中的任何地方访问这个线程。现在你可以停止线程`onClick`

你应该把这个答案和`User117`答案结合在一起。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T12:09:14.373

而不是
while(true)

在 run() 方法中，声明一个布尔变量为 true 并在 onClick 之后更改它。例如：

```
 private boolean shouldRun = true; 
```

然后在 run() 方法中：

```
 @Override
    public void run() {
        // TODO Auto-generated method stub
        while (shouldRun==true) {
                     .
                     . 
                     . 
```

并在您的 onClick 中：

```
 @override
          public void OnClick(View v){

              shouldRun=false;
                      .
                      .
                      . 
```

# asp.net-mvc - 文本框 ENTER 将文本保存到 DB -- MVC

> ID：15023700
> 
> 赞同：1
> 
> 时间：2013-02-22T11:57:16.810
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有一个文本框，如果用户输入某些内容并按回车，它应该将其保存到数据库中。

```
 @Html.TextArea("txtComments", new {@style = "width: 450px;",@placeholder = "Enter Comments here" }) 
```

基本上我正在寻找一个在 ENTER 上触发的事件。并在 RAZOR MVC 中实现。

我很少看到保留和其他东西的想法。但我认为这是发布它的更好地方。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:58:45.940

> 基本上我正在寻找一个在 ENTER 上触发的事件

您可以订阅[`.keypress()`](http://api.jquery.com/keypress/)textarea 的事件并检测是否`Enter`被按下：

```
$(function() {
    $('#txtComments').keypress(function() {
        var code = e.keyCode ? e.keyCode : e.which;
        if(code == 13) { 
            // Enter was pressed => act accordingly
        }
    });
}); 
```

> 并在 RAZOR MVC 中实现。

Razor 是在服务器上运行的视图引擎。您无法检测到服务器上的按键。正如我之前所展示的，您将不得不使用客户端脚本 (javascript)。

# api - Vimeo API 切换到新视频

> ID：15023705
> 
> 赞同：1
> 
> 时间：2013-02-22T11:57:28.967
> 
> 标签：api, vimeo

我正在尝试让 vimeo 通用播放器在其 iframe 中播放新视频。

我不想每次切换到新视频时都初始化一个完整的新 iframe。

是否有最佳实践来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T18:02:55.910

如果您的嵌入代码是这样的：

```
<iframe id="vimeo_vid" src="//player.vimeo.com/video/VIDEO_ID" width="WIDTH" height="HEIGHT" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe> 
```

然后你可以使用 jQuery 重新加载框架：

```
<script type="text/javascript" src="jquery.js"></script>
<script>
  function loadit() {
    var loc = "http://player.vimeo.com/video/NEW_VID_ID";
    var iframe = $('#vimeo_vid');
    $(iframe).attr('src', loc);
  }
</script> 
```

调用该函数来更改内容，如下所示：

```
<button type="button" onclick="loadit()">Change Content</button> 
```

# ajax - 主干服务器返回 html

> ID：15023707
> 
> 赞同：0
> 
> 时间：2013-02-22T11:57:46.797
> 
> 标签：ajax, json, backbone.js, get, fetch

如果我从包含图像的目录中获取，我已经设置了简单的主干代码 -

网址：'上传/'

获取成功，但我的结果基本上包含`html`目录中的图像列表

像 ：

```
<h1>Index of /backbone_images/uploads</h1>
<ul><li><a href="/backbone_images/"> Parent Directory</a></li>
<li><a href="2012-12-11%2015.30.221.jpg"> 2012-12-11 15.30.221.jpg</a></li>
<li><a href="ian1.jpg"> in1.jpg</a></li>
<li><a href="imagedummy.png"> imagedummy.png</a></li> 
```

A) 如果从图像目录中获取，服务器是否应该返回 JSON？B）如果没有，是否有一种简单的方法可以将此 HTML 响应转换为 JSON？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:08:05.217

A）您应该设置您的服务器，以便它返回 JSON。您可以通过使用浏览器访问 url 来轻松地对此进行测试，您应该会得到如下信息：

```
{"Parent Directory":[{"link":"2012-12-11%2015.30.221.jpg", text:"2012-12-11 15.30.221.jpg"},{"link":"ian1.jpg", text:"ian1.jpg"},{"link":"imagedummy.png", text:"imagedummy.png"}]} 
```

由您决定如何构建 JSON 消息。您如何做到这一点取决于您在服务器上使用的技术，与骨干网无关。如果您需要更多帮助，您需要发布更多详细信息。

B) 据我所知，没有简单的方法可以自动从 HTML 转换为 JSON。如何做到这一点取决于您在服务器端使用的内容。

# java - Java HDD 图形表示

> ID：15023713
> 
> 赞同：2
> 
> 时间：2013-02-22T11:57:52.067
> 
> 标签：java, swing, graphics

嗨，我正在用 java 进行硬盘模拟，我希望能够表示任何给定驱动器中的碎片（表示为一系列对象哈希图、数组等），就像 xp 的旧碎片工具[XP 工具栏中](https://www.google.co.uk/search?hl=en&safe=off&client=firefox-a&hs=tDD&rls=org.mozilla%3aen-US%3aofficial&q=xp+defragment+tool&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.42768644,d.d2k&biw=1366&bih=632&um=1&ie=UTF-8&tbm=isch&source=og&sa=N&tab=wi&ei=5FsnUaXoHKWM0wX_1YDwCw)的条一样。我正在考虑来自谷歌的条形图或饼图，我发现摇摆可能是我最好的选择？任何人都可以指点我如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:58:58.757

我会检查[JFreeChart](http://www.jfree.org/jfreechart/)以获取大量[可能的渲染](http://www.jfree.org/jfreechart/samples.html)。[这是一个](http://www.java2s.com/Code/Java/Chart/CatalogChart.htm)包含大量示例的页面，包括代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:00:06.300

JFreeChart 通常是在 Swing 应用程序中绘制图表的最佳选择。还有一些其他的开源库。[请参阅此](http://www.jfree.org/jfreechart/faq.html)页面上的最后一个问题。

但是，如果您需要一些自定义功能，您可能需要在`Graphics2D`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T12:00:12.723

[JFreeChart](http://www.jfree.org/jfreechart/)可能是条形图或饼图的解决方案，但如果您只需要一个简单的堆叠条形图，我确实建议从 swing 库中覆盖[JLabel 。](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLabel.html)这将非常容易。

无论如何，如果您需要更多图表和绘图之类的东西，一定要看看 JFreeChart，它很棒。

# c# - 无法使用 browser.Images.Filter(Find.By("ext:qtip", "Delete")).Click() 识别图像

> ID：15023717
> 
> 赞同：1
> 
> 时间：2013-02-22T11:58:03.283
> 
> 标签：c#, watin

我想点击图片：以下是 html 代码

我在 watin 中使用以下代码单击：

```
browser.Image(Find.By("ext:qtip", "Delete").Click(); 
```

它不工作。请让我知道其他方式。

```
<div class="x-panel x-column" id="delete-button-2-7qo0yziAwqKk02Gud0Ik" style="width: 12px; padding-top: 2px; padding-left: 8px;">
    <div class="x-panel-bwrap" id="ext-gen580">
        <div class="x-panel-body x-panel-body-noheader" id="ext-gen581" style="width: 12px;">
            <span style="cursor: pointer;">
                <img style="width: 16px;" src="/image/poll-grey-close.png" ext:qtip="Delete"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T11:01:12.997

这不起作用，因为“：”是保留的 css 选择器字符尝试使用 css 选择器进行搜索，如下所示：

```
browser.Image(Find.BySelector("img[ext\\:qtip=\"Delete\"]")).Click(); 
```

我没有检查此代码，因此可能需要微调...

# python - SQLAlchemy：在 MySQL 上使用自联接创建删除查询

> ID：15023719
> 
> 赞同：1
> 
> 时间：2013-02-22T11:58:11.933
> 
> 标签：python, mysql, sql, sqlalchemy

我试图在没有运气的情况下在 SQLAlchemy + MySQL 中复制以下查询......

```
delete paths from paths
join paths as p1 on p1.ancestor = <ID>
where paths.descendant = p1.descendant; 
```

SQLAlchemy 似乎忽略了我放入删除查询的任何连接。我也尝试使用子查询而不是连接，但这在 MySQL 中是不允许的（不能从要删除的同一个表中选择）。任何帮助将非常感激。

更新：是的，我正在尝试使用 ORM 层。这是我尝试过的查询：

```
p1 = aliased(Path, name="p1")
db.session.query(Path).join(
    p1, p1.ancestor==<ID>
)
.filter(
    Path.descendant==p1.Path.descendant
).delete() 
```

还有子查询变体，但这在 MySQL 上不起作用，所以对我来说没用：

```
q = db.session.query(Path.descendant).filter(Path.ancestor==<ID>).subquery()
db.session.query(Path).filter(Path.descendant.in_(q)).delete(synchronize_session='fetch') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:29:38.713

SQLAlchemy 目前支持跨 Postgresql、MySQL 和其他的 UPDATE..FROM，但我们还没有尝试支持 DELETE..JOIN。

但是，就生成 SQL 字符串而言，它似乎确实有效（几乎？）：

```
class Path(Base):
    __tablename__ = "path"

    id = Column(Integer, primary_key=True)
    descendant = Column(Integer)
    ancestor = Column(Integer)

j = join(Path, p1, p1.ancestor == 5)
d = delete(j).where(Path.descendant == p1.descendant)
print d 
```

印刷：

```
DELETE FROM path JOIN path AS p1 ON p1.ancestor = :ancestor_1 
 WHERE path.descendant = p1.descendant 
```

但是，我的 MySQL 数据库不接受这一点，默认情况下它会呈现 INNER JOIN，但会失败，但如果我修改 MySQL 编译器不这样做，仍然会失败：

```
s.execute(d)

(ProgrammingError) (1064, "You have an error in your SQL syntax; check the manual that 
corresponds to your MySQL server version for the
right syntax to use near 'JOIN path AS p1 ON p1.ancestor = 5 WHERE
path.descendant = p1.descendant' at line 1") 'DELETE FROM path JOIN
path AS p1 ON p1.ancestor = %s WHERE path.descendant = p1.descendant'
(5,) 
```

看起来像您的 SQL 逐字记录（哦，除了“从路径中删除路径”之外？对吗？）？

在任何情况下，如果内置编译器没有这样做，您的选择是使用或使用[编译器扩展](http://docs.sqlalchemy.org/en/rel_0_8/core/compiler.html)`session.execute("some sql")`构建自定义构造。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-18T12:12:13.980

您可以使用`prefixes`关键字参数：

```
j = join(table1, table2, table1.c.key==table2.c.key)
stmt = delete(j, prefixes=[table1_name])
session.execute(stmt) 
```

`prefixes`关键字只是在语句关键字之后添加一个或多个表达式，即SELECT、INSERT、UPDATE 或DELETE。

在这种情况下，`delete(j)`语句生成表达式：`"DELETE FROM table1 INNER JOIN table2 ON table1.key=table2.key"`。当我们添加`prefixes`参数表达式变为：`"DELETE table1 FROM table1 INNER JOIN table2 ON table1.key=table2.key"`时，即是正确的 MySQL 查询。

# php - 可以通过PHP PDO快速访问Access吗？

> ID：15023720
> 
> 赞同：1
> 
> 时间：2013-02-22T11:58:15.160
> 
> 标签：php, mysql, ms-access, dynamics-crm

我在 Access 中有一个数据库 我需要通过 Internet 访问 Microsoft Access 数据库并正在构建一个 PHP 界面。我想知道转换为 MySQL 或 Microsoft CRM Dynamics 是否会更好，因为它们会更快吗？

我的另一个问题是目前可以通过 PHP PDO 访问 MS Access 或 MS Dynamics 吗？如果不是我的第一个问题是多余的，那么 MySQL 就是要走的路。

问候， 马克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:06:06.123

简短的回答：

将您的数据迁移到普通的关系数据库系统当然是有意义的，无论是 MariaDB、MySQL、PostgreSQL 还是其他什么。除了性能之外，还存在许多优势，例如，您可以摆脱供应商锁定并以您想要的方式自由访问您的数据。这包括使用 php 访问该数据。有什么*反对*迁移它的理由吗？我的意思是期望“我们总是使用 MS-Access”之类的原因......

而且我从未听说过用于 PHP 的可靠且稳定的 MS-Access 驱动程序。

# php - MySQL Group By 使用 MAX 错误结果

> ID：15023721
> 
> 赞同：0
> 
> 时间：2013-02-22T11:58:18.263
> 
> 标签：php, mysql, database, group-by

我正在尝试为每个对话获取用户的最新消息。但是，我的 group by 查询似乎并没有带回正确的行。这是我的数据：

```
ID | MESSAGE | RELATED_ID | DATE_SENT
 2 | Hi      |     2      | 2013-02-21 16:03:00
 3 | Hii     |     2      | 2013-02-21 16:04:00
 4 | Hiii    |     2      | 2013-02-21 16:05:00
 5 | Hiiii   |     2      | 2013-02-21 16:06:00
 6 | Bye     |     6      | 2013-02-21 16:03:01
 7 | Byee    |     6      | 2013-02-21 16:04:01
 8 | Byeee   |     6      | 2013-02-21 16:05:01
 9 | Again   |     9      | 2013-02-21 16:03:02
 10| Againn  |     9      | 2013-02-21 16:04:02 
```

我正在寻找的结果是：

```
ID | MESSAGE | RELATED_ID | DATE_SENT
 5 | Hiiii   |     2      | 2013-02-21 16:06:00
 8 | Byeee   |     6      | 2013-02-21 16:05:01
 10| Againn  |     9      | 2013-02-21 16:04:02 
```

我目前的查询是：

```
 SELECT MAX(ID), Message, Date_Sent, related_id FROM MESSAGES GROUP BY RELATED_ID LIMIT 0,100 
```

我得到的结果是：

```
ID | MESSAGE | RELATED_ID | DATE_SENT
 5 | Hi      |     2      | 2013-02-21 16:03:00
 8 | Bye     |     6      | 2013-02-21 16:03:01
 10| Again   |     9      | 2013-02-21 16:03:02 
```

它似乎获得了正确的 ID，但没有获得该 ID 的正确数据。

我会很感激我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T12:03:59.473

您将需要使用子查询来选择`max(id)`每个`related_id`，然后将其连接到您的表中：

```
select m1.id,
  m1.message,
  m1.related_id,
  m1.date_sent
from messages m1
inner join
(
  select max(id) MaxId, related_id
  from messages
  group by related_id
) m2
  on m1.id = m2.MaxId
  and m1.related_id = m2.related_id
LIMIT 0,100 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/50a15/2)。这样做将确保您为`SELECT`列表中的其他列返回正确的值。当您不这样做`GROUP BY`或聚合`SELECT`列表中的所有项目时，MySQL 会选择其他列的值，您可能会得到意想不到的结果。（参见[MySQL 扩展`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)）

来自 MySQL 文档：

> MySQL 扩展了 GROUP BY 的使用，以便选择列表可以引用未在 GROUP BY 子句中命名的非聚合列。...您可以使用此功能通过避免不必要的列排序和分组来获得更好的性能。但是，这主要在每个未在 GROUP BY 中命名的非聚合列中的所有值对于每个组都相同时很有用。服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。此外，从每个组中选择值不会受到添加 ORDER BY 子句的影响。在选择了值之后对结果集进行排序，并且 ORDER BY 不会影响服务器选择的值。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-22T12:04:53.030

也许应该是这样的

替换`MAX(ID)`为`MAX(Date_Sent)`

# javascript - 通过 jQuery .load 加载后执行 jQuery 脚本

> ID：15023723
> 
> 赞同：0
> 
> 时间：2013-02-22T11:58:24.843
> 
> 标签：javascript, jquery

在页面 Index.html 中有一个名为的选择框`#choose_content_to_load`和一个名为的 div`#get_loaded_content`

```
<select id="choose_content_to_load">
<option>Some content from page content.html and div #content</option>
</select

<div id="get_loaded_content"> 
```

正如在选择框选项中看到的那样，有一个名为的页面`content.html`，其中包含一个名为`#content`. 在当前情况下，使用此脚本单击选项时`#content`会加载div：`#get_loaded_content`

```
$(document).ready(function(){ 
$("#choose_content_to_load").change(function(){ 
    var selectedOption = $('#choose_content_to_load :selected').val(); 
    $containerDiv = $('#get_loaded_content'); 
    $containerDiv.html("");
       switch (selectedOption)
       {
        case "Some content from page content.html and div #content":$containerDiv.load( "content.html #content" , function(){$(document).trigger("reload_javascript");});break;
       }
    return true;
    }); 
}); 
```

如您所见，该脚本还会触发所有脚本“reload_javascript”的“重新加载”。这是因为 div`#content`有更多设计元素需要在加载时执行。这些脚本如下所示：

```
$(document).on("ready reload_javascript" ,function() {
script
}); 
```

这工作正常，所有加载的元素都初始化并工作，这是因为`Index.html`并`content.html`共享相同的设计脚本（相同的 .js 文件），因此脚本只需要“再次运行”即可工作。现在的问题， div`#content`需要有一个更大的脚本，只有当 div 被加载到`#get_loaded_content`in时才执行`Index.html`。`index.html`将脚本放在 .js 文件中并`content.html`共享它并不好，因为它有很多代码。

因此，新脚本需要使用标签直接放入`#content`html 中，并在加载此 div 时执行。

首先我认为新脚本只需添加即可运行，`reload_javascript`但后来我意识到执行脚本只是初始化它（我认为）。我希望有人可以帮助我，请记住我尝试学习 jQuery（编码初学者）。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:00:54.780

如果我理解正确，您正在将`<script>`标签加载到内容中并希望它执行？如果是这样调用这个函数，我在插入后做了一段时间。

```
/**
*This function is supposed to execute script after script insertions
*/
function execute(){
    $('#content script').each(function() {
        var _script = document.createElement('script');
        _script.type = 'text/javascript';
        _script.setAttribute('async', 'true');
    /**
    *IEFIX (IE does not support .innerHTML on createElement)
    **/
        if(!_script.innerHTML){
        _script.text=$(this).html().replace('\\\\',"\\");
        }else{
        _script.innerHTML  = $(this).html().replace('\\\\',"\\");
        }
        document.body.appendChild(_script); 
    });
} 
```

# sql - 查找单个现有名称

> ID：15023730
> 
> 赞同：0
> 
> 时间：2013-02-22T11:58:54.677
> 
> 标签：sql

我被一个关于关系代数的家庭作业困住了，我一无所获。我有一个数据库，其中不同的教师在不同的课程中注册。我应该做的是找到只注册一门课程的老师。

数据库外观示例：

```
Course  |  TeacherName
--------+-----------------
Math    |  Peter
History |  Kyle
History |  Kyle 
```

所以在这个例子中我应该找到彼得，但我迷路了，不知道要搜索什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:27:39.787

您需要使用`GROUP BY`和`HAVING`：

```
SELECT  TeacherName
FROM    YourTableName
GROUP BY TeacherName
HAVING COUNT(*) = 1; 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!2/96501/1)**

# php - 如何将 AJAX 处理合并到 PHP/MySQL While 循环中（用于异步编辑）？

> ID：15023732
> 
> 赞同：0
> 
> 时间：2013-02-22T11:58:57.590
> 
> 标签：php, javascript, mysql, ajax, while-loop

**滚动查找工作代码**

我在 AJAX 编辑平台上工作，在设置文本字段进行编辑时遇到问题。

到目前为止我的代码：

下面的 Javascript 处理初始提交：

```
<head>
<script type="text/javascript">
if(window.ActiveXObject) var ajax = new ActiveXObject('Microsoft.XMLHTTP');
else var ajax = new XMLHttpRequest();

function edit()
{
   var doc_id = document.getElementById("doc_id").value;
   ajax.open('GET', 'ajax.php?doc_id='+doc_id, true);
   ajax.onreadystatechange = function()
   {
      if(ajax.readyState == 4)
      {
         document.getElementById('content').innerHTML = ajax.responseText;
      }
   }
   ajax.send(null);
}
</script>
</head> 
```

下面的 SQL 处理该信息的初始选择查询和显示：

```
$query = 'SELECT pp.`physician_id`, pp.`physician_first_name`, pp.`physician_last_name`, pp.`featured`, ';
$query.= 'FROM `primary_physicians` AS pp ';
$query.= 'ORDER BY pp.`physician_id` ';

<body>
<div id="container">
  <?php
    $result = mysql_unbuffered_query( $query );
    echo "<table border='1'>"; 
    while ($row = mysql_fetch_assoc($result))
    {   
        echo "<tr>";
        $physician_id = $row['physician_id'];
        echo "<td>" . $row['physician_id'] . "</td>";
        echo "<td><div id='content'><input id='doc_id' type='hidden' value='$physician_id' />" . $row['physician_first_name'] . "<br /><input type='button' value='Edit' onclick='edit();'></div></td>";
        echo "<td>" . $row['physician_last_name'] . "</td>";
echo "</tr>";
    }
    echo "</table>";

?>
</div>
</body>
</html> 
```

当用户单击“内容”div 中的“编辑”按钮时，“ajax.php”文件会处理请求。

```
 $client_id = $_GET['doc_id'];
$client_query = 'SELECT pp.`physician_id`, pp.`physician_first_name`, pp.`physician_last_name`, pp.`featured` ';
$client_query.= 'FROM `primary_physicians` AS pp WHERE pp.`physician_id`=' . $client_id . '';
$client_result = mysql_unbuffered_query( $client_query );

while ($client_row = mysql_fetch_assoc($client_result))
    {
    echo "<input type='text' value='$client_row[physician_first_name]' />";
    } 
```

如下所示：

初始页面加载：

![表格展示](../Images/3bad659fa1ada47984e38368937f273e.png)

按下“编辑”按钮（任何可用按钮，而不仅仅是与客户端/ID 关联的按钮）： ![尝试编辑显示客户端 ID #1](../Images/23a5cc229958a747df210ce3e64defa4.png)

按下任何编辑按钮会在客户端 ID #1 的表行中显示客户端 ID #2（不在客户端 ID #2 的行中）： ![按下任何编辑按钮会在客户端 ID #1 的表格行中显示客户端 ID #2](../Images/28cff681e187c0143d40a090582bdf89.png)

我猜我必须在内容 div 中设置一些东西，并以某种方式将它与“edit（）”函数相关联，但是如果不在 while 循环中设置脚本（我真的不想做）。

**下面的工作代码**

Javascript（初始提交和显示）：

```
<head>
<script type="text/javascript">
if(window.ActiveXObject) var ajax = new ActiveXObject('Microsoft.XMLHTTP');
else var ajax = new XMLHttpRequest();

function hello(e)
{
   /* this was once document.getElementById("doc_id").value;*/
   var doc_id = e.currentTarget.id;
   ajax.open('GET', 'ajax.php?doc_id='+doc_id, true);
   ajax.onreadystatechange = function()
   {
      if(ajax.readyState == 4)
      {
         /*this was without the '+doc_id' document.getElementById('content').innerHTML = ajax.responseText; */
         document.getElementById('content'+doc_id).innerHTML = ajax.responseText;
      }
   }
   ajax.send(null);
}
</script>
</head> 
```

PHP/MySQL：

```
<body>
<div id="container">
  <?php
    $result = mysql_unbuffered_query( $query );
    echo "<table border='1'>"; 
    while ($row = mysql_fetch_assoc($result))
    {   
        echo "<tr>";
        $physician_id = $row['physician_id'];
        echo "<td>" . $row['physician_id'] . "</td>";
            //note change to the 'content' div (addition of $physician_id to make it truly unique; this ties into the javascript above.
        echo "<td><div id='content$physician_id'>";
            //note changes to input id and button id, as well as the 'onclick' function.
            echo "<input id='doc_id_$physician_id' type='hidden' value='$physician_id' />" . $row['physician_first_name'] . "<br /><input type='button' id='$physician_id' value='Edit' onclick='hello(event);'></div></td>";
        echo "<td>" . $row['physician_last_name'] . "</td>";
echo "</tr>";
    }
    echo "</table>";

?>
</div>
</body> 
```

没有更改或初始 MySQL 查询或 ajax.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:18:23.783

元素有问题`id`。请记住，id 属性在文档中应该是唯一的。您对许多元素使用相同的 id：

```
td><div id='content'><input id='doc_id' type='hidden' ... 
```

在一个循环内。

然后你使用 Javascript `document.getElementById('doc_id')`。JS 假设页面上只有一个带有 this`id`的元素，所以它总是会返回它找到的第一个元素。

编辑：

您还必须更改 JS 函数以检索正确的值：

对于编辑按钮使用：`onclick="edit(event)"`

然后在 JS 中：

```
function edit(e) {
    buttonId = e.currentTarget.id;
    //use the button id to find the proper value
} 
```

当然，您必须在“编辑”按钮上设置 id 并使其与您输入的 id 相对应。例如`$i`，用于按钮 ID 和`doc_id_$i`输入 ID。

我还建议您查看 jQuery，因为它有助于促进您在这里尝试实现的许多事情。

# c# - 多播委托 C#

> ID：15023736
> 
> 赞同：5
> 
> 时间：2013-02-22T11:59:01.447
> 
> 标签：c#, delegates

正在研究代表。当我阅读时。我了解到在委托中添加多个函数称为多播委托。在此基础上，我编写了一个程序。这里我在 MyDelegate 中添加了两个函数（AddNumbers 和 MultiplyNumbers）。下面的程序是多播委托的示例吗？

```
public partial class MainPage : PhoneApplicationPage
{
    public delegate void MyDelegate(int a, int b);
    // Constructor
    public MainPage()
    {
        InitializeComponent();

        MyDelegate myDel = new MyDelegate(AddNumbers);
        myDel += new MyDelegate(MultiplyNumbers);
        myDel(10, 20);
    }

    public void AddNumbers(int x, int y)
    {
        int sum = x + y;
        MessageBox.Show(sum.ToString());
    }

    public void MultiplyNumbers(int x, int y)
    {
        int mul = x * y;
        MessageBox.Show(mul.ToString());
    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T12:03:11.407

是的，这是一个多播委托的示例。请注意，而不是

```
new MyDelegate(AddNumbers) 
```

你通常可以说只是

```
AddNumbers 
```

因为存在所谓的方法组转换，它将为您创建委托实例。

要注意的另一件事是，您的声明`public delegate void MyDelegate(int a, int b);`不必驻留*在*另一种类型中（此处在`MainPage`类中）。它可以是命名空间的直接成员（因为它是一种类型）。但是，当然，将它“嵌套”在一个类中是完全有效的，就像你所做的那样，原因类似于你创建嵌套类的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-02T12:32:44.073

实际上，C# 中的*所有*委托都是 MulticastDelegates，即使它们只有一个方法作为目标。（即使匿名函数和 lambdas 也是 MulticastDelegates，即使它们根据定义只有一个目标。）

`MulticastDelegate`只是 C# 中各种函数或方法引用的基类，无论它们是否包含一个或多个目标。

所以这：

```
MyDelegate myDel = new MyDelegate(AddNumbers); 
```

设置`myDel`为`MulticastDelegate`具有单个目标的 a。但是这一行：

```
myDel += new MyDelegate(MultiplyNumbers); 
```

更新`myDel`到`MulticastDelegate`具有两个目标的 a。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-01T18:53:22.963

**Multicast delegates是delegate的特性之一，它封装了多个方法的引用并顺序调用，也称为Delegate Chaining。**

**下面是多播委托的示例。**

```
 // Declare Delegates
public delegate void MultiCast(int num1, int num2);

class Program
{
    public void Add(int num1, int num2)
    {
        Console.WriteLine(num1 + num2);
    }
    public  void Sub(int num1, int num2)
    {
        Console.WriteLine(num1 - num2);
    }
    public  void Mul(int num1, int num2)
    {
        Console.WriteLine(num1 * num2);
    }

    static void Main(string[] args)
    {
        MultiCast del1, del2, del3, multAddDel, multSubDel;
        del1 = new Program().Add;
        del2 = new Program().Sub;
        del3 = new Program().Mul;

    //`There are three ways to define the multicast delegate.`

        //1 way

        //Adding delegates 
        multAddDel = del1 + del2 + del3;
        multAddDel(10, 10);
        //Removing Delegates
        multSubDel = multAddDel - del3;
        multSubDel(10, 10);

        Console.WriteLine();
        Console.WriteLine("Second Way");

        //2 way

        MultiCast multAddDel1 = null;
        //Adding delegates 
        multAddDel1 += del1;
        multAddDel1 += del2;
        multAddDel1 +=  del3;
        multAddDel1(10, 10);
        //Removing Delegates
        multAddDel1 -= del3;
        multAddDel1(10, 10);

        Console.WriteLine();
        Console.WriteLine("Third Way");

        //3 way

        MultiCast multAddDel2 = null;
        //Adding delegates 
        multAddDel2 = (MultiCast)Delegate.Combine(multAddDel2, del1);
        multAddDel2 = (MultiCast)Delegate.Combine(multAddDel2, del2);
        multAddDel2 = (MultiCast)Delegate.Combine(multAddDel2, del3);
        multAddDel2(10, 10);

        //Removing Delegates
        multAddDel2 = (MultiCast)
            Delegate.Remove(multAddDel2, del3);

        multAddDel2(10, 10);
        Console.ReadLine();
    }
} 
```

# java - 具有索引和哈希访问的集合

> ID：15023738
> 
> 赞同：7
> 
> 时间：2013-02-22T11:59:04.550
> 
> 标签：java, collections, contains, hashcode

我需要一个集合类，它同时具有：快速索引和散列访问。现在我有 ArrayList。它具有良好的索引访问权限，但他的`contains`方法性能不佳。HashSet 有很好的`contains`实现，但没有索引访问。哪个系列两者兼备？可能来自 Apache 的东西？或者我应该创建自己的集合类，它同时具有：用于索引访问的 ArrayList 和用于`contains`检查的 HashSet？

只是为了澄清：我需要两者`get(int index)`和`contains(Object o)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:10:04.443

如果索引访问性能不是问题，则最接近的匹配是 LinkedHashSet，其 API 表明它是

*Set 接口的哈希表和链表实现，具有可预测的迭代顺序。*

至少我不认为性能会比LinkedListPerformance差。否则，除了您的 ArrayList + HashTable 解决方案，我别无选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:53:02.433

我不知道确切的查找时间，但也许你可以使用[Map interface](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)的一些实现。你可以用`map.put(objectHash, obj)`.

然后你可以验证你有一个特定的对象：

```
boolean contained = map.containsValue(obj); 
```

您可以使用哈希在地图中查找对象：

```
MyObject object = map.get(objectHash); 
```

但是，唯一的缺点是您需要知道此查找调用中的哈希值，这可能不在您的实现中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T13:05:41.660

这样做；使用**哈希**技术和**列表**的组合来获得两全其美:)

```
class DataStructure<Integer>{
   Hash<Integer,Integer> hash = new HashMap<Integer, Integer>();
   List<Integer> list = new ArrayList<Integer>();

    public void add(Integer i){
        hash.add(i,i);
        list.add(i);
    }
    public Integer get(int index){
        return list.get(index);
    }
   ...
} //used Integers to make it simpler 
```

所以反对；您保留在**HashMap/HashSet**以及**ArrayList**中。

所以如果你想使用

```
 contains method : call hashed contains method.

 get an object with index: use array to return the value 
```

只要确保你有这两个集合同步。并注意两种数据结构中的更新/删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T12:02:47.803

如果您从头到尾遍历索引，我认为这可能会满足您的需求：[LinkedHashSet](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedHashSet.html)

如果您需要通过索引和哈希访问进行随机访问，如果没有其他人有更好的建议，我想您可以制作自己的集合，两者兼而有之。

# java - Android蓝牙：线程与广播接收器问题

> ID：15023747
> 
> 赞同：1
> 
> 时间：2013-02-22T11:59:28.623
> 
> 标签：java, android, multithreading, bluetooth, broadcastreceiver

他在 Android 中实现了从 Arduino 接收数据的蓝牙连接，没有问题。卖家 Amarino 穿着 Listener，我做得非常好，我工作得很好。当我意识到我已经安装了 apk Amarino 是必要的并充当我的应用程序服务时，问题就开始了。这显然是不得不安装外部应用程序的痛苦，所以我开始努力寻找解决方案。

我做的第一件事是寻找一个名为 Amarino Embed 的库，它应该不需要运行应用程序 apk。该网站不是最新的，并且在数千个示例和事情不起作用之后退出。无论如何，我像 Amarino 一样上去了蓝牙通知，在这之间让我很有趣并且没有工作，我去了 B 计划。

B计划是根据Android文档来实现它，我已经阅读并广泛测试了它，实现告诉我什么线程来分离主线程的执行并使用处理程序。起初我认为如果它有效并且一切都已排序并且我会实现我在网上看到的这个（我放了松散的部分）：

```

```
private BluetoothAdapter btAdapter = null;
private BluetoothSocket btSocket = null;
private StringBuilder sb = new StringBuilder();  
private ConnectedThread mConnectedThread;
private static String address = "00:12:10:17:02:24";
private Handler h;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    txtArduino = (TextView) findViewById(R.id.textView1);   // for display the received data from the Arduino

    h = new Handler() {
        public void handleMessage(android.os.Message msg) {
        switch (msg.what) {
           case RECIEVE_MESSAGE:    // if receive massage
            byte[] readBuf = (byte[]) msg.obj;
            String strIncom = new String(readBuf, 0, msg.arg1); // create string from bytes array
            sb.append(strIncom);    // append string
            int endOfLineIndex = sb.indexOf("\r\n");    // determine the end-of-line
            // Log.d("CADENA: ", "SB:  " + sb);
            if (endOfLineIndex > 0) { // if end-of-line,
            String sbprint = sb.substring(0, endOfLineIndex);   // extract string
                   sb.delete(0, sb.length());   
                   //Log.d("CADENA MAXIMA: ", "CM: " + sbprint);// and clear
                   String[] cadenaSepara = sbprint.split(",");
                   if(cadenaSepara != null) {
                    Log.d("TAMAÑO: ", "TAM: " + cadenaSepara.length);
                   }
                txtArduino.setText("Data from Arduino: " + sbprint);        // update TextView
               }
            //Log.d(TAG, "...String:"+ sb.toString() +  "Byte:" + msg.arg1 + "...");
            break;
    }
       };
};     
   btAdapter = BluetoothAdapter.getDefaultAdapter();    // get Bluetooth adapter
   checkBTState();
}

 @Override
public void onResume() {
       BluetoothDevice device = btAdapter.getRemoteDevice(address);
       btSocket = device.createRfcommSocketToServiceRecord(UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
       btAdapter.cancelDiscovery();
       btSocket.connect();
       mConnectedThread = new ConnectedThread(btSocket);
       mConnectedThread.start();
}

private class ConnectedThread extends Thread {
      private final InputStream mmInStream;
      private final OutputStream mmOutStream;

public ConnectedThread(BluetoothSocket socket) {
InputStream tmpIn = null;
OutputStream tmpOut = null;

// Get the input and output streams, using temp objects because
// member streams are final
try {
     tmpIn = socket.getInputStream();
     tmpOut = socket.getOutputStream();
 } catch (IOException e) { }

mmInStream = tmpIn;
mmOutStream = tmpOut;

//Log.d("THREAAAAAAAAD: ", "THREAAAAAAAAD: ");
}

public void run() {
       byte[] buffer = new byte[256];  // buffer store for the stream
       int bytes; // bytes returned from read()

       // Keep listening to the InputStream until an exception occurs
       while (true) {
            try {
                // Read from the InputStream
                bytes = mmInStream.read(buffer);
                // Log.d("BYTEEEES: ", "BIITES: " + bytes);// Get number of bytes and message in "buffer"
                h.obtainMessage(RECIEVE_MESSAGE, bytes, -1, buffer).sendToTarget(); // Send to message queue Handler
            } catch (IOException e) {
                break;
            }
        }
}
<code> 
```

这是一种稍微简化并省略了内部接口 MindListenerTWO 的 BROADCAST：

<pre>
public class MindInterfaceTWO extends BroadcastReceiver {
    private static BluetoothDevice dispositivo;
    private static List<MindListenerTWO> listeners = new ArrayList<MindListenerTWO>();

    public void addListener(MindListenerTWO mindListener) {
listeners.add(mindListener);
if (listeners != null && !listeners.isEmpty())
//context.registerReceiver(this, new IntentFilter(BluetoothDevice.ACTION_FOUND));
context.registerReceiver(this, new IntentFilter(BluetoothAdapter.ACTION_STATE_CHANGED));
     }

@Override
public void onReceive(Context context, Intent intent) {
     //String accion = intent.getAction();
     //Log.d("DEBUG:", "LLEGAAAAAA AQUIIIII");
     //dispositivo = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
     //dispositivo.getAddress();
     Log.d("LLEGA: ", "AQUIIIIIIIIIII");

     // Here's what it did with AMARINO
     String data = null;

     // Esta cadena (que no se usa) simplemente muestra la direccion del
     // Bluetooth desde que se ha
     // enviado la informacion
     // final String address =
     // intent.getStringExtra(AmarinoIntent.EXTRA_DEVICE_ADDRESS);

     // Es el tipo de dato que se ha añadido al intento
     final int dataType = intent.getIntExtra(
     AmarinoIntent.EXTRA_DATA_TYPE, -1);
     Log.d("DATAAAAAAS ANTES DE ENTRAR: ", "DATOS: ");
     // Esto comprueba que es String en Android y char[] en Arduino para
     // que sean correctos los datos
     if (dataType == AmarinoIntent.STRING_EXTRA) {
data = intent.getStringExtra(AmarinoIntent.EXTRA_DATA);
Log.d("DATAAAAAA: ", "DATOS: " + data);
// Formato de los datos recibidos:
// signal strength, attention, meditation, delta, theta, low
// alpha, high alpha, low beta, high beta, low gamma, high gamma"
String[] datos = data.split(",");
if (data != null) {
signal = Integer.valueOf(datos[0]);
launchNewSignal(signal);
                 }
         }
<code> 
```

最终，我想要的是通过广播获得信号并捕获数据。我知道这里的一切都是一个小滚动评论，但是嘿，我有点疯了。问候，谢谢！

（对不起，我不能在邮政编码中好起来）

# jquery - 将 var 从一个函数传递到另一个函数

> ID：15023750
> 
> 赞同：0
> 
> 时间：2013-02-22T11:59:30.827
> 
> 标签：jquery

嗨，请有人指出我正确的方向，我需要传递`height`到我的窗口滚动功能

```
$(window).scroll(function() {       
    var scrolled = $(window).scrollTop();

    //Content
    if(scrolled >= 0 && scrolled < 342) {
             $('#intro h2, #intro .down').stop().animate({ opacity: 1 }, {queue: true, duration:250, easing:"easeOutQuad"});
        } else if (scrolled >= 342 && scrolled < 560) {
             $('#intro h2, #intro .down').stop().animate({ opacity: 0 }, {queue: true, duration:250, easing:"easeOutQuad"});
        } else if (scrolled >= 560) {
             $('#intro h2, #intro .down').stop().css({ opacity: 0 });
        }

        //Navigation
        if(scrolled >= 0 && scrolled < 342) {
             $('#header h1 a:link').stop().css({ width: 101 });
             $('#header li .service').stop().css({ background: 'none', color: '#ccc'}, {queue: true, duration:50, easing:"easeOutQuad"});
        } else if (scrolled >= 342 && scrolled < 560) {
             $('#header h1 a:link').stop().css({ width: 42 });
             $('#header li .service').stop().css({background: '#54C2D9', color: '#fff'}, {queue: true, duration:50, easing:"easeOutQuad"});
        } else if (scrolled >= 560) {
             $('#header h1 a:link ').stop().css({ width: 42 });
        }

console.log(scrolled);  
});

function jqUpdateSize(){
    // Get the dimensions of the viewport
    var height = $(window).height();

    $('#intro').css({height: height});

    console.log(height);// Display the height
};
$(document).ready(jqUpdateSize);    // When the page first loads
$(window).resize(jqUpdateSize);     // When the browser changes size 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:01:00.463

使你的变量全局然后你可以使用，如下所示

```
window.height = "This is global!"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T12:01:56.427

您需要在函数 jqUpdateSize 的末尾返回高度

# jquery-mobile - 如果我们代表不在同一页面中的锚链接，那么如何在 JQuery mobile 中重定向到该链接？

> ID：15023755
> 
> 赞同：0
> 
> 时间：2013-02-22T11:59:46.623
> 
> 标签：jquery-mobile, anchor, external

要链接同一页面内或 html 页面外的页面，它可能会根据链接重定向到特定`<a>`链接

**这是html的代码：**

```
<div data-role="page" id="main">
   <a href="pop.html" data-transition="slide">page1</a>
   <a href="#page2" data-transition="slide">page2</a>
</div>
<div data-role="page" id="page2">
  this is page2
</div> 
```

这里 page1 是外部 html 文件，如果我们单击它显示为**Loading Error 页面**

而 page2 在同一页面中，因此它重定向到它。请为此提供有关如何链接*外部*html 的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:54:21.050

来自 JQM 文档：

**没有 Ajax 的链接**

指向其他域或具有 rel="external"、data-ajax="false" 或 target 属性的链接将不会被 Ajax 加载。相反，这些链接将导致整个页面刷新而没有动画过渡。两个属性（rel="external" 和 data-ajax="false"）具有相同的效果，但语义不同：链接到另一个站点或域时应使用 rel="external"，而 data-ajax=" false" 对于简单地选择域中的页面不通过 Ajax 加载很有用。由于安全限制，框架总是选择链接到外部域的 Ajax 行为。

# c# - 如何在 aspx.cs 页面中添加 css 类意味着页面后面的代码

> ID：15023756
> 
> 赞同：1
> 
> 时间：2013-02-22T11:59:53.740
> 
> 标签：c#, asp.net, css

在 aspx 页面中，我使用以下内容：

```
<asp:GridView ID="grdCreateCustRepoUsers">
  <asp:TemplateField>
    <ItemTemplate>
      <div class="cst_checkbox_container1" id="cs1" runat="server">
        <div class="cst_checkbox unselected">
          <label class="checkbox_value">
          <asp:CheckBox ID="chkRead" runat="server" AutoPostBack="true" OnCheckedChanged="chkRead_CheckChanged" /></label>
        </div>
      </div>
    </ItemTemplate>
   </asp:TemplateField>
 </asp:GridView> 
```

在我使用的代码后面：

```
 cs1.Attributes.Add("class", "some-class"); 
```

但它给出的错误`cs1`在当前上下文中不存在。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:09:24.110

`cs1`将不会直接用于页面，因为它将`DataSource`为您的`grdCreateCustRepoUsers` `GridView`.

您需要做的是将其设置`RowDataBound`为`GridView`.

在 C# 中使用[来自 MSDN 的示例](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)

```
void CustomersGridView_RowDataBound(Object sender, GridViewRowEventArgs e)
{
  if(e.Row.RowType == DataControlRowType.DataRow)
  {
     HtmlGenericControl div = (HtmlGenericControl)e.FindControl("cst_checkbox_container1");
     div.Attributes["class"] = "some_class";
  }
} 
```

这是在VB.NET中（我最初写的，因为我没有注意到你`aspx.cs`在标题中）

```
Sub grdCreateCustRepoUsers_RowDataBound(ByVal sender As Object, ByVal e As GridViewRowEventArgs) Handles grdCreateCustRepoUsers.RowDataBound
  If e.Row.RowType = DataControlRowType.DataRow Then
    Dim div as HtmlGenericControl = e.FindControl("cst_checkbox_container1")
    div.Attributes("class") = "some-class"
  End If
End Sub 
```

（注意，我对`GridView`控件的经验非常有限，但这是基于我对类似`<asp:Repeater>`控件的经验。因此，上面的代码未经测试，但希望为您指明正确的方向。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:22:59.643

```
protected void grid_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        HtmlContainerControl div = e.Row.FindControl("cs1") as HtmlContainerControl;
        div.Attributes["class"] = "some_class";
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-06T08:05:47.013

句法：

```
controlName.CssClass="CSS Class Name"; 
```

例子：

```
txtBank.CssClass = "csError"; 
```

# android - Android：一个活动中的多个视图

> ID：15023757
> 
> 赞同：4
> 
> 时间：2013-02-22T11:59:53.867
> 
> 标签：android, android-layout

我是 android 新手，我正在开发一个带有一组问题的测验应用程序，每个问题都有一个问题（文本）和 4 个图像（图像按钮），当用户选择正确的图像时，他们会转到下一个问题。所以从一个问题到另一个问题，我应该：

1.  在一项活动中多次调用 setContentView()？（所有问题的布局都是一样的，只有问题的文字和图片会改变）
2.  或者在xml中添加多个布局，并在运行时设置每个布局的可见性？（但这样做，我收到了一个 xml 文件中视图过多的警告）
3.  还有其他更好的建议吗？

感谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:04:37.287

我的建议动态填充问题......

从你的角度来看这样做

1.带问题文本和4张图片的xml。2.获取问题文本（TextView）和4个imageview的ID。3.当事件触发（即下一个问题）更改问题文本和答案图像时..

试试这个简单的逻辑

```
 int question=0;
ImageView answer1,answer2,answe3,answer4;
int answerids[]={R.id.answer1,R.id.answer1,R.id.answer1,R.id.answer1};
ImageView[] answerimages={answer1,answer2,answer3,answer4};
String questions[]={"Question1","Question2","...."};
int images[][]={{R.drawable.answer1,R.drawable.answer2,R.drawable.answer3,R.drawable.answer4},{second question drawables},{Third question drawables}...}; 
```

在 onCreate 中这样做

```
TextView question=findViewById(R.id.question);
    for(int i=0;i<answerids.length;i++)
    {
        answerimages[i]=(ImageView)findViewById(answerids[i]);
        answerimages[i].setImageResource(images[question][i]);
        answerimages[i].setOnclickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                question+=1;
            nextqueston();

            }
        }); 
```

填充下一个问题文本和图像..

```
 public void nextqueston()
        {
            question.setText(questions[queston]);
            for(int i=0;i<answerids.length;i++)
            {
                answerimages[i].setImageResource(images[question][i]);
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:04:07.350

只需保持相同的活动打开，当一个问题完成后，以编程方式在 TextView 上设置问题文本，对于 ImageViews 也是如此。都在相同的布局。

# titanium - Titanium Mobile Android：关闭应用程序时未释放内存

> ID：15023762
> 
> 赞同：2
> 
> 时间：2013-02-22T12:00:07.603
> 
> 标签：titanium, titanium-mobile, titanium-modules

我们使用 Titanium Mobile 开发了一个应用程序。当我们第一次在 Android 设备上运行该应用程序时，它使用了大约 25MB 的内存。但是每次我们使用设备后退按钮退出应用程序然后重新启动应用程序时，内存使用量就会增加 10MB。因此，如果我们退出并重新启动应用程序 5 次，应用程序最终会使用 50MB 的额外内存，总使用量为 75MB。如果我们多次启动应用程序，应用程序将根本无法启动，并引发以下错误：

> 未捕获的错误：无法加载资源，引发 Java 异常。来源 = assets.readAsset(assetPath);

我们最初认为这是我们的应用程序的问题，所以我们开发了一个简单的应用程序来测试这个问题。这个测试应用程序只是创建一个窗口并为其添加一个标签。app.js 如下：

```
function createView() {

    var win1 = Titanium.UI.createWindow({  
        title:'Tab 1',
        backgroundColor:'#fff',
        exitOnClose: true
    });

    var label1 = Titanium.UI.createLabel({
        color:'#999',
        text:'I am Window 1',
        font:{fontSize:20,fontFamily:'Helvetica Neue'},
        textAlign:'center',
        width:'auto'
    });

    win1.add(label1);

    win1.open();    
}

createView(); 
```

好吧，测试应用程序与我们的原始应用程序存在相同的问题。首次启动时会消耗 14MB 内存。5 次重新启动（使用设备后退按钮）后，它消耗 21MB（初始内存的 150%）。

我们还尝试了在 Titanium 中创建项目时生成的示例应用程序和 Titanium 开发的 Kitchen Sink 应用程序。结果是一样的。

我们的测试是使用 Titanium 3.0.0.GA 和两种不同的设备完成的：

*   HTC Desire Z - 安卓 2.3
*   三星盖乐世 2 - 安卓 4.0

我们一直在寻找解决此问题的方法，但没有任何结果。我们不想相信这是 Titanium 的正常行为，因为如果是这样，Titanium 根本不是我们的选择。有没有人为这个问题找到任何解决方案/解决方法？

提前致谢

更新：添加了测试应用程序的 tiapp.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<ti:app xmlns:ti="http://ti.appcelerator.org">
    <id>com.cloudship.titanium.mobile.test</id>
    <name>titanium-mobile-test</name>
    <version>1.0</version>
    <publisher>Javier</publisher>
    <url>http://</url>
    <description>not specified</description>
    <copyright>2013 by Javier</copyright>
    <icon>appicon.png</icon>
    <persistent-wifi>false</persistent-wifi>
    <prerendered-icon>false</prerendered-icon>
    <statusbar-style>default</statusbar-style>
    <statusbar-hidden>false</statusbar-hidden>
    <fullscreen>false</fullscreen>
    <navbar-hidden>true</navbar-hidden>
    <analytics>true</analytics>
    <guid>18e506f3-02d4-4fb7-84b7-ff8d4c1fac82</guid>
    <property name="ti.ui.defaultunit" type="string">system</property>
    <iphone>
        <orientations device="iphone">
            <orientation>Ti.UI.PORTRAIT</orientation>
        </orientations>
        <orientations device="ipad">
            <orientation>Ti.UI.PORTRAIT</orientation>
            <orientation>Ti.UI.UPSIDE_PORTRAIT</orientation>
            <orientation>Ti.UI.LANDSCAPE_LEFT</orientation>
            <orientation>Ti.UI.LANDSCAPE_RIGHT</orientation>
        </orientations>
    </iphone>
        <android xmlns:android="http://schemas.android.com/apk/res/android">
        <manifest>
            <application android:debuggable="true"/>
            <supports-screens android:anyDensity="true"/>
        </manifest>
    </android>
    <mobileweb>
        <precache/>
        <splash>
            <enabled>true</enabled>
            <inline-css-images>true</inline-css-images>
        </splash>
        <theme>default</theme>
    </mobileweb>
    <modules/>
    <deployment-targets>
        <target device="iphone">false</target>
        <target device="ipad">false</target>
        <target device="blackberry">false</target>
        <target device="android">true</target>
        <target device="mobileweb">false</target>
    </deployment-targets>
    <sdk-version>3.0.0.GA</sdk-version>
</ti:app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:16:53.997

这是 Titanium 3.0.0.GA 中的一个错误。[在此处](https://jira.appcelerator.org/browse/TIMOB-12286)查看 jira 票。幸运的是，它已在 3.0.2 中修复。

答案在[Titanium Q&A中给出](http://developer.appcelerator.com/question/148669/android-memory-not-released-when-app-is-closed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:19:50.007

我也在开发钛。我检查了我的应用程序，我在 HTC Desire 上的 Android 2.2.2 上没有遇到这个问题。该应用程序已正确关闭。

您可以使用以下代码进行测试：

```
var win1 = Titanium.UI.createWindow({  
    title:'Tab 1',
    backgroundColor:'#fff',
    exitOnClose: true
});

var label1 = Titanium.UI.createLabel({
    color:'#999',
    text:'I am Window 1',
    font:{fontSize:20,fontFamily:'Helvetica Neue'},
    textAlign:'center',
    width:'auto'
});

win1.add(label1);

win1.open(); 
```

所以去掉周围的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:49:53.783

这是内存问题的解决方案..请通过这个线程

[https://developer.appcelerator.com/question/116867/this-is-a-solution-to-your-memory-woes](https://developer.appcelerator.com/question/116867/this-is-a-solution-to-your-memory-woes)

# spreadsheet - 我正在使用 Google Drive 电子表格并需要创建报告 - 我该如何进行此逻辑查询？

> ID：15023763
> 
> 赞同：2
> 
> 时间：2013-02-22T12:00:10.447
> 
> 标签：spreadsheet, google-drive-api

我有一个包含标题 Operation、Priority 和 Specialty 的电子表格，因此特定操作的所有信息都在一行上并以文本形式存储。

我需要为每个专业创建一个报告，告诉我已完成的操作数量，这很容易（使用 COUNTIF），以及有多少例行或紧急的优先操作。

这在数据库中很容易。我会这样做。

COUNT * FROM OPERATION_LIST WHERE Specialty = “Cardiac” AND Priority = “Routine”；

不过，我一生都无法弄清楚如何在电子表格中做到这一点。

我知道 Google Drive Spreadsheets 有一个 QUERY 功能，但我不知道如何使用它，谷歌搜索答案也无济于事。我相信当我看到它时会很明显，但我已经为此工作了好几天，没有运气。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-25T09:42:13.230

我会这样做：

=query(A:C, "select A,count(B) where B = 'Routine' and C = 'Cardiac' group by A label count(B) 'Count'",1)

假设您有一个标题行（操作、优先级、专业，分别代表查询中的 A、B、C）。

希望这可以帮助。

# selenium - 在黄瓜硒中不执行鼠标悬停

> ID：15023765
> 
> 赞同：1
> 
> 时间：2013-02-22T12:00:13.577
> 
> 标签：selenium, cucumber, capybara

我已尝试使用以下代码，但鼠标悬停不起作用。

```
page.driver.browser.action.move_to(first(".aqqin-icontoolbar.aqqin-icontoolbar-share.first").native).perform

page.driver.browser.mouse.move_to(bookmark_box.native) 
```

这仅适用于工具提示，但不适用于 li 下拉列表。我该怎么做请建议我？

# jquery - AJAX 登录表单

> ID：15023768
> 
> 赞同：1
> 
> 时间：2013-02-22T12:00:20.440
> 
> 标签：jquery, ajax, spring

我现在正在使用弹簧登录表单。这类似于下面链接中的示例代码。

[http://www.mkyong.com/spring-security/spring-security-form-login-example/](http://www.mkyong.com/spring-security/spring-security-form-login-example/)

现在我想用spring实现ajax登录表单请建议我怎么做

```
<%
    String res = (String)request.getParameter("login_error");
    if(res!=null)
    {%>
    <script type="text/javascript">
    //alert("Invalid email address or password. Please try again.");
    $("#status p").html("Invalid email address or password. Please try   again.");
    document.getElementById('errormsg').style.display="block";
</script>
<%}

%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:06:34.680

Ajax 是一种以特定方式将页面/表单发布到服务器的方法。它也是一个完全客户端组件，通过 JavaScript 或基于 JavaScript 的库（如 jquery）实现。

所以请记住；将建议您阅读有关 Ajax 的信息，然后您可以与您的应用程序集成。你可以从这里开始[http://www.mkyong.com/tutorials/jquery-tutorials/](http://www.mkyong.com/tutorials/jquery-tutorials/)

# android - NotificationManager/NotificationHelper 不更新百分比值

> ID：15023769
> 
> 赞同：0
> 
> 时间：2013-02-22T12:00:25.487
> 
> 标签：android, android-notifications

所以我有这个下载东西的类......我正在根据[这个人的例子实现 NotificationHelper](http://eliasbland.wordpress.com/2011/03/11/an-example-of-how-to-run-a-background-task-and-report-progress-in-the-status-bar-using-asynctask-on-android/)

```
private class DatabaseStorageTask extends AsyncTask<String, Integer, String> {

    protected String doInBackground(String... params) {

        for(int i=0; i<10; i++){
            //codes here

            downloadFileCount++;
            publishProgress( (int) ((downloadFileCount/totalDownloadFileCount) * 100 ) );
        }
    }

    protected void onProgressUpdate(Integer... progress){
        Log.e("progressupdate", "in progressupdate");
        mNotificationHelper.progressUpdate(progress[0]);
    }

} 
```

这是代码中发生的事情的要点。我看不到是什么导致了我的问题，因为通知一直显示 0%，即使我对 downloadFileCount 和 totalDownloadFileCount 进行了 Log.e() 打印，我已经检查过它是准确的。

我错过了什么导致百分比进度不更新吗？

**编辑：**好的，所以我已经将 Log.e() 放在任何地方，我有点想通了这个问题，但不确定解决方案。百分比和计算一切正常，并且给出了正确的数字。但是，当调用 publishProgress 时，不会调用 onProgressUpdate。我根本没有看到 Log.e("progressupdate", "in progressupdate") 显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:25:04.220

The answer lies in using float rather than int values to get the percentage.

E.g. 5 of 20 = 25%

5/20 = 0.25

when using int = 0 int * 100 = 0

when using float = 0.25 float * 100 = 25

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:19:08.127

也许它在什么时候起作用

```
 protected String doInBackground(String... params) {

    while(downloadFileCount<100){ //try while instead of for-loop

        downloadFileCount++;
        publishProgress(downloadFileCount); //only count downloadFileCount
    }
} 
```

不知道这是否是解决方案，这只是一个想法....

# javascript - Jquery：将嵌套的 json 对象转换为另一个 json 对象

> ID：15023776
> 
> 赞同：0
> 
> 时间：2013-02-22T12:00:46.360
> 
> 标签：javascript, jquery, json

在 javascript/jquery 我如何实现以下

```
old_dataset = [
{
    "dob": "xyz",
    "name": {
        "first": " abc",
        "last": "lastname"
    },
    "start_date": {
        "moth": "2",
        "day": "5",
        "year": 1
    },
    "children": [
        {
            "child": {
                "id": "1",
                "desc": "first child"
            }
        },
        {
            "child": {
                "id": "2",
                "desc": "second child"
            }
        }
    ]
},
{
    "dob": "er",
    "name": {
        "first": " abc",
        "last": "txt"
    },
    "start_date": {
        "moth": "2",
        "day": "5",
        "year": 1
    },
    "children": [
        {
            "child": {
                "id": "1",
                "desc": "first child"
            }
        },
        {
            "child": {
                "id": "2",
                "desc": "second child"
            }
        }
    ]
} 
```

]

使用 jquery 遍历上述内容并更改为以下内容

```
new_dataset = [
{
    "dob":"xyz",
    "name": <first and last name values>
    "start_date":<value of month day year>,
    "children": [ {
       child_id :1,
       child_id : 2
      }, 
    ]
 },{
    "dob":"er",
    "name": <first and last name values>
    "start_date":<value of month day year>,
    "children": [ {
       child_id :1,
       child_id : 2
      }, 
    ]
}] 
```

如果有人可以提供代码来转换数据，它将帮助我理解迭代

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:23:41.930

您可以执行以下操作：

```
function transformDataset(oldDataset) {
  var newDataset = [];
  var newObj;

  for (var i = 0; i < oldDataset.length; i++) {
    newObj = transformObj(oldDataset[i]);
    newDataset.push(newObj);
  }

  return newDataset;
}

function transformObj(obj) {
  var children = obj.children;

  obj.name = obj.name.first + ' ' + obj.name.last;
  obj.start_date = obj.start_date.month + ' ' + obj.start_date.day + ' ' + obj.start_date.year;

  obj.children = [];
  for (var i = 0; i < children.length; i++) {
    obj.children.push(children[i].child.id);
  }

  return obj;
}

var new_dataset = transformDataset(old_dataset); 
```

请注意， new_dataset 将具有一个*子 ID*数组，而不是具有多个`child_id`属性的对象。`old_dataset.start_date.month`您在（已写）中也有错字`moth`（或者可能是故意的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-25T09:36:00.127

首先使用 map 迭代数组数据（old_dataset），将元素名称和 start_date 替换为新值，然后返回数组

```
const old_dataset = [
{
    "dob": "xyz",
    "name": {
        "first": " abc",
        "last": "lastname"
    },
    "start_date": {
        "moth": "2",
        "day": "5",
        "year": 1
    },
    "children": [
        {
            "child": {
                "id": "1",
                "desc": "first child"
            }
        },
        {
            "child": {
                "id": "2",
                "desc": "second child"
            }
        }
    ]
},
{
    "dob": "er",
    "name": {
        "first": " abc",
        "last": "txt"
    },
    "start_date": {
        "moth": "2",
        "day": "5",
        "year": 1
    },
    "children": [
        {
            "child": {
                "id": "1",
                "desc": "first child"
            }
        },
        {
            "child": {
                "id": "2",
                "desc": "second child"
            }
        }
    ]
}
]

let new_dataset = old_dataset.map((arr) => {
  arr.name = `${arr.name.first} ${arr.name.last}`
  arr.start_date = `${arr.start_date.moth} ${arr.start_date.day} ${arr.start_date.year}`
  return arr
})

console.log(new_dataset)
```

# c# - 我的按钮样式没有在 MouseOver 上显示我的背景图片

> ID：15023778
> 
> 赞同：0
> 
> 时间：2013-02-22T12:00:53.073
> 
> 标签：c#, wpf, xaml, styles

我已经为这样的按钮创建了一个样式

```
 <Style TargetType="{x:Type Button}" x:Key="BoutonRessources">
       <Setter Property="Width" Value="18" />
       <Setter Property="Margin" Value="-1,0,-2,0" />
       <Setter Property="ToolTip" Value="Clear" />
       <Setter Property="VerticalAlignment" Value="Center" />
       <Setter Property="BorderThickness" Value="0" />
       <Setter Property="HorizontalAlignment" Value="Center" />
       <Setter Property="Background" Value="Transparent" />
       <Setter Property="HorizontalContentAlignment" Value="Center" />
       <Style.Triggers>
           <Trigger Property="IsMouseOver" Value="True">
               <Setter Property="Background">
                   <Setter.Value>
                       <ImageBrush ImageSource="BoutonToolbarSelected.png"/>
                   </Setter.Value>
               </Setter>
               <Setter Property="Height"  Value="22"/>
               <Setter Property="Width"  Value="32"/>
           </Trigger>
       </Style.Triggers>
   </Style> 
```

我的按钮出现在我的屏幕上，但是当鼠标悬停在按钮上时，它不显示我的“BoutonToolbarSelected.png”。你知道为什么吗 ？

**这是我如何调用我的按钮：**

```
<Button Style="{StaticResource BoutonRessources}" >
    <Image Source= "xRtDiva_XWPF_TBR_PREMIER.PNG_IMAGES.png" Height="18"/>
</Button> 
```

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:26:33.533

因为您设置`<Image Source= "xRtDiva_XWPF_TBR_PREMIER.PNG_IMAGES.png" Height="18"/>`为按钮的内容，所以背景将隐藏在它后面。

您可以将触发器更改为：

```
 <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background">
                                <Setter.Value>
                                    <ImageBrush ImageSource="BoutonToolbarSelected.png"/>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="Height"  Value="22"/>
                            <Setter Property="Width"  Value="32"/>
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="False">
                            <Setter Property="Background">
                                <Setter.Value>
                                    <ImageBrush ImageSource="xRtDiva_XWPF_TBR_PREMIER.PNG_IMAGES.png"/>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="Height"  Value="18"/>
                        </Trigger>
                    </Style.Triggers> 
```

# objective-c - 在 UICollectionViewCell 中滑动 UIView 会阻止滚动功能

> ID：15023782
> 
> 赞同：3
> 
> 时间：2013-02-22T12:00:57.327
> 
> 标签：objective-c, cocoa-touch, uicollectionview, uipangesturerecognizer, uicollectionviewcell

我在 a 上使用 a`UIPanGestureRecognizer`在 a`UIView`中`UICollectionViewCell`。我正在使用该`translationInView`方法来获取沿 X 轴的平移并`UIView`左右滑动。它工作正常，但现在如果我的手指在单元格上，我无法在 CollectionView 中上下滚动。有没有办法让`PanGestureRecognizer`垂直滚动到`UICollectionView`?

我正在尝试复制 Reeder.app for iOS 中看到的滑动。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T16:31:34.863

一旦`UIPanGestureRecognizer`您的触摸中的激活`UIView`不再通过响应者链转发，因此您`UICollectionView`将不再接收触摸。

您可以尝试将您设置`UIView`为您的代表，`UIPanGestureRecognizer`并放置是否`UIPanGestureRecognizer`应该激活的逻辑。你必须在你的 UIView 中实现委托的方法：

```
-(BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer; 
```

例如，使用下面的代码，如果视图的 y 轴上的速度大于 x 轴的速度，您会告诉它不要激活（因此将触摸发送到`UICollectionView`它下面）

```
-(BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer{

    UIPanGestureRecognizer *recognizer = (UIPanGestureRecognizer *)gestureRecognizer;
    CGPoint velocity =[recognizer velocityInView:self];
    if(abs(velocity.y)>=(abs(velocity.x))){
        return NO;
    }else return YES;

} 
```

希望这会有所帮助。

# scriptella - 在 scriptella 中插入未知列数的 INSERT INTO

> ID：15023783
> 
> 赞同：1
> 
> 时间：2013-02-22T12:00:59.693
> 
> 标签：scriptella

我必须备份一个可以更改列数的表。当我的 etl 脚本启动时，它不知道列数。如何即时创建 INSERT INTO table VALUES (?1, ?2, ...) 脚本？

问候， 雅克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:57:36.673

根据数据库，可以使用 CREATE TABLE FROM SELECT （或类似的）来备份表。例子：

```
CREATE TABLE new_table AS (SELECT * FROM old_table); 
```

# sql-server-express - 使用 SQL Server Express 10 创建数据库并使用 SQL Server Express 10.5 运行它会导致任何问题吗？

> ID：15023786
> 
> 赞同：0
> 
> 时间：2013-02-22T12:01:09.703
> 
> 标签：sql-server-express

如果我使用 SQL Server Express 10 并在我的应用程序需要运行 SQL Server Express 10.5 的目标系统中创建数据库，我会遇到任何问题吗？

在我安装了 VS2012 并在几个月后将其删除后，在我的系统上安装了 SQL Server Express 10（我猜它是随 Visual Studio 2010 安装的）。在我`.\sqlexpress`在连接字符串中使用的应用程序中，我不确定这是我系统上使用的 SQL Server 2012 Express 版本还是 2010 版本？

所以我只是想知道迁移到新系统是否会导致我出现任何不兼容或奇怪和不可预测的结果，为了避免它们，我需要在目标机器上安装什么？

顺便说一句，在目标系统上安装什么就足够了？

搜索SQL Server Express的时候，有好几个版本，大小不一，需要哪一个，够用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:06:03.583

这是非常安全的，但您不能返回，因为数据库将被升级。

# android - 如何以编程方式对齐按钮左侧的图像视图？

> ID：15023787
> 
> 赞同：0
> 
> 时间：2013-02-22T12:01:10.950
> 
> 标签：android

如何以编程方式对齐按钮左侧的图像视图？在下面的这段代码中，我以编程方式生成按钮和图像视图，但图像视图显示在按钮下方如何设置按钮图像视图的右侧？

```
public class MainActivity1 extends Activity {
public  static Bitmap yourSelectedImage = null;

ImageView imageView1;
ContentValues newCon = new ContentValues();
public static byte[] blob = null;
public static long reqId;
int i;

  LinearLayout btnLO;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main1);

     btnLO = new LinearLayout(MainActivity1.this);

     LinearLayout.LayoutParams paramsLO = new LinearLayout.LayoutParams(
                             LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
     // button margins
     paramsLO.setMargins(0, 0, 0, 0);
     // button height/width *pixels*
     paramsLO.height = 75;
     paramsLO.width = 75;

     btnLO.setOrientation(LinearLayout.VERTICAL);
     btnLO.setBackgroundColor(5); // not working correctly

     //buttons
     for (i =0;i <j;i++)
     {
     final Button b1 = new Button(MainActivity1.this);
     final ImageView imageView = new ImageView(MainActivity1.this);

     b1.setText(reqdata[i].getSpinnerText());
     b1.setTag(reqdata[i].getValue());
     btnLO.addView(b1, paramsLO);        
     btnLO.addView(imageView, paramsLO);

     b1.setOnClickListener(new View.OnClickListener() 
            {
                public void onClick(View v) 
                {               
                    reqId =  
   Long.valueOf(reqdata[btnLO.indexOfChild(b1)/2].getValue()).longValue();
                    Toast.makeText(MainActivity1.this, reqId+"", 
                            Toast.LENGTH_SHORT).show();

     }

     final Button b2 = new Button(MainActivity1.this);
     b2.setOnClickListener(new View.OnClickListener() 
     {
         public void onClick(View v) 
         {              
            }
     }); 
     btnLO.addView(b2, paramsLO);
     btnLO.setGravity(Gravity.LEFT | Gravity.CENTER_HORIZONTAL);

     this.addContentView(btnLO, new LayoutParams());

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:02:49.240

```
LinearLayout li=new LinearLayout(this);
     li.setOrientation(LinearLayout.HORIZONTAL);
     final Button b1 = new Button(MainActivity1.this);
     final ImageView imageView = new ImageView(MainActivity1.this);

     b1.setText(reqdata[i].getSpinnerText());
     b1.setTag(reqdata[i].getValue());
     li.addView(b1, paramsLO);        
     li.addView(imageView, paramsLO);

     btnLO.addView(li); 
```

ScrollView sc=new ScrollView(this); sc.addView(btnLO);

请记住，这必须在 for 循环之外完成。

这就是您需要在 for 循环中向布局中添加按钮和图像的方式

# javascript - Node JS telnet 服务器奇怪的输入和奇怪的输出

> ID：15023794
> 
> 赞同：1
> 
> 时间：2013-02-22T12:01:40.997
> 
> 标签：javascript, node.js, telnet

嘿伙计们，我正在运行这台[服务器](https://codereview.stackexchange.com/questions/22706/simple-telnet-chat-server-nodejs-correct-way-to-write-programs-in-node-js-asyn)它在我的 Mac 上运行良好。但是，当我通过 Windows 计算机上的 telnet 连接到在我的 mac 上运行的服务器时，所有文本都是倾斜的，并且输入是单个字符。帮助将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:56:49.817

看起来您的 telnet 客户端默认情况下不以线路模式运行。当您尝试输入密码时，它会读取第一个字符，并且您的服务器会将其与预期的密码进行比较：

```
$ telnet localhost 8000
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
Password:RPassword rejected:RConnection closed by foreign host. 
```

尝试使用 netcat [http://en.wikipedia.org/wiki/Netcat](http://en.wikipedia.org/wiki/Netcat)。它是行缓冲的：

```
$ nc localhost 8000
Password:Rushabh
[me]: has joined the chattest
[me]:test
second test
[me]:second test 
```

如果你真的想使用 telnet，你可以改变你的服务器来处理字符输入，或者尝试转义 (^]) 并设置`mode line`（由于某种原因，我没有成功。我使用的是 telnet 客户端由 Cygwin 项目分发。）

# c# - .net 控制输出跨度标签，删除？

> ID：15023795
> 
> 赞同：0
> 
> 时间：2013-02-22T12:01:43.033
> 
> 标签：c#, asp.net, html, .net

我在.net 中构建的网站上工作-我不知道这是如何工作的，但我有以下...

```
<asp:DataPager ID="DP" runat="server" PagedControlID="LV" PageSize="5" QueryStringField="jobs">
    <Fields>
        <asp:NumericPagerField />
    </Fields>
</asp:DataPager> 
```

以上输出我的html如下

```
<span id="ctl00_ContentPlaceHolder1_ctl00_ctl00_ctl00_DP">
    <span>1</span>
    <a href="link">2</a>
    <a href="link">3</a>
    <a href="link">4</a>
</span> 
```

有没有办法将其输出为或不可能？...

```
<div>
    <span>
    <a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:07:56.607

据我所知，`DataPager`不支持*开箱即用*。`DataPager`但是您可以通过覆盖`TagKey`属性来扩展类：

```
public class YourDataPager : DataPager
{
   protected override HtmlTextWriterTag TagKey 
   {
      get { return HtmlTextWriterTag.Div; }
   }
} 
```

现在`YourDataPager`应该输出为 a`<div>`而不是`<span>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T12:12:36.833

在您的服务器控件中，您可以覆盖该`RenderBeginTag`方法：

```
public override void RenderBeginTag(System.Web.UI.HtmlTextWriter writer)
{
    writer.Write(String.Format("<div id=\"{0}\" class=\"{1}\">",
                               this.ClientID,this.CssClass));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T12:04:30.053

添加`CssClass`到`<asp:DataPager>`：

```
<asp:DataPager CssClass="myCSSClass" ID="DP" runat="server" PagedControlID="LV" PageSize="5" QueryStringField="jobs"> 
```

它应该输出：

```
<span id="ctl00_ContentPlaceHolder1_ctl00_ctl00_ctl00_DP" class="myCSSClass"> 
```

...您可以从那里相应地设置样式。

# html - 即使 xslt1.0 中不存在该值，也会显示该值

> ID：15023804
> 
> 赞同：0
> 
> 时间：2013-02-22T12:02:00.910
> 
> 标签：html, combobox, xslt-1.0

这是我的 xslt 代码：

```
<xsl:choose>
  <xsl:when test="string-length(
                    //Record/CIMtrek_CI_OPEX_200910_FrDiv
                    /text())
                  != 0">
    <select size="1" 
            style="width:100%;" 
            name="CIMtrek_CI_OPEX_200910_FrDiv" 
            id="CIMtrek_CI_OPEX_200910_FrDiv">
      <option>
        <xsl:attribute name="selected">true</xsl:attribute>
        <xsl:value-of select="//Record
                              /CIMtrek_CI_OPEX_200910_FrDiv
                              /text()" />
      </option>
     <option value="S M-SPED">S M-SPED</option>
     <option value="S M-PPPVLD">S M-PPPVLD</option>
   </select>
  </xsl:when>
  <xsl:otherwise>
    <select size="1" 
            style="width:100%;" 
            name="CIMtrek_CI_OPEX_200910_FrDiv" 
            id="CIMtrek_CI_OPEX_200910_FrDiv">
      <option value="0">Select Keywords</option>
      <option value="S M-SPED">S M-SPED</option>
      <option value="S M-PPPVLD">S M-PPPVLD</option>
    </select>
  </xsl:otherwise>
</xsl:choose> 
```

但是当没有价值时，当条件总是存在时。

我认为这是线路成本问题，但不确定，

```
<xsl:when 
  test="string-length(
          //Record/CIMtrek_CI_OPEX_200910_FrDiv/text()
        ) != 0"> 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:25:24.677

您没有显示错误产生输出的输入示例，但我猜它涉及可能如下所示的 XML：

```
<CIMtrek_CI_OPEX_200910_FrDiv>
  <!--* no value here! *-->
</CIMtrek_CI_OPEX_200910_FrDiv> 
```

如果您不希望元素中的空格算作一个值，那么您需要将您的测试从`string-length(...) != 0`to更改为`string-length(normalize-space(...)) != 0`或等效项。由于 XSLT 将事物强制转换为布尔值的方式，这可以更简洁地编写为`normalize-space(...)`——一些熟练的 XSLT 程序员更喜欢这种形式，而另一些人则发现隐式类型强制令人分心，更喜欢更长更显式的形式。

如果您的问题与我猜想的一样，那么以下任何一项都应该有所帮助：

```
<xsl:when 
  test="string-length(
          normalize-space(
            //Record/CIMtrek_CI_OPEX_200910_FrDiv/text()
          )
        ) != 0">

<xsl:when 
  test="normalize-space(
            //Record/CIMtrek_CI_OPEX_200910_FrDiv/text()
        ) != ''">

<xsl:when 
  test="normalize-space(
            //Record/CIMtrek_CI_OPEX_200910_FrDiv/text()
        )"> 
```

如果这不是问题，那么您需要更明确地说明您的问题是什么。

# php - PHP DOMDocument 解析 HTML

> ID：15023805
> 
> 赞同：2
> 
> 时间：2013-02-22T12:02:02.423
> 
> 标签：php, xpath, html-parsing, domdocument

我有以下 HTML 标记

```
<div contenteditable="true" class="text"></div>
<div contenteditable="true" class="text"></div>
<div style="display: block;" class="ui-draggable">
    <img class='avatar' src=""/>
    <p style="">
    <img class='pic' src=""/><br>
    <span class='fulltext' style="display:none"></span>
    </p>-<span class='create'></span>
    <a class='permalink' href=""></a>
    </div>
 <div contenteditable="true" class="text"></div>
 <div style="display: block;" class="ui-draggable">
    <img class='avatar' src=""/>
    <p style="">
    <img class='pic' src=""/><br>
    <span class='fulltext' style="display:none"></span>
    </p><span class='create'></span><a class='permalink' href=""></a>
    </div> 
```

父 div 可以更多。为了解析信息并将其插入数据库中，我使用以下代码 -

```
$dom = new DOMDocument();
$dom->loadHTML($xml);
$xpath = new DOMXPath($dom);
$div = $xpath->query('//div');
$i=0;
$q=1;
foreach($div as $book) {
    $attr = $book->getAttribute('class');
    //if div contenteditable
    if($attr == 'text') {
        echo '</br>'.$book->nodeValue."</br>";  
    }

    else {
        $new = new DOMDocument();
        $newxpath = new DOMXPath($new);
        $avatar = $xpath->query("(//img[@class='avatar']/@src)[$q]");

        $picture = $xpath->query("(//p/img[@class='pic']/@src)[$q]");
        $fulltext = $xpath->query("(//p/span[@class='fulltext'])[$q]");
        $permalink = $xpath->query("(//a[@class='permalink'])[$q]");
        echo $permalink->item(0)->nodeValue; //date
        echo $permalink->item(0)->getAttribute('href');
        echo $fulltext->item(0)->nodeValue;
        echo $avatar->item(0)->value;
        echo $picture->item(0)->value;
        $q++;
    }
    $i++;
} 
```

但我认为解析 HTML 有更好的方法。有没有？先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T12:09:23.897

请注意，它[`DOMXPath::query`](http://php.net/manual/en/class.domxpath.php)支持名为`contextparam`. 此外，循环内不需要第二个 DOMDocument 和 DOMXPath。采用：

```
$avatar = $xpath->query("img[@class='avatar']/@src", $book); 
```

获取`<img src="">`相对于 div 节点的属性节点。如果你听从我的建议，你的例子应该没​​问题。

* * *

这是您的代码的一个版本，遵循上述内容：

```
$dom = new DOMDocument();
$dom->loadHTML($xml);

$xpath = new DOMXPath($dom);
$divs = $xpath->query('//div');

foreach($divs as $book) {
    $attr = $book->getAttribute('class');
    if($attr == 'text') {
        echo '</br>'.$book->nodeValue."</br>";  
    } else {
        $avatar = $xpath->query("img[@class='avatar']/@src", $book);
        $picture = $xpath->query("p/img[@class='pic']/@src", $book);
        $fulltext = $xpath->query("p/span[@class='fulltext']", $book);
        $permalink = $xpath->query("a[@class='permalink']", $book);
        echo $permalink->item(0)->nodeValue; //date
        echo $permalink->item(0)->getAttribute('href');
        echo $fulltext->item(0)->nodeValue;
        echo $avatar->item(0)->value;
        echo $picture->item(0)->value;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:06:59.610

事实上，你这样做是正确的：必须用 DOM 对象解析 html。然后可以进行一些优化：

```
$div = $xpath->query('//div'); 
```

很贪心， getElementsByTagName 应该更合适：

```
$div = $dom->getElementsByTagName('div'); 
```

# java - Java 重写的 equals 方法

> ID：15023806
> 
> 赞同：-7
> 
> 时间：2013-02-22T12:02:03.727
> 
> 标签：java, collections, equals

是否有任何实现`List` `Map`或`Set`没有被覆盖的`equals`方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:13:37.330

不。

和API`List`都指定了只能通过覆盖方法来实现`Map`的行为。这就是他们所做的。`Set``equals``java.lang.Object.equals(Object)`

如果你想要一个违反 API 契约的集合类，`equals`你需要自己实现它；例如，通过`extend`ing 现有的集合类和（重新）覆盖`equals(Object)`and`hashcode()`方法，使它们的行为与原始`Object`版本一样。

# php - php将单词变成全角

> ID：15023807
> 
> 赞同：0
> 
> 时间：2013-02-22T12:02:05.440
> 
> 标签：php

有什么方法可以将单词更改为全角，例如：

123 ->１２３</p>

因为我必须将日语单词变成全角，所以我不能使用枚举之类的方式。（如：str_replace('1','１',$string); str_replace('2','２',$string); ... 等等。）

我该如何解决这个问题？

而且，是否可以强制用户输入全角单词？

我的网站是用 PHP 编写的，我知道如何与 javascript 结合使用。

我已经澄清的打字是这样的：

```
onKeyUp="value=value.replace(/[\x00-\xff]/g,'')" 
```

（上面的正则表达式是让用户输入像'カメラ'这样的日文，像'你好'这样的中文，以及全角单词，这就是我想要的。）

但我不知道如何强制用户输入全角单词；like 可以强制用户输入英文或数字单词。（或者不可能做到）

任何回复感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:04:55.307

有几种方法可以实现这一点，但我认为最简单的是使用`kbd`HTML 标签：

`<kbd>Some text in here</kbd>`

你也可以尝试一个[实验性](https://developer.mozilla.org/en-US/docs/CSS/text-transform)的CSS 解决方案：

```
p {
  text-transform: full-width
} 
```

最后，尝试 CSS`letter-spacing`以使用正确的字体实现类似的效果。

# css - CSS - 将填充添加到第二行内联文本

> ID：15023812
> 
> 赞同：2
> 
> 时间：2013-02-22T12:02:21.783
> 
> 标签：css

我什至不确定这是否可能，但我认为值得一问。

我试图解释是没有意义的，我对这样的事情很垃圾，所以看看这个演示 - [http://www.deanelliott.me/braintrain/](http://www.deanelliott.me/braintrain/)

看看这 6 张图片上的标题如何具有橙色背景色？现在看看第一行的右侧和第二行的左侧如何缺少填充？

是否可以在此处添加填充，以使背景不仅仅停留在单词的末尾/开头？

或者我应该告诉他们这是不可行的，他们将不得不忍受它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T12:32:51.690

这里的问题是您不能在内容换行的单词结尾/开头填充，因此除非您将链接的显示类型更改为块样式类型，例如“块”或“内联-”，否则这是不可能的块”，但自然会有些影响外观。

您可以通过添加以下内容稍微进一步：

```
white-space: pre-wrap; 
```

遵守`.blog-grid .grid-block h2 a, #sidebar h2 a`规则；但是这不是一个完整的解决方案（但这是我能想到的全部）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T12:10:38.720

```
.blog-grid .grid-block h2 a, #sidebar h2 a {
    /* other css properties */
    display: inline-block; /* or display: block */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-13T09:08:23.380

在 CSS 中添加 text-indent 也可以

```
text-indent: 10px; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T12:06:06.800

向“标题后倾斜”类添加一些代码-它可以回答您的标题。写也许`padding-left:20px;`或者如果它不起作用： `margin-left:20px;`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-22T12:05:57.997

你可以编辑代码吗？为每一行添加跨度应该可以工作 span class="line1" 和 span class="line2"

```
<a href="#">
  <span class="line1">a safe alternative to</span>
  <span class="line2">ritalin</span>
</a> 
```

# javascript - 画布 for() 循环、lineTo() 和 closePath()

> ID：15023814
> 
> 赞同：1
> 
> 时间：2013-02-22T12:02:34.457
> 
> 标签：javascript, canvas, html5-canvas

我需要创建一个 for 循环来制作浮动的倾斜图像画布绘图。第一张图没问题，但其他图是从旧图结束的地方开始的。我正在使用 clearPath() 清除旧坐标，但它不起作用。

这是我的代码：

```
function draw(){
    var ctx = $('#canvas')[0].getContext('2d');
    var $width = $('#canvas').parent().width();
    var $canvas_width = 380;
    var $canvas_margin = 15;
    var $canvas_height = 810;

    var $total_draw = $width / Math.ceil($canvas_width);
    var $start = 0;

    for(var $i = 1; $i <= 2; $i++){
        ctx.beginPath();
        ctx.moveTo($start,0);
        ctx.lineTo($canvas_width,0);
        ctx.lineTo($start,$canvas_height);
        ctx.lineTo(Math.abs($canvas_width) * -1,$canvas_height);
        ctx.lineTo($start,0);
        ctx.stroke();
        ctx.closePath();

        $start += ($canvas_width + $canvas_margin);
    }       
} 
```

**编辑**

好吧我的错。我犯了一个计算错误。经过几个控制小时后，我已经更正了计算。

此示例正在运行。

```
function draw(){
    var ctx = $('#canvas')[0].getContext('2d');
    var $width = $('#canvas').parent().width();
    var $canvas_width = 380;
    var $canvas_margin = 20;
    var $canvas_height = 810;

    var $total_draw = $width / Math.ceil($canvas_width);
    var $start = 0;

    for(var i = 1; i <= $total_draw + 1; i++){
        ctx.beginPath();
        ctx.moveTo($start,0);
        ctx.lineTo($start + $canvas_width,0);
        ctx.lineTo($start, $canvas_height);
        ctx.lineTo(-380 + $start, $canvas_height);
        ctx.lineTo($start,0);
        ctx.stroke();
        ctx.closePath();

        $start = $start + ($canvas_width + $canvas_margin);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:16:48.717

`closePath`只会将最后一个点与第一个点对齐，所以你不需要这样做`ctx.lineTo($start,0);`，只需放在`ctx.closePath();`前面`ctx.stroke();`。

此外，我认为画布一切正常，（`beginPath`防止衬里最后指向新的，最重要的是，您使用 moveTo 移动当前点而没有衬里）但您的代码不是。我不知道您要做什么（也许您应该解释一下？）但是您从顶部的一个点开始，然后在右上角的线（因此每条第一行都会覆盖）等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:33:33.727

您可以在末尾循环`context.save()`内的开头使用。这样，在这 2 个调用之间应用的位置将仅影响当前渲染。`for``conxtext.restore()`

# jquery - 如何为轮播中的图像创建预加载器

> ID：15023827
> 
> 赞同：1
> 
> 时间：2013-02-22T12:03:14.683
> 
> 标签：jquery, css, preloader, image-preloader

我正在寻找一种为我的网站轮播预加载图像的方法。它们在页面加载时很难加载。有没有一种现代优雅的方式来做到这一点？

我试过没有成功：

```
 var images = [];
  $('.gallery_panel').each(function(){images.push($(this).attr('src'));});
  $('.gallery_thumbs').each(function(){images.push($(this).attr('src'));}); 
```

和一个 CSS 预加载：

```
<style>
   #preloadedImages {
     width: 0px;
     height: 0px;
     display: inline;
     background-image: url(images/....png);
     background-image: url(images/....png);
     background-image: url(images/....png);
   }
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:28:08.030

Your first attempt was a good start. Basically do something like this:

```
var images = [];

$('.gallery_panel').each(function(){
    var src = $(this).attr('src');
    var image = new Image();

    image.src = src;
    images.push(image);
});
$('.gallery_thumbs').each(function(){
    var src = $(this).attr('src');
    var image = new Image();

    image.src = src;
    images.push(image);
}); 
```

# objective-c - KVC 使用哪种方法？

> ID：15023832
> 
> 赞同：3
> 
> 时间：2013-02-22T12:03:43.927
> 
> 标签：objective-c

哪种方式更适合用于键值编码？让我们假设**MyController**类有变量**myVariable**。有人能写出好与坏的意见，以及为什么。

# 1.

```
// Method in the MyController class.
- (NSString*)myVariableKVC {
    return NSStringFromSelector(@selector(myVariable));
}

[myController addObserver:self
               forKeyPath:[myController myVariableKVC]
                  options:NSKeyValueObservingOptionNew
                  context:nil]; 
```

# 2.

```
[myController addObserver:self
               forKeyPath:@"myVariable"
                  options:NSKeyValueObservingOptionNew
                  context:nil]; 
```

从我的角度来看，第一部分更好。我们没有硬编码的字符串，当我们使用**Refactor -> Rename...**进行重命名时，它将被重命名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:08:18.813

如果您启用了一个名为`-Wundeclared-selector`(Xcode name: "Undeclared Selector", Xcode build setting: `GCC_WARN_UNDECLARED_SELECTOR`) 的警告，如果您更改选择器的名称（更改为未在任何地方声明的名称），第一种方法会给您来自编译器的警告作为选择器），正如您所指出的，这会略微减少硬编码/“魔术”字符串。不过，我不会为它使用单独的方法，我只是这样做：

```
[myController addObserver:self
               forKeyPath:NSStringFromSelector(@selector(myVariable))
                  options:NSKeyValueObservingOptionNew
                  context:nil]; 
```

在我查看的 Xcode 项目模板中，默认情况下此警告**未**打开，因此如果您想要此检查，您需要为您的项目手动打开该警告。

如果没有该警告，则没有区别，除了第一个方法会引发另一个函数调用（如果 ObjC 方法返回问题中出现的选择器，则发送 ObjC 消息）。我觉得这个警告过去是默认开启的，但我猜情况会发生变化。

# ajax - 使用 AJAX 和 JSF/Primefaces 创建下拉框

> ID：15023840
> 
> 赞同：1
> 
> 时间：2013-02-22T12:04:16.307
> 
> 标签：ajax, jsf-2, primefaces

我正在尝试使用 Ajax 和 JSF 2.0/primeface 创建一个简单的下拉框。基于 First Dropdown 选择，第二个下拉框使用 AJAX 调用填充。

当我选择第一个下拉列表时，它会根据 Ajax 调用正确填充第二个下拉框。但是当我在第二个下拉列表中进行选择并单击按钮{基本上提交表单以进行某些操作}时，它会给出错误消息“formViewBusinessCode：selectedBusinessCode：验证错误：值无效”

当我签入控制台时，“selectedBusinessCode”{Id of second dropdown} 的值为空。我很困惑，因为它正确填充但只有在选择后它才会给出错误值无效（基本上为空），为什么选择的值没有到达 bean？有人可以指出我在这里缺少的东西吗，TIA

xhtml代码如下

```
<h:outputText styleClass="outputText" value="#{constant.businessCodeGroup}"></h:outputText>
<h:selectOneMenu id="selectedBusinessCodeGroup" value="#{viewBusinessCodeBean.selectedBusinessCodeGroup}" >
    <f:selectItem itemValue="SELCT" itemLabel="Select Business Code Group" />
    <f:selectItems value="#{viewBusinessCodeBean.businessCodeGroupList}" />
    <p:ajax listener="#{viewBusinessCodeBean.getOnlyBusinessCodeListByAjaxCall}" event="change" update="selectedBusinessCode" process="@this"/>
</h:selectOneMenu> 

<h:outputText styleClass="outputText" value="#{constant.businessCode}"></h:outputText>
    <h:selectOneMenu id="selectedBusinessCode" value="#{viewBusinessCodeBean.selectedBusinessCode}">
    <f:selectItem itemValue="SELCT" itemLabel="Select Business Code" />
    <f:selectItems value="#{viewBusinessCodeBean.businessCodeList}" itemLable="#{viewBusinessCodeBean.businessCodeList.getlable}"
    itemValue="#{viewBusinessCodeBean.businessCodeList.getValue}" />
</h:selectOneMenu>

<h:commandButton value="View" action="#{viewBusinessCodeBean.getOnlyBusinessCodeDescription}"></h:commandButton> 
```

bean编码如下。它是一个@ManagedBean

填充第一个下拉框

```
public ViewBusinessCodeBean() {
    logger.entering(CLASS_NAME);
    this.businessCodeGroupList = new ArrayList<SelectItem>();
    List<String>tempBusinessCodeList = new BusinessCodeTableServices().getBusinessCodeGroupList();
    Iterator<String>iterator = tempBusinessCodeList.iterator();
    while(iterator.hasNext()){
        String businessCodeGroup = iterator.next();
        logger.debug(businessCodeGroup);
        SelectItem item = new SelectItem(businessCodeGroup);
        businessCodeGroupList.add(item);
    }
    logger.exiting(CLASS_NAME);
} 
```

填充第二个下拉列表的 Ajax 调用方法

```
public void getOnlyBusinessCodeListByAjaxCall() {
    this.businessCodeList = new ArrayList<SelectItem>();
    List<String>tempBusinessCodeList = new BusinessCodeTableServices().getOnlyBusinessCodeList(getSelectedBusinessCodeGroup());
    Iterator<String>iterator = tempBusinessCodeList.iterator();
    while(iterator.hasNext()){
        String businessCode = iterator.next();
        SelectItem item = new SelectItem(businessCode,businessCode,businessCode);
        businessCodeList.add(item);
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:38:45.527

您的 bean 显然在请求范围内。请求范围的 bean 会在每个请求上重建，所有属性都设置为默认值。您的验证错误是因为在处理表单提交的请求期间`businessCodeList`属性已变为/empty。`null`

将 bean 放在视图范围内应该可以解决这个问题。

### 也可以看看：

*   [验证错误：值无效](https://stackoverflow.com/questions/9069379/validation-error-value-is-not-valid/9069660#9069660)
*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

# visual-studio - 无法选择更具体的候选人 - 重复资源

> ID：15023853
> 
> 赞同：1
> 
> 时间：2013-02-22T12:04:53.577
> 
> 标签：visual-studio, resources

我的项目中有一个名为 Lotto_0792 的资源，如下所示，该资源曾在我的项目中：

![资源](../Images/fb2f3e4b010a81b254e923432a16e360.png)

但是，它在智能感知中出现了两次：

![智能感知](../Images/6ac73c34ba78f618f9905ac046b2dc72.png)

当我选择其中任何一个时，我会收到此错误：

> 错误 199“Lotto_0792”在模块“MyProject.My.Resources.Resources”和“MyProject.My.Resources.Resources”中的声明不明确。

当我将鼠标悬停时，我得到以下屏幕提示：

![屏幕提示](../Images/3fcf78643369483fdfbb12adcdaa8729.png)

我检查了 Resources.resx 文件，每个资源只出现一次。

这阻止了我的解决方案的构建。这里会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T11:29:58.987

我偶然发现了同样的错误。请检查资源文件 Lotto_0792 是否创建了第二个设计器文件。

例如：

```
Lotto_0792.designer.vb 
```

和

```
Lotto_07921.designer.vb 
```

# android - 在 Android 上的 Achartengine 中禁用条形图值文本

> ID：15023855
> 
> 赞同：1
> 
> 时间：2013-02-22T12:04:56.473
> 
> 标签：android, achartengine

我想删除 android 上所有条上显示的每个值文本的条形图，我正在使用 achartengine。如果你不明白看我下图：

![在此处输入图像描述](../Images/29569ff323e5347f3e1735dc3c9f3440.png)

非常感谢帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T15:34:18.363

您需要隐藏图表值：

```
renderer.setDisplayChartValues(false); 
```

或者，如果你有一个参考`XYMultipleSeriesRenderer`：

```
int length = renderer.getSeriesRendererCount();
for (int i = 0; i < length; i++) {
  renderer.getSeriesRendererAt(i).setDisplayChartValues(false);
} 
```

# ruby-on-rails - 在 Rails 性能测试中指定主机

> ID：15023858
> 
> 赞同：1
> 
> 时间：2013-02-22T12:05:06.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3, performance, performance-testing

我一直在尝试使用 Rails 分析工具。我正在使用一个非常简单的示例，该示例取自[http://guides.rubyonrails.org/performance_testing.html](http://guides.rubyonrails.org/performance_testing.html)上的文档，如下所示

```
require 'test_helper'
require 'rails/performance_test_help'

# Profiling results for each test method are written to tmp/performance.
class BrowsingTest < ActionDispatch::PerformanceTest
  def test_homepage
    get '/'
  end
end 
```

然后我使用

```
rake test:profile 
```

但它因以下错误而崩溃

```
Error during failsafe response: undefined method `controller_name' for nil:NilClass 
```

我怀疑问题在于该应用程序服务于多个域，因此仅使用 get '/' 不足以将 url 解析回控制器/操作 - 它还需要一个主机。然而，指定主机的常用方法（@host、@request.host、default_url_options[:host]）要么不起作用，要么导致另一个错误（例如，@request 为 nil）。

我也试过输入完整的网址。我在测试环境中将不同的主机定义为常量，所以这看起来像

```
get "http://#{HOST_1}/" 
```

在这种情况下，rake 任务成功完成，但命令行上没有显示分析信息，也没有生成文件。

我并没有真正使用 Rails 中的分析工具，所以我希望我遗漏了一些明显的东西。任何指针将不胜感激。

干杯

# c# - Lock 关键字调用 Monitor.Enter(Object) 还是 Enter(Object, Boolean)？

> ID：15023862
> 
> 赞同：4
> 
> 时间：2013-02-22T12:05:37.753
> 
> 标签：c#, .net, locking, monitor

在.NET Framework 4.5 的[Monitor](http://msdn.microsoft.com/en-us/library/system.threading.monitor.aspx)文档中，我找到了一句话，它说 lock 关键字使用Monitor 的[Enter(Object, Boolean)](http://msdn.microsoft.com/en-us/library/dd289498.aspx)方法：

> Enter 和 Exit 方法提供的功能与 C# lock 语句（Visual Basic 中的 SyncLock）提供的功能相同，只是 lock 和 SyncLock 将 Enter(Object, Boolean) 方法重载和 Exit 方法包装在 try...finally 中块（尝试...最后在 Visual Basic 中）以确保释放监视器。

另一方面，在[Monitors](http://msdn.microsoft.com/en-us/library/hf5de04k.aspx)的概述中有：

> Visual Basic SyncLock 和 C# lock 语句使用 MonitorEnter 来获取锁，并使用 MonitorExit 来释放它。

上面的 MonitorEnter 指的是与之前不同版本的 Enter 方法，即：[Enter(Object)](http://msdn.microsoft.com/en-us/library/de0542zz.aspx)

在Visual Studio 2012 的[线程同步（C# 和 Visual Basic）](http://msdn.microsoft.com/en-us/library/ms173179.aspx#Y370)中，有一个示例如何锁定监视器：

```
System.Object obj = (System.Object)x;
System.Threading.Monitor.Enter(obj);
try
{
    DoSomething();
}
finally
{
    System.Threading.Monitor.Exit(obj);
} 
```

还有[Enter(Object)](http://msdn.microsoft.com/en-us/library/de0542zz.aspx)版本。

什么是真的？lock 语句是否调用[Enter(Object, Boolean)](http://msdn.microsoft.com/en-us/library/dd289498.aspx)或[Enter(Object)](http://msdn.microsoft.com/en-us/library/de0542zz.aspx)？到底是怎么做的有什么区别吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T12:15:03.987

来自[Eric Lippert 的博客](http://blogs.msdn.com/b/ericlippert/archive/2009/03/06/locks-and-exceptions-do-not-mix.aspx)：

> 回想一下`lock(obj){body}`[在 C# 3.0 及更早版本中] 的语法糖
> 
> ```
> var temp = obj;
> Monitor.Enter(temp);
> try { body }
> finally { Monitor.Exit(temp); } 
> ```
> 
> 这里的问题是，如果编译器在监视器进入和 try 保护区域之间生成一个无操作指令，那么运行时可能会在监视器进入之后但在 try 之前引发线程中止异常。在那种情况下， finally 永远不会运行，因此锁泄漏，可能最终导致程序死锁。如果这在未优化和优化的构建中是不可能的，那就太好了。
> 
> 在 C# 4.0 中，我们更改了 lock 以便它现在生成代码，就好像它是
> 
> ```
> bool lockWasTaken = false;
> var temp = obj;
> try { Monitor.Enter(temp, ref lockWasTaken); { body } }
> finally { if (lockWasTaken) Monitor.Exit(temp); } 
> ```
> 
> 现在问题变成了别人的问题；Monitor.Enter 的实现负责以一种不受线程中止异常影响的方式自动设置标志。
> 
> 所以现在一切都很好，对吧？
> 
> 可悲的是没有。[[...]](http://blogs.msdn.com/b/ericlippert/archive/2009/03/06/locks-and-exceptions-do-not-mix.aspx)

另一方面，[C# 4.0 语言规范](http://go.microsoft.com/fwlink/?LinkId=199552)说：

> 形式的锁定语句
> 
> ```
> lock (x) ... 
> ```
> 
> 其中 x 是引用类型的表达式，精确地等价于
> 
> ```
> System.Threading.Monitor.Enter(x);
> try {
>    ...
> }
> finally {
>    System.Threading.Monitor.Exit(x);
> } 
> ```
> 
> 除了 x 只被评估一次。

# java - 重新启动活动后的 NPE

> ID：15023871
> 
> 赞同：0
> 
> 时间：2013-02-22T12:06:06.803
> 
> 标签：java, android, android-activity

重新启动活动后：

```
Intent intent = getIntent();
finish();
startActivity(intent); 
```

应用程序在没有任何参考我的源代码的情况下崩溃：

```
FATAL EXCEPTION: main
     java.lang.NullPointerException
     at android.view.ViewGroup.dispatchCollectViewAttributes(ViewGroup.java:980)
     at android.view.ViewGroup.dispatchCollectViewAttributes(ViewGroup.java:980)
     at android.view.ViewGroup.dispatchCollectViewAttributes(ViewGroup.java:980)
     at android.view.ViewGroup.dispatchCollectViewAttributes(ViewGroup.java:980)
     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1262)
     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2628)
     at android.os.Handler.dispatchMessage(Handler.java:99)
     at android.os.Looper.loop(Looper.java:137)
     at android.app.ActivityThread.main(ActivityThread.java:4511)
     at java.lang.reflect.Method.invokeNative(Native Method)
     at java.lang.reflect.Method.invoke(Method.java:511)
     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
     at dalvik.system.NativeStart.main(Native Method) 
```

它只在设备上发生过几次。有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:02:09.373

为什么不用`Activity#recreate`来做作业？

# android - 关闭在 Base Activity 类中实例化的 DialogFragment

> ID：15023872
> 
> 赞同：0
> 
> 时间：2013-02-22T12:06:09.940
> 
> 标签：android, android-dialogfragment

如果启用了 Gps，我的应用程序会单独检查 MainActivity。如果没有出现 DialogFragment 引导用户进行 Android 位置设置。

在访问所有活动时，如果没有建立网络/互联网连接或什至连接到网络，则会出现一个对话框。

由于在所有活动中都需要此检查，因此我为所有活动实现了 BaseActivity 并在 onStart() 中实现了检查。

当用户从管理位置设置返回时，会出现第二个 EnableInternetDialogFragment。第一个（未解决的）对话框仍然可见

我目前的解决方案是关闭 onPause() 方法中的对话框，但这根本不起作用。

有没有办法避免/管理这种行为？

```
public abstract class BaseActivity extends FragmentActivity {

    protected ConnectivityTester connectivityTester;
    protected ConnectivityHelper connectivityHelper;

    protected EnableInternetDialogFragment enableInternetDialogFragment;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        connectivityTester = new ConnectivityTester();
        connectivityHelper = new ConnectivityHelper();
    }

    @Override
    protected void onStart() {
        super.onStart();
        final boolean internetEnabled = connectivityTester.isInternetEnabled(getApplicationContext());
        if (!internetEnabled) {
            enableInternetDialogFragment = new EnableInternetDialogFragment();
            enableInternetDialogFragment.show(getSupportFragmentManager(), "enableInternetDialog");
        }
    }

    @Override
    protected void onPause() {
        super.onPause();
        if (enableInternetDialogFragment.getDialog() != null) {
            enableInternetDialogFragment.dismissAllowingStateLoss();
        }
    }

    public final class EnableInternetDialogFragment extends DialogFragment {

        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
            return new AlertDialog.Builder(getActivity())
                .setTitle("Activite Network/Internet")
                .setMessage("test")
                .setPositiveButton("Activate Internet", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        connectivityHelper.enableMobileInternetSettings(getApplicationContext());
                    }
                })
                .setNegativeButton("Activate WiFi", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        connectivityHelper.enableWiFiSettings(getApplicationContext());
                    }
                }).create();
        }
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:13:05.103

您可以在切换到 Wifi 设置（在 onClick 上）之前关闭对话框：

```
 @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        return new AlertDialog.Builder(getActivity())
            .setTitle("Activite Network/Internet")
            .setMessage("test")
            .setPositiveButton("Activate Internet", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.dismiss();
                    connectivityHelper.enableMobileInternetSettings(getApplicationContext());
                }
            })
            .setNegativeButton("Activate WiFi", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.dismiss();
                    connectivityHelper.enableWiFiSettings(getApplicationContext());
                }
            }).create();
    } 
```

对话框将被关闭，然后设置将弹出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:19:14.837

我解决了。我已经实现了@Override public void onPause() { super.onPause(); this.dismiss(); } 在 EnableInternetDialogFragment 类中。工作正常

# gstreamer - 未定义对 gst_x_overlay_get_type 的引用 - 编译 Gstreamer 基础教程 5 时出错

> ID：15023876
> 
> 赞同：0
> 
> 时间：2013-02-22T12:06:19.813
> 
> 标签：gstreamer

当我尝试编译 gstreamer 基础教程 5 源代码时，出现以下错误：
/tmp/cczEt1RC.o: In function `realize_cb': basic-tutorial-5.c:(.text+0x50): undefined reference to`gst_x_overlay_get_type' basic-tutorial-5.c:(.text+0x70): undefined reference to `gst_x_overlay_set_window_handle' collect2 : ld 返回 1 个退出状态

我用来编译的命令是：
gcc basic-tutorial-5.c `pkg-config --cflags --libs gtk+-2.0` `pkg-config --cflags --libs gstreamer-0.10`-o 5basic

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:49:38.047

gstreamer sdk 网站有 gcc 命令，但被隐藏
gcc basic-tutorial-5.c -o basic-tutorial-5`pkg-config --cflags --libs gstreamer-interfaces-0.10 gtk+-2.0 gstreamer-0.10`

# css - 响应式网页设计

> ID：15023878
> 
> 赞同：2
> 
> 时间：2013-02-22T12:06:22.687
> 
> 标签：css, twitter-bootstrap, responsive-design, html5boilerplate

很长一段时间后，我得到了一个新项目，我将在其中实施 RWD。在获得项目之前，我一直在谈论 RWD，但是在编写代码时，我看到了很多混乱。我真的需要你的建议和想法才能继续前进。

以下是我的问题：

1.  如何支持对旧版本浏览器（ie6 ie7 ie8 等）的媒体查询支持或替代方法是什么。
2.  我是否需要在固定的主布局中使用灵活的布局（如基于百分比的宽度）
3.  如何使用支持后备版本的样板或引导程序等
4.  使用现代化器怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:51:48.150

我建议如果您遇到困难，请查看 conditionizr [http://conditionizr.com/](http://conditionizr.com/)

有关媒体查询的更多信息，请访问此处[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

# php - 使用 oauth api 获取 magento 的类别列表

> ID：15023879
> 
> 赞同：1
> 
> 时间：2013-02-22T12:06:28.450
> 
> 标签：php, api, magento, oauth

我想使用`oAuth`magento api获取magento的类别列表。我想确保这不是针对特定产品而是针对所有类别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T17:24:33.570

我知道您正在使用 OAuth，但我只是在做一些可能有帮助的事情 - 这将通过 SOAP API 为您提供所有类别：

```
$client = new SoapClient('http://admin.aboyd.vp-dev.com/magento/api/soap?wsdl', array('trace' => 1, "connection_timeout" => 120));

// Can be added in Magento-Admin -> Web Services with role set to admin
// log in to API
try {
    $sessionId = $client->login('username', 'api-password');
} catch (Exception $e) {
    print_r($e);
    die();
}

// get all categories
$allCats = $client->call($sessionId, 'catalog_category.tree'); 
```

关键是 catalog_category.tree 调用，请参阅[http://www.magentocommerce.com/api/soap/catalog/catalogCategory/catalog_category.tree.html](http://www.magentocommerce.com/api/soap/catalog/catalogCategory/catalog_category.tree.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:59:14.410

如果您使用的是 Firefox，您可以下载[它](https://addons.mozilla.org/en-us/firefox/addon/restclient/)并在浏览器上试用。

我从不使用 REST API 来获取类别列表。但是[这个](http://www.aschroder.com/2012/04/introduction-to-the-magento-rest-apis-with-oauth-in-version-1-7/)链接可能对你有帮助。对于这种情况，他们安装`oAuth`在 Ruby 上。

# java - JPA 与同一实体的多个 OneToMany 关系

> ID：15023883
> 
> 赞同：4
> 
> 时间：2013-02-22T12:06:39.387
> 
> 标签：java, jpa, eclipselink, one-to-many

我正在尝试构建一个 JPA 应用程序。我基本上有

```
@Entity
public class Folder {
  @Id
  @GeneratedValue(strategy = GenerationType.TABLE)
  private int id;
  private String description;
  private String name;

  @OneToMany(mappedBy = "parent", cascade = CascadeType.PERSIST)
  private List<AbstractItem> items = new LinkedList<AbstractItem>();

  @OneToMany(mappedBy = "parent", cascade = CascadeType.PERSIST)
  private List<AbstractItem> items2 = new LinkedList<AbstractItem>();
  .
  .
  .
} 
```

我可以成功地将一项添加到`item`列表中，并将其持久化。但是，如果我再次加载它，持久项的相同对象同时在列表`items`和`items2`.

我试图通过添加`@JoinTable`注释来解决这个问题，但我无法让它工作。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T12:10:24.353

对于每种情况，您的 AbstractItem 中都应该有两个对“文件夹”的引用。因此，应该相应地指定 mappedBy 值，例如：

```
 @OneToMany(mappedBy = "parent", cascade = CascadeType.PERSIST)
  private List<AbstractItem> items = new LinkedList<AbstractItem>();

  @OneToMany(mappedBy = "parent2", cascade = CascadeType.PERSIST)
  private List<AbstractItem> items2 = new LinkedList<AbstractItem>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T12:12:24.277

您的`mappedBy`属性链接到一个名为`parent`of的唯一属性`AbstractItem`，换句话说，您正在链接`AbstractItem`和`Folder`通过相同的属性。
如果将第二个列表映射为`parent2`，则表中将有 2 个外`AbstractItem`键`Folder`。
如果您不想要新属性`items`和.`items2``AbstractItem`

# c# - WCF 客户端应该处理 InnerChannel 吗？

> ID：15023885
> 
> 赞同：0
> 
> 时间：2013-02-22T12:06:42.407
> 
> 标签：c#, wcf

对象是否`Innerchannel`手动处置？

```
var client = new MyClient();
client.CallServer();
client.InnerChannel.Dispose()
client.Close() 
```

还是这足够了？

```
var client = new MyClient();
client.CallServer();
client.Close() 
```

`BaseClient<T>`类实现了 IDisposable - 但它确实如此明确

例如：`void IDisposable.Dispose()`

这是否意味着我不应该*手动*调用`Dispose()`客户端？

我有点困惑 - 任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:18:49.483

无需`InnerChannel`明确处置您的客户。当您拜访`Close`您的客户时，它会关闭并`InnerChannel`为您处理。

您可以手动调用`Dispose`您的客户端，因为它会调用`Close`您客户端的方法。您唯一需要做的就是将您的客户分配给一个`IDisposable`. 否则，您无法直接在客户端上调用 Dispose。

或者您可以使用带有 using 语句的客户端

```
using (var client = new MyClient()) {
  client.CallServer();
} 
```

# php - curl_multi_getcontent 给我的结果更少

> ID：15023892
> 
> 赞同：0
> 
> 时间：2013-02-22T12:07:08.560
> 
> 标签：php, json, curl

我想将 curl_multi_exec 记录存储到一个变量中，但在使用 CURLOPT_RETURNTRANSFER = TRUE 后它对我没有用，然后我做了一些研究并添加 curl_multi_getcontent 这工作正常我的意思是它的变量记录值但问题是它只存储变量中的结果很少。

```
$ch = curl_init();
    curl_setopt_array($ch, array(
        CURLOPT_URL => $stream_url,
        CURLOPT_ENCODING => "gzip",
        CURLOPT_FOLLOWLOCATION => true,
        CURLOPT_HTTPAUTH => CURLAUTH_BASIC,
        CURLOPT_TIMEOUT => 10,
        CURLOPT_USERPWD => $user.":".$pass,
        CURLOPT_WRITEFUNCTION => "print_out_data",
        //CURLOPT_RETURNTRANSFER => true,
        CURLOPT_VERBOSE => true // uncomment for curl verbosity

    ));

    $running = null;

    $mh = curl_multi_init();
    curl_multi_add_handle($mh, $ch);

    do {
        curl_multi_select($mh, 1);      
        curl_multi_exec($mh, $running); 
       $content = curl_multi_getcontent($ch);

          $arr = json_decode($content, true);
       // print_r($arr);
          $foo = $arr['id'];
          $bar = $arr['body'];

    } while($running > 0);

    curl_multi_remove_handle($mh, $ch);
    curl_multi_close($ch); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:11:00.643

在做之前{}while() 写

```
$content = array(); 
```

线

```
$content = curl_multi_getcontent($ch); 
```

替换为

```
$content[] = curl_multi_getcontent($ch); 
```

在你的循环写之后

```
print_r($content); 
```

# ruby-on-rails-3 - 在 Rails 中查找没有关系的模型实例

> ID：15023896
> 
> 赞同：0
> 
> 时间：2013-02-22T12:07:26.593
> 
> 标签：ruby-on-rails-3, relational-database, where, belongs-to, has-one

```
class User
has_one :settings

class Settings
belongs_to :user 
```

我想做类似的事情

```
@user_with_no_settings = User.where(:settings => nil) 
```

但这会返回一个空关系。

如何找到所有没有相关设置的用户？（所以我会找到它们并创建它们）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:10:29.823

最重要的是，您的关联不正确；

将其更改为：

```
class User
has_one :setting

class Settings
belongs_to :user 
```

类名是复数，但关联`has_one`总是单数。所以你不能使用`:settings`for`has_one`作为反对`has_many`它总是复数。

用这个：

```
User.where("id not in (select user_id from settings)") 
```

上面的查询将给出所有没有关联设置的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:26:48.953

好的。在您的情况下，您可能需要一些尝试此代码。

```
User.where('id NOT IN (?)', User.joins(:settings).pluck('settings.user_id')) 
```

但是，您需要遵循 Rails 约定。

将设置更改为设置。

# android - 限制预定义图像背景内的 ScrollView/List 高度

> ID：15023897
> 
> 赞同：0
> 
> 时间：2013-02-22T12:07:31.167
> 
> 标签：android, android-layout

我有一个 android 应用程序的设计，它有大表格图像（见下面的 A，B 屏幕）这意味着我已经有 A 和 B 作为我需要的所有尺寸的图像（mdpi、hdpi、xhdpi）： ![在此处输入图像描述](../Images/ceae8ebcdf60c58184e967dc13b7e20f.png)

我的问题是在 AI 内部需要放置一个滚动视图或项目列表，但我不希望它们比 A 图像大。我当前的布局如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background">

    <RelativeLayout
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1">

        // Some elements here

    </RelativeLayout>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1">

        // Some elements here

    </RelativeLayout>

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:layout_gravity="center_horizontal">

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/A_background"/>

        <ScrollView
            android:id="@+id/scrollview"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">

            <LinearLayout
                android:id="@+id/scrollview_container"
                android:orientation="vertical"
                android:gravity="center_horizontal"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_margin="5dp"/>
        </ScrollView>
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:layout_gravity="center_horizontal">

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/B_background"/>
    </RelativeLayout>

</LinearLayout> 
```

当我的滚动视图有很多项目时，A 正在扩展，我需要 A 的高度与以前相同，因为图像变得模糊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:55:26.773

在这些情况下，我通常最终编写一个自定义视图，该视图使用 MeasureSpec.UNSPECIFIED 测量一个视图（在本例中为 ImageView），使用 MeasureSpec.EXACTLY 或 MeasureSpec.AT_MOST（取决于您的需要）测量另一个视图（在您的情况下为 ScrollView） ）。类似的东西：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int width = MeasureSpec.getSize(widthMeasureSpec);
    int height = MeasureSpec.getSize(heightMeasureSpec);

    // measure view 1
    View view1 = findViewById(R.id.view1);
    view1.measure(widthMeasureSpec, MeasureSpec.makeMeasureSpec(height, MeasureSpec.UNSPECIFIED));
    int view1Height = view1.getMeasuredHeight();

    // check measured height against MeasureSpec and adapt accordingly
    int heightMsrSpec = MeasureSpec.getMode(heightMeasureSpec);
    switch (heightMsrSpec) {
    case MeasureSpec.AT_MOST: view1Height = Math.min(height, view1Height); break;
    case MeasureSpec.EXACTLY: view1Height = height; break;
    case MeasureSpec.UNSPECIFIED: break;
    }

    // measure view2
    View view2 = findViewById(R.id.view2);
    view2.measure(widthMeasureSpec, MeasureSpec.makeMeasureSpec(view1Height, MeasureSpec.EXACTLY));
    int view2Height = view2.getMeasuredHeight();

    setMeasuredDimension(width, Math.min(view1Height, view2Height) + getPaddingTop() + getPaddingBottom());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:44:54.493

那么A是图像的背景你确定这是正确的xml文件你不能在imageview中添加滚动视图而且它也不在里面

您可以做的是创建不同的 res/layout 文件夹，例如

```
res/layout-small
res/layout-large
res/layout-xlarge
res/layout-sw600
res/layout-sw720 
```

将您的布​​局文件放入其中，并根据您为它们提供的图像为 A 和 B 提供绝对高度。

这样它就不会拉伸，并且在每个屏幕尺寸上都会看起来更好。

# ruby - qtruby逐点绘制图片

> ID：15023898
> 
> 赞同：1
> 
> 时间：2013-02-22T12:07:33.343
> 
> 标签：ruby, qt, pixel, image, qtruby

嗨，我正在尝试用 ruby​​ 编写 BMP 阅读器，现在我被困在屏幕上。我将图片存储在像素数组中，并且每个像素都存储 rgb 颜色。但是在窗口中什么都没有发生？我做错了什么？或者是否有任何 qt 对象可以存储像素数据并简单地绘制它？

```
def initialize
    super

    setWindowTitle "Transparent rectangles"

    resize 590, 90
    move 300, 300

    show
end

def paintEvent event

      painter = Qt::Painter.new self
      bmp = BMP::Reader.new("picture.bmp")
      drawPicture(painter,bmp.getPixels())
      painter.end
end

def drawPicture(painter, pixels)

    painter.setPen Qt::NoPen
      0.upto(pixels.length-1) do |i|
        0.upto(pixels[0].length-1) do |j|
          painter.setBrush Qt::Brush.new Qt::Color.new pixels[i][j][2], pixels[i][j][1], pixels[i][j][0], 255
          painter.drawPoint(i,j)
        end
      end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:21:55.343

`QPainter.drawPoint`使用当前的笔，而不是画笔。`painter.setPen`在每个点之前调用。

但是最好将像素存储在`QImage`. Qt 已经支持读取 BMP 文件，因此除非您有充分的理由，否则无需自己实现。

# c# - 如何在银灯中增加会话超时？

> ID：15023914
> 
> 赞同：1
> 
> 时间：2013-02-22T12:08:26.660
> 
> 标签：c#, silverlight, session

我一直在尝试从默认超时时间增加 Silverlight 中的会话超时。我在 webconfig 中设置这个时间。当我尝试减少它工作正常的时间时，会话在给定时间内过期。但似乎增加时间根本没有效果。我不认为这个问题是特定于代码的。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:46:14.847

您是否同时配置了客户端和服务器端配置文件？两者都应该是一致的，否则它会根据较低的值工作。

检查此[站点上的配置](http://www.fredmastro.com/post/silverlight-timeout-issues-from-wcfe280a6-exceeded-the-allotted-timeout.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:36:40.053

我会检查 IIS 中的应用程序池高级设置。有一个`Idle time out`和`Regular Time Interval`（回收）设置。

# c# - 选择要在组合框中显示的数据或隐藏我需要的数据

> ID：15023915
> 
> 赞同：0
> 
> 时间：2013-02-22T12:08:32.900
> 
> 标签：c#, .net, winforms

因此，对于我的组合框，我使用`dataSource`which contains `ID`,`Name`和一个 List ，其中包含一个元素，当我想要空白选择时我需要这些元素。现在，当我打开我的组合框时，我看到了这个：

![在此处输入图像描述](../Images/b9c9494a93282e0c13cd83dc7b411adc.png)

`--No Material--`来自这样的列表：

```
materialTypes.Insert(0, "-- No Material --"); 
```

我需要它，但是`ID's`名称来自另一个使用 Linq 查询生成的列表，我想隐藏 ID。我不知道方法是什么——隐藏我不需要的数据或明确标记我需要的数据。但我不知道如何做这两件事。

PS这是组合框的全部代码：

```
 IList<String> materialTypes =  ((from tom in context.MaterialTypes
                                                where tom.IsActive == true
                                                select tom.Name)
                                           .Union(from tom in context.MaterialTypes
                                           where tom.IsActive == true
                                           select SqlFunctions.StringConvert((double)tom.ID))).ToList();

            materialTypes.Insert(0, "-- No Material --");
            cboTypeOfMaterial.DataSource = materialTypes; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:28:12.003

Looking at your query it is a bit strange, I would do it like that:

```
IList<MaterialType> materialTypes =  (from tom in context.MaterialTypes
                                      where tom.IsActive == true
                                      select tom).ToList(); //do you really need to split ID's from Names?

materialTypes.Insert(0, new MaterialType { Name = "-- No Material --" }); //add to our list fake material

combobox.ValueMember = "ID";
combobox.DisplayMember = "Name";
combobox.DataSource = materialTypes; 
```

# c# - 在不同选项卡中更改组合框的文本

> ID：15023916
> 
> 赞同：5
> 
> 时间：2013-02-22T12:08:35.800
> 
> 标签：c#, winforms, combobox, tabcontrol, tabpage

我有一个组合框，我需要在基于 C# winforms 的应用程序的另一个标签页中镜像它。

当您从下拉列表中选择不同的项目时，我有完美的工作代码。但是，不幸的是，当我更改`Text`尚未单击的选项卡时，实际上没有任何反应。

如果我首先单击每个选项卡，那么一切都会按预期工作。

现在我把它归结为某种形式的缺乏初始化首先发生。因此，我尝试在构造函数中选择每个选项卡。

```
tabControlDataSource.SelectedIndex = 0;
tabControlDataSource.SelectedIndex = 1;
// etc 
```

但这不起作用。

我也试过打电话`tabControlDataSource.SelectTab( 1 )`，还是不行。

有谁知道我如何强制标签“初始化”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T12:21:51.333

好的，通常我会在挣扎一个小时后发布问题，然后很快找到解决方案。

TabPages 被延迟初始化。因此，在它们第一次可见之前，它们不会完全初始化。

所以我将此代码添加到我的构造函数中：

```
 tabControlDataSource.TabPages[0].Show();
        tabControlDataSource.TabPages[1].Show();
        tabControlDataSource.TabPages[2].Show(); 
```

但这不起作用:(

然而，我突然想到，构造函数可能不是最好的地方。所以我`Shown`为如下创建了一个事件处理程序：

```
 private void MainForm_Shown( object sender, EventArgs e )
    {
        tabControlDataSource.TabPages[0].Show();
        tabControlDataSource.TabPages[1].Show();
        tabControlDataSource.TabPages[2].Show();
    } 
```

现在一切正常！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T12:31:37.953

在这种情况下，也许您还可以使用某种“惰性”同步（初始化）。快速强大的想法：轮询计时器以更新内容（一旦您看到标签页就会更新它），在第二个标签中没有依赖项（组合框没有更改事件来更新第二个标签内容，使用第一个标签中的原始组合框，或者让它的内容底层在Comboboxes类等上都可以访问时），当Tab变得可见时（此刻您还会启动第二个Combobox）...

不可能是一个小时，没办法=D

# maven - 使用 maven 时如何自动将 SNAPSHOT 依赖项更新到最新发布的版本

> ID：15023922
> 
> 赞同：1
> 
> 时间：2013-02-22T12:09:06.337
> 
> 标签：maven, process, release-management, configuration-management

我正在尝试为我们的项目定义一个发布流程。

我能够使用 maven 发布插件来完成发布，但我必须手动更新我们所有的内部 SNAPSHOT 依赖项以在准备之前发布版本，然后在发布之后再次回到 SNAPSHOT 版本。

我使用了 maven 版本插件，它检测到我的公司依赖项是 SNAPSHOT 构建并列出要使用的正确版本构建。

我尝试了 maven 发布插件，准备目标，并抱怨我的依赖项中的 SNAPSHOT 版本。

有没有办法进行发布，将 SNAPSHOT 依赖项更新到最新发布的版本，然后在发布后返回到 SNAPSHOT 版本？或者，也许这不是您应该将 maven 与发布和快照一起使用的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:58:34.130

当您使用 maven 创建一个发布时：它必须是确定的。即一旦创建它就不能再改变（即源不能改变**，依赖**不能改变）。

因此，当您创建依赖于 moduleB 的 moduleA 和 moduleA 的发布时。moduleB 必须在 moduleA 发布之前发布，并且 moduleA 必须依赖于 moduleB 的发布版本。

一件重要的事情是你不应该*回到 SNAPSHOT*版本。至少据我了解，这意味着：

*   创建模块B-1.0.0 发布
*   将依赖关系更改为 moduleB-1.0.0
*   创建 moduleA-1.0.0 版本
*   然后将依赖项改回 moduleB-1.0.0-SNAPSHOT

必须清楚的是，一旦 moduleB-1.0.0 存在（即发布）：工件 moduleB-1.0.0-SNAPSHOT 就不应再使用了。

与其*返回 SNAPSHOT* ，不如将*依赖项更新到下一个 SNAPSHOT 版本*（例如 moduleB-SNAPSHOT-1.0.1）

话虽如此，根据许多 SNAPSHOT 工件发布模块并不是一个简单的过程，因为必须在发布主工件之前释放每个依赖项。

大多数时候，我们拥有的是一个主要工件，它依赖于具有相同版本控制策略的许多其他工件（我们称它们为企业模块）。因此，您可以`corporate-module-version`在一个地方定义一个属性来保存许多依赖项使用的版本。

发布过程如下：

*   释放版本号为 1.0.0 的每个快照依赖项（使用 maven-release-plugin：在此步骤之后，SCM 中企业模块的所有 pom.xml 都是 1.0.1-SNAPSHOT）（请参阅本文末尾的重要注释以方便此步骤）
*   **在主工件中手动**将`corporate-module-version`属性更改为“1.0.0”（以便所有 SNAPSHOT 依赖项都被刚刚发布的版本替换）
*   提交修改后的 pom.xml 持有`corporate-module-version`
*   使用 maven-release-plugin：发布主要工件（之后，SCM 中的新版本将类似于 1.0.1-SNAPSHOT）
*   **在主工件中手动**将`corporate-module-version`属性更改为“1.0.1-SNAPSHOT”（以便所有依赖项都替换为最新的快照版本）

**重要说明**：拥有一个包含所有公司模块的多模块父项目是必须立即执行所有公司模块的发布。为了不让 maven-release-plugin 和多模块父项目遇到太多麻烦，请务必将父 pom.xml 放在所有子 pom.xml 之上的一个目录（这是 maven 设计推荐的，但不幸的是，有时，eclipse用户不关注是因为eclipse不喜欢分层项目）

# jquery - jQuery Mobile - 样式不适用于动态表单元素

> ID：15023927
> 
> 赞同：2
> 
> 时间：2013-02-22T12:09:17.940
> 
> 标签：jquery, jquery-mobile

我将 Collapsible Accordion 用于动态附加的列表。每个可折叠项都应该有一些表单元素（文本输入、文本区域和按钮），如下图所示。

![在此处输入图像描述](../Images/94edaccdf57283e7b74f422549f9fe3d.png)

我的问题是，当可折叠手风琴动态附加时，没有样式附加到动态附加的表单元素上。

我试过`$(‘#PageID’).page()`但没有运气。

我的代码

```
var projectListStr = "<div data-role='collapsible-set' data-theme='c' data-content-theme='d' id='collabsibleProjectList' data-inset='false'>";
$.each(projectList,function(index, value){
        LineOneprojectListStr = "<br/><p class='listP2'><strong>Aktivitet </strong>: "+CheckNullToEmptyString(this.ActivityName)+"</p>";
        LineOneprojectListStr +=  "<br/><p class='listP3'><strong>Händelse/Verksamhet</strong>: "+CheckNullToEmptyString(this.EventName)+"</p>";
        projectListStr += "<div data-role='collapsible' class='myset'>";
        projectListStr += "<h3>"+this.ProjectName+"<span class='ui-li-count'>"+checkNullToZero(this.Days[i].EventTimant2)+"</span>"+LineOneprojectListStr+"</h3>";
        FormStr = "<table align='center'>";
        FormStr += "<tr><th>Hours</th><th>Minutes</th></tr>";
        FormStr += "<tr><td><input type='number' name='hoursMon' id='hoursMon' value=''  /> </td><td><input type='number' name='minsMon' id='minsMon' value=''  /></td></tr>";
        FormStr += "</table>";
        FormStr += "<div data-role='fieldcontain' >";
        FormStr += "<label for='externalNotesMon'>Fakturatext</label>";
        FormStr += "<textarea name='textarea' id='externalNotesMon' style='min-height:120px'></textarea>";
        FormStr += "</div>";
        FormStr += "<div data-role='fieldcontain'>";
        FormStr += "<label for='internalNotesMon'>Intern Text</label>";
        FormStr += "<textarea name='textarea' id='internalNotesMon' style='min-height:120px'></textarea>";
        FormStr += "</div>";
        projectListStr +=FormStr;
    projectListStr +=  "</div>";
});
projectListStr +=  "</div>";
//projectListStr +="</ul>";
$('#ProjectList').html(projectListStr);
$('#home2').page(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T12:19:51.440

`$('#home2').trigger('create');`做了魔术。

# node.js - 如何使用 node v0.9.11-pre 安装串口

> ID：15023933
> 
> 赞同：0
> 
> 时间：2013-02-22T12:09:30.560
> 
> 标签：node.js, serial-port, debian

我正在尝试使用命令“ `sudo npm install serialport`”安装串行端口。

我正在运行`raspbian`，我已经使用 apt get 进行了更新/升级。

[我在这里](https://stackoverflow.com/questions/10478768/installing-node-js-on-debian-6-0)使用帖子 2 中的说明安装了节点

这是我得到的错误：

```
pi@raspberrypi ~/Programming/node $ sudo npm install serialport
npm http GET https://registry.npmjs.org/serialport
npm http 304 https://registry.npmjs.org/serialport
npm http GET https://registry.npmjs.org/bindings/0.3.0
npm http GET https://registry.npmjs.org/async/0.1.18
npm http GET https://registry.npmjs.org/sf/0.1.3
npm http GET https://registry.npmjs.org/optimist
npm http GET https://registry.npmjs.org/node-gyp/0.6.2
npm http 304 https://registry.npmjs.org/async/0.1.18
npm http 304 https://registry.npmjs.org/sf/0.1.3
npm http 304 https://registry.npmjs.org/bindings/0.3.0
npm http 304 https://registry.npmjs.org/optimist
npm http 304 https://registry.npmjs.org/node-gyp/0.6.2
npm http GET https://registry.npmjs.org/wordwrap
npm http 304 https://registry.npmjs.org/wordwrap
npm http GET https://registry.npmjs.org/nopt
npm http GET https://registry.npmjs.org/request
npm http GET https://registry.npmjs.org/rimraf
npm http GET https://registry.npmjs.org/semver
npm http GET https://registry.npmjs.org/npmlog
npm http GET https://registry.npmjs.org/osenv
npm http GET https://registry.npmjs.org/tar
npm http GET https://registry.npmjs.org/which
npm http GET https://registry.npmjs.org/glob
npm http GET https://registry.npmjs.org/graceful-fs
npm http GET https://registry.npmjs.org/fstream
npm http GET https://registry.npmjs.org/minimatch
npm http GET https://registry.npmjs.org/mkdirp
npm http 304 https://registry.npmjs.org/request
npm http 304 https://registry.npmjs.org/rimraf
npm http 304 https://registry.npmjs.org/nopt
npm http 304 https://registry.npmjs.org/semver
npm http 304 https://registry.npmjs.org/osenv
npm http 304 https://registry.npmjs.org/tar
npm http 304 https://registry.npmjs.org/which
npm http 304 https://registry.npmjs.org/glob
npm http 304 https://registry.npmjs.org/npmlog
npm http 304 https://registry.npmjs.org/graceful-fs
npm http 304 https://registry.npmjs.org/fstream
npm http 304 https://registry.npmjs.org/minimatch
npm http 304 https://registry.npmjs.org/mkdirp
npm WARN engine tar@0.1.16: wanted: {"node":"~0.5.9 || 0.6 || 0.7 || 0.8"} (current: {"node":"v0.9.11-pre","npm":"1.2.12"})
npm http GET https://registry.npmjs.org/ansi
npm http GET https://registry.npmjs.org/abbrev
npm http 304 https://registry.npmjs.org/ansi
npm http GET https://registry.npmjs.org/lru-cache
npm http GET https://registry.npmjs.org/sigmund
npm http 304 https://registry.npmjs.org/abbrev
npm http 304 https://registry.npmjs.org/sigmund
npm http 304 https://registry.npmjs.org/lru-cache
npm http GET https://registry.npmjs.org/inherits
npm http GET https://registry.npmjs.org/inherits
npm http 200 https://registry.npmjs.org/inherits
npm http 200 https://registry.npmjs.org/inherits
npm http GET https://registry.npmjs.org/block-stream
npm http 304 https://registry.npmjs.org/block-stream

> serialport@1.0.8 install /home/pi/node_modules/serialport
> node-gyp rebuild

gyp ERR! configure error
gyp ERR! stack Error: "pre" versions of node cannot be installed, use the --nodedir flag instead
gyp ERR! stack     at install (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/install.js:69:16)
gyp ERR! stack     at Object.self.commands.(anonymous function) [as install] (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/node-gyp.js:56:37)
gyp ERR! stack     at getNodeDir (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:223:20)
gyp ERR! stack     at /usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:105:9
gyp ERR! stack     at ChildProcess.exithandler (child_process.js:577:7)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:97:17)
gyp ERR! stack     at maybeClose (child_process.js:677:16)
gyp ERR! stack     at Process.ChildProcess._handle.onexit (child_process.js:744:5)
gyp ERR! System Linux 3.6.11+
gyp ERR! command "node" "/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /home/pi/node_modules/serialport
gyp ERR! node -v v0.9.11-pre
gyp ERR! node-gyp -v v0.8.4
gyp ERR! not ok
npm ERR! serialport@1.0.8 install: `node-gyp rebuild`
npm ERR! `sh "-c" "node-gyp rebuild"` failed with 1
npm ERR!
npm ERR! Failed at the serialport@1.0.8 install script.
npm ERR! This is most likely a problem with the serialport package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-gyp rebuild
npm ERR! You can get their info via:
npm ERR!     npm owner ls serialport
npm ERR! There is likely additional logging output above.

npm ERR! System Linux 3.6.11+
npm ERR! command "/usr/local/bin/node" "/usr/local/bin/npm" "install" "serialport"
npm ERR! cwd /home/pi/Programming/node
npm ERR! node -v v0.9.11-pre
npm ERR! npm -v 1.2.12
npm ERR! code ELIFECYCLE
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     /home/pi/Programming/node/npm-debug.log
npm ERR! not ok code 0 
```

显然我的节点版本太最新了，*我*该如何解决这个问题？

谁能帮我搞定这个工作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:56:05.247

通过删除此版本然后安装版本 0.8.16 解决了这个问题。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T22:48:17.277

我添加了同样的问题，在我的情况下，这是一个错误的包依赖项（串行端口强制为“1.0.x”）。我添加将旧包的**package.json更改为：**

```
{
  "name": "oldPackage",
  "dependencies": {
    "serialport": "1.1.x"
  }
} 
```

# ruby - 如何从 ruby Open3.popen3() 中检索退出状态？

> ID：15023944
> 
> 赞同：22
> 
> 时间：2013-02-22T12:10:09.480
> 
> 标签：ruby, popen3

我似乎被困在试图检索从 ruby​​ 的 Open3.popen3() 方法启动的 shell 命令的退出状态。

这是我的代码：

```
require 'open3'
stdin, stdout, stderr = Open3.popen3('ls') 
```

当我现在尝试访问它时`$?`，它仍然是`nil`

毕竟有可能检索退出状态吗？

注意：
-`ls`不是我试图在我的脚本中使用的命令。我只是用这个来举个例子。我的脚本有点复杂，并且包含用户输入，这就是为什么我需要 Open3 的清理功能。
- 我也尝试过 popen3 的 block 变体，但也没有成功。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-07-30T01:50:29.257

简洁的答案是使用 open3 的第 4 个参数：`wait_thr`

*   获取是否指示任何错误：`wait_thr.value.success?`
*   获取实际的错误级别：`wait_thr.value.exitstatus`

样本：

```
Open3.popen3(command) do |stdin, stdout, stderr, wait_thr|
  return_value = wait_thr.value
end
puts "Error level was: #{return_value.exitstatus}" unless return_value.success? 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-02-22T12:15:11.100

`popen3`产生/返回四个参数，`stdin`,和. 包含一个返回命令退出状态的方法（实际上，根据文档，它是一个对象）。也看看[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html#method-c-popen3](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html#method-c-popen3)`stdout``stderr``wait_thr``wait_thr``wait_thr.value``Process::Status`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-07T13:47:56.537

您需要的一切（标准输出、错误和退出代码）都包含在三行中：

```
require 'open3'
stdin, stdout, stderr, wait_thr = Open3.popen3("sleep 5; ls")
puts "#{stdout.read} #{stderr.read} #{wait_thr.value.exitstatus}" 
```

# sql-server-2008 - SQL Server 2008 触发器不起作用，为什么？

> ID：15023946
> 
> 赞同：1
> 
> 时间：2013-02-22T12:10:12.680
> 
> 标签：sql-server-2008, tsql, triggers

我有一个名为`tblReservations`以下列的表：

```
reserv_ID (int), aptID (int), client_ID (int), 
start_date (datetime), end_date (datetime), 
details (nvarchar(max)), confirmation (bit) 
```

什么触发器应该是比较两个日期`start_date`的新预订和`end_date`现有预订`tblReservation`的特定日期`aptID`。

如果`start_date < end_date`触发器必须阻止插入新的保留`aptID`。

我写了这个触发器：

```
CREATE TRIGGER NewReservation
    on tblReservations
    after insert
    as
    begin
        declare @aptID int
        declare @start_date datetime
        declare @end_date datetime

        select @aptID=aptID, @start_date=start_date from inserted
        select @end_date=end_date from tblReservations
        where aptID=@aptID

        if @end_date>@start_date
        BEGIN
            ROLLBACK TRANSACTION
        END
    end 
```

为什么这个触发器不起作用？

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:41:58.493

除了其他人提出的 multiorw 问题之外，您可能没有考虑到特定 apt id 的 tblReservations 中有很多行。

另外，您不想插入记录然后删除它，您希望记录不进入。因此，而不是触发器是更好的选择。

```
CREATE TRIGGER NewReservation
    ON tblReservations
    INSTEAD OF INSERT
    AS
    BEGIN

        INSERT tblReservations (<put field list here>)
        SELECT <put field list here>
        FROM inserted i
        JOIN (SELECT aptid, MAX(reservationid)AS reservationid FROM tblReservations GROUP BY aptid)  maxid 
            ON i.aptid = r.aptid
        JOIN    tblReservations r 
            ON r.reservationid = maxid.reservationid
        WHERE r.enddate<i.startdate

    END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:37:15.057

我看到的第一个问题是您假设插入的是单行。

尝试：

```
Select top 1 @aptID=bb.aptID, @start_date=start_date
from inserted as aa
join
(
  select Max(start_date) as Start_Date from inserted 
) as bb
on aa.Start_Date =bb.Start_Date 
```

但是您应该考虑更改您的逻辑，以便在日期错误时永远不会插入记录。

# ios - 如何在 iphone 屏幕上垂直居中分组 UITableView？

> ID：15023948
> 
> 赞同：1
> 
> 时间：2013-02-22T12:10:23.840
> 
> 标签：ios, uitableview, storyboard

我尝试将 headerView 添加到 tableview 并将其高度设置如下（假设我们这里有 3 个单元格）

```
(self.tableView.bounds.size.height - self.tableView.rowHeight*3 - self.tableView.sectionHeaderHeight - self.tableView.sectionFooterHeight)/2; 
```

它似乎居中，但对齐实际上偏离了 5 个像素。

我想使用故事板但没有容器视图，因为它们仅适用于 ios 6。我希望它至少适用于 ios 5.1

# php - 如何为获取的每一行格式化数据？（Codeigniter，My_Model）

> ID：15023953
> 
> 赞同：1
> 
> 时间：2013-02-22T12:10:31.350
> 
> 标签：php, codeigniter, date-formatting

我有一个名为 events 的表，我以**datetime**格式存储**开始**日期。

 **但是，我正在使用一个[插件](http://arshaw.com/fullcalendar/)，要求将日期格式化为： `YYYY-MM-DD`.

因此，我只想选择部分日期时间，而不修改底层表结构。有没有办法在获取每条记录时格式化字段数据？我问的原因是因为再次浏览每条记录（就像我现在一样）并格式化一个字段似乎效率低下。

```
$this->load->model('event_model');
$events = $this->event_model->get_all();

foreach ($events as $event) {
    $start = date('Y-m-d', strtotime($event->start));
    //add event to new event array     
}

$output = json_encode($events); // I would like to use the formatted date when using json_encode on $events. 
```

我将[codeigniter](http://ellislab.com/codeigniter)与[My Model](https://github.com/jamierumbelow/codeigniter-base-model)一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:15:35.210

为什么你不只是存储到你生成的模型中？

例如：

```
$this->load->model("event_model");
$events = $this->event_model->get_all();

foreach($events as $event){
  $event->mydate = date('Y-m-d',strtotime($event->start));
} 
```

现在将您的 $events 传递给视图并使用 mydate 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T12:14:03.123

只需在您的 sql 代码中格式化您的日期

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T12:34:21.443

```
SELECT *,  FORMAT(start,'YYYY-MM-DD') as eventStart
FROM events 
```

在查询本身中对其进行格式化。**

# azure - Azure 网站上的 ActiveDirectoryMembersipProvider 可用性

> ID：15023954
> 
> 赞同：1
> 
> 时间：2013-02-22T12:10:35.380
> 
> 标签：azure, active-directory, azure-web-app-service

我正在尝试在 Azure 网站 (WAWS) 上进行 AD 身份验证（请注意，不是云服务或 VM）。

该站点（一个基本的 MVC3 站点，除了成员资格提供程序和相关的连接字符串之外没有任何更改）将正确加载，但是，当我尝试登录时，我得到一个配置异常：

```
Parser Error Message: Access is denied.

Line 51:         <clear/>
Line 52:         <add name="ActiveDirectoryProvider"
Line 53:           type="System.Web.Security.ActiveDirectoryMembershipProvider"
Line 54:           connectionStringName="--Redacted--"
Line 55:           connectionUsername="--Redacted--" 
```

我知道`ActiveDirectoryMembershipProvider`需要完全信任，但是，我希望 WAWS 中不会出现该问题（因为 WAWS 应用程序默认在完全信任下运行），并且 FT 的任何问题都会产生“未找到组件” " 或 "程序集绑定失败" 异常，而不是配置异常。

有谁知道为什么`ActiveDirectoryMembershipProvider`无法正常运行？

谢谢，埃德

**编辑**

有趣的是，我在标准的 Azure 云服务实例上建立了一个类似的测试网站，并且`ActiveDirectoryMembershipProvider`运行良好。

# perl - autoflush 在套接字中做了什么？我们为什么用它？

> ID：15023957
> 
> 赞同：5
> 
> 时间：2013-02-22T12:10:44.023
> 
> 标签：perl, sockets, autoflush

我正在研究一些套接字代码，但无法弄清楚为什么`autoflush`在套接字上使用了。是这样的

```
my $sock = IO::Socket::Unix(Peer => $socketfilename , Type => SOCK_STREAM)

autoflush $sock 1; 
```

还有地方有

```
autoflush STDERR 1

autoflush STDOUT 1 
```

对于一般文件。

它有什么作用？如果我不使用它会发生什么或将会发生什么？请举一些实际的例子，以便我理解而不是简单的定义。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T12:14:17.740

数据通常不会立即在套接字上发送，它会缓冲到某个点，然后一次性发送。

自动刷新意味着数据直接通过缓冲区然后被刷新，而不是保留在缓冲区中等待其他数据到达并累积。

就如此容易。

没有自动冲洗：

```
Tick | DATA sent|Socket Buffer| DATA received
.....|..........|.............|..............
1    | XX       | XX          | (nothing)
2    | yy       | yyXX        | (nothing)
3    | ZZZ      | ZZZyyXX     | (nothing)
4    | t        | (empty)     | tZZZyyXX 
```

带自动冲洗：

```
Tick | DATA sent | Socket Buffer | DATA received
.....|...........|...............|..............
1    | XX        | ()            | XX
2    | yy        | ()            | yy
3    | ZZZ       | ()            | ZZZ
4    | t         | ()            | t 
```

*   套接字缓冲区大小：8 个字符
*   很简单的例子，看到之后你可能会提出一些其他的问题——其中很大一部分也是依赖于实现的。此外，缓冲可以发生在各个级别（发送方、接收方、应用程序等。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-22T12:31:49.917

它绝对什么都不做……因为 IO::Socket::Unix 已经为你做了。

以块的形式发送数据的开销较小，因此文件库会累积数据以在缓冲区中打印，而不是立即发送到系统。只有当数据已经累积到 4KB 或 8KB（取决于版本）时，才是真正发送到系统的数据。这称为“缓冲”。

将句柄的 autoflush 设置为 true 会禁用该句柄的缓冲。当您调用时，数据在返回`print`之前被发送到系统。`print`

看到不同：

```
$ perl -e'
   STDOUT->autoflush($ARGV[0]);
   for (0..9) { print $_ x 1024; sleep 1; }
' 1
<whole bunch of 1s>
<one second later: whole bunch of 2s>
<one second later: whole bunch of 3s>
<one second later: whole bunch of 4s>
<one second later: whole bunch of 5s>
<one second later: whole bunch of 6s>
<one second later: whole bunch of 7s>
<one second later: whole bunch of 8s>
<one second later: whole bunch of 9s>

$ perl -e'
   STDOUT->autoflush($ARGV[0]);
   for (0..9) { print $_ x 1024; sleep 1; }
' 0
# Before Perl 5.14:
<four seconds later: whole bunch of 0s, 1s, 2s and 3s>
<four seconds later: whole bunch of 4s, 5s, 6s and 7s>
<two seconds later: whole bunch of 8s and 9s>
# Perl 5.14+
<eight seconds later: whole bunch of 0s, 1s, 2s, 3s, 4s, 5s, 6s and 7s>
<two seconds later: whole bunch of 8s and 9s> 
```

`autoflush`由 IO::Socket::* 打开，因为它在大多数情况下都需要用于套接字。套接字通常用于交互式通信。请求、回复、请求、回复等。想象一下，如果请求被卡在缓冲区中会发生什么……您将永远等待回复！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-23T12:20:56.013

从 [IO::Handle](http://metacpan.org/source/GBARR/IO-1.25/lib/IO/Handle.pm#L478)：

```
sub autoflush {
    my $old = new SelectSaver qualify($_[0], caller);
    my $prev = $|;
    $| = @_ > 1 ? $_[1] : 1;
    $prev;
} 
```

没有魔法。

[来自](http://perldoc.perl.org/perlvar.html#%24%7C)：

> $|
> 
> 如果设置为非零，则在当前选定的输出通道上每次写入或打印后立即强制刷新。默认值为 0（无论通道是否真的被系统缓冲；`$|`只告诉您是否明确要求 Perl 在每次写入后刷新）。如果输出到终端，则 STDOUT 通常会被行缓冲，否则会被块缓冲。设置此变量主要在您输出到管道或套接字时很有用，例如当您在 rsh 下运行 Perl 程序并希望看到正在发生的输出时。这对输入缓冲没有影响。请参阅 [getc](http://perldoc.perl.org/functions/getc.html)。请参阅[选择](http://perldoc.perl.org/functions/select.html)以了解如何选择输出通道。另请参阅[IO::Handle](http://perldoc.perl.org/IO/Handle.html)。

# drupal - 两种内容类型的内容配置文件作为用户注册 Drupal

> ID：15023958
> 
> 赞同：2
> 
> 时间：2013-02-22T12:10:51.650
> 
> 标签：drupal, profile

我想为多种内容类型使用内容配置文件进行用户注册。就像我有商业内容类型，我将用于用户如何想在我的网站上注册为公司，而我还有其他公司用户将注册为公司的公司。

现在我选择了在注册页面上使用，但我只获取用于注册的业务内容类型，而不是公司。我想在不同的 url 上注册，因为它们是不同的角色和内容类型。

我正在使用drupal 6。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-14T06:20:41.383

根据您的要求，使用它的最佳方法是使用[profile2](https://drupal.org/project/profile2)和[profile2_regpath](https://drupal.org/project/profile2_regpath)模块。这些模块的组合允许您为具有不同 url 的不同用户角色创建具有不同字段的不同用户注册表单。

这是教程的链接，您可以在其中找到创建此功能的正确步骤：http: [//drupixels.com/blog/registration-multiple-user-roles-different-registration-pages-profile-2-module](http://drupixels.com/blog/registration-multiple-user-roles-different-registration-pages-profile-2-module)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:31:30.160

您应该使用自动分配角色模块 [http://drupal.org/project/autoassignrole](http://drupal.org/project/autoassignrole)，您必须在 admin/user/autoassignrole 的“从路径分配”部分填写设置，您将找到每个角色的选项。

此外，您必须检查每种内容类型的内容配置文件部分中的“注册时使用”选项。

# php - 考虑到 DB 的 PHP 字符串替换操作

> ID：15023960
> 
> 赞同：0
> 
> 时间：2013-02-22T12:10:54.607
> 
> 标签：php, database, string, preg-replace

我想在 PHP 中使用 DB 对我的字符串进行一些替换类型的操作。例如：

```
$inputString = "My name is [[name-abc]] and age [[age-25]]"; 
```

我有如下的数据库表：

```
id    input        output
 1     name-abc    LINK_TO_ABC_PROFILE
 2     name-def    LINK_TO_DEF_PROFILE
 3     age-18      LINK_TO_AGE_18
 4     age-25      LINK_TO_AGE_25 
```

我需要输出：

```
$outputString = "My name is LINK_TO_ABC_PROFILE and age LINK_TO_AGE_25"; 
```

我用 preg_replace 尝试了各种方法，但没有得到结果。假设 DB 在我的数组中，任何人都可以为我编写函数，如下所示：

```
array('name-abc' => LINK_TO_ABC_PROFILE, 'name-def' => LINK_TO_DEF_PROFILE .... 'age-25' => LINK_TO_AGE_25) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:22:07.313

```
<?php
$details = array('name-abc' => LINK_TO_ABC_PROFILE, 'name-def' => LINK_TO_DEF_PROFILE .... 'age-25' => LINK_TO_AGE_25);

$outputString = "My name is ".$details['name-abc']." and age ".$details['age-25'];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:31:53.263

```
$inputString = "My name is [[name-abc]] and age [[age-25]]";
$replace = array('name-abc' => LINK_TO_ABC_PROFILE, 'name-def' => LINK_TO_DEF_PROFILE , 'age-25' => LINK_TO_AGE_25);
$keys = array();
foreach ($replace as $k => $v) {
    $keys[] = '[[' . $k . ']]';
}
$out = str_replace ( $keys ,  array_values($replace) , $inputString );

var_dump(($out)); 
```

输出：

```
string(53) "My name is LINK_TO_ABC_PROFILE and age LINK_TO_AGE_25" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T13:01:33.047

如果你想使用preg_replace，你必须框架两个一维数组而不是关联数组，尝试如下，

```
$input_arr = array();
$output_arr = array();
$query = "SELECT input,output FROM replacestrtbl";
$stmt = $mysqli->prepare($query);

if($stmt){
  $stmt->execute();
  $stmt->bind_result($input, $output);
  $i=0;
  while($res = $stmt->fetch()){
  $input_arr[$i] = '/\[\['.$input.'\]\]/';
  $output_arr[$i] = $output;
  $i++;
  }
  $stmt->close();
}

$inputString = "My name is [[name-abc]] and age [[age-25]]";

$output_string=preg_replace($input_arr,$output_arr,$inputString);

echo $output_string; 
```

# javascript - CSS：如果p的高度重叠，则增加父宽度

> ID：15023964
> 
> 赞同：1
> 
> 时间：2013-02-22T12:11:02.497
> 
> 标签：javascript, jquery, html, css, responsive-design

我有一个 100% 的窗口图像。在里面我有一个绝对定位的 div （带有 class `caption`），它显示一个标题和一些文本。这个标题有`min-width`36%。我的网站如果完全响应。

我正在使用媒体查询在平板电脑和手机上重新定位标题。但是，有时里面的文字`item`太大——标题的高度大于图像。

我正在使用以下代码使用 javascript 修复此问题，但感觉有很大的错误（当用户调整浏览器大小时它不起作用）：

```
window.onload = function(){
  setWidth();
};

var count = 0;
function setWidth() {
    $('.item').each(function() {
        if ( $(this).find('.caption')[0].scrollHeight >  $(this).height() && count <= 100) {
            $(this).find('.caption').css('width', $(this).find('.caption').width() + 10);
            count++;
            setWidth();
        }
    });
} 
```

有没有一种方法可以仅使用 css 来实现相同的效果。`max-height`上的东西`caption`是 100%，`min-width`是 36%，宽度会随着标题高度的变化而相应变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:54:40.940

对于您的示例，如果没有标记，很难看出 CSS 是否可行。至于 JavaScript，您希望将您的`resize`函数附加到`window.onresize`事件，这将在调整窗口大小时调用。

[请参阅 JSFiddle 上的示例](http://jsfiddle.net/Ja9tv/)

```
window.onresize = updateDimensions;

function updateDimensions(e) {
    document.getElementById('width').innerHTML = window.innerWidth;
    document.getElementById('height').innerHTML = window.innerHeight;
}

updateDimensions(); 
```

# asp.net - 更新面板条件模式不起作用

> ID：15023969
> 
> 赞同：0
> 
> 时间：2013-02-22T12:11:21.213
> 
> 标签：asp.net

在 updatepanel 条件模式下，我无法启用/禁用我的按钮。

```
</asp:ToolkitScriptManager><asp:UpdatePanel  ID="UpdatePanel5" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="false">
                    <ContentTemplate> 
                    <div class="buttons"><asp:Button ID="btnReturn" runat="server" Text="Return to Policy" onclick="btnReturn_Click" /> <asp:Button ID="lnkbtnEndorse" runat="server" Text="Import Data" onclick="lnkbtnEndorse_Click" />
                    <asp:Button ID="btnCompareTop" runat="server" Text="Compare" 
                            onclick="Compare_Click" Enabled="false" />                          
                        <asp:Button ID="btnAdditionalInfoOpen" runat="server" Text="Additional Information" /> <asp:Button ID="Button3" runat="server" Text="Save" onclick="SaveCopy_Click" /></div> </ContentTemplate>
           </asp:UpdatePanel> 
```

我想在cs页面中启用比较按钮。

后面的代码

```
grdNewEndorsement.AutoGenerateColumns = false;
        grdNewEndorsement.DataBind();

        this.Button1.Enabled = true;
        this.btnCompareTop.Enabled = true; 
```

现在按钮已启用，但 btnAdditionalInfoOpen 按钮未打开弹出窗口

```
 $('#ctl00_Main_btnAdditionalInfoOpen').click(function () {
                $('#additional-info').dialog('open');
                return false;
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:13:56.977

如果`UpdatePanel`'s`UpdateMode`是“有条件的”并且`ChildrenAsTriggers`是“假的”，您可以（**必须**）手动更新它：

```
this.btnCompareTop.Enabled = true;
UpdatePanel5.Update(); 
```

[`UpdatePanel.Update`方法](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.update.aspx)

# javascript - Img 没有淡出 jQuery

> ID：15023970
> 
> 赞同：2
> 
> 时间：2013-02-22T12:11:26.003
> 
> 标签：javascript, jquery, html, css

我在使用这个 JS / Jquery 脚本时遇到了一些问题，昨天它完全可以工作，但是今天，它就不能正常工作了。

加载`.gif`淡入，但不会淡出...

这是我的 HTML

```
...
 <div class="banner">
    <img src="img/selosiade.png"/><br />
    <form>
        <input id="username" class="login" type="text" name="username" autocapitalize="off" placeholder="Nome de Usu&aacute;rio"><br />
        <input id="password" class="login" type="password"  name"password" autocapitalize="off" placeholder="Senha"><br />
        <input type="button" value="Login" onClick="login.db();">
        <img id="loading" src="img/loading.gif" />
... 
```

（所有标签都正确关闭）

这是设置为#loading id 的内容。

```
#loading{
    display:none;
    z-index:999;
    margin-top:5px;
    margin-left:50px;
    position:absolute;
} 
```

这是`login.db()`脚本：

```
var login = {
    db: function () {
        $('#loading').fadeIn(800, function () {

            if (($('#username').val().length === 0) && ($('#password').val().length === 0)) {
                $('#user_pass_vazio').fadeIn(800).delay(800).fadeOut(800);
                $('#loading').delay(800).fadeOut(800);
            } else if ($('#username').val().length === 0) {
                $('#user_vazio').fadeIn(800).delay(800).fadeOut(800);
                $('#loading').delay(800).fadeOut(800);
            } else if ($('#password').val().length === 0) {
                $('#pass_vazio').fadeIn(800).delay(800).fadeOut(800);
                $('#loading').delay(800).fadeOut(800);
            }

            var pass1 = $('#password').val();
            var pass = CryptoJS.SHA1(pass1);
            var user = $('#username').val();

            var flag = false;
            $.ajax({
                url: "http://apt-ghaschel.webatu.com/php/check.php",
                type: "POST",
                async: false,
                data: {
                    user: user,
                    pass: pass
                },
                success: function (msg) {
                    var b = msg.match(/^.*$/m)[0];
                    $('#store').text(b);
                    flag = true;
                }
            });

            if (flag) {
                return;
            }

            b = $('#store').text();
            if (b == '1') {
                $('#login_certo').fadeIn(800).delay(800).fadeOut(800, function () {
                    $('div.banner').fadeOut(800, function () {
                        var encrypted = CryptoJS.AES.encrypt(pass, a);
                        $.cookie('username', user, {
                            expires: 365
                        });
                        $.cookie('username', encrypted, {
                            expires: 365
                        });
                        window.open("unidades.html?username=" + user + "");
                    });
                });
            } else if (b == '2') {
                $('#login_errado').fadeIn(800).delay(800).fadeOut(800, function () {});
            } else {
                $('#erro_desconhecido').fadeIn(800).delay(800).fadeOut(800);
            }
        });
    }
} 
```

抱歉，如果这很愚蠢，但我可以弄清楚出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:29:54.430

当我在你的小提琴中禁用**CryptoJS**时，淡出工作正常。

顺便说一句，登录表单 div 在开始时不会淡入。我建议你使用

```
$(document).ready(function() {
    pisca.telalogin();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T13:32:34.160

检查这是否对您有帮助，使用

`$("#loading").stop().fadeOut(800);`

代替

`$("#loading").delay(800).fadeOut(800);`

# delphi - 将货币四舍五入

> ID：15023973
> 
> 赞同：1
> 
> 时间：2013-02-22T12:11:41.123
> 
> 标签：delphi, delphi-xe, rounding, truncation

我有以下代码来舍入货币

```
function MyRound(value :currency) : integer;

begin
  if value > 0 then
    result := Trunc(value + 0.5)
  else
    result := Trunc(value - 0.5);
end; 
```

到目前为止它运行良好，我现在的问题是，如果我想对像**999999989000.40**这样的货币进行舍入，它会给出负值，因为 Truc 采用 int 并且 MyRound 也返回 int。

我可能的解决方案是将货币转换为字符串并在**.** 并将字符串转换回货币。这是一个正确的方法吗？我是delpi的新手，所以请帮帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T12:48:12.113

从我的角度来看，你有两个选择：

1.  正如大卫赫弗南指出的那样，您使用该`Round`功能；
2.  您可以使用该`SimpleRoundTo`功能，如此[处](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Math.SimpleRoundTo)所述。的优点`SimpleRoundTo`是它接收 , 和数据类型的参数`Single`，`Double`并且`Extended`它们可以很好地转换这些数字。

您不需要任何类型转换。您已经可以使用许多舍入函数。只需四舍五入所需的数字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T12:25:34.777

你把事情复杂化了。您可以简单地使用`Round`：

```
program Project1;
{$APPTYPE CONSOLE}

uses
  SysUtils;

var
  C: Currency;

begin
  C := 999999989000.4;
  Writeln(Round(C));
  C := 999999989000.5;
  Writeln(Round(C));
  C := 999999989000.6;
  Writeln(Round(C));
  C := 999999989001.4;
  Writeln(Round(C));
  C := 999999989001.5;
  Writeln(Round(C));
  C := 999999989001.6;
  Writeln(Round(C));
  Readln;
end. 
```

哪个输出

```
999999989000
999999989000
999999989001
999999989001
999999989002
999999989002

```

如果您不想要银行家的四舍五入，并且您确实想要您的`Trunc`逻辑，那么您确实需要编写自己的函数。但是你的函数的问题是它被截断为 32 位整数。使函数返回一个 64 位整数：

```
program Project1;
{$APPTYPE CONSOLE}

uses
  SysUtils, Math;

var
  C: Currency;

function MyRound(const Value: Currency): Int64;
begin
  if Value > 0 then
    result := Trunc(Value + 0.5)
  else
    result := Trunc(Value - 0.5);
end;

begin
  C := 999999989000.4;
  Writeln(MyRound(C));
  C := 999999989000.5;
  Writeln(MyRound(C));
  C := 999999989000.6;
  Writeln(MyRound(C));
  C := 999999989001.4;
  Writeln(MyRound(C));
  C := 999999989001.5;
  Writeln(MyRound(C));
  C := 999999989001.6;
  Writeln(MyRound(C));
  Readln;
end. 
```

```
999999989000
999999989001
999999989001
999999989001
999999989002
999999989002

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T08:28:39.117

看看约翰赫伯斯特的四舍五入程序。它们几乎提供您可能想要的任何类型的舍入，例如：

```
drNone,    {No rounding.}
drHalfEven,{Round to nearest or to even whole number. (a.k.a Bankers) }
drHalfPos, {Round to nearest or toward positive.}
drHalfNeg, {Round to nearest or toward negative.}
drHalfDown,{Round to nearest or toward zero.}
drHalfUp,  {Round to nearest or away from zero.}
drRndNeg,  {Round toward negative.                    (a.k.a. Floor) }
drRndPos,  {Round toward positive.                    (a.k.a. Ceil ) }
drRndDown, {Round toward zero.                        (a.k.a. Trunc) }
drRndUp);  {Round away from zero.} 
```

我现在不能给你一个链接，但是谷歌：十进制舍入 John Herbster 我认为他最新的舍入例程在 DecimalRounding_JH1.pas 中。他对浮点舍入的讨论（Embarcadero 网站上的某个地方是“必读”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T15:12:22.453

这是我实际使用的（很想听听这种方法是否有任何问题！）：

```
function RoundingFunction(X: Real): Int64;
begin
  Result := Trunc(SimpleRoundTo(X, 0));
end; 
```

# c# - 想要将文字值访问到 javascript

> ID：15023975
> 
> 赞同：1
> 
> 时间：2013-02-22T12:11:47.340
> 
> 标签：c#, c#-4.0, asp.net-4.0, literals

我在页面上有一个文字控件（上面有一些数据）。我想用 javascript 访问它并想在上面放一些文本。请告诉我如何在 JavaScript 中访问文字控制。我正在尝试使用以下代码-

```
<asp:Literal  ID="lblPerInstanceListing" runat="server"></asp:Literal> 
```

Javascript：

```
 var value= document.getElementById('<%=lblPerInstanceListing.ClientID %>') 
```

我由此得到空值返回。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T12:19:13.190

ASP.NET Literal 控件本身不会将任何 HTML 插入网页。您的 Literal 控件是您将在后面的代码中设置的文本或 HTML 的占位符。

您应该将文字包装在 DIV 或 SPAN 中，并为其提供 ID 并在 JavaScript 中引用该 DIV 或 SPAN

网络表格：

```
<span id="yourId"><asp:Literal  ID="lblPerInstanceListing" runat="server"></asp:Literal></span> 
```

JavaScript： **通过此代码解决。**

```
var value= document.getElementById('yourId').innerText; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-17T16:54:00.927

```
<span id="yourId" runat="server"></span> 
```

js：

```
var value= document.getElementById('yourId').innerHTML; 
```

使用此代码不是更好吗？如果需要，您可以将 span enableviewstate 设置为 false。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-22T12:16:21.917

这是一个`Literal`。它将文字 HTML 呈现到页面。它不会呈现任何与`ClientID`您可以在客户端访问的容器匹配的容器。

将 a `div`or`span` *放入*带有您可以使用的 ID 的文字中，或者使用例如 a `Label`or`Panel`控件来渲染包装`span`或者`div`您可以使用。

# php - jquery 甘特图插件

> ID：15023978
> 
> 赞同：2
> 
> 时间：2013-02-22T12:11:49.870
> 
> 标签：php, jquery, json, gantt-chart

### 情况

我正在使用[这里](http://taitems.github.com/jQuery.Gantt/)的 jQuery 甘特图插件并将其与我拥有的 PHP 站点集成。在设置演示方面没有问题；但是，当我尝试为插件提供一些我自己的数据时，它会抛出以下错误：

```
TypeError: e is undefined 
```

现在，我相信由于 JSON 对象对插件不熟悉而引发了上述错误，但是我似乎无法正确打包它。

### 我的 JSON 数据

![我的 json](../Images/2259b6cb11ec4a4249cced9b6b022a24.png)

### 演示 JSON 数据

![演示 JSON](../Images/c5fcbd37858e5a6bd598893220d35b98.png)

现在，您可以看到除了一些差异之外，我已经非常接近标记了。接下来是我用来生成它的 PHP 代码。

```
$aryOutput = array('source' => array());
if($aryTasks) {
    foreach($aryTasks as $aryTask) {

        $aryOutput['source'][] =  array(
            'name' => $aryTask['task_stage'],
            'desc' => $aryTask['task_title'],
            'values' => array(array(
            'to' => '/Date('.time($aryTask['task_projected_end_timestamp']).')',
            'from' => '/Date('.time($aryTask['task_projected_start_timestamp']).')',
            'desc' => $aryTask['task_description'],
            'label' => $aryTask['task_description']
        ))
        );
    }            
}
$strJSON = json_encode($aryOutput, JSON_UNESCAPED_SLASHES); 
```

请任何人提供一些智慧的珍珠来解决这个问题。在旁注中，从另一个问题中，我看到课程必须是甘特图。这不是问题，我可以让插件使用不同的数据集。

谢谢

### 编辑

我注意到日期字段上有一个额外的斜线有一点不同。编辑代码添加后，仍然出现错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T03:30:19.090

根据需要检查完整交付的 JSON 结构。在上面的例子中，很可能是这样的输出：

```
source : { source : { ... } } 
```

这会导致与插件混淆，因为它是意外数据。

# iphone - 如何删除表格视图中的单元格

> ID：15023979
> 
> 赞同：2
> 
> 时间：2013-02-22T12:11:51.973
> 
> 标签：iphone, ios

有人可以建议我的代码中有什么问题.....

self.modelClass.foldersAray 有一个对象，tableview 有一个部分和一行

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath

{

    if (editingStyle == UITableViewCellEditingStyleDelete) {

        // Delete the row from the data source
        [self.tableview setEditing:YES animated:YES];

        [self.modleClass.foldersAray removeObjectAtIndex:indexPath.row];

        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:YEs];

        [tableView reloadData];
   }
} 
```

我收到如下错误。

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid update: invalid number of rows in section 0\.  The number of rows contained in an existing section after the update (1) must be equal to the number of rows contained in that section before the update (1), plus or minus the number of rows inserted or deleted from that section (0 inserted, 1 deleted) and plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out).' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:19:19.573

这样做，

```
-(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{

      if (editingStyle == UITableViewCellEditingStyleDelete) {

          [self.modleClass.foldersAray removeObjectAtIndex:indexPath.row];

          [tableView reloadData];
      }
} 
```

够了…………

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T12:23:39.897

如果您的 tableView 基于`foldersAray`，则从此数组中删除一个对象并重新加载 tableview 将导致删除此单元格。您可以删除该行：

```
[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:YEs]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T12:31:05.733

如果你想要动画试试这个，如果你不想要动画使用@Mountain Lion 的答案。

```
 -(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle
 forRowAtIndexPath:(NSIndexPath *)indexPath  {

       if (editingStyle == UITableViewCellEditingStyleDelete) 
         {
             [self.modleClass.foldersAray removeObjectAtIndex:indexPath.row];
             [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]withRowAnimation:UITableViewRowAnimationFade];
       } 
 } 
```

如果你在导航上有编辑按钮，你应该打电话

> [self.tableView setEditing:YES 动画:YES];

在您的方法中开始编辑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T12:18:54.253

此错误意味着您必须更新数据源（包含数据、字典或您使用的任何内容的数组）

例如：删除前有 5 个单元格，dataArray 中有 5 个对象。在调用之前，`deleteRowsAtIndexPaths:`我们必须从与此单元格关联的 dataArray 中删除对象，然后才调用`deleteRowsAtIndexPaths:`。也改为使用`[tableView reloadData]`，使用

```
[tableView beginUpdates];
[tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
[tableView endUpdates]; 
```

PS 我明白了，你从数据源中删除了对象，所以仔细检查一下，也许你错过了什么

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-23T05:43:26.757

如果它占用的内存对您来说无关紧要......那么您可以通过将高度设置为 0 来显着删除（隐藏）单元格。

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.row%2) {
        return 0;
    }
    return 100;
} 
```

PS：上面的虚拟代码将大大删除备用单元格。

# opencv - 提高相机fps？

> ID：15023982
> 
> 赞同：0
> 
> 时间：2013-02-22T12:12:14.093
> 
> 标签：opencv, camera

我需要一个用于实验的眼动仪，这不是必需的，但会大大减少我的工作量。所以我想自己动手做一个眼动仪。我的帧率有问题，一个不错的眼动仪可以在@500Hz 或至少200Hz 下工作。

我可以在市场上买到的最高 fps 相机是 200fps，但我想把它推到 500。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:07:29.900

相机的最大 fps 与相机的内部结构有关，因此无法使用软件覆盖它。引用的最大 fps 通常是该相机上可用的最大分辨率，但如果您愿意降低分辨率，通常可以实现更高的帧速率。

# java - 在多台计算机中处理发票编号

> ID：15023988
> 
> 赞同：0
> 
> 时间：2013-02-22T12:12:34.437
> 
> 标签：java, database, invoice

我正在用java开发计费软件。在我的应用程序中，用户打开一个用于创建发票的窗口。

当窗口打开时，它会 从表中获取`MaxID`并返回 a并将其显示在 a 中。现在，当用户每次开始计费时，发票编号将为. 该系统在单用户应用程序中运行良好。`long` `MaxID+1``INVOICE``Jlabel``MaxID+1`

但是当这个应用程序在多台计算机上运行时，就会发生一个很大的问题。例如，当两个用户`userOne`同时`userTwo`打开同一个窗口时，他们将得到相同的`MaxID+1`. 结果，他们俩都将在同一发票号中输入数据。我该如何解决这个问题？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:14:23.957

Race Condition 的经典场景。您需要同步对 MaxId 的访问。根据您的数据库，您需要`Invoice`在访问 MaxId 之前锁定表，并在检索它后解锁它。MaxId 的检索必须是原子的。

# macos - 如何保存网页的屏幕截图？

> ID：15023991
> 
> 赞同：-1
> 
> 时间：2013-02-22T12:12:38.303
> 
> 标签：macos, webpage-screenshot

我想保存网页的屏幕截图。但我不知道如何。就像应用程序熟食一样。在熟食中，当我添加书签时，应用程序会捕获网站并将其保存，例如 p5.delish。我[猜](https://itunes.apple.com/cn/app/delish/id504472899?mt=12)截图来自“.delish”的文件。我怎样才能生成这个文件？或者有人有一些像这个应用程序的样本？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:30:56.620

这可能会对您有所帮助： http: [//allseeing-i.com/ASIWebThumbnail/](http://allseeing-i.com/ASIWebThumbnail/)

> ASIWebThumbnail 是：
> 
> *   用于从网页生成缩略图的命令行工具
> *   在 Cocoa 应用程序中使用该工具的嵌入式版本的 API
> 
> ASIWebThumbnail 使用 Mac OS X 内置的 WebKit 框架来呈现网页。因此，它应该支持 WebKit 支持的任何内容，包括 HTML/XML + CSS、SVG、由 Javascript（Canvas、AJAX、DOM 等）、Java 以及 Flash 和其他插件呈现的内容。

# ruby-on-rails - Rails 中的自定义错误页面未显示漂亮的 404 过期资产（不再存在）

> ID：15023993
> 
> 赞同：2
> 
> 时间：2013-02-22T12:12:46.630
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

当出现错误 500 或 404 时，我会向我的用户显示漂亮的错误页面（[示例） 。](http://note.io/Xpqnyw)我已遵循[本指南](http://ramblinglabs.com/blog/2012/01/rails-3-1-adding-custom-404-and-500-error-pages#comment-802263873)，它适用于不再存在但不适用于过期资产（不再存在）的页面，即 /assets/wood_bg2-7ab28512ecf6eeeb5f3742babca48a7b5.png 之类的图像 - 对于那些，“空”和“显示了“丑陋”的缺失图像（[示例](http://note.io/YgAK6b)），而不是我漂亮的自定义 404 错误页面。

我通过我的 exception_notification gem 得到的错误：

```
An ActionView::MissingTemplate occurred in errors#error_404: Missing template errors/error_404, application/error_404 with {:locale=>[:en], :formats=>[:png], :handlers=>[:erb, :builder, :coffee, :haml]}. 
```

所以也许我只需要“告诉”错误页面/路由它也应该显示我的 png、jpg 等文件的错误页面？

任何想法如何解决这个问题？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-11T17:28:53.480

我曾经实现过 nifty_errorpages gem。它在 github 上可用：[https](https://github.com/mattherick/nifty_errorpages) ://github.com/mattherick/nifty_errorpages 。也许我的实现可以帮助您解决问题。它适用于rails 3.2。如果您有 3.1 简单的源代码，请查看源代码，否则您可以将其添加到 Gemfile 并直接试用。

# performance - 保存 Matlab 矩阵的最快方法

> ID：15023994
> 
> 赞同：5
> 
> 时间：2013-02-22T12:12:49.490
> 
> 标签：performance, file, matlab, save

我正在使用 Matlab 在 C++ 中调用一些外部调用，然后返回一个巨大的计算矩阵。矩阵非常大，我无法访问这个 C++ 程序的源代码。（如果我有，我会立即从 C++ 中保存）

现在，在我的系统上，这个 C++ 程序只用了 1 秒来计算给定的数据并发送回 Matlab，而 Matlab 的 dlmwrite 需要 200-300 秒才能将这个巨大的数组保存在磁盘上。我还有数千个要计算，我想缩短时间。

那么在Matlab中保存最快的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T13:41:39.717

最快的方法可能是 Matlab 的[保存](http://www.mathworks.com/help/matlab/ref/save.html)命令。或者，您可以[将](http://www.mathworks.com/help/matlab/ref/fwrite.html)整个矩阵写入二进制文件。

使用`dlmwrite`将值转换为文本，这需要时间并且需要将更多数据写入磁盘。除非您确实需要该格式的数据，否则不要这样做。请注意，`dlmwrite`如果使用大矩阵而不是在增量写入文件的循环中调用一次会更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T15:56:13.790

如果您想要仅使用 Matlab 的解决方案，我可能会将 fwrite 用于二进制或 fprintf 用于 ASCII。但是，我喜欢在 IO 方面混合使用 Matlab 和 Java，因为这通常更快。我会做类似的事情

```
Java Code
package mypackage.release;

import java.io.DataOutputStream;
import java.io.BufferedOutputStream;
import java.io.FileOutputStream;
import java.io.IOException

public class MatrixWriter {
  public static void write(String fileName, double[] matrix) throws IOException {
    DataOutputStream dos = new DataOutputStream(new BufferedOutputStream(new FileOutputStream(fileName)));
    for (double d : matrix)
      dos.writeDouble(d);
    dos.close();
  }
}

Matlab Code
import mypackage.release.MatrixWriter;
M = get matrix from c++;
MatrixWriter.write('myfile.dat', M(:)); 
```

这是我的想法，但我一直在使用它的变体。希望能帮助到你。

# c# - 如何强制调试器跳过一段代码？

> ID：15023996
> 
> 赞同：4
> 
> 时间：2013-02-22T12:13:00.483
> 
> 标签：c#, .net, vb.net, visual-studio, debugging

我的项目中有大量代码已经调试了 50%。
每次我尝试调试它时，我都必须在不需要的代码之后手动设置断点以跳过它。
有没有办法告诉调试器不要调试那部分代码？对此有任何扩展吗？

让我们面对调试器在第 1500 行。

```
Method1(){
   Line 1500 CODE
   Line 1501 CODE
   ...
   Line 1726 CODE
   Line 1727 CODE
   ...
   Line 2200 CODE
} 
```

我不需要调试 1727 和 2200 之间的行。

**注意：它不仅仅是一件。否则我会很好用手动断点**

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2018-11-08T15:10:14.320

不知道为什么它不在答案中，但是您可以通过**CTRL+SHIFT+F10**设置下一条语句或将黄色箭头拖动到想要的行，并且在下一条语句之前的代码将不会被执行。

[在这里](https://blogs.msdn.microsoft.com/habibh/2009/07/30/debugging-101-how-to-skip-over-code-in-the-visual-studio-debugger/)找到

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-22T12:15:34.167

如果有问题的代码被封装在一个方法中，您可以通过在该方法上应用来跳过该方法[`DebuggerStepThroughAttribute`](http://msdn.microsoft.com/en-gb/library/system.diagnostics.debuggerstepthroughattribute.aspx)。

除此之外，设置断点是如何做到的。

因此，将此代码提取到方法中并将属性应用于它;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-29T13:16:40.693

您也可以单击要跳到的行并按 Ctrl+F10（运行到光标）。它将直接跳转到该行。

# ruby - Ruby Logger 行为怪异并将信息记录到差异

> ID：15023998
> 
> 赞同：1
> 
> 时间：2013-02-22T12:13:02.150
> 
> 标签：ruby, logging

我在我的项目中使用 ruby​​ 记录器，我有 conf.rb 类似于：

```
require 'rubygems'

# initiate the logger file 
$LOG = Logger.new("#{$ROOT_PATH}/log/errors.log", 'daily')  
$LOG.datetime_format = "%Y-%m-%d %H:%M:%S" 
```

更像是一个工人，我正在使用类似worker1.rb的东西：

```
require "#{$ROOT_PATH}/conf.rb"
$LOG.error "test" 
```

现在例如，至于今天，我应该在**error.log**文件中获得所有结果，但我在 log/errors.log.20130221、log/errors.log.20130221.1 和 log/errors 中获得结果.log.20130221.2。工人一直在运行，所以没有重新启动它。

我在 Ubuntu 下使用 ruby​​ ruby​​ 1.9.3p0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:30:22.300

`Logger#datetime_format`引用日志文件（日志格式化程序）中的日期，而不是文件名格式轮换。

旋转文件的文件名被硬编码到 lib - [https://github.com/ruby/ruby/blob/trunk/lib/logger.rb#L645](https://github.com/ruby/ruby/blob/trunk/lib/logger.rb#L645)

您可以重新定义方法，也可以使用 rotatelogs

```
Logger.new(IO.popen("/usr/sbin/rotatelogs -l file_pattern period", 'a')) 
```

出现 .1、.2 扩展名是因为 Logger 已`shift_size`默认设置。一旦日志文件达到该值，日志就会轮换，但由于日期相同，记录器正在添加[数字](https://github.com/ruby/ruby/blob/trunk/lib/logger.rb#L649)以防止冲突。