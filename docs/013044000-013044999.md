# StackOverflow 问答 13044000-13044999

# google-chrome-extension - 如何识别正在播放的 youtube 视频？

> ID：13044008
> 
> 赞同：1
> 
> 时间：2012-10-24T06:33:57.257
> 
> 标签：google-chrome-extension, youtube-api, youtube-javascript-api

在包含多个嵌入 youtube 视频的页面上，

我想根据正在播放的 youtube 视频执行一些操作。

关于检测当前视频信息的任何想法？例如嵌入 youtube url。

所以我试图：

*   获取当前播放视频的嵌入网址
*   根据 url 执行一些操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:14:02.190

You can find all the API for retrieving video information here [https://developers.google.com/youtube/js_api_reference#Retrieving_video_information](https://developers.google.com/youtube/js_api_reference#Retrieving_video_information)

To get the youtube url use either `player.getVideoUrl()` or `player.getVideoEmbedCode()`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T08:21:00.653

mm 我认为您可以使用 Javascript Window.event 和 PHP 来保存数据，我将尝试编写少量代码，然后向您展示该代码。

# jquery - Jquery - 重置倒计时

> ID：13044013
> 
> 赞同：0
> 
> 时间：2012-10-24T06:34:42.513
> 
> 标签：jquery, jquery-plugins, plugins, countdown

我从这个网站[http://davidwalsh.name/jquery-countdown-plugin](http://davidwalsh.name/jquery-countdown-plugin)得到了这个插件，我设法运行倒计时，但是当我点击一个按钮并重置它时，我遇到了停止倒计时的问题。看过一些关于它的文章，但不能真正将它与我的案例联系起来。如果我再次调用该函数，它将显示 4(old counter) --> 9 (new counter) -->3 (old counter) --> 8 (new counter)... 一起显示混乱。我只需要在单击按钮时停下来重置计数器。

倒计时码

```
function countDown(){
  $('#countdown').countDown({
    startNumber:10,
    callBack: function(me) {
      $(me).text('Next!').css('color','#090');        
      if(quesNo < lenLevel ){
        //database transaction
      }else {
        alert('finish! You got correct: '+ correct);
      }
    }
  }); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:39:18.800

你能用这个代替插件吗 `var counter = setInterval(startcounter, 10000);`//这里每10秒调用一次函数你可以改变

/* 稍后单击执行此操作 */

```
clearInterval(counter ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:04:01.137

在您的按钮处理程序中，您需要在开始新的倒计时之前“停止”原始倒计时。在 countDown 函数中添加以下一行应该可以解决您的问题。

```
function countDown(){
  $('#countdown').stop();
  $('#countdown').countDown({ ... 
```

# ios - Apple MDM 推送通知令牌何时生成？

> ID：13044018
> 
> 赞同：1
> 
> 时间：2012-10-24T06:35:09.393
> 
> 标签：ios, apple-push-notifications, mdm

我知道，为了接收推送通知，iOS 应用程序必须向 APN 服务注册，它将接收此令牌，然后将其转发到需要向应用程序发送推送通知的服务器。

但是，当谈到 MDM 推送通知时，我们没有在设备上运行应用程序。因此，当设备即将向 MDM 服务器注册时，它会向服务器发送其令牌。我的问题是，它在哪里/如何或在什么时候收到这个令牌？

我正在尝试发送 MDM 推送通知，但我不断收到来自 APN 服务的关于令牌无效的错误。

请让我知道您对此的看法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:22:36.447

在初始注册期间，设备将发送一个 XML 字符串，其中一个属性为`PushMagic`. 您需要将此值保存在您的 MDM 数据库中，并在您想要“ping”受管设备要求它与 MDM 服务器签入时使用它。

# android - Android：如何在相同的布局中将状态从按钮链接到文本视图的状态

> ID：13044019
> 
> 赞同：1
> 
> 时间：2012-10-24T06:35:09.003
> 
> 标签：android, android-layout, android-widget

我已经为可以具有图像和文本的按钮开发了一个自定义控件，因为我没有找到可以做到这一点的标准小部件。它工作得很好，但我现在遇到的是，当单击按钮时，文本视图不会将其状态更改为按下。我希望有这种行为，以便我可以为 textview 应用[ColorStateList](http://developer.android.com/guide/topics/resources/color-list-resource.html)，以便在按下按钮时文本颜色会发生变化。这是我的自定义按钮的 xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/image_text_button"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:background="@drawable/btn_background"
    android:visibility="visible"

     >

    <LinearLayout android:id="@+id/layoutContent"
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:orientation="vertical"
        android:padding="3dp"
        android:duplicateParentState="true">

        <ImageView
            android:id="@+id/imageView"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="2"
            android:duplicateParentState="true"
            android:gravity="bottom|center_horizontal"
            android:src="@drawable/testing_teaser1"
             />

        <TextView
            android:id="@+id/textField"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:duplicateParentState="true"
            android:gravity="center"
            android:text="This is a ImageTextButton"
            android:textColor="@color/black" />

    </LinearLayout>

    <Button
        android:id="@+id/button"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/btn_bg_selector"
        />

</FrameLayout> 
```

如何将 textview 链接到按钮状态？`android:duplicateParentState="true"`不起作用，因为按钮不是 textview 的父级。

干杯老兄

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T06:49:14.497

只需将 设置`OnClickListener`为`LinearLayout`or`FrameLayout`而不是将其设置为`Button`，在`Button`xml 中，您还应该添加 `android:duplicateParentState="true"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T06:42:01.183

你知道有一个小部件可以做到这一点吗？( [`ImageButton`](http://developer.android.com/reference/android/widget/ImageButton.html))

如果您仍想使用自定义组件，则应将“@drawable/btn_bg_selector”分配给您的父级`FrameLayout`并制作该布局`clickable`而不是`Button`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-24T06:44:29.533

在 xml for button 添加属性

```
android:onClick="clickAction" 
```

并在活动中包括以下功能

```
public void clickAction(View view){
   //Code whatever you want when the button is clicked
} 
```

# visual-studio-2012 - 从身份和访问工具中使用 LocalSTS 时的多个声明值

> ID：13044024
> 
> 赞同：4
> 
> 时间：2012-10-24T06:35:24.510
> 
> 标签：visual-studio-2012, wif

作为我们从 VS 2010 迁移到 VS 2012 的一部分，我们已经开始在开发阶段使用 Identity and Access Tools 中的 LocalSTS 作为 STS。它很容易设置，但是我们确实遇到了一个问题，这就是将其配置为在生成的令牌中为每种声明类型包含多个声明值。典型的配置可能如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="localSTSConfiguration" type="System.IdentityModel.Tools.LocalSTS.LocalSTSConfiguration, LocalSTS, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </configSections>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>
  <localSTSConfiguration port="13248" signingCertificate="LocalSTS.pfx" signingCertificatePassword="LocalSTS" issuerName="LocalSTS" tokenFormat="Saml11">
    <claims>
      <add type="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name" displayName="Name" value="Terry" />
      <add type="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname" displayName="Surname" value="Adams" />
      <add type="http://schemas.microsoft.com/ws/2008/06/identity/claims/role" displayName="Role" value="Member" />
      <add type="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress" displayName="Email" value="terry@contoso.com" />
      <add type="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier" displayName="Name Identifier" value="terry@contoso.com" />
    </claims>
  </localSTSConfiguration>
</configuration> 
```

以上将毫无问题，但如果我希望用户同时成为成员角色和管理员角色的成员，我该如何表达。我尝试了以下方法，但它只包含给定声明类型的最后一个指定声明值。因此，结果是给定下面的配置，用户将只是管理员角色的成员，而不是成员角色。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    ...
  </configSections>
  <startup>
    ...
  </startup>
  <localSTSConfiguration port="13248" signingCertificate="LocalSTS.pfx" signingCertificatePassword="LocalSTS" issuerName="LocalSTS" tokenFormat="Saml11">
    <claims>
      ...
      <add type="http://schemas.microsoft.com/ws/2008/06/identity/claims/role" displayName="Role" value="Member" />
      <add type="http://schemas.microsoft.com/ws/2008/06/identity/claims/role" displayName="Role" value="Administrator" />
      ...
    </claims>
  </localSTSConfiguration>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:08:05.500

似乎直到 LocalSTS dll 版本 4（包含在 Identity and Access Tool 1.01 中）多个声明值是不可能的，但是使用 LocalSTS dll 版本 5（包含在 Identity and Access Tool 1.02 中）已添加此功能。该工具的 1.02 版于 10 月 23 日发布，可在此处找到[http://visualstudiogallery.msdn.microsoft.com/e21bf653-dfe1-4d81-b3d3-795cb104066e?SRC=VSIDE](http://visualstudiogallery.msdn.microsoft.com/e21bf653-dfe1-4d81-b3d3-795cb104066e?SRC=VSIDE)。

# php - @mail 不在 php 中发送邮件

> ID：13044035
> 
> 赞同：0
> 
> 时间：2012-10-24T06:36:51.640
> 
> 标签：php, email

这是我第一次使用邮件功能。我尝试使用它发送邮件，代码告诉我它“已成功发送”，但我没有收到任何邮件。我很困惑阅读很多关于此的文章。请帮我。

```
<?php
  if(isset($_POST['author'])&& isset($_POST['subject'])&& isset($_POST['text'])) {
    //Email
    $email_to = "lucy@yahoo.com";
    $email_subject = "Query From HYPERMARKETS";
    $name = $_POST['author']; // required
    $sub = $_POST['subject']; // required
    $comments = $_POST['text']; // required

    echo "POST:".$name.$sub.$comments;
    $error_message = "";

    $string_exp = "^[a-z .'-]+$";
    if(!strcmp($string_exp,$name)) {
      $error_message .= 'The Name you entered does not appear to be valid.<br />';
    }

    if(strlen($comments) < 5) {
      $error_message .= 'The Comments you entered do not appear to be valid.<br />';
    }

    if(strlen($error_message) > 0) {
      echo ("<center><table border=1 cellspacing=5 cellpadding=5><tr><th>$error_message</th></tr></table></center>");
    }
    $email_message = "Form details below.\n\n";
    $email_message .= "Name: ".$name."\n";
    $email_message .= "Subject: ".$sub."\n";
    $email_message .= "Comments: ".$comments."\n";

    // create email headers
    $headers = "From: mary@yahoo.com \r\n Reply-To: mary@yahoo.com \r\n" ;
    if(@mail($email_to, $email_subject, $email_message, $headers))
      echo "<center><table border=1 cellspacing=5 cellpadding=5><tr><th>MESSAGE SENT SUCCESSFULLY</th></tr></table></center>";
    else
      echo "<center><table border=1 cellspacing=5 cellpadding=5><tr><th>MESSAGE NOT SENT</th></tr></table></center>";
  }
  else
    echo ("<center><table border=1 cellspacing=5 cellpadding=5><tr><th>FILL ALL THE FIELDS..!!</th></tr></table></center>");
?> 
```

嘿，我已将我的 php.ini 文件配置为

```
[mail function]

   sendmail_from = postmaster@localhost
   SMTP = localhost
   smtp_port = 25
   sendmail_path = "\"C:\xampp\sendmail\sendmail.exe\" -t"
   sendmail_path = "C:\xampp\mailtodisk\mailtodisk.exe" 
```

它仍然不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T06:40:02.870

mail() 实际上并不发送邮件。它只是将您生成的消息提交给主机系统的邮件子系统来处理发送。true 结果表明邮件发送子系统接受该消息为有效。它并不表示消息已发送。

您需要查看您的邮件假脱机以查看邮件是否在那里等待发送，并查看系统的邮件日志以查看它在尝试发送您的 PHP 生成的邮件时是否生成错误。

即使消息发送成功，也不代表一定会收到。它可能被垃圾邮件过滤器捕获，或被服务器拒绝，或者只是简单地发送到错误的地址。它可能已被发送并最终被收件人的电子邮件客户端标记为垃圾邮件。任何数量的事情都可以阻止消息被发送，来自邮件的真实响应并不表明它已成功发送。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T13:17:44.437

**披露：我是 AlphaMail 背后的开发者之一**

由于您没有错误可继续，因此要说出这里的问题并不容易。因此，我建议手动尝试从您的服务器连接到 SMTP 服务器并[手动发送电子邮件](http://www.wikihow.com/Send-Email-Using-Telnet)。这样，您将掌握错误而不是事后猜测。

如果您不想这样做，只想让它“工作”，我建议您使用事务性电子邮件服务，例如：

*   [阿尔法邮件](http://comfirm.se/alpha-mail/)
*   邮筒
*   邮资应用

**为什么？**

*   您不必过多考虑电子邮件传递。
*   统计数据。让您跟踪总发送/点击/打开/退回。
*   通常基于 Web 服务而不是 SMTP。即更容易处理。
*   更简洁的代码（至少如果您使用 AlphaMail 将数据与表示分离）。
*   可扩展且面向未来。

如果您选择使用 AlphaMail，您可以使用[AlphaMail PHP-client](https://github.com/comfirm/alphamail-php5-client)。

**例子：**

```
include_once("comfirm.alphamail.client/emailservice.class.php");

$email_service = AlphaMailEmailService::create()
    ->setServiceUrl("http://api.amail.io/v1")
    ->setApiToken("YOUR-ACCOUNT-API-TOKEN-HERE");

$person = new stdClass();
$person->userId = "1234";
$person->firstName = "John";
$person->lastName = "Doe";
$person->dateOfBirth = 1975;

$response = $email_service->queue(EmailMessagePayload::create()
    ->setProjectId(12345) // Your AlphaMail project (determines template, options, etc)
    ->setSender(new EmailContact("Sender Company Name", "from@example.com"))
    ->setReceiver(new EmailContact("Joe Doe", "to@example.org"))
    ->setBodyObject($person) // Any serializable object
); 
```

AlphaMail 的另一个优点是您可以直接在[AlphaMail Dashboard](http://amail.io/login.php)中编辑您的模板，并且您可以使用[Comlang 模板语言](http://docs.amail.io/?section=comlang)来格式化您的电子邮件。

```
<html>
    <body>
        <b>Name:</b> <# payload.firstName " " payload.lastName #><br>
        <b>Date of Birth:</b> <# payload.dateOfBirth #><br>

        <# if (payload.userId != null) { #>
            <a href="/sign-up">Sign Up Free!</a>
        <# } else { #>
            <a href="/login?id=<# payload.userId #>">Sign In</a>
        <# } #>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T06:40:28.253

你曾经在这个服务器上发送过邮件吗？如果不：

您必须`mail function`在 php.ini 中配置部分。

首先，您必须支持发送和接收电子邮件的 SMTP。其次，您必须在 php.ini 文件中配置`SMTP`和值。`smtp_port`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-09T12:18:06.683

某些主机需要邮件的额外参数。可能就是这样。

```
 $ffrom = '-fmary@yahoo.com';
    if(@mail($email_to, $email_subject, $email_message, $headers, $ffrom)); 
```

这不是很常见，但我不得不处理它，而且我花了很长时间才诊断出来，所以我想我会分享它以防万一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-14T19:51:32.940

首先，我会确保端口 25 是开放的。[通过连接到WhatsMyIP.org](http://www.whatsmyip.org/) （从服务器使用的同一 Internet 连接）确定服务器的公共 IP 地址，然后从命令行尝试以下操作：

```
telnet xxx.xxx.xxx.xxx 25 
```

（将 xxx.xxx.xxx.xxx 替换为 WhatsMyIP.org 的 IP）

如果您可以连接，那么此答案不适合您。对不起。

如果没有，请检查所有本地防火墙设置，以确保端口 25 在您端打开。端口 25 也可能被 ISP 阻止。事实证明，一些（也许是大多数）ISP 默认会阻止端口 25 以防止垃圾邮件。

配置错误的电子邮件服务器很容易被入侵并用于垃圾邮件僵尸网络。我不得不打电话给 Comcast 并跳过障碍让他们解除对 25 端口的阻塞，然后我才能让我的家庭电子邮件服务器正常工作。（[关于端口 25 的康卡斯特论坛帖子](http://forums.xfinity.com/t5/E-Mail-and-Xfinity-Connect-Help/Port-25-no-longer-works-not-using-Comcast-mail-server-have-my/td-p/1612631)）。

如果那不能让您继续前进，我会再看一下电子邮件服务器配置。

# php - php 中 ftp 的替代方案

> ID：13044049
> 
> 赞同：3
> 
> 时间：2012-10-24T06:38:32.967
> 
> 标签：php, ftp

所以我正在写一个脚本，这将`fwrite()`是一个文件。然后需要将该文件发送到另一台服务器。我想我会使用 ftp 包装器，直接在远程主机上打开文件。

这就是问题所在。我的虚拟主机只允许`url_fopen`使用端口 80，并且它们不允许任何`ftp_`功能。

所以我的问题是：我该怎么做才能将此文档传输到另一台服务器？我可能会或可能不会被允许在要接收文件的服务器上制作某种脚本，但我怀疑我能做任何有用的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:57:45.443

跳过关于您的托管有多糟糕的每个注释，几乎没有其他方法可以做到这一点：

*   在远程服务器上以被动模式在端口上运行 ftp 服务器`80`（绝望的情况需要绝望的措施），但是由于您无法使用任何`ftp`命令，因此您必须`ftp`从头开始实现或使用完整的 php 实现（不是最好的方法） ）。
*   [使用 SOAP](http://php.net/manual/en/book.soap.php)
*   [构建`POST`请求并模拟上传文件](https://stackoverflow.com/a/4270282/1149736)（我个人最喜欢的）

*如果您要使用第二个或第三个（我推荐第三个），请不要忘记实施[authentication](http://php.net/manual/en/features.http-auth.php)。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:47:40.157

正确答案已经说了。

1）找到一个体面的主机
2）写一个脚本在远程服务器上接受它。
3）在服务器上编写一个脚本，然后使用它将它反弹到它需要结束的服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T06:57:17.863

如果你有 php 并通过端口 80 访问，至少你还有选择。但这一切都取决于另一台服务器。例如，您可以从您的第一台服务器上传普通文件：http: [//us2.php.net/manual/en/function.http-post-fields.php](http://us2.php.net/manual/en/function.http-post-fields.php)

# bash - 无法理解“>>”和“&”在此 BASH 行中的作用

> ID：13044053
> 
> 赞同：1
> 
> 时间：2012-10-24T06:38:56.017
> 
> 标签：bash, shell

我正在尝试调试为在 BASH 中使用而编写的脚本。我对以下行在做什么感到有些困惑。

```
ffmpeg -threads 1 -f yuv4mpegpipe -i ./tmp/dvd-slideshow_temp_3203/dvdss-pipe-3203 -target ntsc-dvd -r 29.97 -an -aspect 4:3 -s 480 -y -bf 2 -f mpeg2video ./tmp/dvd-slideshow_temp_3203/video.mpg >> /dev/null 2>&1 & 
```

真正让我困惑的是最后一点：

```
>> /dev/null 2>&1 & 
```

如果有人能告诉我这条线在做什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T06:44:43.490

您发布的行中发生了三件事。

这会将标准输出附加到 /dev/null：

```
>> /dev/null 
```

这里，文件描述符 2 (stderr) 指向文件描述符 1 (stdout)。由于 bash 处理从右到左的重定向，因此在 stdout 重定向之后进行此操作很重要。

```
2>&1 
```

最后，`&`在后台运行命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T06:47:32.697

看看这个：[http ://www.gnu.org/software/bash/manual/bashref.html](http://www.gnu.org/software/bash/manual/bashref.html)

```
>>/dev/null 
```

这会将进程的标准输出重定向到空设备。由于 dev/null 丢弃了写入它的所有数据，因此您只是丢弃了标准输出。如果您愿意，可以在此处使用其他文件

```
2>&1 
```

这说：同样重定向标准错误。所以你也抛弃了错误流

最后：

```
& 
```

这会将进程与终端实例分离。试试这个看看它是如何工作的：

```
gedit 
```

和

```
gedit & 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:43:28.383

`>>`表示您希望将命令的输出重定向（附加）到某些东西。在您的情况下，您希望将输出附加到`/dev/null`.

下一部分`2>&1`意味着您将**标准错误管道**重定向到**标准输出管道**。最后`&`表示您要将命令发送到后台。

以下内容会做同样的事情，`2>> /dev/null 1>> /dev/null &`但你可以看到它更长而且不像你的那样可读。

# velocity - 使用变量值访问 spring 消息

> ID：13044058
> 
> 赞同：1
> 
> 时间：2012-10-24T06:39:19.110
> 
> 标签：velocity

```
#if( $r.CATEGORY2 == 101)   #springMessage('item_1')
                        #elseif( $r.CATEGORY2 == 102)   #springMessage('item_2')
                        #elseif( $r.CATEGORY2 == 103)   #springMessage('item_3')
                        #elseif( $r.CATEGORY2 == 104)   #springMessage('item_4')
                        #elseif( $r.CATEGORY2 == 105)   #springMessage('item_5') 
```

你会看到哪个部分效率很低。

所以我想改变它整洁和简单的方式是这样的：

```
#springMessage('item_${r.CATEGORY2.charAt[2]}') 
```

但是上面的代码不起作用。请改正。谢谢你。

# android - 在 TextView 中具有阴影效果的透明

> ID：13044061
> 
> 赞同：0
> 
> 时间：2012-10-24T06:39:31.653
> 
> 标签：android, textview

我的布局中有一个 textView 我希望它显示它背后的内容，但仍然具有阴影效果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:44:23.543

textView 中的这个阴影并且还设置了背景透明。

```
<TextView android:layout_width="fill_parent" android:shadowRadius="2"  android:shadowColor="#0000ff"
              android:shadowDx="2"
              android:shadowDy="4" android:id="@+id/EditText01" android:layout_height="wrap_content" /> 
```

谢谢。

# html - 应用程序缓存或浏览器缓存

> ID：13044063
> 
> 赞同：0
> 
> 时间：2012-10-24T06:39:41.967
> 
> 标签：html, browser-cache

我正在严重依赖应用程序缓存来构建我正在构建的 Web 应用程序。我注意到一些我没有在应用缓存中明确提到的项目（比如一些图像文件）正在被浏览器缓存缓存。

所以我面临这个问题：我应该让浏览器缓存管理这些图像文件，还是应该将它们也包含在我的缓存清单中？权衡性能明智吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T23:36:35.637

鉴于您说您严重依赖应用程序缓存，我建议您也将这些图像添加到缓存清单中。

假设与这些图像一起发送了正确的缓存 http 标头，则普通浏览器缓存在加快网站速度时工作正常。但是，浏览器也会偶尔检查这些文件是否已更改。特别是当用户点击 ctrl-f5（刷新）时。

应用程序缓存在缓存方面更具侵略性，因此我将在缓存清单中添加以下内容：

```
CACHE:
/path/to/images/ 
```

（该路径后面不需要 *。）

上面的方法可能是首选，因为它会降低链接到不存在文件的风险，因此如果提到的任何文件返回的不是 http 状态码200 范围。

基本上，使用 Appcache 将提高网页性能，并且比普通缓存浏览器已经做的更可靠。

# java - Java - 无法更新 JLabel 的文本

> ID：13044065
> 
> 赞同：3
> 
> 时间：2012-10-24T06:39:50.453
> 
> 标签：java, swing, debugging, constructor, jlabel

我有我的商店类，其中我可以将商品添加到购物车，然后它将增加购物车商品编号和总金额。

我还有一个查看购物车按钮之类的东西，如果单击它，它将显示另一个框架，其中显示购物车中的物品。当我单击此购物车框架中的删除按钮时，我计划从前一框架中减少计数和总金额，但我在总价格所在的 jLabel 中使用的 setText 方法不起作用。

我从购物车框架中调用此方法，然后在我单击删除按钮时传递要删除的价格

```
public void updateTotalAmount(double deduct){
    System.out.println("updateTotalAmount - "+deduct);
    tAPriceL.setText(String.valueOf(deduct)); //Total amount price label
    cICountL.setText(String.valueOf(--cICount)); //cart item count label
} 
```

system.out 行是唯一有效的语句，其余的则无效。

当我尝试像这样交换代码时。

```
public void updateTotalAmount(double deduct){
    tAPriceL.setText(String.valueOf(deduct)); //Total amount price label
    cICountL.setText(String.valueOf(--cICount)); //cart item count label
    System.out.println("updateTotalAmount - "+deduct);
} 
```

system.out 现在不起作用，所以我猜 setText 部分有问题。

我无法弄清楚问题出在哪里。谁能帮我解决这个问题？

这是这个的摘要..对于主要商店类..示例我有 5000 件物品

```
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class NewClass extends JFrame implements ActionListener {

    JLabel tAPrice = new JLabel("5000");
    JButton viewcart = new JButton("view cart");

    public NewClass() {
        this.setLayout(new FlowLayout());
        add(tAPrice);
        add(viewcart);
        viewcart.addActionListener(this);
    }

    public static void main(String[] args) {
        NewClass n = new NewClass();
        n.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        n.setSize(1150, 730);
        n.setVisible(true);
    }

    public void update(double deduct) {
        System.out.println("updated");
        tAPrice.setText(String.valueOf(Double.parseDouble(tAPrice.getText())
            - deduct));
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == viewcart) {
            Cart2 c = new Cart2();
            c.setVisible(true);
            c.setSize(250, 230);
        }
    }
} 
```

对于购物车类...例如，我想从总金额中删除 1000

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;

public class Cart2 extends JFrame implements ActionListener {

    JButton remove = new JButton("remove");

    public Cart2() {
        add(remove);
        remove.addActionListener(this);
    }

    public static void main(String[] args) {
        Cart2 r = new Cart2();
        r.setVisible(true);
        r.setSize(250, 230);
        r.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == remove) {
            NewClass nc = new NewClass();
            nc.update(1000);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T07:31:29.057

在`Cart2.actionPerformed()`您分配 new`NewClass()`而不是使用`NewClass`. 尝试将实例传递`NewClass`给`Cart2`构造函数。

例如：

```
public class Cart2 extends JFrame implements ActionListener {
    JButton remove = new JButton("remove");
    NewClass newClass;

    public Cart2(NewClass newClass) {
        this.newClass = newClass;
        add(remove);

        remove.addActionListener(this);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == remove) {
            // NewClass nc = new NewClass();
            newClass.update(1000);
        }
    }

} 
```

然后在`NewClass`：

```
@Override
public void actionPerformed(ActionEvent e) {
    if (e.getSource() == viewcart) {
        Cart2 c = new Cart2(this);
        c.setVisible(true);
        c.setSize(250, 230);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T07:37:45.980

*   不要使用两个或更多`JFrames`，而不是在运行时，这是通往麻烦的道路

*   这是[CardLayout的工作](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

*   把每一个都`JComponents`放在`JPanel`，那些`JPanels`放在`Cards`

*   （也许）然后只放置一个`JButton`用于整个 GUI

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T07:23:34.240

虽然可能不是最好的，但这可能会让人们陷入困境，并且是调试的早期测试：

```
tAPriceL.paintImmediately(tAPriceL.getVisibleRect());
cICountL.paintImmediately(cICountL.getVisibleRect()); 
```

**编辑：**留下这个，但在这种情况下不是解决方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T07:32:18.950

那只是因为您没有更新正确的 NewClass 实例......在 Cart2 actionPerformed 中，您创建了一个新的 NewClass 实例并更新它。

您必须保留对 NewClass 框架实例的引用才能对其进行更新。

# intellij-idea - Intellij 递归导入 maven 模块是否损坏了 Intellij 11 和 12 EAP？

> ID：13044074
> 
> 赞同：0
> 
> 时间：2012-10-24T06:40:14.760
> 
> 标签：intellij-idea

在 Intellij 11 中，它偶尔会起作用，但这种行为非常不可靠。

问题是，如果您选中“递归搜索...”，那么它似乎可以搜索，但无法列出所有内容，但由于某种原因，它有时可能会起作用，尽管我不确定何时。所以我可以导入我的模块，而不是一个一个地手动导入。

递归扫描器似乎有一个错误，它似乎扫描了所有，但未能列出所有找到的......

还报道了：http: [//youtrack.jetbrains.com/issue/IDEA-93483](http://youtrack.jetbrains.com/issue/IDEA-93483)

有没有解决的办法！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:18:50.537

这是特定于您的环境的错误，请附加`idea.log`到报告的问题，以便我们找出它发生的原因（`Help`| `Reveal Log in ...`）。

[本案](http://youtrack.jetbrains.com/issue/IDEA-64132#comment=27-380070)可能与此有关。

# java - 将 double 分成整数和小数部分

> ID：13044079
> 
> 赞同：17
> 
> 时间：2012-10-24T06:40:56.087
> 
> 标签：java, math

我正在尝试将 double 分成整数和小数部分

例如，数字 24.4 应该分为 24 和 4。

```
int integer = (int)number;
double decimal = number-(int)number;
System.out.println(decimal); 
```

使用这种方法给了我以下值：

```
integer = 24
decimal = 0.3999999999999986 
```

我需要十进制的值为4。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T06:44:23.977

你可以做一个 String [`split(...)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)。然后 Integer[`parseInt(...)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)取回两个整数分量。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T06:47:24.230

这是因为`double`s 不完全是“实数” - 请记住，在任何范围内都有无限数量的实数，而其中只有有限数量的数字`double`- 因此值的数量有限，因此必须进行一些舍入。

事实是，24.4 不能精确表示`double`- 所以你的数字的分数实际上是 0.3999 左右......
如果你想要一个精确的解决方案 - 你应该使用一个为你提供精确小数值的库，例如[`BigDecimal`](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html).

如果您想了解更多关于`double`s 不精确的问题 - 您应该阅读更多关于[浮点算法](http://en.wikipedia.org/wiki/Floating_point)的内容，[这篇文章](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)虽然很高级，但为了真正理解正在发生的事情，也是必须的。

如果您还不能理解这些文章 - 请考虑：如果您需要一个确切的值 - `double`s 无法提供它 - 如果是这种情况，您应该使用库。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-24T07:01:13.633

根据小数位数，您可以使用以下方法：

```
double number = 24.4;

int integer = (int)number;
double decimal = (10 * number - 10 * integer)/10;

System.out.println(decimal); 
```

**解释**：去掉小数点，做减法，最后把小数点放回原来的位置！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-04-05T13:23:50.287

```
float number = (float) 22.45;
int integer = (int)number;
double decimal = number-integer;
System.out.println(integer + "decimal" + decimal); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-27T15:01:14.157

这是我写的一个小方法来完成这个：

```
/**
 * 
 * @param n
 * @return 
 */
private static double getFractionalPart(double n) {     
    if (n > 0) {
        return n - Math.floor(n);
    } else {
        return ((n - Math.ceil(n)) * -1);
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-23T06:22:52.093

这是我的解决方案：我使用 C 语言中的一种简单方法将小数拆分为两个不同的整数。

```
#include<stdio.h>
void main()
{
float x=24.56; int y=(int)x; float z=(x-y)*1000000000; int zd=(int)z;
printf("%lf",x);
printf("\ninteger Part %d\n",y);
printf("\nDecimal Part %d\n",zd);
} 
```

输出

* * *

```
24.559999
integer Part 24

Decimal Part 559999488 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-06-02T09:03:34.450

我用很少的解决方法找到了方法，我相信它适用于所有情况。

代码说明了一切。

```
 double number = input.nextDouble(); // 234.025
        String s = Double.toString(number); // "234.025"
        s = "0" + s.substring(s.indexOf(".")); //"0.025"
        double decimal = Double.parseDouble(s);// 0.025
        int num = (int)number; // 234
        System.out.println(decimal + " " + num); //0.025 234 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-01T17:36:06.757

首先找到小数点后的数字，然后你必须乘以这么多的 10。例如：x=26.78621 然后乘以 100000[这里你不能像 x*10 一样乘以 x*10 等等（5 次），第一次乘以 10，它会给你 267.862199999..] 乘法后从结果中减去 2600000。这是您的答案的链接，我已对其进行了编码。 [https://stackoverflow.com/a/18517555/2508414](https://stackoverflow.com/a/18517555/2508414)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-30T01:29:23.393

正如 RGO 所说，您可以这样做并舍入十进制数以获得适当的值。前任：

```
double number = 20.57;

int integer = (int)number;
double decimal = (10 * number - 10 * integer)/10;
double temp =  Math.round(decimal*100.0)/100.0;
System.out.println("Int = " + integer + "\nDecimal = " + temp); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-21T11:28:56.957

```
double number = 20.57;
Double.valueOf(String.valueOf(number)).intValue() 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-12-11T22:20:41.217

你可以这样做：

```
(val - val.longValue()) * 100 
```

使用 1000 得到 3 个分数：

例如：

```
(1.2445 - 1) * 100 = 0.244 
```

# php - 从 PHP 返回的 Jquery AJAX

> ID：13044082
> 
> 赞同：2
> 
> 时间：2012-10-24T06:41:26.273
> 
> 标签：php, jquery, ajax

使用此 Jquery AJAX 方法的新手。因此，我正在使用 Jquery 进行 AJAX 调用，在我的 PHP 脚本中，我正在检查数据库中的条件是否为真，然后再传入我的数据字符串并绑定变量，然后执行该查询。脚本和数据库插入都可以正常工作。

我的问题是，如何让它在我的 PHP 脚本返回时在我的 AJAX 调用中显示错误消息？

**JS**

* * *

```
$.ajax({
type: "POST",
url: 'submit_form.php',
data: dataString,
error: function() { alert('Error'); },
success: function() { alert('Success'); }
}); 
```

## **SUBMIT_FORM.PHP**

```
if ( count of rows in db < x  )
 {

return false;
exit();

} 
```

> 如果此条件为真，我想停止执行我的脚本并在我的 AJAX 函数中执行错误条件。

* * *

```
elseif ($stmt = $mysqli->prepare("INSERT INTO blah (stuff, morestuff) values (?, ?)")) {

 /* Bind our params */
  $stmt->bind_param("ss", $param1, $param1);

        /* Set our params */
$param1= $_POST["name"];
$param2= $_POST["email"];

/* Execute the prepared Statement */
$stmt->execute();
/* Close the statement */
$stmt->close(); 
} 
```

> 如果第一个条件为假，那么我想在我当前正在执行的 ajax 调用中返回成功函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T06:51:14.243

要调用您的错误处理程序`$.ajax`，您可以用 PHP（对于 FastCGI）编写以下代码：

```
header('Status: 404 Not found');
exit; 
```

或者，`header('HTTP/1.0 404 Not Found')`如果您不使用 FastCGI，请使用。

我个人不会使用这种方法，因为它模糊了 Web 服务器错误和应用程序错误之间的界限。

最好使用错误机制，例如：

```
echo json_encode(array('error' => array(
    'message' => 'Error message',
    'code' => 123,
)));
exit; 
```

在您的成功处理程序内部：

```
if (data.error) {
    alert(data.error.message);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T06:45:04.263

如果您想在 jquery 中执行错误命令，您可以尝试使用： `throw new Exception("Invalid");`在您的 php 代码中（应该调用错误的地方）。

这将导致 http 服务器向您的 javascript 代码返回错误代码 500。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T06:46:23.300

你的概念是错误的。错误条件意味着 ajax 调用中的错误将您的代码更改为此

```
$.ajax({
type: "POST",
url: 'submit_form.php',
data: dataString,
error: function() {
 alert('Error'); //here the error is the error in ajax call.eg failing to call or a 404..etc
 },
success: function(msg) {
if(msg=='error'){
   alert('Error'); //this is the error you are looking for
}else{
 alert('Success'); 
}

}
}); 
```

你的 PHP

```
if ( count of rows in db < x  )
 {
echo 'error'; //this is  enough
exit;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T06:47:09.080

根据jquery，我认为您对jquery错误设置有点困惑

> error ：请求失败时调用的函数。

所以你的错误代码只会因为以下原因而被触发

> 404 错误 - 找不到 ajax 文件错误
> 
> 500 错误 - ajax 内部系统错误

# android - 安卓蓝牙聊天应用

> ID：13044085
> 
> 赞同：0
> 
> 时间：2012-10-24T06:41:43.243
> 
> 标签：android

我正在构建一个 android 蓝牙聊天应用程序并在其中遇到一些问题。我的问题是：我无法检测到范围内可用的蓝牙设备，也无法在列表中显示。因为我是 android 编程新手，无法检测到问题。请帮帮我。

我的代码是：

```
public class BluetoothSearchActivity extends Activity {

    ArrayAdapter<String> btArrayAdapter;
    BluetoothAdapter mBluetoothAdapter;
    TextView stateBluetooth;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ImageView BluetoothSearchImageView=new ImageView(this);
        BluetoothSearchImageView.setImageResource(R.drawable.inner1);

        setContentView(BluetoothSearchImageView);
        setContentView(R.layout.activity_bluetooth_search);

        mBluetoothAdapter=BluetoothAdapter.getDefaultAdapter();

        ListView listDevicesFound=(ListView) findViewById(R.id.myList);

        btArrayAdapter=new ArrayAdapter<String> (BluetoothSearchActivity.this,android.R.layout.simple_list_item_1);

        listDevicesFound.setAdapter(btArrayAdapter);

        registerReceiver(ActionFoundReceiver,new IntentFilter(BluetoothDevice.ACTION_FOUND));

        btArrayAdapter.clear();
        mBluetoothAdapter.startDiscovery();

    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        unregisterReceiver(ActionFoundReceiver);
    }

    private final BroadcastReceiver ActionFoundReceiver=new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            String action=intent.getAction();
            if(BluetoothDevice.ACTION_FOUND.equals(action)) {
                BluetoothDevice device=intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                btArrayAdapter.add(device.getName()+"\n"+device.getAddress());
                btArrayAdapter.notifyDataSetChanged();
            }
        }   
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:53:16.860

您是否将其他设备设置为可发现？默认情况下，大多数智能手机对于配对设备是不可见的，您需要启用可见性才能使其可见。

我看到您使用 API 参考中的示例，因此它应该可以工作。

确保你有：

```
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" /> 
```

在 AndroidManifest.xml 文件中。

除此之外，您的对象还有一些奇怪的命名约定。ActionFoundReceiver 应该是 actionFoundReceiver （它是一个对象而不是一个类），但没什么大不了的。

如果您收到任何类型的错误消息，请同时发布。

编辑：您可以在 Log.d(tag, string) 中写出设备名称和地址，以便您可以在 logcat 调试中读出它，从而消除显示列表的问题。

编辑：为 Log.d 添加代码

```
import android.util.Log;

//to use Log.d(String, String)
Log.d("someTag", "your text here"); 
```

您可以使用 Log.d 打印调试信息，帮助您了解代码是否正确执行。我想 `Log.d("tag", device.getName()+" "+device.getAddress());`看看你是否得到听众的任何回应。并消除您尝试将其放入列表等时可能遇到的任何问题。

——托马斯·弗洛洛

# function - SASS 中的 prefixed() 函数有什么作用？

> ID：13044086
> 
> 赞同：1
> 
> 时间：2012-10-24T06:41:51.357
> 
> 标签：function, sass, mixins

[我一直在尝试基于Compass](http://compass-style.org/reference/compass/css3/images/#mixin-background)的背景混合在 SASS 中构建自己的渐变混合。

源代码中有一行内容如下：

```
$add-pie-bg: 前缀(-pie, $backgrounds) 或 $mult-bgs;
```

我到处找，但我找不到该`prefixed`功能的参考。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:51:45.323

[阅读文档](http://compass-style.org/reference/compass/helpers/cross-browser/)。

```
prefixed($prefix, $arg, ...)

Returns true if any of the arguments require the given prefix. 
```

# html - 记住 HTML/CSS 表格中的滚动条位置

> ID：13044094
> 
> 赞同：3
> 
> 时间：2012-10-24T06:43:14.987
> 
> 标签：html, css, scroll, html-table, position

有人可以帮我完成这项工作吗？我想我需要为此使用 JS，但我对它的经验很少......所以我认为一些代码示例可能很有用。我得到了这样的简单表格（为简化起见，我没有复制表格的内容，因为它有很多代码并且不相关。

```
<div style="overflow:auto; height:600px; border:2px solid black; border-radius:5px; background:white">
<table style="width:100%; border-collapse:collapse">
<thead>
</thead>
<tbody>
</tbody>
</table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:08:16.067

在 jQuery 中（这将保存一个带有滚动位置的 cookie）：

```
// When document is ready...
$(document).ready(function() {

    // If cookie is set, scroll to the position saved in the cookie.
    if ( $.cookie("scroll") !== null ) {
        $(".yourTableContainerDIV").scrollTop( $.cookie("scroll") );
    }

    // On window unload, save cookie
    $(window).unload(function() {
        $.cookie("scroll", $(".yourTableContainerDIV").scrollTop() );
    });
}); 
```

取自[这个答案](https://stackoverflow.com/questions/12744145/how-to-remember-scroll-position-o-page/12744617#12744617)，稍作修改。

**编辑：**

所以它并不完全奏效。

第一个问题是，如果您使用[此表](https://stackoverflow.com/questions/13043837/scrollable-table-with-fixed-header)，您需要阅读的不是容器 DIV `scrollTop`，而是您需要查看的 tbody。

而第二个问题是调用`$(".scrollContent").scrollTop()`之前的值变成了0 。`$(window).unload()`当我像这样修改代码时：

```
// When document is ready...
$(document).ready(function() {

    // If cookie is set, scroll to the position saved in the cookie.
    if ( $.cookie("scroll") !== null ) {
        $(".yourTableContainerDIV").scrollTop( $.cookie("scroll") );
    }

    // Set i to the current scroll position every 100 milliseconds.
    var i;
    window.setInterval(function(){i=$(".scrollContent").scrollTop()}, 100);

    // On window unload, save cookie.
    $(window).unload(function() {
        $.cookie("scroll", i);
    });
}); 
```

效果很好！但是你有一个函数被调用，并且每十分之一秒设置一个值，这对性能来说不太好。另一种方法是`window.beforeUnload`像这样使用：

```
// When document is ready...
$(document).ready(function() {
    // If cookie is set, scroll to the position saved in the cookie.
    if ( $.cookie("scroll") !== null ) {
        $(".yourTableContainerDIV").scrollTop( $.cookie("scroll") );
    }
});

window.onbeforeunload = function(){
    $.cookie("scroll", $(".scrollContent").scrollTop());
    return;
} 
```

这在大多数浏览器中效果很好并且不涉及间隔，但它在 Opera 中不起作用。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-11T18:46:10.490

这是一个 100% 可行的解决方案，适用于任何需要它的人的持久表滚动位置。

```
 // save position of table scroll
    $(function () {
        // If cookie is set, scroll to the position saved in the cookie.
        if ($.cookie("scroll") !== null) {
            $('#bScroll').scrollTop($.cookie("scroll"));
        }
    });

    window.onbeforeunload = function () {
        $.cookie("scroll", $('#bScroll').scrollTop());
        return;
    } 
```

设置 tbody id='bScroll' 就可以了。

简单而有保证。那里有很多“解决方案”，但除了这个之外，没有一个对我有用。

# objective-c - iOS6如何更改UIButton字体

> ID：13044100
> 
> 赞同：1
> 
> 时间：2012-10-24T06:43:55.153
> 
> 标签：objective-c, uibutton

嗨，我对 titleLabel 属性有疑问。当我想改变它。变化没有出现。这是我的代码：

```
UIButton *menuItemButton = [[UIButton alloc] initWithFrame:CGRectMake(x, y, 290.0, 35.0)];
[menuItemButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
[menuItemButton setTitleColor:[UIColor grayColor] forState:UIControlStateHighlighted];
        menuItemButton.contentHorizontalAlignment = UIControlContentHorizontalAlignmentLeft;
[menuItemButton setContentEdgeInsets:UIEdgeInsetsMake(0, 11.0, 0, 0)];
[menuItemButton setTitle:(NSString *)[itemParams objectForKey:@"Name"] forState:UIControlStateNormal];
[menuItemButton setBackgroundImage:menuItemImage forState:UIControlStateNormal];
[menuItemButton setTag:idx];
[[menuItemButton titleLabel] setFont:[UIFont fontWithName:@"Vardana" size:5]];
[menuItemButton addTarget:self action:@selector(menuItemClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

这不起作用：

```
[[menuItemButton titleLabel] setFont:[UIFont fontWithName:@"Vardana" size:15]]; 
```

我也在尝试：

```
[menuItemButton.titleLabel setFont:[UIFont fontWithName:@"Vardana" size:15]];
menuItemButton.titleLabel.font = [UIFont fontWithName:@"Vardana" size:15]; 
```

titleLabel 的其他属性也不适用于 ex。对齐和颜色。

我要写的所有`viewDidLoad`东西`[super viewDidLoad];`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T06:51:01.013

我认为字体的正确名称是`Verdana`而不是`Vardana`. [您可以在http://iphonedevsdk.com/forum/iphone-sdk-development/6000-list-of-uifonts-available.html](http://iphonedevsdk.com/forum/iphone-sdk-development/6000-list-of-uifonts-available.html)中查看几种字体的名称

# xml - 大写和小写的 XML / RDF 标签名称有什么区别吗？

> ID：13044102
> 
> 赞同：2
> 
> 时间：2012-10-24T06:44:08.377
> 
> 标签：xml, firefox, rdf, capitalization

我注意到`install.rdf`Firefox 扩展的文件有一些大写的标签名称，即`<Description>`.

如果它是小写的，会有什么不同`<description>`吗？

这些文件是 xml，所以我没有看到问题，只是想知道。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T06:49:05.350

Xml 元素区分大小写，它只是 rdf:Description。所以，是的，如果一个行为良好的程序找不到它需要的信息，它就会失败。

[这个页面](http://kb.mozillazine.org/Install.rdf)声明你需要在你的包中提供一个有效的 install.rdf，所以我的猜测是如果它找不到最小的信息集，组件的安装将在某个时候失败。

# javascript - 在函数中捕获事件以阻止它冒泡

> ID：13044104
> 
> 赞同：0
> 
> 时间：2012-10-24T06:44:14.243
> 
> 标签：javascript, event-bubbling

注意：我现在介绍事件冒泡以及如何阻止它。

代码 ==>

```
function foo ( bar ){
//do something
} 
```

在上面的函数中，我想捕获它，`event`这样我就可以阻止它冒泡。

到目前为止我尝试过的->

**试试 1**

```
function foo ( bar,event ){
//do something
} 
```

**试试 2**

```
function foo (bar ){
if( window.event || event )
   // code to stop bubling

//do something
} 
```

不使用**jQuery**，需要 vanilla js 解决方案。使用[这种](http://www.quirksmode.org/js/events_order.html)方法来防止事件冒泡。

——初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:47:12.730

尝试：

```
function foo ( bar,event ){
  if (event.stopPropagation) {
    event.stopPropagation();
  } else {
    event.cancelBubble = true;
  } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:47:08.093

```
elem.onclick = function(e) {
    e = e || window.event;
    if (e.stopPropagation) {
        e.stopPropagation();
    } else {
        e.cancelBubble = true;
    }
}; 
```

[http://jsfiddle.net/WnSjb/](http://jsfiddle.net/WnSjb/)

# llvm - 将程序的位码附加到它的二进制文件中

> ID：13044105
> 
> 赞同：1
> 
> 时间：2012-10-24T06:44:22.027
> 
> 标签：llvm

LLVM 中是否有传递或其他东西，可以将给定`llvm::Module`的二进制形式序列化，然后将这些数据放入源模块中？因此，当我将它链接到二进制文件时，我最终会得到一个编译代码的位码表示，它与单个文件中的本机代码链接？

如果没有，您能否就如何实现这一点提出一些建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-04T17:59:30.870

此功能现在在 Clang/LLVM 中部分实现，称为[ThinLTO](http://lists.llvm.org/pipermail/llvm-dev/2015-August/089222.html)。现在可以运行了`clang -c -emit-llvm -flto=thin source.cpp`，这将生成一个 LLVM 位码文件，其中嵌入了相同的位码。正在研究支持使用嵌入式位码编写本机目标文件。

# php - 如何使用 mongo 和 PHP 更新数组

> ID：13044114
> 
> 赞同：0
> 
> 时间：2012-10-24T06:44:43.147
> 
> 标签：php, mongodb

我有一个 mongo 文档，例如：

```
{
  ["_id"]=>
  object(MongoId)#7 (1) {
  ["$id"]=>
  string(24) "506f54886801cae34212c1a2"
  }
  ["hhid"]=>
  array(2) {
    [0]=>
    int(210854544)
   [1]=>
   int(308789420)
 }
 ["seg"]=>
 array(4) {
   [0]=>
   int(71)
    [1]=>
    int(91)
    [2]=>
    int(35)
    [3]=>
    int(64)
  }
} 
```

我想做的是更新具有特定元素的`seg`数组（添加另一个条目） 。`hhid`

我努力了：

```
$collection->update(
    array('hhid' => '226304795'),
    array('$addToSet' => array("seg" => "8"))); 
```

期望 seg 数组现在有：

> ```
> ["seg"]=>
>   array(5) {
>     [0]=>
>     int(71)
>     [1]=>
>     int(91)
>     [2]=>
>     int(35)
>     [3]=>
>     int(64)
>     [4]=>
>     int(8)
>  } 
> ```

然而什么也没有发生。我理解`hhid`是一个数组，但我认为标准不正确。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:06:06.337

？？？`226304795`不在您的`hhid`阵列中，对吗？

所以你找不到要更新的东西。

这是我的测试数据：

```
{ "_id" : ObjectId("5088c3396c27125921108707"), "hhid" : [ 210854544, 308789420 ], "seg" : [ 71, 91, 35, 64 ] } 
```

我的代码：

```
$m = new Mongo('mongodb://localhost:27017');
$db = $m->test;
$test = $db->test;
$test->update(array('hhid'=>210854544), array('$addToSet' => array('seg' => 8))); 
```

我的结果：

```
{ "_id" : ObjectId("5088c6fa6c27125921108708"), "hhid" : [ 210854544, 308789420 ], "seg" : [ 71, 91, 35, 64, 8 ] } 
```

有用 ：）

另外，请注意值类型（`hhid`和中的值`seg`）。如果要存储或查找`int`值，请不要用双引号将值括起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:04:17.870

我相信您正在搜索`string`您想要搜索的时间，`int`如您的文档所示：

```
["hhid"]=>
  array(2) {
      [0]=>int(210854544)
      [1]=>int(308789420)
  } 
```

MongoDB 不知道您的类型（除非使用 BSON 类型，但即便如此也不会像 SQL 那样转换），并且它不像 PHP 那样松散类型，因此在 int 字段上搜索字符串将不起作用。请尝试：

```
$collection->update(
    array('hhid' => 226304795),
    array('$addToSet' => array("seg" => "8"))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T06:51:15.383

我看到您用单引号将变量括起来；这样 PHP 将按字面意思解释它。尝试从`'$addToSet'`.

# mongodb - 在 Hadoop 中提交 MapReduce 作业时找不到 com.mongodb.hadoop.MongoOutputFormat

> ID：13044115
> 
> 赞同：1
> 
> 时间：2012-10-24T06:44:44.570
> 
> 标签：mongodb, hadoop, mapreduce, mongodb-hadoop

我按照本教程[http://www.mongodb.org/display/DOCS/Hadoop+Quick+Start](http://www.mongodb.org/display/DOCS/Hadoop+Quick+Start)构建 mongodb-hadoop。我尝试构建Treasury Yield 示例（我的Hadoop 版本是0.20.2。），但是当我提交MapReduce 作业时出现以下错误：

```
12/10/24 14:01:09 INFO util.MongoTool: Created a conf: 'Configuration: core-default.xml, core-site.xml, mongo-defaults.xml, mongo-treasury_yield.xml' on {class com.mongodb.hadoop.examples.treasury.TreasuryYieldXMLConfig} as job named '<unnamed job="" mongotool="">'
12/10/24 14:01:10 INFO util.MongoTool: Mapper Class: class com.mongodb.hadoop.examples.treasury.TreasuryYieldMapper
12/10/24 14:01:10 INFO util.MongoTool: Setting up and running MapReduce job in foreground, will wait for results. {Verbose? true}
12/10/24 14:01:10 INFO util.MongoSplitter: Calculate Splits Code ... Use Shards? false, Use Chunks? true; Collection Sharded? true
12/10/24 14:01:10 INFO util.MongoSplitter: Creation of Input Splits is enabled.
12/10/24 14:01:10 INFO util.MongoSplitter: Sharding mode calculation entering.
12/10/24 14:01:10 INFO mapred.JobClient: Running job: job_201208171702_0054
12/10/24 14:01:11 INFO mapred.JobClient: map 0% reduce 0%
12/10/24 14:01:17 INFO mapred.JobClient: Task Id : attempt_201208171702_0054_m_000116_0, Status : FAILED

java.lang.RuntimeException: java.lang.ClassNotFoundException: com.mongodb.hadoop.MongoOutputFormat 
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:809) 
    at org.apache.hadoop.mapreduce.JobContext.getOutputFormatClass(JobContext.java:193) 
    at org.apache.hadoop.mapred.Task.initialize(Task.java:413) 
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:288) 
    at org.apache.hadoop.mapred.Child.main(Child.java:170)
Caused by: java.lang.ClassNotFoundException: com.mongodb.hadoop.MongoOutputFormat 
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366) 
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355) 
    at java.security.AccessController.doPrivileged(Native Method) 
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354) 
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423) 
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308) 
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356) 
    at java.lang.Class.forName0(Native Method) 
    at java.lang.Class.forName(Class.java:264) 
    at org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:762) 
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:807) 
... 4 more 
```

我无法运行国债收益率示例...任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T06:43:26.923

我遇到了同样的问题。请确保您已将所需的 jar 文件（mongo-hadoop-core_cdh3u3-1.0.0.jar、mongo-2.10.1.jar）复制到 hadoop lib 文件夹中。之后，您将需要重新启动 hadoop 节点才能将其放入其类路径中。然后它应该运行。

它对我有用。

# git-svn - git-svn 是否有一个钩子可以防止 dcommit'ing 分支？

> ID：13044117
> 
> 赞同：5
> 
> 时间：2012-10-24T06:44:51.947
> 
> 标签：git-svn

我需要一些方法来防止自己意外地提交本地分支 - 当然，除了 master 分支。有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-12T00:32:43.883

您可以包装`git svn dcommit`一个别名并在那里添加一些测试。

我在中使用以下别名`.gitconfig`：

```
[alias]
    safe-dcommit = "!f() { if test \"$(git symbolic-ref HEAD)\" != refs/heads/master; then echo You must be on master branch; else git svn dcommit \"$@\"; fi; }; f"
    dc = !git safe-dcommit 
```

# javascript - javascript代码优化

> ID：13044119
> 
> 赞同：0
> 
> 时间：2012-10-24T06:45:04.680
> 
> 标签：javascript

我正在使用下面的代码来检查我的表单文本框，如果它们是空白的。

```
function myFunction(){
    var week_no=document.getElementById("week_no").value;
    var date_rep=document.getElementById("date_rep").value;

    if(week_no==null || week_no=="")
    {
    alert("week_no field must be filled out");
    document.getElementById("week_no").style.background="pink";
    document.getElementById("week_no").focus();
    return false ;
    }
    if(date_rep==null || date_rep=="")
     {
    alert("date_rep field must be filled out");
    document.getElementById("date_rep").style.background="pink";
    document.getElementById("date_rep").focus();

    return false;
    }
} 
```

我从我的 HTML 中调用这个 JavaScript 函数，如下所示。

```
<form id="form1" name="form1" method="post" onsubmit="return myFunction()" action="insert_alert.php" > 
```

我的表格太长了，我无法制作变量并对各个字段进行检查。如果有人指导我减少劳动，那将是我的荣幸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:48:45.803

您可以像这样迭代所有输入：

```
var inputs =  document.getElementById("form1").getElementsByTagName("input");
for(var i=0;i<inputs.length;i++) {
    var inp = inputs[i];
    if(inp.value == null || inp.value == "") {
        inp.style.background="pink";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:03:52.267

使用jquery方法：

```
<script>
    function myFunction() {
        var errorString = "";
        $("#form1 input[type='text']").css("background-color", "");
        $("#form1 input[type='text']").each(function (index, element) {
            if (errorString == "") {
                if (!$(element).val()) {
                    errorString += $(element).attr("id") + " field must be filled out";
                    $(element).css("background-color", "pink");
                }
            }
        });
        if (errorString) {
            alert(errorString);
            return false;
        }
        return true;
    }

</script>

<form id="form1" name="form1" method="post" onsubmit="return myFunction()" action="insert_alert.php" >
    <input type="text" id="week_no" />
    <input type="text" id="date_rep" />
    <input type="submit" value="go" />
</form> 
```

# google-chrome - HTML5 视频“结束”事件未在 Chrome 22.0+ 中触发

> ID：13044122
> 
> 赞同：4
> 
> 时间：2012-10-24T06:45:34.870
> 
> 标签：google-chrome, video

我环顾这个话题，但找不到任何不满的地方。我的测试表明，Mac 和 PC 上最新版本的 Google Chrome (22+) 有一个损坏的视频`ended`事件。

我在这里创建了一个示例页面，其中包含一个 HTML5 视频和一个事件侦听器，用于`ended`使用 jQuery 和常规 addEventListener 在视频结束时调用警报。它在 Safari 和 Firefox 中正确调用，但在 Chrome 中不正确：

[http://sadbot.com/videotest.html](http://sadbot.com/videotest.html)

如果有人知道为什么它不起作用或者我做错了什么，请告诉我。请注意，我有与此类似的实时生产代码设置，它已经运行了几个月，并且似乎与 Chrome 的最新推出不兼容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T06:10:19.260

如果启用循环，结束事件不会触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:40:24.800

仅供参考，该问题已被验证为[Chromium 跟踪器](http://code.google.com/p/chromium/issues/detail?id=157543)中的错误。我最终通过首先在视频源中指定 .ogv 文件而不是在 h.264 文件之后来“解决”这个问题。显然 Chrome 现在支持 .ogv 就好了，没有同样的问题。

# c - C中的多维数组初始化

> ID：13044124
> 
> 赞同：3
> 
> 时间：2012-10-24T06:46:00.233
> 
> 标签：c, multidimensional-array

有一个关于以下代码的指针我无法弄清楚：函数中的部分`set_array([][9])`，为什么编译器给出允许这个而不是正常的完整表达式`set_array([4][9])`。但是在`main`部分中`int array1[4][9]`，`array1[][9]`不允许。

```
#include <stdio.h>
void set_array(int t_array[][9]);
int main(void) {
    int array1[4][9]; // array1[][9] doesn't allowed

    for(int i = 0; i < 4; i++) {
        for(int j = 0; j < 9; j++) {
            array1[i][j] = j + 1;
        }
    }
    set_array(array1);
    for(int i = 0; i < 4; i++) {
        for(int j = 0; j < 9; j++) {
            printf("%d ", *(*(array1 + i) + j));
            //printf("%d ", array1[i][j]);
        }
        puts("\n");
    }
    return 0;

}
void set_array(int t_array[][9]) {
    for(int i = 0; i < 4; i++) {
        for(int j = 0; j < 9; j++) {
            t_array[i][j] = 1;
        }
    }   
}; 
```

对此有何解释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:57:59.650

在函数调用中，数组实际上被视为指针，因此在函数定义 `t_array[][9]`中实际上是`(*t_array)[9] //pointer to array` 但在数组的声明中，如果声明静态数组，则必须明确给出大小，以便编译器为数组分配那么多内存。因此，`array1[4][9]`是正确的，而`array1[][9]`错误是. 但是如果你正在做`array1[][9]`，那么你必须提供初始化列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T07:02:27.520

作为比较（C89）：

当你写

```
int a[] 
```

编译器不知道需要为“a”分配多少内存，在这种情况下，编译器需要使用初始化来确定数组的大小：

```
int a[] = {1,2,3}; // sizeof(a)==sizeof(int)*3 
```

当你只写

```
int a[][9]; 
```

编译器不知道“a”有多大，因此无法分配足够的内存

如果您将数组作为参数

```
void foo(int a[][9]) 
```

该函数不需要知道两个维度有多大，因为它没有分配任何东西，它只是引用'a'。从参数中，函数知道它应该在取消引用时将“a”视为多维数组（其中第一个维度是任意数字）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T06:49:17.600

在 C 语言中，您必须在静态声明数组大小时为其指定一个值，否则编译器将不知道要为该变量分配多少内存。

当您将数组作为数组 [] [9] 传递时，它可以工作，因为编译器只需要知道数组中元素的大小，而不需要知道它包含多少元素。因此，将 array[][] 作为参数传递将不起作用，因为编译器不知道所存储元素的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T06:51:50.683

您可以使用初始化列表在不指定第一个维度的情况下声明和初始化：

```
int array1[][9] = {
{1,2,3,4,5,6,7,8,9},
{1,2,3,4,5,6,7,8,9},
{1,2,3,4,5,6,7,8,9},
{1,2,3,4,5,6,7,8,9},
}; 
```

在 C 中，如果您内联初始化数组，则只需要从第二个开始指定尺寸大小。它们对于编译器生成索引它的代码是必需的，请记住多维数组（在 C 中）是一个连续缓冲区。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T07:07:06.927

发生这种情况是因为当您在做两件不同的事情时：

首先，您要声明一个名为`array1`. 在 C 中，编译器需要知道您声明的空间量，以便为您保留该内存量。因此，您必须指定数组的完整大小：

`int array1[4][9];`

这样你的编译器就知道你需要`4 * 9`分配整数。

现在，在您的函数中，编译器不需要知道数组的大小（在幕后您的数组被转换为函数调用上的指针），它只需要知道其元素的大小。`t_array`指向 size 元素的指针也是如此`9 * sizeof(int)`。这是因为您可以按照您声明的方式声明您的函数：

`void set_array(int t_array[][9])`

但也可以声明所有维度大小：

`void set_array(int t_array[4][9])`

但这对编译器无关紧要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T06:48:46.007

您不能分配给数组，只能初始化它们，因此您必须一次完成所有操作：

```
int array1[4][9] = {
 {1,2,3,4,5,6,7,8,9},
 {1,2,3,4,5,6,7,8,9},
 {1,2,3,4,5,6,7,8,9},
 {1,2,3,4,5,6,7,8,9},
}; 
```

# html - 那里有任何描述 Html 页面布局计算的表格吗？

> ID：13044125
> 
> 赞同：2
> 
> 时间：2012-10-24T06:46:16.430
> 
> 标签：html, layout, rendering, computation

我正在寻找一些描述如何为 Html 页面计算固定布局的资源，但我找不到任何资源。也许有一个我不知道abkout的特殊术语？

请指出一些描述此过程的资源。充其量，这将是一份从上到下记录完整过程的出版物。

但是，如果没有这样的资源，也许为了进一步说明这个问题，这就是我目前面临的问题：

```
<body>:  Yo dawg, its time to compute our fixed size and position for the renderer. How big are you?
<div>:   How big are you?
<body>:  That is why I ask you, you're one of my child-nodes.
<div>:   But my width is set to auto and my display to block. I'm as wide as you are!

-> Houston, we have a problem! 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T17:47:59.380

计算布局的方式取决于引擎。不同的浏览器使用不同的引擎。

**什么是布局引擎？**

基本上，布局引擎获取内容（例如 HTML、XML、图像文件、小程序等）和格式信息（例如层叠样式表、演示 HTML 标记等）并在屏幕上显示格式化的内容。它绘制浏览器的内容区域，即浏览器窗口镶边内的空白区域。

以下是常用引擎列表： [http ://en.wikipedia.org/wiki/List_of_layout_engines](http://en.wikipedia.org/wiki/List_of_layout_engines)

而不是搜索全局“网页如何呈现”。您可以搜索“Gecko 如何呈现网页？”

google了一下，发现这里已经有人问过这个问题了。也许它也可以帮助你。[Gecko（或任何其他布局引擎）如何呈现文档/页面？](https://stackoverflow.com/questions/3154753/how-does-gecko-or-any-other-layout-engine-render-a-document-page)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:09:44.537

我会浏览不同布局引擎的文档。例如，Webkit 博客中的这篇由多部分组成的文章可能对您有用：[WebCore Rendering I – The Basics](https://www.webkit.org/blog/114/webcore-rendering-i-the-basics/)。似乎文章的所有部分都很有用，第四部分[Absolute/Fixed and Relative Positioning](https://www.webkit.org/blog/117/webcore-rendering-iv-absolutefixed-and-relative-positioning/)可能对您特别有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T03:29:55.573

Alex Russel 的[这次演讲应该会给你一些见解。](http://dayofjs.com/videos/22158462/web-browsers_alex-russel)

# spring - Spring MVC 3 与 Hibernate 4 集成

> ID：13044127
> 
> 赞同：1
> 
> 时间：2012-10-24T06:46:29.547
> 
> 标签：spring, hibernate, spring-mvc

我目前的目标是使用 Hibernate 4 在我的 Web 应用程序中启用事务管理。

首先，我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets 
        and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
             /WEB-INF/spring/root-context.xml,
             /WEB-INF/spring/appServlet/*-context.xml
        </param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <listener>
        <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>mvc-dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>mvc-dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <!-- Spring Security -->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <session-config>
        <session-timeout>5</session-timeout>
    </session-config>
</web-app> 
```

mvc-dispatcher-servlet.xml（从 servlet-context.xml 重命名）：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="sec://www.springframework.org/schema/mvc"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing 
        infrastructure -->

    <context:component-scan base-package="com.moose.springmvc.controller" />

    <!-- Enables the Spring MVC @Controller programming model -->
    <mvc:annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving 
        up static resources in the ${webappRoot}/resources directory -->
    <mvc:resources mapping="/resources/**" location="resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources 
        in the /WEB-INF/views directory -->
    <beans:bean
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <mvc:interceptors>
        <beans:bean
            class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
            <beans:property name="paramName" value="lang" />
        </beans:bean>
    </mvc:interceptors>
</beans:beans> 
```

我的 database-context.xml（从 spring-database.xml 重命名）配置：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:component-scan base-package="com.moose.springmvc.service,com.moose.springmvc.dao" />

    <tx:annotation-driven proxy-target-class="true" transaction-manager="transactionManager"/>

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager"
        p:sessionFactory-ref="sessionFactory" />

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean"
        p:packagesToScan="com.moose.springmvc.entity" p:dataSource-ref="dataSource"
        p:configLocation="classpath:hibernate.cfg.xml">
    </bean>

    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
        <property name="driverClass" value="com.mysql.jdbc.Driver" />
        <property name="jdbcUrl" value="jdbc:mysql://localhost:3306/crud" />
        <property name="user" value="root" />
        <property name="password" value="mysql@123#" />
        <!--  TODO adjust pooling parameters... -->
    </bean>
</beans> 
```

我的 DAO 课程：

```
@Repository
public class UserDAO
{
    @Autowired
    private SessionFactory sessionFactory;

    ...

    public int save(User user)
    {
        return (Integer) sessionFactory.getCurrentSession().save(user);
    }

    ...  
} 
```

我的服务类：

```
@Service
@Transactional
public class UserService {

    protected static Logger logger = LoggerFactory
            .getLogger(UserService.class);

    @Autowired
    private UserDAO userDAO;

    public Integer createUser(User user){

        return userDAO.save(user);
    }
} 
```

AjaxBootstrapController 类的相关代码：

```
@Controller
public class AjaxBootstrapController {
    @Autowired
    private UserService userService;

        ....

    @RequestMapping(value = "/userAjaxCustomTag", method = RequestMethod.POST)
    public String processFormAjax(
            @ModelAttribute(value = "user") @Valid User user,
            BindingResult result) {
        if (!result.hasErrors()) {
            userService.createUser(user);
        }
        return "userForm";
    } 
```

**编辑**

hibernate.cfg.xml 配置：

```
<?xml version='1.0' encoding='utf-8'?>

<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>
        <!-- Database connection settings -->
        <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="connection.url">jdbc:mysql://localhost:3306/crud</property>
        <property name="connection.username">root</property>
        <property name="connection.password">mysql@123#</property>

        <!-- JDBC connection pool (use the built-in) -->
        <property name="connection.pool_size">1</property>

        <!-- SQL dialect -->
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>

        <!-- Disable the second-level cache -->
        <property name="cache.provider_class">org.hibernate.cache.internal.NoCacheProvider</property>

        <!-- Echo all executed SQL to stdout -->
        <property name="show_sql">true</property>

        <!-- Drop and re-create the database schema on startup
        <property name="hbm2ddl.auto">create</property>
         -->
    </session-factory>
</hibernate-configuration> 
```

我得到新的例外：

```
org.hibernate.HibernateException: save is not valid without active transaction
    at org.hibernate.context.internal.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:348)
    at $Proxy31.save(Unknown Source)
    at com.moose.springmvc.dao.UserDAO.save(UserDAO.java:45)
    at com.moose.springmvc.service.UserService.createUser(UserService.java:23)
    at com.moose.springmvc.service.UserService$$FastClassByCGLIB$$60239454.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:191)
    at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
    at com.moose.springmvc.service.UserService$$EnhancerByCGLIB$$419f68a0.createUser(<generated>)
    at com.moose.springmvc.controller.AjaxBootstrapController.processFormAjax(AjaxBootstrapController.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
```

配置或注释有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:49:49.853

从您的堆栈跟踪来看，您的 userService 实例周围似乎没有代理，这是非常不正常的，因为它周围应该有一个代理，这是事务处理的方面（假设您使用的是加载时间编织，这是最常见的Spring中AOP的方式）

不确定这是否是您的问题，但我最近遇到了类似的问题，结果证明这个问题非常棘手。

我假设您正在使用 Spring 的组件扫描功能

似乎您正在使用 SpringMVC，调度程序 servlet 加载了另一个应用程序上下文文件。（通常命名为 YOUR_SERVLET_NAME-servlet.xml）

Spring 将其作为主应用程序上下文的单独子应用程序上下文加载。

如果在该 servlet 应用程序上下文中，您再次声明了组件扫描，它将加载一个单独的 UserService 实例，并且，如果您在该应用程序上下文中没有任何事务设置，则此 UserService 实例将没有相应的代理（用于交易控制）生成。

在这种情况下，解决方法很简单，只需确保在 servlet 应用程序上下文中，将您的组件扫描限制为不扫描主应用程序上下文中已经存在的 bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:37:34.063

我有几个建议，你可以检查它们 -

您是否使用 CGLIB 为服务生成代理以使用事务？否则，您的服务应该实现一个接口，以便创建使用该接口创建代理的 jdk 代理。

另外在您的 tx:annotation-driven 标记中指定以下内容 -

```
<tx:annotation-driven transaction-manager="transactionManager" mode="proxy"/> 
```

您可以在 spring-database.xml 中的 SessionFactory bean 中配置 Hibernate 配置文件。如果您已将 show-sql 标志配置为 true，则可以通过此查看 SQL 日志，以便更好地理解问题

```
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean"
    p:packagesToScan="com.moose.springmvc.dao" p:dataSource-ref="dataSource"
    p:configLocation="specify-path-location-of-hibernate.cfg.xml e.g. /WEB-INF/hibernate/hibernate.cfg.xml">
</bean> 
```

请检查这些。

# javascript - 为什么 return false 在下面的代码中不起作用

> ID：13044128
> 
> 赞同：1
> 
> 时间：2012-10-24T06:46:31.427
> 
> 标签：javascript

我的代码中有一些锚标记，但我不希望通过单击链接页面加载链接，我想在单击锚标记时发出警报，此外，单击事件不应执行。

```
window.onload=function(){ 
  var x=document.getElemenByTagName('a');
  for(var i=0;i<x.length;i++)
    x[i].addEventListener('click',doAlert,false);
  function doAlert(){
    alert('not allowed')
    return false;
  }
} 
```

***我的问题是锚标签被执行***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:49:23.040

你拼错了 getElemenByTagName...

这是：

**getElementsByTagName**不是 getElemenByTagName

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:51:57.953

`function doAlert(event){ event.preventDefault(); alert('not alowed'); }`

# ios - 在核心数据中使用搜索栏范围

> ID：13044130
> 
> 赞同：1
> 
> 时间：2012-10-24T06:46:35.350
> 
> 标签：ios, search, core-data, entity-relationship, nsfetchedresultscontroller

我在核心数据中有两个实体，它们之间存在一对多关系（Dream 与符号有一对多关系）。我还通过使用谓词和搜索发生时调用的适当 searchFetchedResultsController 提供了搜索功能。现在我想使用搜索栏范围按钮来实现搜索范围功能。如何更改我的谓词，以便它根据符号过滤内容，而不是过滤工作正常的梦。我是否需要创建另一个 fetchedResultsController 或者我应该修改此 searchFetchedResultsController 中的谓词以获得所需的结果？？？

```
 - (NSFetchedResultsController *)newFetchedResultsControllerWithSearch:(NSString *)searchString {
NSFetchRequest *fetchRequest = [[[NSFetchRequest alloc] init] autorelease];

// Edit the entity name as appropriate.
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Dream" 
                                          inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

// Set the batch size to a suitable number.
[fetchRequest setFetchBatchSize:20];

// Edit the sort key as appropriate.
NSSortDescriptor *sortDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"dateTimeStamp" ascending:NO] autorelease];
NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];
[fetchRequest setSortDescriptors:sortDescriptors];

// Configure predicate
NSPredicate *filterPredicate = nil;

if (searchString.length) {
    filterPredicate = [NSPredicate predicateWithFormat:@"note CONTAINS[cd] %@", searchString];
}

[fetchRequest setPredicate:filterPredicate];

NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest 
                                                                                            managedObjectContext:self.managedObjectContext 
                                                                                              sectionNameKeyPath:nil 
                                                                                                       cacheName:nil];
aFetchedResultsController.delegate = self;

NSError *error = nil;

if (![aFetchedResultsController performFetch:&error]) {
    /*
     Replace this implementation with code to handle the error appropriately.

     abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. If it is not possible to recover from the error, display an alert panel that instructs the user to quit the application by pressing the Home button.
     */
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}

return aFetchedResultsController;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:04:42.917

不需要单独的获取结果控制器。

谓词可能是这样的：

```
fetchRequest.predicate = [NSPredicate predicateWithFormat:
   @"ANY symbols.name CONTAINS[cd] %@", searchString]; 
```

# openlaszlo - 是否可以在 DHTML 运行时加载 openlaszlo swf 10 运行时组件？

> ID：13044141
> 
> 赞同：2
> 
> 时间：2012-10-24T06:47:11.683
> 
> 标签：openlaszlo, lzx

我有一个当前在 swf 10 环境中的录音机组件。这会在录制音频时使用麦克风活动级别和其他麦克风 api。我目前正在将应用程序转换为 dhtml 运行时。是否可以在 dhtml 中使用 swf 10 组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:10:13.530

OpenLaszlo 有一个示例应用程序可以做到这一点：[musicdhtml 应用程序](http://labs.openlaszlo.org/trunk-nightly/examples/musicdhtml/)，这里是[SVN 源代码的链接](http://svn.openlaszlo.org/openlaszlo/trunk/examples/musicdhtml/)。

您必须创建第二个 OpenLaszlo SWF 应用程序，并将其嵌入到 HTML 页面中 - 如*musicdhtml*示例[的 JSP 页面](http://svn.openlaszlo.org/openlaszlo/trunk/examples/musicdhtml/index.jsp)中所示。

 *```
lz.embed.swf({url: 'audiokernel.lzx?lzt=swf', bgcolor: '#eaeaea', width: '0', height: '0', id: 'audiokernel'});
lz.embed.dhtml({url: 'main.lzx?lzt=object&lzr=dhtml&_canvas_debug=false', bgcolor: '#ffffff', width: '100%', height: '150', id: 'lzdhtmlapp'}); 
```

如您所见，audiokernel.lzx 的宽度和高度设置为 0，因此是不可见的。通过调用`lz.embed.audiokernel.callMethod()`SWF 应用程序和`lz.Browser.callJS()`在 DHTML 应用程序中使用来实现两个应用程序的集成。

这是 audioplayer.lzx 中的播放按钮，显示了单击按钮时如何调用音频播放器的播放方法：

```
<button width="40" height="22" 
        onclick="lz.embed.audiokernel.callMethod('audioplayer.play()')" > 
```

以及`onframe`audioplayer.lzx 中的处理程序：

```
<handler name="onframe" args="f">
    //Debug.write("Got frame", f);
    lz.Browser.callJS('setCanAttr', null, 'frame', f); 
</handler> 
```

使用`lz.Browser.callJS()`您可以直接从 SWF 运行时应用程序中调用 DHTML 应用程序中的任何方法。DHTML`canvas`被定义为 JavaScript 命名空间中的全局变量（不是一个很好的做法）。使用`lz.Browser.callJS()`.*

# objective-c - 归档/取消归档后对象具有不同的类

> ID：13044151
> 
> 赞同：4
> 
> 时间：2012-10-24T06:47:55.413
> 
> 标签：objective-c, ios

我正在为使用 iOS 6 的 iPad 项目开发 Objective-C 代码库。

在我将类“ClassA”的名称重构为“ClassB”后，我发现以下测试失败：

```
NSData *encodedObject = [NSKeyedArchiver archivedDataWithRootObject:objectOfClassB];
ServiceOrderOld *decodedObject = [NSKeyedUnarchiver unarchiveObjectWithData:encodedObject];

[[[decodedObject class] should] equal:[objectOfClassB class]]; 
```

我收到的错误消息是：“[FAILED]，预期服从等于 ClassB，得到 ClassB”

什么可能导致这种奇怪的行为？关于调试的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-13T05:25:12.237

我希望我不会太晚；）

我在测试框架时遇到了同样的问题。事实证明，有问题的班级也在测试的目标中。我认为它与框架的类不匹配（但编译！）。我从测试的目标中删除了该类并且测试通过了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:59:05.733

似乎类与归档机制真的无关。当您取消归档时，您是否尝试过重播课程？

```
DesiredClass *object = (DesiredClass*) [NSKeyedUnarchiver
   unarchiveObjectWithData:encodedObject]; 
```

# java - GWT + Spring 服务 + Spring Security

> ID：13044153
> 
> 赞同：1
> 
> 时间：2012-10-24T06:48:25.950
> 
> 标签：java, spring, gwt, spring-security

我有一个小的架构如下：

*   客户端应用程序（使用 GWT）
*   RESTful 服务（使用 Spring）

客户端可以通过*ProxyServlet*与服务通信以避免“同源策略”，因为它们被部署为不同的应用程序 (WAR)

RESTful 服务使用 Spring-Security 和 Client-App 进行保护

问题是，如何登录一个应用程序（比如客户端），并使用该会话在另一个应用程序上进行调用？

# php - 转义转义 file_get_contents(); 并在适当的位置运行一个功能

> ID：13044159
> 
> 赞同：0
> 
> 时间：2012-10-24T06:49:01.513
> 
> 标签：php, string, file, escaping

我现在真的迷失了我需要做的是打开文件查找！@#*函数*#@！并在其位置运行 php 函数。

我一直在使用 file_get_contents() 打开文件，我必须通过替换某些东西。有一些简单的东西，比如文本，我可以通过一个简单的 str_replace() 来替换。我需要做的是运行一个函数并将其释放等代替 !@# *function* #@! 在文件字符串中。

我希望这有点道理我自己很难解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:54:17.077

我猜你需要的是[preg_replace_callback](http://php.net/preg_replace_callback)

```
$file = file_get_contents();

$newFile = preg_replace_callback('/(\!\@\#function\#\@\!)/is', 'yourfunction',$file); 
```

# php - SQL 效率和速度

> ID：13044162
> 
> 赞同：1
> 
> 时间：2012-10-24T06:49:11.967
> 
> 标签：php, sql, performance

我必须删除数组中包含 id 的记录。

我只是不知道哪个更好用。哪个更快更高效？

**代码 1**

```
$array = array('123','456','789' ...)//over 900 entries
$id = implode(',', $array);
$sql = 'DELETE FROM email WHERE id IN ('.$id.')';
//execute sql 
```

或者

**代码2**

```
$array = array('123','456','789' ...)//over 900 entries
for($x=0;$x<count($array);$x++){
  $sql='DELETE FROM email WHERE id = '.$array[$x].' ';
  //execute sql
} 
```

两者中哪一个在执行时更快更有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T06:55:24.890

案例1会更快。

决定总时间的不仅仅是查询的执行时间。*解析、准备*和*计划*也需要时间。情况2需要做几次，情况1只做一次。删除一行也同样快，但正是查询开销使案例 1 更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:05:02.117

第一个产生更好的性能。因为对于第二个查询，如果记录有 1000 行，那么 Web 应用程序必须为每次删除访问数据库 1000 次，并且必须为每个事务更新事务日志。因此，话虽如此，选项1相对而言更好。

# php - PHP从开发机器中找到GMail消息，但不是实时服务器

> ID：13044169
> 
> 赞同：0
> 
> 时间：2012-10-24T06:49:27.187
> 
> 标签：php, gmail, imap

我构建了一个小脚本来运行在 Joomla 网站内发送电子邮件的端到端测试：

```
$testMailer =& JFactory::getMailer();

$testMailer->setSender(SENDER);
$testMailer->addReplyTo(SENDER);
$testMailer->addRecipient(TEST_EMAIL);

$subject = 'Automatic test '.md5(uniqid());

$testMailer->setSubject($subject);
$testMailer->setBody('This message is automatically retrieved. Please ignore.');

?>
<h2>Testing Joomla email sending functionality</h2><?php
flush();
if ($testMailer->Send() !== true) {
    echo '<p>ERROR - Mail Sending failed</p>';
}else{

    echo '<p>Email sent...</p>';
    flush();
    $sleep = 5;
    $progress = 0;
    $max = 300;
    set_time_limit($max+30);
    $found = 0;

    $mbox = imap_open(TEST_IMAP_SERVER, TEST_EMAIL, TEST_PASSWORD);

    if (!$mbox){
        echo '<p>ERROR - Login to '.TEST_EMAIL.' failed</p>';
        foreach (imap_errors() as $error){
            echo '<p>'.$error.'</p>';
        }
        die();
    }else{
        while (!$found && $progress < $max){

            $result = imap_search($mbox, 'SUBJECT "'.$subject.'"');

            foreach($result as $msgno) {
                $headers = imap_fetchheader($mbox, $msgno);
                if ($headers){
                    echo '<p>OK - EMail received</p>';
                    imap_delete($mbox,$msgno);
                    $found = 1;
                    die();
                }
            }
        }
        if (!$found){
            $progress+=$sleep;
            echo '<p>Waiting '.$sleep.' seconds to try again...('.$progress.' seconds total wait)</p>';
            flush();
            sleep($sleep);
        }
    }
    if (!$found){
        echo '<p>ERROR Giving up after '.$max.' seconds</p>';
    }
} 
```

该脚本在我的本地开发机器上运行良好，并且始终可以找到发送的消息。

实时站点位于 Amazon EC2 服务器上。起初，我收到了异常登录活动的警告。我确认脚本是已知的，并在 10 分钟内重新运行。

此后，脚本可以登录，但 imap_search 再也找不到任何消息。但是，它们确实会到达收件箱。开发站点上的脚本仍然可以正常工作。

亚马逊服务器上的 Telnet 也可以正常工作

```
telnet imap.gmail.com 993
Trying 74.125.133.108...
Connected to gmail-imap.l.google.com.
Escape character is '^]'. 
```

有任何想法吗？

# yui - 对 YUI 数据表进行排序，将空值保留在顶部

> ID：13044175
> 
> 赞同：0
> 
> 时间：2012-10-24T06:49:54.477
> 
> 标签：yui, yui-datatable

我正在对 YUI 数据表进行排序，其中有一列作为日期，该列有一些 NULL 值。

无论排序顺序如何，我都需要将这些空值保留在表的顶部行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:53:27.683

您将需要编写一个自定义排序函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:08:32.567

@chittprakash

这是一个例子：http: [//yuilibrary.com/yui/docs/api/classes/DataTable.Sortable.html](http://yuilibrary.com/yui/docs/api/classes/DataTable.Sortable.html)

# asp.net - jquery脚本在页面重新加载时工作

> ID：13044180
> 
> 赞同：0
> 
> 时间：2012-10-24T06:50:13.073
> 
> 标签：asp.net, ajax, jquery

你好，我有一个页面，我在文本框的自动完成事件上使用了 ajax，即在文本框中填充了一些列表，因此将选定的项目添加到网格中它仅在第一次重新加载页面时有效，但在网格中添加项目后自动完成事件停止为此我必须重新加载页面，但我没有这样做，因为当我刷新页面时，添加到网格中的所有项目都丢失了，当我最终单击保存按钮时，网格中的项目被保存，而且我有另一个问题，我有另一个文本框我在自动完成事件中填充列表的页面，但是当我在控件中键入一些值时也不起作用，只有在重新加载第一页时它才起作用，所以这是什么问题

```
<div id="inner">
  <fieldset>
        <legend>Purchase Order</legend>
       <asp:UpdatePanel ID="UpdatePanel1" runat="server">
       <ContentTemplate>

            <table style="width:44%;">

               <tr>

                   <td>
                       <div class="dvlefttd2">
                           <asp:Label ID="lblpartyname" runat="server" Text="Party Name"></asp:Label>
                       </div>
                   </td>
                   <td colspan="3">
                    <div class="ui-widget" style="display:block;margin-top:18px;">
                            <asp:TextBox style="min-width:216px" ID="tbAuto" class="tb" runat="server">
                            </asp:TextBox>
                            <div style="visibility:hidden">
                            <asp:TextBox runat="server" ID="tbHidden"  class="tb"></asp:TextBox></div>
                    </div>
                   </td>
                 </tr>
                <tr>

                    <td>
                        <div class="dvlefttd2">
                            <asp:Label ID="lblQno" runat="server" Text="Q. No."></asp:Label>
                        </div>
                    </td>
                    <td>
                   <asp:TextBox ID="txtQno" runat="server" 
                     autocomplete="off" MaxLength="8" 
                            onkeypress="return isNumberKey(event)" 
                    Width="75px">
                    </asp:TextBox>
                    </td>
                    <td>

                </tr>
                <tr>

                    <td>

                        <div class="dvlefttd1">
                            PoNo
                        </div>

                    </td>
                    <td>
                        <div style="margin-top:-10px;">
                            <asp:TextBox ID="txtPoNo" runat="server" autocomplete="off" MaxLength="8" 
                                onkeypress="return isNumberKey(event)" ReadOnly="True" Width="75px"></asp:TextBox>
                        </div>
                    </td>
                    <td ID="tdcheck" style="width:195px">
                        <div class="dvlefttd2" style="padding-top:20px">
                            <asp:CheckBox ID="chkConsignee" runat="server" AutoPostBack="True" 
                                OnCheckedChanged="chkConsignee_CheckedChanged" Text="Consignee" 
                                TextAlign="Left" />
                        </div>
                    </td>
                   <td id="ColConsignee" runat="server" colspan="3">
                            <asp:DropDownList ID="ddlConsignee" runat="server" AutoPostBack="True" 
                                OnSelectedIndexChanged="ddlConsignee_SelectedIndexChanged" Width="221px">
                            </asp:DropDownList>
                            <asp:TextBox ID="txtConsignee" runat="server" autocomplete="off" MaxLength="30" 
                            Visible="false" Width="100px"></asp:TextBox>
                    </td>

                </tr>
              </table>
           <fieldset>
           <legend>Item Info

           </legend>
               <table style="width:100%;">
                   <tr>
                       <td colspan="2">
                       <div class="dvitems">
                          Item
                       </div>
                       </td>

                       <td>
                       <div class="dvitems">
                            Grain
                        </div>
                        </td>
                       <td style="width: 79px">
                       <div class="dvitems">
                           Unit
                       </div>   
                        </td>
                       <td style="width: 79px">
                       <div class="dvitems">
                       Cases
                       </div>
                       </td>
                       <td>

                        </td>
                   </tr>
                   <tr>
                       <td style="width:44px" valign="top" colspan="2">

                       <div class="ui-widget" style="display:block;">
                       <asp:TextBox style="min-width:226px;min-height:20px;" ID="txtitem" class="tb" runat="server">
                       </asp:TextBox>
                       <div style="visibility:hidden">
                       <asp:TextBox runat="server" ID="hditem"  class="tb"></asp:TextBox>
                       </div>
                       </div>
                       </td>

                       <td style="width:49px" valign="top">

                           <asp:DropDownList ID="ddlGrain" runat="server" style="min-width:100px;min-height:20px">
                               <asp:ListItem>Long</asp:ListItem>
                               <asp:ListItem>Short</asp:ListItem>
                           </asp:DropDownList>
                       </td>
                       <td  valign="top">

                           <asp:DropDownList ID="ddlUnit" runat="server" style="min-height:27px;min-width:100px">
                           </asp:DropDownList>
                       </td>
                       <td  valign="top">
                           <asp:TextBox ID="txtcases" runat="server" style="min-height:20px;min-width:100px"></asp:TextBox>
                       </td>
                       <td valign="top" style="width:49px">

                           &nbsp;</td>
                   </tr>

                   <tr>
                       <td style="width:44px">

                           <div class="dvitems">
                               Qty
                           </div>

                        </td>
                       <td style="width:44px">
                         <div class="dvitems">
                               Rate
                           </div>
                       </td>
                       <td>

                           <div class="dvitems">
                               Amt
                           </div>

                       </td>
                       <td colspan="2">
                       <div class="dvitems">
                       Remark 
                       </div>   

                       </td>

                       <td>
                       </td>
                   </tr>

                   <tr>
                       <td style="width: 44px">
                           <asp:TextBox ID="txtQty" runat="server" autocomplete="off" MaxLength="5" 
                               onkeypress="return isNumberKey(event)" style="min-height:20px;min-width:100px"></asp:TextBox>
                       </td>
                       <td style="width: 44px">
                       <asp:TextBox ID="txtRate" runat="server" 
autocomplete="off" MaxLength="6" 
                               onblur="setAmount();"  
                               OnTextChanged="txtRate_TextChanged" 
style="min-width:100px;min-height:20px"></asp:TextBox>
                       </td>
                       <td>
                           <asp:TextBox ID="txtAmount" runat="server" autocomplete="off" Enabled="False" 
                               MaxLength="7" style="min-width:100px"></asp:TextBox>
                       </td>
                       <td colspan="2">
                           <asp:TextBox ID="txtRemark" runat="server" autocomplete="off" MaxLength="50" 
                               style="min-width:237px"></asp:TextBox>
                       </td>

                       <td>
                           <asp:Button ID="btnAdd" runat="server" CssClass="btn" OnClick="btnAdd_Click" 
                               Text="Add" />
                       </td>
                   </tr>

               </table>
               <asp:Panel ID="Panel1" runat="server" Height="120px" ScrollBars="Both">
                                                <div id="dvgrid" runat="server">
                                                <asp:GridView ID="gvItem" runat="server" CssClass="mGrid" 
                                                        AutoGenerateColumns="False"  PagerStyle-CssClass="pgr"  
AlternatingRowStyle-CssClass="alt"
                                                    CellPadding="4" ForeColor="#424242" GridLines="None" Height="84px" 
                                                    OnRowCancelingEdit="gvItem_RowCancelingEdit" OnRowDeleting="gvItem_RowDeleting" 
                                                    OnRowEditing="gvItem_RowEditing" OnRowUpdating="gvItem_RowUpdating" 
                                                    OnSelectedIndexChanged="gvItem_SelectedIndexChanged">
                                                    <AlternatingRowStyle BackColor="White" />
                                                    <Columns>
                                                        <asp:CommandField HeaderText="Edit" ShowEditButton="True" />
                                                        <asp:BoundField DataField="No" HeaderText="SrNo">
                                                            <ItemStyle />
                                                        </asp:BoundField>
                                                        <asp:BoundField DataField="Size" HeaderText="Size">
                                                            <ItemStyle  />
                                                        </asp:BoundField>
                                                        <asp:BoundField DataField="GSM" HeaderText="GSM">
                                                            <ItemStyle  />
                                                        </asp:BoundField>
                                                        <asp:BoundField DataField="Grain" HeaderText="Grain">
                                                            <ItemStyle />
                                                        </asp:BoundField>
                                                        <asp:BoundField DataField="UnitName" HeaderText="Unit" />
                                                        <asp:BoundField DataField="Qty" DataFormatString="{0:F}" HeaderText="Qty">
                                                            <ItemStyle />
                                                        </asp:BoundField>
                                                        <asp:BoundField DataField="Rate" DataFormatString="{0:F}" HeaderText="Rate">
                                                            <ItemStyle  />
                                                        </asp:BoundField>
                                                        <asp:BoundField DataField="Total" HeaderText="Total" />
                                                        <asp:BoundField DataField="Remark" HeaderText="Remark">
                                                            <ItemStyle />
                                                        </asp:BoundField>
                                                        <asp:CommandField HeaderText="Delete" ShowDeleteButton="True" />
                                                        <asp:TemplateField>
                                                            <ItemTemplate>
                                                                <asp:HiddenField ID="hdnCatCode" runat="server" Value='<%# Eval("CCode") %>' />
                                                                <asp:HiddenField ID="hdnItem" runat="server" Value='<%# Eval("ICode") %>' />
                                                                <asp:HiddenField ID="hdnUnitID" runat="server" Value='<%# Eval("UnitID") %>' />
                                                            </ItemTemplate>
                                                        </asp:TemplateField> 
```

```
 </Columns>
                                                    <EditRowStyle BackColor="#CCCCCC" />
                                                    <FooterStyle BackColor="#424242" Font-Bold="True" ForeColor="White" />
                                                    <HeaderStyle BackColor="#424242" Font-Bold="True" ForeColor="White" />
                                                    <PagerStyle  ForeColor="White" HorizontalAlign="Center" />
                                                    <RowStyle BackColor="White" />
                                                    <SelectedRowStyle BackColor="#fff" Font-Bold="True" ForeColor="#333333" />
                                                    <%-- <SortedAscendingCellStyle BackColor="#F5F7FB" />
                                  <SortedAscendingHeaderStyle BackColor="#6D95E1" />
                                  <SortedDescendingCellStyle BackColor="#E9EBEF" />
                                  <SortedDescendingHeaderStyle BackColor="#4870BE" />--%>
                                                </asp:GridView>                       

                                        </div>
                                            </asp:Panel>
           </fieldset>

                            <table>
                            <tr>
                            <td>
                            <!--<asp:Label ID="lblMsg1" runat="server" ForeColor="#CC3300"></asp:Label>-->
                            <div id="dvPrint" visible="false">
                                <%=sPrint %>
                            </div>
                            </td>
                            </tr>
                            <tr>
                             <td>
                        <div id="dvchck">
                            <asp:CheckBox ID="chkSearch" style="text-align:center" onclick="Cash_Cheque();"  runat="server" Text="Search">
                            </asp:CheckBox>
                         <div>

 </div>

                        </div>

                        </td>
                        <td>
                        <asp:Button ID="btnSave" runat="server" OnClick="btnSave_Click" Text="Save" 
                                Height="25px" Width="75px" CssClass ="btn" />
                            <!--<asp:ImageButton ID="ImageButton1" runat="server" ImageUrl="~/images/btn.png"  />-->

                            <asp:Button ID="btnCancel" runat="server" OnClick="btnCancel_Click" 
                                Text="Cancel" Height="25px" CssClass="btn" Width="75px" />

                        </td>

                            </tr>
                            <tr style="display: none" id="trSearch" runat="server">
                        <td style="height: 40px" colspan="2">
                            <table style="width: 550px" border="0">
                                <tbody>
                                    <tr>
                                        <td>
                                            <strong>Code </strong>
                                        </td>
                                        <td>
                                            <asp:TextBox ID="txtSCode" runat="server" Width="75px" onkeypress="return isNumberKey(event)"
                                                OnTextChanged="txtSCode_TextChanged" autocomplete="off"></asp:TextBox>                                                <asp:Button ID="btnSearch" OnClick="btnSearch_Click" runat="server" Text="Search" Width="71px" CssClass="btn"></asp:Button>
                                        </td>
                                        <td style="font-weight: bold" valign="top">
                                        </td>
                                        <td style="font-weight: bold" valign="top" align="right">
                                            <asp:UpdatePanel ID="UpdatePanel2" runat="server">
                                                <ContentTemplate>
                                                    <asp:TextBox ID="txtSName" runat="server" autocomplete="off" Width="175px" AutoPostBack="True"
                                                        Visible="False"></asp:TextBox>
                                                </ContentTemplate>
                                            </asp:UpdatePanel>
                                        </td>
                                        <td style="font-weight: bold" valign="top" align="right">

                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td align="center" colspan="2">
                            <asp:Panel ID="pnlPo" runat="server" Height="400px" Width="750px" ScrollBars="Horizontal">
         <!--<div class="GridDock" id="dvGridWidth" style="overflow:scroll;border:1px;">-->
                                <asp:GridView ID="gvPO" runat="server" AutoGenerateColumns="False" CellPadding="4"
                                    ForeColor="#424242" GridLines="None" AllowPaging="True" 
  OnPageIndexChanging="gvPO_PageIndexChanging"
                                    OnRowDataBound="gvPO_RowDataBound" Width="1px">
                                    <AlternatingRowStyle BackColor="White" />
                                    <Columns>
                                        <asp:TemplateField HeaderText="Code">
                                            <ItemTemplate>
                                                <asp:HiddenField ID="hdnFrght" runat="server" Value='<%# Eval("mstfrghtper") %>' />
                                                <asp:HiddenField ID="hdnTin" runat="server" Value='<%# Eval("mstlotno") %>' />
                                                <asp:HiddenField ID="hdnVat" runat="server" Value='<%# Eval("mstsection") %>' />
                                                <asp:LinkButton ID="lnkCode" runat="server" Text='<%# Eval("mstcode") %>' OnClick="lnkCode_Click">code</asp:LinkButton>
                                                <asp:HiddenField ID="hdnParty" runat="server" Value='<%# Eval("mstptcode") %>' />
                                            </ItemTemplate>
                                        </asp:TemplateField>
                                        <asp:BoundField DataField="mstdate" HeaderText="Date" DataFormatString="{0:dd-MM-yyyy}" />
                                        <asp:BoundField DataField="mstContactPerson" HeaderText="Consignee" />
                                        <asp:BoundField DataField="msttaxper" HeaderText="Tax" DataFormatString="{0:F}" />
                                        <asp:BoundField DataField="msttota" HeaderText="Total" DataFormatString="{0:F}" />
                                        <asp:BoundField DataField="mstdeliDes" HeaderText="delivery" />
                                        <asp:BoundField DataField="mstindno" HeaderText="Tin" />
                                        <asp:BoundField DataField="mstpodate" HeaderText="Del date" DataFormatString="{0:dd-MM-yyyy}" />
                                        <asp:BoundField DataField="mstpayDes" HeaderText="PayDes">
                                            <FooterStyle Wrap="False" />
                                            <HeaderStyle Wrap="False" />
                                            <ItemStyle Font-Bold="False" Font-Italic="False" Font-Underline="False" Wrap="False" />
                                        </asp:BoundField>
                                        <asp:BoundField DataField="mstrema" HeaderText="Remark">
                                            <ItemStyle Width="70px" Wrap="True" />
                                        </asp:BoundField>
                                        <asp:BoundField DataField="mstchno" HeaderText="PoRefNo" />
                                        <asp:TemplateField HeaderText="Print">
                                            <ItemTemplate>
                                                <%--<asp:LinkButton ID="LinkButton1" runat="server" onclick="lnkPrint_Click" OnClientClick="window.open ('Report.aspx','mywindow','width=350,height=250');">Print</asp:LinkButton>--%>
                                                <asp:LinkButton ID="lnkPrint" runat="server" OnClick="lnkPrint_Click">Print</asp:LinkButton>
                                            </ItemTemplate>
                                        </asp:TemplateField>
                                        <asp:TemplateField HeaderText="Delete">
                                            <ItemTemplate>
                                                <%--<asp:LinkButton ID="LinkDelete" runat="server" OnClick="LinkDelete_Click">Delete</asp:LinkButton>--%>
                                                <asp:ImageButton ID="DeleteButton" runat="server" Width="20px" Height="20px" OnClientClick="if (!window.confirm('Are you sure you want to delete this item?')) return false;"
                                                    OnClick="LinkDelete_Click" ImageUrl="~/images/delete.png" CommandName="delete">
                                                </asp:ImageButton>
                                                <controlstyle width="20px" height="20px" />
                                                <itemstyle width="50px" />
                                            </ItemTemplate>
                                        </asp:TemplateField>
                                    </Columns>
                                    <EditRowStyle BackColor="#2461BF" />
                                    <FooterStyle BackColor="#424242" Font-Bold="True" ForeColor="White" />
                                    <HeaderStyle BackColor="#424242" Font-Bold="True" ForeColor="White" />
                                    <PagerStyle BackColor="#424242" ForeColor="White" HorizontalAlign="Center" />
                                    <RowStyle BackColor="#EFF3FB" />
                                    <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
                                </asp:GridView>
                               <!-- </div>-->
                            </asp:Panel>
                            <%-- </ContentTemplate>
                  </asp:UpdatePanel>--%>
                        </td>
                    </tr>

                            </table>

       </ContentTemplate>

       </asp:UpdatePanel>
   </fieldset>
</div> 
```

**jQuery**

```
<script>
  $(document).ready(function() {
        SearchText();
        SearchItem();
    });
  function SearchText() {
  $('input[name$="tbAuto"]').autocomplete({
        source: function (request, response) {
            $.ajax({
                url: "PartyList.asmx/FetchPartyList",
                data: "{ 'prefix': '" + request.term + "' }",
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    response(data.d);
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(textStatus);
                }
            });
        },
        minLength: 1,
        focus: function(event, ui) {
            $('input[name$="tbAuto"]').val(ui.item.Name);
            return false;
        },
        select: function(event, ui) {
            $('input[name$="tbAuto"]').val(ui.item.Name);
            $('input[name$="tbHidden"]').val(ui.item.value);
            return false;
        }
    }).data('autocomplete')._renderItem = function(ul, item) {
        return $('<li>').data('item.autocomplete', item).append('<a>' + item.Name + '</a>').appendTo(ul);
    };
}

function SearchItem() {
  $('input[name$="txtitem"]').autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "Itemslist.asmx/FetchItemList",
                    data: "{ 'prefix': '" + request.term + "' }",
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        response(data.d);
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        alert(textStatus);
                    }
                });
            },
            minLength: 1,
            focus: function(event, ui) {
                $('input[name$="txtitem"]').val(ui.item.Name);
                return false;
            },
            select: function(event, ui) {
                $('input[name$="txtitem"]').val(ui.item.Name);
                $('input[name$="hditem"]').val(ui.item.value);
                return false;
            }
        }).data('autocomplete')._renderItem = function(ul, item) {
            return $('<li>').data('item1.autocomplete', item).append('<a>' + item.Name + '</a>').appendTo(ul);
        };
 }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:58:35.067

当您使用 UpdatePanel 时，在 UpdatePanel 中发布后，您需要重新初始化您的 javascript，因为在重播时，Dom 已更改，之前的代码不再工作。

因此，将其添加到您的代码中：

```
$(document).ready(function() {
    var prm = Sys.WebForms.PageRequestManager.getInstance();    
    prm.add_initializeRequest(InitializeRequest);
    prm.add_endRequest(EndRequest);

    SearchText();
    SearchItem();
});

function InitializeRequest(sender, args) {      
}

function EndRequest(sender, args) {
    SearchText();
    SearchItem();
} 
```

# xml - Web 部件中的甘特图视图

> ID：13044185
> 
> 赞同：0
> 
> 时间：2012-10-24T06:51:00.313
> 
> 标签：xml, list, sharepoint, view, gantt-chart

我正在尝试在 Web 部件中显示甘特图视图。

首先，我只是想确保甘特图视图具有正确的 XML。所以我从模式列表中创建了甘特图。这工作得很好。然后我尝试将此 XML 复制到 Web 部件中。但现在我没有得到甘特图视图，我只是得到一个普通的列表视图。

这是甘特图视图的 XML：

```
<WebPartPages:WebPartZone runat="server" FrameType="None" ID="Main" Title="loc:Main">
                <ZoneTemplate>
                    <WebPartPages:XsltListViewWebPart ID="XsltListViewWebPart" runat="server" Description="" ListDisplayName="Strategic Items" PartOrder="0" HelpLink="" AllowRemove="True" IsVisible="True" AllowHide="True" UseSQLDataSourcePaging="True" ExportControlledProperties="False" IsIncludedFilter="" DataSourceID="" Title="My Strategic Items" ViewFlag="8388621" NoDefaultStyle="" AllowConnect="True" FrameState="Normal" CatalogIconImageUrl="/_layouts/images/itgen.png" PageSize="-1" PartImageLarge="/_layouts/images/itgen.png" AsyncRefresh="False" Dir="Default" DetailLink="/Lists/StrategicItems" ShowWithSampleData="False" FrameType="Default" PartImageSmall="" IsIncluded="True" SuppressWebPartChrome="False" AllowEdit="True" AutoRefresh="False" AutoRefreshInterval="60" AllowMinimize="True" WebId="00000000-0000-0000-0000-000000000000" ViewContentTypeId="" InitialAsyncDataFetch="False" GhostedXslLink="main.xsl" MissingAssembly="Cannot import this Web Part." HelpMode="Modeless"  AllowZoneChange="True" ManualRefresh="False" __MarkupType="vsattributemarkup"  __AllowXSLTEditing="true" WebPart="true" Height="">
                        <XmlDefinition>
                            <View BaseViewID="1" Type="GANTT" WebPartZoneID="Main" DisplayName="Gantt View" DefaultView="TRUE" MobileView="FALSE" MobileDefaultView="FALSE" SetupPath="pages\viewpage.aspx" ImageUrl="/_layouts/images/generic.png" Url="GanttView.aspx">
                                <ViewFields>
                                    <FieldRef Name="Icon" />
                                    <FieldRef Name="LinkTitle" />
                                    <FieldRef Name="Item Type" />
                                    <FieldRef Name="Responsible Business" />
                                    <FieldRef Name="AssignedTo" />
                                    <FieldRef Name="Progress Status" />
                                    <FieldRef Name="DMTargetDate" />
                                    <FieldRef Name="% Complete" />
                                </ViewFields>
                                <ViewData>
                                    <FieldRef Name="DMStartDate" Type="GanttStartDate" />
                                    <FieldRef Name="DMTargetDate" Type="GanttEndDate" />
                                    <FieldRef Name="Title" Type="GanttTitle" />
                                    <FieldRef Name="% Complete" Type="GanttPercentComplete" />
                                </ViewData>
                                <Query />
                                <!--<Aggregations Value="Off" />-->
                                <RowLimit Paged="TRUE">30</RowLimit>
                                <!--<Mobile MobileItemLimit="99" />-->
                                <Toolbar Type="Standard" />
                                <!--<XslLink Default="TRUE">main.xsl</XslLink>-->
                                <ParameterBindings>
                                    <ParameterBinding Name="NoAnnouncements" Location="Resource(wss,noXinviewofY_LIST)" />
                                    <ParameterBinding Name="NoAnnouncementsHowTo" Location="Resource(wss,noXinviewofY_DEFAULT)" />
                                </ParameterBindings>
                            </View>
                        </XmlDefinition>
                    </WebPartPages:XsltListViewWebPart>
                </ZoneTemplate>
            </WebPartPages:WebPartZone> 
```

有谁知道为什么它只显示普通列表视图而不是甘特图视图？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:29:26.760

请使用列表视图 Web 部件，指定甘特视图作为要显示的视图。

不要将 XML 复制到另一个 Web 部件中，它不会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T20:41:54.200

我也想要这个，因为我想以小时而不是天来显示甘特图。可能确实存在 XML/XSL 视图功能，只要 Web 部件能够查看列表数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T18:41:44.347

> 请使用列表视图 Web 部件，指定甘特视图作为要显示的视图。

从外部列表创建视图时，甘特视图不是一个选项。有没有其他方法可以绕过这个障碍？

# javascript - 如何将复选框选中的行索引从gridview传递给javascript

> ID：13044193
> 
> 赞同：1
> 
> 时间：2012-10-24T06:51:42.727
> 
> 标签：javascript, asp.net

我有一个gridview，我想将rowindex 值传递给javascript。我尝试使用以下代码，但它不起作用。

在网格视图中

```
<asp:TemplateField>
     <ItemTemplate>
        <asp:CheckBox ID="chkSelect" runat="server"  onclick="javascript:return checkSts('<%# DataBinder.Eval(Container.DataItemIndex) %>')" />
     </ItemTemplate>
</asp:TemplateField> 
```

在 Javascript 中：

```
function checkSts(i) {  alert(i); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:23:34.970

您可以将其键入为

```
<input type="checkbox" onclick="return checkSts('<%#Eval("FieldName")%>')" /> 
```

和工作。

替代`asp:checkbox`

```
<asp:CheckBox runat="server" ID="chBEna" onclick='<%#getCode(Container.DataItem)%>' /> 
```

和后面的代码

```
protected string getCode(object oItem)
{
    string cPid = DataBinder.Eval(oItem, "FieldName").ToString();

    return "return checkSts('" + cPid + "')";
} 
```

既检查又有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:28:20.857

您可以`rowindex`通过使用`parentElement`到达特定元素嵌套的行来获取元素

例如。

```
onclick="callme(this)"

function callme(obj)
{
  obj.parentElement.parentElement.rowIndex--- this wud be rowindex of the row.
} 
```

# c# - 使用 C# 将大端的浮点值转换为小端

> ID：13044200
> 
> 赞同：2
> 
> 时间：2012-10-24T06:52:11.777
> 
> 标签：c#, arrays, floating-point, endianness

是否可以将浮点数从大端转换为小端？我有一个来自大端平台的值，我通过[UDP](http://en.wikipedia.org/wiki/User_Datagram_Protocol)将其发送到 Windows 进程（[小端](https://en.wikipedia.org/wiki/Endianness)）。这个值是一个浮点数，但是当我尝试 BitConverter.ToSingle 时，我总是得到 5.832204E-42，但它应该是 36.000。

我究竟做错了什么？

这是一段代码：

```
// Receive thread
private void ReceiveData()
{
    int count = 0;

    IPEndPoint remoteIP = new IPEndPoint(IPAddress.Parse("10.0.2.213"), port);
    client = new UdpClient(remoteIP);
    while (true)
    {
        try
        {
            IPEndPoint anyIP = new IPEndPoint(IPAddress.Any, 0);
            byte[] data = client.Receive(ref anyIP);

            float x = BitConverter.ToSingle(data, 0);
            float y = BitConverter.ToSingle(data, 4);
            float z = BitConverter.ToSingle(data, 8);
            float alpha = BitConverter.ToSingle (data, 12);
            float theta = BitConverter.ToSingle (data, 16);
            float phi = BitConverter.ToSingle (data, 20);

            print(">> " + x.ToString() + ", "+ y.ToString() + ", "+ z.ToString() + ", " +
                  alpha.ToString() + ", "+ theta.ToString() + ", "+ phi.ToString());

            // Latest UDP packet
            lastReceivedUDPPacket=x.ToString()+" Packet#: "+count.ToString();
            count = count+1;
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T07:36:17.583

36.0 和 5.832204E-42 是字节序相反的，所以这是一个字节序问题。在 Windows / .NET 上，您通常是 little-endian，所以我猜数据是 big-endian。这意味着您需要分别反转*每个值*的数据（而不是整个数组）。

要以 CPU 安全的方式编写此代码，最好的选择是检查`BitConverter.IsLittleEndian`，并在必要时进行补偿。例如：

```
public static float ReadSingleBigEndian(byte[] data, int offset)
{
    return ReadSingle(data, offset, false);
}
public static float ReadSingleLittleEndian(byte[] data, int offset)
{
    return ReadSingle(data, offset, true);
}
private static float ReadSingle(byte[] data, int offset, bool littleEndian)
{
    if (BitConverter.IsLittleEndian != littleEndian)
    {   // other-endian; reverse this portion of the data (4 bytes)
        byte tmp = data[offset];
        data[offset] = data[offset + 3];
        data[offset + 3] = tmp;
        tmp = data[offset + 1];
        data[offset + 1] = data[offset + 2];
        data[offset + 2] = tmp;
    }
    return BitConverter.ToSingle(data, offset);
} 
```

和：

```
float x= ReadSingleBigEndian(data, 0);
float y= ReadSingleBigEndian(data, 4);
float z= ReadSingleBigEndian(data, 8);
float alpha= ReadSingleBigEndian(data, 12);
float theta= ReadSingleBigEndian(data, 16);
float phi= ReadSingleBigEndian(data, 20); 
```

# python - 在 CentOs 中安装 mysql-python 返回错误

> ID：13044201
> 
> 赞同：13
> 
> 时间：2012-10-24T06:52:12.467
> 
> 标签：python, mysql, django, mysql-python

我想在 CentOs 上运行一个 django 项目。我尝试通过 easy_install 和 pip 安装 mysql-python，但我都遇到了错误。我用谷歌搜索了这个问题并找到了一些建议，但没有一个对我有帮助。

错误是：

```
_mysql.c:29:20: error: Python.h: No such file or directory
_mysql.c:40:26: error: structmember.h: No such file or directory
_mysql.c:74: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:75: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:76: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:77: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:78: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:79: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:80: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:81: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:82: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:83: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:84: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:87: error: expected specifier-qualifier-list before ‘PyObject_HEAD’
_mysql.c:97: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘_mysql_ConnectionObject_Type’
_mysql.c:100: error: expected specifier-qualifier-list before ‘PyObject_HEAD’
_mysql.c:108: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘_mysql_ResultObject_Type’
_mysql.c:127: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:261: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:361: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:379: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:402: error: expected declaration specifiers or ‘...’ before ‘PyObject’
_mysql.c:403: error: expected declaration specifiers or ‘...’ before ‘PyObject’
_mysql.c: In function ‘_mysql_ResultObject_Initialize’:
_mysql.c:405: error: ‘NULL’ undeclared (first use in this function)
_mysql.c:405: error: (Each undeclared identifier is reported only once
_mysql.c:405: error: for each function it appears in.)
_mysql.c:407: warning: initialization from incompatible pointer type
_mysql.c:409: error: ‘PyObject’ undeclared (first use in this function)
_mysql.c:409: error: ‘conv’ undeclared (first use in this function)
_mysql.c:409: error: invalid operands to binary * (have ‘char **’ and ‘char **’)
_mysql.c:409: warning: statement with no effect
_mysql.c:413: warning: implicit declaration of function ‘PyArg_ParseTupleAndKeywords’
_mysql.c:413: error: ‘args’ undeclared (first use in this function)
_mysql.c:413: error: ‘kwargs’ undeclared (first use in this function)
_mysql.c:417: warning: implicit declaration of function ‘PyDict_New’
_mysql.c:421: warning: implicit declaration of function ‘Py_INCREF’
_mysql.c:423: error: ‘_mysql_ResultObject’ has no member named ‘conn’
_mysql.c:423: error: expected expression before ‘)’ token
_mysql.c:423: error: invalid operands to binary * (have ‘char **’ and ‘char **’)
_mysql.c:423: warning: statement with no effect
_mysql.c:425: error: ‘_mysql_ResultObject’ has no member named ‘use’
_mysql.c:425: warning: statement with no effect
_mysql.c:426: error: ‘Py_BEGIN_ALLOW_THREADS’ undeclared (first use in this function)
_mysql.c:426: warning: statement with no effect
_mysql.c:428: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:428: warning: passing argument 1 of ‘mysql_use_result’ from incompatible pointer type
/usr/include/mysql/mysql.h:401: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’
_mysql.c:430: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:430: warning: passing argument 1 of ‘mysql_store_result’ from incompatible pointer type
/usr/include/mysql/mysql.h:400: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’
_mysql.c:431: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c:431: warning: statement with no effect
_mysql.c:432: error: ‘Py_END_ALLOW_THREADS’ undeclared (first use in this function)
_mysql.c:432: warning: statement with no effect
_mysql.c:434: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:434: warning: passing argument 1 of ‘mysql_field_count’ from incompatible pointer type
/usr/include/mysql/mysql.h:368: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’
_mysql.c:435: warning: implicit declaration of function ‘_mysql_Exception’
_mysql.c:438: error: ‘_mysql_ResultObject’ has no member named ‘converter’
_mysql.c:438: warning: implicit declaration of function ‘PyTuple_New’
_mysql.c:438: warning: statement with no effect
_mysql.c:439: warning: implicit declaration of function ‘Py_DECREF’
_mysql.c:443: error: ‘_mysql_ResultObject’ has no member named ‘nfields’
_mysql.c:443: warning: statement with no effect
_mysql.c:444: error: ‘_mysql_ResultObject’ has no member named ‘converter’
_mysql.c:450: error: ‘tmp’ undeclared (first use in this function)
_mysql.c:450: error: invalid operands to binary * (have ‘char **’ and ‘char **’)
_mysql.c:450: error: ‘fun’ undeclared (first use in this function)
_mysql.c:450: warning: left-hand operand of comma expression has no effect
_mysql.c:450: warning: statement with no effect
_mysql.c:451: warning: implicit declaration of function ‘PyInt_FromLong’
_mysql.c:451: warning: statement with no effect
_mysql.c:456: warning: implicit declaration of function ‘PyObject_GetItem’
_mysql.c:456: warning: statement with no effect
_mysql.c:459: warning: implicit declaration of function ‘PyErr_Occurred’
_mysql.c:460: warning: implicit declaration of function ‘PyErr_ExceptionMatches’
_mysql.c:460: error: ‘PyExc_KeyError’ undeclared (first use in this function)
_mysql.c:464: warning: implicit declaration of function ‘PyErr_Clear’
_mysql.c:466: error: ‘Py_None’ undeclared (first use in this function)
_mysql.c:466: warning: statement with no effect
_mysql.c:469: warning: implicit declaration of function ‘PySequence_Check’
_mysql.c:470: warning: implicit declaration of function ‘PySequence_Size’
_mysql.c:471: error: ‘fun2’ undeclared (first use in this function)
_mysql.c:471: error: invalid operands to binary * (have ‘char **’ and ‘char **’)
_mysql.c:471: warning: statement with no effect
_mysql.c:473: error: ‘t’ undeclared (first use in this function)
_mysql.c:473: error: invalid operands to binary * (have ‘char **’ and ‘char **’)
_mysql.c:473: warning: implicit declaration of function ‘PySequence_GetItem’
_mysql.c:473: warning: statement with no effect
_mysql.c:479: warning: implicit declaration of function ‘PyTuple_Check’
_mysql.c:479: warning: implicit declaration of function ‘PyTuple_GET_SIZE’
_mysql.c:481: error: ‘pmask’ undeclared (first use in this function)
_mysql.c:481: error: invalid operands to binary * (have ‘char **’ and ‘char **’)
_mysql.c:481: warning: statement with no effect
_mysql.c:482: warning: implicit declaration of function ‘PyTuple_GET_ITEM’
_mysql.c:482: warning: statement with no effect
_mysql.c:483: warning: statement with no effect
_mysql.c:484: warning: implicit declaration of function ‘PyInt_Check’
_mysql.c:485: warning: implicit declaration of function ‘PyInt_AS_LONG’
_mysql.c:495: warning: statement with no effect
_mysql.c:504: warning: statement with no effect
_mysql.c:507: warning: statement with no effect
_mysql.c:509: warning: implicit declaration of function ‘PyTuple_SET_ITEM’
_mysql.c:509: error: ‘_mysql_ResultObject’ has no member named ‘converter’
_mysql.c: In function ‘_mysql_ResultObject_clear’:
_mysql.c:535: warning: implicit declaration of function ‘Py_XDECREF’
_mysql.c:535: error: ‘_mysql_ResultObject’ has no member named ‘converter’
_mysql.c:536: error: ‘_mysql_ResultObject’ has no member named ‘converter’
_mysql.c:536: error: ‘NULL’ undeclared (first use in this function)
_mysql.c:536: warning: statement with no effect
_mysql.c:537: error: ‘_mysql_ResultObject’ has no member named ‘conn’
_mysql.c:538: error: ‘_mysql_ResultObject’ has no member named ‘conn’
_mysql.c:538: warning: statement with no effect
_mysql.c: At top level:
_mysql.c:545: error: expected declaration specifiers or ‘...’ before ‘PyObject’
_mysql.c:546: error: expected declaration specifiers or ‘...’ before ‘PyObject’
_mysql.c: In function ‘_mysql_ConnectionObject_Initialize’:
_mysql.c:548: error: ‘NULL’ undeclared (first use in this function)
_mysql.c:548: warning: initialization from incompatible pointer type
_mysql.c:549: error: ‘PyObject’ undeclared (first use in this function)
_mysql.c:549: error: ‘conv’ undeclared (first use in this function)
_mysql.c:549: error: invalid operands to binary * (have ‘char **’ and ‘char **’)
_mysql.c:549: warning: statement with no effect
_mysql.c:550: error: ‘ssl’ undeclared (first use in this function)
_mysql.c:550: error: invalid operands to binary * (have ‘char **’ and ‘char **’)
_mysql.c:550: warning: statement with no effect
_mysql.c:552: warning: initialization from incompatible pointer type
_mysql.c:552: warning: initialization from incompatible pointer type
_mysql.c:552: warning: initialization from incompatible pointer type
_mysql.c:553: warning: initialization from incompatible pointer type
_mysql.c:553: warning: initialization from incompatible pointer type
_mysql.c:555: warning: initialization from incompatible pointer type
_mysql.c:555: warning: initialization from incompatible pointer type
_mysql.c:555: warning: initialization from incompatible pointer type
_mysql.c:556: warning: initialization from incompatible pointer type
_mysql.c:556: warning: initialization from incompatible pointer type
_mysql.c:569: error: initializer element is not constant
_mysql.c:569: error: (near initialization for ‘kwlist[17]’)
_mysql.c:575: warning: initialization from incompatible pointer type
_mysql.c:576: warning: initialization from incompatible pointer type
_mysql.c:577: warning: initialization from incompatible pointer type
_mysql.c:579: error: ‘_mysql_ConnectionObject’ has no member named ‘converter’
_mysql.c:579: warning: statement with no effect
_mysql.c:580: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:580: warning: statement with no effect
_mysql.c:583: error: ‘args’ undeclared (first use in this function)
_mysql.c:583: error: ‘kwargs’ undeclared (first use in this function)
_mysql.c:616: error: ‘value’ undeclared (first use in this function)
_mysql.c:616: error: invalid operands to binary * (have ‘char **’ and ‘char **’)
_mysql.c:616: warning: statement with no effect
_mysql.c:617: warning: implicit declaration of function ‘PyMapping_GetItemString’
_mysql.c:617: warning: statement with no effect
_mysql.c:617: warning: implicit declaration of function ‘PyString_AsString’
_mysql.c:617: warning: assignment makes pointer from integer without a cast
_mysql.c:618: warning: statement with no effect
_mysql.c:618: warning: assignment makes pointer from integer without a cast
_mysql.c:619: warning: statement with no effect
_mysql.c:619: warning: assignment makes pointer from integer without a cast
_mysql.c:620: warning: statement with no effect
_mysql.c:620: warning: assignment makes pointer from integer without a cast
_mysql.c:621: warning: statement with no effect
_mysql.c:621: warning: assignment makes pointer from integer without a cast
_mysql.c:629: error: ‘Py_BEGIN_ALLOW_THREADS’ undeclared (first use in this function)
_mysql.c:629: warning: statement with no effect
_mysql.c:630: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:630: warning: passing argument 1 of ‘mysql_init’ from incompatible pointer type
/usr/include/mysql/mysql.h:380: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’
_mysql.c:633: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:634: warning: passing argument 1 of ‘mysql_options’ from incompatible pointer type
/usr/include/mysql/mysql.h:445: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’
_mysql.c:639: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:640: warning: passing argument 1 of ‘mysql_options’ from incompatible pointer type
/usr/include/mysql/mysql.h:445: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’
_mysql.c:644: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:644: warning: passing argument 1 of ‘mysql_options’ from incompatible pointer type
/usr/include/mysql/mysql.h:445: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’
_mysql.c:648: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:648: warning: passing argument 1 of ‘mysql_options’ from incompatible pointer type
/usr/include/mysql/mysql.h:445: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’
_mysql.c:649: warning: comparison of distinct pointer types lacks a cast
_mysql.c:650: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:650: warning: passing argument 1 of ‘mysql_options’ from incompatible pointer type
/usr/include/mysql/mysql.h:445: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’
_mysql.c:651: warning: comparison of distinct pointer types lacks a cast
_mysql.c:652: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:652: warning: passing argument 1 of ‘mysql_options’ from incompatible pointer type
/usr/include/mysql/mysql.h:445: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’
_mysql.c:653: warning: comparison of distinct pointer types lacks a cast
_mysql.c:654: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:654: warning: passing argument 1 of ‘mysql_options’ from incompatible pointer type
/usr/include/mysql/mysql.h:445: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’
_mysql.c:657: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:657: warning: passing argument 1 of ‘mysql_options’ from incompatible pointer type
/usr/include/mysql/mysql.h:445: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’
_mysql.c:661: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:662: warning: passing argument 1 of ‘mysql_ssl_set’ from incompatible pointer type
/usr/include/mysql/mysql.h:381: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’
_mysql.c:665: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:666: warning: passing argument 1 of ‘mysql_real_connect’ from incompatible pointer type
/usr/include/mysql/mysql.h:387: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’
_mysql.c:668: error: ‘Py_END_ALLOW_THREADS’ undeclared (first use in this function)
_mysql.c:668: warning: statement with no effect
_mysql.c:677: warning: statement with no effect
_mysql.c:683: error: ‘_mysql_ConnectionObject’ has no member named ‘converter’
_mysql.c:683: warning: statement with no effect
_mysql.c:691: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:691: warning: statement with no effect
_mysql.c: At top level:
_mysql.c:749: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c: In function ‘_mysql_ConnectionObject_clear’:
_mysql.c:781: error: ‘_mysql_ConnectionObject’ has no member named ‘converter’
_mysql.c:782: error: ‘_mysql_ConnectionObject’ has no member named ‘converter’
_mysql.c:782: error: ‘NULL’ undeclared (first use in this function)
_mysql.c:782: warning: statement with no effect
_mysql.c: At top level:
_mysql.c:789: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:817: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:833: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:851: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:870: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:896: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:918: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:950: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:976: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1003: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1022: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1039: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1055: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1077: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1124: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1167: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1169: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1203: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1233: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1267: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1299: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1335: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1359: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1389: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1414: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1453: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1492: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1497: error: expected declaration specifiers or ‘...’ before ‘PyObject’
_mysql.c:1500: error: expected declaration specifiers or ‘...’ before ‘_PYFUNC’
_mysql.c: In function ‘_mysql__fetch_row’:
_mysql.c:1506: error: ‘PyObject’ undeclared (first use in this function)
_mysql.c:1506: error: ‘v’ undeclared (first use in this function)
_mysql.c:1506: error: invalid operands to binary * (have ‘char **’ and ‘char **’)
_mysql.c:1506: warning: statement with no effect
_mysql.c:1507: error: ‘_mysql_ResultObject’ has no member named ‘use’
_mysql.c:1508: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c:1508: warning: passing argument 1 of ‘mysql_fetch_row’ from incompatible pointer type
/usr/include/mysql/mysql.h:454: note: expected ‘struct MYSQL_RES *’ but argument is of type ‘char **’
_mysql.c:1510: error: ‘Py_BEGIN_ALLOW_THREADS’ undeclared (first use in this function)
_mysql.c:1510: warning: statement with no effect
_mysql.c:1511: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c:1511: warning: passing argument 1 of ‘mysql_fetch_row’ from incompatible pointer type
/usr/include/mysql/mysql.h:454: note: expected ‘struct MYSQL_RES *’ but argument is of type ‘char **’
_mysql.c:1512: error: ‘Py_END_ALLOW_THREADS’ undeclared (first use in this function)
_mysql.c:1512: warning: statement with no effect
_mysql.c:1514: error: ‘_mysql_ResultObject’ has no member named ‘conn’
_mysql.c:1514: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:1514: warning: passing argument 1 of ‘mysql_errno’ from incompatible pointer type
/usr/include/mysql/mysql.h:371: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’
_mysql.c:1515: error: ‘_mysql_ResultObject’ has no member named ‘conn’
_mysql.c:1519: warning: implicit declaration of function ‘_PyTuple_Resize’
_mysql.c:1519: error: ‘r’ undeclared (first use in this function)
_mysql.c:1522: warning: implicit declaration of function ‘convert_row’
_mysql.c:1522: warning: statement with no effect
_mysql.c: At top level:
_mysql.c:1540: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1619: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1647: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1673: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1713: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1755: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1774: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1793: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1808: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1828: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1867: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1885: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1908: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1925: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1941: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1970: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:1993: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:2023: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:2045: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:2072: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:2098: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:2139: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:2159: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c: In function ‘_mysql_ConnectionObject_dealloc’:
_mysql.c:2193: error: ‘PyObject’ undeclared (first use in this function)
_mysql.c:2193: error: ‘o’ undeclared (first use in this function)
_mysql.c:2193: error: invalid operands to binary * (have ‘char **’ and ‘char **’)
_mysql.c:2193: warning: statement with no effect
_mysql.c:2196: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:2197: warning: implicit declaration of function ‘_mysql_ConnectionObject_close’
_mysql.c:2197: error: ‘NULL’ undeclared (first use in this function)
_mysql.c:2197: warning: statement with no effect
_mysql.c:2200: warning: implicit declaration of function ‘PyMem_Free’
_mysql.c: At top level:
_mysql.c:2203: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:2224: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:2239: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:2261: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c: In function ‘_mysql_ResultObject_dealloc’:
_mysql.c:2283: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c:2283: warning: passing argument 1 of ‘mysql_free_result’ from incompatible pointer type
/usr/include/mysql/mysql.h:447: note: expected ‘struct MYSQL_RES *’ but argument is of type ‘char **’
_mysql.c: At top level:
_mysql.c:2288: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:2302: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘_mysql_ConnectionObject_methods’
_mysql.c:2517: error: array type has incomplete element type
_mysql.c:2518: error: ‘T_INT’ undeclared here (not in a function)
_mysql.c:2518: warning: implicit declaration of function ‘offsetof’
_mysql.c:2518: error: expected expression before ‘_mysql_ConnectionObject’
_mysql.c:2518: error: ‘READONLY’ undeclared here (not in a function)
_mysql.c:2525: error: ‘T_OBJECT’ undeclared here (not in a function)
_mysql.c:2525: error: expected expression before ‘_mysql_ConnectionObject’
_mysql.c:2532: error: ‘T_UINT’ undeclared here (not in a function)
_mysql.c:2532: error: expected expression before ‘_mysql_ConnectionObject’
_mysql.c:2539: error: expected expression before ‘_mysql_ConnectionObject’
_mysql.c:2546: error: expected expression before ‘_mysql_ConnectionObject’
_mysql.c:2553: error: ‘NULL’ undeclared here (not in a function)
_mysql.c:2556: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘_mysql_ResultObject_methods’
_mysql.c:2608: error: array type has incomplete element type
_mysql.c:2609: error: expected expression before ‘_mysql_ResultObject’
_mysql.c:2619: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:2649: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:2681: error: expected declaration specifiers or ‘...’ before ‘PyObject’
_mysql.c: In function ‘_mysql_ConnectionObject_setattr’:
_mysql.c:2683: error: ‘v’ undeclared (first use in this function)
_mysql.c:2684: warning: implicit declaration of function ‘PyErr_SetString’
_mysql.c:2684: error: ‘PyExc_AttributeError’ undeclared (first use in this function)
_mysql.c:2689: warning: implicit declaration of function ‘PyMember_Set’
_mysql.c: At top level:
_mysql.c:2706: error: expected declaration specifiers or ‘...’ before ‘PyObject’
_mysql.c: In function ‘_mysql_ResultObject_setattr’:
_mysql.c:2708: error: ‘v’ undeclared (first use in this function)
_mysql.c:2709: error: ‘PyExc_AttributeError’ undeclared (first use in this function)
_mysql.c: At top level:
_mysql.c:2727: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘_mysql_ConnectionObject_Type’
_mysql.c:2815: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘_mysql_ResultObject_Type’
_mysql.c:2905: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘_mysql_methods’
_mysql.c:2977: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
_mysql.c:3022: warning: return type defaults to ‘int’
_mysql.c: In function ‘DL_EXPORT’:
_mysql.c:3022: error: expected declaration specifiers before ‘init_mysql’
_mysql.c:3130: error: expected ‘{’ at end of input
error: Setup script exited with error: command 'gcc' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-24T07:01:30.190

我认为您需要先安装python开发库：

```
yum install python-devel 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-01-29T14:42:32.143

只是提到其他可能也会在这里结束的人，

安装 python-devel 后，我遇到了同样的错误，但是缺少**mysql_config.h**我在安装 mysql-devel 时解决了这个错误

```
$ yum install mysql-devel.x86_64 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-07T08:08:56.867

我找到了一个类似的解决方案：

```
yum -y install python-devel mysql-devel 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-15T23:16:46.760

我有同样的错误，但出于不同的原因（pypy + virtualenv）。

这是我得到的错误：

```
Installing collected packages: mysql-python
  Found existing installation: MySQL-python 1.2.4
    Uninstalling MySQL-python:
      Successfully uninstalled MySQL-python
  Running setup.py install for mysql-python
    building '_mysql' extension
    cc -O2 -fPIC -Wimplicit -Dversion_info=(1,2,4,'final',1) -D__version__=1.2.4 -I/usr/include/mysql -I/mnt/hgfs/Work/devel-centos/include -c _mysql.c -o build/temp.linux-x86_64-2.7/_mysql.o -g -pipe -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -fno-strict-aliasing -fwrapv -fPIC -DUNIV_LINUX -DUNIV_LINUX

_mysql.c:29:20: error: Python.h: No such file or directory 
```

请注意`include_dir`is `-I/mnt/hgfs/Work/devel-centos/include`(that's `$VIRTUAL_ENV/include`)，并且该位置没有任何内容。

我的设置：

*   CentOS 6.4
*   `pypy` `2.0.2`已安装（即 python 2.7.3）
*   `virtualenv` `1.10.1`安装并创建了我的环境

    `virtualenv -p /usr/bin/pypy devel-centos`

*   已安装 python 2.6

    `yum install python-devel`没有为我解决问题；它创建了`/usr/lib64/python2.6/`在该`pip install mysql-python`步骤中未使用的。

解决问题的2种方法：

1.  将正确的 python 头文件符号链接到您的 virtualenv：

    ```
    yum install pypy-devel  # which creates /usr/lib64/pypy-2.0.2/
    ln -s /usr/lib64/pypy-2.0.2/include $VIRTUAL_ENV/include 
    ```

2.  或将`setup.cfg`文件更改为`mysql-python`

    ```
    pip install --no-install mysql-python 
    ```

    然后编辑`$VIRTUAL_ENV/build/mysql-python/setup.cfg`

    ```
    [build_ext]
    include_dirs = /usr/lib64/pypy-2.0.2/include 
    ```

    并继续安装。

    ```
    pip install --no-download mysql-python 
    ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-28T14:42:50.630

解决这个问题的另一种方法是`yum install python27-MySQL-python.x86_64`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-21T12:57:43.860

同样的问题；Python.h not found，发现没有安装python-virtualenv；

```
yum -y install python-virtualenv 
```

# python - 运行包含数百万个字典的字典时出现 Python 内存错误

> ID：13044202
> 
> 赞同：0
> 
> 时间：2012-10-24T06:52:21.437
> 
> 标签：python, memory, dictionary, for-loop

我的对象是一个字典，里面有大约 100 万个对象（{} 和 {}，有时是 {{}、{{}}、{}...}

在使用 FOR 循环运行项目时，我收到以下行的错误：

```
lines = fp.readlines()
MemoryError: Fatal Python error: PyEval_RestoreThread: NULL tstate 
```

我对这个对象大约有 5 到 6 个动作要做。尝试在一个迭代循环中完成所有操作 - 会触发此错误。在单独的循环上运行（每个循环执行一个操作） - 前两个循环运行良好，但是，总是在我第三次运行循环时（大约在 80,000 次迭代之后）Python 崩溃（如上所述的内存错误）。

我改变了动作顺序 - 意味着改变了循环顺序，它总是在第三个“for”循环中失败......

我尝试使用更强大、更快的机器，但仍然出现这些错误。

请指教。

附言

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T06:59:36.507

我想这对你的 RAM 来说太多了。如果可能，您应该真正在一个 for 循环中执行操作，并优化您的迭代以提高内存效率。

```
fp.readlines() 
```

呃，它一次读入文件的所有行，因此它的所有内容都在内存中。我不知道细节，将文件内容转换为字典的方式。但是如果它依赖于文件中的行，您可以简单地迭代文件，每个迭代步骤都会产生一个新行。

```
for line in fp:
    # ... 
```

但是，如果您再次将文件中的所有信息存储在字典中，您将再次面临同样的问题。

通过检查（如果可能）重复来优化存储在内存中的数据是 CPU 密集型的，但可能需要降低内存使用率。

* * *

在这两个片段执行相同的操作之后，一致性存储和生成器之间的区别应该很明显，但前者比后者更占用内存。请注意，这`iterate_to`是该函数的完全副本，`range/xrange`仅用于演示目的。

```
def iterate_to(num):
    list_ = []
    for i in xrange(num):
        list_.append(i)
    return list_

def operate_on(num):
    list_ = []
    for i in iterate_to(num):
        x = (i ** i + 5) / (i * 2)
        list_.append(x)
    return list_

print sum(operate_on(1000000)) 
```

虽然该`sum`函数对由 返回的列表中的每个元素求和，但每个*1000000 个条目*(!!) 的`operate_on`两个列表在内存中是一致的。您可能已经认为它可以提高内存效率。

 *```
def iterate_to(num):
    for i in xrange(num):
        yield i

def operate_on(num):
    for i in iterate_to(num):
        x = (i ** i + 5) / (i * 2)
        yield x

print sum(operate_on(1000000)) 
```

在此示例中，表达式`yield`用于使 the`iterate_to`和`operate_on`函数都成为生成器函数。在迭代时，每个迭代步骤，直接计算迭代的下一个元素，而不是依赖于先前构造的项目集合。
更多关于发电机[在这里](http://wiki.python.org/moin/Generators)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T07:28:44.287

这很可能是内存问题 - python 2.* 不能使用超过 2Gb 的 RAM。这可能是由于垃圾收集延迟而发生的。安装 gc 库并尝试在密集处理块之后手动调用垃圾收集，例如在每个 FOR 循环之后。用文件内容填充字典后，从文件对象中清除内存。无论如何，从使用 top 命令或任务管理器查看内存消耗开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:39:11.363

gc.colletc() 没有解决我的问题。触发更少内存使用的更改是在一个巨大的 {Dictionary} 中遍历我的 1M 对象并将其中一些“移动”到特殊的 [Lists] 对象中。内存。使用率仍然很高（大约 1.7 GB），但目前脚本正在运行并且不再崩溃。谢谢大家的回答，我从这些回复中学到了，这很有帮助。*

# php - PHP Oracle 多表作为一个块插入

> ID：13044207
> 
> 赞同：1
> 
> 时间：2012-10-24T06:52:43.480
> 
> 标签：php, oracle

在 Linux、PHP 4.3 和 Oracle 10g 上，我允许候选人在线申请工作。在应用按钮我写了这样的插入查询

```
$sql1 = insert into job_table (…) values (…);  //inserting over 20 values
$stmt1=OCIParse($conn,$sql1);
OCIExecute($stmt1);

$sql2 = insert into personal_info_table (…) values (…);  //inserting over 50 values
$stmt2=OCIParse($conn,$sql2);
OCIExecute($stmt2);

$sql3 = insert into qualification_info_table (…) values (…);  //inserting over 20 values
$stmt3=OCIParse($conn,$sql3);
OCIExecute($stmt3); 
```

问题是由于未知原因，有时所有插入查询都不会运行，因此我无法跟踪所有表中的特定信息。有什么方法可以确保所有插入命令都必须运行？或者如果任何插入语句未运行，则回滚整个事务？非常感谢这方面的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:09:07.487

看到这个[帖子](http://www.oracle.com/technetwork/articles/fuecks-transactions-097472.html)

```
$sql1 = insert into job_table (…) values (…);  //inserting over 20 values

$sql2 = insert into personal_info_table (…) values (…);  //inserting over 50 values

$sql3 = insert into qualification_info_table (…) values (…);  //inserting over 20 values

$success = true;

$sqls = Array($sql1, $sql2, $sql3);

foreach ($sqls as $sql) {
    $stmt1=OCIParse($conn,$sql);
    if ( !oci_execute($stmt1,OCI_DEFAULT) ) {    
        // If we have a problem
        oci_rollback($conn);
        $success = false;
        break;
    }
}

if($success) {
    oci_commit($conn);
} 
```

# android - 从 Foursquare API 获取地点

> ID：13044210
> 
> 赞同：5
> 
> 时间：2012-10-24T06:52:55.610
> 
> 标签：android, foursquare

修复了链接，现在我收到 JSON 错误消息

```
 java.lang.ClassCastException: org.json.JSONObject$1 cannot be cast to org.json.JSONObject 
```

显然我的错误在这里的某个地方：

```
String response     = streamToString(urlConnection.getInputStream());
        JSONObject jsonObj  = (JSONObject) new JSONTokener(response).nextValue();             
        JSONArray groups    = (JSONArray) jsonObj.getJSONObject("response").getJSONArray("groups");

        int length          = groups.length();
        if (length > 0) {                
            for (int i = 0; i < length; i++) {                    
                JSONObject group    = (JSONObject) groups.get(i);                    
                JSONArray items     = (JSONArray) group.getJSONArray("items");                     
                int ilength         = items.length();                     
                for (int j = 0; j < ilength; j++) {                        
                    JSONObject item = (JSONObject) items.get(j);                         
                    FsqVenue venue  = new FsqVenue();                         
                    venue.id        = item.getString("id");                        
                    venue.name      = item.getString("name");                         
                    JSONObject location = (JSONObject) item.getJSONObject("location");                         
                    Location loc    = new Location(LocationManager.GPS_PROVIDER);                         
                    loc.setLatitude(Double.valueOf(location.getString("lat")));                        
                    loc.setLongitude(Double.valueOf(location.getString("lng")));                         
                    venue.location  = loc;                        
                    venue.address   = location.getString("address");                        
                    venue.distance  = location.getInt("distance");                        
                    venue.type      = group.getString("type");                         
                    VenueList.add(venue);
                    } 
```

Tomcat消息

```
10-25 16:37:32.731: I/System.out(12828): https://api.foursquare.com/v2/venues/search?            ll=2.94,101.66&client_id=xxxxx&client_secret=xxxxxxx

10-25 16:37:32.731: D/FoursquareApi(12828): OPening URLhttps://api.foursquare.com/v2/venues/search?ll=2.94,101.66&client_id=xxxxxxx&client_secret=xxxxxxx
10-25 16:37:34.645: W/System.err(12828): java.lang.ClassCastException: org.json.JSONObject$1 cannot be cast to org.json.JSONObject
10-25 16:37:34.645: W/System.err(12828):    at com.example.reddot.Foursquare.getNearby(Foursquare.java:57)
10-25 16:37:34.653: W/System.err(12828):    at com.example.reddot.MainActivity$LoadPlaces.doInBackground(MainActivity.java:466)
10-25 16:37:34.653: W/System.err(12828):    at com.example.reddot.MainActivity$LoadPlaces.doInBackground(MainActivity.java:1)
10-25 16:37:34.653: W/System.err(12828):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
10-25 16:37:34.653: W/System.err(12828):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
10-25 16:37:34.653: W/System.err(12828):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
10-25 16:37:34.661: W/System.err(12828):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
10-25 16:37:34.661: W/System.err(12828):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
10-25 16:37:34.661: W/System.err(12828):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
10-25 16:37:34.661: W/System.err(12828):    at java.lang.Thread.run(Thread.java:856)
10-25 16:37:34.661: I/System.out(12828): errorjava.lang.ClassCastException: org.json.JSONObject$1 cannot be cast to org.json.JSONObject 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:25:12.753

使用 url connection() 返回一个空结果，因为这样的 json 将无法表达空数据。替代方法是使用 googleclient Api，如下所示

```
 HttpTransport transport = new NetHttpTransport();
        HttpRequestFactory httpRequestFactory = createRequestFactory   (HTTP_TRANSPORT);
        String ll = String.valueOf(df.format(lonlat))+","+String.valueOf(df.format(lonlat2));
        url = (API_URL+ "venues/search?ll="+ll+"&client_id="+CLIENT_ID+"&client_secret="+CLIENT_SECRET+"&v"+v); 
        HttpRequest request = httpRequestFactory
                .buildGetRequest(new GenericUrl(url));

        System.out.println(request);
        HttpResponse httpResponse = request.execute();

        JSONObject object = new JSONObject(httpResponse.parseAsString());
        JSONObject foursquareResponse = (JSONObject) object.get("response");
        JSONArray groups    = (JSONArray) foursquareResponse.get("groups");
        JSONObject group = (JSONObject)groups.get(0);
        JSONArray items = (JSONArray)group.get("items"); 
```

# android - 打开功能跟踪时，Android上的Ftrace冻结，有人帮助我:(

> ID：13044214
> 
> 赞同：3
> 
> 时间：2012-10-24T06:53:13.617
> 
> 标签：android, freeze, ftrace

我已经在 android AVD 上安装了 Ftrace 并尝试使用 Ftrace 的功能，但它不起作用。

以下是我所做的列表：

1.  安装 ubuntu 10.04 LTS
2.  安装必要的工具，例如 android sdk、toolchain、libs 等
3.  下载金鱼内核 ~~参考 - [http://blog.markloiseau.com/2012/07/how-to-compile-the-android-goldfish-emulator-kernel/](http://blog.markloiseau.com/2012/07/how-to-compile-the-android-goldfish-emulator-kernel/)~~
4.  修改内核配置文件（开启 Tracer Options）
5.  使用已使用跟踪器选项编译的自定义内核启动金鱼
6.  尝试使用 Ftrace 功能
7.  内核冻结

## 这是日志：

```
\# mount -t debugfs nodev /sys/kernel/debug
\# ls /sys/kernel/debug
sched_features
mmc0
tracing
bdi

\# cd /sys/kernel/debug/tracing
\# ls
events
set_event
available_events
printk_formats
per_cpu
options
saved_cmdlines
trace_marker
buffer_size_kb
trace_pipe
README
tracing_thresh
tracing_max_latency
current_tracer
available_tracers
trace
tracing_cpumask
trace_options
tracing_enabled
tracing_on
set_ftrace_pid

\# cat available_tracers
function_graph function sched_switch nop

\# cat current_tracer 
nop

\# echo sched_switch > current_tracer 
\# cat current_tracer 
sched_switch

\# cat trace | /data/busybox head -10
\# tracer: sched_switch
\#
\#           TASK-PID    CPU#    TIMESTAMP  FUNCTION
\#              | |       |          |         |
        bash-258   [000]   490.261240:    258:120:R   + [000]     4:115:S events/0
        bash-258   [000]   490.262087:    258:120:S ==> [000]    45:120:R adbd
        adbd-45    [000]   490.262318:     45:120:S ==> [000]     4:115:R events/0
    events/0-4     [000]   490.262457:      4:115:R   + [000]    43:120:S qemud
    events/0-4     [000]   490.262492:      4:115:S ==> [000]    43:120:R qemud
       qemud-43    [000]   490.262643:     43:120:R   + [000]   109:112:S er$SensorThread

\# echo function > current_tracer  *<--- this command occur freeze* 
```

如上所示，某些功能运行良好。但是在我打开跟踪功能时，一个关键功能，系统停机了。

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T04:50:41.000

函数跟踪器可能会冻结有几个原因。这是一个非常具有侵入性的跟踪器（跟踪内核的几乎所有功能）。一个问题是它是否跟踪诸如禁用中断之类的内部功能。这将导致它进入无限循环。现在我假设你有一个 ARM 设备，如果你运行的是 Android。根据配置，ARM 的一些低级函数可能需要标记为 nottrace 以防止它们被跟踪。如果您启用了动态跟踪，请尝试仅跟踪单个函数，如果可行，您就知道问题出在不应该被跟踪的东西上。要跟踪单个函数，只需：

回声计划> set_ftrace_filter；回声函数 > current_tracer

祝你好运。

# java - 如何在 Java 中使用集合？

> ID：13044215
> 
> 赞同：0
> 
> 时间：2012-10-24T06:53:13.830
> 
> 标签：java, geotools

我尝试制作一个项目，使用 GDAL/OGR 将 .mif/.tab 文件中的数据写入数据库。我愿意：

```
SimpleFeatureBuilder featureBuilder = new SimpleFeatureBuilder(dbFeatureType);
SimpleFeatureCollection collection = FeatureCollections.newCollection();
while (mifReader.hasNext()){      
  in = (SimpleFeatureImpl) mifReader.next();
  SimpleFeature dbFeature = featureBuilder.buildFeature(null);
  for(AttributeDescriptor ad : adList){
    String name = ad.getLocalName();
    Object attrValue;
    attrValue = in.getAttribute(name);
    if(attrValue instanceof String){
      String string3 = new String((attrValue.toString()).getBytes("ISO-8859-1"), "cp1251");
      if(name.trim().equalsIgnoreCase(kadname.trim())){
        dbFeature.setAttribute("kadnum", string3);
      }
    }
    if (attrValue instanceof Geometry){
        idn++;
        com.vividsolutions.jts.geom.Geometry geom = (Geometry) in.getAttribute(name);
        dbFeature.setAttribute("id", idn);
        System.out.println("after insrt="+idn);
        dbFeature.setAttribute("deleted", deleted);
        dbFeature.setAttribute("the_geom", geom);
        dbFeature.setAttribute("status_id", status_id);

    }
    collection.add(dbFeature);
    }
} 
```

它来自 .mid 文件的简单数据：

```
__id_|___kadnum_____

  3,"66:2:00:88 951"
  4,"66:2:00:88 952"
  5,"66:2:00:88 954" 
```

在分贝我得到这个：

![在此处输入图像描述](../Images/e4a3fe8c1ea2ee26bdd347e49d28c9b2.png)

我的数据是 2-4 行。您会看到我得到了增量变量`idn`并将其放入属性中`id`。从 .mid 中取出一个`kadnum`并将其放入属性中`kadnum`。
它很好，但在 bd 中我得到的行顺序错误。我的意思是具有属性的元素`kadnum=66:2:00:88 951`将位于 db 的第二行，但它位于第 4 行。
这意味着我要将集合中项目的顺序更改为相反的顺序。它的正确解决方案？以及如何做到这一点？或者GDAL可以自己做吗？

**更新**

我有：

```
 SimplePropertyImpl in =(SimpleFeatureImpl) mifReader.next(); 
```

我尝试：

```
in.getProperty("id").getName() ; 
```

我没有得到一个 PropertyName 我得到一个字符串。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:02:00.490

您想根据 对数据库行进行排序`id`吗？

```
select * from <yourtable> order by id asc; 
```

如果您想对`FeatureCollection`in 代码进行排序，您可能需要查看[SimpleFeatureCollection.sort](http://docs.geotools.org/latest/javadocs/org/geotools/data/simple/SimpleFeatureCollection.html#sort%28org.opengis.filter.sort.SortBy%29)和[SortBy](http://docs.geotools.org/latest/javadocs/org/opengis/filter/sort/SortBy.html)。我希望像

```
collection.sort( new SortBy() 
                 { 
                     @Override PropertyName getPropertyName() { return YourPropertyNameImpl( "id" ); } 
                     @Override SortOrder getSortOrder() { return SortOrder.ASCENDING; }
                 } 
```

会让你朝着正确的方向开始。

干杯，

# amazon-s3 - 将 100GB 从一个 S3 存储桶复制到同一区域的另一个存储桶需要多长时间？

> ID：13044219
> 
> 赞同：2
> 
> 时间：2012-10-24T06:53:35.017
> 
> 标签：amazon-s3

当我 2 年前创建我的存储桶时，我没有考虑给它起一个适合 CNAME 条目的名称，现在我需要这个功能。

我可以移动一些文件，但我宁愿复制其他文件，因为我不想破坏指向“旧”存储桶名称的第三方链接。

我的要求是：

*   将名称与特定模式匹配的文件从存储桶A复制到B
*   将名称与特定模式匹配的文件从存储桶 A 移动到 B
*   尽量减少时间
*   最小化成本

我很想知道时间的估计，因为我的网站在移动过程中需要离线（因为我不希望将新文件添加到存储桶 A 导致它们丢失。）

我还想知道根据文件名执行此复制/移动的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:01:20.193

S3 API 中有可用的[COPY命令。](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTObjectCOPY.html)对于移动操作，您可以先复制文件，然后[删除](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTObjectDELETE.html)它。

但是我会首先在较小的文件上尝试这种方法。文档说：

> PUT 复制操作与执行 GET 然后执行 PUT 相同。

如果这导致文件的下载和上传，这将非常耗时。

# facebook - Facebook评论框高度很小

> ID：13044220
> 
> 赞同：2
> 
> 时间：2012-10-24T06:53:37.643
> 
> 标签：facebook

Facebook评论框高度不像以前那样正常..

有人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T07:02:10.283

我认为这是facebook的问题。

从今天下午开始，所有使用 Facebook 应用程序的博客的 Facebook 评论框都变小了。

编辑：我向 facebook 报告了这个错误。 [https://developers.facebook.com/bugs/296608307121527](https://developers.facebook.com/bugs/296608307121527)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:23:13.707

我有同样的问题，它在 facebook 结束我确定......我要张贴一张票让他们检查出来

编辑：

这是一个关于它的问题，订阅它并发表评论，以便尽快修复

[https://developers.facebook.com/bugs/296608307121527](https://developers.facebook.com/bugs/296608307121527)

# c# - 在设计模式下从窗体中删除自定义控件后清除自定义控件属性的 InnerList 元素

> ID：13044221
> 
> 赞同：4
> 
> 时间：2012-10-24T06:53:38.667
> 
> 标签：c#, winforms, custom-controls, propertygrid, design-time

我将创建的自定义控件添加到新的 Windows 窗体，并通过“选项卡”属性向其中添加一些选项卡。但是，当我从 Windows 窗体中删除我的自定义控件时，“选项卡”属性的元素不会被删除。请参阅下图了解更多信息：

![我的自定义控件](../Images/ceebb744851513b46bd5f07dfe49c410.png)

**图 1 - 我的自定义控件“Tabs”属性及其集合编辑器**

1.  蓝框：我的自定义控件的“选项卡”属性
2.  红框：向“Tabs”属性添加元素

图 1 显示了当我将一些成员添加到 Tabs 属性时。

![将一些成员添加到 Tabs 属性后的 Windows 窗体项目控件](../Images/6a007ffc76dcff0a67ac0119e2011fb9.png)

**图 2 - 添加一些成员到 Tabs 属性后的 Windows 窗体项目控件**

1.  红框：我的自定义控件
2.  蓝框：向 Tabs 属性添加元素

![从 Windows 窗体中删除我的自定义控件后的 Windows 窗体项目控件](../Images/d790c392b37d5f608d74dbd6bb79b919.png)

**图 3 - 从 Windows 窗体中删除我的自定义控件后的 Windows 窗体项目控件**

*   红框：向 Tabs 属性添加元素

正如您在图 2 和图 3 中看到的，我向 Tabs 属性添加了一些成员，并且在从其父控件（Windows 窗体）中删除我的自定义控件后，Tabs 属性成员并没有被删除。

我的 Tabs 属性与从 CollectionBase 类派生的 Tabs 类相关，并对其实现了一些方法，如 Add、Remove、Clear 等。我在 Dispose 方法中调用了 Clear 和 RemoveRange 方法，但它不起作用。

我的代码如下：

```
[Designer("System.Windows.Forms.Design.ParentControlDesigner, System.Design", typeof(IDesigner))]
[ToolboxItem(true), ToolboxBitmap(typeof(ToolboxIconResourceFinder), "FloorsGrouping.bmp")]
[DisplayName("Floors Group")]
[Editor("WindowsFormsControlLibrary2.FloorsGrouping, WindowsFormsControlLibrary2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=197889249da45bfc", typeof(UITypeEditor))]
[Description("Floorssssssss")]
[Category("Saino")]
//[DefaultEvent("")]
[DefaultProperty("Text")]
[DesignerCategory("Component")] //Form //Designer //Empty String ("")
public partial class FloorsGrouping : Bar
{
    private static Font fntDefaultFont = SystemFonts.DefaultFont;
    private static string strDefaultAccessibleDescription = "";
    private static string strDefaultAccessibleName = "";

    private bool canDockBottom = false;
    private bool canDockTop = false;
    private bool fadeEffect = true;
    private int selectedDockTab = 0;
    private eDotNetBarStyle style = eDotNetBarStyle.StyleManagerControlled;
    private string text = "Floors Grouping";
    private FloorsInformation floorsInformation = new FloorsInformation();
    private Tabs tabs = new Tabs();
    private SupportedLanguages language = SupportedLanguages.English;
    private Styles groupingStyles = Styles.Classic;

    public FloorsGrouping()
    {
        InitializeComponent();
        ResetFont();
        ResetAccessibleDescription();
        ResetAccessibleName();
    }

    /// <summary>
    /// Required designer variable.
    /// </summary>
    private System.ComponentModel.IContainer components = null;

    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
    protected override void Dispose(bool disposing)
    {
        Tab.Clear();
        Tab.RemoveRange(0, Tab.Count);
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }

    private new void ResetFont()
    {
        Font = fntDefaultFont;
    }

    private new bool ShouldSerializeFont()
    {
        return !Font.Equals(fntDefaultFont);
    }

    [Category("Data")]
    [DisplayName("Tabs")]
    [Description("Tabsssssssssssss")]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
    [Editor(typeof(ItemsCollectionEditor), typeof(UITypeEditor))]
    //[Editor(typeof(ItemsCollectionEditor<SimilarFloorsInformation>), typeof(UITypeEditor))]
    //[Editor(typeof(CollectionEditor), typeof(UITypeEditor))]
    public Tabs Tab
    {
        get
        {
            return tabs;
        }
    }

    [Category("Behavior")]
    [DisplayName("ContainerControl")]
    [Description("It indicates container control high lighter is bound to. It should be set to parent form.")]
    //[DefaultValue("")]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
    [Browsable(false), ReadOnly(true)]
    [EditorBrowsable(EditorBrowsableState.Never)]
    public Control ContainerControl
    {
        get { return hltMain.ContainerControl; }
        private set { hltMain.ContainerControl = this; }
    }

    protected override void OnParentChanged(EventArgs e)
    {
        ContainerControl = this;
    }
    protected override void OnCreateControl()
    {
        base.OnCreateControl();
    }

    protected override void OnControlRemoved(ControlEventArgs e)
    {
        //Tab.RemoveRange(0, tabs.Count);
        //Parent.Refresh();
        base.OnControlRemoved(e);
    }

    protected override void OnPaint(PaintEventArgs pe)
    {
        base.OnPaint(pe);
    }
}

[DisplayName("Floors Information")]
[Description("Floors Informationnnnnnnnnnnnnnnn")]
[DefaultProperty("Text")]
[DesignerCategory("Component")]
[ToolboxItem(false)]
public class FloorsInformation : DockContainerItem
{
    /// <summary>
    /// Required designer variable.
    /// </summary>
    private System.ComponentModel.IContainer components = null;

    private SimilarFloorsInformation similarFloorsInformation = new SimilarFloorsInformation();
    private AllFloorsInformation allFloorsInformation = new AllFloorsInformation();
    private string text = "Floors Information";

    public FloorsInformation()
    {
    }

    [Browsable(false), ReadOnly(true)]
    [EditorBrowsable(EditorBrowsableState.Never)]
    public new bool AutoCollapseOnClick
    {
        get { return base.AutoCollapseOnClick; }
    }

    [Browsable(false), ReadOnly(true)]
    [EditorBrowsable(EditorBrowsableState.Never)]
    public new Control Control
    {
        get { return base.Control; }
    }

    public new string Text
    {
        get
        {
            return text;
        }
        set
        {
            text = value;
        }
    }

    [Category("Data")]
    [DisplayName("Similar Floors Panel")]
    [Description("Similar Floors Panellllllllllllllllllll")]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
    public SimilarFloorsInformation SimilarFloorsInfo
    {
        get
        {
            return similarFloorsInformation;
        }
        set
        {
            similarFloorsInformation = value;
        }
    }

    [Category("Data")]
    [DisplayName("All Floors Group")]
    [Description("All Floors Groupppppppppppppp")]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
    public AllFloorsInformation AllFloorsInfo
    {
        get
        {
            return allFloorsInformation;
        }
        set
        {
            allFloorsInformation = value;
        }
    }

    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }
}

public class Tabs : CollectionBase
{
    public FloorsInformation this[int intIndex]
    {
        get
        {
            return (FloorsInformation)InnerList[intIndex];
        }
        set
        {
            InnerList[intIndex] = value;
        }
    }

    public int Add(FloorsInformation finfItemType)
    {
        return InnerList.Add(finfItemType);
    }

    public new void Clear()
    {
        InnerList.Clear();
    }

    public bool Contains(FloorsInformation finfItemType)
    {
        return InnerList.Contains(finfItemType);
    }

    public void Remove(FloorsInformation finfItemType)
    {
        InnerList.Remove(finfItemType);
    }

    public new void RemoveAt(int intIndex)
    {
        InnerList.RemoveAt(intIndex);
    }

    public void RemoveRange(int intIndex, int intCount)
    {
        InnerList.RemoveRange(intIndex, intCount);
    }

    public void Insert(int intIndex, FloorsInformation finfItemType)
    {
        InnerList.Insert(intIndex, finfItemType);
    }

    public void Reverse()
    {
        InnerList.Reverse();
    }

    public void Reverse(int intIndex, int intCount)
    {
        InnerList.Reverse(intIndex, intCount);
    }

    public int IndexOf(FloorsInformation finfItemType)
    {
        return InnerList.IndexOf(finfItemType);
    }

    public void AddRange(FloorsInformation[] finfItemType)
    {
        InnerList.AddRange(finfItemType);
    }

    public FloorsInformation[] GetValues()
    {
        FloorsInformation[] finfItemType = new FloorsInformation[InnerList.Count];
        InnerList.CopyTo(0, finfItemType, 0, InnerList.Count);
        return finfItemType;
    }

    protected override void OnInsert(int intIndex, object objValue)
    {
        base.OnInsert(intIndex, objValue);
    }

    protected override void OnClear()
    {
        base.OnClear();
    }
}

public class ItemsCollectionEditor : CollectionEditor
{
    private Type[] typItems;

    public ItemsCollectionEditor(Type typItem)
        : base(typItem)
    {
        typItems = new Type[] { typeof(FloorsInformation) };
    }

    protected override Type[] CreateNewItemTypes()
    {
        return typItems;
    }

    protected override CollectionForm CreateCollectionForm()
    {
        CollectionForm collectionForm = base.CreateCollectionForm();
        collectionForm.Text = "Tabs Collection Editor";
        return collectionForm;
        //return base.CreateCollectionForm();
    }
} 
```

我想做类似 DevComponents.DotNetBar 的 Bar 控件。有关更多信息，请参阅以下内容：

![将 Bar 控件添加到 Windows 窗体](../Images/b943e4279ff2e54495662dcc2c3e049b.png)

**图 4 - 将 Bar 控件添加到 Windows 窗体**

1.  左红框：在 Windows 窗体中添加了 Bar 控件
2.  右红框：在 Visual Studio 的 Property Grid 中添加 Bar 控件

当 Bar 控件添加到 Windows 窗体时，属性网格会发生变化，如图 4 所示。

![通过创建 Dock 选项卡](../Images/af419feedbc93e7c9efbcded726972fa.png)

**图 5 - 通过“Bar Tasks”选项创建 Dock 选项卡**

*   红框：“Bar Tasks”下的“Create Dock Tab”选项

使用“Bar Tasks”下的“Create Dock Tab”选项，我们可以创建一个新的 Dock Tab，以便将新控件添加到 Bar 控件的特定选项卡，如图 5 所示。

![添加了 Dock Container Item 及其相关的 Panel Dock Container](../Images/3ccd5e83745077c99a6deb0d4e086ab8.png)

**图 6 - 添加了 Dock Container Item 及其相关的 Panel Dock Container**

1.  红框：在 Visual Studio 的 Property Grid 中添加 Bar 控件
2.  左蓝框：将 Dock Container Item 控件添加到 Bar 控件
3.  右蓝框：在 Visual Studio 的 Property Grid 中添加了 Dock Container Item 控件
4.  左绿框：向 Dock Container Item 控件添加了 Panel Dock Container 控件
5.  右绿框：在 Visual Studio 的属性网格中添加了 Panel Dock Container 控件

![添加了 Dock Container Items 及其相关的 Panel Dock Containers](../Images/2036210544150ab87fef945dd0a32abf.png)

**图 7 - 添加的 Dock Container Items 及其相关的 Panel Dock Containers**

1.  红框：请看图6红框
2.  左蓝框：将 Dock Container Item 控件添加到 Bar 控件
3.  右蓝框：在 Visual Studio 的属性网格中添加了 Dock Container Item 控件
4.  右绿框：在 Visual Studio 的属性网格中添加了 Panel Dock Container 控件

每次单击“Bar Tasks”下的“Create Dock Tab”选项时，都会在 DevComponents.DotNetBar 的 Bar 控件中创建一个新的 Dock Container Item 控件及其相关的 Panel Dock Container 控件（请参见图 6 和 7）。

![删除Bar控件后Visual Studio的属性网格](../Images/02e3bbec2bf4dfb3f0e98bb012830dc3.png)

**图 8 - 删除 Bar 控件后 Visual Studio 的属性网格**

*   红框：Visual Studio 属性网格中的 Windows 窗体控件

当 Bar 控件从 Windows 窗体中删除时，它的所有相关控件都将随之删除，并且只保留 Windows 窗体。

在我的自定义控件从其父控件（Windows 窗体）中删除后，我想自动删除我的“选项卡”属性成员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T14:53:49.747

我找到了解决方案。为了在从其父控件（Windows 窗体）中删除自定义控件后自动删除“Tabs”属性成员，必须对从“Bar”类继承的“FloorsGrouping”类的“Dispose”方法进行一些更改。请参阅以下必须更改的代码行：

```
protected override void Dispose(bool disposing)
{
    Tab.Clear();
    Tab.RemoveRange(0, Tab.Count);
    if (disposing && (components != null))
    {
        components.Dispose();
    }
    base.Dispose(disposing);
} 
```

请参阅以下为实现目标而更改的代码行：

```
protected override void Dispose(bool disposing)
{
    if (disposing && (components != null))
    {
        components.Dispose();
    }

    if (Tab.Count > 0)
    {
        foreach (FloorsInformation floorsInformation in Tab)
        {
            floorsInformation.Dispose();
        }
    }
    base.Dispose(disposing);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:11:33.413

您可以将它们从生成的代码中删除，即 Form1.generated.cs 文件，其中定义了 InitializeComponent()。

基本上选项卡是可重复使用的，所以这可能是 VS 不会自动删除它们的原因，但这只是猜测。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T12:32:34.830

好的，我在这里冒险猜测一下，但我从未与 DotNetBar 合作过，所以我可能会离开。在我看来，所有控件都必须添加到 Container 对象中才能在视觉上显示（如表单、面板等）。如果您将这些标签页添加到从 Bar 派生的控件中，并且如果 Bar 不是容器，那么我必须假设您的标签页在某种程度上被添加到表单的 Controls 数组中。

因此，当您删除 Bar 控件时，选项卡不会被删除，因为它们仍在范围内（因为表单仍然存在）。

**澄清后编辑1**

这似乎很有趣：

```
[Category("Behavior")]
[DisplayName("ContainerControl")]
[Description("It indicates container control high lighter is bound to. It should be set to parent form.")]
//[DefaultValue("")]
[DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
[Browsable(false), ReadOnly(true)]
[EditorBrowsable(EditorBrowsableState.Never)]
public Control ContainerControl
{
    get { return hltMain.ContainerControl; }
    private set { hltMain.ContainerControl = this; }
} 
```

如果您将 ContainerControl 设置为自身（它说它应该设置为表单），看起来这可能是不正确的。但同样，我不确定这是否相关。

# javascript - 如何在自定义绑定淘汰赛中访问模型属性

> ID：13044224
> 
> 赞同：1
> 
> 时间：2012-10-24T06:54:12.927
> 
> 标签：javascript, jquery, knockout.js

我正在为 jquery ui 选项卡使用 knockout.js 自定义绑定。我创建了一个示例小提琴

[http://jsbin.com/ikidiw/7/edit](http://jsbin.com/ikidiw/7/edit)

在这里，我试图通过 allBindingsAccessor 在自定义绑定中设置当前模型对象的 currentSelectedTab 属性。但是得到模型对象没有 currentSelectedTab 功能的错误。有什么问题 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T07:55:57.170

根据[http://knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)，init函数的签名是这样的：

```
init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) 
```

这里的 viewModel 是传递给 ko.applyBindings 的模型对象。因此，在您的 init 函数参数中的 allBindingsAccessor 之后添加该 viewModel 参数后，您可以通过以下方式更改代码：

代替

```
allBindingsAccessor().currentSelectedTab(ui.index); 
```

你可以写

```
viewModel.currentSelectedTab(ui.index); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T07:56:01.383

如果您想访问当前模型，您需要使用第四个参数扩展您的 init 函数，该参数将是当前视图模型对象（[请参阅文档](http://knockoutjs.com/documentation/custom-bindings.html)）：

```
init: function (element, valueAccessor, allBindingsAccessor, viewModel) {   
      var options = ko.utils.unwrapObservable(valueAccessor() || {});

      options.select = function (event, ui) {
            viewModel.currentSelectedTab(ui.index);

      };          
      $(element).tabs(options);            
    } 
```

在这里您可以尝试一下：http: [//jsbin.com/uwajus/1/edit](http://jsbin.com/uwajus/1/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T08:04:29.947

我认为问题似乎是您试图通过视图模型名称而不是绑定访问器指针来访问值。

你可以试试：
HTML

```
<div id="ccftabs" class="uitab" data-bind="tab : { selected : currentSelectedTab }"> 
```

在 Javascript 中

```
 var options = ko.utils.unwrapObservable(valueAccessor() || {});
  options.select = function (event, ui) {
    options.selected(ui.index);       
  };

  $(element).tabs(options); 
```

我认为这是一个很好的方法。

# php - 如何在 fckeditor 中编辑内容

> ID：13044228
> 
> 赞同：1
> 
> 时间：2012-10-24T06:54:21.263
> 
> 标签：php, html, database, forms, fckeditor

这是我的代码。我想在 fckeditor 中编辑内容或值。此代码正在运行插入和选择查询，但无法更新。请帮我解决它。

下面是从数据库接收一个 id 来选择记录

```
<?php 
    if (isset($_REQUEST['editncontent'])) {
        $editnews  = new DBConnection();
        $condition = "WHERE id = '".$_REQUEST['editncontent']."'";
        $selnews   = $editnews->SelectRecord(array("*"),"pages","$condition");

        while ($getnews = mysql_fetch_array($selnews)){ ?>
            <form action="" method="post">
            <?php
                $oFCKeditor = new FCKeditor('FCKeditor1');
                $oFCKeditor->BasePath = 'fckeditor/';
                $oFCKeditor->Width = 740;
                $oFCKeditor->Height = 600;
                $oFCKeditor->Value  = $getnews['content'];
                echo $oFCKeditor->Create();
            ?>
            </form>
<?php } } ?>

// Now it takes the parameter and going to update it         
// Update query

<?php  
    if (isset($_REQUEST['content'])) {
        $content = mysql_real_escape_string(trim($_POST['FCKeditor1']));

        $obj        = new DBConnection();
        $arr_field  = array("content");
        $arr_values = array("$content");
        $condition  = "WHERE id = '".$_REQUEST['editncontent']."'";
        $update     = $obj->UpdateRecord(
            "pages",$arr_field,$arr_values,"$condition"
        ) or die(mysql_error());
        header("Location:showpages.php");
    }
    ob_flush();
?> 
```

# asp.net - 使用访问数据库的动态元标记

> ID：13044232
> 
> 赞同：0
> 
> 时间：2012-10-24T06:54:45.187
> 
> 标签：asp.net, ms-access

我正在尝试根据这篇[文章](http://forums.asp.net/t/1411954.aspx/1)从访问数据库生成动态元标记。

```
protected void Page_Load(object sender, EventArgs e)
{

    OleDbParameter spar = new OleDbParameter("@Title", Request["Title"]);
    string query = "SELECT * FROM storedata WHERE Title = @Title";
    OleDbConnection myconnection = new OleDbConnection(ConfigurationManager.ConnectionStrings["accessConnectionString5"].ConnectionString);
    OleDbCommand SqlCmd = null;
    SqlCmd = new OleDbCommand(query, myconnection);

    SqlCmd.Parameters.Add(spar);

    SqlCmd.Connection.Open();
    SqlCmd.ExecuteNonQuery();

    OleDbDataAdapter ad = new OleDbDataAdapter(SqlCmd);
    DataTable dt = new DataTable();
    ad.Fill(dt);

    title.InnerHtml = dt.Rows[0]["Title"].ToString();
    keywords.Attributes.Add("content", dt.Rows[0]["Title"].ToString());

   // Closing the SQL connection
      SqlCmd.Connection.Close();

} 
```

但我收到错误“ **System.Data.OleDb.OleDbException: Parameter @Title has no default value** ”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:25:09.797

你说`WHERE Title = @Title`，但我看不到你在哪里为这个参数赋值。

```
SqlCmd = new OleDbCommand(query, myconnection); 
SqlCmd.Parameters.AddWithValue("@Title","a title"); 
```

# php - 在文件包含之前修剪 $_GET 变量的最安全方法

> ID：13044234
> 
> 赞同：0
> 
> 时间：2012-10-24T06:54:55.063
> 
> 标签：php, include

我正在使用：

```
<?php

$file = $_GET['page']; //ie: http://localhost/?page=index
include "php/{$file}.php";

?> 
```

但我需要知道在`$file`调用之前修剪变量的最安全方法是什么`include`。

我在想类似的事情：

```
//-replace '.' with ''
//-replace '/' with ''
//-replace '\' with '' 
```

但我确信有更好的方法，所以我请求你的帮助。我需要它非常安全。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:00:45.373

如果您需要非常安全，即使在修剪之后也不要包含它。相反，在您获得的变量和您需要包含的文件之间使用类似字典的关联：

```
<?php
$file = $_GET['page'];

$allowed_pages = array('index', 'profile', 'legal', 'about');

if (in_array($file, $allowed_pages)) {
    include "php/" . $file . ".php");
} else {
    die("The page " . $file ." does not exist");
}
?> 
```

这样，您将**永远不会**得到任何意外的包含。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:00:17.770

我想无论你做什么，你都不能相信用户数据。

如果您的可用文件数量有限，您应该将它们组成一个数组并允许它们。

```
$allowedFiles = array('index','somewhere','elswhere');

if (!in_array($file,$allowedFile))
    exit ('File Not found');
else
    include("php/{$file}.php"); 
```

编辑：

另一种方法是扫描您的目录并删除您不想要的文件和目录。

```
$filesInDir = scandir("./php");
$allowedFiles = array_diff(array(".","..","protected.php"),$filesInDir);

if (!in_array($file.".php",$allowedFile))
    exit ('File Not found');
else
    include("php/{$file}.php"); 
```

# maven - httpunit 1.7.2 和 kohsuke 补丁有什么区别？

> ID：13044235
> 
> 赞同：0
> 
> 时间：2012-10-24T06:54:55.987
> 
> 标签：maven, http-unit

今天 httpunit 1.7.2 在 maven Central 上发布。

似乎有几个“非官方”补丁可用，请参阅：

[http://search.maven.org/#search|ga|1|httpunit](http://search.maven.org/#search|ga|1|httpunit)

[http://www.jarvana.com/jarvana/search?search_type=project&project=httpunit](http://www.jarvana.com/jarvana/search?search_type=project&project=httpunit)

1.7.2 版本和 Kohsuke 创建的两个补丁有什么区别？作为 httpunit 的提交者，如果有意义的话，我愿意将它们放入 httpunit。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:11:53.467

为什么不问他？[http://kohsuke.org/about/](http://kohsuke.org/about/)有联系方式。

源 jar 可在您提供的第一个链接中找到。我已经区分了它们，结果就在这里

[http://pastebin.com/Df90hCTY](http://pastebin.com/Df90hCTY)

看起来像一个非常小的变化。

# jquery-ui - jQuery模式对话框关闭后专注于文本框

> ID：13044236
> 
> 赞同：2
> 
> 时间：2012-10-24T06:54:58.293
> 
> 标签：jquery-ui, focus, modal-dialog

我对 jquery 模态对话框有疑问。我将重点放在文本框（经典 javascript）上，重新加载页面时它工作正常。但我试图找出模式对话框关闭后如何设置焦点。有人可以给我答案吗？

html

```
<div>
<form action='core/php/_scr_commission_equipment_direct_add.php?token=$token' method='post' name='equipmentIDN_form'>
IDN <input type='text' class='idn_reader_text_color' name='equipmentIDN_direct' autocomplete='off' />
</form>
</div>
<script type='text/javascript'>
document.equipmentIDN_form.equipmentIDN_direct.focus()
</script> 
```

jQuery

```
$('#dialog-graph2').dialog({
autoOpen: true,
width: 1000,
modal:false,
position:['middle',50],
resizable:false,
});

$('#dialog_graph2').click(function(){
$('#dialog-graph2').dialog('close');
return false;
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:17:28.053

尝试为对话框的关闭事件添加一个函数，即：

 `````
$('#dialog-graph2').dialog({
    autoOpen: true,
    width: 1000,
    modal:false,
    position:['middle',50],
    resizable:false,
    close: function(){
        document.equipmentIDN_form.equipmentIDN_direct.focus();
    }
}); 
````  `这必须完成工作，但为了优雅，我可能会使用 JQuery 样式而不是“纯”JavaScript，如下所示：

 `````
$('#equipementIDN_direct').focus(); 
````  `但之前，将 id 属性 (equipementIDN_direct) 添加到您的输入文本框中。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-06T11:29:18.957

请注意，当您打开模式对话框时，最后一个焦点元素被保存保存并在对话框关闭时返回（JQ UI 1.11）参见示例： `http://jsfiddle.net/przemcio/9sxrvm95/` 我看到您有`autoOpen: true`然后对话框将在页面加载时打开，并且在此Pispirulito的具体情况命题是有效的。````

# drupal-6 - 如何从网络表单结果创建特定内容类型的节点？

> ID：13044241
> 
> 赞同：1
> 
> 时间：2012-10-24T06:55:37.550
> 
> 标签：drupal-6, webforms, drupal-7, content-type

是否可以配置 web 表单以根据提交的数据创建特定内容类型的节点？假设来自网络表单的字段将直接匹配内容类型上的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:27:22.887

```
//Declare a new StdObj
$node = new StdObj();

//Set the type
$node->type='your_content_type';

//Set the Title
$node->title='title';

//Set the body
$node->body = 'body';

//Set other content fields
$node->field_name[0]['value'];

//Finally use functions to save, submit, and insert the node
$node = node_save($node);
node_submit($node);
content_insert($node); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T15:15:12.763

创建与 web 表单具有相同字段的内容类型，并授予匿名用户创建该内容类型节点的权限。

# filesystems - jffs2dump 出了点问题，将 JFFS2 文件系统更改为 little-endian 文件

> ID：13044248
> 
> 赞同：2
> 
> 时间：2012-10-24T06:56:19.000
> 
> 标签：filesystems, dump, endianness, jffs2

我有一个 JFFS2 文件系统，它是一个大端。

我的电脑：x86 Linux，小端。

我使用 jffs2dump 将我的 JFFS2 文件更改为 little-endian。

例如：（#jffs2dump -c -v -b -e B070.jffs2 B070.w）。

有一些错误出来：

0x00b3ffd8的wrong bitmask，0x0000│wrong
bitmask at 0x00b3ffdc，
0x0000│wrong bitmask at 0x00b3ffe0，0x0000 wrong bitmask at 0x00b3ffe4，0x00000000bask at 0x0000bask at 0x00bbask
at 0x00b3ffe8，0x00b3ffe8，0x00bask 3ffe8，bask 3ffe8，bask
3ffe8，bask 3ffe8， bask 3ffe8
，
bask 3ffe8，
在0x00b3fff4，0x0000│wrong
bitmask at 0x00b3fff8，0x0000│wrong
bitmask at 0x00b3fffc，0x0000│wrong
bitmask at 0x00b5ff4 at 0x00b5ff4，0x0000 x0000bask 0x0000bask
at 0x00b5fff8，0x00fff8，0x00fffmfffm throng ats 0x00fffmfffmfffmfffm throng and 0x00ffmfffmfffm and 0x00ffmfffmfffmfffm throng
and 0x00ffmfffmfffm
throng and 0x00ffmfffmfffm
throng 。 0x00ba0000, 0x8bf5
处的位掩码│0x00ba0004, 0x0000 处的位掩码错误
│0x00ba0008,0x0000 位掩码错误│0x00ba000c,0x0000
位掩码错误
│0x00ba0010,0x0000 位掩码错误 ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-17T17:17:01.877

这个问题相当古老，但我也为其他在使用此工具时遇到问题的人提供了答案。

我可以确认 jffs2dump - 我的 mtd-tools 版本是 1.5.0 - 已损坏。您可以通过将工作图像从 BE 转换为 LE 再转换回 BE 来检查这一点。生成的图像不同，但不应该。就我而言，在启动转换后的图像期间，我收到了以下消息：

```
Unknown JFFS2 compression type 0x07
Error: jffs2_decompress returned -5 
```

二进制差异显示一些 0xC0 更改为 0xE0。

此外，您可以看到使用 -c 开关的不同之处。如果我使用它将工作的 BE 图像转换为 LE，我根本不会收到错误警告。如果我不使用它，我会收到一些错误，例如

```
Wrong hdr_crc
Unknown node type 
```

# matlab - 如何保护 MATLAB 编译的应用程序不被分发？

> ID：13044251
> 
> 赞同：7
> 
> 时间：2012-10-24T06:56:34.170
> 
> 标签：matlab, protection, piracy-prevention, piracy, piracy-protection

我如何保护 MATLAB 编译的 .exe 免受：

*   逆向工程
*   未经授权的分发？

我应该使用哪些打包程序、保护工具等？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T08:46:15.787

我以前也遇到过这个问题。以下是一些想法：

*   MATLAB 编译的二进制文件实际上是 ZIP 档案，在运行时解压缩（可能到用户可访问的临时文件夹或主文件夹）。
*   文件本身使用 AES 加密，这并不理想，因为理论上可以恢复密钥。
*   上述情况使得`exe`使用基于用户的密钥对最终文件进行额外加密以限制重新分发是毫无意义的，因为解压缩的文件将在运行时可用。从这个意义上说，它等同于仅`mcc`用于保护。
*   另外一个问题：**分发中的 MEX 文件未加密**。您可以从 MCR_CACHE 中获取 mex 文件并[直接使用它。](http://www.mathworks.se/support/solutions/en/data/1-2ZAVUJ/index.html)Java 类也是如此。
*   因此，除了加密可执行文件本身之外，您还需要一个解决方案来加密/解密由 MATLAB 可执行文件执行的磁盘写入/读取
*   显然，您需要能够指定要加密的磁盘访问 - 您希望用户能够提供输入数据并读取他的输出
*   理想情况下，该解决方案还将二进制文件的加密副本保存在内存中，并且仅在需要时解密它们，即在执行/访问一段代码/数据时
*   此外，解决方案应检测到代码是从调试器执行的，并在这种情况下关闭程序
*   对加密过程进行逆向工程以提取密钥应该很困难。使用纯软件解决方案**总是**有可能（并且比使用硬件解决方案更容易）获得密钥。

我们最终使用了一个涉及 USB 加密狗的解决方案。它即时执行加密/解密，或多或少地解决了上述复杂性。它适用于客户端/服务器设置，即，您可以在服务器上安装 USB 加密狗，客户端与服务器联系以检查许可证并运行代码。但是，当时仅在 Windows 上支持完全加密。我不确定我是否应该在 SO 上提及公司名称（我与它没有任何关联，但无论如何）。我可以私下告诉你我们使用了什么，或者你可以谷歌一下——这个市场上有替代品。

**编辑**我在原来的陈述中犯了一个错误。存档确实被解压缩到 MCR_CACHE 目录，但文件是加密的。但是，这仍然不能阻止编译程序的重新分发。虽然这些脚本不以明文形式提供，但从这个意义上说，您的知识产权是安全的。[可以在此处找到](http://www.mathworks.se/support/solutions/en/data/1-2ZAVUJ/index.html)有关 MATLAB 部署工具可以保护和不保护的内容的更详细描述，以及有关该方案安全性的简短声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T10:59:44.750

有一个名为 Taurus 的商业实用程序，可用于复制保护 Matlab 应用程序，包括 pcoded 和编译格式。Taurus 托管了许多桌面应用程序中的典型复制保护方案。请参阅[http://www.algorithmprotection.com/index.php/component/content/article/34-products/46-taurus](http://www.algorithmprotection.com/index.php/component/content/article/34-products/46-taurus)

# firefox - Firebug 控制台错误 HTTP 407 需要代理身份验证

> ID：13044254
> 
> 赞同：12
> 
> 时间：2012-10-24T06:56:46.303
> 
> 标签：firefox, proxy, firebug, ntlm

我在工作中的代理后面（使用 NTLM 身份验证）。每当我加载一个页面时，我的 Firebug 控制台就会被这样的消息淹没：

```
"NetworkError: 407 Proxy Authentication Required - http://somewebsite/Scripts/jquery-1.8.2.min.js" 
```

它对该页面上引用的所有 URL 执行此操作：JS、CSS、图像等。

烦人的是文件实际上是成功加载的。Firefox 似乎遇到了 407 错误，向日志发送垃圾邮件，然后使用 NTLM 凭据加载它。

有什么办法可以阻止这些无用的错误出现，这样它们就不会淹没我真正感兴趣的控制台消息？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T13:57:26.773

如果您使用 Firefox，您可以按照此处的[教程](http://www.adamkoch.com/2012/05/04/moz-proxy-issues/)并将“network.websocket.enabled”标志更改为 false 以避免此问题。

# c# - 如果我在 ListView 中进行鼠标悬停，我可以从一行更改样式吗

> ID：13044255
> 
> 赞同：0
> 
> 时间：2012-10-24T06:57:07.013
> 
> 标签：c#, asp.net, listview, styles, mouseover

我使用 ListView，如果我对项目进行鼠标悬停，我想获得另一种颜色和另一种字体大小和字体颜色……另一种颜色有效，但我可以在鼠标悬停时进行两个或多个样式更改吗？

这是我的列表视图：

```
<asp:ListView runat="server" ID="myListView" OnItemCommand="myListView_ItemCommand"
                       OnSelectedIndexChanging="myListView_SelectedIndexChanging" 
            > 

            <LayoutTemplate>
                <table runat="server" class="tablelistview" cellpadding="0" cellspacing="0">
                <tr class="TableClass">
                    <th align="left" runat="server"><asp:LinkButton ID="lnkLastname" runat="server" CssClass="MyLink" OnClick="lnkLastnameSort_Click" >Nachname</asp:LinkButton>
                    <asp:Image runat="server" ID="imgLastnameAsc" ImageUrl="~/App_Theme/asc.png" />
                    <asp:Image runat="server" ID="imgLastnameDESC" ImageUrl="~/App_Theme/desc.png" Visible="false" />
                    </th>

                    <th class="TableColumns"  runat="server"><asp:LinkButton ID="lnkFirstname" CssClass="MyLink" runat="server" OnClick="lnkFirstnameSort_Click" >Vorname</asp:LinkButton>
                    <asp:Image runat="server" ID="imgFirstnameAsc" ImageUrl="~/App_Theme/asc.png" Visible="false" />
                    <asp:Image runat="server" ID="imgFirstnameDesc" ImageUrl="~/App_Theme/desc.png" Visible="false" />
                    </th>

                    <th class="TableColumns" runat="server"><asp:Label ID="lnkPhone" runat="server" >Telefon</asp:Label></th>

                    <th class="TableColumns" runat="server"><asp:LinkButton ID="lnkDepartment" CssClass="MyLink" runat="server" OnClick="lnkDepartmentSort_Click">Abteilung</asp:LinkButton>
                    <asp:Image runat="server" ID="imgDepartmentAsc" ImageUrl="~/App_Theme/asc.png" Visible="false" />
                    <asp:Image runat="server" ID="imgDepartmentDesc" ImageUrl="~/App_Theme/desc.png" Visible="false" />
                    </th>

                    <th class="TableColumns" runat="server"><asp:LinkButton ID="lnkemail" CssClass="MyLink" runat="server" OnClick="lnkMailSort_Click" >Email</asp:LinkButton>
                    <asp:Image runat="server" ID="imgMailAsc" ImageUrl="~/App_Theme/asc.png" Visible="false" />
                    <asp:Image runat="server" ID="imgMailDesc" ImageUrl="~/App_Theme/desc.png" Visible="false" />
                    </th> 

                </tr>
                <tr runat="server" id="ItemPlaceholder">
                </tr> 
            </table>
            </LayoutTemplate>

            <ItemTemplate>
                <tr class="TableClassO" runat="server" onmouseover="this.style.backgroundColor='#838383'" onmouseout="this.style.backgroundColor='#ffffff'" titel="Auswahl"> 
                 <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label4" Text='<%# Eval("Nachname") %>' runat="server"  /></td>
                 <td align="left"><asp:LinkButton  CssClass="MyLink" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
                 <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server"  /></td>
                 <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="abteilung" CommandArgument='<%# Container.DataItemIndex %>' ID="Label7" Text='<%# Eval("Abteilung") %>' runat="server"  /></td>
                 <td align="left"><asp:ImageButton Width="15" Height="15" CssClass="MyLink" CommandName="mailto"  CommandArgument='<%# Container.DataItemIndex %>' ID="Label8" ImageUrl="~/App_Theme/Email.ico" runat="server" />

                 <asp:LinkButton  CssClass="MyLink"  CommandName="mailto" CommandArgument='<%# Container.DataItemIndex %>' ID="Label2" Text='<%# Eval("eMail") %>' runat="server" ToolTip="Öffnet Outlook" /></td>
                 <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>
            </tr>
            </ItemTemplate>

            <AlternatingItemTemplate>
                <tr class="TableClassO" runat="server" style="background-color:#E5EDF5;" onmouseover="this.style.backgroundColor='#838383'" onmouseout="this.style.backgroundColor='#E5EDF5'" titel="Auswahl"> 
                 <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label4" Text='<%# Eval("Nachname") %>' runat="server"  /></td>
                 <td align="left"><asp:LinkButton  CssClass="MyLink" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
                 <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server"  /></td>
                 <td align="left"><asp:LinkButton  CssClass="MyLink"  CommandName="abteilung" CommandArgument='<%# Container.DataItemIndex %>' ID="Label7" Text='<%# Eval("Abteilung") %>' runat="server"  /></td>
                 <td align="left"><asp:ImageButton Width="15" Height="15" CssClass="MyLink" CommandName="mailto"  CommandArgument='<%# Container.DataItemIndex %>' ID="Label8" ImageUrl="~/App_Theme/Email.ico" runat="server" />

                 <asp:LinkButton  CssClass="MyLink"  CommandName="mailto" CommandArgument='<%# Container.DataItemIndex %>' ID="Label2" Text='<%# Eval("eMail") %>' runat="server" ToolTip="Öffnet Outlook" /></td>
                 <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>
            </tr>
            </AlternatingItemTemplate>

            <EmptyDataTemplate>
                 <div><h4>Es wurden keine Einträge gefunden</h4></div>
            </EmptyDataTemplate>

        </asp:ListView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:06:25.210

是的，很容易，通过这样做：

```
<style type="text/css">
    .TableClass:hover {
        background-color: red;
        font-family: courier new;
    }
</style> 
```

以上只是一个例子。您只需将“TableClass”替换为行类的名称。

样式部分通常放在 head 部分，或者从外部文件链接。

如需进一步参考，请查看 W3school 网站：

[http://www.w3schools.com/cssref/sel_hover.asp](http://www.w3schools.com/cssref/sel_hover.asp)

**另外，我只想声明，你应该使用 CSS 而不是其他任何东西，因为它对浏览器来说更加原生（并且更兼容跨浏览器）。**

另一件事。将您的样式放在每个 TR 元素中是一团糟。通过使用 CSS，您将其放置在一个位置，因此当您想要稍微修改样式时，可以只更改该位置。使用您当前的解决方案，您必须在每一行上更改它，并且您的页面大小将大大膨胀！

SR

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:05:06.363

是的，你可以喜欢

```
<tr class="TableClassO" runat="server" 
  onmouseover="this.style.backgroundColor='#838383'; this.style.color='some-color';" 
  onmouseout="this.style.backgroundColor='#ffffff'; this.style.color='some-other-color'" titel="Auswahl"> 
```

您可以使用字体颜色`this.style.color`和字体大小`this.style.fontSize`

但是如果你为 :hover 创建一个 css-rule 类会很容易

```
tr.TableClassO:hover { your_css_rule_here ;} 
// It will run when mouse over on tr, then you dont need to use js events. 
```

# java - 在文本文件中查找字符串的方法，如果找不到字符串，则将字符串添加到文本文件中，否则拒绝输入

> ID：13044259
> 
> 赞同：0
> 
> 时间：2012-10-24T06:57:39.220
> 
> 标签：java, text, methods

```
public static void main(String[] args) throws IOException{
if (args.length == 1)
{
    BufferedReader bf = new BufferedReader (new FileReader("fruit.txt"));
    int linecount = 0;
    String line;
    //run thur the txt file to check if input exist
    while (( line = bf.readLine()) != null)
    {
        linecount++;
        int indexfound = line.indexOf(args[0]);
        if (indexfound > -1) {
            System.out.println("fruit exist on line " + linecount);
            System.out.println("add another fruit");    
            System.exit(0);
        } else {
            BufferedWriter bw = new BufferedWriter(new FileWriter("fruit.txt", true));
            String fruit = "";
            fruit = args[0];
            bw.write("\r\n" + fruit);
            System.out.println(fruit+ "added"); 
        }
    }
    f.close();
    bw.close();
} 
```

我想让程序在文本文件 fruit.txt 中搜索，检查其中是否已经存在水果。

如果水果存在，则提示用户输入另一个 1

否则添加到文本文件的下一行

这是我到目前为止得到的。但我不确定为什么这不是我想要的。

在我的文本文件中，它以 3 个水果开头

```
apple
orange
pear 
```

在我加入浆果之后

```
apple
orange
pear
berry
berry 
```

在我加入甜瓜之后

```
apple
orange
pear
berry
berry
melon
melon
melon
melon 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:00:56.510

您只是在第一行检查水果，如果没有找到，您将继续添加它。

您需要首先完整地阅读您的文件，检查每一行是否包含您的水果，然后如果不包含，只需将水果倒入其中。如果它包含，拒绝它。

因此，在您的时间里，您需要将其他部分移到外面。而不是在`System.exit()`找到水果时进行，您可以将布尔变量设置为true，然后稍后根据布尔变量的值来决定是否添加水果。

```
boolean found = false;
while (( line = bf.readLine()) != null) {

    linecount++;
    int indexfound = line.indexOf(args[0]);
    if (indexfound > -1) {
        System.out.println("fruit exist on line " + linecount);
        System.out.println("add another fruit");   
        found = true;
        break;
    }
}

if (!found) {

    BufferedWriter bw = new BufferedWriter(new FileWriter("fruit.txt", true));
    String fruit = "";
    fruit = args[0];

    bw.write("\r\n" + fruit);
    System.out.println(fruit+ "added"); 

    bw.close();  // You need to close it here only. 
}

bf.close(); 
```

# php - 从 php 4 迁移到 php 5

> ID：13044261
> 
> 赞同：1
> 
> 时间：2012-10-24T06:57:47.377
> 
> 标签：php, php4

我得到了这个用 PHP5 开发的项目。该项目已提供给我完整的详细信息（要使用的 php 版本、要使用的 mysql 版本等）。我的客户说要使用 PHP5 开发项目，我很高兴因为我可以练习我的 OOP。

在我的本地服务器上完成项目后，我将文件上传到实时服务器，问题是，实时服务器是在 PHP4 中运行的，所以当我们运行项目时，我的工作全部搞砸了。

今天是该项目的最后期限，我已经用 PHP5 OOP 编写了几个星期的代码，在这一天结束之前，我必须让它与实时服务器一起工作。

我的客户不希望我更新服务器的 PHP 版本，因为其他一些 Web 应用程序可能会受到影响。如果我重新编码项目，我也可能需要数周时间才能做到这一点。

有什么办法可以做到吗？我没时间了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T07:09:02.493

您可以在同一台机器上运行多个版本的 PHP。尝试谷歌搜索“在同一 apache 服务器上安装 2 个 php 版本”。结果之一是[here](http://gggeek.altervista.org/2007/07/21/running-multiple-php-versions-on-a-single-apache-install/)。
关键思想是为 PHP5 和 PHP4 应用程序提供单独的虚拟主机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T07:01:17.660

使用现代安装的 PHP 运行另一台服务器（可能在另一台机器上，可能是虚拟机）。

使用 Apache ProxyPass 指令将旧服务器映射到新服务器。

开始使用现代版本的 PHP 在旧服务器上测试 Web 应用程序，并开始迁移所有内容，这样它就不会尽快运行可怕的过时安全风险。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T07:16:19.810

> 我的客户不希望我更新服务器的 PHP 版本，因为其他一些 Web 应用程序可能会受到影响。如果我重新编码项目，我也可能需要数周时间才能做到这一点。

如果无法在服务器上安装兼容的 PHP 版本（您的客户端*错误*，您可以拥有多个彼此相邻的 PHP 版本，甚至可以通过同一域访问两个彼此相邻的系统），那么您需要重写目标平台的代码。

由于这需要更多时间直到一天结束（或您剩下的两个小时），因此需要取消截止日期并将移植到 PHP 4 预算。

从顶部审查您的选择我会说情况很疯狂。让 PHP 5 在另一台服务器上运行并完成工作。您需要客户的更多合作。

# entity-framework - 关于表连接的存储库、接口、聚合根等

> ID：13044265
> 
> 赞同：0
> 
> 时间：2012-10-24T06:58:50.227
> 
> 标签：entity-framework, architecture, repository-pattern

我正在慢慢尝试提高我对企业应用程序开发的了解。关于最佳实践，我已经了解了如何创建 iRepository 接口的具体存储库实现，到目前为止它是有意义的。

我面临的挑战是何时（经常发生）我想要返回来自一个结果集中的两个或多个表的数据，以及如何最好地处理这个问题。

我知道识别聚合根可能是最好的方法，但我想知道在使用特定/自定义存储库与通用存储库时如何处理接口和存储库。

通用存储库似乎是减少为每个所需实现创建单独 iRepositories 的需要的好方法，但问题是并非我的所有具体类都需要通用存储库接口中的所有方法，即有时我需要更多，而其他时候我需要更少。

我想知道处理这种情况的最佳做法是什么？开发人员通常是否拥有一个通用存储库接口，然后为更具体的数据访问需求创建更具体的存储库接口？

我已将此项目用作最佳实践的指南： http: [//efmvc.codeplex.com/](http://efmvc.codeplex.com/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T07:50:45.600

通用存储库应该只包含最少量的方法。然后，我通常会为每个聚合根创建一个特定的存储库（一个新接口和一个继承通用存储库的新类）。

就像是：

```
public interface IRepository<T>
{
    void Create(T);
    void Update(T);
    T Get(int key);
}

public interface IUserRepository : IRepository<User>
{
    User GetByUserName(string userName);
} 
```

所以用户存储库看起来像：

```
public class UserRepository : Repository<User>, IUserRepository
{
     public User GetByUserName(string userName)
     {
         return DbContext.Users.FirstOrDefault(x => x.UserName == userName);
     }
} 
```

但最近我转向查询，就像我在这里描述的那样：http: [//blog.gauffin.org/2012/10/griffin-decoupled-the-queries/](http://blog.gauffin.org/2012/10/griffin-decoupled-the-queries/)

# c# - 什么数据结构适合字典程序？

> ID：13044266
> 
> 赞同：0
> 
> 时间：2012-10-24T06:58:56.397
> 
> 标签：c#, xml, serialization, storage

我想用**C#**编写一个简单的字典，所以我将存储单词和含义。

我应该使用**XML**文件来存储数据还是将整个数据结构对象（*假设我将单词/含义对存储在链表或 hashTable 中*）作为**序列化对象**！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:01:35.817

使用可序列化的字典。您可以创建自己的（这并不难），也可以询问谷歌。您可以使用许多不同的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:03:57.187

为什么不创建一个带有 2 个字段以包含单词 -> 定义的表的 SQL 数据库。

我认为，答案还取决于你想用它做什么，以及你是否有一个中心位置来存储数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:16:23.273

我认为您应该为此使用 SQL 数据库。您可以使用任何 ORM linke NHibernate、Linq to SQL 或实体框架进行插入、更新和删除。

如果您的数据有限并且您想要更小的占用空间，您可以使用[SQL Server Compact](http://en.wikipedia.org/wiki/SQL_Server_Compact) Edition 或[SQLite](http://www.sqlite.org/)

# image-processing - 在进行多相机图像拼接和相机校准时遇到一些困难

> ID：13044270
> 
> 赞同：1
> 
> 时间：2012-10-24T06:59:26.200
> 
> 标签：image-processing, opencv, camera-calibration

我在这里问了很多与图像拼接相关的问题，因为我很笨，无法理解某些事情:(

我目前正在研究基于单应性的多机位图像拼接，并且遇到了一些我自己无法解决的问题。**我使用 Visual Studio 2008/2010 和 OpenCV 2.3.1 来处理我的项目。**

我将在下面描述它们：

**首先，我放了一些东西（代码，视频...等），稍后将在下面的链接中提到，因为我目前最多只能发布 2 个链接...**

[https://docs.google.com/folder/d/0B2r9FmkcbNwAM2drVHVJUktnS3M/edit](https://docs.google.com/folder/d/0B2r9FmkcbNwAM2drVHVJUktnS3M/edit)

请看一下上面提到的链接中存在的视频“Stitching_HomographyBased.avi”。

这段 12 秒的视频展示了我的代码当前是如何工作的。我使用 2 个网络摄像头，将它们尽可能靠近并放置在不同的方向上，重叠区域大约为 30%~50%。图 1 和图 2 分别显示了 2 台相机拍摄的图像。当然，更宽的窗口显示对齐（拼接）的全景图。

但是，视频显示了**扭曲图像未正确对齐的问题（见 0:04，我的实验室伙伴站在 2 个图像的边界）**

在对相关研究进行了一些调查后，我猜测导致此结果的主要原因之一可能是由于我没有对两个相机进行相机校准，径向和切向畸变导致了误差。**我的猜测是正确的还是可能有其他一些因素也会导致这种不匹配发生？**

然后我尝试使用现有的相机校准代码和棋盘进行相机校准，但我一直得到奇怪的结果。请在链接中查看另一个名为“BadCalibration.avi”的视频。 **我校准相机的方式有什么问题？**

我的代码也上传到上面的链接中，它被命名为 Stitching1024.cpp

感谢所有的帮助。

# sql - 需要表格转置的解决方案

> ID：13044272
> 
> 赞同：0
> 
> 时间：2012-10-24T06:59:55.437
> 
> 标签：sql, sql-server-2008, c#-4.0, stored-procedures, sql-server-2008-r2

我有一个名为 Sample 的表，看起来像。

![在此处输入图像描述](../Images/7924f1101317bd803dc9bd94d969f955.png)

我希望输出如下![在此处输入图像描述](../Images/acf1d0b11613cfc2d8a0937690912318.png)

为此，我构建了以下查询：

```
SELECT YEAR/MONTH, 1L,3L,4L,6L,8L
    FROM (
    SELECT PANEL, LAYERCOUNT, MONTHS
    FROM Sample) up
    PIVOT (SUM(Count) FOR CountOFL IN (1L,3L,4L,6L,8L)) AS pvt
    ORDER BY YEAR/MONTH 
```

但它在“1”附近给出错误语法错误。

![在此处输入图像描述](../Images/acf1d0b11613cfc2d8a0937690912318.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T07:12:27.230

对于您提供的表结构，此查询将返回 CountOFL 列上的透视表：

```
SELECT YEARMONTH, [1L],[3L],[4L],[6L],[8L]
FROM Sample
PIVOT (SUM(RecordCount) FOR CountOFL IN ([1L],[3L],[4L],[6L],[8L])) AS pvt
ORDER BY YEARMONTH 
```

结果：

```
YEARMONTH                        1L          3L          4L          6L          8L
-------------------------------- ----------- ----------- ----------- ----------- -----------
Dec2011                          2           NULL        NULL        NULL        NULL
Jan2011                          NULL        4           NULL        NULL        NULL
Jul2012                          2           NULL        5           NULL        NULL
Jun2011                          NULL        NULL        NULL        NULL        1
Jun2012                          2           NULL        NULL        1           NULL
May2011                          NULL        5           NULL        NULL        NULL
Sep2012                          NULL        1           NULL        NULL        NULL 
```

因此，您需要将 PIVOTed 列的值括在方括号中。

# php - 继承和可见性 - PHP

> ID：13044281
> 
> 赞同：20
> 
> 时间：2012-10-24T07:00:32.043
> 
> 标签：php, inheritance

我很难理解为什么我们会得到这段代码的输出：

```
<?php

class Bar 
{
    public function test() {
        $this->testPrivate();
        $this->testPublic();
    }

    public function testPublic() {
        echo "Bar::testPublic\n";
    }

    private function testPrivate() {
        echo "Bar::testPrivate\n";
    }
}

class Foo extends Bar 
{
    public function testPublic() {
        echo "Foo::testPublic\n";
    }

    private function testPrivate() {
        echo "Foo::testPrivate\n";
    }
}

$myFoo = new foo();
$myFoo->test(); 
?> 
```

所以 Foo 扩展了 Bar。$myfoo 是 Foo 类的对象。Foo 没有名为 test() 的方法，因此它从其父 Bar 扩展它。但是为什么 test() 的结果是

```
Bar::testPrivate 
Foo::testPublic 
```

你能解释一下为什么第一个不是 Foo::testPrivate，当这个父母的方法在孩子中被覆盖时？

非常感谢您！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T07:07:42.180

可能`testPrivate`是因为顾名思义，它是一个私有方法，不会被类继承继承/覆盖。

在 php.net 手册页上，您可能从中获得了该代码，明确指出`We can redeclare the public and protected method, but not private`

所以，到底发生了什么：`testPrivate`如果只有子对象，子类不会重新声明方法，而是在“范围”中创建它自己的版本。正如`test()`在父类中定义的那样，它将访问 parents `testPrivate`。

如果您要`test`在子类中重新声明该函数，它应该访问 childs`? testPrivate()`方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T07:07:41.010

除了声明类之外，私有方法对任何东西都不可见。由于您`testPrivate`从父类调用，它唯一可以访问的方法是它自己的方法声明。因此你得到你看到的输出。但是，如果访问修饰符 be `protected`，那么您将获得您期望的输出，因为受保护的方法在整个继承链中都是可见的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-24T07:07:00.730

`private`成员不能被覆盖，只有公共和受保护的成员可以。这意味着，事实上，`testPrivate`它**没有**被覆盖，所以`Bar`看不到它，仍然调用它自己的`testPrivate`。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-24T07:07:43.247

因为`private`意味着`private`。没有其他类，甚至子类都不知道`Bar::testPrivate()`，因此不能覆盖他们甚至不知道的东西。

你`Foo::testPrivate()`只能在里面使用`Foo`。因为这`private`就是全部。

更多信息：[覆盖私有方法时的奇怪行为](https://stackoverflow.com/questions/3756609/strange-behavior-when-overriding-private-methods)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-24T07:06:41.460

从[手册](http://php.net/manual/en/language.oop5.visibility.php)：

> 声明为私有的成员只能由定义该成员的类访问。

当您的测试函数在基类 Bar 中运行时，它将访问自己类中的私有函数。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-24T07:15:01.657

这不是特定于 PHP 的。继承规则要求可覆盖受保护的和公共的功能。私有函数有自己的作用域，对于泛化类是不可见的。

请在 Java 中找到以下相同的情况，相同的结果：

```
Bar::testPrivate

Foo::testPublic 
```

除非您可能会收到警告

```
The method testPrivate() from the type Foo is never used locally    Foo.java 
```

因为Java是编译的。

```
public class Bar 
{
    public void test() {
        this.testPrivate();
        this.testPublic();
    }

    public void testPublic() {
        System.out.println("Bar::testPublic\n)");
    }

    private void testPrivate() {
        System.out.println( "Bar::testPrivate\n");
    }
}

public class Foo extends Bar {
    public void testPublic() {
        System.out.println("Foo::testPublic\n");
    }

    private void testPrivate() {
        System.out.println("Foo::testPrivate\n");
    }

    public static void main(String[] args) {
        Foo myFoo = new Foo();
        myFoo.test();
    }
} 
```

# php - 在选择更改时将 Zend_Paginator 页面重置为第一页

> ID：13044287
> 
> 赞同：1
> 
> 时间：2012-10-24T07:01:00.873
> 
> 标签：php, jquery, zend-framework

我有一个页面，其中包含五个选择（下拉列表），用于过滤我的数据集，底部有分页 (Zend_Paginator) 。每次选择更改其值时都会提交具有 get 方法的表单，并且我希望将我的页码重置为第一页。

在提交表单的那一刻，页面保持不变（当前页面），因为它包含在 URL 中，我不知道提交后如何修改它。

我的网址是这样的：

```
 .../controller/action/page/2?sec=3&subsec=10&subbus=17&act=all&subact=all 
```

任何想法我怎么能做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:31:03.003

如果您想避免来自 url 本身的页面参数，您可以在没有页面参数的情况下构建表单操作。

```
 $form->setAction('/controller/action'); 
```

或者，您可以修改 paginator 变量以指向第 1 页。

```
 $paginator->setCurrentPageNumber(1); 
```

# c# - 用户代码未处理 WCF Unhandled FaultException

> ID：13044288
> 
> 赞同：3
> 
> 时间：2012-10-24T07:01:02.310
> 
> 标签：c#, wcf, telerik, faultexception

我正在尝试在带有 .net 4.5 的 VS 2012 中使用带有 Telerik OpenAccess 的 WCF 普通服务。

我尝试了 Telerik 开发人员手册并创建了服务和客户端。

在服务接口 IEntitiesModel 我把

```
[OperationContract]
[FaultContract(typeof(string))]
PersistentDto ReadPersistentDto(string dtoKey); 
```

在 EntitiesModel.SVC 的方法中，我使用了一个简单的构造作为第一次尝试：

```
public PersistentDto ReadPersistentDto(string dtoKey)
{
   throw new FaultException("test");
} 
```

在消费者的用户代码中，我为异常设置了一个捕获。

现在的问题是：

每次调用该服务时，Visual Studio 都会在“throw new FaultException”中停止并显示错误消息，即用户代码未处理 FaultException。如果我继续 F5，异常也会被消费者的用户代码捕获。

为什么它在服务中停止？

在我的理解中，FaultException 是应该传递给服务消费者的东西。

我应该怎么做才能正确抛出 FaultException？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T07:05:55.463

转到并取消选中row 列`Debug -> Exceptions`下的复选框。`Thrown``CLR exception`

如果选中该复选框，它将导致调试器在您抛出异常的每个位置停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-11T04:29:32.180

这与设置有关。您可以通过转到工具-> 选项来进行所需的设置现在切换到调试菜单并取消选中
“启用异常助手”和
“仅启用我的代码” [![在此处输入图像描述](../Images/353a04d7014ecdc3791a929d299d4492.png)](https://i.stack.imgur.com/Fxt32.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:08:40.057

服务器不知道客户端将处理异常（他应该如何处理？）。这就是调试器告诉您它未处理的原因。

你也抛出了这样的错误：

```
public PersistentDto ReadPersistentDto(string dtoKey)
{
   throw new FaultException<string>("test");
} 
```

这符合您的声明：

```
[FaultContract(typeof(string))] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T07:17:08.640

它与调试有关。但是，它不会在执行时停止您的服务（除非您没有正确管理异常）。

正如 RV1987 所说，如果 VS 启用了 CLR 异常，它会在任何时候抛出异常时通知您。

# ios - 自动布局旋转轮

> ID：13044289
> 
> 赞同：6
> 
> 时间：2012-10-24T07:01:02.167
> 
> 标签：ios, cgaffinetransform, autolayout, catransform3d

我正在尝试使用 CGAffineTransformRotate 旋转 UIImageView 约束，但视图在旋转时会抖动。如果我使用 CATransform3DRotate 旋转它的图层，这不会发生，但是一旦我编辑约束（更改常量），旋转的图像就会跳开。有没有人知道如何解决这个问题？

这是跳开的旋转图像的截图![在此处输入图像描述](../Images/ed378104cd3dcb531ec36cb9139ee5e9.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T15:08:24.577

自动布局作用于 UIView 的框架。框架是根据视图的中心、边界和变换属性计算得出的。默认情况下 view.transform 只是 CGAffineTransformIdentity，在这种配置中，框架是一个与父视图相同方向的矩形，具有与视图边界相同的宽度和高度。

但是，当您修改 view.transform（或等效的 view.layer.transform）时，正如您所做的那样，这会破坏中心、边界和框架之间的可预测关系。例如，如果您的变换是 20 度旋转，则框架将不再具有与边界相同的宽度和高度。框架现在将是（我认为......）与超级视图相同的任何矩形，需要包含您现在旋转 20 度的原始矩形。

而且由于自动布局作用于 frame 属性，它现在很可能会产生您不想要的布局。

例如，假设您的视图在 10x10 框架矩形内呈现一个圆圈，该矩形通过空间限制与父视图左上角对齐。然后将其旋转 45 度。一个旋转的圆圈看起来是一样的。但是现在框架是旋转后可以包含原始矩形的最小矩形，这个最小的矩形是 10/sqrt(2) x 10/sqrt(2)。当自动布局将左上对齐应用到这个新框架时，您将看到您的圆圈向下移动并向右移动。它不再以 {5,5} 为中心，而是以 {5/sqrt(2),5/sqrt(2)} 为中心。

我认为解决此问题的方法是手动调整布局约束“常量”参数以纠正变换的效果，或者类似地覆盖 alignmentRectForFrame 以强制自动布局在调整为补偿变换的 alignmentRect 上工作，或者定义您的原始约束以绑定到可能不受变换影响的视图中心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T16:20:53.843

我刚刚在这里写了一篇关于这个问题的小文章：

[使用自动布局时，如何调整 CALayer 的锚点？](https://stackoverflow.com/questions/12943107/how-do-i-adjust-the-anchor-point-of-a-calayer-when-auto-layout-is-being-used/14105757#14105757)

我的结论是自动布局和视图转换不能很好地结合在一起。我给出了两个解决方案：(a) 仅使用不反击您打算应用的转换的约束，或者 (b) 通过对其不使用任何约束并将其`translatesAutoresizingMask`属性设置为 YES 将视图完全脱离自动布局，这样这个视图的工作方式与他们在自动布局之前所做的一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T08:28:04.647

我刚刚收到 Apple 支持团队的回复，他们通过覆盖 Superview 的 layoutSubviews 为我的问题提供了解决方案。这允许为特定视图应用特殊布局。这可能不是一个完美的解决方案，但它就像一个魅力，因为苹果建议它，如果它来自实现自动布局的工程师，它应该是一个很好的解决方案

[我在这里](https://stackoverflow.com/questions/12943107/how-do-i-adjust-the-anchor-point-of-a-calayer-when-auto-layout-is-being-used/14119154#14119154)添加了一个更完整的答案- 一个类似的问题。

# php - 获取文件内容'php：//输入'不起作用

> ID：13044300
> 
> 赞同：0
> 
> 时间：2012-10-24T07:01:38.680
> 
> 标签：php, json, rest, file-get-contents

我有 PHP 应用程序尝试使用 'file_get_contents' 函数在 'php://input' 中获取 post JSON。只返回空字符串。下面是完整的代码行。

```
$_PUT = json_decode(file_get_contents("php://input"), true); 
```

或者我需要更改任何 apache/php 设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:57:04.570

> 我正在使用这个标题`'Content-Type': 'application/x-www-form-urlencoded'`

如果您的数据是 application/x-www-form-urlencoded，那么您应该通过`$_POST`而不是接触原始 HTTP 请求正文来访问它。只有在使用非典型内容类型（例如`application/json`）时才这样做。

如果您的数据不是该格式，那么您应该使用正确的 Content-Type 标头。

# google-chrome - 按内容类型划分的 Google 云端硬盘应用

> ID：13044302
> 
> 赞同：0
> 
> 时间：2012-10-24T07:01:44.343
> 
> 标签：google-chrome, google-drive-api

Google Drive 允许用户选择一个应用程序来查看不同的内容类型。它是否已经或将来会建议可以处理用户尝试查看的特定内容类型的驱动应用程序？什么时候？

前任。如果我尝试使用“打开方式”->“获取更多”选项从 Google Drive 打开 MP3，我会看到所有 Google Drive 应用程序。但我只想看到支持 MP3 内容类型的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:18:45.043

Google Drive 在打开 Open With 上下文菜单时已经只显示支持给定文件类型的应用程序：

[https://developers.google.com/drive/apps-overview#opening_and_creating_files_from_the_drive_ui](https://developers.google.com/drive/apps-overview#opening_and_creating_files_from_the_drive_ui)

此外，Google 云端硬盘推广现有应用程序，这些应用程序可以在用户未安装时打开给定文件类型：

[http://googleappsdeveloper.blogspot.com/2012/08/help-users-find-your-app-with-mime-type.html](http://googleappsdeveloper.blogspot.com/2012/08/help-users-find-your-app-with-mime-type.html)

# oracle11g - 想要将数据从一个表复制到另一个表，并在 oracle 中添加了 2 个新列

> ID：13044305
> 
> 赞同：1
> 
> 时间：2012-10-24T07:02:26.753
> 
> 标签：oracle11g

我在mysql中有一个查询

```
insert into a_archive ( select * , "Zuned Ahmed" as archivedBy from B); 
```

上面的查询在 mysql 中执行良好，这在 oracle 中不支持。

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:04:43.850

请改用这个：

```
insert into a_archive 
select b.* , 'Zuned Ahmed' as archivedBy from B b 
```

解释：

使用 Oracle 数据库时：

1- 要指定文字字符串，使用单引号`''`。双引号`""`有不同的用途。

2- 如果`*`指定时没有前缀别名，则不允许使用其他列。否则，`*`必须以表别名作为前缀。

3-`Insert ... Select ...`语句遵循与上面给出的完全相同的语法；不允许使用大括号。

希望这能解决您的问题。

# c++ - 数据类型在非常奇怪的线上更改和中断

> ID：13044309
> 
> 赞同：0
> 
> 时间：2012-10-24T07:02:46.113
> 
> 标签：c++, thread-safety, eigen

所以我有来自 Eigen 库的这个矩阵。

```
Eigen::MatrixXd 
```

它充满了数据，是 4x3900 点。它用于具有以下几行的函数中：

现在这组代码中甚至没有使用矩阵，作为参考，它被称为modelPointCloud。使用 GDB，我逐步浏览了图像中的线条。对于`workIndex`and`tid`线，矩阵的大小是正确的（即 4x3900）。但是当我进入下一行时`idTableLock`（

现在正因为如此，我得到了这个错误：

![在此处输入图像描述](../Images/3a8af1a2ff20d05bda22bc5dc21e9231.png)

在这条线上：

这是有道理的，因为矩阵不再是正确的大小。

现在其他线程正在运行，但没有人应该有权访问此数据类型。有谁知道为什么会这样？为什么会是那条改变矩阵的特定线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:40:03.157

我的猜测是，这与 Eigen 无关。对我来说，这听起来像是内存损坏。您可能不会通过 modelPointCloud 变量直接访问内存，但可能会写入保存矩阵大小的内存。这些类型的错误很难调试。您很可能在某处使用了越界索引。看看关于这个主题的其他[帖子。](https://stackoverflow.com/questions/10968202/debugging-memory-corruption)

# c++ - 在二叉搜索树中显示节点的路径

> ID：13044310
> 
> 赞同：1
> 
> 时间：2012-10-24T07:02:55.770
> 
> 标签：c++, binary-search-tree

我正在尝试显示从 BST 的根节点到目标节点的路径。我的功能在前两层工作得很好，但在那之后就搞砸了。例如，测试编号为 6、9、4、11、10（按此顺序插入）。如果我搜索 6、9 或 4，它会起作用（例如：“6 9”）。但是如果我尝试 11 或 10，它会同时显示它们，并且会乱序显示。我有点不知道为什么。任何想法都会很棒！

```
template <class T>
void BST<T>::displayPath(T searchKey, BST<T> *node)
{
    if (searchKey == node->mData)
    {
        cout << node->mData << " ";
    }

    else if (searchKey < node->mData )
    {
        cout << node->mData << " ";
        displayPath(searchKey, node->mLeft);
    }
    else// (searchKey > node->mData)
    {
        cout << node->mData << " ";
        displayPath(searchKey, node->mRight);
    }
} 
```

这是插入功能。数字按上述顺序插入。

```
template <class T>
void BST<T>::insert(BST<T> *&node, T data)
{
   // If the tree is empty, make a new node and make it 
   // the root of the tree.
   if (node == NULL)
   { 
      node = new BST<T>(data, NULL, NULL);
      return;
   }

   // If num is already in tree: return.
   if (node->mData == data)
      return;

   // The tree is not empty: insert the new node into the
   // left or right subtree.
   if (data < node->mData)
          insert(node->mLeft, data);
   else
      insert(node->mRight, data);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T07:16:18.623

您的代码证实了我的怀疑。您的方法很好 - 这是您`6, 9, 4, 11, 10`按以下顺序插入构建的树：

第一（6）：

```
 6 
```

第二 (9)

```
 6
  \
   9 
```

第三（4）

```
 6
 / \
4   9 
```

第四（11）：

```
 6
  / \
 /   \
4     9
       \
        \
         11 
```

第五（10）：

```
 6
  / \
 /   \
4     9
       \
        \
         11
         /
        /
       10 
```

因此，搜索 10，将为您提供路径 (6,9,11,10)。

请注意，从根到 BST 中的元素的路径不能保证被排序 - 如果这是您所期望的。实际上，只有当节点位于树中最右叶的路径上时，才会对其进行排序。

* * *

代码中的另一个问题：搜索 7（或树中不存在的任何元素）会给你一些虚假的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-23T00:45:51.883

该代码仅在输入值在树中时才有效。当您搜索一个不存在的值时，您正在寻找一个不在树中的节点

```
template <class T>
void BST<T>::displayPath(T searchKey, BST<T> *node)
{
    if (searchKey == node->mData)
    {
    cout << node->mData << " ";
    }

    else if (searchKey < node->mData )
    {
        cout << node->mData << " ";
        if (node->mLeft == NULL) // When trying to access a node that isn't there
            cout << "Not Found\n";
        else
        displayPath(searchKey, node->mLeft);
    }
    else // (searchKey > node->mData)
    {
        cout << node->mData << " ";
        if (node->mRight == NULL)
            cout << "Not Found\n";
        else
            displayPath(searchKey, node->mRight);
    }
} 
```

# javascript - 用户输入号码时如何将信用卡号码显示为星号（*）？

> ID：13044313
> 
> 赞同：0
> 
> 时间：2012-10-24T07:03:08.220
> 
> 标签：javascript, jquery

当用户在信用卡字段中键入时，我想将所有输入显示为星号，除了我想显示为数字的最后四位数字。我使用了 jQuery 掩码，但它没有给我想要的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:31:11.927

您可以使用多个输入，例如：

```
<script type="text/javascript">
    $(function () {
        $(".card-number input[type='password']").keyup(function (event) {
            var len = $(this).val().toString().length;
            if (len == 4) {
                $(this).next().focus();
            }
        });

        $(".card-number input[type='button']").click(function () {
            var number = 0;
            $(".card-number input").not("input[type='button']").each(function (index, element) {
                number += $(element).val();
            });
            alert(number);
        });
    });

</script>

<!-- ####-####-####-#### -->
<div class="card-number" >
    <input type="password" value="" maxlength="4" />
    <input type="password" value="" maxlength="4" />
    <input type="password" value="" maxlength="4" />
    <input type="text" value="" maxlength="4" />
    <input type="button" value="go" />
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:16:13.433

我建议只使用 2 个输入字段。

否则使用以下方法。这将在密码输入字段下方显示文本。

[http://jsfiddle.net/Doinkmeister/EYgqY/9/](http://jsfiddle.net/Doinkmeister/EYgqY/9/)

html

```
<input id="creditCard" type="password">

<div id="show"></div>​ 
```

javascript

```
var number = $('#creditCard');
var display = $('#show');

$('#creditCard').keyup(function(){
    if($('#creditCard').val().length < 1){
        $('#show').text('');
    }
    else{
        var a = '';
        if(number.val().length <= 8){
            for(var i = 0; i < number.val().length; i++){                
                a = a + '*';           
                display.text(a);  
            }
        }
        else
        {
            for(var i = 0; i < number.val().length; i++){ 
                if(i <= 8){
                    a = a + '*';           
                    display.text(a);  
                }
                else{          
                    a = a + number.val().substring(i,i+1);           
                    display.text(a);  
                }
            }
        }
    }
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-19T14:57:20.657

我认为这就是你需要的

```
function creditCardMask(number, character = "*"){
  number = number.replace(/[^0-9]+/g, ''); /*ensureOnlyNumbers*/
  var l = number.length;
  return number.substring(0,4) + character.repeat(l-8) + number.substring(l-4,l);
}

function doMaskNumber(e){
  document.querySelector("#maskedNumber").innerHTML = creditCardMask(document.querySelector("#credit-card").value);
}
```

```
Credit card number<input type="text" id="credit-card" value="1111111111">
<p id="maskedNumber"></p>
<button type="button" onclick="doMaskNumber()">Make the mask</button>
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-24T07:07:31.020

最简单的实现将从一个开始，`<input type =password>`而当输入进入时，您还将值写入`<input type=text>`隐藏的值，然后当用户完成输入值时，将除最后四个之外的所有字符更改为 *s 并显示该框并隐藏密码框。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-24T07:08:59.497

你可以让它动态完成：

```
window.onkeyup = function(ev) {

  val = $("the-input").val();
  for(var i = 0;i<min(digits_to_not_show,val.length-1);i++) {
   val = val.substring(0,i)+"*"+val.substr(i+1);
  }

   $("the-input").val(val);
} 
```

# java - 当某些值已经被称为 json 字符串时，找到一种更好的方法来使用 jackson 将 map 转换为 json

> ID：13044314
> 
> 赞同：2
> 
> 时间：2012-10-24T07:03:12.097
> 
> 标签：java, json, jackson

我知道使用 Jackson 将 Map 转换为 Json 非常容易。但我想知道我的情况是否有更好的方法。下面是我的代码。

```
String jsonInfo = "{\"attr\":\"value\",\"attr2\",\"value2\"}";

ObjectMapper mapper = new ObjectMapper();
Map<String,Object> map = new HashMap<String,Object>();
map.put("name","daniel");
map.put("info",mapper.readValue(jsonInfo, new TypeReference<Map>(){}));

String finalJsonString = mapper.writeValueAsString(map); 
```

如您所见，即使我已经知道 jsonInfo 是一个 json 字符串。对于这部分，我将其转换为地图，然后最终让 Jackson 再次将其转换为 json。有没有更好的方法可以避免这种重复的工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:51:24.647

您只想使用 Jackson 将您的 JSON 解析为其树结构，然后您可以在其中添加数据。这消除了对 POJO（或 Map）进行序列化/反序列化的额外步骤

```
String jsonInfo = "{\"attr\":\"value\",\"attr2\":\"value2\"}";
ObjectMapper mapper = new ObjectMapper();
JsonNode origNode = mapper.readTree(jsonInfo);

ObjectNode rootNode = mapper.createObjectNode();
rootNode.put("name", "daniel");
rootNode.put("info", origNode);

String finalJson = rootNode.toString(); 
```

你的`finalJson`然后变成：

> {"name":"daniel","info":{"attr":"value","attr2":"value2"}}

请注意，它`JsonNode`是不可变的，但`ObjectNode`如果您也想修改原始 JSON，也可以将其转换为。

# android - 使用标准 android 应用程序拍照并存储在 db 中

> ID：13044316
> 
> 赞同：2
> 
> 时间：2012-10-24T07:03:19.547
> 
> 标签：android, camera, android-camera, android-camera-intent

在我的 android 应用程序中，我需要调用标准照片应用程序，拍摄照片并将其存储在设备的 sqlite 数据库中。

这是我启动意图的按钮的处理程序

```
private Uri fileUri;
private File file;
private ImageView foto;

public void fotoHandler(View view) {
    // create Intent to take a picture and return control to the calling application
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

    file = FileUtilities.getOutputMediaFile();
    fileUri = Uri.fromFile(file); // create a file to save the image
    intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); // set the image file name

    // start the image capture Intent
    startActivityForResult(intent, TAKE_PICTURE);
} 
```

这是结果处理程序

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        // Image captured and saved to fileUri specified in the Intent
        Toast.makeText(this, "Image saved to:\n" +
                         fileUri.toString(), Toast.LENGTH_LONG).show();

         try {
             Bitmap bitmap =  MediaStore.Images.Media.getBitmap(this.getContentResolver(), fileUri);
             file.delete();
             foto.setImageBitmap(laatsteFoto);
         } catch (FileNotFoundException e) {
             Toast.makeText(this, "File " + fileUri.toString() + " can't be found !", Toast.LENGTH_LONG).show();
         } catch (IOException e) {
             Toast.makeText(this, "File " + fileUri.toString() + " can't be read !", Toast.LENGTH_LONG).show();
         }
     } else if (resultCode == RESULT_CANCELED) {
         // User cancelled the image capture
     } else 
         Toast.makeText(this, "Error during retrieving photo from camera !", Toast.LENGTH_LONG).show();
     }
} 
```

它在我的带有 ICS 的 Acer A100 上运行良好，但在带有 ICS 的三星 Galaxy S2 上出现问题。

```
10-24 08:44:05.190: E/AndroidRuntime(19861): FATAL EXCEPTION: main
10-24 08:44:05.190: E/AndroidRuntime(19861): java.lang.RuntimeException: Unable to resume activity {be.lengo.autikoken/be.lengo.autikoken.IngredientWijzigen}: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=null} to activity {be.lengo.autikoken/be.lengo.autikoken.IngredientWijzigen}: java.lang.NullPointerException
10-24 08:44:05.190: E/AndroidRuntime(19861):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2455)
10-24 08:44:05.190: E/AndroidRuntime(19861):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2483)
10-24 08:44:05.190: E/AndroidRuntime(19861):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1997)
10-24 08:44:05.190: E/AndroidRuntime(19861):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3362)
10-24 08:44:05.190: E/AndroidRuntime(19861):    at android.app.ActivityThread.access$700(ActivityThread.java:127)
10-24 08:44:05.190: E/AndroidRuntime(19861):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1162)
10-24 08:44:05.190: E/AndroidRuntime(19861):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-24 08:44:05.190: E/AndroidRuntime(19861):    at android.os.Looper.loop(Looper.java:137)
10-24 08:44:05.190: E/AndroidRuntime(19861):    at android.app.ActivityThread.main(ActivityThread.java:4511)
10-24 08:44:05.190: E/AndroidRuntime(19861):    at java.lang.reflect.Method.invokeNative(Native Method)
10-24 08:44:05.190: E/AndroidRuntime(19861):    at java.lang.reflect.Method.invoke(Method.java:511)
10-24 08:44:05.190: E/AndroidRuntime(19861):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
10-24 08:44:05.190: E/AndroidRuntime(19861):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
10-24 08:44:05.190: E/AndroidRuntime(19861):    at dalvik.system.NativeStart.main(Native Method)
10-24 08:44:05.190: E/AndroidRuntime(19861): Caused by: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=null} to activity {be.lengo.autikoken/be.lengo.autikoken.IngredientWijzigen}: java.lang.NullPointerException
10-24 08:44:05.190: E/AndroidRuntime(19861):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2991)
10-24 08:44:05.190: E/AndroidRuntime(19861):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2442)
10-24 08:44:05.190: E/AndroidRuntime(19861):    ... 13 more
10-24 08:44:05.190: E/AndroidRuntime(19861): Caused by: java.lang.NullPointerException
10-24 08:44:05.190: E/AndroidRuntime(19861):    at be.lengo.autikoken.IngredientWijzigen.onActivityResult(IngredientWijzigen.java:233)
10-24 08:44:05.190: E/AndroidRuntime(19861):    at android.app.Activity.dispatchActivityResult(Activity.java:4654)
10-24 08:44:05.190: E/AndroidRuntime(19861):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2987)
10-24 08:44:05.190: E/AndroidRuntime(19861):    ... 14 more 
```

当我用结果评论吐司时记录

```
10-24 09:27:06.520: E/AndroidRuntime(21849): FATAL EXCEPTION: main
10-24 09:27:06.520: E/AndroidRuntime(21849): java.lang.RuntimeException: Unable to resume activity {be.lengo.autikoken/be.lengo.autikoken.IngredientWijzigen}: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=null} to activity {be.lengo.autikoken/be.lengo.autikoken.IngredientWijzigen}: java.lang.NullPointerException
10-24 09:27:06.520: E/AndroidRuntime(21849):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2455)
10-24 09:27:06.520: E/AndroidRuntime(21849):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2483)
10-24 09:27:06.520: E/AndroidRuntime(21849):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1997)
10-24 09:27:06.520: E/AndroidRuntime(21849):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3362)
10-24 09:27:06.520: E/AndroidRuntime(21849):    at android.app.ActivityThread.access$700(ActivityThread.java:127)
10-24 09:27:06.520: E/AndroidRuntime(21849):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1162)
10-24 09:27:06.520: E/AndroidRuntime(21849):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-24 09:27:06.520: E/AndroidRuntime(21849):    at android.os.Looper.loop(Looper.java:137)
10-24 09:27:06.520: E/AndroidRuntime(21849):    at android.app.ActivityThread.main(ActivityThread.java:4511)
10-24 09:27:06.520: E/AndroidRuntime(21849):    at java.lang.reflect.Method.invokeNative(Native Method)
10-24 09:27:06.520: E/AndroidRuntime(21849):    at java.lang.reflect.Method.invoke(Method.java:511)
10-24 09:27:06.520: E/AndroidRuntime(21849):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
10-24 09:27:06.520: E/AndroidRuntime(21849):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
10-24 09:27:06.520: E/AndroidRuntime(21849):    at dalvik.system.NativeStart.main(Native Method)
10-24 09:27:06.520: E/AndroidRuntime(21849): Caused by: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=null} to activity {be.lengo.autikoken/be.lengo.autikoken.IngredientWijzigen}: java.lang.NullPointerException
10-24 09:27:06.520: E/AndroidRuntime(21849):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2991)
10-24 09:27:06.520: E/AndroidRuntime(21849):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2442)
10-24 09:27:06.520: E/AndroidRuntime(21849):    ... 13 more
10-24 09:27:06.520: E/AndroidRuntime(21849): Caused by: java.lang.NullPointerException
10-24 09:27:06.520: E/AndroidRuntime(21849):    at android.content.ContentResolver.openInputStream(ContentResolver.java:361)
10-24 09:27:06.520: E/AndroidRuntime(21849):    at android.provider.MediaStore$Images$Media.getBitmap(MediaStore.java:715)
10-24 09:27:06.520: E/AndroidRuntime(21849):    at be.lengo.autikoken.IngredientWijzigen.onActivityResult(IngredientWijzigen.java:236)
10-24 09:27:06.520: E/AndroidRuntime(21849):    at android.app.Activity.dispatchActivityResult(Activity.java:4654)
10-24 09:27:06.520: E/AndroidRuntime(21849):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2987)
10-24 09:27:06.520: E/AndroidRuntime(21849):    ... 14 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T09:22:42.960

如果您的活动应该仅在纵向模式下运行，则三星 Galaxy S2 存在错误。发生的情况是您启动相机，它拍照，然后返回时，首先在横向开始您的活动，然后在 1 秒内旋转到纵向。确保使用 onSaveInstanceState 正确保存活动中的所有变量并在 onCreate 中恢复。这发生在我身上，因为我没有保存它们并且那部手机正在旋转活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:24:55.497

fileUri 可能为空。尝试正确初始化它。

# asp.net - 迁移到 .NET 4.5 后，ASP.NET 资源 (resx) 不起作用

> ID：13044324
> 
> 赞同：7
> 
> 时间：2012-10-24T07:03:48.423
> 
> 标签：asp.net, visual-studio-2012, .net-4.5

安装 Visual Studio 2012 并将我的 Web 应用程序迁移到 .NET 4.5。我在 App_GlobalResources 中有很多 resx 文件，并且总是可以正常工作。

迁移后 resx 文件在设计器“ **namespace MyApp.App_GlobalResources** ”而不是“namespace Resources”中生成。

我通过将 App_GlobalResources 重命名为“ **Resources** ”并将自定义工具从“GlobalResourceProxyGenerator”更改为“ **PublicResXFileCodeGenerator** ”解决了这个问题。

但它不适用于表达式，例如：**<%$ Resources: Users, LoginTitle %>**

谢谢你的建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-12T08:16:48.290

虽然我将自定义工具更改为：PublicResXFileCodeGenerator，但我不知道它是否对我有用。

主要问题是 - 就我而言，当我在 Visual Studio 2012 上构建 MVC 3 项目时，它为 .resx 文件创建了命名空间“资源”。

与 Visual Studio 2010 中一样，它位于命名空间“App_GlobalResources”下。

我将资源文件的 Designer.cs 下的命名空间重命名为“App_GlobalResources”，它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:25:34.837

我找到了这篇[文章](http://odetocode.com/blogs/scott/archive/2009/07/15/resource-files-and-asp-net-mvc-projects.aspx)。现在它可以工作了

我已将自定义工具设置为：PublicResXFileCodeGenerator

自定义工具命名空间到：资源

并构建操作：嵌入资源

# php - 我怎样才能遍历这个数组 - PHP

> ID：13044331
> 
> 赞同：0
> 
> 时间：2012-10-24T07:04:06.037
> 
> 标签：php, loops, foreach

这是`var_dump($options)`

```
array (size=4)
  0 => string '2' (length=1)
  'parent_2_children' => 
    array (size=3)
      0 => string '22' (length=2)
      1 => string '24' (length=2)
      2 => string '23' (length=2)
  1 => string '3' (length=1)
  'parent_3_children' => 
    array (size=3)
      0 => string '26' (length=2)
      1 => string '25' (length=2)
      2 => string '27' (length=2) 
```

我到目前为止所尝试的是

```
if(!is_null($options))
        {
            foreach($options as $option)
            {
                 if(!array_key_exists('parent_'.$option.'_children',$options))
                 {
                    //if position null output an error
                 }
            }   

        } 
```

按要求打印_r()

```
Array
(
    [0] => 2
    [parent_2_children] => Array
        (
            [0] => 22
            [1] => 24
            [2] => 23
        )

    [1] => 3
    [parent_3_children] => Array
        (
            [0] => 26
            [1] => 25
            [2] => 27
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:08:30.017

使用`print_r($options)`它`var_dump`更容易阅读..

检查您是否有数字键，然后检查新键是否存在。抛出一个错误。

```
if(!is_null($options)) {
    foreach($options as $key => $option) {
        if(is_int($key) && !array_key_exists('parent_'.$option.'_children',$options)) {
           echo 'parent_'.$option.'_children does not exist';
        }
    }   
} 
```

这是一个[工作示例](http://codepad.org/G1iVrCLJ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:14:28.750

试试这个？

```
if(!is_null($options)){
    foreach($options as $option){
        if(!array_key_exists('parent_'.$option.'_children',$options)){
            throw new Exception("Something went wrong!");
        }
    }   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:16:51.323

你的代码是正确的。对键的性质进行额外检查将减少执行，因为您只需对数字键进行处理。

```
 if(!is_null($options))
    {
        foreach($options as $key => $option)
        {
            if (is_numeric($key)) {
                 if(!array_key_exists('parent_'.$option.'_children',$options))
                  {
                       print 'parent_'.$option.'_children does not exist';
                   }
             }
        }   

    } 
```

要测试代码，请尝试以下数组：

```
 $options = array(0 => 2, 'parent_2_children' => array ( 0 => 22, 1 => 24, 2 => 23 ), 1 => 3, 'parent_3_children' => array ( 0 => 26, 1 => 25, 2 => 27 ), 2=>4 ); 
```

其 print_r 输出将是：

```
 Array
(
[0] => 2
[parent_2_children] => Array
    (
        [0] => 22
        [1] => 24
        [2] => 23
    )

[1] => 3
[parent_3_children] => Array
    (
        [0] => 26
        [1] => 25
        [2] => 27
    )

[2] => 4 
```

)

并且，它将输出：

```
 parent_4_children does not exist 
```

# javascript - 运行 JS 的 Flash 对象的调用者参数

> ID：13044334
> 
> 赞同：0
> 
> 时间：2012-10-24T07:04:27.470
> 
> 标签：javascript, actionscript-3, flash

我们有许多我们无法控制的 Flash 横幅（我们不能更改它们的源代码来传递参数）。单击时它们会运行单个 JS。这个脚本在我们这边，与横幅位于同一个域中。我们想知道如何从 JS 中找到有关调用 Flash 对象的任何参数，例如 SWF 的文件名、它在页面上的位置等。

我们尝试在 JS 中使用 arguments.callee.caller，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:49:24.650

您可以通过创建一个加载到横幅中并处理来自该 swf 的点击的通用持有者 swf 来解决此问题，而忽略来自原始横幅的 javascript 调用。您可以传入 flashvar 以区分不同的横幅并将任何信息传递给 js 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:54:18.617

如果 SWF 没有将任何这些信息作为参数传递，您就**无法**确定哪个 SWF 调用了您的 javascript 函数。

您也许可以在 JS 中获取堆栈跟踪，但无论调用者 SWF 是什么，它们都是相同的。

# html - 无法用鼠标控制下拉列表

> ID：13044336
> 
> 赞同：2
> 
> 时间：2012-10-24T07:04:38.693
> 
> 标签：html, css, firefox

我有两个并排的 iframe（它们在 div 中）。目标页面不适合它们，所以我使用了：

```
#historyGraph, #realtimeGraph
{
zoom: 0.85;
-moz-transform: scale(0.85);
-moz-transform-origin: 0 0; 
} 
```

一切看起来都不错，但是下拉列表存在问题。我可以用鼠标打开它。它向右侧和底部略微偏移打开，进行选择的唯一方法是使用键盘。

有什么办法解决这个问题吗？

编辑：http: [//jsfiddle.net/ZBQaf/](http://jsfiddle.net/ZBQaf/)

![图片：](../Images/6bca86d1b59a7fba637d256fa6640564.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:15:02.373

这是一个已知的问题。有关详细信息，请参阅[https://bugzilla.mozilla.org/show_bug.cgi?id=759993](https://bugzilla.mozilla.org/show_bug.cgi?id=759993)。

# installation - .NET Compact Framework 应用程序安装创建者

> ID：13044340
> 
> 赞同：0
> 
> 时间：2012-10-24T07:04:47.897
> 
> 标签：installation, compact-framework

是否有为 .NET Compact Framework 应用程序创建安装程序（如 InnoSetup）的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:45:03.923

我使用 CAB 管理器。它是创建和编辑 CAB 的绝佳工具。

[http://www.ocpsoftware.com/products.php](http://www.ocpsoftware.com/products.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:47:47.297

MSDN 上有一篇题为“[使用 .cab 和 .msi 文件部署 .NET Compact Framework 2.0 应用程序](http://msdn.microsoft.com/en-us/library/aa446504.aspx)”的文章，其中涵盖了 CAB 和 MSI 创建。

# iphone - 计算应用在 xcode 中打开的次数

> ID：13044342
> 
> 赞同：3
> 
> 时间：2012-10-24T07:04:58.797
> 
> 标签：iphone, objective-c, xcode

我想知道是否有人知道我如何计算我的应用程序被打开的次数。NSUserDefalte 什么的......我应该把 var 放在哪里，它应该在哪里启动到 0？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T07:12:23.413

在您的课程 AppDelegate.m 中，您可以这样做：

```
//Application did launch
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  int count = [[NSUserDefaults standardUserDefaults] integerForKey:@"LaunchCount"];
  if(count < 0) count = 0;
  [[NSUserDefaults standardUserDefaults] setInteger:count+1 forKey:@"LaunchCount"];
}

//The application was in background and become active
- (void)applicationWillEnterForeground:(UIApplication *)application
{
  int count = [[NSUserDefaults standardUserDefaults] integerForKey:@"LaunchCount"];
  if(count < 0) count = 0;
  [[NSUserDefaults standardUserDefaults] setInteger:count+1 forKey:@"LaunchCount"];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T07:08:25.223

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{
     //add 1
} 
```

![图片](../Images/196b6908128e837fbf660822850619e7.png)

图片来自[http://www.cocoanetics.com/2010/07/understanding-ios-4-backgrounding-and-delegate-messaging/](http://www.cocoanetics.com/2010/07/understanding-ios-4-backgrounding-and-delegate-messaging/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:11:22.030

是的，使用 NSUserdefaults 是一个简单的解决方案。

```
(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary     *)launchOptions{
    // Get the NSUserDefault number here, if not available, create a new.
} 
```

如果您希望它跟踪从后台恢复的所有时间，请查看：

```
-(void) applicationWillEnterForeground:(UIApplication*)application 
```

尝试这样的事情：

```
// Get the number of starts:
NSNumber *starts = [[NSUserDefaults standardUserDefaults] objectForKey:@"starts"];

// increase by one
NSNumber *number = [NSNumber numberWithInt:([starts intValue] + 1)];

// store the number of starts
[[NSUserDefaults standardUserDefaults] setObject:starts forKey:@"starts"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-19T07:49:42.103

Swift 版本 - 我将它用于**SKStoreReviewController.requestReview()**

```
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
    // Override point for customization after application launch.
    setupStart()
    return true
}

private func setupStart()
{
    setAppStartsInfos()
}

private func setAppStartsInfos()
{
    Helper.checkForStoreReviewAppStarted = Helper.uds.integer(forKey: Helper.udKeyAppRunned) + 1
    Helper.udStoreValue(key: Helper.udKeyAppRunned, value: Helper.checkForStoreReviewAppStarted)
} 
```

助手类

```
static var checkForStoreReviewUse = true
static let checkForStoreReviewAppStartedLimit: Int = 5
static var checkForStoreReviewAppStarted: Int = 0
static let uds = UserDefaults.standard
static var udKeyAppRunned: String
{
    get
    {
        return "\(getAppVersionClean())_udKeyAppRunned"
    }
}

static func udStoreValue(key: String, value: Any)
{
    return uds.set(value, forKey: key)
}

static func udStoredValue(key: String) -> Any?
{
    return uds.value(forKey: key)
}

static func udStoredValueExists(key: String) -> Bool
{
    return uds.value(forKey: key) != nil
}

static func getAppVersionClean() -> String
{
    if let version = Bundle.main.infoDictionary?["CFBundleShortVersionString"] as? String
    {
        return version
    }
    else
    {
        return String()
    }
}

static func checkForStoreReview()
{
    if checkForStoreReviewUse
    {
        if checkForStoreReviewAppStarted < checkForStoreReviewAppStartedLimit
        {
            // STOP checking for this app-run
            checkForStoreReviewUse = false
        }
        else
        {
            // STOP checking for this app-run
            checkForStoreReviewUse = false
            // Request review
            SKStoreReviewController.requestReview()
        }
    }
} 
```

# javascript - Opera 和 Firefox 关注输入问题

> ID：13044349
> 
> 赞同：2
> 
> 时间：2012-10-24T07:05:26.520
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

我在歌剧中的 Jquery UI 对话框有一个奇怪的问题。在所有其他浏览器中，代码都可以正常工作，包括 IE 8，但在 Opera 中出于某种原因，我必须使用选项卡按钮在对话框中选择一个字段。我无法使用鼠标选择字段！

更新：我的 Firefox 也有这个问题！所以这不仅仅是歌剧。它在 Chrome 和 IE 中绝对可以正常工作。我无法选择任何输入字段。有人知道我怎样才能正常关注我的 html 元素吗？

```
//Build the dialog
    function createActivityDialog() {
        var dropdown, activitydialog, timepicker, i, stageid;

        timepicker = "<select name='dialogbegintime' id='dialogbegintime'>";
        for ( i = 0; i < $("#times li").length; i = i + 1) {
            timepicker += "<option value='time" + i + "'>" + hourArray[i] + ":00" + "</option>";
        }
        timepicker += "</select>";

        dropdown = "<select name='podia' id='podia'>";
        for ( i = 0; i < $(".tr").length; i = i + 1) {
            stageid = $(".tr").eq(i).attr("id");
            dropdown += "<option value='" + stageid + "'>" + $(".th").eq(i).html() + "</option>";
        }
        dropdown += "</select>";

        activitydialog = $('<div></div>').html("<p id='dialogTip'>Voer hier een nieuwe activiteit in:</p><br />" + "Naam: <input type='text' name='activityName' id='activityName' /><br />" + "Selecteer een begintijd:" + timepicker + "<br />Selecteer het podium: " + dropdown).dialog({
            autoOpen : false,
            title : 'Activiteit Toevoegen',
            height : 300,
            width : 350,
            modal : true,
            close : function() {
                $(this).remove();
            }
        });
        return activitydialog;
    }

//Call/Open the dialog

$("#SomeForm").submit(function(event) {
    var mydialog;
    mydialog = createActivityDialog();
    mydialog.dialog('open');
    mydialog.dialog("option", "buttons", [{
        text : "Ok",
        click : ActivityDialogOk
    }, {
        text : "Cancel",
        click : function() {
            $(this).dialog("close");
        }
    }]);
    event.preventDefault();
}); 
```

HTML：

```
<form id="SomeForm" method="post">
    <button type="submit" name="addActivity">
        Add
    </button>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:33:00.637

好的。所以我想出了问题出在哪里：`$(document).disableSelection();`- 把它注释掉，一切都会好起来的。

jQuery UI 对话框打开第一个可选项卡元素，因此第一个输入被聚焦，但由于`disableSelection`整个文档导致您无法用鼠标聚焦字段。

# c# - 如何识别隔离网络

> ID：13044352
> 
> 赞同：1
> 
> 时间：2012-10-24T07:05:46.037
> 
> 标签：c#, .net-3.5, winverifytrust

我正在开发 ac# .Net3.5 应用程序。

[应用程序使用WinVerifyTrust](http://msdn.microsoft.com/en-us/library/windows/desktop/aa388208%28v=vs.85%29.aspx)检查文件的签名。问题是在孤立的网络上（即没有 Internet 访问权限，但机器仍有 IP 地址）需要很长时间（约 20 秒）直到 WinVerifyTrust 返回。

有没有办法识别这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:12:46.100

您是否尝试过使用`Windows API`-

```
using System;
using System.Runtime;
using System.Runtime.InteropServices;

    public class InternetCS
    {
        //Creating the extern function...
        [DllImport("wininet.dll")]
        private extern static bool InternetGetConnectedState( out int Description, int ReservedValue );

        //Creating a function that uses the API function...
        public static bool IsConnectedToInternet( )
        {
            int Desc ;
            return InternetGetConnectedState( out Desc, 0 ) ;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:08:30.590

如果计算机连接的互联网连接速度较慢，您将如何区分？

无论如何，您可以 Ping google（例如）以查看它是否可用。如果计算机未隔离，它将可用。

要从 C# ping 只需使用 System.Net.NetworkInformation.Ping

**编辑**：如果你需要支持代理，那么你应该通过谷歌端口 80 打开一个 TcpConnection 并检查你是否可以。如果您无法打开 google 的 80 端口，您也无法连接到 WinVerifyTrust。

# android - ClassCastException：AbsListView$LayoutParams 无法转换为 Gallery$LayoutParams

> ID：13044353
> 
> 赞同：6
> 
> 时间：2012-10-24T07:05:50.307
> 
> 标签：android, android-asynctask, android-gallery

我正在尝试开发 Android 3.1 平板电脑应用程序。

这个应用程序将有很多图像，我已经按照[UI 线程处理位图](http://developer.android.com/training/displaying-bitmaps/process-bitmap.html)教程进行操作，但我做错了，因为我得到：

**java.lang.ClassCastException** : android.widget.AbsListView$LayoutParams 不能转换为 android.widget.Gallery$LayoutParams

这是我的代码：

**我在 Activity 上设置了图库**

```
mFactGallery = (Gallery)mView.findViewById(R.id.factGallery);
mFactGallery.setAdapter(new ImageGalleryAdapter(mActivity, ImageView.ScaleType.FIT_END, 180, 90)); 
```

**ImageGalleryAdapter.java**

```
public class ImageGalleryAdapter extends BaseAdapter
{
    private ArrayList<String> mImagesPath;
    private Context mContext;
    private int mWidth;
    private int mHeight;

    public ArrayList<String> getmImagesPath()
    {
        return mImagesPath;
    }

    public void setmImagesPath(ArrayList<String> mImagesPath)
    {
        this.mImagesPath = mImagesPath;
    }

    public void addImage(String imagePath)
    {
        mImagesPath.add(imagePath);
    }

    public ImageGalleryAdapter(Context context, ImageView.ScaleType scaleType, int width, int height)
    {
        mContext = context;
        mWidth = width;
        mHeight = height;
        mScaleType = scaleType;

        mImagesPath = new ArrayList<String>();
    }

    @Override
    public int getCount()
    {
        return mImagesPath.size();
    }

    @Override
    public Object getItem(int position)
    {
        return position;
    }

    @Override
    public long getItemId(int position)
    {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        // Get a View to display image data                     
        ImageView imageView;
        // if it's not recycled, initialize some attributes
        if (convertView == null)
        {
            imageView = new ImageView(mContext);
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setLayoutParams(new GridView.LayoutParams(
                    LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
        }
        else
        {
            imageView = (ImageView) convertView;
            // Recicla el Bitmap.
            Bitmap bm = ((BitmapDrawable) imageView.getDrawable()).getBitmap();
            if (bm != null)
                bm.recycle();
        }

        String filePath = mImagesPath.get(position);
        if (BitmapTools.cancelPotentialWork(filePath, imageView))
        {
            String[] params = {filePath, Integer.toString(mWidth), Integer.toString(mHeight)};
            final BitmapWorkerTask task = new BitmapWorkerTask(imageView);
            final AsyncDrawable asyncDrawable =
                    new AsyncDrawable(mContext.getResources(), filePath, task);
            imageView.setImageDrawable(asyncDrawable);
            task.execute(params);
        }

        return imageView;
    }
} 
```

**BitmapWorkerTask.java**

```
public class BitmapWorkerTask extends AsyncTask<String, Void, Bitmap>
{
    private final WeakReference<ImageView> imageViewReference;
    public String imgPath = "";

    public BitmapWorkerTask(ImageView imageView) {
        // Use a WeakReference to ensure the ImageView can be garbage collected
        imageViewReference = new WeakReference<ImageView>(imageView);
    }

    // Decode image in background.
    @Override
    protected Bitmap doInBackground(String... params)
    {
        imgPath = params[0];
        int width = Integer.valueOf(params[1]).intValue();
        int height = Integer.valueOf(params[2]).intValue();
        return BitmapTools.decodeSampledBitmapFromDisk(imgPath, width, height);
    }

    // Once complete, see if ImageView is still around and set bitmap.
    @Override
    protected void onPostExecute(Bitmap bitmap)
    {
        if (isCancelled())
        {
            bitmap = null;
        }

        if (imageViewReference != null && bitmap != null)
        {
            final ImageView imageView = imageViewReference.get();
            final BitmapWorkerTask bitmapWorkerTask =
                    BitmapTools.getBitmapWorkerTask(imageView);
            if (this == bitmapWorkerTask && imageView != null)
            {
                imageView.setImageBitmap(bitmap);
            }
        }
    }
} 
```

**AsyncDrawable.java**

```
public class AsyncDrawable extends BitmapDrawable
{
    private final WeakReference<BitmapWorkerTask> bitmapWorkerTaskReference;

    public AsyncDrawable(Resources res, String filepath,
            BitmapWorkerTask bitmapWorkerTask)
    {
        super(res, filepath);
        bitmapWorkerTaskReference =
            new WeakReference<BitmapWorkerTask>(bitmapWorkerTask);
    }

    public BitmapWorkerTask getBitmapWorkerTask()
    {
        return bitmapWorkerTaskReference.get();
    }
} 
```

**我究竟做错了什么？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T07:12:47.320

替换`GridView.LayoutParams`为`Gallery.LayoutParams`如下，这将解决您的问题

```
imageView.setLayoutParams(new Gallery.LayoutParams(
                    LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T07:09:20.577

在 ImageGalleryAdapter.java 中，这是错误的：

```
imageView.setLayoutParams(new GridView.LayoutParams(
                    LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT)); 
```

使用正确的 LayoutParams 类，它应该是

```
imageView.setLayoutParams(new Gallery.LayoutParams(
                    LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT)); 
```

（LayoutParams 的超类是`Gallery`代替`GridView`）

# java - 限制我自己的小部件在 SWT 中假设任何大小集

> ID：13044357
> 
> 赞同：1
> 
> 时间：2012-10-24T07:06:01.507
> 
> 标签：java, canvas, widget, swt, windowbuilder

假设我决定从 SWT 中的基本 Canvas 类实现我自己的小部件。

我希望它具有 10 的固定高度并允许任何类型的宽度，只要它符合 10 的倍数。

有没有办法强加这个，所以我的小部件的用户在设计模式下使用我的小部件时只能设置这种值？

我试过在`ControlEvent`上查找`ControlListener`，但它似乎没有取消调整大小的方法。如果我检测到宽度/高度，也许我必须手动将其设置回可接受的值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:31:29.023

我可以建议您控制小部件的布局。实现自己`Layout`的固定高度并忽略用户设置的任何布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:21:25.600

当您覆盖时`computeSize`，如果宽度和高度提示超出您的允许范围，则忽略它们。例如：

```
public Point computeSize(int wHint, int hHint, boolean changed)
{
    int width, height;

    /* We can only be 10px tall */
    height = 10;

    /* Width must be at least 10px */
    if (width < 10)
        width = 10;
    /* Width must be a multiple of 10px */
    else
        width -= (width % 10);

    return new Point(width, height);
} 
```

# c++ - 安装多个版本的 g++（或 gcc）

> ID：13044358
> 
> 赞同：2
> 
> 时间：2012-10-24T07:06:06.750
> 
> 标签：c++, linux, gcc

我想知道是否可以在同一台机器上安装多个版本的 g++ 而没有任何问题。

我在工作中使用了几乎最新的 gcc（4.6.1）。现在为了我的学习，我的老师给了我们一个不完整的项目来完成，他说我们应该安装 gcc 3.4.3 。

请注意我已经读过这个：[是否可以同时安装 2 个不同版本的 GCC？](https://stackoverflow.com/questions/2358194/is-it-possible-to-install-2-different-versions-of-gcc-at-the-same-time)但我不知道我应该设置什么 PATH 。

此外，我想对这两个版本都使用 eclipse。所以我可能也需要一些关于该设置的指导。

非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T07:28:04.163

在 bash 中，您可以执行两个这样的脚本：第一个：

```
export PATH=/path/to/your/3.4.3/bin:$PATH
eclipse& 
```

和

```
export PATH=/path/to/your/4.6.1/bin:$PATH
eclipse& 
```

通过运行其中一个，eclipse 应该使用它在你的路径中找到的第一个 gcc。此外，如果您不运行任何脚本，您的默认 gcc 应该仍然是主要的。

顺便说一句：您可能可以与您的教授就他希望您使用什么 c++ 标准（以及什么库）达成协议，而不是您应该使用什么过时版本的编译器来编译您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:50:46.483

如果您使用的是某些 Linux 发行版，则可以安装多个版本的 GCC；例如，在 Debian 或 Ubuntu 上，您可以同时安装`gcc-4.6`和`gcc-4.7`（可用的确切版本取决于实际发行版）。

请注意，GCC 3.4.3 是一个非常古老的编译器版本（它已于 2004 年[11 月](http://gcc.gnu.org/gcc-3.4/)发布）。您可能无法在您的机器上安装如此古老的 GCC 版本。另请注意，最近的 GCC（最新版本是 4.7）提供了比旧版本更好的警告、优化和标准一致性。

当然，你不需要 eclipse 来使用 GCC。您可以使用一些普通的编辑器，如`gedit`or `emacs`，并在命令行（如果您只有一个文件）或使用构建器（如`make`.

我不会费心在最近的机器上安装 GCC 3.4.3（即过去几年的任何 Linux 发行版），因为你可能会花费一个多星期的时间来安装这么旧的东西，但仍然失败。我会使用那台机器上可用的最新 GCC，总是与我的老师一起编译`-Wall -g`并询问（或告诉）我的老师。

还要学习使用`gdb`调试器和一些版本控制，如`git`.

[我在这里](https://stackoverflow.com/a/13024567/841108)给出的提示可能与您有关。

# c++ - 追加和返回一个字符串

> ID：13044359
> 
> 赞同：1
> 
> 时间：2012-10-24T07:06:08.200
> 
> 标签：c++, string, append

我有一个类，它的一个功能是在以前的功能的帮助下输入一些信息。

```
string printResult()
{
    string result;

    cout<<"\n"<<getName()<<" bla bla bla "<<getPoints()<<" blabla.";

    return result;
} 
```

getName 和 getPoints 显然是其他功能。

我的问题是：我应该如何重做/更改这部分

```
cout<<"\n"<<getName()<<" bla bla bla "<<getPoints()<<" blabla."; 
```

成为一个自己的字符串，我可以返回这个确切的内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T07:08:34.363

用一个`stringstream`

```
#include <sstream>

string printResult()
{
    ostringstream result;

    result<<"\n"<<getName()<<" bla bla bla "<<getPoints()<<" blabla.";

    return result.str();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:11:30.767

使用字符串流。

这里的一些例子：[http ://www.dreamincode.net/forums/topic/95826-stringstream-tutorial/](http://www.dreamincode.net/forums/topic/95826-stringstream-tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:09:42.533

您可以只使用 std::string 的 append() 成员：

```
result.append(getName());
result.append(getPoints()); 
```

假设这些函数返回一个字符串或一个 char*。

# vb.net - 为什么 VB.NET 没有错误

> ID：13044360
> 
> 赞同：6
> 
> 时间：2012-10-24T07:06:14.490
> 
> 标签：vb.net

我最近从 ac# 团队切换到 vb.net 团队。我无法找到答案的一件事是编译错误/选项的差异。让我解释。

在 C# 中，我将使用默认设置，在尝试将无效类型传递给模板化类时出现编译时错误，如下所示。在这里，我创建了一个具有字符串类型的 Animal，然后我传入了一个导致编译错误的日期时间。

```
 IAnimal<string> animal = new Animal<string>();
 animal.SetTrainer(DateTime.Now); 
```

我知道我会在 vb.net 中使用“Option Strict”得到相同的编译时错误。但是，同一文件中有许多旧 (VB) 代码无法使用“Option Strict”进行编译。我有什么选择。我在想：

1.  切换到“Option Strict”并修复所有错误。这将需要一些时间，并且可能会破坏工作代码。
2.  也许有一个替代方案可以确保泛型的编译时检查。毕竟泛型是相当新的，所以也许有一种方法可以始终执行这一点。
3.  ?

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T07:11:16.193

双击您的项目 -> 我的项目。

转到编译并查找警告配置

现在您可以更改一些设置。

*   隐式强制转换
*   后期装订

不要让他们出错，而是警告。

这不会产生编译时错误，但您至少可以看到一些警告。

另一种解决方案是使您的类成为部分类并将您的代码移动到新文件中。您可以在每个文件的基础上设置 Option Strict / Option Explicit。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T07:18:24.883

> 切换到“Option Strict”并修复所有错误。这将需要一些时间，并且可能会破坏工作代码。

是的，这样做。它会帮助你保持理智。

大多数会弹出的错误可能是简单的转换问题，很容易修复（`CInt`这里，`ToString()`那里......）。

您不必一次修复整个解决方案或项目，因为您可以`Option Strict On`在文件级别启用。养成修复每个文件的好习惯，因为您必须触摸它。

这并不总是可能的，但您也可以将严重依赖`Option Strict On`（例如`COM`东西）的代码移动到另一个文件而不会破坏更改。

# wpf - wpf 的 Arcgis 运行时 - 集群内存泄漏

> ID：13044362
> 
> 赞同：3
> 
> 时间：2012-10-24T07:06:22.800
> 
> 标签：wpf, arcgis, esri

我有适用于 WPF 的 ArcGIS Runtime 应用程序。我在 GraphicsLayer 中对我的对象使用 Clusterer，我正在尝试 FlareClusterer 和 CustomClusterer。每个集群器重建都会增加使用的 RAM。

我试过打电话：

```
GC.Collect();    
GC.WaitForPendingFinalizers(); 
```

但这无济于事。

有谁知道这个问题的解决方案？

PS对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T15:10:28.577

`GC.Collect();`如果无法收集对象将无济于事。我建议分析您的应用程序。使用 ANTS，免费使用 2 周。它将向您显示僵尸剩余物品。快速检查是检查您的代码并查找所有事件订阅。每个 += 都应该有 -= （除非它是在同一位置正常工作的匿名 lambda） 确保在释放对象之前取消订阅。这是一个常见的错误，尤其是在清除集合时（集合很清楚，但它曾经拥有的对象会保留下来。还有很多其他的东西，但我认为 ANTS 是第一个快速简单的测试。

# php - 如何从 youtube url 获取 youtube id？

> ID：13044364
> 
> 赞同：0
> 
> 时间：2012-10-24T07:06:31.590
> 
> 标签：php, javascript

> **可能重复：**
> [用于从任何 YouTube URL 获取 YouTube 视频 ID 的 RegEx 模式](https://stackoverflow.com/questions/9594943/regex-pattern-to-get-the-youtube-video-id-from-any-youtube-url)

我已将 youtube url 存储在数据库中。我只想从 youtube url 中获取 youtube id。我只想从下面的 url 中提取 id(6FjfewWAGdE)。

```
$youtubeVal=http://www.youtube.com/embed/6FjfewWAGdE?feature=player_detailpage 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:11:15.447

你可以这样做

```
var regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed)([^#\&\?]*).*/;
var match = url.match(regExp);
if (match&&match[2].length==11){
    return match[2];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:14:42.540

Youtube URL 有多种格式（使用 embed/<id> 或使用 watch?v=<id>）。找到您想要理解的 URL 类型并构建正则表达式以正确提取它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:10:54.867

**这是PHP**中一个有效的非正则表达式解决方案：

```
function GetYoutubeID($url) {
    $temp = parse_url($url);

    if(isset($temp['query'])) {
        parse_str($temp['query'], $temp2);
        if(isset($temp2['v'])) {
            return $temp2['v'];
        }
    }

    if(isset($temp['path'])) {
        $temp2 = explode("/", $temp['path']);
        foreach($temp2 as $value) {
            if(strlen($value) == 11 || strlen($value) == 10) {
                return $value;
            }
        }
    }

    return "no ID?";
}

echo $youtubeID = GetYoutubeID('http://www.youtube.com/embed/6FjfewWAGdE?feature=player_detailpage') . "\n";
echo $youtubeID = GetYoutubeID('https://www.youtube.com/embed/6FjfewWAGdE') . "\n";
echo $youtubeID = GetYoutubeID('https://youtube.com/embed/6FjfewWAGdE') . "\n";
echo $youtubeID = GetYoutubeID('http://www.youtube.com/watch?v=6FjfewWAGdE') . "\n";
echo $youtubeID = GetYoutubeID('http://www.youtube.com/watch?v=6FjfewWAGdE&feature=player_detailpage') . "\n";
echo $youtubeID = GetYoutubeID('www.youtu.be/6FjfewWAGdE') . "\n";
echo $youtubeID = GetYoutubeID('youtu.be/6FjfewWAGdE') . "\n";
echo $youtubeID = GetYoutubeID('youtube.com/watch?v=6FjfewWAGdE') . "\n";
echo $youtubeID = GetYoutubeID('https://www.youtube.com/watch?v=6FjfewWAGdE&feature=youtu.be') . "\n"; 
```

将函数的全部内容替换为以下内容，以使用更好看的解决方案（[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)）：

```
preg_match('/^(http:\/\/|https:\/\/|.*?)(www.|.*?)(youtube.com|youtu.be)\/(embed\/|watch\?v=|.*?)(.*?)(\?|\&|$)/is', $url, $matches);
if(isset($matches[5])) {
    return $matches[5];
}

return "no ID?" 
```

正则表达式解决方案也适用于**Javascript**：

```
function GetYoutubeID(url) {
    var regExp = /^(http:\/\/|https:\/\/|.*?)(www.|.*?)(youtube.com|youtu.be)\/(embed\/|watch\?v=|.*?)(.*?)(\?|\&|$)/;
    var match = url.match(regExp);
    if (match){
        return match[5];
    }

    return "no ID?";
}

console.log(GetYoutubeID('http://www.youtube.com/embed/6FjfewWAGdE?feature=player_detailpage'));
console.log(GetYoutubeID('http://www.youtube.com/embed/6FjfewWAGdE?feature=player_detailpage'));
console.log(GetYoutubeID('https://www.youtube.com/embed/6FjfewWAGdE'));
console.log(GetYoutubeID('https://youtube.com/embed/6FjfewWAGdE'));
console.log(GetYoutubeID('http://www.youtube.com/watch?v=6FjfewWAGdE'));
console.log(GetYoutubeID('http://www.youtube.com/watch?v=6FjfewWAGdE&feature=player_detailpage'));
console.log(GetYoutubeID('www.youtu.be/6FjfewWAGdE'));
console.log(GetYoutubeID('youtu.be/6FjfewWAGdE'));
console.log(GetYoutubeID('youtube.com/watch?v=6FjfewWAGdE'));
console.log(GetYoutubeID('https://www.youtube.com/watch?v=6FjfewWAGdE&feature=youtu.be')); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-24T07:11:41.890

你可以随时尝试

```
youtubeVal.substring(29, 39); 
```

# c# - 尝试在 Web 配置中将 defaultPath 添加到 httpError 时出现 iis 7 错误

> ID：13044370
> 
> 赞同：1
> 
> 时间：2012-10-24T07:07:16.227
> 
> 标签：c#, iis, web-config

当我将 defaultPath="/Error.aspx" 添加到我的 Web 配置时，我收到一个错误，告诉我我的配置有错误。问题是，没有它，一切都会顺利进行，没有错误。我有以下一些相关设置：

```
<httpErrors defaultResponseMode="ExecuteURL" errorMode="Custom" existingResponse="Replace" >
            <remove statusCode="404" subStatusCode="-1" />
            <error statusCode="404" prefixLanguageFilePath="" path="/Err.aspx" responseMode="ExecuteURL" />
        </httpErrors>
<customErrors mode="On" defaultRedirect="~/Error.aspx" redirectMode="ResponseRewrite">
        <error statusCode="404" redirect="~/Err.aspx" />
    </customErrors> 
```

你能帮我吗。你知道当我尝试添加默认路径时 iis 会出错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T12:42:32.763

只有在 IIS 的文件 applicationHost.config 中设置“defaultPath”时，我才能解决此错误。

或者您可以使用以下步骤使用 UI 进行设置：
1) 打开 IIS
2) 选择 ServerName（不是网站）
3) 打开菜单“错误页面”
4) 单击左侧的“编辑功能设置”。
5）在弹出窗口中配置设置“路径”和其他选项。

# javascript - 调试 javascript 和 console.log 不起作用

> ID：13044377
> 
> 赞同：2
> 
> 时间：2012-10-24T07:07:50.450
> 
> 标签：javascript, internet-explorer-9, firebug, console.log

我不知道该怎么做，但我正在尝试使用 console.log 调试一些 JS 值：

```
 function SetAPIValue(key1, value1, scormVersion, methodCalled) {
/* key1 value sometimes contains the value true or false and dont want to store these! */
    if (key1 == true || key1 == false) { }
    else
    {
        /* value1 comes back with two values for cmi.suspend_data, then 3, then 4 all in one string seperated by a ';'! */
      setValuesArray.push({
       key: key1,
       value: value1
     });

   for (var i = setValuesArray.length - 1; i >= 0; i--) {
   var array = setValuesArray[i];
   console.log(setValuesArray);
   if (array.key == key1) {
     if (key1 = "cmi.suspend_data") {
       if (value1.indexOf(";") > 0)
       {
         valueArray[j] = value1.split(";");
         alert(valueArray[j]);
         //alert("key1 is" + key1 + "and is returning " + setValuesArray[j-1].value);
         return valueArray[j];
        }
       }
       else
         return setValuesArray[i].value;
       } 
    }
  }
  return "";
} 
```

我正在尝试查看 console.log(setValuesArray) 中的内容。当我在 IE9 中运行我的应用程序时，我启用了 F12 开发人员工具，我单击控制台选项卡，我得到的只是：

日志：[对象对象] 日志：[对象对象]，[对象对象] 日志：[对象对象]，[对象对象] 日志：[对象对象]，[对象对象]，[对象对象]

我不明白？如何查看 setValuesArray 中的值？我没有安装 firebug-lite。我在win 7 64位工作 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:16:33.010

您正在尝试记录对象，这就是您获得这些输出的原因。尝试下面的日志或为您的对象使用 toString 方法。

```
 for (var i = setValuesArray.length - 1; i >= 0; i--) {
     var array = setValuesArray[i];
     console.log("key: "+setValuesArray[i].key+ " value: "+setValuesArray[i].value);
     ...
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:27:50.930

我认为使用 console.log 是更好的方法（与使用警报相比）。

但是，请记住，console.log() 和 alert() 都将显示输入参数的字符串表示形式以及“[object Object]”的 JS 对象。

我可以推荐的是坚持使用console.log()的想法，但如果你希望能够在旧版浏览器中使用它（大多数情况下是IE的早期版本），你可能想看看这篇文章): [http://patik.com/blog/complete-cross-browser-console-log/](http://patik.com/blog/complete-cross-browser-console-log/)

此外，当您希望打印描述 JS 对象内容的字符串时，可以使用[JSON.stringify()](http://www.json.org/js.html)。因为，在 Internet Explorer 中，只有 7 个不具备对 JSON 对象的本机支持。但是您可以通过将 json2.js 库包含到您的页面来轻松解决这个问题 - 代码可在[此处](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)的 GitHub 存储库中找到。

# android - Android MyLocationOverlay - 一段时间后标记消失

> ID：13044385
> 
> 赞同：3
> 
> 时间：2012-10-24T07:08:29.873
> 
> 标签：android, overlay, android-mapview, mylocationoverlay

我想在地图视图上显示用户的位置。因此我使用 ' `MyLocationOverlay`。标记出现在地图视图上，并将在用户位置更改时更新/移动。但是，如果该`onLocationChanged`方法暂时不会被触发，那么标记就会消失。但我希望标记始终显示，尽管用户的位置没有改变。

这是代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_map);    
    MyLocationOverlay locationOverlay = new MyLocationOverlay(this,mapView);
    locationOverlay.enableMyLocation();
    mapView.getOverlays().add(locationOverlay);

    locationOverlay.runOnFirstFix(new Runnable() {

        @Override
        public void run() {
            mapController.animateTo(locationOverlay.getMyLocation());
        }
    });

    //request for location changes
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);

    mapView.postInvalidate();
} 
```

有人遇到过同样的问题或知道如何解决吗？

# c - 发送源地址为 0.0.0.0 的 UDP 包

> ID：13044388
> 
> 赞同：7
> 
> 时间：2012-10-24T07:08:36.630
> 
> 标签：c, linux, sockets, network-programming

在 linux 中，如何使用 0.0.0.0 作为源地址传输 UDP 数据包。

这是我到目前为止所尝试的。

```
#include <stdio.h>
#include <stdint.h>
#include <stdlib.h>
#include <net/if.h>
#include <string.h>
#include <unistd.h>
#include <assert.h>
#include <arpa/inet.h>
#include <sys/types.h>
#include <sys/socket.h>

int main(int argc, const char *argv[])
{
    struct sockaddr_in dst, src;
    struct ifreq ifr;
    int sock, tmp;
    char payload[128];

    memset(payload, 0, 128);

    memset(&dst, 0, sizeof(dst));
    dst.sin_family = AF_INET;
    dst.sin_addr.s_addr = inet_addr("255.255.255.255");
    dst.sin_port = htons(67);

    memset(&src,0,sizeof(src));
    src.sin_family = AF_INET;
    src.sin_addr.s_addr = inet_addr("0.0.0.0");
    src.sin_port = htons(68);

    sock = socket(AF_INET, SOCK_DGRAM, 0);
    if (sock < 0)
        perror("Failed to create socket");

    tmp = 1;
    if (setsockopt(sock, SOL_SOCKET, SO_BROADCAST, &tmp, sizeof(tmp)) < 0)
        perror("SO_BROADCAST failed");

    if (setsockopt(sock, SOL_SOCKET, SO_REUSEADDR, &tmp, sizeof(tmp)) < 0)
        perror("SO_REUSEADDR failed");

    if (setsockopt(sock, IPPROTO_IP, IP_FREEBIND, &tmp, sizeof(tmp)) < 0)
        perror("IP_FREEBIND failed");

    memset(&ifr, 0, sizeof(ifr));
    strncpy(ifr.ifr_name, "eth1", sizeof(ifr.ifr_name));

    if (setsockopt(sock, SOL_SOCKET, SO_BINDTODEVICE, (void *)&ifr, sizeof(ifr)) < 0)
        perror("SO_BINDTODEVICE failed");

    if (bind(sock, (const struct sockaddr*)&src, sizeof(struct sockaddr_in)) < 0)
        perror("bind failed");

    if (connect(sock, (const struct sockaddr*)&dst, sizeof(struct sockaddr_in)) < 0)
        perror("bind failed");

    if (write(sock, payload, 128) < 0 )
        perror("Write failed");

    close(sock);
    return 0;
} 
```

问题是，如果没有接口具有 IPv4 地址，则源地址仅设置为 0.0.0.0。如果只有一个接口有 IPv4 地址，则该地址用作源地址。

我查看了一些现有 DHCP 客户端的源代码，发现它们使用 RAW 套接字并手动构建 IP 和 UDP 标头。这是可能的，但我想避免手动执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T07:19:53.803

您应该使用 RAW SOCKET 并自己努力构建数据包。

作为示例，您可以这样做：[https ://github.com/fycth/DHCP-server-scanner/blob/master/src/dhcpd-detector.c](https://github.com/fycth/DHCP-server-scanner/blob/master/src/dhcpd-detector.c)

这是我的教育项目。它很小，你可以看看这个任务是如何在那里解决的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:15:44.483

我认为如果可以通过 UDP 套接字来实现，他们会这样做而不是手动构建一个。所以我认为它根本不起作用......

# delphi - Delphi 没有正确写入我的文件头

> ID：13044396
> 
> 赞同：1
> 
> 时间：2012-10-24T07:09:01.387
> 
> 标签：delphi, file-io, bitmap

我认为与其将 TImage 与 8 位 BMP 一起使用，不如保存我自己的位图——我以前曾用 Delphi 做过几次。但由于某种原因我无法弄清楚，文件的前两个字节总是写成四个字节！我的标题记录是

```
type
 BitmapH = Record
  head : WORD;
  filesize : DWORD;
  reserved : DWORD;
  bmpoffset : DWORD;
  bmpheadersize : DWORD;
  width : DWORD;
  height : DWORD;
  planes : WORD;
  bpp : word;
  comp : longint;
  bmdatasize : longint;
  hres : longint;
  vres : longint;
  numofcolors : longint;
  importantcolors : longint;
  palette : array[0..1023] of byte;
 end; 
```

我什至尝试将其更改为 2 字节数组仍然不行。即使将其更改为只是 head : byte; 它仍然写入 1 个字节，然后将垃圾推送到下一个 3。我一定错过了一些简单的东西！

这是我编写文件头的方式 -

```
var BM : file of BitmapH;
var BMD : file of byte;
var header : BitmapH;
var i : integer;
var test : byte;
begin

  AssignFile(BM, 'd:\test.bmp');
  Rewrite(BM);

  header.head := 19778;
//  header.head[1] := 'M';
  header.filesize := 2102;
  header.reserved := 0;
  header.bmpoffset := 1080;
  header.bmpheadersize := 40;
  header.width := 32;
  header.height := 32;
  header.planes := 1;
  header.bpp := 8;
  header.comp := 0;
  header.bmdatasize := 1024;
  header.hres := 100;
  header.vres := 100;
  header.numofcolors := 0;
  header.importantcolors := 0;

  for i := 0 to 255 do
  begin
    header.palette[i*4] := getBvalue(palette[i]);
    header.palette[(i*4) + 1] := getBvalue(palette[i]);
    header.palette[(i*4) + 2] := getBvalue(palette[i]);
    header.palette[(i*4) + 3] := 0;
  end;

  Write(BM, header); 
```

对不起，这只是一个测试:)

任何帮助表示赞赏！

PS - 不使用 TImage 保存的原因是因为我正在动态更改调色板，这似乎很麻烦通过 TImage 进行编辑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T07:11:32.847

用于[`packed record`](http://docwiki.embarcadero.com/RADStudio/XE3/en/Structured_Types)避免默认内存对齐。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T07:12:16.740

将**packed**关键字添加到记录以指示其内容不应对齐：

```
BitmapH = packed Record 
```

# android - Android S/mime 开源邮件客户端

> ID：13044398
> 
> 赞同：1
> 
> 时间：2012-10-24T07:09:02.073
> 
> 标签：android, open-source, cryptography, smime

我想知道是否有人知道任何开源邮件客户端或插件来处理 SMIME 邮件。

类似 DJIGZO for android 但是，开源！因为我的加密邮件不是标准的，我需要对其进行一些修改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:09:24.067

请看看这个。让我知道你的意见。 **http://www.example-code.com/android/smtp_sendEncryptedCer.asp**

# gradle - gradle 访问另一个项目

> ID：13044402
> 
> 赞同：1
> 
> 时间：2012-10-24T07:09:16.710
> 
> 标签：gradle, projects

我有 2 个 gradle 项目。让我们说项目A和项目B。我需要在projectA中创建一个task，它可以在projectB中执行一个task。我尝试了很多方法，但我找不到这样做的方法。考虑以下代码，

```
//ProjectA build.gradle
task taskA(dependsOn: ProjectB.taskB) << { println "executed taskB" }

//ProjectB build.gradle
task taskB() << { println "executing taskB"} 
```

当我运行 taskA 输出应该是，

```
>> gradle taskA
executing taskB
executed taskB 
```

我能做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:34:58.787

```
task taskA(dependsOn: project(":ProjectB").taskB) 
```

我们不是说taskA执行taskB，而是说它*依赖*于taskB。

# c# - 在 ASP.NET /C# 中插入数据后重定向页面

> ID：13044405
> 
> 赞同：1
> 
> 时间：2012-10-24T07:09:23.483
> 
> 标签：c#, asp.net, redirect, postback, response.redirect

我制作了一个将数据插入数据库的网络表单。单击插入按钮时，会触发插入数据的代码，插入数据成功后，会重定向到显示“数据插入成功”的其他页面。就像这样...

插入页面.....

```
if (CodeClass.InsertData(txtFirstName.Text, txtLastName.Text, Gender) == true)
     {
         String A = "InsertSuccess";

          Response.Redirect("OtherPage.aspx?&lnk=" + A);
     } 
```

其他页面....

```
 String link = null;
            link = Request.QueryString["lnk"];
            if (link == "InsertSuccess")
            {
                txtLabel.Text = "Record inserted succesfully!";

            } 
```

我的问题是当我访问其他页面时，即使我没有使用插入页面..我得到相同的结果。假设我在地址栏中输入了 ..http://localhost:8672/OtherPage.aspx?&lnk=InsertSuccess ..我得到“成功插入记录！” 标签。我希望其他页面永远不会显示“成功插入记录！” 当我实际上没有插入某些东西而只是通过浏览器的地址栏访问它时的消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:25:26.910

您可以使用 Session 变量来存储更新的状态，然后检查它是否在 otherpage.aspx 中可用，更新文本框并重置它。

插入页面

```
if (CodeClass.InsertData(txtFirstName.Text, txtLastName.Text, Gender) == true)
     {
          Session["status"]="InsertSuccess";

          Response.Redirect("OtherPage.aspx");
     }
} 
```

其他页面

```
if (Session["status"]!=null)
        {
            txtLabel.Text = "Record inserted succesfully!";
            Session["status"]=null; 

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:32:12.457

好吧，对于我所看到的，您不想仅通过在地址栏中键入“http://localhost:8672/OtherPage.aspx&lnk=InsertSuccess”来获取消息，那么我建议您不要传递带有标志的字符串应该传递记录 ID，然后在您的其他页面上，您应该检查您的记录 ID 是否确实存在于您的表中。

为此，我希望您使用 ID 作为 GUID 类型。

你会有这样的东西：

“http://localhost:8672/OtherPage.aspx&lnk=BBB5259E-F5A3-4271-ABC8-D95A00BE9770”

否则太容易记住一个 int ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:32:42.003

你应该改变你的查询字符串。

```
 Response.Redirect("OtherPage.aspx?&lnk=" + A); 
```

应该：

```
 Response.Redirect("OtherPage.aspx?lnk=" + A); 
```

未编码时的“&”符号被视为参数分隔符。

```
 Response.Redirect("OtherPage.aspx?lnk=" + A + "&secondParam=someValue"); 
```

根据评论的要求：
请参阅此[SO 帖子](https://stackoverflow.com/questions/3330447/working-with-url-query-strings-in-asp-net)
[MSDN HttpServerUtility.UrlEncode](http://msdn.microsoft.com/en-us/library/zttxte6w.aspx)
[.NET Slave - Working with query strings](http://madskristensen.net/post/Working-with-query-strings.aspx)

并且[String.IsNullOrWhiteSpace()](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx)有时可能很方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T08:07:11.817

```
if (CodeClass.InsertData(txtFirstName.Text, txtLastName.Text, Gender) == true)
     {
       HttpContext.Current.Items["A"]= "Inserted Successfully";

          Server.Transfer("OtherPage.aspx);
     }

string ContextData =(string) HttpContext.Current.Items["A"];

if(!string.Empty(ContextData))
{  
Label1.Text = ContextData;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T08:13:24.573

假设您修复了您的 URL 并删除了“？”之后的“&”。..您必须删除“&”

您是否考虑过浏览器缓存？有时缓存可以做到这一点，由于缓存设置，我一直在努力解决与您类似的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-08T09:12:24.500

成功插入代码后只需添加此脚本：

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "Success", "setInterval(function(){location.href='Default.aspx';},3000);", true); 
```

# jpa - GAE：谷歌云 SQL + JPA 不工作

> ID：13044406
> 
> 赞同：1
> 
> 时间：2012-10-24T07:09:27.130
> 
> 标签：jpa, eclipselink, google-cloud-sql

当我使用 EclipseLink 2.2.1 将我的云 sql 实例与 JPA 连接时，它显示以下错误

```
W 2012-10-24 12:21:46.120
org.datanucleus.metadata.xml.AbstractMetaDataHandler error: MetaData Parser encountered an error in file "file:/base/data/home/apps/s~appengineaplicationID/8.362672796318745816/WEB-INF/classes/META-INF/persistence.xml" at line 2, column 248 : cvc-complex-type.3.1: Value '2.0' of attribute 'version' of element 'persistence' is not valid with respect to the corresponding attribute use. Attribute 'version' has a fixed value of '1.0'. - Please check your specification of DTD and the validity of the MetaData XML that you have specified.

W 2012-10-24 12:21:46.885
Error for /jpatest
java.lang.ExceptionInInitializerError
    at com.my.jpa.ContactService.createContact(ContactService.java:20)
    at com.my.jpa.JPATestServlet.doGet(JPATestServlet.java:16)
Caused by: org.datanucleus.exceptions.NucleusUserException: No available StoreManager found for the datastore URL key "". Please make sure you have all relevant plugins in the CLASSPATH (e.g datanucleus-rdbms?, datanucleus-db4o?), and consider setting the persistence property "datanucleus.storeManagerType" to the type of store you are using e.g rdbms, db4o

W 2012-10-24 12:21:46.887
Nested in java.lang.ExceptionInInitializerError:
javax.persistence.PersistenceException: Provider error. Provider: org.datanucleus.jpa.PersistenceProviderImpl
    at javax.persistence.Persistence.createFactory(Persistence.java:176)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:112)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:66)
    at com.my.jpa.EMF.<clinit>(EMF.java:8)
    at com.my.jpa.ContactService.createContact(ContactService.java:20)
    at com.my.jpa.JPATestServlet.doGet(JPATestServlet.java:16)

C 2012-10-24 12:21:46.893
Uncaught exception from servlet
java.lang.ExceptionInInitializerError
    at com.my.jpa.ContactService.createContact(ContactService.java:20)
    at com.my.jpa.JPATestServlet.doGet(JPATestServlet.java:16)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617) 
```

我的persistance.xml 代码是

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="JPATest">
        <class>com.my.jpa.Contact</class>
        <properties>
            <property name="javax.persistence.jdbc.driver" value="com.google.cloud.sql.Driver" />
            <property name="javax.persistence.jdbc.url" value="jdbc:google:rdbms://instance_name/db" />
            <property name="javax.persistence.jdbc.user" value="" />
            <property name="javax.persistence.jdbc.password" value="" />
        </properties>
    </persistence-unit>
</persistence> 
```

我的实体管理器工厂类是：

```
public final class EMF {
    private static final EntityManagerFactory emfInstance = Persistence
            .createEntityManagerFactory("JPATest");

    private EMF() {
    }

    public static EntityManagerFactory get() {
        return emfInstance;
    }
} 
```

小服务程序是：

```
public class JPATestServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {        
        ContactService service = new ContactService();
        service.createContact(new Contact("Manu", "Mohan", "686019", "TVM"));
        resp.setContentType("text/plain");
        resp.getWriter().println("Hello, world");
    }
} 
```

实体类是：

```
@Entity
public class Contact {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    private String firstName;
    private String lastName;
    private String phoneNumber;
    private String address;

    public Contact() {
    }

    public Contact(String fn, String ln, String pn, String addr) {
        this.firstName = fn;
        this.lastName = ln;
        this.phoneNumber = pn;
        this.address = addr;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String getPhoneNumber() {
        return phoneNumber;
    }

    public void setPhoneNumber(String phoneNumber) {
        this.phoneNumber = phoneNumber;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:12:04.517

有人会认为，如果你想使用 EclipseLink，那么你会在*"persistence.xml"*中设置 "provider" ，因为你在 CLASSPATH 中也有其他 JPA 实现，或者你修复 CLASSPATH 以确保那里仅存在 1 个 JPA 实现

# android - 如何在android中抛出错误无效的url

> ID：13044410
> 
> 赞同：0
> 
> 时间：2012-10-24T07:09:53.233
> 
> 标签：android, json, url, try-catch, throws

我已经创建了一个 gridview 应用程序，并且我使用从 json 提供的 url 获取图像的路径。JSON提供了很多图片的url路径，所有的url都有一些无效的路径。

如何抛出错误无效 url 并去获取另一个 url？

完整代码[MainActivity](http://pastebin.com/RQ0w2sBA)。[CountryJSON解析器](http://pastie.org/5107525)

```
/** AsyncTask to download and load an image in ListView */
    private class ImageLoaderTask extends AsyncTask<HashMap<String, Object>, Void, HashMap<String, Object>>{

        @Override
        protected HashMap<String, Object> doInBackground(HashMap<String, Object>... hm) {

            InputStream iStream=null;
            String imgUrl;
            String frameUrl;
            imgUrl = (String) hm[0].get("photo_path");
            frameUrl = (String) hm[0].get("frame_path");
            int position = (Integer) hm[0].get("position");

            URL url;
            URL urlFrame;
            try {
                url = new URL(imgUrl);
                urlFrame = new URL(frameUrl);
                // Creating an http connection to communicate with url
                HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

                // Connecting to url
                urlConnection.connect();

                // Reading data from url
                iStream = urlConnection.getInputStream();

                // Getting Caching directory
                File cacheDirectory = getBaseContext().getCacheDir();

                // Temporary file to store the downloaded image
                File tmpFile = new File(cacheDirectory.getPath() + "/wpta_"+position+".png");

                // The FileOutputStream to the temporary file
                FileOutputStream fOutStream = new FileOutputStream(tmpFile);

                // Creating a bitmap from the downloaded inputstream

                Bitmap b = BitmapFactory.decodeStream(iStream);

                // Writing the bitmap to the temporary file as png file
                b.compress(Bitmap.CompressFormat.PNG,100, fOutStream);

                // Flush the FileOutputStream
                fOutStream.flush();

               //Close the FileOutputStream
               fOutStream.close();  

                // Create a hashmap object to store image path and its position in the listview
                HashMap<String, Object> hmBitmap = new HashMap<String, Object>();

                // Storing the path to the temporary image file
                hmBitmap.put("photo",tmpFile.getPath());
                hmBitmap.put("frame", tmpFile.getPath());

                // Storing the position of the image in the listview
                hmBitmap.put("position",position);

                // Returning the HashMap object containing the image path and position
                return hmBitmap;

            }catch (Exception e) {
               e.printStackTrace();
            }
            return null;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:13:18.183

```
InputStream iStream = null;
    String imgUrl;
    String frameUrl;
    imgUrl = (String) hm[0].get("photo_path");
    frameUrl = (String) hm[0].get("frame_path");
    int position = (Integer) hm[0].get("position");

    URL url;
    URL urlFrame;
    try {
        url = new URL(imgUrl);
        urlFrame = new URL(frameUrl);
        // Creating an http connection to communicate with url
        HttpURLConnection urlConnection = (HttpURLConnection) url
                .openConnection();

        // Connecting to url
        urlConnection.connect();

        // Reading data from url
        iStream = urlConnection.getInputStream();

        // Getting Caching directory
        File cacheDirectory = getBaseContext().getCacheDir();

        // Temporary file to store the downloaded image
        File tmpFile = new File(cacheDirectory.getPath() + "/wpta_"
                + position + ".png");

        // The FileOutputStream to the temporary file
        FileOutputStream fOutStream = new FileOutputStream(tmpFile);

        // Creating a bitmap from the downloaded inputstream

        Bitmap b = BitmapFactory.decodeStream(iStream);

        // Writing the bitmap to the temporary file as png file
        b.compress(Bitmap.CompressFormat.PNG, 100, fOutStream);

        // Flush the FileOutputStream
        fOutStream.flush();

        // Close the FileOutputStream
        fOutStream.close();

        // Create a hashmap object to store image path and its position in
        // the listview
        HashMap<String, Object> hmBitmap = new HashMap<String, Object>();

        // Storing the path to the temporary image file
        hmBitmap.put("photo", tmpFile.getPath());
        hmBitmap.put("frame", tmpFile.getPath());

        // Storing the position of the image in the listview
        hmBitmap.put("position", position);

        // Returning the HashMap object containing the image path and
        // position
        return hmBitmap;
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        return null;
    } catch (FileNotFoundException e) {
        return null;
    } catch (IOException e) {
        return null;
    } 
```

# mysql - 仅在 MySQL 中插入缺失数据

> ID：13044414
> 
> 赞同：0
> 
> 时间：2012-10-24T07:10:13.670
> 
> 标签：mysql, sql

我有两个表，第一个表有 400 行。第二个表保存具有相同计数的相同记录。现在第一个表的行数增加到 450。我只想将这 50 个新行插入到第二个表中。我不需要更新前 400 条记录。

我正在为特定字段（如 empid）设置唯一索引。现在，当我插入第一个表数据时，它返回以下错误：

```
Duplicate entry 'xxxx' for key 'idx_confirm' 
```

请帮我解决这个错误。

我正在使用下面的代码插入记录。但它允许重复输入..

```
insert ignore into tbl_emp_confirmation (fldemp_id,fldempname,fldjoindatefldstatus)
select fldempid, fldempname,DATE_FORMAT (fldjoindate,'%Y-%m-%d') as fldjoindate,fldstatus from tblempgeneral as n; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:13:35.123

`INSERT ...`将您的声明修改为`INSERT IGNORE ...`.

例如，请参阅[这篇文章](http://www.electrictoolbox.com/mysql-insert-ignore/)以获取解释。

您需要确保您有一个唯一索引来防止任何重复，例如在主键上。

# php - 允许php中所有帖子的重复条目

> ID：13044418
> 
> 赞同：0
> 
> 时间：2012-10-24T07:10:30.277
> 
> 标签：php, html, radio-button, controls

我如何允许此文件中的 php 文件中的重复条目...我有一个 html 文件，它是一种用于跟踪公司无线电的表格。我有文本框和单选按钮，所有字段都需要能够有重复的条目，除了序列号字段。我不断收到错误消息说我不能有重复的条目。

```
<?php
    $con = mysql_connect("localhost","Jason","");
    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("test", $con);

    $sql="INSERT INTO test (
        firstname,
        lastname, 
        department,
        radiomodel,
        serialnumber,
        issuedate
    )
    VALUES(
        '$_POST[firstname]',
        '$_POST[lastname]',
        '$_POST[department]',
        '$_POST[radiomodel]',
        '$_POST[serialnumber]',
        '$_POST[issuedate]'
     )";

     if (!mysql_query($sql,$con))
     {
         die('Error: ' . mysql_error());
     }

     echo "1 record added";

     mysql_close($con);
     header( "refresh:150;url=testinput.php" );
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:34:53.157

您的序列号是主键，因此您不能有重复的值。

您应该从 serialnumber 字段中删除主键并添加一个新的 id 列以将主键放在此或使用多个列一起作为键，例如使用 firstname、lastname 和 date 和 serialnumber 作为键。

确实，您应该将其拆分为多个表。

# asp.net-mvc - ASP.Net MVC 发送模型以查看而不使用 URL

> ID：13044420
> 
> 赞同：0
> 
> 时间：2012-10-24T07:10:45.130
> 
> 标签：asp.net-mvc

我在两个视图之间使用相同的模型，但是当将模型发布到第二个视图时，它会将所有先前输入的数据放入 URL。是否可以将填充模型发送到第二个视图而不在 URL 中发布数据？

控制器代码：

```
 [HttpPost]
    public ActionResult ViewExample1(.Models.RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            return RedirectToAction("ViewExample2", model);
        }
        return View(model);
    }

    public ActionResult ViewExample2(Models.RegisterModel model)
    {
        return View(model);
    } 
```

第二个视图代码，当这个视图被回发时，我使用 HiddenFor 来持久化数据：

```
<% using (Html.BeginForm(null, null, FormMethod.Post, new { id="ViewExample2"})) { %>
    <%: Html.HiddenFor(model => model.UserName)%>
<% } %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:09:17.240

当您使用 重定向到一个动作时`RedirectToAction()`，您是通过`GET`. 因此，框架将 url 中的视图模型传递给操作。

我建议你这样做：

```
[HttpPost]
public ActionResult ViewExample1(Models.RegisterModel model)
{
    if (ModelState.IsValid)
    {
        // Do the work you want to do in the ViewExample2 action here!
        // ... and then return the ViewExample2 view
        return View("ViewExample2", model);
    }
    return View(model);
}

// This action is not needed anymore
/*public ActionResult ViewExample2(Models.RegisterModel model)
{
    return View(model);
}*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:24:32.993

我的猜测是您使用的是表单标签（而不是 BeginForm）并且您没有指定方法，因此它默认使用 GET 而不是 POST。

转换为使用 BeginForm，或添加方法。

# javascript - 使用 Selenium 错误测试 Extjs 网站

> ID：13044421
> 
> 赞同：1
> 
> 时间：2012-10-24T07:10:45.690
> 
> 标签：javascript, extjs, selenium

我在 selenium 中测试一个 Extjs 应用程序，我需要运行一个脚本来设置组合框的值。我试过`getEval`用目标命令

`var combo=Ext.getCmp('combobox name'); combo.setValue('4'); combo.fireEvent('select');`

但我有以下错误： `[error] Threw an exception: Ext is not defined`

谁能帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:53:59.433

jsExecutor 呢？

```
 JavascriptExecutor js = (JavascriptExecutor) driver;
    StringBuilder stringBuilder = new StringBuilder();
    stringBuilder.append("var combo=Ext.getCmp('combobox name');");
    stringBuilder.append("combo.setValue('4');");
    stringBuilder.append("combo.fireEvent('select');");
    js.executeScript(stringBuilder.toString()); 
```

如果抛出任何其他异常 - 尝试在您工作的 IDE 中逐步调试

另请参阅从您[的](http://seleniumhq.org/docs/05_selenium_rc.html)测试部分**执行 JavaScript ：**

*JavaScript 在执行 selenium 不直接支持的应用程序时非常方便。selenium API 的 getEval 方法可用于从 selenium RC 执行 JavaScript。*

```
public static String[] getAllCheckboxIds () {
             String script = "var inputId  = new Array();";// Create array in java script.
             script += "var cnt = 0;"; // Counter for check box ids.
             script += "var inputFields  = new Array();"; // Create array in java script.
             script += "inputFields = window.document.getElementsByTagName('input');"; // Collect input elements.
             script += "for(var i=0; i<inputFields.length; i++) {"; // Loop through the collected elements.
             script += "if(inputFields[i].id !=null " +
             "&& inputFields[i].id !='undefined' " +
             "&& inputFields[i].getAttribute('type') == 'checkbox') {"; // If input field is of type check box and input id is not null.
             script += "inputId[cnt]=inputFields[i].id ;" + // Save check box id to inputId array.
             "cnt++;" + // increment the counter.
             "}" + // end of if.
             "}"; // end of for.
             script += "inputId.toString();" ;// Convert array in to string.
             String[] checkboxIds = selenium.getEval(script).split(","); // Split the string.
             return checkboxIds;
 } 
```

或另一个例子：

```
selenium.getEval("window.document.images.length;"); 
```

希望这可以帮助你

# ruby-on-rails - 一个 cms 的好后台管理宝石

> ID：13044446
> 
> 赞同：0
> 
> 时间：2012-10-24T07:13:33.573
> 
> 标签：ruby-on-rails, backend

我正在寻找的是用 Ruby on Rails 制作的 cms 的一个很好的背景宝石。我想到的工作流程是这样的。

所有文章都分为几类。因此，当用户没有创建任何类别时，用户无法输入任何文章。所以我需要一个用于制作、更新、删除类别的部分。然后我需要一种用户选择类别的方式，然后用户可以输入一篇文章，该文章将成为该类别的一部分。

有谁知道可以提供这个的宝石。我已经尝试过 activeadmin 但它看起来无法完成这项工作，

罗洛夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:54:10.083

[https://www.ruby-toolbox.com/categories/rails_admin_interfaces](https://www.ruby-toolbox.com/categories/rails_admin_interfaces)将是一个开始寻找的好地方。

附言。ActiveAdmin 可能可以完成这项工作，但如果没有看到您拥有的代码，我们无法帮助您修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:40:02.953

听起来你想要一个博客应用程序

这个[http://fdv.github.com/typo/](http://fdv.github.com/typo/)似乎不错。他们有一个演示，所以你可以测试运行它。

[炼油厂](http://refinerycms.com/)更像是一个cms，但是有demo，所以需要10秒看看是不是你想要的

# jsf-2 - 如何延长 有一个小功能？

> ID：13044450
> 
> 赞同：0
> 
> 时间：2012-10-24T07:13:48.313
> 
> 标签：jsf-2

我怎样才能自定义渲染`<h:selectOneRadio />`？。更具体地说，我的目标是自定义`<f:selectItem />`我的意思的渲染，在当前单选按钮和前一个单选按钮之间设置一个边距。我想做类似的事情：`<f:selectItem margin="10" ... />`. 渲染只应该适用于`<h:selectOneRadio />`我决定的一些元素，而不是全部。我想保留通用的所有功能，`<h:selectOneRadio />`所以我认为我应该做一个最小的扩展。我应该如何进行？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:19:44.010

您可以使用复合组件[这里](http://www.mkyong.com/jsf2/composite-components-in-jsf-2-0/)是一个完整的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:53:12.470

只需使用 CSS。

例如

```
<h:selectOneRadio layout="pageDirection" styleClass="foo">
    <f:selectItem itemValue="value1" itemLabel="label1" />
    <f:selectItem itemValue="value2" itemLabel="label2" />
    <f:selectItem itemValue="value3" itemLabel="label3" />
</h:selectOneRadio> 
```

和

```
.foo input {
    margin: 10px;
} 
```

# ssl - 如何为 AWS 负载均衡器生成证书链？

> ID：13044451
> 
> 赞同：6
> 
> 时间：2012-10-24T07:13:53.373
> 
> 标签：ssl, amazon-ec2, amazon-web-services, load-balancing

我正在使用带有 SSL 配置的 Amazon 负载均衡器。一切都很好，除了在显示异常页面的 Firefox 上。它看起来不是用户自己的。

本文建议将证书链放在配置部分[。](http://www.nczonline.net/blog/2012/08/15/setting-up-ssl-on-an-amazon-elastic-load-balancer/)

![在此处输入图像描述](../Images/48f6449db503c4c185722d79d628908d.png)

我的 SSL 提供商是 Comodo (InstantSSL)。它们仅提供两个文件 .crt 和 .ca-bundle。

如何生成证书链？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-22T20:43:14.493

您可以将 .crt 和 .ca-bundle 文件放在一起。这就是我们最终使用由 AWS 支持的名为 OpDemand 的服务所做的事情。

`cat certfile.crt bundle.ca-bundle >> chain.crt`

chain.crt 应该是您要查找的文件。另外，顺序很重要。certificate.crt 文件必须是第一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-19T05:39:46.140

使用 Root.crt 和 Intermediate.crt 内容并按以下顺序排列它们。您也可以手动创建此文件

```
-----BEGIN CERTIFICATE-----
     <Root content>
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
    <Intermediate content>
-----END CERTIFICATE----- 
```

[更多信息](https://forums.aws.amazon.com/thread.jspa?threadID=192570)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T05:11:03.197

Comodo 应该为您提供证书链。这不是你可以自己产生的东西。一个快速的谷歌看起来你应该可以从这里下载它：[https ://support.comodo.com/index.php?_m=downloads&_a=view&parentcategoryid=1](https://support.comodo.com/index.php?_m=downloads&_a=view&parentcategoryid=1)

# sencha-touch-2 - Sencha Touch 2 中带有 HTML 的面板上的捏合缩放

> ID：13044452
> 
> 赞同：3
> 
> 时间：2012-10-24T07:14:02.340
> 
> 标签：sencha-touch-2

我正在尝试放大其中包​​含 HTML 的面板。

```
Ext.define('Sencha.view.Detail_content', {
    extend: 'Ext.Panel',
    xtype: 'detailcontenttpl',
    config: {
        layout: {  type: "fit" },
        scrollable: true,
        styleHtmlContent: true,
        id: 'detail_content_wrap',
        tpl : [
            "<p class='detail_contentDate'>{date}</p>",
            "<div class='messageWrap'>{message}</div>"
        ],
        listeners: {
            pinchstart: {
                element: 'innerElement',
                fn: function(e, t) {
                    this.startScale = e.scale;
                }
            },
            pinch: {
                element: 'innerElement',
                fn: function(e, t) {
                    e.preventDefault();
                    this.scale = e.scale * this.startScale;
                    var p = t.parentNode;
                    Ext.fly(p).setStyle('-webkit-transform', 'scale('+this.scale+')');
                }
            }
        }
    }
}); 
```

它有点工作，但没有按预期工作。它破坏了滚动条，并且并非一直有效。

我在想`Ext.fly(p).setStyle('-webkit-transform', 'scale('+this.scale+')');`应该设置别的东西，但我已经尝试了每个父元素，仍然失败。

我知道有一些可用的示例，但其中大多数处理图像，而不是带有 HTML 的面板。

我究竟做错了什么？

# c# - StringArrays As A List<> Items -> 如何通过更改一项来防止更改所有项（预定义的字符串数组）

> ID：13044459
> 
> 赞同：1
> 
> 时间：2012-10-24T07:14:38.587
> 
> 标签：c#, list, arrays

请查看以下代码：

```
 List<string[]> items_1 = new List<string[]>();
    string[] item = new string[] { "item_id_for_sell", "item_title", "item_id_main", "item_amount", "item_del_id" };
    items_1.Add(item);
    item[0] = "1";
    item[1] = "1";
    item[2] = "1";
    item[3] = "1";
    item[4] = "1";
    items_1.Add(item);
    item[0] = "2";
    item[1] = "2";
    item[2] = "2";
    item[3] = "2";
    item[4] = "2";
    items_1.Add(item); 
```

我对这份清单感到很困惑。
为什么该列表中的所有字符串数组最后都有“2”值？
如何通过更新项目（字符串数组）来防止该列表自我更新？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T07:17:46.487

您要添加对同一数组的引用三次，因此更改数组的*内容*确实可以让您看到该更改，但是您可以看到它。重要的是您要了解列表不包含数组本身 - 它包含*引用*。有关更多信息，请参阅我关于[引用类型和值类型](http://pobox.com/~skeet/csharp/references.html)的文章。

您可能每次只想要一个新数组：

```
List<string[]> items_1 = new List<string[]>();
string[] item = { "item_id_for_sell", "item_title",
                  "item_id_main", "item_amount", "item_del_id" };
items_1.Add(item);
item = new string[] { "1", "1", "1", "1", "1" };
items_1.Add(item);
item = new string[] { "2", "2", "2", "2", "2" };
items_1.Add(item); 
```

但是，我敦促您重新考虑字符串数组是否*真的*是这里最好的格式。为什么不创建一个`Item`具有属性`Id`、、、`Title`和`Main`（无论是什么意思）`Amount`的类`DelId`？然后你可以创建一个`List<Item>`更容易使用的。

# mysql - 用pdo_mysql连接mysql，windows下运行成功，CentOS 5.8下失败

> ID：13044462
> 
> 赞同：2
> 
> 时间：2012-10-24T07:14:52.277
> 
> 标签：mysql, pdo, centos, database-connection

我有两台电脑，一台安装windows 7，另一台是CentOS 5.8

* * *

在 CentOS...

我使用 yum 命令安装 httpd(apache2.2)、php5.3.3 和 mysql。

*   百胜安装httpd

*   百胜安装php53

*   百胜安装 pdo

*   百胜安装 php53-mysql

首先我检查了 phpinfo，pdo，pdo_mysql 是否成功扩展，

然后我也在 CentOS Terminal 中检查 php -m ，也有扩展 pdo 和 pdo_mysql 。

![在此处输入图像描述](../Images/f92d7892ed0f9ffaf83e0dc32ee0897a.png) ![在此处输入图像描述](../Images/643f22096ee8759c9a2706cbeabc67eb.png)

* * *

我在 Windows 7 和 CentOS 之间运行相同的代码

窗口成功，但centos失败

两个文件，db.php 和 dbtest.php

这是db.php：

```
<?php

    class DB
    {
        private $conn;

        #### construct ####
        public function __construct( $dsn , $db_user , $db_password , $showError = false )
        {                       
            try
            {               
                $this->conn = new PDO( $dsn , $db_user , $db_password );

                if( $showError ) // set error information show or not. 
                {
                    $this->conn->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
                }
                else
                {
                    $this->conn->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_SILENT );
                }

                $setUtf8 = $this->conn->prepare( 'set names utf8' ); // set encoded by utf8
                $setUtf8->execute();
            }
            catch( PDOException $err )
            {
                return false;
            }
        }
    }
?> 
```

这是dbtest.php：

```
<?php

    require_once( "db.php" );

    $link_test = new DB( "mysql:dbname=pdotest;port=3306;host=192.168.1.127", "root" , "123456" );  

    var_dump($link_test);
?> 
```

在 windows 中转储时，结果是：

```
object(DB)#1 (1) { ["conn":"DB":private]=> object(PDO)#2 (0), { } } 
```

在 CentOS 中转储，结果是：

```
object(DB)#1 (1) { ["conn":"DB":private]=> NULL } 
```

谁能告诉我为什么在 CentOS 中连接失败？

* * *

编辑于 2012/10/24 16:10 (亚洲/台北)

为了测试很多小时，我猜是 php pdo 有问题...

因为在我的局域网中，我可以通过 CentOS 终端连接任何 3306 端口的 mysql

但是在 php pdo_mysql 类中，我无法链接任何 mysql（甚至 CentOS 本地的 mysql ）

所以...如何检查我的 pdo_mysql 扩展是否正常运行？

PS：对不起，我的英语很差:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T02:43:58.590

Linux 上的 PHP/PDO 将尝试通过套接字进行本地连接。`pdo_mysql.default_socket`您可以在 中的属性中配置此套接字的位置`php.ini`。

您当然会遇到在 5.3.9 中修复的[错误 #](https://bugs.php.net/bug.php?id=60155) 60155（我认为），所以我肯定会建议升级到 5.3.3 之后的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:40:38.367

浪费了很多时间......终于我得到了解决方案！

当我看到[这个问题](https://stackoverflow.com/questions/8139451/pdo-connection-works-from-command-line-but-not-through-apache)时<<点击链接查看问题

这个答案解决了我的问题。

Selinux 默认设置是关闭 httpd_can_network_connect 和 httpd_can_network_connect_db

打开它！PDO 连接将正常运行:)

命令：

setsebool -P httpd_can_network_connect=1
setsebool -P httpd_can_network_connect_db=1

谢谢你，迈克尔·伯科夫斯基

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T04:09:45.570

首先，谢谢你回答我的问题：）

* * *

专注于socket，我已经尝试了两种方法：

1）就像你说的，我修改 php.ini ，添加 pdo_mysql.default_socket

然后重启httpd服务，但是pdo mysql连接还是失败

2) 我修改了 dbtest.php 第 3 行 (#3) ，是 DSN 的一部分

原始=> "mysql:dbname=pdotest;port=3306;host=192.168.1.127"
新=> "mysql:unix_socket=/var/lib/mysql/mysql.sock;dbname=pdotest;port=3306;host=192.168 .1.127"

，但连接仍然失败

* * *

我也尝试使用原始的 mysql_connect 来测试链接数据库，它的工作！

根据您的建议，我稍后将 php 更改为另一个版本（可能是 5.4.8 或低于 5.3.3），然后发布结果

谢谢！

# magento - magento 中的产品管理图像选项卡位置

> ID：13044464
> 
> 赞同：1
> 
> 时间：2012-10-24T07:14:59.240
> 
> 标签：magento

magento 中的产品管理图像选项卡在哪里？我想使用图像网格。或者给我将选项卡（价格、常规、图像等）添加到产品选项卡列表的路径。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:10:58.803

如果您说的是代码（对吗？）

看看类`Mage_Adminhtml_Block_Catalog_Product_Edit_Tabs`。选项卡是在`_prepareLayout()`方法中创建的。

图片 Tab 与 分开处理，`Mage_Adminhtml_Block_Catalog_Product_Helper_Form_Gallery_Content`通过`Mage_Adminhtml_Block_Catalog_Product_Edit_Tab_Attributes::_getAdditionalElementTypes()`函数添加到商品编辑页面

# android - 在视频的特定时间编码视频文件

> ID：13044467
> 
> 赞同：1
> 
> 时间：2012-10-24T07:15:26.837
> 
> 标签：android

我在 SD 卡中有视频文件。我想在第 3 分钟到第 5 分钟对视频文件进行编码。我想说的是，

比方说，完整的视频文件是 10 分钟。现在我需要在要编码的视频的 3 到 5 分钟处检索视频数据并执行下一个过程。

我以前做过，但只编码了完整的视频文件，我不知道在视频的特定时间对视频文件进行编码。请帮忙。以下是我编码的完整视频文件代码：

```
public void loadVideo(){        
    //convert whole file into byte
    File file = new File("/sdcard/videooutput.mp4");                
    byte[] fileData = new byte[(int) file.length()];

    FileInputStream in; 
    try {
        in = new FileInputStream(file);         
        try {
            in.read(fileData);
            for(int readNum; (readNum = in.read(fileData)) != -1;){                 
            }
        } catch (IOException e) {
            Toast.makeText(this, "IO exc READ file", 2500).show();
            e.printStackTrace();
        }
        try {
            in.close();
        } catch (IOException e) {
            Toast.makeText(this, "IO exc CLOSE file", 2500).show();
            e.printStackTrace();
        }

        String encoded = Base64.encodeToString(fileData, Base64.DEFAULT);
        hantar(encoded);
    } catch (FileNotFoundException e) {
        Toast.makeText(this, "FILE NOT FOUND", 2500).show();
        e.printStackTrace();
    } 
```

请指导我。感谢提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-14T11:44:24.443

你可以尝试使用[这个类](https://android.googlesource.com/platform/packages/apps/Gallery2/+/android-4.2.1_r1.2/src/com/android/gallery3d/app/TrimVideoUtils.java)。它从开始到结束位置裁剪视频，并将裁剪的视频保存到文件系统中的文件中。或者您可以使用它来实现您自己的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-15T12:19:00.143

您可以尝试移动版 INDE Media - [https://software.intel.com/en-us/articles/intel-inde-media-pack-for-android-tutorials](https://software.intel.com/en-us/articles/intel-inde-media-pack-for-android-tutorials)

它具有作为 MediaComposer 类的转码\remuxing 功能，并且可以为结果文件选择段

![在此处输入图像描述](../Images/02c05ac9b79fa93ec8fbd769e1549aca.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:34:49.353

已经回答了有关在 Android 上剪切或修剪视频的问题： [Android sdk cut/trim video file](https://stackoverflow.com/questions/11205299/android-sdk-cut-trim-video-file)

# c# - 实体框架 5 是否支持对断开连接的实体进行开箱即用的对象状态跟踪

> ID：13044469
> 
> 赞同：0
> 
> 时间：2012-10-24T07:15:39.920
> 
> 标签：c#, entity-framework-5

EF5 是否支持对断开连接的实体进行开箱即用的对象状态跟踪，还是我们必须编写自己的实现。

如果是这样，那里有什么好的参考例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:41:08.053

自我跟踪实体 (STE) 似乎是您想要的东西。曾经是[这个](http://visualstudiogallery.msdn.microsoft.com/a3ac10a5-9365-4096-bb58-d9a1ba71db8f)模板，但微软似乎不再那么喜欢 STE。他们建议您阅读[此](http://msdn.microsoft.com/en-US/data/jj613668)内容。他们[在这里](http://msdn.microsoft.com/en-us/data/jj613924)解释了原因。

# iphone - connectionDidFinishLoading 中复制的内存管理问题

> ID：13044470
> 
> 赞同：1
> 
> 时间：2012-10-24T07:15:41.747
> 
> 标签：iphone, memory-management

我通过此委托方法将使用委托的 connectionDidFinishLoading 中的 _resultArray 对象从一个类传递到另一个类。我在 dealloc 中释放，但我不确定它是否可以。如何释放这个 _resultArray ..

这是我的代码..

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection{
    NSString *urlDataString = [[NSString alloc]initWithData:receiveData 
        encoding:NSUTF8StringEncoding];
    NSMutableDictionary *soapDictionary = nil;
    soapDictionary = [parser objectWithString:urlDataString error:&error];
    resultArray = [soapDictionary copy];
    [urlDataString release];
    [self soapResultSurvey:resultArray];
}

//Delegate Method
-(void)soapResultSurvey:(id)_resultSurvey{
    [delegate soapResultSurvey:_resultSurvey];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:44:34.143

```
resultArray = [[soapDictionary copy] autorelease]; 
```

然后记住 resultArray 将在线程结束后被释放，所以如果你的委托需要保留它，那么，在你的委托 soapResultSurvey: 方法中做

# vba - CreateObject("Excel.Application") .Workbooks.Open 和 Workbooks.Open 之间的区别

> ID：13044473
> 
> 赞同：17
> 
> 时间：2012-10-24T07:15:56.377
> 
> 标签：vba, excel

我目前`Workbooks.Open`用于处理目录中包含的大量文件。但是打开和关闭这些文件会使文件出现在任务栏中，我想避免不断闪烁。

我得到了一个建议，我可以用它`CreateObject`来创建一个新实例，因为这会打开一个隐藏的新 Excel 实例。

1.  两种打开新工作簿的方式在性能方面还有其他区别吗？

2.  另外，我应该只使用创建的一个 Excel 实例`CreateObject`来打开所有工作簿，还是需要为我必须处理的每个工作簿创建一个实例（*这似乎浪费了大量内存和降低速度*）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-24T07:22:05.330

`Workbooks.Open`使用当前的 MS Excel 实例并`CreateObject(“Excel.Application”)`创建一个新的 MS Excel 实例。你可以在`CreateObject` [这里](http://msdn.microsoft.com/en-us/library/office/aa220083%28v=office.11%29.aspx)阅读。

在创建新实例后简单地发出 a`Workbooks.Open`并不能确保工作簿在新实例中打开。你将不得不与它绑定。例如

```
Dim oXLApp As Object, wb As Object

Set oXLApp = CreateObject("Excel.Application")

'~~> Hide Excel
oXLApp.Visible = False

'~~> Open files
Set wb = oXLApp.Workbooks.Open("C:\Sample.xls") 
```

关于你的另一个问题

> 另外，我应该只使用使用 CreateObject 创建的一个 Excel 实例来打开所有工作簿，还是需要为我必须处理的每个工作簿创建一个实例

您不需要多个实例。您可以使用一个实例。例如

```
Dim oXLApp As Object, wb As Object

Set oXLApp = CreateObject("Excel.Application")

'~~> Hide Excel
oXLApp.Visible = False

'~~> Open files
Set wb = oXLApp.Workbooks.Open("C:\Sample1.xls")

'
'~~> Do some Stuff
'

wb.Close (False)

'~~> Open files
Set wb = oXLApp.Workbooks.Open("C:\Sample2.xls")
'
'~~> Do some Stuff
'

wb.Close (False)

'
'~~> And So on
' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T10:09:53.683

后期绑定比早期绑定稍慢，但您甚至可能没有注意到差异。是的，您可以对所有工作簿只使用一个实例。请注意：

```
Dim xl As New Excel.Application

xl.Workbooks.Open "z:\docs\test.xlsm" 
```

除非您说：

```
xl.Visible = True 
```

请务必关闭错误陷阱中的所有实例。

# jakarta-ee - 如何在运行时选择要注入的bean

> ID：13044474
> 
> 赞同：3
> 
> 时间：2012-10-24T07:16:06.023
> 
> 标签：jakarta-ee, ejb, cdi

我正在尝试找到一种在运行时注入的几个 EJB 之间进行选择的方法。

场景是这样的：有 2 个 bean (ejbA, ejbB)，它们都实现了相同的接口 (ejbInterface)。在几个注入点（其他托管 bean，即在 ejbCaller bean 中）我想注入 ejbInterface 的实现。我会在运行时知道我需要哪一个（即基于一些 DB 值）。

我知道一种可行的方法是通过@Alternative 注释和部署描述符在部署时进行选择，但我宁愿在运行时进行选择。

我已经尝试过@Producer 方法，但这样我只能注入非托管对象（我在生产者中实例化并且不是容器管理的对象，或者它们本身可以是注入点）。我发现了生产者的两种解决方法/利用：

*   生成一个非托管对象并通过`setup`ejbInterface 中的方法传递任何托管对象（即其他 bean、实体管理器）（ejbCaller 必须传递这些）
*   在生产者中使用 JNDI 查找并返回托管对象

这两种解决方法都容易出错且不优雅。有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-15T07:28:55.473

只需注入 BeanManager 并使用

```
javax.enterprise.inject.spi.BeanManager.getBeans(Type, Annotation...) 
```

在运行时

# .net - .NET 4.0 上的 .NET 3.5 dll

> ID：13044476
> 
> 赞同：3
> 
> 时间：2012-10-24T07:16:14.693
> 
> 标签：.net, dll

我注意到我可以运行一些为 .NET 3.5 编译的 dll 的 .NET 应用程序，而无需在仅安装 .NET 4.0 的计算机上进行更改。但是并不总是这样：如果我在应用程序中使用了一些使用 System.Core 引用的 dll，那么应用程序将无法启动，因为它找不到 System.Core，我必须将以下内容添加到 Name.exe .config：

```
<configuration>
  <startup>
    <supportedRuntime version="v4.0" />
  </startup>  
</configuration> 
```

为什么只有在使用 System.Core 时才需要使用它？我知道 System.Core 是在 .NET 3.5 中添加的，但它对 .NET 4.0 有什么影响？其他参考资料甚至比 .NET 1.1 或 2.0 还要旧，所以为什么他们不提出问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:40:26.477

我认为原因是在 .NET 4`System.Func<TResult>`中已从 System.Core.dll 移至 mscorlib.dll。因此，即使您可以编译该项目，它也可能无法运行，因为它在 mscorlib.dll 中找不到该方法。

您可以通过将项目文件更新为引用 .NET 3.5 中的 System.Core.dll 来解决此问题，如下所示。

```
<Reference Include="System.Core"> 
    <RequiredTargetFramework>3.5</RequiredTargetFramework> 
</Reference> 
```

# iphone - 在 iphone 中使用 UIScrollView 滚动图像

> ID：13044477
> 
> 赞同：0
> 
> 时间：2012-10-24T07:16:17.080
> 
> 标签：iphone, ios, uiscrollview

我是 iphone 开发的新手，我正在做一个简单的应用程序来练习。在该应用程序中，只有一个视图上有图像。我希望能够向左或向右滑动，让第一个图像离开视图，第二个图像进入。图像是不同的，我希望它看起来像它们是连接的。我需要它能够在一系列滑动后更改图像或重新启动。我只使用 ScrollView 来执行此操作。

我尝试了一些东西：

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIScrollViewDelegate>
{
    UIImageView *imgView;
    UIScrollView *scrollView;
}

@property (nonatomic,retain)IBOutlet UIImageView *imgView;
@property (nonatomic, retain) IBOutlet UIScrollView *scrollView;

//- (id)initWithPageNumber:(int)page;
- (IBAction)changePage:(id)sender;

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize imgView,scrollView;

- (void)viewDidLoad
{
    [super viewDidLoad];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
/*
- (id)initWithPageNumber:(int)page{
    if (self = [super initWithNibName:@"MyView" bundle:nil])
    {
        pageNumber = page;
    }
    return self;
}
*/

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollview
{
    scrollView.contentOffset = CGPointMake(scrollview.bounds.size.width, 0);
}

- (IBAction)changePage:(id)sender
{

    NSArray *images = [[NSArray alloc] initWithObjects:@"1.jpeg",@"2.jpeg",@"3.jpeg", nil];
    scrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
    [self.view addSubview:scrollView];
    CGRect cRect = scrollView.bounds;

    for (int i = 0; i < images.count; i++){
        imgView = [images objectAtIndex:i];
        imgView.frame = cRect;
        [scrollView addSubview:imgView];
        cRect.origin.x += cRect.size.width;
    }

    scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * images.count, scrollView.bounds.size.height);
    scrollView.contentOffset = CGPointMake(scrollView.bounds.size.width, 0);

}

@end 
```

当我运行该应用程序时，我仍然无法在图像上滑动。难道我做错了什么？在这方面需要一些指导。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:30:26.210

此错误表明您在 Interface Builder 中有一个连接，而该连接在`IBOutlet`您的视图控制器类中不存在。

确保您的 IBOutlets 名称正确，并且您已删除 IB 中的所有过时连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:45:39.540

scrollView.ContentSize = (scrollView.frame.size.width * images.count

,scrollView.frame.size.height)

修剪后执行此操作它会滑动

# php - URL重写页面上的PHP函数？

> ID：13044481
> 
> 赞同：0
> 
> 时间：2012-10-24T07:16:23.947
> 
> 标签：php, mysql, url, pdo

在我的网站上，我有一个县的下拉列表...

```
<form method="post" action="/people.php" >
            <select name="county" onchange="this.form.submit()" >
                <option>--Select a County--</option>
                <option value="Avon">Avon</option>
                <option value="Bedfordshire">Bedfordshire</option>
                <option value="Berkshire">Berkshire</option>
            </select>
</form> 
```

然后我在我的人员页面上有我的查询......

```
$county = $_POST['county'];

$sth = $conn->prepare("SELECT * FROM directory WHERE user_active != '' AND County = :county");
$sth->execute(array(':county' => $county)); 
```

我想使用 URL 重写在我的 url 中包含县，所以当您在选择县后转到页面时，它不会显示为

```
'www.mysite.com/people.php' 
```

但显示为

```
'www.mysite.com/people-in-avon' 
```

我仍然是 PHP 的新手，但是，如果我想这样做，我是否需要使用 GET 方法，并将我的数据发布到 php 页面，***然后***重定向到 people.php？在 PHP 中在页面上进行查询是不好的做法吗？

我希望这是有道理的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:33:22.513

您首先需要使用带有一些基本重定向的 .htaccess 才能使用 people-in-[country] URL。

```
RewriteEngine on
RewriteRule ^people-in-(.*) /people.php?county=$1 [L] 
```

在你的 people.php 中：

```
<?php

// you county is set in GET via the .htaccess
$county = $_GET['county'];

// database query
$sth = $conn->prepare("SELECT * FROM directory WHERE user_active != '' AND County = :county");
$sth->execute(array(':county' => $county));

?> 
```

要创建 URL，您应该替换特殊字符、重音符号、空格......但是如果您的县在一个单词中，没有特殊字符，您可以这样做：

```
<?php 

// to redirect
$county = $_POST['county'];
$url = '/people-in-' . $county;
// redirect
header('Location:' . $url); 
```

要通过 ID 检索您的县，您可以执行类似的操作（伪代码）：

```
RewriteEngine on
RewriteRule ^people-in-.*-([0-9]+) /people.php?county_id=$1 [L] 
```

显示县：

```
// you county_id is set in GET via the .htaccess
$county_id = $_GET['county_id']; 
```

前往县城的路线：

```
// to redirect
$county_id = $_POST['county_id'];

// fetch the county by id
// BASIC string cleaning
$county = str_replace(' ', '-', $county);

$url = '/people-in-' . $county . '-' . $county_id;

// redirect
header('Location:' . $url); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:32:55.317

用这个

```
<form method="post" action="/people.php" >
            <select name="county" id="selectform" >
                <option>--Select a County--</option>
                <option value="Avon">Avon</option>
                <option value="Bedfordshire">Bedfordshire</option>
                <option value="Berkshire">Berkshire</option>
            </select>
</form> 
```

在java脚本中

```
<script>
 $(document).ready(function(){
 $("#selectform").change(function(){
  window.location="www.mysite.com/people-in-"+$(this).val()+";
 })
</script> 
```

和`.htaccess`文件使用这个

```
RewriteEngine On
RewriteRule   ^people-in-(.*) people.php?option=$1  [QSA,L] 
```

并且在`people.php`

```
$value=explode("-",$_GET['option']);
$newvalue=$value[2]; 
```

# javascript - 只输入正确的数字

> ID：13044482
> 
> 赞同：1
> 
> 时间：2012-10-24T07:16:25.333
> 
> 标签：javascript, jquery

我想问我如何将我的正则表达式与 if( ( !regex.test( sybol **.... , 破折号只能排在第一位，输入只能排一个，点也一样。**

```
$( this ).bind( 'keypress', function( e ){

    var code = e.keyCode || e.which;
    var symbol = String.fromCharCode( code );
    var regex = /[-0-9]|[\b]/;
    var currVal = $( this ).val();
    var insideInput = currVal.indexOf( '-' );

    if( ( !regex.test( symbol ) && code != 37 && code != 39 && code != 46 ) ||
 ( code == 45 && insideInput == 0 ) || ( currVal.length != 0 && code == 45 ) ) {

        e.preventDefault();
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:25:00.263

如果您只想输入数字，您可以使用以下内容：

```
$('#test').on('input', function() {

    var oldVal = $(this).val();

    // remove everything but digits
    var newVal = oldVal.replace(/[^\d]/g, '');

    // put leading minus back in place (if there was one)
    if(oldVal.trim().length > 0 && oldVal.trim()[0] == '-') {
        newVal = '-' + newVal;
    }

    $(this).val(newVal);

});​ 
```

请参阅此[演示](http://jsfiddle.net/GKQSf/3)。

如果您想要更多，请更新您的问题（描述您要使用脚本实现的目标）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:52:25.227

所以我结合了**Michal Klouda 的**想法和我的想法并完成了这个功能：

```
$('input').bind('keypress paste', function(e) {

    var currVal = $(this).val();

    var code = e.keyCode || e.which;
    var symbol = String.fromCharCode( code );
    var regex = /[0-9\-]|[\b]/;

    if( 
        !regex.test( symbol ) && code != 37 && code != 39 && code != 46 || 
        symbol == '%' ||
        currVal.length > 0 && currVal[0] == '-' && symbol == '-' ||
        currVal.length > 0 && symbol == '.' && currVal.indexOf( '.' ) > -1 ||
        currVal.length < 1 && symbol == '.' ||
        currVal.length < 2 && symbol == '.' && currVal[0] == '-' 
    ){

        e.preventDefault();
    }
}); 
```

一些解释：

**正则表达式 = /[0-9\-]|[\b]/;**

删除所有非数字、破折号、%、退格符号。为什么它不删除 % 符号，我找不到。*（还有一个地方可以改进代码）*

*   code != 37 // 离开左箭头
*   code != 39 // 离开右箭头
*   code != 46 // 允许使用删除按钮删除代码
*   symbol == % // 防止百分比符号

其他条件允许您写一个点和一个破折号。破折号只允许放在第一位，点在两种情况下允许：有破折号或没有破折号。允许从 3 个位置开始破折号，不允许从 2 个位置开始，但只允许一次。它还可以防止用户从剪贴板粘贴代码。

代码测试：

*   IE7+
*   法郎
*   铬合金
*   苹果浏览器
*   歌剧

尝试[演示](http://jsfiddle.net/GomatoX/wudVs/)

PS：感谢**Michal Klouda**的帮助。

# java - 谷歌地图自动完成安卓

> ID：13044488
> 
> 赞同：3
> 
> 时间：2012-10-24T07:17:13.287
> 
> 标签：java, android, eclipse, google-maps

我正在尝试为 goofle 地图开发一个自动完成位置。但是，我在开发过程中遇到了一些错误。我不知道错误的原因是什么。

**下面是我的代码。**

```
public class MainActivity extends Activity {
/** Called when the activity is first created. */
ArrayAdapter<String> adapter;
AutoCompleteTextView textView;
Object[] arg0 = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    adapter = new ArrayAdapter<String>(this, R.layout.item_list);
    textView = (AutoCompleteTextView) findViewById(R.id.autoCompleteTextView1);
    adapter.setNotifyOnChange(true);
    textView.setAdapter(adapter);
    textView.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            if (count % 3 == 1) {
                adapter.clear();
                // GetPlaces task = new GetPlaces();
                // now pass the argument in the textview to the task
                new GetPlaces().execute(textView.getText().toString());
            }
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }

        public void afterTextChanged(Editable s) {

        }
    });
}

class GetPlaces extends AsyncTask<String, Void, ArrayList<String>> {

    @Override
    // three dots is java for an array of strings
    protected ArrayList<String> doInBackground(String... args) {

        Log.d("gottaGo", "doInBackground");

        ArrayList<String> predictionsArr = new ArrayList<String>();

        try {

            URL googlePlaces = new URL(
            // URLEncoder.encode(url,"UTF-8");
                    "https://maps.googleapis.com/maps/api/place/autocomplete/json?input="
                            + URLEncoder.encode(arg0[0].toString(), "UTF-8")
                            + "&types=geocode&language=en&sensor=true&key=<API-key here>"); 
            URLConnection tc = googlePlaces.openConnection();
            BufferedReader in = new BufferedReader(new InputStreamReader(
                    tc.getInputStream()));

            String line;
            StringBuffer sb = new StringBuffer();
            // take Google's legible JSON and turn it into one big
            // string.
            while ((line = in.readLine()) != null) {
                sb.append(line);
            }
            // turn that string into a JSON object
            JSONObject predictions = new JSONObject(sb.toString());
            // now get the JSON array that's inside that object
            JSONArray ja = new JSONArray(
                    predictions.getString("predictions"));

            for (int i = 0; i < ja.length(); i++) {
                JSONObject jo = (JSONObject) ja.get(i);
                // add each entry to our array
                predictionsArr.add(jo.getString("description"));
            }
        } catch (IOException e) {

            Log.e("YourApp", "GetPlaces : doInBackground", e);

        } catch (JSONException e) {

            Log.e("YourApp", "GetPlaces : doInBackground", e);

        }

        return predictionsArr;

    }

    // then our post

    @Override
    protected void onPostExecute(ArrayList<String> result) {

        Log.d("YourApp", "onPostExecute : " + result.size());
        // update the adapter
        adapter = new ArrayAdapter<String>(getBaseContext(),
                R.layout.item_list);
        adapter.setNotifyOnChange(true);
        // attach the adapter to textview
        textView.setAdapter(adapter);

        for (String string : result) {

            Log.d("YourApp", "onPostExecute : result = " + string);
            adapter.add(string);
            adapter.notifyDataSetChanged();

        }

        Log.d("YourApp",
                "onPostExecute : autoCompleteAdapter" + adapter.getCount());

    } 
```

**这是 logcat 错误：**

```
10-24 15:10:54.609: E/AndroidRuntime(14346): FATAL EXCEPTION: AsyncTask #1
10-24 15:10:54.609: E/AndroidRuntime(14346): java.lang.RuntimeException: An error occured while executing doInBackground()
10-24 15:10:54.609: E/AndroidRuntime(14346):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
10-24 15:10:54.609: E/AndroidRuntime(14346):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
10-24 15:10:54.609: E/AndroidRuntime(14346):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
10-24 15:10:54.609: E/AndroidRuntime(14346):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
10-24 15:10:54.609: E/AndroidRuntime(14346):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
10-24 15:10:54.609: E/AndroidRuntime(14346):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
10-24 15:10:54.609: E/AndroidRuntime(14346):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
10-24 15:10:54.609: E/AndroidRuntime(14346):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
10-24 15:10:54.609: E/AndroidRuntime(14346):    at java.lang.Thread.run(Thread.java:856)
10-24 15:10:54.609: E/AndroidRuntime(14346): Caused by: java.lang.NullPointerException
10-24 15:10:54.609: E/AndroidRuntime(14346):    at com.test.main.MainActivity$GetPlaces.doInBackground(MainActivity.java:76)
10-24 15:10:54.609: E/AndroidRuntime(14346):    at com.test.main.MainActivity$GetPlaces.doInBackground(MainActivity.java:1)
10-24 15:10:54.609: E/AndroidRuntime(14346):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
10-24 15:10:54.609: E/AndroidRuntime(14346):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T06:29:55.003

在第 76 行.. 使用“URLEncoder.encode(args[0].toString()”而不是“URLEncoder.encode(arg0[0].toString()”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:12:04.290

错误的根源显然在 MainActivity 第 76 行，您正在访问一个空对象

# mysql - Mysql group post_id by max count status

> ID：13044490
> 
> 赞同：3
> 
> 时间：2012-10-24T07:17:23.183
> 
> 标签：mysql, sql, database

嗨，我有一个 mysql 查询，它将按状态的最大计数返回 post_id，它当前显示的结果是

```
POST_ID

    3 
```

mysql表：

```
(`post_id`, `user_id`, `status`, `date_created`)
(2, 2, 'funny', 20121022120627)
(2, 3, 'lame', 20121023120627)
(3, 1, 'useful', 20121023120627)
(3, 3, 'lame', 20121023120627)
(3, 4, 'useful', 20121023120627)
(4, 4, 'useful', 20121024120627) 
```

但我需要的结果是，在 desc order 上显示从 max 到 min 的计数。如果 2 个结果具有相同的数字，那么最高结果将基于最新的 date_created 类似这样

```
POST_ID

     3
     2
     4 
```

我目前的查询是

```
SELECT post_id
FROM tableName
GROUP BY post_ID
HAVING COUNT(*) = 
(
    SELECT MAX(x.counts)
    FROM
    (
        SELECT post_id, COUNT(*) counts
        FROM tableName
        GROUP BY post_id
    ) x
) 
```

该示例可以在 SQLFiddle [SQLFiddle上找到](http://sqlfiddle.com/#!2/a515e/1)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T07:20:08.017

> 但我需要的结果是，在 desc order 上显示从 max 到 min 的计数。如果 2 个结果具有相同的数字，那么最高结果将基于最新的 date_created。

你需要`ORDER BY COUNT(*) DESC, date_created DESC`这样：

```
SELECT post_id
FROM tableName
GROUP BY post_ID
HAVING COUNT(*) = 
(
    SELECT MAX(x.counts)
    FROM
    (
        SELECT post_id, COUNT(*) counts
        FROM tableName
        GROUP BY post_id
    ) x
)
ORDER BY COUNT(*) DESC, date_created DESC 
```

**更新 1**

尝试这个，

```
SELECT post_id
FROM tableName
GROUP BY post_ID
ORDER BY  COUNT(*) DESC, MAX(`date_created`) DESC 
```

## [更新的 SQL Fiddle 演示](http://sqlfiddle.com/#!2/a515e/13)

# asp.net - Bootstrap 是否与 ASP.NET Telerik 控件兼容？

> ID：13044492
> 
> 赞同：10
> 
> 时间：2012-10-24T07:17:25.240
> 
> 标签：asp.net, twitter-bootstrap, telerik

我使用 ASP.NET Telerik 控件和组件开发了一个站点。它在移动设备上无法正常工作（定位、屏幕分辨率）（跨分辨率缩放）。

我决定将引导程序集成到我的网站中，但引导程序响应样式并没有调整我需要的内容。

有没有人尝试过使用 asp.net Telerik 组件进行引导？两者都兼容吗？

有什么建议/适当的指导吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-29T00:33:52.750

Bootstrap 和 Telerik 等一些框架之间存在不兼容性。主要问题是不同的框架使用 CSS 样式名称，如果两个不同的框架使用相同的名称，就会发生冲突。我在最新版本的 Bootstrap (3.0) 和最新版本的 Telerik 中注意到了这一点，在某些 Telerik 控件中，复选框格式被 Bootstrap 覆盖。不幸的是，修复它非常棘手，您需要对其进行自定义，使其更容易完全不使用该框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-28T17:00:33.690

如果您需要引导程序来使您的页面响应，您可以使用 RadPageLayout：[http](http://www.telerik.com/products/aspnet-ajax/responsive-page-layout.aspx) ://www.telerik.com/products/aspnet-ajax/responsive-page-layout.aspx 。因此，您可以删除 Bootstrap。这是它的文档：[http](http://www.telerik.bg/help/aspnet-ajax/page-layout-overview.html) ://www.telerik.bg/help/aspnet-ajax/page-layout-overview.html 。如果您使用它提供的一些样式，也许 RadFormDecorator 可以帮助您为您的表单设置样式：http: [//demos.telerik.com/aspnet-ajax/formdecorator/examples/overview/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/formdecorator/examples/overview/defaultcs.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-10T08:00:47.677

链接说

> 这取决于您要完成的工作。一般来说，引导
> 
> 2.0 更容易与 Telerik 一起使用，因为它们的默认元素样式较少，例如 . 在 2.0 中，它们要求您向元素添加一些类，这意味着它们不会尝试设置 Telerik 网格的样式。这使它看起来更好。
> 
> 您不会得到 Telerik 控件的“Bootstrap 主题”版本。继续 Telerik 网格示例，如果您将其与 Bootstrap 结合使用，它将看起来像 Telerik 网格，而不是 Bootstrap 表，具有漂亮的寻呼机按钮等。这需要大量工作才能改变，而我没有不推荐它。Telerik 使用自己的 CSS 类名发出 html，并且将其映射回 Bootstrap 将是一件苦差事。实际上，我发现在使用 Bootstrap 时，我使用的 Telerik 比以前少了很多，而只是使用了更直接的 html + Bootstrap。
> 
> 如果您决定将 Telerik 集成到您的站点中，我推荐 Telerik “Simple”主题，它似乎与 Bootstrap 的默认颜色最匹配。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-18T00:17:53.903

当我使用引导程序时，RadImageEditor 图标被隐藏。

所以我必须说它不是 100% 兼容的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-19T15:27:30.120

如果您让我提出建议，您可以检查 MDBootstrap（它是建立在 Bootstrap 之上的前端框架）。在那里你会发现[一篇](https://mdbootstrap.com/articles/miscellaneous/ready-to-use-asp-net-mvc-templates-from-mdb-and-how-to-integrate-them/)包含免费 ASP.NET 模板的文章。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-08-12T15:14:20.327

是的，我最近使用 Bootstrap 和 Telerik ASP.NET Ajax 版本 Q2 2015 和 .NET Framework 4.5.1 构建了 ASP.NET 2013 Web 应用程序。在我实施这个项目的过程中，我遇到了一个问题： • 一个问题是当我使用 RadAjaxManager 时，我收到了这个错误：

无法修改 Controls 集合，因为该控件包含代码块（即 <% ... %>）。

• 为了解决这个问题，我用控件包装了代码部分。

# editor - 如何在 Visual Studio 2012 中关闭 pdf 文件的预览？

> ID：13044498
> 
> 赞同：1
> 
> 时间：2012-10-24T07:17:50.277
> 
> 标签：editor, visual-studio-2012, preview

当我在解决方案资源管理器中选择一个文件时，它会立即在预览选项卡中打开。

[![Visual Studio 2012 中的 PDF 预览](../Images/f83038dc71f8419d4130c1ee3caa48a8.png)](http://www.flickr.com/photos/dumbledad/8118378537/sizes/o/)

对于许多文件类型，这是一个有用的功能。但是当将 PDF 添加到网站时，情况并非如此。如何调整 Visual Studio 2012 的预览功能使其不预览 PDF 文件？

（NB [Kyralessa在](https://stackoverflow.com/users/5486/kyralessa)[回答另一个问题](https://stackoverflow.com/a/12392339/575530)时展示了如何关闭预览功能，但我想一般保持打开状态，并为 PDF 关闭它。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:50:23.960

按住 ALT 键的同时单击 pdf 文件 - 该文件将在解决方案资源管理器中被选中，但不会在预览选项卡中打开。

# c# - 从子类调用公共父函数

> ID：13044499
> 
> 赞同：3
> 
> 时间：2012-10-24T07:17:56.173
> 
> 标签：c#, parent-child

在我的`Main`方法中，我`UpdateDialog`根据用户是否按下按钮来实例化其中的类，我需要`function1()`从`Main`. 这是代码：

```
public partial class Main : Form
{
  public void function1()
  {
    doing_stuff_here();
  }

  private void button1_Click(Object sender, EventArgs e)
  {
    var update = new UpdateDialog();
    update.ShowDialog();
  } 
}

public partial class UpdateDialog : Form
{
  private void button2_Click(object sender, EventArgs e)
  {
    //call here function1() from Main
  }
} 
```

我应该怎么做才能`function1()`从`Main`部分类内部调用`UpdateDialog`？

LE：虽然 Styxxy 建议的方法看起来是对的，但它在我的应用程序中效果不佳，`cross-thread invalid operation`因此我最终使用了`delegate workaround`Cuong Le 建议的方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T07:23:00.807

您必须在`Main`表单中有一个表单实例`UpdateDialog`。正如您所说，UpdateDialog 是主窗体的子窗体，我想您在主窗体中创建 UpdateDialog 并在那里进行展示。在显示该表单之前，您可以分配[`Parent`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.parent.aspx)。

```
var updateDialog = new UpdateDialog();
// Or use "UpdateDialog updateDialog = new UpdateDialog();" as people like Andreas Johansson don't like the "var" keyword
// Do other stuff here as well
updateDialog.Parent = this;
// Or use Show() for non modal window
updateDialog.ShowDialog(); 
```

你得到错误`ArgumentException: Top-level control cannot be added to a control.`。现在这可以通过两种方式解决。

1.  您可以在主窗体上将[`TopLevel`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.toplevel.aspx)属性设置为`false`（我不是这个的超级粉丝）。
2.  您可以在[`Owner`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.owner.aspx)主窗体 ( `this`) 中使用该属性。下面有两种方法。

您可以`Owner`手动设置：

```
updateDialog.Owner = this; 
```

或者您可以将`this`作为参数添加到[`Show(owner)`](http://msdn.microsoft.com/en-us/library/szcefbbd.aspx)or[`ShowDialog(owner)`](http://msdn.microsoft.com/en-us/library/w61zzfwe.aspx)方法；这样，`Owner`也正在设置中。

```
updateDialog.Show(this);
// or
updateDialog.ShowDialog(this); 
```

“完整”代码使这个：

```
var updateDialog = new UpdateDialog();
// Do other stuff here as well
updateDialog.Owner= this;
updateDialog.ShowDialog(); // or use .Show()
// or
updateDialog.ShowDialog(this); // or use .Show(this) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T07:26:51.587

我建议您创建一个事件，`UpdateDialog`然后在类中创建一个实例后订阅它`Main`。这样，您可以更好地分离这两个类。

```
public partial class Main
{
    public void function1()
    {
        doing_stuff_here();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        var update = new UpdateDialog();
        update.OnButton2Click += OnUpdateDialogButton2Click;

        update.ShowDialog();
    }

    void OnUpdateDialogButton2Click(object sender, EventArgs e)
    {
        function1();
    }
}

public partial class UpdateDialog
{
    public event EventHandler<EventArgs> OnButton2Click;

    private void button2_Click(object sender, EventArgs e)
    {
        //call here function1() from Main  

        if (OnButton2Click != null)
        {
            this.OnButton2Click(this, e);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T07:24:41.623

将类实例传递`Main`给您的更新表单并将其存储在实例变量中 -

```
Main mainWindow = null;
public UpdateDialog(Main mainForm)
{
   mainWindow = mainForm;
}

private void button2_Click(object sender, EventArgs e)
{
   mainWindow.function1();
} 
```

而从主要方法 -

```
private void button1_Click(Object sender, EventArgs e)
{
    var update = new UpdateDialog(this);
    update.ShowDialog();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T07:29:19.980

你可以把它转过来，让主窗体监听来自 UpdateDialog 的点击。

在主要：

```
private void button1_Click(Object sender, EventArgs e)
{
    var update = new UpdateDialog();
    update.OnSomethingClicked += function1;
    update.ShowDialog();
} 

void form_OnSomethingHappened(object sender, EventArgs e)
{
    // Do the stuff you want
} 
```

在更新对话框中：

```
public event EventHandler OnSomethingHappened;

private void button2_Click(object sender, EventArgs e)
{
     EventHandler handler = OnSomethingHappened;
     if (handler != null) handler(this, e);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T07:26:23.277

ShowDialog() 方法返回一个 DialogResult，您可以在对话框关闭后调用 function1 之一。

[http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T07:26:42.120

可以像引用一样传递 Main 类。

例如：

```
public partial class Main : Form
{
     //make it internal, if UpdateDialog in the same assembly, and it only one that        would use it. In other words hide it for outside world.
     internal void function1()  
     {
         doing_stuff_here();
     }
 ....
}

public partial class UpdateDialog : Form        
{
      private MainForm _main = null;
      public UpdateDialog (MainForm main) { //Accept only MainForm type, _not_ just a Form
        _main = main;
      }

      private void button2_Click(object sender, EventArgs e)
      {
            _main.function1(); //CALL
      }
} 
```

像这样的东西。您可以根据您的精确要求更改此设置，但这是一个普遍的想法。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-24T07:23:44.660

方法#1

您需要创建一个类的实例`Main`。

```
Main foo = new Main();
foo.function1(); 
```

方法#2

您需要将该方法声明为静态。

```
public static function1(){ ... }
....
Main.function1(); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-24T07:30:54.843

您可以使您的 function1 成为 Partial 方法，这样您就可以在所有部分类中使用它。

部分方法允许方法的定义位于一个文件中，而方法的主体可以选择性地定义在另一个文件中。它们只能在部分类中使用，并在 C# 3.0 和 Visual Basic 9.0（随 .NET Framework 3.5 和 Visual Studio 2008 附带的版本）中作为语言功能引入。

所以你可以做的就是这样修改

```
public partial class Main : Form

        {
            public partial void function1()
            {
                doing_stuff_here();
            }

            private void button1_Click(object sender, EventArgs e)
            {
                var update = new UpdateDialog();
                update.ShowDialog();
            }   
        }

public partial class UpdateDialog : Form
        {
            public partial void function1();
            private void button2_Click(object sender, EventArgs e)
            {
            function1();
            }
        } 
```

# wpf - WPF：如何在运行时更改数据网格单元格的背景颜色

> ID：13044500
> 
> 赞同：1
> 
> 时间：2012-10-24T07:17:59.170
> 
> 标签：wpf, datagrid, datatable

我在两个数据网格中显示两个数据表（我们称它们为左右），它可以工作。但是我想要做的是允许用户根据选择比较两行（左和右），并在单元格不同时更改背景。

样本：

左
|A|B|C|
|1|2|3|
|1|2|3|
|1|2|3|

右
|A|B|C|
|1|2|4|
|1|2|3|
|1|2|3|

在 XAML 中，我的 Datagrids 看起来像：`<DataGrid Grid.Column="0" x:Name="leftData" HorizontalAlignment="Stretch" > </DataGrid>`

在代码中，我将数据网格绑定到 DataTable：

```
TableRows = new DataTable();
leftData.ItemsSource = TableRows; 
```

当用户选择左右第一行时，C列的单元格应该用红色背景标记。

在 WPF 中这样做的更好方法是什么？是否可以使用 WPF 中的 DataGrid 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:05:36.947

最后我找到了解决方案。DataGrid 控件不提供获取 DataGridCell 的方法，但是可以通过使用 VisualTreeHelper 从 DataGrid 控件获取它以获取 DataGridCellsPresenter，并且可以从演示者获取 DataGridCell。

更多信息和代码可以在这里找到：

[http://techiethings.blogspot.ch/2010/05/get-wpf-datagrid-row-and-cell.html](http://techiethings.blogspot.ch/2010/05/get-wpf-datagrid-row-and-cell.html)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-24T07:55:58.043

你可以做类似的事情

```
//dataControl would be the name of your control in the XAML
var cell = dataControl.Cells[columnIndex,rowIndex];

cell.Background = new SolidBrush(Colours.Red); 
```

显然，您需要在当前拥有的任何逻辑中实现这一点，如果您发布更多内容，那么我会更好地了解它的去向

# java - WindowBuilder 设计模式未显示我的小部件的视觉特征

> ID：13044504
> 
> 赞同：3
> 
> 时间：2012-10-24T07:18:24.097
> 
> 标签：java, canvas, widget, swt, windowbuilder

我已经实现了自己的小部件（扩展`Canvas`），它具有明显的特征，即它全是黑色的。

在 WindowBuilder 中将我的画布添加到`Shell`设计模式时，它看起来就像一个普通的画布，尽管在执行模式下一切都很好。

有什么我遗漏的，或者这是 WindowBuilder 的固有限制吗？

这是我正在使用的代码，以防万一：

```
public class MyCanvas extends Canvas {
    public MyCanvas(Composite parent, int style) {
        super(parent, style);
        setBackground(Display.getDefault().getSystemColor(SWT.COLOR_BLACK));
        addPaintListener(new PaintListenerEx());
    }

    private class PaintListenerEx implements PaintListener {
        @Override
        public void paintControl(PaintEvent e) {
            e.gc.fillRectangle(MyCanvas.this.getBounds());
            e.gc.dispose();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T11:47:54.240

我相信 WindowBuilder 没有调用您尝试使用的构造函数来初始化您的`Canvas`. WindowBuilder 使用每个框架（如 SWT）的一些已知入口点，但有时即使您使用正确的签名也找不到入口点。

如果你想为 WindowBuilder 指定一个入口点，你可以使用这个：

```
 /**
  * @wbp.parser.entryPoint
  */ 
```

使 WindowBuilder 从那里开始，但不保证可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-29T13:19:42.530

还有一种情况是您需要指定特定图形元素的默认构造函数。

```
 /**
  * @wbp.parser.constructor
  */ 
```

在我的特定情况下`entryPoint`不起作用，这就是解决方案。

# java - Java方法不返回链表的第一个值

> ID：13044506
> 
> 赞同：1
> 
> 时间：2012-10-24T07:18:28.257
> 
> 标签：java

我正在尝试为标题链表类编写一个 peek 方法。但是，它不返回第一个值。

```
public E peek () throws NoSuchElementException {
  ListNode<E> temp = highest;
  ListNode<E> r = temp;

  if (temp.next == null) throw new NoSuchElementException();
  else r.next = temp.next.next;

  return r.next.value;
} 
```

我明白为什么它不返回第一个值。因为在我的代码`else r.next`中已经指向列表中的下一个节点。因此，对于 5、4、3、2、1，它将在第一次调用时返回 4 而不是 5。 temp 指向最高节点，即头节点。如何获得首先返回列表中第一个值 5 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:27:41.980

实现链表的一个好方法是链表中的`header`节点应该始终是空节点`it should not hold a value`。这样，当您调用`next`标题时，您实际上只会转到第一个元素。

[标题 http://easy2teach.net/wp-content/uploads/2011/06/header-linked-list.jpg](http://easy2teach.net/wp-content/uploads/2011/06/header-linked-list.jpg)

如上图所示，标题下一个实际上是链接列表的第一个元素

所以你的 Peek 操作不应该抛出`NoSuchElementException`，而是应该返回`null`，所以简单的方法可以

```
 public E peek ()
 {
   if(check element does exist using size ==0)
      return null;
   else 
      return highest.next.value;
 } 
```

# apache - Drupal 从安装子目录重定向而不创建循环

> ID：13044509
> 
> 赞同：0
> 
> 时间：2012-10-24T07:18:58.980
> 
> 标签：apache, .htaccess, drupal, mod-rewrite

我正在开发一个 Drupal 站点，该站点在很多内容中都有硬编码链接（我没有创建该站点）。不幸的是，这意味着该站点必须位于诸如“www.example.com/drupal”之类的子目录中，否则链接将中断。我已成功将站点根目录重定向到子目录，并使用站点根目录 htaccess 文件中的以下代码将其隐藏：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteRule (.*) drupal/$1 [L]
RewriteCond %{HTTP_HOST} !^www\..+$ [NC]
RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]
</IfModule> 
```

但是，如果我转到 www.example.com/drupal，子目录仍然会显示。这意味着 www.example.com 和 www.example.com/drupal 具有相同的内容，这对 SEO 不利。有没有办法让 /drupal 重定向到 root 而不会导致循环？我几乎尝试了其他线程中的所有帖子，但没有一个有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T23:17:32.273

您需要在重写 URL 之前进行重定向。您还需要检查您实际上是否正在重写合法资源。

1.  交换规则，重定向应该首先发生

2.  向 drupal 规则添加检查

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www\..+$ [NC]
RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

RewriteCond %{REQUEST_URI} !^/drupal
RewriteRule (.*) drupal/$1 [L]
</IfModule> 
```

# c# - ManualResetEvent 不适用于 WCF 和 silverlight

> ID：13044511
> 
> 赞同：6
> 
> 时间：2012-10-24T07:19:22.837
> 
> 标签：c#, multithreading, wcf, silverlight

> **可能重复：**
> [为什么 ManualResetEvent 无法在使用 Silverlight 4 的此同步调用中工作？](https://stackoverflow.com/questions/6147288/why-does-manualresetevent-fail-to-work-in-this-synchronous-call-using-silverligh)

我在 MainPage.Xaml.cs 中有以下代码

```
 ManualResetEvent wait = new ManualResetEvent(false);
 Service1Client wcf = new Service1Client();
 wcf.DoWorkCompleted += (o, ev) =>
 {
   int s = (int)ev.Result;
   wait.Set();
 };
 wcf.DoWorkAsync();
 wait.WaitOne();

//My other part of code where I'd like the value of `int s`.
.... 
```

Service1.svc.cs 的代码如下。

```
public class Service1 : IService1
{
  public int DoWork()
  {
    return 5;
  }
} 
```

直到`DoWork`完成，我希望我的代码等待，所以我写了这段代码。虽然在`WaitOne`指令之后（Service1.svc.cs）方法`DoWork()`根本不会被调用。应用程序将留在那里只是不做任何事情。我以前在 SilverLight 4 的另一台机器上做过这个，它按预期工作。现在我正在使用 SilverLight 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:02:33.920

您可能通过*调用*`wait.WaitOne()`.

异步操作完成后，它会尝试`DoWorkCompleted`通过 UI 调度程序调用 。虽然它会成功地将调用排队，但它永远不会出队，因为 UI 线程在`WaitOne()`.

在我看来，您应该避免这种解决方法，而只进行异步调用。

# python - Cython code 3-4 times slower than Python / Numpy code?

> ID：13044515
> 
> 赞同：7
> 
> 时间：2012-10-24T07:19:51.807
> 
> 标签：python, performance, numpy, scipy, cython

I am trying to convert my Python / Numpy code to Cython code for speedup purposes. However, Cython is MUCH slower (3-4 times) than the Python / Numpy code. Am I using Cython correctly? Am I passing arguments correctly to myc_rb_etc() in my Cython code? What about when I call the integrate function? Thank you in advance for your help. Here is my Python / Numpy code:

```
from pylab import * 
import pylab as pl
from numpy import *
import numpy as np
from scipy import integrate

def myc_rb_e2f(y,t,k,d):

    M = y[0]
    E = y[1]
    CD = y[2]
    CE = y[3]
    R = y[4]
    RP = y[5] 
    RE = y[6]

    S = 0.01
    if t > 300:
        S = 5.0
    #if t > 400
        #S = 0.01

    t1 = k[0]*S/(k[7]+S);
    t2 = k[1]*(M/(k[14]+M))*(E/(k[15]+E));
    t3 = k[5]*M/(k[14]+M);
    t4 = k[11]*CD*RE/(k[16]+RE);
    t5 = k[12]*CE*RE/(k[17]+RE);
    t6 = k[2]*M/(k[14]+M);
    t7 = k[3]*S/(k[7]+S);
    t8 = k[6]*E/(k[15]+E);
    t9 = k[13]*RP/(k[18]+RP);
    t10 = k[9]*CD*R/(k[16]+R);
    t11 = k[10]*CE*R/(k[17]+R);

    dM = t1-d[0]*M
    dE = t2+t3+t4+t5-k[8]*R*E-d[1]*E
    dCD = t6+t7-d[2]*CD
    dCE = t8-d[3]*CE
    dR = k[4]+t9-k[8]*R*E-t10-t11-d[4]*R
    dRP = t10+t11+t4+t5-t9-d[5]*RP
    dRE = k[8]*R*E-t4-t5-d[6]*RE

    dy = [dM,dE,dCD,dCE,dR,dRP,dRE]

    return dy

t = np.zeros(10000)
t = np.linspace(0.,3000.,10000.)

# Initial concentrations of [M,E,CD,CE,R,RP,RE]
y0 = np.array([0.,0.,0.,0.,0.4,0.,0.25])
E_simulated = np.zeros([10000,5000])
E_avg = np.zeros([10000])
k = np.zeros([19])
d = np.zeros([7])

for i in range (0,5000):
    k[0] = 1.+0.1*randn(1)
    k[1] = 0.15+0.05*randn(1)
    k[2] = 0.2+0.05*randn(1)
    k[3] = 0.2+0.05*randn(1)
    k[4] = 0.35+0.05*randn(1)
    k[5] = 0.001+0.0001*randn(1)
    k[6] = 0.5+0.05*randn(1)
    k[7] = 0.3+0.05*randn(1)
    k[8] = 30.+5.*randn(1)
    k[9] = 18.+3.*randn(1)
    k[10] = 18.+3.*randn(1)
    k[11] = 18.+3.*randn(1)
    k[12] = 18.+3.*randn(1)
    k[13] = 3.6+0.5*randn(1)
    k[14] = 0.15+0.05*randn(1)
    k[15] = 0.15+0.05*randn(1)
    k[16] = 0.92+0.1*randn(1)
    k[17] = 0.92+0.1*randn(1)
    k[18] = 0.01+0.001*randn(1)
    d[0] = 0.7+0.05*randn(1)
    d[1] = 0.25+0.025*randn(1)
    d[2] = 1.5+0.05*randn(1)
    d[3] = 1.5+0.05*randn(1)
    d[4] = 0.06+0.01*randn(1)
    d[5] = 0.06+0.01*randn(1)
    d[6] = 0.03+0.005*randn(1)
    r = integrate.odeint(myc_rb_e2f,y0,t,args=(k,d))
    E_simulated[:,i] = r[:,1]

for i in range(0,10000):
    E_avg[i] = sum(E_simulated[i,:])/5000.

pl.plot(t,E_avg,'-ro')
pl.show() 
```

Here is the code converted into Cython:

```
cimport numpy as np
import numpy as np
from numpy import *
import pylab as pl
from pylab import * 
from scipy import integrate

def myc_rb_e2f(y,t,k,d):

    cdef double M = y[0]
    cdef double E = y[1]
    cdef double CD = y[2]
    cdef double CE = y[3]
    cdef double R = y[4]
    cdef double RP = y[5] 
    cdef double RE = y[6]

    cdef double S = 0.01
    if t > 300.0:
        S = 5.0
    #if t > 400
        #S = 0.01

    cdef double t1 = k[0]*S/(k[7]+S)
    cdef double t2 = k[1]*(M/(k[14]+M))*(E/(k[15]+E))
    cdef double t3 = k[5]*M/(k[14]+M)
    cdef double t4 = k[11]*CD*RE/(k[16]+RE)
    cdef double t5 = k[12]*CE*RE/(k[17]+RE)
    cdef double t6 = k[2]*M/(k[14]+M)
    cdef double t7 = k[3]*S/(k[7]+S)
    cdef double t8 = k[6]*E/(k[15]+E)
    cdef double t9 = k[13]*RP/(k[18]+RP)
    cdef double t10 = k[9]*CD*R/(k[16]+R)
    cdef double t11 = k[10]*CE*R/(k[17]+R)

    cdef double dM = t1-d[0]*M
    cdef double dE = t2+t3+t4+t5-k[8]*R*E-d[1]*E
    cdef double dCD = t6+t7-d[2]*CD
    cdef double dCE = t8-d[3]*CE
    cdef double dR = k[4]+t9-k[8]*R*E-t10-t11-d[4]*R
    cdef double dRP = t10+t11+t4+t5-t9-d[5]*RP
    cdef double dRE = k[8]*R*E-t4-t5-d[6]*RE

    dy = [dM,dE,dCD,dCE,dR,dRP,dRE]

    return dy

def main():
    cdef np.ndarray[double,ndim=1] t = np.zeros(10000)
    t = np.linspace(0.,3000.,10000.)
    # Initial concentrations of [M,E,CD,CE,R,RP,RE]
    cdef np.ndarray[double,ndim=1] y0 = np.array([0.,0.,0.,0.,0.4,0.,0.25])
    cdef np.ndarray[double,ndim=2] E_simulated = np.zeros([10000,5000])
    cdef np.ndarray[double,ndim=2] r = np.zeros([10000,7])
    cdef np.ndarray[double,ndim=1] E_avg = np.zeros([10000])
    cdef np.ndarray[double,ndim=1] k = np.zeros([19])
    cdef np.ndarray[double,ndim=1] d = np.zeros([7])
    cdef int i
    for i in range (0,5000):
        k[0] = 1.+0.1*randn(1)
        k[1] = 0.15+0.05*randn(1)
        k[2] = 0.2+0.05*randn(1)
        k[3] = 0.2+0.05*randn(1)
        k[4] = 0.35+0.05*randn(1)
        k[5] = 0.001+0.0001*randn(1)
        k[6] = 0.5+0.05*randn(1)
        k[7] = 0.3+0.05*randn(1)
        k[8] = 30.+5.*randn(1)
        k[9] = 18.+3.*randn(1)
        k[10] = 18.+3.*randn(1)
        k[11] = 18.+3.*randn(1)
        k[12] = 18.+3.*randn(1)
        k[13] = 3.6+0.5*randn(1)
        k[14] = 0.15+0.05*randn(1)
        k[15] = 0.15+0.05*randn(1)
        k[16] = 0.92+0.1*randn(1)
        k[17] = 0.92+0.1*randn(1)
        k[18] = 0.01+0.001*randn(1)
        d[0] = 0.7+0.05*randn(1)
        d[1] = 0.25+0.025*randn(1)
        d[2] = 1.5+0.05*randn(1)
        d[3] = 1.5+0.05*randn(1)
        d[4] = 0.06+0.01*randn(1)
        d[5] = 0.06+0.01*randn(1)
        d[6] = 0.03+0.005*randn(1)
        r = integrate.odeint(myc_rb_e2f,y0,t,args=(k,d))
        E_simulated[:,i] = r[:,1]
    for i in range(0,10000):
        E_avg[i] = sum(E_simulated[i,:])/5000.
    pl.plot(t,E_avg,'-ro')
    pl.show() 
```

Here are some pstats from cProfile on my Python / Numpy code:

`ncalls tottime percall cumtime percall`

`5000 82.505 0.017 236.760 0.047 {scipy.integrate._odepack.odeint}`

`1 1.504 1.504 238.949 238.949 myc_rb_e2f.py:1(<module>)`

`5000 0.025 0.000 236.855 0.047 C:\Python27\lib\site-packages\scipy\integrate\odepack.py:18(odeint)`

`12291237 154.255 0.000 154.255 0.000 myc_rb_e2f.py:7(myc_rb_e2f)`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T08:18:53.357

Change the function definition to include the types of the parameters:

```
def myc_rb_e2f(np.ndarray[double,ndim=1]y, double t, np.ndarray[double, ndim=1] k, np.ndarray[double, ndim=1] d): 
```

This will improve the running time about 3 times over the numpy implementation and 6 - 7 times over your initial cython implementation. Just FYI, I lowered the number of iterations so that I didn't have to wait forever for it to finish while testing. It should scale up with your desired number of iterations.

```
[pkerp@plastilin so]$ time python run_numpy.py

real    0m47.572s
user    0m45.702s
sys     0m0.049s

[pkerp@plastilin so]$ time python run_cython1.py

real    1m14.851s
user    1m12.308s
sys     0m0.135s

[pkerp@plastilin so]$ time python run_cython2.py

real    0m15.774s
user    0m14.115s
sys     0m0.105s 
```

**Edit:**

Also, you don't have to create a new array each time you want to return the results from `myc_rb_e2f`. You can just declare a results array in `main`, pass it in on every call, and then fill it in. It will save you a lot of unnecessary allocation. This more than halves the previous best running time:

```
[pkerp@plastilin so]$ time python run_cython3.py

real    0m6.165s
user    0m4.818s
sys     0m0.152s 
```

And the code:

```
cimport numpy as np
import numpy as np
from numpy import *
import pylab as pl
from pylab import * 
from scipy import integrate

def myc_rb_e2f(np.ndarray[double,ndim=1]y, double t, np.ndarray[double, ndim=1] k, np.ndarray[double, ndim=1] d, np.ndarray[double, ndim=1] res):

    cdef double S = 0.01
    if t > 300.0:
        S = 5.0
    #if t > 400
        #S = 0.01

    cdef double t1 = k[0]*S/(k[7]+S)
    cdef double t2 = k[1]*(y[0]/(k[14]+y[0]))*(y[1]/(k[15]+y[1]))
    cdef double t3 = k[5]*y[0]/(k[14]+y[0])
    cdef double t4 = k[11]*y[2]*y[6]/(k[16]+y[6])
    cdef double t5 = k[12]*y[3]*y[6]/(k[17]+y[6])
    cdef double t6 = k[2]*y[0]/(k[14]+y[0])
    cdef double t7 = k[3]*S/(k[7]+S)
    cdef double t8 = k[6]*y[1]/(k[15]+y[1])
    cdef double t9 = k[13]*y[5]/(k[18]+y[5])
    cdef double t10 = k[9]*y[2]*y[4]/(k[16]+y[4])
    cdef double t11 = k[10]*y[3]*y[4]/(k[17]+y[4])

    cdef double dM = t1-d[0]*y[0]
    cdef double dE = t2+t3+t4+t5-k[8]*y[4]*y[1]-d[1]*y[1]
    cdef double dCD = t6+t7-d[2]*y[2]
    cdef double dCE = t8-d[3]*y[3]
    cdef double dR = k[4]+t9-k[8]*y[4]*y[1]-t10-t11-d[4]*y[4]
    cdef double dRP = t10+t11+t4+t5-t9-d[5]*y[5]
    cdef double dRE = k[8]*y[4]*y[1]-t4-t5-d[6]*y[6]

    res[0] = dM
    res[1] = dE
    res[2] = dCD
    res[3] = dCE
    res[4] = dR
    res[5] = dRP
    res[6] = dRE

    return res

def main():
    cdef np.ndarray[double,ndim=1] t = np.zeros(467)
    cdef np.ndarray[double,ndim=1] results = np.zeros(7)
    t = np.linspace(0.,3000.,467.)
    # Initial concentrations of [M,E,CD,CE,R,RP,RE]
    cdef np.ndarray[double,ndim=1] y0 = np.array([0.,0.,0.,0.,0.4,0.,0.25])
    cdef np.ndarray[double,ndim=2] E_simulated = np.zeros([467,554])
    cdef np.ndarray[double,ndim=2] r = np.zeros([467,7])
    cdef np.ndarray[double,ndim=1] E_avg = np.zeros([467])
    cdef np.ndarray[double,ndim=1] k = np.zeros([19])
    cdef np.ndarray[double,ndim=1] d = np.zeros([7])
    cdef int i
    for i in range (0,554):
        k[0] = 1.+0.1*randn(1)
        k[1] = 0.15+0.05*randn(1)
        k[2] = 0.2+0.05*randn(1)
        k[3] = 0.2+0.05*randn(1)
        k[4] = 0.35+0.05*randn(1)
        k[5] = 0.001+0.0001*randn(1)
        k[6] = 0.5+0.05*randn(1)
        k[7] = 0.3+0.05*randn(1)
        k[8] = 30.+5.*randn(1)
        k[9] = 18.+3.*randn(1)
        k[10] = 18.+3.*randn(1)
        k[11] = 18.+3.*randn(1)
        k[12] = 18.+3.*randn(1)
        k[13] = 3.6+0.5*randn(1)
        k[14] = 0.15+0.05*randn(1)
        k[15] = 0.15+0.05*randn(1)
        k[16] = 0.92+0.1*randn(1)
        k[17] = 0.92+0.1*randn(1)
        k[18] = 0.01+0.001*randn(1)
        d[0] = 0.7+0.05*randn(1)
        d[1] = 0.25+0.025*randn(1)
        d[2] = 1.5+0.05*randn(1)
        d[3] = 1.5+0.05*randn(1)
        d[4] = 0.06+0.01*randn(1)
        d[5] = 0.06+0.01*randn(1)
        d[6] = 0.03+0.005*randn(1)
        r = integrate.odeint(myc_rb_e2f,y0,t,args=(k,d,results))
        E_simulated[:,i] = r[:,1]
    for i in range(0,467):
        E_avg[i] = sum(E_simulated[i,:])/554.
    #pl.plot(t,E_avg,'-ro')
    #pl.show()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-04T08:31:57.717

*disclaimer: I'm one of the core dev of the sub-mentioned tool*

As an alternative, extracting the `myc_rb_e2f` function to a single file and compiling it with [pythran](http://pythonhosted.org/pythran) yields a x5 speedup on my side.

The extracted python code (only a type signature) added:

```
#pythran export myc_rb_e2f(float[], float, float[], float[])
def myc_rb_e2f(y,t,k,d):

    M = y[0]
    E = y[1]
    CD = y[2]
    CE = y[3]
    R = y[4]
    RP = y[5] 
    RE = y[6]

    S = 0.01
    if t > 300:
        S = 5.0
    #if t > 400
        #S = 0.01

    t1 = k[0]*S/(k[7]+S);
    t2 = k[1]*(M/(k[14]+M))*(E/(k[15]+E));
    t3 = k[5]*M/(k[14]+M);
    t4 = k[11]*CD*RE/(k[16]+RE);
    t5 = k[12]*CE*RE/(k[17]+RE);
    t6 = k[2]*M/(k[14]+M);
    t7 = k[3]*S/(k[7]+S);
    t8 = k[6]*E/(k[15]+E);
    t9 = k[13]*RP/(k[18]+RP);
    t10 = k[9]*CD*R/(k[16]+R);
    t11 = k[10]*CE*R/(k[17]+R);

    dM = t1-d[0]*M
    dE = t2+t3+t4+t5-k[8]*R*E-d[1]*E
    dCD = t6+t7-d[2]*CD
    dCE = t8-d[3]*CE
    dR = k[4]+t9-k[8]*R*E-t10-t11-d[4]*R
    dRP = t10+t11+t4+t5-t9-d[5]*RP
    dRE = k[8]*R*E-t4-t5-d[6]*RE

    dy = [dM,dE,dCD,dCE,dR,dRP,dRE]

    return dy 
```

compiled with:

```
> pythran myc.py 
```

And imported with `from myc import myc_rb_e2f` in place of the function definition.

The original code runs in `103.46s` on my laptop, the one calling the pythran-compiled routine runs in `22.23s`.

# javascript - 更改js文件后如何使更改立即生效？

> ID：13044518
> 
> 赞同：1
> 
> 时间：2012-10-24T07:20:01.863
> 
> 标签：javascript, jakarta-ee, myeclipse

我正在 MyEclipse 中编辑一个 JavaScript 文件。

当我尝试更改某些内容时，我目前必须重新启动 Tomcat。

如果我不这样做，更改将不会生效。

顺便说一句，我正在使用 Chrome。

有没有一种好方法可以让我的更改在不重新启动 Tomcat 的情况下立即生效？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:21:47.037

完成编辑后，您可以简单地将 JavaScript 文件复制到部署目录中。

部署目录是 Tomcat 在构建和部署时放置文件的位置。

我不知道Tomcat的确切位置，但应该很容易确定。

我通常使用一个小的 shell 脚本来使这更方便。

# javascript - 将数字格式化为时间，例如 hh:mm

> ID：13044520
> 
> 赞同：4
> 
> 时间：2012-10-24T07:20:23.950
> 
> 标签：javascript, jquery, formatting, format

我有一个输入字段：

```
<input type="text" name="time" class="time" value="3" /> 
```

我需要这个值就像 03:00

我需要的更多示例：

```
1 = 01:00
12 = 12:00
12:2 = 12:20
2:2 = 02:20
02:2 = 02:20
340 = 340:00
340:1 = 340:10 
```

你知道其余的。如何在 jquery/javascript 中解决这个问题？

这是我在 jQuery 中尝试的：

```
$('input').blur(timeFormat);

function timeFormat(e){
    skjema.find('input.tid').each(function(){
        if($(this).val().length != 0){
            var tid = $(this).val().toString();

            if(tid.length == 1){

                $(this).val(String("0" + tid));

            }
            if(tid.indexOf(':') == -1){
                $(this).val(tid.toString() + ':00');
            }
        }
    });
} 
```

这就是我现在所做的，它可以完成这项工作，但它有点笨重:)

```
function timeFormat(e){
    skjema.find('input.tid').each(function(){
        if($(this).val().length != 0){
            var tid = $(this).val().toString();
            tid = (tid.length == 1) ? '0' + tid : tid;
            tid = (tid.indexOf(':') == -1) ? tid + ':00' : tid;
            if(tid.indexOf(':') != -1){
                var arr = tid.split(':');
                var before = arr[0].toString();
                var after = arr[1].toString();
                before = (before.length == 0) ? '00' : before;
                before = (before.length == 1) ? '0' + before : before;
                after = (after.length == 0) ? '00' : after;
                after = (after.length == 1) ? after + '0' : after;
                console.log('before: ' + before + ' After: ' + after);
                tid = before + ':' + after;
            }
        }
        $(this).val(tid);
    });
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T07:46:51.563

您可以使用一些简单的正则表达式来做到这一点：

```
function time( str ) {
    if ( !/:/.test( str ) ) { str += ':00'; }
    return str.replace(/^\d{1}:/, '0$&').replace(/:\d{1}$/, '$&0' );
} 
```

如果要确保只接受预期的格式，请在函数顶部添加以下行：

```
if ( /[^:\d]/.test( str ) ) { return false; } 
```

**演示：http:** [//jsfiddle.net/elclanrs/MzgMz/](http://jsfiddle.net/elclanrs/MzgMz/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T07:27:22.977

[您可以使用datejs](http://www.datejs.com/)库尝试这样的事情：-

```
 var dateString = "12";
 var date = new Date.parseExact(dateString, "hh:mm"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T07:40:35.263

检查这个[演示](http://jsfiddle.net/vcQjb/)

```
$('input').blur(timeFormat);

function timeFormat(e){ 
    $("div").find('input').each(function(){
        if($(this).val().length != 0){
            var tid = $(this).val().toString();

            if(tid.length == 1){

                $(this).val(String("0" + tid));

            }
            if(tid.indexOf(':') == -1){
                $(this).val(tid.toString() + ':00');
            }
            if(tid.indexOf(':') == 2){
                $(this).val(tid.toString() + '0');
            }
        }
    });
}​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-10T18:05:43.107

```
<title>Insert Colon in the Time Format</title>

<script type="text/javascript">
function formatTime(objFormField){
intFieldLength = objFormField.value.length;

if(intFieldLength==2 || intFieldLength == 2){
     objFormField.value = objFormField.value + ":";
     return false;
    } 
}
</script>

Enter time <input type="text" maxlength="5" minlength="5" onKeyPress="formatTime(this)"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T07:29:54.180

伪：

1.  `val`← 字段值 ( `$('.time').val()`)
2.  `colonPos`← `.`in的位置`val`
3.  如果`colonPos`等于 -1，`result`←`padZero(val) + ':00'`
4.  否则，`result`←`padZero(val[:colonPos]) + ':' + padZero(val[colonPos + 1:])`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T08:18:31.313

```
function prettyTime(t){
  // will output a time providing leading zeros and minute field
  // (doesn't need jQuery)

  x=t.split(":");

  for (var i=0; i<2; i++)
    x[i] = (x[i]) ? Array(3-x[i].length).join('0') + x[i] : '00';

  return x.join(":");

}

// --

$('input').blur(timeFormat);

function timeFormat(e){
    skjema.find('input.tid').each(function(){

        $(this).val(function(i, v) { return prettyTime(v); })

    });
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-12-05T18:02:17.797

也许你可以试试 [这个](http://sajjansarkar.blogspot.com/2012/11/jquery-plugin-to-convert-textbox-to.html)插件..为我工作

**用法示例：**

```
$("#tbPlain").timefield();
$("#tb12Hour").timefield({ 'hourFormat': '12'});
$("#tb24Hour").timefield({ 'hourFormat': '24'});
$("#tbWithInvalidHandler").timefield({ 
        'hourFormat': '24',
        'onError'   : function(){
                alert(this.value+' is not a valid time!');
                this.style.backgroundColor='red';
            }
        });
$("#tbOnOff").timefield();
$("#btnTurnOff").click(function(){
                $("#tbOnOff").timefield('turnOffTimeField');
            }); 
```

**现场示例：**

[https://jsfiddle.net/sajjansarkar/bst3cw2g/](https://jsfiddle.net/sajjansarkar/bst3cw2g/)

# header - 主页上的标题模块幻灯片

> ID：13044521
> 
> 赞同：0
> 
> 时间：2012-10-24T07:20:33.267
> 
> 标签：header, opencart

Opencart 1.5.3.1 如何在页眉的幻灯片中添加模块？只需要在主页上显示。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:38:48.637

尝试使用以下代码包装您只想在主页上显示的代码：

```
if (!isset($this->request->get['route']) || $this->request->get['route'] == 'common/home') {

   //code here

} 
```

# java - 在java中的模式匹配方面需要帮助

> ID：13044522
> 
> 赞同：1
> 
> 时间：2012-10-24T07:20:37.220
> 
> 标签：java, regex

我有输入字符串

```
String str = "IN Param - {Parameter|String}{Parameter|String}  Out Param - {Parameter   Label|String}{Parameter Label2|String}"; 
```

我应该能够得到

> {参数|字符串}{参数|字符串}

来自 In Param 和

> {参数标签|字符串}{参数标签2|字符串}

从输出参数。

再次在 In Param 中，我应该能够获取参数和字符串。正则表达式匹配Java怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T07:32:33.523

可以通过组

所以正则表达式是：

```
"\\{(.*?)\\|(.*?)\\}" 
```

**Group1**捕获参数

**Group2**捕获字符串

在这个正则表达式`{(.*?)|`中，匹配 0 到 n 个以开头`{`和结尾的字符，`|`并将结果存储在 group1 中，排除`{`和`|`..这与发生类似，`|(.*?)}`但它将结果存储在 group2..

[在这里](http://fiddle.re/80dp)试试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:33:37.827

```
Pattern p = Pattern.compile("\\{([^|]+)\\|([^}]+)\\}");
Matcher m = p.matcher(str);
while (m.find()) {
    String label = m.group(1);
    String value = m.group(2);
    // do what you need with them
} 
```

# php - 如何设置我自己的 XML API 服务器？

> ID：13044523
> 
> 赞同：0
> 
> 时间：2012-10-24T07:20:37.907
> 
> 标签：php, xml, api

我运行一个基于 LAMP 的 Web 服务器，拥有一个 API 会很有用。

基本上，我需要一个脚本，它可以通过 GET 或 POST 接收请求，针对身份验证用户列表进行身份验证，运行 mysql 查询并以 XML 格式返回结果。

在通过从头开始这样的脚本来重新发明轮子之前，我想知道是否有一个 PHP 类或基本脚本可以用作起点。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:15:57.537

我个人建议你使用[slim 框架](http://www.slimframework.com/)，它是一个非常轻量级但全面的框架，可以帮助你实现你所需要的。[它集成到任何脚本中，并通过slim-extras](https://github.com/codeguy/Slim-Extras) auth 中间件轻松支持身份验证。

# cloudbees - 在 run@cloud 中使用 CloudBees SDK 的应用程序的最新部署消息

> ID：13044524
> 
> 赞同：0
> 
> 时间：2012-10-24T07:20:39.747
> 
> 标签：cloudbees

*Bees app:list*命令显示应用程序的名称、状态、URL 和实例计数，但有没有办法查看最新的提交消息？

我们将提交消息设置为生成已部署 WAR 的源的 Git 修订版，并且无需从 RUN 控制台 wep 应用程序中查看每个应用程序当前正在运行的版本会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T00:43:39.160

不幸的是，bees app:info 显示了更多信息，但没有显示部署消息。这可能是一个很好的补充，我会继续下去。

bees app:info 将显示确切的部署时间，如果有帮助的话。

# templates - 使用 C# 或 MVC 输出 HTML 模板

> ID：13044526
> 
> 赞同：0
> 
> 时间：2012-10-24T07:20:54.957
> 
> 标签：templates, content-management-system, tags

我在网上浏览了有关如何让 C# 输出 HTML 文件的指南。我还需要能够在 HTML 文件中部署自定义标签，它应该从 SQL 输出数据。

有没有人可以举个例子，或者知道教程？

基本上我正在尝试开发一个简单的 CMS，用户可以在其中上传一个 html 文件，然后使用 html 文件中的预定义标签定义动态内容，如@Header、@Text 等。

# jquery - 对 python 应用程序引擎执行 jQuery.post 时未解码 JSON 对象

> ID：13044527
> 
> 赞同：1
> 
> 时间：2012-10-24T07:21:00.480
> 
> 标签：jquery, json, google-app-engine, python-2.7, jquery-post

我已经在应用程序引擎上工作了一段时间，从那以后这个问题一直困扰着我。找不到解决方案，所以我想我已经问过了。

我在应用引擎服务器的 python 中得到了一个简单的后处理程序。我正在做一个 jQuery 帖子。两者的代码都是这样的

主文件

```
import json
...

class SomeHandler(webapp2.RequestHandler):
   def post(self):
      data = json.loads(self.request.body)
      return self.response.out.write(json.dumps(data)) 
```

和 jQuery 帖子

```
jQuery.post('/quiz',
{name:'some problem 2',desc:'some submitted 2',questions:[{question:'question1'}]},
function(data,textStatus, jqXHR){console.log('POST response: ');console.log(data);}); 
```

当我这样做时，我收到以下错误

```
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "/Users/adityarao/appengine/Quiz_1/main.py", line 121, in post
    data = json.loads(self.request.body)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py", line 326, in loads
    return _default_decoder.decode(s)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py", line 366, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py", line 384, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded 
```

一种解决方法是单独获取请求参数（request.body.get("some_param")），但我发现它很乏味并且在处理列表参数时不起作用。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T07:31:00.040

诀窍是您发布的不是`application/json`数据而是`application/x-www-form-urlencoded`数据，您应该使用如下代码：

```
$.ajax({
    type: 'POST',
    url: '/quiz',
    data: JSON.stringify({ name: 'some problem 2', desc: 'some submitted 2', questions: [ { question: 'question1' } ] }),
    contentType: 'application/json',
    success: function(data,textStatus, jqXHR) {
        console.log('POST response: ');
        console.log(data);
    }
}); 
```

# php - 运行关联数组的抛出数组并找到键

> ID：13044528
> 
> 赞同：2
> 
> 时间：2012-10-24T07:21:05.207
> 
> 标签：php, arrays, loops

我有两个看起来像这样的数组：

（这个按*value_max 排序*）

```
$max_values = [
    ["name" => "john", "id" => 5, "value_max" => 500], 
    ["name" => "john", "id" => 3, "value_max" => 200], 
    ...
];

$min_values = [
    ["name" => "john", "id" => 5, "value_min" => 100], 
    ["name" => "john", "id" => 3, "value_min" => 150], 
    ...
]; 
```

我需要有一个像这样的最终数组：

（这个仍然需要按*value_max 排序*，所以我假设我可以用第二个完成的计算覆盖第一个数组）

```
$max_and_difference_values = [
    ["name" => "john", "id" => 5, "value_max" => 500, "difference_value" => 400],
    ["name" => "john", "id" => 3, "value_max" => 200, "difference_value" => 50 ], 
    ...
]; 
```

我的问题很直接：遍历第一个数组并构建最后一个数组的最佳/有效方法是什么。假设数组的大小可以是大约 150 个元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:28:11.573

为避免重复循环遍历所有数组，请按要合并的字段（即`'id'`键）索引一个数组：

```
$second = array_combine(array_map(function ($i) { return $i['id']; }, $second_array), $second_array); 
```

然后遍历另一个并比较值非常容易：

```
$third = array();
foreach ($first_array as $i) {
    $third[] = $i + array('difference_value' => $i['value_max'] - $second[$i['id']]['value_min']);
} 
```

如果保证两个数组都具有完全匹配的键，您甚至不需要第一步，只需使用现有的键即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:56:30.317

这将对您的数组进行排序。所以你可以对第二个数组进行排序。

```
<?php
$min_values = array(
    array("name" => "john", "id" => 5, "value_min" => 100), 
    array("name" => "john", "id" => 3, "value_min" => 150), 

);

function aasort (&$array, $key) {
    $sorter=array();
    $ret=array();
    reset($array);
    foreach ($array as $ii => $va) {
        $sorter[$ii]=$va[$key];
    }
    asort($sorter);
    foreach ($sorter as $ii => $va) {
        $ret[$ii]=$array[$ii];
    }
    $array=$ret;
}

aasort($min_values,"id");

echo "<pre>";
print_r($min_values);
echo "</pre>";
?> 
```

然后你可以使用 Alessandro Minoccheri 提到的逻辑。

```
$arr = array();
for ($i=0; $i<count($first_array);$i++){
$arr['name'] = $first_array[$i]['name'];
$arr['id'] = $first_array[$i]['id'];
$arr['value_max'] = $first_array[$i]['value_max'];
$arr['difference_value'] = $first_array[$i]['value_max']-$second[$i['id']]['value_max']    ; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:59:31.633

由于您没有共享具有最小值的第二个数组的排序方式（本身以及相对于最大值数组），我会说，通过 id 条目索引最小值，然后在第二次迭代中进行计算。它应该足够快，150 个元素只是“没什么”：

```
$max_values = [
    ["name" => "john", "id" => 5, "value_max" => 500],
    ["name" => "john", "id" => 3, "value_max" => 200],
];

$min_values = [
    ["name" => "john", "id" => 5, "value_min" => 100],
    ["name" => "john", "id" => 3, "value_min" => 150],
];

$min_values_by_id = [];
foreach($min_values as $min) {
    $min_values_by_id[$min['id']] = $min['value_min'];
}

$max_and_difference_values = $max_values;
foreach($max_and_difference_values as &$entry)
{
    $entry['difference_value'] = $entry['value_max'] - $min_values_by_id[$entry['id']];
}
unset($entry);

print_r($max_and_difference_values); 
```

这只是一个简单的例子，没什么特别的。[演示](http://codepad.viper-7.com/wFBxc3)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T08:06:40.573

以下对我有用。不过，我不是 PHP 专家，即我对克隆不太熟悉（请注意空的克隆数组）。请注意，它只复制现有属性（如果一个数组确实包含 min_value 而另一个数组只包含其他键）

在本质上

```
function convertArr( $arr ) {

    // Easy referencing without having to search through the arrays more than once for a matching id
    $new_arr = array();

    foreach( $arr as $array ) {

        $new_arr[ $array['id'] ] = cloneArr( $array );
    }

    return $new_arr;
}

function merge( $arr1, $arr2 ) {

    $convertedArr1 = convertArr( $arr1 );
    $convertedArr2 = convertArr( $arr2 );

    $arr = array();

    // Based on the ordered array
    foreach( $convertedArr1 as $array ) {

        $id = $array['id'];
        $tempArr = array();

        foreach( $convertedArr1[ $id ] as $k => $v ) {

            $tempArr[ $k ] = $v;
        }

        foreach( $convertedArr2[ $id ] as $k => $v ) {

            $tempArr[ $k ] = $v;
        }

        array_push( $arr, $tempArr );
    }

    return $arr;
} 
```

完整示例：

```
<?php

    //$arr1 = [ ["name" => "john", "id" => 5, "value_max" => 500], ["name" => "john", "id" => 3, "value_max" => 200] ];
    //$arr2 = [ ["name" => "john", "id" => 5, "value_min" => 100], ["name" => "john", "id" => 3, "value_min" => 150] ];

    $arr1 = array(

        array( "name" => "john", "id" => 5, "value_max" => 500 ),
        array( "name" => "john", "id" => 3, "value_max" => 200 )

    );

    $arr2 = array(

        array( "name" => "john", "id" => 5, "value_min" => 100 ),
        array( "name" => "john", "id" => 3, "value_min" => 150 )
    );

    function neatPrint( $arr ) {

        echo "<pre>";
        print_r( $arr );
        echo "</pre>";
    }

    echo "<h2>Before</h2>";
    neatPrint( $arr1 );
    neatPrint( $arr2 );
    echo "<hr/>";

    function cloneArr( $old ) {

        // I dunno how to properly clone
        return $old;
    }

    function convertArr( $arr ) {

        // Easy referencing without having to search through the arrays more than once for a matching id
        $new_arr = array();

        foreach( $arr as $array ) {

            $new_arr[ $array['id'] ] = cloneArr( $array );
        }

        return $new_arr;
    }

    function merge( $arr1, $arr2 ) {

        $convertedArr1 = convertArr( $arr1 );
        $convertedArr2 = convertArr( $arr2 );

        $arr = array();

        // Based on the ordered array
        foreach( $convertedArr1 as $array ) {

            $id = $array['id'];
            $tempArr = array();

            neatPrint( $convertedArr1[ $id ] );
            neatPrint( $convertedArr2[ $id ] );

            foreach( $convertedArr1[ $id ] as $k => $v ) {

                $tempArr[ $k ] = $v;
            }

            foreach( $convertedArr2[ $id ] as $k => $v ) {

                $tempArr[ $k ] = $v;
            }

            array_push( $arr, $tempArr );
        }

        echo "<h2>Result</h2>";
        return $arr;
    }

    echo "<h2>Loopthrough</h2>";

    neatPrint( merge( $arr1, $arr2 ) );
?> 
```

让我知道你的想法 ：-）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-24T07:29:49.967

如果元素是有序的，请尝试以下代码：

```
$arr = array();
for ($i=0; $i<count($first_array);$i++){
   $arr['name'] = $first_array[$i]['name'];
   $arr['id'] = $first_array[$i]['id'];
   $arr['value_max'] = $first_array[$i]['value_max'];
   $arr['difference_value'] = $first_array[$i]['value_max']-$second[$i['id']]['value_max'] ;
} 
```

# xml - 将 XML 从 URL 转换为字符串

> ID：13044532
> 
> 赞同：-1
> 
> 时间：2012-10-24T07:21:18.577
> 
> 标签：xml, vb.net

我需要从[URL](http://kunder.apsis.se/APIv3/Input/AddSubscribersFromXmlToQueue_xmldata_namemaping_false.xml)中获取 XML 数据并将其全部放入字符串中。请告诉我最好的方法。我知道如何在 Java 中做到这一点，但现在我想在 VB.Net 中做到这一点，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:25:47.767

如果您在 Google 中搜索，第一个结果是[http://vb.net-informations.com/communications/vb.net_read_url.htm](http://vb.net-informations.com/communications/vb.net_read_url.htm)：

```
Imports System.Net
Imports System.IO
Public Class Form1
    Private Sub Button1_Click(ByVal sender As System.Object, _
    ByVal e As System.EventArgs) Handles Button1.Click
        Dim inStream As StreamReader
        Dim webRequest As WebRequest
        Dim webresponse As WebResponse
        webRequest = webRequest.Create(TextBox1.Text)
        webresponse = webRequest.GetResponse()
        inStream = New StreamReader(webresponse.GetResponseStream())
        TextBox2.Text = inStream.ReadToEnd()
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:45:59.660

你应该看看[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)。[NuGet 项目页面](http://nuget.org/packages/HtmlAgilityPack)上提供了最新版本。

然后下载您的字符串将非常简单：

```
HtmlWeb web = new HtmlWeb();
HtmlDocument doc = web.Load("http://kunder.apsis.se/APIv3/Input/AddSubscribersFromXmlToQueue_xmldata_namemaping_false.xml");

// This is your xaml file content as a single string
string xmlAsString = doc.DocumentNode.OuterHtml;a string 
```

我不熟悉VB.NET，但这肯定不应该有任何翻译问题。:-)

# spring - 接口实现变更切入点解读

> ID：13044541
> 
> 赞同：0
> 
> 时间：2012-10-24T07:22:18.303
> 
> 标签：spring, spring-aop

我想在用@Controller 注释的类中选择所有用@RequestMapping 注释的方法。

以下切入点定义工作正常......在某些情况下：

```
@within(org.springframework.stereotype.Controller)
    and
@annotation(org.springframework.web.bind.annotation.RequestMapping) 
```

问题是，一旦@Controller-annotated 类实现了某个接口，切入点就不再适用，并且方法不会被拦截。这甚至发生在我刚刚实现 java.io.Serializable 时。

例如，这不起作用，但只要我删除“ *implements Serializable* ”，它就会起作用：

```
@Controller
public class TestController extends BaseController implements Serializable {
    @RequestMapping(value = "/test")
    public String testAuth1(final Model model) {
        return "test";
    }
} 
```

春季 XML 配置：

```
<aop:config>
    <aop:pointcut id="handlerMethods"
        expression="@within(org.springframework.stereotype.Controller) and @annotation(org.springframework.web.bind.annotation.RequestMapping)" />
    <aop:aspect ref="handlerAdvice">
        <aop:before method="interceptionMethod" pointcut-ref="handlerMethods" />
    </aop:aspect>
</aop:config> 
```

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:23:54.137

是否`BaseController`实现任何接口？

似乎您正在创建一个 cglib 代理，直到您添加接口实现，所以更简单的尝试解决它是添加`proxy-target-class = "true"`到`<aop:config>`：

```
<aop:config proxy-target-class="true">
...
</aop:config> 
```

如果要使用 JDK 代理，则需要将注释移动到接口，否则 spring mvc 将看不到它们。

# prototypejs - 原型，在未来元素上添加类名

> ID：13044547
> 
> 赞同：0
> 
> 时间：2012-10-24T07:23:02.317
> 
> 标签：prototypejs

我正在尝试通过 addClassName 在带有 Prototype 的页面上的未来元素上附加一个类，但是我似乎确实有点挣扎。我知道 jQuery 的 .live 功能，但我在 Prototype 中找不到类似的功能。

# extjs - 动态创建 iframe 内容

> ID：13044558
> 
> 赞同：1
> 
> 时间：2012-10-24T07:24:09.263
> 
> 标签：extjs, extjs4

我目前在 Zend Framework 1.9 应用程序中使用 extJS4 作为用户界面。目前，我正在创建一个弹出窗口，我想在其中显示特定数据，具体取决于调用 iframe 的页面所具有的数据。

当我点击相应的按钮时，我已经创建了 iframe

```
 upWin=new Ext.Window({
        title : "iframe",
        width : 300,
        height: 300,
        layout : 'fit',
        items : [{
            xtype : "component",
            autoEl : {
                tag : "iframe",
                src : "<?= $this->baseUrl("/mytest.php")?>"
            }
        }]
        });
    upWin.show(); 
```

我的问题是如何将所需的内容/数据传输到其中。如果可能的话，我不想在那里使用 GET 参数，那么还有其他选择吗？（我在 mytest.php 中需要的数据示例是 id 和标题文本，....所以我不需要为使用此 iframe 的每个变体创建一个新的 .php 页面）。

编辑：为了更清楚地表述它...... get 参数或 URL 参数是我不想使用的东西（因此我不想使用 /mytest.php?param1=value1¶m2=value2\. .......如果可以避免）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:43:32.710

您可以在 php 中将所需的数据作为 url 中的参数发送（例如 mytest.php?param1=value1¶m2=value2¶m3=value3&....）

php 提供函数来访问上述 url 参数的值... google it

# python - Python - 识别压缩文件类型和解压缩的机制

> ID：13044562
> 
> 赞同：28
> 
> 时间：2012-10-24T07:24:35.720
> 
> 标签：python, compression, zip, tar, rar

压缩文件可以分为以下逻辑组
a. 您正在使用的操作系统（*ix、Win）等。
b．不同类型的压缩算法（即.zip、.Z、.bz2、.rar、.gzip）。至少来自最常用的压缩文件的标准列表。
C。然后我们有焦油球机制——我想那里没有压缩。但它更像是一个串联。

现在，如果我们开始处理上述一组压缩文件，
a. 选项 (a) 将由 python 处理，因为它是独立于平台的语言。
湾。选项（b）和（c）似乎有问题。

**我需要什么我**
如何识别文件类型（压缩类型）然后解压缩它们？

* * *

像：

```
fileType = getFileType(fileName)  
switch(fileType):  
case .rar:  unrar....
case .zip:  unzip....

etc 
```

* * *

所以根本的问题是我们如何根据文件识别压缩算法（假设没有提供扩展名或不正确）？在 python 中有没有特定的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-24T07:53:38.823

[这个页面](http://www.garykessler.net/library/file_sigs.html)有一个“魔法”文件签名列表。抓住你需要的那些，把它们放在像下面这样的字典里。然后我们需要一个函数来匹配 dict 键和文件的开头。我写了一个建议，尽管它可以通过预处理来优化，`magic_dict`例如一个巨大的编译正则表达式。

```
magic_dict = {
    "\x1f\x8b\x08": "gz",
    "\x42\x5a\x68": "bz2",
    "\x50\x4b\x03\x04": "zip"
    }

max_len = max(len(x) for x in magic_dict)

def file_type(filename):
    with open(filename) as f:
        file_start = f.read(max_len)
    for magic, filetype in magic_dict.items():
        if file_start.startswith(magic):
            return filetype
    return "no match" 
```

这个解决方案应该是跨平台的，当然不依赖于文件扩展名，但它可能会给随机内容的文件带来误报，这些文件恰好以某些特定的魔术字节开头。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-24T08:57:42.947

根据lazer的回答和我的评论，我的意思是：

```
class CompressedFile (object):
    magic = None
    file_type = None
    mime_type = None
    proper_extension = None

    def __init__(self, f):
        # f is an open file or file like object
        self.f = f
        self.accessor = self.open()

    @classmethod
    def is_magic(self, data):
        return data.startswith(self.magic)

    def open(self):
        return None

import zipfile

class ZIPFile (CompressedFile):
    magic = '\x50\x4b\x03\x04'
    file_type = 'zip'
    mime_type = 'compressed/zip'

    def open(self):
        return zipfile.ZipFile(self.f)

import bz2

class BZ2File (CompressedFile):
    magic = '\x42\x5a\x68'
    file_type = 'bz2'
    mime_type = 'compressed/bz2'

    def open(self):
        return bz2.BZ2File(self.f)

import gzip

class GZFile (CompressedFile):
    magic = '\x1f\x8b\x08'
    file_type = 'gz'
    mime_type = 'compressed/gz'

    def open(self):
        return gzip.GzipFile(self.f)

# factory function to create a suitable instance for accessing files
def get_compressed_file(filename):
    with file(filename, 'rb') as f:
        start_of_file = f.read(1024)
        f.seek(0)
        for cls in (ZIPFile, BZ2File, GZFile):
            if cls.is_magic(start_of_file):
                return cls(f)

        return None

filename='test.zip'
cf = get_compressed_file(filename)
if cf is not None:
    print filename, 'is a', cf.mime_type, 'file'
    print cf.accessor 
```

现在可以使用`cf.accessor`. 所有模块都提供了类似的方法，如“read()”、“write()”等。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T07:32:36.970

这是一个复杂的问题，取决于许多因素：最重要的是您的解决方案需要具有多大的可移植性。

查找给定文件的文件类型背后的基础是在文件中找到一个标识头，通常称为[“魔术序列”或签名头](http://en.wikipedia.org/wiki/List_of_file_signatures)，它标识文件属于某种类型。如果可以避免，通常不使用其名称或扩展名。对于某些文件，Python 内置了这个。例如，处理`.tar`文件，可以使用`tarfile`模块，它有一个方便的`is_tarfile`方法。有一个类似的模块名为`zipfile`. 这些模块还可以让您在纯 Python 中提取文件。

例如：

```
f = file('myfile','r')
if zipfile.is_zipfile(f):
    zip = zipfile.ZipFile(f)
    zip.extractall('/dest/dir')
elif tarfile.is_tarfile(f):
    ... 
```

如果您的解决方案仅适用于 Linux 或 OSX，那么还有可以`file`为您完成大量工作的命令。您还可以使用内置工具解压缩文件。如果你只是做一个简单的脚本，这个方法更简单，会给你更好的性能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-13T22:52:46.510

接受的解决方案看起来不错，但它不适用于 python-3，以下是使其工作的修改——使用二进制 I/O 而不是字符串：

```
magic_dict = {
    b"\x1f\x8b\x08": "gz",
    b"\x42\x5a\x68": "bz2",
    b"\x50\x4b\x03\x04": "zip"
    }
''' SKIP '''
    with open(filename, "rb") as f:
''' The rest is the same ''' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T07:28:49.420

“a”是完全错误的。

“b”很容易被错误地解释，因为“.zip”并不意味着该文件实际上是一个 zip 文件。它可能是带有 zip 扩展名的 JPEG（如果您愿意，出于混淆目的）。

您实际上需要检查文件中的数据是否与扩展名预期的数据相匹配。也看看[魔术字节](http://en.wikipedia.org/wiki/Magic_number_%28programming%29)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T09:17:50.277

如果练习只是为了标记文件而识别它，那么您有很多答案。如果您想解压缩存档，为什么不尝试捕获执行/错误？例如：

```
>>> tarfile.is_tarfile('lala.txt')
False
>>> zipfile.is_zipfile('lala.txt')
False
>>> with bz2.BZ2File('startup.bat','r') as f:
...    f.read()
...
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
IOError: invalid data stream 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-28T01:05:35.817

2019 年更新：
我正在寻找一种解决方案来检测 .csv 文件是否被 gzip 压缩。@Lauritz 给出的答案对我来说是错误的，我想这只是因为在过去 7 年中读取文件的方式发生了变化。

这个库非常适合我！ [https://pypi.org/project/filetype/](https://pypi.org/project/filetype/)

# sql-server-2008 - 如何计算最大来电峰值？

> ID：13044565
> 
> 赞同：0
> 
> 时间：2012-10-24T07:24:43.470
> 
> 标签：sql-server-2008, tsql, datetime, date-range

这是数据库的一部分：

```
SessionID    SessionStartTime              SessionCloseTime
24       2012-10-16 01:00:06.000           2012-10-16 01:01:22.000
24       2012-10-16 01:00:08.000           2012-10-16 01:01:10.000
24       2012-10-16 01:00:16.000           2012-10-16 01:01:12.000
24       2012-10-16 01:00:30.000           2012-10-16 01:01:48.000
24       2012-10-16 01:00:41.000           2012-10-16 01:02:08.000
24       2012-10-16 01:00:48.000           2012-10-16 01:01:34.000
24       2012-10-16 01:00:56.000           2012-10-16 01:03:09.000
24       2012-10-16 01:01:02.000           2012-10-16 01:02:13.000
24       2012-10-16 01:01:05.000           2012-10-16 01:03:16.000
24       2012-10-16 01:01:09.000           2012-10-16 01:02:42.000
24       2012-10-16 01:01:15.000           2012-10-16 01:02:48.000
24       2012-10-16 01:01:18.000           2012-10-16 01:02:14.000
24       2012-10-16 01:01:18.000           2012-10-16 01:02:06.000
24       2012-10-16 01:01:42.000           2012-10-16 01:03:16.000
24       2012-10-16 01:01:45.000           2012-10-16 01:03:04.000 
```

在这个数据库中，我想计算最大调用峰值。换句话说，最多同时发生多少呼叫。我在呼叫中心工作，我将使用这些记录生成报告。SessionID = 24 代表来电。任何建议、线索或计算方法都会对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:58:49.980

通话开始时，通话次数会增加。通话结束时，通话次数会减少。所以...

```
;with cte as
(
    select SessionStartTime as changetime,1 as CC from yourtable
    union all
    select SessionCloseTime,-1 from yourtable
)
    select top 1 changetime,rt from
    (
    select * from cte
        cross apply 
        (select SUM(cc) as rt from cte c where c.changetime<=cte.changetime) rt         
    ) v
    order by rt desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:56:06.437

在这种情况下，听起来您需要一个数字表来加入会话存活的秒数。该表必须设置为您能够查询的最大时间长度（以秒为单位）。

使用这样的表，您可以编写如下查询：

```
CREATE TABLE Numbers 
( 
    Number INT IDENTITY(1,1) PRIMARY KEY CLUSTERED 
) 

WHILE COALESCE(SCOPE_IDENTITY(), 0) <= 1000000
BEGIN 
    INSERT #Numbers DEFAULT VALUES 
END

CREATE TABLE #Calls
(
    SessionID int,
    SessionStartTime datetime,
    SessionCloseTime datetime
)

INSERT INTO #Calls VALUES (24, '2012-10-16 01:00:06.000', '2012-10-16 01:01:22.000')
INSERT INTO #Calls VALUES (24, '2012-10-16 01:00:08.000', '2012-10-16 01:01:10.000')
INSERT INTO #Calls VALUES (24, '2012-10-16 01:00:16.000', '2012-10-16 01:01:12.000')
INSERT INTO #Calls VALUES (24, '2012-10-16 01:00:30.000', '2012-10-16 01:01:48.000')
INSERT INTO #Calls VALUES (24, '2012-10-16 01:00:41.000', '2012-10-16 01:02:08.000')
INSERT INTO #Calls VALUES (24, '2012-10-16 01:00:48.000', '2012-10-16 01:01:34.000')
INSERT INTO #Calls VALUES (24, '2012-10-16 01:00:56.000', '2012-10-16 01:03:09.000')
INSERT INTO #Calls VALUES (24, '2012-10-16 01:01:02.000', '2012-10-16 01:02:13.000')
INSERT INTO #Calls VALUES (24, '2012-10-16 01:01:05.000', '2012-10-16 01:03:16.000')
INSERT INTO #Calls VALUES (24, '2012-10-16 01:01:09.000', '2012-10-16 01:02:42.000')
INSERT INTO #Calls VALUES (24, '2012-10-16 01:01:15.000', '2012-10-16 01:02:48.000')
INSERT INTO #Calls VALUES (24, '2012-10-16 01:01:18.000', '2012-10-16 01:02:14.000')
INSERT INTO #Calls VALUES (24, '2012-10-16 01:01:18.000', '2012-10-16 01:02:06.000')
INSERT INTO #Calls VALUES (24, '2012-10-16 01:01:42.000', '2012-10-16 01:03:16.000')
INSERT INTO #Calls VALUES (24, '2012-10-16 01:01:45.000', '2012-10-16 01:03:04.000')

SELECT TOP 1 DATEADD(SECOND, Number, SessionStartTime) CallTime, COUNT(C.SessionId) NoOfCalls FROM #Calls C
INNER JOIN #Numbers N ON N.Number <= DATEDIFF(SECOND, C.SessionStartTime, C.SessionCloseTime) --Join number of seconds between start and end time
GROUP BY DATEADD(SECOND, Number, SessionStartTime)
ORDER BY NoOfCalls DESC 
```

此查询给出结果：

这些时间有 11 个电话：（当然是其中的前 1 个）

2012-10-16 01:01:47.000
2012-10-16 01:01:22.000
2012-10-16 01:01:21.000
2012-10-16 01:01:46.000
2012-10-16 01:01:48.000
2012-10-16 01:01:19.000
2012-10-16 01:01:20.000

# web-services - 使用 ESB 的 Web 服务

> ID：13044566
> 
> 赞同：0
> 
> 时间：2012-10-24T07:24:55.650
> 
> 标签：web-services, esb

我有很多他们使用 wsdl 的网络服务。我想使用 ESB 来处理 web 服务之间的关系。不知道选骡子对不对？我搜索这个问题我找到了wso2 esb，我不知道它对我的工作有没有好处。我很困惑。我不知道我该怎么办？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:02:40.620

您也可以使用 Oracle Service Bus。

以下是我为问同样问题的同事做的一些笔记：

关于 ESB 要了解的一件事是它没有完美的定义。范围和作用可能因需要而异。

您可以通过 ESB 做的最重要的事情之一就是将客户端与服务提供者分离

ESB 有助于：

● 服务位置透明

● 整个企业的服务共享

● 将业务服务与服务实现分离

ESB 能力：

**路由**

基于确定性或可变路由标准将客户端请求重定向到特定服务提供商的能力。

要考虑的路由类型：

● 静态或确定性路由

● 基于内容的路由

● 基于策略的路由

● 基于复杂规则的路由

**消息转换**

将客户端请求转换为服务提供商期望的格式的能力。最常用的转换是：

Xml -> Xml

Xml -> Cobol

对象 -> Xml

Xml -> Json 等

**消息执行**

能够根据服务提供的要求丰富、增强作为请求而来的消息。

消息执行的类型：

● 日期格式转换

● 数据转换（例如：将空格转换为 0）

● 基于规则的增强。（例如：如果消息来自 x，则在请求中添加一些信息）

**协议转换**

从消费者那里接受一种协议作为输入（例如 SOAP/JMS）并与服务提供者通信的其他协议（例如：IIOP）的能力

**服务映射** 将业务服务翻译成相应的服务实现并提供绑定和位置信息的能力

**消息处理**

通过接受输入请求并确保通过消息同步传递回客户端来管理状态和执行请求管理的能力。流程编排

管理复杂业务流程的能力，这些流程需要协调多个业务服务来满足单个业务请求。

**服务编排**

管理多个实施服务的协调的能力。

**事务管理**

通过提供跨多个不同服务协调多个资源的框架，为业务服务请求提供单个工作单元的能力（请参阅更多 WS - 协调）

**安全**

保护企业服务免受未经授权访问的能力

ESB 应该提供 4A 的安全性：

1.  验证

2.  授权

3.  审计

4.  行政

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:55:53.020

您对 Mule 和 WSO2 有什么尝试？

所有 ESB 都可以与 WebServices 交互。Mule 和 WSO2 的替代方案是使用[Apache-Camel](http://camel.apache.org/)。他们对 Web 服务有[很好的支持](http://camel.apache.org/spring-web-services.html)。

# hibernate - 休眠 - 双向@OneToOne

> ID：13044567
> 
> 赞同：10
> 
> 时间：2012-10-24T07:24:58.933
> 
> 标签：hibernate, one-to-one

我有 2 个类：User 和 UserPicture，它们具有 1:1 的关系。

```
public class User {
     @Id
     @GeneratedValue(strategy=GenerationType.AUTO)
     @Column(name="id", nullable = false, unique = true)
 private int id;

     private String firstname;

     private String lastname;

     @OneToOne
     @JoinColumn(name = "picture") //field named "picture" in the database
     private UserPicture userPicture;

     ..
}

public class UserPicture {

     @Id
     @GeneratedValue(strategy=GenerationType.AUTO)
     @Column(name="id", nullable = false, unique = true)
     private int id;

     private Blob image;

     @OneToOne
     @JoinColumn(name = "user")
     User user; 
```

将加载 UserPicture 中的“user”，但不会加载 User 中的“userPicture” - 我做错了什么？

**编辑** 必须补充一点，我只是创建一个 UserPicture 并插入它们（使用现有的 userId）-也许我需要在 UserPicture 中级联“用户”？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-24T08:06:51.507

你必须映射你的类。

```
public class User {
    ...
    @OneToOne (mappedBy="user")
    private UserPicture userPicture;
    ...
}

public class UserPicture {
    ...
    @OneToOne
    @JoinColumn (name="user")
    private User user;
    ...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-06T17:56:15.617

关于您的问题：（因为我没有足够的声誉在评论中回复）

“一切都清楚了！只有一个问题，是否有可能使用户中的 userPicture 变得懒惰？ – user1731299 2012-10-24 10:44:07

是的，它 - 可以 - 使其延迟获取。然而，仅仅说“fetchType=FetchType.Lazy”是行不通的。原因是，Hibernate 需要检查连接表以查看它是否为空值，或者那里是否有记录。由于它是一个 OneToOne 映射，Hibernate 认为它可以通过拉回那里的任何数据来保存数据库调用，因为它必须检查它是否为空。x-to-many-mappings 不是这种情况，因为 Hibernate 知道'many' 意味着有一个列表在另一个表上等待......无论是空列表还是填充列表，它仍然是一个列表。对于单个值，它必须区分实际数据和空值。

解决这个问题的方法是告诉 Hibernate，那里总是会有一个值，并且永远不会有空值。知道这一点后，Hibernate 可以创建一个占位符，直到获取该数据为止。您在注释中执行此操作的方式是将“可选 = false”添加到您的 @OneToOne 注释中。

不过要小心！这有一些问题；包括我现在想弄清楚的那个（以及我是如何在这里偶然发现你的问题的）。这个 optional=false 让 Hibernate 做一些额外的验证，似乎让 Hibernate 对它应该如何执行插入感到困惑。因此，您可能希望远离这种惰性获取技术。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-25T23:28:52.817

即使我们在 JoinColumn 注释中将字段指定为不可为空，一对一的延迟加载仍然有效。然而，在双向一对一中，延迟加载在我们使用 mappedBy='' 的实体上不起作用。例如，如果我们有两个实体 Contract 和 House，其中 Contract 表包含 House 的外键。当我们在这里使用双向 OneToOne 并尝试加载合同时，然后延迟加载工作（即 House 没有立即加载）但是当我们尝试加载 House（使用 House 存储库）时，合同总是被急切地获取。有人知道为什么会这样吗？

```
Public class Contract {
  .....
  @onetoone(lazy)
  @JoinColumn(name='houseid', nullable=false)
  Private House house
  .....
}

Public class House {
  .....
  @onetoone(lazy, mappedBy='house')
  Private Contract contract
  .....
} 
```

我知道这只是部分答案，兼问题。但这与这里的讨论非常相关。

# apache - 根据域 url 更改目录索引？

> ID：13044572
> 
> 赞同：0
> 
> 时间：2012-10-24T07:25:19.577
> 
> 标签：apache, .htaccess, mod-rewrite

在 3 域结构中，例如 main.com eng.com 和 esp.com 都共享相同的文件，但 html 内容使用不同的语言。我不想复制和维护 3 组文件，而是想用 3 个“索引”文件处理同一应用程序文件夹中的域。用户将根据域转到 /en.html 或 /es.html，它仅适用于域根。就像一个条件目录索引。

这可能吗？我在想类似的东西（main.com 仍然使用 /index.html）：

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^eng\.com$ [NC]
RewriteRule ^/$ http://eng.com/en.html [R,L]

RewriteCond %{HTTP_HOST} ^esp\.com$ [NC]
RewriteRule ^/$ http://esp.com/es.html [R,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:30:34.577

没有按预期工作，但用 PHP 解决了，不胜感激：

**.htaccess**

```
DirectoryIndex index.php
RewriteEngine on

RewriteCond %{HTTP_HOST} ^(www\.)?esource\.mx$ [NC,OR]
RewriteCond %{HTTP_HOST} ^(www\.)?esource\.com\.mx$ [NC,OR]
RewriteCond %{HTTP_HOST} ^www\.esc-nube\.com$ [NC]
RewriteRule .* http://esc-nube.com/ [R=301,L]

RewriteCond %{HTTP_HOST} ^(www\.)?esource\.us$ [NC,OR]
RewriteCond %{HTTP_HOST} ^www\.esc-cloud\.com$ [NC]
RewriteRule .* http://esc-cloud.com/ [R=301,L]

RewriteCond %{HTTP_HOST} ^www\.esourcecapital\.com$ [NC]
RewriteRule .* http://esourcecapital.com/ [R=301,L] 
```

**索引.php**

```
<?php
$domain = $_SERVER['HTTP_HOST'];

if ($domain == "esourcecapital.com") {
    $filename = "esc.html";
} if ($domain == "esc-nube.com") {
    $filename = "es.html";
} if ($domain == "esc-cloud.com") {
    $filename = "en.html";
}

$handle = fopen($filename, "r");
$contents = fread($handle, filesize($filename));
fclose($handle);

echo $contents;
?> 
```

有什么提速技巧吗？

# javascript - Webkit 浏览器：单击事件处理程序无法正常工作

> ID：13044575
> 
> 赞同：0
> 
> 时间：2012-10-24T07:25:37.497
> 
> 标签：javascript, google-chrome, safari, webkit, click

在我的界面中为按钮“选择所有项目”触发了“点击”事件。此单击事件会触发一个动作以突出显示具有红色背景的所有项目。

它在 Firefox、Opera、IE 中运行良好，但在 Safari 和 Chrome 中却不行。在这些 webkit 浏览器中，单击“全选”按钮后不会出现红色背景。出现按钮单击背景后需要悬停项目。

你能提出任何解决方案吗？

有我的一段js代码：

```
events: {
        'click .select-all-btn': 'selectAll'
    },
selectAll: function() {
        this.$('.nodebox').addClass('node-to-' + this.action + 'checked').removeClass('node-to-' + this.action + '-unchecked');
    }, 
```

和一个适当的CSS：

```
.node-to-delete-checked .node-select
{
    display: block;
    background-color: rgba(121, 0, 0, 0.25);
}

.node-to-delete-unchecked .node-select
{
    display: none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:58:22.107

这是一篇非常有用的文章： http: [//mir.aculo.us/2009/09/25/force-redraw-dom-technique-for-webkit-based-browsers/](http://mir.aculo.us/2009/09/25/force-redraw-dom-technique-for-webkit-based-browsers/)

webkit 浏览器（Safari、Chrome）需要强制重绘。在所描述的情况下，“单击”事件正常工作并更改了元素类。但是浏览器并没有根据新的 css 样式重新绘制它以用于更改的类。

有一个小技巧可以解决这个问题：

```
element.style.webkitTransform = 'scale(1)'; 
```

对于我的主干代码，它将是：

```
selectAll: function() {this.$('.nodebox').addClass('node-to-' + this.action + 'checked').removeClass('node-to-' + this.action + '-unchecked').css('webkitTransform', 'scale(1)');} 
```

# java - jsch 更改目录并获取内容

> ID：13044580
> 
> 赞同：1
> 
> 时间：2012-10-24T07:26:23.987
> 
> 标签：java, jsch

在 jsch 中，如果我们发出命令`cd ../ && pwd`并且结果是`/home`。下次如果我执行命令`ls`，jsch 会输出我的内容。`/home`我确实希望如此..

```
 Channel channel=session.openChannel("exec"); 
          ((ChannelExec)channel).setCommand("cd ../ && pwd");

          channel.connect();
          channel.run();

          ((ChannelExec)channel).setCommand("ls"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T09:54:57.107

[看起来](http://sourceforge.net/apps/mediawiki/jsch/index.php?title=Shell,_Exec_or_Subsystem_Channel#Shell_Channel)ChannelExec 的目的是执行单个命令。但完整的解释请看[这里](https://stackoverflow.com/questions/6265278/whats-the-exact-differences-between-jsch-channelexec-and-channelshell)。

因此，您可以像这样重写代码：

```
Channel channel=session.openChannel("exec"); 
((ChannelExec)channel).setCommand("cd ../ && pwd && ls");
channel.connect();
channel.run(); 
```

# mono - Missing assemblies with mono 3 MVC web app

> ID：13044581
> 
> 赞同：10
> 
> 时间：2012-10-24T07:26:26.157
> 
> 标签：mono, monodevelop

I've installed the freshly released Mono 3 and MonoDevelop on my Mac, and I was keen to get a simple MVC web application working with razor view pages.

When I File-New-Solution up a MVC 3 Web Application (razor), the thing doesn't compile, giving the error:

`The type or namespace GlobalFilterCollection could not be found`

It's because 2 references are not working - System.Web.Helpers and System.Web.WebPages. When I look at these in the references list in MonoDevelop, they are red with "Assembly not available" - looking at the references in more detail it seems I'm referencing system.web.mvc 2.0.0.0, whereas everything else is 4.0.0.0\. Can anyone advise?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T02:47:49.393

I eventually got mine to run by referencing the System.Web.Mvc.dll found in /Library/Frameworks/Mono.framework/Libraries/mono/4.5/

I also had to bring over System.Web.Helpers.dll from a Windows box and update the Web.Config using one generated by Visual Studio.

There's probably a better way to do this (please be a better way), but figured I'd pass on what I found.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-16T09:04:04.077

Add packeges "Microsoft ASP.NET MVC" and "Microsoft ASP.NET Web Pages" from NuGet.

# grails - Grails Geb 测试执行顺序

> ID：13044583
> 
> 赞同：3
> 
> 时间：2012-10-24T07:26:31.150
> 
> 标签：grails, functional-testing, spock, geb

在我的 grails 应用程序中，我使用 Spock 和 Geb 来执行功能测试。

由于所有测试都在同一个数据库上运行，我想提供执行 CRUDSpec 类的顺序。如何指定？

例子

1.  一级测试博客作者创作
2.  第二课，假设第一次测试运行成功，测试帖子创建
3.  第三类在帖子中添加评论

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T07:32:41.490

事实证明，顺序可以指定如下：

```
grails -Dserver.port=8090 test-app functional: LoginCRUDSpec,PayeeCRUDSpec 
```

另一个使用[此处](http://spock-framework.3207229.n2.nabble.com/Does-Spock-have-any-Test-Suite-support-td6170800.html)包的示例：

```
// Run all tests in the “admin” package 
grails test-app functional: admin.**.* 

// Run all tests in the “cart” package 
grails test-app functional: cart.**.* 
```

使用 no-arg ' **grails test-app** ' 对测试进行排序的最终方法是按字母顺序命名测试类。

```
T001_LoginCRUDSpec
T002_PayeeCRUDSpec
T003_ServiceCRUDSpec
T004_DescrParamCRUDSpec 
```

# ruby - Ruby bundler 制作二进制文件

> ID：13044584
> 
> 赞同：2
> 
> 时间：2012-10-24T07:26:32.090
> 
> 标签：ruby, makefile, bundler, gnu-make, freebsd

我在 FreeBSD 上使用 Ruby，由于它们需要 GNU make 而不是 FreeBSD 的 make，所以我很难编译原生扩展。知道如何强制 gmake 成为没有别名/PATH-fu 的捆绑程序的默认编译器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:54:25.623

您是否尝试设置指向 gmake 的 MAKE 环境变量？

# c# - 使用 WF4 构建“工作队列”和用户分配？类似于 SP2010

> ID：13044586
> 
> 赞同：1
> 
> 时间：2012-10-24T07:26:38.213
> 
> 标签：c#, workflow, workflow-foundation-4, sharepoint-workflow

[我很欣赏这有点主观 - 但必须有人知道编写系统的知识来处理这种类型的要求。注意：我们使用 C#、.Net4 并且有 SP2010]

我一直在为自定义业务应用程序评估 SharePoint2010 和 WF4，这些应用程序涉及工作流，也需要后端系统交互。

（也可以选择既不是 SP2010 也不是 WF4，只需将状态更改写入 DB 并编写直接 Windows 服务来执行任何自动化阶段。）

对于大多数要求，SP2010 证明了非常陡峭的学习曲线和受限的功能......但是，对于工作流部分，尤其是它擅长的“列表和任务”，并且易于实施具有随附安全性的新列表是一个奖励.

那么，有没有办法在 WF4 中模拟其中的一些功能？

## 主意

MVC3 应用程序，用户的 AD 组决定了他们可以执行哪些“队列”和功能。
用户可以看到他们自己的请求和他们的状态等。

用于托管工作流的 WF4 服务，其中一些步骤是自动的。

## 示例 1

用户 NormalPerson (NP) 打开站点，点击“创建新请求”

表单允许他们从后端系统中查找数据（数千行，SP2010 在这方面遇到了严重的困难，特别是因为它需要多次搜索和过滤器/排序 - 然而，jQuery+DataTables+Ajax 使这变得简单）

NP 保存请求

WF4“获取”请求，设置为“需要批准”，将电子邮件发送到 BackOffice (BO) 组并持续到 DB（通过 BLL 交互）

BO 用户可以打开站点并查看“新请求”列表，打开一个并批准它。

WF4“获取”字段中的更改，将电子邮件发送到 NP 和案例管理组，保存到 DB。

CM 用户打开“等待操作”列表并执行操作（也更新后端系统），设置为已完成。

WF4“获取”更改并向NP发送确认，归档请求。

## 示例 2

NP 创建新请求

WF4 发送电子邮件，设置“需要批准”

BO 用户在列表中找到新请求，打开但拒绝

WF4 向 NP 发送带有请求链接的电子邮件

NP 打开链接，修改请求，保存

WF4 向博群发送“更新”邮件并标记为重新提交

BO 用户打开“重新提交”列表，选择项目并设置为“需要经理批准”

WF4 发送经理电子邮件

经理在他的列表中看到项目，打开并批准。

WF4 向 CM 组发送电子邮件.....照常进行。

## 示例 3

NP 保存新的请求

WF4 收到请求，其限制如此直接地通过适当的电子邮件发送到“CM”

CM用户拿起............照旧进行。

## 示例 4

NP 保存新的请求

WF4 收到请求，它不需要任何手动干预，因此更新后端系统（BLL/WCF 调用等）并设置为“已完成”并使用电子邮件等。

CM用户拿起............照旧进行。

## 示例 5

NP 保存新请求

WF4 收到请求，发送电子邮件并离开为“需要批准”

NP 在任何人处理它之前打开请求并取消它。

WF4 获取更改并将项目移动到“已取消”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:03:54.077

您是否考虑过使用开源工作流引擎？这是一个列表：http: [//java-source.net/open-source/workflow-engines](http://java-source.net/open-source/workflow-engines)

我对 Sharepoint 的体验非常糟糕。我对WF4一无所知。有这么多，而且因为它们是开源的，如果你需要扩展它，你可以自定义框架。

另一种可能性是使用 JIRA。虽然正式*不是*工作流工具，但它具有卓越的工作流功能。只需将每个请求视为不同类型的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:50:11.083

从您提供的示例中，我认为您可以使用 WF4 解决此问题。WF4 提供了出色的事务控制和流控制功能：

*   对于 NP 启动的每个新请求，都会创建一个新的工作流实例。
*   每个步骤（NP 提交请求，BO 批准等）都包含在 Transaction 范围内，从而确保将步骤中涉及的数据保存到 DB 中，而与后续步骤的结果无关。
*   在每个步骤之后，工作流都会保存到数据库中（请注意您在此处的 WF 中使用的会话数据）
*   当一个新步骤开始时，工作流的同一个实例会从数据库中产生，从而使流程独一无二。
*   发送电子邮件通知只是封装了 SMTP 服务器使用的 Activity（C# 为此内置了对象和方法）。

SP2010 有一个限制，它基于工作流引擎的 .NET 3.5 实现（SP2013 应该支持 .NET 4.5）。我处理它的方式是使用**SOA**。WF4 借助工作流服务（它们是正常的工作流，但它们被包装在实现 WCF 功能的活动中）轻松地与**Windows Communications Foundation集成。**使用工作流服务，您可以通过 WCF 公开工作流，这意味着您可以像使用服务一样使用工作流，并从 SP2010 执行此操作，或者创建自己的 SP2010 工作流主机并从 SP Workflows 运行 WF（不完全确定最后一个事情，但我相信这是可能的）。

因此，结合 WF4 和 WCF，您可以构建一个按您希望的方式工作的解决方案。当然，您的解决方案的设计不仅取决于 WF4 以及您如何使用它，但我认为它是一个不错的选择。它还使您有机会从任何客户端（MVC、移动设备等）抽象流程。

如果您不想使用服务和实现 WCF 的所有其他注意事项，那么这种方法不是您想要的，我只是指出它是可能的。

希望这可以帮助。

# javascript - 网站 FB 登录重定向到空白页面

> ID：13044592
> 
> 赞同：1
> 
> 时间：2012-10-24T07:27:02.307
> 
> 标签：javascript, facebook

我使用 Javascript SDK 在 facebook 登录时获得了空白权限页面。最近几天它一直在工作，我不确定我改变了什么。我似乎没有在任何地方使用我的应用程序机密（我确实定义了 API 密钥）。是否有任何故障排除建议？不幸的是，Facebook 调试页面只是让我添加了一些与打开图相关的元标记，这些标记并没有改变任何东西。我试过查看 100 多个类似的其他问题，但无法弄清楚。我尝试恢复到我的代码的旧版本，所以我很确定它与 Facebook 相关，但它正在工作。

空白页面在弹出窗口中，并且在 URL 中有一些关于权限的内容。我的网站虽然不需要任何权限。

这是登录后登录窗口中的 URL：

[https://www.facebook.com/dialog/permissions.request?_path=permissions.request&app_id=number_I_removed&redirect_uri=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D11%23cb% 3Df8917d1784b726％26origin％3Dhttp％253A％252F％252Fpostacle.com％252Ffd565a0d8d775e％26domain％3Dpostacle.com％26relation％3Dopener％26frame％3Df12565ffe5570f2＆SDK =乔伊＆显示=弹出＆RESPONSE_TYPE =记号％2Csigned_request＆域= postacle.com＆fbconnect = 1＆from_login = 1＆CLIENT_ID = number_I_removed](https://www.facebook.com/dialog/permissions.request?_path=permissions.request&app_id=number_I_removed&redirect_uri=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D11%23cb%3Df8917d1784b726%26origin%3Dhttp%253A%252F%252Fpostacle.com%252Ffd565a0d8d775e%26domain%3Dpostacle.com%26relation%3Dopener%26frame%3Df12565ffe5570f2&sdk=joey&display=popup&response_type=token%2Csigned_request&domain=postacle.com&fbconnect=1&from_login=1&client_id=number_I_removed)

如果我重新加载我的页面，我已正确登录。URL 中的应用 ID 和客户端 ID 相同。不确定它们是否应该但未指定客户端 ID 或生成方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:29:23.403

好的，所以我当然遗漏了一个关键细节：我正在使用 Django。此外，我非常依赖 Django，因此我在视图中提供了我的 Facebook channelUrl。Facebook 的 API 不喜欢这样。[在阅读了一个同样被诅咒的家伙](https://stackoverflow.com/questions/5778100/facebook-connect-showing-blank-popup-on-login-in-internet-explorer-8)的故事后，我改变了我的方式：URL 直接链接到 channel.html 文件。没有更多的悲伤。

# svn - svn 将修订版本从单个数字更改为 major.minor

> ID：13044594
> 
> 赞同：4
> 
> 时间：2012-10-24T07:27:18.417
> 
> 标签：svn, release, revision

由于获得major.minor.release格式，我正在尝试更改svn修订号。在我的配置中，svn 修订号每次提交都会增加一。应该可以改吧？

我正在研究如何使用 perl 来做到这一点，但如果你能在洞解决方案中提出一种王牌，那对我来说将是黄金。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:35:52.023

不要**混合** *版本控制号*和*发布号*。只是不要以这种方式滥用它。

最新的当你将 RCS 从 subversion 切换到 git 时，你就完蛋了。**说真的，手动进行版本编号。**最多包含 subversion 版本号作为后缀构建指示符。

将您的发布版本号与您的 RCS 系统内部编号联系起来有什么好处？这些数字本质上只是系统的**唯一 ID**，而*不是软件版本号*。它们是**提交编号**，所以不要搞砸了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:36:55.707

不，***您不能更改 SVN 修订号***，也不应更改。

在后台，SVN 会在您每次签入某些内容时制作整个存储库树的（惰性）副本。该副本由一个 ID 存储和访问，该 ID 称为***修订号***。***它是您的存储库内部***的一条信息，除了需要它来引用特定修订版之外，您应该不关心此 ID 的值。

您的软件使用哪个***版本号***交付给客户是***由存储库外部决定的，***并且独立于签入存储库的数量。（您的客户并不关心您是否需要一百次签入来实现闪亮的新功能并消除那些讨厌的错误，或者一千次。）

作为开发人员，您的任务是***在内部修订号和一些外部使用的版本号之间建立联系***。这是通过标记（或分支，如果您计划从该主要版本中获得多个次要版本）来完成的。如果您想要发布一个特定的版本 1.0，只需将此版本复制到类似`tags/releases/1.0`. （请注意，这甚至允许您将来自不同修订版本的源文件混合到一个版本中。只需有选择地将它们更新到特定修订版本，并且当您拥有想要标记该混合工作副本的状态时。）

[SVN 书](http://svnbook.red-bean.com/)解释了这一切。帮自己一个忙，花几个小时通读一遍。这将在几天内得到回报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:31:10.437

这是不可能的，您可能想要做的是[标记](http://svnbook.red-bean.com/en/1.6/svn.branchmerge.tags.html)与您的版本相对应的特定修订

# php - PHP 将从 BLOB 生成 jpg 图像，但不会从 MySQL 表中的 LONGBLOB 生成

> ID：13044595
> 
> 赞同：1
> 
> 时间：2012-10-24T07:27:21.533
> 
> 标签：php, mysql, image, blob

以下脚本一直在从 MySQL 中的 BLOB 列输出图像很长时间了：

```
<?
$dbname="usr_web5_1";
$db = new mysqli($dbhost, $dbuser, $dbpwd, $dbname);
$sql = "SELECT foto, fototype, modified FROM `Komplettverzeichnis_extras` WHERE `WPID`= ?";
$stmt = $db->prepare($sql);
$stmt->bind_param("s",$_GET['id']);
if (!$stmt->execute()) $error=true;
$stmt->bind_result($file,$filetype,$modified);
$stmt->fetch();
if (!isset($filetype)) $filetype = "image/jpeg";
if (!$error) {
    header("Content-type: $filetype;");
    header("Last-Modified: $modified;");
} else {
    echo "Error";
    echo $db->error;
}
echo $file;
$stmt->close();
$db->close();
}
?> 
```

我尝试将列更改为 LONGBLOB 并用新的 LONGBLOB 列替换它；图像不会显示。这与我尝试显示已经存在的图像还是尝试上传新图像无关。

我发现的最接近的问题是[here](http://www.php.de/datenbanken/56791-erledigt-longblob-akzeptiert-kein-binary-attribut.html)（德语）。为了改变我使用的列

```
ALTER TABLE `Komplettverzeichnis_extras` CHANGE `foto` `foto` LONGBLOB DEFAULT NULL 
```

显然，如有必要，我愿意提供更多信息。

我在版本 3.5.2.2、PHP 5.3.17 和 mysql 客户端 API 版本（是 mysql 版本吗？） 5.1.63 中使用 phpMyAdmin。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:52:22.567

好的，我发现了问题：

对于 BLOB，字符串的 mySQLi 方法将在我的代码中使用，如您在上面看到的。Longblob 并非如此。在execute() 之后和bind_result() 之前，需要一个store_result()。另外，保存时，我不能简单地使用 bind_param()。相反，必须使用以下使用 NULL 的构造：

```
if (!$stmt = $db->prepare($sql)) printf($db->error);
$null = NULL;
$stmt->bind_param("bsi",$null,$type,$id);
$stmt->send_long_data(0,$data);
if (!$stmt->execute()) printf($db->error);
$stmt->close(); 
```

简而言之，以下资源帮助了我： [Oswald@Work](https://blogs.oracle.com/oswald/entry/php_s_mysqli_extension_storing)

无论如何感谢大家的努力！

# java-ee-6 - 在 java ee 中使用 java nio

> ID：13044600
> 
> 赞同：0
> 
> 时间：2012-10-24T07:27:42.897
> 
> 标签：java-ee-6, nio

我想在 java ee 中使用 java nio。但我不知道如何正确地做到这一点。我需要在服务器部署 java.nio.selector 后始终监听端口并处理套接字连接。我试着在那里做：

```
@Singleton
@Lock(LockType.READ)
public class TaskManager {

    private static final int LISTENINGPORT;

    static {
        LISTENINGPORT = ConfigurationSettings.getConfigureSettings().getListeningPort();
    }

    private ArrayList<ServerCalculationInfo> serverList;

    public TaskManager() {
        serverList = new ArrayList<ServerCalculationInfo>();
        select();
    }

    @Asynchronous
    public void select() {
        try {
            ServerSocketChannel serverSocketChannel = ServerSocketChannel.open();
            Selector selector = Selector.open();
            serverSocketChannel.configureBlocking(false);
            serverSocketChannel.socket().bind(new InetSocketAddress(LISTENINGPORT));
            serverSocketChannel.register(selector, SelectionKey.OP_ACCEPT);

            while (true) {
                try {
                    selector.select();
                } catch (IOException ex) {
                    Logger.getLogger(this.getClass().getName()).log(Level.SEVERE, null, ex);
                    break;
                }
                Iterator it = selector.selectedKeys().iterator();
                while (it.hasNext()) {
                    SelectionKey selKey = (SelectionKey) it.next();
                    it.remove();
                    try {
                        processSelectionKey(serverSocketChannel, selKey);
                    } catch (IOException e) {
                        serverList.remove(serverCalculationInfo);
                    }
                }
            }

        } catch (IOException e) {
            Logger.getLogger(this.getClass().getName()).log(Level.SEVERE, null, e);
        } catch (Exception e) {
            Logger.getLogger(this.getClass().getName()).log(Level.SEVERE, null, e);
        }
    }
} 
```

它不能正常工作。只有在重新启动 Glassfish 后，该进程才会在部署和重新部署应用程序期间挂起。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T06:32:29.820

如果从@PostConstructor 调用@Asynchronous 方法，它可以正常工作：

```
@PostConstruct
public void postTaskManager() {
    serverList = new ArrayList<ServerCalculationInfo>();
    select();
} 
```

而不是从构造函数调用它。但是类必须没有 @Startup 注释。

# c# - 使用 C# 将时间跨度值转换为格式“hh:mm Am/Pm”

> ID：13044603
> 
> 赞同：92
> 
> 时间：2012-10-24T07:28:01.240
> 
> 标签：c#, .net

我有一个值存储在类型变量中`System.TimeSpan`，如下所示。

```
System.TimeSpan storedTime = 03:00:00; 
```

我可以将它重新存储在另一个类型`String`的变量中吗？

```
String displayValue = "03:00 AM"; 
```

如果`storedTime`变量的值为

```
storedTime = 16:00:00; 
```

那么它应该转换为：

```
String displayValue = "04:00 PM"; 
```

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2012-10-24T07:32:11.930

您可以通过将时间跨度添加到日期来做到这一点。

```
TimeSpan timespan = new TimeSpan(03,00,00);
DateTime time = DateTime.Today.Add(timespan);
string displayTime = time.ToString("hh:mm tt"); // It will give "03:00 AM" 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-07-23T00:42:52.313

使用字符串格式非常简单

上`.ToSTring("") :`

*   如果你使用 "hh" ->> 小时，使用从 01 到 12 的 12 小时制。

*   如果你使用 "HH" ->> 小时，使用 00 到 23 的 24 小时制。

*   如果您添加“tt”->> Am/Pm 指示符。

将 23:12 转换为 11:12 Pm 的示例：

```
DateTime d = new DateTime(1, 1, 1, 23, 12, 0);
var res = d.ToString("hh:mm tt");   // this show  11:12 Pm
var res2 = d.ToString("HH:mm");  // this show  23:12

Console.WriteLine(res);
Console.WriteLine(res2);

Console.Read(); 
```

稍等一下，有一个问题，系统文化！！，在设置为不同语言的窗口上执行的相同代码尤其是不同文化语言会产生不同的结果。

例如在设置为阿拉伯语的窗口中，结果将是这样的：

// 23:12 前

م 表示晚上（مساء 的第一个字母）。

在设置为德语的 Windows 中，我认为它会显示 // 23:12 du。

您可以在 windows 区域和语言下的 windows 控制面板上更改不同格式 -> 当前格式（组合框）并更改...应用它，重新构建（执行）您的应用程序并观看我在说什么。

那么如果当前系统的文化未设置为英语，如何强制在英语事件中显示 Am 和 Pm 前缀？

只需添加两行即可轻松->

第一步添加`using System.Globalization;`在您的代码之上

并将之前的代码修改成这样：

```
DateTime d = new DateTime(1, 1, 1, 23, 12, 0);
var res = d.ToString("HH:mm tt", CultureInfo.InvariantCulture); // this show  11:12 Pm 
```

InvariantCulture => 使用默认的英文格式。

另一个问题我想让 pm 使用阿拉伯语或特定语言，即使我使用设置为英语（或其他语言）区域格式的窗口？

阿拉伯语示例的解决方案：

```
DateTime d = new DateTime(1, 1, 1, 23, 12, 0);
var res = d.ToString("HH:mm tt", CultureInfo.CreateSpecificCulture("ar-AE")); 
```

这将显示 // 23:12 م

如果我的系统设置为英语区域格式，则事件。如果您想要另一种语言格式，您可以更改“ar-AE”。每种语言都有一个列表。

示例：ar ar-SA 阿拉伯语 ar-BH ar-BH 阿拉伯语（巴林） ar-DZ ar-DZ 阿拉伯语（阿尔及利亚） ar-EG ar-EG 阿拉伯语（埃及）.....

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-24T07:30:35.690

您可以添加`TimeSpan`到 a `DateTime`，例如：

```
TimeSpan span = TimeSpan.FromHours(16);
DateTime time = DateTime.Today + span;
String result = time.ToString("hh:mm tt"); 
```

演示：http: [//ideone.com/veJ6tT](http://ideone.com/veJ6tT)

```
04:00 PM 
```

[标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-08-15T15:21:05.407

在这里做一些捎带现有的答案：

```
public static string ToShortTimeSafe(this TimeSpan timeSpan)
{
    return new DateTime().Add(timeSpan).ToShortTimeString();
} 

public static string ToShortTimeSafe(this TimeSpan? timeSpan)
{
    return timeSpan == null ? string.Empty : timeSpan.Value.ToShortTimeSafe();
} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-10-24T07:30:50.993

```
string displayValue="03:00 AM"; 
```

这是一个*时间点*，而不是*持续时间*(TimeSpan)。

所以你的基本设计或假设有问题。

如果您确实想使用它，则必须先将其转换为 DateTime（时间点）。您可以格式化没有日期部分的 DateTime，这将是您想要的字符串。

```
TimeSpan t1 = ...;
DateTime d1 = DateTime.Today + t1;               // any date will do
string result = d1.ToString("hh:mm:ss tt"); 
```

> storeTime 变量的值可以是
> `storeTime=16:00:00;`

不，它可以有 4 o'clock 的值，但表示是二进制的，TimeSpan 不能记录 和 之间的`16:00`差异`4 pm`。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-10-24T07:33:54.177

您将需要`DateTime`从您的对象中获取一个对象`TimeSpan`，然后您可以轻松地对其进行格式化。

一种可能的解决方案是将时间跨度添加到任何时间值为零的日期。

```
var timespan = new TimeSpan(3, 0, 0);
var output = new DateTime().Add(timespan).ToString("hh:mm tt"); 
```

输出值将是`"03:00 AM"`（对于英语语言环境）。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-10-19T04:29:50.973

您不能将*AM/PM*添加到`TimeSpan`. 如果您想以 12 小时制格式显示时间，则无论如何都必须将`TimaSpan`值与相关联。`DateTime`

`TimeSpan`不打算与 12 小时时钟格式一起使用，因为我们在这里讨论的是**时间间隔**。

正如它在[文档](https://msdn.microsoft.com/en-us/library/system.timespan%28v=vs.110%29.aspx?f=255&MSPPError=-2147217396#Remarks)中所说的那样；

> 一个`TimeSpan`对象表示一个**时间间隔**（持续时间或经过的时间），它被测量为天数、小时数、分钟数、秒数和秒数的*正数或负数。*该`TimeSpan`结构还可用于表示一天中的时间，但前提是时间与特定日期无关。否则，应使用`DateTime`or结构。`DateTimeOffset`

[Microsoft Docs](https://docs.microsoft.com/en-us/dotnet/api/system.timespan?view=netframework-4.7.1#Remarks)也描述如下；

> 值`TimeSpan`可以表示为`[-]d.hh:mm:ss.ff`，其中可选的减号表示负时间间隔，`d`分量是天，是在**24 小时制**`hh`上测量的小时，是分钟，是秒，是秒的几分之一。**`mm``ss``ff`**

 **因此，在这种情况下，您可以使用 AM/PM 进行如下显示。

```
TimeSpan storedTime = new TimeSpan(03,00,00);
string displayValue = new DateTime().Add(storedTime).ToString("hh:mm tt"); 
```

*旁注*：
还应注意[TimeOfDay](https://docs.microsoft.com/en-us/dotnet/api/system.datetime.timeofday?view=netframework-4.7.1)的属性`DateTime`是 a `TimeSpan`，它代表

> 一个**时间间隔**，表示自午夜以来已过去的一天中的部分。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-10-24T07:32:49.560

将时间跨度解析为 DateTime，然后使用 Format ("hh:mm:tt")。例如。

```
TimeSpan ts = new TimeSpan(16, 00, 00);
DateTime dtTemp = DateTime.ParseExact(ts.ToString(), "HH:mm:ss", CultureInfo.InvariantCulture);
string str = dtTemp.ToString("hh:mm tt"); 
```

`str`将会：

```
str = "04:00 PM" 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-07-12T11:37:06.017

为避免时间跨度格式限制，请转换为日期时间。最简单的表达方式是：

```
// Where value is a TimeSpan...
(new DateTime() + value).ToString("hh:mm tt"); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-08-06T12:43:32.407

你可以试试这个：

```
 string timeexample= string.Format("{0:hh:mm:ss tt}", DateTime.Now); 
```

您可以根据需要删除 hh 或 mm 或 ss 或 tt，其中 hh 是 12 小时甲酸盐中的小时，mm 是分钟，ss 是秒，tt 是 AM/PM。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-07-15T09:30:01.150

```
Parse timespan to DateTime. For Example.    
//The time will be "8.30 AM" or "10.00 PM" or any time like this format.
    public TimeSpan GetTimeSpanValue(string displayValue) 
        {   
            DateTime dateTime = DateTime.Now;
                if (displayValue.StartsWith("10") || displayValue.StartsWith("11") || displayValue.StartsWith("12"))
                          dateTime = DateTime.ParseExact(displayValue, "hh:mm tt", CultureInfo.InvariantCulture);
                    else
                          dateTime = DateTime.ParseExact(displayValue, "h:mm tt", CultureInfo.InvariantCulture);
                    return dateTime.TimeOfDay;
                } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-10-24T07:33:35.237

首先，您需要将时间跨度转换为 DateTime 结构：

```
var dt = new DateTime(2000, 12, 1, timeSpan.Hours, timeSpan.Minutes, timeSpan.Seconds) 
```

然后你需要将值转换为[短时间](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#ShortTime)格式的字符串

```
var result = dt.ToString("t"); // Convert to string using Short Time format 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-05-28T13:43:42.073

因为这种情况很烦人，因为它很常见......我创建了一个助手类，我已经在 NuGet 包中发布了它。这可能是一个私有方法，可以在 MVC 视图以及后端 C# 代码中使用。

```
public static string AsTimeOfDay(TimeSpan timeSpan, TimeSpanFormat timeSpanFormat = TimeSpanFormat.AmPm)
        {
            int hours = timeSpan.Hours;
            int minutes = timeSpan.Minutes;
            string AmOrPm = "AM";
            string returnValue = string.Empty;

            if (timeSpanFormat == TimeSpanFormat.AmPm)
            {
                if (hours >= 12)
                {
                    AmOrPm = "PM";
                }

                if (hours > 12)
                {
                    hours -= 12;
                }

                TimeSpan timeSpanAmPm = new TimeSpan(hours, minutes, 0);

                returnValue = timeSpanAmPm.ToString(@"h\:mm") + " " + AmOrPm;
            }
            else
            {
                returnValue = timeSpan.ToString(@"h\:mm");
            }

            return returnValue;
        } 
```

[![在此处输入图像描述](../Images/3aec80750b349cee0a5b4f6ff3a050d5.png)](https://i.stack.imgur.com/EOM2K.png)**

# android - GCM 推送通知的大延迟

> ID：13044605
> 
> 赞同：4
> 
> 时间：2012-10-24T07:28:09.293
> 
> 标签：android, push-notification, google-cloud-messaging

我参考[了这个链接](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

我实现了它，它可以工作，但遇到了麻烦：首先，有时我需要重新启动 android 模拟器，以便在重新启动模拟器时可以发送推送通知，推送通知正常工作。一段时间后，推送通知不起作用，推送通知需要大约 15 分钟才能送达。如果我重新启动模拟器，推送通知就会被传递等等......

你认为这里的问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:12:48.587

它可能是您的 wifi 路由器，请查看此处的描述

[https://play.google.com/store/apps/details?id=com.andqlimax.pushfixer](https://play.google.com/store/apps/details?id=com.andqlimax.pushfixer)

我在这里向谷歌打开了一个问题： [https ://productforums.google.com/forum/#!category-topic/nexus/connecting-to-networks-and-devices/fslYqYrULto](https://productforums.google.com/forum/#!category-topic/nexus/connecting-to-networks-and-devices/fslYqYrULto)

他们同意在某些情况下存在 TCP 超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-12T12:13:18.927

如果您期待收到通知，但 android 模拟器存在巨大延迟。您可以执行以下步骤以获取即时通知。

**在模拟器中关闭移动数据然后再次打开它，您将在打开它后立即收到通知** 希望这会有所帮助:)

# jquery - jsAnim：获取对象位置

> ID：13044612
> 
> 赞同：0
> 
> 时间：2012-10-24T07:29:14.130
> 
> 标签：jquery, object, position

如何在 jsAnim 或 jQuery 中获取对象位置。我刚刚在单击右箭头时将我的对象向右移动 50px。我想获得它的新位置，并在您单击 n 次右箭头直到画布末尾时使其移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:35:05.340

基本答案是您可以使用以下方法检索杂项定位信息：

```
var rect = object.getBoundingClientRect(); 
```

# git - 如何在 git 1.8 中关闭本地化

> ID：13044615
> 
> 赞同：11
> 
> 时间：2012-10-24T07:29:23.287
> 
> 标签：git, localization, terminal

[我刚刚按照本教程](http://ayanim97.com/mac/installing-and-upgrading-git-mac-os-lion)将我的 git 更新到 OSX 10.8.2 上的 1.8 版，现在 git 在我的本地化中部分响应。例如

```
$ git status
# Auf Zweig master  
nothing to commit, working directory clean 
```

我怎样才能关闭它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T07:32:46.923

您可以使用`alias`专门禁用本地化：

```
alias git="LANG=en_US git" 
```

将它放在您的`.profile`/ `.bashrc`（或其他 shell 启动脚本）中以使其永久化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T08:12:16.777

您可以将以下内容放入您的`~/.profile`（或`~/.bashrc`）中，

```
export LANG=en_US 
```

这将适用于使用您的语言环境的所有命令，而不仅仅是`git`

# c# - 将 Wpf 父级设置为 MDIform

> ID：13044618
> 
> 赞同：1
> 
> 时间：2012-10-24T07:29:29.640
> 
> 标签：c#, winforms, mdiparent

我有一个带有`MDI Form`.

出于某种原因，我`WPF Window`在我的应用程序中使用了 a 。所以我想问我如何将 WPF 窗口父级设置为我的 MDI 表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:47:02.740

以下代码应该使您能够将 wpf 对话框的所有者设置为您的 win 表单。

```
public static void SetOwner(System.Windows.Forms.Form owner, System.Windows.Window wpfWindow)
    {
        WindowInteropHelper helper = new WindowInteropHelper(wpfWindow);
        helper.Owner = owner.Handle;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:36:30.573

有一个`open-source MDI implementation for WPF`你可能想看看。这可能是一个很好的工作和代码重组，但如果你绝对必须有 MDI，那么这可能是最好的方法 - [MDI for WPF](http://wpfmdi.codeplex.com/ "WPF 的 MDI")。

# android - 编辑框在android中没有获得焦点

> ID：13044624
> 
> 赞同：1
> 
> 时间：2012-10-24T07:29:58.270
> 
> 标签：android, android-emulator, android-widget, android-edittext

当我尝试专注于 EditText 控件时，我在 android 中遇到了有线问题。

在我的应用程序中，我正在动态添加编辑控件，每当添加新控件时，我都想自动聚焦并自动弹出软键盘。

有时编辑框获得焦点，但如果我键入文本不会出现，有时文本会出现在其他文本控件中。

我正在手机中观察到这种行为。

这是我用来提供焦点的代码片段。

```
 if(mOldEditBox!=null)
            {
                mOldEditBox.clearFocus();
            }

            textView.requestFocus();
            //textView.setInputType(InputType.TYPE_CLASS_PHONE); //to popup numpad
            //textView.setOnFocusChangeListener(focuschange); 
            mOldEditBox = textView; 
```

我尝试设置 focuschangelistener 事件，但它仍然没有工作:(

```
OnFocusChangeListener focuschange = new OnFocusChangeListener() {

        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            // TODO Auto-generated method stub
            if(hasFocus){

                EditText txt = (EditText)v;

                //txt.setInputType(InputType.TYPE_CLASS_PHONE); //to popup numpad

                ((InputMethodManager)getSystemService(INPUT_METHOD_SERVICE))
        .showSoftInput(txt, InputMethodManager.SHOW_FORCED);

            }
        }
    }; 
```

请帮我解决问题..提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:39:15.603

请求焦点时您可能不在 UI 线程上，这可能会导致 EditText 的奇怪行为。尝试使用以下方法将其添加到消息队列中`post(Runnable)`：

```
textView.post(new Runnable() {
    public void run() {
        textView.requestFocus();
    }
}); 
```

# spring - 构建期间的弹簧错误

> ID：13044628
> 
> 赞同：21
> 
> 时间：2012-10-24T07:30:41.130
> 
> 标签：spring, maven, spring-mvc

我必须使用`spring`. 所以我选择`spring template project`然后`new spring mvc project`无论我尝试什么**都会发生错误**

```
Errors occurred during the build.
Errors running builder 'Maven Project Builder' on project 'mTime'.Errors occurred during the build.
Errors running builder 'Maven Project Builder' on project 'mTime'.
Could not calculate build plan: Failed to parse plugin descriptor for org.apache.maven.plugins:maven-war-plugin:2.1.1 (C:\Users\User01\.m2\repository\org\apache\maven\plugins\maven-war-plugin\2.1.1\maven-war-plugin-2.1.1.jar): invalid LOC header (bad signature)
Failed to parse plugin descriptor for org.apache.maven.plugins:maven-war-plugin:2.1.1 (C:\Users\User01\.m2\repository\org\apache\maven\plugins\maven-war-plugin\2.1.1\maven-war-plugin-2.1.1.jar): invalid LOC header (bad signature)
Could not calculate build plan: Failed to parse plugin descriptor for org.apache.maven.plugins:maven-war-plugin:2.1.1 (C:\Users\User01\.m2\repository\org\apache\maven\plugins\maven-war-plugin\2.1.1\maven-war-plugin-2.1.1.jar): invalid LOC header (bad signature)
Failed to parse plugin descriptor for org.apache.maven.plugins:maven-war-plugin:2.1.1 (C:\Users\User01\.m2\repository\org\apache\maven\plugins\maven-war-plugin\2.1.1\maven-war-plugin-2.1.1.jar): invalid LOC header (bad signature) 
```

我知道它`maven`包含在 中`spring framework`，当我检查目录时，罐子就在那里。

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-24T07:34:42.253

错误消息的相关部分是：

```
invalid LOC header (bad signature) 
```

这表明一些二进制文件被破坏，很可能是依赖项之一。如果您的 Internet 连接速度很快，只需删除整个 maven 存储库并让 maven 重新下载所有依赖项：

```
rm -rf ~/.m2/repository/* 
```

# 也可以看看

*   [运行spring mvc项目时出现一些错误](https://stackoverflow.com/questions/10292103)
*   [*Maven:: Invalid CEN (bad signature) Invalid LOC (bad signature)*](http://tech.deepumohan.com/2012/07/maven-invalid-cen-bad-signature-invalid.html)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-24T07:44:13.463

根据我的经验，`invalid LOC header (bad signature)`很可能是由于下载的 .jar 文件已损坏。

如果您的互联网连接速度较慢，您可以尝试根据错误消息的提示（即`C:\Users\User01\.m2\repository\org\apache\maven\plugins\maven-war-plugin\2.1.1\`）删除包含有问题的 jar 的文件夹，而不是删除整个 Maven 存储库。然后使用`mvn clean install -U`再次下载依赖项。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-28T15:55:42.920

对我来说多次运行以下脚本有效。它在 mvn 结果中查找 CEN 和 LOC 标题行问题，并要求一一删除 jar。经过几次删除和重新运行后，事情应该会再次起作用。我不敢完全自动化。

```
#!/bin/sh
# fix issues like:
#[ERROR] error: error reading /Users/wf/.m2/repository/org/docx4j/xhtmlrenderer/1.0.0/xhtmlrenderer-1.0.0.jar; invalid LOC header (bad signature)
# WF 2013-10-27
mvnlog=/tmp/mvnlog$$
mvnproblem=/tmp/mvnproblem$$
mvn install | tee $mvnlog
grep "invalid ... header" $mvnlog > $mvnproblem
for culprit in `cat $mvnproblem | cut -d" " -f5  | cut -d ";" -f1`
do
  echo "fix mvn LOC header issue with $culprit? yes/no/abort"
    read answer
    case $answer in
      y*|Y*) rm $culprit;;
        n*|N*) ;;
        *) exit 1;
    esac
done
rm -f $mvnproblem
rm -f $mvnlog 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-24T05:58:08.617

它抛出是因为您的 .jar 无效或损坏。

按照步骤：

注意：.m2 文件夹默认隐藏。取消隐藏文件夹。

步骤 1：删除 .m2/repository 文件夹中的所有内容。

第 2 步：重新启动 Eclipse。

第 3 步：Maven->Update Project .Checked-强制更新快照/发布。

第 4 步：以 Maven Clean 身份运行。

第 5 步：作为 Maven 安装运行。

第 6 步：清理项目。

第 7 步：运行您的项目。

我希望你在这里找到你的解决方案..

谢谢..

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-20T12:51:48.247

运行 maven 时添加调试输出。它会告诉你哪个罐子坏了。只删除那个。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-27T15:23:46.367

当在 Windows 上启动 Tomcat 时遇到此错误或无法运行 Wolfgang 的脚本时，找到罪魁祸首的另一个解决方案是将 catalina.jar 中的 JarResourceSet.class 替换为具有额外调试功能的版本。

即 google 为您的 Tomcat 版本的源代码并调整 initInternal() 方法：

```
 String processingJar = "";

    try (JarFile jarFile = new JarFile(getBase())) {
        processingJar = jarFile.getName();

        ...
    } catch (IOException ioe) {
        System.out.println("Failed with " + processingJar);
        throw new IllegalArgumentException(ioe);
    } 
```

要构建，您的类路径应该指向您的 Tomcat lib 目录，例如：

```
javac -cp C:\apache-tomcat-X.Y.Z\lib\* JarResourceSet.java 
```

然后使用 7zip 或类似程序将其插入到相应目录下的 catalina.jar 中并运行 Tomcat。我很惊讶它第一次奏效，但确实奏效了。（然后你只需要在你的 .m2 存储库中找到有问题的 jar 文件在哪里，然后删除和重建等）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-30T22:08:11.377

如果您不想完全删除本地 Maven 存储库，请使用以下命令查找损坏的工件并将其删除：

```
public static void main(String[] args) throws IOException {
    findBrokenZip(Paths.get(System.getProperty("user.home") + "/.m2/repository"));
}

static void findBrokenZip(Path path) throws IOException {
    try (DirectoryStream<Path> stream = Files.newDirectoryStream(path)) {
        for (Path entry : stream) {
            if (Files.isDirectory(entry)) {
                findBrokenZip(entry);
            } else {
                if (entry.getFileName().toString().endsWith(".jar")) {
                    try (JarFile zipFile = new JarFile(entry.toFile())) {
                        zipFile.getManifest();
                    } catch (ZipException e) {
                        Files.delete(entry);
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-27T10:48:14.717

```
Help -> Install New Softwares 
```

从那里安装包含 Web 开发、XML、CSS、Java EE 的捆绑包......然后如果这个构建问题仍然存在，请使用命令

```
rm -rf ~/.m2/repository/* 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-27T06:43:58.007

试试这个 ：

```
find ~/.m2  -name "*.lastUpdated" -exec grep -q "Could not transfer" {} \; -print -exec rm {} \; 
```

# c - 为什么将指向数组的指针传递给需要指向 int 的函数的函数没有错误

> ID：13044629
> 
> 赞同：2
> 
> 时间：2012-10-24T07:30:47.953
> 
> 标签：c, multidimensional-array

出于好奇，我`set_array(&array1[0])`将以下行从更改为`set_array[array1]`，参数不是同一类型，但它有效，知道吗？

```
#include <stdio.h>
void set_array(int array[][9]);
int main(void) {
    int array1[4][9];
    for(int i = 0; i < 4; i++) {
        for(int j = 0; j < 9; j++) {
            array1[i][j] = j + 1;
        }
    }
    set_array(&array1[0]);
    for(int i = 0; i < 4; i++) {
        for(int j = 0; j < 9; j++) {
            printf("%d ", *(*(array1 + i) + j));
            //printf("%d ", array1[i][j]);
        }
        puts("\n");
    }
    return 0;

}
void set_array(int array[][9]) {
    for(int i = 0; i < 4; i++) {
        for(int j = 0; j < 9; j++) {
            array[i][j] = 1;
        }
    }   
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T07:36:40.697

在 C 中，数组的普通名称与指向其第一个元素的指针相同。这称为阵列的衰减。有关进一步的解释，请参阅[C 常见问题](http://c-faq.com/aryptr/aryptrequiv.html)解答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:49:34.127

这里 array1 具有第一行（或列）的整个数组的地址，具体取决于实现。`(&array1[0])`与sice`(array1)`类型相同，`()[n]`数组名称本身包含 ist 元素的地址。但是当您传递`(&array)`哪种类型时`()[m][n]`，编译器会因为参数类型不匹配而引发错误。

我想你还没有阅读我在你问的最后一个问题中的评论

# sql - SQL 语句根据来自另一个表的信息从一个表中选择行

> ID：13044637
> 
> 赞同：1
> 
> 时间：2012-10-24T07:31:21.583
> 
> 标签：sql

我在数据库中有两个不同的表，列数不同。现在，我想根据某个变量从第一个表中选择一些行（例如，第一列的值应该为 1）。但是，我还想使用我的另一个表中的信息从我的第一个表中选择行。

在我的具体情况下，两者`table1`和都`table2`包含列`Group`和`Person`。表 1 指定每个人一次，并声明他或她属于哪个组。但是，人们也可以是第二组的一部分，这些组列在`table2`. 也就是说，在 中`table2`，可以使用新的组号再次列出一个人。

我想编写一个 SQL 语句，从中选择`table1`某个组的成员（因为我有有关此表中人员的更多信息）中的人员（即行） `x`，. 但是，由于一个人可以属于多个组，因此我也需要以`table2`某种方式查看。

我该如何编写这个 SQL 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:36:28.007

```
select t1.person_id,t1.group_id 
from table1
union all
select t2.person_id,t2.group_id
from table2 
```

这会给你一张桌子

```
person group
person1 group1
person1 group2
person2 group3 
```

无论它们属于什么表。

但是，如果两个表中都有相同的数据，这种架构似乎很愚蠢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:39:25.740

您将需要在两个表中使用某种标识符 - 例如候选键。当您进行选择时，您需要加入表格，例如：

```
SELECT column_name(s)
FROM Table1 table_name1
INNER JOIN Table2 table_name2
ON table_name1.column_name=table_name2.column_name
WHERE table_name1.person = table_name2.person 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:40:12.423

如果我正确理解了您的问题，则下面的此查询将为您提供一个人的详细信息，该人是“X”组的成员，并且该人与该特定组“X”之间的关系来自`table1`或`table2`.

```
SELECT t1.*
FROM table1 t1 
LEFT OUTER JOIN table2 t2
    ON t1.Person = t2.Person
WHERE t1.Person = 'Y'
AND (t1.Group = 'X' OR t2.Group = 'X') 
```

# ios - IBOutlet (UIImageView) 后释放内存

> ID：13044642
> 
> 赞同：1
> 
> 时间：2012-10-24T07:31:46.560
> 
> 标签：ios, memory-management, iboutlet

我有一个`IBOutlet` `UIImageView*`. `ViewController`释放 Controller 后（我不再需要它），`UIImageView`* has retainCount 为 2（代码没有任何保留），即使在释放两次后 [我认为，这完全错误]（在 Controllers 中`dealloc`）`UIImageView`内存仍然分配。`UIViewController`为什么会发生这种情况，我的问题是 - 在 dealloc之后如何完全释放内存`IBOutlets`？

```
@interface GRULogInController (){
    IBOutlet UIImageView* bgImage;
}
@end
@implementation GRULogInController
....

- (void)viewDidUnload
{
    NSLog(@"%d", bgImage.retainCount); // Shows 2 !!!
    [bgImage release];
    [bgImage release]; // Object releases but memory not freed (It shown in Instruments)

    [super viewDidUnload];
}

- (void) dealloc
{
    [self viewDidUnload];
    [super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:40:19.410

首先看一下这个链接。[whentouseretaincount.com](http://whentouseretaincount.com)
它只是没有说明任何有用的信息。

其次，iOS 在需要内存时会清除 viewController，而不是在您释放 viewController 后立即清除。
您不应该两次释放 imageView，让 viewController 处理它。

另一件事是 viewDidUnload 已被弃用，您应该改为在 dealloc 中执行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:38:48.727

> UIImageView* 的 retainCount 为 2

你怎么知道的？请不要依赖`retainCount`。仍然：

1 - 您的`IBOutlet`参考。

2 - 您`UIView`将其作为对其子 UI 元素的强烈引用。

所以你去，你的retainCount 2（理论上）。

使用仪器检查您是否有内存泄漏。此外，正如 Frederik 指出的那样，不要使用`viewDidUnload`，不再需要它。

# unix - 以 sybase 可理解的日期时间格式格式化 csv 中的字符串列

> ID：13044645
> 
> 赞同：0
> 
> 时间：2012-10-24T07:31:52.643
> 
> 标签：unix, awk, sybase

我有一个 csv 文件，其中包含许多列以及两列的日期和时间分别为“ddmmyyyy”和“hhmmss”。我想将此文件转换为另一个 csv 文件，例如可以 bcp 将其转换为 sybase 表。
我为此使用 awk。但是现在我遇到了一个问题，我想将这些日期和时间列转换为格式为“yyyy-mm-ddTHH:MM:SS”的单列，以便在 sybase 中使用。
我怎么能在 awk 中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:43:19.297

很长的路要走`awk`：

```
awk '{ printf "%s-%s-%sT%s:%s:%s\n", substr($1, 5), substr($1, 3, 2), substr($1, 0, 2), substr($2, 0, 2), substr($2, 3, 2), substr($2, 5, 2) }' file.txt 
```

结果：

```
yyyy-mm-ddTHH:MM:SS 
```

# php - 像搜索引擎一样显示结果超链接编号

> ID：13044647
> 
> 赞同：0
> 
> 时间：2012-10-24T07:32:04.910
> 
> 标签：php, math, mysqli

有谁知道如何在搜索引擎加载下一个结果时在结果页面底部创建超链接编号的好资源？

该页面将加载前 10 个结果。然后，如果您单击该数字，它会在该 10 个数字范围内加载相应的结果。

例子：

0-10 -> 不显示数字

11-20 -> 显示 1, 2

21-30 -> 1, 2, 3

最多 50 任何超过 50 的东西 1,2,3,4,5.....67 [最后一个数字]。

到目前为止我的想法（我在 PHP/mysqli 中这样做，但逻辑比代码更重要）：

```
$total = mysqli_num_rows($result) //total number of reqults from sql query
if ($total>10) {
$last = intval($total/10) + 1 //get the last number of the results

if($last <= 5){
for ($i, $i<$last, $i++){
//print the numbers as hyperlinks
} else {
  //print 1 through 5 ... then $last
}
} 
```

虽然这是静态的，只有 1-5...最后一个数字，而搜索引擎有它，所以如果你点击这个数字，它会记住那个数字并以此为基础建立新的逻辑。因此，如果我单击公式中的 5，它应该会更改为：

[上一个] 3,4,5,6,7....67 [下一个]

然后我会再次将数字传递给页面本身，并根据传递的数字限制结果。关于传递信息的最佳方式还有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:43:00.907

您正在寻找分页脚本。访问此[链接](http://www.awcore.com/dev/)该页面是阿拉伯语，但第四篇文章是分页的，您可以下载分页的英文或阿拉伯语版本的源代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:46:54.190

基本上，您需要两个值来创建分页、限制和偏移。

```
1.The limit is the amount of items your are displaying at the same time.
2.The offset is from where you started your query. 
```

因此，假设您在每页中有 5 个项目，总共有 25 个项目。

在您的查询中，您必须限制 5,0（项目数量和查询将开始的位置）。

现在，如果除以 5（限制）/25（总计），您将得到 5（页数）。

现在在第 0 页（开始）中，您可以通过将页码乘以限制来获得偏移量，因此 0（页面）* 5（限制）为您提供 0（在第一页中，您从偏移量 0 开始）。

现在在第 3 页，将 3(page) * 5 (limit) 乘以 15，这意味着在第 3 页（如果考虑到您实际上从第 0 页开始，则为 4 页）您将从偏移量 16 显示到20.

最后在第 4 页（对于您的用户来说，这将是第 5 页，因为他们从第 1 页开始，而不是第 0 页）您将显示从偏移量 21 到 25，它们是您查询中的所有项目。

# css - 如何将多个 CSS 选择器应用于特定的 div？

> ID：13044652
> 
> 赞同：3
> 
> 时间：2012-10-24T07:32:20.933
> 
> 标签：css

我正在创建一种 CMS。在这个系统中，每个编辑器都可以定义自己的 CSS，如下所示。这种风格应该适用于自己的文章。

```
<style>
p{
color:blue;text-align:center;
}
a{
color:red;
}
</style> 
```

在这种情况下，这些样式必须应用于特定的 div `id="editors_area"`。

```
<body>
    <div id="editors_area">
        ===Styles should be applied only here.===
        Each editors article are displayed in this area.
    </div>
    ===Styles should NOT be applied here.===
</body> 
```

为了实现这一点，我计划插入`#editors_area`编辑器的 CSS，作为服务端的后代选择器，如下所示。

```
<style>
#editors_area p{
color:blue;text-align:center;
}
#editors_area a{
color:red;
}
</style> 
```

但我想还有更简单的方法可以实现上述要求。

**编辑** 我删除了 javascript 代码。这不适合这里。

任何想法将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T07:35:43.600

CSS 就是为此而设计的，所以您的第一个方法是正确的——更不用说您拥有的 jQuery 方法不起作用。

您应该只在页面加载后需要使用 jQuery 来更改`css`属性，即使这样，您也应该使用`addClass()`or`removeClass()`并且在 CSS 文件中定义这些类。这是一个更好的关注点分离。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T07:41:21.707

SASS 和 SCSS 让你有能力做这样的事情（除非我完全错过了你的问题的重点，这是可能的，因为我从前端人员那里得到的信息差不多）。

就像是：

```
#editors_area
    a 
        color:blue
        text-align:center
    p
        color:red 
```

根据您使用的语言，可能值得一试。我见过 Ruby、Python、PHP 和 Java 的实现，虽然我自己只使用过 Ruby。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T07:36:51.080

你试试这个

```
$("#editors_area > *").css("color","blue"); // * may be p or a whatever 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T07:38:50.957

如果您正在寻找一种从 jQuery 动态插入 CSS 块的方法，那么您可以执行以下操作：

```
$('<style type="text/css">
    #editors_area p {
       color:blue;text-align:center;
    }
    #editors_area a {
       color:red;
    }
    </style>').appendTo('head'); 
```

# mysql - 选择查询如何在内部检索数据？

> ID：13044656
> 
> 赞同：0
> 
> 时间：2012-10-24T07:32:39.587
> 
> 标签：mysql

我有一个 mysql 内存表，其中包含分配给每一行的优先级。我每 2 分钟创建一次这个表，这个表被调用几乎 100 次/秒。

它包含大约 800 行。

我正在运行的查询是这样的：

```
select * from table order by priority limit 0,20 
```

`the order by`我想优化这个查询。我可以在创建表时按排序顺序放置数据，并且可以假设如果我删除子句，提取的数据将始终根据优先级排序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:39:15.207

我有两个建议：

1.  如果您创建此表并且在创建后不修改，则在创建和填充后执行此操作`ALTER TABLE table ORDER BY priority`。这将对您的桌子进行排序，您可以放弃订购。
2.  不要使用 mysql 对结果进行排序。为它使用[php](http://php.net/manual/en/function.sort.php)。

也不要忘记索引。如果您没有关闭 mysql 结果缓存，那么您的所有选择都将被缓存并且不计算结果。所以你必须检查你的配置。[在这里](http://dev.mysql.com/doc/refman/5.1/en/query-cache-configuration.html)阅读更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:47:33.513

您可以在数据库端做 3 件事，在实际的 HTML/PHP 端做 1 件事来优化这个查询：

1.  使用带有“优先级”索引的 ISAM 表 @ [http://dev.mysql.com/doc/refman/5.0/en/create-index.html](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)并使其尽可能小，例如“优先级”SMALLINT(3) UNSIGNED清零。最后一点，限制，你已经得到了。

2.  使用操作码缓存器缓存结果并将它们直接传递到人们的浏览器，如果信息只是经常更改，而不需要重新查询数据库，例如[http://en.wikipedia.org/wiki/List_of_PHP_accelerators](http://en.wikipedia.org/wiki/List_of_PHP_accelerators)

# android - 我想在单击时开始另一个活动？

> ID：13044667
> 
> 赞同：0
> 
> 时间：2012-10-24T07:33:00.313
> 
> 标签：android, android-activity

好吧，我有一个活动，它只包含棕色背景的相对布局，如果用户单击屏幕上的任何位置，我想启动另一个活动，我该怎么做？

```
 @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainscreen);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:37:54.747

首先，然后`RelativeLayout`通过放入`android:id="@+id/relativeLayout"`您的布局文件来为您提供 ID。

```
RelativeLayout l = (RelativeLayout) findViewById(R.id.relativeLayout1);
l.setOnClickListener(new View.OnClickListener()
{

    public void onClick(View v)
    {
       // startActivity here

    }
}); 
```

或不使用您`RelativeLayout`刚刚实施的`onTouchEvent(MotionEvent)`活动

```
public boolean onTouchEvent(MotionEvent event)
{
    if(event.getAction() == MotionEvent.ACTION_UP)
    {
        // start activity
    }
    return super.onTouchEvent(event);
} 
```

注意：尚未尝试此代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:36:17.147

将 onClick 属性添加到您的布局 xml，并在您的活动中实现 onClick 方法以启动新活动。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/myLayout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:onClick="onClick"
android:orientation="vertical" > 
```

在您的活动中添加一个 onClick 方法。

```
public void OnClick(View v) {
  startActivity(new Intent(this,MyNewActivity.class));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T07:37:21.880

我认为您的主屏幕具有线性，相对，框架的父布局。参考它并处理点击监听器。

例如：如果您的父布局是线性的。

```
LinearLayout linear=(LinearLayout)findViewById(R.id.linear);

 linear.setOnClickListener(this); 
```

# android - 屏幕页面正在切换，但在 android 的下一个屏幕中未显示条形图

> ID：13044670
> 
> 赞同：0
> 
> 时间：2012-10-24T07:33:24.957
> 
> 标签：android, bar-chart

我无法在下一个屏幕上显示条形图。这里我正在使用 achartengine 来创建条形图。而且我在 log-cat 上也没有收到任何错误。请提出建议！..

感谢您宝贵的时间！..

*请找到我的参考资料*

**Chart_MainActivity.java**

```
public class Chart_MainActivity extends Activity 
{   
Button btn;
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btn = (Button)findViewById(R.id.button_invoke);
    btn.setOnClickListener(new View.OnClickListener() 
    {

    @Override
    public void onClick(View v) 
    {
        Intent int_obj = new Intent(Chart_MainActivity.this,NextActivity.class);
        startActivity(int_obj);
        }
    });   }} 
```

**NextActivity.java**

```
public class NextActivity extends Activity 
{
@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);
    createIntent();
 /*     
    Intent intent = createIntent();
    startActivity(intent);
 */
}   

public void createIntent()
{       
    String[] titles = new String[] { "Order's profit of the year", " " };

    List<double[]> values = new ArrayList<double[]>();

    values.add(new double[] { 7, 2, 5, 8 });
    values.add(new double[] {});

    int[] colors = new int[] { Color.BLUE, Color.WHITE};

    XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);
    renderer.setOrientation(Orientation.HORIZONTAL);

setChartSettings(renderer, "Profit for the year 2012", " ", " ",0,10, 0,10, Color.GRAY, Color.LTGRAY);

    renderer.setXLabels(1);
    renderer.addXTextLabel(0.75, "ord1");
    renderer.addXTextLabel(1.75, "ord2");
    renderer.addXTextLabel(2.75, "ord3");
    renderer.addXTextLabel(3.75, "ord4");
    renderer.setPanEnabled(true, false);

    int length = renderer.getSeriesRendererCount();

for (int i = 0; i < length; i++) 
{
    SimpleSeriesRenderer seriesRenderer = renderer.getSeriesRendererAt(i);
    seriesRenderer.setDisplayChartValues(true);
    }
ChartFactory.getBarChartIntent(this, buildBarDataset(titles, values), renderer,Type.DEFAULT);
    }

 protected XYMultipleSeriesRenderer buildBarRenderer(int[] colors) 
 {  

    // creates a SeriesRenderer and initializes it with useful default values as well as colors

    XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();

    renderer.setAxisTitleTextSize(15);
    renderer.setChartTitleTextSize(20);
    renderer.setLabelsTextSize(15);
    renderer.setLegendTextSize(15);

    int length = colors.length;

    for (int i = 0; i < length; i++) 
    {
       SimpleSeriesRenderer r = new SimpleSeriesRenderer();
       r.setColor(colors[i]);
       renderer.addSeriesRenderer(r);
       }
    return renderer;
    }

protected void setChartSettings(XYMultipleSeriesRenderer renderer, String title, String xTitle,
    String yTitle, double xMin, double xMax, double yMin, double yMax, int axesColor,int labelsColor) 
    {
        // sets lots of default values for this renderer

        renderer.setChartTitle(title);
        renderer.setXTitle(xTitle);
        renderer.setYTitle(yTitle);

        renderer.setXAxisMin(xMin);
        renderer.setXAxisMax(xMax);

        renderer.setYAxisMin(yMin);
        renderer.setYAxisMax(yMax);

        renderer.setAxesColor(axesColor);
        renderer.setLabelsColor(labelsColor);

        renderer.setApplyBackgroundColor(true);
        renderer.setBackgroundColor(Color.GRAY);
      }

protected XYMultipleSeriesDataset buildBarDataset(String[] titles, List<double[]> values) 
{   
  // adds the axis titles and values into the data-set

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    int length = titles.length;

    for (int i = 0; i < length; i++) 
    {
       CategorySeries series = new CategorySeries(titles[i]);
       double[] v = values.get(i);
       int seriesLength = v.length;

       for (int k = 0; k < seriesLength; k++) 
       {
          series.add(v[k]);
        }
       dataset.addSeries(series.toXYSeries());
      }

      return dataset;
    }
} 
```

**清单.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.barchart_test"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="8" android:maxSdkVersion="15"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity   android:name=".Chart_MainActivity"
                android:label="@string/title_activity_chart__main" >
    <intent-filter>
       <action android:name="android.intent.action.MAIN" />
         <category android:name="android.intent.category.LAUNCHER" />
         </intent-filter>
       </activity>
    <activity android:name=".NextActivity"></activity>

</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-24T07:48:11.050

我认为您需要修复您的清单 xml 并将意图添加到 .Nexy 活动活动

```
<activity android:name=".NextActivity">
<intent-filter>  
   <action android:name="android.intent.action.next_activity" />  
     <category android:name="android.intent.category.DEFAULT"
</activity> 
```

# javascript - 如何在地址栏中不显示#

> ID：13044673
> 
> 赞同：1
> 
> 时间：2012-10-24T07:33:44.203
> 
> 标签：javascript, html

当我们单击`<a href="#" onclick="function();">Post data to server</a>`时，`#`会在 URL 的末尾显示 。

有没有办法让它*不*显示？

我已经尝试删除该`href="file.ext"`部分，它可以工作，尽管它会产生不需要的结果。它删除了超链接的颜色和下划线样式，使其看起来只是常规文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T07:36:44.793

试试看`javascript:void(0)`不显示

```
 <a href="javascript:void(0)" onclick="function();">Post data to server</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T07:36:39.223

您可以将 href 更改为`javascript: void(0);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T07:38:12.127

你可以`return false`在函数中

# ruby-on-rails - ActiveRecord::RecordInvalid 因为字段必须是唯一的，尽管使用了该字段的序列

> ID：13044675
> 
> 赞同：0
> 
> 时间：2012-10-24T07:33:54.750
> 
> 标签：ruby-on-rails, activerecord, factory-bot

再会。我得到这个错误

```
1) Subscription 
     Failure/Error: @subscription = FactoryGirl.create(:subscription)
     ActiveRecord::RecordInvalid:
       Encountered errors: Email already exists, Login already exists 
```

虽然在 FactoryGirl 我指定了这些字段的唯一性^

召唤工厂女孩

```
@subscription = FactoryGirl.create(:subscription) 
```

build 无法实现，因为

> 应该 validate_uniqueness_of(:category_id).scoped_to(:user_id)

工厂：

```
factory :subscription do
    association :category, factory: :advt_category 
    user
  end
factory :user do
    sequence(:login) { |n| "user__#{n}"  } 
    password "password"
    sequence(:email) { |n| "example__#{n}@example.com"}  
end 
```

如何解决这个错误？为什么会出现？

**更新**

我最终销毁了该规范中用户模型的所有记录

```
before do
User.destroy_all
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:29:02.490

最有可能的问题是，当您开始规范时，您的测试数据库不干净。当 rspec 过早退出或被杀死时，可能会发生这种情况。

您的方法`before { User.destroy_all }`可行，但很乏味（因为您可能还需要在其他规范中添加它），而且速度很慢。

我建议您使用[database_cleaner gem](https://github.com/bmabey/database_cleaner)并像这样扩展您的 rspec 配置：

```
RSpec.configure do |config|
  config.use_transactional_fixtures = false

  config.before :suite do
    DatabaseCleaner.strategy = :transaction
    DatabaseCleaner.clean_with :truncation
  end

  config.before(:each) { DatabaseCleaner.start }
  config.after(:each)  { DatabaseCleaner.clean }
end 
```

当您将 Capybara 用于您的请求规范时，将`before :each`块更改为：

```
config.before :each do
  if Capybara.current_driver == :rack_test
    DatabaseCleaner.strategy = :transaction
  else
    DatabaseCleaner.strategy = :truncation
  end

  DatabaseCleaner.start
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:26:08.267

我认为这会奏效

为用户调用 FactoryGirl 并将其传递给订阅调用

```
@user = FactoryGirl.create(:user) 
@subscription = FactoryGirl.create(:subscription, :user_id => @user.id) 
```

至于为什么会发生这种情况，我们需要查看更多规范

# database - 在数据库和 Json 中保存新行

> ID：13044680
> 
> 赞同：1
> 
> 时间：2012-10-24T07:34:11.910
> 
> 标签：database, json, newline

我有这个问题：我有一个由用户填写的 HTML 文本区域。（而且他可以按 Enter 按钮换行）。然后我使用以下命令获取 textarea 的值：

```
document.getElementById("textareaCommento") 
```

我使用 XmlHttpRequest 将值传递给 servlet。在 servlet 中，我将此值保存在数据库中。从这一点开始，我没有任何问题......

然后，在另一部分中，我想从数据库中获取值。使用 servlet 我进行此查询

```
Select * from comments 
```

我将结果转换为 json。这里我有问题......换行符使我的 JSON 字符串无效。例如：

```
"Comment":"hello
Word" 
```

我能怎么做？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:39:32.827

您必须将`\n`字符从数据库替换为类似`<br/>`

对于替换，请参见[在 java 中用 <br /> 替换 \n 和 \r\n](https://stackoverflow.com/questions/3056834/replace-n-and-r-n-with-br-in-java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-08T00:15:34.720

这个 CSS 对我有用，

空白：前行；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:37:16.370

您应该能够对您的值进行 url 编码，因此 hello world 实际上会变为“hello%20world”，要在 java 中执行此操作，请参见此处：

[在 Java 中编码 URL 查询参数](https://stackoverflow.com/questions/5330104/encoding-url-query-parameters-in-java)

要在 javascript 中执行此操作，请参见此处：

[在 JavaScript 中编码 URL？](https://stackoverflow.com/questions/332872/how-to-encode-a-url-in-javascript)

# php - Yii CGridview 使用 CSqlDataProvider 排序

> ID：13044681
> 
> 赞同：3
> 
> 时间：2012-10-24T07:34:15.267
> 
> 标签：php, yii

我正在使用 CSqlDataProvider 构造 CGridview 我不能使用 CActiveRecord，因为结果集很大并且会引发内存错误。列需要是可排序的。我应该如何实现这一目标？

示例 sql

```
$orders_query_raw = 'select  o.order_id, o.customer_name, o.customer_email, o.customer_advertiser, o.payment_method, o.created, o.last_updated, o.currency, o.currency_value, o.status, o.blinking, s.name, ot.text order_total, o.customer_id, op.product_id, o.phonebooking 
from `order` o, `order_total` ot, `order_status` s , order_product op  
where o.order_id = op.order_id and o.status = s.order_status_id and ot.order_id = o.order_id and s.language_id = '1' and ot.class = 'ot_total'  group by o.order_id' 
```

sql 数据提供者

```
 $dataProvider = new CSqlDataProvider($orders_query_raw, array(
        'totalItemCount'=>$count, // get from a count query
        'pagination'=>array(
            'pageSize'=>50,
        ),
    )); 
```

和gridview

```
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider' => $dataProvider,
    'id'=>'order-grid',
    'columns' => array(
        array(
            'header'=>'Order ID',
            'value'=>array($this, 'gridOrderId'),
            'type'=>'raw',
        ),
        array(
            'header'=>Yii::t('order', 'Customers'),
            'name'=>'customer.fullName',
            'value'=>'CHtml::link($data[\'customer_name\'], \'mailto:\'.$data[\'customer_email\'])',
            'type'=>'raw',
        ),
        array(
            'header'=>Yii::t('order', 'Order total'),
            'value'=>'strip_tags($data[\'order_total\'])',
            'type'=>'raw',
            'htmlOptions'=>array(
                'style'=>'text-align:right;',
            ),
        ),
        array(
            'header' => Yii::t('order', 'Date Purchased'),
            'name' => 'created',
        ),
        array(
            'header'=> Yii::t('order', 'Last modify date'),
            'value'=>array($this, 'gridLastModified'),
        ),
        array(
            'header' => Yii::t('order', 'Status changed by'),
            'value' => array($this, 'gridLastModifiedUserFirstName'),
        ),
        array(
            'header' => Yii::t('provider', 'Provider\'s code'),
            'value' => array($this, 'gridProviderCode'),
            'type' => 'raw',
            'htmlOptions'=>array(
                'class'=>'nobr',
            ),
        ),
        array(
            'header' => Yii::t('order', 'Follow up'),
            'value' => array($this, 'gridFollowUp'),
            'type' => 'raw',
        ),
        array(
            'header' => Yii::t('order', 'Order status'),
            'value' => '$data[\'name\']',
        ),
        array(
            'class'=>'CButtonColumn',
            'template'=>'{update}',
            'header'=>'Action',
            'buttons'=>array(
                'update'=>array(
                    'url'=>'Yii::app()->createUrl(\'order/update\', array(\'order_id\'=>$data[\'order_id\']))',
                ),
            ),
        ),
    ),
)); 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T10:33:11.133

要在数据提供者的网格视图中启用排序（*通过单击列的标题*`CSqlDataProvider`） ，您至少需要两件事：

1.  `CSort`必须为数据提供者定义对象，该对象[`attributes`是可排序](http://www.yiiframework.com/doc/api/1.1/CSort#attributes-detail)的。
2.  必须定义[`name`列的，](http://www.yiiframework.com/doc/api/1.1/CDataColumn#name-detail) **但仅在**您指定`columns`网格视图的属性的情况下，否则如果列属性留空，则 CSort 对象中提到的任何属性都是可排序的。

也就是说，另一个答案应该适用于sql简单并且来自1个表的情况，但在你的情况下，sql有点复杂，即数据来自多个表，解决方案会略有变化。

在这种情况下，您将不得不考虑冲突的列名（如果有的话），以及 CSort`attributes`数组的正确规范。

例子：

*   任何表中都没有冲突的列名（与其他答案相同）：

    ```
    $dataProvider=new CSqlDataProvider($sql, array(
        'totalItemCount'=>$count,
        'sort'=>array(
            'attributes'=>array(
                'order_id, order_total' // csv of sortable column names
            )
        )
    )); 
    ```

    然后在你的网格中：

    ```
    array(
        'header'=>Yii::t('order', 'Order total'),
        'name'=>'order_total',// to make header clickable to sort
        'value'=>'strip_tags($data[\'order_total\'])',
        'type'=>'raw',
        'htmlOptions'=>array(
            'style'=>'text-align:right;',
        ),
    ), 
    ```

*   列名冲突：

    1.  首先，在你的 sql 中给所有冲突的名称别名。
    2.  其次，将这些别名指定为对象中的可排序`attributes`对象`CSort`：

        ```
        'attributes'=>array(
            'some_alias, some_other_alias'
        ) 
        ```

    3.  `name`为 中的列指定`columns`：

        ```
        array(
            'header'=>'Foo',
            'name'=>'some_alias',
            'value'=>'$data[\'some_alias\']' // this is actually redundant in this
            // case, because the name will itself pick up the value, and we don't
            // need to specify value explicitly if we are not applying any function to it
        ) 
        ```

请注意，通过 url 调用排序只需指定排序对象即可启用，无需使用`name`，除非您想*单击​​对标题进行排序*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:45:53.267

尝试如下

```
 $sort = new CSort();
    $sort->defaultOrder = 'order_id'; // for initial order
    $sort->attributes = array(
        'created'
    );
$dataProvider = new CSqlDataProvider($orders_query_raw, array(
    'totalItemCount'=>$count, // get from a count query
    'pagination'=>array(
        'pageSize'=>50,
    ),
    'sort'=>$sort
)); 
```

# dimension - 过滤维度的代码

> ID：13044682
> 
> 赞同：1
> 
> 时间：2012-10-24T07:34:16.243
> 
> 标签：dimension

我在 DAX2012 和 ForecastSales 表单中工作。在 tabPageFilter 选项卡上，我想为维度和连接到维度的复选框添加字段 - 与过滤项目的方式相同。我怎么做？当用户在此过滤器字段中输入值时，我必须编写代码进行过滤。这通常使用 QueryBuildRange 来完成，但我不知道如何在 DAX2012 中的维度上使用它。我可以使用 DimensionAttributeValueSetStorage 类找到具有所选维度的所有 forecastSales，但我不能在 QueryBuildRange 中使用它。任何想法如何解决这个问题？

# iphone - iOS AirPrint-设置默认打印机

> ID：13044683
> 
> 赞同：0
> 
> 时间：2012-10-24T07:34:16.947
> 
> 标签：iphone, ios, ipad, ios6, airprint

我有一个在公司内部运行的企业 iPad 应用程序。我在应用程序中使用 AirPrint，并且我的 WIFI 网络中有几台空中打印机。

我需要为某些用户组设置默认打印机并限制其他所有打印机。（无需显示在打印机列表中）

有人知道怎么做这个吗？我在 UIPrintInfo 中看到了一个 printerId 属性。也许我可以用这个。没有把握。

```
printerID
An identifier of the printer to use for the print job.

@property(nonatomic, copy) NSString *printerID
Discussion
This property is set through user selection in the printing user interface. You may provide a printer ID as a hint (for example, the last printer used from a particular print job). The default value is nil. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:42:59.743

我收到的苹果官方回复如下。

当前的 iOS 打印系统无法做到这一点。欢迎提交错误报告，尽管我不能说我们会在未来的 iOS 版本中提供这样的机制。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T07:48:33.770

你可以试试这个（未测试）：

```
- (IBAction)printContent:(id)sender {

    UIPrintInteractionController *pic = [UIPrintInteractionController sharedPrintController];

    if  (pic && [UIPrintInteractionController canPrintData: self.myPDFData] ) {

        pic.delegate = self; 

        UIPrintInfo *printInfo = [UIPrintInfo printInfo];
        printInfo.outputType = UIPrintInfoOutputGeneral;
        printInfo.jobName = [self.path lastPathComponent];
        printInfo.duplex = UIPrintInfoDuplexLongEdge;

        //Set the printer ID you want to use
        printInfo.printerID = thePrinterIDYouWant;

        //Set the printInfo to the pritnController
        pic.printInfo = printInfo;

        //Enhance the print here
    }
} 
```

# ruby-on-rails - twitter 引导模式窗口中显示的 Ruby 错误

> ID：13044684
> 
> 赞同：3
> 
> 时间：2012-10-24T07:34:17.170
> 
> 标签：ruby-on-rails, twitter-bootstrap

我在 Rails 应用程序中使用 Twitter Bootstrap 框架。我想要解决的是如何在窗口中呈现错误而不重新加载页面。

下面是一个例子：

```
#modalEvent.modal.hide
  .modal-header
    %button.close{"data-dismiss" => "modal", :type => "button"} ×
    %h3 Schedule Form
  = form_for(@schedule, :html => { :class => "form-horizontal"})  do |f|
    .modal-body
      - if @schedule.errors.any?
        #notice.alert.alert-error
          %button.close{"data-dismiss" => "alert"} ×
          %strong Error:
          = pluralize(@schedule.errors.count, "error")
          prohibited #{event_display(@schedule.event)} from being
          saved:
          %ul
            - @schedule.errors.full_messages.each do |msg|
              %li= msg
      .widget-content.nopadding
        .control-group
          = f.label :event_type, :class =>'control-label'
          .controls
            = f.select :event, Schedule::EVENT_TYPES
        #3{:style => 'display:none'}
          .control-group
            = f.label :name, :class =>'control-label'
            .controls
              = f.text_field :result_id, :class => "required error"
        .control-group
          = f.label :date_and_time, :class =>'control-label'
          .controls
            = f.text_field :time, :class => "datepicker", :required => :required, :type => :datetime, "data-date-format" =>"dd/mm/yyyy"
        .control-group
          = f.label :duration, :class =>'control-label'
          .controls
            .input-append
              = f.number_field :duration, :placeholder => 'Time in Minutes', :required => :required
              %span.add-on
                %i.icon-time
            %span.help-block Duration of event in minutes
        .control-group
          = f.label :arrival_time, :class =>'control-label'
          .controls
            .input-append
              = f.number_field :arrival_time, :placeholder => 'Time in Minutes', :required => :required
              %span.add-on
                %i.icon-time
            %span.help-block Time in minutes before event
        .control-group
          = f.label :location, :class =>'control-label'
          .controls
            = select("schedule", "location_id", Location.all.collect { |p| [p.name, p.id] }, {:include_blank => 'None'})
        .control-group
          = f.label :players, :class =>'control-label'
          .controls
            = select(:schedule, :selected_players, @players.map { |p| [full_name(p), p.id] }, {:include_blank => false}, "data-placeholder" => 'Add Players to Lineup', :prompt => 'Add Players to Lineup', :multiple => "multiple")
        #1{:style => 'display:block'}
          -if current_user.admin?
            .control-group
              = f.label :team, :class =>'control-label'
              .controls
                = select("schedule", "team_id", Team.all.collect { |p| [p.name, p.id] }, {:include_blank => 'None'})
          - else
            =f.hidden_field :team_id, :value => current_user.team_id
          .control-group
            = f.label :opponent, :class =>'control-label'
            .controls
              = select("schedule", "opponent_id", Opponent.all.collect { |p| [p.name, p.id] }, {:include_blank => 'None'})
          .control-group
            = f.label :home_or_away, :class =>'control-label'
            .controls
              = f.select :home_or_away, Schedule::HOME_OR_AWAY, {:include_blank => 'None'}
    .modal-footer
      = f.submit 'Save Event', :class => 'btn btn-primary'
      %a.btn.btn-danger{"data-dismiss" => "modal", :href => "#"} Cancel 
```

控制器

```
def create
    @schedule = Schedule.new(params[:schedule])
    @user = User.find(current_user)
    @players = User.where(:team_id => current_user[:team_id]).all

    respond_to do |format|
      if @schedule.save
        Notifier.event_added(@user,@schedule).deliver
        format.html { redirect_to(schedules_url,
                                  :notice => "#{event_display_c(@schedule.event)} vs #{@schedule.opponent.name} was successfully created.") }
        format.json { render :json => @schedule, :status => :created, :location => @schedule }
      else
        format.html { render :action => "new" }
        format.json { render :json => @schedule.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:32:13.630

如果您想避免页面重新加载并仍然显示服务器提供的错误消息，您必须以某种方式使用 AJAX。我认为仍然没有一种正确的方法可以做到这一点。您应该从谷歌搜索[PJAX](https://www.google.com/?q=PJAX)开始。你应该了解的另一件事是 Rails 提供了[不显眼的 JavaScript](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for-label-Unobtrusive+JavaScript)

另外我建议您尝试一下[simple_form gem](https://github.com/plataformatec/simple_form)，它与 AJAX 无关，但它会简化您的视图；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T18:29:45.803

我做了一些与此非常相似的事情，尽管使用 PHP/CodeIgniter 而不是 Rails，但为此我在模式窗口中使用引导程序。

我所做的是，在提交表单时，我将表单数据 ajax 到一个流程脚本，然后验证数据 - 如果验证失败，它返回（通过 JSON 对象）包含错误和可选错误消息的控制组类显示。如果验证成功，它将执行您希望执行的任何操作，并简单地返回一个“成功”标志，指示程序显示成功消息并关闭模式。

让我知道这个样本是否对你有用。如果是，我可以提供我执行的服务器端验证和输出的示例，尽管它不会在 ruby​​ 中。

这是一个示例表单，采用引导模式格式：

```
<div class="modal-header">
  <button type="button" class="close" data-dismiss="modal">&times;</button>
  <h3>Add Something</h3>
</div>
<div class="modal-body">
  <form id="your_form">
      <fieldset class="control-group id-group">
        <label>Some ID:</label><input type="text" name="SomeID" /><div class="clear"></div>
        <label>Another ID:</label><input type="text" name="Another ID" /><div class="clear"></div>
      </fieldset>
      <fieldset class="control-group category-group">
        <label>Category 1:</label><input type="text" name="Cat1" /><div class="clear"></div>
        <label>Category 2:</label><input type="text" name="Cat2" /><div class="clear"></div>
      </fieldset>
      <fieldset class="control-group description-group">
        <label>Description:</label><input type="text" name="Description" /><div class="clear"></div>
      </fieldset>
      <div class="clear"></div>
  </form>
  <div class="clear"></div>
  <div class="alert alert-error" id="addError">
  </div>
  <div class="alert alert-success" id="addSuccess">
  </div>
</div>
<div class="modal-footer">
  <a href="#" class="btn" data-dismiss="modal">Cancel</a>
  <a href="#" class="btn btn-primary" id="saveSomethingButton" data-loading-text="Please Wait...">Save</a>
</div> 
```

这是我在提交表单时调用的 javascript 示例：

```
$("#saveSomethingButton").click(function() {

  //hide any previous errors should this be a second submit
  $(".alert").hide();
  $(".control-group").removeClass('error');
  $("input").blur();
  //set the save button to a "please wait" state to prevent double submission
  $("#saveSomethingButton").button('loading');

  //post to the validation script - if 
  $.post("<?php echo base_url();?>somecontroller/processfunction", $("#your_form").serialize(), function(data) {

    //if we were successful, show the happiness message and close the modal
    if (data.success == 1) {

      $("#addSuccess").html("<strong>Success! </strong> Something successfully added to database.");
      $("#addSuccess").fadeIn(300, function() {

        setTimeout(function() {

          $("#someModal").modal('hide');
        }, 2000);
      });
    //otherwise, highlight the problem fields and display the error
    } else {

      $("#addError").html("<strong>Error: </strong> "+data.message);
      $("."+data.fieldset).addClass("error");
      $("#addError").fadeIn(300);
      $("."+data.fieldset+":first input:first").focus();
    }
    //reset the button state so that they can correct errors and submit again
    $("#saveSomethingButton").button('reset');
  }, "json");

    //return false to prevent default form submission, which would reload the page
    return false;
}); 
```

# javascript - Socket.io node.js Math.random 在所有用户上得到不同的结果

> ID：13044685
> 
> 赞同：3
> 
> 时间：2012-10-24T07:34:17.017
> 
> 标签：javascript, node.js, socket.io

我目前正在使用 node.js、socket.io 和 javascript 开发扑克德州扑克应用程序。

我遇到的问题是，当我尝试使用 math.random 函数洗牌时，它会按预期洗牌，但对于连接到应用程序的每个用户，它会以不同的方式洗牌。

基本上我希望能够使用某种随机函数来洗牌，但仍然对所有用户以同样的方式洗牌。

我正在使用 io.sockets.emit(); 对所有用户使用随机播放功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T07:39:48.873

在服务器端（node.js）洗牌，然后向每个用户发送他的卡片和公共卡片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:37:49.360

如果它允许您设置种子，请在玩家之间共享种子，然后允许他们使用此种子作为随机数生成器来洗牌。

另一种方法是让主持人洗牌，然后让主持人告诉其他玩家他们的牌应该按什么顺序排列。

# android - 收到短信时强制关闭对话框

> ID：13044686
> 
> 赞同：2
> 
> 时间：2012-10-24T07:34:18.047
> 
> 标签：android, android-intent, android-emulator, sms, broadcastreceiver

我编写了一个程序来在 Android 中发送和接收短信。发送短信成功，但当目标手机收到短信时，会显示强制关闭对话框。点击后打开收到的短信。

我希望收到的短信显示在我放入页面的文本视图中。

短信接收器.java

```
public class SmsReceiver extends BroadcastReceiver
    {
        public String str = "";
         @Override
            public void onReceive(Context context, Intent intent) 
            {
                //---get the SMS message passed in---
                Bundle bundle = intent.getExtras();        
                SmsMessage[] msgs = null;

                if (bundle != null)
                {
                     //Object[] smsExtra = (Object[]) bundle.getSMS_EXTRA_NAME);
                    //---retrieve the SMS message received---
                    Object[] pdus = (Object[]) bundle.get("pdus");
                    msgs = new SmsMessage[pdus.length]; 
                    //for put sms in database---------------------
                   // ContentResolver contentResolver = context.getContentResolver();
                    //End for put sms in database---------------------
                    for (int i=0; i<msgs.length; i++){
                        msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);    
                       // SmsMessage sms = SmsMessage.createFromPdu((byte[])smsExtra[i]);

                        str += "SMS from " + msgs[i].getOriginatingAddress();                     
                        str += " :";
                        str += msgs[i].getMessageBody().toString();
                        str += "\n";  
                    }

                    //---display the new SMS message---
                // Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
                   Intent act=new  Intent(context,MainActivity.class);
                   act.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                   act.putExtra("message",str);
                   context.startActivity(act);

                }                  
            }
        } 
```

MainActivity.java

```
public class MainActivity extends Activity {
SmsReceiver _smsReceiver =new SmsReceiver();
private TextView showSms;
private String ReceivedSms;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // _smsReceiver.onReceive(getBaseContext(), getIntent());
        setContentView(R.layout.activity_main);
        Intent _intent =getIntent();
        ReceivedSms=_intent.getStringExtra("message");
          showSms=(TextView)this.findViewById(R.id.txt_Show);
          showSms.setText(ReceivedSms);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:46:48.750

尝试测试这段代码，我已经根据您的代码实现了一个示例项目代码：

```
public class MainActivity extends Activity {
    private TextView showSms;
    private String   ReceivedSms;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        super.onCreate(savedInstanceState);
        // _smsReceiver.onReceive(getBaseContext(), getIntent());
        setContentView(R.layout.activity_main);
        Intent _intent = getIntent();
        ReceivedSms = _intent.getStringExtra("message");
        showSms = (TextView) this.findViewById(R.id.txt_Show);
        showSms.setText(ReceivedSms);

    }

}

public class SmsReceiver extends BroadcastReceiver {
    public String str = "";

    @Override
    public void onReceive(Context context, Intent intent) {
        // ---get the SMS message passed in---
        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;

        if (bundle != null) {
            // Object[] smsExtra = (Object[]) bundle.getSMS_EXTRA_NAME);
            // ---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];
            // for put sms in database---------------------
            // ContentResolver contentResolver = context.getContentResolver();
            // End for put sms in database---------------------
            for (int i = 0; i < msgs.length; i++) {
                msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                // SmsMessage sms =
                // SmsMessage.createFromPdu((byte[])smsExtra[i]);

                str += "SMS from " + msgs[i].getOriginatingAddress();
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";
            }

            // ---display the new SMS message---
            // Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
            Intent act = new Intent(context, MainActivity.class);
            act.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            act.putExtra("message", str);
            context.startActivity(act);

        }
    } 
```

在清单上确保添加权限：

```
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.READ_SMS" /> 
```

android接收器声明：

```
 <receiver
            android:name="com.example.sms.SmsReceiver"
            class="com.example.sms.SmsReceiver" >
            <intent-filter android:priority="100" >
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver> 
```

PS：删除SmsReceiver _smsReceiver =new SmsReceiver(); 从你的活动。

# ruby-on-rails - Facebook 应用在画布上保持登录状态

> ID：13044698
> 
> 赞同：0
> 
> 时间：2012-10-24T07:35:14.823
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3, facebook-javascript-sdk, omniauth

我有一个 facebook 应用程序，可以通过 facebook canvas 或直接通过 url 访问。

所以每次我的用户重新访问我的应用程序时，他们必须再次点击登录，即使在同一个会话中（仅适用于 fb 画布，会话适用于直接）

是否有任何教程或脚本可以使用 javascript 添加到我的网页以检查用户是否是注册用户，如果是，自动登录？

我正在使用 rails3 和omniauth facebook gem。谢谢。

# python - 使用 Dowser 跟踪 Python 中的内存泄漏

> ID：13044699
> 
> 赞同：4
> 
> 时间：2012-10-24T07:35:15.353
> 
> 标签：python, memory, memory-leaks

我每晚在带有 centos 操作系统的虚拟机上运行一些测试。最近测试已经占用了机器上所有可用的内存和几乎所有的交换内存，我为 VM 分配了两倍的内存，但它仍在发生，这导致 VM 的物理主机死亡。这些测试以前运行时不需要一半的内存，所以我需要使用某种形式的**python 内存分析器**来调查发生了什么。

我看过**Pysizer**和**Heapy——**但经过研究，**Dowser**似乎是我所追求的，因为它需要对代码进行零更改。

到目前为止，从文档和谷歌搜索来看，我已经在它自己的类中得到了这段代码：

```
import cherrypy
import dowser

class MemoryAnalyzer:

def memoryCheck(self):
    cherrypy.config.update({'server.socket_port':8080})
    cherrypy.tree.mount(dowser.Root())
    cherrypy.engine.start() 
```

我希望这会调出文档中显示的 Web 界面来跟踪主机上运行的所有 python 实例，但这是行不通的。我对文档感到困惑：

```
 'python dowser __init__.py'. 
```

可以只运行这个吗？我得到错误：

```
 /usr/bin/python: can't find '__main__.py' in 'dowser' 
```

dowser 可以独立于我在 VM 上的测试套件运行吗？或者我是否必须在我的主类中实现上面的代码来运行我的测试来跟踪 python 的实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T07:40:48.380

Dowser 旨在作为应用程序的一部分运行。因此，无论您在哪里初始化应用程序，添加以下行

```
import dowser
cherrypy.tree.mount(dowser.Root(), '/dowser') 
```

然后你可以浏览到`http://localhost:8080/dowser`查看 dowser 界面。

请注意，您从文档中引用的调用是用于测试 dowser。正确的调用是`python dowser/__init__.py`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:55:46.417

[使用此博客http://www.aminus.org/blogs/index.php/2008/06/11/tracking-memory-leaks-with-dowser?blog=2](http://www.aminus.org/blogs/index.php/2008/06/11/tracking-memory-leaks-with-dowser?blog=2)设法让 dowser 工作并将端口更改为 8088而不是 8080（机器上没有使用但仍然无法使用！）

# google-analytics - 用于在 Spotify 应用程序中进行分析跟踪的网站 URL？

> ID：13044701
> 
> 赞同：0
> 
> 时间：2012-10-24T07:35:25.440
> 
> 标签：google-analytics, spotify

我想跟踪 Spotify 应用程序中的综合浏览量和用户交互。Spotify 说这是可能的：[https ://developer.spotify.com/technologies/apps/guidelines/integration/#usertrackinganalytics](https://developer.spotify.com/technologies/apps/guidelines/integration/#usertrackinganalytics)

在 Spotify 应用程序中设置用于分析跟踪的属性时，我应该输入哪个“网站 URL”？

还是我做错了，必须以另一种方式做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:14:46.867

没关系。

如果你愿意，你可以使用一个假的。

GA 唯一使用它的地方是在创建从报告返回到您的网站的链接时。由于您的网站不存在，因此它更像是我所理解的扩展。那么你无论如何都不需要这些链接。

如果感觉没有创意，只需使用：

[http://my-spotify-app.com](http://my-spotify-app.com)

# actionscript-3 - 我想在移动应用程序中使用 flex 4.5 在视图中显示 HTML 页面，我该如何使用？

> ID：13044708
> 
> 赞同：0
> 
> 时间：2012-10-24T07:35:55.417
> 
> 标签：actionscript-3, apache-flex, flex4.5

我在其中一个中创建了 3 个视图，我想显示静态 HTML 页面。我怎样才能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:34:02.210

这是我的应用程序使用 StageWebView 的视图：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" 
        viewActivate="openSWV(event)"
        viewDeactivate="closeSWV(event)"
        title="Help">

    <fx:Declarations>
        <s:MultiDPIBitmapSource id="BACK"
            source160dpi="@Embed('assets/icons/low-res/back.png')"
            source240dpi="@Embed('assets/icons/mid-res/back.png')"
            source320dpi="@Embed('assets/icons/high-res/back.png')"/>
    </fx:Declarations>

    <s:states>
        <s:State name="portrait"/>
        <s:State name="landscape"/>
    </s:states> 

    <s:navigationContent>
        <s:Button icon="{BACK}" label.landscape="Back" click="navigator.popView()"/>
    </s:navigationContent>

    <fx:Declarations>
        <fx:String id="_help">
            <![CDATA[
<html>
<body>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>

<ul>
<li>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</li>
<li>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</li>
<li>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</li>
<li>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</li>
</ul>

<table border=1 width=100%>
<tr bgcolor="#CCCCCC">
<th>Blah</th><th>Blah</th><th>Blah</th><th>Blah</th>
</tr>

<tr>
<th>6</th><td>2</td><td>4</td><td>2</td>
</tr>
<tr>
<th>7</th><td>4</td><td>2</td><td>1</td>
</tr>
<tr>

<th>8</th><td>6</td><td>1*</td><td>1</td>
</tr>
<tr>
<th>Blah</th><td>10</td><td>-</td><td>-</td>
</tr>
<tr>
<th>9</th><td>8</td><td>1*</td><td>1</td>

</tr>
<tr>
<th>10</th><td>10</td><td>0</td><td>0</td>
</tr>
</table>

<p><i>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</i></p>

</body>
</html>
            ]]>
        </fx:String>
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            import mx.core.FlexGlobals;
            import mx.events.FlexEvent;
            import flash.media.StageWebView;

            private var _swv:StageWebView;

            private function openSWV(event:Event=null):void {
                _swv = new StageWebView();
                stage.addEventListener(Event.RESIZE, resizeSWV);

                _swv.stage = stage;
                resizeSWV();

                _swv.loadString(_help);
            }

            private function closeSWV(event:Event=null):void {
                stage.removeEventListener(Event.RESIZE, resizeSWV);
                if (! _swv)
                    return;
                _swv.dispose();
                _swv = null;
            }           

            private function resizeSWV(event:Event=null):void {
                if (! _swv)
                    return;

                var scale:Number = scale = runtimeDPI / applicationDPI;
                // align to the right-bottom corner
                _swv.viewPort = new Rectangle(stage.stageWidth - scale * width, stage.stageHeight - scale * height, scale * width, scale * height);
            }
        ]]>
    </fx:Script>
</s:View> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:14:48.833

您可以使用[StageWebView来执行此操作](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageWebView.html)

可以在
[http://soenkerohde.com/2010/11/air-mobile-stagewebview-uicomponent/找到它的实现](http://soenkerohde.com/2010/11/air-mobile-stagewebview-uicomponent/)

干杯

# shell - bash：替换''内的变量值

> ID：13044709
> 
> 赞同：3
> 
> 时间：2012-10-24T07:36:01.143
> 
> 标签：shell, variables

对不起，如果问题非常简单，但我是 shell 脚本的新手。我正在尝试写这样的东西：

```
for i in {1..20}
do
   curl "something $i ........ -d  'something "$i" something' "
done 
```

问题是`$i`单引号部分 '' 中的第二个没有被替换。应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T07:56:14.283

如上所述，单引号内不展开参数，必须使用双引号。唯一的一点是，由于它出现在已经用双引号引起来的字符串中，因此您必须使用反斜杠 ( `\`) 将它们转义，如下所示：

```
$ foo=bar
$ eval "echo \"something \\\"$foo\\\"\""
一些“酒吧”

```

`\`请注意，在最内层之前有三个`"`，因为这将被扩展两次（一次在评估 的参数时`eval`，一次在评估 的参数时`echo`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T07:40:05.393

这是因为单引号内的变量`''`没有被替换。如果你想要变量替换，你需要去掉单引号。

你也许可以预先初始化那个变量

```
foo="something $i bla bla bla"
curl "something ... ${foo}something" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:41:04.103

您的引用不正确。您不需要在第二个周围加上双引号，`$i`因为整个内容已经用双引号括起来了。

将其更改为以下内容：

```
for i in {1..20}
do
   curl "something $i ........ -d  'something $i something'"
done 
```

# asp.net - 与带有表单身份验证的 ASP.NET 并排托管免身份验证的 WCF REST 服务

> ID：13044710
> 
> 赞同：2
> 
> 时间：2012-10-24T07:36:01.463
> 
> 标签：asp.net, .net, wcf, iis-7.5

我想在基于 ASP.NET v4.0 并通过表单身份验证保护的已创建 IIS 7.5 网站上托管 REST 完整的 WCF 4.0 服务。因此，我尝试使用混合模式身份验证 (aspNetCompatibilityEnabled="false") 配置我的 WCF 堆栈，并将服务主机配置为根本不使用任何安全性，但长期以来，我的所有努力都完全没有成功。当我尝试在一段时间后从浏览器调用我的服务时，与主机的连接在没有响应的情况下关闭，并且我的浏览器引发错误，表明与目标网站的连接已关闭而没有任何响应。

但是，如果我在 Application_BeginRequest 中编写一个虚拟代码以使用 FormsAuthentication.Authenticate 对表单身份验证模块中的虚拟用户进行身份验证，或者在经过身份验证的浏览器会话中调用该服务，那么一切正常并且该服务被成功调用。

我试图使用 WCF 跟踪找到导致这种奇怪行为的问题。我从生成的 svclog 文件中发现的是这个异常：

**消息：**对象引用未设置为对象的实例。
**StackTrace：**
System.ServiceModel.Activation.HostedHttpRequestAsyncResult.get_LogonUserIdentity() System.ServiceModel.Channels.HttpChannelListener.ValidateAuthentication(IHttpAuthenticationContext authenticationContext) System.ServiceModel.Channels.HttpRequestContext.ProcessAuthentication() System.ServiceModel.Channels.HttpChannelListener`1.HttpContextReceived(HttpRequestContext上下文，动作回调）

关于这个问题的任何想法？

**更新**：我什至将网站的身份验证模式设置为“无”并授权匿名用户。还是一样的结果。没有改变。问题是我可以在 ASP.NET 网站上使用未经身份验证的 WCF RESTfull 服务和 aspNetCompatibilityEnabled="false" 吗？？？

更具体地说，我试图做的是：

*   以 .svc 文件的形式实现了我的 WCF 服务
*   在我的 web.config 文件中配置 WCF 如下（注意 AspNetCompatibilityEnabled="false"）：

```
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior>
                <serviceMetadata httpGetEnabled="true"/>
                <serviceDebug includeExceptionDetailInFaults="true"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="false" />
</system.serviceModel> 
```

*   像这样创建和使用我自己的 ServiceHostFactory：

```
 public class MyServiceHostFactory : ServiceHostFactoryBase
    {
        #region Methods

        public override ServiceHostBase CreateServiceHost(string constructorString, Uri[] baseAddresses)
        {
            var type = Type.GetType(constructorString);
            var host = new WebServiceHost(type, baseAddresses);

            var serviceBehavior = host.Description.Behaviors.OfType<ServiceBehaviorAttribute>().Single();
            serviceBehavior.ConcurrencyMode = ConcurrencyMode.Multiple;
            serviceBehavior.MaxItemsInObjectGraph = int.MaxValue;

            var metadataBehavior = host.Description.Behaviors.OfType<ServiceMetadataBehavior>().SingleOrDefault();

            if (metadataBehavior == null)
            {
                metadataBehavior = new ServiceMetadataBehavior();
                host.Description.Behaviors.Add(metadataBehavior);
            }

            var debugBehavior = host.Description.Behaviors.OfType<ServiceDebugBehavior>().SingleOrDefault();

            if (debugBehavior == null)
            {
                debugBehavior = new ServiceDebugBehavior();
                host.Description.Behaviors.Add(debugBehavior);
            }

            metadataBehavior.HttpGetEnabled = true;
            debugBehavior.IncludeExceptionDetailInFaults = true;

            var binding = new WebHttpBinding { MaxBufferPoolSize = int.MaxValue, MaxReceivedMessageSize = int.MaxValue };
            binding.Security.Mode = WebHttpSecurityMode.None;
            binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.None;

            WebHttpBehavior webHttpBehavior = new WebHttpBehavior { HelpEnabled = true };

            foreach (var contract in type.GetInterfaces().Where(i => i.GetCustomAttributes(typeof(ServiceContractAttribute), true).Length > 0))
            {
                var endpoint = host.AddServiceEndpoint(contract, binding, "");
                endpoint.Behaviors.Add(webHttpBehavior);
            }

            host.AddServiceEndpoint(typeof(IMetadataExchange), MetadataExchangeBindings.CreateMexHttpBinding(), "mex");

            return host;
        }

        #endregion
    } 
```

# java - php 值 Java 字节数组

> ID：13044711
> 
> 赞同：0
> 
> 时间：2012-10-24T07:36:02.850
> 
> 标签：java, php

我对“pack”/“unpack” php 函数有点困惑，所以我需要 php 等效于以下 Java 代码

```
....
byte[] TempByte = {1, (byte)0x01};
... 
```

php:

```
? 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:41:01.633

没有真正的 php 等价物，因为 php 是*松散类型*的，并且没有`byte[]`类型。

最类似于您的 java 代码的代码是：

```
$TempByte = array(1, chr(1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:42:36.140

我不是 100% 确定 Java 代码的作用，但它看起来相当于这样：

```
$tempByte = "\x01\x01"; 
```

“字节数组”本质上是 PHP 中的字符串，或者更确切地说，“字符串”本质上是 PHP 中的字节数组。您甚至可以使用数组偏移量语法访问这个“字节数组”：

```
echo bin2hex($tempByte[0]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T08:06:43.787

您发布的代码初始化了一个包含两个元素 bytes 的字节[数组](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)。

由于 PHP 是[弱类型](http://en.wikipedia.org/wiki/Weak_typing)的，因此您无法获得与此代码完全相同的代码——这可以从[PHP 类型](http://www.php.net/manual/en/language.types.php)列表中看到。

两种语言都有数组，所以我们在这里很好，但 PHP 没有字节。

在 Java 中，一个字节被定义为一个有符号的 8 位值，范围从 -128 到 127（含）。

与 PHP 最接近的是[integer](http://www.php.net/manual/en/language.types.integer.php)，但是：

> 整数的大小取决于平台，尽管通常值约为 20 亿的最大值（即 32 位有符号）。64 位平台的最大值通常约为 9E18。PHP 不支持无符号整数。自 PHP 4.4.0 和 PHP 5.0.5 起，可以使用常量 PHP_INT_SIZE 确定整数大小，使用常量 PHP_INT_MAX 确定最大值。

所以，我的建议是（对于 32 位平台）：

```
$TempByte = array(0x0001 & 1, 0x0001 & 1); 
```

# sql - SQL FTS 和比较语句

> ID：13044717
> 
> 赞同：1
> 
> 时间：2012-10-24T07:36:20.580
> 
> 标签：sql, sqlite, fts4

短篇故事。我正在做一个需要与 SQLite 数据库通信的项目。我有几个问题：

有一个包含*nodeId*和*nodeName*列的 FTS 表。我需要选择 nodeNames 包含一些文本模式的所有 nodeIds。例如，所有带有“Donald”的节点名称。[在这个线程](https://stackoverflow.com/questions/10501805/using-fts-query-can-you-find-all-entries-contains-abc)中讨论了类似的事情。关键是我不能使用*CONTAINS*关键字。相反，我使用*MATCH*。这就是问题本身：这个“Donald”字符串应该如何“装帧”？使用 '*' 还是使用 '%' 字符？这是我的查询：

```
SELECT * FROM nodeFtsTable WHERE nodeName MATCH "Donald" 
```

*在SELECT*语句中写多重比较可以吗？我的意思是这样的：

```
SELECT * FROM distanceTable WHERE pointId = 1 OR pointId = 4 OR pointId = 203 AND distance<200 
```

我希望这听起来不会很混乱。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:42:41.463

**编辑：**对不起，我错过了您使用 FTS4 的事实。看起来你可以这样做：

```
SELECT * FROM nodeFtsTable WHERE nodeName MATCH 'Donald' 
```

[这是相关文档。](http://www.sqlite.org/fts3.html)

不需要通配符来匹配所有`Donald`离散单词的条目（例如，上面将匹配`Donald Duck`）。如果您想`Donald`作为单词的一部分进行匹配（例如`Donalds`），那么您需要`*`在适当的位置使用：

```
SELECT * FROM nodeFtsTable WHERE nodeName MATCH 'Donald*' 
```

如果您的查询不起作用，可能是因为您使用了双引号。

从[SQLite 文档](http://www.sqlite.org/lang_expr.html)：

> MATCH 运算符是 match() 应用程序定义函数的特殊语法。默认的 match() 函数实现会引发异常，并且对任何事情都没有真正的用处。但是扩展可以用更有用的逻辑覆盖 match() 函数。

FTS4 是提供`match()`功能的扩展。

是的，可以在第二个查询中使用多个条件。当您有一组复杂的条件时，了解评估条件的顺序很重要。`AND`总是在之前进行评估`OR`（它们分别类似于数学乘法和加法）。`AND`在实践中，我认为在使用and的组合时最好使用括号以清楚起见`OR`：

```
--This is the same as with no parentheses, but is clearer:
SELECT * FROM distanceTable WHERE 
    pointId = 1 OR 
    pointId = 4 OR 
    (pointId = 203 AND distance<200)

--This is something completely different:
SELECT * FROM distanceTable WHERE 
    (pointId = 1 OR pointId = 4 OR pointId = 203) AND
    distance<200 
```

# sitecore - Sitecore 性能优化——图片存储

> ID：13044718
> 
> 赞同：1
> 
> 时间：2012-10-24T07:36:21.677
> 
> 标签：sitecore, sitecore6

我们的网站现在有大约 200K 图像存储在 sitecore 数据库中。它比以前运行得更慢。存储在数据库中的大量图像会减慢整个站点的速度吗？如果是，我该如何改进我们的图像存储？

非常感谢，我们的 sitecore 版本是 6.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T07:47:33.113

您是否考虑过为您的静态资产设置 CDN？这将减少您网站的负载并加快速度。

否则，您可能会考虑优化数据库。查看 Sitecore 优化指南[http://sdn.sitecore.net/upload/sitecore6/64/cms_tuning_guide_sc60-64-a4.pdf](http://sdn.sitecore.net/upload/sitecore6/64/cms_tuning_guide_sc60-64-a4.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:35:29.743

一般来说，这取决于前端慢还是后端慢。

如果您在站点没有加载大量请求时遇到问题 - 那么您可能应该升级硬件。

如果它是由高网站负载引起的 - 有两个相当简单的选项：

**1)**使用 Sitecore 的专用图像服务器[http://pentialized.dk/2011/01/02/dedicated-image-server-in-sitecore-part-2/](http://pentialized.dk/2011/01/02/dedicated-image-server-in-sitecore-part-2/)

**2）**将媒体库与CDN集成，CloudFront非常简单而强大，请参见此处的示例：http: [//herskind.co.uk/blog/2012/04/using-cloudfront-for-sitecore-media-content](http://herskind.co.uk/blog/2012/04/using-cloudfront-for-sitecore-media-content)

# objective-c - 如何更改标签上的日期选择器选定值

> ID：13044724
> 
> 赞同：2
> 
> 时间：2012-10-24T07:36:41.180
> 
> 标签：objective-c, ios, xcode

我想在标签上显示从日期选择器中选择的日期，但标签只显示当前日期它不显示我从日期选择器中选择的日期这是代码请告诉我如何随机更改文本标签从日期选择器中选择的日期

```
#import "ViewController.h"

@implementation ViewController
@synthesize datepicker,mylabel;

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSDate *chosen = datepicker.date;
    NSDateFormatter *formatter = [[NSDateFormatter alloc]init];
    formatter.dateStyle = NSDateFormatterMediumStyle;
    mylabel.text = [formatter stringFromDate:chosen];
     [formatter release];    

    // Do any additional setup after loading the view, typically from a nib.

}

- (void)viewDidUnload
{

    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T08:17:00.710

```
 // code for Date picker for current date

     datepicker=[[UIDatePicker alloc]initWithFrame:CGRectMake(0, 200, 320, 150)];
        //[self.view addSubview:datepicker];
        datepicker.date = [NSDate date];
        datepicker.datePickerMode=UIDatePickerModeDate;
        NSDateFormatter *df = [[NSDateFormatter alloc] init];
        df.timeStyle = NSDateFormatterNoStyle;

        label.text=[NSString stringWithFormat:@"%@",
                   [df stringFromDate:[NSDate date]]];
        df.dateFormat = @"yyyy-MM-dd";

    // set action for date picker

       [datepicker addTarget:self  action:@selector(DateChange:)
            forControlEvents:UIControlEventValueChanged];

    //method for change date

    - (void)DateChange:(id)sender
{
        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
        [dateFormatter setDateFormat:@"dd-MM-yyyy"];
        label.text = [dateFormatter stringFromDate:datepicker.date];
        date.text=strDate;
} 
```

# javascript - 一些 Javascript Cookie 阅读

> ID：13044729
> 
> 赞同：0
> 
> 时间：2012-10-24T07:36:55.563
> 
> 标签：javascript, cookies

```
function readCookie(name)
{
  var ca = document.cookie.split(';');
  var nameEQ = name + "=";
  for(var i=0; i < ca.length; i++) {
var c = ca[i];
while (c.charAt(0)==' ') c = c.substring(1, c.length); //delete spaces
if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
}
  return null;
}

document.ready(function() {

var color = readCookie(go);

if (color != null) {

var gs = document.createElement("link");
gs.type = "text/css";
gs.rel = "stylesheet";
gs.title = "mystyle"
gs.href = "images/audentio/gogreen/green.css";

var rs = document.createElement("link");
rs.type = "text/css";
rs.rel = "stylesheet";
rs.title = "mystyle"
rs.href = "images/audentio/gogreen/red.css";

var bs = document.createElement("link");
bs.type = "text/css";
bs.rel = "stylesheet";
bs.title = "mystyle"
bs.href = "images/audentio/gogreen/blue.css";

if (color == "green"){
    document.getElementsByTagName("head")[0].removeChild(rs);
    document.getElementsByTagName("head")[0].removeChild(bs);
    document.getElementsByTagName("head")[0].appendChild(gs);
}

else if (color == "blue"){
    document.getElementsByTagName("head")[0].removeChild(rs);
    document.getElementsByTagName("head")[0].removeChild(gs);
    document.getElementsByTagName("head")[0].appendChild(bs);
}

else (color == "red"){
    document.getElementsByTagName("head")[0].removeChild(gs);
    document.getElementsByTagName("head")[0].removeChild(bs);
    document.getElementsByTagName("head")[0].appendChild(rs);
}
}
else {
return: false;
}
}); 
```

嘿伙计们，我不擅长这些东西，它正在杀死我页面中的所有 jQuery（尽管出于我不会深入的原因，我不想使用 jQuery 来读取 cookie，只创建它）所以有人可以看到错误吗？

现场演示：[http ://wedesignthe.net/staff_uploads/eric/ad_development/demo/index.php](http://wedesignthe.net/staff_uploads/eric/ad_development/demo/index.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:41:19.853

查找`else (color == "red"){`并替换为`else if(color == "red"){`

`else (color == "red"){`由于您刚刚忘记的此语句而导致的错误`if`

和改变

```
else {
    return: false;
} 
```

到

```
else {
    return false;
} 
```

`remove : between return and false`

并更改`document.ready(function() {`为`$(document).ready(function() {`或`$(function() {`

代替它

```
if (color == "green"){
    document.getElementsByTagName("head")[0].removeChild(rs);
    document.getElementsByTagName("head")[0].removeChild(bs);
    document.getElementsByTagName("head")[0].appendChild(gs);
}

else if (color == "blue"){
    document.getElementsByTagName("head")[0].removeChild(rs);
    document.getElementsByTagName("head")[0].removeChild(gs);
    document.getElementsByTagName("head")[0].appendChild(bs);
}

else if (color == "red"){
    document.getElementsByTagName("head")[0].removeChild(gs);
    document.getElementsByTagName("head")[0].removeChild(bs);
    document.getElementsByTagName("head")[0].appendChild(rs);
} 
```

和

```
var head = document.getElementsByTagName("head")[0];
var links = head.getElementsByTagName("link");
for(var x=0; x<links.length ; x++)
{
   var href = links[x].href;
    if(href.indexOf('/green.css') >0 || href.indexOf('/red.css') >0|| href.indexOf('/blue.css') >0){
      head.removeChild(links[x]);
   }
}

if (color == "green"){
    head.appendChild(gs);
}
else if (color == "blue"){
    head.appendChild(bs);
}

else if (color == "red"){
   head.appendChild(rs);
} 
```

# android - 通过WIFI将数据从手机发送到PC

> ID：13044742
> 
> 赞同：1
> 
> 时间：2012-10-24T07:37:52.627
> 
> 标签：android, sockets, wifi, android-wifi, android-wireless

在我的应用程序中，我想通过 WIFI 网络从我的应用程序向我的 PC 发送一些数据（比如“你好”）。在 PC 中，服务将监听该数据。但我不知道通过 WIFI 发送数据。我也没有得到任何适当的参考。有人能帮我吗。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:47:23.973

您需要的是一个合适的协议，您的服务器和手机都可以轻松处理。

如果您不发送敏感数据，我认为最简单的方法是 HTTP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:59:59.540

这实际上取决于您希望 PC 上的服务如何处理接收到的数据。据我所知，您可能会发现一些现成的软件可以帮助您设置此服务。但是，正如其他人在这里提到的那样，http 绝对是最简单的方法。如果你找不到任何现有的“监听电脑”软件，你需要编写一个程序，在预定的端口监听 http 流量（我不会使用标准的 http 端口 80，因为你可能会遇到冲突与现有的 http 软件）。您可以使用 Serversocket 和/或 Socket（如 Tobias Rizau 上面提到的）在 java 中很容易地做到这一点。就我个人而言，从 imo 开始，我会编写一个 C/C++ 程序。这样可以提供更好的服务，但这绝对没有必要（尤其是如果您只了解 Java）。

# r - 如何插入多行

> ID：13044747
> 
> 赞同：1
> 
> 时间：2012-10-24T07:38:10.627
> 
> 标签：r

我有这个数据：

```
hhid    perid actNo thisAct from   to tripTime  
8019450     1     1    home  180 1051       NA  
8019450     1     2  school 1075 1245       24  
8019450     1     3  socrec 1255 1260       10  
8019450     1     4    home 1280 1619       20 
```

现在，我想在其中插入三行

```
thisAct=travel
from=(from-tripTime-1)
to=(from-1) 
```

然后，预期的数据如下所示：

```
hhid    perid actNo thisAct from   to tripTime  
8019450     1     1    home  180 1051       NA  
*8019450    1     2  travel 1052 1074         
8019450     1     3  school 1075 1245       24  
*8019450    1     4  travel 1246 1254         
8019450     1     5  socrec 1255 1260       10  
*8019450    1     6  travel 1261 1279         
8019450     1     7    home 1280 1619       20 
```

请问如何用星号插入这些行？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:11:01.097

首先重新创建数据：

```
dat <- read.table(text="
                  hhid    perid actNo thisAct from   to tripTime  
c     1     1    home  180 1051       NA  
8019450     1     2  school 1075 1245       24  
8019450     1     3  socrec 1255 1260       10  
8019450     1     4    home 1280 1619       20
                  ", header=TRUE) 
```

现在计算旅行时间并将其放入与您的数据形状相同的数据框中

```
travel <- data.frame(
  hhid = 8019450,
  perid = 1,
  actNo = NA,
  thisAct = "travel",
  from = head(dat$to + 1, -1),
  to   = tail(dat$from - 1, -1),
  tripTime = NA
) 
```

然后`rbind`排序：

```
x <- rbind(dat, travel)
x <- x[order(x$from), ]
x$perid <- seq_along(x$perid)
x

     hhid perid actNo thisAct from   to tripTime
1       c     1     1    home  180 1051       NA
5 8019450     2    NA  travel 1052 1074       NA
2 8019450     3     2  school 1075 1245       24
6 8019450     4    NA  travel 1246 1254       NA
3 8019450     5     3  socrec 1255 1260       10
7 8019450     6    NA  travel 1261 1279       NA
4 8019450     7     4    home 1280 1619       20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:10:10.537

您的数据：

```
dat <- read.table(text="hhid perid actNo thisAct from to tripTime
8019450 1 1 home 180 1051 NA
8019450 1 2 school 1075 1245 24
8019450 1 3 socrec 1255 1260 10
8019450 1 4 home 1280 1619 20", header = TRUE, stringsAsFactors = FALSE) 
```

这是一种获得你想要的东西的方法：

```
dat2<- dat[c(1, rep(2:nrow(dat), each = 2)), ]
dat2$actNo <- 1:nrow(dat2)
dat2[c(FALSE, TRUE), "thisAct"] <- "travel"
dat2[c(FALSE, TRUE), "to"] <- dat2[c(FALSE, TRUE), "from"] - 1
dat2[c(FALSE, TRUE), "from"] <- (dat2[c(FALSE, TRUE), "from"] -
                                 dat2[c(FALSE, TRUE), "tripTime"]) + 1    
dat2[c(FALSE, TRUE), "tripTime"] <- NA 
```

由于`tripTime`未指定列内的值，因此我选择`NA`了新列。

输出：

```
#        hhid perid actNo thisAct from   to tripTime
# 1   8019450     1     1    home  180 1051       NA
# 2   8019450     1     2  travel 1052 1074       NA
# 2.1 8019450     1     3  school 1075 1245       24
# 3   8019450     1     4  travel 1246 1254       NA
# 3.1 8019450     1     5  socrec 1255 1260       10
# 4   8019450     1     6  travel 1261 1279       NA
# 4.1 8019450     1     7    home 1280 1619       20 
```

# git - BitBucket - 下载源为 ZIP

> ID：13044749
> 
> 赞同：281
> 
> 时间：2012-10-24T07:38:12.220
> 
> 标签：git, download, zip, bitbucket, git-clone

我知道我可以通过`git clone`命令获取项目，但是有什么办法，如何通过 Web 界面从[BitBucket.org](https://bitbucket.org/)下载项目？以最好的方式，我正在寻找一种将项目源下载为 ZIP 压缩文件的方法。

* * *

## 回答 #1

> 赞同：427
> 
> 时间：2012-10-24T07:41:10.260

对于最新版本的 Bitbucket (2016+)，下载链接可以在下载菜单项中找到。

[![在此处输入图像描述](../Images/4c57819f554f346ec7b1b05d1b7002a4.png)](https://i.stack.imgur.com/KRp4t.png)

* * *

*2016 年之前*

**第一种方法**

在 repo 的 Overview 页面中，有一个下载项目的链接。

![直接下载repo](../Images/b52ef9582c4c0527c457ec31085234f2.png)

* * *

**第二种方法**

转到下载 -> 分支 -> 下载所需的分支（如 .zip、.gz 或 .bz2）。在那里你会找到所有标签的下载链接。链接将采用以下格式：

```
https://bitbucket.org/owner/repository/get/v0.1.2.tar.gz 
```

通过稍微调整它，您还可以通过将标签更改为提交哈希来访问任何修订：

```
https://bitbucket.org/owner/repository/get/A0B1C2D.tar.gz 
```

* * *

## 回答 #2

> 赞同：157
> 
> 时间：2014-08-02T08:25:02.410

## 现在它更新了，很容易下载！

从仪表板或存储库选项卡中选择您的存储库。

然后只需单击具有下载图标的下载选项卡。它将让您以**zip 格式**下载整个存储库。

[![在此处输入图像描述](../Images/c1088f4d26ab6aa3cb2fe7065d8097e9.png)](https://i.stack.imgur.com/ky8Oi.png)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-03-10T16:10:16.580

对于**git**存储库，要下载最新的提交，您可以使用：

[https://bitbucket.org/owner/repository/get/HEAD.zip](https://bitbucket.org/owner/repository/get/HEAD.zip)

对于**mercurial**存储库：

[https://bitbucket.org/owner/repository/get/tip.zip](https://bitbucket.org/owner/repository/get/tip.zip)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-06-30T07:36:36.593

**直接下载：**

从 bitbucket 的仪表板转到项目存储库。从左侧菜单中选择下载。选择下载存储库。

[![在此处输入图像描述](../Images/c47e604fcb1c357c2c5450b1d2e49b1a.png)](https://i.stack.imgur.com/ywSgn.png)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-08-01T07:50:39.110

在[Bitbucket Server](https://www.atlassian.com/software/bitbucket/server)中，您可以通过单击`...`分支旁边的 进行下载，然后`Download`

[![Bitbucket 服务器下载](../Images/80aaec3572fb30cc59676a7d5f6e6f2c.png)](https://i.stack.imgur.com/fEeqG.png)

有关详细信息，请参阅[从 Bitbucket 服务器下载档案](https://confluence.atlassian.com/bitbucketserver/download-an-archive-from-bitbucket-server-913477030.html)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-04-12T16:40:04.267

**要下载特定分支 -**从左侧面板转到下载，在下载页面上选择分支。它将列出所有可用的分支。以 zip、gz 或 bz2 格式下载所需的分支。

[![在此处输入图像描述](../Images/9b75e5115d10c04cbffe3e20eead3c45.png)](https://i.stack.imgur.com/HESkv.png)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-08-13T11:49:56.400

我试图弄清楚是否可以像在 GitHub 上一样浏览早期提交的代码，它把我带到了这里。我使用了在这里找到的信息，在摆弄了 url 之后，我实际上也找到了一种浏览旧提交代码的方法。即使问题/答案是关于下载早期提交的代码，我想我也只是添加一个浏览代码的答案。

当您浏览代码时，URL 类似于：

```
https://bitbucket.org/user/repo/src/ 
```

并在最后添加一个提交哈希，如下所示：

```
https://bitbucket.org/user/repo/src/a0328cb 
```

您可以在提交时浏览代码。我不明白为什么没有直接选择提交的下拉框，该功能已经存在。奇怪的。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-06-05T17:05:43.100

如果你想从你的 shell/终端下载 repo，它应该像这样工作：

```
wget https://user:password@bitbucket.org/user-name/repo-name/get/master.tar.bz2 
```

或您可能拥有的任何下载 URL。

请确保 user:password 都是[URL 编码的](https://www.urlencoder.org/)。因此，例如，如果您的用户名包含该`@`符号，则将其替换为`%40`.

# android - java.lang.RuntimeException：期望菜单，单击菜单按钮时出现RelativeLayout错误

> ID：13044752
> 
> 赞同：2
> 
> 时间：2012-10-24T07:38:25.293
> 
> 标签：android, android-layout, android-xml, android-relativelayout, android-menu

`MapView`当您单击手机上的菜单按钮时，我正在创建一个并想添加一个菜单。所以我这样做了，它看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item android:id="@+id/my_location"
          android:icon="@drawable/compass_base"
          android:title="Meine Position"
          android:showAsAction="ifRoom"/>
</menu> 
```

我的活动如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="0zPcuLDMKtZhz-000000000000000000"
    />

    <TextView
        android:id="@+id/tvLongitude"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="@string/defaultLongitude" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Latidude:" />

    <TextView
        android:id="@+id/tvLatitude"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="15dp"
        android:layout_toRightOf="@+id/textView1"
        android:text="@string/defaultLatitude" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginRight="17dp"
        android:layout_toLeftOf="@+id/tvLongitude"
        android:text="Longitude" />

</RelativeLayout> 
```

现在的问题是当我单击菜单按钮时它会关闭，Logcat 会这样说：

```
10-24 07:26:20.736: E/AndroidRuntime(372): java.lang.RuntimeException: Expecting menu, got RelativeLayout 
```

我想离开，`RelativeLayout`因为我可以像现在一样在 MapView 上显示经度和纬度

这是`MainActivity`菜单的方法：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.layout.activity_main, menu);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:02:13.817

Android[为菜单提供开发者指南](http://developer.android.com/guide/topics/ui/menus.html)。
基于此，您应该通过以下方式对菜单进行膨胀：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.game_menu, menu);
    return true;
} 
```

因此，`menuInflater.inflate()`您的代码中的第一个参数不正确。您应该使用位于 res/menu 文件夹中的菜单 xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:02:29.287

假设菜单文件名为activity_main，（默认），将代码更改为：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.menu.activity_main, menu);
    return true;
} 
```

# python - AppEngine MapReduce NDB，重复 InternalError：内部错误

> ID：13044753
> 
> 赞同：5
> 
> 时间：2012-10-24T07:38:35.330
> 
> 标签：python, google-app-engine, mapreduce, app-engine-ndb

我们正在尝试在我们的项目中大量使用**MapReduce 。**现在我们有这个问题，有很多**'InternalError：内部错误'。**日志中的错误...

**它的一个例子：**

```
 "POST /mapreduce/worker_callback HTTP/1.1" 500 0 "http://appname/mapreduce/worker_callback" "AppEngine-Google; 
(+http://code.google.com/appengine)" "appname.appspot.com" ms=18856 cpu_ms=15980 
queue_name=default task_name=appengine-mrshard-15828822618486744D69C-11-195 
instance=00c61b117c47e0cba49bc5e5c7f9d328693e95ce
W 2012-10-24 06:51:27.140
suspended generator _put_tasklet(context.py:274) raised InternalError(internal error.)
W 2012-10-24 06:51:27.153
suspended generator put(context.py:703) raised InternalError(internal error.)
E 2012-10-24 06:51:27.207
internal error.
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1511, in __call__
    rv = self.handle_exception(request, response, e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1077, in __call__
    return handler.dispatch()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 547, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 545, in dispatch
    return method(*args, **kwargs)
  File "/base/data/home/apps/s~appname/1.362664407983567993/mapreduce/base_handler.py", line 65, in post
    self.handle()
  File "/base/data/home/apps/s~appname/1.362664407983567993/mapreduce/handlers.py", line 208, in handle
    ctx.flush()
  File "/base/data/home/apps/s~appname/1.362664407983567993/mapreduce/context.py", line 333, in flush
    pool.flush()
  File "/base/data/home/apps/s~appname/1.362664407983567993/mapreduce/context.py", line 221, in flush
    self.__flush_ndb_puts()
  File "/base/data/home/apps/s~appname/1.362664407983567993/mapreduce/context.py", line 239, in __flush_ndb_puts
    ndb.put_multi(self.ndb_puts.items, config=self.__create_config())
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/model.py", line 3650, in put_multi
    for future in put_multi_async(entities, **ctx_options)]
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/tasklets.py", line 325, in get_result
    self.check_success()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/tasklets.py", line 368, in _help_tasklet_along
    value = gen.throw(exc.__class__, exc, tb)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/context.py", line 703, in put
    key = yield self._put_batcher.add(entity, options)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/tasklets.py", line 368, in _help_tasklet_along
    value = gen.throw(exc.__class__, exc, tb)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/context.py", line 274, in _put_tasklet
    keys = yield self._conn.async_put(options, datastore_entities)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/ndb/tasklets.py", line 454, in _on_rpc_completion
    result = rpc.get_result()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_rpc.py", line 834, in get_result
    result = rpc.get_result()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/apiproxy_stub_map.py", line 604, in get_result
    return self.__get_result_hook(self)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_rpc.py", line 1569, in __put_hook
    self.check_rpc_success(rpc)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_rpc.py", line 1224, in check_rpc_success
    raise _ToDatastoreError(err)
InternalError: internal error. 
```

**队列.yaml：**

```
queue:
- name: default
  rate: 500/s
  bucket_size: 100
  max_concurrent_requests: 400
  retry_parameters:
    min_backoff_seconds: 5
    max_backoff_seconds: 120
    max_doublings: 2 
```

**MapReduce 映射器参数：**

```
'shard_count': 16,
'processing_rate': 200,
'batch_size': 20
 we would like to increase these numbers, since we need more speed in processing, but once we try to increase it increases error rate... 
```

**Blobstore 文件数：**几个（其中一些包含数百万行）

**前端实例类：** F4

**处理流程：**

1.  我们仅使用映射器进行此特定处理。
2.  我们使用 BlobstoreLineInputReader（blob 包含文本文件）。
3.  每行代表我们需要创建的新条目，如果它不存在（其中一些我们更新）。

**我的问题是：**

*   我们怎样才能避免这些错误呢？
*   关于我们如何选择/平衡映射器参数（shard_count、processing_rate、batch_size）是否有任何提示/提示？
*   工作会发生什么，它会被重试（如果是，我们如何控制它？）还是不重试？

顺便说一句，我们尝试使用[**此处**](https://stackoverflow.com/questions/12910282/appengine-mapreduce-ndb-deadlineexceedederror)提供的一些建议（控制 batch_size），但我们仍然看到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T10:52:12.453

这看起来像一个超时错误 - 检查您的日志以查看该进程在此之前运行了多长时间。

如果是，您应该尝试减少调用 put_multi() 的项目数量（即减少批量大小）并添加计时器检查，以便当每次 put_multi() 调用的平均时间接近处理时间时限制你退出，让另一个开始。

# asp.net - 我如何在 asp.net 项目中使用剃刀语法而不是 mvc

> ID：13044754
> 
> 赞同：0
> 
> 时间：2012-10-24T07:38:35.410
> 
> 标签：asp.net, razor

> **可能重复：**
> [我们可以在 ASP.NET Webforms（*.aspx 页面）中使用 Razor 语法吗？](https://stackoverflow.com/questions/5264852/can-we-use-razor-syntax-in-asp-net-webforms-aspx-pages)

是否可以在 asp.net 项目 web 表单和 cshtml 文件中使用剃刀语法

> @{
> 
> var greeting = "欢迎来到我们的网站！";
> 
> ```
> } 
> ```

# php - PHP：如何获取 2 个静态字符串之间的字符串？

> ID：13044759
> 
> 赞同：-1
> 
> 时间：2012-10-24T07:38:57.227
> 
> 标签：php

我有这个案例：

```
<!-- [STATIC STRING] -->
Some HTML codes here
<!-- [STATIC STRING END] --> 
```

如何在 PHP 中获取 STATIC STRING 和 STATIC STRING END 之间的任何代码？是否有可能在这样的相同条件之间得到一些东西：

```
<!-- [STATIC STRING] -->
Some HTML codes here
<!-- [STATIC STRING] --> 
```

我只需要在某些东西之间放置一些字符串，以便稍后我可以使用 PHP 操作它。知道如何提高效率吗？

**更新**：假设 HTML 代码存储为 file.html，另一方面我有这个 PHP 脚本：

```
$Filename = 'file.html';
$Handle = fopen($Filename, "r");
$Contents = fread($Handle, filesize($Filename));
fclose($Handle); 
```

从这个 PHP 中，我不知道如何在`<!-- [STATIC STRING] -->`和之间获取 HTML 代码`<!-- [STATIC STRING END] -->`。并使其更简单......只需假设它之前和之后没有其他代码。我需要的是这两者之间的代码并将其作为 PHP 变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:41:25.917

试试正则表达式

```
staticstring(.*)staticstring 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:52:52.227

使用它从字符串中提取数据

```
function extractor($str,$from,$to)
{
    $from_pos = strpos($str,$from);
    $from_pos = $from_pos + strlen($from);
    $to_pos   = strpos($str,$to,$from_pos);// to must be after from
    $return   = substr($str,$from_pos,$to_pos-$from_pos);
    unset($str,$from,$to,$from_pos,$to_pos );           
    return $return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:41:48.250

我能想到的最接近您想要的是heredoc：

```
public $myHTML = <<<EOT
<div>bar</div>
EOT; 
```

如果您只想将某些内容嵌入到您的 html 中以供以后使用，例如屏幕刮板等，那么为什么不将您想要的 html 嵌入到具有您可以引用的 id 的 div 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T07:53:57.507

如果您是 PHP 新手，您需要检查PHP 示例代码的[strlen](http://www.w3schools.com/php/func_string_strlen.asp)、[strpos](http://www.w3schools.com/php/func_string_strpos.asp)和[substr函数：](http://www.w3schools.com/php/func_string_substr.asp)

```
<?php
    $str = "[STATIC STRING]
        Some HTML codes here
        [STATIC STRING END]";
    $answer = $str;
    $start_text = "[STATIC STRING]";
    $end_text = "[STATIC STRING END]";
    $start_index = strpos($answer,$start_text)+strlen($start_text);
    $answer = substr($answer,$start_index);

    $end_index = strpos($answer,$end_text);
    $answer = substr($answer,0,$end_index);

    echo $answer;
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-04T06:58:53.893

试试这个，因为它适用于文件中的多个标签，（不会涵盖嵌套标签）

```
preg_match_all('<!--\s\[STATIC\sSTRING\]\s-->(?P<match>(?:(?!<!--\s\[STATIC\sSTRING\sEND\]\s-->).)*)<!--\s\[STATIC\sSTRING\sEND\]\s-->', $string, $match); 
```

然后 $match['match'] 将拥有您的数据。

花了我几分钟的时间，

```
Array
(
    [0] => Array
        (
            [0] => <!-- [STATIC STRING] -->
Some HTML codes here
<!-- [STATIC STRING END] -->
        )

    [match] => Array
        (
            [0] => 
Some HTML codes here

        )

    [1] => Array
        (
            [0] => 
Some HTML codes here

        )

) 
```

附言。你应该能够

```
$arr = array_map('trim', $match['match']); 
```

并移除所有外部空间。

个人 id 带有这样的标签，

```
<!-- { html content } --> 
```

更容易匹配。

```
$string = '<!-- { STATIC STRING } -->
<b> hello</b>
<!-- { <strong>Other STATIC STRING</strong> } -->';

preg_match_all('/<!--\s\{(?P<match>(?:(?!\}\s-->).)*)\}\s-->/', $string, $match); 
```

输出

```
Array
(
    [0] => Array
        (
            [0] => <!-- { STATIC STRING } -->
            [1] => <!-- { <strong>Other STATIC STRING</strong> } -->
        )

    [match] => Array
        (
            [0] =>  STATIC STRING 
            [1] =>  <strong>Other STATIC STRING</strong> 
        )

    [1] => Array
        (
            [0] =>  STATIC STRING 
            [1] =>  <strong>Other STATIC STRING</strong> 
        )

) 
```

# c# - 无法比较 SqlBulkCopy 中的列

> ID：13044772
> 
> 赞同：1
> 
> 时间：2012-10-24T07:40:13.130
> 
> 标签：c#, asp.net, sql-server

这是我的代码：

```
 protected void Button1_Click(object sender, EventArgs e)
 {
    string strFileType = System.IO.Path.GetExtension(FileUpload1.FileName).ToString().ToLower();
    string strFileName = FileUpload1.PostedFile.FileName.ToString();

    FileUpload1.SaveAs(Server.MapPath("~/Import/" + strFileName + strFileType));
    string strNewPath = Server.MapPath("~/Import/" + strFileName + strFileType);

    string excelConnectionString = String.Format(@"Provider=Microsoft.Jet.OLEDB.4.0;" + "Data Source="+strNewPath +"; Extended Properties=Excel 8.0;");

    //string excelConnectionString = String.Format(@"Provider=Microsoft.Jet.OLEDB.4.0;" + "Data Source=C:\\myFolder\\Book1.xls;" + "Extended Properties=Excel 8.0;"); 

   // Create Connection to Excel Workbook
   using (OleDbConnection connection = new OleDbConnection(excelConnectionString))
   {
       OleDbCommand command = new OleDbCommand("Select ID,Data FROM [Sheet1$]", connection);

       connection.Open();

       // Create DbDataReader to Data Worksheet
       using (DbDataReader dr = command.ExecuteReader())
       {
          // SQL Server Connection String
          string sqlConnectionString = "Data Source=DITSEC3;Initial Catalog=test;Integrated Security=True";

          con.Open();
          DataTable dt1 = new DataTable();
          string s = "select count(*) from ExcelTable"; 
          string r = ""; 
          SqlCommand cmd1 = new SqlCommand(s, con);

          try 
          { 
              SqlDataAdapter da1 = new SqlDataAdapter(cmd1); 
              da1.Fill(dt1);
          }
          catch { } 

          int RecordCount; 
          RecordCount = Convert.ToInt32(cmd1.ExecuteScalar());

          r = RecordCount.ToString(); 
          Label1.Text = r;
          con.Close();
          int prv = Convert.ToInt32(r);

          //matching columns
          //SqlBulkCopyColumnMapping mapping1 = new SqlBulkCopyColumnMapping("id", "ida");
          //SqlBulkCopyColumnMapping mapping2 = new SqlBulkCopyColumnMapping("data", "dataa");

          // Bulk Copy to SQL Server
          using (SqlBulkCopy bulkCopy = new SqlBulkCopy(sqlConnectionString))
          {
              bulkCopy.DestinationTableName = "ExcelTable";
              bulkCopy.WriteToServer(dr);
          }

          con.Open();
          DataTable dt = new DataTable(); 
          s = "select count(*) from ExcelTable";  r = ""; 

          SqlCommand cmd = new SqlCommand(s, con); 

          try 
          { 
               SqlDataAdapter da = new SqlDataAdapter(cmd);
               da.Fill(dt); 
          }
          catch { } 

          RecordCount = Convert.ToInt32(cmd.ExecuteScalar()); 
          r = RecordCount.ToString(); Label1.Text = r;

          con.Close();

          int ltr = Convert.ToInt32(r);
          if (prv == ltr)
          {
             Label1.Text = "No records Added";
          }
          else
          {
             Label1.Text = "Records Added Successfully !";
          }
       }
    } 
```

我知道我需要添加如下内容：

```
 SqlBulkCopyColumnMapping mapping1 = new SqlBulkCopyColumnMapping("id", "ida");
 SqlBulkCopyColumnMapping mapping2 = new SqlBulkCopyColumnMapping("data", "dataa"); 
```

但我不确定我应该在上面的代码中添加它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:14:37.413

列映射将被添加到`bulkCopy.ColumnsMappings`集合中：

```
var mapping1 = new SqlBulkCopyColumnMapping("id", "ida");
bulkCopy.ColumnMappings.Add(mapping1); 
```

在执行调用之前进行映射`WriteToServer`。

的[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopycolumnmapping.aspx)有`SqlBulkCopyColumnMapping`进一步的文档和示例。

# outlook-2010 - iCal4j ics 文件未导入到 Outlook 2010

> ID：13044773
> 
> 赞同：2
> 
> 时间：2012-10-24T07:40:13.937
> 
> 标签：outlook-2010, icalendar, ical4j

我在通过 Outlook 中的“互联网日历”选项导入 ics 文件时遇到问题。我相信该文件是由 java 小程序生成的。当我直接在 Outlook 2010 中打开 ics 文件时，它工作正常，即单击链接并使用 Outlook 打开下载的文件。我还使用一些堆栈溢出帖子中提到的验证器在线验证了它。

但是，当我通过 Internet 日历订阅该链接时，出现以下错误：

“文件“日历”不是有效的 Internet 日历文件”

我无法弄清楚这里出了什么问题，并且错误消息并不是特别有用。

有谁知道为什么这不起作用？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T14:12:32.527

在此线程上解决的问题：

[https://sourceforge.net/projects/ical4j/forums/forum/368291/topic/6062163/index/page/1](https://sourceforge.net/projects/ical4j/forums/forum/368291/topic/6062163/index/page/1)

不幸的是，我只能访问小程序链接，而不能访问任何用于生成 ics 文件本身的代码，所以除非我能找到一种方法来自动解析文件并在 METHOD:PUBLISH 行中添加我将无法在 Outlook 中添加提要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:25:56.593

虽然这似乎是一个非技术问题，但它可能与 Outlook 的 iCalendar 实现有关。也许您可以将示例 ICS 数据发布到 ical4j 论坛，看看是否有一些 Outlook 不喜欢的明显内容。

[http://sourceforge.net/projects/ical4j/forums/forum/368291](http://sourceforge.net/projects/ical4j/forums/forum/368291)

# mongodb - MongoDB，如何将最新数据保存在一台服务器上并将旧数据移至另一个分片？

> ID：13044776
> 
> 赞同：2
> 
> 时间：2012-10-24T07:40:21.423
> 
> 标签：mongodb

我想将新数据保留在一台服务器上，并将旧数据移至下一个分片。

第一个服务器将是高可用的，因为用户只要求新数据，旧数据只是出于历史原因。

是否可以选择正确的 shard-key 或打开一些选项，以便分片的行为类似于管，其中数据从一个节点传输到另一个节点，同时考虑到添加文档的时间？

我找到了一个链接[https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/DndTLcifsnQ](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/DndTLcifsnQ)但直到今天它仍然没有得到答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:50:25.360

是的，您可以使用 a 标志作为分片键的组件并使用 2.2 标签感知分片功能。但是，缺点是：您必须将此标志用作键列表的第一个键，并出于直接路由原因使用该键查询。

那里有一篇不错的博客文章，介绍了如何使用这些标签感知分片。[控制集合分发](http://www.kchodorow.com/blog/2012/07/25/controlling-collection-distribution/)

另一种方法是使用两个集合：一个分片（存档），一个未分片（活动数据）。

# objective-c - UIButton UIControlDefault 标题值

> ID：13044779
> 
> 赞同：-1
> 
> 时间：2012-10-24T07:40:27.283
> 
> 标签：objective-c, ios, uibutton

需要检查是否`IBOutLet UIButton *button`没有文字写在上面。要编码什么？

```
NSLog(@"%@", [button titleForState:UIControlStateNormal]);   //it gives (null) 
```

我应该如何写决定声明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:03:25.360

确保您已将标题设置为`UIControlState`：

```
[button setTitle:@"Click Me!" forState:UIControlStateNormal]; 
```

否则，一切都应该正常工作。

**更新**

要检查它是否没有文本，请使用：

```
if (![menuItemButton titleForState:UIControlStateNormal]) {
    NSLog(@"YES, no text.");
} else {
    NSLog(@"no, there is text.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:09:08.570

最好检查一下长度`button.labelTitle.text`。

谢谢你们的答案。

# php - 从旧 Windows 主机移动到运行 linux 的新主机后，php 代码出现问题。

> ID：13044780
> 
> 赞同：0
> 
> 时间：2012-10-24T07:40:27.353
> 
> 标签：php, linux, windows

最近，我们将网站从运行旧 php 的旧 Windows 主机转移到运行最新 php/mysql 的新 linux 主机。

我设法解决了很多问题，但有两个问题让我望而却步。

第一个是无法在我们的库存中切换到新“页面”的数字。

例如-> [http://adepto.hr/adepto_promotivni_artikli.php?kat=10&start=0](http://adepto.hr/adepto_promotivni_artikli.php?kat=10&start=0)

当您单击上述任何数字时，没有任何反应。在所有其他类别上都是一样的。这是页面代码。正如我所说，我设法修复了一些由过时代码引起的错误，但无法解决这个问题。

[http://pastebin.com/fbxZdgS5](http://pastebin.com/fbxZdgS5)

第二个是显示不正确的克罗地亚字母。（例如 čćšđž）。我试过在 php 文件中声明它，但没有运气。声明/定义此字符集的正确方法是什么？

谢谢你，萨图尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:45:24.490

我看不到在哪里`$start`实例化。看起来你错过了一个`$start = $_GET['start']`

如果您想要良好的字符集支持，您还应该将 PHP 文件保存为 UTF-8 而不是 ISO-8859-1。

# java - 无法访问Tomcat中新创建的文件夹

> ID：13044786
> 
> 赞同：0
> 
> 时间：2012-10-24T07:40:57.130
> 
> 标签：java, tomcat7

我是 Tomcat 的新手，我已成功安装它，现在正在尝试。

我在 /usr/share/tomcat7/webapps/ 目录中创建了一个新目录“data”，当我浏览这个地址**“http://127.0.0.1:8080/manager/html”**时可以看到创建的目录。问题是我无法访问通过访问**“http://127.0.0.1:8080/data/”**创建的数据文件夹我收到 404 错误，描述为“请求的资源不可用”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T07:48:35.403

您可能已经注意到日志文件中有这一行：

```
INFO: Deploying web application directory data 
```

这意味着该目录应该是一个 Web 应用程序；但我猜目录是空的；所以，实际上没有什么可显示的。只需在目录中放一个简单`index.html`的文件，您就可以使用此地址转到该页面：`http://127.0.0.1:8080/data/`

# sorting - 如何以编程方式重新排序drupal 7 ubercart 3属性

> ID：13044793
> 
> 赞同：1
> 
> 时间：2012-10-24T07:41:19.113
> 
> 标签：sorting, drupal-7, ubercart

我如何以编程方式排列或设置属性的顺序

在 drupal7 的 ubercart3 中，我尝试执行以下操作：

```
$node = node_load($product_id); 
$node->attributes[1]->ordering = -25; 
$node->attributes[12]->ordering = -24; 
node_save($node); 
```

当我保存它时，什么都没有改变。

有人可以帮忙解决这个问题吗？

我试过 node_presave() 钩子发生了同样的事情，它没有重新排序产品属性。

# javascript - 函数、变量和jquery

> ID：13044796
> 
> 赞同：0
> 
> 时间：2012-10-24T07:41:37.297
> 
> 标签：javascript, jquery

我有 8 个用户可以选择的搜索过滤器。当用户单击过滤器时，它会打开此过滤器的选项。当用户点击退出时，该功能`hideFilterSearch()`被触发。我对变量 formData 的范围的理解有问题（见下文）。

```
$(document).ready(function() {
    var formData = $("form").serialize();
});

function hideFilterSearch() {
    console.log(formData);
    $(".filters").hide();
    newFormData = $("form").serialize();
    if (formData != newFormData) {
        //newFormData is sent with ajax and search results are updates
    }
    formData = $("form").serialize();  
}

//show, hide filter changer
$('body').click(function(event) {
    if (!$(event.target).closest('.filter').length) {        
        hideFilterChanger();
    };
}); 
```

在这种情况下，控制台日志给了我空字符串。我也尝试`formData`作为参数发送`()hideFilterSearch(formData)`，但问题是`formData`不会更新。我不确定传递`formData`给函数的正确方法是什么，但是当它被改变时仍然会更新它在函数内部的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:46:12.597

使用全局变量。作为局部范围内的formData变量，您不能在另一个函数中访问它。

将您的代码更改为以下内容

```
window.formData = $("form").serialize(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:47:41.480

函数可以返回值。传递 formData 并从函数返回更新的数据。然后您可以在 hideFilterChanged 中分配它。

```
$(document).ready(function(){
 var formData = $("form").serialize();

 function hideFilterSearch(formData){
     console.log(formData);
     $(".filters").hide();
     newFormData = $("form").serialize();
     if(formData!=newFormData){
       //newFormData is sent with ajax and search results are updates
     }
     return $("form").serialize();  
   }

   //show, hide filter changer
   $('body').click(function(event) {
     if (!$(event.target).closest('.filter').length) {        
         formData = hideFilterChanger(formData);
     };
   });
}); 
```

# arrays - 比较两个以对象为值的数组

> ID：13044799
> 
> 赞同：2
> 
> 时间：2012-10-24T07:41:56.180
> 
> 标签：arrays, powershell, compare

我是 Powershell 的新手，需要一些帮助来解决问题。我创建了一个函数，它返回一个包含有关目录信息的对象：

> 日期：2012 年 10 月 12 日
> 
> 电脑：PC1
> 
> 目录：C:\TEMP
> 
> FOLDERSIZE_IN_MB：70

我遍历目录以收集它们的大小信息，并每周一次将其导出到 CSV 文件。

这里开始我的问题：

我想获取有关目录增长的一些信息。我开始编写一个脚本，导入最旧和最新的 CSV 文件。

```
$data="C:\LOG\Data"
$data= gci -path $data -filter "*.csv" 
$temp=""
$old,$new=@()

foreach($item in $data){

    If((Get-Date $item.LastWriteTime -format ("ddMMyyyy")) -gt $temp){

       $new+= $item.FullName |Import-CSV -delimiter ";"
    }
    Elseif((Get-Date $item.LastWriteTime -format ("ddMMyyyy")) -lt $temp){
        $old+= $item.FullName |Import-CSV -delimiter ";"
    }

 $temp=(Get-Date $item.LastWriteTime -format ("ddMMyyyy"))
} 
```

如何比较两个数组以在两者中找到相等的 dir vlaues 并计算它们的大小？

我不知道如何检查：

> 如果 OLD 中的 C:\TEMP 和 NEW 中的 C:\TEMP 则调用 (1-(SIZEOLD/SITZENEW))*100。

我很高兴得到如下输出：

> 日期：2012 年 10 月 12 日
> 
> 电脑：PC1
> 
> 目录：C:\TEMP
> 
> FOLDERSIZE_IN_MB：80,5
> 
> GROWTH_SINCE_LAST_SCAN：15%

这是我为解决我的问题所做的，但我看起来并不可靠，我不知道如何将哈希转换回对象以将结果通过管道传输到 csv 中。

$old=$old|组对象项 $new=$new|组对象项

```
$result1=compare $new $old -property Name -includeequal -passthru |WHERE {$_.Sideindicator -eq "=="}
$result2=compare $old $new -property Name -includeequal -passthru |WHERE {$_.Sideindicator -eq "=="}

for($i=0;$i -le $result1.count;$i++){

    if($result1[$i].Name -contains $result2[$i].Name){

      $Size2=($result2[$i].Group)| select-object -property FolderSize_in_MB
      $Size1=($result1[$i].Group)| select-object -property FolderSize_in_MB    

          if(([int]$Size1.FolderSize_in_MB) -ne "0"){
              $growth=(1-(([int]$Size2.FolderSize_in_MB)/([int]$Size1.FolderSize_in_MB)))*100
          }
          else{
                $growth="0"
          }
       }
    else{

    }
    if($result1[$i]){

   $result1[$i].Group| ADD-Member NoteProperty Growth ("{0:n2}"-f $growth +"%")

   } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:31:58.907

最先进的方法是基于`gci | measure-object -sum length`. 脚本专家就是[这样做的](http://blogs.technet.com/b/heyscriptingguy/archive/2012/05/25/getting-directory-sizes-in-powershell.aspx "文章")。

对于自制解决方案，我宁愿将目录名称和大小存储在文件中。下次运行时，导入数据并在其内容上创建一个哈希表。使用每个目录的全名作为哈希键和大小作为值。读取当前目录大小并从哈希表中查看旧大小。（你可以序列化哈希表，我可能会这样做。）

```
$ht = @{}
$oldDirs = import-csv "lastStatus.log" # Assume: Name,Size

$oldDirs | % {
  $ht.Add($_.Name, $_.Size)
}

$newDirs = gci -path $data -filter "*.csv"

$newDirs | % {
  # If the hashtable contains dir with same name, read the size and print comparison
  if($ht.ContainsKey($_.FullName)) {
    $oldValue = $ht.Item($_.FullName)
    $("{0}, {1}% " -f $_,   (1-($oldValue/$_.Size))*100 ) # Get current size here somehow
  }
} 
```

# wpf - 适用于 wpf 的 ArcGIS Runtime - PointDataSource mapTip

> ID：13044800
> 
> 赞同：1
> 
> 时间：2012-10-24T07:42:00.247
> 
> 标签：wpf, arcgis, esri

我的应用程序中有 GraphicsLayer，我使用 PointDataSource，如 itemsSource：

```
 trackEntryPointDataSource = new PointDataSource();
        trackEntryPointDataSource.DataSpatialReference = 
                                  new SpatialReference((int)CommonEpsgCodes.JTSKEN);
        trackEntryPointDataSource.XCoordinateBinding = 
                                  new System.Windows.Data.Binding("XJTSK");
        trackEntryPointDataSource.YCoordinateBinding = 
                                  new System.Windows.Data.Binding("YJTSK");
        SimpleRenderer srd = new SimpleRenderer();
        srd.Symbol = new SimpleMarkerSymbol()
        {
            Color = new SolidColorBrush(Colors.Yellow)
        };

        EntriesLyr.GraphicsSource = trackEntryPointDataSource;
        EntriesLyr.Renderer = srd; 
```

有人知道如何将地图提示添加到图形符号吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T07:16:45.310

GraphicsLayer 类有一个 MapTip 属性。

如果在[此处找到详细示例](http://resources.arcgis.com/en/help/runtime-wpf/apiref/index.html?esri.arcgis.client~esri.arcgis.client.graphicslayer_members.html)

# node.js - Node.js/Mongojs 嵌套数据库回调返回

> ID：13044801
> 
> 赞同：2
> 
> 时间：2012-10-24T07:42:07.017
> 
> 标签：node.js, mongodb, express, restify

我正在为会话身份验证实现一个 restify 中间件。该函数包含嵌套的异步数据库调用：db.sessions.findOne() 回调中的 db.sessions.remove()。

“返回”语句让我感到困惑，因为我不确定我是从回调返回 next() 还是 next(err) 到 verifyUserSession()，还是只是从 verifyUserSessions 返回？我这样做对吗？

```
function verifyUserSession(req, res, next) {

if (req.headers.sessionKey) 
{
    db.sessions.findOne(req.headers.sessionKey, function(err, session) {

        if (err) 
        {
            return next(err);
        }
        if (!session) 
        {
            return next(new Error({'message': 'Session does not exist'}));
        }

        if ((new Date().getTime() - session.timestamp.getTime())/86400000 > 60)
        {
            db.sessions.remove({sessionKey: req.headers.sessionKey}, function(err){
                if (err) 
                {
                    return next(err);
                }
                return next(new Error({'message': 'Session expired'}));
            });
        }
        else
        {
            // session ok
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:44:30.003

您使用的回调恰到好处。

`return`仅用于从当前回调返回。当您调用时，`return next(...)`您调用回调函数并返回它返回的值。通常只需要返回以确保您不会调用两次回调。

请注意，您需要确保函数中每个可能的分支都会调用回调，否则您的程序将永远不会从`verifyUserSession`. 在您给出的代码示例中，这发生了两种情况：1）如果会话正常，2）如果`req.headers.sessionKey`没有设置。您还应该为这些分支添加回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:56:34.737

使用异步编码中的返回语句**只是**因为它们会中断块代码的进一步执行。基本上是这样的：

```
db.sessions.remove({sessionKey: req.headers.sessionKey}, function(err){
    if (err) 
    {
        return next(err);
    }
    return next(new Error({'message': 'Session expired'}));
}); 
```

相当于：

```
db.sessions.remove({sessionKey: req.headers.sessionKey}, function(err){
    if (err) 
    {
        next(err);
        return;
    }
    next(new Error({'message': 'Session expired'}));
    return;
}); 
```

请注意，最后一次返回是不必要的。

# iphone - 如何检查是否从 iPhone 上的网页安装了应用程序

> ID：13044805
> 
> 赞同：172
> 
> 时间：2012-10-24T07:42:41.913
> 
> 标签：iphone, ios, web-applications, mobile-safari

我想创建一个网页，如果 iPhone 没有安装应用程序，该页面会将 iPhone 重定向到[App Store ，但如果 iPhone 安装了应用程序，我希望它打开应用程序。](https://en.wikipedia.org/wiki/App_Store_%28iOS%29)

我已经在 iPhone 应用程序中实现了一个自定义 URL，所以我有一个应用程序的 URL，类似于：

```
myapp:// 
```

如果这个 URL 无效，我希望页面重定向到 App Store。这可能吗？

如果我没有在手机上安装应用程序并在 Safari 中写入 myapp:// URL，我得到的只是一条错误消息。

即使 JavaScript 存在丑陋的 hack，我也很想知道。

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2012-11-02T14:17:36.460

据我所知，您无法通过浏览器检查是否安装了应用程序。

但是您可以尝试将手机重定向到应用程序，如果没有任何反应，将手机重定向到指定页面，如下所示：

```
setTimeout(function () { window.location = "https://itunes.apple.com/appdir"; }, 25);
window.location = "appname://"; 
```

如果第二行代码给出结果，则第一行永远不会执行。

类似的问题：

*   *[iPhone 浏览器：检查是否从浏览器安装了 iPhone 应用程序](https://stackoverflow.com/questions/7573566/iphone-browser-checking-if-iphone-app-is-installed-from-browser)*
*   *[是否可以为 iPhone 应用程序（如 YouTube 和地图）注册基于 http+域的 URL 方案？](https://stackoverflow.com/questions/1108693/is-it-possible-to-register-a-httpdomain-based-url-scheme-for-iphone-apps-like/1109200#1109200)*

* * *

## 回答 #2

> 赞同：173
> 
> 时间：2013-05-23T17:16:39.640

为了进一步接受答案，您有时需要添加额外的代码来处理启动应用程序后返回浏览器的人 - setTimeout 函数将在他们这样做时运行。所以，我做这样的事情：

```
var now = new Date().valueOf();
setTimeout(function () {
    if (new Date().valueOf() - now > 100) return;
    window.location = "https://itunes.apple.com/appdir";
}, 25);
window.location = "appname://"; 
```

这样，如果代码执行中出现冻结（即应用程序切换），它就不会运行。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-08-18T16:17:04.067

iOS Safari 有一项功能，允许您向网页添加“智能”横幅，该横幅将链接到您的应用（如果已安装）或 App Store。

您可以通过向`meta`页面添加标签来做到这一点。如果您希望应用程序在加载时执行一些特殊操作，您甚至可以指定详细的应用程序 URL。

详细信息在 Apple 的[使用智能应用横幅](https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)页面推广应用。

该机制的优点是简单易行，呈现标准化的旗帜。缺点是您无法控制外观或位置。此外，如果该页面是在 Safari 以外的浏览器中查看的，那么所有的赌注都将被取消。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2017-06-21T08:43:48.663

截至 2017 年，似乎没有可靠的方法来检测是否安装了应用程序，并且重定向技巧不会在任何地方都有效。

对于像我这样需要直接从电子邮件中进行深度链接的人（很常见），值得注意以下几点：

*   使用 appScheme:// 发送电子邮件将无法正常工作，因为这些链接将在 Gmail 中被过滤

*   自动重定向到 appScheme:// 被 Chrome 阻止：我怀疑 Chrome 需要重定向与用户交互同步（如点击）

*   您现在可以在没有 appScheme:// 的情况下进行深度链接，这会更好，但它需要一个现代平台和额外的设置。[安卓](https://developer.android.com/training/app-indexing/deep-linking.html) [iOS](https://developer.apple.com/library/content/documentation/General/Conceptual/AppSearch/UniversalLinks.html)

* * *

值得注意的是，其他人已经对此进行了深入思考。如果您查看 Slack 如何实现他的“魔术链接”功能，您会注意到：

*   它发送带有常规 HTTP 链接的电子邮件（可以使用 Gmail）
*   该网页有一个链接到 appScheme:// 的大按钮（可以使用 Chrome）

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-07-30T22:11:37.343

@Alistair 在[这个答案](https://stackoverflow.com/a/16720093/242848)中指出，有时用户会在打开应用程序后返回浏览器。该答案的评论者表示，必须根据 iOS 版本更改使用的时间值。

当我们的团队不得不处理这个问题时，我们发现初始超时的时间值以及告诉我们是否已经返回浏览器必须进行调整，并且通常不适用于所有用户和设备。

与其使用任意时间差阈值来确定我们是否返回浏览器，不如检测“pagehide”和“pageshow”事件。

我开发了以下网页来帮助诊断发生了什么。它在事件展开时添加了 HTML 诊断，主要是因为使用控制台日志记录、警报或 Web Inspector、jsfiddle.net 等技术在此工作流程中都有其缺点。JavaScript 不使用时间阈值，而是计算“pagehide”和“pageshow”事件的数量以查看它们是否已发生。我发现最稳健的策略是使用 1000 的初始超时（而不是其他人报告和建议的 25、50 或 100）。

这可以在本地服务器上提供，例如`python -m SimpleHTTPServer`在 iOS Safari 上查看。

要使用它，请按“打开已安装的应用程序”或“未安装应用程序”链接。这些链接应分别导致地图应用程序或应用程序商店打开。然后，您可以返回 Safari 查看事件的顺序和时间。

（注意：这仅适用于 Safari。对于其他浏览器（如 Chrome），您必须为 pagehide/show-equivalent 事件安装处理程序）。

**更新：**正如@Mikko 在评论中指出的那样，我们正在使用的 pageshow/pagehide 事件显然在 iOS8 中不再支持。

```
<html>
<head>
</head>

<body>
<a href="maps://" onclick="clickHandler()">Open an installed app</a>
<br/><br/>
<a href="xmapsx://" onclick="clickHandler()">App not installed</a>
<br/>

<script>
    var hideShowCount = 0 ;
    window.addEventListener("pagehide", function() {
        hideShowCount++;
        showEventTime('pagehide');
    });

    window.addEventListener("pageshow", function() {
        hideShowCount++;
        showEventTime('pageshow');
    });

    function clickHandler(){
        var hideShowCountAtClick = hideShowCount;
        showEventTime('click');
        setTimeout(function () {
                      showEventTime('timeout function ' + (hideShowCount-hideShowCountAtClick) + ' hide/show events');
                      if (hideShowCount == hideShowCountAtClick){
                              // app is not installed, go to App Store
                           window.location = 'http://itunes.apple.com/app';
                      }
                   }, 1000);
    }

    function currentTime()
    {
        return Date.now()/1000;
    }

    function showEventTime(event){
        var time = currentTime() ;
        document.body.appendChild(document.createElement('br'));
        document.body.appendChild(document.createTextNode(time + ' ' + event));
    }
</script>
</body>

</html> 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-11-19T03:06:52.677

您可以查看这个试图解决问题的插件。它基于与 misemisa 和 Alastair 等描述的相同方法，但使用隐藏的 iframe。

[https://github.com/hampusohlsson/browser-deeplink](https://github.com/hampusohlsson/browser-deeplink)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-09-17T19:50:08.287

我需要做这样的事情，我最终选择了以下解决方案。

我有一个特定的网站 URL，它将打开一个带有两个按钮的页面

1.  *一*键进入网站

2.  按钮*二*转到应用程序（iPhone/Android 手机/平板电脑）。如果未安装应用程序（如另一个 URL 或应用程序商店），您可以从此处回退到默认位置

3.  Cookie 记住用户的选择

    ```
     <head>
         <title>Mobile Router Example </title>

         <script type="text/javascript">
             function set_cookie(name,value)
             {
                // JavaScript code to write a cookie
             }
             function read_cookie(name) {
                // JavaScript code to read a cookie
             }

             function goToApp(appLocation) {
                 setTimeout(function() {
                     window.location = appLocation;
                         // This is a fallback if the app is not installed.
                         // It could direct to an app store or a website
                         // telling user how to get the app
                 }, 25);
                 window.location = "custom-uri://AppShouldListenForThis";
             }

             function goToWeb(webLocation) {
                 window.location = webLocation;
             }

             if (readCookie('appLinkIgnoreWeb') == 'true' ) {
                 goToWeb('http://somewebsite');

             }
             else if (readCookie('appLinkIgnoreApp') == 'true') {
                 goToApp('http://fallbackLocation');
             }

         </script>
     </head>

     <body>
         <div class="iphone_table_padding">
         <table border="0" cellspacing="0" cellpadding="0" style="width:100%;">
             <tr>
                 <td class="iphone_table_leftRight">&nbsp;</td>
                 <td>
                     <!-- Intro -->
                     <span class="iphone_copy_intro">Check out our new app or go to website</span>
                 </td>
                 <td class="iphone_table_leftRight">&nbsp;</td>
             </tr>
             <tr>
                 <td class="iphone_table_leftRight">&nbsp;</td>
                 <td>
                     <div class="iphone_btn_padding">

                         <!-- Get iPhone app button -->
                         <table border="0" cellspacing="0" cellpadding="0" class="iphone_btn" onclick="set_cookie('appLinkIgnoreApp',document.getElementById('chkDontShow').checked);goToApp('http://getappfallback')">
                             <tr>
                                 <td class="iphone_btn_on_left">&nbsp;</td>
                                 <td class="iphone_btn_on_mid">
                                     <span class="iphone_copy_btn">
                                         Get The Mobile Applications
                                     </span>
                                 </td>
                                 <td class="iphone_btn_on_right">&nbsp;</td>
                             </tr>
                         </table>

                     </div>
                 </td>
                 <td class="iphone_table_leftRight">&nbsp;</td>
             </tr>
             <tr>
                 <td class="iphone_table_leftRight">&nbsp;</td>
                 <td>
                     <div class="iphone_btn_padding">

                         <table border="0" cellspacing="0" cellpadding="0" class="iphone_btn"  onclick="set_cookie('appLinkIgnoreWeb',document.getElementById('chkDontShow').checked);goToWeb('http://www.website.com')">
                             <tr>
                                 <td class="iphone_btn_left">&nbsp;</td>
                                 <td class="iphone_btn_mid">
                                     <span class="iphone_copy_btn">
                                         Visit Website.com
                                     </span>
                                 </td>
                                 <td class="iphone_btn_right">&nbsp;</td>
                             </tr>
                         </table>

                     </div>
                 </td>
                 <td class="iphone_table_leftRight">&nbsp;</td>
             </tr>
             <tr>
                 <td class="iphone_table_leftRight">&nbsp;</td>
                 <td>
                     <div class="iphone_chk_padding">

                         <!-- Check box -->
                         <table border="0" cellspacing="0" cellpadding="0">
                             <tr>
                                 <td><input type="checkbox" id="chkDontShow" /></td>
                                 <td>
                                     <span class="iphone_copy_chk">
                                         <label for="chkDontShow">&nbsp;Don&rsquo;t show this screen again.</label>
                                     </span>
                                 </td>
                             </tr>
                         </table>

                     </div>
                 </td>
                 <td class="iphone_table_leftRight">&nbsp;</td>
             </tr>
         </table>

         </div>

     </body>

     </html> 
    ```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-11-30T12:32:28.463

在编译了一些答案后，我想出了以下代码。令我惊讶的是，计时器不会*在*PC（Chrome 和 Firefox）或 Android Chrome 上冻结 - 触发器在后台工作，可见性检查是唯一可靠的信息。

```
var timestamp        = new Date().getTime();
var timerDelay       = 5000;
var processingBuffer = 2000;

var redirect = function(url) {
  //window.location = url;
  log('ts: ' + timestamp + '; redirecting to: ' + url);
}

var isPageHidden = function() {
    var browserSpecificProps = {hidden:1, mozHidden:1, msHidden:1, webkitHidden:1};
    for (var p in browserSpecificProps) {
        if(typeof document[p] !== "undefined"){
          return document[p];
      }
    }
    return false; // Actually inconclusive, assuming not
}
var elapsedMoreTimeThanTimerSet = function(){
  var elapsed = new Date().getTime() - timestamp;
  log('elapsed: ' + elapsed);
  return timerDelay + processingBuffer < elapsed;
}

var redirectToFallbackIfBrowserStillActive = function() {
  var elapsedMore = elapsedMoreTimeThanTimerSet();
  log('hidden:' + isPageHidden() + '; time: ' + elapsedMore);
  if (isPageHidden() || elapsedMore) {
    log('not redirecting');
  }else{
      redirect('appStoreUrl');
  }
}

var log = function(msg){
    document.getElementById('log').innerHTML += msg + "<br>";
}

setTimeout(redirectToFallbackIfBrowserStillActive, timerDelay);
redirect('nativeApp://'); 
```

[JS小提琴](https://jsfiddle.net/ntxt/amgaovgt/8/ "JS小提琴")

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-08-04T15:10:48.813

以下答案仍然有效，在 iOS 10 到 14 上进行了测试。它建立在早期答案的基础上。我添加`window.close()`以摆脱重定向或页面返回后留在浏览器中的空选项卡窗口。如果修复了 4 个场景中的 2 个会留下空白标签的情况....也许其他人可以修复第 3 和第 4

```
<script>
var now = new Date().valueOf();
setTimeout(function () {
  // time stamp comaprison prevents redirecting to app store a 2nd time
  if (new Date().valueOf() - now > 100) {
    window.close() ;  // scenario #4
    // old way - "return" - but this would just leave a blank page in users browser
    //return;  
  }
  if (isIOS == 1) {
    // still can't avoid the "invalid address" safari pops up
    // but at least we can explain it to users
    var msg = "'invalid address' = MyApp NOT DETECTED.\n\nREDIRECTING TO APP STORE" ;
  } else {
    var msg = "MyApp NOT DETECTED\n\nREDIRECTING TO APP STORE" ;
  }
  if (window.confirm(msg)) {
    window.location = "<?=$storeUrl?>";
    // scenario #2 - will leave a blank tab in browser
  } else {
    window.close() ;  // scenario #3
  }
}, 50);
window.location = "<?=$mobileUrl?>";  
// scenario #1 - this will leave a blank tab
</script> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-07T21:42:49.147

我一直试图在 iOS15 的 Safari 扩展中实现相同的目标。似乎所有以前的策略都失败了——“打开方式”对话框和“无效地址”对话框完全相等，都是非阻塞的，因此基于计时器的解决方案提供不一致的结果，具体取决于加载页面所需的时间.

我的解决方法是在模态弹出窗口中创建一个应用商店重定向消息，该消息模仿系统提示的外观，将其隐藏在系统提示后面，并在选项卡失去焦点时使用事件侦听器将其关闭。UX 还存在两个问题：

1.  没有办法抑制“无效地址”提示。我们所能做的（如果我们不走通用链接路径）就是在之后用我们自己的提示来解释它。
2.  如果用户从“打开方式”提示中选择“取消”，他或她仍会看到我们的重定向提示。

下面的代码受益于上面的答案和[这个](https://stackoverflow.com/a/55575632/10327858)用于创建模式弹出窗口的 SO 代码。

```
// Change the following vars to suit your needs
var my_app_name = "My App";
var my_app_id = "id1438151717"
var my_app_scheme = "myapp://do.this"

function toggleModal(isModal, inputs, elems, msg) {
  for (const input of inputs) input.disabled = isModal;
  modal.style.display = isModal ? "block" : "none";
  elems[0].textContent = isModal ? msg : "";
}

function myConfirm(msg) {
  const inputs = [...document.querySelectorAll("input, textarea, select")].filter(input => !input.disabled);
  const modal = document.getElementById("modal");
  const elems = modal.children[0].children;

  return new Promise((resolve) => {
    toggleModal(true, inputs, elems, msg);
    elems[3].onclick = () => resolve(true);
    elems[4].onclick = () => resolve(false);
  }).then(result => {
    toggleModal(false, inputs, elems, msg);
    return result;
  });
}

function redirectMessage() {
  var r = myConfirm("To download " + my_app_name + ", tap OK.");
  return r.then(ok => {
    if (ok) {
      console.log("Redirecting to the App Store...");
      window.location = "itms-apps://itunes.apple.com/app/" + my_app_id;
    } else {
      console.log("User cancelled redirect to the App Store");
    }
    return ok;
  });
}

function prepareListener() {
  document.addEventListener("visibilitychange", function() {
    const inputs = [...document.querySelectorAll("input, textarea, select")].filter(input => !input.disabled);
    const modal = document.getElementById("modal");
    const elems = modal.children[0].children;

    if (!document.hasFocus()) {
      console.log("User left tab. Closing modal popup")
      toggleModal(false, inputs, elems, "");
    }
  });
}

function onTap() {
  setTimeout(function() {
    // We can't avoid the "invalid address" Safari popup,
    // but at least we can explain it to users.
    // We will create a modal popup behind it, which the
    // event listener will close automatically if the app 
    // opens and we leave the tab

    redirectMessage()

  }, 50);
  window.location = my_app_scheme;
}

prepareListener()
```

```
#modal {
  display: none;
  position: fixed;
  z-index: 1;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background: rgb(0, 0, 0);
  background: rgba(0, 0, 0, 0.4);
  font-family: "ms sans serif", arial, sans-serif;
  font-size: medium;
  border-radius: 15px;
}

#modal>div {
  position: relative;
  padding: 10px;
  width: 320px;
  height: 60px;
  margin: 0 auto;
  top: 50%;
  margin-top: -45px;
  background: white;
  border: 2px outset;
  border-radius: 15px;
}

#cancel_button {
  position: fixed;
  right: 50%;
  margin-right: -95px;
  bottom: 50%;
  margin-bottom: -32px;
  padding: 0;
  border: none;
  background: none;
  color: rgb(0, 122, 255);
  font-size: medium;
  font-weight: normal;
}

#ok_button {
  position: fixed;
  right: 50%;
  margin-right: -140px;
  bottom: 50%;
  margin-bottom: -32px;
  padding: 0;
  border: none;
  background: none;
  color: rgb(0, 122, 255);
  font-size: medium;
  font-weight: semi-bold;
}
```

```
<div id="modal">
  <div>
    <div></div><br><br>
    <button id="ok_button">OK</button>
    <button id="cancel_button">Cancel</button>
  </div>
</div>

<p><a href="#" onclick="onTap();"> Tap here to open app </a></p>
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2013-05-30T11:06:48.103

日期解决方案比其他解决方案要好得多。我不得不像这样将时间增加到 50。

这是一个推特示例：

```
// On click of your event handler...
var twMessage = "Your Message to share";
var now = new Date().valueOf();
setTimeout(function () {
   if (new Date().valueOf() - now > 100) 
       return;
   var twitterUrl = "https://twitter.com/share?text=" + twMessage;
   window.open(twitterUrl, '_blank');
}, 50);
window.location = "twitter://post?message=" + twMessage; 
```

移动 iOS Safari 上的唯一问题是您没有在设备上安装该应用程序，因此 Safari 会显示一个警报，在打开新 URL 时自动关闭。无论如何，这是一个很好的解决方案！

* * *

## 回答 #12

> 赞同：-6
> 
> 时间：2015-11-29T02:00:31.547

我没有阅读所有这些答案，但您可能正在使用 iframe 并将源添加到“my app://whatever”。

然后定期检查页面的设置间隔是否为404。

您也可以使用 Ajax 调用。如果有 404 响应，则表示未安装该应用程序。

# database - 更改我的 CakePHP 网站的主机

> ID：13044806
> 
> 赞同：0
> 
> 时间：2012-10-24T07:42:43.723
> 
> 标签：database, cakephp, host

我买了一个用 Cakephp 制作的应用程序，以前一切都很好，但是一旦我想将它托管在另一台服务器上（保持相同的数据库和文件夹），我发现指向 CSS、JavaScript 和图像的链接不起作用。

请我对CakePHP一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:48:22.583

你清理数据库了吗？我不得不手动更改一些条目，因为 servername/ip/url 没有改变。

转到您的数据库管理系统并搜索您的旧 IP/路径/域名等....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:50:35.500

当您移动到新主机时，您是否复制了（通常是隐藏的）.htaccess 文件？

有 3 个 .htaccess 文件，一个在您网站的根目录，在 /app 目录，一个在 /app/webroot

你的新服务器上是否启用了 mod_rewrite？

# c# - 将数据类型 nvarchar 转换为数值时出错

> ID：13044808
> 
> 赞同：1
> 
> 时间：2012-10-24T07:42:55.913
> 
> 标签：c#, .net, sql-server, tsql, ado.net

我使用以下语句作为参数。

```
comm.Parameters.Add("@name", SqlDbType.NVarChar, 50).Value = txtname.Text; 
```

`Name`是 SQL Server`nvarchar`列，但我收到此错误：

> *将数据类型 nvarchar 转换为数值时出错。*

我的 sql：

```
SqlCommand comm = conn.CreateCommand();
comm.CommandText = "execute addName @name";
comm.Parameters.Add("@name", SqlDbType.NVarChar, 50).Value = txtname.Text;

conn.Open();
comm.ExecuteNonQuery();
conn.Close(); 
```

可以帮助我解决这个问题吗？我的店铺流程：

```
USE [info]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER procedure [dbo].[addName]
            @id numeric(18,0) = 0,
            @name nchar(50)
as
if (select name from TName where name = @name) is null
begin
select @id =  MAX(id)+1 from TName
insert into TName
values (@id, @name)
print @id
end
else
begin
print 'Eroare'
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:04:45.553

通过编辑，签名：

```
ALTER procedure [dbo].[addName]
        @id numeric(18,0) = 0,
        @name nchar(50) 
```

那么问题就很清楚了：

```
execute addName @name 
```

是按位置传递 - 所以您将值传递给`@name`参数`@id`。如果您从 TSQL 调用它，则需要使用以下方式传递名称：

```
execute addName @name = @name 
```

第一个（左）表示参数名称，第二个（右）表示用于此参数的值；例如，将文字传递给`addName`'s`@name`参数：

```
execute addName @name = 'Fred' 
```

但是，在 ADO.NET 中，更好的方法是：

```
comm.CommandText = "addName";
comm.CommandType = CommandType.StoredProcedure; 
```

它使用 pass-by-name 自动将其视为 SP-exec。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:48:11.823

您必须`name`在`addName`过程中修改参数的类型，并设置为`NVarChar`

你传入 C# NVarChar 类型，但你有数字在程序中被问到

# ruby-on-rails - 如何将handontable 与ruby on rails 集成？

> ID：13044810
> 
> 赞同：2
> 
> 时间：2012-10-24T07:43:06.080
> 
> 标签：ruby-on-rails, handsontable

我想用 ruby​​ on rails 构建一个电子表格应用程序。我为前端尝试了[http://handsontable.com/index.html ，它工作正常。](http://handsontable.com/index.html)但是如何将它与 Rails 集成呢？有谁知道如何为 ActiveRecord 模型建模？行和列似乎有点低效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:30:38.860

您可以在 Handsontable 中使用对象数据绑定，然后数据库中的每一行都是表中的一行。使用`onChange`回调，您可以只将更改的记录保存到数据库中。

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T11:23:46.463

您可以使用[https://rubygems.org/gems/rails_handsontable](https://rubygems.org/gems/rails_handsontable)。它是一个包裹handsontable的宝石。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-10T16:07:07.550

这是一个例子

> **在视图中**

```
<div id="products"></div>
<script>
    var data = <%=@products%>;
    $(document).ready(function() {

    var container = document.getElementById('products');
    var hot = new Handsontable(container, {
      data: <%=@products%>,
      rowHeaders: false,
      colHeaders: ['ID', 'Name'],
      columns: [
          {data: 'id'},
          {data: 'name'}
        ]
    });
});
</script> 
```

> **在控制器中**

```
def index
    @products = Product.all
    @products = @products.to_json.html_safe
  end 
```

希望

# solr - Solr 与 JPA 实体

> ID：13044811
> 
> 赞同：1
> 
> 时间：2012-10-24T07:43:08.100
> 
> 标签：solr

如果有人在以下关于 Apache Solr-JPA 集成的查询中提供您的想法和提示，那就太好了。

实体 #1：员工 [id,firstname,lastname, List addresslist] 实体 #2：地址 [addressid, city,state, country]

如何在实体中为 Employee 实体中的 List addresslist 变量指定 @Field 注释？

如何在 schema.xml 中定义地址列表及其属性。

# django - 如何向管理员注册多个模型？

> ID：13044814
> 
> 赞同：31
> 
> 时间：2012-10-24T07:43:24.300
> 
> 标签：django, django-admin

如果我想向管理员注册我的模型，我必须这样做：

```
#admin.py
admin.site.register(models.About) 
```

但是对于多个模型，你**不能**做这样的事情：

```
models = (models.Project, models.Client, models.About)
for m in models:
   admin.site.register(m) 
```

首先：为什么不！？其次：想象一个人有很多模型，它们都应该可以从管理界面访问。你如何以通用的方式做到这一点？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-24T07:53:57.820

`admin.site.register`在库中有这个定义：

```
def register(self, model_or_iterable, admin_class=None, **options): 
```

所以要注册的模型可以是单个模型或可迭代对象，所以只需使用这个：

```
myModels = [models.Project, models.Client, models.About]  # iterable list
admin.site.register(myModels) 
```

我在我的网站上对此进行了测试，并且运行良好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-25T04:33:11.600

对于最近发布的 Django 1.7，您可以使用[`django.contrib.admin.register`](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.register)装饰器注册多个使用相同管理类的模型。

```
from django.contrib import admin
from .models import Project, Client, About

@admin.register(Project, Client, About)
class DefaultAdmin(admin.ModelAdmin):
    pass 
```

### 更新

考虑[做一个简单的调用而不是声明一个虚拟类](https://stackoverflow.com/a/31568419/764592)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-22T16:06:40.733

```
# File: admin.py
from django.contrib import admin
from .models import Project, Client, About

admin.register(Project, Client, About)(admin.ModelAdmin) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-09T13:46:27.550

根据[这里](http://djangosnippets.org/snippets/2066/)的代码段，我通常做的是在我的`admin.py`

```
from django.db.models import get_models, get_app
from django.contrib import admin
from django.contrib.admin.sites import AlreadyRegistered

def autoregister(*app_list):
    for app_name in app_list:
        app_models = get_app(app_name)
        for model in get_models(app_models):
            try:
                admin.site.register(model)
            except AlreadyRegistered:
                pass

autoregister('myapp') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-11-26T22:53:16.707

在 admin.py 中使用 Django 3.1.3

```
from .models import Course, Category

admin.site.register(Course)
admin.site.register(Category) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-10-11T14:03:29.623

这是注册多个模型的更好方法

```
from django.contrib import admin
from myapp.models import Course, Category

admin.site.register(Course)
admin.site.register(Category) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-20T18:17:52.583

这是一个尝试将自定义模型注册到管理 UI 的解决方法（如果存在其他默认模型），要使其正常工作，您必须遵循将自定义管理类命名为“MyModelAdmin”的约定，方法是在末尾附加“Admin” .

```
for model_name, model in apps.get_app_config('myapp').models.items() :
    if      '_' not in model_name   :
        if      globals().get(model.__name__+'Admin')   :
            admin.site.register(model, globals().get(model.__name__+'Admin'))
        else                                        :
            admin.site.register(model) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-23T21:37:07.110

```
from django.contrib import admin

from .models import *

@admin.register(Project, Client, About)
class AppAdmin(admin.ModelAdmin):
    pass 
```

# less - LESS 的奇怪操作行为

> ID：13044817
> 
> 赞同：0
> 
> 时间：2012-10-24T07:43:29.973
> 
> 标签：less

这个编译：

```
.myclass {
    .mymixin(2);
}

.mymixin(@parameter) {
    width: ((@parameter*1)*12px);
} 
```

这个没有：

```
.myclass {
    .mymixin(2);
}

.mymixin(@parameter) {
    width: ((@parameter-1)*12px);
} 
```

有人知道第二个有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:50:13.753

`@parameter-1`从编译器错误中可以看出，Less 将其视为变量：

> 错误行 2：变量 @parameter-1 未定义

如果您插入空格，它会按预期工作：

```
.mymixin(@parameter) {
    width: ((@parameter - 1)*12px);
} 
```

# jquery - Jquery 无法读取禁用元素

> ID：13044821
> 
> 赞同：1
> 
> 时间：2012-10-24T07:43:39.013
> 
> 标签：jquery

我有这样的 HTML：

```
<li class="MostViewedProducts">
    <input class="MostViewedProductsi" type="checkbox" checked="checked"/>
    <span class="labels">Some Text</span>
    <a class="fancybox" href="#inline40" id="tozih"></a>
</li> 
```

和一些像这样的Jquery：

```
$('.MostViewedProductsi').attr('disabled', true);
var $form = $('*'); 
```

我的问题是：

当我禁用 Class 时，Jquery 无法读取元素并通过 GET 或 POST 将其传递给 PHP 文件，当我将类 -MostViewedProducts- 设为只读时，用户仍然可以更改复选框。

我可以使用什么解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:47:03.503

这是由 HTML 设计的——`disabled`在 GET 或 POST 中不传递任何元素。

要解决此问题，您可以在提交表单时删除该`disabled`属性，以便可以发布元素的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:46:14.777

两种选择：

```
$('.MostViewedProductsi').attr('disabled', 'disabled');
$('.MostViewedProductsi').prop('disabled', true); // jQuery version 1.6+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:47:06.530

您使用了错误的属性值，`disabled`请参阅此处了解更多信息：

[HTML `<input>`disabled 属性](http://www.w3schools.com/tags/att_input_disabled.asp)

# android - Android 手机在 SurfaceView Canvas 中对位图的运动使用实际密度还是广义密度？

> ID：13044824
> 
> 赞同：2
> 
> 时间：2012-10-24T07:43:59.543
> 
> 标签：android, screen

我正在开发一个 Android 游戏，其中一个球（位图）翻译（正在运动）。所以我提供了球的运动方程。我已经在三星 Galaxy S2 上检查了我的应用程序，它的实际密度大约为 252 dpi，它可以正常工作。所以我的问题是，surfaceView 中位图的这些运动是否取决于手机的实际密度（即 S2 的 252 dpi）或广义密度（即 240 dpi）。

我很困惑如果我在 235 dpi 智能手机上运行这个应用程序，那么它是否具有与 Galaxy S2（252 dpi）相同的运动性能，还是会有点慢？

任何帮助将不胜感激。

# openbravo - Openbravo 中的显示逻辑

> ID：13044825
> 
> 赞同：0
> 
> 时间：2012-10-24T07:44:04.543
> 
> 标签：openbravo

我只是想知道，是否可以`sql/hql`在字段的显示逻辑中使用语句`Openbravo`？
我有一个字段，如窗口中的复选框所说，位置。在另一个窗口中，我有一个字段说经理。现在，只有在选中位置时，我才需要显示经理字段。由于某些原因，位置没有存储在会话中。我怎样才能做到这一点？分享你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:49:11.480

您可以使用**辅助输入**将新会话变量“注入”到屏幕中，并为这些变量定义值，您可以使用 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T17:46:07.460

1）您可以在管理器字段存在的窗口中拥有位置字段，但显示=否（具有相同名称或不同名称，用于携带价值）

2）当在“位置”窗口中检查位置字段时，更新其他窗口上的位置字段，即管理器字段存在的位置（您可以尝试使用事件处理程序或触发器，因为在位置窗口中，一旦检查位置字段，它就会触发保存操作）

3) 使用@position@ ​​= 'Y' 语法（在包含窗口的管理器字段内）

# javascript - Google.com 和 DOMContentLoaded

> ID：13044829
> 
> 赞同：1
> 
> 时间：2012-10-24T07:44:16.410
> 
> 标签：javascript, google-chrome, google-chrome-extension

我确实在 content_scripts 中使用以下代码测试了我的 google chrome 扩展：

```
function test()
{
    alert("test");
}

document.addEventListener("DOMContentLoaded", test, false); 
```

显现：

```
{
    "name": "Test",
    "version": "1.0",
    "manifest_version": 2,
    "permissions": ["contextMenus", "tabs", "http://*/*", "https://*/*"],
    "content_scripts": [{
        "all_frames": true,
        "js": [ "jquery-1.8.1.min.js","test.js"],
        "matches": [ "http://*/*" ],
        "run_at": "document_start"
    }]
} 
```

facebook或microsoft等所有网页都可以.....加载页面后，会弹出一个警报框，除了“Google.com”=>我访问了Google.com但没有警报框。我想知道为什么除了 Google.com 之外几乎所有页面都可以？那么，我需要在加载 Google.com 后捕获哪个 DOM 事件？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:03:33.380

Google 始终在**https**中，您的脚本不会注入任何**https**网站，因为您只针对**http**网站（在您的清单中，您有：）`"matches": [ "http://*/*" ],`。

将清单更改为`"matches": [ "http://*/*", "https://*/*" ],`或`"matches": [ "<all_urls>" ],`。

# ios - 核心数据获取请求的复杂排序

> ID：13044830
> 
> 赞同：3
> 
> 时间：2012-10-24T07:44:18.543
> 
> 标签：ios, sorting, core-data, nsfetchrequest, nssortdescriptor

我有一个带有属性 ( ) 的`NSEntity`( )，该属性是从预定义值列表中填充的，即 Poncho、夹克、外套、长袍、上衣、西装等。`Cloth``type``NSString`

我想获取所有 Cloth 记录，以便根据定义的顺序对记录进行排序`type`。即 Poncho 的所有记录都在顶部，然后是 Jacket，然后是 Coat，然后是 Gown，然后是 Top，然后是 Suit，等等。

```
Poncho‎ …
Poncho‎ …
Poncho‎ …
Jacket … 
Jacket … 
Coat …
Coat …
Coat …
Gown …  
Gown …  
Top …
Top …
Top …
Top …
Suit …  
Suit … 
```

此顺序不是升序或降序，而是习惯。我怎样才能获取`Cloth`记录，以便它们以这个（定义的）顺序返回？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T08:57:22.070

核心数据获取请求只能对存储在 SQLite 数据库中的属性进行排序（请参阅“核心数据编程指南”中的[获取托管对象](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdFetching.html#//apple_ref/doc/uid/TP40002484-SW3)和[获取谓词和排序描述符。）](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdPersistentStores.html#//apple_ref/doc/uid/TP40002875-SW11)

您有以下选择：

*   获取所有对象，然后使用自定义排序描述符对它们进行排序。但是，如果您将获取的结果控制器用于表视图，这将无济于事。

*   `order`在实体中存储一个额外的整数属性`Cloth`并将其用作排序键。这可能是最容易实现的一种，但您当然有一些冗余。

*   除了将类型存储为字符串属性之外，您还可以定义另一个`Type`具有属性`name`和的实体，以及从到`order`的关系。在这种情况下，您可以对 key path 进行排序。`type``Cloth``Type``type.order`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T12:29:18.583

实现自定义订单的唯一方法是引入一个新的类型属性`NSNumber`来跟踪订单。

[似乎在类别字符串（Poncho 等）之后有更多文本，因此您实际上有许多独特的字符串，它们都必须遵循自定义顺序，只是它们按第一个单词分组。]

如果您真的想将此逻辑与其余数据分开，您可以创建一个`ClothType`具有属性的新实体，`name`并`sortOrder`与您的`Cloth`实体建立关系。

另一种方案是对每个“主要”类别的排序属性乘以 10000，并为同一类别的每个后续类别添加 1。

# android-activity - Android：已发布的应用程序因 ClassNotFoundException 而崩溃

> ID：13044835
> 
> 赞同：1
> 
> 时间：2012-10-24T07:44:35.000
> 
> 标签：android-activity, classnotfoundexception

我今天刚刚发布了我的第一个应用程序，但由于某种原因，当我使用已发布的版本时，我在启动时不断收到 ClassNotFoundException 错误。当我在手机上以调试模式对其进行测试时，它工作正常，所以我不确定是什么原因造成的。

```
 java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.androidProjects.personal/com.androidProjects.personal.GAAClubFinderActivity}: java.lang.ClassNotFoundException: com.androidProjects.personal.GAAClubFinderActivity
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2141)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2260)
    at android.app.ActivityThread.access$600(ActivityThread.java:139)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1277)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:156)
    at android.app.ActivityThread.main(ActivityThread.java:5045)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.ClassNotFoundException: com.androidProjects.personal.GAAClubFinderActivity
    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
    at android.app.Instrumentation.newActivity(Instrumentation.java:1039)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2132)
    ... 11 more 

```

有任何想法吗？

# continuous-integration - 如果 phantomJS.exe 调用因错误而退出，如何让 Jenkins 作业失败

> ID：13044837
> 
> 赞同：0
> 
> 时间：2012-10-24T07:44:34.507
> 
> 标签：continuous-integration, jenkins, automated-tests, phantomjs

在 Jenkins 作业中，我有一个 Windows 批处理命令构建步骤，它使用 phantomJS 运行测试，如下所示：

![抽烟](../Images/fb13509ad3499f565ceaa7aa35347d32.png)

如果在smokeTest.js 中我退出幻象并出现错误，我该如何使工作失败，如下所示：

```
phantomJS.exit(1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:44:31.413

如果任何命令块（如上面的“ExecuteWindows 批处理命令”）的返回码不为零，Jenkins 将作业视为“失败” 。

如果在这种情况下它对您不起作用，可能是因为“phantomjs.exe”在任何情况下都返回“0”
（可以通过在该命令之后回显 ERRORLEVEL 来确认这一点：） `ECHO %ERRORLEVEL%`。

如果是这种情况（即：即使失败也返回“0”），您可以这样处理：

*   将明确的错误消息打印到控制台（或 STDOUT - 将显示在作业日志中的内容）
*   使用**[文本查找器插件](https://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin)**来捕获该错误消息并将构建标记为“失败”。

# ruby - 为什么哈希的字符串键被冻结？

> ID：13044839
> 
> 赞同：24
> 
> 时间：2012-10-24T07:44:51.753
> 
> 标签：ruby, string, hash, mutable

根据[规范](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-store)，用作哈希键的字符串被复制和冻结。其他可变对象似乎没有这种特殊考虑。例如，使用数组键，以下是可能的。

```
a = [0]
h = {a => :a}
h.keys.first[0] = 1
h # => {[1] => :a}
h[[1]] # => nil
h.rehash
h[[1]] # => :a 
```

另一方面，类似的事情不能用字符串键来完成。

```
s = "a"
h = {s => :s}
h.keys.first.upcase! # => RuntimeError: can't modify frozen String 
```

当涉及到哈希键时，为什么将字符串设计为与其他可变对象不同？是否有任何用例可以使该规范变得有用？该规范还有哪些其他后果？

* * *

我实际上有一个用例，其中缺少关于字符串的这种特殊规范可能很有用。也就是说，我使用`yaml`gem 读取了一个手动编写的描述哈希的 YAML 文件。键可能是字符串，我想在原始 YAML 文件中允许不区分大小写。当我读取文件时，我可能会得到这样的哈希：

```
h = {"foo" => :foo, "Bar" => :bar, "BAZ" => :baz} 
```

我想将键规范化为小写以获得这个：

```
h = {"foo" => :foo, "bar" => :bar, "baz" => :baz} 
```

通过做这样的事情：

```
h.keys.each(&:downcase!) 
```

但由于上述原因返回错误。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-24T10:34:27.930

简而言之，它只是 Ruby 试图变得更好。

当在 Hash 中输入一个键时，会使用`hash`键的方法计算一个特殊的数字。Hash 对象使用这个数字来检索密钥。例如，如果您询问 value 的值`h['a']`是多少，Hash 会调用`hash`string 'a' 的方法并检查它是否为该数字存储了一个值。当某人（你）改变字符串对象时，问题就出现了，所以字符串'a'现在是别的东西，比如说'aa'。哈希找不到“aa”的哈希数。

最常见的散列键类型是字符串、符号和整数。符号和整数是不可变的，但字符串不是。Ruby 试图通过复制和冻结字符串键来保护您免受上述令人困惑的行为。我猜它不适用于其他类型，因为可能会有令人讨厌的性能副作用（想想大型数组）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T23:34:20.257

不可变键通常是有意义的，因为它们的哈希码是稳定的。

这就是为什么在这部分 MRI 代码中对字符串进行特殊转换的原因：

```
if (RHASH(hash)->ntbl->type == &identhash || rb_obj_class(key) != rb_cString) {
  st_insert(RHASH(hash)->ntbl, key, val);
}
else {
  st_insert2(RHASH(hash)->ntbl, key, val, copy_str_key);
} 
```

简而言之，在字符串键的情况下，`st_insert2`传递一个指向将触发复制和冻结的函数的指针。

因此，如果我们理论上想要支持不可变列表和不可变哈希作为哈希键，那么我们可以将该代码修改为如下所示：

```
VALUE key_klass;
key_klass = rb_obj_class(key);
if (key_klass == rb_cArray || key_klass == rb_cHash) {
  st_insert2(RHASH(hash)->ntbl, key, val, freeze_obj);
}
else if (key_klass == rb_cString) {
  st_insert2(RHASH(hash)->ntbl, key, val, copy_str_key);
}
else {
  st_insert(RHASH(hash)->ntbl, key, val);
} 
```

其中`freeze_obj`将被定义为：

```
static st_data_t
freeze_obj(st_data_t obj)
{
    return (st_data_t)rb_obj_freeze((VALUE) obj);
} 
```

这样就可以解决您观察到的特定不一致问题，其中数组键是可变的。然而，要真正保持一致，还需要使更多类型的对象不可变。

然而，并非*所有*类型。例如，冻结像 Fixnum 这样的直接对象是没有意义的，因为实际上只有一个 Fixnum 实例对应于每个整数值。这就是为什么只`String`需要以这种方式进行特殊处理，而不是`Fixnum`and `Symbol`。

字符串是一个特殊的例外，只是为了方便 Ruby 程序员，因为字符串经常用作哈希键。

相反，其他对象类型*没有*像这样冻结的原因，诚然会导致不一致的行为，这主要是为了方便 Matz & Company 不支持边缘情况。在实践中，很少有人会使用像数组或散列这样的容器对象作为散列键。因此，如果您这样做，则在插入之前由您决定冻结。

请注意，这并不是严格意义上的性能，因为冻结非立即对象的行为仅涉及翻转每个对象上存在的位域`FL_FREEZE`上的位。`basic.flags`这当然是一种廉价的操作。

还谈到性能，请注意，如果您要使用字符串键，并且您处于代码的性能关键部分，您可能希望在插入之前冻结您的字符串。如果不这样做，则会触发 dup，这是一个更昂贵的操作。

**更新**@sawa 指出，将您的数组键简单地冻结意味着原始数组可能在键使用上下文之外出乎意料地不可变，这也可能是一个令人不快的惊喜（尽管它可以为您提供正确的使用数组作为哈希键，真的）。如果您因此推测 dup + freeze 是解决此问题的方法，那么您实际上可能会招致明显的性能成本。另一方面，让它完全解冻，你会得到 OP 的原始怪异。诡异无处不在。Matz 等人将这些边缘情况推迟到程序员的另一个原因。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T09:41:05.920

请参阅[ruby​​-core 邮件列表上的此线程以](http://www.ruby-forum.com/topic/1192230)获得解释（奇怪的是，当我在邮件应用程序中打开邮件列表时，它恰好是我偶然发现的第一封邮件！）。

~~我不知道你问题的第一部分，但是 h~~这是第二部分的实用答案：

```
 new_hash = {}
  h.each_pair do |k,v|
   new_hash.merge!({k.downcase => v}) 
  end

  h.replace new_hash 
```

这种代码有很多排列方式，

```
 Hash[ h.map{|k,v| [k.downcase, v] } ] 
```

成为另一个人（你可能知道这些，但有时最好采取实际的路线：）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T10:18:08.210

你问两个不同的问题：理论和实践。Lain 是第一个回答的人，但我想为您的实际问题提供一个我认为合适、更懒惰的解决方案：

```
Hash.new { |hsh, key| # this block get's called only if a key is absent
  downcased = key.to_s.downcase
  unless downcased == key # if downcasing makes a difference
    hsh[key] = hsh[downcased] if hsh.has_key? downcased # define a new hash pair
  end # (otherways just return nil)
} 
```

与构造函数一起使用的块`Hash.new`仅针对那些实际请求的缺失键调用。上述解决方案也接受符号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-16T03:25:21.603

一个非常古老的问题 - 但如果其他人试图回答“我怎样才能绕过哈希键正在冻结字符串”这个问题的一部分......

解决 String 特殊情况的一个简单技巧是：

```
class MutableString < String
end

s = MutableString.new("a")
h = {s => :s}
h.keys.first.upcase! # => RuntimeError: can't modify frozen String
puts h.inspect 
```

除非您正在创建密钥，否则它不起作用，并且除非您小心谨慎，否则它不会对严格要求该类完全为“字符串”的任何内容造成任何问题

# jquery - Jquery - 向上滑动新的 html 表格行而不是像 rediffmail 那样向下滑动

> ID：13044841
> 
> 赞同：0
> 
> 时间：2012-10-24T07:44:55.360
> 
> 标签：jquery

我有一个 html 表格，当我单击任何`tr`它时，它会`tr`在单击带有向下滑动选项的“行”后显示一个新表格。它工作正常。

但是我需要使用*slideUp*然后*slideDown*选项来显示这个新的动态`tr`行。如果您使用*rediffmail*登录，当我们单击任何邮件时，它将显示带有*slideUp*选项的新行，我们再次单击该行，新行将使用*slideDown*选项隐藏。**`rediff mail`**

 ***我如何使用 jquery 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:36:30.243

不确定我是否理解您的问题，但这可能会有所帮助...

slideUp() 在表格行上不起作用，因为它们没有关联的高度，而是表格调整以适应其中的内容。要解决这个问题，请在行上每个 td 内的内容周围包裹一个 div，然后为这些 div 设置动画。

例如，这将正确地滑动（）和删除（）一个表格行：

```
rw.find("td").wrapInner("<div>");
rw.find("td div:not(:last)").slideUp();
rw.find("td div:last").slideUp(function(){ rw.remove(); }); 
```***

# .net - magento 导入 category_ids 为空

> ID：13044842
> 
> 赞同：0
> 
> 时间：2012-10-24T07:45:14.733
> 
> 标签：.net, magento, soap

使用 .NET，我使用 SOAP V2 创建了一个新产品。所有字段都正确插入，没有 CATEGORY。类别总是空的！（我有一个 ID 为 37 的类别）

```
 Dim para As New SOAP2.catalogProductCreateEntity

    Dim ar(0) As String
    ar(0) = "37"

    para.category_ids = ar
    para.name = strRefmatID
...
    rc = gService.catalogProductCreate(gSession, "simple", "64", strRefmatID, para, "0") 
```

怎么了？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:53:21.620

尝试 category_id 或 entity_id，而不是 category_ids。查看表结构，看看问题出在哪里。

# javascript - Javascript 函数未通过参数

> ID：13044856
> 
> 赞同：-2
> 
> 时间：2012-10-24T07:46:36.210
> 
> 标签：javascript

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script language="javascript" type="text/javascript">

(function setFont() {
var i;
for ( i = 0; i < document.all.length; i++) {
document.all[i].style.fontFamily = "Verdana";
document.all[i].style.fontSize = "16";
document.all[i].style.color="black";
}
})();

(function abc(a)
{
alert(a);
ansArray = ['a'];  
for(i=1;i<=a;i++)
{ 
document.write('<input type = "button" value = "a">');
document.write('<input type = "button" value = "b">');
}
var myButton = document.getElementsByTagName("input");
//alert(myButton.length);
myButton[0].onclick = function() {
    if(ansArray[0] == 'a')
        myButton[0].style.backgroundColor = "green";
    else
        myButton[0].style.backgroundColor = "red";
};

myButton[1].onclick = function() {
    if(ansArray[0] == 'b')
        myButton[1].style.backgroundColor = "green";
    else
        myButton[1].style.backgroundColor = "red";
};
})();
setFont();
</script>
</head>

<body onload="abc(2)">
</body>
</html> 
```

javascript 函数 abc(a) 没有获得从 传递的值 2 `<body onload = "abc(5)">`。它说未定义。如何在javascript函数中传递参数。我之前也发布了它，但是参数不存在，在给出参数时我发现了问题。请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:50:32.390

您的函数是一个闭包，它不向公众公开，但它在创建后立即执行。然后它就消失了。

它不是看起来很酷，它有它的目的。只需制作正常功能即可使其正常工作

* * *

```
(function(a) {
  // immediately called and 'garbaged'
})(a); 
```

对比

```
function publicAlwaysCallable(a) {
  console.log(a); // call me when you like
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:53:13.753

在这种情况下，您不必使用即时功能。像这样声明它：

```
function abc(a) { ... } 
```

如果由于某种原因你想将你的代码封装成闭包，你可以这样做：

```
(function(export) {
    export.abc = function(a) { ... };
    ...
})(window); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T07:42:53.687

The normal function (not closure) function abc(a){ ... } with the button click handlers are to be called at the end of the script. Not on onload event of the page. Now it works in IE9 also

Thanks everybody for your valuable suggestions.

# windows - Xaml，以编程方式在堆栈面板中的图像上添加按钮

> ID：13044857
> 
> 赞同：1
> 
> 时间：2012-10-24T07:46:48.623
> 
> 标签：windows, xaml

对于我的 windows8App，我需要一个带有播放按钮的图像。我创建了一个网格，该网格包含一个堆栈计划。我想以编程方式将图像和按钮放在图像上。但是当我运行该应用程序时，我看到按钮位于图像后面。我的问题第一个问题是，将按钮放在图像上是否是一种好方法？如果是，那么我的代码有什么问题？

```
<Border x:Name="videoPlayerBr" BorderBrush="#FFDED5D5"   HorizontalAlignment="Center" Width="400" Height="300" VerticalAlignment="Top"  Grid.Row="0">
 <StackPanel Name="videoPlayerSP">
 </StackPanel>
 </Border> 
```

这是后面的代码：

```
 var proVideoImg = new Image();
        proVideoImg.Source = new BitmapImage(new Uri("ms-appx:///Assets/image.png", UriKind.Absolute));
        proVideoImg.Stretch = Stretch.UniformToFill;
        videoPlayerSP.Children.Add(proVideoImg);

        var playBtn = new Button();
        playBtn.Margin = new Thickness(136, 121, 0, 133);
        ImageBrush brush1 = new ImageBrush();
        brush1.ImageSource = new BitmapImage(new Uri("ms-appx:///Assets/playbutton.png"));
        playBtn.Background = brush1;        
        playBtn.Click += new RoutedEventHandler(PlayVideo_Button_Click);
        videoPlayerSP.Children.Add(playBtn); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:56:47.033

尝试将 Image 和 Button 控件放置在 Canvas 或嵌套 Grid 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:18:30.467

我很快推出了一个解决方案。干得好。我希望您可以轻松地将其转换为 C#？

```
 <Button Height="29" Width="82" Click="Button_Click">
        <Button.Content>
            <Grid>
                <Image Source="Icons/add_action.png" Stretch="Fill" Opacity=".2"/>
                    <Path Data="M13,9.8933333 L13,21.561587 23.2164,16.328076 z" Fill="#FFBED460" HorizontalAlignment="Center" Stretch="Fill" Width="11.212" RenderTransformOrigin="0.357,0.5" VerticalAlignment="Center" Height="15">
                        <Path.Stroke>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <GradientStop Color="Black" Offset="0"/>
                                <GradientStop Color="#FF9B6262" Offset="1"/>
                            </LinearGradientBrush>
                        </Path.Stroke>
                    </Path>
                </Grid>             
            </Button.Content>                   
        </Button> 
```

# sharepoint-2007 - 在没有 SharePoint Designer 的情况下将 SharePoint 文件（css、javascript）部署到不同的平台

> ID：13044867
> 
> 赞同：0
> 
> 时间：2012-10-24T07:47:13.207
> 
> 标签：sharepoint-2007

我需要部署到“_catalogs/masterpage/”和“样式库/”多个 jpg、css、javascript 文件这些文件源自开发人员平台，并且要在不使用 SharePoint Designer 的情况下部署到多个平台。除了在 /Forms/AllItems.aspx 页面中手动上传多个文件之外，还有其他方法吗？

我正在使用 SharePoint 2007

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:49:03.903

这是[解决方案包](http://msdn.microsoft.com/en-us/library/aa543214%28v=office.12%29.aspx)的确切目的：

> Windows SharePoint Services 解决方案框架提供了一种将用于扩展 Windows SharePoint Services 的所有组件捆绑到一个称为解决方案文件的新文件中的方法。解决方案文件具有基于 .CAB 的格式，但具有 .WSP 扩展名。解决方案是一个可部署、可重用的包，它可以包含一组功能、站点定义和适用于站点的程序集，并且您可以单独启用或禁用它们。您可以使用解决方案文件来部署 Web 部件包的内容，包括程序集、类资源、.dwp 文件和其他包组件。

为 SharePoint 2007 创建解决方案包的两个推荐工具是[WSPBuilder](http://wspbuilder.codeplex.com/)和[STSDEV](http://stsdev.codeplex.com/)。

# ruby-on-rails - Ruby on Rails：无法将内容插入到产量块中

> ID：13044868
> 
> 赞同：0
> 
> 时间：2012-10-24T07:47:14.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

我`_main_nav.html.erb`在视图/布局文件夹中有一个部分调用，这是内容文件：

```
<% content_for :main_navigation do %>
  <h1>Something must here</h1>
<% end %> 
```

在我的`_header.html.erb`文件中，我曾经`yield`插入内容：

```
... 
<%= yield :main_navigation %>  
<nav id="utility" class="nav-collapse">
... 
```

但是当我访问主页时，它并没有出现 h1 元素，我有什么地方错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:01:50.290

问题是您试图从当前未呈现的视图中生成内容。

你需要做：

**_header.html.erb**

```
... 
<%= render "layouts/main_nav" %>
<%= yield :main_navigation %>  
<nav id="utility" class="nav-collapse">
... 
```

**_main_nav.html.erb**

```
<% content_for :main_navigation do %>
  <h1>Something must here</h1>
<% end %> 
```

[http://guides.rubyonrails.org/layouts_and_rendering.html#understanding-yield](http://guides.rubyonrails.org/layouts_and_rendering.html#understanding-yield)

# java - 在java中转换为数据库日期

> ID：13044874
> 
> 赞同：-1
> 
> 时间：2012-10-24T07:47:38.537
> 
> 标签：java

我想将用户输入的日期 31-12-2012 转换为 PostgreSQL 日期格式。我正在附加日期“日-月-年”（2012 年 31 月 12 日）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:49:57.733

忽略它的数据库部分 - 无论如何你都不应该将它作为字符串提供给数据库。

相反，使用[`java.text.SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)正确的模式（“dd-MM-yyyy”）将其解析为 a `Date`（确保使用正确的时区，这在以后很重要）。然后要在 SQL 语句中使用它，请使用 a[`PreparedStatement`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)并调用[`setDate`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setDate%28int,%20java.sql.Date%29)。你需要创建一个你[`java.sql.Date`](http://docs.oracle.com/javase/7/docs/api/java/sql/Date.html)从中[`java.util.Date`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)摆脱出来的东西`SimpleDateFormat.parse`。

时区部分有点混乱 - 文档`java.sql.Date` *表明*JVM 的默认时区用于将“自纪元以来的毫秒”值解释为日期。这建议您在解析时也应该使用默认时区 - 但它远非优雅:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:58:28.013

这很简单。我认为你甚至尝试谷歌。无论如何，这是一个示例代码。

```
String User_date = "31-12-2012";
java.sql.Date sqlDate = java.sql.Date.valueOf(User_date); 
```

这将解决您的问题。

# differential-equations - 一阶偏微分方程

> ID：13044876
> 
> 赞同：0
> 
> 时间：2012-10-24T07:47:42.273
> 
> 标签：differential-equations

我正在解决一个完全不相关的问题。我已将其建模为生成函数并直截了当：

```
a*x*(df(x,y)/dy)*(1-y) + (x-1)*f(x,y) + y^n = 0 
```

其中`a`和`n`是正整数。

我该如何继续寻找解决方案`f(x,y)`？似乎没有教科书对此有很好的方法。

# c# - 同一用户的注册表项中 HKEY_USERS 中的两个键值

> ID：13044878
> 
> 赞同：1
> 
> 时间：2012-10-24T07:47:46.983
> 
> 标签：c#, registry

我在同一用户的注册表项中的 HKEY_USERS 中有两个帐户。

这些都是：

HKEY_USERS\S-1-5-21-507921405-1993962763-682003330-1012

HKEY_USERS\S-1-5-21-507921405-1993962763-682003330-1014

当我使用 Registry.CurrentUser.OpenSubKey() 方法获取当前用户的值时，问题就出现了。它从 HKEY_USERS\S-1-5-21-507921405-1993962763-682003330-1012 获取值，而 HKEY_CURRENT_USER 与 HKEY_USERS\S-1-5-21-507921405-1993962763-682003330-1014 映射（或同步）。因此不会获取实际值。有人可以在这种情况下帮助我，为什么同一用户的注册表中存在两个帐户，以及我如何映射（或同步）HKEY_CURRENT_USER

HKEY_USERS\S-1-5-21-507921405-1993962763-682003330-1014。

我的代码如下：

```
 string strKeyIESettings = @"Software\Microsoft\Windows\CurrentVersion\Internet Settings\ZoneMap\Ranges";
        string valRange1 = "", valRange2 = "", valRange3 = "", valRange4 = "";
        using (Microsoft.Win32.RegistryKey keyIESettings = Registry.CurrentUser.OpenSubKey(strKeyIESettings))
        {
            foreach (string subkey_name in keyIESettings.GetSubKeyNames())
            {
                using (RegistryKey subkey = keyIESettings.OpenSubKey(subkey_name))
                {
                    switch (subkey_name)
                    {
                        case "Range1" :
                            if (subkey.GetValue(":Range") != null)
                            {
                                valRange1 = subkey.GetValue(":Range").ToString();
                            }                                
                            break;

                        case "Range2" :
                            if (subkey.GetValue(":Range") != null)
                            {
                                valRange2 = subkey.GetValue(":Range").ToString();
                            }                                
                            break;

                        case "Range3":
                            if (subkey.GetValue(":Range") != null)
                            {
                                valRange3 = subkey.GetValue(":Range").ToString();
                            }
                            break;

                        case "Range4":
                            if (subkey.GetValue(":Range") != null)
                            {
                                valRange4 = subkey.GetValue(":Range").ToString();
                            }
                            break;

                        default:
                            break;
                    }
                }
            }
        }

        if (valRange1 == "10.237.24.165" && valRange2 == "10.237.24.166" && valRange3 == "10.237.24.167" && valRange4 == "10.237.24.168")
        {
            flagIESettings = true;
        } 
```

我必须获取这些值作为我的应用程序先决条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T09:03:15.417

我已经找到了上述问题的解决方案。如下：由于我安装了 ASP.NET，因此我在同一用户的注册表项中的 HKEY_USERS 中有两个帐户。一个帐户用于 ASP.NET，另一个帐户是我当前的用户。当 ASP.NET 安装在用户的机器上时，通常情况下，注册表中有当前用户的两个帐户。其中一个与 HKCU 映射。

谢谢

# python - 许多大型scipy稀疏矩阵的内存高效存储

> ID：13044880
> 
> 赞同：3
> 
> 时间：2012-10-24T07:48:05.720
> 
> 标签：python, memory, dictionary, scipy, sparse-matrix

我需要存储大约 50.000 个 scipy 稀疏 csr 矩阵，其中每个矩阵是一个长度为 370 万的向量：

```
x = scipy.sparse.csr_matrix((3.7Mill,1)) 
```

我目前将它们存储到一个简单的字典中，因为我还需要知道每个向量的对应键（在这种情况下，键只是一个简单的整数）。

现在的问题是需要大量的内存。有没有更有效的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T09:10:29.283

尝试使用[惰性](http://en.wikipedia.org/wiki/Lazy_evaluation)数据结构。

例如：

```
def lazy(func):
    def lazyfunc(*args, **kwargs):
        temp = lambda x : func(*args, **kwargs)
        temp.__name__ = "lazy-" + func.__name__
        return temp
    return lazyfunc

"""
Add some simple functions
"""
def add(x, y):
    print "Not lazy"
    return x + y

@lazy
def add_lazy(x, y):
    print "lazy!"
    return x + y 
```

用法：

```
>>> add(1, 2)
Not lazy
3
$ add_lazy(1, 2)
<function lazy-add_lazy at 0x021E9470>
>>> myval = add_lazy(1, 2)
>>> myval()
lazy!
3 
```

看着：

*   [http://finderweb.com/blog/lazy_dict/](http://finderweb.com/blog/lazy_dict/)
*   [http://www.pages.drexel.edu/~kmk592/rants/lazy-python/index.html](http://www.pages.drexel.edu/~kmk592/rants/lazy-python/index.html)

# node.js - node.js - 模板/渲染 - 如何为我的一个视图排除或指定备用 layout.mustache？

> ID：13044884
> 
> 赞同：1
> 
> 时间：2012-10-24T07:48:11.180
> 
> 标签：node.js, templates, express, connect, mustache

目前所有页面都是从一个`views/layout.mustache`文件和一个特定于页面的 `views/page.mustache`模板呈现的

在我的应用程序中呈现某个视图时，我想使用替代`layout.mustache`和/或一起跳过所有视图。`layout.mustache`这样做的理想方法是什么？

这是我的一个片段`app.configure`：

```
app.configure(function(){
    ...
    app.set('views', __dirname + '/views');
    app.register(".mustache", require('stache'));
    ...
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:49:31.000

你用的是哪个版本的快递？在 v3.0 中，布局的概念被[删除](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)。

V3.0 引入了[块](http://www.devthought.com/code/use-jade-blocks-not-layouts/)的概念。我不使用`mustache`，但玉的示例如下所示：

```
// my-template.jade
extends my-layout

block head
  script(src="myfile.js")

block content
  h1 My page 
```

和

```
// my-layout.jade
doctype 5
html
  head
    title My title
    block head
  body
    #content
      block content 
```

`extends`您可以选择您想要的任何“父”布局。支持模板引擎的概述在 express [wiki](https://github.com/visionmedia/express/wiki)中。

在 3.0 之前的 express 版本中，您可以在渲染时指定布局

```
res.render('index', {
  title : 'Page with distinct layout', 
  layout : 'layout.mustache'
}); 
```

或禁用某些视图的布局

```
res.render('start', {
  title : 'Page without layout', 
  layout : false
}); 
```

# c# - XML 序列化程序不适用于属性

> ID：13044886
> 
> 赞同：2
> 
> 时间：2012-10-24T07:48:25.637
> 
> 标签：c#, properties, xml-serialization

在我正在处理的代码中，有一些属性是序列化的。据我所知，它们都工作得很好，但只有一个。这是代码：

```
 // Fields that the properties use.
    private bool _useAlertColors = false;
    private List<Int32> _colorArgb = new List<Int32>(new Int32[]{Color.White.ToArgb(), Color.Yellow.ToArgb(), Color.Red.ToArgb()});

    // The one that does not work.
    public List<Color> AlertColors
    {
        get
        {
            List<Color> alertColors = new List<Color>();

            foreach (Int32 colorValue in _colorArgb)
            {
                alertColors.Add(Color.FromArgb(colorValue));
            }

            return alertColors;
        }

        set
        {
            // If there's any difference in colors
            // then add the new color
            for (int i = 0; i < _colorArgb.Count; i++)
            {
                if (_colorArgb[i] != value[i].ToArgb())
                {
                    _colorArgb[i] = value[i].ToArgb();
                    HasChanged = true;
                }

            }
        }
    }

    // One of those that work.
    public bool UseAlertColors
    {
        get
        {
            return _useAlertColors;
        }

        set
        {
            if (_useAlertColors != value)
            {
                _useAlertColors = value;
                HasChanged = true;
            }
        }
    }

    // Serializing method.
    public bool Serialize(string filePath)
    {
        if (string.IsNullOrEmpty(filePath))
        {
            Logger.Log("Can't save settings, empty or null file path.");

            return false;
        }

        FileStream fileStream = null;

        try
        {
            fileStream = new FileStream(filePath, FileMode.Create);
            FilePath = filePath;
            System.Xml.Serialization.XmlSerializerFactory xmlSerializerFactory =
                new XmlSerializerFactory();
            System.Xml.Serialization.XmlSerializer xmlSerializer =
                xmlSerializerFactory.CreateSerializer(typeof(Settings));

            xmlSerializer.Serialize(fileStream, this);

            Logger.Log("Settings have been saved successfully to the file " + filePath);
        }
        catch (ArgumentException argumentException)
        {
            Logger.Log("Error while saving the settings. " + argumentException.Message);

            return false;
        }
        catch (IOException iOException)
        {
            Logger.Log("Error while saving the settings. " + iOException.Message);

            return false;
        }
        finally
        {
            if (fileStream != null)
                fileStream.Close();
        }

        return true;
    } 
```

序列化后，这就是我最终的结果：

```
 <UseAlertColors>true</UseAlertColors>
  <AlertColors>
    <Color />
    <Color />
    <Color />
  </AlertColors> 
```

物业有什么问题`AlertColors`？为什么没有序列化？

**编辑：**我已经`AlertColors`相应地更改了属性，但它仍然无法正常工作：

```
 public List<int> AlertColors
    {
        get
        {
            return _colorArgb;
        }

        set
        {
            // If there's any difference in colors
            // then add the new color
            for (int i = 0; i < _colorArgb.Count; i++)
            {
                if (_colorArgb[i] != value[i])
                {
                    _colorArgb[i] = value[i];
                    HasChanged = true;
                }

            }
        }
    } 
```

我在 .xml 文件中得到的是：

```
 <AlertColors>
    <int>-1</int>
    <int>-8355840</int>
    <int>-65536</int>
  </AlertColors> 
```

这是`_colorArgb`字段初始化时设置的第一个值。我可以在程序执行过程中看到字段的变化，但是当覆盖属性被序列化时，它是用底层字段的初始值序列化的。

是什么导致了问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T07:52:13.207

XMLSerializer 仅在序列化时使用类的公共属性 - Color 类没有。

下面是如何绕过它的一个很好的例子：http: [//www.codeproject.com/Articles/2309/NET-XML-Serialization-a-settings-class](http://www.codeproject.com/Articles/2309/NET-XML-Serialization-a-settings-class)

# android - 活动未发现 twitter 异常

> ID：13044887
> 
> 赞同：0
> 
> 时间：2012-10-24T07:48:25.767
> 
> 标签：android, exception

我有以下代码可以从我的应用程序中发布一些内容：

```
try {
            Intent intent = new Intent(Intent.ACTION_SEND);
            intent.setType("text/plain");
            intent.putExtra(Intent.EXTRA_TEXT,
                    "Blah blah blah");
            final PackageManager pm = getPackageManager();
            final List<?> activityList = pm
                    .queryIntentActivities(intent, 0);
            int len = activityList.size();
            for (int i = 0; i < len; i++) {
                final ResolveInfo app = (ResolveInfo) activityList.get(i);
                if ("com.twitter.android.PostActivity"
                        .equals(app.activityInfo.name)) {
                    intent.addCategory(Intent.CATEGORY_LAUNCHER);
                    intent.setClassName("com.twitter.android",
                            "com.twitter.android.PostActivity");

                    startActivity(intent);
                    break;
                }
            }
        } catch (final ActivityNotFoundException e) {
            onCreateDialog(NO_APP);
        }

protected Dialog onCreateDialog(int id) {
    Dialog dialog;
    switch (id) {

    case NO_APP: {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setIcon(R.drawable.icon_small);
        builder.setTitle("Twitter");
        builder.setMessage("No Twitter app found");
        builder.setCancelable(false);
        builder.setPositiveButton("OK", new Dialog.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                dialog.cancel();
                finish();
            }
        });

        dialog = builder.create();
        return dialog;
    }
    default:
        return super.onCreateDialog(id);
    }
} 
```

如果我的手机上安装了 twitter，那么该应用程序可以正常工作并生成一条新推文。如果应用程序不存在，我希望出现一个对话框，说明没有应用程序。但是，到目前为止，当手机中没有 Twitter 应用程序时，什么都不会发生。当我按下我的应用程序上的推文按钮时，没有任何反应。在这种情况下，我需要做什么才能使对话框出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:57:43.187

如果没有找到 twitter 应用程序，也不例外。将您的代码更改为：

```
try {
boolean found = false;
            Intent intent = new Intent(Intent.ACTION_SEND);
            intent.setType("text/plain");
            intent.putExtra(Intent.EXTRA_TEXT,
                    "Blah blah blah");
            final PackageManager pm = getPackageManager();
            final List<?> activityList = pm
                    .queryIntentActivities(intent, 0);
            int len = activityList.size();
            for (int i = 0; i < len; i++) {
                final ResolveInfo app = (ResolveInfo) activityList.get(i);
                if ("com.twitter.android.PostActivity"
                        .equals(app.activityInfo.name)) {
found = true;
                    intent.addCategory(Intent.CATEGORY_LAUNCHER);
                    intent.setClassName("com.twitter.android",
                            "com.twitter.android.PostActivity");

                    startActivity(intent);
                    break;
                }
            }
if(!found)  onCreateDialog(NO_APP);
        } catch (final ActivityNotFoundException e) {
            onCreateDialog(NO_APP);
        } 
```

或者尝试启动 twitter 应用程序并处理未找到的异常。

```
try {

            Intent intent = new Intent();
            intent.addCategory(Intent.CATEGORY_LAUNCHER);
            intent.setClassName("com.twitter.android", "com.twitter.android.PostActivity");
            startActivity(intent);

        } catch (final ActivityNotFoundException e) {
            onCreateDialog(NO_APP);
        } 
```

# c - C - 添加到列表节点内的链表

> ID：13044888
> 
> 赞同：-3
> 
> 时间：2012-10-24T07:48:30.003
> 
> 标签：c, linked-list, nodes

我很难弄清楚如何将元素添加到链表节点内的列表属性中，尤其是如何设置指针。

我有一个这样的结构：

```
typedef struct Node
{
    int value;
    struct Node *elements;
    struct Node *next;
}Node;
 Node *mainlist;
 Node *elemlist; 
```

我希望能够在主列表中找到一个特定的节点，并将 elemlist 中的所有元素添加到该节点 *elements 中。

我有这个函数，它接受主列表和一个要检查的值：

```
void add_elements(Node *mainlist, int value)
{
    Node *ptr = mainlist;
    Node *ptr2 = elemlist;
    while(ptr != NULL)
    {
            if(value == ptr->value)
            {
                    while(ptr2 != NULL)
                    {
                            Node *newNode = malloc(sizeof(Node));
                            newNode->value = ptr2->value;
                            newNode->next = ptr->elements;
                            ptr->elements = newNode;
                            ptr2 = ptr2->next;
                    }
            }
            ptr = ptr->next;
    }
} 
```

我遇到了分段错误，因此它显然没有将 elemlist 中的元素添加到节点的元素中。我相当肯定我的指针做错了什么。

对此的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:52:54.710

我认为这：

```
 Node->value = ptr2->value; 
```

应该是这样的：

```
 newNode->value = ptr2->value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:00:29.020

在为您的 newNode 调用 malloc 之后，您应该为该 newNode 初始化`value`和`next`项目

但是你正在改变`Node->value`但你应该改变`newNode->value`

* * *

您必须替换`Node->value = ptr2->value;`为`newNode->value = ptr2->value;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T08:00:43.223

看起来您的 seg 错误将在您的内部 while 循环执行后出现，因此 ptr2 指向其链表的末尾。然后，如果再次执行第二个循环，您将访问无效内存。尝试在内循环之后重置 ptr2 。

所以喜欢

```
void add_elements(Node *mainlist, int value)
{
    Node *ptr = mainlist;
    Node *ptr2 = elemlist;
    Node *tmp = ptr2;
    while(ptr != NULL)
    {
            if(value == ptr->value)
            {
                    while(ptr2 != NULL)
                    {
                            Node *newNode = malloc(sizeof(Node));
                            newNode->value = ptr2->value;
                            newNode->next = ptr->elements;
                            ptr->elements = newNode;
                            ptr2 = ptr2->next;
                    }
                     ptr2 = tmp;
            }
            ptr = ptr->next;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T08:06:23.270

不知道为什么你有一个 segFault 但那是因为你正在使用未定义的指针地址设置 newNode->next （或不设置）。

```
typedef struct Node{
int value;
struct Node *elements;
struct Node *next; 
```

}节点;

节点 *mainlist; 节点 *elemlist;

```
void add_elements(Node* mainlist, int value){
    Node* ptr  = mainlist;
    Node* ptr2 = elemlist;
    while(ptr != NULL)
    {
        printf("* %u\n", ptr->value);
        if(value == ptr->value)
        {
            while(ptr2 != NULL)
            {
                Node *newNode = malloc(sizeof(Node));
                newNode->value  = ptr2->value;
                newNode->next   = ptr->elements;
                ptr->elements   = newNode;
                ptr2            = ptr2->next;
            }
        }
        ptr = ptr->next;
    }
}

int main(int argc, const char * argv[]){

        Node* node = calloc(1, sizeof(Node));
        Node* node2 = calloc(1, sizeof(Node));
        node->next = node2;
        node2->value = 17;
        add_elements(node, 2);
    }
    return 0;
} 
```

正在工作（即使我在函数之外添加了元素；），但将其作为练习）

# javascript - 从 HTML5 Canvas 中的图像中删除背景颜色

> ID：13044889
> 
> 赞同：2
> 
> 时间：2012-10-24T07:48:31.407
> 
> 标签：javascript, jquery, html, background

我正在尝试从加载到 HTML5 Canvas 中的照片图像中去除背景。想想像绿屏效果这样的东西。

我正在使用 HTML/JS/jQuery

例如，照片的背景将是绿色窗帘。由于照明等原因，窗帘的颜色不会准确。

我现在正在做的是获取用户在画布中单击的像素的 RGB 值。这被认为是背景。我添加该像素的 R+G+B 来设置被视为背景的内容。

然后，我将逐个像素地浏览画布，检查像素是否接近设置为背景的 RGB 值（例如在 50 上下）。如果匹配，我将像素更改为在画布中透明。

这作为概念证明效果很好，但不足以做任何事情。

有没有人对背景减法有更好的想法？

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:26:51.237

看看[GrabCut 算法](http://research.microsoft.com/pubs/67890/siggraph04-grabcut.pdf)或GrowCut[算法](http://graphicon.ru/oldgr/en/publications/text/gc2005vk.pdf)；前者描述了“使用迭代图形切割的前景提取”，后者描述了“元胞自动机的图像分割”。这两篇论文将使您更深入地了解一些用于删除背景图像数据的旧算法。如果您可以以某种方式在 Javascript 中实现其中一种算法，那么我认为您已经完成了大部分工作。

OPENcv[计算机视觉库](http://opencv.org/)（用 c/c++ 编写）有很多有效的图像处理方法可供检查。您可以尝试将[OPENcv 库的 BackgroundSubtractor](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html#backgroundsubtractormog)方法之一（我相信它部分基于[Chris Stauffer 和 WEL Grimson 的算法](http://www.ai.mit.edu/projects/vsam/Publications/stauffer_cvpr98_track.pdf)）移植到 Javascript，然后使用它来分析背景并因此减去它，但我认为它们是基于渐进式的视频帧而不是静态图像。

Google 代码上的[js-aruco 项目已经移植了](http://code.google.com/p/js-aruco/)[OPENcv 库](http://opencv.org/)的一些功能（[代码库在这里](http://js-aruco.googlecode.com/svn/trunk/src/cv.js)）所以你可能想先去那里寻找一些灵感，然后，如果你觉得勇敢，看看如何您可以对[GrabCut](http://research.microsoft.com/pubs/67890/siggraph04-grabcut.pdf)或[GrowCut](http://graphicon.ru/oldgr/en/publications/text/gc2005vk.pdf)算法进行编程

# ios - 使用 AVPlayer 获取 AirPlay 设备的名称

> ID：13044894
> 
> 赞同：12
> 
> 时间：2012-10-24T07:48:44.073
> 
> 标签：ios, avplayer

在 MPMoviePlayerController 中启用 AirPlay 时，它会显示文本“此视频正在*设备名称*上播放”。将 AirPlay 与 AVPlayer 一起使用时，有没有办法以编程方式获取设备名称？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-31T00:46:39.827

从 iOS7 AudioToolbox API 开始， currentRoute 已弃用：

Apple 改为在 AudioSession 中为您提供 currentRoute API，它允许检索它的端口信息以及以一种很好的方式收听 audioRouteChangeNotification：

```
NSString* airplayName = [self activeAirplayOutputRouteName];
if (airplayName) {
    //airplay is active

}

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(audioRouteHasChangedNotification:) name:AVAudioSessionRouteChangeNotification object:[AVAudioSession sharedInstance]]; 
```

（你想要得到的是of `portType`）：`portDescription``audioSession.currentRoute`

```
- (NSString*)activeAirplayOutputRouteName
{
    AVAudioSession* audioSession = [AVAudioSession sharedInstance];
    AVAudioSessionRouteDescription* currentRoute = audioSession.currentRoute;
    for (AVAudioSessionPortDescription* outputPort in currentRoute.outputs){
        if ([outputPort.portType isEqualToString:AVAudioSessionPortAirPlay])
            return outputPort.portName;
    }

    return nil;
}

- (void)audioRouteHasChangedNotification:(NSNotification*)notification
{
    //do something
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-17T21:18:25.987

在其他框架中搜索了你连接的Apple TV的名称后，我终于在AudioToolbox框架中找到了这个信息。可能还有其他方法可以做到这一点，但到目前为止我还没有找到其他方法。希望这可以帮助。

您需要导入 AudioToolbox 框架：

```
#import <AudioToolbox/AudioToolbox.h> 
```

然后是当你想检测airplay是否可用时调用的方法

```
- (BOOL)isAirplayActive {
  CFDictionaryRef currentRouteDescriptionDictionary = nil;
  UInt32 dataSize = sizeof(currentRouteDescriptionDictionary);
  AudioSessionGetProperty(kAudioSessionProperty_AudioRouteDescription, &dataSize, &currentRouteDescriptionDictionary);

  self.deviceOutputType = nil;
  self.airplayDeviceName = nil;

  if (currentRouteDescriptionDictionary) {
    CFArrayRef outputs = CFDictionaryGetValue(currentRouteDescriptionDictionary, kAudioSession_AudioRouteKey_Outputs);
    if(CFArrayGetCount(outputs) > 0) {
      CFDictionaryRef currentOutput = CFArrayGetValueAtIndex(outputs, 0);

      //Get the output type (will show airplay / hdmi etc
      CFStringRef outputType = CFDictionaryGetValue(currentOutput, kAudioSession_AudioRouteKey_Type);

      //If you're using Apple TV as your ouput - this will get the name of it (Apple TV Kitchen) etc
      CFStringRef outputName = CFDictionaryGetValue(currentOutput, @"RouteDetailedDescription_Name");

      self.deviceOutputType = (NSString *)outputType;
      self.airplayDeviceName = (NSString *)outputName;

      return (CFStringCompare(outputType, kAudioSessionOutputRoute_AirPlay, 0) == kCFCompareEqualTo);
    }
  }
  return NO;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-02-18T10:47:41.467

我将发布与环境光类似的答案，[以便](https://stackoverflow.com/users/2380455/ambientlight)快速。也许它对将来的某人有帮助。

```
private func addAirplayNotifier() {
    NSNotificationCenter.defaultCenter().addObserver(self, selector: Selector("airplayChanged:"), name: AVAudioSessionRouteChangeNotification, object: AVAudioSession.sharedInstance())
}

func airplayChanged(sender:NSNotification) -> Bool {
    var airplayConnected = false
    let currentRoute = AVAudioSession.sharedInstance().currentRoute
    for output in currentRoute.outputs {
        if output.portType == AVAudioSessionPortAirPlay {
            print("Airplay Device connected with name: \(output.portName)")
            airplayConnected = true
        }
    }
    print("Disconnect Airplay")
    return airplayConnected
} 
```

**斯威夫特 3.0**

```
private func addAirplayNotifier() {
    NotificationCenter.default.addObserver(self, selector: Selector("airplayChanged:"), name:NSNotification.Name.AVAudioSessionRouteChange, object: AVAudioSession.sharedInstance())
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-11-29T12:39:55.303

**斯威夫特 4**

```
private func addAirplayNotifier() {
    NotificationCenter.default.addObserver(
        self,
        selector: #selector(airplayChanged),
        name: AVAudioSession.routeChangeNotification,
        object: AVAudioSession.sharedInstance())
}

@objc func airplayChanged() {
    isAirPlaying = false
    let currentRoute = AVAudioSession.sharedInstance().currentRoute
    for output in currentRoute.outputs where output.portType == AVAudioSession.Port.airPlay {
        print("Airplay Device connected with name: \(output.portName)")
        isAirPlaying = true
    }
} 
```

# objective-c - 将 7000 行插入 SQLite 数据库时应用程序崩溃

> ID：13044896
> 
> 赞同：1
> 
> 时间：2012-10-24T07:48:46.903
> 
> 标签：objective-c, ios, sqlite, insert

我有一个问题，我想将 7000 行插入 SQLite 数据库，但是当我到达第 6000 行时，我的应用程序崩溃而没有错误。

我使用了分析器，显然问题是我的 iPad 上的 RAM 使用情况（当应用程序分配 435MB 的 RAM 时它会崩溃）。

所以我的问题是如何在插入期间管理内存？（是的，我需要在本地拥有这些数据，因为我的应用程序需要在断开连接模式下工作）。

这是我用来在表中插入行的代码：

```
-(void)MultiInsertFamille:(NSArray *)categories{
sqlite3_stmt *stmt=nil;
sqlite3 *bdd;

NSString *database = [[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:@"myBDD.sqlite"];
if (sqlite3_open([database UTF8String], &bdd) == SQLITE_OK)
{
    sqlite3_exec(bdd, "BEGIN", 0, 0, 0);
    const char *sqlstatement="insert into Famille values(?,?,?,?,?,?,?)";

    if(sqlite3_prepare_v2(bdd,sqlstatement , -1, &stmt, NULL)==SQLITE_OK)
    {
        int hasError= 0;
        int i = 0;
        for(NSString *path in categories)
        {
            i++;
            NSString *nameFile = [[path componentsSeparatedByString: @"."] objectAtIndex:0];
            XMLParserFamille *fa = [[XMLParserFamille alloc] initXMLParserFamille:nameFile parseError:nil];
            FamilleData *fam = fa.famille;
            [fa release];

            if (fam.champ_Recherche)
                sqlite3_bind_text(stmt, 1, [fam.champ_Recherche cStringUsingEncoding:NSUTF8StringEncoding], -1, SQLITE_TRANSIENT);
            else
                sqlite3_bind_text(stmt, 1, "NULL", -1, SQLITE_TRANSIENT);

            NSString *pathImTh = @"";
            for (Attribut *att in fam.Attributs)
            {
                if ([att.name isEqualToString:@"ProductThumbnail"])
                {
                    pathImTh = att.value;
                    break;
                }
            }
            if (pathImTh)
                sqlite3_bind_text(stmt, 2, [pathImTh cStringUsingEncoding:NSUTF8StringEncoding], -1, SQLITE_TRANSIENT);
            else
                sqlite3_bind_text(stmt, 2, "NULL", -1, SQLITE_TRANSIENT);

            if (fam.nom)
                sqlite3_bind_text(stmt, 3, [fam.nom cStringUsingEncoding:NSUTF8StringEncoding], -1, SQLITE_TRANSIENT);
            else
                sqlite3_bind_text(stmt, 3, "NULL", -1, SQLITE_TRANSIENT);

            if (fam.ordre)
                sqlite3_bind_int(stmt, 4, [fam.ordre intValue]);
            else
                sqlite3_bind_int(stmt, 4, 0);

            if (fam.uid)
                sqlite3_bind_text(stmt, 5, [fam.uid cStringUsingEncoding:NSUTF8StringEncoding], -1, SQLITE_TRANSIENT);
            else
                sqlite3_bind_text(stmt, 5, "NULL", -1, SQLITE_TRANSIENT);

            if (fam.uid_Categorie)
                sqlite3_bind_text(stmt, 6, [fam.uid_Categorie cStringUsingEncoding:NSUTF8StringEncoding], -1, SQLITE_TRANSIENT);
            else
                sqlite3_bind_text(stmt, 6, "NULL", -1, SQLITE_TRANSIENT);

            if (fam.xmlErrone)
                sqlite3_bind_int(stmt, 7, [fam.xmlErrone intValue]);
            else
                sqlite3_bind_int(stmt, 7, 0);

            if(sqlite3_step(stmt)==SQLITE_DONE)
            {
                NSLog(@"OK");
            }
            else
            {
                NSLog(@"sqlite3_step error famille: '%s'", sqlite3_errmsg(bdd));
                hasError= 1;
            }
            sqlite3_reset(stmt);
            if (i==5500)
                break;
        }
        //if( hasError == 0 ) {
        sqlite3_exec(bdd, "COMMIT", 0, 0, 0);
        //}
        //else {
        //    sqlite3_exec(bdd, "ROLLBACK", 0, 0, 0);
        //}
    }
}
sqlite3_close(bdd);} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:07:26.810

您可以尝试执行较小的事务，例如每 1000 行开始/提交。

类似的事情可能会有所帮助：

```
NSInteger rowsProcessed = 0;
for(NSString *path in categories)
{
  if (rowsProcessed == 0)
  {
     sqlite3_exec(bdd, "BEGIN", 0, 0, 0);
  }
  if (rowsProcessed++ > 1000)
  {
     sqlite3_exec(bdd, "COMMIT", 0, 0, 0);
     rowsProcessed = 0;
  }

  ...
  // your inserts here
  ...
}
if (rowsProcessed != 0) 
{
   sqlite3_exec(bdd, "COMMIT", 0, 0, 0);
} 
```

在不提交的情况下提交的解决方法（可能会影响性能，因此如果您完全删除开始/提交，sqlite 会添加隐式事务）：

*   如果您在开始时表为空，则可以完全删除开始/提交，并在最后删除表中的所有行以防出错。
*   如果您的表不是空的，但您仍想删除所有行以防出错，那么您可以删除 begin/commit 并添加一些列，当您插入这些行时，该列将保留一些唯一 id（其中所有插入的唯一 id方法），因此稍后您可以通过此 ID 删除所有行，以防出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:35:20.407

在循环中可能会创建很多临时对象（例如字符串处理）。

您可以尝试将您的东西放入自动释放池块中，以便在每个循环结束时释放临时对象。

```
for(NSString *path in categories) {
   @autoreleasepool {
      your stuff here ..
   }
} 
```

# python - Python 与 emacs 和 windows XP

> ID：13044897
> 
> 赞同：0
> 
> 时间：2012-10-24T07:49:09.473
> 
> 标签：python, emacs, windows-xp, emacsw32

我正在尝试在运行 Windows XP（64 位）的公司计算机上的 emacs 下设置 Python。

我尝试了 python.el 和 python-mode.el 都没有成功。

我目前的问题是，每当我使用类似`C-c C-c`向 python 进程发送`.py`缓冲区的东西时，我都会收到以下错误消息

```
apply: Searching for program: no such file or directory, python 
```

创建了一个`*Python*`缓冲区，但它没有提示，我不知道如何与之交互。`RET`在所述缓冲区内按下会引发以下错误消息

```
comint-send-string: Output file descriptor of Python is closed 
```

我无法解释。

Python 似乎已正确安装（并添加到搜索路径），因为正确地以提示符`M-x shell RET python -i RET`开始了 Python shell 。`>>>`

你知道我的设置有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:08:32.673

变量的值是`python-command`多少？

您可以调试`run-python`在 python.el 中定义的函数。此函数创建内部 python 进程。

只需将光标放在函数内并执行`M-x edebug-defun`. [您可以在doc](http://www.gnu.org/software/emacs/manual/html_node/elisp/Edebug.html#Edebug)中阅读有关调试的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:03:29.750

至于 python-mode.el 那种东西应该运行

请提交报告至

[https://bugs.launchpad.net/python-mode](https://bugs.launchpad.net/python-mode)

# mysql - “列数与行中的值数不匹配”但确实如此

> ID：13044901
> 
> 赞同：26
> 
> 时间：2012-10-24T07:49:14.877
> 
> 标签：mysql, count

我有一个包含超过 14000 条语句的 mysql 文件。所有这些都是插入到表中，当我使用控制台导入文件时，它会引发以下错误：

```
ERROR 1136 (21S01) at line 1548: Column count doesn't match value count at row 45 
```

我知道当列名中指定的行与 VALUES 列表中指定的行不同时会出现错误，但我已经检查了很多次并且两个列表中的列数完全相同。

位置 45 的行是：

```
('00553', 'AAA', 'BBB', 'CCC', 'XXXXXXXXR', 'user address', 'spain', 'spain', '39212', '1900-01-21', '123456789', 'M', 'No disponible', 0, 'AAA', 'BBB ', 'CCC', 'XXXXXXXXR', NULL, '888993344', '', '', '', '', 'no', 'no') --> 26 columns 
```

以及与之关联的插入行，上面的许多行是：

```
INSERT INTO `users` (`id_patient`, `name`, `surname1`, `surname2`, `dni`, `address`, `city`, `state`, `postal_code`, `birthday`, `telephone`, `sex`, `email`, `lopd_status`, `lopd_name`, `lopd_surname1`, `lopd_surname2`, `lopd_dni`, `lopd_as`, `mobile_phone`, `notes`, `job`, `company`, `place`, `active_citation`, `signature`)  --> 26 columns 
```

我已经寻找过这个错误，但它似乎只在计数不同时出现，但在这种情况下，它是相同的。

任何的想法？

编辑：忘了提：如果我直接在 phpmyadmin 上抛出 sql 语句，它会正确添加该行而没有任何错误。它仅在从命令行运行时崩溃，尽管上面的语句已正确插入数据库并且它们与此语句几乎相同。

EDIT2：我删除了所有行，直到第 46 行，当我启动文件时，错误如下：

```
ERROR 1136 (21S01) at line 1503: Column count doesn't match value count at row 45 
```

它只更改了行，但该行是 INSERT 语句，它与文件其余部分中的其他 INSERT 语句完全相同。previos 行也是正确的。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-11-03T18:58:06.343

由于在数据周围插入括号，我遇到了类似的问题:-(:

```
INSERT INTO Customers (Name,LastCredit,CreditDate) VALUES ( <-- Here.
    ("Nuclear Millitary Systems",500.0,CURRENT_DATE),
    ("Evil Corporation",67890.95,"2012-02-12"),
    ("Nuke Software Systems",5600.0,"2013-05-06"),
    ("RR Millitary",600.0,"2013-05-06"),
    ("Random Automation",560.0,"2012-05-01"),
    ("Evil Data Systems",600.0,"2013-03-01")
  ); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-10-01T00:38:24.847

我面临着类似的错误。这只是缺少逗号的问题。检查插入语句中的所有项目是否用逗号分隔

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-04-19T13:43:38.587

就我而言，我的数据库表有一个与另一个表关联的触发器，并且触发表中缺少一列。像这样的东西：

**表 1 列：** UserAccountID、文档类型、权限、状态

**触发表 2 列：**修订号、修订状态、用户帐户 ID、权限、状态

因此，在表 2 中，缺少“文档类型”列。通过以下方式检查数据库中的触发器

“显示来自 {Database Name} 的触发器”

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-02-18T06:38:35.823

就我而言，我在 INSERT 上*触发*了列不匹配计数**:(&**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-10T10:36:41.147

我也遇到了同样的问题。@valplo 的答案是正确的。由于我没有足够的声誉来发表评论，所以我在这里写下来。

插入多个值的正确方法是在关键字之后列出值`VALUES`，而不是在多个值条目周围的括号，而是在单个值条目周围的括号，并用逗号分隔每个单个值条目。

错误的方法是：

```
INSERT INTO my_table(column_name_0, column_name_1) VALUES(
    (val_00, val_01),
    (val_10, val_11)
); 
```

正确的方法是：

```
INSERT INTO my_table(column_name_0, column_name_1) VALUES
    (val_00, val_01),
    (val_10, val_11); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-24T09:53:58.323

检查文件中的特殊隐藏字符。您可能认为文件中的所有空格都是空格，但有时其他字符会以某种您无法通过查看数据来理解的方式终止插入。

如果所有其他方法都失败，请手动重新键入 INSERT 并在文件中单独运行它以查看它是否仍然失败。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-27T16:35:27.943

就我而言，它是“？”的数量。在准备好的声明中

```
prepare stmt1 from  "insert into company (name, address, phone) values(?,?);";
/*note only 2 question marks which should be 3.*/ 
```

这也会触发同样的错误

```
insert into company (name, address, phone) values('foo','bar'); 
```

# facebook - fb 评论 - 无法再看到完整的小部件

> ID：13044907
> 
> 赞同：1
> 
> 时间：2012-10-24T07:49:35.037
> 
> 标签：facebook, widget, comments, size

从昨天开始，我看不到来自 facebook 的完整评论小部件。我有一个包含文章的网站，每篇文章都有一个 fb 评论小部件。首先，我认为这是图层或其他问题的问题，但我创建了一个新文件并且发生了同样的问题。代码是：

```
<html>
<head>
</head>
<body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=386320764714835";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-comments" data-href="http://steagu.ro/index.php?id=2806&amp;cat=1" data-num-posts="5" data-width="630"></div>
</body>
</html> 
```

[您可以在这里](http://steagu.ro/testfb.php)看到它的实际效果。我已经在 Firefox 16.0.1 和 IE 9.0.7 上对其进行了测试

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:09:40.417

包括这一行：

```
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

使用此代码并检查

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<html xmlns:fb="http://ogp.me/ns/fb#">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
</head>

<body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=386320764714835";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-comments" data-href="http://steagu.ro/index.php?id=2806&amp;cat=1" data-num-posts="25" data-width="630"></div>

</body>
</html> 
```

# wso2 - WSO2 Developer Studio 注册表浏览器透视异常

> ID：13044908
> 
> 赞同：0
> 
> 时间：2012-10-24T07:49:37.373
> 
> 标签：wso2

当我尝试在注册表浏览器透视图中访问我的注册表项时（以及当我尝试将注册表项导入注册表项目时），我在 Eclipse 日志中遇到异常。

例外情况如下：（任何帮助将不胜感激）

```
!MESSAGE java.lang.RuntimeException: java.lang.ClassNotFoundException:    org.apache.abdera.parser.stax.FOMParser
!STACK 0
java.lang.RuntimeException: java.lang.RuntimeException: java.lang.ClassNotFoundException:   org.apache.abdera.parser.stax.FOMParser
at org.apache.abdera.util.Discover.locate(Discover.java:56)
at org.apache.abdera.util.Discover.locate(Discover.java:23)
at org.apache.abdera.util.AbderaConfiguration.newParserInstance(AbderaConfiguration.java:320)
at org.apache.abdera.Abdera.newParser(Abdera.java:224)
at org.apache.abdera.Abdera.getParser(Abdera.java:156)
at org.apache.abdera.protocol.client.AbstractClientResponse.<init>(AbstractClientResponse.java:57)
at org.apache.abdera.protocol.client.CommonsResponse.<init>(CommonsResponse.java:44)
at org.apache.abdera.protocol.client.AbderaClient.execute(AbderaClient.java:796)
at org.apache.abdera.protocol.client.AbderaClient.get(AbderaClient.java:235)
at org.wso2.carbon.registry.app.RemoteRegistry.get(RemoteRegistry.java:162)
at org.wso2.developerstudio.eclipse.greg.base.core.Registry.get(Registry.java:825)
at org.wso2.developerstudio.eclipse.greg.manager.remote.views.ResourceInfoViewer.updateGeneralInfo(ResourceInfoViewer.java:269)
at org.wso2.developerstudio.eclipse.greg.manager.remote.views.ResourceInfoViewer.updateInfo(ResourceInfoViewer.java:224)
at org.wso2.developerstudio.eclipse.greg.manager.remote.views.ResourceInfoViewer.updateMe(ResourceInfoViewer.java:334)
at org.wso2.developerstudio.eclipse.greg.manager.remote.views.RegistryBrowserView$48.widgetSelected(RegistryBrowserView.java:2391)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4134)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1458)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1481)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1466)
at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1271)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3980)
at org.eclipse.swt.widgets.Display.applicationNextEventMatchingMask(Display.java:4869)
at org.eclipse.swt.widgets.Display.applicationProc(Display.java:5239)
at org.eclipse.swt.internal.cocoa.OS.objc_msgSendSuper(Native Method)
at org.eclipse.swt.widgets.Widget.callSuper(Widget.java:221)
at org.eclipse.swt.widgets.Widget.mouseDownSuper(Widget.java:1093)
at org.eclipse.swt.widgets.Tree.mouseDownSuper(Tree.java:2052)
at org.eclipse.swt.widgets.Widget.mouseDown(Widget.java:1085)
at org.eclipse.swt.widgets.Control.mouseDown(Control.java:2538)
at org.eclipse.swt.widgets.Tree.mouseDown(Tree.java:2007)
at org.eclipse.swt.widgets.Display.windowProc(Display.java:5493)
at org.eclipse.swt.internal.cocoa.OS.objc_msgSendSuper(Native Method)
at org.eclipse.swt.widgets.Widget.callSuper(Widget.java:221)
at org.eclipse.swt.widgets.Widget.windowSendEvent(Widget.java:2102)
at org.eclipse.swt.widgets.Shell.windowSendEvent(Shell.java:2284)
at org.eclipse.swt.widgets.Display.windowProc(Display.java:5557)
at org.eclipse.swt.internal.cocoa.OS.objc_msgSendSuper(Native Method)
at org.eclipse.swt.widgets.Display.applicationSendEvent(Display.java:5002)
at org.eclipse.swt.widgets.Display.applicationProc(Display.java:5151)
at org.eclipse.swt.internal.cocoa.OS.objc_msgSend(Native Method)
at org.eclipse.swt.internal.cocoa.NSApplication.sendEvent(NSApplication.java:128)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3616)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
Caused by: java.lang.RuntimeException: java.lang.ClassNotFoundException: org.apache.abdera.parser.stax.FOMParser
at org.apache.abdera.util.Discover.getClass(Discover.java:235)
at org.apache.abdera.util.Discover.load(Discover.java:210)
at org.apache.abdera.util.Discover.locate(Discover.java:47)
... 64 more
Caused by: java.lang.ClassNotFoundException: org.apache.abdera.parser.stax.FOMParser
at  org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:50)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:244)
at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230)
at org.apache.abdera.util.Discover.getClass(Discover.java:231)
... 66 more 
```

# java - 结果集编码问题

> ID：13044912
> 
> 赞同：1
> 
> 时间：2012-10-24T07:50:04.347
> 
> 标签：java, encoding, utf-8, resultset, jena

我的结果集包含特殊字符和变音符号。我尝试了不同的解决方案，第一个打印出没有编码问题的文本是这个：

```
List<QuerySolution> list = ResultSetFormatter.toList(myResultSet);  
for (QuerySolution querySolution : list) {
    System.out.println(querySolution);   } 
```

而不是这个，我更喜欢直接输出，如：

```
ResultSetFormatter.out(System.out, myResultSet, myQuery); 
```

但是当我使用它时，我的编码问题又出现了。我在java中使用jena库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:48:30.040

问题是您的终端使用的是非 UTF-8 编码。

各种`ResultSetFormatter.out`方法采用 a`OutputStream`而不是 a `Writer`，即它们将输出字节而不是字符。因此，它需要选择一种编码，而 UTF-8 是显而易见的选择。

您可能有理由想知道这笔交易是什么`System.out`。它有点过时，是一种混合体，`OutputStream`但有一些方法可以接受将使用平台默认编码进行编码的字符串。

因此，第一种方法有效——`System.out.println(querySolution)`使用与您的终端匹配的默认平台编码——而第二种方法将使用 UTF-8。

[`ResultSetFormatter`](http://jena.apache.org/documentation/javadoc/arq/com/hp/hpl/jena/query/ResultSetFormatter.html)没有接受`Writer`（遗漏）的方法，所以我建议使用：

```
System.out.println(ResultSetFormatter.asText(myResultSet, myQuery)); 
```

这对于小型结果集很好，或者：

```
TextOutput fmt = new TextOutput(myQuery);
fmt.format(new OutputStreamWriter(System.out, Charset.defaultCharset()), myResultSet); 
```

它将流式传输，并且应该使用与`System.out.println()`.

# model-view-controller - Joomla 在其他视图中包含视图

> ID：13044913
> 
> 赞同：0
> 
> 时间：2012-10-24T07:50:08.563
> 
> 标签：model-view-controller, view, joomla

我在包含 Joomla 视图时遇到问题。我的扩展中有很多视图，我想在我的对话框中包含另一个视图。

我该怎么做？

在我的第一个视图中，我有以下代码：

```
<div id="modalDostawca" title="Dostawcy">
    <div id="wewM">
//in here i want to include view data/tmpl/default.php

</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:58:43.140

你的扩展是什么类型的扩展？一个模块？一个组件？

如果它是一个组件，那么您要包含的是视图的模板，而不是视图！（视图是带有 view.html.php 的视图）。为您要查看的内容创建视图 + 模板。我不认为 Joomla！可以同时调用多个视图。如果您可以在模型中重用代码（如果这是您的问题）。

您还可以使用 include(...) 以正常方式包含文件。

# android - AES 加密在 iOS 和 Android 中产生不同的结果

> ID：13044914
> 
> 赞同：9
> 
> 时间：2012-10-24T07:50:10.313
> 
> 标签：android, ios, aes

尝试在 Android 和 iOS 中使用带有 CBC 和 PKCS7 填充的 AES128 算法加密样本数据，但结果不同:(

安卓代码：

```
private static final byte[] KEY = { 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F, 0x10};

int srcBuffSiz = 1024;
byte[] srcBuff = new byte[srcBuffSiz];
Arrays.fill(srcBuff, (byte)0x01);

SecretKeySpec skeySpec = new SecretKeySpec(KEY, "AES");
Cipher ecipher = Cipher.getInstance("AES/CBC/PKCS7Padding");
ecipher.init(Cipher.ENCRYPT_MODE, skeySpec);
byte[] dstBuff = ecipher.doFinal(srcBuff);
int bytesEncrypted = dstBuff.length; 
```

iOS 代码：

```
 // Source buffer
    size_t srcBuffSiz = 1024;
    unsigned char* srcBuff = new unsigned char[srcBuffSiz];
    memset(srcBuff, 0x01, srcBuffSiz);

    // Destination buffer
    size_t dstBuffSiz = srcBuffSiz + 128;
    unsigned char* dstBuff = new unsigned char[dstBuffSiz];
    memset(dstBuff, 0x00, dstBuffSiz);

    unsigned char keyPtr[kCCKeySizeAES128] = { 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F, 0x10};

    size_t bytesEncrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                          keyPtr, kCCKeySizeAES128,
                                          NULL /* initialization vector (optional) */,
                                          srcBuff, srcBuffSiz, /* input */
                                          dstBuff, dstBuffSiz, /* output */
                                          &bytesEncrypted); 
```

因此，在这两种情况下，我都尝试使用预定义的样本密钥加密样本 1024 字节缓冲区（以前填充 0x01 值）。

iOS 中第一个和最后 6 个字节的加密缓冲区：

```
ED CC 64 27 A8 99 ... 0C 44 9F EC 34 FC 
```

Android中加密缓冲区的第一个和最后6个字节：

```
AE 65 A9 F7 7F 0E ... 1F BD AE 8B 85 ED 
```

任何的想法？

如果我将 Cipher.getInstance("AES/CBC/PKCS7Padding") 替换为 Cipher.getInstance("AES")，那么加密缓冲区的前几个字节将是相同的，但从第 17 个字节开始......

IOS：

```
ED CC 64 27 A8 99 DA 83 D5 4A B0 03 0F E7 DD A7 35 F2 50 5C 49 47 CC 3B 2F AB D1 61 05 
```

安卓：

```
ED CC 64 27 A8 99 DA 83 D5 4A B0 03 0F E7 DD A7 ED CC 64 27 A8 99 DA 83 D5 4A B0 03 0F 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T08:51:56.507

我隐约记得我曾经有过类似的问题，即在 Android 和 iPhone 之间“同步”加密，解决方案是在适当的 IV（初始化向量）使用中。因此，在 Android 中打开显式 IV 使用可能会有所帮助：

```
final byte[] iv = new byte[16];
Arrays.fill(iv, (byte) 0x00);
IvParameterSpec ivParameterSpec = new IvParameterSpec(iv);
.. // the rest of preparations
ecipher.init(Cipher.ENCRYPT_MODE, skeySpec, ivParameterSpec); 
```

因为在 iPhone 上您将 NULL 作为 IV 传递时，它可能会在内部使用与上述对应的默认值。

但是在生产环境中，您应该使用（加密安全的伪）随机初始化向量，与数据一起存储。然后它对所有操作模式都是安全的。[[1]](https://crypto.stackexchange.com/q/5094)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:55:02.400

Android 代码使用明确的 CBC 模式。但是 iOS 代码没有指定这一点。至少我在那里看不到。

此外，当您使用 CBC 模式时，您还必须指定初始化向量：

```
byte[] iv = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, }; // use different random value
AlgorithmParameterSpec algorithmSpec = new IvParameterSpec(iv);
Cipher ecipher = Cipher.getInstance("AES/CBC/PKCS7Padding");
ecipher.init(Cipher.ENCRYPT_MODE, skeySpec, algorithmSpec); 
```

您应该在 iOS 上使用相同的初始化向量，并指定您使用的是 CBC 模式。

# javascript - 在切换幻灯片后滚动到底部？

> ID：13044917
> 
> 赞同：3
> 
> 时间：2012-10-24T07:50:38.477
> 
> 标签：javascript, jquery

我正在尝试执行以下操作-单击 a href 后，表单容器会向下滑动，那里没有问题。我还试图让页面向下滚动到底部（平滑的动画滚动），以便在向下滑动期间可以查看内容。

我的尝试：

```
<a class="enter" id=slide href="#bottom"></a>
<div class="form-container">
</div>

    <script type="text/javascript">     
$("#slide").click(function () {
   $('.form-container').slideToggle();
});

$("a[href='#bottom']").click(function() {
  $('html, body').animate({ 
   scrollTop: $(document).height()-$(window).height()}, 
   1400, 
   "easeOutQuint"
);
});    
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:05:22.707

用这个

```
$("#slide").click(function(e) {
   e.preventDefault();
  $("html, body").animate({ scrollTop: $(document).height() }, "slow");
  return false;
}); 
```

# objective-c - 在 __bridge 之后将 Objective-c 指针类型 nsoutputstream* 转换为 c 指针类型 cfwritestreamref 异常

> ID：13044918
> 
> 赞同：0
> 
> 时间：2012-10-24T07:50:40.977
> 
> 标签：objective-c, automatic-ref-counting

我正在做一个用 smtp 发送照片的项目。一开始，自动引用计数被禁用，项目运行没有问题。当我启用自动引用计数时，我遇到了很多编译错误。最常见的一种是将 Objective-C 指针类型“NSOutputStream*”转换为 C 指针类型 CFWriteStreamRef（又名“struct_CFWriteStream*”需要桥接转换）在行

```
if (CFWriteStreamWriteFully(( CFWriteStreamRef)outputStream, (const uint8_t *)[ehlo  
UTF8String], [ehlo lengthOfBytesUsingEncoding:NSUTF8StringEncoding]) < 0) 
```

当我写 if (CFWriteStreamWriteFully((__bridge CFWriteStreamRef)outputStream, (const uint8_t *)
[ehlo UTF8String], [ehlo lengthOfBytesUsingEncoding:NSUTF8StringEncoding]) < 0)

它可以编译，但是当我按下发送按钮以使用 smtp 发送电子邮件时出现运行时异常。我想知道你是否可以帮助我解决这个问题。我将不胜感激任何帮助。提前谢谢你，最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:40:54.687

你怎么能确定这是一个错误的类型转换？只要流正在写入，请尝试保留 [ehlo UTF8String] 的所有权，也许这会有所帮助

```
const UInt8 *buffer = (const UInt8 *)[ehlo UTF8String];
if (CFWriteStreamWriteFully(( CFWriteStreamRef)outputStream, buffer, [ehlo lengthOfBytesUsingEncoding:NSUTF8StringEncoding]) < 0) 
```

顺便说一句，我在任何地方都没有找到 CFWriteStreamWriteFully() 声明。只有 CFIndex

```
CFWriteStreamWrite (
   CFWriteStreamRef stream,
   const UInt8 *buffer,
   CFIndex bufferLength
); 
```

有关系吗？UInt8 和 uint8_t 都是无符号字符。

# ipython - 在 ipython-notebook 环境中防止用户删除文件

> ID：13044921
> 
> 赞同：3
> 
> 时间：2012-10-24T07:50:49.580
> 
> 标签：ipython, ipython-notebook

我想为同事建立 ipython-notebook 游乐场环境，但似乎无法阻止一个人在 ipython-notebook 中删除另一个人的文件。像，

```
!rm <aaa's file> 
```

我有什么办法可以防止这种情况发生吗？

**编辑**：它也可以 rm 其他文件...即使在其他地方...

如果我想向其他人打开 ipython-notebook，我应该为它添加一个新用户吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:29:12.057

有一种方法可以让人们以只读方式访问笔记本，但如果你想让他们运行代码，他们可以做任何操作系统允许他们做的事情。所以是的，您需要使用操作系统级别的安全机制，例如用户帐户或虚拟机。

# java - 使用 Spring 上下文的命令行应用程序永无止境

> ID：13044925
> 
> 赞同：0
> 
> 时间：2012-10-24T07:51:29.333
> 
> 标签：java, spring, main, freeze

我创建了一个迷你框架来从方法执行一些 spring bean，`main()`而不是部署和运行成熟的 webapp 来启动这些 bean。它看起来像这样：

```
public abstract class BaseLauncher {

    private static final String APP_CONTEXT_PATH = "com/project/dev/launchers/launchersApplicationContext.xml";
    static ApplicationContext context = new ClassPathXmlApplicationContext(APP_CONTEXT_PATH);

    protected void launch() {
        context.getBean(getClass()).perform();
        //The process never ends so we want to know when we can kill it
        System.out.println("launcher finished");
    }

    @Transactional
    abstract protected void perform();

} 
```

示例启动器如下所示：

```
@Component
public class ParamLoaderLauncher extends BaseLauncher {
    @Inject
    ParamLoader paramLoader;

    public static void main(String[] args) {
        new ParamLoaderLauncher().launch();
    }

    @Override
    protected void perform() {
        paramLoader.loadParams();
    }
} 
```

这一切都很好，除了当调用的 bean 方法完成时，应用程序继续运行，我们需要手动终止它。我想这与使用 spring 应用程序上下文有关。也许一些特殊的弹簧相关的非守护线程启动了？如果是这样，有什么方法可以杀死它？或者在如此简单的代码中可能还有什么其他原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:13:00.430

对于独立应用程序（不在任何容器中运行），[需要注册](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-shutdown)shutdownhook，以便在应用程序退出时干净关闭spring容器。

# android - 添加时出错 Android中的标签

> ID：13044927
> 
> 赞同：1
> 
> 时间：2012-10-24T07:51:33.270
> 
> 标签：android

请帮助我，declare-styleable 标记处的错误：未找到标记

```
<?xml version="1.0" encoding="UTF-8"?>
<resources>
    <declare-styleable name=”Gallery1”&gt;
    <attr name=”android:galleryItemBackground” />
    </declare-styleable>
</resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:12:55.903

您使用的是“而不是”。请尝试以下操作：

```
<?xml version="1.0" encoding="UTF-8"?>
    <resources>
    <declare-styleable name="Gallery1">
    <attr name="android:galleryItemBackground" />
    </declare-styleable>
</resources> 
```

# asp.net - 在多服务器环境中从 HttpContext.Current.Session 读取失败

> ID：13044928
> 
> 赞同：1
> 
> 时间：2012-10-24T07:51:37.327
> 
> 标签：asp.net, .net, ajax, session

环境：IIS 7.5、.Net 4.0

我在多服务器环境中读取 HttpContext.Current.Session 时遇到问题。

首先在我的代码中，我将一个对象存储在 HttpContext.Current.Session 中，然后尝试再次读取它。读取（执行多次）随机失败，我怀疑它与调用命中的服务器有关。对象的存储和读取是通过 ajax 调用完成的，一位同事告诉我将对象存储在 Page_Load 中。我相当怀疑，事实证明，使用这种方法并没有解决问题。

存储：

```
 [WebGet(ResponseFormat = WebMessageFormat.Json)]
    public Stream GetHierarchy(string invId, string zoomLevel)
    {
        Hierarchy hierarchy = new Hierarchy();

        try
        {
            hierarchy = businessLogic.GetHierarchy(invId);
            HttpContext.Current.Session["hierarchy"] = hierarchy;
        }
        catch (Exception ex)
        {
            throw ex;
        }

        return new MemoryStream(Encoding.UTF8.GetBytes(JsonConvert.SerializeObject(hierarchy)));
    } 
```

阅读：

```
 [WebGet(ResponseFormat = WebMessageFormat.Json)]
    public Stream GetCustomer(string invId, string includeDetails, string zoomLevel)
    {
        Hierarchy hierarchy = (Hierarchy)HttpContext.Current.Session["hierarchy"];

        Customers customers = null;
        Customer customer = null;

        if (hierarchy != null) {
            customers = hierarchy.Customers;
            if (customers != null)
            {
                try
                {
                    customer = (from e in customers.DiagramCustomers where e.InvId == invId select e).ToList()[0];
                }
                catch (Exception ex)
                {
                }
            }
        }

        return new MemoryStream(Encoding.UTF8.GetBytes(JsonConvert.SerializeObject(customer)));
    } 
```

在单个服务器环境中一切正常...

谁能阐明我在这里面临什么样的问题？最好如何解决它:-)

./CJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:54:43.740

使用 Sql Server 存储 Asp.NET 会话状态 [http://support.microsoft.com/kb/317604](http://support.microsoft.com/kb/317604)

# django - Jquery ajax 和 Django - 后数据到达格式错误

> ID：13044931
> 
> 赞同：0
> 
> 时间：2012-10-24T07:51:52.180
> 
> 标签：django, jquery, post

我正在通过 Jquery ajax 发布一个如下所示的帖子：

```
$.ajax({
    type: 'POST',
    url: "/sandbox/read_demands/",
    data: {
        "partner_ref": "PH",
        "return_field": ["summary", "details"]
    },
    success: [read_demands_response],
    dataType: 'json'
}); 
```

然后，我使用一个简单的 Django 视图在服务器端接收数据，该视图仅将 request.POST 打印到日志中。然后数据如下所示：

```
{u'return_field[]': [u'summary', u'details'], u'partner_ref': [u'PH']} 
```

如您所见，键“return_field”已变为“return_field[]”，“partner_ref”的值现在是一个列表。到底是怎么回事？我是否在 jquery 帖子中遗漏了一些明显的东西，导致我的数据格式错误，或者你认为这个错误来自其他地方吗？我试图排除不同的可能性，直到找到问题的原因。

这是 jquery 1.8.2 和 Django 1.4 顺便说一句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:07:04.863

第一个只是 jQuery 是 jQuery。出于他们自己最熟悉的原因，jQuery 的制造者认为 PHP 是编写服务器端应用程序的唯一方法，并且 PHP 期望具有多个值的字段具有`[]`后缀 - 因此，如果您不提供后缀，它会添加它。你只需要像在 Django 中那样使用它。

但是，第二个不是错误。这就是 Django QueryDict 的工作方式：任何值都可以有多个项目，因此它们将始终表示为一个列表。但是，`request.POST['partner_ref']`将正确地给出单个值。事实上，要访问另一个键的两个值，您需要执行`request.POST.getlist('return_field[]')`.

**编辑**：正如评论中指出的，`$.ajaxSettings.traditional = true;`修复了 jQuery 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:39:20.573

我一直在处理同样的问题，并发现了这个相关的问题。

[如何获取通过 Ajax 发布的 Django 中的数组](https://stackoverflow.com/questions/12101658/how-to-get-an-array-in-django-posted-via-ajax)

答案建议使用

```
request.GET.getlist('data') 
```

# jquery - 动画 DIV 的高度和宽度变化

> ID：13044934
> 
> 赞同：-1
> 
> 时间：2012-10-24T07:52:11.600
> 
> 标签：jquery, html, jquery-animate, height, width

我将如何为 div 的高度和宽度变化设置动画？不会有会触发动画的事件，而是会在（this）div 的大小发生变化的任何时候发生的动画。这个想法是当 div 中的内容或多或少时，对 div 的大小变化进行动画处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:07:16.853

在 CSS3 中，您可以在任何元素上设置 'transition' 属性，这将为您提供您想要的效果，而无需担心事件触发。

可以指定动画的**属性**、**持续时间**和**功能**（类型），如下图：

```
#divWithAnimation
{
    transition: height 1s linear;
} 
```

虽然 IE 不支持属性“transition”，但其他浏览器使用自己的前缀，如下：

```
#divWithAnimation
{
  -webkit-transition: height 1s linear;
  -moz-transition: height 1s linear;
  -ms-transition: height 1s linear;
  -o-transition: height 1s linear;
  transition: height 1s linear;
} 
```

您应该在样式表中使用所有这些，以便为所有可用的浏览器提供支持。可以在[W3Schools 网站](http://www.w3schools.com/css3/css3_transitions.asp)上找到有关过渡（以及 CSS3 的其他酷特性）的更多信息和教程。

有一个非常好的[CSS3 生成器](http://css3generator.com/)，可以为所有浏览器生成代码。肯定会推荐它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:58:33.570

CSS3 过渡肯定是最好的方式 - 非常干净，并且您让浏览器完成工作。但是，如果您需要 IE 中的支持，jQuery animate 是一个不错的选择。

它并不像 coule 那样简单，因为您不能`resize()`在 div 上收听，只能在窗口上收听。

不过有一些插件可用，比如这个：[http ://www.jqui.net/demo/mutate/](http://www.jqui.net/demo/mutate/)

# ios - collectionView:cellForItemAtIndexPath: 永远不会被调用

> ID：13044936
> 
> 赞同：5
> 
> 时间：2012-10-24T07:52:24.170
> 
> 标签：ios, uicollectionview, uicollectionviewcell

我有一个 UICollectionView，我只是想让它显示出来。我在界面构建器中将委托和数据源附加到文件的所有者。

```
collectionView:numberOfItemsInSection: 
```

被调用就好了。

我已经搞砸了几个小时，只是无法弄清楚......

任何帮助都会很棒，在此先感谢！

这是完整的来源。对不起，如果它有点乱。

.h 文件

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import "PinAnnotation.h"

#import "Jot.h"

@interface JotCardViewController : UIViewController <MKMapViewDelegate, UICollectionViewDataSource, UICollectionViewDelegateFlowLayout>

@property (nonatomic,strong) Jot* jot;

@end 
```

.m 文件

```
#import "JotCardViewController.h"

#import "JotViewController.h"

#import <QuartzCore/QuartzCore.h>

@interface JotCardViewController ()

@property (nonatomic,strong) JotViewController *detailViewController;
@property (nonatomic,strong) IBOutlet UIView *cardFrontView;
@property (nonatomic,assign,getter = isFlipped) BOOL flipped;
@property (nonatomic,weak) IBOutlet MKMapView *mapView;
@property (nonatomic,strong) IBOutlet UICollectionView *collectionView;

@property (nonatomic,weak) IBOutlet UILabel *jotTitle;
@property (nonatomic,weak) IBOutlet UILabel *jotDate;
@property (nonatomic,weak) IBOutlet UILabel *sunriseSunsetDelta;
@property (nonatomic,weak) IBOutlet UILabel *jotNotes;

@end

@implementation JotCardViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    [[self mapView] setRegion:MKCoordinateRegionMakeWithDistance(CLLocationCoordinate2DMake([self.jot.latitude floatValue], [self.jot.longitude floatValue]), 1000, 1000)];
    //TODO: if there is no jot location - say that their isn't (maybe text over the map display)
    CLLocation *tempLocation = [[CLLocation alloc] initWithCoordinate:CLLocationCoordinate2DMake([self.jot.latitude doubleValue], [self.jot.longitude doubleValue]) altitude:0 horizontalAccuracy:0 verticalAccuracy:0 timestamp:nil];
    [self dropPin:tempLocation];

    [self.collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@"Cell"];

    [self.collectionView reloadData];
}

- (void) viewWillAppear:(BOOL)animated
{
    [self refreshUIFromJot];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)flipToDetails:(id)sender
{
    if (![self isFlipped]) {
        if (!self.detailViewController) {
            JotViewController *jotViewController = [[JotViewController alloc] initWithNibName:@"JotView" bundle:[NSBundle mainBundle]];
            jotViewController.jot = self.jot;
            self.detailViewController = jotViewController;
            self.detailViewController.view.frame = self.cardFrontView.frame;
            self.detailViewController.view.layer.cornerRadius = 10.0;
        }

        [UIView transitionFromView:self.cardFrontView toView:self.detailViewController.view duration:0.33 options:UIViewAnimationOptionCurveLinear |UIViewAnimationOptionTransitionFlipFromRight completion:^(BOOL finished) {
            [self setFlipped:YES];
        }];
    } else {
        [UIView transitionFromView:self.detailViewController.view toView:self.cardFrontView duration:0.33 options:UIViewAnimationOptionCurveLinear |UIViewAnimationOptionTransitionFlipFromLeft completion:^(BOOL finished) {
            [self setFlipped:NO];
        }];
    }
}

- (void) setJot:(Jot *) jot {
    _jot = jot;
    [self refreshUIFromJot];
}

- (void) refreshUIFromJot
{
    [[self jotTitle] setText:self.jot.summary];
    [[self jotDate] setText:self.jot.recorddate];
    [[self jotNotes] setText:self.jot.note];
    [[self sunriseSunsetDelta] setText:@""];
}

-(void) dropPin: (CLLocation*)newLocation{

    for (id<MKAnnotation> pin in self.mapView.annotations){
        MKAnnotationView* anView = [self.mapView viewForAnnotation: pin];
        if (anView){
            [self.mapView removeAnnotation:pin];
            NSLog(@"Pin removed");
        }
    }

    PinAnnotation *pin = [[PinAnnotation alloc] initWithCoordinates:newLocation.coordinate placeName:nil description:nil];
    [self.mapView addAnnotation:pin];

}

#pragma  mark - MKMapViewDelegate methods

- (void) mapViewDidFinishLoadingMap:(MKMapView *)mapView
{
    NSLog(@"Map!");
}

#pragma mark - UICollectionView DataSource

- (NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section
{
    return 1;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];
    //cell.backgroundColor = [UIColor colorWithPatternImage:[self.results objectAtIndex:indexPath.row]];
    return cell;

    //###
    /*
    NSSet *jotImages = self.jot.images;
    NSSortDescriptor *imageNameDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"imageName" ascending:YES];
    NSArray *sortedJotImages = [jotImages sortedArrayUsingDescriptors:@[imageNameDescriptor]];
    */
    //###
}

#pragma mark - UICollectionViewDelegate
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    // TODO: Select Item
}
- (void)collectionView:(UICollectionView *)collectionView didDeselectItemAtIndexPath:(NSIndexPath *)indexPath {
    // TODO: Deselect item
}

#pragma mark – UICollectionViewDelegateFlowLayout

- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath
{
    CGSize retval = CGSizeMake(100, 100);
    return retval;
}

- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section
{
    return UIEdgeInsetsMake(50, 20, 50, 20);
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T23:23:09.390

我遇到了类似的问题。`cellForItemAtIndexPath`没有被调用。拉出我的头发几分钟后，我`collectionView` `registerClass:forCellWithReuseIdentifier`从`viewDidLoad`方法中删除了。

做完之后，`cellForItemAtIndexPath`开始被叫。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T07:21:18.330

我有一个类似的问题，这是我的解决方案：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath 
```

没有被调用是因为 collectionViewFlowLayout 的高度的 itemSize 太大。

```
[self.myCollectionViewFlowLayout setItemSize:CGSizeMake(320, 548)]; 
```

如果我将高度更改为 410，它将执行 cellForItemAtIndexPath。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-04T10:27:55.577

我发现我有一个错误的设置自定义流布局类导致我出现问题。恢复为 Flow 布局，效果很好。

# c# - 组织/架构网 站的最佳方式

> ID：13044937
> 
> 赞同：4
> 
> 时间：2012-10-24T07:52:28.037
> 
> 标签：c#, asp.net-mvc, architecture

我必须对我们的网站组织/架构做出关键决定。

这是我的背景。我们的主要网站将在不同国家/地区提供。即使业务几乎相同，也有一些特定于区域的功能。当然，它涉及翻译，还涉及主/布局和业务流程。这些差异是由于不同的立法。一开始我们会有 4 或 5 个推导，但目标可能是 20 个。

一个简单的比较可能是 Stackoverflow 和 Stack Exchange Network。网站之间的主要功能大同小异，但有特定于网站的业务规则。

在我看来，基本上有两种可能的方法：

*   **拥有一个管理地区/国家特定功能的网站**。这会将核心功能保留在同一站点上，但会涉及所有区域之间的耦合。代码中还存在“IF”的风险。开发和可维护性是最佳的（对所有人的唯一修复）但有风险（可能会破坏其他人）。一种方法是结合可移植区域和自定义视图引擎（父文件夹中的通用视图模板和子文件夹中的派生）
*   **每个地区/国家拥有一个网站** 将实施一个通用网站。会有一些共同的组件，但每个网站都有自己的生命周期；开发和可维护性更容易但成本高（如果有很多派生）

请注意，该组织的另一个影响是部署和可用性。

组织这个的最佳方式是什么？

编辑：我们已经在 MVC 方面有一些经验，并且作为一般指导方针，我们知道 MVC 最佳实践：瘦控制器、DI、ViewModels、动作过滤器......

# javascript - 在 :javascript Haml 定义中使用 Ruby 循环

> ID：13044938
> 
> 赞同：0
> 
> 时间：2012-10-24T07:52:50.867
> 
> 标签：javascript, html, ruby, json, haml

我有一个要声明的 JSON，`:javascript`但我不熟悉 Ruby。JSON如下：

```
:javascript
  var collections = {
    feed: [{'label': 'All', 'url': 'All', 'isSelected': false}]
  }; 
```

但我希望`feed`变量中的以下部分重复 20 次：

```
{'label': 'All', 'url': 'All', 'isSelected': true} 
```

我如何在 Haml 中使用 Ruby 来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:06:02.173

单程：

```
:javascript
   var collections = {
     feed: [<%="{'label': 'All', 'url': 'All', 'isSelected': false}" * 20 %>]
   }; 
```

另一种方式：

```
:javascript
  var colections = {
    <%=(["feed: {'label': 'All', 'url': 'All', 'isSelected': false}"] * 20).join(',')%>
  } 
```

# asp.net - Asp.net 创建 LinkBut ton 并在单击另一个 LinkBut ton 时附加 onclick 事件

> ID：13044942
> 
> 赞同：1
> 
> 时间：2012-10-24T07:53:07.670
> 
> 标签：asp.net, linkbutton

所以.. 我在我的页面上动态创建 LinkBut​​tons，如下所示：

```
LinkButton lb = new LinkButton();
lb.Click += new EventHandler(lb_Click); 
```

单击其中一个链接按钮时，我需要知道单击了哪个链接，然后创建另一个链接按钮并在其上附加一个 onclick 事件。（我怎样才能做到这一点？如果我理解正确，单击事件不能附加在（这种情况下）lb_Click 函数中，那么我还有什么办法可以做到这一点？

编辑：

为了使这个问题更容易理解，这是我尝试解决的方法，但它不起作用：

```
LinkButton lb = new LinkButton();
lb.click += new EventHandler(lb_Click);

void lb_Click(object sender, EventArgs e)
{
    LinkButton lb2 = new LinkButton();
    lb2.click += new EventHandler(lb2_Click);
}

void lb2_Click(object sender, EventArgs e)
{
    //do something
} 
```

单击 lb2 不会触发 lb2_Click 事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:59:04.553

您可以尝试使用此代码 - 基于`sender argument`

```
LinkButton lb = new LinkButton();
lb.Id= "Test1";
lb.Click += new EventHandler(lb_Click);

LinkButton lb2 = new LinkButton();
lb2.Id= "Test2";
lb2.Click += new EventHandler(lb_Click);

void LinkButton_Click(Object sender, EventArgs e) 
{
   var yourControl = (LinkButton)sender;
   var id = yourControl.Id;
   if(id == "Test1")
   {
      ...
   }
   else if(id == "Test2")
   {
      ...
   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-20T20:50:48.213

是的，是的，是的：我参加晚会**非常非常**晚。
*但*供任何来这篇文章的人将来参考：

您的方法被标记为`private`（省略访问修饰符，默认为`private`），这意味着它们的可访问性不足以调用它们。

相反，使用`protected`修饰符来确保它们被正确调用。

像这样：

```
LinkButton lb = new LinkButton();
lb.click += new EventHandler(lb_Click);

protected void lb_Click(object sender, EventArgs e)
{
    LinkButton lb2 = new LinkButton();
    lb2.click += new EventHandler(lb2_Click);
}

protected void lb2_Click(object sender, EventArgs e)
{
    //do something
} 
```

希望这可以帮助一些未来的访客:)

# apache-flex - 堆积柱形图中的动态系列有时不显示

> ID：13044945
> 
> 赞同：1
> 
> 时间：2012-10-24T07:53:16.093
> 
> 标签：apache-flex, actionscript, charts, flex4, adobe

我有一个堆积柱形图，其中可能会出现不同的数据。如果垂直轴中的 autoAdjust 设置为 true，则会出现问题，然后某些系列未显示（因为轴值未达到系列值的范围）。如果我们将 autoaxis 设置为 false 并手动设置最大值和最小值，那么所有系列都可以正确显示，但只有在我们已经知道数据的情况下才能进行手动轴设置。我的数据是动态的，不知道最大轴值。这个问题有什么解决方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:32:12.027

您可以添加一个函数，使用“render”事件循环遍历图表内的所有系列数据。此事件在渲染任何内容之前调度，可用于计算图表可以渲染的最大值。

如果您想利用以下示例中的“min”计算，请将垂直轴“baseAtZero”属性设置为“false”。

这是示例：

```
<mx:Canvas 
    xmlns:mx="http://www.adobe.com/2006/mxml"
    creationComplete="init()"
    click="generateRandomData()"
    >

    <mx:Script>
        <![CDATA[
            import mx.charts.chartClasses.AxisBase;
            import mx.charts.chartClasses.ChartBase;
            import mx.charts.chartClasses.Series;
            import mx.collections.ArrayCollection;

            [Bindable]
            public var testData:ArrayCollection = new ArrayCollection();

            public function init():void{
                generateRandomData();
            }

            public function generateRandomData():void{
                var randomNumberOfObject:int = Math.floor((Math.random() * 100));
                var i:int = 0;
                var resultData:ArrayCollection = new ArrayCollection();

                if(randomNumberOfObject <= 1){
                    randomNumberOfObject = 2;
                }

                while(i < randomNumberOfObject){
                    var dataObject:Object = new Object();
                    dataObject.date = i;
                    dataObject.value = Math.floor((Math.random() * 10));
                    dataObject.value2 = Math.floor((Math.random() * 10));
                    dataObject.value3 = Math.floor((Math.random() * 10));

                    resultData.addItem(dataObject);
                    i++;
                }

                testData = resultData;
            }

            public function adjustVerticalLabels(e:Event = null):void{
                var chartSeries:Array = (e.currentTarget as ChartBase).series;
                var vAxis:* = null;
                var size:int = chartSeries.length;
                var max:Number = 0;
                var min:Number = NaN;

                for each(var series:* in chartSeries){
                    if(vAxis == null){
                        vAxis = (series as Series).getAxis(ChartBase.VERTICAL);
                    }
                    if(series.enabled == true){
                        var dataField:String = series.yField;
                        for each(var item:* in series.dataProvider){
                            if(item[dataField] > max){
                                max = item[dataField];
                            }
                            if(isNaN(min)){
                                min = item[dataField];
                            }else{
                                if(item[dataField] < min){
                                    min = item[dataField];
                                }
                            }
                        }
                    }
                }

                vAxis.minimum = min;
                if(max > 2){
                    vAxis.maximum = max;
                }else{
                    //Used when the chart values are very small
                    vAxis.maximum = 2;
                }
            }
        ]]>
    </mx:Script>

    <mx:BarChart id="lineChart"
        width="100%" height="100%"
        showDataTips="true"
        dataTipMode="single"
        seriesFilters="{[]}"
        dataProvider="{testData}"
        render="adjustVerticalLabels(event)"
        >
        <mx:horizontalAxis>
            <mx:CategoryAxis  id="testXAxis" 
                dataProvider="{testData}" 
                categoryField="date"
                />
        </mx:horizontalAxis>

        <mx:verticalAxis>
            <mx:LinearAxis id="textYAxis"
                baseAtZero="false"
                />
        </mx:verticalAxis>

        <mx:series>
            <mx:ColumnSeries 
                yField="value" 
                displayName="Value"
                />
            <mx:ColumnSeries 
                yField="value2" 
                displayName="Value2"
                />
            <mx:ColumnSeries 
                yField="value2" 
                displayName="Value3"
                />
        </mx:series>
    </mx:BarChart>

</mx:Canvas> 
```

# html - 我的网络组件没有显示

> ID：13044947
> 
> 赞同：0
> 
> 时间：2012-10-24T07:53:48.420
> 
> 标签：html, web-component

我的网络组件没有显示。Chrome确实支持这个吗？

我已经使用`is`属性和使用 Javascript 进行了尝试。两者都不起作用。

索引（头部）：

```
 <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="js/jquery/jqueryMobile/jquery.mobile-1.2.0.css" />
        <script src="js/jquery/jquery-1.8.2.js"></script>
        <script src="js/jquery/jqueryMobile/jquery.mobile-1.2.0.js"></script>
        <link rel="components" href="x-mycomp.html"/>
        <script>
            var el = document.createElement('x-mycomp');
            alert(el); // shows: [object HTMLUnkownElement]
        </script> 
```

索引（正文）：

```
 <div id="page1" data-role="page">
        <div is="x-mycomp"></div>

    </div> 
```

x-mycomp.html：

```
<element extends="div" name="x-mycomp">
    <template>
        <content>
            <div>
                <div data-role="header">
                    <div>
                        Log in
                    </div>
                    <a id="bt_register" data-role="button">register</a>
                </div>
                <div data-role="content">
                    <form>
                        <input id="username" placeholder="username" type="text"/>
                        <input id="password" placeholder="password" type="password"/>
                        <a id="bt_login" data-role="button">Log in</a>
                    </form>
                </div>
            </div>
        </content>
    </template>
</element> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:44:07.510

Chrome 尚不支持此功能。所以在那之前这是正确的答案。

# iphone - 如何在iphone的相机上裁剪图像？

> ID：13044955
> 
> 赞同：0
> 
> 时间：2012-10-24T07:54:15.660
> 
> 标签：iphone

您好正在使用相机应用程序。我需要在 UIImagepicker 拍摄和使用的图像的特定区域裁剪图像。我完成了在相机中添加叠加层和裁剪图像。但我得到的裁剪图像不适合我的 Rect 大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T13:29:02.173

**裁剪从 x=0 开始；y=0；直到宽度=125，高度=128；**

```
UIImage *image =imageView.image;
CGRect cropRect = CGRectMake(0, 0, 125,128);
CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], cropRect);
[imageView setImage:[UIImage imageWithCGImage:imageRef]]; 
CGImageRelease(imageRef); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:58:26.713

尝试使用 Matt Gemmell 的 UIImage+ProportionalFill 类别。此类别通过裁剪/缩放功能扩展了 UIImage。

# javascript - javascript继承，构造函数调用了两次

> ID：13044957
> 
> 赞同：2
> 
> 时间：2012-10-24T07:54:33.307
> 
> 标签：javascript, inheritance

```
function Parent (arg1, arg2) {

    alert(arg1);

    this.member1 = arg1;
    this.member2 = arg2;
};

Parent.prototype.update = function () {

    // parent method update
};

function Child (arg1, arg2, arg3) {

    Parent.call(this, arg1, arg2);
    this.member3 = arg3;
};

Child.prototype = new Parent;

Child.prototype.update = function () {

    // overwritten method update
};

function init () {

    var childObject = new Child(false, false, false);
    childObject.update();
} 
```

结果是两个警报

1.  不明确的
2.  错误的

为什么会出现两次警报？我已经搜索过了，但还没有找到任何东西 + 不知道要搜索什么。

结果应该是一个带有“假”的警报，还是我错了？

多谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T08:00:56.353

通过使用构造函数`Parent`来创建原型`Child`，构造函数被调用，这是你的第一个警报`undefined`。

为了创建一个仍然使用相同原型链但在创建原型时不调用父构造函数的原型，您需要在其间添加另一个步骤。

```
Child.prototype = (function() {
  var Base = function() {};
  Base.prototype = Parent.prototype;
  return new Base();
}()); 
```

这将创建一个匿名函数（称为`Base`），其原型设置为`Parent`类的`Child`原型，然后将原型分配给将保留继承的新函数，但在创建原型链`Base`时不调用构造函数`Parent`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:58:25.253

当您创建 Parent 的新对象时有一个警报，当您创建`Child.prototype = new Parent;`child 的新对象时有一个警报，`var childObject = new Child(false, false, false);`

# c# - 在 Windows 应用商店 XAML 应用中安装客户端证书

> ID：13044964
> 
> 赞同：6
> 
> 时间：2012-10-24T07:55:09.253
> 
> 标签：c#, xaml, windows-8, winrt-xaml

我想在 Windows Store XAML 应用程序中使用客户端证书身份验证。使用 makecert 我创建了一个自签名 CA 和客户端证书，身份验证在 IIS/ASP.NET + 浏览器（IE10、Chrome 等）中运行良好。现在我想在 Windows Store 应用程序中使用它，但不确定如何实际安装证书。我有一个导入到 IE10 的 cert.pfx 文件。这是我用来通过 SSL 使用 HTTP 服务的代码。

```
HttpClientHandler handler = new HttpClientHandler();
handler.ClientCertificateOptions = ClientCertificateOption.Automatic;

HttpClient client = new HttpClient(handler); 
```

不确定 ClientCertificateOption.Automatic 和 ClientCertificateOption.Manual 之间有什么区别。当我尝试连接证书时，未将证书提供给服务器并且出现 401 错误，我猜测证书不存在于应用程序证书存储中，因此没有任何内容被发送到服务器。那我该如何安装证书呢？

我应该使用 CertificateEnrollmentManager.ImportPfxDataAsync() 方法吗？如果是这样，我如何将 .pfx 转换为“Base64 编码的 PFX 消息”pfx 是否应该包含私钥？

或者我应该使用此处描述的证书扩展：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh464981.aspx#certificates_extension_content](http://msdn.microsoft.com/en-us/library/windows/apps/hh464981.aspx#certificates_extension_content)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T22:25:28.237

以下代码将加载 pfx 文件并创建可由 ImportPfxDataAsync 方法使用的 base64 编码字符串：

```
StorageFolder packageLocation = Windows.ApplicationModel.Package.Current.InstalledLocation;
StorageFolder certificateFolder = await packageLocation.GetFolderAsync("Certificates");
StorageFile certificate = await certificateFolder.GetFileAsync("YourCert.pfx");

IBuffer buffer = await Windows.Storage.FileIO.ReadBufferAsync(certificate);
string encodedString = Windows.Security.Cryptography.CryptographicBuffer.EncodeToBase64String(buffer); 
```

这假设您将证书放在“证书”文件夹中。

您可能想看看[http://www.piotrwalat.net/client-certificate-authentication-in-asp-net-web-api-and-windows-store-apps/](http://www.piotrwalat.net/client-certificate-authentication-in-asp-net-web-api-and-windows-store-apps/)这是端到端的在 windows 8 应用程序中使用客户端证书与 asp.net web api 进行通信的场景。

# javascript - javascript替换为正则表达式

> ID：13044967
> 
> 赞同：0
> 
> 时间：2012-10-24T07:55:26.180
> 
> 标签：javascript, regex

我有一个包含很多的字符串

```
<span style="font-size:8px;">...</span> 
<span style="font-size:14px;"> ...</span> 
```

我想将所有字体大小值替换为给定值。所以我需要一个正则表达式来替换“font-size:”和“px;”之间的所有字符

Ps 我使用 Rangy JS 库

```
var iframe = $('iframe')[0];
            var sel =  rangy.getIframeSelection(iframe);
            selected_html=sel.toHtml();
            selected_html.replace("font-size:<some regexp>px;", "36"); 
```

你能建议一个合适的正则表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:02:36.510

```
.replace(/(font-size:)\d+(px;)/g, "$1"+36+"$2"); 
```

# c# - 使用 c# 中的按钮从月历中获取文本框中的日期

> ID：13044968
> 
> 赞同：1
> 
> 时间：2012-10-24T07:55:36.173
> 
> 标签：c#

单击窗口窗体的按钮后，我想在文本框中使用月历日期。表单打开时日历应隐藏，单击按钮后日历可见。

我在 Visual Studio 2008 中使用 c#。所以请根据这个工具给我回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:03:34.440

为此使用[DateTimePicker](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker%28v=vs.90%29.aspx)类。它具有您所描述的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:06:55.333

尝试使用[`Control.Show()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.show.aspx)方法和[`Control.Visible`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.visible.aspx)属性：

```
private MonthCalendar _monthCalendar;

public Form1()
{
    InitializeComponent();
    // invisible on startup
    _monthCalendar.Visible = false;
    _monthCalendar.MaxSelectionCount = 1;
}

private void button1_Click(object sender, EventArgs e)
{
    //show when needed
    _monthCalendar.Show();
}   

private void textBox1_Enter(object sender, EventArgs e)
{
    _monthCalendar.Show();
}

private void textBox1_Leave(object sender, EventArgs e)
{
    if (!_monthCalendar.Focused)
        _monthCalendar.Visible = false;
}

private void monthCalendar_DateSelected(object sender, DateRangeEventArgs e)
{
    var monthCalendar = sender as MonthCalendar;
    textBox1.Text = monthCalendar.SelectionStart.ToString();
}

private void monthCalendar_Leave(object sender, EventArgs e)
{
    var monthCalendar = sender as MonthCalendar;
    monthCalendar.Visible = false;
} 
```

# php - 将 PHP 导入 Flash 时出现错误 1009

> ID：13044969
> 
> 赞同：0
> 
> 时间：2012-10-24T07:55:37.197
> 
> 标签：php, actionscript-3, flash

一段时间以来一直在缩小这个问题的范围，感觉我快要解决它了

我收到错误错误 #1009：无法访问空对象引用的属性或方法。

```
var request:URLRequest = new URLRequest("http://blahblahblah.com/questions.php");
request.method = URLRequestMethod.GET;

var loader2:URLLoader = new URLLoader();
loader2.addEventListener(Event.COMPLETE, completeHandler);
loader2.dataFormat = URLLoaderDataFormat.VARIABLES;
loader2.load(request);

function completeHandler(event:Event) :void{
var questions:String = event.target.data.questions;
var questionsArray:Array=questions.split("/");
questionbox.question.text = questionsArray[numLoops];
trace("QuestionLoaded");
} 
```

有趣的是当我添加一个“。” 到 URL 的末尾，所以我有“.PHP”。我得到一个不同的错误代码错误 #2101：传递给 URLVariables.decode() 的字符串必须是包含名称/值对的 URL 编码查询字符串

这是我的 PHP 输出

```
?questions=The+Sea+Swallow+is+an+alternative+name+for+which+bird%3F%2FIn+which+sport+would+you+see+a+Western+Roll%3F%2FWho+is+better+known+as%0B+Herbert+Khaury%3F%2FDiet+is+the+parliament+of+which+country%3F%2FWhat+is+the+real+first+name+of+Coco+Chanel%3F%2FThe+Aztecs+were+natives+of+which+country%3F%2FWhat+was+invented+by+O.A.+North+in+1869%3F%2FKing+Zog+was+the+ruler+of+which+country%3F&answers=Seagull%2FPenguin%2FTern%2FCormorant&correct=0%2F0%2F1%2F0 
```

在此先感谢您的帮助，我真的为此绞尽脑汁。怀疑一个空变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:29:52.087

去掉前面的`?`，它会被解析为 key 的一部分，这会导致 key 以 结尾`?questions`，因此`questions`将是未定义的，尝试调用`split`会抛出错误。

`?`仅在 URL 中用于分隔 URL 和查询字符串。

# scala - 访问抽象类 (Scala) 中的构造函数创建的字段

> ID：13044975
> 
> 赞同：2
> 
> 时间：2012-10-24T07:56:01.603
> 
> 标签：scala, compiler-errors, abstract-class

我有一个实现一种方法的抽象类。

如何访问参数`internalValue`（由抽象类构造函数设置？）

```
abstract class Value(internalValue:Int) {
    def equal( v:Value ): Boolean

    def notEqual( v:Value ): Boolean = {

        //here I get an error on v.internalValue:
        //"value internalValue is not a member of Value"
        (internalValue != v.internalValue)
    }
}

case class Value1(internalValue:Int) extends Value(internalValue){
    def equal( v:Value1 ): Boolean = {
        //this works correctly
        (internalValue == v.internalValue)
    }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T07:58:03.240

定义`internalValue`为`val`：

```
abstract class Value(val internalValue: Int) 
```

或者如果您担心封装（`internalValue`顾名思义），您可以使用`private val`：

```
abstract class Value(private val internalValue: Int) 
```

根本不声明任何修改是~~有效等价（？）~~类似于`private[this]`这意味着：*只有这个特定的实例`Value`才能访问这个私有字段*。

# c# - 如何在运行时从代码隐藏更改 CSS 键的值？

> ID：13044980
> 
> 赞同：0
> 
> 时间：2012-10-24T07:56:37.887
> 
> 标签：c#, asp.net, css

我有一个相当简单的页面，它查询 Web 服务以从 SQL 服务器中提取数据，返回不同大小的通用列表。我正在尝试做的是在运行时调整 div 的高度，在 foreach 循环的每次迭代中向现有 CSS 键添加一定数量的像素，以便投影列表不会溢出容器 div。

我用来将列表放在页面上的代码如下：

```
int total = 0;
lstUsageServices.Text = string.Empty;
lstUsageRequests.Text = string.Empty;
if (txtAccount.Text != string.Empty)
{
soapClient = new UsageService.ServiceSoapClient();
foreach (UsageClient.UsageService.Usage current in soapClient.GetUsage(txtAccount.Text, startPicker.SelectedDate, endPicker.SelectedDate))
{
lstUsageServices.Text += current.Service + "<br />";
lstUsageRequests.Text += current.Requests.ToString() + "<br />";
total += current.Requests;                        
}
lstUsageServices.Text += "<strong>Total</strong>";
lstUsageRequests.Text += "<strong>" + total.ToString() + "</strong>"; 
```

我想做的是在 foreach 中添加一行来引用 div：

```
<div class="main" runat="server" id="mainDiv"> 
```

并增加 CSS "height:Xpx;" 每次迭代。

我希望有人能提供帮助，看起来这应该不是一件难事！提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:01:44.980

一个简单的方法可以是

```
mainDiv.Attributes.CssStyle.Add("height", "Xpx"); 
```

# javascript - Eloquent Javascript 第 6 章的示例 6.3 需要这么复杂吗？

> ID：13044981
> 
> 赞同：0
> 
> 时间：2012-10-24T07:56:39.713
> 
> 标签：javascript

*我将添加一个免责声明，除非您熟悉[Eloquent Javascript](http://eloquentjavascript.net/) ，否则本文的上下文可能没有意义。*

在[Eloquent Javascript (Chapter 6)](http://eloquentjavascript.net//chapter6.html)的在线版中，我试图理解代码**示例 6.3**的解释。

该示例专门涵盖了**splitParagraph()**函数，但是我在代码示例中添加了所有附加函数以使其在本文底部的示例中独立工作，但具体而言，我试图理解作者为什么建议这样做走很长的路要找到字符串的长度。

作者建议使用**A)**：

```
var end = reduce(Math.min, text.length, map(indexOrEnd, ["*", "{"])); 
```

为什么不只使用**B)**：

```
var end = text.length; 
```

我曾尝试使用**B)**，结果似乎是一样的。我可以弄清楚**A)**发生了什么，但我不明白这样做有什么意义。

这是完整的代码转储，如果有人复制并粘贴它，我在底部进行了修改以输出它：

```
function reduce(combine, base, array) {
  forEach(array, function (element) {
    base = combine(base, element);
  });
  return base;
}

function forEach(array, action) {
  for (var i = 0; i < array.length; i++)
    action(array[i]);
}

function map(func, array) {
  var result = [];
  forEach(array, function (element) {
    result.push(func(element));
  });
  return result;
}

function splitParagraph(text) {

    function indexOrEnd(character) {
        var index = text.indexOf(character);
        return index == -1 ? text.length : index;
    }

    function takeNormal() {
        var end = reduce(Math.min, text.length, map(indexOrEnd, ["*", "{"]));
        var part = text.slice(0, end);
        text = text.slice(end);
        return part;
    }

    function takeUpTo(character) {
        var end = text.indexOf(character, 1);
        if (end == -1)
            throw new Error("Missing closing '" + character + "'");

        var part = text.slice(1, end);
        text = text.slice(end + 1);

        return part;
    }

  var fragments = [];

  while (text != "") {
    if (text.charAt(0) == "*")
      fragments.push({type: "emphasised", content: takeUpTo("*")});
    else if (text.charAt(0) == "{")
      fragments.push({type: "footnote", content: takeUpTo("}")});
    else
      fragments.push({type: "normal", content: takeNormal()});
  }
  return fragments;
}

console.log(splitParagraph("hello world")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:05:58.090

使用**方法 A**在出现`{`or时断开字符串`*`。所以 splitParagraph 函数会破坏包含这些字符的文本。

IE

```
var x = splitParagraph("Hello boy *you're the best* friend {for me}"); 
```

x 将包含

```
[
  { type: "normal", content "hello boy " },
  { type: "emphasised", content "you're the best" },
  { type: "normal", content " friend " },
  { type: "footnote", content "for me" }
] 
```

使用**方法 B** x 将包含

```
[
  { type: "normal", content "Hello boy *you're the best* friend {for me}" }
] 
```

# java - 什么时候可以在该类的方法中创建该类的对象？

> ID：13044983
> 
> 赞同：31
> 
> 时间：2012-10-24T07:56:51.963
> 
> 标签：java, class

```
public class TestClass(){
    public static void main(String []args) {
        TestClass t1 = new TestClass();
        t1.anything();
    }
} 
```

在同一个类的定义中创建对象不奇怪吗？因为然后作为响应 - 这个对象创建一个新对象，然后这个新对象创建另一个，无限循环开始永远不会结束，直到内存已满。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-24T07:58:46.623

> 在同一个类的定义中创建一个对象，而不是响应对象创建一个新对象然后这个新对象创建另一个对象并开始无限循环，这并不奇怪吗？

不，main 方法仅在您运行程序时运行一次。它不会再次执行。因此，该对象只会被创建一次。

想想你的主要方法是在你的课堂之外。它创建您的类的实例，并使用创建的实例。因此，当您从方法创建实例时`main`，会调用构造函数来初始化实例的状态，然后当构造函数返回时，会执行 main 方法的下一条语句。

实际上，您可以认为`main`方法不是类实例状态的一部分。

但是，如果您在构造函数中创建了类的实例（例如 0-arg），并将引用作为实例引用变量，那么这将变成无限递归。

```
public class A {
    private A obj;
    public A() {
        obj = new A();  // This will become recursive creation of object.
                        // Thus resulting in StackOverflow 
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T08:01:49.057

如果您尝试执行以下操作，则只会出现无限循环（堆栈溢出错误）：

```
public class TestClass {
    public TestClass() {
        TestClass t = new TestClass();
    }
} 
```

在其他地方，您尝试创建 class 的对象`TestClass`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T08:16:12.273

```
public class TestClass{
  public static void main(String []args) {
    TestClass t1 = new TestClass();
    t1.anything();
  }
} 
```

这是一个完全有效的代码。调用该`main`方法时，不存在之前的实例`TestClass`（不需要，因为该`main`方法是`static`）。

```
public class Test2{
  public Test2 clone(){
    return new Test2();
  }
} 
```

这也是完全有效的。当您创建 Test2 的新实例时，它包含该`clone`方法，但该方法不会自动执行。只有在`clone`调用该方法时，才会再创建一个 Test2 实例。

```
public class MyLinkedList{
  MyLinkedList next;
  MyLinkedList(int elems){
    if(elems>0){
      next = new MyLinkedList(elems-1);
    }else{
      next = null;
    }
  }
} 
```

即使构造函数使用相同的构造函数创建新实例也是完全有效的，因为创建受条件保护，因此创建实例*有时会*触发新创建。

```
public class Fail{
  public Fail(){
    new Fail();
  }
} 
```

是这里唯一有问题的例子。编译器不会抱怨。它*可以*被翻译成字节码并且*可以*被执行。但是，在运行时，您会导致堆栈溢出：

*   分配了一个新的失败
*   它的无参数构造函数被调用
*   构造函数尝试创建一个新的 Fail
*   分配了一个新的失败
*   它的无参数构造函数被调用
*   ...

编译器允许这样做，因为通常编译器*无法阻止所有无限递归*。编译器*允许任何可以翻译成字节码*的东西。

但是，如果编译器检测到方法或方法链*无条件地调用自身，则编译器**可能会*发出*警告*。

 ** * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T07:59:44.340

这并不奇怪。我知道的所有面向对象的语言都允许这样做。代码在语义上是对象定义的一部分，但实际上它可以被认为与任何给定对象的实际状态分开。所以没有循环，因为对象构造不会调用你的方法（当然，除非它调用了——那么你就有问题了）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T07:59:55.377

当您使用 new 创建对象构造函数时，会调用初始化实例变量的构造函数，直到您的超类的所有构造函数都被调用为止。如果您将一些代码放在每次创建对象时都会运行的构造函数中

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-24T08:03:15.967

当程序启动时，它会执行 main 方法。在java中，您不能在类之外创建方法。所有方法都必须封装在一个类中。因此，作为程序入口点的 main 方法必须在一个类中。当你运行这个程序时， main 方法将运行一次并执行其中的代码。在您的情况下，它会创建一个封闭类的对象`TestClass`。这不必发生。它也可以在这个类之外创建对象。正如@adarshr 的回答中所解释的，您只会得到一个无限循环。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-02T21:14:38.357

这一点都不奇怪。你看，`main()`方法是执行的起点。形象地说，java 是“盲目的”（看不到您告诉它执行/运行的内容），除非它“看到”了该`main()`方法。在“看到”该`main()`方法之后，它现在有能力执行随后的其他指令，因此作为外卖，该`main()`方法首先不属于它自己的类中的对象。

而对于递归，它只会在您执行@Rohit Jain 所说的那样时发生。或者根据您的代码，您不调用`anything`，而是调用它`main()`本身。

```
 public static void main(String []args) {
        TestClass t1 = new TestClass();
        main(String[] args);
    }
} 
```

引用变量`t1`实际上没有调用`main`，因为它是静态的。好消息是，`main`不是由您的代码调用，而是由“jvm”调用，所以严格来说，您不能从那里删除静态。它会导致一些好的错误消息明确告诉您静态应该在那里。这就是为什么您`main()`在上面的代码片段中看到没有被对象调用的原因。

如果您执行这些操作，则除此之外还会发生递归，您可以安全地在它自己的类中创建一个对象。尽管如此，我不建议这样做。让一个类拥有该`main()`方法并在该 Main 类（包含 main 方法的类）中实例化（创建对象）其他类。这样你就可以运行一次代码。*

# oop - 关联和聚合的区别

> ID：13044984
> 
> 赞同：8
> 
> 时间：2012-10-24T07:57:08.323
> 
> 标签：oop, uml

我理解聚合和组合之间的区别，但我在关联方面有点挣扎。我目前的理解是，当“它们相互使用”时，类之间存在关联，例如，在方法调用期间将一个对象传递给另一个对象。也可以看看：

[http://www.codeproject.com/Articles/330447/Understanding-Association-Aggregation-and-Composit](http://www.codeproject.com/Articles/330447/Understanding-Association-Aggregation-and-Composit)

两个对象都是独立存在的，与聚合相反，没有一个对象是另一个对象的容器类。这是否意味着两个对象都必须具有其他对象的副本（例如 1:m 关系）或关联如何“存储”。任何反馈将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T07:54:01.043

从 UML 上层结构 2.4.1：

> 关联声明关联类型的实例之间可以存在链接。链接是一个元组，关联的每一端都有一个值，其中每个值都是端类型的一个实例。（UML 上层建筑，第 37 页）

不多也不少。而且很模糊。正因为如此，它也很难理解。我定义的（在我教授的课程中）是从依赖到组合的链接层次结构，其中：

1.  `A`从to 的依赖`B`意味着`A`使用`B`但间接（例如通过接收它的实例并将它们转发给其他对象）。
2.  关联 from `A`to`B`表示直接`A`使用`B`，（例如通过调用方法）
3.  `A`从to聚合`B`意味着它`B`是`A`（语义上）的一部分，但`B`可以共享，如果`A`被删除，`B`则不会被删除。请注意，这并没有说明“is part”是如何实现的。
4.  组合 from `A`to`B`就像聚合，`B`不能共享，如果`A`被删除，它的所有聚合（`B`s）也会被删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T07:59:48.397

聚合是一种关联关系，其中关联可以被认为是包含类“拥有”包含的类，并且该关系的生命周期没有定义。

关联是一种“有-A”关系。

例子：-

```
 public class Person  
  {  
   private final Name name;  
   private Address currentAddress;  

   //...  
 } 
```

在本例中，Person Has-A name 和 Has-A Address，因此 Person 和 Name 以及 Person 和 Address 之间存在关联。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T07:59:17.763

关联描述了一个或多个类的实例之间的关系。用 UML 参考手册的话来说，“关联是把一个系统结合在一起的粘合剂”。

聚合是一种关联形式，其中存在“整体-部分”关系。你可能会说，如果一个类飞机有一个类引擎，那么这就形成了一个“整体”关系。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-22T14:00:15.010

## 聚合

让我们设定条款。Aggregation 是 UML 标准中的一个元术语，表示组合和共享聚合，简称为*shared*。它经常被错误地命名为“聚合”。这很糟糕，因为组合也是一种聚合。据我了解，您的意思是您了解“共享聚合和组合”。

从UML标准：

> 共享聚合的精确语义因应用领域和建模者而异。

例如，我还没有找到关于聚合假设的多重性的词。

## 协会。

UML 3.4.1 标准的定义：

> 关联描述一组元组，其值引用类型化的实例。关联的实例称为链接。链接是一个元组，关联的每一端都有一个值，其中每个值都是端类型的一个实例。

聚合关系是关联的子类。

关联是基于关系的。IT 是模型的粘合剂。

但是您的感觉并没有说谎-由于没有严格定义共享聚合，因此关联和聚合关联之间也没有任何严格定义的边界。工具的作者和建模者必须自己设置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-26T06:15:45.120

**协会**

它表示两个或多个对象之间的关系，其中所有对象都有自己的生命周期并且没有所有者。关联的名称指定对象之间关系的性质。这由实线表示。

让我们以教师和学生之间的关系为例。多个学生可以与一个老师关联，一个学生可以与多个老师关联。但是对象之间没有所有权，并且都有自己的生命周期。两者都可以独立创建和删除。

**聚合**

它是一种特殊的关联形式，其中所有对象都有自己的生命周期，但有所有权。这表示“整体或部分”关系。这由一个空心菱形和一条线表示。

让我们以部门和教师之间的关系为例。一个教师可能属于多个部门。因此，老师是多个部门的一部分。但是如果我们删除一个部门，Teacher Object 不会被销毁。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-01-24T08:12:28.650

这取决于上下文。

**协会**：一个人开车，关注呼叫者和被呼叫者的关系。

**聚合**：男人有车，注重车主和会员的关系。

**组成**：一个人有一张嘴，专注于所有者和成员，但所有者由成员组成，这意味着他们共享相同的生命周期。

感觉我在说中式英语。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-17T07:15:51.903

**协会**

关联是所有对象都有自己的生命周期并且没有所有者的关系。让我们以教师和学生为例。多个学生可以与一个老师关联，一个学生可以与多个老师关联，但是对象之间没有所有权，并且都有自己的生命周期。两者都可以独立创建和删除。

**聚合**

聚合中的对象有自己的生命周期，但有所有权。子对象不能属于另一个父对象。让我们以部门和老师为例。单个教师不能属于多个部门，但如果我们删除部门的教师对象不会破坏。我们可以考虑“有”的关系。

**作品**

它是一种强大的聚合类型。子对象没有它们的生命周期，如果父对象删除，所有子对象也将被删除。让我们再举一个 House 和 room 之间关系的例子。房子可以包含多个房间，房间没有独立的生命，任何房间不能属于两个不同的房子，如果我们删除房子房间会自动删除。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-23T14:19:37.640

对象类型之间的关联对这些类型的对象之间的关系进行分类。例如，关联`Committee`-has- `ClubMember`-as-chair，在下面显示的类图中可视化为一条连接线，可以将关系分类 FinanceCommittee-has-PeterMiller-as-chair、RecruitmentCommittee-has-SusanSmith-as-chair和 AdvisoryCommittee-has-SarahAnderson-as-chair，其中对象 PeterMiller、SusanSmith 和 SarahAnderson 的类型为`ClubMember`，对象 FinanceCommittee、RecruitmentCommittee 和 AdvisoryCommittee 的类型为`Committee`。

![协会委员会有分会会员为主席](../Images/f218fabd56e6cfd3b675dc1304c12bd8.png)

另请参阅我的[替代 CodeProject 文章](http://www.codeproject.com/Articles/880451/Really-Understanding-Association-Aggregation-and-C)。

# php - 多数组迭代

> ID：13044985
> 
> 赞同：0
> 
> 时间：2012-10-24T07:57:14.083
> 
> 标签：php, arrays

嗨，我有一个功能是：

```
public function getpopularAction()
{
    $businessReviewMapper = new Application_Model_Mapper_BusinessReviewsMapper();
    $result = $businessReviewMapper->getTotalPopular();

    for ($i = 0; $i < count($result); $i++)
    {
        $rotd[$i] = $businessReviewMapper->getROTD($result[$i]['review_id']);     

        for ($j = 0; $j < count($rotd); $j++)
        {
            $rotd[$j]['u_img'] = $this->view->getLoginUserImage(
                $rotd[$j]['social_id'], $rotd[$j]['login_type'], null, null, large
            );
        }
     }

     print_r($rotd); 
     exit;
} 
```

我得到的结果是：

```
Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [review_id] => 161
                    [review_desc] => tgi goooood....................
                    [user_id] => 2
                    [rating] => 3
                    [review_date] => 20121022203529
                    [name] => zlippr
                    [social_id] => 12345678
                    [login_type] => facebook
                    [user_unique_name] => zlippr
                    [city] => Kuala Lumpur
                    [business_name] => TGI Friday Kuala Lumpur
                )

            [u_img] => /public/images/image_not_found.png
        )
) 
```

我不知道问题出在哪里，但是*u_img*没有正确获取，不确定数组循环是否正确执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:06:37.727

不知道内循环是干什么用的。如果您尝试检索与每个 rotd 对应的 loginuserimage，则需要执行以下操作：

```
 for ($i = 0; $i < count($result); $i++)
    {
       $rotd[$i] = $businessReviewMapper->getROTD($result[$i]['review_id']);     

       $rotd[$i]['u_img'] = $this->view->getLoginUserImage(
            $rotd[$i]['social_id'],$rotd[$i]['login_type'],null,null,large);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:15:16.180

通过查看您的输出，您的结果在数组的第二层内，这意味着您应该将变量替换`getLoginUserImage`为

```
$rotd[$i]['social_id'],$rotd[$i]['login_type'] 
```

至

```
$rotd[$i][0]['social_id'],$rotd[$i][0]['login_type'] 
```

# html - Twitter Bootstrap 手风琴全高

> ID：13044986
> 
> 赞同：7
> 
> 时间：2012-10-24T07:57:14.720
> 
> 标签：html, css, twitter-bootstrap, accordion

我有一个带有手风琴/可折叠的 Bootstrap 页面。我希望手风琴占据页面的整个高度（减去顶部的导航栏）。

有没有人有关于如何最好地实现这一目标的指示？如果不能选择 CSS 解决方案，我愿意使用 JavaScript。

这是标记：

```
 <body>
    <div class="navbar navbar-inverse">
      <div class="navbar-inner">
          Navigation
      </div>
    </div>

    <div class="accordion" id="accordion2">
      <div class="accordion-group">
        <div class="accordion-heading">
          <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
            Collapsible Group Item #1
          </a>
        </div>
        <div id="collapseOne" class="accordion-body collapse in">
          <div class="accordion-inner">
            Anim pariatur cliche...
          </div>
        </div>
      </div>
      <div class="accordion-group">
        <div class="accordion-heading">
          <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
            Collapsible Group Item #2
          </a>
        </div>
        <div id="collapseTwo" class="accordion-body collapse">
          <div class="accordion-inner">
            Anim pariatur cliche...
          </div>
        </div>
      </div>
        <div class="accordion-group">
        <div class="accordion-heading">
          <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree">
            Collapsible Group Item #2
          </a>
        </div>
        <div id="collapseThree" class="accordion-body collapse">
          <div class="accordion-inner">
            Anim pariatur cliche...
          </div>
        </div>
      </div>
    </div>
  </body>
</html> 
```

[http://jsfiddle.net/Ye2xq/2/](http://jsfiddle.net/Ye2xq/2/)

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-02-20T22:38:59.410

不确定这是否正是您要查找的内容，但您可以执行类似于顶部导航栏的粘性页脚的操作，假设高度不会改变

**CSS**

```
.navbar {background-color:#999;}
.accordion {background-color:yellow; top:18px; bottom:0; position:absolute;} 
```

这是小提琴

[http://jsfiddle.net/Ye2xq/31/](http://jsfiddle.net/Ye2xq/31/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T16:42:37.013

假设您的意思是整个手风琴，您有两个潜在的解决方案。

首先，如果可以设置父级的固定高度，您可以简单地使用`height:100%;` 示例标记，例如：

HTML `<div class="page"> <div class="accordion"> content </div> </div>`
CSS `.page { height: 800px; //or whatever } .accordion { height: 100%; }`

或者，因为这通常是不可能的。您可以使用 javascript/jQuery。像这样的东西会起作用：

```
jQuery(document).ready(function($) {
    //cache the accordion object to variable
    var accordion = $('div.accordion');

    //set accordion object equal to target divs height 
    accordion.height($('div.page').height());

}); 
```

示例：http: [//jsfiddle.net/Ye2xq/11/](http://jsfiddle.net/Ye2xq/11/)

# memory-management - RabbitMQ 内存管理和复制

> ID：13044987
> 
> 赞同：4
> 
> 时间：2012-10-24T07:57:28.527
> 
> 标签：memory-management, erlang, queue, rabbitmq, message-queue

我目前正在评估 RabbitMQ 来管理队列。我想知道 RabbitMQ 如何管理内存中的队列项。

在此发布者订阅者示例中[http://www.rabbitmq.com/tutorials/tutorial-three-python.html](http://www.rabbitmq.com/tutorials/tutorial-three-python.html) ![rabbitMQ 发布者订阅者](../Images/ae5e9c7bee9e43cac7eb7d53856c56f9.png)

是否为每个订阅者（消费者）创建队列？例如，如果我有两个消费者，那么我将内存使用量加倍来存储消息？

我的印象是，如果我在一个队列上附加多个工作人员，那么它将成为一个工作队列，每个消费者都收到不同的消息。

假设我正在为此构建聊天服务器。我需要为每个消费者创建一个队列吗？并且内存中的每条消息都会乘以连接的用户数？还是内存中只有一条消息，并且每个队列都有指向该消息的指针。

同样在主题消息的示例中。[http://www.rabbitmq.com/tutorials/tutorial-five-python.html](http://www.rabbitmq.com/tutorials/tutorial-five-python.html)

![主题讯息](../Images/4a14982d8daa193500604f76f7a1bf06.png)

假设我有 1kb 消息。那么2个队列有2kb的内存使用吗？Q1、Q2 和说消息匹配所有的绑定键。

如果我添加了另一个队列来听让我们说`lazy.blue.*`Q3。这会在内存中创建一个新的队列项吗？并复制数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-22T01:04:13.367

来自：[http ://www.rabbitmq.com/blog/2011/01/20/rabbitmq-backing-stores-databases-and-disks/](http://www.rabbitmq.com/blog/2011/01/20/rabbitmq-backing-stores-databases-and-disks/)

如果 Rabbit 需要节省内存并写入磁盘，则只保存一条消息。

以及它的队列特定状态是什么。第二条信息允许 RabbitMQ 启动，从磁盘恢复消息和队列，并确保每个队列中的消息与 RabbitMQ 关闭时的顺序相同。

因此 RabbitMQ 的默认后备存储由一个节点全局消息存储组成，它只关心将消息内容写入磁盘；和每个队列队列索引，它使用非常不同的格式将每个队列数据的每个消息写入磁盘“

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T01:30:29.280

在第一个示例中，您有一个发布者将消息发送到特定交换，并且该交换绑定到两个队列。

关于为每个消费者创建一个队列（我假设这就是你所说的“订阅者”的意思），这完全取决于你。在第一个图中，没有显示消费者，但您可以配置消费者以侦听这些队列中的一个或两者上的消息。队列（不是消费者）会影响你的记忆；相比之下，交换在内存成本方面很便宜。

对于第二个图表，是的，创建第三个队列“Q3”将在内存中创建一个新队列。我对你的最后一个问题有点困惑，你似乎在问如果交换发送一条匹配所有绑定模式的消息会发生什么？如果这发生在此处，则消息将简单地发送到所有三个队列。主题类型的交换（如示例中的交换设置）只是将消息路由到绑定键与消息的路由键匹配的所有队列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:03:28.500

我不是 rabbitmq 黑客，但常识说每个队列都应该有一个指向一个唯一消息实例的指针。

# c++ - 获取所有 Windows 内核对象及其安全权限

> ID：13044991
> 
> 赞同：2
> 
> 时间：2012-10-24T07:57:56.617
> 
> 标签：c++, windows, security, winapi, kernel

我需要获取所有 Win-Kernel 对象的访问权限列表；我所做的：

```
for (int i=0; i<9999; i++)
    GetKernelObjectSecurity( i, ... ) //result in security_descriptor
    GetSecurityDescriptorDacl( security_descriptor, ... ) // result in lpbDaclPresent
    if (lpbDaclPresent)
        //lpbDaclPresent - need to get 
```

> 如果 DACL = Null -> "所有人都可以做所有事情"
> 
> 如果 DACL != Null -> 解析 DACL 掩码

* * *

我在正确的轨道上？顺便说一句，我有：

约 300 个不带 DACL 的句柄

大约 100 个使用 DACL 的句柄（在 Windows 7 上测试）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:54:10.297

如果您想通过 HANDLES 进行暴力破解，请不要在 9999 处停止。遍历所有 32 位值。

或者，您可以枚举所有 Usermode-Process-Handles：http: [//forum.sysinternals.com/howto-enumerate-handles_topic18892.html](http://forum.sysinternals.com/howto-enumerate-handles_topic18892.html)

这种方法的优点是，您知道 Handles 原始流程，以便在需要时使用 DuplicateHandle。

# java - 如何在 JTabbedPane 中的选项卡之间共享 Java 中的信息

> ID：13044998
> 
> 赞同：0
> 
> 时间：2012-10-24T07:58:21.143
> 
> 标签：java, swing, jtable, jtextfield, jtabbedpane

我有一个选项卡显示我从数据库中提取的 JTable 中的用户列表，另一个选项卡显示想要编辑用户详细信息然后将它们保存到数据库的 JTextField。

用户的独特功能之一是 userID(Integer)，它能够根据选择的行从 JTable 中获取。

现在我想使用该用户 ID 并用数据库中的数据填充 JTextFields 以允许编辑，因此保存下面的新值是 UI（不能发布图像）

基本上是如何在两个选项卡之间共享 Integer 变量

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:10:17.507

*   使用[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)创建[JFrame](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)（在[JScrollPane](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)中）

*   将[带有 JMenuItems 的 JPopup](https://stackoverflow.com/questions/7423533/jtable-with-jpopupmenu)添加到`JTable`

*   覆盖[ListSelectionListener.SINGLE...](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)以避免多重选择

*   使用[JTextComponents](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)创建[JDialog](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

*   仅创建`JDialog`一次，将其重用于来自 的另一个事件`JPopup`，

*   [将JDialog#setDefaultCloseOperation](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html#setDefaultCloseOperation%28int%29)覆盖为 HIDE_ON_CLOSE，然后您将只使用`setVisible(true/false)`

*   从选定的行中获取数据并填写所需`JTextComponents`的`JDialog`，然后调用`JDialog#setVisible(true)`包裹在`invokeLater()`

*   用语句放在那里`JButtons`（取消并保存），放在那里代表JDBC成功的变量，`JDBC``UPDATE ....``boolean`

*   成功刷新`XxxTableModel`，然后隐藏`JDialog`

*   Swing GUI 的所有更新 ( `JTable`, `XxxTableModel`)[必须在 EDT 上完成](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:03:29.040

您需要有自己的选项卡之间的通信机制。例如，您可以在第一个选项卡中引用第二个选项卡，以便在表中选择行时，您可以在第二个组件中调用特定方法。如果您想将它们解耦，您可以添加一个侦听器接口，第二个组件实现该接口并将其自身添加为第一个组件的侦听器，依此类推。