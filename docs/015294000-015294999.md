# StackOverflow 问答 15294000-15294999

# function - Corona sdk，功能运行顺序错误？

> ID：15294005
> 
> 赞同：0
> 
> 时间：2013-03-08T12:27:36.553
> 
> 标签：function, windows-8, lua, coronasdk, lua-table

我正在尝试将一些数据保存到表中。我从数据库中获取数据，它工作正常。我的问题是数据没有保存在表中。它是一个类似于 table = {} 的 lua 表，而不是数据库表。

也许它已保存，但看起来打印是在保存之前完成的，即使我在之后调用它们。事实上，即使我先调用它，我的网络请求似乎也是在我的程序中最后完成的。

我真的很想知道这其中的原因。有任何想法吗？

这是代码：

```
---TESTING!

print("Begin teting!")

--hej = require ( "test2" )

local navTable = {
    Eng_Spd = 0,
    Spd_Set = 0
}

local changeTab = function()
    navTable.Eng_Spd = 2
end

printNavTable = function()
    print("navTable innehåller: ")
    print(navTable.Eng_Spd)
    print(navTable.Spd_Set)
end 

require "sqlite3"
local myNewData 
local json = require ("json")
local decodedData

local SaveData2 = function()
    local i = 1
    local counter = 1
    local index = "livedata"..counter
    local navValue = decodedData[index]
    print(navValue)

    while (navValue ~=nil) do
        --tablefill ="INSERT INTO navaltable VALUES (NULL,'" .. navValue[1] .. "','" .. navValue[3] .."','" .. navValue[4] .."','" .. navValue[5] .."','" .. navValue[6] .."');"
        --print(tablefill)
        --db:exec(tablefill)
        if     navValue[3] == "Eng Spd" then navTable.Eng_Spd = navValue[4]
        elseif navValue[3] == "Spd Set" then navTable.Spd_Set = navValue[4]     
        else print("blah")
        end
        print(navTable.Eng_Spd)
        print(navTable.Spd_Set)
        counter=counter+1
            index = "livedata"..counter
                navValue = decodedData[index]           

    end 
end

local function networkListener( event )
    if (event.isError) then
            print("Network error!")
    else
            myNewData = event.response
            print("From server: "..myNewData)
            decodedData = (json.decode(myNewData))
    SaveData2()
    --db:exec("DROP TABLE IN EXISTS navaltable")
    end
end

--function uppdateNavalTable()
    network.request( "http://127.0.0.1/firstMidle.php", "GET", networkListener )

--end
changeTab()
printNavTable()
--uppdateNavalTable()
printNavTable()

print("Done!") 
```

这是输出：

```
Copyright (C) 2009-2012  C o r o n a   L a b s   I n c .
        Version: 2.0.0
        Build: 2012.971
Begin teting!
navTable innehÃ¥ller:
2
0
navTable innehÃ¥ller:
2
0
Done!
From server: {"livedata1":["1","0","Eng Spd","30","0","2013-03-15 11:35:48"],"li
vedata2":["1","1","Spd Set","13","0","2013-03-15 11:35:37"]}
table: 008B5018
30
0
30
13 
```

顺便说一句，navTable innehÃ¥ller 表示 navTable 包含。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T08:40:16.740

答案是 networklistener 与其余代码并行运行。

# database - 从 Excel 中生成的数据更新 Access

> ID：15294010
> 
> 赞同：0
> 
> 时间：2013-03-08T12:27:55.533
> 
> 标签：database, excel, ms-access, reporting

一旦问卷参与者提供了数据，我正在尝试找到将报告从 Access 提取到 Excel 并更新 Access 的最佳方法。

Access 中的数据非常复杂且庞大（包含在一个主表中 - 50+ 列和 200K+ 行） - 这并不容易让人眼前一亮。

我想从 Access 中提取报告（本质上是数据的一个子集 - N 中的 M 列）。该报告将由个人更新（即更新的值），并且需要反馈到 Access。

我正在寻找实现上述目标的最用户友好的方法。有没有人有任何想法？

Ps 明显的答案欢迎，我是一个完整的 Access/Excel 菜鸟 - 但有 MySQL、SQL Server 的背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:47:35.517

据我所知，没有单一的工具可以做到这一点，如果您想创建自己的工具，我建议您使用任何 .NET 语言、ADO.NET 和 Interop 从 Excel 读取数据并将数据读取到 Excel 中。如果您不想进行一些 .NET 编程，有一个名为[DBxtra](http://www.dbxtra.com)的报告工具，它以 Excel、Access 和许多数据库作为输入，并允许您将数据导出到 Excel（静态或动态）和其他格式。路线将是这样的：

1.- 从 DBxtra 中的 Access 数据库创建查询

2.- 将结果导出到 Excel（链接或静态工作表）

3.- 让您的用户更新 Excel 中的数据

4.- 使用 Excel 宏更新 Access 数据库中的数据。

要更新访问数据库，您需要在 Excel 文件中放入这样的宏：

```
Sub appProb()

    On Error GoTo 1

    Dim XLTable As TableDef

    Set Db = OpenDatabase(mdbFile)
    Set XLTable = Db.CreateTableDef("tblProbTemp")

    XLTable.Connect = "Excel 5.0;DATABASE=" & xlsFile
    XLTable.SourceTableName = "tblXLProb"
    Db.TableDefs.Append XLTable

    strSQL = "Insert into tblProb Select * FROM tblProbTemp"
    Db.Execute strSQL

1:
    Err.Clear
    On Error Resume Next
    Db.TableDefs.Delete "tblProbTemp"
    Db.Close

End Sub 
```

唯一值得注意的`tblXLProb`是命名范围。

注意：这个宏是从这里复制的：[http ://www.mrexcel.com/forum/microsoft-access/51157-update-access-records-excel.html](http://www.mrexcel.com/forum/microsoft-access/51157-update-access-records-excel.html)

# html - 使 Html Generic Control 跨越整个单元格，即使它是空的

> ID：15294011
> 
> 赞同：1
> 
> 时间：2013-03-08T12:27:55.923
> 
> 标签：html, css, asp.net, htmlgenericcontrol

我有一个 Html 通用控件（其中有一个跨度），单击它会运行 Javascript 方法。我还在控件中生成文本（读取：span），描述表中每个用户的编辑权限。然后我将该控件放入`asp:table`.

问题是它只在我单击生成的文本时运行该方法，只要用户有任何编辑权限就可以了。当用户不这样做时，单元格不包含任何文本。

我的问题是，如何使跨度覆盖整个单元格，是否为空？我希望能够单击单元格并运行该方法。

哦，跨度也是通过控件InnerHtml输入的。我不知道这是否重要，但你去吧。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:31:47.283

我认为您可以将 sytle 用于`Html Generic Control`.
将其宽度设置为固定宽度，例如`width:100px`或`min-width:100px;`。
假设跨度的 id 是`spn_Msg`那么你可以像这样使用

```
 spn_Msg.Style.Add("min-width", "100px!important"); 
```

或者，我已经测试过了，肯定会工作，请检查

```
 spn_Msg.Attributes.Add("class", "yourClass"); 
```

并在课堂上

```
 .yourClass{
     display: inline-block;
     *display: inline;/* for IE7*/
     *zoom:1;/* for IE7*/
     min-width: 150px;
 } 
```

## 资源

[在 IE 上具有最小宽度的内联跨度](https://stackoverflow.com/questions/9274841/inline-span-with-min-width-on-ie)

# php - 为什么 php 无法报告语法错误而 Apache 因分段错误而崩溃？

> ID：15294014
> 
> 赞同：2
> 
> 时间：2013-03-08T12:28:21.097
> 
> 标签：php, apache, segmentation-fault

我有一个类文件，其中包含一些错误代码，例如

```
 else{
            $stp->Object($a);               
            $abbr = $a->abbr;
        }
        asdf
    } 
```

我的理解是 php 应该正确显示错误消息，例如说“asdf”不是类或常量等。但是当我看到这段代码时，服务器因分段错误而崩溃，正如我的错误日志文件所说：

```
[Fri Mar 08 17:21:37 2013] [notice] child pid 8615 exit signal Segmentation fault (11) 
```

是否可以配置 php/apache 以正确处理这些错误？为什么 php 无法以某种可以理解的方式报告错误。我只在浏览器中看到“连接已重置”消息。

规范：安装了 XAMPP (php 5.3.1) MAC OS 10.6 Xdebuger

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:06:35.540

显然 Apache 出现了问题，因此无法正确显示，因为 Apache 子退出。

我曾经遇到过一些类似的错误，因为 PHP 错误重定向到包含相同错误的 PHP 错误文件（例如：ErrorDocument 500），因此它重定向到 PHP 错误页面等等......制作了一个重定向循环。

Apache 自杀是为了避免机器宕机。

* * *

您必须诊断是什么导致 Apache 死机。

为此，请安装“strace”，例如。在 debian 上：

```
apt-get install strace 
```

然后停止您的 Apache，并通过 strace 启动它：

```
strace -f /usr/sbin/apache2ctl 
```

重现您的问题，直到您的 Apache 子崩溃，并尝试查看 strace 日志以找出发生了什么。

希望这有帮助。

# php - 如何在 PHP 中通过特殊标签将 html 分隔为 2 个文件

> ID：15294016
> 
> 赞同：1
> 
> 时间：2013-03-08T12:28:24.757
> 
> 标签：php, html, domdocument

我试图通过我指向的标签将 html 文件分隔为 2。

例子

> ```
> <html>
>    <head>
>        <title>html title</title>
>    </head>
>    <body>
>        <h1>hello title</h1>
>        <p class="p2">
>          <span>here is some txt</span>
>        </p>
>        <p class="p2">
>          hello test, <a id="chp"></a>here is some txt
>        </p>
>    </body>
> </html> 
> ```

如果我定义分隔符是**<a id="chp"></a>**。这两个文件应该如下

文件 1：

> ```
> <html>
>    <head>
>        <title>html title</title>
>    </head>
>    <body>
>        <h1>hello title</h1>
>        <p class="p2">
>          <span>here is some txt</span>
>        </p>
>        <p class="p2">
>          hello test,
>        </p>
>    </body>
> </html> 
> ```

文件 2：

> ```
> <html>
>    <head>
>        <title>html title</title>
>    </head>
>    <body>
>        <h1>hello title</h1>
>        <p class="p2">
>          <span>here is some txt</span>
>        </p>
>        <p class="p2">
>          <a id="chp"></a>here is some txt
>        </p>
>    </body>
> </html> 
> ```

谁能告诉我如何实现这个？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:37:42.390

如果使用`SimpleXML`库加载 html，则可以遍历 HTML 对象来检查每个元素。如果您检查每个元素的子节点，在移动到下一个之前，对于标签为`a`且具有属性`id`= 'chp' 的元素，您可以中断复制并删除该元素之后的内容（直到父节点结束element)，克隆 SimpleXML 对象，然后用从以前的 SimpleXML 对象复制的内容替换整个元素。

# php - 使用 com 对象填充 microsoft word 表单字段

> ID：15294017
> 
> 赞同：1
> 
> 时间：2013-03-08T12:28:32.387
> 
> 标签：php, ms-word

给定一个带有表单字段的 microsoft word，我们可以使用一些 api 来填充它吗？我需要在我的 php web 应用程序的后端执行此操作。

而且，我已经看到了这个链接 [http://drewd.com/2007/01/25/reading-from-a-word-document-with-com-in-php](http://drewd.com/2007/01/25/reading-from-a-word-document-with-com-in-php)

有没有办法使用单词 com 对象来填写表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:01:06.353

这对我来说很好：

```
<?php
com_load_typelib('Word.Application');
$word = new COM("word.application");
$word->Documents->Open('C:/Doc1.doc');
$word->Visible = 1;
$word->ActiveDocument->FormFields("Text1")->Result = "something";
$word->ActiveDocument->Close(false);
$word->Quit();
unset($word);
?> 
```

# java - 在Java中查找第一个匹配项的最后一个索引

> ID：15294019
> 
> 赞同：0
> 
> 时间：2013-03-08T12:28:44.270
> 
> 标签：java, regex, find, match

假设我有这个字符串

```
String s ="stackjomvammssastackvmlmvlrstack" 
```

我想找到子字符串“stack”的第一个匹配项的最后一个索引，在我的示例中是 (index=)4。

我将如何做到这一点？

这是我到目前为止所做的

```
 Matcher m = pattern.matcher(s);
    int i=0;
    while (m.find())
    {    
        System.out.println(m.start());
        System.out.println(m.end());
    } 
```

但这显示了最后一场比赛的最后一个索引。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T12:34:38.930

您可以简单地找到单词的位置并添加它的长度：

```
String s = "stackjomvammssastackvmlmvlrstack";
String match = "stack";
int start = s.indexOf(match);
int end = (start + match.length() - 1);
System.out.println(match + " found at index " + start);
System.out.println("Index of last character of first match is " + end); 
```

如果您需要使用正则表达式，您的代码接近解决方案 - 您可以这样做：

```
String s = "stackjomvammssastackvmlmvlrstack";
String match = "s.*?k";
Matcher m = Pattern.compile(match).matcher(s);
if (m.find()) {
    System.out.println(m.end() - 1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:43:03.490

试试这个代码：

```
if (m.find())
        System.out.println(m.end() - 1); 
```

来自 Matcher.end() 的 java 文档：

```
Returns the offset after the last character matched. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:35:32.563

如果我理解你的问题是正确的，你正在尝试找到“堆栈”的第一个匹配项，然后获取最后一个索引......

您可以通过执行以下操作来完成此操作：

```
string toFind = "stack";
int firstOccurance = s.indexOf(toFind); (being s the word you posted above)
int whatYourLooking = firstOccurance + toFind.length() - 1; 
```

希望能帮助到你！;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T12:35:47.240

这边走？

```
String s ="stackjomvammssastackvmlmvlrstack";
String word = "stack";
int index = s.indexOf(word) + word.length() - 1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T12:36:14.323

```
final String input = "stackjomvammssastackvmlmvlrstack";
final String stack = "stack";
int start = input.indexOf(stack);
int end = start + stack.length() - 1; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T12:36:54.560

```
String s = "stackjomvammssastackvmlmvlrstack"; 
```

字符串栈 = "栈"; int index = s.indexOf(stack) + stack.length();

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-08T12:34:24.007

我编辑了我以前的答案

```
 String s ="stackjomvammssastackvmlmvlrstack";      
  String pattern = "stack";

Matcher m = pattern.matcher(s);
int i=0;
while (m.find())
{    
    System.out.println(m.start());
    System.out.println(m.start()+m.length());
} 
```

# payment - Moneybookers 响应是 GET 而不是 POST

> ID：15294022
> 
> 赞同：0
> 
> 时间：2013-03-08T12:28:50.063
> 
> 标签：payment

我已经在我们的网站上实施了 Moneybookers。

请求很好，付款进入我们的 Moneybookers 账户，钱从用户的账户中扣除。

响应 URL 是[https://example.com/finance/responsemoneybookers](https://example.com/finance/responsemoneybookers)

问题：

- 付款后，用户点击确认，用户被重定向到[https://example.com/finance/responsemoneybookers](https://example.com/finance/responsemoneybookers)

Moneybookers 应该 POST 交易数据，以便我们可以验证它，但不是 POST，它只是发出一个没有数据的标准 GET 请求。可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T16:01:20.617

添加

```
<input id="status_url" name="status_url" type="hidden" value="https://example.com/finance/responsemoneybookers" /> 
```

到你的表格

# iphone - 保存并在屏幕上显示高分

> ID：15294026
> 
> 赞同：0
> 
> 时间：2013-03-08T12:29:00.090
> 
> 标签：iphone, xcode, cocos2d-iphone

我有一个整数高分。但我不知道如何保存最好的并在屏幕上显示。

这是我的代码，谢谢你的帮助。

```
-(void)aggiungiPunti
{
    punteggio = punteggio +0001;
    [labelPunteggio setString:[NSString stringWithFormat:@"%d", punteggio]];
} 
```

在init方法中：

```
labelPunteggio = [CCLabelTTF labelWithString:@"0000" fontName:@"Marker Felt" fontSize:13];
labelPunteggio.position = ccp(30, altezzaSchermo -15);       
[self addChild:labelPunteggio]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:54:34.777

你可以这样做：在应用程序委托中编写此代码： `[[NSUserDefaults standardUserDefaults] setInteger:0 forKey:@"key"]`

在要显示最高分的班级中：

```
if([punteggio intValue]>[[[NSUserDefaults standardUserDefaults] valueForKey:@"key"]intValue])
{
  //display the score in the desired label
  [labelPunteggio setString:[NSString stringWithFormat:@"%d", punteggio]];
  // set the new best score in the userDefault
  [[NSUserDefaults standardUserDefaults] setInteger:[punteggio intValue] forKey:@"key"];
} 
```

# c# - 如何计算数据库中的公共字段？

> ID：15294027
> 
> 赞同：0
> 
> 时间：2013-03-08T12:29:05.737
> 
> 标签：c#, asp.net, sql-server-2008

```
Id    Name     City
1     Hits     Baroda
2     Ajay     Chennai
3     Hitesh   Baroda 
```

如何计算城市以及如何将其计数值存储在变量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T12:34:48.963

**如果您只想要城市的总数，请尝试查询**

```
SELECT COUNT(*) as TotalCityCount From TableName 
```

**如果您只想要城市的总数，请删除重复的城市**

```
SELECT COUNT(distinct City) as TotalCityCount  From   Your TableName 
```

**并尝试此 c# 代码：**

```
public DataView GetCityCount()
{
   using (SqlConnection con = new SqlConnection("Put Your Connection String"))// **must Put Your Connection String**
   {
      string sql1 = string.Format(@"SELECT COUNT(*) as TotalCityCount From TableName");
      SqlDataAdapter da1 = new SqlDataAdapter(sql1, con);
      DataSet ds1 = new DataSet();
      con.Open();
      da1.Fill(ds1);
      return ds1.Tables[0].DefaultView;
   }
} 

Public Void getTotal()
{
   DataView dv=GetCityCount();
   int totalcity=Convert.ToInt32(dv.Tables[0]["TotalCityCount"])//You get the total Count value in this totalcity variable
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T12:30:06.927

这将为您提供每个城市的人数，在这里您可以获得城市人数

```
SELECT 
      City, 
      COUNT(Id) as total 
 From 
      TableName 
 Group by 
       City 
```

结果将是

```
Baroda    2
Chennai   1 
```

或者，如果您只想要城市总数，请这样写

```
SELECT 
     COUNT(distinct City) as total 
From 
     TableName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:22:32.670

可能是你需要的这些

```
declare @Count int  --(or bigint)
Select @Count=count(city)
from Citytable
return @Count (or print @Count or Select @Count) 
```

# sql - 将 SQL 结果连接到单个字段中（sql compact）

> ID：15294028
> 
> 赞同：0
> 
> 时间：2013-03-08T12:29:06.587
> 
> 标签：sql, sql-server-ce

我目前正在尝试在 SQL CE 中运行以下查询：

`select column_name from information_schema.columns where table_name=[tablename]`

正如预期的那样，此查询返回一组属于指定表的列。返回的数据如下所示：

```
column1
column2
column3
column4 
```

但是，对于这种特殊情况，将结果作为单个字段中的单个字符串返回是非常重要的。

我想要的输出是：

`column1,column2,column3,column4`ETC...

如何在 SQL CE 中实现这一点？

# c# - 在 Windows 8 应用程序中从 c# 代码更改资源颜色

> ID：15294031
> 
> 赞同：2
> 
> 时间：2013-03-08T12:29:21.567
> 
> 标签：c#, windows, xaml, microsoft-metro, resourcedictionary

我想`SolidColorBrush`在应用程序运行时从 c# 代码更改 xaml 中的颜色。（这是来自 WinRT XAML Toolkit 的饼图，我想更改切片的颜色。）

```
<charting:Chart.Palette>
    <charting:ResourceDictionaryCollection>
        <ResourceDictionary>
            <SolidColorBrush x:Key="MyBrush" Color="#4586d8"/>
            <Style x:Key="DataPointStyle" TargetType="Control">
                <Setter Property="Background" Value="{StaticResource MyBrush}"/>
            </Style>
        </ResourceDictionary>
    </charting:ResourceDictionaryCollection>
</charting:Chart.Palette> 
```

由于 Win8 应用程序中没有 DynamicResource，这就是我尝试设置但没有成功的方式：

```
Color yellow = Color.FromArgb(0xff, 0xff, 0xb9, 0x01);
Application.Current.Resources["MyBrush"] = new SolidColorBrush(yellow); 
```

如何设置资源的颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:25:56.543

我认为在 WPF`DynamicResource`基本上每次请求时都会创建一个新实例，并会重新评估资源依赖层次结构的变化。取决于你想要做什么 - 你会在你的情况下以不同的方式处理它。您可以更新样式/模板以更改基本颜色，您可以更改视觉状态以使它们响应会更改颜色的状态更改，您可以编写附加行为（直接使用附加属性或一些开源 WinRT 行为实现），您将在数据点上设置将根据事件或绑定属性更新画笔，您可以遍历可视化树以更新基于颜色的颜色，或者您可以创建两个几乎相同的具有不同颜色的重叠图表控件并更改通过更改图表控件的可见性来显示颜色。

# c++ - 如何同步多线程程序中正在处理的数据？

> ID：15294032
> 
> 赞同：0
> 
> 时间：2013-03-08T12:29:31.993
> 
> 标签：c++, multithreading, boost, synchronization, boost-asio

我正在使用 boost 库来开发异步 udp 通信。在接收方接收到的数据正在被另一个线程处理。然后我的问题是，当我在另一个线程而不是接收器线程中读取接收到的数据时，它会给出修改后的数据或更新的数据，这不是应该的数据。我的代码在发送方和接收方处理无符号字符缓冲区数组。原因是我需要将无符号字符缓冲区视为数据包，例如缓冲区 [2] = Engine_start_ID

```
 /* global buffer to store the incomming data 
  unsigned char received_buffer[200];
  /*
     global buffer accessed by another thread
      which contains copy the received_buffer
  */
   unsigned char read_hmi_buffer[200];
   boost::mutex hmi_buffer_copy_mutex;

       void udpComm::start_async_receive() {
             udp_socket.async_receive_from(
             boost::asio::buffer(received_buffer, max_length), remote_endpoint,
             boost::bind(&udpComm::handle_receive_from, this,
             boost::asio::placeholders::error,
             boost::asio::placeholders::bytes_transferred));
      }
   /* the data received is stored in the unsigned char received_buffer data buffer*/

     void udpComm::handle_receive_from(const boost::system::error_code& error,
        size_t bytes_recvd) {
        if (!error && bytes_recvd > 0) {
            received_bytes = bytes_recvd;
                    hmi_buffer_copy_mutex.lock();
             memcpy(&read_hmi_buffer[0], &received_buffer[0], received_bytes);
                     hmi_buffer_copy_mutex.unlock();

                     /*data received here is correct  'cus i printed in the console
                      checked it
                     */
                    cout<<(int)read_hmi_buffer[2]<<endl;
       }

             start_async_receive();

       }
       /*  io_service  is running in a thread 
         */
       void udpComm::run_io_service() {
       udp_io_service.run();
        usleep(1000000);
         } 
```

以上代码是运行一个线程的异步udp通信

/* 我的第二个线程函数是 */

```
 void  thread_write_to_datalink()
         {    hmi_buffer_copy_mutex.lock();
           /* here is my problem begins*/
              cout<<(int)read_hmi_buffer[2]<<endl;
             hmi_buffer_copy_mutex.unlock();

           /* all data are already changed */

              serial.write_to_serial(read_hmi_buffer, 6);

         }
         /* threads from my main function
          are as below */

           int main() {
                 receive_from_hmi.start_async_receive();
              boost::thread thread_receive_from_hmi(&udpComm::run_io_service,
                &receive_from_hmi);
              boost::thread thread_serial(&thread_write_to_datalink);   
              thread_serial.join();
              thread_receive_from_hmi.join();
                 return 0;
        } 
```

/* Serial_manager 类包含用于从串口写入和读取的函数*/

```
 #include <iostream>
            #include <boost/thread.hpp>
            #include <boost/asio.hpp>
            #include <boost/date_time/posix_time/posix_time.hpp>

            using namespace boost::asio;

            class Serial_manager {
            public:

                Serial_manager(boost::asio::io_service &serial_io_service,char *dev_name);
                void open_serial_port();
                void write_to_serial(void *data, int size);
                size_t read_from_serial(void *data, int size);
                void handle_serial_exception(std::exception &ex);
                virtual ~Serial_manager();
                void setDeviceName(char* deviceName);

            protected:
                io_service &port_io_service;
                serial_port datalink_serial_port;
                bool serial_port_open;
                char *device_name;

            };

            void Serial_manager::setDeviceName(char* deviceName) {
                device_name = deviceName;
            }
            Serial_manager::Serial_manager(boost::asio::io_service &serial_io_service,char *dev_name):
                port_io_service(serial_io_service),
                datalink_serial_port(serial_io_service) {
                device_name = dev_name;
                serial_port_open = false;
                open_serial_port();
            }

            void Serial_manager::open_serial_port() {
                bool temp_port_status = false;
                bool serial_port_msg_printed = false;
                do {
                    try {
                        datalink_serial_port.open(device_name);
                        temp_port_status = true;
                    } catch (std::exception &ex) {
                        if (!serial_port_msg_printed) {
                            std::cout << "Exception-check the serial port device "
                                    << ex.what() << std::endl;
                            serial_port_msg_printed = true;
                        }
                        datalink_serial_port.close();
                        temp_port_status = false;
                    }

                } while (!temp_port_status);
                serial_port_open = temp_port_status;
                std::cout <<std::endl <<"serial port device opened successfully"<<std::endl;
                datalink_serial_port.set_option(serial_port_base::baud_rate(115200));
                datalink_serial_port.set_option(
                        serial_port_base::flow_control(
                                serial_port_base::flow_control::none));
                datalink_serial_port.set_option(
                        serial_port_base::parity(serial_port_base::parity::none));
                datalink_serial_port.set_option(
                        serial_port_base::stop_bits(serial_port_base::stop_bits::one));
                datalink_serial_port.set_option(serial_port_base::character_size(8));

            }

            void Serial_manager::write_to_serial(void *data, int size) {
                boost::asio::write(datalink_serial_port, boost::asio::buffer(data, size));
            }

            size_t Serial_manager::read_from_serial(void *data, int size) {
                return boost::asio::read(datalink_serial_port, boost::asio::buffer(data, size));
            }
            void Serial_manager::handle_serial_exception(std::exception& ex) {
                std::cout << "Exception-- " << ex.what() << std::endl;
                std::cout << "Cannot access data-link, check the serial connection"
                        << std::endl;
                datalink_serial_port.close();
                open_serial_port();
            }

            Serial_manager::~Serial_manager() {
                // TODO Auto-generated destructor stub
            } 
```

我认为我的问题领域是线程同步和通知，如果你能帮助我，我会很高兴。你不应该担心发送者它工作得很好，因为我已经检查过它在接收器线程接收到数据。我希望你能理解我的问题。

**编辑：**这是修改。我的整个想法是为手动飞行控制开发一个模拟，所以根据我的设计，我有通过 udp 通信发送命令的客户端应用程序。在接收端打算使用 3 个线程。一个线程接收来自棒的输入，即**void start_hotas()**第二个线程是从发送者（客户端）接收命令的线程：**void udpComm::run_io_service()**和第三个是 **void thread_write_to_datalink()**。

```
 /* a thread that listens for input from sticks*/
            void start_hotas() {
        Hotas_manager hotasobj;
        __s16 event_value; /* value */
        __u8 event_number; /* axis/button number */
        while (1) {
            hotasobj.readData_from_hotas();

            event_number = hotasobj.getJoystickEvent().number;
            event_value = hotasobj.getJoystickEvent().value;
            if (hotasobj.isAxisPressed()) {
                if (event_number == 0) {
                    aileron = (float) event_value / 32767;

                } else if (event_number == 1) {
                    elevator = -(float) event_value / 32767;

                } else if (event_number == 2) {
                    rudder = (float) event_value / 32767;

                } else if (event_number == 3) {
                    brake_left = (float) (32767 - event_value) /    65534;

                } else if (event_number == 4) {

                } else if (event_number == 6) {

                } else if (event_number == 10) {

                } else if (event_number == 11) {

                } else if (event_number == 12) {

                }
            } else if (hotasobj.isButtonPressed()) {

            }
            usleep(1000);

        }

    }

            /*
     * Hotas.h
     *
     *  Created on: Jan 31, 2013
     *      Author: metec
     */

    #define JOY_DEV  "/dev/input/js0"
    #include <iostream>
    #include <boost/thread.hpp>
    #include <boost/asio.hpp>
    #include <boost/date_time/posix_time/posix_time.hpp>
    #include <linux/joystick.h>

    bool message_printed = false;
    bool message2_printed = false;

    class Hotas_manager {
    public:
        Hotas_manager();
        virtual ~Hotas_manager();
        void open_hotas_device();

        /*
         *
         * read from hotas input
         * used to the updated event data and status of the joystick from the
         * the file.
         *
         */
        void readData_from_hotas();

        js_event getJoystickEvent() {
            return joystick_event;
        }

        int getNumOfAxis() {
            return num_of_axis;
        }

        int getNumOfButtons() {
            return num_of_buttons;
        }

        bool isAxisPressed() {
            return axis_pressed;
        }

        bool isButtonPressed() {
            return button_pressed;
        }

        int* getAxis() {
            return axis;
        }

        char* getButton() {
            return button;
        }

    private:
        int fd;
        js_event joystick_event;
        bool hotas_connected;
        int num_of_axis;
        int num_of_buttons;
        int version;
        char devName[80];

        /*
         * the the variables below indicates
         * the state of the joystick.
         */
        int axis[30];
        char button[30];
        bool button_pressed;
        bool axis_pressed;
    };

    Hotas_manager::Hotas_manager() {
        // TODO Auto-generated constructor stub
        hotas_connected = false;
        open_hotas_device();
        std::cout << "joystick device detected" << std::endl;

    }

    Hotas_manager::~Hotas_manager() {
        // TODO Auto-generated destructor stub

    }

    void Hotas_manager::open_hotas_device() {
        bool file_open_error_printed = false;
        while (!hotas_connected) {
            if ((fd = open(JOY_DEV, O_RDONLY)) > 0) {
                ioctl(fd, JSIOCGAXES, num_of_axis);
                ioctl(fd, JSIOCGBUTTONS, num_of_buttons);
                ioctl(fd, JSIOCGVERSION, version);
                ioctl(fd, JSIOCGNAME(80), devName);
                /*
                 * NON BLOCKING MODE
                 */
                ioctl(fd, F_SETFL, O_NONBLOCK);
                hotas_connected = true;
            } else {
                if (!file_open_error_printed) {
                    std::cout << "hotas device not detected. check "
                            "whether it is "
                            "plugged" << std::endl;
                    file_open_error_printed = true;
                }
                close(fd);
                hotas_connected = false;
            }
        }

    }

    void Hotas_manager::readData_from_hotas() {
        int result;
        result = read(fd, &joystick_event, sizeof(struct js_event));
        if (result > 0) {
            switch (joystick_event.type & ~JS_EVENT_INIT) {
            case JS_EVENT_AXIS:
                axis[joystick_event.number] = joystick_event.value;
                axis_pressed = true;
                button_pressed = false;
                break;
            case JS_EVENT_BUTTON:
                button[joystick_event.number] = joystick_event.value;
                button_pressed = true;
                axis_pressed = false;
                break;
            }
            message2_printed = false;
            message_printed = false;

        } else {
            if (!message_printed) {
                std::cout << "problem in reading the stick file" << std::endl;
                message_printed = true;
            }
            hotas_connected = false;
            open_hotas_device();
            if (!message2_printed) {
                std::cout << "stick re-connected" << std::endl;
                message2_printed = true;
            }

        }

    }

I updated the main function to run 3 threads .

    int main() {

                boost::asio::io_service receive_from_hmi_io;
                udpComm receive_from_hmi(receive_from_hmi_io, 6012);
                receive_from_hmi.setRemoteEndpoint("127.0.0.1", 6011);
                receive_from_hmi.start_async_receive();
                boost::thread thread_receive_from_hmi(&udpComm::run_io_service,
                        &receive_from_hmi);
                boost::thread thread_serial(&thread_write_to_datalink);
                boost::thread thread_hotas(&start_hotas);
                thread_hotas.join();
                thread_serial.join();
                thread_receive_from_hmi.join();
                return 0;
                 } 
```

**void thread_write_to_datalink()**还写入来自 hotas_manager(joysticks) 的数据。

```
 void thread_write_to_datalink() {

                /*
                 * boost serial  communication
                 */
                boost::asio::io_service serial_port_io;
                Serial_manager serial(serial_port_io, (char*) "/dev/ttyUSB0");   

                cout << "aileron  " << "throttle   " << "elevator   " << endl;
                while (1) { 

                        // commands from udp communication      

                      serial.write_to_serial(read_hmi_buffer, 6);

                    // data come from joystick inputs

                    //cout << aileron<<"    "<<throttle<<"    "<<elevator<< endl;
                    memcpy(&buffer_manual_flightcontrol[4], &aileron, 4);
                    memcpy(&buffer_manual_flightcontrol[8], &throttle, 4);
                    memcpy(&buffer_manual_flightcontrol[12], &elevator, 4);

                    unsigned char temp;

                    try {
                        serial.write_to_serial(buffer_manual_flightcontrol, 32);
                        //serial.write_to_serial(buffer_manual_flightcontrol, 32);
                    } catch (std::exception& exp) {
                        serial.handle_serial_exception(exp);
                    }

                    try {
                        serial.write_to_serial(buffer_payloadcontrol, 20);
                    } catch (std::exception& exp) {
                        serial.handle_serial_exception(exp);
                    }

                    usleep(100000);

                }

            } 
```

我的问题是如何更好地设计来同步这 3 个线程。如果您的回答说 **您不需要使用 3 个线程**，我需要您告诉我如何使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:09:00.800

您需要使您的访问`read_hmi_buffer` 同步。

因此，每当一段代码在该缓冲区中读取或写入时，您需要一个互斥锁（`std::mutex`,或 windows 等效项）来锁定。`pthread_mutex_t`

有关该概念的一些解释以及其他教程的链接，请参阅此[问题](https://stackoverflow.com/questions/4989451/mutex-example-tutorial)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:20:27.573

让我们从多线程中备份一点，您的程序混合了同步和异步操作。你不需要这样做，因为它只会引起混乱。您可以将从 UDP 套接字读取的缓冲区异步写入串行端口。这一切都可以通过运行 的单个线程来实现`io_service`，从而消除了任何并发问题。

您将需要添加缓冲区管理以使从套接字读取的数据`async_write`在串行端口的生命周期内保持在范围内，以[异步 UDP 服务器](http://www.boost.org/doc/libs/release/doc/html/boost_asio/example/echo/async_udp_echo_server.cpp)为例。还要研究文档，特别是[对缓冲区寿命](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/async_write/overload1.html)的要求`async_write`

> **缓冲区**
> 
> 包含要写入的数据的一个或多个缓冲区。尽管缓冲区对象可以根据需要被复制，但底层内存块的所有权由调用者保留，它必须保证它们在调用处理程序之前保持有效。

一旦你完成了那个设计，那么你就可以转向[更高级](https://stackoverflow.com/a/6162575/283302)的技术，例如线程池或多个`io_service`s。

# sql-server - 同义词对 SQL Server 中链接服务器的性能影响

> ID：15294034
> 
> 赞同：11
> 
> 时间：2013-03-08T12:29:39.270
> 
> 标签：sql-server, performance, sql-server-2008-r2, linked-server, synonym

在本地服务器（SQL Server 2008 R2）上，我有一个同义词，称为`syn_view1`指向链接服务器`remoteserver.remotedb.dbo.view1`

此 SLOW 查询需要**20 秒**才能运行。

```
select e.column1, e.column2
from syn_view1 e
where e.column3 = 'xxx'
  and e.column4 = 'yyy'
order by e.column1 
```

此 FAST 查询需要**1 秒**才能运行。

```
select e.column1, e.column2
from remoteserver.remotedb.dbo.view1 e
where e.column3 = 'xxx'
  and e.column4 = 'yyy'
order by e.column1 
```

这两个查询的唯一区别实际上是同义词的存在。显然，同义词对查询的性能有影响。

SLOW 查询的执行计划是：

```
Plan                Cost %  Subtree cost
4 SELECT
I/O cost: 0.000000  CPU cost: 0.000000  Executes: 0  
Cost: 0.000000                  0.00    3.3521
    3 Filter
    I/O cost: 0.000000  CPU cost: 0.008800  Executes: 1  
    Cost: 0.008800              0.26    3.3521
        2 Compute Scalar
        I/O cost: 0.000000  CPU cost: 3.343333  Executes: 1  
        Cost: 0.000000          0.00    3.3433
            1 Remote Query
            I/O cost: 0.000000  CPU cost: 3.343333  Executes: 1  
            Cost: 3.343333      99.74   3.3433 
```

对于 FAST 查询：

```
Plan            Cost %  Subtree cost
3 SELECT
I/O cost: 0.000000  CPU cost: 0.000000  Executes: 0  
Cost: 0.000000              0.00    0.1974
    2 Compute Scalar
    I/O cost: 0.000000  CPU cost: 0.197447  Executes: 1  
    Cost: 0.000000          0.00    0.1974
        1 Remote Query
        I/O cost: 0.000000  CPU cost: 0.197447  Executes: 1  
        Cost: 0.197447      100.00  0.1974 
```

我的理解是，在 SLOW 查询中，服务器从远程服务器获取所有数据，然后应用过滤器（尽管没有索引），而在 FAST 查询中，服务器从远程服务器获取过滤后的数据，因此使用远程索引.

有没有办法在快速的同时使用同义词？也许是链接服务器的设置？本地数据库服务器？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-24T19:26:10.440

我会将**没有****顺序**的数据转储到本地服务器上的临时表中。然后我会从临时表中选择 order by。Order by 几乎总是杀手锏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-24T08:44:30.727

dba.stackexchange.com 上[这篇文章](https://dba.stackexchange.com/questions/11127/sql-performance-issues-with-remote-query-across-linked-server)的公认答案指出，由于链接服务器上的访问权限有限，因此在查询链接服务器时可能会出现性能问题，从而限制了表统计信息对本地服务器的可见性。这会影响查询计划，从而影响性能。

摘抄：

> 这就是为什么我得到不同的结果。当以系统管理员身份运行时，我得到了完整的分布统计信息，表明没有订单 ID > 20000 的行，估计是一行。（回想一下，优化器从不假定统计信息中的行数为零。）但是当以普通用户身份运行时，DBCC SHOW_STATISTICS 因权限错误而失败。这个错误没有传播，而是优化器接受没有统计信息并使用默认假设。由于它确实获得了基数信息，它了解到远程表有 830 行，因此估计为 249 行。

# c - while 循环内 getchar() 的行为

> ID：15294036
> 
> 赞同：3
> 
> 时间：2013-03-08T12:29:48.737
> 
> 标签：c

```
int main()
{
int c;

  while ( (c = getchar())  != EOF)
    putchar(c);

} 
```

现在，运行上面的程序会产生

> $./a.out 这是存储位置是神秘典籍的线路 **-- LINE1** 这是存储位置是神秘典籍的线路 **-- LINE2**

当我输入**LINE1**的字符时，我认为函数 getchar() 和 putchar() 一直在处理字符，还是我错了？

这是我的问题。

在我按回车后，我的**LINE1与****LINE2**完全复制，这意味着它应该在其他地方缓冲，那么它存储在哪里？另外为什么要这样实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:35:39.580

在您输入一整行之前，您的程序不会从 shell 接收输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T12:40:37.880

系统的默认行为是缓冲输入，直到它看到换行符，以便您可以选择在程序看到之前点击退格键并编辑该行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:42:58.577

我将省略系统的 I/O 机制来为您的程序提供输入流并从中获取输出流。（因为我不认识他们）

该`getchar()`函数只是从*stdin中**检索* **一个**字符。另一方面，只需将**一个**字符放入输出流（*stdout*）。因此，这里不涉及缓冲区魔术，您只是得到了您期望得到的东西：在*stdout中放入**stdin*的内容的完美副本。*`putchar()`*

# xml-parsing - 如何使用 NSXmlParser 解析我的 xml 字符串？

> ID：15294037
> 
> 赞同：1
> 
> 时间：2013-03-08T12:29:49.317
> 
> 标签：xml-parsing

嗨，我是 iOS 开发的新手。
以下是我在 xml 格式中的网络服务的响应。我如何使用 xml 解析器解析这个字符串。请帮帮我

```
<registration><status>3</status></registration> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:33:27.697

使用这些方法可以完成你的xml解析。试试这些方法。

```
 -(NSMutableArray *)parseXML:(NSString *)data
 -(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:    (NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
 -(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
 -(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName 
```

# java - Apache lucene 索引

> ID：15294040
> 
> 赞同：1
> 
> 时间：2013-03-08T12:29:59.610
> 
> 标签：java, jakarta-ee, lucene

我正在使用 apache lucene 为日志文件创建一个文本搜索应用程序。我正在使用下面的代码来索引文件

```
doc.add(new LongField("modified", file.lastModified(), Field.Store.NO));
doc.add(new TextField("contents", new BufferedReader(new InputStreamReader(fis, "UTF-8"))));
doc.add(new StoredField("filename", file.getCanonicalPath())); 
```

在这里，我为每个文件创建 3 个索引但是在搜索时我只能检索一个索引的值，其他两个索引为空。这是搜索端代码

```
Document d = searcher.doc(docId);
System.out.println(i+":File name is"+d.get("filename"));
System.out.println(i+":File name is"+d.get("modified"));
System.out.println(i+":File name is"+d.get("contents")); 
```

我得到的输出是

```
2 total matching documents
0:File name is/home/maclean/NetBeansProjects/LogSearchEngine/src/SimpleSearcher.java
0:File name isnull
0:File name isnull
1:File name is/home/maclean/NetBeansProjects/LogSearchEngine/src/SimpleFileIndexer.java
1:File name isnull
1:File name isnull 
```

我究竟做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:03:34.927

在 Lucene 中，如果要检索某个字段的值，则需要存储该字段。如果未存储字段，则在搜索时其值为`null`.

对于`modified`，您已通过传递参数将其明确指定为未存储的字段`Field.Store.NO`；结果，它的值**没有**存储在索引中，因此在搜索时返回 null。要存储和检索其值，您需要将构造函数调用更改为：

```
doc.add(new LongField("modified", file.lastModified(), Field.Store.YES)); 
```

对于`contents`，您使用的构造函数会创建未存储的字段。您需要将其构造函数更改为：

```
doc.add(new TextField("contents", new BufferedReader(new InputStreamReader(fis, "UTF-8")), Field.Store.YES)); 
```

在这些更改之后，您应该能够检索这两个字段。

您可以检索 的值，`filename`因为您使用的是默认创建存储字段的构造函数。

# c++ - while 条件下的预处理器指令不起作用

> ID：15294044
> 
> 赞同：0
> 
> 时间：2013-03-08T12:30:09.307
> 
> 标签：c++, c, preprocessor-directive

尝试使用在预处理器指令中定义的变量时：

```
 #define TIME_CONST 20; 
```

在一段时间内：

```
 while(i<TIME_CONST){...} 
```

我收到一个抱怨括号的错误...

当我使用：

```
 while(i<20) 
```

一切正常。

我究竟做错了什么？

先感谢您！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T12:31:27.543

```
#define TIME_CONST 20; 
```

`;`从末端移除。

由于`;`，以下：

```
while(i<TIME_CONST){...} 
```

变成这样：

```
while(i< 20;){...} 
```

这是错的，不是吗？

在 C++（和 C）中，宏是*文本替换*机制，因此任何使用 的`TIME_CONST`都将被替换为，`20;`因为它是这样定义的。

一个建议：**尽可能避免使用宏**。你在 C++ 中有更好的选择。使用`const`（或`constexpr`）定义你*真正的常量*对象：

```
const int TIME_CONST = 20; 
```

现在`;`很好，实际上是语言所*要求的。*

# c++ - 将 double 舍入到最接近且更大的浮点数

> ID：15294046
> 
> 赞同：5
> 
> 时间：2013-03-08T12:30:13.063
> 
> 标签：c++, c, floating-point, rounding

我想使用 c/c++ 将大双数 (>1e6) 舍入到最接近但更大的浮点数。我试过这个，但我不确定它总是正确的，也许有一种最快的方法可以做到这一点：

```
int main() {
    // x is the double we want to round
    double x = 100000000005.0;
    double y = log10(x) - 7.0;
    float a = pow(10.0, y);
    float b = (float)x;

    //c the closest round up float
    float c = a + b;
    printf("%.12f %.12f %.12f\n", c, b, x);
    return 0;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T13:00:56.043

只需将双精度分配给浮点数并返回就可以判断浮点数是否更大。如果不是，则应该简单地将浮点数增加一个单位。（对于正浮点数）。如果这仍然不能产生预期的结果，那么 double 大于 float 所支持的，在这种情况下，float 应该分配给 Inf。

```
float next(double a) {
    float b=a;
    if ((double)b > a) return b;
    return std::nextafter(b, std::numeric_limits<float>::infinity());
} 
```

[ *Hack* ] next_after 的 C 版本（在选定的架构上）

```
float next_after(float a) {
    *(int*)&a += a < 0 ? -1 : 1;
    return a;
} 
```

更好的方法是：

```
float next_after(float a) {
   union { float a; int b; } c = { .a = a };
   c.b += a < 0 ? -1 : 1;
   return c.a;
} 
```

这两种自制的 hack 都忽略了 Infs 和 NaNs（并且仅适用于非负浮点数）。数学基于这样一个事实，即浮点数的二进制表示是有序的。要获得下一个可表示的浮点数，只需将二进制表示加一即可。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T13:02:27.893

如果你使用[c99](/questions/tagged/c99 "显示标记为“c99”的问题")，你可以使用 nextafterf 函数。

```
#include <stdio.h>
#include <math.h>
#include <float.h>

int main(){
  // x is the double we want to round
  double x=100000000005.0;

  float c = x;

  if ((double)c <= x)
    c = nextafterf(c, FLT_MAX);

  //c the closest round up float
  printf("%.12f %.12f\n",c,x);
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T13:04:48.257

C 有一个很好的`nextafter`功能，可以在这里提供帮助；

```
float toBiggerFloat( const double a ) {
    const float test = (float) a;
    return ((double) test < a) ? nextafterf( test, INFINITY ) : test;
} 
```

这是一个测试脚本，它在所有数字类别（正/负，正常/次正常，无限，nan，-0）上显示它：http: [//codepad.org/BQ3aqbae](http://codepad.org/BQ3aqbae)（它适用于任何结果）

# javascript - 为什么我在本地文件中得到 NaN 但我的小提琴很好

> ID：15294053
> 
> 赞同：0
> 
> 时间：2013-03-08T12:30:30.520
> 
> 标签：javascript, jquery

我很难理解为什么我在本地文件中得到 NaN，但在我的小提琴中它工作得很好。

我已经检查过我是否在 HTML 中遗漏了任何 id，但它看起来都是按顺序排列的。我不明白为什么它会返回 NaN。

这是我认为导致问题的 JavaScript 的一部分：

```
function updateCost() {

    var amount = parseFloat(document.getElementById("amount").value) || 0.00,
        delivery = parseFloat(document.getElementById("delivery").value),
        total = amount + delivery,
        fixedrate =  total / 100 * 12.2,
        grandtotal = fixedrate + total;   

    document.getElementById("amountdiv").innerHTML = amount.toFixed(2);   
    document.getElementById("deliverydiv").innerHTML = delivery.toFixed(2);
    document.getElementById("total").innerHTML = total.toFixed(2);
    document.getElementById("fixedrate").innerHTML = fixedrate.toFixed(2);
    document.getElementById("grandtotal").innerHTML = grandtotal.toFixed(2);

}

    // handle the due date
    var dayNames = new Array("Sunday","Monday","Tuesday","Wednesday", "Thursday","Friday","Saturday");
    var monthNames = new Array("January","February","March","April","May","June","July", "August","September","October","November","December");    
    var todayPlus30 = new Date();
    todayPlus30.setDate(todayPlus30.getDate()+30)
    var dateStr = (dayNames[todayPlus30.getDay()] + ", " + monthNames[todayPlus30.getMonth()+1] + " " +  todayPlus30.getDate()  + ", " +  todayPlus30.getFullYear());

    $('#date').html(dateStr);

$(function(){
    document.getElementById("amount").onchange =
    document.getElementById("delivery").onchange = updateCost;
});  

$(document).ready(function(){
    $('#amount').change(function(){ updateCost(); });
    $('#delivery').change(function(){ updateCost(); });

});

$(function(){
$("#amount").keypress( function(e) {
    var chr = String.fromCharCode(e.which);
    if (".1234567890NOABC".indexOf(chr) < 0)
        return false;
});
});

$("#amount").blur(function() {
    var input = $(this).val();
    if (/^\d*\.?\d{0,2}$/.test(input)) {
        var amount = parseFloat(input);
        if (amount < 40 || amount > 200) {
            $("span.paymentalert").html("Your payment must be between £40 and £200");
        } else {
            $("span.paymentalert").html("");
        }
    } else {
        $("span.paymentalert").html("Your payment must be a number");
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:42:27.660

试试这个功能：

```
function updateCost() {

    var amount = parseFloat(document.getElementById("amount").value) || 0.00;
    var delivery = document.getElementById("delivery").value;
    if(delivery !='select' && delivery)
    {
        delivery=parseFloat(delivery);
    }
    else
    {
       delivery=0.00;
    }
    var total = amount + delivery;
    var fixedrate =  total / 100 * 12.2;
    var grandtotal = fixedrate + total;   

    document.getElementById("amountdiv").innerHTML = amount.toFixed(2);   
    document.getElementById("deliverydiv").innerHTML = delivery.toFixed(2);
    document.getElementById("total").innerHTML = total.toFixed(2);
    document.getElementById("fixedrate").innerHTML = fixedrate.toFixed(2);
    document.getElementById("grandtotal").innerHTML = grandtotal.toFixed(2);

} 
```

你也写过`onchange`两次函数

```
$(document).ready(function(){
    $('#amount').change(function(){ updateCost(); });
    $('#delivery').change(function(){ updateCost(); });
}); 
```

你可以删除它

```
$(function(){
    document.getElementById("amount").onchange =updateCost;
    document.getElementById("delivery").onchange = updateCost;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:35:25.510

看起来你已经错过了一些东西

```
$(function(){
document.getElementById("amount").onchange = // something should be here with statement end
document.getElementById("delivery").onchange = updateCost;
}); 
```

看评论部分，你也错过了语句的金额初始化和终止。

我希望这能解决 NAN 的问题 :)

# objective-c - 设置 NSString 变量循环

> ID：15294061
> 
> 赞同：0
> 
> 时间：2013-03-08T12:31:31.133
> 
> 标签：objective-c, variables

我在 .h 文件中声明了 NSSTring 变量

```
@property (nonatomic, retain) NSString *currencyCode; 
```

在我的 .m 文件中，我尝试使用以下方法设置此变量：

```
-(void)setCurrencyCode:(NSString *)code {
    self.currencyCode = code;
    [currencyButton setTitle:currencyCode forState:UIControlStateNormal];
} 
```

程序循环开启`self.currencyCode = code;`

`currencyCode`是零和`code`不是

这里发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T12:34:49.100

```
self.currencyCode = x; 
```

是同义词

```
[self setCurrencyCode:x]; 
```

所以你在无限循环中调用setter。改用这个：

```
_currencyCode = code; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:56:36.363

你不需要实现这个。合成它。在 IBAction 方法或其他方法中设置 UI 标签。

# octopress - 为多个博客使用一个 Octopress 源

> ID：15294064
> 
> 赞同：1
> 
> 时间：2013-03-08T12:31:33.773
> 
> 标签：octopress

是否可以使用一个 Octopress 源来处理/生成多个站点的内容？我只是将它与 Wordpress 多站点功能进行比较，您实际上并不需要三个单独的 WP 安装来处理 3 个不同的博客/站点。

但是在 Octopress 的缘故，我有一种轻微的感觉，它应该是每个博客的一个来源，对吧？我只需要对此进行一些确认。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:48:21.810

不是开箱即用的，你可以使用“页面”来实现这一点，但它不是很有用 IMO

# java - web.xml 安全性：如何让 root 不受限制，但其他一切都受到限制？

> ID：15294073
> 
> 赞同：3
> 
> 时间：2013-03-08T12:32:25.813
> 
> 标签：java, jetty, security, web.xml

我希望可以不受限制地访问 Web 服务器根目录（欢迎页面）上的文件，但是 - 默认情况下 - 限制了对解析到子文件夹的所有 url 的访问。

我面临的问题是，当使用 / 或 /* 进行受限访问作为限制访问的默认匹配时，根文件夹不能再不受限制了。在根目录下，我希望在访问域名时出现默认的“index.html”。任何建议表示赞赏。

顺便说一句，我正在使用码头 6.1.6

这是我的 web.xml 文件的片段：

```
<servlet-mapping>
  <servlet-name>SomeServlet</servlet-name>
  <url-pattern>/servlet1</url-pattern>
</servlet-mapping>

<security-constraint>
  <web-resource-collection>
  <web-resource-name>ForbidDefaultAccess</web-resource-name>
    <url-pattern>/*</url-pattern>
  </web-resource-collection>
  <auth-constraint/>
</security-constraint>

<security-constraint>
  <web-resource-collection>
  <!-- unauthorized -->      
    <web-resource-name>GrantAccess</web-resource-name>
    <url-pattern>/some_dir/*</url-pattern>
    <url-pattern>/servlet1</url-pattern>
    <url-pattern>/</url-pattern>      
  </web-resource-collection>
</security-constraint>

<security-constraint>
  <web-resource-collection>
    <web-resource-name>AuthorizedResources</web-resource-name>
    <url-pattern>/cfg/*</url-pattern>
    <url-pattern>/fileupload/*</url-pattern>
    <url-pattern>/list/*</url-pattern>
    <http-method>GET</http-method>
    <http-method>POST</http-method>
  </web-resource-collection>
  <auth-constraint>
    <role-name>UserRole</role-name>
  </auth-constraint>
</security-constraint> 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-21T23:13:59.347

在 Java J2EE 6 中可以列入白名单

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Disable unneeded HTTP methods by 403 Forbidden them</web-resource-name>
        <url-pattern>*</url-pattern>
        <http-method-omission>GET</http-method-omission>
        <http-method-omission>HEAD</http-method-omission>
        <http-method-omission>POST</http-method-omission>
        </web-resource-collection>
    <auth-constraint />
</security-constraint> 
```

参考：[https ://blogs.oracle.com/nithya/entry/new_security_features_in_glassfish](https://blogs.oracle.com/nithya/entry/new_security_features_in_glassfish)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:43:17.970

您可以创建一个`Filter`, 应用于所有 URL。让它检查 URL 的深度（基本上是斜杠的数量），并相应地允许或拒绝对资源的访问，`chain.doFilter()`在第一种情况下使用，`HTTP 403 error`在第二种情况下抛出 a。

# javascript - 我如何舍入到一个地方但强制额外的 0 使其看起来像正常价格？

> ID：15294078
> 
> 赞同：0
> 
> 时间：2013-03-08T12:32:54.063
> 
> 标签：javascript

在 JS 中，我如何舍入到一个地方但强制额外的 0 使其看起来像正常价格？

关于这个话题有很多答案，但我想要实现的是摆脱最后一位便士/美分。例如，代替 15.98，我可以显示 16.00，或者代替 14.49，我可以显示 14.50。

以下四舍五入到一个地方，但我如何强制显示额外的零？

```
c = Math.round(c_ft*10,2)/10
form.ans.value=c 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T12:35:54.157

您可以使用该`toFixed`方法将数字格式化为字符串：

```
form.ans.value = (Math.round(c_ft * 10) / 10).toFixed(2); 
```

# parsing - 使用 parsec 时的空列表问题

> ID：15294082
> 
> 赞同：0
> 
> 时间：2013-03-08T12:33:16.220
> 
> 标签：parsing, haskell, parsec

这是一些导致一些非常奇怪的错误的代码，具体取决于在目标文件中的令牌 emptyList 之后解析的内容。

```
data Express = Seq [Express]
              | ID String
              | Num Integer
              | BoolConst Bool
              | EmptyList String

emptyList :: Parser Express
emptyList = fmap EmptyList (string "[]") 
```

问题是：

当字符串“[]”后跟除数字或文件末尾以外的任何内容（包括空格）时，会导致以下错误

```
(line 1, column 6):
unexpected end of input   OR    unexpected "d"
expecting digit
*** Exception: user error (parse error) 
```

但是，当用 [] 后面的数字解析时，它不会报告错误。

```
e.g. "[] "  error 
     "[] a" error
     "[] 1" successful 
```

还应该从数据定义和文件中的其他地方删除 Num Integer

```
number :: Parser Express
number = fmap Num integer 
```

该文件将在“[]”之后没有任何内容进行解析，但是解析只会返回到第一次出现“[]”，之后什么都没有

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:18:19.047

问题来自于表达式的分隔方式，在处理多个表达式时没有正确考虑空格。最初：

```
seqOfExpr8 =        
    do list <- (sepBy1 expr8 (string "" ) ) 
       return $ if length list == 1 then head list else Seq list 
```

固定的：

```
seqOfExpr8 =        
    do list <- (sepBy1 expr8 whiteSpace ) 
       return $ if length list == 1 then head list else Seq list 
```

其中 whiteSpace 是来自 genTokenParser 类型的词位解析器。

# ruby-on-rails - 通过另一台机器的请求

> ID：15294089
> 
> 赞同：3
> 
> 时间：2013-03-08T12:34:13.103
> 
> 标签：ruby-on-rails, ruby, soap, xmlhttprequest, savon

是否可以通过 ssh-tunnel 之类的方式向 Savon 提出请求。我可以从我的舞台服务器运行这些东西，该服务器的 IP 在我发送请求的服务中被列入白名单。但是我当然想在我的电脑上进行开发：P 那么有什么选择吗？我已经尝试过 savon's proxy: 多种组合的选项，例如

```
proxy: "http://name:password@my_stage_server.com" 
```

等等。我正在使用 Ruby on Rails。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-05T20:21:43.503

SSH隧道是要走的路。它们很容易设置，在一个终端会话中使用它：

```
ssh -L 8080:servicehost:80 myuser@stagingserver 
```

建立后，将其保持打开状态。它将在您的 localhost 上打开端口 8080，作为通往 host:443 上的 TCP 服务的隧道。指向 savon 以`http://localhost:8080/some/url/to/service`访问在 上运行的服务`http://servicehost/some/url/to/service`。

如果您经常需要它，可以方便地将其添加到您的*ssh 配置文件*中，该文件位于`~/.ssh/config`. 这是一个纯文本文件，上面的示例如下所示：

```
Host staging
  HostName hostname.domain
  LocalForward 8080 servicehost:80
  User myuser 
```

使用此配置，您只需发出`ssh staging`. 您可以设置更多选项，请参阅[MAN 页面](http://unixhelp.ed.ac.uk/CGI/man-cgi?ssh_config%205)了解详细信息。

## 主机名解析

请记住，主机名`servicehost`必须可以*从您的登台服务器*而不是您的开发机器上解析。您也可以使用 IP 地址。

# openerp - openerp 7：显示销售订单的制造订单

> ID：15294090
> 
> 赞同：0
> 
> 时间：2013-03-08T12:34:14.437
> 
> 标签：openerp

我创建了一个自定义实体，让我们可以选择销售订单。希望在选择销售订单时，它应该显示与该销售订单相关的制造订单列表。

如何着手解决这个问题？模式应该是什么？fields.related 还是 fields.one2many？

谢谢

代码：

```
class my_custom(osv.osv):
    _name = 'mrp.mycustom'
    _columns={
          'name': fields.char('Name',size=64),
          'salesorder_id': fields.many2one('sale.order','Sales Order')
          }
my_custom() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:00:18.570

销售订单和制造订单之间没有直接联系。您需要先添加一个链接。然后您可以使用 one2many 来显示您的制造订单

# php - 从多个表输出数据

> ID：15294093
> 
> 赞同：2
> 
> 时间：2013-03-08T12:34:20.540
> 
> 标签：php, mysql, data-visualization

我正在尝试将表格关联在一起，以便患者的疾病和优先级具有与之相关的特定等待时间。这是表格；

疾病表包含有关患者疾病的信息（紧急、即时、紧急、半紧急、非紧急）

优先级表包含有关患者优先级（高、中、低）的信息。

我希望它链接，以便特定的优先级和疾病有特定的时间：例如：

```
Patient   Priority  Illness     Arrival_Time 
1         Low       non-urgent  12.00am
2         Low       non-urgent  1.000pm 
```

我需要一些简单的 PHP 来识别基于优先级“低”和疾病“非紧急”的预期等待时间是 2-3 小时来显示这些结果。

```
Patient   Priority   Illness      Arrival_Time   Expected_Waiting_Time
1            Low        non-urgent   12:00am        (Arrivaltime + waiting time(3 hours) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:08:23.533

我建议您创建包含有关额外等待时间信息的表格：

表优先级：

```
id
name
waiting_time 
```

与表病相同：

```
id
name
waiting_time 
```

然后您的表格应如下所示：

```
Patient   Priority  Illness     Arrival_Time 
1         1         1           12.00am
2         1         1           1.000pm 
```

下一步是查询：

```
SELECT 
    p.*,
    prt.waiting_time AS priority_waiting_time,
    prt.name AS priority_name,
    ill.waiting_time AS illness_waiting_time,
    ill.name AS illness_waiting_time,
FROM
    patient p
JOIN 
    priority prt ON (prt.id=p.priority)
JOIN
    illness ill ON (ill.id=p.illness) 
```

现在，当您从数据库中获取此记录时，您可以轻松计算出预期的等待时间：

```
expected_waiting_time = arrival_time + priority_waiting_time + illness_waiting_time 
```

# php - 使用 .htaccess 文件时，css 文件停止工作

> ID：15294094
> 
> 赞同：1
> 
> 时间：2013-03-08T12:34:22.333
> 
> 标签：php, apache, .htaccess

我正在尝试为我的网站制作干净的网址，因此我创建了一个 .htaccess 文件，如下所示：

```
Options +FollowSymLinks
RewriteEngine On

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f

RewriteRule ^product/(\w+)/(\w+)$ product.php?id=$1
RewriteRule ^product/(\w+)/(\w+)$ product.php?id=$1

RewriteRule ^store/(\w+)/(\w+)$ Store.php?id=$1
RewriteRule ^store/(\w+)/(\w+)$ Store.php?id=$1 
```

现在它工作正常，但是当我在页面上分层时，我看到该设计在没有 css 和图像的情况下工作，那么你认为问题是什么？

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:37:31.703

问题可能出在 CSS 文件（和图像等）的相对路径中。在标题中使用绝对路径或基本标记

```
<base href="http://www.example.com/" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:34:48.803

在 HTML 页面中，为指向 CSS 文件的链接添加前缀`/`.

所以，如果你有：

```
<link rel="stylesheet" type="text/css" href="css/stylesheet.css" /> 
```

将其更改为：

```
<link rel="stylesheet" type="text/css" href="/css/stylesheet.css" /> 
```

这使 CSS 的路径成为绝对路径，因此无论浏览器认为它位于哪个“文件夹”中，它都能找到 CSS。

# sencha-touch-2 - app.json Sencha Touch 2.1 中的 buildPaths 似乎已被删除

> ID：15294096
> 
> 赞同：2
> 
> 时间：2013-03-08T12:34:28.563
> 
> 标签：sencha-touch-2, sencha-cmd

在我的 Sencha 2.0 应用程序中，我在 app.json 中定义了它应该放置“已编译”javascript 的位置，但在 Sencha 2.1 示例应用程序中将其删除。在我更新到 Sencha 2.1 后它没有受到尊重，任何人都发生了什么事？

```
/**
 * Default paths to build this application to for each environment
 */
"buildPaths": {
    "testing": "../../../../parentapp/build/testing",
    "production": "../../../../parentapp/build/production",
    "package": "../../../../parentapp/build/package",
    "native": "../../../../parentapp/build/native"
}, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T03:45:17.753

Sencha Touch 2.1 和 Sencha Cmd 3.1 不再使用 app.json 的[buildPaths](http://www.sencha.com/forum/showthread.php?247180-Sencha-Cmd-v3.0.0.190-does-not-use-app.json-buildpath-settings)。

这些现在在 build.xml、build-impl.xml 和 sencha.cfg 文件的序列中定义（很好，分散）。

显示隐藏目录/文件并导航到您的应用程序的目录。在此文件夹中，您将找到一个名为“.sencha”的隐藏文件夹。在此文件夹中，您可能会找到一个文件夹“app”以及“工作区”（工作区不是默认创建）。app 文件夹内是 sencha.cfg，您可以在其中定义应用程序的默认构建路径。

此选项会将您的构建放置在应用文件夹上方的“构建”文件夹中：

```
app.build.dir=${app.dir}/../build 
```

然后使用 Sencha Cmd，您可以键入以下行，并使用可选的后缀定义构建类型（默认为生产）。

```
sencha app build (testing|production|package|native) 
```

包构建使用名为 packager.json 的文件来获取构建详细信息。

# delphi - 使用 TFrame，我如何像在 TForm 中一样正确访问 TCanvas 属性？

> ID：15294099
> 
> 赞同：-3
> 
> 时间：2013-03-08T12:34:40.257
> 
> 标签：delphi, tframe

我需要在运行时在框架 Canvas 上绘制，就像使用普通表单一样，但由于某种原因，他们决定不将 Canvas 属性添加到框架中，即使 TCustomFrame 和 TCustomForm 都来自处理 Canvas 的同一个父类.

我已经让它工作到我可以通过覆盖 PaintWindow 过程来绘制一些东西的部分，但我似乎仍然无法在运行时使用 Canvas 属性，就好像我错过了一大块代码一样。

这是我到目前为止所做的：

```
TCustomFrameEx = class(TCustomFrame)
  private
    FCanvas: TControlCanvas;
    function GetCanvas: TCanvas;
  public
  property Canvas: TCanvas read GetCanvas;
end;

TFrame = class(TCustomFrameEx)
  protected
    procedure PaintWindow(DC: HDC); override;        
  public
    constructor Create(AOwner: TComponent); override;
    destructor Destroy(); override;
  published
    ...
  end;

constructor TFrame.Create(AOwner: TComponent);
begin
  inherited;
  FCanvas := TControlCanvas.Create();
end;

destructor TFrame.Destroy();
begin
  FreeAndNil(fCanvas);
  inherited;
end;

function TCustomFrameEx.GetCanvas : TCanvas;
begin
  Result := fCanvas;
end;

procedure TFrame.PaintWindow(DC: HDC);
begin
  inherited;
  FCanvas.Handle := DC;
  FCanvas.Control := Self;
  FCanvas.Brush.Color := clWhite;
  fCanvas.FillRect(GetClientRect);
  FCanvas.Handle := 0;
end; 
```

我假设我没有正确分配句柄或错过了一些绘画事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T12:54:34.560

最简单的方法是

```
procedure TFrame2.PaintWindow(DC: HDC);
Var
 c:TCanvas;
begin
  inherited;
  c := Tcanvas.Create;
  try
   c.Handle := DC;
   c.Brush.Color := clWhite;
   c.FillRect(GetClientRect);
   c.Brush.Color := clBlue;
   //c.Ellipse(0,0,200,200);
  finally
   c.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T13:36:06.753

The `PaintWindow` method of a frame is only called if the frame has children. You'll need to add a paint box control (or similar) to your frame, or some children (perhaps invisible).

# sorting - XSL 按标题排序

> ID：15294100
> 
> 赞同：0
> 
> 时间：2013-03-08T12:34:42.450
> 
> 标签：sorting, xslt-1.0

我没有看到解决方案，希望有人可以帮助我。我想按标题对结果进行排序。但我不知道在哪里以及如何将排序放入 XSL 文件中。

有人可以帮助我吗？

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"                
    xmlns:ddwrt="http://schemas.microsoft.com/WebParts/v2/DataView/runtime"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="TotalResults" />
  <xsl:template match="NumberOfResults" />

  <xsl:template name="DisplayString">
    <xsl:param name="str" />
    <xsl:if test='string-length($str) &gt; 0'>
      <xsl:value-of select="$str" />
    </xsl:if>
  </xsl:template>

  <xsl:template name="HitHighlighting">
    <xsl:param name="hh" />
    <xsl:apply-templates select="$hh"/>
  </xsl:template>

  <xsl:template name="ResultPreviewToolTip">
    <xsl:param name="contentclass" />
    <xsl:param name="picturethumbnailurl" />
    <xsl:param name="url" />
    <xsl:param name="title" />
    <xsl:param name="hithighlightedsummary" />
    <xsl:param name="description" />
    <xsl:param name="version" />

    <xsl:choose>
      <xsl:when test="$contentclass[. = 'STS_ListItem_PictureLibrary'] and $picturethumbnailurl[. != '']">
        <div>
          <a href="{$url}" title="{$title}">
            <img src="{$picturethumbnailurl}" alt="" />
          </a>
        </div>
      </xsl:when>
      <xsl:when test="contains( $url, 'jpg' ) or contains( $url, 'jpeg' ) or contains( $url, 'gif' ) or contains( $url, 'JPG' ) or contains( $url, 'JPEG' ) or contains( $url, 'GIF' )">
        <div>
          <img src="/_layouts/AssetUploader.aspx?Size=Medium&amp;ImageUrl={$url}" alt="" />
        </div>
      </xsl:when>
      <xsl:otherwise>
        <div>
          <xsl:choose>
            <xsl:when test="$hithighlightedsummary[. != '']">
              <b>Preview:</b>
              <br/>
              <xsl:call-template name="HitHighlighting">
                <xsl:with-param name="hh" select="$hithighlightedsummary" />
              </xsl:call-template>
            </xsl:when>
            <xsl:when test="$description[. != '']">
              <b>Preview:</b>
              <br/>
              <xsl:value-of select="$description"/>
            </xsl:when>
            <xsl:otherwise>
              No preview available
            </xsl:otherwise>
          </xsl:choose>
          <xsl:call-template name="DisplayString">
            <xsl:with-param name="str" select="$version" />
            <xsl:with-param name="text" select="'Version: '" />
            <xsl:with-param name="stringcolor" select="'#808080'" />
          </xsl:call-template>

        </div >
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="Result">
    <xsl:variable name="tdClass">
      <xsl:if test="(position() mod 2 = 0)">
        <xsl:value-of select="'even'" />
      </xsl:if>
      <xsl:if test="(position() mod 2 = 1)">
        <xsl:value-of select="'odd'" />
      </xsl:if>
    </xsl:variable>

    <tr>
      <td class="{$tdClass}">
        <a href="#" class="tooltip">
          <img>
            <xsl:attribute name="src">
              <xsl:value-of select="imageurl"/>
            </xsl:attribute>
          </img>
          <span>
            <xsl:call-template name="ResultPreviewToolTip">
              <xsl:with-param name="contentclass" select="contentclass" />
              <xsl:with-param name="description" select="description" />
              <xsl:with-param name="hithighlightedsummary" select="hithighlightedsummary" />
              <xsl:with-param name="picturethumbnailurl" select="picturethumbnailurl" />
              <xsl:with-param name="title" select="title" />
              <xsl:with-param name="url" select="url" />
              <xsl:with-param name="version" select="version" />
            </xsl:call-template>
          </span>
        </a>
      </td>
      <td>
        <a>
          <xsl:attribute name="href">
            <xsl:value-of select="url" disable-output-escaping="yes" />
          </xsl:attribute>
          <xsl:value-of select="filename"/>
        </a>
      </td>
      <td class="{$tdClass}">
        <a>
          <xsl:attribute name="href">
            <xsl:value-of select="url" disable-output-escaping="yes" />
          </xsl:attribute>
          <xsl:choose>
            <xsl:when test="doctitle != ''">
              <xsl:value-of select="doctitle"/>
            </xsl:when>
            <xsl:otherwise>
              <xsl:value-of select="title"/>
            </xsl:otherwise>
          </xsl:choose>
        </a>
      </td>      
      <td class="{$tdClass}">
        <xsl:choose>
          <xsl:when test="docauthor != ''">
            <xsl:value-of select="docauthor"/>
          </xsl:when>
          <xsl:otherwise>
            <xsl:value-of select="author"/>
          </xsl:otherwise>
        </xsl:choose>
      </td>
      <td class="{$tdClass}">
        <xsl:value-of select="revisiondate" />
      </td>
      <td class="{$tdClass}">
        <xsl:value-of select="doclanguage"/>
      </td>
      <td class="{$tdClass}">
        <a>
          <xsl:attribute name="href">
            <xsl:value-of select="sitename" disable-output-escaping="yes" />
          </xsl:attribute>
          <img src="/_layouts/images/breadcrumbbutton.png" style="border-style: none" />
        </a>
        <xsl:call-template name="ShowVersionHistory" />
      </td>
    </tr>

  </xsl:template>

  <xsl:template name="ShowVersionHistory">

    <!-- First, encode Url -->
    <xsl:variable name="EncodedUrl">
      <xsl:value-of disable-output-escaping="yes" select="ddwrt:UrlEncode(url)" />
    </xsl:variable>    

    <!--  does only work for office docuemnts -->
    <xsl:if test="string-length(serverredirectedurl) &gt; 0">

      <!-- get web url from office web app link -->
      <xsl:variable name="WebUrl">
        <xsl:value-of select="substring-before(serverredirectedurl, '_layouts')"/>
      </xsl:variable>

      <!-- create link -->
      <xsl:variable name="FinalLink">
        <xsl:value-of select="$WebUrl"/>
        <xsl:text>_layouts/Versions.aspx?FileName=</xsl:text>
        <xsl:value-of select="$EncodedUrl"/>
      </xsl:variable>

      <a href="{$FinalLink}" target="_blank" Title="Version History">
        <img src="/_layouts/images/versions.gif" style="border-style: none" />
      </a>
    </xsl:if> 

  </xsl:template>

  <xsl:template match="/">

    <table class="searchresult">
      <tr>
        <th width="18"></th>
        <th>Filename</th>
        <th>Title</th>
        <th>Author</th>
        <th>Revision Date</th>
        <th>Language</th>
        <th>Actions</th>
      </tr>
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"                
    xmlns:ddwrt="http://schemas.microsoft.com/WebParts/v2/DataView/runtime"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="TotalResults" />
  <xsl:template match="NumberOfResults" />

  <xsl:template name="DisplayString">
    <xsl:param name="str" />
    <xsl:if test='string-length($str) &gt; 0'>
      <xsl:value-of select="$str" />
    </xsl:if>
  </xsl:template>

  <xsl:template name="HitHighlighting">
    <xsl:param name="hh" />
    <xsl:apply-templates select="$hh"/>
  </xsl:template>

  <xsl:template name="ResultPreviewToolTip">
    <xsl:param name="contentclass" />
    <xsl:param name="picturethumbnailurl" />
    <xsl:param name="url" />
    <xsl:param name="title" />
    <xsl:param name="hithighlightedsummary" />
    <xsl:param name="description" />
    <xsl:param name="version" />

    <xsl:choose>
      <xsl:when test="$contentclass[. = 'STS_ListItem_PictureLibrary'] and $picturethumbnailurl[. != '']">
        <div>
          <a href="{$url}" title="{$title}">
            <img src="{$picturethumbnailurl}" alt="" />
          </a>
        </div>
      </xsl:when>
      <xsl:when test="contains( $url, 'jpg' ) or contains( $url, 'jpeg' ) or contains( $url, 'gif' ) or contains( $url, 'JPG' ) or contains( $url, 'JPEG' ) or contains( $url, 'GIF' )">
        <div>
          <img src="/_layouts/AssetUploader.aspx?Size=Medium&amp;ImageUrl={$url}" alt="" />
        </div>
      </xsl:when>
      <xsl:otherwise>
        <div>
          <xsl:choose>
            <xsl:when test="$hithighlightedsummary[. != '']">
              <b>Preview:</b>
              <br/>
              <xsl:call-template name="HitHighlighting">
                <xsl:with-param name="hh" select="$hithighlightedsummary" />
              </xsl:call-template>
            </xsl:when>
            <xsl:when test="$description[. != '']">
              <b>Preview:</b>
              <br/>
              <xsl:value-of select="$description"/>
            </xsl:when>
            <xsl:otherwise>
              No preview available
            </xsl:otherwise>
          </xsl:choose>
          <xsl:call-template name="DisplayString">
            <xsl:with-param name="str" select="$version" />
            <xsl:with-param name="text" select="'Version: '" />
            <xsl:with-param name="stringcolor" select="'#808080'" />
          </xsl:call-template>

        </div >
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="Result">
    <xsl:variable name="tdClass">
      <xsl:if test="(position() mod 2 = 0)">
        <xsl:value-of select="'even'" />
      </xsl:if>
      <xsl:if test="(position() mod 2 = 1)">
        <xsl:value-of select="'odd'" />
      </xsl:if>
    </xsl:variable>

    <tr>
      <td class="{$tdClass}">
        <a href="#" class="tooltip">
          <img>
            <xsl:attribute name="src">
              <xsl:value-of select="imageurl"/>
            </xsl:attribute>
          </img>
          <span>
            <xsl:call-template name="ResultPreviewToolTip">
              <xsl:with-param name="contentclass" select="contentclass" />
              <xsl:with-param name="description" select="description" />
              <xsl:with-param name="hithighlightedsummary" select="hithighlightedsummary" />
              <xsl:with-param name="picturethumbnailurl" select="picturethumbnailurl" />
              <xsl:with-param name="title" select="title" />
              <xsl:with-param name="url" select="url" />
              <xsl:with-param name="version" select="version" />
            </xsl:call-template>
          </span>
        </a>
      </td>
      <td>
        <a>
          <xsl:attribute name="href">
            <xsl:value-of select="url" disable-output-escaping="yes" />
          </xsl:attribute>
          <xsl:value-of select="filename"/>
        </a>
      </td>
      <td class="{$tdClass}">
        <a>
          <xsl:attribute name="href">
            <xsl:value-of select="url" disable-output-escaping="yes" />
          </xsl:attribute>
          <xsl:choose>
            <xsl:when test="doctitle != ''">
              <xsl:value-of select="doctitle"/>
            </xsl:when>
            <xsl:otherwise>
              <xsl:value-of select="title"/>
            </xsl:otherwise>
          </xsl:choose>
        </a>
      </td>      
      <td class="{$tdClass}">
        <xsl:choose>
          <xsl:when test="docauthor != ''">
            <xsl:value-of select="docauthor"/>
          </xsl:when>
          <xsl:otherwise>
            <xsl:value-of select="author"/>
          </xsl:otherwise>
        </xsl:choose>
      </td>
      <td class="{$tdClass}">
        <xsl:value-of select="revisiondate" />
      </td>
      <td class="{$tdClass}">
        <xsl:value-of select="doclanguage"/>
      </td>
      <td class="{$tdClass}">
        <a>
          <xsl:attribute name="href">
            <xsl:value-of select="sitename" disable-output-escaping="yes" />
          </xsl:attribute>
          <img src="/_layouts/images/breadcrumbbutton.png" style="border-style: none" />
        </a>
        <xsl:call-template name="ShowVersionHistory" />
      </td>
    </tr>

  </xsl:template>

  <xsl:template name="ShowVersionHistory">

    <!-- First, encode Url -->
    <xsl:variable name="EncodedUrl">
      <xsl:value-of disable-output-escaping="yes" select="ddwrt:UrlEncode(url)" />
    </xsl:variable>    

    <!--  does only work for office docuemnts -->
    <xsl:if test="string-length(serverredirectedurl) &gt; 0">

      <!-- get web url from office web app link -->
      <xsl:variable name="WebUrl">
        <xsl:value-of select="substring-before(serverredirectedurl, '_layouts')"/>
      </xsl:variable>

      <!-- create link -->
      <xsl:variable name="FinalLink">
        <xsl:value-of select="$WebUrl"/>
        <xsl:text>_layouts/Versions.aspx?FileName=</xsl:text>
        <xsl:value-of select="$EncodedUrl"/>
      </xsl:variable>

      <a href="{$FinalLink}" target="_blank" Title="Version History">
        <img src="/_layouts/images/versions.gif" style="border-style: none" />
      </a>
    </xsl:if> 

  </xsl:template>

  <xsl:template match="/">

    <table class="searchresult">
      <tr>
        <th width="18"></th>
        <th>Filename</th>
        <th>Title</th>
        <th>Author</th>
        <th>Revision Date</th>
        <th>Language</th>
        <th>Actions</th>
      </tr>

      <xsl:apply-templates /> 
    </table>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:38:30.547

您必须添加`<xsl:sort>`（请参阅：[w3schools: xsl:sort Element](http://www.w3schools.com/xsl/el_sort.asp)）。它应该被添加到你的`xsl:apply-templates`元素中（或者如果你会使用`xsl:for-each`，那么就在那里）。

# php - 如何在数据库中形成值

> ID：15294111
> 
> 赞同：0
> 
> 时间：2013-03-08T12:34:57.300
> 
> 标签：php, mysql

我正在尝试将我的表单值添加到我的数据库中，但我收到类似未定义索引的错误：在第 120 行提交一些代码是，

```
<?php

echo "</tr></table></form>";

$conn = mysql_connect('localhost','root','');

 mysql_select_db('itcompanylist',$conn);
 $result = mysql_query("SELECT state_name FROM `states` WHERE c_id =1");

$i = 0;

echo "<form method='post' action=''><table border='1' ><tr>";

while ($row = mysql_fetch_row($result)){
 // echo "<td><a href='#' onclick='someFunction()'>" .$row['0']. "</a> </td>";
 echo '<td><input type="submit" name="submit"  value="'.$row['0'].'"></td>'; 

  if ($i++ == 2) 
  { 
     echo "</tr><tr>";
     $i=0;
  }
}

echo "</tr></table></form>";

 ?> 
```

动作在同一页面上触发，页面在下面，当动作触发到页面时，我遇到错误：未定义的索引：在第 120 行提交

```
<?php

 mysql_connect("localhost","root","");//database connection
    mysql_select_db("itcompanylist");

    $query  = "SELECT s_id FROM states WHERE `state_name` = '".$_POST['submit']."'";
$result1 = mysql_query($query);
$row = mysql_fetch_array($result1);

 $result2 = mysql_query("SELECT city_name FROM `city` WHERE s_id ='".$row['s_id']."'");

$i = 0;

echo "<form method='post' action='demo2.php'><table border='1' ><tr>";

while ($row = mysql_fetch_row($result2)){

  echo '<td><input type="submit" name="ok" value="'.$row['0'].'"></td>'; 

}

echo "</tr></table></form>";

 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:09:26.330

请替换代码

```
echo '<td><input type="submit" name="submit" value="'.$row['0'].'"></td>'; 
```

代替

```
echo '<td><input type="submit" name="ok" value="'.$row['0'].'"></td>'; 
```

因为你打电话给 $_post['submit']..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:47:15.947

您正在尝试使用不存在的变量`$_POST['submit']`。使用：
`$query = "SELECT s_id FROM states WHERE`state_name`= '".$_POST['ok']."'";`
一定要迁移`mysqli_*`查看 Hank 对您的问题的评论。

# wpf - WPF ListBox 滚动条不起作用

> ID：15294112
> 
> 赞同：3
> 
> 时间：2013-03-08T12:34:58.477
> 
> 标签：wpf, listbox, scrollbar

```
<ListBox Name="myListBx" ItemsSource="{Binding Collection}" Margin="5,5"
    SelectedValuePath="ColId"
    SelectedValue="{Binding Path=ColId}"
    SelectionMode="Multiple"
    BorderThickness="0" Background="{x:Null}" BorderBrush="{x:Null}"
    ScrollViewer.VerticalScrollBarVisibility ="Auto">
    <ListBox.ItemTemplate>
        <DataTemplate>
            // blabla
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

我的 ListBox 包含这么多元素，实际上滚动条应该可以工作，但它甚至不可见。难道我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T13:21:01.960

您需要将 ListBox 放入 Grid 中。StackPanel 具有
无限的高度，因此 ScrollBar 不会启用或可见。

```
<Grid>
  <ListBox VerticalAlignment="Stretch" />
</Grid> 
```

# javascript - TypeScript：那么“this”的范围究竟如何？

> ID：15294113
> 
> 赞同：4
> 
> 时间：2013-03-08T12:35:03.750
> 
> 标签：javascript, typescript

我有这段 Typescript 代码：

```
constructor($triggerHref: JQuery) {
        // stuff...
        var _this = this;
        $(document).on("click",$triggerHref.selector,e=>{
            e.preventDefault();
            var target = $(e.srcElement).attr("data-pcc-sort-trigger");
            if (target == _this.active)
                _this.load(target, !_this.isDescending);
            else _this.load(target, false);
        });

    } 
```

如果我删除该`var _this = this;`行并仅`this`在事件处理程序中使用，则生成的 js 代码看起来相当相似（无论如何它都会生成 _this），但由于某种原因`this.active`并且`this.load()`未定义。

我对 TS 的作用域的理解是，`()=>{}`方法不让`this`他们的父母知道，只有`function(){}`方法像通常的 JS 方法一样工作。

那么为什么这个对我不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:21:16.127

正如您已经注意到的，lambda 函数`this`在定义 lambda 函数时捕获。这可能会导致奇怪的结果（周围也有[一些](http://typescript.codeplex.com/workitem/361) [错误](http://typescript.codeplex.com/workitem/11)`var _this = this`），尽管其中大部分似乎已修复。

整个语言结构似乎是为了欺骗 JavaScript 作用域（`this`是调用函数的对象）。

至于您解释的怪异（this.active 和 _this.active 行为不同），问题范围内没有解释。

生成的 JavaScript（如您所说）应该（几乎）相同。除了编写`var _this = this;`导致`_this`在同一范围内多次定义和破坏 javascript 有效性之外。这是围绕 TypeScript lambda 的问题。永远不要在 TS 中定义`_this`，因为它是为某些目的而保留的（并且不检查它是否是免费的）。

TypeScript 没有魔法。执行的是它生成的 JavaScript。检查是否有东西在同一个范围内被覆盖`_this`（这很容易发现，因为范围`var _this`是构造函数的范围，也`var`隐藏了来自外部范围的同名变量，所以它应该在构造函数内）。

我暂时避免在 TypeScript 中使用 lambda 表达式。改用简单的匿名函数，不需要您重构任何代码。保存`this`到其他变量可能被认为是丑陋的，但是您可以通过使用[$.proxy()](http://api.jquery.com/jQuery.proxy/)来解决它。这样你甚至可以编写一个正则表达式替换来将你的 lambdas 更改为 $.proxy()。目前。

所以总而言之，我需要调试生成的 JS 来发现错误，因为你的代码在语法上应该没问题。在我看来，TypeScript 编译器需要围绕这一点重新思考（我希望一些 TS 爱好者会有所不同，并教我如何正确完成它，因为我不反对 TS，相反）。

我很确定@RyanCavanaugh 能够准备一个更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:42:11.803

~~lambda 表达式生成一个函数表达式，因此适用于 lambda 表达式的范围规则与函数表达式相同。~~

例子：

```
var x = e => {}; 
```

生成这个 Javascript 代码：

```
var x = function (e) {
}; 
```

# ios - 设置背景图片导航栏

> ID：15294116
> 
> 赞同：2
> 
> 时间：2013-03-08T12:35:16.163
> 
> 标签：ios, xamarin.ios, uinavigationbar

所以我尝试在 MonoTouch 中为导航栏设置背景图像。图像在任何地方都是相同的。我该怎么做？

在 viewdid 加载中：`NavBar.SetBackgroundImage(UIImage.FromFile ("btn-title-bar.png"));`

不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T12:37:29.613

尝试

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"btn-title-bar.png"] forBarMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T12:39:55.757

在 c# 中，即：

```
UINavigationBar.Appearance.SetBackgroundImage (UIImage.FromFile ("btn-title-bar.png"), UIBarMetrics.Default); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-21T06:38:12.543

试试下面的代码。

```
 UIImage *image = [UIImage imageNamed: @"NavigationBar@2x.png"];
   UIImageView *imageView = [[UIImageView alloc] initWithImage: image];
   imageView.frame = CGRectMake(0, 0, 320, 44);
   [self.navigationController.navigationBar addSubview:imageView]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-10T05:52:23.913

如果您想在每个页面上放置不同的图像，那么在视图中编写此方法确实在每个页面上加载..

```
UIImage *image = [UIImage imageNamed: @"logo.png"];
UIImageView *imageView = [[UIImageView alloc] initWithImage: image];
self.navigationItem.titleView = imageView; 
```

如果你想在每个页面上都有一个图像，那么在 delegate.m 中编写这个代码。

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"logo.png"]

forBarMetrics:UIBarMetricsDefault]; 
```

# c# - 通用表存储实体检索

> ID：15294122
> 
> 赞同：0
> 
> 时间：2013-03-08T12:35:38.090
> 
> 标签：c#, azure-storage, azure-table-storage

我正在玩天蓝色表存储实体检索并获得了一个很好的 ms 示例

[http://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services-v17/#retrieve-range-entities](http://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services-v17/#retrieve-range-entities)

万一你无聊地检查链接

```
// Retrieve storage account from connection string
CloudStorageAccount storageAccount = CloudStorageAccount.Parse(
CloudConfigurationManager.GetSetting("StorageConnectionString"));

// Create the table client
CloudTableClient tableClient = storageAccount.CreateCloudTableClient();

// Get the data service context
TableServiceContext serviceContext = tableClient.GetDataServiceContext();

// Specify a partition query, using "Smith" as the partition key
CloudTableQuery<CustomerEntity> partitionQuery =
(from e in serviceContext.CreateQuery<CustomerEntity>("people")
 where e.PartitionKey == "Smith"
 select e).AsTableServiceQuery<CustomerEntity>();

// Loop through the results, displaying information about the entity
foreach (CustomerEntity entity in partitionQuery)
{
Console.WriteLine("{0}, {1}\t{2}\t{3}", entity.PartitionKey, entity.RowKey,
    entity.Email, entity.PhoneNumber);
} 
```

现在这很完美。但我想概括它..所以我想将 customerEntity 作为参数传递，将 people 作为参数传递（简单字符串表名）并使其可重用。

所以技巧是将customerentity作为参数传递请帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:28:10.757

所以你想知道如何创建一个接受泛型对象类型的函数？看看[http://msdn.microsoft.com/en-US/library/ms379564(v=VS.80).aspx](http://msdn.microsoft.com/en-US/library/ms379564(v=VS.80).aspx)。

# python - 覆盖 AdminSite 以附加自定义 url

> ID：15294124
> 
> 赞同：4
> 
> 时间：2013-03-08T12:35:41.723
> 
> 标签：python, django, django-admin

我按照手册中的描述覆盖了默认**的 AdminSite**类，尽管关于那里的这部分的信息太纯了。
我的**gs/admin.py**文件：

```
from django.contrib.admin import AdminSite
from django.conf.urls import patterns, url
from gs.views import *

class AdminSiteGs(AdminSite):

    def get_urls(self):
        urls = super(AdminSiteGs, self).get_urls()

        urls += patterns('',
             url(r'^my_admin_view/$', self.admin_view(my_admin_view))
        )

        return urls

admin_site_gs = AdminSiteGs() 
```

*gs*这是我的应用程序和项目名称。

**gs/urls.py 文件**：

```
from django.conf.urls import patterns, include, url
from page import views
from gs.admin import admin_site_gs

urlpatterns = patterns('',
    url(r'^admin/', include(admin_site_gs.urls)),
) 
```

我有一个名为 page 的应用程序，我在其中放置**admin.py**文件：

```
from gs.admin import admin_site_gs
from page.models import Page, Menu
from django.contrib import admin

class PageAdmin(admin.ModelAdmin):
    list_display = ('name', 'url', 'page_type')

class MenuAdmin(admin.ModelAdmin):
    list_display = ('name', 'code')

admin_site_gs.register(Page, PageAdmin)
admin_site_gs.register(Menu, MenuAdmin) 
```

所以这里没有任何工作=（**/admin/my_admin**视图（它返回 404 ），也没有主管理页面**/admin**。我没有看到我在**page/admin.py**文件中注册的模型。

听起来可能很有趣，但我尝试了所有员工在 3-4 小时内工作 =)) 正如你可能猜到的那样，我在 Django 和 Python 中都是新手......我现在只想知道如何附加自定义 URL 和视图到我重写的 AdminSite 类？

我删除了`autodiscover`方法，所以现在看来​​ Django 没有看到关于文件**page/admin.py**的任何内容。

但是第一个问题更有趣，为什么我在尝试访问**/admin/my_admin**页面时遇到 404 错误...

PS为什么我开头的问候被剪掉了o_O

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T13:28:47.257

根据文档，您为自定义管理视图定义的任何 URL 模式必须出现*在*管理模式之前：[https ://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin .get_urls](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_urls)

尝试：

```
def get_urls(self):
    urls = super(AdminSiteGs, self).get_urls()

    my_urls = patterns('',
        url(r'^my_admin_view/$', self.admin_view(my_admin_view))
    )

    return my_urls + urls 
```

您不需要像这样包含这些模式：

```
urlpatterns = patterns('',
    url(r'^admin/', include(admin_site_gs.urls)),  # not needed
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-04T15:26:17.447

在我的情况下，我必须覆盖默认的“添加 url”，以便在单击管理员中的“+添加”按钮时重定向到自定义 Django 管理页面。因此，如果我只是按照@Brandon 所说的方式覆盖 get_urls() ，它将返回一个带有重复“添加”url 的列表（自定义的和从超级检索的）。

```
 def get_urls(self):
        info = self.model._meta.app_label, self.model._meta.model_name
        urls = super(RetailerAdmin, self).get_urls()
        # We need to remove the original 'add_url' in order to use the custom one.
        urls.remove(urls[1])
        custom_url = [
            url(r'^batch/$', self.admin_site.admin_view(self.batch_upload_retailers),
                name='%s_%s_add' % info),
        ]
        return custom_url + urls 
```

为了解决这个问题，我删除了原来的 'add' url（注意 'add' url 总是在位置 1）。

# sql-server - XML：将数据从 sql server 保存到文件

> ID：15294126
> 
> 赞同：1
> 
> 时间：2013-03-08T12:35:49.520
> 
> 标签：sql-server

我想将 SQL Server 数据库表中的数据保存到文件中，然后将其加载到另一个数据库中，该数据库中已经创建了相同的表

我怎样才能做到这一点？我知道应该有一些简单的方法来做到这一点，但是 stackoverflowsearch 和谷歌并没有给出好的答案（或者我没有问一个好问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:03:39.397

[SQL Server 导入和导出向导](http://msdn.microsoft.com/en-us/library/ms141209.aspx)

它位于 SQL Server 启动菜单文件夹下。

![SQL Server 导入和导出向导](../Images/bb73ee1dc3de6656464d7ee980394fbd.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T12:19:20.637

据我所知，仅在 SQL 中没有简单的方法可以做到这一点。

处理此问题的最佳方法可能是使用任何编程语言创建您自己的简单应用程序，该应用程序将查询第一个数据库，将文件写入需要写入的位置，并将数据导入另一个数据库。

# c++ - 使用 std::vector 的开销？

> ID：15294129
> 
> 赞同：17
> 
> 时间：2013-03-08T12:35:54.833
> 
> 标签：c++, stdvector, dynamic-memory-allocation

我知道手动动态内存分配通常是一个坏主意，但有时它是否比使用更好的解决方案`std::vector`？

举一个粗略的例子，如果我必须存储一个`n`整数数组，其中`n`<= 16，比如说。我可以使用它来实现它

```
int* data = new int[n]; //assuming n is set beforehand 
```

或使用向量：

```
std::vector<int> data; 
```

使用 a 绝对总是一个更好的主意，`std::vector`还是在实际情况下手动分配动态内存会是一个更好的主意，以提高效率？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-08T12:40:56.590

`std::vector`使用/总是更好`std::array`，至少在您可以*最终证明*（通过分析）`T* a = new T[100];`解决方案在您的特定情况下要快得多之前。这不太可能发生：`vector`/`array`是一个非常薄的层，围绕着一个普通的旧数组。使用 进行边界检查会产生一些开销`vector::at`，但您可以使用`operator[]`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-08T12:58:02.880

我想不出动态分配 C 样式向量的任何情况。（我已经在 C++ 中工作了超过 25 年，但我还没有使用过`new[]`。）通常，如果我事先知道大小，我会使用类似的东西：

```
std::vector<int> data( n ); 
```

得到一个已经大小的向量，而不是使用`push_back`.

当然，如果`n`它非常小并且在编译时已知，我将使用`std::array`（如果我可以访问 C++11），甚至是 C 样式数组，并且只是在堆栈上创建对象， *没有*动态分配. （这种情况在我处理的代码中似乎很少见；小的固定大小的数组往往是类的成员。我偶尔会使用 C 风格的数组。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-08T12:38:42.330

如果您事先知道大小（尤其是在编译时），并且不需要动态调整大小的能力`std::vector`，那么使用更简单的东西就可以了。

`std::array`但是，如果您有 C++11 或其他类似的东西，那么最好是这样`boost::scoped_array`。

我怀疑除非它显着减少代码大小或其他东西，否则效率会大大提高，但它更具表现力，无论如何都是值得的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-08T12:41:46.193

您应该尽可能避免使用`C`-style-arrays `C++`。`STL`提供通常足以满足各种需要的容器。想象一下对数组进行重新分配或从其中间删除元素。容器使您免于处理此问题，而您必须自己处理它，如果您没有这样做一百次，那很容易出错。
当然，一个例外是，如果您正在解决可能无法处理 -containers 的低级问题`STL`。

已经有一些关于这个话题的讨论。请参阅[此处](https://stackoverflow.com/questions/381621/using-arrays-or-stdvectors-in-c-whats-the-performance-gap)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-08T12:42:30.093

> 使用 std::vector 绝对总是一个更好的主意，还是在实际情况下手动分配动态内存会是一个更好的主意，以提高效率？

称我为傻瓜，但 99.9999...% 的时间我只会使用标准容器。默认选择应该是`std::vector`，但[`std::deque<>`有时也可能是一个合理的选择](http://www.gotw.ca/gotw/054.htm)。如果在编译时知道大小，请选择`std::array<>`，这是一个轻量级、安全的 C 样式数组包装器，它引入了零开销。

标准容器公开成员函数以指定初始保留的内存量，因此您不会遇到重新分配的麻烦，也不必记住`delete[]`您的数组。老实说，我不明白为什么要使用手动内存管理。

效率应该不是问题，因为您有 throwing 和 non-throwing 成员函数来访问包含的元素，因此您可以选择是否支持安全或性能。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-08T12:43:21.900

*std::vector*可以使用 size_type 参数构造，该参数用指定数量的元素实例化向量并执行单个动态分配（与您的数组相同），您还可以使用*reserve*来减少重新分配的次数使用时间。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-08T12:42:00.557

In`n`在编译时是已知的，那么您应该选择`std::array`：

```
std::array<int, n> data; //n is compile-time constant 
```

如果`n`在编译时不知道，或者数组可能在运行时增长，那么去`std::vector`：

```
std::vector<int> data(n); //n may be known at runtime 
```

或者在某些情况下，您可能更喜欢`std::deque`哪个比`std::vector`某些情况下更快。见这些：

*   [**C++ 基准测试——std::vector VS std::list VS std::deque**](http://www.baptiste-wicht.com/2012/12/cpp-benchmark-vector-list-deque/)

*   [](http://www.gotw.ca/gotw/054.htm)**Herb Sutter[**使用向量和双端队列**](http://www.gotw.ca/gotw/054.htm)**

 **希望有帮助。**

# javascript - 关闭 JavaScript 和 ASP.NET 验证器不会在服务器端触发

> ID：15294132
> 
> 赞同：0
> 
> 时间：2013-03-08T12:36:02.277
> 
> 标签：javascript, asp.net, .net, validation

在我的网站上当我关闭 JavaScript 时，ASP.NET 验证器不会像我预期的那样在服务器端触发。

例如，当我关闭 JavaScript 时，必填字段验证器不会触发。

我认为内置 ASP.NET 验证器的好处之一是可以防止这种情况，所以我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:06:36.073

为您的按钮使用此语法`onclientclick`

```
onclientclick=javascript:return JsFunctionName(); 
```

和

**1）检查您的返回错误和真实代码**

**2）必须在所有验证控件和按钮中使用验证组**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:44:06.567

如果您在验证器上将属性 enableclientvalidation 设置为 false，它将不会对 Web 表单进行任何客户端 JS 验证，MVC 有一个类似的选项[如何在 MVC 3 中关闭客户端验证？](https://stackoverflow.com/questions/6254213/how-do-i-turn-off-client-side-validation-in-mvc-3)

但是，如果您使用的是 Web 表单，那么如果没有 JS，很多事情将无法运行。

# java - 向接口添加新方法

> ID：15294136
> 
> 赞同：1
> 
> 时间：2013-03-08T12:36:14.577
> 
> 标签：java

我在我的代码中使用了一个已经存在很长时间的接口，并且许多类都实现了它。现在我必须为新类添加一个新方法到这个接口[旧类不需要新方法]。因此，正如许多地方所建议的那样，我可以扩展旧接口并使用新方法创建一个新接口。现在我的问题是使用接口实现的应用程序启动器仅引用基本接口并且使用基本接口我无法在新接口中调用方法。

```
baseInterface is extended by newInterface

Class Applauncher{

  baseInterface b;

} 
```

所以可以看出我不能在 Applauncher 类的“newInterface”中调用新方法。

我想要一个不会动摇我旧实现的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T12:39:38.277

基本上，当您需要在 applauncher 中调用新方法时，您可以执行以下操作：

```
if (b instanceof NewInterface) {
  ((NewInterface)b).newMethod();
} 
```

这对你来说是一个解决方案吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T12:44:41.333

诚然尚未发布，但当 Java 8 出现时，您将有一个很好的解决方案来解决这个一般性问题：

```
public interface MyInterface {
   Calendar myMethod();
   Object myMeth2() default null;
} 
```

重要的一点是`default null`- default 关键字从 8 开始有了新的用法，它允许您指定默认返回值（这意味着您不需要在所有实现中实现此方法。）

# datepicker - 日期选择器空错误

> ID：15294137
> 
> 赞同：0
> 
> 时间：2013-03-08T12:36:15.310
> 
> 标签：datepicker

我得到了一个表格，可以将一些价值发布到另一个页面。当我发布表单时，如果日期选择器输入为空，我想要提醒它们。我一直在尝试解决它，但无法解决。这很简单，但我想我的大脑刚刚停止。代码如下。 [http://i.stack.imgur.com/Ee95P.png](http://i.stack.imgur.com/Ee95P.png)

这是我的表格截图的链接。也许这可以帮助你。

```
 <form id="form-2" class="form-3" method="POST" action="rezervasyon-aşama-2" >
                            <label style="margin:2px 70px; font-size:16px;" >Rezervasyon Formu</label><br>
                                <div style="padding:5px 5px;">
                                    Check-in Tarihi:&nbsp;&nbsp;
                                    <input id="datepicker-example7-start" type="text" name='tarih1' >

                                    </script>

                               </div>

                              <div style="padding:5px 5px;">
                                 Check-out Tarihi: 
                                <input id="datepicker-example7-end" type="text" name='tarih2' >
    </div>
<input  TYPE="submit" class="button" NAME="Submit" VALUE="Rezervasyon Yap"  >

    </form> 
```

当我单击输入文件时，会出现日期选择器。所以如果我提交为空，我想要一个警报。对不起我的英语:) 感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:53:24.133

将属性从 ID 更改为 NAME - 这是我的疏忽。

```
$(document).ready(function () {
    $('form').submit(function (e) {
        $('input[name^="tarih"]').each(function () {
            if ($(this).val().length === 0) {
                alert("Your alert here"); //Whatever error message here.
                e.preventDefault();
                return false;
            }
        });
    });
}); 
```

小提琴：http: [//jsfiddle.net/6tp9P/3/](http://jsfiddle.net/6tp9P/3/)

# php - 尝试获取访问令牌时出错

> ID：15294138
> 
> 赞同：0
> 
> 时间：2013-03-08T12:36:21.730
> 
> 标签：php, facebook, facebook-access-token

我需要创建一个系统，当客户在他的网站上发布某些内容时，它将在他的 Facebook 上发布，但要做到这一点，我需要获取访问令牌，因为该帐户仍需要登录到我的系统。

我制作了我的应用程序并在我自己的 facebook 中对其进行了测试，当我尝试通过我的系统登录时它可以工作，但是当我尝试在客户端 facebook 中使用系统登录时，返回此错误：

> 发生了错误。稍后再试。

**我生成 AccessToken 的代码是这样的：**

require_once("php-sdk/src/facebook.php"); //来自 Git 的最新 SDK 文件

```
 $app_id = "APP_ID"; //ID do APP
    $app_secret = "APP_SECRET"; //Secret do APP

    $facebook = new Facebook(array(
      'appId'  => $app_id,
      'secret' => $app_secret
    ));

    $page_id = 'PAGE_ID';
    $message = "Teste de integração";

    $token_url = 'https://graph.facebook.com/oauth/access_token?'
        . 'client_id=' . $app_id
        . '&client_secret=' . $app_secret
        . '&grant_type=client_credentials';

    $token_response = file_get_contents_curl($token_url);
    $params = null;
    parse_str($token_response, $params);
    $app_access_token = $params['access_token'];

    // Get User ID
    $user = $facebook->getUser();

    if ($user) {
      try {
        $page_info = $facebook->api("/$page_id/?fields=access_token");
        //print_r($page_info);

        if( !empty($page_info['access_token']) ) {
        //if(!empty($app_access_token)) {
            $args = array(
                'access_token'  => $page_info['access_token'],
                'message'       => $message
            );
           // print_r($args);
           // $post_id = $facebook->api("/$page_id/feed","post",$args);
        } else {
            $permissions = $facebook->api("/me/permissions");
            if( !array_key_exists('publish_stream', $permissions['data'][0]) ||
               !array_key_exists('manage_pages', $permissions['data'][0])) {
                    // We don't have one of the permissions
                    // Alert the admin or ask for the permission!
                    header( "Location: " . $facebook->getLoginUrl(array("scope" => "publish_stream, manage_pages")) );
            }
        }
      } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
      }
    }

    // Login or logout url will be needed depending on current user state.
    if ($user) {
      $logoutUrl = $facebook->getLogoutUrl();
    } else {
      $loginUrl = $facebook->getLoginUrl(array('scope'=>'manage_pages,publish_stream, offline_access'));
    }

?>

<?php if (!$user): ?>
    <a href="<?php echo $loginUrl ?>">Login with Facebook</a>
<?php endif ?> 
```

我已经尝试重新配置用户，并且来自用户的所有配置与另一个未返回错误的帐户相同。

# positioning - FB发送弹框位置

> ID：15294142
> 
> 赞同：1
> 
> 时间：2013-03-08T12:36:31.457
> 
> 标签：positioning, send, fbml, xfbml

有没有办法定位FB发送按钮的弹出框？

我已经看到了一个带有额外 CSS 属性的“解决方法”并尝试了它，但它似乎是“俗气的”并且不是一个好的解决方案。FB 开发者页面没有提到这个，所以我认为这个功能没有被考虑！我唯一能说的是“这些 FB 家伙到底在想什么？！” - 因为假设我正在使用页面底部或右侧的按钮。如果我单击“发送”按钮，按钮下方会弹出框并弄乱所有页面布局！拥有类似于“position=[top|topLeft|center|whatever...]”的属性不是很聪明吗？怎么没人想到这个？我是唯一一个在页面底部使用 FB 按钮的人吗？

也许我遗漏了一些东西，FB 开发人员已经解决了这个问题（如果我认为你对这个问题很愚蠢，那么对不起）如果没有，有办法吗？

感谢您的帮助和欢呼。（ps不是想冒犯任何人，这只是拉扯头发的问题之一：P）

# c++ - 使用 C++ 的自动依赖项制作

> ID：15294147
> 
> 赞同：0
> 
> 时间：2013-03-08T12:36:47.083
> 
> 标签：c++, makefile

我看过，发现了一些看起来与这个问题相关的答案，但似乎没有任何帮助。

这是通常的故事 - 我有一个包含 .hpp 和 .cpp 文件的文件夹，我想将它们编译为 .o 文件，然后只有在它们所依赖的文件发生更改时才重新编译文件。

我当前的makefile是：

```
SRCS = $(shell find ../Includes/ -name "*.cpp")
DEPS = $(SRCS:.cpp=.d)
OBJS = $(SRCS:.cpp=.o)

all: $(DEPS) $(OBJS)

# Create the dependency files
%.d : %.cpp
    clang++ -MM $< -o $@ -c -std=c++11

# Include the dependency files
include $(DEPS)

# Compile the source files
%.o : %.cpp
    clang++ -c -Wall -std=c++11 $< -o $@ 
```

我已经运行了几次（所以依赖文件在我运行 make 之前就存在，并且在我包含它们时肯定存在）。我还尝试将 %.d 添加到 %.o 的依赖项中。

基本上，此时发生的所有事情都是“触摸” .cpp 会导致重新生成 .o 和 .d 文件，而触摸 .hpp 文件（在 .d 文件中列出的其他文件）什么也不做。

示例依赖文件：

```
SomeFile.o : ../Includes/SomeFile.cpp \
    ../Includes/SomeFile.hpp ../Includes/SomeOtherFile.hpp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:37:39.907

除了路径问题，我发现沿途创建依赖关系更自然，即使用`-MD`or`-MMD`标志。这样您就不需要规则来更新依赖文件。

```
CPPFLAGS += -MMD

TARGET := hello

.DEFAULT: all
all: $(TARGET)

SRCS := $(shell find . -type f -name "*.cpp")
OBJS := $(SRCS:.cpp=.o)
DEPS := $(SRCS:.cpp=.d)

hello: $(OBJS)
        $(LINK.cc) -o $@ $^

-include $(DEPS) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:21:12.367

事实证明，我正在为以下内容创建规则：

```
SomeFile.o : ... 
```

而我需要一个规则：

```
../Includes/SomeFile.o : ... 
```

感谢 NovaDenizen 让我走上了正确的道路。

# java - 携带 RuntimeExceptions 的抛出声明

> ID：15294149
> 
> 赞同：2
> 
> 时间：2013-03-08T12:36:49.080
> 
> 标签：java, exception, defensive-programming

假设我有一个方法或构造函数，它在内部使用另一个方法或构造函数，可以抛出 RuntimeException。

```
// Example:
public MyClass(Object arg) {
    setVar(arg);
    // Not responsible for dealing with the exception
}

public void setVar(Object arg) throws MyRuntimeException {
    if(!isValidArg(arg))
        throw new MyRuntimeException("Got you, evil argument!");
    // Do something
} 
```

在这种情况下，如果未满足必要的先决条件，则会引发 RuntimeException。

**问：**包装方法/构造函数是否应该声明相同的异常，如果它的参数可能导致异常被抛出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T12:41:14.837

这实际上取决于代码所在的上下文。如果你想制作一些自包含的东西，比如库，你可能想在类中捕获异常，只是为了让你的代码更干净。

但是，如果您将代码作为项目的一部分，那么正如您所说，我会“携带抛出异常”，直到它在语义上没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:44:16.517

如果不应该在包装方法中处理它，我会声明它 - 与*检查*异常相同。

无论如何，即使对于未经检查的异常，也有这样*的方法提示很好。*客户将决定是否需要处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:39:59.393

`RuntimeExceptions`被抛出而无需将其包含在这两种方法的 throws 签名中。

您应该阅读[有关](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)运行时异常的信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T12:47:21.763

不，不检查运行时异常，即编译器不会强迫您处理它们。但是作为一种良好的编程习惯，您可以处理异常，例如

```
public MyClass(Object arg) {
  try{
    setVar(arg);
}
catch(MyRuntimeException exp){
   // code if exception arises
} 
```

# php - 如何使用单选按钮打开基于所选 id 的弹出窗口以及如何使用 php、MySQL 将所选 id 传递给弹出窗口

> ID：15294151
> 
> 赞同：0
> 
> 时间：2013-03-08T12:36:53.627
> 
> 标签：php, javascript, mysql

我正在使用 mysql_fetch_array() 从 MYSQL 获取数据，并使用 PHP 以 HTML 表的形式显示该数据。HTML Table 的第一列是数据库表的主键。我在显示获取的结果时添加了单选按钮。我在 HTML 表格顶部有 UPDATE 和 DELETE 按钮。如果我选择一个单选按钮并单击 UPDATE/DELETE，应该会出现一个弹出窗口来显示所选的行值。为此，我认为我需要将选定的行 ID/键传递给弹出窗口。如果有人知道如何实现它，请告诉我！

```
<?php
    while($rows=mysql_fetch_array($result))
    {

 ?>
 <table>
  <tr>
   <td><? echo $rows['ID']; ?></td>
   <td><input type="radio" name="" value=""><? echo $rows['Name']; ?></td>
   <td><? echo $rows['Surname']; ?></td>
   <td><? echo $rows['Number']; ?></td>
  </tr>
</table>
  <?php
 }
?> 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:57:07.397

请看这段代码

```
 <td><input type="radio" name="" value="" onclick="alert("<?php echo "you have selected ".$rows['ID']." want to update or delete??"; ?>")"><? echo $rows['Name']; ?></td> 
```

希望它有用llll

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:48:18.117

您可以使用以下代码执行 UPDATE 和 DELETE 操作。

```
<table>
    <tr id="row_1" data-idval="1"><td>1</td>
        <td>XYZZZZ</td>
        <td>PQR</td>
        <td>----</td>
        <td><span class="update">UPDATE</span></td>
        <td><span class="delete">DELETE</span></td>
   </tr>    
   <tr id="row_2" data-idval="2"><td>2</td>
        <td>XYZZZZ</td>
        <td>PQR</td>
        <td>----</td>
        <td><span class="update">UPDATE</span></td>
        <td><span class="delete">DELETE</span></td>
   </tr>  
        <tr id="row_3" data-idval="3"><td>3</td>
        <td>XYZZZZ</td>
        <td>PQR</td>
        <td>----</td>
        <td><span class="update">UPDATE</span></td>
        <td><span class="delete">DELETE</span></td>
   </tr>  
</table> 
```

Javascript：-

```
<script type="text/javscript">
function yesnodialog(button1, button2, element){
  var btns = {};
  btns[button1] = function(){ 
      var id_val =  element.parents('tr').data('idval');
      alert(id_val);
      //write here update code using ajax here
      $(this).dialog("close");
  };
  btns[button2] = function(){ 
      // Do nothing
      $(this).dialog("close");
  };
  $("<div></div>").dialog({
    autoOpen: true,
    title: 'Condition',
    modal:true,
    buttons:btns
  });
}
$('.update').click(function(){
    yesnodialog('Yes', 'No', $(this));
})

</script> 
```

你也可以这样做`DELETE`。

[在此处](http://jsfiddle.net/kXVRe/5/)查看现场演示

# iphone - 文本框画外音问题

> ID：15294156
> 
> 赞同：2
> 
> 时间：2013-03-08T12:37:05.310
> 
> 标签：iphone, ios, accessibility, voiceover

我正在尝试在`UITextField`.

一切正常，但是当画外音打开并且焦点继续时`UITextField`，它会显示“uitextfield，双击编辑”。一旦键盘打开并再次点击它，它仍然会显示相同的消息，而不是说“uitextfield 正在编辑”。

仅当我们尝试呈现自定义键盘视图时，此问题才会存在。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    field1.inputView=keyBoard;
}

- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    return TRUE;
}

-(BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    return YES;
} 
```

如您所见，代码中没有太多内容。只有产生问题的行是

```
field1.inputView=keyBoard; 
```

如果您使用默认键盘，那么画外音将照常工作。

# django - 选择对象，然后选择与此相关的另一个对象

> ID：15294157
> 
> 赞同：0
> 
> 时间：2013-03-08T12:37:07.360
> 
> 标签：django, django-models, django-admin

我很难用文字来解释我需要什么，所以我这里有一些代码：

```
class Configuration(models.Model):
    name = models.CharField(max_length=250)
    firmware_version = models.ForeignKey(FirmwareVersion)
    devices_amount = models.PositiveIntegerField()
    def __unicode__(self):
        return unicode(self.name)

class Firmware(models.Model):
    name = models.CharField(max_length=250)
    circuit_model = models.ForeignKey(Versiiplates)
    def __unicode__(self):
        return unicode(self.name)

class FirmwareVersion(models.Model):
    firmware = models.ForeignKey(Firmware)
    version = models.CharField(max_length=100)
    file = models.FileField(upload_to="firmware/")
    upload_date = models.DateField(default = datetime.date.today())
    notes = models.TextField(max_length=2500, null=True, blank=True)
    def __unicode__(self):
        return u'%s %s' % (self.firmware.__unicode__(), self.version) 
```

有没有办法在管理员更改表单中选择先配置固件，然后再选择与之相关的任何固件版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:52:46.330

[使用django-smart-selects](https://github.com/digi604/django-smart-selects)实现这种行为非常简单。在我的情况下，配置类应该如下所示：

```
class Configuration(models.Model):
    name = models.CharField(max_length=250)
    firmware = models.ForeignKey(Firmware, related_name="firmware")
    firmware_version = ChainedForeignKey(FirmwareVersion, chained_field="firmware", chained_model_field="firmware", show_all="False", auto_choose=True)
    devices_amount = models.PositiveIntegerField()
    def __unicode__(self):
        return unicode(self.name) 
```

# intuit-partner-platform - Intuit Anywhere：无效签名错误 401

> ID：15294159
> 
> 赞同：0
> 
> 时间：2013-03-08T12:37:20.397
> 
> 标签：intuit-partner-platform, quickbooks-online

我要在某个日期之前获取帐户我使用以下代码

```
TimeZoneInfo pst = TimeZoneInfo.FindSystemTimeZoneById("Pacific Standard Time");
        DateTime now = TimeZoneInfo.ConvertTime(new DateTime(2012, 06, 30), pst);
        accountQuery.CreateTime = now;
        accountQuery.SpecifyOperatorOption(FilterProperty.CreateTime, 
               FilterOperatorType.BEFORE);
        accountQuery.PageNumber = 1;
        accountQuery.ResultsPerPage = 100;
        string a = Response.ToString();
        List<Intuit.Ipp.Data.Qbo.Account> accounts =
           accountQuery.ExecuteQuery<Intuit.Ipp.Data.Qbo.Account>(context)
              .ToList<Intuit.Ipp.Data.Qbo.Account>(); 
```

但我收到一个错误 Unauthorized OAuth Token: signature_invalid

# css - 如何让摘录文本在 div 的底部自动切断

> ID：15294164
> 
> 赞同：1
> 
> 时间：2013-03-08T12:37:41.983
> 
> 标签：css, html

在这个小提琴中，你会看到像这样的 div：

[http://jsfiddle.net/tickzoom/gzREg/](http://jsfiddle.net/tickzoom/gzREg/)

```
<div class="excerpt">
    <div class="excerpt-text">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce cursus
            scelerisque aliquet. Aenean tincidunt cursus adipiscing. Phasellus viverra
            facilisis tortor. Pellentesque interdum scelerisque eros, id auctor est
            porttitor at. Vestibulum semper lacus sed ipsum varius eu semper erat condimentum.
            </p>
    </div>
    <div class "excerpt-more">
        <p>Learn more</p>
    </div>
</div> 
```

和这样的风格：

```
.excerpt {
    position: absolute;
    width: 200px;
    height: 100%;
}
.excerpt-text {
    width: 100%;
    height: 80px;
    padding: 5%;
}
.excerpt-more {
    height: 20px;
    width: 100% color: red;
} 
```

请注意，在小提琴中，第一个 div 的lipsum 文本超出了第二个 div 中的 Learn More 文本。文本需要限制在顶部 div 内，以便在调整整个页面大小时显示更多或更少的文本，但始终显示 Learn More。

一定有一些简单的东西我遗漏或做错了，因为我有一个网站，它可以通过 WordPress 上的 Genesis 框架插件（称为 Genesis Responsive Slider）工作。他们插件的问题在于“了解更多”链接跟随文本，因此在较小的屏幕上它会消失在边界框之外。

因此计划是在插件 PHP 代码中引入第二个 div，以防止 Learn More 链接在较小的屏幕尺寸下消失。

如果您想查看有问题的临时开发站点： http: [//side.tickzoom.com](http://side.tickzoom.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:39:35.740

你的意思是这样吗？

[参见 jsFiddle](http://jsfiddle.net/FLaSp/)

```
.excerpt-text {
    overflow:hidden;
} 
```

然后使文本大小变大是调整高度的另一个问题`.excerpt-text`。

[参见 jsFiddle](http://jsfiddle.net/cZUJ4/)

```
.excerpt-text {
    height: 50%;
} 
```

**编辑：**尝试删除以下规则

```
html > body .slide-excerpt-border {
    float: left;
} 
```

你也应该`html > body`从这条规则中删除，所以它只是`.slide-excerpt-border`，开始部分是多余的。

**编辑：**当你修复它时，我做了这个

![在此处输入图像描述](../Images/3078e6efe2edf64dde451f96d55dc109.png)

我添加了这个：

```
.slide-excerpt-border {
    height: 95%;
    display: block;
    overflow: hidden;
} 
```

并将 Learn Move 锚移到下方`.slide-excerpt-border`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:40:58.407

尝试

```
.excerpt{text-overflow: ellipsis;} 
```

但是请检查它是否适用于您想要的所有浏览器，它是一个 CSS3 属性，不久前在大多数浏览器中还没有工作。

编辑：结合上面提到的溢出：隐藏可能是最好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:43:45.680

您需要对不同的屏幕类型使用响应式媒体查询。

这是一个示例和说明如何使用它[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

或者还有关于这个的另一个问题

[使 div 内容响应](https://stackoverflow.com/questions/12632500/making-div-content-responsive)

# html - 使用 HTML 5 和 jsp 播放音频文件

> ID：15294170
> 
> 赞同：0
> 
> 时间：2013-03-08T12:38:04.370
> 
> 标签：html, jsp, netbeans-7

我正在尝试播放音频文件，当我有一个 .html 文件时它可以工作，但是当我在 .jsp 文件中运行相同的代码时，无法播放该文件。我正在使用 Netbeans IDE。有人可以指出错误，这是jsp代码。

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
</head>
<body>
    <h1>Hello World!</h1>
    <audio controls>

        <source src="C:\Users\Desktop\1.mp3" type="audio/mpeg">

    </audio>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:13:04.653

该`src`属性不应是音频文件的文件位置。相反，它应该是文件的 URL。所以在你的情况下，试试

```
<audio controls>
     <source src="http://localhost:8080/PathToMp3/1.mp3" type="audio/mpeg">
</audio> 
```

**`http://localhost:8080/PathToMp3/1.mp3`**您的 mp3 文件的网址在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-28T06:57:48.707

```
 <audio controls>
     <source src="http://localhost:8080/PathToMp3/1.mp3" type="audio/mpeg">
 </audio> 
```

如果它不工作使用这个

```
 <embed src=""> 
```

# scala - Heroku Slug 大小为 222 MB / Play Framework 2.1 /

> ID：15294178
> 
> 赞同：7
> 
> 时间：2013-03-08T12:38:55.007
> 
> 标签：scala, heroku, sbt, playframework-2.1

我在 Heroku 上的应用程序块大小指示 222 mb。相当大，超出了允许的 200MB。

因此，我检查了这些东西：

*   检查我的源代码大小：**89,9 Mo**知道**80,2 Mo**来自播放应用程序的**目标文件夹**。

*   检查我的 .gitignore 文件以确保播放应用程序的目标文件夹被排除在外。这是我的 .gitignore 文件：

> ```
> .DS_Store         
> logs   
> project/project    
> project/target   
> target                 // target well precised here
> tmp     
> .history    
> dist      
> /.idea     
> / *.iml  //space here otherwise appears as a comment here    
> /out     
> /.idea_modules    
> /.classpath    
> /.project    
> /RUNNING_PID     
> /.settings 
> ```

检查我的 SBT ivy 缓存大小：**100,9 Mo**

这里详细介绍每个文件夹的大小（左侧）：

> MikaPc:cache Mika$ du -xak .|sort -n|tail -50
> 1664 ./org.neo4j/neo4j/docs 1664 ./org.neo4j/neo4j/docs/neo4j-1.9.M05-javadoc.jar
> 1668 ./ org.neo4j/neo4j-kernel/docs
> 1668 ./org.neo4j/neo4j-kernel/docs/neo4j-kernel-1.9.M05-javadoc.jar
> 1680 ./org.springframework/spring-test 1748 ./org.neo4j/ neo4j
> 1752 ./org.aspectj/aspectjweaver/jars
> 1752 ./org.aspectj/aspectjweaver/jars/aspectjweaver-1.7.1.jar
> 1860 ./org.springframework/spring-jdbc
> 1888 ./org.springframework.data/spring-数据共享
> 1980 ./org.scala-sbt/main/jars
> 1980 ./org.scala-sbt/main/jars/main-0.12.2.jar
> 1992 ./org.scala-sbt/main
> 2100 ./org.弹簧框架/弹簧上下文/文档
> 2100 ./org.springframework/spring-context/docs/spring-context-3.2.0.RELEASE-javadoc.jar 2104 ./com.sun.jersey 2348 ./org.springframework/spring-core
> 2356 ./org.springframework .data/spring-data-neo4j
> 2404 ./org.springframework/spring-beans
> 2776 ./org.apache.lucene/lucene-core
> 2800 ./org.springframework/spring-web
> 2808 ./org.springframework/spring-webmvc
> 2812 ./org.aspectj/aspectjweaver/docs
> 2812 ./org.aspectj/aspectjweaver/docs/aspectjweaver-1.7.1-javadoc.jar 2844 ./org.apache.lucene 3016 ./org.neo4j/neo4j-kernel/jars
> 3820 ./org.springframework/spring-context
> 4356 ./org.neo4j/neo4j-cypher/jars
> 4356 ./org.neo4j/neo4j-cypher/jars/neo4j-cypher-1.9.M05.jar
> 4436 ./org.specs2/specs2_2.10/docs
> 4436 ./org.specs2/specs2_2.10/docs/specs2_2.10-1.13.1-SNAPSHOT-javadoc.jar 4584 ./org.scalaz/scalaz-core_2.10 /docs
> 4584 ./org.scalaz/scalaz-core_2.10/docs/scalaz-core_2.10-7.0-SNAPSHOT-javadoc.jar 4824 ./org.neo4j/neo4j-cypher 5712 ./org.neo4j/neo4j-kernel
> 5936 ./org.aspectj/aspectjweaver
> 6024 ./org.springframework.data 6484 ./org.aspectj
> 6520 ./org.specs2/specs2_2.10/jars
> 6520 ./org.specs2/specs2_2.10/jars/specs2_2.10 -1.13.1-SNAPSHOT.jar
> 6812 ./org.scala-sbt 8288 ./org.scalaz/scalaz-core_2.10/jars
> 8288 ./org.scalaz/scalaz-core_2.10/jars/scalaz-core_2.10 -7.0-SNAPSHOT.jar 11500 ./org.specs2/specs2_2.10 11524 ./org.specs2
> 13132 ./org.scalaz/scalaz-core_2.10 13140 ./org.scalaz
> 15832 ./org.neo4j 23500 ./org.springframework
> 98552 。

我的 SBT 构建文件包含以下依赖项：

```
val appDependencies = Seq(
    jdbc,
    anorm,
    "org.springframework" % "spring-aop" % "3.2.0.RELEASE",
    "org.springframework" % "spring-aspects" % "3.2.0.RELEASE",
    "org.springframework" % "spring-beans" % "3.2.0.RELEASE",
    "org.springframework.data" % "spring-data-commons-core" % "1.4.1.RELEASE",
    "org.springframework" % "spring-expression" % "3.2.0.RELEASE",
    "org.springframework" % "spring-jdbc" % "3.2.0.RELEASE",
    "org.springframework" % "spring-orm" % "3.2.0.RELEASE",
    "org.springframework" % "spring-test" % "3.2.0.RELEASE",
    "org.springframework" % "spring-tx" % "3.2.0.RELEASE",
    "org.springframework.data" % "spring-data-neo4j" % "2.2.0.RELEASE" excludeAll(
      ExclusionRule(organization = "com.sun.jdmk"),
      ExclusionRule(organization = "com.sun.jmx"),
      ExclusionRule(organization = "javax.jms")
      ),
    "org.neo4j" % "neo4j" % "1.9.M05" excludeAll(
        ExclusionRule(organization = "org.neo4j", name="neo4j-kernel")
      ),
    "org.neo4j" % "neo4j-kernel" % "1.9.M05" % "test" classifier "tests" classifier "",
    "asm" % "asm-all" % "3.1",
    "org.springframework.data" % "spring-data-neo4j-rest" % "2.1.0.RELEASE" excludeAll(
      ExclusionRule(organization = "org.neo4j")
      ),
     "org.neo4j" % "neo4j-rest-graphdb" % "1.9.M04",
     "org.scalaz" %% "scalaz-core" % "7.0-SNAPSHOT" withSources(),
     "org.specs2" %% "specs2" % "1.13.1-SNAPSHOT" % "test" withSources(),
     "org.mockito" % "mockito-all" % "1.9.0" %"test",
     "securesocial" %% "securesocial" % "master-SNAPSHOT" withSources()
  ) 
```

我能做些什么来减少这个巨大的蛞蝓尺寸？即使我删除了一些文档和 jar 源，大小也会很大。

似乎确实发送了播放应用程序的目标文件夹..尽管有`.gitignore`文件

当然，我已经使用这个 buildpack 创建了我的 Heroku 应用程序：[https ://github.com/heroku/heroku-buildpack-scala](https://github.com/heroku/heroku-buildpack-scala)

此外，有没有办法在 SBT（或播放配置）中精确，在 Heroku 生产环境中不应该下载像 Specs2（测试）这样的特定依赖项？

**编辑 - - - - -**

我运行了以下命令来显示我在 Heroku 上推送的内容的实际大小：

```
MikaPc:wwa Mika$ heroku run bash    
Running `bash` attached to terminal... up, run.9266        
~ $ du -h --apparent-size --max-depth 2       
5.3K    ./test/resources         
12K ./test/unit         
5.6K    ./test/functional          
6.5K    ./test/context          
8.5K    ./test/acceptance         
5.2K    ./test/integration         
47K ./test           
5.0K    ./app/helpers          
33K ./app/controllers           
11K ./app/models          
161K    ./app/assets          
34K ./app/views           
8.0K    ./app/applicationservices           
5.0K    ./app/repositories           
20K ./app/utils           
281K    ./app             
8.7M    ./target/scala-2.10           
1.4M    ./target/resolution-cache          
143K    ./target/streams             
60M ./target/staged           
71M ./target          
1.1M    ./.sbt_home/bin          
834K    ./.sbt_home/.sbt           
1.9M    ./.sbt_home         
30K ./public/images            
171K    ./public/javascripts          
9.6K    ./public/stylesheets         
214K    ./public         
4.0K    ./.ivy2/cache        
8.0K    ./.ivy2         
1.1M    ./.jdk/bin         
19M ./.jdk/lib         
203K    ./.jdk/include          
227M    ./.jdk/jre           
247M    ./.jdk             
2.8M    ./project/target          
20K ./project/project            
53M ./project/boot           
56M ./project         
12K ./conf           
375M    . 
```

压缩前 375 Mo 我想最终会达到 222Mo .. 哼

赢家是：`227M ./.jdk/jre` 分一杯羹大小。这……正常吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T17:56:03.287

Heroku 最近改变了我们为您的应用程序部署的 JDK 的构建方式。它现在比以前大很多。我们还提高了 slug 大小限制，因此这不会妨碍您的应用程序，只会让发布速度变慢一些。

我们将更新文档以匹配实际的当前限制。

# ios - 从 textField 中选择粗体和斜体文本

> ID：15294179
> 
> 赞同：3
> 
> 时间：2013-03-08T12:38:57.757
> 
> 标签：ios, objective-c, macos, cocoa

如何仅选择用户在 textField/textView 中输入的**粗体**和*斜体文本？*

我们可以将选定的文本设为**粗体**、*斜体*、下划线以及这三者的任意组合，反之亦然。

**这不是 Mac OSX 或 iOS 特有的，任一解决方案对我都有好处。*

编辑：

我尝试将属性字符串中的文本读取为：

```
NSAttributedString *string=self.textView.string; 
```

但是随着 textView 和 textField 返回`NSString`，所以所有格式都消失了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T12:50:43.853

在 iOS 上使用带有标签/文本字段的属性文本属性

在 OSX 上使用属性字符串值

然后，您可以枚举属性文本的属性并检查每个属性。我会编写一些代码（osx 和 iOS）

```
NSMutableAttributedString *str = [[NSMutableAttributedString alloc] initWithString:@"none "];

id temp = [[NSAttributedString alloc] initWithString:@"bold " attributes:@{NSFontAttributeName: [UIFont boldSystemFontOfSize:12]}];
[str appendAttributedString:temp];

temp = [[NSAttributedString alloc] initWithString:@"italic " attributes:@{NSFontAttributeName: [UIFont italicSystemFontOfSize:12]}];
[str appendAttributedString:temp];

temp = [[NSAttributedString alloc] initWithString:@"none " attributes:@{NSFontAttributeName: [UIFont systemFontOfSize:12]}];
[str appendAttributedString:temp];

temp = [[NSAttributedString alloc] initWithString:@"bold2 " attributes:@{NSFontAttributeName: [UIFont boldSystemFontOfSize:12]}];
[str appendAttributedString:temp];

self.label.attributedText = str;

NSMutableString *italics = [NSMutableString string];
NSMutableString *bolds = [NSMutableString string];
NSMutableString *normals = [NSMutableString string];

for (int i=0; i<str.length; i++) {
    //could be tuned: MOSTLY by taking into account the effective range and not checking 1 per 1
    //warn: == might work now but maybe i'd be cooler to check font traits using CoreText
    UIFont *font = [str attribute:NSFontAttributeName atIndex:i effectiveRange:nil];
    if(font == [UIFont italicSystemFontOfSize:12]) {
        [italics appendString:[[str mutableString] substringWithRange:NSMakeRange(i, 1)]];
    } else if(font == [UIFont boldSystemFontOfSize:12]){
        [bolds appendString:[[str mutableString] substringWithRange:NSMakeRange(i, 1)]];
    } else {
        [normals appendString:[[str mutableString] substringWithRange:NSMakeRange(i, 1)]];
    }
}

NSLog(@"%@", italics);
NSLog(@"%@", bolds);
NSLog(@"%@", normals); 
```

现在这里是如何找到它。从中推断选择范围应该很容易:)

**注意：只能连续选择！在 osx 和 ios 上都不能选择文本字段/文本视图的 n 部分**

# java - 数组的断言错误

> ID：15294186
> 
> 赞同：0
> 
> 时间：2013-03-08T12:39:23.310
> 
> 标签：java, arrays, junit4, assertion

```
Public class Person {
    private Skill[] skills;

    public Skill[] getSkills() {
        return skills;
    }

    public void setSkills(Skill[] s) {
        if (s!= null) {
            skills = new Skill[s.length];

            for (int i = 0; i < s.length; i++) {
                skills[i] = s[i];
            }
        }
    }
}
} 
```

假设有一个类`skill`。问题是在 Junit 中有一个测试用例来测试方法 setSkill ugiving s = 技能数组本身。这个测试用例返回`Assertion error`告诉我`The returned skill array should be the same`，当我更改`getSkill`为两个数组提供相同的引用时，测试用例通过了。

有人可以帮我吗？如何复制元素而不是参考？为什么测试用例会失败？

测试用例是：

```
@Test(timeout = 1000) 
public void testGetSkills() { 
    instance.setSkills(skills); 
    assertSame("The returned skill array should be the same", instance.getSkills(), skills); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:03:49.367

您提到您的测试用例使用`assertSame`. 这寻找引用相等，并要求`a == b`.

您的代码会创建一个副本。副本永远不会与原始副本具有引用相等性。在某些覆盖该`Object`方法的类中，`Equals`它可能`assertEquals`会通过。如果是数组，请尝试使用`assertArrayEquals`.

例如这个测试应该通过：

```
@Test
public void assertArrayEqualsTest() throws Exception {
  assertArrayEquals(new int[]{1, 2, 3}, new int[]{1, 2, 3});
} 
```

但是这个测试会失败：

```
@Test
public void assertSameTest() throws Exception {
  assertSame(new int[]{1, 2, 3}, new int[]{1, 2, 3});
} 
```

你应该清楚为什么会这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:49:14.597

您不是在复制元素，您只需创建另一个指向相同元素的数组。所以如果你的测试用例后来修改了数组技能，你也会修改原来的数组s。我想这就是导致断言失败的原因。

# vb.net - 我正在从 Visual Basic 启动一个 openGL 程序 exe 文件，但缺少纹理。怎么了？

> ID：15294189
> 
> 赞同：0
> 
> 时间：2013-03-08T12:39:30.073
> 
> 标签：vb.net, path, textures, exe

启动 exe 的行是：

```
Shell("""D:\glut\SB5\VisualStudio2008\Chapter06\TexturedTriangle\TexturedTriangle.exe"" """ & lat & " " & lng, vbNormalFocus) 
```

并且纹理存在于函数参数中的同一路径。从 vb 代码的输出执行 exe 时，我只看到一个没有任何纹理的三角形

它还说

找不到 TexturedIdentity.vp 的着色器。当文件位于同一路径时

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T23:33:14.327

Shell 命令将使用当前进程目录而不是目标 exe 目录启动应用程序。

要解决您的问题：尝试使用 System.Diagnostics.Process：

```
Dim exePath As String = "D:\parent\child\TexturedTriangle.exe"

Dim info As New ProcessStartInfo(exePath ) 
info.WorkingDirectory = IO.Path.GetDirectoryName(exePath)
info.Arguments = lat & " " & lng
Process.Start(info) 
```

# php - PHP 页面中的随机空格（客户端接收到的页面，但不是客户端接收到的源代码），但仅当我使用 include()

> ID：15294192
> 
> 赞同：0
> 
> 时间：2013-03-08T12:39:37.380
> 
> 标签：php, php-include

好吧，我遇到了历史上最奇怪的问题。我正在制作一个可以在 HTML 中完美运行的网站，但是在从 PHP 呈现时却出现了一些非常奇怪的行为——尽管客户端源代码完全相同（我逐个字符地浏览了它）。

起初我以为我在包含的“functions.php”文件中弄乱了一些东西，但我没有收到任何错误，当我将该文件的内容复制并粘贴到包含的地方时（'函数.php'); 线是，问题消失了。

这是我的代码（删除了一些 HTML，这是所有的 PHP）：

```
<?php
    error_reporting(E_ALL);
    ini_set('display_errors','1');
    include 'functions.php';
    $footer = file_get_contents('footer.txt');
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Removed</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <link type="text/css" rel="stylesheet" href="css/jquery-ui-custom.css" />
    <link type="text/css" rel="stylesheet" href="css/main.css" />
</head>
<body>
    <div id="header">
        <div id="headerContent">
        <div id="logo">
            &nbsp;
        </div>
<?php
    echo trim(GetNav());
?>
        </div>
    </div>
    <div id="content">
<?php
    $NumberOfNewsItems = 2;
    echo trim(GetNews($NumberOfNewsItems));
?>
    </div>
<?php
    echo trim($footer);
?>

</body>
</html> 
```

GetNav 和 GetNews 函数从数据库中获取信息，所以我不会显示它们的代码，另外，正如我之前提到的，如果我不包含文件，而是将其内容复制到我进行包含的地方调用然后大部分空白消失（仍然有一些'echo $footer'调用所在的位置。

基本上，当您查看源代码时，一切看起来都很好。当你按下 F12 来查看开发工具时，事情变得非常奇怪，元素选项卡在标签之后（这会影响网站的外观）以及在页脚和内容 Div（同样会影响网站的外观）。

同样在此视图中，来自 的所有标签都位于第一组空白下方，并且标签为空（例如：）`<head></head>`。

源代码看起来不错（如果我将源代码复制并粘贴到 HTML 文件中，它可以完美地工作），我不得不承认这让我大吃一惊。

请帮助我 Obi-Wan-Kenobi，你是我唯一的希望（是的，我喜欢《星球大战》，尽管我希望他们制作的电影不止三部）。

PS 这可能非常明显，但我是一个 .Net 开发人员，在业余时间为家人做这件事（学习新语言也很有趣，即使是那些过度喜欢 $ 符号的语言），所以如果提前道歉我是世界上最大的新手。

编辑：我在开发工具中看到的是：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head></head>
<body>
"

      "
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Removed</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <link type="text/css" rel="stylesheet" href="css/jquery-ui-custom.css" />
    <link type="text/css" rel="stylesheet" href="css/main.css" /> 
```

等等。

EDIT2：为了清楚起见，我不在乎开发工具显示什么，只是我得到空白显示这些引号在实际网站上的位置，除了一切都很完美。

EDIT3：此外，无法使用元素选择器单击空格，并且在元素选项卡中选择空格不会突出显示网站上的任何内容。在元素选项卡中删除它但是确实修复了网站（直到它明显重新加载），但显然对我的问题没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:47:19.863

尝试删除 functions.php 文件中的 ?> 并且代码后没有空白行。functions.php 是否与主文件位于同一目录中？

只是一个提示，包括一个 footer.php 而不是 file_get_content :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:48:17.467

我无法以令我满意的方式解决此问题，但这是我实施的解决方法：

我从头文件中完全删除了 include，并将 functions.php 分解为每个函数一个文件，并将它们包含在需要调用的地方。

这缓解了我的问题，尽管它并不理想。很高兴我不必每天都使用 PHP :)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:10:07.450

我遇到了同样的问题，在控制台上，html 的源代码如下所示：

通过检查编码，一些文件用 utf-8 和 bom 编码，一些文件用 big5 编码。通过将这些文件保存到 utf-8（没有 bom）为我解决了这个问题。

我已经使用 Sublime Text 2 和包管理器中的 EncodingHelper 来查看当前文件编码。

希望能帮助到你。

# java - Apache Felix 捆绑堆内存使用监控

> ID：15294197
> 
> 赞同：0
> 
> 时间：2013-03-08T12:39:52.283
> 
> 标签：java, osgi, apache-felix

是否有一个很好的工具来监控每个 OSGI 包随时间占用多少堆内存？

谢谢，雷特普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:49:32.100

通常不可能确定单个捆绑包使用的内存量；只有整个应用程序使用的内存量。

例如：假设bundle A调用了bundle B提供的方法，而bundle B中的方法创建了一个对象。谁负责该对象消耗的内存？Bundle B 直接创建了它，但如果 bundle A 没有要求它，它就不会这样做。所以我们不能真正将内存消耗分配给 A*或*B。

为了监控整个应用程序的内存消耗，我推荐[YourKit](http://yourkit.com/)和/或[Eclipse Memory Analyzer](http://www.eclipse.org/mat/)。

# extjs - 如何使表单域和工具栏按钮居中？

> ID：15294200
> 
> 赞同：1
> 
> 时间：2013-03-08T12:40:00.337
> 
> 标签：extjs, extjs4.1, extjs-mvc

我在 extjs4 工作。我卡在我想在面板中正确格式化中心位置的项目的地方。但我不知道怎么做。

![这是我的注册表单视图](../Images/83b0268b65ce88f172c0f0aed4d641af.png)

实际上我想在中间位置而不是左侧显示所有项目..我也想在中心位置显示提交按钮，但它会在左侧显示..我面临这个问题......

这是我的一些代码：

```
Ext.define('Am.user.Registration',  {
    extend:'Ext.form.Panel',
    //extend:'Ext.window.Window',
    id:'registationId',
    alias:'widget.Registration',
    title:'Registration form',
    resizable:false,
    buttonAlign:'center',
    closable:true,
    titleAlign:'center',
    //autoScroll:true,
    draggable:false,
    //shadow:true,
    height:350,
    width:800,
    floating:true,
    bodyPadding: 30,
    //collapsible:true,
    requires:[
             'Balaee.view.sn.user.Captcha'
              ], 
     defaults:{
        //align:'center'
        defaultAlign:'t1-c'
     },         
     //bodyStyle: 'align:center',        
   // Ext.require(['Ext.form.field.Date']);
    items:[
    {
        xtype:'combo',
        fieldLabel:'Language',
        name:'language',
        emptyText: 'Language',
        store: ['Marathi','Hindi','English'],
        queryMode: 'local',
        editable:false
    }, 
    {
        xtype: 'fieldcontainer',
        fieldLabel: 'Name',
        layout: 'hbox',
        combineErrors: true,
        defaults: {
            hideLabel: true
        },
        items: [
            {xtype: 'textfield',    fieldLabel: 'First', name: 'firstName', emptyText: 'First name',width: 80,  allowBlank: false,margins: '0 5 0 0'},
            {xtype: 'textfield',    fieldLabel: 'Middle', name: 'middleName',emptyText: 'Middle name', width: 80, allowBlank: true, margins: '0 5 0 0'},
            {xtype: 'textfield',    fieldLabel: 'Last', name: 'lastName', emptyText: 'Last name',width: 80, allowBlank: false,
                validator: function(value) {
                    var password1 = this.previousSibling('[name=firstName]');
                    return (!(value === password1.getValue())) ? true : 'Dont give first name and last name same.'
                }                           
            }
        ]
    },
    {
        xtype:'textfield',
        fieldLabel:'Primary email',
        name:'primaryEmail',
        //anchor:'100%',
        allowBlank:false,
        emptyText: 'Email',
        vtype:'email'
        //labelAlign:'right',
    },
    ---------------
    --------------
    ],//End of items square
//  buttons:[{
//      xtype:'button',
//          formBind: true,
//          fieldLabel:'submitttttttt',
//          action:'submitAction',
//          text:'Submit',
//          defaultAlign:'t1-c'
//  }   
//  ],
    bbar:
    [
        {
            xtype:'button',
            formBind: true,
            fieldLabel:'submit',
            action:'submitAction',
            text:'Submit',
            defaultAlign:'t1-c'
            //flex:6,
        },
    ],//End of buttons square
});// End of login class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:25:22.183

您应该将[HBox](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.layout.container.HBox-cfg-pack)布局（带有 pack: 'center'）应用到您的表单和工具栏上。

[您可以在此处](https://stackoverflow.com/a/8315120/1179377)查看如何为表单完成此操作的示例。对于工具栏：

```
var toolbar = new Ext.Toolbar({
    dock: 'bottom',
    layout:{
        pack: 'center'
    },
    items: [{
        xtype: 'button',
        text: 'foobar',
        handler: function(){
           alert('ok');
        }
    }]
}); 
```

# javascript - 如何使用 jQuery 从 li 标签中获取 ID？

> ID：15294204
> 
> 赞同：0
> 
> 时间：2013-03-08T12:40:02.497
> 
> 标签：javascript, jquery, html

这是html代码：

```
<ul id="sortable">
    <li id="attachments[183]"></li>
    <li id="attachments[196]"></li>
    <li id="attachments[145]"></li>
    <li id="attachments[545]"></li>
</ul> 
```

这是 JavaScript/jQuery 代码：

```
var query = {
    'action'  : 'save-attachment-order',
    'nonce'   : '8cb16e3927',
    'post_id' :  89,
} 
```

我想获取 li ID 并使其成为这样的 var

```
var query = {
    'action'  : 'save-attachment-order',
    'nonce'   : '8cb16e3927',
    'post_id' :  89,
    'attachments[183]' : 2,
    'attachments[196]' : 3,
    'attachments[145]' : 1,
    'attachments[545]' : 4
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T12:46:32.530

从这个对象开始：

```
var query = {
    'action'  : 'save-attachment-order',
    'nonce'   : '8cb16e3927',
    'post_id' :  89,
} 
```

您可以使用以下命令将 id 添加为新属性：

```
$("#sortable li").each(function(){
    query[this.id] = 0; // not sure where you're getting the values from!
}); 
```

* * *

既然您解释了这些值应该代表顺序，您可能想要使用它来代替（假设 jQuery UI）：

```
var order = $( "#sortable" ).sortable( "toArray" );
for(var i=0; i<order.length; i++) {
    query[order[i]] = i+1;
} 
```

[Alnitak 的答案](https://stackoverflow.com/a/15294445/825789)也应该有效，因为列表项无论如何都会按顺序排列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:43:16.943

```
var ids = [];

$('li').each(function() {
  ids.push($(this).attr('id'));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T12:53:12.473

这会将 ID 添加到`query`，其值是元素在列表中的相对位置：

```
$('#sortable > li').each(function(ix) {
    query[this.id] = ix + 1;
}); 
```

见[http://jsfiddle.net/alnitak/qddc5/](http://jsfiddle.net/alnitak/qddc5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T12:44:58.953

```
var ids = $("#sortable li").map(function(){
           return this.id;
          }).get(); 
```

这会将所有`li`id 作为数组获取..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T12:47:36.567

试试这个

```
object.property = value; 
```

所以你的代码变成

```
$('#sortable li').each(function() {
  query[$(this).attr('id')]= 'vaule u want';
}); 
```

# javascript - 对两列进行表格排序

> ID：15294208
> 
> 赞同：-1
> 
> 时间：2013-03-08T12:40:12.947
> 
> 标签：javascript, sorting

我在寻找表格排序问题的解决方案时遇到了一些麻烦。

我的表本质上是一个文件目录：

```
Name          FileSize    FileType
folder1/      -           folder
folder2/      -           folder
abc.pdf       3.2MB       pdf
def.jpg       1.2MB       jpg
ghi.doc       1.5MB       doc 
```

无论对哪一列进行排序，我都希望目录保持在表的顶部。例如，按“名称”排序将按名称对目录进行排序，然后按名称对文件进行排序。基本上，所有种类都需要首先对 FileType 进行排序，其中“文件夹”是最高值，然后是名称或文件大小。

我一直在使用臭名昭著的“频率解码器”排序脚本，但如果它更容易的话，我会欢迎另一个脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:04:25.873

对于每个文件夹名称，将字符串 String.fromCharCode(0) 添加到前面，这些字符串将始终按字母顺序排列在任何其他字符串之前，但只会显示为名称。

例如

```
String.fromCharCode(0)+"folder1/";
String.fromCharCode(0)+"folder2/"; 
```

在任何比较中都要小心，尽管

String.fromCharCode(0)+"folder1/" 不等于 "folder1/"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:09:23.877

你对此有什么看法？排序脚本检查对象是否为文件夹，将其放在顶部，然后处理实际排序（文件夹与文件夹和文件与文件）。

```
var files = [
  {
    name    : 'folder2/',
    filesize: null,
    filetype: 'folder'
  },
  {
    name    : 'folder1/',
    filesize: null,
    filetype: 'folder'
  },
  {
    name    : 'def.jpg',
    filesize: '1.2',
    filetype: 'jpg'
  },
  {
    name    : 'abc.pdf',
    filesize: '3.2',
    filetype: 'pdf'
  },
  {
    name    : 'ghi.doc',
    filesize: '1.5',
    filetype: 'doc'
  },
  {
    name    : 'jkl.doc',
    filesize: '1.1',
    filetype: 'doc'
  },
  {
    name    : 'pqr.pdf',
    filesize: '3.5',
    filetype: 'pdf'
  },
  {
    name    : 'mno.pdf',
    filesize: '3.5',
    filetype: 'pdf'
  }
];

/**
 * Sort an array of files and always put the folders at the top.
 * @access public
 * @param  {Array} array to sort
 * @param  {String} column to sort
 * @param  {Bool} asc
 * @return void
 */
function sortBy(array, column, asc) {
  if (asc == null) {
    asc = true;
  }

  array.sort(function(a, b) {

    // Put at the top the folders.
    if (a.filetype == 'folder' && b.filetype != 'folder') {
      return false;

    // Sort between folders.
    // The folders don't have a filesize and the type is always the same.
    // Process as a sort by name.
    // It doesn't need to respect the sens of sorting.
    } else if ((column == 'filesize' || column == 'filetype') && a.filetype == 'folder' && b.filetype == 'folder') {
      return a.name > b.name;

    // Normal sort.
    // The folders will be sorted together and the files togethers.
    } else {
      return asc ? a[column] > b[column] : a[column] < b[column];
    }

  });
}

sortBy(files, 'name', false);
console.log('by name', files);

sortBy(files, 'filesize', true);
console.log('by size', files);

sortBy(files, 'filetype', false);
console.log('by type', files); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:50:05.680

有一个 jquery tablesorter 插件只适合你。

[http://tablesorter.com/docs/](http://tablesorter.com/docs/)

使用此插件，您可以禁用一些被短路的东西

[http://tablesorter.com/docs/example-meta-headers.html](http://tablesorter.com/docs/example-meta-headers.html)

# sql-server - 如何通过查找第 n 次出现的字符来获取 SQLsever 中的子字符串

> ID：15294211
> 
> 赞同：0
> 
> 时间：2013-03-08T12:40:23.320
> 
> 标签：sql-server, sql-server-2008

我在**SQL Server 2008**`varchar`中有一个字段，例如

 **`colName_vch = 'field1;field2;field3;field4;field5;field6;field7'`

我想要**field4**的值。

现在一个很长的方法是使用`RIGHT`、`CHARINDEX`for`;`和`SUBSTRING`递归，但这变得非常复杂并增加了查询时间。

有没有其他快速/不太复杂的方法来实现这一目标？

我知道这是一个糟糕的数据库设计，但我现在坚持了一段时间。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:49:45.183

我不确定我是否真的理解你的问题，但这是我的猜测：

您可以编写一个自定义`Split`函数，该函数由分隔符拆分（在本例中`;`）。然后您可以使用`ROW_NUMBER`给定索引（此处为 4）获取所需的部分。

例如：

```
DECLARE @string VARCHAR(100); 
SET @string='field1;field2;field3;field4;field5;field6;field7'; 
DECLARE @index INT; 
SET @index = 4; 

WITH cte 
     AS (SELECT item, 
                rn=Row_number() 
                     OVER( 
                       ORDER BY item) 
         FROM   dbo.Split(@string, ';')) 
SELECT TOP 1 item 
FROM   cte 
WHERE  rn = @index 
```

这里有一个关于 sql-fiddle的[**DEMO 。**](http://www.sqlfiddle.com/#!3/2ab19/8/0)

这是我的拆分功能：

```
CREATE FUNCTION [dbo].[Split]
(
    @ItemList NVARCHAR(MAX), 
    @delimiter CHAR(1)
)
RETURNS @IDTable TABLE (Item VARCHAR(50))  
AS      

BEGIN    
    DECLARE @tempItemList NVARCHAR(MAX)
    SET @tempItemList = @ItemList

    DECLARE @i INT    
    DECLARE @Item NVARCHAR(4000)

    SET @tempItemList = REPLACE (@tempItemList, ' ', '')
    SET @i = CHARINDEX(@delimiter, @tempItemList)

    WHILE (LEN(@tempItemList) > 0)
    BEGIN
        IF @i = 0
            SET @Item = @tempItemList
        ELSE
            SET @Item = LEFT(@tempItemList, @i - 1)
        INSERT INTO @IDTable(Item) VALUES(@Item)
        IF @i = 0
            SET @tempItemList = ''
        ELSE
            SET @tempItemList = RIGHT(@tempItemList, LEN(@tempItemList) - @i)
        SET @i = CHARINDEX(@delimiter, @tempItemList)
    END 
    RETURN
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:04:28.763

```
CREATE FUNCTION dbo.SplitStrings
(
    @List       NVARCHAR(MAX),
    @Delimiter  NVARCHAR(255)
)
RETURNS @t TABLE([Index] INT IDENTITY(1,1), Item NVARCHAR(255))
AS
BEGIN
    INSERT @t(Item) SELECT SUBSTRING(@List, Number, 
        CHARINDEX(@Delimiter, @List + @Delimiter, Number) - Number)
    FROM (SELECT ROW_NUMBER() OVER (ORDER BY [object_id])
        FROM sys.all_objects) AS n(Number)
    WHERE Number <= CONVERT(INT, LEN(@List))
        AND SUBSTRING(@Delimiter + @List, Number, 1) = @Delimiter
    ORDER BY Number OPTION (MAXDOP 1);

    RETURN;
END
GO

DECLARE @x TABLE(i INT, string NVARCHAR(4000));

INSERT @x SELECT 1, N'field1;field2;field3;field4;field5;'
UNION ALL SELECT 2, N'x;y;6;r;3;2;w;'
UNION ALL SELECT 3, N'ttt;444;rrr;333;111;444;777;888;';

SELECT x.i, s1.Item
FROM @x AS x
CROSS APPLY dbo.SplitStrings(x.string, ';') AS s1
WHERE s1.[Index] = 4; 
```**

# c++ - c++ 字节数组的字符

> ID：15294212
> 
> 赞同：0
> 
> 时间：2013-03-08T12:40:23.353
> 
> 标签：c++, bytearray

我遇到了字符字节数组的问题。我正在创建文件传输程序，它通过 TCP 套接字传输二进制数据。所以，当我从块中获取数据时，我会将它们保存到临时容器中，然后我必须添加某个地方来保存整个数据。我试过 std::vector 但效果不好（或者我用错了。）

```
size_t nbytes = 0;
char buffer[5]; //temporary container.
int result = 0;
std::vector<char> abc;

if (ioctl(sockfd, FIONREAD, (char*)&nbytes) < 0)
{
    printf("[-] Error getting available data.\n");
    return -1;
}
printf("[*] Bytes available: %lu\n", nbytes);

while(true)
{
    if(nbytes > sizeof(buffer))
    {
        result = recv(sockfd, buffer, sizeof(buffer), 0);
        for(int i = 0; i < result; i++)
        {
            abc.push_back(buffer[i]); //big data causes memory corruption.
        }
        nbytes -= result;
        continue;
    }
    else if(nbytes <= sizeof(buffer) && nbytes != 0)
    {
        result = recv(sockfd, buffer, nbytes, 0);
        for(int i = 0; i < result; i++)
        {
            abc.push_back(buffer[i]); //big data causes memory corruption.
        }
        break;
    }
    else
    {
        result = 0;
        break;
    }
}

printf("Data Received: %s", &abc[0]); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T12:44:15.983

如果`recv`失败，它会返回`SOCKET_ERROR`，但您不检查它，而是将其用作接收到的字节数。与d 到 -1 一样`SOCKET_ERROR`，`#define`您有效地从 address 之前读取`buffer`。

编辑：原来的答案是错误的，因为在这种情况下循环根本不会执行。然而，问题是向量的内容不是以空值结尾的（因为它是一个没有任何字符串语义的普通缓冲区），所以它看起来像垃圾，但实际上没问题。

# django - Django - 获取所有不属于 M2M 的对象

> ID：15294213
> 
> 赞同：0
> 
> 时间：2013-03-08T12:40:35.063
> 
> 标签：django, django-queryset, django-orm

我有一个带有字段的模型：

```
class Product(models.Model):
    subproducts = models.ManyToManyField("self", blank=True) 
```

我需要覆盖管理员的字段查询集，以仅显示不属于任何 m2m 关系的对象。我不知道如何得到它们。

所以如果我有：product1，product2，product3，product4。

product1 包含在子产品中：product2

我需要一个查询，在这种情况下，product3 和 product4

知道如何获得吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:48:25.240

我认为这成功了：

```
Product.objects.filter(subproducts__isnull=True) 
```

# iphone - 在 Objective-C 中分析 HTTP 标头字段的智能方法

> ID：15294219
> 
> 赞同：4
> 
> 时间：2013-03-08T12:40:57.520
> 
> 标签：iphone, ios, objective-c, http-headers

我用 Java 为 Android 编程，它的标准库有 Header 和 HeaderElement 类，通过它们可以以智能的方式分析 HTTP 标头。这些非常有用，因为避免用户解析标头值（可能不同且复杂）。

这些是他们的官方文档页面，很清楚方法的含义：
[http://developer.android.com/reference/org/apache/http/Header.html](http://developer.android.com/reference/org/apache/http/Header.html) [http://developer.android.com/reference/org /apache/http/HeaderElement.html](http://developer.android.com/reference/org/apache/http/HeaderElement.html)

Objective-C中的iOS有类似的东西吗？如果我收到一个响应（键入为 NSHTTPURLResponse），我是否必须手动解析其标题字段？

我问这个是因为我看到的检索 NSHTTPURLResponse 标头的唯一方法是

```
- (NSDictionary *)allHeaderFields 
```

它只是返回一个以 NSString 对象作为值的字典。

## 编辑，添加示例

例如，如果我们以响应的 Cache-Control 标头为例，它可能具有以下语法：

```
"public"                               
| "private" [ "=" <"> 1#field-name <"> ]
| "no-cache" [ "=" <"> 1#field-name <"> ]
| "no-store"                             
| "no-transform"                         
| "must-revalidate"                      
| "proxy-revalidate"                     
| "max-age" "=" delta-seconds            
| "s-maxage" "=" delta-seconds           
| cache-extension 
```

在哪里

```
[] means optional
1# means one ore more 
```

您了解手动解析标头可能很复杂。

# java - Android ORMLite DatabaseConfigUtil

> ID：15294222
> 
> 赞同：2
> 
> 时间：2013-03-08T12:41:08.397
> 
> 标签：java, android, ormlite

我在我们的 Android 应用程序上使用 ORMLite，并且我之前已经`ormlite_config.txt`按照文档中的描述设置了一个

[http://ormlite.com/docs/table-config](http://ormlite.com/docs/table-config)

我现在已经更新了我的类，所以我需要重新生成文件，但是我不能再让我的 DatabaseConfigUtil 在 Eclipse 中运行。我已经按照文档中的描述设置了运行配置，选择了本地 JRE 并从 Classpath 选项卡中删除了 Android 引导条目。`java.lang.NoClassDefFoundError`但我只是为我的项目中的所有 Android 派生类获得了一大堆。

自从我最初生成`ormlite_config.txt`文件以来，我显然已经改变了一些东西，因为我之前没有任何问题，但我看不出我做了什么来破坏一切。

有人可以确切地告诉我我的类路径/源选项卡中应该有什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:39:41.680

最后，文档中的说明就是所需要的，只是在 4.43 中引入了一对错误，使其无法正常工作。这些现在已经修复，并且可能会在下一个版本中。请参阅[https://groups.google.com/forum/?fromgroups=#!topic/ormlite-android/nBuQTVpCs0g](https://groups.google.com/forum/?fromgroups=#!topic/ormlite-android/nBuQTVpCs0g)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-12T22:38:41.967

我遇到了这个确切的问题并自己找到了解决方案。

我认为问题来自谷歌的 ADT 插件。由于该插件将 Android 库作为私有库进行管理，因此 ORMLite Util 在项目的构建路径中无法找到 Android 相关类。

解决方案是手动将*android.jar*从您的 android sdk 文件夹（在我的情况下为 C:\android-sdk\platforms\android-18）作为外部 jar 添加到构建路径中。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-20T15:53:05.933

您必须从 Bootrap 条目中删除 Android Lib！

执行以下操作：

*   项目 > 属性 > 运行/调试设置
*   选择要编译的类，点击编辑
*   打开选项卡“类路径”并从引导条目中删除 Android Lib

# ios - 如何在 ios 中发送带有链接和图像的自定义推文？

> ID：15294223
> 
> 赞同：2
> 
> 时间：2013-03-08T12:41:08.970
> 
> 标签：ios, tweets, slrequest

我知道如何使用 SLRequest 和 TWRequest 发送自定义推文，但是当我发布消息和链接时我没有得到链接。我只收到消息。

代码是：

```
 NSDictionary *dict = [[NSDictionary alloc] initWithObjectsAndKeys:@"Send to text",@"status",@"http://stackoverflow.com/",@"link", nil];
  SLRequest *slRequest = [SLRequest requestForServiceType:SLServiceTypeTwitter requestMethod:SLRequestMethodPOST URL:[NSURL URLWithString:@"http://api.twitter.com/1.1/statuses/update.json"] parameters:dict];
 [slRequest setAccount:account];//account is ACAcount type object

 [slRequest performRequestWithHandler:^(NSData *responseData,NSHTTPURLResponse *urlResponse, NSError *error){
                                NSLog(@"The responseString:%@",[[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]);

                            }]; 
```

我认为问题在于发送链接的关键价值。在这里，我使用“链接”键。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T12:48:37.427

没有更新 URL 的链接之类的参数。您需要将您的 URl 附加到状态并将`wrap_links`参数设置为 true。它将起作用

```
//change your dict like below
NSDictionary *dict = [[NSDictionary alloc] initWithObjectsAndKeys:[NSString stringWithFormat:@"Send to text http://stackoverflow.com/"],@"status",@"true",@"wrap_links", nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T09:26:38.797

除了“状态”的键是“消息”之外，Facebook SLRequest 也是如此。

```
NSDictionary *parameters = [[NSDictionary alloc] initWithObjectsAndKeys:[NSString stringWithFormat:@"Hey %@ check this out http://stackoverflow.com/", self.label.text],@"message",@"true",@"wrap_links", nil]; 
```

# parsing - 如何批量获取包含令牌的整个短语

> ID：15294226
> 
> 赞同：0
> 
> 时间：2013-03-08T12:41:27.100
> 
> 标签：parsing, batch-file

我的批处理文件应该将每个包含的整个短语输出到一个文本文件`dog.`

例如，假设输入文件是这样的：

```
dog.house, asdasd dog.dinner
dog.hello 
```

结果应该是：

```
dog.house
dog.dinner
dog.hello 
```

到目前为止，我的批处理文件是：

```
for /F "tokens=*" %%a in ('findstr /c condor. temp.txt') do echo %%a >> resultado.txt 
```

但返回整行而不是包含“dog.”的短语。我无法理解批处理的工作原理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:33:57.367

是的，`for`循环很棘手。 `for`没有任何开关在一行上逐字解析。 `for /f`逐行循环，如果需要，使用标记作为单词。你需要的是两者的结合。

```
@echo off
for /f "delims=" %%I in ('findstr /i "dog\." temp.txt') do (
    for %%a in (%%I) do (
        echo %%a | findstr /i "dog\."
    )
) 
```

这会给你你期望的结果。

**示例结果**

```
C:\Users\me\Desktop>type temp.txt
dog.house, asdasd dog.dinner
dog.hello

C:\Users\me\Desktop>test.bat
dog.house
dog.dinner
dog.hello 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:43:17.837

您可以在 FOR 命令上使用一个很好的教程。我最喜欢的是[http://judago.webs.com/batchforloops.htm](http://judago.webs.com/batchforloops.htm)

只要文件不包含`*`或`?`字符，rojo就有很好的解决方案。`<space>`FOR 循环在、`<tab>`、`,`、`;`和处断开“短语” `=`。这是一个稍微高效的版本，它通过 FINDSTR 的单次迭代管道所有“短语”。我还使用了神秘的语法来禁用 DELIMS 和 EOL，以保留以`;`.

```
@echo off
setlocal
cmd /c "for /f delims^=^ eol^= %%I in ('findstr /c:"dog." test.txt') do @for %%a in (%%I) do @echo %%a" | findstr /c:"dog." >resultado.txt 
```

和限制可以通过放弃简单的 FOR 并使用搜索和替换来替代`*`，并通过 FINDSTR 回显结果来解决。有语法可以批量执行此操作。但这只会使解决方案变慢:(`?``<line feed>``space`

我怀疑速度提高是否足够。您可以按照 rojo 的建议下载和使用 grep，也可以切换到更好的脚本语言，如 VBScript、JScript 或 PowerShell。

**编辑**

有时您无法将可执行文件下载到机器上，并且您可能不习惯使用另一种脚本语言。

我编写了一个名为 REPL.BAT 的混合批处理/JScript 实用程序，它执行正则表达式搜索和替换。它适用于所有现代 Windows 机器，并且不需要任何安装过程。只要 REPL.BAT 在您当前的文件夹中，或者在您的 PATH 中的某个位置，那么下面的简单行就可以满足您的需求。它使用 REPL.BAT 将所有空格转换为换行符，然后将结果通过管道传输到 FINDSTR。这个解决方案应该很快。

```
repl.bat " " "\n" x <temp.txt | findstr /c:"dog." >resultado.txt 
```

这是 REPL.BAT 实用程序。完整的文档嵌入在脚本中。

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::************ Documentation ***********
:::
:::REPL  Search  Replace  [Options  [SourceVar]]
:::REPL  /?
:::
:::  Performs a global search and replace operation on each line of input from
:::  stdin and prints the result to stdout.
:::
:::  Each parameter may be optionally enclosed by double quotes. The double
:::  quotes are not considered part of the argument. The quotes are required
:::  if the parameter contains a batch token delimiter like space, tab, comma,
:::  semicolon. The quotes should also be used if the argument contains a
:::  batch special character like &, |, etc. so that the special character
:::  does not need to be escaped with ^.
:::
:::  If called with a single argument of /? then prints help documentation
:::  to stdout.
:::
:::  Search  - By default this is a case sensitive JScript (ECMA) regular
:::            expression expressed as a string.
:::
:::            JScript syntax documentation is available at
:::            http://msdn.microsoft.com/en-us/library/ae5bf541(v=vs.80).aspx
:::
:::  Replace - By default this is the string to be used as a replacement for
:::            each found search expression. Full support is provided for
:::            substituion patterns available to the JScript replace method.
:::            A $ literal can be escaped as $$. An empty replacement string
:::            must be represented as "".
:::
:::            Replace substitution pattern syntax is documented at
:::            http://msdn.microsoft.com/en-US/library/efy6s3e6(v=vs.80).aspx
:::
:::  Options - An optional string of characters used to alter the behavior
:::            of REPL. The option characters are case insensitive, and may
:::            appear in any order.
:::
:::            I - Makes the search case-insensitive.
:::
:::            L - The Search is treated as a string literal instead of a
:::                regular expression. Also, all $ found in Replace are
:::                treated as $ literals.
:::
:::            E - Search and Replace represent the name of environment
:::                variables that contain the respective values. An undefined
:::                variable is treated as an empty string.
:::
:::            M - Multi-line mode. The entire contents of stdin is read and
:::                processed in one pass instead of line by line. ^ anchors
:::                the beginning of a line and $ anchors the end of a line.
:::
:::            X - Enables extended substitution pattern syntax with support
:::                for the following escape sequences:
:::
:::                \\     -  Backslash
:::                \b     -  Backspace
:::                \f     -  Formfeed
:::                \n     -  Newline
:::                \r     -  Carriage Return
:::                \t     -  Horizontal Tab
:::                \v     -  Vertical Tab
:::                \xnn   -  Ascii (Latin 1) character expressed as 2 hex digits
:::                \unnnn -  Unicode character expressed as 4 hex digits
:::
:::                Escape sequences are supported even when the L option is used.
:::
:::            S - The source is read from an environment variable instead of
:::                from stdin. The name of the source environment variable is
:::                specified in the next argument after the option string.
:::

::************ Batch portion ***********
@echo off
if .%2 equ . (
  if "%~1" equ "/?" (
    findstr "^:::" "%~f0" | cscript //E:JScript //nologo "%~f0" "^:::" ""
    exit /b 0
  ) else (
    call :err "Insufficient arguments"
    exit /b 1
  )
)
echo(%~3|findstr /i "[^SMILEX]" >nul && (
  call :err "Invalid option(s)"
  exit /b 1
)
cscript //E:JScript //nologo "%~f0" %*
exit /b 0

:err
>&2 echo ERROR: %~1\. Use REPL /? to get help.
exit /b

************* JScript portion **********/
var env=WScript.CreateObject("WScript.Shell").Environment("Process");
var args=WScript.Arguments;
var search=args.Item(0);
var replace=args.Item(1);
var options="g";
if (args.length>2) {
  options+=args.Item(2).toLowerCase();
}
var multi=(options.indexOf("m")>=0);
var srcVar=(options.indexOf("s")>=0);
if (srcVar) {
  options=options.replace(/s/g,"");
}
if (options.indexOf("e")>=0) {
  options=options.replace(/e/g,"");
  search=env(search);
  replace=env(replace);
}
if (options.indexOf("l")>=0) {
  options=options.replace(/l/g,"");
  search=search.replace(/([.^$*+?()[{\\|])/g,"\\$1");
  replace=replace.replace(/\$/g,"$$$$");
}
if (options.indexOf("x")>=0) {
  options=options.replace(/x/g,"");
  replace=replace.replace(/\\\\/g,"\\B");
  replace=replace.replace(/\\b/g,"\b");
  replace=replace.replace(/\\f/g,"\f");
  replace=replace.replace(/\\n/g,"\n");
  replace=replace.replace(/\\r/g,"\r");
  replace=replace.replace(/\\t/g,"\t");
  replace=replace.replace(/\\v/g,"\v");
  replace=replace.replace(/\\x[0-9a-fA-F]{2}|\\u[0-9a-fA-F]{4}/g,
    function($0,$1,$2){
      return String.fromCharCode(parseInt("0x"+$0.substring(2)));
    }
  );
  replace=replace.replace(/\\B/g,"\\");
}
var search=new RegExp(search,options);

if (srcVar) {
  WScript.Stdout.Write(env(args.Item(3)).replace(search,replace));
} else {
  while (!WScript.StdIn.AtEndOfStream) {
    if (multi) {
      WScript.Stdout.Write(WScript.StdIn.ReadAll().replace(search,replace));
    } else {
      WScript.Stdout.WriteLine(WScript.StdIn.ReadLine().replace(search,replace));
    }
  }
} 
```

# c++ - 静态成员变量赋值

> ID：15294229
> 
> 赞同：-3
> 
> 时间：2013-03-08T12:41:37.127
> 
> 标签：c++

```
#include <iostream>
using namespace std;
class base
{
    static base* mybase;
};
base::mybase = NULL;
char* str = "hello world";
int main()
{
    std::cout<<"hello world"<<std::endl;
    return 0;
} 
```

为什么代码行“base::mybase = NULL”编译器错误！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:43:35.690

你也需要给出类型。的类型`mybase`是`base*`：

```
base* base::mybase = NULL; 
```

这定义了 a `base*`，它是 的成员，`base`被调用`mybase`并将其初始化为`NULL`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T12:43:47.300

您还应该在该行中给出变量的类型：

```
base* base::mybase = NULL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:45:11.333

> 为什么代码行`base::mybase = NULL`编译错误！

因为它不是一个有效的声明。这将是一个有效的赋值表达式（在可以访问类基私有成员的上下文中），但您不能在命名空间范围内拥有表达式语句。

要提供静态成员的定义，请使用

```
base* base::mybase = NULL; 
```

# linux - 如何根据源代码制作可执行文件

> ID：15294230
> 
> 赞同：0
> 
> 时间：2013-03-08T12:41:43.493
> 
> 标签：linux, ubuntu, compilation, fedora, rpm

我在linux上用C写了一些程序我想在许多远程计算机上运行这些程序，这些计算机安装了fedora或ubuntu

我在本地机器上用 gcc 编译了程序，但是可执行文件在远程机器上不可用。

例如：我用

```
gcc -o udp_server udp_server.c 
```

在本地机器上获取可执行的二进制文件 udp_server 然后我将其复制到远程机器并在那里运行，错误是：

-bash: ./udp_server: /lib64/ld-linux-x86-64.so.2: 错误的 ELF 解释器：没有这样的文件或目录

* * *

本地机器：fedora Fedora release 16 (Verne) Kernel \r on an \m (\l) 3.6.10-2.fc16.x86_64 GNU/Linux

远程机器：Fedora release 12 (Constantine) Kernel \r on an \m (\l) 2.6.32-36.onelab.x86_64 GNU/Linux

在这些远程机器上，没有 gcc 编译器，所以我希望我可以制作一些可执行文件，以便它们可以在那些远程机器上执行

那么我应该制作什么样的可执行文件，以及如何制作它们？任何推荐工具或程序？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T12:50:32.520

要运行用 C 编写的程序，您必须首先对其进行[编译](http://en.wikipedia.org/wiki/Compiler)以生成可执行文件。在 Linux 上，C 编译器通常是“Gnu C 编译器”，或`gcc`.

如果您在 Linux 上编译 C 程序，它通常应该在任何其他 Linux 计算机上运行。但是，必须满足一些条件才能使其起作用：

*   编译后的可执行文件针对特定的处理器架构进行编译。例如，如果您针对[x86-x64](http://en.wikipedia.org/wiki/X86-64)进行编译，则该程序将无法在 x86 或 PowerPC 上运行。
*   如果程序使用共享库，则必须在目标系统上安装这些库。C 库“libc”随处安装，其他库可能没有。

至于如何编译：对于一个简单的程序，可以`gcc`直接调用。对于更复杂的程序，建议使用一些构建工具。有很多可供选择；两个流行的选择是 GNU `make`（传统解决方案）和[CMake](http://en.wikipedia.org/wiki/CMake)。

分发程序：如果它只是一个可执行文件，你可以复制这个可执行文件。如果程序由多个文件（图像、数据文件等）组成，则应将其打包为软件包。这允许用户使用[包管理器](http://en.wikipedia.org/wiki/Package_management_system)（例如 RPM 或 dpkg）安装它。不同 Linux 发行版的各种打包指南中解释了如何做到这一点。

最后，一条建议：您似乎对软件开发，尤其是 C 语言知之甚少*。*考虑阅读一些关于 C 语言编程的教程——这将回答这些（以及许多其他）问题。有无数的书籍和在线教程——我可以推荐gbdirect[的“The C book”](http://publications.gbdirect.co.uk/c_book/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T17:47:43.410

您看到的问题是您在目标机器上缺少动态库。要查看您需要哪些库，您需要使用“ldd”程序。示例（我只是针对每个 Linux 发行版中的标准程序“test”执行它）：

```
$ ldd /usr/bin/test
    linux-vdso.so.1 =>  (0x00007fff5fdfe000)
    libc.so.6 => /lib64/libc.so.6 (0x00000032d0600000)
    /lib64/ld-linux-x86-64.so.2 (0x00000032cfe00000) 
```

在 Fedora 和 RHEL 上，您可以使用以下命令找到要安装的 RPM 包

```
$ rpm -q --whatprovides /lib64/ld-linux-x86-64.so.2
glibc-2.16-28.fc18.x86_64 
```

然后你需要安装它：

```
$ yum -y install glibc-2.16-28.fc18.x86_64 
```

我不使用 Ubuntu / Debian，不知道该怎么做。请注意，在 32 位系统上 64 位的库不可用，但在 64 位系统上，这些库具有通常的 i686 标签并且可以安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:52:33.420

通常，只要您保持架构，您就可以在不同的机器上执行您的程序。例如，您不能在 32 位机器上执行 64 位程序，反之亦然（您可以通过安装 32 位库来解决此问题，但这可能太难了）。

如果你有不同的发行版，或者同一个 linux 发行版的不同版本，这可能是个问题——你需要确保所有依赖项都在同一个主要版本中。

或者您可以静态链接库，这在 linux 世界中根本不常见，但您可以这样做。学习如何使用 GCC，然后你就会知道如何去做。

# windows - 从源代码安装 Qt 5.0

> ID：15294232
> 
> 赞同：0
> 
> 时间：2013-03-08T12:41:56.590
> 
> 标签：windows, git, qt, qt5

我最近使用 git 来获取 qt 源代码，现在我有点迷失了要做什么。我一直按照此页面上的说明进行操作 - [http://qt-project.org/wiki/Building_Qt_5_from_Git](http://qt-project.org/wiki/Building_Qt_5_from_Git)我在 Windows 7 上。

我现在从上面的链接处于“配置和构建”阶段，刚刚完成了“mingw32-make”步骤（页面下方约 2/3，就在构建 Qt Webkit 步骤之前，我不会这样做）。所以我让它在一夜之间运行，然后回到它看似完成的状态，因为我在命令窗口输出中没有注意到任何错误和故障。

所以我的 qt 文件夹（安装在 C:\Qt\qt5）看起来像这样

[http://i.imgur.com/dgcl99w.png](https://i.imgur.com/dgcl99w.png)

所以这是我在 Stack Overflow 上发现的一个类似问题，[如何在构建后在 Windows 上安装 Qt？](https://stackoverflow.com/questions/4699311/how-to-install-qt-on-windows-after-building).

我已经完成了第 4 步，即添加 QMAKE_INCDIR += "." 到 qtbase\mkspecs\win32-g++ 文件夹中的 qmake.conf 文件。但现在我需要一些关于下一步该做什么的建议。

我已经从几个月前安装的二进制文件中安装了 Qt 5，但在我删除之前，我想确保从源代码计划构建的这个构建能够正常工作。所以我也有 Qt Creator，简单地说，我希望能够在删除我的二进制安装版本的 Qt 后打开它并创建一个 Qt 项目。我该怎么做呢？我本以为可能会放置一个路径变量，但我不确定将路径放在哪里。我需要更改 Qt creator 中的任何设置吗？上面的图像是我应该看到的，还是我还没有采取一些步骤来完成构建/安装。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T01:02:09.197

我认为你必须将你的系统环境变量设置到你的新 QT bin 目录，如果你使用 Qt 创建者然后在项目构建设置中指向这个新的 QT 设置，你基本上会用 qmake 指向你的 Qt 版本，然后确保工具链包含编译器。

# c# - 在复杂的应用程序中定位错误

> ID：15294236
> 
> 赞同：1
> 
> 时间：2013-03-08T12:42:00.560
> 
> 标签：c#, asp.net, visual-studio-2010, debugging

这将是一个非常普遍的问题。我希望在 Visual Studio 2010 中找到一些我不知道的工具或技巧。

长话短说，我正在为一家公司接手一个非常大的会计应用程序；没有文档，代码中的注释很少。我也无法访问以前的开发人员。他们需要立即修复一个错误。基本上一个负数出现在数据库中，这个数字应该是正数。没有人知道计算发生在应用程序的哪个位置，或者数据实际写入数据库的位置。就弄清楚什么类/函数正在做这件事而言，任何人都会跳出来吗？我可以在单步执行每一行代码的同时查看数据库，但这可能需要几天时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:45:45.727

不是你想听到的答案，但如果它是可重复的，你可以像二进制搜索一样处理它。

1.  遍历每个过程，直到值发生变化。
2.  重新运行并进入更改值的过程。
3.  转到 1。

**临**

*   不会花你几天的时间
*   你不必在做的时候考虑它
*   如果你重复了十次之后还没有找到它，我会感到惊讶。

**缺点**

*   一点也不好玩。

# c# - 从 SQL 行计数到 C# 文本框

> ID：15294239
> 
> 赞同：0
> 
> 时间：2013-03-08T12:42:04.553
> 
> 标签：c#, count

大家好，这是第一次使用stackoverflow，所以大家好L）

我是 C# 表单的初学者，我把它当作一种有趣的爱好。

```
SqlCommand comm = new SqlCommand("SELECT COUNT(*) FROM Members where sponser = "
        +textbox1.text+"'", connection);

 Int32 count = (Int32)comm.ExecuteScalar();
 textbox2.Text ="Found "+ count+" Members; 
```

好吧，它只是我从 google xD 获得的 2 个代码之间的混合，但错误出现在这里***textbox2.Text ="Found "+ count+" Members;***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T12:48:24.027

这行代码有几个问题：

```
textbox2.Text ="Found "+ count+" Members; 
```

首先，存在语法错误。你永远不会关闭第二组报价。你会这样做：

```
textbox2.Text ="Found "+ count+" Members"; 
```

但是，像这样的字符串连接仍然有点混乱。您有两个文字字符串，并且您试图将它们添加到一个整数中，这并不完全直观（并且可能比它需要的要慢）。相反，请考虑使用格式化字符串：

```
textbox2.Text = string.Format("Found {0} Members", count); 
```

这将从`count`（整数）中获取值，并在`string.Format()`函数内部识别其字符串表示并将其插入格式化字符串的占位符中。

**更新：**这会处理编译时错误。现在你会得到一个运行时错误：

```
SqlCommand comm = new SqlCommand("SELECT COUNT(*) FROM Members where sponser = "
    +textbox1.text+"'", connection); 
```

一旦你尝试执行那个 SQL 语句，你就会从数据库中得到一个错误，因为结果查询有一个语法错误：

```
SELECT COUNT(*) FROM Members where sponser = some text' 
```

您缺少参数的开头单引号。像这样的东西：

```
SqlCommand comm = new SqlCommand("SELECT COUNT(*) FROM Members where sponser = '"
    +textbox1.text+"'", connection); 
```

**但是**，这很**重要**，您还没有完成。这行代码对一个非常常见且易于利用的漏洞*开放，称为*[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。您将希望摆脱直接的字符串连接并为 SQL 查询使用参数。像这样的东西：

```
SqlCommand cmd = new SqlCommand("SELECT COUNT(*) FROM Members where sponser = @sponser");
cmd.Parameters.Add("@sponser", textbox1.text);
Int32 count = (Int32)comm.ExecuteScalar(); 
```

要知道，您仍然可以做很多事情来改进这一点，随着时间的推移，这一切都值得学习。您可以查看的内容是：

*   `textbox1.text`在您尝试在 SQL 查询中使用它之前检查和验证用户输入 ( )。
*   `comm.ExecuteScalar()`在尝试直接将其转换为 an 之前检查输出`Int32`（如果由于某种原因它返回整数以外的任何内容，这会给您一个运行时错误）。
*   考虑使用 Linq to Sql 之类的东西来代替 ADO.NET 组件，因为它可以为您做更多的事情，而您的代码更少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:30:01.170

```
protected void Page_Load(object sender, EventArgs e)
{
    lb1.Text = GetRecordCount(textbox2.Text).ToString();
}

private int GetRecordCount(string myParameter)
{
    string connectionString = ConfigurationManager.ConnectionStrings["DBConnection"].ToString();
    Int32 count = 0;
    string sql = "SELECT COUNT(*) FROM members WHERE sponsor = @Sponsor";
    using (SqlConnection conn = new SqlConnection(connectionString))
    {
        SqlCommand cmd = new SqlCommand(sql, conn);
        cmd.Parameters.Add("@Sponsor", SqlDbType.VarChar);
        cmd.Parameters["@Sponsor"].Value = myParameter;
        try
        {
            conn.Open();
            count = (Int32)cmd.ExecuteScalar();
        }
        catch (Exception ex)
        {

        }
    }
    return (int)count;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:49:46.307

你在最后缺少一个结束 "：

```
textbox2.Text ="Found "+ count+" Members"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T12:54:00.617

您的代码容易受到[SQL 注入](http://msdn.microsoft.com/en-us/magazine/cc163917.aspx)的攻击。请考虑使用[参数](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)。

```
private int GetMemberCount(string connectionString, string sponsor)
{
    using(var connection = new SqlConnection(connectionString))
    using(var command = connection.CreateCommand())
    {
        command.CommandText = "SELECT COUNT(*) FROM members WHERE sponsor = @Sponsor";
        command.Parameters.AddWithValue("@Sponsor", sponsor);

        return Convert.ToInt32(command.ExecuteScalar());
    }
}

//Usage
var sponsor = textbox1.text;
var count = GetMemberCount(connectionString, sponsor);

textbox2.Text = string.Format("Found {0} Members", count); 
```

# java - 从cli运行时，简化在eclipse中创建的java程序的类路径条目？

> ID：15294241
> 
> 赞同：0
> 
> 时间：2013-03-08T12:42:06.443
> 
> 标签：java, eclipse, command-line, classpath, command-line-interface

我使用 eclipse 作为我的 IDE，将项目保存到我在我的 ubuntu 主服务器上映射的 samba 网络驱动器上。我已将 Eclipse 配置为将我正在使用的 jar 库保存到 /lib 文件夹中。

问题是当我尝试从服务器上的命令行运行我的 java 程序时，我总是必须输入

```
java -cp .:../lib/* javaclassname 
```

这有点令人厌烦，特别是考虑到制表符补全不适用于必须包含在类路径中的冒号。有什么方法可以设置，所以我不必每次都手动指定类路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:44:33.930

最简单的选择是让 Eclipse 为您构建 JAR。右键单击您的项目，然后选择 Export > Runnable JAR file。该对话框将为您提供一些选项。选择“复制所需的库...”。输出将是您的主应用程序 JAR 文件，以及一个包含您的依赖项的 lib 文件夹。在这种情况下，JAR 文件清单将指定指向所有依赖项的类路径。然后在命令行运行它就像“java -jar myJar.jar”一样简单。

如果你想让事情自动化，我会从 Ant 开始。我认为它比 Maven 的学习曲线要​​少。在这种情况下，请查看[`jar`Ant 任务](http://ant.apache.org/manual/Tasks/jar.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T02:59:07.600

我最终通过制作一个名为的 shell 脚本`run.sh`并将其放在项目的根文件夹中来解决这个问题。

运行.sh：

```
#!/bin/bash

LIBS=$(grep '<classpathentry kind="lib" path="' .classpath | sed 's/.*\<classpathentry kind="lib" path="//' | sed 's/\"[^\"]*$//' | tr '\n' ':')

java -cp "bin:$LIBS" $1 
```

您可以通过运行使其可执行`chmod u+x run.sh`，然后使用`./run.sh packagename.classname`

它读取`.classpath`根文件夹中的文件并将每个条目添加到命令行上以冒号分隔的列表中。

# c# - 如何动态填充图片框

> ID：15294244
> 
> 赞同：9
> 
> 时间：2013-03-08T12:42:15.813
> 
> 标签：c#, winforms

我最近开始学习 C# 编程。我正在尝试使用 Windows 窗体应用程序创建 GUI。我需要根据某些情况更新不同颜色的图片瓶。我从电子板上获得四个传感器读数，它们是温度、压力、密度、体积。基于这些值，我必须更新图片瓶。我设计了如下所示的窗口窗体。 ![窗体](../Images/78ff39c6acac4a4a2a022b5b3838b07e.png) 我为四个传感器读数创建了四个复选框。最初，我手动输入预期的传输量并将该值设置为图片瓶上的最大刻度。温度、压力、密度的复选框用于估计体积中存在的量。要估计体积数量，用户可以使用温度传感器或密度传感器或全部或仅其中两个。如果我单击一个检查，那么我将只使用该传感器读数。卷的复选框表示获取到现在传输的卷的数量。我有这样的条件来估计数量。

```
1)Liquid 
 Temperature = 0 to 30 c
 Pressure =    0 to 200 bar
 Density  = 0.5 to 0.95 g/cc.
2)Gas
 Temperature = 31 to 60 c
 Pressure =    201 to 400 bar
 Density  =    0 to 0.5 g/cc.
3)Water
 Temperature = 61 to 90 c
 Pressure =    401 to 600 bar
 Density  =    0.956 to 1,15 g/cc.
4)Oil
 Temperature = 91 to 120 c
 Pressure =    601 to 800 bar
 Density  =    1.2 to 1.35 g/cc.
5)Mud
 Temperature = 121 to 150 c
 Pressure =    801 to 1000 bar
 Density  =    1.15 to 1.3 g/cc.
6)Not identified
 all the conditions failed. 
```

程序是，如果我勾选所有三个传感器复选框，那么我将使用三个传感器读数并检查此条件以及满足什么条件并用相关颜色填充瓶子。我会得到目前转移多少的体积并检查这些条件并在图片瓶中填充多少与颜色有关的数量。当我手动输入值但不喜欢使用传感器值和条件时，我有绘制图片框的代码。

```
 private void DrawPercentages(int[] percentages, Color[] colors, float[] volumetransfer)
    {
        Bitmap bmp = new Bitmap(pictureBox1.Width, pictureBox1.Height);
        Graphics G = Graphics.FromImage(bmp);
        // Create a Graphics object to draw on the picturebox
        //Graphics G = pictureBox1.CreateGraphics();

        // Calculate the number of pixels per 1 percent
        float pixelsPerPercent = pictureBox1.Height / volumetransfer[0];

        // Keep track of the height at which to start drawing (starting from the bottom going up)
        int drawHeight = pictureBox1.Height;

        // Loop through all percentages and draw a rectangle for each
        for (int i = 0; i < percentages.Length; i++)
        {
            // Create a brush with the current color
            SolidBrush brush = new SolidBrush(colors[i]);
            // Update the height at which the next rectangle is drawn.
            drawHeight -= (int)(pixelsPerPercent * percentages[i]);
            // Draw a filled rectangle
            G.FillRectangle(brush, 0, drawHeight, pictureBox1.Width, pixelsPerPercent * percentages[i]);
        }
        pictureBox1.Image = bmp;
    } 
```

请帮助我如何完成这项任务。我有复选框的代码如下所示（对于所有复选框）。

```
 private void chkTransferTemp_CheckedChanged(object sender, EventArgs e)
    {
        if (chkTransferTemp.Checked)
        {
            Tempvalue = SystemNames.Temp.Data;
        }
    } 
```

请帮我完成这项任务。

任务是我将从体积复选框中获取体积数量，因此我需要在图片瓶中填充那么多数量。考虑到上述条件，总量为液体或气体或水或其他。例如，我从音量传感器读取“50”，然后我应该将图片瓶更新到 50（按比例）颜色。同时应根据上述条件决定使用哪种颜色。我会得到温度、压力、密度值，我需要检查它是“气体”、“液体”还是“水”。并且满足任何条件然后用该颜色填充到比例“50”。

我试过这样

```
 public void DrawVolume(double volume, VolumeTypes volumeType, PictureBox pictureBottle)
    {
        ucSample sample = new ucSample();

        Color color = pictureBottle.BackColor;

        switch (volumeType)
        {
            case VolumeTypes.Gas: color = Color.Lime;
                break;
            case VolumeTypes.HydrocarboneLiquid: color = Color.Red;
                break;
            case VolumeTypes.Water: color = Color.Blue;
                break;
            case VolumeTypes.WaterBasedMud: color = Color.SaddleBrown;
                break;
            case VolumeTypes.OliBasedMud: color = Color.Chocolate;
                break;
            case VolumeTypes.NotIdentified: color = Color.Gray;
                break;

        }
        Bitmap bmp = new Bitmap(pictureBottle.Width, pictureBottle.Height);
        Graphics G = Graphics.FromImage(bmp);

        float pixelsPerPercent = (float)(pictureBottle.Height * (volume / ucSample.Volume));

        int drawHeight = (int)volume;
        SolidBrush brush = new SolidBrush(color);
        G.FillRectangle(brush, 0, drawHeight, pictureBottle.Width, (int)(pixelsPerPercent * volume));
        pictureBottle.Image = bmp;

    } 
```

我从上面的代码中尝试的是：我将三个参数传递给“DrawVolume”方法，其中“volume”参数是我要填充图片框的值。“volumeType”是关于该卷的颜色。图片框的“ucSample.Volume”比例。

上面的代码不能满足我的要求。它没有像我想要的那样填充。例如，图片框的比例从“0 到 100”，“音量”为“50”，然后它必须从“0 到 50”绘制，但上面的代码绘制的比“0 到 60”周围的要多. 我不知道为什么会这样。我在“drawheight”中使用了任何错误的计算。

已编辑。

```
 public enum VolumeTypes { Water, Gas, HydrocarboneLiquid, OliBasedMud, WaterBasedMud, NotIdentified, None }
    public VolumeTypes GetVolumeType(double density, double temprature, double pressure)
    {
        bool isDensityChecked = true;
        bool isTempratureChecked = true;
        bool isPressureChecked = true;

        bool IsGasePhase = (isDensityChecked) ? (density >= 0 && density <= 0.4) : true && (isTempratureChecked) ? (temprature >= 0 && temprature <= 30) : true &&
            (isPressureChecked) ? (pressure >= 0 && pressure <= 100) : true;
        bool isHydrocarbanliquid = (isDensityChecked) ? (density >= 0.5 && density <= 1) : true && (isTempratureChecked) ? (temprature >= 31 && temprature <= 60) : true &&
           (isPressureChecked) ? (pressure >= 101 && pressure <= 200) : true;
        bool isWater = (isDensityChecked) ? (density >= 1 && density <= 2) : true && (isTempratureChecked) ? (temprature >= 61 && temprature <= 90) : true &&
           (isPressureChecked) ? (pressure >= 201 && pressure <= 300) : true;
        bool isWaterBasedMud = (isDensityChecked) ? (density >= 2.1 && density <= 3) : true && (isTempratureChecked) ? (temprature >= 91 && temprature <= 120) : true &&
           (isPressureChecked) ? (pressure >= 301 && pressure <= 400) : true;
        bool isOilBasedMud = (isDensityChecked) ? (density >= 3.1 && density <= 4) : true && (isTempratureChecked) ? (temprature >= 121 && temprature <= 150) : true &&
           (isPressureChecked) ? (pressure >= 401 && pressure <= 500) : true;
        bool isNotIdentified = (isDensityChecked) ? (density >= 4.1 && density <= 5) : true && (isTempratureChecked) ? (temprature >= 151 && temprature <= 200) : true &&
           (isPressureChecked) ? (pressure >= 501 && pressure <= 600) : true;

        VolumeTypes volumeType = VolumeTypes.None;

        if (IsGasePhase) volumeType = VolumeTypes.Gas;
        if (isHydrocarbanliquid) volumeType = VolumeTypes.HydrocarboneLiquid;
        if (isWater) volumeType = VolumeTypes.Water;
        if (isWaterBasedMud) volumeType = VolumeTypes.WaterBasedMud;
        if (isOilBasedMud) volumeType = VolumeTypes.OliBasedMud;
        if (isNotIdentified) volumeType = VolumeTypes.NotIdentified;

        return volumeType;

    }

    public void DrawVolume(double volume, VolumeTypes volumeType, PictureBox pictureBottle)
    {
        int x, y, width, height;
        x = 0;
        ucSample sample = new ucSample();

        y = (int)((1 - (volume / ucSample.Volume)) * pictureBottle.Height);
        // MessageBox.Show(ucSample.Volume +"");
        width = pictureBottle.Width;
        height = (int)((volume / ucSample.Volume) * pictureBottle.Height);

        Color color = pictureBottle.BackColor;

        switch (volumeType)
        {
            case VolumeTypes.Gas: color = Color.Lime;
                break;
            case VolumeTypes.HydrocarboneLiquid: color = Color.Red;
                break;
            case VolumeTypes.Water: color = Color.Blue;
                break;
            case VolumeTypes.WaterBasedMud: color = Color.SaddleBrown;
                break;
            case VolumeTypes.OliBasedMud: color = Color.Chocolate;
                break;
            case VolumeTypes.NotIdentified: color = Color.Gray;
                break;

        }
        Graphics graphics = pictureBottle.CreateGraphics();
        pictureBottle.Refresh();
        Rectangle rec = new Rectangle(x, y, width, height);
        graphics.FillRectangle(new SolidBrush(color), rec);

        //Bitmap bmp = new Bitmap(pictureBottle.Width, pictureBottle.Height);
        //Graphics G = Graphics.FromImage(bmp);

        //float pixelsPerPercent = (float)(pictureBottle.Height * (volume / ucSample.Volume));

        //int drawHeight = (int)volume;
        //SolidBrush brush = new SolidBrush(color);
        //G.FillRectangle(brush, 0, drawHeight, pictureBottle.Width, (int)(pixelsPerPercent * volume));
        //pictureBottle.Image = bmp;

    }

    private void UpdateTable(AnalogSensorData data)
    {
        DataRow row = _table.Rows.Find(_recs);
        if (row == null)
        {
            row = _table.NewRow();
            row["Index"] = _recs;
            row["DateTime"] = data.Time;
            row["Time"] = data.Time.ToLongTimeString();                
            row[data.SystemName] = data.Eng;

            _logs = 1;
            _table.Rows.Add(row);
        }
        else
        {
            row[data.SystemName] = data.Eng;
            if (++_logs >= SensorUC.NumberOfActive)
            {
                int i = 1;
                double density = 0, temprature = 0, pressure = 0, volume = 0;
                foreach (var item in row.ItemArray)
                {
                    sheet.Cells[(int)_recs + 3, i].Value = item;

                    //if (i == 4)
                    //{
                    //    object densityCell = item;
                    //    density = (densityCell != null) ? (double)densityCell : 0;
                    //    MessageBox.Show("density is : " + density + "");
                    //}
                    if (i == 8)
                    {
                        object pressureCell = item;
                        pressure = (pressureCell != null) ? (double)pressureCell : 0;
                        //MessageBox.Show("pressure is : " + pressure + "");
                    }
                    else if (i == 12)
                    {
                        object tempratureCell = item;
                        temprature = (tempratureCell != null) ? (double)tempratureCell : 0;
                       // MessageBox.Show("temprature is : "+ temprature + "");
                    }
                    if (i == 11)
                    {
                        object volumeCell = item;
                        volume = (volumeCell != null) ? (double)volumeCell : 0;
                        //MessageBox.Show("Volume is : "+ volume + "");
                    }

                    i++;

                }
              VolumeTypes volumeType = GetVolumeType(density, temprature, pressure);

              DrawVolume(volume, volumeType, pictureBottle);
                book.SaveAs(_logFile);
                _recs++;

            }
        }
        if (!_list.Columns[data.SystemName].HeaderText.Equals(data.SensorName))
        {
            _table.Columns[data.SystemName].Caption = data.SensorName;
            _list.Columns[data.SystemName].HeaderText = data.SensorName;
        }
        _list.FirstDisplayedCell = _list.Rows[_list.Rows.Count - 1].Cells[0];
        _list.Update();
    } 
```

这个任务背后的概念主要取决于两个变量 1）体积：这是我需要在图片框中绘制的原始体积，每个数量都有不同的条件。一次只能满足一个条件。2）ucSample.Volume：这是图片瓶的比例。

我想这样实现。最初我会设置一些估计的传输量（我是将数量放入传感器的人）然后它将分配为图片框的比例。那是有效的。现在我将开始从传感器读数。我将从传感器获得“音量”值。它将从“0 增加到估计的传输量（最大规模）”。例如：我已将估计的传输量设置为“500 毫升”左右。然后我的图片框比例将从“0到500”分配。然后我将开始传感器的读数，并将数量放入体积传感器。所以最初我将转移 100 毫升水。所以图片框必须在图片框中填充“0到100ml”刻度的水彩。之后，我会将“油”从“100 毫升”转移到 200 毫升

从上面的代码中，我只能用一种颜色填充图片瓶。例如，我有“0 到 100 毫升”的水，那么我就可以完美地为图片瓶装满水的颜色。然后从“100ml 到 200ml”，然后填充油色形式“0 到 200”，而不是“0 到 100ml 用水彩”和“100ml 到 200ml”用油色。

> 已编辑。我想很多用户误解了我的概念。我很抱歉解释不好可能是因为我的英语。我试图解释我最好的，如下所示。

我正在尝试估计来自系统的传入数量。最初，我将设置来自系统的预期数量（ucSample.Volume），这将作为一个比例分配给图片框。这是完美的工作。我有一些估计进货量的条件。我有一个体积传感器，它将给出系统已经有多少数量（存储在变量“体​​积”中）。我每秒都在更新图片框。我为每个数量分配了颜色。

例如：我已将估计音量设置为“500”（ucSample.Volume=500），然后我将启动系统。系统将缓慢倒入液体，100ml 需要 30 分钟。当系统缓慢通过液体时，我将使用传感器读取该液体的密度、压力、温度并检查满足哪个条件，根据条件它将选择一种颜色。所以我有一个音量传感器，它可以读取到目前为止通过系统的音量。它将每秒更新一次，例如到目前为止，系统仅通过 10 毫升液体。所以图片框只需要在比例上更新最多 10 个颜色。接下来假设输入的液体从 10 毫升到 20 毫升发生了变化，所以条件会有所不同，所以现在我需要用 10 毫升到 20 毫升刻度的不同颜色填充图片框。（不是从 0 到 20 毫升）。这应该是这样的，它不需要改变前一个的颜色，从“0到10毫升”保持相同的颜色，并从“10到20毫升”添加不同的颜色。所以这个概念是我需要保持前一个不变并从前一个端点继续更新。
所以我们不知道来自系统的东西，所以最后在看到图片框后，我们必须估计有多少（总）来自系统，以及每种类型的个体数量。
上面的代码没有像我上面描述的那样更新，它像第一次一样更新它会用“0到100ml”的“绿色”颜色填充，如果数量从100变为200，那么它会用“0到200”的另一种颜色填充毫升”。（不是从“100 到 200”。）我丢失了以前的信息，所以这是完全错误的。我需要保持初始颜色，因为它取决于在液体发生任何变化之前它已经绘制了多少，然后如果有任何变化，它必须从那个点开始。

我希望我已经给出了更清楚的解释。如果有人理解我的概念，请帮助我。

最后我有这个问题的答案，但我有一个小问题。我可以使用以下代码根据条件动态更新图片框。

```
 public void DrawVolume(double volume, VolumeTypes volumeType, PictureBox pictureBottle)
    {
        int x, y, width, height;
        x = 0;

        y = (int)((1 - (volume / ucSample.Volume)) * pictureBottle.Height) ;

        width = pictureBottle.Width;
        height = (int)((volume / ucSample.Volume) * pictureBottle.Height);

        Color color = pictureBottle.BackColor;

        switch (volumeType)
        {
            case VolumeTypes.Gas: color = Color.Lime;
                break;
            case VolumeTypes.HydrocarboneLiquid: color = Color.Red;
                break;
            case VolumeTypes.Water: color = Color.Blue;
                break;
            case VolumeTypes.WaterBasedMud: color = Color.SaddleBrown;
                break;
            case VolumeTypes.OliBasedMud: color = Color.Chocolate;
                break;
            case VolumeTypes.NotIdentified: color = Color.Gray;
                break;

        }

        int myCurrentHeight = height - lastHeight;
        if (color != currentColor)
        {  
            Rectangle rec = new Rectangle(x, y, width, myCurrentHeight);
            myRectangles.Add(new MyRectangle(rec,color));
            currentColor = color;
        }
        else 
        {
            Rectangle rec = new Rectangle(x,y,width,myCurrentHeight+myRectangles.Last<MyRectangle>().rectangle.Height);
            myRectangles.Last<MyRectangle>().rectangle = rec;
        }
        lastHeight = height;
        Bitmap bitmap = new Bitmap(Log.frmSample.PictureBottle.Width, Log.frmSample.PictureBottle.Height);
        Graphics graphics = Graphics.FromImage(bitmap);
        foreach (MyRectangle myRectangle in myRectangles)
        {
            graphics.FillRectangle(new SolidBrush(myRectangle.color), myRectangle.rectangle); 
        }
        Log.frmSample.PictureBottle.Image = bitmap;

    } 
```

上面的代码正在更新图片框，如下图所示。

![图片框更新](../Images/acbbd788feb3130f62d47829d665eb99.png)

我现在要做的是“最初图片框填充绿色，如果颜色发生变化，那么下一个颜色将填充在上一个颜色的顶部，如上图所示。现在我需要的是如果颜色发生变化那么现在颜色应该用图片瓶的底部填充，之前的颜色应该向上移动。这个概念是如果有新的数量，那么它应该从底部。所以最后第一个更新的颜色将进入图片瓶的顶部，最后更新的颜色应该在底部图片瓶。

请任何人帮助我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:22:41.877

对于这么简单的形状，我只使用面板。改变他们的背景颜色，设置他们的位置、宽度、高度。需要时更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:10:11.187

我建议不要使用图片框，而是覆盖面板的 OnPaint 事件并直接绘制到它（请记住，您需要将 DoubleBuffered 设置为 true 以避免表单闪烁，并且在某些情况下调用 Refresh() 或 Invalidate( ））。

这没有直接关系，但它可以帮助您弄清楚渲染部分：[GDI+ 渲染](http://electronicpaw.com/Article.aspx?id=3)如果您有任何其他问题，请告诉我。

# css - 水平扩展div而不是垂直扩展

> ID：15294245
> 
> 赞同：5
> 
> 时间：2013-03-08T12:42:19.980
> 
> 标签：css, html

我有一个 div

```
display:inline-block;
postion:relative; 
```

在一个div里面

```
display:block;
width:348px;
overflow:hidden; 
```

当内部 div 的内容溢出时，我希望它们展开`horizontally`，而不是`vertically`. 内部 div 的内容由照片的缩略图组成

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-15T15:59:00.437

您只需要`white-space: nowrap`在其中一个 div 上进行设置（该属性是继承的）。[（资源）](http://www.w3schools.com/cssref/pr_text_white-space.asp)

***旁注****：内部 div 不是必需的。*

演示：[JSFiddle](http://jsfiddle.net/vKUaa/)

**HTML**

```
<div class="container">
    <div>
        <!-- Thumbnails -->
    </div>
</div> 
```

**CSS**

```
.container {
    display: block;
    width: 348px;
    overflow: hidden;
    white-space: nowrap;
}

.container div {
    position: relative;
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:31:44.427

雷Z！

溢出确实很重要。所以为了写你的css

```
overflow:"hidden" 
```

你应该使用

```
overflow-x: hidden;
overflow-y: scroll; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-08T12:51:57.377

将内部 div 的 width 和 overflow-x 设置为 auto

```
 <div id = "outer">
     <div id = "inner"></div>
    </div>

#outer{
width: 400px;
height: 300px;
border: red thin dotted;
}

#inner{
margin: 15px;
height: 280px;
width: auto;
border: green thin solid;
overflow-x: auto;
} 
```

这是小提琴[http://jsfiddle.net/jgrgb/](http://jsfiddle.net/jgrgb/)

# qt - 如何在 linux 中为 qml 项目链接第三方库

> ID：15294248
> 
> 赞同：0
> 
> 时间：2013-03-08T12:42:24.270
> 
> 标签：qt, qt-creator, qml

我如何在 Qt Creator 中为 Qt Quick UI 应用程序链接第 3 方库。我有内置在 linux(.so) 中的库文件在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:49:36.167

您应该创建“Qt Quick Application *”项目和 .pro 文件应如下所示：

```
QT += core quick gui network
TEMPLATE = app
HEADERS += some .h files
SOURCES += some .cpp files
INCLUDEPATH += ../include
OTHER_FILES += *.qml #or path to qml files
LIBS += -lprotobuf  # list of Libs, which you wish 
```

# android - Android全屏表格布局

> ID：15294253
> 
> 赞同：1
> 
> 时间：2013-03-08T12:42:34.260
> 
> 标签：android, layout, tablelayout

我正在尝试在 Android 应用程序中获取此布局。[http://img339.imageshack.us/img339/3374/screenshot1362677685476.png](http://img339.imageshack.us/img339/3374/screenshot1362677685476.png)

我现在正在使用表格布局，但我的表格没有被拉伸以填充所有容器。

这是我的布局示例：

```
<TableLayout
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:stretchColumns="*" >
<TableRow>
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <ImageButton
            android:layout_gravity="center_horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="#00000000"
            android:src="@drawable/##image##" />
    </LinearLayout>
<LinearLayout
        android:orientation="vertical"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <ImageButton
            android:layout_gravity="center_horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="#00000000"
            android:src="@drawable/##image##" />
    </LinearLayout>
<LinearLayout
        android:orientation="vertical"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <ImageButton
            android:layout_gravity="center_horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="#00000000"
            android:src="@drawable/##image##" />
    </LinearLayout>

</TableRow>
<TableRow>
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <ImageButton
            android:layout_gravity="center_horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="#00000000"
            android:src="@drawable/##image##" />
    </LinearLayout>
<LinearLayout
        android:orientation="vertical"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <ImageButton
            android:layout_gravity="center_horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="#00000000"
            android:src="@drawable/##image##" />
    </LinearLayout>
<LinearLayout
        android:orientation="vertical"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <ImageButton
            android:layout_gravity="center_horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="#00000000"
            android:src="@drawable/##image##" />
    </LinearLayout>

</TableRow> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:49:19.223

您只需将此代码添加到此布局正在使用的活动中

```
super.onCreate(savedInstanceState); 
```

> requestWindowFeature(Window.FEATURE_NO_TITLE);

```
 //Full screen is set for the Window

        setContentView(R.layout.activity_main); 
```

> requestWindowFeature(Window.FEATURE_NO_TITLE);

会给你全屏模式

# internet-explorer - 使用 webdriver 的 Chrome 和 IE 驱动程序配置文件

> ID：15294254
> 
> 赞同：3
> 
> 时间：2013-03-08T12:42:34.933
> 
> 标签：internet-explorer, google-chrome, selenium-webdriver

我的项目需要某些 cookie 才能访问应用程序。对于 Firefox 驱动程序，我使用 Firefox 配置文件（我用于手动测试的 ff 配置文件，因为它具有我想要的所有 cookie）来运行脚本。如何为 Chrome 和 IE 浏览器运行相同的内容。是否有任何选项可以获取 chrome 和 IE 浏览器的配置文件？提前致谢

# php - 防止重新插入数据

> ID：15294255
> 
> 赞同：-5
> 
> 时间：2013-03-08T12:42:37.787
> 
> 标签：php, codeigniter, double-submit-prevention

大家好，任何人都知道任何解释如何使用会话来防止在表单中重新插入数据或其他形式的方法的教程。如果您对如何做到这一点有任何建议，请不要犹豫，提前发布您的想法 tnx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:43:56.023

有一种设计模式，称为[PRG 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)，专门用于避免重新提交数据。基本上，这个想法是，当用户提交他们的内容时，页面会被重定向，这意味着没有机会重新提交。

# php - Ajax 访问 codeigniter 控制器

> ID：15294257
> 
> 赞同：1
> 
> 时间：2013-03-08T12:42:44.410
> 
> 标签：php, codeigniter, jquery, http-status-code-404

我在使用我的 JQuery Ajax 方法和我的控制器时遇到了一些问题。似乎它找不到控制器，我似乎无法摆脱 index.php。

它在我的 MAMP localhost 上运行良好，但是当我将项目上传到网络主机时，apache 2.2.16（debian）。我的 ajax 无法访问控制器。

我不断收到此错误：

```
 <title>404 Not Found</title>
 </head><body>
 <h1>Not Found</h1>
 <p>The requested URL /home/stud/xxxxx/public_html/revy/index.php/$ was not found on this
  server.    </p 
```

Ajax 可以访问和加载位于 codeigniter 应用程序文件夹之外的文件。

这是我收到的错误消息，

我的代码如下所示：

PHP：

```
public function loggInn_Ajax(){
    $response = '';
    if($this->input->post('ajax')){
        $this -> form_validation -> set_rules('brukernavn', 'Brukernavn',  
   'trim|required');
        $this -> form_validation -> set_rules('passord', 'Passord', 'required');

        if($this->form_validation->run()){

            $brukernavn = $this->input->post('brukernavn');
            $passord = $this->input->post('passord');
            $aktiveringskode = $this->input->post('aktiveringskode');

            if($aktiveringskode != ''){
                $aktivering = $this->bitauth->activate($aktiveringskode);

                if($aktiveringskode == FALSE){
                    $response = 'Feil aktiveringskode, om du har tastet 
                  riktigkode.Ta kontakt med systemansvarlig.';
                }
            }

            $remember_me = '';

            $res = $this->bitauth->login($brukernavn, $passord, $remember_me);

            if($res === 'inaktiv'){
                $response = 'inaktiv';
            } else if($res == TRUE){
                $response = 'ok';
            }else{
                $response = $this->bitauth->get_error();
            }

        }else{
            $response = validation_errors();
        }
    }
      echo $response;
    } 
```

阿贾克斯：

```
function loggInn() { 

brukernavn = $('#brukernavn').val();
passord = $('#passord').val();
husk_meg = $('#husk_meg').val();
aktiveringskode = $('#aktiveringskode').val();

sendLoggInnnData();
return false;

}

  function sendLoggInnnData(){

var logginn = {
    'brukernavn': brukernavn,
    'passord': passord,
    'husk_meg': husk_meg,
    'aktiveringskode': aktiveringskode,
    'ajax': 1
};

$.ajax({
    url : 'MetodeKontroller/loggInn_Ajax',
    type: 'POST',
    data: logginn,
    success:function(response) {
        if(response == 'inaktiv'){
            $('#aktiveringsfelt').html("<input name='aktiveringskode' 
       id='aktiveringskode' class='input-block-level' type='text' value='' required='required' 
      placeholder='Aktiveringskode' autofocus='autofocus' onblur='validerInput(this)'    
      maxlength='6' min='6'>");

            $('#aktiveringskode').focus();
        }else if(response == 'ok'){
            window.location.href = "SideKontroller";
        }else{
            $('#alerts').html(alert_error+response+'</div>');
        }
    }

});
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:11:06.263

```
$config['base_url'] = 'http://'.$_SERVER['SERVER_NAME'].'/ProjectFolderName'; 
```

尝试这个

```
<?php 
var url = '<?php echo base_url();?>';
?> 
```

并在 ajax 中使用：

```
$.ajax({
    type:'POST',
    url:url+"MetodeKontroller/loggInn_Ajax", 
```

# jquery-mobile - jQuery移动网站桌面预览

> ID：15294260
> 
> 赞同：0
> 
> 时间：2013-03-08T12:42:58.113
> 
> 标签：jquery-mobile, html, iframe, smartphone

我有一个 jQuery 移动网站，并且正在运行。但是，我需要客户对移动网站进行实时预览，所以我构建了一个页面，其中包含一个 div、div 内的手机图像，然后 iframe 很好地定位在 div 内。移动网站在智能手机上看起来很好缩放，在普通台式电脑上也不错。我有以下元标记集：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

但是，当通过 iframe 查看移动网站时，它被称为太大，有没有人知道解决这个问题的好方法，还是不可能？

# vb.net - 使用 ghostscript 从 ps 文件创建 pdf

> ID：15294269
> 
> 赞同：0
> 
> 时间：2013-03-08T12:43:22.060
> 
> 标签：vb.net, cmd, ghostscript

我目前正在尝试以编程方式将一些 .ps 文件转换为 pdf - 但我遇到了 gswin64c，它没有任何可用的教程:(

基本上，到目前为止，我想出了这个：

```
Dim proc As New Process

proc.StartInfo.FileName = My.Settings.GhostscriptPath 'path to the ghostscript bin directory
proc.StartInfo.WorkingDirectory = System.IO.Path.GetDirectoryName("c:\test dire\test.ps")

'output umschreiben
proc.StartInfo.RedirectStandardOutput = True
proc.StartInfo.RedirectStandardError = True
proc.StartInfo.UseShellExecute = False

Dim PDfName = System.IO.Path.ChangeExtension("c:\test dire\test.ps", "pdf")
Dim Args As String = String.Format("-dSAFER -dBATCH -dNOPAUSE -sDEVICE=pdfwrite -sOutputFile='{0}' '{1}'", PDfName, FileName)
proc.StartInfo.Arguments = Args
proc.Start()
proc.WaitForExit()
Dim Output = proc.StandardOutput.ReadToEnd
Dim OutputErrors = proc.StandardError.ReadToEnd
Debug.Print(Output)
Debug.Print(OutputErrors) 
```

它运行 - 但 ghotscript 只是发出“没有这样的文件或目录”错误并退出。实际运行这个东西需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:21:07.717

您的参数字符串在文件名占位符周围使用单引号：

```
"-dSAFER -dBATCH -dNOPAUSE -sDEVICE=pdfwrite -sOutputFile='{0}' '{1}'" 
```

`CMD`但是，单引号`'c:\test dire\test.ps'`不是`c:\test dire\test.ps`. 改用双引号：

```
"-dSAFER -dBATCH -dNOPAUSE -sDEVICE=pdfwrite -sOutputFile=""{0}"" ""{1}""" 
```

必须通过在它们前面加上另一个双引号来逃避它们。

# linux - 运行时未定义的符号不会导致编译/链接时出错

> ID：15294273
> 
> 赞同：2
> 
> 时间：2013-03-08T12:43:38.810
> 
> 标签：linux, gcc, dll, linker, shared-libraries

我一直在谷歌上搜索这个，也有一些关于 StackOverFlow 的主题，但他们没有回答主要问题：为什么有时，在 LINUX 上的 GCC 下（我的意思是 Linux，因为在 MinGW 上它不会发生）相同的代码），应用程序编译并与其他库正确链接，没有任何错误，然后在执行时抛出未定义的符号？

为什么在编译/链接时没有抛出这个未定义的符号？

即使尚未定义此类函数，链接器接受库和代码的原因是什么？为什么只在执行期间检测到这个问题？

编辑：

例如，我在 A 类的头文件中有 play() 方法，但后来我从未实现 A::play()。当从另一个项目文件中调用此函数时，链接到定义 A 类的初始库不会给我任何未定义的符号错误，因为 A::play() 没有实现。稍后，在执行时，应用程序在显式加载库时崩溃，例如，我收到错误字符串“未定义符号播放”。很奇怪...

# java - 编译字数地图减少示例

> ID：15294281
> 
> 赞同：2
> 
> 时间：2013-03-08T12:44:05.360
> 
> 标签：java, hadoop, mapreduce, javac, java-6

我在编译 Hadoop 附带的 Word Count Map Reduce 示例时遇到问题。

我收到以下错误：

> WordCount.java:6：无法访问 org.apache.hadoop.fs.Path 坏类文件：/home/john/Apps/hadoop-1.0.4/hadoop-core-1.0.4.jar(org/apache/hadoop/ fs/Path.class) 类文件有错误的版本 50.0，应该是 49.0

我很清楚这表明我使用了错误版本的 Javac 来编译代码。但是，我已经更新到最新版本的 Sun Java 6 JDK，我明确地这样称呼它：

```
/usr/lib/jvm/jdk1.6.0_43/bin/javac -classpath ${HADOOP_HOME}/${HADOOP_CORE_JAR} -d wordcount_classes WordCount.java 
```

我仍然得到这个错误。这对我来说没有意义。我没有使用 Java 5 编译器，那么为什么 javac 坚持我应该使用版本为 49.0 的类？

注意：运行 /usr/lib/jvm/jdk1.6.0_43/bin/javac -version 的输出是：

```
javac 1.6.0_43
javac: no source files 
```

其次是使用说明。

# sql - 在 SQL 2008 中使用 Select 重复记录

> ID：15294289
> 
> 赞同：0
> 
> 时间：2013-03-08T12:44:28.907
> 
> 标签：sql

声明 @NoofRept int

select id,Name from tbl_Name where id=1

```
id  |Name
1   |XXXXXXX 
```

我的要求这个重复这个记录@NoofRept 时间

```
id  |Name
1   |XXXXXXX
1   |XXXXXXX
1   |XXXXXXX
1   |XXXXXXX 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:52:09.870

如果你想重复记录少于 2047 的最大值，你可以使用 table `Master..spt_values`，这是一个系统表，类型 P 有从 0 到 2047 的序列号：

```
DECLARE @NoofRept INT = 10

SELECT  t.ID, t.Name
FROM    tbl_Name t
        CROSS JOIN Master..spt_Values v
WHERE   t.ID = 1
AND     v.Type = 'P'
AND     v.Number BETWEEN 1 AND @NoofRept 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/dadb4/3)**

如果您需要更多，那么您将需要`CROSS JOIN`表格来获取所需的行数：

```
SELECT  ID, Name
FROM    tbl_Name
        CROSS JOIN 
        (   SELECT  rpt = ROW_NUMBER() OVER(ORDER BY a.Number)
            FROM    Master..spt_Values a
                    CROSS JOIN Master..spt_Values b
                    --CROSS JOIN Master..spt_values c
                    --CROSS JOIN Master..spt_values d
        ) v
WHERE   ID = 1
AND     v.rpt BETWEEN 1 AND @NoofRept 
```

*根据需要取消注释连接*

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/dadb4/4)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:53:29.233

未经测试的伪代码，但这样的事情可能会奏效：

```
DECLARE @sql nvarchar(max);
DELCARE @i int; 
SET @i = 1;

SET @sql = 'select id,Name from tbl_Name where id=1'

WHILE @i < @NoofRept
BEGIN
  SET @sql = @sql + 'UNION select id,Name from tbl_Name where id=1'

  SET @i = @i + 1;
END

EXEC sp_executesql @sql; 
```

# jakarta-ee - Java EE 应用程序中的小程序访问蓝牙外设客户端

> ID：15294291
> 
> 赞同：0
> 
> 时间：2013-03-08T12:44:31.683
> 
> 标签：jakarta-ee, applet, client-side, java

我目前在服务器上有一个 Java EE 应用程序。它使用 struts2 和 Hibernate。我需要访问客户端计算机并搜索客户端计算机检测到的所有蓝牙外围设备的 MAC 地址。

那么问题来了：如何访问客户端计算机？我必须使用 Java Applet 吗？我的老师说小程序对安装在客户端计算机上的 Java 版本非常敏感！如果为 Java 5 设计的小程序不能与 Java 6 一起运行，那将是一个问题！

这是真的吗？除了小程序还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:18:12.857

> 如何访问客户端计算机？我必须使用 Java Applet 吗？

我不知道这是否是唯一的方法，但是一个受信任的小程序可以有机会获取信息。我说“试一试”是因为核心 Java SE 不太可能为该任务提供功能，因此您可能需要考虑为每个系统使用原生代码。

> 我的老师说小程序对安装在客户端计算机上的 Java 版本非常敏感！如果为 Java 5 设计的小程序不能与 Java 6 一起运行，那将是一个问题！

不，情况正好相反。如果一个applet 是*为*Java 6 编译的，它不会在Java 5 上运行。但是一个设计为在Java 5 中运行的applet 在版本6 JVM 中运行应该没有问题。

至于由此产生的问题，它们很容易解决：

1.  用于[`deployJava.js`](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html#deplToolkit)确保特定的最低 Java 版本，它应该处理以下之一的“繁重”：
    1.  检查用户是否有合适的最小 JRE 并为其编写小程序元素。
    2.  帮助用户完成升级（然后进入 1）
    3.  通知用户为什么小程序不能工作。
2.  同样的情况适用于在桌面上运行的***任何***代码，无论是小程序还是应用程序。在命令行或桌面应用程序中运行。

# python - 如何在 Python 中的几个大型 apache 日志文件上运行逻辑？

> ID：15294292
> 
> 赞同：0
> 
> 时间：2013-03-08T12:44:34.950
> 
> 标签：python, performance, loops, logging, temporary

我有一堆 apache 日志文件，我需要从中解析和提取信息。我的脚本适用于单个文件，但我想知道处理多个文件的最佳方法。

我是不是该：

```
- loop through all files and create a temporary file holding all contents
- run my logic on the "contact-ed" file 
```

或者

```
- loop through every file
- run my logic file by file
- try to merge the results of every file 
```

Filewise 我正在查看大约一年的日志，每天大约有 200 万个条目，报告了大量机器。我的单文件脚本正在为每台机器生成一个带有“条目”的对象，所以我想知道：

**问题：**
我应该生成一个联合临时文件还是逐个文件运行，生成基于文件的对象并将 x 文件与相同 y 机器的条目合并？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:51:52.200

您可以使用`glob`and`fileinput`模块有效地循环所有这些并将其视为一个“大文件”：

```
import fileinput
from glob import glob

log_files = glob('/some/dir/with/logs/*.log')
for line in fileinput.input(log_files):
    pass # do something 
```

# ruby - WebDriver/Ruby 测试报告？

> ID：15294293
> 
> 赞同：2
> 
> 时间：2013-03-08T12:44:35.517
> 
> 标签：ruby, testing, webdriver, automated-tests

我的团队目前正在用 Ruby 构建一个 WebDriver 测试框架。我们正在寻找一种生成测试完成报告的方法，以便可以通过电子邮件发送，最好包括单独的测试和测试验证点结果。

作为我所说的测试验证点的示例，创建产品的测试可能有多个验证点，例如产品名称是否正确创建，产品价格是否正确创建。如果测试完成报告可以指定哪个验证点失败，它将更快地评估失败。

可以从 selenium IDE 输出的报告几乎就是我所追求的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:02:57.713

由于您使用的是 Ruby，因此您可以考虑将验证点结果、测试用例状态等存储在数据库中，例如 MySQL 或 Sqlite。这使您能够对过去和现在的测试运行状况进行各种分析。基于此，您甚至可以预测未来的趋势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T15:06:32.090

也许[Allure 报告](http://allure.qatools.ru/)和相应的[RSpec 适配器](https://github.com/allure-framework/allure-rspec)可以满足您的要求？该报告相当新，为您提供了广泛的功能，例如按 BDD 功能和故事对测试进行分组、保存附件、参数等。

# android - Android 上的 Maps v2 API 密钥

> ID：15294299
> 
> 赞同：2
> 
> 时间：2013-03-08T12:44:57.830
> 
> 标签：android, keytool

我去了[https://code.google.com/apis/console/](https://code.google.com/apis/console/)

然后我这样做了：

```
keytool -v -list -alias ks_ms_ad -keystore W:\eclipse-android-sign\keystore\exampleproject 
```

我转换了输出

```
SubjectKeyIdentifier [
KeyIdentifier [
0000: HH HH HH HH HH HH HH HH   HH HH HH HH HH HH HH H  /x<s7.@...B.).8.
0010: HH HH HH HH                                        .. .
]
] 
```

到

```
HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH;com.exampledomain.exampleproject 
```

谷歌实际上接受了这一点，所以不知何故我把胡言乱语变成了有用的东西。“HH”条目与 Google API 控制台站点中给出的示例相匹配，因此我所做的实际上是正确的可能性很小。

但上面看起来不像我应该怎么读？我真的应该做我所做的编辑吗？我想我会准备好从 keytool 使用 md5 吗？

我得到一个带有缩放按钮 [+] [-] 的空白屏幕，这就是我认为可能有问题的部分原因？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T22:46:11.837

看来原因是我搞砸了。（您在我所引用的内容之上找到 SHA1 等）所以只是为了其他人搞砸这个：

**调试 keytool 指纹示例：**

```
keytool -list -v -keystore "C:\Users\%your name%\.android\debug.keystore" -alias androiddebugkey -storepass android -keypass android
HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH;com.company.product 
```

**释放 keytool 指纹示例：**

```
keytool -v -list -alias youralias -keystore W:\keystore\product
HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH;com.company.product 
```

All above can then share the same API key which will have pattern:

```
a-zA-Z0-9- 
```

You can get the API key here: [https://code.google.com/apis/console/](https://code.google.com/apis/console/)

And find keytool.exe here (example) C:\Program Files\Java\jre7\bin

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:27:03.330

I think there was an issue with your key itself in the way it has been signed. The fingerPrint seems odd. Pls. check the SHA1 fingerPrint. Ohk. looks like you have found the issue.

# c# - 如何在 C# 中将我的线程（用户定义的线程）置于睡眠模式？

> ID：15294302
> 
> 赞同：1
> 
> 时间：2013-03-08T12:45:00.907
> 
> 标签：c#, asp.net, multithreading, c#-4.0

我在 C# 中创建了一个线程。现在我想将我创建的线程放入某个特定的时间。然后我想开始我的线程。我的目标是，我想每天晚上 8 点调用我的 updateMark 函数。调用我的函数后，该线程将在接下来的 24 小时内休眠。所以它会在第二天晚上 8 点再次开始，并定期做同样的工作。

```
**My C# code:-**
    public class ThreadProcess
    {
        public static void Main()
        {

        }

        public void updateMark()
        {
             string temp=ok("hai");
        }

        public string ok(string temp)
        {
             return temp+"!!!!";
        }
    } 
```

因此，我在另一个类的以下代码中使用线程：

```
 string targetTime = "08:05:00 PM";
        string currentTime = DateTime.Now.ToString("HH:mm:ss tt");

        DateTime t11 = Convert.ToDateTime(targetTime, culture);
        DateTime t21 = Convert.ToDateTime(currentTime, culture);

        ThreadProcess tp = new ThreadProcess();
        Thread myThread = new Thread(tp.updateMark);
        myThread.Start();

        if (t11.TimeOfDay.Ticks > t21.TimeOfDay.Ticks)
        {
            TimeSpan duration = DateTime.Parse(targetTime, culture).Subtract(DateTime.Parse(currentTime, culture));
            int ms = (int)duration.TotalMilliseconds;

            //Thread.Sleep(ms);i want to put my thread into sleep
        }

        while (true)
        {               
            myThread.start();

            Thread.Sleep(86400000);//put thread in sleep mode for next 24 hours...86400000 milleseconds...
        } 
```

请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:46:58.100

创建一个对象是否更合乎逻辑，该对象中存储了此过程。然后在某个时间，每晚调用该对象内部的 run 方法。不需要随机休眠线程，完成后内存会自行清理。

**伪代码**

```
TargetTime := 8:00PM.
// Store the target time.
Start Timer.
// Start the timer, so it will tick every second or something. That's up to you.
function tick()
{
    CurrentTime := current time.
    // Grab the current time.
    if(CurrentTime == TargetTime)
    {
         // If CurrentTime and TargetTime match, we run the code.
         // Run respective method.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:54:28.230

我认为您应该使用计时器而不是[`Thread.Sleep`](http://msdn.microsoft.com/en-us/library/d00bd51t.aspx)在您的情况下。

[.NET 中有不同类型的计时器，您可以在此处](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)阅读其中的一些。

我建议基于以下简化实现[`System.Threading.Timer`](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)：

```
public class ScheduledJob
{
    //Period of time the timer will be raised. 
    //Not too often to prevent the system overload.
    private readonly TimeSpan _period = TimeSpan.FromMinutes(1);
    //08:05:00 PM
    private readonly TimeSpan _targetDayTime = new TimeSpan(20, 5, 0);
    private readonly Action _action;
    private readonly Timer _timer;

    private DateTime _prevTime;

    public ScheduledJob(Action action)
    {
        _action = action;
        _timer = new Timer(TimerRaised, null, 0, _period.Milliseconds);
    }

    private void TimerRaised(object state)
    {
        var currentTime = DateTime.Now;

        if (_prevTime.TimeOfDay < _targetDayTime
            && currentTime.TimeOfDay >= _targetDayTime)
        {
            _action();
        }

        _prevTime = currentTime;
    }
} 
```

然后，在您的客户端代码中，只需调用：

```
var job = new ScheduledJob(() =>
    {
        //Code to implement on timer raised. Run your thread here.
    }); 
```

# paypal - 贝宝沙盒 IPN 错误

> ID：15294307
> 
> 赞同：1
> 
> 时间：2013-03-08T12:45:10.253
> 
> 标签：paypal, handler, paypal-ipn

在 paypal 更新他们的界面后（例如，sandbox.paypal.com 无法正常工作，现在您必须访问 developer.paypal.com）许多事情都无法正常工作：其中 2 个特别令人沮丧，我希望这里有人知道如何绕过它们：

1.  我是唯一一个沙盒客户测试帐户无法进行购买的人吗？交易页面说它们不可用。

2.  IPN 验证不允许我发送 https 请求。当我这样做时，它说服务器名称有问题。昨天，但是在更新之前，我可以获得已验证的状态。如果我不放 https，现在我的处理程序会给我一个无效的响应状态，代码：400。这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:27:30.043

要修复 HTTP 400 错误，请按照[https://www.x.com/content/bulletin-ipn-and-pdt-scripts-and-http-1-1](https://www.x.com/content/bulletin-ipn-and-pdt-scripts-and-http-1-1)中的说明 更新您的代码以传递“主机”信息. 理想情况下，事情应该只适用于上述链接中推荐的更改。显然，事实并非如此。这是来自 PayPal MTS 人员之一的修复 - [PalPAL 沙盒 IPN 处理器拒绝所有消息？](https://stackoverflow.com/questions/15305598/palpal-sandbox-ipn-processor-rejecting-all-messages)

从验证 URL 中删除“cmd=notify-validate”选项。我试过了，它奏效了。虽然它没有返回正确的字符串，但至少它不会因 400 错误而中断。

当我们等待 Paypal 的修复时，我想知道像 PayPal 这样的公司如何会造成如此巨大的错误，并且不会在他们的状态页面上发布任何内容 - [https://www.x.com/developers/paypal/documentation-tools/site -状态/pp-cri](https://www.x.com/developers/paypal/documentation-tools/site-status/pp-cri)。它只是让您认为即使是较小的公司也可以比 PayPal 等公司做得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:54:35.787

对于 code:400 问题，您必须将帖子更新到 1.1 版。该信息位于此处。

[https://www.x.com/content/bulletin-ipn-and-pdt-scripts-and-http-1-1](https://www.x.com/content/bulletin-ipn-and-pdt-scripts-and-http-1-1)在本公告中。

但是，正如我在 asp.net 示例使用调用之前发布的那样，该调用不存在，所以我只能让我的部分工作。修复此问题后，服务器似乎正在拒绝对 https 的调用，或者他们安装的证书无效。

2013 年 2 月 1 日之前需要采取的措施 商家需要更新其 IPN 和/或 PDT 脚本以使用 HTTP 1.1，并在 IPN 回发脚本中包含“Host”标头。除此公告外，这些商家将通过直接电子邮件收到通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:44:06.933

好吧，看来是修好了！

如果您在登录时遇到问题，如上所述，请清除缓存和 cookie，然后重试。

关于错误400，好像已经被paypal解决了！

# android - 让 AVD 工作得更快

> ID：15294309
> 
> 赞同：0
> 
> 时间：2013-03-08T12:45:12.130
> 
> 标签：android, eclipse, avd

我在笔记本电脑上使用 AVD，速度非常慢。

我的笔记本电脑配置是：

英特尔 i5 2.6ghz 16GB 1600Mhz 内存 512GB 固态硬盘

我该怎么做才能使模拟器工作得非常快？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:49:41.077

[您应该从Intel 的 android 站点](http://software.intel.com/en-us/android)下载并使用 HAXM（硬件加速执行管理器）

请参阅此站点进行[安装](http://software.intel.com/en-us/articles/intel-atom-x86-image-for-android-ice-cream-sandwich-installation-instructions-recommended)和优化

# c# - 将文本拆分为最大长度的行

> ID：15294310
> 
> 赞同：7
> 
> 时间：2013-03-08T12:45:15.010
> 
> 标签：c#, string, algorithm, text

我有一根很长的绳子，我想把它放在一个小地方。为了实现这一点，我将字符串分成空格上的行。算法是这样的：

```
 public static string BreakLine(string text, int maxCharsInLine)
    {
        int charsInLine = 0;
        StringBuilder builder = new StringBuilder();
        for (int i = 0; i < text.Length; i++)
        {
            char c = text[i];
            builder.Append(c);
            charsInLine++;

            if (charsInLine >= maxCharsInLine && char.IsWhiteSpace(c))
            {
                builder.AppendLine();
                charsInLine = 0;
            }
        }
        return builder.ToString();
    } 
```

但是当有一个短词，然后是一个较长的词时，这就会中断。最大长度为 16 的“foo howcomputerwork”不会中断，但我想要它。一个想法是我期待看到下一个空格出现在哪里，但我不确定这是否会导致尽可能少的行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-10T13:42:50.363

享受！

```
public static string SplitToLines(string text, char[] splitOnCharacters, int maxStringLength)
{
    var sb = new StringBuilder();
    var index = 0;

    while (text.Length > index)
    {
        // start a new line, unless we've just started
        if (index != 0)
            sb.AppendLine();

        // get the next substring, else the rest of the string if remainder is shorter than `maxStringLength`
        var splitAt = index + maxStringLength <= text.Length
            ? text.Substring(index, maxStringLength).LastIndexOfAny(splitOnCharacters)
            : text.Length - index;

        // if can't find split location, take `maxStringLength` characters
        splitAt = (splitAt == -1) ? maxStringLength : splitAt;

        // add result to collection & increment index
        sb.Append(text.Substring(index, splitAt).Trim());
        index += splitAt;
    }

    return sb.ToString();
} 
```

请注意，`splitOnCharacters`并且`maxStringLength`可以保存在应用程序的用户设置区域中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:04:19.523

在写入字符串生成器之前检查字符的内容，并`or`使用当前计数：

```
 public static string BreakLine(string text, int maxCharsInLine)
    {
        int charsInLine = 0;
        StringBuilder builder = new StringBuilder();
        for (int i = 0; i < text.Length; i++)
        {
            char c = text[i];
            if (char.IsWhiteSpace(c) || charsInLine >= maxCharsInLine)
            {
                builder.AppendLine();
                charsInLine = 0;
            }
            else 
            {
                builder.Append(c);
                charsInLine++;                    
            }
        }
        return builder.ToString();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-09T08:09:59.223

稍微更新一下代码，@dead.rabit 有时会进入循环。

```
 public static string SplitToLines(string text,char[] splitanyOf, int maxStringLength)
    {               
        var sb = new System.Text.StringBuilder();
        var index = 0;
        var loop = 0;
        while (text.Length > index)
        {
            // start a new line, unless we've just started
            if (loop != 0)
            {
                sb.AppendLine();
            }

            // get the next substring, else the rest of the string if remainder is shorter than `maxStringLength`
            var splitAt = 0;
            if (index + maxStringLength <= text.Length)
            {
                splitAt = text.Substring(index, maxStringLength).LastIndexOfAny(splitanyOf);
            }
            else
            {
                splitAt = text.Length - index;
            }

            // if can't find split location, take `maxStringLength` characters
            if (splitAt == -1 || splitAt == 0)
            {
                splitAt = text.IndexOfAny(splitanyOf, maxStringLength);
            }

            // add result to collection & increment index
            sb.Append(text.Substring(index, splitAt).Trim());
            if(text.Length > splitAt)
            {
                text = text.Substring(splitAt + 1).Trim();
            }
            else
            {
                text = string.Empty;
            }
            loop = loop + 1;
        }

        return sb.ToString();
    } 
```

# php - 国际化语言切换？

> ID：15294312
> 
> 赞同：0
> 
> 时间：2013-03-08T12:45:21.173
> 
> 标签：php, concrete5

我正在使用国际化块进行西班牙语和英语之间的基本页面翻译。默认情况下，内容是西班牙语。当我将语言更改为英语时，页面内容被翻译，但是自动导航显示为空白。我已经使用页面 CID 来确定语言差异。在我的主题的 header.php 文件中，我使用了以下语句：

```
if(!$c->getAttribute('english_menus')) {
$lh = Loader::helper('section', 'multilingual');
$lang = $lh->getLanguage();
$bt = BlockType::getByHandle('autonav');
$bt->controller->displayPages = 'custom';
if ($lang == "en_EN"){
  $bt->controller->displayPagesCID = 166; //English section cID
} else {
  $bt->controller->displayPagesCID = 171; //Spanish section cID
}
$bt->controller->orderBy = 'display_asc';
$bt->render('templates/top_nav/view');
} 
```

这将显示顶级导航正常。however when the country flag is selected the auto nav menu disappears and does not display in english

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:06:53.590

你的意思是拥有

```
if (! $c->getAttribute('english_menus')) { 
```

在顶部？

这对我来说没有多大意义。您的英文页面（或您在国旗后登陆的任何页面）是否有可能将该属性设置为某些东西？

# c# - ASP.Net 在新页面上显示加载覆盖

> ID：15294318
> 
> 赞同：1
> 
> 时间：2013-03-08T12:46:08.957
> 
> 标签：c#, asp.net, asp.net-ajax

我目前在我的 ASP.net Web 表单站点中有两个页面。在第一页，用户可以输入一些详细信息，然后按一个按钮。然后，这将 response.redirect 到与它一起发送用户详细信息的下一页。

下一页的页面加载为

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {   
            GetInformation();        
        }
    } 
```

GetInformation() 使用这些用户详细信息进行长时间的处理，大约需要 15-20 秒。

发生的情况是当用户按下第一页上的按钮时，它会停留在第一页上，直到 GetInformation() 完成运行，然后它将加载新页面。

我想要做的是，当用户按下按钮时，新页面出现，然后有一个覆盖说加载或其他东西，然后让它启动 GetInformation()。GetInformation 完成后，覆盖将消失。

我在 Google 上进行了搜索，看到了一些想法，但似乎没有一个真正适合我的问题。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:53:23.493

非常简单的解决方案：

1.  创建一个新页面`Loading.aspx`。添加适当的样式和所有内容，使其看起来像您预期的加载页面。

2.  在此页面中，在标签中添加以下`<head>`标签：`<meta http-equiv="refresh" content="0;URL='LongLoadingPage.aspx'" />`

现在不是`LongLoadingPage.aspx`直接重定向到，而是重定向到`Loading.aspx`页面。

当然，这是一个快速的解决方案，可能有一个更好的解决方案，您可以使用 AJAX 请求（使用`UpdatePanel`或 vanilla `XMLHttpRequest`）初始化长时间运行的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:58:48.957

`page_load`只有在事件完全执行后才会显示页面。所以不要在事件中调用你的函数。`page_load`而是使用计时器控件来触发你的函数调用。

假设您添加了一个计时器控件，例如

```
<asp:Timer ID="tmr" runat="server" Interval="3000" OnTick="tmr_Tick" Enabled="true">
</asp:Timer> 
```

现在服务器端代码看起来像这样

```
protected void tmr_Tick(object sender, EventArgs e)
{
    tmr.Enabled = false;
    GetInformation();        
    loadingIndicator.Style.Add("display", "none");
} 
```

现在为了显示加载指示器在页面上放置一个这样的 div

```
<div id="loadingIndicator" runat="server" style="background-image:url(ajax-loader-small.gif);background-repeat: no-repeat; width: 100%; height: 104px; background-position: center;">
</div> 
```

默认情况下会显示加载指示器，当`GetInformation()`完成执行后，我们可以更改显示

希望这可以帮助....

# mysql - MySQL：使用正则表达式从字符串中获取值？

> ID：15294320
> 
> 赞同：0
> 
> 时间：2013-03-08T12:46:14.047
> 
> 标签：mysql, regex

一列返回这样的值：

```
Something";s:5:"value";s:3:"900";s:11:"print_ 
```

我想提取所有长度至少为 3 位的数字，在上述情况下为 900。我如何在 MySQL 中做到这一点？也许使用正则表达式？我不能使用任何索引，字符串的长度和字符串中的数字可以不同。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:50:25.710

如果您使用的是 PHP，请尝试 unserialize() 它！然后 var_dump 它来查看字符串和数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:51:18.393

您不能使用 MySQL 提取它们，为此使用任何其他语言。您可以做的是包含一个 Where 子句，这将使您的脚本的工作更轻松。

假设您的列在“示例”表中被称为“序列化”

```
SELECT serialized FROM example WHERE serialized REGEXP '[0-9]{3,}' 
```

请注意，REGEXP 只是输出 1 或 0

完成查询后，使用您的语言的正则表达式函数提取数字，如下所示：

([0-9]{3,})*

# javascript - 如何将 AngularJS 应用程序拆分为更小的模块并正确处理路由？

> ID：15294321
> 
> 赞同：26
> 
> 时间：2013-03-08T12:46:18.277
> 
> 标签：javascript, angularjs

**将 AngularJS 应用程序拆分为更小的部分/模块的最佳方法是什么？**例如，如果我有一篇博客文章并为此启用了评论，我想我可以将其分解为“帖子”和“评论”（？）之类的模块（可能不是最好的例子，但想法是拆分应用程序逻辑到单独的模块中，而不是构建一个巨大的单模块应用程序）。

我尝试在单独的 DOM 节点中引导两个模块，并相应地在两个模块中使用路由。有几个问题：

*   作为一个“单页”应用程序，我正在引导甚至在首页上使用评论模块，即使它没有在那里使用。
*   由于我无法在 ng-app 中使用多个 ng-views，我不得不在 index.html 视图中为我的模块编写所有包装器并引导它们？应该是这样吗？好像有点不对。我应该如何/在哪里引导这些？
*   路由有什么技巧吗？我应该将它们分散在模块中还是应该以某种方式将它们组合在一起？（创建一个“博客”模块以包含“帖子”和“评论”模块作为依赖项仍然很难定义例如“/post/:id”路由..？）

索引.html

```
<div class="post"><ng-view></ng-view></div>
<div class="comments"><ng-view></ng-view></div> 
```

javascript.js

```
angular.module('posts', []).config(['$routeProvider', function ($routeProvider) {
    $routeProvider
    .when('/', {
        'template': 'Showing all the posts',
        'controller': 'postCtrl
    })
    .when('/post/:id', {
        'template': 'Showing post :id',
        'controller': 'postCtrl
    });
}]);

angular.module('comments', []).config(['$routeProvider', function ($routeProvider) {
    $routeProvider.when('/post/:id', {
        'template': 'Showing post :id comments',
        'controller': 'CommentsCtrl'
    });
}]);

angular.bootstrap($('.post'), ['posts']);
angular.bootstrap($('.comments'), ['comments']); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-08T19:05:20.267

我会将应用程序划分为“视图模块”和这些子模块。

然后我使用 $routeProvider 在视图之间切换。我在每个模块中定义了不同的路由配置。

如果我需要更多的子模块，我会使用 ng-include 加载它们。

```
/* App Module */

angular.module('MyApp', ['MyApp.home', 'MyApp.blog'])
.config( function myAppConfig ( $routeProvider ) {
    'use strict';
    $routeProvider.otherwise({ redirectTo: '/home' });
});

/* home Module */

angular.module('MyApp.home', [])
.config(['$routeProvider', function config( $routeProvider ) {
  $routeProvider.when('/home', {
    controller: 'HomeController',
    template: '<p>This is my Home</p>'
  });
}]); 
```

我在[github](https://github.com/sgebhardt/ng-module-boilerplate)上创建了一个小存储库来解释这一点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-15T10:55:28.417

您可以在子模块中定义路由：

```
angular.module('app', ['ngRoute', 'app.moduleX'])
.config(function($routeProvider, $locationProvider) {
  $routeProvider.when('/home', {
    templateUrl: 'partials/home.html',
    controller: 'HomeCtrl'
  });

  //Handle all exceptions
  $routeProvider.otherwise({
    redirectTo: '/home'
  });
})

angular.module('app.moduleX', []).config(function($routeProvider) {
  $routeProvider.when('/settings', {
    templateUrl: 'partials/settings.html',
    controller: 'SettingsCtrl'
  });
}) 
```

我还写[了一篇](http://blog.fragaria.cz/2014/08/modular-menu-with-angularjs.html)关于这个主题的博客文章。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T16:46:04.440

我们正在对门户应用程序和子应用程序做类似的事情。我们发现了一些事情：

1.  只有一个“应用程序”可以有路线和路线参数。因此，如果“子应用程序”需要访问 $routeParams，您要么必须去“老学校”进行 URL 解析，要么使用事件服务。
2.  说到事件，应用程序没有 Angular 服务进行通信，因此您需要滚动自己的事件服务与两个应用程序的根范围对话并将其注入两个应用程序。
3.  我看不到我们将 ng-view 用于“子应用程序”的位置。显然，直接引导到元素的工作方式类似。
4.  因为只有一个应用程序可以有路由，所以应用程序应该按顺序引导。所以是这样的：

    ```
    $( function () {

        $.when(angular.bootstrap($('.post'), ['posts'])).done( function() {
            console.log('POSTS: bootstrapped');

            //Manually add the controller to the comments element. (May or may not be  
            //necessary, but we were doing something that required it to work.)
            $('.comments').attr('ng-controller', 'CommentsCtrl');

            $.when(angular.bootstrap($('.comments'), ['comments'])).done( function() {
                console.log('COMMENTS: bootstrapped');
            });

        });
    }); 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-09T09:33:30.890

我希望你可以使用**“ui-router”**路由模块。

这是这个[http://www.ng-newsletter.com/posts/angular-ui-router.html的好教程](http://www.ng-newsletter.com/posts/angular-ui-router.html)

# html - 与 BEM 类命名约定混淆。更深一层

> ID：15294322
> 
> 赞同：7
> 
> 时间：2013-03-08T12:46:21.730
> 
> 标签：html, css, class, naming-conventions, bem

例如，我有一个带有菜单元素的菜单块：

```
.menu
.menu__element
.menu__element--current 
```

但是让我们说`.menu`块包含在另一个块中，`.header`

在这种情况下如何处理命名？

```
.header 
.header__menu 
.header__element 
```

或者

```
.header 
.header__menu 
.header__menu__element 
```

或者

```
.header 
.menu 
.menu__element 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-18T09:39:02.060

考虑使用“混合”（同一个 DOM 节点上的多个 BEM 实体）：

```
<div class="header">
    <ul class="menu header__menu">
        <li class="menu__element"></li>
        <!-- ... -->
    </ul>
</div> 
```

所以block **menu**同时也是element **header__menu**。这使您能够为任何抽象菜单应用样式并在标题内为该特定菜单添加特殊规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T12:54:49.480

菜单本身应该是一个类，所以 .menu 就足够了。如果它是一个只在标题中而不在其他任何地方的菜单，那么 .header-menu。然后你可以直接指向菜单，而无需经过头文件类。

如果您更喜欢按照您概述的方式进行操作，那么 .header_menu。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-12T11:57:51.587

```
<div class="header">
    <ul class="menu">
        <li class="menu__element">...</li>
        <li class="menu__element menu__element--current">...</li>
        ...
    </ul>
</div>    

.header {...}
.menu {...}
.menu__element {...}
.menu__element--current {...} 
```

会是对的。

当块插入另一个块时，块名称不会改变。

BEM 禁止在元素中放置元素并编写类名，例如`block__element__element`，更多信息：[如何使用 BEM 正确设置元素的范围？](https://stackoverflow.com/questions/27894664/how-to-properly-set-an-elements-scope-using-bem/27900589#answer-27900589)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-13T15:03:41.097

这是 BEM 的官方文档所说的（[http://getbem.com/faq/#css-nested-elements](http://getbem.com/faq/#css-nested-elements)）；

[![在此处输入图像描述](../Images/388a6f2872dd9fa414b0719ae13bbf21.png)](https://i.stack.imgur.com/HUykW.png)

不管你嵌套多深，你总是使用顶部父元素作为块元素。所以基本上是这样；

```
.header 
.header__menu 
.header__element 
```

# c - 具有联合静态和动态字符数组的结构

> ID：15294324
> 
> 赞同：4
> 
> 时间：2013-03-08T12:46:37.867
> 
> 标签：c, memory, struct, unions

我正在创建一个动态分配的链表，其中每个项目都有一个数据元素。这些元素中的大多数是固定大小的字符数组，但有些可以是不同的长度，例如只有 1 或 2 个字符 - 或 1000+。

如果我在数据元素内使用带有静态和动态 char 数组的联合 - 它是否总是会占用：

*   静态的大小，或者如果 malloc'd 的大小是 malloced 的大小？
*   静态的大小 + 如果 malloc'd 的大小是 malloced 的大小？
*   指向 malloced 的指针的大小还是静态指针的大小？
*   ... （等等）

没有列表的简化示例。这不是我用数据填充它的方式——仅作为结构联合的一个例子。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

enum meta_type {LIST, STRING};

struct meta {
    union {
        char clist[128];
        char *cstr;
    } val;
    enum meta_type type;
};

int init_meta(struct meta *meta, enum meta_type type, int size, char *data)
{
    if (type == STRING) {
        if ((meta->val.cstr = malloc(size + 1)) == NULL) {
            puts("Out of memeory");
            return 1;
        }
        sprintf(meta->val.cstr, "%s", data);
    } else {
        memset(meta->val.clist, 0, 128);
        meta->val.clist[0] = data[0];
        meta->val.clist[1] = data[1];
        meta->val.clist[2] = data[2];
    }

    meta->type = type;

    return 0;
}

void free_meta(struct meta *meta)
{
    if (meta->type == STRING)
        free(meta->val.cstr);
}

int main(int argc, char *argv[])
{
    struct meta meta;
    char list[] = {'a', '3', 'f'};

    if (argc > 1) {
        if(init_meta(&meta, STRING, strlen(argv[1]), argv[1]))
            return 1;
    } else {
        init_meta(&meta, LIST, 0, list);
    }

    fprintf(stdout,
        "meta[%d]: %s\n",
        meta.type,
        meta.type == LIST ? meta.val.clist : meta.val.cstr
    );

    free_meta(&meta);

    return 0;
} 
```

* * *

@Floris：我测试的一种古怪方式：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stddef.h>

enum meta_type {LIST, STRING};

#define SIZE_CLIST  128

struct meta {
    enum meta_type type;
    union {
        char clist[SIZE_CLIST];
        char *cstr;
    } val;
};

int init_meta(struct meta **meta, enum meta_type type, int size, char *data)
{
    if (type == STRING) {
        if (offsetof(struct meta, val) == 0) {
            puts("Ups.");
            return 2;
        }
        *meta = malloc(sizeof(struct meta) -
                SIZE_CLIST +
                sizeof(char *)
            );
        (*meta)->val.cstr = malloc(size + 1);
        if ((*meta)->val.cstr == NULL) {
            puts("Out of memeory");
            return 1;
        }
        sprintf((*meta)->val.cstr, "%s", data);
        puts((*meta)->val.cstr);
    } else {
        *meta = calloc(1, sizeof(struct meta));
        (*meta)->val.clist[0] = data[0];
        (*meta)->val.clist[1] = data[1];
        (*meta)->val.clist[2] = data[2];
    }

    (*meta)->type = type;

    return 0;
}

void free_meta(struct meta *meta)
{
    if (meta->type == STRING)
        free(meta->val.cstr);
    free(meta);
}

int main(int argc, char *argv[])
{
    struct meta *meta = NULL;
    char list[] = {'a', '3', 'f'};

    if (argc > 1) {
        if(init_meta(&meta, STRING, strlen(argv[1]), argv[1]))
            return 1;
    } else {
        init_meta(&meta, LIST, 0, list);
    }

    fprintf(stdout,
        "meta[%d] %d: %s\n",
        meta->type,
        sizeof(*meta),
        meta->type == LIST ? meta->val.clist : meta->val.cstr
    );

    free_meta(meta);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:49:41.827

联合将为最大的成员分配空间。你有一个数组和一个指针，所以它会为数组分配空间。指针的大小是固定的，它指向什么并不重要。

当您使用`malloc`的空间不是在数据结构内分配时，它在内存中的其他地方。您将该内存位置分配给指针。

# c# - 优化长寿命对象的收集

> ID：15294326
> 
> 赞同：4
> 
> 时间：2013-03-08T12:46:47.443
> 
> 标签：c#, optimization, garbage-collection

背景：我有一项服务，其生活目的是为请求者提供对象-它基本上从数据库中获取复杂的数据并将其转换一次（有点像数据视图）以生成简化的记录。然后通过按需提供多达 100k 条记录（取决于请求的性质）来处理来自其他服务的请求。

这个想法是复杂的转换完成一次并由服务缓存 - 它比每次访问视图时让数据库解决它更快，并且对于我的目的来说工作得很好。（我相信这被某些人称为 SSOS）

缓存数据的方式是在一个对象列表中，这些对象是标准 .Net 类型的属性包。这些对象没有对其他任何东西的引用。记录会定期更改，并且必须更新缓存，这意味着必须定位、丢弃和替换原始记录。

现在缓存中的记录将在其中保存很长时间，并已被标记为 Gen 2 集合；几乎所有的收集都将发生在 Gen2 阶段，因为这些对象已经存在了很长时间（故意）。

所以我对 Gen2 集合的理解是它们很慢，如果集合主要在 Gen2 上工作，那么优化器会更频繁地执行此操作。

我希望能够以一种不会最终触发完整 Gen2 集合的方式取消引用列表中的对象...我在想也许有一种方法将其标记为 Gen0 然后取消-在替换它之前引用它 - 但我认为这是不可能的。

我被限制为此使用 .Net 4，并且该应用程序是一项服务，可为多达 100 个在一段时间内请求完整列表或更改列表的客户提供数据。

问题：任何人都可以提出一种以 GC 友好的方式或另一种解决此问题的方法来取消引用长寿命对象的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T12:54:04.460

对此没有简单的答案。如果你有很多长寿命的对象，那么完整的集合真的会受到伤害，正如我[在这里讨论](http://marcgravell.blogspot.co.uk/2011/10/assault-by-gc.html)的那样。既然一张图讲了一千个字：

![在此处输入图像描述](../Images/645aafff4da629282e357f113007a11f.png)

这些垂直尖峰是垃圾收集发生并扼杀响应时间的地方。

我们减少这种影响的方法是：不要有无数长寿命的物体。我们所做的是将类更改为`struct`s，这意味着唯一的*对象*是包含它们的数组。幸运的是，这里的数据很简单，不涉及`string`s，当然它们本身就是对象。我们还做了一些疯狂[的固定大小缓冲区](http://msdn.microsoft.com/en-gb/library/zycewsya.aspx)工作，以减少以前集合的内容，并更改对*索引的**引用*（到数组中）。如果您*确实*必须使用数据，也许尝试确保您没有 20,000个具有相同值的**不同**实例 - 某种手动内部人员（a**`string` **`string``Dictionary<string,string>`就足够了）在那里真的很有用。****

 ****请注意，这不会影响您的*公共*API，因为您始终可以`class`从存储中创建旧数据`struct`- 不同之处在于这`class`将仅作为 DTO 短暂存在 - 因此将在下一次 gen-0 扫描中廉价收集。

YMMV，但这对我们来说已经足够好了。

问题是：使用 s 时需要**非常**小心`struct`；我强烈建议使它们不可变。****

# c++ - 在类构造函数中安全地连接 c 字符串

> ID：15294334
> 
> 赞同：3
> 
> 时间：2013-03-08T12:47:19.063
> 
> 标签：c++, cstring

我有一个类需要`const char*`在构造过程中连接两个字符串，甚至稍后在初始化列表中使用结果（连接的字符串）。

```
const char* SUFFIX = "suffix";

class widget {
public:
    widget(const char* prefix) : key(???), cls(key) { };

private:
    const char* key;
    const important_class cls;
}

widget("prefix_"); // key should be prefix_suffix 
```

有一个全局（在`widget`'s cpp 中）`const char*`后缀，我想附加到用户提供的前缀。

怎么做？

* * *

**顺便提一句。**我听说过`string`。如果我可以使用`string`，我不会在这里问，关于`const char*`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T12:51:15.350

使用`std::string`使您的问题成为一项微不足道的任务：

```
const std::string SUFFIX = "suffix";

class widget {
public:
    widget(std::string const & prefix) 
           : key(prefix + SUFFIX), cls(key)
    { }       // ^^^^^^^^^^^^^^concatenation!

private:
    const std::string key;
    const important_class cls; 
}

widget("prefix_"); 
```

如果您需要`const char*`，您仍然可以通过`key.c_str()`返回的 callng 来获取它`const char*`。所以在你的情况下，它会给你*c-string* `"prefix_suffix"`。

另请注意，您正确完成的声明顺序很重要：`cls`必须在*之后* `key`声明，因为它的构造取决于`key`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T13:02:28.253

用作`std::string`中间值：

```
const char* SUFFIX = "suffix";

class widget {
public:
    widget(const char* prefix) :
    intermediate(string(prefix) + suffix),
    key(intermediate.c_str()),
    cls(key) {
    }

private:
    const std::string intermediate;
    const char* key;
    const important_class cls;
}

widget("prefix_"); // key should be prefix_suffix 
```

与您的代码唯一不同的是私有成员变量`intermediate`.

`std::string`对象`intermediate`管理保存连接所需的动态内存。如果发生异常、分配、复制等，它将很好地清理。

只要`string`没有发生突变，`const char*`返回的 by`c_str()`将保持有效。由于`intermediate`is ，不能在其上调用任何变异函数，因此使用内部缓冲区`const`应该没有问题。`cls`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T12:56:32.083

您应该使用 std::string （或您的项目使用的任何字符串类）。这将使这更容易，并避免获得此异常安全的问题。

如果你坚持，

```
widget(const char* prefix) : 
    key(strcat(strcpy(new char[strlen(prefix)+strlen(SUFFIX)+1], prefix), SUFFIX)), 
    cls(key) { } 
```

会用C方式来做。

的构造函数不`important_class`应该抛出异常。

如果您需要使用结果`key`来初始化，请注意保持声明的顺序`cls`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T12:53:36.490

更好地`std::string`用于将您的字符串放在一起。如果需要，您仍然可以致电`std::string::c_str()`获取`const char*`。也作为论据`std::string::append`。`const char*`或使用`+`-operator。

见[这里](http://www.cplusplus.com/reference/string/string/append/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T12:55:16.667

我不确定你可以在初始化列表中做到这一点。当然，其他一些有更多经验的用户可以提供帮助......当然，这听起来很明显，但你可以使用 std::string 然后去：

```
class widget 
{
    public:
    widget(const char* prefix) : key(prefix)
    { 
       string_key.append(suffix);
    };

    private:
    const char* key;
    std::string string_key;
}; 
```

当然，你可以这样做：

```
class widget 
{
    public:
    widget(const char* prefix) : key(prefix)
    { 
       key.append(suffix);
    };

    private:
    std::string key;
}; 
```

我错过了整个“important_class”部分。它在这里代表什么？你想达到什么目的？

希望有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T13:04:58.423

我看到两个选项，具体取决于您对价值持久性等的需求。

一，存储`key`为`std::string`：

```
const char* SUFFIX = "suffix";

class widget{
public:
  widget(const char* prefix) : key(std::string(prefix) + suffix), cls(key.c_str())
  {}

private:
  std::string key;
  const important_class cls;
}; 
```

二，使用静态初始化函数，如下所示：

```
const char* SUFFIX = "suffix";

class widget{
public:
  widget(const char* prefix) : key(concat_(prefix, suffix)), cls(key)
  {}

private:
  const char* key;
  const important_class cls;

  static const char* concat_(const char* a, const char* b)
  {
    std::string val(a);
    val += b;
    char* ret = new char[val.size() + 1];
    strcpy(ret, val.c_str());
    return val;
  }
}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-08T13:33:52.040

乍一看，你的问题看起来像是一个理论测验，但后来我想起可能有一个没有 STL 的嵌入式平台。
无论如何，您需要坚持使用老式 C 风格的函数：strlen、[strcpy](http://www.cplusplus.com/reference/cstring/strcpy/)和[strcat](http://www.cplusplus.com/reference/cstring/strcat/)。
由于您使用的是类，我假设您的编译器也支持运算符 new。在我编写最终代码之前，您需要执行以下步骤来连接字符串：

```
const char* key;
key = new char[strlen(prefix) + strlen(SUFFIX) + 1];
strcpy(key, prefix);
strcat(key, SUFFIX);
...
delete [] key; 
```

幸运的是，strcpy 和 strcat 都返回了目的地。
以下是您的代码的外观：

```
#include <string.h>

class widget {
public:
  widget(const char* prefix)
    : key(strcat(strcpy(new char[strlen(prefix) + strlen(SUFFIX) + 1], prefix), SUFFIX))
    , cls(key) { };

private:
  const char* key;
  const important_class cls;
}; 
```

我没有调试这段代码，但它编译得很好，虽然它看起来相当混乱...... :)
不要忘记释放析构函数中的缓冲区。
祝你好运！

# visual-studio-2012 - 如何使用 xamarin 在visualstudio 中构建Mac 主机

> ID：15294340
> 
> 赞同：4
> 
> 时间：2013-03-08T12:47:38.270
> 
> 标签：visual-studio-2012, xamarin

我在 Windows 7 Home Basic 中安装了 xamarin。我需要在 Visual Studio 中连接 Mac 主机，我得到了要构建的 ios 设置，但它不是自动主机。在 Xamarin 指南中，他们通知了 Craigs-MacBook.local，但我无法在笔记本电脑中安装主机。我只是挣扎，你能解释一下我可以做些什么来在 Windows PC 中托管 Mac 来运行 iPhone。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-15T16:32:59.653

您需要在 Mac 上安装 Xamarin，然后必须在两台计算机（Mac 和 Windows）中激活 Xamarin Studio。为此，您需要：

1.  **创建一个 Xamarin 帐户**并将其设置或**链接**到您的 Visual Studio(Windows) 和 Xamarin Studio(Mac) IDE，以便它们可以交互。这是通过**工具 > Xamarin 帐户**。无需购买许可证，因为您可以从 Xamarin 的试用版开始。

2.  **在两个 IDE 上创建一个测试或任何项目**，以便系统提示您**激活 Xamarin Studio 和 Visual Studio**。

3.  一旦您“激活”了两个 IDE，您必须通过以下方式将 Visual Studio 链接到您的 iOS Xamarin：**工具 > 选项 > Xamarin > iOS 设置。**

就这样。

也许您无法在 Visual Studio 中设置 Host Mac Xamarin.IOs，因为您尚未在 Mac 中激活 iOS Xamarin Studio，为了做到这一点，在您的 Mac Xamarin Studio 中**从利用网络连接的模板创建一个项目**，系统会提示你激活 Xamarin Studio。在**Windows Visual Studio**中，您必须**创建任何项目**，系统会提示您激活 Visual Studio。

此外**，两台机器上的 SDK 可能不同步**，因此您必须在 Mac 和 Win 上下载一些更新以同步 IDE 和 SDK，以便它们一起工作。

您还必须**按以下顺序安装 Xamarin 和 Visual Studio**：

1.  首先，在 Windows 中安装 Visual Studio。
2.  其次，Mac 和 Windows 中的 Xamarin Studio。
3.  最后通过 Visual Studio 链接你的 Mac 和 Win。

此外，**建议您使用 Windows Pro 版本**，因为您无法在 Windows 8 的家庭（核心）版本上使用 Windows Phone 模拟器，因为您将无法安装运行此模拟器所需的 Hyper-V。此外，你需要**Visual Studio Pro 或更高**版本才能将 Xamarin 链接到 Visual Studio。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-06T12:36:38.553

我必须按照此处的说明进行操作：[https ://developer.xamarin.com/guides/ios/getting_started/installation/windows/troubleshooting/offline.pdf](https://developer.xamarin.com/guides/ios/getting_started/installation/windows/troubleshooting/offline.pdf)

基本上我错过了：

*   在 Mac 上打开聚光灯
*   键入“xamarin 构建主机”
*   启动，并显示配对提示
*   我按照屏幕上的说明使用 pin 关联我的 windows 机器

# r - 计算R中多边形和点之间的距离

> ID：15294343
> 
> 赞同：4
> 
> 时间：2013-03-08T12:47:49.780
> 
> 标签：r, gis

我有一个不一定是凸面的多边形，没有交叉点，并且在这个多边形之外有一个点。我想知道如何在二维空间中最有效地计算欧几里得距离。中是否有标准方法`R`？

我的第一个想法是计算多边形所有线的最小距离（无限延伸，因此它们是线，而不是线段），然后使用线段的起点和毕达哥拉斯计算从点到每条线的距离。

你知道一个实现高效算法的包吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T13:19:27.367

您可以使用[rgeos 包](http://cran.r-project.org/web/packages/rgeos/index.html)和`gDistance`方法。这将要求您准备几何图形，`spgeom`从您拥有的数据创建对象（我假设它是 data.frame 或类似的东西）。rgeos 文档非常详细（请参阅 CRAN 页面中软件包的 PDF 手册），这是`gDistance`文档中的一个相关示例：

```
pt1 = readWKT("POINT(0.5 0.5)")
pt2 = readWKT("POINT(2 2)")
p1 = readWKT("POLYGON((0 0,1 0,1 1,0 1,0 0))")
p2 = readWKT("POLYGON((2 0,3 1,4 0,2 0))")
gDistance(pt1,pt2)
gDistance(p1,pt1)
gDistance(p1,pt2)
gDistance(p1,p2) 
```

`readWKT`也包含在 rgeos 中。

Rgeos 基于 GEOS 库，它是几何计算中事实上的标准之一。如果您不想重新发明轮子，这是一个不错的选择。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-08T16:08:07.560

我决定返回并写一个理论上的解决方案，只是为了后代。这不是最简洁的示例，但对于那些想知道如何手动解决此类问题的人来说，它是完全透明的。

**理论算法**

首先，我们的假设。

1.  我们假设多边形的顶点以顺时针或逆时针的旋转顺序指定多边形的点，并且多边形的线不能相交。这意味着我们有一个正常的几何多边形，而不是一些奇怪定义的矢量图形。
2.  我们假设这是一组笛卡尔坐标，使用代表二维平面上的位置的“x”和“y”值。
3.  我们假设该点必须在多边形的内部区域之外。
4.  最后，我们假设所需的距离是该点与多边形周长上所有无限个点之间的最小距离。

现在在编码之前，我们应该用基本的术语写出我们想要做什么。我们可以假设多边形与多边形外点之间的最短距离始终是以下两种情况之一：多边形的顶点或两个顶点之间的连线上的点。考虑到这一点，我们执行以下步骤：

1.  计算所有顶点与目标点之间的距离。
2.  找到离目标点最近的两个顶点。
3.  如果：（a）两个最近的顶点不相邻或（b）两个顶点的内角大于或等于 90 度，则最近的顶点是最近点。计算最近点和目标点之间的距离。
4.  否则，计算两点之间形成的三角形的高度。

我们基本上只是在查看一个顶点是否最接近该点，或者一条线上的一个点是否最接近该点。我们必须使用一些三角函数来完成这项工作。

**编码**

为了使其正常工作，我们希望避免任何“for”循环，并希望在查看整个多边形顶点列表时只使用矢量化函数。幸运的是，这在 R 中非常简单。我们接受一个带有“x”和“y”列的数据框作为多边形的顶点，我们接受一个带有一个“x”和“y”值的向量作为点的位置。

```
get_Point_Dist_from_Polygon <- function(.polygon, .point){

    # Calculate all vertex distances from the target point.
    vertex_Distance <- sqrt((.point[1] - .polygon$x)^2 + (.point[2] - .polygon$y)^2)

    # Select two closest vertices.
    min_1_Index <- which.min(vertex_Distance)
    min_2_Index <- which.min(vertex_Distance[-min_1_Index])

    # Calculate lengths of triangle sides made of
    # the target point and two closest points.
    a <- vertex_Distance[min_1_Index]
    b <- vertex_Distance[min_2_Index]
    c <- sqrt(diff(.polygon$x[c(min_1_Index, min_2_Index)])^2 + diff(.polygon$y[c(min_1_Index, min_2_Index)])^2)

    if(abs(min_1_Index - min_2_Index) != 1 |
        acos((b^2 + c^2 - a^2)/(2*b*c)) >= pi/2 | 
        acos((a^2 + c^2 - b^2)/(2*a*c)) >= pi/2
        ){
        # Step 3 of algorithm.
        return(vertex_Distance[min_1_Index])
    } else {
        # Step 4 of algorithm.
        # Here we are using the law of cosines.
        return(sqrt((a+b-c) * (a-b+c) * (-a+b+c) * (a+b+c)) / (2 * c))
    }
} 
```

**演示**

```
polygon <- read.table(text="
x,  y
0,  1
1,  0.8
2,  1.3
3,  1.4
2.5,0.3
1.5,0.5
0.5,0.1", header=TRUE, sep=",")

point <- c(3.2, 4.1)

get_Point_Dist_from_Polygon(polygon, point)
# 2.707397 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T13:46:11.773

除此以外：

```
p2poly <- function(pt, poly){
    # Closing the polygon
    if(!identical(poly[1,],poly[nrow(poly),])){poly<-rbind(poly,poly[1,])}
    # A simple distance function
    dis <- function(x0,x1,y0,y1){sqrt((x0-x1)^2 +(y0-y1)^2)}
    d <- c()   # Your distance vector
    for(i in 1:(nrow(poly)-1)){
        ba <- c((pt[1]-poly[i,1]),(pt[2]-poly[i,2])) #Vector BA
        bc <- c((poly[i+1,1]-poly[i,1]),(poly[i+1,2]-poly[i,2])) #Vector BC
        dbc <- dis(poly[i+1,1],poly[i,1],poly[i+1,2],poly[i,2]) #Distance BC
        dp <- (ba[1]*bc[1]+ba[2]*bc[2])/dbc          #Projection of A on BC
        if(dp<=0){ #If projection is outside of BC on B side
            d[i] <- dis(pt[1],poly[i,1],pt[2],poly[i,2])
            }else if(dp>=dbc){ #If projection is outside of BC on C side
                d[i] <- dis(poly[i+1,1],pt[1],poly[i+1,2],pt[2])
                }else{ #If projection is inside of BC
                    d[i] <- sqrt(abs((ba[1]^2 +ba[2]^2)-dp^2))
                    }
        }
    min(d)
    } 
```

例子：

```
pt <- c(3,2)
triangle <- matrix(c(1,3,2,3,4,2),byrow=T, nrow=3)
p2poly(pt,triangle)
[1] 0.3162278 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-12T01:52:01.920

当点和顶点出现在坐标系中时，我使用包中的`distm()`函数来计算距离。此外，您可以通过替换 轻松地进行`geosphere`一些替换。`dis <- function(x0,x1,y0,y1){sqrt((x0-x1)^2 +(y0-y1)^2)}` `distm()`

```
algo.p2poly <- function(pt, poly){
  if(!identical(poly[1,],poly[nrow(poly),])){poly<-rbind(poly,poly[1,])}
  library(geosphere)
  n <- nrow(poly) - 1
  pa <- distm(pt, poly[1:n, ])
  pb <- distm(pt, poly[2:(n+1), ])
  ab <- diag(distm(poly[1:n, ], poly[2:(n+1), ]))
  p <- (pa + pb + ab) / 2
  d <- 2 * sqrt(p * (p - pa) * (p - pb) * (p - ab)) / ab
  cosa <- (pa^2 + ab^2 - pb^2) / (2 * pa * ab)
  cosb <- (pb^2 + ab^2 - pa^2) / (2 * pb * ab)
  d[which(cosa <= 0)] <- pa[which(cosa <= 0)]
  d[which(cosb <= 0)] <- pb[which(cosb <= 0)]
  return(min(d))
} 
```

例子：

```
poly <- matrix(c(114.33508, 114.33616,
                 114.33551, 114.33824,
                 114.34629, 114.35053,
                 114.35592, 114.35951, 
                 114.36275, 114.35340, 
                 114.35391, 114.34715,
                 114.34385, 114.34349,
                 114.33896, 114.33917,
                 30.48271, 30.47791,
                 30.47567, 30.47356, 
                 30.46876, 30.46851,
                 30.46882, 30.46770, 
                 30.47219, 30.47356,
                 30.47499, 30.47673,
                 30.47405, 30.47723, 
                 30.47872, 30.48320),
               byrow = F, nrow = 16)
pt1 <- c(114.33508, 30.48271)
pt2 <- c(114.6351, 30.98271)
algo.p2poly(pt1, poly)
algo.p2poly(pt2, poly) 
```

结果：

```
> algo.p2poly(pt1, poly)
[1] 0
> algo.p2poly(pt2, poly)
[1] 62399.81 
```

# javascript - 带有 JavaScript 的 Html5 音频无法在 Chrome 以外的任何浏览器中运行

> ID：15294344
> 
> 赞同：0
> 
> 时间：2013-03-08T12:47:52.853
> 
> 标签：javascript, html, audio, browser

带有 JavaScript 的 Html5 音频无法在 Chrome 以外的任何浏览器中运行

基本上在按下按钮时，我希望能够将当前曲目切换到另一个曲目。这在 Chrome 中可以正常工作，但在任何其他浏览器中都不能？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>MediaPlayer Won't Work in Any browser other than chrome</title>
<script type="text/javascript">
function Test(){
var Mp3Me= document.getElementById('Mp3Me');
Mp3Me.src = "http://media.rolandus.com/mp3/v-piano_vintage_piano_1.mp3";
}

</script>

</head>

<body>
    <audio id="Mp3Me" autoplay autobuffer controls>
  <source src="Batman.mp3"  type="audio/mpeg">
</audio>

<a href="javascript:Test()">Start Piano Track</a>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:58:31.663

[在此处](http://www.w3schools.com/html/html5_audio.asp)查看浏览器音频兼容性。

Firefox 和 Opera 无法读取 mp3 文件。您应该在 Ogg 或 Wav 中拥有相同的文件，以使其适用于每个浏览器。

例如 w3schools 代码：

```
<audio controls>
  <source src="horse.ogg" type="audio/ogg"> <!--OGG-->
  <source src="horse.mp3" type="audio/mpeg"> <!--MP3-->
Your browser does not support the audio element.
</audio> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:58:45.847

可能是由于浏览器无法播放 MP3。此表显示了哪些浏览器支持哪些格式：[https ://developer.mozilla.org/en-US/docs/HTML/Supported_media_formats](https://developer.mozilla.org/en-US/docs/HTML/Supported_media_formats)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:06:41.767

您必须以不同的方式使用此标签，因为在 Firefox 中您无法使用此类代码播放 MP3 文件。这是您的帮助的链接。[http://support.mozilla.org/en-US/questions/758978](http://support.mozilla.org/en-US/questions/758978)

Firefox 不支持 mp3。看到这个[http://www.codingforums.com/showthread.php?t=231069](http://www.codingforums.com/showthread.php?t=231069)

这是另一个相关的问题，[为什么 Firefox 不支持 <audio> 中的 MP3 文件格式](https://stackoverflow.com/questions/4923136/why-doesnt-firefox-support-mp3-file-format-in-audio)

# javascript - 如何在 mvc 控制器的服务器端显示警报框

> ID：15294347
> 
> 赞同：0
> 
> 时间：2013-03-08T12:48:03.703
> 
> 标签：javascript, asp.net-mvc, alert

我需要在 mvc 控制器的服务器端显示带有 id 编号的警报框。仅在服务器端。我尝试以下代码但不工作。我们如何做到这一点？感谢您的提前帮助

代码：

```
if (condition)
               {

    StringBuilder tt = new StringBuilder();

    tt.Append("<script language='javascript'>");
    foreach (var id in ids)
    {
        tt.Append("alert('" + id + "')");
    }
    tt.Append("</script>");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:22:30.883

如果您在 ids 集合中有超过 1 个 id，您的代码将不起作用，因为这将生成这样的代码

警报（1）警报（2）...等

如果您的 ids 集合为空，它也将不起作用（因为它不会在客户端上生成任何警报）。

您需要`;`像`alert('" + id + "')`这样添加：

```
StringBuilder tt = new StringBuilder();
tt.Append("<script language='javascript'>");
foreach (var id in ids)
{
    tt.Append("alert('" + id + "');");
}
tt.Append("</script>");
Response.Write(tt.ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:53:15.673

您的问题中缺少部分代码，您仍然可以这样做。

考虑到上面的代码，预计您将“tt”存储在模型中或在控制器端查看这样的数据..

```
if (condition)
 {
    StringBuilder tt = new StringBuilder();
    tt.Append("<script language='javascript'>");
    foreach (var id in ids)
    {
        tt.Append("alert('" + id + "')");
    }
    tt.Append("</script>");
   Response.Write(tt.ToString());

} 
```

在那种情况下，它会起作用。

# ios - 在 iOS 中调试多个静态库

> ID：15294348
> 
> 赞同：2
> 
> 时间：2013-03-08T12:48:04.640
> 
> 标签：ios, objective-c, static-libraries

我在 iOS 项目 1、项目 2 和项目 3 中有 3 个项目。

项目 1 使用项目 2 的静态库，项目 2 使用项目 3 的静态库。

我想要做的是在项目 1、2 和 3 中放置断点，以便在运行项目 1 时调试所有 3 个库的代码。

# java - 如何断言 KeyPressEvent 是否是任何键盘字符？

> ID：15294349
> 
> 赞同：1
> 
> 时间：2013-03-08T12:48:09.527
> 
> 标签：java, gwt, keypress, keyevent

我想断言一个`com.google.gwt.event.dom.client.KeyPressEvent`. 它应该匹配任何字符或数字，以及 ,.-+~ 等符号。特别是我想排除所有“导航”键，如箭头、插入、删除、pos1、end、F1-12 等。

为什么以下不起作用？

```
KeyPressEvent keyEvent;
if (Character.isLetterOrDigit((int) keyEvent.getUnicodeCharCode()) {} 
```

结果：

> Character 类型中的方法 isLetterOrDigit(char) 不适用于参数 (int)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T12:54:07.050

[Character.isLetterOrDigit(int)](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isLetterOrDigit%28int%29)仅在 Java 1.5 或更高版本中受支持。您可能使用的是旧版本。

尝试转换为 a`char`以匹配方法签名：

```
Character.isLetterOrDigit((char)keyEvent.getUnicodeCharCode()) 
```

# c# - 如果路由值中的空格显示为“+”字符，则路由无法识别路由

> ID：15294350
> 
> 赞同：0
> 
> 时间：2013-03-08T12:48:09.537
> 
> 标签：c#, .net, asp.net-mvc-4, asp.net-routing

我遇到了以下问题。可能有人也发现了这种奇怪的行为。

我的 global.asax.cs 中有以下路由定义：

```
routes.Add(new Route("/module/{searchTerm}", new RouteValueDictionary { {"controller", "Module"}, {"action", "Index"} }, null, new MvcRouteHandler())); 
```

`+`因此，从第一个角度来看，没什么特别的，但是当搜索词中的空格作为符号出现时，就会出现问题。

例如我们尝试打开一个链接：

```
http://[myserver]/module/some%20search%20term 
```

在这种情况下，一切正常，它会将我们重定向到正确的操作，但如果链接看起来像：

```
http://[myserver]/module/some+search+term 
```

我收到一条错误消息，指出没有与提供的 URL 匹配的路由。

顺便说一句，我无法在 ASP.NET 开发服务器上重现此问题。它只出现在 IIS 上。可能有人确实有这样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:50:41.950

*   URL 的路径部分中的百分比编码预计会被解码，但是
*   路径组件中的任何 + 字符都应按字面意思处理。

明确地说：+ 只是查询组件中的特殊字符。

[RFC 1738](https://www.rfc-editor.org/rfc/rfc1738)（由 2396 和 3986 修改）定义了方案 (http:)、权限 (//server.example.com) 和路径 (/myfile/mypage.htm) 组件，并且没有为+ 字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:29:30.197

`+`符号是段的分隔符。段是方案、权限、路径和查询。

来自[URI RFC](http://www.ietf.org/rfc/rfc2396.txt)

> 2.2\. 保留字符
> 
> 许多 URI 包括由某些特殊字符组成或由某些特殊字符分隔的组件。这些字符被称为“保留”，因为
> 它们在 URI 组件中的使用仅限于它们的保留
> 用途。如果 URI 组件的数据与保留的用途发生冲突，则必须在 形成 URI
> 之前对冲突数据进行转义。
> 
> ```
>  reserved    = ";" | "/" | "?" | ":" | "@" | "&" | "=" | "+" |
>                 "$" | "," 
> ```
> 
> 上面的“保留”语法类是指那些在 URI 中允许的字符，但在通用 URI 语法的特定组件中可能不允许的字符；它们被用作
> 第 3 节中描述的组件的分隔符。

显然，这在 Cassini 中实施得很糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:57:43.547

*   如果在 IIS 设置中禁止双重转义，则 URL 的登录路径部分不起作用。它是请求过滤策略的一部分。但是可以在 web.config 中配置 [是否启用双重转义危险？](https://stackoverflow.com/questions/1453218/is-enabling-double-escaping-dangerous)

当我在我的 web.config 中启用它时，一切都开始正常工作。

# ruby-on-rails - 如何使用嵌套属性和 FactoryGirl 测试 Rails 创建操作？

> ID：15294361
> 
> 赞同：2
> 
> 时间：2013-03-08T12:48:35.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, ruby-on-rails-3.2, factory-bot

我有一个接受 an`invoice`及其嵌套的模型`items`：

```
class Invoice < ActiveRecord::Base

  belongs_to :user
  has_many :items

  attr_accessible :number, :date, :recipient, :project_id, :items_attributes

  accepts_nested_attributes_for :items, :reject_if => :all_blank

end 
```

不过，我发现用 RSpec 和 FactoryGirl 测试它非常困难。这就是我所拥有的：

```
describe 'POST #create' do

  context "with valid attributes" do

    it "saves the new invoice in the database" do
      expect {
        post :create, invoice: attributes_for(:invoice), items_attributes: [ attributes_for(:item), attributes_for(:item) ]
      }.to change(Invoice, :count).by(1)        
    end

  end

end 
```

这是我在控制器中的创建操作：

```
def create
  @invoice = current_user.invoices.build(params[:invoice])
  if @invoice.save
    flash[:success] = "Invoice created."
    redirect_to invoices_path
  else
    render :new
  end
end 
```

每当我运行它时，我都会收到一个错误：`Can't mass-assign protected attributes: items`

有人可以帮我解决这个问题吗？

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T12:52:25.393

第一：`items`是嵌套的，所以它们在 params 中的名字是`items_attributes`. 更改。

第二：嵌套意味着......嵌套！

基本上，替换：

```
post :create, invoice: attributes_for(:invoice, items: [ build(:item), build(:item) ]) 
```

和：

```
post :create, invoice: { attributes_for(:invoice).merge(items_attributes: [ attributes_for(:item), attributes_for(:item) ]) } 
```

旁注，你在这里做一个真正的集成测试，你可以存根来保持单元测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T21:14:23.423

我遇到了同样的问题，所以我创建了一个补丁，将 FactoryGirl.nested_attributes_for 方法添加到 FactoryGirl：

```
module FactoryGirl
  def self.nested_attributes_for(factory_sym)
    attrs = FactoryGirl.attributes_for(factory_sym)
    factory = FactoryGirl.factories[factory_sym]
    factory.associations.names.each do |sym|
      attrs["#{sym}_attributes"] = FactoryGirl.attributes_for sym
    end
    return attrs
  end
end 
```

所以现在你可以打电话：

```
post :create, invoice: FactoryGirl.nested_attributes_for(:invoice) } 
```

你会得到你所知道和喜爱的所有嵌套形式的善良:)

（要应用补丁，您需要将我答案顶部的代码复制到 config/initializers 文件夹中的新文件中）

# c - 在构建词法分析器时使用哈希表

> ID：15294362
> 
> 赞同：0
> 
> 时间：2013-03-08T12:48:37.360
> 
> 标签：c, compiler-construction, lexer

我正在为编译器构建词法分析器，并且正在使用散列快速识别关键字。

我的哈希函数是：

```
int Eval_Hash(char *str)
{       
    int prime = 5381;
    int i;

    for(i = 0; i < strlen(str); i++)
    prime = (prime*33) + str[i];

        return (abs(prime%(KeyWordCount*KeyWordCount)));
} 
```

我正在使用以下代码片段对关键字进行哈希处理。

```
 i = 0;
    while(i < KeyWordCount) {
            while(1)
                {   
                    tmp = (Eval_Hash(keywordList[i])+j*j)%(KeyWordCount*KeyWordCount);
                    if(h.Elem[tmp].hashVal == INT_MIN)
                    {
                        strcpy(h.Elem[tmp].name,tokenList[i]);
                        h.Elem[tmp].hashVal = tmp;
                        strcpy(h.Elem[tmp].value,keywordList[i]);
                        break;
                    }
                j++;
                }   
            i++;
        } 
```

但是当我进行词法分析时，输入流中的词位被散列到不同的槽中。例如，假设“参数”是一个关键字，在初始化哈希表时已经对其进行了哈希处理。但是当我从输入流中读取“参数”时，它会被识别为其他一些标记。

从输入流中散列字符串的代码片段如下：

```
 Hash_Value = Eval_Hash(str);
            printf("\n  \n Hash Value: %d Modified Hash Value: %d \n \n ",Hash_Value,Hash_Value%(KeyWordCount*KeyWordCount));
            count = 1;
            for(j=0;count<KeyWordCount;j++)
            {
                tmp = (Hash_Value+j*j)%(KeyWordCount*KeyWordCount);
                if(h.Elem[tmp].flag == 1)
                    count++;

                else if(strcmp(h.Elem[tmp].value, str) == 0)
                {
                    alpha_flag = 1;
                    h.Elem[tmp].flag = 1;
                    strcpy(token->name,h.Elem[tmp].name);
                    break;
                }
                else
                    h.Elem[tmp].flag = 1;
} 
```

此外，哈希表的 typedef 是

```
struct _hashElem {
    int hashVal;
    int flag;
    char name[30];//keyw
    char value[30];
};

typedef struct _hashElem hashElem;

struct _Hash {
    hashElem Elem[KeyWordCount*KeyWordCount];
};

typedef struct _Hash Hash; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2013-03-09T00:01:06.583

这是在浪费你的时间。在这个时代，或者实际上是在大约 1988 年首次出现之后的任何时代，你应该使用 flex 来生成词法分析器，你应该让它识别关键字，只需将它们单独指定为规则。它可以像识别通用标识符一样快速地做到这一点。根本不需要哈希表。

# javascript - 如何在 Sencha touch 2.1 中创建复杂的数据项？

> ID：15294371
> 
> 赞同：5
> 
> 时间：2013-03-08T12:49:15.493
> 
> 标签：javascript, sencha-touch, sencha-touch-2, sencha-touch-2.1

我想在如下所示的列表中创建数据项： ![所需布局](../Images/d0a82858f90c03749690f23ad9da80bd.png)

但我无法`vbox`用 3 个组件渲染中间部分。我正在关注这个例子：[http ://www.sencha.com/blog/dive-into-dataview-with-sencha-touch-2-beta-2/](http://www.sencha.com/blog/dive-into-dataview-with-sencha-touch-2-beta-2/)

这就是我定义数据项的方式：

```
Ext.define('MyTabApp.view.CartListItem', {
    extend  : 'Ext.dataview.component.DataItem',
    alias   : 'widget.cartlistitem',
    requires: [
               'Ext.Img'
    ],
    config  : {
        cls: 'cart-list-item',
        layout: {
            type: 'hbox',
            align: 'center'
        },
        image: true,
        details: {
            cls: 'x-details',
            flex: 3,
        },
        pricing: {
            cls: 'x-pricing',
            flex: 1
        },
        removeButton: {
            iconCls     : 'delete',
            iconMask    : true,
            ui          : 'astonvilla',
            style       : 'margin-left: 5px; margin-top:10px; padding:5px;'
        },
        moveButton: {
            iconCls     : 'reply',
            iconMask    : true,
            ui          : 'astonvilla',
            style       : 'margin-left: 5px; margin-top:10px; padding:5px;'
        },
        editButton: {
            iconCls     : 'compose',
            iconMask    : true,
            ui          : 'astonvilla',
            style       : 'margin-left: 5px; margin-top:10px; padding:5px;'
        },
        dataMap: {
            getImage: {
                setSrc          : 'itemImage'
            },

            getDetails: {
                setItemTitle    : 'title',
                setQuantity     : 'quantity'
            },

            getPricing: {
                setHtml         : 'totalPrice'
            },
        },
    },
    applyImage: function(config) {
        return Ext.factory(config, Ext.Img, this.getImage());
    },

    updateImage: function(newImage, oldImage) {
        if (newImage) {
            this.add(newImage);
        }

        if (oldImage) {
            this.remove(oldImage);
        }
    },

    applyDetails: function(config) {
        console.log("applyDetails");
        var details = Ext.factory(config, MyTabApp.view.CartListItemDetails, this.getDetails());
        console.log("applyDetails done");
        console.log(details);
        return details;
    },

    updateDetails: function(newDetails, oldDetails) {
        console.log("updateDetails");
        if (newDetails) {
            this.add(newDetails);
        }

        if (oldDetails) {
            this.remove(oldDetails);
        }
    },

    applyPricing: function(config) {
        return Ext.factory(config, Ext.Component, this.getPricing());
    },

    updatePricing: function(newPricing, oldPricing) {
        if (newPricing) {
            this.add(newPricing);
        }

        if (oldPricing) {
            this.remove(oldPricing);
        }
    },

    applyRemoveButton: function(config) {
        return Ext.factory(config, Ext.Button, this.getRemoveButton());
    },

    updateRemoveButton: function(newRemoveButton, oldRemoveButton) {
        if (oldRemoveButton) {
            this.remove(oldRemoveButton);
        }

        if (newRemoveButton) {
            // add an event listeners for the `tap` event onto the new button, and tell it to call the onNameButtonTap method
            // when it happens
            newRemoveButton.on('tap', this.onRemoveButtonTap, this);

            this.add(newRemoveButton);
        }
    },

    onRemoveButtonTap: function(button, e) {
        var record = this.getRecord();

        Ext.Msg.alert(
            record.get('title'), // the title of the alert
            "Id of this item is: " + record.get('itemId') // the message of the alert
        );
    },

    applyEditButton: function(config) {
        return Ext.factory(config, Ext.Button, this.getEditButton());
    },

    updateEditButton: function(newEditButton, oldEditButton) {
        if (oldEditButton) {
            this.remove(oldEditButton);
        }

        if (newEditButton) {
            // add an event listeners for the `tap` event onto the new button, and tell it to call the onNameButtonTap method
            // when it happens
            newEditButton.on('tap', this.onEditButtonTap, this);

            this.add(newEditButton);
        }
    },

    onEditButtonTap: function(button, e) {
        var record = this.getRecord();

        Ext.Msg.alert(
            record.get('title'), // the title of the alert
            "Id of this item is: " + record.get('itemId') // the message of the alert
        );
    },

    applyMoveButton: function(config) {
        return Ext.factory(config, Ext.Button, this.getMoveButton());
    },

    updateMoveButton: function(newMoveButton, oldMoveButton) {
        if (oldMoveButton) {
            this.remove(oldMoveButton);
        }

        if (newMoveButton) {
            // add an event listeners for the `tap` event onto the new button, and tell it to call the onNameButtonTap method
            // when it happens
            newMoveButton.on('tap', this.onMoveButtonTap, this);

            this.add(newMoveButton);
        }
    },

    onMoveButtonTap: function(button, e) {
        var record = this.getRecord();

        Ext.Msg.alert(
            record.get('title'), // the title of the alert
            "Id of this item is: " + record.get('itemId') // the message of the alert
        );
    }
}); 
```

我调用的中间部分`details`定义为自定义视图，`vbox`布局定义如下：

```
Ext.define('MyTabApp.view.CartListItemDetails', {
    extend  : 'Ext.Component',
    alias   : 'widget.cartlistitemdetails',
    config  : {
        cls     : 'x-details',
        flex    : 3,
        layout  : 'vbox',
        titleCell: null,
        qtyCell: null,
        items   : [{
            xtype   : 'panel',
            flex    : 1,
            itemId  : 'titleCell',
            html    : 'blahblah'
        },
        {
            xtype   : 'component',
            flex    : 1,
            itemId  : 'qtyCell',
            html    : 'blahblah'
        }],
    },
    setItemTitle    : function(title){
//      this.down('#titleCell').setHtml(title);
        console.log(this.getItems());
        this.getItems()[0].html = title;
    },
    setQuantity : function(qty){
//      this.down('#qtyCell').setHtml(qty);
        console.log(this.getItems());
        this.getItems()[0].html = qty;
    }
}); 
```

这是呈现带有图像、定价和水平对齐按钮的列表项。不呈现自定义组件的中间部分。如果我检查元素，它就是生成 html 的方式：

```
<div class="x-details x-layout-box-item x-flexed x-stretched" id="ext-cartlistitemdetails-1" style="-webkit-box-flex: 3;"></div> 
```

如您所见，此 div 内没有任何内容，这就是它的呈现方式：

![实际列表项](../Images/ba0328e014dc77728f328ac6b2495f00.png)

似乎我很接近，因为`setItemTitle`方法被调用但仍然`this.down('#titleCell').setHtml(title)`或`this.getItems()[0].html = title;`不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-29T08:19:36.830

我还试图实现一个复杂的数据项布局。我在 hbox 项目中使用 vbox 面板并能够实现它。

看看 [https://github.com/tomalex0/senchatouch-complex-dataitem](https://github.com/tomalex0/senchatouch-complex-dataitem)

演示 [http://tomalex0.github.io/senchatouch-complex-dataitem/](http://tomalex0.github.io/senchatouch-complex-dataitem/)

试试看，让我知道它是否适合你。

# android - 标签的android自定义字体

> ID：15294372
> 
> 赞同：3
> 
> 时间：2013-03-08T12:49:19.927
> 
> 标签：android, tabs, android-tabhost

我想为我的标签使用自定义字体。这是我尝试过的：

```
<style name="CustomTabWidgetText" 
parent="@android:style/TextAppearance.Widget.TabWidget">
  <item name="android:textSize">14sp</item>
  <item name="android:typeface">@assets/fonts/heartbre</item>
  <item name="android:textStyle">bold</item>
</style> 
```

但我在`<item name="android:typeface">@assets/fonts/heartbre</item>`.

这里有人试过自定义标签的字体吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:50:46.613

设置字体的唯一（当前）可用方法是以**编程**方式进行：

```
TextView tv= (TextView)findViewById(R.id.custom);
Typeface face=Typeface.createFromAsset(getAssets(), "fonts/heartbre.ttf");
tv.setTypeface(face); 
```

但是，我希望有一天会有一种 xml 方式来做到这一点！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:51:53.020

您只能通过代码或通过自定义对象中的可样式属性定义自定义字体，`TexView`如下[所示](https://stackoverflow.com/questions/2376250/custom-fonts-and-xml-layouts-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:54:17.307

不可能从 XML 手动添加（据我所知！）。您必须在代码中执行此操作：

```
Typeface typeface = Typeface.createFromAsset(getAssets(), "fonts/heartbre.ttf");
textView.setTypeface(typeface, Typeface.BOLD); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-15T13:30:46.807

请参阅this question [setting custom font for sherlock action bar tab android](https://stackoverflow.com/questions/14436364/setting-custom-font-for-sherlock-action-bar-tab-android/16566277)并检查我的答案。到目前为止，我发布的解决方案在所有情况下都是最好的。希望它会有所帮助。

# c++ - C++：仅标头项目，静态 const 非整数

> ID：15294374
> 
> 赞同：5
> 
> 时间：2013-03-08T12:49:24.790
> 
> 标签：c++

我有一个**只有标题的项目**。在里面我有一堂课。在它里面（或者实际上其他任何地方）我想要有常量数据（枚举值到字符串，反之亦然）。这个问题似乎比我预期的要困难得多。

```
typedef boost::bimap<MyEnum,std::string> Data; 
```

**我尝试过但没有奏效的方法：**

1.  `static Data const s_data = _initData();`: 错误是这样的：*`only static const integral data members can be initialized within a class`*。

2.  `static Data const * const s_pData = _initData();`：该`_initData()`函数有一个静态局部变量（在第一次调用时填充），并返回它的地址。没有与上述相同的原因。

**我尝试过并且工作过，但我认为它很难看：**

```
class Ugly {
public:
    static MyEnum lookupByName(std::string s)
    {
        MyEnum ret;
        lookup(ret,s,true);
        return ret;
    }
    static String lookupByEnum(MyEnum e)
    {
        std::string ret;
        lookup(e,ret,false);
        return ret;
    }
    static void lookup(MyEnum &e, std::string &s, bool etos)
    {
        static Data s_data = _fill();
        if(etos)
            s = /* ... */;
        else
            e = /* ... */;
    }
    static Data _fill(){ /* ... */ };
}; 
```

想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T12:52:42.130

更简单的是

```
static T& global_t()
{ static T z = initializer; return z; } 
```

`global_t()`可用于需要 T 值的地方。

**注意**：在回答 rioki 评论时，我们还必须将函数指定为`inline`全局或命名空间级别（以避免链接器出现“多实例”问题）。

如果函数是模板或类成员函数（默认情况下内联定义），则不需要 inline 关键字

如果`static T`必须在不同的 OS 模块（读取：DLL）之间共享实例化，rioki 是完全正确的，但是 - 在这一点上 - 只有头文件的库不再有意义。

* * *

从 C++17 开始，说明`inline`符也可以用于变量。

所以，从 C++17 开始，你可以写

```
inline T global_object = initializer; 
```

您还可以将 inline 用于函数的静态成员，以提供内联初始化，例如

```
class Class
{
    static inline Type static_object_name = initializer;
}; 
```

# ruby-on-rails - 测试你在 Cucumber 和 Capybara 的页面上

> ID：15294376
> 
> 赞同：4
> 
> 时间：2013-03-08T12:49:35.817
> 
> 标签：ruby-on-rails, cucumber, capybara

在Aslak Hellesoy 发布[的训练轮子中](http://aslakhellesoy.com/post/11055981222/the-training-wheels-came-off)，他说他已经从最新版本的黄瓜中删除了 web_steps.rb 和 paths.rb。

我可以理解使用 Capybara api 而不是 web_steps.rb，但是您现在将如何测试您是否在特定页面上？

这就是我过去使用paths.rb的方式：

```
#admin_authentication.feature    
Then  I should be on the admin home page

# paths.rb
when /the admin home page/
  admin_root_path

# web_steps.rb
Then /^(?:|I )should be on (.+)$/ do |page_name|
  current_path = URI.parse(current_url).path
  if current_path.respond_to? :should
    current_path.should == path_to(page_name)
  else
    assert_equal path_to(page_name), current_path
  end
end 
```

作为次要问题，我们应该这样做吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T13:10:56.653

我只是这样做，看看它是否适合你：

```
assert page.current_path == admin_root_path 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-09T17:03:35.350

通常，您不应在 Cucumber 步骤中测试页面路径。Cucumber 场景是从用户的角度编写的。用户通常只对页面内容感兴趣，因此测试应该检查页面内容而不是特定的 URL 或控制器。

而不是像这样从开发人员的角度编写场景：

```
Scenario: Administrator should be on the admin home page
  When I log in as an administrator
  Then I should be on the admin home page 
```

从用户的角度写成这样：

```
Scenario: Administrator should have super-user tools
  When I log in as an administrator
  Then I should see the disable-abusive-user button 
```

# javascript - 我应该在视图中引用 controller.model 还是 controller.content？

> ID：15294390
> 
> 赞同：1
> 
> 时间：2013-03-08T12:50:33.543
> 
> 标签：javascript, ember.js, handlebars.js

如果我有一个产品模型，并且在我看来，我会遍历它们，那么以下两个都是有效的。

我应该使用哪一个？两者都有原因吗？

我更喜欢`controller.model`，似乎更明确。

```
{{#each product in controller.model}}
    <div>{{product.artist}}</div>
{{/each}}

{{#each product in controller.content}}
    <div>{{product.artist}}</div>
{{/each}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:51:08.860

> 我应该使用哪一个？

其实也没有。相反，您应该绑定到控制器本身，如下所示：

```
{{#each product in controller}}
  <div>{{product.artist}}</div>
{{/each}} 
```

虽然`controller.content`一`controller.model`开始看起来很有效，但您会发现这种方法在更高级的用例（如排序和指定 itemController）中会失效。

> 两者都有原因吗？

`controller.content`AFAIK 使用和之间没有区别`controller.model`。model 属性实际上是 content 属性的别名。

```
// Ember controller definition:
model: Em.computed.alias('content') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:50:38.110

从 ember 源代码看来，这`model`是一个别名`content`：

```
Ember.ControllerMixin = Ember.Mixin.create({
    ...
    model: Ember.computed.alias('content'),
    ...
}); 
```

# html - Capybara-在 html 页面上查找任意项

> ID：15294392
> 
> 赞同：0
> 
> 时间：2013-03-08T12:50:36.303
> 
> 标签：html, testing, capybara

我正在尝试在具有如下代码的 html 页面上自动化一些测试：

```
<br>
<strong>DOCUMENTS</strong>
<br>
No file found.
<br>
<br>
<strong>OUTGOING-DOCUMENTS</strong>
<br>
<table>
<br> 
```

当您列出一个类别中的所有文档时，如果存在任何文件，它会生成一个表格，如果没有则写入“未找到文件”。

我的问题是：我怎样才能一般地访问这些表？我想到的一件事是通过换行符访问它们。由于有固定数量的中断，如果我在 break 5 和 break 6 之间进行检查，我会找到一个表格或“未找到文件”消息。

这样做有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:03:55.123

已解决：这是针对我的问题的解决方案。可以更改解决方案元素以对其进行自定义。find(("strong:contains('#{options[i]}') + br + table")) 如果该位置有表格，则返回 en 元素。如果表不存在，您必须处理异常

```
 begin
      el = find(("strong:contains('#{options[i]}') + br + table"))   
      files = el.all('tr')
      p "#{files.length} files for #{options[i]}"
    rescue Capybara::ElementNotFound
      p "No report for #{options[i]}"
    end 
```

# hibernate - 实体子类的专用缓存区域？

> ID：15294394
> 
> 赞同：9
> 
> 时间：2013-03-08T12:50:38.003
> 
> 标签：hibernate, jpa-2.0, ehcache

我们有一个包含 100 多个实体类的广泛实体模型。所有实体类都是单个实体超类的子类。共享缓存模式已设置为**ALL**。

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
@Table(name = "entities")
public abstract class LongIdEntity {

  @Id
  @GeneratedValue(strategy = GenerationType.TABLE)
  private Long id;

  @Version
  @Column(name = "OPT_LOCK_VERSION")
  private Long lockVersion;

  etc...

} 
```

一个示例子类：

```
@Entity
@Table(name = "cars")
public class Car extends LongIdEntity { ... } 
```

我们想在二级缓存中缓存所有实体。问题是只为所有实体创建了 1 个缓存区域；命名为**LongIdEntity**。

调试显示 Hibernate*确实*找到了所有实体类，但无论如何都为它们分配了相同的区域。因为在**SessionFactoryImpl:339**：

```
String cacheRegionName = cacheRegionPrefix + model.getRootClass().getCacheRegionName(); 
```

在我们的例子中，对**model.getRootClass()**的调用总是会产生“ **LongIdEntity** ”。

我认为这确实会缓存所有实体，但没有任何驱逐控制。有些课程非常频繁且只读。因此，我们希望将它们固定在内存中。有些通常在特定的时间跨度内使用，等等......将它们全部塞进同一个缓存会使它全部失效。

在注释中指定区域无效。例如：

```
@Cache(usage = CacheConcurrencyStrategy.NONSTRICT_READ_WRITE,region = "cars")
@Entity
@Table(name = "cars")
public class Car extends LongIdEntity { ... } 
```

奇怪的是，只有共享缓存模式**ALL**才能获取实体类。在任何其他模式下，没有实体 - 即使使用 @Cache 和/或 @Cacheable 注释。也许这是一个迹象？

有人知道我如何分配特定的实体类特定区域？

TIA :-)

**persistence.xml**是基本的：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="cars" transaction-type="RESOURCE_LOCAL">
    <shared-cache-mode>ALL</shared-cache-mode>
  </persistence-unit>
</persistence> 
```

会话工厂采用经典方式：

```
 <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceProviderClass" value="org.hibernate.ejb.HibernatePersistence"/>
    <property name="persistenceUnitName" value="optimus"/>
    <property name="dataSource" ref="dataSource"/>
    <property name="jpaProperties">
      <props>
        <prop key="hibernate.cache.region.factory_class">org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory</prop>
        <prop key="hibernate.cache.use_second_level_cache">true</prop>
        <prop key="hibernate.cache.use_query_cache">true</prop>
        <prop key="hibernate.generate_statistics">true</prop>
        <prop key="hibernate.cache.default_cache_concurrency_strategy">NONSTRICT_READ_WRITE</prop>
        <prop key="hibernate.hbm2ddl.auto">update</prop>
        <prop key="hibernate.jdbc.batch_size">1000</prop>
        <prop key="hibernate.show_sql">false</prop>
        <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</prop>
        <prop key="hibernate.search.default.directory_provider">filesystem</prop>
        <prop key="hibernate.search.default.indexBase">/hibernate-search</prop>
      </props>
    </property>
  </bean> 
```

环境

*   JDK6
*   Linux x64
*   休眠 4.1.10
*   春天 3.2.1

更新：使用@MappedSuperclass

```
@MappedSuperclass
@Inheritance(strategy = InheritanceType.JOINED)
public abstract class LongIdEntity { ... } 
```

也不改变一件事。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T16:12:28.590

Hibernate 将整个实体层次结构明确地缓存在一个区域中。对此无法控制。它是正确处理多态查找的缓存解析的唯一方法。其他提供者（我认为）确实允许对每个子类的缓存位置/方式进行一些控制（至少这是我基于 JPA 提供的选项的猜测）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-10T09:49:52.670

我遇到了这个问题，并在这个 Stackoverflow 线程中搜索互联网。这对我来说真的很有启发性，因为我遇到了与这个问题中解释的问题相同的问题。阅读 Steve Ebersole 和 Jan Goyvaerts 之间的讨论让我找到了我的案例的解决方案。特别是其中一个提供的指向[Hibernate 论坛](https://forum.hibernate.org/viewtopic.php?f=1&t=1025577)的链接。

测试论坛的建议（这个问题也已经过去了三年，然后可能发生了一些变化）我成功地为父类的不同子级生成了不同的缓存区域。

就我而言，解决方案是使用`@MappedSuperclass` **删除** `@Inheritance(strategy = InheritanceType.JOINED)`. 在这种情况下，我可以在正确的区域看到正确的命中。

作为参考，我的代码类似于：

```
@MappedSuperclass
public abstract class ParentObject implements Serializable {
    ....

@Entity
@Cacheable(true)
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
public class ChildObject extends ParentObject {
    .... 
```

现在在日志中我可以看到：

```
Cache: com.<...>.ChildObject store hit for com.<...>.ChildObject#52 
```

代替：

```
Cache: com.<...>.ParentObject store hit for com.<...>.ParentObject#52 
```

当然，更改此注释具有与问题中使用的行为不同的行为，并且在某些情况下不是所需的行为。但我仍然认为值得在这里发表此评论作为将来的参考。也许可以帮助其他人。

# objective-c - 加载新线程

> ID：15294405
> 
> 赞同：0
> 
> 时间：2013-03-08T12:51:10.983
> 
> 标签：objective-c, xcode, ios4

我正在尝试在调用 Web 服务时进行加载视图...我已经尝试过：

```
-(void) viewDidLoad {
[NSThread detachNewThreadSelector:@selector(workerThread) toTarget:self withObject:nil];
//here I call the thread before call web service
 }

 -(void) workerThread {
[viewLoading setHidden:NO];
[NSThread detachNewThreadSelector:@selector(threadAnimacao) toTarget:self withObject:nil];
}

 -(void) threadAnimacao { //call this function is ok, but the timerLoadingEvento only is called after the call webservice ends
contadorLoading = 0;
nVoltas = 0;
nEspera = 0;
timerLoading = [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(timerLoadingEvento:) userInfo:nil repeats:YES]; 
}

-(void)timerLoadingEvento:(NSTimer *)theTimer{
UIImageView *img = imgLoading;

if (nEspera == 0) {
    if(contadorLoading == 0)
        [img setImage:[UIImage imageNamed:@"frame_01.png"]];
    else if(contadorLoading == 1)
        [img setImage:[UIImage imageNamed:@"frame_02.png"]];
    else if(contadorLoading == 2)
        [img setImage:[UIImage imageNamed:@"frame_03.png"]];
    else if(contadorLoading == 3)
        [img setImage:[UIImage imageNamed:@"frame_04.png"]];
    else if(contadorLoading == 4)
        [img setImage:[UIImage imageNamed:@"frame_05.png"]];
    else if(contadorLoading == 5)
        [img setImage:[UIImage imageNamed:@"frame_06.png"]];
    else if(contadorLoading == 6)
        [img setImage:[UIImage imageNamed:@"frame_07.png"]];
    else if(contadorLoading == 7)
        [img setImage:[UIImage imageNamed:@"frame_08.png"]];
    else if(contadorLoading == 8)
        [img setImage:[UIImage imageNamed:@"frame_09.png"]];
}

contadorLoading++;
nVoltas++;

if(nEspera != 0)
    nEspera++;

if(nEspera>250) {
    nEspera = 0;
    contadorLoading = 0;
    nVoltas = 0;
}

if(contadorLoading == 8)
    contadorLoading = 0;

if(nVoltas == 9)
    nEspera = 1;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:57:53.110

您可以在 Web 服务调用结束时使用默认活动指示器

或者，如果您有用于进度的自定义图像

您可以尝试将 animationImages（UIImage 对象数组）添加到 UImageView，设置动画重复计数（0 表示无限期）和 imageview 的动画持续时间并调用 imageview 开始动画以及一旦 Web 服务完成就调用停止动画。

查看 UIImageView API 指南以获取更多详细信息。

希望这可以帮助 ！！！

# iphone - 带有按钮和不同按钮操作的 TableCell

> ID：15294417
> 
> 赞同：0
> 
> 时间：2013-03-08T12:51:37.250
> 
> 标签：iphone, objective-c, uitableview

我是 iphone 新手，正在从事一个`UITableView`有两个需求的项目`sections`。在第一部分中，我们必须显示地址，在第二部分中，我们有四个变量行，其中包含`Phone number, Fax, Email, and SMS`. 如果任何项目 ( `phone,fax,email,sms`) 没有数据，则该行将不可见，并且每行都包含一个按钮。点击这些`UIButton`应该执行特定的功能，就像我点击电话行中的按钮然后它应该像明智地连接到电话一样。

我的问题是我无法区分`UIButton`操作，因为行不固定。那么如何根据特定的行数据动态地执行动作。目前我只能对所有行按钮执行一项操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:58:14.703

使用枚举来定义您的单元格类型。检查处理程序中的枚举。

```
typedef enum {
   CellTypePhone = 100, 
   CellTypeFax, 
   CellTypeEmail, 
   CellTypeSMS
} CellType; 
```

使用这些来标记您的单元格或按钮，例如

```
cell.tag = CellTypePhone; 
button.tag = CellTypePhone; 
```

然后您知道在按钮处理程序中选择了哪个单元格。

```
-(void)buttonPressed:(UIButton*)sender {
    if      (sender.tag == CellTypePhone)     { /* handle phone */ }
    else if (sender.tag == CellTypeFax)       { /* handle fax   */ }
    // etc.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:04:40.073

为您的`UIButtons`. 您可以使用 IB 为您的按钮提供标签编号，然后相应地调用标签值执行操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T01:58:23.140

有几种不同的处理方式。我假设您有一些自定义单元格，上面有一个`UILabel`和`UIButton`。首先是添加标签，就像 Mundi 说的那样。

第二个选项是向自定义单元格添加一个方法，为按钮设置目标和操作。当您根据数据设置单元格时，您还可以为每个按钮设置选择器。

# java - 如何将我们的动态文本逐行放置？

> ID：15294418
> 
> 赞同：0
> 
> 时间：2013-03-08T12:51:37.833
> 
> 标签：java, android

```
{
 Recipedetails2 item_details = new Recipedetails2();
            item_details.setName("Godhumai veg adai");
            item_details.setIngredients("Samba godhumai rava  - 1/2 cup. Bread slices - 4\. Curd ( thick ) - 1/2 cup  Carrot ( grated ) - 3 tsp Beetroot ( grated ) - 3 tsp Cabbage  ( grated ) - 2 tsp Green chilli - 1 Ginger - a small piece Garlic - 2 cloves Salt - as neededOil - as needed ");
            item_details.setMethods("1\. Cut ginger,  green chilli, garlic finely. 2\. Soak samba godhumai rava in curd for half an hour. 3\. Dip bread slices in water, squeeze and add to the godhumai. 4\. Add carrot, beetroot ,cabbage, ginger,  green chilli, garlic , salt, water and mix well to a batter. 5\. Heat oil in a skillet. 6\. Add ladle of batter, spread to a small thick circle and cook on both sides, dribbling oil.");
            item_details.setImageNumber(12);
            setUIScreen(item_details.getName(),item_details.getIngredients(),item_details.getMethods(),item_details.getImageNumber() );
        } 
```

它会像段落一样出现，但我需要的是它必须出现第一个点，然后下一行下一个点就像我需要的那样，我们如何在这段代码中做到这一点 **方法 1\. 将大豆粉与酪乳、盐混合面糊。2\. 在煎锅中加热油。3\. 加入芥末、乌拉德木豆，当芥末飞溅时，加入红辣椒、阿魏、大豆混合并在中火上不断搅拌。4\. 当内容物离开锅边时，转移到抹了油的盘子上，撒上更多的milagai，咖喱叶，切成方块。** 我需要这样，但它作为一个段落出现，我的 layout.xml 文件是

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"

  android:orientation="vertical"

  >

    <TextView android:id="@+id/name"
        android:textSize="14sp" 
        android:textStyle="bold" 
        android:textColor="#32cd32" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        />

  <ImageView
    android:id="@+id/photo"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:layout_gravity="top"
    android:padding="20dp"
    android:scaleType="center"
  ></ImageView>

  <TextView
      android:text="Ingredients:"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:gravity="left" />

  <TextView android:id="@+id/itemIngredients"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:scaleType="center" />

   <TextView
      android:text="Method:"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:gravity="left" />

  <TextView android:id="@+id/methods"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:scaleType="center" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:53:44.317

使用换行符`\n`强制*换*行：

> ```
> 1\. Mix soya flour with buttermilk, salt to a batter.\n
> 2\. Heat oil in a frying pan.\n
> 3\. Add mustard, urad dal and when mustard splutters, add red chilli, asafoetida, soya mix and stir constantly on a medium flame.\n
> 4\. When contents leave the sides of the pan, transfer to a greased plate, sprinkle moremilagai, curry leaves and cut into squares. 
> ```

所以，无论你想在哪里开始换行，你都放一个`\n`.

# django - Django pet_person.user_id 可能不为 NULL

> ID：15294419
> 
> 赞同：1
> 
> 时间：2013-03-08T12:51:47.153
> 
> 标签：django

我正在开发一个应用程序，宠物用户可以在其中创建个人资料并上传他们的宠物照片。

当我访问我似乎无法理解的个人资料页面时出现此错误。我最近创建了一个与此类似的应用程序，但曾经见过我将我的模型与用户相关联。我得到了错误。我感谢大家的所有帮助，我感谢大家。

我试图让用户在个人资料页面上传自己的照片。

```
 pet_person.user_id may not be NULL

 Traceback Switch to copy-and-paste view
 C:\o\mysite\pet\views.py in Profile 
        form.save() 
```

我认为这个错误与我的模型和我在 views.py 中的 Profile 函数有关

我的模型.py

```
 from django.db import models
  from django.db.models.signals import post_save
  from django.contrib.auth.models import User

class Person(models.Model):
    user = models.OneToOneField(User)
    name = models.CharField(max_length=100)
    image = models.FileField(upload_to="images/",blank=True,null=True)

    def __unicode__(self):
        return self.name

class Pet(models.Model):
    Person = models.ForeignKey(Person)
    description = models.CharField(max_length=100)
    image = models.FileField(upload_to="images/",blank=True,null=True)

    def __unicode__(self):
        return self.description 
```

我的部分观点.py

```
def Profile(request):
    form = PictureForm(request.POST ,request.FILES or None)
    if form.is_valid():
        form.save()
    return render_to_response('profile.html',{'form':PictureForm()},context_instance = RequestContext(request)
) 
```

我的表格.py

```
 from django import forms
 from django.contrib.auth.models import User
 from django.forms import ModelForm
 from pet.models import *

 class UserRegistration(ModelForm):
    username = forms.CharField(widget = forms.Textarea)
    name = forms.CharField(widget = forms.Textarea)
    email = forms.EmailField(widget = forms.Textarea)
    password = forms.CharField(widget = forms.PasswordInput(render_value=False))
    password1 = forms.CharField(label =(u'Verify Password'), widget = forms.PasswordInput(render_value=False))

    class Meta:
        model = Person
        exclude = ('user',)
        fields = ('username','email','name','password','password1')

    def clean_username(self):
        username = self.cleaned_data['username']
        try:
            User.objects.get(username=username)
        except User.DoesNotExist:
            return username
        raise forms.ValidationError("That user is already taken , please select another ")

    def clean(self):
        if self.cleaned_data['password'] != self.cleaned_data['password1']:
            raise forms.ValidationError("The password does not match ")
        return self.cleaned_data

 class LoginForm(forms.Form):
    username = forms.CharField(widget = forms.Textarea)
    password = forms.CharField(widget = forms.PasswordInput(render_value=False))
    model = Person
    fields = ('username','password')

 class PictureForm(forms.ModelForm):

    class Meta:
        model = Person
        fields = ('image',) 
```

@掌握！

```
def Profile(request):
    form = PictureForm(request.POST ,request.FILES or None)
    if form.is_valid():
        event = form.save(commit=False)
        event.user=request.user
    event.save()
    return render_to_response('profile.html',{'form':PictureForm()},context_instance = RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:43:09.380

```
class PictureForm(forms.ModelForm):
    class Meta:
        model = Person
        fields = ('image',)

def Profile(request):
    person = Person(user=request.user)
    if request.method == 'POST':
        form = PictureForm(request.POST ,request.FILES or None, instance=person)
        if form.is_valid():
            form.save() 
    return render_to_response('profile.html',{'form':PictureForm()},context_instance = RequestContext(request) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:06:51.843

在下面的模型中

```
class Person(models.Model):
    user = models.OneToOneField(User)
    name = models.CharField(max_length=100)
    image = models.FileField(upload_to="images/",blank=True,null=True) 
```

您有一个名为`user` That 的字段，在您的表单中的任何地方都没有提到。

并且根据您的模型`Person` 字段不能为 null 。

克服这个问题

保存您的表格

```
`obj =  form.save(`commit = False`)`
 obj.user =Person(user=request.user) # If user is logged in 
 obj.save() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:01:55.753

我认为您的问题在于`PictureForm`您只要求图像字段。但是，这种形式实际上是针对`Person`模型的。您`Person`需要用户和名称以及图像（实际上，图像是唯一的可选部分）。鉴于这些不是来自您的表格，您需要自己提供这些。请参阅[https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#using-a-subset-of-fields-on-the-form](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#using-a-subset-of-fields-on-the-form)

# c# - 当用户输入太快时源没有得到更新

> ID：15294422
> 
> 赞同：4
> 
> 时间：2013-03-08T12:51:56.927
> 
> 标签：c#, wpf, xaml, data-binding, delay

我正在尝试在文本框上创建一个小延迟`UpdateSourceTrigger`，以确保用户完成输入。

```
<TextBox 
  Text="{Binding SearchEngineCompassLogView.IdSearch, 
  Mode=TwoWay, 
  Source={StaticResource CompassLogView}, 
  UpdateSourceTrigger=PropertyChanged, Delay=2000}" /> 
```

问题在于，如果用户键入速度非常快，源代码不会得到更新。我已将其设置`Delay`为 2000 秒，因此问题更加明显。

财产：

```
public string IdSearch {
    get { return _idSearch; }
    set {
        if (_idSearch != value && value != null) {
            _idSearch = value;
            NotifyPropertyChanged();
            SearchForID(_idSearch);
        }
    }
} 
```

问题不是`NotifyPropertyChanged();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:49:50.750

我无法重现您描述的行为。我还认为您在 Text 属性的绑定定义中犯了错误（如果是这种情况，您应该在调试会话期间在 Visual Studio 的输出窗口中遇到绑定错误）。

我认为应该是

```
Text="{Binding IdSearch, 
```

但我不能说因为我不知道你的班级结构。

我做了一个小例子来证明属性的延迟和更新按预期工作。当您在属性 IdSearch 的 setter 中设置 BreakPoint 并运行示例时，您将看到 setter 在指定的延迟时间后被调用。你输入单词的速度有多快并不重要。

**XAML：**

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication2"
        Title="MainWindow"
        Width="525"
        Height="350">
    <Window.Resources>
        <local:Dummy x:Key="CompassLogView" />
    </Window.Resources>
    <Grid>
        <TextBox Text="{Binding IdSearch, Mode=TwoWay, Source={StaticResource CompassLogView}, UpdateSourceTrigger=PropertyChanged, Delay=2000}" />
    </Grid>
</Window> 
```

**C＃：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfApplication2 {
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window {
        public MainWindow() {
            InitializeComponent();
        }
    }

    public class Dummy {
        private string _idSearch;
        public string IdSearch {
            get { return _idSearch; }
            set {
                if (_idSearch != value && value != null) {
                    _idSearch = value;
                    //NotifyPropertyChanged();
                    //SearchForID(_idSearch);
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:28:30.237

您可以为此编写一个行为。如果您正在寻找现有的行为，它在 Catel 中。您可以使用 Catel 或仅复制/粘贴行为：

[https://catelproject.atlassian.net/wiki/display/CTL/UpdateBindingOnTextChanged](https://catelproject.atlassian.net/wiki/display/CTL/UpdateBindingOnTextChanged)

# email - 实时跟踪整个组织中电子邮件中使用的字词

> ID：15294424
> 
> 赞同：1
> 
> 时间：2013-03-08T12:52:03.737
> 
> 标签：email, exchange-server

1.  是否可以使用 Microsoft Exchange 服务器实时跟踪某个单词或单词列表（例如快乐、悲伤、大、小）在整个组织中出现的频率？

2.  如果可能，您对设置它并将其集成到现有 IT 系统以生成报告的成本（包括编程时间和可能需要的任何软件）的最佳估计是多少？词出现的频率。

# java - 如何进行良好的性能比较测试？

> ID：15294426
> 
> 赞同：6
> 
> 时间：2013-03-08T12:52:11.773
> 
> 标签：java, performance, jvm

*要编写一个好的比较测试测试，您必须运行它数千（数百万）次。它将（在大多数情况下）平衡其他程序的影响。*

但是如果 JVM 可以影响结果。例如：

第一个解决方案是：

```
 final StringBuilder stringBuilder = new StringBuilder();
    stringBuilder.append(getStrOne());
    stringBuilder.append(getStrTwo());
    final String result1 = stringBuilder.toString(); 
```

第二个是：

```
 final String result2 = getStrOne() + getStrTwo(); 
```

我不知道哪个更好，因为 JVM 会影响结果。如何知道哪个更好？

**更新**：我的意思并不完全*是*附加的组合测试。我问的是这样一个*难以测试的情况*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:57:59.163

我最近执行了一些基准测试，这些测试依赖于在此处找到的优秀 IBM 文章：http: [//www.ibm.com/developerworks/java/library/j-benchmark1/index.html](http://www.ibm.com/developerworks/java/library/j-benchmark1/index.html)。

本文描述了许多可能影响结果准确性的陷阱，例如：

*   代码的运行时优化/重新编译。
*   死代码消除（即未使用的结果可能导致您的测试代码被删除）
*   垃圾收集
*   缓存
*   ...

最后，文章链接到一个可以[下载](http://www.ellipticgroup.com/html/benchmarkingArticle.html)框架的站点。该框架在后台处理测试方法、寻找重新编译的证据和等待执行时间确定方面做得非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:57:09.687

如果是 2 个字符串，性能差异可以忽略不计，但请尝试以下操作：

```
String s = "";
for( int i = 0; i < 10000; i++ ) {
  s += i;
} 
```

对比

```
StringBuilder b = new StringBuilder();
for( int i = 0; i < 10000; i++ ) {
  b.append(i);
} 
```

你会发现第二个循环要快得多。为什么？因为字符串连接会`String`在每次迭代中创建一个新对象，这会浪费 CPU 周期和内存。

我会引用你的：

> *要编写一个好的比较测试测试，您必须对其进行数千（百万）次测试。它将（在大多数情况下）平衡其他程序的影响。*

这同样适用于单个 VM 中的测试：多次测试您的代码、使用更大的数据、更大的循环等。由于计时精度错误和其他影响（例如，两者之间运行的垃圾收集），只比较小部分没有意义。

# c# - C# 控制台应用程序，将方法中的代码行跳过到主方法中的一行

> ID：15294431
> 
> 赞同：0
> 
> 时间：2013-03-08T12:52:31.543
> 
> 标签：c#, console, load, skip

新的 C#er 在这里。我正在开发控制台 RPG。我创建了一个保存和加载方法，它将变量写入 txt 文件并在您在某个点键入“保存游戏”或“加载游戏”时加载它们。我试图让 LoadGame() 方法跳转到我的 Main() 中的某个点。我意识到我可以重写我的一些代码并使用一些 if 语句，或者转到并删除我的 LoadGame()，但我更愿意将我的 LoadGame() 保留在我的 Main() 之外。

这基本上是我的代码的样子：

```
 public static void LoadGame()

    {
        TextReader tr = new StreamReader("SavedGame.txt");

        string charnameload = tr.ReadLine();
        string hpload = tr.ReadLine();
        string hpmaxload = tr.ReadLine();
        string charattackload = tr.ReadLine();
        string charmanaload = tr.ReadLine();
        string charmanamaxload = tr.ReadLine();
        string charmanapowerload = tr.ReadLine();
        string spellsknownload = tr.ReadLine();
        string holyblastknownload = tr.ReadLine();
        string greaterhealknownload = tr.ReadLine();
        string goldload = tr.ReadLine();
        string expload = tr.ReadLine();
        string levelload = tr.ReadLine();
        string inventoryWeaponload = tr.ReadLine();
        string inventoryArmorload = tr.ReadLine();
        string inventoryshieldload = tr.ReadLine();
        string inventoryPotion1load = tr.ReadLine();
        string inventoryPotion2load = tr.ReadLine();
        string inventoryPotion3load = tr.ReadLine();
        string inventoryKey1load = tr.ReadLine();
        string inventoryKey2load = tr.ReadLine();
        string inventoryKey3load = tr.ReadLine();
        string inventoryKey4load = tr.ReadLine();
        string inventoryKey5load = tr.ReadLine();

        characterName = Convert.ToString(charnameload);
        hp = Convert.ToInt32(hpload);
        hpmax = Convert.ToInt32(hpmaxload);
        charattack = Convert.ToInt32(charattackload);
        charmana = Convert.ToInt32(charmanaload);
        charmanamax = Convert.ToInt32(charmanamaxload);
        charmanapower = Convert.ToInt32(charmanapowerload);
        spellsknown = Convert.ToInt32(spellsknownload);
        holyblastknown = Convert.ToInt32(holyblastknownload);
        greaterhealknown = Convert.ToInt32(greaterhealknownload);
        gold = Convert.ToInt32(goldload);
        exp = Convert.ToInt32(expload);
        level = Convert.ToInt32(levelload);
        inventoryWeapon = Convert.ToString(inventoryWeaponload);
        inventoryArmor = Convert.ToString(inventoryArmorload);
        inventoryshield = Convert.ToString(inventoryshieldload);
        inventoryPotion1 = Convert.ToString(inventoryPotion1load);
        inventoryPotion2 = Convert.ToString(inventoryPotion2load);
        inventoryPotion3 = Convert.ToString(inventoryPotion3load);
        inventoryKey1 = Convert.ToString(inventoryKey1load);
        inventoryKey2 = Convert.ToString(inventoryKey2load);
        inventoryKey3 = Convert.ToString(inventoryKey3load);
        inventoryKey4 = Convert.ToString(inventoryKey4load);
        inventoryKey5 = Convert.ToString(inventoryKey5load);

        tr.Close();
        CheckInventory();
        CheckSpell();

    //need statement here to skip to a point in Main()

    }

static void Main()
{
   //skip to somewhere in here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:55:58.040

你在回想。您在 main 中调用该方法，您希望它在其中执行

例如

```
static void Main()
{
    LoadGame();
} 
```

# c# - WPF XAML xmlns 说明。

> ID：15294436
> 
> 赞同：-2
> 
> 时间：2013-03-08T12:52:35.593
> 
> 标签：c#, wpf, xaml

我想知道两个定义有什么区别。我在 C# 中有一个类，它在命名空间 CalibrationControls 中调用 AutoAlgorithms，我想知道如何将它作为 XAML 的一部分包含在内。

xmlns:autoAlgo="clr-namespace:CalibrationControls.AutoAlgorithms"
xmlns:autoAlgo="clr-namespace:CalibrationControls.AutoAlgorithms;assembly=CalibrationControls.AutoAlgorithms"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:58:19.460

不同之处在于，如果命名空间是在同一个程序集中定义的，则可以省略该`assembly`部分，并且通常在根元素中声明命名空间。

在此处查看更多详细信息：

[http://msdn.microsoft.com/en-us/library/ms747086.aspx](http://msdn.microsoft.com/en-us/library/ms747086.aspx)

# ms-access - 插入宏后的 MS 访问

> ID：15294437
> 
> 赞同：0
> 
> 时间：2013-03-08T12:52:37.150
> 
> 标签：ms-access

我一直在自动化工作流程。我使用 Access 数据库 (2010)，它工作得非常好。

对于我的问题，相关表是： Inorder 和 Exceptions Inorder：此处的所有信息都按顺序排列，包括 DeviceID 和异常列 Exceptions：所有异常都写在这里，我们需要在带有 DeviceID 的 inorder 表中, 日期和异常（描述）

当 Inorder 表被填满时，更新查询会运行更新每个 Inorder.Exception 列，并使用相关的异常（完美运行，这里没有问题）。

我需要的是以下内容：当用户在表中插入一行时，需要检查异常表，如果异常表中的日期和设备 ID 存在异常，则必须填写 Inorder.Exception 列。

我搜索过的内容：使用 Datamacro，因为 Access 2010 [MS Access 触发器中不存在触发器？](https://stackoverflow.com/questions/5623440/ms-access-trigger) [http://msdn.microsoft.com/en-us/library/office/ff973807%28v=office.14%29.aspx](http://msdn.microsoft.com/en-us/library/office/ff973807%28v=office.14%29.aspx) [访问，插入后和缺少的 ID](https://stackoverflow.com/questions/9801744/access-after-insert-and-the-missing-id) [http://office.microsoft.com/en-us /access-help/video-create-a-data-macro-VA100305331.aspx](http://office.microsoft.com/en-us/access-help/video-create-a-data-macro-VA100305331.aspx) 和其他几个微软网站。

我尝试了多种设置，但它没有给我预期的结果。我不知道如何从 Exceptions 表中获取相关数据到 Inorder 表。我根本没有真正得到GUI....有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:35:30.137

试着把它放在`Before Change`你`Inorder`桌子上的活动中。我有点猜测你的表格结构，但试一试。

```
<?xml version="1.0" encoding="UTF-16" standalone="no"?>
<DataMacros xmlns="http://schemas.microsoft.com/office/accessservices/2009/11/application">
<DataMacro Event="BeforeChange">
<Statements>
    <ConditionalBlock>
        <If>
            <Condition>DCount("ExceptionID","Exceptions","DeviceID =" &amp; [Inorder].[DeviceID] &amp; "Date =#" &amp; [Inorder].[Date] &amp; "#")&gt;0</Condition>
        <Statements><Action Name="SetField">
            <Argument Name="Field">Inorder.Exception</Argument>
            <Argument Name="Value">DLookUp("ExceptionID","Exceptions","DeviceID =" &amp; [Inorder].[DeviceID] &amp; "Date =#" &amp; [Inorder].[Date] &amp; "#")</Argument>
        </Action>
        </Statements>
        </If>
        </ConditionalBlock>
    </Statements>
</DataMacro>
</DataMacros> 
```

# c - 在 MSVC 中导致问题的 include_next 预处理器指令

> ID：15294454
> 
> 赞同：4
> 
> 时间：2013-03-08T12:53:44.083
> 
> 标签：c, windows, gnu, visual-studio-2010

我知道 inlcude_next 恰好是 C 预处理器的 GNU 扩展。我在使用 MSVC 编译 Gnu 库代码时遇到问题。例如，有一个 stdio.h 头文件或更确切地说是`GNU-like <stdio.h>`. 当使用 MS 编译器编译时，我得到`invalid preprocessor command 'include_next'`了很好的结果，因为没有什么`#include_next`比 windows 的指令更重要的了。执行 #include_next 的主要目的是您想在项目中创建一个名为 stdio.h 的文件，该文件将被包含在内，而不是默认标头。

`// #include_next <stdio.h>`所以，我尝试了 2 个选项：1）在所有文件中注释掉这一行。2) 或将 #include_next 替换为`#include <stdio.h>`.

我不知道选择 1) 是否会导致任何问题（最后出现链接器错误）。关于2），我得到了`fatal error C1014: too many include files : depth = 1024`也很好。为此，我将使用`wrapper #ifndef`包含*警卫*或`# pragma once`指令。

以下是我的担忧：

我是否需要在头文件 stdio.h 之类`#include <stdio>`或内部编写语句？`#include "stdio.h"`为 Windows 编译时是否有意义。直接在它需要的所有源文件中进行操作是否就足够了`#include "stdio.h"`，这样它就可以绕过 Visual C 标准头文件而使用我的头文件？而且，如果我完全省略语句 include_next，可能/可能不会发生什么？

我的主要目标是使用 MSVC 成功编译 gnu 库。如果我遗漏了什么或者可能对这个话题有更多的了解，请纠正我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-18T11:05:43.413

选项 1 和 2 都不起作用。它是包装系统的标头。因此，如果您将其注释掉，系统标头将不会被包含在内，并且它的定义将丢失。如果将其更改为 plain `#include`，它将再次包含相同的标头，从而导致无限循环。

提升用途

```
#include <../include/stdio.h> 
```

这适用于 WinNT，因为所有标准头文件都位于名为`include`. 它也适用于标准的 WinCE SDK，但不幸的是，它并不适用于所有这些 SDK。

# mysql - 执行 jdbc batchUpdate 时出现 DeadlockLoserDataAccessException

> ID：15294456
> 
> 赞同：0
> 
> 时间：2013-03-08T12:53:58.193
> 
> 标签：mysql, jdbc, spring-jdbc, database-deadlocks

最近我遇到了以下异常： `org.springframework.dao.DeadlockLoserDataAccessException: PreparedStatementCallback;`

它是在我的代码调用以下方法时出现的： `int[] org.springframework.jdbc.core.JdbcTemplate.batchUpdate(String[] sql) throws DataAccessException`

简而言之，我`DeadlockLoserDataAccessException`在执行批处理 jdbc 查询时得到了。

现在即使它是一个运行时异常，我还是决定抓住它并重试。

但我不确定批处理中的查询会发生什么。他们都回滚了吗？或者抛出这个异常之后的查询没有被执行，并且在这个之前的所有查询都被执行了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-24T01:19:20.287

您应该在事务之外捕获死锁异常。

如果您的事务管理器设置为异常回滚，则批处理中的所有查询都将回滚。

# android - Google 在 Android API 级别 8 上映射 v2 API（需要片段？）和演示

> ID：15294460
> 
> 赞同：1
> 
> 时间：2013-03-08T12:54:08.820
> 
> 标签：android, google-maps

我刚刚安装了 Google Play 服务

但是，看教程、地图好像需要碎片？（我对这些只有基本的了解，因为我还是 Android 新手）

根据我的阅读，应该可以通过使用片段的支持库来使地图 v2 在 API 级别 8 上工作......

但是，我在找到一个实际运行且不会使 Eclipse/emulator（API 级别 8）崩溃的演示时遇到问题，所以我做错了。

（此外，我尝试过的演示不使用我不理解的 Google API 控制台密钥。我读到的所有地方都声明它是必需的。但这可能是因为它也是我使用任何适用于 Android 的 Google API 的“第一个” ...或者实际上）

我要做的就是显示以特定地址为中心的地图+添加一些图钉

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T14:51:34.880

> 地图似乎需要碎片？

不，尽管这是推荐的方法。

> 应该可以通过使用片段的支持库来使地图 v2 在 API 级别 8 上工作......

是的，但并非所有 API 级别 8 设备都支持 OpenGL ES 2.0 或可以访问 Play Services Framework。

> 但是，我在找到一个实际运行且不会使 Eclipse/emulator（API 级别 8）崩溃的演示时遇到问题，所以我做错了。

Maps V2 在 Android 模拟器上不可用。请在设备上进行 Maps V2 开发。

> 此外，我尝试过的演示也没有使用我不理解的 Google API 控制台密钥。

我非常有信心演示`<meta-data>`在清单中包含 API 密钥的元素。当然[，我所有的演示都可以](https://github.com/commonsguy/cw-omnibus/tree/master/MapsV2)。

> 我要做的就是显示以特定地址为中心的地图+添加一些图钉

[这是我针对该场景的最简单的演示之一](https://github.com/commonsguy/cw-omnibus/tree/master/MapsV2/Markers)。它使用 ActionBarSherlock 并有机会在 API 级别 8 设备上运行，前提是该设备具有 OpenGL ES 2.0 和 Play Services Framework。您需要修改清单以放入您自己的 Maps V2 API 密钥，与您的调试签名密钥和应用程序包名称 ( `com.commonsware.android.mapsv2.markers`) 相关联。

# batch-file - BATCH：如果名称包含部分单词，则转到 EOF

> ID：15294461
> 
> 赞同：0
> 
> 时间：2013-03-08T12:54:09.327
> 
> 标签：batch-file, contains, eof, goto

我有一个批处理脚本，它有一个变量 '%4' 并且是随机文件名，但有时它的名称如下：

> 030813.mp3
> 20130307.mp3

如果分机是mp3，我想让它转到EOF

到目前为止我有这个，但它不工作

> 如果 %4==*.mp3 转到 EOF

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T13:07:19.973

%~x4 将 %4 扩展为文件扩展名
（[http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/percent.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/percent.mspx?mfr=true)）
......所以试试`IF %~x4==.mp3 GOTO EOF`

# java - 如果-否则-如果

> ID：15294465
> 
> 赞同：0
> 
> 时间：2013-03-08T12:54:17.940
> 
> 标签：java

我是java初学者，我正在做一些练习题来复习我的java技能。

编写一个名为 season 的方法，它接受两个整数作为参数，表示月份和日期，并返回一个字符串，指示该月份和日期的季节。假设月份指定为 1 到 12 之间的整数（1 表示一月，2 表示二月，依此类推），并且月份中的日期是 1 到 31 之间的数字。

如果日期介于 12/16 和 3/15 之间，则应返回“Winter”。如果日期介于 3/16 和 6/15 之间，则应返回“Spring”。如果日期介于 6/16 和 9/15 之间，则应返回“Summer”。如果日期介于 9/16 和 12/15 之间，则应返回“Fall”。

```
public static String season(int month,int day){

    if(month>=9 && month<=12 && day==15||day==16){
        return "Fall";
    }
    else if (month>=4 && month<=6 && day==16||day==15){
       return "Spring";
     }
    else if (month>=6 && month<=9 && day==16||day==15){
         return "Summer";
     }
     else {
          return"Winter";

      }

} 
```

但我没有得到输出。但这对我来说似乎是对的。任何人都可以告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T12:56:14.300

[`||`优先级低于`&&`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)并且您的条件看起来不正确-您可能想编写如下内容：

```
if((month == 9 && day >= 16) //September, on or after the 16th
      || month == 10         //or October
      || month == 11         //or November
      || (month == 12 && day <=15)) { //or December, but before or on the 15th
    return "Fall";
} 
```

（其他条件相同的评论）

* * *

您可以通过使用一点技巧来缩短它，但可读性可能不那么好（值得商榷）：

```
int mdd = month * 100 + day; //date in MDD format, for example 507 for May 7th

if (mdd >= 916 && mdd <= 1215) {
    return "Fall";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T13:01:38.767

你应该尝试写这样的东西：

```
if((month>9 && month<12) || (month==9 && day>=16) || (month==12 && day<=15)){
    return "Fall";
} else if 
    ...
} 
```

优先级也很重要，但您必须考虑您真正想要实现的目标，并据此构建您的表达方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T13:03:27.480

```
if(month>=9 && month<=12 && (day==15||day==16)){
    return "Fall";
} 
```

This issue with this is that only the 15th and 16th of months 9-12 are considered the winter.

**Solution**

If it were up to me, I would re-factor the if-else tree to first check for months, then check the days. So for example:

```
if(month>=9 && month<=12)
{
    // Some special cases. 
    if((month == 9 && day < 15) || (month == 12 && day > 16))
    {
        // It isn't fall.
    }
    else
    {
        // It is fall.
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-05T23:05:59.130

这运行得很好。你有一些我纠正的小错误

```
public static String season(int month,int day){

   if((month>=9 && month<=12) && (day==15||day==16))
       return "Fall";    
   else{ 
       if ((month>=4 && month<=6) && (day==16||day==15))
           return "Spring";        
       else{
           if ((month>=6 && month<=9) && (day==16||day==15))
               return "Summer";    
           else 
               return"Winter";
       }
   } 
```

}

# xcode - 如何从 Picasa 相册中获取照片？

> ID：15294467
> 
> 赞同：0
> 
> 时间：2013-03-08T12:54:21.277
> 
> 标签：xcode, ios6, picasa

我正在开发一个需要显示 Picasa 网络相册中的照片的应用程序。我已经搜索过了。我得到了以下链接。 [https://code.google.com/p/gdata-objectivec-client/](https://code.google.com/p/gdata-objectivec-client/)

我已经下载了 GData 并将所有必需的文件夹包含在 xcode 中。

我写的代码在这里。

```
- (void) loadPhotoGallery{
    username = @"xyz";
    password = @"abc";

    GDataServiceGooglePhotos  *photosService;
    photosService = [self photoService];

    NSURL *url = [GDataServiceGooglePhotos photoFeedURLForUserID:@"user" albumID:@"ablumID" albumName:nil photoID:nil kind:nil access:nil];

    GDataQueryGooglePhotos *introspectQuery;
    introspectQuery = [GDataQueryGooglePhotos photoQueryWithFeedURL:url];
    [introspectQuery setResultFormat:kGDataQueryResultServiceDocument];
    GDataServiceTicket *ticket;

    ticket = [photosService fetchFeedWithQuery:introspectQuery delegate:self didFinishSelector:@selector(introspectTicket:finishedWithServiceDocument:error:)];

}
- (void)introspectTicket:(GDataServiceTicket *)ticket
finishedWithServiceDocument:(GDataAtomServiceDocument *)serviceDoc
                   error:(NSError *)error {
    if (error == nil) {
        GDataAtomCollection *collection = [[serviceDoc primaryWorkspace] primaryCollection];
        NSArray *theMIMETypes = [collection serviceAcceptStrings];

    }
}
-(GDataServiceGooglePhotos *)photoService{
    static GDataServiceGooglePhotos *service = nil;
    username = @"xyz";
    password = @"abc";

    if (!service) {
        service = [[GDataServiceGooglePhotos alloc] init];
        [service setShouldCacheDatedData:YES];
        [service setServiceShouldFollowNextLinks:YES];
        [service setIsServiceRetryEnabled:YES];
    }
    if ([username length] > 0 && [password length] > 0) {
        [service setUserCredentialsWithUsername:username
                                   password:password];
    } else {
        // fetch unauthenticated
        [service setUserCredentialsWithUsername:nil
                                   password:nil];
    }

return service;
} 
```

但我对这段代码很困惑。

任何人都可以帮忙。如何开始获取照片的代码？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:51:47.467

我已经解决了这个问题。我做了两个改变。1\. 编辑 loadPhotoGallery 方法 2\. 创建新的获取照片并显示到网格中的方法。

我的 loadPhotoGallery 代码如下。

```
- (void) loadPhotoGallery{
    NSLog(@"fetchAllPhotos");
    GDataServiceGooglePhotos *service = [self photoService];
    GDataServiceTicket *ticket;
 NSURL *feedURL = [GDataServiceGooglePhotos photoFeedURLForUserID:@"xyz@gmail.com" albumID:@"12345" albumName:nil photoID:nil kind:nil access:nil];

 ticket = [service  fetchFeedWithURL:feedURL delegate:self didFinishSelector:@selector(photosListTicket:finishedWithFeed:error:)];

    feedURL = nil;

} 
```

将照片显示到网格中的代码如下。

```
-(void)displayGrid{
    int x =0 ,y =0, counter =1;
    for (int i=0; i<[self.photos count]; i++) {

        GDataEntryPhoto *photoAlbum = [self.photos objectAtIndex:i];
        GDataTextConstruct *textConstruct = [photoAlbum title];
        NSString *stringTitle = [textConstruct stringValue];
        NSLog(@"%@",stringTitle);
        GDataMediaGroup *mediaGroup = [photoAlbum mediaGroup];
        NSArray *arrMediaThumbs = [mediaGroup mediaThumbnails];

        GDataMediaThumbnail *mediaThumbnail =[arrMediaThumbs objectAtIndex:2];
        NSLog(@"%@", [mediaThumbnail URLString]);

        NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:[mediaThumbnail URLString]]];
        UIImage *img = [UIImage imageWithData:data];
        UIImageView *imgView = [[UIImageView alloc] initWithImage:img];
        imgView.frame = CGRectMake(x, y, 106, 106);
        [scrPhoto addSubview:imgView];

        UIButton *btn= [UIButton buttonWithType:UIButtonTypeCustom];
        btn.frame = imgView.frame;
        btn.tag = counter;
        [btn addTarget:self action:@selector(btnPhotoClicked:) forControlEvents:UIControlEventTouchUpInside];
        [scrPhoto addSubview:btn];
        if(counter %3 == 0 ){
            y = y +106;
            x = 0;
        } else{
            x =x + 106;
        }
        counter++;

    }
    [scrPhoto setContentSize:CGSizeMake(320, y)];
} 
```

# asp.net - GridView，如何获取当前行的键？

> ID：15294469
> 
> 赞同：-1
> 
> 时间：2013-03-08T12:54:22.383
> 
> 标签：asp.net, gridview

如何从 ASP.NET`GridView`控件中获取当前选定的行键？
如果我处理`SelectedIndexChanged`事件，即使选择的记录 ID 已更改，它也不会在分页或排序时引发。
如果我处理`Sorted`事件或，`PageIndexChanged`则只有`null`.`GridView.SelectedValue`

我需要它来根据当前选定的行更新动态添加的控件。

**编辑**

GridView 标记：

```
<asp:GridView ID="GridView" runat="server" AllowPaging="True" AllowSorting="True"
    AutoGenerateColumns="False" DataKeyNames="ID_USER" DataSourceID="dsUsers" OnSelectedIndexChanged="GridView_SelectedIndexChanged"
    OnRowDataBound="GridView_RowDataBound" OnSelectedIndexChanging="GridView_SelectedIndexChanging" 
    onpageindexchanged="GridView_PageIndexChanged" onsorted="GridView_Sorted">
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:00:52.137

网格视图的用户`DataKeyNames`属性。

```
 <asp:GridView ID="GridView1" runat="server" DataKeyNames="ProductID">
 </asp:GridView> 
```

我通常通过 CommandArgument 传递 RowIndex 并使用它来检索我想要的 DataKey 值。

在按钮上：

```
CommandArgument='<%# DataBinder.Eval(Container, "RowIndex") %>' 
```

关于服务器事件

```
int rowIndex = int.Parse(e.CommandArgument.ToString());
string val = (string)this.grid.DataKeys[rowIndex]["ProductID"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:06:04.960

> 如果我处理 Sorted 事件或 PageIndexChanged，则 GridView.SelectedValue 中只有空值。

检查控件生命周期后期的事件中的 SelectedValue。像 PreRender 一样：

```
protected void GridView1_PreRender(object sender, EventArgs e)
{
    string currentValue = GridView1.SelectedValue;
} 
```

不要忘记添加`OnPreRender="GridView1_PreRender"`到您的标记中。

# android - 删除列表视图上的项目以及数据库 [ANDROID]

> ID：15294470
> 
> 赞同：0
> 
> 时间：2013-03-08T12:54:29.373
> 
> 标签：android, database, sqlite, listview

我已经检查了与我自己相关的所有问题。我使用恕我直言的代码完全不同。到目前为止，我已经对所有内容进行了编码。我读过删除数据库中的数据只是通过传递位置，问题是数据库中自动生成的id与传递的位置不同。我想要实现的只是在列表视图中删除项目后，数据库中的项目也将被删除。

数据库中获取所有数据的代码：

```
public ArrayList<String> getData() {
    String[] columns = new String[] { KEY_ID, KEY_CLIENT_NAME,
            KEY_PRODUCT_NAME, KEY_SUPPLIER_PRICE, KEY_BS_PRICE, KEY_QTY,
            KEY_TOTAL_AMOUNT };
    Cursor c = sql.query(DB_TABLE, columns, null, null, null, null, null);

    ArrayList<String> result = new ArrayList<String>();

    int id = c.getColumnIndex(KEY_ID);
    int cName = c.getColumnIndex(KEY_CLIENT_NAME);
    int pName = c.getColumnIndex(KEY_PRODUCT_NAME);
    int suppPrice = c.getColumnIndex(KEY_SUPPLIER_PRICE);
    int bsPrice = c.getColumnIndex(KEY_BS_PRICE);
    int qty = c.getColumnIndex(KEY_QTY);
    int totalAmount = c.getColumnIndex(KEY_TOTAL_AMOUNT);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {

        result.add("ID: " + c.getInt(id) + "\n" + "CLIENT NAME: "
                + c.getString(cName) + "\n" + "PRODUCT NAME: "
                + c.getString(pName) + "\n" + "SUPPLIER PRICE: "
                + c.getString(suppPrice) + "\n" + "RETAIL PRICE: "
                + c.getString(bsPrice) + "\n" + "QUANTITIY: "
                + c.getString(qty) + "\n" + "TOTAL: "
                + c.getString(totalAmount) + "\n");
    }

    return result;
} 
```

检索数据的代码：

```
sql = new SQLDatabase(this);
    sql.open();
     ArrayList<String> data = sql.getData();
    sql.close(); 
```

应该执行删除的代码：

```
protected void onListItemClick(View view, int position, long id) {
    Log.i("TAG", "onListItemClick id=" + position + id);

      AlertDialog.Builder builder = new AlertDialog.Builder( Delete.this);

      builder.setMessage("WHAT DO YOU WANT TO DO?");
      builder.setNegativeButton("DELETE", new
      DialogInterface.OnClickListener() {

      @Override public void onClick(DialogInterface dialog, int which) { }
                   // DELETE CODE HERE
      });

      builder.setNeutralButton("CANCEL", new
      DialogInterface.OnClickListener() {

      @Override public void onClick(DialogInterface dialog, int which) { }
                // DO NOTHING
      });

      builder.setCancelable(false); AlertDialog alertdialog =
      builder.create(); alertdialog.show();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:59:53.897

将标签添加到您插入的列中，并在列表和数据库中的删除操作时使用相同的标签值。

# enterprise-architect - 在 Enterprise Architect 中将类属性与表列相关联

> ID：15294471
> 
> 赞同：1
> 
> 时间：2013-03-08T12:54:29.693
> 
> 标签：enterprise-architect

在我从事的一个项目中，有一个 C# 库，其中包含与支持数据库表/存储过程相关的业务对象。

我们将代码导入 EA 模型（我们已经有数据库模型），现在我想展示一个类和一个表（或存储过程输出）之间的依赖关系。

由于这些是松散耦合的（即它们之间只有一部分属性是共享的），我希望在类 A 和表 B 之间建立关系，并且在这种关系的属性中具有映射（Aa <-> Ba ， ...）。

这可能吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T05:46:24.773

您可以在两个元素之间绘制连接器，然后将一端或两端链接到元素特征（属性或操作）。绘制连接器，然后在末端附近单击鼠标右键并选择链接到元素特征。

您可以在两个元素之间绘制任意数量的连接器，并将任意数量的连接器链接到任一端或两端的任何特征。

您应该注意，这是一个不在 UML 标准中的 EA 功能。因此，自动化也有点棘手（API 中没有记录功能链接），但我以前为客户端做过，所以可以完成。但是，根据您的问题，我认为这是您感兴趣的手动案例。

# python - 按字母顺序对元组列表进行排序（区分大小写）

> ID：15294473
> 
> 赞同：4
> 
> 时间：2013-03-08T12:54:37.993
> 
> 标签：python, list, sorting, tuples

我有一个元组列表

```
alist = [(u'First', 23), (u'Second', 64),(u'last', 19)] 
```

我想按字母顺序（并且区分大小写）来得到这个：

```
(u'last', 19), (u'First', 23), (u'Second', 64) 
```

我试过这个：

```
sorted(alist, key=lambda x: x[0], reverse= True) 
```

不幸的是，我得到了这个：

```
(u'last', 19), (u'Second', 64), (u'First', 23), 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T12:57:19.613

包括一个指示第一个字符是否为大写的键：

```
>>> sorted([(u'First', 23), (u'Second', 64),(u'last', 19)], key=lambda t: (t[0][0].isupper(), t[0]))
[(u'last', 19), (u'First', 23), (u'Second', 64)] 
```

`False`先排序，`True`所以首字母小写的单词将排在首字母大写的单词之前。单词按字典顺序排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:03:31.853

Define your own sort function:

Characters are compared by their ascii values and therefore `'A'`(65) is always smaller than `'a'`(97), but you can change this by returning smaller value for `'a'` compared to `'A'`.

```
In [39]: lis=[(u'First', 23),(u'laSt',1), (u'Second', 64),(u'last', 19),(u'FirSt',5)]

In [40]: def mysort(x):
    elem=x[0]
    return [ord(x)-97 if x.islower() else ord(x)  for x in elem]
   ....: 

In [41]: sorted(lis,key=mysort)
Out[41]: [(u'last', 19), (u'laSt', 1), (u'First', 23), (u'FirSt', 5), (u'Second', 64)] 
```

# actionscript-3 - 纯 ActionScript 中的 ActionBar

> ID：15294475
> 
> 赞同：2
> 
> 时间：2013-03-08T12:54:41.777
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5, flex-mobile

我有这个 MXML，我想将它表示为 actionscript：

```
<s:titleContent>
    <s:Label text="Title" fontWeight="bold" fontSize="20" height="20" verticalAlign="top" />
    <s:Label text=".com" fontSize="12" height="17" verticalAlign="bottom" />
</s:titleContent> 
```

我试过这个没有成功：

```
var chrome:ActionBar = new ActionBar();
chromeTitle.text = "Title";

chrome.setStyle("fontSize", 20);
chrome.title = "Title";
chrome.title = chromeTitle; 
```

如何将 css 样式的文本添加到操作栏（多个标签）？是否可以让其他视图继承此操作栏，这样我就不必复制代码（所有视图都有共同的元素）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T15:31:13.617

这个语法：

```
<s:titleContent>
 ...
</s:titleContent> 
```

表示您正在为它所在的组件设置 titleContent 属性。您可以从案例中分辨出属性和新类实例之间的区别。类名总是以大写开头；而属性名称以小写字母开头。您没有指定这是哪个类的属性；但是由于您正在处理移动设备，因此我认为这是一个[视图](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/View.html#titleContent)。titleContent 属性是一个数组。

所以; 你必须这样做：

```
// create the first label and set properties
var tempLabel :Label = new Label();
tempLabel.text = 'Title';
tempLabel.setStyle('fontWeight','bold');
tempLabel.setStyle('fontSize',20);
tempLabel.height = 20;
tempLabel.setStyle('verticalAlign','top');

// add label to titleContent array
this.titleContent.push(tempLabel);

// create next label
tempLabel :Label = new Label();
tempLabel.text = '.com';
tempLabel.setStyle('fontSize',12);
tempLabel.height = 17;
tempLabel.setStyle('verticalAlign','bottom');

// add second label to titleContent array
this.titleContent.push(tempLabel); 
```

这是将您提供的 MXML 代码转换为 ActionScript 的正确方法。由于您自己的代码试图创建一个新的 ActionBar() 如果这真的是您想要的，我不确定您是什么。

# maven - 更新由 Nexus 管理的 Maven 存储库上的侦听器

> ID：15294477
> 
> 赞同：2
> 
> 时间：2013-03-08T12:54:48.453
> 
> 标签：maven, plugins, repository, nexus

我们使用 maven 作为构建技术，使用 nexus 作为存储库管理器。我想知道刚刚上传到存储库的内容并在存储库更新完成后执行一些操作。我怎么能做到这一点？

编写正在验证文件系统的侦听器并比较差异？如果工件已部署并且上传过程已完成，我如何知道状态？也许您知道其他一些解决方案？

我需要的所有存储库都位于 Linux 上。

更新，伙计们，我刚刚看到有可以用于此的 nexus 插件。您知道如何在 nexus 插件中获取更新事件吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:34:47.677

要进一步详细说明 Manfred 的答案，请在此处查看病毒扫描示例插件：

[https://github.com/sonatype/nexus-example-plugins/](https://github.com/sonatype/nexus-example-plugins/)

它非常接近你想要的。请务必查看 nexus-2.3.x 分支，master 只能针对 2.4-SNAPSHOT 构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:31:56.587

如果您使用的是持续集成 (CI) 服务器，则可以有一个构建/部署后任务来执行您似乎感兴趣的那种通知。

我没有深入研究 Nexus OSS API，但也许您也可以查看他们的 IRC 频道（#maven / #nexus on irc.codehaus.org）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:59:16.290

Nexus 支持大量不同的集成，为您提供不同的选择。他们是

*   针对其 REST API 编写脚本以从外部访问 Nexus 功能
*   从外部收听 RSS 提要事件
*   编写插件以在 Nexus 中工作并扩展其功能和/或用户界面

在您的情况下，您只需订阅包含您感兴趣的事件的系统提要。在您的情况下，它可能是“所有存储库中的新部署工件”，例如`http://yournexusserver:8081/nexus/service/local/feeds/recentlyDeployedArtifacts`

只需使用可以定期轮询它的一些脚本或其他集成系统来监视该提要，然后执行您想要的任何操作。

如果你愿意，你当然可以把它转过来，写一个 Nexus 插件，通过内部 API 监听事件，然后从 Nexus 触发一个动作。选择在实施方面对您更容易的任何东西..

通过存储库查看系统提要 - 系统提要![在此处输入图像描述](../Images/879ef4a08a80db0db317e5669a532058.png)

# c# - 显示货币格式

> ID：15294479
> 
> 赞同：1
> 
> 时间：2013-03-08T12:54:51.917
> 
> 标签：c#, asp.net-mvc

我正在尝试用欧元符号显示一些货币。似乎我做错了什么，因为它不起作用。这是我的代码：

```
[DisplayFormat(DataFormatString="{0:N}")]
public decimal Price { get; set; } 
```

这就是它当前的显示方式：9.9900。

这就是我希望它的显示方式：9.99 欧元

我做错了什么，我该如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:57:06.383

使用货币格式化程序，例如

```
[DisplayFormat(DataFormatString="{0:C}")]
public decimal Price { get; set; } 
```

# selenium - 如何等到使用 Selenium Webdriver 加载网站图标

> ID：15294481
> 
> 赞同：0
> 
> 时间：2013-03-08T12:54:54.927
> 
> 标签：selenium, python-2.7, webdriver, selenium-webdriver

我想等待页面完全加载。我知道我可以通过等待页面元素加载来做到这一点。

但我想要更通用的东西，我假设 Favicon 可用于确定页面是否已完全加载。

如何确定 FavIcon 是否已使用 Selenium Webdriver 加载到页面中？

“我知道这只是您的 HTML 源代码中的另一个元素。但是如果您查看任何网页上的页面加载，Favicon 将是最后一个加载的。如果有办法等到 Favicon 加载到网页，我们可以将其用作等待页面加载来测试整个应用程序（Web 应用程序的所有网页上的 Favicon 都相同）。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:02:01.977

我不确定等待 favicon 是否是个好主意。不同的应用程序使用不同的技术，而且*IMO 不可能有一个通用的等待可以适用于所有 Web 应用程序*。以下是我用于“我的”应用程序的内容。这给了你一个想法。您需要构建适合“您的”应用程序的内容。

```
public void my_generic_wait_for_page_load() {
 final WebDriverWait wait = new WebDriverWait(this.getDriver(), 300);
 final JavascriptExecutor jsExecutor = (JavascriptExecutor) driver;
 final ExpectedCondition<Boolean> jQueryActive_toBeZero = new ExpectedCondition<Boolean>() {
    @Override
    public Boolean apply(WebDriver driver) {
        try {
             return ((Long) jsExecutor
                            .executeScript("return jQuery.active") == 0) ? true
                            : false;
        } catch (final WebDriverException e) {
        log.warn("It looks like jQuery is not available on the page, skipping the jQuery wait, check stack trace for details",e);
            return true; //skip the wait
        }
    }
};
   final ExpectedCondition<Boolean> document_readyState_toBeComplete = new ExpectedCondition<Boolean>() {
            @Override
            public Boolean apply(WebDriver driver) {
                return jsExecutor.executeScript("return document.readyState")
                        .toString().equals("complete") ? true : false;
            }
        };
        wait.until(jQueryActive_toBeZero);
        wait.until(document_readyState_toBeComplete);

 } 
```

# c# - 使用 ASP.NET 3.5 和 C# 重写 URL

> ID：15294484
> 
> 赞同：0
> 
> 时间：2013-03-08T12:55:00.200
> 
> 标签：c#, asp.net, .net

我需要使用 ASP.NET 重写 URL，后面的代码为 C#。我的应用程序包含以下 URL...

> [http://www.mywebsite.com/Products.aspx?id=1&pg=1](http://www.mywebsite.com/Products.aspx?id=1&pg=1)

但是，我需要重写 URL，以使用户在输入以下 URL 时获得与上述 URL 相同的内容...

> [http://www.mywebsite.com/CategoryName/ProductName/1](http://www.mywebsite.com/CategoryName/ProductName/1)

你们中的任何人都可以帮助我完成必要的代码吗？我的意思是 web.config、Global.asax 等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:56:37.177

如果您有 IIS7，最好的选择是使用[IIS Url Rewrite Module](http://www.microsoft.com/en-us/download/details.aspx?id=7435)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:18:48.457

我可以建议几个选项：

**一**

你可以看看设置一个`HttpHandlerFactory`.

我自己写了一个：http: [//mvcsnippets.blogspot.co.uk/2012/10/custom-cms-using-httphandlerfactory.html](http://mvcsnippets.blogspot.co.uk/2012/10/custom-cms-using-httphandlerfactory.html)

这是基本要点：

```
namespace Web.Helpers {
public class HttpCMSHandlerFactory : IHttpHandlerFactory
{
public IHttpHandler GetHandler(HttpContext context, string requestType, string url,string pathTranslated)
{
    string pageName = Path.GetFileNameWithoutExtension(context.Request.PhysicalPath);

    //on Server.Transfer the context is kept, so this just overrides the existing value.
    if (context.Items.Contains("PageName")) 
    {
        context.Items["PageName"] = pageName; } else { context.Items.Add("PageName", pageName); } 
        FileInfo fi = new FileInfo(context.Request.MapPath(context.Request.CurrentExecutionFilePath)); 

        //if File is not physical 
        if (fi.Exists == false) 
        {
             //return page to CMS handler the context containing "PageName" is passed on to this page, which then calls to the database to return the copy.
                return PageParser.GetCompiledPageInstance(url, context.Server.MapPath("~/CMSPage.aspx"),  context);                  
        } 
        else 
        {
            // Returns real page.
            return PageParser.GetCompiledPageInstance(context.Request.CurrentExecutionFilePath, fi.FullName, context); 
        } 
    }
} 
```

我试图处理的行为是，如果可能有 CMS 内容，并且我不想每次需要提供信息时都创建一个页面，但是如果存在应该返回的物理页面。

对您而言，您可能希望接受 URL，将其分解为组成部分。

所以`http://www.mywebsite.com/CategoryName/ProductName/1`变成：

```
context.Items["Categoryname"] = valueFromUrlasCategoryName; 
context.Items["Productname"] = valueFromUrlasProductName; 
context.Items["Id"] = valueFromUrlasId (or pg); 

return PageParser.GetCompiledPageInstance(url, context.Server.MapPath("~/ControlPage.aspx"),  context); 
```

然后在您的控制页面上，您可以从传入的这些值中截取`context`并根据需要询问数据。

在 web.config 中，您指向 HttpHandlerFactory 的引用

```
<httphandlers>
<add path="*.aspx" type="Web.Helpers.HttpCMSHandlerFactory, Web.helpers" verb="*"/>
</httphandlers> 
```

在您的情况下，您可以将路径设置为“ *.* ”以捕获所有流量。这意味着您必须添加对图像和脚本的处理。

您还需要确保在 IIS 中为无扩展页面添加通配符。

网上有很多关于[HttpHandlerFactories](http://msdn.microsoft.com/en-us/library/aa720140%28v=vs.71%29.aspx)的文章，可能解释得更好。

**二**

你所追求的东西是 的一部分`MVC`，你能看看改变你的 UI 来使用它吗？

# regex - 通过使用ant或ant扩展的正则表达式将每个xml数字属性替换为字符串中的算术乘积？

> ID：15294489
> 
> 赞同：0
> 
> 时间：2013-03-08T12:55:18.680
> 
> 标签：regex, ant, text-parsing, ant-contrib, flaka

我有一个带有（除其他外）属性的 xml 字符串，例如**x-pos="NN"**和**y-pos="NN"**，其中**NN**是正数或负数。我想读取每个值并将其更改为它的算术积 - 评估 #{NN * 15}，即 x-pos="3" 将更改为 x_pos="45"。

因此我需要这样的东西：

```
<ant-contrib:propertyregex  property="xval"
   input="${xmlfile.contents}"
   regexp="x-pos\s*=\s*&quot;([0-9\-]+)&quot;"
   replace="x-pos=&quot;_TRICKY_EXPR_EVALUATOR_{\1 * 15}&quot;"
   override="true" global="yes"/> 
```

或者，也许我可以以某种方式捕获所有 /x-pos\s*=\s*\"([0-9-]+)\"/ 匹配项（就像在 PHP preg_match_all 函数中一样）并将它们放入 flaka 列表或- 说 - 在用';'分隔的字符串中？一旦我有了它，我就可以拆分它，并遍历它以“手动”替换每个值。

是否有任何其他 ant 扩展可以与类似 perl 的正则表达式一起使用？我了解了 flaka 和 ant-contrib，但这些都无济于事。

谢谢你的想法！

更新：这是要解析的 xml 的假设片段：

```
<sprite name="timer" xref="" pos-x="25" pos-y="4" path="img/folder1/img1.jpg" />
<sprite name="timer1" xref="" pos-x="25" pos-y="4" offset-x="100" offset-y="10" path="img/folder1/img2.jpg" />
<control name="timer2" xref="" pos-x="25" pos-y="4" size="100" offset-y="10" path="img/folder1/img2.jpg" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:24:06.527

也许在使用 flaka 时已经使用：

```
 <!-- Activate flaka for all ant tasks -->
 <fl:install-property-handler/> 
```

结合：

```
#{ x * y} 
```

会以某种方式为你工作，没有测试它，因为我的机器上没有安装 antcontrib。
属性处理程序允许在所有 ant 任务中使用 EL 表达式。

这是一个给定文件 foo.xml 的小例子，需要[xmltask](http://www.oopsconsultancy.com/software/xmltask/index.html)和[flaka](http://code.google.com/p/flaka/)：

```
<whatever>
<sprite name="timer" path="img/folder1/img1.jpg" pos-x="25" pos-y="4" xref=""/>
<sprite name="timer1" offset-x="100" offset-y="10" path="img/folder1/img2.jpg" pos-x="26" pos-y="4" xref=""/>
<control name="timer2" offset-y="10" path="img/folder1/img2.jpg" pos-x="27" pos-y="4" size="100" xref=""/>
</whatever> 
```

就地编辑 foo.xml：

```
<project xmlns:fl="antlib:it.haefelinger.flaka">
 <!-- Activate flaka for all ant tasks -->
 <fl:install-property-handler/>
 <!-- Import XMLTask -->
 <taskdef name="xmltask" classname="com.oopsconsultancy.xmltask.ant.XmlTask"/>

 <!-- get a list with all pos-x attribute values -->
 <xmltask source="foo.xml">
   <copy path="//whatever/*/@pos-x" append="true" propertySeparator="," property="posxlist"/>
 </xmltask>
 <echo>$${posxlist} => ${posxlist}</echo>
 <fl:let>counter ::= 1</fl:let>
 <!-- for loop with xmltask editing foo.xml in place => source = dest -->
 <fl:for var="posx" in="split('${posxlist}', ',')">
   <xmltask source="foo.xml" dest="foo.xml" report="true">
     <!-- i.e. multiplicating value * 3 -->
     <attr path="//whatever/*[${counter}]" attr="pos-x" value="#{posx * 3}"/>
   </xmltask>
   <fl:let>counter ::= '${counter}' + 1</fl:let>
 </fl:for>
</project> 
```

输出 ：

```
 [xmltask] Cannot append values to properties
  [xmltask] Cannot append values to properties
  [xmltask] Cannot append values to properties
     [echo] ${posxlist} => 25,26,27
  [xmltask] Document -->
  [xmltask] <whatever>
  [xmltask] <sprite name="timer" path="img/folder1/img1.jpg" pos-x="75" pos-y="4" xref=""/>
  [xmltask] <sprite name="timer1" offset-x="100" offset-y="10" path="img/folder1/img2.jpg" pos-x="26" pos-y="4" xref=""/>
  [xmltask] <control name="timer2" offset-y="10" path="img/folder1/img2.jpg" pos-x="27" pos-y="4" size="100" xref=""/>
  [xmltask] </whatever>
  [xmltask] Document <--
  [xmltask] Document -->
  [xmltask] <whatever>
  [xmltask] <sprite name="timer" path="img/folder1/img1.jpg" pos-x="75" pos-y="4" xref=""/>
  [xmltask] <sprite name="timer1" offset-x="100" offset-y="10" path="img/folder1/img2.jpg" pos-x="78" pos-y="4" xref=""/>
  [xmltask] <control name="timer2" offset-y="10" path="img/folder1/img2.jpg" pos-x="27" pos-y="4" size="100" xref=""/>
  [xmltask] </whatever>
  [xmltask] Document <--
  [xmltask] Document -->
  [xmltask] <whatever>
  [xmltask] <sprite name="timer" path="img/folder1/img1.jpg" pos-x="75" pos-y="4" xref=""/>
  [xmltask] <sprite name="timer1" offset-x="100" offset-y="10" path="img/folder1/img2.jpg" pos-x="78" pos-y="4" xref=""/>
  [xmltask] <control name="timer2" offset-y="10" path="img/folder1/img2.jpg" pos-x="81" pos-y="4" size="100" xref=""/>
  [xmltask] </whatever>
  [xmltask] Document <--
BUILD SUCCESSFUL
Total time: 826 milliseconds 
```

警告“无法将值附加到属性”来自 com.oopsconsultancy.xmltask.CopyAction 第 80 行，以强调 ant 中的属性是不可变的，可以安全地忽略 - 甚至更好地从源中删除它并重建 xmltask.jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:26:32.323

这是我自己的解决方案的一部分。我不会将它标记为已接受，因为它不能解决一般的文本解析问题（如 php 的 preg_match_all）。但也许有人觉得这很有趣。有点乱——我使用了 ant 属性和 flaka EL 变量，但它说明了如何一起使用它们。这是代码：

```
filename: process.xml 
```

```
<!-- these includes are needed so that eclipse can load autocompletion base from plugins,
and they tell to ant where plugins' jars are (in 'ut' folder on the same level)-->
<taskdef uri="antlib:it.haefelinger.flaka" resource="it/haefelinger/flaka/antlib.xml" classpath="ut/ant-flaka.jar" />
<taskdef uri="antlib:net.sf.antcontrib" resource="net/sf/antcontrib/antlib.xml" classpath="ut/ant-contrib-1.0b3.jar" />

<!-- call: >> ant -Dfname="folder/with/xmls" -f process.xml correct-xmls -->
<target name="correct-xmls">
    <fl:install-property-handler />
    <property name="slashn" value="${line.separator}" />

    <!-- get xmls - only with existing root resprops element -->
    <fileset dir="${fname}" includes="**/*.xml" id="xml-classes">
        <contains text="&lt;resprops&gt;" />
    </fileset>

    <fl:for var="xn" in="split('${toString:xml-classes}', ';')">
        <fl:let>curfile = file(concat('${fname}','/',xn))</fl:let>
        <fl:let>tgtfile = file(concat('${fname}','/',xn,'.new'))</fl:let>
        <fl:echo>#{ format('file %s, last modified %tD, size: %d',  
            curfile.path, curfile.mtime, curfile.isdir ? 0 : curfile.size) }</fl:echo>

        <fl:unset>xmlfile.contents</fl:unset>
        <loadfile property="xmlfile.contents" srcFile="#{curfile}" />
        <fl:let>outstr = ''</fl:let>
        <fl:for var="str" in="split('${xmlfile.contents}', '\n')">
            <fl:unset> xval </fl:unset>
            <ac:propertyregex property="xval" input="#{str}" regexp="pos-x\s*=\s*&quot;([0-9\-]+)&quot;" select="\1" override="true" />
            <!-- force set property 'resstr' to value of var 'str'-->
            <fl:let>resstr ::= str</fl:let>

            <!-- process only if pos-x is found and we have its value in 'xval' -->
            <fl:when test="not empty '#{property.xval}'">
                <fl:let>outval = (property.xval * 15.5 + 0.5) </fl:let>
                <!-- kinda int-from-float -->
                <ac:propertyregex property="gotv" input="#{outval}" regexp="([0-9\-]+)\." select="\1" override="true" />
                <ac:propertyregex property="resstr"
                                  input="${resstr}"
                                  regexp="pos-x\s*=\s*&quot;([0-9\-]+)&quot;"
                                  replace="pos-x = &quot;#{gotv}&quot;"
                                  override="true"
                />
            </fl:when>

            <!-- add to output string by string -->
            <fl:let> outstr = format('%s%s%s', outstr , resstr, slashn) </fl:let>

        </fl:for>

        <!--save processed file -->
        <echo file="#{tgtfile}" encoding="utf-8">#{outstr}</echo>

    </fl:for>
</target> 
```

# c# - 我应该如何处理最近插入的记录 ID 的检索，以便可以将其插入到另一个表中？

> ID：15294490
> 
> 赞同：1
> 
> 时间：2013-03-08T12:55:20.207
> 
> 标签：c#, asp.net, sql, asp.net-mvc

我的视图模型中有一个供应商对象。当我将此供应商记录插入数据库时​​，我想检索此供应商的 ID，因为它将在之后立即用作另一个表的外键（在不同的存储过程中）。我正在尝试使用`test`我需要检索的 ID 来执行此操作。以下代码不起作用，因为`proc_amcInsertApplicationServerRelationship`需要一个整数，但`test`类型为`Object Parameter`.

我想我的问题是：

我正确地接近这个吗？如果没有，有什么更好的方法？另外，根据我目前的方法，我是否可以忽略一些简单的事情来让它发挥作用？这是我的代码（对不起，如果我没有提供足够的细节）：

```
 [HttpPost]
    public ActionResult Create(ApplicationViewModel applicationViewModel)
    {
        try
        {
            // TODO: Add insert logic here
            ObjectParameter test = new ObjectParameter("ID", typeof (int));
            var vendorID = db.proc_amcInsertNewVendor(applicationViewModel.Vendor.Company, applicationViewModel.Vendor.StreetAddress, applicationViewModel.Vendor.SecondaryStreetAddress,
                applicationViewModel.Vendor.City, applicationViewModel.Vendor.State, applicationViewModel.Vendor.ZipCode, applicationViewModel.Vendor.PhoneNumber,
                applicationViewModel.Vendor.Website, test);

            foreach (var serverID in applicationViewModel.ServerIDs)
            {
                db.proc_amcInsertApplicationServerRelationship(test, serverID);
            }

            return RedirectToAction("Index");
        }
        catch (Exception exception)
        {
            return View();
        }
    } 
```

编辑：根据请求，这是我的存储过程。

```
@Company varchar(100)
,@StreetAddress varchar(100)
,@SecondaryStreetAddress varchar(50)
,@City varchar(50)
,@State varchar(50)
,@ZipCode varchar(10)
,@PhoneNumber varchar(15)
,@Website varchar(200)

,@ID int = NULL OUT

AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

-- Insert statements for procedure here
INSERT INTO [dbo].[amc_Vendors]
(
 [Company]
,[StreetAddress]
,[SecondaryStreetAddress]
,[City]
,[State]
,[ZipCode]
,[PhoneNumber]
,[Website]
)
VALUES
(
 @Company
,@StreetAddress
,@SecondaryStreetAddress
,@City
,@State
,@ZipCode
,@PhoneNumber
,@Website
)

SET @Id = SCOPE_IDENTITY()
END
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:09:30.737

在插入语句之后的 SP 中。采用

```
Select @@IDENTITY As ReturnedId 
```

在您的服务代码中，执行以下操作：

```
int Id=db.proc_amcInsertApplicationServerRelationship(serverId).FirstOrDefault().ReturnedId; 
```

使用此 ID 进行进一步处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:12:47.260

对此有解决方案，但您需要确保以下几点：-
您可以使用当前代码尝试`@@Identity`在 SQL 过程中返回最近添加的项目的标识，并从命令中获取与返回值或输出参数相同的信息。

*   使用返回的值并在下一个操作中发送相同的值。

但就我的专业知识而言，这不是一个好的选择。由于您对查询执行有依赖关系，因此您还需要实现事务。

您可以在数据库和应用程序级别处理它们

使用 Single SP 在 C# 的应用程序级别使用 Transaction 或 Use Transaction 类在两个表中插入记录

希望这些会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T15:15:07.710

执行以下操作：

在您的 SP 中：

```
CREATE PROCEDURE dbo.YourSPName 
     @Param1 varchar(156),
    @Id Int OUTPUT
AS
SET NOCOUNT ON;

SELECT @Id = @@IDENTITY 
```

在您的 C# 代码中：

```
 var outputParameter = new ObjectParameter("Id", typeof(int));

 context.YourSPName("ParamValue", outputParameter);

 Console.WriteLine(outputParameter.Value); 
```

# java - 在设备启动时将数据从 android 活动传递到广播接收器

> ID：15294492
> 
> 赞同：0
> 
> 时间：2013-03-08T12:55:34.777
> 
> 标签：java, android, android-broadcastreceiver

`null`当我将数据从活动传递到广播接收器时，我总是获得捆绑价值。我的接收器将在启动时启动。

这是我的活动课程中的代码

```
Intent intent= new Intent();
intent.setAction("android.intent.action.BOOT_COMPLETED");
intent.putExtra("test", "test");    
sendBroadcast(intent); 
```

这是我的接收器类中的代码：

```
String testValue = intent.getStringExtra("test"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:27:18.933

启动时永远不会调用活动中的代码。系统根据自己的意图调用 onReceive()。您可以通过将一些日志放入活动代码来检查这一点 - 此日志不会在 logcat 中打印。

# c++ - 已删除对象的 C++ 参考

> ID：15294494
> 
> 赞同：1
> 
> 时间：2013-03-08T12:55:38.927
> 
> 标签：c++, object, reference

我正在学习 C++（来自 iOS），我想了解指针/引用的用法。

删除对象时使用对象的引用是否正确？或者引用的变量也会被删除？

**例子：**

```
Class Foo {
}

Class Faa{
   asyncCall(&Foo)
} 
```

1.

```
// ...
Foo *foo = new Foo();
faa->(asyncCall(&foo);
delete foo;
// ... 
```

2.

```
// ...
Foo *foo = new Foo();
Foo& refFoo = foo;
delete foo;

// do something with refFoo 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T13:00:51.377

由于您的代码示例是胡言乱语，我将提出自己的：

```
Foo* foo = new Foo();
Foo& ref = *foo;
delete foo;

// Use refFoo 
```

这是不好的。引用只是指在别处创建的对象。在这个例子中，`*foo`和`ref`是完全相同的对象。一旦你通过做破坏了那个对象，它`delete foo;`就会`ref`悬空。它指的是一个不再存在的对象。访问它会导致未定义的行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T12:58:54.500

C++ 中的引用与 Java、C# 或其他垃圾收集语言中的引用不同：对于大多数实际目的，您可以将 C++ 引用视为不需要取消引用^*的指针。创建对对象的引用不会延长其生命周期。这就是为什么通过引用访问已删除对象比通过第二个指针访问已删除对象更不好的原因：这是未定义的行为。

* * *

^* [但是，引用不是指针](http://en.wikipedia.org/wiki/Reference_%28C++%29#Relationship_to_pointers)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T12:58:01.000

除了您的示例甚至不接近正确的 C++ 并且它们都不会编译这一事实之外，对已删除的对象进行操作是永远不可能的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T13:02:08.983

当您删除一个对象时，它就消失了。任何引用该对象（指针、引用）的东西都变得无效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T12:59:58.157

`&`可以表示引用（如在声明中- 您错过了返回值和参数的`asyncCall(&Foo)`数据类型）或获取地址（如`asyncCall(&foo)`）。

拥有一些几乎类似于 C++ 并且更好地编译的代码也将有所帮助。

# ios - UISplitViewController - 调整详细视图的大小

> ID：15294495
> 
> 赞同：3
> 
> 时间：2013-03-08T12:55:55.700
> 
> 标签：ios, objective-c, ipad, cocoa-touch, uisplitviewcontroller

我在我的 iPad 应用程序中使用 UISplitViewController，我不太喜欢弹出视图滑入并覆盖三分之一屏幕并在纵向模式下停留在那里的方式。

当弹出框滑入视图时，我正在调整详细信息视图的大小，这工作正常，除了顶部的导航栏保持全宽（并且位于弹出框下方）。我基本上希望它看起来像在横向模式下。

这是我用来调整视图大小的代码：

```
UIViewController *masterView = [svc.viewControllers objectAtIndex:0];
UINavigationController *detailNavView = [svc.viewControllers objectAtIndex:1];
UIViewController *detailView = [detailNavView.viewControllers objectAtIndex:0];

detailView.view.frame = CGRectMake(masterView.view.frame.size.width, 0, detailView.view.frame.size.width - masterView.view.frame.size.width, detailView.view.frame.size.height); 
```

我已经尝试设置`detailNavView.view.frame`但没有任何反应。

如何调整包括导航栏在内的整体细节视图的大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T13:52:52.890

嗯，我认为`UISplitViewController`并不是那么灵活。这只是 Apple 决定的：横向拆分，纵向弹出窗口。详细视图占据了该控制器的整个视图（即主视图），因此您必须将其定义为另一种控制器的主视图的子视图才能像这样操作其导航栏。

自定义纵向视图的唯一解决方案是实际上取消 Apple 版本的拆分视图控制器并推出自己的版本。

也许最实用的解决方案只是在选择项目并在详细视图中显示后**关闭弹出框。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-14T12:23:16.997

答案是[UISplitViewController 的 preferredPrimaryColumnWidthFraction](https://developer.apple.com/documentation/uikit/uisplitviewcontroller/1623183-preferredprimarycolumnwidthfract)属性 - 将其设置为 0.0-1.0 以指定主视图占用的相对间距。

# asp.net-mvc - SignalR 客户端在每次刷新页面时断开/连接。ASP.NET MVC

> ID：15294497
> 
> 赞同：4
> 
> 时间：2013-03-08T12:55:57.900
> 
> 标签：asp.net-mvc, asp.net-mvc-4, signalr

我正在创建一个嵌入到我的 asp.net mvc 4 项目中的聊天。我有一个在线用户 ul 列表，它在 OnConnected 上添加一个用户并在 OnDisconnected 上删除它。

所以，我的应用程序不是 SinglePage 应用程序，这意味着它始终在页面上刷新。

我在客户端处理这个在线用户列表时遇到了一些困难，因为信​​号器在每次页面刷新时都会调用 OnDisconnected 和 OnConnected。

当另一个客户端在应用程序中正常导航时，它会在每次刷新页面时不断被删除和添加。

如何在客户端避免这种行为？

* * *

我正在尝试在运行带有 usersOnline 列表的页面的客户端上做一些这样的事情......

```
var timeout;

chat.client.login = function (chatUser) {
    addUser(chatUser);
    window.clearTimeout(timeout);
};

chat.client.logout = function (chatUser) {
    timeout = setTimeout(function () { removeUser(chatUser.Id); }, 3000);
}; 
```

但是我很难处理多用户场景......因为如果多个用户在超时运行之前执行集线器 onDisconnected ，则第二个用户将覆盖第一个用户的实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-17T19:50:13.027

确实没有真正的解决方法。客户端在离开页面时总是会断开连接，并在加载下一页时再次连接到 SignalR。

解决此问题的唯一方法是创建一个 SPA，因此 SignalR 不需要通过导航来断开连接。

使用 SignalR 集线器的想法是允许以最少的编程或复杂性进行实时操作 - 最好的方法是 SignalR 从当前登录的用户列表中提取，而不是活动连接，因为这可能有多个相同的用户次。

因此，我建议，而不是`OnConnected`and `OnDisconnected`，把它放在你的`AccountController`, 在`LogIn`and`LogOut`方法中。例如：

```
public ActionResult LogIn()
{
    //other stuff
    var hub = GlobalHost.ConnectionManager.GetHubContext</*Hub Title*/>();
    hub.client.chat.login()
}

public ActionResult LogOut()
{
    // other stuff
    var hub = GlobalHost.ConnectionManager.GetHubContext</*Hub Title*/>();
    hub.client.chat.logout()
} 
```

# c# - C# 无法在 IEnumerable 中设置属性

> ID：15294499
> 
> 赞同：7
> 
> 时间：2013-03-08T12:55:59.357
> 
> 标签：c#, .net, linq

在一些我无法解释的 C# 代码中看到了一些奇怪的行为。可能是我缺少重要的理解，所以希望有人可以为我打开灯。

得到一个如下所示的代码块：

```
 IEnumberable<myObject> objects = GetObjectsFromApiCall();

    for (int i = 0; i < objects.Count(); i++)
        {
            if (String.IsNullOrEmpty(objects.ElementAt(i).SubObject.Title))
            {
                SubObject sub = GetSubObjectFromDatabase((long)objects.ElementAt(i).SubObject.Id);
                if (sub != null)
                {
                    objects.ElementAt(i).SubObject.Title = sub.Title;
                }
            }
        } 
```

当您逐步完成它时，有关此代码的所有内容似乎都可以正常工作。“对象”集合按预期填充。“sub”是按收集的方式获取的，并具有一整套预期的属性，包括填充的 Title 属性。执行过程中不会抛出任何错误。

但是......每个 Object 中存在的 SubObject.Title 属性（只有标准的 get；set；代码）顽固地保持为空。

我不知所措。任何人解释发生了什么？

编辑：对于那些建议我不应该使用 for 循环和 ElementAt 的人，我从 foreach 循环开始，但认为它可能是问题的根源，因为它每次都在获取一个新的 SubObject。现在已修复，感谢您的帮助，ForEach 已恢复。

干杯，马特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T13:02:33.393

我会这样修复它：

```
var objects = GetObjectsFromApiCall().ToList(); 
```

然后您可以保持循环原样（它有效），或者按照其他答案的建议使用 foreach 和一些 Linq 对其进行一些优化，但这并不重要：问题是您试图更改 IEnumerator< > 正如@Ahmet Kakıcı 指出的[这个问题所解释的那样。](https://stackoverflow.com/a/9104212/93732)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T13:06:06.307

试试这个

```
List<myObject> objects = GetObjectsFromApiCall().ToList();

foreach(var obj in objects.Where(o => string.IsNullOrEmpty(objects.SubObject.Title)).ToList())
{
    var subObject = GetSubObjectFromDatabase(obj.SubObject.Id);
    if(subObject == null) continue;

    obj.SubObject.Title = subObject.Title;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T13:01:07.457

首先，你不应该使用`ElementAt()`这种代码，使用

```
foreach (var o in objects)
{
    if (string.IsNullOrEmpty(o.SubObject.Title))
    {
        o.SubObject.Title = ...;
    }
} 
```

您还应该注意，如果您的方法返回一个动态的`IEnumerable`，那么每次您调用`objects.Something()`API 时都会再次调用该 API 并检索一个新副本。如果是这种情况，您应该使用方法将枚举复制到列表中`.ToList()`。

还有一种不将副本放入列表的方法 - 通过创建一个动态枚举器，如下所示：

```
objects = objects.Select(o =>
{
    if (string.IsNullOrEmpty(o.SubObject.Title))
    {
        o.SubObject.Title = ...;
    }
    return o;
}); 
```

至于未正确设置的值（如果以前的事情没有帮助） - 尝试`throw new Exception(value)`在属性的设置器中添加 a `Title`- 看看是否使用正确的值调用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T13:28:36.147

我来宾函数 GetObjectsFromApiCall 如下所示：

```
public IEnumberable<myObject> GetObjectsFromApiCall(){
    for(var i = 0; i < 10; i++)
    {
         yield return new myObject();
    }
} 
```

如果我是对的，每次调用 objects.ElementAt(i) 函数获取对象时，都会通过“ `yield return new myObject()`”获取一个新对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-08T15:00:12.250

但是如何检查`Title`属性是否更改？你再打电话`GetObjectsFromApiCall()`吗？还是您再次`foreach`通过相同的`objects`实例？

`IEnumerable`每次“枚举”实例时，它都可能创建并产生新对象。所以这里有一个简单的例子来说明。例如，定义：

```
class SomeObject
{
    public string Title { get; set; }
} 
```

然后我们将考虑两种类型的“源”，首先是一个数组，然后是一个迭代器块，定义如下：

```
 static IEnumerable<SomeObject> GetSomeSequence()
  {
      yield return new SomeObject { Title = "Alpha", };
      yield return new SomeObject { Title = "Beta", };
      yield return new SomeObject { Title = "Gamma", };
  } 
```

然后以这种方式测试它：

```
 static void Main()
  {
      IEnumerable<SomeObject> thingsToModify;

      // set source to an array
      thingsToModify = new[] { new SomeObject { Title = "Alpha", }, new SomeObject { Title = "Beta", }, new SomeObject { Title = "Gamma", }, };

      foreach (var t in thingsToModify)
          Console.WriteLine(t.Title);

      foreach (var t in thingsToModify)
          t.Title = "Changed!";

      foreach (var t in thingsToModify)
          Console.WriteLine(t.Title);    // OK, modified

      // set source to something which yields new object each time a new GetEnumerator() call is made
      thingsToModify = GetSomeSequence();

      foreach (var t in thingsToModify)
          Console.WriteLine(t.Title);

      foreach (var t in thingsToModify)
          t.Title = "Changed!";          // no-one keeps these modified objects

      foreach (var t in thingsToModify)
          Console.WriteLine(t.Title);    // new objects, titles not modified

  } 
```

结论：完全可以修改属于我们正在迭代的源的可变对象的状态。但是某些类型的`IEnumerable`源每次调用时都会产生数据的新副本，然后对副本进行修改是没有用的。

# javascript - 如何将模拟服务注入到过滤器的单元测试中？

> ID：15294500
> 
> 赞同：9
> 
> 时间：2013-03-08T12:56:02.167
> 
> 标签：javascript, unit-testing, angularjs, mocking

我有一个简单的 angularjs 过滤器（它需要一个 id 并将其转换为一个名称字符串），这取决于一个自定义服务来完成它的工作：

```
angular.module('app').filter('idToName',
  function(User) {
    return function(id) {
      var result, user;
      result = '';
      if (id) {
        result = 'no name found';
        user = User.getById(id);
        if (user) {
          result = user.firstName;
        }
      }
      return result;
    };
  }
); 
```

我想为它写一个单元测试。我希望能够将用户服务的模拟注入到测试中。

我可以为控制器单元测试执行此操作，如文档中所示：

```
var mockUserService;

mockUserService = {
  getById: function(id) {
    return {
      firstName: 'Bob'
    };
  }
};

beforeEach(inject(function($rootScope, $controller) {
  var ctrl, scope, userService;
  userService = mockUserService;
  scope = $rootScope.$new();
  return ctrl = $controller('someController', {
    $scope: scope,
    User: userService
  });
})); 
```

但是在 beforeEach 中用 $filter 替换 $controller 不起作用，因为我认为过滤器的构造方式不同（即不允许您将本地变量作为构造函数的第二个参数注入。）

有没有人遇到过这个/解决过这个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-09T00:01:05.397

好的，主要归功于 [这个](https://stackoverflow.com/a/14569298/1796763)答案。

诀窍是通过在每个之前使用 angular-mocks.js 模型函数来简单地覆盖服务的工厂提供者（角度只是采用它看起来的最后定义的工厂）

```
beforeEach(module(function($provide) {
  $provide.factory('User', function() {
    var getSync;
    getById = function(id) {
      return {
        firstName: 'Bob'
      };
    };
    return {
      getById: getById
    };
  });
})); 
```

我怀疑我需要小心在测试之间进行拆卸，但是现在注入过滤器可以正常工作。

# delphi - 如何计算字符串中某个字符的出现次数？

> ID：15294501
> 
> 赞同：23
> 
> 时间：2013-03-08T12:56:04.420
> 
> 标签：delphi, delphi-xe2, delphi-2010

Delphi中如何计算字符串中某个字符的出现次数？

例如，假设我有以下字符串并想计算其中的逗号数：

```
S := '1,2,3'; 
```

然后我想得到`2`结果。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-08T12:57:34.430

您可以使用这个简单的功能：

```
function OccurrencesOfChar(const S: string; const C: char): integer;
var
  i: Integer;
begin
  result := 0;
  for i := 1 to Length(S) do
    if S[i] = C then
      inc(result);
end; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-08T16:15:11.713

尽管已经接受了答案，但我还是在下面发布了更通用的功能，因为我觉得它非常优雅。此解决方案用于计算字符串而不是字符的出现次数。

```
{ Returns a count of the number of occurences of SubText in Text }
function CountOccurences( const SubText: string;
                          const Text: string): Integer;
begin
  Result := Pos(SubText, Text); 
  if Result > 0 then
    Result := (Length(Text) - Length(StringReplace(Text, SubText, '', [rfReplaceAll]))) div  Length(subtext);
end;  { CountOccurences } 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-03-08T14:02:32.233

对于那些更喜欢现代 Delphi 版本中的枚举器循环的人（并不比 Andreas 接受的解决方案更好，只是一种替代解决方案）：

```
function OccurrencesOfChar(const ContentString: string;
  const CharToCount: char): integer;
var
  C: Char;
begin
  result := 0;
  for C in ContentString do
    if C = CharToCount then
      Inc(result);
end; 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-03-08T14:52:01.453

如果您不处理大文本，这个可以完成工作

...

```
uses RegularExpressions; 
```

...

```
function CountChar(const s: string; const c: char): integer;
begin
 Result:= TRegEx.Matches(s, c).Count
end; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-03T18:56:40.677

您可以将 StringReplace 函数的优势用作：

```
function OccurencesOfChar(ContentString:string; CharToCount:char):integer;
begin
   Result:= Length(ContentString)-Length(StringReplace(ContentString, CharToCount,'', [rfReplaceAll, rfIgnoreCase]));
end; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-10T08:26:31.060

简单的解决方案和良好的性能（我为 Delphi 7 编写，但也适用于其他版本）：

```
function CountOccurences(const ASubString: string; const AString: string): Integer;
var
  iOffset: Integer;
  iSubStrLen: Integer;
begin
  Result := 0;

  if (ASubString = '') or (AString = '') then
    Exit;

  iOffset := 1;
  iSubStrLen := Length(ASubString);
  while (True) do
  begin
    iOffset := PosEx(ASubString, AString, iOffset);
    if (iOffset = 0) then
      Break;
    Inc(Result);
    Inc(iOffset, iSubStrLen);
  end;
end; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-10T12:56:22.157

嗯...我错过了什么吗？为什么不只是...

```
 kSepChar:=',';//to count commas
      bLen:=length(sLineToCheck);
      bCount:=0;//The numer of kSepChars seen so far.
      bPosn:=1;//First character in string is at position 1
      for bPosn:=1 to bLen do begin
         if sLineToCheck[bPosn]=kSepChar then inc(bCount);
         end;// 
```

# joomla - Joomla 1.5 和 PHP 5.3

> ID：15294502
> 
> 赞同：0
> 
> 时间：2013-03-08T12:56:06.417
> 
> 标签：joomla, joomla1.5, php-5.3

我有一个使用 Joomla 1.5 并在 php 5.3 中运行的网站。它使用 PHP 5.2 版本运行，但托管公司现在更新到 PHP 5.3 。所以 Joomla 正在用它制造问题：

*   我无法从管理员端访问菜单和模块。

我曾尝试迁移到 Joomla 2.5 但由于该站点安装了许多第三方扩展，因此迁移并不容易。那么是否有任何补丁或东西可以帮助我在 PHP 5.3 上运行 Joomla 1.5 并在以后进行迁移？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T13:10:05.283

更新 Joomla 到 1.5.26，早于 1.5.16 的 Joomla 版本不兼容 PHP 5.3+

# c - 无法在 C 中为“const char * const *my_array”赋值

> ID：15294503
> 
> 赞同：1
> 
> 时间：2013-03-08T12:56:08.173
> 
> 标签：c, multidimensional-array, constants

Bellow是我的C代码：

```
const char *l = "some text";
const char * const *m = {l}; 
```

当我尝试编译该代码时，我收到以下警告：

> 警告：从不兼容的指针类型初始化

谁能解释我为什么会出现这个警告以及我应该如何初始化第二个变量（`m`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T13:05:03.913

实际上，您没有以`const`正确的方式使用关键字。`const`适用于它遇到的第一个左标记，如果没有，则适用于第一个右标记。

所以，在你的情况下：

```
const char * const *m; 
```

第一个`const`适用于`char`，就像 for 一样`l`。第二个适用于您的第一个`*`，这意味着 m 是指向常量指针的指针，该指针指向常量内容（​​“某些文本”）。既然你没有写

```
const char * const l; 
```

您的两个指针的 const-ness 存在冲突，因此会发出警告。

我认为您想要的是保证存储的地址`l`不会被程序更改。如果是这样，那么您必须将声明更改`l`为这个：

```
const char * const l = "some text"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T13:01:48.387

为什么不使用

```
const char* m[] = {l}; 
```

我认为这应该有效。

我想你实际上打算`m`长一个以上的元素，否则你不会做这么复杂的事情，对吧？

# ios - 没有收到 Paypal ExpressCheckOut

> ID：15294505
> 
> 赞同：0
> 
> 时间：2013-03-08T12:56:08.890
> 
> 标签：ios, objective-c, paypal, iphone-5

在我的项目中，我使用了 PayWith PayPal 方法。
在那我使用了Pay With PayPal Button。单击该按钮，它将引导我登录 Paypal。

登录后，立即付款按钮出现，单击该付款将成功。
它工作正常。

我的问题是，
我想先添加 CheckExpress 按钮而不是使用 Paypal 按钮付款，
并且希望在单击该按钮而不是立即付款按钮后获得继续按钮。

该怎么办 ？

我使用了比萨演示。

与任何库相关的任何链接或与该 checkExpress 按钮相关的任何内容都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:32:20.063

您可以使用变量“useraction=commit”来解决此问题。此变量将 PayPal 页面上的按钮从“继续”更改为“立即付款”。买家返回您的站点后，您仍然需要调用 GetExpressCheckoutDetails 和 DoExpressCheckoutPayment。

“useraction=commit”的目的是让您在买家返回时立即自动完成交易，而不是为他们提供更多的确认屏幕。您可以在不需要执行诸如根据从 GetExpressCheckoutDetails 返回的地址计算运费之类的操作的情况下执行此操作，并且您确定原始付款金额是最终金额。

因此，根据您想要的效果，您可以传递变量“useraction”并将其设置为“commit”，或者根本不传递变量。

# database-design - 文档与列式数据库的场景

> ID：15294507
> 
> 赞同：5
> 
> 时间：2013-03-08T12:56:16.650
> 
> 标签：database-design, nosql, document-database

NoSQL 数据库可以分为 KV、Document、Columnar 和 Graph。我一直在试图弄清楚将哪种 NoSQL 用于不同的场景，阅读了几篇博客/文章，但仍然感到困惑。

假设我想存储员工详细信息。它可以存储在像 HBase 这样的列式数据库和像 Mongo 这样的文档数据库中。那么，Columnar vs Document 的场景是什么？我想根据查询模式，必须选择适当的数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T19:27:28.523

就像 Ryan 提到的，对数据的访问模式与它有很大关系。由于 Ryan 涵盖了 MongoDB 方面（我对此知之甚少），因此我将试一试 Hbase 方面。

对于初学者，我建议您阅读[BigTable 论文](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en/us/archive/bigtable-osdi06.pdf)，因为 Hbase 深受其设计的影响。该视频还对[Hbase 的设计元素](http://www.youtube.com/watch?v=cT2scX_XY7E)有一些很好的细节。另外，如果您对 Zookeeper 更感兴趣，请尝试阅读[Chubby Paper](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en/us/archive/chubby-osdi06.pdf)。

**Hbase 需要考虑的事项：**

索引行：在 Hbase（或[Cassandra 使用 Ordered Partitioner](http://www.datastax.com/docs/1.0/cluster_architecture/partitioning)）中“索引”行的方式是福是祸。我相信，mongoDb 使用 B+Tree（如果我错了，请纠正我），其中 Hbase 只是按顺序存储行。这种方法适用于 map-reduce 作业和顺序读取。对于 map-reduce 作业，它意味着运行作业的区域服务器的数据本地性。它通过允许磁盘控制器在执行密钥“扫描”时读取磁盘上的顺序扇区来帮助顺序读取。诅咒是数据按顺序存储......所以如果你没有很好地设计你的行，你最终会有“热”节点。例如，如果您简单地将时间戳用作行键，则最终可能会导致一个节点负责所有写入，而您的其他节点则处于空闲状态。所以，[在 Hbase 中设计行键非常重要](http://hbase.apache.org/book/rowkey.design.html)。这个[关于 OpenTSDB 的视频](http://www.youtube.com/watch?v=WlsyqhrhRZA)详细介绍了他们如何使用 HBase。

列式数据库的另一个优点是它们可以使用列压缩而不是行压缩。通常，一列的熵远低于一行的熵。所以它使压缩更有效。例如，如果您的列存储了 UserAgent、URL、关键字……它们的压缩效果会非常好。

**示例 Hbase 解决方案：** 假设您想创建一个用于跟踪电子商务网站上的访问者数据的解决方案，并要求支持任何日期范围内的聚合。因为 Hbase 在磁盘上以顺序方式存储密钥，所以如果您的密钥设计得好，Hbase 可能会为您提供更好的性能来创建实时顺序扫描。

对于此示例，假设我们使用以下关键模式（ {product-category}.{sub-category}.{metric}.{timestamp-rounded-to-the-minute} ）存储了大量有关访问者的指标。例如：单页访问可能会写入以下键：shoes.running.search-terms.1362818100、shoes.running.user-agents.1362818100、shoes.running.visitors-country.1362818100、... SideNote: all这些键基本上是连续的，很可能会写入单个区域服务器，您可能希望将这些写入分布到多台机器上。一种解决方案是将密钥的 {product-category}.{sub-category} 部分替换为 HashOf( {product-category}.{sub-category} )。或者像 OpenTSDB 那样使用密钥查找。

因此，通过这种关键设计，可以快速运行这些指标的临时/实时查询。例如，要查询在 1331666259（2012 年 3 月 13 日星期二）到 1334344659（2012 年 4 月 13 日星期五）之间使用的所有搜索词，您可以对 ( *shoes.running.search-terms.1331666259* ) 发出扫描到*shoes.running .search-terms.1334344659* )

编辑：我修正了几个错别字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T22:02:33.823

我冒昧地回答一下。我在文档和 Mongo 方面有相当多的经验，但对列式数据库没有经验。

**深度与平面**

我的第一个建议是文档可以具有嵌套的子文档，并且列式数据库可能是严格的平面记录。

但是在阅读了这篇文章之后：[http](http://wiki.apache.org/cassandra/DataModel) ://wiki.apache.org/cassandra/DataModel ，似乎一些列式数据库也可以对记录有深度。

事实上，如果您阅读有关 Cassandra 的页面，您会发现它们通常将概念记录表示为 JSON。所以从这个意义上说，数据建模之间似乎没有区别——至少从概念的角度来看是这样。

**同质与异质**

另一个巨大的潜在差异是一个集合/表中的同质数据模型与异构数据模型。

Mongo 允许您将具有不同模式的文档存储在数据库的同一集合中。

据我所知，对于 HBase，每一行都必须具有相同的表模式。从列族部分（[http://wiki.apache.org/hadoop/Hbase/DataModel](http://wiki.apache.org/hadoop/Hbase/DataModel)）：

“这些族是表模式的一部分，并且对于每一行都保持不变；行与行的不同之处在于列键可能非常稀疏。”

如果我对 HBase 有误，也许有人可以纠正我。

# android - Howto Android 单元测试 PreferenceActivity 及其上下文

> ID：15294508
> 
> 赞同：3
> 
> 时间：2013-03-08T12:56:21.503
> 
> 标签：android

如何在以下类中设置上下文：

```
public class SettingsActivity extends PreferenceActivity implements OnSharedPreferenceChangeListener 
...
@Override
protected void onPostCreate(Bundle savedInstanceState) {
    super.onPostCreate(savedInstanceState);
... 
```

在 Android 中进行单元测试时使用：

```
public class ReceiveSMSMonitorTest extends AndroidTestCase {
...
SettingsActivity settings = new SettingsActivity();    <-----
... 
```

没有构造函数可以使用 getContext() 在上下文中发送。在不修改原始类的情况下是否有另一种方法？我喜欢使用上下文来获取和检查 SharedPreferences。

谢谢！

# search - Monotouch.Dialog：EnableSearch 和自定义 RootElement 崩溃

> ID：15294509
> 
> 赞同：0
> 
> 时间：2013-03-08T12:56:23.903
> 
> 标签：search, crash, monotouch.dialog

我使用 Monotouch.Dialog（Xamarin.iOS 版本：6.2.0.65）创建一个带有 RadioElements 的 RadioGroup。我只想要第二个屏幕中的“搜索”功能（用户从长列表中选择），所以我创建了一个单独的 DialogViewController，我在其中启用了搜索过滤器（enableSearch = true）。

在搜索框中键入时，应用程序在 RadioElement 的 GetCell 方法中崩溃。

Element.cs 的第 1064 行上的“对象引用未设置为对象的实例”。我有 GC 问题吗？我设法在一个小应用程序中模拟它......不要注意一些奇怪的领域成员，那是我测试我是否开始GC......

```
using MonoTouch.Dialog;
using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace SearchCrash
{
// The UIApplicationDelegate for the application. This class is responsible for launching the 
// User Interface of the application, as well as listening (and optionally responding) to 
// application events from iOS.
[Register ("AppDelegate")]
public partial class AppDelegate : UIApplicationDelegate
{
    // class-level declarations
    UIWindow window;
    public UINavigationController NavigationController { get; set; }

    //
    // This method is invoked when the application has loaded and is ready to run. In this 
    // method you should instantiate the window, load the UI into it and then make the window
    // visible.
    //
    // You have 17 seconds to return from this method, or iOS will terminate your application.
    //
    public override bool FinishedLaunching(UIApplication app, NSDictionary options)
    {
        window = new UIWindow(UIScreen.MainScreen.Bounds);
        this.NavigationController = new UINavigationController();
        this.NavigationController.PushViewController(new FirstViewController(this.NavigationController), true);
        window.RootViewController = this.NavigationController;
        window.MakeKeyAndVisible();

        return true;
    }
}

public class FirstViewController : DialogViewController
{
    private UINavigationController controller;
    private LocatiesRootElement locRootElement;
    private RadioGroup radioGroup;

    public FirstViewController(UINavigationController c) : base(new RootElement("Test"), true)
    {
        this.controller = c;
    }

    public override void ViewDidLoad()
    {
        Section section = new Section();
        radioGroup = new RadioGroup(0);
        locRootElement = new LocatiesRootElement("test", radioGroup, this.controller);
        section.Add(locRootElement);
        Root.Add(section);
    }
}

public class LocatiesRootElement : RootElement
{
    private UINavigationController navigationController;
    private LocatiesViewController locatiesViewController;

    public LocatiesRootElement(string selectedLocatie, RadioGroup group, UINavigationController controller) : base("Locatie", group)
    {
        this.navigationController = controller;
        this.locatiesViewController = new LocatiesViewController(this);
    }

    public override void Selected(DialogViewController dvc, UITableView tableView, NSIndexPath path)
    {
        this.navigationController.PushViewController(this.locatiesViewController, true);
    }
}

public class LocatiesViewController : DialogViewController
{
    public LocatiesViewController(LocatiesRootElement root) : base(root, true)
    {
        this.EnableSearch = true;
    }

    public override void ViewDidLoad()
    {
        base.ViewDidLoad();

        Section sectionList = new Section();

        RadioElement radioElement1 = new RadioElement("item 1");
        RadioElement radioElement2 = new RadioElement("item 2");
        sectionList.Add(radioElement1);
        sectionList.Add(radioElement2);

        Root.Add(sectionList);
    }           
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:36:49.447

在实例化`DialogViewController`.

像这样 ：

```
public LocatiesRootElement(string selectedLocatie, RadioGroup group, UINavigationController controller) : base("Locatie", group)
    {
        this.navigationController = controller;
        this.locatiesViewController = new LocatiesViewController(this);
        this.locatiesViewController.EnableSearch = true;
    } 
```

希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-28T15:58:26.770

此处的错误报告包括针对您遇到的问题的根本原因的解决方法，但还讨论了过滤将如何导致即使在应用过滤器后将第 n 个元素标记为选中的可用性问题。

[https://github.com/migueldeicaza/MonoTouch.Dialog/issues/203](https://github.com/migueldeicaza/MonoTouch.Dialog/issues/203)

如果您不想更新核心 MTD 代码，您可以通过将其放入您自己的 UIBarSearchDelegate 来使用相同的技术。不幸的是，默认的 SearchDelegate 类是内部的，因此您需要在委托中添加所有代码。我能够做到这一点并让它在不更改 MTD 源的情况下工作：

```
 public override void LoadView()
    {
        base.LoadView();
        ((UISearchBar)TableView.TableHeaderView).Delegate = new MySearchBarDelegate(this);
    } 
```

然后你使用它而不是基本方法：

```
public override void TextChanged (UISearchBar searchBar, string searchText)
{
    container.PerformFilter (searchText ?? "");
    foreach (var s in container.Root)
        s.Parent = container.Root;
} 
```

# asp.net-mvc-3 - MVC 3 - 实体框架 - 从 ajax 调用的部分视图发布数据

> ID：15294517
> 
> 赞同：0
> 
> 时间：2013-03-08T12:56:41.823
> 
> 标签：asp.net-mvc-3, entity-framework-4, asp.net-ajax, partial-views

我在从具有可更新内容的视图中绑定复杂模型时遇到问题，首先，实体：

```
public partial class Diagnosis
{
    public Diagnosis()
    {
        this.DiagZones = new HashSet<DiagZone>();
        ...
    }

    public int diagnosisid { get; set; }
    public int playerid { get; set; }
    public int userid { get; set; }
    ...

    public virtual ICollection<DiagZone> DiagZones { get; set; }
} 
```

我的`DiagZones`集合是中间表`Diagnosis`，`Zones`但它存在于我的模型中，因为它的字段比 id 的多。

我有一个 Select 控件，您可以在其中选择和取消选择`Zones`，当`onchange`触发时，I Get a Partial View with a ajax call。

编码：

编辑诊断.cshtml

```
@model Gfire.Models.DiagnosisViewModel

<h2>
    @ViewBag.playername</h2>
@using (Html.BeginForm("EditDiagnosis", "Diagnosis", FormMethod.Post))
{    
    @Html.HiddenFor(d => d.Diagnosis.diagnosisid)   
    <table>
           ...
    </table>
    <table>
        <tr>
            <td>
                Zones:
            </td>
            <td>
                @Html.ListBoxFor(d => d.SelectedZones, new SelectList(Model.Zones, "zoneid", "description"), new
          {
              style = "width:305px;",
              onchange = "QualityMovement(this);",
              id = "lbZone",
              @class = "chzn-select"
          })
            </td>
            <td>
                ...
            </td>
        </tr>

    </table>

    <div id="qualitymovement">
        @Html.Partial("_QualityMovement", Model.Diagnosis.DiagZones)
    </div>

    <div>
        <input type="submit" value="Save" />
        &nbsp | &nbsp @Html.ActionLink("Cancel", "IndexDiagnosisPlayer", new { playerid = ViewBag.playerid })
    </div>
} 
```

局部视图 (_QualityMovement.cshtml)：

```
@model List<Gfire.Domain.Entities.Diagnosis.DiagZone>

@if (Model.Count() != 0)
{
    <table>
        @foreach (var dz in Model)
        {
            <tr>
                <tr>
                    <td>
                        Flex:
                    </td>
                    <td>
                        @Html.TextBoxFor(d => dz.flex))
                    </td>
                </tr>
            </tr>

        }
    </table>
} 
```

`Ajax.Get`来电：

```
<script type="text/javascript" language="javascript">

    function JointBalance(item) {
    ...
        $.ajax({
            url: '@Url.Action("GetJointBalances", "Diagnosis")',
            data: arrayToParamObject('zonesid', items),
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                // Successful requests get here
                $("#jointbalance").html(data);

                $("#jointbalance").fadeIn('slow');
            },
            type: "GET",
            datatype: "json"
        });
    ...
    }
</script> 
```

在服务器中，我有一个方法可以初始化新列表`DiagZones`并正确更新`EditView.cshtml`.

当我尝试提交`Diagnosis`包含所有字段和 DiagZones 列表的完整对象时出现问题，但我的方法是：

```
[HttpPost]
public ActionResult EditDiagnosis(DiagnosisViewModel DiagnosisViewModel)
{
    if (ModelState.IsValid)
    {
        // Save the model
        ...

        return RedirectToAction("IndexDiagnosisPlayer", new { playerid = SessionHelper.Player.playerid });
    }
    else 
    {
        return View("EditDiagnosis", new { diagnosisid = DiagnosisViewModel.diagnosisid });
    }
} 
```

我的模型已清空`DiagnosisViewModel.DiagZones`列表。

我尝试使用 EditorFor，将完整模型传递给部分视图，添加几个表单......但它没用，我怎样才能将该列表绑定到我的模型？

提前致谢。

**更新**

这是服务器端操作所期望的：

```
[HttpGet]
public ActionResult GetJointBalances(int[] zonesid) { ... } 
```

GET ajax 请求数据如下所示：

```
Request URL:http://localhost/Gfire.WebUI/Diagnosis/GetQualityMovement?zonesid=47
Request Method:GET
Status Code:200 OK
Request Headersview source
...
Connection:keep-alive
Content-Type:application/json; charset=utf-8
...
Referer:http://localhost/Gfire.WebUI/Diagnosis/EditDiagnosis?diagnosisid=0&playerid=23
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.152 Safari/537.22
X-Requested-With:XMLHttpRequest
Query String Parametersview sourceview URL encoded
zonesid:47 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:32:10.970

我找到了一个暂时的解决方案，当然不是最好的，但我认为这将有助于理解我想要做什么以及如何解决这个问题。正如贾斯汀所说，问题在于`list<DiagZones>`将主模型绑定到`Diagnosis`对象，遵循以下帖子：

*   [ASP.Net MVC4 将“创建视图”绑定到包含列表的模型](https://stackoverflow.com/questions/12974957/asp-net-mvc4-bind-a-create-view-to-a-model-that-contains-list)

我了解一点绑定功能，考虑到这一点，我编写了新的 PartialView `_QualityMovement.cshtml`：

@model 列表

```
@if (Model.Count() != 0)
{
    <table>
        @foreach (var dz in Model)
        {
            <tr>
                <tr>
                    <td>
                        Flex:
                    </td>
                    <td>
                        Html.TextBox("Diagnosis.DiagZones[" + i + "].ext", Model[i].ext)
                    </td>
                </tr>
            </tr>

        }
    </table>
} 
```

这是一个糟糕的解决方案，但至少我将模型绑定在服务器端。问题是实体框架对我的实体进行了抽象，作为 ICollection，所以我不能作为 List 进行迭代，发现自己到处都在“铸造”。

我想更好的方法应该是使用 CustomBinder 来检索请求中的数据或以更简洁易懂的方式键入它。

感谢`Justin`您给我的所有帮助。

# sockets - 我可以测试文件描述符是否属于 read() 的正确类型吗？

> ID：15294518
> 
> 赞同：2
> 
> 时间：2013-03-08T12:56:47.410
> 
> 标签：sockets, unix, posix, xsi

有很多 fd 无法读取（例如，侦听套接字）。如何测试`read`fd 上的 (2) 是否会返回`EINVAL`，而不会冒险取出数据？

### 不起作用的事情：

1.  我们可以`read()`使用传递的零字节缓冲区来做 a。但这被排除在外：

    > `read()`允许但不要求实现对零字节请求执行错误检查。[从 POSIX 1003.1-2008]

2.  我们可能很想调用`select()`描述符。不幸的是，`select()`可读集的语义非常重载，因此会告诉 fd 是“可读的”，而实际上调用它是错误的`read()`（例如，侦听套接字将被标记为“可读”但需要`accept()`，不`read()`，和还有其他不可移植的示例，例如 event 或 kqueue fds)。

3.  （某种工作）阅读您编译的每个平台的手册页，使用特定的系统调用测试 fd，以生成大致如下所示的函数：

    ```
    int isReadable(int fd)
    { return isActiveSocket(fd) || isFifo(fd) || isRegFile(fd) ||
               isEventFd(fd) || ... /* more pain */ } 
    ```

4.  （某种作品）请注意，`read()`对于 fd 是否是系统调用的正确类型，它本身并不一定会给您一个很好的答案！令人惊讶的是，`EINVAL`在 POSIX 中未指定`read()`（STREAMS 除外），但在 linux 上提供给您（“EINVAL：fd 附加到一个不适合读取的对象”）并且在 BSD 上相当神秘（“EINVAL：与[fd] 是否定的。”）。

### 场景

有人启动了您的应用程序，您想知道值为 0 的 fd 是否是伪造的（例如侦听套接字），或者是否有可能从中读取。你不想尝试实际`read()`的 a) 因为那会阻塞，b) 因为在取出数据后你不能把它塞回去。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T13:40:10.427

不，您自己引用了规范的相关部分。

实际上，由于多种原因，读取可能随时失败。测试“将读取成功”，然后是`read`，仅引入了竞争条件 - 两次调用之间的情况可能会发生变化。

您需要以适当处理失败读取的方式编写应用程序。如果这样做，您通常不需要事先关心测试，并且可以简单地用于`select`确定数据何时（可能）可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-02T16:10:21.360

您是否有理由不能将 fcntl 与 F_GETXFL 选项一起使用？

```
int isread(int fd)
{
   int o_accmode=0;
   int rc=fcntl(fd, F_GETXFL, &o_accmode);
   if(rc == -1 )
       return rc;
   rc=(o_accmode & O_ACCMODE);
   return (rc==O_RDONLY || rc==RDWR);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T02:16:56.797

假设您可以调用 recv() 而不是 read() （它们通常可用于套接字），您可以在 flags 参数中提供 MSG_PEEK 并且 recv() 调用将照常运行，只是它实际上不会删除来自套接字内部缓冲区的任何字节。您可以使用它来捕获错误，而无需更改套接字的内部状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T21:09:40.267

可能最简单的是使用`select`：

```
int
is_valid_descriptor( int fd )
{
  fd_set rd;
  struct timeval t = { 0, 0 };
  FD_ZERO( &rd );
  FD_SET( fd, &rd );
  return -1 != select( fd + 1, &rd, NULL, NULL, &t );
} 
```

请注意，这并不表示读取是否会阻塞（不清楚您所说的“成功”是什么意思）。

# javascript - 使用 jquery dropkick 插件加载不同类型的页面的奇怪问题

> ID：15294523
> 
> 赞同：1
> 
> 时间：2013-03-08T12:57:07.300
> 
> 标签：javascript, jquery

我正在使用一个名为 dropkick 的 jQuery 插件来使我的选择框看起来更好。

在页面加载时，我执行 ajax 请求以从我的数据库中检索数据并用它填充表单。

一旦我填充了这个表单，我调用`$.dropkick('reset');`它将更新 dropkick 元素以表示表单数据。

如果我使用 F5 进行页面刷新，这可以正常工作，但是如果我通过转到 url 栏并按 Enter 进行刷新，那么有效地加载新页面我会收到一个错误，说 $.dropkick 不是函数。所以就好像当时还没有加载 dropkick 插件。

问题是，当 ajax 请求返回时，它在刷新而不是新页面加载后的工作方式似乎很奇怪。

加载插件的脚本标签首先是 dom 中的所有 ajax 代码，我使用的是 firefox 19.0.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:19:16.183

您可以在使用 typeof 调用它之前检查是否定义了 dropkick，如果没有 - 通过 $.getScript 收集它，这将加载它以在回调中使用，

```
$(document).ready(function() {
    if ( typeof dropkick == "undefined" ) {
      $.getScript("js/dropkick.js", function(){
         $.dropkick('reset');  
         //.. More code
      });
    } 
}); 
```

# ruby - 为什么 HAML 代码通常使用 Ruby 符号（:http_equiv、:content）而不是纯字符串（“http_equiv”、“content”）？

> ID：15294529
> 
> 赞同：0
> 
> 时间：2013-03-08T12:57:18.490
> 
> 标签：ruby, haml

HAML 代码通常使用符号，如下所示：

```
%meta{:http_equiv=>"Content-Type", :content=>"text/html; charset=utf-8"} 
```

但是为什么不是这样，而是使用字符串呢？

```
%meta{"http_equiv"=>"Content-Type", "content"=>"text/html; charset=utf-8"} 
```

两者都工作正常。

HAML 程序员在使用符号而不是字符串时看到了什么真正的好处？我不明白。我的猜测是 HAML 只是从符号中解析字符串，那有什么意义呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:41:48.090

您在其中引用的结构是映射，而 ruby​​ 标准是使用符号作为键而不是字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:17:35.787

您在这里指的结构：`{:http_equiv=>"Content-Type", :content=>"text/html; charset=utf-8"}`是一个哈希。以下是对“为什么 Ruby 在哈希中使用符号作为键？”这个问题的一些非常好的答案。

[为什么在 Ruby 中使用符号作为哈希键？](https://stackoverflow.com/questions/8189416/why-use-symbols-as-hash-keys-in-ruby)

# php - TideSDK Desktop：如何使用 PHP 会话创建登录系统？

> ID：15294535
> 
> 赞同：0
> 
> 时间：2013-03-08T12:57:45.520
> 
> 标签：php, session, desktop, tidesdk

我想使用 TideSDK 在我的桌面应用程序中创建一个登录系统。我曾尝试使用 PHP 会话，但是当我运行应用程序并单击指向另一个页面的某个链接时，我设置的会话消失了。但是，如果我在 Web 浏览器上运行，它可以正常工作。

我试图搜索，但我找不到一些与我的问题有关的问题。

我想知道如何在 TideSDK Desktop 中处理 PHP 会话，或者是否有其他方法可以创建身份验证系统？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:48:35.933

不是 100% 确定你想做什么，但是要保留一些信息，比如会话，你最好使用 SQLite DB 的 Ti.Properties 或 localStore。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T05:54:19.600

我解决问题的方式如下：

在 PHP 方面：

```
public function login($email_address, $password) {
    $email_address = filter_var($email_address, FILTER_VALIDATE_EMAIL);
    $password = filter_var($password, FILTER_SANITIZE_STRING);

    if (is_valid_login($email_address, $password)) {
        return json_encode( array('status' => 'Logged in', 'session_id' => session_id()) );
    } 
    return json_encode( array('status' => 'Failed login') );
} 
```

在 TideSDK 方面：

```
$.ajax({
    type: "POST",
    url: login_url,
    data: {
        'email_address' : email_address,
        'password'      : password
    },
    success: function(data, status, xhr) {
        if (data.status == 'Logged in') {
            Ti.App.Properties.setString('loggedIn', 'true');
            Ti.App.Properties.setString('sessionId', data.session_id);
        } else {
            Ti.App.Properties.setString('loggedIn', 'false');
        }
    }
}); 
```

然后每个连接回服务器的初始化如下：

```
var httpClient = Ti.Network.createHTTPClient();
httpClient.setCookie('PHPSESSID', Ti.App.Properties.getString('sessionId')); 
```

然后它就起作用了。

# java - Android Java 的 NullPointerException

> ID：15294538
> 
> 赞同：-2
> 
> 时间：2013-03-08T12:57:50.410
> 
> 标签：java, android, eclipse, nullpointerexception, runtimeexception

我有一个类似于我当前问题的先前问题，那是当我从我的字符串数组中检索空值时，现在我的问题是我认为我也从我的整数数组中获取空​​值，但我不知道如何处理这样的异常，例如：

```
for int(i=0;i<n;i++)
    {
        if(taskArr[i] != null){
        taskArr[i] = taskArray[i].getText().toString();
        taskId[i] = taskArray[i].getId();
    }
    } 
```

解决了我从字符串数组获取空值的`if(taskArr[i] != null)`问题，但它似乎不适用于我的整数数组。taskArr[] 是我的字符串数组，taskId[] 是我的整数数组，taskArray[] 是一个编辑文本数组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:59:33.790

条件 if 语句仅适用于您需要使用括号的第一行。一般来说，在 if 语句中使用括号是一种很好的做法，它使事情更直观，并且可以避免遇到这样的错误。您还需要检查它`getText()`不为空。

```
for int(i=0;i<n;i++)
    {
        if(taskArr[i] != null && taskArr[i].getText() != null)
        {
           taskArr[i] = taskArray[i].getText().toString();
           taskId[i] = taskArray[i].getId();
        }
    } 
```

在旁注中，您提到您的数组包含`Integer`对象。我没有看到`Integer.getText()`或`Integer.getId()`在 API 文档中看到`Integer`是否有另一种类型存储在数组中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:36:28.727

你评论说：

> 我仍然收到语法错误...

这不是有效的 Java：

```
for int(i=0;i<n;i++) {
} 
```

它应该是：

```
for (int i = 0; i < n; i++) {
} 
```

* * *

至于其余的，如果您确切地告诉我们 NPE 被扔在哪条线上，我们可能会告诉您它是什么原因造成的。您似乎在暗示这是这一行：

```
 taskId[i] = taskArray[i].getId(); 
```

如果是这种情况，并且 if`taskId`和`taskArray`has types`int[]`然后`EditText[]`有 3 种可能性：

```
- `taskId` is `null`,
- `taskArray` is `null`, or 
- `taskArray[i]` is `null`. 
```

如果我们假设上一行：

```
 taskArr[i] = taskArray[i].getText().toString(); 
```

没有抛出NPE，即排除了两种可能性，`taskId`成为罪魁祸首。

* * *

我想说的另一条评论是，所有为避免 NPE 的空值测试很可能是错误的方法。您应该找出这些`null`值的来源并更改其余代码的逻辑，以免发生这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:00:32.843

您应该将两行都包含在`if`条件中：

```
if(taskArr[i] != null)
{
    taskArr[i] = taskArray[i].getText().toString();
    taskId[i] = taskArray[i].getId();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T13:01:18.393

这是因为 an `int`cannot be `null`，而是 an `Integer`can。我假设你的`taskArray.getId()`回报是，`Integer`但是。因此，您直接投射到，如果是，这将失败。这条线`taskId``int[]``int``Integer``null`

```
taskId[i] = taskArray[i].getId(); 
```

相当于

```
taskId[i] = taskArray[i].getId().intValue(); 
```

如果`taskArray[i].getId()`为空，这里会发生什么？

你需要得到一个`Integer`，检查它是否是，如果不是，`null`则分配给一个。例如：`int``null`

```
Integer id = taskArray[i].getId();
if (id != null) {
    taskId[i] = id;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T13:01:23.547

`{}`请在 if 子句中使用大括号 ( )。如果不这样做，则仅识别条件下的行：

```
if(taskArr[i] != null) {
    taskArr[i] = taskArray[i].getText().toString();
    taskId[i] = taskArray[i].getId();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T13:05:37.543

好吧，您检查是否`taskArr`为空，然后尝试从`taskId`. 有可能`taskId`是`null`，或者至少是其中的值。你需要同样检查。

试试这个：

```
for int(i=0;i<n;i++)
{
    if(taskArray[i].getText() != null) //Check if Text from taskArray[i] is null
        taskArr[i] = taskArray[i].getText().toString();
    if(taskArray[i].getId != null) //Check if ID from taskArray[i] is null
        taskId[i] = taskArray[i].getId();
} 
```

# linux - awk unix 插入文件位置目录

> ID：15294540
> 
> 赞同：0
> 
> 时间：2013-03-08T12:57:55.117
> 
> 标签：linux, unix, awk

在 linux 中，我试图从 CSV 文件的特定列和行中选择一个变量，然后将此变量用作文件位置层次结构的结尾。当我在 bash 终端窗口中键入以下内容时，它似乎可以通过在屏幕上正确的行和列中输出变量来工作。

```
awk -F "," 'FNR == 2 {print $8}' /sdata/images/projects/ASD_SSD/1/ruths_data/ruth/imaging\ study/imaging\ study\ working/delete2.csv 
```

但是，我正在尝试在脚本中进行以下替换，这无法正常工作......

```
r=2
c=8 
```

```
s=awk -F "," 'FNR == $r {print $c}' /sdata/images/projects/ASD_SSD/1/ruths_data/ruth/imaging\ study/imaging\ study\ working/delete2.csv 
```

然后我尝试使用 s 输出作为层次结构文件位置的结尾。例如，/home/ork/js/s*

我不断收到以下错误，因此看起来它没有创建`s`变量，然后没有将其插入实际文件位置。

> 省略目录`/home/ork/js/'

我花了几个小时试图弄清楚是什么阻止了它的工作并且我是一个新用户（所以我相信这很简单，抱歉）。

我希望我足够清楚，如果需要进一步澄清，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:25:45.860

这是一个常见的问题。单引号保护变量免受 shell 的影响，因此它们永远不会被扩展。分配给变量时还需要命令替换`s`。一种方法是：

```
s=$(awk -F, 'FNR==r{print c}' r="$r" c="$c" file) 
```

# php - updateAll 与 CakePHP 2 中的关系

> ID：15294546
> 
> 赞同：1
> 
> 时间：2013-03-08T12:58:19.207
> 
> 标签：php, cakephp, model

我尝试更新系统中的所有订单，但有一个“位置”条件。我如何在 CakePHP 2.3 中做到这一点？

```
// OrderFood.php (Model)
$orderFood = $this->updateAll(
    array(
        'OrderFood.price' => 'OrderFood.original_price',
        'OrderFood.discount_percent' => 0,
        'OrderFood.discount_amount' => 0,
    ),
    array(
        'Order.check_num' => $check_num
    )
); 
```

* * *

```
// OrderFood.php (Model)
/**
 * belongsTo associations
 *
 * @var array
 */
public $belongsTo = array(
    'Order' => array(
        'className' => 'Order',
        'foreignKey' => 'order_num',
    ),
    'Food' => array(
        'className' => 'Food',
        'foreignKey' => 'food_num'
    )
); 
```

* * *

```
// Order.php (Model)
/**
 * hasMany associations
 *
 * @var array
 */
public $hasMany = array(
    'OrderDrink' => array(
        'className' => 'OrderDrink',
        'foreignKey' => 'order_num'
    ),
    'OrderFood' => array(
        'className' => 'OrderFood',
        'foreignKey' => 'order_num'
    )
); 
```

当我尝试这样做时，Cake 返回此错误消息：

```
Error: SQLSTATE[42P01]: Undefined table: 7 ERRO: faltando entrada para tabela "Order" na cláusula FROM LINE 1: ...ROM "public"."order_foods" AS "OrderFood" WHERE "Order"."c... ^

SQL Query: SELECT "OrderFood"."order_num" AS "OrderFood__order_num" FROM "public"."order_foods" AS "OrderFood" WHERE "Order"."check_num" = 358171

Notice: If you want to customize this error message, create app\View\Errors\pdo_error.ctp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:22:11.527

您正在尝试更新您的`OrderFood`模型，但您正在传递`Order`模型的条件。如果您查看 SQL 错误，您的 WHERE 子句正在引用`Order`未包含在语句中的表。

我确信有更好的方法可以做到这一点，但一个简单的解决方案是首先查询 Order 表并`order_num`为您的`check_num`. 然后将条件更改`updateAll()`为`OrderFood.order_num' => $order_num`。

# php - PHP proc_open 管道异常（Win7/Apache2.2）

> ID：15294549
> 
> 赞同：1
> 
> 时间：2013-03-08T12:58:29.367
> 
> 标签：php, apache, windows-7, pipe, proc-open

以下代码在运行“php test.php”（PHP 5）的 Windows 7 中从命令提示符执行时有效 - 输出只是“test”。但是，当 php (v5) 在 localhost apache 服务器 (v2.2) 上运行的任何浏览器上运行时，它不起作用 - 即没有输出（使用直接回显、刷新和使用 AJAX 方法）。该过程已成功启动（使用 proc_get_status 验证）（*对我来说*意味着权限问题也可以）。似乎与管道有关。有任何想法吗？我错过了一件众所周知的事情吗？

```
<?php
$descriptorspec = array(
   0 => array("pipe", "r"), 
   1 => array("pipe", "w")
);
$process = proc_open("java Test", $descriptorspec, $pipes, null, null,array('bypass_shell'=>true));
fclose($pipes[0]);
echo stream_get_contents($pipes[1]);
fclose($pipes[1]);
proc_close($process);
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T13:03:33.923

可能您的 apache 服务器作为非交互式服务作为“系统”运行。许多事情将无法正常工作，并且可能还会为控制台应用程序提供管道。此外，您可能会遇到权限问题，因为您的控制台（它工作的地方）具有用户（您的）权限，而生成的控制台具有系统权限。

如果您真的需要管道，您可以尝试以用户（而不是系统）身份运行 apache 并配置启用桌面交互的服务。

# ios - Objective-C NSArray，块，STAssertEquals

> ID：15294556
> 
> 赞同：2
> 
> 时间：2013-03-08T12:58:40.957
> 
> 标签：ios, objective-c, nsarray, objective-c-blocks

我在一个应用程序上工作，列出了一项运动的当前现场比赛。使用 REST 从远程源获取有关实时游戏的信息。第一个请求给出了一个带有他们的 id 和相应的竞技场 id 的现场游戏列表。然后我必须从他们的 id 中获取竞技场名称。当一切都完成后，我发回一个包含现场游戏列表的 NSArray。

在测试通过块传递 NSArray 的解析方法时，我在 SenTestCase 中发现了一个奇怪的行为。在我的测试中，我可以做一个`[myArray count]`并在 NSLog 中显示它的结果，但是当我`STAssertEquals([myArray count], 1, @"Error description")`用 EXC_BAD_ACCESS 做一个测试崩溃时。

这是我的代码减少到最低限度，并且我删除了所有网络方面：

```
#import <SenTestingKit/SenTestingKit.h>

@interface LiveGameTests : SenTestCase
@end

@interface LiveGame : NSObject
@property (nonatomic) id gameID;
@property (strong, nonatomic) NSString *arenaName;
@end

@implementation LiveGame

// Create a live game object from a dictionary (this dictionary is the response of a first request to a remote server)
+(LiveGame *)gameWithData:(NSDictionary *)dict
{
    LiveGame *liveGame = [[LiveGame alloc] init];
    liveGame.gameID = dict[@"game_id"];    
    return liveGame;
}

// Complete a live game data with the element of a dictionary (those data are actualy fetched from a remote server in a different request.)
+(void)fetchRemainingData:(NSArray *)liveGameList completion:(void(^)(void))completion
{
    LiveGame *liveGame = liveGameList[0];
    liveGame.arenaName = @"arenaName";
    completion();
}

// Parse a NSArray of NSDictionaries representing live game
+(void)parseArrayOfDictionary:(NSArray *)arrayToParse success:(void(^)(NSArray *liveGameList))success
{
    NSMutableArray *liveGameList = [NSMutableArray arrayWithCapacity:[arrayToParse count]];

    // Iterate on all the NSDictionary of the NSArray and create live game from each NSDictionary 
    [arrayToParse enumerateObjectsUsingBlock:^(NSDictionary *obj, NSUInteger idx, BOOL *stop)
     {
         liveGameList[idx] = [LiveGame gameWithData:obj];
     }];

    [LiveGame fetchRemainingData:liveGameList completion:^
     {
         success(liveGameList);
     }];
}
@end

@implementation LiveGameTests

-(void)testParseArrayOfDictionary
{
    [LiveGame parseArrayOfDictionary: @[@{@"game_id": @1}]
        success:^(NSArray *liveGameList)
        {
            // This line work fine and print: 2013-03-08 13:39:35.288 ShotClock[55177:c07] liveGameList count = 1
            NSLog(@"liveGameList count = %d",[liveGameList count]);

            // This crash the test on a EXC_BAD_ACCESS. What's wrong?
            STAssertEquals([liveGameList count], 1, @"The list of game must contain one unique live game but contain %@",[liveGameList count]);
        }];
}
@end 
```

NSLog(@"liveGameList count = %d",[liveGameList count]); =>这条线工作正常并打印：2013-03-08 13:39:35.288 ShotClock[55177:c07] liveGameList count = 1

STAssertEquals([liveGameList count], 1, @"游戏列表必须包含一个唯一的实时游戏，但包含 %@",[liveGameList count]); => 这会使 EXC_BAD_ACCESS 上的测试崩溃。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:19:39.777

您的应用程序崩溃了，因为

```
 STAssertEquals([liveGameList count], 1,  @"The list of game must contain one unique live game but contain %@",[liveGameList count]) 
```

尝试将 %@ 格式化程序应用于 [liveGameList count] 的结果。但是 %@ 需要一个 Objective C 对象，其中 [liveGameList count] 返回标量“1”。运行时将该标量转换为指向 0x00000001 的指针，并尝试使用它在那里找到的“对象”。但这不是一个有效的指针，因此运行时会引发一个无效地址异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:02:01.543

我认为 STAssertEquals 需要 2 个对象，您应该执行类似的操作

```
STAssertTrue([myArray count] == expectedCount, @"Count is wrong); 
```

# asp.net - 在内容页面中使用脚本和 css 文件

> ID：15294557
> 
> 赞同：0
> 
> 时间：2013-03-08T12:58:46.427
> 
> 标签：asp.net, master-pages

很多天以来，我一直在尝试解决在我的内容页面中加载 javascript 和样式表的方法。

如何链接所有资源文件，例如`.css`和`.js`的标记，`master page`然后直接在内容页面中使用它们而不将它们添加到每个所述内容页面？

我发现我们可以`.css`通过使用主题和在母版页中初始化一个主题来链接文件；但是`.js`文件和图像呢？

如何在母版页中链接它们，然后在内容页中访问它们？

请指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:03:31.603

我假设我们在谈论 Web 表单，而不是 MVC？您可以将脚本放在`<asp:ScriptManager>`控件的`<Scripts>`集合或`<CompositeScript>`列表中。您可以通过以下方式获得对 ScriptManager 的引用`ScriptManager.GetCurrent(PageReference);`

图像没有专门为图像构建的任何类似的东西。但是，它可以构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:50:27.773

在母版页上，所有使用该母版的内容页面都会显示您放在头部的任何内容。

也就是说，如果您的母版页中有：

```
<head runat="server">
    <script type="text/javascript" src="/js/pages/jquery.min.js"></script>
    <script type="text/javascript" src="/js/pages/jquery.jscrollpane.min.js"></script>
</head> 
```

那么每个内容页面的头部都会包含相同的内容。

如果您有一些页面使用的脚本而不是其他页面，那么您可以在母版页上定义一个位于母版页中的`<asp:content>`标记`<head>`。

然后在您的内容页面中，您可以将指向您的 javascript 文件的链接直接放入页面标题中内容标签的内容占位符中。

如果您想链接图片，我建议您通过 javascript 进行此操作。如果您`<script>`在母版页头中创建了一个块，如下所示：

```
var ReusableImageVariable = new Image();
ReusableImageVariable.src = '\A\Path\To\Your\image.jgp'; 
```

然后在任何内容页面上，您可以放置​​一个脚本块，该脚本块将使用它`ReusableImageVariable`并将其复制到指定位置的文档中：

```
<script type='text/javascript'>
    document.getElementById('PlaceHolderForImage').appendChild(ReusableImageVariable);
</script> 
```

一个或其他包含元素`PlaceHolderforImage`的 id在哪里。`<div>`这也有助于缩短浏览器加载时间，因为您在加载样式表和脚本的同时加载图像。

最后，如果您只想使用 ASP，我会将图像定义为母版页的属性。然后任何内容页面都可以在后面的代码中访问它们并将它们加载到您需要的地方。

# jquery - jQuery Ajaxy：仅从 html 文件中获取元素

> ID：15294562
> 
> 赞同：1
> 
> 时间：2013-03-08T12:58:57.200
> 
> 标签：jquery, ajax

我正在使用 jQuery Ajaxy 插件：[http](http://balupton.com/projects/jquery-ajaxy) ://balupton.com/projects/jquery-ajaxy 。

我的网站有两种语言（英语/希腊语）。

执行 ajax 请求时，它正在调用包含两种语言文本的 html 文件，并用两个 div 分隔另一个`ex: <div id="en"></div>`。

因此，使用简单的 ajax 加载功能，我是这样做的：

`$("#text").load("contactus.html #en")`

**ajaxy**插件也可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:44:20.743

请参阅此 URL：[http](http://balupton.github.com/jquery-ajaxy/demo/)
://balupton.github.com/jquery-ajaxy/demo/查看**“JavaScript”部分**

在 Ajaxy 中，对于通用控制器和页面控制器，都有一个共同的动作序列：

```
var data = this.State.Response.data; 
```

此数据是您请求的页面的完整 html blob。您可以在这里进行一些篡改，在通用控制器和页面控制器的响应处理程序中。

例如，在上面的行之后：

```
var xdoc = $($.parseXML(data + '')); //performance hit if your page is really complex
var enDivHTMLStr = xdoc.find('div#en').text();
var esDivHTMLStr = xdoc.find('div#es').text();
data = enDivHTMLStr; //or esDivHTMLStr 
```

# c# - 剑道树视图更改节点文本

> ID：15294563
> 
> 赞同：1
> 
> 时间：2013-03-08T12:58:57.833
> 
> 标签：c#, asp.net-mvc, kendo-ui, kendo-treeview

是否可以动态更改剑道树视图中的文本？

```
var dataSource = treeView.dataSource;
var dataItem = dataSource.get(parseInt($('#inputIdOrgJed' + '@guid').val(), 10));
var node = treeView.findByUid(dataItem.uid);
treeView.select(node);
treeView.text(node, "ChangedText"); 
```

在 ajax 更新节点文本应该直接改变。读取操作会关闭树，所以我不能使用它，除非有办法避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T15:18:20.523

dataItem() 是一个可观察的数组，因此使用 .set() 应该会导致渲染器自动更新显示。

假设数据项文本字段被命名为“文本”。

```
treeview.dataItem(node).set('text', "New node text"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-16T11:26:11.700

```
 var selectedNode = treeview.select();
 var item = tree.dataItem(selectedNode);  
 item.set("text", "Changed Text"); 
```

`item.set("text"` 重点是应该在配置中`dataTextField`定义的第一个参数。`kendoTreeView`

# sql - 如何通过sql中的第三张表合并两个表？

> ID：15294564
> 
> 赞同：0
> 
> 时间：2013-03-08T12:59:02.173
> 
> 标签：sql, sqlanywhere

我是 SQL 数据库的新手，我正在使用一些表来通过使用 JOIN 来获取列。

我有一个如下表

```
A - id, A1
B - id, B1, B2, B3
C - id, C1, C2, c3

AB - id, A_id, B_id 

AC - id, A_id, C_id 
```

现在，我想做一些连接，我想得到类似的结果，

```
B1, B2, B3, C1, C2, C3 
```

尽管如此，我看到了一些相同类型的问题，我无法理解。所以，如果答案能简单详细地解释一下，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:02:22.380

```
SELECT B1, B2, B3, C1, C2, C3
FROM A
INNER JOIN AB ON A.id = AB.A_id
INNER JOIN B ON B.id = AB.B_id
INNER JOIN AC ON A.id=AC.A_id
INNER JOIN C ON C.id = AC.C_ID 
```

编辑：

如果表中的列具有相同的名称（例如，有一个列 B.column1 和一个列 C.column1），请执行以下操作：

```
SELECT B.column1, B.B1, B.B2, B.B3, C.column1, C.C1, C.C2, C.C3
FROM A
INNER JOIN AB ON A.id = AB.A_id
INNER JOIN B ON B.id = AB.B_id
INNER JOIN AC ON A.id=AC.A_id
INNER JOIN C ON C.id = AC.C_ID 
```

编辑 2：对于长表名，您可以执行以下操作：

```
SELECT b.B1, b.B2, b.B3, c.C1, c.C2, c.C3
FROM A_LONG_NAME a
INNER JOIN AB ON a.id = AB.A_id
INNER JOIN B_LONG_NAME b ON b.id = AB.B_id
INNER JOIN AC ON a.id=AC.A_id
INNER JOIN C_LONG_TABLE_NAME c ON c.id = AC.C_ID 
```

# angularjs - AngularJS：是否可以观察全局变量（即在范围之外）？

> ID：15294565
> 
> 赞同：11
> 
> 时间：2013-03-08T12:59:04.957
> 
> 标签：angularjs

首先让我说我正在尝试做的事情可能不被认为是好的做法。但是，我需要做这样的事情，以便以小的增量步骤将大型 Web 应用程序迁移到 AngularJs。

我试着做

```
 $scope.$watch(function () { return myVar; }, function (n, old) {
                    alert(n + ' ' + old);
                }); 
```

其中 myVar 是一个全局变量（在窗口中定义）

然后从控制台更改 myVar 。但它只在第一次设置观察者时触发。

如果我从控制器内更新 myVar （请参阅[http://jsfiddle.net/rasmusvhansen/vsDXz/3/](http://jsfiddle.net/rasmusvhansen/vsDXz/3/)，但如果它是从某些旧版 javascript 更新的则不会）

有什么办法可以做到这一点？

**更新** 如果遗留代码完全不受限制，我喜欢安德斯的回答。但是，目前我正在研究这种似乎有效的方法，并且不包括每秒触发的计时器：

```
// In legacy code when changing stuff    
$('.angular-component').each(function () {
        $(this).scope().$broadcast('changed');
});

// In angular
$scope.$on('changed', function () {
    $scope.reactToChange();
}); 
```

即使我会采用另一种解决方案，我也会给安德斯加分，因为他的解决方案正确地解决了所述问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T13:25:02.213

这里的问题可能是您正在`myVar`从 Angular 世界之外进行修改。Angular 不会一直运行摘要循环/脏检查，只有当应用程序中发生应该触发摘要的事情时，例如 Angular 知道的 DOM 事件。因此，即使`myVar`发生了变化，Angular 也没有理由开始新的摘要循环，因为什么都没有发生（至少 Angular 知道）。

因此，为了触发您的手表，您需要在更改时强制 Angular 运行摘要`myVar`。但这有点麻烦，我认为您最好创建一个全局可观察对象，如下所示：

```
<!doctype html>
<html ng-app="myApp">
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.angularjs.org/1.0.5/angular.min.js"></script>
    <script>
    // Outside of Angular
    window.myVar = {prop: "value1"};
    var myVarWatch = (function() {
        var watches = {};

        return {
            watch: function(callback) {
                var id = Math.random().toString();
                watches[id] = callback;

                // Return a function that removes the listener
                return function() {
                    watches[id] = null;
                    delete watches[id];
                }
            },
            trigger: function() {
                for (var k in watches) {
                    watches[k](window.myVar);
                }
            }
        }
    })();

    setTimeout(function() {
        window.myVar.prop = "new value";
        myVarWatch.trigger();
    }, 1000);

    // Inside of Angular
    angular.module('myApp', []).controller('Ctrl', function($scope) {
        var unbind = myVarWatch.watch(function(newVal) {
            console.log("the value changed!", newVal);
        });

        // Unbind the listener when the scope is destroyed
        $scope.$on('$destroy', unbind);
    });
    </script>
</head>
<body ng-controller="Ctrl">

</body>
</html> 
```

# c# - 将字符串传递到下一个 XAML 页面

> ID：15294568
> 
> 赞同：2
> 
> 时间：2013-03-08T12:59:11.870
> 
> 标签：c#, xaml, windows-store-apps

我正在使用 C# 和 XAML 开发 Windows Store App。从一页移动到另一页时，我想传递一个字符串。例如，

```
 private void filterData_Click(object sender, RoutedEventArgs e)
    {
           string str="mydata";
           this.Frame.Navigate(typeof(QualityRecordsResults));
    } 
```

我需要 QualityRecordsResults.xaml.cs 文件中的这个 str 值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T13:04:59.453

您可以使用[Navigate](http://msdn.microsoft.com/en-us/library/windows/apps/hh702394.aspx)方法的重载将字符串传递给您的视图。

```
string str="mydata";
this.Frame.Navigate(typeof(QualityRecordsResults), mydata); 
```

# .net - 实体框架函数导入参数类型在从数据库更新模型时重置

> ID：15294569
> 
> 赞同：4
> 
> 时间：2013-03-08T12:59:13.947
> 
> 标签：.net, sql-server, entity-framework, entity-framework-5

我的数据库中有一个存储过程（在 SQL Server 2008 R2 上运行），它将其中一个参数作为`tinyint`. 在实体框架 (v5.0) 模型上，使用该存储过程的函数导入，参数默认映射到`Byte`.

但是，我`enum`在该模型中创建了一个自定义，我将函数导入参数的类型设置为原来的`Byte`. 其基础数据类型`enum`也是`Byte`如此。问题是，每当我从数据库更新模型时，参数类型都会恢复为`Byte`，即使数据库中根本没有影响所述存储过程的更改。

这是一个已知的 EF 错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:38:58.273

不幸的是，目前从数据库更新模型会覆盖对模型所做的所有自定义。

# javascript - Wrapping Foundation 4 在 Angular 中展示

> ID：15294572
> 
> 赞同：11
> 
> 时间：2013-03-08T12:59:19.133
> 
> 标签：javascript, angularjs, zurb-foundation, angularjs-directive

Angular 的新手，只是想与 Zurb Foundation 4 和谐相处。一个恰当的例子；我正在尝试使用[http://foundation.zurb.com/docs/components/reveal.html](http://foundation.zurb.com/docs/components/reveal.html)组件。

直截了当的方法似乎是包装为指令：

```
directive('modal', function() {
    return {
        template: '<div ng-transclude id="notice" class="reveal-modal">' +
                  '<a close-modal></a>' +
                  '</div>',
        restrict: 'E',
        transclude: true,
        replace: true,
        scope: {
            'done': '@',
        },
        transclude: true,
        link: function(SCOPE, element, attrs, ctrl) {
            SCOPE.$watch('done', function (a) {
                // close-modal
            });
        }
    }
}).
directive('closeModal', function() {
    return {
        template: '<a ng-transclude href="#" class="close-reveal-modal">x</a>',
        restrict: 'A',
        transclude: true,
        replace: true
    }
}).
directive('showModal', function() {
    return {
        template: '<a ng-transclude class="reveal-link" data-reveal-id="notice" href="#"></a>',
        restrict: 'A',
        transclude: true,
        replace: true,
    }
}); 
```

这在某种程度上可以正常工作，例如，我可以使用模态显示来自模板的不同通知：

```
 <modal done="">
    <div ng-include src="'partials/notices/' + notice + '.html'"></div>
  </modal>
  <select ng-model="notice" ng-options="n for n in ['notice-1', 'notice-2']">
      <option value="">(blank)</option>
  </select>
  <a show-modal>show modal</a> 
```

但是，如果我想在某个事件（例如，在某个事件中）从控制器触发关闭模式/显示模式，它就会变得棘手`$watch`。我假设我的指令需要一个控制器来触发点击，但是 Angular 的做法会很好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-05T17:14:15.540

这个问题很老了，我不知道它是否适用于 Reveal。但是我仅通过在 Angular 的 .run() 方法上调用 .foundation() 方法将 Dropbox 库包装到 Angular 中：

```
app.run(function ($rootScope) {
    $rootScope.$on('$viewContentLoaded', function () {
        $(document).foundation();
    });
}); 
```

这对我行得通。我猜你也可以创建一个指令来处理用户交互。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T23:19:13.453

控制器不应直接触发 UI 事件，也不应直接操作 UI 元素。所有这些代码都应该放在指令中。

你可以做的是：

1.  将 Directive Scope 中的 bool 绑定到 Parent 范围并在其上添加监视。我想你已经这样做了。或者
2.  在控制器上执行 scope.$broadcast 并在指令上添加 scope.$watch 以关闭。

# r - 根据列中的值删除R中的行

> ID：15294573
> 
> 赞同：2
> 
> 时间：2013-03-08T12:59:30.437
> 
> 标签：r

在 R 中有一个数据框，我想删除该数据框中 X 列的值 >100% 的所有行。最好的方法是什么？

感谢帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T13:18:33.963

如果您的列`X`包含数字（尽管您使用 % 符号给人的印象有所不同，但我很确定它确实如此），那么您可以选择如下`i`行`X[i]<100`：

```
 datasetnew <- dataset[dataset$X<=100,] 
```

但是，如果您在列中确实有百分比，即中的值`X`类似于`"10%","23%","103%"`，那么您需要删除第`%`一个，例如使用以下`gsub`函数：

```
datasetnew <- dataset[as.numeric(gsub(dataset$X,"%",""))<=100,] 
```

# tfs - TFS Build 复制完整的 Repository 以进行构建

> ID：15294576
> 
> 赞同：1
> 
> 时间：2013-03-08T12:59:42.997
> 
> 标签：tfs, continuous-integration, tfsbuild

我们已经为我们的项目设置了 TFS 构建，但是在每次构建时，系统都会复制整个存储库，然后编译我们的解决方案。我们如何确保 TFS Build 只下载解决方案所需的文件，而不必手动隐藏每个不需要的目录？现在它下载超过 2GIG 的数据只是为了编译一个小于 100mb 的项目（源文件）。其他数据是自动构建不需要的测试数据库和文件。

**编辑**：一些进一步的调查让我对一些关键字进行搜索。这些帖子有帮助： [Team Build - Get Workspace - 从特定路径获取最新信息，而不是所有内容](https://stackoverflow.com/questions/12732642/team-build-get-workspace-get-latest-from-specific-paths-not-everything)

[TFS 构建和工作区](https://stackoverflow.com/questions/12949770/tfs-build-and-workspace)

不过仍在调查。欢迎任何意见。

**编辑**：一个选项是用我自己的扩展活动替换构建过程定义中的 CreateWorkspace。我希望发现有人已经这样做了.. 基本上你会使用 VersionControlServer 对象来下载必要的文件而不是整个工作区。

**编辑** 目前对此没有真正好的答案/解决方案。我提供了一些选项，响应的人提供了一些替代方案，但是您不能轻易更改 TFS 构建过程以仅下载作为解决方案一部分的数据而不是整个存储库。因此，在构建存储库时请注意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:05:51.267

您希望将`Build Definition`映射设置为仅包含您要编译的源。这意味着您不必做`cloak`任何事情。

*   编辑构建配置
*   单击源设置（VS 2012），工作区（VS 2010）
*   一个特定的映射示例如下所示：

`Status``Source Control Folder                           ``Build Agent Folder                `
`Active``$/Path/To/The/SolutionOrProjectFolder  ``$(SourceDir)\                        `

这将使`workspace`此构建仅限于您希望构建的解决方案。因此，您的构建活动只能看到该目录下的 AssemblyInfo 文件。

**如果由于源代码控制的设置方式而无法执行此操作，那么我建议您在`Source Control`.**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T13:47:59.570

如果您有多个构建代理，您应该限制构建定义可以运行的代理数量。这将停止将相同源的多个副本下载到构建机器上。

您已经在问题中回答的下一部分，通过将构建定义中的“清洁工作区”选项更改为**无**，构建代理将仅下载当前构建和上次构建之间的变更集。

# php - ZipArchive 限制？PHP

> ID：15294577
> 
> 赞同：0
> 
> 时间：2013-03-08T12:59:47.613
> 
> 标签：php, arrays, zip, limit, ziparchive

我在我的网站上有一个用于“下载篮”功能的 ZipArchive 脚本。用户选择他们想要添加到购物篮中的音频，然后脚本对用户进行身份验证并获取所有受保护的文件并将它们添加到 zip 以供下载。

下载 zip 后，代码将删除该文件。这一切都很好，但是我遇到了关于更大文件的问题！如果用户想要压缩总大小超过 250mb 的轨道，则写入的临时 zip 文件永远不会超过 250mb - 它只会被覆盖并重新开始。

我的两个问题是：

1.  ZipArchive 对正在写入的文件有限制吗？
2.  ZipArchive 是否有不同的方式来编写文件以制作更大的文件？

感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:02:31.450

ZIP 文件的限制是 4 GB 的压缩文件。对于更大的 4 GB，您需要单独拆分它。

但它可能取决于 memory_limit() 如果您即时 ZIP，它将处于较低容量。

> ZipArchive 是否有不同的方式来编写文件以制作更大的文件？

不，但是您可以根据需要拆分存档器，然后加入以字符串形式提取。

# iphone - 相册之类的控件

> ID：15294580
> 
> 赞同：3
> 
> 时间：2013-03-08T12:59:55.320
> 
> 标签：iphone, ios, uiimagepickercontroller

我正在制作一个相机应用程序，用户可以在其中制作视频和拍照。我正在做的是将所有电影和图片保存在我的应用程序文档目录中。我不想自动将它们保存到用户相册中。我想向用户展示的是与相册工作方式类似的视图，这意味着我想向他展示他拍摄的所有电影和照片，并给他按钮来检查和保存他喜欢的那些并删除那些他想丢弃。

现在这是我的问题，我是否创建一个自定义的 uitableview，呈现经过裁剪的小图片，在底部添加 uitoolbar 并添加我自己的自定义“保存”、“丢弃”和“预览图像/视频”按钮，或者是否已经有可用的 ootb在我可以使用的 iOS 5 Xcode 4.2 中？

我搜索了可可控件网站，发现了许多图像选择器控件，但没有一个像简单的“保存到相册”、“删除照片”或“预览照片/视频”功能那样工作。是否有任何可用的示例控件可供我使用并可能对其进行扩展？相信我，我已经在谷歌上搜索了一段时间了

寻找这样的东西。制作这个的人，他们是使用 UITableView 还是 UICollectionView 还是两者都不使用？

![在此处输入图像描述](../Images/3d3c802fa11be7f989e6504d59b544e5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:09:56.767

如果你愿意去IOS 6，你可以试试这个教程（2部分）：

[http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12) [http://www.raywenderlich.com/22417/beginning-uicollectionview-in-ios-6-part-22](http://www.raywenderlich.com/22417/beginning-uicollectionview-in-ios-6-part-22)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:51:28.530

找到了。这是一个非常酷的示例项目

[https://github.com/kirbyt/KTP​​hotoBrowser](https://github.com/kirbyt/KTPhotoBrowser)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-05T11:42:13.730

从 iOS 14 开始，现在可以在[新的照片选择器](https://developer.apple.com/documentation/photokit/selecting_photos_and_videos_in_ios)中使用它。

# sql-server-2008 - SQLExpress 错误：无效的对象名称“猫”

> ID：15294581
> 
> 赞同：0
> 
> 时间：2013-03-08T12:59:57.647
> 
> 标签：sql-server-2008

我在几台 Windows Server 2008 机器上安装了相同的数据库和脚本，今天我收到了这个奇怪的错误......

```
Microsoft OLE DB Provider for ODBC Drivers error '80040e37'

[Microsoft][ODBC SQL Server Driver][SQL Server]Invalid object name 'Cats'. 
```

它在所有其他服务器上都能完美运行，但不是这个。这可能是关于什么的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:26:33.970

感谢 spajce 的提示，这个问题已经解决。由于某种原因，DSN 没有指定要访问的数据库。

要将 DSN 的默认数据库更改为正确的数据库，请执行以下操作：

1.  打开控制面板。
2.  双击 ODBC 控制面板扩展以启动 ODBC 管理器。
3.  单击 ODBC 管理器中的系统 DSN 选项卡。
4.  选择映射到 Commerce Server 数据库的系统数据源。
5.  单击配置按钮以启动 SQL Server DSN 配置向导。
6.  单击下一步按钮两次。
7.  在第三页上，单击“更改默认数据库”复选框。
8.  单击下一步按钮两次，单击完成，然后单击确定。

# c# - 对象中对象的 NHibernate refresh()

> ID：15294584
> 
> 赞同：1
> 
> 时间：2013-03-08T13:00:00.583
> 
> 标签：c#, wpf, nhibernate

我的数据库有一个带有 NHibernate 的 WPF 应用程序。现在我有一个包含地址对象的客户对象。

**客户类**

```
public class Customer:ObjectBase
{
    #region Variables
    private int _id;
    private string _name;
    private Address _address;
    private string _vat;
    #endregion

    #region Properties
    public virtual int Id
    {
        get { return _id; }
        set 
        { 
            _id = value;
            OnPropertyChanged("Id");
        }
    }

    public virtual string Name
    {
        get { return _name; }
        set 
        { 
            _name = value;
            OnPropertyChanged("Name");
        }
    }

    public virtual Address Address
    {
        get 
        {
            if (_address == null)
                _address = new Address();
            return _address; 
        }
        set 
        { 
            _address = value;
            OnPropertyChanged("Address");
        }
    }

    public virtual string Vat
    {
        get
        {
            return _vat;
        }
        set
        {
            _vat = value;
            OnPropertyChanged("Vat");
        }
    }

    #endregion
} 
```

**地址类**

```
public class Address:ObjectBase
{
    #region Variables
    private int _id;
    private string _street;
    private string _number;
    private string _city;
    private string _zip;
    private string _country;
    private Customer _customer;
    #endregion

    #region Properties
    /// <summary>
    /// Het unieke ID van een Address zoals deze in de database staat
    /// </summary>
    public virtual int Id
    {
        get
        {
            return _id;
        }
        set
        {
            _id = value;
            OnPropertyChanged("Id");
        }
    }
    /* ... all other properties ...*/
}
... 
```

在我的应用程序中，我可以编辑我的客户对象。但我也有一个撤消按钮。当我单击该按钮时，它必须显示该客户的原始数据而不进行更改。所以我在考虑执行nhibernate会话的刷新功能。

```
NHibernateHelper.Session.Refresh(Customer); 
```

但这会刷新除 Customer 对象中 Address 对象的值之外的所有属性。有没有办法刷新地址值？

我试过了

```
NHibernateHelper.Session.Refresh(Customer.Address); 
```

但这不起作用......有没有人有解决这个问题的解释或解决方法？

* * *

**编辑：可能的解决方案**

当我按以下顺序执行它时，它会为我提供对象的整个默认值

```
NHibernateHelper.Session.Refresh(Customer.Address);
NHibernateHelper.Session.Refresh(Customer); 
```

但我不知道为什么按该顺序调用刷新函数确实使它工作。对我来说没问题，但知道为什么它必须按这个顺序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T15:50:44.420

有时使用 NHibernate，我必须重置会话并清除第二个缓存以解决问题，然后在我选择获取数据后：

```
public static void ClearCache(this ISessionFactory sessionFactory)
{
    sessionFactory.EvictQueries();
    foreach (var collectionMetadata in sessionFactory.GetAllCollectionMetadata())
             sessionFactory.EvictCollection(collectionMetadata.Key);
    foreach (var classMetadata in sessionFactory.GetAllClassMetadata())
             sessionFactory.EvictEntity(classMetadata.Key);
} 
```

# c - 内存没有重新分配

> ID：15294586
> 
> 赞同：6
> 
> 时间：2013-03-08T13:00:11.010
> 
> 标签：c, struct, malloc, realloc

我正在进行一个项目，我正在尝试使用`malloc()`and `realloc()`。我知道当我 malloc 时，它可以工作，但是当我使用 realloc 时，它根本不会改变分配的内存量。我一直认为 realloc 会重新分配你已经分配的内存。

这是我所拥有的：

这包括：

```
#include <stdlib.h> 
```

我有一个结构：

```
struct student {
    int age;
    int numOfClasses;
    int gender; //0 male; 1 female
} student; 
```

当我想使用 malloc 制作其中的 7 个结构时，我将使用这行代码：

```
student stud* = (structure*) malloc(7*sizeof(student)); 
```

这条线有效。那行代码将结构的大小乘以 7。简而言之，这将占用足够的内存来创建一个由 7 个结构组成的数组。

现在，如果我想将其更改为 8，我会`A`在以前的 malloced 内存和`B`新 malloced（或重新分配）内存的位置执行此操作：

![在此处输入图像描述](../Images/23c3a8ce77b21fa6f6d14f9eff57808e.png)

这是我在代码中的方式：

```
stud = (student*)realloc(stud, 8*sizeof(student)); 
```

据我所知， realloc 采用第二个参数中的变量并分配该内存量。然后，它获取指针（或先前分配的），并从给定的指针中尽可能多地填充刚刚分配的内存。当然，第二个参数必须比之前的 malloced size 大，否则`stud`最后会丢失一些内存。现在这就是我的问题所在。当我调用上面的行时，它不会改变任何东西。malloced 数组的长度仍然为 7。我也很确定我有足够的内存来重新分配。

我这样做对吗？我的问题可能出在哪里？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T13:03:45.140

Your understanding of `realloc`'s behaviour is nearly correct. It doesn't *have* to return a different pointer; it may be that there was enough unused memory after the initial block, so the heap manager can just return the same pointer back to you (but adjust its own internal state such that it knows the block is now bigger).

You have made one small mistake, though.

```
stud = (student*)realloc(stud, 8*sizeof(student)); 
```

Here you are replacing your `stud` pointer with the return value from `realloc`. If it happens to return `NULL` due to memory starvation, then you have lost your original `stud` pointer and the memory is leaked. You should use a temporary pointer instead.

```
tmp = realloc(stud, 8*sizeof(student));
if (tmp)
    stud = tmp; 
```

Also note that you still have to actually put something in the eighth slot. After the realloc the eighth slot is valid allocated memory, but contains garbage until you store something meaningful in it.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T13:08:30.000

这应该可行，尽管我有以下建议：

不要从 malloc 中转换返回值。它在 C 中没有用，并且可能隐藏您忘记包含`<stdlib.h>`.

不要使用`ptr = realloc (ptr, ...)`，因为这会在 realloc 返回的情况下造成内存泄漏`NULL`。相反，使用

```
if ((new_ptr = realloc (stud, 8 * sizeof (*stud))) != NULL) {
     stud = new_ptr;
} else {
     scream_and_die("out of memory");
} 
```

并使用，即使用*指针*`sizeof (*stud)`引用表达式，而不是指向的*类型*（与您分配的特定类型的指针无关）。这样，当您重命名 typedef 时，不需要修改 malloc/realloc 行。换句话说，C 中动态内存分配的最佳实践是

 **```
#include <stdlib.h>
sometype *ptr;
...
ptr = malloc (N * sizeof *ptr); 
```

对于 N 某种类型的数组。**

# php - 伪先验算法

> ID：15294591
> 
> 赞同：1
> 
> 时间：2013-03-08T13:00:28.937
> 
> 标签：php, algorithm, loops, apriori

我有一个**带有 ID 属性的对象数组**，我需要将它们链接到一个表中。

我想将链接在一起的对象 ID 插入到 2 列 MySQL 表中。

有问题的表有 2 列：**A**和**B**。我想将对象集合链接在一起而没有任何重叠。

我将其称为伪先验，因为它类似于先验算法的候选生成过程。

对于下面的示例，我有五个 ID 值为 1-5 的对象。例如：`$obj1->id == 1`，等等。

示例表：

```
Input IDs:
{1, 2, 3, 4, 5}

Output DB Table:
-----------
| A  |  B |
-----------
| 1  |  2 |
| 1  |  3 |
| 1  |  4 |
| 1  |  5 |
| 2  |  3 |
| 2  |  4 |
| 2  |  5 |
| 3  |  4 |
| 3  |  5 |
| 4  |  5 |
----------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:28:48.563

真的不知道你想做什么。但是如果结果必须是表格示例，那么您可以使用以下循环来完成：

```
$arr = array(1, 2, 3, 4, 5);

for($i = 0; $i < count($arr); $i++) {
    for($j = $i+1; $j < count($arr); $j++) {
        // add db logic here
        $q = 'insert into table (' . $arr[$i] . ', ' . $arr[$j] . ')';
    }
} 
```

这是输出的 jsFiddle 示例：[JsFiddle](http://jsfiddle.net/uGpt6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T13:29:41.277

例如梨包[Math_Combinatorics](http://pear.php.net/package/Math_Combinatorics/docs)可以做到这一点。

```
<?php
require 'Math/Combinatorics.php';
$c = new Math_Combinatorics;
foreach( $c->combinations(array(1,2,3,4,5), 2) as $k ) {
    echo join(', ', $k), "\n";  
} 
```

印刷

```
1, 2
1, 3
1, 4
1, 5
2, 3
2, 4
2, 5
3, 4
3, 5
4, 5 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-11-22T08:56:41.357

请访问此地址：[PHP 中的 Apriori 算法](http://vtwo.org/algorithm/apriori/)

**方法**: setMaxScan(int), setMinSup(int), setMinConf(int), setDelimiter(string), getMinSup(void), getMinConf(void), getMaxScan(void), getDelimiter(void), process(string or array), printFreqItemsets (void)、getFreqItemsets(void)、printAssociationRules(void)、getAssociationRules(void)、saveFreqItemsets(string)、saveAssociationRules(string)

# templates - CMS 让模板创建变得简单

> ID：15294595
> 
> 赞同：1
> 
> 时间：2013-03-08T13:00:34.410
> 
> 标签：templates, content-management-system, cmsmadesimple

我在网上搜索了很多以查找创建 CMS 模板的步骤变得简单，但没有找到与此相关的任何内容。如何为 CMS 创建模板 就像我们在 wordpress 中创建模板一样简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T22:18:21.510

这是一个有用的视频，展示了如何获取模板并转换为 CMSMS： [http ://www.youtube.com/watch?v=T0g9WkCwO7s](http://www.youtube.com/watch?v=T0g9WkCwO7s)

在 CMSMS 管理区域中，您转到布局 -> 模板。然后单击添加新模板。

要将模板应用到所有页面，请转到布局 -> 模板。在您的模板旁边单击“设置所有页面”。或者，您可以通过转到内容 -> 页面，单击所需页面，选项选项卡并更改模板下拉菜单并单击提交来申请单个页面。

# regex - php preg_match 使用速记和字符类相结合

> ID：15294604
> 
> 赞同：0
> 
> 时间：2013-03-08T13:01:00.770
> 
> 标签：regex, shorthand, character-class

```
echo preg_match( '/\d[A-Z]/', 'CD' ); // Displays “0” 
```

当明显有字符匹配范围“[AZ]”时，它如何显示0？

它是解析发生的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:33:33.720

正则表达式`/\d[A-Z]/`表示输入必须首先有一个数字，然后必须有一个字母表。
由于输入`CD`不包含数字和其后的字母，因此该函数返回 0。

要匹配多个大写字母或数字，您可以使用以下正则表达式。

```
/[\dA-Z]+/ 
```

# c++ - 将 32 位代码编译为 64 位

> ID：15294606
> 
> 赞同：1
> 
> 时间：2013-03-08T13:01:06.377
> 
> 标签：c++, visual-studio-2010

我被分配编译一个 64 位的 3d Max 插件。

项目在 32 位下正确编译，但是当我按照此处的说明进行操作时：

[如何使用 Visual C++ 2010 Express 编译 64 位应用程序？](https://stackoverflow.com/questions/1865069/how-to-compile-a-64-bit-application-using-visual-c-2010-express)

将编译平台设置为 x64。该项目可以编译，但是在生成代码时出现链接器错误：

```
1>DllEntry.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) void __cdecl InitCustomControls(struct HINSTANCE__ *)" (__imp_?InitCustomControls@@YAXPEAUHINSTANCE__@@@Z) referenced in function DllMain
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: void __cdecl Matrix3::IdentityMatrix(void)" (__imp_?IdentityMatrix@Matrix3@@QEAAXXZ) referenced in function "public: __cdecl Matrix3::Matrix3(int)" (??0Matrix3@@QEAA@H@Z)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: static void __cdecl MaxHeapOperators::operator delete(void *)" (__imp_??3MaxHeapOperators@@SAXPEAX@Z) referenced in function "public: virtual void * __cdecl SceneExport::`scalar deleting destructor'(unsigned int)" (??_GSceneExport@@UEAAPEAXI@Z)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __cdecl ClassDesc2::ClassDesc2(void)" (__imp_??0ClassDesc2@@QEAA@XZ) referenced in function "public: __cdecl CMaxExporterClassDesc::CMaxExporterClassDesc(void)" (??0CMaxExporterClassDesc@@QEAA@XZ)
1>exporter.obj : error LNK2001: unresolved external symbol "public: virtual void __cdecl ClassDesc2::ResetClassParams(int)" (?ResetClassParams@ClassDesc2@@UEAAXH@Z)
1>exporter.obj : error LNK2001: unresolved external symbol "public: virtual int __cdecl ClassDesc2::NumParamBlockDescs(void)" (?NumParamBlockDescs@ClassDesc2@@UEAAHXZ)
1>exporter.obj : error LNK2001: unresolved external symbol "public: virtual class ParamBlockDesc2 * __cdecl ClassDesc2::GetParamBlockDesc(int)" (?GetParamBlockDesc@ClassDesc2@@UEAAPEAVParamBlockDesc2@@H@Z)
1>exporter.obj : error LNK2001: unresolved external symbol "public: virtual class ParamBlockDesc2 * __cdecl ClassDesc2::GetParamBlockDescByID(short)" (?GetParamBlockDescByID@ClassDesc2@@UEAAPEAVParamBlockDesc2@@F@Z)
1>exporter.obj : error LNK2001: unresolved external symbol "public: virtual void __cdecl ClassDesc2::AddParamBlockDesc(class ParamBlockDesc2 *)" (?AddParamBlockDesc@ClassDesc2@@UEAAXPEAVParamBlockDesc2@@@Z)
1>exporter.obj : error LNK2001: unresolved external symbol "public: virtual void __cdecl ClassDesc2::BeginEditParams(class IObjParam *,class ReferenceMaker *,unsigned long,class Animatable *)" (?BeginEditParams@ClassDesc2@@UEAAXPEAVIObjParam@@PEAVReferenceMaker@@KPEAVAnimatable@@@Z)
1>exporter.obj : error LNK2001: unresolved external symbol "public: virtual void __cdecl ClassDesc2::EndEditParams(class IObjParam *,class ReferenceMaker *,unsigned long,class Animatable *)" (?EndEditParams@ClassDesc2@@UEAAXPEAVIObjParam@@PEAVReferenceMaker@@KPEAVAnimatable@@@Z)
1>exporter.obj : error LNK2001: unresolved external symbol "public: virtual void __cdecl ClassDesc2::InvalidateUI(class ParamBlockDesc2 *)" (?InvalidateUI@ClassDesc2@@UEAAXPEAVParamBlockDesc2@@@Z)
1>exporter.obj : error LNK2001: unresolved external symbol "public: virtual char * __cdecl ClassDesc::GetRsrcString(__int64)" (?GetRsrcString@ClassDesc@@UEAAPEAD_J@Z)
1>exporter.obj : error LNK2001: unresolved external symbol "public: virtual void __cdecl ClassDesc2::MakeAutoParamBlocks(class ReferenceMaker *)" (?MakeAutoParamBlocks@ClassDesc2@@UEAAXPEAVReferenceMaker@@@Z)
1>exporter.obj : error LNK2001: unresolved external symbol "public: virtual int __cdecl ClassDesc2::NumParamMaps(void)" (?NumParamMaps@ClassDesc2@@UEAAHXZ)
1>exporter.obj : error LNK2001: unresolved external symbol "public: virtual class IParamMap2 * __cdecl ClassDesc2::GetParamMap(int)" (?GetParamMap@ClassDesc2@@UEAAPEAVIParamMap2@@H@Z)
1>exporter.obj : error LNK2001: unresolved external symbol "public: virtual class FPInterface * __cdecl ClassDesc::GetInterface(char *)" (?GetInterface@ClassDesc@@UEAAPEAVFPInterface@@PEAD@Z)
1>exporter.obj : error LNK2001: unresolved external symbol "public: virtual class FPInterface * __cdecl ClassDesc::GetInterface(class Interface_ID)" (?GetInterface@ClassDesc@@UEAAPEAVFPInterface@@VInterface_ID@@@Z)
1>exporter.obj : error LNK2001: unresolved external symbol "public: virtual void __cdecl ClassDesc::AddInterface(class FPInterface *)" (?AddInterface@ClassDesc@@UEAAXPEAVFPInterface@@@Z)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: void __cdecl ClassDesc2::SetUserDlgProc(class ParamBlockDesc2 *,short,class ParamMap2UserDlgProc *)" (__imp_?SetUserDlgProc@ClassDesc2@@QEAAXPEAVParamBlockDesc2@@FPEAVParamMap2UserDlgProc@@@Z) referenced in function "public: virtual void __cdecl ClassDesc2::SetUserDlgProc(class ParamBlockDesc2 *,class ParamMap2UserDlgProc *)" (?SetUserDlgProc@ClassDesc2@@UEAAXPEAVParamBlockDesc2@@PEAVParamMap2UserDlgProc@@@Z)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual __cdecl ClassDesc2::~ClassDesc2(void)" (__imp_??1ClassDesc2@@UEAA@XZ) referenced in function "public: virtual __cdecl CMaxExporterClassDesc::~CMaxExporterClassDesc(void)" (??1CMaxExporterClassDesc@@UEAA@XZ)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) void __cdecl zfree(void * *)" (__imp_?zfree@@YAXPEAPEAX@Z) referenced in function "public: __cdecl Tab<class Point3>::~Tab<class Point3>(void)" (??1?$Tab@VPoint3@@@@QEAA@XZ)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) void __cdecl TBSetCount(struct TabHdr * *,int,int,int)" (__imp_?TBSetCount@@YAXPEAPEAUTabHdr@@HHH@Z) referenced in function "public: void __cdecl Tab<class Point3>::SetCount(int,int)" (?SetCount@?$Tab@VPoint3@@@@QEAAXHH@Z)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) class Point3 __cdecl Normalize(class Point3 const &)" (__imp_?Normalize@@YA?AVPoint3@@AEBV1@@Z) referenced in function "public: void __cdecl VNormal::Normalize(void)" (?Normalize@VNormal@@QEAAXXZ)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: class TVFace * __cdecl Mesh::mapFaces(int)const " (__imp_?mapFaces@Mesh@@QEBAPEAVTVFace@@H@Z) referenced in function "protected: void __cdecl CMaxExporter::ExportColors(class INode *,class Mesh &,struct pmesh::mesh_desc &)" (?ExportColors@CMaxExporter@@IEAAXPEAVINode@@AEAVMesh@@AEAUmesh_desc@pmesh@@@Z)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: class Point3 * __cdecl Mesh::mapVerts(int)const " (__imp_?mapVerts@Mesh@@QEBAPEAVPoint3@@H@Z) referenced in function "protected: void __cdecl CMaxExporter::ExportColors(class INode *,class Mesh &,struct pmesh::mesh_desc &)" (?ExportColors@CMaxExporter@@IEAAXPEAVINode@@AEAVMesh@@AEAUmesh_desc@pmesh@@@Z)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) class Point3 __cdecl operator*(class Point3 const &,class Matrix3 const &)" (__imp_??D@YA?AVPoint3@@AEBV0@AEBVMatrix3@@@Z) referenced in function "protected: void __cdecl CMaxExporter::ExportVertices(class INode *,class Mesh &,struct pmesh::mesh_desc &)" (?ExportVertices@CMaxExporter@@IEAAXPEAVINode@@AEAVMesh@@AEAUmesh_desc@pmesh@@@Z)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) void __cdecl ApplyScaling(class Matrix3 &,class ScaleValue const &)" (__imp_?ApplyScaling@@YAXAEAVMatrix3@@AEBVScaleValue@@@Z) referenced in function "protected: void __cdecl CMaxExporter::ExportVertices(class INode *,class Mesh &,struct pmesh::mesh_desc &)" (?ExportVertices@CMaxExporter@@IEAAXPEAVINode@@AEAVMesh@@AEAUmesh_desc@pmesh@@@Z)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) void __cdecl PreRotateMatrix(class Matrix3 &,class Quat const &)" (__imp_?PreRotateMatrix@@YAXAEAVMatrix3@@AEBVQuat@@@Z) referenced in function "protected: void __cdecl CMaxExporter::ExportVertices(class INode *,class Mesh &,struct pmesh::mesh_desc &)" (?ExportVertices@CMaxExporter@@IEAAXPEAVINode@@AEAVMesh@@AEAUmesh_desc@pmesh@@@Z)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: void __cdecl Matrix3::PreTranslate(class Point3 const &)" (__imp_?PreTranslate@Matrix3@@QEAAXAEBVPoint3@@@Z) referenced in function "protected: void __cdecl CMaxExporter::ExportVertices(class INode *,class Mesh &,struct pmesh::mesh_desc &)" (?ExportVertices@CMaxExporter@@IEAAXPEAVINode@@AEAVMesh@@AEAUmesh_desc@pmesh@@@Z)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: void __cdecl Matrix3::SetRow(int,class Point3)" (__imp_?SetRow@Matrix3@@QEAAXHVPoint3@@@Z) referenced in function "protected: void __cdecl CMaxExporter::ExportNormalsTangents(class INode *,class Mesh &,struct pmesh::mesh_desc &)" (?ExportNormalsTangents@CMaxExporter@@IEAAXPEAVINode@@AEAVMesh@@AEAUmesh_desc@pmesh@@@Z)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: class Point3 __cdecl Point3::operator^(class Point3 const &)const " (__imp_??TPoint3@@QEBA?AV0@AEBV0@@Z) referenced in function "protected: void __cdecl CMaxExporter::ExportNormalsTangents(class INode *,class Mesh &,struct pmesh::mesh_desc &)" (?ExportNormalsTangents@CMaxExporter@@IEAAXPEAVINode@@AEAVMesh@@AEAUmesh_desc@pmesh@@@Z)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __cdecl CStr::operator char *(void)" (__imp_??BCStr@@QEAAPEADXZ) referenced in function "protected: void __cdecl CMaxExporter::Log(char const *,struct pmesh::mesh_file &)" (?Log@CMaxExporter@@IEAAXPEBDAEAUmesh_file@pmesh@@@Z)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: static void * __cdecl MaxHeapOperators::operator new(unsigned __int64)" (__imp_??2MaxHeapOperators@@SAPEAX_K@Z) referenced in function "public: virtual void * __cdecl CMaxExporterClassDesc::Create(int)" (?Create@CMaxExporterClassDesc@@UEAAPEAXH@Z)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual __cdecl Mesh::~Mesh(void)" (__imp_??1Mesh@@UEAA@XZ) referenced in function "protected: void __cdecl CMaxExporter::ExportMesh(class INode *,class Object *,struct pmesh::mesh_node *,bool)" (?ExportMesh@CMaxExporter@@IEAAXPEAVINode@@PEAVObject@@PEAUmesh_node@pmesh@@_N@Z)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: int __cdecl Matrix3::Parity(void)const " (__imp_?Parity@Matrix3@@QEBAHXZ) referenced in function "protected: void __cdecl CMaxExporter::ExportMesh(class INode *,class Object *,struct pmesh::mesh_node *,bool)" (?ExportMesh@CMaxExporter@@IEAAXPEAVINode@@PEAVObject@@PEAUmesh_node@pmesh@@_N@Z)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __cdecl Mesh::Mesh(class Mesh const &)" (__imp_??0Mesh@@QEAA@AEBV0@@Z) referenced in function "protected: void __cdecl CMaxExporter::ExportMesh(class INode *,class Object *,struct pmesh::mesh_node *,bool)" (?ExportMesh@CMaxExporter@@IEAAXPEAVINode@@PEAVObject@@PEAUmesh_node@pmesh@@_N@Z)
1>exporter.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) void __cdecl DebugPrint(char const *,...)" (__imp_?DebugPrint@@YAXPEBDZZ) referenced in function "protected: void __cdecl CMaxExporter::ExportMesh(class INode *,class Object *,struct pmesh::mesh_node *,bool)" (?ExportMesh@CMaxExporter@@IEAAXPEAVINode@@PEAVObject@@PEAUmesh_node@pmesh@@_N@Z) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-29T19:36:42.467

作为任何有相同问题的人的后续行动：您需要在 Linker->General->AdditionalLibraryDirectories 中选择库的 x64 变体。使用默认选项安装 3Ds MAX SDK 后，它们应该位于：C:\Program Files (x86)\Autodesk\maxsdk\x64\lib；

# sql - 拆分列表时识别第 n 个项目？

> ID：15294610
> 
> 赞同：4
> 
> 时间：2013-03-08T13:01:26.057
> 
> 标签：sql, sql-server, tsql

我想提供一个`ROW_NUMBER`cte 能够从具有给定索引的序列中选择特定项目（如 array-indexer `arr[index]`）。当然，“序列”是来自表值函数（`Split`）的表。

那么当索引不可用时如何创建索引呢？这是查询：

```
DECLARE @string VARCHAR(100); 
SET @string='field1;field2;field3;field4;field5;field6;field7'; 
DECLARE @index INT; 
SET @index = 4; 

WITH cte 
     AS (SELECT item, 
                rn=Row_number() 
                     OVER( 
                       ORDER BY item) 
         FROM   dbo.Split(@string, ';')) 
SELECT TOP 1 item 
FROM   cte 
WHERE  rn = @index 
```

`Row_number() OVER(ORDER BY item)`按字母顺序排序，但实际上我想按（不可用）索引排序。

请注意，这个问题出现在[我](https://stackoverflow.com/a/15294380/284240)对[这个 so-question 的回答](https://stackoverflow.com/questions/15294211/how-to-get-substring-in-sqlsever-by-finding-nth-occurance-of-character)中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T13:07:32.663

当然，您只需要跟踪每个项目在列表中出现的位置。一种方法是让您的拆分函数插入一`IDENTITY`列。从[您引用的问题中得到我的回答](https://stackoverflow.com/a/15294672/61305)：

```
CREATE FUNCTION dbo.SplitStrings
(
    @List       NVARCHAR(MAX),
    @Delimiter  NVARCHAR(255)
)
RETURNS @t TABLE([Index] INT IDENTITY(1,1), Item NVARCHAR(255))
AS
BEGIN
    INSERT @t(Item) SELECT SUBSTRING(@List, Number, 
        CHARINDEX(@Delimiter, @List + @Delimiter, Number) - Number)
    FROM (SELECT ROW_NUMBER() OVER (ORDER BY [object_id])
        FROM sys.all_objects) AS n(Number)
    WHERE Number <= CONVERT(INT, LEN(@List))
        AND SUBSTRING(@Delimiter + @List, Number, 1) = @Delimiter
    ORDER BY Number OPTION (MAXDOP 1);

    RETURN;
END
GO

DECLARE @x TABLE(i INT, string NVARCHAR(4000));

INSERT @x SELECT 1, N'field1;field2;field3;field4;field5;'
UNION ALL SELECT 2, N'x;y;6;r;3;2;w;'
UNION ALL SELECT 3, N'ttt;444;rrr;333;111;444;777;888;';

SELECT x.i, s1.Item
FROM @x AS x
CROSS APPLY dbo.SplitStrings(x.string, ';') AS s1
WHERE s1.[Index] = 4; 
```

一种内联替代方案，在规模上*可能*会*稍微*友好一些：

```
CREATE FUNCTION dbo.SplitStrings
(
    @List       NVARCHAR(MAX),
    @Delimiter  NVARCHAR(255)
)
RETURNS TABLE
AS
    RETURN (SELECT [Index] = ROW_NUMBER() OVER (ORDER BY Number),
        Item FROM (SELECT Number, Item = LTRIM(RTRIM(SUBSTRING(@List, Number, 
        CHARINDEX(@Delimiter, @List + @Delimiter, Number) - Number)))
    FROM (SELECT ROW_NUMBER() OVER (ORDER BY [object_id])
        FROM sys.all_objects) AS n(Number)
    WHERE Number <= CONVERT(INT, LEN(@List))
        AND SUBSTRING(@Delimiter + @List, Number, LEN(@Delimiter)) = @Delimiter
    ) AS y);
GO 
```

当然，最终你会想要修复架构。如果此列表中的第 4 个元素是重要的数据，则应将其单独存储。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T13:46:42.487

如果字符串中的值是唯一的，则可以`ORDER BY charindex(';'+item+';', ';'+@string+';')`在`OVER()`子句中使用。

```
DECLARE @string VARCHAR(100); 
SET @string='field1;field2;field3;field4;field5;field6;field7'; 
DECLARE @index INT; 
SET @index = 4; 

WITH cte 
     AS (SELECT item, 
                rn=Row_number() 
                     OVER( 
                       ORDER BY charindex(';'+item+';', ';'+@string+';')) 
         FROM   dbo.Split(@string, ';')) 
SELECT TOP 1 item 
FROM   cte 
WHERE  rn = @index 
```

`charindex`返回`@string`每个提取的位置 in ，`item`因此`rn`根据位置 in 生成`@string`。

[SQL小提琴](http://sqlfiddle.com/#!6/8e5ce/1)

# jquery - 如果表格标题有多行并且跨度到表格单元格，则表格列大小调整不起作用

> ID：15294611
> 
> 赞同：5
> 
> 时间：2013-03-08T13:01:28.340
> 
> 标签：jquery, html, html-table, resize

我正在使用一个小部件（我在网上得到它）来调整表格列的大小。如果表头`<thead>`的行数相等，则它工作正常，但如果`colspan`属性设置为一行的单元格，则它不起作用。假设表格中有两行，六列。第一个单元格将具有`colspan=6`，第二个单元格将具有所有列。在这种情况下，调整大小应该适用于第二行。但它不起作用。

有人可以告诉我原因吗？

这是我的代码：

```
 <!DOCTYPE>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js"></script>
  <style>

table{
    table-layout: fixed;
    border-collapse: collapse;
    border: 1px solid black;   
}
tr.last td {
    border-bottom: 1px solid black;
}

td{
    border-right: 1px solid black;
    border-bottom: 1px solid black;
    position: relative;
    white-space:nowrap;
    padding: 2px 5px;
    text-align: left;
    overflow:hidden;
}

td.last {
  border-right: none;
}

thead td div:first-child{
  text-overflow:ellipsis;
  overflow:hidden;
}
tbody td div:first-child{
  overflow:hidden;
}

.scrollContainer {
    overflow:auto;
    width:700px;
    height:auto;
    display:inline-block;
    border:1px solid red;
}
.sort1,.sort2{
 height:20px;
 border:1px solid red;
 position:absolute;
 top:0px;
}
.sort1{
 background:url('popup_trg_indicator.gif') 50% 50% no-repeat; 
 width:10px;
 right:0px;
}

.sort2{
  background:url('sort_asc.gif') 50% 50% no-repeat;
   width:12px;
   right:10px;
}
.resizeHelper,.ui-resizable-e {
    cursor: e-resize;
    width: 10px;
    height: 100%;
    top: 0;
    right: -8px;
    position: absolute;
    z-index: 100;
    background:black;
}

</style>
<div class="scrollContainer">
    <table id="MyTable" width="100%">
         <thead>

             <tr>
                <td style="width:200px;" colspan="6">
                  <span >Column 1</span> 
                  <div class="resizeHelper ui-resizable-handle ui-resizable-e"></div>
                </td>
                <!--
                <td style="width:200px;">
                  <span >Column 2</span>
                  <div class="resizeHelper ui-resizable-handle ui-resizable-e"></div>
                </td>

                <td style="width:300px;">
                  <span >Column 3</span>
                  <div class="resizeHelper ui-resizable-handle ui-resizable-e"></div>
                </td>

                <td style="width:150px;">
                  <span >Column 4</span>
                  <div class="resizeHelper ui-resizable-handle ui-resizable-e"></div>
                </td>
                <td style="width:200px;">
                  <span >Column 5</span>
                  <div class="resizeHelper ui-resizable-handle ui-resizable-e"></div>
                 </td>
                <td class="last" style="width:100px;">
                   <span >Column 6</span>
                   <div class="resizeHelper ui-resizable-handle ui-resizable-e"></div>                  
                </td>
                -->
            </tr>

            <!-- Second Row -->
               <tr>
                <td style="width:200px;">
                  <span >Column 1.1</span> 
                  <div class="resizeHelper ui-resizable-handle ui-resizable-e"></div>
                </td>
                <td style="width:200px;">
                  <span >Column 2.2</span>
                  <div class="resizeHelper ui-resizable-handle ui-resizable-e"></div>
                </td>
                <td style="width:300px;">
                  <span >Column 3.3</span>
                  <div class="resizeHelper ui-resizable-handle ui-resizable-e"></div>
                </td>

                <td style="width:150px;">
                  <span >Column 4.4</span>
                  <div class="resizeHelper ui-resizable-handle ui-resizable-e"></div>
                </td>
                <td style="width:200px;">
                  <span >Column 5.5</span>
                  <div class="resizeHelper ui-resizable-handle ui-resizable-e"></div>
                 </td>
                <td class="last" style="width:100px;">
                   <span >Column 6.</span>
                   <div class="resizeHelper ui-resizable-handle ui-resizable-e"></div>                  
                </td>
            </tr>

        </thead>
        <tbody>
            <tr><td><div>Column 1</div></td><td><div>Column 2</div></td>
                <td><div>Column 3</div></td><td><div>Column 4</div></td>
                <td><div>Column 5</div></td><td><div>Column 6</div></td>
            </tr>

            <tr class="last">
                <td><div>Column 1</div></td><td><div>Column 2</div></td>
                <td><div>Column 3</div></td><td><div>Column 4</div></td>
                <td><div>Column 5</div></td><td><div>Column 6</div></td>
            </tr>
        </tbody>
    </table>
</div>
<div>Rama Rao</div>

<script>
 /**
 * Plug-in
 * Enables resizable data table columns.
 **/
(function($) {
   $.widget("ih.resizableColumns", {
       _create: function() {
            this._initResizable();
        },

        _initResizable: function() {

            var colElement, colWidth, originalSize,colIndex;
            var table = this.element;

            this.element.find("thead td").resizable({
                handles: {"e": ".resizeHelper"},
                minWidth: -10, // default min width in case there is no label
                // set correct COL element and original size
                start:function(event, ui) {
                    colIndex = ui.helper.index() + 1;
                    colElement = table.find("thead > tr > td.ui-resizable:nth-child(" + colIndex + ")");
                    colWidth = parseInt(colElement.get(0).style.width, 10); // faster than width
                    originalSize = ui.size.width;
                },                

                // set COL width
                resize: function(event, ui) {
                    var resizeDelta = ui.size.width - originalSize;                    
                    var newColWidth = colWidth + resizeDelta;
                    colElement.width(newColWidth);  

                    // height must be set in order to prevent IE9 to set wrong height
                    $(this).css("height", "auto");
                }
            });
        }

    });
})(jQuery);
</script>

<script>
$('#MyTable').resizableColumns();
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T20:06:27.477

如果你不使用 colspan 属性，上面的插件很棒。

```
colIndex = ui.helper.index() + 1;
colElement = table.find("thead > tr > td.ui-resizable:nth-child(" + colIndex + ")"); 
```

上面的代码行来自您提到的插件，负责捕获与它们上方的元素共享表中相同列索引的所有元素。

为了更好地理解这种情况，请在脚本中的任意位置添加以下行。

```
$(document).ready(function() {
    $("#MyTable tr td").each(function() {
        $(this).html($(this).index());
    });
}); 
```

这将使用每个单元格的列索引填充一个表：

![在此处输入图像描述](../Images/b584d7e086fe6e2094b9201baee839c6.png)

像上面提到的 DataTables（我真的很喜欢）这样的其他出色的 jQuery 插件也没有针对 colspan 场景的答案。

**编辑** 也许我给你的想法是这是不可能的。我想补充一点，您可以通过让插件知道存在跨越多列的单元格来修补此插件。尽管如此，您将不得不考虑几个边缘情况。

# eclipse - VisualSVN 服务器和 Eclipse 新存储库设置

> ID：15294615
> 
> 赞同：2
> 
> 时间：2013-03-08T13:01:41.013
> 
> 标签：eclipse, svn, visualsvn-server

如何在 Eclipse 中为 VisualSVN 服务器存储库设置新的存储库位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:02:24.243

It's simply a matter of entering the correct URL.

Note: The key thing to be aware of is you must enter the full path to the actual repository (project) and not the path only to the server root. As per: [http://www.visualsvn.com/support/topic/00011/](http://www.visualsvn.com/support/topic/00011/) "Please note that Subversion clients cannot browse the list of available Subversion repositories. You can only browse the content of a repository."

So `http://mysvn/svn/myproject` and not So `http://mysvn/svn`

# wordpress - 如何在wordpress中并排划分帖子博客

> ID：15294617
> 
> 赞同：0
> 
> 时间：2013-03-08T13:01:46.377
> 
> 标签：wordpress, wordpress-theming

我在 wordpress 中使用 Admired 主题。我使用“pages posts”插件来查看博客的帖子。在该博客文章中仅逐行显示。我想并排显示帖子（如左侧，右侧。）。如何做到这一点。请任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:01:27.880

看看我的答案： [Bootstrap Wordpress theme dev - How to use WP loop to generate span6 in a span12 layout](https://stackoverflow.com/questions/15120444/bootstrap-wordpress-theme-dev-how-to-use-wp-loop-to-generate-span6-in-a-span12/15125341#15125341)

在这种情况下，您将不需要插件，建议使用该插件以提高性能。

# android - 使用 WebViewClient shouldOverrideUrlLoading 时，WebChromeClient 中的链接无法打开 safari

> ID：15294618
> 
> 赞同：1
> 
> 时间：2013-03-08T13:01:46.913
> 
> 标签：android, webviewclient, webchromeclient, android-webview

我使用 WebChromeClient 在我的服务器上打开指向 news.html 的链接，它会打开 safari 并显示内容，好的。

但...

当我实现 WebViewClient shouldOverrideUrlLoading 以在调用链接到 .pdf 文件（使用另一个类）时拦截调用时，指向 news.html 的 WebChromeClient 链接保留在 webview 中并且不再打开 safari...

我做错了什么，但是什么？

*代码片段：（链接很长，所以我缩短了它）*

```
myWebView = (WebView)findViewById(R.id.webView);
myWebView.getSettings().setJavaScriptEnabled(true);

//only to catch url override
myWebView.setWebViewClient(new WebViewClient(){
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if(url.startsWith("http://www.domain.nl/pdf")){
        Intent i = new Intent();
                i.putExtra("url", url);
                i.setClassName("nl.domain.domain", "nl.domain.domain.PdfActivity");
                i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity(i);
                return true ;
                }
                else {
                    return false ;
                }
        }
});

myWebView.setWebChromeClient(new WebChromeClient());
//loading
myWebView.loadUrl("http://www.domain.nl/news.html"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:08:19.937

`return false;`表示该 url 未处理，应在`WebView`. 如果你想在外部浏览器中打开 url，你需要明确地这样做。

```
myWebView.setWebViewClient(new WebViewClient(){
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if(url.startsWith("http://www.domain.nl/pdf")){
            Intent i = new Intent();
            i.putExtra("url", url);
            i.setClassName("nl.domain.domain", "nl.domain.domain.PdfActivity");
            i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(i);
            return true ;
        }

        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(url));
        return true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T10:37:37.850

要打开 PDF 文件网址：

在 PDF 文件 url 字符串的开头添加“ [http://docs.google.com/viewerembedded=true&url= ”字符串...](http://docs.google.com/viewerembedded=true&url=)

试试这个它工作

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    WebView webView;

    webView = new WebView(this);

    WebSettings settings = webView.getSettings();
    settings.setJavaScriptEnabled(true);
    settings.setPluginsEnabled(true);
    webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);

    if (webUrl.equals(XmlFileUrl.MemberDownloadAppForm)) {
        webUrl = "http://docs.google.com/viewerembedded=true&url=" + webUrl;
    }

    webView.setWebViewClient(new WebViewClient() {
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
    });

    webView.loadUrl(url);

    setContentView(webView);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T13:41:13.200

一个帮助我做类似事情的例子[在这里](http://www.mysamplecode.com/2012/09/android-webview-example.html)

对于地理位置添加：

`myWebView.getSettings().setGeolocationEnabled(true);`

和 ：

```
private class MyWebChromeClient extends WebChromeClient {

  .........

 @Override
    public void onGeolocationPermissionsShowPrompt(String origin, GeolocationPermissions.Callback callback) 
    {
        // callback.invoke(String origin, boolean allow, boolean remember);              
        callback.invoke(origin, true, false);
    }
 } 
```

# php - 在 wordpress 中显示第五个帖子

> ID：15294621
> 
> 赞同：0
> 
> 时间：2013-03-08T13:01:54.887
> 
> 标签：php, wordpress

在我的 wordpress 网站中，如何从第五个帖子开始显示帖子？因为在我的网站顶部有一个幻灯片，显示前五个帖子的标题，在幻灯片下再次显示前五个帖子，它并不漂亮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:15:32.983

您可以使用**get_posts**或**query_posts**来显示除前五个之外的最新帖子。请记住 query_posts 通过更改全局变量 $wp_query 的变量来直接改变主循环。

这种看起来像你想要的，所以一个例子是修改你的主题的索引文件以包括：

```
query_posts('posts_per_page=5&offset=5'); 
```

*注意：*您可以将 posts_per_page 更改为您想要的任何内容。您还可以使用更多选项。

有关更多详细信息，请参阅以下文档：

*   [http://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts)
*   [http://codex.wordpress.org/Function_Reference/query_posts](http://codex.wordpress.org/Function_Reference/query_posts)

***TLDR：***使用 WP_Query 中的偏移量参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:18:42.653

如果您熟悉 PHP，此代码将解决您的问题。设置一个逻辑以不显示前 5 个帖子的数据，如下所示：

```
$i = 0;
while (have_posts()) {  
     ++$i;   
     if ($i > 5) {
         the_title(); 
         // and more content
     }
} 
```

这将仅在循环内显示数据`$i > 5`。

# ruby-on-rails - 使用 Rails 发送多部分电子邮件：如何支持 HTML 版本而不是纯文本版本？

> ID：15294624
> 
> 赞同：9
> 
> 时间：2013-03-08T13:02:01.517
> 
> 标签：ruby-on-rails, ruby-on-rails-3, email, html-email

我按照官方指南设置了一个带有多部分视图的标准 Rails 邮件程序，如下所示：

```
mail(to: user.email, subject: "Welcome") do |format|
   format.html { render layout: 'my_layout' }
   format.text
end 
```

以明确和普遍的意图优先考虑 html 版本的消息，结果发现，正如[本文所指出的那样](http://www.tui8.com/2012/04/25/how-to-send-multipart-email/)`format.html`，在之前调用`format.text`使得很多邮件客户端只显示消息的文本版本。在我的例子中，我用 Gmail 和 Mozilla Thunderbird 验证了（并努力解决了这个问题）。

是否有可靠的解决方案优先考虑 html 版本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-18T14:15:08.547

到目前为止，我发现的唯一解决方案是切换`format.html`，`format.text`以便在 html格式*之前调用文本格式。*这与人们所期望的完全*相反。*

# android - Eclipse 连接到 android 调试器，但没有进入调试模式 - 出了什么问题？

> ID：15294627
> 
> 赞同：3
> 
> 时间：2013-03-08T13:02:11.307
> 
> 标签：android, eclipse

我无法调试我的 Android 应用程序。我在应用程序的 onCreate() 方法中设置了一个断点，并从 Eclipse 以调试模式启动应用程序。调试器成功连接，应用程序和设备在我设置断点的地方冻结，但 Eclipse 并没有将焦点放在它暂停的代码行上。

运行菜单的所有调试命令都显示为灰色（步过、步入等）。我打开了DDMS透视图，可以看到调试器连接成功了。我可以在那里找到我的进程并停止它，它会在电话上给出预期的结果。我也尝试了[该线程](https://stackoverflow.com/questions/4375375/how-to-resolve-waiting-for-debugger-message)的所有建议，但无济于事，但它再次尝试解决不同的问题（未连接）。

有什么建议么？

*更多信息：*我也尝试过以下方法：

*   从手机中卸载应用程序。
*   重启手机。
*   重启亚行。
*   重启日食
*   重新启动计算机

操作系统是 Windows 8。Eclipse 版本 Juno。我几天前才成功调试，所以一定是我做了什么让这个停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:25:26.840

尝试转到“设备”视图（窗口 > 显示视图 > 设备）。

在其中，搜索您的应用程序的进程，选择它，然后单击![在此处输入图像描述](../Images/abc4aaee1f5fb98203719280fb2f5636.png)按钮。

之后，在调试模式下运行您的应用程序。

# c# - WCF 异常 IErrorHandler 没有被调用

> ID：15294628
> 
> 赞同：4
> 
> 时间：2013-03-08T13:02:15.393
> 
> 标签：c#, wcf, exception, ierrorhandler

我似乎无法让`IErrorHandler`界面正常工作。我的代码是

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Diagnostics;
using System.ServiceModel;
using System.ServiceModel.Channels;
using System.ServiceModel.Configuration;
using System.ServiceModel.Description;
using System.ServiceModel.Dispatcher;

namespace WcfService3
{
    public class Service1 : IService1
    {
        public string GetData(int value)
        {
            throw new Exception("asdf");

        }
    }

    public class MyErrorHandler : IErrorHandler
    {
        public MyErrorHandler()
        {
            string Hello = "";
        }
        public bool HandleError(Exception error)
        {
            return true;
        }

        public void ProvideFault(Exception error, MessageVersion version, ref Message msg)
        {
            var vfc = new MyFault();
            var fe = new FaultException<MyFault>(vfc);
            var fault = fe.CreateMessageFault();
            msg = Message.CreateMessage(version, fault, "http://ns");
        }
    }

    public class ErrorHandlerExtension : BehaviorExtensionElement, IServiceBehavior
    {
        public override Type BehaviorType
        {
            get { return GetType(); }
        }

        protected override object CreateBehavior()
        {
            return this;
        }

        private IErrorHandler GetInstance()
        {
            return new MyErrorHandler();
        }

        void IServiceBehavior.AddBindingParameters(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase, Collection<ServiceEndpoint> endpoints, BindingParameterCollection bindingParameters)
        {
        }

        void IServiceBehavior.ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
        {
            IErrorHandler errorHandlerInstance = GetInstance();
            foreach (ChannelDispatcher dispatcher in serviceHostBase.ChannelDispatchers)
            {
                dispatcher.ErrorHandlers.Add(errorHandlerInstance);
            }
        }

        void IServiceBehavior.Validate(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
        {
            foreach (ServiceEndpoint endpoint in serviceDescription.Endpoints)
            {
                if (endpoint.Contract.Name.Equals("IMetadataExchange") &&
                    endpoint.Contract.Namespace.Equals("http://schemas.microsoft.com/2006/04/mex"))
                    continue;

                foreach (OperationDescription description in endpoint.Contract.Operations)
                {
                    if (description.Faults.Count == 0)
                    {
                        throw new InvalidOperationException("FaultContractAttribute not found on this method");
                    }
                }
            }
        }
    }
} 
```

我的 web.config 是：

```
<?xml version="1.0"?>
<configuration>

  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5"/>
  </system.web>
  <system.serviceModel>
      <services>
    <service name="WcfService3.Service1">
      <endpoint address=""
                binding="basicHttpBinding"
                contract="WcfService3.IService1" />
    </service>
  </services>

    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
      <extensions>
    <behaviorExtensions>
      <add name="errorHandler"
            type="WcfService3.ErrorHandlerExtension, WcfService3, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
    </behaviorExtensions>
  </extensions>

    <protocolMapping>
        <add binding="basicHttpsBinding" scheme="https" />
    </protocolMapping>    
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true"/>
  </system.webServer>

</configuration> 
```

我的 WCF 界面是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;

namespace WcfService3
{
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        [FaultContract(typeof(MyFault))]
        string GetData(int value);
    }

    [DataContract]
    public class MyFault
    {

    }

} 
```

我的问题是在 WCF 中的 IErrorHandler 中，如果在 WCF 服务调用过程中出现任何异常，该`HandlerError()`函数应该像 C# windows 应用程序 UnhandledException 类一样首先被调用，然后服务应该崩溃对吗？在上面的代码中，在服务调用期间，抛出了一个异常，但在`HandlerError`抛出异常之前我的函数没有被调用？我的目标是记录错误，WCF 服务可以抛出未处理的异常并崩溃。我在调试过程中期望断点将访问 HandleError 函数，但该函数没有被调用，只是出现了一个异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-10T20:57:21.457

你不是`<errorHandler />`在你的`behavior`部分失踪吗？

```
<behavior>
    <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
    <serviceDebug includeExceptionDetailInFaults="false"/>
    <!-- HERE -->
    <errorHandler />
    <!-- HERE -->
</behavior> 
```

完整的答案在[这里](https://stackoverflow.com/questions/3036692/ierrorhandler-doesnt-seem-to-be-handling-my-errors-in-wcf-any-ideas?rq=1)。对该答案加1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-02T19:36:05.573

万一其他人遇到这个，当我遇到这个错误时，这是​​因为从某个 LINQ 表达式调用的方法中抛出了错误。直到 WCF 尝试序列化响应之后才实际调用该方法，然后将响应抛出服务范围之外。WCF 不会将这些错误传递给 IErrorHandler。

在使用 .ToList() 返回之前具体化列表为我解决了这个问题。

# php - php中的密码加密，如web2py

> ID：15294629
> 
> 赞同：2
> 
> 时间：2013-03-08T13:02:17.263
> 
> 标签：php, python, web2py, salt, password-hash

我不会在 php 中实现在 web2py 中完成的密码哈希，现在我从 massimo de piero 创建的 web2py 中得到了一些关于如何做到这一点的说明，但我仍然无法在 php 中实现它，说明如下：

逻辑非常复杂，因为它需要处理许多选项并且不破坏向后兼容性。

通常哈希密码看起来像

算法$salt$hash 算法$$hash（无盐）hash（遗留）

哈希使用算法、盐和可选的用户提供的密钥进行计算。钥匙是独一无二的。每个密码的盐是不同的。

每次调用 CRYPT()('password') 时，都会得到一个 LazyCrypt 对象。该对象可以序列化为字符串。你得到的字符串总是不同的，因为它包含一个随机的盐。您无法比较其中两个字符串，因为即使密码相同，您也总是会得到错误。然而，您可以将 LazyObject 与字符串进行比较，并且惰性对象将使用相同的算法和字符串中的相同盐来计算哈希并将其与字符串中的哈希进行比较。例子：

```
>>> a = CRYPT()('password')
>>> b = CRYPT()('password')
>>> sa = str(a)
>>> sb = str(b)
>>> sa == sb
False
>>> a == sb
True
>>> c = CRYPT()('wrong')
>>> c == sb
False 
```

以下是 web2py 框架中用于实现该加密的类：

```
class LazyCrypt(object):
    """
    Stores a lazy password hash
    """

    def __init__(self, crypt, password):
        """
        crypt is an instance of the CRYPT validator,
        password is the password as inserted by the user
        """
        self.crypt = crypt
        self.password = password
        self.crypted = None

    def __str__(self):
        """
        Encrypted self.password and caches it in self.crypted.
        If self.crypt.salt the output is in the format <algorithm>$<salt>$<hash>
        Try get the digest_alg from the key (if it exists)
        else assume the default digest_alg. If not key at all, set key=''
        If a salt is specified use it, if salt is True, set salt to uuid
        (this should all be backward compatible)
        Options:
        key = 'uuid'
        key = 'md5:uuid'
        key = 'sha512:uuid'
        ...
        key = 'pbkdf2(1000,64,sha512):uuid' 1000 iterations and 64 chars length
        """
        if self.crypted:
            return self.crypted
        if self.crypt.key:
            if ':' in self.crypt.key:
                digest_alg, key = self.crypt.key.split(':', 1)
            else:
                digest_alg, key = self.crypt.digest_alg, self.crypt.key
        else:
            digest_alg, key = self.crypt.digest_alg, ''
        if self.crypt.salt:
            if self.crypt.salt == True:
                salt = str(web2py_uuid()).replace('-', '')[-16:]
            else:
                salt = self.crypt.salt
        else:
            salt = ''

        hashed = simple_hash(self.password, key, salt, digest_alg)
        self.crypted = '%s$%s$%s' % (digest_alg, salt, hashed)
        return self.crypted

    def __eq__(self, stored_password):
        """
        compares the current lazy crypted password with a stored password
        """
        # LazyCrypt objects comparison
        if isinstance(stored_password, self.__class__):
            return ((self is stored_password) or
                   ((self.crypt.key == stored_password.crypt.key) and
                   (self.password == stored_password.password)))

        if self.crypt.key:
            if ':' in self.crypt.key:
                key = self.crypt.key.split(':')[1]
            else:
                key = self.crypt.key
        else:
            key = ''
        if stored_password is None:
            return False
        elif stored_password.count('$') == 2:
            (digest_alg, salt, hash) = stored_password.split('$')
            h = simple_hash(self.password, key, salt, digest_alg)
            temp_pass = '%s$%s$%s' % (digest_alg, salt, h)
        else:  # no salting
            # guess digest_alg
            digest_alg = DIGEST_ALG_BY_SIZE.get(len(stored_password), None)

            if not digest_alg:
                return False
            else:
                temp_pass = simple_hash(self.password, key, '', digest_alg)
        return temp_pass == stored_password

class CRYPT(object):

    """
    example::
        INPUT(_type='text', _name='name', requires=CRYPT())
    encodes the value on validation with a digest.
    If no arguments are provided CRYPT uses the MD5 algorithm.
    If the key argument is provided the HMAC+MD5 algorithm is used.
    If the digest_alg is specified this is used to replace the
    MD5 with, for example, SHA512\. The digest_alg can be
    the name of a hashlib algorithm as a string or the algorithm itself.
    min_length is the minimal password length (default 4) - IS_STRONG for serious security
    error_message is the message if password is too short

    Notice that an empty password is accepted but invalid. It will not allow login back.

    Stores junk as hashed password.
    Specify an algorithm or by default we will use sha512.
    Typical available algorithms:
      md5, sha1, sha224, sha256, sha384, sha512

    If salt, it hashes a password with a salt.
    If salt is True, this method will automatically generate one.
    Either case it returns an encrypted password string in the following format:

      <algorithm>$<salt>$<hash>

    Important: hashed password is returned as a LazyCrypt object and computed only if needed.
    The LasyCrypt object also knows how to compare itself with an existing salted password

    Supports standard algorithms

    >>> for alg in ('md5','sha1','sha256','sha384','sha512'):

    ...     print str(CRYPT(digest_alg=alg,salt=True)('test')[0])
    md5$...$...
    sha1$...$...
    sha256$...$...
    sha384$...$...
    sha512$...$...

    The syntax is always alg$salt$hash

    Supports for pbkdf2
    >>> alg = 'pbkdf2(1000,20,sha512)'
    >>> print str(CRYPT(digest_alg=alg,salt=True)('test')[0])
    pbkdf2(1000,20,sha512)$...$...

    An optional hmac_key can be specified and it is used as salt prefix
    >>> a = str(CRYPT(digest_alg='md5',key='mykey',salt=True)('test')[0])
    >>> print a
    md5$...$...

    Even if the algorithm changes the hash can still be validated
    >>> CRYPT(digest_alg='sha1',key='mykey',salt=True)('test')[0] == a
    True

    If no salt is specified CRYPT can guess the algorithms from length:
    >>> a = str(CRYPT(digest_alg='sha1',salt=False)('test')[0])
    >>> a
    'sha1$$a94a8fe5ccb19ba61c4c0873d391e987982fbbd3'
    >>> CRYPT(digest_alg='sha1',salt=False)('test')[0] == a
    True
    >>> CRYPT(digest_alg='sha1',salt=False)('test')[0] == a[6:]
    True
    >>> CRYPT(digest_alg='md5',salt=False)('test')[0] == a
    True
    >>> CRYPT(digest_alg='md5',salt=False)('test')[0] == a[6:]
    True
    """

    def __init__(self,
                 key=None,
                 digest_alg='pbkdf2(1000,20,sha512)',
                 min_length=0,
                 error_message='too short', salt=True):

        """
        important, digest_alg='md5' is not the default hashing algorithm for
        web2py. This is only an example of usage of this function.

        The actual hash algorithm is determined from the key which is
        generated by web2py in tools.py. This defaults to hmac+sha512.
        """

        self.key = key
        self.digest_alg = digest_alg
        self.min_length = min_length
        self.error_message = error_message
        self.salt = salt

    def __call__(self, value):
        if len(value) < self.min_length:
            return ('', translate(self.error_message))
        return (LazyCrypt(self, value), None) 
```

希望有人能指导我一点，最好的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-01T22:08:35.567

您想使用[`password_hash()`](https://secure.php.net/manual/en/function.password-hash.php)and[`password_verify()`](https://secure.php.net/manual/en/function.password-verify.php)而不是`crypt()`直接使用。

# java - Selenium / Firefox：命令“.click()”不适用于找到的元素

> ID：15294630
> 
> 赞同：20
> 
> 时间：2013-03-08T13:02:17.427
> 
> 标签：java, firefox, selenium, selenium-webdriver

我试图找到解决这个问题的方法，我花了很多时间，但我几乎不可能做到这一点。

问题：我在 Firefox 中使用 Selenium 和 Java。我需要找到一个元素（一个列表框）并单击它。因此，代码找到了元素，但单击操作不起作用。它每次都在 Google Chrome 中运行良好，有时在 Firefox 中运行良好（使用相同的 Java 代码有时可行，有时不可行）。

**程序进入页面时，有部分代码带有元素：**

```
 <div id="size-btn" class="size-btn">
      <span class="selected-size">SELECCIONA TALLA </span>
      <div class="size-select" style="display: none;">
        <table>
          <tbody>
            <tr id="selecsize_2" class="product-size" data-ga-props="{action:'Seleccionar_Producto', opt_label:'Escoger_Talla'}" data-catentryid="1051607">
            <tr id="selecsize_3" class="product-size" data-ga-props="{action:'Seleccionar_Producto', opt_label:'Escoger_Talla'}" data-catentryid="1051608">
            <tr id="selecsize_4" class="product-size" data-ga-props="{action:'Seleccionar_Producto', opt_label:'Escoger_Talla'}" data-catentryid="1051609">
            <tr id="selecsize_5" class="product-size" data-ga-props="{action:'Seleccionar_Producto', opt_label:'Escoger_Talla'}" data-catentryid="1051610">
          </tbody>
        </table>
      <button class="size-guide gaViewEvent gaTrack" data-ga-props="{action:'Seleccionar_Talla', opt_label:'Guia_de_tallas'}" data-href="http://www.anyweb.com/webapp/wcs/stores/servlet/ProductGuideSizeAjaxView?catalogId=24052&categoryId=358056&langId=-5&productId=1047599&storeId=10701">Guía de tallas</button>
      </div>
    </div> 
```

**当元素被点击时，有一部分代码会发生变化：**

```
 <div id="size-btn" class="size-btn opened"> 
```

我尝试了许多解决方案，有时它可以工作，但是下次我运行该程序时，它就不再工作了。

一些解决方案：

1.  它找到元素，但不运行单击操作。我检查了 xpath 和 cssSelector，并在这些表达式中找到了独特的元素。

    ```
    driver.findElement(By.xpath("//div[@id='size-btn' and not(contains(@class,'opened'))]/span")).click(); // Also checked with By.cssSelector("span.selected-size") 
    ```

2.  我虽然是因为时间的关系，所以我试图以这种方式解决它。

    ```
    WebElement we = driver.findElement(By.xpath("//div[@id='size-btn' and not(contains(@class,'opened'))]/span")); // By.cssSelector("span.selected-size")
    Thread.sleep(3000);
    we.click(); 
    ```

3.  最后，我有点绝望，我创建了一个新函数来尝试这样做将近 60 次，寻找元素代码的变化，如果有任何变化，就再次尝试点击动作。

    ```
    clickAndWaitWhileElementIsNotPresent(By.xpath("//div[@id='size-btn' and not(contains(@class,'opened'))]/span"),By.xpath("//div[@class='size-btn opened']/span")); // By.cssSelector("span.selected-size")

    private void clickAndWaitWhileElementIsNotPresent(By by1, By by2) throws Exception {
        for (int second = 0;; second++) {
            if (second >= 60)
                fail("timeout");
            try {
                if (isElementPresent(by2))
                {
                    break;
                }
                else
                {
                    driver.findElement(by1).click();
                }
            } catch (Exception e) {
            }
            Thread.sleep(1000);
        }
    } 
    ```

有元素的图像：

![元素 1](../Images/27eda449d1176ae60020517780775549.png) ![元素 2](../Images/01decd2d5993ca400255708e46732e6b.png)

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-12T10:15:43.357

最后我找到了一个适用于 Firefox 和 Google Chrome 的答案。

```
WebElement we = this.driver.findElement(By.id("size-btn"));

JavascriptExecutor executor = (JavascriptExecutor) driver;
executor.executeScript("arguments[0].click();", we);

waitForElementPresent(By.xpath("//div[@id='size-btn' and contains(@class,'opened')]/span")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T14:51:27.683

我不确定你为什么要使用这个 Xpath，如果你可以自由更改 Xpath，然后使用 selenium IDE 记录元素并`Xpath::position`从下拉列表中使用`target`（它选择相对于 html 标头的唯一路径），它将解决动态定位器的问题. 并尝试以下提到的事件。

1-使用`clickAt`。

2- 使用`fireevent(focus)`然后单击。有时它会发生背景中的某些元素正在加载，当它被加载时，焦点移动到那里，因此 elementNotVisible 错误。

3-使用`mouseDownRight`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-18T18:40:05.847

我在 Firefox 中遇到了同样的问题。诀窍是单击不是按钮本身内部的文本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-14T17:57:57.523

我有一些解决方案，用机器人创建一个类，将 TAB 事件键放在那里，然后调用该类。它的作用就像回到页面上一样。对于某些 razon，页面失去了焦点，再也找不到那个按钮。

```
 Robot robot;
    try {
        robot = new Robot();
        robot.keyPress(KeyEvent.VK_TAB);
        robot.keyRelease(KeyEvent.VK_TAB);

    } catch (AWTException e) {e.printStackTrace();} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-22T15:21:16.290

您可以尝试使用 org.openqa.selenium.interactions 中的 Actions 类：

```
WebElement element = driver.findElement(By.id("size-btn"));
Actions builder = new Actions(driver);

builder.moveToElement(element).click(element);
builder.perform(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-30T09:04:23.100

```
Actions actions = new Actions(driver);
actions.moveToElement(element);
actions.click(element);
Action action = actions.build();
action.perform(); 
```

这对我有用。

# jboss - SEAM pages.xml 条件重定向

> ID：15294631
> 
> 赞同：0
> 
> 时间：2013-03-08T13:02:17.697
> 
> 标签：jboss, seam, seam2

我正在使用 SEAM 2.2.2 (JBoss AS6)，试图实现以下导航逻辑：

我有 3 种用户类型：用户、客户、管理员

对于每种类型，我都使用以下页面规则...

```
<page login-required="true" view-id="/admin/*">
    <restrict>#{s:hasRole('admin')}</restrict>
    <navigation from-action="#{identity.logout}">
        <end-conversation/>
        <redirect view-id="/admin-login"/>
    </navigation>
</page> 
```

在用户注销时将其转发到登录页面

和

```
<exception class="org.jboss.seam.security.NotLoggedInException" log="false">
    <redirect view-id="/index.xhtml"/>
</exception>
<exception class="org.jboss.seam.security.AuthorizationException" log="false">
    <end-conversation/>
    <redirect view-id="/index.xhtml"/>
</exception> 
```

反弹未登录的用户。但是，我不想将它们重定向到索引页面，而是将它们重定向到各自的登录页面，例如，如果我尝试在不登录的情况下访问 /admin/somePage.xhtml，我我被重定向到 /admin-login 页面

我想我需要以某种方式获取请求的页面作为 pages.xml 中的参数，但是查看了文档后我什么也看不到

如下所示（例如）...

```
<exception class="org.jboss.seam.security.NotLoggedInException" log="false">
    <rule if="#{requestedPage}='/admin/*'">
        <redirect view-id="/admin-login"/>
    </rule>
</exception> 
```

更新：

我还尝试了以下方法，

```
 <page login-required="true" view-id="/admin/*">
        <restrict>#{s:hasRole('admin')}</restrict>
        <rule if="#{!s:hasRole('admin')}">
            <redirect view-id="/admin-login"/>
        </rule>
        <navigation from-action="#{identity.logout}">
            <end-conversation/>
            <redirect view-id="/admin-login"/>
        </navigation>
    </page> 
```

但是 org.jboss.seam.security.NotLoggedInException 覆盖它并转发到 index.xhtml。

在谷歌搜索之后，我在这里发现了同样的问题：[https](https://community.jboss.org/thread/191214) ://community.jboss.org/thread/191214有一个（不理想的）解决方案，如果有人可以描述一个更好的解决方案，请告诉我，否则我会使用这个一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:57:07.447

好的，我在这里[https://community.jboss.org/thread/191214](https://community.jboss.org/thread/191214)发现了同样的问题，并使用了线程末尾提供的解决方案，似乎效果很好。

# paypal - 在 Paypal Sandbox 中模拟失败的 IPN 交易

> ID：15294632
> 
> 赞同：2
> 
> 时间：2013-03-08T13:02:18.833
> 
> 标签：paypal, sandbox, paypal-ipn

我有一个使用 Paypal 的 IPN 接口的应用程序，它在开发时指向沙盒站点。

我已经让它正确处理成功案例，以及我在帐户设置过程中意外生成的失败案例；-) 我找不到的是如何模拟交易被拒绝、退款或撤销（除了完全生成通过测试工具伪造 IPN，但这不会与我的交易绑定，所以不是一个很好的测试）。我已经尝试启用负面测试，但这似乎没有任何不同。

是否可以使用沙盒测试这些结果，如果可以，我需要设置什么来创建它们？谢谢 ：-）

编辑：这是为测试事务提交的表单代码。

```
<form id="payForm" method="post" 
      action="https://www.sandbox.paypal.com/cgi-bin/webscr">
    <input type="hidden" name="cmd" value="_xclick" />
    <input type="hidden" name="business" 
                         value="greg_1362574680_biz@gregwebb.co.uk" />
    <input type="hidden" name="item_number" value="1_25_2013-03-2221:02:02.063" />
    <input type="hidden" name="item_name"
                         value="ISM Print Subscription - One Year" />
    <input type="hidden" name="amount" value="20.00" />
    <input type="hidden" name="no_shipping" value="1" />
    <input type="hidden" name="return" 
                         value="http://ism.gregwebb.co.uk/?p=PaymentReceived" />
    <input type="hidden" name="rm" value="" />

    <input type="hidden" name="notify_url" 
                         value="http://ism.gregwebb.co.uk/Payment/Paypal/IPNRecv.aspx" />
    <input type="hidden" name="cancel_return" 
                         value="http://ism.gregwebb.co.uk/?p=PaymentCancelled" />
    <input type="hidden" name="currency_code" value="GBP" />
    <input type="hidden" name="custom" value="1_25_2013-03-2221:02:02.063" />   
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:35:49.333

您可以在您的测试帐户上启用付款审查以允许您对此进行测试。您还可以在处理事务时使用特定值来触发特定条件。您将需要使用负面测试。[您可以在此处](https://www.x.com/developers/paypal/documentation-tools/ug_sandbox)找到有关沙盒和负面测试的更多信息。

默认情况下，沙盒会尽可能地模仿实时的 PayPal 网站。这意味着只有通过创建确切的条件和事件序列来引发错误，才能复制错误条件。沙盒是一个积极的测试环境，它非常适合测试您的程序逻辑，因为它遵循无错误的路径。但是，您也可以使用沙盒进行负面测试，这意味着您可以强制流程通过您期望遇到的不同错误条件。

使用否定测试来测试以下类型的错误：

```
Errors that result from calling a PayPal API.
Address verification and credit card validation errors that occur through Virtual Terminal, or by calling DoDirectPayment. 
```

注意：负面测试仅适用于 2.4 版及更高版本的经典 PayPal API。

您通过在传递给 API 操作的字段中设置错误值来引发错误情况。通过将不同的输入值设置为错误状态，您可以触发 API 响应特定的错误条件。负面测试仅在沙盒中可用；您不能在实时 PayPal 网站上强制或模拟错误情况。

要启用负面测试：

```
Navigate to the Profile > Settings page of your test merchant's Business account.
Set Negative Testing to On. 
```

这会将沙盒设置为包括商家在内的交易的负面测试状态。如果没有此配置，沙盒不会引发错误条件，除非在默认的正面测试环境中会引发错误。

# perl - 在 Perl 中，我可以在一个文件中创建一个仅在另一个文件中的测试运行后运行的测试吗？

> ID：15294633
> 
> 赞同：2
> 
> 时间：2013-03-08T13:02:20.917
> 
> 标签：perl, testing

我正在我编写的 Perl 模块上运行测试文件，我希望有一个条件，即某些测试仅在其他测试成功运行后运行（但仍将它们保存在单独的文件中）。

我在看[Test::Builder](http://perldoc.perl.org/Test/Builder.html)，但我认为它不适合跨文件测试。

只是为了解释我为什么要这样做；我的模块中的每个子例程都有一个测试文件。其中一些子例程从其他子例程传递大散列，这些散列很难复制以用于测试目的。

因此，与其花几个小时尝试对可测试的哈希进行硬编码，不如只在测试了生成该哈希的子例程之后，才从代码中传递一个。

我希望这是有道理的！我可以编写一个脚本来按特定顺序运行测试，但我认为 Perl 测试模块中可能已经有一个我没有见过的特性。在使用模块时，我理想地希望能够运行测试而不必摆弄“make test”位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:24:02.140

Perl 测试工具似乎按字母顺序运行测试文件。这就是为什么这么多 CPAN 发行版都有以数字开头的测试文件——以便作者可以控制测试执行的顺序。例如，如果有人使用`prove -s`.

一般来说，测试文件应该被视为一个完全独立的测试单元。您应该能够以任何顺序运行所有测试，而不会影响任何其他测试。如果两个测试相互依赖，那么它们应该在同一个文件中。

您还没有解释为什么您如此热衷于将这些测试放在单独的文件中。也许这就是你应该质疑的假设。

# ios - Why does last cell's height of UITableView get used for remaining empty cells?

> ID：15294636
> 
> 赞同：4
> 
> 时间：2013-03-08T13:02:22.633
> 
> 标签：ios, uitableview

My cells all have varying heights, determined by text entered by the user.

Whatever height the last cell takes on seems to determine (change) the height for all remaining blank cells.

It doesn't appear that heightForRowAtIndexPath is getting called for these remaining, empty cells, nor is CFRAIP.

Does anyone know how to fix this or why it is happening?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T13:26:57.023

将此代码放在放置Tableview的viewController的viewDidLoad中。

`self.tableView.tableFooterView = [[UIView alloc] init];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T17:52:46.067

我也遇到了问题。这让我很沮丧。经过一番考虑，我认为它可能是 tableview 的一个特性，它显示空白单元格。使用空白单元格的最后一个单元格高度是合理的。否则，选择使用什么高度？
我认为显示黑色单元格是不可接受的。如果你像我一样不喜欢这种风格，你可以试试这个去掉空白单元格：

```
self.tableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectZero]; 
```

或者

```
self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
//then add view for separator line by yourself 
```

或者

```
 UITableView *tableView = [[UITableView alloc] initWithFrame:self.tableView.frame style:UITableViewStyleGrouped];
tableView.backgroundColor = self.tableView.backgroundColor;
self.tableView = tableView; 
```

如果您必须显示空白单元格并控制高度，也许这是添加额外单元格的最简单方法/解决方法。例如：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
   return self.dataArray == nil || self.dataArray.count == 0 ? 1 : self.dataArray + 1;
}

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    if(indexPath.count == self.dataArray.count){ //the last cell
       cell = [[UITableViewCell alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 50)];
    } else {
       cell = .... //as uausal
    }

    return cell;
   }

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    if(indexPath.count == self.dataArray.count){
      return 50;
   } else {
    return xxx; //as usual
   }
 } 
```

现在我们可以控制任何高度！

希望它可以帮助你。

您也可以参考链接：[如何修改普通 UITableView 中“空”单元格的外观？](https://stackoverflow.com/questions/1022637/how-can-i-modify-the-appearance-of-empty-cells-in-plain-uitableview)

# android - Need to get the X and Y value of image where it clicked I am using image which larger then device in android

> ID：15294638
> 
> 赞同：0
> 
> 时间：2013-03-08T13:02:24.167
> 
> 标签：android, image, android-layout, canvas

Hi, I know how to get the clicked position in screen .. my problem is I need to get the X and Y value of image where it clicked. It works fine if I have image size lesser then device but it goes wrong when using the large image.

I am Using horizontal and vertical scroll view to show the large image.

Using the `event.getX()` to get the position in the touch listener.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:31:58.070

要获取图像上的 X 和 Y 值，请将以下代码放入 OnTouchListener。

```
public boolean onTouch (View v, MotionEvent ev) 
{
    final int action = ev.getAction();

    final int evX = (int) ev.getX();
    final int evY = (int) ev.getY();
} 
```

# xslt - XSLT get type of an attribute from DTD

> ID：15294644
> 
> 赞同：2
> 
> 时间：2013-03-08T13:02:50.710
> 
> 标签：xslt, types, attributes, element, dtd

Given a valid entry in the DTD of a document:

```
<!ATTLIST name
               id  CDATA    #IMPLIED 
               attribute  ENTITY    #IMPLIED  > 
```

How can I get the type of an attribute during xslt transformation, given the name of the attribute and the node?

For example name/@id = 'CDATA'

and name/@attribute = 'ENTITY'

Thanks in advance!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T15:10:46.740

此信息不是 Xpath 数据模型的一部分，并且 XML 解析器不会将其报告给 XSLT（实际上您通常不能确定解析器是否读取 DTD）

如果您怀疑某个属性是 ENTITY 类型，那么您可以使用`unparsed-entity-uri(@name)`XSLT 1 添加的 XPath 函数，如果您得到的不是空字符串，则存在该名称的未解析实体（无论该属性是否被声明为 ENTITY 类型)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T11:45:03.080

我发现使用 Xerxes 和 Xalan 可以非常简单地解决这个问题。

首先扩展样式表标签如下：

```
<xsl:stylesheet xmlns:java="http://xml.apache.org/xalan/java" .... 
```

在属性处理模板上：

```
<xsl:template match="@*" mode="fix-entity-references">  
    <xsl:param name="is-entity" select="java:com.ovitas.aton.xslt.Util.isEntity(current())"/> 
```

引用类的代码：

```
import org.apache.xerces.dom.DeferredAttrImpl;
import org.apache.xml.dtm.ref.DTMNodeIterator;

public class Util {

        public static boolean isEntity(Object o) {
            try {
                DTMNodeIterator iter = ((DTMNodeIterator) o);
                DeferredAttrImpl attrImpl = (DeferredAttrImpl) iter.getRoot();
                return attrImpl.getTypeName().equals("ENTITY");
            } catch (ClassCastException e) {
                e.printStackTrace();
                return false;
            }
        }
} 
```

自然引用的 jar 必须添加到类路径中。

```
System.setProperty("javax.xml.transform.TransformerFactory", "org.apache.xalan.processor.TransformerFactoryImpl"); 
```

上面的代码可以使用 xalan 转换器。

我会接受上一个赞成的答案，因为这个解决方案显然是基于 xalan 和 xerxes 的使用，但我也想为后代添加这个。也许它对某人有用。

# grails - Cannot load JDBC driver class 'net.sourceforge.jtds.jdbc.Driver' when compiling Grails project

> ID：15294645
> 
> 赞同：7
> 
> 时间：2013-03-08T13:02:51.657
> 
> 标签：grails, jdbc, compilation, jtds

This is my first post so be gentle! :)

I've set up a grails project (fairly new at grails too) and am attempting to connect it to a SQL 2008 database, I've added the jtds-1.3.0.jar to the lib folder and to my build path, and then I've altered my DataSource.groovy file to read as follows: -

```
dataSource {
    pooled = true
    driverClassName = "net.sourceforge.jtds.jdbc.Driver"
    dialect = "org.hibernate.dialect.SQLServerDialect"
    }

hibernate {
    cache.use_second_level_cache = true
    cache.use_query_cache = false
    cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
}

// environment specific settings
    development {
        dataSource {
            dbCreate = "update"
        url= "jdbc:jtds:sqlserver://TestServer:1433;databaseName=TestTable"
            username = "test"
            password = "test"
        // logSql=true
        }
    } 
```

Trouble is when I try to compile I get a massive error which reads as follows, what am I missing? I've googled about but can't find an obvious solution... :S

```
| Error 2013-03-08 12:44:33,451 [localhost-startStop-1] ERROR context.GrailsContextLoader  - Error executing bootstraps: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'lobHandlerDetector' while setting bean property 'lobHandler'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'lobHandlerDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot load JDBC driver class 'net.sourceforge.jtds.jdbc.Driver'
Message: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'lobHandlerDetector' while setting bean property 'lobHandler'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'lobHandlerDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot load JDBC driver class 'net.sourceforge.jtds.jdbc.Driver' 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-08T13:16:49.440

我过去也遇到过类似的问题。

我已将 JTDS 的版本更改为 1.2.6，一切正常。

顺便说一句 - 您不需要手动添加 jar。您只需将以下内容添加到您的`BuildConfig.groovy`（在依赖项部分中）：

```
runtime 'net.sourceforge.jtds:jtds:1.2.6' 
```

# jetty - There are two questions when i start jetty

> ID：15294648
> 
> 赞同：3
> 
> 时间：2013-03-08T13:03:03.590
> 
> 标签：jetty

maven + jetty + spring 3.2

My jetty infomation:

```
2013-03-08 20:16:23.541:INFO:oejs.Server:main: jetty-9.0.0.RC2
2013-03-08 20:16:26.590:INFO:oejpw.PlusConfiguration:main: No Transaction manager found - if your webapp requires one, please configure one.
[DEBUG][2013-03-08 20:16:35,801]->org.eclipse.jetty.util.log [Logging to org.slf4j.impl.Log4jLoggerAdapter(org.eclipse.jetty.util.log) via org.eclipse.jetty.util.log.Slf4jLog]
2013-03-08 20:16:35.848:INFO:/:main: No Spring WebApplicationInitializer types detected on classpath
2013-03-08 20:16:36.743:INFO:/:main: Initializing Spring FrameworkServlet 'app-servlet' 
```

Jetty can't find the transaction manager but I have already configured it in my spring application-context(app-servlet.xml):

```
<!-- 使用注解方式管理事务 -->
    <tx:annotation-driven transaction-manager="transactionManager" proxy-target-class="true"/>
<!-- 配置事务管理 -->
    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory"></property>
    </bean> 
```

And it says "No Spring WebApplicationInitializer types detected on classpath", I have also configured "app-servlet.xml" in web.xml:

```
<!-- spring mvc的dispatcherServlet负责转发请求 -->
    <servlet>
        <servlet-name>app-servlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <!-- spring context文件 -->
            <param-name>contextConfigLocation</param-name>
            <param-value>
                classpath*:/spring/**/app-*.xml
            </param-value>
        </init-param>
        <!-- 服务启动的时候第一个将此servlet初始化加载，非零的时候，数字越小，优先级越高 -->
        <load-on-startup>1</load-on-startup>
    </servlet> 
```

My pom.xml:

```
<!-- jetty -->
            <plugin>
                <groupId>org.eclipse.jetty</groupId>
                <artifactId>jetty-maven-plugin</artifactId>
                <version>9.0.0.RC2</version>
            </plugin> 
```

Why did jetty warn me like that? How can I eliminate these abnormal infomation? Thank for answer these two questions.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:35:23.450

如前所述，来自码头的关于“没有事务管理器”的消息纯粹是信息性的，可以忽略（您正在使用只有 spring 知道的事务管理器）。

至于另一条消息“在类路径上未检测到 Spring WebApplicationInitializer 类型”，这似乎是来自 Spring 的纯粹信息性消息 - 如果您有一个 servlet 3.0 webapp 并且您正在使用 spring 3.2，那么当您的 SpringServletContainerInitializer 类将被调用webapp 启动，它在类路径上查找 Spring 的 WebApplicationInitializer 接口的实现。大概你没有，因为我已经用 spring 3.2 测试了 jetty-9.0.0.RC2 和 jetty-9.0.0 final，并且正确地发现了任何此类初始化程序。

问候简

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:18:39.043

关于事务管理器的信息性消息...

```
2013-03-08 20:16:26.590:INFO:oejpw.PlusConfiguration:main: No Transaction manager found - if your webapp requires one, please configure one. 
```

发生是因为您没有[在 JNDI 中声明 XA 事务管理器](http://www.eclipse.org/jetty/documentation/current/jndi-configuration.html#configuring-xa-transactions)。对此的典型配置是[`/WEB-INF/jetty-env.xml`](http://www.eclipse.org/jetty/documentation/current/using-jetty-jndi.html)使用[部署上下文描述符](http://www.eclipse.org/jetty/documentation/current/configuring-specific-webapp-deployment.html#deployable-descriptor-file)在服务器端或服务器端。

至于来自 Spring 的其他错误消息，[解决起来有点混乱](https://stackoverflow.com/questions/13222071/spring-3-1-webapplicationinitializer-embedded-jetty-8-annotationconfiguration)。

# objective-c - How to move the sprite with the movement of background?

> ID：15294651
> 
> 赞同：0
> 
> 时间：2013-03-08T13:03:19.540
> 
> 标签：objective-c, xcode, cocos2d-iphone, ios4

I am working on a tilemap based game in cocos2d in which the player moves in four directions and I have used four images for the movement of player for example left,right,top and down. My problem is that when my background map change its position or move to other position then my sprite does not change its position. Can anyone tell me how to move a sprite with the movement of background.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:26:53.980

有几种方法可以处理基于 tilemap 的游戏，但都不是很方便。一种方法是始终将您的角色留在屏幕中央，然后将背景移到其下方。如果您的角色“向右”移动，您只需将背景向左滑动，反之亦然。这将产生角色在地图上移动的错觉，而实际上它仍然居中。在这种范式下，您必须记住将所有检测/碰撞转换为世界空间，而不仅仅是屏幕空间。如果您不转换所有内容，那么您的碰撞/检测“范围”仅限于屏幕大小。

第二种方法是在世界范围内平移相机。您仍然将角色保持在屏幕中间，但它实际上在世界各地移动，并且相机跟随。这对我来说是最直观的感觉，因为它让您可以像查看现实世界一样查看游戏世界。处理碰撞也容易得多，因为角色和世界的位置“正常工作”并且不必转换。这里的缺点是 Cocos2D 并没有使 CCCamera 易于使用，并且在这方面文档有点薄。

在您的特定情况下，听起来您遇到了 CCLayer 问题。如果您的角色在您正在移动的图层内，那么它确实会相对于地图保持在同一位置（如您所描述的那样）。相反，将角色浮动在地图顶部的不同层中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:14:56.427

您可以使用滚动视差，然后将精灵添加到与背景相同的图层上。他们将一起移动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:28:48.650

使用 CCNode 来包含玩家的背景和精灵。不要移动背景，而是移动该节点。

# java - 双击以恢复 Android 中的画布

> ID：15294660
> 
> 赞同：1
> 
> 时间：2013-03-08T13:03:47.050
> 
> 标签：java, android, android-canvas, gesture

我正在寻找一些代码在双击画布恢复的地方工作。

目前，我有：

```
 @Override
    public void onTouchEvent(MotionEvent event) {

        float x = event.getX();
        float y = event.getY();
        SurfaceHolder holder = getSurfaceHolder();
        Canvas canvas = null;

        try {
            canvas = holder.lockCanvas();
            if (canvas != null) {
                // Enter it all here
                canvas.restore();

            }
        } finally {
            if (canvas != null)
                holder.unlockCanvasAndPost(canvas);
        }
        super.onTouchEvent(event);
    } 
```

但是，此时它会读取任何手势并恢复屏幕。我只希望它在双击手势时恢复。

我试图让它工作：[Android：如何检测双击？](https://stackoverflow.com/questions/2217670/android-how-to-detect-double-tap)但到目前为止我失败了。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:08:50.933

好的，这很笨拙，但请尝试以下操作：

```
private boolean singleTapped = false;
private long lastTapTime = 0;
private long doubleTapInterval = 1000;

@Override
public void onTouchEvent(MotionEvent event) {
    if (!singleTapped) {
        singleTapped = true;
        lastTapTime = System.currentTimeMillis();
        super.onTouchEvent (event);
        return;
    }

    long tapInterval = System.currentTimeMillis() - lastTapTime;
    if (tapInterval <= doubleTapInterval) {
        float x = event.getX();
        float y = event.getY();
        SurfaceHolder holder = getSurfaceHolder();
        Canvas canvas = null;

        try {
            canvas = holder.lockCanvas();
            if (canvas != null) {
            // Enter it all here
            canvas.restore();

            }
        } finally {
            if (canvas != null)
            holder.unlockCanvasAndPost(canvas);
        }
    }

    super.onTouchEvent(event);
} 
```

# c# - When I start the application, the database drops

> ID：15294661
> 
> 赞同：1
> 
> 时间：2013-03-08T13:03:47.660
> 
> 标签：c#, database, linq

I'm working on a small Information System Application. I'm making it with windows forms and Service-based Database. It's almost done but when I execute the application a very odd problem appears. I make a stored procedure for inserting data in db tables and when i execute it manually it all works fine, but when I start the program and execute the procedure through button click something wrong is happened. At first sight the program is working fine and the procedure is executing well, but the data is not stored in the db. Here is my code:

UserData.cs

```
 public static bool AddStudent(Student std)
    {
        UserDataClassesDataContext dc = new UserDataClassesDataContext();
        try
        {
            dc.AddNewStudent(std.FirstName, std.SecondName, std.LastName, std.Faculty, std.Specialty, std.OKS,
                std.StudentStatus, std.FacNumber, std.Course, std.Potok, std.Group);
            dc.SubmitChanges();
        }
        catch (Exception)
        {
            return false;
        }
        return true;
    } 
```

StudentValidation.cs

```
public bool InsertStudent(Student std)
    {
        return UserData.AddStudent(std);
    } 
```

MainForm.cs buttonClick event

```
private void insertStudentButton_Click(object sender, EventArgs e)
    {
        Student student = new Student();
        student.FirstName = tbFirstName.Text;
        student.SecondName = tbSecondName.Text;
        student.LastName = tbLastName.Text;
        student.Faculty = tbFacultyName.Text;
        student.Specialty = tbSpecialty.Text;
        student.FacNumber = tbFacNumber.Text;
        student.OKS = (short)cbOKS.SelectedIndex;
        student.StudentStatus = (short)cbStudentStatus.SelectedIndex;
        student.Course = (short)numCourse.Value;
        student.Potok = tbFlow.Text;
        student.Group = tbGroup.Text;
        if (sv.InsertStudent(student) && sv.InsertUser(student))
            MessageBox.Show("The student is added successfully!");
        else
            MessageBox.Show("A problem occurs while trying to add the student!");
    } 
```

I think that the db is somehow disconnected when I start my application, but I don't know why.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:10:04.487

也许你应该试试这个方法：

db.students.InsertOnSubmit(std);

有关更多信息，请参阅此链接 [http://msdn.microsoft.com/en-us/library/bb386941.aspx](http://msdn.microsoft.com/en-us/library/bb386941.aspx)

# android - View's background is placed over the elements

> ID：15294669
> 
> 赞同：0
> 
> 时间：2013-03-08T13:04:24.890
> 
> 标签：android, view, background, android-relativelayout

Good Afternoon! I want to use an image as background in my view, the problem is that when I use an image (With a color works perfectly) the background is placed over the elements, so it's not possible to see nothing.

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Greet"
    android:background="@drawable/fondo_panel" >

    <ImageView android:layout_height="wrap_content" 
    android:layout_width="match_parent" 
    android:src="@drawable/logo_panel"/>

</RelativeLayout> 
```

Do you know what's the problem? Thanks a lot!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:07:27.713

为什么不将图像作为背景添加到 RelativeLayout？所以你不需要 ImageView 并且没有任何重叠。

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Greet"
    android:background="@drawable/logo_panel" >

</RelativeLayout> 
```

# ruby-on-rails-3 - 我有办法将多个 Active Record 关系组合到一个查询中吗？

> ID：15294678
> 
> 赞同：0
> 
> 时间：2013-03-08T13:04:54.410
> 
> 标签：ruby-on-rails-3, activerecord

我有一个这样的小组课。团体有很多人。

```
class Group < ActiveRecord::Base
  has_many :people
  def notices
    Notice.where(:person_id => people).where("radius <= ?", radius)
  end
end 
```

在我的通知控制器中，我想显示来自所有用户组的所有通知，而不重复。目前我正在这样做，这是蹩脚的。有没有办法将每个组的查询组合起来返回一个关系，而不是一个数组？

```
class NoticesController < ApplicationController
  def index
    @groups = current_person.groups
    @notices = []
    @groups.each do |g|
      @notices += g.notices
    end
  end
end 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:27:59.517

我假设有一个人模型。

好的。

尝试这个。

在 Person 模型中，添加此

```
has_many :all_group_members, through: :groups, class_name: "Person" 
```

然后添加这个方法

```
def all_notices
  Notice.where(:person_id => all_group_members.pluck(:id)).where("radius <= ?", radius)
end 
```

最后在你的控制器中你可以做到这一点

```
current_person.all_notices 
```

# java - HashMap / Map 的自定义条目

> ID：15294684
> 
> 赞同：-1
> 
> 时间：2013-03-08T13:05:09.693
> 
> 标签：java, map, hashmap

Java 的类概念大家都很熟悉。每个类都能够保存属性。我希望这个属性是动态的，这意味着我想构建一个包含变量名-> 值条目的 Map。

因此，我的想法是自定义Map接口（使用AbstractMap或HashMap）来创建自定义的ClassAttributesMap。该地图应提供类似“attributesMap.put(new CustomEntry());”的方法。通常，像 HashMap 这样的 Map 实现提供了一个 put 方法，但它是“put(Object key, Object value);”。

我为我解决了。非常感谢您的提示！

这是满足我要求的代码：

```
public static void main(String args[]){
    DynAttClass dynClass = new DynAttClass();
    dynClass.keyset();
}

public class DynAttClass {

    private HashMap<DynAttributes, Object> attributesMap = new HashMap();

    public DynAttClass() {
        attributesMap.put(DynAttributes.var1, "value1");
        attributesMap.put(DynAttributes.var2, new Integer());
        attributesMap.put(DynAttributes.var3, new CustomObject());
    }

     //you can delegate the HashMap methods here, for example:
     public Set<DynAttributes> keySet() {
         return attributesMap.keySet();
     }

}

public enum DynAttributes {
    var1, var2, var3;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:13:11.767

您建议使用 CustomEntry，所以我假设您不能简单地使用`Map.put`.

如果`Map.put(CustomEntry e)`您只需要该方法，您可以简单地创建一个扩展 HashMap 的新类并将该方法添加到它，这是常规的适配器`put(key, val)`

# compiler-construction - Embarcadero C++ Builder 2010 - 编译

> ID：15294688
> 
> 赞同：0
> 
> 时间：2013-03-08T13:05:28.650
> 
> 标签：compiler-construction, compilation, c++builder-2010

我使用 Embarcaedro C++ Builder 2010 几个星期了，编译过程有些麻烦。

首先，是否有人知道防止 C++ Builder 重新编译每个尚未编辑的源文件的技巧？其次，为什么编译器编译的代码行数比项目实际包含的多？它大大增加了编译时间！

我浏览了网页却没有得到满意的答案。我试过了 ：

*   保存目标文件
*   禁用预编译头文件
*   将包含（头文件和库）从最常用到最少使用
*   ...

我正在开发一个包含数千行代码的项目，因此编译过程需要很长时间才能完成.. 某处可能有问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:33:38.260

这些文件是否包含其他已修改的文件？...例如，如果您对所有项目都有一个通用配置文件并且您对其进行了修改，那么所有内容都会被编译。

您是否尝试在项目中包含一个根本没有东西的新文件并进行编译？

顺便说一句，如果我记得 Alt+F9 只是编译当前文件。

此致。

# hibernate - 批量更新从更新 [0] 返回了意外的行数；实际行数：0；预期：1

> ID：15294690
> 
> 赞同：0
> 
> 时间：2013-03-08T13:05:30.753
> 
> 标签：hibernate

错误：org.hibernate.MappingException：未知实体：com.myapp.struts.timesheetForm

当尝试使用休眠框架在 Struts 中的 Action 类中保存来自 Bean 的数据时，会发生上述错误。

主要文件：

```
timeSheet.jsp
timesheetForm.java
timeSheetAction.java 
```

TimeSheetData.java 是我的 pojo。

使用 hibernate 从数据库中提取数据很容易，而且效果很好。timeSheet.jsp 得到完美填充。

我的 timesheetaction.java 是我计划将更新的数据保存到数据库的地方。

我根据表单数据创建了一个 bean 对象。

我基于 timesheetdata.java 创建一个对象

我使用 beanutils 将 formbean 的属性复制到 pojo 中。

然后通过会话对象更新。

我已经计算出它是空的，但这就是我能解决的。

```
Session sess = HibernateUtil.getSessionFactory().getCurrentSession();
sess.beginTransaction();
timesheetForm formBean = (timesheetForm)form;
timeSheetData formData = new TimeSheetData();
formBean.setAdditionhours4_1(formBean.getAdditionhours1_1());
BeanUtils.copyProperties(formData, formBean);
sess.update(formData);
sess.getTransaction().commit();
sess.flush();
sess.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:07:01.227

```
Session sess = HibernateUtil.getSessionFactory().getCurrentSession();

    Transaction tx = sess.beginTransaction();
    // extract user data
    timesheetForm formBean = (timesheetForm)form;

int count = 0;
   int loopConstraint = 0;

   while(loopConstraint < dataList.size())
   {

      int ID = Integer.parseInt(dataList.get(loopConstraint).toString());
      TimeSheetData formData = (TimeSheetData) sess.load(TimeSheetData.class, ID);

   //relevant additions to database

    sess.update(formData);
      sess.flush();
      sess.clear();

   }
      tx.commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:06:51.477

我认为没有可更新的记录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-25T14:09:00.300

请检查您的休眠映射，通过更改注释中的可更新和可插入参数可以轻松解决此问题。

例如，就我而言，我通过更改它来解决它：

```
@OneToMany
@JoinColumn(name = "columnPK", updatable = true, insertable = true)
private List<ObjectX> relatedElments; 
```

有了这个：

```
@OneToMany
@JoinColumn(name = "columnPK", updatable = false, insertable = false)
private List<ObjectX> relatedElments; 
```

解释是当您尝试插入/更新其他“超级”表时，此参数会阻止休眠更新相关表。因此，请检查所有休眠注释。

# android - 创建无限滚动画廊视图

> ID：15294695
> 
> 赞同：0
> 
> 时间：2013-03-08T13:05:46.717
> 
> 标签：android, android-gallery

我有一个非常简单的`Gallery`方法，我用它以 2 秒的间隔滚动浏览一些图片。我的问题：*如何让这个画廊“无限”，所以第一张照片在最后一张之后又出现了？*

**笔记**

*   我知道画廊声称已弃用的事实
*   我还没有对我的代码进行任何优化，因为这只是在高端平板电脑上的快速测试。尽管您对优化的建议也值得赞赏

主要的：

```
 public class MainActivity extends Activity {
  private Gallery ga;
private Runnable r = null;
private Handler mHandler = null;
private MediaPlayer mp;

    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_main);
    setUpGallery();

            mHandler = new Handler();
    r = new Runnable() {

        public void run() {

            mHandler.postDelayed(r, 2000);
            ga.onKeyDown(KeyEvent.KEYCODE_DPAD_RIGHT, null);

        }

    };

    r.run();
           }

            private void setUpGallery() {
    ga = (Gallery) findViewById(R.id.gallery);
    ga.setAdapter(new ImageAdapter(this));
    mp = MediaPlayer.create(getApplicationContext(), R.raw.you);
    mp.start();
    mp.setOnCompletionListener(new OnCompletionListener() {

        @Override
        public void onCompletion(MediaPlayer mp) {
            mp.reset();
            mp.release();

        }
    });

} 
```

适配器：

```
 public class ImageAdapter extends BaseAdapter {
private int[] pics = { R.drawable.s1, R.drawable.s2, R.drawable.s3,
        R.drawable.s4, R.drawable.s5, R.drawable.s6, R.drawable.s7,
        R.drawable.s8, R.drawable.s9, R.drawable.s10, R.drawable.s11,
        R.drawable.s12, R.drawable.s13, R.drawable.s14 };
private Context ctx;

public ImageAdapter(Context c) {

    ctx = c;

}

@Override
public int getCount() {

    return pics.length;

}

@Override
public Object getItem(int arg0) {

    return arg0;

}

@Override
public long getItemId(int arg0) {

    return arg0;

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder holder = new ViewHolder();
    holder.img = new ImageView(ctx);
    Bitmap bmp = BitmapFactory.decodeResource(ctx.getResources(), pics[position]);
    holder.img.setImageBitmap(ImageHelper.getRoundedCornerBitmap(bmp, 10));

    return holder.img;

}

static class ViewHolder {

    public ViewHolder() {

    }

    ImageView img;

}

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:42:51.043

您必须通过扩展类来制作自定义 Gallaryadapter ..

我刚刚从这里找到了解决方案

[http://blog.blundell-apps.com/infinite-scrolling-gallery/](http://blog.blundell-apps.com/infinite-scrolling-gallery/)

我可能对你有帮助；

你也可以在你的代码中尝试这个..

```
mHandler = new Handler();
    r = new Runnable() {

        public void run() {
            if (count == adapter.getCount()) {
                count = 0;

                ga.setSelection(0);
                mHandler.postDelayed(r, 2000);
            } else {
                mHandler.postDelayed(r, 2000);
                ga.onKeyDown(KeyEvent.KEYCODE_DPAD_RIGHT, null);
                count++;

            }
        }

    };

    r.run(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:12:10.377

好吧，实际上解决方案比我想象的要容易得多。它可能不适合所有人，但在我的情况下没关系。刚刚在`getView()`方法中添加了一个 Random

```
 Random rnd  = new Random();

    if(position>=pics.length){
        position = rnd.nextInt(13);
    } 
```

# javascript - AngularJS图像多个请求

> ID：15294697
> 
> 赞同：0
> 
> 时间：2013-03-08T13:05:59.810
> 
> 标签：javascript, html, angularjs

我目前正在开发一个 AngularJS 应用程序。

除了加载图像外，一切正常。

在我看来，我使用了以下调用：

`<img ng-src="img/views/portrait/{{employee.lastName|lowercase}}.jpg" title="{{employee.lastName}}"/>`

现在奇怪的是，有 2 个请求被触发：

`http://localhost:8080/MyContext/content/img/views/portrait/.jpg`

和

`http://localhost:8080/MyContext/content/img/views/portrait/example.jpg`

第一个具有employee.lastName 的空值。尽管我使用的是 ng-src 指令，但我无法解释自己为什么会发生这种情况。

有任何想法吗？

预先感谢您的支持。

我的资源代码

```
var employeeService = $resource('/MyContext/rest/employees/:employeeId', {}, {});
employeeService.findById = function(id) {
    return employeeService.get({employeeId:id});
}; 
```

在我调用的控制器中：

```
$scope.employees = EmployeeService.findAll(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T13:48:35.297

如果您不想使用 $http 的成功回调，您可以在 employee.lastName 上添加一个观察者：

首先在您的控制器中选择默认图片：

```
$scope.defaultPicture = '/MyContext/content/img/views/portrait/default.jpg' 
```

在您的视图中使用它：

```
<img ng-src="{{ defaultPicture }}" title="{{ employee.lastName }}"/> 
```

然后在 employee.lastName 上添加一个观察者：

```
$scope.$watch('employee.lastName', function(lastName) {
        if (lastName) {
            $scope.defaultPicture = '/MyContext/content/img/views/portrait/'+lastName+'.jpg;
        }
    }); 
```

完成后，将调用获取默认图片，该图片将被浏览器缓存，并且当资源employeeService 准备好时，图片将自动更改。

我只是在我的项目中做到了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:09:07.967

您是否使用 $resource 服务加载员工数据？如果是这样， $resource 服务将首先返回一个空对象来解释第一个请求。一旦接收到来自服务器的数据，该数据将被复制到以前的空对象中并触发绑定值的更新。在您的情况下，这将是 img 的 ng-src ，这将触发第二个请求。

# c++ - 通过 IPC 传递非 POD [普通旧数据类型]

> ID：15294698
> 
> 赞同：0
> 
> 时间：2013-03-08T13:06:01.360
> 
> 标签：c++, c, ipc, message-queue, dbus

我正在编写一个执行 IPC 的实现。用户拨打电话，我将所有这些参数传递给其他进程。

我已经为此类功能编写了一个基于逻辑的自动代码生成器，其工作原理如下：

1.  获取所有参数并将它们放入结构中。
2.  添加 IPC 所需的其他信息。将此结构的大小和指针传递给 POSIX 消息队列。**从这个地址读取数据，直到指定的大小，被读取并发送到其他进程。**
3.  解构结构以获取参数。
4.  使用这些参数调用实际函数。

当我只有普通的旧数据类型时，这工作得很好。但是当函数参数是非 POD 时，我的逻辑失败了，因为：

1.  在非 POD 类型的情况下，我无法真正说出总数据的大小 [消息队列需要]
2.  某些类可能包含动态增加的实体，例如向量。

有人可以告诉我如何处理这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:10:29.747

您需要决定如何进行序列化。

例如，您可以定义一个表示各方之间交换的消息的类型，然后实现一个将对象序列化为消息的通用函数。当您有自定义逻辑时，您可以专门化序列化功能。

这是一些伪代码：

```
class Message {...} // blah blah

// default imple
template<typename T>
Message& operator <<(Message& msg, T& t) { .. write it as a POD .. }

// specialize for types which need custom logic
Message& operator <<(Message& msg, SomeCustomType& x) { .. custom serialization ..} 
```

要反序列化，您需要对`operator >>`. 然后你做：

```
Message msg;
MyType whatever = ...
msg << whatever;
// now send msg to other side. 
```

当然，您将需要消息中的一些元数据，以便您知道如何在另一端解包（即到哪种类型）。

有很多示例（例如 STL 流或 MFC 如何使用 CArchive 类和`Serialize`可序列化类型上的方法对其进行抽象）

# spring-mvc - 在 Spring MVC 中编辑包含集合对象的命令对象

> ID：15294701
> 
> 赞同：0
> 
> 时间：2013-03-08T13:06:16.070
> 
> 标签：spring-mvc

我正在使用 spring MVC。我的命令对象包含一个集合对象，如下所示

```
public class DimensionStoneBean {
int stoneNo;
float length;
float breadth;
float height;
float dimension;
String isIssued;

public int getStoneNo() {
    return stoneNo;
}
public void setStoneNo(int stoneNo) {
    this.stoneNo = stoneNo;
}
public float getLength() {
    return length;
}
public void setLength(float length) {
    this.length = length;
}
public float getBreadth() {
    return breadth;
}
public void setBreadth(float breadth) {
    this.breadth = breadth;
}
public float getHeight() {
    return height;
}
public void setHeight(float height) {
    this.height = height;
}
public float getDimension() {
    return dimension;
}
public void setDimension(float dimension) {
    this.dimension = dimension;
}
public String getIsIssued() {
    return isIssued;
}
public void setIsIssued(String isIssued) {
    this.isIssued = isIssued;
}

}

    public class UpdateStockBean {
@SuppressWarnings("rawtypes")
private List dimensionStones =
    LazyList.decorate(new LinkedList(),FactoryUtils.instantiateFactory(DimensionStoneBean.class));
long openbalance;

public UpdateStockBean() {
    super();
}

@SuppressWarnings("rawtypes")
public List getDimensionStones() {
    return dimensionStones;
}
public void setDimensionStones(@SuppressWarnings("rawtypes") List dimensionStones) {
    this.dimensionStones = dimensionStones;
}
public long getOpenbalance() {
    return openbalance;
}
public void setOpenbalance(long openbalance) {
    this.openbalance = openbalance;
}

} 
```

这个控制器类，扩展了**AbstractWizardFormController**

我习惯于**`formBackingObject()`** 填充命令对象将其返回到表单

表格如下所示

```
 <form:form commandName="updateStock" method="post" name="stockEntry" action="updateStock.nic" id="updateStock">
  <br><br><br>
  <table border="1" width="700">
   <tr>     
     <td class="textClr1" align="left" width="50"><nobr>Total No Of Stones</nobr></td>
     <td colspan="6"><form:input tabindex="1" path="openbalance" id="openbalance" cssClass="controlStock"/></td>
   </tr>    
   <tr>
      <td></td>
      <td colspan="6"><form:errors cssClass="error" path="openbalance"/></td>
   </tr> 
  </table>
  <table>
   <tr>
     <td colspan="3">
        <table  border="1" width="400">
          <tbody id="dimensionList">                           
            <c:forEach  var="DimensionStones" items="${updateStock.dimensionStones}" varStatus="i" begin="0">
              <tr class="dimensionStone">    
                 <td><form:input path="dimensionStones[${i.index}].stoneNo" id="stoneNo${i.index}" cssClass="controlStock"/></td>
                 <td><form:input path="dimensionStones[${i.index}].length" id="length${i.index}" onchange="findDimension(this.id)" cssClass="controlStock"/></td>
                 <td><form:input path="dimensionStones[${i.index}].breadth" id="breadth${i.index}" onchange="findDimension(this.id)" cssClass="controlStock"/></td>
                 <td><form:input path="dimensionStones[${i.index}].height" id="height${i.index}" onchange="findDimension(this.id)" cssClass="controlStock"/></td>
                 <td><form:input path="dimensionStones[${i.index}].dimension" id="dimension${i.index}" cssClass="controlStock"/></td>                 
                 <td><form:checkbox path="dimensionStones[${i.index}].isIssued" id="isIssued${i.index}" value="" cssClass="check"/></td>
                 <td><a href="#" class="removeDimensionStone"><img src="images/cross1.jpg" width="20" height="20" title="Remove Dimension Stone"/></a></td>

              </tr>
            </c:forEach>   
            <tr>

            </tr>             
            <c:if test="${empty updateStock.dimensionStones}">
                <tr class="dimensionStone defaultRow">    
                            <td><input type="text" name="dimensionStones[].stoneNo" value="" id="stoneNo" Class="controlStock"/></td>
                            <td><input type="text" name="dimensionStones[].length" value="" id="length" onchange="findDimension(this.id)" Class="controlStock"/></td>
                            <td><input type="text" name="dimensionStones[].breadth" value="" id="breadth" onchange="findDimension(this.id)" Class="controlStock"/></td>
                            <td><input type="text" name="dimensionStones[].height" value="" id="height" onchange="findDimension(this.id)" Class="controlStock"/></td>
                            <td><input type="text" name="dimensionStones[].dimension" value="" id="dimension" disabled="disabled" Class="controlStock"/></td>                            
                            <td><input type="checkbox" name="dimensionStones[].isIssued" value="Yes" id="isIssued" Class="controlStock"/></td> 
                            <td><a href="#" class="removeDimensionStone"><img src="images/cross1.jpg" width="20" height="20" title="Remove Dimension Stone"/></a></td>
                        </tr>
            </c:if>   
           </tbody>  
         </table>           
       </td>    
    </tr>    
  </table>
  <table  border="1" width="600"> 
   <tr>
      <td colspan="3" align="left"><a href="#" id="addDimensionStone"><img src="images/plus3.png" width="20" height="20" title="Add Dimension Stone"/></a></td>
   </tr> 
   <tr></tr> 
   <tr></tr> 
   <tr>
     <td colspan="3" align="center" width="200" height="180">
      <input type="submit" name="_target0" value="Submit" class="butn" />
     </td>
    </tr>  
  </table>  
</form:form> 
```

这会在命令对象中显示集合中的值，并使我们能够删除、编辑和添加新行。

但我的问题是，删除命令对象中的集合中的相应对象并没有清除。因此，有不需要的 DIMENSIONSTONE 对象。我必须做什么来解决这个问题？请告诉我.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:57:09.070

使用 Spring 绑定到 Collections 时，删除项目是一个问题。问题是命令对象仍然存在，并且在 UI 端没有办法告诉 WebBinder 从集合中删除某些项目。本质上，它可以在给定从视图传入的索引/键的情况下仅处理将内容插入指定位置。

为了解决这个限制，我过去所做的是在集合中的 bean 中添加一个名为“removal”的布尔值。然后，当我删除对象时，我只需将 HTML DOM 替换为隐藏字段，例如：

```
<input type="hidden" name="beans[3].removal" value="true" /> 
```

然后，在我的控制器中，我只需遍历集合并删除设置了“删除”标志的内容。

另一种选择是将总数存储在您的命令对象中。然后，当您到达控制器时，只需在该计数之后截断集合。

**编辑：示例（从我的脑海中）**

命令对象：

```
public class FormBean {
  private List<MyBean> myBeans;
  // ...getters/setters etc
} 
```

Command Object 中集合中的 Bean：

```
public class MyBean {
  private String someProperty;
  private Integer someOtherProperty;

  private boolean removal;
  // Getters/Setters
} 
```

形式：

```
<!-- standard HTML stuff -->
<script>
  $(document).ready(function() {
    // Click handler to replace the contents of div.row with the removal flag
    $('.btnRemove').click(function() {
      var count = $(this).parent().prev('.row').length;
      $(this).parent().removeClass('rowActive').addClass('rowRemove');
      $(this).parent().hide();
      $(this).parent().html(function() {
        return $("<input/>",{
          id: 'myBeans'+count+'.removal',
          name: 'myBeans['+count+'].removal',
          value: 'true'
        });
      });
    });
  });
</script>
<!-- More HTML stuff -->
<form:form modelAttribute="formBean" action="/someUrl">
  <c:forEach items="${formBean.myBeans}" var="myBean" varStatus="status">
    <div class="row rowActive">
      <form:input path="myBeans[${status.index}].someProperty" />
      <input type="button" class="btnRemove" value="Remove" />
    </div>
  </c:forEach>
</form:form> 
```

然后，在您的控制器代码中的某处：

```
Set<MyBean> removals = new HashSet<MyBean>();
for(MyBean myBean : formBean.getMyBeans) {
  if(myBean.isRemoval) {
    removals.add(myBean);
  }
}
formBean.getMyBeans().removalAll(removals); 
```

首先：我完全从内存中输入了这个，直接进入帖子编辑框。里程可能会有所不同...

第二：我使用jQuery。你不可以。如果需要，将任何 jQuery 内容替换为适当的非 jQuery 内容。

第三：有些部分我掩饰了。例如，我在 div 上有一个“行”类的原因是我可以获得添加新行的总数，因为您必须知道要添加哪个索引。div 上的“rowActive”和“rowRemove”类用于获取其他事物的计数，例如当只剩下一项时禁用删除按钮。我没有涉及的其他事情是添加行和设置事件处理程序（每次修改 DOM 时都需要这样做，因为您正在添加需要事件处理程序的新按钮）......我不会写整个应用程序都适合你，我想如果你能做到这一点，你可以弄清楚这些事情。

我在大约 6 个不同的 Spring MVC 应用程序中使用了这种方法。JavaScript 很复杂，需要您手动添加和删除元素。但这是我发现支持使用 Spring MVC 从集合中添加和删除项目的最佳方式。在我的例子中，Controller 端的清理不是一个大问题，因为我们使用 ValidationService 对象进行自己的验证，所以我只是将清理例程放在那里。如果有其他更好的方法，我很乐意看到它们。

如果您使用的是 AJAX（我们不是，因此我需要一个允许向服务器发出往返请求的解决方案），您可以通过提供 CRUD 方法来处理集合中的添加/删除项目，从而大大简化该过程。

**编辑：更新信息**

为了维护这个答案，我想指出我已经改变了 jQuery 部分的策略。我不再直接创建 DOM 元素，而是喜欢使用[.clone()](http://api.jquery.com/clone/)和一些创造性的正则表达式来创建新元素并重命名和重新标识它们。恕我直言，这样做的好处是大大减少了代码，因为您可以进行深度克隆并一次获取整个 DOM 块。例如，如果我有一个表并且我试图向其中添加整行，则可能会执行以下操作：

```
function addTableRow() {
  var $lastActiveRow = $('#myTable tr.rowActive:last-child');  // Gets the last active row
  var newActiveRow = $lastActiveRow.clone();
  var count = $('#myTable tr.rowActive').length;

  // Fix the name and identifier of all inputs in the new row
  $(newActiveRow).find(':input').each(function() {
    var name = $(this).attr('name');
    var identifier = $(this).attr('id');
    $(this).attr('name',name.replace(/(\d+)/g,count));  // matches and replaces digits that look like "xxx[1]"
    $(this).attr('id',identifier.replace(/(\d+)/g,count));  // matches and replaces digits that look like "xxx1"
  });
  $('#myTable').append(newActiveRow);
} 
```

因此，在此示例中，我首先获取表中的最后一个活动行，然后克隆该行，然后循环该行的输入并使用正则表达式和所有活动行的计数来重置名称和 ID。使用我的旧方法，jQuery 在尝试添加高度复杂的 DOM 树时很快就会失控。

一些需要注意的事情：首先，jQuery`clone()`方法在 IE 7 和更低版本的 IE 中出现问题。此外，each() 循环根本没有重置输入的值。克隆的输入与您从中克隆的输入具有相同的值，因此您需要这样做。

最后，我想指出，`clone()`默认情况下该方法不会克隆事件处理程序，因此任何按钮以及您附加了 jQuery 事件处理程序的按钮也将不起作用。您也可以传入一个布尔值来指示 jQuery`clone()`事件，但是您会遇到事件被错误元素处理的问题（它不会克隆事件处理程序，只是克隆元素，但会将旧处理程序应用于新元素，因此您最终会得到纵横交错的处理程序）。更好的解决方案是通过将处理程序附加到更高级别的元素来使用委托事件（请参阅[此处](http://api.jquery.com/on/)的直接和委托事件部分）。

# php - 使用 PHP 脚本从站点中删除未使用的 CSS

> ID：15294702
> 
> 赞同：4
> 
> 时间：2013-03-08T13:06:21.993
> 
> 标签：php, css, optimization

所以我正在尝试编写一个类似于[http://unused-css.com/](http://unused-css.com/)的 PHP 脚本 - 基本上在我的网站上找到所有未使用的 CSS 并将其删除以创建一个“干净”的 CSS 文件。

我使用 Firefox 插件“除尘”来抓取网站并显示所有未使用的选择器。

Dustme 插件以下列格式返回未使用的选择器：

```
#header #nav
#header #nav p
#header #nav p a    
etc 
```

所以我的PHP脚本如下：

```
<?php

//My site CSS (compressed) -- a small test sample
$allcss = 
"body{color:#1c4866;font:13px/16px;}
#header #nav {float: left;}
#header #nav p {font-weight: bold;}
#header #nav p a {color: blue;}
input,textarea,select{font:13px/16px;color:#999;}";

//A sample of unused CSS selectors as returned by The Dustme plugin
$unusedcss =  
"#header #nav
#header #nav p
#header #nav p a";

//and the code:
$rules = preg_split ('/$\R?^/m', $allcss); //Create array from all site css

$remove = preg_split ('/$\R?^/m', $unusedcss); //Create array from unused CSS selectors

$final = array();
foreach ($rules as $rule)
{   
    if (!in_array(substr($rule, 0, strpos($rule, " ")), $remove) )
    $final[] = $rule .= "<br />";
}

 echo implode("\n", $final); 
```

当我将最终回显的结果粘贴到 CSS 文件中时，已经删除了一部分 CSS，甚至是网站上使用的 CSS。

谁能帮我确定问题？抱歉，对于问题出在哪里，我无法提供更多帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:25:34.413

您是否尝试过更换：

```
if (!in_array(substr($rule, 0, strpos($rule, " ")), $remove) )
    $final[] = $rule .= "<br />"; 
```

和：

```
if (!in_array(substr($rule, 0, strpos($rule, " {")), $remove) ) {
    $final[] = $rule .= "<br />";
} 
```

我在本地尝试了这个，并且在 $final 中 $remove 中的所有条目都消失了。

# expert-system - 专家系统用户输入调用函数

> ID：15294703
> 
> 赞同：0
> 
> 时间：2013-03-08T13:06:26.970
> 
> 标签：expert-system

我想知道是否有人可以提供帮助，我一直在玩在线 CLIPS 教程，所以我有点基础，我只是想玩一个规则，要求用户输入布尔值 'y' 或'n' 响应将根据用户输入调用 python 函数。

我知道这里已经涵盖了这一点：[How to get a rule activation to call a python function, using PyClips](https://stackoverflow.com/questions/8973556/how-to-get-a-rule-activation-to-call-a-python-function-using-pyclips)

对于在哪里询问用户输入以及如何根据“y”或“n”调用函数，我有点困惑。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:45:06.497

这里有一个如何创建交互式 PyCLIPS 会话的[示例](http://pyclips.sourceforge.net/web/?q=node/12)。以此为起点，下面是一个如何调用 python 函数的示例，具体取决于用户的输入：

```
import clips

def py_input_is_y():
    print 'Input is y.'

def py_input_not_y(s):
    print 'Input is not y: %s' % s

def clips_raw_input(prompt):
    return clips.String(raw_input(prompt))

clips.RegisterPythonFunction(py_input_is_y, "input-is-y")
clips.RegisterPythonFunction(py_input_not_y, "input-not-y")
clips.RegisterPythonFunction(clips_raw_input, "raw-input")

clips.Build('''
(defrule get-input
  (initial-fact)
=>
  (bind ?x (python-call raw-input "Enter y or n:"))
  (if (= (str-compare ?x "y") 0)
   then (python-call input-is-y)
   else (python-call input-not-y ?x)))
''') 
```

假设代码在 中`getinput.py`，这里是示例输出：

```
>>> from getinput import *
>>> clips.Reset()
>>> clips.Run()
Enter y or n:y
Input is y.
1
>>> clips.Reset()
>>> clips.Run()
Enter y or n:foo
Input is not y: foo
1 
```

# php - Javascript 和 PHP 字符串未捕获的语法错误

> ID：15294706
> 
> 赞同：1
> 
> 时间：2013-03-08T13:06:32.743
> 
> 标签：php, javascript, mysql, string, syntax-error

我有一个 php 网页，其中显示了一个带有特定日期的日历。

日期存储在 MySql 数据库中。

在网页的开头，我执行以下操作：

```
<?php
//Load in database

$query = "SELECT ID, Full_Name, Arrival_Date, Departure_Date FROM bookings ORDER BY Arrival_Date";

if ($result = $dbc->query($query))       //Retrieve all the booking details
{
    $numrows = $result-> num_rows;

    $id_array;
    $name_array;
    $arrival_array;
    $departure_array;

    for ($count = 0; $count < $numrows; $count++)
    {
        $row = $result->fetch_assoc();

        $id_array[$count] = $row['ID'];
        $name_array[$count] = $row['Full_Name'];
        $arrival_array[$count] = $row['Arrival_Date'];
        $departure_array[$count] = strval($row['Departure_Date']);
    }
}
else
{
    //Error
}
?> 
```

ID 是一个数字 Full_Name 是一个字符串 Arrival_Date 和 Departure_Date 是日期 (YYYY-MM-DD)

日历是一个 javascript 对象，因此我需要将预订信息输入到我的 javascript 函数中才能使用它。

这就是我试图做到这一点的方式：

```
<script type="text/javascript">
    var array_ID = [<?php echo implode(",",$id_array); ?>];
    var array_name = [<?php echo implode(",",$name_array); ?>];
    var array_arrival = [<?php echo implode(",",$arrival_array); ?>];                                           
    var array_departure = [<?php echo implode(",",$departure_array); ?>]; 

    var booking_numbers = <?php echo $numrows; ?>;
</script> 
```

但是，我在行上收到错误**“未捕获的语法错误：意外的标识符”**：

```
var array_name = [<?php echo implode(",",$name_array); ?>]; 
```

我怀疑这是因为一些名称中有空格，因为数组即将出现

```
var array_name = [Pippa,Pippa Smith,Pippa Smith]; 
```

当输入 php 值时。

所以这是我的问题。我如何告诉 javascript 将这些输入视为字符串。

而且我知道这可能是结合 javascript 和 php 的糟糕方式，所以如果有人有更好的建议，我会很乐意接受！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T13:11:34.523

1) 一种解决方法是`implode`在 php 中使用并在 javascript 中使用`split`..

最好的方法是`echo json_encode($id_array)`在 php 中使用，以便将数组转换为 javascript 对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:10:24.987

您必须通过将它们放在引号之间来标记 javascript 的字符串文字。

```
var array_name = ["Pippa","Pippa Smith","Pippa Smith"]; 
```

使用[json_encode()](http://docs.php.net/json_encode)从您的 php 值中获取有效的 javascript 对象文字。

* * *

附带说明：为什么要更改数据的结构

```
[1] x y z
[2] X Y Z 
```

至

```
 [1]  [2]
  x    X
  y    Y
  z    Z 
```

即为什么你有那些单独的变量`array_ID, array_name, array_arrival, array_departure`而不是一个包含所有信息的数组？

# c# - CausesValidation="false" 不起作用

> ID：15294710
> 
> 赞同：1
> 
> 时间：2013-03-08T13:06:46.690
> 
> 标签：c#, asp.net

我设置`CausesValidation="false"`为我的取消按钮，但是当我单击取消按钮时，`exception(arrow)`页面加载后显示几秒钟。我尝试了许多方法来禁用通过将组名添加到验证器和`EnableClientScript property=false`验证器但这些无法帮助我解决问题。即使我检查了很多线程，但没有人给出解决方案。如果有人遇到这个问题，请帮助我。

```
 <form id="form1" runat="server" >
  <div class="AdminContent">
        <asp:Label ID="Label1" runat="server"  
      CssClass="BreadcrumbActiveBig" Text="Group Membership" />
        <asp:ScriptManager ID="ScriptManager1" runat="server"> 
     </asp:ScriptManager>
        <br /><br />
        <asp:HiddenField ID="HiddenFieldProfile" runat="server" 
          />              

        <asp:FormView DefaultMode="Edit" ID="FormView1" runat="server" 
   DataSourceID="PermGroupObjectDataSource1" OnPreRender="FormView1_PreRender">
            <EditItemTemplate>
                <table>
                    <tr>
                        <td align="left" colspan="3">
                            <asp:Button ID="btnSave" 
                  runat="server" OnClick="btnSave_Click" Text="Save" Width="67px" 
        CssClass="ButtonS1"/>
    <asp:Button ID="btnCancel"  runat="server" OnClick="btnCancel_Click" 
      Text="Cancel" CssClass="ButtonS1" CausesValidation="false"  />
                        </td>
                    </tr>
                    <tr>
                        <td><asp:Label ID="lblGrpName" 
       runat="server" Text="Group Name:" Width="138px"/></td>
                        <td><asp:TextBox ID="GroupNameTextBox" 
       MaxLength="50" runat="server" Text='<%# Bind("GroupName") %>' Width="337px"
      ReadOnly="false" />
                            <asp:RequiredFieldValidator ID="rqrgFldVldtr_GroupName" 
      ControlToValidate="GroupNameTextBox" Display="Dynamic" ErrorMessage="&lt;"
                            meta:resourcekey="RequiredFieldValidator1Resource2" 
     runat="server"  ></asp:RequiredFieldValidator>

                        </td>
                    </tr>
                    <tr>
                        <td><asp:Label ID="lblGrpDescr" 
    runat="server" Text="Group Description:" Width="138px"/></td>
                        <td><asp:TextBox ID="GroupDescrTextBox" 
   MaxLength="255" runat="server" Text='<%# Bind("GroupDescr") %>' Width="337px" 
    ReadOnly="false" /></td>
                    </tr>
                    <tr>
                        <asp:Panel ID="managedByPanel" runat="server" 
      Visible="false">
                            <td><asp:Label ID="lblManagedByDescr" 
       runat="server" Text="Managed by:" Width="138px"/></td>
                            <td>
                                <asp:DropDownList 
     ID="managedByDropDownList" runat="server">
                                    <asp:ListItem Value="0" 
       Text="Admin" />
                                    <asp:ListItem Value="1" Text="AP Clerk admin &amp; Admin" />
                                    <asp:ListItem Value="2" Text="POC admin &amp; Admin" />
                                </asp:DropDownList>
                            </td>
                        </asp:Panel>
                    </tr>
                    <tr>
                    <asp:Panel ID="lblFilterPanel" runat="server" Visible="false">
                            <td>
                                <asp:Label ID="LabelFilter" runat="server" Text="Exclude From Document Filter" Width="150px"/>
                            </td>
                            <td>
                                <asp:CheckBox ID="chbExcludefromDocFilter" runat="server" 
                                    Checked='<%# Bind("ExcludeFromUserFilter") %>' />
                            </td>
                            </asp:Panel>
                    </tr>
                    <tr>
                        <td valign="top">
                            <asp:Label ID="lblMembers" runat="server" Text="Members:" Width="80px"/>
                        </td>
                        <td>
                            <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                                <ContentTemplate>
                                    <div>
                                        <asp:ListBox ID="lbxMembers" runat="server" style="overflow:auto; width:500px; height:150px;" DataSourceID="MembersObjectDataSource1" DataTextField='ListName' DataValueField="UName" SelectionMode="Multiple" /><br />
                                        <asp:ObjectDataSource ID="MembersObjectDataSource1" runat="server" DataObjectTypeName="System.Collections.Generic.List`1[[Accenture.CSTPrague.eAPI.GroupMember, eAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]" SelectMethod="FetchGroupMembers" TypeName="Accenture.CSTPrague.eAPI.WebDB_Perm" UpdateMethod="StoreGroupMembers">
                                            <SelectParameters>
                                                <asp:SessionParameter Name="o" SessionField="oPermGroup" Type="Object" />
                                            </SelectParameters>
                                        </asp:ObjectDataSource>
                                    </div>
                                    <asp:Button ID="btnDeleteSelected" runat="server" OnClick="btnDeleteSelected_Click" Text="Delete Selected" Width="106px" CssClass="ButtonS1" Style="margin: 4px 0px 8px 2px;" />
                                </ContentTemplate>
                                <Triggers>
                                    <asp:AsyncPostBackTrigger ControlID="btnDeleteSelected" EventName="Click" />
                                </Triggers>
                             </asp:UpdatePanel>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <asp:Label ID="lblUserName" runat="server" Text="User name:" Width="141px"/>
                        </td>
                        <td>
                            <asp:UpdatePanel ID="UpdatePanel2" runat="server">
                                <ContentTemplate>
                                <asp:Panel ID="panel1" runat="server" DefaultButton="btnAdd">
                                    <table>
                                        <tr>
                                            <td valign="top">
                                                <accenture:lookupcontrol ID="UserLookup" runat="server"
                                                    LookupCommand="usr"
                                                    MaxLength="100"
                                                    ValidationGroup="addUser"
                                                    DisableValidation="true"
                                                    />
                                            </td>
                                            <td>
                                                <asp:CustomValidator ID="cuvUserName" runat="server" ValidationGroup="addUser" 
                                                Display="Dynamic" ErrorMessage="<" EnableClientScript="false" OnServerValidate="cuvUserName_ServerValidate"
                                                ControlToValidate="UserLookup" ValidateEmptyText="true" />
                                            </td>

                                            <td valign="top">
                                                <asp:Button ID="btnAdd" runat="server" OnClick="btnAdd_Click" Text="Add User" ValidationGroup="addUser" CausesValidation="true" CssClass="ButtonS1" Style="margin: 2px 0px 8px 2px;"/>
                                            </td>
                                        </tr>
                                    </table>  
                                 </asp:Panel> 
                                </ContentTemplate>
                                <Triggers>
                                    <asp:AsyncPostBackTrigger ControlID="btnAdd" EventName="Click" />
                                </Triggers>
                             </asp:UpdatePanel>
                        </td>
                    </tr>
                    <tr style="vertical-align:top">
                        <asp:Panel ID="queryConditionPanel" runat="server" Visible="false">
                            <td><asp:Label ID="lblQueryCondition" runat="server" Text="Query&nbsp;Condition:" Width="138px"/></td>
                            <td><accenture:LengthLimitedMultilineTextBox ID="txtQueryCondition" runat="server" Text='<%# Bind("QueryCondition") %>' style="width:500px" TextMode="MultiLine" MaxLength="1000" Height="100px" CssClass="txtbox" /></td>
                        </asp:Panel>
                    </tr>
                </table>
            </EditItemTemplate>
            <InsertItemTemplate>
                Gid: <asp:TextBox ID="GidTextBox" runat="server" Text='<%# Bind("Gid") %>' /><br />
                GroupName: <asp:TextBox ID="GroupNameTextBox" MaxLength="50" runat="server" Text='<%# Bind("GroupName") %>' /><br />
                Id: <asp:TextBox ID="IdTextBox" runat="server" Text='<%# Bind("Id") %>'></asp:TextBox><br />
                GroupDescr: <asp:TextBox ID="GroupDescrTextBox" MaxLength="255" runat="server" Text='<%# Bind("GroupDescr") %>' /><br />
                ExcludeFromUserFilter: <asp:CheckBox ID="chbExcludefromDocFilter" runat="server" Checked='<%# Bind("ExcludeFromUserFilter") %>' /><br />
                Members: <asp:TextBox ID="MembersTextBox" runat="server" Text='<%# Bind("Members") %>' /><br />
                <asp:LinkButton ID="InsertButton" runat="server" CausesValidation="True" CommandName="Insert" Text="Insert" />
                <asp:LinkButton ID="InsertCancelButton" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel" />
            </InsertItemTemplate>
            <ItemTemplate>
                Gid: <asp:Label ID="GidLabel" runat="server" Text='<%# Bind("Gid") %>' /><br />
                GroupName: <asp:Label ID="GroupNameLabel" runat="server" Text='<%# Bind("GroupName") %>' /><br />
                Id: <asp:Label ID="IdLabel" runat="server" Text='<%# Bind("Id") %>' /><br />
                GroupDescr: <asp:Label ID="GroupDescrLabel" runat="server" Text='<%# Bind("GroupDescr") %>' /><br />
                <%--ExcludeFromUserFilter: <asp:Label ID="lblExcludefromDocFilter" runat="server" Text='<%# Bind("ExcludeFromUserFilter") %>' /><br />--%>
                Members: <asp:Label ID="MembersLabel" runat="server" Text='<%# Bind("Members") %>' /><br />
                <asp:LinkButton ID="EditButton" runat="server" CausesValidation="False" CommandName="Edit" Text="Edit" />
            </ItemTemplate>
        </asp:FormView>

        <asp:Label ID="lblMsg" runat="server" ForeColor="Red" />

        <asp:ObjectDataSource ID="PermGroupObjectDataSource1" runat="server" DataObjectTypeName="Accenture.CSTPrague.eAPI.PermGroup" SelectMethod="FetchPermGroupFromDB" TypeName="Accenture.CSTPrague.eAPI.WebDB_Perm" UpdateMethod="StorePermGroupToDB" OnUpdating="PermGroupObjectDataSource1_Updating">
            <SelectParameters>
                <asp:SessionParameter Name="o" SessionField="oPermGroup" Type="Object" />
            </SelectParameters>
        </asp:ObjectDataSource>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:10:19.623

设置`ValidationGroup="dddd"`验证控制和想要的按钮。

**编辑**

因为你是使用 formview 所以你遇到了这个问题。

请查看同样的问题已解决的 [威胁](http://forums.asp.net/t/1396988.aspx/2/10)

# c# - WPF MiniGame 项目 - 同时使用两个关键事件

> ID：15294724
> 
> 赞同：0
> 
> 时间：2013-03-08T13:07:33.227
> 
> 标签：c#, wpf, events, project, keyup

我在 WPF c# 中有一个迷你游戏项目要做。

游戏是关于射击的，大部分游戏都快完成了。

问题是我正在使用 KeyDown 事件进行上下移动，并且还需要使用空格键触发。

在我尝试向上或向下移动并尝试射击之前，一切都很好。我试图将火灾事件放在 KeyUp 中，但是，当一起移动和射击时，它仍然不起作用。

如果您对此有任何想法，请告诉我。

顺便说一句，我知道 WPF 并不意味着创建游戏，但它必须在 WPF 中完成。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:17:02.383

在 KeyDown 事件中将 IsMovingUp、IsFiring 等布尔值设置为 true，并将事件标记为已处理。在 KeyUp 事件中将这些布尔值设置为 false。

然后在您的主游戏循环中，您可以检查布尔值并采取相应措施。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-16T20:06:28.247

上下拍的每一个方法都放在一个线程的主程序中，这样：

if (shooting == 32) 32 = ASCII 码 Space & Shooting 变量

Come and Shoot 以及 for the Up & Down 所以命令被执行而不是混合参数:)

# php - wordpress 插件的真正调度程序

> ID：15294727
> 
> 赞同：0
> 
> 时间：2013-03-08T13:07:46.243
> 
> 标签：php, wordpress

我想创建一个 wordpress 插件，它在 X 分钟等特定分钟间隔内执行操作。查看 WP-API 有一种方法`wp_schedule_event`可以每小时、每天或每天两次安排操作。有没有办法在 WP 中真正安排事件，我可以定义事件应该运行的确切时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:10:00.053

尝试

```
wp_schedule_event('YOUR_LINUX_TIMESTAMP', 'daily', 'my_wp_cron_file' ); 
```

YOUR_LINUX_TIMESTAMP 是`time()`；

或查看全文：[http ://codex.wordpress.org/Function_Reference/wp_schedule_event](http://codex.wordpress.org/Function_Reference/wp_schedule_event)

唯一有效的值是“hourly”、“twicedaily”和“daily”

但：

打开`cron.php`并在“wp_includes/”文件夹中找到代码并找到：

```
function wp_get_schedules() {
    $schedules = array(
        'hourly'     => array( 'interval' => HOUR_IN_SECONDS,      'display' => __( 'Once Hourly' ) ),
        'twicedaily' => array( 'interval' => 12 * HOUR_IN_SECONDS, 'display' => __( 'Twice Daily' ) ),
            // YOU CODE PUT THERE // 
        'daily'      => array( 'interval' => DAY_IN_SECONDS,       'display' => __( 'Once Daily' ) ),
    );
    return array_merge( apply_filters( 'cron_schedules', array() ), $schedules );
} 
```

添加：

```
'minutes'     => array( 'interval' => 60,      'display' => __( 'Once Minutes' ) ), 
```

或每小时：

```
'hourly'     => array( 'interval' => 3600,      'display' => __( 'Once Hourly' ) ), 
```

并将其更改为简单：

```
wp_schedule_event('YOUR_LINUX_TIMESTAMP', 'hourly', 'my_wp_cron_file' );   // as exmaple hourly cron is called 
```

# mysql - 如果关键字存在，但不是搜索词的一部分，MySQL 全文排名行更高

> ID：15294731
> 
> 赞同：1
> 
> 时间：2013-03-08T13:08:07.750
> 
> 标签：mysql, full-text-search

我正在尝试调整全文（布尔）查询。如果一个词包含在一行中，是否可以将行排名更高，但*不*将该词用作搜索查询的一部分？

因此，如果它包含关键字奶酪，但不主动搜索术语奶酪，我想排名更高？

目前我使用类似的东西`searchterm >cheese*`，但我相信它仍然会实际搜索这个词`cheese`吗？

这产生的问题是，如果没有结果，它仍然会显示基于`cheese`. 我只希望它被用作改进结果的方法，而不是被搜索的东西。

`black >cheese*`可能会返回根本不包含黑色但包含单词 cheese 的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:28:29.530

您可以尝试使用`+test cheese`. 文档说明结果必须包含`test`，但如果它们也包含`cheese`，则排名更高。

一个示例查询：

```
SELECT 
  MATCH (name) AGAINST ('+test cheese' IN BOOLEAN MODE) AS relevance, 
  t.* 
FROM 
  test AS t 
WHERE 
  MATCH (name) AGAINST ('+test' IN BOOLEAN MODE) 
ORDER BY relevance DESC; 
```

您可以在[http://sqlfiddle.com/#!2/6e5f8/4查看](http://sqlfiddle.com/#!2/6e5f8/4)

文档： [http ://dev.mysql.com/doc/refman/5.5/en/fulltext-boolean.html](http://dev.mysql.com/doc/refman/5.5/en/fulltext-boolean.html)

# c - C 程序与 Linux/BSD 和不同架构的兼容性

> ID：15294737
> 
> 赞同：1
> 
> 时间：2013-03-08T13:08:32.880
> 
> 标签：c, linux, unix

我正在阅读的一本书建议在它们打算用于的机器上编译程序以确保没有任何问题。我想学习 C 的一大原因是因为它（可以）与所有操作系统兼容。我在linux上使用这个。如果在预期的机器上编译程序不是一种选择，是否有一个可以遵循的程序来确保程序能够完美运行，而不管它运行在哪个版本的 linux/bsd 上？就像一张针对不同操作系统和不同架构的兼容功能的婴儿床，如何处理每个差异以确保兼容性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:10:39.953

使用旨在跨平台工作的库。如果您确实需要做任何与平台相关的事情，则必须编写代码来说明您希望应用程序在其上运行的所有架构/平台。

特定平台必须`#define X`确定代码是否在其上运行，因此您可以`#ifdef X`检查特定平台，然后在该语句中编写代码，对平台特定代码的每一位执行相同操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:26:23.210

您对源代码兼容性和二进制兼容性感到困惑。二进制文件绝对不可移植，这与编程语言无关。例如，在 BSD 上编译的二进制文件永远不会在 linux 上运行，因为所有系统调用都有不同的编号和约定。

如果仔细编写，C 代码应该是可移植的并且与各种操作系统兼容。您只需在每个目标平台上单独编译它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:15:26.210

我会查阅以下几个链接以获取一些基本信息

[http://en.wikipedia.org/wiki/Linux_Standard_Base](http://en.wikipedia.org/wiki/Linux_Standard_Base)

[http://www.linuxfoundation.org/collaborate/workgroups/lsb](http://www.linuxfoundation.org/collaborate/workgroups/lsb)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T13:15:37.783

标准 C 是可移植的，但与所有语言一样，内存管理之外的任何内容和语言竭尽全力包含的非常基本的库都将不可移植。

这个问题即使在 Java 中也存在，因为假设您想做一些看似可移植的事情（比如将控制台窗口的颜色设置为绿色或红色）是不可能的。

总体而言，示例书 C 往往是非常便携的，或者具有非常小的修复（例如进行显式转换）的便携性。

# java - 引起：android.database.sqlite.SQLiteException：没有这样的表

> ID：15294741
> 
> 赞同：0
> 
> 时间：2013-03-08T13:08:48.983
> 
> 标签：java, android, sqlite

当我开始展示数据库结果的活动时，我收到此错误。我曾尝试删除旧数据库并卸载游戏，但没有运气。这是我的 OffDBHelper 代码：

```
public class OffDBHelper {

    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "name";
    public static final String KEY_SCORE = "score";

    private static final String DATABASE_NAME = "highscores";
    private static final String DATABASE_TABLE = "highscorestable";
    public static final int DATABASE_VERSION = 1;

    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    private static class DbHelper extends SQLiteOpenHelper{

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                    KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
                    KEY_NAME + " TEXT NOT NULL, " +
                    KEY_SCORE + " INTEGER NOT NULL);"
                    );
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);       
        }

    }

    public OffDBHelper(Context c){
        ourContext = c;
    }

    public OffDBHelper open() throws Exception{
        ourHelper = new DbHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }
    public void close(){
        ourHelper.close();
    }

    public long createEntry(String name, double score) {
        ContentValues cv = new ContentValues();
        cv.put(KEY_NAME, name);
        cv.put(KEY_SCORE, score);
        return ourDatabase.insert(DATABASE_TABLE, null, cv);
    }

    public String getData() {
        String[] columns = new String[]{KEY_ROWID, KEY_NAME, KEY_SCORE};
        Cursor c = ourDatabase.query(DATABASE_NAME, columns, null, null, null, null, null);
        String result = "";

        int iRow = c.getColumnIndex(KEY_ROWID);
        int iName = c.getColumnIndex(KEY_NAME);
        int iScore = c.getColumnIndex(KEY_SCORE);

        for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
            result = result + c.getString(iRow) + " " + c.getString(iName) + " " + c.getString(iScore) + "\n";
        }

        return result;

    }
} 
```

这是我的 dialog.theme 活动，我在其中插入了我的名字：

```
public class ImePopup extends Activity implements OnClickListener{

    EditText ime;
    Button ok, odustani;
    double score;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.imepopup);

        ok = (Button) findViewById(R.id.btOK);
        odustani = (Button) findViewById(R.id.btOdustani);
        ime = (EditText) findViewById(R.id.etIme);

        ok.setOnClickListener(this);
        odustani.setOnClickListener(this);
    }

    public void onClick(View arg0) {
        switch (arg0.getId()){
        case R.id.btOK:
            boolean didItWork = true;
            try{
            String name = ime.getText().toString();

            OffDBHelper entry = new OffDBHelper(ImePopup.this);
            entry.open();
            entry.createEntry(name, score);
            entry.close();
            break;
            }catch(Exception e){
                didItWork = false;
                String error = e.toString();
                Dialog d = new Dialog(this);
                d.setTitle("Greska!");
                TextView tv = new TextView(this);
                tv.setText("Greska u upisu");
                d.setContentView(tv);
                d.show();
            }finally{
                if(didItWork){
                    Dialog d = new Dialog(this);
                    d.setTitle("Uspesno!");
                    TextView tv = new TextView(this);
                    tv.setText("Upisali ste se!");
                    d.setContentView(tv);
                    d.show();
                }
            }
        case R.id.btOdustani:

            break;
}
    }
} 
```

以及我展示结果的活动：

```
public class OffRezultati extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.offrezultati);

        TextView tvSQLinfo;
        TextView tv = (TextView) findViewById(R.id.tvSQLinfo);

        OffDBHelper info = new OffDBHelper(this);
        try {
            info.open();
        } catch (Exception e) {
            e.printStackTrace();
        }
        String data = info.getData();
        info.close();
        tv.setText(data);

    }

} 
```

这是 LogCat：

```
03-08 13:40:29.737: I/Database(24888): sqlite returned: error code = 1, msg = no such table: highscores
03-08 13:40:29.747: D/AndroidRuntime(24888): Shutting down VM
03-08 13:40:29.747: W/dalvikvm(24888): threadid=1: thread exiting with uncaught exception (group=0x40018560)
03-08 13:40:29.768: E/AndroidRuntime(24888): FATAL EXCEPTION: main
03-08 13:40:29.768: E/AndroidRuntime(24888): java.lang.RuntimeException: Unable to start activity ComponentInfo{rs.androidaplikacijekvizopstekulture/rs.androidaplikacijekvizopstekulture.OffRezultati}: android.database.sqlite.SQLiteException: no such table: highscores: , while compiling: SELECT _id, imeosobe, skor FROM highscores
03-08 13:40:29.768: E/AndroidRuntime(24888):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at android.app.ActivityThread.access$1500(ActivityThread.java:123)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at android.os.Looper.loop(Looper.java:130)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at android.app.ActivityThread.main(ActivityThread.java:3835)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at java.lang.reflect.Method.invokeNative(Native Method)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at java.lang.reflect.Method.invoke(Method.java:507)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at dalvik.system.NativeStart.main(Native Method)
03-08 13:40:29.768: E/AndroidRuntime(24888): Caused by: android.database.sqlite.SQLiteException: no such table: highscores: , while compiling: SELECT _id, imeosobe, skor FROM highscores
03-08 13:40:29.768: E/AndroidRuntime(24888):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1356)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1235)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1189)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1271)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at rs.androidaplikacijekvizopstekulture.OffDBHelper.getData(OffDBHelper.java:72)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at rs.androidaplikacijekvizopstekulture.OffRezultati.onCreate(OffRezultati.java:29)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-08 13:40:29.768: E/AndroidRuntime(24888):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
03-08 13:40:29.768: E/AndroidRuntime(24888):    ... 11 more
03-08 13:40:31.307: I/Process(24888): Sending signal. PID: 24888 SIG: 9
03-08 13:57:41.437: I/Database(25128): sqlite returned: error code = 1, msg = table highscorestable has no column named score
03-08 13:57:41.617: E/Database(25128): Error inserting score=0.0 name=marjan
03-08 13:57:41.617: E/Database(25128): android.database.sqlite.SQLiteException: table highscorestable has no column named score: , while compiling: INSERT INTO highscorestable(score, name) VALUES(?, ?);
03-08 13:57:41.617: E/Database(25128):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
03-08 13:57:41.617: E/Database(25128):  at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
03-08 13:57:41.617: E/Database(25128):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
03-08 13:57:41.617: E/Database(25128):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
03-08 13:57:41.617: E/Database(25128):  at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:41)
03-08 13:57:41.617: E/Database(25128):  at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1149)
03-08 13:57:41.617: E/Database(25128):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1569)
03-08 13:57:41.617: E/Database(25128):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1426)
03-08 13:57:41.617: E/Database(25128):  at rs.androidaplikacijekvizopstekulture.OffDBHelper.createEntry(OffDBHelper.java:64)
03-08 13:57:41.617: E/Database(25128):  at rs.androidaplikacijekvizopstekulture.ImePopup.onClick(ImePopup.java:42)
03-08 13:57:41.617: E/Database(25128):  at android.view.View.performClick(View.java:2506)
03-08 13:57:41.617: E/Database(25128):  at android.view.View$PerformClick.run(View.java:9112)
03-08 13:57:41.617: E/Database(25128):  at android.os.Handler.handleCallback(Handler.java:587)
03-08 13:57:41.617: E/Database(25128):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-08 13:57:41.617: E/Database(25128):  at android.os.Looper.loop(Looper.java:130)
03-08 13:57:41.617: E/Database(25128):  at android.app.ActivityThread.main(ActivityThread.java:3835)
03-08 13:57:41.617: E/Database(25128):  at java.lang.reflect.Method.invokeNative(Native Method)
03-08 13:57:41.617: E/Database(25128):  at java.lang.reflect.Method.invoke(Method.java:507)
03-08 13:57:41.617: E/Database(25128):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
03-08 13:57:41.617: E/Database(25128):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
03-08 13:57:41.617: E/Database(25128):  at dalvik.system.NativeStart.main(Native Method)
03-08 13:57:47.377: I/Database(25128): sqlite returned: error code = 1, msg = no such table: highscores
03-08 13:57:47.437: D/AndroidRuntime(25128): Shutting down VM
03-08 13:57:47.437: W/dalvikvm(25128): threadid=1: thread exiting with uncaught exception (group=0x40018560)
03-08 13:57:47.497: E/AndroidRuntime(25128): FATAL EXCEPTION: main
03-08 13:57:47.497: E/AndroidRuntime(25128): java.lang.RuntimeException: Unable to start activity ComponentInfo{rs.androidaplikacijekvizopstekulture/rs.androidaplikacijekvizopstekulture.OffRezultati}: android.database.sqlite.SQLiteException: no such table: highscores: , while compiling: SELECT _id, name, score FROM highscores
03-08 13:57:47.497: E/AndroidRuntime(25128):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at android.app.ActivityThread.access$1500(ActivityThread.java:123)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at android.os.Looper.loop(Looper.java:130)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at android.app.ActivityThread.main(ActivityThread.java:3835)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at java.lang.reflect.Method.invokeNative(Native Method)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at java.lang.reflect.Method.invoke(Method.java:507)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at dalvik.system.NativeStart.main(Native Method)
03-08 13:57:47.497: E/AndroidRuntime(25128): Caused by: android.database.sqlite.SQLiteException: no such table: highscores: , while compiling: SELECT _id, name, score FROM highscores
03-08 13:57:47.497: E/AndroidRuntime(25128):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1356)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1235)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1189)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1271)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at rs.androidaplikacijekvizopstekulture.OffDBHelper.getData(OffDBHelper.java:69)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at rs.androidaplikacijekvizopstekulture.OffRezultati.onCreate(OffRezultati.java:29)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-08 13:57:47.497: E/AndroidRuntime(25128):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
03-08 13:57:47.497: E/AndroidRuntime(25128):    ... 11 more
03-08 13:57:47.597: D/dalvikvm(25128): GC_CONCURRENT freed 260K, 49% free 2893K/5639K, external 0K/0K, paused 6ms+16ms
03-08 13:57:47.677: E/Database(25128): close() was never explicitly called on database '/data/data/rs.androidaplikacijekvizopstekulture/databases/highscores' 
03-08 13:57:47.677: E/Database(25128): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
03-08 13:57:47.677: E/Database(25128):  at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1847)
03-08 13:57:47.677: E/Database(25128):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:820)
03-08 13:57:47.677: E/Database(25128):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:854)
03-08 13:57:47.677: E/Database(25128):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:847)
03-08 13:57:47.677: E/Database(25128):  at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:572)
03-08 13:57:47.677: E/Database(25128):  at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
03-08 13:57:47.677: E/Database(25128):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118)
03-08 13:57:47.677: E/Database(25128):  at rs.androidaplikacijekvizopstekulture.OffDBHelper.open(OffDBHelper.java:53)
03-08 13:57:47.677: E/Database(25128):  at rs.androidaplikacijekvizopstekulture.OffRezultati.onCreate(OffRezultati.java:25)
03-08 13:57:47.677: E/Database(25128):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-08 13:57:47.677: E/Database(25128):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
03-08 13:57:47.677: E/Database(25128):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
03-08 13:57:47.677: E/Database(25128):  at android.app.ActivityThread.access$1500(ActivityThread.java:123)
03-08 13:57:47.677: E/Database(25128):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
03-08 13:57:47.677: E/Database(25128):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-08 13:57:47.677: E/Database(25128):  at android.os.Looper.loop(Looper.java:130)
03-08 13:57:47.677: E/Database(25128):  at android.app.ActivityThread.main(ActivityThread.java:3835)
03-08 13:57:47.677: E/Database(25128):  at java.lang.reflect.Method.invokeNative(Native Method)
03-08 13:57:47.677: E/Database(25128):  at java.lang.reflect.Method.invoke(Method.java:507)
03-08 13:57:47.677: E/Database(25128):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
03-08 13:57:47.677: E/Database(25128):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
03-08 13:57:47.677: E/Database(25128):  at dalvik.system.NativeStart.main(Native Method)
03-08 13:57:49.217: I/Process(25128): Sending signal. PID: 25128 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:18:49.703

改变这一行：

```
Cursor c = ourDatabase.query(DATABASE_NAME, columns, null, null, null, null, null); 
```

对此

```
Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:14:37.647

表名是：`highscorestable`而不是`highscores`在这里你应该有

```
Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T13:17:20.403

在`getData()`函数中，替换`DATABASE_NAME`为`DATABASE_TABLE`!

```
 Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-08T13:17:15.833

你得到了这些 android/sqlite 异常

`SQLiteException: no such table: highscores: , while compiling: SELECT _id, imeosobe, skor FROM highscores`

`android.database.sqlite.SQLiteException: table highscorestable has no column named score: , while compiling: INSERT INTO highscorestable(score, name) VALUES(?, ?);`

我会仔细检查你的表和列定义以及你是如何构建插入语句的

# android - 在安卓手机设置中添加应用程序

> ID：15294747
> 
> 赞同：-1
> 
> 时间：2013-03-08T13:09:23.957
> 
> 标签：android

我需要在 android 手机系统设置中添加我的应用程序名称，并可以选择更改应用程序的某些配置。有没有可能，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:16:03.067

**不**

这是不可能的。请在此处发布之前对问题进行更多研究。

**编辑：**

您没有告诉您是哪种设置。只有当您的应用进行一些同步时，您才能在同步设置中添加“您的应用”

# c# - SettingsCommand 可以回调到 Windows 应用程序吗？

> ID：15294750
> 
> 赞同：0
> 
> 时间：2013-03-08T13:09:29.417
> 
> 标签：c#, windows, xaml

我的 C#/XAML Windows 8 应用程序中有一个 SettingsCommand。它完美地工作。我提供的选项之一是允许用户重置他们在应用程序中的所有数据。这也很完美。

但是，用户打开设置超级按钮时正在查看的实际 XAML 页面需要自行刷新。有没有办法调用当前打开的页面？或者得到它的参考？或者将页面的引用传递给 SettingsCommand？

或者甚至让页面识别出魅力栏已打开？像“专注”/“不专注”的事件？

或者，是否可以从 SettingsCommand UserControl 导航到我的应用程序的特定页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:18:23.257

原来我只需要参考：

Frame rootFrame = Window.Current.Content as Frame;
rootFrame.Navigate(typeof(MainPage));

# android - 如何动态地将视图添加到鳍状肢视图

> ID：15294753
> 
> 赞同：1
> 
> 时间：2013-03-08T13:09:59.447
> 
> 标签：android

```
<LinearLayout
    android:id="@+id/linear2"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
     >
    <ViewFlipper
     android:id="@+id/flipper"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent" 
     >
     <include android:id="@+id/include1" layout="@layout/fb_list1"/>
     <include  android:id="@+id/include2" layout="@layout/fb_list2"/>
     </ViewFlipper>
</LinearLayout> 
```

这是我的主要布局。我在鳍状肢视图中有 2 个视图，我想动态添加第三个视图。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:32:35.440

```
 private static final LayoutParams mLop = 
        new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,
                                        LinearLayout.LayoutParams.WRAP_CONTENT); 
```

这是您必须动态创建的鳍状肢视图....

```
mFlipper = new ViewFlipper(mContext);
            mFlipper.setLayoutParams(mLop);
            this.addView(mFlipper); 
```

这是要添加到鳍状肢视图中的视图

```
vm.setLayoutParams(mLop);
                mFlipper.addView(vm); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:20:27.923

```
// this gets you the LinearLayout
LinearLayout ll = (LinearLayout) findViewById(R.id.linear2);

// Create your view and add it
ViewFlipper vf = new ViewFlipper(this);
ll.addView(vf, new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:15:23.073

addView方法应该适用于此[。](http://developer.android.com/reference/android/view/ViewGroup.html#addView%28android.view.View,%20int%29)但是，您是否考虑过使用[FragmentPagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)？

# jquery - jQuery 和 jQuery 表单插件问题放置到 localStorage

> ID：15294759
> 
> 赞同：2
> 
> 时间：2013-03-08T13:10:20.453
> 
> 标签：jquery, autocomplete

我正在使用 jQuery mobile 制作 web 应用程序，但是在让插件一起工作时遇到了一些问题。我知道为什么会这样，但我无法解决它...

因此，在我的网络应用程序中，我选择了带有[http://andymatthews.net](http://andymatthews.net)自动完成插件的项目。选择项目后，我将一些数据放在 localStorage 中。项目名称，ID等...

[然后在选择项目后我有一些不同的表单，我使用jQuery 表单插件](http://www.malsup.com/jquery/form/)提交。我使用 PHP 访问 Mysql 数据库，所以我通过 jQuery 表单插件从本地存储中发布表单信息和一些变量。（我用这个，因为我也通过一些表格上传图片..）

所以，问题是，jQuery 表单插件需要放在 $(document).ready(function(){}) 中，并且只有在页面加载后才会生成数据，但是每次我从自动完成中选择新项目时我都会更改 localStorage 数据场地。因此，每次从列表中选择另一个项目时，我都需要重新启动应用程序，以将带有表单字段变量的 localStorage 变量传递给 PHP。我试图将 jQuery 表单插件放置到 $("#page").live("pageshow", function(){}) 但是插件不起作用......

这是问题的示例：

顺便说一句，对不起我的语言，但无论如何，谢谢你的建议......

```
$(document).ready(function()  {
$('#innregulering_form').ajaxForm({
       beforeSubmit: function(){
                        $.mobile.loading('show')},
       data:         ({project_id: localStorage.project_id,
                     project_prefix : localStorage.project_prefix}),
       dataType:     'json',
       failure:      function(data) { 
                        show_message('#innregulering_header', 'Can not save!', 'red')},
       success:      function(data) {
                         load_innregulering(data.apartament_id);
                         $.mobile.loading('hide');
                         $('#pop_innregulering_file_place').html('<b>File plased at:</b>' + data.file_patch + '</br><b>File name is: </b>' + data.file_name + '</br><b>File size is: </b>' + data.file_size + ' KB');
                         $('#tmp_pdf_file').val(data.file_name);
                         $("#wiev_innregulering_pdf_popup").popup( "open", {transition:  "pop"})}
 }); 
```

});

```
$("#select_project").live("pageshow", function(event, ui) {
if (localStorage.project_search){autocompleteData = JSON.parse(localStorage.project_search);} else {autocompleteData = '';}
$("#project_search").autocomplete({
    target:         $('#suggestions'),
    source:         autocompleteData,
    link:           '#project_home?',
    minLength:      1,
    matchFromStart: false,
    callback:       function(e) {
                         var $project = $(e.currentTarget); // access the selected item
                         var project_name = $project.data('autocomplete').label;
                         var project_prefix = $project.data('autocomplete').prefix;
                         var project_id = $project.data('autocomplete').project_id;
                         localStorage.setItem('project', project_name);
                         localStorage.setItem('project_prefix', project_prefix);
                         localStorage.setItem('project_id', project_id);}
}); 
```

});

# image-processing - 将多张图片压缩成一张图片

> ID：15294764
> 
> 赞同：2
> 
> 时间：2013-03-08T13:10:27.887
> 
> 标签：image-processing, png, jpeg, image-compression

我正在研究将*多个*图像存储在一起作为一个*更大*的图像时减少存储空间的问题。基本直觉是图像往往具有一些相似性（例如在相同位置或大约相同时间点拍摄的图像），我们可以利用这种相似性来节省空间。

例如，对于 JPG 编码的图像，整体流程是：输入`JPG`图像 -> 将每个图像转换为`RGB`图像块 -> 将相似`RGB`的块重新组织在一起 -> 再次转换为`JPG`格式。自然，在检索图像时，我们需要*反转*该过程。

我刚刚意识到 JPG 图像*不太*适合这种情况，因为它们*主要*适用于小型 8x8 宏块，因此JPG 编码并**没有**充分利用*更*大规模的相似性（在图块级别 - 每个图块是一些 256x256 宏块等） 。

 *** * *

除了 JPG 之外，还有**其他**一些图像编码格式可以在聚合多个图像时更好地利用这种相似性吗？例如，这对 PNG 编码过程会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:08:42.767

看看[设置冗余压缩](http://en.wikipedia.org/wiki/Set_redundancy_compression)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T08:32:42.317

我不知道现有的库或格式可以满足您的需求。

但是，您可能对**图像改组**感兴趣，这是一种在过去五年左右的时间里在计算机图形学和视觉研究中引起了一些关注的范式。

这个想法是从现有图像的拼贴中组成图像内容，主要用于图像编辑（例如，用于移动图像的某些部分或使图像更大，很像 Photoshop 的“内容感知填充”）。大多数应用程序从图像本身为图像生成内容，但是没有理由不应该从另一个图像构建一个图像进行压缩。当然，压缩会是有损的，但您可以在之后尝试压缩残差。

这是对其中一种算法的一个[很好的概述](http://cybertron.cg.tu-berlin.de/pdci11ws/patchmatch/index.html)。

[Here](http://gfx.cs.princeton.edu/pubs/Barnes_2009_PAR/index.php) and [here](http://people.csail.mit.edu/taegsang/patchTransform.html) are original research papers. The first one contains an example of creating one image from patches of a similar but different one.**

# asp.net - 更新面板内的 ASP.Net 复选框

> ID：15294773
> 
> 赞同：0
> 
> 时间：2013-03-08T13:11:20.447
> 
> 标签：asp.net, .net, vb.net, visual-studio-2010, webforms

我在更新面板中有一个 asp.net 复选框，其中 autopostback 设置为 true。当我选中复选框时，它会显示我想要显示的其他控件。当我取消选中该复选框时，数据库中的值会更新。这一切都很好。

如果我想在取消选中复选框后移动到另一个页面，则会显示一个对话框，询问我是要留在该页面上还是离开该页面。如何阻止该对话框出现？

```
<asp:UpdatePanel runat="server" ID="upOnProbation" UpdateMode="Conditional">
        <ContentTemplate>
            <div>
                <table>
                    <tr>
                        <td>
                            <asp:CheckBox runat="server" Text="On Probation" ID="chkOnProbation" AutoPostBack="true" ClientIDMode="AutoID" />
                        </td>
                    </tr>
                    <asp:PlaceHolder runat="server" ID="plcProbabtionDates" Visible="false">
                        <tr>
                            <td>
                                Start date
                            </td>
                            <td>
                                <ComponentArt:Calendar runat="server" ID="dtStart" ControlType="Picker" PickerFormat="Short">
                                </ComponentArt:Calendar>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                End date
                            </td>
                            <td>
                                <ComponentArt:Calendar runat="server" ID="dtEnd" ControlType="Picker" PickerFormat="Short">
                                </ComponentArt:Calendar>
                            </td>
                        </tr>
                         <tr>
                        <td>
                            <asp:Button runat="server" ID="btnSave" Text="Save" CssClass="btn" />
                        </td>
                    </tr>
                    </asp:PlaceHolder>                   
                </table>
            </div>
        </ContentTemplate>

    </asp:UpdatePanel>

Protected Sub chkOnProbation_CheckedChanged(sender As Object, e As System.EventArgs) Handles chkOnProbation.CheckedChanged
        If chkOnProbation.Checked Then
            plcProbabtionDates.Visible = True
            dtStart.SelectedDate = DateTime.Now
            dtEnd.SelectedDate = DateTime.Now.AddMonths(6)
        Else
            plcProbabtionDates.Visible = False
            objCompany.On_Probation = False
            objCompany.Save(UserStaffID)
        End If
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:32:50.277

[检查此先前的答案](https://stackoverflow.com/questions/1289234/alerts-when-navigating-away-from-a-web-page)以了解为什么会发生这种情况。

基本上，当您在网页上有一个表单时，浏览器会`onbeeforeunload`为您触发一个事件，以确保考虑未保存的更改。

上一个问题的答案表明，您可以通过将处理程序设置为`null`

```
window.onbeforeunload = null; 
```

# php - 将 base_url() 扩展到 base_url_admin() 在 CodeIgniter 中无法正常工作

> ID：15294774
> 
> 赞同：1
> 
> 时间：2013-03-08T13:11:20.800
> 
> 标签：php, codeigniter

我的配置**config_backend.php**（自动加载）如下所示：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

$config['my_admin_url'] = 'admin'; 
```

我的助手**admin_helper.php**看起来像这样：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

function base_url_admin()
{
    $ci =& get_instance();

    $ci->config->load('config_backend');
    $ci->load->helper('url');

    return base_url().$my_admin_url.'/';
} 
```

我在视图中的代码如下所示：

```
<a href="<?php echo base_url_admin(); ?>">Admin</a> 
```

但问题是，而不是正确的输出，如：

```
<a href="http://localhost/admin">Admin</a> 
```

该链接如下所示：

```
<a href="http://localhost">Admin</a> 
```

有趣的是，当我在帮助者中这样做时，例如：

```
function base_url_admin()
{
    $ci =& get_instance();

    $ci->config->load('config_backend');
    $ci->load->helper('url');

    return "idiot";
} 
```

它输出如下内容：

```
http://localhost/admin/idiot 
```

所以，我假设 admin_helper 已加载，但我不知道管理员如何出现在那里？

知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:17:08.240

您应该返回`my_admin_url`配置，因为您没有拿起配置项，您希望它返回它和/或配置返回数组键名下的变量，即`$my_admin_url`. 但是要退回它，您可以这样做：

```
return base_url() . $ci->config->item('my_admin_url') . '/'; 
```

# ruby-on-rails - Webrick 服务器未在 Windows 8 中启动

> ID：15294777
> 
> 赞同：1
> 
> 时间：2013-03-08T13:11:27.483
> 
> 标签：ruby-on-rails, ruby

我正在运行以下内容：

*   Windows 8 64 位
*   红宝石 1.9.3
*   导轨 3.2.12

当我尝试启动 webrick 时，我得到以下输出：

![在此处输入图像描述](../Images/74e82bd7776e1fba786d9c01a90483c4.png)

是的..没有启动。很奇怪。我对 Rails 很陌生，所以这可能是一个完全错误的错误。感谢您朝着正确的方向前进！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:17:05.190

我可以看到您在 Users\Dean 文件夹中，尝试`rails s`从您的应用程序根目录开始

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T13:17:18.580

可能你不在你的应用路径中，假设你的应用在 中`C:\Path\to\rails\app`，首先告诉你的控制台应该在这个路径中：`cd C:\Path\to\rails\app`. 然后尝试使用`rails s`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T13:19:38.747

在启动服务器之前，您必须位于正确的文件夹中。

```
cd appfolder
rails s 
```

如果你想打开 rails 控制台也一样

```
cd appfolder
rails c 
```

但是，要启动 ruby​​ 控制台，您不需要位于正确的文件夹中，只需：

```
irb 
```

# oracle - JPA 本机查询不返回任何记录

> ID：15294784
> 
> 赞同：2
> 
> 时间：2013-03-08T13:11:50.473
> 
> 标签：oracle, hibernate, jpa, nativequery

这是获取相关后端指定级别内的模块实体的方​​法。

```
public List<Module> getModulesWithinLevel(Long backendId, ModuleLevel... levels) {
        String joinedLevels = serializeLevels(levels);
        Query query = entityManager.createNativeQuery("SELECT DISTINCT M.* FROM MODULES M JOIN ROUTING_SEQUENCES RS ON RS.BCK_ID = M.MOD_ID WHERE M.MOD_LEVEL IN (?) AND RS.BCK_ID = ?", Module.class);
        query.setParameter(1, joinedLevels);
        query.setParameter(2, backendId);
        List l = query.getResultList();
        return l;
    } 
```

当我在 sql developer 中执行确切的查询时，我得到一行结果。但是此方法返回空列表。日志中没有错误 - 只是空列表。我的本机查询有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:19:21.057

你离开了吗？误入了那里？

尝试...

```
Query query = entityManager.createNativeQuery("SELECT DISTINCT M.* FROM MODULES M JOIN ROUTING_SEQUENCES RS ON RS.BCK_ID = M.MOD_ID WHERE M.MOD_LEVEL IN (:1) AND RS.BCK_ID = :2", Module.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:42:38.950

我确实找到了原始问题的答案，但我通过使用复合键为 ROUTING_SEQUENCES 表实现实体做了一些解决方法。这很好用：

```
Query query = entityManager.createQuery("SELECT m FROM Module m WHERE m.id IN (SELECT rs.id.moduleId FROM RoutingSequence rs WHERE rs.id.backendId = :backendId) AND m.level IN (:levels)", Module.class);
query.setParameter("backendId", backendId);
query.setParameter("levels", Arrays.asList(levels));
return query.getResultList(); 
```

实体：

```
@Entity
@Table(name = "ROUTING_SEQUENCES")
public class RoutingSequence extends AbstractEntity<RoutingSequencePK> implements Auditable {

    @EmbeddedId
    private RoutingSequencePK id;

    @Column(name = "RS_MANDATORY", nullable = false)
    private Boolean mandatory;

    @Column(name = "RS_ORDER")
    private int order;

    @Column(name = "RS_INSDTTM")
    private Date insertDate;

    @Column(name = "RS_UPDDTTM")
    private Date updateDate;
...
} 
```

ID

```
@Embeddable
public class RoutingSequencePK implements Serializable {

    @Column(name = "BCK_ID")
    private Long backendId;

    @Column(name = "MOD_ID")
    private Long moduleId; 
```

# jquery - jQuery validate - 如果选择了一个选项，则不需要下一个选项？

> ID：15294786
> 
> 赞同：8
> 
> 时间：2013-03-08T13:12:07.780
> 
> 标签：jquery, validation, plugins

我是一个完整的菜鸟，基本上按照教程了解所有内容，我正在使用 jQuery Form Plugin

我正在尝试制作一个选择“联系类型”的表格，如果选择“电话”选项，则需要“联系时间”，但如果选择“电子邮件”，则需要“联系时间”联系方式”不需要。

*****表格html。*******

 **```
<form id="askquestion" action="questionprocess.php" method="post">

                <td><label for="response type">Method of contact:</label></td>
                <td><select name="response_type"> 
                    <option value="" selected="selected">-- Please select --</option>

                    <option value="Phone">Phone</option>
                    <option value="Email">Email</option>
                    </select></td>
                    </tr>

                    <td><label for="response time">Best time to contact:</label></td>
                <td><select name="contact_time"> 
                    <option value="" selected="selected">-- Please select --</option>
                    <option value="morning_noon">Morning to Noon</option>
                    <option value="noon_afternoon">Noon to afternoon</option>
                    <option value="evenings">Evenings</option>
                    </select></td>
                    </tr>

        </form> 
```

jQuery 规则：

```
$(function() {
    // Validate the contact form
  $('#askquestion').validate({
    // Specify what the errors should look like
    // when they are dynamically added to the form
    errorElement: "label",
    wrapper: "td",
    errorPlacement: function(error, element) {
        error.insertBefore( element.parent().parent() );
        error.wrap("<tr class='error'></tr>");
        $("<td></td>").insertBefore(error);
    },

    // Add requirements to each of the fields
    rules: {

        response_type: {
            required:true,
        },

        contact_time: {
            required:true,
        }, 
```

**更新。**这就是验证表单的结束方式。

```
// Use Ajax to send everything to form processing file
    submitHandler: function(form) {
        $("#send").attr("value", "Sending...");
        $(form).ajaxSubmit({
            success: function(responseText, statusText, xhr, $form) {
                $(form).slideUp("fast");
                $("#response").html(responseText).hide().slideDown("fast");
            }
        });
        return false;
    }
  });
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T13:42:54.050

```
rules: {
    response_type: {
        required: true,
        contact_time: {
            depends: function () {
                return $('#askquestion select[name="response_type"]').val() === 'Phone';
            }
        }
    }, 
```

它在文档中： http: [//docs.jquery.com/Plugins/Validation/validate#code](http://docs.jquery.com/Plugins/Validation/validate#code)**

# android - Android OpenGL - 在主游戏引擎之前添加标题屏幕（和以后的菜单）的最佳方法是什么？

> ID：15294787
> 
> 赞同：3
> 
> 时间：2013-03-08T13:12:08.120
> 
> 标签：android, opengl-es, title

我正在制作基于 OpenGL 2.0 的 Android 游戏。它只是一个主要的活动类，渲染器类，其中所有内容都在 onDrawFrame 和 myGLSurfaceView 中运行，其中包含触摸事件。和现在一样好用。

问题是 - 我应该如何继续制作开始屏幕和进一步的开始菜单。所以首先我想显示一个标题屏幕，然后触摸它应该运行游戏。问题是我不知道应该怎么做 - 我正在考虑这个选项：

1.  开始时，我可以在带有标题屏幕的 onDrawFrame 中绘制一个平面纹理矩形，触摸后它将显示游戏的其余部分并隐藏平铺屏幕。这很容易做到，但我有一种感觉，它不应该这样做。

2.  我考虑过单独的活动 - 每个活动都运行单独的渲染器和单独的 GLSurfaceViews - 这样一个将关闭，另一个将启动。但我不能这样做——我的意思是我不能从 MyGLSurfaceView onTouch 方法调用 MyActivity 类来启动另一个活动，我也不能从 MyGLSurfaceView 启动另一个活动，因为 getApplicationContext 在那里不起作用。我试过这个：

    Intent intent = new Intent(getApplicationContext(), NewGameActivity.class); 开始活动（意图）；而且我什至不知道这是否是正确的做法 - 开始新的活动，新的 GLSurvaceView 和渲染器，关闭旧的？

3.  我还考虑使用带有 2d 画布的启动活动来绘制标题屏幕，然后在触摸后关闭它并运行 OpenGL 活动？

或者也许应该有另一种方法？请给我任何建议:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:02:02.157

我更喜欢选项 1： **- 启动画面应该在 opengl 中完成** - 游戏应该有 1 个全屏 Activity。- 支持单一方向（纵向或横向），避免重新创建活动

为什么？- 这允许您的游戏更快地创建 GLSurfaceView 并在显示初始屏幕时执行一些资源加载。您还可以在启动画面中添加进度条。- 尝试在 opengl 中完成所有操作，以便我们可以轻松地将游戏移植到其他平台。

# java - request.getParameter("param") 不返回值，当 param=xyz%

> ID：15294792
> 
> 赞同：0
> 
> 时间：2013-03-08T13:12:33.577
> 
> 标签：java, servlets

我将一个参数`param`从传递`jsp`到`servlet`具有类似的值`%xyz`。

当我试图通过 servlet 获得价值时，`request.getParameter("param")` 我没有得到任何价值。

相反，它是空白的（甚至不是 Null）。

可以的，请任何人解释原因。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T13:15:57.317

`%`是 uri 中的一个特殊字符。您必须`%`使用 uri 编码对值进行编码。在您的情况下，`%`应编码为`%25`

# java - 独立模式下的错误：权限被拒绝

> ID：15294794
> 
> 赞同：0
> 
> 时间：2013-03-08T13:12:42.517
> 
> 标签：java, hadoop, mapreduce

在独立模式下运行代码时，

```
laxmikant@laxmikant-Inspiron-1464:~/Work/hadoop-0.21.0$ bin/hadoop jar hadoop-mapred examples-0.21.0.jar grep input output '[a-z.]+'

bash: /home/laxmikant/java/jdk1.7.0_04/bin/java: Permission denied
bash: /home/laxmikant/java/jdk1.7.0_04/bin/java: Permission denied` 
```

怎样才能消除这个错误？我已经正确设置了 java_home 和路径。我试图在网上搜索，但找不到它。您能否发送分配权限和确切步骤所需的命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:23:02.387

转到`/home/laxmikant/java/jdk1.7.0_04/bin/`文件夹并执行命令：

```
$ ls -lh | grep java 
```

看看java是否有执行权限。如果没有，请运行以下命令：

```
$ chmod +x java 
```

# android - ActionBar 下方的 ActionBar 搜索结果

> ID：15294801
> 
> 赞同：0
> 
> 时间：2013-03-08T13:12:57.953
> 
> 标签：android, android-widget

我将 ActionBar 搜索视图与 OnQueryTextListener 结合使用。输入文本被识别 - 所以这部分工作正常。

如何在操作栏下方显示搜索结果（就像谷歌地图应用程序一样）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:52:45.847

试试这个：[添加搜索建议](http://developer.android.com/guide/topics/search/search-dialog.html#SearchSuggestions)[developer.android.com]

# perl - Perl CSV 散列

> ID：15294807
> 
> 赞同：7
> 
> 时间：2013-03-08T13:13:20.603
> 
> 标签：perl, csv, hash

我有一个 CSV 文件，其中包含标题行和数据之前的注释文本，我想将其作为哈希读入以进行进一步操作。主键具有哈希值，将是两个数据值的组合。我如何？

1.  使用模式“索引”搜索标题行
2.  使用标题作为键
3.  读入文件的其余部分。

示例 CSV

```
#
#
#
#
Description information of source of file.

index,label,bit,desc,mnemonic
6,370,11,three,THRE
9,240,23,four,FOR
11,120,n/a,five,FIV 
```

示例所需的哈希

```
( '37011' => { 'index' => '6', 'label' => '370', 'bit' => '11', 'desc' => 'three', 'mnemonic' => 'THRE'}, '24023' => {'index' => '9', 'label'  => '240', 'bit' => '23', 'desc' => 'four', 'mnemonic' => 'FOR'}, '120n/a' => {'index' => '11', 'label'  => '120', 'bit' => 'n/a', 'desc' => 'five', 'mnemonic' => 'FIV'} ) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T14:05:02.063

为此，您需要[Text::CSV](https://metacpan.org/pod/Text::CSV)模块：

```
#!/usr/bin/env perl
use strict;
use warnings;
use Data::Dumper;
use Text::CSV;

my $filename = 'test.csv';

# watch out the encoding!
open(my $fh, '<:utf8', $filename)
    or die "Can't open $filename: $!";

# skip to the header
my $header = '';
while (<$fh>) {
    if (/^index,/x) {
        $header = $_;
        last;
    }
}

my $csv = Text::CSV->new
    or die "Text::CSV error: " . Text::CSV->error_diag;

# define column names    
$csv->parse($header);
$csv->column_names([$csv->fields]);

# parse the rest
while (my $row = $csv->getline_hr($fh)) {
    my $pkey = $row->{label} . $row->{bit};
    print Dumper { $pkey => $row };
}

$csv->eof or $csv->error_diag;
close $fh; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T13:25:44.560

你总是可以做类似的事情：

```
#!/usr/bin/env perl

use strict;
use warnings;

my %hash;
while( <DATA> ){ last if /index/ } # Consume the header
my $labels = $_;  # Save the last line for hash keys
chop $labels;
while(<DATA>){
    chop;
    my @a = split ',';
    my $idx = 0;
    my %h = map { $_ => $a[$idx++]} split( ",", $labels );
    $hash{ $a[1] . $a[2] } = \%h;
}

while( my ( $K, $H ) = each %hash ){
    print "$K :: ";
    while( my( $k, $v ) = each( %$H ) ) {
        print $k . "=>" . $v . "  ";
    }
    print "\n";
}

__DATA__

#
#
#
#
Description information of source of file.

index,label,bit,desc,mnemonic
6,370,11,three,THRE
9,240,23,four,FOR
11,120,n/a,five,FIV 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-06T13:52:56.617

[Text::CSV::Simple](https://metacpan.org/pod/Text%3a%3aCSV%3a%3aSimple)自 2005 年以来一直存在......

从文档：

```
# Map the fields to a hash
my $parser = Text::CSV::Simple->new;
$parser->field_map(qw/id name null town/);
my @data = $parser->read_file($datafile); 
```

...简单的！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-18T07:31:22.330

# 简单、可粘贴的解析器

```
sub parse_csv {
    my ($f, $s, %op) = @_;  # file, sub, options
    my $d = $op{delim}?$op{delim}:"\t";  # delimiter, can be a regex
    open IN, $f; 
    $_=<IN>; chomp;
    my @h=map {s/"//g; lc} split /$d/; # header assumed, could be an option
    $h[0]="id" if $h[0] eq ""; # r compatible
    while(<IN>) {
        chomp;
        my @d=split /$d/;
        map {s/^"//; s/"$//;} @d; # any file with junk in it should fail anyway
        push @h, "id" if (@h == (@d - 1)); # r compat
        my %d=map {$h[$_]=>$d[$_]} (0..$#d);
        &{$s}(\%d);
    }
} 
```

# 示例用法：

```
parse_csv("file.txt", sub {
   die Dumper $_[0];
}) 
```

请注意，像 $. 和 $_ 这样的东西仍然可以在 sub

# regex - 正则表达式环视，结合前瞻和后瞻

> ID：15294809
> 
> 赞同：7
> 
> 时间：2013-03-08T13:13:30.450
> 
> 标签：regex

我试图在以下字符串中获取“Expertise”之后和“Most”之前的单词：

```
"Top Skills & Expertise   Project Management  Cooking  Childcare  Tutoring       Most Recommended" 
```

基于示例，我认为我应该使用这个：

```
(?<=Top Skills & Expertise).*(Most Recommended?=) 
```

但这似乎不起作用，所以我使用这个：

```
(?<=)Top Skills & Expertise.*Most Recommended(?=) 
```

当然，在第二种情况下，“顶级技能和专长”和“最推荐”被消耗和返回，这是我不想要的。

我敢肯定，我在这里缺少一些简单的东西。对正则表达式新手的任何指导都将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T13:23:56.660

您的前瞻部分错误：

```
(?<=Top Skills & Expertise).*(?=Most Recommended) 
```

# javascript - Netbeans javascript缩进括号太多

> ID：15294810
> 
> 赞同：2
> 
> 时间：2013-03-08T13:13:30.590
> 
> 标签：javascript, netbeans, tabs, indentation

如果我在 Netbeans 中键入以下 javascript...

```
if (foo) [enter] { [enter] dostuff(); 
```

我得到：

```
if (foo)
    {
        dostuff();
    } 
```

这很愚蠢。有什么办法可以得到正确的结果：？

```
if (foo)
{
    dostuff();
} 
```

编辑：显然这是[一个应该在几年前修复的错误](http://netbeans.org/bugzilla/show_bug.cgi?id=182420)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:28:02.087

截至 2013 年 4 月 2 日，这显然是 Javascript 和 NetBeans 的一个开放错误：[https ://netbeans.org/bugzilla/show_bug.cgi?id=182420](https://netbeans.org/bugzilla/show_bug.cgi?id=182420)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:17:13.803

尝试 Ctrl + Shift + f 它是由 IDE 自动格式化代码

# asp.net-mvc - 每次有新客户时如何播放声音？

> ID：15294811
> 
> 赞同：1
> 
> 时间：2013-03-08T13:13:33.000
> 
> 标签：asp.net-mvc, api, rest

“起初，每天有六个订单。其中一名程序员将计算机设置为每次有订单时都会响铃。” - Jeff Bezos 和 Amazon.com 的崛起

我想这样做，但认为必须有一种“聪明并完成任务”的方式来做到这一点，这几乎是毫不费力的。

我希望它基本上是一个现有的 API，我们可以将它放入我们的 ASP.NET MVC 应用程序中，并在我们的一台机器上发出声音。

我可以从头开始编写代码，但感觉至少有一些部分应该可用。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:18:39.030

好吧，起初您需要一个铃铛或扬声器来播放铃铛声。然后你需要一些代码或程序来敲响那个铃。现在您需要找到一种在您的响铃程序和您的商店之间进行通信的方法。您可以通过套接字、管道或其他方式执行此操作。由于您使用的是 Asp.net，因此您可以使用一些 .Net 代码来调用 Windows Media Player 或其他东西。

```
Sub Play()
        Try
            Dim mplayer As New Media.SoundPlayer
            mplayer.SoundLocation = Server.MapPath("1.wav")
            mplayer.Load()
            mplayer.Play()
            mplayer.Dispose()
            errormessage.Text = "PLD_KNTR_OK"
        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try
    End Sub 
```

这仅在您的服务器在您附近并且具有声卡时才有效。否则，请使用我上面描述的一些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T17:35:47.777

这不会在您的商店敲响真正的钟声，但您可以尝试使用 BellBot。我有同样的愿望，正在寻找解决方案。我想在墙上敲一个真正的铃，但这可能适合您的需要。

您将代码行插入到感谢页面或用户第一次注册时点击的内容，然后只要您打开网站，您的计算机就会发出半愚蠢的铃声。它也是免费的。

该网站在这里：[http ://www.bellbot.com/](http://www.bellbot.com/)

# unit-testing - EasyMock 调用两个 DAO 方法 - 意外方法调用 UserAdminDAO.updateUser

> ID：15294813
> 
> 赞同：0
> 
> 时间：2013-03-08T13:13:35.010
> 
> 标签：unit-testing, junit, mocking, easymock

在我对 DAO 方法的单元测试中，我正在尝试测试更新用户方法。但是，我必须创建一个用户然后更新它。所以我的模拟 DAO 期待 addUser 调用，但是当我调用更新方法时，它会抱怨

java.lang.AssertionError：意外的方法调用 UserAdminDAO.updateUser(null)：

这是代码截图

```
expect(userAdminDAO.addNewUser(u1)).andReturn(u1);
    replay(userAdminDAO);

    User u2 = (User)userService.addNewUser(ar);
    Assert.assertEquals(u.getUserName(), u2.getUserName());

    u2.setUserName("new modified");
userAdminDAO.updateUser(u2);   //error is on this line 
    expectLastCall().once().andAnswer(new IAnswer<User>() {
        public User answer() {
            return null;
        }
    });
    replay(userAdminDAO);
    userService.updateUser(u2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:13:02.793

在添加第二个期望之前，您已经重播了模拟：

```
expect(userAdminDAO.addNewUser(u1)).andReturn(u1);
replay(userAdminDAO); // you shouldn't do this
...
userAdminDAO.updateUser(u2); 
```

# perl - Perl CGI 通过网络浏览器下载文件

> ID：15294815
> 
> 赞同：6
> 
> 时间：2013-03-08T13:13:45.637
> 
> 标签：perl, apache, web, cgi

需要一些可以从服务器机器下载文件的 cgi-perl 脚本。EX：单击下载链接，它将打开一个“另存为”窗口，并允许我将文件保存在本地计算机上。

我已经使用 CGI 创建了一个网页，使用它我会将文件上传到服务器并运行 perl 脚本将其转换为其他格式（直到我完成）。现在我需要将此文件取回（下载回）到系统。

```
#!/usr/bin/perl
#print "Content-type: text/html\n\n";
my $filepath='/upload/testing.pm';

    print "Content-Type: text/html\n\n";

    open("DOWNLOADFILE", "<".$filePath);
    while($fileContents = <DOWNLOADFILE>) {
        print $fileContents;
    }
print "Content-Type: text\n";
print "Content-Disposition: attachment; filename='testing.pm'\n";
print "Content-Description: File to download\n\n";
    close DOWNLOADFILE; 
```

将文件从我的机器（客户端）上传到服务器机器，在那里我有一个 perl 脚本，它将文件转换为另一种格式并将新转换的文件保存到目录 ex: /upload-> 直到这里我完成了脚本.

现在我需要使用浏览器将此文件下载回客户端计算机。在这种情况下，我试图将 testing.pm 文件下载回客户端机器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T15:32:31.927

重新排列 HTML 标头有效。这是工作脚本。可以按原样使用它

```
use CGI;
my $html= new CGI;
#get the file name from URL ex. http://<server_IP>/cgi-bin/download.cgi?a=testing.txt
my $file= $html->param('a'); 
# $file is nothing but testing.txt
my $filepath= "/var/www/upload/$file";

print ("Content-Type:application/x-download\n");
print "Content-Disposition: attachment; filename=$file\n\n";

open FILE, "< $filepath" or die "can't open : $!";
binmode FILE;
local $/ = \10240;
while (<FILE>){
    print $_;
}

    close FILE;
 # use Unlink if u want to delete the files after download.
#unlink ($filepath); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T14:27:10.263

我认为您刚刚拼错了您的内容处置标题。它应该是“附件”，而不是“附件”。

**更新（下面的评论）：**

好的，进一步看，我看到您正在打印 CGI 标头（内容类型：文本/html），然后是两个换行符，然后，打印更多 CGI 标头并期望浏览器注意到它们。您的响应中的第一个空行将告诉浏览器标头已完成。所以你的第二批标题将被视为内容。

我还看到您在第二组标题*之前打印文件的内容。*这将使它们成为页脚而不是页眉:-)

您需要重新排序代码，以便只返回一组标头。然后你返回数据。

# boost-asio - 无法关闭 TCP_NODELAY

> ID：15294816
> 
> 赞同：2
> 
> 时间：2013-03-08T13:13:47.087
> 
> 标签：boost-asio, delay, nagle

我正在使用 Boost asio 发送 TCP 消息。我设置了 NO_DELAY 选项，因为这是一个“实时”控制系统。我看到使用 Wireshark 在消息中设置了 PSH 标志。我对性能感到满意，并且它按预期工作。

出于兴趣，我决定关闭 NO_DELAY 并测量性能差异。

我交换了我现有的代码：

```
m_tcpSocket.open(boost::asio::ip::tcp::v4());
boost::asio::ip::tcp::no_delay noDelayOption(true);
m_tcpSocket.set_option(noDelayOption);

// snip create endpoint
m_tcpSocket.connect(m_tcpServerEndpoint);

// snip build message
m_tcpSocket.send(boost::asio::buffer(pDataBuffer, size)); 
```

为了

```
boost::asio::ip::tcp::no_delay noDelayOption(false);
m_tcpSocket.set_option(noDelayOption); 
```

我仍然看到设置了 PSH 标志。

我还尝试删除 set_option 代码并仍然看到它设置。

在 Wireshark 中，我看到：

```
104 - 105  SYN
105 - 104  SYN, ACK
104 - 105  ACK
104 - 105  PSH, ACK + my message
105 - 104  ACK 
```

其中 104 和 105 是我的 2 台 PC 的 IP 地址。我也很惊讶带有我的数据的消息有一个 ACK​​。

如何关闭 NO_DELAY？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T15:52:30.250

您的代码看起来好像正确设置为`TCP_NODELAY`打开或关闭。要启动`TCP_NODELAY`，请使用：

```
socket.set_option(boost::asio::ip::tcp::no_delay(false)); 
```

[TCP RFC](https://www.rfc-editor.org/rfc/rfc793#page-15)将PSH 定义为推送功能。简而言之，它是一个标志，通知接收者所有数据都已发送，因此将数据向上转发到协议栈。Boost.Asio将其 API[映射](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/overview/networking/bsd_sockets.html)到 BSD 套接字，而 BSD 套接字不提供控制 PSH 标志的方法。这通常由协议栈中的内核在清除其缓冲区时处理。

来自[TCP/IP 图解](https://rads.stackoverflow.com/amzn/click/com/0201633469)：

> 该标志通常用于指示在发送数据包的一侧的缓冲区已与发送数据包一起被清空。换句话说，当设置了 PSH 位字段的数据包离开发送方时，发送方就没有更多数据要发送了。
> 
> [...]
> 
> 推送（接收方应尽快将此数据传递给应用程序——不可靠地实现或使用）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T14:02:41.913

NO_DELAY 不会更改发送给对等方的标志。它改变了内核的缓冲算法。谷歌关于 Nagle 算法以获得更多的了解。

# java - 我们如何使用过滤器修改请求对象中的标头

> ID：15294818
> 
> 赞同：2
> 
> 时间：2013-03-08T13:13:50.987
> 
> 标签：java

我需要创建一个过滤器并修改请求对象中设置的标头值。我们如何使用过滤器修改请求对象中的标头？请求对象中没有可用的 setHeader 方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T13:19:54.973

您可以使用`javax.servlet.http.HttpServletRequestWrapper`包装`HttpServletRequest`服务器传递的对象。

在包装类中，您需要覆盖`getHeader`方法并返回标头的修改值。

您可以在此处参考类似的帖子[Modify request parameter with servlet filter](https://stackoverflow.com/questions/1413129/modify-request-parameter-with-servlet-filter)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-01-21T11:10:14.887

您可以使用导入收集器

> 导入 java.util.stream.Collectors；

将以下方法添加到您的类中。

```
private Map<String, String> convertHeadersToLowerCase(Map<String, String> headers) {
    return headers
            .entrySet()
            .stream()
            .collect(Collectors.toMap(entry -> entry.getKey().toLowerCase(), entry -> entry.getValue()));
} 
```

然后在响应中返回标头之前，您应该确保它们在返回之前通过将以下内容添加到您的 Response 方法的 Controller 中进行转换：

> requestHeaders = convertRequestHeadersToLowerCase(requestHeaders);

# vb.net - 使用类在 vb.net 中使用 vb 按钮与 webbrowser 交互

> ID：15294820
> 
> 赞同：0
> 
> 时间：2013-03-08T13:14:03.110
> 
> 标签：vb.net, webbrowser-control

我只是想知道如何在我已经拥有的文本输入功能上实现发送按钮。

```
Private Sub Button4_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button4.Click

    WebBrowser1.Document.All("q").SetAttribute("value", TextBox5.Text) 
```

所以到目前为止，这会从我的文本框中获取文本并将其发送到网络浏览器，但我也需要它在网站上进行搜索。

我正在使用的网站在 HTML 代码中没有标签名称，它只有一个类、值和输入类型。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:23:59.607

你可以这样处理

```
Dim elems As HtmlElementCollection = webBrowser1.Document.GetElementsByTagName("button")
For Each elem As HtmlElement In elems
    Dim nameStr As [String] = elem.GetAttribute("class")
    If nameStr IsNot Nothing AndAlso nameStr.Length <> 0 Then
        ele.InnerText = TextBox5.Text
    End If
Next 
```

找到所需的输入字段后，您可以搜索按钮并在元素上调用它

```
ele.InvokeMember("click") 
```

# c# - 单选按钮用于在多个选项中仅选择一个选项

> ID：15294822
> 
> 赞同：0
> 
> 时间：2013-03-08T13:14:22.757
> 
> 标签：c#, asp.net-mvc, radio-button

我有这个模型，其中包含 2 个布尔值：

```
public bool m_IsOptionA {get;set;}
public bool m_IsOptionB {get;set;} 
```

而且，在我看来，我想生成 2 个单选按钮，用户必须选择一个或另一个。所以，基本上，我需要做到这一点，如果一个被选中，另一个不会被选中。

在我的控制器中，在将模型传递给视图之前，我为对象列表的每个项目初始化这些值：

```
foreach (var item in m_ListObjs)
{
    item.m_IsOptionA = true;
    item.m_IsOptionB = false;
} 
```

然后，在我看来，我为单选按钮生成以下代码：

```
@for (int i = 0; i < Model.Count; i++)
    {
        <p>
            <tr>
                <td>@Html.RadioButtonFor(x => x[i].m_IsOptionA, new{id = "m_IsAuction_true"}, new {style = "width:100px"})</td>
                <td>@Html.RadioButtonFor(x => x[i].m_IsOptionB, new{id = "m_IsBuyItNow_false"}, new {style = "width:130px"})</td>
            </tr>
        </p>
    } 
```

但是它们既可以被检查，也可以在检查后保持检查，这不是我想要的行为。

我需要一些javascript吗？是这样，我怎么能这样做，如果不是，我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:03:54.053

好的！感谢@Digger37，我理解了我的错误。我不需要 2 个布尔值，而是需要为每个想要的值设置一个和 2 个单选按钮。

这是我的布尔值：

```
public bool m_IsOptionSelected {get;set;} 
```

现在这是我的新观点：

```
<td>@Html.RadioButtonFor(x => x[i].m_IsOptionSelected , "true", new {style = "width:100px"}) Option A</td>
<td>@Html.RadioButtonFor(x => x[i].m_IsOptionSelected , "false", new {style = "width:100px"}) Option B</td> 
```

而且效果很好。谢谢！

# android - 如何在 android 中使用 ProgressUpdate(Integer... values)

> ID：15294825
> 
> 赞同：-2
> 
> 时间：2013-03-08T13:14:36.523
> 
> 标签：android, android-asynctask

我是 android 的新手，我想知道我们可以在 ProgressUpdate(Integer... values) 的这个方法中将字符串作为参数传递

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:21:07.933

您可以`onProgressUpdate()`与任何引用类型一起使用，因为您需要将其指定`String`为 中的进度类型`AsyncTask`，例如：

```
public class DownloadTask extends AsyncTask<String, String, Bitmap> 
```

您可能知道，第一个泛型参数 in`AsyncTask`用于输入参数的类型，第二个用于进度，最后一个指示结果的类型。希望这可以帮助。

# asp.net-mvc - 颜色框内的部分页面无法触发单选按钮的 onclick 处理程序

> ID：15294829
> 
> 赞同：0
> 
> 时间：2013-03-08T13:14:46.993
> 
> 标签：asp.net-mvc

在我的索引页面中，我有

```
<a class='popup' href='@Url.Action("Add", "Alert")'>Add New</a> 
```

我在 cshtml 文件的末尾有一个节脚本

```
@section Scripts 
{ 
<link rel="stylesheet" href="http://www.formmail-maker.com/var/demo/jquery-popup-    form/colorbox.css" />

<style>
    #cboxOverlay{ background:#666666; }
</style>

<script type="text/javascript" src="http://www.jacklmoore.com/colorbox/jquery.colorbox.js"></script>
<script type="text/javascript">

    $(document).ready(function () {
        $(".popup").colorbox({ opacity: 0.85, iframe: true, fastIframe: false, width:    "450px", height: "480px", scrolling: false });
});

function ddUserClicked() { 
{
    alert('user button, selected!'); 
}

function ddEntityClicked() {
    alert('entity button, selected!');
}

</script>

} 
```

这工作正常。当调用 Add（操作方法）Alert（控制器）时，它返回一个部分页面，该页面愉快地填充了页面中心的颜色框。

在颜色框中，我有两个单选按钮。我希望使用 onclick 事件，以便他们可以调用我从原始视图 ddUserClicked() 和 ddEntityClicked() 实现的函数。

但这不起作用。

部分页面脚本是

```
@model WellRoute.Web.Models.CreateAlertModel

@{
    ViewBag.Title = "Add New Alert";
}

<h2>@ViewBag.Title</h2><br />

@using (Html.BeginForm("Add", "Alert", FormMethod.Post))
{
<fieldset>
    <legend>New Alert</legend>
    <table>
        <tr>
            <td>@Html.Label("Type")</td>
            <td>
                @Html.RadioButtonFor(m => m.IsUserAlert, true, new { onclick = "ddUserClicked(); ", })User Alert
                @Html.RadioButtonFor(m => m.IsUserAlert, false, new { onclick = "ddEntityClicked()", })Entity Alert
            </td>
        </tr>
        <tr>
            <td>@Html.Label("User")</td>
            <td>
                @Html.DropDownListFor(m => m.SelectedValue, new SelectList(Model.Users, "Id", "EmailAddress"), new { style = "width:250px;" })
                @Html.DropDownListFor(m => m.SelectedValue, new SelectList(Model.Entities, "Id", "Name"), new { style = "width:250px; visibility:hidden;"     })
            </td>
        </tr>
        <tr>
            <td>@Html.Label("Message")</td>
            <td>@Html.TextAreaFor(m => m.Message, new  { style = "width:250px; height:100px" })</td>
        </tr>
    </table>
    <p>
        <input type="submit" value="Save" />
        <input type="submit" value="Cancel" />
    </p>
</fieldset>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:32:52.153

我看到的第一件事（虽然不确定这是否只是复制'n'粘贴错误）是你的 -function`{`太多了`ddUserClicked()`:)

除此之外，让它工作的一种快速而肮脏的方法是从您的视图中删除函数`ddUserClicked`并将`ddEntityClicked`以下内容放在局部视图的顶部（虽然不是在`script`-section 内）

```
<script type="text/javascript">
    function ddUserClicked() {
        alert('user button, selected!');
    }

    function ddEntityClicked() {
        alert('entity button, selected!');
    }
</script> 
```

我认为问题可能`script`是 - 部分包含在`body`（如果您`_Layout.cshtml`至少使用默认值）的末尾，并且函数没有在您使用它们的地方定义。不过我可能是错的。

另一种方法是给单选按钮一个 ID，例如：

```
<td>
    @Html.RadioButtonFor(m => m.IsUserAlert, true, new { id = "user_alert", })User Alert
    @Html.RadioButtonFor(m => m.IsUserAlert, false, new { id = "entity_alert", })Entity Alert
</td> 
```

...然后创建一个 jquery 脚本。类似于以下内容：

```
// File alert.js
$(document).ready(function() {
    $("#user_alert").click(function() {
        alert('user button, selected!');
    });

    $("#entity_alert").click(function () {
        alert('user button, selected!');
    });
}); 
```

然后链接.js。这将使您与脚本松散耦合，因为您没有在 HTML 中指定要绑定的任何函数。通常，您希望避免在视图中放置过多的 javascript。

# mysql - 在xampp中备份mysql数据库？

> ID：15294830
> 
> 赞同：13
> 
> 时间：2013-03-08T13:14:51.867
> 
> 标签：mysql, phpmyadmin, xampp

大家好，最近我做了一个数据库，我们的教授告诉我们，我们可以通过复制xampp/mysql/data中的文件夹来制作数据库的副本。

然后在我创建数据库后，我将数据库的文件夹复制到那里，因为我将继续在另一台计算机上创建数据库。事实证明，复制该文件夹是不够的，因为事实证明它只能读取数据库本身，而不能读取数据库中表的内容。

数据库文件夹“tablename”.frm 和一个“db.opt”的内容。

有人可以教我备份数据库的正确方法吗？为了运行我在其他计算机上创建的数据库，我需要复制哪些文件。

我已经读过这个，但我似乎无法正确理解说明。（如果这是备份它的正确方法）

[http://dev.mysql.com/doc/refman/5.0/en/innodb-backup.html](http://dev.mysql.com/doc/refman/5.0/en/innodb-backup.html)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2017-01-24T12:51:22.653

有两种方法来备份你的数据库
**一：文件夹备份** 在windows中去xampp安装文件夹xampp>mysql>data>在这里你找到你的数据库名称文件夹。复制并保存。
您可以使用任何其他计算机，只需转到 xampp 安装文件夹 xampp> mysql > data > 将其粘贴到此处。
**注意：**你不应该覆盖 MySql 默认文件夹，只覆盖 3 个文件

1.  ibdata1
2.  ib_logfile0
3.  ib_logfile1

其他人应保持默认。谢谢，否则你不会在 PHPMyAdmin 中看到你的数据库。谢谢
**二：导出数据库 .sql 备份** 在浏览器中转到 phpmyadmin 并选择您的数据库>然后在顶部的鬃毛中单击导出。然后在新建模板输入框中写一个名字。然后点击去。你会发现一个文件被下载了。
您可以在任何其他计算机上使用它，然后在浏览器中转到 phpmyadmin 并创建一个数据库，然后在顶部菜单上单击**导入**单击**选择文件**> 选择已下载的此文件 > 然后单击**执行**按钮。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-08T13:25:05.253

在 XAMPP 的本地屏幕（在您的浏览器中），转到 PhpMyAdmin（在左侧）并选择 MySQL，在左上角查看您的数据库，确保它被选中。在中央屏幕将有一个菜单选项卡，其中有一个导入，旁边是导出选项卡。选择导出选项卡。在这里，您必须选择要包含在备份中的所有表，并设置备份文件的名称和设置位置（默认情况下相信它是下载文件）。请记住还要确保选择了备份文件的类型。即sql文件等。

完成此备份后，您只需在浏览器的 XAMPP 中再次导入即可。应该比较容易。希望能帮助到你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T13:18:37.703

使用 phpMyAdmin 中的导出功能 [https://wordpress.org/support/article/backing-up-your-database/](https://wordpress.org/support/article/backing-up-your-database/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-06T20:22:22.527

这3个文件是包含表格内容的文件

1.  ibdata1

2.  ib_logfile0

3.  ib_logfile1

所以一旦你复制了所有其他部分，只覆盖这三个文件，你的表格内容将可用

# list - 如何使用 Get-ChildItem -exclude 排除多个文件夹？

> ID：15294836
> 
> 赞同：67
> 
> 时间：2013-03-08T13:15:19.517
> 
> 标签：list, powershell, directory

我需要为我们的 Pro/Engineer CAD 系统生成一个配置文件。我需要来自我们服务器上特定驱动器的文件夹的递归列表。但是，我需要排除其中包含“ARCHIVE”的任何文件夹，包括各种不同的情况。

我写了以下内容，除了它不排除文件夹之外，它有效！

```
$folder = "T:\Drawings\Design\*"
$raw_txt = "T:\Design Projects\Design_Admin\PowerShell\raw.txt"
$search_pro = "T:\Design Projects\Design_Admin\PowerShell\search.pro"
$archive = *archive*,*Archive*,*ARCHIVE*

Get-ChildItem -Path $folder -Exclude $archive -Recurse  | where {$_.Attributes -match 'Directory'}  | ForEach-Object {$_.FullName} > $search_pro 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2017-02-02T16:21:58.793

我跳过某些文件夹的*KISS*方法是链接`Get-ChildItem`调用。如果您想要的话，这不包括根级文件夹，但不包括更深层次的文件夹。

```
Get-ChildItem -Exclude folder1,folder2 | Get-ChildItem -Recurse | ... 
```

*   开始**排除**您不想要的文件夹
*   然后在排除不需要的文件夹的情况下进行**递归**搜索。

我喜欢这种方法的地方在于它简单易记。如果您不想在第一次搜索中混合文件夹和文件，则需要使用过滤器。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2013-03-08T13:31:25.893

我会这样做：

```
Get-ChildItem -Path $folder -r  | 
? { $_.PsIsContainer -and $_.FullName -notmatch 'archive' } 
```

请注意，`-notmatch`接受正则表达式：

[https://docs.microsoft.com/powershell/module/microsoft.powershell.core/where-object#parameters](https://docs.microsoft.com/powershell/module/microsoft.powershell.core/where-object#parameters)

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2016-03-14T16:56:28.523

*如果这个答案似乎与以前的答案重复，我深表歉意。我只是想展示一个更新的（通过 POSH 5.0 测试）解决这个问题的方法。之前的答案是 3.0 之前的版本，不如现代解决方案高效。*

[文档](https://technet.microsoft.com/en-us/library/hh849800(v=wps.640).aspx)对此并不清楚，但`Get-ChildItem -Recurse -Exclude`仅匹配叶 ( `Split-Path $_.FullName -Leaf`) 上的排除，而不是父路径 ( `Split-Path $_.FullName -Parent`)。匹配排除只会删除具有匹配叶子的项目；`Get-ChildItem`仍然会递归到那片叶子。

## 在 POSH 1.0 或 2.0 中

```
Get-ChildItem -Path $folder -Recurse  | 
          ? { $_.PsIsContainer -and $_.FullName -inotmatch 'archive' } 
```

***注意：与*** *[@CB](https://stackoverflow.com/a/15295114/615422)**相同的答案。*

## 在 POSH 3.0+

```
Get-ChildItem -Path $folder -Directory -Recurse  | 
          ? { $_.FullName -inotmatch 'archive' } 
```

***注意：*** *[来自@CB](https://stackoverflow.com/a/15295114/615422)**的更新答案。*

### 多重排除

这专门针对目录，同时排除带有参数的叶子，以及带有（不区分大小写的）比较`Exclude`的父级：`ilike`

```
#Requires -Version 3.0
[string[]]$Paths = @('C:\Temp', 'D:\Temp')
[string[]]$Excludes = @('*archive*', '*Archive*', '*ARCHIVE*', '*archival*')

$files = Get-ChildItem $Paths -Directory -Recurse -Exclude $Excludes | %{ 
    $allowed = $true
    foreach ($exclude in $Excludes) { 
        if ((Split-Path $_.FullName -Parent) -ilike $exclude) { 
            $allowed = $false
            break
        }
    }
    if ($allowed) {
        $_
    }
} 
```

**注意：**如果您希望`$Excludes`区分大小写，有两个步骤：

1.  从 中删除`Exclude`参数`Get-ChildItem`。
2.  `if`将第一个条件 更改为：
    *   `if ($_.FullName -clike $exclude) {`

**注意：**此代码具有我永远不会在生产中实现的冗余。您应该稍微简化一下以适应您的确切需求。它很好地作为一个详细的例子。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-03-08T13:33:01.983

排除模式*应该*不区分大小写，因此您不必为排除指定每个案例。

也就是说，`-Exclude`参数接受一个字符串数组，所以只要你`$archive`这样定义，你就应该被设置。

`$archive = ("*archive*","*Archive*","*ARCHIVE*");`

您还应该从中删除尾随星号`$folder`- 因为您指定`-recurse`，您应该只需要提供顶级文件夹。

`$folder = "T:\Drawings\Design\"`

完全修改的脚本。这也改变了您检测是否找到目录的方式，并跳过了，`Foreach-Object`因为您可以直接提取属性并将其全部转储到文件中。

```
$folder = "T:\Drawings\Design\";
$raw_txt = "T:\Design Projects\Design_Admin\PowerShell\raw.txt";
$search_pro = "T:\Design Projects\Design_Admin\PowerShell\search.pro";
$archive = ("*archive*","*Archive*","*ARCHIVE*");

Get-ChildItem -Path $folder -Exclude $archive -Recurse  | where {$_.PSIsContainer}  | select-Object -expandproperty FullName |out-file $search_pro 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-10-17T17:46:59.393

我知道这已经很老了 - 但是在寻找一个简单的解决方案时，我偶然发现了这个线程......如果我的问题是正确的，那么您正在寻找一种使用 Get-ChildItem 列出多个目录的方法。使用 powershell 5.0 似乎有一种更简单的方法 - 示例

```
Get-ChildItem -Path D:\ -Directory -Name -Exclude tmp,music
   chaos
   docs
   downloads
   games
   pics
   videos 
```

如果没有 -Exclude 子句，tmp 和 music 仍会在该列表中。如果您不使用 -Name，则 -Exclude 子句将不起作用，因为 Get-ChildItem 的详细输出。希望这可以帮助一些正在寻找一种简单方法来列出所有目录名称而不列出某些目录名称的人。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-08-08T19:20:37.950

您可以像这样排除正则表达式“或”符号，假设您想要的文件与您要排除的文件夹的名称不同。

```
$exclude = 'dir1|dir2|dir3'
ls -r | where { $_.fullname -notmatch $exclude }

ls -r -dir | where fullname -notmatch 'dir1|dir2|dir3' 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-11-02T22:30:07.813

VertigoRay 在他的回答中解释说 -Exclude 仅在路径的叶级别起作用（对于文件，路径被剥离的文件名；对于子目录，路径被剥离的目录名）。所以看起来 -Exclude 不能用于指定目录（例如“bin”）并排除该目录中的所有文件和子目录。

这是一个排除一个或多个目录的文件和子目录的函数（我知道这不是直接回答这个问题，但我认为它可能有助于绕过 -Exclude 的限制）：

```
$rootFolderPath = 'C:\Temp\Test'
$excludeDirectories = ("bin", "obj");

function Exclude-Directories
{
    process
    {
        $allowThrough = $true
        foreach ($directoryToExclude in $excludeDirectories)
        {
            $directoryText = "*\" + $directoryToExclude
            $childText = "*\" + $directoryToExclude + "\*"
            if (($_.FullName -Like $directoryText -And $_.PsIsContainer) `
                -Or $_.FullName -Like $childText)
            {
                $allowThrough = $false
                break
            }
        }
        if ($allowThrough)
        {
            return $_
        }
    }
}

Clear-Host

Get-ChildItem $rootFolderPath -Recurse `
    | Exclude-Directories 
```

对于目录树：

```
C:\Temp\Test\
|
├╴SomeFolder\
|  |
|  └╴bin (file without extension)
|
└╴MyApplication\
  |
  ├╴BinFile.txt
  ├╴FileA.txt
  ├╴FileB.txt
  |
  └╴bin\
    |
    └╴Debug\
      |
      └╴SomeFile.txt 
```

结果是：

```
C:\Temp\Test\
|
├╴SomeFolder\
|  |
|  └╴bin (file without extension)
|
└╴MyApplication\
  |
  ├╴BinFile.txt
  ├╴FileA.txt
  └╴FileB.txt 
```

它排除 bin\ 子文件夹及其所有内容，但不排除文件 Bin.txt 或 bin（名为“bin”的文件，没有扩展名）。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-09-02T20:41:46.647

对我来说最简单的简短形式是这样的：

```
#find web forms in my project except in compilation directories
(gci -recurse -path *.aspx,*.ascx).fullname -inotmatch '\\obj\\|\\bin\\' 
```

如果您需要更复杂的逻辑，请使用过滤器：

```
 filter Filter-DirectoryBySomeLogic{

      param(
      [Parameter(Mandatory=$true,ValueFromPipeline=$true)]
      $fsObject,
      [switch]$exclude
      )

      if($fsObject -is [System.IO.DirectoryInfo])
      {
          $additional_logic = $true ### replace additional logic here

          if($additional_logic){
              if(!$exclude){ return $fsObject }
          }
          elseif($exclude){ return $fsObject }
      }

  }

  gci -Directory -Recurse | Filter-DirectoryBySomeLogic | .... 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-10-28T18:58:15.113

基于对@Guillem 答案的@NN_ 评论，我想出了以下代码。这允许您排除文件夹和文件：

```
Get-ChildItem -Exclude 'folder-to-exclude','second-folder-exclude' |
foreach {
    Get-ChildItem -Path $_ -Exclude 'files-to-exclude','*.zip','*.mdmp','*.out*','*.log' -Recurse |
    Select-String -Pattern 'string-to-look-for' -List
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-12-03T23:57:34.757

您也可以在单个语句中执行此操作：

```
$j = "Somepath"
$files = Get-ChildItem -Path $j -Include '*.xlsx','*.zip' -Recurse -ErrorAction SilentlyContinue –File | ? {$_.Directory -notlike "$j\donotwantfoldername"} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2022-01-11T15:14:03.360

我是这样做的：

```
Get-ChildItem -Recurse -Name | ? {$_ -notmatch 'node_modules' } 
```

这会递归地列出每个文件的完整路径，这些文件的路径中不包含 node_modules。您显然应该使用要过滤的任何字符串更改 node_modules

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-10-15T19:28:39.080

这是使用远程服务器的另一种方法。这里的任务是获取文件夹列表，但不包括远程服务器 C: 驱动器上的一些众所周知的文件夹。最后一个变量 $AllFolders 包含结果。

```
$Server          = "<ServerName>"
$TopFolder       = "\\$Server\C$"    
$Exclude         = @("*Inetpub*")
$Exclude        += "*Program Files*"
$Exclude        += "*Program Files (x86)*"
$Exclude        += "*Windows*"

$ServerFolders   = Get-ChildItem -Path $TopFolder -Exclude $Exclude | where {$_.PSIsContainer} 
ForEach ($ServerFolder in $ServerFolders)
{
 $CurrentFolders = Get-ChildItem -path $ServerFolder -recurse | Where-Object { $_.PSIsContainer } 
 $AllFolders     = $AllFolders + $CurrentFolders
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-04-11T17:55:35.883

我想要一个不涉及循环遍历每个项目并执行`if`s 的解决方案。这是一个解决方案，它只是一个简单的递归函数`Get-ChildItem`。我们只是循环和递归目录。

```
 function Get-RecurseItem {
    [Cmdletbinding()]
    param (
        [Parameter(ValueFromPipeline=$true)][string]$Path,
        [string[]]$Exclude = @(),
        [string]$Include = '*'
    )
    Get-ChildItem -Path (Join-Path $Path '*') -Exclude $Exclude -Directory | ForEach-Object {
        @(Get-ChildItem -Path (Join-Path $_ '*') -Include $Include -Exclude $Exclude -File) + ``
        @(Get-RecurseItem -Path $_ -Include $Include -Exclude $Exclude)
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-07T23:58:19.190

我认为最简单的形式。对全名使用 -NotMatch。是的，它需要最新版本的 PowerShell，因为我使用 -Directory。

```
$folder = "T:\Drawings\Design\*"
$search_pro = "T:\Design Projects\Design_Admin\PowerShell\search.pro"
$archive = 'archive'

Get-ChildItem -Path $folder -Directory | Where-Object Fullname -NotMatch $archive | Select-Object Fullname | Out-File $search_pro 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-01-15T02:49:08.127

我需要排除特定路径，而不仅仅是树中任何位置的同名目录，所以我建立在[Jason Brower 的答案](https://stackoverflow.com/a/59558095/3869234)上以匹配目录路径而不是它们的名称。

像`Get-Childitem filespec -Recurse | Where-Object {$_ -excludecondition}`这样的解决方案确实有效，但他们在解雇之前不必要地查看排除的文件夹，这可能会变得昂贵。（使用管道：“左过滤，右处理”）

```
$strSearchPath = 'D:\Project'
# Files to search for
$arFilePatterns = @(
    '*.ps?',
    '*.cmd'
)

# Directories to skip
# Example: you got 'Archive', 'Archive.old', 'Archive.bak' and want to include only 'Archive' in the search

# (think) exact matches
$arSkipDirs = @(
    'D:\Project\Archive.old',
    'D:\Project\Archive.bak'
)
# (think) wildcard to the right
<#
$arSkipDirs = @(
    'D:\Project\Archive.'
)
#>

Function ListDirsSkipSome ($strPath, $strExcludeRegEx) {
    Get-ChildItem -Path $strPath -Directory | 
    ForEach-Object {
        if ($_.FullName -inotmatch $strExcludeRegEx) {
            # recurse down the tree
            ListDirsSkipSome $_.FullName $strExcludeRegEx
            return $_.FullName
        }
    }
}

#Build a regex using array of excludes
# exact matches
$strRegEx = '^{0}$' -f (($arSkipDirs | ForEach-Object { [regex]::Escape($_) }) -join ('$|^'))
# wildcards to the right
#$strRegEx = '^{0}' -f (($arSkipDirs | ForEach-Object { [regex]::Escape($_) }) -join ('|^'))

# include root of search path
$arSearchDirs = @($strSearchPath)
# add list of directories excluding some
$arSearchDirs += ListDirsSkipSome $strSearchPath $strRegEx

# save current directory
$strPWD = (Get-Location).Path

# find files in listed dirs
# set type in case there is only 1 result
[array]$arSearchResult = $arSearchDirs |
ForEach-Object {
    # dive into each directory
    Set-Location -Path $_
    # list files matching patterns
    (Get-ChildItem -File -Path $arFilePatterns).FullName
}

# return to previous directory
Set-Location -Path $strPWD

$arSearchResult 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-01-02T03:51:01.397

```
#For brevity, I didn't define a function.

#Place the directories you want to exclude in this array.
#Case insensitive and exact match. So 'archive' and
#'ArcHive' will match but 'BuildArchive' will not.
$noDirs = @('archive')

#Build a regex using array of excludes
$excRgx = '^{0}$' -f ($noDirs -join ('$|^'))

#Rather than use the gci -Recurse option, use a more
#performant approach by not processing the match(s) as
#soon as they are located.
$cmd = {
  Param([string]$Path)
  Get-ChildItem $Path -Directory |
  ForEach-Object {
    if ($_.Name -inotmatch $excRgx) {
      #Recurse back into the scriptblock
      Invoke-Command $cmd -ArgumentList $_.FullName;
      #If you want all directory info change to return $_
      return $_.FullName
    }
  }
}

#In this example, start with the current directory
$searchPath = .
#Start the Recursion
Invoke-Command $cmd -ArgumentList $searchPath 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-04-01T14:14:33.317

```
$CurrentPath = (Get-Location -PSProvider FileSystem).ProviderPath # Or your favorite path
$IncludeNames = "okFolder1", "okFolder2"  # Items names to search
$ExcludeNames = "koFolder1", "koFolder2"  # Items names not to search
$depth = 3                                # Max level of depth to search

$FoldersToRemove = Get-ChildItem .\ -include $IncludeNames -Recurse -Depth $depth 
-Attributes D                             # If you want only directories, change it as you desire
| ? { $_.fullname -inotmatch ($ExcludeNames -join '|') }  #case insensitive or use -cnotmatch for case sensitive comparison
| foreach {$_.fullname}                   # If you want to project only full path information of matches 
```

* * *

## 回答 #18

> 赞同：-3
> 
> 时间：2017-01-13T10:35:36.160

可能在您的情况下，您可以通过以下方式达到此目的：

```
 mv excluded_dir ..\
    ls -R 
    mv ..\excluded_dir . 
```

# java - Jenkins 为 java 系统属性加上引号

> ID：15294837
> 
> 赞同：3
> 
> 时间：2013-03-08T13:15:22.673
> 
> 标签：java, testing, jenkins

我正在使用 Jenkins 作为后期构建步骤执行 shell 脚本。问题是詹金斯在我传入的系统属性周围加上引号。因此应用程序看不到任何系统属性已被传入。

如果詹金斯将它们用双引号括起来会很好，但单引号不起作用。

原始外壳脚本：

```
java -jar -Dnetwork.configuration=Transport.uri=amqp://localhost:5672/stable,transportServer.database.driver=com.mysql.jdbc.Driver,brokerServer.database.jpa=MYSQL "${WORKSPACE}/ffiq-integration/target/PackRunner.jar" -pack "${WORKSPACE}/ffiq-integration/src/main/resources" -name JenkinsIntegrationTests 
```

詹金斯执行：

```
java -jar '-Dnetwork.configuration=Transport.uri=amqp://localhost:5672/stable,transportServer.database.driver=com.mysql.jdbc.Driver,brokerServer.database.jpa=MYSQL' "${WORKSPACE}/ffiq-integration/target/PackRunner.jar" -pack "${WORKSPACE}/ffiq-integration/src/main/resources" -name JenkinsIntegrationTests 
```

有没有办法阻止詹金斯这样做？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T13:27:21.190

单引号应该不是问题，该`java`过程仍会将整体`-Dname=val`视为一个选项。更可能的问题是您需要交换参数的顺序，即它应该是

```
java -D.... -jar ".../PackRunner.jar" <arguments-to-PackRunner-main-class> 
```

`-jar`（在和 JAR 文件名之间没有其他干预参数）。

# ffmpeg - 使用ffmpeg，试图将容器从Mpeg TS更改为MP4，fps变成了Mpeg TS的两倍

> ID：15294844
> 
> 赞同：0
> 
> 时间：2013-03-08T13:15:36.620
> 
> 标签：ffmpeg, containers, mp4, mpeg2-ts

我从采集板上得到了一个 Mpeg TS 文件来制作一个演示视频剪辑。

这是来自ffmpeg的文件信息；

```
Stream #0:0[0x51]: Video: h264 (High) ([27][0][0][0] / 0x001B), yuv420p, 1920x1080 [SAR 1:1 DAR 16:9], 29.97 fps, 59.94 tbr, 90k tbn, 59.94 tbc
Stream #0:1[0x61]: Audio: mp2 ([3][0][0][0] / 0x0003), 48000 Hz, stereo, s16p, 224 kb/s 
```

但是，我无法在 FCP X 中对其进行编辑，因此我尝试使用以下命令使用 ffmpeg 将其容器 TS 更改为 MP4。

```
ffmpeg -i input.ts -vcodec copy -acodec copy output.mp4 
```

完成后，output.mp4 的 fps 变为 59.94 fps，信息如下；

```
Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p, 1920x1080 [SAR 1:1 DAR 16:9], 1750 kb/s, 59.94 fps, 59.94 tbr, 90k tbn, 59.94 tbc
Stream #0:1(und): Audio: mp2 (mp4a / 0x6134706D), 48000 Hz, stereo, s16p, 224 kb/s 
```

fps不一样。

有没有办法通过复制选项来更改容器来保持与 TS 相同的 fps？

我想知道是否只是重新编码是解决方案。

/////

完整的日志；

```
$ ffmpeg -i input.ts -vcodec copy -acodec copy output.mp4
ffmpeg version 1.1.2 Copyright (c) 2000-2013 the FFmpeg developers
  built on Feb  6 2013 10:45:57 with Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)
  configuration: --prefix=/opt/local --enable-swscale --enable-avfilter --enable-libmp3lame --enable-libvorbis --enable-libopus --enable-libtheora --enable-libschroedinger --enable-libopenjpeg --enable-libmodplug --enable-libvpx --enable-libspeex --enable-libfreetype --mandir=/opt/local/share/man --enable-shared --enable-pthreads --cc=/usr/bin/clang --arch=x86_64 --enable-yasm --enable-gpl --enable-postproc --enable-libx264 --enable-libxvid
  libavutil      52\. 13.100 / 52\. 13.100
  libavcodec     54\. 86.100 / 54\. 86.100
  libavformat    54\. 59.106 / 54\. 59.106
  libavdevice    54\.  3.102 / 54\.  3.102
  libavfilter     3\. 32.100 /  3\. 32.100
  libswscale      2\.  1.103 /  2\.  1.103
  libswresample   0\. 17.102 /  0\. 17.102
  libpostproc    52\.  2.100 / 52\.  2.100
[mpegts @ 0x7f8a2b033000] max_analyze_duration 5000000 reached at 5003333
Input #0, mpegts, from 'input.ts':
  Duration: 00:05:01.27, start: 0.224400, bitrate: 2727 kb/s
  Program 1 
    Stream #0:0[0x51]: Video: h264 (High) ([27][0][0][0] / 0x001B), yuv420p, 1920x1080 [SAR 1:1 DAR 16:9], 29.97 fps, 59.94 tbr, 90k tbn, 59.94 tbc
    Stream #0:1[0x61]: Audio: mp2 ([3][0][0][0] / 0x0003), 48000 Hz, stereo, s16p, 224 kb/s
Output #0, mp4, to 'output.mp4':
  Metadata:
    encoder         : Lavf54.59.106
    Stream #0:0: Video: h264 ([33][0][0][0] / 0x0021), yuv420p, 1920x1080 [SAR 1:1 DAR 16:9], q=2-31, 29.97 fps, 90k tbn, 90k tbc
    Stream #0:1: Audio: mp2 (i[0][0][0] / 0x0069), 48000 Hz, stereo, 224 kb/s
Stream mapping:
  Stream #0:0 -> #0:0 (copy)
  Stream #0:1 -> #0:1 (copy)
Press [q] to stop, [?] for help
[mp4 @ 0x7f8a2b058200] pts has no value
frame=13472 fps=0.0 q=-1.0 size=   54536kB time=00:03:44.80 bitrate=1987.3kbits/frame=18056 fps=0.0 q=-1.0 Lsize=   73024kB time=00:05:01.28 bitrate=1985.5kbits/s    
video:64370kB audio:8212kB subtitle:0 global headers:0kB muxing overhead 0.608498% 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-09T13:10:00.690

您将不得不使用[ffmbc](https://github.com/bcoudurier/FFmbc)将视频重新包装为 MP4。ffmpeg 不会像预期的那样复用隔行扫描的 H264 流——它将每个字段放入一个不同的访问单元中。请参阅此[问题](https://video.stackexchange.com/q/12156/1871)和我在视频制作中的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T05:49:22.847

您的输入视频是 30 fps 隔行扫描视频，等于每秒 60 个场 ffmpeg 生成了 60 fps 逐行视频，将每个场更改为单独的帧

一些去隔行标志可以保持帧速率

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-08T16:42:52.033

您可以尝试为 fps 和带宽显式切换值...

-r 29.97

-vcodec libx264

-b:v 500k

-BT 220k

然后看看它或类似的东西是否解决了帧/速率加倍问题。

# c# - Jqgrid 编辑获取 C# asp.net 服务器上的 Json 数据并将其 json 解码为数组

> ID：15294847
> 
> 赞同：1
> 
> 时间：2013-03-08T13:15:51.237
> 
> 标签：c#, javascript, jquery, asp.net, json

经过太多尝试我放弃并寻求帮助......我使用我在网络上找到的代码在客户端上执行编辑并将编辑原始发送到 asp.net 服务器。但我似乎无法在服务器上调用或从网格中获取数组（虽然我在使用调试器时看到了 Json 上的值）。所以我有两个问题。1\. 我在“GridUpdateData”上放置了一个断点，但从未在客户端看到异常，也从未到达服务器。为什么 GridUpdateData 调用没有到达服务器？我怎样才能解决这个问题？2\. 我需要在服务器上读取的变量是什么？/它是如何发送的？

谢谢，约翰。

客户端代码：

$(文档).ready(函数 () {

```
 var updateDialog = {
            url: "Default.aspx/GridUpdateData",
            closeAfterEdit: true,
            afterclickPgButtons: function (whichbutton, formid, rowid) {
                $("#x2").select();
            }
            , modal: true

            , onclickSubmit: function (params)
            {
                var ajaxData = {};
                var gridId = $("#gridId");
                var selectedRow = gridId.getGridParam("selrow");
                rowData = gridId.getRowData(selectedRow);
                ajaxData = { x2: x2 };
                return ajaxData;
            }

            , width: "400"
        };
        $.jgrid.nav.addtext = "Add";
        $.jgrid.nav.edittext = "Edit";
        $.jgrid.nav.deltext = "Delete";
        $.jgrid.edit.addCaption = "Add Contact";
        $.jgrid.edit.editCaption = "Edit Contact";
        $.jgrid.del.caption = "Delete Contact";
        $.jgrid.del.msg = "Delete selected Contact?";
        $("#gridId").jqGrid({

            datatype: 'json',
            mtype: 'POST',
            colNames: ['x1', 'x2', 'x3'],
            colModel: [
                { name: 'x1', index: 'x1', width: 40, editRow: true, sorttype: "string", align: 'left', editable: true, editrules: { required: true } },
                { name: 'x2', index: 'x2', width: 300, editRow: true, sorttype: "string", align: 'left', editable: true, edittype: 'text', editrules: { required: true } },
                { name: 'x3', index: 'x3', width: 200, editRow: true, sorttype: "string", align: 'left', editable: true, edittype: 'text', editrules: { required: true } }
                  ],
            pager: $('#gridPager'),

            sortname: 'x2',
            sortorder: "desc",
            altRows: true,
            viewrecords: true,
            imgpath: '/Content/Themes/Redmond/Images',
            caption: 'Equipment List',
            autowidth: true,
            ondblClickRow: function (rowid, iRow, iCol, e) {
                $("#gridId").editGridRow(rowid, prmGridDialog);
            }
        }).navGrid('#gridPager',
            {
                 edit: true, add: true, del: true, search: false, refresh: false
            },
            updateDialog,
            updateDialog,
            updateDialog
        );
        $("#gridId").jqGrid('clearGridData'); 

    }); 
```

（我将网格字段更改为 X1-x3。）服务器代码：

公共静态无效GridUpdateData（）{

}

# jquery - 收集一组 post 请求返回的数据，然后 post 另一个单个请求

> ID：15294850
> 
> 赞同：0
> 
> 时间：2013-03-08T13:16:01.590
> 
> 标签：jquery, database, post, asynchronous, each

我在 jQuery 中有一个哈希。它被称为字典。

为了填充该哈希，我调用了 createDict() 函数，该函数将返回如下所示的内容，

{"12|345" => " [http://www.one.com](http://www.one.com) ", "67|890" => " [http://www.two.com](http://www.two.com) "}

```
var dict = createDict(); 
```

现在对于散列的每个元素，我执行“grabData”方法，它只是一个发布请求，

```
 $.each(dict, function( key, value ) { 

      data = key.split("|")[0];    

      var a = "";        

      //Calling the function that is a post request.
      grabData(data,"/url",function(returned) {   

          alert(returned); //=> Positive              

          a = returned;

      });

      alert(returned); // => negative

      alert(a); // => negative

    }); 
```

//定义grabData

```
function grabData(input,url,callback){

    $.post(url,input,function(data){                    

          $("div#answer").html(data);

          callback(data); 
     });

} 
```

**问题：**

1.  对于 dict 哈希中的每个元素，我执行一个组发布请求并获取返回值并更新“div#answer”。

2.  我想在另一个数组或散列中收集返回的值，并运行另一个单一的发布请求，其输入将是这个数组或散列。

    **笔记：**

> 第二个单独的 post 请求将更新数据库，所以我不希望在第一组 post 请求期间发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:36:05.070

首先找到您要触发的请求总数（即 No of elements in `dict`）。这样您就可以设置一个计数器并为每个请求继续增加，并且在最终请求时，您可以收集数据并发出单个发布请求。

```
var total = dict.length; 
```

设置计数器

```
var counter = 0;
var returnedData = []; 
```

然后运行你的每个循环

```
$.each(dict, function( key, value ) { 
//your loop settings

...
   //Calling the function that is a post request.
      grabData(data,"/url",function(returned) {   

          alert(returned); //=> Positive              

          a = returned;
      returnedData .push(returned);
      counter++;
      if(counter == total ){
        //Collect the returned value, which will be in `returnedData` array.
        //make post request with collected data
      }
 });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:36:17.553

您需要将运行 POST 的代码放在回调函数中，并检查每次回调函数运行时是否拥有所需的所有数据。就像是：

```
function grabData(input,url,callback){
    var allDataSoFar = [];
    $.post(url,input,function(data){                    
        $("div#answer").html(data);
        allDataSoFar.push(data);
        if (haveGotAllDataYet(allDataSoFar){
             $.post(...)
        }
    });
} 
```

# excel - 每 6 列 excel 后的新行

> ID：15294854
> 
> 赞同：1
> 
> 时间：2013-03-08T13:16:15.243
> 
> 标签：excel

我有连续的数据。让我们从 A1 到 XFD1，我想每 6 列拆分一次数据。这意味着 A1-F1 原样，从 G1-L1 转移到 A2-F2，依此类推。

例子：

```
A B C D E F A B C D E F A B C D E F A B C D E F A B C D E F A B C D E F 
```

我需要这样的：

```
A B C D E F 
A B C D E F
A B C D E F
A B C D E F 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:10:35.627

此 VBA 例程将起作用。

```
Sub SplitData()
    Dim data As Range, arr() As Variant
    Dim row As Integer, i As Integer, j As Integer

    Set data = Range(Range("A1"), Range("A1").End(xlToRight))
    arr = data
    data.ClearContents

    row = 1

    On Error Resume Next
    For i = 1 To data.Columns.Count Step 6
        For j = 0 To 5
            Cells(row, j + 1) = arr(1, i + j)
        Next j
        row = row + 1
    Next i
End Sub 
```

# php - SQL查询没有正确排序

> ID：15294859
> 
> 赞同：-1
> 
> 时间：2013-03-08T13:16:34.403
> 
> 标签：php, mysql, sql

我有一个测试，人们提交它，然后他们用来完成测试的秒数也被提交。

这是查询：

```
SELECT *
FROM namethatchampion_stats
GROUP BY user
ORDER BY seconds ASC
LIMIT 100 
```

这是表结构：

```
id | user | seconds | time 
```

我希望我的用户能够多次提交测试，但这仅列出了他第一次提交。因此，如果用户在他发布的秒数中获得更好的时间，它将不会使用数据库中的该行，它只会使用用户发布的第一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:36:50.287

我建议尽可能避免 MySQL 提供的隐式分组，我的意思是您的查询允许您选择`ID`,`Time`和`seconds`，即使它们不包含在聚合函数或 group by 子句中。

在本声明中：

```
SELECT  *
FROM    namethatchampion_stats
GROUP BY User
ORDER BY Seconds 
```

您是说为每个用户给我一行（随机），然后按秒对这些随机行进行排序，因此即使您有排序依据，这也不会影响分组：

MySQL[文档](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)状态

*服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。此外，从每个组中选择值不会受到添加 ORDER BY 子句的影响。*

因此，除非您从聚合中排除的列和分组依据在功能上依赖于分组依据中包含的列（例如主键），否则请使用显式分组。在您的场景中，从您的表中获取所有行，您可以使用：

```
SELECT  stat.ID,
        stat.User,
        stat.Seconds,
        stat.Time
FROM    NamethatChampion_stats Stat
        INNER JOIN
        (   SELECT  User, MIN(Seconds) AS Seconds
            FROM    NamethatChampion_stats
            GROUP BY User
        ) MaxStat
            ON MaxStat.User = stat.User
            AND MaxStat.Seconds = stat.Seconds
ORDER BY Seconds ASC
LIMIT 100 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!2/caf67/6)**

上述方法的缺点是，如果用户有 2 条最快时间相同的记录，则两条记录都会被返回。它需要进一步聚合以删除这些重复项（您可能需要限制第一个或最后一个具有相同分数的测试）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:22:16.910

我假设你想要每个学生的最好成绩 - 并且“最好”你 min `MIN(seconds)`。如果这是您想要的，那么方法如下：

```
SELECT user, MIN(seconds) AS best_score
FROM namethatchampion_stats
GROUP BY user
ORDER BY best_score ASC
    LIMIT 100 ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:19:26.753

您的`ORDER BY`声明应该使用`time`包含他们的测试提交日期的列，而不是`seconds`. （假设它包含一个完整的日期。如果它只是时间，那么它就会消失）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T13:21:59.860

这将为每个用户提供最快的时间：

```
SELECT user, MIN(seconds) 
FROM namethatchampion_stats
GROUP BY user 
LIMIT 100; 
```

这是你想要的吗？

# jsf - OmniFaces ExtensionlessURLS，Mojarra 和 MyFaces 之间的不同行为

> ID：15294862
> 
> 赞同：3
> 
> 时间：2013-03-08T13:16:59.770
> 
> 标签：jsf, spring-security, myfaces, mojarra, omnifaces

在发现 Mojarra 存在的一些潜在性能问题后，我最近将我的应用程序切换为在 Mojarra 2.1.7 的 MyFaces 2.1.10 实现上运行。

我一直在使用允许漂亮的无扩展 URL 的 OmniFaces SEO 功能。这通过使用 servlet 过滤器进行操作，并通过向 WEB-INF 添加上下文参数`web.xml`以及`faces-views`向 WEB-INF 添加目录以反映 Web 应用程序的 xhtml 文档布局来自动启用。

然而，我有点担心与 Spring 的兼容性问题，因为我正在使用 Spring Container 和他们的自定义 EL 解析器，用 Spring 依赖注入替换 JSF 依赖注入，使每个托管 bean 也是一个 Spring bean。更令人担忧的是，我正在实现 Spring Security，它也通过使用 servlet 过滤器来拦截和验证传入请求。我担心的是，如果它们碰巧以某种顺序被调用，它们可能无法正常工作。

[嗯，Mojarra 的 ExtensionlessURLS 功能与文档](http://showcase.omnifaces.org/facesviews/ExtensionlessURLs)中描述的有点不同

我注意到要让它在 Mojarra 中工作，我只需将我的 xhtml 文件保留在其原始位置，但是我需要在目录中放置一个具有相同名称和相对路径的空文件`faces-views`。过滤器似乎可以识别无扩展或 XHTML 请求并正确显示页面

然而，当我切换到 MyFaces 时，这种行为发生了变化，现在目录中的空文件`faces-views`导致在页面请求上引发 Premature EOF 异常。我注意到，为了能够同时处理 XHTML 和无扩展请求，我需要在两个地方保留同一页面的重复副本。

我试图通过将文件放入 do a 来解决这个问题，`faces-views`它找到了源，但是当我这样做时页面没有正确加载。

我的问题是，为什么我看到 Mojarra 和 MyFaces 与 ExtensionlessURLs 之间的行为不同？Spring Security 会不会是这个原因呢？我怎样才能解决这个问题，我不需要在我的项目中保留两个相同源代码的副本（显然我通过接受这个来邀请愚蠢的错误和错过的功能）？

# python - python的csv阅读器可以留下引号吗？

> ID：15294863
> 
> 赞同：8
> 
> 时间：2013-03-08T13:17:01.967
> 
> 标签：python, csv, quotes

我想使用 python CSV 阅读器，但我想保留引号。这就是我想要的：

```
>>> s = '"simple|split"|test'
>>> reader = csv.reader([s], delimiter='|', skipinitialspace=True)
>>> reader.next()
['"simple|split"', 'test'] 
```

但我实际上得到：

```
['simple|split', 'test'] 
```

在我的情况下，我希望引用的字符串仍然被引用。

我知道 CSV 阅读器正在按预期工作，并且我的用例是对它的滥用，但是有什么方法可以让我按照自己的意愿弯曲它吗？还是我必须编写自己的字符串解析器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T13:58:41.060

您将不得不编写自己的解析器，因为支持解析和引用的模块部分位于 C 方面，特别是`parse_process_char`位于`Modules/_csv.c`：

```
 else if (c == dialect->quotechar &&
             dialect->quoting != QUOTE_NONE) {
        if (dialect->doublequote) {
            /* doublequote; " represented by "" */
            self->state = QUOTE_IN_QUOTED_FIELD;
        }
        else {
            /* end of quote part of field */
            self->state = IN_FIELD;
        }
    }
    else {
        /* normal character - save in field */
        if (parse_add_char(self, c) < 0)
            return -1;
    } 
```

“字段的引用部分结束”部分是你的双引号。另一方面，您可能能够取消该`else`条件并重建 python 源代码。然而，老实说，这并不是所有可以维护的。

**编辑**：对不起，我的意思是从最后一个添加位，`else`所以`self->state = IN_FIELD`它添加了引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T16:44:58.467

我不明白你是否清楚地了解你想要获得的东西。
你说*“我知道（...）我的用例是一种滥用”*。
但滥用意味着存在使用的可能性。
但是，在您的情况下，没有可能的用途，您“描述”的内容是不可能的，因为传递给 CSV 解析器的内容必须是有效的 CSV 格式，而您的不是。

在 CSV 有效字符串中，大多数字符是信息，一些字符是解释字符串以提取信息所必需的元信息。
您描述的是您希望字符`"`应该完全属于信息类别和元信息类别。就像有人想用左手抓住他/她的左手......

您的字符串出现此问题，因为它不是来自读取 CSV 文件的字符串。这是一个按原样编写的字符串。
从 CSV 文件的读取中获取这样的字符串是不可能的，因为它不可能像这样写在 CSV 文件中。
如果写入 CSV 文件，`'"simple|split"|test'`可以写入

*   `"""simple|split"""|test`
    设置`doublequote`为 True，默认

*   或`#"simple#|split#"|test`
    与`doublequote = False, escapechar = '#'`

.

如果你想像你描述的那样提取信息，你不必创建解析器，你只需要使用一个已经存在的工具：

```
import re

reg = re.compile('".*?"|[^|]+')

print reg.findall('yoo|"simple|split"|test|end"pos|hu') 
```

结果

```
['yoo', '"simple|split"', 'test', 'end"pos', 'hu'] 
```

# c# - 函数中的参数化视图或通用返回值

> ID：15294873
> 
> 赞同：0
> 
> 时间：2013-03-08T13:17:40.667
> 
> 标签：c#, postgresql, stored-procedures, views

我正在寻找的是我所说的“参数化视图”。在互联网上四处查看时，我了解到 PostgreSQL 不支持，我应该使用一个函数来代替。

所以我创建了一个函数：

```
CREATE OR REPLACE FUNCTION public.student_get_byschool(
    _schoolid integer
) RETURNS SETOF student AS
$body$
    SELECT * FROM student WHERE schoolid=_schoolid;
$body$
LANGUAGE 'sql'; 
```

但是，如果我想通过加入其他记录来选择更多的那个学生，我的`RETURNS`子句就不再正确了。我可以通过两种方式解决这个问题：

1.  使用`RETURNS SETOF RECORD`，但这似乎在我的 C#.NET 应用程序中存在一些问题，因为它没有给我任何列定义。
2.  创建一个新类型来保存我想要返回的所有数据，但这会引入冗余，这是我在数据库设计中非常希望避免的。

我现在的问题是，这些是唯一的选择，还是更有可能。请注意，我刚刚启动了 PostgreSQL 和 C#.NET。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:08:55.467

根据[文档，`CREATE FUNCTION`](http://www.postgresql.org/docs/current/static/sql-createfunction.html)您可以使用`OUT`参数或`RETURNS TABLE`为此。`RETURNS TABLE`往往更具可读性。

[这篇 Postgres Online 文章](http://www.postgresonline.com/journal/archives/201-Using-RETURNS-TABLE-vs.-OUT-parameters.html)可能会很有趣，尽管我还没有详细阅读它来检查它并确保它是最新的和正确的。

# microsoft-dynamics - Dynamics NAV 2009 经典客户端扩展

> ID：15294874
> 
> 赞同：1
> 
> 时间：2013-03-08T13:17:51.743
> 
> 标签：microsoft-dynamics, dynamics-nav, dynamics-nav-2009

我很好奇是否可以扩展 Microsoft Dynamics Nav Classic Client 并编写一个附加组件，例如增强对象设计器。

例如，在“对象设计器”中，不能同时对多个对象进行批量更新，例如更改最后修改的日期和时间。

为 Dynamics NAV 编写一个可以做到这一点的小扩展会很好。非常感谢任何可以帮助我入门的链接或信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T23:55:24.517

您可以编写一个可以[批量](http://msdn.microsoft.com/en-us/library/dd301168.aspx)更新对象表和更新修改日期字段的代码单元。然后，您可以编写自己的[页面](http://msdn.microsoft.com/en-us/library/dd354921.aspx)（如果您仅使用 C/SIDE，则可以编写表单）并使用按钮调用代码单元。例如，您可以在该页面上设置过滤器以确定更新哪些对象。

如果要导入和导出对象，则要困难一些。在 NAV 2013 中，您可以使用[C/SIDE 的命令行界面](http://blogs.msdn.com/b/nav/archive/2013/01/28/new-finsql-exe-command-line.aspx)。在早期版本中，我认为唯一的方法是使用可以[导入和导出 FOB 文件](http://blogs.msdn.com/b/nav/archive/2008/04/19/importing-and-exporting-nav-objects-with-c-front.aspx)的 CFront 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-07T11:30:15.570

是的，动态导航 2009 是可能的

1.  `objID, Name , Last Run Date`根据您的要求创建具有字段或任何其他字段的表
2.  创建一个主代码单元，您可以在其中调用您在表中输入的所有对象
3.  比创建一个 Windows 服务并在您想要运行主代码多长时间后设置一个时间间隔
4.  在您的服务器中安装此服务，它将在指定的时间间隔后自动运行
5.  要安装此服务，您必须以管理员身份运行 VS2013 或更高版本的开发人员命令提示符
6.  要安装您的服务，请到达发布 Windows 服务文件夹的目录，例如
7.  *C:\Users\Defualtuser\source\repos\WindowsService1\WindowsService1\bin\Release*
8.  并编写以下命令：`Installutil YourServiceName.exe`
9.  然后以管理员身份打开服务并启动您的服务

您的对象将自动更新。

# java - java Web应用程序中的Log4j错误

> ID：15294875
> 
> 赞同：1
> 
> 时间：2013-03-08T13:17:53.710
> 
> 标签：java, jakarta-ee, servlets

我正在尝试在我的 Java EE 项目中添加 Log4j。我已将 log4j.jar 文件添加到我的 WEB-INF/lib 文件夹中，并尝试在我的项目中的一个 Servlet 中实现 log4j。

最初，我通过使用带有基本配置的 log4j 进行了尝试（不使用 log4j.properties 文件）。

我的小服务程序

```
import org.apache.log4j.*;

public class classname extends HttpServlet {
    private static final long serialVersionUID = 1L;

    private static Logger log = Logger.getLogger(classname.class);

protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

BasicConfigurator.configure();

log.debug("************************Test Message from Log4j*****************************"); 
```

我在没有 log4j.properties 文件的情况下尝试了此操作，但出现如下错误：

```
log4j:WARN No appenders could be found for logger (org.apache.axis.i18n.ProjectResourceBundle).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

我在另一个 Java 应用程序（不是 Web）中测试了相同的内容，它适用于基本配置。

我需要在我的网络项目中添加什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:53:31.920

编写一个实现 ServletContextListener 的自定义类，如下所示。该类查找在 web.xml 中定义的名为 log4jFileName 的上下文参数。这将找到 log4j XML 配置文件。这将在其他类使用它之前配置 log4j。

```
Custom listener:

public class StartupListener implements ServletContextListener
{
    @Override
    public void contextDestroyed(ServletContextEvent arg0)
    {
        // Cleanup code goes here
    }

    @Override
    public void contextInitialized(ServletContextEvent sce)
    {
        Logger logger = null;
        ServletContext servletContext = sce.getServletContext();
        String log4jFile = servletContext.getInitParameter("log4jFileName");
        DOMConfigurator.configure(log4jFile);
        logger = LogManager.getLogger(StartupListener.class.getName());
        logger.debug("Loaded: " + log4jFile);
    }
} 
```

1.  在您的 web.xml 中定义侦听器和上下文参数，如下所示

    ```
     <context-param>
        <param-name>log4jFileName</param-name>
        <param-value>app/log4j/config/log4jConfig.xml</param-value>
    </context-param>
    <listener>
        <listener-class>
            com.yourpackage.YourListener
        </listener-class>
    </listener> 
    ```

2.  现在适当地配置您的 log4jConfig.xml 以确保您的应用程序日志记录在适当的路径下。使用像 RollingFileAppender 这样的文件追加器来处理应用程序的保留策略。

这是一个示例 log4j XML 来帮助你

```
Sample log4j XML: (Customize as necessary)

<?xml version="1.0" encoding="UTF-8"?>
<log4j:configuration xmlns:log4j = "http://jakarta.apache.org/log4j/" debug = "false">
    <appender name = "FILE" class = "org.apache.log4j.RollingFileAppender">
        <param name = "File" value = "/usr/local/path/to/application.log"/>
        <param name = "MaxFileSize" value = "5MB"/>
        <param name = "MaxBackupIndex" value = "50"/>
        <layout class = "org.apache.log4j.PatternLayout">
            <param name = "ConversionPattern" value = "[%d{dd/MM/yy hh:mm:ss:sss z}] %5p %c{2}: %m%n"/>
        </layout>
    </appender>
    <category name = "com.your.application.package">
        <priority value = "debug"/>
    </category>
    <category name = "org.apache.catalina">
        <priority value = "error"/>
    </category>
    <category name = "org.hibernate">
        <priority value = "error"/>
    </category>
    <root>
        <priority value = "info"/>
        <appender-ref ref = "FILE"/>
    </root>
</log4j:configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:19:58.563

所有这些都是警告。要避免这些警告

首先在 web.xml 中配置 log4j。我认为您在 wex.xml 的某些部分进行了配置。

如果您在顶部配置该 log4j，那么您可以避免这些警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:40:11.990

您不必在 web.xml 中声明任何内容。

因为您的项目是一个 Web 应用程序，所以配置文件应该在部署后位于 WEB-INF/classes 上。我建议您创建一个 java 资源文件夹来执行此操作。另一种方法是将配置文件放在 src/main/java.xml 中。

请注意配置名称文件。如果您使用的是 xml，则文件名为 log4j.xml，否则为 log4j.properties。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T13:29:22.650

加载 Axis 时，log4j 使用默认搜索方法来查找 log4j.properties，但没有找到。这将始终导致该警告。我希望您的类路径上的每个单独的 log4j 实现都会发生同样的情况。这取决于哪个类加载器正在处理 Axis 的加载，以确定它将在哪里查找和查找属性文件。

# c# - int.TryParse 的实际工作原理

> ID：15294878
> 
> 赞同：84
> 
> 时间：2013-03-08T13:18:09.180
> 
> 标签：c#

我一直在寻找`int.TryParse`方法实现，它实际上是如何工作的，但我还没有找到。我必须知道，关于 a `string`，它是否是一个数值，但我现在不想转换它。

所以我只`bool`需要`int.TryParse`. 所以问题是：

1.  是否有任何功能只能提供`bool`结果，

和

2.  我想知道，`int.TryParse`实际是如何工作的（是否有`try ... catch`内部或迭代 input 的字符`string`）？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-03-08T13:20:08.653

如果只需要`bool`结果，直接使用返回值，忽略`out`参数即可。

```
bool successfullyParsed = int.TryParse(str, out ignoreMe);
if (successfullyParsed){
    // ...
} 
```

**编辑**：同时您还可以查看[原始源代码](http://blogs.msdn.com/b/dotnet/archive/2014/02/24/a-new-look-for-net-reference-source.aspx)：

[`System.Int32.TryParse`](http://referencesource.microsoft.com/#mscorlib/system/int32.cs,325507e509229dbc,references)

* * *

如果我想知道某些东西是如何实际实现的，我会用[**`ILSpy`**](http://ilspy.net/)它来反编译 .NET 代码。

这是结果：

```
// int
/// <summary>Converts the string representation of a number to its 32-bit signed integer equivalent. A return value indicates whether the operation succeeded.</summary>
/// <returns>true if s was converted successfully; otherwise, false.</returns>
/// <param name="s">A string containing a number to convert. </param>
/// <param name="result">When this method returns, contains the 32-bit signed integer value equivalent to the number contained in s, if the conversion succeeded, or zero if the conversion failed. The conversion fails if the s parameter is null, is not of the correct format, or represents a number less than <see cref="F:System.Int32.MinValue"></see> or greater than <see cref="F:System.Int32.MaxValue"></see>. This parameter is passed uninitialized. </param>
/// <filterpriority>1</filterpriority>
public static bool TryParse(string s, out int result)
{
    return Number.TryParseInt32(s, NumberStyles.Integer, NumberFormatInfo.CurrentInfo, out result);
}

// System.Number
internal unsafe static bool TryParseInt32(string s, NumberStyles style, NumberFormatInfo info, out int result)
{
    byte* stackBuffer = stackalloc byte[1 * 114 / 1];
    Number.NumberBuffer numberBuffer = new Number.NumberBuffer(stackBuffer);
    result = 0;
    if (!Number.TryStringToNumber(s, style, ref numberBuffer, info, false))
    {
        return false;
    }
    if ((style & NumberStyles.AllowHexSpecifier) != NumberStyles.None)
    {
        if (!Number.HexNumberToInt32(ref numberBuffer, ref result))
        {
            return false;
        }
    }
    else
    {
        if (!Number.NumberToInt32(ref numberBuffer, ref result))
        {
            return false;
        }
    }
    return true;
} 
```

`Try-Catchs`不，我在路上看不到任何东西：

```
// System.Number
private unsafe static bool TryStringToNumber(string str, NumberStyles options, ref Number.NumberBuffer number, NumberFormatInfo numfmt, bool parseDecimal)
{
    if (str == null)
    {
        return false;
    }
    fixed (char* ptr = str)
    {
        char* ptr2 = ptr;
        if (!Number.ParseNumber(ref ptr2, options, ref number, numfmt, parseDecimal) || ((ptr2 - ptr / 2) / 2 < str.Length && !Number.TrailingZeros(str, (ptr2 - ptr / 2) / 2)))
        {
            return false;
        }
    }
    return true;
}

// System.Number
private unsafe static bool ParseNumber(ref char* str, NumberStyles options, ref Number.NumberBuffer number, NumberFormatInfo numfmt, bool parseDecimal)
{
    number.scale = 0;
    number.sign = false;
    string text = null;
    string text2 = null;
    string str2 = null;
    string str3 = null;
    bool flag = false;
    string str4;
    string str5;
    if ((options & NumberStyles.AllowCurrencySymbol) != NumberStyles.None)
    {
        text = numfmt.CurrencySymbol;
        if (numfmt.ansiCurrencySymbol != null)
        {
            text2 = numfmt.ansiCurrencySymbol;
        }
        str2 = numfmt.NumberDecimalSeparator;
        str3 = numfmt.NumberGroupSeparator;
        str4 = numfmt.CurrencyDecimalSeparator;
        str5 = numfmt.CurrencyGroupSeparator;
        flag = true;
    }
    else
    {
        str4 = numfmt.NumberDecimalSeparator;
        str5 = numfmt.NumberGroupSeparator;
    }
    int num = 0;
    char* ptr = str;
    char c = *ptr;
    while (true)
    {
        if (!Number.IsWhite(c) || (options & NumberStyles.AllowLeadingWhite) == NumberStyles.None || ((num & 1) != 0 && ((num & 1) == 0 || ((num & 32) == 0 && numfmt.numberNegativePattern != 2))))
        {
            bool flag2;
            char* ptr2;
            if ((flag2 = ((options & NumberStyles.AllowLeadingSign) != NumberStyles.None && (num & 1) == 0)) && (ptr2 = Number.MatchChars(ptr, numfmt.positiveSign)) != null)
            {
                num |= 1;
                ptr = ptr2 - (IntPtr)2 / 2;
            }
            else
            {
                if (flag2 && (ptr2 = Number.MatchChars(ptr, numfmt.negativeSign)) != null)
                {
                    num |= 1;
                    number.sign = true;
                    ptr = ptr2 - (IntPtr)2 / 2;
                }
                else
                {
                    if (c == '(' && (options & NumberStyles.AllowParentheses) != NumberStyles.None && (num & 1) == 0)
                    {
                        num |= 3;
                        number.sign = true;
                    }
                    else
                    {
                        if ((text == null || (ptr2 = Number.MatchChars(ptr, text)) == null) && (text2 == null || (ptr2 = Number.MatchChars(ptr, text2)) == null))
                        {
                            break;
                        }
                        num |= 32;
                        text = null;
                        text2 = null;
                        ptr = ptr2 - (IntPtr)2 / 2;
                    }
                }
            }
        }
        c = *(ptr += (IntPtr)2 / 2);
    }
    int num2 = 0;
    int num3 = 0;
    while (true)
    {
        if ((c >= '0' && c <= '9') || ((options & NumberStyles.AllowHexSpecifier) != NumberStyles.None && ((c >= 'a' && c <= 'f') || (c >= 'A' && c <= 'F'))))
        {
            num |= 4;
            if (c != '0' || (num & 8) != 0)
            {
                if (num2 < 50)
                {
                    number.digits[(IntPtr)(num2++)] = c;
                    if (c != '0' || parseDecimal)
                    {
                        num3 = num2;
                    }
                }
                if ((num & 16) == 0)
                {
                    number.scale++;
                }
                num |= 8;
            }
            else
            {
                if ((num & 16) != 0)
                {
                    number.scale--;
                }
            }
        }
        else
        {
            char* ptr2;
            if ((options & NumberStyles.AllowDecimalPoint) != NumberStyles.None && (num & 16) == 0 && ((ptr2 = Number.MatchChars(ptr, str4)) != null || (flag && (num & 32) == 0 && (ptr2 = Number.MatchChars(ptr, str2)) != null)))
            {
                num |= 16;
                ptr = ptr2 - (IntPtr)2 / 2;
            }
            else
            {
                if ((options & NumberStyles.AllowThousands) == NumberStyles.None || (num & 4) == 0 || (num & 16) != 0 || ((ptr2 = Number.MatchChars(ptr, str5)) == null && (!flag || (num & 32) != 0 || (ptr2 = Number.MatchChars(ptr, str3)) == null)))
                {
                    break;
                }
                ptr = ptr2 - (IntPtr)2 / 2;
            }
        }
        c = *(ptr += (IntPtr)2 / 2);
    }
    bool flag3 = false;
    number.precision = num3;
    number.digits[(IntPtr)num3] = '\0';
    if ((num & 4) != 0)
    {
        if ((c == 'E' || c == 'e') && (options & NumberStyles.AllowExponent) != NumberStyles.None)
        {
            char* ptr3 = ptr;
            c = *(ptr += (IntPtr)2 / 2);
            char* ptr2;
            if ((ptr2 = Number.MatchChars(ptr, numfmt.positiveSign)) != null)
            {
                c = *(ptr = ptr2);
            }
            else
            {
                if ((ptr2 = Number.MatchChars(ptr, numfmt.negativeSign)) != null)
                {
                    c = *(ptr = ptr2);
                    flag3 = true;
                }
            }
            if (c >= '0' && c <= '9')
            {
                int num4 = 0;
                do
                {
                    num4 = num4 * 10 + (int)(c - '0');
                    c = *(ptr += (IntPtr)2 / 2);
                    if (num4 > 1000)
                    {
                        num4 = 9999;
                        while (c >= '0' && c <= '9')
                        {
                            c = *(ptr += (IntPtr)2 / 2);
                        }
                    }
                }
                while (c >= '0' && c <= '9');
                if (flag3)
                {
                    num4 = -num4;
                }
                number.scale += num4;
            }
            else
            {
                ptr = ptr3;
                c = *ptr;
            }
        }
        while (true)
        {
            if (!Number.IsWhite(c) || (options & NumberStyles.AllowTrailingWhite) == NumberStyles.None)
            {
                bool flag2;
                char* ptr2;
                if ((flag2 = ((options & NumberStyles.AllowTrailingSign) != NumberStyles.None && (num & 1) == 0)) && (ptr2 = Number.MatchChars(ptr, numfmt.positiveSign)) != null)
                {
                    num |= 1;
                    ptr = ptr2 - (IntPtr)2 / 2;
                }
                else
                {
                    if (flag2 && (ptr2 = Number.MatchChars(ptr, numfmt.negativeSign)) != null)
                    {
                        num |= 1;
                        number.sign = true;
                        ptr = ptr2 - (IntPtr)2 / 2;
                    }
                    else
                    {
                        if (c == ')' && (num & 2) != 0)
                        {
                            num &= -3;
                        }
                        else
                        {
                            if ((text == null || (ptr2 = Number.MatchChars(ptr, text)) == null) && (text2 == null || (ptr2 = Number.MatchChars(ptr, text2)) == null))
                            {
                                break;
                            }
                            text = null;
                            text2 = null;
                            ptr = ptr2 - (IntPtr)2 / 2;
                        }
                    }
                }
            }
            c = *(ptr += (IntPtr)2 / 2);
        }
        if ((num & 2) == 0)
        {
            if ((num & 8) == 0)
            {
                if (!parseDecimal)
                {
                    number.scale = 0;
                }
                if ((num & 16) == 0)
                {
                    number.sign = false;
                }
            }
            str = ptr;
            return true;
        }
    }
    str = ptr;
    return false;
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-08T13:25:56.810

仅仅因为`int.TryParse`给你价值并不意味着你需要保留它；你可以很高兴地做到这一点：

```
int temp;
if (int.TryParse(inputString, out temp))
{
    // do stuff
} 
```

`temp`如果您不需要它，您可以完全忽略它。如果您确实需要它，那么嘿，它在您需要的时候等着您。

至于内部，据我所知，它尝试将字符串的原始字节读取为 int 并测试结果是否有效，或者其他什么；它并不像遍历查找非数字字符那么简单。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-01-09T17:29:26.543

我们现在可以在 C# 7.0 及更高版本中这样写：

```
if (int.TryParse(inputString, out _))
{
    //do stuff
} 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-01-25T07:48:33.520

TryParse 是单行解析或验证的最佳方式：

```
int nNumber = int.TryParse("InputString", out nNumber) ? nNumber : 1; 
```

简短的介绍：

1.  nNumber 将初始化为零，
2.  int.TryParse() 尝试解析“InputString”并验证它，如果成功设置为 nNumber。
3.  short if ?: 检查 int.TryParse() 结果，返回 nNumber 或 1 作为默认值。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-03-08T14:14:45.247

正则表达式经过编译，因此为了加快速度，只需创建一次并重用它。
新的比 IsMatch 需要更长的时间。
这仅检查所有数字。
它不检查范围。
如果您需要测试范围，那么 TryParse 是要走的路。

```
private static Regex regexInt = new Regex("^\\d+$");
static bool CheckReg(string value)
{
    return regexInt.IsMatch(value);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-25T14:48:08.743

检查这个简单的程序以了解`int.TryParse`

```
 class Program
 {
    static void Main()
    {
        string str = "7788";
        int num1;
        bool n = int.TryParse(str, out num1);
        Console.WriteLine(num1);
        Console.ReadLine();
    }
} 
```

输出为：7788

# ruby - .each 看似递归到二维数组的第二维

> ID：15294879
> 
> 赞同：2
> 
> 时间：2013-03-08T13:18:10.663
> 
> 标签：ruby, arrays, multidimensional-array, iterator

我刚刚偶然发现了这种在 Ruby 中迭代二维数组的方式：

```
[[1, 2], [3, 4]].each {|x| puts x} 
```

输出是：

```
1
2
3
4 
```

我的问题很简单：**为什么以及如何发生这种情况？为什么`Array#each`看似递归到第二维？**为什么输出不如下？

```
[1, 2]
[3, 4] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T13:18:10.663

将代码更改为：

```
[[1, 2], [3, 4]].each {|x| puts x.to_s} 
```

给出预期的输出：

```
[1, 2]
[3, 4] 
```

原来魔法正在发生[`IO#puts`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-puts)，而不是发生在`Array#each`. 从文档：

> 如果使用数组参数调用，则将每个元素写入新行。

`IO#puts`给定数组参数时也是递归的。

# maven - Maven 中的跨模块 EMMA 覆盖

> ID：15294881
> 
> 赞同：1
> 
> 时间：2013-03-08T13:18:14.163
> 
> 标签：maven, code-coverage, emma

不幸的是，我对 Maven 和 EMMA 都非常陌生。因此，搜索这个网站和谷歌已经产生了我不完全确定它们是否适用于我的情况的结果，即使是这样，如何在实践中实际做到这一点。

我在模块 A 中有一个系统，但由于各种原因，该系统的测试代码必须位于模块 B 中。不幸的是，EMMA 似乎在每个模块的基础上检查覆盖率，因为在模块中运行测试用例时B，模块 A 似乎没有被检测。因此，当报告 A 和 B 合并时，它会使模块 A 的大部分部分未被覆盖。

现在，我的问题有两个：

*   是否可以以检测所有模块的方式运行 EMMA，从而允许模块 B 的测试用例覆盖模块 A？
*   如果是这样，如何配置 Maven POM 文件来执行此操作而不是默认行为？

# ruby-on-rails - 在 gem 中使用 url_for

> ID：15294888
> 
> 赞同：3
> 
> 时间：2013-03-08T13:18:45.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, gem

我正在编写一个包含一些视图的 gem，其中一个我需要使用`link_to`取决于方法的`url_for`方法。默认情况下两者都不可用，所以我尝试包含所需的模块

```
include ActionView::Helpers
include ActionDispatch::Routing
include Rails.application.routes.url_helpers 
```

`Rails.application`什么不起作用，因为`nil`我无法获得路线和包含的 url 帮助程序。我也找到[了这种](https://stackoverflow.com/questions/8574866/how-to-use-the-url-for-method-in-my-own-gem)方法，但我不喜欢它，因为它又快又脏。我希望在 init 之后包含该模块，以便我可以访问路由。有没有办法安排这样的sutuation？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:11:51.303

我解决了。不需要包含模块。这段代码在控制台上不起作用，因为 rails 环境没有完全加载在那里，但是当我启动应用程序时它工作正常。直到现在才考虑它，......只是一直挂在它在控制台中不起作用的地方。

# c# - 如何使用 SQLite 的内容提供程序

> ID：15294890
> 
> 赞同：0
> 
> 时间：2013-03-08T13:18:46.367
> 
> 标签：c#, visual-studio, sqlite, locking

我创建了一个`application`创建和使用. `SQLitedatabase`_ 当他们想与 互动时，他们总是这样：。`database``select, update, insert and delete``database``multiple threads``application``database``database``Classname -> LogicDatabase -> database`

**问题：**

我有时会得到：`"Database is Locked(5)"`在我的`output log`. 使用我的`application`并没有给我带来任何麻烦，一切正常，但我担心这个警告。所以我搜索了互联网（谷歌搜索），那里有更多的人试图阻止`database`他们`locking`。

大部分时间提到`Content Provider`处理问题的问题。

**我的问题：**

我如何使用 a`content provider`来处理这个问题？

提前致谢！

# mysql - 选择具有通过连接关联的其他元素的所有行

> ID：15294894
> 
> 赞同：1
> 
> 时间：2013-03-08T13:18:53.463
> 
> 标签：mysql, sql, join

我有一张用户和评论表：

```
users(id, name)
comments(id, user_id, content) 
```

我正在寻找一个（有效的）`SELECT`语句，它将只返回那些`users`至少有一个`comment`关联的行。

通常我可以轻松地执行 SQL，但目前我无法理解它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:21:18.967

这很简单

```
SELECT DISTINCT id, name 
FROM users u
INNER JOIN comments c ON u.id = c.user_ID 
```

`INNER JOIN`查找链接数据的用户中的所有行`comments`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:20:04.280

`INNER JOIN`将完成这项工作。在 select 语句中添加的原因是因为它只会返回唯一的用户记录，并且可能用户在表中`DISTINCT`拥有多个记录。`comments`

```
SELECT  DISTINCT a.*
FROM    users a
        INNER JOIN comments b
            ON a.id = b.user_ID 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T13:21:29.097

```
SELECT  u.*
FROM    users u
where u.id in (select id from comments where id=u.id) 
```

# unix - 如何在unix中压缩最新创建的文件

> ID：15294896
> 
> 赞同：0
> 
> 时间：2013-03-08T13:19:04.540
> 
> 标签：unix, zip

我想压缩在特定日期创建的文件数量。我用了这个命令

```
zip -rt 06222012 TEST root/*.csv 
```

此命令压缩根目录中的所有文件，扩展名为 .csv，日期 >=22/6/2012 创建

但这不符合我的要求。我的要求是.. 假设有两个脚本 a.sh 和 b.sh a.sh(Manual run) 在 22/6/2012 1:00 AM 执行，并在 22/6/2012 4:00 AM 完成，创建 4 个 .csv 文件

此 b.sh 文件在 22/6/2012 上午 6:00 通过 cron 作业执行并在 22/6/2012 上午 10:00 完成并创建 5 个 .csv 文件

上面的 zip 命令将压缩所有这 9 个文件，因为它们是在 22/6/2012 的同一天创建的，但我只需要 5 个仅由 b.sh 创建的 .csv 文件，这意味着在 22 日创建的文件/6/2012 上午 10:00

在上面的 zip 命令中，我也可以给出小时和分钟吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:16:25.597

鉴于上面评论中已经提到的事实，即使用标准文件系统，您唯一的机会是通过“上次修改的文件”来近似“创建的文件”，您可能希望使用`find`.

在 stackoverflow 上已经有一篇很好的文章（参见：[Shell Script — Get all files modified after <date>](https://stackoverflow.com/questions/848293/shell-script-get-all-files-modified-after-date)）

关于您的情况，该`-newerXY`选项很可能是最适合该问题的选项，例如：

```
 zip -r TEST `find root -name"*.csv" -newermt 10:00` 
```

# java - C/C++ 到 Java 套接字错误

> ID：15294897
> 
> 赞同：0
> 
> 时间：2013-03-08T13:19:14.900
> 
> 标签：java, c++, c, sockets, socketexception

我正在尝试在 Java 服务器和 C 客户端之间进行套接字通信。当我从客户端向服务器发送文本时，例如“AAAAA”，我在下面出现错误。为什么它不起作用？我可以使用 C 到 C 和 java 到 java 场景运行这些代码。

```
Waiting for connection
Connection received from 127.0.0.1
java.io.StreamCorruptedException: invalid stream header: 41414141
    at java.io.ObjectInputStream.readStreamHeader(Unknown Source)
    at java.io.ObjectInputStream.<init>(Unknown Source)
    at Provider.run(Provider.java:22)
    at Provider.main(Provider.java:67)
Exception in thread "main" java.lang.NullPointerException
    at Provider.run(Provider.java:43)
    at Provider.main(Provider.java:67) 
```

Java 服务器：

```
import java.io.*;
import java.net.*;
public class Provider{
    ServerSocket providerSocket;
    Socket connection = null;
    ObjectOutputStream out;
    ObjectInputStream in;
    String message;
    Provider(){}
    void run()
    {
        try{
            //1\. creating a server socket
            providerSocket = new ServerSocket(2004, 10);
            //2\. Wait for connection
            System.out.println("Waiting for connection");
            connection = providerSocket.accept();
            System.out.println("Connection received from " + connection.getInetAddress().getHostName());
            //3\. get Input and Output streams
            out = new ObjectOutputStream(connection.getOutputStream());
            out.flush();
            in = new ObjectInputStream(connection.getInputStream());
            sendMessage("Connection successful");
            //4\. The two parts communicate via the input and output streams
            do{
                try{
                    message = (String)in.readObject();
                    System.out.println("client>" + message);
                    if (message.equals("bye"))
                        sendMessage("bye");
                }
                catch(ClassNotFoundException classnot){
                    System.err.println("Data received in unknown format");
                }
            }while(!message.equals("bye"));
        }
        catch(IOException ioException){
            ioException.printStackTrace();
        }
        finally{
            //4: Closing connection
            try{
                in.close();
                out.close();
                providerSocket.close();
            }
            catch(IOException ioException){
                ioException.printStackTrace();
            }
        }
    }
    void sendMessage(String msg)
    {
        try{
            out.writeObject(msg);
            out.flush();
            System.out.println("server>" + msg);
        }
        catch(IOException ioException){
            ioException.printStackTrace();
        }
    }
    public static void main(String args[])
    {
        Providerserver = new Provider();
        while(true){
            server.run();
        }
    }
} 
```

C++ 客户端：

```
#include <stdio.h> 
#include <stdlib.h> 
#include <string.h> 
#include <conio.h> 
#include <winsock2.h> 

#define PORTNO      2004

void ExitSys(); 

int main(void) 
{ 
    WSADATA wsd; 
    int result; 
    SOCKET clientSocket; 
    struct sockaddr_in sinServer; 
    struct hostent *host; 
    char serverHost[] = "localhost"; 

    if ((result = WSAStartup(MAKEWORD(2, 2), &wsd)) != 0)  
        ExitSys(); 

    if ((clientSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)) == INVALID_SOCKET) 
        ExitSys(); 

    sinServer.sin_family = AF_INET; 
    sinServer.sin_port = htons(PORTNO); 
    sinServer.sin_addr.s_addr = inet_addr(serverHost); 
    if (sinServer.sin_addr.s_addr == INADDR_NONE) { 
        host = gethostbyname(serverHost); 
        if (host == NULL) 
            ExitSys(); 
        memcpy(&sinServer.sin_addr.s_addr, host->h_addr_list[0], host->h_length); 
    } 

    if (connect(clientSocket, (struct sockaddr *) &sinServer, sizeof(sinServer)) == SOCKET_ERROR) 
        ExitSys(); 

    printf("connected...\n"); 

    for (;;) { 
        char buf[512]; 
        printf("Text:"); 
        gets(buf); 
        if (!strcmp(buf, "quit")) 
            break; 
        if (send(clientSocket, buf, strlen(buf), 0) == SOCKET_ERROR) 
            ExitSys(); 
    } 

    shutdown(clientSocket, SD_BOTH); 
    closesocket(clientSocket); 

    WSACleanup(); 

    return 0; 
} 

void ExitSys() 
{ 
    printf("extited");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:27:16.630

您正在使用`ObjectInputStream`and `ObjectOutputStream`，它们是为 java 对象设计的（它们不能接受其他任何东西）。相反，使用另一个`InputStream`，`OutputStream`你不应该得到这个问题。例如我喜欢使用`BufferedReader`（你必须确保编码是相等的），例如：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream(), "UTF-8")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:23:36.163

您看到该错误是因为`ObjectInputStream`期望传入的数据以特定方式序列化。在 C++ 代码中，您只是发送原始数据。

如果您只想传递 char 数据而不是`InputStream`应该`OutputStream`这样做，但是如果您想传递更多结构化数据，那将更加棘手。

我用过`DataInputStream`和`DataOutputStream`，但它并不好玩`int`，`char`而且`string`你可以通过订购问题来处理网络，而且它不会是可移植的。这是一个以前的[线程](https://stackoverflow.com/questions/9385542/java-datainputstream-readint-from-c-client-getting-huge-value)，它展示了一个很好的例子。

如果您想要更复杂的东西或要在生产环境中支持的东西，那么您可能想要考虑使用[0MQ](http://www.zeromq.org/)或类似的东西。这里是[Java 示例](http://zguide.zeromq.org/java:_start)，这里是[C++ 示例](http://zguide.zeromq.org/cpp:_start)。

# c# - 将字符串分配给指向字符的指针

> ID：15294902
> 
> 赞同：3
> 
> 时间：2013-03-08T13:19:24.403
> 
> 标签：c#, string, class, pointers, char

我想将字符串对象存储到`char *`C#.Net 中，我该如何实现？

我的功能是

```
xyz(char *c)
{
} 
```

我想将此字符串作为参数传递给此函数：

```
string s = "Hello" 
```

我在 C# 中使用不安全的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:30:14.270

```
string s = "Hello";
fixed (char* ptr = s) {
    xyz(ptr);
} 
```

请注意，您不应该真正*存储*该指针（在字段等中），因为地址只会在块的持续时间内被*固定。*`fixed`不过，你可以在里面很好地使用它`xyz`。

只是……乖一点；突变`string`s 非常危险。

另外：如评论中所述：`xyz(ptr, s.Length)`强烈推荐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:23:34.553

string 将被视为数组， char* 将指向 string 的第一个索引，因此您可以将函数称为 xyz(your string); 我想它应该工作

# python - Python/Numpy 在转换为浮点数时无法正确读取数据

> ID：15294903
> 
> 赞同：1
> 
> 时间：2013-03-08T13:19:26.183
> 
> 标签：python, string, numpy, matplotlib

我已经在网上搜索了近三个小时，现在需要一个关于 numpy 的问题的答案。

我正在将 .csv 文件中的数据读取到 numpy 数组中，以在不使用 matplotlib 的 3d 曲面图中绘制数据。数据采集​​是通过 python 的 csv 模块完成的。标题被读入一个数组，第一列被读入另一个数组，属于这两个轴值的其余数据被读入第三个数组。

首先，我监督我必须将“Y”数组转换为浮点数才能正确显示它，而无需混合“字符串”和“浮点数”数组，这是固定的。现在我的程序正确转换 Y 数组中的字符串，直到找到像“2.633e-12”这样的值，现在它说

ValueError：float() 的无效文字：2.673e-

当我在转换之前从数组中打印相应的值时，它会像上面显示的那样打印。

请参阅下面的完整程序代码...

我会很感激你能提供的任何帮助，所以提前谢谢...

蒂姆

编辑：

追溯：

```
Traceback (most recent call last):
  File "Velocities.py", line 49, in <module>
    surf = ax.plot_surface(X, Y, avel, rstride=1, cstride=1, cmap=cm.jet)
  File "/usr/bin/epd_free/lib/python2.7/site-packages/mpl_toolkits/mplot3d/axes3d.py", line 1453, in plot_surface
    self.auto_scale_xyz(X, Y, Z, had_data)
  File "/usr/bin/epd_free/lib/python2.7/site-packages/mpl_toolkits/mplot3d/axes3d.py", line 392, in auto_scale_xyz
    self.xy_dataLim.update_from_data_xy(np.array([x, y]).T, not had_data)
  File "/usr/bin/epd_free/lib/python2.7/site-packages/matplotlib/transforms.py", line 854, in update_from_data_xy
    path = Path(xy)
  File "/usr/bin/epd_free/lib/python2.7/site-packages/matplotlib/path.py", line 112, in __init__
    vertices = np.asarray(vertices, np.float_)
  File "/usr/bin/epd_free/lib/python2.7/site-packages/numpy/core/numeric.py", line 235, in asarray
    return array(a, dtype, copy=False, order=order)
ValueError: invalid literal for float(): 2.673e- 
```

从我的输入文件产生错误的行之前和之后的行：

```
2.57e-12;-243.476064488;-243.476064488;-243.476064488;-243.476064488;-243.476064488;-243.476064488;-243.476064488;-243.476064488;-243.476064488;-243.476064488;-243.476064488;-243.476064488;-243.476064488;-243.476064488;-243.476064488;-243.476064488;-243.476064488;-243.476064488;-243.476064488;-243.476064488;-243.476064488;-243.476064488
2.673e-12;-243.747334317;-243.747334317;-243.747334317;-243.747334317;-243.747334317;-243.747334317;-243.747334317;-243.747334317;-243.747334317;-243.747334317;-243.747334317;-243.747334317;-243.747334317;-243.747334317;-243.747334317;-243.747334317;-243.747334317;-243.747334317;-243.747334317;-243.747334317;-243.747334317;-243.747334317
2.772e-12;-244.067736958;-244.067736958;-244.067736958;-244.067736958;-244.067736958;-244.067736958;-244.067736958;-244.067736958;-244.067736958;-244.067736958;-244.067736958;-244.067736958;-244.067736958;-244.067736958;-244.067736958;-244.067736958;-244.067736958;-244.067736958;-244.067736958;-244.067736958;-244.067736958;-244.067736958 
```

我仍然会很感激任何答案，帮助我解决这个问题......

编辑2：

这是我发现的完整代码，转换为浮点数没有问题，而是表面图本身会导致回溯......

```
#!/usr/bin/epd_free/bin/python2.7
# -*- coding: utf-8 -*-

##all the necessary imports
import matplotlib as mpl
import matplotlib.pyplot as plt
#import math as m
import csv
import numpy as np
from matplotlib import cm
#from matplotlib.ticker import LinearLocator, FormatStrFormatter
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.ticker as ticker

##reading the data
#reading the velocity profiles from the "velProfiles"
eingabe = "velProfiles_kum.csv"

dat = csv.reader(open(str(eingabe), 'rb'), delimiter=';')

X=dat.next()
X.pop(0)
X=np.array(X)

Y=[]
avel=[]
for i,row in enumerate(dat):
    if i%100 == 0:
        Y.append(row.pop(0))
        avel.append([float(item) for item in row])#if item is not ''
del dat
#Y=np.array(Y)
Y=np.array(Y).astype(np.float64)
avel=np.array(avel) # converting the list into an array to be able to process it with the 3D plotting engine.

##creating the graph and the mesh needed to plot the data. (get the dimensions right!!!)
fig = plt.figure(frameon=False)
ax = fig.gca(projection='3d', lod=True)
X, Y = np.meshgrid(X, Y)

print("X: " + str(X.shape) + "| Y: " + str(Y.shape) + "| Z: " + str(avel.shape)) # to stdout to check the arrays' dimensions

#plotting the surface
surf = ax.plot_surface(X, Y, avel, rstride=1, cstride=1, cmap=cm.jet)

#setting the title and the labels
plt.xlabel("x")
plt.ylabel("t")
plt.title("The simulation's velocity profiles plotted over time and space")

#layout refinements
#plt.tight_layout()
#fig.colorbar(surf, shrink=.8, aspect=12) #create the colorbar after the tight_layout() command to prevent it from being drawn inside the figure.

#show it!
plt.show() 
```

# preg-match - preg_match 由字符分隔的数字序列

> ID：15294906
> 
> 赞同：1
> 
> 时间：2013-03-08T13:19:29.147
> 
> 标签：preg-match, digit

如何在 a`<div class="lot-price-block">`和`<span`.

我试过这个

```
preg_match_all('/<div class=\"lot\-price\-block\">(.*?)<span/s',$file_contents,$estimates); 
```

但它给了我所有的块，不仅是由'-'分隔的数字

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:28:12.057

尝试这样的事情：

```
$file_contents = '<div class="lot-price-block">fsfd 32424-554 fgdf <span';
preg_match_all('/<div class=\"lot-price-block\">\D*(\d+-\d+)\D*<span/s',$file_contents,$estimates);
echo $estimates[1][0]; 
```

**\D** => 匹配所有非数字 ([^0-9])

**\d** => 匹配所有数字 ([0-9])

**ps：**你不需要转义连字符

# eclipse - EGit 已从工作区中删除文件

> ID：15294907
> 
> 赞同：1
> 
> 时间：2013-03-08T13:19:31.003
> 
> 标签：eclipse, egit

我在 Eclipse 之外创建了 Git 存储库。并作出承诺。现在我的工作区中没有文件，但将它们放在 git 目录中。如何将它们保持在两个地方？而我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:56:49.920

您应该保留和引用 git 工作树中的文件，而不是 Eclipse 工作区中的文件。

请参阅“[从现有 Git 存储库开始](http://wiki.eclipse.org/EGit/User_Guide#Starting_from_existing_Git_Repositories)”部分

![添加 Git 仓库](../Images/f3dcc9a634060c6cf6349181a31b2a67.png)

之后，您将能够在 Eclipse 工作区中看到这些文件，即使它们仍在本地文件系统中。

# javascript - jQuery | 如何从select html元素中获取所选项目

> ID：15294909
> 
> 赞同：3
> 
> 时间：2013-03-08T13:19:39.487
> 
> 标签：javascript, jquery, html, dom

我在我的页面中设置了一个选择选项控件，如下所示：

```
<select multiple="multiple" name="name[]" id="ListId">
    <optgroup label="Group 1">
        <optgroup label="Group 1.1">
            <option selected="selected" value="1">One</option>
            <option value="2">Two</option>
            <option selected="selected" value="3">Three</option>
        </optgroup>
        <optgroup label="Group 1.2">
            <option value="1">One</option>
            <option value="2">Two</option>
            <option selected="selected" value="3">Three</option>
        </optgroup>
    </optgroup>
    <optgroup label="Group 2">
        <optgroup label="Group 2.1">
            <option value="1">One</option>
            <option selected="selected" value="2">Two</option>
            <optionvalue="3">Three</option>
        </optgroup>
    </optgroup>
</select> 
```

通过在加载页面时使用 jQuery，我尝试通过以下代码获取所选项目：

```
if($('#ListId').length > 0)
{
    var selected = [];

    $('#ListId option[selected="selected"]').each(
        function(i)
        {
            var val = $(this).val();
            var txt = $(this).text();

            selected[val] =   txt;
        }
    );
} 
```

然后我修改上面的代码以获取选定的项目，以防用户进行了新的选择，如下所示：

```
if($('#ListId').length > 0)
{
    var selected = [];

    $('#ListId option[selected="selected"]').each(
        function(i)
        {
            var val = $(this).val();
            var txt = $(this).text();

            selected[val] =   txt;
        }
    );

    $('#ListId').change(
        function()
        {
            selected = [];

            $('#ListId option[selected="selected"]').each(
                function(i)
                {
                    var val = $(this).val();
                    var txt = $(this).text();

                    selected[val] =   txt;
                }
            );
        }
    );
} 
```

但问题是仍然继续阅读预览“选定”项目。

您还可以在此处访问小提琴进行现场测试：http: [//jsfiddle.net/Qem7n/](http://jsfiddle.net/Qem7n/)

关于如何解决该问题的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T13:37:32.090

改变

```
$('#ListId option[selected="selected"]') 
```

到

```
$('#ListId option:selected') 
```

因为：`[selected="selected"]`不是实时选择器。

示例：http: [//jsfiddle.net/9YrY8/](http://jsfiddle.net/9YrY8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T13:30:54.483

[http://jsfiddle.net/jxQuU/52/](http://jsfiddle.net/jxQuU/52/)

```
function put(sel,i) {
    sel[i.value]=$(i).text();
}
function change() {
    var sel = [];
    $('#ListId option:selected').each(function (k,i){put(sel,i);});
    alert(sel[1]);
}
$('#ListId').on('change',change);
change(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T13:44:59.540

试试这个：

```
$('#ListId').change(function(){
  var selected = $('#ListId').val()
  var str = '';
  for (var i=0;i<selected.length;i++){
    if (i>0) str += ', ';
      str += selected[i];
    }
  alert(str);
}); 
```

或这个：

```
$('#ListId').change(function(){
    var $selected = $('#ListId option:selected');
    var i=0;
    var str = '';
    $selected.each(function(){
    if (i>0) str+= ', ';
    str += $(this).val() + " : " + $(this).text()+ " ";
    ++i;
  });
  alert(str);
}); 
```

或者，如果您想将所选项目放入数组中，请使用：

```
$('#ListId').change(function(){
  var arr = [];
  var $selected = $('#ListId option:selected');
  //var i=0;
  //var str = '';
  $selected.each(function(){
     //if (i>0) str+= ', ';
     //str += $(this).val() + " : " + $(this).text()+ " ";
     arr[$(this).val()+$(this).parent().prop('label')] = $(this).text();
     //++i;
  });
  console.log(arr);
}); 
```

您应该考虑到选项具有相同的值，并且使用选项值作为数组的索引将导致数组上具有相同索引值的其他值被更改并且不会附加到您的数组中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-26T18:33:37.217

有一个单行解决方案，只需使用它

```
$('#formid').find('select[name="selectname"]').val() 
```

它应该工作，它对我有用！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-05T13:35:53.277

和托马斯说的一样，你也可以用

```
$('option:selected', '#ListId') 
```

第二个参数代表搜索范围

# knockout.js - 在 KnockOutJS 中按 ID 查找

> ID：15294914
> 
> 赞同：5
> 
> 时间：2013-03-08T13:19:52.217
> 
> 标签：knockout.js

鉴于以下情况，我如何让 id 10 退出？

```
function ChildListViewModel()
{
    var self = this;
    self.children = ko.observableArray([]);   

    self.children.push({id:20,name:"Jake"});
    self.children.push({id:10,name:"Jake"});

    self.find = function(id)
    {   
        console.log(self.children().length);
        setTimeout(function(){console.log(self.children().length);}, 500);
        found = ko.utils.arrayFirst(self.children(), function(child) {
            return child.id() === id;
        });

        console.log(found);

        return found;
    }

} 
```

我想做类似的事情

```
ChildVM.find(10); 
```

所有使用的尝试`ko.utils.arrayFirst`都`ko.utils.arrayForEach`失败了。

**编辑**

这现在有效，请参阅选定的答案。

关于加载顺序和 AJAX 的问题意味着这不能正常工作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T13:22:30.560

```
return ko.utils.arrayFirst(self.children(), function(child) {
    return child.id === id;
}); 
```

只需记住使用`self.children()`来获取底层数组。

# java - Pjsip 使用 Sip 特定的事件通知通知消息

> ID：15294920
> 
> 赞同：0
> 
> 时间：2013-03-08T13:20:07.237
> 
> 标签：java, c++, sip, pjsip, csip-simple

我想在 CsipSimple 中实现通知事件回调这里是我写的 C 代码

我的 C/C++ 文件

pjsip_event_notification.h 文件

```
#include <pjsip-simple/evsub.h>

class EventCallBack {

public:
        virtual ~EventCallBack() {}

        virtual void on_evsub_state(pjsip_evsub *sub, pjsip_event *event){}
        virtual void on_tsx_state(pjsip_evsub *sub, pjsip_transaction *tsx,
                        pjsip_event *event){}
        virtual void on_rx_refresh(pjsip_evsub *sub, pjsip_rx_data *rdata,
                        int p_st_code, pj_str_t **p_st_text, pjsip_hdr *res_hdr,
                        pjsip_msg_body **p_body){}
        virtual void on_rx_notify(pjsip_evsub *sub, pjsip_rx_data *rdata, int *p_st_code,
                        pj_str_t **p_st_text, pjsip_hdr *res_hdr, pjsip_msg_body **p_body){}
        virtual void on_client_refresh(pjsip_evsub *sub){}
        virtual void on_server_timeout(pjsip_evsub *sub){}

};
extern "C" {
void setEventCallbackObject(EventCallBack* eventCallBack);
} 
```

pjsip_event_notification.cpp 文件

```
#include "pjsip_event_notification.h"
static EventCallBack* registeredCallbackObject = NULL;

extern "C" {

 void on_evsub_state_wrapper(pjsip_evsub *sub, pjsip_event *event){
                registeredCallbackObject->on_evsub_state(sub,event);

 }
 void on_tsx_state_wrapper(pjsip_evsub *sub, pjsip_transaction *tsx,
                pjsip_event *event){
         registeredCallbackObject-> on_tsx_state(sub,tsx,event);
 }
 void on_rx_refresh_wrapper(pjsip_evsub *sub, pjsip_rx_data *rdata,
                int p_st_code, pj_str_t **p_st_text, pjsip_hdr *res_hdr,
                pjsip_msg_body **p_body){
         registeredCallbackObject->on_rx_refresh(sub,rdata,p_st_code,p_st_text,res_hdr,p_body);

 }
 void on_rx_notify_wrapper(pjsip_evsub *sub, pjsip_rx_data *rdata, int *p_st_code,
                pj_str_t **p_st_text, pjsip_hdr *res_hdr, pjsip_msg_body **p_body){
         registeredCallbackObject->on_rx_notify(sub,rdata,p_st_code,p_st_text,res_hdr,p_body);
 }
 void on_client_refresh_wrapper(pjsip_evsub *sub){
         registeredCallbackObject->on_client_refresh(sub);
 }
 void on_server_timeout_wrapper(pjsip_evsub *sub){
         registeredCallbackObject->on_server_timeout(sub);
 }

// struct event_callback wrapper_callback_event_struct = {
//               &on_evsub_state_wrapper,
//               &on_tsx_state_wrapper,
//               &on_rx_refresh_wrapper,
//               &on_rx_notify_wrapper,
//               &on_client_refresh_wrapper,
//               &on_server_timeout_wrapper
// };

 void setEventCallbackObject(EventCallBack* eventCallBack){
         registeredCallbackObject=eventCallBack;
 } 
```

以及用于实现的 Java 文件

```
package com.csipsimple.events;

import org.pjsip.pjsua.EventCallBack;
import org.pjsip.pjsua.SWIGTYPE_p_int;
import org.pjsip.pjsua.SWIGTYPE_p_p_pj_str_t;
import org.pjsip.pjsua.SWIGTYPE_p_p_pjsip_msg_body;
import org.pjsip.pjsua.SWIGTYPE_p_pjsip_evsub;
import org.pjsip.pjsua.SWIGTYPE_p_pjsip_hdr;
import org.pjsip.pjsua.SWIGTYPE_p_pjsip_rx_data;
import org.pjsip.pjsua.SWIGTYPE_p_pjsip_transaction;
import org.pjsip.pjsua.pjsip_event;

public class EventNotify extends EventCallBack{

        @Override
        public void on_evsub_state(SWIGTYPE_p_pjsip_evsub sub, pjsip_event event) {

                System.out.println("EventNotify on_evsub_state");
                super.on_evsub_state(sub, event);
        }

        @Override
        public void on_tsx_state(SWIGTYPE_p_pjsip_evsub sub,
                        SWIGTYPE_p_pjsip_transaction tsx, pjsip_event event) {
                System.out.println("EventNotify on_tsx_state");
                super.on_tsx_state(sub, tsx, event);
        }

        @Override
        public void on_rx_refresh(SWIGTYPE_p_pjsip_evsub sub,
                        SWIGTYPE_p_pjsip_rx_data rdata, int p_st_code,
                        SWIGTYPE_p_p_pj_str_t p_st_text, SWIGTYPE_p_pjsip_hdr res_hdr,
                        SWIGTYPE_p_p_pjsip_msg_body p_body) {
                System.out.println("EventNotify on_rx_refresh");
                super.on_rx_refresh(sub, rdata, p_st_code, p_st_text, res_hdr, p_body);
        }

        @Override
        public void on_rx_notify(SWIGTYPE_p_pjsip_evsub sub,
                        SWIGTYPE_p_pjsip_rx_data rdata, SWIGTYPE_p_int p_st_code,
                        SWIGTYPE_p_p_pj_str_t p_st_text, SWIGTYPE_p_pjsip_hdr res_hdr,
                        SWIGTYPE_p_p_pjsip_msg_body p_body) {
                System.out.println("EventNotify on_rx_notify");
                super.on_rx_notify(sub, rdata, p_st_code, p_st_text, res_hdr, p_body);
        }

        @Override
        public void on_client_refresh(SWIGTYPE_p_pjsip_evsub sub) {
                System.out.println("EventNotify on_client_refresh");
                super.on_client_refresh(sub);
        }

        @Override
        public void on_server_timeout(SWIGTYPE_p_pjsip_evsub sub) {
                System.out.println("EventNotify on_server_timeout");
                super.on_server_timeout(sub);
        }

}

} 
```

我想问我如何才能回电这些方法

完整的 Src 可以在 git clone [https://Rs9766@bitbucket.org/Rs9766/csipsimple_virtualbox.git克隆](https://Rs9766@bitbucket.org/Rs9766/csipsimple_virtualbox.git)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:04:44.790

这可以使用下面的 pjsip_event_notification.cpp 来完成

```
#include "pjsip_event_notification.h"
#include <pjsip.h>
#include <pjsip_ua.h>
#include <pjlib-util.h>
#include <pjlib.h>
#include <pjlib.h>
#include <pjsua.h>
#include <pjsua-lib/pjsua_internal.h>

static EventCallBack* registeredCallbackObject = NULL;

extern "C" {

  pj_bool_t on_rx_response_wrapper(pjsip_rx_data *rdata){
          registeredCallbackObject->on_rx_response(rdata);
          return PJ_FALSE;
 }

  pj_bool_t on_rx_request_wrapper(pjsip_rx_data *rdata){
          registeredCallbackObject->on_rx_request(rdata);
          return PJ_FALSE;
  }

  /* The module instance. */
  static pjsip_module mod_event_handler =
  {
      NULL, NULL,             /* prev, next.      */
      { (char*)"mod-reg-event", 12 },  /* Name.        */
      -1,                 /* Id           */
      PJSIP_MOD_PRIORITY_TSX_LAYER - 1,  /* Priority         */
      NULL,               /* load()       */
      NULL,               /* start()      */
      NULL,               /* stop()       */
      NULL,               /* unload()     */
      &on_rx_response_wrapper,               /* on_rx_request()  */
      &on_rx_response_wrapper,               /* on_rx_response() */
      NULL,               /* on_tx_request.   */
      NULL,               /* on_tx_response() */
      NULL,               /* on_tsx_state()   */

  };

  PJ_DECL(pj_status_t) event_callback_init() {
      return pjsip_endpt_register_module(pjsua_get_pjsip_endpt(),
                          &mod_event_handler);
  }

 void setEventCallbackObject(EventCallBack* eventCallBack){
         registeredCallbackObject=eventCallBack;
 }

} 
```

相同 pjsip_event_notification.h 的 h 文件

```
#include <pj/config_site.h>
#include <pjsua-lib/pjsua.h>

class EventCallBack {

public:
        virtual ~EventCallBack() {}
        virtual void on_rx_response(pjsip_rx_data *rdata){
 // Target Call Back for Notify message
        }

        virtual void on_rx_request(pjsip_rx_data *rdata){

        }

};
extern "C" {
pj_status_t event_callback_init();

void setEventCallbackObject(EventCallBack* eventCallBack);
} 
```

# javascript - iframe 内容最大滚动高度和跨浏览器滚动顶部？

> ID：15294923
> 
> 赞同：1
> 
> 时间：2013-03-08T13:20:10.267
> 
> 标签：javascript, jquery

如何在跨浏览器中获取 iframe 内容的**总/最大滚动高度和滚动顶部**。

**我尝试了仅在 FireFox**中返回 scrollTop 的波纹管代码，但我想在跨浏览器中获取 scrollTop 和总 ScrollHeight。

```
<head>
    <script src="../javascripts/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        function getIframeH(){
            var scrollHeight = $('#ifrm').contents().scrollTop();
            $('#dvMsg').html("scrollHeight :: " + scrollHeight);
        }
    </script>
</head>
<body>
    <div id="dvMsg"></div>
    <input id="Button1" type="button" value="button" onclick="getIframeH();" />
    <iframe id="ifrm" src="a.xml" ></iframe>
</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:04:41.853

基于[这个问题](https://stackoverflow.com/questions/1852518/how-to-get-scrolltop-of-an-iframe)- 基本上你需要检查 iframe 的`$("html").scrollTop()`，然后`$("body").scrollTop()`if`html`为 0。人们为此编写了插件 - 不要重新发明轮子 =)

# android - 以 MB 为单位的 iOS / Android 应用程序

> ID：15294924
> 
> 赞同：0
> 
> 时间：2013-03-08T13:20:15.243
> 
> 标签：android, ios, file

我正在 iOS 和 Android 中创建一个移动应用程序。我的客户要求应用程序始终可以使用所有必需的数据，因此我必须将它们包含在捆绑包中。它需要可以离线操作。

问题是我需要的可用数据超过 300MB，在某些情况下超过 500MB。

iOS应用审批流程和Android审批流程会遇到哪些问题？

现在我什至无法在我的 Android (Desire HD) 上安装该应用程序（该应用程序已在清单文件中设置为安装在 sd 卡中，而不是内部存储器中）。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:31:19.577

Apple App Store 中任何超过 50MB 的应用程序必须仅通过 wi-fi 下载。它不能通过蜂窝（无线）连接下载。

2GB 是 Apple App Store 中的当前限制。我已经下载了高达 700MB 的 iOS 应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T13:38:06.047

以下是一些可以帮助您的提示：

1.  在 Google Play 上上传应用程序有两个选项：a) Google Play 最大上传大小：50 MB b) 应用程序扩展文件：两个，每个 2GB c) 参考链接：http: [//developer.android.com/distribute /googleplay/publish/preparing.html#size](http://developer.android.com/distribute/googleplay/publish/preparing.html#size)

2.  Apple App Store：最大大小为 2GB。

3.  我对您的主要建议是将您的应用程序的模块分成几个部分，其中包括“安装时间必备”组件和用户可以在安装后立即下载的第二个组件。这既不会降低用户体验，也不会大幅增加应用程序的大小。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T13:30:17.343

在 Google Play 上，您的应用程序有 50 MB 的限制，如果您需要使其大于此限制，您可以使用[`Expansion File`](http://developer.android.com/google/play/expansion-files.html). 这些文件最多支持 2GB 的数据。

你当然应该在完成你的应用程序之前采取一切措施来压缩和优化你的数据，而不是仅仅因为你可以把所有东西都扔在那里。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T13:35:03.677

我认为这*本身*不是问题。iOS 的限制（据我所知）是 2Gb，而你远远低于这个限制。我知道 Android 的限制是相似的（但我不确定）。

话虽如此，如此庞大的应用程序并不一定能带来出色的用户体验。用户是否想要在他们的设备上使用如此多的稀缺空间？您的用户愿意等待多长时间来下载您的应用程序更新？

即使允许，也可能值得尝试其中至少一项：

*   压缩数据并在首次启动时解压缩
*   重构数据以减少占用空间（可能很重要）
*   仅存储“公共数据集”并需要 Internet 连接来查询其余数据

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T13:31:14.927

> 如果用户打开应用程序的第一个体验是等待一个小时来加载数据，他会不高兴。

是的，他会非常高兴从 Play 或其他来源下载 500 MB？那更消极。

即使您以某种方式发布它，我认为让您的用户下载 550+ MB 的 apk 文件也不是一个好主意，因为它会占用大量内部存储空间，并且当您必须下载它时很难更新又是海量文件。

相反，创建一个较小的 apk 文件，将可选的 500 MB 数据下载到存储卡。这样您就可以轻松地更新应用程序，而且它对您来说也是最灵活的。

# php - 重复编码的 JSON 数据

> ID：15294927
> 
> 赞同：0
> 
> 时间：2013-03-08T13:20:42.523
> 
> 标签：php, json, mysqli

我有一个包含多个数据的数据库，但它们当然是独一无二的。这些数据位于每个表中，**telcoCall**、**telcoData**、**telcoSMS**，具体取决于其类。

然后我使用`json_encode`将这些数据合并到 1 个单个数组中。在**telcoCall**内部，数据位于适当的位置。但是，**telcoData**和**telcoSMS**很混乱。这些表中的数据正在被复制。看起来是这样的

![在此处输入图像描述](../Images/415c04652bec00e67fc262c4ef280cce.png)

这是代码：

```
<?PHP
include '../initialization.php';

$mysqli = @mysqli_connect($host, $username, $password, $db);

$query = 'SELECT t.*, c.*, d.*, s.* '.
         'FROM telco t '.
            'INNER JOIN telcoCall c ON t.telcoId = c.telcoId '.
            'INNER JOIN telcoData d ON t.telcoId = d.telcoId '.
            'INNER JOIN telcoSMS s ON t.telcoId = s.telcoId '.
                'ORDER BY t.telcoName, c.callName, d.dataName, s.smsName';

//setup array to hold information
$telcos = array();

//setup holders for the different types so that we can filter out the data
$telcoId = 0;
$callId = 0;
$dataId = 0;
$smsId = 0;

//setup to hold our current index
$telcoIndex = -1;
$callIndex = -1;
$dataIndex = -1;
$smsIndex = -1;

if ($result = mysqli_query($mysqli, $query)) {
    //go through the rows
    while($row = mysqli_fetch_assoc($result)) {
        if($telcoId != $row['telcoId']) {
            $telcoIndex++;
            $callIndex = -1;
            $dataIndex = -1;
            $smsIndex = -1;
            $telcoId = $row['telcoId'];

            //add the console
            $telcos[$telcoIndex]['Telco'] = $row['telcoName'];

            //setup the information array
            $telcos[$telcoIndex]['Call Promo'] = array();
            $telcos[$telcoIndex]['Data Promo'] = array();
            $telcos[$telcoIndex]['SMS Promo'] = array();
        }

        if($callId != $row['callId']) {
            $callIndex++;
            $callId = $row['callId'];

            //add the model to the console
            $telcos[$telcoIndex]['Call Promo'][$callIndex]['Call Name'] = $row['callName'];

            //setup the title array
            $telcos[$telcoIndex]['Call Promo'][$callIndex]['Call'] = array();

            //add the game to the current console and model
            $telcos[$telcoIndex]['Call Promo'][$callIndex]['Call'][] = array(
                'Keyword'     => $row['callKeyword'],
                'Description' => $row['callDescription'],
                'Number'      => $row['callNumber'],
                'Validity'    => $row['callValidity'],
                'Price'       => $row['callPrice']
                );
        }

        if($dataId != $row['dataId']) {
            $dataIndex++;
            $dataId = $row['dataId'];

            //add the model to the console
            $telcos[$telcoIndex]['Data Promo'][$dataIndex]['Data Name'] = $row['dataName'];

            //setup the title array
            $telcos[$telcoIndex]['Data Promo'][$dataIndex]['Data'] = array();

            //add the game to the current console and model
            $telcos[$telcoIndex]['Data Promo'][$dataIndex]['Data'][] = array(
                'Keyword'      => $row['dataKeyword'],
                'Description'  => $row['dataDescription'],
                'Number'       => $row['dataNumber'],
                'Validity'     => $row['dataValidity'],
                'Volume'       => $row['dataVolume'],
                'Price'        => $row['dataPrice']
            );
        }

        if($smsId != $row['smsId']) {
            $smsIndex++;
            $smsId = $row['smsId'];

            //add the model to the console
            $telcos[$telcoIndex]['SMS Promo'][$smsIndex]['SMS Name'] = $row['smsName'];

            //setup the title array
            $telcos[$telcoIndex]['SMS Promo'][$smsIndex]['SMS'] = array();

            //add the game to the current console and model
            $telcos[$telcoIndex]['SMS Promo'][$smsIndex]['SMS'][] = array(
                'Keyword'      => $row['smsKeyword'],
                'Description'  => $row['smsDescription'],
                'Number'       => $row['smsNumber'],
                'Validity'     => $row['smsValidity'],
                'Price'        => $row['smsPrice']
            );
        }
    }

    mysqli_free_result($result);
}

echo json_encode($telcos);

mysqli_close($mysqli);
?> 
```

我真的不知道为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:04:18.260

是的，斯科特是对的，那个片段只是冰山一角，所以我完成了他的建议，消除多余的条目，留下独特的条目。 [https://gist.github.com/jwara/fdc805240cf03027ae20](https://gist.github.com/jwara/fdc805240cf03027ae20) - 代码有点不干净，但需要优化

[http://cl.ly/image/2I3v2O29341J/o](http://cl.ly/image/2I3v2O29341J/o)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:15:19.887

看起来 telcoId 在 telco 表中是唯一的，但在其他表中可以是多个（这是有道理的），不幸的是，如果您尝试将单个 (1) 连接到 multiple1 (2) 到 multiple2 (2) 到 multiple3 (3)，它'd 创建 1 * 2 * 2 * 3 = 12 行，这解释了混乱的 multiple2 和 multiple3。

因此，通过运行单独的查询，首先获取电信公司信息，然后在 telcoCall、telcoData、telcoSMS 上为每个电信公司进行单独的 DB 调用，而不是进行单个数据库调用，您将看到效率降低。

或者，如果您只想要速度并且不关心干净的代码，您可以使用您现在拥有的，但堆叠 if 条件：

编辑1：编辑修复逻辑缺陷，出于某种原因，高斯消除浮现在脑海

```
// Stacking order determined by your SQL ORDER BY: t.telcoName, c.callName, d.dataName, s.smsName

if($telcoId == $row['telcoId']) continue;
//telco stuff...

if($callId == $row['callId']) continue;
//call stuff...

if($dataId == $row['dataId']) continue;
//data stuff...

if($smsId == $row['smsId']) continue;
//sms stuff... 
```

编辑2：另一种需要较少脑力劳动的较慢方式

```
if($telcoId != $row['telcoId']) {
    //telco stuff...
    callArrayTemp = array();
    dataArrayTemp = array();
    smsArrayTemp = array();
}
if(!in_array($row['callId'], callArrayTemp[])) {
    callArrayTemp[] = $row['callId'];
    //call stuff...
}
if(!in_array($row['dataId'], dataArrayTemp[])) {
    dataArrayTemp[] = $row['dataId'];
    //data stuff...
}
if(!in_array($row['smsId'], smsArrayTemp[])) {
    smsArrayTemp[] = $row['smsId'];
    //sms stuff...
} 
```

# node.js - 连续两个以上的流？

> ID：15294929
> 
> 赞同：-1
> 
> 时间：2013-03-08T13:20:44.987
> 
> 标签：node.js

我不能连续两个流在 node.js 中工作。请参阅以下代码：

```
var Stream = require('stream');

var stream1 = new Stream;
stream1.readable = true;

var stream2 = new Stream;
stream2.readable = stream2.writable = true;

var stream3 = new Stream;
stream3.readable = stream3.writeable = true;

var i = 0;

stream2.write = function(data){this.emit('data', data)};
stream3.write = function(data){this.emit('data', data)};

setInterval((function() {
stream1.emit('data', String(i++));
}), 100);

//works:
stream1.pipe(stream2).pipe(process.stdout);

//does not work - why???
//stream1.pipe(stream2).pipe(stream3).pipe(process.stdout); 
```

如何让两个流连续工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:01:06.897

你会觉得很愚蠢，这是一个拼写错误：

```
stream2.readable = stream2.writable = true;
stream3.readable = stream3.writeable = true; 
```

看到区别，一个额外`e`的`stream3.writable`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:08:19.950

尝试[async](https://github.com/caolan/async)（或来自[nmpjs.com](https://npmjs.org/package/async)） - 最流行的 Node.js 模块，用于使用示例和 wiki 处理异步 JavaScript。

# php - php 按预定义的顺序对数组进行排序

> ID：15294932
> 
> 赞同：3
> 
> 时间：2013-03-08T13:20:49.953
> 
> 标签：php, arrays, sorting

我正在努力尝试通过普通函数对数组进行排序，我确定这需要一个自定义比较函数，但仍然会将其丢弃。

我有一个里面有 5 个元素的数组。我希望数组像这样对自身进行排序，arsort 接近但不完全：

4,0,1,2,3

澄清一下，数组的位置如下： $array[0];

我之前实际上没有看过数组比较函数，所以朝着正确的方向推进对解决这个问题最有帮助！

谢谢，

亚当

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-08T13:29:15.453

此方法将使用预定义的键顺序对数组进行排序[`uksort`](http://php.net/manual/en/function.uksort.php)

```
$desiredIndexOrder = array(4 => 1, 0 => 2, 1 => 3, 2 => 4, 3 => 5);

uksort($inputArray, function($a, $b) use ($desiredIndexOrder) {
    return $desiredIndexOrder[$a] > $desiredIndexOrder[$b] ? -1 : 1;
}); 
```

注意`$desiredIndexOrder`数组是`index => desired sort position`格式的。如果您不想以这种格式放置数组，则可以使用以下命令为您构建它：

```
$desiredIndexOrder = array();

foreach ($desiredKeyOrder as $position=>$key) {
    $desiredIndexOrder[$key] = $position + 1;
} 
```

`$desiredKeyOrder`您的键的数组顺序在哪里：`array(4, 0, 1, 2, 3)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:23:47.923

试试这个

```
$array = array('t','r','a','c','k');
$keys = '4,0,1,2,3';

$keyArr = explode(',', $keys);
$sarr = array();

foreach ($keyArr as $key)
{
    $sarr[$key] = $array[$key];
}
print_r($sarr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:26:44.297

试试这个 ：

```
$numbers = array(1,2,3,4,5);
array_unshift($numbers, array_pop($numbers));

echo "<pre>";
print_r($numbers); 
```

输出 ：

```
Array
(
    [0] => 5
    [1] => 1
    [2] => 2
    [3] => 3
    [4] => 4
) 
```

# mysql - 在 MySQL 数据库中保持 TEXT 字段唯一的最佳方法

> ID：15294934
> 
> 赞同：4
> 
> 时间：2013-03-08T13:20:52.683
> 
> 标签：mysql, database, performance, indexing, unique

我想让 TEXT 字段的值在我的 MySQL 表中唯一。

经过小型研究，我发现由于性能问题，每个人都不鼓励在 TEXT 字段上使用 UNIQUE INDEX。我现在要使用的是：

1) 创建另一个字段以包含 TEXT 值的哈希 (md5(text_value))

2) 将此哈希字段设为唯一索引

3) 在查询中使用 INSERT IGNORE

该解决方案是否完整、安全且最优？（在SO上找到它）

有没有更好的方法来实现这个目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:53:01.753

正如我在评论中被问到如何解决这个问题，我会把它写成回复。

处于这种情况表明应用程序设计存在错误。考虑一下这意味着什么。

您有一个文本，您无法提前指定长度，并且可能非常长（最多 64k），您希望保持其唯一性。想象一下，将如此大量的数据拆分为单独的键，并组成一个复合索引来生成唯一性。这就是你想要做的。对于整数，这将是一个包含 16000 个整数的索引，并加入到复合索引中。

进一步考虑 CHARACTER 类型字段（CHAR、VARCHAR、TEXT）通过编码进行解释，这进一步使问题复杂化。

我强烈建议以某种方式拆分数据。这不仅使 DBMS 从合并可变长度字符块中解放出来，而且还可能提供在部分数据上生成复合键的可能性。也许您甚至可以为您的数据找到更好的存储解决方案。

如果您有任何疑问，我建议您发布表格和/或数据库结构并解释 TEXT 字段包含哪些逻辑数据，以及为什么您认为它需要是唯一的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T13:26:13.567

它几乎完成了。有可能会与哈希发生冲突（生日悖论），因此仅 UNIQUE 索引是不够的。

您最好使用散列和比较检查以确保完全安全。

```
SELECT COUNT(*) FROM table
WHERE md5hash = MD5(text)
AND textvalue = text 
```

这可以包含在一个 INSERT 或 UPDATE TRIGGER 中——甚至可能是一个 STORED PROCEDUR 以便于检查。

查看[`this Stack Overflow question`](https://stackoverflow.com/questions/1224113/examples-of-hash-collisions)哈希冲突的示例。

# python - Python Celery socket.error: [Errno 61] Connection refused

> ID：15294938
> 
> 赞同：4
> 
> 时间：2013-03-08T13:21:03.227
> 
> 标签：python, celery, celery-task

I am using Celery 3.0 and have the configuration file like below.

celeryconfig.py

```
BROKER_URL = 'redis://localhost:6379/0'
CELERY_RESULT_BACKEND = 'redis://localhost:6379/0'
CELERY_TASK_SERIALIZER = 'json'
CELERY_RESULT_SERIALIZER = 'json'

CELERY_IMPORTS = ("tasks", )
CELERY_TASK_RESULT_EXPIRES = 300 
```

tasks.py

```
import celery

@celery.task
def function(x,y):
    return x + y 
```

and function.py

```
from tasks import function

print function.delay(4,4).get() 
```

I run the application with following command

```
celeryd --loglevel=INFO --config=celeryconfig 
```

Everything is working great till now. I have redis and celery running and getting answers.

But when I run the function command from another file called parallelizer,

I get the socket error,

```
 socket.error: [Errno 61] Connection refused 
```

My file is like below,

```
from examples.dummy.tasks import function
print function.delay(4,4).get() 
```

Any ideas ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-11-07T08:49:56.970

Had the same problem, ended up realizing that `rabbitmq` and `redis` processes were stoped.

On mac, if those services were installed via homebrew, then you can verify whether those services are running by running following command on terminal,

```
brew services list 
```

can restart services by, (if installed via `brew`)

```
brew services restart rabbitmq
brew services restart redis 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-15T12:00:05.340

I had the same problem and the issue was that I missed this code in my project's __init__.py:

```
from __future__ import absolute_import

# This will make sure the app is always imported when
# Django starts so that shared_task will use this app.
from .celery import app as celery_app 
```

I hope it will be useful to someone out there...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T15:37:07.270

Problem was,

I was running celeryconfig.py under from a different path than my parallelizer.

When I carried the celeryconfig.py to same path with paralellizer it fixed the issue.

# android - 由于垃圾收集，模拟器上的动画缓慢且不稳定

> ID：15294939
> 
> 赞同：2
> 
> 时间：2013-03-08T13:21:04.167
> 
> 标签：android, garbage-collection, android-cursoradapter

我目前正在模拟器上测试我的应用程序，并注意到在我执行动画时发生了很多垃圾收集。

我担心所有这些垃圾收集可能没有必要。

我有一个自定义光标适配器：

```
public class AdapterCursorGrid extends CursorAdapter { 
```

`viewflipper`此适配器使用's填充网格项目。

要重新创建下面的调试，我执行以下操作：

1.  单击第一`viewflipper`页上的项目
2.  这会触发一个 onclick 侦听器并运行`holder.viewFlipper.showNext();`
3.  动画（长度 300 毫秒）开始播放，其中要么不存在，要么效果不佳
4.  点击返回第二`viewflipper`页
5.  这会触发一个 onclick 侦听器并运行`holder.viewFlipper.showPrevious();`
6.  一个动画（长度 300 毫秒）开始播放，如果不是不存在的话，它会非常不稳定。

调试显示如下：

```
/* 
 * Step 1\. Click an item on the first `viewflipper` page
 */
D/dalvikvm(15415): GC_FOR_ALLOC freed 1628K, 20% free 11041K/13767K,    paused 74ms    
D/dalvikvm(15415): GC_CONCURRENT freed 3K, 16% free 11662K/13767K, paused 6ms+16ms    
D/dalvikvm(15415): GC_CONCURRENT freed 454K, 13% free 12081K/13767K, paused 45ms+6ms

/* 
 * Step 4\. Click back on second `viewflipper` page
 */
I/ContentManager(15415): Update() record
I/AdapterCursorGrid(15415): bindView()
D/dalvikvm(15415): GC_FOR_ALLOC freed 1448K, 19% free 11237K/13767K, paused 69ms
D/dalvikvm(15415): GC_CONCURRENT freed 6K, 14% free 11855K/13767K, paused 8ms+11ms
I/AdapterCursorGrid(15415): bindView()
D/dalvikvm(15415): GC_CONCURRENT freed 454K, 11% free 12274K/13767K, paused 14ms+10ms
D/dalvikvm(15415): GC_FOR_ALLOC freed 1241K, 19% free 11231K/13767K, paused 142ms
D/dalvikvm(15415): GC_CONCURRENT freed 1K, 14% free 11855K/13767K, paused 7ms+7ms
D/dalvikvm(15415): GC_CONCURRENT freed 455K, 11% free 12274K/13767K, paused 5ms+12ms
I/AdapterCursorGrid(15415): bindView()
D/dalvikvm(15415): GC_FOR_ALLOC freed 1242K, 19% free 11232K/13767K, paused 69ms
D/dalvikvm(15415): GC_CONCURRENT freed 1K, 14% free 11855K/13767K, paused 5ms+5ms
D/dalvikvm(15415): GC_CONCURRENT freed 455K, 11% free 12274K/13767K, paused 5ms+12ms 
```

从调试中，您可能会发现我在第 4 步中执行了更新。这是对我的内容提供者的调用，并且是在 ui 线程之外完成的。

最后，它`viewflipper`有一个半复杂的布局，它由一个带有各种`ImageView`s 和`TextView`s 浮动的相对布局组成。3`TextView`秒，2/3 `ImageViews`。

一个`ImageView`被填充的例子`bindView`如下：

```
/*
 * Set picture
 */
int pictureColumnIndex = cursor.getColumnIndex(MyTable.TABLE_COLUMN_PICTURE);
byte[] picture = cursor.getBlob(pictureColumnIndex);
Bitmap bitmapPicture = null;
if (!cursor.isNull(pictureColumnIndex) && picture.length > 0) {

    InputStream inputStream = new ByteArrayInputStream(picture);
    bitmapPicture = BitmapFactory.decodeStream(inputStream);
    bitmapPicture = ImageUtils.scaleBitmap(context,bitmapPicture,ConversionUtils.convertDpToPixels(context, mResources.getDimension(R.dimen.grid_item_width_pic_resize)));
    bitmapPicture = ImageUtils.roundedBitmapCorners(bitmapPicture, ConversionUtils.convertDpToPixels(context, 2));

    holder.imageViewPicture.setImageDrawable(new BitmapDrawable(bitmapPicture));
} else {
    holder.imageViewPicture.setImageDrawable(null);
} 
```

我的问题是：

1.  为什么被`bindView`调用超过 1 次（在步骤 4 中被调用 3 次）？
2.  什么可能会创建所有 GC 调用？

# node.js - Express.js：app.locals vs res.locals vs req.session

> ID：15294941
> 
> 赞同：18
> 
> 时间：2013-03-08T13:21:11.057
> 
> 标签：node.js, express, pug

我试图了解何时最好使用以下各项。以下是我的初步理解：

**app.locals** - 适合在应用程序级别存储全局变量。所有用户/会话将看到这些变量的相同值。变量可用于所有视图。

**res.locals** - 适合存储特定请求/响应周期的变量。这些变量仅可用于与响应关联的视图。

**req.session** -- 适合存储与唯一用户会话相关的变量（例如，用户名）。这些变量应该可用于唯一用户/会话的所有视图。

我的具体用例如下：用户运行从 mongodb 检索数据的查询。我现在想要这个查询的结果，它是一个 JSON 数组，可用作所有视图（HTTP 请求）的变量。“存储”结果数组以便每个视图都可以访问它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T15:06:28.297

> 我现在想要这个查询的结果，它是一个 json 数组，可作为所有视图的变量。“存储”结果数组以便每个视图都可以访问它的最佳方法是什么？

当您说“可用于所有视图”时，我假设您的意思是所有 HTTP 请求。如果是这种情况，那么您需要注意 HTTP 是一种无状态协议，并且不提供此功能。您需要为此开发自己的机制。

一种方法是在服务器上缓存此信息（数组）并在每次请求时检索它（例如，从内存而不是从 MongoDB 中检索它）。您将在 cookie 上存储一个会话 ID，并在另一个请求通过时基于此 ID 从缓存中获取它。有几种可用的缓存工具（例如 redis、memcached 等），您可以选择将信息存储在内存中。

您还可以对这些信息（数组本身）进行 cookie，在这种情况下，它将在每个 HTTP 请求上在客户端和服务器之间来回发送，除非数据非常小，否则很可能不是一个好主意。

# php - 无法写入缓存文件

> ID：15294948
> 
> 赞同：-2
> 
> 时间：2013-03-08T13:21:58.517
> 
> 标签：php, symfony, ssh, installation, acl

我收回的一个项目有问题。权利（我认为）存在问题`www-data`；我在一个 sf 2.0 项目中，错误也出现在其他（工作和生产中）网站上。

所以我遵循了官方的 symfony 文档： [http ://symfony.com/doc/2.0/book/installation.html](http://symfony.com/doc/2.0/book/installation.html)

三种解决方案均已成功尝试，setfacl 正在工作，但是当我尝试清除缓存时仍然出现错误。

该项目正在运行，并且在服务器上没有问题。

连那个`umask(0000)`还是什么都不做！

我真的不知道在哪里找什么。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:30:11.747

好吧，这是解决方案：

我不明白 -3 但没关系。正如我所说，我搜索解决方案，并按照这里的文档：http: [//symfony.com/doc/2.0/book/installation.html](http://symfony.com/doc/2.0/book/installation.html)

`www-data`有权利，但我仍然得到错误。

我再次部署了项目，我做到了`php app/check.php`

然后我得到了这个错误：

```
[[ ERROR ]] Checking that the "date.timezone" setting is set: FAILED
        *** Set the "date.timezone" setting in php.ini (like Europe/Paris) *** 
```

然后

```
sudo mv /etc/php5/cli/php.ini /etc/php5/cli/php.ini.bak
sudo ln -s /etc/php5/apache2/php.ini /etc/php5/cli/php.ini 
```

然后我给了一个值，`date.timezone`并且所有的工作都很好用一个新的`php app/check.php`

问题解决了 ！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T13:34:13.563

确保系统中的 Apache 用户被调用`www-data`。如果它有任何其他名称，例如`www`or ，请使用or相应`apache`地更改权限。`setfacl``chmod +a`

此外，使用以下命令手动删除`app/cache`和文件夹内容：`app/logs`

```
rm -rf app/cache/* app/logs/* 
```

# sublimetext2 - Sublime Text 中文本周围的矩形是什么意思？

> ID：15294951
> 
> 赞同：0
> 
> 时间：2013-03-08T13:22:09.673
> 
> 标签：sublimetext2

当我输入一个 Ruby 文件时，我注意到一些矩形在我输入的一些文本周围弹出并且经常停留在那里：

![在此处输入图像描述](../Images/211ae7fbc8365a8f36a20eabf5ab6c98.png)

知道这意味着什么吗？我可以关闭这个烦人的功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:40:16.530

嗯，很好，这些实际上是指示可能的代码错误/语法错误的块。当您的插入符号位于这些块之一中时，它会在 Sublime Text 状态栏中显示错误。

不确定这是原生的，还是由于我安装了一些插件。

# jquery - 通过 jQuery、Ajax 和 ASP.Net 返回数据块的更好方法

> ID：15294953
> 
> 赞同：0
> 
> 时间：2013-03-08T13:22:21.430
> 
> 标签：jquery, asp.net, ajax, webmethod

我有一个 ajax 方法，它根据页面上设置的标准检索数据，这可能是一些到很多记录。我将 ajax 调用更改为一次轮询 25 条记录，而不是返回大型数据集。

我这样做的方式是在我的 WebMethod 上，我根据条件运行 sql，然后将行转换为 JSON 并在第一次轮询时保存到文件中。随后的那些只是从文件加载回类，所以我可以选择下一个 25。我需要在第一次调用时运行一次数据，我不能简单地选择 25，因为该函数需要加载所有记录来执行其他基于它的行动。

我现在的问题是，为一个引发错误的报告返回了一组非常大的数据：使用 JSON JavaScriptSerializer 进行序列化或反序列化期间出错。字符串的长度超过了 maxJsonLength 属性上设置的值。

我已经设置了最大值，所以很明显我需要考虑另一种方法来保存第一次运行的数据并将其分块发送回来，请问有什么想法吗？

编辑：本质上，我正在寻找一种将类保存到文件并在后续请求中检索它的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:49:00.430

我已将 JSON 更改为正常序列化，如下所示：

```
BinaryFormatter bf = new BinaryFormatter();
FileStream fileStream = new FileStream(System.Web.HttpContext.Current.Server.MapPath("path/data" + model.reportId + ".txt"), FileMode.Create);
bf.Serialize(fileStream, preview);
fileStream.Close(); 
```

并反序列化：

```
BinaryFormatter bf = new BinaryFormatter();
FileStream fileStream = new FileStream(System.Web.HttpContext.Current.Server.MapPath("path/data" + model.reportId + ".txt"), FileMode.Open);
fileStream.Seek(0, SeekOrigin.Begin);
DataPreview savedPreview = (DataPreview)bf.Deserialize(fileStream);
fileStream.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:10:37.983

在 ASP.NET 中，您可以访问所有强大的[`cache`](http://msdn.microsoft.com/en-us/library/xsbfdd8c%28v=vs.71%29.aspx)对象。

您可以轻松地创建记录集，然后将其添加到缓存中，如下所示：

```
HttpContext.Current.Cache.Insert("UniqueidentifierForObject", TheRecordSetObject, Nothing, DateTime.Now.AddHours(2), Cache.NoSlidingExpiration, CacheItemPriority.NotRemovable, Nothing) 
```

这会将对象插入缓存中，绝对过期时间为 2 小时。如果你环顾四周，有很多关于缓存的好文档，所以我不会在这里深入探讨。重要的是还要注意缓存是如何访问的，因为在 Web 方法或服务中不会正常`httpContext`，因此您需要使用扩展引用。

然后在随后的数据调用中，您可以通过调用将对象从缓存中取出：

```
Dataset theDataset = HttpContext.Current.Cache("UniqueidentifierForObject");
if(theDataset == null){
    //CallYour load function because the cahce did not have your object
}else{
    //Do you pull for the chunk of data.
} 
```

这样，您只需调用一次数据库，就可以在需要时从集合中获取记录。

同样重要的是要注意 ASP.NET 在 Web 方法和服务中的序列化方面非常出色。[您通常不必序列化或反序列化从 web 方法和服务中传递的数据和代码](http://encosia.com/asp-net-web-services-mistake-manual-json-serialization/)。它通常是为你完成的，再次尝试可能会导致各种奇怪的行为。

# python - 将 UTF-8 作为二进制 0 和 1 的字符串转换为代码点

> ID：15294955
> 
> 赞同：1
> 
> 时间：2013-03-08T13:22:30.060
> 
> 标签：python, unicode, utf-8

如果您有一串位，如果`0`s 和`1`s 的字符串采用 utf-8 编码，您如何将其转换为正确的代码点。

例如：

```
accented_a_part1 = "100001"
accented_a_part2 = "00011"

accented_a_int = int(accented_a_part2 + accented_a_part1, 2)
print(accented_a_int),          # => 225
print(unichr(accented_a_int))   # => á    http://www.unicode.org/charts/PDF/U0080.pdf

accented_a_in_utf8 = "110" + accented_a_part2 + "10" + accented_a_part1
accented_a_in_utf8_as_raw_int = int(accented_a_in_utf8, 2)
print(accented_a_in_utf8_as_raw_int),        # => 50081 (not the codepoint you want)
print(unichr(accented_a_in_utf8_as_raw_int)) # => 쎡    (and therefore not the character you want) 
```

[UTF-8 规范](https://www.rfc-editor.org/rfc/rfc3629#page-4 "UTF-8 规范")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:36:32.300

要将文字十六进制转换为 Unicode：

```
>>> h = '16 03 01 00 e3 01'
>>> h.replace(' ','').decode('hex')
'\x16\x03\x01\x00\xe3\x01'
>>> h.replace(' ','').decode('hex').decode('utf8')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "c:\Python27\lib\encodings\utf_8.py", line 16, in decode
    return codecs.utf_8_decode(input, errors, True)
UnicodeDecodeError: 'utf8' codec can't decode byte 0xe3 in position 4: unexpected end of data
>>> 
```

如果十六进制是实际的 utf8，你最终会得到一个 Unicode 字符串：

```
>>> h = 'c3 a1'
>>> u = h.replace(' ','').decode('hex').decode('utf8')
>>> u
u'\xe1'
>>> print u
á 
```

# javascript - 在 canJs 中重新打开课程

> ID：15294960
> 
> 赞同：1
> 
> 时间：2013-03-08T13:22:38.840
> 
> 标签：javascript, canjs, canjs-construct

随着类变得越来越大，它变得越来越难以维护。所以我很想把我的一些课程分成多个文件。在文件中定义类，例如：

```
var animal = can.Construct({
  someClassMethod: function() {...}
}, {
  somePrototypemethod: function() {...}
}); 
```

然后稍后在一个单独的文件中，我想*重新打开*这个类，并向它添加新的类方法/属性和原型方法/属性。

这在canJS中可能吗？如果不是，应该有什么可能的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T15:58:06.437

您始终可以向原型和构造函数添加属性和方法。这就是 JavaScript 的工作原理。所以只要你仍然可以访问`animal`你就可以做到

```
animal.anotherClassMethod = function() {}
animal.prototype.anotherPrototypeMethod = function() 
```

在另一个文件中。然而，让类定义变得太大通常是他们做得太多的问题。如果它们太大而无法在一个文件中维护（这意味着 2000 多行代码），除了将它们拆分之外，肯定还有一种更好的重构方法。将其拆分为单独的文件的一个缺点肯定是可能很难知道什么功能在哪里。

# android - 仅具有 https 证书的 Web 服务 - Android 上禁止 403

> ID：15294961
> 
> 赞同：0
> 
> 时间：2013-03-08T13:22:45.673
> 
> 标签：android, wcf, web-services, ssl, xamarin.android

我正在尝试通过 https 将我的 android 应用程序连接到我的 web 服务，并且我不断收到

System.Net.WebException：处理 Web 请求时出错：状态码 403（禁止）：禁止

浏览器的网络服务似乎很好。我还在 Android 中安装了证书，但我仍然收到浏览器的警告。

这是我的方法

```
public static string HttpSoap2()
{
    var binding = new BasicHttpBinding () {
        Name= "basicHttpBinding",
        MaxReceivedMessageSize = 67108864,
    };

    binding.ReaderQuotas = new System.Xml.XmlDictionaryReaderQuotas() {
        MaxArrayLength = 2147483646,
        MaxStringContentLength = 5242880,
    };

    var timeout = new TimeSpan(0,1,0);
    binding.SendTimeout= timeout;
    binding.OpenTimeout = timeout;
    binding.ReceiveTimeout = timeout;

    Service1Client client;

    client = new Service1Client(binding, new EndpointAddress(url));

    // This will allow us to ignore the validation of the server-side certificate while maintaining
    // transport encryption. 
    System.Net.ServicePointManager.ServerCertificateValidationCallback += 
    (se, cert, chain, sslerror) => { return true; };

    return client.Greeting ("LOL");
} 
```

这是我的网络配置

```
<?xml version="1.0"?>
<configuration>

  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5"/>
  </system.web>
  <system.serviceModel>
    <bindings>
      <basicHttpsBinding>
        <binding name="myBinding">
          <security mode="Transport">
            <transport clientCredentialType="Certificate"/>
          </security>
        </binding>
      </basicHttpsBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="myBehaviour">
          <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
          <serviceMetadata httpsGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false        before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
        <!--For debugging purposes set the includeExceptionDetailInFaults attribute to true-->
      </serviceBehaviors>
    </behaviors>
    <protocolMapping>
        <add binding="basicHttpsBinding" scheme="https" />
    </protocolMapping>    
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  <services>
    <service name="MyHelloService.Service1" behaviorConfiguration="myBehaviour">
      <host>
        <baseAddresses>
          <add baseAddress="https://10.XXX.XX.XX:443"/>
        </baseAddresses>
      </host>
      <endpoint address="" 
                binding="basicHttpsBinding" 
                bindingConfiguration="myBinding" 
                contract="MyHelloService.IService1" />
      <endpoint address="Service1.svc/mex"
                binding="mexHttpsBinding"
                contract="IMetadataExchange" />
    </service>
  </services>       
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true"/>
  </system.webServer>

</configuration> 
```

我忘记了什么吗？

**更新**
~~看起来我的证书没有保持安装~~ 我上传了一个从我的自签名导出的 pfx，然后我将它发送到 sdcard 并尝试打开浏览器并从 sdcard 安装它，但我得到这个 413.16 您的客户端证书不受信任或无效

同时，我已经尝试更改服务以使用凭据来查看是否会发生变化。一切都保持不变

# asp.net-mvc - 使用 Handler 在 MVC 中处理 Web API 异常

> ID：15294963
> 
> 赞同：0
> 
> 时间：2013-03-08T13:23:05.753
> 
> 标签：asp.net-mvc, error-handling, asp.net-web-api

我对 MVC 4 的异常处理有一些疑问。

我已经实现`HandleErrorAttribute`并派生了一个要自定义的新属性。它真的很好用；但我不想每次都重定向用户自定义错误页面。

我在 Actions 中遇到的一些错误是从 Web API 抛出的，我想在当前页面向用户展示它们。例如，如果用户想要创建一条记录，但 WebAPI 因模型状态无效而引发异常，则异常详细信息会以友好的方式显示在 Create 视图中。

但是 HandleErrorAttribute 默认重定向 Error.cshtml。

我可以处理 Actions 中的所有异常，但我认为还有另一种方法。

我也跟着[http://www.prideparrot.com/blog/archive/2012/5/exception_handling_in_asp_net_mvc](http://www.prideparrot.com/blog/archive/2012/5/exception_handling_in_asp_net_mvc)来实施`HandleErrorAttribute`

```
 public class CustomHandleErrorAttribute : HandleErrorAttribute {
        private readonly ILogger _logger;

        public CustomHandleErrorAttribute() {
            _logger = new NLogger(typeof(CustomHandleErrorAttribute));
        }

        public override void OnException(ExceptionContext filterContext) {
            if(filterContext.ExceptionHandled || !filterContext.HttpContext.IsCustomErrorEnabled) {
                return;
            }

            if(new HttpException(null, filterContext.Exception).GetHttpCode() != 500) {
                return;
            }

            if(!ExceptionType.IsInstanceOfType(filterContext.Exception)) {
                return;
            }

            // if the request is AJAX return JSON else view.
            if(filterContext.HttpContext.Request.Headers["X-Requested-With"] == "XMLHttpRequest") {
                filterContext.Result = new JsonResult {
                    JsonRequestBehavior = JsonRequestBehavior.AllowGet,
                    Data = new {
                        error = true,
                        message = filterContext.Exception.Message
                    }
                };
            }
            else {
                var controllerName = (string)filterContext.RouteData.Values["controller"];
                var actionName = (string)filterContext.RouteData.Values["action"];
                var model = new HandleErrorInfo(filterContext.Exception, controllerName, actionName);
                filterContext.Result = new ViewResult {

                    ViewName = View,
                    MasterName = Master,
                    ViewData = new ViewDataDictionary<HandleErrorInfo>(model),
                    TempData = filterContext.Controller.TempData
                };
            }

            _logger.Error(filterContext.Exception.Message, filterContext.Exception);

            filterContext.ExceptionHandled = true;
            filterContext.HttpContext.Response.Clear();
            filterContext.HttpContext.Response.StatusCode = 500;

            filterContext.HttpContext.Response.TrySkipIisCustomErrors = true;
        }
    } 
```

我通过 HttpClient 和包装类进行了 Web API 调用。例如 Get 请求如下所示。

```
 public async Task<BrandInfo> Create(BrandInfo entity) {
            using(var apiResponse = await base.PostAsync(BaseUriTemplate, entity)) {

                if(apiResponse.IsSuccess) {
                    return apiResponse.Model;
                }

                throw new HttpApiRequestException(
                    string.Format(HttpRequestErrorFormat, (int)apiResponse.Response.StatusCode, apiResponse.Response.ReasonPhrase),
                    apiResponse.Response.StatusCode, apiResponse.HttpError);
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T21:41:05.367

构建一个将包装 HttpClient 并使用它来调用您的 Web API 的类。从 Web API 返回不同的 HTTP 状态代码，用于您希望发生重定向的情况（即 500 - 内部服务器错误，或 401 - 未经授权）和您希望显示模型状态错误的情况（400 - 我的选择是错误的请求）。处理包装盒中的状态代码以：

a) 如果您想要重定向时出现错误（从 Web API 接收到 500 或 401），则抛出适当的异常

b）当您不想要重定向（从 Web API 收到 400）时，只需从您的包装类返回一些可以在客户端显示的响应模型

在您的控制器中，假设您将从 HTTP 包装类返回响应模型，因为异常将导致它永远不会返回到控制器（您将全局处理它并进行重定向）。

如果您需要代码示例，我可以提供一个，但我认为您更多的是寻找一般概念而不是具体代码。

编辑：

在 Web API 方面：

```
public class ModelValidationFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        if (!actionContext.ModelState.IsValid)
        {
            Dictionary<string,string> errors = new Dictionary<string, string>();
            foreach (KeyValuePair<string, ModelState> keyValue in actionContext.ModelState)
            {
                errors[keyValue.Key] = keyValue.Value.Errors.Select(e => e.ErrorMessage).FirstOrDefault();
            }
            actionContext.Response = actionContext.Request.CreateResponse(HttpStatusCode.BadRequest, new ApiError(ApiErrorCode.ModelBindingError, errors));
        }
    }
} 
```

在您的 global.asax 中：

```
 GlobalConfiguration.Configuration.Filters.Add(new ModelValidationFilterAttribute()); 
```

自定义 ApiError：

```
public class ApiError
{
    public ApiErrorCode ErrorCode { get; set; }
    public string ErrorMessage { get; set; }
    public Dictionary<string, string> ModelStateErrors;
} 
```

在 MVC 方面，包装器 HttpClient 包装器类可能如下所示：

```
public class RPCService
{

    public async Task<RPCResponseModel<T>> GetAsync<T>(string controller, string action, Dictionary<string, string> queryParams, Dictionary<string, string> headers)
    {
        using (HttpClient client = new HttpClient())
        {
            client.BaseAddress = new Uri("your host goes here");
            client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json")); /// Tell RPC to return data as json
            if (headers != null) foreach (var header in headers) client.DefaultRequestHeaders.Add(header.Key, header.Value);
            string query = Query(queryParams);
                var response = await client.GetAsync(controller + "/" + action + query);
                if (response.IsSuccessStatusCode)
                {
                    return new RPCResponseModel<T>
                    {
                        StatusCode = response.StatusCode,
                        Data = await response.Content.ReadAsAsync<T>()
                    };
                }
                else if(response.StatusCode == HttpStatusCode.BadRequest)
                {
                    return new RPCResponseModel<T>
                    {
                        Error = await response.Content.ReadAsAsync<RPCErrorModel>(),
                        StatusCode = response.StatusCode
                    };
                }
else
{
    /// throw your exception to handle globally
}
        }
    } 
```

响应模型将是：

```
public class RPCErrorModel
{
    public int Code { get; set; }
    public string Message { get; set; }
    public Dictionary<string, string> ModelErrors;
}

public class RPCResponseModel
{
    public RPCErrorModel Error { get; set; }
    public HttpStatusCode StatusCode { get; set; }
}

public class RPCResponseModel<T> : RPCResponseModel
{
    public T Data { get; set; }
} 
```

# c - Windows 2008R2 CA 和 OpenSSL CSR：解析 CSR 时出错 ASN1 遇到错误值

> ID：15294964
> 
> 赞同：2
> 
> 时间：2013-03-08T13:23:07.047
> 
> 标签：c, openssl, certificate, x509, csr

我正在使用 OpenSSL C API 来构建 CSR。代码如下：

```
static void seedPRNG() {

const int openSSLseedsize = 128;

uint8_t *openSSLseed = NULL;
openSSLseed = malloc(openSSLseedsize * sizeof(uint8_t));
//printf("%d\n\n", openSSLseedsize);

// random number generator
SecRandomCopyBytes(kSecRandomDefault, openSSLseedsize, openSSLseed);

for (unsigned i = 0; i < openSSLseedsize; i++) {
    printf("%d", openSSLseed[i]);
}
printf("\n\n\n\n");
//seed openSSL random
RAND_seed(openSSLseed, 128);

}

// Parameter settings for this cert
//
#define RSA_KEY_SIZE (2048)
#define ENTRIES 3

// array of entries to assign to cert
struct entry {
char *key;
char *value;
};

struct entry entries[ENTRIES] =
{
{"emailAddress", "tomgrant@example.com"},
{"commonName", "internal.example.com"},
{"countryName", "GB"},
};

// Generate CSR

int generateCSR() {

int i;
RSA *rsakey;
X509_REQ *req;
X509_NAME *subj;
EVP_PKEY *pkey;
EVP_MD *digest;
FILE *fp;

// set up OpenSSl
OpenSSL_add_all_algorithms();
ERR_load_CRYPTO_strings();

// seed oppenssl's prng
seedPRNG();

// generate RSA key (no callback for progress - it's quick enough)
// RSA_F4 is 0x10001 (or 65537) for the exponent.
// RSA docs say exponent should be either 3, 5, 17, 257 or 65537 i.e. prime numbers. See here for further info:
// http://security.stackexchange.com/questions/2335/should-rsa-public-exponent-be-only-in-3-5-17-257-or-65537-due-to-security-c

rsakey = RSA_generate_key(RSA_KEY_SIZE, RSA_F4, NULL, NULL);

if (rsakey == NULL) {
    fatal("Could not create RSA key");
}

// Create EVP ("Envelope Encryption" apparently...) object to hold our rsakey
// generate private key
if (!(pkey = EVP_PKEY_new()))
   fatal("Could not create EVP object");
// assign the rsa key to EVP object
if (!(EVP_PKEY_set1_RSA(pkey, rsakey)))
    fatal("Could not assign RSA key to EVP object");

// create request object
if (!(req = X509_REQ_new()))
    fatal("Failed to create X509_REQ object");

// set the public key
X509_REQ_set_pubkey(req, pkey);

// create and fill in subject object
if (!(subj = X509_NAME_new()))
    fatal("Failed to create X509_NAME object");

for (i = 0; i < ENTRIES; i++)
{
    // create nid for every entry
    int nid; // ASN.1 numeric ID - ASN.1 = Abstract Syntax Notation One. Formal notation used to describe data transmitted by telecommunications protocols.
             // The NID is a unique internal ID assigned to every object. 

    X509_NAME_ENTRY *ent;

    if ((nid = OBJ_txt2nid(entries[i].key)) == NID_undef)
    {
        fprintf(stderr, "Error finding NID for %s\n", entries[i].key);
        fatal("Error on lookup");
    }
    if (!(ent = X509_NAME_ENTRY_create_by_NID(NULL, nid, MBSTRING_ASC, (unsigned char*)entries[i].value, -1)))
        fatal("Error creating Name entry from NID");

    if (X509_NAME_add_entry(subj, ent, -1, 0) != 1)
        fatal("Error adding entry to Name");

}

if (X509_REQ_set_subject_name(req, subj) != 1)
    fatal("Error adding subject to request");

// request is filled in and contains our generated public key
// now sign it
digest = (EVP_MD *)EVP_sha1();

if (!(X509_REQ_sign(req, pkey, digest)))
    fatal("Error signing request");

// write output files
//
NSString *docDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
// append file name
NSString *crtPath = [docDirectory stringByAppendingString:@"/example.crt"];
NSLog(@"crtPath = %@", crtPath);

if (!(fp = fopen([crtPath UTF8String], "w")))
    fatal("Error writing to request file");
if (PEM_write_X509_REQ(fp, req) != 1)
    fatal("Error writing request");
fclose(fp);

NSString *keyPath = [docDirectory stringByAppendingString:@"/example.key"];
NSLog(@"keyPath = %@", keyPath);
if (!(fp = fopen([keyPath UTF8String], "w")))
    fatal("Error writing to private key file");
if (PEM_write_PrivateKey(fp, pkey, NULL, NULL, 0, 0, NULL) != 1)
    fatal("Error while writing private key");
fclose(fp);

 X509_REQ_print_fp(stdout, req);

EVP_PKEY_free(pkey);
X509_REQ_free(req);

return 0;

} 
```

这将创建一个 CSR 并输出私钥。我可以使用在线 CSR 检查器来验证 CSR，它会到处打勾，表示它是正确的。我正在使用 Windows 2008R2 CA 粘贴 base64 CSR。但是，当我提交请求时，Windows 框会返回以下错误：

**您的请求 ID 为 0。处置消息是“错误解析请求 ASN1 错误标记值。0x8009310b (ASN: 267)”。**

使用 open SSL 附带的 mkreq.c 示例代码生成 CSR 时也会发生这种情况。

有没有人遇到过这个？我的在线研究只发现人们从 CA（GoDaddy 等）颁发的时髦证书中得到这个错误。

非常感激任何的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-26T19:47:19.797

（由 OP 在编辑中回答。请参阅[没有答案的问题，但问题已在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 好吧 - 我和我的同事终于找到了解决方案。
> 
> 查看 ASN.1 表示（使用 openssl asn1parse），我们注意到 BAD CSR 具有以下表示：

```
8:d=2  hl=2 l=   0 prim: INTEGER           :00 
```

> 注意 l = 0（我猜这意味着长度）。然后是一个好的企业社会责任：

```
8:d=2  hl=2 l=   1 prim: INTEGER           :00 
```

> 注意 l = 1
> 
> 这可以通过设置 CSR 的版本号来解决（RFP 说它应该设置为 0）。
> 
> 所以 - 使用 X509_REQ_set_version(req, 0); 有固定的东西和服务器 2008R2 给了我我心爱的身份！

# scala - 是否可以改进 Scala 中部分应用类型的类型推断？

> ID：15294966
> 
> 赞同：8
> 
> 时间：2013-03-08T13:23:22.080
> 
> 标签：scala, type-inference, scalaz

我正在尝试改进`traverse_`以下代码中函数的类型推断：

```
import scala.language.higherKinds

trait Applicative[AF[_]] {

  def ap[A, B](a: AF[A])(f: AF[A => B]): AF[B]

  def pure[A](a: A): AF[A]

  def fmap[A, B](a: AF[A])(f: A => B): AF[B]

}

def traverse_[AP[_]: Applicative, A](xs: Iterable[A])(f: A => AP[Unit]): AP[Unit] = {
  val ap = implicitly[Applicative[AP]]
  (xs :\ ap.pure(())) { (x, acc) =>
    val apFunc = ap.fmap(f(x))(a => identity[Unit] _)
    ap.ap(acc)(apFunc)
  }
}

implicit def optionAp = new Applicative[Option] {

  def ap[A, B](a: Option[A])(f: Option[A => B]): Option[B] = f flatMap (a map _)

  def pure[A](a: A) = Some(a)

  def fmap[A, B](a: Option[A])(f: A => B) = a map f

}

implicit def eitherAp[L] = new Applicative[({type l[x]=Either[L, x]})#l] {

  def ap[A, B](a: Either[L, A])(f: Either[L, A => B]): Either[L, B] = f.right flatMap (a.right map _)

  def pure[A](a: A) = Right(a)

  def fmap[A, B](a: Either[L, A])(f: A => B) = a.right map f

}

// silly, but compiles
val x = traverse_(1 to 10) {
  case 5 => None
  case _ => Some(())
}
println(x)

// also silly, but does not compile
val y = traverse_(1 to 10) {
  case 5 => Left("x")
  case _ => Right(())
}
println(y) 
```

运行上述给出：

```
/Users/lodea/tmp/traverse.scala:49: error: no type parameters for method traverse_: (f: Int => AP[Unit])(implicit evidence$1: this.Applicative[AP])AP[Unit] exist so that it can be applied to arguments (Int => Product with Serializable with scala.util.Either[String,Unit])
 --- because ---
argument expression's type is not compatible with formal parameter type;
 found   : Int => Product with Serializable with scala.util.Either[String,Unit]
 required: Int => ?AP

val y = traverse_(1 to 10) {
                 ^
/Users/lodea/tmp/traverse.scala:49: error: type mismatch;
 found   : Int => Product with Serializable with scala.util.Either[String,Unit]
 required: Int => AP[Unit]
val y = traverse_(1 to 10) {
                           ^
two errors found 
```

为了让它编译，我必须指定类型参数`traverse_`：

```
val y = traverse_[({type l[x]=Either[String, x]})#l, Int](1 to 10) {
  case 5 => Left("x")
  case _ => Right(())
} 
```

有没有办法可以重组`traverse_`或代码的任何其他部分来使类型推断起作用？当类型开始变得更复杂时，这会很快变得烦人。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T16:49:09.993

正如 Ben James 所指出的，您正在寻找 Miles Sabin 的[`Unapply`把戏](http://halcat0x15a.github.com/scalaz/core/target/scala-2.9.2/api/scalaz/Unapply.html)。[这里](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/Unapply.scala)是scalaz repo。[在这里](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/Traverse.scala#L49) `traverseU`，在它的帮助下实现。[以下](https://github.com/scalaz/scalaz/blob/scalaz-seven/example/src/main/scala/scalaz/example/UnapplyInference.scala)是一些示例用法。这是我针对您的特定情况的粗略（希望是正确的）实现（注意：我已将您重命名`Applicative`为`ApplicativeTest`不干涉`Applicative`，在 scalaz 中定义）：

```
scalaz> core/console
[warn] Credentials file /home/folone/.ivy2/.credentials does not exist
[info] Starting scala interpreter...
[info] 
Welcome to Scala version 2.9.2 (OpenJDK 64-Bit Server VM, Java 1.7.0_15).
Type in expressions to have them evaluated.
Type :help for more information.

scala> :paste
// Entering paste mode (ctrl-D to finish)

import scalaz._

trait ApplicativeTest[AF[_]] {
  def ap[A, B](a: AF[A])(f: AF[A => B]): AF[B]
  def pure[A](a: A): AF[A]
  def fmap[A, B](a: AF[A])(f: A => B): AF[B]
}

def traverse_[AP, A](xs: Iterable[A])(f: A => AP)(implicit G: Unapply[ApplicativeTest, AP]): G.M[Unit] = {
  (xs :\ G.TC.pure(())) { (x, acc) =>
    val apFunc = G.TC.fmap(G(f(x)))(a => identity[Unit] _)
    G.TC.ap(acc)(apFunc)
  }
}

implicit def optionAp = new ApplicativeTest[Option] {
  def ap[A, B](a: Option[A])(f: Option[A => B]): Option[B] = f flatMap (a map _)
  def pure[A](a: A) = Some(a)
  def fmap[A, B](a: Option[A])(f: A => B) = a map f
}

implicit def eitherAp[L]: ApplicativeTest[({type l[x]=Either[L, x]})#l] =
  new ApplicativeTest[({type l[x]=Either[L, x]})#l] {
    def ap[A, B](a: Either[L, A])(f: Either[L, A => B]): Either[L, B] = f.right flatMap (a.right map _)
    def pure[A](a: A) = Right(a)
    def fmap[A, B](a: Either[L, A])(f: A => B) = a.right map f
  }

implicit def iterAp = new ApplicativeTest[Iterable] {
  def ap[A, B](a: Iterable[A])(f: Iterable[A ⇒ B]): Iterable[B] = f flatMap(a map _)
  def pure[A](a: A) = Iterable(a)
  def fmap[A, B](a: Iterable[A])(f: A ⇒ B) = a map f
}

// Exiting paste mode, now interpreting.

import scalaz._
defined trait ApplicativeTest
traverse_: [AP, A](xs: Iterable[A])(f: A => AP)(implicit G: scalaz.Unapply[ApplicativeTest,AP])G.M[Unit]
optionAp: java.lang.Object with ApplicativeTest[Option]{def pure[A](a: A): Some[A]}
eitherAp: [L]=> ApplicativeTest[[x]Either[L,x]]
iterAp: java.lang.Object with ApplicativeTest[Iterable]

scala> val x = traverse_(1 to 10) {
     |   case 5 => None
     |   case _ => Some(())
     | }
x: Option[Unit] = None

scala> val y = traverse_(1 to 10) {
     |   case 5 => Left("x"): Either[String, Unit]
     |   case _ => Right(())
     | }
y: Either[String,Unit] = Left(x) 
```

我仍然不知道如何使它推断`Either[String, Unit]`，而不是`Product with Serializable with scala.util.Either[String,Unit]`在其中一种情况下严格指定类型，就像我在这一行中所做的那样`case 5 => Left("x"): Either[String, Unit]`：

# wso2 - 如何以编程方式生成有效的访问令牌以访问 wso2 apimanager 网关

> ID：15294967
> 
> 赞同：1
> 
> 时间：2013-03-08T13:23:22.823
> 
> 标签：wso2, token

我需要一种方法来获取访问令牌以以编程方式访问 api（通过 apimanager 1.3.0 网关），而不是使用 apiman 商店应用程序。

我按照[http://docs.wso2.org/wiki/display/AM130/Subscribing+to+an+API](http://docs.wso2.org/wiki/display/AM130/Subscribing+to+an+API) 案例中的说明使用 API Manager 登录 API

但我总是遇到 API 访问失败

请注意：在[http://docs.wso2.org/wiki/display/AM130/Subscribing+to+an+API](http://docs.wso2.org/wiki/display/AM130/Subscribing+to+an+API)中使用 API Manager 控制台可以完美运行，但我需要一种方法来从应用程序中执行相同的功能。

错误：您收到授权错误：

API访问失败

# twitter-bootstrap - 您如何管理响应式网站的 Bootstrap LESS 文件？

> ID：15294970
> 
> 赞同：0
> 
> 时间：2013-03-08T13:23:27.890
> 
> 标签：twitter-bootstrap, responsive-design, less

这是一个笼统的问题。我正在使用必须响应的 Bootstrap 构建一个网站。我想知道在 LESS/css 上工作的“标准”程序是什么。

首先，您为标准站点（用于桌面显示）创建 css 规则？`responsive-767px-max.less`其次，您是否在适当的 LESS 文件（等）中添加了智能手机或平板电脑的特定规则？

问题是桌面和智能手机显示必须有许多规则**！**然后我应该在每个`responsive-xxx.less`文件中复制这些规则。我认为这不是太舒服。也许公共规则必须写在`bootstrap.less`@import 规则下面？

简而言之，我很想知道您是如何管理这些事情的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:00:42.280

In theory, Responsive is more bottom-up than what you describe.

1.  First, you make sure your site/app works in the most barebones browser, with minimal support of CSS and JS.
2.  Then you build up from there, adding "icing" with greater browser capabilities and window size.

It also about not *just* using the breakpoints, but also making some things scale sensible in size, width, height, as the window is resized.

In practice, just by using Bootstrap, you're gaining the above capabilities. You shouldn't have to do too much more other than make some decisions in the media queries for certain components to show or hide, like you describe.

*   Include the responsive stylesheet
*   Use the fluid versions of containers and rows, like:

Here's the relevant Bootstrap docs:

*   [http://twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)
*   [http://twitter.github.com/bootstrap/examples/fluid.html](http://twitter.github.com/bootstrap/examples/fluid.html)

# tfs - TFS 分支：管理小型开发

> ID：15294973
> 
> 赞同：0
> 
> 时间：2013-03-08T13:23:32.613
> 
> 标签：tfs, branch

我有一个关于如何管理分支和小型开发的问题？

目前，我们正在按功能使用分支，但在某些情况下，我们有需要一两天开发的小型开发？

解决办法是什么 ？创建一个临时分支？做樱桃采摘吗？

对于“阅读 tfs 分支指南”的答案，我已经阅读了此文档。

谢谢和对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:53:14.057

为什么要创建分支？这是在集成到 Main 之前“测试”更改的地方吗？您可以直接在 Main 中编写代码并在那里进行测试吗？

如果这是不可能的，那么为工作创建一个分支，在那里做工作，保持正向集成将 Main 合并到这个工作分支中。当更改准备好发布时，反向集成将 Work 分支合并回 Main。然后，您可以删除 Work 分支以及与之关联的任何构建。在 Main 中查看文件的历史记录时，这仍会显示变更集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:02:31.497

对于小型开发，您最好在现有分支中创建一个新标签，而不是仅仅为了添加一个小功能而进行分支。

# c# - C# 中的 UserControl 与 CustomControl

> ID：15294974
> 
> 赞同：5
> 
> 时间：2013-03-08T13:23:34.287
> 
> 标签：c#, winforms, user-controls, custom-controls

C#中使用WindowsForm的UserControl和CustomControl有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T13:32:53.987

Windows 应用程序和 Web 应用程序都有自定义和用户控件。Windows 应用程序控件具有 .cs 扩展名。

一般来说，用户控件更容易创建。您可以将现有的控件（如文本框、标签等）拖到表单上。自定义控件通常更难以创建（耗时），但提供了更大的灵活性、可定制性和集成性。

***简而言之，主要区别在于：***

用户控件由现有控件组成。由于这个事实，它有时也被称为复合控件。一个典型的例子是登录表单。表单和所有逻辑都包含在这个“可重用”用户控件中。

自定义控件是您创建的控件。在 Windows 窗体中，这意味着重写 OnPaint 方法，如上面的示例所示。自定义控件没有与用户控件相同级别的设计时支持（即拖放现有控件等）。自定义控件通常被认为是可重用的组件，可以添加到 Visual Studio 的工具箱中，因此它们通常不特定于您的业务或代码。

这是一个包含一些代码示例的不同形式的链接：http: [//samples.gotdotnet.com/quickstart/winforms/doc/WinFormsCreatingControls.aspx](http://samples.gotdotnet.com/quickstart/winforms/doc/WinFormsCreatingControls.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T13:33:04.853

如果要将多个控件分组到一个组中，则可能需要使用 UserControl。也就是说，创建一组控件。当您想在项目的不同部分使用相同的控制组时，通常会这样做。

当您想要扩展现有控件时，您可能想要使用 CustomControl。该控件编译在一个 DLL 文件中，您可以从不同的项目中引用该文件。

# batch-file - 打开文本文件的批处理脚本

> ID：15294984
> 
> 赞同：0
> 
> 时间：2013-03-08T13:23:57.593
> 
> 标签：batch-file

我有一个批处理脚本来读取文本文件。如果文件名不包含特殊字符，它工作正常，但如果文件名包含特殊字符，它会失败。

前文件名：`localhost_access_log.2013-03-08`

代码：

```
for /f "skip=%* tokens=*" %%b in (Y:\Program Files\Apache Software Foundation\Tomcat 7.0\logs\localhost_access_log.2013-03-08.txt) do (
    echo "Data Copied"
) 
```

请帮助我如何阅读这些文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:33:27.053

在命令行中键入`help for`以获取有关 for 命令的文档（我承认这很难阅读），然后您将其隐藏在大约一半的位置：

```
For file names that contain spaces, you need to quote the filenames with
double quotes.  In order to use double quotes in this manner, you also
need to use the usebackq option, otherwise the double quotes will be
interpreted as defining a literal string to parse. 
```

因此，您的代码应更改为：

```
for /f "usebackq skip=%* tokens=*" %%b in ("Y:\Program Files\Apache Software Foundation\Tomcat 7.0\logs\localhost_access_log.2013-03-08.txt") do (
    echo "Data Copied"
) 
```

# typo3 - TYPO3 扩展“新闻”：流体模板上的自定义字段

> ID：15294989
> 
> 赞同：2
> 
> 时间：2013-03-08T13:24:25.170
> 
> 标签：typo3, fluid

我正在使用扩展新闻系统“新闻”，并且在更改模板时，我注意到虽然我可以使用类似`{newsItem.datetime}`or的东西`{newsItem.uid}`，但我不能将它与我在扩展表格时创建的自定义字段一起使用`tx_news_domain_model_news`，比如`{newsItem.mycustomfield}`

**编辑**：我已经被指向[这个 url](http://docs.typo3.org/typo3cms/extensions/news/Main/Tutorial/ExtendingNews/Index.html#extend-the-classes)并且我已经按照说明进行操作，但是它不起作用。这是我的代码

新闻.php

```
<?php
    class Tx_WedoExtendnews_Domain_Model_News extends Tx_News_Domain_Model_News {

        /**
        * @var string
        */
        protected $txWedoextendnewsLocation;

        public function getTxWedoextendnewsLocation() {
            return "this";
            return $this->txWedoextendnewsLocation;
        }
        public function getWedoextendnewsLocation() {
            return "that";
            return $this->txWedoextendnewsLocation;
        }
    }
?> 
```

由于我没有得到任何东西，我将返回值更改为字符串文字，以查看问题出在类和方法名称还是属性中。我仍然没有得到任何东西。我认为下划线可能在我的代码上耍花招。

我的扩展键是`wedo_extendnews`，新字段是`tx_wedoextendnews_location`. 错误所在的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:21:52.813

是的。为了能够访问流体中的对象，您需要模型中的相应设置器，并且可能（现在不确定）TCA 中的条目。

如果要访问`{newsItem.mycustomfield}`，则需要模型中的相应设置器，例如`public function getMycustomfield()`（注意`get`in `get<Myfuncname>`，它是强制性的）。

# git - 从更新的 git 子模块重新同步生成文件？

> ID：15294990
> 
> 赞同：0
> 
> 时间：2013-03-08T13:24:25.380
> 
> 标签：git, version-control

我（希望）有一个相对简单的 git 问题，但我是一个 git 新手，并不了解所有的词汇。

我正在尝试将[R2D3](https://github.com/mhemesath/r2d3/)更新到最新版本的 D3.js。回购的[所有者表示，](https://github.com/mhemesath/r2d3/issues/77)步骤如下：

1.  将 D3 子模块指向 v3.0.6（最新）标签。
2.  重新同步 makefile 以包含添加/删除的任何其他文件
3.  运行测试以确保没有任何退步。

我知道如何做第 1 点和第 3 点，并更新了子模块。问题是我不知道第 2 点中的“重新同步 makefile”是什么意思！

我可以看到 repo 的核心有一个 makefile。在我更新子模块之前它运行正常，现在如果我运行`make`我现在得到以下错误：

```
No rule to make target lib/d3/src/core/this.js, needed by r2d3.core.js. Stop. 
```

所以很明显确实需要更新一些东西，但是我如何同步 makefile 以及从哪里同步？这是否只是意味着“编辑它以匹配新的 D3 生成文件”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:19:19.860

我更新了 R2D3 以指向最新版本的 D3。请查看 v0.1.0

仅供参考：重新同步 makefile 意味着从 D3 v3 获取最新的 makefile 并换出修补的模块。您可以通过将 D3 生成文件与 R2D3 中的生成文件进行比较来了解我的意思。

# asp.net - 像另一个现有网站一样设计 asp.net 网站母版页？

> ID：15294991
> 
> 赞同：-5
> 
> 时间：2013-03-08T13:24:28.140
> 
> 标签：asp.net, html, css, visual-studio-2008

我正在设计一个网站的母版页，我正在设计 asp.net 网络表单。喜欢这个网站：

[http://bayyinah.com/dream./](http://bayyinah.com/dream./)

我已经处理了一些东西，下面是我的网站现在真正看起来的图像：

![在此处输入图像描述](../Images/1f501644a2d7cdc6b079e3c800b00835.png)

我必须使用[http://bayyinah.com/dream中的 jquery 制作页脚和菜单。/](http://bayyinah.com/dream./)

这是我的母版页html：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="LeaveManagementSystemMasterPage.master.cs" Inherits="LeaveManagementSystemMasterPage" %> 
```

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
 <title></title>
  <asp:ContentPlaceHolder id="head" runat="server">

  </asp:ContentPlaceHolder>
  <link rel="Stylesheet" type="text/css" href="Menu.css" />
</head>
<body>
 <form id="form1" runat="server">
  <div>
   <table style="width:100%;height:100%">
  <tr>
    <td>
    <table width="100%" style="background-color: #202020">
        <tr>
            <td>
                <asp:Image runat="server" ImageUrl="~/Images/LeaveImage.PNG"/>
            </td>
            <td width="100%">
            </td>
        </tr>        
    </table>
              <%-- Provide header in the cell--%>
    </td>

</tr>

<tr>
    <td>      
        <asp:Menu ID="Menu1" runat="server" Orientation="Horizontal" Width="100%" MaximumDynamicDisplayLevels="10" CssClass="MenuBar">
            <StaticMenuStyle CssClass="StaticMenuItem" />
            <StaticMenuItemStyle CssClass="StaticMenuItemStyle" />
            <StaticHoverStyle CssClass="StaticHoverStyle" />
            <StaticSelectedStyle CssClass="StaticSelectedStyle" />
            <DynamicMenuItemStyle CssClass="DynamicMenuItemStyle" />
            <DynamicHoverStyle CssClass="DynamicHoverStyle" />
        </asp:Menu>        
    </td>
</tr>

 <tr>

    <td>

    content here.
        <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">
        </asp:ContentPlaceHolder>
   </td>
 </tr>

 <tr>
 <%--Footer would be provided here--%>
    <td >
    footer here

    </td>
 </tr>

</table>
</div>
</form>
</body>
</html> 
```

请注意，该网站与我在之前的问题中提到的网站相同：

1.  [在 asp.net 中设置数据驱动器菜单控件的样式](https://stackoverflow.com/questions/15288836/styling-a-data-drive-menu-control-in-asp-net)

2.  [在 asp.net 中创建数据驱动菜单的问题](https://stackoverflow.com/questions/15269261/issue-in-creating-a-data-driven-menu-in-asp-net)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:21:26.927

如果您正在寻找一般建议，那么 Stack Overflow 是一个错误的地方。我建议您查看[常见](https://stackoverflow.com/faq)问题解答以确定要问什么样的问题。

话虽如此，我确实有一些建议给你。我会放弃 IE8 进行开发。学习在 Chrome（或带有 Firebug 的 Firefox）上开发，然后看看它是否适用于其他浏览器。以 IE8 正在下降的速度，它只会是一两年内的问题。由于您似乎是为了乐趣或爱好而学习 Web 开发，所以我认为这不值得痛苦。您可以通过按 F12 在 Chrome 中调出开发人员工具。学习使用这些工具。

至于 Web 表单，它们有时可能难以处理。学习 MVC 架构将帮助您了解如何对网站进行编程。这并不是说您不会在工作场所遇到 Web 表单。我个人很少处理网络表单。

您似乎在理解 CSS 时遇到了问题。我建议你学习一下盒子模型。[Mozilla 开发者网络](https://developer.mozilla.org/en-US/)和[w3schools](http://www.w3schools.com)是帮助您入门的绝佳资源。如果 w3schools 有时会给您不好的建议，请不要感到惊讶。当我刚开始的时候，它帮助我学到了很多东西，但它不是一个学习最佳实践的地方。

如果其他人有更多建议可以添加，请随意。在大学四年级时，我还是个新手。也请随时纠正我。

# apache2 - 如何禁用 apache2 错误日志记录？

> ID：15294999
> 
> 赞同：0
> 
> 时间：2013-03-08T13:25:03.867
> 
> 标签：apache2

在`/etc/apache2/apache2.conf`我取消注释以下行：

`# ErrorLog ${APACHE_LOG_DIR}/error.log`

结果如下：

```
serv:/var/log/apache2# /etc/init.d/apache2 restart
Restarting web server: apache2 ... waiting (2)No such file or directory: apache2: could not open error log file /etc/apache2/logs/error_log.
Unable to open logs
Action 'start' failed.
The Apache error log may have more information.
 failed! 
```

如何禁用不包含 ErrorLog/CustomLog 指令的虚拟主机的错误日志记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:32:37.060

如您所见，apache 无法打开日志文件。在这种情况下，您必须更改

```
/etc/apache2/apache2.conf 
```

和

```
/etc/apache2/${APACHE_LOG_DIR}/error.log 
```

这个决议可以在[说明 apache ubuntu 论坛](http://ubuntuforums.org/showthread.php?t=1639623)中看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T06:31:00.587

尝试使用以下命令启动 apache

```
service apache2 start 
```